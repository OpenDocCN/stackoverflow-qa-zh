# StackOverflow 问答 12001000-12001999

# c# - Mysql 异常无法连接到任何指定的主机 - 仅限 WPF

> ID：12001000
> 
> 赞同：0
> 
> 时间：2012-08-17T06:47:51.163
> 
> 标签：c#, mysql, wpf, connection

我知道类似的问题已经在这里解决了，但这有点奇怪......

当我尝试在 WPF 中使用 Connector/NET 连接到远程 Mysql 时，我得到一个 XAMLParseException。内部异常表示它无法连接到任何指定的主机。但是，当我尝试使用 WinForms 而不是 WPF 时，它运行良好，所以我相信连接字符串、服务器设置和 MySQL 程序集都可以正常工作。所以问题可能出在 XAML 中。这是 MainWindow.xaml

```
<Window x:Class="_min_t1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Label Content="Label" Height="58" HorizontalAlignment="Left" Margin="72,35,0,0" Name="label1" VerticalAlignment="Top" Width="161" />
</Grid> 
```

但这正是 VS 为新项目生成的内容......

有任何想法吗？

# iphone - 选择的 UIButton 不起作用

> ID：12001003
> 
> 赞同：1
> 
> 时间：2012-08-17T06:48:04.540
> 
> 标签：iphone, ios, cocoa-touch, uibutton

简单，但不工作！有人可以帮忙吗？我想要的只是切换 UIButton 的选择，代码如下：

```
-(IBAction) buttonPressed:(id)sender {
    if ([self.mybutton isSelected]) {
        NSLog(@"selected");
        [self.mybutton setSelected:NO];
    } else {
       NSLog(@"not selected");
        [self.mybutton setSelected:YES];
    }
    NSLog([self.mybutton isSelected] ? @"Yes" : @"No");
} 
```

尽管我多次按下按钮，但每次打印的内容都是“未选择”和“否”。为什么 UIButton 没有设置为“选定”状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:16:04.660

由于您的代码似乎是正确的，您可以通过这种方式使其更简单：

```
-(IBAction) buttonPressed:(UIButton *)sender {
   sender.selected = !sender.selected;
} 
```

为什么您的代码无法正常工作？可能`self.mybutton`是`nil`（你可以检查出来）。检查您的插座连接和属性定义...参考：发送消息而不是`nil`对象，`nil`如果它是简单类型，则返回其中一个或默认值（0 表示`int`，`NO`for`BOOL`等）

# sql - {Server Name} localhost 与 .\SqlExpress 有什么区别

> ID：12001006
> 
> 赞同：2
> 
> 时间：2012-08-17T06:48:11.793
> 
> 标签：sql, sql-server-2008, sql-server-2005

你能告诉我 {Server Name} (local),localhost,(pc-name)\SQLEXPRESS,.\SqlExpress 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:58:55.247

好吧，您的 SQL Server 实例的实例名称就是您机器的主机名，如果它是标准实例的话。每个主机只能有一个标准实例。

假设您的服务器机器具有该名称`srv1`，并且您在其上安装了 Sql Server 2008 R2 作为标准实例。然后您可以将其称为：`srv1`，`(local)`或只是`.`。如果您从`srv1`机器连接到服务器，后两个名称才有意义。

如果您安装任何其他实例，则必须选择一个命名实例，并且该名称将附加到主机名，中间有一个反斜杠，例如`srv1\sqlexpress`. 您可以通过`srv1\sqlexpress`或连接到它`.\sqlexpress`，后者只能从机器本身进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:57:24.627

**(pc-name)\SQLEXPRESS, & .\SqlExpress -** 归结为相同的东西（称为 SQL express 的 sql 实例），唯一的区别在于它位于哪个 PC/网络节点上，后者将连接到实例在您的本地机器上

**localhost** - 将 sql 实例指定为您的本地实例

# iphone - 实施 Adwhirl 的问题

> ID：12001009
> 
> 赞同：0
> 
> 时间：2012-08-17T06:48:23.387
> 
> 标签：iphone, ios, adwhirl

我正在我的 iOS 项目中实现 ad-whirl。我需要 3 个网络在我的应用中投放广告：Admob、Millennial Media 和 iAd。我已经在我的 ad-whirl 帐户上激活了这 3 个网络，并下载了 Adwhirl 的示例 SDK。但是 Adnetworkslib 文件夹是空的 - 如何将这些网络库添加到我的项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T15:36:05.117

您需要单独下载这些 SDK，它们不与 AdWhirl 打包在一起。[您可以从这里](http://mmedia.com/?refsite=developer#developerHome)下载 Millennial，也可以从[这里](https://developers.google.com/mobile-ads-sdk/download)下载AdMob 。

我相信 iAd 只是一个链接框架，您可以在 XCode 中添加到您的项目中。

# authentication - WSO2 ESB 中代理服务器的基本身份验证而不是 UsernameToken

> ID：12001010
> 
> 赞同：2
> 
> 时间：2012-08-17T06:48:24.703
> 
> 标签：authentication, wso2, wso2esb

我在 WSO2 ESB 中创建了一个代理服务并设置了 UsernameToken 身份验证。但是，使用捆绑在 JDK 中的 JAX-WS 配置 UsernameToken 似乎并不容易（如此[处](http://www.jroller.com/gmazza/entry/metro_usernametoken_profile)所述），必须对 JDK 进行修补等等。有没有办法使用带有 ESB 凭据的基本 HTTP 身份验证，就像 UsernameToken 一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:07:25.800

根据 Amila Suriarachchi 的文章[“Securing Web Service Integration”](http://wso2.org/library/articles/2011/06/securing-web-service-integration "保护 Web 服务集成")，“WSO2 carbon 通过转换 POX 消息支持 UT，即使使用 HTTP 基本身份验证”，但我不确定这是否与您的兴趣相关。

然而，使用 JAX-WS 客户端配置 UsernameToken 授权并不像看起来那么难。您所要做的就是创建一个实现 javax.xml.ws.handler.soap.SOAPHandler 的类，并通过覆盖 handleMessage(SOAPMessageContext messageContext) 方法在出站消息中添加安全标头。

我的 java 版本是 1.6.0_26（没有应用上述补丁），并且 Web 服务客户端存根类是由 JAX-WS RI 2.1.7 根据 Web 服务的 wsdl 生成的，由 UsernameToken 场景保护并公开通过 WSO2 Carbon Server（即 Data Services Server-2.6.3）

我使用[Apache WSS4J](http://ws.apache.org/wss4j/ "Apache WSS4J - Java 的 Web 服务安全性")创建安全标头——在本例中，只需实例化一个 org.apache.ws.security.message.WSSecUsernameToken 对象并通过 setUserInfo(String user, String password) 方法设置用户名和密码。此外，还应将时间戳元素添加到传出 SOAP 消息的安全标头中。示例实现可能如下所示：

```
public boolean handleMessage(SOAPMessageContext messageContext) {
    Boolean isOutboundMessage = (Boolean) messageContext.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    if (isOutboundMessage) {
        SOAPPart messageSoapPart = messageContext.getMessage().getSOAPPart();

        WSSecHeader securityHeader = new WSSecHeader();
        securityHeader.insertSecurityHeader(messageSoapPart);
        WSSecUsernameToken usernameToken = new WSSecUsernameToken();

        usernameToken.setPasswordType(WSConstants.PASSWORD_TEXT);
        usernameToken.setUserInfo("root", "top_secret");

        WSSecTimestamp timestamp = new WSSecTimestamp();

        usernameToken.build(messageSoapPart, securityHeader);
        timestamp.build(messageSoapPart, securityHeader);
    }

    return true;
} 
```

另一件重要的事情是 SOAP 标头元素可能带有 mustUnderstand 全局 SOAP 属性。参考 Jim White 的文章[Working with Headers in JAX-WS SOAPHandlers](http://www.intertech.com/Blog/Post/Working-with-Headers-in-JAX-WS-SOAPHandlers.aspx "在 JAX-WS SOAPHandler 中使用标头")，此属性用于指示 Web 服务接收者或中介是否需要在处理消息之前理解 header 元素。

如果 mustUnderstand 元素设置为 true (soapenv:mustUnderstand="1")，则应该对 getHeaders() 方法进行编码，以告诉运行时环境 SOAP 处理程序将通过返回一组来处理 mustUnderstand 标头元素与 mustUnderstand 标头元素匹配的 QName（限定名称）对象。下面是处理 Security 标头的 getHeaders() 方法。

```
public Set<QName> getHeaders() {
    final String NAMESPACE_URI = "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd";
    final String LOCAL_PART = "Security";
    final String PREFIX = "wsse";

    final QName wssecurity = new QName(NAMESPACE_URI, LOCAL_PART, PREFIX);  
    final Set<QName> headers = new HashSet<QName>();
    headers.add(wssecurity);  

    return headers;  
} 
```

最后，在获取服务端口并调用其任何方法之前，您应该将上述类的一个实例（比如说 - UsernameTokenSecuritySoapHandler）注册到您的 Web 服务客户端的处理程序链中。这可以通过使用以下代码来完成：

```
 Service service = new Service();
    service.setHandlerResolver(new HandlerResolver() {
        public List<Handler> getHandlerChain(PortInfo portInfo) {
            List<Handler> handlers = new ArrayList<Handler>();
            handlers.add(new UsernameTokenSecuritySoapHandler());
            return handlers;
        }
    }); 
```

此外，您可以在[此处](http://www.javaworld.com/javaworld/jw-02-2007/jw-02-handler.html "掌握 JAX-WS API 的处理程序框架")找到Young Yang 撰写的一篇关于 JAX-WS API 处理程序框架的优秀文章。

希望这可以帮助。

# c# - 如果您尝试在单核计算机上使用 TPL 会发生什么？

> ID：12001013
> 
> 赞同：1
> 
> 时间：2012-08-17T06:48:39.113
> 
> 标签：c#, .net, multiprocessing, task-parallel-library

标题是正义的。

我正在构建一个使用 TPL 而不是 Backgroundworker 的应用程序，但我想知道如果您尝试在不使用多核 CPU 的机器上运行 TPL 会发生什么。

有没有兼容性问题？性能下降？还是应用程序繁荣？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:53:07.520

单核 PC 仍然可以进行线程处理。

一切都应该正常工作，线程池创建的线程数量非常少（默认为 1 或 2 个）。

您仍需支付 TPL 的间接费用，但通常不会获得任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:51:34.260

没有问题，没有明显的减速。当然，CPU 密集型任务也没有加速。TPL 会自动适应可用内核的数量。

# android - ImageView 中的图像定期更改。. .

> ID：12001015
> 
> 赞同：4
> 
> 时间：2012-08-17T06:48:45.420
> 
> 标签：android, ui-thread

```
package com.example.imagechange;

public class MainActivity extends Activity 
{

ImageView imageView;
int []imageArray={R.drawable.a0,R.drawable.a1,R.drawable.a2,R.drawable.a3};

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    imageView = (ImageView)findViewById(R.id.imageView1);

    final Handler handler = new Handler();
    Runnable runnable = new Runnable() 
    {
                int i=0;
                public void run() 
                {
                    imageView.setImageResource(imageArray[i]);
                    i++;
                    if(i>imageArray.length-1)
                    {
                    i=0;    
                    }
                    handler.postDelayed(this, 3000);  //for interval...
                }

    };
            handler.postDelayed(runnable, 1000); //for initial delay..
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }
 } 
```

我的 ACTIVITY_MAIN ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="150dp"
    android:layout_height="150dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:contentDescription="@string/app_name"
    android:layout_marginTop="56dp"
    android:src="@drawable/a0" />

</RelativeLayout> 
```

所以在上面的代码中，我复制了drawable中的图像并定期更改它，但我需要`url`从`ImageView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-24T11:04:11.620

```
ImageView MyImageView;
int []imageArray={R.drawable.a,R.drawable.b,R.drawable.c,R.drawable.d};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.one);
    MyImageView=(ImageView)findViewById(R.id.imageView1);

    /*here the countdown start for images*/

    final Handler handler = new Handler();
    Runnable runnable = new Runnable() {
       int i=0;
       public void run() {
           MyImageView.setImageResource(imageArray[i]);
           i++;
           if(i>imageArray.length-1) {
               i=0;    
           }
           handler.postDelayed(this, 500);  //for interval...
       }
   };
   handler.postDelayed(runnable, 2000); //for initial delay..
    /*here the button click counter start */
} 
```

在 中创建第一个可绘制文件夹`re>layouts>drawable`，并在其中放置图像 a.png、b.png 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:16:11.447

尝试以下代码：首先，您需要从 URL 获取图像路径，然后将该 URL 传递给此函数。

```
public static Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

没什么太复杂的——只需使用“src”字符串创建一个 URL 对象（即 String src = “http://thinkandroid.wordpress.com”），连接到它，然后使用 Android 的 BitmapFactory 类来解码输入流。结果应该是您想要的 Bitmap 对象！在那之后：

```
imageView.setImageBitmap(bitmap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:25:52.207

您的代码从行中的资源设置图像

> imageView.setImageResource(imageArray[i]);

您想要做的是使用[UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)从 URL 加载图像。

# etherpad - 如何删除 etherpad-lite 中的焊盘

> ID：12001016
> 
> 赞同：9
> 
> 时间：2012-08-17T06:48:48.103
> 
> 标签：etherpad

可能吗？如何？我只能创建或编辑创建。我正在使用我自己的服务器。我想管理或至少删除一些垫。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T08:31:48.833

如果您仍然期待答案：通过提供的 api。您需要 api 密钥（例如 /var/etherpad-lite/APIKEY.txt）和要删除的 pad 的 id（例如 mypad）。然后你发送一个简单的http请求到

[http://yourserver.org:9001/api/1/deletePad?apikey=yourkey&padID=mypad](http://yourserver.org:9001/api/1/deletePad?apikey=yourkey&padID=mypad)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:22:39.690

或者，如果您想要一个开源解决方案：[https](https://github.com/Visono/padlister) ://github.com/Visono/padlister 希望它有效，这是我的第一个开源项目；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T07:50:10.567

该`ep_adminpads`插件可用于列出和删除 pads - 它由 npm 安装：请参阅[npmjs](https://www.npmjs.com/package/ep_adminpads)或[github](https://github.com/spcsser/ep_adminpads)甚至从安装`/admin`内部的路线中查看`etherpad`。

# oracle - 为什么我必须双引号模式名称和表名称才能从 Oracle 表中查询？

> ID：12001017
> 
> 赞同：3
> 
> 时间：2012-08-17T06:48:53.173
> 
> 标签：oracle

我是 Oracle 的新手，我遇到了以下问题。为什么我必须双引号模式名称和表名才能从表中查询？有什么设置可以改变吗？

谢谢。

```
SQL> conn sys/ogrish@orcl as sysdba
Connected.
SQL> show user
USER is "SYS"
SQL> select * from v$version;

BANNER
--------------------------------------------------------------------------------
Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - 64bit Production
PL/SQL Release 11.2.0.1.0 - Production
CORE    11.2.0.1.0      Production
TNS for 64-bit Windows: Version 11.2.0.1.0 - Production
NLSRTL Version 11.2.0.1.0 - Production

SQL> select * from m.album;
select * from m.album
                *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> select * from M.Album where rownum < 2;
select * from M.Album where rownum < 2;
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> select * from "M"."Album" where rownum < 2;

   AlbumId Title
---------- ----------------------------------------------------------------------
         1 For Those About To Rock We Salute You

SQL> conn m/m@orcl
Connected.
SQL> select table_name from user_tables;

TABLE_NAME
------------------------------
Album
Artist
Customer
Employee
Genre
Invoice
InvoiceLine
MediaType
Playlist
PlaylistTrack
sysdiagrams

TABLE_NAME
------------------------------
Track

12 rows selected.

SQL> select * from album where rownum < 2;
select * from album where rownum < 2;
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> select * from Album where rownum < 2;
select * from Album where rownum < 2
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> select * from m.album where rownum < 2;
select * from m.album where rownum < 2
                *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> select * from M.Album where rownum < 2;
select * from M.Album where rownum < 2
                *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> select * from "M"."Album" where rownum < 2;

   AlbumId Title
---------- ----------------------------------------------------------------------
         1 For Those About To Rock We Salute You

SQL> select * from "Album" where rownum < 2;

   AlbumId Title
---------- ----------------------------------------------------------------------
         1 For Those About To Rock We Salute You

SQL> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T06:58:22.180

您不必在模式名称上添加双引号，但您必须在表名上添加双引号，因为您使用引号创建了它（这使其区分大小写）：

```
select * from M."Album" 
```

也应该工作。否则 M.Album 默认翻译为 M.ALBUM - 并且表 ALBUM 不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:01:51.627

您可以通过使用同义词来避免预先固定模式名称的需要。

# asp.net - 使用 iframe 调用我的 aspx 页面到 html 页面，怎么做？

> ID：12001021
> 
> 赞同：0
> 
> 时间：2012-08-17T06:49:02.810
> 
> 标签：asp.net, html

我有一个错误，当我`iframe`在 html 中给出代码时

```
<iframe  runat="server" src="~/Contactus.aspx" style="width: 840px; height: 233px"></iframe> 
```

`src`路径已正确给出。但它显示了错误：

> “/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。请求的 URL：/联系我们/~/Contactus.aspx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:23:34.843

查看返回的错误：`Requested URL: /contact us/~/Contactus.aspx`

尝试修改代码如下：

```
<iframe  runat="server" src="Contactus.aspx" style="width: 840px; height: 233px"></iframe> 
```

# c# - 如何在 C# 中检查内容类型/应用程序文本

> ID：12001023
> 
> 赞同：0
> 
> 时间：2012-08-17T06:49:05.030
> 
> 标签：c#

我使用此代码检查内容类型：

字符串文件大小 = FileUpload1.PostedFile.ContentType;

但如果我以 .txt 格式保存其他文件，则表示允许。

如何在c#中检查原始文本文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:59:39.543

如果我了解您的问题，您正在寻找验证发布的文件类型。如果是这样，那么您可以检查文件扩展名。

```
if(FileUpload1.PostedFile.FileName.ToLowerInvariant().EndsWith(".txt"))
{
     // Do stuffs
} 
```

**更新**评论：如果文件出现故障，那么您可以使用下面的方法来验证它是否是二进制文件；如果不是，您可以将其视为文本文件。好吧，为了使用这种方法，您需要临时保存文件或需要更改方法以便它可以直接从流中读取。

**注意：**此方法不能为您提供 100% 准确的结果。但是，您可以预期 70-80%。这是此代码的[源链接](http://www.entechsolutions.com/how-to-detect-if-file-is-text-or-binary-using-c)。

```
private bool IsBinaryFile(string filePath, int sampleSize = 10240)
{
    if (!File.Exists(filePath))
        throw  new ArgumentException("File path is not valid", filePath);

    var buffer = new char[sampleSize];
    string sampleContent;

    using (var sr = new StreamReader(filePath))
    {
        int length = sr.Read(buffer, 0, sampleSize);
        sampleContent = new string(buffer, 0, length);
    }

    //Look for 4 consecutive binary zeroes
    if (sampleContent.Contains("\0\0\0\0"))
        return true;

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:45:41.927

试试这个（从一个[类似的问题](https://stackoverflow.com/questions/81283/asp-net-how-to-detect-file-upload-mime-type)中得到它）：

```
string contentType = FileUpload1.PostedFile.ContentType 
```

# java - Java（或任何其他语言）中的 SQL 注入指南

> ID：12001025
> 
> 赞同：0
> 
> 时间：2012-08-17T06:49:10.920
> 
> 标签：java, sql, prepared-statement, sql-injection

我有一个jsp代码，它有一个类似的查询

```
'select * from MyTable where

Column1='+request.getParameter('q'), 
```

从一个执行

java.sql.语句。现在，只要我们可以使用

请求参数，我的目标是将查询更改为：

```
Select * from MyTable where Column1 = a; Delete from MyTable; 
```

由于原始选择查询是通过 java.sql.Statement 执行的，

我们怎么能做这样的sql注入？如果问题不清楚，请

评论，我会尽力提供进一步的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:20:53.107

SQL 注入指南：[Link1](http://www.appsecinc.com/presentations/Manipulating_SQL_Server_Using_SQL_Injection.pdf) & [Link2](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)，但是 Stackoverflow 中有很多关于 SQL 注入的相关线程，比如[Q & A](https://stackoverflow.com/questions/1812891/java-escape-string-to-prevent-sql-injection)。

做一件事，搜索 -> sql injection java stackoverflow

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:59:20.597

如果我们将 q 作为 a 注入，`anything' OR 'x'='x`那么它将选择所有可能易受攻击的列。因为作为参数传递给准备好的语句的变量将被 JDBC 驱动程序自动转义

尽管 Prepared Statements 有助于防御 SQL 注入，但通过不恰当地使用 Prepared Statements 可能会引发 SQL 注入攻击。下面的示例解释了这种情况，其中输入变量直接传递到 Prepared Statement 中，从而为 SQL 注入攻击铺平了道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-08T15:05:46.330

查看[这篇文章](https://vladmihalcea.com/a-beginners-guide-to-sql-injection-and-how-you-should-prevent-it/)，它解释了`Statement`and `PreparedStatement`，以及`executeQuery()`和`executeUpdate()`在 SQL 注入方面的行为。

除了经典的`DROP`表格，还有更多的场景需要注意，比如：

*   调用 sleep 函数，使您的所有数据库连接都处于忙碌状态，从而使您的应用程序不可用
*   从数据库中提取敏感数据
*   [绕过用户认证](https://www.owasp.org/index.php/SQL_Injection)

不仅仅是 SQL 会受到影响。如果您不使用绑定参数，甚至 JPQL 也会受到影响。

最重要的是，在构建 SQL 语句时，您永远不应该使用字符串连接。为此目的使用专用 API：

*   [JPA 标准 API](https://vladmihalcea.com/hibernate-facts-always-check-criteria-api-sql-queries/)
*   [约克](http://www.jooq.org/)

# wordpress - 如何使用 cp_address_line 在地图上显示新帖子？

> ID：12001028
> 
> 赞同：0
> 
> 时间：2012-08-17T06:49:32.947
> 
> 标签：wordpress, map

我已经从几个文本框中更改了地址字段：cp_street、cp_city、cp_state、cp_country 和 cp_zip

进入

cp_address_line。

旧帖子显示在地图上，但新帖子未显示。请告诉我为什么这段代码是错误的：

```
 <?php
add_action('wp_ajax_query_geo_ads', 'query_geo_ads');
add_action('wp_ajax_nopriv_query_geo_ads', 'query_geo_ads');
add_action('wp_ajax_get_image_url', 'get_image_url');
add_action('wp_ajax_nopriv_get_image_url', 'get_image_url');

add_action('wp_ajax_query_total', 'query_total');
add_action('wp_ajax_nopriv_query_total', 'query_total');

if (defined('MULTISITE') && (MULTISITE))
{

    if (!defined('TT'))
        define('TT', plugins_url('/geo-ads/timthumb_wpmu.php'));
}
else
{
    if (!defined('TT'))
        define('TT', plugins_url('/geo-ads/timthumb.php'));
}

function query_total()
{
    global $wpdb;
    $table = $wpdb->prefix.'cp_ad_geocodes';

    $q = "SELECT COUNT(*) FROM $table t LEFT JOIN $wpdb->posts p ON (p.ID = t.post_id) WHERE p.post_status = 'publish'";
    $c = $wpdb->get_var($q);
    echo $c;

    die();

}

function query_geo_ads()
{   
    if ($_GET['range'] == 'true') {
        query_geo_ads_refresh();
    }
    else {
    global $wpdb;   
    $table = $wpdb->prefix.'cp_ad_geocodes';
    $querystr = "SELECT t.post_id, t.category, t.lat, t.lng, p.post_title, p.post_content, m.meta_value as price, CONCAT(wpo_su.option_value, REPLACE( REPLACE( REPLACE( REPLACE(wpo.option_value,'%year%',date_format(p.post_date,'%Y')) ,'%monthnum%',date_format(p.post_date,'%m')) ,'%day%',date_format(p.post_date,'%d')) ,'%postname%',p.post_name ) ) as permalink 
                FROM  $table t LEFT JOIN $wpdb->posts p ON (p.ID = t.post_id)
                INNER JOIN $wpdb->options wpo ON wpo.option_name='permalink_structure'
                INNER JOIN $wpdb->options wpo_su ON wpo_su.option_name='siteurl'
                LEFT JOIN $wpdb->postmeta m ON (m.meta_key = 'cp_price') AND (m.post_id = p.ID)
                WHERE p.post_status = 'publish' 
                    AND p.post_type = 'ad_listing' ";       

    $ads = $wpdb->get_results($querystr);   

    $expires = 50000;
    $cache_time = mktime();

    header("Cache-Control: max-age:" . $expires . ", must-revalidate"); 
    header("Expires: " . gmdate("D, d M Y H:i:s",$cache_time+$expires) . " GMT");

    echo json_encode($ads); 
    die();
    }
}

function get_image_url()
{   $post_id = intval($_POST['id']);
    $attachment = get_posts(array('post_type' => 'attachment','post_status' => 'publish','order' => 'ASC','orderby' => 'post_date','post_mime_type' => 'image','post_parent' => $post_id));
    $height = 100;
    $width = 100;
    $url = TT.'?src='.wp_get_attachment_url($attachment[0]->ID, false).'&h='.$height.'&w='.$width;                      
    if ($attachment)
        echo $url;
    die();
}

function query_geo_ads_refresh() {
?>
<div class="undertab"><span class="big">Classified Ads / <strong><span class="colour">Just Listed</span></strong></span></div>
<?php
    global $wpdb,$wp_query, $post;

    $exclude_categories = $_REQUEST['exclude_categories'];
    $term_id = $_REQUEST['term_id'];
    $term_slug = $_REQUEST['term_slug'];
    $taxonomy_name = $_REQUEST['taxonomy_name'];
    $northeast_lng = $_REQUEST['northeast_lng'];
    $northeast_lat = $_REQUEST['northeast_lat'];
    $southwest_lng = $_REQUEST['southwest_lng'];
    $southwest_lat = $_REQUEST['southwest_lat'];

    if(!empty($exclude_categories)) {
        $exclude_categories = explode(';', $exclude_categories);
    }
    if(!$term_id) // this means root
        //$term_categories = get_terms( 'ad_cat', 'orderby=count&hide_empty=0' );
        $term_categories = get_terms( 'ad_cat', 'order=DESC','orderby=post_date' );
    else {
        $current_term = get_term_by( 'slug', $term_slug, $taxonomy_name );
        $term_categories = get_terms( $taxonomy_name, 'order=DESC','orderby=post_date' );

        if(empty($term_categories))
            $term_categories[] = $current_term;
    }

    foreach ($term_categories as $catinfo_obj)
    {
        $term_id = $catinfo_obj->term_id;
        $arrsrch = array("'");
        $arrrep = array('');
        $name = htmlspecialchars_decode($catinfo_obj->name);
        $name = strtolower(str_replace($arrsrch,$arrrep,$name));
        if(!empty($exclude_categories)) {
            if(in_array(strtolower($name), $exclude_categories))
                continue;
        }
        $subterm_ids = get_term_children( $term_id, 'ad_cat' );
        $subterm_ids[] = $term_id;
        $term_ids = implode(',', $subterm_ids);

        if($term_id)
        {
            $my_post_type = "'ad_listing'";
            $sql = "select * from $wpdb->posts p where p.post_type in ($my_post_type) and p.post_status in ('publish') and p.ID in (select tr.object_id from $wpdb->term_relationships tr join $wpdb->term_taxonomy t on t.term_taxonomy_id=tr.term_taxonomy_id where t.term_id in ($term_ids) )";

            $postinfo = $wpdb->get_results($sql);

            $data_arr = array();
            $geo_codes = array();

            if($postinfo)
            {
                $srcharr = array("'");
                $replarr = array("\'");
                foreach($postinfo as $postinfo_obj)
                {
                    $ID = $postinfo_obj->ID;
                    $title = str_replace($srcharr,$replarr,($postinfo_obj->post_title));
                    $plink = get_permalink($postinfo_obj->ID);

                    $geocode = cp_get_geocode($ID);
                    $lat = $geocode['lat'];
                    $lng = $geocode['lng'];
                    // check current post geo place is within map coord area
                    if($lat > $northeast_lat || $lat < $southwest_lat)
                       continue;
                    if($northeast_lng > $southwest_lng) {
                        if($lng > $northeast_lng || $lng < $southwest_lng)
                            continue;
                    } else {
                        if($lng > 0 && $lng < $southwest_lng)
                            continue;
                        if($lng < 0 && $lng > $northeast_lng)
                            continue;
                    }
                    $address = get_post_meta($ID,'cp_address_line',true);
                    if(!empty($address))
                        $address = str_replace($srcharr,$replarr,(get_post_meta($ID,'cp_address_line',true)));
                    else {
                        $street = get_post_meta($ID,'cp_street',true);
                        $city = get_post_meta($ID,'cp_city',true);
                        $state = get_post_meta($ID,'cp_state',true);
                        $country = get_post_meta($ID,'cp_country',true);
                        if(!empty($street))
                            $address .= $street . ', ';
                        if(!empty($city))
                            $address .= $city . ', ';
                        if(!empty($state))
                            $address .= $state . ', ';
                        if(!empty($country))
                            $address .= $country . ', ';
                        $address = trim($address);
                        $address = substr($address, 0, strlen($address)-1);
                        $address = str_replace($srcharr,$replarr,$address);
                    }

                    $phone = str_replace($srcharr,$replarr,(get_post_meta($ID,'cp_phone',true)));
                    $email = str_replace($srcharr,$replarr,(get_post_meta($ID,'cp_email',true)));
                    $author = get_userdata($postinfo_obj->post_author);
            $category = get_the_category($postinfo_obj->ID);
                    if($postinfo_obj->post_type == 'ad_listing') {
                        $timing = date('M d, Y',strtotime(get_post_meta($ID,'cp_start_date',true))).' to '.date('M d, Y',strtotime(get_post_meta($ID,'cp_end_date',true)));
                    } else {
                        $timing = date('M d, Y',strtotime(get_post_meta($ID,'st_date',true))).' to '.date('M d, Y',strtotime(get_post_meta($ID,'end_date',true))).'<br />'.get_post_meta($ID,'st_time',true).' to '.get_post_meta($ID,'end_time',true);
                    }
                ?>
                    <?php appthemes_before_post(); ?>

        <div class="post-block-out">

            <div class="post-block">

                <div class="post-left">

                    <?php if ( get_option('cp_ad_images') == 'yes' ) cp_ad_loop_thumbnail($ID); ?>

                </div>
                <div class="<?php if ( get_option('cp_ad_images') == 'yes' ) echo 'post-right'; else echo 'post-right-no-img'; ?> <?php echo get_option('cp_ad_right_class'); ?>">

                <!--    <h3><a href="<?php echo $plink; ?>"><?php if ( mb_strlen( $title ) >= 75 ) echo mb_substr( $title, 0, 75 ).'...'; else echo $title; ?></a></h3>

                    <div class="clr"></div>

                    <p class="post-meta">
                    <span class="folder">
                    <a href="/ad-category/<?php echo $catinfo_obj->slug; ?>/">
                    <?php echo $name; ?>
                    </a>
                </span> | 
                <span class="owner">
                    <a href="/author/<?php echo $author->user_nicename; ?>">
                        <?php echo $author->display_name; ?>
                    </a>
                </span> |
                <span class="clock"><span><?php echo $timing; ?></span></span>
                </p>-->

                </div>

                <div class="clr"></div>

            </div><!-- /post-block -->

        </div><!-- /post-block-out -->
     <?php
                }
            }            
        }        
    }

    die();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T11:11:09.673

似乎`die()`最后调用每个函数，阻止它返回成功状态码。

删除`die()`每个处理程序函数的最后一个，这些操作应该可以正常工作。

# webgl - 在 webgl 中绘制一个简单的正方形

> ID：12001030
> 
> 赞同：0
> 
> 时间：2012-08-17T06:49:54.220
> 
> 标签：webgl

我有一个非常基本的问题。我是 webgl 的新手，想画一个简单的正方形。我正在使用 gl 矩阵库进行矩阵操作。

Javascript代码：

```
squareVertexPositionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, squareVertexPositionBuffer);
    vertices = [
         0.9,  0.9,  0.0,1.0,
        -0.9,  0.9,  0.0,1.0,
         0.9, -0.9,  0.0,1.0,
        -0.9, -0.9,  0.0,1.0

    ];

    squareVertexPositionBuffer.itemSize = 4;
    squareVertexPositionBuffer.numItems = 4;

    mat4.identity(pMatrix);
    mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);
    mat4.identity(mvMatrix);
    mat4.translate(mvMatrix, [-1.5, 0.0, -7.0]);

    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute,         squareVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);
    setMatrixUniforms();
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, squareVertexPositionBuffer.numItems); 
```

着色器：

```
attribute vec3 aVertexPosition;

uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

varying vec3 debug;

void main(void) {
    gl_Position =  uPMatrix * uMVMatrix * vec4(aVertexPosition.xyz, 1.0);
    debug = aVertexPosition;
} 
```

这似乎很好。在这里，我将模型视图和透视矩阵作为制服传递给着色器程序，并将它们与那里的顶点坐标相乘。但是，如果将 javascript 中的模型视图和透视矩阵相乘，然后将修改后的顶点传递给着色器，它似乎不起作用。

我无法发现错误。帮助高度赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:37:51.390

马上我注意到几个问题：

1）您的顶点着色器输入属性与传递给vertexAttribPointer的参数不匹配：

您指定该属性为 4 个浮点宽，但您的顶点着色器将其指定为 vec3。这些应该是一致的。

2) 我没有看到对 enableVertexAttribArray 的调用，例如：

gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

您必须启用顶点着色器使用的顶点属性数组。

3）从显示的代码中 - 您只指定一个模型矩阵（身份，翻译）。您需要创建一个视图矩阵。一个简单的方法是调用 mat4.lookAt。它有以下定义：

mat4.lookAt = function (eye, center, up, dest)

eye 是相机的位置 center 是相机向上看的位置 应该始终是 (0, 1, 0)

一个例子是：

眼睛 = (0, 0, 1) 中心 = (0, 0, 0)

这将相机 1 单元放在 Z 轴正方向下方，并让它看着原点。

将此与您的模型矩阵相乘将为您提供模型视图矩阵。

* * *

缺少太多代码，因此很难确定您的错误是否出在其他地方。例如，您的片段着色器是做什么的？

* * *

当尝试在屏幕上显示您的第一个图元时，我建议禁用剔除和深度测试。如果您的片段输出与透明颜色匹配，请随着时间的推移改变您的透明颜色。

约翰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:09:44.967

约翰的回答中概述的问题值得研究，但如果您现在要正确渲染原语，那么我认为它们不是这个问题的根本原因。

由于我不确定哪种情况适用于您，因此我将答案分为两部分：

*   您没有展示如何构建 MVP 的 JavaScript 版本，但请仔细检查您的乘法语法是否正确。它应该是以下形式：

    ```
    mat4.multiply(p, mv, mvp); 
    ```

    其中`p`是投影矩阵，`mv`是模型视图矩阵，`mvp`是接收模型视图投影矩阵（将存储结果）。

*   同样，如果您自己预乘顶点位置，正确的语法是：

    ```
    mat4.multiplyVec4(mvp, vertex, transformedVertex); 
    ```

    其中`mvp`是模型视图投影矩阵，`vertex`是未修改的顶点 (a `vec4`)，是存储值`transformedVertex`的接收。`vec4`如果使用这种方法，则必须先将顶点数组展平为单个连续的浮点数组，然后再将它们发送到 GPU。

    注意不要`mat4.multiplyVec3`与`mat4.multiplyVec4`. 的第四个分量`vertex`应该设置`1`在乘法之前；这样，`transformedVertex`GPU 可以使用 的第四个组件来执行透视分割（这会自动发生，但您需要发送正确的值）。

    另请注意，如果您`vec3`错误地将属性发送到 GPU 并且该属性实际上是 type `vec4`，则第 4 个组件默认为 1.0。这通常很方便，但如果您在 JavaScript 中预乘这些值，也会导致棘手的错误。正如 John 所说，尽量保持着色器定义与 JavaScript 端一致；从长远来看，这将减少混乱。

# c# - 如果再次打开文件会出错

> ID：12001032
> 
> 赞同：-2
> 
> 时间：2012-08-17T06:50:12.467
> 
> 标签：c#, asp.net, file

我正在 .csv 文件中生成报告。

我正在使用下面的代码通过按钮单击事件上的代码打开一个 .csv 文件。

```
 StreamWriter sw = new StreamWriter(AbsolutePathAndFileName);

        //write header line
        int iColCount = TheDataTable.Columns.Count;
        for (int i = 0; i < iColCount; i++)
        {
            sw.Write(TheDataTable.Columns[i]);
            if (i < iColCount - 1)
            {
                sw.Write(separator);
            }
        }
        sw.Write(sw.NewLine);

        //write rows
        foreach (DataRow dr in TheDataTable.Rows)
        {
            for (int i = 0; i < iColCount; i++)
            {
                if (!Convert.IsDBNull(dr[i]))
                {
                    string data = dr[i].ToString();
                    data = data.Replace("\"", "\\\"").Replace(",", " ");
                    sw.Write(quote + data + quote);
                }
                if (i < iColCount - 1)
                {
                    sw.Write(separator);
                }
            }
            sw.Write(sw.NewLine);
        }
        sw.Close();

 MsgBox db = new MsgBox("Please select below option.", "Message", MessageBoxIcon.Information);
                db.SetButtons("Open Master File", "Save Master File", strBasePath + "\\master.csv");
                db.ShowDialog(this); 
```

这段代码对我来说很好。

现在我的文件处于打开模式。如果正在过滤另一个标准以再次打开报告（.csv 文件），那么它会向我抛出错误，该文件被另一个进程使用。

我该如何解决该错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:53:33.627

**[ChrisW](https://stackoverflow.com/users/79271/chrisw)**对**[Is there a way to check if a file is in use 给出了很好的回答？](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use/937558#937558)**

您可以使用以下示例代码检查您的文件是否正在使用中：

> ```
> protected virtual bool IsFileLocked(FileInfo file)
> {
>     FileStream stream = null;
> 
>     try
>     {
>         stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
>     }
>     catch (IOException)
>     {
>         //the file is unavailable because it is:
>         //still being written to
>         //or being processed by another thread
>         //or does not exist (has already been processed)
>         return true;
>     }
>     finally
>     {
>         if (stream != null)
>             stream.Close();
>     }
> 
>     //file is not locked
>     return false;
> } 
> ```

希望这可以帮助。

# ruby-on-rails - 以正确的方式实现缓存

> ID：12001034
> 
> 赞同：0
> 
> 时间：2012-08-17T06:50:17.660
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, caching

我是 Ruby on Rails 的新手（几天前才开始使用它）。我正在制作一个简单的 Web 前端来显示各种系统信息，包括 SMART 信息。我做了这个小课：

```
class SmartValues
    attr_reader :data
    KEYS  = [:id, :name, :flag, :value, :worst, :thresh, :type, :updated, :failed, :raw]

    def initialize(devices)
            @data = Hash[devices.map {|dev| [dev, SmartValues.getValues(dev)]}]
    end

    def self.getValues(device)
            lines = `sudo /usr/sbin/smartctl -A #{device}`.split("\n")[7..-1].collect! { |line| line.split }
            return lines.map { |line| Hash[KEYS.zip line] }
    end
end 
```

它工作正常，除了它像这样包含在我的控制器中：

```
class HomeController < ApplicationController
    def index
        @smart = SmartValues.new(["/dev/sda", "/dev/sdb", "/dev/sdc", "/dev/sdd", "/dev/sde", "/dev/sdf"]).data
    end
end 
```

所以它必须是**smartctl**二进制文件为页面的每个请求执行多次。我想添加某种缓存，以便定期更新信息，但不是每次请求。什么是正确的 RoR-ish 方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:16:53.990

```
def self.lines(device)
  Rails.cache.fetch("#{device}_lines", :namespace => "smart_values", :expires_in => 15.minutes) do
    `sudo /usr/sbin/smartctl -A #{device}`.split("\n")[7..-1].collect! { |line| line.split }
  end
end

def self.getValues(device)
  lines(device).map { |line| Hash[KEYS.zip line] }
end 
```

# java - 在 Java 中从视频创建图像帧时出错

> ID：12001035
> 
> 赞同：0
> 
> 时间：2012-08-17T06:50:19.347
> 
> 标签：java

我想使用 xuggle 从视频中捕获图像。在 lib 文件夹中添加 xuggle-xuggler-3.0.660.jar。它给出了以下错误：

```
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
    at com.xuggle.ferry.JNILibraryLoader.<clinit>(JNILibraryLoader.java:47)
    at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19)
    at com.xuggle.xuggler.Global.<clinit>(Global.java:240)
    at testing.VideoThumbnailsExample.<clinit>(VideoThumbnailsExample.java:55)
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 4 more
Exception in thread "main" Java Result: 1 
```

我写了以下代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package testing;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import com.xuggle.mediatool.IMediaReader;
import com.xuggle.mediatool.MediaListenerAdapter;
import com.xuggle.mediatool.ToolFactory;
import com.xuggle.mediatool.event.IVideoPictureEvent;
import com.xuggle.xuggler.Global;

public class VideoThumbnailsExample {
    public static final double SECONDS_BETWEEN_FRAMES = 10;
    private static final String inputFilename = "D:/bailey.mpg";
    private static final String outputFilePrefix = "c:/photo/a/mysnapshot";
    // The video stream index, used to ensure we display frames from one and
    // only one video stream from the media container.
    private static int mVideoStreamIndex = -1;
    // Time of last frame write
    private static long mLastPtsWrite = Global.NO_PTS;
    public static final long MICRO_SECONDS_BETWEEN_FRAMES = (long)(Global.DEFAULT_PTS_PER_SECOND * SECONDS_BETWEEN_FRAMES);

    public static void main(String[] args) {
        IMediaReader mediaReader = ToolFactory.makeReader(inputFilename);
        // stipulate that we want BufferedImages created in BGR 24bit color space
        mediaReader.setBufferedImageTypeToGenerate(BufferedImage.TYPE_3BYTE_BGR);
        mediaReader.addListener(new ImageSnapListener());
        // read out the contents of the media file and
        // dispatch events to the attached listener
        while (mediaReader.readPacket() == null) ;
    }

    private static class ImageSnapListener extends MediaListenerAdapter {
        public void onVideoPicture(IVideoPictureEvent event) {
            if (event.getStreamIndex() != mVideoStreamIndex) {
                // if the selected video stream id is not yet set, go ahead an
                // select this lucky video stream
                if (mVideoStreamIndex == -1)
                    mVideoStreamIndex = event.getStreamIndex();
               else // no need to show frames from this video stream
                 return;
           }

           // if uninitialized, back date mLastPtsWrite to get the very first frame
           if (mLastPtsWrite == Global.NO_PTS)
                mLastPtsWrite = event.getTimeStamp() - MICRO_SECONDS_BETWEEN_FRAMES;
            // if it's time to write the next frame
            if (event.getTimeStamp() - mLastPtsWrite >= MICRO_SECONDS_BETWEEN_FRAMES) {
                String outputFilename = dumpImageToFile(event.getImage());
                // indicate file written
                double seconds = ((double) event.getTimeStamp()) / Global.DEFAULT_PTS_PER_SECOND;
                System.out.printf("at elapsed time of %6.3f seconds wrote: %s\n", seconds, outputFilename);
                // update last write time
                mLastPtsWrite += MICRO_SECONDS_BETWEEN_FRAMES;
            }
        }

        private String dumpImageToFile(BufferedImage image) {
           try {
                String outputFilename = outputFilePrefix + System.currentTimeMillis() + ".png";
                ImageIO.write(image, "png", new File(outputFilename));
                return outputFilename;
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }
        }
    }
} 
```

请告诉我我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:09:57.387

根据这个`java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory`你必须在你的项目构建路径中包含 sl4j jar 文件，你可以从[这里下载](http://www.slf4j.org/download.html)

# android - 是否有必要在通知的 PendingIntent 中使用 FLAG_ACTIVITY_NEW_TASK？

> ID：12001036
> 
> 赞同：8
> 
> 时间：2012-08-17T06:50:33.887
> 
> 标签：android, android-pendingintent

我已经使用`Notification`s 一段时间了，昨天我注意到文档`PendingIntent`说传递给[`PendingIntent.getActivity()`](http://developer.android.com/reference/android/app/PendingIntent.html#getActivity%28android.content.Context,%20int,%20android.content.Intent,%20int%29)方法的 Intent 必须具有`FLAG_ACTIVITY_NEW_TASK`集合：

> 请注意，该活动将在现有活动的上下文之外启动，因此您必须在 Intent 中使用 Intent.FLAG_ACTIVITY_NEW_TASK 启动标志。

但是，我在使用 s 时从未设置过这个标志`Notification`，但到目前为止我还没有遇到任何问题。我已经看到了几个`Notification`s 的示例，其中`FLAG_ACTIVITY_NEW_TASK`没有为 the引用的`Intent`the设置。`PendingIntent`特别是，[官方指南](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Basics)显示了以下片段：

```
Context context = getApplicationContext();
CharSequence contentTitle = "My notification";
CharSequence contentText = "Hello World!";
Intent notificationIntent = new Intent(this, MyClass.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

正如你所看到的，他们没有设置`FLAG_ACTIVITY_NEW_TASK`标志。所以我的问题是，我应该`FLAG_ACTIVITY_NEW_TASK`在使用时始终设置标志`PendingIntent.getActivity()`，还是在某些情况下可以省略它？特别是在使用`Notification`s 时，我可以在不设置此标志的情况下使用 Intent 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:46:23.830

I believe the system sets it for you for notifications. You will get a new task when launched from a notification.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-26T02:59:05.563

是的，你应该使用`FLAG_ACTIVITY_NEW_TASK`. 否则，您可能会在某些设备上出现意外行为。

截至今天（2017 年 3 月 25 日），[问题中链接的官方指南](https://developer.android.com/guide/topics/ui/notifiers/notifications.html)具有以下更新的代码片段：

```
// Creates an Intent for the Activity
Intent notifyIntent =
        new Intent(this, ResultActivity.class);
// Sets the Activity to start in a new, empty task
notifyIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                        | Intent.FLAG_ACTIVITY_CLEAR_TASK);
// Creates the PendingIntent
PendingIntent notifyPendingIntent =
        PendingIntent.getActivity(
        this,
        0,
        notifyIntent,
        PendingIntent.FLAG_UPDATE_CURRENT
); 
```

# java - 仅验证数字和点的正则表达式

> ID：12001037
> 
> 赞同：12
> 
> 时间：2012-08-17T06:50:34.430
> 
> 标签：java, regex

我想要一个只接受数字和点的 java 正则表达式。

例如，

```
 1.1.1 ----valid
             1.1   ----valid
             1.1.1.1---valid
             1\.    ----not valid 
```

点不应位于起始位置或结束位置。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-17T07:14:00.677

我想这就是你想要的：

```
^\d+(\.\d+)*$ 
```

说明：它接受以点分隔的数字；它以数字开头和结尾；一个数字可以有多个数字；一个不带点的数字也被接受。

没有多个数字的变体：

```
^\d(\.\d)*$ 
```

至少需要一个点的变体：

```
^\d+(\.\d+)+$
^\d(\.\d)+$ 
```

不要忘记在 Java 中您必须转义 \ 符号，因此代码将如下所示：

```
Pattern NUMBERS_WITH_DOTS = Pattern.compile("^\\d+(\\.\\d+)*$"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:05:36.253

所以你想要一个需要数字和句点但以数字开头和结尾的正则表达式？

```
"[0-9][0-9.]*[0-9]" 
```

但这与`1`. 它没有任何句点，但确实以数字开头和结尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-27T07:11:23.600

**I guess this is what you want:**

```
Pattern.compile("(([0-9](\\.[0-9]*))?){1,13}(\\.[0-9]*)?(\\.[0-9]*)?(\\.[0-9]*)?", Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE | Pattern.DOTALL | Pattern.MULTILINE); 
```

Explanation: It accepts numbers separated by dots; it starts and ends with number; a number can have multiple digits; one number without dots is not accepted.

The output like this--

*   1.1
*   1.12
*   1.1.5
*   1.15.1.4

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-10T16:42:56.690

```
<!DOCTYPE html>
<html>
<body>

<p>RegEx to allow digits and dot</p>
Number: <input type="text" id="fname" onkeyup="myFunction()">

<script>
function myFunction() {
    var x = document.getElementById("fname");
    x.value = x.value.replace(/[^0-9\.]/g,"");
}
</script>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:15:22.890

```
"^\\d(\\.\\d)*$"

1     ----valid (if it must be not valid, replace `*` => `+` )
1.1.1 ----valid
1.1   ----valid
1.1.1.1---valid
1\.    ----not valid
11.1.1 ---not valid (if it must be valid, add `+` after each `d`) 
```

# jquery - 监听文本框中的变化

> ID：12001044
> 
> 赞同：1
> 
> 时间：2012-08-17T06:51:06.180
> 
> 标签：jquery, events, textbox, listener

我正在尝试为我网站上的个性化产品页面编写一些代码。我的目标是有一个文本框，允许用户输入个人消息以继续使用产品并使用 jQuery 根据输入的字符数确定价格。然后在屏幕上打印价格。

我不确定我应该使用哪个听众。“keyup”似乎在输入第一个字符后停止，“change”仅在用户单击文本框时才有效。我希望代码在用户键入时提高价格。关于我哪里出错的任何提示？

```
<script type="text/javascript" language="javascript">
     $(document).ready(function()  {
        jQuery("#phrase").change( function () {     
                 var length = jQuery("#phrase").length;
                 var price = length * 2.5;

                 jQuery("#price").html(price);
    });

});
</script> 
```

jsFiddle在这里：

[http://jsfiddle.net/WVHaT/8/](http://jsfiddle.net/WVHaT/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:57:23.860

```
$('#phrase').keyup(function() {
  var length = this.value.length * 2.5;
  $('#price').html(length);
}); 
```

[http://jsfiddle.net/jameskyburz/WVHaT/](http://jsfiddle.net/jameskyburz/WVHaT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:57:52.583

更改您的代码

```
var length = jQuery("#phrase").length; 
```

到

```
var length = jQuery("#phrase").val().length; 
```

并打电话`jQuery("#phrase").keyup`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T06:59:17.077

问题是`jQuery("#phrase").length`获得匹配 jQuery 选择器的元素数量。而是用于`jQuery("#phrase").val().length`获取输入的字符数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T06:58:51.250

我会使用`keyup`，因为它是在文本框的值更新*后*`keydown`触发的（与在文本框的值更新之前触发的相反）以及在键启动*后直接*`.change`触发（与仅在输入丢失时触发的事件相反重点）。

它似乎只为一个键触发是另一个问题，FarligOpptreden 的答案解决了这个问题！

# indexing - 如何列出 etherpad-lite 中的所有焊盘

> ID：12001045
> 
> 赞同：6
> 
> 时间：2012-08-17T06:51:05.467
> 
> 标签：indexing, etherpad

我发现了这个：[https ://github.com/ether/etherpad-lite/wiki/How-to-list-all-pads](https://github.com/ether/etherpad-lite/wiki/How-to-list-all-pads)

但我真的不知道如何使用它。我是否必须修改我的 templates/index.html 并添加那段代码？在哪里？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T11:41:01.753

有一些[插件](https://github.com/ether/etherpad-lite/wiki/Available-Plugins)可以做到这一点：

*   [小名单](https://npmjs.org/package/ep_small_list)
*   [list_pads](https://npmjs.org/package/ep_list_pads)
*   [挂单](https://npmjs.org/package/ep_list_pads)

GitHub：

*   [恋童癖者](https://github.com/Visono/padlister)
*   [垫表者](https://github.com/ktt-ol/ep_pad-lister)

就我个人而言，`small-list`这是最好的选择，因为我和其他人有一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T12:13:13.667

我也努力让它工作，所以我联系了 Rob - 编写脚本的人。他说最新版本的 etherpad-lite 可能已经过时了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T11:41:15.310

登录 etherpad 管理员，然后进入插件管理器并从可用插件中选择/搜索**“list_pads”**，然后按安装按钮。

[在此处输入图像描述](https://i.stack.imgur.com/mUwuH.png) 或通过命令行命令是“npm install ep_list_pads”

# java - 请谁能告诉我如何在 Lucene 的 SpanTermQuery 中使用带有布尔运算符的关键字？

> ID：12001048
> 
> 赞同：0
> 
> 时间：2012-08-17T06:51:18.470
> 
> 标签：java, lucene

我正在尝试使用 SpanTermQuery 查找关键字“(Mercedes OR Benz)”的出现次数，但它仅在“mercedes”、“benz”等小情况下使用单个单词。所以我找不到关键字“Mercedes OR Benz”的出现。

如果有人对此有任何想法，请帮助我。

以下是我正在使用的代码片段。

```
SpanQuery spanQuery = new SpanTermQuery(new Term("FullText","Mercedes OR Benz"));
// define your span query here
Spans spans = spanQuery.getSpans(indexReader);
int occurrenceCount = 0;
while (spans.next()) {
   occurrenceCount++;
}
System.out.println("Number of Occurences in FullText spans : "+occurrenceCount); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:23:25.753

尝试使用 MultiFieldQueryParser

```
String querystr = "Mercedes OR Benz" ;
String fields[] = {"brands"};

StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
Query q = new MultiFieldQueryParser(Version.LUCENE_36, fields, analyzer).parse(querystr); 
```

# java - 根据 URL 服务器名称加载不同的 ApplicationContext

> ID：12001050
> 
> 赞同：-3
> 
> 时间：2012-08-17T06:51:38.697
> 
> 标签：java, spring, jakarta-ee

我在服务器上的应用程序可以被两个服务器名访问，现在我想通过不同的服务器名加载不同的 applicationcontext.xml。我该怎么做？它是春天的 Java EE！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:49:50.300

我假设“被两个服务器名访问”是指不同的 HTTP `hostname`，但映射到同一个 Java EE 服务器实例。

例如 server1.acme.com 和 server2.acme.com

一种选择是安装应用程序两次（两个单独的 EAR/WAR 文件）并配置您希望在构建过程中使用哪个 applicationcontext.xml。这样做的好处是您可以根据需要分配单独的上下文根。然后，您可以配置您的 Java EE 服务器（例如 apache 服务器组件）以将 a 映射`hostname`到特定的应用程序上下文根。

选项二是只安装一个 EAR/WAR，其中包含两个实例的所有 spring bean，并为那些不应该共享的 bean 分配唯一的 bean 名称。这具有减少内存占用的优势，因为您只加载一个应用程序并共享一些 Spring bean。您的 web`Controller`必须知道要调用哪些服务 bean，具体取决于`hostname`您可以通过调用[ServletRequest.getRemoteHost()获得的服务 bean](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteHost%28%29)

我相信您还可以使用其他技术。这只是我想到的两个。

# ruby-on-rails-3 - 在rails 3中上传图像后创建缩略图而不使用库

> ID：12001051
> 
> 赞同：0
> 
> 时间：2012-08-17T06:51:39.907
> 
> 标签：ruby-on-rails-3

我在不使用任何库（如回形针或任何其他库）的情况下创建上传图像的缩略图时遇到问题。我找不到任何不使用任何库创建缩略图的解决方案。任何人都有解决方案，请尽快发送给我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:56:55.067

我想没有。您将不得不重写图像，因此您需要使用图像魔法或类似的东西。由于这并非微不足道，因此为此使用 gem 并没有错。

您当然可以只使用图像的宽度和高度标签来使它们看起来更小 - 但这确实不是要走的路。图像看起来很糟糕，你会浪费带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:43:42.160

您可以使用外部服务。我最近开始使用[http://avatars.io](http://avatars.io)不需要回形针，或 imagemagick 或将文件保存到您的服务器。我不知道它上线时要花多少钱。

图片是使用他们提供的一些 javascript 上传的，您需要做的就是保存他们返回给您的 URL。

然后可以通过将“?size=small”添加到 url 来调整图像大小。

例如
- [http://avatars.io/1315Gxzkm?size=small](http://avatars.io/1315Gxzkm?size=small)

# c++ - 当第一个字符串在预处理器指令中定义而第二个字符串在 C++ 中是常量时，如何连接 2 个字符串？

> ID：12001053
> 
> 赞同：1
> 
> 时间：2012-08-17T06:51:46.030
> 
> 标签：c++, c, string, concatenation, string-concatenation

这是我所拥有的：

```
#define STRING "string 1"

string string2 = STRING + "string3"; 
```

这是错误的。解决办法是什么？问题`string2`必须是恒定的还是其他什么，为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T06:54:06.143

```
#define STRING "string 1"

std::string string2 = STRING "string3"; 
```

相邻字符串字面量的连接不是预处理器的特性，它是 C/C++ 的特性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:53:46.497

您不能在两个字符串文字上使用 operator +，因为这实际上意味着您正在尝试添加两个 char 指针。

有两种方法可以实现您想要的：

您可以使用运行时“字符串”连接（不是预处理器），但为此您需要从字符串文字之一构造 std::string ，以便编译器知道要查找的运算符 + 重载：

```
#define STRING "string 1"
string string2= string(STRING) + "string3" 
```

或者，要使用编译时连接，请将两个字符串都保留为字符串文字，然后一个接一个地编写，编译器会将它们连接起来：

```
#define STRING "string 1"
string string2= STRING "string3" 
```

或者（用 C 回答）：

```
#define STRING "string 1"
const char string2[]= STRING "string3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:55:46.623

一般来说，您可以将自己想象`STRING`成一个`const char *`. 因此，它没有“如何向自己添加另一个 const char*”的概念。

为了使您的案例起作用，您可以让编译器将它们连接起来：

```
#define STRING "string 1"
std::string string2 = STRING "string3" 
```

它仅适用于字符串文字（在源代码中定义的常量字符串），或者通常您必须`std::string`首先使用它，它有一个`operator+`重载，允许您向它添加一个 C-String：

```
#define STRING "string 1"
std::string string2 = std::string(STRING) + "string3"; 
```

# c++ - 运算符重载：好的 MSVS 但在 g++ 中失败

> ID：12001054
> 
> 赞同：0
> 
> 时间：2012-08-17T06:51:52.120
> 
> 标签：c++, operator-overloading

我的代码在 Visual Studio 2010 中编译时没有错误。但是 g++ 出错了

```
CComplex.cpp: In member function 'Complex Complex::operator+(Complex&)':
CComplex.cpp:22: error: no matching function for call to 'Complex::Complex(Complex)'
CComplex.cpp:15: note: candidates are: Complex::Complex(Complex&)
make: *** [CComplex.o] Error 1 
```

请告诉我我的代码有什么问题。

复杂的.h

```
class Complex
{
public:
  Complex();
  Complex(double _Re, double _Im);
  Complex(Complex& c);
  Complex operator+(Complex& num);
  inline double& fRe(void){return Re;}
  inline double& fIm(void){return Im;}
protected:
  double Re;
  double Im;
} 
```

复杂的.cpp

```
Complex::Complex(){
    Re = 0.0;
    Im = 0.0;
}
Complex::Complex(double re, double im){
    Re = re;
    Im = im;
}
Complex::Complex(Complex& complex){
    *this = complex;
}
Complex Complex::operator+(Complex& num){
    return Complex(Re + num.fRe(), Im + num.fIm());
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T06:57:18.123

```
Complex Complex::operator+(Complex& num){
    return Complex(Re + num.fRe(), Im + num.fIm());
}; 
```

作为回报，临时对象的复制 c-tor 不能绑定到左值引用。采用

```
Complex(const Complex& c); 
```

也可以`operator +`使用

`Complex operator + (const Complex& c)`

或者

`Complex operator + (Complex c)`

对于第一种情况`fRe`，函数`fIm`应该是常量函数，或者你应该对传递的对象进行显式复制。

它可以在 MSVC 中编译，而不是在 g++ 中编译，因为MSVC在执行[Return Value Optimization时](http://en.wikipedia.org/wiki/Return_value_optimization)[错误地不检查是否存在可接受的复制构造函数](https://stackoverflow.com/a/6524855/16673)。

# c# - asp.net-mvc 的 ROUTE：找不到资源

> ID：12001056
> 
> 赞同：1
> 
> 时间：2012-08-17T06:51:54.487
> 
> 标签：c#, asp.net, .net, asp.net-mvc, routes

我正在使用 asp.net mvc，但无法访问我的页面，出现**404**错误。

页面的网址：

**本地主机:2334/RawData/EiphoneNews**

查看文件的位置：

**webroot/View/RawData/TNews/Index.cshtml**

我的路线：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
           "RawData", // Route name
           "RawData/{controller}/{action}/{id}", // URL with parameters
           new { controller = "EiphoneNews", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
           new string[] { "News.Controllers.RawData" }
       );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    } 
```

我的控制器：

```
namespace News.Controllers.RawData
{
    public class EiphoneNewsController : AuthorizedController
    {
        //
        // GET: /EiphoneNews/
        public ActionResult Index(int pagenum = 0, int pagesize = 20, string queryString = null)
        {...}
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T07:00:28.333

交换 2 个路由定义：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
       "RawData", // Route name
       "RawData/{controller}/{action}/{id}", // URL with parameters
       new { controller = "EiphoneNews", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
       new string[] { "News.Controllers.RawData" }
   );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:59:01.123

切换路由注册，第一个匹配的路由不是那个`RawData`。由于路由是在解析控制器之前确定的，因此默认路由导致 404 而`RawData`路由不会导致 404 并没有什么区别。

您可能需要安装 RouteDebugger 包（可通过 nuget 获得）以查看路由发生了什么。

# objective-c - 如何计算 frame.size.width

> ID：12001059
> 
> 赞同：1
> 
> 时间：2012-08-17T06:52:12.247
> 
> 标签：objective-c, ios, uitableview, uilabel

在我的例子中，计算一个 UILabel frame.origin.x 使其位于右侧，代码如下：

```
writerNameLabel.frame = CGRectMake(cell.frame.size.width - writerNameLabel.frame.size.width - 80.......)

NSLog(@" writerNameLabel frame width: %f",writerNameLabel.frame.size.width);
NSLog(@" cell frame width: %f",cell.frame.size.width);
NSLog(@" cell - writerNameLabel frame width: %f",cell.frame.size.width - writerNameLabel.frame.size.width);
NSLog(@" writerNameLabel frame x: %f",writerNameLabel.frame.origin.x);

2012-08-17 14:43:36.895 writerNameLabel frame width: 38.000000
2012-08-17 14:43:36.899 cell frame width: 320.000000
2012-08-17 14:43:36.902 cell - writerNameLabel frame width: 282.000000
2012-08-17 14:43:36.904 writerNameLabel frame x: 240.000000

----

2012-08-17 14:43:36.924 writerNameLabel frame width: 102.000000
2012-08-17 14:43:36.928 cell frame width: 320.000000
2012-08-17 14:43:36.931 cell - writerNameLabel frame width: 218.000000
2012-08-17 14:43:36.934 writerNameLabel frame x: 240.000000 
```

问题是这

> cell.frame.size.width - writerNameLabel.frame.size.width

我的计算中的一部分不起作用，它只返回值

> 单元格.frame.size.width - 80

， 为什么？我做错什么了吗？

请指教。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:00:09.037

我怀疑问题是您最初没有设置标签的框架，因此默认情况下它是`{ 0, 0, 0, 0`}，这就是它在计算中无效的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:00:12.593

因为当时 writerNameLabel.frame.size.width 的值是 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T09:18:15.110

框架的默认值为 {0, 0, 0, 0}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:27:26.400

你如何初始化 writerNameLabel？您应该使用 initWithFrame，否则它的大小为 (0,0)。

只是信息：

我假设您使用的是 UITableViewCell，因为您的变量名称是 cell :) 在这种情况下，最好使用 cell.contentView.frame.size.width 而不是 cell.frame.size.width。因此，您可以防止 writerNameLabel 与单元格的附件视图重叠。最简单的方法是使用标签，这些标签已经（默认情况下）在 UITableViewCell 实例上。

# html - 如何在 SSRS 电子邮件报告中包含内联（未链接）图像？

> ID：12001060
> 
> 赞同：6
> 
> 时间：2012-08-17T06:52:22.557
> 
> 标签：html, reporting-services

我有多个包含嵌入图像的 SSRS 2008 报告模板，并且这些模板当前在任何报告管理器预览中都按预期可见（使用呈现扩展 HTML 4.0）。但是，我需要将这些报告作为 HTML 电子邮件发送出去。

我相信这里的基本/最简单的技术是将图像作为内联 base64 字符串附加到 HTML 中的图像标签。有没有办法在 SSRS 中自动执行此操作，或者实现此或类似结果的最佳实践是什么（即图像作为附件导致不太互操作的 MHTML 而不是纯 HTML）？

电子邮件必须按原样显示而不连接到任何外部存储（即，由发件人托管图像是不可行的）。此外，我们不会使用 SSRS 本身来发送生成的 HTML/电子邮件，因此任何此类性质的限制都不值得关注。

我在想的内联 base64 示例：

```
<img src="data:image/png;base64,xxxxxxxx==" alt="Some Image"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:29:58.413

似乎实现这一点的最简单方法是修改或扩展渲染扩展，如[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa237716%28v=sql.80%29.aspx)中所述：

> **编写自定义渲染扩展**
> 
> 在决定创建自定义呈现扩展之前，您应该评估更简单的替代方案。你可以：
> 
> 1.  创建现有渲染扩展插件的修改版本。
> 2.  通过为现有扩展指定设备信息设置来自定义呈现的输出。
> 3.  通过将 XSL 转换 (XSLT) 与 XML 呈现格式的输出相结合，添加自定义格式和表示功能。
> 
> 编写自定义呈现扩展插件既难学又难。呈现扩展插件通常必须支持所有可能的报表元素组合。报表对象模型非常广泛（您必须实现的类、接口、方法和属性数以百计），并且文档和示例还没有达到可以支持您完成具有挑战性的开发项目的水平。
> 
> 如果必须以 Reporting Services 未包含的格式呈现报表，则可以编写自己的呈现扩展插件的托管代码实现。呈现扩展插件代码必须实现报表服务器所需的 IRenderingExtension 接口。每个由 Microsoft 实现并随 Reporting Services 提供的呈现扩展插件都使用一组通用接口。这可确保每个扩展都实现类似的功能，并降低报表服务器核心中呈现代码的复杂性。

# asp.net-mvc-3 - 如何在 MVC3 razor 中将 DatatTable 从一个视图传递到另一个视图

> ID：12001061
> 
> 赞同：0
> 
> 时间：2012-08-17T06:52:27.103
> 
> 标签：asp.net-mvc-3, razor, datatable

哪个是最好的 `pass a DatatTable`方法？`one view to another``MVC3 Razor`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:55:32.187

将它保存在您的后端，然后简单地传递 id 并让控制器操作从您保存它的任何位置检索 DataTable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:11:45.293

无论您需要什么数据，都应该在 ViewModel 中。将 ViewModel 从控制器传递到视图。如果您需要单独但相关的视图，请考虑使用

```
Html.RenderPartial("PartialViewName", Model.YourDataTable)

```

如果第二个视图与第一个视图无关，不要传递它，只需调用

```
@Html.RenderAction
```

从您的第一个视图中将您的第二个视图加载到响应流。

如果您正在考虑跨请求保留它，这取决于您是否已将其保留在数据库中。无论哪一天，考虑使用缓存将其保留几秒钟（或更长时间），请参阅本文中的“内存缓存”类

[如何在 MVC 应用程序中缓存数据](https://stackoverflow.com/questions/343899/how-to-cache-data-in-a-mvc-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:42:05.940

我同意达林·季米特洛夫爵士的观点。但是你仍然坚持做同样的事情，而不是使用 TempData。

有关更多信息，请关注此[ViewBag、ViewData 和 TempData](https://stackoverflow.com/questions/7993263/viewbag-viewdata-and-tempdata)

# objective-c - UIModalTransitionStyleFlipHorizo ntal 期间的状态栏背景

> ID：12001062
> 
> 赞同：2
> 
> 时间：2012-08-17T06:52:34.767
> 
> 标签：objective-c, ios, cocoa-touch, uimodaltransitionstyle

附件是我的应用程序在 UIModalTransitionStyleFlipHorizo​​ntal 中的一些屏幕截图

![在此处输入图像描述](../Images/7f6f08b2c6947739978e88a9666fcb6a.png)

![在此处输入图像描述](../Images/9f517282b61ac05be33a07ff914868d9.png)

![在此处输入图像描述](../Images/1ed3174606812aec4da3bb4d476d762f.png)

![在此处输入图像描述](../Images/ae5b217080d6f99e644fafb81eae2512.png)

我已将 info.plist 中的状态栏样式更改为黑色，并将背景颜色或 MainWindow.xib 设置为黑色。然而，在 UIModalTransitionStyleFlipHorizo​​ntal 期间，状态栏后面的背景是白色的。知道我在这里可能做错了什么吗？以及我如何能够解决这个问题（即摆脱白色）？

**更新：**如果我将 UIStatusBarStyle 设置为 UIStatusBarStyleBlackTranslucent，这就是我的状态栏开始的样子。

![在此处输入图像描述](../Images/5ffab3429f432abe617c28dc53220ecc.png)

所以，状态栏后面肯定有白色的东西。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:17:00.827

有两种选择可能..

1.  在**Info.plist**文件中添加以下内容

    *   `UIStatusBarStyle UIStatusBarStyleBlackTranslucent` **或者**
    *   `UIStatusBarStyle UIStatusBarStyleBlackOpaque` **或者**
    *   `UIStatusBarStyle UIStatusBarStyleDefault`
2.  在您的应用程序中添加源。

    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent Animation:NO];

**或者**

```
 [[UIApplication sharedApplication] 
          setStatusBarStyle:UIStatusBarStyleBlackOpaque animated:NO]; 
```

**或者**

```
[[UIApplication sharedApplication] 
      setStatusBarStyle:UIStatusBarStyleDefault animated:NO]; 
```

**更新：**

用于隐藏状态栏

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO]; 
```

# jpa - JPA 查询概率

> ID：12001065
> 
> 赞同：-1
> 
> 时间：2012-08-17T06:52:59.873
> 
> 标签：jpa

下面的 sql 查询在 MySQL 浏览器上运行良好。

SELECT c.* from (select c1 from City c1) c.

但是如果我在 jpql 1.0 createquery 中尝试了相同的查询，它表示错误。是否也可以在 jpa 中编写相同的查询。我不需要对约束进行任何替代查询。我只想要上述查询的可能性。如果是，那么告诉我怎么做？

任何建议都非常感谢。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:48:23.293

如[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createQuery%28java.lang.String%29)所述，createQuery 将[JPQL](http://docs.oracle.com/cd/E11035_01/kodo41/full/html/ejb3_langref.html)查询作为参数。当将 SQL 查询作为参数提供给需要 JQPL 查询的方法时，预计最终会出错。

如果要执行本机 SQL 查询，可以通过[createNativeQuery](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String%29)完成。

# javascript - 关闭黑莓的浏览器窗口javascript

> ID：12001070
> 
> 赞同：0
> 
> 时间：2012-08-17T06:53:28.437
> 
> 标签：javascript, blackberry, browser

我的 JSP 中有关闭按钮，单击时我想关闭浏览器窗口。

我使用了 window.close() 但它在黑莓浏览器中充当 history.back() 。看到 [这个参考](http://docs.blackberry.com/de-de/developers/deliverables/11849/Window_close_569496_11.jsp)。

我想在点击 BB 时关闭窗口。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:04:21.320

我尝试了很多。没有办法做到这一点:( 但是我们可以尝试在同一个窗口中打开空白页面或一些 url。这会让用户感觉之前的窗口已关闭。

# ruby-on-rails - Capistrano 部署到登台和生产

> ID：12001072
> 
> 赞同：6
> 
> 时间：2012-08-17T06:53:30.093
> 
> 标签：ruby-on-rails, capistrano

我正在尝试使用 Capistrano 将 Ruby On Rails 应用程序部署到暂存和生产。

两者之间的唯一区别是 :domain 和 :repository

我在这里遵循了本指南：[https ://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)

我在网上搜索过，我发现的所有文章基本上都在重复我上面的内容。

我尝试在 config/deploy/staging.rb 和 config/deploy/production.rb 中设置 :domain 和 :repository

我已经检查了我的拼写，以确保我正确拼写了子目录和文件的名称。

阅读这篇文章：[使用 capistrano 暂存和实时应用程序](https://stackoverflow.com/questions/10679455/staging-and-live-app-with-capistrano)看起来我应该能够在这里声明差异。

看起来 staging.rb 文件实际上并没有被读取。我将“deploy.rb”更改为第一行有一个发誓词，“cap deploy”给了我预期的错误。

如果我在“staging.rb”或“production.rb”的第一行加上一个脏话，我会得到同样的错误：

```
`method_missing': undefined local variable or method `domain' 
```

有问题的行是：

```
role :web, domain 
```

因为该值没有被拾取。但是它肯定应该在 staging.rb 或 production.rb 中的一个脏话上失败并且根本不运行？

如果我将 :domain 和 :repository 移回主“deploy.rb”文件中，我会收到带有脏话的错误。因此，我似乎无法在“staging.rg”和“production.rb”文件中设置变量，而只能完成任务。

任何帮助将不胜感激，或者你认为我应该接受披萨送货工作......

部署.rb：

```
require 'capistrano/ext/multistage'
set :stages, %w(production staging)
set :default_stage, "staging"

set :user, 'dave'

set :applicationdir, "~/rails/example.com"

set :scm, 'git'

set :git_enable_submodules, 1 # if you have vendored rails
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true

set :keep_releases, 5
after "deploy:update", "deploy:cleanup"

# roles (servers)
role :web, domain
role :app, domain
role :db,  domain, :primary => true

after "deploy", "deploy:migrate"

# deploy config
set :deploy_to, applicationdir
set :deploy_via, :export
# set :rake, 'bundle exec rake'

# additional settings
default_run_options[:pty] = true  # Forgo errors when deploying from windows
set :ssh_options, {:forward_agent => true}
#ssh_options[:keys] = %w(/home/user/.ssh/id_rsa)            # If you are using ssh_keysset :chmod755, "app config db lib public vendor script script/* public/disp*"set :use_sudo, false

# Passenger
namespace :deploy do
   task :start do ; end
   task :stop do ; end
   task :restart, :roles => :app, :except => { :no_release => true } do
      run " touch #{File.join(current_path,'tmp','restart.txt')}"
   end
end 
```

还有我的 config/deploy/staging.rb 文件：

```
set :domain, 'example.com'
set :repository,  "ssh://dave@example.com/~/rails/chamonix-mont-blanc.net" 
```

如果我将 :domain 和 :repository 放在主“deploy.rb”中，它一切正常且花花公子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T07:23:07.880

移动`roles`到您的`staging.rb`文件，使其看起来像

```
set :domain, 'example.com'

role :web, domain
role :app, domain
role :db,  domain, :primary => true

set :repository,  "ssh://dave@example.com/~/rails/chamonix-mont-blanc.net" 
```

从 中删除角色代码`deploy.rb`。此外，您必须进行`production.rb`类似的修改。

# asp.net - Asp.net：在页面加载的请求查询字符串中设置参数

> ID：12001075
> 
> 赞同：1
> 
> 时间：2012-08-17T06:53:38.003
> 
> 标签：asp.net, query-string

我在页面加载方法中这样做

```
Request.QueryString.Add("Filter_DateRange", "yesterday");
Request.QueryString.Add("Filter_FormType", "10-K"); 
```

但它给出了一个例外

`"Collection is readonly"`.

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:10:59.673

根据评论，有一些选项可供选择以满足您的需求......

例如，您可以抽象（并且显然应该）直接从查询字符串中检索值的过程并实现某种层，为您完成它。然后，您可以自由地交换该层，而不必担心破坏您的应用程序。最基本的方法是实现页面属性。在您的代码中，您不会直接调用 Request.QueryString...，而是使用这些属性。当您想要更改值的来源时，只需相应地更改属性即可。

另一种方法可能是创建要测试的链接，甚至可以将这些链接放在单独的页面上，例如 testlinks.aspx。这样，您就可以将事物组织得井井有条以用于测试目的。

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:17:29.293

如果您想模拟自动化测试的请求对象，我建议您查看 Moles。

如果您只想手动测试，为什么不直接使用您需要的查询字符串参数创建一个链接呢？

# java - 如何验证输入是否匹配特定的时间戳格式？

> ID：12001077
> 
> 赞同：1
> 
> 时间：2012-08-17T06:53:45.367
> 
> 标签：java, regex, validation, formatting, timestamp

我需要检查输入是否与时间戳格式匹配**`yyyy-MM-dd'T'HH:mm:ss.SSS`**。

> 例如。2012-08-16T11:07:10.793

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T06:57:56.813

```
try {
    formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS");
    date = (Date) formatter.parse("2012-08-16T11:07:10.793");
} catch(ParseException e) {
    // It does not match your input
} 
```

或者，一如既往地使用正则表达式......

编辑：考虑到 maba 的错字发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:57:31.023

正则表达式：

```
^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])(\D?([01]\d|2[0-3])\D?([0-5]\d)\D?([0-5]\d)?\D?(\d{3})?)?$ 
```

抱歉编辑晚了。如果您只想检查日期的模式是否匹配，您可以像这样使用正则表达式：

```
 String date = "2012-08-16T11:07:10.793";
    String regex = "^(\\d{4})\\D?(0[1-9]|1[0-2])\\D?([12]\\d|0[1-9]|3[01])(\\D?([01]\\d|2[0-3])\\D?([0-5]\\d)\\D?([0-5]\\d)?\\D?(\\d{3})?)?$";
    Pattern p = Pattern.compile(regex);
    Matcher m = p.matcher(date);

    if (m.matches()) {
        System.out.println("Yes it matches");
    } else {
        System.out.println("No match");
    } 
```

# iphone - 如何更改 iPhone 中的 UITabBarSystemItemContacts？

> ID：12001096
> 
> 赞同：0
> 
> 时间：2012-08-17T06:54:53.120
> 
> 标签：iphone, uitabbarcontroller, tabbar, uitabbaritem

目前我正在使用 iphone 应用程序，使用 UITabbar 创建五个标签栏并设置 UITabBarSystemItem，当我选择第三个标签时，我尝试更改自定义图像而不是 UITabBarSystemItemContacts，但它不起作用。我试过这个：

```
 UITabBarItem *filterTab4 = [self.tabBarController.tabBar.items objectAtIndex:3];
    [filterTab4 setImage:[UIImage imageNamed:@"sample.png"]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:59:30.737

试试这个 self.tabBarItem.image = [UIImage imageNamed:@"first"]; 在您的第三个选项卡类 init() 中它可以工作。

# c# - 如何像数据库表一样从 excel 中读取数据，并更新基于在 C#.net 中使用 VSTO 的查询数据？

> ID：12001103
> 
> 赞同：0
> 
> 时间：2012-08-17T06:55:24.107
> 
> 标签：c#, excel, vsto

我正在使用 C#.net 开发一个 excel 插件。我在 excel 中有大约 200 行。我想从 Excel 中读取这些行数据库表记录，并且还想更新任何 excel 列数据。

是否有任何类可以像数据库表一样从 excel 中读取数据并使用相同的对象将数据更新为 excel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:58:12.680

我不确定您是否想使用通常的 db sql 作为 oledb 客户端访问 excel。但似乎你正在处理它，你可以只使用excel暴露的COM对象。添加引用，然后在“COM”选项卡上，选择“Microsoft 5.0 Object Library”

下面的示例

使用 Excel = Microsoft.Office.Interop.Excel；

...

```
 var ExcelApp = new Excel.Application();
        ExcelApp.Visible = true;
        Excel.Workbook wb = ExcelApp.Workbooks.Add();
        // put some data in it
        for (int i = 1; i <= 10; i++)
        {
            ExcelApp.Cells[i, 1] = "Item " + i;

        }

        for (int i = 1; i <= 10; i++)
        {
            Console.WriteLine(ExcelApp.Cells[i, 1].Value);
        }

        Console.ReadKey(); 
```

# c# - C# 中的 SQL COALESCE 与 DBNull 检查

> ID：12001107
> 
> 赞同：0
> 
> 时间：2012-08-17T06:55:46.943
> 
> 标签：c#, sql, performance

在我的项目中，我必须从 SQL 中检索大量数据并将数据映射到对象字段；像这样的东西：

```
cu.UnitName = dr["UnitName"].ToString().Trim();
cu.LocalId = DbUtil.RemoveNull(dr["LocalID"], "");
cu.DatabaseName = DbUtil.RemoveNull(dr["DatabaseName"], "");
cu.DatabaseServer = DbUtil.RemoveNull(dr["DatabaseServer"], "");
cu.UserName = DbUtil.RemoveNull(dr["UserName"], "");
cu.Password = DbUtil.RemoveNull(dr["Password"], "");
cu.RoleId = DbUtil.RemoveNull(dr["RoleId"], 0); 
```

以下是`DbUtil.RemoveNull`（`int`版本，`string`版本类似）：

```
public static int RemoveNull(object data, int defaultValue)
    {
        if (data is DBNull || data == null)
            return defaultValue;
        return int.Parse(data.ToString());
    } 
```

所以我想知道 SQL 是否`COALESCE`会`ISNULL`更快地完成同样的工作。有人做过类似的比较吗？哪种方式会更有效率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:59:48.130

从数据库返回数据时，你可以做

```
select COALESCE (data ,defaultValue) from table 
```

这会更快，因为不需要从前端代码执行 RemoveNull 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:01:12.387

```
cu.LocalId = dr["LocalId"] ?? ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:02:30.423

而是在您的 sql 中使用以下语句：

> `SELECT ISNULL(value,0)`

当有 NULL 时，这将始终返回 0。因此，您不必在代码端进行转换。

请参考[http://msdn.microsoft.com/en-us/library/ms184325.aspx](http://msdn.microsoft.com/en-us/library/ms184325.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:04:26.990

' [COALESCE](http://msdn.microsoft.com/en-us/library/aa258244%28v=sql.80%29.aspx) ' 返回其参数中的第一个非空表达式，因此您可能会使用`ISNULL`.

在您的数据库查询中使用`ISNULL`会快得多。假设您有 1m 条记录，并且您调用 C# 方法 1m 次，这肯定需要一些时间来执行。

另一方面，SQL 引擎经过优化以处理大量记录。但这不够灵活。您不能使用一些复杂的逻辑并轻松更改默认值。

# facebook - 从公共粉丝页面获取 Facebook 活动

> ID：12001108
> 
> 赞同：-1
> 
> 时间：2012-08-17T06:55:51.157
> 
> 标签：facebook, events, fan-page

我正在使用 Facebook API（https://github.com/facebook/facebook-php-sdk），我很好奇是否可以检索某些粉丝页面的事件详细信息。但我需要说我不是该页面的管理员。有没有可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T18:23:17.847

对的，这是可能的

运行这个

选择 eid 从 event_member WHERE uid = 17414523278

17414523278 是 Facebook 页面 ID

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T16:18:51.673

对的，这是可能的。如果页面所有者已公开他们的事件，您只需使用您的应用凭据初始化 SDK 即可获取它。例如，这将获取 IKEA USA 的所有活动：

```
require '/path/to/sdk/facebook.php';
$fb = new Facebook(array(
       'appid'=>'YOUR_ID',
       'secret'=>'YOUR_SECRET'
      ) );
$page_events = $fb->api('/ikeausa/events', 'GET');
printf ('<pre>%s</pre>', $page_events); 
```

如果页面所有者以任何方式（年龄、国家/地区等）限制了他们的网站，您需要在您的应用程序中验证满足页面限制的用户才能看到该页面的事件。由于 Maker's Mark 的页面有年龄限制，因此在上面的代码中替换`ikeausa`为`makersmark`会返回错误。

# php - php mailer 无法向除我自己以外的任何人发送电子邮件

> ID：12001110
> 
> 赞同：1
> 
> 时间：2012-08-17T06:56:00.983
> 
> 标签：php, phpmailer

我正在使用 php mailer 类向我的客户发送电子邮件。但它失败并出现错误：

```
Language string failed to load: recipients_failed example@gmail.com 
```

如果我将 $email_to 和 $email_from 的值更改为相同的电子邮件地址，则电子邮件发送成功

这是我发送电子邮件的代码

```
$email_to = "example@gmail.com";
$email_subject = "bla bla";
$email_from = 'info@domain.com.vn';
$email_message = "hello there";

$mail = new PHPMailer();
$mail->CharSet="UTF-8";
$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host = "mail.domain.com.vn"; // SMTP server
$mail->From = $email_from;
$mail->AddAddress($email_to);
$mail->AddReplyTo($email_from);     
$mail->Subject = $email_subject;
$mail->WordWrap = 100; 
$mail->Body = $htmlBody;
$mail->isHTML(true);
$mail->AltBody = $email_message;
if(!$mail->Send()){
   echo $mail->ErrorInfo; 
} 
```

所以它总是会报错，除非我把 $email_to 改成 info@domain.com.vn

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:09:39.877

**注意：**请将 SMTP 服务器设置更改为您自己的服务器。

```
$your_email = "info@example.com";
$your_smtp = "mail.example.com";
$your_smtp_user = "info@example.com";
$your_smtp_pass = "example_password";
$your_website = "http://example.com";

//get contact form details
$name = $_POST['name'];
$email = $_POST['email'];
$url = $_POST['url'];
$comments = $_POST['comments'];

$response="Name: $name\nContents:\n$comments\n";

$mail = new PHPmailer();
$mail = $mail->SetLanguage("en", "phpmailer/language");
$mail->From = $your_email;
$mail->FromName = $your_website;
$mail->Host = $your_smtp;
$mail->Mailer   = "smtp";
$mail->Password = $your_smtp_pass;
$mail->Username = $your_smtp_user;
$mail->Subject = "$your_website feedback";
$mail->SMTPAuth  =  "true";
$mail->Body = $response;
$mail->AddAddress($your_email,"$your_website admin");
$mail->AddReplyTo($email,$name);

echo "<p>Thanks for your feedback, <em>$name</em>! We will contact you soon!</p>";
if (!$mail->Send()) {
echo "<p>There was an error in sending mail, please try again at a later time</p>";
}

$mail->ClearAddresses();
$mail->ClearAttachments(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:08:02.270

我认为您需要像这样设置语言文件的语言和路径：

```
$mail->SetLanguage ("de", "./phpmailer/"); 
```

如果这不能解决。确保语言文件确实存在于该文件夹中（如果可能，使用相对路径）并且在 Linux 下：文件应该与您的 php 脚本具有相同的所有者并且正确（读取文件权限）。

# ruby-on-rails - 如何在rails的jquery中使用ajax生成动态url

> ID：12001111
> 
> 赞同：0
> 
> 时间：2012-08-17T06:56:01.300
> 
> 标签：ruby-on-rails

```
 $.ajax({ 
        type: "GET",
        dataType: 'script', 
        url: '/admin/my_page/'+mypage_id+'/pages/show_page',
        style : "inherit",
        dataType: 'script',                                                         
        data: "submitcheckdata="+mypage_id,
        complete: function() { 

        }            
  }); 
```

有两个问题：

*   我如何从我的页面控制器中获取变量并传递给 page.js 文件？如果我有身份证，
*   那么我如何使用ajax生成动态url。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:02:37.990

您可以在视图中将其定义为 js 变量

```
<script>
  var mypage_id = <%= @page.id %>;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:35:50.830

您必须在 HTML 中包含您的 JS（我将在示例中使用 HAML）

```
 $.ajax({ 
    type: "GET",
    dataType: 'script', 
    url: "/admin/my_page/#{mypage_id}/pages/show_page",
    // ^ Note the use of double quotes here.
    style : "inherit",
    dataType: 'script',                                                         
    data: "submitcheckdata=#{mypage_id}",
    complete: function() { 

    }            }); 
```

有时我觉得将 HTML 和 JavaScript 放在一起有点难看。这就像把你的甜点和你的晚餐混合在一起。所以我把它作为一个单独的部分包括在内，特别是如果你有很多依赖 Rails 的 JS。

我之前使用过的另一种技术是我发送了一个初始 AJAX 请求，该请求将检索我需要什么动态内容来生成第二个有效的 AJAX 请求，例如你所拥有的。

# postgresql - 存储字节数组时的Scala Anorm Postgresql错误

> ID：12001114
> 
> 赞同：3
> 
> 时间：2012-08-17T06:56:12.860
> 
> 标签：postgresql, scala, jdbc, playframework-2.0, anorm

我在 Scala Playframework 中有一个数据库表定义为

```
CREATE TABLE account (
    id     SERIAL,
    email  TEXT  NOT NULL,
    buffer BYTEA NOT NULL,
    PRIMARY KEY (id)
); 
```

我正在使用协议缓冲区使用以下代码将对象序列化为字节数组

```
DB.withConnection{ implicit c=>
  SQL("INSERT INTO device (buffer,secret) VALUES ({secret},{buffer})").on(
    "secret"->device.getSecret(),
    "buffer"->device.toByteArray()
  ).executeInsert()
} 
```

返回的类型`device.toByteArray()`应该`Array[Byte]`与*该*列的数据库类型匹配。但是在执行我得到的代码后

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[PSQLException: ERROR: column "buffer" is of type bytea but expression is of type character varying
  Hint: You will need to rewrite or cast the expression.
  Position: 44]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.3]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.3]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.3]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: org.postgresql.util.PSQLException: ERROR: column "buffer" is of type bytea but expression is of type character varying 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:16:32.993

查看[anorm 源代码](https://github.com/playframework/Play20/blob/master/framework/src/anorm/src/main/scala/anorm/Anorm.scala#L323)和[Postgres 文档](http://jdbc.postgresql.org/documentation/80/binary-data.html)，您似乎需要添加一个处理程序以`Array[Byte]`正确存储使用`setBytes`而不是`setObject`当前代码所要求的。

我会在框架中的 anyParameter 中扩展匹配以读取

```
 value match {
      case Some(bd: java.math.BigDecimal) => stmt.setBigDecimal(index, bd)
      case Some(b: Array[Byte]) => stmt.setBytes(index, b)
      case Some(o) => stmt.setObject(index, o)
      // ... 
```

并添加

```
implicit val byteArrayToStatement = new ToStatement[Array[Byte]] {
  def set(s: java.sql.PreparedStatement, index: Int, aValue: Array[Byte]): Unit = setAny(index, aValue, s)
} 
```

您应该可以在框架之外通过这里工作的类型类魔法来执行此操作，但我现在没有时间弄清楚这一点。

# python - 列表/序列的正则表达式模拟

> ID：12001115
> 
> 赞同：2
> 
> 时间：2012-08-17T06:56:15.133
> 
> 标签：python, regex, list

我发现使用正则表达式我可以得到修改后的字符串而不必显式循环原始字符串，这很酷——例如在 Python 中：

```
from re import sub
print sub(r'12', r'twelve', r'12 + 12 = 24') 
```

印刷

```
twelve + twelve = 24 
```

一般来说，列表有类似的东西吗？特别是，它如何在 Python 中使用将是最受赞赏的，但在任何语言中这样的东西也会很酷。

我可能拥有的示例任务会得到一个类似的列表

```
[0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1] 
```

替换所有出现的`0 , 1`，`2`以便我得到：

```
[0, 2, 1, 2, 2, 1, 2] 
```

当然，在这种特殊情况下，我可以将列表转换为一串数字，然后使用正则表达式，但我希望有一些我可以使用的模拟列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:35:24.177

There does not seem to be a regex analog for list operations. For some simple cases like yours , you can do this :

1.  You can convert the list to str
2.  use regex replace to replace elements as per your requirement.
3.  use literal_eval to convert the modified string to list again.

Working here : [http://ideone.com/tgg3N](http://ideone.com/tgg3N)

```
from re import sub
import ast

myList = [0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1]
listStr = str(myList)
myNewStr = sub(r'0\s*,\s*1',r'2',listStr)
myNewList = ast.literal_eval(myNewStr)
print str(myNewList) 
```

But that is not a good way to do it when you can logically do all the operations on the list by replacing elements from the list instead of doing a regex replace on its string representation .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:08:18.740

对于这个单一的案例：

```
a = [0, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1]
b = []

while a:
    x = a.pop(0)
    if x == 0 and a and a[0] == 1:
        a.pop(0)
        b.append(2)
    else:
        b.append(x) 
```

# excel - Excel 创建一系列相同的值？

> ID：12001121
> 
> 赞同：0
> 
> 时间：2012-08-17T06:57:10.897
> 
> 标签：excel

我想知道是否有办法让计算 IRR 更简单？例如，我有稳定的收入 $500/月，我想看看 6 个月、12 个月、18 个月等的 IRR。

目前，我必须创建三列，一列 6 行 500 美元，一列 12 行 500 美元，等等。

有没有办法简化计算？

PS 实际上有一个不同的最后付款值，所以我不能创建 12 行并选择相同值的子集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T10:23:44.533

**已编辑** 阅读 lori-m 的评论后，我在回复中添加了更多内容，以说明 Excel RATE 函数在内部执行的 RATE 计算

* * *

## 原始回复

我假设最后一个值是负数，因为您至少需要一个负数才能找到[IRR](http://finance.thinkanddone.com/irr.html)。

当年金金额为固定金额时，可选择使用[Excel RATE函数](http://thinkanddone.co.uk/en-gb/excel_rate_calculator.html)计算内部收益率

RATE 函数接受以下值

=RATE（NPER，PMT，PV，[FV]，类型）

NPER 将是您的案例 6、12、18 中的周期数

在这种情况下，PMT 是定期付款 500

PV 是年金的现值，如果它是流出的现金流，那么您需要将其指定为负数

FV 是残值

RATE函数的使用要求以下值中至少一个或最多两个必须为负FV、PV或PMT

然而，从你写的内容来看，你甚至可能没有负现金流，因此无法使用 IRR 或 RATE 函数

* * *

## [以下文本显示了 RATE 函数如何使用TVM 方程](http://finance.thinkanddone.com/finding_irr_with_tvm_equation_using_newton_raphson_method.html)计算内部收益率或简单的收益率

```
Newton Raphson Method IRR Calculation with TVM equation = 0

TVM Eq. 1: PV(1+i)^N + PMT(1+i*type)[(1+i)^N -1]/i + FV = 0

f(i) = 0 + 500 * (1 + i * 0) [(1+i)^6 - 1)]/i + -2500 * (1+i)^6

f'(i) = (500 * ( 6 * i * (1 + i)^(5+0) - (1 + i)^6) + 1) / (i * i)) + 6 * -2500 * (1+0.1)^5

i0 = 0.1
f(i1) = -571.0975
f'(i1) = -14420.4
i1 = 0.1 - -571.0975/-14420.4 = 0.0603965562675
Error Bound = 0.0603965562675 - 0.1 = 0.039603 > 0.000001

i1 = 0.0603965562675
f(i2) = -63.1212
f'(i2) = -11318.2776
i2 = 0.0603965562675 - -63.1212/-11318.2776 = 0.0548196309075
Error Bound = 0.0548196309075 - 0.0603965562675 = 0.005577 > 0.000001

i2 = 0.0548196309075
f(i3) = -1.1104
f'(i3) = -10921.6385
i3 = 0.0548196309075 - -1.1104/-10921.6385 = 0.0547179582964
Error Bound = 0.0547179582964 - 0.0548196309075 = 0.000102 > 0.000001

i3 = 0.0547179582964
f(i4) = -0.0004
f'(i4) = -10914.4953
i4 = 0.0547179582964 - -0.0004/-10914.4953 = 0.0547179250235
Error Bound = 0.0547179250235 - 0.0547179582964 = 0 < 0.000001
IRR = 5.47%

Newton Raphson Method IRR Calculation with TVM equation = 0

TVM Eq. 2: PV + PMT(1+i*type)[1-{(1+i)^-N}]/i + FV(1+i)^-N = 0

f(i) = -2500 + 500 * (1 + i * 0) [1 - (1+i)^-6)]/i + 0 * (1+i)^-6

f'(i) = (-500 * (1+i)^-6 * ((1+i)^6 - 6 * i - 1) /(i*i)) + (0 * -6 * (1+i)^(-6-1))

i0 = 0.1
f(i1) = -322.3697
f'(i1) = -4842.0856
i1 = 0.1 - -322.3697/-4842.0856 = 0.0334233887655
Error Bound = 0.0334233887655 - 0.1 = 0.066577 > 0.000001

i1 = 0.0334233887655
f(i2) = 178.1297
f'(i2) = -6438.6863
i2 = 0.0334233887655 - 178.1297/-6438.6863 = 0.0610889228796
Error Bound = 0.0610889228796 - 0.0334233887655 = 0.027666 > 0.000001

i2 = 0.0610889228796
f(i3) = -49.7272
f'(i3) = -5702.834
i3 = 0.0610889228796 - -49.7272/-5702.834 = 0.0523691914645
Error Bound = 0.0523691914645 - 0.0610889228796 = 0.00872 > 0.000001

i3 = 0.0523691914645
f(i4) = 18.7303
f'(i4) = -5922.4426
i4 = 0.0523691914645 - 18.7303/-5922.4426 = 0.055531790412
Error Bound = 0.055531790412 - 0.0523691914645 = 0.003163 > 0.000001

i4 = 0.055531790412
f(i5) = -6.4397
f'(i5) = -5841.5461
i5 = 0.055531790412 - -6.4397/-5841.5461 = 0.054429394433
Error Bound = 0.054429394433 - 0.055531790412 = 0.001102 > 0.000001

i5 = 0.054429394433
f(i6) = 2.2892
f'(i6) = -5869.581
i6 = 0.054429394433 - 2.2892/-5869.581 = 0.0548194083235
Error Bound = 0.0548194083235 - 0.054429394433 = 0.00039 > 0.000001

i6 = 0.0548194083235
f(i7) = -0.8044
f'(i7) = -5859.6427
i7 = 0.0548194083235 - -0.8044/-5859.6427 = 0.0546821305725
Error Bound = 0.0546821305725 - 0.0548194083235 = 0.000137 > 0.000001

i7 = 0.0546821305725
f(i8) = 0.2838
f'(i8) = -5863.1383
i8 = 0.0546821305725 - 0.2838/-5863.1383 = 0.0547305377303
Error Bound = 0.0547305377303 - 0.0546821305725 = 4.8E-5 > 0.000001

i8 = 0.0547305377303
f(i9) = -0.1
f'(i9) = -5861.9054
i9 = 0.0547305377303 - -0.1/-5861.9054 = 0.0547134792018
Error Bound = 0.0547134792018 - 0.0547305377303 = 1.7E-5 > 0.000001

i9 = 0.0547134792018
f(i10) = 0.0352
f'(i10) = -5862.3398
i10 = 0.0547134792018 - 0.0352/-5862.3398 = 0.054719491928
Error Bound = 0.054719491928 - 0.0547134792018 = 6.0E-6 > 0.000001

i10 = 0.054719491928
f(i11) = -0.0124
f'(i11) = -5862.1867
i11 = 0.054719491928 - -0.0124/-5862.1867 = 0.0547173727531
Error Bound = 0.0547173727531 - 0.054719491928 = 2.0E-6 > 0.000001

i11 = 0.0547173727531
f(i12) = 0.0044
f'(i12) = -5862.2407
i12 = 0.0547173727531 - 0.0044/-5862.2407 = 0.0547181196735
Error Bound = 0.0547181196735 - 0.0547173727531 = 1.0E-6 < 0.000001
IRR = 5.47% 
```

# gps - 给定的地理点位于美国的哪个州？

> ID：12001123
> 
> 赞同：2
> 
> 时间：2012-08-17T06:57:14.197
> 
> 标签：gps

我希望确定给定地理点（已知 GPS 坐标）所在的美国州和县。我相信我可以获得有关州和县拐角坐标的数据，但是我需要一种算法来计算该点落在哪个州和县。

我不是 Java 或 C 用户，但我是 Panorama (provue.com) 的一位非常有经验的程序员，这是一个数据库管理系统，具有非常全面和强大的编程语言。所以我需要访问一个通用定义的算法。

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:15:50.373

首先，您应该有一组多边形，每个多边形对应于美国的一个州，例如[http://www.nws.noaa.gov/geodata/catalog/national/html/us_state.htm](http://www.nws.noaa.gov/geodata/catalog/national/html/us_state.htm)

[然后您可以使用http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html#The](http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html#The) C Code中给出的以下算法

```
int pnpoly(int nvert, float *vertx, float *verty, float testx, float testy)
{
  int i, j, c = 0;
  for (i = 0, j = nvert-1; i < nvert; j = i++) {
    if ( ((verty[i]>testy) != (verty[j]>testy)) &&
     (testx < (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )
       c = !c;
  }
  return c;
} 
```

nvert：多边形中的顶点数。下面讨论是否重复最后的第一个顶点。

vertx, verty：包含多边形顶点的 x 和 y 坐标的数组。

testx, testy：测试点的 X 和 y 坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:14:07.300

快速而肮脏：
您可以通过以下方式 [*将此项目*](http://www.ngs.noaa.gov/cgi-bin/spc_getpc.prl)[用作 HTTP 请求： http ://www.ngs.noaa.gov/cgi-bin/spc_getpc.prl?LatBox=N385930.99999&LonBox=W0985930.99999](http://www.ngs.noaa.gov/cgi-bin/spc_getpc.prl?LatBox=N385930.99999&LonBox=W0985930.99999)

并解析响应以提取状态。

# jquery - beforeunload 自定义对话框

> ID：12001129
> 
> 赞同：4
> 
> 时间：2012-08-17T06:57:26.767
> 
> 标签：jquery, content-management-system, onbeforeunload

我正在为我的站点使用 CMS，并且正在检查在窗口位置更改之前内容是否已被修改。现在我已经知道了

```
$(window).bind('beforeunload', function() {
     return "dialog message";
}); 
```

方法，但我找到了一个名为[Apprise](http://thrivingkings.com/read/Apprise-The-attractive-alert-alternative-for-jQuery)的插件，并希望用其中一个替换默认对话框。这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-02-10T10:25:42.840

Firefox 不允许更改消息框

# ubuntu - 无法获取用于在 Ubuntu/CloudFoundry 中安装的 Postgres 9.0 软件包

> ID：12001130
> 
> 赞同：1
> 
> 时间：2012-08-17T06:57:27.657
> 
> 标签：ubuntu, postgresql-9.0

我正在尝试在 ubuntu 10.04 服务器实例上安装 CloudFoundry (VCAP)。
遵循这些指示：[http ://blog.modeltwozero.com/2011/05/running-cloud-foundry-on-amazon-ec2-or.html](http://blog.modeltwozero.com/2011/05/running-cloud-foundry-on-amazon-ec2-or.html)

不幸的是，构建命令抱怨 Postgres 9.0 不存在。我尝试单独安装 Postgres 9.0，但这些帖子中的任何一个都无法成功，而且每个人似乎都指向同一个目录。

也许目录是旧的？我会很感激任何想法！

这是我尝试构建时的日志：

```
$ bash < <(curl -s -k -B https://raw.github.com/cloudfoundry/vcap/master/dev_setup/bin/vcap_dev_setup)

Installing wget...
Reading package lists...
Building dependency tree...
Reading state information...
wget is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
Checking web connectivity.
Installing prerequisites...
Reading package lists...
Building dependency tree...
Reading state information...
ruby is already the newest version.
ruby-dev is already the newest version.
libopenssl-ruby is already the newest version.
rdoc is already the newest version.
ri is already the newest version.
irb is already the newest version.
build-essential is already the newest version.
ssl-cert is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.
Installing chef...
true
Installing blobstore_client...
true
Installing rake...
true
Installing git...
Reading package lists...
Building dependency tree...
Reading state information...
git-core is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 4 not upgraded.

Lanching chef...
Installing deployment devbox, cloudfoundry home dir is /home/ubuntu/cloudfoundry
RUN LIST = role[cloudfoundry]role[nats_server]role[ccdb]role[cloud_controller]role[postgresql_gateway]role[redis_gateway]role[redis_node]role[uaadb]role[filesystem_gateway]role[mongodb_gateway]role[health_manager]role[router]role[rabbitmq_gateway]role[mysql_gateway]role[mysql_node]role[vblob_gateway]role[vblob_node]role[postgresql_node]role[dea]role[mongodb_node]role[rabbitmq_node]role[uaa]role[stager]
[2012-08-17T06:38:37+00:00] INFO: *** Chef 10.12.0 ***
[2012-08-17T06:38:38+00:00] INFO: Setting the run_list to ["role[cloudfoundry]", "role[nats_server]", "role[ccdb]", "role[cloud_controller]", "role[postgresql_gateway]", "role[redis_gateway]", "role[redis_node]", "role[uaadb]", "role[filesystem_gateway]", "role[mongodb_gateway]", "role[health_manager]", "role[router]", "role[rabbitmq_gateway]", "role[mysql_gateway]", "role[mysql_node]", "role[vblob_gateway]", "role[vblob_node]", "role[postgresql_node]", "role[dea]", "role[mongodb_node]", "role[rabbitmq_node]", "role[uaa]", "role[stager]"] from JSON
[2012-08-17T06:38:38+00:00] INFO: Run List is [role[cloudfoundry], role[nats_server], role[ccdb], role[cloud_controller], role[postgresql_gateway], role[redis_gateway], role[redis_node], role[uaadb], role[filesystem_gateway], role[mongodb_gateway], role[health_manager], role[router], role[rabbitmq_gateway], role[mysql_gateway], role[mysql_node], role[vblob_gateway], role[vblob_node], role[postgresql_node], role[dea], role[mongodb_node], role[rabbitmq_node], role[uaa], role[stager]]
[2012-08-17T06:38:38+00:00] INFO: Run List expands to [deployment, essentials, ruby, cloudfoundry, nats_server, postgresql, postgresql::system, ccdb, ruby::ruby18, nginx, staging_manifest, cloud_controller, postgresql::gateway, redis::gateway, redis, redis::node, redis::backup, uaadb, filesystem::default, filesystem::gateway, mongodb::gateway, health_manager, router, rabbitmq::gateway, mysql::gateway, mysql, mysql::node, mysql::backup, vblob::gateway, node::node06, vblob, vblob::node, postgresql::service, postgresql::node, postgresql::backup, dea, imagemagick, mongodb, mongodb::node, mongodb::backup, rabbitmq, rabbitmq::node, java, maven, tomcat, uaa, stager]
[2012-08-17T06:38:38+00:00] INFO: Starting Chef Run for ip-10-160-245-8.us-west-1.compute.internal
[2012-08-17T06:38:38+00:00] INFO: Running start handlers
[2012-08-17T06:38:38+00:00] INFO: Start handlers complete.
gpg: requesting key 8683D8A2 from hkp server keyserver.ubuntu.com
gpg: key 8683D8A2: "Launchpad PPA for Martin Pitt" not changed
gpg: Total number processed: 1
gpg:              unchanged: 1
W: Failed to fetch http://ppa.launchpad.net/pitti/postgresql-common/ubuntu/dists/lucid/main/binary-amd64/Packages.gz  404  Not Found

E: Some index files failed to download, they have been ignored, or old ones used instead.
 * Restarting PostgreSQL 8.4 database server                                                                                                                                              [ OK ] 
[2012-08-17T06:38:54+00:00] ERROR: The running postgresql listening on port 5433 could not match the version: 9.0, try another port
[2012-08-17T06:38:54+00:00] ERROR: Running exception handlers
[2012-08-17T06:38:54+00:00] ERROR: Exception handlers complete} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:17:34.273

当您尝试按照此处所述安装 Postgres DB 时会发生什么：http: [//codingforme.wordpress.com/2012/05/15/installing-postgresql-database-and-pgadmin-iii-in-ubuntu-12-04/](http://codingforme.wordpress.com/2012/05/15/installing-postgresql-database-and-pgadmin-iii-in-ubuntu-12-04/) ?

除非软件包已过时，否则这应该对您有用，伙计。

# wso2 - wso2 治理注册表 - 依赖关系和关联

> ID：12001133
> 
> 赞同：0
> 
> 时间：2012-08-17T06:57:31.997
> 
> 标签：wso2, wso2greg

我想更多地了解 WSO2 治理注册表中依赖项和关联之间的区别。有没有介绍相关用例的教程？

为了进行调查，我创建了两个具有依赖关系的资源，然后在它们之间建立了关联。然后我更新/删除了其中一个资源，但我没有被警告我破坏了链接。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T05:24:36.013

可以从注册表上的任何资源（或集合）到注册表上的另一个资源（或集合）或可以通过 URL 引用的外部资源创建关联。虽然源应该是注册表中存在的资源，但目标资源可以是任何可以为其提供 URL 的资源。关联具有关联类型。

例如：与标准 B 确认的文档 A，您可以通过声明 A“确认到”B 来创建这两者之间的关联，其中关联名称为“确认到”。

依赖是关联的一种特殊化，它表明一个资源依赖于另一个资源。

希望这可以帮助。

谢谢

蒂利尼

# android - 带有 CheckBox 单选的自定义 Listview

> ID：12001143
> 
> 赞同：3
> 
> 时间：2012-08-17T06:57:56.650
> 
> 标签：android, listview, checkbox

在这里，我正在使用复选框/单选按钮创建自定义列表视图。我得到了这个，但我需要一个单一的选择。

我尝试使用它`lstvw.setChoiceMode(ListView.CHOICE_MODE_SINGLE);`，但它不适用于我。有没有其他解决方案，请告诉我。

main.java

```
 private ImageAdapter  adapter; 

private static String month[] = {"January","February","March","April","May",  
    "June","July","August","September",  
    "October","November","December"};  

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView lstvw = (ListView) findViewById(R.id.listView);

     adapter = new ImageAdapter(this, month);  
     lstvw.setAdapter(adapter);  
      lstvw.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

     lstvw.setOnItemClickListener(this);
} 
```

我不知道如何将复选框的代码添加到适配器类中。请检查适配器类，如下所示。

ImageAdapter.class

```
public class ImageAdapter extends BaseAdapter{

public String title[];  
public String description[];  
public Activity context;  
public LayoutInflater inflater;

public ImageAdapter(Activity context,String[] title) {  
    super();  

    this.context = context;  
    this.title = title;  

    this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return title.length;  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  

    TextView txtViewTitle;  

}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  

    ViewHolder holder;  
    if(convertView==null)  
    {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.listitem, null);  

        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.lstvw_textView);  
        convertView.setTag(holder);  
    }  
    else  
        holder=(ViewHolder)convertView.getTag();  

    holder.txtViewTitle.setText(title[position]);  

    return convertView;  
}   

} 
```

**编辑：**

列表项.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

<TextView
    android:id="@+id/lstvw_textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/itemCheckBox"
    android:padding="8dp"
    android:text="hello world" />

<CheckBox
    android:id="@+id/itemCheckBox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:gravity="right" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T09:22:05.873

如果我一次只需要选择一个项目，我会这样做。

**Home.java（活动）**

```
package com.lvcheck.activities;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class Home extends Activity 
{
    private ListView lvCheckBox;
    private Button btnCheckAll, btnClearALl;
    private String[] arr = {"One", "Two", "Three", "Four", "Five", "Six"};

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnCheckAll = (Button)findViewById(R.id.btnCheckAll);
        btnClearALl = (Button)findViewById(R.id.btnClearAll);

        lvCheckBox = (ListView)findViewById(R.id.lvCheckBox);
        lvCheckBox.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        lvCheckBox.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, arr));

        btnCheckAll.setOnClickListener(new OnClickListener() 
        {           
            @Override
            public void onClick(View arg0) 
            {
                for(int i=0 ; i < lvCheckBox.getAdapter().getCount(); i++)
                {
                    lvCheckBox.setItemChecked(i, true);             
                }
            }
        });

        btnClearALl.setOnClickListener(new OnClickListener() 
        {           
            @Override
            public void onClick(View v) 
            {
                for(int i=0 ; i < lvCheckBox.getAdapter().getCount(); i++)
                {
                    lvCheckBox.setItemChecked(i, false);                
                }
            }
        });
    }
} 
```

我的**(main.xml) XML 文件**应该是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:layout_width="fill_parent"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_height="wrap_content">

        <Button
            android:layout_width="wrap_content"
            android:text="Check All"
            android:layout_marginRight="7dip"
            android:id="@+id/btnCheckAll"
            android:layout_height="wrap_content">
        </Button>
        <Button
            android:layout_width="wrap_content"
            android:text="Clear All"
            android:id="@+id/btnClearAll"
            android:layout_height="wrap_content">
        </Button>
    </LinearLayout>

    <ListView
        android:layout_width="fill_parent"
        android:id="@+id/lvCheckBox"
        android:fadingEdge="none"
        android:cacheColorHint="@null"
        android:layout_height="fill_parent">
    </ListView>
</LinearLayout> 
```

所以输出会是这样的..

![在此处输入图像描述](../Images/18d6e15f8a4876ecb2e4a3a629f7fa52.png)

来源：[这里](http://androidcodesnips.blogspot.in/2011/08/multiple-choice-list-android.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20Androidcodes%20%28AndroidCodes%29)

如果您对此有任何问题，请告诉我。

**编辑：**检查这个有用的链接：[自定义单选 ListView](https://stackoverflow.com/questions/8337180/custom-single-choice-listview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:12:43.647

您可以`CheckBox`在您的适配器类中使用。试试这个。

```
 @Override
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        // TODO Auto-generated method stub

        if (convertView == null) {
            inflater = LayoutInflater.from(adapterContext);
            convertView = inflater.inflate(R.layout.view, null);
            final ViewHolder viewHolder = new ViewHolder();

            viewHolder.name = (TextView) convertView.findViewById(R.id.txtName);
            viewHolder.checkBox = (CheckBox) convertView.findViewById(R.id.checkBox1);

            convertView.setTag(viewHolder);
        }

        final ViewHolder holder = (ViewHolder) convertView.getTag();

        holder.name.setText(collectContactList.get(position).getName());

        holder.checkBox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                CheckBox cb = (CheckBox) v;
                if (cb.isChecked() == true) 
                {
                    // Here you will get list of checked item.
                }

                else 
               {
                // Here you will get list of unchecked item.    
                }

            }
        }); 
```

希望这会帮助你。

# sql - 如何在 DB2 9.7 的模式中搜索触发器？

> ID：12001144
> 
> 赞同：6
> 
> 时间：2012-08-17T06:57:59.553
> 
> 标签：sql, database, db2

我在 IBM DB2 9.7 的模式中有一个表列表。其中一些有触发器，而另一些则没有。我正在创建一个遍历 SYSCAT.TABLES 中所有表的存储过程，但是如果该表具有特定名称的触发器，我该如何检查 sql 语法？（或任何触发器）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T13:39:47.150

您可以使用[`SYSCAT.TRIGGERS`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001066.html)目录视图。

```
SELECT *
FROM SYSCAT.TRIGGERS
WHERE TABNAME    = @table_name
  AND TABCREATOR = @table_schema
  AND TRIGNAME   = @trigger_name
  AND TRIGSCHEMA = @trigger_schema 
```

给出的谓词只是您可能搜索的列的示例，您显然可以根据需要进行选择。

# dart - Dart 中的固定宽度格式

> ID：12001148
> 
> 赞同：2
> 
> 时间：2012-08-17T06:58:36.303
> 
> 标签：dart

我正在编写一个脚本来生成一个文件，该文件的分子结构以 MDL 的“ **.mol** ”格式表示。它需要写入几条具有精确指定宽度的数据（*即*，2 个字符和右边的空格填充，3 个字符和左边的空格填充，*等等*）。我如何在 Dart 中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T14:22:39.577

目前使用字符串插值是不可能的。这里有一个错误：

[http://code.google.com/p/dart/issues/detail?id=1694](http://code.google.com/p/dart/issues/detail?id=1694)

您应该给它加星标以表达您对修复此问题的支持。

同时，您可以逐个字符地手动构建适合您需要的字符串。

约翰

# asp.net-mvc-3 - ASP.NET MVC 层分离与 SQL Dapper 和 NHibernate

> ID：12001153
> 
> 赞同：0
> 
> 时间：2012-08-17T06:59:02.117
> 
> 标签：asp.net-mvc-3, dapper, n-tier-architecture

我正在开发一个 ASP.NET MVC 应用程序，使用 SQL Dapper 进行检索，使用 NHibernate 进行 CRUD。我在层分离方面遇到了一些问题。

我有存储库说 UserRepository 具有**公共 User GetUsersList()**方法。这里的“用户”是一个 NHibernate 实体。这里的问题是我需要在 UI 中显示一个字段，该字段不作为用户中的属性存在，例如我直接从 SQL 查询中检索的“HasAltContacts”。

现在，我的问题是我是否需要创建单独的 DTO 并留下这些 NHibernate 实体并围绕这些类构建存储库（至少 READ METHODS）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:02:00.017

> 这里的“用户”是 NHibernate 实体。这里的问题是我需要在 UI 中显示一个字段，该字段不作为用户中的属性存在，例如我直接从 SQL 查询接收的“HasAltContacts”。

定义一个视图模型，该模型将包含您的视图所需的所有属性。然后让您的控制器操作通过查询您拥有的各种数据源来填充此视图模型，并将此视图模型传递给视图。

# c# - 如何使用c#通过网络摄像头播放声音？

> ID：12001154
> 
> 赞同：0
> 
> 时间：2012-08-17T06:59:10.130
> 
> 标签：c#, vb.net, c#-4.0, webcam

我想使用 c# 代码通过网络摄像头播放声音。我有网络摄像头，它有音频选项。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:47:04.803

您可能想阅读这个问题[获取音频设备列表并使用 c# 选择一个](https://stackoverflow.com/questions/5405660/get-list-of-audio-devices-and-select-one-using-c-sharp)关于如何获取要用于播放的音频设备的问题。

# cloudant - 如何使用 Objective-C 更新 Cloudant 文档

> ID：12001157
> 
> 赞同：2
> 
> 时间：2012-08-17T06:59:16.367
> 
> 标签：cloudant

我在 Cloudant 数据库中有一个文档。如何使用 Objective-C 修改文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:45:43.240

Cloudant 基于 CouchDB，CouchDB 的核心思想之一是所有请求都是基于 HTTP 的。因此，您可以像访问通常的 HTTP 请求一样访问 coudant。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:08:06.257

下面是一个 CouchDB 客户端 Objective-C 库的示例：

*   [单元测试](https://github.com/Hypertopic/lib-objc/blob/master/hypertopic-framework/Test/TestHTDatabase.m)

*   [执行](https://github.com/Hypertopic/lib-objc/blob/master/hypertopic-framework/Classes/HTDatabase.m#L129)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T07:51:15.440

使用链接[https://github.com/gunjankumr/CouchDBDemo](https://github.com/gunjankumr/CouchDBDemo)获取一个完整的项目来创建、插入、删除和更新 CloudAnt 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-12T21:29:45.490

您可以使用 NSURLSession 滚动您自己的 HTTP 请求，也可以使用许多库来执行此操作，cloudant 在 ObjectoveCloudant 中有一个官方的 Objective-C 库，可以通过 CocoaPods 安装[。](https://github.com/cloudant/objective-cloudant)

# android - Android：如果用户没有安装市场应用程序，我打开指向 Google Play 的 URL 会发生什么？

> ID：12001164
> 
> 赞同：0
> 
> 时间：2012-08-17T06:59:43.870
> 
> 标签：android, browser, android-intent, installation

并非所有 Android 设备都安装了 Google Play 应用程序。那么，如果我有意在浏览器中打开 Google Play 页面会发生什么？用户还能下载应用吗？

我无法测试它，因为我所有的设备都安装了 Google Play 应用程序作为 Android 操作系统的一部分。

这是有问题的代码：

```
 String url = "http://play.google.com/store/apps/details?id=com.example.my_app";
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i); 
```

用户是否能够安装该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:06:52.607

它将在此页面打开浏览器。如果用户没有安装市场，我不确定用户是否能够将应用程序推送到他们的设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:07:25.053

Play 商店将在浏览器中打开，但用户仍然无法下载和安装，因为他/她的设备不会在可以安装的 Play 商店设备列表中显示为有效（请记住Play商店的浏览器版本从不下载，而只是通过云安装将其发送到各种设备）。如果没有安装 Play 商店，您唯一的选择是为他们提供侧载下载链接。

# hibernate - Hibernate：部分获取集合？

> ID：12001175
> 
> 赞同：1
> 
> 时间：2012-08-17T07:00:24.910
> 
> 标签：hibernate, collections, fetch, partial

我想使用休眠条件查询仅获取集合的一部分。例如，假设我有一个包含多个 Student 对象的 Class 对象。现在我想获得一个课程列表，但只有德国学生应该被提取到学生集合中（其余的不需要并且会是巨大的开销），只需一个数据库查询。

在 hibernate 的更高版本中（我认为在 3.6.4 之前），这可以通过使用过滤的 createCriteria 来完成，如下所示：

```
criteria.createCriteria("students", "studentscollection", Criteria.LEFT_JOIN,
     Restrictions.eq("studentscollection.country", "DE")); 
```

问题在于，在当前版本的休眠中，这会使集合未初始化并触发大量数据库查询以加载每个访问时的单个集合的整个集合。这是一个巨大的性能问题，导致数百个查询而不是一个。

当前休眠版本中是否有任何解决方案可以使用一个查询完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:49:37.000

考虑使用较低版本的休眠。我们最近在我的团队中遇到了类似的困境。据我所知，我在 4.0.1 最终版本中使用了类似的结构，并且不记得多个查询/效率的任何问题。但是你是对的，版本 3.6.4 中的行为可以改变（[https://hibernate.onjira.com/browse/HHH-2049?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://hibernate.onjira.com/browse/HHH-2049?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)）如果您能找到答案，请在此处告诉我们。

问候，

卢卡斯

# c# - dll的覆盖方法

> ID：12001177
> 
> 赞同：1
> 
> 时间：2012-08-17T07:00:30.517
> 
> 标签：c#, inheritance, overriding

我有供应商提供的 ac# dll。我已经提取了源代码，但不能自己修改它。

假设 dll 有这些类（在同一个命名空间中）：

```
public static class A {
   public static string Method1(this Helper helper, B options) {
      ...
   }
}

public class B {
   public int LoadingElementDuration {
      get;
      set;
   }

   public string Method2() {
      ...
   }
} 
```

A班一切都好。这是我们使用的类。可以修改B类吗？我想添加一个属性并用我自己的代码覆盖 Method2。然后 A 类应该使用我的代码而不是默认的 B 类。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:05:23.510

不，这是不可能的，因为`Method2`是密封的。您可以从 B 编写派生类并添加一个新属性，但您不能覆盖`Method2`. `Method2`如果是虚拟的，这将是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:05:28.293

您可以复制此 dll 的所有内容并将其粘贴到具有相同类名的新创建的类库中。然后，您可以根据需要对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:04:51.920

不，您将只能扩展功能而不能更改现有功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:08:25.643

为什么这些人说不可能？我错过了什么吗？创建派生类，添加属性，并使用“new”覆盖方法

```
public class C : B
{
    //add property here

    public new string Method2()
    {

    }
} 
```

那么让我们来看看我们在这里得到了什么：

如果您不需要在 Method1 中使用添加的属性（这一刻从您的问题中不是很清楚）：

```
C options = new C();
//init here
helper.Method1(options); //this will cast your object of C class to object of B class and your added property will be inaccessible. 
```

但是，如果您需要更改 Method1 的实现以使用您的属性，您可以尝试这样做：

```
public static class CHelper
{
     public static string Method1(this Helper helper, C options)
     {

     }
} 
```

并编写自己的 Method1 实现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:19:51.273

如果从您的代码中调用 ClassA->Method1，您需要做的就是扩展 ClassA 和 ClassB 并添加您需要的方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-17T07:22:52.833

新建一个Class，继承自ClassB，新建一个Method2，关键字new，就这样

# actionscript-3 - 舞台上两个电影剪辑的随机化

> ID：12001178
> 
> 赞同：-1
> 
> 时间：2012-08-17T07:00:33.933
> 
> 标签：actionscript-3, random

我试图创建一个小代码，其中舞台上的两个电影剪辑随机出现在随机位置。我可以让一个物体随机出现在舞台上。但是如何获得第二个对象？这是我的代码！

```
var myTimer:Timer = new Timer (1500);
myTimer.start();
myTimer.addEventListener(TimerEvent.TIMER, update);

function update(event:TimerEvent) : void
{
trace(Math.floor(Math.random() * 100 ));
object.x = Math.floor(Math.random() * 300 ) ;
object.y = Math.floor(Math.random() * 200 ) ;

//object.alpha = Math.floor(Math.random() * 1);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:11:03.130

像这样的东西？

```
import flash.display.MovieClip;

function createMovieClip($color:uint):MovieClip
{
    // Create an mc and draw a colored square on it
    var mc:MovieClip = new MovieClip();
    mc.graphics.beginFill($color, 1);
    mc.graphics.drawRect(0, 0, 100, 100);
    return mc;
}

function update(event:TimerEvent):void
{
    // Update each MC instance 
    updateMc(mc_1);
    updateMc(mc_2);
}

function updateMc($mc:MovieClip):void
{
    // As your code:
    $mc.x = Math.floor(Math.random() * 300 ) ;
    $mc.y = Math.floor(Math.random() * 200 ) ;
    // Add MC to stage if it isn't there already
    if($mc.parent == null) stage.addChild($mc);
}

// Create variables to hold your movie clips
var mc_1:MovieClip;
var mc_2:MovieClip;

// Create your movie clips
mc_1 = createMovieClip(0xFF0000);
mc_2 = createMovieClip(0x0000FF);

// Start your timer - as your original code
var myTimer:Timer = new Timer (1500);
myTimer.start();
myTimer.addEventListener(TimerEvent.TIMER, update);

// Update once immediately to add MCs to stage
update(null); 
```

# jsf-2 - 更改 primefaces 调度程序事件的颜色

> ID：12001181
> 
> 赞同：4
> 
> 时间：2012-08-17T07:01:04.473
> 
> 标签：jsf-2, primefaces

我正在使用 primefaces(3.0) 调度程序组件。

[http://www.primefaces.org/showcase-labs/ui/schedule.jsf](http://www.primefaces.org/showcase-labs/ui/schedule.jsf)

正如我们在这里看到的，有一些用蓝色创建的事件。

现在我想在唯一性的基础上改变这些事件的颜色。例如，每个员工都会有一个相关联的唯一 ID。

因此，假设员工 ID 1 的事件颜色为蓝色，ID 2 的事件颜色为红色，依此类推。

如何从支持 bean 将颜色应用于这些数量的事件？任何线索....

我可以通过这种方式更改调度程序的背景颜色，但不知道如何更改事件的颜色？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T21:37:44.157

如果需要，请在同一事件中添加样式类和数据。

例子：

```
String id="2";
DefaultScheduleEvent evento = new DefaultScheduleEvent("titule", new Date(), new Date(), id);
evento.setStyleClass("event-close"); 
```

在 CSS 中，Damian 的反应很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T12:15:14.660

DefaultScheduleEvent 有一个以 CSS 类作为参数的构造函数：

```
eventModel = new DefaultScheduleModel();  
eventModel.addEvent(new DefaultScheduleEvent("Event for employee 1", new Date(), laterToday(), "emp1"));
eventModel.addEvent(new DefaultScheduleEvent("Event for employee 2", tomorrow(), laterTomorrow(), "emp2")); 
```

emp1 和 emp2 是样式类。

对于 PrimeFaces 3.0，将以下 css 添加到您的样式表中：

```
.emp1 .fc-event-skin {
    background: red;
}
.emp2 .fc-event-skin {
   background: green;
 } 
```

对于其他 PrimeFaces 版本，请参阅其他答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-27T08:51:21.807

使用 primefaces 4.0 时应用此代码

```
eventModel = new DefaultScheduleModel();  
eventModel.addEvent(new DefaultScheduleEvent("Event for employee 1", new Date(), laterToday(), "emp1"));
eventModel.addEvent(new DefaultScheduleEvent("Event for employee 2", tomorrow(), laterTomorrow(), "emp2")); 
```

emp1 和 emp2 是样式类。然后将以下 css 添加到您的样式表中：

```
.emp1 .fc-event-inner {
    background: red;
}
.emp2 .fc-event-inner {
   background: green;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-09T18:47:57.103

在 Primefaces 7.0 中，CSS 选择器需要有所不同。你应该使用`.fc-bg`

使用以下 CSS 代码：

```
.specialEvent .fc-bg {
    background-color: red;
    border-color: red;
    color: white;
    opacity: 1;
} 
```

从 javacode 设置样式保持不变

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T12:13:22.807

您可以在样式表和支持 bean 中定义样式类，将样式类设置为`DefaultScheduleEvent`使用方法的实例：

```
public void setStyleClass(String styleClass) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-08-26T10:01:59.933

在代码中设置 styleClass 后，如上所述，在 PrimeFaces 5.2 中着色对我不起作用。最后，我使用了重要的修饰符：

```
a.emp1 {
   background: #D0525D !important;
   border-color: #932c39!important;
} 
```

# php - 登录后重定向，Wordpress URL

> ID：12001188
> 
> 赞同：0
> 
> 时间：2012-08-17T07:01:18.690
> 
> 标签：php, wordpress

在登录尝试失败后，我正在使用以下函数重定向用户。在functions.php中，我添加了：

```
add_action( 'wp_login_failed', 'inline_login_fail' );

function inline_login_fail( $username ) {
    $referrer = $_SERVER['HTTP_REFERER'];
    if ( !empty($referrer) && !strstr($referrer,'wp-login') && !strstr($referrer,'wp-admin') ) {
        if ( !strstr($referrer,'?login=failed') ) { // don’t append twice
        wp_redirect( $referrer . '?login=failed' ); 
        } else {
        wp_redirect( $referrer );
        }
    exit;
    }
} 
```

这可行，但问题是我无法弄清楚如何解析“？登录失败”。当我将此作为 PHP 问题提出时，他们说 URL 格式错误。

我的网址：www.site.com/?page_id=57?login=failed

首选网址：www.site.com/?page_id=57&login=failed

现在你会认为我可以改变'？至 '＆'。当我这样做时，如果用户尝试从主页登录并失败，则会产生问题。它会创建一个 404 的 URL：“在此服务器上找不到请求的 URL /wordpress/&login=failed。”

有什么方法可以更正此功能，以便它可以与首选 URL 一起使用？这样我就可以检索登录是否失败的值，如下所示：

```
<?php
if(isset($_GET['login']) === true and $_GET['login'] === 'failed')
{
  get_template_part( 'login', 'failed' );
} else {
  get_template_part( 'login', 'form' );
}
?> 
```

否则，我根本无法弄清楚如何使用该 URL。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:07:05.937

检查`?`

```
<?php
    function inline_login_fail( $username ) {
        $referrer = $_SERVER['HTTP_REFERER'];
        if ( !empty($referrer) && !strstr($referrer,'wp-login') && !strstr($referrer,'wp-admin') ) {
            if ( !strstr($referrer,'login=failed') ) { // don’t append twice
                if(!strstr($referrer, '?')){
                    wp_redirect( $referrer . '?login=failed' ); 
                } else {
                    wp_redirect( $referrer . '&login=failed' ); 
                }
            } else {
                wp_redirect( $referrer );
            }
        exit;
        }
    }
?> 
```

# jquery - 使用 jQuery 预加载 CSS 精灵图像

> ID：12001191
> 
> 赞同：2
> 
> 时间：2012-08-17T07:01:24.097
> 
> 标签：jquery, html, css, css-sprites

我想用 jquery 或 JavaScript 预加载两个精灵图像，这些精灵图像在页面完全加载之前不会显示。我已经尝试过[这个](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)、[这个](https://stackoverflow.com/questions/8647305/preload-background-image)、[这个](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)、[这个](http://chipsandtv.com/articles/jquery-image-preload)等等，但它们都不适合我。然而，一个简单的基于 CSS HTML 的解决方案可以工作。但是我有很多页面，所以我不能使用 CSS HTML 解决方案，而是我想使用一些 jquery 解决方案，以便在所有页面都可以访问的单个 .js 文件中工作。

有效的基于 CSS Html 的解决方案。

```
 <div id="preload">
    <img src='_ls-global/images/layout-images/layout.png'/>
    <img src='_ls-global/images/layout-images/layout2.png'/>
    </div>

    <style>
    #preload{ display: none;}
    </style> 
```

由于这个基于 CSS HTML 的解决方案正在运行，我使用 jQuery 实现了它，但它不起作用。

```
 $(window).load(function(){

        $("<div/>", {
          "id": "preload",
          "css": { "display" : "none"},
        }).prependTo("body");
        $("<img src='_ls-global/images/layout-images/layout.png'/>").appendTo("#preload");
        $("<img src='_ls-global/images/layout-images/layout2.png'/>").appendTo("#preload");

        }); 
```

请提出任何可能的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:07:44.877

对于批量图像预加载：

```
window.onload = function() {
    //preload images: set path, enter image names
    var path = '../images/';
    var images = [
        'my_image.png',
        'my_image2.png'
        ];

    for (image in images) {
        new Image().src = path + images[image];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:52:11.887

为什么这么难？！？

做就是了：

```
<script>
    $(window).load(function(){
        new Image().src = '_ls-global/images/layout-images/layout.png';
        new Image().src = '_ls-global/images/layout-images/layout2.png';
    });
</script> 
```

这样就行了。不需要任何标记。

# c# - 使用 GPU 加速 BigInteger 计算

> ID：12001194
> 
> 赞同：10
> 
> 时间：2012-08-17T07:01:32.840
> 
> 标签：c#, .net, performance, gpu, physics

我几乎完成了一个处理一些非常大的整数的算法（大约 2 的数量级为 100,000,000 次方）。这需要在具有足够内存的 16 核服务器上花费几个小时的高度并行代码，因为该算法不是内存密集型的。我在 .NET 4 中使用 BigInteger 类。

该算法的细节并不重要，但对于上下文，以下是对这些整数执行的操作的详尽列表以及该算法的一些显着特征：

*   加法/减法。
*   大数乘以小数。
*   大数除以非常小的数（例如 2）。
*   基数 2 日志。
*   基数 2 电源。
*   两个或多个大数的比较（最小值/最大值）。
*   没有任何素数的参与。
*   该算法专门设计为不是内存密集型的，因为内存访问的性能影响超过了一些智能的即时计算。然而，如果要改进内存访问，该算法可以合理地受益。

我已经尽可能地优化了代码，现在分析只显示了两个瓶颈：

*   为如此大的数字计算以 2 为底的对数。
*   检查这些数字中二进制数字的预定义模式。这是因为访问 BigInteger 底层数据的唯一方法是首先使用 ToByteArray 而不是就地操作。此外，对字节大小的块进行操作也无助于提高性能。

考虑到内存访问和日志操作，我开始考虑 GPU 以及是否可以有效地卸载一些工作。我对 GPU 知之甚少，除了它们针对浮点运算进行了优化。

我的问题是，使用 GPU .NET 之类的库，如何在 GPU 上处理如此大的数字？我可以以某种方式利用浮点优化来计算这么大的数字的 Log 吗？

寻找起点，形成战略。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T07:49:16.913

我正在四处寻找 C# 中的 GPU 工作，并正在考虑 Tidepowerd.com GPU.NET 和 CUDAfy.NET。我上次检查时，Nvidia 特定和 CUDAfy 都不（还）支持单声道。但它们都允许在 GPU 上运行的 C# 中看起来相当正常的代码。

另外，您是否考虑过使用 3d 派对库？有几个非常好的 BigInteger 库，也是开源的。GMP很好而且免费；[http://gmplib.org/](http://gmplib.org/)，至少有一个 C# 包装器（我没有经验）[http://www.emilstefanov.net/Projects/GnuMpDotNet/](http://www.emilstefanov.net/Projects/GnuMpDotNet/)

.NET 中的 BigInteger 类是不可变的，根据我的经验，这并不方便。如果您有 2 个整数（大约 100MB），则添加操作会产生第三个 100MB BigInt。例如，如果要修改两个原件之一，则可以更快地完成。

```
C = A + B means allocating 100MB for C (this is what BigInt does)
A = A + B means you no longer have the original A, but a much faster calculation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-04T17:16:19.657

如果有人觉得它有帮助，这里是 BigInteger 的 Log Base 2 实现，它比使用内置函数快得多。

```
private static BigInteger LogBase2(BigInteger num) {
    if (num <= Zero)
        return MinusOne; //does not support negative values.
    BigInteger i = Zero;
    while (!(num >>= 1).IsZero)
        i++;
    return i;
} 
```

# ios - 我如何知道 *.a 文件是为哪个架构构建的？

> ID：12001195
> 
> 赞同：6
> 
> 时间：2012-08-17T07:01:34.863
> 
> 标签：ios, arm, bsd

我正在使用 mac OS 10.7.4。使用 Xcode 4.3.2 。

我从我的伙伴那里得到了一个 *.a 静态库文件。我想知道它是为哪种架构而构建的。是ARMv6、ARMv7、i386还是其他架构？

是否有任何命令或方法来获取有关文件体系结构的信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T07:06:34.297

您可以使用 otool 找出文件的体系结构：[otool 手册页](http://developer.apple.com/library/mac/ipad/#documentation/Darwin/Reference/ManPages/man1/otool.1.html)

```
otool -hv mylibrary.a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:08:38.593

Unix/Linux`file`命令会告诉你它是什么类型的文件：

```
% file a.out
a.out: Mach-O 64-bit executable x86_64 
```

# jquery - Jquery 中的 JSON 解析

> ID：12001196
> 
> 赞同：0
> 
> 时间：2012-08-17T07:01:35.867
> 
> 标签：jquery, ajax, json

我有一个类似于以下内容的 JSON 数据::

```
{"product":["{productTitle=ABCD , productImage=/abcd.jpg, productPath=CDEF.html, productPrice=$299}","{productTitle=EFGH, productImage=xxxx.jpg, productPath=ggfft.html, productPrice=$299}"]} 
```

我正在尝试处理数据并使用它的 JSP 页面。

以下是我用来解析响应的每个节点的函数。

```
success : function(data) {
                            alert("successs");
                            alert('data.product' + data.product);
                            $.each(data.product, function(index) {
                                     alert(data.product[index].productTitle);

                                 });

                         }, 
```

这里`alert('data.product' + data.product);` 给了我产品节点下的整个 JSON 的警报。

`alert(data.product[index].productTitle);` -- 此警报显示为“未定义”。

我需要帮助来解析它的 JSON 并打印每个“ **productTitle** ”

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:06:11.320

`data.product`是字符串数组而不是对象或 JSON，您必须解析字符串才能获取数据。

您可以使用正则表达式将字符串转换为 JSON，然后使用 JSON.parse 或 $.parseJSON 将其转换为 js 对象，但它有点混乱，请参阅[http://jsfiddle.net/nQE6J](http://jsfiddle.net/nQE6J)

```
$.each(data.product, function(index) {
    alert(JSON.parse(data.product[index].replace(/=/g, ':').replace(/([a-z\.A-Z\$\/\d]+)/g, '"$1"')).productTitle);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:03:02.607

```
JSON.parse(data) 
```

应该做的伎俩。

编辑：我看到它甚至不是字符串中的 JSON。使用 Musa 的答案将其转换为 JSON，然后`JSON.parse(data)`按照我最初的建议使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:05:41.950

尝试这个

```
 var jdata = JSON.parse(data);
   $.each(jdata.product, function(index, productdetail) {
         alert(productdetail.productTitle);
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:09:00.453

你给的json是

```
{
"product":[
"{productTitle=ABCD , productImage=/abcd.jpg, productPath=CDEF.html, productPrice=$299}",
"{productTitle=EFGH, productImage=xxxx.jpg, productPath=ggfft.html, productPrice=$299}"
]
} 
```

但是，您必须将上面更改为

```
{
"product":[
    {"productTitle":"ABCD"  , 
     "productImage":"/abcd.jpg", 
     "productPath":"CDEF.html", "productPrice":"$299"},
    ....
]
} 
```

`data.product[0].productTitle`“ABCD”也是如此

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:20:18.283

添加

```
contentType : "application/json" 
```

对您的请求（以及在响应标头中，这应该由您的网络服务器自动完成）。jQuery 然后自动将 Repsonse 解释为 JSON 对象并对其进行解析。

# php - 使用php将类别和子类别显示为两列

> ID：12001198
> 
> 赞同：-2
> 
> 时间：2012-08-17T07:01:38.347
> 
> 标签：php, javascript, html

> **可能重复：**
> [使用 php 将类别和子类别显示为两列](https://stackoverflow.com/questions/11999761/displaying-category-and-subcategory-into-two-column-using-php)

如何使用 php.ini 以这种格式显示类别和子类别。

```
 categories  subcategories
    ----------  -------------
    php         php4
    java        java4
    java        java5 
```

我的桌子是

```
cattitle  subcattitle
--------  -------------
acer       
            php
            java
compaq      java4
dell        
            laptop1
            laptop2 
```

“acer”是一个主类，“php”和“java”是它的子类，依此类推。我想使用 php 显示这种类型的结构。它也来自一张桌子。表名是`categories`，字段是`id`、`parentid`和`cattitle`。

我试过这个代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:13:12.963

这是一种方法。它要求主要类别有`parent_id`= 0 ...

```
SELECT sc.`cattitle` as `subcat`,
    (SELECT c.`cattitle`
    FROM `categories` as c
    WHERE c.`id` = sc.`parent_id`) as `cat`
FROM `categories` as sc
WHERE sc.`parent_id` != 0 
```

...这是另一种变化...

```
SELECT sc.`cattitle` as `subcat`,
    c.`cattitle` as `cat`
FROM `categories` as sc
LEFT JOIN `categories` as c
    ON (c.`id` = sc.`parent_id`)
WHERE sc.`parent_id` != 0 
```

如果您的表格结构如下，这将起作用：

```
id cattitle   parent_id
1  java       0
2  java4      1
3  java5      1
4  php        0
5  php5.3     4
6  php4.3     4 
```

# spring-mvc - 使用速度发送电子邮件内容时出错

> ID：12001201
> 
> 赞同：2
> 
> 时间：2012-08-17T07:02:25.797
> 
> 标签：spring-mvc, velocity

我正在使用 spring mvc 以速度 1.7 jar 发送电子邮件内容。这是我的bean配置。

```
`<bean id="velocityEngine" 
class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
    <property name="velocityProperties">
         <value>
          resource.loader=class
          class.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
         </value>
    </property>
</bean>
<bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
 <property name="resourceLoaderPath" value="/WEB-INF/classes/velocity/"/>
 </bean>

 <bean id="viewResolver"  class="org.springframework.web.servlet.view.velocity.VelocityViewResolver">
 <property name="cache" value="true"/>
 <property name="prefix" value=""/>
 <property name="suffix" value=".vm"/>
 </bean> 
```

我的 serviceImpl 如下：`public class SendEmailContentImpl implements SendEmailContentService{

```
private JavaMailSenderImpl mailSender;
private VelocityEngine velocityEngine;
 // private VelocityEngine velocityEngine = new VelocityEngine();

   @Override
   public void sendConfirmationEmail(final User user) {     
       try{
     MimeMessagePreparator preparator = new MimeMessagePreparator() {

         public void prepare(MimeMessage mimeMessage) throws Exception {

                System.out.println("In Service impl");
                MimeMessageHelper message = new MimeMessageHelper(mimeMessage);
                message.setTo("To address");
                message.setFrom("fromm address"); // could be parameterized...
                message.setSubject("Notification");

                Map model = new HashMap();
                model.put("user", user);

                String text=VelocityEngineUtils.mergeTemplateIntoString(velocityEngine,"sendEmailTemplate.vm", model);
                System.out.println("TEXT=="+text);
                message.setText(text, true);
                        }
                    };    

      mailSender=new org.springframework.mail.javamail.JavaMailSenderImpl();
      mailSender.setHost("smtp.gmail.com");

      Properties javaMailProperties=new Properties();
      javaMailProperties.setProperty("mail.smtp.starttls.enable", "true");

      mailSender.setJavaMailProperties(javaMailProperties);
      mailSender.setUsername("mygmailAddress");
      mailSender.setPassword("*******");

      System.out.println(mailSender);
     this.mailSender.send(preparator);
     System.out.println("Email Sent-Impl");
         }catch(MailException e)
         {
      e.printStackTrace();
         }
         } 
```

` 我将 .vm 文件放置为 /WEB-INF/classes/velocity/sendEmailContent.vm。

我总是收到这个错误，说找不到资源。我在这里打印整个 stackTrace

```
org.springframework.mail.MailPreparationException: Could not prepare mail; nested exception is org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'WEB-INF/classes/velocity/sendEmailTemplate.vm'
at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:367)
at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:344)
at info.aikya.service.sendEmailContent.SendEmailContentImpl.sendConfirmationEmail(SendEmailContentImpl.java:87)
at info.aikya.controller.SendEmailContentController.handleRequest(SendEmailContentController.java:48)
at info.aikya.controller.SendEmailContentController$$FastClassByCGLIB$$a0827eb0.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
at info.aikya.controller.SendEmailContentController$$EnhancerByCGLIB$$542fadd4.handleRequest(<generated>)
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:679)Caused by: org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'WEB-INF/classes/velocity/sendEmailTemplate.vm'
at org.apache.velocity.runtime.resource.ResourceManagerImpl.loadResource(ResourceManagerImpl.java:474)
at org.apache.velocity.runtime.resource.ResourceManagerImpl.getResource(ResourceManagerImpl.java:352)
at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1533)
at org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1514)
at org.apache.velocity.app.VelocityEngine.getTemplate(VelocityEngine.java:373)
at info.aikya.service.sendEmailContent.SendEmailContentImpl$1.prepare(SendEmailContentImpl.java:55)
at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:352)
... 32 more 
```

请帮我看看我应该把我的 .vm 文件放在哪里？

# sql-server-2008 - 选择没有空值的行

> ID：12001211
> 
> 赞同：1
> 
> 时间：2012-08-17T07:03:06.867
> 
> 标签：sql-server-2008, select

在 sql 数据库中，我需要一个脚本来选择所有没有空值的行，如下所示：

```
For all the rows in the database
     if row has no null values
         select it 
```

列是动态的，我不知道它们的编号或名称

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:27:41.870

这与这个问题的相反[Test if any fields are NULL](https://dba.stackexchange.com/questions/14864/test-if-any-fields-are-null/14870#14870)。

[Martin Smith](https://dba.stackexchange.com/users/3690/martin-smith)修改为查找没有空值的行的答案如下所示。

```
;with xmlnamespaces('http://www.w3.org/2001/XMLSchema-instance' as ns)
select *
from YourTable as T
where
  (
    select T.*
    for xml path('row'), elements xsinil, type 
  ).exist('//*/@ns:nil') = 0 
```

[Aaron Bertrand](https://dba.stackexchange.com/users/1186/aaron-bertrand)修改后提供的答案是……

```
DECLARE @tb NVARCHAR(255) = N'YourTable';

DECLARE @sql NVARCHAR(MAX) = N'SELECT * FROM ' + @tb
    + ' WHERE 1 = 1';

SELECT @sql += N' AND ' + QUOTENAME(name) + ' IS NOT NULL'
    FROM sys.columns 
    WHERE [object_id] = OBJECT_ID(@tb);

EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T07:20:51.437

方法：

*   从 sys.columns 获取表的列名
*   使用多个 WHERE 条件 ANDed 进行选择：WHERE ColA IS NOT NULL AND ColB IS NOT NULL 等等...

# constants - 如何将 Pascal Inno Setup ExpandConstant 与字符串变量一起使用？

> ID：12001213
> 
> 赞同：4
> 
> 时间：2012-08-17T07:03:16.740
> 
> 标签：constants, inno-setup, pascalscript

对于安装程序，我需要创建文件夹链接。

为此，我使用“[Dirs]”部分创建目标文件夹。没问题。

然后，在“[代码]”部分，使用函数“CurStepChanged(ssPostInstall)”，我读取了一个临时安装文件，以获取要创建的文件夹链接列表。文件的每一行都包含一个目标文件夹路径名和一个链接路径名... 使用 Inno Setup 常量。每个值都被读取并存储为“字符串”变量。

当我将这些字符串变量传递给“ExpandConstant(lLinkTarg)”时，任何常量名称都会出现内部运行时错误。

如果我将字符串内容复制粘贴到 'ExpandConstant('{#gRepNasSvg}\UT{code:getProjetc}\Docs')' 调用，那么它可以工作......

关于我做错了什么的任何提示？

提前致谢。L.

```
procedure CurStepChanged(CurStep: TSetupStep);
var
    lFileName: String;
    lLinkList: TArrayOfString;
    lIndex: Integer;
    lLinkLine: String;
    lLinkName: String;
    lLinkTarg: String;
    lSepPos: Integer;

begin
    // Après l'étape d'installation...
    if CurStep = ssPostInstall then
        begin
            // Si le fichier listant les liens à créer existe...
            lFileName := ExpandConstant('{tmp}') + '\' + ExpandConstant('{#gFicListeLiens}');
            if FileExists(lFileName) then
                begin
                    // Lecture du contenu du fichier.
                    LoadStringsFromFile(lFileName, lLinkList);

                    // Pour chaque ligne lue...
                    for lIndex := 0 to GetArrayLength(lLinkList) - 1 do
                    begin
                        // Lecture de la ligne.
                        lLinkLine := Trim(lLinkList[lIndex]);

                        // Si ce n'est pas un commentaire...
                        if (Length(lLinkLine) > 0) and (lLinkLine[1] <> ';') then
                            begin
                                // Recherche du séparateur.
                                lSepPos := Pos('>', lLinkLine);
                                if lSepPos > 0 then
                                    begin
                                        // Get target location.
                                        lLinkTarg := Trim(Copy(lLinkLine, 1, lSepPos - 1));
MsgBox(lLinkTarg, mbInformation, MB_OK);

                                        // NEXT LINE FAILS !
                                        lLinkTarg := ExpandConstant(lLinkTarg) ;
MsgBox(lLinkTarg, mbInformation, MB_OK);

                                        // Get link location.
                                        lLinkName := Trim(Copy(lLinkLine, lSepPos + 1, Length(lLinkLine) - lSepPos));
MsgBox(lLinkName, mbInformation, MB_OK);

                                    end
                            end
                    end
                end
        end
end; 
```

有些东西我已经忘记了。

链接描述变量的格式为 '{#gRepNasSvg}\UT{code:getProjetc}\Docs'...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T02:29:20.353

`ExpandConstant('{tmp}\{#gFicListeLiens}');`

（您应该始终在对 ExpandConstant 的调用中至少包含`\`以下目录常量，并且在其中包含其他文本没有害处，只要它不包含任何特殊字符。）

但是，您要读取的文件的内容是什么？

请注意，ExpandConstant 不会（也不能）扩展`{#var}`样式常量，它们在编译时由预处理器扩展，并且不能在运行时扩展。尝试`{code:...}`从 [Code] 函数中扩展常量通常也是不好的风格。

首先使用文件的原因是什么？它是在安装过程中由某些东西生成的吗？如果不是（或者即使是这样，并且您可以在脚本中而不是外部的东西中进行生成），您应该只在代码中使用一个数组。

# python - 计时 Python 代码

> ID：12001221
> 
> 赞同：0
> 
> 时间：2012-08-17T07:03:49.263
> 
> 标签：python, multiprocessing

我在下面写了一段代码来了解多处理（MP）及其与非 MP 版本相比可能的速度增益。这两个功能几乎相同，除了突出显示的地方（对不起，不知道突出代码区域的更好方法）。

该代码尝试识别数组列表（此处为一维）中冗余条目的索引。这两个函数返回的 id-lists 是相同的，但我的问题是关于时差。

正如你所看到的，在这两种情况下，我都尝试对 a)map 函数、b)list 扩展和 c)整个 while 循环进行计时。`map`MP 在该地区提供更好的加速，但`redun_ids.extend(...)`与非 MP 版本相比速度较慢。这实际上迫使 MP 版本的整体速度增益下降。

有什么办法可以重写 MP 版本的`redun_ids.extend(...)`部分以使时间与非 MP 版本相同？

```
#!/usr/bin/python
import multiprocessing as mproc
import sys
import numpy as np
import random
import time

def matdist(mats):
        mat1 = mats[0]
        mat2 = mats[1]
        return np.allclose(mat1, mat2, rtol=1e-08, atol=1e-12)

def mp_remove_redundancy(larrays):
        """
        remove_redundancy : identify arrays that are redundant in the
        input list of arrays
        """
        llen = len(larrays)
        redun_ids = list()
        templist = list()
        i = 0
        **pool = mproc.Pool(processes=10)**
        st1=time.time()
        while 1:
                currarray = larrays[i]
                if i not in redun_ids:
                        templist.append(currarray)
                        #replication to create list of arrays
                        templist = templist*(llen-i-1)
                        **chunksize = len(templist)/10
                        if chunksize == 0:
                                chunksize = 1**
                        #clslist is a result object here
                        st=time.time()
                        **clslist = pool.map_async(matdist, zip(larrays[i+1:],
                                templist), chunksize)**
                        print 'map time:', time.time()-st
                        **outlist = clslist.get()[:]**
                        #j+1+i gives the actual id num w.r.t to whole list
                        st=time.time()
                        redun_ids.extend([j+1+i for j, x in
                                enumerate(outlist) if x])
                        print 'Redun ids extend time:', time.time()-st
                i = i + 1
                del templist[:]
                del outlist[:]
                if i == (llen - 1):
                        break
        print 'Time elapsed in MP:', time.time()-st1
        pool.close()
        pool.join()
        del clslist
        del templist
        return redun_ids[:]
#######################################################
def remove_redundancy(larrays):
        llen = len(larrays)
        redun_ids = list()
        clslist = list()
        templist = list()
        i = 0
        st1=time.time()
        while 1:
                currarray = larrays[i]
                if i not in redun_ids:
                        templist.append(currarray)
                        templist = templist*(llen-i-1)
                        st = time.time()
                        clslist = map(matdist, zip(larrays[i+1:],
                                templist))
                        print 'map time:', time.time()-st
                        #j+1+i gives the actual id num w.r.t to whole list
                        st=time.time()
                        redun_ids.extend([j+1+i for j, x in
                                enumerate(clslist) if x])
                        print 'Redun ids extend time:', time.time()-st
                i = i + 1
                #clear temp vars
                del clslist[:]
                del templist[:]
                if i == (llen - 1):
                        break
        print 'Tot non MP time:', time.time()-st1
        del clslist
        del templist
        return redun_ids[:]
###################################################################

if __name__=='__main__':
        if len(sys.argv) != 2:
                sys.exit('# entries')
        llen = int(sys.argv[1])
        #generate random numbers between 1 and 10
        mylist=[np.array([round(random.random()*9+1)]) for i in range(llen)]
        print 'The input list'
        print 'no MP'
        rrlist = remove_redundancy(mylist)
        print 'MP'
        rrmplist = mp_remove_redundancy(mylist)
        print 'Two lists match : {0}'.format(rrlist==rrmplist) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:57:32.470

我认为在 MP 场景中的“扇入”区域中获得更差的性能是很正常的，因为我不认为`multiprocessing`共享内存会产生通信成本。

在“扇出”阶段（即调用`map_async`），父进程需要序列化 ​​numpy 数组并将它们发送到子进程（我认为是通过 Unix 域管道），子进程必须在开始使用它们之前反序列化它们.

反之亦然，在“扇入”阶段，子级序列化和发送，而父级接收和反序列化，然后才能调用`extend`将它们放在一起。

我不完全确定的是为什么您检测到调用`extend`自身花费的时间更长，而我真的希望瓶颈出现在调用`get()`. 但是，同样，我没有足够的信息来深入挖掘。例如：是否`get()`返回反序列化的 numpy 数组，或者只是一个在调用期间延迟计算的代理`extend`？

然后，再一次，我们在谈论什么时间？如果我们谈论的是几毫秒，您应该知道，`time.time()`如果来自 C/C++ 世界，Python 并不像您期望的那样准确。在那个时间范围内，在 Python 世界中，解释器方面发生的事情太多了，很难从这么小的数字中做出明确的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:43:49.720

`clslist = pool.map_async(...)`非常快，因为它只发送请求。如果要对整个 map 操作进行计时，请 include `clslist.get()`，它会等待结果。

# jquery - 如何以编程方式检查此 iphone 样式复选框？

> ID：12001229
> 
> 赞同：1
> 
> 时间：2012-08-17T07:04:36.610
> 
> 标签：jquery, html, checkbox

我正在使用[这个](http://awardwinningfjords.com/2009/06/16/iphone-style-checkboxes.html)iphone 风格的复选框。默认情况下选中所有复选框。如果未选中，则会显示一个模式，其中包含一个表单和所有内容。当我关闭此模式时，我希望再次启用该复选框。

这是当复选框更改为 false 时显示模式的 JS：

```
$(window).load(function() {
  var onchange_checkbox = $('.on_off :checkbox').iphoneStyle({
    checkedLabel: 'Confirm',
    uncheckedLabel: 'Edit',
    onChange: function(elem, value) {
        if($(elem)[0].checked==false){
            $('.modal').show();
            $("body").append('<div class="modalOverlay">');
        }
    }
  });
}); 
```

这是复选框表：

```
%{for(int i=0;i<confirmAtt.size ();i=i+9){}%
<tr>
<td>${confirmAtt.get(i)}</td>
<td>${confirmAtt.get(i+1)}</td>
<td>${confirmAtt.get(i+2)}</td>
<td>${confirmAtt.get(i+3)}</td>
<td>${confirmAtt.get(i+4)}</td>
<td>${confirmAtt.get(i+5)}</td>
<td>${confirmAtt.get(i+6)}</td>
<td>${confirmAtt.get(i+7)}</td>
<td>${confirmAtt.get(i+8)}</td>
<td class="modalInput on_off"><input type="checkbox" id="on_off_${i}"
    checked="checked" /></td>
</tr>
%{}}% 
```

带有关闭按钮的模式：

```
 <div class="modal" id="aModal">
        <p>
            <button class="close" onclick="foo();">Close</button>
        </p>
    </div> 
```

调用此函数：

```
function foo(){
    $('.modal').hide();
    $('.modalOverlay').remove();
    onchange_checkbox.prop('checked', !onchange_checkbox.is(':checked')).iphoneStyle("refresh");
    //tried changing this line to
    //$('.on_off').attr("checked" , true);
    //doesn't work
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:21:45.233

如果您只想将复选框设置回选中状态，可以使用以下代码：

```
$(window).load(function() {

      var onchange_checkbox = ($('.on_off :checkbox')).iphoneStyle();

      onchange_checkbox.prop('checked', !onchange_checkbox.is(':checked'))
      .iphoneStyle("refresh");

}); 
```

[http://jsbin.com/urocug/1/](http://jsbin.com/urocug/1/)

**更新**

抱歉，我现在看到您尝试在代码中实现此功能。问题是您在`$(window).load(function() {`尝试访问范围之外的相同变量时将复选框声明为变量`$(window).load(function() {`

* * *

理想情况下，您需要做的是将您的`foo(){}`功能移动到您的`$(window).load(function() {`：

# jquery - hasClass() 在 setInterval 中没有评估 true

> ID：12001231
> 
> 赞同：0
> 
> 时间：2012-08-17T07:04:44.680
> 
> 标签：jquery, facebook, setinterval

好的，这是我的问题：我试图通过检查是否点击了 Facebook 的赞按钮来触发重定向。如果它被点击了，那么我可以继续检查某个 div 是否有某个类。如果它在任何时候评估为真，它将触发重定向。但它没有这样做。

我使用 setInterval 的原因是它必须在页面加载时检查它，并且不断地检查，以防他们已经喜欢它。

这是HTML：

```
<div class="pluginConnectButton">

<div title="" class="pluginButton pluginButtonSmall pluginConnectButtonDisconnected hidden_elem">
    <div>
    <button type="submit">
    <i class="pluginButtonIcon img sp_like sx_like_fav"></i>Like
    </button>
    </div>
</div>

<div title="" class="pluginButton pluginButtonSmall pluginButtonPressed pluginButtonX pluginConnectButtonConnected">

<div>
<button type="submit">
<i class="pluginButtonIcon pluginButtonXOff img sp_like sx_like_ch"></i>
<i title="" class="pluginButtonIcon pluginButtonXOn img sp_like sx_like_x"></i>
</button>Like
</div>

</div>
</div> 
```

这是 JS/jQuery：

```
setInterval(

function(){
if ($('div.pluginConnectButton div').eq(0).hasClass('hidden_elem')) {

    window.open('http://thebasinhaircutters.com.au/competitions/abd/m/next.php', '_parent');

}}

,1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:11:21.830

它基于此测试有效吗？

```
var interval = null;
$(function() {
    interval = setInterval(function() {
    if($('input').hasClass('clicked')) {
        clearInterval(interval);
        alert('I\'ve been clicked!');​​
    } else {
        console.log('I\'ve not been clicked');
    }
    }, 1000);
    $('input').click(function() {
    $(this).addClass('clicked');
    });
});
​ 
```

示例：http: [//jsfiddle.net/gRoberts/8ZXba/](http://jsfiddle.net/gRoberts/8ZXba/)

密切关注控制台以查看它通过每个间隔，然后单击按钮，将显示警报。

# android - 如何在android的textView上的下一行中打印数组元素

> ID：12001233
> 
> 赞同：0
> 
> 时间：2012-08-17T07:04:48.210
> 
> 标签：android

大家好，我有一个二维数组。我在文本视图上打印这个数组的元素。但是我的所有元素都排成一行。我想要元素之间的换行符。我的代码如下，我的二维数组是：

```
table[][]={{1,2,3,4,5,6,7,8},{8,7,6,5,4,3,2,1}}

for(i=0;i<8;i++)
for(j=0;j<2;j++)
{
text = new TextView(this);
text.setText(""+table[j][i]);
} 
```

我得到这样的输出：

```
{1,8,2,7,3,6,4,5,5,4,6,3,7,2,8,1} 
```

但我想要这样的输出：

```
1,8
2,7
3,6
4,5
5,4
6,3
7,2
8,1 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:08:20.323

您需要添加**转义序列 \n**。

试试这个，

```
table[][]={{1,2,3,4,5,6,7,8},{8,7,6,5,4,3,2,1}}

text = new TextView(this);
StringBuffer sb = new StringBuffer();

for(i=0;i<8;i++)
for(j=0;j<2;j++)
{
    sb.append ( "" + table[j][i] + "\n" );
}

text.setText( sb.toString() ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:10:14.367

这将在每两个数字后添加新行。

```
table[][]={{1,2,3,4,5,6,7,8},{8,7,6,5,4,3,2,1}}
String str="";
for(i=0;i<8;i++)
{
  for(j=0;j<2;j++)
  {  
    str=str+table[j][i];
  }
  str=str+"\n";
}
text = new TextView(this);
text.setText(Html.fromHtml(str)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:07:15.087

尝试：

```
text = new TextView(this);

for loop {
        text.append(""+table[j][i] + "\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:08:17.737

我建议不要在循环中创建 TextView 。只需使用相同的视图：

```
table[][]={{1,2,3,4,5,6,7,8},{8,7,6,5,4,3,2,1}}
text = new TextView(this);

for(i=0;i<8;i++) {
    for(j=0;j<2;j++) {
        text.append(""+table[j][i] + "\n");
    }
} 
```

# iphone - 视图中的 TapGestureRecognizer 使视图中的按钮禁用

> ID：12001235
> 
> 赞同：0
> 
> 时间：2012-08-17T07:04:56.507
> 
> 标签：iphone, ios, ios5

我有一个 uivew 作为 rootView。视图中有一个按钮和一个文本字段。

当文本字段处于编辑模式时，会出现键盘。

要关闭键盘，我在整个视图中添加了一个 uiTapGestureRecognizer。这样当触摸屏幕时，键盘就会消失。

但是视图中的按钮也会得到这个手势识别器。键盘显示时，触摸按钮可以使其高亮，但不能触发该按钮的动作。

当键盘显示在视图中时，有什么方法可以使按钮动作起作用？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:09:43.377

**.h 文件中的**UIGestureRecognizerDelegate****

 **米

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

       if (touch.view == yourbutton )
    {
        return NO;
    }
    return YES;
} 
```**

# sql - SQL Server 2008 中没有临时表的 SQL 查询

> ID：12001239
> 
> 赞同：0
> 
> 时间：2012-08-17T07:05:13.223
> 
> 标签：sql, sql-server-2008

我有以下 2 个表我需要在没有临时表的情况下获得输出

```
WorkItem

ItemID  ItemName Status
1      xyz       3
2      abc       3
3      MNO       2

WorkItemTrack

TrackID  ItemID  Status
1       1        1
2       1        2
3       1        3
4       2        1
5       2        2
6       3        1
7       3        2 
```

这是我的查询

```
select ItemName, WorkItem.Status from WorkItem Inner join WorkItemTrack ON WorkItem.ItemID=WorkItemTrack.ItemID
where WorkItemTrack.Status=2 
```

&这是我的输出

```
 ItemName Status
  XYZ       3
  ABC       3
  MNO       2 
```

但我只需要状态为 2 的 MNO 的输出

IE

```
 ItemName Status 
  MNO       2 
```

如何不使用临时表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:08:16.987

这同样有效

```
Select x.ItemName,x.Status
From (Select * from WorkItem where Status = 2) x
Join (Select ItemID from WorkItemTrack where Status = 2) y
on x.ItemID=y.ItemID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:14:42.317

使用另一种`join`选择

```
select a.ItemName, a.Status from WorkItem a Inner join worktrack b ON a.ItemID=b.ItemID and a.status=b.status where b.Status=2 
```

或者

否则不同

```
select  distinct ItemName, WorkItem.Status from WorkItem inner join worktrack ON WorkItem.ItemID=worktrack.ItemID where workitem.Status=2 
```

或者

否则行号

```
select  top 1 * from (select row_number() over (partition by workitem.status order by workitem.status ) as rownum , 
ItemName, WorkItem.Status from WorkItem inner join worktrack ON WorkItem.ItemID=worktrack.ItemID
where worktrack.status=2) a 
where a.rownum=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:06:35.743

```
select i.ItemName, i.Status
from WorkItem i
inner join WorkItemTrack t ON i.ItemID = t.ItemID
where t.Status = 2
AND i.Status = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:09:07.053

你可以做

```
select ItemName, WorkItem.Status from WorkItem 
Inner join WorkItemTrack ON WorkItem.ItemID=WorkItemTrack.ItemID 
where WorkItemTrack.Status=2 and WorkItem.Status=2 
```

或者

```
select * from 
  (select ItemName, WorkItem.Status as status from WorkItem 
   Inner join WorkItemTrack ON WorkItem.ItemID=WorkItemTrack.ItemID 
    where WorkItemTrack.Status=2) 
where status=2 
```

（如果您以后需要变得更复杂，并想用初始结果做其他事情）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:12:56.603

您的问题模棱两可，但这可能是您想要的：

```
SELECT ItemName, wi.Status
FROM WorkItem AS wi
JOIN WorkItemTrack AS wit ON (wi.ItemID=wit.ItemID) AND (wi.Status=wit.Status)
WHERE wit.Status=2 
```

或者可能

```
SELECT ItemName, wi.Status
FROM WorkItem AS wi
JOIN WorkItemTrack AS wit ON (wi.ItemID=wit.ItemID) AND (wit.Status=2)
WHERE wi.Status=2 
```

# c# - 当值超过 255 个字符时，从 vb.net 创建时 Excel 中的下拉值限制会引发错误

> ID：12001248
> 
> 赞同：1
> 
> 时间：2012-08-17T07:05:52.410
> 
> 标签：c#, asp.net, vb.net, excel, spreadsheetgear

我正在使用 VB.Net 和 SpreadsheetGear dll 动态创建下拉列表，并使用如下值填充它

worksheet.Range(Range).Validation.Add(ValidationType.List, ValidationAlertStyle.Stop,
ValidationOperator.Between, flatList, "") 我正在使用 validation.add 创建下拉列表

这里 flatList 是逗号分隔的字符串下拉值。

使用少于 255 个字符的平面列表字符可以正常工作，但如果大于 255，它会抛出错误消息

```
 **Data Validation lists are limited to 255 characters.** 
```

请帮助 Ramesh.T.

# shopify - Shopify API：通过第 3 方收费流程销售商品

> ID：12001249
> 
> 赞同：1
> 
> 时间：2012-08-17T07:06:02.917
> 
> 标签：shopify

我正在为 Shopify 构建一个拍卖应用程序。它的工作方式是使用像 Stripe 这样的支付网关来捕获投标的支付细节，然后在拍卖结束时执行中标，取消剩余的投标。然后它会通过 API 通知 Shopify 商店产品变体已售出。

由于使用传统支付网关（不使用支付令牌化系统）无法实现延迟的捕获授权工作流程，因此该应用程序需要商家在应用程序（而不是 Shopify）中输入他们的 Stripe 凭据。然后，该应用程序会自行为中标创建收费，而不是通过 Shopify 的收费流程。

我的问题是，是否可以标记通过 Shopify API 销售的产品变体，而无需创建 Shopify 费用，或者通过创建虚拟费用（因为现在应用程序不是 Shopify 向客户收费）而不更改商家的订单处理工作流程。

我知道这是一个复杂的问题。任何见解将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:30:17.187

您目前无法使用 API 创建订单。没有“将变体标记为已售”之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T10:26:25.990

Shopify 现在允许您使用 API[创建订单。](http://docs.shopify.com/api/order#create)一个简单的例子是：

发布到 /admin/orders.json

```
{
  "order": {
    "line_items": [
      {
        "variant_id": 447654529,
        "quantity": 1
      }
    ]
  }
} 
```

回复：

```
HTTP/1.1 201 Created

{
"order": {
"buyer_accepts_marketing": false,
"cancel_reason": null,
"cancelled_at": null,
"cart_token": null,
"checkout_token": null,
"closed_at": null,
"confirmed": true,
"created_at": "2014-05-23T14:17:59-04:00",
"currency": "USD",
"email": "",
"financial_status": "paid",
"fulfillment_status": null,
"gateway": "",
"id": 1073460004,
"landing_site": null,
"location_id": null,
"name": "#1002",
"note": null,
"number": 2,
"reference": null,
"referring_site": null,
"source": "api",
"source_identifier": null,
"source_name": "api",
"source_url": null,
"subtotal_price": "199.00",
"taxes_included": false,
"test": false,
"token": "c9afa7b7ecb0cc1a3e60652658c4c76c",
"total_discounts": "0.00",
"total_line_items_price": "199.00",
"total_price": "199.00",
"total_price_usd": "199.00",
"total_tax": "0.00",
"total_weight": 0,
"updated_at": "2014-05-23T14:17:59-04:00",
"user_id": null,
"browser_ip": null,
"landing_site_ref": null,
"order_number": 1002,
"discount_codes": [

],
"note_attributes": [

],
"processing_method": "",
"checkout_id": null,
"tax_lines": [

],
"tags": "",
"line_items": [
  {
    "fulfillment_service": "manual",
    "fulfillment_status": null,
    "gift_card": false,
    "grams": 0,
    "id": 1071823214,
    "price": "199.00",
    "product_id": 921728736,
    "quantity": 1,
    "requires_shipping": true,
    "sku": null,
    "taxable": true,
    "title": "IPod Touch 8GB",
    "variant_id": 447654529,
    "variant_title": null,
    "vendor": null,
    "name": "IPod Touch 8GB",
    "variant_inventory_management": "shopify",
    "properties": [

    ],
    "product_exists": true,
    "fulfillable_quantity": 1,
    "tax_lines": [

    ]
  }
],
"shipping_lines": [

],
"fulfillments": [

],
"refunds": [

]
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T17:59:25.690

如果通过 Shopify 跟踪订单不是什么大问题，只需通过 Shopify API 调整变体库存/产品可用性，这绝对是可行的。

# jquery - 如何使用jquery在最后添加LI

> ID：12001250
> 
> 赞同：0
> 
> 时间：2012-08-17T07:06:08.070
> 
> 标签：jquery, html

我有一个要求，如果用户点击一个按钮，那么`li`应该附加在最后一个`ul`并且它的数量应该增加。

```
<head>
    <style>

    .bill ul{ list-style:none}
    .bill ul li{ float:left; width:94px; margin-right:18px}
    .bill ul li:last-child { margin-right:0}
    .bill + ul { border:solid 1px #FF0000}

    </style>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript">

        $(function () {

            $('.bill').find('a').click(function () {

                var jammu = $('.bill').find('li').length;
            }
        )
        })
    </script>
</head>
<body>
    <div class="bill">
        <ul>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
        </ul>
        <a href="#">Click to increase</a>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:12:32.033

这是基于您的代码的解决方案：

```
var jammu=$('.bill').find('li').length + 1;
$("<li />")
    .html(jammu++)
    .appendTo($('.bill').find('ul')); 
```

[JSF](http://jsfiddle.net/AmmQg/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:09:51.637

你可以这样做。

```
 $('.bill').find('a').click(function (){
      var jammu=$('.bill').find('li').length;
      $('.bill').find('ul').append('<li>' + (jammu+1) + '</li>') ;
     }); 
```

[现场演示](http://jsfiddle.net/frDzf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:13:53.197

尝试这个

```
$('div.bill a').click(function() {
    var li_number = $('.bill ul li ').length;
    $('div.bill ul').append('<li>'+(li_number+1)+'</li>');  
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:14:35.673

其他：

```
var n = $('.bill ul li').length;

$('.bill a').click(function(){

    n++;
    $('<li />').html(n).appendTo('.bill');

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:15:21.420

应该是这样的：

```
var $bill = $('.bill');
$('a', $bill).click(function (){
    var number = $('li:last', $bill).text();
    number = +number + 1;
    $('ul', $bill).append('<li>' + number + '</li>');
}); 
```

# iphone - 如何定义我在 iPhone 中使用 UIView 绘制的不同项目或对象？

> ID：12001255
> 
> 赞同：-2
> 
> 时间：2012-08-17T07:06:24.630
> 
> 标签：iphone, ios

我在 UIView 中绘制了更多项目，例如 iPhone 的图标。我想增加单击时使用相同方法的每个项目的数量。问题是，当我单击一项（2 次）时，数量增加了。在我单击另一个项目后，数量不是从 0 开始计算的，而是从第一个项目开始计算的值。这意味着我点击了第二个项目 2 次，所以数量是 4 而不是 0。我们如何定义不同的对象但使用相同的方法？这是我的代码：

```
-(void)showOrderedQuantityLabel:(ItemView *)itv{
int counts =1;
counts =counts+clickOn;
float x = itv.frame.origin.x + 17;
float y = itv.frame.origin.y - 10;
UIImageView *anImageView = [[UIImageView alloc] initWithFrame:CGRectMake(x, y, 30, 30)];
anImageView.image = [UIImage imageNamed:@"productNote.png"];

UILabel *increaseQty =[[UILabel alloc] initWithFrame:CGRectMake(5, 5, 20, 20)];
increaseQty.textColor=[UIColor whiteColor];
increaseQty.font=[UIFont systemFontOfSize:12];
increaseQty.backgroundColor=[UIColor clearColor];
increaseQty.textAlignment=UITextAlignmentCenter;
increaseQty.text=[NSString stringWithFormat:@"%i",counts];
clickOn++;
[anImageView addSubview:increaseQty];
[self.scrollView addSubview:anImageView];
[self performSelector:@selector(removeIndicatorView:) withObject:anImageView   afterDelay:0.4];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:35:37.687

最好使用 NSMutableArray 来跟踪`count`每个项目的。

# eclipse - 在eclipse中使用erlide导入Ejabberd代码

> ID：12001257
> 
> 赞同：2
> 
> 时间：2012-08-17T07:06:26.853
> 
> 标签：eclipse, import, erlang, ejabberd, erlide

试图了解 ejabberd 的工作原理。

我在导入源代码时遇到了一些问题。如果您能帮助解决问题，那将是非常有帮助的。

以下是问题：

我安装 eclipse Juno，从 eclipse 市场安装 erlide。按照[此处](http://erlide.org/)的说明设置已安装的运行时。

但是，当我使用文件菜单中的导入选项中的 erlang 项目导入 ejabberd 源代码时，出现以下错误：

发生了错误。有关详细信息，请参阅错误日志。java.lang.NullPointerException

在错误日志中，最后两行是：

12:15:01,556 F: (CodeManager.java:222) : 添加 D:/Eclipse_jee_juno/eclipse/plugins/org.erlide.kernel.common_0.15.0.201202052049/ebin 到 @21690087 的代码路径:: 后端 erl5.9.1 /956f3_guhanb_53e808_erlide (D:\Erlang_exe\erl5.9.1) R15B01 []

12:15:01,569 F: (ErlConsoleManager.java:39) : 控制台添加到后端 erl5.9.1/956f3_guhanb_53e808_erlide (D:\Erlang_exe\erl5.9.1) R15B01 []

这似乎不是一个错误。

-国标

**日志文件如下：**

```
!SESSION 2012-08-21 16:03:39.552 -----------------------------------------------
eclipse.buildId=I20120608-1400
java.version=1.6.0_33
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.jface 2 0 2012-08-21 16:03:44.036
!MESSAGE Keybinding conflicts occurred.  They may interfere with normal accelerator operation.
!SUBENTRY 1 org.eclipse.jface 2 0 2012-08-21 16:03:44.036
!MESSAGE A conflict occurred for ALT+CTRL+SHIFT+M:
Binding(ALT+CTRL+SHIFT+M,
    ParameterizedCommand(Command(org.eclipse.pde.ui.openManifest,Open Manifest,
        Open the plug-in manifest,
        Category(org.eclipse.ui.category.navigate,Navigate,null,true),
        org.eclipse.ui.internal.MakeHandlersGo@7a279c,
        ,,true),null),
    org.eclipse.ui.defaultAcceleratorConfiguration,
    org.eclipse.ui.contexts.window,,,system)
Binding(ALT+CTRL+SHIFT+M,
    ParameterizedCommand(Command(org.erlide.ui.open.module,Open Module,
        ,
        Category(org.eclipse.ui.category.navigate,Navigate,null,true),
        org.eclipse.ui.internal.MakeHandlersGo@1be91c8,
        [Lorg.eclipse.e4.ui.internal.workbench.Parameter;@551ee3,,true),null),
    org.eclipse.ui.defaultAcceleratorConfiguration,
    org.eclipse.ui.contexts.window,,,system)

!ENTRY org.erlide.core 1 0 2012-08-21 16:03:45.558
!MESSAGE Erlide log is in D:/W2

!ENTRY org.erlide.core 1 0 2012-08-21 16:03:45.584
!MESSAGE *** starting Erlide v0.15.0.201202052049 (core=0.15.0.201202052049) *** (Cp1252) 

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.658
!MESSAGE NLS unused message: Always in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.660
!MESSAGE NLS unused message: Never in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.662
!MESSAGE NLS unused message: Prompt in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.663
!MESSAGE NLS unused message: WizardTransferPage_selectTypes in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.665
!MESSAGE NLS unused message: WizardTransferPage_selectAll in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.667
!MESSAGE NLS unused message: WizardTransferPage_deselectAll in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.668
!MESSAGE NLS unused message: WizardImportPage_browseLabel in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.670
!MESSAGE NLS unused message: WizardImportPage_browse2 in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.672
!MESSAGE NLS unused message: WizardImportPage_selectFolderLabel in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.673
!MESSAGE NLS unused message: WizardImportPage_selectFolderTitle in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.675
!MESSAGE NLS unused message: WizardImportPage_destinationLabel in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.676
!MESSAGE NLS unused message: WizardImportPage_options in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.678
!MESSAGE NLS unused message: WizardImportPage_projectNotExist in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.679
!MESSAGE NLS unused message: WizardImportPage_noOpenProjects in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.681
!MESSAGE NLS unused message: WizardImportPage_undefinedPathVariable in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.683
!MESSAGE NLS unused message: WizardImportPage_containerNotExist in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.684
!MESSAGE NLS unused message: WizardExportPage_errorDialogTitle in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.686
!MESSAGE NLS unused message: WizardExportPage_mustExistMessage in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.687
!MESSAGE NLS unused message: WizardExportPage_mustBeAccessibleMessage in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.689
!MESSAGE NLS unused message: WizardExportPage_detailsMessage in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.691
!MESSAGE NLS unused message: WizardExportPage_whatLabel in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.693
!MESSAGE NLS unused message: WizardExportPage_whereLabel in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.694
!MESSAGE NLS unused message: WizardExportPage_selectionDialogMessage in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.696
!MESSAGE NLS unused message: WizardExportPage_resourceTypeDialog in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.697
!MESSAGE NLS unused message: WizardExportPage_folder in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.699
!MESSAGE NLS unused message: WizardExportPage_browse in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.700
!MESSAGE NLS unused message: WizardExportPage_allTypes in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.702
!MESSAGE NLS unused message: WizardExportPage_specificTypes in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.703
!MESSAGE NLS unused message: WizardExportPage_edit in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.705
!MESSAGE NLS unused message: WizardExportPage_details in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.706
!MESSAGE NLS unused message: WizardExportPage_selectResourcesTitle in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.708
!MESSAGE NLS unused message: WizardExportPage_oneResourceSelected in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.710
!MESSAGE NLS unused message: WizardExportPage_selectResourcesToExport in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.711
!MESSAGE NLS unused message: WizardExportPage_resourceCountMessage in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.713
!MESSAGE NLS missing message: DataTransfer_scanningChildren in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.osgi 2 1 2012-08-21 16:03:52.715
!MESSAGE NLS missing message: ZipExport_description in: org.erlide.ui.wizards.messages

!ENTRY org.eclipse.jface 4 2 2012-08-21 16:04:04.742
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.jface".
!STACK 0
java.lang.NullPointerException
    at org.eclipse.core.runtime.Path.<init>(Path.java:153)
    at org.erlide.ui.wizards.ErlangProjectImportWizard.setupDirectoriesPage(ErlangProjectImportWizard.java:92)
    at org.erlide.ui.wizards.ErlangProjectImportWizard$2.pageChanged(ErlangProjectImportWizard.java:218)
    at org.eclipse.jface.wizard.WizardDialog$9.run(WizardDialog.java:1553)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.wizard.WizardDialog.firePageChanged(WizardDialog.java:1551)
    at org.eclipse.jface.wizard.WizardDialog.update(WizardDialog.java:1336)
    at org.eclipse.jface.wizard.WizardDialog.updateForPage(WizardDialog.java:1264)
    at org.eclipse.jface.wizard.WizardDialog.access$4(WizardDialog.java:1238)
    at org.eclipse.jface.wizard.WizardDialog$8.run(WizardDialog.java:1227)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.jface.wizard.WizardDialog.showPage(WizardDialog.java:1225)
    at org.eclipse.jface.wizard.WizardDialog.nextPressed(WizardDialog.java:915)
    at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:428)
    at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.eclipse.ui.internal.handlers.WizardHandler$Import.executeHandler(WizardHandler.java:152)
    at org.eclipse.ui.internal.handlers.WizardHandler.execute(WizardHandler.java:279)
    at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
    at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:229)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:210)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:131)
    at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:171)
    at org.eclipse.ui.internal.handlers.LegacyHandlerService.executeCommand(LegacyHandlerService.java:492)
    at org.eclipse.ui.internal.actions.CommandAction.runWithEvent(CommandAction.java:157)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

# magento - Magento - 过滤时显示相关的产品选项图像

> ID：12001258
> 
> 赞同：2
> 
> 时间：2012-08-17T07:06:28.447
> 
> 标签：magento

我正在为服装、T 恤、衬衫、套头衫等使用可配置产品。

所有的颜色选项（这是相关的产品）。为了争论，我们说只有绿色。提供黑色和蓝色选项。显然，对于 magento，您只能使用 1 个在整个商店中使用的父图像来代表该产品。

现在，当使用分层导航按颜色过滤时，是否有可能将关联的子产品图像用作缩略图而不是父图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:43:31.397

是的，您需要加载产品，然后抓取图像并输出。

要通过 id 加载产品，请使用以下代码：

```
$product = Mage::getModel('catalog/product')->load($id); 
```

获取图像： $attributes = $prod->getTypeInstance(true)->getSetAttributes($prod);

```
$galleryData = $product->getData('media_gallery');

foreach ($galleryData['images'] as &$image) {
    var_dump($image);
} 
```

此代码将允许您选择要使用的图像

希望这有帮助

逾越节

# .htaccess - .htaccess URL 重定向

> ID：12001261
> 
> 赞同：1
> 
> 时间：2012-08-17T07:06:41.453
> 
> 标签：.htaccess, url-rewriting

这可能是一个简单的问题。但是我不擅长 .htaccess 重定向规则，所以我提出了一个问题。

我想要这样的重定向：

如果 url 像: `www.mydomain.com/image/12345`, `www.mydomain.com/image/12346`.

做一个重定向，比如： `www.mydomain.com/products/image/12345`, `www.mydomain.com/products/image/12346`. （`/products/`如果 url 以类似的方式结束，则为页面添加，`image/number`而不是`/products/`为自身添加。）

我已经做了一些重定向规则，比如：

`RewriteRule ^(products/image)/(\d+)/?$ products/image?photo=$2`

在`.htaccss`. 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:12:09.500

试试这个：

```
RewriteRule ^images/([0-9]+)/?$ /products/image/$1 [L,R=301] 
```

重定向`www.mydomain.com/image/12345`到`www.mydomain.com/products/image/12345`. 然后你的其他规则应该生效并在内部重写它。

# c++ - 数据序列化有什么作用？

> ID：12001262
> 
> 赞同：7
> 
> 时间：2012-08-17T07:06:41.887
> 
> 标签：c++, serialization

我很难理解序列化是什么以及做什么。

让我简化我的问题。我的 c/c++ 程序中有一个`struct info`，我可以将此`struct`数据存储到文件中`save.bin`或通过套接字将其发送到另一台计算机。

```
struct info {
    std::string name;
    int age;
};

void write_to_file()
{
    info a = {"Steve", 10};
    ofstream ofs("save.bin", ofstream::binary);
    ofs.write((char *) &a, sizeof(a));   // am I doing it right?
    ofs.close();
}

void write_to_sock()
{
    // I don't know about socket api, but I assume write **a** to socket is similar to file, isn't it?
} 
```

`write_to_file`将简单地将`struct info`对象保存`a`到磁盘，使这些数据持久化，对吗？将其写入套接字几乎相同，对吧？

在上面的代码中，我认为我没有使用**数据序列化**，但无论如何数据`a`都是持久的`save.bin`，对吧？

**问题**

1.  那么序列化的意义何在？我这里需要吗？如果是，我应该如何使用它？

2.  我一直认为任何类型的文件`.txt/.csv/.exe/...`，，，都是内存中的位`01`，这意味着它们自然具有二进制表示，所以我们不能简单地通过套接字直接发送这些文件吗？

代码示例受到高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:16:21.967

> 但是数据 a 无论如何都会在 save.bin 中持久化，对吗？

不！您的结构包含一个`std::string`. 确切的实现（以及您通过强制转换获得的二进制数据`char*`不是由标准定义的，但实际的字符串数据将始终在类框架之外的某个地方辞职，堆分配，因此您无法轻松保存该数据. 正确完成序列化后，字符串数据将写入类的其余部分也结束的位置，因此您将能够从文件中读取它。这就是您需要序列化的目的。

怎么做：你必须以某种方式对字符串进行编码，最简单的方法是先写它的长度，然后写字符串本身。在读回文件时，首先读回长度，然后将该字节数读入一个新的字符串对象。

> 我一直认为任何类型的文件，.txt/.csv/.exe/...，都是内存中的 01 位

是的，但问题是没有普遍定义哪个位代表数据结构的哪个部分。特别是，有[little-endian 和 big-endian 架构](http://en.wikipedia.org/wiki/Endianness)，它们以“相反的方式”存储位。如果你天真地读出一个用不匹配架构编写的文件，你显然会得到垃圾。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T07:25:09.963

仅仅写下内存中的二进制图像是一种序列化形式，对于琐碎的情况，它可以工作。但是，一般来说，您需要解决一些仅转储内存未考虑的问题：

## 1.指针

如果数据包含任何指针，当然你不能只是稍后转储负载，因为一旦程序终止并重新启动，指针指向的内存地址将毫无意义。许多对象都有“隐藏”指针...例如，无法将 an 转储`std::vector`到内存中并稍后正确重新加载... `sizeof`on`std::vector`显然不包括所包含元素的大小，因此任何包含 an 的结构`std::vector`都不能仅转储并重新加载。对于`std::string`所有其他`std`容器也是如此。

## 2\. 便携性

C 和 C++ 结构和类不是根据它们在内存中占用的字节来定义的，即不可移植。这意味着不同的编译器、不同的编译器版本甚至相同版本但具有不同编译选项的代码可能会生成内存中结构布局不同的代码。

如果您需要序列化以仅在同一程序中保存和重新加载数据并且该数据不应该存在很长时间，那么确实可以使用内存转储。但是，只需考虑通过转储结构保存数百万个文档，现在新的编译器版本（您**被迫**使用，因为它是新操作系统版本唯一支持的）具有不同的布局，您无法再加载这些文档.

除了相同系统的可移植性问题之外，还要注意即使是单个整数也可以在不同系统上具有不同的内存表示。它可能更大或更小；它可能有不同的字节顺序。仅使用内存转储意味着保存的内容不能被另一个系统加载。甚至没有一个整数。

## 3\. 版本控制

如果您保存的数据有很长的生命周期，那么您很可能会随着程序的发展而更改结构，例如您将添加新字段，您将删除未使用的字段，您将更改一般结构（例如更改向量到链表）。

如果您的格式只是当前数据结构的内存图像，那么以后很难将例如`color`字段添加到`polygon`对象并让程序可以加载旧文档，假设默认颜色值是使用的颜色以前的版本。

即使编写转换程序也会很困难，因为您将拥有能够加载旧文档的旧代码和能够保存新文档的新代码，但是您不能只是“合并”两者并获得一个加载旧代码并保存新文档的程序（即两者程序源代码将具有`polygon`结构但具有不同的字段，现在呢？）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T07:17:53.743

您的字符串将无法正确保存。如果您有不同的机器，它们对整数的表示可能会有所不同，例如，不同的编程语言不会对字符串有相同的表示。

但是当您有指向成员的指针时，您将保存指针地址而不是指向的成员，这意味着您无法再次从文件中获取该数据。如果你的结构需要改变怎么办？所有使用您数据的软件都需要更改。

是的，您可以通过套接字发送文件，但您需要某种协议以确保您知道文件的名称以及何时到达文件末尾。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-17T07:19:27.913

你在玩游戏。在非常困难的模式下。你到达最后一层。你很高兴。2 天的不间断游戏正在获得回报。剧情很快就要结束了。你会发现邪恶策划者的动机，你是如何成为英雄的，并将收集在最后一扇门后面等待的广受欢迎的史诗神器。**而且**您无需重新启动一次即可到达这里。

在幕后，有一个游戏对象，如下所示：

```
class GameState
{
   int level;
} 
```

而且水平是`25`。

到目前为止，你真的很喜欢这个游戏，但你不想从头开始，以防最后一个老板杀了你。因此，直观地，您按下`Ctrl+S`。但是等等，你会得到一个错误：

```
Sorry, saving is disabled. 
```

什么？所以我必须重新开始，以防我死？怎么会这样。

*击鼓*

开发人员虽然很出色（他们设法让您连续 2 天着迷，对吧？）并没有实现**serialization**。

当您重新启动游戏时，会进行内存清理。那个最重要的`GameState`对象，你花了 2 天时间将`level`成员增加到 的那个`25`，被销毁了。

你怎么能解决这个问题？关闭游戏时，操作系统会回收内存。你能把它存放在哪里？在外部服务器上？（套接字）在磁盘上？（写入文件）

好吧，为什么不呢。

```
class GameState
{
    int level;
    void save(const std::string& fileName)
    { /* write level to file */ }
    void load(const std::string& fileName)
    { /* read game state from file */ }
}; 
```

当您按下`Ctrl+s`时，`GameState`对象被保存到一个文件中。

而且，奇迹般地，当您加载游戏时，`GameState`会从该文件中读取对象。您不再需要花费 2 天时间才能回到上一个老板。你已经在那里了。

**真实答案：**

从技术上讲，编写序列化功能非常困难。我建议你使用第三方。Google 协议缓冲区提供了跨平台甚至跨语言的序列化。许多其他的存在。

> 1.那么序列化有什么意义呢？我这里需要吗？如果是，我应该如何使用它？

如上所述，它在运行之间或进程之间（可能在不同的机器上）存储状态。是否需要取决于您是否需要存储状态并稍后重新加载。

> 2.我一直认为任何一种文件，.txt/.csv/.exe/...，在内存中都是01的位，这意味着它们自然具有二进制表示，所以我们不能简单地通过套接字发送这些文件直接地？

他们是。但是您不想在`.exe`玩新游戏时修改。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-17T10:02:32.617

序列化做了很多事情。它支持持久性（能够离开程序，然后返回程序并获得相同的数据），以及进程和机器之间的通信。它基本上意味着将您的内部数据转换为字节序列，并且为了有用，您还必须支持反序列化：将字节序列转换回数据。

当你这样做时，重要的是要意识到在程序内部，数据不仅仅是一个字节序列。它具有格式和结构：例如，a`double`的表示方式因一台机器与另一台机器不同；和更复杂的对象，例如`std::string`，甚至不在连续内存中。因此，当您序列化时，您要做的第一件事就是定义每种类型如何表示为一个字节序列。如果您正在与另一个程序通信，则两个程序都必须同意这种串行格式；如果只是为了让您自己重新读取数据，您可以使用任何您想要的格式（但我建议使用预定义的标准格式，如 XDR，如果只是为了简化文档）。

你不能做的只是在内存中转储对象的图像。复杂的对象`std::string`中会有指针，而这些指针在另一个进程中将毫无意义。甚至简单类型的表示`double`也可能会随着时间而改变。（从 32 位迁移到 64 位导致`long`大多数系统上的大小发生变化。）您必须定义一种格式，然后从您拥有的数据中逐字节生成它。例如，要编写 XDR，您可能会使用如下内容：

```
typedef std::vector<char> Buffer;

void
writeUInt( Buffer& dest, unsigned value )
{
    dest.push_back( (value >> 24) & 0xFF );
    dest.push_back( (value >> 16) & 0xFF );
    dest.push_back( (value >>  8) & 0xFF );
    dest.push_back( (value      ) & 0xFF );
}

void
writeInt( Buffer& dest, int value )
{
    writeUInt( dest, static_cast<unsigned>( value ) );
}

void
writeString( Buffer& dest, std::string const& value)
{
    assert( value.size() <= 0xFFFFFFFF );
    writeInt( dest, value.size() )
    std::copy( value.begin(), value.end(), std::back_inserter( dest ) );
    while ( dest.size() % 4 != 0 ) {
        dest.push_back( '\0' );
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T09:24:13.783

除了大 edian 或 little endian 之外，还有一个问题是如何使用该编译器为该程序的给定结构打包数据。如果要保存整个结构，则不能使用任何指针，则必须将其替换为足够大的字符缓冲区以满足您的需要。如果另一台机器将采用相同的架构，那么如果您使用#pragma pack(1)，您的结构字段之间将不会有任何间隙，并且您可以确保数据看起来好像是序列化的，但没有字符串的大小前缀。如果您确定将读取数据的其他程序对于相同的结构具有完全相同的设置，则可以跳过#pragma pack(1)。除此之外，数据将不匹配。

如果先序列化到内存，可以加快序列化过程。这通常可以通过缓冲区类和大多数类型的模板函数来完成。

```
template<typename T>
buffer& operator<<(T data)
{
    *(T*)buf = data;
    buf += sizeof(T);
} 
```

显然，您需要专门的字符串和更大的数据类型。您可以将 memcpy 用于大型结构并传入指向数据的指针。对于字符串，您需要为前面提到的长度添加前缀。

但是，对于严重的序列化需求，还有更多需要考虑。

# java - 在 startActivity() 期间发生 java.lang.NullPointerException

> ID：12001264
> 
> 赞同：0
> 
> 时间：2012-08-17T07:06:48.957
> 
> 标签：java, android

我目前正在做我的项目，但我遇到了一个问题。

当涉及到`SearchDic()`.

这是我的代码：

```
public int SearchDic(final CharSequence received) {
    Handler mHandler = new Handler();
    mHandler.postDelayed(new Runnable() {
    @Override
    public void run(){
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://m.endic.naver.com/search.nhn?query=" + received + "&searchOption=entryIdiom&preQuery=&forceRedirect="));
        startActivity(browserIntent);
    }}, 10);
return 0; 
} 
```

我的应用程序中的服务调用 this `SearchDic()`，所以我使用了非静态方式......例如

```
// Local Variable Received 
MainActivity a = new MainActivity();
a.SearchDic(Received); 
```

我已经尝试过 Logcat，但它一直在崩溃`startActivity()`，我可以看到错误消息，`java.lang.NullPointerException`.

这是我的 Logcat 错误：

```
08-17 16:16:10.364: D/AndroidRuntime(19322): Shutting down VM
08-17 16:16:10.364: W/dalvikvm(19322): threadid=1: thread exiting with uncaught exception (group=0x40c7c1f8)
08-17 16:16:10.369: E/AndroidRuntime(19322): FATAL EXCEPTION: main
08-17 16:16:10.369: E/AndroidRuntime(19322): java.lang.NullPointerException
08-17 16:16:10.369: E/AndroidRuntime(19322):    at android.app.Activity.startActivityForResult(Activity.java:3252)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at android.app.Activity.startActivity(Activity.java:3359)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at com.wjuni.easydic.MainActivity$1.run(MainActivity.java:80)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at android.os.Handler.handleCallback(Handler.java:605)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at android.os.Looper.loop(Looper.java:137)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at android.app.ActivityThread.main(ActivityThread.java:4514)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at java.lang.reflect.Method.invokeNative(Native Method)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at java.lang.reflect.Method.invoke(Method.java:511)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
08-17 16:16:10.369: E/AndroidRuntime(19322):    at dalvik.system.NativeStart.main(Native Method) 
```

我的应用程序有什么问题，我应该如何调用这个函数？请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:39:57.370

正如@jens 指出的那样，您不应该自己初始化 MainActivity 。StartActivity 失败，因为 Activity 的上下文未初始化。您需要使用您的服务的上下文。使用以下功能。将此函数复制到您自己的服务中。

```
public int SearchDic(final CharSequence received, final Context context) {
    Handler mHandler = new Handler();
    mHandler.postDelayed(new Runnable() {
    @Override
    public void run(){
        Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://m.endic.naver.com/search.nhn?query=" + received + "&searchOption=entryIdiom&preQuery=&forceRedirect="));
        context.startActivity(browserIntent);
    }}, 10);
return 0; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:23:30.313

我认为 browserIntent 可以为 null，否则只接收到 null，即可以初始化 null 的两个点

# python - 在 64 位 Windows 和 Python 上导入 PyLab 时出错

> ID：12001267
> 
> 赞同：1
> 
> 时间：2012-08-17T07:06:54.323
> 
> 标签：python, numpy, scipy, matplotlib

所以我得到了 numpy、scipy、IPython 和 matplotlib 工作（我可以用“import **_** ”导入所有四个。但是，我无法让 pylab 工作。我的印象是，如果我有上述内容，我就可以导入 pylab。我希望我能理解这些错误；他们对我来说就像巴别塔。谁能告诉我怎么了？任何帮助表示赞赏。

我的错误如下：

```
>>> from pylab import *
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    from pylab import *
  File "C:\Python32\lib\site-packages\pylab.py", line 1, in <module>
    from matplotlib.pylab import *
  File "C:\Python32\lib\site-packages\matplotlib\pylab.py", line 222, in <module>
    from matplotlib import mpl  # pulls in most modules
  File "C:\Python32\lib\site-packages\matplotlib\mpl.py", line 3, in <module>
    from matplotlib import axes
  File "C:\Python32\lib\site-packages\matplotlib\axes.py", line 21, in <module>
    import matplotlib.dates as mdates
  File "C:\Python32\lib\site-packages\matplotlib\dates.py", line 122, in <module>
    from dateutil.rrule import rrule, MO, TU, WE, TH, FR, SA, SU, YEARLY, \
  File "C:\Python32\lib\site-packages\dateutil\rrule.py", line 18, in <module>
    from six import advance_iterator, integer_types
ImportError: No module named six 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:53:06.267

它不是我以前见过的错误消息，但 6 是一个为 Python 版本提供 2to3 支持的包。

[你可以从这里](http://packages.python.org/six/)弄到六个。

出于兴趣，您使用的是哪个版本的 mpl？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:05:36.737

您可以通过安装 Python 2.x 来解决您的问题。图形库[Matplotlib](http://matplotlib.sourceforge.net/users/installing.html)不支持 Python 3.x。[很少有图书馆这样做](http://python3wos.appspot.com/)。

虽然 3.0 版本是四年前发布的，但大多数用户使用 Python 2.x 会更好，因为社区尚未普遍采用 3.x。Python 开发人员[自己也是这么说](http://wiki.python.org/moin/Python2orPython3)的。是的，这很尴尬：\

# ajax - 设置 Access-Control-Allow-Origin 接受所有域存在哪些安全风险？

> ID：12001269
> 
> 赞同：160
> 
> 时间：2012-08-17T07:06:58.360
> 
> 标签：ajax, security, cors, http-headers

我最近不得不设置`Access-Control-Allow-Origin`为`*`能够进行跨子域 AJAX 调用。我觉得这可能是一个安全问题。如果我保留该设置，我将面临哪些风险？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-08-17T23:54:12.533

通过响应`Access-Control-Allow-Origin: *`，请求的资源允许与每个来源共享。这基本上意味着任何站点都可以向您的站点发送 XHR 请求并访问服务器的响应，如果您没有实现此 CORS 响应，情况就不会如此。

因此，任何站点都可以代表其访问者向您的站点发出请求并处理其响应。如果您实现了基于浏览器自动提供的某些内容（cookie、基于 cookie 的会话等）的身份验证或授权方案之类的实现，则第三方站点触发的请求也将使用它们。

这确实会带来安全风险，特别是如果您不仅允许选定资源共享资源，而且允许每个资源共享资源时。在这种情况下，您应该看看*[何时启用 CORS 是安全的？](https://stackoverflow.com/a/9725695/53114)*.

## 更新 (2020-10-07)

Current [Fetch Standard](https://fetch.spec.whatwg.org/#cors-protocol-and-credentials)在凭据模式设置为 时忽略凭据`include`，如果`Access-Control-Allow-Origin`设置为`*`。

因此，如果您使用基于 cookie 的身份验证，则不会在请求中发送您的凭据。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2019-06-05T09:22:27.620

`Access-Control-Allow-Origin: *`添加到任何资源是完全安全的，*除非*该资源包含受标准凭据以外的东西保护的私有数据。标准凭据是 cookie、HTTP 基本身份验证和 TLS 客户端证书。

# 例如：受 cookie 保护的数据是安全的

想象一下`https://example.com/users-private-data`，这可能会根据用户的登录状态暴露私人数据。此状态使用会话 cookie。添加到此资源是*安全*`Access-Control-Allow-Origin: *`的，因为此标头仅在没有 cookie 的情况下允许访问响应，并且需要 cookie 才能获取私有数据。结果，没有私人数据被泄露。

# 例如：受位置 / ip / 内部网络保护的数据不安全（不幸的是，在 Intranet 和家用电器中很常见）：

想象一下`https://intranet.example.com/company-private-data`，它会暴露公司的私人数据，但只有在公司的 wifi 网络上才能访问。添加到此资源是不安全的，因为它使用标准凭据以外的其他东西进行保护**。**`Access-Control-Allow-Origin: *`否则，错误的脚本可能会将您用作通往 Intranet 的隧道。

# 经验法则

想象一下，如果用户在隐身窗口中访问资源，他们会看到什么。如果您对每个人都看到此内容（包括浏览器收到的源代码）感到满意，则可以安全地添加`Access-Control-Allow-Origin: *`.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-16T23:13:29.047

AFAIK，Access-Control-Allow-Origin 只是从服务器发送到浏览器的 http 标头。将其限制在特定地址（或禁用它）不会使您的网站更安全，例如机器人。如果机器人愿意，他们可以忽略标题。默认情况下，常规浏览器（Explorer、Chrome 等）支持标题。但是像[Postman](https://www.getpostman.com/)这样的应用程序只是忽略了它。

服务器端在返回响应时实际上并没有检查请求的“来源”是什么。它只是添加了 http 标头。发送请求的浏览器（客户端）决定读取访问控制标头并对其采取行动。请注意，在 XHR 的情况下，它可能会使用特殊的 'OPTIONS' 请求来首先请求标头。

因此，任何具有创造性脚本能力的人都可以轻松忽略整个标题，无论其中设置了什么。

另请参阅[设置 Access-Control-Allow-Origin 的可能安全问题](https://stackoverflow.com/questions/14979313/possible-security-issues-of-setting-access-control-allow-origin)。

* * *

现在来实际回答这个问题

> 我不禁觉得我将我的环境置于安全风险之中。

如果有人想攻击你，他们可以轻松绕过 Access-Control-Allow-Origin。但是通过启用“*”，您确实可以为攻击者提供更多“攻击向量”，例如使用支持该 HTTP 标头的常规网络浏览器。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-03-26T12:20:08.477

以下是作为评论发布的 2 个示例，当通配符确实有问题时：

> 假设我登录银行的网站。如果我转到另一个页面然后返回我的银行，由于 cookie，我仍然在登录。互联网上的其他用户可以像我一样在我的银行访问相同的 URL，但是如果没有 cookie，他们将无法访问我的帐户。如果允许跨域请求，恶意网站可以有效地冒充用户。

–[布拉德](https://stackoverflow.com/questions/12001269/what-are-the-security-risks-of-setting-access-control-allow-origin#comment67925248_19415564)

> 假设你有一个普通的家用路由器，比如 Linksys WRT54g 什么的。假设路由器允许跨域请求。我网页上的脚本可以向常见的路由器 IP 地址（如 192.168.1.1）发出 HTTP 请求，并重新配置您的路由器以允许攻击。它甚至可以将您的路由器直接用作 DDoS 节点。（大多数路由器都有测试页面，允许 ping 或简单的 HTTP 服务器检查。这些可以被大量滥用。）

–[布拉德](https://stackoverflow.com/questions/12001269/what-are-the-security-risks-of-setting-access-control-allow-origin#comment67925291_19415564)

我觉得这些评论应该是答案，因为它们用现实生活中的例子解释了问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-09-23T17:45:44.790

**这个答案最初是作为对这个问题的回复而写的，[`What are the security implications of setting Access-Control-Allow-Headers: *, if any?`](https://webcache.googleusercontent.com/search?q=cache:ZGzhqnAL9IIJ:https://stackoverflow.com/a/69304711/4420129)尽管与这个问题无关，但还是被合并了。**

* * *

将其设置为通配符`*`，意味着允许除安全列表之外[的](https://developer.mozilla.org/en-US/docs/Glossary/CORS-safelisted_request_header)所有标头，并删除确保它们安全的限制。

这些是被认为是安全的 4 个安全列表标头的限制：

> *   对于 Accept-Language 和 Content-Language：只能具有由`0-9`、`A-Z`、`a-z`、 空格或组成的值`*,-.;=`。
> *   对于 Accept 和 Content-Type: 不能包含 CORS 不安全的请求标头字节：（`0x00-0x1F`除了`0x09`(HT)，这是允许的）`"():<>?@[\]{}`、 和`0x7F`(DEL)。
> *   对于 Content-Type：需要具有其解析值（忽略参数）的 MIME 类型，即`application/x-www-form-urlencoded`、`multipart/form-data`或`text/plain`。
> *   对于任何标头：值的长度不能大于 128。

为简单起见，我将根据这些标题来回答。

根据服务器实现，简单地删除这些限制可能非常危险（对用户而言）。
例如，[这个过时的 wordpress 插件](https://wpscan.com/vulnerability/8173)有一个反射型 XSS 漏洞，其中的值`Accept-Language`被解析并按原样呈现在页面上，如果值中包含恶意负载，则会导致用户浏览器上的脚本执行。

使用通配符 header `Access-Control-Allow-Headers: *`，重定向到您网站的第三方站点可以将 header 的值设置为`Accept Language: <script src="https://example.com/malicious-script.js"></script>`，因为通配符删除了上面第 1 点中的限制。

然后，预检响应会对此请求开绿灯，并且用户将被重定向到您的站点，从而在他们的浏览器上触发 XSS，其影响范围可能从烦人的弹出窗口到通过 cookie 劫持失去对其帐户的控制。

因此，我强烈建议不要设置通配符，除非它用于在页面上没有呈现任何内容的 API 端点。

**您可以设置`Access-Control-Allow-Headers: Pragma`为您的问题的替代解决方案。**

* * *

请注意，`*`对于没有凭据的请求（没有 HTTP cookie 或 HTTP 身份验证信息的请求），该值仅计为特殊的通配符值，否则它将被读取为文字标头。[文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Headers#directives)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-03T07:22:31.340

在服务器尝试通过设置以下标头来完全禁用 CORS 的情况下。

*   Access-Control-Allow-Origin：*（告诉浏览器服务器接受来自任何 ORIGIN 的跨站点请求）

*   Access-Control-Allow-Credentials: true（告诉浏览器跨站请求可以发送cookies）

在浏览器中实现了故障保护，这将导致以下错误

```
"Credential is not supported if the CORS header ‘Access-Control-Allow-Origin’ is ‘*’&quot; 
```

因此，在大多数情况下，将“Access-Control-Allow-Origin”设置为`*`不会有问题。然而，为了防止攻击，服务器可以维护一个允许的来源列表，并且每当服务器收到一个跨来源请求时，它可以根据允许的来源列表验证 ORIGIN 标头，然后在 Access-Control-Allow-Origin 中回显相同的内容标题。

由于浏览器上运行的 javascript 无法更改 ORIGIN 标头，因此恶意站点将无法对其进行欺骗。

# javascript - 如何将 JavaScript 代码封装为 jQuery 插件或其他解决方案

> ID：12001279
> 
> 赞同：3
> 
> 时间：2012-08-17T07:07:27.713
> 
> 标签：javascript, jquery

我在几页上有一段代码，我需要更多：

```
 $('.editable-textbox').live('keypress', function(e) {
            if (e.keyCode == 13) {
                $(this).blur();
                return false;
            }
            return true;
        }).live('keyup', function(e) {
            if (e.keyCode == 13) {
                $(this).blur();
                return false;
            }
            return true;
        }); 
```

它有几个缺点：

*   该代码并不暗示它的作用。它的作用是：当输入被击中时阻止表单提交，`.editable-textbox`类+控制模糊
*   当然代码重复

我只是想知道：有没有办法将它重构为这样的东西：

```
$('.editable-textbox').supressFormSubmitOnEnter(); 
```

用 jQuery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T07:09:11.480

是的。

```
$.fn.supressFormSubmitOnEnter = function() {
    return this.live('keypress', function(e) {
            if (e.keyCode == 13) {
                $(this).blur();
                return false;
            }
            return true;
        }).live('keyup', function(e) {
            if (e.keyCode == 13) {
                $(this).blur();
                return false;
            }
            return true;
        });
}; 
```

您应该阅读[插件创作指南](http://docs.jquery.com/Plugins/Authoring)。

而且，它可以写得更简洁......

```
$.fn.supressFormSubmitOnEnter = function() {
    return $(document).on('keypress keyup', this, function(e) {
            if (e.keyCode == 13) {
                $(this).blur();
                e.preventDefault();
            }
        });
}; 
```

[js小提琴](http://jsfiddle.net/C6EZ8/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T07:09:46.823

你在[jQuery Docs中有很好的资源](http://docs.jquery.com/Plugins/Authoring)

# tomcat - Tomcat 7（虚拟主机？）

> ID：12001282
> 
> 赞同：1
> 
> 时间：2012-08-17T07:07:40.500
> 
> 标签：tomcat, tomcat7, virtual-hosts

我想在端口 8082 上使用我的 Web 应用程序（例如），它工作正常。但是我想在端口 8080 上保留连接（使用默认的 Tomcat 页面），我可以这样做吗？怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:31:02.960

您需要编辑 conf/server.xml 以添加另一个服务，例如

```
<Service name="for_host1"> 
    <Connector port="8082" .. />
     <Engine name="Catalina_host1" defaultHost="stimpy">
        <Host name="stimpy" appBase="stimpyapps"/>
    </Engine> 
</Service> 
<Service name="default"> 
    <Connector port="8080" .. />
     <Engine name="Catalina" defaultHost="ren">
        <Host name="ren"    appBase="renapps"/>
    </Engine> 
</Service> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:11:49.187

您可以同时安装和运行 2 个或多个 tomcat 服务器，并让每个 tomcat 侦听不同的端口

# android - AutoCompleteTextView/MultiAutoCompleteTextView 上缺少默认字典

> ID：12001289
> 
> 赞同：8
> 
> 时间：2012-08-17T07:08:12.513
> 
> 标签：android, android-layout, textview, autocompletetextview

我们有一个聊天应用程序，我们最近为其实现了本机 android 键盘。除此之外，我们正在使用 MultiAutoCompleteTextView 实现多个自动完成功能。[这可以通过使用Android Docs](http://developer.android.com/reference/android/widget/MultiAutoCompleteTextView.html "MultiAutoCompleteTextView Android reference.")中提到的标准过程创建自定义标记器来完成

除了将 EditText 转换为 MultiAutoCompleteTextView 或 AutoCompleteTextView android 字典建议停止出现的一个问题外，一切似乎都运行良好。作为一个聊天应用程序，我们显示字典建议对我们的用户来说至关重要。

还有其他几个人发布了类似的问题，但我认为他们受到了很多社区的关注。 [AutoCompleteTextView 不显示字典建议](https://stackoverflow.com/questions/9466786/autocompletetextview-doesnt-show-dictionary-suggestions?rq=1)

相反，StackOverflow 上的一篇文章表明他能够看到字典建议，询问禁用它的方法。 [没有字典提示的 AutoCompleteTextView](https://stackoverflow.com/questions/5368848/autocompletetextview-without-dictionary-hints)

按照我添加的一些建议

```
android:inputType="textAutoCorrect" 
```

但这也没有任何帮助。

我必须简单的问题：

1.  是否可以在 AutoCompleteTextView 或 MultiAutoCompleteTextView 中有字典？

2.  如果这是可能的，该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T22:54:52.637

You should set the key listener with autocomplete. It looks like AutoCompleteTextView ignores the xml "autocomplete" value, so you can do this programatically.

I do this after the AutoCompleteTextView has been created and works for me. You need to specify a Capitalize, usually NONE.

```
TextKeyListener input =
    TextKeyListener.getInstance(true, TextKeyListener.Capitalize.NONE);
myAutoComleteTextView.setKeyListener(input); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T10:18:25.393

将字典放在自动完成文本视图中没有任何意义。用户可以选择与视图一起出现的建议。如果这一切都是可能的，用户将在两个地方看到建议，这将是令人困惑的。

# c++ - 可变参数模板实例化中的无限递归试图构建任意深度的树状结构

> ID：12001293
> 
> 赞同：5
> 
> 时间：2012-08-17T07:08:24.723
> 
> 标签：c++, templates, recursion, c++11, variadic-templates

我正在对可变参数进行一些实验，但偶然发现了一个我无法弄清楚解决方案的问题 - 基本上我正在尝试用任意数据类型的组件构建一棵树 - 这是一些代码：

```
template <class A, class B>
struct SeqExpression
{
    const A & first;
    const B & then;
};

template <class A, class B>
SeqExpression<A,B>
make_seq(const A & a, const B & b)
{
    return {a,b};
}

template <class A, class B, class ...T>
auto
make_seq(const A & first, const B & second, T ...rest) -> decltype(make_seq(make_seq(first,second),rest...))
{

    return make_seq(make_seq(first,second),rest...);
} 
```

然后我尝试：

```
auto x = make_seq("X","Y",'z'); 
```

但是 GCC(4.7) 告诉我：

```
error: template instantiation depth exceeds maximum of 900 (use -ftemplate-depth= to increase the maximum) substituting ‘template<class A, class B, class ... T> decltype (make_seq(make_seq(first, second), rest ...)) make_seq(const A&, const B&, T ...) [with A = SeqExpression<char [2], char [2]>; B = char; T = {}]’
recursively required by substitution of ‘template<class A, class B, class ... T> decltype (make_seq(make_seq(first, second), rest ...)) make_seq(const A&, const B&, T ...) [with A = SeqExpression<char [2], char [2]>; B = char; T = {}]’
required by substitution of ‘template<class A, class B, class ... T> decltype (make_seq(make_seq(first, second), rest ...)) make_seq(const A&, const B&, T ...) [with A = char [2]; B = char [2]; T = {char}]’ 
```

在我看来，它应该是可以解决的！

`make_seq("X","Y")`有类型`SeqExpression< char[2],char[2] >` 所以`make_seq(make_seq("X","Y"),'z')`有类型`SeqExpression< SeqExpression< char[2],char[2] >,char >`

对我来说，它似乎相对没有循环。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T11:57:27.287

问题是当您有两个参数（在两个参数模板上）时，您的可变参数模板被选中。您需要确保仅当您至少有三个参数时才选择它；最简单的方法是添加另一个参数：

```
template <class A, class B, class C, class ...T>
auto
make_seq(const A & first, const B & second, const C &third, T ...rest)
 -> decltype(make_seq(make_seq(first,second), third, rest...))
{

    return make_seq(make_seq(first,second), third, rest...);
} 
```

可变参数包可以并且将匹配零个参数；这可能看起来令人惊讶，但它比替代方案更好。

* * *

请注意，上面显然利用了返回类型的非标准 g++ 扩展。以下类型程序应该能够计算对应于参数序列的类型：

```
template <int n, class ...T> struct mst_helper;
template <class A, class B>
struct mst_helper<2, A, B> { typedef SeqExpression<A, B> type; };
template <int n, class A, class B, class ...T>
struct mst_helper<n, A, B, T...> {
    typedef typename mst_helper<n - 1, SeqExpression<A, B>, T...>::type type; };
template <class ...T>
struct make_seq_type { typedef typename mst_helper<sizeof...(T), T...>::type type; };

template <class A, class B, class C, class ...T>
typename make_seq_type<A, B, C, T...>::type
make_seq(const A & first, const B & second, const C &third, T ...rest)
{
    return make_seq(make_seq(first,second), third, rest...);
} 
```

g++-4.7.1 似乎有模板别名的错误，所以我不得不使用`struct`而不是`using`.

# javascript - 单击标记时（在单击事件上）更改标记图标，并在单击另一个标记时将其恢复为正常图标

> ID：12001295
> 
> 赞同：0
> 
> 时间：2012-08-17T07:08:26.277
> 
> 标签：javascript

如何在单击标记时（在单击事件上）更改标记图标，并在单击另一个标记时将其恢复为正常图标？

这是我的代码。在这段代码中，我为 ATM 和商店位置创建了两个图标。

```
 <!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <title>OpenStreetMap with Google Maps v3 API</title>
        <style type="text/css">
            html, body, #map {
            position:absolute;
            left:100px;
                height: 400px;
                margin: 0;
                padding: 0;
                width:400px;
            }
        </style>
    </head>
    <body>

        <div id="map"></div>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script type="text/javascript">

        var map;                    // Variable for Map
        var mapOption;              // Variable for Options for showing Map

        var cromaStorePos = new Array(23);      // Array of coordinates of Croma Store.
        var cromaStoreCat = new Array(3);                 
        var cromaMarker = new Array(23);        // Array of Markers for Croma Store.
        // List of Croma stores. Hard coded. These informations can be recieved from webservices.

        cromaStoreAdd[0] = "Khanna Building, AA-5, 2nd Avenue, \nAnnanagar, Chennai-6000040.\nPhone: 044-6458 9703/04";
        cromaStorePos[0] = new google.maps.LatLng(13.072121,80.261307);          
        cromaStoreCat[0] = "ATM";       
        cromaStoreAdd[1] = "Ground Floor, KENCES Towers, No.1,\nRamakrishnan Street,\nNorth Usman Rd., Chennai-600017\. \nPhone: +91 044 - 64629816";
        cromaStorePos[1] = new google.maps.LatLng(13.05473,80.235901);
        cromaStoreCat[1] = "store";
        cromaStoreAdd[2] = "Tarapore Towers, 826 Ground Floor, \nAnna Salai, Chennai-600002\. \nPhone: +91 044-6458 9715 / 16";
        cromaStorePos[2] = new google.maps.LatLng(13.094861, 80.215645);
        cromaStoreCat[2] = "ATM";
            var element = document.getElementById("map");
            var myLatlng = new google.maps.LatLng(13.072121,80.261307);
            /*
            Build list of map types.
            You can also use var mapTypeIds = ["roadmap", "satellite", "hybrid", "terrain", "OSM"]
            but static lists sucks when google updates the default list of map types.
            */

            var map = new google.maps.Map(element, {
                center: myLatlng,
                zoom: 12,
                disableDefaultUI: true,
                panControl: false,
                zoomControl: false,
                scaleControl: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                streetViewControl: false
            });

            var cromaIcon = 'img/location_icon_atm_blue_blue.png'; 
            var cromaIcon1 = 'img/location_icon_bank_blue_blue.png';
            var cromaIcon2='img/pin_bank_Selected_blue.png';
            var cromaIcon3='img/pin_atm_selected_blue.png';

            // For loop for navigating through the croma stores coordinates and addresses.
            for (i=0; i<3; i++)
            {   
                if(cromaStoreCat[i]=="ATM")
                {
                    cromaMarker[i] = new google.maps.Marker({

                    position: cromaStorePos[i],
                    map: map,
                    title: cromaStoreAdd[i],
                    icon: cromaIcon,

                }); 

                onclickMarker(cromaStoreCat[i],cromaMarker);

                }       

                if(cromaStoreCat[i]=="store")
                {
                    cromaMarker[i] = new google.maps.Marker({
                    position: cromaStorePos[i],
                    map: map,
                    title: cromaStoreAdd[i],
                    icon: cromaIcon1
                    });

                onclickMarker(cromaStoreCat[i],cromaMarker);

                } 

            }

            function onclickMarker(category,marker){

            google.maps.event.addListener(cromaMarker[i],"click",function(){

                switch(category)
                {
                case 'ATM':

                    this.setIcon(cromaIcon3);

                    break;
                case 'store':
                    this.setIcon(cromaIcon2);

                    break;

                }

            });

            }

            //---------------- End of Code for getting address of a particular coordinates. <position> here. ------------------//

            //---------------- Code for handling the error -------------------//
            function showError(err)
            {
                if (err.code == 0)
                {
                    divMap.innerHTML = "Unknown error..";
                }
                else if (err.code == 1)
                {
                    divMap.innerHTML = "User do not want to share its location.";
                }
                else if (err.code == 2)
                {
                    divMap.innerHTML = "Sorry, But your position is not available.";
                }
                else if (err.code == 3)
                {
                    divMap.innerHTML = "Sorry, But your request has timed out.";
                }
            }
      </script> 
    </body>
</html>

Can anyone help me in this regard...

Thanks in advance..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:08:58.790

我不知道您如何标记和取消标记它们。为什么不只是 for 循环并取消标记所有这些，然后只标记已单击的一个？

尝试使用 jquery 像这样
[http://jsfiddle.net/jtjgY/](http://jsfiddle.net/jtjgY/)
或简单的循环像这样
[http://jsfiddle.net/3M5CS/1/](http://jsfiddle.net/3M5CS/1/)

# android - 我的小部件与我的应用程序的集成

> ID：12001296
> 
> 赞同：6
> 
> 时间：2012-08-17T07:08:29.093
> 
> 标签：android, android-widget

我已经制作了一个运行良好的小部件，而且我制作的应用程序也运行良好。
现在我想将此小部件集成到我的应用程序中，以便两者都在同一个包下。

我怎样才能做到这一点 ？？
我必须在清单文件中进行更改吗？
我已经完成了研发，但所有链接都是从一开始就开发小部件的。没有一个是关于集成的。

我见过很多，但没有发现任何帮助。请在这方面帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:55:01.503

我不是[复制粘贴编程](http://en.wikipedia.org/wiki/Copy_and_paste_programming)的辩护者，所以经过一番研究，我们找到了一种将小部件集成到几个不同项目中的方法。

*   将 Widget 项目转为 Library 项目：`properties -> Android ->`并勾选`Is Library`
*   转到原始项目并导入 Widget 项目： `properties -> Android -> Add`
*   在原项目的 Manifest 中，将 `<receiver>(...)</receiver>`, 包括`<intent-filter />`, 之间的文本添加`<meta-data/>`到`<application>(...)</application>`

Presto，App + Widget 集成，无需复制粘贴编程！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:04:21.673

它通过将我所有的小部件文件复制到我想要集成到的项目中来为我工作。现在，当我在设备中安装应用程序时，它的小部件也会安装

# c# - 重定向到自己的页面

> ID：12001298
> 
> 赞同：1
> 
> 时间：2012-08-17T07:08:36.510
> 
> 标签：c#, asp.net, mobile-website

我是 asp.net C# 的新手。

我正在为移动用户创建一个网站。

我想将页面重定向到用户移动版本及其平台。

我不想使用[WURFL](http://wurfl.sourceforge.net/wurfl.php)

还有这个[http://51degrees.codeplex.com/](http://51degrees.codeplex.com/)

有没有其他可能的方法来为不同的移动用户创建页面？

例如android（冰淇淋）和android（姜饼）等的不同页面......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:32:05.880

像这样使用`Request.UserAgent`：

```
if(Request.UserAgent.Contains("Android"))
{
    Response.Redirect("Andriod/MyPage.aspx");
} 
```

版本检查也可以以相同的方式完成。所有流行的操作系统/浏览器的用户代理都可以在互联网上获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:20:39.750

您可以使用 JavaScript 导航器。像这样的东西：

```
p = navigator.platform;

// Detects if it is an iOS device
if( p === 'iPad' || p === 'iPhone' || p === 'iPod' ){
    //iOS = true;
    //Redirect
}

// Detects if it is an Android device
if(p.indexOf("android")>=0);
    //Android= true;
    //Redirect
} 
```

或者

```
var iOS = ( navigator.userAgent.match(/(iPad|iPhone|iPod)/i) ? true : false );
if(iOS)
    //Redicret 
```

# javascript - MediaSource API 演示不工作（Chrome）

> ID：12001299
> 
> 赞同：0
> 
> 时间：2012-08-17T07:08:37.050
> 
> 标签：javascript, html, api, video, streaming

就 HTML5 而言，我是新手。我正在浏览[此链接上提供的](http://updates.html5rocks.com/2011/11/Stream-video-using-the-MediaSource-API)**MediaSource API**文档

我访问了[此链接上给出的演示链接](http://html5-demos.appspot.com/static/media-source.html)

但它不起作用（在 chrome 下）。当我通过开发人员工具检查时，我收到以下错误：

```
Uncaught ReferenceError: MediaSource is not defined 
```

在文档中提到：

```
Support: Currently, the MediaSource API is only available in Chrome Dev Channel 17+ with the --enable-media-source flag set or enabled via about:flags. 
```

我已经启用了媒体源标志，我的 chrome 版本是**21.0.1180.79 m**

如何使这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T00:35:15.530

这个实验性 API 的状态在 Chrome 的最后几个版本中一直在变化。

*   Chrome 17-20 具有 v0.3 API，这是文章的代码片段所显示的。
*   Chrome 21 和 22 具有最初向 W3C 提出的 v0.5 API。
*   Chrome 23 具有当前正在标准化的新[的面向对象的 API 。](http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html)演示已更新到此版本的 API。

如果您想将 v0.3 示例转换为您的 Chrome 21 版本支持的 v0.5 API，只需按照[这些说明操作](http://code.google.com/p/chromium/issues/detail?id=119309#c13)即可。

如果您不介意运行 Canary 版本或者可以等到 Chrome 23 进入开发通道，那么您绝对应该使用面向对象的 API。它比旧版本更强大，它实际上反映了正在标准化的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T18:35:57.777

该演示既不能使用稳定频道也不能使用开发频道，而是使用最新的金丝雀 (m23) 版本。您所指的文档已过时。[您可以在此处](http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html)找到最新版本的规范草案。

另外，请检查[此](http://code.google.com/p/chromium/issues/detail?id=119309)Chrome 问题。我不确定那里提到的一件事。据说该演示已更新为使用 v0.5 API。但与 v0.5 相比，演示代码与最新规范中给出的示例更匹配。可能它们只是实现同一目标的两种不同方式。

# sql - SQL 查询：请帮助有关 SQL 查询的奇怪输出。（统计每个客户的最新状态）

> ID：12001304
> 
> 赞同：1
> 
> 时间：2012-08-17T07:08:54.950
> 
> 标签：sql, ms-access-2007

我曾经在这个 SO 中问过这个问题并且已经得到了解决方案，但是，那个 sql 查询只产生了部分正确的结果。我试图弄清楚，但我似乎很难理解。所以请你帮帮我。谢谢你。

对于表 tbl_sActivity

```
 act_id| Client_id | act_status| user_id | act_date 
    1    |      7    |    warm   |     1   | 19/7/12 
    2    |      7    |    dealed |     1   | 30/7/12 <- lastest status of client(7)          
    3    |      8    |    hot    |     1   | 6/8/12  <- lastest status of client(8)
    4    |      5    |    cold   |    22   | 7/8/12  <- lastest status of client(5)
    5    |      6    |    cold   |     1   | 16/7/12
    6    |      6    |    warm   |     1   | 18/7/12
    7    |      6    |    dealed |     1   | 7/8/12  <- lastest status of client(6)   
    8    |      9    |    warm   |    26   | 2/8/12
    9    |     10    |    warm   |    26   | 2/8/12  
    10   |      9    |    hot    |    26   | 4/8/12  <- lastest status of client(9)
    11   |     10    |    hot    |    26   | 4/8/12
    12   |     10    |    dealed |    26   | 10/8/12 <- lastest status of client(10)
    13   |     13    |    dealed |    26   | 8/8/12  <- lastest status of client(13)
    14   |     11    |    hot    |    25   | 8/8/12
    15   |     11    |    dealed |    25   | 14/8/12 <- lastest status of client(11) 
```

我想生成用户进度报告，显示每个用户如何跟进他/她的客户的最新进展。因此，此报告必须按每个用户的最新状态显示每个用户的客户组的数量。

**正确**的输出应该是这样的..

```
user_id | act_status | Count(act_status)
1       |   dealed   |    2
1       |    hot     |    1
22      |    cold    |    1 
25      |   dealed   |    1
26      |    hot     |    1
26      |   dealed   |    2 
```

我的 SQL 查询如下：

```
select user_id, act_status, count(act_Status)
from your_table
where act_date in (
    select  max(act_date)
    from your_table
    group by Client_id
)
group by user_id, act_status 
```

当我向数据库添加更多事务时，输出出现这样的**错误..**

```
user_id | act_status | Count(act_status)
1       |   dealed   |    2
1       |    hot     |    1
22      |    cold    |    1
25      |    hot     |    1 ** (this one shouldn't show up)
25      |   dealed   |    1
26      |    hot     |    2 ** (should be only '1')
26      |   dealed   |    2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:30:05.563

尝试和测试：

```
SELECT S.user_id, S.act_status, Count(S.act_status) AS CountOfact_status
FROM tbl_sActivity AS S INNER JOIN [SELECT A.client_id, Max(A.act_date) AS max_act
FROM tbl_sActivity AS A
GROUP BY A.client_id]. AS S2 ON (S.act_date = S2.max_act) AND (S.client_id = S2.client_id)
GROUP BY S.user_id, S.act_status 
```

与我昨天给出的答案类似的请求，请尝试通读我的查询以及使用它，这将有望帮助您理解并且是学习的唯一方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:13:06.723

如果使用主键列：act_id，而不是使用日期列，会不会更好。

因此，获取最大主键？

我的意思是，而不是这个：

```
where act_date in (
    select  max(act_date)
    from your_table
    group by Client_id
) 
```

像这样的东西：

```
 where act_id in (
select max(act_id)-- for each user, can't think of syntax now, but this could point you into the right direction
    ) 
```

BugFinder 的答案看起来更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:13:57.690

```
select user_id, act_status, count(act_Status) 
from your_table left join 
(select act_date in ( 
    select  max(act_date) 
    from your_table 
    group by Client_id 
) as t where t.client_id = your_table.client_id and t.act_date = your_table.act_date
group by user_id, act_status 
```

应该给你你想要的

例如，按客户制作一个最大日期表，然后使用两个字段将其链接回您的表以准确。

# eclipse-plugin - 在 RCP 应用程序的插件文件夹中添加和删除插件

> ID：12001306
> 
> 赞同：0
> 
> 时间：2012-08-17T07:09:02.540
> 
> 标签：eclipse-plugin, eclipse-rcp, rcp

我是 Eclipse 插件开发的新手。当我遇到某些插件概念时，我的脑海中出现了一些问题。

对于基于插件的产品，如果我们想添加一个新功能，比如执行某些验证，我们只需要删除一个编写验证逻辑的特定插件。同样，如果我们想从我们的产品中删除某些功能，我们只需要删除提供该功能的特定插件。

我尝试在我构建的 RCP 产品之一中执行相同的操作。我试图从插件文件夹中删除一个插件以禁用我的应用程序中的特定功能。但它收到如下错误消息，

```
!MESSAGE Bundle com.my.app.application_1.0.0.201208101553 [6] was not resolved.
!SUBENTRY 2 com.my.app.application 2 0 2012-08-17 12:37:13.256
!MESSAGE Missing imported package com.my.app.views.console_0.0.0.

!ENTRY org.eclipse.osgi 4 0 2012-08-17 12:37:13.256
!MESSAGE Application error
!STACK 1
java.lang.RuntimeException: Application "com.my.app.application.application" could not be found in the registry. The applications available are: org.eclipse.equinox.app.error.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

你能告诉我为什么会出现这个错误以及如何克服这些错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:43:48.043

每个 RCP 产品都有一个定义应用程序的主插件（阅读 Lars Vogel 的更多[Eclipse RCP 教程](http://www.vogella.com/articles/Eclipse3RCP/article.html#components_rcp)）。您删除了一个导出`com.my.app.views.console`包的插件，但主插件 ( `com.my.app.application`) 需要（导入）该包。因此，无法解析主插件，并且无法找到在该插件中定义的应用程序 - 这就是您在异常消息中看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T13:15:26.847

如果您希望能够在不破坏应用程序的情况下删除 com.my.app.views.console 插件，则必须找到一种方法来删除 com.my.app.application 插件所具有的硬依赖你的 com.my.app.views.console 插件。

# java - 为什么 Object.class 与 new Object().getClass() 不一样？

> ID：12001307
> 
> 赞同：1
> 
> 时间：2012-08-17T07:09:02.363
> 
> 标签：java, generics, reflection

我有以下 Java 类：

```
class Model { // some model class }

class FooModel extends Model {}

class ModelWorker {
  public static <T extends Model> void do(Class<T> clazz) { /* ... */ }
} 
```

为什么该`ModelWorker.do()`方法能够用于`FooModel.class`但不能用于
`new FooModel().getClass()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:16:45.093

您的虚拟代码应该可以工作。但是，由于这显然只是一个示例，我怀疑您的真实代码有点不同。

参见规范[`Object.getClass`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)。

> **实际结果类型是`Class<? extends |X|>`在哪里擦除调用`|X|`的表达式的静态类型。`getClass`**

注意到它返回了`Class<?>`吗？这意味着做类似的事情

```
Object o = new FooModel();
ModelWorker._do(o.getClass()); 
```

... 将无法正确编译，因为`o.getClass()`is 只是`Class<?>`. 你在做这样的事情吗？

# android - Android Webview 中的 Youtube 直播很紧张

> ID：12001310
> 
> 赞同：3
> 
> 时间：2012-08-17T07:09:17.430
> 
> 标签：android, flash, webview, youtube

我在尝试在 Android Webview 中播放一些 youtube 视频时遇到了很多麻烦。我到处搜索，但找不到有效的解决方案。

我正在使用以下代码：

```
WebView mWebView = (WebView) findViewById(R.id.webView1);
//Setup Webview
WebChromeClient client= new WebChromeClient();
mWebView.setWebChromeClient(client);

mWebView.getSettings().setPluginsEnabled(true);
mWebView.getSettings().setSupportZoom(false);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setRenderPriority(RenderPriority.HIGH);
mWebView.getSettings().setAllowFileAccess(true);

mWebView.loadDataWithBaseURL("www.youtube.com", "<iframe class=\"youtube-player\" type=\"text/html\" width=\"640\" height=\"385\" src=\"http://www.youtube.com/embed/JEkbk-xDmZE?html5=1\" frameborder=\"0\">\n</iframe>", "text/html", "UTF-8", ""); 
```

问题似乎只存在于像这样的某些流：[http ://www.youtube.com/watch?v=JEkbk-xDmZE](http://www.youtube.com/watch?v=JEkbk-xDmZE)

声音很棒，但视频很慢，比如每秒 1 帧。无法观看。

但如果我使用这个流：[http ://www.youtube.com/watch?v=GDFIYKmNw9Q](http://www.youtube.com/watch?v=GDFIYKmNw9Q)

它工作得很好。

这些直播之间有什么区别，如何让第一个直播正常播放？另外我应该提一下，有时第一个确实玩得很好。我无法弄清楚为什么它有时会播放而其他时候不会。我已经尝试创建一个几乎只有 Webview 和出厂重置设备的新项目，以消除任何可能影响此的设置，但我仍然遇到问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T09:16:35.450

总的来说，我一直在努力使用 YouTube，试图让它在 android 上运行。为什么某些视频滞后我无法理解，但它可能是不同的质量设置和有限的带宽，因此它的缓冲。

如果不是缓冲问题，希望以下选项之一可能会有所帮助。

目前，对于 WebView，您可以使用 IFrame 或 YouTube API。否则，您可以使用 GData API 获取指向视频的 RSTP 链接，以便在 VideoView 中使用。最后，您可以使用 Intent 启动 YouTube 应用。

将来会有一个新的适用于 YouTube 的 Android API。但它尚未发布。主题同样也不支持 2011 年 12 月宣布的对谷歌地图的片段支持。 - [http://www.youtube.com/watch?v=3WFsx-u-q3Y](http://www.youtube.com/watch?v=3WFsx-u-q3Y)

下面的优点/缺点（示例都是使 WebView 填充 100% 的屏幕高度和宽度）

**WebView - IFrame** - 可用的有限配置。在 WebView 中运行并适用于几乎所有平台。不要误会我的意思，有时不同的选项不起作用，并且当您尝试播放视频时会得到灰色背景。使用以下站点创建 IFrame 代码并尝试不同的选项，直到它适合您 - [https://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)（请注意一些允许的配置选项不起作用，例如隐藏控件没有效果）。如前所述，有很多不同的选择，因此涉及反复试验。虽然有几个不起作用，但有些看起来完全不同。查看您的问题，我以前从未使用过 html5=1 选项，也从未将 youtube.com 设置为基本网址。

```
webView = new WebView(this);
webView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));
webView.getSettings().setPluginState(PluginState.ON);
webView.getSettings().setLoadsImagesAutomatically(true);
webView.getSettings().setAppCacheEnabled(true);
webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
webView.getSettings().setJavaScriptEnabled(true);

// Prevent scrolling of the webview
webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
webView.setHorizontalScrollBarEnabled(false);
webView.setVerticalScrollBarEnabled(false);
webView.setWebChromeClient(new WebChromeClient()); //Blank webview to prevent null pointer plugin issues
webView.setWebViewClient(new WebViewClient()
{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;
    }
});

String data = "<html>"+
"<head>"+
"</head>"+
"<body style=\"margin: 0; padding: 0\">"+
"<iframe " +
"type=\"text/html\" "+
"class=\"youtube-player\" "+
"width=\"100%25\" "+
"height=\"100%25\" "+
"src=\"http://www.youtube.com/v/" + uri +
"?controls=0&showinfo=0&showsearch=0&modestbranding=1&fs=0\" "+
"frameborder=\"0\"></iframe>" +
"</body>"+
"</html>";

webView.loadData(data, "text/html", "utf-8"); 
```

**WebView - YouTube API** - 更好，但需要 Flash。因此，“Nexus 7”和任何未来随 JellyBean（4.1 及更高版本）发布的设备都将无法工作。由于这些设备上的 WebView 使用的是精简版的 Chrome，而不是精简版的 WebBrowser。因此，正如我昨天发现的那样，以后不能在我们的应用程序上使用它。

```
webView = new WebView(this);
webView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));
webView.getSettings().setPluginState(PluginState.ON);
webView.getSettings().setLoadsImagesAutomatically(true);
webView.getSettings().setAppCacheEnabled(true);
webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
webView.getSettings().setJavaScriptEnabled(true);

// Prevent scrolling of the webview
webView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
webView.setHorizontalScrollBarEnabled(false);
webView.setVerticalScrollBarEnabled(false);
webView.setWebChromeClient(new WebChromeClient()); //Blank webview to prevent null pointer plugin issues
webView.setWebViewClient(new WebViewClient()
{
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;
    }
});

String data = "<!DOCTYPE HTML>" + "<html>" + "<body style=\"margin: 0; padding: 0\">"
+ "<div id=\"player\"></div>"
+ "<script>"
+
// Load player api asynchronously.
"var tag = document.createElement('script');" + "tag.src = \"http://www.youtube.com/player_api\";"
        + "var firstScriptTag = document.getElementsByTagName('script')[0];" + "firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);"
        + "var done = false;" + "var player;" + "function onYouTubePlayerAPIReady() {" + "player = new YT.Player('player', {" + "height: '100%25',"
        + "width: '100%25'," + "videoId: '"
        + uri
        + "',"
        + "playerVars: { 'controls': "
        + controls
        + ", 'showinfo': 0, 'fs':0, 'modestbranding':1 },"
        + "events: {"
        + "'onReady': onPlayerReady," + "'onStateChange': onPlayerStateChange" + "}" + "});" + "}" + "function onPlayerReady(evt) {" +
        // Autoplay
        "evt.target.playVideo();" + "}" + "function onPlayerStateChange(evt) {" +
        "}" + "function stopVideo() {" + "player.stopVideo();" + "}" + "</script>" + "</body>" + "</html>";

webView.loadData(data, "text/html", "utf-8"); 
```

**VideoView - YouTube 数据 API** - 可以访问信息并重要地链接到视频流以在 VideoView 中使用。缺点是免费 API 仅限于低质量 3GP 视频，而不是 MP4（高质量/高清）流。- [https://developers.google.com/youtube/getting_started#data_api](https://developers.google.com/youtube/getting_started#data_api)

**Intent - 启动 YouTube** - 打开包含您要播放的视频的 YouTube 应用程序。缺点是打开了另一个应用程序，因此没有嵌入到您的应用程序中，并且某些设备没有安装 YouTube。

```
if (AppChecker.isAppInstalled("com.google.android.youtube", this) == true)
{
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:" + uri));
    startActivity(intent);
}
else
{
    //Show youtube not installed
}

//Code to check if YouTube is installed.

public class AppChecker
{
    public static boolean isAppInstalled(String uri, Activity activity)
    {
        PackageManager pm = activity.getApplicationContext().getPackageManager();
        boolean app_installed = false;
        try
        {
            pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
            app_installed = true;
        }
        catch (PackageManager.NameNotFoundException e)
        {
            app_installed = false;
        }
        return app_installed;
    }
} 
```

# javascript - 没有 setTimeout，css 转换将无法运行

> ID：12001314
> 
> 赞同：3
> 
> 时间：2012-08-17T07:09:28.580
> 
> 标签：javascript, html, css, mobile-safari, sencha-touch-2

我正在为 iPhone 创建一个 HTML5 应用程序，以使用 Sencha Touch 2 在 UIWebview 中运行。

我创建了几种方法来帮助自己制作 CSS 动画。其中一个确实为我在 Y 轴上平移。我在我的 CSS 中设置了诸如**-webkit-backface-visibility 之**类的东西来帮助平滑动画。我试过**webkit perspective**和**webkit preserve-3d**，但它们似乎没有帮助。

无论如何，我已经让动画达到了非常流畅的程度。问题是，如果我同时翻译一大组元素，其中一个不会翻译。

假设我正在向上翻译 A、B、C、D、E 和 F。F 将直接跳到最后——没有翻译。几乎就像**-webkit-transform在****-webkit-transition-duration**之前设置一样，这不是我的代码中发生的事情。此外，A、B、C、D 和 E 动画完美。

我什至不确定这是否是我为一大群元素制作动画时所独有的，但这似乎就是现在发生的情况。如果它发生在 F 身上，它总是会发生在 F 身上——所以它至少在这个意义上是一致的。

我什至尝试通过动态创建一个具有等于变换和持续时间的新类样式的元素，将其嵌入到 DOM 中，然后将元素的类设置为样式的类来修复它。我遇到了同样的问题。

**问题是，如果我将Animations.translateY**的最后一行嵌入到setTimeout 函数中，即使延迟 1 毫秒，一切都将始终具有动画效果。然而，这会导致屏幕在大约 33% 的时间里闪烁，我猜这是因为 setTimeouts 太多？

至于浏览器的一致性，我发现我的 PC 上的 chrome 和 iPhone 设备上的 UIWebview 都缺少动画（没有 setTimeout）。我只在 iPhone 设备上看到闪烁（带有 setTimeout）。

```
Animations.translateY = function(element, measurement, duration, callback, easing)
{
    Animations.setAnimationCallback(element,callback)

    var css = "translate3d(0,"+measurement+",0)"; 
duration = parseFloat(duration);
element.style['-webkit-transition-duration'] = duration + 's';
    element.style['-webkit-transform'] = css
} 
```

动画回调代码..我觉得这无关紧要，因为回调实际上从未触发（取0的动画不会触发回调）

```
Animations.setAnimationCallback = function(element, callback)
{
    //set callback handler
    element.addEventListener('webkitTransitionEnd', 
            function(){
                //set animation duration back to 0
                this.style['-webkit-transition-duration'] = "0s";
                if(callback != null)
                {
                    callback();
                }
                this.removeEventListener('webkitTransitionEnd', arguments.callee, null);
            });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T07:49:05.360

它似乎在这个工作：http: [//jsfiddle.net/cuzzea/9WGGf/](http://jsfiddle.net/cuzzea/9WGGf/)我刚刚改变了你的功能：

```
 "translate3d(0,"+measurement+",0)" 
```

至

```
 "translate3d(0,"+measurement+"px,0)" 
```

没有测量（“px”）它不起作用。

# cakephp - 如何使用 CakePHP 1.3 发送带附件的电子邮件？

> ID：12001319
> 
> 赞同：0
> 
> 时间：2012-08-17T07:09:42.150
> 
> 标签：cakephp, cakephp-1.3

我正在努力发送带有附件的电子邮件。我正在使用 php 默认配置来发送电子邮件，但使用的是 CakePHP 框架。

```
$fromEmail = $from_name." <".$from_email.">";
$this->Email->from = $fromEmail;
$this->Email->to = trim($email);
$this->Email->subject = $subjects[$this->params['action']];
$this->Email->sendAs = 'text';
$this->Email->template = $this->params['action'];
print_r($attachments); exit; // Gave me an empty Array ( )
$this->Email->attachments = $attachments;

$attachments = array( );
            if ( ! empty($this->data['Submit']['files'])) {
                $attach_files = $this->Document->DocumentDocument->find('all', array(
                    'conditions' => array(
                        'MailDocument.Mail_id' => $this->data['Submit']['prop_id'],
                        'MailDocument.id' => $this->data['Submit']['files'],
                    ),
                ));
                $attachments = Set::combine($attach_files, '/PropertyDocument/file', '/PropertyDocument/file_path');
            } 
```

我知道我们必须在 cakePHP 中定义文件路径。

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:14:39.267

您设置一个数组，其中包含要附加到组件的附件属性的文件的路径。

```
$this->Email->attachments = array(
    TMP . 'att.doc',
    'att2.doc' => TMP . 'some-name'
); 
```

第一个文件`att.doc`将以相同的文件名附加。对于第二个文件，我们指定一个别名`att2.doc`将用于附加而不是它的实际文件名`some-name`。

# android - 每次入口更改后延迟方法

> ID：12001326
> 
> 赞同：0
> 
> 时间：2012-08-17T07:10:01.440
> 
> 标签：android, postdelayed

我必须每秒更改 ttyS1 端口的波特率。所以我需要以 9600 波特唤醒远程机器，然后以 19200 波特与它通信。但是唤醒信号和实际数据通信之间存在时间限制。我使用 Handler&Thread 这个技巧。

我做到了，似乎对 Handler&Thread 没问题。我将每个入口的后延迟切换为 1 毫秒和 500 毫秒。但效果不好。有时 1 毫秒的任务几乎需要 10-15 毫秒。

我还注意到，当我通过一些 UI 更新添加“runOnUiThread”时，结果会变得最差，比如 30 毫秒。

注意：我需要每次都发送唤醒信号，而不仅仅是一次。

任何想法？

```
public void serial_query(){
    try {
        Runnable cookimageupdate = new Runnable(){
            public void run(){
                            try {
                                if (mOutputStream != null) {
                                    mSerialPort.close();

                                    if (mLAP==0) //First LAP is used to HOLTEK Wake-Up.  Second one is real data.
                                            {mLAP=1; mSerialPort=new SerialPort(new File("/dev/ttyS1"), 9600, 0); mBufferbuf = (byte)0x00; mOutputStream.write(mBufferbuf);}
                                    else    {mLAP=0; mSerialPort=new SerialPort(new File("/dev/ttyS1"), 19200, 0); mOutputStream.write(mBuffer);}

                                } else {
                                        return;
                                }
                        } catch (IOException e) {
                                e.printStackTrace();
                                return;
                        }
                            try{
                                runOnUiThread(new Runnable() {
                                       public void run() {

                                               //meat_temp.setText(_meatprobe_temp.toString());
                                               if (_pt1000_status==1) {pt_status.setText("   PT1000 open-circuit");}
                                               else if (_pt1000_status==2){pt_status.setText("   PT1000 short-circuit");}
                                               else if (_pt1000_status==0){pt_status.setText("   -");}
                                       }
                               });

                               }
                            catch (Exception e)
                            {
                               e.getLocalizedMessage();
                            }

                         if (mLAP==1) 
                                {handler_serial.postDelayed(this, 1);}
                        else    {handler_serial.postDelayed(this, 500);}
            }
        };
        handler_serial.postDelayed(cookimageupdate, 50);    //start with 50mSec. delay
    }
    catch(Exception e){
        e.printStackTrace();
        return;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:16:29.017

1 毫秒的时间延迟太短，无法发布延迟的可运行文件。大多数处理程序需要更多时间来处理您的消息。

对于如此低的延迟，您最好使用

```
Thread.sleep(). 
```

# javadoc - OrmLite 在没有结果的情况下不会在刷新时抛出异常

> ID：12001334
> 
> 赞同：0
> 
> 时间：2012-08-17T07:10:49.193
> 
> 标签：javadoc, dao, ormlite, sqlexception

方法中 Dao refresh() 的 Javadoc 指出：

> 抛出：SQLException - 如果出现任何 SQL 问题，或者如果在表中找不到数据项，或者如果找到超过 1 个具有数据 ID 的项。

然而，类*com.j256.ormlite.stmt.mapped.MappedRefresh*有另一个 Javadoc 定义，并一直返回结果代码以进行刷新并返回给用户。

```
/**
 * Execute our refresh query statement and then update all of the fields in data with the fields from the result.
 * 
 * @return 1 if we found the object in the table by id or 0 if not.
 */
public int executeRefresh(DatabaseConnection databaseConnection, T data, ObjectCache objectCache)
        throws SQLException {
    @SuppressWarnings("unchecked")
    ID id = (ID) idField.extractJavaFieldValue(data);
    // we don't care about the cache here
    T result = super.execute(databaseConnection, id, null);
    if (result == null) {
        return 0;
    }
    // copy each field from the result into the passed in object
    for (FieldType fieldType : resultsFieldTypes) {
        if (fieldType != idField) {
            fieldType.assignField(data, fieldType.extractJavaFieldValue(result), false, objectCache);
        }
    }
    return 1;
} 
```

这是一个错误还是只是 Dao.refresh 的 Javadoc 错误？

我在看 OrmLite 4.41。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:10:16.353

考虑到它仅供开发人员使用，内部方法通常没有完美的 Javadocs。此外，我倾向于不记录抛出的每个异常。

在这种情况下，`MappedRefresh.executeRefresh(...)`方法文档看起来相当不错，只是它没有记录异常。如果您查看`super.execute(...)`调用 的行`MappedQueryForId.execute(...)`，您可以看到它具有以下测试/抛出：

```
} else if (result == DatabaseConnection.MORE_THAN_ONE) {
    logger.error("{} using '{}' and {} args, got >1 results", label, statement,
        args.length);
    logArgs(args);
    throw new SQLException(label + " got more than 1 result: " + statement);
} 
```

`fieldType.assignField(...)`和其他方法也可以抛出`SQLException`各种数据或数据库问题。

所以`Dao.refresh(...)`javadocs是正确的。javadocs 也是正确的`MappedRefresh.executeRefresh(...)`，但缺少有关异常的详细信息。

# ios - CCScene标签检查中的循环CCSprites？

> ID：12001335
> 
> 赞同：0
> 
> 时间：2012-08-17T07:10:50.407
> 
> 标签：ios, for-loop, cocos2d-iphone, ccsprite

我正在尝试在 Cocos2D 应用程序中组合一个 for 循环，该循环将遍历`CCSprite`我的场景中的所有 's，以检查带有让我们说 2 的标签的精灵。

目前我一直在尝试这样做，但没有任何成功，甚至不知道从哪里开始，因为我不是 Cocos2D 中 for 循环的专家，因为我不太熟悉它的 API。

我需要在 for 循环中有一个 if 吗？这是最好的做法吗？我什至应该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:17:55.573

```
CCArray *arr = [self children];

for(CCSprite *sprite in arr)
{
    if(2 == sprite.tag)
    {
        //do what you want
    }
} 
```

# java - 使用工作流引擎、状态机引擎还是自己滚动？

> ID：12001337
> 
> 赞同：16
> 
> 时间：2012-08-17T07:11:10.637
> 
> 标签：java, grails, drools, jbpm, activiti

我很困惑。我正在为我的公司开发一个基于 grails 的内部工具。此工具中的一个组件是一个简单的问题跟踪器（Helpdesk 功能）。我有诸如问题、问题和新功能之类的域对象。这些域类中的每一个都有不同的工作流。

我最初的想法是在域对象中滚动我自己的状态机功能。然后我搜索了状态机引擎和工作流引擎。现在我迷路了。

我想评论一下其他开发人员是如何解决这个问题的。你使用 Drools、Jbpm、Activiti 吗？还是一些更简单的状态机引擎？

我一直在阅读 Drools，Jbpm 的一些文档。他们看起来很好。但似乎我只需要这些库提供的一小部分功能。

我为此使用 Grails，但它当然也很容易使用 Java 库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T07:45:31.413

工作流引擎的主要价值在于它可以通过一些工作流定义 DSL 来定制流。如果您不需要允许用户定义他们自己的任意工作流程，那么您最好只构建自己的工作流程。

此外，工作流引擎通常使您能够定义运行时间很长的业务事务和规则。例如，您可以有一个授权采购订单的工作流程，其中第一步是输入一些关于需要购买什么的信息，然后如果购买价格低于 100 美元，那么您就有相应的规则了，如果是100 美元到 2000 美元之间的直线经理可以，如果更多，则将其发送给其他人以供批准……等等。随着金额的增加或公司的业务政策，这些类型的业务规则多年来往往会发生变化改变。因此，在这些场景中使用工作流引擎是有意义的。可以从工作流引擎中受益的复杂业务交易的其他很好的例子是提出保险索赔，授权贷款或抵押，

规则引擎非常适合从应用程序中提取复杂但不断变化的规则。假设您是一家在线零售商，向美国、加拿大、英国、德国和法国的客户发货。您需要对您在网上商店销售的产品征税，但计算税费的规则因国家/地区和国家/地区的省而异。还有一些东西在一个省免税，在其他省不免税。规则引擎非常适合这些类型的复杂业务规则，只要政府改变其税收政策，这些规则就会发生变化。规则引擎可以给你一个正确的答案，你只需要去规则引擎说我想运行规则#10，这里是规则#10 x,y,z 的输入，你会得到一个答案。

规则引擎和工作流引擎之间的主要区别在于，规则引擎不跟踪事务的状态，它应该是无状态的，只处理您提供的输入。工作流引擎是有状态的，它必须知道工作流的当前状态，并且必须将该状态保存到数据库中。工作流引擎还等待来自外部资源（例如人员或系统）的输入。

根据您对应用程序的描述，我只想编写一些常规类来计算工单的下一个状态，并确保该类有据可查并且易于在几年内更新。我认为规则引擎和工作流引擎对于您的情况来说太过分了，您设置和使用它们所花费的时间比您在 groovy 中编写代码所花费的时间要长得多。如果随着时间的推移你发现你需要规则引擎和工作流引擎的复杂性，我会付出当时而不是现在的代价，保持简单永远是最好的选择。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-21T09:35:54.223

我完全同意上述 AMS 的回答，而且我想补充的另一件事是对于大多数情况，使用工作流/规则引擎是过度杀伤和不必要的。**KISS（Keep It Simple and Stupid）永远是最好的选择**。奥卡姆剃刀也**说“不应该不必要地增加实体”**

根据我在阿里巴巴的工作经验，**大多数配备工作流/规则引擎的应用程序都将维护变成了噩梦**，如果您使用简化的impl而不是盲目地选择工作流/规则引擎，那么以后来项目的人会很感激您。

那么，是否有指导何时使用工作流的指南？坦率地说，我不知道，但我知道，当业务逻辑处于流程中时，我们绝对不应该使用工作流。因为如果您愿意，每个业务逻辑都可以在流程图中呈现。

**最后，我去年做的最正确的事情之一是重新设计了一个应用程序，用 groovy 脚本替换 Drools，这使得整个系统更加直接、简单和快速。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-28T21:44:00.710

“状态机”是常见的[设计模式](https://en.wikipedia.org/wiki/State_pattern)，那么 drools 究竟给了你什么？我个人很看重它的“查询语言”，这就是它发光的原因。您实际上有类似“从堆中查询对象的 SQL”之类的东西。就像 SQL 为您提供“声明式”编程方式一样，当块描述何时以声明方式开始状态转换时，流口水。Drools 被设计为[默认](https://stackoverflow.com/a/44710121/448078)状态下是有状态的，并且状态是插入到 drools 会话中的所有事实（POJO）。

让我向您推荐一个简单的用例。您必须为移动电话公司编写应用程序来管理电话：
*如果呼叫者 1 正在呼叫被呼叫者 2，并且他当时并不“忙”，请连接它们。
如果被叫忙，请继续呼叫 7 秒，如果被叫在此期间关闭原来的呼叫，则立即接通。
如果被呼叫者在 7 秒内没有断开连接，则使用消息“被呼叫者忙”挂断呼叫者。*

简单的三重 if 语句业务方法很快就变成了相当复杂且容易出错的技术任务。我想象背景[Timer](https://docs.oracle.com/javase/7/docs/api/java/util/Timer.html) s' 我在 5 到 10 年前或更新的时候见过很多，比如[ScheduledThreadPoolExecutor](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)。如果在预定延迟期间状态发生变化怎么办？你还会等到最后重新计算条件吗？如果这种情况在您的应用程序中相对频繁或时间相对较长，您会将“上下文”保留在内存中吗？您需要跟踪期货并取消它们或使用一些[BlockingQueue](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html). 对于这种情况，需要为每个人维护队列，因为每个人都可能被某人呼叫。传统的 OOP 说“您应该将行为附加到您的域实体”。使用这种方法，即使您会使用一些模式来简化（封装）复杂性，您的业务实体也会开始使用相当复杂的技术内容来混乱您的“状态机”开始在多个组件之间传播，如果您会更糟使用“分层样式”，因为您将开始为状态内容生成数据结构，例如`Map<Callee, BlockingQueue<Caller>>`. 第二天你的客户来找你说，'嘿，我有另一个简单的电话用例给你'。

Drools “自然”地解决了这些问题，因为它使用了完全不同的方法。它跟踪工作内存中的所有对象（它跟踪规则条件），当时间到来时，drools 只能说出您的规则是否有资格执行（rete algorithm back to 1979）。如果状态发生变化，drools 会以有效的方式重新评估每个规则的条件，并从“议程”（执行队列）中放置或删除相应的规则。您插入“工作记忆”的所有对象都形成了任何规则都可以中继的“状态”。[您可以在此处](https://github.com/droolsassert/droolsassert/wiki/Complex-event-processing)找到上述用例的一些图表和测试以及实际的 drools 规则实现

为您的任务使用正确的工具。如果您需要对内部带有 3-5 个字段的 State 对象的实体集合进行循环，请不要在标题中添加“状态机”。如果您确实面临诸如“持续行为变化”或系统中事件之间复杂的因果依赖关系之类的问题，那么 drools 是一个很好的并且经过时间证明的开源[rete 算法](https://en.wikipedia.org/wiki/Rete_algorithm)实现。不要试图使用广告中的所有内容，深入了解细节，了解适合您的需求。

# radio-button - 在电晕中实现单选按钮和复选框

> ID：12001338
> 
> 赞同：0
> 
> 时间：2012-08-17T07:11:12.457
> 
> 标签：radio-button, coronasdk

我们可以在电晕中实现复选框、单选按钮或任何其他按钮吗？如果可以，如何实现？我有一个第三方工具[http://x-pressive.com/WidgetCandy_Corona/media.html](http://x-pressive.com/WidgetCandy_Corona/media.html) ，它具有实现功能的这些功能，但它不是免费的，无法测试？基本上我想创建一个可以使用这些功能的业务应用程序。有人可以告诉我如何实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:08:09.703

我不认为你可以在电晕中做到这一点。他们有一些小部件 API，您可以在示例代码 > 界面 > 小部件演示中找到。但不包括复选框。

我是我的应用程序，我自己构建了这些复选框。我必须为库存图片网站上的这些按钮或复选框的每张图片支付 20 美元。在您的情况下，如果您希望它看起来不错并且您不擅长插画家或 Photoshop，widgetCandy 可能是您的最佳选择。

我为 x-pressive 的 effectCandy 和 TextCandy 付费。这是值得的。这个 WidgetCandy 是他们的新产品，我还没有机会尝试，但我建议你尝试一下。

缺点是你必须学习一些新的 API 才能使用它们的功能。

# java - WebLogic 文件传输失败？java.io.IOException：无法从 InputStream 中读取“2607”字节

> ID：12001339
> 
> 赞同：2
> 
> 时间：2012-08-17T07:11:14.353
> 
> 标签：java, internet-explorer, weblogic, file-transfer

我们有一个 WebLogic 应用程序提供 PDF 文件（以及许多其他内容）。

我们有这样的问题，有时某些文件在使用 Internet Explorer 加载时似乎失败。

*   WebLogic 版本 10.3.3.0
*   到目前为止，IE 8.0 测试为阳性
*   Firefox 也存在问题
    *   可能是某些文件在 IE 中存在问题，但在 Firefox 中没有问题（不是 100% 确定）
*   使用不同计算机的某些文件（至少几次）似乎会发生
*   大多数文件工作正常
*   PDF 文件是预先生成的，可在文件系统中使用。

在这些错误中，我们得到以下堆栈跟踪：

```
####<Aug 16, 2012 10:30:26 AM EEST> <Error> <HTTP> <host-name> <Front2S> <[ACTIVE] ExecuteThread: '15' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> <> <> <1345102226691> <WL-101019> <[ServletContext@454961994[app:appname module:modulename path:/pathname spec-version:2.5]] Servlet failed with IOException
java.io.IOException: failed to read '2607' bytes from InputStream; clen: 162774 remaining: 2607 count: 1359
        at weblogic.servlet.internal.ChunkOutput.writeStream(ChunkOutput.java:417)
        at weblogic.servlet.internal.ChunkOutputWrapper.writeStream(ChunkOutputWrapper.java:178)
        at weblogic.servlet.internal.ServletOutputStreamImpl.writeStream(ServletOutputStreamImpl.java:520)
        at weblogic.servlet.internal.ServletOutputStreamImpl.writeStream(ServletOutputStreamImpl.java:508)
        at weblogic.servlet.FileServlet.sendFile(FileServlet.java:410)
        at weblogic.servlet.FileServlet.doGetHeadPost(FileServlet.java:234)
        at weblogic.servlet.FileServlet.service(FileServlet.java:173)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:821)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
        at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:27)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:344)
        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    ...
        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:356)
        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:151)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:238)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:168)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3650)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2174)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1446)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

通过一些谷歌搜索，我发现如果文件在传输过程中被修改，可能会发生这样的事情。

*   至少我们看不到这是怎么发生的（生成文件的脚本在晚上运行，而错误在白天出现）
*   对于特定文件，这也会发生多次

很久以前，我们在 WebLogic 文件元数据缓存方面遇到过类似问题，但禁用元数据缓存解决了这个问题。

```
<wls:container-descriptor>
    <wls:resource-reload-check-secs>0</wls:resource-reload-check-secs>
</wls:container-descriptor> 
```

一些想法？

兄弟，图科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T14:57:04.217

关于错误原因，您是对的。在读取文件时修改文件时会发生此问题。

您对 resource-reload-check-secs 的配置是正确的。将其保持为 0（零），以便 WLS 重新加载最新文件。

检查您是否正在使用 page-check-seconds 设置以及该设置的值是否为 0。此设置**会覆盖**resource-reload-check-secs，因此如果您的值不同于 0（零），请将其设置为 0。

总之，我的建议是在 weblogic.xml 中添加值为 0的**page-check-seconds设置，并****增加 weblogic.Chunksize**以防您有较大的请求大小。在减去任何以太网或 TCP 标头大小后，该属性的值应该是网络 MTU 的倍数。

希望以下weblogic.xml的配置对您有所帮助：

```
<jsp-descriptor>
    <page-check-seconds>0</page-check-seconds>
</jsp-descriptor>
<container-descriptor>
    <resource-reload-check-secs>0</resource-reload-check-secs>
</container-descriptor> 
```

此外请注意，有针对此问题的补丁修复。

# jquery - 使用 jQuery cookie 切换显示隐藏的链接

> ID：12001341
> 
> 赞同：0
> 
> 时间：2012-08-17T07:11:15.707
> 
> 标签：jquery

我有以下代码

```
<p class="adv-toggle-buttons">             
     <a id="button_open" href="#" style="display: none;">[+] Open advanced unit options</a>
     <a id="button_close" href="#">[-] Close advanced unit options</a>
   </p> 
```

和

```
 <div class="adv-unit-options">div elements here to be hidden/toggled</div> 
```

脚本

```
 $(document).ready(function() {

  $('#button_open').hide(); //initially we keep the open button hidden

 $('#button_close').click(function () {
  $(this).hide(); //this hides the close button as the div is now closed
  $('.adv-unit-options').slideUp('fast'); //hides the div
  $('#button_open').show(); //shows the open button
  $.cookie("openclose","closed", {expires: 1}); // sets cookie
  return false;
});

$("#button_open").click(function () {
  $(this).hide(); //hides the open button as the div is now open
  $('.adv-unit-options').slideDown('fast'); //shows the div
  $('#button_close').show(); //shows the close button
  $.cookie("openclose","open", {expires: 1}); //sets cookie
  return false;
});

 if($.cookie("openclose") == "closed") {
    $("#button_close").hide();
    $("#button_open").show();
    $('.adv-unit-options').hide();
    };
}); 
```

对于我的一生，我无法弄清楚如何反过来 - 最初我想要 [+] 打开高级单元选项（这是可见的）和具有“adv-unit-options”类的 div隐。

我正在处理的页面有一个提交按钮，所以在页面刷新/重新加载时我想记住上次选择的内容

NickP 的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:00:14.817

嘿 yoeri 我想我可能终于解决了这个问题......

```
 $(document).ready(function() {

$(".adv-unit-options").hide();
   $('a.btn-trigger').text('[+] open advance unit options');

   // if cookie exist:
  if ($.cookie('openclose') == 'open') {
    $('.adv-unit-options').show();
    $('.adv-toggle-btn').addClass('expanded');
    $('a.btn-trigger').text('[-] close advance unit options');
}

  $(".adv-toggle-btn").click(function() {
    $(this).toggleClass('expanded'); // toggle class
    if ($(this).hasClass('expanded')) { 
        $.cookie('openclose', 'open', {expires: 1} ); //create cookie if .expanded is added to button
        $('a.btn-trigger').text('[-] close advance unit options');
    }
    else {
        $.cookie('openclose', null, {expires: 1} ); // else: delete cookie
        $('a.btn-trigger').text('[+] open advance unit options');
    };
    $(this).next('.adv-unit-options').animate({
        height: 'toggle', 
        opacity: 'toggle'
        },400);
    return false
  }); 
});

   HTML
   <p class="adv-toggle-btn"><a href="#" class="btn-trigger"></a></p>
   <div class="adv-unit-options">div elements here to be hidden/toggled</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:53:05.360

[在这里提琴](http://jsfiddle.net/Yoeri/dVFaV/)

编辑：添加 Cookie 代码和指向 JQuery cookie 的链接以保持可见性状态。

Y。

# php - 使用php创建基于时间戳的渐变图

> ID：12001349
> 
> 赞同：1
> 
> 时间：2012-08-17T07:11:33.563
> 
> 标签：php, background-color

我正在尝试基于二维矩阵创建有用的图形。

用户将点击矩阵的交叉点，填写一些信息并点击提交。发生这种情况时，我会记录事件的时间戳。

我希望管理员能够以图形方式解释此信息，所以我想做的是根据单击时为矩阵的每个正方形分配 CSS 背景颜色。例如，浅蓝色表示最先点击的项目，深蓝色表示最近点击的项目。

我一直在绞尽脑汁，但对于我的一生，我想不出办法来做到这一点。问题是点击可能随时以任何顺序发生。

谁能指出我正确的方向？

![在此处输入图像描述](../Images/734c5ef5ab5cc6151f1c90e92737594a.png)

以上是我试图达到的目标，数字象征着时间戳（1 是最早的时间戳，14 是最新的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:03:50.480

CSS3 hsl 让这变得超级简单：
[http ://www.w3.org/TR/css3-color/#hsl-examples](http://www.w3.org/TR/css3-color/#hsl-examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:24:21.983

奥基多克，

我选择处理这个问题的方法是首先生成一个渐变十六进制值列表，我从这里生成了我的渐变：

[http://www.herethere.net/~samson/php/color_gradient/?cbegin=B5E1FF&cend=00092E&steps=6](http://www.herethere.net/~samson/php/color_gradient/?cbegin=B5E1FF&cend=00092E&steps=6)

然后我使用此处开发的 subval 排序函数按时间戳对数组进行排序

[http://www.firsttube.com/read/sorting-a-multi-dimensional-array-with-php/](http://www.firsttube.com/read/sorting-a-multi-dimensional-array-with-php/)

然后我根据位置分配十六进制值...

这里有一个简单的表示 =>

```
<?php
$test = array(
            array("test", 1),
            array("test2", 2),
            array("test4", 4),
            array("test5", 5),
            array("test3", 3),
            array("test6", 6)
            );

function subval_sort($a,$subkey) {
foreach($a as $k=>$v) {
    $b[$k] = strtolower($v[$subkey]);
}
asort($b);
foreach($b as $key=>$val) {
    $c[] = $a[$key];
}
return $c;
}

$test2 = subval_sort($test,'1'); 

foreach($test2 as &$t) {
if($t[1]==1){
    array_push($t, "B5E1FF");
    }
elseif($t[1]==2){$t[2]="96BDDC";}
elseif($t[1]==3){$t[2]="7899B9";}
elseif($t[1]==4){$t[2]="5A7596";}
elseif($t[1]==5){$t[2]="3C5173";}
elseif($t[1]==6){$t[2]="1E2C50";}
}

echo "<pre>";
print_r($test2);
echo"</pre>"; 

?> 
```

任何人都可以看到这有什么可怕的错误吗？

# generics - 自由箭头的有用操作

> ID：12001350
> 
> 赞同：34
> 
> 时间：2012-08-17T07:11:37.260
> 
> 标签：generics, haskell, arrows

我们知道免费的 monad 很有用，像[Operational](http://hackage.haskell.org/package/operational/)这样的包通过只关心特定于应用程序的效果而不是 monadic 结构本身来轻松定义新的 monad。

我们可以很容易地定义“自由箭头”，类似于定义自由单子的方式：

```
{-# LANGUAGE GADTs #-}
module FreeA
       ( FreeA, effect
       ) where

import Prelude hiding ((.), id)
import Control.Category
import Control.Arrow
import Control.Applicative
import Data.Monoid

data FreeA eff a b where
    Pure :: (a -> b) -> FreeA eff a b
    Effect :: eff a b -> FreeA eff a b
    Seq :: FreeA eff a b -> FreeA eff b c -> FreeA eff a c
    Par :: FreeA eff a₁ b₁ -> FreeA eff a₂ b₂ -> FreeA eff (a₁, a₂) (b₁, b₂)

effect :: eff a b -> FreeA eff a b
effect = Effect

instance Category (FreeA eff) where
    id = Pure id
    (.) = flip Seq

instance Arrow (FreeA eff) where
    arr = Pure
    first f = Par f id
    second f = Par id f
    (***) = Par 
```

我的问题是，对自由箭头最有用的通用操作是什么？对于我的特定应用程序，我需要这两种情况的特殊情况：

```
{-# LANGUAGE Rank2Types #-}
{-# LANGUAGE ScopedTypeVariables #-}
analyze :: forall f eff a₀ b₀ r. (Applicative f, Monoid r)
        => (forall a b. eff a b -> f r)
        -> FreeA eff a₀ b₀ -> f r
analyze visit = go
  where
    go :: forall a b. FreeA eff a b -> f r
    go arr = case arr of
        Pure _ -> pure mempty
        Seq f₁ f₂ -> mappend <$> go f₁ <*> go f₂
        Par f₁ f₂ -> mappend <$> go f₁ <*> go f₂
        Effect eff -> visit eff

evalA :: forall eff arr a₀ b₀. (Arrow arr) => (forall a b. eff a b -> arr a b) -> FreeA eff a₀ b₀ -> arr a₀ b₀
evalA exec = go
  where
    go :: forall a b. FreeA eff a b -> arr a b
    go freeA = case freeA of
        Pure f -> arr f
        Seq f₁ f₂ -> go f₂ . go f₁
        Par f₁ f₂ -> go f₁ *** go f₂
        Effect eff -> exec eff 
```

但是对于为什么这些（而不是其他）有用的，我没有任何理论论据。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-24T22:26:35.393

一个自由函子与一个健忘函子相伴。对于附加词，您需要具有同构（自然在`x`and中`y`）：

```
(Free y :~> x) <-> (y :~> Forget x) 
```

这应该属于什么类别？健忘函子忘记了`Arrow`实例，因此它从`Arrow`实例的类别转到所有双函子的类别。而自由函子则相反，它将任何双函子变成自由`Arrow`实例。

双函子类别中的 haskell 箭头类型是：

```
type x :~> y = forall a b. x a b -> y a b 
```

实例类别中的箭头也是`Arrow`如此，但增加了`Arrow`约束。由于健忘函子只忘记约束，我们不需要在 Haskell 中表示它。这将上述同构变成了两个函数：

```
leftAdjunct :: (FreeA x :~> y) -> x :~> y
rightAdjunct :: Arrow y => (x :~> y) -> FreeA x :~> y 
```

`leftAdjunct`也应该有一个`Arrow y`约束，但事实证明它在实现中从来不需要。就更有用的方面而言，实际上有一个非常简单的实现`unit`：

```
unit :: x :~> FreeA x

leftAdjunct f = f . unit 
```

`unit`是你的`effect`，`rightAdjunct`是你的`evalA`。所以你完全有附件所需的功能！你需要证明这一点`leftAdjunct`并且`rightAdjunct`是同构的。最简单的方法是证明`rightAdjunct unit = id`，在你的情况下`evalA effect = id`，这是简单的。

怎么样`analyze`？这是`evalA`专门针对常量箭头的，结果`Monoid`约束专门针对应用类幺半群。IE

```
analyze visit = getApp . getConstArr . evalA (ConstArr . Ap . visit) 
```

和

```
newtype ConstArr m a b = ConstArr { getConstArr :: m } 
```

并`Ap`来自[减速器包](http://hackage.haskell.org/packages/archive/reducers/3.0/doc/html/Data-Semigroup-Applicative.html)。（编辑：从 GHC 8.6 开始，它也在基础中`Data.Monoid`）

*编辑：我差点忘了，FreeA 应该是高阶函子！Edit2：再想一想，也可以用`rightAdjunct`and来实现`unit`。*

```
hfmap :: (x :~> y) -> FreeA x :~> FreeA y
hfmap f = evalA (effect . f) 
```

顺便说一句：还有另一种定义自由函子的方法，我最近[在 Hackage 上放了一个包。](http://hackage.haskell.org/package/free-functors)它不支持种类`* -> * -> *`（编辑：现在支持！），但代码可以适应自由箭头：

```
newtype FreeA eff a b = FreeA { runFreeA :: forall arr. Arrow arr => (eff :~> arr) -> arr a b }
evalA f a = runFreeA a f
effect a = FreeA $ \k -> k a

instance Category (FreeA f) where
  id = FreeA $ const id
  FreeA f . FreeA g = FreeA $ \k -> f k . g k

instance Arrow (FreeA f) where
  arr f = FreeA $ const (arr f)
  first (FreeA f) = FreeA $ \k -> first (f k)
  second (FreeA f) = FreeA $ \k -> second (f k)
  FreeA f *** FreeA g = FreeA $ \k -> f k *** g k
  FreeA f &&& FreeA g = FreeA $ \k -> f k &&& g k 
```

如果您不需要自省您的`FreeA`报价，这`FreeA`可能会更快。

# image - VS2012 Metro App SplashScreen - 未通过 WACK 测试

> ID：12001351
> 
> 赞同：1
> 
> 时间：2012-08-17T07:11:42.403
> 
> 标签：image, windows-8, microsoft-metro, visual-studio-2012

完成我的 Windows 8 Metro 应用程序后，我正试图通过“Windows 应用程序认证工具包”测试来推动它。它失败了，因为我的 SplashScreen 徽标太大。我收到以下消息：

```
App resources validation
Error Found: The app resources validation test detected the following errors: 
 - Image reference "Assets\SplashScreen.png": The image "c:\MyProject\bin\Release\AppX\Assets\SplashScreen.png" failed the size restrictions of 620 X 300. 
```

但是，我已将此尺寸减小到比现在小得多（225 x 300），但仍然出现错误。此外，当我运行该应用程序时，初始屏幕显示相同的大小（但分辨率要低得多）。

谁能告诉我我需要做什么才能让程序识别出尺寸减小了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:23:35.673

启动画面应为**620** x 300 像素。打开 package.appmanifest 文件，您将在初始屏幕图像名称上看到一个红色错误标志。您可以使用透明背景来弥补为达到正确尺寸而必须包含的额外边距。

# ruby-on-rails - 在 Heroku 上设置用于暂存的机架环境

> ID：12001360
> 
> 赞同：0
> 
> 时间：2012-08-17T07:12:11.683
> 
> 标签：ruby-on-rails, heroku

如果`RACK_ENV`设置为生产，那么它工作正常。如果我们将其设置为 staging by

```
heroku config:set RACK_ENV=myapp 
```

然后我们看到缓存错误`Session::DalliStore#get: Unable to unmarshal value: undefined class/module PiFinancialPlannersFact`

我想设置`RACK_ENV=myapp`，以便可以使用 config.yml 的暂存部分，任何人都可以告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T08:14:42.663

将 .env 与 Foreman 一起使用怎么样？

`RACK_ENV=myapp`

另请参阅[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

# windows-xp - 如何以非管理员身份共享我的文件夹？

> ID：12001366
> 
> 赞同：0
> 
> 时间：2012-08-17T07:12:57.547
> 
> 标签：windows-xp

我在办公室使用的当前计算机上没有管理员角色。

我想将一个文件夹共享给 Public（给我的同事）。我怎样才能做到这一点？

我正在使用 Windows XP 操作系统。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:20:31.990

我这里没有 WinXP，但我相信即使您不是管理员也应该可以使用（尽管它可能取决于您的用户权限）：

*   创建文件夹“公共”
*   用鼠标右键*单击*它
*   选择“属性”
*   选择“分享”
*   单击“共享...”并指定详细信息

详细信息可能取决于您是否是域用户（在这种情况下，例如“每个人”并不意味着字面上的*每个人*，只是您域中的所有用户）等。

# c++ - 清理“应用程序生命周期”对象的必要性

> ID：12001367
> 
> 赞同：3
> 
> 时间：2012-08-17T07:12:59.483
> 
> 标签：c++

我们继承了大型遗留应用程序，其结构大致如下：

```
class Application
{
    Foo* m_foo;
    Bar* m_bar;
    Baz* m_baz;

public:

    Foo* getFoo() { return m_foo; }
    Bar* getBar() { return m_bar; }
    Baz* getBaz() { return m_baz; }

    void Init()
    {
        m_foo = new Foo();
        m_bar = new Bar();
        m_baz = new Baz();

        // all of them are singletons, which can call each other
        // whenever they please
        // may have internal threads, open files, acquire
        // network resources, etc.
        SomeManager.Init(this);
        SomeOtherManager.Init(this);
        AnotherManager.Init(this);
        SomeManagerWrapper.Init(this);
        ManagerWrapperHelper.Init(this);
    }

    void Work()
    {
        SomeManagerWrapperHelperWhateverController.Start();

        // it will never finish
    }

    // no destructor, no cleanup
}; 
```

曾经创建的所有管理器在整个应用程序生命周期内都将保留在那里。该应用程序没有关闭或关闭方法，管理器也没有这些方法。因此，永远不会处理复杂的相互依赖关系。

问题是：如果对象的生命周期与应用程序的生命周期紧密耦合，那么根本不进行清理是否可以接受？一旦进程结束（通过在任务管理器中结束或调用ExitProcess、Abort等特殊函数），操作系统（在我们的例子中是Windows）是否能够清理所有内容（杀死线程、关闭打开的文件句柄、套接字等）？ ETC。）？上述方法可能存在哪些问题？

或更一般的问题：对于全局对象（在 main 之外声明），析构函数是绝对必要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:17:35.697

> 根本不进行清理是公认的做法吗

这取决于你问的是谁。

> 一旦进程结束，操作系统（在我们的例子中是 Windows）是否能够清理所有内容（杀死线程、关闭打开的文件句柄、套接字等）

是的，操作系统会收回一切。它将要求内存、空闲句柄等。

> 上述方法可能存在哪些问题

可能的问题之一是，如果您使用内存泄漏检测器，它会不断显示您有泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:29:37.357

> 一旦进程结束（通过在任务管理器中结束或调用ExitProcess、Abort等特殊函数），操作系统（在我们的例子中是Windows）是否能够清理所有内容（杀死线程、关闭打开的文件句柄、套接字等）？ ETC。）？上述方法可能存在哪些问题？

只要您的对象没有初始化任何*未被*操作系统清理的资源，那么无论您是否明确清理都没有任何实际区别，因为当您的进程终止时，操作系统会为您清理。

但是，如果您的对象*正在*创建操作系统未清理的资源，那么您就会遇到问题并且需要在您的应用程序中的某处使用析构函数或其他一些明确的清理代码。

考虑其中一个对象是否在某个远程服务上创建会话，例如数据库。当然，操作系统不会神奇地知道这已经完成或者当你的进程死亡时如何清理它们，所以这些会话将保持打开状态，直到某些东西杀死它们（DBMS 本身可能，通过强制执行一些超时阈值或其他） . 如果您的应用程序是资源的小用户并且您在大型基础架构上运行，那么这可能不是问题 - 但如果您的应用程序创建并孤立了足够多的会话，那么该远程服务上的资源争用可能会开始成为问题。

> 如果对象的生命周期与应用程序的生命周期紧密耦合，那么根本不进行清理是公认的做法吗？

这是一个主观辩论的问题。我个人的偏好是包含明确的清理代码，并让我创建的每个对象都亲自负责在可行的情况下进行清理。如果应用程序生命周期对象曾经被重构，以至于它们不再存在于对象的生命周期中，我不必回过头来弄清楚是否需要添加以前忽略的清理。我想为了清理我是说我通常更倾向于[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)而不是更务实的[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:04:35.113

有时它是由规范或仅由“外围设备”的行为强加给您的。也许您的应用程序中有大量缓冲的数据应该真正刷新到磁盘，或者数据库可能会累积“半开”连接，但未明确关闭。

除此之外，正如@cnicutar 所说，这取决于你问谁。由于以下原因，我坚定地站在“不要打扰”阵营中：

1) 如果不编写不需要的额外关闭代码，就很难让应用程序正常工作。

2）你写的代码越多，bug就越多，你要做的测试就越多。您可能需要在多个操作系统版本中测试此类代码：(

3) 操作系统开发人员花费了很长时间来确保应用程序可以在需要时始终关闭（例如，通过任务管理器），而不会对系统的其余部分产生任何整体影响。如果操作系统中已经存在某些功能，为什么不利用它呢？

4) 线程带来了一个特殊的问题——它们可能处于任何状态。它们可能运行在与启动应用程序关闭的线程不同的内核上，或者可能在系统调用中被阻止。虽然操作系统很容易确保在释放任何内存、关闭句柄等之前终止所有线程，但很难从用户代码中以安全可靠的方式停止这些线程。

5) 降低性能的内存管理器不是检测泄漏的唯一方法。如果大型对象（例如网络缓冲区）被池化，则很容易判断运行时是否有任何泄漏，而无需依赖在应用程序关闭时发布泄漏报告的 3rd 方内存管理器。像 Valgrind 这样的密集型内存检查器实际上是通过影响整体时序来引起系统问题的。

6）根据经验，当用户单击“红十字”边框图标时，我为 Windows 编写的每个没有明确关闭代码的应用程序都会立即完全关闭。这包括在具有数千个连接客户端的多核机器上运行的繁忙、复杂的 IOCP 服务器。

7）假设已经完成了一个合理的测试阶段——一个包括负载/浸泡测试的阶段——不难区分一个正在泄漏的应用程序和一个选择不释放它在关闭时间使用的内存的应用程序。Colander-apps 将显示内存/句柄/随运行时间增加的任何内容。

8) 不明显的小而偶然的泄漏不值得花费大量时间。无论如何，大多数 Windows 机器每个月都会重新启动，（补丁星期二）。

9）不透明的库通常由像我这样的开发人员编写，因此无论如何都会在关闭时生成虚假的“泄漏报告”。

仅仅为了清理内存报告而设计/编写/调试/测试关闭代码是一种昂贵的奢侈品，我可以不用:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T07:19:05.993

一般来说，现代操作系统在退出时会清理所有进程资源。但在我看来，自己清理干净还是很有礼貌的。（但后来我在 Amiga 上“长大”了，你*必须*这样做。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:31:37.150

您应该为每个对象单独确定。如果对象需要在清理时采取特殊操作（例如将缓冲区刷新到磁盘），除非您明确处理它，否则不会发生这种情况。

# jquery - 如何使用 jquery 一次关闭多个弹出窗口？

> ID：12001371
> 
> 赞同：1
> 
> 时间：2012-08-17T07:13:24.867
> 
> 标签：jquery, javascript

```
<script type="text/javascript">
    $('.Ok').live('click', function () {
         $("#popUp").dialog("close");    
         $('#mydiv').html("");                           
         $.ajax({           
              url: "/HRBankInfo/_Partial",       
              type: "Get",   
              datatype: String,
              success: function (stu) {
                   $('#mydiv').append(stu);              
              }
    });
});
</script> 
```

我的 html 代码 这是我的 HTML 表单...

```
<h3>Are you sure you want to delete this Address?</h3>
    <fieldset id="_Create">
    <legend>Confirm Delete</legend>

@using (Html.BeginForm())
{
    foreach (var item in Model.classes)
    {
         <div class="display-label">Bank Description:</div>

     <span>Bank Name :</span>@Html.DisplayFor(BName => item.BName)
     <p><span>Address   :</span>@Html.DisplayFor(BAdd=>item.BAdd)</p><br />

      }

    <input type="submit" value="Yes" />
    <button class="close">No</button>

}
  </fieldset> 
```

因此是将值加载到除法的脚本

```
<script type="text/javascript">
    $(function () {
        $('form').submit(function () {
            $.ajax({

                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (result) {
                    $('.popUp').html(result);

                }
            });
            return false;
        });
    });
</script> 
```

这是弹出对话框的脚本

```
 <script type="text/javascript">
     $(function () {
         $('form').submit(function () {
 $(".popUp").dialog({
                 resizable: false,
                 modal: true
             }
             );

         });
     });
    </script>

<div class="popUp" title="Message">
</div> 
```

谢谢您的帮助

上面的代码仅适用于一个弹出窗口。如何一次关闭多个弹出窗口感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:17:05.717

您正在使用 id 选择器`#popUp`来识别您的弹出窗口，但是在 HTML 页面上应该只有一个具有给定 id 的元素 - 我假设您已经为所有弹出窗口提供了相同的 id。

尝试将 id 更改为一个类，并将您的 jQuery 选择器更改为`.popUp`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:18:19.297

尝试使用 class 而不是 id，因为 id 是唯一的，它只会关闭相应的弹出窗口。

# java - 默认允许谷歌应用引擎应用访问谷歌驱动器

> ID：12001372
> 
> 赞同：1
> 
> 时间：2012-08-17T07:13:49.600
> 
> 标签：java, google-app-engine, google-drive-api

我正在尝试从谷歌应用引擎在谷歌驱动器上保存一些报告（以 csv 格式）。如果我直接点击 URL，它就可以正常工作（在它反弹到谷歌以获得授权并单击屏幕以允许应用程序访问谷歌驱动器之后）

但是，如果我在谷歌应用引擎中初始化来自 cronjob 的请求怎么办。有没有办法让应用程序通过点击？（或者有一个永久有效的令牌？）

**注意：**应用程序和驱动器的相同谷歌帐户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T16:16:36.120

要让您的应用程序使用 cron 作业访问用户的数据，您首先需要从用户那里获得一组 OAuth 2.0 访问和刷新令牌：这应该已经由您通过“点击”实现。

获得这些凭据后，您只需将它们存储在数据存储中并在 cron 作业中检索它们以执行您的任务。

[Retrieve and Use OAuth 2.0 Credentials](https://developers.google.com/drive/credentials)展示了如何构建授权流程以及如何存储/检索 OAuth 2.0 凭据的示例。您的 cron 作业只需​​要检索那些存储的凭据并照常使用它们。

# objective-c - 使用贝塞尔路径

> ID：12001379
> 
> 赞同：1
> 
> 时间：2012-08-17T07:14:04.327
> 
> 标签：objective-c, ios, uikit

我将其定义为将度数转换为弧度

```
#define DEGREES_TO_RADIANS(degrees) ((3.14159 * degrees)/180) 
```

然后我将此代码片段添加到我的`viewDidLoad`. 我正在尝试在这里创建一个弧。

```
UIBezierPath *innerPath = [UIBezierPath bezierPathWithArcCenter:CGPointMake(150, 150) radius:75 startAngle:0 endAngle:DEGREES_TO_RADIANS(135) clockwise:YES];
    [[UIColor blackColor] setStroke];
    [[UIColor redColor] setFill];
    innerPath.lineWidth = 5;
    [innerPath fill];
    [innerPath stroke]; 
```

但是，当我在模拟器中运行我的应用程序时，弧不会出现。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:18:27.943

首先，使用`M_PI`代替 3.14159。

其次，您需要在视图的`drawRect:`方法中进行绘图。阅读有关[UIKit 绘图模型](http://developer.apple.com/library/ios/#documentation/general/conceptual/Devpedia-CocoaApp/DrawingModel.html)的更多详细信息。

# objective-c - 为什么在消息 nil 无效时在 -init 中检查 self != nil？

> ID：12001381
> 
> 赞同：6
> 
> 时间：2012-08-17T07:14:11.253
> 
> 标签：objective-c

假设我们的`-init`方法只在 上调用消息`self`，为什么通常检查`self != nil`消息`nil`是否无效？

假设我们有一个初始化器，如下所示：

```
- (id)init
{
    self = [super init];
    if (self) {
        [self doThis];
        [self setFoo:@"Bar"];
    }

    return self;
} 
```

代替检查`self`，我们可以写：

```
- (id)init
{
    self = [super init];
    [self doThis];
    [self setFoo:@"Bar"];

    return self;
} 
```

现在，如果由于某种原因`[super init]`返回`nil`，据我所知，该方法的结果将没有区别。那么为什么我们要不断地进行这种检查呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T07:22:17.750

您可以向 nil 发送消息，但不能访问 nil 的实例变量。你会得到一个`EXC_BAD_ACCESS`例外。

考虑一个具有实例变量的类：

```
@implementation MyObject {
    int instanceVariable;
}

- (id)init {
    self = [super init];
    instanceVariable = 7;
    return self;
} 
```

如果`[super init]`在这个例子中返回 nil 会发生什么？您将尝试`instanceVariable`从空指针访问它，您将得到一个异常。

即使您没有访问任何实例变量，如果您不检查`self == nil`. 您可以轻松地泄漏`malloc`分配的内存或文件句柄，或者将自己传递给一些不期望为零的方法。

其他答案声称，如果您不检查 nil，您可能会泄漏对象。例如：

```
@implementation MyObject

@synthesize someProperty; // assume it's an NSObject *

- (id)init {
    self = [super init];
    [self setSomeProperty:[[NSObject alloc] init]];
    return self;
} 
```

即使`self`是零，这也不会在 ARC 下泄漏。在手动引用计数 (MRC) 下，无论是否为 nil，此示例都会泄漏`self`，因为没有什么可以平衡来自 的 +1 保留计数`[NSObject alloc]`。

在 MRC 下执行此操作的正确方法是：

```
- (id)init {
    self = [super init];
    [self setSomeProperty:[[[NSObject alloc] init] autorelease]];
} 
```

或这个：

```
- (id)init {
    self = [super init];
    NSObject *object = [[NSObject alloc] init];
    [self setSomeProperty:object];
    [object release];
    return self;
} 
```

这些都不会泄漏，无论是否`self`为零。

如果你绕过 setter 方法，像这样，如果`self`为 nil，你就会崩溃：

```
- (id)init {
    self = [super init];
    _someProperty = [[NSObject alloc] init];
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:22:35.740

如果 [super init] 反过来返回 nil，那么您最终可能会分配更多永远不会使用的对象，因为当您返回 self 时，您将返回 nil；所以那些对象不会被释放。

# jquery - jQuery 移动脚本需要“硬”重新加载才能工作

> ID：12001382
> 
> 赞同：1
> 
> 时间：2012-08-17T07:14:15.107
> 
> 标签：jquery, ajax, mobile, reload

当我使用工具栏加载页面时，我的脚本不起作用。如果我单击工具栏中的链接，站点将打开，但列表视图保持为空。然后当我进行*硬刷新时，在像***CMD+R**这样的MacOS 上，列表视图充满了内容。我错过了什么？

```
<script>    
var items = "";
        $.post("../query.php", {action : "someaction"},
        function(data) {
            items = (jQuery.parseJSON(data));
            var $listElem = $('.mylistclass').find('ul');
            $.each(items, function(i, item) {
                $('<li />').append(
                    $('<a />').attr('data-index', i).attr('href', '#').append(
                        $('<img />').attr('src',item.url),
                        $('<h3 />').text(item.title).addClass('ui-li-heading'),
                        $('<p />').text(item.description).addClass('ui-li-desc')
                    )
                ).appendTo($listElem).trigger('create');
            });
            ($listElem).listview('refresh');
        });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T10:19:15.570

我刚刚遇到了同样的问题，这个问题的答案是解决方案：[Jquery Mobile not loading Google Map (except on refresh)](https://stackoverflow.com/questions/9221259/jquery-mobile-not-loading-google-map-except-on-refresh)。

直接复制 Clarence Liu 的回答：“如果你从另一个页面导航到这个页面，jQM 只会在你的 div[data-role="page"] 标签中拉入 JS，所以如果你的 JS 在你的标签中，那不会被拉进来，这就是造成你问题的原因。”

# php - 使用 codeigniter 计算

> ID：12001383
> 
> 赞同：0
> 
> 时间：2012-08-17T07:14:19.477
> 
> 标签：php, sql, codeigniter

我的数据库中有一个表名“工资单”，其中包含员工的薪水、奖金、加班字段。员工的工资保存在表中。我想要做的是计算奖金领域。这意味着如果员工的工资是 2000，奖金是 500，那么在“奖金”字段中，它将被保存为 2500。问题是我的代码没有显示任何错误，但数据库中的“加班”字段没有更新. 我正在使用 codigniter

我的控制器：

```
 function update_bonus(){
         $id=$this->input->post('id');
         $salary=$this->input->post('salary');
         $bonus=$this->input->post('bonus');
         $update=$salary+$bonus;
         $data['bonus']=$this->input->post('update');

         if ($this->pay->update_overtime($id,$data)==TRUE){
         $this->load->view('success');

         }
         else
                {
                $this->load->view('unsuccess');

                }
         }

    My model:

        function update_overtime($id,$data){
        $this->db->where('id', $id);
        $this->db->update('payroll', $data);
        if ($this->db->affected_rows() == '1')
        {
            return TRUE;
        }
        return FALSE;

    }
    }

The form:

echo form_open('payroll/update_bonus');?>
<p> Previous Salary was <? echo $info[0]->salary;?> .</p>
<p>
<?php echo form_hidden('id', $id, 'id="id'); ?>
</p>    
<p>
<?php echo form_hidden('id', $salary, 'id="salary'); ?>
</p> 

        <label for="bonus">Update Basic Salary <span class="required">*</span></label>
        <?php echo form_error('salary'); ?>
        <br /><input id="bonus" type="text" name="bonus"  value="<?php echo set_value('bonus'); ?>"  />
</p>

<p>
        <?php echo form_submit('submit', 'Submit'); ?>
</p>

<?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:29:15.300

您将变量和表单元素名称混淆了-

在你看来——你有这些`hidden`元素

```
<?php echo form_hidden('id', $id, 'id="id'); ?>
</p>    
<p>
<?php echo form_hidden('id', $salary, 'id="salary'); ?>
</p> 
```

我猜你想让他们成为——

```
<?php echo form_hidden('id', $id, 'id="id'); ?>
</p>    
<p>
<?php echo form_hidden('salary', $salary, 'id="salary'); ?>
</p> 
```

在你的`controller` `update_bonus()`功能

```
$id=$this->input->post('id');
         $salary=$this->input->post('salary');
         $bonus=$this->input->post('bonus');
         $update=$salary+$bonus;
         $data['bonus']=$this->input->post('update'); 
```

您正在尝试使用从未在您的视图文件中设置的帖子数据中的“更新”值。

我猜你想要`$update=$salary+$bonus; $data['bonus']=$update;`//我假设`bonus`是一个数据库表列名，这是你想要更新的唯一列`model`

# html - 如何在 Gmail 中设置电子邮件地址链接的样式？

> ID：12001385
> 
> 赞同：0
> 
> 时间：2012-08-17T07:14:31.797
> 
> 标签：html, css, gmail

我正在制作一个 HTML 模板来向用户​​发送电子邮件。我需要在给定颜色的消息中创建所有链接。对于标签 <a>，可以使用以下变体：

```
<a href="..." style="color:#009900">...</a> 
```

问题是我的模板包含纯文本形式的电子邮件地址。当邮件在 Gmail 中打开时，它会从中创建一个链接。如何更改该链接的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:15:52.780

使用属性选择器：

```
a[href^="mailto"] 
{ 
    color:#009900
} 
```

这将选择任何属于 mailtos 的锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:18:27.140

使用带有属性 href 的标签在其中包含 mailto:

```
a[href^="mailto:"] {   //style your link hear  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-31T18:22:33.933

`span`例如，使用标签单独分隔电子邮件地址的每个部分，如果你有`example@sitename.com`它将如下所示

```
<span>example</span>@<span>sitename</span>.<span>com</span> 
```

# python - 从模块类中查找 python 模块源文件的位置

> ID：12001399
> 
> 赞同：0
> 
> 时间：2012-08-17T07:15:43.057
> 
> 标签：python, class, module

虽然根据查找python模块的源文件有一些相关的线程，但我没有找到关于如何以最简单可靠的方式从python类中获取文件名的答案。对于位于的假设文件`/usr/local/TestLib.py`：

```
class MyTest(object):
    def __init__(self):
        myLocation = XXX 
```

我希望变量`myLocation`包含字符串`/usr/local/TestLib.py`。`__file__`在我的课堂上似乎不起作用。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:35:27.813

`__file__`应该在这样的课堂上工作。也许您认为它不起作用，因为它不一定会返回完整路径。`__file__`就它如何处理路径而言，它有点时髦，所以如果你想要完整的路径，你可能必须像这个例子一样在路径的第一部分添加。（有关这方面的详细信息，请查看此问题：[Python __file__ attribute absolute or relative?。](https://stackoverflow.com/questions/7116889/python-file-attribute-absolute-or-relative)）

```
import os

class Foo:
    def __init__(self):
        self.myLoc = os.path.abspath(__file__)

f = Foo()
print f.myLoc 
```

# c++ - 在 apache 上运行 C++ cgi 程序？

> ID：12001400
> 
> 赞同：1
> 
> 时间：2012-08-17T07:15:47.477
> 
> 标签：c++, apache, cgi

我正在测试服务器上尝试编译的 cgi，但我似乎无法让它们运行。

我将此添加到apache；

```
 <Directory /var/www/app>
            AllowOverride All 
            Options +ExecCGI 
            AddHandler cgi-script .cgi
            </Directory> 
```

甚至尝试过这个：

```
 <Files "/var/www/app/monkey.cgi">
            Options +ExecCGI 
            </Files> 
```

但是每次运行时，apache都会告诉我

```
 Fri Aug 17 01:55:07 2012] [error] [client 192.168.1.66] Options ExecCGI is off in this directory: /var/www/app/monkey.cgi 
```

我以前做过这个，它的工作，但它已经有一段时间了。在你的头顶上，你能告诉我我是否犯了任何明显的错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:49:55.110

您的目录中是否有任何 .htaccess 文件？并检查整个conf，看看你是否没有在某个地方搞砸它。

附加信息：Apache 确实在某些版本上添加了一些有关 CGI 脚本的默认值，或者分销商添加了这些默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-08T06:28:00.740

您是否尝试过重新加载 Apache 配置？以下命令行通常有效：

```
sudo service apache2 force-reload 
```

否则可能必须根据您的 Linux 发行版引用其他命令行命令，如下面的链接所示，该链接更具体地介绍了它：http: [//www.microhowto.info/howto/cause_a_system_service_to_reload_its_configuration.html](http://www.microhowto.info/howto/cause_a_system_service_to_reload_its_configuration.html)

# tableview - 如何使用 NSTimer 与从 NSURL 传递到 NSXMLParser 的数据在 TableView 中显示

> ID：12001402
> 
> 赞同：-1
> 
> 时间：2012-08-17T07:15:51.627
> 
> 标签：tableview, nstimer, nsxmlparser, nsurl

如何使用 NSTimer 与从 NSURL 传递到 NSXMLParser 的数据在 TableView 中显示

我有应用程序显示数据从 Web 服务器通过 PHP gen' 到 XML

在我的 xcode 中，我使用 NSURL 连接到 PHP 文件（在 Web 服务器中）并使用 NSXMLParser 读取 XML 数据将值放入数组并最终显示在 TableView

我想查看 TableView 中的数据实时更新或每 x 次更新一次

我想我可以使用 NSTimer 但我不知道如何将 NSTimer 放在 xcode 中的代码中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:54:35.757

简而言之，类似于：

```
// Schedule a timer repeating every 2 seconds
[NSTimer scheduledTimerWithTimeInterval:2.0
                                 target:self.tableView
                               selector:@selector(reloadData)
                               userInfo:nil
                                repeats:YES]; 
```

更长的版本：

您需要从计时器调用 -doParse、获取数据、进行解析并重新加载数据。

为了不阻塞主线程，你**不能**`[[NSXMLParser alloc] initWithContentsOfURL:theURL]`从主线程调用。

反而：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
      NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:theURL];
      ...
      // finish parsing
      dispatch_async(dispatch_get_main_queue(), ^{
          [tableView reloadData];
      });
}); 
```

并`-doParse`使用来自 -viewDidLoad 的 NSTimer 调用：

```
[NSTimer scheduledTimerWithTimeInterval:2.0
                                 target:self
                               selector:@selector(doParse)
                               userInfo:nil
                                repeats:YES]; 
```

进一步阅读：WWDC 2012 Session 211 - 在 iOS 上构建并发用户界面。

# c++ - cbegin/cend 背后的原因是什么？

> ID：12001410
> 
> 赞同：210
> 
> 时间：2012-08-17T07:16:32.720
> 
> 标签：c++, c++11, iterator, const-correctness, const-iterator

我想知道为什么`cbegin`并`cend`在 C++11 中引入？

`begin`在哪些情况下调用这些方法与和的 const 重载有所不同`end`？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-08-17T07:24:36.390

这很简单。假设我有一个向量：

```
std::vector<int> vec; 
```

我用一些数据填充它。然后我想得到一些迭代器。也许让他们四处走动。也许到`std::for_each`：

```
std::for_each(vec.begin(), vec.end(), SomeFunctor()); 
```

在 C++03 中，`SomeFunctor`可以自由地*修改*它获取的参数。当然，`SomeFunctor`可以通过 value 或 by 获取其参数`const&`，但无法*确保*它确实如此。并非没有做这样愚蠢的事情：

```
const std::vector<int> &vec_ref = vec;
std::for_each(vec_ref.begin(), vec_ref.end(), SomeFunctor()); 
```

现在，我们介​​绍`cbegin/cend`：

```
std::for_each(vec.cbegin(), vec.cend(), SomeFunctor()); 
```

`SomeFunctor`现在，我们有了不能修改向量元素的语法保证（当然，没有 const-cast）。我们明确地得到`const_iterator`s，因此`SomeFunctor::operator()`将被调用`const int &`。如果它的参数为`int &`，C++ 将发出编译器错误。

* * *

C++17 对这个问题有一个更优雅的解决方案：[`std::as_const`](http://en.cppreference.com/w/cpp/utility/as_const). 好吧，至少在使用 range-based 时它很优雅`for`：

```
for(auto &item : std::as_const(vec)) 
```

这只是将 a 返回`const&`到它提供的对象。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-08-17T07:27:09.240

除了 Nicol Bolas 在[他的回答](https://stackoverflow.com/a/12001519/334761)中所说的之外，请考虑新的`auto`关键字：

```
auto iterator = container.begin(); 
```

使用`auto`，无法确保`begin()`为非常量容器引用返回常量运算符。所以现在你做：

```
auto const_iterator = container.cbegin(); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-08-17T07:34:35.130

将此作为实际用例

```
void SomeClass::f(const vector<int>& a) {
  auto it = someNonConstMemberVector.begin();
  ...
  it = a.begin();
  ...
} 
```

赋值失败，因为`it`它是一个非常量迭代器。如果您最初使用 cbegin，则迭代器将具有正确的类型。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-17T07:24:47.457

来自[http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1674.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1674.pdf)：

> 这样程序员甚至可以直接从非常量容器中获取 const_iterator

他们举了这个例子

```
vector<MyType> v;

// fill v ...
typedef vector<MyType>::iterator iter;
for( iter it = v.begin(); it != v.end(); ++it ) {
    // use *it ...
} 
```

> 但是，当容器遍历仅用于检查时，通常首选的做法是使用 const_iterator 以允许编译器诊断 const 正确性违规

请注意，工作文件还提到了适配器模板，这些模板现在已经最终确定为`std::begin()`and`std::end()`并且也适用于本机数组。到目前为止，相应的`std::cbegin()`和`std::cend()`奇怪地丢失了，但它们也可能会被添加。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-06-05T20:34:34.160

只是偶然发现了这个问题......我知道它已经得到了回答，它只是一个侧面节点......

`auto const it = container.begin()`那么是不同的类型`auto it = container.cbegin()`

的区别`int[5]`（使用指针，我知道它没有 begin 方法，但很好地显示了区别......但可以在 c++14 中为`std::cbegin()`and工作`std::cend()`，这基本上是当它在这里时应该使用的）......

```
int numbers = array[7];
const auto it = begin(numbers); // type is int* const -> pointer is const
auto it = cbegin(numbers);      // type is int const* -> value is const 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-29T11:30:12.890

`iterator`并且`const_iterator`具有继承关系，并且在与其他类型比较或分配给其他类型时发生隐式转换。

```
class T {} MyT1, MyT2, MyT3;
std::vector<T> MyVector = {MyT1, MyT2, MyT3};
for (std::vector<T>::const_iterator it=MyVector.begin(); it!=MyVector.end(); ++it)
{
    // ...
} 
```

在这种情况下使用`cbegin()`and`cend()`将提高性能。

```
for (std::vector<T>::const_iterator it=MyVector.cbegin(); it!=MyVector.cend(); ++it)
{
    // ...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-09T18:21:48.493

它很简单，cbegin 返回一个常量迭代器，其中 begin 返回一个迭代器

为了更好地理解，让我们在这里采取两种情况

场景 - 1：

```
#include <iostream>
using namespace std;
#include <vector>
int main(int argc, char const *argv[])
{
std::vector<int> v;

for (int i = 1; i < 6; ++i)
{
    /* code */
    v.push_back(i);
}

for(auto i = v.begin();i< v.end();i++){
    *i = *i + 5;
}

for (auto i = v.begin();i < v.end();i++){
    cout<<*i<<" ";
}

return 0;
} 
```

这将运行，因为这里的迭代器 i 不是常量，可以递增 5

现在让我们使用 cbegin 和 cend 将它们表示为常量迭代器场景 - 2：

```
#include <iostream>
using namespace std;
#include <vector>
int main(int argc, char const *argv[])
{
std::vector<int> v;

for (int i = 1; i < 6; ++i)
{
    /* code */
    v.push_back(i);
}

for(auto i = v.cbegin();i< v.cend();i++){
    *i = *i + 5;
}

for (auto i = v.begin();i < v.end();i++){
    cout<<*i<<" ";
}

return 0;
} 
```

这是行不通的，因为你不能使用 cbegin 和 cend 更新值，它返回常量迭代器

# windows-7 - 不小心将命令行移动到桌面，命令行无法运行

> ID：12001414
> 
> 赞同：0
> 
> 时间：2012-08-17T07:16:57.197
> 
> 标签：windows-7, command-line, directory

我想快速访问命令行，所以我只是将程序从其正常目录移动到桌面。现在，当我尝试打开另一个目录“文件夹”时，我收到以下错误消息：

```
C:\Windows\System32>cd The Folder
The system cannot find message text for message number 0x3 in the message file for System 
```

我将它移回某个目录，还是什么？...

# c++ - 在 C++ 中通过 OpenNI 显示深度和 Rgb 图像时出现异常

> ID：12001418
> 
> 赞同：1
> 
> 时间：2012-08-17T07:17:06.747
> 
> 标签：c++, kinect, openni

作为初学者，我是 openNI 和 Kinect 的新手，我尝试通过 OpenNI.org 中的教程在此链接中实现 OpenNI SimpleViewer：http: [//openni.org/docs2/Tutorial/smpl_simple_view.html](http://openni.org/docs2/Tutorial/smpl_simple_view.html)

我已经实现了本教程中描述的代码，但我仍然面临问题，因为程序抛出异常并且没有显示任何输出。

我已经链接了所有库并正确安装了 kinect。我还包含了带有 openNI 的 OpenCV 库。

这是我实现的 C++ 代码：

```
int main()
{
    rc = context.InitFromXmlFile(XML_PATH,&errors);
    if(rc == XN_STATUS_NO_NODE_PRESENT)
    {
        XnChar strError[1024];
        errors.ToString(strError,1024);
        printf("%s\n",strError);
        return(rc);
    }
    else if(rc != XN_STATUS_OK)
    {
        printf("Open failed : %s\n", xnGetStatusString(rc));
        return(rc);
    }

    rc = context.FindExistingNode(XN_NODE_TYPE_DEPTH,depth);
    if(rc != XN_STATUS_OK)
    {
        printf("No Depth Node Found. Check XML!\n");
        return -1;
    }
    depth.GetMetaData(depthMD);
    image.GetMetaData(imageMD);

    if(imageMD.FullXRes() != depthMD.FullXRes() || imageMD.FullYRes() != depthMD.FullYRes())
    {
        printf("The device depth and image resolution must be equal\n");
        return -1;
    }
    if(imageMD.PixelFormat() != XN_PIXEL_FORMAT_RGB24)
    {
        printf("The Device Image Format must be RGB24\n");
        return -1;
    }

    unsigned short textMapX = (((unsigned short)(depthMD.FullXRes() - 1)/512) + 1 * 512);
    unsigned short textMapY = (((unsigned short)(depthMD.FullYRes() - 1)/512) + 1 * 512);
    XnRGB24Pixel* pTextMap = (XnRGB24Pixel*) malloc(textMapX * textMapY * sizeof(XnRGB24Pixel));
    rc = context.WaitOneUpdateAll(depth);
    depth.GetMetaData(depthMD);
    image.GetMetaData(imageMD);
    const XnDepthPixel* pDepth = depthMD.Data();
    const XnUInt8* pImage = imageMD.Data();
    unsigned int imageScale = GL_WIN_SIZE_X/depthMD.FullXRes();

    xnOSMemSet(depthHist,0,MAX * sizeof(float));
    unsigned int numberOfPoints = 0;
    for(XnUInt y = 0; y < depthMD.YRes(); ++ y)
    {
        for(XnUInt x = 0; x < depthMD.XRes(); ++x, ++pDepth);
        {
            if(*pDepth != 0)
            {
                depthHist[*pDepth]++;
                numberOfPoints++;
            }
        }
    }
    for(int index = 1; index < MAX; index++)
    {
        depthHist[index] += depthHist[index - 1];
    }
    if(numberOfPoints)
    {
        for(int index = 1; index < MAX; index++)
        {
            depthHist[index] = (unsigned int)(256 * (1.0f - (depthHist[index]/numberOfPoints)));
        }
    }
    return 0;
} 
```

我也面临理解代码后面部分的问题。

# c - 以破折号为前缀的命令行参数有什么特别之处吗？

> ID：12001419
> 
> 赞同：4
> 
> 时间：2012-08-17T07:17:15.010
> 
> 标签：c, linux, bash, shell, unix

当我做类似的事情时：

```
./foo -uxw --bar something 
```

shell 会自动解析这些命令，还是每个程序都必须自己解析？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T07:19:06.913

每个程序都会解析它的参数。您可能需要对此进行调查[`getopt`](http://www.gnu.org/software/libc/manual/html_node/Parsing-Program-Arguments.html#Parsing-Program-Arguments)，因此答案变为：*每个程序通常都依赖于`getopt`parse arguments*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:22:59.657

不，shell 不会为您解析它。每个程序都必须自己解析它。下面的代码应该清楚地说明发生了什么。

```
#include <stdio.h>

int main(int argc, char **argv)
{
    int i;
    printf("argc: %d\n", argc);
    for (i = 0; i < argc; i++) {
        printf("argv[%d] = %s\n", i, argv[i]);
    }
    return 0;
} 
```

让我们编译这个程序。

```
susam@nifty:~$ gcc args.c -o args 
```

现在让我们运行它并查看输出：

```
.susam@nifty:~$ ./args
argc: 1
argv[0] = ./args
susam@nifty:~$ ./args foo bar
argc: 3
argv[0] = ./args
argv[1] = foo
argv[2] = bar
susam@nifty:~$ ./args -a foo --b bar
argc: 5
argv[0] = ./args
argv[1] = -a
argv[2] = foo
argv[3] = --b
argv[4] = bar 
```

shell 唯一要做的就是将您在命令行中指定的每个参数传递给您的程序。虽然它将`foo bar`作为两个单独的参数传递给您的程序，但它会将`"foo bar"`or `'foo bar`' 作为单个参数传递给您的程序。是的，所以 shell 在将参数传递给您的程序之前会对参数进行某种解析。它将带引号的字符串视为单个参数。这是一个演示：

```
susam@nifty:~$ ./args -a foo bar
argc: 4
argv[0] = ./args
argv[1] = -a
argv[2] = foo
argv[3] = bar
susam@nifty:~$ ./args -a "foo bar"
argc: 3
argv[0] = ./args
argv[1] = -a
argv[2] = foo bar
susam@nifty:~$ ./args -a 'foo bar'
argc: 3
argv[0] = ./args
argv[1] = -a
argv[2] = foo bar
susam@nifty:~$ ./args -a "foo bar" 'car tar war'
argc: 4
argv[0] = ./args
argv[1] = -a
argv[2] = foo bar
argv[3] = car tar war 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T07:18:40.423

每个程序都必须自己解析所有参数。用破折号作为前缀只是 Unix 惯例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T07:19:46.443

不，shell 不解析这些选项。每个程序都必须自己解析它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-17T07:22:50.907

shell 用空格分割命令行，所以程序接收到一个参数列表；但由程序决定它们的含义。通常使用类似的参数解析库`getopt`来提供帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T07:44:59.240

程序参数不是 shell 所关心的。

（简化的）命令行语法是：*命令选项操作数*。
选项以连字符（破折号）开头，操作数没有，选项无序，操作数有序。

虽然这只是一个惯例，而不是法律。最知名的标准通常称为 POSIX 标准，它在[这里](http://pubs.opengroup.org/onlinepubs/009604499/basedefs/xbd_chap12.html)定义了命令行。

您可能会注意到选项是以单个连字符为前缀的单个字符，您的示例显示了两个带多个字符的连字符`--bar`。这些被称为*长选项*，严格来说不是标准的一部分，尽管它们通常用于 GNU 实用程序（Linux 上的正常情况）。

如果操作数以连字符开头会发生什么？答案是大多数程序会将其视为操作数。不过有一个特殊的标记；`--`（两个连字符）标记选项列表的结尾，所以后面的只是操作数。

# c++ - 混合 C 和 C++ 代码时出现链接错误

> ID：12001423
> 
> 赞同：0
> 
> 时间：2012-08-17T07:17:35.850
> 
> 标签：c++, c, visual-studio, visual-studio-2008, extern

我有来自示例的 5 个文件 - Dec.h、Dec.cpp、decInterface.h、decInterface.cpp 和 temp.c

[如何在 c 中使用 c++ 对象？](https://stackoverflow.com/questions/11971063/how-to-use-c-objects-in-c) 和 [为面向对象的 C++ 代码开发 C 包装 API，](https://stackoverflow.com/questions/2045774/developing-c-wrapper-api-for-object-oriented-c-code) 主要在一个名为 temp.c 的文件中，该文件在接口文件的帮助下调用在 Dec.cpp 中实现的 cpp 代码。

它们都驻留在 vs2008 的一个项目中，我已将 compile as 选项设置为默认值，而不是 compile as c 或 compile as c++

我收到以下链接错误

```
 1>Compiling...
    1>decInterface.cpp
    1>Generating Code...
    1>Compiling...
    1>temp.c
    1>Generating Code...
    1>Compiling manifest to resources...
    1>Microsoft (R) Windows (R) Resource Compiler Version 6.0.5724.0
    1>Copyright (C) Microsoft Corporation.  All rights reserved.
    1>Linking...

        1>decInterface.obj : error LNK2005: "public: __thiscall Node::Node(class std::vector<float,class std::allocator<float> >)" (??0Node@@QAE@V?$vector@MV?$allocator@M@std@@@std@@@Z) already defined in Dec.obj
        1>decInterface.obj : error LNK2005: "public: __thiscall Node::Node(float,float)" (??0Node@@QAE@MM@Z) already defined in Dec.obj
        1>decInterface.obj : error LNK2005: "public: __thiscall Node::Node(class std::vector<float,class std::allocator<float> >,class std::vector<bool,class std::allocator<bool> >)" (??0Node@@QAE@V?$vector@MV?$allocator@M@std@@@std@@V?$vector@_NV?$allocator@_N@std@@@2@@Z) already defined in Dec.obj
        1>decInterface.obj : error LNK2005: "public: __thiscall reprVectorsTree::reprVectorsTree(class std::vector<class Node *,class std::allocator<class Node *> >,int)" (??0reprVectorsTree@@QAE@V?$vector@PAVNode@@V?$allocator@PAVNode@@@std@@@std@@H@Z) already defined in Dec.obj
        1>decInterface.obj : error LNK2005: "public: __thiscall reprVectorsT

ree::reprVectorsTree(float * *,int,int)" (??0reprVectorsTree@@QAE@PAPAMHH@Z) already defined in Dec.obj
    1>decInterface.obj : error LNK2005: "private: class std::vector<bool,class std::allocator<bool> > __thiscall reprVectorsTree::binaryForm(int,int)" (?binaryForm@reprVectorsTree@@AAE?AV?$vector@_NV?$allocator@_N@std@@@std@@HH@Z) already defined in Dec.obj
    1>decInterface.obj : error LNK2005: "public: class std::vector<float,class std::allocator<float> > __thiscall reprVectorsTree::decode(class std::vector<bool,class std::allocator<bool> >)" (?decode@reprVectorsTree@@QAE?AV?$vector@MV?$allocator@M@std@@@std@@V?$vector@_NV?$allocator@_N@std@@@3@@Z) already defined in Dec.obj
    1>decInterface.obj : error LNK2005: "public: float * __thiscall reprVectorsTree::decode(int *,int)" (?decode@reprVe

ctorsTree@@QAEPAMPAHH@Z) already defined in Dec.obj 
```

我应该使用什么样的 Visual Studio 项目设置？我感觉问题出在这里？要链接哪些文件？如何链接？或者默认项目设置应该有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:32:37.827

`Dec.cpp`错误消息告诉您在and中定义了几个函数`decInterface.cpp`，或者在两个源文件包含的标头中定义了几个函数。通常，您只能在程序中定义一个函数；*这是单一定义规则*的（一方面）。

如果定义在两个源文件中，则从其中一个文件中删除它们。

如果它们在标题中，那么您可以选择。您可以将定义移动到一个（并且只有一个）源文件中，只在标题中留下声明：

```
// header
class Node {
public:
    Node(std::vector<float>); // declaration
};

// source
Node::Node(std::vector<float>) {
    // definition
} 
```

或者您可以`inline`在标题中定义它们。这放宽了规则以允许多个相同的定义：

```
// header
class Node {
public:
    Node(std::vector<float>); // declaration
};

inline Node::Node(std::vector<float>) {
    // inline definition
} 
```

或者你可以在类定义中定义它们；这也使它们内联：

```
// header
class Node {
public:
    Node(std::vector<float>) {
        // inline definition
    }
}; 
```

# html - 应用底部框阴影在左右底部留下一些无阴影空间

> ID：12001425
> 
> 赞同：0
> 
> 时间：2012-08-17T07:17:50.343
> 
> 标签：html, css

我有以下标记。

```
<!DOCTYPE html>
<html lang="en">
<body>
<div id="wrapper">
<div id="container">
<div id="navigation">
</div>
</div>
</div>
</body>
</html> 
```

使用以下 CSS

```
body
{
width: 100%;
background-color: #E4E4E4;
font-size: 16px;
line-height: 19px;
font-family: Cambria, Georgia, serif;
}

div#wrapper
{
width: 960px;
margin: 0 auto;
background-image: url("nav_bg.png");
background-repeat: no-repeat;
background-position: center 219px;
}

div#container
{
width: 920px;
background-color: #F9EADE;
box-shadow: 0 0 15px 5px rgb(31, 73, 125);
margin: 0 auto;
}

div#navigation
{
height: 50px;
margin-bottom: 200px;
background-color: rgb(31, 73, 125);
box-shadow: 0px 10px 4px -4px rgba(0, 0, 0, 0.8);
} 
```

nav_bg.png 是这个

![在此处输入图像描述](../Images/29ec6c555fe740fdf026ed289c242251.png)

我在左下角和右下角得到白色的无阴影空间

![在此处输入图像描述](../Images/e4ed3c25bb55bcef27bd0d5c2fd920f5.png)

如果我将代码更改为此

```
div#navigation
{
height: 50px;
margin-bottom: 200px;
background-color: rgb(31, 73, 125);
box-shadow: 0px 10px 4px 0px rgba(0, 0, 0, 0.8);
} 
```

我在左右两侧得到了额外的阴影。

![在此处输入图像描述](../Images/a9cbc39cc3bf44bf2ebf2736617aa12b.png)

如果我从 div#navigation 中删除背景颜色和边框阴影，如下所示。

```
div#navigation
{
height: 50px;
margin-bottom: 200px;
} 
```

我明白了

![在此处输入图像描述](../Images/3e57243e04292eb08e2064c1674153e7.png)

抱歉，我之前把这个问题搞砸了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:26:47.033

你也可以让 div 稍微宽一点，这样它就可以到达两侧。如果您可以显示代码，我可以告诉您如何操作。

编辑：只需在导航的左右添加负边距并添加宽度，这样它就可以到达您需要的两侧

```
margin: 0 -20px 200px;
width: 947px; 
```

EDIT2：如果这不起作用，那么您没有显示某些内容或者您做错了。

```
body
{
width: 100%;
background-color: #E4E4E4;
font-size: 16px;
line-height: 19px;
font-family: Cambria, Georgia, serif;
}

div#wrapper
{
width: 960px;
margin: 0 auto;
background-image: url("oBecq.png");
background-repeat: no-repeat;
background-position: center 219px;
}

div#container
{
width: 920px;
background-color: #F9EADE;
box-shadow: 0 0 15px 5px rgb(31, 73, 125);
margin: 0 auto;
height: 500px;
}

div#navigation
{
height: 50px;
margin: 0 -10px 200px;
background-color: rgb(31, 73, 125);
box-shadow: 0px 10px 4px -4px rgba(0, 0, 0, 0.8);
top: 219px;
position: relative;
width: 950px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:22:19.627

这是因为您将阴影扩展属性设置为 -4px（第四个数字）

将其设置为 0，它将按您的意愿显示。

```
box-shadow: 0 10px 2px 0px rgba(0, 0, 0, 0.8); 
```

[http://jsfiddle.net/Kyle_Sevenoaks/evd4K/](http://jsfiddle.net/Kyle_Sevenoaks/evd4K/)

# php - 模块编辑问题

> ID：12001432
> 
> 赞同：0
> 
> 时间：2012-08-17T07:18:26.197
> 
> 标签：php, joomla, joomla1.5, joomla2.5

在 Joomla 网站中，我可以直接编辑 modules 文件夹的模板文件夹中的 default.php 文件吗？或者那些是在创建网站时自动生成的？任何指导表示赞赏。谢谢你。

请向我提供有关 Joomla 的具体图像和故事，而不是重复文件所说的内容。

[**更新**]只要它有效，我自己编辑所有。哦，是的，太好了，我的第一个障碍正在被澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:58:13.907

如果您想对放置在 modules/mod_abc/tmpl 中的文件进行一些更改（将 mod_abc 替换为您的模块名称），您需要将该文件复制到 joomla-root/templates/[your-current-template]/html/mod_abc/

然后你可以在这里编辑你的文件。这是覆盖模块模板的标准 joomla 方式。

# c++ - 哪些适用于 Windows 的 C++11 编译器支持“is_nothrow_move_constructible”等新类型特征？

> ID：12001436
> 
> 赞同：1
> 
> 时间：2012-08-17T07:18:33.657
> 
> 标签：c++, windows, c++11, typetraits

是否有任何适用于 Windows 的 C++11 编译器支持新的 C++11 类型特征，例如`is_nothrow_move_constructible`？

我试图编写一个支持它的容器，却发现我的编译器（VC++ 2010，TDM MinGW32 GCC 4.6）都不支持它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:40:04.473

对于 mingw，我会[在这里推荐 STL 的发行版](http://nuwen.net/mingw.html)（gcc 4.7.1）。它还带有 boost 1.50。

还有 mingw-w64（原始 mingw 的一个分支），我[在这里推荐 rubenvb 的个人构建](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/rubenvb/)。`Toolchains targetting Win32`如果您想要 32 位版本，请转到。他也有自己的 clang 版本（windows 上的 clang 支持仍然有很多错误。x64 版本会报告链接器错误，因此只能用于更好的诊断等）

STL 的发行版非常好，但是我发现 mingw-w64 对 win32 api 有更好的支持（我在原始 mingw 上遇到了无数问题）和 c++11 头文件，例如`<atomic>`原始 mingw 中不支持的头文件. mingw-w64 开发得更加积极（可以创建 32 位和 64 位二进制文​​件），并且包括对 windows vista 及更高版本的更新功能的支持。

有关 mingw-w64 命名约定的更多信息，[请参见此处](http://sourceforge.net/apps/trac/mingw-w64/wiki/download%20filename%20structure)和[常见问题解答](http://sourceforge.net/apps/trac/mingw-w64/wiki/FAQ)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:26:13.330

根据参考资料，Visual Studio C++ 2012 Beta 支持很多 C++11 类型特征。查看[Visual Studio C++ 2012 文档](http://msdn.microsoft.com/en-US/library/bb982077)但是，我找不到`is_nothrow_move_constructible`那里的文档。不过好像是支持的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T07:43:34.263

GCC 4.7 确实支持 is_nothrow_move_constructible 你可以通过安装 [MinGW Distro](http://nuwen.net/mingw.html)在 Windows 上试用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:46:23.493

不是答案，但我只是从查看 GCC 4.7`type_traits`标头的源代码中学到了一些东西：

你甚至*不需要* `is_nothrow_xyz`放在首位！

运算符会`noexcept`告诉您是否抛出异常。
因此，对于这些*特定*的类型特征，您可以改用它。

（或者至少在理论上。您的编译器是否实现它是另一回事。）

# c# - 在 dll 之间传递 Web 引用对象

> ID：12001441
> 
> 赞同：0
> 
> 时间：2012-08-17T07:18:44.660
> 
> 标签：c#, web-services, web-reference

我有一个带有两个 dll 的项目（我将它们命名为 A 和 B）。
在第一个 dll 中，我想将 Web 引用的对象传递给我的另一个 dll。
这两个 dll 使用对象的属性，因此我在两个 dll 中都添加了对服务的 Web 引用。

但是当我想传递这个对象时，我得到一个错误：

```
The best overloaded method match for 'method in dll B (B.com.test.services.Task)' has some invalid arguments. 
```

所以我的 dll A 期望它是一个类型的对象，`A.com.test.services.Task`而它得到一个类型的对象`B.com.test.services.Task`。

我该如何解决？

一些代码：

**DLL A：**

```
using A.com.test.services
public string BuildDetail(Task task, bool TaskExecutionState, bool TaskComment) 
{
    DetailScreen detail = new DetailScreen(task);   //error is here.
    return detail.Layout;
} 
```

**DLL B：**

```
using B.com.test.services 
public DetailScreen(Task task)
{
    //some code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:38:12.473

问题是创建 Web 引用意味着为每种类型的引用服务创建代理类。

假设您有您的 dll，A.dll，并且您创建了一个对类型为 的服务的 Web 引用`Task`。在 A 内部，一个代理类型，我们称之为`A.Task`将被创建。type`Task`和`A.Task`是两种不同的类型，`Task`存在于服务端，`A.Task`存在于客户端

然后，您有另一个 DLL，B.dll 并再次添加一个 Web 引用。这一次，将创建**另一个**代理类型，我们称之为`B.Task`。尽管`A.Task`并且`B.Task`可能看起来很相似，但它们是两种不同的类型（很可能它们存在于两个不同的命名空间中）。

有两种可能的方法。首先 - 创建您自己的映射类，并使用可以从中获取`A.Task`和制作`B.Task`的方法（以及可能的其他方式）。

但另一种方法涉及创建一种“通用语言”——一个共享的 DLL（我们称之为它`Task.dll`），您可以在其中放置您的`Task`类。您可以在任何地方引用 DLL，在您的 Web 服务中`A.dll`、在`B.dll`. 每次创建 Web 引用时，请确保选中“从引用的程序集中重用类型”选项（在引用属性页面）。

这样，将不会为该类型创建**代理类型**`Task`- 在服务器端和客户端将使用相同的类。这样就不需要转换任何东西，您将能够传递引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:39:06.560

您可以在 B 库中使用，`A.com.test.services.Task`而不是使用。因此，您应该在 B 中添加对 A 的引用。然后，无论您在 B 库中使用的哪个位置，都将其替换为. 这样，您的对象可以在库之间来回传递，因为类型是相同的。`'B.com.test.services.Task``A.com.test.services.Task``B.com.test.services.Task``A.com.test.services.Task`

或者在 B 中，如果属性匹配，您可以转换`A.com.test.services.Task`为`B.com.test.services.Task`，如下所示：

```
public string BuildDetail(A.com.test.services.Task task, bool TaskExecutionState, bool TaskComment) 
{
    DetailScreen detail = new DetailScreen(task); 
    return detail.Layout;
}

public string BuildDetail(B.com.test.services.Task task, bool TaskExecutionState, bool TaskComment) 
{
    //create a new Task of the A library
    A.com.test.services.Task tempTask = new A.com.test.services.Task();

    //fill the task with the properties of B
    tempTask.propOne = task.propOne;
    tempTask.propTwo = task.propTwo;

    //call the function which takes an A task and return that.
    return BuildDetail(tempTask, TaskExecutionState, TaskComment);
} 
```

# android - 如何以编程方式在android中获取连接的wifi路由器的IP地址？

> ID：12001449
> 
> 赞同：8
> 
> 时间：2012-08-17T07:19:30.450
> 
> 标签：android, eclipse, ip-address, android-wifi, wifimanager

我想获取我的android手机所连接的wifi路由器的IP地址？我知道我们可以通过使用 android APIS 来获取 mac/BSSId 和 SSID，但是我找不到找到它的 IP 地址的方法？

我找到了获取手机ip地址的代码拥有wifi路由器

```
WifiManager myWifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();
int ipAddress = myWifiInfo.getIpAddress();
System.out.println("WiFi address is " + android.text.format.Formatter.formatIpAddress(ipAddress)) 
```

但未能得到我想要的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T07:45:15.303

您可能想要的是[`DhcpInfo`](http://developer.android.com/reference/android/net/DhcpInfo.html)：

```
final WifiManager manager = (WifiManager) super.getSystemService(WIFI_SERVICE);
final DhcpInfo dhcp = manager.getDhcpInfo();
final String address = Formatter.formatIpAddress(dhcp.gateway); 
```

这将产生（格式化的）网关 IP 地址，这*应该*是您正在寻找的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-22T10:40:01.057

由于 formatIpAddress 已被弃用，这里是替代方案：

```
public String getHotspotAdress(){
    final WifiManager manager = (WifiManager)super.getSystemService(WIFI_SERVICE);
    final DhcpInfo dhcp = manager.getDhcpInfo();
    int ipAddress = dhcp.gateway;
    ipAddress = (ByteOrder.nativeOrder().equals(ByteOrder.LITTLE_ENDIAN)) ?
            Integer.reverseBytes(ipAddress) : ipAddress;
    byte[] ipAddressByte = BigInteger.valueOf(ipAddress).toByteArray();
    try {
        InetAddress myAddr = InetAddress.getByAddress(ipAddressByte);
        return myAddr.getHostAddress();
    } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        Log.e("Wifi Class", "Error getting Hotspot IP address ", e);
    }
    return "null"
} 
```

# c# - 我们如何集成我们的 windows Phone 7 应用程序以在 Google Plus Wall 上发布数据？

> ID：12001450
> 
> 赞同：2
> 
> 时间：2012-08-17T07:19:36.570
> 
> 标签：c#

我们如何集成我们的 windows Phone 7 应用程序以在 Google Plus Walls 上发布数据。如果有人知道如何做到这一点，请向我提供 API 和示例代码，以便使用 WP7 应用程序在 google plus wall 上发布数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:48:55.173

不，你不能像**[这里所说的那样](https://developers.google.com/+/api/)**

```
Note: The Google+ API currently provides read-only access to public data.
All API calls require either an OAuth 2.0 token or an API key. 
```

# matlab - 数组的平均值

> ID：12001455
> 
> 赞同：-2
> 
> 时间：2012-08-17T07:19:56.153
> 
> 标签：matlab, average

我有一个 4 行 400,000 列的矩阵。我需要获得 4 个连续行的平均值。即第 1 行到第 4 行、第 5 行到第 8 行等的平均值。

4 列应保持不变。我知道这可能是幼儿园级别的问题，但我很感激任何用 Matlab 编写程序的提示；我有一点编写 Matlab 程序的经验。

数据示例如下：

```
[1 2 3 2; 
 5 6 7 2;
 9 6 7 6;
 5 2 3 2;
 9 8 7 6;
 6 5 4 3; 
 4 3 2 1;
 9 8 7 6] 
```

我希望结果为：

```
[5 4 5 3],[7 6 5 4] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:49:11.890

我并不完全清楚你的数据是如何布局的，所以我会给你一个解决方案来解决我认为你的意思。

假设你有

```
a = [
    1   2   3   4    %# row 1
    2   3   4   5 
    3   4   5   6 
    4   5   6   7    %# row 4
    5   6   7   8    %# row 5
    ...
    ];               %# row m 
```

并且您希望从第 1 行到第 4 行、第 5 行到第 8 行等的列中取平均值。您可以简单地通过

```
averages = reshape(mean(reshape(a,4,4,[])),[],4) 
```

分解：

```
A = reshape(a,4,4,[]) 
```

将矩阵中的数据重新排列为 3D 数组。该阵列的每个 3D“层”都是一个`4x4`矩阵。

```
B = mean(A) 
```

这取沿列（方向`1`）的平均值。继续阅读以`help mean`获取更多信息。

```
C = reshape(B,[],4) 
```

这会将平均值数组重新排列回`Nx4`矩阵，其中`N=m/4`.

# wcf - TFS 2010 使用 WCF 服务构建 SharePoint

> ID：12001459
> 
> 赞同：0
> 
> 时间：2012-08-17T07:20:10.240
> 
> 标签：wcf, sharepoint, build, tfs

我正在尝试为客户端 SharePoint 环境设置一些持续集成。

我遇到的问题是包含 WCF 服务的 SharePoint 项目。有问题的项目构建良好，但在尝试在构建服务器上打包和部署时失败。

该项目从 Visual Studio 构建和部署良好，该问题仅发生在 TFS 构建服务器上。

Build Agent 抛出的错误如下：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets (378): The "ValidatePackage" task failed unexpectedly. System.InvalidOperationException: The project service is not a serialized SharePoint project service.    at Microsoft.VisualStudio.SharePoint.Tasks.ValidatePackage.OnCheckParameters()    at Microsoft.VisualStudio.SharePoint.Tasks.BuildTask.Execute()    at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()    at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult)

The following is the error from MSBuild Logs :

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets(378,5): error MSB4018: The "ValidatePackage" task failed unexpectedly. [C:\BuildsNew\4\SharePrice\SharePrice_Dev\Sources\SharePrice\SharePrice.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets(378,5): error MSB4018: System.InvalidOperationException: The project service is not a serialized SharePoint project service. [C:\BuildsNew\4\SharePrice\SharePrice_Dev\Sources\SharePrice\SharePrice.csproj]
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets(378,5): error MSB4018:    at Microsoft.VisualStudio.SharePoint.Tasks.ValidatePackage.OnCheckParameters() [C:\BuildsNew\4\SharePrice\SharePrice_Dev\Sources\SharePrice\SharePrice.csproj] 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T19:13:17.153

如果您仅使用 (http://msdn.microsoft.com/en-us/library/ff622991.aspx) 中描述的注册表引用 DLL 和/或没有正确安装所有内容，我们通常会看到此错误。在我们的案例中，在构建服务器上完全安装 SharePoint 2010（不对其进行配置）可以消除此错误。

# php - 使用 Stof/Gedmo Translation 映射异常

> ID：12001460
> 
> 赞同：1
> 
> 时间：2012-08-17T07:20:15.233
> 
> 标签：php, doctrine-orm, symfony-2.1

我正在将我的 Symfony 2.0 项目迁移到 2.1rc1 版本。安装并测试我的应用程序后`stof/doctrine-extensions-bundle`，`gedmo/doctrine-extensions`我收到以下错误：

> 没有为“Gedmo\Translatable\Entity\MappedSuperclass\AbstractTranslation”的实体“Company\TestBundle\Entity\PageTranslation”子类指定标识符/主键。每个实体都必须有一个标识符/主键。

我的`config.yml`样子是这样的：

```
# Doctrine Configuration
doctrine:
    dbal:        
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8                    

    orm:
        auto_generate_proxy_classes: %kernel.debug%        
        connection: default
        auto_mapping: true        
        mappings:
            gedmo_translatable:
                type: annotation
                prefix: Gedmo\Translatable\Entity
                dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translatable/Entity"
                alias: GedmoTranslatable # this one is optional and will default to the name set for the mapping
                is_bundle: false
            gedmo_translator:
                type: annotation
                prefix: Gedmo\Translator\Entity
                dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Translator/Entity"
                alias: GedmoTranslator # this one is optional and will default to the name set for the mapping
                is_bundle: false

stof_doctrine_extensions:
    default_locale: en
    translation_fallback: true
    orm:
        default:               
            translatable: true
            sluggable: true 
```

根据这个[文件`StofDoctrineExtensionsBundle`](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst)应该没问题。我唯一不确定的是`auto_mapping: true`选项。

我在项目中更改的唯一代码是在我的`CategoryTranslation class`. 我已经更换：

```
use Stof\DoctrineExtensionsBundle\Entity\AbstractTranslation; 
```

经过：

```
use Gedmo\Translatable\Entity\MappedSuperclass\AbstractTranslation; 
```

因为 Stof-bundle 不再有`AbstractTranslation`类了。

有人可以告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T23:50:36.600

如果您使用的是 StofDoctrineExtensions，则不需要`gedmo/doctrine-extensions`. 也不需要在 PageTranslation 中生成任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:58:05.593

我之前的 PageTranslation 实体：

```
class PageTranslation extends AbstractTranslation
{
    /**
     * All required columns are mapped through inherited superclass
     */
} 
```

在命令行上生成实体后的我的 PageTranslation 实体：

```
class PageTranslation extends AbstractTranslation
{
    /**
     * All required columns are mapped through inherited superclass
     */

    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var string $locale
     */
    private $locale;

    .....etc....

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set locale
     *
     * @param string $locale
     * @return PageTranslation
     */
    public function setLocale($locale)
    {
        $this->locale = $locale;

        return $this;
    }

    /**
     * Get locale
     *
     * @return string 
     */
    public function getLocale()
    {
        return $this->locale;
    }

    ..etc....
} 
```

# asterisk - 星号 AMI。通话开始时会触发什么事件？

> ID：12001462
> 
> 赞同：1
> 
> 时间：2012-08-17T07:20:20.640
> 
> 标签：asterisk, asteriskami

我认为在我的配置中不会触发此事件。当话务员接听电话时必须触发什么事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T05:06:41.443

您将在 event.State 中收到带有“Up”的 New State 事件，例如：

```
Event: Newstate
Channel: Zap/2-1
State: Up
Callerid: 101
Uniqueid: 1094154427.11 
```

# iphone - 将字典转换为一个数组

> ID：12001464
> 
> 赞同：1
> 
> 时间：2012-08-17T07:20:25.540
> 
> 标签：iphone, objective-c, ios, cocoa-touch, foundation

这段代码：

```
for (NSDictionary *object in JSONArray) {
         NSMutableArray *birdtemp = [[NSMutableArray alloc] initWithObjects:object[@"case_name"], nil];
        [allparts addObject:birdtemp];
    } 
```

输出此日志：

```
log: (
        (
        "NZXT Phantom 410"
    ),
        (
        "Thermaltake MK+"
    )
) 
```

我想知道我可以使用什么代码将该日志放入一个数组中，例如：

```
log: (

    "NZXT Phantom 410",
    "Thermaltake MK+"
) 
```

Json 数组是：

```
log: (
        {
        "case_color" = White;
        "case_description" = "";
        "case_image" = "http://sitecom/get/parts/part_images/nzxtphantom410.jpeg";
        "case_name" = "NZXT Phantom 410";
        "case_price" = "99.99";
        "case_type" = ATX;
        id = 1;
    },
        {
        "case_color" = Black;
        "case_description" = "";
        "case_image" = "http://site.com/get/parts/part_images/thernaltake-mkplus.jpeg";
        "case_name" = "Thermaltake MK+";
        "case_price" = "84.99";
        "case_type" = ATX;
        id = 2;
    }
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:40:33.843

故障排除并得到这个：

```
allparts = [[NSMutableArray alloc] init];
    NSString *birdtemp;
    for (NSDictionary *object in JSONArray) {
            birdtemp = object[@"case_name"];
        [allparts addObject:birdtemp];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:45:54.490

获得所需结果的一种简单方法是使用键值编码 (KVC)：

```
NSArray *allparts = [JSONArray valueForKey:@"case_name"]; 
```

以这种方式在数组上使用的键值编码一开始可能看起来有点违反直觉，但它非常强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:36:59.540

```
 NSMutableArray *array = [[NSMutableArray alloc] init];
    for (NSDictionary *dict in JSONArray) {

        [array addObject:[dict objectForKey:@"case_name"]];
    }
    NSLog(@"Your Array: %@",array); 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:25:06.693

```
NSMutableArray *birdtemp  = [NSMutableArray ....];   
     for (NSDictionary *object in JSONArray) {
               [birdtemp addObject:object[@"case_name"]];
      }
     [allparts addObject:birdtemp]; 
```

# openssl - openssl 将文本转换为 pem

> ID：12001465
> 
> 赞同：1
> 
> 时间：2012-08-17T07:20:29.737
> 
> 标签：openssl, rsa

我使用以下命令生成了一个 rsa 2048 密钥对： openssl.exe genrsa -F4 -out key.pem 2048 openssl.exe rsa -text -in key.pem > key.txt

现在我丢失了 key.pem 文件，也丢失了原始格式的 key.txt。但是我有来自文本文件的私有指数和公共指数。这些足以让我的工具套件签署二进制文件然后进行验证。现在我需要使用 openSSL 签名来测试一些东西，但是如何恢复 .pem 格式（key.pem）的私钥。

这是 key.txt 的剩余部分（示例，但有效的密钥对）：

私钥：（2048 位）

模数：

```
00:f3:5a:8f:46:08:11:d8:f7:65:eb:26:8f:e6:fe:
c3:10:c7:52:81:4e:44:89:59:fe:39:a3:55:c6:10:
7f:8c:2d:8e:e9:60:92:f1:c2:b3:9b:3d:0b:cc:b1:
6d:36:b4:d2:31:dd:5b:96:c1:f1:0b:51:2c:77:ee:
2d:53:68:f0:c9:89:c3:a4:1b:90:a1:39:5e:d0:f3:
f1:ec:5b:d3:e9:2d:36:1f:8f:27:e0:90:89:0a:4b:
16:24:e7:35:18:9a:0e:1a:b0:9d:b4:20:b9:2d:cf:
72:59:54:a8:c7:1a:d3:cd:a0:8e:b6:86:6c:47:c5:
b5:de:66:48:5c:cc:63:03:bc:35:ca:8b:0b:23:65:
c0:94:ec:4f:51:67:5c:84:9a:81:ce:cd:52:71:f8:
e8:d1:9b:03:54:ab:e7:38:47:3d:63:f1:ee:26:46:
3f:d8:31:f3:ea:bf:8c:2b:dc:8e:b7:ee:4d:8a:24:
5f:b3:7d:26:45:13:f7:6a:a2:cf:d8:80:1b:0c:30:
d0:06:c3:6b:13:03:74:6b:56:a4:25:f1:90:d4:70:
11:2a:85:9f:92:c9:f0:2e:1c:7d:56:09:ba:de:41:
26:4f:8a:0a:91:78:42:5e:87:6a:2f:51:44:c5:0d:
4b:9d:8b:02:8e:b5:89:82:f9:a1:1b:d7:b9:c6:1d:
d2:61 
```

公共指数：65537（0x10001）

私人指数：

```
73:e4:bd:f4:e1:24:f6:ca:23:7c:90:99:d9:ad:9c:
62:62:3a:95:a0:1b:9d:ba:01:0b:9c:10:de:49:bf:
24:98:11:c6:6d:1a:ae:0e:46:90:f8:ca:a4:ca:1e:
b3:fd:fb:58:8a:0d:f3:47:1b:af:83:12:05:6f:a5:
a0:62:8a:c1:c0:5d:2e:cb:7d:de:7a:3f:00:8e:1c:
b9:ae:a5:c6:17:a4:fd:f4:a4:4e:1b:27:58:82:97:
e2:2d:46:29:18:3c:fd:52:fd:57:ea:79:a6:2a:74:
4f:bc:b4:c0:55:b3:66:eb:3e:ec:08:2a:8b:27:ca:
4c:47:33:d1:15:f9:55:ae:1f:c6:5c:80:52:0b:b1:
b8:63:2e:59:82:09:3d:68:b1:29:3b:56:5e:e4:e3:
6c:bb:01:c7:f7:a4:2a:20:e7:40:f2:08:d6:3a:e9:
49:3c:15:bc:5d:6b:89:4b:06:60:f5:86:7b:7c:6f:
f2:1a:10:10:f4:df:73:ae:5f:67:d1:a1:99:e4:79:
2d:82:3d:a6:fd:c0:cc:0a:4b:06:f6:96:d5:c0:89:
3b:02:26:a2:ff:e1:e1:fb:2a:6c:cb:4f:ce:8a:c5:
26:4b:70:19:05:87:23:81:68:64:83:65:f4:97:7a:
bf:1e:95:5c:a3:93:64:7a:fa:e7:54:9d:0b:95:0c:
11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T12:59:35.447

对 - 所以假设你也知道私有指数和不知道的东西 - 这是可行的；但将需要一些 c 编码来构建正确的结构或肮脏的 hack。我使用的肮脏技巧如下（并且可能并不总是有效；BER 编码中有一些不幸的边缘情况）。

*   在旁边生成一个类似的密钥。确保长度一致。
*   以DER格式写出来。
*   以TXT格式写出来；如上（A）。
*   观察到 privateExponent 等在转储中是“普通的”（以它们的 ASN1 标头 (BF..) 为前缀）。
*   将键/值编辑到此文件中；覆盖旧值。
    *   您可以通过查看文本输出“A”找到它们的开始/结束。
    *   并将其替换为您的价值观
*   使用 openssl ans1parse 来验证您没有犯任何错误。
*   完成后-您的文件就回来了。

就是这样。适当的 C 代码需要更多的工作。但完全可行。您的 txt 文件包含所有信息 - openssl 中的 RSA/pkey 结构很容易重新填充。

（希望上面不是你真正的关键:)！

# php - 如何在php中检查一年中的第一天

> ID：12001467
> 
> 赞同：0
> 
> 时间：2012-08-17T07:20:32.253
> 
> 标签：php, date

如何在 php 中查看今天的天气是一年中的第一天。

编辑： echo date('Ymd', strToTime('1/1 this year'));

这段代码给了我结果。这是有效的还是有比这更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:27:49.453

您可以通过传递格式字符串 'z' 执行内置[date()](http://php.net/manual/en/function.date.php)函数来获取一年中的哪一天。这将在第一天返回'0'，在第二天返回'1'，......直到（闰年）的最后一天返回'365'。

```
if ( date('z') === '0' ) {
    //Today is the first day of the year.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:28:25.917

```
if (date('z') === 0) {
echo 'we have 1.1.'
} 
```

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:25:26.753

[这应该可以解决您的问题等等！](http://www.php.net/manual/en/datetime.formats.relative.php)

```
<?php
$theDate = date("md"); 
if ($theDate=="0101") echo "It's A New Year!";
?> 
```

Date() 函数格式化字符：

*   d - 月份日期的数字表示 (0 - 31)
*   m - 一年中月份的数字表示 (1 - 12)
*   y - 一年的数字表示（两位数）（99、00、01、02）
*   H - 24 小时格式当前小时 (00 - 23)
*   i - 分钟 (00 - 59)
*   s - 秒 (00 - 59)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:27:04.847

```
if(date('j') == '1' && date('n') == 1){
    // if first day of year
} 
```

这将很容易做到，而无需您通常担心的任何复杂的日期内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T07:29:49.937

欲了解更多信息，请参阅[http://php.net/date](http://php.net/date)

```
<?php
 if(date('dm',mktime())=="0101")
    echo "fist day of year";
 else
    echo "not the first day";
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T07:31:16.473

一年的第一天永远不会与 1/1/yyyy 不同您可以使用 strcmp 或

```
$now=new DateTime(); 
```

然后使用 $now 中的 getDay GetMonth 进行评估

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-17T07:43:20.293

如果您对一年中第一天的名称感兴趣

```
echo date('l', strtotime('2012-01-01')); 
```

或者

```
echo date('l', strtotime("first day of January 2012"));

Output:// Sunday

OR

just use -

echo (date('z') === 0) ? 'First day' : 'Not first day';

//z     The day of the year (starting from 0)   0 through 365 
```

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

[http://www.php.net/manual/en/datetime.formats.relative.php](http://www.php.net/manual/en/datetime.formats.relative.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-17T08:04:21.747

您可以执行以下操作：

```
echo date('Y-m-d', strtotime("first day of january " . date('Y'))); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-17T09:45:50.790

该[`date`](http://php.net/manual/en/function.date.php)函数有一个`z`格式字符，可用于：

```
$day_of_year = date('z');
// $day_of_year is 259 for the day I write this 
```

# android - android 聊天应用程序 - ListView 与 ScrollView

> ID：12001476
> 
> 赞同：0
> 
> 时间：2012-08-17T07:21:04.937
> 
> 标签：android, listview, scrollview

我正在构建一个聊天应用程序。

在我的聊天消息视图中，我有一个 Activity，它呈现最后 20 条消息并以编程方式将它们添加到 ScrollView。

它实际上工作得很好而且很快。

完成它后，我停下来思考并意识到我可以使用 ListView 更轻松（并且可能更有效）完成它。

这是真的吗？我应该努力将视图更改为 ListView 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:29:38.433

我会说是的一个主要原因：`ListView`回收屏幕上显示的视图，使其非常有效。由于它会在较小的屏幕上容纳 6 或 7 个视图，并重复使用这些视图，因此它比说 20 个视图占用内存要高效得多。至于更容易，这可能是有争议的。但绝对推荐 ListView。ScrollView 可能感觉很快，但您还必须考虑设备和其他应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:41:37.453

我的应用程序中有一个聊天功能，我使用适配器将消息填充到列表视图中。下面是我的 xml 布局的示例：

消息.xml

```
<LinearLayout
    <TextView </TextView>
    <ListView </ListView>
</LinearLayout> 
```

message_item.xml

```
<RelativeLayout>
      <LinearLayout>
      <LinearLayout> 
      <LinearLayout>

      <LinearLayout>
      <TextView></TextView>
  <TextView></TextView>
      </LinearLayout>

      <TextView></TextView>
      </LinearLayout>

      <ImageView></ImageView>
      </LinearLayout>
      </LinearLayout>
      <TextView></TextView>
      </RelativeLayout> 
```

我希望这会有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:43:10.397

可以扫描android源码，了解ListView是如何实现的。

我想你会在那之后找到你的答案。

ics/framework/base/core/java/android/widget/ListView.java

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:28:59.873

我认为，是的，由于它的属性，使用 listView 会更有效。并且您对滚动视图所做的操作与 ListView 具有相同的功能。我认为你正在改造轮子。[这](http://www.mubasheralam.com/tutorials/android/listview-transcript-mode)是一个很好的例子:)

# c++ - 如何检查sqlite数据库是否附加？

> ID：12001477
> 
> 赞同：4
> 
> 时间：2012-08-17T07:21:05.950
> 
> 标签：c++, sqlite

我正在使用 sqlite 来存储我的数据。我有两个数据库。在我的应用程序中，每次出现新请求时，我都会将第一个数据库附加到第二个数据库。问题是，如果有两个请求出现，则显示该数据库已在使用中（它试图使用相同的别名“db”附加两次）。我想知道是否有任何方法可以检查是否附加了数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T09:12:31.520

```
PRAGMA database_list; 
```

输出一个包含可用数据库完整列表的结果集。第一列是数据库名称，第二列是数据库文件（如果与文件无关，则为空）。主数据库总是被命名`main`，临时数据库总是被命名`temp`。

```
sqlite> attach "foo.db" as foo;
sqlite> pragma database_list;
0|main|
2|foo|/Users/me/tmp/foo.db 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:01:59.493

我假设您正在为多个请求重用与数据库的相同连接。由于数据库[附加](http://www.sqlite.org/lang_attach.html)到连接对象，因此对于具有相同连接的第二个或更多请求，附加失败。因此，我认为的解决方案是在建立新连接后立即附加数据库，而不是每次收到请求时。

# winapi - Mingw32 和 Mingw64 包含文件有什么区别？

> ID：12001479
> 
> 赞同：1
> 
> 时间：2012-08-17T07:21:16.613
> 
> 标签：winapi, mingw, mingw32, mingw-w64

我使用 Mingw32 和 devc++ IDE 来开发我的应用程序。我包含了Mingw32的lib文件和包含文件并编译了我的应用程序。

我的应用程序应该在 32 位和 64 位版本的 Windows 中运行。我的疑问是我的应用程序是否在 Windows 64 位系统中运行？就算完美运行会不会有什么问题？

Mingw32 和 Mingw64 包含文件有什么区别？我的最终目标是在 32 位和 64 位窗口中运行我的应用程序。我应该添加和编译哪些包含文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:43:24.413

mingw-w64 是 mingw 项目的分支。

通常，mingw-w64 标头更完整，它们包括来自较新 Windows 的最新添加（新 SDK 标头、函数声明、类型、常量、宏），已准备好构建 64 位目标（当与 gcc 一起使用时） ）。

当然请注意，您不能将 mingw 的 gcc 与 mingw-w64 标头混合使用，反之亦然。您必须使用其中一个或另一个的完整工具链。我不知道在devc++中切换工具链有多容易（我不使用它）。

# migration - Digite Enterprise：有人知道从Digite 迁移到MS Project Server 吗？

> ID：12001480
> 
> 赞同：0
> 
> 时间：2012-08-17T07:21:16.903
> 
> 标签：migration, ms-project, ms-project-server-2010

我正在考虑从Digite Enterprise 到MS Project Server 的可能迁移。我想将许多项目的所有数据，包括时间表、问题、风险迁移到 EPMS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:13:09.867

只能使用 Digit MSP 集成导出项目。

在我看来，Digite 是比 MSP 管理所有这些的好产品；-)

# content-management-system - 具体5汇总详情页

> ID：12001483
> 
> 赞同：0
> 
> 时间：2012-08-17T07:21:43.667
> 
> 标签：content-management-system, master-detail, concrete5

该解决方案可能不是 Concrete5 CMS 独有的，但我需要构建一个包含项目列表的页面。每个项目都将链接到该项目的详细信息页面，其中显示了全文描述。初始摘要页面上的每个项目都将具有详细页面描述的前几行和一个“更多”链接。有谁知道我怎么能在 C5 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:02:56.477

您还可以查看页面列表的博客视图——它们显示了如何从另一个页面显示一个区域以及它们包含的所有内容块，以及如何显示属性。您可以创建一个名为 description 的富文本属性，然后在您循环浏览页面列表时显示该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T16:21:51.507

这是使用 Concrete5 很常见的事情，并且有一个内置块来处理它——它被称为“页面列表”。请注意，开箱即用，此块不显示每个页面内容的前几行，而是显示创建页面（或编辑页面属性）时输入的“描述”字段。但是我在市场上有一个名为“页面列表预告片”的免费插件——http: [//www.concrete5.org/marketplace/addons/page-list-teasers——](http://www.concrete5.org/marketplace/addons/page-list-teasers)它将此功能添加到内置页面列表中堵塞。

# javascript - Knockout js条件选项绑定

> ID：12001485
> 
> 赞同：3
> 
> 时间：2012-08-17T07:21:48.340
> 
> 标签：javascript, html, knockout.js

在 Knockoutjs 中，是否可以为选项绑定的子元素设置条件

例如：

```
viewModel.array([{name: 1, show: true}, {name: 2, show: false}, {name: 3, show: true}]);

<select data-bind="options: array, optionsText: name, if: show"></select> 
```

将显示在选择框中：

```
1
3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T09:47:07.630

查看此[演示](http://jsfiddle.net/gurkavcu/mXaA9/)

你可以这样做：

```
 <select  data-bind="value: selectedCountry , foreach : countryArray" >
       <!-- ko if: show -->        
            <option data-bind="value : name, text : name "></option>
       <!-- /ko -->
 </select> ​

function viewModel() {

    var self = this;
    this.countryArray = ko.observableArray([{"name" : "France" ,"show" : true},
                                            {"name" : "Italy" , "show" : true},
                                            {"name":"Germany" , "show" : false}]);

    this.selectedCountry = ko.observable("");

}

$(document).ready(function() {

    var vm = new viewModel();
    ko.applyBindings(vm);

})​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-02T20:50:45.237

试试这个[演示](http://jsfiddle.net/gdesplin/mpetf09x/)

这是 2017 年的更新：执行此操作的最佳方法（尤其是没有无容器条件绑定）来自用于[后处理](http://knockoutjs.com/documentation/options-binding.html)选项绑定的淘汰文档，使用 optionsAfterRender 绑定。optionsAfterRender 是在 2.3 版中添加的

您的代码如下所示：

```
 <select  data-bind="value: selectedCountry , options : countryArray, optionsText: 'name', optionsAfterRender: setOptionsShow" ></select>  ​

function viewModel() {

    var self = this;
    this.countryArray = ko.observableArray([{"name" : "France" ,"show" : true},
                                            {"name" : "Italy" , "show" : true},
                                            {"name":"Germany" , "show" : false}]);

    this.selectedCountry = ko.observable("");
    this.setOptionsShow = function(option, item) {
            ko.applyBindingsToNode(option, {visible: item.show}, item);
        }

}

$(document).ready(function() {

    var vm = new viewModel();
    ko.applyBindings(vm);

})​ 
```

# javascript - jslint 和 cshtml 文件

> ID：12001487
> 
> 赞同：0
> 
> 时间：2012-08-17T07:22:01.630
> 
> 标签：javascript, asp.net-mvc, jslint

有没有办法让 JSLint 查看 asp.net 项目中的 cshtml 文件的内容？
我知道我可以将脚本提取到 js 文件中，一切都很好，但是我有一些一次性的脚本，我真的不想坐在我的 Scripts 目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:31:30.823

jslint 仅用于验证您的 javascript 代码，并且您的 javascript 代码无论如何都应该位于与 HTML/CSHTML 不同的文件中。

所以你只需要将 js 文件复制到文本框中。太糟糕了，不可能上传几个 js 文件，然后将得到验证。

# sip - SIP中的转移和重定向有什么区别

> ID：12001490
> 
> 赞同：4
> 
> 时间：2012-08-17T07:22:19.017
> 
> 标签：sip

涉及 SIP 会话的两种呼叫场景之间有什么区别吗？1) 呼叫被转移。2) 呼叫被重定向。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T08:46:58.920

在一次转移中，SIP 用户代理实际上已经与被叫方建立了对话，然后开始在被叫方和另一个 UA 之间建立新的对话。

重定向是指 UA 不应答呼叫，而只是通知被叫方将 INVITE 重新发送到另一个 SIP URI。

特别是，传输将涉及`REFER`和`NOTIFY`消息，这意味着所涉及的 UA 必须支持`refer`事件包。这个包是在核心 SIP RFC[之外](https://www.rfc-editor.org/rfc/rfc3515)定义的，其中重定向由主/中心[RFC](https://www.rfc-editor.org/rfc/rfc3261)覆盖。

# java - 如何获取 ConcurrentHashMap 的最新视图？

> ID：12001491
> 
> 赞同：0
> 
> 时间：2012-08-17T07:22:23.667
> 
> 标签：java, memory-management, collections, concurrency, volatile

您可以确保一个线程对变量所做的更改可以在其他线程上看到，方法是使变量变为 volatile，或者让两个线程在某事上同步。如果要更改的是 java.util.ConcurrentHashMap，通过将保存此映射的变量的类型声明为 volatile 来创建内存屏障是否有意义，或者访问映射的读者（例如 via `myMap.values()`）将获得最新的无论如何可能的观点？对于上下文，我有一个繁重的阅读，轻的写作场景，我正在将我的[无锁读取解决方案](https://stackoverflow.com/questions/11963972)切换到 ConcurrentHashMap。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:27:48.607

ConcurrentHashMap 保证写入和后续读取之间存在先发生关系。所以是的，当您阅读 (get) 时，您将看到已“提交”的最新更改（put 已返回）。

注意：这不适用于 javadoc 中解释的迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:26:42.400

“持有”映射的变量是映射对象的引用或指针（分别（简化）到存储映射的内存地址）。使其 volatile 只会影响指针，而不影响地图对象本身。只要您始终使用相同的 Map-Object 并确保映射在线程使用它之前已完全初始化，您就不必对它使用“易失性引用”。并发在并发哈希映射中透明地处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T07:31:30.260

是的，`ConcurrentHashMap`给出了最新的观点。如果您参考[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#get(java.lang.Object)](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#get%28java.lang.Object%29)上的 javadocs， 它清楚地写着

> 检索反映了最近完成的更新操作在开始时保持的结果

它有更多细节，我建议你去阅读它。

此外，正如已经指出的那样，使用`volatile`不是您想要的，因为它只会影响指针而不是地图的实际内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T08:20:34.900

您需要做的就是确保保存地图的引用是最终的，这样您就会获得一个最终的字段围栏，以确保您看到正确初始化的地图并且引用本身不会更改。

正如其他人指出的那样，`ConcurrentHashMap`将保证内部写入的可见性/发生之前，就像所有`java.util.concurrent.*`集合一样。但是，您应该使用`ConcurrentMap`接口上公开的条件写入来避免写入中的数据竞争。

# jquery - 使用多个 JQuery 版本并且没有冲突

> ID：12001498
> 
> 赞同：2
> 
> 时间：2012-08-17T07:22:44.830
> 
> 标签：jquery

我正在使用一个应用程序的插件，该应用程序的代码库由于更新问题而我不想更改。

该应用程序在标头中包含 Jquery 1.3.2，并在整个站点中大量使用它。没想到这一点，我继续使用 1.8.0 版本编写了我的插件，结果发现这弄乱了原始应用程序的功能。

我一直在尝试实现 noConflict 方法，但没有成功。

```
# Site loads jQuery1.32 and other jQuery plugins

# My awesome php & html code

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script type="text/javascript">
var $jq = jQuery.noConflict(true);  
$jq.DoSomeJQueryStuff();
</script> 
```

在这种情况下如何实现 noConflict？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:32:53.000

您需要先调用`noConflict()`哪个（或两者都调用）。如果没有在第一个实例上调用它，那么在您包含下面的脚本定义时已经存在“冲突”。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
<script type="text/javascript">
   var $jQ180 = jQuery.noConflict(true);
   document.write($jQ180().jquery); // 1.8.0
</script>​

...

<script type="text/javascript" src="http://code.jquery.com/jquery-1.3.2.js"></script>
<script type="text/javascript">
    document.write($().jquery); // 1.3.2
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:43:37.613

我认为你需要这样的东西。

如果我们假设链接按以下顺序添加：

1.  jquery-1.3.2.js
2.  jquery-1.8.0.js

我们有这个：

```
jQuery.noConflict();

// here you can execute javascript with jquery version 1.3.2
console.log($.fn.jquery);

jQuery(function($){
    // here you can execute javascript with jquery version 1.8.0
    console.log($.fn.jquery);
}); 
```

你可以在这个[Jsfiddle](http://jsfiddle.net/charlesjourdan/w2m5j/1/)上找到一个例子。

# autocomplete - 自动完成样式自定义

> ID：12001500
> 
> 赞同：0
> 
> 时间：2012-08-17T07:22:52.183
> 
> 标签：autocomplete, customization, styling

由于某些不可避免的原因，我不得不将自动完成结果包装在两个 div 中，所以我的最终输出为

```
<div id="resultDiv">
    <div id="scrollerDiv">
      <li>...</li>
      <li>...</li>
      <li>...</li>
    </div>
</div> 
```

代替

```
<li>...</li>
<li>...</li>
<li>...</li> 
```

但这会从我的结果（即`<li>`s）中删除所有样式和事件。在添加这些 div 之前，我的“选择”事件被调用，结果可以使用向上和向下箭头导航，所选记录的背景被突出显示等，但所有这些功能都消失了。我可以在*“jquery.ui.autocomplete.js”*和/或“ *query.ui.css* ”中进行任何更改以添加此 div 存在并让一切恢复正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T03:19:03.770

我通过动态应用 css 类`<ul>`来实现这一点`<div>`。

# c# - 如何轻松地重新排序 TabControl？

> ID：12001502
> 
> 赞同：31
> 
> 时间：2012-08-17T07:22:57.800
> 
> 标签：c#, winforms, visual-studio-2005, tabcontrol

我有一个`TabControl`我在 VS2005 设计器中设计的，它有大约 7 个选项卡。

如何轻松切换选项卡的顺序？

我匆忙把一个标签放在最后，但现在我想把它放在中间的某个地方。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-17T07:28:32.340

在选项卡控件的属性中有一个 TabPages 集合。你应该能够在那里洗牌。只需单击 TabPages 旁边的省略号，就会出现一个对话框，允许您按顺序向上或向下移动每一个。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-17T07:29:25.707

在设计器中标记 TabControl。

在属性窗口 (F4) 中，您有一个 TabPages 属性。您可以打开一个新窗口，您可以在其中重新排序 TabPages。

如果你想在运行时这样做，你必须这样做

```
tabControl.TabPages.Remove(tabPage1);
tabControl.TabPages.Add(tabPage1); // add to the end
tabControl.TabPages.Insert(2, tabPage1); // add on specific position 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-03T09:36:28.323

打开 FormName.Designer.cs。

找到这一行 this.tabControl1.Controls.Add ....

您可以在此处更改顺序。

[截屏](https://i.stack.imgur.com/58l7r.png)

# css - CSS 边距和绝对属性

> ID：12001506
> 
> 赞同：0
> 
> 时间：2012-08-17T07:23:19.547
> 
> 标签：css, margin, css-position

我想在我的代码中使用边距，但我有一些问题。请看：

```
<div id="outer">
<div id="inner1">
    Margin not coming from top (not absolute)
</div>

<div id="inner2">
    Div has absolue prop
</div> 
```

​</p>

CSS代码是：

```
#outer {
    margin: 100px;
    background-color: green;
    height: 300px;
    widht: 400px;
}

#inner1 {
    margin: 10px;
    background-color: red;
}

#inner2 {
    position: absolute;
    margin: 20px;
    background-color: blue;
} 
```

​</p>

1.  我无法理解为什么将位置设置为绝对会限制`#inner2`div 的宽度。

2.  由于`#inner1`div 没有绝对属性，因此它没有顶部的边距。我无法理解这一点。请解释。

这是输出：[**jsFiddle**](http://jsfiddle.net/blunderboy/C7dE2/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:33:05.440

设置 `position:absolute`从文档结构的正常流程中删除有问题的元素。因此，除非您明确设置宽度，否则它不会知道宽度。如果这是您所追求的效果，您可以明确设置宽度..

看到这个

[绝对位置 vs 相对位置宽度和高度](https://stackoverflow.com/questions/5323177/absolute-vs-relative-position-width-height)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:44:22.790

问题 1：我无法理解为什么将位置设置为绝对会限制 inner2 div 的宽度。

将位置设置为inner2 div的绝对位置，只要文本就自动获取宽度。将位置设置为inner2 div的相对位置，获取外部div的宽度。

所以如果你想要绝对定位，还要设置inner2 div的宽度。

问题 2：由于 inner1 div 没有绝对属性，因此它没有距顶部的边距。我无法理解这一点。请解释。

从文档流中，您的内部 div 永远不知道它在其他 div（外部）内部，将边框或位置设置为外部 div 的绝对值可以解决此问题。

小提琴[http://jsfiddle.net/C7dE2/20/](http://jsfiddle.net/C7dE2/20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:29:07.303

您应该使用绿色 div 的`padding-top`属性 -`#inner1`设置`margin-top`为高值只会将整体`#outer`进一步推低！

# android - android在线性布局中查找复选框

> ID：12001513
> 
> 赞同：3
> 
> 时间：2012-08-17T07:23:56.813
> 
> 标签：android, checkbox, android-linearlayout

我在 LinearLayout 中以编程方式添加了几个复选框。是否可以找到并检查 LinearLayout 中的所有复选框？我的xml结构如下：

```
<LinearLayout>
<ScrollView>
<TableLayout>
<TableRow>
<CheckBox>
</TableRow>
<TableRow>
<CheckBox>
</TableRow>
</TableLayout>
</ScrollView>
</LinearLayout> 
```

Java 代码：

```
CheckBox selectAll = (CheckBox)findViewById(R.id.checkboxSelectAll);
selectAll.setOnCheckedChangeListener(new OnCheckedChangeListener() {

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    if(buttonView.isChecked()){
        //loop in linear layout
            //find each checkbox
            //setChecked(true);

    }

}
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-28T11:30:42.750

您可以保留复选框的引用，也可以使用 getChildCount() 然后 getChildAt 循环遍历所有元素，然后检查元素是否为 (instanceof) CheckBox 类型，以及是否只是将其转换为 CheckBox 并将其设置为选中真的。

```
LinearLayout yourLayout= (LinearLayout) view.findViewById(R.id.linearLayout);
int count = yourLayout.getChildCount();
for (int i = 0; i < count; i++) {
    View v = rootLinearLayout.getChildAt(i);
    if (v instanceof CheckBox) {
        ((CheckBox) v).setChecked(true);
    }
} 
```

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:26:46.050

如果`CheckBoxes`以编程方式添加，您可以在`Activity`类的成员变量中保存对它们的引用。

# mercurial - Mercurial 未在 sourceforge 上显示正确的提交时间

> ID：12001514
> 
> 赞同：0
> 
> 时间：2012-08-17T07:23:57.987
> 
> 标签：mercurial, tortoisehg, sourceforge

我在我的 sourceforge 项目上运行 mercurial。我正在 Windows 上使用 tortiseHg 更新存储库。每当我更新文件时，它们的提交时间总是会相差几个小时。例如，我大约 5 分钟前刚刚更新了一个文件，它说它是 6 小时前更新的。我大约 6 小时前更新的文件说它是在大约 30 分钟前更新的。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:31:51.573

可能是由于您和 sourceforge 服务器之间的时区差异，你们双方或其中一方都报告本地时间？

# hadoop - 测试在 Hadoop 中运行的应用程序

> ID：12001516
> 
> 赞同：-2
> 
> 时间：2012-08-17T07:24:26.217
> 
> 标签：hadoop, qa

我是测试新手。是否有一些测试框架来测试在 Hadoop 中运行的应用程序。我有一些在 2 节点集群中运行的 jar 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T02:07:10.503

可以从 Hadoop 测试开始的第一个地方是使用[MRUnit](http://mrunit.apache.org/)编写本地单元测试。它相当于 JUnit，但用于为 MapReduce 编写单元测试。

*   MRUnit 教程 - [https://cwiki.apache.org/confluence/display/MRUNIT/MRUnit+Tutorial](https://cwiki.apache.org/confluence/display/MRUNIT/MRUnit+Tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T10:03:17.080

您还可以通过设置配置在本地 jobtracker jvm 上运行开发测试：

```
Configuration conf = new Configuration();
conf.set("fs.default.name", "file:///");
conf.set("mapred.job.tracker", "local");

Path input = new Path(getClass().getResource("/") + "testfile");
Path output = new Path(getClass().getResource("/") + "testfile_output"); 
```

可以参考《[Hadoop权威指南](http://oreilly.com/catalog/9780596521974/)》第5章

# java - 使用 JWebUnit 的动态 JavaScript 警报

> ID：12001517
> 
> 赞同：1
> 
> 时间：2012-08-17T07:24:30.400
> 
> 标签：java, automated-tests, htmlunit, jwebunit

我正在使用 JWebUnit，而我正在测试的系统使用带有动态消息的 JavaScript 警报，例如“您的应用程序已通过参考提交”。

使用 JWebUnit 我正在调用 WebTester.setExpectedJavaScriptAlert(...) 但是，此时我不知道预期的消息是什么。

有没有人有关于如何解决这个问题的建议（除了不使用警报）？

干杯，迈克

# google-apps-script - 如何从 GAS 的文本框中获取文本？

> ID：12001518
> 
> 赞同：3
> 
> 时间：2012-08-17T07:24:31.060
> 
> 标签：google-apps-script

我在网页上将 GAS 作为 Apps-script-gadget 运行，并使用 GUI-builder。我有两个问题：

1\. 我知道如何在文本框中设置文本：app.getElementById("TextBox1").setText("BigSister");

但是我如何从文本框中获取文本？

我试过： app.getElementById("TextBox1").getText(); ...getValue(); ...价值; 等等

没有任何作用...

2\. 是否可以将消息窗口从代码打印到屏幕 f.Ex. 出于调试目的？

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:24:26.277

在您的处理程序代码中，您可以访问文本框的值

```
var value = e.parameter.TextBox1 ; 
```

在执行此操作之前，您必须在文本框中运行 setName() 方法。var tetxbox1 = app.createTextBox().setName('TextBox1');

[我建议您浏览https://developers.google.com/apps-script/articles](https://developers.google.com/apps-script/articles)上的一些教程，您可以在其中找到许多问题的答案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-22T21:41:19.377

当 ListBox 通过处理程序传回时，您可以检索它的值。它在 ListBox 的 Id 下的参数类中传递。以下是检索该值的万无一失的方法：

```
function changeHandler(e)
{
  var source = e.parameter['source'];  //source is your Id of the element
  var value = e.parameter[source];  //value is the selected item as ['a' | 'a,b,c']

  //More code here
} 
```

我仍在等待解决方案在没有处理程序的情况下检索该值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-18T12:55:07.193

编辑这里是一个工作示例供您测试

[在线](https://script.google.com/macros/s/AKfycbw_oqlu46NuqosMD5kUvMNwOJlVr9CAj6ue869E3ZtCjEDzAEM/exec)测试

脚本 + GUI在[这里](https://script.google.com/d/1c0P7oflSTkzDO_V4AUtDIwNGHU5nijawrXo4GZmGokLXP1vLpn4kuqty/edit)

========================

斯里克的回答是绝对正确的——像往常一样;-)——但是为了让你更清楚一点，因为你在这里使用的是 GUI 构建器，这是一个显示相关参数的小屏幕截图。

![在此处输入图像描述](../Images/fe939d4adb66a811ae8276515acb6dbd.png)

至于你的第二个问题，要让一个瞬时显示窗口“打印”一些数据到屏幕上，最简单的方法是使用 texBox 或 textAreal （或任何其他允许显示文本的东西......）并玩`setVisible(true)`&`setVisible(false)`显示/隐藏小部件。在 GUI 构建器中，您可以将它放在 UI 中的任何位置，甚至可以放在您通常使用的其他元素上，因为它在大多数情况下是不可见的（可见性参数在 GUI 构建器环境中也可用）。它在其他环境中的行为与“弹出窗口”完全相同......

# jquery - 如何避免通过 jquery validate 验证隐藏字段？

> ID：12001520
> 
> 赞同：1
> 
> 时间：2012-08-17T07:24:38.250
> 
> 标签：jquery, jquery-plugins

我有一个下拉菜单，其中包含必需、选项等条件，并且隐藏了大约 8 个文本字段。即使字段被隐藏，也很少有字段得到验证并抛出错误消息。如何避免这种情况？请帮助解决这个问题。

**我的代码是：**

```
 function responseFunction(res) {
    //1:mandatory
    //2:optional
    //3:hidden
    var str = res.split("~");
   for (i in str)
    {
     var field= str[i].split(':');
            switch (field[0]) {
            case "BillingAddressLine1": 
                 switch (field[1]) {                    
                  case "1":$('#ContentSection_lblBillingInfoAddress').prepend('<span>*</span>');
                  $("#<%= txtBillingInfoAddress.ClientID %>").rules("add", {required  : true, messages : {
                  required    : 'Please Enter Address'   }});
                  break;
                  case "3":$('#ContentSection_lblBillingInfoAddress, #ContentSection_txtBillingInfoAddress').hide().parent('p').css("paddingTop", "0px");
                  break;
                 }
            break;
            case "BillingFullName": 
                 switch (field[1]) {
                  case "1":$('#ContentSection_lblBillingInfoAccountHolderName').prepend('<span>*</span>');
                   $("#<%= txtBillingInfoAccountHolderName.ClientID %>").rules("add", {required  : true, messages : {
                  required    : 'Please Enter Account Holder Name'   }});
                  break;
                  case "3":$('#ContentSection_lblBillingInfoAccountHolderName, #ContentSection_txtBillingInfoAccountHolderName').hide().parent('p').css("paddingTop", "0px");
                  break;
                 }
            break;
    }
    } 
```

**我的截图是：** [https ://www.dropbox.com/sh/asmpnuiqqlo40us/S9yHCuNSyl?m#f:errorThrowing.jpg](https://www.dropbox.com/sh/asmpnuiqqlo40us/S9yHCuNSyl?m#f:errorThrowing.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:30:28.403

为所有隐藏元素添加一个类属性并使用该`ignore`属性忽略所有这些元素：

```
<input type='hidden' class='hiddenClass' />

$('form').validate({
 ignore: '.hiddenClass'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:31:48.310

隐藏时删除字段验证

```
$('#targetId').rules('remove'); 
```

可见时重新添加验证

```
$('#targetId').rules('add', {
    required: true
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T07:45:28.827

只需检查下面的案例陈述

```
var control = $("#<%= txtBillingInfoAddress.ClientID %>");
if($(control).is(':hidden')){
  // remove validation
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T14:29:53.073

从 javascript 方法中隐藏验证，例如：

```
function lalala()
{
  var validator1 = document.getElementById('Validator1ClientID');
  ValidatorEnable(validator1, false); 
} 
```

# android - 在android中使用sax进行图像XML解析

> ID：12001523
> 
> 赞同：0
> 
> 时间：2012-08-17T07:24:46.847
> 
> 标签：android

我想解析 xml 文件中的图像。我能够解析文本，但如何解析图像并在列表视图中显示与该文本对应的图像。图像和文本应该在一行中。我的 XML 文件示例如下

```
<tv>
   <channel id="0240.TEN ACTION.in">
        <display-name>0: TEN ACTION+</display-name>
        <thumb_url>http://localhost/rg.jpeg</thumb_url>
   </channel>
   <channel id="2130.ENTER 10.in">
          <display-name>0: ENTER 10</display-name>
          <thumb_url>http://localhost/rg.jpeg</thumb_url>
   </channel>

 </tv> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:29:18.553

尝试以下代码：首先，您需要像 xml 的任何其他属性一样从 xml 获取图像路径，然后将该 URL 传递给此函数。

```
public static Bitmap getBitmapFromURL(String src) {
    try {
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        return myBitmap;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

没什么太复杂的——只需使用“src”字符串创建一个 URL 对象（即`String src = “http://thinkandroid.wordpress.com”)`连接到它，然后使用 Android 的 BitmapFactory 类来解码输入流。结果应该是您想要的 Bitmap 对象！

# css - 如何将 CSS 类文件设置为菜单项控件

> ID：12001524
> 
> 赞同：0
> 
> 时间：2012-08-17T07:24:52.433
> 
> 标签：css

如何将 CSS 类文件应用到菜单项控件。我有一个菜单控件，我必须更改菜单控件中项的颜色，所以我想将 CSS 类文件设置为菜单项怎么做？

```
 <asp:Menu ID="Menu1"  Orientation="Horizontal" Width="10%"  runat="server">

    <Items>
       <asp:MenuItem NavigateUrl="~/Home.aspx" Text="HOME" Value="HOME" ></asp:MenuItem>

          <asp:MenuItem NavigateUrl="~/Services.aspx" Text="Services" Value="Services"></asp:MenuItem>

    </Items>

.staticSelectedStyle
 {
background-color:Black;
color: Black;
border-bottom: solid 1px #eee;
z-index: 100;   
position:static ; 
}
.menu
 {
color:red;
font-size:8pt;
}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head><title>
    Untitled Page
</title><style type="text/css">
    .Menu1_0 { background-color:white;visibility:hidden;display:none;position:absolute;left:0px;top:0px; }
    .Menu1_1 { text-decoration:none; }
    .Menu1_2 { width:10%; }
    .Menu1_3 { border-style:none; }
    .Menu1_4 {  }

</style></head>
<body bgcolor="White">
    <form name="form1" method="post" action="Home.aspx" id="form1">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTExMDkxNDM3NDBkZPybQbNBNXmmSEsEqSKyNytMNUMP" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script src="/WebResource.axd?d=c13d03l4iRJYztoKmiA9KbiJvKkgLiZx2Ej3H51K9TkHC5oF5AnDj7i7I3pag2QP1kUUmWXfqmB-6_02vs8O-hVKwro1&amp;t=634604623351482412" type="text/javascript"></script>

<script src="/WebResource.axd?d=pQc--vnbz5_GrPOMtzvfxI81FzBtntStkXAkQy1fKnh_ihqNd7bG0tjA4qeeYAUFrJCW8rMqbmZxY_x3y024GXcJdas1&amp;t=634604623351482412" type="text/javascript"></script>
<div>

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWAgKWr/2HAQKM54rGBpc2vYbWOzz2bN+7+yXQhzJUEzlI" />
</div>
    <div>

        <a href="#Menu1_SkipLink"><img alt="Skip Navigation Links" src="/WebResource.axd?d=mP8Ot2JexWz7kq5vYEuSB3Fh38hbxIJW0VZEOr6Wh54N5ZYBu166FK7dh5c_y7rC1ZZeVhIaexIzk95Jfrt1BLeqkSw1&amp;t=634604623351482412" width="0" height="0" style="border-width:0px;" /></a><table id="Menu1" class="menu Menu1_2" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(event)" id="Menu1n0"><table cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="white-space:nowrap;"><a class="Menu1_1" href="Home.aspx">HOME</a></td>
            </tr>
        </table></td><td style="width:3px;"></td><td onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(event)" id="Menu1n1"><table cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="white-space:nowrap;"><a class="Menu1_1" href="Services.aspx">Services</a></td>
            </tr>
        </table></td>
    </tr>
</table><a id="Menu1_SkipLink"></a>

    </div>

    <input type="submit" name="Button1" value="Button" id="Button1" class="menu" />

<script type="text/javascript">
//<![CDATA[
var Menu1_Data = new Object();
Menu1_Data.disappearAfter = 500;
Menu1_Data.horizontalOffset = 0;
Menu1_Data.verticalOffset = 0;
//]]>
</script>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:36:18.430

看看 msdn：http: [//msdn.microsoft.com/en-us/library/ms366731.aspx](http://msdn.microsoft.com/en-us/library/ms366731.aspx)

```
<asp:menu id="NavigationMenu2"
  staticdisplaylevels="3"
  orientation="Vertical"
  target="_blank"  
  runat="server"
  CssClass="menu2">

<levelsubmenustyles>
  <asp:submenustyle CssClass="level1" />
  <asp:submenustyle CssClass="level2"/> 
</levelsubmenustyles> 
```

在这种情况下，level1 将是您的菜单，level 2 将是它的项目。

# java - 如何打印检票口表中的对象列表？

> ID：12001529
> 
> 赞同：1
> 
> 时间：2012-08-17T07:25:11.700
> 
> 标签：java, wicket

我有课：

```
public class PlayerResult implements Serializable {

    private static final long serialVersionUID = 1L;

    private long playerResultId;

    private Player player;

    private String score;

    private List<Result> results;
...
} 
```

我如何将这个类打印到检票口表中？第一列应该是玩家姓名和姓氏，然后是 result.toString() 的 result.size() 列，最后一列应该是 score

谢谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:53:24.140

**编辑**

对不起，我第一次没有理解这个问题。

我从未尝试过这个（所以不确定是否可能），但也许您也可以将 ListView 应用于`<td>`标签（对于结果），就像在`<tr>`标签中完成的一样（对于 PlayerResults）。

爪哇：

```
List<PlayerResult> players = // ...
ListModel<PlayerResult> playersModel = new ListModel<PlayerResult>(players);
ListView<PlayerResult> list = new ListView<PlayerResult>("list", playersModel) {
    @Override
    protected void populateItem(ListItem<PlayerResult> item) {
        Label name = new Label("name", new PropertyModel<String>(item.getModel(), "player.name"));
        Label surname = new Label("surname", new PropertyModel<String>(item.getModel(), "player.surname"));
        Label results= new Label("results", item.getModelObject().getResults().size());

        ListView<Result> scoreList= new ListView<Result>("scoreList", item.getModelObject().getResults()){
             @Override
             protected void populateItem(ListItem<Result> resultItem) {
                   item.add(new Label("score", new PropertyModel<Integer>(resultItem.getModel(), "scoreValue ? ")));
             }
        }

        // ...

        item.add(name);
        item.add(surname);
        item.add(results);
        item.add(scoreList);
        // ...
    }
} 
```

HTML：

```
<table>
    <tr wicket:id="list">
        <td><span wicket:id="name">[name label]</span></td>
        <td><span wicket:id="surname">[surname label]</span></td>
        <td><span wicket:id="results">[results label]</span></td>
        <!-- and now variable number of tds -->
        <td wicket:id="scoreList">
             <span wicket:id="score"></span>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T09:02:55.170

所有选手的成绩单都一样大吗？然后只需实现一个 IDataProvider 迭代您的 PlayerResults。

添加适当的列：

new PropertyColumn(Model.of("Name")."player.name");

new PropertyColumn(Model.of("Suram")."player.surname");

new PropertyColumn(Model.of("Result 1"). "results.0");

new PropertyColumn(Model.of("Result 2"). "results.1"); ...

斯文

# mysql - 如何从 MySQL 转储文件中恢复特定数据库？

> ID：12001530
> 
> 赞同：1
> 
> 时间：2012-08-17T07:25:19.057
> 
> 标签：mysql, sql, phpmyadmin

我在进行备份时在主机上有一个网站，我错误地备份了整个 mysql，其中包括我所有其他网站的数据库。

所以现在的问题是我想从完整的 sql 文件中提取那个特定的数据库？是否有任何程序可以做到这一点，或者我们可以将完整的转储文件导入 mysql。这样以后我就可以在将特定数据库导入 MySQL 后将其导出。

请帮助我或建议我如何去做。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:08:10.500

**如果您不想**恢复的备份文件中的模式大小不是很大，并且那里没有那么多其他模式，那么最好的选择可能是只恢复整个备份，然后进行备份只是你的架构。仅备份您的模式的一种简单方法是使用[MySQL Workbench](http://www.mysql.com/products/workbench/)。如果您在设置或备份时遇到问题，您可能需要查看[这篇](http://forum.hostek.com/showthread.php?297-How-to-use-MySQL-Workbench-to-backup-your-MySQL-database)指导您完成安装和执行备份的小文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:28:21.273

[http://fragments.turtlemeat.com/mysql-database-backup-restore-phpmyadmin.php](http://fragments.turtlemeat.com/mysql-database-backup-restore-phpmyadmin.php)

这应该会有所帮助。

# css - 选择表格内的所有单元格

> ID：12001532
> 
> 赞同：0
> 
> 时间：2012-08-17T07:25:41.653
> 
> 标签：css

是否可以将样式应用于具有指定 ID 的表中的所有 td？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:28:13.287

是的，通过后代选择器

```
#table-id td { background:red } 
```

HTML

```
<table id="table-id"><tr><td>Hi</td><td>, There</td></tr></table> 
```

小提琴：http: [//jsfiddle.net/FjpBa/1/](http://jsfiddle.net/FjpBa/1/)

# c# - T4 模板和 Assembly.Load

> ID：12001540
> 
> 赞同：6
> 
> 时间：2012-08-17T07:26:30.780
> 
> 标签：c#, .net, t4

这是我在 StackOverflow 上的第一个问题，所以嗨 :)

是否可以在 t4 模板中使用 Assembly.Load() 按程序集名称加载程序集？我想用它来获取加载程序集中具有 ServiceContract 属性的所有类型。

```
 var loadedAssembly = Assembly.Load(assemblyName);
    var types = from type in loadedAssembly.GetTypes()
    where Attribute.IsDefined(type, typeof(ServiceContractAttribute))select type; 
```

在我的模板所在的项目中引用了所需的程序集。我发现

```
 <#@ assembly name="$(TargetDir)\DesiredAssemblyName.dll" #>
    var loadedAssembly = Assembly.GetAssembly(typeof(SomeType)); 
```

有效，但它似乎不是一个好的解决方案。此外，我希望该模板在构建后以及在 .csproj 中添加以下行时进行转换

```
 <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\
         TextTemplating\v10.0\Microsoft.TextTemplating.targets"/>
      <PropertyGroup>
         <TransformOnBuild>true</TransformOnBuild>
      </PropertyGroup>
      <ItemGroup>
         <!--Add VS\...\PublicAssemblies to the list of places
         to look for assemblies used by templates.--> 
         <T4ReferencePath Include="..\Onii.Vespa.AppServer\"/>
      </ItemGroup> 
```

使用 Assembly.GetAssembly 的解决方案也不起作用。感谢您的所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-06T10:24:10.510

您是否尝试将程序集加载到仅反射上下文？

*   [http://msdn.microsoft.com/en-us/library/ms172331(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms172331(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T13:24:11.977

`Microsoft.TextTemplating.targets`使用该指令时我遇到了同样的问题。您可以在末尾添加转换命令`.csproj`作为可能的解决方法：

```
<Target Name="AfterBuild">
  <Exec Command="&quot;%CommonProgramFiles(x86)%\Microsoft Shared\TextTemplating\$(VisualStudioVersion)\TextTransform&quot; -P &quot;..\Onii.Vespa.AppServer\&quot; -I &quot;$(ProjectDir.TrimEnd('\'))&quot; YourTemplate.tt" />
</Target> 
```

# search - 按相关实体字段快速搜索 - CRM 2011

> ID：12001542
> 
> 赞同：1
> 
> 时间：2012-08-17T07:26:36.957
> 
> 标签：search, customization, dynamics-crm-2011, crm

是否可以通过相关实体字段进行快速搜索？例如，如果我们在潜在客户实体上有联系人查找字段。我们可以通过联系人的电子邮件地址或地址名称搜索潜在客户吗？你能给我介绍一些教程吗？

我知道这可以通过使用“提前查找”选项来实现。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:39:06.907

遗憾的是，无法在本地配置快速搜索以将相关实体的属性设置为“查找列”。

您可能知道，本机解决方案是通过电子邮件地址查找联系人，然后打开他们的记录以查看他们的潜在客户。

我能想到的唯一其他解决方案是在导航或功能区按钮后面嵌入自定义 Silverlight 或 ASPX 页面。在这种情况下，您可以执行自己的搜索逻辑，但如果不做大量工作，就无法获得本地 CRM 网格的丰富功能。

# objective-c - 在 safari 中打开 iphone 应用程序内容

> ID：12001546
> 
> 赞同：-5
> 
> 时间：2012-08-17T07:26:53.197
> 
> 标签：objective-c, ios, safari, load

我正在寻找以下问题的答案。如果您知道答案，请帮助我。

问题 - 我在 iphone 应用程序空间中本地存储了一张图像。我想在 iphone safari 中显示图像，而不是在 UIWebView 上。有这样的要求，听起来很奇怪，但图像应该以任何方式显示在 safari 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:37:43.167

将其上传到远程服务器并从您的应用程序中打开 URL。它将启动`Safari`并显示图像。没有其他办法...您无法从`Safari`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:43:42.300

此行将从给定 NSURL 的应用程序中启动 Safari：

```
[[UIApplication sharedApplication] openURL:[self imageFileURL]]; 
```

通常，您会使用指向本地文件的 URL：/// 以及图像文件的路径。

但是，iOS 上似乎不允许这样做（应用程序是沙盒化的），因此您需要使用远程 URL，正如其他响应者所建议的那样。

# c# - 如何在窗口应用程序中连接两个网络摄像头？

> ID：12001549
> 
> 赞同：2
> 
> 时间：2012-08-17T07:27:10.363
> 
> 标签：c#, vb.net, c#-4.0, c#-3.0

我想在我的应用程序中连接两个网络摄像头，并使用 c# 在两个图片框控件中显示两个网络摄像头的图像。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:03:28.913

您可以尝试类似：http:
[//msdn.microsoft.com/en-us/library/ms630368.aspx](http://msdn.microsoft.com/en-us/library/ms630368.aspx)（微软建议） [http://www.codeproject.com/Articles/125478/Versatile-WebCam-C-图书馆](http://www.codeproject.com/Articles/125478/Versatile-WebCam-C-library)（上述图书馆）

还有一篇简单的文章：
[http ://blog.opennetcf.com/ctacke/2007/12/21/WIADesktopLibrary.aspx](http://blog.opennetcf.com/ctacke/2007/12/21/WIADesktopLibrary.aspx)

# ruby-on-rails - 在 routes.rb 中访问 POST 参数

> ID：12001550
> 
> 赞同：1
> 
> 时间：2012-08-17T07:27:12.447
> 
> 标签：ruby-on-rails

我有一个系统，其 Web UI 可以正常工作，API 端点位于 /receiver_api。用户发送由 Mailgun 解析的电子邮件，然后 Mailgun 将 POST 提交到此端点。根据这些参数的值（创建新帖子、创建新回复、添加订阅、删除订阅等），我们可能想要采取很多可能的操作，并且在编写处理程序时感觉就像我们在做又是一种路由！

因此，我们想根据 POST 参数选择将请求定向到的控制器。我们现在将 /receiver_api 指向一个 ReceiverApi#receiver 控制器/方法，它继承自 ApplicationController。它目前有效地将请求路由到其他不继承自 ApplicationController 的“假”控制器（因为从一个 Rails 控制器重定向到另一个控制器不起作用）。我们希望最终路由到 Rails 控制器，这样我们就可以使用 before_filter 和其中的所有其他魔法。

无论如何，一种可能会浮现在脑海中的是 routes.rb 中的一个方法，它访问 POST 参数并返回应该被定向到的 Rails 控制器/方法。2个问题：

1.  这可能吗？您可以访问 routes.rb 中的 POST 参数吗？

2.  有没有更好的方法来做到这一点？我们曾考虑过将级别提升到 Rack，并且可能会在某个时候这样做，但如果这需要一段时间，我们宁愿把一些东西拿出来。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:42:46.440

根据参数选择控制器并不是一件好事。

更好的选择是将代码（在那些假控制器中）重构为模型中的方法，并根据控制器中的参数调用模型方法。

您无法访问您的 routes.rb 中的参数，因为它在初始化时运行。

如果你真的想根据参数调用控制器，有一种方法可以做到这一点，即重定向到另一个控制器。这在~~[http://www.railsonwave.com/2008/10/25/how-to-call-a-controller-s-action-from-a-different-controller/](http://www.railsonwave.com/2008/10/25/how-to-call-a-controller-s-action-from-a-different-controller/)~~ [错误链接] 中有解释，但请注意这在很大程度上是一种黑客行为。

# java - Java：泛型，指向类型引用的超类类型引用

> ID：12001551
> 
> 赞同：0
> 
> 时间：2012-08-17T07:27:15.203
> 
> 标签：java, generics

在我尝试编译的以下代码中：

```
List<Animal> animals;
List<? extends Animal> some;
animals = some; 
```

我收到以下错误：

```
Type mismatch: cannot convert from List<capture#2-of ? extends Animal> to List<Animal> 
```

但是一个包含的列表`<? extends Animal>`保证至少包含`Animal`类型，那么为什么会出现这个错误呢？这是因为如果允许的话，我可以将任何随机子类对象`Animal`放入“动物”列表中，还是别的什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:30:46.050

`List<? extends Animal>`表示该列表包含 的未知子类型的所有实例`Animal`，例如`List<Cat>`等等`List<Dog>`。

`List<Animal>`相反，可能包含两个`Cat`,`Dog`实例，因此强制转换是不合法的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:30:19.083

因为`List<? extends Animal>`不是 的子类型`List<Animal>`。如果您的分配是合法的，那么您可以将 Dog 对象添加到 Cat 列表中。像这样：

```
List<Animal> cats = new List<Animal>();
cats.add(new Cat());
List<Dog> dogs = cats; //if was legal
dogs.add(new Dog)); //now you have a dog in a list of cats 
```

当心数组！对于数组，赋值是合法的，问题不是在编译时而是在运行时发现的。例如：

```
Animal[] cats = new Animal[] {...};
Dogs[] dogs = cats; // OK at compile time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T07:32:28.247

见[我的评论](https://stackoverflow.com/questions/12001551/java-generics-superclass-type-reference-pointing-to-extends-superclass-typ#comment16007094_12001551)。

`List<? extends Animal>`意味着它是某个未知类型的列表，它`Animal`是`Animal`. `List<Animal>`可以接受任何`Animal`，但`List<Lion>`（被安全地视为`List<? extends Animal>`）显然不能。

这是[上界通配符](http://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html)的经典示例。确保您阅读了 Java 教程。

* * *

如果您只想 a`List<Animal>`包含您的所有元素`List<? extends Animal>`，您可以只做...

```
final List<? extends Animal> someAnimals = ...;
final List<Animal> animals = new ArrayList<Animal>(someAnimals); 
```

这利用了`ArrayList`具有[构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#ArrayList(java.util.Collection))的事实，该构造函数采用`Collection<? extends E>`.

# jquery - 是否可以使用 jQuery 从 Gmail 下载电子邮件？

> ID：12001552
> 
> 赞同：2
> 
> 时间：2012-08-17T07:27:16.323
> 
> 标签：jquery, imap

这听起来像是一个愚蠢的问题，但是否可以使用 jQuery 从 Gmail 下载电子邮件？如果是这样，怎么做？

这需要作为一个更大的内部产品的概念证明，我们试图在可能的情况下绕过服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:38:41.090

不，无法从 IMAP 服务器下载电子邮件。我能想到的是使用 JQuery 来使用 $.ajax 或 $.post 连接到服务器端函数，该函数返回要在浏览器中显示的电子邮件数据列表。不过，我认为这是你能做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:37:10.773

不，因为您至少需要一种服务器端语言。

你为什么要问这个特别的问题？让我们知道这个 jquery-approach-wish 的背后是什么。

# iphone - 从 iPhone 应用程序中的 URL 识别文件类型

> ID：12001562
> 
> 赞同：1
> 
> 时间：2012-08-17T07:27:51.663
> 
> 标签：iphone, objective-c, ios, url, nsfilemanager

对于 iPhone 应用程序，我正在使用 URL 下载文件：

从这种类型的 url:: [http://xxxxxxxxxxxxxxxxxxxxx.com/xxxxxxx//xxx/ipad.html?operation=getFile&contentId=61768b16-6b44-4d0b-bdcf-d10107d1f328](http://xxxxxxxxxxxxxxxxxxx.com/xxxxxxx//xxx/ipad.html?operation=getFile&contentId=61768b16-6b44-4d0b-bdcf-d10107d1f328)

我正在从服务器下载文件，但它可能是 .pdf 或 .docx 或 .doc 类型

有没有办法从 url 识别文件类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:34:24.927

不，由于文件名不在 URL 中，因此您无法做出假设。

但是在您收到 URL 的标头后，他们可能会告诉您您将收到什么样的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:40:06.100

在下面的 NSURLConnectionDelegate 方法中

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
NSString *mimeType = [response MIMEType]
NString *suggestedFilename = [response suggestedFilename];

} 
```

当然，只有从服务器获取它们才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:45:15.710

您提供的 URL 中没有类型的指示，即使 URL 确实似乎指定了某种类型的文件（例如`http://foo.com/bar.pdf`），也不能保证服务器实际上会返回 PDF 文件。

如果您不想下载该文件，您可以随时发出 HEAD 请求以仅获取 HTTP 标头并查看标头的值`Content-Type`。或者，您可以`Accept`在请求中放置一个标头，以限制对特定类型数据的响应。

# flex4 - Flex Mate - 在 Manager 和 View 之间映射时，PropertyInjector 触发了两次

> ID：12001570
> 
> 赞同：0
> 
> 时间：2012-08-17T07:28:30.420
> 
> 标签：flex4, mate

我的应用程序使用 Flex 4 和 Mate 框架 0.9.1。当经理和视图之间存在映射时，我遇到了 PropertyInjector 被触发两次的问题。

我没有在这里分享原始代码，但它看起来类似于以下内容： 基于事件，更新 MyManager 中的属性（someData）。属性注入器在目标视图 (MyView) 中更新这个新值。问题是 - 当 onDataChanged 被调用并且属性 someData 被更新时，视图中的“set someData”方法被触发了两次。我知道视图只被实例化一次，因为我已经调试了 init 和 creationComplete 事件。MyManager 中的源属性也仅根据跟踪更新一次。

这表明属性注入器被触发了两次。有谁知道在什么条件下会发生这种情况？任何指针将不胜感激！

MyEventMap.mxml

```
 <EventHandlers type="{DataChangedEvent.GET}" debug="true">
        <MethodInvoker generator="{MyManager}" method="onDataChanged"
                   arguments="{[event.x,event.y,event.name]}">

        </MethodInvoker>
    </EventHandlers>

    <Injectors target="{MyView}" debug="true"> 
        <PropertyInjector targetKey="someData" source="{MyManager}"
                       sourceKey="someData">

        </PropertyInjector>
    </Injectors> 
```

数据持有者.as

```
public class DataHolder
{
    public function DataHolder()
    {
    }
    public var x:Number;
    public var y:Number;
    public var name:String;
} 
```

MyManager.as

```
public class MyManager extends EventDispatcher
{
    ....

    [Bindable] public var someData:DataHolder;

    public function onDataChanged(x:Number,y:Number,name:String):void{
        trace("dataChanged");
        var temp:DataHolder = new DataHolder();
        temp.name=name;
        temp.x=x;
        temp.y=y;
        someData = temp;    

    }
} 
```

我的视图.mxml

```
public function set someData(data:DataHolder):void {
    trace("setSomeData x="+data.x+",y="+data.y+",name="+data.name);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:09:34.023

我发现问题是由于 BabelFX 2.0 和 Mate 框架 0.9.1 的组合造成的。下面是 BabelFX 相关代码。使用 MyView 作为 ResourceInjector 的目标会导致与其相关的所有 PropertyInjector 被触发两次。下面的代码有问题吗？

测试本地化.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<LocaleMap  enableLog="true"
        xmlns="http://l10n.babelfx.org/" 
        xmlns:mx="http://www.adobe.com/2006/mxml" 
        xmlns:factory="mx.core.*" >

<mx:Metadata>
    [ResourceBundle("testprop")]
</mx:Metadata>

<ResourceInjector bundleName="testprop" target="{MyView}">
    <ResourceSetter property="myButton.label" key="testsomething.title"/>
</ResourceInjector> 
```

MyView.mxml（也是主应用程序）

```
 <?xml version="1.0" encoding="utf-8"?>
 <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*"
           xmlns:mate="http://mate.asfusion.com/">

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <mate:Debugger level="{Debugger.ALL}" />
    <local:testLocalization/>
    <local:MyEventMap/>

</fx:Declarations>
<s:Button id="myButton">

</s:Button>

 </s:Application> 
```

testprop.properties

```
testsomething.title = SOMETHING 
```

# objective-c - Objective-C，动画 gui 的方法

> ID：12001573
> 
> 赞同：0
> 
> 时间：2012-08-17T07:28:39.923
> 
> 标签：objective-c, user-interface, animation

我已经使用 Cocoa API 创建了许多类型的界面——其中一些使用[记录在案的基本动画技术](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAnimation_Class/Reference/Reference.html)，而另一些则只是通过试验（例如将动画 .gif 放入 NSImage 类中）——这产生了一些灾难性的后果。我的问题是创建动画和动态 GUI 以使其以最佳方式正确运行的正确或最有效的方法是什么？

我能想到的最接近的例子是使用类似类型的动画，这是人们可能会在任何数量的交互式网站或界面上看到的在[Flash中完成的事情。](https://stackoverflow.com/questions/265476/gui-framework-for-flash-as3)我确信 Flash 可以在 Cocoa 应用程序中使用，但如果有一种方法可以在不重新发明轮子或不必使用 3rd 方 SDK 的情况下实现类似的结果，我很想得到一些输入。请记住，我不只是在考虑游戏、iOS 等的动画——我最感兴趣的是 Mac OS X 的动画 GUI，并使其“流动”，因为人们可能会在其中进行交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:35:29.580

我建议你看看 Core Animation。它是 Apple 为 OS X 和 iOS 提供硬件加速动画的框架。它是为制作动画 GUI 而设计的。

您可以为位置、不透明度、颜色、变换等设置动画属性，还可以使用 CAGradientLayer 为渐变[设置动画，并使用 CAShapeLayer](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAShapeLayer_class/Reference/Reference.html)[和](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAGradientLayer_class/Reference/Reference.html)许多其他东西为非矩形形状设置动画。

[Core Animation Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004627-SW1)是一个很好的入门资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:09:19.990

如果您希望添加许多图形动画，请选择基于 OpenGLES 的 iOS 的 xcode 项目。这有助于你减少性能问题。您可以将 gif 中的每个帧渲染为 2D 纹理。

# ruby-on-rails-3 - 是否可以在 Sunspot solr 中合并两个关联表

> ID：12001574
> 
> 赞同：0
> 
> 时间：2012-08-17T07:28:47.643
> 
> 标签：ruby-on-rails-3, sunspot, sunspot-rails, sunspot-solr

我有四张桌子。它们是品牌、部门、类别和产品详细信息。模型是

品牌型号

```
class Brand < ActiveRecord::Base
  has_many :product_details, :dependent=>:destroy
  searchable do
    integer :id
    text :name
  end
end 
```

部门模型

```
class Department < ActiveRecord::Base
  has_many :product_details, :dependent=>:destroy
  searchable do
    integer :id
    text :name
  end  
end 
```

类别型号

```
class Category < ActiveRecord::Base
  has_many :product_details, :dependent=>:destroy
  searchable do
    integer :id
    text :name   
  end
end 
```

产品详细型号

```
class ProductDetail < ActiveRecord::Base
  belongs_to :department
  belongs_to :category
  belongs_to :brand
  searchable do
    text :name
    text :brand do
      brand.name
    end
    integer :department_id
    integer :category_id
end 
```

如果用户首先搜索部门 1，我将根据部门 ID 获取所有产品详细信息。结果表还必须包含品牌名称、类别名称和部门名称。是否可以使用 sunspot solr 来做到这一点？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:31:56.140

我认为您应该为每个产品创建一个包含品牌、部门、类别和产品详细信息的文档。
然后您就可以搜索您想要的内容，并接收您需要的信息。

# javascript - 如何从 URL 中获取文件名和扩展名？

> ID：12001575
> 
> 赞同：2
> 
> 时间：2012-08-17T07:28:58.547
> 
> 标签：javascript, prototypejs

我正在使用原型并尝试`src`从`<img>`. 例如，我想`colorch091001-black-2.jpg`摆脱这个：

```
<img id="small_img_src" src="http://127.0.0.1/magento162/media/catalog/product/cache/1/image/265x265/9df78eab33525d08d6e5fb8d27136e95/c/o/colorch091001-black-2.jpg"> 
```

我可以通过以下方式获得`src`价值：

```
var img = $('small_img_src').src; 
```

但是我怎样才能得到文件名和扩展名呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:32:57.703

试试这个，对于纯 JavaScript 解决方案

```
<img id="small_img_src" 
     title="Royal Dress" alt="" 
     src="http://127.0.0.1/magento162/media/catalog/product/cache/1/image/265x265/9df78eab33525d08d6e5fb8d27136e95/c/o/colorch091001-black-2.jpg"
     style="display: block;" />

var src = document.getElementById('small_img_src').src;
alert(src.substring(src.lastIndexOf('/') + 1)); 
```

# php - Paypal 付款后显示状态“待处理”

> ID：12001582
> 
> 赞同：1
> 
> 时间：2012-08-17T07:29:18.347
> 
> 标签：php, paypal, sandbox

我正在尝试将支付网关集成到我的基于 PHP 的应用程序中。为此，我正在使用沙盒。但付款后状态显示为待处理，但金额已从帐户中扣除。

我的代码是这样的：

```
<form name="frm" action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick" />
     <input type="hidden" name="business" value="sri_1338363856_biz@gmail.com" />
     <input type="hidden" name="amount" value="<?php echo get_plan_value($plan_id); ?>" />
     <input type="hidden" name="no_shipping" value="1" />
     <input type="hidden" name="no_note" value="1" />
     <input type="hidden" name="currency_code" value="USD" />
     <input type="hidden" name="lc" value="US" />
     <input type="hidden" name="item_name" value="<?php echo get_plan_name_by_value($_REQUEST['bus_plan']) ?> Registration" />
     <input type="hidden" name="bn" value="PP-BuyNowBF" />
     <input type="hidden" name="return" value="http://localhost/uploaded_server_alert/backup/alertR/business/payments-over.php?last_id=<?php echo $lastId; ?>&agent_email=<?php echo $agent_email; ?>&username=<?php echo ($uname); ?>&contact_email=<?php echo $contact_email; ?>" />
     <input type="hidden" name="rm" value="2" />

     <input type="submit"  border="0" name="submit" value="Order Now" alt="Make payments with PayPal - it's fast, free and secure!" class="additional_height" title="Make payments with PayPal - it's fast, free and secure!" />
     <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" /> 
  </form> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:47:09.490

那是因为启用了[付款审查。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_testing_SBPaymentReview)

在 Developer Central -> Test Accounts 中将其更改为已禁用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:47:19.207

仔细检查您的 IPN 侦听器和 IPN 处理程序。

查看一些示例代码：

[http://www.micahcarrick.com/paypal-ipn-with-php.html](http://www.micahcarrick.com/paypal-ipn-with-php.html) http://www.evoluted.net/thinktank/web-development/paypal-php-integration

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:17:02.700

问题是您没有提到 notify_url。notify_url 是 paypal 发送 IPN 以验证商品价格、reciever_email、货币等的 url，notify_url 不应该是 localhost 的 url，因为当您现在被重定向到 paypal 时，您在 paypal 的域上，并且当 paypal 尝试完成交易后发送 IPN 命中它将获得 localhost 的 ulr，并且在 paypal 上没有类似 localhost 的内容。

```
Write following input tag: 

<input type="hidden" id="notify_url" name="notify_url" value="url of ipn listener"/> 

in above tag replace value by your ipn listener url. 
```

# android - 使用 Graph Api 的 Android Facebook Places

> ID：12001584
> 
> 赞同：0
> 
> 时间：2012-08-17T07:29:35.953
> 
> 标签：android, facebook, facebook-graph-api

我是安卓新手。我使用 Graph Api 搜索的地方如下

```
https://graph.facebook.com/search?q=Hyderabad&type=place&access_token=..... 
```

这里“海得拉巴”是我的搜索地点。它给出了成功的结果。结果包含每个地方的 id。N0w 我的问题是

1）如何将特定地点添加到我的收藏夹部分？

2）我怎样才能创建新的地方？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:19:30.127

> 1）如何将特定地点添加到我的收藏夹部分？

你是什​​么意思？你能详细说明吗？

对于您的第二个问题，[请阅读此解决方案](https://stackoverflow.com/a/6018301/931354)，这将回答您的问题。

# hibernate - 在 JBoss AS7 中部署 Hibernate jar 失败

> ID：12001585
> 
> 赞同：0
> 
> 时间：2012-08-17T07:29:36.677
> 
> 标签：hibernate, deployment, ejb, jboss7.x, ear

我的耳朵只包含 2 个模块：一个包含 Hibernate 逻辑的 jar（名为 CorbeilleGestionHibernate.jar）和一个 EJB jar（名为 CorbeilleGestionEJBImpl.jar）。

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
  <display-name>CorbeilleGestionEAR</display-name>
  <initialize-in-order>true</initialize-in-order>
  <module>
    <java>./CorbeilleGestionHibernate.jar</java>
  </module>
  <module>
    <ejb>CorbeilleGestionEJBImpl.jar</ejb>
  </module>
  <library-directory>lib</library-directory>
</application> 
```

我的问题是在 EJB jar 中我可以通过 JNDI 访问 Hibernate jar 中的对象。

在独立模式下启动 JBoss 时，这在本地非常有用。但是当我在域模式下启动 JBoss 时，出现以下错误：

```
08:56:43,181 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.deployment.subunit."CorbeilleGestionEAR.ear"."CorbeilleGestionEJBImpl.jar".component.StartupBean.START: org.jboss.msc.service.StartException in service jboss.deployment.subunit."CorbeilleGestionEAR.ear"."CorbeilleGestionEJBImpl.jar".component.StartupBean.START: Failed to start service
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_30]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_30]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_30]
Caused by: java.lang.IllegalStateException: JBAS011048: Failed to construct component instance
        at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:163)
        at org.jboss.as.ee.component.BasicComponent.createInstance(BasicComponent.java:85)
        at org.jboss.as.ejb3.component.singleton.SingletonComponent.getComponentInstance(SingletonComponent.java:116)
        at org.jboss.as.ejb3.component.singleton.SingletonComponent.start(SingletonComponent.java:130)
        at org.jboss.as.ee.component.ComponentStartService.start(ComponentStartService.java:44)
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
        ... 3 more
Caused by: javax.ejb.EJBException: java.lang.IllegalStateException: javax.naming.NameNotFoundException: CorbeilleGestionHibernate -- service jboss.naming.context.java.jboss.CorbeilleGestionHibernate
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx(CMTTxInterceptor.java:166)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230)
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.requiresNew(CMTTxInterceptor.java:333)
        at org.jboss.as.ejb3.tx.SingletonLifecycleCMTTxInterceptor.processInvocation(SingletonLifecycleCMTTxInterceptor.java:56)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:161)
        ... 9 more
Caused by: java.lang.IllegalStateException: javax.naming.NameNotFoundException: CorbeilleGestionHibernate -- service jboss.naming.context.java.jboss.CorbeilleGestionHibernate
        at org.jboss.spring.support.SpringInjectionSupport.lookup(SpringInjectionSupport.java:180)
        at org.jboss.spring.support.SpringInjectionSupport.getObjectFromBeanFactory(SpringInjectionSupport.java:136)
        at org.jboss.spring.support.SpringInjectionSupport.injectToField(SpringInjectionSupport.java:202)
        at org.jboss.spring.support.SpringInjectionSupport.inject(SpringInjectionSupport.java:80)
        at org.jboss.spring.callback.SpringLifecycleInterceptor.postConstruct(SpringLifecycleInterceptor.java:43)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_30]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_30]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_30]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_30]
        at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptorFactory$ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptorFactory.java:118)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.ManagedReferenceFieldInjectionInterceptorFactory$ManagedReferenceFieldInjectionInterceptor.processInvocation(ManagedReferenceFieldInjectionInterceptorFactory.java:112)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.ManagedReferenceFieldInjectionInterceptorFactory$ManagedReferenceFieldInjectionInterceptor.processInvocation(ManagedReferenceFieldInjectionInterceptorFactory.java:112)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:95)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:95)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:95)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:95)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
        at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final]
        at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228)
        ... 18 more
Caused by: javax.naming.NameNotFoundException: CorbeilleGestionHibernate -- service jboss.naming.context.java.jboss.CorbeilleGestionHibernate
        at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)
        at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
        at org.jboss.as.naming.InitialContext.lookup(InitialContext.java:123)
        at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:214)
        at javax.naming.InitialContext.lookup(InitialContext.java:392) [rt.jar:1.6.0_30]
        at org.jboss.spring.support.SpringInjectionSupport.lookup(SpringInjectionSupport.java:173)
        ... 49 more 
```

这个错误显然意味着 Hibernate jar 没有在 EJB jar 之前加载。

我尝试通过像这样在 jboss-deployment-structure.xml 中添加依赖项来“强制”部署

```
<sub-deployment name="CorbeilleGestionEJBImpl.jar">
    <dependencies>
        <module name="deployment.CorbeilleGestionEAR.ear.CorbeilleGestionHibernate.jar"  />
        <module name="org.jboss.as.webservices.server.integration" />
    </dependencies>
</sub-deployment> 
```

但这似乎并没有改变任何东西。

我做了一些搜索，在我看来，Java 模块不尊重“按顺序初始化”属性。我错了吗 ？

如果我错了，我不明白为什么在我的 EJB jar 之前没有加载 Hibernate jar。

如果我没记错的话，在我的 EJB jar 之前加载我的 Hibernate jar 的最佳解决方案是什么。

为了完成这个问题，从 JNDI 加载的对象是在 Spring 上下文中定义的对象。这个上下文在这个 jboss-spring.xml 文件中定义

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- Ceci permet de définir le nom JNDI -->
    <description>BeanFactory=(CorbeilleGestionHibernate)</description>

    <!-- Chargement des properties -->
    <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>file:${jboss.server.config.dir}/corbeille/corbeille.properties</value>
            </list>
        </property>
    </bean>

    <!-- Pour pouvoir récupérer l'application context facilement -->
    <bean id="hibernateApplicationContextHolder" class="com.sham.corbeille.util.SpringApplicationContextHolder" />

    <import resource="*-config.xml"/>
</beans> 
```

您可以看到我们加载了所有“*-config.xml”，即两个文件：db-config.xml 和 dao-config.xml。db-config.xml 的内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/jee
        http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean id="hibernateJpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="jpaVendorAdapter" ref="hibernateJpaVendorAdapter" />
        <property name="persistenceXmlLocation" value="classpath:META-INF/jpa-persistence.xml" />
    </bean>

    <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManagerName" value="java:jboss/TransactionManager" />
        <property name="userTransactionName" value="java:jboss/UserTransaction" />
        <property name="transactionSynchronizationRegistryName" value="java:jboss/TransactionSynchronizationRegistry" />
    </bean>

    <bean id="exceptionTranslator" class="org.springframework.orm.hibernate4.HibernateExceptionTranslator"/>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- JPA annotations bean post processor -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <!-- Exception translation bean post processor -->
    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

</beans> 
```

dao-config.xml 的内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- Configuration par annotations -->
    <context:annotation-config />
    <context:component-scan base-package="com.sham.corbeille.dao" />

    <!-- DAOs Codification -->
    <bean id="elementCodifDAO" class="com.sham.corbeille.dao.codification.ElementCodifDAOImpl" />
    <bean id="sinCodTacheDAO" class="com.sham.corbeille.dao.codification.SinCodTacheDAOImpl" />

    <!-- DAOs Client -->
    <bean id="cliClientDAO" class="com.sham.corbeille.dao.client.CliClientDAOImpl" />

    <!-- DAOs Contrat -->
    <bean id="conContratDAO" class="com.sham.corbeille.dao.contrat.ConContratDAOImpl" />

    <!-- DAOs Flux -->
    <bean id="vueMessagesCorbeilleFluxClientDAO" class="com.sham.corbeille.dao.flux.VueMessagesCorbeilleClientDAOImpl" />
    <bean id="vueMessagesCorbeilleFluxSinistreDAO" class="com.sham.corbeille.dao.flux.VueMessagesCorbeilleSinistreDAOImpl" />
    <bean id="vueMessagesCorbeilleFluxUtilisateurDAO" class="com.sham.corbeille.dao.flux.VueMessagesCorbeilleUtilisateurDAOImpl" />

    <!-- DAOs Habilitations -->
    <bean id="habUtilisateurDAO" class="com.sham.corbeille.dao.habilitations.HabUtilisateurDAOImpl" />
    <bean id="habGroupeDAO" class="com.sham.corbeille.dao.habilitations.HabGroupeDAOImpl" />
    <bean id="habFonctionDAO" class="com.sham.corbeille.dao.habilitations.HabFonctionDAOImpl" />

    <!-- DAOs Historisation -->
    <bean id="sinHistoriseEtatNotifDAO" class="com.sham.corbeille.dao.historisation.SinHistoriseEtatNotifDAOImpl" />
    <bean id="sinHistoriseEtatMessageDAO" class="com.sham.corbeille.dao.historisation.SinHistoriseEtatMessageDAOImpl" />

    <!-- DAOs Notifications -->
    <bean id="sinNotificationsDAO" class="com.sham.corbeille.dao.notifications.SinNotificationsDAOImpl" />
    <bean id="sinMessagesDAO" class="com.sham.corbeille.dao.notifications.SinMessagesDAOImpl" />
    <bean id="notificationDAO" class="com.sham.corbeille.dao.notifications.NotificationDAOImpl" />

    <!-- DAOs Personne -->
    <bean id="cliContactsDAO" class="com.sham.corbeille.dao.personne.CliContactsDAOImpl" />
    <bean id="sinActeurExterneDAO" class="com.sham.corbeille.dao.personne.SinActeurExterneDAOImpl" />

    <!-- DAOs Règlements -->
    <bean id="sinReglementDAO" class="com.sham.corbeille.dao.reglement.SinReglementDAOImpl" />

    <!-- DAOs Sinistres -->
    <bean id="sinSinistreDAO" class="com.sham.corbeille.dao.sinistres.SinSinistreDAOImpl" />
    <bean id="sinProcedureDAO" class="com.sham.corbeille.dao.sinistres.SinProcedureDAOImpl" />
    <bean id="sinVictimeDAO" class="com.sham.corbeille.dao.sinistres.SinVictimeDAOImpl" />

    <!-- DAOs Vues -->
    <bean id="vueMessagesCorbeilleDAO" class="com.sham.corbeille.dao.vues.VueMessagesCorbeilleDAOImpl" />
</beans> 
```

这在 EJB 中用于注入对象。例如，要注入 CliClientDAO 类型的对象，我们使用以下注解

```
@Spring(bean = "cliClientDAO", jndiName = "CorbeilleGestionHibernate") 
```

这些注入是导致 JNDI 查找失败的原因

如果您需要任何进一步的信息以完全理解问题，请询问我。

# php - 从 Perl 脚本接收哈希以在 PHP 中使用

> ID：12001588
> 
> 赞同：1
> 
> 时间：2012-08-17T07:29:37.540
> 
> 标签：php, perl

我有一个 perl 脚本，它为我做了很多配置文件解析，并创建了一个包含我需要的所有信息的哈希。

我想从 PHP 调用该脚本并让 PHP 获取哈希以便能够使用 php 中的哈希，而不仅仅是从 perl 脚本返回一些 html 代码。

那可能吗？还没有找到任何方法，只知道我能够返回大量 html 代码作为输出，但这不是我想要 perl 脚本做的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T07:36:58.153

最简单的方法是将此哈希序列化为`json`perl 并将结果字符串打印到 STDOUT。

在 PHP 中，它可以很容易地解码为数组或对象...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:35:16.470

如果执行 PHP 的平台允许，您可以调用 exec() 函数来执行外部文件，例如：

```
$result = exec( "/path_to/your_script.pl", $lines, $state); 
```

# php - PHP 洗牌一个数组并记住

> ID：12001589
> 
> 赞同：-1
> 
> 时间：2012-08-17T07:29:45.127
> 
> 标签：php, cookies, shuffle

我希望php为用户洗牌一次，然后通过cookie记住它，这样在刷新时，如果设置了cookie，数组就不会再次洗牌。那可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:32:42.397

使用[shuffle](http://php.net/shuffle)进行改组并将您的数组[保存](http://php.net/set_cookie)在 cookie 中（[serialize](http://php.net/serialize)）。每个页面都重新加载，您[检查 cookie 是否存在](http://www.php.net/manual/en/reserved.variables.cookies.php)，如果存在则读取它，如果不存在，则将您的数据洗牌并保存..

# android - 为什么在 android 中需要 OpenCV Manager 和 neon？

> ID：12001598
> 
> 赞同：3
> 
> 时间：2012-08-17T07:30:15.520
> 
> 标签：android, opencv, face-detection

谁能告诉我为什么我们需要opencv管理器在android中运行openCV库的示例应用程序..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:39:28.557

[http://opencv.itseez.com/trunk/android/service/doc/Intro.html](http://opencv.itseez.com/trunk/android/service/doc/Intro.html)

OpenCV 管理器只是库本身，但打包在一个应用程序中并由 OpenCV 团队更新，您的应用程序始终保持最新的 OpenCV。

Neon 是一组用于 ARM SoC 的指令，可以使使用 NEON 指令的代码的执行速度更快。

与往常一样，您也可以自己构建和链接 OpenCV；没有必要这样做，这在典型情况下很方便。

# r - 根据特定值汇总行

> ID：12001601
> 
> 赞同：2
> 
> 时间：2012-08-17T07:30:31.017
> 
> 标签：r

这是我的数据框

```
Colour = c("red",   "blue", "red",  "blue", "yellow",   "green",    "red",  "blue", "green",    "red",  "yellow",   "blue")
Volume  = c(46,46,57,57,57,57,99,99,99,111,111,122)
Cases   = c(7,2,4,2,3,5,1,2,3,2,4,1)
df = data.frame(Colour, Volume, Cases) 
```

`"red"`如果颜色是OR`"blue"`但如果体积相同，我想总结案例。应保留那些未指定的颜色。如果红色和蓝色因为不同而无法总结，`Volume`那么它们也应该保留

结果应该是这样的：

```
Colour = c("red_or_blue","red_or_blue","yellow","green","red_or_blue","green","red","yellow","blue")
Volume  = c(46,57,57,57,99,99,111,111,122)
Cases   = c(9,6,3,5,3,3,2,4,1)
df_agg = data.frame(Colour, Volume, Cases) 
```

我已经找到了一种方法，可以创建另一列，为`"red_or_blue"`红色或蓝色的行分配一个，为其余行分配一个 x。然后我使用了聚合：

```
df$test = ifelse(df$Colour %in% c("red", "blue"),"red_or_blue","x")
df_agg = aggregate(df$Cases, list(df$Volume, df$test), sum) 
```

它有效，但我发现这有点麻烦。有没有更方便的方法可以跳过创建额外的列？将来我需要总结第 57/99 卷的红色/蓝色和案例。拥有额外的列似乎使它变得更加棘手。

此外，如果它不是红色也不是蓝色，我没有设法让原始颜色被接管。我尝试过这种方式，但它不起作用：

```
df$test = ifelse(df$Colour %in% c("red", "blue"),"red_or_blue",df$Colour) 
```

干杯，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:21:06.693

这是一种坚持基础 R 的方法（但可能不是最有效的方法....）

1.  按以下方式将数据分组`Volume`

    ```
    temp = split(df, df$Volume) 
    ```

2.  创建一个快速函数以仅在存在“红色”和“蓝色”的组中更改“红色”和“蓝色”的***值***。

    ```
    red.and.blue = function(x) {
      if (sum(c("red", "blue") %in% x$Colour) > 1) {
        x$Colour = gsub("red|blue", "red-and-blue", x$Colour)
      } else {
        x$Colour = as.character(x$Colour)
      }
      x
    } 
    ```

3.  `temp`在您在步骤 1 中创建的对象上使用该函数：

    ```
    temp = lapply(temp, red.and.blue) 
    ```

4.  用于`aggregate()`执行您需要执行的聚合。在参数中指定名称，`aggregate()`以便您保留原始列名。

    ```
    temp = lapply(temp, function(x) aggregate(list(Cases = x$Cases), 
                                              list(Colour = x$Colour, 
                                                   Volume = x$Volume), sum)) 
    ```

5.  将其全部放回`data.frame()`. 如果要按原样存储，请不要忘记分配名称。

    ```
    do.call(rbind, temp)
    #             Colour Volume Cases
    # 46    red-and-blue     46     9
    # 57.1         green     57     5
    # 57.2  red-and-blue     57     6
    # 57.3        yellow     57     3
    # 99.1         green     99     3
    # 99.2  red-and-blue     99     3
    # 111.1          red    111     2
    # 111.2       yellow    111     4
    # 122           blue    122     1 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:24:04.113

我认为如果您遵循@mrdwab 的方法，您可以`sapply`在每个“拆分卷”上使用

```
df$Cases <- sum(df[(df$Colour =='blue' | df$Colour == 'red'),][,3]) 
```

得到案例的数量，和

```
df$Colour[(df$Colour =='blue' | df$Colour == 'red')] <- 'readandblue' 
```

更改颜色名称。我也愿意打赌有一个 2 线解决方案正在使用`ddply`，但我不是那个工具的专家（还）。

# javascript - 在 Metro App 中单击 Listview 项目？

> ID：12001603
> 
> 赞同：1
> 
> 时间：2012-08-17T07:30:32.367
> 
> 标签：javascript, html, microsoft-metro, winjs

我正在使用 HTML5、WinJS 开发 Metro 应用程序。这里我使用我自己的服务在我的主页的 Listview 中显示用户详细信息（近 5 个字段）。但是每个用户都包含超过 20 个服务字段，所以当我点击 listview-item 时，它必须导航 details-page 并且需要显示 details 。我在主页中显示了带有一些详细信息的列表视图，但无法执行单击具有更多详细信息的项目。希望我的问题很好。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:36:54.880

WinJS.UI.ListView 有一个 iteminvoked 事件，当您单击或点击某个项目时会触发该事件。更多[信息在这里](http://msdn.microsoft.com/en-us/library/windows/apps/br211827.aspx)。

# javascript - 使用 angularjs 的 Google 地图未显示在第二个局部视图上

> ID：12001605
> 
> 赞同：1
> 
> 时间：2012-08-17T07:30:35.943
> 
> 标签：javascript, google-maps, google-maps-api-3, angularjs

我一直在这里关注这个问题的答案/示例。 [在 AngularJS 中初始化谷歌地图](https://stackoverflow.com/questions/11180750/initialize-google-map-in-angularjs)

我已经设置了一个正在发生的事情的 plunker 示例。 [http://plnkr.co/edit/5fN7PR](http://plnkr.co/edit/5fN7PR)

包括 git repo 示例。当我第一次查看地图页面（部分）时，我的地图会加载，但是如果我选择另一个链接，然后返回地图，地图不会加载。我可以看到地图仍然存在，因为它被称为它只是没有用 id="map" 替换 div。

我不在乎地图会在这个阶段重新初始化，我已经为不同地方的地图设置了一个商店，但是没有地图就无法工作！我的列表和详细信息页面按预期工作。/web/place 是对我的 silex 后端的 ajax 调用。

## 索引.html

```
<div class="container full-width" ng-view></div> 
```

## 应用程序.js

```
'use strict';

/* App Module */
var app = angular.module('places', ['Controllers', 'Filters', 'Services']);

app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/places', {templateUrl: 'partials/place-list.html',   controller: 'ListController'}).
      when('/places/:placeId/details', {templateUrl: 'partials/place-detail.html', controller: 'DetailController'}).
      when('/places/:placeId/map', {templateUrl: 'partials/place-map.html', controller: 'MapController'}).
      otherwise({redirectTo: '/places'});
}]); 
```

## 控制器.js

```
'use strict';

/* Controllers */
var controllers;
controllers = angular.module("Controllers", []);

controllers.controller("ListController", function($scope, Place) {
    $scope.places = Place.query();
});

controllers.controller("DetailController", function($scope, $routeParams, Place) {
    $scope.place = Place.get({placeId: $routeParams.placeId});
});

controllers.controller("MapController", function($scope, $routeParams, Place, GoogleMaps) {
    $scope.place = Place.get({placeId: $routeParams.placeId});
    $scope.map = GoogleMaps;
}); 
```

## 服务.js

```
'use strict';

/* Services */
var services;

services = angular.module('Services', ['ngResource']);

services.factory('Place', function($resource){
    return $resource('/web/place/:placeId', {}, {
        query: {method:'GET', params:{placeId:'list'}, isArray:true}
    });
});

services.factory('GoogleMaps', function() {
    var map_id  = '#map';
    var lat     = -25;
    var lng     = 133;
    var zoom    = 16;
    var map     = initialize(map_id, lat, lng, zoom);

    console.log(map);
    return map;

    function initialize(map_id, lat, lng, zoom) {
        var myOptions = {
            zoom : zoom,
            center : new google.maps.LatLng(lat, lng),
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };

        console.log(myOptions);

        return new google.maps.Map($(map_id)[0], myOptions);
    }
}); 
```

## place-map.html

```
<div id="map" style="width: 100%;"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:33:31.097

我已经开始使用 angularjs UI。它解决了我的问题。

# sql - 如何在 SQLExecDirect 中执行参数化存储过程

> ID：12001611
> 
> 赞同：1
> 
> 时间：2012-08-17T07:31:09.380
> 
> 标签：sql, sqlapi++

我想使用`SQLExecDirect()`.

所以我正在使用`SQLBindParameter()`. 我也`SQL_PARAM_OUTPUT`用来绑定输出参数。

但执行查询后，我得到`SQL_ERROR`. 这是代码。

```
SQLBindParameter(hStmt, 1, SQL_PARAM_INPUT, SQL_C_CHAR, 
                                         SQL_CHAR , 40, 0, name, sizeof(name) ,
                                         SQL_NULL_HANDLE);

SQLBindParameter(hStmt, 2, SQL_PARAM_OUTPUT, SQL_C_CHAR, 
                                         SQL_CHAR , 40, 0, userSID, sizeof(userSID) ,
                                         SQL_NULL_HANDLE);

r = SQLExecDirect(hStmt, "{ call Stored_procedure(?,?)}", SQL_NTS) ; 
```

`Stored_procedure`将采用 1 个输入参数并返回 1 个输出参数，它也返回输出。

我能够执行这个存储过程。但是我无法获取存储过程中输出参数的值。

# asp.net - 对 Web 服务的请求计数

> ID：12001617
> 
> 赞同：0
> 
> 时间：2012-08-17T07:31:38.577
> 
> 标签：asp.net, web-services, iis

我有在 IIS 上运行 5 个不同版本的 asp.net web 服务。我想计算每个服务的请求计数以及他们停止未使用服务的方法。

你能提供任何解决方案吗？

谢谢

注意：我只有最新版本的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:34:32.123

对于那些您没有源代码的版本，请在 IIS 上启用日志记录。

对于您所做的版本，您可以实现日志记录、跟踪、性能计数器......

基本上，有很多选择，选择一个或多个并使用它。

# mysql - 在mysql中，有没有办法在使用*后不显示列，比如排除以下列？

> ID：12001621
> 
> 赞同：0
> 
> 时间：2012-08-17T07:31:51.680
> 
> 标签：mysql, select

我的表中有很多列，所以如果我使用 select ......（所有列），我的查询看起来会很乱。我可以使用 t.* 然后说排除此列吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:33:38.700

No, asterisks means `ALL`. Do not use `*` when you want to exclude some columns. The columns you want to include are only those that are specified in the SELECT query. Otherwise, if they are not in the `SELECT` statement, they are excluded.

# android - close() 从未在数据库上显式调用，DatabasedObjectNotClosed 异常？

> ID：12001626
> 
> 赞同：0
> 
> 时间：2012-08-17T07:32:16.677
> 
> 标签：android, sqlite, exception

即使我在完成调用它们后立即关闭了所有实例，我也会收到以下错误：

```
 close() was never explicitly called on database '/data/data/com.click4tab.fragmentvogella/databases/NewOrderDB' 

 android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here 
```

在定义此方法之前，我没有收到此错误。

```
public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
        case R.id.item1:
            Toast.makeText(MainActivity.this, "Button one pressed",
                    Toast.LENGTH_LONG).show();
            // write data on server
            TestAdapter mDbHelper = new TestAdapter(this);

            mDbHelper.createDatabase();
            mDbHelper.open();

            try {
                mDbHelper.writeUnwrittenNetOrder();
                mDbHelper.close();

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                               break; 
```

以及 writeUnwrittenNetOrder 的定义：

```
ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
    StringBuffer strbuf = new StringBuffer();
    params.add(new BasicNameValuePair("tag", "add_NetOrderID"));

    for (mCur.moveToFirst(); !mCur.isAfterLast(); mCur.moveToNext()) {

        String sql3 = "INSERT into NetOrderID (StoreID, Date, SalesManID, NetOrderID) VALUES ("
                + mCur.getString(0)
                + ", "
                + mCur.getString(1)
                + ", "
                + mCur.getString(2) + ", " + mCur.getString(3) + ");";
         if((mCur.isLast())){
        strbuf.append(sql3);
         }
         else {
             strbuf.append(sql3 + "#");
         }
        // String sql3 =
        // "INSERT into NetOrderID (StoreID, SalesManID, NetOrderID) VALUES (1,1,80)";
        // sqlQueries.add(sql3);
        Log.e("sql", strbuf.toString());

    }

    params.add(new BasicNameValuePair("query", strbuf.toString()));
    Log.e("param","param added");

    new SyncWithServer();
    // send params
    SyncWithServer.setParams(params);
    Log.e("param","param set");

    // return arraylist
} 
```

我应该在哪里关闭 mDbHelper 以避免此错误，当数据库成功写入且应用程序未崩溃时，Logcat 中会出现此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:36:30.693

The error message says you did not close database **or cursor**. Did you close all of them as well (`mCur` object)?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:42:43.563

亚历克斯提出了一个很好的观点。

而且（但我认为这不是现在导致错误的原因）：我认为最好将`mDbHelper.close()`语句从 try/catch 中取出，或者将它放在一个`finally`子句中。因为目前，当`writeUnwrittenNetOrder`抛出异常时，`mDbHelper.close()`永远不会被调用。当您按照亚历克斯的建议添加游标关闭方法时，会产生类似的结果：无论打开和关闭之间发生异常，这也应该发生。

# android - 使用greenDao关闭数据库

> ID：12001629
> 
> 赞同：2
> 
> 时间：2012-08-17T07:32:28.240
> 
> 标签：android, database, orm, greendao

使用 greenDao ORM 关闭（并重新打开）数据库的最佳方法是什么？

```
daoMaster.getDatabase().close() 
```

或者

```
daoSession.getDatabase().close() 
```

以及如何重新开放？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:58:43.507

找到答案： [https ://groups.google.com/forum/#!searchin/greendao/close/greendao/tL4SPjOv7tA/JnBRRAqtORwJ](https://groups.google.com/forum/#!searchin/greendao/close/greendao/tL4SPjOv7tA/JnBRRAqtORwJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-28T21:16:03.680

这就是我所做的。

```
private SQLiteDatabase db; //Global Variable. 
```

在 onResume 方法中初始化你的助手和 SQLiteDatabase。

```
DaoMaster.DevOpenHelper helper = new DaoMaster.DevOpenHelper(this,"YourDBName",null);
db = helper.getWritableDatabase(); 
```

关闭数据库 onPause

```
db.close(); 
```

# batch-file - Batch: Rename multiple files using input string

> ID：12001638
> 
> 赞同：0
> 
> 时间：2012-08-17T07:33:07.523
> 
> 标签：batch-file, batch-rename

I am trying to rename files after the user inputs a string they want to remove from the file name. This works fine except when I want to rename files that are in a different location than the script:

Here is what i have so far which works if I dont specific the file path (e.g. remove `C:\DATABASE\*.* /s`)

```
SET /P X=Type in the String that you want to remove and then press ENTER: 

set deletestring=%X%
for /f "delims==" %%F in ('dir C:\DATABASE\*.* /s /b ^| find "%deletestring%"') do (
    set oldfilename=%%F
    set newfilename=!oldfilename:%deletestring%=!
    Ren "!oldfilename!" "!newfilename!"
    ) 
```

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:15:02.160

改用这个。例如：

```
remove *.* 
```

或者

```
remove "relative path\*.*" 
```

或者

```
remove C:\DATABASE\*.* 
```

或者

```
remove "C:\My Database\2010-*.bak" 
```

这意味着必须指定目录和文件掩码。这是`remove.bat`文件：

```
@echo off
setlocal enabledelayedexpansion
set mask=%~1
set mask=!mask:%~dp1=!
if not exist "%~1" (
    echo No files found
    goto :eof
)
pushd "%~dp1"

SET /P X=Type in the String that you want to remove and then press ENTER: 

set deletestring=%X%
for /f "delims==" %%F in ('dir "%mask%" /s /b ^| find "%deletestring%"') do (
    set oldfilename=%%F
    set newfilename=!oldfilename:%deletestring%=!
    Ren "!oldfilename!" "!newfilename!"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T04:55:59.547

您遇到的主要问题是 REN 的第一个参数可以接受完整的路径信息，但第二个参数只能包含没有路径信息的新名称。您可以使用`~nx`修饰符从 FOR /F 命令报告的完整路径中提取名称和扩展名。

您的 FOR /F 选项不可靠 - 如果文件名包含`=`. 您想将 delims 设置为空。

这个问题实际上比最初看起来要复杂得多。您的代码将尝试重命名文件和目录。如果要重命名目录，则必须以反向 alpha 顺序重命名，因为整个列表是在重命名任何内容之前构建的。如果您以正常的 alpha 顺序处理并重命名目录，则将找不到该目录中的后续条目。

IN() 子句中的 FIND 过滤器不是必需的。理想情况下，您的过滤器应该只匹配文件或目录名称，而不是路径。这是可行的，但有点棘手。我会简单地跳过 IN() 子句中的过滤并在 DO 子句中进行。

文件或目录名称可以包含`!`字符。`!`但是如果 FOR 变量扩展包含并启用延迟扩展，它将被破坏。可以通过在循环内打开和关闭延迟扩展来避免该问题。

搜索和替换可能会删除整个名称，但您不能将文件重命名为空。所以我添加了一个测试以确保留下一个名字。

```
setlocal disableDelayedExpansion
SET /P "X=Type in the String that you want to remove and then press ENTER:"
for /f "delims=" %%F in ('dir C:\DATABASE\* /s /b ^| sort /r') do (
  set "old=%%F"
  set "file=%%~nxF"
  setlocal enableDelayedExpansion
  set "new=!file:%X%=!"
  if defined new if !new! neq !file! ren "!old!" "!new!"
  endlocal
) 
```

如果您真的不想重命名目录，则需要添加 /AD 选项。我首先认为您可以使用 FOR /R 语句，但这可能会导致同一个文件被重命名两次。FOR /F 在处理任何文件之前缓冲整个结果集，但 FOR /R 不会。

```
setlocal disableDelayedExpansion
SET /P "X=Type in the String that you want to remove and then press ENTER:"
for /f "delims=" %%F in ('dir C:\DATABASE\* /s /b /a-d') do (
  set "old=%%F"
  set "file=%%~nxF"
  setlocal enableDelayedExpansion
  set "new=!file:%X%=!"
  if defined new if !new! neq !file! ren "!old!" "!new!"
  endlocal
) 
```

# java - 在 eclipse.ini 中定义 --launcher.XXMaxPermSize 后 Eclipse 无法创建 JVM

> ID：12001640
> 
> 赞同：1
> 
> 时间：2012-08-17T07:33:10.493
> 
> 标签：java, eclipse, memory, virtual-machine

我正在使用 Eclipse，我得到了`java.lang.OutOfMemoryError: PermGen space`错误。在 Eclipse FAQ 中，它说我应该将这些行添加到 eclipse.ini：

```
--launcher.XXMaxPermSize
[xxx]m 
```

其中 xxx 是我想使用的内存大小（我试过 256）。但是在我这样做之后，我`Failed to create Java Virtual Machine`在 Eclipse 启动时遇到错误。我应该怎么做才能让它工作？

* * *

*编辑前*我的 eclipse.ini 文件：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
--launcher.defaultAction
openFile
-vmargs
-Xms40m
-Xmx1024m 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:51:49.797

你的 eclipse.ini 应该是：

-XX:MaxPermSize=256m

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:52:12.717

您需要调整 eclipse.ini 以包含参数+ 通过在**-vmargs**选项之前添加**-vm**`-XX:MaxPermSize`选项来指定要在其上运行 Eclipse 的特定 JVM 。前任：

 ****```
-vm
C:\Java\JDK\1.6\bin\javaw.exe (The exact path to javaw.exe)
-vmargs
-Xms40m
-Xmx1024m 
```

**-vm 选项及其值（路径）必须位于不同的行上。**

一个完整的例子：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vm
C:\Java\JDK\1.6\bin\javaw.exe
-vmargs
-XX:MaxPermSize=256m
-Xms40m
-Xmx768m 
```****

# css - Div with 100% width of screen, but inside a parent div with fixed width

> ID：12001653
> 
> 赞同：2
> 
> 时间：2012-08-17T07:34:32.500
> 
> 标签：css, html

I'm working on a project for a large webshop, but I've run into a problem.

I need to put a div with width: 100% of the screen, inside a div with a fixed width of 960px.

```
 <div> /* This div is fixed to 960px */
        <div> /* This is the div I want to fit the screen width */
        </div>
    </div> 
```

Normally I would put the element outside my content area, e.g. in the wrapper or whereever I already have a div with 100% width. But that would involve changing a template which affects all of my clients webshops, and I only need it on this one.

So; basically - How do a set a div to be 100% width of the screen, inside a fixed width parent? Is it even possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:38:11.760

如果固定 div 没有“位置：”样式，您可以添加`position: absolute; width: 100%;`到内部 div。我认为宽度百分比将与定位的下一个父级或屏幕相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:45:45.453

这些 div 包含在具有相对位置的标题中，该标题由一些 jQuery 移动，以允许在将鼠标悬停在菜单中的特定品牌上方时显示横幅。

使用该方法，我的 div 将与具有相对 pos 的 div 相关，这也是 960px。

我开始意识到我唯一的选择可能是继续更改全局模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T12:36:53.210

或者您可以使用宽度为 9999px 的伪元素，将其放置在 div 的左侧和右侧`:before`。`:after`

在此处查看更多信息：[https ://css-tricks.com/examples/FullBrowserWidthBars/](https://css-tricks.com/examples/FullBrowserWidthBars/)

# iphone - 有没有办法一次将自定义外观应用到整个应用程序？

> ID：12001655
> 
> 赞同：0
> 
> 时间：2012-08-17T07:34:46.687
> 
> 标签：iphone, objective-c, ios, appearance

例如，我有一个方法：

```
- (void)customizeAppearance
{
[[UINavigationBar appearance] setTitleTextAttributes:
    [NSDictionary dictionaryWithObjectsAndKeys:
        [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1.0],
        UITextAttributeTextColor,
        [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.8],
        UITextAttributeTextShadowColor,
        [NSValue valueWithUIOffset:UIOffsetMake(0, -1)],
        UITextAttributeTextShadowOffset,
        [UIFont fontWithName:@"Arial-Bold" size:0.0],
        UITextAttributeFont,
        nil]];
} 
```

我怎样才能使这种方法适用于整个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:36:32.793

如果您将此代码放在`finished lunching`将影响所有应用程序的方法中的应用程序委托中。

请注意，这仅适用于 iOS 5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:38:01.730

如果你在 UIViewController 中使用它，只需创建你自己的子类 MyUIViewController，你可以在你创建的每个新屏幕中使用它。只需使用 MyUIViewController 作为屏幕的超类，而不是普通的 UIViewControler。

一般来说，这是一个好主意，因为您只需更改 MyUIViewController 中的代码即可轻松地将其他行为添加到所有屏幕。

# android - What is the package name of the Google Play app and the AndroidPIT app?

> ID：12001657
> 
> 赞同：26
> 
> 时间：2012-08-17T07:35:06.843
> 
> 标签：android, installation, package

What is the package name of the Google Play app and the AndroidPIT app?

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-17T07:45:17.720

这是**com.android.vending** - [https://stackoverflow.com/a/4439898/570168](https://stackoverflow.com/a/4439898/570168)

和**de.androidpit.app** - [https://play.google.com/store/apps/details?id=de.androidpit.app](https://play.google.com/store/apps/details?id=de.androidpit.app)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-17T07:43:33.080

Google Play 的包名是`com.android.vending`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T07:52:47.843

如果你有 .apk 文件，你可以下载**re-sign.jar**文件，你可以找到**包名**和**主要活动类名**

# mysql - Locking Tables in MySQL like in PostgreSQL

> ID：12001658
> 
> 赞同：0
> 
> 时间：2012-08-17T07:35:07.627
> 
> 标签：mysql, sql, transactions, locking

My Problem is, that I want to insert a new row with a calculated value dependent on a select, executed earlier in the transaction. But avoid, that parallel transactions insert the same calculated value.

This problem should be avoided through transaction isolation level *SERIALIZABLE*. But it doesn't.

I run through the following steps:

1.  TRANSACTION A: BEGIN;
2.  TRANSACTION B: BEGIN;
3.  TRANSACTION A: select max(x) from tableName;
4.  TRANSACTION B: select max(x) from tableName;
5.  TRANSACTION B: insert into tableName (x, PK_COLUMN) values (max + 1, primaryKeyA);
6.  TRANSACTION A: insert into tableName (x, PK_COLUMN) values (max + 1, primaryKeyB);
7.  TRANSACTION A: COMMIT;
8.  TRANSACTION B: COMMIT;

After this, in MySQL, I have two new rows with the same x value, but I want, that one of both transactions abort.

On PostgreSQL I can do a `LOCK TABLE tableName IN SHARE MODE` and this prevents TRANSACTION A to execute step 6\. On MySQL I tried the LOCKING techniques described under [http://dev.mysql.com/doc/refman/5.1/de/lock-tables.html](http://dev.mysql.com/doc/refman/5.1/de/lock-tables.html) without success.

Any suggestions? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:27:53.357

我发现了问题。MySQL Workbench 不会为每个 sql 窗口派生一个新事务....所以我使用的是唯一一个事务....在使用连接到服务器的两个终端之后。一切都按预期工作。

# javascript - Javascript：在onmouseover事件之后执行2个函数

> ID：12001665
> 
> 赞同：0
> 
> 时间：2012-08-17T07:35:39.870
> 
> 标签：javascript, jquery, function

我有一个关于 jquery/javascript 的问题：我处于以下情况：

*   我有一个链接
*   它有一个属性 onmouseover
*   当我将鼠标悬停时，它会调用默认的 FirstFunction()，此函数会替换图像。

注意我不允许修改 FirstFunction()，因为它执行一些不同的重要任务。我想做的事：

*   调用第二个函数：
*   第二个函数应该将图像替换回原始图像，因此在它被之前的 FirstFunction() 更改之前

我写了以下脚本：

```
function SecondFunction(obj) {
    a = $(obj).find("img");
    if (a != null && a.attr("src")!= null)
        if (a.attr("src").lastIndexOf("img_4") != -1)
            a.attr("src", "newSmallImg.png");
        else if(a.attr("src").lastIndexOf("img_2")!=-1){
            a.attr("src", "newBigImg.png");
        }
} 
```

通常当我调试脚本时，它可以工作等等，但图像不会被替换回来。而且我注意到“SecondFunction”在“FirstFunctions”完成执行之前完成。

我能做点什么吗？就像在 SecondFunction => FirstFunction.ready 中设置一样？（第一个函数也在不同的文件中。）

欢迎任何意见

小更新，我调用函数如下：

```
<a onmouseover="FirstFunction(); SecondFunction(this);" ...>
    <span>
       <img src="" ... />
    </span>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:55:23.483

1）检查你在第二个函数中收到的对象类型，你是如何调用这个函数的？你能提供代码吗？

2）检查您在这一行中找到的图像是否是您期望的图像：

```
a = $(obj).find("img"); 
```

[我建议通过唯一 id](http://api.jquery.com/id-selector/)访问对象：

```
var myImge = $('#imageId') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:56:19.770

> 我能做点什么吗？就像在 SecondFunction => FirstFunction.ready 中设置一样？（第一个函数也在不同的文件中。）

可能这对你有帮助

```
<a onmouseover="FirstFunction(this, SecondFunction)" ...>
    <span>
       <img src="" ... />
    </span>
</a> 
```

`FirstFunction()`像这样改变

```
function FirstFunction(obj, callback) {
    //your code here

    if(callback && typeof callback === 'function') {
        callback(obj);
    }
} 
```

# html - align images according to browser size

> ID：12001666
> 
> 赞同：0
> 
> 时间：2012-08-17T07:35:45.497
> 
> 标签：html, css

[Check this image](http://dl.dropbox.com/u/34586898/1024.jpg) This is a normal image with 1024px browser window now if the browser size is reduced below 1024px, the images and the text block needs to gradually wrap as shown below. [Check this](http://dl.dropbox.com/u/34586898/480.jpg) How should we achieve this.I mean what tag we need in CSS for achieving this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:52:54.080

使图像换行的最简单方法是将`img`元素连续放入 HTML 文档中，观察它们换行。您需要添加什么来实现特定布局取决于该特定布局是什么。这可能涉及使用媒体查询的不同窗口宽度范围的不同样式表。

# jquery - jQuery FancyBox Close, and Button Click Handling

> ID：12001673
> 
> 赞同：0
> 
> 时间：2012-08-17T07:36:26.300
> 
> 标签：jquery, asp.net, fancybox

I am developing `ASP.NET 4.0` application runs in Facebook App. I'am using `jQuery FancyBox` to show some PopUps. I can easily show modal, but when I try to close or try to handle which button (Yes/No) clicked, problems occur. Searched many sites, found many solutions, but nothing changed. For example, this is code which I use to show modal

This is HTML Part

```
<div id="uyariIki" class="uyariModal">
    <table width="100%" border="0" cellspacing="0" cellpadding="15">
         <tr>
       // Some Mesages here
         </tr>
         <tr>
             <td align="center" valign="middle"><a class="modalTamam-button" href="#"  onclick='$.fancybox.close'>Tamam</a></td>
         </tr>
    </table>
</div> 
```

I used different codes on onclick event such as

```
$.fancybox.close() 
```

OR

```
parent.jQuery.fancybox.close(); 
```

OR

```
parent.$.fancybox.close(); 
```

But these are didnt work. When I hit "Tamam" button, LightBox is closing and suddenly showing again like an infinite loop or postback.

I also tried to close it from Javascript such as:

```
function CloseFancyBox() {
    $("#uyariIki").fancybox().trigger('close');
} 
```

But ofcourse this one also didnt work :)

Checking [http://fancybox.net/api](http://fancybox.net/api) to see options, `$.fancybox.close` is located in this site. But its not working.

So, how can I close `FancyBox`, when I click "Tamam" button on `FancyBox Modal`

Second question is; How can I handle which button pressed (Yes/No)? (I can provide codes of this modal)

I can provide another information if needed. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:45:31.683

你写;

```
 <td align="center" valign="middle">
      <a class="modalTamam-button" href="#"  onclick='$.fancybox.close'>Tamam</a>
  </td> 
```

尝试：

`$.fancybox.close();`

或试试这个：

`javascript:jQuery.fancybox.close();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T14:17:34.470

在按钮单击事件上使用它：-

```
Page.ClientScript.RegisterStartupScript(typeof(Page), "close", string.Format("<script type='text/javascript'>{0}</script>", "parent.$.fancybox.close() ;")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-19T05:27:25.593

在 aftershow 回调中试试这个： 注意：('close') 是你想要执行 close() 函数的按钮的 ID。

```
 $('#close').click(function(e) {
                    $(".fancybox-close")[0].click();
                })
```

# wix - WIX：卸载未正确进行

> ID：12001682
> 
> 赞同：0
> 
> 时间：2012-08-17T07:37:15.263
> 
> 标签：wix, uninstallation, rollback

我正在使用带有自定义操作的 WIX 安装程序。在一种情况下，我无法正确卸载产品。设想：

1.  安装的基础版本应用程序
2.  试图升级它。
3.  发生异常，回滚到以前的版本
    （我们已经覆盖了 wix 回滚以执行一些自定义操作）
4.  回滚后，我尝试卸载基本版本安装的产品。
5.  虽然它说卸载成功，但实际产品并没有被卸载。所有 dll 仍然存在于注册表中。与产品相关的注册表项正在被删除，并且产品不在控制面板中。但是所有托管的网站仍然存在于 IIS 中。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T11:38:27.867

您可以在添加注册表文件和文件夹的同一组件中使用以下删除元素：

```
RemoveRegistryKey Action="removeOnUninstall" Root="HKLM" Key="..."

RemoveFile Id="Remove_file" Name="filename" On="uninstall" Property/Directory="" 

RemoveFolder Id="DeleteFolder" Property/Directory="" On="uninstall" 
```

# jquery - 了解浏览器窗口高度（供 jQuery 使用）

> ID：12001683
> 
> 赞同：0
> 
> 时间：2012-08-17T07:37:18.717
> 
> 标签：jquery

使用时：

```
var size = $(window).height(); 
```

Firefox 控制台显示：594

但在这里：[http ://whatsmy.browsersize.com/](http://whatsmy.browsersize.com/)

我可以看到我的浏览器高度是：浏览器窗口高度：861

我应该认为这是理所当然的还是我在这里不明白的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:44:42.703

我想这是因为您的控制台的偏移量。它是固定在浏览器底部的吗？如果是：弹出并重试。

你可以取window.innerHeight，它是你浏览器可见区域的高度。

browsersize.com 上的尺寸是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:07:46.733

我做了一个快速测试来确定。打印屏幕 + 在 Photoshop 中测量。**在 Mac OS X Mountain Lion 中使用最新版本的 Firefox、Chrome**和Safari`$(window).width()`以及`$(window).height()`. `$(window).width()`并`$(window).height()`显示没有滚动条的浏览器“工作区”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:45:16.987

`$(window).height()`返回浏览器窗口的工作区高度。

你可以在[这里](http://api.jquery.com/height/)阅读。

# java - 快速数据存储读取操作配额耗尽

> ID：12001686
> 
> 赞同：2
> 
> 时间：2012-08-17T07:37:38.643
> 
> 标签：java, google-app-engine

在我的 GAE 服务器中，数据存储区读取操作在 12 小时后达到 100%，我有大约 20 个用户。

与我的应用程序中的其他操作一起，我构建了一个聊天，其中连接到我的应用程序的用户每 1 秒汇集一次服务器。因此，我有很多请求，`/message`但我**没有**访问数据存储。

`/message`请求数量（约 42K）与最大数据存储读取操作（50k）之间是否存在相关性？

![在此处输入图像描述](../Images/62acebae935e581fb06716dc2b2f035f.png)

**编辑：**

代码`/message`：

```
ArrayListMultimap<String, ChatMessage> messages;
ServletContext application = null;

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{

    if (application == null)
    {
        application = getServletContext();
        messages = ArrayListMultimap.create();          
    }       

    out = response.getOutputStream();
    oos = new ObjectOutputStream(out);  
    Object o = ServerUtils.readObject(request);

    if(o instanceof ChatMessage)
    {
        ChatMessage message = (ChatMessage) o; 
        messages.put(message.getReciverId(), message);          
        List<ChatMessage> list = (List<ChatMessage>) messages.get(message.getReciverId());              
    }

    else if(o instanceof String)
    {           
        String sender = (String) o;
        List<ChatMessage> list = (List<ChatMessage>) messages.removeAll(sender);
        ArrayList<ChatMessage> newList = new ArrayList<ChatMessage>(list);
        reponseToClient(newList);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T09:02:19.863

一个好的起点是设置 Appstats。这将向您显示正在发生数据存储读取以及哪些读取需要很长时间。 [https://developers.google.com/appengine/docs/java/tools/appstats](https://developers.google.com/appengine/docs/java/tools/appstats)

此外，考虑使用 channelApi 或 xmpp 来代替轮询，而不是轮询消息。[https://developers.google.com/appengine/docs/java/xmpp/overview](https://developers.google.com/appengine/docs/java/xmpp/overview) https://developers.google.com/appengine/docs/java/channel/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:01:34.607

您的应用程序会话启用了吗？[会话通过将其数据存储在数据存储中以实现持久性来工作](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)，这可能是每次请求进入 /message 处理程序时读取的内容。

# caching - 如何在 Symfony 1.4 中禁用插槽中动态信息的缓存

> ID：12001687
> 
> 赞同：1
> 
> 时间：2012-08-17T07:37:38.897
> 
> 标签：caching, symfony1, doctrine, symfony-1.4, slots

我正在 Symfony 1.4 Doctrine 1.2 中构建一个音乐应用程序。我正在使用插槽来自定义布局标题中的 facebook api 元标记。例如，当我浏览歌曲页面时，`showSuccess`歌曲的 将有一个如下所示的插槽，它根据歌曲的内容使用动态信息填充布局标题元标记。

```
<?php slot('fb_metaproperty_title') ?>
<meta property="og:site_name" content="abc"/>
<meta property="og:title" content="<?php echo $songs['song_name'].' by '.$songs['full_name'] ?>"/>
<meta property="og:type" content="song" />
<meta property="og:description" content="This song is currently ranked <?php echo $songOverallRank?>th" />
<meta property="og:url" content="<?php echo $linktosongpage ?>"/>
<meta property="og:image" content="<?php echo $images[0]?>"/>
<?php end_slot() ?> 
```

问题是我打开了缓存并且`$songOverallRank`变量缓存在插槽中，因此排名值已过时（因为它经常更改）。相同的`$songOverallRank`变量在插槽正下方（但在插槽外部）的代码中是最新的。由于某种原因，只是插槽值被缓存并且已过期。

我查看了有关如何手动删除缓存值的 symfony 文档，这似乎很麻烦。

有没有简单的配置或方法来禁用插槽的缓存？是否有解决方案来确保插槽没有被缓存并且变量被拉出与模板的其余部分完全相同（具有最新值）？

如果有帮助，我正在使用`sfMemcacheCache`for`view_cache/results_cache`和 APC 进行`sfPatternRouting`缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T02:21:03.230

我找到了问题的原因。缓存值的不是插槽。实际上是 Facebook 缓存了元标记信息。该插槽提供了最新的值，但 facebook 元标记只是在 facebook 中显示旧数据。为了清除 facebook 元标记的缓存，我必须手动将链接输入到 facebook 调试器（linter）中。

手动键入每个链接以清除缓存不是可扩展的解决方案，因此我决定不将动态数据放入 facebook 元标记中。

与其说是解决方案，不如说是一种解决方法。很想知道如何按需自动清除 facebook 缓存。

# php - 如何在 PHP 中的自定义网站上共享带有图像和描述的链接

> ID：12001691
> 
> 赞同：-8
> 
> 时间：2012-08-17T07:37:48.937
> 
> 标签：php, jquery

如何在 PHP 中的自定义网站（如linkedin、facebook）上共享带有图像和描述的链接。

如果用户共享任何有效链接，它会显示带有 facebook 和 linkedin 等描述的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:44:41.740

您想了解 Facebook Open Graph 元标记。它们允许您编辑共享帖子的呈现方式。更多信息可以在这篇文章中找到[http://davidwalsh.name/facebook-meta-tags](http://davidwalsh.name/facebook-meta-tags)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:55:46.457

您需要获取给定 URL 的内容，可能使用`file_get_contents`或一些类似的方法（例如：[this](https://stackoverflow.com/questions/11919240/500-internal-server-error-file-get-contents/11954705#11954705)）并解析此 URL 的内容。

让我们尝试一个非常基本的例子；

```
$url = get_url_from_user_post($user_post);
// get page contents (as html)
$page_contents = file_get_contents($url);

// search for title
// option 1
preg_match('~<meta\s+property="og:title"\s+content="(.*?)".*?>~um', $page_contents, $matches);
// option 2
preg_match("~<title>(.*)</title>~um", $page_contents, $matches);

$page_title = trim($matches[1]);

// search for an image
// option 1
preg_match('~<meta\s+property="og:image"\s+content="(.*?)".*?>~um', $page_contents, $matches);
// option 2
preg_match_all('~<img.*?src="(.*?)".*?>~um', $page_contents, $matches);
if (!empty($matches)) {
    // ... and get one of them 
```

你有更多的选择来做到这一点，获取/解析页面的 html 内容。请参阅： http: [//php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)，或使用 PHP ( `get_meta_tags`) 获取元标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:02:19.333

好的，我得到的是您想要获取用户链接到的站点的图像和基本描述。

要获取描述，最简单的方法是使用 php 中的 get_meta_tags 函数，并使用描述。

```
$meta = get_meta_tags($some_url); 
//description will be stored in $meta['description'] if it was found from $some_url. 
```

这依赖于网站提供适当的元标记，这并不总是对您有利，因此您需要备份方法（例如文档标题或检查 html 中的单词）或默认描述值以防万一什么都得到。

要获取网站的快照，您可以依赖第三方服务，例如 picoshot.com 或 websnapr.com/，但在很多情况下，这可能不是最佳选择。如果你想自己做快照，你可以这样做，但是这个过程会很复杂，你需要对你的服务器和环境进行大量的控制，你可以查看类似的东西[来](http://www.zubrag.com/scripts/website-thumbnail-generator.php)开始使用快照。如果您有 Linux 等环境，该脚本将无法工作，因为它使用 Internet Explorer 浏览器捕获，您可以[在此处](http://www.zubrag.com/forum/index.php?topic=55.0)查看一些 Linux 解决方法。

# java - 如何在保留一些数据的同时重新启动主要活动

> ID：12001693
> 
> 赞同：-3
> 
> 时间：2012-08-17T07:37:49.667
> 
> 标签：java, android

这是我的第一个应用程序，我正在尝试编写一个简单的骗子骰子游戏。

我在主要活动类中编写了所有内容，随机掷骰子，输入出价的文本编辑框和出价和调用的按钮。

那么在游戏运行后，我如何让它跟踪比分并再次运行呢？

我尝试使用重新启动按钮制作另一个活动屏幕，并在游戏结束后将其转到那里，以便我可以重新启动主要活动。但是，我可以从该屏幕按返回（电话键）并在上一场比赛结束时卡住。

此外，我正在尝试使用数组来跟踪输赢，但不确定如何将其从活动中来回移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:42:59.403

要重新启动主要活动，您可以执行

```
finish();
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            startActivity(new Intent(getContext(), YourMainActivity.class));// then call again 
```

并使用首选项或 sqlite 保留您的数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:44:19.360

好吧，您可以只创建一个包含数字的全局数组，并在用户单击按钮或您想要触发滚动的任何内容时运行一个方法。向您展示的一种简单方法是

```
<Button
    android:layout_height="wrap_content"
    android: layout_width="wrap_content"
    android:text="Touch Me"
    android:on click="leRoll" /> 
```

然后在您的活动中，您可以调用一个方法`leRoll`，当单击“触摸我”按钮时触发该方法。所有得分的节省都可以使用全局数组在其中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:20:22.773

我建议你在 SQLite 数据库中记录你的得失。这听起来可能有点矫枉过正，但它非常适合存储任意数量的重复结构化数据位。如果开销太大，则打开一个文件并将新的游戏分数附加到末尾，或者将它们存储在 SharedPreferences 中的字符串数组中。这三个中的任何一个对于存储简单的值向量都是一个不错的选择，您事先不知道可能有多少值，并且您可以从应用程序的任何部分读取它们。

您应该使用 SharedPreference 来保存当前的游戏状态，以便您的游戏 Activity 每次返回时都能显示正确的内容。游戏结束后，立即写入游戏状态的 SharedPreference 值，表示玩家处于游戏结束状态。然后，当 Activity 下一次启动时，它会知道开始一个新游戏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:49:36.237

不完全确定这是否是您正在寻找的，但是：

您可以覆盖后退按钮以转到第二个活动的屏幕。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
  Intent intentstart = new Intent(Activity2.this, MainActivity.class);
  intentstart.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  startActivity(intentstart);
  return true;
}
return super.onKeyDown(keyCode, event);    
} 
```

# javascript - javascript：更改其他div内多个div的属性

> ID：12001697
> 
> 赞同：0
> 
> 时间：2012-08-17T07:38:24.380
> 
> 标签：javascript

我有表：

```
<table class="table table-condensed" id="mbusTable">
    <label><h5>rtu</h5></label>
    <tbody>
        <td><input type="text" id="mid" class="span1" placeholder="mid"></td>
        <td><input type="text" id="type" class="span1" placeholder="typem"></td>
        <td><input type="text" id="inverce" class="span1" placeholder="inverce"></td>
        <td><input type="text" id="mbaddr" class="span1" placeholder="mbaddr"></td>
    </tbody> 
</table> 
```

我想要的只是添加`_mbusTable`到其中的所有输入。这是我现在拥有的：

```
 function correctIDs(tableID)
            var table = document.getElementById(tableID);
            var colCount = table.rows[0].cells.length;
            var prefix = tableID;
            for(var i=0; i<colCount; i++) {
                prefix += "_" + table.childNodes[1].getAttribute('id');
                table.childNodes[1].setAttribute('id',prefix);
                prefix = tableID;
            }
        }; 
```

但我想它只会先改变`<input>`。我怎样才能跳到下一个？对不起，如果这是显而易见的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:46:50.800

```
function correctIDs(tableID) {
    var table = document.getElementById(tableID);
    var inputs = table.getElementsByTagName("input");
    for (var i = 0; i < inputs.length; i++) {
        var prefix = tableID + "_" + inputs[i].getAttribute('id');
        inputs[i].setAttribute('id', prefix);
    }
};

correctIDs("mbusTable"); 
```

# jsf - 差异工具的 JSF 组件

> ID：12001700
> 
> 赞同：0
> 
> 时间：2012-08-17T07:38:49.203
> 
> 标签：jsf, diff

是否有显示两个 Java/Html/Php 等源文件差异的 jsf 组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:45:55.497

没有想到这样的组件。

但这*基本上*是两个`<h:inputTextarea>`相同尺寸的组件彼此相邻并在两者上运行[一些 JavaScript Diff 库](https://www.google.com/search?q=javascript%20diff)的问题，例如[PrettyDiff](http://prettydiff.com/)。

# java - 无法在java中执行文件IO

> ID：12001708
> 
> 赞同：1
> 
> 时间：2012-08-17T07:39:45.933
> 
> 标签：java, file-io, bufferedreader

我是 java 的初学者，并为后缀评估编写了以下问题。虽然该程序适用于控制台 IO。使用文件时有问题。我试图在文件中获取程序的答案`output00.txt`，但文件为空。这是代码。我省略了与这个问题无关的方法。

```
public static void main(String[] args) throws Exception  {

     FileReader input = new FileReader("input00.txt");
        BufferedReader in = new BufferedReader(input)   ;
        FileWriter output = new FileWriter("output00.txt");
        BufferedWriter out = new BufferedWriter(output);
        while (true)  {
          String lineReader = in.readLine();
          if (lineReader==null) {
              break;
          }
          Stack<String> m_Stack = new Stack<String>();

          m_Stack.addAll(Arrays.asList(lineReader.trim().split("[ \t]+")));

          if (m_Stack.peek().equals("")){
              continue;
          }
          try  {
            double finVal = evaluateRPN(m_Stack);
            if (!m_Stack.empty()) {
                throw new Exception();
            }
            out.write(finVal + "\n");
          }
          catch (Exception e)  {System.out.println("error");}
        }
      } 
```

文件 input00.txt 包含

```
8 9 +
7 6 -
7 7 * 9 - 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:42:44.343

您需要调用`out.flush()`以刷新已写入文件的内容，或者调用`out.close()`应该自动刷新已缓冲的内容。实际上，无论如何你都应该调用，`close()`因为这是一种很好的做法，如果有某种方法可以让你退出 while() 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:41:17.673

您必须关闭流。尝试`out.close()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:54:14.690

您可以尝试`out.flush()` 在写语句之后添加。然后它将缓冲区写入文件。

# c# - 转换列表 到 StringCollection

> ID：12001715
> 
> 赞同：14
> 
> 时间：2012-08-17T07:40:24.863
> 
> 标签：c#, .net, winforms, string

我需要上述功能，因为我只能将 StringCollection 存储到设置，而不是字符串列表。

如何将 List 转换为 StringCollection？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-17T07:41:33.627

怎么样：

```
StringCollection collection = new StringCollection();
collection.AddRange(list.ToArray()); 
```

或者，避免中间数组（但可能涉及更多重新分配）：

```
StringCollection collection = new StringCollection();
foreach (string element in list)
{
    collection.Add(element);
} 
```

使用 LINQ 很容易转换回来：

```
List<string> list = collection.Cast<string>().ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:42:17.673

使用 `List.ToArray()`它将 List 转换为 Array，您可以使用它在`StringCollection`.

```
StringCollection sc = new StringCollection();
sc.AddRange(mylist.ToArray());

//use sc here. 
```

读[这个](http://msdn.microsoft.com/en-us/library/system.collections.specialized.stringcollection.addrange.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T11:15:09.840

这是将 an 转换`IEnumerable<string>`为`StringCollection`. 它的工作方式与其他答案相同，只是将其包装起来。

```
public static class IEnumerableStringExtensions
{
    public static StringCollection ToStringCollection(this IEnumerable<string> strings)
    {
        var stringCollection = new StringCollection();
        foreach (string s in strings)
            stringCollection.Add(s);
        return stringCollection;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T10:53:18.547

我会选择：

```
Collection<string> collection = new Collection<string>(theList); 
```

# jakarta-ee - 使用 TypedQuery 返回非实体对象列表，其中值可以为 NULL

> ID：12001719
> 
> 赞同：0
> 
> 时间：2012-08-17T07:40:37.753
> 
> 标签：jakarta-ee, jpql

我正在查看[JPQL SELECT 的这个示例，](http://www.objectdb.com/java/jpa/query/jpql/select)它说您可以返回`List<Object[]>`：

```
TypedQuery<Object[]> query = em.createQuery(
    "SELECT c.name, c.capital.name FROM Country AS c", Object[].class);
List<Object[]> results = query.getResultList();
for (Object[] result : results) {
    System.out.println("Country: " + result[0] + ", Capital: " +     result[1]);
} 
```

现在我这样做是因为：

> 因为托管实体对象的构造有一些开销，所以返回非实体对象的查询，如上面的两个查询，通常更有效。此类查询主要用于有效地显示信息。对于需要托管实体对象的更新或删除实体对象的操作，它们的生产力较低。

现在我有类似的实体，除了实体 Country 中的实体 Capital 可以为 NULL。当我想要获取时`List<Object[]>`，它无法正常工作，因为它无法从 Capital 访问属性名称（正如我所说的 Capital 可以为 NULL）。我希望如果 Capital 为 NULL，则 Object[] 应该包含该属性的 NULL 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:04:32.600

您可以使用 CASE 语句：

```
"SELECT c.name, CASE WHEN (c.capital IS NULL) THEN NULL ELSE c.capital.name END FROM Country AS c" 
```

# javascript - 在 JavaScript 代码中更新 JSP 变量值

> ID：12001720
> 
> 赞同：0
> 
> 时间：2012-08-17T07:40:39.093
> 
> 标签：javascript, jsp

我想从 Java 脚本代码更新 JSP 变量值（JS 代码在不同的文件中）。表示要从包含的 .JS 文件代码更新的 JSP 变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:45:25.107

这是不可能的。JSP 在服务器上执行，JavaScript 在浏览器上执行。

您可以改为向 JSP 发送 HTTP（GET 或 POST）请求并使用它来更新变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:45:42.683

JSP 在服务器端（在服务器上）运行，而 JavaScript 在客户端（在浏览器中）运行。两人无法直接交流。

您可以使用您的 JSP 变量的值（在您的 JSP 文件中）创建一个 JavaScript 变量：

```
<script type="text/javascript">
    var myJspVariable = '<%= myJspVariable %>';
</script>
<script type="text/javascript" src="myJavascriptFile.js"></script> 
```

然后您可以在其他 .js 文件中使用 myJspVariable 。但是，这不会更新服务器上的值 - 如果您需要这样做，则必须发出 AJAX 请求才能将值发回。

# ruby-on-rails-3 - 通过 rake 任务发送邮件：缺少要链接的主机

> ID：12001730
> 
> 赞同：0
> 
> 时间：2012-08-17T07:41:22.150
> 
> 标签：ruby-on-rails-3, email, heroku, rake

我知道这已被多次看到，但我不明白我做错了什么。我正在尝试通过 rake 任务发送邮件，但出现此错误

> 缺少要链接的主机！请提供 :host 参数，设置 default_url_options[:host]，或设置 :only_path 为 true

在`staging`环境中（托管在heroku上）。困扰我的是，当我启动控制台时，我可以毫无问题地发送邮件。在开发中，我通过 rake 任务直接发送邮件没有问题。

[您可以在此 gist](https://gist.github.com/3376803)中查看环境文件、邮件程序类和 rake 任务。我真的不明白我在这里做错了什么。

非常感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:47:58.473

当我得到这个时，我必须将 :host 值放在 production.rb 的 App::Application.configure 块中。

我不知道这是否会转化为heroku。

在 production.rb 中，在 configure 块中添加以下内容：

```
 config.action_mailer.default_url_options = { 
    :host => "your-domain.com" 
  } 
```

如果这需要是变量（对于 heroku），您可以在这里使用环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:11:21.427

作为一种解决方法，我在每个使用`url_for`. 对我来说幸运的是只有两个电话，但如果有人知道得更好，我想知道答案。

# css - Css3媒体查询未加载

> ID：12001739
> 
> 赞同：1
> 
> 时间：2012-08-17T07:42:46.140
> 
> 标签：css, media-queries

我将此媒体查询添加到我的主 css 文件中。当我尝试在我的 ipad 上加载页面时，我没有得到下面的样式化媒体查询。为什么会发生这种情况？

```
/* iPad [portrait + landscape] */
@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
    #main_rgt {
        width: 440px;
        height: 495px;
        float: left;
        overflow: visible;
    }
    .chkbox3 .chkpos {
        float: right;
        margin-right: 10px;    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:55:51.100

尝试将其放在页面的顶部。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:18:00.940

如果您希望此 @media 查询覆盖其他一些 CSS 规则（不适用于 iPad），则应将其放在这些规则之后，或者使它们更具体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-31T10:16:55.703

我在新闻网站上使用了引导程序，但它在 IE8 上不起作用，我使用 css3-mediaqueries.js javascript 但仍然无法正常工作。如果您希望媒体查询与此 javascript 文件一起使用，请将屏幕添加到 css 中的媒体查询行

这是一个例子：

```
<meta name="viewport" content="width=device-width" />

<style>
     @media screen and (max-width:900px) {}
     @media screen and (min-width:900px) and (max-width:1200px) {}
     @media screen and (min-width:1200px) {}
</style>

<link rel="stylesheet" type="text/css" href="bootstrap.min.css">
<script type="text/javascript" src="css3-mediaqueries.js"></script> 
```

css 链接行与上面的行一样简单。这就像我相信上帝一样强大：D。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:49:11.667

使用这个，它应该有帮助

```
@media only screen and (min-width: 768px) and (max-width: 991px) {
    enter style here
} 
```

# android - 在我们的应用程序中访问其他应用程序包名

> ID：12001744
> 
> 赞同：0
> 
> 时间：2012-08-17T07:43:07.317
> 
> 标签：android, caching, package

我想通过我的应用程序使用其他应用程序的包名是否可以这样做。我想清除其他应用程序的缓存。我可以使用其他应用程序包名代替 /data/data 吗？

```
File[] cacheFiles = new File("/data/data").listFiles();
for(int i = 0; i < cacheFiles.length; i++){
    cacheFiles[i].delete();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:52:25.180

除非您的设备已植根，否则您将无法访问其他应用程序的数据。

进一步删除 /data/data 会删除所有应用程序的数据库、缓存、共享首选项和大多数私有数据。

# .htaccess - 将一个域的子文件夹重定向到另一个域

> ID：12001747
> 
> 赞同：0
> 
> 时间：2012-08-17T07:43:14.710
> 
> 标签：.htaccess, redirect, dns, subdirectory

我有两个域，domain1.com 和 domain2.com。我想将 domain1.com/subfolder 重定向到 domain2.com。

我知道这可以通过 .htaccess 使用：重定向 301 /subfolder/ [http://domain2.com/](http://domain2.com/)，将 .htaccess 文件放在 domain1.com 的根目录中。我面临的问题是重定向而不更改地址栏。这可能吗？

domain1.com 正在运行 IIS，而 domain2.com 正在运行 Apache。

我遇到的一种解决方案是将 iFrame 放在 domain1.com/subfolder/index.html 中，但这会使地址栏变为静态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:54:29.760

您需要在托管**domain1.com**的 IIS 服务器上设置反向代理，[这里有一个链接向您展示如何执行此操作](http://blogs.msdn.com/b/carlosag/archive/2010/04/02/setting-up-a-reverse-proxy-using-iis-url-rewrite-and-arr.aspx.)

# ios - 在 iOS 模拟器中找不到 iTunes 应用程序？

> ID：12001750
> 
> 赞同：-1
> 
> 时间：2012-08-17T07:43:18.640
> 
> 标签：ios, ios-simulator

我想在 iTunes 上安装一些应用程序，看看它是如何工作的，然后再花钱购买 iPad。但是，我在 iPad 模拟器中找不到任何 iTunes！我完全是一个新手。有人能给我指路吗？这是设计使然吗？

谢谢/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:44:15.373

模拟器用于测试您自己的应用程序，而不是来自其他开发人员的第三方应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:47:10.130

是的，这是设计使然。模拟器附带的唯一内置应用程序是：

*   苹果浏览器
*   相片
*   联系人
*   游戏中心
*   报摊
*   设置

# javascript - 表单不适用于 jquery post 功能

> ID：12001751
> 
> 赞同：0
> 
> 时间：2012-08-17T07:43:19.117
> 
> 标签：javascript, jquery, ajax, forms, post

我正在尝试进行简单的用户验证，但是，当我尝试使用带有 html 表单的发布请求功能时，浏览器会忽略 jquery 发布请求，而是发送一个获取请求。一双新鲜的眼睛会有很大帮助！

这是脚本：

```
$(document).ready(function () {
    var user = $("#username");
    var pass = $("#password");
    var submit = $("#submit");

    $("#submit").click(function (event) {
        event.preventDefault();
        $.post("login.php", {
            username: user.val(),
            password: pass.val()
        }, function (data) {

            if (!data) {
                $("#login").append("Failed to reach server. Login Error.");
            }
            //$("div#login").hide();
            //$("div#welcome").css("display", "block"); else {
                loadpage();
            }

        }, "json");

        return false;
    });
}); 
```

这是html中的表单，非常简单：

```
<Div id="welcome"> Welcome </div>
<Div id="login">
    <br><br><h2>Welcome to This Site</h2>
    <br><br><br><form id="form"> Username:
    <input type = "text" name = "username"> <br> Password:
    <input type = "password" name = "password" id = "password"> <br>
    <input type = "submit" name="submitbutton" id="submitbutton" class = "bluebutton"> 

</Div> 
```

只是为了消除任何可能的失败位置，我在这里硬编码了 PHP 的用户名/密码：

```
<?
if($username == "harry" && $password == "potter")
{
    $_SESSION["user"] = array();
    $array = array();
    $array["valid"] = "valid";
    echo(json_encode($array));
}

?> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:49:07.397

我看到的问题是在jquery中你有

```
$("#submit").click(function(event){ 
```

在html中你有

```
 <input type = "submit" name="submitbutton" id="submitbutton" class = "bluebutton"> 
```

如果您在输入中输入 id="submit" 那么它应该可以工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:50:24.957

您的表单没有像这样的结束标签`</form>`，而且我也没有在您的表单中找到任何带有 id`submit`的元素，因此它可能没有使用以下代码触发该函数

```
$("#submit").click(function(event){...}); 
```

相反，它应该是

```
$("#submitbutton").click(function(event){...}); 
```

也`return false;`没有必要，因为您已经使用了`event.preventDefault();`.

您的表单应该有一个结束标记。IE

```
<form id="myForm">
    <input type = "text" name = "username"> <br> Password:
    <input type = "password" name = "password" id = "password"> <br>
    <input type = "submit" name="submitbutton" id="submitbutton" class = "bluebutton">
</form> 
```

或者，您可以使用

```
$('#myForm').on('submit', function(e){
    e.preventDefault();
    // Rest of your code
}) 
```

# symfony - 为什么我的 Symfony2 @UniqueEntity 约束根本不起作用？

> ID：12001753
> 
> 赞同：10
> 
> 时间：2012-08-17T07:43:29.920
> 
> 标签：symfony, constraints

我的应用程序中有以下实体类：

```
<?php

namespace ...;

// use ...
use Doctrine\ORM\Mapping as ORM;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;;
// ...

/**
 * @ORM\Table(name="sc_user")
 * @ORM\Entity(repositoryClass="...\UserRepository")
 * @ORM\HasLifecycleCallbacks()
 * @UniqueEntity(fields={"email", "username"})
 */
class User implements UserInterface, \Serializable, EquatableInterface
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $email
     *
     * @ORM\Column(name="email", type="string", length=255, unique=true)
     *
     * @Assert\NotBlank(groups={"registration"})
     * @Assert\Email(groups={"registration"})
     */
    private $email;

    /**
     * @var string $username
     *
     * @ORM\Column(name="username", type="string", length=32, unique=true)
     *
     * @Assert\NotBlank(groups={"registration"})
     */
    private $username;

    // ...
} 
```

@UniqueEntity 约束被忽略。我尝试了不同的口味，包括：

```
@UniqueEntity(fields={"email", "username"}) 
```

和

```
@UniqueEntity(fields={"email"})
@UniqueEntity(fields={"username"}) 
```

并且，根据此处的 Symfony2 文档：http: [//symfony.com/doc/current/reference/constraints/UniqueEntity.html](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)

```
@UniqueEntity("email")
@UniqueEntity("username") 
```

我什么都不做，工作。我没有收到预期的表单验证错误，而是收到以下异常：

> SQLSTATE [23000]：完整性约束违规：1062 键 'UNIQ_D8183973E7927C74' 的重复条目 'admin@scire.com'

这是错误的！有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-17T13:26:58.650

问题解决如下：

```
@UniqueEntity(fields={"email"}, groups={"registration"})
@UniqueEntity(fields={"username"}, groups={"registration"}) 
```

注册组丢失了，我需要将它们分成两个单独的注释。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-05T08:54:17.457

此问题的另一个原因是，如果您使用表单集合并包含处理关联实体的子表单，则必须在根和所有子表单中设置`cascade_validation`为。`true`

[请参阅Symfony 文档](http://symfony.com/doc/current/book/forms.html#embedded-forms)中的提示：

> 要激活 CategoryType 上的验证，请将`cascade_validation`选项添加到`TaskType`：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Acme\TaskBundle\Entity\Task',
        'cascade_validation' => true,
    ));
} 
```

**更新：**

为了确保您的子实体得到验证，还有更好的方法。Symfony`Valid`正是出于这个原因提供了约束。从[文档](http://symfony.com/doc/current/reference/constraints/Valid.html)：

> **有效**
> 此约束用于启用对作为被验证对象的属性嵌入的对象的验证。这允许您验证一个对象以及与之关联的所有子对象。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-18T13:38:13.607

请注意ignoreNull

例如，要正确使用 pid（可以为 null）：

```
constraints:
- Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity:
  fields: [page, pid, position]
  errorPath: page
  groups: [Menu]
  message: "Page already exists with that parent"
  ignoreNull: false 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T09:33:03.030

尝试添加

```
framework:
    validation:
        enable_annotations: true 
```

到您的应用配置

# javascript - 重新调度标准化的鼠标滚动事件

> ID：12001755
> 
> 赞同：0
> 
> 时间：2012-08-17T07:43:31.800
> 
> 标签：javascript, apache-flex, qooxdoo

我是一名 flex 开发人员，我需要让我的 flex 应用程序中的滚动体验在浏览器中更加统一。Flex 滚动依赖于鼠标滚动事件的 delta 属性，我们都知道不同的浏览器是不同的。

在阅读了另一篇 StackOverflow 帖子（http://stackoverflow.com/questions/5527601/normalizing-mousewheel-speed-across-browsers）后，我想也许我可以利用 qooxdoo 在他们的 MouseScroll 事件类中投入时间的事实一些疯狂的算法（http://news.qooxdoo.org/the-week-in-qooxdoo-2010-10-08）。

所以我想用 qooxdoo “规范化” delta 属性重新调度这个新的 MouseSCroll 事件以进行调整。

这可能吗？我对javascript很垃圾，所以甚至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:36:51.887

由于 qooxdoo 是开源的，您可以使用可以在 github [1] 上找到的代码/算法。如果没有 qooxdoo 基础架构的一部分，类本身就不能使用，因此复制算法将是更好的选择。

[1] [https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/event/type/MouseWheel.js#L63](https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/event/type/MouseWheel.js#L63)

# c# - 防止将控件移出其容器

> ID：12001758
> 
> 赞同：1
> 
> 时间：2012-08-17T07:43:40.653
> 
> 标签：c#, winforms, controls, mouseevent, mousemove

这个问题与我的另一个问题有关，可以在这里[找到](https://stackoverflow.com/questions/11994530/moving-a-control-within-another-controls-visible-area)。我想`PictureBox`在它的父容器中移动 a `TabPage`（如果它确实有任何区别！）使用下面的代码可以完成移动：

```
private Point start = Point.Empty; 
private bool _mapPackageIsMoving;    

void pictureBoxPackageView_MouseUp(object sender, MouseEventArgs e) { 
  _mapPackageIsMoving = false; 
} 

void pictureBoxPackageView_MouseMove(object sender, MouseEventArgs e) { 
  if (_mapPackageIsMoving) { 
    pictureBoxPackageView.Location = new Point( 
                             pictureBoxPackageView.Left + (e.X - start.X),  
                             pictureBoxPackageView.Top + (e.Y - start.Y)); 
  } 
} 

void pictureBoxPackageView_MouseDown(object sender, MouseEventArgs e) { 
  start = e.Location; 
  _mapPackageIsMoving = true; 
} 
```

现在我的问题是，这种控制的移动是没有限制的。用户可以将控件从我的图片框所在的可见区域拖出几公里`TabPage`。我试图通过更改这样的`MouseMove`事件来添加一些移动限制，以至少防止它超出标签页的`Left`可见`Right`区域：

```
void pictureBoxPackageView_MouseMove(object sender, MouseEventArgs e) { 
  if (_mapPackageIsMoving) { 
   //Added condition
  if (pictureBoxPackageView.Left >= 0 && pictureBoxPackageView.Right >= 0)
    pictureBoxPackageView.Location = new Point( 
                             pictureBoxPackageView.Left + (e.X - start.X),  
                             pictureBoxPackageView.Top + (e.Y - start.Y)); 
  } 
} 
```

但是上面代码的问题是，每当图片框碰到容器的右侧或左侧并且`Left`or`Right`等​​于 0 时，我就不能再移动控件了。

任何有助于限制`Left, Right, Top and Bottom`图片框容器内的移动的帮助/提示都将得到应用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:54:09.580

您可以无条件移动该框（不测试当前位置）并对您的新位置有限制：

```
int nx = Math.Min(Math.Max(pictureBoxPackageView.Left + (e.X -start.X),0),pictureBoxPackageView.Parent.Width-pictureBoxPackageView.Width);
int ny = Math.Min(Math.Max(pictureBoxPackageView.Top + (e.Y -start.Y),0),pictureBoxPackageView.Parent.Height-pictureBoxPackageView.Height);

pictureBoxPackageView.Location = new Point(nx,ny); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-05-03T13:16:14.100

我认为如果您添加以下代码，它会移动项目而不作为选项卡到顶部。

```
//- MouseDownLocation.X
 //- MouseDownLocation.Y 

       int nx = Math.Min(Math.Max(label1.Left - MouseDownLocation.X + (e.X - start.X), 0), label1.Parent.Width - label1.Width);
       int ny = Math.Min(Math.Max(label1.Top - MouseDownLocation.Y + (e.Y - start.Y), 0), label1.Parent.Height - label1.Height); 
```

# c# - 不包含带 3 个参数的构造函数

> ID：12001763
> 
> 赞同：0
> 
> 时间：2012-08-17T07:43:50.833
> 
> 标签：c#, constructor

请多多包涵，因为我只是在学习 C#。只是在搞乱 C# 我决定想出一个库存系统来测试，但我的脚本中有一个问题：

```
using System;
using System.Collections.Generic;

public class Item
{
    public String name;
    public int pesos;

    public int getPesos()
    {
        return pesos;
    }
    public String getName()
    {
        return name;
    }
}
public class statuseffect
{
    statuseffect(string Effect,int Amount,int Duration)
    {
        string effect = Effect;
        int amount = Amount;
        int duration = Duration;
    }
}
public class Potion : Item 
{
    public int hpeffect;
    public int mpeffect;
    List<statuseffect> effects = new List<statuseffect>();

    public Potion(int hp,int mp)
    {
        hpeffect = hp;
        mpeffect = mp;
    }
    public void addEffect(statuseffect eff)
    {
        effects.Add(eff);
    }
}
class game
{
public static void Main()
    {   
        Potion healthPotion = new Potion(200,50);
        healthPotion.pesos = 23;
        Console.WriteLine(healthPotion.hpeffect);
        statuseffect slow = new statuseffect("slow",10,30);
    }
} 
```

在最后一行，编译器告诉我 statuseffect 不包含带有 3 个参数的构造函数。据我所知，它确实包含 3 个论点。我在这里缺少什么吗？

作为旁注。如果你们对我的脚本有任何意见或建议，那也会很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T07:45:34.173

您的构造函数`private`因此对于类本身之外的代码是“不可见的”。尝试`internal`在构造函数之前添加关键字。或者，如果它也需要在其他项目中可见，请`public`改为添加。

另一个问题：在您的 class`statuseffect`中，您在构造函数中声明了三个**局部**变量。这些变量的唯一作用域是构造函数。您必须将它们的声明移出构造函数（然后它们成为类的实例**字段**）。构造函数仍然可以分配给它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:45:29.093

您的构造函数需要被标记`public`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T07:48:15.180

因为`c#`它特别是一种面向对象的语言，所以你在一个类中声明的每一件事都没有访问说明符，编译器认为它是私有的。所以声明你的构造函数`public`，这将解决这个问题

```
public statuseffect(string Effect,int Amount,int Duration)
    {
        string effect = Effect;
        int amount = Amount;
        int duration = Duration;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:48:46.083

公开您的构造函数。默认情况下，当您不指定任何访问说明符时，它会变为私有，这意味着它只能在您的类中使用。将其公开可以从外部访问。

```
public class statuseffect
{
  public statuseffect(string Effect,int Amount,int Duration)
  {
    string effect = Effect;
    int amount = Amount;
    int duration = Duration;
  }
} 
```

此外，对这些变量做一些事情，它们是没有用的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-20T00:52:49.643

```
public static void Populare_Books()
{
    Books[] bks = { new Books(1, "Shogun", "James Clavell"), new Books(2, "Pe aripile vantului", "Margaret Mitchell"), new Books(3, "MANDRIE SI PREJUDECATA", "Jane Austen"), new Books(4, "ANNA KARENINA", " Lev Tolstoi"), new Books(5, "Notre-Dame de Paris", "Victor Hugo"), new Books(6, "Marile speranțe", "Charles Dickens"), new Books(7, "Ion", "Liviu Rebreanu"), new Books(8, "Cărțile junglei", "Rudyard Kipling")};
    MySqlConnection con = new MySqlConnection("DataSource=localhost; UserID=root;database=" + nume);
    con.Open();
    MySqlCommand cmd = con.CreateCommand();
    cmd.CommandText = "INSERT INTO Books (BookID, Title, ISBN, Number, NumberLeft) VALUES (@BookID, (@Title, (@ISBN, (@Number, (@NumberLeft)";
    MySqlTransaction tra = con.BeginTransaction();
    try
    {
        cmd.Transaction = tra;
        foreach (Books bo in bks)
        {
            cmd.Parameters.AddWithValue("@BookID", bo.BookID);
            cmd.Parameters.AddWithValue("@Title", bo.Title);
            cmd.Parameters.AddWithValue("@ISBN", bo.ISBN);
            cmd.Parameters.AddWithValue("@Number", bo.Number);
            cmd.Parameters.AddWithValue("@NumberLeft", bo.NumberLeft);
            cmd.ExecuteNonQuery();
            cmd.Parameters.Clear();
        }
        tra.Commit();
        Console.WriteLine("Tabelul Books a fost umplut");
        con.Close();
    }
    catch (Exception ex)
    {
        tra.Rollback();
        Console.WriteLine(ex.Message);
    }
} 
```

# php - 外键未存储相关模型的实际值

> ID：12001765
> 
> 赞同：2
> 
> 时间：2012-08-17T07:43:52.150
> 
> 标签：php, mysql, yii, relational-database

我在 Yii 做一个小应用程序。为此我有这样的数据库

```
=============
 +   GROUP    +
 =============
 + id(pk)     +
 + name       +
 + description+
 ++++++++++++++

  =============
 +   MEMBERS  +
 ==============
 + id(pk)      +
 + group_id(fk)+
 + name        +
 + description +
 ++++++++++++++ 
```

关系`Group model`是这样的

```
public function relations()
  {
    return array(
      'members' => array(self::HAS_MANY,'Members','group_id'),
    );
  } 
```

和关系`Members model`是这样的

```
 public function relations()
  {
    return array(
      'group' => array(self::BELONGS_TO,'Group','group_id'),
    );
  } 
```

根据我的要求`rendered Members in Group model`。所以我`controller for action create`的就是这样

```
 public function actionCreate()
  {
    $model=new Group;
    $members=new Members;
    // Uncomment the following line if AJAX validation is needed
     $this->performAjaxValidation($model);

    if(isset($_POST['Group'],$_POST['Members']))
    {
      $model->attributes=$_POST['Group'];
      $members->attributes=$_POST['Members'];
      $valid = $model->validate();
      $valid = $members->validate();
      if($valid)
      {
        $members->save(false);
        $group->save(false);
        $members->group_id = $model->getPrimaryKey();

        $model->save(false);
        $this->redirect(array('view','id'=>$model->id));
      }
    }
    $this->render('create',array(
      'model'=>$model,
      'members'=>$members,
    ));
  } 
```

所以通过这个`primarykey of Group model should be same as the forignkey of group_id in the members model`。但它不是那样显示的。`group_id is remaining '0'`每次。有人能告诉我这里有什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:45:34.667

`$model->getPrimaryKey()`您正在调用：

*   首先，可以用作`$model->primaryKey`
*   其次是返回一条新记录的主键，它还没有被插入，所以它没有。

在添加任何孩子之前先保存父记录`$group->save(false);`，但`$group`不是模型:)

# c# - GetDrives 仅在 Windows 服务中提供本地驱动器

> ID：12001766
> 
> 赞同：0
> 
> 时间：2012-08-17T07:43:53.360
> 
> 标签：c#, vb.net

我创建了一个 Windows 服务，该服务在对所有网络源拥有（管理员）权限的域用户下运行。

在 Windows 服务开始时，我包含了以下代码：

```
My.User.InitializeWithWindowsUser() 
```

如果我使用 IO.DriveInfo.GetDrives 来获取所有驱动器的集合，那么结果只是本地驱动器的集合，而不是网络驱动器（驱动器映射）。

我在这里想念什么？

注意：虽然我使用 VB.NET，但我也理解/知道 C#，所以这就是为什么我也用 C# 标记了这个问题。因此，也欢迎使用 C# 示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:58:15.083

这将取决于这些驱动器在什么时候被映射。例如，您的驱动器映射可能是通过未运行的登录脚本设置的。

如果是这种情况，您可以通过 UNC 路径引用驱动器，或者先自己映射它们，这种事情：

[http://www.blackwasp.co.uk/MapDriveLetter.aspx](http://www.blackwasp.co.uk/MapDriveLetter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:58:01.283

```
using System;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                DriveInfo[] drives = DriveInfo.GetDrives();
                foreach (DriveInfo di in drives)
                {
                    if (di.IsReady)
                    {
                        Console.WriteLine("Volume label: {0} ", di.VolumeLabel);
                        Console.WriteLine("Drive Type: {0} ", di.DriveType);
                        Console.WriteLine("Free space: {0} bytes ", di.TotalFreeSpace);
                        Console.WriteLine("Drive Size: {0} bytes \n", di.TotalSize);
                    }
                }
                Console.ReadLine();
            }
            catch (Exception ex)
            {
                // handle ex
            }
        }
    }
} 
```

我刚刚试过这个，它得到了包括网络在内的所有驱动器。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:13:44.517

这是因为一个误解。如[MSDN](http://msdn.microsoft.com/en-us/library/ms172994%28v=vs.80%29.aspx)中所述，`My.User.InitializeWithWindowsUser()`仅设置当前线程的主体。您的线程仅模拟用户。它不连接到存储网络映射的用户会话。

要访问用户的映射驱动器，您需要访问当前登录的用户的桌面会话，这是没有意义的，因为可能没有用户登录。

为了好玩，我编写了一个 Windows 服务，它在用户启动它时跨越登录用户的 Windows 会话中的一个可执行文件，并连接到 Outlook 并向整个公司发送邮件“嘿，每个人的甜点，我的款待！”。

这就是你要找的。

# ruby-on-rails - dalli vs memcached gem，用于heroku上的rails项目

> ID：12001767
> 
> 赞同：3
> 
> 时间：2012-08-17T07:43:57.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, memcached

我打算在 heroku 上使用 memcache 插件，但不确定我应该使用什么 gem。根据[heroku 文档](https://devcenter.heroku.com/articles/memcache)，推荐使用 dalli，但我想使用[memcached gem](https://github.com/evan/memcached)，因为它至少比 dalli 快 2 倍。

我的环境是 Ruby 1.9.2-p290 和 Rails 3.2.8。这两种宝石在我当地的环境中都能正常工作。谁能描述一下为什么 dalli 更好？或者 memcached 对 heroku 有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:41:06.147

[我在google 群组](https://groups.google.com/forum/?fromgroups=#!topic/heroku/GSGfjoH-TbY)上问了同样的问题，并从 heroku 工程师@schneems 那里得到了明确的答案。

> 具有本机 c 绑定的客户端速度更快，但如果确实出现问题，则更难调试。除非您每天对 memcache 进行数十万或数百万次调用，否则您可能不会注意到速度差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T10:03:15.250

两者都可以工作，但如[DevCenter](https://devcenter.heroku.com/articles/memcache#using-memcache-from-ruby)中所述：

> 我们建议使用 dalli。Dalli 支持 Rails 2 & 3 和 Ruby 1.8.7 & 1.9.2。它与我们所有的部署堆栈兼容，如果您希望将 memcache 用于 Rails 2 或 3 中的会话存储，它是唯一可以使用的 gem。

# android - 自定义动画的动画监听器

> ID：12001770
> 
> 赞同：7
> 
> 时间：2012-08-17T07:44:04.973
> 
> 标签：android, animation, android-animation, fragment

我已经使用 fragmentTansaction.setCustomAnimation(in,out) 为片段事务设置了自定义动画。我想知道动画的开始和结束并触发一些相应的动作。我怎样才能做到这一点？是否可以设置一些监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-31T15:07:07.520

您可以在 onStart() 中为 getDecorView() 使用动画

```
 @Override
    public void onStart() {
        super.onStart();

        if (getDialog().getWindow().getDecorView()) {
            ObjectAnimator objectAnimator = ObjectAnimator.ofPropertyValuesHolder(getDialog().getWindow().getDecorView(),
                    PropertyValuesHolder.ofFloat(View.Y, 0, 1000));
            objectAnimator.setDuration(1000);
            objectAnimator.addListener(new Animator.AnimatorListener() {
                @Override
                public void onAnimationStart(Animator animation) {

                }

                @Override
                public void onAnimationEnd(Animator animation) {

                }

                @Override
                public void onAnimationCancel(Animator animation) {

                }

                @Override
                public void onAnimationRepeat(Animator animation) {

                }
            });
            objectAnimator.start();
        }

    } 
```

# authentication - 不以管理员身份运行登录 PowerShell Start-Process

> ID：12001771
> 
> 赞同：0
> 
> 时间：2012-08-17T07:44:06.823
> 
> 标签：authentication, powershell, windows-7, administrator, start-process

我通过以下方式在登录时运行 PowerShell 脚本：

```
Run: gpedit.msc ->
  Local Group Policy Editor ->
  User Configuration ->
  Windows Settings ->
  Scripts (Logon/Logoff) ->
  Logon ->
  PowerShell Scripts ->
  Add ->
  Browse 
```

在脚本中，我正在使用 Start-Process 执行程序：

```
if (!(Get-Process "outlook" -ea SilentlyContinue)) {
  Start-Process "outlook.exe"
} else { Log("Outlook already running.") } 
```

但它似乎以管理员身份启动这些进程，这是我不希望发生的。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:28:24.767

您想以当前登录的用户身份启动程序吗？如果您通常只想使用另一个帐户，则 Start-Process 命令可以接收凭据。见[这里](http://technet.microsoft.com/en-us/library/hh849848.aspx)。如果您只是想在用户登录时启动程序，最好将它们添加到启动程序中。这可以通过将其添加到`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`或`C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Startup`

# php - wordpress 中的页面活动/非活动

> ID：12001782
> 
> 赞同：0
> 
> 时间：2012-08-17T07:44:50.123
> 
> 标签：php, javascript, jquery, html, wordpress

如何在管理端页面或发布活动/停用以便前端显示或不显示在 wordpress 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:47:13.723

您可以将 WP 中任何页面或博客文章的状态更改为“草稿”。然后它对普通访客消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:08:08.583

您可以根据特定页面、帖子 ID 进行检查，将页面设置为草稿不是最好的方法。您可以在 header.php 文件中检查页面 url 如果该特定页面或帖子 ID 进入 url，那么将自动重定向到主页或您想要的页面。

其次，您还可以制作一个菜单，您不会在菜单中显示页面。

# sql - 分组时TSQL选择最小和最大行

> ID：12001783
> 
> 赞同：6
> 
> 时间：2012-08-17T07:44:57.267
> 
> 标签：sql, tsql, sql-server-2005

假设我有一个包含许多行的表，如下所示：

```
ID        Range         Range_begining        Profit
----------------------------------------------------
 1    (100-150)                    100           -20
 2    (200-250)                    200          40.2
 3    (100-150)                    100           100
 4    (450-500)                    450           -90
 ... 
```

我正在做一个这样的简单查询：

```
SELECT max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
    FROM
        Orders
    GROUP BY
        Range_begining 
```

运行此查询后，我得到如下结果：

```
Range        Count        AVG Profit
------------------------------------
(100-150)        2                40
(200-250)        1              40.2
(450-500)        1               -90
 ... 
```

非常简单 ：）

我现在需要做的是选择计数大于 10 的具有最小和最大利润的行（这是一个参数）

我能够通过这个获得最小值：

```
SELECT TOP 1 [Range], [AVG Profit] FROM (
     SELECT max([Range]) AS 'Range'
         , count(ID) AS 'Count'
         , round(avg([Profit]), 2) AS 'AVG Profit'
        FROM
            Orders
        GROUP BY
            Range_begining) X
WHERE
    [Count]>10
ORDER BY 
    [AVG Profit] ASC --or DESC if I want max profit 
```

我正在考虑`UNION`使用 ORDER BY DESC 进行上述查询，但这不是最好的解决方案。

我需要做的：
**选择 2 行：按 Range 分组时，第一行是最小值，第二行是 AVG 利润最大值。**

**编辑：** 如果我将 2 个移动列添加到我的主数据表中，如下所示：

```
ID        Range         Range_begining        Profit        OrderDate     Company
---------------------------------------------------------------------------------
 1    (100-150)                    100           -20        2012-01-02          1
 2    (200-250)                    200          40.2        2012-03-22          0
 3    (100-150)                    100           100        2012-02-05          0
 4    (450-500)                    450           -90        2012-05-12          1
 ... 
```

然后尝试添加另外 2 个这样的条件：

```
; with ordering as (
  SELECT max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
     , row_number() over (order by avg([Profit])) rn_min
     , row_number() over (order by avg([Profit]) desc) rn_max
    FROM
        Orders
    GROUP BY
        Range_begining
    HAVING COUNT(ID) > 10
    AND [Company]=@company
    AND (@from= '' OR [OrderDate]>=@from)
    AND (@to= '' OR [OrderDate]<=@to)
)
select [range], [count], [avg profit]
  from ordering
 where (rn_max = 1 or rn_min = 1) 
```

我收到一个错误，因为 [Company] 和 [OrderDate]

> 在 HAVING 子句中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

我怎样才能解决这个问题？

**EDIT2** 得到它的工作！

```
; with ordering as (
  SELECT max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
     , row_number() over (order by avg([Profit])) rn_min
     , row_number() over (order by avg([Profit]) desc) rn_max
    FROM
        Orders
    WHERE
    [Company]=@company
    AND (@from= '' OR [OrderDate]>=@from)
    AND (@to= '' OR [OrderDate]<=@to)
    GROUP BY
        Range_begining
    HAVING COUNT(ID) > 10
)
select [range], [count], [avg profit]
  from ordering
 where (rn_max = 1 or rn_min = 1) 
```

**编辑 3** 我可以返回另一列，其描述如下：

```
Range        AVG Profit               Description
-------------------------------------------------
(200-250)          40.2           Max profit here
(450-500)           -90     Min profit, well done 
```

**编辑 4** 快速回答（基于@Nikola Markovinović 回答）：

```
; with ordering as (
  SELECT max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
     , row_number() over (order by avg([Profit])) rn_min
     , row_number() over (order by avg([Profit]) desc) rn_max
    FROM
        Orders
    WHERE
    [Company]=@company
    AND (@from= '' OR [OrderDate]>=@from)
    AND (@to= '' OR [OrderDate]<=@to)
    GROUP BY
        Range_begining
    HAVING COUNT(ID) > 10
)
    SELECT
    CASE WHEN rn_max=1 THEN 'This is max' ELSE 'Min' END AS 'Description'
    ,[range]
    ,[count]
    ,[avg profit]
    FROM ordering
    WHERE (rn_max = 1 or rn_min = 1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T08:14:17.973

您可以使用[窗口函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)立即执行此操作：

```
; with ordering as (
  SELECT max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
     , row_number() over (order by avg([Profit])) rn_min
     , row_number() over (order by avg([Profit]) desc) rn_max
    FROM
        Orders
    GROUP BY
        Range_begining
    HAVING COUNT(ID) > 10
)
select [range], [count], [avg profit],
       case when rn_max = 1 
            then 'Max profit'
            else 'Min profit'
        end Description
  from ordering
 where (rn_max = 1 or rn_min = 1) 
```

[这是 Sql Fiddle 示例](http://sqlfiddle.com/#!3/07bf8/9)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:02:25.310

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!3/b615f/8)。在您的最后一个问题查询中，您可以使用 HAVING 而不是嵌套查询：

```
select * from
(SELECT TOP 1
    max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
    FROM
        Orders
    GROUP BY
        Range_begining
    having count(id)>10
    order by round(avg([Profit]), 2) ASC
) a
union all
select * from 
(
SELECT TOP 1
    max([Range]) AS 'Range'
     , count(ID) AS 'Count'
     , round(avg([Profit]), 2) AS 'AVG Profit'
    FROM
        Orders
    GROUP BY
        Range_begining
    having count(id)>10
    order by round(avg([Profit]), 2) desc
)b 
```

# symfony1 - 如何将 --connection 参数添加到 propel:build

> ID：12001785
> 
> 赞同：0
> 
> 时间：2012-08-17T07:45:00.477
> 
> 标签：symfony1, symfony-1.4

当一个项目中有多个插件并且我需要创建模型、表单和过滤器类时，我只剩下一个选项，我需要为所有连接创建类。如何使 propel:build 接受 --connection 参数，以便它只构建与插件相关的特定连接的类？

Symfony 版本：1.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:14:10.430

如果您使用的是[sfPropelORMPlugin](https://github.com/propelorm/sfPropelORMPlugin)，并且根据sfPropelBuildAllTask[​​ 的代码](https://github.com/propelorm/sfPropelORMPlugin/blob/master/lib/task/sfPropelBuildAllTask.class.php#L31)，您可以使用`--connection`. sfPropelBuildModelTask​​ 也是[如此](https://github.com/propelorm/sfPropelORMPlugin/blob/master/lib/task/sfPropelBuildModelTask.class.php)。问题是，这些任务不使用它。这是一个您应该报告的问题，但目前没有办法使用给定的连接来构建一些类，而不是所有类。

# iphone - 在相册中创建文件夹/目录

> ID：12001790
> 
> 赞同：2
> 
> 时间：2012-08-17T07:45:17.817
> 
> 标签：iphone, photo-gallery

我想在相册中创建一个文件夹，并希望将图像保存在创建的相册中。

可能吗？有没有办法做到这一点？

我已经搜索过了，大多数人都说这是不可能的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:56:26.783

您也许可以使用[AssetsLibrary](https://developer.apple.com/library/ios/navigation/index.html#section=Frameworks&topic=AssetsLibrary)创建图像并将其保存到新资产组。

该库提供了一种创建新资产组的方法：[addAssetsGroupAlbumWithName:resultBlock:failureBlock：](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722)

# ios - 以 AAC 格式录制和播放音频 iOS 5 +

> ID：12001791
> 
> 赞同：2
> 
> 时间：2012-08-17T07:45:24.560
> 
> 标签：ios, avaudioplayer, avaudiorecorder, aac

我想在 iOS 中录制声音并播放。我也想将录制的文件发送到服务器。我有一个转折点，即录制的文件也必须在 ANDROID 设备上播放。所以我尝试使用 MP3 。但是 AVAudioRecorder 不允许 MP3 格式进行录制。所以我使用了AAC。但它不起作用。这是我的代码

```
 -(void)initializeAudioRecorder {

    self.btnPlayRecording.enabled = NO;
    self.btnStopRecording.enabled = NO;

    // Get sound file URL in which recording is saved
    NSURL *soundFileURL = [NSURL fileURLWithPath:[self soundFilePath]];

    // Set settings for audio recording
    NSDictionary *audioRecordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
        [NSNumber numberWithInt:AVAudioQualityMin],AVEncoderAudioQualityKey,
        [NSNumber numberWithInt:16],AVEncoderBitRateKey,
        [NSNumber numberWithInt:2], AVNumberOfChannelsKey,
        [NSNumber numberWithFloat:44100.0],AVSampleRateKey,
        [NSNumber numberWithInt:kAudioFormatMPEG4AAC],AVFormatIDKey, nil];

    NSError *error = nil;
    self.audioRecorder = [[AVAudioRecorder alloc]
                     initWithURL:soundFileURL
                     settings:audioRecordSettings
                     error:&error];

    if (error)
    {
        NSLog(@"error: %@", [error localizedDescription]);
    } 
    else {
        if (![self.audioRecorder prepareToRecord]) {
            NSLog(@"Failed to prepare recording");
        }
    }
}

    #pragma mark - Get Sound File Path

-(NSString*)soundFilePath {

    NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDirPath = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDirPath stringByAppendingPathComponent:@"testSound.aac"];
    return soundFilePath;
}

#pragma mark - IBAction Methods

- (IBAction)btnStartRecordingTapped:(id)sender {

    if (!self.audioRecorder.recording) {
        self.btnPlayRecording.enabled = NO;
        self.btnStopRecording.enabled = YES;
        [self.audioRecorder record];
    }
}

- (IBAction)btnStopRecordingTapped:(id)sender {

    self.btnStopRecording.enabled = NO;
    self.btnPlayRecording.enabled = YES;
    self.btnStartRecording.enabled = YES;
}

- (IBAction)btnPlayRecordingTapped:(id)sender {

    if (!audioRecorder.recording) {
        self.btnStopRecording.enabled = YES;
        self.btnStartRecording.enabled = NO;
        NSError *error = nil;

        self.audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:self.audioRecorder.url error:&error];
        self.audioPlayer.delegate = self;

        if (error) {
            NSLog(@"Error occured while playing recorded audio.\nError:- %@",[error localizedDescription]);
        }
        else {
            [self.audioPlayer play];
        }

    }
}

#pragma mark - AVAudioPlayer Delegate MEthods

/* audioPlayerDidFinishPlaying:successfully: is called when a sound has finished playing. This method is NOT called if the player is stopped due to an interruption. */
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    NSLog(@"In %s",__PRETTY_FUNCTION__);
    self.btnStartRecording.enabled = YES;
    self.btnStopRecording.enabled = NO;
}

/* if an error occurs while decoding it will be reported to the delegate. */
- (void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error
{
    NSLog(@"In %s",__PRETTY_FUNCTION__);
    NSLog(@"audioPlayerDecodeError:- %@",[error localizedDescription]);
}

#pragma mark - AVAudioRecorder Delegate MEthods

/* audioRecorderDidFinishRecording:successfully: is called when a recording has been finished or stopped. This method is NOT called if the recorder is stopped due to an interruption. */
- (void)audioRecorderDidFinishRecording:(AVAudioRecorder *)recorder successfully:(BOOL)flag
{
    NSLog(@"In %s",__PRETTY_FUNCTION__);
}

/* if an error occurs while encoding it will be reported to the delegate. */
- (void)audioRecorderEncodeErrorDidOccur:(AVAudioRecorder *)recorder error:(NSError *)error
{
    NSLog(@"In %s",__PRETTY_FUNCTION__);
    NSLog(@"audioRecorderEncodeError:- %@",[error localizedDescription]);
} 
```

但上面的代码没有录制音频。文件在 DOCS 目录中创建。但是当我尝试播放它时，它不起作用。我什么都听不见。

我的代码有什么问题？还有任何用于录制和播放音频格式的库，可以在 iOS + Android 上播放吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T10:51:23.793

这对我有用：

1.  确保设备音量足够高：

    ```
    MPMusicPlayerController * musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
    if (musicPlayer.volume < 1.0) {
          musicPlayer.volume = 1; // device volume will be changed to maximum value
    }
    musicPlayer = nil; 
    ```

2.  使用 AVAudioSession：

    ```
    AVAudioPlayer * meinPlayer = [[AVAudioPlayer alloc]
                      initWithContentsOfURL:soundFileURL
                      error:&error];
    meinPlayer.delegate = self;

    [meinPlayer prepareToPlay]
    AVAudioSession *session = [AVAudioSession sharedInstance];
    [session setCategory:AVAudioSessionCategoryPlayback error:nil];
    [session setActive:YES error:nil];
    [meinPlayer play]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:45:09.157

尝试在实际播放声音之前调用 AVAudioPlayer 的 prepareToPlay 方法。还要检查您的设备音量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-27T08:06:47.110

```
// check audio permission
    AVAudioSession.sharedInstance().requestRecordPermission({(granted: Bool)-> Void in
        print(" check result： \(granted)")
        do{
            try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayAndRecord)
            try AVAudioSession.sharedInstance().setActive(true)
        }catch{
        }

    }) 
```

# android - Android - ImageView：setImageBitmap VS setImageDrawable

> ID：12001793
> 
> 赞同：42
> 
> 时间：2012-08-17T07:45:26.230
> 
> 标签：android, imageview, android-bitmap

`setImageBitmap`和 和有什么不一样`setImageDrawable`？

我有一个我想从文件中动态设置的图像。我遵循的教程说将我转换`Bitmap`为 a`BitmapDrawable`然后使用`setImageDrawable`. 我注意到`Bitmap`直接设置 with`setImageBitmap`也可以，但我没有发现任何区别。

```
Bitmap image = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
BitmapDrawable bitmapDrawable = new BitmapDrawable(image);
imageView.setImageDrawable(bitmapDrawable); 
```

或者

```
Bitmap image = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
imageView.setImageBitmap(image); 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-17T07:48:03.747

`setImageBitmap`两者在内部调用没有区别`setImageDrawable`。

下面的代码取自AOSP的*ImageView.java*

```
public void setImageBitmap(Bitmap bm) {
    // if this is used frequently, may handle bitmaps explicitly
    // to reduce the intermediate drawable object
    setImageDrawable(new BitmapDrawable(mContext.getResources(), bm));
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-14T13:51:10.983

实际上，如果您有时将`null`其用作参数，您可能会看到差异：

```
imageView.setImageDrawable(null);
Drawable d = imageView.getDrawable(); // d == null

imageView.setImageBitmap(null);
Drawable d = imageView.getDrawable(); // d == some BitmapDrawable, != null 
```

因此，如果您正在检查是否存在可绘制的 in `ImageView`，请注意它。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-09-09T08:39:20.667

我刚刚为此写了一篇文章。希望能够回答你的问题。

[https://plus.google.com/112740367348600290235/posts/VNAfFLDcKrw](https://plus.google.com/112740367348600290235/posts/VNAfFLDcKrw)

`ImageView`有 4 个 API 来指定图像。使用哪一个？有什么不同？

1.  setImageDrawable(Drawable drawable)
2.  setImageBitmap(位图 bm)
3.  setImageResource(int resId)
4.  setImageURI(URI URI)

`ImageView`，顾名思义，用于显示图像。但什么是图像？一个`Bitmap`是图像，不难理解，我们`setImageBitmap`为此目的使用。但是，在内部，`ImageView`has-a`Drawable`但不是 a `Bitmap`，这就是为什么`setImageDrawable`。当您在`setImageBitmap`内部调用 时，首先将位图包装到`BitmapDrawable`IS-A `Drawable`，然后调用`setImageDrawable`.

这是代码。

```
public void setImageBitmap(Bitmap bm) {
    setImageDrawable(new BitmapDrawable(mContext.getResources(), bm));
} 
```

那么，3 和 4 API 呢？

您应该已经知道创建位图的方法有很多种：从文件路径、从输入流、从 Uri 或从资源文件。

```
BitmapFactory.decodeFile(String pathName)
BitmapFactory.decodeStream(Inputstream)
BitmapFactory.decodeResource(Resource res, int id)
BitmapFactory.decodeByteArray(byte[] data) 
```

意识到这一点，很容易理解`setImageResource`/`setImageUri`与`setImageBitmap`.

综上所述，`setImageDrawable`是其他 API 所依赖的原始函数。其他 3 个只是帮助您编写更少代码的方法。

此外，请务必记住，`ImageView`实际上 has-a`Drawable`不一定是 a `BitmapDrawable`！您可以将任何设置`Drawable`为图像视图。

除了`Drawable`通过 Java API 设置之外，您还可以使用 XML 属性来`Drawable`设置`ImageView`. 请参见下面的示例。请注意，该形状可以是图像文件（.png、.jpg、.bmp）或 xml 文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-17T07:54:48.440

这两种方法都是有效的，并且达到了相同的结果。在第一种方法中，您将位图包装在一个可绘制对象周围，该对象是可以在视图中绘制的任何内容的抽象。

Drawables 的特别之处在于，它们让您可以对它们包裹的图形对象进行各种操作（缩放、平移、不透明度等）。

位图是一种可绘制对象，您可以在此处进一步了解可绘制对象：http: [//developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)

在第二种方法中，您无需任何可绘制相关操作即可直接访问位图位，只需在视图上按原样绘制位图。

希望这会有所帮助，干杯，马克斯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T06:58:34.057

```
public void setImageBitmap(Bitmap bm) {
// if this is used frequently, may handle bitmaps explicitly
// to reduce the intermediate drawable object
setImageDrawable(new BitmapDrawable(mContext.getResources(), bm));
} 
```

可能不同的是mContext.getResources()，从mContext.getResources()可以得到divice的密度，所以sceen上的显示不一样

# ios - MFMailComposeViewController 的委托未处理“取消”按钮或 iOS 4.x 及更早版本

> ID：12001796
> 
> 赞同：0
> 
> 时间：2012-08-17T07:45:30.573
> 
> 标签：ios, delegates, mfmailcomposeviewcontroller

我已经根据 Apple 提供的代码示例在我的应用程序中实现了标准邮件功能。我的代码如下

```
- (IBAction)mailBtnPressed:(id)sender
{
if ([MFMailComposeViewController canSendMail])
{
    mailer = [[MFMailComposeViewController alloc] init];

    [mailer setDelegate:self];

    [mailer setSubject:@"Een berichtje via de iPhone app"];         mailer.mailComposeDelegate = self;
    NSArray *toRecipients = [NSArray arrayWithObjects:@"studio@vrtfm.be", nil];
    [mailer setToRecipients:toRecipients];

    NSString *emailBody = @"";
    [mailer setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:mailer animated:YES];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Oeps..."
                                                    message:@"Dit toestel ondersteunt geen mail functionaliteit."
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
} 
```

}

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
    switch (result)
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued.");
            break;
        case MFMailComposeResultSaved:
            NSLog(@"Mail saved: you saved the email message in the drafts folder.");
            break;
        case MFMailComposeResultSent:
            NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send.");
            break;
        case MFMailComposeResultFailed:
            NSLog(@"Mail failed: the email message was not saved or queued, possibly due to an error.");
            break;
        default:
            NSLog(@"Mail not sent.");
            break;
    }
        [self becomeFirstResponder];
    // Remove the mail view
    [self dismissModalViewControllerAnimated:YES];
} 
```

点击发送按钮调用委托，一切正常。但是，点击取消按钮不会调用委托，它只会使视图变暗；该应用程序挂在那里。

**注意：** 我没有在我的应用程序中显示状态栏。

我没有使用 xib，而是代码`[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];`

此邮件功能适用于 iOS5、iOS5.1。但仅在较低版本中面临问题。

我也尝试过使用`[mailer setMailComposeDelegate:self];`

我当前的班级 xib 的大小为 (280,480)。

我在单个视图中使用多个视图，其中包含内容大小 (1540,960) 的滚动视图。

使用方法显示视图`[scrollView scrollRectToVisible:frame animated:YES];`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:52:31.023

试试看这个[例子](http://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008865-Intro-DontLinkElementID_2)

简短的回答：

尝试更改代码行

```
[mailer setDelegate:self]; 
```

至

```
mailer.mailComposeDelegate = self; 
```

# java - 使用泛型类型参数反映方法时出现 NoSuchMethodException

> ID：12001801
> 
> 赞同：1
> 
> 时间：2012-08-17T07:45:40.943
> 
> 标签：java, generics, reflection

我发现在使用泛型类型参数反映方法时遇到问题，但是相同的代码适用于没有泛型类型参数的方法！这是我的代码：

```
public class Test {

    public static void method1(Integer i) {
    }

    public static void method2(List<Integer> i) {
    }

    public static void main(String[] args) throws Exception {

        Integer i = 5;
        List<Integer> iList = new ArrayList<Integer>();
        Method method1 = Test.class.getDeclaredMethod("method1", i.getClass());
        method1.invoke(Test.class, i);
        System.err.println("-------- method 1 ok -----------");
        Method method2 = Test.class.getDeclaredMethod("method2", iList.getClass());
        method2.invoke(Test.class, iList);
        System.err.println("-------- method 2 ok -----------");
    }

} 
```

和输出：

```
-------- method 1 ok -----------
Exception in thread "main" java.lang.NoSuchMethodException: 
Test.method2(java.util.ArrayList)
    at java.lang.Class.getDeclaredMethod(Class.java:1954)
    at Test.main(Test.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

泛型类型参数有什么神奇之处吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:52:07.733

```
Integer i = 5;
        List<Integer> iList = new ArrayList<Integer>();
        Method method1 = Test.class.getDeclaredMethod("method1", i.getClass());
        method1.invoke(Test.class, i);
        System.err.println("-------- method 1 ok -----------");
        Method method2 = Test.class.getDeclaredMethod("method2",
                 List.class);
        method2.invoke(Test.class, iList); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:53:02.567

ArrayList 太具体了，您只将 method2 定义为采用 List （通常应该这样做）。

尝试使用 List.class

# asp.net - Razor 里面的 id 和 href 定义

> ID：12001805
> 
> 赞同：0
> 
> 时间：2012-08-17T07:45:49.210
> 
> 标签：asp.net, asp.net-mvc-3, razor

我在强类型视图中有一个模型，但我希望有一个选择按钮，它为每个项目显示一个模态，问题是如何在我的模态定义中使用剃刀，所以每个模态都称为 myModal1、myModal2 等对于客户名称：

```
<a class="btn" data-toggle="modal" href="#myModal">Select</a>
            <div class="modal hide" id="myModal">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">×</button>
                    <h3>Customer Options</h3>
                </div>
                <div class="modal-body">
                    <p>
                        @Html.ActionLink("Edit", "Edit", New With {.id = currentItem.CustomerId}) |
                        @Html.ActionLink("Details", "Details", New With {.id = currentItem.CustomerId})
                        |
                        @Html.ActionLink("Delete", "Delete", New With {.id = currentItem.CustomerId}) |
                        @Html.ActionLink("Book Job", "Create", "Job", New With {.id = currentItem.CustomerId}, Nothing)
                        |
                        @Html.ActionLink("Jobs", "ShowCustomerJobs", "Job", New With {.id = currentItem.CustomerId}, Nothing)
                        |
                        @Html.ActionLink("Bills", "BillsForCustomer", "Bill", New With {.id = currentItem.CustomerId}, Nothing)
                        |
                        @Html.ActionLink("Send Message", "SendCustomerMessage", "SendMessage", New With {.id = currentItem.CustomerId}, Nothing)
                        |
                        @Html.ActionLink("Record Payment", "RecordPayment", "Payment", New With {.id = currentItem.CustomerId}, Nothing)
                    </p>
                </div>
                <div class="modal-footer">
                    <a href="#" class="btn" data-dismiss="modal">Close</a>
                </div>
            </div> 
```

基本上是这样的（这不起作用）：

```
 <a class="btn" data-toggle="modal" href="#myModal@currentItem.CustomerId">Select</a>
            <div class="modal hide" id="myModal@currentItem.CustomerId"> 
```

我不确定 Razor 中在 id 和 href 定义中调用 Razor 的正确定义是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:16:40.683

只需添加括号 ( )`@(currentItem.CustomerId)`

```
<a class="btn" data-toggle="modal" href="#myModal@(currentItem.CustomerId)">Select</a>
        <div class="modal hide" id="myModal@(currentItem.CustomerId)"> 
```

# perl - perl如何从标签中获取数据

> ID：12001807
> 
> 赞同：1
> 
> 时间：2012-08-17T07:46:08.837
> 
> 标签：perl, parsing

我想逐行从 SUB 标记中提取数据并将数据存储在哈希中。我这样做了，但我没有得到结果

==文件==

```
<SUB>
 name1="abc"
 value1="24"
 value2="24"
</SUB>

<SUB>
 name="abc2"
</SUB>

<SUB>
 name3="ag"
 value3="27"
</SUB>

<SUB>
 name4="ljh"
 value4="90"
</SUB> 
```

===代码===

```
use strict;
 use warnings; 
 open my $fh, '<', 'data_file.txt' or die $!;  

 while (<$fh>) {
    while(m{<SUB>(.*?)<\/SUB>}g){
    print $2,"|";
    }
 } 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:54:16.093

这应该这样做：

```
use strict;
use warnings;

while (my $line = <DATA>) {
    if ($line =~ /<SUB>/ .. $line =~ /<\/SUB>/){
        if ( $line =~ /(\S+?)="([^"]+)"/ ) {
            print $1 . " = " . $2 . "\n";
        }
    }
}

__DATA__
<SUB>
 name1="abc"
 value1="24"
 value2="24"
</SUB>

<SUB>
 name="abc2"
</SUB>

<SUB>
 name3="ag"
 value3="27"
</SUB>

<SUB>
 name4="ljh"
 value4="90"
</SUB> 
```

如果您无法理解我的代码，请询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:01:29.583

该`while (<$fh>)`构造一次只能在线读取…… *并且*当仅存在一个捕获组时，您使用捕获缓冲区 2 `$2`……您没有收到有关字符串或连接中未定义变量 $2 的警告吗？

有几种解决方案：

1.  将整个文件读入一个字符串：

    ```
    my $fileContents = do {
       local $/ = undef; # input line seperator, undef means "slurp"
       join "", <$fh>;
    };
    while(/(...)/g) {...} 
    ```

2.  使用触发器 ( `..`) 运算符确定我们是否在标签内。仅当每个标签各自占据一行时才按需要工作。请参阅@taulis 优秀的代码答案。

3.  额外的漂亮：将输入分隔符设置为结束标记：每次执行一行读取时，都会读取直到遇到结束标记（包括在内）。

    ```
    local $/ = "\n</SUB>\n";
    while (my $entry = <$fh>) {
         # only keep what's inside the tag
         $line =~ s{ <SUB> \s* (.*?) \s* </SUB> $}{$1}sx;
         # do further processing like printing
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:00:16.430

```
{
local $/;
#slurp mode read whole file in
<>;
print join "|", m{<SUB>(.*?)<\/SUB>}sg;
} 
```

1）您需要阅读整个文件，而不是逐行阅读 2）添加 /s 以便点 (.) 匹配换行符。

# iphone - 不创建地址簿对象

> ID：12001808
> 
> 赞同：0
> 
> 时间：2012-08-17T07:46:09.983
> 
> 标签：iphone, addressbook

我已经实现了获取联系人列表表单地址簿的代码。为此，我使用了此代码

```
ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allSources = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook ); 
```

当这段代码执行时，我的应用程序崩溃了，在崩溃报告中我得到了

```
Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000001, 0x000000000000defe
Crashed Thread:  5 
```

我正在使用 ios 6.0 在 iPhone 3GS 上进行测试。

那么我如何修复这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T06:23:09.863

感谢您的支持，我得到了解决方案。我的问题的解决方案是

> ABAddressBookRef addressBook = ABAddressBookCreate();

这在 ios 6.0 中已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T07:53:32.013

使用此代码，它将为您提供对象列表。

```
ABAddressBookRef addressBook = ABAddressBookCreate(); 
ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
NSArray *persons = (NSArray *)(ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByFirstName)); 
```

# regex - vb .net 正则表达式查询

> ID：12001810
> 
> 赞同：0
> 
> 时间：2012-08-17T07:46:27.530
> 
> 标签：regex, vb.net

我正在尝试在文本文件中查找大写的短语。

我想出了一个正则表达式，它可以捕获像“New Lender”这样的短语：

```
(?:[A-Z][A-z]+(?:\x20+|\,|\.|\:|\;|\r|\n|\t|\x29|\x22|\x2D|\x26))+ 
```

但我对像`"Bank of England"`. 很少有非大写的单词会出现`(of|and|or)`，但我正在努力让正则表达式匹配得更远`"Bank of"`。谁能指出我正确的方向？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:05:17.703

尝试这个：

```
(?:\b([A-Z]\w+)\b(?:\s|of|and|or)*)+ 
```

# filter - 编写 LDAP 查询过滤器

> ID：12001811
> 
> 赞同：2
> 
> 时间：2012-08-17T07:46:28.050
> 
> 标签：filter, ldap, jndi, ldap-query

我在为 LDAP 查询编写过滤器时遇到问题。

我有两个对象类——Person 和 Service。数据库由许多人组成，每个人都有零个或多个子服务。每个人都有一个标识符 personNumber 属性。我想选择几个人和他们给定人员编号的所有服务。是否可以在一个查询中执行此操作？

例如，如果我们有以下一组对象：

```
 personNumber=1,ou=root,o=org
serviceNumber=1,personNumber=1,ou=root,o=org
serviceNumber=2,personNumber=1,ou=root,o=org
                personNumber=2,ou=root,o=org
serviceNumber=3,personNumber=2,ou=root,o=org
                personNumber=3,ou=root,o=org
serviceNumber=4,personNumber=3,ou=root,o=org 
```

，是否有可能，给定人号 1 和 2，检索这些对象：

```
 personNumber=1,ou=root,o=org
serviceNumber=1,personNumber=1,ou=root,o=org
serviceNumber=2,personNumber=1,ou=root,o=org
                personNumber=2,ou=root,o=org
serviceNumber=3,personNumber=2,ou=root,o=org 
```

但不是这些：

```
 personNumber=3,ou=root,o=org
serviceNumber=4,personNumber=3,ou=root,o=org 
```

，*只使用一个查询*？这是一个例子；可以加载两个以上的标识符。它们不是先验已知的。

`IN (..)`另外，除了生成大`(|(a=..)(a=..)(a=..)..)`过滤器之外，有没有办法指定属性值应该在一些值集合中，比如SQL 中的子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:45:03.137

答案是否定的，根据 RFC [https://www.rfc-editor.org/rfc/rfc2254](https://www.rfc-editor.org/rfc/rfc2254)，没有这样的过滤器。如果 IN 列表很大并且您在 ldap 中有很多人，您需要编写一个简单的分页查询使用 (objectClass=Person) 过滤器获取所有结果，并在重试后过滤结果。如果您的代码是用 Java 编写的，您可以签 [出 unboundid LDAP SDK](https://www.unboundid.com/products/ldapsdk/docs/javadoc/com/unboundid/ldap/sdk/controls/SimplePagedResultsControl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T09:06:02.757

If person doesn't have a multivalued attribute holding the service there is no way this can be returned in one ldapsearch. You'll need at least a two stage rocket: first select person, for each person check on childnodes.

AFAIK there is no IN operator in LDAP filters. The [RFC](https://www.rfc-editor.org/rfc/rfc4515#page-3) is clear about that. So you're stuck with your tedious (|(a=s1)(a=s2)(a=s3)...) construct.

# asp.net - LinkedIn rest api 没有内容

> ID：12001813
> 
> 赞同：0
> 
> 时间：2012-08-17T07:46:34.203
> 
> 标签：asp.net, asp.net-mvc-3, rest, linkedin

我正在尝试通过`/people/~/shares`POST 发布消息。

问题是在某些服务器（我使用本地机器、测试、登台和生产服务器）上发布了消息但完全空白。

所有服务器上的代码都完全相同，但在本地机器和生产服务器上一切正常，并且在测试/暂存时出现问题。

**要发布的 XML：**

```
<share>
  <comment /> 
  <content>
    <title>My Title Here</title> 
    <submitted-url>http://www.mysite.com</submitted-url> 
  </content>
  <visibility>
    <code>anyone</code> 
  </visibility>
</share> 
```

**回复状态**：已创建

我还认为原因在于新的 linkedIn api 功能，但将`rw_nus`范围添加到`requestToken`POST 并没有帮助

**更新：**我在linkedin论坛上询问了这个问题，并得到了一点hack/workaroud/note：`<comment>`块中的文本显示正确，但`<content>`块内没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:57:36.207

所以问题在LinkedIn方面并且已经[修复](https://developer.linkedin.com/comment/17545#comment-17545)

# scrollview - 为什么会出现提示“无法识别的选择器 tableView:didSelectRowAtIndexPath”的崩溃

> ID：12001817
> 
> 赞同：1
> 
> 时间：2012-08-17T07:46:47.457
> 
> 标签：scrollview, tableview, horizontal-scrolling, tableviewcell

为了在我自定义的长 tableViewCell 中显示内容，我创建了一个滚动视图并在我的滚动视图中添加了一个无法滚动的 tableView，其中 tableviewcell 是我自定义的 tableviewcell 的一种。

在我的 TollStatusViewController.h

```
UITableView *selfTableView;
@property (retain, nonatomic) IBOutlet UIScrollView *fluxScrollView; 
```

在我的 TollStatusViewController.m

```
self.fluxScrollView.clipsToBounds = YES;
self.fluxScrollView.indicatorStyle = UIScrollViewIndicatorStyleBlack;
[self.fluxScrollView setContentSize:CGSizeMake(1400.0, 154.0)];

selfTableView = [[[UITableView alloc]initWithFrame:CGRectMake(0, 0, 1400.0, 154.0) style:UITableViewStylePlain] autorelease];
selfTableView.dataSource = self;

selfTableView.delegate = self;
selfTableView.scrollEnabled = NO;
[self.fluxScrollView addSubview:selfTableView]; 
```

和委托方法：

```
#pragma mark tableview-data-source

- (NSInteger)tableView:(UITableView *)_tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)_tableView
{
    return 1;
}

- (CGFloat)tableView:(UITableView *)_tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0) {
        return 38.0;
    }
    if (indexPath.row == 1) {
        return 56.0;
    }
    if (indexPath.row == 2) {
        return 56.0;
    }
    return 0;
}

- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    ManyColumnsViewCell *cellView = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cellView == nil) {
        cellView = [[[ManyColumnsViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    return cellView;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

} 
```

然后我可以为我的fluxScrollView 启用水平滚动，这样我就可以在我的long manyColumnsViewCell 中显示内容。

但是当单击 tableView 中的一行时，会出现带有提示的崩溃

```
2012-08-17 15:43:14.789 MScope[2261:13a03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType tableView:didSelectRowAtIndexPath:]: unrecognized selector sent to instance 0x7e87960' 
```

在我删除这个功能之后

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

    } 
```

没有崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:14:30.443

[这里](https://stackoverflow.com/questions/2455161/unrecognized-selector-sent-to-instance)投票最多的答案

我的 TollStatusViewController 是临时搭建的，所以我将它保留在它的对象中，并在对象的函数 -(void)dealloc 中进行dealloc，然后就可以了。

# windows - Windows xp 上的 Qt 问题

> ID：12001819
> 
> 赞同：2
> 
> 时间：2012-08-17T07:46:58.100
> 
> 标签：windows, qt

我写了一个 Qt 应用程序。
在 Windows 7 x64/x32 应用程序工作正常。
在 Windows XP 中`qDebug()`有很多消息。

```
QPixmap it is unsafe to use pixmap outside the GUI thread 
```

之后，应用程序因 sigfault 崩溃，
但：
1）我根本不在`QPixmap`我的代码中使用
2）我只有一个创建的线程用于创建某种类型的文件（但此错误发生在应用程序启动后几秒钟后）。
3) 我在 reinplecated 中使用`QIcon`（可能是它使用） （但没有外部线程......只有用于报告状态等的插槽和信号） 4）我重新实现了 QAbstractListModel 来处理我的 5）在使用 Qt 设计器创建的表单上有一个带有图标操作 Qt 版本 4.8.1的工具栏 我什至无法想象我哪里不对... 有没有人有任何建议？**自己解决**`QPixmap``QStyledItemDelegate`
`QStyledItemDelegate`

 **在 QMainWindow 重新实现中，我有 QTimer 用于更新 2 个 QLabels
那是错误，因为我发现 QTimer 为每个 timout() 信号创建一个线程
我决定对我最好的解决方案是使用发送 ot 的信号 dataChanged 重新实现 Item 类重新实现 QAbstractItemModel 中的插槽 OnItemDataChanged**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:17:22.897

该消息由名为`qt_pixmap_thread_test()`src/gui/image/qpixmap.cpp 的函数显示。

链接到调试 Qt 库（您可能需要构建它们）并设置显示该警告的断点。至少您将能够看到当时的线程情况。

此外，为了其他可能遇到此问题并尝试搜索错误的人的利益，确切的错误消息是：

```
QPixmap: It is not safe to use pixmaps outside the GUI thread 
```**

# pdf - adobe reader 无法打开 pdf，因为它不是受支持的文件类型或文件已损坏

> ID：12001821
> 
> 赞同：0
> 
> 时间：2012-08-17T07:47:02.873
> 
> 标签：pdf, itextsharp, sendmail

我正在使用 iTextSharp 为报告创建 PDF 并作为附件（）发送。Pdf 已成功创建并且可以使用 Adob​​e Reader 在本地打开，但在发送到邮件后无法打开并给出错误：“adobe reader 无法打开 pdf，因为它不是受支持的文件类型或文件已损坏”

附件中的pdf文件大小也为零。我认为它在两者之间被破坏了。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:16:18.500

问题在于网络安全（smtp 权限），而不是任何编程挑战。获得 SMTP 的权限并对其进行配置。宾果游戏，它的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T18:47:49.133

我在导出为 PDF 格式时遇到的问题是我的文件是我关闭了一些错误的 HTML 标签，请检查。

# php - 在序列化数组中查找键的值

> ID：12001830
> 
> 赞同：-1
> 
> 时间：2012-08-17T07:47:23.917
> 
> 标签：php

我对此很陌生，我认为问题也太愚蠢了。但请帮助我。我有一个`serialized array`如下

```
a:1:{s:2:"to";s:21:"ucerturohit@gmail.com";} 
```

这是一个简单的数组`{'to'=>'xxxxx'}`

现在我想打印 key 的值`to`而不使用`unserialize()`. 请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:28:02.270

假设您希望始终获取数组第一个元素的键，您可以使用类似这样的东西。

```
$array = array("a" => "b", "c" => array("d" => "e"));
$s     = serialize($array);

preg_match("/\{(.+)\}/", $s, $matches);

$_tmp     = explode(";",$matches[1]);
$_tmp_key = explode(":", current($_tmp));

return end($_tmp_key); 
```

但是，这仅适用于上述情况，并且重新编写以适应任何情况将浪费时间。我会尝试找到一种解决方法来使用反序列化。

# mercurial - mercurial update 导致中止（文件名太长）

> ID：12001833
> 
> 赞同：2
> 
> 时间：2012-08-17T07:47:36.507
> 
> 标签：mercurial, symlink

After creating a symlink to a file I checked the file into my repo and it worked fine up to the point when I shared the repo with my teammate who is using Windows (his code goes into branch 'devui', mine is on the default branch).

If I switch from his latest changes (being on branch 'devui') to my default branch using `hg upd default` I get this message:

```
abort: could not symlink to '...<complete contents of symlinked file here>...':
File name too long: <symlink-filename> 
```

This occurs after about half of the checkout so only a part of the files will be updated and the rest of the files (after the abort) is missing.

I also tried a fresh clone and `hg upd -C default` leading to the same result. In the moment my 'default' branch is in an unusable state and I cannot get back to my branch. I *can* get back to the revision before the 'devui'-branch was created though.

所以我的问题是：是否可以跳过错误的符号链接，忽略中止并继续处理其余文件？（我可以轻松恢复该文件）。

我在 MacOSX 上使用 mercurial 2.3（通过 brew）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:47:20.057

[这个 2010 年的帖子](http://mercurial.808500.n3.nabble.com/hg-clone-fails-with-abort-could-not-symlink-to-td801496.html)（更老的 mercurial 版本）建议在 Windows 盒子上克隆 repo，这可能不受问题的影响，并在那里恢复符号链接。

# java - JAX-WS 服务生命周期

> ID：12001834
> 
> 赞同：0
> 
> 时间：2012-08-17T07:47:48.037
> 
> 标签：java, web-services, jax-ws

我正在开发一个从另一台服务器获取服务的 JAX-WS 网络服务。我必须打开套接字并关闭套接字才能使用此服务。

我正在寻找一些方法，我可以在部署时打开套接字并在未部署 web 服务时关闭套接字。

我计划使用@PostConstruct 和@PreDestroy，但它不能满足我的要求

@PostConstruct 仅在将新实例添加到方法就绪池时调用

@PreDestroy 仅在应用程序服务器决定减少 Method-Ready 池的大小时调用 - 即它确定它不需要保留尽可能多的 @WebService 实例。

请推荐我如何解决这个问题。我试图在每个请求时打开和关闭套接字，但它导致客户端超时。

问候， 伊姆兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:30:50.360

您可以在构造函数或 PostConstruct 注释方法中检查您的静态 Socket 是否已初始化（例如非 null）。并在需要时对其进行初始化。

如果您需要使用加载的实例数维护一个静态 int，您可以。

然后，您可以在 Finalize 或 PreDestroy 中使用减少计数器并在其达到 0 时销毁套接字。

# knockout.js - KnockoutJS 链依赖属性

> ID：12001839
> 
> 赞同：0
> 
> 时间：2012-08-17T07:48:10.783
> 
> 标签：knockout.js

有没有人有 ViewModel 中链依赖属性的工作示例？代码示例将解释我在说什么：

```
<script type="text/javascript">
    var ViewModel = function () {
        this.SelectedPubCode = ko.observable('@Model.PubCode');
        this.SelectedVersionName = ko.observable('@Model.VersionName');
        this.PubCodes = ko.observable(@Model.PubCodes.ToJavascriptArray());
        this.VersionNames = ko.observable(@Model.VersionNames.ToJavascriptArray());

        this.LoadVersionNames = function(pubCode) {
            var self = this;
            $.ajax({
                type: "POST",
                url: '@Url.Action("LoadVersionNames")',
                data: "pubCode=" + pubCode,
                success: function(data) {
                    self.VersionNames(data);
                    // Trigger chain call (will call SelectedVersionName subscribtion).
                    self.SelectedVersionName('');
                }
            }); 
        };

        this.SelectedPubCode.subscribe(function(newPubCode) {
            // Accessing public variable to call model's method
            model.LoadVersionNames(newPubCode);
        });

        this.SelectedVersionName.subscribe(function(newValue) {
            // Another model's method can be called here.
            alert("Version Name has been changed to '" + newValue + "'");
        });
    };
    // Creating public variable to access it from inside of subscribtion action
    var model = new ViewModel();
    ko.applyBindings(model);
</script> 
```

请看`this.SelectedPubCode.subscribe(function(newPubCode)`电话。我必须使用全局变量才能使其正常工作。有没有其他方法可以实现我想要的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:00:30.840

建议淘汰团队在视图模型中使用 self 变量来存储此指针。在这种情况下，您可以使用 self 来调用 LoadVersionNames 函数，而不是使用全局变量。

您的代码应如下所示：

```
<script type="text/javascript">
    var ViewModel = function () {
        var self = this;
        self.SelectedPubCode = ko.observable('@Model.PubCode');
        self.SelectedVersionName = ko.observable('@Model.VersionName');
        self.PubCodes = ko.observable(@Model.PubCodes.ToJavascriptArray());
        self.VersionNames = ko.observable(@Model.VersionNames.ToJavascriptArray());

        self.LoadVersionNames = function(pubCode) {
            $.ajax({
                type: "POST",
                url: '@Url.Action("LoadVersionNames")',
                data: "pubCode=" + pubCode,
                success: function(data) {
                    self.VersionNames(data);
                    // Trigger chain call (will call SelectedVersionName subscribtion).
                    self.SelectedVersionName('');
                }
            }); 
        };

        self.SelectedPubCode.subscribe(function(newPubCode) {
            // Accessing public variable to call model's method
            self.LoadVersionNames(newPubCode);
        });

        self.SelectedVersionName.subscribe(function(newValue) {
            // Another model's method can be called here.
            alert("Version Name has been changed to '" + newValue + "'");
        });
    };
    // Creating public variable to access it from inside of subscribtion action
    var model = new ViewModel();
    ko.applyBindings(model);
</script> 
```

# java - SOAP 和需要 Java serialVersionUID

> ID：12001842
> 
> 赞同：1
> 
> 时间：2012-08-17T07:48:23.343
> 
> 标签：java, soap, jaxb, cxf

序列化是将对象定义转换为持久格式（其中格式是特定于平台的）的过程。跨网络传输的对象（RMI、EJB）需要可序列化。SOAP 请求是基于 xml 的，而 JAXB 用于编组和解组对象 <---> xml。代码质量插件提示我添加 SerialVersionUID。这是必需的吗？CXF/JAXB 内部是否需要这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:56:03.083

据我所知，JAXB 不需要它。您收到此警告是因为您的类实现了`Serializable`，但 JAXB 并不要求您的类是`Serializable`.

如果没有其他原因需要您的类`Serializable`，则可以更改它们以使其不实现`Serializable`。

`Serializable`仅当您希望能够使用 Java 的默认序列化机制（例如，RMI 使用的）对它们进行序列化/反序列化时，您的类才需要实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:16:52.850

JAXB 文档中没有提到需要显式添加 SerialVersionUID。

SerialVersionUID 是每个 Serializable 类持有的版本号，用于反序列化以验证序列化对象的发送方和接收方是否保持兼容性，就序列化而言，加载的类涉及。

它不应该是必需的，因为编译器会自己生成一个 SerialVersionUID，所以你不用担心。

该计算对类细节非常敏感，因此两个不同的编译器可以计算不同的 SerialVersionUID，在这种情况下，JVN 在反序列化过程中可能会抛出 InvalidClassException。在这种情况下，您应该自己添加 SerialVersionUID。每次修改类时都必须更改 SerialVersionUID 以避免反序列化问题（这是因为如果您始终使用相同的编译器，最好不要指定 SerialVersionUID）。

不要被您的 IDE 所说的误导，这是您根据项目开发要求做出的选择。

# workflow - 将信息流整合到公司的软件

> ID：12001849
> 
> 赞同：0
> 
> 时间：2012-08-17T07:49:17.523
> 
> 标签：workflow, business-process-management, job-scheduling

在我们公司，我们正在考虑将一些处理客户信息的遗留系统替换为我们公司。典型的系统允许用户在某处放置一个 ftp 文件。然后，该文件将被许多程序转换，并最终进入某种数据库。我们总共有 +30 种不同的“系统”或应用程序来执行此操作。而且，它或多或少是一团糟。

我们认为我们缺乏管理这些流程的通用系统：由上传或可能的其他事件触发，注册数据，从中创建某种“工作”（或流程），将其传递给它需要的各种服务/转换程序通过，向客户提供反馈，向我们提供有关进度等的信息，处理故障等。有点像 Jenkins (/Hudson/CruiseControl/similar) 但对于信息转换工作，而不是构建工作，并且工作更像是工作的“流程实例”，然后工作本身（例如不同的数据应该触发作业多次，同时运行）。

我们可以自己编写这样的软件，但肯定存在这样的软件（？）我一直在谷歌搜索，发现我们需要的可能是“作业调度”软件或“业务流程管理”软件。但是，这些对我们来说都是新领域，我很不确定哪种软件可以满足我们的需求。以前似乎可以在此类软件中投入大量资源

所以，我正在寻找的是指向什么样的软件或系统可以解决我们的需求的指针。最好是开源的，基于 Java 的，在 Java EE 容器或类似容器中运行，但实际上，在这一点上，几乎任何指针/提示都会受到欢迎:-)

提前致谢

PS 我意识到我可能超出了 Stackexchange 的范围，但我无法找到另一个可以回答此类问题的论坛，所以我希望没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:46:30.360

我知道以下产品：

*   Redwood Cronacle（我在 1994-1997 年间使用它，它仍然在运行）。购买产品。基于 Oracle 和 C。在多个服务器平台上都很强大。可嵌入。
*   Oracle 电子商务套件核心。购买产品。基于甲骨文。强大的与相同的 ERP 系统集成。多服务器平台的弱点。
*   Invantive Vision（我开发了它:-)。购买产品。基于 Oracle 和 Java。与 ETL（Pentaho 开源）集成能力强。多服务器平台的弱点。可嵌入。
*   石英调度器。阿帕奇许可证。基于Java。2004年左右合作过。高度重视嵌入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T06:41:50.093

嗨，我不知道您是否会在开源或 Java 中找到该解决方案。对我来说，这听起来像是定制的或定制的软件。我建议您寻找具有高水平 IT 和数据仓库的项目管理软件开发人员。要求使用实时数据库进行定制和定制安装。我想你会用这个解决你的问题。

# ios - 想要在将精灵移动到一个点时平滑地降低旋转速度

> ID：12001853
> 
> 赞同：0
> 
> 时间：2012-08-17T07:49:58.567
> 
> 标签：ios, cocos2d-iphone

我正在使用 COCOS-2D。我想通过物体向目的地移动来降低精灵的旋转速度。

最初速度更快，我想通过运动平稳地降低它。

请帮助我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:59:54.577

[显式或以编程方式创建一系列旋转](http://www.cocos2d-x.org/embedded/cocos2d-x/d9/df5/classcocos2d_1_1_c_c_rotate_to.html#a6f154b202f82674f47aff85132021bb6)，增加持续时间和/或减少每次新旋转的角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:48:57.707

最简单的方法是并行运行两个动作——一个用于移动，另一个用于旋转。由于您希望旋转逐渐变慢，因此可以通过在旋转动作之上应用缓动动作来完成。这些方面的东西：

```
float animDuration = 1.5f;
float animRotateAngle = 720.f; // deg
CCActionInterval* effect = [CCSpawn actions: 
     [CCMoveTo actionWithDuration: animDuration position: destPoint], 
     [CCEaseSineOut actionWithAction: [CCRotateBy actionWithDuration: animDuration angle:animRotateAngle]], 
      nil];

[object runAction: effect]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T21:13:04.740

```
- (void)update:(CCTime)delta {

// reduce _ship.rotation
[_ship.physicsBody applyTorque:(_ship.rotation - rotation_01)*800];
rotation_01 = _ship.rotation;

} 
```

# c# - 从 webmethod 返回的 JSON 或 HTML

> ID：12001854
> 
> 赞同：1
> 
> 时间：2012-08-17T07:49:59.823
> 
> 标签：c#, jquery, html, json

从类返回数据的首选方法是什么，通过 JSON，然后在客户端构造 HTML，或者在返回的数据中构造 HTML？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:51:58.717

JSON 是首选方法。它提供了一个更具可扩展性的解决方案，它不依赖于您正在使用的服务的消费者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T07:52:13.903

这取决于您的应用程序的性质。例如，如果您想构建一个列表，那么让 Web 方法返回 JSON、拥有列表项的模板并使用 jQuery 或类似的东西（甚至手动）构建 DOM 是有意义的。但是，有时返回 HTML 可能有意义（例如，如果您需要获取列表项的主题模板），但随后您将再次返回 JSON 获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:53:47.317

MVC 框架为生成 HTML 服务器端提供了广泛的支持，使用控制器和视图来提供结构。我建议对此进行一些阅读，[http://www.asp.net/mvc](http://www.asp.net/mvc)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T07:57:42.070

您的问题几乎可以翻译为：“我选择[**ASP.NET WebForms**](http://msdn.microsoft.com/en-us/library/ms973868.aspx)还是[**ASP.NET MVC**](http://msdn.microsoft.com/en-us/library/ff649643.aspx)？” 在微软技术方面。老实说，WebForms 或在服务器上构建 HTML 有点过时，而更现代的方法 MVC 在可伸缩性方面更好，如上所述。将 JSON 传递给客户端允许您跨视图（页面）重用数据服务，并根据应用程序的演变呈现不同的前端，而服务器端呈现的 HTML 很难修改。

# c#-4.0 - Spring .NET 构造函数注入由其他依赖项创建的对象

> ID：12001855
> 
> 赞同：1
> 
> 时间：2012-08-17T07:50:09.203
> 
> 标签：c#-4.0, spring.net, constructor-injection

以下问题：

我正在开发一个使用 RabbitMQ 连接到 API 的 WCF 服务。我们使用 spring 作为 DI 容器。

我们做了一个消费者类（一些用于rabbit MQ + logging的自定义逻辑）

精简版：

```
 public class Consumer : DefaultBasicConsumer
{
    public Consumer(IModel channel)
            : base(channel)
        {}
} 
```

我们有一个 ConnectionManager 类：

```
 public class ConnectionManager
{
    public IModel Channel { get; set; }
    public IConnection Connection { get; set; }

    private readonly ConnectionFactory _connectionFactory;

    public ConnectionManager()
    {
        _connectionFactory = SetupConnectionFactory();

        Connection = _connectionFactory.CreateConnection();
        Channel = Connection.CreateModel();
    }
} 
```

**现在的问题是，在使用 Spring.NET 连接所有东西时。我们想将 ConnectionManager 类的 Channel 属性注入到 Consumer 构造函数中。**

到目前为止的 Spring 配置（精简）：

```
 <spring>
    <context>
      <resource uri="config://spring/objects"/>
    </context>
    <object name="connectionManager" type="Epex.ConnectionManager, EpexData" singleton="true"/>

    <object name="consumer" type="Epex.Consumer, EpexData">
      <constructor-arg ref="Do something funky here"/>
    </object>
</spring> 
```

**那么我在 Do Something funky 上放什么？**

我们还可以在消费者中重写和注入 ConnectionManager（最后一个选项）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T06:13:28.373

您可以修改 ConnectionManager

```
public class ConnectionManager
{
  public IModel Channel { get; set; }
  public IConnection Connection { get; set; }

  private readonly ConnectionFactory _connectionFactory;

  public ConnectionManager()
  {
    _connectionFactory = SetupConnectionFactory();

    Connection = _connectionFactory.CreateConnection();
    Channel = Connection.CreateModel();
  }

  public IModel GetChannel()
  {
    return Channel;
  }
} 
```

```
 <spring>
    <context>
      <resource uri="config://spring/objects"/>
    </context>
    <object name="connectionManager" type="Epex.ConnectionManager, EpexData" singleton="true"/>

    <object name="consumer" type="Epex.Consumer, EpexData">
      <constructor-arg>
        <object factory-object="connectionManager" factory-method="GetChannel" />
      </constructor-arg>
    </object>
</spring> 
```

# html - 在黑莓上垂直对齐 html 输入文本

> ID：12001862
> 
> 赞同：0
> 
> 时间：2012-08-17T07:51:24.427
> 
> 标签：html, css, blackberry, text, input

任何人都知道如何在黑莓设备上的输入类型文本中居中文本？

那是我的CSS：

```
.input_text {
    font-family: Arial,Helvetica,sans-serif;
    font-size: 14px;
    color: #333333;
    text-align: left;
    border: 1px solid #cccccc;
    vertical-align: middle; 
    width: 305px;
    height: 38px;
    line-height: 38px;
    vertical-align: middle;
    -webkit-appearance: none; 
    -webkit-border-radius:0px;
    -moz-border-radius:0px;
    -webkit-box-align: center;
    -moz-box-align: center;
    -o-box-align: center;
    box-align: center;
} 
```

它适用于除黑莓以外的所有浏览器/设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:26:15.147

而不是一个巨大的`line-height`，`vertical-align: middle`你可以使用填充：

```
.input_text {
    font-family: Arial,Helvetica,sans-serif;
    font-size: 14px;
    color: #333333;
    text-align: left;
    border: 1px solid #cccccc;
    width: 305px;
    height: 38px;
    padding: 12px 0; /***  12px = (38px - 14px) / 2  ***/ 
    -webkit-appearance: none;
} 
```

# android - 如何确定特定设备是否支持 SIM 硬件？

> ID：12001863
> 
> 赞同：8
> 
> 时间：2012-08-17T07:51:31.370
> 
> 标签：android, tablet, telephony

我想根据 SIM 硬件是否存在，在我的应用程序中禁用与 CALL 和 SMS 相关的功能。现在初学者的方法是使用以下方法检查电话类型：

```
if (telephonyManager1.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE) 
```

如果为真，则支持。

一切都很好，直到我遇到了仅支持数据和消息传递的 SIM 卡的 Sony Tablet S。没有语音支持。所以对于这个设备，我只需要禁用 CALL 功能，但继续支持 SMS。索尼平板电脑返回 TelephonyManager.PHONE_TYPE_NONE 所以我不能使用上述方法。还 ，

```
telephonyManager1.getSimState(); 
```

返回 1 即 SIM_STATE_ABSENT，对于不支持 SIM 硬件本身的 HTC FLYER，这也是相同的。

那么有什么方法可以让我知道是否有 SIM 硬件（不管是否插入了 SIM 卡）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:51:14.260

利用

```
PackageManager pm = this.getPackageManager();
boolean hasTelephony=pm.hasSystemFeature(PackageManager.FEATURE_TELEPHONY); 
```

编辑：

尝试使用

```
TelephonyManager.getLine1Number() 
```

如果这返回 null 那么您将没有电话功能。没试过。试一试

# android - apk 无法在某些设备上运行

> ID：12001864
> 
> 赞同：0
> 
> 时间：2012-08-17T07:51:33.710
> 
> 标签：android, apk, coronasdk

我有一个快速的问题。我在 Corona SDK（版本 2012.878）中构建了一个应用程序。我的应用程序在我的 Galaxy S 上运行良好。但它无法在 HTC Wildfire S 上安装。是因为 CPU 的原因吗？还有其他一些原因吗？有没有办法知道应用程序将无法安装在哪些设备上？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T13:47:05.293

HTC Wildfire 有一个 ARMv6 处理器。您需要一台带有 ARMv7 或更高版本的设备才能安装 Corona 应用程序。有一个非常旧的 Corona SDK 版本支持 ARMv6，但它不再受支持，我认为这也不是那么容易上手的。

# .htaccess - 旧页面 PR 到

> ID：12001865
> 
> 赞同：1
> 
> 时间：2012-08-17T07:51:35.333
> 
> 标签：.htaccess, redirect, seo, pagerank

我的网站有很多指向其页面的链接。我将彻底更新网站、更新 CMS、内容和页面结构。域保持不变。

1.  如果用户在 Internet 上的某个地方找到指向旧站点页面的旧链接并跟随该链接，而该链接已经是一个新站点并且链接指向的旧页面不存在，那么用户会如何访问浏览器？
2.  如果旧页面未打开到域的根目录，如何从这些旧链接进行重定向或其他操作？
3.  在这种情况下，Google 如何不丢失 PR 并将旧页面的 PR 权重重定向到主域？

我非常感谢有关此主题的任何相关讨论，因为它从各个方面都非常有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:02:57.563

> 如果用户在 Internet 上的某个地方找到指向旧站点页面的旧链接并跟随该链接，而该链接已经是一个新站点并且链接指向的旧页面不存在，他们会在浏览器中获得什么？

他们将收到 404 Not Found。

> 如果旧页面未打开到域的根目录，如何从这些旧链接进行重定向或其他操作？

您需要创建从每个旧页面到等效新页面的 301 重定向。你可以使用 mod_alias 来做到这一点：

```
RedirectMatch 301 ^/old_page/(.*)$ /new_page/$1 
```

或 mod_rewrite：

```
RewriteRule ^old_page/(.*)$ /new_page/$1 [L,R=301] 
```

您显然需要根据您的特定需求定制匹配的表达式和目标。如果您有很多需要重定向的单个 URL，您可能需要考虑创建一个[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)。

> 在这种情况下，Google 如何不丢失 PR 并将旧页面的 PR 权重重定向到主域？

只要您使用 301 重定向（永久重定向，而不是 302，临时重定向），Google 的网页排名就会转移到新网址。

* * *

> 在这种情况下使用 mod_alias 或 mod_rewrite 更好，为什么？

两者都可以，但是 mod_rewrite 为您提供了更多选项并允许重写地图。但是如果你做一些简单的事情，mod_alias 就可以了。

> 再次与 301 和 302 相同，在这里使用什么更好？

你想要301在这里。这意味着“您请求的资源**已永久移动到 HERE** ”，而不是 302，这意味着“您请求的资源现在不在这里，但与此同时，您可以在这里找到它”。此外，如果您只进行 302 重定向，Google 不会将任何页面排名转移到新页面，因为它仅用于临时重定向。当页面永久移动到新 URL 时不会。

> 最后我刚刚在他们都喜欢的旧页面上查看 domain.tld/index.php?id=77`RewriteRule ^index.php?id=(*)$ / [L,R=301]`在这种情况下，对于任何 id 号码，这条规则是否正确？

这条规则将不起作用。您无法匹配 a 中的查询字符串（?id= 部分）`RewriteRule`，仅匹配`%{QUERY_STRING} var in a`RewriteCond `. Also`(*)` 可能不是您想要的。

`/index.php?id=N`这会将N 为任意数字的任何请求 301 重定向到文档根目录。

```
RewriteCond %{QUERY_STRING} ^id=([0-9]+)
RewriteRule ^index.php$ / [L,R=301] 
```

# cocoa - Xcode Objective C - 如何在 OS X 的 Web 浏览器中添加加载栏？

> ID：12001869
> 
> 赞同：1
> 
> 时间：2012-08-17T07:51:52.030
> 
> 标签：cocoa, webkit, loading

我正在制作一个网络浏览器。创建了一个 URL 文本栏和一个 WebView。但我一直想知道如何制作一个进度/加载栏，告诉用户网页加载了多少，我该怎么做？

我检查了 Apple 的 WebKit Development Guide，但没有解释任何关于加载栏的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T23:42:13.883

这是一个有效的实现，假设您有一个`@property`用于 Web 的视图、一个 URL 文本字段和一个进度指示器。

您的控制器需要成为资源委托和策略委托：

```
- (void)awakeFromNib
{
  self.webView.resourceLoadDelegate = self;
  self.webView.policyDelegate = self;
} 
```

确保 URL 字段与页面具有相同的 URL。我们稍后使用它进行跟踪。

```
- (void)webView:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request frame:(WebFrame *)frame decisionListener:(id<WebPolicyDecisionListener>)listener
{
  self.urlField.stringValue = request.URL.absoluteString;

  [listener use];
} 
```

检测页面何时开始加载。

```
- (id)webView:(WebView *)sender identifierForInitialRequest:(NSURLRequest *)request fromDataSource:(WebDataSource *)dataSource
{
  if ([request.URL.absoluteString isEqualToString:self.urlField.stringValue]) {
    [self.loadProgress setIndeterminate:YES];
    [self.loadProgress startAnimation:self];
  }
  return [[NSUUID alloc] init];
} 
```

这将在新数据进入时被调用。注意“长度”参数是在这块数据中接收到的长度量。您需要使用 dataSource 来查找到目前为止收到的实际金额。另请注意，大多数 Web 服务器（如几乎所有动态网页）都不会返回内容长度标头，因此您必须大胆猜测。

```
- (void)webView:(WebView *)sender resource:(id)identifier didReceiveContentLength:(NSInteger)length fromDataSource:(WebDataSource *)dataSource
{
  // ignore requests other than the main one
  if (![dataSource.request.URL.absoluteString isEqualToString:self.urlField.stringValue])
    return;

  // calculate max progress bar value
  if (dataSource.response.expectedContentLength == -1) {
    self.loadProgress.maxValue = 80000; // server did not send "content-length" response. Pages are often about this size... better to guess the length than show no progres bar at all.
  } else {
    self.loadProgress.maxValue = dataSource.response.expectedContentLength;
  }
  [self.loadProgress setIndeterminate:NO];

  // set current progress bar value
  self.loadProgress.doubleValue = dataSource.data.length;
} 
```

当请求完成加载时调用此委托方法：

```
- (void)webView:(WebView *)sender resource:(id)identifier didFinishLoadingFromDataSource:(WebDataSource *)dataSource
{
  // ignore requests other than the main one
  if (![dataSource.request.URL.absoluteString isEqualToString:self.urlField.stringValue])
    return;

  [self.loadProgress stopAnimation:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:43:03.917

Apple 提供了一个示例，说明如何在资源加载到此页面时对其进行跟踪。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/ResourceLoading.html#//apple_ref/doc/uid/20002028-CJBEHAAG](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/ResourceLoading.html#//apple_ref/doc/uid/20002028-CJBEHAAG)

您可以使用数字来设置进度条，而不是打印出多少资源中的多少。

顺便说一句：这个计数似乎是判断给定页面/URL是否真的完成加载的唯一方法。

# asp.net - ASP.NET MVC3 单页设计建议

> ID：12001870
> 
> 赞同：0
> 
> 时间：2012-08-17T07:51:53.357
> 
> 标签：asp.net, asp.net-mvc-3, single-page-application

我想为我的应用程序创建一个 UI（目前我在 WPF 中有一个 UI）并且我喜欢“单页应用程序”范例。我对如何开始实施它有点困惑：我不介意 SEO，我的是一个企业应用程序。我是否需要使用像 sammy.js、backbone.js 之类的东西？我真的是 Web GUI 开发的新手，我有点困惑：为什么不能只使用 jquery 调用来驱动我的单页 DOM？这种策略有一些缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:59:57.453

查看 John Papa 的这一系列博客文章，这可以让您快速开始……

[http://johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins](http://johnpapa.net/building-single-page-apps-with-knockout-jquery-and-web-api-ndash-the-story-begins)

[http://johnpapa.net/spapost2](http://johnpapa.net/spapost2)

[http://johnpapa.net/spapost3](http://johnpapa.net/spapost3)

[http://johnpapa.net/spapost4](http://johnpapa.net/spapost4)

[http://johnpapa.net/spapost5](http://johnpapa.net/spapost5)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:56:28.023

您可以只使用 jQuery，但如果设计不仔细，它很快就会变得非常难以管理。看看 knockout.js，它是 mvvm，它非常适合管理状态和对事件做出反应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T08:05:10.043

首先，你可以只用 jquery 来做你的单页应用程序。但是，您将编写大量管道代码来处理 UI 不同部分之间的交互。这不是开发过程中最有趣的部分，特别是如果框架为您做得很好。

你应该看看这个问题：[https](https://stackoverflow.com/questions/5112899/knockout-js-vs-backbone-js-vs) ://stackoverflow.com/questions/5112899/knockout-js-vs-backbone-js-vs ，然后在淘汰赛和骨干之间做出决定。

为了实现一个简单的主从 UI（左列用于列出项目，右列用于显示，jquery 弹出窗口用于更多详细信息或编辑），我选择了淘汰赛，并没有失望。学习曲线不像主干那样陡峭，并且来自 WPF MVVM 应用程序很容易理解开发范式。我选择了 ASP.NET MVC 来使用 ViewResults 提供 html 模板，然后一切都通过 JSON。Knockout 使这很容易，因为它具有客户端数据绑定功能。然后，当回传数据时，MVC 模型绑定也使服务器端绑定变得容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T12:32:55.210

如果你开发 SPA，那么你最好的选择是 knockout.js+MVC+Ajax/jQuery

# ms-access - 以前的记录-MS Access

> ID：12001873
> 
> 赞同：0
> 
> 时间：2012-08-17T07:52:11.447
> 
> 标签：ms-access

如果有人让我知道如何在 MSAccess 中实现“PreviousValue” cloumn，则不胜感激

我将记录存储在“总体”以外的各种类别的表中，并且基于 ID/名称/办公室/产品/类别组合我想通过 MS Access 功能/高效查询来实现以前的值列

```
ID       Name        Office Product Overall    Month         Value  Previous
228      Woodlands  london  Europe  Sales      201106          6    0
228      Woodlands  london  Europe  Sales      201202          3    6
228      Woodlands  london  Europe  Sales      201207          4    3
228      Woodlands  london  Europe  Overall    201106          6    0
228      Woodlands  london  Europe  Overall    201202          3    6
228      Woodlands  london  Europe  Overall    201207          4    3
228      Woodlands  london  Europe  Exetion    201202          6    0
228      Woodlands  london  UK      Exetion    201202          6    1
228      Woodlands  london  UK      Exetion    201106          1    0
228      Woodlands  london  Europe  Exetion    201207          6    6
228      Woodlands  london  Europe  Content    201106          6    0
228      Woodlands  london  UK      Content    201106          1    0
228      Woodlands  london  Europe  Content    201202          3    6
228      Woodlands  london  UK      Content    201202          1    1
228      Woodlands  london  UK      Content    201207          1    1
228      Woodlands  london  Europe  Content    201207          4    3 
```

提前致谢 ！！

* * *

查询结果--我猜是因为 Top1 函数而不是预期的结果，正确的输出如下图所示

```
 ID  Name      Office   Product Category    Date       Month    ValuePrevious
228  Investors  london  Europe  Content   01/06/2011    201106  6   0
228  Investors  london  Europe  Content   23/02/2012    201202  3   6
228 Investors   london  Europe  Content   01/07/2012    201207  4   6 
```

![在此处输入图像描述](../Images/38e4ac3fbb29831eca905214ddee2e50.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:00:13.840

您可以使用子查询来获取先前的值。

```
SELECT tx.id,
       tx.name,
       tx.office,
       tx.product,
       tx.overall,
       tx.month,
       tx.VALUE,
       tx.previous,
       Nz((SELECT TOP 1 [value]
           FROM   tablename t
           WHERE  t.id = tx.id
                  AND t.name = tx.name
                  AND t.office = tx.office
                  AND t.product = tx.product
                  AND t.overall = tx.overall
                  AND t.month < tx.month
           ORDER  BY t.month, rnd(t.id) DESC), 0) AS Prev
FROM   tablename tx
ORDER  BY tx.month; 
```

* * *

基于更改的、非常稀疏的样本数据的新查询

```
SELECT tz.id, 
       tz.name, 
       tz.office, 
       tz.product, 
       tz.date, 
       tz.month, 
       tz.VALUE, 
       Nz((SELECT TOP 1 [value] 
           FROM   tablename t 
           WHERE  t.id = tz.id 
                  AND t.name = tz.name 
                  AND t.office = tz.office 
                  AND t.product = tz.product 
                  AND t.date < tz.date
           ORDER  BY t.date DESC), 0) AS Prev 
FROM   tablename tz 
ORDER  BY tz.date; 
```

# python - 用脚本填充 Sql 表

> ID：12001882
> 
> 赞同：1
> 
> 时间：2012-08-17T07:52:50.407
> 
> 标签：python, mysql, shell, tcsh

我有一个 SQL 数据库，我想用脚本填充表。以下源代码显示了我到目前为止所做的事情：

```
 #!/bin/tcsh
   mysql -h dbs1 -D my_devel -u USER --password=XYZ
   insert into my_table ( col_id, type, file, result, signature) values (***,'###','+++','$$$','...');
   exit 
```

根据我传递的参数'*'，'#'，'+'，'$'和'.' 通过python中定义的方法。

但不知何故，这对我不起作用。有人可以告诉我为什么，或提出替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:06:33.473

扩展 Martijn 的评论，连接到 MySQL 数据库的最简单方法之一是使用[python-mysqldb](http://mysql-python.sourceforge.net/MySQLdb.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:57:33.407

这对我来说似乎很好用：

```
#!/bin/tcsh

# count-rows.csh

mysql -h 127.0.0.1 -D tpcw -u root <<EOF
select count(*) from $1;
exit
EOF 
```

您需要将要执行的命令发送到`mysql`实用程序的标准输入。有几种方法可以做到这一点，但使用[此处的文档](http://en.wikipedia.org/wiki/Here_document#Unix_shells)可能是最简单的方法。

也就是说，如果您的数据来自 Python 程序，您应该考虑[为 Python 使用适当的 MySQL 连接器](http://www.mysql.com/products/connector/)。您应该会看到明显的性能提升，但更重要的是，您将能够正确处理任何错误。

# android - 如何本地化我的 android 应用程序文本？

> ID：12001885
> 
> 赞同：1
> 
> 时间：2012-08-17T07:52:57.343
> 
> 标签：android, localization

我正在开发不同语言的 android 应用程序。我想本地化我的应用程序。我从服务器获取语言文本我想根据从服务器检索到的文本更改文本。

请任何人帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:54:26.960

你应该从这里开始。[Android 官方本地化指南](http://developer.android.com/guide/topics/resources/localization.html)....[这](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)是我发现的很棒的教程之一。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T07:55:50.423

我认为 ttf 文件可能会对您有所帮助。获取所有语言的 ttf 文件并将字体设置为文本

# php - 从联系人表查询插入到发件箱表

> ID：12001891
> 
> 赞同：0
> 
> 时间：2012-08-17T07:53:23.553
> 
> 标签：php, mysql

请帮帮我。我想从联系人表插入到发件箱表。

接触：

```
CREATE TABLE `contacts` 
 (`id` int(11) NOT NULL auto_increment,
  `name` varchar(25) NOT NULL,
  `phone` varchar(20) NOT NULL,
  `group_name` varchar(20) NOT NULL,
  PRIMARY KEY  (`id`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7;

INSERT INTO `contacts` VALUES (1, 'jala', '+60111', 'friends');
INSERT INTO `contacts` VALUES (2, 'jali', '+60222', 'friends');
INSERT INTO `contacts` VALUES (3, 'jalu', '+60333', 'friends');
INSERT INTO `contacts` VALUES (4, 'kada', '+60444', 'members');
INSERT INTO `contacts` VALUES (5, 'kadi','+60555','members');
INSERT INTO `contacts` VALUES (6, 'kadu', '+60666', 'members'); 
```

发件箱：

```
CREATE TABLE `outbox`
(`id` int(11) NOT NULL,
 `phone_number` varchar(20) NOT NULL,
 `text` varchar(160) NOT NULL,
 PRIMARY KEY  (`id`) 
) ENGINE=MyISAM DEFAULT CHARSET=utf8;} 
```

我想插入发件箱表。

插入.php

```
$sql =mysql_query("SELECT phone 
                   FROM contacts 
                   WHERE group_name = 'member'");
while($data = mysql_fetch_array($sql))
{  $id= $data['id']; $phone= $data['phone'];(phone_number, text) VALUES('$phone','I LOVE YOU') }?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:59:12.610

```
INSERT INTO outbox (id,phone_number,text)
SELECT id,phone,'I LOVE YOU'
FROM contacts
WHERE group_name = 'member' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:02:54.097

您需要`INSERT...SELECT`在查询中使用该语句。并为此使用**[PDO](http://php.net/manual/en/book.pdo.php)** 扩展。

例子：

```
<?php

    $sqlStatement = "INSERT INTO outbox (id, phone_number, text)
                     SELECT id, phone, ?
                     FROM   contacts
                     WHERE  group_name = ?";

    $text = "I LOVE YOU";
    $group_name = "member";

    $stmt = $dbh->prepare($sqlStatement);
    $stmt->bindParam(1, $text);
    $stmt->bindParam(2, $group_name);

    $stmt->execute();

?> 
```

***请记住始终清理您的输入。***

# visual-studio-2005 - 如何让命令出现在VS2005的右键菜单中？

> ID：12001892
> 
> 赞同：0
> 
> 时间：2012-08-17T07:53:25.970
> 
> 标签：visual-studio-2005, contextmenu, right-click

如何让在 IDE 标准菜单中找到的命令也出现在 VS2005 的右键上下文菜单中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:29:25.317

如果对您有帮助，我会使用类似的东西：

```
public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
{
    _application = (DTE2)application;
    if (connectMode == ext_ConnectMode.ext_cm_Startup)
    {
    // Other command bars are: "Code Window", "ASPX Code Context"
        var commandBar = _application.CommandBars["ASPX Context"];

        CommandBarButton test =
                commandBar.Controls.Add(MsoControlType.msoControlButton,
                System.Reflection.Missing.Value,
                System.Reflection.Missing.Value,
                System.Reflection.Missing.Value, true) as CommandBarButton;

            // Set the caption of the submenuitem
            test.Caption = "Edit";
            test.Enabled = true;
            test.Visible = true;
            test.Click += new _CommandBarButtonEvents_ClickEventHandler(MyEventHandler);
    }
} 
```

# c - Ctrl+D doesn't stop application from executing in command window

> ID：12001894
> 
> 赞同：1
> 
> 时间：2012-08-17T07:53:32.967
> 
> 标签：c

I've written a program to encrypt a given message by XOR. It works, but It doesn't end. Here is the code.(I have created 3 files):

encrypt.h :

```
void encrypt(char *message); 
```

message_hider.c:

```
#include <stdio.h>
#include "encrypt.h"

int main() {
  char msg[80];

  while (fgets(msg, 80, stdin)){
    encrypt(msg);
    printf("%s", msg);
  }

  return 0;
} 
```

encrypt.c :

```
#include "encrypt.h"

void encrypt(char *message) {
  while (*message) {
    *message++ ^= 0x1f;
  }
} 
```

As I mentioned above, It works. but I can't stop it. When I pressed Ctrl+D to stop it (in cmd) It encrypts it also.(I need this code stop after it encrypt a message). Please explain me about this case.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T07:55:37.457

> When I pressed Ctrl+D to stop it (in cmd)

If that's the `cmd` from Windows you probably want `Ctrl+Z`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T08:01:12.757

**Ctrl-D** is used for the console EOF on Unix systems.

**Ctrl-Z** is used for the console EOF on Windows systems.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T08:19:56.050

`isprint()` can help:

```
#include <stdio.h>
#include <ctype.h>

void encrypt(char *message)
{
    while (*message) {
        *message = *message ^ 31;
        message++;
    }
}

int main(void)
{
    char msg[80];

    while (fgets(msg, 80, stdin) != NULL) {
        if (!isprint((unsigned char)*msg)) break;
        encrypt(msg);
        printf("%s", msg);
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T08:01:55.027

Add an exit condition:

```
if( c < 0x20 ) break; 
```

You may need to add other checks also to support backspace without encoding it...

[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T09:39:55.797

Just run

```
 $> kill -l 
```

To see the list of signals in Linux. You will not find SIGKILL (Ctrl + D) signal there :(

Ctrl + D is SIGKILL (0) signal in Linux which is not documented anywhere. Ctrl + Z is for Windows which tell EOF and we need to press "Enter" to close.

# php - PHP：如何修复 hash_hmac() 期望参数 2 是字符串

> ID：12001896
> 
> 赞同：0
> 
> 时间：2012-08-17T07:53:52.477
> 
> 标签：php, oauth, twitter-oauth

我正在尝试使用 Twitter 和 TwitPic API 将图片发布到 TwitPic。但我收到以下错误。

> hash_hmac() 期望参数 2 是字符串，对象在 twitpic.php 第 36 行给出

我认为错误在这里

```
$content = $connection->get('account/verify_credentials'); 
```

当这里再次使用 $content 时

```
$signature = urlencode(base64_encode(hash_hmac('sha1', $content, $key, true))); 
```

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T15:28:09.673

这是因为 hash_hmac()**确实**需要两个参数。第一个参数是散列算法，第二个是要散列的字符串。 [检查签名并在此处获取一些示例。](http://php.net/manual/en/function.hash-hmac.php) 正如 Rukshan 指出的那样，类型必须符合规定。

# tridion - 预编译核心服务客户端与生成自己的代理

> ID：12001905
> 
> 赞同：12
> 
> 时间：2012-08-17T07:54:34.260
> 
> 标签：tridion, tridion-2011

自 2011sp1 起，Tridion 带有一个预编译的核心服务客户端。是否还有理由通过添加服务引用来生成自己的代理？还是这种旧方法现在已正式弃用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T08:43:40.237

让我们看一下编译后的 dll 与服务参考的优势：

*   核心服务正在增长，在较慢的网络上生成服务参考引用是一个相当大的问题。核心服务越大，生成服务引用就越困难（当然有变通方法）
*   编译的 dll 是使用“正确”设置编译的。在生成服务引用时可以设置一些选项，例如返回类型和要从其他程序集中重用的类型。通过使用已编译的 dll，您可以确保一切正常。
*   更新服务参考时，您的 app.config 可能会一团糟。我认为更新 dll 和配置更容易一些。
*   当您配置了 LDAP 或 SSO 或 HTTPs 时，生成服务引用很棘手

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T08:39:44.747

预编译的 coreservice 客户端默认分发以帮助实现者。由于生成自己的代理有点困难（您可能需要更改 svcutil 中的一些配置）。

预编译的 coreservice 客户端总是使用最新的端点。根据您的情况，如果您想始终与旧端点连接，您可能需要生成自己的代理。

否则，您可以使用预编译的客户端，这将确保您连接到最新的端点，但这可能会破坏您的客户端（您可能需要修复某些内容或重新编译）。

# iphone - 如何在 iOS/iPhone 上更改 UIButton 的位置

> ID：12001906
> 
> 赞同：0
> 
> 时间：2012-08-17T07:54:39.907
> 
> 标签：iphone, drag-and-drop, uibutton

在我的应用程序中，我在`UIButton`里面创建了三个，我希望这些按钮应该在其中交换。（即）如果我拖放（按钮 1）并将其放在（按钮 2）上，那么（按钮 2）应该被替换为（按钮 1）的位置，对于（按钮 3）也是如此。我找到了，如何拖放`UIButton`，但我无法交换它。

这是我的按钮创建和拖放代码：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTitle:@"Drag One!" forState:UIControlStateNormal];

    // add drag listener
    [button addTarget:self action:@selector(wasDragged:withEvent:) 
     forControlEvents:UIControlEventTouchDragInside];

    // center and size
    button.frame = CGRectMake((self.view.bounds.size.width - 10)/2.0,
                              (self.view.bounds.size.height - 50)/2.0,
                              100, 50);
    button.tag=0;
    [self.view addSubview:button];
   .........

  -(void)wasDragged:(UIButton *)button withEvent:(UIEvent *)event
{

 if(button.tag==0){

        UITouch *touch = [[event touchesForView:button] anyObject];

        // get delta
        CGPoint previousLocation = [touch previousLocationInView:button];
        CGPoint location = [touch locationInView:button];
        CGFloat delta_x = location.x - previousLocation.x;
        CGFloat delta_y = location.y - previousLocation.y;

        // move button
        button.center = CGPointMake(button.center.x + delta_x,
                                    button.center.y + delta_y);
    }
    ...........
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:04:05.653

使用这样的代码：

```
[UIView animateWithDuration:0.5
                              delay:0.1
                            options: UIViewAnimationCurveEaseOut
                         animations:^
         {
             CGSize s = [[CCDirector sharedDirector] winSize];

             CGRect frame = mButton.frame;
             frame.origin.y = location.y ;
             frame.origin.x = location.x ;
             mButton.frame = frame;
         } 
                         completion:^(BOOL finished)
         {

         }]; 
```

# visual-studio-2010 - Visual Studio 编辑标签文本快捷方式

> ID：12001909
> 
> 赞同：3
> 
> 时间：2012-08-17T07:55:05.587
> 
> 标签：visual-studio-2010, visual-studio, shortcut

Visual Studio 2010 中是否有快捷方式可以跳转到当前所选项目的属性 - 文本字段？

编辑：谢谢史蒂夫 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:58:14.947

这取决于您当前的键盘布局，但如果您使用布局 Visual C#2005 按两次 F4 键，您将在当前标签的 text 属性内进行编辑

# button - 带有按钮的 JSF 自定义面板 - 未调用操作

> ID：12001910
> 
> 赞同：2
> 
> 时间：2012-08-17T07:55:06.487
> 
> 标签：button, jsf-2, action

我已经构建了一个自定义组件按钮，但不知何故没有调用该操作。在组件中调试 getAction-Method 并调用提供的 MethodeExpression 时，Bean-Method 会按预期调用。但是由于某种原因，在浏览器中按下按钮时不会调用表达式。

是否需要某种额外的接口才能将操作传递给嵌入式按钮组件？

任何帮助都非常感谢，因为我在这个问题上停留了几天

我的课：

```
public class MyClass extends UIPanel implements SystemEventListener
{

private UIForm              form;
private HtmlCommandButton   buttonOk;

public MyClass()
{
    FacesContext context = getFacesContext();
    UIViewRoot root = context.getViewRoot();
    root.subscribeToViewEvent(PostAddToViewEvent.class, this);
}

@Override
public void processEvent(SystemEvent event)
{
    this.form = new UIForm();
    this.buttonOk = new HtmlCommandButton();
    this.buttonOk.setId("okButtonId");
    this.buttonOk.setActionExpression(getAction());
    this.buttonOk.setValue("OK");
    this.form.getChildren().add(this.buttonOk);
    getChildren().add(this.form);
}

private enum PropertyKeys
{
    action, text, titel
}

public MethodExpression getAction()
{
    return (MethodExpression) getStateHelper().eval(PropertyKeys.action);
}

public void setAction(MethodExpression actionExpression)
{
    getStateHelper().put(PropertyKeys.action, actionExpression);
}

public String getText()
{
    return (String) getStateHelper().eval(PropertyKeys.text);
}

public void setText(String text)
{
    getStateHelper().put(PropertyKeys.text, text);
}

public String getTitel()
{
    return (String) getStateHelper().eval(PropertyKeys.titel);
}

public void setTitel(String titel)
{
    getStateHelper().put(PropertyKeys.titel, titel);
}

@Override
public void encodeAll(FacesContext context) throws IOException
{
    ResponseWriter writer = context.getResponseWriter();
    writer.startElement(HTML.DIV_ELEM, this);
    writer.writeText(getText(), null);
    this.form.encodeAll(context);
    writer.endElement(HTML.DIV_ELEM);
}

@Override
public void encodeChildren(FacesContext context) throws IOException
{

}

@Override
public boolean isListenerForSource(Object source)
{
    return (source instanceof MyClass);
} 
```

}

我的类处理程序：

```
public class MyClassHandler extends ComponentHandler
{

public MyClassHandler(ComponentConfig config)
{
    super(config);
}

@SuppressWarnings("rawtypes")
@Override
protected MetaRuleset createMetaRuleset(Class type)
{
    return super.createMetaRuleset(type).addRule(new MethodRule("action", String.class, new Class[] { ActionEvent.class }));
} 
```

}

myView 方法：

```
...
public String myMethod()
{
    System.err.println("myMethod");
    return "/some/path/yadayada.xhtml";
}
... 
```

我的视图.xhtml

```
<myTag action="#{myView.myMethod}" id="id1" titel="bla" text="bleh" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T06:42:05.990

扩展 UICommand 就足够了，因为您只希望执行一个操作。

您必须通过标签属性提供两个额外的 MethodExpression，并且在 decode-method 中，您可以检查哪个按钮被按下并将特定的 MethodExpression 重定向到 UICommand 提供的标准操作。这样，您不必担心遗留接口 ActionSource 或事件的广播方式。

```
public void decode(FacesContext contex)
{
    Map<String,String> map = context.getExternalContext.getRequestParameterMap();
    // your rendered buttons need a name you check for
    final boolean okPressed = map.containsKey( getClientId + ":ok" ); 
    final boolean cancelPressed = map.containsKey( getClientId + ":cancel" );
    if(okPressed || cancelPressed)
    {
        MethodExpression exp = null;
        if(okPressed)
        {
            exp = getActionOk();
        }
        else
        {
            exp = getActionCancel();
        }
        // redirect to standard action
        setActionExpression(exp);
        queueEvent(new ActionEvent(this));
    }
} 
```

为了利用这一点，您需要两个使用方法表达式（setter 和 getter）的属性（actionOk 和 actionCancel）。这些必须由 ComponentHandler 配置，就像您为操作属性所做的那样。

# mysql - MySQL 截断 GROUP_CONCAT 函数的连接结果

> ID：12001919
> 
> 赞同：56
> 
> 时间：2012-08-17T07:55:37.240
> 
> 标签：mysql, view, types, truncate

我创建了一个视图，该视图用于`GROUP_CONCAT`连接对 products 列的查询结果，该列的数据类型`'varchar(7) utf8_general_ci'`为`concat_products`.

问题是 MySQL 截断了“concat_products”列的值。phpMyAdmin 说“concat_products”列的数据类型是`varchar(341) utf8_bin`

餐桌产品：

```
CREATE TABLE `products`(
    `productId` tinyint(2) unsigned NOT NULL AUTO_INCREMENT, 
    `product` varchar(7) COLLATE utf8_general_ci NOT NULL, 
    `price` mediumint(5) unsigned NOT NULL, 
    PRIMARY KEY (`productId`)
) ENGINE=InnoDB AUTO_INCREMENT=28 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci 
```

“concat_products_vw”视图：

```
CREATE VIEW concat_products_vw AS
SELECT
  `userId`,
    GROUP_CONCAT(CONCAT_WS('_', `product`, `productId`, `price`) 
        ORDER BY `productId` ASC SEPARATOR '*') AS concat_products
FROM
  `users`
LEFT JOIN `products` 
ON `users`.`accountBalance` >= `product`.`price`
GROUP BY `productId` 
```

根据 MySQL 手册：

> VARCHAR 列中的值是可变长度字符串
> 长度可以指定为 MySQL 4.0.2 之前的 1 到 255 和 MySQL 4.0.2 之前的 0 到 255 的值。

* * *

### 编辑

`Values in VARCHAR columns are variable-length strings. The length can be specified as a value from 0 to 65,535.`

1.  `varchar`为什么 MySQL 为“concat_products”列指定超过 255 个字符？（解决了！）

2.  为什么`uf8_bin`而不是`utf8_general_ci`？

3.  *是否可以将视图*中列的数据类型更改为例如在我的情况下为“concat_products”列的文本？

4.  如果不是，我该怎么做才能防止 MySQL 截断“concat_products”列？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-17T10:06:10.370

正如我在之前的评论中所写的，[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/char.html)说：

> VARCHAR 列中的值是可变长度字符串。长度可以指定为 0 到 65,535 之间的值。

所以问题不在于字段的数据类型。

[MySQL手册](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)还说 ：

> 结果被截断为由 group_concat_max_len 系统变量给出的最大长度，其默认值为 1024。该值可以设置得更高，尽管返回值的有效最大长度受 max_allowed_pa​​cket 值的限制。在运行时更改 group_concat_max_len 值的语法如下，其中 val 是无符号整数： SET [GLOBAL | 会话] group_concat_max_len = val;

您更改 group_concat_max_len 值的选项是：

1.  通过将其附加到命令来更改 MySQL 启动时的值：
    `--group_concat_max_len=your_value_here`
2.  在你的 MySQL 配置文件 (mysql.ini) 中添加这一行：`group_concat_max_len=your_value_here`
3.  在 MySQL 启动后运行此命令：
    `SET GLOBAL group_concat_max_len=your_value_here;`
4.  打开 MySQL 连接后运行此命令：
    `SET SESSION group_concat_max_len=your_value_here;`

文档：[SET](http://dev.mysql.com/doc/refman/5.5/en/set-statement.html)，[服务器系统变量： group_concat_max_len](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_group_concat_max_len)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-22T22:29:49.377

正如 Jocelyn 所提到的，`GROUP_CONCAT()`结果的大小以 为界`group_concat_max_len`，但是还有一个额外的交互作用`ORDER BY`会导致进一步截断为 的 1/3 `group_concat_max_len`。例如，请参阅[此相关答案](https://stackoverflow.com/a/37979180/3516590)。

默认值为`group_concat_max_len`1024，而 1024 / 3 = 341 可能解释了为什么 concat_products 的类型会像`varchar(341)`原始示例中那样显示。如果您要删除该`GROUP BY productId`子句， concat_products 应该显示为`varchar(1024)`.

我没有发现[MySQL Manual](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)中提到的这种交互`GROUP_CONCAT()`，但它至少会影响 MySQL Server 5.1。`ORDER BY`

# php - 如何以多维方式创建新键并存储数组值 PHP

> ID：12001920
> 
> 赞同：0
> 
> 时间：2012-08-17T07:55:39.143
> 
> 标签：php, arrays, multidimensional-array, merge

我这里有数据：首先，我的第一个函数名为 getsiteaccounts() 的结果

```
Array
(
[0] => Array
    (
        [SiteID] => 2
        [AID] => 5
    )

[1] => Array
    (
        [SiteID] => 2
        [AID] => 3
    )
[2] => Array
    (
        [SiteID] => 6
        [AID] => 4
    ) 
```

我的第二个函数的结果名为 bindGHComponentsToSites()

```
 Array
  ( 
  [2] => Array
    (
        [SiteID] => 2
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 5
        [GroupID] => 1
        [Deposit] => 1500
        [Reload] => 1000
        [Redemption] => 1000
    )

) 
```

然后，添加指向 OwnerAID 列表的 [CorpAID] 键。顺便说一下，OwnerAID 和 AID 是一样的。如您所见，SiteID => 2 由两个 OwnerAID => 5 和 3 拥有。这应该是结果：

```
 Array([0])=> Array (
        [SiteID] => 2
        [Balance] => 19000.00
        [MinBalance] => 100000.00
        [MaxBalance] => 1000000.00
        [OwnerAID] => 5
        [GroupID] => 1
        [Deposit] => 1500
        [Reload] => 1000
        [Redemption] => 1000
        [CorpAID] => Array(
                   [0] => 5
                   [1] => 3
        )
      )
  ) 
```

SiteID => 6 不应打印，因为它仅由一个 AID 拥有。有可能做到吗？请以正确的方式指导我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:19:52.930

您可以使用几个`foreach`循环来做您需要的事情：

```
<?php

$siteAccounts = array(
  array('SiteID'=>2, 'AID'=>5),
  array('SiteID' => 2, 'AID' => 3),
  array('SiteID' => 6, 'AID' => 4)
);

$componentsToSites = array(array(
  'SiteID' => 2,
  'Balance' => 19000.00,
  'MinBalance' => 100000.00,
  'MaxBalance' => 1000000.00,
  'OwnerAID' => 5,
  'GroupID' => 1,
  'Deposit' => 1500,
  'Reload' => 1000,
  'Redemption' => 1000
));

foreach ($componentsToSites as &$site) {
  $aids = array();
  foreach ($siteAccounts as $acct) {
      if ($acct['SiteID'] === $site['SiteID'])
        $aids[] = $acct['AID'];
  }
  $site['CorpAID'] = $aids;
}

print_r($componentsToSites); 
```

***编辑：***

我原来的答案使用了，[`array_walk`](http://php.net/manual/en/function.array-walk.php)而不是`foreach`，但由于兼容性问题，我切换了它。这是使用的原始代码片段`array_walk`：

```
array_walk($componentsToSites, function (&$site) use ($siteAccounts) {
  $aids = array();
  array_walk($siteAccounts, function ($acct) use ($site, &$aids) {
      if ($acct['SiteID'] === $site['SiteID'])
        $aids[] = $acct['AID'];
  });
  $site['CorpAID'] = $aids;
}); 
```

# google-chrome-extension - 在侧 chrome 扩展中加载 facebook 社交插件（“manifest_version”：2）

> ID：12001921
> 
> 赞同：1
> 
> 时间：2012-08-17T07:55:40.963
> 
> 标签：google-chrome-extension, facebook-social-plugins

以前我已经在我的 chrmoe 扩展中加载了带有清单版本 01 的 facebook 评论插件。现在我将版本更新为清单版本 02，然后我必须在我的扩展代码库中进行几个更改。

根据新版本，如果不指定与“content_security_policy”关联的外部资源，我们将无法加载外部 js 文件。无论如何，这是我的新 manifest.json 文件，

```
{
  "name": "",
  "version": "1.13",
  "manifest_version": 2,
  "description": "",
  "background": "background.html",
  "icons": { "128": "fb_bug.gif" },
  "content_security_policy": "script-src 'self' https://connect.facebook.net/; object-src 'self'",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "plugin_content.html"
  },
   "permissions": [
   "tabs",
   "background",
    "cookies"
  ],"web_accessible_resources": [
    "css/extension.css",
    "js/config.js",
    "js/jquery-1.6.1.min.js"
    "js/extension.js",
    "images/loaderImg.gif",
    "https://connect.facebook.net/en_US/all.js"
  ]
} 
```

现在，当我加载扩展程序时，它会引发以下错误，并且 facebook 社交插件无法正常工作。

“错误：此上下文不允许从字符串生成代码 all.js:41”

有没有人知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:45:40.737

抱歉花了这么长时间才回复这个问题。

我是 Facebook 的一名工程师，并尝试寻找替代方法来删除我们在 SDK 中使用的一个 Function()，但不幸的是，没有办法在不破坏功能的情况下可靠地删除它。其他人似乎也有同样的问题，我没有找到任何人能够以有效的方式解决这个问题。

但是，根据对 Chromium 问题跟踪器的评论 (http://code.google.com/p/chromium/issues/detail?id=107538#c69)，您应该能够通过`content_security_policy`向您的显示白`'unsafe-eval'`名单`script-src`：

```
 {
        ...
        "content_security_policy": "script-src 'self' 'unsafe-eval'; object-src 'self'"
        ...
    } 
```

# blackberry - 黑莓文件上传到服务器

> ID：12001928
> 
> 赞同：0
> 
> 时间：2012-08-17T07:56:13.273
> 
> 标签：blackberry, http-headers, http-post

我正在尝试将文件上传到服务器，为此我尝试了很多不同的代码，但我无法成功。

在此代码中，连接已成功创建，但在通过创建标头读取文件并将数据发布到服务器时...

```
class ConnectionThread extends Thread
{
    DataOutputStream outputStream = null;
    DataInputStream inputStream = null;
    String boundary =  "*****";
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 2*1024*1024;
    DataInputStream fileInputStream = null;

    public void run()
    {  
        try {          
          ConnectionFactory connFact = new ConnectionFactory();
          ConnectionDescriptor connDesc;
          connDesc = connFact.getConnection("http://www.myserver/upload.php");

          if (connDesc != null)
          {
              HttpConnection conn;
              conn = (HttpConnection)connDesc.getConnection();

              conn.setRequestMethod(conn.POST);

              conn.setRequestProperty("Connection", "Keep-Alive");
              conn.setRequestProperty("ENCTYPE", "multipart/form-data");
              conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

              outputStream = new DataOutputStream( conn.openDataOutputStream() );
              outputStream.writeChars(twoHyphens + boundary + lineEnd);
              outputStream.writeChars("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + "files:///SDCard/bb.txt" +"\"" + lineEnd);
              outputStream.writeChars(lineEnd); 

              bytesAvailable = fileInputStream.available();
              bufferSize = Math.min(bytesAvailable, maxBufferSize);
              buffer = new byte[bufferSize];

              // Read file
              FileConnection fis=(FileConnection)Connector.open("file:///SDCard/bb.txt");

              InputStream inputStream = fis.openInputStream();

              ByteArrayOutputStream bos=new ByteArrayOutputStream();
              int buffersize=1024*1024;
              byte[] buffer=new byte[buffersize];
              int length=0;
              while((length=inputStream.read(buffer))!=-1)
              {
                   bos.write(buffer,0,length);
              }
              byte[] imagedata=bos.toByteArray();

              outputStream.write(imagedata);                 

              outputStream.writeChars(lineEnd);
              outputStream.writeChars(twoHyphens + boundary + twoHyphens + lineEnd);

              // Responses from the server (code and message)
              int serverResponseCode = conn.getResponseCode();
              final String serverResponseMessage = conn.getResponseMessage();                    

              fileInputStream.close();
              outputStream.flush();
              outputStream.close();
         }
    }
    catch (Exception e) {

    }
} 
```

请有人帮忙...提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:11:28.310

试试这个链接，这个代码支持在服务器上使用多部分上传文件。它也可以在黑莓上运行，需要进行一些修改。

```
http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME 
```

# android - 活动之间交换数据

> ID：12001929
> 
> 赞同：0
> 
> 时间：2012-08-17T07:56:14.223
> 
> 标签：android

我创建了 2 `Activities`， Main 和 Second 。我想发送文本，`EditText`从 Main 到 Second 活动的框中。第一个的 ID`EditText`是`UserName`，第二个的 ID 是`Description`。

Main活动的代码是：

```
package com.example.test;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.support.v4.app.NavUtils;
import android.content.Intent;
import android.widget.EditText;

public class Main extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);           
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void onClick(View v) {
        Intent intent = new Intent(Main.this, Second.class);
        intent.putExtra("username", UserName.getText().toString()); 
        intent.putExtra("gift", Description.getText().toString());  
        startActivity(intent);
    }

    public void ButtonOneClick(View v) {
        switch (v.getId()) {
            case R.id.button1:
                Intent i = new Intent(this, Second.class);
                startActivity(i);
                break;
        }
    } 
} 
```

第二个Activity的完整代码是：package com.example.test；

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;

public class Second extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        TextView txtInfo = (TextView)findViewById(R.id.TextOne);

        String user = "ЖЫвотное";
        String gift = "дырку от бублика";

        user = getIntent().getExtras().getString("username");
        gift = getIntent().getExtras().getString("gift");

        txtInfo.setText(user + " , вам передали " + gift);
    }
} 
```

和错误：

```
main.java: Description cannot be resolved
main.java: UserName cannot be resolved 
```

对不起我的英语不好

感谢帮助

PS我在学习java和android编程才第三天，请不要向我扔石头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:00:01.447

然后，您将参考您的`R`类文件，即：

```
EditText desc = (EditText) findViewById(R.id.Description);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:14:31.027

正如您所引用的那样`UserName`，`Description`这里将它们称为类。除非您有这样的类，否则将说明错误，因为无法找到（或“解决”）这些类。您甚至可以通过语法高亮注意到这一点。您是否看到以浅绿色/绿松石色显示的单词 a 像`Main`or `Intent`？

```
public void onClick(View v) {
    Intent intent = new Intent(Main.this, Second.class);
    intent.putExtra("username", UserName.getText().toString()); 
    intent.putExtra("gift", Description.getText().toString());  
    startActivity(intent);
} 
```

`EditText`相反，您需要您调用的类的实例`userName`和`description`. 在这些对象上，您可以按照`getText()`自己的方式执行和工作。:)

```
public void onClick(View v) {
    Intent intent = new Intent(Main.this, Second.class);
    EditText userName = (EditText) findViewById(R.id.username);
    EditText description = (EditText) findViewById(R.id.description);
    intent.putExtra("username", userName.getText().toString()); 
    intent.putExtra("gift", description.getText().toString());  
    startActivity(intent);
} 
```

请注意，我已将变量的名称更改为以[camelCase](http://en.wikipedia.org/wiki/CamelCase)开头的 lowerCase 。虽然不是一个明确的规则，但以小写字母开头的变量名（'userName `,`description `,`intent `) while **C**lass references like (`ÈditText `,`Main `,`Second`）以大写字母开头被认为是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:07:40.813

你没有包括

```
EditText UserName = (EditText) findViewById(R.id.username);
EditText Description = (EditText) findViewById(R.id.description); 
```

在 MainActivity 的 onCreate() 方法中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:51:16.500

你还没有在你的java中初始化用户名和描述；

```
EditText us_name=(EditText) findViewById(R.id.user_name);
EditText us_desp=(EditText) findViewById(R.id.desp); 
```

# android - 如何避免安卓 ANR

> ID：12001933
> 
> 赞同：0
> 
> 时间：2012-08-17T07:56:27.250
> 
> 标签：android

我有一个链接到我的 Android 应用程序的库，我正在从我的 android 活动中调用该库的一些函数，这些函数调用需要时间（4-5 秒）。

由于库的限制，我不能在单独的线程（使用 AsyncTaks、线程）中调用此函数。

当我调用这些函数并且这些函数同时在处理中时，我的 UI 不会响应用户活动并避免我正在显示处理屏幕，并且如果中间用户执行任何关键操作，那么我会收到 ANR 错误。

我怎样才能避免这种 ANR，或者除了将时间处理放在单独的线程中之外，我无法避免它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:13:38.033

谁编写了这个库，它是什么？我能想到它为什么会引发异常的唯一原因是它试图从您调用它的线程更新 UI。如果库方法需要 4-5 秒来竞争，那么它们应该为您提供一个回调机制，您可以在 UI 线程上更新您的 UI。

```
new Thread("Slow native process") {
    public void run() {
        // call your "time taking process", passing in the callback (you could implement in the outer class and pass "this"...)
        callNativeMethod( args, new YourCallbackInterface() {
            public void onResult( String response ) {
                activity.runOnUiThread( new Runnable() {
                    // update UI
                });
            }
        });
    }
 }.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:04:42.870

最好阅读[**这篇**](http://developer.android.com/guide/practices/responsiveness.html)文章并观看谷歌 IO 视频（比如[**这个**](http://www.google.com/events/io/2010/sessions/writing-zippy-android-apps.html)和[**这个**](http://www.youtube.com/watch?v=twmuBbC_oB8&feature=player_embedded#t=2863s)）。

如果你没有时间，只需记住这个简单的规则：

**长时间操作（如互联网操作、数据库操作、IO 操作以及任何可能只花费 5 秒以上的操作）如果发生在 UI 线程上，可能会导致 ANR。**

要更新 UI，您必须使用 UI 线程。如果您需要在长时间操作之后/期间执行此操作，请使用以下类：[Handler](http://developer.android.com/reference/android/os/Handler.html)、[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)、[View.post](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)、[Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)。

# node.js - LinkedIn API 失败 - Node.js 请求

> ID：12001935
> 
> 赞同：1
> 
> 时间：2012-08-17T07:56:48.783
> 
> 标签：node.js, oauth, request, linkedin

我正在尝试使用请求模块对 Node.js 进行 REST API 调用。我已经获得了 accessToken 和 accessTokenSecret。

当我进行 api 调用以获取我的个人资料时，我得到了一个结果，但是当我进行 api 调用以进行公司搜索时，我收到以下错误

```
<error>
  <status>401</status>
  <timestamp>1345187981287</timestamp>
  <request-id>HE45IXV7YZ</request-id>
  <error-code>0</error-code>
  <message>[unauthorized]. OAU:xxxxx|xxxxx|*01|*01:1345188248:kCNFNUu6JePTEy7k5e8Ca9vHAzg=</message>
</error> 
```

但是，当我使用 JAVA（Scribe jar）进行相同的 API 调用时，使用相同的 accessToken 和 accessTokenSecret 我会得到公司搜索的结果。

我在下面发布我的 node.js 代码以供参考

```
//oauth test

var request = require('request');

var key = 'xxxxx';
var secret = 'xxxxx';
var redirect = '';
var restURL = 'http://api.linkedin.com/v1/company-search?keywords=philips&format=json';
var accessToken = 'xxxxx';
var accessTokenSecret = 'xxxxx';

var proxySetting  = "http://proxy:port/";

function getRequestToken()
{
    var requestOAuth = 
    {
            consumer_key: key
          , consumer_secret: secret
          //, token: accessToken
          //, token_secret: accessTokenSecret
    };

    var requestTokenURL = 'https://api.linkedin.com/uas/oauth/requestToken';
    request.get({'proxy':proxySetting,url:requestTokenURL,oauth:requestOAuth},function(e,r,data)
    {
        console.log('Error is: ' + e);
        console.log('Data is: ' + data);
        console.log('Response is: ' + r);
    });
}

 function getAccessToken()
{
    var accessOAuth = 
    {
            consumer_key: key
          , consumer_secret: secret
          , token: 'xxxxx'
          , token_secret: 'xxxx'
          ,verifier : #####
    };

    var accessTokenURL = 'https://api.linkedin.com/uas/oauth/accessToken';
    request.get({'proxy':proxySetting,url:accessTokenURL,oauth:accessOAuth},function(e,r,data)
    {
        console.log('Error is: ' + e);
        console.log('Data is: ' + data);
        console.log('Response is: ' + r);
    });
}

/         

function comSearch()
{
    var apiToken = 'xxxxx';
    var apiTokenSecret = 'xxxxx';
    var apiOAuth = 
    {
            consumer_key: key
          , consumer_secret: secret
          , token: apiToken
          , token_secret: apiTokenSecret
    };

    var apiURL = 'http://api.linkedin.com/v1/company-search?keywords=philips';
    var peopleProfile = 'http://api.linkedin.com/v1/people/~';
    request.get({'proxy':proxySetting,url:apiURL,oauth:apiOAuth},function(e,r,data)
    {
        console.log('Error is: ' + e);
        console.log('Data is: ' + data);
        console.log('Response is: ' + r);
    });
}                                                             

comSearch(); 
```

以下是我的标题

```
Response is: GET http://api.linkedin.com/v1/company-search?keywords=philips HTTP/1.1
host: api.linkedin.com
Authorization: OAuth keywords="philips",oauth_consumer_key="xxx",oauth_nonce="xxx",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1345189928",oauth_token="xxx",oauth_version="1.0",oauth_signature="xxx"
content-length: 0
Connection: keep-alive 
```

由于签名问题会不会有一些错误？

我已发布此[问题](https://github.com/mikeal/request/issues/299)，但将其发布在这里以吸引更广泛的受众

* * *

编辑 1

我使用[请求](https://github.com/mikeal/request/)模块的原因是，它可以帮助我在代理后面进行 oauth。

我很想尝试[Passport.js](http://passportjs.org/)或[node-oauth](https://github.com/ciaranj/node-oauth/)或[linked-in，](https://github.com/masylum/linkedin-js)但似乎没有一个选项可以指定我的代理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:49:06.963

我设法使用 node-oauth 让它工作

显然提供了代码修复，以便我们可以通过代理访问 node-oauth，并且效果很好。

Jared Hanson 在这个[SO Question](https://stackoverflow.com/q/5428745/226906)中提到了在 http-proxy 上使用 node-oauth 的修复。可以在[此处找到通过 http-proxy 对 node-oauth 的修复](https://github.com/ciaranj/node-oauth/pull/108)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:00:15.853

请分享您生成的基本签名字符串。您的查询参数似乎没有正确添加到签名字符串中。在linkedIn论坛上的一些旧帖子中，我看到需要在字符串中组织参数才能以字母数字顺序登录。

# javascript - Paypal Adaptive Payment - 如何自动完成流程

> ID：12001937
> 
> 赞同：0
> 
> 时间：2012-08-17T07:57:13.247
> 
> 标签：javascript, paypal, paypal-adaptive-payments

~~我正在使用 paypals 自适应支付 API 从我的网站进行销售。

在某种程度上，我已经让它工作了。

我已经设置了我的 api 凭据。我已经到了可以单击我网站上的按钮开始付款的地步，我的网站调用了 Paypal 服务器，我得到了 PayKey 的返回。根据我读过的文档，。我将支付密钥插入表单，并在表单提交按钮上设置触发器以启动灯箱流程。

但是，我的客户在单击原始按钮时已经启动了该过程，因此我希望带有 PayKey 的表单自动提交。问题是我不知道如何设置灯箱触发器。

我需要提交的表格是：

```
<form action="https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay" target="PPDGFrame" name = "paypal_form"> 
                <input id="type" type="hidden" name="expType" value="light"> 
                <input id="paykey" type="hidden" name="paykey" value="RETURNED_PAYKEY_GOES_HERE">       
                <input type="submit" id="submitBtn" value="Pay with PayPal">    
        </form> 
```

我有一个 javascript 触发器，在按下提交按钮时启动灯箱：

```
var dgFlow = new PAYPAL.apps.DGFlow({ trigger: 'submitBtn' }); 
```

因此，如果我按下按钮，灯箱会按要求打开，但是，当我按下按钮获取 PayKey 时，我已经开始销售，我不想再次按下按钮，并且我已经看到灯箱过程开始了没有第二个按钮点击的其他网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T10:25:20.807

您可以使用 javascript 提交表单。为了更容易，给表单一个 id，这是一个使用 jQuery 的例子：

```
<form id="paypal-form" action="https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay" target="PPDGFrame" name = "paypal_form"> 
    <input id="type" type="hidden" name="expType" value="light"> 
    <input id="paykey" type="hidden" name="paykey" value="RETURNED_PAYKEY_GOES_HERE">       
    <input type="submit" id="submitBtn" value="Pay with PayPal">    
</form>
<script>
    $('paypal-form').submit();
</script> 
```

# android - TableLayout 中的 ArrayList IndexOutOfBoundsException

> ID：12001938
> 
> 赞同：0
> 
> 时间：2012-08-17T07:57:16.970
> 
> 标签：android, scrollview, tablelayout, gesture

我的 Activity 中有方法，如果用户向下滚动 TableLayout，它应该从 web 服务中添加项目。看起来像：

```
 private void getOrderList(String page, String perpage) throws JSONException
{

    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
    try {
        DataParsing u = new DataParsing();
        UserFunctions n = new UserFunctions();
        JSONObject k= n.getOrders(page,perpage);

        orders = u.wrapOrders(k);
        Dao<ProcessStatus,Integer> dao = db.getStatusDao();
        Log.i("status",dao.queryForAll().toString());
        QueryBuilder<ProcessStatus,Integer> query = dao.queryBuilder();
        Where where = query.where();
        //query.selectColumns(ProcessStatus.STATUS_TITLE).where().eq(ProcessStatus.STATUS_ID,).toString());
        //PreparedQuery<ProcessStatus, Integer> preparedQuery = ((Object) query).prepareQuery();
        String result = "";
        List<String[]> results = null;
        String res[][] = null;

        try{
            for(Order r : orders)
            {
                 GenericRawResults<String[]> rawResults = dao.queryRaw("select "+ ProcessStatus.STATUS_TITLE +" from process_status where "+ ProcessStatus.STATUS_ID + " = " + r.getProcess_status().getProccessStatusId());
                 results = rawResults.getResults();
                 String[] resultArray = results.get(0); //This will select the first result (the first and maybe only row returned)
                 result = resultArray[0]; //This will select the first field in the result (That should be the ID you need)
                 r.getProcess_status().setProccessStatusTitle(result);
                 Log.i("res",r.toString());
                 forPrint.add(r);
                 Log.i("asd",forPrint.toString());
                 //res = Integer.toString(r.getOrderid());             
             }

        }

        catch (Exception e) {
            e.printStackTrace();
        }

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

这是我在表中追加行的功能：

```
 private void appendRows(int start,int end) {
    final TableLayout table = (TableLayout)findViewById(R.id.table);
    for (int i=start; i<end; i++)
    { 

        TableRow row = new TableRow(this); 

        TextView idText = new TextView(this);

        idText.setText(Integer.toString(forPrint.get(i).getOrderid()));

        idText.setPadding(10, 0, 0, 20);
        idText.setTextColor(Color.BLACK);
        row.addView(idText);

        TextView textOne = new TextView(this);
        textOne.setText(forPrint.get(i).getTitle());
        textOne.setSingleLine(false);
        textOne.setPadding(15, 0, 0, 0);
        textOne.setTextColor(Color.BLACK);
        row.addView(textOne);

        TextView textTwo = new TextView(this);
        textTwo.setText(Float.toString(forPrint.get(i).getPrice()));
        textTwo.setPadding(15, 0, 0, 0);
        textTwo.setTextColor(Color.BLACK);
        row.addView(textTwo);

         TextView textThree = new TextView(this);
         textThree.setText(forPrint.get(i).getProcess_status().getProccessStatusTitle());
         textThree.setPadding(15, 0, 0, 0);
         textThree.setTextColor(Color.BLACK);
        row.addView(textThree);

       table.addView(row, new TableLayout.LayoutParams()); 
    }
 } 
```

最后，我的 GestureListener：

```
 class MyGestureListener extends SimpleOnGestureListener implements OnTouchListener
{

public boolean onDown(MotionEvent arg0) {
    Log.i("asd","sdas");
    return false;
}

public void onLongPress(MotionEvent arg0) {
    // TODO Auto-generated method stub

}
public boolean onScroll(MotionEvent e1, MotionEvent e2, float arg2,
        float arg3) {
    mIsScrolling = true;   

    float pos = e2.getY() - e1.getY();
    if (pos< -120)
    {
        Log.i("sd","I'm here");
        try {

            page+=1;
            start +=10;    // start position of the new items
            end+=10;       // end position of the new items
            Log.i("position down",Integer.toString(page));
            getOrderList(Integer.toString(page),"10");
            appendRows(start,end);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    return true;
   }
   } 
```

它工作得很好，除了当我滚动到数据末尾的情况......它抛出 IndexOutOfBoundsException 像这样：

```
 08-17 10:46:34.749: E/AndroidRuntime(6321): FATAL EXCEPTION: main
08-17 10:46:34.749: E/AndroidRuntime(6321): java.lang.IndexOutOfBoundsException: Invalid index 58, size is 58
08-17 10:46:34.749: E/AndroidRuntime(6321):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at java.util.ArrayList.get(ArrayList.java:311)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.assignmentexpert.DashboardActivity.appendRows(DashboardActivity.java:192)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.assignmentexpert.DashboardActivity.access$2(DashboardActivity.java:183)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.assignmentexpert.DashboardActivity$MyGestureListener.onScroll(DashboardActivity.java:264)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at android.view.GestureDetector.onTouchEvent(GestureDetector.java:541)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.assignmentexpert.DashboardActivity.dispatchTouchEvent(DashboardActivity.java:334)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1734)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2216)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1887)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at android.os.Looper.loop(Looper.java:123)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at java.lang.reflect.Method.invokeNative(Native Method)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at java.lang.reflect.Method.invoke(Method.java:507)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-17 10:46:34.749: E/AndroidRuntime(6321):     at dalvik.system.NativeStart.main(Native Method) 
```

我应该如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:27:40.730

我通过简单的验证解决了这个问题。我的方法 appendRows() 如下所示：

```
private void appendRows(int start,int end) {
    final TableLayout table = (TableLayout)findViewById(R.id.table);
    if(forPrint.size() >= end)  // implementation which solved my problem
    {
        for (int i=start; i<end-1; i++)
        { 

            TableRow row = new TableRow(this); 

            TextView idText = new TextView(this);

            idText.setText(Integer.toString(forPrint.get(i).getOrderid()));

            idText.setPadding(10, 0, 0, 20);
            idText.setTextColor(Color.BLACK);
            row.addView(idText);

            TextView textOne = new TextView(this);
            textOne.setText(forPrint.get(i).getTitle());
            textOne.setSingleLine(false);
            textOne.setPadding(15, 0, 0, 0);
            textOne.setTextColor(Color.BLACK);
            row.addView(textOne);

            TextView textTwo = new TextView(this);
            textTwo.setText(Float.toString(forPrint.get(i).getPrice()));
            textTwo.setPadding(15, 0, 0, 0);
            textTwo.setTextColor(Color.BLACK);
            row.addView(textTwo);

             TextView textThree = new TextView(this);
             textThree.setText(forPrint.get(i).getProcess_status().getProccessStatusTitle());
             textThree.setPadding(15, 0, 0, 0);
             textThree.setTextColor(Color.BLACK);
            row.addView(textThree);

           table.addView(row, new TableLayout.LayoutParams()); 
         }
   }
} 
```

# web-services - Delphi 7 CGI web 服务全局参数

> ID：12001941
> 
> 赞同：1
> 
> 时间：2012-08-17T07:57:26.773
> 
> 标签：web-services, delphi, cgi, global-variables, delphi-7

我需要在我的 Delphi CGI Web 服务的 Web 模块中设置一个全局参数，以便我可以在请求的整个生命周期中将其用作唯一标识符 (traceId) 以进行日志记录。唯一标识符需要在 Web 模块中生成，因为我首先记录的是接收到的原始 XML。然后，我在我的实际 Web 服务方法中记录各种调试信息，我需要 Id 将这些信息联系在一起。

我想不出办法来做到这一点。在我的 Web 服务方法中无法访问实际的 Web 模块，任何尝试都会引发访问冲突。我可能以完全错误的方式这样做，但我可以想到另一种解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:41:03.223

假设您正在谈论一个 SOAP Web 服务，您可以使用[`GetSOAPWebModule`](http://docwiki.embarcadero.com/Libraries/en/Soap.WebBrokerSOAP.GetSOAPWebModule)它从您的服务方法中获取对您的 Web 模块的引用。

例子：

```
uses
  WebBrokerSOAP, MyWebModuleUnit;

procedure TMyService.MyMethod;
var
  MyWebModule: TMyWebModule;
  TraceID: Integer;
begin
  MyWebModule := GetSOAPWebModule as TMyWebModule;
  TraceID := MyWebModule.TraceID;
end; 
```

# c# - 使用 group by 和在 linq 中实现 min & max 函数

> ID：12001942
> 
> 赞同：-4
> 
> 时间：2012-08-17T07:57:36.453
> 
> 标签：c#, linq

我在下面有这个 sql 查询，我必须使用 linq 来实现它，但我无法为它创建一个 linq 语句。请提供一些帮助。

```
Declare @DateTime datetime 
set @DateTime = '06/20/2012';-- To get the yesterday/any day attendance record.
With Cte
as
(
    Select EmployeeiD,(convert(varchar,(DATEDIFF(MINUTE,Min(DateAndTime),Max(DateAndTime))/60)) + ':' 
      + convert(varchar,(DATEDIFF(MINUTE,Min(DateAndTime),Max(DateAndTime))/60)))WorkedHoursAndMinutes,
    Min(DateAndTime) As DateAndTime from EmployeeAttendance group by
    EmployeeiD,convert(varchar,DateAndTime,101),convert(varchar,DateAndTime,101) having (
    (DATEDIFF(MINUTE,Min(DateAndTime),Max(DateAndTime))/60) >= 12
        or (DATEDIFF(MINUTE,Min(DateAndTime),Max(DateAndTime))) = 0 )
)
select * from Cte
where convert(varchar,Cte.DateAndTime,103) = 
           (select convert(varchar,@DateTime,103)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T14:53:48.587

由于您只展示*了*您如何尝试实现某些目标，因此很难准确推断*出*您想要什么。但我认为就是这样：

```
employeeAttendances.Where(e => e.DateAndTime >= d1 && e.DateAndTime < d2)
.GroupBy (e => e.EmployeeiD)
.Select (g => new 
{ 
    g.Key, 
    Diff = EntityFunctions.DiffHours(g.Min(x => x.DateAndTime),
                                     g.Max(x => x.DateAndTime)) 
} )
.Where(a => a.Diff > 12 || a.Diff == 0) 
```

它计算每个特定日期的最小和最大时间之间的差异`EmployeeID`。

# javascript - RequireJS 不同的 jQuery

> ID：12001945
> 
> 赞同：0
> 
> 时间：2012-08-17T07:57:45.623
> 
> 标签：javascript, jquery, requirejs

我想使用RequireJS来加载jQuery（我开发的模块应该在jQuery可能已经初始化的不受控制的环境中工作），但是当需要不同版本的jQuery时会出现一些问题。结果出乎意料。里面的 require 函数块 jQuery 版本有点随机。怎么了？这是说明问题的代码：

```
<!DOCTYPE html>
<html>
<head>
    <script data-main="scripts/main" src="http://ajax.cdnjs.com/ajax/libs/require.js/0.24.0/require.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
</head>
<body>

<script>
    console.log(jQuery.fn.jquery);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"], function() {
      console.log($.fn.jquery);
      });
    },1000);
    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"], function() {
      console.log($.fn.jquery);
      });
    },2000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.js"], function() {
      console.log($.fn.jquery);
      });
    },3000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"], function() {
      console.log($.fn.jquery);
      });
    },4000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"], function() {
      console.log($.fn.jquery);
      });
    },5000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"], function() {
      console.log($.fn.jquery);
      });
    },6000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"], function() {
      console.log($.fn.jquery);
      });
    },7000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.js"], function() {
      console.log($.fn.jquery);
      });
    },8000);

    setTimeout(function(){
      require(["http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"], function() {
      console.log($.fn.jquery);
      });
    },9000);
</script>
</body>
</html> 
```

结果是：

```
1.6.2
1.8.0
1.4.4
1.8.0
1.8.0
1.6.2
1.6.2
1.6.2
1.6.2
1.6.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:02:31.313

假设您使用的是[AMD（异步模块定义）](http://addyosmani.com/writing-modular-js/)兼容版本的 jQuery，jQuery 对象应该作为函数的第一个参数可用：

```
 require(["some_version_of_jquery.js"], function(jQuery) {
      console.log(jQuery.fn.jquery);
      }); 
```

因此，函数内部可用的 jQuery 对象是在本地范围内定义的，而不是在全局范围内定义的。

如果您不使用 AMD 兼容版本，则必须使用[RequireJS Shim 配置。](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim)

# java - 为什么在将元素添加到 TreeSet 时我没有得到类转换异常或其他东西

> ID：12001946
> 
> 赞同：10
> 
> 时间：2012-08-17T07:57:55.767
> 
> 标签：java, collections

以下是我的代码

```
class NumberComparator<Number> implements Comparator<Number> {
    public int compare(Number o1, Number o2) {
        return 1;
    }
}

public class Ex28 {
    public static void main(String[] args) {
        TreeSet set = new TreeSet(new NumberComparator<Number>());
        set.add(1);
        set.add(1.4f);
        set.add(1L);
        set.add("1a");
        System.out.println(set);
    }
} 
```

正如我已经定义了自己的 Number 类型的比较器，但是当我向其中添加任何其他字符串时，它并没有给我任何例外。它工作正常。我得到的输出为

```
[1, 1.4, 1, 1a] 
```

任何人都可以解释为什么会这样。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T08:05:23.650

问题是一些不良做法的混合：

*   您正在使用原始类型`TreeSet`
*   你`NumberComparator`是通用的（`Number`是一个类型参数）

这里是类型参数的事实`Number`意味着类型擦除意味着您实际上不会强制转换为真实`Number`类型。

如果您将比较器更改为：

```
class NumberComparator implements Comparator<Number> {
    public int compare(Number o1, Number o2) {
        return 1;
    }
} 
```

和您的调用代码：

```
TreeSet set = new TreeSet(new NumberComparator()); 
```

*那么*我期待一个例外。

此外，如果您将代码更改为不使用原始类型：

```
TreeSet<Number> set = new TreeSet<Number>(new NumberComparator()); 
```

那么你会得到一个编译时错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T08:01:13.117

A `Comparator`for a`TreeSet`用于排序，而不是用于抛出 CCE。由于您的比较器旨在返回`1`所有内容，这意味着排序不正确。

这就是您的输出未排序的原因。

请务必阅读`TreeSet`.

```
/**
 * Constructs a new, empty tree set, sorted according to the specified
 * comparator.  All elements inserted into the set must be <i>mutually
 * comparable</i> by the specified comparator: {@code comparator.compare(e1,
 * e2)} must not throw a {@code ClassCastException} for any elements
 * {@code e1} and {@code e2} in the set.  If the user attempts to add
 * an element to the set that violates this constraint, the
 * {@code add} call will throw a {@code ClassCastException}.
 *
 * @param comparator the comparator that will be used to order this set.
 *        If {@code null}, the {@linkplain Comparable natural
 *        ordering} of the elements will be used.
 */
public TreeSet(Comparator<? super E> comparator) {
    this(new TreeMap<>(comparator));
} 
```

它明确指出，如果您尝试添加除`Comparator`设计对象之外的任何其他元素，它会抛出`ClassCastException`. 如果您**不使用泛型**，则可以通过尝试添加`String`. 但是，如果您确实使用泛型，这将只是一个编译时问题。

同时，您应该始终如一地使用泛型。

```
class NumberComparator<C> implements Comparator<C> {
    public int compare(C o1, C o2) {
        return 1; // change this logic
    }
}

Set<Number> set = new TreeSet<>(new NumberComparator<Number>()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:28:38.587

总而言之，如果您将比较器定义如下，您将获得类转换异常:)

```
import java.util.Comparator;

class NumberComparator<Number> implements Comparator<java.lang.Number> {
public int compare(java.lang.Number o1, java.lang.Number o2) {

    return 1;
}
} 
```

# objective-c - 为什么 UIScrollView 中不显示图像？

> ID：12001949
> 
> 赞同：0
> 
> 时间：2012-08-17T07:58:11.530
> 
> 标签：objective-c, ios

我正在使用此代码显示滚动图像，但我只得到一个白屏。我拖放uiscrollview，创建iboutlet，合成它，其余代码在这里

```
@synthesize scrollView1;

const CGFloat kScrollObjHeight  = 199.0;
const CGFloat kScrollObjWidth   = 280.0;
const NSUInteger kNumImages     = 5;

- (void)layoutScrollImages
{
    UIImageView *view = nil;
    NSArray *subviews = [scrollView1 subviews];

    // reposition all image subviews in a horizontal serial fashion
    CGFloat curXLoc = 0;
    for (view in subviews)
    {
        if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
        {
            CGRect frame = view.frame;
            frame.origin = CGPointMake(curXLoc, 0);
            view.frame = frame;

            curXLoc += (kScrollObjWidth);
        }
    }

    // set the content size so it can be scrollable
    [scrollView1 setContentSize:CGSizeMake((kNumImages * kScrollObjWidth), [scrollView1 bounds].size.height)];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    scrollView1 = [[UIScrollView alloc]init];

    bgArray = [NSArray arrayWithObjects:@"Bg", @"Bg1.png", @"Bg2.png", @"Bg3.png", @"Bg4.png", @"Bg5.png", @"Bg6.png", @"Bg7.png", @"Bg8.png", nil];

    [scrollView1 setBackgroundColor:[UIColor blackColor]];
    [scrollView1 setCanCancelContentTouches:NO];
    scrollView1.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    scrollView1.clipsToBounds = YES;        // default is NO, we want to restrict drawing within our scrollview
    scrollView1.scrollEnabled = YES;

    // pagingEnabled property default is NO, if set the scroller will stop or snap at each photo
    // if you want free-flowing scroll, don't set this property.
    scrollView1.pagingEnabled = YES;

    // load all the images from our bundle and add them to the scroll view
    NSUInteger i;
    for (i = 0; i < [bgArray count]; i++)
    {
        NSString *imageName = [NSString stringWithFormat:@"%@", [bgArray objectAtIndex:i]];
        UIImage *image = [UIImage imageNamed:imageName];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

        // setup each frame to a default height and width, it will be properly placed when we call "updateScrollList"
        CGRect rect = imageView.frame;
        rect.size.height = 199.0;
        rect.size.width = 280.0;
        imageView.frame = rect;
        imageView.tag = i;  // tag our images for later use when we place them in serial fashion
        [scrollView1 addSubview:imageView];
        [scrollView1 setShowsHorizontalScrollIndicator:NO];
        [scrollView1 setShowsVerticalScrollIndicator:NO];
    }

    [self layoutScrollImages];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:15:04.647

我想如果你是`UIScrollView`从代码创建的

```
scrollView1 = [[UIScrollView alloc]init]; 
```

然后请在视图中添加 scrollView1 示例：-`[self.view addSubview:scrollView1];`

如果您是从 nib 创建 UIScrollView 则不要使用此代码

```
scrollView1 = [[UIScrollView alloc]init]; 
```

解决你的问题

# javascript - Javascript 和正则表达式：拆分字符串并保留分隔符

> ID：12001953
> 
> 赞同：178
> 
> 时间：2012-08-17T07:58:14.867
> 
> 标签：javascript, regex

我有一个字符串：

```
var string = "aaaaaa<br />&dagger; bbbb<br />&Dagger; cccc" 
```

我想用分隔符`<br />`后跟一个特殊字符来分割这个字符串。

为此，我正在使用这个：

```
string.split(/<br \/>&#?[a-zA-Z0-9]+;/g); 
```

我得到了我需要的东西，除了我丢失了分隔符。这是示例：http: [//jsfiddle.net/JwrZ6/1/](http://jsfiddle.net/JwrZ6/1/)

如何保留分隔符？

* * *

## 回答 #1

> 赞同：229
> 
> 时间：2014-08-09T18:00:50.970

我遇到了类似但略有不同的问题。无论如何，这里是三个不同场景的示例，用于保留分隔符的位置。

```
"1、2、3".split("、") == ["1", "2", "3"]
"1、2、3".split(/(、)/g) == ["1", "、", "2", "、", "3"]
"1、2、3".split(/(?=、)/g) == ["1", "、2", "、3"]
"1、2、3".split(/(?!、)/g) == ["1、", "2、", "3"]
"1、2、3".split(/(.*?、)/g) == ["", "1、", "", "2、", "3"] 
```

**警告：**第四个只能拆分单个字符。[ConnorsFan](https://stackoverflow.com/users/1009922/connorsfan)提出[了另一种选择](https://stackoverflow.com/a/36465144/552067)：

```
// Split a path, but keep the slashes that follow directories
var str = 'Animation/rawr/javascript.js';
var tokens = str.match(/[^\/]+\/?|\//g); 
```

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2012-08-17T08:01:56.487

使用[（正）前瞻](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Assertions#Other_assertions)，以便正则表达式断言特殊字符存在，但实际上并不匹配它：

```
string.split(/<br \/>(?=&#?[a-zA-Z0-9]+;)/g); 
```

看看它的实际效果：

```
var string = "aaaaaa<br />&dagger; bbbb<br />&Dagger; cccc";
console.log(string.split(/<br \/>(?=&#?[a-zA-Z0-9]+;)/g));
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2012-08-17T08:09:48.090

如果将分隔符包装在括号中，它将成为返回数组的一部分。

```
string.split(/(<br \/>&#?[a-zA-Z0-9]+);/g);
// returns ["aaaaaa", "<br />&dagger;", "bbbb", "<br />&Dagger;", "cccc"] 
```

根据您要保留的部分更改您匹配的子组

```
string.split(/(<br \/>)&#?[a-zA-Z0-9]+;/g);
// returns ["aaaaaa", "<br />", "bbbb", "<br />", "cccc"] 
```

您可以通过忽略字母 string.split(/()&#?[a-z0-9]+;/gi); 的大小写来改进表达式

您可以匹配这样的预定义组：`\d`equals`[0-9]`和`\w`equals `[a-zA-Z0-9_]`。这意味着你的表情可能看起来像这样。

```
string.split(/<br \/>(&#?[a-z\d]+;)/gi); 
```

JavaScriptKit 上有一个很好的[正则表达式参考](http://www.javascriptkit.com/jsref/regexp.shtml)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-10-21T06:43:06.540

在这里也回答了 [JavaScript 拆分正则表达式保留分隔符](https://stackoverflow.com/questions/11230178/javascript-split-regular-expression-keep-the-delimiter/33252569#33252569)

在正则表达式示例中使用 (?=pattern) 前瞻模式

```
var string = '500x500-11*90~1+1';
string = string.replace(/(?=[$-/:-?{-~!"^_`\[\]])/gi, ",");
string = string.split(","); 
```

这将为您提供以下结果。

```
[ '500x500', '-11', '*90', '~1', '+1' ] 
```

也可以直接拆分

```
string = string.split(/(?=[$-/:-?{-~!"^_`\[\]])/gi); 
```

给出相同的结果

```
[ '500x500', '-11', '*90', '~1', '+1' ] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-08-02T15:25:24.510

我对jichi的答案进行了修改，并将其放入一个也支持多个字母的函数中。

```
String.prototype.splitAndKeep = function(separator, method='seperate'){
    var str = this;
    if(method == 'seperate'){
        str = str.split(new RegExp(`(${separator})`, 'g'));
    }else if(method == 'infront'){
        str = str.split(new RegExp(`(?=${separator})`, 'g'));
    }else if(method == 'behind'){
        str = str.split(new RegExp(`(.*?${separator})`, 'g'));
        str = str.filter(function(el){return el !== "";});
    }
    return str;
}; 
```

jichi 的回答第 3 种方法在这个函数中不起作用，所以我采用第 4 种方法，并删除了空格以获得相同的结果。

编辑：第二种方法，除了一个数组来拆分 char1 或 char2

```
String.prototype.splitAndKeep = function(separator, method='seperate'){
    var str = this;
    function splitAndKeep(str, separator, method='seperate'){
        if(method == 'seperate'){
            str = str.split(new RegExp(`(${separator})`, 'g'));
        }else if(method == 'infront'){
            str = str.split(new RegExp(`(?=${separator})`, 'g'));
        }else if(method == 'behind'){
            str = str.split(new RegExp(`(.*?${separator})`, 'g'));
            str = str.filter(function(el){return el !== "";});
        }
        return str;
    }
    if(Array.isArray(separator)){
        var parts = splitAndKeep(str, separator[0], method);
        for(var i = 1; i < separator.length; i++){
            var partsTemp = parts;
            parts = [];
            for(var p = 0; p < partsTemp.length; p++){
                parts = parts.concat(splitAndKeep(partsTemp[p], separator[i], method));
            }
        }
        return parts;
    }else{
        return splitAndKeep(str, separator, method);
    }
}; 
```

用法：

```
str = "first1-second2-third3-last";

str.splitAndKeep(["1", "2", "3"]) == ["first", "1", "-second", "2", "-third", "3", "-last"];

str.splitAndKeep("-") == ["first1", "-", "second2", "-", "third3", "-", "last"]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-02T23:47:52.620

扩展函数用子字符串或正则表达式拆分字符串，并根据第二个参数将分隔符放在前面或后面。

```
 String.prototype.splitKeep = function (splitter, ahead) {
        var self = this;
        var result = [];
        if (splitter != '') {
            var matches = [];
            // Getting mached value and its index
            var replaceName = splitter instanceof RegExp ? "replace" : "replaceAll";
            var r = self[replaceName](splitter, function (m, i, e) {
                matches.push({ value: m, index: i });
                return getSubst(m);
            });
            // Finds split substrings
            var lastIndex = 0;
            for (var i = 0; i < matches.length; i++) {
                var m = matches[i];
                var nextIndex = ahead == true ? m.index : m.index + m.value.length;
                if (nextIndex != lastIndex) {
                    var part = self.substring(lastIndex, nextIndex);
                    result.push(part);
                    lastIndex = nextIndex;
                }
            };
            if (lastIndex < self.length) {
                var part = self.substring(lastIndex, self.length);
                result.push(part);
            };
            // Substitution of matched string
            function getSubst(value) {
                var substChar = value[0] == '0' ? '1' : '0';
                var subst = '';
                for (var i = 0; i < value.length; i++) {
                    subst += substChar;
                }
                return subst;
            };
        }
        else {
            result.add(self);
        };
        return result;
    }; 
```

考试：

```
 test('splitKeep', function () {
        // String
        deepEqual("1231451".splitKeep('1'), ["1", "231", "451"]);
        deepEqual("123145".splitKeep('1', true), ["123", "145"]);
        deepEqual("1231451".splitKeep('1', true), ["123", "145", "1"]);
        deepEqual("hello man how are you!".splitKeep(' '), ["hello ", "man ", "how ", "are ", "you!"]);
        deepEqual("hello man how are you!".splitKeep(' ', true), ["hello", " man", " how", " are", " you!"]);
        // Regex
        deepEqual("mhellommhellommmhello".splitKeep(/m+/g), ["m", "hellomm", "hellommm", "hello"]);
        deepEqual("mhellommhellommmhello".splitKeep(/m+/g, true), ["mhello", "mmhello", "mmmhello"]);
    }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-02T05:32:13.187

我一直在使用这个：

```
String.prototype.splitBy = function (delimiter) {
  var 
    delimiterPATTERN = '(' + delimiter + ')', 
    delimiterRE = new RegExp(delimiterPATTERN, 'g');

  return this.split(delimiterRE).reduce((chunks, item) => {
    if (item.match(delimiterRE)){
      chunks.push(item)
    } else {
      chunks[chunks.length - 1] += item
    };
    return chunks
  }, [])
} 
```

除了你不应该弄乱`String.prototype`，所以这是一个函数版本：

```
var splitBy = function (text, delimiter) {
  var 
    delimiterPATTERN = '(' + delimiter + ')', 
    delimiterRE = new RegExp(delimiterPATTERN, 'g');

  return text.split(delimiterRE).reduce(function(chunks, item){
    if (item.match(delimiterRE)){
      chunks.push(item)
    } else {
      chunks[chunks.length - 1] += item
    };
    return chunks
  }, [])
} 
```

所以你可以这样做：

```
var haystack = "aaaaaa<br />&dagger; bbbb<br />&Dagger; cccc"
var needle =  '<br \/>&#?[a-zA-Z0-9]+;';
var result = splitBy(haystack , needle)
console.log( JSON.stringify( result, null, 2) ) 
```

你最终会得到：

```
[
  "<br />&dagger; bbbb",
  "<br />&Dagger; cccc"
] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-28T05:34:42.970

如果您对拆分模式进行分组，则其匹配项将保留在输出中，这是设计使然：

> 如果separator是带捕获括号的正则表达式，那么每次separator匹配时，捕获括号的结果（包括任何未定义的结果）都会拼接到输出数组中。
> 
> [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split#description](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split#description)

除非您的搜索模式使用一个，否则您不需要前瞻或全局标志。

```
const str = `How much wood would a woodchuck chuck, if a woodchuck could chuck wood?`

const result = str.split(/(\s+)/);
console.log(result);

// We can verify the result
const isSame = result.join('') === str;
console.log({ isSame });
```

您可以使用多个组。您可以随心所欲地发挥创意，组之外的内容将被删除：

```
const str = `How much wood would a woodchuck chuck, if a woodchuck could chuck wood?`

const result = str.split(/(\s+)(\w{1,2})\w+/);
console.log(result, result.join(''));
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-17T21:11:53.690

大多数现有答案早于 2018 年在 JavaScript 中引入后[向断言](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Assertions#other_assertions)。您没有指定如何将分隔符包含在结果中。一个典型的用例是用标点符号 ([.?!]) 分隔的句子，人们希望在结果字符串的末尾包含分隔符。这对应于接受的答案中的第四种情况，但正如那里指出的那样，该解决方案仅适用于单个字符。带有附加在末尾的定界符的任意字符串可以通过后向断言形成：

```
'It is. Is it? It is!'.split(/(?<=[.?!])/)
/* [ 'It is.', ' Is it?', ' It is!' ] */ 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-03-15T16:19:44.010

我也想出了这个解决方案。不需要正则表达式，非常易读。

```
const str = "hello world what a great day today balbla"
const separatorIndex = str.indexOf("great")
const parsedString = str.slice(separatorIndex)

console.log(parsedString)
```

或在一行中：

```
const str = "hello what a great day today balbla"
const parsedString = str.indexOf(str.indexOf("great"))
console.log(parsedString)
```

# asp.net - 网页浏览器无法显示css外观

> ID：12001954
> 
> 赞同：-1
> 
> 时间：2012-08-17T07:58:16.617
> 
> 标签：asp.net, css

我在我的网站的代码后面附加了 css 文件。我可以在我的网页上显示 css 样式 Visual Studio 设计时间，但是当我运行 web 项目时 css 样式无法显示。我使用 expoleer 8 和 firefox 13.0。我也可以显示 css 样式我的其他网站项目。我忘记了这个网站是什么？谢谢。

```
<link rel="Stylesheet" href="Themes/default.css" type="text/css"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:35:49.250

.net 中有一个方便的助手，可以解决您可能遇到的任何路径问题：

```
<link href="<%=Url.Content("~/Themes/default.css") %>" rel="stylesheet" 
  type="text/css" /> 
```

如果您不确定它是否有效，请将您的 css 文件替换为非常简单的内容：

```
body { background-color: Aqua; } 
```

这将有助于检查问题是否是：

*   未引用样式表

或者

*   引用了样式表，但可能无效/没有按照您的预期进行

# javascript - 如何在jQuery中为平行四边形设置动画

> ID：12001955
> 
> 赞同：3
> 
> 时间：2012-08-17T07:58:33.717
> 
> 标签：javascript, jquery, html, trigonometry, parallax

我在正确的方向上滚动平行四边形时遇到麻烦，因为我不擅长三角学。

我有一个`DIV`带有 css 属性的：`-webkit-transform: rotate(20deg);`

所以它被旋转成**20**度。

现在在鼠标滚轮上，我想将其从 Bottom-Left 滚动到 Top-Right Direction 。

对于那个我使用鼠标滚轮：

```
$(window).mousewheel(function(event, delta, deltaX, deltaY){
   if(delta == -1) //Scrolling Down

   else //Scrolling Up
}) 
```

但我不知道如何计算它的 Right 和 Top Attributes to Increment Like ：

```
$(".img_prlx").stop(true,true).animate({'left': '+='+x+'px', 'top': '-='+y+'px'}, 2); 
```

到目前为止，我已经尝试过这个公式，但它对我没有帮助：

```
var dist = 20;
var angle = 20;
var x = Math.cos(angle*Math.PI/180) * dist;
var y = Math.sin(angle*Math.PI/180) * dist; 
```

所以我的**目标**是从这个网站实现效果：http: [//www.nike.com/jumpman23/aj2012/](http://www.nike.com/jumpman23/aj2012/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:35:37.103

您可以使内容在滚动时移动到您想要的任何位置，而无需旋转容器，只需将元素从左侧移动相同的量，就像它们在滚动时向上移动一样。

在这里做了一些效果的快速示例：http: [//jsfiddle.net/T46XJ/](http://jsfiddle.net/T46XJ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T08:42:43.443

使用您现有的代码和您提供的插件，这是您可以用来实现对角滚动的一种方法。

[http://jsfiddle.net/kFZ4T/7/](http://jsfiddle.net/kFZ4T/7/)

```
var angle = 45;   // Set the angle

$(window).mousewheel(function(event, delta, deltaX, deltaY){

    var x = Math.cos(angle*Math.PI/180) * delta;
    var y = Math.sin(angle*Math.PI/180) * delta;

    // Downward scroll = left,  Upward scroll = right
    $(".img_prlx").stop(true,true).animate({'left': '+='+x+'px', 'top': '-='+y+'px'}, 2);
}); 
```

只需更改最后一行即可更改方向。例如，更改`left`为`right`将反转方向，以便向上滚动向左移动，向下滚动向右。

```
 $(".img_prlx").stop(true,true).animate({'right': '+='+x+'px', 'top': '-='+y+'px'}, 2); 
```

​</p>

# ruby-on-rails - 我想在 Rails 的选定页面中显示菜单标题布局？

> ID：12001957
> 
> 赞同：0
> 
> 时间：2012-08-17T07:58:59.327
> 
> 标签：ruby-on-rails, layout, menu

我在我正在使用**的布局文件夹中创建了一个 menu.html.erb 页面**

```
<body>
<%=render 'layouts/menus'%>
<%= yield %>
<%=render 'layouts/footers'%>
</body> 
```

在 application.html.rb 我的问题是**这个菜单和页脚适用于**我不想要的所有页面。

我**想要一些没有这些菜单和页脚的页面**

请问有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:28:58.520

这只是另一种聪明的方法。

您可以在控制器顶部放置一个 before_filter ：

```
before_filter :have_sidebar except: [:show, :index]
#                                      ^ This is an example, but choose whatever views you do not want it to appear in.

 # Add this to your controller methods.
def have_sidebar
  @have_sidebar = true
end 
```

然后在你的 application.html.erb 中，写下：

```
<body>
<%=render 'layouts/menus' if @have_sidebar %>
<%= yield %>
<%=render 'layouts/footers' if @have_sidebar %>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:07:51.297

如果您希望那些没有菜单/页脚的页面使用应用程序布局，那么您可以执行以下操作：

```
<body>
<%=render 'layouts/menus' if @show_menu %>
<%= yield %>
<%=render 'layouts/footers' if @show_footer%>
</body> 
```

其中@show_menu 和@show_footer 可以在别处定义。

或者，如果您不想使用应用程序布局，您可以更改它，例如：

```
render :view, :layout => "another layout"
render :view, :layout => false # don't use any layout 
```

# asp.net - 如何嵌入和共享 MP3 文件？

> ID：12001958
> 
> 赞同：1
> 
> 时间：2012-08-17T07:58:59.783
> 
> 标签：asp.net, html, mp3, embed

我有一个自己的网站，并且在我的网站上放了一个电台采访（MP3 文件）。在我的网站上有一个工具可以获取 MP3 文件并播放它。

我的文件网址是“http://www.abc.com/invterview/July 9 interview.MP3”

现在，另一个网站想要播放相同的文件并要求我提供嵌入/共享链接。

有人可以帮我完成这个链接吗？

我用谷歌搜索并找到了这个网页[http://www.labnol.org/internet/design/html-embed-mp3-songs-podcasts-music-in-blogs-websites/2232/](http://www.labnol.org/internet/design/html-embed-mp3-songs-podcasts-music-in-blogs-websites/2232/)，它解释了如何完成嵌入，但是我从来没有这样做过，我知道 Chrome、IE、FF、Safari 有它自己的说明......

那么有人可以指导我如何完成一个 EMBED URL，以便它适用于所有浏览器吗？需要用还是常用的有什么用？？？？？？

如果是视频文件，我可以将其上传到 Youtube 并发送该链接，但这是一个 MP3 文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:10:18.737

您可以使用 HTML5，它具有播放音频的本机支持。

```
<audio controls="controls" height="100" width="100">
  <source src="song.mp3" type="audio/mp3" />
  <source src="song.ogg" type="audio/ogg" />
<embed height="100" width="100" src="song.mp3" />
</audio> 
```

如果浏览器不支持 HTML5，上面的代码将回退到嵌入代码。

除此之外，您可以使用雅虎媒体播放器。它不是最酷或最好的，但它很简单并且可以完成工作。

```
<a href="song.mp3">Play Song</a>

<script type="text/javascript" src="http://mediaplayer.yahoo.com/js">
</script> 
```

# zsh - 只需在 zsh 的选项卡完成中扩展第一个匹配文件名

> ID：12001962
> 
> 赞同：2
> 
> 时间：2012-08-17T07:59:13.070
> 
> 标签：zsh

一共有三个文件a.pdf,b.pdf,c.pdf，我想用zsh作为

```
xpdf *.pdf<tab>
# zsh will expand like
xpdf a.pdf b.pdf c.pdf
# I wish
xpdf a.pdf
b.pdf c.pdf   #<-- more other option could be select 
```

1.  我希望 <tab> 可以显示一个菜单让我选择其中一个文件。
2.  如何将“a.pdf b.pdf c.pdf”展开为“*.pdf”，任何热键？

如果不是**xpdf**，仅用于**ls -l**，如何让我在**ls -l *.pdf中选择一个pdf文件**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:47:46.287

如果您已经`zsh-completions`安装，这应该已经可以开箱即用了。ZSH 有一些智能补全例程，它们知道哪些类型的文件扩展名应该是某些程序的制表符补全候选。

您当然可以使用 自定义这些`zshcompctl`，但是您提供的`xpdf`使用示例应该已经为您设置好了。在没有安装默认补全的环境中，手动规则是这样的：

```
compctl -g "*.pdf" xpdf 
```

配置文件中的那一行将`.zshrc`为 pdf 文件添加一个新的完成模式到 xpdf 命令。

# sql - GROUP BY 结合 XML

> ID：12001966
> 
> 赞同：0
> 
> 时间：2012-08-17T08:00:00.970
> 
> 标签：sql, sql-server-2008

我有一个类似这样的表（当然，这只是示例内容）：

```
ID           xml          some_other_value      even_more_values           ....
-------------------------------------------------------------------------------
GUID1        <A />                      1   
GUID1        <A />                                            2
GUID1        <A />                      1                   
GUID2        <B />                      3                     4 
```

当应该分组的字段之一包含 xml 内容时，是否可以按 ID 分组？这些行中可能存在重复项，或者列值可以为空，但当然它们从不包含相同 ID 的不同值。

我希望表格看起来像这样：

```
ID           xml          some_other_value      even_more_values            ....
--------------------------------------------------------------------------------
GUID1        <A />                      1                     2
GUID2        <B />                      3                     4 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:05:59.357

您可以使用`row_number() over()`.

```
select *
from (
       select *,
              row_number() over(partition by ID order by (select 0)) as rn
       from YourTable 

     ) T
where T.rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:06:05.673

您可以将 xml 转换为 varchar 并按其分组

```
 group by convert(varchar(max),xml) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:29:23.740

你可以试试这样。将xml转换为varchar

```
select distinct t.id,t.xml,t1.first t1,t2.second t2
from test t
inner join test t1 on t1.id=t.id and t1.first is not null
inner join test t2 on t2.id=t.id and t2.second is not null; 
```

[小提琴](http://sqlfiddle.com/#!3/69377/4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T08:45:23.013

也许是这样的：

```
select * 
from
    (select 
      id
      ,max(isnull(someothervalue,0)) as someothervalue
      ....
    from table
    group by id) si
cross apply (select top 1 xml from table where id = si.id) xmli(xml) 
```

# android - 如何将作为 ListView 的 FooterView 的视图的可见性设置为“GONE”

> ID：12001968
> 
> 赞同：2
> 
> 时间：2012-08-17T08:00:05.260
> 
> 标签：android, listview

我在 a 中添加了`FooterView`一个`ListView`，但是当我将视图的可见性设置为 时`GONE`，只是隐藏了视图的内容。我的意思是它在 中留下空间`ListView`，就像`INVISIBLE`. 我怎样才能将其设置`FooterView`为`GONE`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:31:20.913

您可以像这样删除页脚：

```
listView.removeFooterView(view); 
```

# android - 列表视图中的自定义列表滚动行为 - Android

> ID：12001971
> 
> 赞同：2
> 
> 时间：2012-08-17T08:00:18.203
> 
> 标签：android, android-layout, android-listview, android-custom-view, android-scrollview

我正在尝试做类似于 PlayStore 应用程序的事情。在应用详细信息页面上，您可以看到具有水平滚动的滚动视图 - “应用屏幕图像”以及下方的一些详细信息，例如描述、评论等...

![示例图像屏幕截图](../Images/19f6725c77a77c12e21e7f9206bf991f.png)

**我的问题是**：在 PlayStore 应用程序中，当您水平滚动*图像屏幕截图*时，垂直滚动被锁定并且整个视图不滚动。*只有当您触摸并滚动屏幕截图*下方的某些位置时，您才能滚动查看其他详细信息。

这是我卡住的地方，是否可以对 listView 做同样的事情？我有一个带有自定义标题视图的列表视图，它检测水平滚动手势（从右到左，反之亦然）。那时，当用户触摸标题时，我不希望整个视图在有更多项目时像普通的列表视图一样滚动。有人可以指导我解决这个问题吗？查看您设备中的 PlayStore 应用程序以获得清晰的理解。

提前感谢一堆。总有一天我会欠你一杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:39:34.580

当有一个特殊的控件时，为什么要自己检测手势并实现水平滚动：`HorizontalScrollView`哪个已经这样做了？

我不知道 Google Play 应用程序的内部细节，但我会将屏幕截图库放在一个自定义视图中，并且这个自定义视图被包裹在一个`HorizontalScrollView`. 然后将此自定义视图作为标题添加到`ListView`（基本上是您如何开始）。

只要滚动方向在不同的轴上 - 水平滚动在 X 轴上完成，垂直滚动在 Y 轴上完成 - 持有它应该没有任何问题。

**Post Scriptum：**
当您在 Google Play 应用程序中水平滚动图像屏幕截图时，我想有一个`GalleryView`而不是 Horizo​​ntalScrollView，它可以容纳这种类型的过渡。

# c# - 使用另一个用户凭据从远程路径获取文件到 FileStream

> ID：12001972
> 
> 赞同：6
> 
> 时间：2012-08-17T08:00:18.627
> 
> 标签：c#, filestream, credentials

在我的应用程序中，我`FileStream`用来读取文件，该文件位于网络中某处的文件共享上。所以我的`remoteFilePath`变量是这样的：`\\computername\folder\file.pdf`

```
FileStream fileStream = new FileStream(remoteFilePath, FileMode.Open, FileAccess.Read, FileShare.None, 1024 * 1024) 
```

不幸的是，我运行这个应用程序的用户（我登录到 PC 的用户）没有访问这个文件共享的权限。我有另一个用户（域、登录名和密码）可以访问这些文件。

是否可以使用其他用户凭据将文件获取到文件流？我可以冒充用户**仅**获取文件，然后继续使用我自己的用户吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T08:22:39.857

谢谢您的回答。由于该共享位于另一个域中，因此冒充并不容易。

我找到了另一个更简单的解决方案。我映射了一个网络驱动器，并检查了选项`Connect using different credentials`。然后我连接到这个驱动器而不是远程路径。

```
string mappedFilePath = filePath.Replace(@"\\computername\", @"Y:\") 
```

并在构造函数中使用这个新字符串`FileStream`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:04:39.460

您应该使用模拟。更多信息请访问[http://msdn.microsoft.com/en-us/library/w070t6ka.aspx](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)

# .net - 根据不同的列值禁用DataGrid中的按钮

> ID：12001974
> 
> 赞同：0
> 
> 时间：2012-08-17T08:00:22.233
> 
> 标签：.net, wpf, xaml, datagrid, triggers

我有以下代码：

```
 <DataGridTextColumn IsReadOnly="True" Header="StringLock" Binding="{Binding StringLock}">
                <DataGridTextColumn.ElementStyle>
                    <Style TargetType="{x:Type TextBlock}">
                        <Style.Triggers>
                            <Trigger Property="Text" Value="False">
                                <Setter Property="Background" Value="LightGray"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGridTextColumn.ElementStyle>
            </DataGridTextColumn>
            <DataGridTemplateColumn Header="CanPressButton">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button>Lock module string</Button>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

如果 StringLock 列的背景属性的颜色为 LightGray，则它包含的 Text 的值为 False。

如果 StringLock 列中 Text 的值为 False，我想禁用 CanPressButton 列中的按钮。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T08:09:22.537

您可以使用完整的`DataContext`（即行项目）来触发：

```
<Button.Style>
     <Style TargetType="Button">
         <Style.Triggers>
             <DataTrigger Binding="{Binding StringLock}" Value="False">
                 <Setter Property="IsEnabled" Value="False"/>
             </DataTrigger>
         </Style.Triggers>
     </Style>
</Button.Style> 
```

# wso2 - wso2 carbon studio - 注册表扩展文件编辑器

> ID：12001976
> 
> 赞同：0
> 
> 时间：2012-08-17T08:00:41.783
> 
> 标签：wso2, wso2carbon, wso2developerstudio

我想在 WSO2 Governance Registry 中创建自定义工件。是否有编辑器可以在 WSO2 carbon studio 中创建 Governance Registry 扩展文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T12:33:20.460

是的。有关 DeveloperStudio 中可用的注册表工具，请参阅[[1]](http://wso2.org/project/developer-studio/2.0.1/docs/registry_category.html#RegistryFilter)。

谢谢

蒂利尼

# php - 原则 2 不坚持从拥有一方到多方的关系

> ID：12001979
> 
> 赞同：10
> 
> 时间：2012-08-17T08:01:02.227
> 
> 标签：php, symfony, doctrine-orm

我有这个代码

```
// ONE to many Bidir -- inverse side
    /**
     * @ORM\OneToMany(targetEntity="Item", mappedBy="Room", cascade={"persist"})
     **/
    protected $items; 
```

另一边

```
// ONE to many Bidir-- own side
    /**
     * @ORM\ManyToOne(targetEntity="Room", inversedBy="items")
     * @ORM\JoinColumn(name="room_id", referencedColumnName="id")
     **/
    protected $room; 
```

我的问题是我进入项目页面并选择了房间，然后我可以在房间页面中看到预先选择的项目

但是，如果我转到 Room 页面并尝试多选许多项目，那么这些项目不会被保留

编辑：我已经看到它只发生在 OneToMany 关系中。对于多对多，他们工作正常

编辑2：

我说的是我有表单和选择框的后端区域，我可以在其中选择多个项目。此表单/CRUD 代码/控制器由学说生成。所以我不需要添加任何额外的功能。无论如何，这是我的控制器代码

```
$editForm   = $this->createForm(new RoomType(), $entity);

        $request = $this->getRequest();

        $editForm->bindRequest($request);
        if ($editForm->isValid()) {
            $em->persist($entity);
            $em->flush(); 
```

当我尝试像这样在控制器中穿行时

```
foreach($entity->getItems() as $item)
        echo $item; 
```

然后我可以在那里看到所有你的项目。所以这意味着所有项目都在主要对象中，但它没有持久化它们。我不知道为什么。

如果有欠款，反面问题。我怎样才能将关系从由于反向和反向转换为拥有

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T09:21:10.400

根据您在注释中的注释，您的代码是错误的。

这是**拥有方**，因为您指定了`inversedBy`属性：

```
/**
 * ONE to many Bidir-- Inverse side
 * @ORM\ManyToOne(targetEntity="Room", inversedBy="items")
 * @ORM\JoinColumn(name="room_id", referencedColumnName="id")
 **/
protected $room; 
```

这是**反面**（因为它具有`mappedBy`属性）：

```
/**
 * ONE to many Bidir -- owning side
 * @ORM\OneToMany(targetEntity="Item", mappedBy="Room", cascade={"persist"})
 **/
protected $items; 
```

所以你的代码说：`Item`是拥有方，`Room`是反方。

> 双向关系的**拥有方必须通过****使用**OneToOne、ManyToOne 或 ManyToMany 映射声明的 inversedBy 属性来引用**其**相反方。inversedBy 属性指定实体中作为关系反面的字段。

为了让它更干净：

> 拥有方必须使用 OneToOne、ManyToOne 或 ManyToMany 映射声明的 inversedBy 属性。inversedBy 属性包含反面关联字段的名称。

而对于反面：

> 双向关系的**反面必须通过****使用**OneToOne、OneToMany 或 ManyToMany 映射声明的**mappedBy 属性**来引用其拥有方。mappedBy 属性指定实体中作为关系所有者的字段。

然后再次：

> 反面必须使用 OneToOne、OneToMany 或 ManyToMany 映射声明的 mappedBy 属性。mappedBy 属性包含拥有方的关联字段的名称。

另外，另一个重要的考虑因素：

> ManyToOne 始终是双向关联的拥有方。
> 
> OneToMany 始终是双向关联的反面

因此，对于从反面（房间）保留项目，您必须检查已选择/取消选择的项目以及房间是否已包含该项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T12:59:34.010

只需使用循环来设置空间。项目是欠面，您正在编辑反面（房间）。Symfony2 在编辑逆时从不更新欠边。

最简单的解决方案是在持久化房间之前使用循环：

```
foreach($entity->getItems() as $item){
    $item->setRoom($room);
} 
```

并在反面级联：

```
/**
 * @ORM\OneToMany(targetEntity="Item", mappedBy="Room", cascade={"persist"})
 **/
protected $items; 
```

对于我的项目，我基于收集事件侦听器制作了可重用的解决方案。如果您有时间和技能，我鼓励您也这样做

# android - 播放 AMR 文件格式

> ID：12001982
> 
> 赞同：0
> 
> 时间：2012-08-17T08:01:25.957
> 
> 标签：android, android-ndk, amr

当我尝试使用 AMR 文件格式播放曲目时。它会发出警告

权限失败：android.permission.ALLOW_ANY_CODEC_FOR_PLAYBACK

和来自 libOpenSLES 的错误

AudioSfDecoder::onPrepare: 找不到支持的音轨。

我尝试在清单文件中设置权限。

```
 <!-- Allows an application to use any media decoder when decoding for playback
         @hide -->
    <permission android:name="android.permission.ALLOW_ANY_CODEC_FOR_PLAYBACK"
         android:protectionLevel="signatureOrSystem"
         android:label="@string/permlab_anyCodecForPlayback"
         android:description="@string/permdesc_anyCodecForPlayback" /> 
```

但仍然抛出同样的错误。

我是否正确设置了权限？谁能帮帮我，我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:25:45.663

许多设备上的 NDK 不支持 AMR。您可以使用外部 AMR 库。[使用 PCM 录音机/播放器并使用opencore-amr](http://sourceforge.net/projects/opencore-amr/)手动编码和解码。

这对我来说很好。

关于您的许可问题：

```
android.permission.ALLOW_ANY_CODEC_FOR_PLAYBACK 
```

没有官方许可，为什么在这里使用它？据我所知，Android 上没有与编解码器相关的权限。

重要的是只有[Record_Audio](http://developer.android.com/reference/android/Manifest.permission.html#RECORD_AUDIO)用于麦克风访问。

# c# - 创建一个列表来显示字典的内容？

> ID：12001991
> 
> 赞同：2
> 
> 时间：2012-08-17T08:02:01.320
> 
> 标签：c#, asp.net-mvc, razor

我有一本字典，我想在我的查看页面上显示为列表。目前我可以创建一个列表，但我无法设置动态大小或用我的字典填充它。我想做一些类似 foreach 的事情，或者是否有更快的列表功能？

我是 MVC 新手，抱歉代码很差。

```
@model Dictionary<string, string>   
@{
    ViewBag.Title = "Download";
}   
<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
    <h2>@ViewBag.Message</h2> 
    <br>  
    @{
        var filelist = @Model.ToList();
    }    
    <Div>
     <select name="Fileslist" size="5">
      <option>Count</option>
      <option>text2</option>
      <option>text3</option>
      <option>text4</option>
      <option>text5</option>
     </select>
    </Div>   
</hgroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T08:04:23.000

一个简单的字典列表将是

```
Dictionary<string, string> myDictionary = new Dictionary<string, string>();

// Add some values in dictionary

var res = myDictionary.Select(x => x.Key + "-" + x.Value).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:07:21.040

您可以[`@Html.DropDownListFor`](http://msdn.microsoft.com/en-us/library/ee703573.aspx)直接使用支持字典的那个。

请查看[此答案](https://stackoverflow.com/a/5388297/706456)以获取更多详细信息。

# ruby-on-rails - 使用 Mechanize/Nokogiri 提取文本运行

> ID：12001992
> 
> 赞同：0
> 
> 时间：2012-08-17T08:02:05.917
> 
> 标签：ruby-on-rails, ruby, nokogiri, mechanize

有没有一种合理的方法来提取 Mechanize-parsed HTML 文档中的每一个文本运行，以便（例如）：

```
<p>Here is <b>some</b> text<p> 
```

分为三个要素：

```
Here is
some
text 
```

? 我的直觉是，有一种使用递归 CSS 搜索和/或#flatten 的简单技术，但我还没有弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:57:46.747

借用“ [Nokogiri recursively get all children](https://stackoverflow.com/questions/10076190/nokogiri-recursively-get-all-children#10077772) ”中的答案：

```
result = []
doc.traverse { |node| result << node.text if node.text? } 
```

那应该给你数组`["Here is ", "some", " text"]`。

“[被 Nokogiri 抢劫](http://techiferous.com/2009/12/getting-mugged-by-nokogiri/)”讨论`traverse`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T13:58:24.843

由于您想要每个文本节点的内容，您可以这样做：

```
doc.search('//text()').map(&:text) 
```

唯一的缺点（和另一个答案）是你也得到了元素之间的所有空白。如果你想抑制这个，你可以这样做：

```
doc.search('//text()').map(&:text).delete_if{|x| x !~ /\w/} 
```

这将删除所有不包含单词字符的元素。

# android - ProgressDialog 未显示在 AsyncTask 中

> ID：12001995
> 
> 赞同：1
> 
> 时间：2012-08-17T08:02:15.650
> 
> 标签：android, database, android-asynctask, progressdialog

我在 SDCard 上有一个巨大的数据库 (40MB)。我需要`LIKE`在查询中获取数据，这非常慢。

数据库请求大约需要 5 秒。因此，我需要异步并使用`ProgressDialog`.

我试过了`AsyncTask`，但问题出在`ProgressDialog`.
它是这样实现的：

```
private class GetDataFromLangDB extends AsyncTask<String, String, String> {

    private final ProgressDialog dialog = new ProgressDialog(TranslAndActivity.this);

    @Override
    protected void onPreExecute() {
        super.onPreExecute();

         urDBCursor.close();
         curDBCursor = null;
         scaAdapter = null;

         this.dialog.setMessage("Loading data...");
         this.dialog.show();

    } 

    @Override
    protected String doInBackground(String... whatSearch) {
        String result = "";

        if (myDatabaseAdapter != null) {
            curDBCursor = myDatabaseAdapter.fetchAll(whatSearch[0]);
        }
        return result;
    }

    @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);

            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
            }

            prepareListView();
    }
} 
```

问题是`ProgressDialog`在数据库请求期间未显示。完成数据库查询后，它会在屏幕上短暂闪烁。当用户在数据库请求期间尝试点击屏幕时，UI 被冻结，并且在数据库请求消息后显示“未响应”。

我用这种方式尝试了一个线程：

```
public void startProgress(View view, final String aWhatSearch) {

        final ProgressDialog dialog = new ProgressDialog(MyActivity.this);
        if (curDBCursor != null){
            curDBCursor.close();
            curDBCursor = null;
        }

        dialog.setMessage("Loading data...");
        dialog.show();
        Runnable runnable = new Runnable() {
            public void run() {
                curDBCursor = myDatabaseAdapter.fetchAll(aWhatSearch);
                // dirty trick
                try {
                    Thread.sleep(250); // it must be here to show progress
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                handler.post(new Runnable() {
                    public void run() {
                        if (dialog.isShowing()) {
                            dialog.dismiss();
                        }
                        prepareListView();
                    }
                });

            }
        };
        new Thread(runnable).start();
    } 
```

结果是一样的，但是当我使用 `Thread.sleep(250)`; 的技巧时 `ProgressDialog`在数据库请求期间显示。但它没有旋转，在 DB 请求期间它看起来冻结了。

数据库的东西是这样调用的（点击搜索按钮后）：

```
btnSearchAll.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        // AsyncTask
        new GetDataFromLangDB().execute(edtTextToSearch.getText().toString());

        // or Thread 
        //startProgress(null, edtTextToSearch.getText().toString());
    }
}); 
```

我在 SO 中发现了很多这样的问题，但没有什么对我有用。难道DB在SD卡上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:14:31.560

我将对话框的定义放入 AsyncTask 类中，它对我来说很好。看看这个例子（你必须以你的 CLASS 的名称更改 NAMEOFCLASS：

```
private class doInBackground extends AsyncTask<Integer, Integer, Void> {

   final ProgressDialog dialog = new ProgressDialog(NAMEOFCLASS.this) {

    @Override
    protected void onPreExecute() {
        dialog.setCancelable(false);
        dialog.setTitle(getString(R.string.daten_wait_titel));
        dialog.setIcon(R.drawable.icon);
        dialog.setMessage(getString(R.string.dse_dialog_speichern));
        dialog.show();
    }

    @Override
    protected void onCancelled() {
        dialog.cancel();
    } 
```

……

```
 @Override
    protected void onProgressUpdate(Integer... values) {
                   // DO YOUR UPDATE HERE
    }

    @Override
    protected void onPostExecute(Void result) {
        dialog.dismiss();
                }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:35:16.003

像这样在类（活动）级别上声明你的对话框

```
private ProgressDialog dialog = null; 
```

显示进度对话框并在您想开始忙碌工作时调用**AsyncTask**类..如 onButton click 或任何

```
dialog = ProgressDialog.show(this,"Sending Email to your account please! wait...", true);
SendingEmailTask task = new SendingEmailTask();
String s = "";
task.execute(s); 
```

创建你的内部类

```
private class SendingEmailTask extends AsyncTask<String, Void, String> {

    protected String doInBackground(String... urls) {
         //do your work here..
         // like fetching the Data from DB or any
         return null;
       }

       @Override
       protected void onPostExecute(String str) {
           //hide progress dialog here
           dialog.dismiss();
       }
} 
```

让我知道这是否有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T09:27:46.330

也许这个[SO 答案](https://stackoverflow.com/questions/11604914/contentprovider-insert-always-runs-on-ui-thread)可以帮助你。它看起来像类似的问题。尝试使用[AsyncQueryHandler](http://developer.android.com/reference/android/content/AsyncQueryHandler.html)查询您的数据库