# StackOverflow 问答 000181000-000181999

# asp.net - 调试 VB 脚本代码的工具或 IDE

> ID：181003
> 
> 赞同：3
> 
> 时间：2008-10-08T00:56:57.947
> 
> 标签：asp.net, debugging, vbscript

我需要任何工具或 IDE 环境来调试和测试 vb 脚本代码。请推荐任何免费的。我的 vb 脚本是独立的（vbs 扩展）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T12:30:14.817

[VBS编辑](http://www.vbsedit.com/)

不是免费的，但有一个无限制的试用期和一个唠叨屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T01:04:45.027

遗憾的是不是免费的......[如何调试 Windows 脚本宿主、VBScript 和 JScript 文件](http://support.microsoft.com/kb/308364)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T13:25:35.377

我认为您将很难找到支持真正 VBS 调试的免费工具。但我过去曾使用过这种“穷人的技术”。在脚本开头创建一个变量

blnDebug=False

然后在整个脚本中添加行以回显脚本正在执行的操作或不同变量的值：

if blnDebug Then wscript.echo "现在开始脚本 strFoo=" & strFoo

当您设置 blnDebug=True 时，您的所有调试消息都将被写入控制台（运行时我总是使用 CScript）。通过在编写脚本时添加这些调试消息，您只需更改 bldDebug 值即可进行调试。

当然，像 PrimalScript 这样的商业编辑器包括一个调试器。SAPIEN 也有一个独立的调试器，[http://www.primalscope.com/](http://www.primalscope.com/)，虽然不是免费的，但它是一个相对便宜的选择。您可以下载 eval 副本进行试用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-04-14T09:37:46.037

有一个非常古老的工具，称为 Windows NT 4.0 及更高版本的脚本调试器。它是为在网页中运行的 VBScript 设计的，但您可以很容易地将其附加到 vbs 脚本中。

您可以从这里下载它：http: [//www.microsoft.com/downloads/details.aspx?FamilyID=2f465be0-94fd-4569-b3c4-dffdf19ccd99 &displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=2f465be0-94fd-4569-b3c4-dffdf19ccd99&displaylang=en)

名字说 NT 4.0 我知道，但我目前在 Windows 7 x64 上运行它，并且打开调试器没有问题。

只需安装上述工具，然后从命令行运行您的脚本，如：

wscript.exe myscript.vbs //d //x

调试器打开后，您可以单步执行代码，甚至可以打开一个命令窗口，您可以在其中通过键入来检查变量值？变量名。

# vxworks - 如何使用 vxWorks 调试代理执行内核前调试？

> ID：181011
> 
> 赞同：3
> 
> 时间：2008-10-08T01:01:24.100
> 
> 标签：vxworks

vxWorks 文档指出：

> WDB 代理本身独立于目标操作系统：它通过虚拟功能运行时接口附加到运行时操作系统服务。WDB 代理可以在 VxWorks 运行之前执行（如在将 BSP 移植到新板的早期阶段）。”

如何在 vxWorks 内核运行之前使用调试代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T01:18:17.077

首先，为了能够使用代理执行内核前调试，您**必须**有一个可用于调试的串行端口。该串行端口必须被初始化并正常工作，因为它将是调试通道。

您可以多早开始调试是有限制的。基于 WDB 的调试将在第一个硬件初始化函数运行 (sysHwInit) 之后和内核初始化正确之前 (kernelInit) 开始。

根据使用的 vxWorks 版本，有不同的方法可以达到此结果。

**基于 Workbench 的 vxWorks 构建**

在内核配置工具中，您必须选择以下组件：

*   WDB 串行连接
*   WDB系统调试
*   WDB 内核前系统初始化

根据您选择组件的顺序，您可能会收到来自工作台的投诉，因为某些组件是互斥的（您不能拥有带有预内核调试的 WDB END 驱动程序）。上面的顺序应该没问题。

**命令行构建**

编辑 config.h 文件，并选择以下选项：

```
#define WDB_INIT WDB_PRE_KERNEL_INIT
#define WDB_COMM_TYPE WDB_COMM_SERIAL
#define WDB_MODE WDB_MODE_SYSTEM

```

当使用这些选项编译 vxWorks 时，它将执行硬件初始化的第一阶段，然后挂起，等待主机上运行的调试代理连接到目标。

此时，您可以执行调试、单步等...

# c# - .NET // vs /// 注释约定

> ID：181015
> 
> 赞同：23
> 
> 时间：2008-10-08T01:02:12.600
> 
> 标签：c#, f#, comments

我只是在查看 F#，如果这是一个愚蠢的问题，我深表歉意，但在 VS2008 F# CTP 1.9.6.2 'Tutorial' 项目中， // 和 /// 都用于注释代码。

两个斜线与三个斜线注释之间是否存在功能差异，或者是惯例（如教程代码中所示）用 /// 注释函数并使用 // 其他所有内容？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-10-08T01:05:23.717

使用三个斜杠 (///) 是F# 也采用的[XML 文档注释的 C# 约定。](https://docs.microsoft.com/en-gb/dotnet/csharp/programming-guide/xmldoc/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-10-08T01:03:43.937

/// 用于文档注释。VS 在生成智能感知信息时会用到它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-08T02:54:10.407

它类似于Java中的`/* comment */`vs。`/** documented comment */`

后者的工作原理相同，但也被文档软件识别为开发人员文档 - 而不仅仅是注释。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-03T13:08:45.927

/// 或 C# 和 VB.Net 的 ''' 不仅仅是内部注释。如果在项目属性中打开**XML 文档文件**，则可以使用 Sandcastle 和 HTML 帮助生成四种不同的文档类型（文件和网站）。请参阅[https://github.com/EWSoftware/SHFB/wiki](https://github.com/EWSoftware/SHFB/wiki)和[微软文档](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/xmldoc/xml-documentation-comments)。此外，这可以添加到您的 CI 流程中。

# .net - 如何关闭无形的 C# 应用程序

> ID：181018
> 
> 赞同：0
> 
> 时间：2008-10-08T01:03:20.570
> 
> 标签：.net

我的申请没有表格。它通过调用 Application.Run();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T01:04:26.323

称呼

```
System.Windows.Forms.Application.Exit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T01:46:00.420

另一个选项是`Environment.Exit()`，但是如果您的应用程序确实依赖于 Application 类，`System.Windows.Forms.Application.Exit()`则它是更“正确”的处理方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T04:40:05.467

就像[Application.Run()](http://msdn.microsoft.com/en-us/library/ms157900.aspx)的 MSDN 文档建议的那样：

*   [应用程序.Exit()](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exit.aspx)
*   [应用程序.ExitThread()](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.exitthread.aspx)

*请注意，大多数 Windows 窗体开发人员不需要使用 Application.Run()。您确定需要在您的应用程序中发送消息吗？*

# sql-server - 在 Reporting Services 中向条形图添加趋势线

> ID：181027
> 
> 赞同：5
> 
> 时间：2008-10-08T01:07:25.083
> 
> 标签：sql-server, reporting-services, charts

如何在 Reporting Services 2005 中向条形图添加趋势线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-09T02:44:51.847

您必须从数据源中为趋势线创建数据。

从图表属性的数据选项卡上，选择趋势数据系列。单击编辑并在“编辑图表值”对话框中选择“外观”选项卡。选中“将数据绘制为线”框。使用“Series Stule”按钮设置线条属性。

# asp.net - 用 ASP.Net 和 JSON 格式实现 jQuery 的 jgGrid

> ID：181029
> 
> 赞同：10
> 
> 时间：2008-10-08T01:07:37.220
> 
> 标签：asp.net, jquery, ajax, jqgrid

有没有人能够实现 JQuery 网格插件 jqGrid？我正在尝试实现 JSON 分页，我觉得我已经接近了，但我也被无关紧要的细节所淹没。如果有人可以发布一些示例代码，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-11T10:45:51.750

在我尝试为我的项目执行此操作时找到了您的帖子。我让它工作了。对于将来需要它的任何人，jqGrid 将无法使用 JSON 和 ASP.NET 开箱即用。您需要对 grid.base.js 进行一些小修改。在第 829 行附近，将 json case 部分替换为以下内容：

```
case "json":
    gdata = JSON.stringify(gdata); //ASP.NET expects JSON as a string
    $.ajax({ url: ts.p.url, 
             type: ts.p.mtype, 
             dataType: "json", 
             contentType: "application/json; charset=utf-8", //required by ASP.NET
             data: gdata, 
             complete: function(JSON, st) { if (st == "success") { addJSONData(cleanUp(JSON.responseText), ts.grid.bDiv); if (loadComplete) { loadComplete(); } } }, 
             error: function(xhr, st, err) { if (loadError) { loadError(xhr, st, err); } endReq(); }, 
             beforeSend: function(xhr) { if (loadBeforeSend) { loadBeforeSend(xhr); } } });
    if (ts.p.loadonce || ts.p.treeGrid) { ts.p.datatype = "local"; }
    break; 
```

然后添加以下函数：

```
function cleanUp(responseText) {
    var myObject = JSON.parse(responseText);  //more secure than eval
    return myObject.d;  //ASP.NET special
} 
```

您还需要包含[JSON 解析器和 stringifier](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)。与 ASP.NET 一起使用时，此修改后的代码也[更安全](http://www.json.org/js.html)，因为 eval 语句已消失。

**编辑：**我还应该注意到您可能必须对 grid.celledit.js、grid.formedit.js、grid.inlinedit.js 和 grid.subgrid.js 进行类似的编辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T11:42:24.223

我刚刚使用 jTemplates 使用 jQuery 和 ASP.NET 进行客户端分页。我写了一篇关于它的博客文章，你可以在这里找到：[http ://www.aaron-powell.com/blog.aspx?id=1209](http://www.aaron-powell.com/blog.aspx?id=1209)

它着眼于如何创建模板化数据位置、从 ASP.NET 返回数据，然后实现分页解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-02T21:05:50.213

您可以使用 ASP.Net MVC JsonResult 来填充网格。

人员类

```
public class Person
{
    public int ID { get; set; }
    public string Name { get; set; }
    public DateTime Birthday { get; set; }

    public static IEnumerable<Person> GetABunchOfPeople()
    {
       // Get a bunch of People.
    }
} 
```

在您的控制器中，您将拥有：

```
public JsonResult GetABunchOfPeopleAsJson()
{
    var rows = (Person.GetABunchOfPeople()
        .Select(c => new
                         {
                             id = c.ID,
                             cell = new[]
                                        {
                                            c.ID.ToString(),
                                            c.Name,
                                            c.Birthday.ToShortDateString()
                                        }
                         })).ToArray();

    return new JsonResult
               {
                   Data = new
                              {
                                  page = 1,
                                  records = rows.Length,
                                  rows,
                                  total = 1
                              }
               };
} 
```

并且 url 的 jqGrid 配置将是：

```
url: '<%= ResolveUrl("~/Person/GetAllPeople") %>', 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T01:29:17.257

我只是挣扎着试图把所有东西都放在一起。我首先关心的是生成正确的 JSON 响应。我返回的类似乎被序列化为名为“d”的属性 - 这是 JQuery 的事情，还是 ASP.Net Web 方法约定？恐怕 jqGrid 会寻找顶级数据，而 asp.net 会将它放在一个名为“d”的属性中：

```
 [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public static object GetData() {
        TestClass tc = new TestClass() { One = "Hello", Two = "World" };
        return tc;
    }

        $("#divResults").click(function() {
            $.ajax({
                type: "POST",
                url: "GridData_bak.aspx/GetData",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(test) {
                    // Replace the div's content with the page method's return.
                    $("#divResults").text(test.d.One);
                },
                error: function(msg) {
                    $("#divResults").text(msg);
                }
            });
        }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T13:04:05.370

flexgrid 插件在文档上非常稀疏，但是在演示页面的一小部分中，有一个关于创建 json 序列化对象的 tut，这有点误导，因为网格需要特定格式，我已经为 xml 选项移植了 php 代码用一点猴子油脂，你可以对 json 格式做同样的事情

这是我的 xml 端口

```
the setup for the grid
 $("#tableToFlex").flexigrid({
                 url: 'WebService.asmx/getData'}
                   ... *other configs* ...); 
```

请考虑 webservice.asmx 类中的以下代码

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Xml)> _
Public Function getData(ByVal page As Integer, _
    ByVal qtype As String, _
    ByVal Query As String, _
    ByVal rp As Integer, _
    ByVal sortname As String, _
    ByVal sortorder As String) As System.Xml.XmlDocument
    'note these parameters are inputted to determine paging and constrains for the   resultant rows

    'Sample list to send to the grid
    Dim list = New List(Of ApplicationStateInformation)
    'Sample row object that holds name , surname , address, idnumber ...
    list.Add(New RowObjects( "test1", "test1", "test1", "12345"))
    list.Add(New RowObjects( "test2", "test2", "test2", "12345"))
    list.Add(New RowObjects( "test3", "test3", "test3", "12345"))
    list.Add(New RowObjects( "test4", "test4", "test4", "12345"))
    'retun a xml doc, as we are using the xml format on the flexgrid

    Dim returnDoc = New System.Xml.XmlDocument()
    returnDoc.Load(New IO.StringReader(ToXmlResult(list)))
    Return returnDoc
End Function

Private Function ToXmlResult(ByVal list As List(Of RowObjects)) As String
    'this is the xml document format the grid understands
    Dim result As String = "<?xml version=""1.0"" encoding=""utf-8""?>" & vbCrLf
    result += "<rows>" & vbCrLf
    result += String.Format("<page>{0}</page>" & vbCrLf, "1")
    result += String.Format("<total>{0}</total>" & vbCrLf, "10")
    For Each item In list
        result += ConvertRowData(item)
    Next
    result += "</rows>" & vbCrLf
    Return result
End Function

Private Function ConvertRowData(ByVal row As RowObjects) As String

    Dim result As String = String.Format("<row id='{0}'>" & vbCrLf, row.IdNumber.ToString)
    'THESE SHOULD BE HTML ENCODED (the format arg) but I left it out
    result += String.Format("<cell><![CDATA[{0}]]></cell>" & vbCrLf, row.Name)
    result += String.Format("<cell><![CDATA[{0}]]></cell>" & vbCrLf, row.Surname)
    result += String.Format("<cell><![CDATA[{0}]]></cell>" & vbCrLf, row.IdNumber)

    result += "</row>" & vbCrLf
    Return result
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T14:34:37.153

json 中的 d 是针对潜在漏洞的内置防御

我发现使用 mvc 的[示例](http://bartreyserhove.blogspot.com/2008/08/aspnet-mvc-and-jqgrid.html)

完整信息[在这里](http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T19:24:56.070

我认为您可以使 jqgrid 与 json 和 asp.net 一起使用，而无需修改 grid.base.js 和其他 jqgrid 文件，您必须使用 datatype 属性来定义您自己的自定义 ajax 调用并定义一个 json 阅读器，然后 jqgrid 将使用您的每次重新加载网格时自定义 ajax 调用和读取器。

这个过程与 xml 类似，您只需定义一个 xmlreader 而不是 jsonreader。

jsonreader的所有属性都在[在线文档中定义](http://www.secondpersonplural.ca/jqgriddocs/index.htm)

有关自定义数据类型的示例，请参阅[实时演示页面](http://trirand.com/jqgrid/jqgrid.html)中“3.3 中的新功能”下的“作为数据类型的函数”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-28T07:29:36.093

我的工具：

数据："{'page':'" + gdata.page + "','rows':'" + gdata.rows + "','sidx':'" + gdata.sidx + "','sord': '" + gdata.sord + "','nd':'" + gdata.nd + "','_search':'" + gdata._search + "','searchField':'" + ts.p.searchdata .searchField + "','searchString':'" + ts.p.searchdata.searchString + "','searchOper':'" + ts.p.searchdata.searchOper + "'}",

成功：函数（JSON，st）{如果（st ==“成功”）{addJSONData（JSON.d，ts.grid.bDiv）；如果（加载完成）{加载完成（）；} }

Insted 使用完整的 ajax 事件使用成功事件。这种方式可以防止双重 json 序列化。

只有一件事我没有意识到单元格编辑：假设我想编辑具有相同数据类型（int）的多个单元格。我只有一种网络方法！而且我不能使用具有不同名称的相同数据类型超载！有没有人解决这种问题？

# powershell - 在 ForEach 循环中运行程序

> ID：181036
> 
> 赞同：29
> 
> 时间：2008-10-08T01:12:34.450
> 
> 标签：powershell, foreach, pipeline

我试图让这个简单的 PowerShell 脚本正常工作，但我认为从根本上来说是错误的。;-)

```
ls | ForEach { "C:\Working\tools\custom-tool.exe" $_ } 
```

我基本上想获取目录中的文件，并将它们作为参数一一传递给自定义工具。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-10-08T12:44:23.947

如果您仍然需要命令路径周围的引号（例如，如果您有空格），请这样做：

```
ls | % { &"C:\Working\tools\custom-tool.exe" $_.FullName } 
```

请注意在字符串之前使用 & 来强制 PowerShell 将其解释为命令而不是字符串。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-10-08T01:26:05.657

```
ls | %{C:\Working\tools\custom-tool.exe $_} 
```

随着每个对象从管道中下来，该工具将针对它运行。在命令字符串周围加上引号会导致它成为......一个字符串！局部变量“$_”可能不知道如何处理，因此会出现错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-08T11:03:20.047

我打赌你的工具需要完整的路径。$_ 是通过管道的每个文件对象。您可能需要使用这样的表达式：

```
ls | %{C:\Working\tools\custom-tool.exe $_.fullname} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-09T17:13:56.147

Jeffrery Hicks 和 slipsec 都是正确的。把双引号去掉。

$_ 或 $_.fullname 在我的测试脚本中工作（如下）。YMMV 与您的自定义工具。

```
gci | % { c:\windows\notepad.exe $_.fullname } 
```

或者

```
gci | % { c:\windows\notepad.exe $_ } 
```

# c++ - SQLite (C/C++) 的不区分大小写的 UTF-8 字符串排序规则

> ID：181037
> 
> 赞同：7
> 
> 时间：2008-10-08T01:12:53.327
> 
> 标签：c++, sqlite, unicode, utf-8, internationalization

我正在寻找一种方法来以不区分大小写的方式比较和排序 C++ 中的 UTF-8 字符串，以便[在 SQLite 的自定义排序规则函数中](http://www.sqlite.org/c3ref/create_collation.html)使用它。

1.  *理想情况下*，该方法应该与语言环境无关。但是我不会屏住呼吸，据我所知，排序规则非常依赖于语言，所以任何适用于英语以外的语言的东西都可以，即使这意味着切换语言环境。
2.  选项包括使用标准 C 或 C++ 库或*小型*（适用于嵌入式系统）和*非 GPL*（适用于专有系统）第三方库。

到目前为止我所拥有的：

1.  `strcoll`使用 C 语言环境和`std::collate`/`std::collate_byname`时区分大小写。（这些有不区分大小写的版本吗？）
2.  我尝试使用 POSIX strcasecmp，但似乎没有为其他语言环境[定义](http://www.opengroup.org/onlinepubs/007908775/xsh/strcasecmp.html)`"POSIX"`

    > *在 POSIX 语言环境中，strcasecmp() 和 strncasecmp() 进行从高到低的转换，然后进行字节比较。结果在其他语言环境中未指定。*

    而且，事实上，`strcasecmp`在 Linux 上使用 GLIBC 的语言环境之间的结果并没有改变。

    ```
    #include <clocale>
    #include <cstdio>
    #include <cassert>
    #include <cstring>

    const static char *s1 = "Äaa";
    const static char *s2 = "äaa";

    int main() {
        printf("strcasecmp('%s', '%s') == %d\n", s1, s2, strcasecmp(s1, s2));
        printf("strcoll('%s', '%s') == %d\n", s1, s2, strcoll(s1, s2));
        assert(setlocale(LC_ALL, "en_AU.UTF-8"));
        printf("strcasecmp('%s', '%s') == %d\n", s1, s2, strcasecmp(s1, s2));
        printf("strcoll('%s', '%s') == %d\n", s1, s2, strcoll(s1, s2));
        assert(setlocale(LC_ALL, "fi_FI.UTF-8"));
        printf("strcasecmp('%s', '%s') == %d\n", s1, s2, strcasecmp(s1, s2));
        printf("strcoll('%s', '%s') == %d\n", s1, s2, strcoll(s1, s2));
    } 
    ```

    这是打印的：

    ```
    strcasecmp('Äaa', 'äaa') == -32
    strcoll('Äaa', 'äaa') == -32
    strcasecmp('Äaa', 'äaa') == -32
    strcoll('Äaa', 'äaa') == 7
    strcasecmp('Äaa', 'äaa') == -32
    strcoll('Äaa', 'äaa') == 7 
    ```

附言

是的，我知道[ICU ，但由于其](http://icu-project.org/)[巨大的尺寸](http://www.icu-project.org/charts/icu4c_footprint.html)，我们不能在嵌入式平台上使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-10T13:28:08.273

你真正想要的在逻辑上是不可能的。没有独立于语言环境、不区分大小写的字符串排序方式。简单的反例是 "i" <> "I" ？天真的答案是否定的，但在土耳其语中，这些字符串是不相等的。“i”大写为“İ”（U+130 拉丁文大写 I，上面带有点）

UTF-8 字符串给问题增加了额外的复杂性。如果您有适当的语言环境，它们是完全有效的多字节 char* 字符串。但是 C 和 C++ 标准都没有定义这样的语言环境。请咨询您的供应商（嵌入式供应商太多，抱歉，这里没有通用答案）。因此，您必须选择多字节编码为 UTF-8 的语言环境，才能使 mbscmp 函数正常工作。这当然会影响排序顺序，这取决于语言环境。而且，如果您没有 const char* 为 UTF-8 的语言环境，则根本无法使用此技巧。（据我了解，微软的 CRT 受此困扰。他们的多字节代码只能处理最多 2 个字节的字符；UTF-8 需要 3 个）

wchar_t 也不是标准解决方案。据说它是如此之宽，以至于您不必处理多字节编码，但您的排序规则仍将取决于语言环境 (LC_COLLATE) 。但是，使用 wchar_t 意味着您现在为 const char* 选择不使用 UTF-8 的语言环境。

完成此操作后，您基本上可以通过将字符串转换为小写并比较它们来编写自己的排序。这并不完美。你期待 L"ß" == L"ss" 吗？他们甚至不一样的长度。然而，对于一个德国人来说，你必须认为他们是平等的。你能忍受吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T02:15:37.507

我认为没有可以使用的标准 C/C++ 库函数。您必须自己动手或使用第 3 方库。可以在此处找到特定于语言环境的排序规则的完整 Unicode 规范：[http://www.unicode.org/reports/tr10/](http://www.unicode.org/reports/tr10/)（**警告**：这是一个*很长*的文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-09T12:02:42.717

在 Windows 上，您可以回调 OS 函数 CompareStringW 并使用 NORM_IGNORECASE 标志。您必须先将 UTF-8 字符串转换为 UTF-16。否则，请查看 IBM 的[International Components for Unicode](http://www-01.ibm.com/software/globalization/icu/index.jsp)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-09T13:00:33.647

我相信你需要自己动手或使用第三方库。我推荐第三方库，因为需要遵循很多规则才能获得真正的国际支持——最好让专家来处理它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-10T11:50:35.290

我没有以示例代码的形式给出明确的答案，但我应该指出，UTF-8 字节流实际上包含 Unicode 字符，您必须使用 C/C++ 运行时库的 wchar_t 版本。

不过，您必须先将这些 UTF-8 字节转换为 wchar_t 字符串。这不是很难，因为 UTF-8 编码标准有[很好的文档记录](http://en.wikipedia.org/wiki/UTF-8)。我知道这一点，因为我已经完成了，但我无法与您分享该代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-16T09:37:57.407

如果您仅使用它为您的语言环境进行搜索和排序，我建议您的函数调用一个简单的替换函数，该函数使用如下表将两个多字节字符串转换为每个字符一个字节：

A -> a
Ã -> a
á -> a
ß -> ss
Ç -> c
等等

然后只需调用 strcmp 并返回结果。

# ruby-on-rails - Vista 上的红宝石

> ID：181038
> 
> 赞同：6
> 
> 时间：2008-10-08T01:13:20.453
> 
> 标签：ruby-on-rails, ruby, windows-vista, rubygems

我昨天在 Vista 32bit 上安装了 Ruby 和 Ruby on Rails，使用本网站上的说明：[http ://rubyonrails.org/down](http://rubyonrails.org/down)

所以我下载了安装程序，然后是 Gems，然后我用 Gems 下载了 rails。

现在我不能在命令行中使用 Gem 或 Ruby 命令......所以我认为环境变量有问题，但我不知道如何在 Vista 中设置它们或放置什么。谁能帮我这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-08T01:29:14.667

要设置环境变量，请执行此操作

1.  启动开始菜单
2.  **右键单击**并`Computer`选择`Properties`
3.  单击`Advanced system settings`左侧栏中的 ，并确认 UAC 提示
4.  选择`Advanced`标签（第三个）
5.  点击`Environment Variables...`（底部）
6.  在顶部框 ( `User variables for XXX`) 中找到 的条目`PATH`，或单击新建以创建条目。
    如果已经有一个`PATH`使用分号来分隔其中列出的每个目录
7.  放入`c:\ruby\bin`（如果您在其他地方安装了 ruby​​，请更改）。
8.  多次单击确定以关闭我们打开的所有窗口。
9.  重新启动命令提示符。

`gem`并且`ruby`现在`irb`应该一切正常。谁说 GUI 工具比命令行工具慢。嘘！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T01:19:21.177

在命令行窗口中输入 'PATH' 然后按回车键，你在 PATH 环境变量上看到 ruby​​.exe 了吗？

如果您安装 ruby​​ 时说 'c:\ruby' 那么它将是 'c:\ruby\bin\'。

看起来它可能从路径中丢失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T01:28:08.007

将 ruby​​ bin 目录添加到 PATH 环境变量中，转到控制面板 -> 系统 -> 高级系统设置，然后转到高级选项卡，环境变量，然后编辑 PATH 变量并将路径附加到 ruby​​ 二进制文件安装即 **； C:\ruby\bin**

# visual-studio - 学习 Visual Studio 工具的最佳资源是什么？

> ID：181046
> 
> 赞同：1
> 
> 时间：2008-10-08T01:15:51.200
> 
> 标签：visual-studio

我正在尝试学习 Visual Studio 的一些基本和高级功能，有人找到具有此类信息的网站吗？

我看到这个：

[https://stackoverflow.com/questions/86355/best-way-to-learn-visual-studio-power-features](https://stackoverflow.com/questions/86355/best-way-to-learn-visual-studio-power-features)

但它似乎更多地与技巧和高级功能相关。

所有三个版本（2003、2005、2008）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T01:18:35.983

堆栈溢出！！！！

（对不起，我真的忍不住）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T01:22:16.007

你没有提到哪个版本。然而，我已经阅读了[Professional Visual Studio 2005](https://rads.stackoverflow.com/amzn/click/com/0764598465)，虽然我发现它对我的需求有点介绍性，但它可能对 Visual Studio 的新手有用。

我注意到[2008 年版](https://rads.stackoverflow.com/amzn/click/com/0470229888)现在也出来了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T05:08:05.583

微软有很多视频展示了 Visual Studio 中的各种技术：

*   [http://msdn.microsoft.com/en-us/vs2008/bb964532.aspx](http://msdn.microsoft.com/en-us/vs2008/bb964532.aspx)

就我个人而言，我不喜欢培训视频，因为我发现我对它们感到不耐烦（太线性、太慢、没有互动），但也许它们对其他人来说效果很好。

# c++ - 您可以在 c 或 c++ 中分配一个非常大的单个内存块（> 4GB）吗？

> ID：181050
> 
> 赞同：43
> 
> 时间：2008-10-08T01:18:48.463
> 
> 标签：c++, c, memory, malloc

这些天我想知道有非常大量的内存，是否可以分配一块大于 4GB 的内存？还是我需要分配一堆较小的块并处理它们之间的切换？

为什么？？？我正在处理一些openstreetmap xml数据，这些文件很大。我目前正在将它们流式传输，因为我无法将它们全部加载到一个块中，但我只是对 malloc 或 new 的上限感到好奇。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-10-08T01:22:16.007

简短回答：不太可能

为了使其工作，您绝对**必须**使用 64 位处理器。其次，它将取决于操作系统是否支持将超过 4G 的 RAM 分配给单个进程。

从理论上讲，这是可能的，但您必须阅读内存分配器的文档。您也更容易受到内存碎片问题的影响。

有关于[Windows 内存管理](http://www.microsoft.com/whdc/system/kernel/wmm.mspx)的好信息。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-10-09T18:28:01.350

**物理和虚拟内存布局入门**

您将需要 64 位 CPU 和操作系统构建以及几乎可以肯定有足够的内存来避免破坏您的工作集。一点背景：

32 位机器（总的来说）具有可以存储 2^32 (4,294,967,296) 个唯一值之一的寄存器。这意味着 32 位指针可以寻址 2^32 个唯一内存位置中的任何一个，这就是神奇的 4GB 限制的来源。

一些 32 位系统（例如 SPARCV8 或 Xeon）具有 MMU，它可以使用一个技巧来允许更多的物理内存。这允许多个进程占用总计超过 4GB 的内存，但每个进程仅限于其自己的 32 位虚拟地址空间。对于查看虚拟地址空间的单个进程，32 位指针只能映射 2^32 个不同的物理位置。

我不会详细介绍，但[这个演示文稿](http://pages.cs.wisc.edu/~remzi/Classes/537/Fall2005/Lectures/lecture14.ppt)（警告：powerpoint）描述了它是如何工作的。一些操作系统具有操作 MMU 并将不同的物理位置交换到用户级别控制下的虚拟地址空间的工具（例如[此处](http://msdn.microsoft.com/en-us/library/aa366796(VS.85).aspx)描述的那些- 感谢上面的 FP）。

操作系统和内存映射的 I/O 将占用一些虚拟地址空间，因此并非所有 4GB 都必须对进程可用。例如，Windows 默认占用 2GB，但如果在启动时调用 /3G 开关，则可以设置为仅占用 1GB。这意味着此类 32 位架构上的单个进程只能在内存中构建一个小于 4GB 的连续数据结构。

这意味着您必须显式使用Windows 上的[PAE工具或](http://msdn.microsoft.com/en-us/library/aa366527(VS.85).aspx)[Linux 上的等效工具](http://www.ibm.com/developerworks/linux/library/l-memmod/#extend)来手动交换覆盖。这不一定那么难，但需要一些时间才能开始工作。

或者，您可以获得具有大量内存的 64 位机器，这些问题或多或少会消失。至少在理论上，具有 64 位指针的 64 位架构可以构建具有多达 2^64 (18,446,744,073,709,551,616) 个唯一地址的连续数据结构。这允许构建和管理更大的连续数据结构。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-10-08T01:54:15.100

内存映射文件的优点是您可以打开一个比 4Gb 大得多的文件（在 NTFS 上几乎是无限的！）并在其中有多个 <4Gb 的内存窗口。
它比打开文件并将其读入内存要有效得多，在大多数操作系统上它使用内置的分页支持。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-10-08T01:34:05.513

对于 64 位操作系统（以及具有这么多内存的机器），这应该不是问题。

如果 malloc 无法应对，那么操作系统肯定会提供允许您直接分配内存的 API。在 Windows 下，您可以使用[VirtualAlloc](http://msdn.microsoft.com/en-us/library/aa366887(VS.85).aspx) API。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-10-08T01:20:08.600

这取决于您使用的是哪个 C 编译器，以及在哪个平台上（当然），但是没有根本原因为什么您不能分配最大的连续可用内存块 - 这可能比您需要的要少。当然，您可能必须使用 64 位系统来解决比 RAM 多的问题...

有关历史和详细信息，请参见[Malloc](http://en.wikipedia.org/wiki/Malloc)

在 alloc.h 中调用[HeapMax](http://tigcc.ticalc.org/doc/alloc.html#HeapMax)以获得最大的可用块大小

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-10-08T01:32:46.720

您是否考虑过使用内存映射文件？由于您正在加载非常大的文件，因此这似乎是最好的方法。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-10-08T01:34:10.663

这取决于操作系统是否会为您提供允许寻址超过 4GB 的内存的虚拟地址空间，以及编译器是否支持使用 new/malloc 分配它。

对于 32 位 Windows，您将无法获得大于 4GB 的单个块，因为指针大小为 32 位，因此将您的虚拟地址空间限制为 4GB。（您可以使用[物理地址扩展](http://msdn.microsoft.com/en-us/library/aa366796(VS.85).aspx)来获得超过 4GB 的内存；但是，我相信您必须自己将该内存映射到 4GB 的虚拟地址空间）

对于 64 位 Windows，VC++ 编译器支持 64 位指针，虚拟地址空间的理论限制为 8TB。

我怀疑这同样适用于 Linux/gcc - 32 位不允许你，而 64 位允许你。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-06-02T09:02:14.593

正如 Rob 指出的那样，Windows 的 VirtualAlloc 是一个不错的选择，匿名文件映射也是如此。但是，特别是关于您的问题，“如果 C 或 C++”的答案可以分配，答案是**否定的，即使在 WIN7 RC 64 上也不支持**

在 exe 文件的 PE/COFF 规范中，指定 HEAP 保留和 HEAP 提交的字段是一个 32 位的数量。这符合 Windows CRT 中当前堆实现的物理大小限制，仅不足 4GB。因此，没有办法从 C/C++ 分配超过 4GB 的空间（从技术上讲，CreateFileMapping 和 VirtualAlloc/VirtualAllocNuma 等操作系统支持工具......不是 C 或 C++）。

此外，请注意存在称为页表的底层 x86 或 amd64 ABI 构造**。**这*实际上*会做你所关心的事情，为你更大的请求分配更小的块，即使这发生在内核内存中，也会对整个系统产生影响，这些表是有限的。

如果您在如此宏大的目的中分配内存，则建议您根据分配粒度（VirtualAlloc 强制执行）进行分配，并确定可选标志或方法以启用更大的页面。

4kb 页面是 386 的初始页面大小，随后 pentium 增加了 4MB。今天，[AMD64](http://www.amd.com/us-en/assets/content_type/white_papers_and_tech_docs/40546.pdf)（AMD 系列 10h 处理器的软件优化指南）的最大页表条目大小为 1GB。这意味着在这里你的情况，假设你刚刚做了 4GB，它只需要内核目录中的 4 个唯一条目来定位\分配和许可你的进程的内存。

Microsoft 还发布了这本[手册](http://download.microsoft.com/download/9/c/5/9c5b2167-8017-4bae-9fde-d599bac8184a/MemMgt.docx)，阐明了应用程序内存的一些更精细的点，并用于 Vista/2008 平台和更新的平台。

内容

介绍。4

关于内存管理器 4

虚拟地址空间。5

内核虚拟地址空间的动态分配。5

x86 架构的详细信息。6

64 位架构的详细信息。7

x86 架构中的内核模式堆栈跳跃。7

使用多余的池内存。8

安全性：地址空间布局随机化。9

ASLR 对图像加载地址的影响。9

ASLR 的好处.. 11

如何创建基于动态的图像。11

I/O 带宽。11

微软超取。12

页面文件写入。12

内存管理器和缓存管理器的协调 13

预取式聚类。14

大文件管理 15

休眠和待机。16

高级视频模型 16

NUMA 支持 17

资源分配。17

默认节点和亲和性。18

中断亲和。19

适用于应用程序的 NUMA 感知系统功能。19

驱动程序的 NUMA 感知系统功能。19

分页。20

可扩展性。20

效率和并行性.. 20

页帧号和 PFN 数据库。20

大页面。21

缓存对齐池分配。21

虚拟机。22

负载均衡。22

额外的优化。23

系统完整性。23

诊断硬件错误。23

代码完整性和驱动程序签名。24

错误检查期间的数据保存。24

你应该做什么。24

对于硬件制造商。24

对于驱动程序开发人员。24

对于应用程序开发人员。25

对于系统管理员。25

资源。25

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-06-02T09:24:53.863

如果 size_t 在您的系统上大于 32 位，那么您已经清除了第一个障碍。但是 C 和 C++ 标准不负责确定对 new 或 malloc 的任何特定调用是否成功（大小为 0 的 malloc 除外）。这完全取决于操作系统和堆的当前状态。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-02-25T21:44:18.367

就像其他人所说的那样，获得 64 位机器是要走的路。[但即使在 32 位机器上的英特尔机器上，如果您的操作系统和 CPU 支持PAE](http://en.wikipedia.org/wiki/Physical_Address_Extension)，您也可以处理大于 4gb 的内存区域。不幸的是，32 位 WinXP 不这样做（32 位 Vista 可以吗？）。Linux 默认允许您执行此操作，但您将被限制为 4gb 区域，即使使用 mmap()，因为指针仍然是 32 位的。

但是，您应该做的是让操作系统为您处理内存管理。进入一个可以处理那么多 RAM 的环境，然后将 XML 文件读入 (a) 数据结构，并让它为您分配空间。然后对内存中的数据结构进行操作，而不是对 XML 文件本身进行操作。

即使在 64 位系统中，您也不会对程序的哪些部分实际位于 RAM、缓存中或分页到磁盘有很多控制，至少在大多数情况下，因为操作系统和 MMU 处理这自己。

# javascript - 从 javascript 用于 Web 应用程序的跨浏览器最稳定的模态对话框实现是什么？

> ID：181056
> 
> 赞同：6
> 
> 时间：2008-10-08T01:21:48.863
> 
> 标签：javascript, jquery, modal-dialog, cross-browser, jqmodal

我在为客户端构建的 Web 应用程序中使用了很多 JQuery，我想找到一个模态对话框的 javascript 实现，它在以下浏览器集中相当稳定。

IE 7+ FF 2+ Chrome 和 Safari

我尝试了几个 jQuery 插件，但在其中一个浏览器中似乎总是有工件。

- - 编辑

`jqModal`似乎更稳定，但我在 IE7 中有一个问题，对话框在弹出后立即消失。我怀疑 js 事件没有被取消之类的。我会多出一点戏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T01:30:50.373

我用了几次[jqModal ，我很满意。](http://dev.iceburg.net/jquery/jqModal/)它非常可配置，但重量很轻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T01:32:59.213

你试过[YUI](http://developer.yahoo.com/yui/container/dialog/)吗？我不确定对 Chrome 的支持是什么，但我对 IE 和 Firefox 的支持非常好，据称它适用于 Safari。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-22T08:01:55.260

我们目前使用 BlockUI。太棒了，一句话。可以通过 css 设置样式（当然），阻止任何元素并且看起来很稳定，当然在阻止 IE 和 Firefox....

如果您需要帮助，请发帖，我会伸出援手...

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T17:59:51.297

我进行了类似的练习，尝试了我能找到的大多数插件。我使用 YUI 有一段时间了，效果很好；我遇到的唯一问题是调整居中模式的大小，这是一个非常晦涩的用例。

我最终得到了[http://dev.iceburg.net/jquery/jqModal/](http://dev.iceburg.net/jquery/jqModal/)，我很满意。

# ruby-on-rails - 将完整的网络搜索添加到我的网站的最佳方式？

> ID：181060
> 
> 赞同：8
> 
> 时间：2008-10-08T01:22:51.403
> 
> 标签：ruby-on-rails, ruby, search

我需要将完整的网络搜索添加到我的网站。我需要谷歌自定义搜索之类的东西，但没有广告，而且它必须是免费的。任何可以索引我的网站并允许我搜索它的 Web 服务或开源项目的建议都会有所帮助。

如果有帮助，我的网站是用 ruby​​ on rails 制作的。

我会提出这个问题 community-wiki 这样你就可以编辑我糟糕的英语。我想很多人都可以从这个问题中受益。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-08T01:55:52.273

查看 Lucene。这是一个开源搜索引擎，在您自己的网站上实施肯定会是一种有趣的学习体验。我相信它最初是由 Excite 人设计的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-08T02:56:20.590

Ferret 是 Lucene 的 Ruby 端口。查看[acts_as_ferret](http://projects.jkraemer.net/acts_as_ferret/)插件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-08T04:42:28.863

人们将在我阅读的博客中使用acts_as_solr 并思考狮身人面像：

[http://acts-as-solr.rubyforge.org/](http://acts-as-solr.rubyforge.org/)

[http://ts.freelancing-gods.com/](http://ts.freelancing-gods.com/)

我也一直在看 tsearch 在 postgres 中，它看起来非常有能力：

[http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/](http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-08T04:47:19.463

取决于您所说的完整网络搜索的真正含义。如果您想搜索整个网络，那么上面的答案对您没有多大帮助，因为它们实际上是用于索引和搜索您网站的内容。我建议使用 Google ajax 搜索（只需要“由 google 提供支持”，没有广告）或 yahoo 的 Boss（可能需要不确定的广告）。

[http://code.google.com/apis/ajaxsearch/](http://code.google.com/apis/ajaxsearch/)

[http://developer.yahoo.com/search/boss/](http://developer.yahoo.com/search/boss/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-10-08T13:52:07.287

“完整的网络搜索”是什么意思？

这些是可用于全文搜索的[好答案，其中搜索引擎索引和查询存储在数据库中的模型对象。](https://stackoverflow.com/questions/47656/how-do-i-do-full-text-searching-in-ruby-on-rails)

如果您的意思是索引和查询您呈现的 HTML，[Nutch](http://lucene.apache.org/nutch/)是一个流行的选项，具有网络爬虫、解析器、索引器和查询界面。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-08T08:43:01.110

我推荐[acts_as_xapian](http://github.com/frabcus/acts_as_xapian/wikis)。它非常容易实现，速度足够快，并且拥有您通常需要的功能。

# c++ - EnumDisplayDevices vs WMI Win32_DesktopMonitor，如何检测活动监视器？

> ID：181064
> 
> 赞同：9
> 
> 时间：2008-10-08T01:25:32.817
> 
> 标签：c++, windows, winapi, wmi

对于我当前的 C++ 项目，我需要为在大量计算机上连接并处于活动状态的每个监视器检测一个唯一的字符串。

研究指出了两种选择

1.  使用 WMI 并在 Win32_DesktopMonitor 中查询所有活动监视器。使用 PNPDeviceID 唯一标识监视器。

2.  使用 EnumDisplayDevices API，并向下挖掘以获取设备 ID。

我有兴趣使用设备 ID 来识别唯一的型号，因为使用默认即插即用驱动程序的监视器将报告一个通用字符串作为监视器名称“默认即插即用监视器”

我一直在使用 WMI 方法遇到问题，它似乎只在我的 Vista 机器上返回 1 个显示器，查看文档发现它在非 WDDM 设备上无法正常工作。

EnumDisplayDevices 从后台服务（尤其是在 Vista 上）运行时似乎有点问题，如果它在会话 0 中，它将不返回任何信息。

*   有没有其他人必须做类似的事情（为所有连接的有源监视器找到唯一的模型字符串？）

*   哪种方法效果最好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-14T21:13:30.393

这是我当前用于可靠地检测监控设备 ID 的正在进行中的代码。

```
CString DeviceID;
DISPLAY_DEVICE dd; 
dd.cb = sizeof(dd); 
DWORD dev = 0; 
// device index 
int id = 1; 
// monitor number, as used by Display Properties > Settings

while (EnumDisplayDevices(0, dev, &dd, 0))
{
    DISPLAY_DEVICE ddMon;
    ZeroMemory(&ddMon, sizeof(ddMon));
    ddMon.cb = sizeof(ddMon);
    DWORD devMon = 0;

    while (EnumDisplayDevices(dd.DeviceName, devMon, &ddMon, 0))
    {
        if (ddMon.StateFlags & DISPLAY_DEVICE_ACTIVE && 
                     !(ddMon.StateFlags & DISPLAY_DEVICE_MIRRORING_DRIVER))
        {
            DeviceID.Format (L"%s", ddMon.DeviceID);
            DeviceID = DeviceID.Mid (8, DeviceID.Find (L"\\", 9) - 8);
        }
        devMon++;

        ZeroMemory(&ddMon, sizeof(ddMon));
        ddMon.cb = sizeof(ddMon);
    }

    ZeroMemory(&dd, sizeof(dd));
    dd.cb = sizeof(dd);
    dev++; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-09-19T08:47:08.303

我刚刚发现您可以在 Win32_PnPEntity 中查询 service="monitor"，它会返回所有监视器。

我的机器上的结果：

```
select * from Win32_PnPEntity where service="monitor"

Availability | Caption               | ClassGuid                              | CompatibleID | ConfigManagerErrorCode | ConfigManagerUserConfig | CreationClassName | Description           | DeviceID                           | ErrorCleared | ErrorDescription | HardwareID  | InstallDate | LastErrorCode | Manufacturer | Name                  | PNPDeviceID                        | PowerManagementCapabilities | PowerManagementSupported | Service | Status | StatusInfo | SystemCreationClassName | SystemName
             | Dell 2007FP (Digital) | {4d36e96e-e325-11ce-bfc1-08002be10318} | array[0..0]  | 0                      | False                   | Win32_PnPEntity   | Dell 2007FP (Digital) | DISPLAY\DELA021\5&4F61016&0&UID257 |              |                  | array[0..0] |             |               | Dell Inc.    | Dell 2007FP (Digital) | DISPLAY\DELA021\5&4F61016&0&UID257 |                             |                          | monitor | OK     |            | Win32_ComputerSystem    | 8HVS05J
             | Dell ST2320L_Digital  | {4d36e96e-e325-11ce-bfc1-08002be10318} | array[0..0]  | 0                      | False                   | Win32_PnPEntity   | Dell ST2320L_Digital  | DISPLAY\DELF023\5&4F61016&0&UID256 |              |                  | array[0..0] |             |               | Dell Inc.    | Dell ST2320L_Digital  | DISPLAY\DELF023\5&4F61016&0&UID256 |                             |                          | monitor | OK     |            | Win32_ComputerSystem    | 8HVS05J 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T16:21:24.817

我们一直在玩弄 EnumDisplayDevices 以检测当前的显卡制造商是否是 NVIDIA。它不一样，但也许它会有所帮助。我们的作品看起来像这样：

```
int disp_num = 0;
    BOOL res = TRUE;
    do {
        DISPLAY_DEVICE disp_dev_info; 
        ZeroMemory( &disp_dev_info, sizeof(DISPLAY_DEVICE) );
        disp_dev_info.cb = sizeof(DISPLAY_DEVICE);
        res = EnumDisplayDevices( 0, disp_num++, &disp_dev_info, 0x00000001 );
        if(res &&
           disp_dev_info.DeviceString[0]!=0 && disp_dev_info.DeviceString[0]=='N' &&
           disp_dev_info.DeviceString[1]!=0 && disp_dev_info.DeviceString[1]=='V' && 
           disp_dev_info.DeviceString[2]!=0 && disp_dev_info.DeviceString[2]=='I' && 
           disp_dev_info.DeviceString[3]!=0 && disp_dev_info.DeviceString[3]=='D' && 
           disp_dev_info.DeviceString[4]!=0 && disp_dev_info.DeviceString[4]=='I' && 
           disp_dev_info.DeviceString[5]!=0 && disp_dev_info.DeviceString[5]=='A'){
            isNVidia = true;
        }
        int x = 0;
    }while( res != FALSE ); 
```

相当愚蠢，但工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-14T15:44:55.953

Win32_DesktopMonitor 方法也只在我的 Vista 机器上返回 1 个监视器。不过，PnP ID 似乎设置正确。

我快速使用了 EnumDisplayDevices API，虽然它似乎可靠地发现了适配器的详细信息（大概是因为大多数人不会长时间将其保留为“标准 VGA”），但它只返回“即插即用监视器”对于连接的显示器。

这与我几年前对此所做的研究相呼应（必须将一些代码放在一起以帮助清除这些记忆）。

这是来自普通用户帐户。如果你有一种可靠的方法让 EnumDisplayDevices 返回 PnP ID，即使在正常的用户会话中，我也会感兴趣——我们目前正在调查这些信息是否可用于设备驱动程序。

如果从会话 #0 运行代码不够可靠，您可以做的一件事是查看是否可以生成将在用户上下文中运行的辅助进程（使用 CreateProcessAsUser 或使用带有激活名字对象的 COM）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T15:07:43.360

我从未尝试过从服务中执行此操作，但`EnumDisplayDevices`在以用户身份运行时通常效果很好。我相信服务在一个单独的（无头）会话中运行，这可以解释您在那里看到的问题。

你能从你的服务中运行一个帮助程序，模拟一个可以访问显示器的用户帐户吗？

# php - 如何在 Windows 上安装 cURL？

> ID：181082
> 
> 赞同：59
> 
> 时间：2008-10-08T01:33:49.463
> 
> 标签：php, windows, curl, windows-xp, installation

我已按照此处的所有说明进行操作：[http ://www.tonyspencer.com/2003/10/22/curl-with-php-and-apache-on-windows/](http://www.tonyspencer.com/2003/10/22/curl-with-php-and-apache-on-windows/)

安装和配置 apache 获取 PHP5 包并获取 CURL 包。

我运行 apache 并运行 PHP 脚本。没问题。但是当我用 curl 运行 php 脚本时，它失败了。

它返回： `**Call to undefined function curl_version() in C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\testing.php on line 5**`

其中第 5 行被调用`curl_init()`

我输出 php -i 以查看是否调用了正确的扩展路径。设置正确：

```
extension_dir => C:\PHP\ext => C:\PHP\ext
cURL support => enabled
cURL Information => libcurl/7.16.0 OpenSSL/0.9.8g zlib/1.2.3 
```

我什至尝试运行`curl_version()` ，但仍然出现同样的错误。
看起来 PHP 找不到 CURL 扩展，但`php.ini`（以及 php -i）显示它已设置。

任何的想法？:)

```
P.S>  System I m running on:
Windows XP
Apache 2.2
PHP 5.2.6
CURL Win32 Generic Binaries: Win32 2000/XP  metalink    7.19.0  binary  SSL enabled     Daniel Stenberg     249 KB 
```

我没有得到这个：

```
Win32 2000/XP   7.19.0  libcurl     SSL enabled     Günter Knauf    1.55 MB
Should I get this one instead? 
```

* * *

我需要使用 CURL 的原因是它是我项目的要求。所以，我只能坚持下去。XAMPP...它在 Windows 中是如何工作的？有什么网站可以推荐吗？谢谢。

我已经尝试了很多关于安装 cURL 并检查所有内容的方法，但我仍然在围绕这个问题转圈，不知道发生了什么。

Apache 服务器使用正确的 PHP.ini。并且 PHP.ini 具有正确的 extension_dir 和 extension=php_curl.dll 我不知道为什么它不起作用。即使我按照每一步进行设置。:(

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-06-12T20:00:14.247

**使用以下步骤安装 curl：**

1.  在浏览器中打开[https://curl.haxx.se/dlwiz?type=bin 。](https://curl.haxx.se/dlwiz?type=bin)

2.  在下拉框中选择您的操作系统：Windows /Win32 或 Win 64。单击选择！

3.  对于 Win 32，选择是在 Windows 命令提示符（通用）还是在 Cygwin 终端（cygwin）中使用 curl。对于 Win 64，选择是在 Windows 命令提示符（通用）还是 MinGW (MinGW64) 中使用 curl。点击选择！

4.  如果需要，请选择您的 Windows 操作系统。结束。

5.  单击“下载”以获取启用或禁用 SSL 的版本

6.  打开下载的 zip 文件。将文件解压缩到易于查找的位置，例如 C:\Program Files。

**测试卷曲**

1.  打开 Windows 命令提示符终端。（从“开始”菜单中，单击“运行”，然后键入 cmd。）

2.  设置路径以包含放置 curl.exe 的目录。例如，如果您将其放在 C:\Program Files\curl 中，那么您将键入以下命令：set path=%path%;"c:\Program Files\curl"

注意：您也可以直接将 curl.exe 文件复制到路径中的任何现有路径

3.  键入卷曲。您应该会看到以下消息： curl: try 'curl –help' or 'curl –message' for more information 这意味着 curl 已安装并且路径正确。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-10-08T06:32:40.297

您可能弄错了您需要编辑的 PHP.ini。首先，添加一个 PHPinfo(); 到 info.php，然后从浏览器运行它。

现在写下您在变量列表中看到的 PHP ini 目录路径！您可能会注意到它与您的 PHP-CLI ini 文件不同。

启用扩展

你完成了 ：-）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-08T03:24:34.590

我正在使用 XAMPP，其中有几个 php.ini 文件。

您可以在 php.ini 文件中找到该行： `;extension=php_curl.dll`

请删除`;`此行的开头。您可能需要重新启动 apache 服务器。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-01T15:59:30.297

我也有这个问题。在正确完成所有这些步骤和一些固定的误解之后（没有 extensions_dir 而是 extension_dir，没有 session.save_path 而是 session.save_path），没有任何效果。

最后我在 php.net 上找到了这个注释：

**注意：Win32 用户注意：为了在 Windows 环境中启用此模块，libeay32.dll 和 ssleay32.dll 必须存在于您的 PATH 中。您不需要 cURL 站点中的 libcurl.dll。**

所以我将 ssleay32.dll、libeay32.dll 和 php_curl.dll 从 /PHP 复制到 Windows/system32 并替换了已经存在的文件（我注意到有旧版本的 ssleay32.dll 和 libeay32.dll）。之后我在 php_info(); 中找到了 CURL 部分。最后一切正常。

祝你好运！

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-06T10:04:18.757

其他遇到此问题的人的另一个答案

当您取消注释扩展线时，将其更改为：

```
extension=C:/php/ext/php_curl.dll 
```

或扩展文件夹的位置，对我来说，在我这样做之前它不起作用

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-08T16:59:32.607

我最近在 PHP5 for Windows Vista 上安装了 Curl。我最初安装 PHP5 时*没有*启用 CURL 库，因此 phpinfo() 或 php.ini 中没有显示任何关于 Curl 的内容。

我通过重新运行 PHP5 安装程序（对我来说是 php-5.2.8-win32-installer.msi）并选择“更改”来安装 CURL。然后，我添加了 CURL 组件。重新启动 Apache，CURL 应该可以工作。CURL 将显示在 phpinfo() 中。此外，这是一个示例脚本，您可以运行它来验证它是否有效。它显示来自 Google 的 RSS 提要：

```
 <?php
    error_reporting(E_ALL);
    ini_set('display_errors', '1');
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,
    'http://news.google.com/news?hl=en&topic=t&output=rss');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $contents = curl_exec ($ch);
    echo $contents;
    curl_close ($ch);
    ?> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-19T13:49:52.640

注意：Win32 用户注意事项 为了在 Windows 环境中启用此模块 (cURL)，libeay32.dll 和 ssleay32.dll 必须存在于您的 PATH 中。您不需要 cURL 站点中的 libcurl.dll。

这篇笔记解决了我的问题。想到分享。libeay32.dll 和 ssleay.dll 你会在你的 php 安装文件夹中找到。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-01-28T04:37:24.167

我同意 Erroid，您必须将 PHP 目录添加到 PATH 环境中。

```
PATH=%PATH%;<Your_PHP_Path> 
```

例子

```
PATH=%PATH%;C:\php 
```

它对我有用。谢谢你。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-08T12:20:40.047

[您可以在http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)找到 XAMPP

[http://www.apachefriends.org/en/xampp-windows.html](http://www.apachefriends.org/en/xampp-windows.html)解释了适用于 Windows 的 XMAPP。

是的，安装后有3个php.ini文件，一个是php4的，一个是php5的，一个是apache的。请相应地修改它们。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-08T23:01:05.683

我解决了这个问题。

在我的 apache 中，我必须指定：

PHPIniDir "C://php" AddType application/x-httpd-php .php

对于 php.ini，不要使用 php.ini_recommend，而是使用 php.ini_dist 来配置我的 php.ini。

然后确保 php 引擎已打开。然后它现在可以工作了。谢谢大家。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-11-23T11:14:42.633

您可以从这里使用 curl .download 文件的二进制文件：http: [//www.paehl.com/open_source/?](http://www.paehl.com/open_source/?CURL_7.22.0) CURL_7.22.0 下载文件并解压后放入任何驱动器并将绝对路径设置为环境现在您可以在 windows 中也可以使用 curl 作为命令。像 c:\curl -u user@example.com:password [http://localhost:3000/user/sign_in](http://localhost:3000/user/sign_in)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-05-30T20:56:30.487

您还可以使用[CygWin](https://www.cygwin.com/)并安装 cURL 包。它工作得很好，完美无瑕！！

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-11-27T21:06:03.430

我已经尝试了一切 - 但没有任何帮助。搜索了几个小时后，我发现了以下信息：

> Apache 2.4.18 出于某种原因不加载 php 7.2 curl。我将我的 Apache 更新到 2.4.29 并立即加载 curl

[http://forum.wampserver.com/read.php?2,149346,149348](http://forum.wampserver.com/read.php?2,149346,149348)

我应该说什么：我更新了 Apache 并且 curl 运行起来很有魅力

# ruby-on-rails - 如何在 rails 中缓存计算的列？

> ID：181090
> 
> 赞同：16
> 
> 时间：2008-10-08T01:39:11.543
> 
> 标签：ruby-on-rails, ruby, calculated-columns, caching

我有一个活动记录对象树，例如：

```
class Part < ActiveRecord::Base
  has_many :sub_parts, :class_name => "Part"

  def complicated_calculation
    if sub_parts.size > 0
      return self.sub_parts.inject(0){ |sum, current| sum + current.complicated_calculation }
    else
      sleep(1)
      return rand(10000)
    end
  end

end 
```

每次重新计算 complex_calculation 成本太高。所以，我需要一种缓存值的方法。但是，如果任何部分发生更改，则需要使其缓存以及其父级和祖父级的缓存等无效。

作为一个粗略的草稿，我创建了一个列来将缓存的计算保存在“parts”表中，但这闻起来有点烂。似乎应该有一种更简洁的方法来缓存计算值，而不是将它们塞在“真实”列旁边。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-10-08T07:28:41.260

我建议使用关联回调。

```
class Part < ActiveRecord::Base
  has_many :sub_parts,
    :class_name => "Part",
    :after_add => :count_sub_parts,
    :after_remove => :count_sub_parts

  private

  def count_sub_parts
    update_attribute(:sub_part_count, calculate_sub_part_count)
  end

  def calculate_sub_part_count
    # perform the actual calculation here
  end
end 
```

又好又容易=）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-08T06:01:48.563

1.  您可以将实际缓存的值填充到 Rails 缓存中（如果您需要分发它，请使用 memcached）。

2.  困难的一点是缓存到期，但缓存到期并不常见，对吧？在这种情况下，我们可以依次循环遍历每个父对象并删除其缓存。我在您的类中添加了一些 ActiveRecord 魔法，以使获取父对象本身变得简单——您甚至不需要接触您的数据库。记得`Part.sweep_complicated_cache(some_part)`在你的代码中适当地调用——你可以把它放在回调等中，但我不能为你添加它，因为我不明白什么时候`complicated_calculation`改变。

    ```
    class Part < ActiveRecord::Base
      has_many :sub_parts, :class_name => "Part"
      belongs_to :parent_part, :class_name => "Part", :foreign_key => :part_id

      @@MAX_PART_NESTING = 25 #pick any sanity-saving value

      def complicated_calculation (...)
        if cache.contains? [id, :complicated_calculation]
          cache[ [id, :complicated_calculation] ]
        else
          cache[ [id, :complicated_calculation] ] = complicated_calculation_helper (...)
        end
      end

      def complicated_calculation_helper
        #your implementation goes here
      end

      def Part.sweep_complicated_cache(start_part)
        level = 1  # keep track to prevent infinite loop in event there is a cycle in parts
        current_part = self

        cache[ [current_part.id, :complicated_calculation] ].delete
        while ( (level <= 1 < @@MAX_PART_NESTING) && (current_part.parent_part)) {
         current_part = current_part.parent_part)
         cache[ [current_part.id, :complicated_calculation] ].delete
        end
      end
    end 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T01:42:40.037

有一个类似于计数器缓存的字段。例如： order_items_amount 并将其作为缓存的计算字段。

使用 after_save 过滤器重新计算任何可以修改该值的字段。（包括唱片本身）

编辑：这基本上就是你现在所拥有的。除非您想将缓存的计算字段存储在另一个表中，否则我不知道任何更清洁的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T03:20:49.230

使用 before_save 或 ActiveRecord Observer 是确保缓存值是最新的方法。我会使用 before_save 然后检查你在计算中使用的值是否真的改变了。这样，如果不需要，您就不必更新缓存。
将值存储在数据库中将允许您缓存多个请求的计算。另一种选择是将值存储在内存缓存中。您可以为该值创建一个特殊的访问器和设置器，以检查内存缓存并在需要时对其进行更新。
另一个想法：是否存在您将更改其中一个模型中的值并需要在保存之前更新计算的情况？在这种情况下，每当您更新模型中的任何计算值时，您都需要弄脏缓存值，而不是使用 before_save。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-13T16:57:22.640

我发现有时有充分的理由对数据库中的信息进行非规范化。我正在开发的应用程序中有类似的东西，只要集合发生变化，我就会重新计算该字段。

It doesn't use a cache and it stores the most up to date figure in the database.

# ruby - 如何从 Ruby 中的哈希数组中获取唯一元素？

> ID：181091
> 
> 赞同：25
> 
> 时间：2008-10-08T01:40:53.957
> 
> 标签：ruby, arrays, hash, unique

我有一个哈希数组，我想要其中的唯一值。打电话`Array.uniq`给我的不是我所期望的。

```
a = [{:a => 1},{:a => 2}, {:a => 1}]
a.uniq # => [{:a => 1}, {:a => 2}, {:a => 1}] 
```

我期望的地方：

```
[{:a => 1}, {:a => 2}] 
```

在网上四处搜索，我没有想出一个我满意的解决方案。人们建议重新定义`Hash.eql?`and `Hash.hash`，因为那`Array.uniq`是查询的内容。

编辑：我在现实世界中遇到这个问题时，哈希值稍微复杂一些。它们是具有多个字段的解析 JSON 的结果，其中一些值也是哈希值。我有一系列想要过滤掉唯一值的结果。

我不喜欢重新定义`Hash.eql?`和`Hash.hash`解决方案，因为我要么必须`Hash`全局重新定义，要么为数组中的每个条目重新定义它。更改`Hash`每个条目的定义会很麻烦，特别是因为每个条目内部可能有嵌套的哈希值。

全球变化`Hash`具有一定的潜力，特别是如果它是暂时完成的。我想构建另一个类或辅助函数来包装保存旧定义并恢复它们，但我认为这增加了比实际需要更多的复杂性。

使用`inject`似乎是重新定义`Hash`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-10-08T01:44:15.353

我可以通过调用得到我想要的`inject`

```
a = [{:a => 1},{:a => 2}, {:a => 1}]
a.inject([]) { |result,h| result << h unless result.include?(h); result } 
```

这将返回：

```
[{:a=>1}, {:a=>2}] 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2011-04-11T19:27:57.213

Ruby 1.8.7+ 将返回您所期望的：

```
[{:a=>1}, {:a=>2}, {:a=>1}].uniq
#=> [{:a=>1}, {:a=>2}] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-07T13:18:24.247

我也遇到过类似的情况，但是哈希有键。我使用了排序方法。

我的意思是说：

你有一个数组：

```
[{:x=>1},{:x=>2},{:x=>3},{:x=>2},{:x=>1}] 
```

你对它进行排序 ( `#sort_by {|t| t[:x]}`) 并得到这个：

```
[{:x=>1}, {:x=>1}, {:x=>2}, {:x=>2}, {:x=>3}] 
```

现在 Aaaron Hinni 对答案进行了一些修改：

```
your_array.inject([]) do |result,item| 
  result << item if !result.last||result.last[:x]!=item[:x]
  result
end 
```

我也试过：

```
test.inject([]) {|r,h| r<<h unless r.find {|t| t[:x]==h[:x]}; r}.sort_by {|t| t[:x]} 
```

但它很慢。这是我的基准：

```
test=[]
1000.times {test<<{:x=>rand}}

Benchmark.bmbm do |bm|
  bm.report("sorting: ") do
    test.sort_by {|t| t[:x]}.inject([]) {|r,h| r<<h if !r.last||r.last[:x]!=h[:x]; r}
  end
  bm.report("inject: ") {test.inject([]) {|r,h| r<<h unless r.find {|t| t[:x]==h[:x]}; r}.sort_by {|t| t[:x]} }
end 
```

结果：

```
Rehearsal ---------------------------------------------
sorting:    0.010000   0.000000   0.010000 (  0.005633)
inject:     0.470000   0.140000   0.610000 (  0.621973)
------------------------------------ total: 0.620000sec

                user     system      total        real
sorting:    0.010000   0.000000   0.010000 (  0.003839)
inject:     0.480000   0.130000   0.610000 (  0.612438) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-08T16:35:11.250

假设您的哈希始终是单个键值对，这将起作用：

```
a.map {|h| h.to_a[0]}.uniq.map {|k,v| {k => v}} 
```

Hash.to_a 创建一个键值数组的数组，所以第一个映射让你：

```
[[:a, 1], [:a, 2], [:a, 1]] 
```

数组上的 uniq 做你想做的事，给你：

```
[[:a, 1], [:a, 2]] 
```

然后第二张地图再次将它们重新组合为散列。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-05T08:49:26.047

您可以使用（在 ruby​​ 1.9.3 中测试），

```
[{a: 1},{a: 2},{a:1}].uniq => [{a:1},{a: 2}]
[{a: 1,b: 2},{a: 2, b: 2},{a: 1, b: 3}].uniq_by {|v| v[:a]} => [{a: 1,b: 2},{a: 2, b: 2}] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T04:52:36.330

[您给出的答案与此处](http://mikeburnscoder.wordpress.com/2008/01/18/uniquify-an-array-of-hashes-in-ruby/)讨论的答案相似。它覆盖了要出现在数组中的散列上的`hash`and方法，然后使行为正确。`eql?``uniq`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-06T10:29:41.330

在谷歌上找到 [http://mikeburnscoder.wordpress.com/2008/01/18/uniquify-an-array-of-hashes-in-ruby/](http://mikeburnscoder.wordpress.com/2008/01/18/uniquify-an-array-of-hashes-in-ruby/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-07T16:49:27.273

数组上的 pipe 方法（自 1.8.6 起可用）执行集合并集（返回数组），因此以下是获取任何数组的唯一元素的另一种可能方法`a`：

`[] | a`

# html - 从 HTML 中提取文本的正则表达式

> ID：181095
> 
> 赞同：20
> 
> 时间：2008-10-08T01:43:39.270
> 
> 标签：html, regex, html-content-extraction, text-extraction

我想从一般 HTML 页面中提取所有文本（显示或不显示）。

我想**删除**

*   任何 HTML 标签
*   任何 javascript
*   任何 CSS 样式

是否有一个正则表达式（一个或多个）可以实现这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-08T01:53:36.973

删除 javascript 和 CSS：

```
<(script|style).*?</\1> 
```

删除标签

```
<.*?> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-10-08T02:01:41.077

您无法真正使用正则表达式解析 HTML。这太复杂了。RE 根本无法`<![CDATA[`正确处理部分。此外，某些常见的 HTML 内容（例如`&lt;text>`，在浏览器中可以作为正确的文本工作），但可能会使天真的 RE 感到困惑。

使用适当的 HTML 解析器，您会更快乐、更成功。Python 人经常使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)来解析 HTML 并去除标签和脚本。

* * *

此外，浏览器在设计上允许格式错误的 HTML。因此，您经常会发现自己试图解析显然不正确的 HTML，但在浏览器中却可以正常工作。

您可能能够使用 RE 解析错误的 HTML。它所需要的只是耐心和努力工作。但是使用别人的解析器通常更简单。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-26T17:04:23.540

需要一个正则表达式解决方案（**在 php 中**），它返回的纯文本与 PHPSimpleDOM 一样好（或更好），只是速度快得多。这是我想出的解决方案：

```
function plaintext($html)
{
    // remove comments and any content found in the the comment area (strip_tags only removes the actual tags).
    $plaintext = preg_replace('#<!--.*?-->#s', '', $html);

    // put a space between list items (strip_tags just removes the tags).
    $plaintext = preg_replace('#</li>#', ' </li>', $plaintext);

    // remove all script and style tags
    $plaintext = preg_replace('#<(script|style)\b[^>]*>(.*?)</(script|style)>#is', "", $plaintext);

    // remove br tags (missed by strip_tags)
    $plaintext = preg_replace("#<br[^>]*?>#", " ", $plaintext);

    // remove all remaining html
    $plaintext = strip_tags($plaintext);

    return $plaintext;
} 
```

当我在一些复杂的网站（论坛似乎包含一些更难解析的 html）上测试这个时，这个方法返回了与 PHPSimpleDOM 纯文本相同的结果，只是快得多。它还正确处理了列表项（li 标签），而 PHPSimpleDOM 没有。

## 至于速度：

*   SimpleDom：0.03248 秒。
*   正则表达式：0.00087 秒。

***快 37 倍！***

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-08T01:53:11.373

考虑用正则表达式来做这件事是令人生畏的。你考虑过 XSLT 吗？提取 XHTML 文档中所有文本节点（减去脚本和样式内容）的 XPath 表达式将是：

```
//body//text()[not(ancestor::script)][not(ancestor::style)]

```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-08T01:51:37.210

使用 perl 语法来定义正则表达式，开始可能是：

```
!<body.*?>(.*)</body>!smi 
```

然后将以下替换应用于该组的结果：

```
!<script.*?</script>!!smi
!<[^>]+/[ \t]*>!!smi
!</?([a-z]+).*?>!!smi
/<!--.*?-->//smi 
```

这当然不会很好地将内容格式化为文本文件，但它会删除所有 HTML（大多数情况下，它可能无法正常工作）。一个更好的主意是使用 XML 解析器以您使用的任何语言来正确解析 HTML 并从中提取文本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-04-21T19:04:39.117

简单 HTML 的最简单方法（Python 中的示例）：

```
text = "<p>This is my> <strong>example</strong>HTML,<br /> containing tags</p>"
import re
" ".join([t.strip() for t in re.findall(r"<[^>]+>|[^<]+",text) if not '<' in t]) 
```

返回这个：

```
'This is my> example HTML, containing tags' 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-01-09T10:14:27.000

这是一个删除最复杂的html标签的功能。

```
function strip_html_tags( $text ) 
{

$text = preg_replace(
    array(
        // Remove invisible content
        '@<head[^>]*?>.*?</head>@siu',
        '@<style[^>]*?>.*?</style>@siu',
        '@<script[^>]*?.*?</script>@siu',
        '@<object[^>]*?.*?</object>@siu',
        '@<embed[^>]*?.*?</embed>@siu',
        '@<applet[^>]*?.*?</applet>@siu',
        '@<noframes[^>]*?.*?</noframes>@siu',
        '@<noscript[^>]*?.*?</noscript>@siu',
        '@<noembed[^>]*?.*?</noembed>@siu',

        // Add line breaks before & after blocks
        '@<((br)|(hr))@iu',
        '@</?((address)|(blockquote)|(center)|(del))@iu',
        '@</?((div)|(h[1-9])|(ins)|(isindex)|(p)|(pre))@iu',
        '@</?((dir)|(dl)|(dt)|(dd)|(li)|(menu)|(ol)|(ul))@iu',
        '@</?((table)|(th)|(td)|(caption))@iu',
        '@</?((form)|(button)|(fieldset)|(legend)|(input))@iu',
        '@</?((label)|(select)|(optgroup)|(option)|(textarea))@iu',
        '@</?((frameset)|(frame)|(iframe))@iu',
    ),
    array(
        ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',
        "\n\$0", "\n\$0", "\n\$0", "\n\$0", "\n\$0", "\n\$0",
        "\n\$0", "\n\$0",
    ),
    $text );

// Remove all remaining tags and comments and return.
return strip_tags( $text );
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-08T01:51:56.743

如果您使用的是 PHP，请尝试 SourceForge 上提供的 Simple HTML DOM。

否则，谷歌 html2text，你会发现不同语言的各种实现，它们基本上使用一系列正则表达式来吸出所有标记。这里要小心，因为有时会留下没有结尾的标签，以及特殊字符，例如 &（即 &）。

另外，请注意注释和 Javascript，因为我发现处理正则表达式特别烦人，以及为什么我通常更喜欢让免费的解析器为我完成所有工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-08T02:38:20.190

我相信你能做到

```
document.body.innerText 
```

它将返回文档中所有文本节点的内容，无论是否可见。

[编辑（olliej）：*叹息*没关系，这只适用于 Safari 和 IE，我也懒得每晚下载一个 firefox 来查看它是否存在于主干中：-/]

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-10-01T13:59:05.967

你不能只使用 C# 提供的 WebBrowser 控件吗？

```
 System.Windows.Forms.WebBrowser wc = new System.Windows.Forms.WebBrowser();
        wc.DocumentText = "<html><body>blah blah<b>foo</b></body></html>";
        System.Windows.Forms.HtmlDocument h = wc.Document;
        Console.WriteLine(h.Body.InnerText); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-02-03T05:54:50.107

```
string decode = System.Web.HttpUtility.HtmlDecode(your_htmlfile.html);
                Regex objRegExp = new Regex("<(.|\n)+?>");
                string replace = objRegExp.Replace(g, "");
                replace = replace.Replace(k, string.Empty);
                replace.Trim("\t\r\n ".ToCharArray());

then take a label and do "label.text=replace;" see on label out put 
```

.

# asp.net - 有没有办法将 onclick 事件添加到 ASP.NET 标签服务器控件？

> ID：181097
> 
> 赞同：32
> 
> 时间：2008-10-08T01:45:21.497
> 
> 标签：asp.net, controls

我想做这样的事情：

```
<asp:Label ID="lblMyLabel" onclick="lblMyLabel_Click" runat="server">My Label</asp:Label> 
```

我知道在 Javascript 中我可以做到：

```
<span onclick="foo();">My Label</span> 
```

所以我想知道为什么我不能用 Label 对象做到这一点。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-10-08T01:53:02.467

您可以使用属性添加 onclick 客户端回调。

我不知道您可以在跨度标签上执行此操作，但如果它有效，您可以通过添加“onclick”`lblMyLabel.Attributes.Add("onclick", "foo();");`

但`foo();`需要是客户端的javascript函数。

`System.Web.UI.WebControls.Label`没有 OnClick 服务器事件。如果您想使用上面的示例进行服务器回调，您可以考虑使用 AJAX。

你也可以`LinkButton`像其他人说的那样使用。如果只是你关心的下划线，你可以使用 CSS 使它看起来不像一个链接。

ASPX：

```
<asp:LinkButton ID="LinkButton1" runat="server" 
    CssClass="imjusttext" OnClick="LinkButton1_Click">
LinkButton
</asp:LinkButton> 
```

CSS：

```
a.imjusttext{ color: #000000; text-decoration: none; }
a.imjusttext:hover { text-decoration: none; } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-08T02:03:39.183

您的问题没有指定您是要在服务器（VB 或 c#）还是客户端（javascript）上引发 click 事件。如果您正在寻找服务器端事件，您应该使用带有 css 的链接按钮链接显示为标签。然后，您可以使用链接按钮的服务器端单击事件。如果您正在寻找客户端单击事件 - 只需将其键入您的服务器控件标记
`asp:label id="MyLabel" runat="server" onclick="javascript:alert('hello');" Text="Click Me";`
ASP.NET 将在生成的 html 标记中发出附加属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-08T01:55:06.440

您可以在 page_load 中的代码中执行此操作，例如：

```
void Page_Load(object sender, EventArgs e) 
{
      lblMyLabel.Attributes.Add("onclick",
           "javascript:alert('ALERT ALERT!!!')");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T01:57:05.593

如果你想要一个 onclick 事件，为什么不使用一个链接按钮，它有`onclientclick`事件：

```
<asp:linkbutton id="lblMyLink" onclientclick="lblMyLink_Click" runat="server">My Label</asp:linkbutton> 
```

您可以使用 CSS 使链接看起来像您想要的任何内容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T01:55:08.187

我认为您可以，但它是客户端 onclick 处理程序，而不是服务器端。它会抱怨该属性不受支持（或某些此类），但我认为它可以正确呈现。如果你想要一个服务器端处理程序，我认为你需要做一个 LinkBut​​ton。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T01:55:33.990

据我所知，这是不可能的。标签控件发出`<span`> 元素，该元素在服务器端是“不可点击的”。您需要将 Label 控件替换为 LinkBut​​ton。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T02:13:09.553

另一种技巧是使用带有 style="display:none;" 的隐藏链接或按钮 并从跨度中的 javascript 函数触发对服务器控件的单击。

像这样的东西：

```
<asp:linkbutton id="lblMyLink" onClick="lblMyLink_Click" runat="server" style="display:none;">My Link</asp:linkbutton>
<span onclick="document.getElementById('lblMyLink').click();">My Label</span> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-08T02:15:26.010

您总是可以使用.net 的标准回发 javascript 推出自己的控件来生成跨度，但如前所述，使用带有 CSS 类的链接标签会更容易

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-03T17:54:34.487

只是为了解决这个问题，我在我的 .aspx 页面中使用了一个标签，如果数据集中有子记录，该标签只会在我的 DataList Item 模板中可见。

我在标签上添加了一个 onclick 函数：

moreOptionsLabel.Attributes.Add("onclick", string.Format("toggle_visibility('{0}')", div.ClientID));

在我的 .cs 文件中。它现在将控制 .aspx 页面中的 div 标记来显示或隐藏记录 - 因为 onclick 指向客户端 javascript 函数。注意 div.ClientID，这使得它可以在数据列表中使用。

如上所述 - span 标签确实可以使用“onclick”。并且由于标签控件在页面请求之后呈现为跨度，因此使用 Addtribute.Add("onclick".... 确实有效。

结果是显示/隐藏数据的功能而不进行回发。如果您使用 LinkBut​​ton 或类似控件 - 回发和页面重新加载是不可避免的 - 除非您想了解一些 Ajax 内容。

注意：除非您使用下划线和手形光标对其进行样式设置，否则 span 标签看起来不可点击。

这个想法的功劳来自 Will Asrari 在[http://www.willasrari.com/blog/display-nested-repeaters-and-gridviews-asynchronously/000292.aspx](http://www.willasrari.com/blog/display-nested-repeaters-and-gridviews-asynchronously/000292.aspx)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-09-09T06:29:16.473

您需要创建一个从标签和 onclick 事件处理程序继承的类对象，这将是您自己的方法并将您的对象用作自定义标签。

# java - JUnit TestCase 对象实例化

> ID：181106
> 
> 赞同：9
> 
> 时间：2008-10-08T01:53:58.097
> 
> 标签：java, junit, instantiation, testcase

是否使用新的（或不同的）`TestCase`对象实例来运行 JUnit 测试用例中的每个测试方法？或者一个实例被重复用于所有测试？

```
public class MyTest extends TestCase {
  public void testSomething() { ... }
  public void testSomethingElse() { ... }
} 
```

运行此测试时，创建了多少类实例`MyTest`？

如果可能，请提供指向文档或源代码的链接，我可以在其中验证行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T01:55:43.380

是的，创建了一个单独的实例。

在运行该测试时，会创建 2 个 MyTest 实例。

如果您想要不同的行为，一种选择是使用名为 TestNG ( [http://testng.org/doc/](http://testng.org/doc/) ) 的类似工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T02:58:50.367

我在 JUnit 文档中找不到关于您的问题的明确答案，但正如 anjanb 所写，其意图是每个测试都独立于其他测试，因此可以为每个要运行的测试创建一个新的 TestCase 实例。

如果您希望在测试类中的所有测试用例之间共享昂贵的测试设置（“ *fixtures ”），则可以在静态方法上使用***@BeforeClass**注释来实现此结果：[http://junit.sourceforge。净/javadoc_40/org/junit/BeforeClass.html](http://junit.sourceforge.net/javadoc_40/org/junit/BeforeClass.html)。但是请注意，仍然可以为每个测试创建一个新实例，但这不会影响您的 @BeforeTest 方法已初始化的静态数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-08T04:12:41.997

每次测试运行都有一个实例。尝试

```
public class MyTest extends TestCase {
  public MyTest() { System.out.println("MyTest Constructor");
  public void setUp() { System.out.println("MyTest setUp");
  public void tearDown() { System.out.println("MyTest tearDown");
  public void testSomething() { System.out.println("MyTest testSomething");
  public void testSomethingElse() { System.out.println("MyTest testSomethingElse");
} 
```

源代码（包括较新版本的源代码-您和我的示例是 Junit 3）位于[http://www.junit.org](http://www.junit.org)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T01:59:13.157

如果您之所以问这个问题是因为您担心数据在构造函数中被初始化和重新初始化，请注意，初始化测试用例数据的规定方法是专门通过 setUp() 和 tearDown()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-08T14:38:26.643

当然是。我发现由于这种设计，我存储在实例变量中的数据无法在测试之间访问。

# sql - 加密数据库查询

> ID：181130
> 
> 赞同：3
> 
> 时间：2008-10-08T02:17:34.787
> 
> 标签：sql, database, encryption, theory

我刚刚发现了 Stack Overflow，我只是在检查是否有关于我与一些朋友在项目中遇到的约束的想法，尽管这更像是我一直试图找到的一个理论问题一段时间的答案。

我对密码学的了解不多，但如果我不够清楚，我会尝试编辑/评论以澄清任何问题。

简而言之，环境是这样的：

*   前端用作访问加密/解密密钥而后端仅用于存储和查询的应用程序。

*   拥有一个您无法访问几个字段的数据库，例如让我们说“地址”，它像往常一样是 text/varchar。

*   您无权访问用于解密信息的密钥，并且所有信息到达已加密的数据库。

主要问题是这样的，如何始终如一地对数据库进行查询，不可能做“像'%F§YU/'~#JKSks23%'这样的地址”之类的东西。（如果有人对此有答案，请随意拍摄）。

但是可以`where address='±!NNsj3~^º-:'`吗？或者它也会完全吃掉数据库？

另一个可能适用的限制是前端没有太多可用的处理能力，因此加密/解密信息已经开始将其推向极限。（这样说只是为了避免诸如“将表的连接导出到前端并在那里查询”之类的回复。）

有人可以指出我继续思考的方向吗？

* * *

非常感谢凌晨 4 点这么快的回复，第一次使用我对这个社区印象深刻。（或者也许我只是针对不同的时区）

只是提供一些信息：

主要问题是部分匹配。大多数数据库中的一项强制性要求是允许部分匹配。主要限制实际上**是不允许数据库所有者查看数据库内部的信息**。在过去的 10 分钟里，我想出了一个可能的解决方案，它再次扩展到可能的数据库问题，我将在这里添加：

允许半部分匹配的可能解决方案：

*   密码+用户的几个公共字段实际上是加密的关键。对于身份验证，想法是加密一个静态值并在数据库中进行比较。
*   创建一组新的表，其中信息以解析的方式存储，这意味着：“4th Street”将变成 2 个加密行（一个用于“4th”，另一个用于“Street”）。这已经允许半部分匹配，因为已经可以在单独的表上执行搜索。

新问题：

*   这可能会再次占用数据库服务器，还是有人认为这是解决部分匹配问题的可行解决方案？

*Post Scriptum：我不接受 Cade Roux 的回答，只是为了进一步讨论，特别是对新问题的可能答案。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T02:30:02.517

您可以按照您描述的方式进行操作-例如，有效地查询哈希，但是具有该要求的系统并不多，因为此时安全要求会干扰系统可用的其他要求-即没有部分匹配，因为加密规则了这一点。压缩也是同样的问题。多年前，在一个非常小的环境中，我必须先压缩数据，然后才能将其放入数据格式中。当然，这些字段不容易被搜索到。

在更典型的应用程序中，最终，密钥将可供链中的某个人使用 - 可能是 Web 服务器。

对于最终用户流量，SSL 保护该管道。一些网络交换机可以在 Web 服务器和数据库之间保护它，并且在数据库中存储加密数据是可以的，但你不会像那样查询加密数据。

一旦数据显示出来，它就在机器上，因此任何通用计算设备都可以在此时被绕过，并且您在应用程序之外拥有真正发挥作用的外围防御。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T04:25:53.157

为什么不加密保存数据库表的磁盘，加密数据库连接，让数据库正常运行呢？

[我不太了解需要这种偏执程度的背景/限制]

编辑：“法律约束”是吗？我希望你没有参与任何违法的事情，我不想成为一个不经意的附属品...... ;-)

如果 - 咳咳 - 法律约束 - 强制这个解决方案，那么这就是所有要做的 - 没有 LIKE 匹配，并且如果客户端机器无法处理它，则响应缓慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-14T14:40:09.657

几个月前我遇到了同样的问题：整个数据库（索引除外）被加密，部分匹配的问题被提出。

我在互联网上搜索寻找解决方案，但似乎对此没有什么可做的，而是一个“解决方法”。

我最终采用的解决方案是：

1.  创建一个临时表，其中包含正在对其执行查询、解密的字段的数据以及作为表的主键的另一个字段（显然，该字段不必像纯文本那样解密）。

2.  对该临时表执行部分匹配并检索标识符。

3.  查询这些标识符的真实表并返回结果。

4.  删除临时表。

我知道这会带来不小的开销，但是当数据库必须完全加密时，我还没有找到另一种方法来执行此任务。

根据每个特定情况，您可以过滤插入临时表的行数，而不会丢失结果数据（只考虑那些属于执行查询的用户的行，等等......） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T02:31:40.623

你想使用 md5 散列。基本上，它会将您的字符串转换为无法复制的哈希值。然后，您可以稍后使用它来验证事物。例如：

```
$salt = "123-=asd";
$address = "3412 g ave";

$sql = "INSERT INTO addresses (address) VALUES ('" . md5($salt . $address) . "')";
mysql_query($sql); 
```

然后，在将来验证地址：

```
$salt = "123-=asd";
$address = "3412 g ave";

$sql = "SELECT address FROM addresses WHERE address = '" . md5($salt . $address) . "'";
$res = mysql_query($sql);
if (mysql_fetch_row($res))
    // exists
else
    // does not 
```

现在它在数据库端被加密，所以没有人能找到它——即使他们查看了你的源代码。但是，找到盐将帮助他们解密它。

[http://en.wikipedia.org/wiki/MD5](http://en.wikipedia.org/wiki/MD5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T02:36:39.663

如果您需要存储稍后要查询的敏感数据，我建议您以纯文本形式存储它，尽可能限制对这些表的访问。

如果您不能这样做，并且您不想在前端产生开销，您可以在后端制作一个组件，在服务器中运行，以处理加密数据。

查询加密数据？如果您使用的是良好的加密算法，我无法想象如何做到这一点。

# javascript - 当 window.location=self.location 不起作用时通过 AJAX 重新加载页面

> ID：181132
> 
> 赞同：9
> 
> 时间：2008-10-08T02:21:14.810
> 
> 标签：javascript, browser, caching, reload

在我的主页上，我得到：

```
<ul id="login">
  <li> <a id="loginswitch" href="./login-page">log-in</a> | </li>
  <li> <a id="signupswitch" href="./signup-page">sign-up</a> </li>
</ul> 
```

通过 MooTools，我通过 id 获取这些锚元素，因此一旦单击它们，就会在它们下方弹出一个华丽的 div，其中包含登录或注册表单（当然还有停止事件传播的方法）并在填充时AJAX 调用启动的字段 - 这应该创建一个会话并重新加载页面，以便用户可以看到他现在已登录并出现用户级控件等。

ajax 调用由 MooTools AJAX 类发起，`evalScripts`选项设置为 true。AJAX 页面返回脚本代码：

```
<script type="text/javascript">window.location = self.location;</script> 
```

该系统运行良好 - 现在我想知道为什么如果我将锚的`href`值更改为`href="#"`我的脚本将不再工作？

跟窗户有关系吗？

当我点击一个链接时，它是否改变了它的属性，或者即使事件的传播停止了？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-13T03:32:19.817

```
window.location = self.location; 
```

**此 JavaScript 正在执行**。

当它执行时，浏览器被告知`window.location`用一个新值替换 的值。 **并非所有浏览器**都会在这里做出相同的反应。有些可能会按您的预期工作，但其他人会变得聪明并比较这两个值。 **浏览器知道**它在哪个页面上，并且它知道您只是要求它转到同一页面。

**浏览器缓存**

**浏览器甚至在缓存**中有您当前页面的副本。它可以与服务器对话并询问它在缓存中的页面是否仍然有效。如果缓存有效，它可能决定不强制重新加载页面。在幕后，这发生在 HTTP 标头中。浏览器和服务器可以通过多种方式通过 HTTP 进行通信。在这种情况下，您的浏览器会向服务器发送一个快速请求，内容如下：

```
GET /stackoverflow.com/posts/196643/index.html
HTTP/1.1
Host: www.stackoverflow.com
User-Agent: Mozilla/5.0
If-Modified-Since: Sun, 12 Oct 2008 20:41:31 GMT 
```

这称为**条件 GET 请求**。通过说*If-Modified-Since*，您的浏览器会说，“给我那个文件，但前提是它自从我上次看到它以来已经被修改过。”

长话短说，您没有明确告诉浏览器重新加载页面。

**您可以这样做：**

```
location.reload( true ); 
```

“true”是一个**可选参数**，用于**强制重新加载**。浏览器甚至不会查看缓存。它会照你说的做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T02:25:40.513

转到页面上的锚点——这`#`意味着——不需要重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-19T22:48:06.283

如果他们在工作中交给我这个特殊的任务，我会把它踢回设计。除非我们谈论的是安全页面或 OpenID 登录，否则您不应弹出登录或登录表单。用户需要学会在他们的页面顶部寻找那个 https:，如果他们没有看到它就永远不要登录。

# regex - 搜索然后提取

> ID：181136
> 
> 赞同：0
> 
> 时间：2008-10-08T02:25:20.123
> 
> 标签：regex, perl, parsing

我有一个包含多条记录的文本文件。我想搜索姓名和日期，例如，如果我输入`JULIUS CESAR`姓名，那么`JULIUS`将提取有关的全部数据。如果我只想提取信息怎么办？

```
Record number: 1
Date: 08-Oct-08
Time: 23:45:01
Name: JULIUS CESAR
Address: BAGUIO CITY, Philippines
Information:
I lived in Peza Loakan, Bagiou City
A Computer Engineering student
An OJT at TIPI.
23 years old.

Record number: 2
Date: 09-Oct-08
Time: 23:45:01
Name: JOHN Castro
Address: BAGUIO CITY, Philippines
Information:
I lived in Peza Loakan, Bagiou City
A Electronics Comm. Engineering Student at SLU.
An OJT at TIPI.
My Hobby is Programming.

Record number: 3
Date: 08-Oct-08
Time: 23:45:01
Name: CESAR JOSE
Address: BAGUIO CITY, Philippines
Information:
Hi,,
I lived Manila City
A Computer Engineering student
Working at TIPI. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T02:38:51.093

如果每个条目只有一行，则可以使用正则表达式，例如：

```
$name = "JULIUS CESAR"; 
```

然后使用：

```
/$name/i 
```

测试每一行是否与“JULIUS CESAR”有关。然后您只需使用以下正则表达式来提取信息（一旦找到该行）：

```
/Record number: (\d+) Date: (\d+)-(\w+)-(\d+) Time: (\d+):(\d+):(\d+) Name: $name Address: ([\w\s]+), ([\w\s]+?) Information: (.+?)$/i 
```

$1 = 记录号

$2-$4 = 日期

5-7 美元 = 时间

$6 = 地址

7 美元 = 评论

我会写一个代码示例，但我的 perl 生锈了。我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-10-08T02:50:36.360

在 PHP 中，您可以运行 SQL 选择语句，例如：

“选择 *`name`像 'JULIUS%';”

PHP 有一些原生方面，您可以在关联数组中获取所有结果。我很确定它是按行顺序排列的。然后你可以做这样的事情：

回声内爆（“”，$whole_row）；

希望这就是你要找的！

# winforms - WinForms：加载本地化帮助 (chm) 文件

> ID：181147
> 
> 赞同：4
> 
> 时间：2008-10-08T02:32:38.970
> 
> 标签：winforms, localization, chm

加载特定于语言环境（即翻译）的编译帮助文件（.chm）的最佳方式是什么？我们的安装会将它们与包含资源的附属程序集一起部署。我想重新使用 .NET 框架用于加载附属程序集的相同探测规则，并且我绝对想避免编写自己的搜索算法，因为例如，我必须处理特定情况，例如作为“zh-CN/zh-Hans/zh-CHS”。

我找不到任何 System.Windows.Forms.Help 类表明您可以提供 CultureInfo 对象来指定特定文化。还有其他人遇到过这个吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T16:19:09.457

顺便说一句，我建议不要将 CHM 文件与附属程序集并排部署，而是将 CHM 作为嵌入式资源包含在附属程序集本身中。请记住，程序集实际上可以包含在多个文件中。使装配和装配的是清单。

通过这样做，您可以以编程方式请求当前语言环境的资源，让框架告诉您 URL，然后将该文件位置提供给 Help 类。

# asp.net - 如何以编程方式在 GridView 中插入一行？

> ID：181158
> 
> 赞同：5
> 
> 时间：2008-10-08T02:42:33.707
> 
> 标签：asp.net, gridview, databound

我在 asp.net 2.0 中有一个带有行选择链接的数据绑定 GridView。选择行时，我希望以编程方式在所选行下方添加表行，以嵌套另一个Grid等。

我正在为一个客户和一篇文章研究这个，我认为我的 google-fu 今晚并不强。有什么建议么？

编辑：我实际上有一个可行的解决方案，但 Visual Studio 不知何故被搞砸了；关闭并重新打开 VS 并重建一切解决了问题;-)

我的解决方案发布在下面，如果可能的话，请告诉我如何使它变得更好。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T02:52:08.337

我想我想通了。这是一个似乎有效的解决方案。可以使用用户控件对其进行改进，但这是它的要点：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow && 
        (e.Row.RowState & DataControlRowState.Selected) > 0)
    {
        Table tbl = (Table)e.Row.Parent;
        GridViewRow tr = new GridViewRow(e.Row.RowIndex + 1, -1,
            DataControlRowType.EmptyDataRow, DataControlRowState.Normal);
        TableCell tc = new TableCell();
        tc.ColumnSpan = GridView1.Columns.Count;
        tc.Controls.Add(
            makeChildGrid(Convert.ToInt32(
                ((DataRowView)e.Row.DataItem)["ROW_ID_FIELD"])));
        tr.Cells.Add(tc);
        tbl.Rows.Add(tr);
    }
}

protected GridView makeChildGrid(int id)
{
    GridView gv = new GridView();
    SqlDataSource sqlds = new SqlDataSource();
    sqlds.DataSourceMode = SqlDataSourceMode.DataSet;
    sqlds.ConnectionString = SqlDataSource1.ConnectionString;
    sqlds.SelectCommand = "SELECT * from MY_TABLE_NAME " +
        "WHERE KEY_FIELD = " + id.ToString();
    DataView dv = (DataView)sqlds.Select(DataSourceSelectArguments.Empty);
    gv.DataSource = dv;
    gv.DataBind();    //not sure this is necessary...?
    return gv;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-24T05:27:31.957

感谢您分享此代码。

我正在尝试做同样的事情（创建嵌套的gridview），但实际上，您不必自己创建gridview。相反，您可以将控件包装在标签中。我在这里看到了一个例子[http://www.codeproject.com/KB/aspnet/EditNestedGridView.aspx?msg=3089755#xx3089755xx](http://www.codeproject.com/KB/aspnet/EditNestedGridView.aspx?msg=3089755#xx3089755xx)

您会看到开发人员仅通过将第二个 gridview 控件包装在标签中来嵌套 gv 控件。

如果您可以通过代码完成他正在做的事情，那将更有效率。您不需要显示所有选定的字段！此外，您可以在视觉上将一些控件添加到您的子网格视图中。

我已将您的代码转换为 vb 并且运行良好。

谢谢

# php - 在 PHP 中生成唯一 ID

> ID：181159
> 
> 赞同：15
> 
> 时间：2008-10-08T02:43:00.383
> 
> 标签：php, guid, unique, uuid, identifier

我正在尝试在 php 中生成一个唯一 ID，以便将用户上传的内容存储在 FS 上而不会发生冲突。我正在使用 php，目前这个小片段负责生成 UID：

```
$id = tempnam (".", "");
unlink($id);
$id = substr($id, 2); 
```

这段代码很可怕：它在 FS 上创建一个临时文件并将其删除，只保留生成字符串的相关唯一部分。

有没有更好的方法来做到这一点，最好没有任何外部依赖？

非常感谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-08T02:45:25.417

```
string uniqid ([ string $prefix [, bool $more_entropy ]] ) 
```

根据当前时间（以微秒为单位）获取带前缀的唯一标识符。

```
USAGE: $id = uniqid(rand(), true); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-01-25T21:45:40.993

由于 uniqid() 和 rand() 都是基于当前时间的函数，因此 rand() 几乎不增加熵，因为时间在各自调用之间只会发生微小的变化。

只要您使用该`more_entropy`选项，就永远不会在单个服务器中发生冲突。如果您使用集群，请确保包含服务器之间不同的前缀。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-08T02:44:45.747

uniqid() 是您在大多数实际情况下要寻找的。

您可以通过在其后添加一个大随机数来使其更加“独特”。

# file - 用于文档检索的签名文件

> ID：181164
> 
> 赞同：2
> 
> 时间：2008-10-08T02:46:12.530
> 
> 标签：file, document, signature, information-retrieval

我想知道您是否知道在哪里可以找到有关如何为文档检索构建签名文件的信息。
你知道是否有一些我可以使用或查看的代码吗？
我必须在 linux 平台下用 C++ 创建一个签名文件。

**更新：对不起，我很欣赏帮助，但我指的签名文件不是一种验证文档的方式，而是一种索引文档的方式。

[http://en.wikipedia.org/wiki/Signature_files](http://en.wikipedia.org/wiki/Signature_files)** 任何帮助将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T04:15:10.243

首先，让我们澄清一些术语。

数字签名旨在等同于手写签名（有关更好的描述和概述，请参阅[http://en.wikipedia.org/wiki/Digital_signature](http://en.wikipedia.org/wiki/Digital_signature)）。

将数字签名应用于文档时，您可以获得更高级别的文档真实性保证（您可以更好地了解文档是否是伪造的）。

Adam 和 Robert 的回答都提到了验证文档完整性的方法（即文档未更改）。虽然数字签名也提供了这一点，但校验和（哈希）不提供真实性。

因此，我们确定您的“签名文件”的需求非常重要。我将假设您在谈论数字签名，而不是校验和，因为其他答案涉及校验和。

您将要编写一个 PKCS#7 分离签名（行话 - 不包含数据的标准格式签名，因此可以单独存储）。为了实现这一点，我建议您使用标准库，例如 OpenSSL（可移植）。

*   有关 PKCS#7 的更多信息，请参阅[http://www.rsa.com/rsalabs/node.asp?id=2129](http://www.rsa.com/rsalabs/node.asp?id=2129)
*   有关 OpenSSL 的更多信息，请参阅[http://www.openssl.org/](http://www.openssl.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T02:53:30.860

[md5sum](http://en.wikipedia.org/wiki/Md5sum)可能是您正在寻找的。如果您使用 Google 搜索，可以使用生成 md5 签名的源代码。

来自维基百科：

> 由于几乎对文件的任何更改都会导致其 MD5 哈希值也发生更改，因此 MD5 哈希值通常用于验证文件的完整性（即验证文件没有因文件传输、磁盘错误、干预， ETC。）。md5sum 程序默认安装在大多数 Unix、Linux 和类 Unix 操作系统或兼容层中。BSD 变体（包括 Mac OS X）有一个类似的实用程序，称为 md5。Microsoft Windows 的版本确实存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T03:01:24.403

与 Adam 的建议类似，如果您正在处理大量文档，那么检查 SHA1 和 sha1sum 可能是个好主意。更少的冲突，以及更高级的加密。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-27T00:16:53.380

您可能会查看[Semantic Hacker](http://www.semantichacker.com/)或[Yahoo Term Extraction](http://developer.yahoo.com/search/content/V1/termExtraction.html)。

# iphone - 这个 gdb 输出可能意味着什么？

> ID：181166
> 
> 赞同：0
> 
> 时间：2008-10-08T02:49:08.077
> 
> 标签：iphone, gdb

尝试创建我的第一个可以播放音频的 iPhone 应用程序。当我尝试设置播放时，gdb 中出现如下消息：

> =shlibs-removed,shlib-info=[num="54",name="AudioIPCPlugIn",kind="B",dyld-addr="0x2c2000",reason="dyld",requested-state="E", state="E",path="/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn", description="/System/Library/Extensions/AudioIPCDriver.kext/Contents /Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn",loaded_addr="0x2c2000",slide="0x2c2000",prefix=""]
> 
> =shlibs-removed,shlib-info=[num="55",name="AppleHDAHALPlugIn",kind="B",dyld-addr="0x2cb000",reason="dyld",requested-state="E", state="E",path="/System/Library/Extensions/AppleHDA.kext/Contents/PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn", description="/System/Library/Extensions/AppleHDA.kext/Contents /PlugIns/AppleHDAHALPlugIn.bundle/Contents/MacOS/AppleHDAHALPlugIn",loaded_addr="0x2cb000", slide="0x2cb000",prefix=""]

不熟悉 gdb，我很想知道这些类型的消息可能涉及到什么样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-14T14:19:43.503

这些是来自系统的信息性消息，可让您知道何时从可执行文件中卸载了动态库。我认为它们发生在这种情况下，因为当您尝试关闭应用程序与 CoreAudio 的连接时，您可能做了太多的破坏（即卸载捆绑包等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-14T14:09:46.753

AFAIK，这些是关于卸载的动态库的信息消息，我不认为它表示任何问题或错误。

# c# - C# 相当于 VB.NET 的 Catch...When

> ID：181188
> 
> 赞同：14
> 
> 时间：2008-10-08T03:04:59.480
> 
> 标签：c#, vb.net, exception-handling, vb.net-to-c#

在 VB.NET 中，我经常`Catch…When`：

```
Try
    …
Catch e As ArgumentNullException When e.ParamName.ToUpper() = "SAMPLES"
    …
End Try 
```

是否有相当于的 C# `Catch…When`？

如果可能的话，我不想诉诸`if`在 a 中使用语句`catch`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-10-08T03:07:20.757

`Catch…When`在 C# 中没有等价物。你真的必须诉诸于`if`你的声明`catch`，然后如果你的条件没有满足，则重新抛出：

```
try
{
    …
}
catch (ArgumentNullException e)
{
    if ("SAMPLES" == e.ParamName.ToUpper())
    {
        … // handle exception
    }
    else
    {
        throw;  // condition not fulfilled, let someone else handle the exception
    } 
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-09T10:14:16.870

此功能是针对 C# 6 宣布的。现在可以编写

```
try { … }
catch (MyException e) when (myfilter(e))
{
    …
} 
```

[您现在可以下载Visual Studio 2015](http://www.visualstudio.com/en-us/downloads/visual-studio-2015-downloads-vs.aspx)的预览版来查看它，或者等待正式发布。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-10-08T03:51:00.730

这不会重新创建与 VB Catch When 表达式相同的语义。有一个关键区别。VB When 表达式在堆栈展开发生之前执行。如果您要在 when Filter 的位置检查堆栈，您实际上会看到引发异常的帧。

在 catch 块中有 if 是不同的，因为 catch 块在堆栈展开后执行。当涉及到错误报告时，这一点尤其重要。在 VB 场景中，您可以使用包括故障在内的堆栈跟踪崩溃。在 C# 中无法获得这种行为。

编辑：

写了一篇关于这个主题的[详细博客文章](https://docs.microsoft.com/en-gb/archive/blogs/jaredpar/vb-catch-when-why-so-special)。

# javascript - 除了 onunload 事件之外，检测用户是否正在关闭 IE 浏览器，因为它在用户刷新等时触发

> ID：181189
> 
> 赞同：11
> 
> 时间：2008-10-08T03:06:34.813
> 
> 标签：javascript

在过去 5 天浏览了网上的众多论坛后，我仍然无法完全追踪浏览器关闭事件。我的要求是在用户尝试关闭浏览器时生成弹出消息。

我在 body 'onbeforeunload' 事件上调用了我的 javascript 函数。我已经硬编码了条件来检查浏览器的红色“X”按钮的鼠标坐标，刷新，文件关闭或`Alt`- `F4`。

我的代码在浏览器窗口最大化时工作正常，但如果我们在限制后缩小它会失败。如果有人已经找到解决类似问题的方法，请帮助我。

谢谢你。

### OP的汇总响应

------

好的，告诉我是否可以检测用户是否点击了浏览器的刷新按钮。此外，刷新可以通过右键单击 - 刷新或`Ctrl`-触发`R`。我的要求是在刷新时使变量为假。我只是能够做到这一点`F5`，但所有其他方式仍然遥不可及。这同样适用于后退按钮。

* * *

嗨 ppl， 感谢所有至少回复的人。我已经和我的前辈讨论过这个问题，他们现在已经理解并妥协了浏览器菜单按钮。所以现在我的任务变得容易了。现在，我正在使用一个变量并默认将其设为 true。正如我之前提到的，我只需要捕获 onbeforeunload 并在用户试图离开时弹出一条消息。当用户导航到其他页面时，不会弹出该消息，因为我使用以下代码在页面的所有链接上将变量设为 false：

```
document.onclick = function() {
    //To check if user is navigating from the page by clicking on a hyperlink.
    if (event.srcElement.tagName == 'A')
        blnShowMsg = false; //To not popup the warning message
    else
        blnShowMsg = true; //To popup the warning message
} 
```

在我的情况下，当用户刷新、返回或转到收藏夹中的任何链接等时，仍然会显示该消息。

* * *

谢谢哥们，但我已经经历了，在那里也没有找到太多帮助。我的前辈对这个解决方案不满意，因为在我的应用程序的每个链接上加一个标志是一项复杂的工作，他们害怕破坏应用程序。任何其他建议将不胜感激。再次感谢。

* * *

有没有人能想到解决办法的啊！！！高手都在哪里？？？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-10-08T09:32:16.393

这个问题并不罕见。然而，在网上搜索了 5 天后，您仍然没有找到满意的答案。这本身应该是一个相当简单的指标。

我在网上发现的是，人们非常厌恶“不能做”的答案。当某事不能做时，正常的反应是不做任何反应。

底线不仅是您正在尝试的事情不应该做，也不应该做。

我认为您需要回到您的前辈那里，向他们解释 Web UI 是由客户端计算机上的浏览器托管的**来宾。**这种*客人*身份很重要。

您是否希望您家中的客人有权强制您在您想上厕所时提醒他们？不？

同样，浏览器限制了访客 UI 可以访问的信息。即使您找到了一种解决方法，即浏览器不会自愿放弃这些信息，但这种巧妙的黑客攻击也是脆弱的，并且很可能是错误的持续来源。

由于应用程序最初可能是在任何代码被剪切之前通过浏览器交付的，因此错误在于首先包含了需求。

我们所能做的就是同情你被要求执行一个几乎不可能而且肯定不明智的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-04-21T06:29:38.053

将此脚本添加到您的 HTML：

```
 window.onbeforeunload = function (e)
        {

            e = e || window.event;
            var y = e.pageY || e.clientY;
            if (y < 0){
            return "Do You really Want to Close the window ?"
            }
            else {
            return "Refreshing this page can result in data loss."; 
            }

          } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T11:56:13.060

我相信几年前在*某些*浏览器中（可能不是很可靠）有一些方法可以做到这一点。因为我记得那些可怕的大量垃圾邮件弹出窗口，当您关闭一个弹出窗口时会产生更多弹出窗口。但这就是为什么允许脚本检测这一点并不是一个好主意，以及为什么浏览器应该阻止它，而大多数现代浏览器可能会这样做。

我被要求为调查邀请脚本做类似的事情；他们想询问访问者是否愿意回答有关他们网站的调查，然后当他们离开网站时，调查应该会弹出。我找到的解决方案是（反复）向管理层解释这可能是不可能的，或者充其量是*非常*不可靠的；相反，调查应该立即弹出（如果访问者同意接受调查）并且介绍页面应该告诉访问者保持这个窗口打开并在查看页面后返回它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-21T10:37:21.750

我有一种方法有点笨拙，但在大多数情况下都可以使用。

创建一个“Holding”弹出页面，其中包含一个 100% 单个 FRAME 的 FRAMESET，并将正常的 onUnload 和 onbeforeUnload 事件处理程序放在 HEAD 中。

```
<html>
<head>
<script language="Javascript" type="text/javascript">
  window.onbeforeunload = exitCheck;
  window.onunload = onCloseDoSomething;

  function onCloseDoSomething()
  {
  alert("This is executed at unload");
  }

  function exitCheck(evt)
  {
  return "Any string here."}
  </script>
  </head>

    <frameset rows="100%">
    <FRAME name="main" src="http://www.yourDomain.com/yourActualPage.aspx">
    </frameset>
<body>
</body>
</html> 
```

使用这种方法，您可以自由地使用您想查看的实际页面、回发并单击超链接，而无需触发外框 onUnload 或 onbeforeUnload 事件。

如果外部框架被刷新或实际关闭，事件将被触发。

就像我说的那样，不是完全证明，但会在每次回发时绕过事件的触发。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-10T07:47:19.393

在您的功能中：

```
document.onclick = function()
    {
        //To check if user is navigating from the page by clicking on a hyperlink.
        if (event.srcElement.tagName == 'A')
            blnShowMsg = false; //To not popup the warning message
        else
            blnShowMsg = true;    //To popup the warning message
    } 
```

blnShowMsg 对于您页面上的*任何*点击都将是 true，但*有时*当用户点击链接时除外。我有时会说，因为如果 event.srcElement.tagName 在某些浏览器中不起作用，它总是正确的。而且您必须添加*很多*案例以允许使用表单控件等......有些浏览器甚至可以自动重新加载页面，我不确定 onload 事件是否会运行。

但是一直弹出关于离开页面（或类似页面）的警告肯定会惹恼很多人，他们可能会永久离开......

例如，如果您正在制作一个在线程序，在离开之前保存某些内容至关重要，我会说捕捉卸载前事件有点为时已晚，最好进行某种自动保存（请参阅 Gmail）和/或当用户将鼠标悬停在导航菜单上而不保存时，某种非侵入性警告。

但是你不能强迫愚蠢的用户不要做任何愚蠢的事情，在 web 界面上更是如此，因为你的控制权更少：如果用户*想*在保存之前终止程序，他们*会*找到一种方法来这样做，并且他们当未保存的数据消失时*会*打电话给你并抱怨;P

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-16T19:45:33.160

`onunload` and `onbeforeunload` are not meant for this, so will naturally be unreliable.

A better solution is to change the problem. Have the client send a heartbeat, periodically telling the server the page is still active. When the hearbeat stops, you know you can clean up the server.

You might find this interesting: [https://stackoverflow.com/a/3586772/1483977](https://stackoverflow.com/a/3586772/1483977)

Or this: [Identifying Between Refresh And Close Browser Actions](https://stackoverflow.com/questions/568977/identifying-between-refresh-and-close-browser-actions/13916847#13916847)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-27T13:39:50.627

您[可能](http://www.mindfiresolutions.com/Warning-the-user-before-leaving-the-page-792.php)已经在许多 Web 表单页面中看到在关闭页面之前警告用户。当有人刷新页面时，就有可能丢失所有填充的数据。在这种情况下，它非常有帮助。

页面生命周期包括两个事件，如 onunload 和 onbeforeunload。对于这种情况，您需要在 window.bin 中绑定脚本函数。Onbeforeunload 以便在页面卸载时调用它。

同样，当您实际提交页面时，不应触发此警告。为此设置一个布尔值（例如应该提交）来提交页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-04T11:00:02.683

> > “谢谢哥们，但我已经经历过了，也没有找到太多帮助。我的前辈对这个解决方案不满意，因为在我的申请的每个链接上加一个标志是一项复杂的工作，他们害怕破坏申请. 任何其他建议将不胜感激。再次感谢。

如果您使用 jQuery，您可以自动添加链接标志。我处理您的问题的方式是当用户执行“危险”操作时，迭代所有“危险”的页面链接，然后将事件绑定到它们。

```
$("#dangerbutton").click(function(){ 
  $("a").not( safeList ).click(function()
  {
     var dest = $(this).attr('href');
     someWarningFunction(function(){ 
         /* Stay where we are because user opted to stay */
     },function(){ 
         /* Continue Following Link because user didn't mind */
         window.location= dest; 
     });
     return false;
  });
}); 
```

这种方式**只会****在**您页面上的链接点击时触发。用户必须习惯“关闭窗口 == 取消一切”的逻辑这一事实，因为许多人使用并信任该工具。

# regex - 正则表达式部分字符串 CSV 匹配

> ID：181191
> 
> 赞同：0
> 
> 时间：2008-10-08T03:09:41.063
> 
> 标签：regex, csv

让我先说我在 RegEx 方面完全是个业余爱好者，而且几天前才开始。我正在尝试解决格式化文件的问题，并且遇到了与特定类型的数据有关的问题。输入文件的结构如下：

```
两个字,Word,Word,Word,"数字,数字"

```

我需要做的是像这样格式化它......

```
“两个字”、“字”、“字”、“字”、“数、数”

```

我有一个 RegEx 模式

```
s/,/","/g
```

工作，除了它还替换了已经引用的 Number, number 部分中的逗号，这会导致字段分隔并破坏文件。本质上，我需要修改我的模式以用 "," [quote comma quote] 替换逗号，但前提是该逗号后面没有空格。请注意，其他字段永远不会在逗号后面有空格，只有分隔的数字列表。

我设法写了

```
s/,[A-Za-z0-9]/","/g
```

其中，在匹配适当的字符串时，将替换逗号和以下字母。我听说过反向引用并认为这可能是我需要使用的？我的理解是

```
s/(,)[A-Za-z0-9]\b
```

应该工作，但它没有。

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T03:24:24.153

我的经验是，这不是正则表达式的一个很好的用途。如前所述，真正的 CSV 解析器可以更好地处理 CSV 文件。你没有标记语言，所以很难说，但在 perl 中，我使用 Text::CSV_XS 或 DBD::CSV （允许我 SQL 访问 CSV 文件，就好像它是一个表一样，当然，在封面下使用 Text::CSV_XS)。比滚动我自己的要简单得多，也比使用正则表达式要健壮得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T03:18:42.403

`s/,([^ ])/","$1/`将匹配一个“ `,`”，后跟一个“非空格”，捕获非空格，然后用捕获的部分替换整个内容。

根据您使用的正则表达式引擎，您可能正在编写`\1`或其他内容，而不是`$1`.

如果您正在使用 Perl 或以其他方式访问带有负前瞻的正则表达式引擎，`s/,(?! )/","/`（“ `,`”后面没有空格）有效。

但是，您的输入看起来像 CSV，如果确实如此，您最好使用真正的 CSV 解析器而不是正则表达式来解析它。还有很多其他奇怪的角落案例需要担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T03:43:24.553

这个问题类似于：[Replace patterns that are inside delimiters using a regular expression call](https://stackoverflow.com/questions/180793/replace-patterns-that-are-inside-delimiters-using-a-regular-expression-call "使用正则表达式调用替换分隔符内的模式")。

这可以工作：

```
s/"([^"]*)"|([^",]+)/"$1$2"/g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T03:47:50.457

看起来你正在使用 Sed。

虽然您的模式似乎有点不一致，但我假设您希望用逗号分隔的每个项目都有引号。否则，您正在查看计算复杂性正则表达式不打算处理的领域。

通过 sed，您的命令将是：

```
 sed 's/[ \"]*,[ \"]*/\", \"/g' 
```

请注意，您仍然必须在字符串的开头和结尾加上双引号。

# designer - 如何在 VS 2008 的交叉表报表中插入总计列

> ID：181193
> 
> 赞同：1
> 
> 时间：2008-10-08T03:10:52.807
> 
> 标签：designer, report

如何在 VS 2008 的报表设计器的交叉表（矩阵）报表中插入总计列？看来我只能在交叉表报告中插入一个子列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T03:33:36.100

好的，我现在明白了。我只是右键单击列标题并选择小计。

# php - PHP5：在方法参数中指定数据类型

> ID：181209
> 
> 赞同：4
> 
> 时间：2008-10-08T03:20:38.747
> 
> 标签：php, parameters

我有一个看起来像这样的功能

```
class NSNode {
    function insertAfter(NSNode $node) {
        ...
    }
} 
```

我希望能够使用该函数来指示节点是在开始时插入的，因此它在*nothing*之后。我认为这`null`意味着“什么都没有”，所以我会这样写我的函数调用：

```
$myNode->insertAfter(null); 
```

除了 PHP 抛出一个错误，说它期待一个`NSNode`对象。我想坚持在我的函数中使用严格的数据类型，但希望能够指定一个空值。

那么，除了将其更改为 之外`function insertAfter($node) { }`，有没有办法可以将其他内容传递给该函数？

* * *

更新：我接受了欧文的回答，因为它回答了问题本身。其他人的建议真的很好，我会在这个项目中实际实施它们，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T03:25:50.920

当然，只需设置一个默认的“null”

```
function(NSNode $node = null) {
// stuff....
} 
```

结果是：

```
$obj->insertAfter(); // no error
$obj->insertAfter(new NSNode); // no error
$obj->insertAfter($somevar); // error expected NSNode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T03:23:58.740

不，您不能将其他内容传递给函数，因为这违背了静态类型的目的。在这种情况下，像 C# nullable 这样的东西会很好，即 NSNode？

我建议创建 NSNode::insertFirst() 虽然我认为你有错误的方式，为什么节点会插入自己，集合不应该插入并将节点作为参数？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T03:30:36.450

无论如何，最好有一个函数 insertAtBeginning() 或 insertFirst() 以提高可读性。

“你的想法”可能不是下一个人的想法。

insertAfter(null) 可能意味着很多事情。

也许 null 是一个有效值，而 insertAfter 意味着将它放在包含 null 值的索引之后。

# c# - 更新保持 Null 状态的数据库

> ID：181210
> 
> 赞同：0
> 
> 时间：2008-10-08T03:20:40.353
> 
> 标签：c#, asp.net, sql-server, web-services

我有一个 asp.net 文本表单，其中包含许多可选的十进制字段。我想有选择地更新数据库，但不为没有数据的字段插入“0”（保持空状态）。

通常，我会创建多个函数，每个函数都有不同的签名来处理这个问题。但是，我通过不允许具有相同名称的函数具有多个签名的 Web 服务插入数据。我可以想出几种方法来解决这个问题，但没有一种是“务实的”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T04:10:54.153

[可空类型](http://msdn.microsoft.com/en-us/library/b3h38hb0(VS.80).aspx)用于相同目的。它们表示可能没有数据的值类型。可以使用这些类型的 HasValue 属性检查值的存在。

读取字段的伪代码：

```
decimal? dValue; // default value is null
 if(decimalValueExists)
{
  dValue = <value read from text file>
} 
```

当您说多种方法时-我假设这些是能够添加可选字段的重载方法（因此n个可选字段意味着n个更多方法）

您可以通过编写单个方法来避免编写这些方法。假设您有一个必填字段和一个可选字段：

```
public class MyFields
{
    decimal  req1;
    decimal? opt1; // optional field 1  
} 
```

然后定义 web 服务方法来使用它：

```
[WebMethod]
void MyWSMethod(MyFields myFields)
{/* code here will ultimately call InsertMyFields */}

void InsertMyFields(MyFields myFields)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        // Create the command and set its properties.
        SqlCommand command = new SqlCommand();
        command.Connection = connection;
        command.CommandText = "AddMyFields";
        command.CommandType = CommandType.StoredProcedure;

        // Add the required input parameter
        SqlParameter parameter1 = new SqlParameter();
        parameter1.ParameterName = "@ReqField1";
        parameter1.SqlDbType = SqlDbType.NVarChar;
        parameter1.Direction = ParameterDirection.Input;
        parameter1.Value = myFields.req1;

        // Add the parameter to the Parameters collection. 
        command.Parameters.Add(parameter1);

        // Add the optional parameter and set its properties.
        SqlParameter parameter2 = new SqlParameter();
        parameter2.ParameterName = "@OptField1";
        parameter2.SqlDbType = SqlDbType.NVarChar;
        parameter2.Direction = ParameterDirection.Input;
        parameter2.Value = myFields.opt1 ?? DBNull.Value; //null coalescing operator

        // Add the parameter to the Parameters collection. 
        command.Parameters.Add(parameter2);

        //.. rest of the code
    }

} 
```

如果可空类型有值，则[Null Coalescing Operator](http://msdn.microsoft.com/en-us/library/ms173224(VS.80).aspx)将设置该值，否则它将设置您指定的其他值（在我们的示例中为 DBNull.Value）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T04:23:19.090

您可以将参数定义为可为空的小数。可空值类型的 C# 语法如下：

```
decimal? rebateAmountOrWhatever; 
```

然后，您可以将空值存储在变量中并将变量与空值进行比较。

```
new SqlParameter("@RebateAmount", 
  rebateAmountOrWhatever == null ? (object)DBNull.Value : (object)rebateAmountOrWhatever) 
```

使用 ?? 也有很大的乐趣？像这样的运算符：

```
new SqlParameter("@RebateAmount", 
 (object)rebateAmountOrWhatever ?? (object)DBNull.Value) 
```

声明变量的等效方法是使用 Nullable<> 泛型类型，如下所示：

```
Nullable<decimal> currentIraBalance = null; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T03:27:48.750

您可以使用[DBNull 类](https://docs.microsoft.com/en-us/dotnet/api/system.dbnull)来表示您的 Web 服务代码上的空值。

虽然您仍然必须使用代理值（例如，0 或 -1），然后只需评估该值以将其转换为`DBNull`对象。

# c# - 导致字符串中的垃圾数据的异常 (C#)

> ID：181212
> 
> 赞同：1
> 
> 时间：2008-10-08T03:20:58.357
> 
> 标签：c#, exception

好吧，这很奇怪。垃圾数据也不是随机的，它似乎是可执行文件本身的子字符串。

```
private void Form1_Load(object sender, EventArgs e)
{
    string s = GetValue();
    // at this point, s == "400". Why isn't really relevant (dumbed down a test)
    if (s != "18446744073709551615") 
        throw new Exception();
        // When the exception is thrown though, the string is set to random
        // data from inside the executable.
} 
```

这似乎取决于 GetValue() 中某些看似微不足道的实现细节，例如对 string.Format() 的调用位于不同的位置。

有没有人遇到过类似的事情或有任何想法可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T03:40:25.587

“我正在 VS 的“本地人”窗口中检查它”

这就解释了。与流行的看法相反，C# 允许进行一些优化。如果您不在函数末尾添加“KeepAlive”，则实际上不必存储该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T03:38:06.107

如果您在抛出异常并且现在超出范围后检查变量，那么它应该指向内存中的垃圾。您是否尝试在引发异常之前和之后检查此变量的值？

# c++ - 如何构建针对 64 位环境的解决方案？

> ID：181213
> 
> 赞同：5
> 
> 时间：2008-10-08T03:22:20.757
> 
> 标签：c++, 64-bit, visual-studio-2003

无论如何在vs2003中构建针对64位环境的解决方案？我的解决方案是原生 c++ 而不是视觉 c++。任何帮助将不胜感激。

干杯，

温迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T03:26:23.743

这个关于 2003 年缺乏 64 位定位的页面似乎解决了您的问题：[http](http://www.toymaker.info/Games/html/64_bit.html) ://www.toymaker.info/Games/html/64_bit.html 。

> 第一步是为 64 位开发设置我的开发环境。我使用几乎没有内置支持 64 位开发的 Visual Studio 2003。
> 
> 为了创建 64 位应用程序，您需要安装 Microsoft 的最新 Platform SDK（Microsoft Platform SDK for Windows Server 2003）。SDK 以及用于 32 位编程的库，具有用于 AMD64 和 IA64 (Intel) 开发的 64 位版本。
> 
> 事实证明，在 Visual Studio 中设置正确的库和头文件路径非常困难。我想要选择开发 32 位或 64 位项目。虽然平台 SDK 带有用于设置正确路径的命令文件，但它们会清除任何其他路径。由于 T2 使用 DirectX，我还需要正确设置 DirectX 路径。

如果可能的话，升级到较新版本的 Visual Studio 似乎是更安全、非黑客的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T03:33:31.263

正如 Warren 所指出的，这对于 VS2003 来说并不容易。您需要从[平台 SDK](http://www.microsoft.com/downloads/details.aspx?FamilyID=a55b6b43-e24f-4ea3-a93e-40c0ec4f68e5&DisplayLang=en)安装 x64 编译器。

我们以这种方式运行了几年（从更早的版本和 IA64 编译器开始）。X64 版本有单独的项目配置，所以除了正常的 DEBUG 和 RELEASE 配置外，我们还有 DEBUG_X64 和 RELEASE_X64。

但是您必须使用为 x86 或 x64 编译器和库设置的路径来启动 VS Studio。您无法在它们之间即时切换。我相信有一个命令行开关 /useenv 告诉 VS 从环境变量设置它的各种路径。我们有 bat 文件来设置这一切。

这很混乱，而且我们时不时地为环境构建错误的项目配置，这总是需要一段时间才能解决。升级到目标架构直接在 GUI 中公开的 VS2005/VS2008 会好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T03:46:54.840

听起来像是一个可行的解决方案......在接受答案之前先尝试一下。投票！

温迪

# html - 文件输入“接受”属性 - 有用吗？

> ID：181214
> 
> 赞同：361
> 
> 时间：2008-10-08T03:22:36.247
> 
> 标签：html, filter, cross-browser, mime-types

在 html 下实现文件上传是相当简单的，但我只是注意到有一个 'accept' 属性可以添加到`<input type="file" ...>`标签中。

此属性是否可用作将文件上传限制为图像等的一种方式？使用它的最佳方法是什么？

或者，有没有办法限制文件类型，最好是在文件对话框中，用于 html 文件输入标签？

* * *

## 回答 #1

> 赞同：461
> 
> 时间：2012-05-08T17:33:56.663

该`accept`属性非常有用。它提示浏览器只显示当前`input`. 虽然它通常可以被用户覆盖，但默认情况下它有助于缩小用户的结果范围，因此他们可以准确地获得他们正在寻找的内容，而无需筛选一百种不同的文件类型。

# 用法

***注意：****这些示例是根据当前规范编写的，可能实际上并不适用于所有（或任何）浏览器。该规范也可能在未来发生变化，这可能会破坏这些示例。*

```
h1 { font-size: 1em; margin:1em 0; }
h1 ~ h1 { border-top: 1px solid #ccc; padding-top: 1em; }
```

```
<h1>Match all image files (image/*)</h1>
<p><label>image/* <input type="file" accept="image/*"></label></p>

<h1>Match all video files (video/*)</h1>
<p><label>video/* <input type="file" accept="video/*"></label></p>

<h1>Match all audio files (audio/*)</h1>
<p><label>audio/* <input type="file" accept="audio/*"></label></p>

<h1>Match all image files (image/*) and files with the extension ".someext"</h1>
<p><label>.someext,image/* <input type="file" accept=".someext,image/*"></label></p>

<h1>Match all image files (image/*) and video files (video/*)</h1>
<p><label>image/*,video/* <input type="file" accept="image/*,video/*"></label></p>
```

# 来自 HTML 规范（[来源](https://html.spec.whatwg.org/multipage/forms.html#attr-input-accept)）

> `accept`可以指定该属性以向用户代理提供将接受哪些文件类型的提示。
> 
> 如果指定，则该属性必须由一 [组逗号分隔的标记](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#set-of-comma-separated-tokens)组成，每个标记都必须是一个 [不区分大小写的 ASCII](http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#ascii-case-insensitive) 匹配项，以匹配以下之一：
> 
> ### 字符串`audio/*`
> 
> *   表示接受声音文件。
> 
> ### 字符串`video/*`
> 
> *   表示接受视频文件。
> 
> ### 字符串`image/*`
> 
> *   表示接受图像文件。
> 
> ### 没有参数的[有效 MIME 类型](http://www.whatwg.org/specs/web-apps/current-work/multipage/infrastructure.html#valid-mime-type-with-no-parameters)
> 
> *   表示接受指定类型的文件。
> 
> ### 首字符为 U+002E 句号 (.) 的字符串
> 
> *   表示接受具有指定文件扩展名的文件。

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-02-12T18:52:27.277

是的，它在支持它的浏览器中非常有用，但“限制”是为了方便用户（因此他们不会被无关文件淹没），而不是防止他们上传你不想要的东西上传。

它支持在

*   铬 16 +
*   野生动物园 6 +
*   火狐 9 +
*   IE 10 +
*   歌剧 11 +

这是您可以使用[的内容类型列表](http://webdesign.about.com/od/multimedia/a/mime-types-by-content-type.htm)，后跟相应的文件扩展名（当然您可以使用任何文件扩展名）：

```
application/envoy   evy
application/fractals    fif
application/futuresplash    spl
application/hta hta
application/internet-property-stream    acx
application/mac-binhex40    hqx
application/msword  doc
application/msword  dot
application/octet-stream    *
application/octet-stream    bin
application/octet-stream    class
application/octet-stream    dms
application/octet-stream    exe
application/octet-stream    lha
application/octet-stream    lzh
application/oda oda
application/olescript   axs
application/pdf pdf
application/pics-rules  prf
application/pkcs10  p10
application/pkix-crl    crl
application/postscript  ai
application/postscript  eps
application/postscript  ps
application/rtf rtf
application/set-payment-initiation  setpay
application/set-registration-initiation setreg
application/vnd.ms-excel    xla
application/vnd.ms-excel    xlc
application/vnd.ms-excel    xlm
application/vnd.ms-excel    xls
application/vnd.ms-excel    xlt
application/vnd.ms-excel    xlw
application/vnd.ms-outlook  msg
application/vnd.ms-pkicertstore sst
application/vnd.ms-pkiseccat    cat
application/vnd.ms-pkistl   stl
application/vnd.ms-powerpoint   pot
application/vnd.ms-powerpoint   pps
application/vnd.ms-powerpoint   ppt
application/vnd.ms-project  mpp
application/vnd.ms-works    wcm
application/vnd.ms-works    wdb
application/vnd.ms-works    wks
application/vnd.ms-works    wps
application/winhlp  hlp
application/x-bcpio bcpio
application/x-cdf   cdf
application/x-compress  z
application/x-compressed    tgz
application/x-cpio  cpio
application/x-csh   csh
application/x-director  dcr
application/x-director  dir
application/x-director  dxr
application/x-dvi   dvi
application/x-gtar  gtar
application/x-gzip  gz
application/x-hdf   hdf
application/x-internet-signup   ins
application/x-internet-signup   isp
application/x-iphone    iii
application/x-javascript    js
application/x-latex latex
application/x-msaccess  mdb
application/x-mscardfile    crd
application/x-msclip    clp
application/x-msdownload    dll
application/x-msmediaview   m13
application/x-msmediaview   m14
application/x-msmediaview   mvb
application/x-msmetafile    wmf
application/x-msmoney   mny
application/x-mspublisher   pub
application/x-msschedule    scd
application/x-msterminal    trm
application/x-mswrite   wri
application/x-netcdf    cdf
application/x-netcdf    nc
application/x-perfmon   pma
application/x-perfmon   pmc
application/x-perfmon   pml
application/x-perfmon   pmr
application/x-perfmon   pmw
application/x-pkcs12    p12
application/x-pkcs12    pfx
application/x-pkcs7-certificates    p7b
application/x-pkcs7-certificates    spc
application/x-pkcs7-certreqresp p7r
application/x-pkcs7-mime    p7c
application/x-pkcs7-mime    p7m
application/x-pkcs7-signature   p7s
application/x-sh    sh
application/x-shar  shar
application/x-shockwave-flash   swf
application/x-stuffit   sit
application/x-sv4cpio   sv4cpio
application/x-sv4crc    sv4crc
application/x-tar   tar
application/x-tcl   tcl
application/x-tex   tex
application/x-texinfo   texi
application/x-texinfo   texinfo
application/x-troff roff
application/x-troff t
application/x-troff tr
application/x-troff-man man
application/x-troff-me  me
application/x-troff-ms  ms
application/x-ustar ustar
application/x-wais-source   src
application/x-x509-ca-cert  cer
application/x-x509-ca-cert  crt
application/x-x509-ca-cert  der
application/ynd.ms-pkipko   pko
application/zip zip
audio/basic au
audio/basic snd
audio/mid   mid
audio/mid   rmi
audio/mpeg  mp3
audio/x-aiff    aif
audio/x-aiff    aifc
audio/x-aiff    aiff
audio/x-mpegurl m3u
audio/x-pn-realaudio    ra
audio/x-pn-realaudio    ram
audio/x-wav wav
image/bmp   bmp
image/cis-cod   cod
image/gif   gif
image/ief   ief
image/jpeg  jpe
image/jpeg  jpeg
image/jpeg  jpg
image/pipeg jfif
image/svg+xml   svg
image/tiff  tif
image/tiff  tiff
image/x-cmu-raster  ras
image/x-cmx cmx
image/x-icon    ico
image/x-portable-anymap pnm
image/x-portable-bitmap pbm
image/x-portable-graymap    pgm
image/x-portable-pixmap ppm
image/x-rgb rgb
image/x-xbitmap xbm
image/x-xpixmap xpm
image/x-xwindowdump xwd
message/rfc822  mht
message/rfc822  mhtml
message/rfc822  nws
text/css    css
text/h323   323
text/html   htm
text/html   html
text/html   stm
text/iuls   uls
text/plain  bas
text/plain  c
text/plain  h
text/plain  txt
text/richtext   rtx
text/scriptlet  sct
text/tab-separated-values   tsv
text/webviewhtml    htt
text/x-component    htc
text/x-setext   etx
text/x-vcard    vcf
video/mpeg  mp2
video/mpeg  mpa
video/mpeg  mpe
video/mpeg  mpeg
video/mpeg  mpg
video/mpeg  mpv2
video/quicktime mov
video/quicktime qt
video/x-la-asf  lsf
video/x-la-asf  lsx
video/x-ms-asf  asf
video/x-ms-asf  asr
video/x-ms-asf  asx
video/x-msvideo avi
video/x-sgi-movie   movie
x-world/x-vrml  flr
x-world/x-vrml  vrml
x-world/x-vrml  wrl
x-world/x-vrml  wrz
x-world/x-vrml  xaf
x-world/x-vrml  xof 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2015-08-14T08:30:51.360

在 2015 年，我发现让它同时适用于**Chrome**和**Firefox****的唯一方法**是放置您想要支持的所有可能的扩展，包括变体（包括前面的点！）：

 ****```
accept=".jpeg, .jpg, .jpe, .jfif, .jif" 
```

**Firefox 的问题**：使用`image/jpeg`mime 类型的 Firefox 只会显示`.jpg`文件，很奇怪，好像常见`.jpeg`的不是 ok...

无论您做什么，请务必尝试使用具有许多不同扩展名的文件。也许它甚至取决于操作系统......我想`accept`是不区分大小写的，但可能不是在每个浏览器中。

这是[关于 accept 的 MDN 文档](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#accept)：

> accept 如果type属性的值为file，那么这个属性会指明服务器接受的文件的类型，否则会被忽略。该值必须是以逗号分隔的唯一内容类型说明符列表：
> 
> ```
>  A file extension starting with the STOP character (U+002E). (e.g. .jpg, .png, .doc).
>     A valid MIME type with no extensions.
>     audio/* representing sound files. HTML5
>     video/* representing video files. HTML5
>     image/* representing image files. HTML5 
> ```

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2008-10-08T04:02:02.360

Accept 属性是在[RFC 1867](https://www.rfc-editor.org/rfc/rfc1867)中引入的，旨在为文件选择控件启用基于 MIME 类型的文件类型过滤。但截至 2008 年，大多数（如果不是全部）浏览器都没有使用此属性。使用客户端脚本，您可以进行一种基于扩展的验证，以提交正确类型（扩展）的数据。

其他高级文件上传解决方案需要像[SWFUpload这样的 Flash 电影或像](http://swfupload.org/)[JUpload](http://sourceforge.net/projects/jupload/)这样的Java 小程序。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2010-11-16T18:11:48.627

它受 Chrome 支持。它不应该用于验证，而是用于提示操作系统的类型。如果您`accept="image/jpeg"`在文件上传中有属性，则操作系统只能显示建议类型的文件。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2011-11-10T02:05:19.247

几年过去了，Chrome 至少利用了这个属性。从可用性的角度来看，此属性非常有用，因为它将为用户过滤掉不必要的文件，使他们的体验更加流畅。但是，用户仍然可以从类型中选择“所有文件”（或以其他方式绕过过滤器），因此您应该始终验证实际使用的文件；如果您在服务器上使用它，请在使用它之前在那里验证它。用户始终可以绕过任何客户端脚本。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-10-08T06:06:24.187

如果浏览器使用这个属性，它只是作为对用户的帮助，所以他不会上传一个多兆字节的文件，只是为了看到它被服务器拒绝......
标签也是`<input type="hidden" name="MAX_FILE_SIZE" value="100000">`如此：如果浏览器使用它，它不会发送文件，但会导致错误`UPLOAD_ERR_FORM_SIZE`（2）PHP 中的错误（不确定如何在其他语言中处理）。
请注意，这些是对*用户*的帮助。当然，服务器端必须始终检查文件的类型和大小：在客户端很容易篡改这些值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-13T16:46:17.793

早在 2008 年，由于缺乏移动操作系统，这并不重要，但现在非常重要。

当您设置接受的 mime 类型时，例如，Android 用户将获得带有应用程序的系统对话框，这些应用程序可以向他提供文件输入接受的 mime 内容，这很好，因为在移动设备上的文件资源管理器中浏览文件很慢而且经常有压力.

一件重要的事情是，一些移动浏览器（基于 Android 版本的 Chrome 36 和 Chrome Beta 37）不支持对扩展程序和多种 mime 类型进行应用过滤。

# php - PHP：mysql_connect() 不能通过命令行工作

> ID：181222
> 
> 赞同：11
> 
> 时间：2008-10-08T03:25:37.350
> 
> 标签：php, mysql

我有一个脚本调用`mysql_connect()`连接到 MySQL 数据库。当我在浏览器中运行脚本时，它可以工作。但是，当我从命令行运行它时，我收到以下错误：

```
Call to undefined function mysql_connect() 
```

这似乎完全自相矛盾。任何人都对如何从命令行运行它有任何想法。顺便说一句，我像这样从 bash shell 运行它：

```
php /path/to/script.php 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-08T03:32:57.367

它可能使用默认的 PHP 配置。我之前发现它不使用相同的 php.ini 或根本不使用一个。因此，某些扩展将无法启用。

改为这样做：

```
php -c /etc/php.ini /path/to/script.php 
```

`/etc/php.ini`你的ini文件的路径在哪里。你可以通过做一个找到这个`phpinfo();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T12:44:31.870

检查你的 php cmd 版本是否真的有 mysql 支持：

```
<? php
  回声 php_info()
 ?>

```

如果不是，那么可能是因为它与您的 Web 服务器使用的版本不同。

使用“-m”参数运行 php 以列出所有已编译的模块：

```
  $ php -m

```

您应该看到“mysql”模块。如果没有，那么我猜 php cmd 版本没有使用 --with-mysql 编译，或者由于某种原因“配置”脚本无法包含它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T03:30:53.703

虽然这可能是一个初步的答案，但请确保您拥有最新的 PHP 客户端，并确保它正在查看您正在通过 Apache 处理的同一 PHP 文件夹。

如果这不起作用，请尝试使用 mysqli 并查看它是否适用于 PHP 的整个 MySQL 部分。如果 mysqli 有效而 mysql_connect() 无效，那么，这是切换到 OO 方面的最佳时机 :-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T03:34:02.933

php-cli.ini 可能是您的命令行 php 解释器正在使用的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T08:47:03.347

请确保此行出现在 php.ini 中

扩展=php_mysql.dll

请注意，命令行中使用的 php.ini 可能与 apache 使用的 php.ini 不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-07T06:58:59.700

当您运行 Mac OS X 和 MAMP 时，可能会出现此问题。命令行版本尝试使用 MAC OS X 版本，默认情况下恰好不加载任何 php.ini。

您可以使用以下命令进行检查：

```
php --ini 
```

看到丢失的配置文件了吗？

```
Configuration File (php.ini) Path: /etc
Loaded Configuration File:         !!! THE CONFIG FILE IS MISSING HERE !!!
Scan for additional .ini files in: /Library/Server/Web/Config/php
Additional .ini files parsed:      (none) 
```

您需要做的是，加载您选择的 php.ini 并将其复制到命令行解释器的默认位置 /etc ，然后再次运行上述命令，您应该会看到 php.ini 文件是已加载，应如下所示：

```
Configuration File (php.ini) Path: /etc
Loaded Configuration File:         /etc/php.ini
Scan for additional .ini files in: /Library/Server/Web/Config/php
Additional .ini files parsed:      (none) 
```

您还应该将此添加到 /etc 中的 PHP.ini 文件中

```
mysql.default_socket = /Applications/MAMP/tmp/mysql/mysql.sock 
```

这应该可以解决所有问题。

呸..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-05T07:11:10.310

我的系统是 CentOS。就我而言，mysql.so 的路径不正确。

当我输入

```
php -m 
```

没有mysql。

在我原来的 /etc/php.d/mysql.ini 中只有一行：

```
extension=mysql.so 
```

所以我使用命令：

```
rpm -ql php-mysql | grep mysql.so 
```

找出正确的路径，即

```
/usr/lib64/php/modules/mysql.so 
```

然后我将行替换为：

```
extension=/usr/lib64/php/modules/mysql.so 
```

然后

```
service httpd restart 
```

和

```
php -m 
```

mysql 现在已加载。

# java - Java的分布式事件处理机制

> ID：181225
> 
> 赞同：14
> 
> 时间：2008-10-08T03:26:47.987
> 
> 标签：java, event-handling, distributed

我正在寻找一种在 Java 中相当快的事件处理机制来生成和处理跨不同主机上运行的不同 JVM 的事件。

对于单个 JVM 中跨多个线程的事件处理，我找到了一些不错的候选者，例如 Jetlang。但是在我寻找分布式等价物时，我找不到任何足够轻量级来提供良好性能的东西。

有谁知道符合要求的任何实现？

**编辑：** 用数字表示性能有点困难。但是例如，如果您使用事件实现心跳机制并且心跳间隔为 5 秒，那么心跳接收器应该在一两秒内接收到发送的心跳。

通常，轻量级实现会提供良好的性能。涉及 Web 服务器或任何需要强大硬件（绝对不是轻量级）以提供良好性能的集中式集线器的事件处理机制并不是我想要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-29T17:20:15.183

[Hazelcast](http://www.hazelcast.com) Topic 是一个分布式发布-订阅消息解决方案。

```
public class Sample implements MessageListener {

    public static void main(String[] args) { 
        Sample sample = new Sample();
        Topic topic = Hazelcast.getTopic ("default");  
        topic.addMessageListener(sample);       
        topic.publish ("my-message-object");
    }  

    public void onMessage(Object msg) {
        System.out.println("Message received = " + msg);
    } 
} 
```

Hazelcast 还支持分布式队列、地图、集合、列表上的事件。所有的事件也是有序的。

问候，

-塔利普

[http://www.hazelcast.com](http://www.hazelcast.com)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T04:25:05.747

根据您的用例，[Terracotta](http://terracotta.org)可能是一个很好的选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-29T17:30:07.397

对于分布式事件处理，您可以使用[Esper](http://esper.codehaus.org/)。它可以在基于双 CPU 2GHz Intel 的硬件上处理高达 500 000 个事件/秒。它非常稳定，因为许多银行都使用这种解决方案。它支持基于 Spring JMS 模板的 JMS 输入和输出适配器。因此，您可以使用任何 JMS 实现来进行事件处理，即[ActiveMQ](http://activemq.apache.org)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-08T04:23:09.870

AMQP（高级消息队列协议）- 更多详细信息： [http](http://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol) ://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol可能是您正在寻找的。

金融服务公司使用它来满足他们的高性能要求——apache有一个实现——http: [//cwiki.apache.org/qpid/](http://cwiki.apache.org/qpid/)

OpenAMQ- [http://www.openamq.org/](http://www.openamq.org/)是较旧的参考实现。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-12-28T23:59:30.193

ZeroMQ - [http://www.zeromq.org/](http://www.zeromq.org/)

尽管这是一个传输层，但它可以针对事件处理进行定制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-11T13:17:59.753

看看 akka (http://akka.io/)。它为具有 java 和 scala API 的 JVM 提供了与 erlang 相同的分布式参与者模型。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T09:26:10.570

无论您使用哪种工具，我都建议您从应用程序逻辑中隐藏中间件 API。例如，如果您使用[Apache Camel 方法来隐藏中间件](http://activemq.apache.org/camel/hiding-middleware.html)，那么您可以根据您的确切要求轻松地从 AMQP 切换到 SEDA 到 JMS 到 ActiveMQ 到 JavaSpaces 到您自己的自定义 MINA 传输。

如果您想使用消息代理，我建议您使用[Apache ActiveMQ](http://activemq.apache.org/)，它是最流行和最强大的开源消息代理，在 Apache 内部和[外部都拥有](http://www.nabble.com/Java-Software-f787.html)[最大最活跃的社区](http://www.nabble.com/Apache-f90.html)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-27T13:20:06.590

您需要为 Java 中的分布式事件处理实现[观察者设计模式](https://sourcemaking.com/design_patterns/observer)。我正在使用使用 MongoDB capped collection 和 Observers 的事件流来实现这一点。

您可以创建一个体系结构，在该体系结构中，您触发在上限集合中发布文档，并且您的观察者线程使用可尾游标等待它。如果你不明白我上面所说的，你需要复习一下你的[MongoDB](https://university.mongodb.com/)和[java技能](https://www.youtube.com/playlist?list=PLE7E8B7F4856C9B19)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-13T16:54:12.803

如果[JMS 实现](http://activemq.apache.org/)不适合您，那么您可能会对[XMPP](http://xmpp.org/about/)方法感兴趣。有多种实现，并且还有一个[Publish-Subscribe](http://en.wikipedia.org/wiki/Publish/subscribe) [扩展](http://xmpp.org/tech/pubsub.shtml)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-15T05:31:08.030

[Avis 事件路由器](http://avis.sf.net/)可能适合您的需求。它对于近乎实时的事件传递来说已经足够快了，例如发送鼠标事件以进行远程鼠标控制（我们每天都使用它的应用程序）。

Avis 还被用于聊天、虚拟状态和智能房间自动化，其中通常有 10-20 台计算机通过基于 Avis 的消息总线进行通信。它的商业表亲 (Mantara Elvin) 用于大容量商业贸易事件处理。

# asp.net-mvc - 返回参考页面

> ID：181226
> 
> 赞同：7
> 
> 时间：2008-10-08T03:26:53.807
> 
> 标签：asp.net-mvc, authentication

我在 asp.net mvc 页面中的某些操作上使用了身份验证属性，如果他们没有经过身份验证，则可以将他们引向登录屏幕。我的问题是在他们登录后将他们返回到引荐页面。我只是在跟踪引荐操作和引荐控制器，但是当我还需要跟踪某些参数时，这就会出现问题。是否有一些我不知道的漂亮的内置技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T08:16:29.493

如果您使用 FormsAuthentication，当 ASP.NET 将用户重定向到登录页面时，URL 看起来像这样：

```
http://www.mysite.com/Login?ReturnUrl=/Something 
```

登录表单的 action 属性应该具有相同的 ReturnUrl 参数（作为隐藏输入或作为 Url 的一部分），以便 FormsAuthentication 可以获取并重定向，例如

```
<form action="Login?ReturnUrl=<%=Html.AttributeEncode(Request.QueryString["ReturnUrl"]) %>"></form> 
```

或者

```
<form><input type="hidden" name="ReturnUrl" id="ReturnUrl" value="<%=Html.AttributeEncode(Request.QueryString["ReturnUrl"])"%> /></form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T08:05:42.807

我为达到这个结果所做的事情可能做得过火了，我也想看看其他一些方法。但是，这是我的代码。

请注意，它使用 Moq 来模拟上下文......而且，我还没有对查询字符串做任何事情（我的路线不包含任何查询字符串）。

```
var urlReferrer = Request.UrlReferrer;
if (urlReferrer != null)
{
    var url = "~" + Server.UrlDecode(urlReferrer.PathAndQuery);

    // get routecollection
    var routeCollection = new RouteCollection();
    GlobalApplication.RegisterRoutes(routeCollection);

    // mcok context
    var context = new Mock<HttpContextBase>();
    var request = new Mock<HttpRequestBase>();
    context.Expect(ctx => ctx.Request).Returns(request.Object);

    // mock request
    // TODO: convert querystring to namevaluecollection
    // now it's just stripped
    if (url.IndexOf('?') > 0)
    {
        url = url.Substring(0, url.IndexOf('?'));
    }

    var mock = Mock.Get(context.Object.Request);

    // TODO: insert namevaluecollection of querystring
    mock.Expect(req => req.QueryString).Returns(new NameValueCollection());
    mock.Expect(req => req.AppRelativeCurrentExecutionFilePath).Returns(url);
    mock.Expect(req => req.PathInfo).Returns(string.Empty); 

    // get routedata with mocked context
    var routeData = routeCollection.GetRouteData(context.Object);
    var values = routeData.Values;

    return RedirectToAction(routeData.Values["action"].ToString(), values);
} 
```

正如我所说，它可能有点过于复杂:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T17:53:31.013

您应始终确保引用 URL 位于您的域内，并且它们可能来自一个合理的字符串。否则，这有可能与闪存或其他客户端技术一起使用，以执行诸如响应拆分或其他已知和未知攻击之类的事情。

HTTP 引用是用户输入，它应该像其他任何东西一样进行验证。

# linux - 为什么“at”命令总是警告我命令将通过 sh 执行？

> ID：181241
> 
> 赞同：17
> 
> 时间：2008-10-08T03:35:04.740
> 
> 标签：linux, bash, unix

每次我使用“at”命令时，都会收到以下消息：

```
warning: commands will be executed using /bin/sh 
```

它想警告我什么？更重要的是，如何关闭警告？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-08T03:38:30.427

它对我们这些不使用 bash 作为 shell 的人来说是一个很好的警告，因为我们会忘记，当运行此代码时，我们日常 shell 中的一个功能将不可用在约定的时间。

IE

```
username@hostname$ at 23:00     
warning: commands will be executed using /bin/sh
at> rm **/*.pyc
at> <EOT>
job 1 at 2008-10-08 23:00 
```

使用 '**' 是完全有效的 zsh，但不是 /sbin/sh！如果您习惯使用不同的 shell，很容易犯这些错误，记住做正确的事情是您的责任。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-08T12:41:48.333

除了烦人之外，警告是否有任何有害影响？手册页没有提到任何关闭它的方法，所以我认为你不能在不从源代码重建你**的**情况下阻止它发出。

现在，如果您不想看到它，您可以使用`at [time] 2>/dev/null`它来将其发送到遗忘，但不幸的`at>`是，由于某种原因，提示会打印到 STDERR（一个错误，IMO - 他们真的应该去 STDOUT），所以他们'也被这个隐藏了。

可能会处理一些外壳管道，这将消除警告而不吃提示，但是

1.  我在这个 ( ) 上的尝试`at [time] 2>&1 | grep -v warning`不起作用并且
2.  即使你能找到一个有效的组合，它也不适合混叠（因为时间在中间而不是在最后），所以你需要在每次使用它时完整输入它或否则编写一个包装脚本`at`来处理它。

因此，除非它引起实际问题，否则我会说您最好像我们其他人一样忽略警告。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-08T22:03:55.907

`at.c`（来自 Debian 的 3.1.20-3 版本）的源代码包含一个答案：

> /* POSIX.2 允许由用户的 SHELL 环境变量指定的 shell、来自用户密码数据库条目的登录 shell
> 或 /bin/sh 作为处理 at-job 的命令解释器。
> 它还允许打​​印警告诊断。由于
> 可能存在差异，我们总是输出诊断。*/
> 
> fprintf(stderr, "警告：命令将使用 /bin/sh\n");

您可以使用 shell 重定向来解决它：

```
% echo "echo blah"  | at now+30min 2>&1 | fgrep -v 'warning: commands will be executed using /bin/sh'
job 628 at Fri Mar  8 23:25:00 2019 
```

或者，您甚至可以创建一个函数供您休闲使用（例如用于`~/.zshrc`或中的交互式 shell `~/.profile`）：

```
at() {
  /usr/bin/at "$@" 2>&1 | fgrep -v 'warning: commands will be executed using /bin/sh'
} 
```

之后，它不会向您发出特定警告（而其他警告/错误消息仍会发送给您）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T03:41:23.510

如果您希望绕过该消息，请让“at”运行一个调用指定环境的脚本，无论是 ksh、bash、csh、zsh、perl 等。

**另外**- 请参阅“at”手册页[http://www.rt.com/man/at.1.html](http://www.rt.com/man/at.1.html)了解更多信息。

```
at and batch read commands from standard input or a specified  file which are to be executed at a later time, using /bin/sh. 
```

# javascript - 有没有办法使用 CSS 或 javascript 从另一个 CSS 样式引用现有的 CSS 样式？

> ID：181254
> 
> 赞同：19
> 
> 时间：2008-10-08T03:43:18.780
> 
> 标签：javascript, jquery, dynamic-css

如果我定义了样式

```
.style1
{
   width: 140px;
} 
```

我可以从第二种风格中引用它吗？

```
.style2
{
   ref: .style1;
} 
```

或者有没有通过 javascript/jQuery 的方法？

- - 编辑

为了澄清这个问题，我试图将任何为#x 和#c 定义的样式应用于.x 和.c，而不改变CSS，因为CSS 将有我无法控制的更新。

我使用了宽度，但实际上样式会更复杂，因为指定了字体、边框和其他样式元素。

当样式应用于类时，指定多个类名确实有效，因此我会将现有响应标记为答案，但我需要将样式应用于 id 并将其应用于类样式......如果那样的话有任何意义。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-08T03:50:41.010

CSS 没有办法做到这一点——这是一个经常被要求的特性，但还没有包含在规范中。你也不能直接用 JS 来做，但是有一种 hacky 的解决方法：

```
$('.style2').addClass ('style1'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-08T03:51:23.037

您可以通过允许元素继承多种样式来实现相同的功能。前任。

```
<p class="style1 style2">stuff</p> 
```

然后你的CSS将包括，例如：

```
.style1 {width:140px;}
.style2 {height:140px;} 
```

编辑：实际上罗伯特的回答可能会更好地接近您尝试实现的方法

```
.style1, .style2 {width: 140px;}
.style2 {height: 140px;}

<p class="style2">i will have both width and height applied</p> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-08T03:52:17.140

对多个块使用相同代码的一种方法如下：

```
 .style1, .style2 { width: 140px; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-04T01:00:29.063

另一种方法是使用预处理工具，如 less 和 sass。然后在你编译完less/sass 文件后，它就会变成普通的css。

这是[less](http://lesscss.org/#usage)和[sass](http://sass-lang.com/)的文档。

```
// example of  LESS

#header {
h1 {
  font-size: 26px;
  font-weight: bold;
  }
p { font-size: 12px;
  a { text-decoration: none;
    &:hover { border-width: 1px }
    }
  }
}

/* Compiled CSS */

#header h1 {
  font-size: 26px;
  font-weight: bold;
}
#header p {
  font-size: 12px;
}
#header p a {
  text-decoration: none;
}
#header p a:hover {
 border-width: 1px;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T04:14:49.933

一些选项：

1.  动态生成 CSS，无论是在运行中还是在您创作样式表时（我使用 Visual Studio 宏来实现字体、数字和颜色的常量 - 并计算颜色的浅色/深色）。该主题已在本网站的其他地方进行了很多讨论。

2.  如果您有许多 140 像素宽的样式，并且您希望灵活地更改所有这些样式的尺寸，您可以这样做：

    ```
    div.FixedWidth {width:140px;}
    div.Style1 {whatever}
    div.Style2 {whatever} 
    ```

和

```
 <div class="Style1 FixedWidth">...</div>
    <div class="Style2 FixedWidth">...</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-14T19:14:24.803

您是在谈论在特定元素上设置所有计算样式并将其应用于第二个元素吗？

如果是这种情况，我认为您将需要遍历一个元素的计算样式，然后将它们应用于其他元素的 cssText 属性以将它们设置为内联样式。

就像是：

```
el = document.getElementById('someId');
var cStyle = '';
for(var i in el.style){
  if(el.style[i].length > 0){ cStyle += i + ':' + el.style[i] + ';';
}
$('.someClass').each(function(){ this.style.cssText = cStyle; }); 
```

如果您知道您只会处理一组有限的 CSS 属性，您可以将上面的内容简化为：

```
el = $('#someId');
var styleProps = {'border-top':true,'width':true,'height':true};
var cStyle = '';
for(var i in styleProps){
  cStyle += styleProps[i] + ':' + el.style(styleProps[i]) + ';';
}
$('.someClass').each(function(){ this.style.cssText = cStyle; }); 
```

我将警告上面的代码，因为我不确定 IE 是否会像 Mozilla 那样为 HTMLElement 的样式属性返回 CSSStyleDeclaration 对象（第一个示例）。我也没有对上述内容进行测试，因此仅将其作为伪代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-08T19:18:38.703

我正在尝试同样的事情并找到了这个网页（以及其他一些网页）。没有直接的方法可以做到这一点。IE：

```
<html><head><title>Test</title><style>
.a { font-size: 12pt; }
.b { font-size: 24pt; }
.c { b }
</style></head><body>
<span class='c'>This is a test</span></body></html> 
```

不**工作**。这里的问题是你（像我一样）正试图以合乎逻辑的方式做事。（即：A-然后-B-然后-C）

正如其他人指出的那样 - 这只是行不通。虽然它应该可以工作并且 CSS 也应该有很多其他的特性。它没有，所以你必须做一个工作。有些人已经发布了 jQuery 方法来解决这个问题，但是你想要的可以通过稍微修改来实现。

```
<html><head><title>Test</title><style>
.a { font-size: 12pt; }
.b,.c { font-size: 24pt; }
</style></head><body>
<span class='c'>This is a test</span></body></html> 
```

这达到了相同的效果 - 只是以不同的方式。不要试图将“a”或“b”分配给“c”——只需将“c”分配给“a”或“b”。在不影响其余代码的情况下，您可以获得相同的效果。

下一个应该浮现在您脑海中的问题是“我可以为多个 CSS 项目执行此操作吗？（例如 font-size、font-weight、font-family？）答案是肯定的。只需将“,.c”部分添加到您希望它成为一部分的每一件事，所有这些“部分”都将成为“.c”的一部分。

```
<html>
<head>
<title>Test</title>
<style>
.a  { font-size: 12pt; }
.b,.c   { font-size: 24pt; }
.d  { font-weight: normal; }
.e,.c   { font-weight: bold; }
.f  { font-family: times; }
.g,.c   { font-family: Arial; }
</style>
</head>
<body>
<span class='c'>This is a test</span>
</body>
</html> 
```

# linq - Linq to SQL 类重新生成

> ID：181258
> 
> 赞同：8
> 
> 时间：2008-10-08T03:46:12.563
> 
> 标签：linq, linq-to-sql

我一直在将这个漂亮的 LINQ to SQL 工具用于 asp.net 项目中的数据访问层。我不断对基础表进行更改，为了让数据类识别更改，我必须删除并读取已更改的表。是否有一些重新生成数据层的捷径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T04:04:26.380

我遇到了同样的问题，使用[sqlmetal](http://msdn.microsoft.com/en-us/library/bb386987.aspx)绝对是解决它的好方法。一种方法是创建一个批处理文件来执行您的 sqlmetal 命令，这样您就可以在需要将 Linq 更新为 SQL 类的任何时候运行批处理，但更巧妙的解决方案是使用 Visual Studio 的 Tools->External Tools 函数在 Visual Studio 中创建一个使用您的参数运行 sqlmetal 的命令。这很好用，您甚至可以将创建的命令拖放到工具栏上进行单击重建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T03:53:37.403

您可以使用 sqlmetal，它是 linq to sql 类的命令行类生成器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T05:35:16.637

对于 SQLMetal 不能完全削减它的情况/模型，例如由于数据库和模型中的不同命名约定，或者 L2S 模型中的一些其他自定义，我有一个 Visual Studio 加载项，它添加了同步 L2S 的命令具有底层数据库 [模式] 的设计器。（加上一堆其他 L2S 和 EF 相关的功能）

您可以阅读有关它的更多信息、下载它并从[http://www.huagati.com/dbmltools/获得 30 天试用许可证](http://www.huagati.com/dbmltools/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-10T06:08:58.657

LINQ to SQL 版本 1 不支持检测数据库架构更改。修改生成的类的唯一方法是使用设计器或 SQLMetal 重新生成它们。

请记住，SQLMetal 和设计器之间没有太多区别，设计器是 SQLMetal 的更“漂亮”的 UI，并且隐藏了许多命令行开关。

我使用设计器，因为我懒得不断加载命令提示符。

此外，请确保您不要将任何自己的代码写入生成的类中，否则您将在重新生成时丢失它。所有生成的类都是*部分*的，这意味着您可以轻松地将自己的扩展程序添加到单独的文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-06T19:54:01.130

在我工作的过去，我们为 sqlmetal 生成的 DataContext 创建了一个包装类。然后我们创建了一个瘦数据层，将 DataContext 和 sqlmetal 生成的所有类保持私有。

如果软件中的任何操作需要来自数据库的信息，他们必须通过这个包装层来获取它。换句话说，LINQ to SQL 不能出现在这个数据层之外。

这样，每当我们必须通过 sqlmetal 重新生成类时，只有部分数据层可能会中断。修复所有数据访问代码所在的一层比在整个逻辑或应用程序域中更改少量的 LINQ to SQL 容易得多。

# iphone - 如何向我的 iPhone 应用程序添加额外的“视图”？

> ID：181268
> 
> 赞同：2
> 
> 时间：2008-10-08T03:50:32.417
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个基于 CrashLanding 示例应用程序的简单 iphone 应用程序。所以基本上你点击标题屏幕并做一些事情......都在同一个“视图”上。我想用一些 UISwitches 添加一个“选项”屏幕/页面/视图。最简单的方法是什么？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-09T07:19:40.560

有很多例子展示了如何管理多个全屏视图——每个视图通常应该由一个单独的视图控制器管理。查看 Xcode 模板，了解如何设置“翻转”视图的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T04:18:53.483

不知道这是否会帮助我对objective-c和iPhone api有点陌生。

也许你可以这样做：使用界面生成器：只需在 Spotlight（右上角）上键入“Interface Builder”即可生成“myOptions.xib”

然后执行它：就像

```
@implementation myOptions

-(void)awakeFromNib
{
... 
```

你可以看一下iPhone API下的QuartzDemo，看看如何加载对象的接口列表。在前面的视图控制器中，您只需将其添加到对象列表中。它看起来像这样：

```
@implementation previousController
-(void)awakeFromNib
{
    menuList = [[NSMutableArray alloc] init];
    QuartzViewController *controller;

    controller = [[QuartzViewController alloc] initWithTitle:@"Options"];
    controller.quartzViewDelegate = [[[myOptions alloc] init] autorelease];
    [menuList addObject:controller];
    [controller release]; 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T04:23:13.583

使用 Interface Builder 打开 MainWindow.xib。向 XIB 添加新视图。有关详细信息，请参阅 Interface Builder 用户指南。

[http://developer.apple.com/documentation/DeveloperTools/InterfaceBuilder-date.html#doclist](http://developer.apple.com/documentation/DeveloperTools/InterfaceBuilder-date.html#doclist)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-15T14:03:19.713

虽然每个人都提到了显示附加视图的方法和指针，但如果您试图解决显示应用程序设置的原始问题，您可能希望根据 iPhone 的 Apple HIG 使用设置包来代替

[http://developer.apple.com/iphone/library/documentation/UserExperience/Conceptual/MobileHIG/HandleTasks/chapter_6_section_4.html#//apple_ref/doc/uid/TP40006556-CH16-SW4](http://developer.apple.com/iphone/library/documentation/UserExperience/Conceptual/MobileHIG/HandleTasks/chapter_6_section_4.html#//apple_ref/doc/uid/TP40006556-CH16-SW4)

有关如何执行此操作，请参见：

[http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ApplicationSettings/chapter_12_section_1.html#//apple_ref/doc/uid/TP40007072-CH13-SW10](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ApplicationSettings/chapter_12_section_1.html#//apple_ref/doc/uid/TP40007072-CH13-SW10)

# sql - 任何数据库表上的“select count(1) from table_name”是什么意思？

> ID：181272
> 
> 赞同：109
> 
> 时间：2008-10-08T03:52:13.583
> 
> 标签：sql, database, oracle

当我们执行`select count(*) from table_name`它时，它会返回行数。

做什么`count(1)`？`1`在这里意味着什么？这与`count(*)`（因为它在执行时给出相同的结果）相同吗？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2008-10-08T04:00:28.060

COUNT 函数的参数是要为每一行计算的表达式。COUNT 函数返回表达式计算为非空值的行数。（ * 是一个不计算的特殊表达式，它只是返回行数。）

表达式还有两个附加修饰符：ALL 和 DISTINCT。这些确定是否丢弃重复项。由于 ALL 是默认值，因此您的示例与 count(ALL 1) 相同，这意味着保留重复项。

由于表达式“1”对每一行的计算结果都为非空，并且由于您没有删除重复项，因此 COUNT(1) 应始终返回与 COUNT(*) 相同的数字。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-10-08T04:01:51.987

这是[一个链接](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:40208915257337)，可以帮助回答您的问题。简而言之：

> count(*) 是编写它的正确方法，并且 count(1) 在内部被优化为 count(*) - 因为
> 
> a) 计算 1 不为空的行的效率低于
> b) 计算行数

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-11-11T11:00:04.663

oracle中count(*)和count(1)的区别？

count(*) 表示它将计算所有记录，即每个单元格但是

count(1) 表示它将添加一个值为 1 的伪列并返回所有记录的计数

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-08T03:57:09.017

这类似于两者之间的区别

```
SELECT * FROM table_name and SELECT 1 FROM table_name. 
```

如果你这样做

```
SELECT 1 FROM table_name 
```

它会给你表格中每一行的数字 1。所以是的`count(*)`，并且`count(1)`将提供与 will`count(8)`或`count(column_name)`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-08T03:57:23.667

没有区别。

`COUNT(1)`基本上只是为每一行计算一个常数值 1 列。正如这里的其他用户所说，它与`COUNT(0)`or相同`COUNT(42)`。任何非`NULL`价值都足够了。

[http://asktom.oracle.com/pls/asktom/f?p=100:11:2603224624843292::::P11_QUESTION_ID:1156151916789](http://asktom.oracle.com/pls/asktom/f?p=100:11:2603224624843292::::P11_QUESTION_ID:1156151916789)

Oracle 优化器显然曾经在其中存在错误，这导致计数受到您选择的列以及它是否在索引中的影响，因此 COUNT(1) 约定应运而生。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-10-08T04:01:15.047

```
SELECT COUNT(1) from <table name> 
```

应该做同样的事情

```
SELECT COUNT(*)  from <table name> 
```

可能有或仍然有一些原因导致它比`SELECT COUNT(*)`在某些数据库上表现更好，但我认为这是数据库中的一个错误。

```
SELECT COUNT(col_name) from <table name> 
```

然而有不同的含义，因为它只计算给定列的非空值的行。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-08T03:55:04.467

在甲骨文中，我相信这些具有完全相同的含义

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-04-01T12:55:56.430

你可以这样测试：

```
create table test1(
 id number,
 name varchar2(20)
);

insert into test1 values (1,'abc');
insert into test1 values (1,'abc');

select * from test1;
select count(*) from test1;
select count(1) from test1;
select count(ALL 1) from test1;
select count(DISTINCT 1) from test1; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-08T04:04:11.873

根据您询问的对象，有些人报告说执行`select count(1) from random_table;`速度比`select count(*) from random_table`. 其他人声称它们完全相同。

此[链接](http://laurentschneider.com/wordpress/2008/08/what-is-faster-select-count-or-select-countpk.html)声称 2 之间的速度差异是由于 FULL TABLE SCAN 与 FAST FULL SCAN。

# tcp - TCP/IP 如何报告错误？

> ID：181279
> 
> 赞同：1
> 
> 时间：2008-10-08T03:55:49.753
> 
> 标签：tcp

当数据包传送永久失败时，TCP/IP 如何报告错误？我见过的所有 Socket.write() API 都只是将字节传递到底层 TCP/IP 输出缓冲区并异步传输数据。那么，如果数据包传送永久失败（即目标主机不再可达），TCP/IP 应该如何通知开发人员？

任何要求发送方等待来自远程端确认的协议都会收到一条错误消息。但是对于发送方不必从目的地读取任何字节的协议会发生什么呢？TCP/IP 是否只是静默失败？也许 Socket.close() 会返回错误？TCP/IP 规范对此有任何说明吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T04:14:28.483

TCP/IP 是一种可靠的字节流协议。您的所有字节都将到达接收器，否则您将收到错误指示。

错误指示将以关闭套接字的形式出现。无论采用何种通信模式（谁进行发送），如果无法传递字节，则套接字将关闭。

那么问题来了，你怎么看socket关闭了？如果您从不阅读，您最终会在尝试写入已关闭的套接字时出错（我认为使用 ECONNRESET errno）。

如果您需要休眠或等待另一个文件句柄的输入，您可能希望在 select() 调用中等待，在该调用中将套接字包含在您正在等待的源列表中（即使您从未预料到接收任何东西）。如果 select() 指示套接字已准备好进行读取调用，您可能会得到 -1 返回（我认为使用 ECONNRESET）。EOF 表示有序关闭（另一端执行了 shutdown() 或 close()。

如何区分此错误关闭和干净关闭（例如，其他程序退出）？errno 值可能足以区分错误和有序关闭。

如果您想要一个明确的问题指示，您可能需要在套接字层之上构建某种应用程序级协议。例如，接收方发送回发送方的简短“确认”消息。然后违反更高级别的应用程序协议（发件人没有看到确认）将确认这是错误关闭与干净关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T04:02:50.177

套接字 API 无法准确地通知写入者已收到多少字节作为对等方的确认。存在成功`shutdown`或`close`两者中的任何一个都不能保证。

TCP/IP 规范没有说明应用程序接口（几乎总是套接字 API）。

[SCTP](http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)是 TCP 的替代方案，它试图解决这些缺点等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T04:09:42.487

在 C 中，如果您写入一个使用 send() 失败的套接字，您将返回已发送的字节数。如果这与您要发送的字节数不匹配，那么您就有问题了。但是，当您写入失败的套接字时，您会返回 SIGPIPE。在开始套接字处理之前，您需要有一个信号处理程序，当您获得 SIGPIPE 时会提醒您。

如果你从一个套接字读取，你真的应该用一个警报来包装它，这样你就可以超时。像“alarm(timeout_val); recv(); alarm(0)”。查看recv的返回码，如果为0，表示连接已经关闭。返回负数表示读取失败，需要检查errno。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T04:30:34.677

TCP 建立在 IP 协议之上，该协议是 Internet 的核心，提供驱动路由的大部分互操作性，这决定了如何将数据包从源端获取到目的地。IP 协议指定在数据包无法到达发送者的情况下，应通过 Internet 控制消息协议 (ICMP) 将错误消息发送回发送者。其中一些原因包括生存时间 (TTL) 字段递减为零，这通常意味着数据包卡在路由循环中，或者由于交换机争用导致缓冲区溢出而丢弃数据包。正如其他人所说，Socket API 负责在 IP 层将这些错误中继到在 TCP 层与网络交互的应用程序。

# f# - 函数式编程和多核架构

> ID：181284
> 
> 赞同：18
> 
> 时间：2008-10-08T03:59:05.300
> 
> 标签：f#, functional-programming, multicore

我在某处读到函数式编程适合利用计算中的多核趋势。我真的不明白。它与 lambda 演算和冯诺依曼架构有关吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-10-08T04:02:39.460

函数式编程最大限度地减少或消除了副作用，因此更适合分布式编程。即多核处理。

换句话说，许多难题可以同时在不同的内核上独立解决，而不必担心一个操作会影响另一个操作，就像在其他编程风格中一样。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-08T04:05:11.060

处理并行处理最困难的事情之一是锁定数据结构以防止损坏。如果两个线程在没有完全锁定的情况下一次改变一个数据结构，则可能导致从无效数据到死锁的任何事情。

相比之下，函数式编程语言倾向于强调不可变数据。任何状态都与逻辑分开，一旦创建数据结构就无法修改。大大减少了对锁定的需求。

另一个好处是一些非常容易并行化的过程，如迭代，被抽象为函数。在 C++ 中，您可能有一个 for 循环，它对列表中的每个项目运行一些数据处理。但是编译器无法知道这些操作是否可以安全地并行运行——也许一个的结果取决于它之前的一个。当使用类似`map()`or的函数时`reduce()`，编译器可以知道调用之间没有依赖关系。因此可以同时处理多个项目。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2010-06-27T20:21:49.027

> 我在某处读过函数式编程适合利用计算中的多核趋势......我并没有真正明白这个想法。它与 lambda 演算和冯诺依曼架构有关吗？

您引用的信念背后的论点是纯函数式编程控制副作用，这使得引入并行性变得更加容易和安全，因此，纯函数式编程语言在多核计算机的环境中应该是有利的。

不幸的是，由于以下几个原因，这种信念早已被推翻：

*   [纯函数式数据结构的绝对性能很差](http://flyingfrogblog.blogspot.com/2010/06/haskells-hash-table-woes-again.html)。因此，纯粹的函数式编程在性能方面是朝着错误方向迈出的一大步（这是并行编程的唯一目的）。

*   纯函数式数据结构的扩展性很差，因为它们强调共享资源，包括分配器/GC 和主内存带宽。因此，随着内核数量的增加，并行化的纯功能程序通常会获得较差的加速。

*   纯函数式编程使性能不可预测。因此，真正的纯函数式程序在并行化时经常会出现性能*下降*，因为粒度实际上是随机的。

例如，Haskell 社区经常引用的混蛋[两行快速排序通常比用更传统的语言（如 F#）编写的真正的就地快速排序慢数千倍。](http://www.haskell.org/haskellwiki/Introduction#Quicksort_in_Haskell)此外，尽管您可以轻松地并行化优雅的 Haskell 程序，但您不太可能看到任何性能改进，因为所有不必要的复制会使单核使多核机器的整个主内存带宽饱和，从而使并行性毫无价值。事实上，没有人能够在 Haskell 中编写任何具有竞争性能的通用并行排序。Haskell 标准库提供的最先进的排序通常比传统的替代方法慢数百倍。

然而，函数式编程更常见的定义是一种强调使用一流函数的风格，实际上在多核编程的上下文中非常有用，因为这种范式非常适合分解并行程序。例如，请参阅.NET 4 中命名空间中的新高阶`Parallel.For`函数。`System.Threading.Tasks`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-08T04:06:01.747

当没有副作用时，评估顺序无关紧要。然后可以并行计算表达式。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-10-08T04:03:59.957

基本论点是很难自动并行化像 C/C++/等这样的语言，因为函数可以设置全局变量。考虑两个函数调用：

```
a = foo(b, c);
d = bar(e, f); 
```

尽管 foo 和 bar 没有共同的参数，并且一个不依赖于另一个的返回码，但它们仍然可能具有依赖关系，因为 foo 可能会设置 bar 所依赖的全局变量（或其他副作用）。

函数式语言保证 foo 和 bar 是独立的：没有全局变量，也没有副作用。因此 foo 和 bar 可以安全地在不同的内核上自动运行，无需程序员干预。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-12T19:18:06.680

上面的所有答案都指向一个关键思想，即“无共享可变存储”是并行执行程序片段的关键推动因素。它并没有真正解决寻找并行执行的同样困难的问题。但是函数式语言中典型的更清晰的功能表达确实使得理论上更容易从顺序表达式中提取并行性。

在实践中，我认为基于垃圾收集和更改时复制语义的语言的“无共享可变存储”属性使它们更容易添加线程。最好的例子可能是 Erlang，它结合了近功能语义和显式线程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T04:04:32.153

这是一个有点模糊的问题。多核 CPU 的一个好处是您可以运行一个功能程序并让它连续插入，而不必担心影响与机器正在执行的其他功能有关的任何计算。

多 U 服务器与服务器或 PC 中的多核 CPU 之间的区别在于，通过将其放在同一 BUS 上可以节省速度，从而实现更好、更快的内核通信。

编辑：我可能应该通过说在我所做的大多数脚本中，无论是否有多个内核，我都很少看到通过骇人听闻的并行化获取数据的问题，例如在我的脚本中一次运行多个小脚本所以我不会因为等待 URL 加载等事情而放慢速度。

双重编辑：此外，许多函数式编程语言已经分叉了几十年的并行变体。这些更好地利用并行计算并提高了一些速度，但它们从未真正流行起来。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-08T04:04:17.740

省略任何技术/科学术语的原因是因为功能程序不共享数据。数据在函数之间进行复制和传输，因此应用程序中没有共享数据。

共享数据是导致多线程问题一半的原因。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-12T19:48:10.957

Joe Armstrong（[Erlang](http://en.wikipedia.org/wiki/Erlang_programming_language)的创建者）的《[Programming Erlang: Software for a Concurrent World](http://www.pragprog.com/titles/jaerlang/programming-erlang) 》一书谈到了将[Erlang](http://en.wikipedia.org/wiki/Erlang_programming_language)用于多核（/多处理器）系统。正如维基百科文章所述：

> 在 Erlang 中创建和管理进程是微不足道的，而线程在大多数语言中被认为是一个复杂且容易出错的主题。尽管所有并发在 Erlang 中都是显式的，但进程使用消息传递而不是共享变量进行通信，这消除了对锁的需求。

# php - 使用全局会产生任何开销吗？

> ID：181285
> 
> 赞同：2
> 
> 时间：2008-10-08T03:59:17.657
> 
> 标签：php, optimization

如果您在最终没有使用的变量上使用 global 关键字，会不会有问题？比较：

```
function foo() {
    global $fu;
    global $bah;
    if (something()) {
        $fu->doSomething();
    } else {
        $bah->doSomething();
    }
}

function bar() {
    if (something()) {
        global $fu;
        $fu->doSomething();
    } else {
        global $bah;
        $bah->doSomething();
    }
} 
```

我很清楚，使用第二种方法会使维护此代码变得更加困难，并且通常首选将所有全局变量放在函数的开头，因此：**忽略两个函数的可维护性和代码样式的差异，是这两者在开销方面有区别吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T04:01:58.523

如果有，它将无法（人为）测量，除非您确实调用此函数数百万次。即使它是具有该属性的递归函数，我仍然不会将您的第二种方法用于您已经提出的可维护性方面。

**编辑：**为了争论，我实际上去进行了基准测试，`bar()`结果在超过 100 万次调用时慢了 0.1 秒。这意味着性能方面，您仍然有理由使用更清洁的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T04:32:55.577

正如一氧化碳所说，没有显着的性能差异。

但是，如果可能的话，我会避免使用 global；这是一条糟糕的路，你会吃意大利面。使用静态类；它会让事情更有条理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T05:35:41.347

如果您不知道，您可以执行以下操作：

```
function foo() {
    global $fu, $bah;
    if (something()) {
        $fu->doSomething();
    } else {
        $bah->doSomething();
    }
} 
```

您可以将两个全局变量放在同一行。甚至可能让它更快:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-10-08T10:54:35.040

全局变量通常被认为是非常糟糕的风格。我会声称，每当您需要使用 global 关键字或静态类属性（因此，包括臭名昭著的 Singleton）时，您应该认真重新考虑您在做什么。避免全局变量可能需要做更多的工作，但它对代码可维护性来说是一个巨大的好处。这个特殊的例子，可以更好地表达为：

```
function foo($fu, $bah) {
  if (something()) {
    $fu->doSomething();
  } else {
    $bah->doSomething();
  }
} 
```

如果您不喜欢传递大量参数，您可以使用类来封装它们，或者这表明您应该对代码进行不同的分解。

# fonts - 如何制作资源dll来描述设备字体？

> ID：181306
> 
> 赞同：5
> 
> 时间：2008-10-08T04:07:13.613
> 
> 标签：fonts, driver, device-driver, drivers, wdk

我正在构建的目标驱动程序不是本机驱动程序，而是与 Microsoft Universal Pinter 驱动程序一起使用的微型驱动程序

根据 DDK：

> 这些项目的描述 [在我的例子中是字体] 被放置在资源 DLL 中，如 Platform SDK 文档中所述。

然后它继续说：

> 在打印机的资源 DLL 中，使用 RC_UFM 资源类型指定 .ufm 文件，并使用 RC_FONT 资源类型指定 .ifi 文件。

尽管引用了 SDK，但没有关于如何将 .ifi 字体信息实际放置在资源 dll 中的信息。

谁能指出一种方法来做到这一点？

**编辑**

是的，打印机包含常驻字体，我需要创建一个描述它们的资源文件。

到目前为止，我遇到了另一个障碍，因为显然您必须编译到资源 dll 中的字体描述文件不能`.ifi`（即使 DDK 说可以），它们只是不起作用。但是它适用于`.ufm`字体描述文件。问题是我们只有描述设备字体的 ifi 文件，但没有 umf ...

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-11T11:33:51.703

查找 ufm 文件，使用 print MDT（window DDK）构建 ufm 并将它们的条目放入资源文件中

# html - 如何覆盖全局样式表

> ID：181309
> 
> 赞同：2
> 
> 时间：2008-10-08T04:10:42.423
> 
> 标签：html, css, stylesheet

简而言之，有一个全局样式表：

```
a { font-family: Arial; } 
```

我想为特定链接使用不同的字体系列：

```
<a href="..." style="font-family: Helvetica;">...</a> 
```

或者

```
<span style="font-family: Helvetica;"><a href="...">...</a></span> 
```

但没有任何效果。是否有捷径可寻？

PS我动态地（通过PHP）为不同的链接分配不同的字体，所以创建一个特殊的类不是一个选项。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-08T04:13:12.277

除非您有一个名为 Helvetica 的特定字体，否则您应该意识到在某些平台上（例如 Windows，通过[FontSubstitutes](http://technet.microsoft.com/en-us/library/cc757457.aspx)），Helvetica 是 Arial 的别名。这可能是问题的根源。试试另一种字体看看。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-08T04:36:51.213

你的第一次尝试

```
 <a href="..." style="font-family: Helvetica;">...</a> 
```

应该工作。同意您可能缺少字体。内联样式优先于用户定义样式表之外的任何其他样式。以下是样式定义的优先顺序：

1.  用户定义样式
2.  嵌入式或内联样式表
3.  内部样式表
4.  外部样式表
5.  浏览器默认样式

在样式表中，优先级如下：

1.  任何标记为 !important 的内容
2.  # ID

3.  。班级
4.  元素

此外，您还有更具体的规则：`div a`overrides `a`。

这是[一篇很好的文章，其中包含有关该主题的更多详细信息](http://monc.se/kitchen/38/cascading-order-and-inheritance-in-css)。

@Kip 的建议是您最好的选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-08T04:27:03.077

你写的应该可以工作，除非问题是克里斯指出的，

当您获得一对可以正常工作的字体时，您可能会认为这样做的更好方法是为特殊链接声明一个类，以某种方式提醒您**为什么**它们需要单独的字体（可能是因为您想要它们要特别注意？）

```
a { font-family: Arial; }
a .noticed { font-family: Helvetica; } 
```

然后在 HTML 中：

```
<a class="noticed" href="...">...</a> 
```

通过在链接周围创建一个跨度标签来更改字体，或者向链接添加内联样式只是旧时代`<font>`标签的味道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T04:19:13.607

元素样式会覆盖全局样式，因此 Chris Jester-Young 可能是对的，而您实际上并没有 Helvetica 字体；尝试其他字体，例如您确定存在的 Courier 或 Times New Roman

# bash - 如何在 Fedora 上通过 bash 找到 DHCP 分配的 IP 地址？

> ID：181313
> 
> 赞同：0
> 
> 时间：2008-10-08T04:13:58.000
> 
> 标签：bash, ip, fedora, dhcp

fedora 的 bash shell 中是否有一个命令可以为我提供当前分配的 IP 地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-08T04:16:02.113

[ifconfig](http://linux.die.net/man/8/ifconfig)是您正在寻找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-27T23:07:18.243

尝试以下命令：

```
ipconfig getifaddr eth0 
```

# c# - 在 C# 中从 SQL 中捕获异常的最佳实践

> ID：181316
> 
> 赞同：3
> 
> 时间：2008-10-08T04:14:47.797
> 
> 标签：c#, sql, exception

有哪些好方法可以在 C# 中捕获业务逻辑异常或从 SQL 返回值？例如，在创建新用户时，如果用户已经存在，则必须通知系统和用户。我使用了`raise_error()`具有特定状态 int 值的方法，使用了返回 int 值的存储过程，并且还选择了具有特定结构的 msg 列。有没有这方面的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T04:17:24.733

我总是做两件事：

1.  使用 raiseerror，它在代码端表现为异常，并且
2.  返回错误代码

这让我可以在 C# 代码中以及在一个存储过程调用另一个存储过程时捕获错误

[sql server 现在支持 try-catch 块，但我还没用过]

# .net - 标签索引无法正常工作

> ID：181319
> 
> 赞同：0
> 
> 时间：2008-10-08T04:16:01.070
> 
> 标签：.net

我在 tablelayoutpanel 中有一些控件，但控件的选项卡索引无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T04:20:20.297

我不知道您的具体问题是什么，因为这个问题有点模糊，但请注意容器控件与子控件相比具有单独的选项卡索引。

因此，如果您有一个选项卡索引为 0 的父控件，那么您将希望该容器内的第一个子控件也希望焦点为选项卡索引 0。

为了澄清起见，如果您有 3 个容器，每个容器有 3 个控件，则索引应定义如下，用于线性制表符顺序。

```
0:
  0
  1
  2

1:
  0
  1
  2

2:
  0
  1
  2 
```

# oracle-apex - Oracle XE 安装的 APEX 的默认 URL 是什么？

> ID：181321
> 
> 赞同：3
> 
> 时间：2008-10-08T04:16:27.620
> 
> 标签：oracle-apex

我已经用 APEX 安装了 Oracle XE，但忘记写下访问它的 URL。如何确定 URL？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-10-08T04:18:18.333

默认为[http://127.0.0.1:8080/apex](http://127.0.0.1:8080/apex)

如果你碰巧在 Windows 上，开始菜单中也会有一个条目（程序 > Oracle XE > 数据库主页）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-28T07:27:57.047

为了将来参考，要访问 Apex 管理服务：

[http://127.0.0.1:8080/apex/apex_admin](http://127.0.0.1:8080/apex/apex_admin)

# apache - HTTPS 隧道

> ID：181341
> 
> 赞同：27
> 
> 时间：2008-10-08T04:29:43.633
> 
> 标签：apache, proxy, https, ssh, tunnel

在我的工作场所，流量拦截器/防火墙越来越糟糕。我无法通过 22 端口连接到我的家用机器，而且缺乏 ssh 访问让我感到难过。我以前可以通过将 SSH 移动到端口 5050 来使用 SSH，但我认为最近的一些过滤器现在将此流量视为 IM，并可能通过另一个代理将其重定向。这是我最好的猜测；无论如何，我的 ssh 连接现在在我登录之前终止。

这些天我一直在通过 HTTPS 使用 Ajaxterm，因为端口 443 仍然不受干扰，但这远非理想。（糟糕的终端仿真，缺少端口转发，我的浏览器以惊人的速度泄漏内存......）我尝试`mod_proxy_connect`在 . . 可悲的是，这似乎行不通。HTTPS 连接有效，直到我完成发送请求；然后 SSL 废话。似乎接管了整个连接，而不是继续通过管道，这让 HTTPS 客户端感到困惑。`mod_ssl``CONNECT localhost:22 HTTP/1.1``mod_proxy_connect``mod_ssl`

有没有办法让它工作？我不想通过纯 HTTP 执行此操作，原因如下：

*   留下一个像这样的大胖子开放代理只会很臭
*   一个大的开放式代理也不适合 HTTPS，但是需要身份验证对我来说感觉很好
*   HTTP通过代理——我*不太*担心我的流量被嗅探，因为它将通过隧道“纯文本”传输——但它比HTTPS更容易被破坏，而HTTPS基本上不能被代理

要求：

*   必须在端口 443 上工作，而不会干扰其他 HTTPS 流量（即我不能将 ssh 服务器放在端口 443 上，因为我将不再能够通过 HTTPS 提供页面）
*   我拥有或可以编写一个在 Windows（或 Cygwin）下运行的简单端口转发器客户端

## 编辑

DAG：有人向我指出了[通过 HTTP(S) 建立 SSH 隧道，但这并没有帮助：在文章的最后，他们提到了](http://dag.wieers.com/howto/ssh-http-tunneling/)[Bug 29744 - CONNECT 不适用于现有的 SSL 连接](http://issues.apache.org/bugzilla/show_bug.cgi?id=29744)，从而阻止了 HTTPS 上的隧道，正是我遇到的问题。此时，我可能正在查看一些 CGI 脚本，但如果有更好的解决方案可用，我不想将其列为要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T23:35:58.530

找出为什么公司有这样的限制性政策。这可能是有充分理由的。

如果您仍然想绕过该策略，您可以编写一个小型代理，在您的服务器上侦听端口 443，然后根据请求将流量转发到您的 Web 服务器或 SSH 守护程序。不过有两个问题。

1.  要确定是 HTTPS 请求还是 SSH 请求，您需要尝试读取一些具有（小）超时的数据，这是因为 TLS/SSL 握手从客户端发送一些数据开始，而 SSH 握手从服务器开始发送一些数据。超时必须足够大，以延迟在 TLS/SSL 握手中从客户端传递初始数据，因此它会使建立 SSH 连接的速度变慢。

2.  如果您公司中的 HTTP 代理很智能，它实际上会在您`CONNECT`连接到端口 443 时窃听预期的 TLS/SSL“握手”，并且当它检测到它不是 TLS/SSL 握手时，它可能会终止 SSH 连接试图。为了解决这个问题，您可以将 SSH 守护程序包装到 TLS/SSL 隧道中（例如，`stunnel`），但是您需要根据客户端请求中的 TLS/SSL 版本来区分请求以确定是否路由 TLS/SSL连接到 Web 服务器或 TLS/SSL 隧道 SSH 守护程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-08T23:57:41.853

您应该能够使用 iptables 将 ssh 流量从您的工作机器转发到 ssh，而在端口 443 上连接到您的家庭服务器的所有其他机器都获取 Apache 服务器。

试试这样的规则：

`iptables -t nat -A PREROUTING -p tcp -s 111.111.111.111 --dport 433 -j REDIRECT --to-port 22`

其中 111.111.111.111 是您办公室计算机的 IP 地址。

这一切都假设您正在运行 Linux >= 2.4，您现在应该是。它已经出现了将近十年。

iptables 的文档位于[http://www.netfilter.org](http://www.netfilter.org)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-24T09:03:20.473

在家里设置 OpenVPN 2.1 服务器，使用 443 端口（如果你在 443 端口设置你家的任何 HTTPS 服务，触发 OpenVPN 的端口共享选项以在端口 443 处理 OpenVPN 和 HTTPS 事务；此功能仅适用于非视窗操作系统）

然后，在您的笔记本电脑上以公路战士模式设置您的 OpenVPN 客户端，以访问家中的 OpenVPN 服务器。在您使用 OpenVPN 创建的安全 VPN 网络中，您将能够在家中或任何您喜欢的地方打电话。不再需要为此目的使用 SSH。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T05:17:14.707

我真的很抱歉在这里成为魔鬼的拥护者，但如果他们在你的工作中封锁了端口，很可能是因为他们不希望人们破坏安全。

现在，如果你得到老板的许可打开隧道，那很好，但如果发生了什么事，任何事情，他们发现你有隧道，我几乎可以向你保证，你会成为替罪羊。因此，如果我是你，如果他们设置防火墙，我就不会在工作中打开隧道。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-08T08:51:42.683

在你的机器上使用 2 个 IP 地址怎么样？

在一个 IP_1:443 上绑定 apache/https，在另一个 IP_2:443 上绑定你的 sshd？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-03-01T19:00:09.207

能不能找个中间人？

在云中运行一个小型/免费/便宜的实例，在 443 上侦听 SSH，然后通过该云实例在您最喜欢的端口（22 或其他端口）上通过隧道连接到您的 home box。

我敢肯定，它会增加一些延迟，但它解决了保持原始家庭设置完好无损的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T04:52:12.447

我认为你必须找到一个你目前没有使用的端口，你可以离开，然后听它。443 是明显的候选者，但你说那是不可能的。mail (25, 110, 143), telnet (23), ftp (21), DNS (53) 甚至 whois (43) 呢？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-08T07:38:48.353

代理隧道可能是您的答案

[http://proxytunnel.sourceforge.net/](http://proxytunnel.sourceforge.net/)

假设我的 ssh 服务器是 host.domain.tld 而我的工作代理服务器是 10.2.4.37

我会将其添加到我的本地 ssh 配置中

主机 host.domain.tld ProxyCommand /usr/local/bin/proxytunnel -q -p 10.2.4.37:3128 -d %h:%p ProtocolKeepAlives 30

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-03T11:22:02.323

看：

SSH 通过或通过代理

[http://daniel.haxx.se/docs/sshproxy.html](http://daniel.haxx.se/docs/sshproxy.html)

[http://www.agroman.net/corkscrew/](http://www.agroman.net/corkscrew/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-07-17T11:29:01.347

由于 apache 在不涉及 SSL 时对 CONNECT 没有任何问题，因此我关闭了 SSL 功能并使用 stunnel 为我的网站提供 https 版本。这不需要任何重新编译，并允许您的站点正常提供 https。到目前为止，我所知道的最干净的解决方法。

有关详细信息，请参阅[http://chm.duquesne.free.fr/blog/?p=281](http://chm.duquesne.free.fr/blog/?p=281)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-08T23:47:41.827

> 必须在端口 443 上工作，而不会干扰其他 HTTPS 流量（即我不能将 ssh 服务器放在端口 443 上，因为我将不再能够通过 HTTPS 提供页面）

是否可以将您的 HTTPS 服务器绑定到不同的端口？根据它的用途，您甚至可以通过 SSH 回家然后从那里使用 lynx 来解决无法从工作中直接访问它的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-05T14:02:21.437

那么，试试代理器（它支持 HTTP 代理服务器）！

[http://www.proxifier.com/documentation/intro.htm](http://www.proxifier.com/documentation/intro.htm)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-12-03T04:18:16.633

我通过 AjaxTerm 使用以下设计设法绕过了我公司的防火墙，它对我有用。

公司网络上的 PC --> 公司通过 https 的代理 --> INTERNET --> 我在 SSL + .htpasswd 保护上的家庭 Apache 反向代理服务器 --> AjaxTerm 服务器（从这里开始，我可以通过 SSH 连接到任何其他服务器）。

仍然不是完美的世界……如果我可以通过 HTTPS 隧道连接到我的家庭网络，那就太好了。

# windows-installer - 自动安装 MSI

> ID：181342
> 
> 赞同：16
> 
> 时间：2008-10-08T04:29:53.413
> 
> 标签：windows-installer, automated-tests, automated-deploy

自动安装 MSI 文件或安装程序 .exe 的最佳方法是什么？我们想从我们的构建系统对已安装的产品副本进行一些自动化测试。我们的安装程序具有通常的许可证接受屏幕、安装位置等。

* * *

正如 FryHard 指出的那样，有两个特别方便的选项：

*   "/quiet" - 不使用交互
*   "/passive" - 仅进程栏，无人值守模式

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-08T05:09:20.963

要自动安装 MSI 包，您可以使用 /I 选项，如下所示：

```
msiexec.exe /qn /i mypackage.msi 
```

请记住，您需要指定 MSI 包期望用户通过 UI 指定的属性，并且它没有默认值。

您可以使用[Orca 工具](http://msdn.microsoft.com/en-us/library/aa370557(v=vs.85).aspx)查看属性列表并调整 MSI 条件等。要设置属性的值，您可以在命令行中指定它；例如设置一个属性ISDEBUG：

`msiexec.exe /qn /i mypackage.msi ISDEBUG=1`

**旁注**：要自动卸载，请在包或产品代码中使用 /X 选项：

```
msiexec.exe /qn /x mypackage.msi 
```

或者这个（您需要使用您的产品代码更改 CLSID）：

```
msiexec.exe /qn /x {B741B8A3-8DCB-44E0-B06F-2A11F56572DB} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-10-08T04:37:59.323

如果您在命令提示符下转到您的 MSI 软件包之一并运行：

```
Myproduct.MSI /? 
```

将弹出一个屏幕，其中包含您可以传递给 MSI 的命令行参数的所有详细信息。我相信通过这种方式，您可以通过命令提示符安装您的应用程序并以这种方式自动化它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-22T19:09:17.270

尚未发布，但可以供将来参考。

[http://www.paulstovell.com/octopus/intro](http://www.paulstovell.com/octopus/intro)

使用 nugget 包进行自动部署。

# sql-server - 比较 SQL Server 性能的快速而肮脏的方法

> ID：181343
> 
> 赞同：1
> 
> 时间：2008-10-08T04:29:56.017
> 
> 标签：sql-server, database, performance, benchmarking

除了我之前关于[SQL server 的 Optimal RAID setup 的](https://stackoverflow.com/questions/165383/optimal-raid-setup-for-sql-server)问题之外，任何人都可以建议一种快速而肮脏的方法来对新旧服务器上的数据库性能进行基准测试以比较它们吗？显然，正确的方法是监控我们的实际使用情况并设置各种性能计数器并捕获查询等，但我们还没有达到那种复杂程度，这不是我们能够做到的做着急。所以与此同时，我追求的东西会不太准确，但做起来很快，总比没有好。只要它没有误导，那将比没有更糟糕。它应该是特定于 SQL Server 的，而不仅仅是“综合”基准。如果我们可以为此使用我们的实际数据库，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T05:59:41.890

使用新旧服务器测量应用程序本身的性能。这并不容易：

*   使用您的应用程序设置一个性能测试环境（取决于您的架构，这可能由多台机器组成，其中一些可能是虚拟机，但其中一些可能不是）
*   创建“驱动程序”程序，为应用程序提供模拟工作
*   在相同条件下运行批量工作 - 请记住在运行之间重新启动数据库服务器以消除缓存的影响（否则您的第二次和后续运行可能会非常快）

确保性能测试环境中有足够的硬件机器能够重载数据库——这可能意味着将一些虚拟机换成真正的硬件。

请记住在您的性能测试环境中使用生产级硬件——即使它很昂贵。

我们的数据库性能测试集群包含六台硬件机器，其中几台是生产级的，其中一台包含昂贵的存储阵列。我们在 7 日还有大约十几个虚拟机来模拟服务的其他部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T04:50:30.843

你总是可以插入、读取和删除几百万行——这不是一个现实的操作组合，但它应该很好地给磁盘带来压力......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T05:17:40.900

找到至少几个需要一些时间的查询，或者至少是您怀疑需要时间的查询，如果您还没有数据，请插入大量数据，然后运行已设置的查询：SET STATISTICS IO ON SET STATISTICS TIME ON SET STATISTICS PROFILE ON 这些应该让您大致了解正在消耗的资源。

您还可以运行 SQL Server Profiler 以大致了解哪些查询需要很长时间以及它们需要多长时间以及其他统计信息。它会输出大量数据，因此请尝试对其进行过滤，可能是通过较长的持续时间或其他性能统计数据之一。

# sql - ORA-01438: 大于指定精度的值允许此列

> ID：181344
> 
> 赞同：17
> 
> 时间：2008-10-08T04:30:11.650
> 
> 标签：sql, database, oracle, plsql, ora-01438

我们有时会从合作伙伴的数据库中收到以下错误：

```
<i>ORA-01438: value larger than specified precision allows for this column</i> 
```

完整的响应如下所示：

```
<?xml version="1.0" encoding="windows-1251"?>
<response>
  <status_code></status_code>
  <error_text>ORA-01438: value larger than specified precision allows for this column ORA-06512: at &quot;UMAIN.PAY_NET_V1_PKG&quot;, line 176 ORA-06512: at line 1</error_text>
  <pay_id>5592988</pay_id>
  <time_stamp></time_stamp>
</response> 
```

此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2010-04-29T23:44:26.613

您尝试存储的数字对于该字段来说太大了。看看规模和精度。两者的区别在于您可以存储的小数点前的位数。

```
select cast (10 as number(1,2)) from dual
             *
ERROR at line 1:
ORA-01438: value larger than specified precision allowed for this column

select cast (15.33 as number(3,2)) from dual
             *
ERROR at line 1:
ORA-01438: value larger than specified precision allowed for this column 
```

低端的任何内容都会被截断（静默）

```
select cast (5.33333333 as number(3,2)) from dual;
CAST(5.33333333ASNUMBER(3,2))
-----------------------------
                         5.33 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-08T04:56:20.800

该错误似乎不是字符字段之一，而更多是数字字段。（如果它是像 WW 提到的字符串问题，你会得到一个“值太大”或类似的东西。）可能你使用的数字超出了允许的范围，例如定义为数字的列中的 1,000000001 (10,2 ）。

查看 WW 提到的源代码以找出可能导致问题的列。然后检查那里正在使用的数据（如果可能）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-08T04:35:31.280

这表明您正在尝试将太大的内容放入列中。例如，您有一个 VARCHAR2(10) 列，并且要输入 11 个字符。号码也一样。

这发生在包 UMAIN 的第 176 行。你需要去看看它，看看它在做什么。希望您可以在源代码管理（或从 user_source）中查找它。Oracle 的更高版本更好地报告了这个错误，告诉你哪一列和什么值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T06:49:26.143

除了先前的答案，您应该注意定义为 VARCHARS(10) 的列将存储 10**个字节**，而不是 10 个字符，除非您将其定义为 VARCHAR2(10 CHAR)

[OP的问题似乎与数字相关......这是以防万一其他人有类似的问题]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-27T15:14:41.263

仅供参考：数值字段大小违规将给出 ORA-01438：值大于此列允许的指定精度

VARCHAR2 字段长度违规将给出 ORA-12899: value too large for column...

Oracle 根据错误代码和消息来区分列的数据类型。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T14:00:13.263

来自[http://ora-01438.ora-code.com/（Oracle](http://ora-01438.ora-code.com/)支持之外的权威资源）：

*ORA-01438*：该列允许的值大于指定的精度
**原因**：插入或更新记录时，输入的数值超过了为该列定义的精度。
**行动**：输入一个符合数字列的精度的值，或使用修改选项与 ALTER TABLE 命令来扩大精度。

[http://ora-06512.ora-code.com/](http://ora-06512.ora-code.com/)：

*ORA-06512*：在 stringline 字符串
**原因**：回溯消息，因为堆栈被未处理的异常展开。
**行动**：修复导致异常的问题或为此情况编写异常处理程序。或者您可能需要联系您的应用程序管理员或 DBA。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T05:12:30.690

我遇到的一个非常棘手的问题是，描述列属性的 OCI 调用的行为因 Oracle 版本而异。描述在 9i、1Og 和 11g 上创建的没有任何 prec 或比例返回差异的简单 NUMBER 列

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-04-30T02:00:39.077

定义如下变量可能是一个好习惯：

```
v_departmentid departments.department_id%TYPE; 
```

不像下面这样：

```
v_departmentid NUMBER(4) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-13T11:13:19.193

如果您使用 PHP 和绑定整数变量（oci_bind_by_name 和 SQLT_INT），也可能会得到此错误代码。如果您尝试通过绑定变量插入 NULL，那么您会收到此错误，或者有时会插入值 2（这更糟）。

要解决此问题，您必须改为将变量绑定为固定长度的字符串 (SQLT_CHR)。在插入之前必须将 NULL 转换为空字符串（在 Oracle 中等于 NULL），并且所有其他整数值必须转换为其字符串表示形式。

# javascript - 通过调用prototype.constructor.apply 实例化一个JavaScript 对象

> ID：181348
> 
> 赞同：54
> 
> 时间：2008-10-08T04:32:36.183
> 
> 标签：javascript, reflection

让我从一个我正在尝试做的具体例子开始。

我在表单中有一组年、月、日、小时、分钟、秒和毫秒组件`[ 2008, 10, 8, 00, 16, 34, 254 ]`。我想使用以下标准构造函数实例化一个 Date 对象：

```
new Date(year, month, date [, hour, minute, second, millisecond ]) 
```

如何将我的数组传递给此构造函数以获取新的 Date 实例？*[**更新**：我的问题实际上超出了这个具体的例子。我想要一个内置 JavaScript 类的通用解决方案，比如 Date、Array、RegExp 等，它们的构造函数超出了我的能力范围。]*

我正在尝试执行以下操作：

```
var comps = [ 2008, 10, 8, 00, 16, 34, 254 ];
var d = Date.prototype.constructor.apply(this, comps); 
```

我可能`new`在某个地方需要一个“”。以上只是返回当前时间，就好像我调用了“ `(new Date()).toString()`”一样。我也承认我可能完全走错了方向:)

***注意****：请不要`eval()`一一访问数组项。我很确定我应该能够按原样使用数组。*

* * *

## 更新：进一步的实验

由于还没有人能够提出一个可行的答案，所以我做了更多的尝试。这是一个新的发现。

我可以用我自己的班级做到这一点：

```
function Foo(a, b) {
    this.a = a;
    this.b = b;

    this.toString = function () {
        return this.a + this.b;
    };
}

var foo = new Foo(1, 2);
Foo.prototype.constructor.apply(foo, [4, 8]);
document.write(foo); // Returns 12 -- yay! 
```

但它不适用于内在的 Date 类：

```
var d = new Date();
Date.prototype.constructor.call(d, 1000);
document.write(d); // Still returns current time :( 
```

它也不适用于 Number：

```
var n = new Number(42);
Number.prototype.constructor.call(n, 666);
document.write(n); // Returns 42 
```

也许这对于内在对象是不可能的？我正在使用 Firefox BTW 进行测试。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2008-10-19T21:58:38.630

由于 Date 类的实现方式，我自己进行了更多调查并得出结论，**这是一个不可能的壮举。**

我检查了[SpiderMonkey](http://www.mozilla.org/js/spidermonkey/)源代码以了解 Date 是如何实现的。我认为这一切都归结为以下几行：

```
static JSBool
Date(JSContext *cx, JSObject *obj, uintN argc, jsval *argv, jsval *rval)
{
    jsdouble *date;
    JSString *str;
    jsdouble d;

    /* Date called as function. */
    if (!(cx->fp->flags & JSFRAME_CONSTRUCTING)) {
        int64 us, ms, us2ms;
        jsdouble msec_time;

        /* NSPR 2.0 docs say 'We do not support PRMJ_NowMS and PRMJ_NowS',
         * so compute ms from PRMJ_Now.
         */
        us = PRMJ_Now();
        JSLL_UI2L(us2ms, PRMJ_USEC_PER_MSEC);
        JSLL_DIV(ms, us, us2ms);
        JSLL_L2D(msec_time, ms);

        return date_format(cx, msec_time, FORMATSPEC_FULL, rval);
    }

    /* Date called as constructor. */
    // ... (from here on it checks the arg count to decide how to create the date) 
```

当 Date 用作函数时（as`Date()`或`Date.prototype.constructor()`，它们完全相同），它默认返回当前时间作为语言环境格式的字符串。这与传入的任何参数无关：

```
alert(Date()); // Returns "Thu Oct 09 2008 23:15:54 ..."
alert(typeof Date()); // Returns "string"

alert(Date(42)); // Same thing, "Thu Oct 09 2008 23:15:54 ..."
alert(Date(2008, 10, 10)); // Ditto
alert(Date(null)); // Just doesn't care 
```

我不认为在 JS 级别可以做任何事情来规避这一点。而这大概就是我对这个话题的追求的结束。

我还注意到一些有趣的事情：

```
 /* Set the value of the Date.prototype date to NaN */
    proto_date = date_constructor(cx, proto);
    if (!proto_date)
        return NULL;
    *proto_date = *cx->runtime->jsNaN; 
```

`Date.prototype`是具有内部值的 Date 实例，`NaN`因此，

```
alert(Date.prototype); // Always returns "Invalid Date"
                       // on Firefox, Opera, Safari, Chrome
                       // but not Internet Explorer 
```

IE 没有让我们失望。它做的事情有点不同，可能会将内部值设置为，`-1`以便 Date.prototype 总是返回略早于纪元的日期。

* * *

## 更新

我终于深入研究了 ECMA-262 本身，事实证明，我想要实现的（使用 Date 对象）是——根据定义——不可能：

> **15.9.2 作为函数调用的日期构造函数**
> 
> 当 Date 作为函数而不是构造函数调用时，它返回一个表示当前时间 (UTC) 的字符串。
> 
> **注意**函数调用`Date(…)`不等同于`new Date(…)` 具有相同参数的对象创建表达式。
> 
> **15.9.2.1 日期（[年[，月[，日期[，小时[，分钟[，秒[，毫秒]]]]]]]）**
> 
> 所有参数都是可选的；提供的任何参数都被接受，但完全被忽略。一个字符串被创建并返回，就像由表达式一样`(new Date()).toString()`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-07-22T20:31:02.453

我很难称之为优雅，但在我的测试（FF3、Saf4、IE8）中它可以工作：

`var arr = [ 2009, 6, 22, 10, 30, 9 ];`

而不是这个：

`var d = new Date( arr[0], arr[1], arr[2], arr[3], arr[4], arr[5] );`

试试这个：

`var d = new Date( Date.UTC.apply( window, arr ) + ( (new Date()).getTimezoneOffset() * 60000 ) );`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-10-08T07:30:49.787

这就是您可以解决特定情况的方法：-

```
function writeLn(s)
{
    //your code to write a line to stdout
    WScript.Echo(s)
}

var a =  [ 2008, 10, 8, 00, 16, 34, 254 ]

var d = NewDate.apply(null, a)

function NewDate(year, month, date, hour, minute, second, millisecond)
{
    return new Date(year, month, date, hour, minute, second, millisecond);
}

writeLn(d) 
```

但是，您正在寻找更通用的解决方案。创建构造方法的推荐代码是拥有它`return this`。

因此：-

```
function Target(x , y) { this.x = x, this.y = y; return this; } 
```

可以建造：-

```
var x = Target.apply({}, [1, 2]); 
```

然而，并非所有实现都以这种方式工作，尤其是因为原型链是错误的：-

```
var n = {};
Target.prototype = n;
var x = Target.apply({}, [1, 2]);
var b = n.isPrototypeOf(x); // returns false
var y = new Target(3, 4);
b = n.isPrototypeOf(y); // returns true 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-20T05:58:04.740

它不够优雅，但这里有一个解决方案：

```
function GeneratedConstructor (methodName, argumentCount) {
    var params = []

    for (var i = 0; i < argumentCount; i++) {
        params.push("arguments[" + i + "]")
    }

    var code = "return new " + methodName + "(" + params.join(",") +  ")"

    var ctor = new Function(code)

    this.createObject = function (params) {
        return ctor.apply(this, params)
    }
} 
```

这种工作方式应该很明显。它通过代码生成创建一个函数。此示例为您创建的每个构造函数都有固定数量的参数，但无论如何这很有用。大多数时候，您至少要考虑最大数量的参数。这也比这里的其他一些示例更好，因为它允许您生成一次代码，然后重新使用它。生成的代码利用了 javascript 的可变参数功能，这样您就可以避免命名每个参数（或将它们拼写在列表中并将参数传递给您生成的函数）。这是一个工作示例：

```
var dateConstructor = new GeneratedConstructor("Date", 3)
dateConstructor.createObject( [ 1982, 03, 23 ] ) 
```

这将返回以下内容：

> 1982 年 4 月 23 日星期五 00:00:00 GMT-0800 (PST)

确实还是……有点丑。但它至少可以方便地隐藏混乱，并且不假设编译后的代码本身可以被垃圾收集（因为这可能取决于实现并且可能是错误的区域）。

干杯，斯科特·S·麦考伊

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T09:55:01.887

这就是你的做法：

```
function applyToConstructor(constructor, argArray) {
    var args = [null].concat(argArray);
    var factoryFunction = constructor.bind.apply(constructor, args);
    return new factoryFunction();
}

var d = applyToConstructor(Date, [2008, 10, 8, 00, 16, 34, 254]); 
```

它适用于任何构造函数，而不仅仅是内置函数或可以兼作函数的构造函数（如 Date）。

但是它确实需要 Ecmascript 5 .bind 函数。垫片可能无法正常工作。

顺便说一句，其他答案之一建议`this`从构造函数中返回。这会使使用经典继承扩展对象变得非常困难，所以我认为它是一种反模式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-02T03:46:02.767

使用 ES6 语法，至少有两种方法可以实现这一点：

*   [扩展运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)
*   [反射构造](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/construct)

```
var comps = [ 2008, 10, 8, 00, 16, 34, 254 ];

// with the spread operator
var d1 = new Date(...comps);

// with Reflect.construct
var d2 = Reflect.construct(Date, comps);

console.log('d1:', d1, '\nd2:', d2);
// or more readable:
console.log(`d1: ${d1}\nd2: ${d2}`);
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-22T20:17:24.270

它将与 ES6 扩展运算符一起使用。您只需：

```
const arr = [2018, 6, 15, 12, 30, 30, 500];
const date = new Date(...arr);

console.log(date); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-17T06:06:16.087

您可以通过公然、**公然**滥用 eval 来做到这一点：

```
var newwrapper = function (constr, args) {
  var argHolder = {"c": constr};
  for (var i=0; i < args.length; i++) {
    argHolder["$" + i] = args[i];
  }

  var newStr = "new (argHolder['c'])(";
  for (var i=0; i < args.length; i++) {
    newStr += "argHolder['$" + i + "']";
    if (i != args.length - 1) newStr += ", ";
  }
  newStr += ");";

  return eval(newStr);
} 
```

示例用法：

```
function Point(x,y) {
    this.x = x;
    this.y = y;
}
var p = __new(Point, [10, 20]);
alert(p.x); //10
alert(p instanceof Point); //true 
```

享受 =)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-25T10:19:48.693

```
function gettime()
{
    var q = new Date;
    arguments.length && q.setTime( ( arguments.length === 1
        ? typeof arguments[0] === 'number' ? arguments[0] : Date.parse( arguments[0] )
        : Date.UTC.apply( null, arguments ) ) + q.getTimezoneOffset() * 60000 );
    return q;
};

gettime(2003,8,16)

gettime.apply(null,[2003,8,16]) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2011-04-05T17:36:40.477

我知道这已经很长时间了，但我有这个问题的真正答案。这远非不可能。有关通用解决方案，请参阅[https://gist.github.com/747650](https://gist.github.com/747650)。

```
var F = function(){};
F.prototype = Date.prototype;
var d = new F();
Date.apply(d, comps); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-08-01T15:34:05.853

这是另一个解决方案：

```
function createInstance(Constructor, args){
    var TempConstructor = function(){};
    TempConstructor.prototype = Constructor.prototype;
    var instance = new TempConstructor;
    var ret = Constructor.apply(instance, args);
    return ret instanceof Object ? ret : instance;
}

console.log( createInstance(Date, [2008, 10, 8, 00, 16, 34, 254]) ) 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2008-10-08T07:50:53.367

已编辑

抱歉，我确定我几年前就是这样做的，现在我会坚持：

var d = new Date(comps[0],comps[1],comps[2],comps[3],comps[4],comps[5],comps[6]);

编辑：

但请记住，javascript Date-object 使用几个月的索引，所以上面的数组意味着

2008 年 11 月 8 日 00:16:34:254

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2008-10-08T20:11:16.600

```
var comps = [ 2008, 10, 8, 00, 16, 34, 254 ];
var d = eval("new Date(" + comps.join(",") + ");"); 
```

# ruby-on-rails - 在这种情况下，如何以 RESTfully 方式使用 Rails 帮助程序 link_to？

> ID：181353
> 
> 赞同：3
> 
> 时间：2008-10-08T04:34:33.950
> 
> 标签：ruby-on-rails, rest

我基本上想使用 link_to 链接到控制器的索引方法。我试过：

```
<%= link_to 'Recipes', Recipe %> 
```

但输出：

```
<a href="/recipes/Recipe">Recipes</a> 
```

这显然是不对的，如果它离开了最后一点，它会完全按照我的意愿去做。我认为使用 RESTful 的东西我会开始忽略动作或类似的东西。我有什么误解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-08T05:25:40.617

使用 restful 路由，大多数时候您需要调用辅助方法来生成路由。

例如：

```
link_to 'Recipes', recipes_path 
```

有一个优化，您可以只传入一个配方对象，它会在幕后为您调用辅助方法：例如：

```
link_to 'Recipe X', @recipe 
```

是相同的

```
link_to 'Recipe X', recipe_path(@recipe) 
```

然而，这只是一个特例。

您正在做的是传递*食谱类本身*，而不是有效的食谱对象。由于 rails 不知道如何处理这个问题，作为后备它只是调用`.to_s`你给它的任何东西，然后把它交给`recipe_path`，这就是你看到奇怪 URL 的原因。

### 提示：使用`_path`辅助方法而不是`_url`方法。

`_url`为您提供完整的 URL，例如`http://stackoverflow.com/recipes/5`while `_path`just give you `/recipes/5`.
完整 URL 的问题在于，在生产过程中，您的 Rails 应用程序在很多时候都作为位于负载均衡器后面的杂种运行，因此它认为它的主机名实际上是`1.2.3.4`（或任何内部 LAN IP）而不是真实的URL，因此将提供损坏的链接。

# c# - 在单元测试中获取命令行参数

> ID：181354
> 
> 赞同：2
> 
> 时间：2008-10-08T04:35:18.893
> 
> 标签：c#, .net, unit-testing, visual-studio-2008, mstest

在 Visual Studio 2008 (Pro) 的一个测试项目中，我创建了一个测试项目，并且我想配置项目属性以向测试提供命令行参数。我设置了属性，但后来意识到我不知道如何实际使用该参数。

您如何从 MSTest 获得论点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T04:56:58.023

据我所知，VS 2008 测试被编译成不能直接接收命令行参数的 DLL。

您可以为 dll 添加配置文件“app.config”并使用它。

请注意，mstest 仅复制当时正在运行的测试容器的 .config 文件。

如果您有以下...

```
mytest.dll
mytest.dll.config
lib.dll
lib.dll.config 
```

并且您从 mytest.dll 引用 lib.dll，当您运行测试时，lib.dll.config 不会被复制，并且您的测试可能因此而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T04:42:51.610

也许你可以使用[GetCommandLine](http://msdn.microsoft.com/en-us/library/ms683156(VS.85).aspx) ()。

编辑：GetCommandLine() 是一个 win32 函数，但应该有一个相应的 .Net 函数。

# c# - 正则表达式匹配字母数字和空格

> ID：181356
> 
> 赞同：52
> 
> 时间：2008-10-08T04:35:34.900
> 
> 标签：c#, regex

我在这里做错了什么？

```
string q = "john s!";
string clean = Regex.Replace(q, @"([^a-zA-Z0-9]|^\s)", string.Empty);
// clean == "johns". I want "john s"; 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2011-07-22T18:10:06.107

仅供参考

```
string clean = Regex.Replace(q, @"[^a-zA-Z0-9\s]", string.Empty); 
```

实际上会更好

```
string clean = Regex.Replace(q, @"[^\w\s]", string.Empty); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2011-07-08T17:36:50.833

这：

```
string clean = Regex.Replace(dirty, "[^a-zA-Z0-9\x20]", String.Empty); 
```

> > **\x20**是“空格”字符的 ascii 十六进制

您可以添加更多您希望被允许的单个字符。如果你想例如**“？”** 可以在返回字符串中添加**\x3f**。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-10-08T04:41:09.177

我得到了它：

```
string clean = Regex.Replace(q, @"[^a-zA-Z0-9\s]", string.Empty); 
```

不知道你可以把 \s 放在括号里

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-08T04:37:38.513

我怀疑 ^ 不像你认为的那样在字符类之外工作。

你告诉它做的是用空字符串或任何前导空格替换不是字母数字的所有内容。我认为你的意思是空格可以不替换 - 尝试将 \s 移动到 [] 类中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-24T13:59:15.133

以下正则表达式用于文本框中的空间包含。

```
Regex r = new Regex("^[a-zA-Z\\s]+");
r.IsMatch(textbox1.text); 
```

这对我来说很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-08T04:38:56.500

似乎有两个问题。

1.  您在与行首匹配的 [] 之外使用 ^
2.  您没有使用 * 或 +，这意味着您只会匹配一个字符。

我认为您想要以下正则表达式 @"([^a-zA-Z0-9\s])+"

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-22T23:45:16.880

底部带空格的正则表达式，支持来自不同文化的所有键盘字母

```
 string input = "78-selim güzel667.,?";
 Regex regex = new Regex(@"[^\w\x20]|[\d]");
 var result= regex.Replace(input,"");
 //selim güzel 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-08T04:39:35.250

方括号内的抑扬符表示除后续范围之外的所有字符。您想要方括号之外的抑扬符。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-30T11:59:37.533

此正则表达式将帮助您过滤是否至少有一个字母数字字符和零个或多个特殊字符，即 _（下划线）、\s 空格、-（连字符）

```
string comparer = "string you want to compare";
Regex r = new Regex(@"^([a-zA-Z0-9]+[_\s-]*)+$");

if (!r.IsMatch(comparer))
{
   return false;
}    
return true; 
```

使用字母数字字符创建一个集合`[a-zA-Z0-9]+`，集合末尾的“+”号（量词）将确保`comparer`.

为特殊字符创建另一个集合`[_\s-]*`，“*”量词是为了验证字符串中可以有特殊字符`comparer`。

将这些集合打包成一个捕获组`([a-zA-Z0-9]+[_\s-]*)+`，表示`comparer`字符串应该占据这些特征。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-03T07:57:55.560

```
[RegularExpression(@"^[A-Z]+[a-zA-Z""'\s-]*$")] 
```

上面的语法也接受空格

# sql-server-2005 - 将 SQL Server 数据库从 2005 年转换为 2000 年

> ID：181363
> 
> 赞同：2
> 
> 时间：2008-10-08T04:37:39.187
> 
> 标签：sql-server-2005, sql-server-2000

我们有一个需要转换回 SQL Server 2000 的 Microsoft SQL Server 2005 数据库。有人对我应该用来执行此转换的方法或工具有什么建议吗？我们没有在数据库中使用任何 SQL Server 2005 特定功能，因此这不会导致转换出现问题。

我应该提一下，我发现 Microsoft SQL Server 导出工具在处理自动生成的密钥方面非常有问题，因此我们将不胜感激有关替代工具的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T04:44:44.303

在 SQL2005 中为您的数据库生成一个完整的脚本，并将“服务器版本脚本”选项更改为 SQL Server 2000。您现在可以在 SQL 2000 服务器上重新创建您的数据库。完成后，使用导出数据功能从 SQL 2005 导出到 SQL 2000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T05:00:21.853

试用[RedGate SQL ToolBelt](http://www.red-gate.com/products/SQL_Professional_Toolbelt/index.htm)，然后使用：

1.  [SQL比较](http://www.red-gate.com/products/SQL_Compare/index.htm)转移数据库
2.  [SQL 数据比较](http://www.red-gate.com/products/SQL_Data_Compare/index.htm)以传输数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T04:43:31.793

1.  编写整个数据库的脚本
2.  创建一个新的 SQL2000 数据库
3.  在新数据库上运行脚本
4.  将数据从 SQL2005 导入 SQL2000 数据库（有很多方法可以做到这一点）

某处可能有一个工具可以为您完成所有这些工作，尽管我不知道这样做有多普遍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-13T00:30:13.273

你想要做的就是降级。谷歌给出了很多结果，但这里有一个很好的微软论坛线程的[演练（向下滚动到页面底部附近）。](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=722132&SiteID=1)

# c# - visual c# 表单更新导致闪烁

> ID：181374
> 
> 赞同：9
> 
> 时间：2008-10-08T04:42:32.793
> 
> 标签：c#, winforms

我有一个用 c# 编写的 .net 应用程序。在某些表单上，我经常更新显示字段。在某些情况下，表单上的每个字段（文本框、标签、图片框等）的值都会更改。再加上更改的频率可能是每秒一次。但是，目前每次更新表单时都会出现可怕的闪烁。我怎样才能停止闪烁？有没有办法双缓冲？请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-08T04:45:10.653

简短的回答是

```
SetStyle(ControlStyles.OptimizedDoubleBuffer, true); 
```

长答案是：见[MSDN](http://msdn.microsoft.com/en-us/library/3t7htc9c(VS.80).aspx?ppud=4)或[谷歌](http://www.google.com/search?hl=en&q=C%23+form+double+buffer&aq=f&oq=)

只是为了好玩，在每个元素更新后尝试调用 Application.DoEvents() ，看看问题是变好还是变坏；-)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-17T17:15:44.363

这对我有用。

[http://www.syncfusion.com/faq/windowsforms/search/558.aspx](http://www.syncfusion.com/faq/windowsforms/search/558.aspx)

基本上它涉及从所需的控件派生并设置以下样式。

```
SetStyle(ControlStyles.UserPaint, true);
SetStyle(ControlStyles.AllPaintingInWmPaint, true); 
SetStyle(ControlStyles.DoubleBuffer, true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-08T04:45:57.157

您可以尝试调用**this.SuspendLayout();** 在开始更新之前**this.ResumeLayout(false);** 当您以这种方式完成所有值的设置后，它应该会阻止表单一次写入一个值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-06-28T19:40:18.700

我知道这个问题很老，但将来可能会有其他人在寻找它。

双缓冲并不总是很好。强制表单根本不闪烁（但有时会导致绘图问题）：

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x02000000; //WS_EX_COMPOSITED
        return cp;
    }
} 
```

要在用户调整表单大小时停止闪烁，但不会弄乱控件的绘制（假设您的表单名称是“Form1”）：

```
int intOriginalExStyle = -1;
bool bEnableAntiFlicker = true;

public Form1()
{
    ToggleAntiFlicker(false);
    InitializeComponent();
    this.ResizeBegin += new EventHandler(Form1_ResizeBegin);
    this.ResizeEnd += new EventHandler(Form1_ResizeEnd);
}

protected override CreateParams CreateParams
{
    get
    {
        if (intOriginalExStyle == -1)
        {
            intOriginalExStyle = base.CreateParams.ExStyle;
        }
        CreateParams cp = base.CreateParams;

        if (bEnableAntiFlicker)
        {
            cp.ExStyle |= 0x02000000; //WS_EX_COMPOSITED
        }
        else
        {
            cp.ExStyle = intOriginalExStyle;
        }

        return cp;
    }
} 

private void Form1_ResizeBegin(object sender, EventArgs e)
{
    ToggleAntiFlicker(true);
}

private void Form1_ResizeEnd(object sender, EventArgs e)
{
    ToggleAntiFlicker(false);
}

private void ToggleAntiFlicker(bool Enable)
{
    bEnableAntiFlicker = Enable;
    //hacky, but works
    this.MaximizeBox = true;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-08-10T03:05:51.573

它也可能是由您的编码引起的，而不是由于没有双缓冲。我刚刚来到这里遇到了类似的问题，但意识到这是因为：

1.  当未选择项目时，我将框架设置为不可见。
2.  在用户选择之间，索引由 ListView 控件清除。
3.  我被绑定到 SelectedIndexChanged 事件

换句话说：

*   用户点击项目 1
    ~ SelectedIndexChanged(1)

*   用户单击项目 2
    ~ SelectedIndexChanged(-1) <---- 这会导致闪烁
    ~ SelectedIndexChanged(2)

那么解决方案是什么？[如何避免数千个不必要的 ListView.SelectedIndexChanged 事件？](https://stackoverflow.com/questions/86793/how-to-avoid-thousands-of-needless-listview-selectedindexchanged-events)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-07-17T14:46:54.087

您可以将原始控件替换为将 DoubleBuffered 属性保护为 true 的自定义控件。例如，对于 ListView，它将是这样的：

```
internal class DoubleBufferedListView : ListView {

    public DoubleBufferedListView()
        : base() {
        this.DoubleBuffered = true;
    }

} 
```

之后，您只需访问 *.Designer.cs 文件并将所有提及本机控件的内容替换为该文件。

PS 除了从控件继承之外，您还可以通过反射设置此属性：

```
listView1.GetType().GetProperty("DoubleBuffered", BindingFlags.Instance | BindingFlags.NonPublic).SetValue(lsvReport, true, null); 
```

它既不干净也不推荐，但它不需要更改 *.Designer.cs 文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T04:45:03.647

你没有好好研究这个。每个 Form 中都有一个 DoubleBuffered 属性。尝试将其设置为 true。如果您没有在表格绘画上重载任何内容，那么一切都应该正常工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-08T04:46:27.967

您几乎可以对每个 Windows 窗体控件进行[双重缓冲](http://www.codeproject.com/KB/graphics/DoubleBuffering.aspx)，尽管大多数情况下它需要您从所需的控件继承并覆盖受保护的属性。不过请注意，我在同一个问题上花费了相当多的时间，但我还没有完全消除更复杂表单上的闪烁。

如果您想要真正无闪烁的窗口，我建议您查看 WPF。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-08T04:45:28.717

重影通常是因为您在单个线程中运行并且由于字段更新而被阻止，因此绘制事件不会触发。解决此问题的一种方法是将繁重的工作放在异步方法中。这将允许表单重新绘制自身并在异步方法回调时更新所需的任何内容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-06-22T18:57:16.987

我对 OpenGLES 有同样的问题，这就是我找到这个线程的方式。当然我意识到你没有使用 ogl，但也许这对你有帮助；）

`protected override void OnPaintBackground(PaintEventArgs e) { }`

# lotus-notes - 使用 Lotus 公式更新列表元素

> ID：181377
> 
> 赞同：0
> 
> 时间：2008-10-08T04:43:06.583
> 
> 标签：lotus-notes, lotus-formula

我正在尝试使用 Lotus Formula 更新列表中的元素。

我以为你会这样做：

```
x := "0":"0":"0";
x[1] := "1"; 
```

但是当我尝试保存时，出现以下错误：

```
:= must be immediately preceded by a field or variable name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-12T07:50:20.343

来自[Lotus Domino Designer 7 帮助](http://www-12.lotus.com/ldd/doc/domino_notes/7.0/help7_designer.nsf)：

> 下标运算符不能用在赋值语句的左侧。也就是说，您不能为下标元素赋值。您必须建立完整的列表，然后分配它。例如，如果 Categories 是一个 3 元素列表，并且您想为元素 2 分配一个新值：

```
FIELD Categories := Categories[1] : "CatNew" : Categories[3] 
```

您通常可以使用@Implode、@Explode 或@Replace 来获取。但如果你真的需要它，你可以这样做：

```
REM {FieldName[Index] := NewVal};
Index := 2;
NewVal := "CatNew";

maxIndex := @Elements(FieldName);
PrePart := @If(Index > 1; @Subset(FieldName; Index-1); "");
PostPart := @If(Index < maxIndex; @Subset(FieldName; (Index-maxIndex)); "");

Field FieldName := PrePart : NewVal : PostPart 
```

# delphi - Delphi 项目需要运行时包，即使运行时包关闭

> ID：181380
> 
> 赞同：6
> 
> 时间：2008-10-08T04:44:05.663
> 
> 标签：delphi, packages, bpl

如果路径中没有一些运行时包，我的 Delphi7 项目将无法在我的客户端计算机上运行。例如 rtl70.bpl

我没有勾选*运行时包*的构建，所以不应该将它们编译到 exe 中吗？

编辑：该项目使用 Jedi Packages (TJvPlugin) 并且在没有安装任何插件的情况下运行该程序可以正常工作。一旦我添加了一个插件，bpl not found 错误就会再次出现。似乎我不得不忍受额外的包裹。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-08T06:40:59.577

已经有一段时间了，但您似乎需要（1）使用运行时包检查构建，然后启用其他一些编辑器（可能是要使用的包列表），然后您（2）进行更改那里。(3) 然后进行完整构建，然后 (4) 删除运行时包检查并进行另一 (5) 完整构建。每次都进行完整的构建很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T06:48:24.023

从内存中：
1\. 检查带有运行时包的构建
2\. 从列表中删除所有运行时包
3\. 完全构建
4\. 取消选中带有运行时包的构建
5\. 完全构建。

无法测试，没有D7了...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T22:08:54.353

您的项目可能使用由 Delphi 包构建的 DLL 或 COM 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T05:01:13.443

您还需要取消选中项目选项的链接器选项卡上的“使用动态 RTL”。

警告：我正在使用 C++Builder，但我相信选项是相同的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T18:24:14.273

人们可能会发现这一点很明显，但是在编译后检查可执行文件的大小，如果它更大，它将运行。当我们手动复制更新时，较小的 dll 是一个很大的危险信号，表明项目选项有问题。

# design-patterns - 从 ActiveRecord 重构为 DataMapper

> ID：181388
> 
> 赞同：4
> 
> 时间：2008-10-08T04:46:47.247
> 
> 标签：design-patterns, activerecord, refactoring, datamapper

您是否已从[ActiveRecord](http://martinfowler.com/eaaCatalog/activeRecord.html)重构为[DataMapper](http://martinfowler.com/eaaCatalog/dataMapper.html)模式？什么条件促使切换？我主要对基于 Web 的应用程序感兴趣，但想知道在任何环境中伴随这种移动的挑战。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-08T04:56:13.953

我真的很喜欢 ActiveRecord 模式的简单性。但是，我一直在远离它，转而使用更大的网络应用程序。我发现随着基于 ActiveRecord 的项目变得越来越复杂，ActiveRecord 对象变得很大并且包含太多代码。

通过引入存储库模式（本质上是数据映射器），域模型类变得更简单，并且数据映射/数据访问逻辑保持独立。

此外，模拟 ActiveRecord 对象非常困难（不可能？），因为它们使用静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T21:35:37.520

我使用的框架提供表数据网关和行数据网关作为易于使用的内置类，因为我必须指定的只是主键（如果不只是“id”）和表的名称（如果不是与类名相同）。然而，我最近在重构过程中发现，当域和数据库之间必须发生更复杂的映射时，这些模式开始退化。

例如，我目前正在重构一个网站的代码以使用 Data Mapper，以便我可以使用单表继承（使用继承映射）。基本上，只要数据库和域之间的关系变得比一对一更复杂，我都会强烈考虑使用数据映射器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T05:42:43.187

[我使用camping](http://camping.rubyforge.org/)在 PDE-Build 之上编写了一个集成构建系统。我最初使用 ActiveRecord，但我需要对数据库进行非阻塞线程安全访问，因此我转而使用 Data Mapper。

我因错误而感到悲痛，但最新版本似乎相当稳定。

# java - 配置 Tomcat 6 以支持俄语 cp1251 编码

> ID：181398
> 
> 赞同：3
> 
> 时间：2008-10-08T04:53:24.473
> 
> 标签：java, tomcat, encoding, cp1251

我正在将一个 struts 应用程序从 Websphere 迁移到 Tomcat 6，并且我的应用程序支持俄语。在 Websphere 中，我们使用传递 JVM 参数 -Dclinet.encoding.override=cp1251 但是当我通过传递 JVM 参数 -DFile.encoding=cp1251 尝试使用 tomcat 时，系统不接受输入（我是搜索中的任何文本框屏幕）并以无效输入响应。

我也尝试传递与 Websphere 相同的参数（-Dclinet.encoding.override=cp1251），但没有解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T08:57:37.647

您可以使用 servlet 过滤器来设置响应编码来解决问题。检查[http://snippets.dzone.com/posts/show/5948](http://snippets.dzone.com/posts/show/5948)。过滤器有一个示例代码。您需要将:`response.setCharacterEncoding("UTF-8");`和替换`request.setCharacterEncoding("UTF-8");` 为所需的编码。您还可以修改示例以从过滤器配置中加载编码。在此之后，您链接过滤器以获取所有请求。

# ruby - Ruby 内存管理

> ID：181406
> 
> 赞同：24
> 
> 时间：2008-10-08T04:59:05.227
> 
> 标签：ruby, memory, memory-management, coding-style

我使用 Ruby 已经有一段时间了，我发现，对于更大的项目，它会占用相当多的内存。在 Ruby 中减少内存使用的最佳实践是什么？

*   请让每个答案都有一个“最佳实践”，并让社区投票。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2010-09-21T22:32:05.493

在处理大量 ActiveRecord 对象时要非常小心...在循环中处理这些对象时，如果在每次迭代中都使用 ActiveRecord 的 has_many、belongs_to 等加载它们的相关对象 - 内存使用量会增长很多，因为每个对象属于一个数组增长...

以下技术对我们帮助很大（*简化示例*）：

```
students.each do |student|
  cloned_student = student.clone
  ...
  cloned_student.books.detect {...}
  ca_teachers = cloned_student.teachers.detect {|teacher| teacher.address.state == 'CA'}
  ca_teachers.blah_blah
  ...
  # Not sure if the following is necessary, but we have it just in case...
  cloned_student = nil
end 
```

在上面的代码中，“cloned_student”是增长的对象，但由于它在每次迭代结束时“无效”，这对于大量学生来说不是问题。如果我们不做“克隆”，循环变量“学生”会增长，但由于它属于一个数组 - 只要数组对象存在，它所使用的内存就永远不会释放。

不同的方法也有效：

```
students.each do |student|
  loop_student = Student.find(student.id) # just re-find the record into local variable.
  ...
  loop_student.books.detect {...}
  ca_teachers = loop_student.teachers.detect {|teacher| teacher.address.state == 'CA'}
  ca_teachers.blah_blah
  ...
end 
```

在我们的生产环境中，我们有一个后台进程无法完成一次，因为 8Gb 的 RAM 还不够。在这个小改动之后，它使用不到 1Gb 来处理相同数量的数据......

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-10-08T05:12:22.860

不要滥用符号。

每次创建符号时，ruby 都会在它的符号表中添加一个条目。符号表是一个*永远不会*被清空的全局哈希。
这在技术上不是内存泄漏，但它的行为就像一个。符号不会占用太多内存，因此您不必过于偏执，但意识到这一点是值得的。

一般准则：如果您实际上在代码中键入了符号，那很好（毕竟您只有有限数量的代码），但不要在动态生成或用户输入的字符串上调用 to_sym，因为这会打开大门到一个潜在的不断增加的数字

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-08T05:18:09.150

不要这样做：

```
def method(x)
  x.split( doesn't matter what the args are )
end 
```

或这个：

```
def method(x)
  x.gsub( doesn't matter what the args are )
end 
```

[两者都会在 ruby​​ 1.8.5 和 1.8.6 中永久泄漏内存](http://groups.google.com/group/god-rb/browse_thread/thread/1cca2b7c4a581c2/f0f040d41d7c49ea)。（不确定1.8.7，因为我没有尝试过，但我真的希望它是固定的。）解决方法很愚蠢，涉及创建一个局部变量。您不必使用本地，只需创建一个...

像这样的事情就是为什么我非常喜欢 ruby​​ 语言，但不尊重 MRI

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-10-08T05:09:20.633

当心 C 扩展，它们自己分配大块内存。

例如，当您使用 RMagick 加载图像时，整个位图会在 ruby​​ 进程内加载到内存中。这可能是 30 兆左右，具体取决于图像的大小。
**然而**，大部分内存是由 RMagick 自己分配的。ruby 所知道的只是一个包装对象，它很小（1）。
Ruby 只认为它占用了少量内存，因此它不会打扰运行 GC。实际上它保持在 30 兆。
如果您循环播放 10 张图像，您可能会很快耗尽内存。

首选的解决方案是手动告诉 C 库自己清理内存 - RMagick 有一个破坏！执行此操作的方法。但是，如果您的库没有，您可能需要自己强制运行 GC，即使通常不鼓励这样做。

(1): Ruby C 扩展有回调，当 ruby​​ 运行时决定释放它们时会运行，所以内存最终会在某个时候成功释放，只是可能还不够快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-25T15:46:25.660

**测量并检测代码的哪些部分正在创建导致内存使用量增加的对象**。改进和修改您的代码，然后再次测量。有时，您使用的 gem 或库会占用大量内存并创建大量对象。

有许多工具，例如[busy-administrator](https://github.com/joshualat/busy-administrator)，可让您检查对象的内存大小（包括散列和数组中的那些）。

```
$ gem install busy-administrator 
```

## 示例#1：MemorySize.of

```
require 'busy-administrator'

data = BusyAdministrator::ExampleGenerator.generate_string_with_specified_memory_size(10.mebibytes)

puts BusyAdministrator::MemorySize.of(data)
# => 10 MiB 
```

## 示例#2：MemoryUtils.profile

### 代码

```
require 'busy-administrator'

results = BusyAdministrator::MemoryUtils.profile(gc_enabled: false) do |analyzer|
  BusyAdministrator::ExampleGenerator.generate_string_with_specified_memory_size(10.mebibytes)
end  

BusyAdministrator::Display.debug(results) 
```

### 输出：

```
{
    memory_usage:
        {
            before: 12 MiB
            after: 22 MiB
            diff: 10 MiB
        }
    total_time: 0.406452
    gc:
        {
            count: 0
            enabled: false
        }
    specific:
        {
        }
    object_count: 151
    general:
        {
            String: 10 MiB
            Hash: 8 KiB
            BusyAdministrator::MemorySize: 0 Bytes
            Process::Status: 0 Bytes
            IO: 432 Bytes
            Array: 326 KiB
            Proc: 72 Bytes
            RubyVM::Env: 96 Bytes
            Time: 176 Bytes
            Enumerator: 80 Bytes
        }
} 
```

您也可以尝试**ruby** ​​-prof和**memory_profiler**。如果您测试和试验不同版本的代码会更好，这样您就可以测量每个版本的内存使用情况和性能。这将允许您检查您的优化是否真的有效。您通常在开发/测试模式下使用这些工具，并在生产中关闭它们。

# java - 在 Java 文件中间写入字节的最佳方法

> ID：181408
> 
> 赞同：18
> 
> 时间：2008-10-08T05:00:13.523
> 
> 标签：java, file, java-io

使用 Java 在文件中间写入字节的最佳方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-08T21:54:27.860

在文件中间读取和写入就像[`RandomAccessFile`](http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html)在 Java 中使用 a 一样简单。

[`RandomAccessFile`](http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html)，尽管它的名字，更像是一个`InputStream`，`OutputStream`而不是像一个`File`。它允许您`bytes`在文件中读取或查找，然后开始写入您希望停止的任何字节。

一旦你发现了这个类，如果你对常规文件 i/o 有基本的了解，它就会很容易使用。

一个小例子：

```
public static void aMethod(){
    RandomAccessFile f = new RandomAccessFile(new File("whereDidIPutTHatFile"), "rw");
    long aPositionWhereIWantToGo = 99;
    f.seek(aPositionWhereIWantToGo); // this basically reads n bytes in the file
    f.write("Im in teh fil, writn bites".getBytes());
    f.close();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-08T05:03:35.467

采用`RandomAccessFile`

*   [教程](http://java.sun.com/docs/books/tutorial/essential/io/rafs.html)
*   [Javadocs](http://java.sun.com/javase/6/docs/api/java/io/RandomAccessFile.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T05:03:47.697

在不截断的情况下以写入模式打开文件，寻找所需的偏移量，然后写入所需的数据。请注意文本/二进制模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-12T18:51:14.273

我认为最好每次都创建文件块。下载文件后，将它们连接在一起。现在我正在努力。

# c++ - 如何在命令行界面中处理 ctrl-break 信号

> ID：181413
> 
> 赞同：6
> 
> 时间：2008-10-08T05:02:27.607
> 
> 标签：c++, signals, command-line-interface

在开始之前，我想澄清这不是一个命令行工具，而是一个通过它自己的命令行界面接受命令的应用程序。

**编辑：**我必须为我之前的解释道歉，显然我没有很好地解释它。再一次...

我正在构建一个接受用户命令的命令行界面应用程序。我有一个信号处理程序设置来捕获信号，然后设置一个我需要终止应用程序的标志。我遇到的问题是我能找到的所有控制台功能都是阻塞的，这意味着我无法检测到我需要退出控制台处理循环，直到用户按下一个键（或输入，取决于功能）。

有没有一些标准的方式我可以进行非阻塞控制台交互，或者有一种优雅的方式来构建程序，这样如果我只是从信号线程终止，一切都会被正确处理和释放（请不要错过-了解这一点，我知道如何使用锁定和释放信号线程中的资源来完成，但这可能会变得混乱，所以我宁愿避免它）

希望这个解释更有意义......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T06:54:55.850

好的 - 这在 Windows 上对我有用并且是可移植的 - 注意 #ifdef SIGBREAK - 这不是标准信号。

```
#include <csignal>
#include <iostream>
#include <ostream>
#include <string>
using namespace std;

namespace
{
    volatile sig_atomic_t quit;

    void signal_handler(int sig)
    {
        signal(sig, signal_handler);
        quit = 1;
    }
}

int main()
{
    signal(SIGINT, signal_handler);
    signal(SIGTERM, signal_handler);
#ifdef SIGBREAK
    signal(SIGBREAK, signal_handler);
#endif
    /* etc */

    while (!quit)
    {
        string s;
        cin >> s;
        cout << s << endl;
    }
    cout << "quit = " << quit << endl;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-08T05:07:21.310

在 *nix 上，您可以使用该`signal`函数来注册信号处理程序：

```
 #include <signal.h>

void signal_handler(int sig)
{
  // Handle the signal
}

int main(void)
{
  // Register the signal handler for the SIGINT signal (Ctrl+C)
  signal(SIGINT, signal_handler);
  ...
} 
```

现在，只要有人点击`Ctrl`+ `C`，您的信号处理程序就会被调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-08T05:05:46.010

在 Windows 中：[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/ms686016(VS.85).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T05:28:40.737

在基于 *nix 的系统上，您可能并不真的需要信号处理程序来使其工作。您可以指定要忽略 SIGINT 调用

```
int main(void)
{
  // Register to ignore the SIGINT signal (Ctrl+C)
  signal(SIGINT, SIG_IGN);

  while(1)
  {
    retval = my_blocking_io_func();
    if(retval == -1 && errno == EINTR)
    {
      // do whatever you want to do in case of interrupt
    }
  }
} 
```

这样做的重要方法是认识到非阻塞函数确实会被中断。通常，您会意识到阻塞函数失败（例如 read()）并重新尝试该函数。如果它是其他值，您将采取适当的与错误相关的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-03T13:31:49.740

一个更好的线程安全的 *nix 解决方案是使用[pthread_sigmask()](http://linux.die.net/man/3/pthread_sigmask)而不是 signal()。
例如，这是您在当前线程和未来衍生线程中签署 SIGINT、SIGTERM 和 SIGPIPE 的方式：

```
sigset_t waitset;
sigemptyset(&waitset);
sigaddset(&waitset, SIGINT);
sigaddset(&waitset, SIGTERM);
sigaddset(&waitset, SIGPIPE);
pthread_sigmask(SIG_BLOCK, &waitset, NULL); 
```

# sql-server - 如何在 SQL Server 存储过程中添加换行符？

> ID：181426
> 
> 赞同：12
> 
> 时间：2008-10-08T05:06:51.730
> 
> 标签：sql-server, tsql, stored-procedures

我正在制作一个存储过程，它基本上将一个长字符串与来自许多记录的数据连接起来。

我想要做：

```
set @output = @output + 'aaa' + LINEBREAK 
```

如何指定换行符？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-10-08T05:08:36.813

```
DECLARE @LINEBREAK AS varchar(2)
SET @LINEBREAK = CHAR(13) + CHAR(10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T05:09:04.223

试试这个：

```
set @output = @output + 'aaa' + char(13) 
```

# c# - C# 事件处理（与 Java 相比）

> ID：181427
> 
> 赞同：12
> 
> 时间：2008-10-08T05:06:57.737
> 
> 标签：c#, event-handling, delegates

我目前很难理解和使用 delegates 在 C# 中实现事件。我习惯了Java的做事方式：

1.  为侦听器类型定义一个接口，该接口将包含许多方法定义
2.  如果我对侦听器中定义的所有事件不感兴趣，请为该接口定义适配器类以使事情变得更容易
3.  在引发事件的类中定义 Add、Remove 和 Get[] 方法
4.  定义受保护的触发方法来完成循环添加的侦听器列表并调用正确方法的繁琐工作

我理解（并且喜欢！） - 我知道我可以在 c# 中完全一样地做到这一点，但似乎为 c# 准备了一个新的（更好的？）系统。在阅读了无数解释 c# 中委托和事件使用的教程之后，我仍然没有更接近真正理解发生了什么：S

* * *

简而言之，对于以下方法，我将如何在 c# 中实现事件系统：

```
void computerStarted(Computer computer);
void computerStopped(Computer computer);
void computerReset(Computer computer);
void computerError(Computer computer, Exception error); 
```

^ 上述方法取自我曾经制作的一个 Java 应用程序，我正试图将其移植到 c#。

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-08T05:29:53.963

您将创建四个事件和引发它们的方法，以及一个新的基于 EventArgs 的类来指示错误：

```
public class ExceptionEventArgs : EventArgs
{
    private readonly Exception error;

    public ExceptionEventArgs(Exception error)
    {
         this.error = error;
    }

    public Error
    {
         get { return error; }
    }
}

public class Computer
{
    public event EventHandler Started = delegate{};
    public event EventHandler Stopped = delegate{};
    public event EventHandler Reset = delegate{};
    public event EventHandler<ExceptionEventArgs> Error = delegate{};

    protected void OnStarted()
    {
        Started(this, EventArgs.Empty);
    }

    protected void OnStopped()
    {
        Stopped(this, EventArgs.Empty);
    }

    protected void OnReset()
    {
        Reset(this, EventArgs.Empty);
    }

    protected void OnError(Exception e)
    {
        Error(this, new ExceptionEventArgs(e));
    }
} 
```

然后类将使用方法或匿名函数订阅事件：

```
someComputer.Started += StartEventHandler; // A method
someComputer.Stopped += delegate(object o, EventArgs e)
{ 
    Console.WriteLine("{0} has started", o);
};
someComputer.Reset += (o, e) => Console.WriteLine("{0} has been reset"); 
```

关于上面的几点需要注意：

*   OnXXX 方法受到保护，因此派生类可以引发事件。这并不总是必要的——按照你认为合适的方式去做。
*   每个事件声明上的`delegate{}`部分只是避免必须进行空检查的技巧。它为每个事件订阅一个无操作事件处理程序
*   事件声明是*类似字段的事件*。实际创建的是变量*和*事件。在类中，您会看到变量；在课堂之外，您会看到该事件。

有关活动的更多详细信息，请参阅我的[活动/代表文章。](http://pobox.com/~skeet/csharp/events.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-08T05:20:29.817

您必须为此定义一个委托

```
public delegate void ComputerEvent(object sender, ComputerEventArgs e); 
```

ComputerEventArgs 的定义如下：

```
public class ComputerEventArgs : EventArgs
{
    // TODO wrap in properties
    public Computer computer;
    public Exception error;

    public ComputerEventArgs(Computer aComputer, Exception anError)
    {
        computer = aComputer;
        error = anError;
    }

    public ComputerEventArgs(Computer aComputer) : this(aComputer, null)
    {
    }
} 
```

触发事件的类将具有这些：

```
public YourClass
{
    ...
    public event ComputerEvent ComputerStarted;
    public event ComputerEvent ComputerStopped;
    public event ComputerEvent ComputerReset;
    public event ComputerEvent ComputerError;
    ...
} 
```

这是您将处理程序分配给事件的方式：

```
YourClass obj = new YourClass();
obj.ComputerStarted += new ComputerEvent(your_computer_started_handler); 
```

您的处理程序是：

```
private void ComputerStartedEventHandler(object sender, ComputerEventArgs e)
{
   // do your thing.
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-08T05:22:32.043

主要区别在于 C# 中的事件不是基于接口的。相反，事件发布者声明了委托，您可以将其视为函数指针（尽管不完全相同:-)）。然后订阅者将事件原型实现为常规方法，并将委托的新实例添加到发布者的事件处理程序链中。阅读有关[代表](http://msdn.microsoft.com/en-us/library/ms173171.aspx)和[事件](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)的更多信息。

您还可以[在此处](http://msdn.microsoft.com/en-us/library/ms228499.aspx)阅读 C# 与 Java 事件的简短比较。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T05:32:34.770

首先，.Net 中有一个标准方法签名，通常用于事件。这些语言完全允许将任何类型的方法签名用于事件，并且有一些专家认为该约定存在缺陷（我大多同意），但事实就是如此，我将在此示例中遵循它。

1.  创建一个将包含事件参数的类（派生自 EventArgs）。

```
公共类 ComputerEventArgs : EventArgs
{
  电脑电脑；
  // 构造函数、属性等
}

```

2.  在要触发事件的类上创建一个公共事件。

```
    class ComputerEventGenerator // 我选了一个可怕的名字顺便说一句。
    {
      公共事件 EventHandler<ComputerEventArgs> ComputerStarted;
      公共事件 EventHandler<ComputerEventArgs> ComputerStopped;
      公共事件 EventHandler<ComputerEventArgs> ComputerReset;
    ...
    }

```

3.  调用事件。

```
    类 ComputerEventGenerator
    {
    ...
      私人无效 OnComputerStarted（计算机）
      {
        EventHandler<ComputerEventArgs> temp = ComputerStarted;
        if (temp != null) temp(this, new ComputerEventArgs(computer)); // 如果事件是静态的，则用 null 替换 "this"
      }
     }

```

4.  为事件附加一个处理程序。

```
    无效的加载（）
    {
      ComputerEventGenerator computerEventGenerator = new ComputerEventGenerator();
      computerEventGenerator.ComputerStarted += new EventHandler<ComputerEventArgs>(ComputerEventGenerator_ComputerStarted);
    }

```

5.  创建您刚刚附加的处理程序（主要通过按 VS 中的 Tab 键）。

```
    私人无效ComputerEventGenerator_ComputerStarted（对象发送者，ComputerEventArgs args）
    {
      if (args.Computer.Name == "HAL9000")
         ShutItDownNow(args.Computer);
    }

```

6.  完成后不要忘记分离处理程序。（忘记这样做是 C# 中内存泄漏的最大来源！）

```
    无效 OnClose()
    {
      ComputerEventGenerator.ComputerStarted -= ComputerEventGenerator_ComputerStarted;
    }

```

就是这样！

编辑：老实说，我无法弄清楚为什么我的编号点都显示为“1”。我讨厌电脑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T05:23:59.823

有几种方法可以做你想做的事。最*直接*的方法是为托管类中的每个事件定义委托，例如

```
public delegate void ComputerStartedDelegate(Computer computer);
protected event ComputerStartedDelegate ComputerStarted;
public void OnComputerStarted(Computer computer)
{
    if (ComputerStarted != null)
    {
        ComputerStarted.Invoke(computer);
    }
}
protected void someMethod()
{
    //...
    computer.Started = true;  //or whatever
    OnComputerStarted(computer);
    //...
} 
```

任何对象都可以通过以下方式“监听”此事件：

```
Computer comp = new Computer();
comp.ComputerStarted += new ComputerStartedDelegate(
    this.ComputerStartedHandler);

protected void ComputerStartedHandler(Computer computer)
{
    //do something
} 
```

这样做的“推荐标准方法”是定义 EventArgs 的子类来保存计算机（以及旧/新状态和异常）值，将 4 个委托减少为一个。在这种情况下，这将是一个更清洁的解决方案，尤其是。带有计算机状态的枚举，以防以后扩展。但基本技术保持不变：

*   委托定义事件处理程序/侦听器的签名/接口
*   事件数据成员是“侦听器”列表

使用 -= 语法而不是 += 删除侦听器

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T05:24:52.990

在 c# 中，事件是委托。它们的行为方式类似于 C/C++ 中的函数指针，但它们是派生自 System.Delegate 的实际类。

在这种情况下，创建一个自定义 EventArgs 类来传递 Computer 对象。

```
public class ComputerEventArgs : EventArgs
{
  private Computer _computer;

  public ComputerEventArgs(Computer computer) {
    _computer = computer;
  }

  public Computer Computer { get { return _computer; } }
} 
```

然后暴露来自生产者的事件：

```
public class ComputerEventProducer
{
  public event EventHandler<ComputerEventArgs> Started;
  public event EventHandler<ComputerEventArgs> Stopped;
  public event EventHandler<ComputerEventArgs> Reset;
  public event EventHandler<ComputerEventArgs> Error;

  /*
  // Invokes the Started event */
  private void OnStarted(Computer computer) {
    if( Started != null ) {
      Started(this, new ComputerEventArgs(computer));
    }
  }

  // Add OnStopped, OnReset and OnError

} 
```

事件的消费者然后将处理函数绑定到消费者上的每个事件。

```
public class ComputerEventConsumer
{
  public void ComputerEventConsumer(ComputerEventProducer producer) {
    producer.Started += new EventHandler<ComputerEventArgs>(ComputerStarted);
    // Add other event handlers
  }

  private void ComputerStarted(object sender, ComputerEventArgs e) {
  }
} 
```

当 ComputerEventProducer 调用 OnStarted 时，将调用 Started 事件，该事件又将调用 ComputerEventConsumer.ComputerStarted 方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-08T05:47:34.630

委托声明了一个函数签名，当它用作类上的事件时，它还充当登记调用目标的集合。事件上的 += 和 -= 语法用于将目标添加到列表中。

给定以下用作事件的委托：

```
// arguments for events
public class ComputerEventArgs : EventArgs
{
    public Computer Computer { get; set; }
}

public class ComputerErrorEventArgs : ComputerEventArgs
{
    public Exception Error  { get; set; }
}

// delegates for events
public delegate void ComputerEventHandler(object sender, ComputerEventArgs e);

public delegate void ComputerErrorEventHandler(object sender, ComputerErrorEventArgs e);

// component that raises events
public class Thing
{
    public event ComputerEventHandler Started;
    public event ComputerEventHandler Stopped;
    public event ComputerEventHandler Reset;
    public event ComputerErrorEventHandler Error;
} 
```

您将使用以下内容订阅这些事件：

```
class Program
{
    static void Main(string[] args)
    {
        var thing = new Thing();
        thing.Started += thing_Started;
    }

    static void thing_Started(object sender, ComputerEventArgs e)
    {
        throw new NotImplementedException();
    }
} 
```

尽管参数可以是任何东西，但 object sender 和 EventArgs e 是一个使用非常一致的约定。+= thing_started 将首先创建一个指向目标方法的委托实例，然后将其添加到事件中。

在组件本身上，您通常会添加方法来触发事件：

```
public class Thing
{
    public event ComputerEventHandler Started;

    public void OnStarted(Computer computer)
    {
        if (Started != null)
            Started(this, new ComputerEventArgs {Computer = computer});
    }
} 
```

如果没有代表添加到事件中，您必须测试 null。但是，当您进行方法调用时，将调用所有已添加的委托。这就是为什么事件的返回类型为 void - 没有单一的返回值 - 因此，要反馈信息，您将拥有 EventArgs 上的属性，事件处理程序将更改这些属性。

另一个改进是使用通用的 EventHandler 委托，而不是为每种类型的 args 声明一个具体的委托。

```
public class Thing
{
    public event EventHandler<ComputerEventArgs> Started;
    public event EventHandler<ComputerEventArgs> Stopped;
    public event EventHandler<ComputerEventArgs> Reset;
    public event EventHandler<ComputerErrorEventArgs> Error;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-08T14:33:40.043

非常感谢大家的回答！最后我开始明白发生了什么。就一件事; 似乎如果每个事件都有不同数量/类型的参数，我需要创建一个不同的 :: EventArgs 类来处理它：

```
public void computerStarted(Computer computer);
public void computerStopped(Computer computer);
public void computerReset(Computer computer);
public void breakPointHit(Computer computer, int breakpoint);
public void computerError(Computer computer, Exception exception); 
```

这将需要三个班级来处理这些事件！？（两个自定义，一个使用默认 EventArgs.Empty 类）

干杯!

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-08T16:36:56.533

好的，最后的澄清！：所以这几乎是我可以在代码方面做的最好的事情来实现这些事件？

```
 public class Computer {

        public event EventHandler Started;

        public event EventHandler Stopped;

        public event EventHandler Reset;

        public event EventHandler<BreakPointEvent> BreakPointHit;

        public event EventHandler<ExceptionEvent> Error;

        public Computer() {
            Started = delegate { };
            Stopped = delegate { };
            Reset = delegate { };
            BreakPointHit = delegate { };
            Error = delegate { };
        }

        protected void OnStarted() {
            Started(this, EventArgs.Empty);
        }

        protected void OnStopped() {
            Stopped(this, EventArgs.Empty);
        }

        protected void OnReset() {
            Reset(this, EventArgs.Empty);
        }

        protected void OnBreakPointHit(int breakPoint) {
            BreakPointHit(this, new BreakPointEvent(breakPoint));
        }

        protected void OnError(System.Exception exception) {
            Error(this, new ExceptionEvent(exception));
        }
    }
} 
```

# objective-c - 如何创建 NSIndexPath:indexPathWithIndexes:length 所需的“索引”：

> ID：181432
> 
> 赞同：42
> 
> 时间：2008-10-08T05:09:09.277
> 
> 标签：objective-c, cocoa

创建具有一个或多个节点的索引路径的类方法是：

```
+ (id)indexPathWithIndexes:(NSUInteger *)indexes length:(NSUInteger)length 
```

我们如何创建第一个参数中所需的“索引”？

文档将其列为*索引数组以构成索引路径*，但它需要一个 (NSUinteger *)。

要创建 1.2.3.4 的索引路径，是否只是 [1,2,3,4] 的数组？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-10-08T19:32:12.827

你是对的。你可以这样使用它：

```
NSUInteger indexArr[] = {1,2,3,4};

NSIndexPath *indexPath = [NSIndexPath indexPathWithIndexes:indexArr length:4]; 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-05-06T11:31:11.860

在 iOS 上，您还可以使用[NSIndexPath UIKit Additions](http://developer.apple.com/library/ios/documentation/uikit/reference/NSIndexPath_UIKitAdditions/)中的此方法（在 UITableView.h 中声明）：

```
+ (NSIndexPath*) indexPathForRow:(NSUInteger)row inSection:(NSUInteger)section 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-10-08T05:14:21.763

你的假设是正确的。它就像 NSUInteger 的 C 数组一样简单。length 参数是索引数组中元素的数量。

C 中的数组通常被标识为带有长度参数的指针（在本例中为 NSUInteger *）或已知的终止符，例如 C 字符串的 \0（它只是一个 char 数组）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-10T20:28:23.700

我用两行代码做到了这一点

```
 NSMutableArray *indexPaths = [[NSMutableArray alloc] init];   
 for (int i = firstIndexYouWant; i < totalIndexPathsYouWant; i++) [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]]; 
```

简短、干净、易读。免费代码，不要敲它。

# iphone - 任何 iPhone 集合对象都可以保存图像吗？

> ID：181442
> 
> 赞同：0
> 
> 时间：2008-10-08T05:15:18.220
> 
> 标签：iphone, cocoa-touch

实际上，我想要一个包含 2 个图像对象和 1 个文本对象的自定义单元格，我决定为这些对象创建一个容器。

那么是否可以在对象中保存图像并将该对象插入任何集合对象中，然后使用该对象在单元格内显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T16:49:18.367

NSArray 和 NSDictionary 都持有对象。这些很可能是您将与表格视图一起使用的集合。

实现你想要做的最好的方法是使用 UIImage 类。UIImages 包装了一个 CGImage 并为你做所有的内存管理（如果你的应用程序内存不足，图像数据将被清除并在你绘制它时自动重新加载 - 很酷，对吧？）你也可以很容易地从文件中读取图像使用这个类（支持一大堆格式）。

查看 NSArray、NSMutableArray 和 UIImage 的文档以获取更多信息。

```
//create a UIImage from a jpeg image
UIImage *myImage = [UIImage imageWithContentsOfFile:@"myImage.jpg"];
NSArray *myArray = [NSMutableArray array];      // this will autorelease, so if you need to keep it around, retain it
[myArray addObject:myImage];

//to draw this image in a UIView's drawRect method
CGContextRef context = UIGraphicsGetCurrentContext();  // you need to find the context to draw into
UIImage *myImage = [myArray lastObject];   // this gets the last object from an array, use the objectAtIndex: method to get a an object with a specific index
CGImageRef *myCGImage = [myImage CGImage];
CGContextDrawImage(context, rect, myCGImage);  //rect is passed to drawRect 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T05:37:51.140

应该没有问题。只要确保你正确地保留了它以及你课堂上没有的东西。

# sql-server - 连接字段时，我在 SQL 函数中得到 NULL 输出

> ID：181447
> 
> 赞同：1
> 
> 时间：2008-10-08T05:18:13.533
> 
> 标签：sql-server, tsql, null

我有以下功能：

```
CREATE FUNCTION fGetTransactionStatusLog
(
    @TransactionID  int
)
RETURNS varchar(8000) AS  
BEGIN 

declare StatusChanges cursor for
    select  NewStatusID, FirstName + ' ' + LastName AS UserName, Stamp, CAST(Notes AS varchar(8000)) AS Notes
      from TransactionStatusChanges tsc
        left join Users us ON tsc.UserID = us.UserID
      where TransactionID = @TransactionID ORDER BY StatusNum

declare @output varchar(8000)

declare @NewStatusID char(2)
declare @UserName varchar(255)
declare @Stamp datetime
declare @Notes varchar(8000)

set @output = ''

OPEN StatusChanges
  FETCH NEXT FROM StatusChanges INTO @NewStatusID, @UserName, @Stamp, @Notes
  WHILE @@FETCH_STATUS = 0
  BEGIN

    set @output = @output + RTRIM(CAST(@Stamp AS varchar(30))) + ': ' + @NewStatusID + ' by ' + @UserName +  CHAR(13) + CHAR(10)

    IF @Notes IS NOT NULL
    BEGIN
        set @output = @output + '---' + @Notes +  CHAR(13) + CHAR(10)
    END

    FETCH NEXT FROM StatusChanges INTO @NewStatusID, @UserName, @Stamp, @Notes
  END
CLOSE StatusChanges
DEALLOCATE StatusChanges

RETURN @output

END 
```

现在，对于在任何记录中都没有任何注释的事务，该函数完全返回我想要的内容......对于在 TransactionStatusChanges 中至少有一条记录且具有非 NULL 注释字段的事务，我得到 NULL。

我不太明白，因为我在连接之前检查 @Notes 是否不为 NULL。

有任何想法吗？

注意：我使用 varchar(8000) 因为我不能在函数中使用文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T05:20:13.373

其中之一是 NULL

```
 set @output = @output + RTRIM(CAST(@Stamp AS varchar(30))) + ': ' + @NewStatusID + ' by ' + @UserName +  CHAR(13) + CHAR(10) 
```

此外，您可以通过使用 ISNULL 或 COALESCE 处理包含 NULL 的列来简化代码

```
CREATE FUNCTION fGetTransactionStatusLog
(
    @TransactionID  int
)
RETURNS varchar(8000) AS  
BEGIN 

declare @output AS varchar(8000)

select @output = ISNULL(@output, '')
        + ISNULL(RTRIM(CAST(Stamp AS varchar(30))), '<NULL>')
        + ISNULL(NewStatusID, '<NULL>') + ' by '
        + ISNULL(FirstName + ' ' + LastName, '<NULL>') + CHAR(13) + CHAR(10)
        + ISNULL('---' + Notes +  CHAR(13) + CHAR(10), '')
from TransactionStatusChanges tsc
left join Users us ON tsc.UserID = us.UserID
where TransactionID = @TransactionID ORDER BY StatusNum

RETURN @output

END 
```

# .net - .NET 桌面应用程序的好例子

> ID：181453
> 
> 赞同：10
> 
> 时间：2008-10-08T05:23:30.090
> 
> 标签：.net, winforms, desktop

我想将 .NET 评估为桌面应用程序的开发平台。我正在寻找主流中使用的 .NET 桌面应用程序的良好示例。我所知道的只有：

1.  Visual Studio（复制网站表单就是一个例子。）
2.  团队资源管理器 UI
3.  油漆网
4.  反射器
5.  Gnome Do（Gnome 的应用程序启动器；在 Mono 上运行）

我正在寻找更多示例；开源、免费软件或演示版本。

建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-08T06:20:34.483

[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/)是一个用于 .NET 的开源开发 IDE，非常类似于用 .NET 编写的 VS.NET（iirc 它仍然有一些 pinvokes，但都是托管代码），并且非常大且功能完整。

您甚至可以获取它的[源代码](http://www.icsharpcode.net/OpenSource/SD/Download/)来查看。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-15T08:50:16.820

*   [微软表达混合](http://www.microsoft.com/expression/products/Overview.aspx?key=blend)
*   [TechSmith Jing](http://www.jingproject.com/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-08T05:31:07.267

.NET 中完成了许多桌面应用程序，其中只有大多数是公司内部/企业应用程序，而不是大众市场产品。

我认为在 .NET 中开发大众市场桌面应用程序的唯一缺点是需要随其分发 .NET Framework。当然，随着 Windows Vista 的出现，已经预装了 .NET。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T05:56:58.510

检查 WPF(.NET3.5) 应用程序

[http://www.thirteen23.com/experiences/desktop/](http://www.thirteen23.com/experiences/desktop/)

[Frog 设计的 WPF 应用程序](http://www.istartedsomething.com/20080109/frog-design-wpf-sexy-enterprise-software/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-08T06:03:30.540

[Windows Live 作家](http://windowslivewriter.spaces.live.com/default.aspx?wa=wsignin1.0)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-10-08T06:39:22.153

[漫画家](http://comicster.net)！:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-01-18T03:14:27.733

[KeePass](http://keepass.info/ "记事通")是免费、开源、轻量级且易于使用的密码管理器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-08T05:28:50.127

我有这个 Game Neverwinter Nights 2，相当大的东西，它包含一些 SharpZipLib 和 QWhale DLL。应该是dotNet

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-08T05:46:48.033

我从相关问题列表中找到了[这个。](https://stackoverflow.com/questions/82022/are-net-languages-really-making-any-kind-of-dent-in-consumer-desktop-applicatio)

最值得注意的是在 Mono/Linux 上运行的 Gnome 应用程序。[假小子](http://www.gnome.org/projects/tomboy/)、[小猎犬](http://beagle-project.org/Main_Page)和[F-Spot](http://f-spot.org/)！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-13T02:15:50.360

[slimKEYS](http://www.slimcode.com/slimkeys)是用 C# 编写的，带有一些 p/invokes。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-10-13T08:43:43.877

Icarus（截图[在这里](http://www.gallio.org/Screenshots.aspx)），[Gallio](http://www.gallio.org/) / [MbUnit](http://www.mbunit.com/) OSS 测试平台的 GUI。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-08T05:43:30.550

我相信 Windows Media Center 有一个托管 API。我不确定 WMC 中有多少 .Net 内容，但您可以查看一下。

# cocoa - 有没有更好的方法来找到明天的午夜？

> ID：181459
> 
> 赞同：12
> 
> 时间：2008-10-08T05:26:10.820
> 
> 标签：cocoa, date, performance

有一个更好的方法吗？

```
-(NSDate *)getMidnightTommorow {
    NSCalendarDate *now = [NSCalendarDate date];
    NSCalendarDate *tomorrow = [now dateByAddingYears:0 months:0 days:1 hours:0 minutes:0 seconds:0];
    return [NSCalendarDate dateWithYear:[tomorrow yearOfCommonEra]
                                  month:[tomorrow monthOfYear]
                                    day:[tomorrow dayOfMonth]
                                   hour:0
                                 minute:0
                                 second:0
                               timeZone:[tomorrow timeZone]];
} 
```

请注意，我总是想要下一个午夜，即使我拨打电话时恰好是午夜，但是如果恰好是 23:59:59，我当然想要一秒钟后即将到来的午夜。

自然语言函数看起来很不稳定，如果我在“day”字段中超过 32，我不确定 Cocoa 会做什么。（如果可行，我可以放弃 [now dateByAddingYears:...] 电话）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-08T05:56:35.640

从[文档](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSCalendarDate_Class/Reference/Reference.html)中：

> 强烈建议不要使用 NSCalendarDate。它还没有被弃用，但它可能会在 Mac OS X v10.5 之后的下一个主要操作系统版本中出现。对于日历计算，您应该使用 NSCalendar、NSDate 和 NSDateComponents 的合适组合，如[Cocoa 的日期和时间编程主题](http://developer.apple.com/documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html)中的日历中所述。

遵循该建议：

```
NSDate *today = [NSDate date];

NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = 1;
NSDate *tomorrow = [gregorian dateByAddingComponents:components toDate:today options:0];
[components release];

NSUInteger unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
components = [gregorian components:unitFlags fromDate:tomorrow];
components.hour = 0;
components.minute = 0;

NSDate *tomorrowMidnight = [gregorian dateFromComponents:components];

[gregorian release];
[components release]; 
```

（我不确定这是否是最有效的实现，但它应该作为正确方向的指针。）

注意：理论上，您可以通过允许值大于组件正常值范围的日期组件对象来减少此处的代码量（例如，只需将 1 加到日期组​​件，这可能会导致其值为 32 ）。但是，尽管`dateFromComponents:` *可以*容忍超出范围的值，但不能保证。强烈建议您不要依赖它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-08T06:06:31.970

不 - 这将与您今天找到午夜的方式相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-08-06T07:25:55.660

```
NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];

NSDate *tomorrow = [NSDate dateWithTimeIntervalSinceNow:(24 * 60 * 60)];

NSDateComponents *components = [gregorian components:(NSYearCalendarUnit |
                                                      NSMonthCalendarUnit |
                                                      NSDayCalendarUnit)
                                            fromDate:tomorrow];

NSDate *midnight = [gregorian dateFromComponents:components]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T20:55:38.647

```
[NSDate dateWithNaturalLanguageString:@"midnight tomorrow"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T06:01:24.400

将您当前的日期和时间转换为 Unix 日期（自 1970 年以来的秒数）或 DOS 风格（自 1980 年以来），然后添加 24 小时并将其转换回来。然后将小时、分钟和秒重置为零以到达午夜。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-21T11:16:26.773

你可以这样尝试：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setDay:1];
NSDate *tomorrow = [calendar dateByAddingComponents:comps toDate:[NSDate date] options:0]; //it gives us tomorrow with current time
NSDate *midnight = [calendar startOfDayForDate:tomorrow]; //here we get next midnight 
```

如果需要设置 NSTimer，也很容易检索秒间隔：

```
double intervalToMidnight = midnight.timeIntervalSinceNow; 
```

# visual-studio-2008 - VS2008 键盘快捷键 Ctrl + . 停止工作

> ID：181471
> 
> 赞同：0
> 
> 时间：2008-10-08T05:35:31.940
> 
> 标签：visual-studio-2008, keyboard-shortcuts

显示智能标签的新的真棒`Ctrl`+`.`键盘快捷键在我发现它一周左右后突然停止工作:(

我非常想念它，不得不恢复到`Ctrl`++ ，这实际上是不一样的。`Alt``F10`

我最近安装了 F# CTP 1.9.6.2

有没有其他人

*   安装了这个 CTP 并且仍然有`Ctrl`+`.`
*   丢失`Ctrl`+`.`未安装 F#
*   更好的是，找到了如何重新找回它？

**编辑**在尝试 John Sheehan 的建议时，我注意到我可用的映射方案仅包括`Visual C# 2005`，我不应该有 2008 吗？

映射的快捷方式也是

```
OtherContextMenus.FSIConsoleContext.CancelEvaluation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T05:37:23.603

检查键盘映射，看看是否有另一个与之冲突。'工具>选项>键盘'在'按下快捷键'框中键入`Ctrl`+ `.`，然后查看'当前使用的快捷方式'框中出现的内容。如果有多个，只需删除冲突的一个。您希望将其分配给`View.ShowSmartTag`.

或者也许只是重置您的键盘设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T05:54:09.750

我刚刚发现了这个引用该问题的[博客条目。](http://blogs.msdn.com/lukeh/archive/2008/09/17/f-september-2008-ctp-known-issues.aspx)

我刚刚测试过它并且它有效！

干杯 John Sheehan 至少让我迈出了一步，给了我一些 googleable 条款，我给了你一个 upmod 作为感谢

# visual-studio-2008 - 报表中小计的百分比

> ID：181480
> 
> 赞同：0
> 
> 时间：2008-10-08T05:44:28.817
> 
> 标签：visual-studio-2008, report-designer

我在 VS 2008 中使用报表设计器。有没有办法在交叉表报表中显示小计的百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-30T14:29:49.053

我假设你想要看起来像这样的东西：

```
ITEM_ID  |  AMOUNT  |  % OF TOTAL
-----------------------------------
    1    |    20    |     10%
    2    |    30    |     15%
    3    |    40    |     20%
    4    |    50    |     25%
    5    |    60    |     30% 
```

默认情况下，Amount 列的值应包含如下表达式：
**`=Fields!Amount.Value`**

因此百分比列的值将包含以下表达式：
**`=(Fields!Amount.Value / Sum(Fields!Amount.Value) * 100) & "%"`**

# iphone - 确定 iPhone 掉线后 EDGE 连接何时恢复

> ID：181485
> 
> 赞同：10
> 
> 时间：2008-10-08T05:44:44.197
> 
> 标签：iphone, cocoa-touch, networking, connection

我已将 Apple 的 Reachability 示例合并到我自己的项目中，因此我知道我是否有网络连接 - 如果我没有网络连接，我不会费心发送和请求。我决定使用状态通知实现，因为它似乎更容易在后台更新可达性并立即获得当前结果，而不是在我想建立网络连接时启动同步请求。

我的问题是，当我在 EDGE 网络上时，我开始收到误报 - 手机有连接，但应用程序认为情况并非如此。我的理解是当 EDGE 连接时您不会收到通知，所以我的假设是我在某个时候丢失并重新获得了连接。重新启动应用程序通常足以看到网络连接。

这不是最佳解决方案，所以我想知道是否有其他人遇到过这个问题并对解决方案有任何想法。

（我不知道这是否也适用于 3G；我正在运行第一代 iPhone）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-08T06:18:50.620

对于检测 Wi-Fi，可达性通知对我来说似乎也不可靠。所以我只使用轮询。每 5 秒检查一次似乎没有什么坏处。

```
- (void) checkReachability {
    BOOL connected = ([[Reachability sharedReachability] localWiFiConnectionStatus] == ReachableViaWiFiNetwork);

    // Do something...

    [self performSelector:@selector(checkReachability) withObject:nil afterDelay:5.0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-08-12T06:18:04.237

网上有一个很好的可达性示例。它工作得非常好： [http ://servin.com/iphone/iPhone-Network-Status.html](http://servin.com/iphone/iPhone-Network-Status.html)

但是你看，当我尝试以自己的方式使用它时，它只是炸弹。

尝试使用以下方法实现它：

```
NSString *sCellNetwork;     
 NSString *sNetworkReachable;  

if (flags & kSCNetworkFlagsReachable || flags & kSCNetworkReachabilityFlagsIsWWAN)

{do it} 

 else {
   Network fail alert; 
} 
```

# erlang - 列表：对元组中的第 n 个元素进行排序

> ID：181498
> 
> 赞同：2
> 
> 时间：2008-10-08T05:59:01.610
> 
> 标签：erlang, sorting

我需要根据每个元组的第二个元素对元组进行排序，但显然 usort/1 仅适用于第一个元素。所以我必须交换元素，对它们进行排序并交换回来。有没有更简单的方法？还有一种按降序排序的方法（我知道可以进行排序和反转，但只是想知道）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T07:27:57.127

您是否尝试过[keysort/2](http://www.erlang.org/doc/man/lists.html#keysort-2)功能（或其对应的[ukeysort/2](http://www.erlang.org/doc/man/lists.html#ukeysort-2)）？

```
> lists:reverse(lists:keysort(2, [{a,2}, {b,1}, {c, 3}])).
[{c,3},{a,2},{b,1}] 
```

如果您不对非常大的列表进行排序，这可能是您可以获得的最易读的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T06:29:44.200

实际上，一个更好的答案：

有第二个版本的 sort 需要一个排序函数：

```
lists:sort(Fun, List1) -> List2 
```

这是一个对元组中的第二个元素进行排序的示例：

```
lists:sort(fun(A, B) ->
                   {A1, A2} = A,
                   {B1, B2} = B,
                   if
                       A2 > B2 ->
                           false;
                       true ->
                           true
                   end
           end, YourList). 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T07:22:26.433

bmdhacks 解决方案的改进版本：

```
lists:sort(fun(A, B) ->
                   {_, A2} = A,
                   {_, B2} = B,
                   A2 =< B2
           end, YourList). 
```

下划线比 A1 和 B1 更好，因为编译器会给出警告。

要按降序排序，只需将 <= 更改为 >=。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T06:14:13.187

编写自己的排序函数应该不会太难（改编自一个常见的例子）：

```
qsort([]) -> [];
qsort([Pivot|Tail]) ->
    {PivotFirst, PivotSecond} = Pivot,
    qsort([{FirstElement, SecondElement} || {FirstElement,SecondElement} <- Tail, SecondElement < PivotSecond])
        ++ [Pivot] ++
        qsort([{FirstElement, SecondElement} || {FirstElement,SecondElement} <- Tail, SecondElement >= PivotSecond]). 
```

# c# - 将记录添加到 SqlDataReader

> ID：181505
> 
> 赞同：0
> 
> 时间：2008-10-08T06:05:45.700
> 
> 标签：c#, sqldatareader

拉下表格后，有什么方法可以将新记录推送到 SqlDataReader 吗？我有这段需要修改的垃圾代码，这似乎是完成我需要的最简单的方法。我知道不应该这样做，如果你必须这样做，那么你的逻辑有严重错误，但有没有办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T06:14:48.007

SqlDataReaders 是向前只读的，所以我怀疑你可以添加一条记录（不管你是否已经拉下整个表）。事实上，任何继承 DbDataReader 的东西都是向前只读的。

我猜你需要对记录进行一些操作。也许您可以做的是使用 SqlDataReader 填充 DataTable 并将新记录放入 DataTable。但随后您需要更改代码以处理 DataTable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T06:17:07.893

从那时起，最简单的方法是手动创建一个带有插入命令字符串的命令（如果没有清理/清理数据，则参数化，无论如何最好这样做，但可能会使代码变得更庞大）。考虑到您已经设置了所有其他内容，因此代码应该非常小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T06:18:18.000

当您说“将新记录推送到”时……您的意思是要在结果中添加记录吗？或者你的意思是你想做一个插入？

INSERT 不能用阅读器完成；但是，您可以与读者一起做事。当然，更新原始查询以便 UNION 数据会更简单。

特别是：您不能创建自己的 SqlDataReader，但可以创建自己的定制 IDataReader 实现；这可以包装 SqlDataReader，简单地代理来自内部 SqlDataReader 的数据，直到 SqlDataReader.Read() 方法返回 false - 然后您可以切换为返回您*自己的*数据，返回 true 直到您用完数据。实现起来并不简单（主要是你需要实现很多方法来编写自己的IDataReader），但肯定不是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T06:43:20.273

你需要稍微扩展你的问题，

例如，如果您需要遍历一百万条记录并在遍历数据时更新同一张表上的字段。

您可以创建第二个 SqlConnection 到您的数据库并在表上执行更新语句（容易出现锁定问题），或者更好地将所有更改插入临时表并在完成阅读器后将更改合并回原始表.

我很想问一个小问题，这条逻辑可以用一条 SQL UPDATE 语句代替吗？

# python - 在“if”语句中设置多行条件的样式？

> ID：181530
> 
> 赞同：795
> 
> 时间：2008-10-08T06:19:07.670
> 
> 标签：python, coding-style, if-statement

有时我将`if`s 中的长条件分成几行。最明显的方法是：

```
 if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something 
```

视觉上不是很吸引人，因为动作与条件融为一体。但是，这是使用正确的 Python 缩进 4 个空格的自然方式。

目前我正在使用：

```
 if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something 
```

但这不是很漂亮。:-)

你能推荐一种替代方法吗？

* * *

## 回答 #1

> 赞同：893
> 
> 时间：2008-10-08T06:34:25.267

您不需要在第二个条件行上使用 4 个空格。也许使用：

```
if (cond1 == 'val1' and cond2 == 'val2' and 
       cond3 == 'val3' and cond4 == 'val4'):
    do_something 
```

另外，不要忘记空格比你想象的更灵活：

```
if (   
       cond1 == 'val1' and cond2 == 'val2' and 
       cond3 == 'val3' and cond4 == 'val4'
   ):
    do_something
if    (cond1 == 'val1' and cond2 == 'val2' and 
       cond3 == 'val3' and cond4 == 'val4'):
    do_something 
```

不过，这两个都相当丑陋。

也许会丢失括号（尽管[样式指南](https://www.python.org/dev/peps/pep-0008/#multiline-if-statements)不鼓励这样做）？

```
if cond1 == 'val1' and cond2 == 'val2' and \
   cond3 == 'val3' and cond4 == 'val4':
    do_something 
```

这至少给了你一些差异化。

甚至：

```
if cond1 == 'val1' and cond2 == 'val2' and \
                       cond3 == 'val3' and \
                       cond4 == 'val4':
    do_something 
```

我想我更喜欢：

```
if cond1 == 'val1' and \
   cond2 == 'val2' and \
   cond3 == 'val3' and \
   cond4 == 'val4':
    do_something 
```

这是[Style Guide](https://www.python.org/dev/peps/pep-0008/#multiline-if-statements)，（自 2010 年以来）建议使用括号。

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2008-10-08T10:26:48.247

在简单的 AND 或 OR 的退化情况下，我采用了以下方法。

```
if all( [cond1 == 'val1', cond2 == 'val2', cond3 == 'val3', cond4 == 'val4'] ):

if any( [cond1 == 'val1', cond2 == 'val2', cond3 == 'val3', cond4 == 'val4'] ): 
```

它刮掉了一些字符，并清楚地表明这种情况没有微妙之处。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2008-10-08T14:55:02.933

*有人*必须在这里支持使用垂直空白！:)

```
if (     cond1 == val1
     and cond2 == val2
     and cond3 == val3
   ):
    do_stuff() 
```

这使得每个条件都清晰可见。它还允许更清晰地表达更复杂的条件：

```
if (    cond1 == val1
     or 
        (     cond2_1 == val2_1
          and cond2_2 >= val2_2
          and cond2_3 != bad2_3
        )
   ):
    do_more_stuff() 
```

是的，为了清晰起见，我们正在权衡一些垂直空间。海事组织非常值得。

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2008-10-08T08:39:58.620

当我有一个非常大的 if 条件时，我更喜欢这种风格：

```
if (
    expr1
    and (expr2 or expr3)
    and hasattr(thingy1, '__eq__')
    or status=="HappyTimes"
):
    do_stuff()
else:
    do_other_stuff() 
```

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2011-01-14T10:50:32.403

这是我个人的看法：长条件（在我看来）是一种代码味道，建议重构为布尔返回函数/方法。例如：

```
def is_action__required(...):
    return (cond1 == 'val1' and cond2 == 'val2'
            and cond3 == 'val3' and cond4 == 'val4') 
```

现在，如果我找到一种使多行条件看起来不错的方法，我可能会发现自己满足于拥有它们并跳过重构。

另一方面，让它们扰乱我的审美感会成为重构的动力。

因此，我的结论是，多行条件应该看起来很难看，这是避免它们的动力。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2008-10-08T06:31:54.790

这并没有太大改善，但是...

```
allCondsAreOK = (cond1 == 'val1' and cond2 == 'val2' and
                 cond3 == 'val3' and cond4 == 'val4')

if allCondsAreOK:
   do_something 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2008-10-08T07:19:09.780

我建议将`and`关键字移到第二行，并将所有包含条件的行缩进两个空格而不是四个：

```
if (cond1 == 'val1' and cond2 == 'val2'
  and cond3 == 'val3' and cond4 == 'val4'):
    do_something 
```

这正是我在代码中解决这个问题的方法。将关键字作为行中的第一个单词使条件更具可读性，并且减少空格的数量进一步区分条件和操作。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2015-07-05T14:15:27.350

似乎值得引用[PEP 0008](https://www.python.org/dev/peps/pep-0008/)（Python 的官方风格指南），因为它以适度的长度评论了这个问题：

> 当 - 语句的条件部分`if`足够长以至于需要跨多行编写时，值得注意的是，两个字符的关键字（即`if`）加上一个空格，再加上一个左括号会创建一个自然的 4-多行条件的后续行的空格缩进。这可能会与嵌套在 - 语句内的缩进代码套件产生视觉冲突，该代码`if`也自然缩进为 4 个空格。这个 PEP 没有明确说明如何（或是否）进一步在视觉上将这些条件行与 - 语句内的嵌套套件区分开来`if`。在这种情况下可接受的选项包括但不限于：
> 
> ```
> # No extra indentation.
> if (this_is_one_thing and
>     that_is_another_thing):
>     do_something()
> 
> # Add a comment, which will provide some distinction in editors
> # supporting syntax highlighting.
> if (this_is_one_thing and
>     that_is_another_thing):
>     # Since both conditions are true, we can frobnicate.
>     do_something()
> 
> # Add some extra indentation on the conditional continuation line.
> if (this_is_one_thing
>         and that_is_another_thing):
>     do_something() 
> ```

注意上面引用中的“不限于”；除了风格指南中建议的方法外，该问题的其他答案中建议的一些方法也是可以接受的。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2014-11-19T03:34:33.477

这就是我所做的，记住“all”和“any”接受一个可迭代的，所以我只是把一个长条件放在一个列表中，让“all”完成工作。

```
condition = [cond1 == 'val1', cond2 == 'val2', cond3 == 'val3', cond4 == 'val4']

if all(condition):
   do_something 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2011-01-19T20:53:39.250

补充@krawyoti所说的......长时间的条件闻起来是因为它们难以阅读且难以理解。使用函数或变量可以使代码更清晰。在 Python 中，我更喜欢使用垂直空格，用括号括起来，并将逻辑运算符放在每行的开头，这样表达式就不会看起来像“浮动”。

```
conditions_met = (
    cond1 == 'val1' 
    and cond2 == 'val2' 
    and cond3 == 'val3' 
    and cond4 == 'val4'
    )
if conditions_met:
    do_something 
```

如果需要多次评估条件，例如在`while`循环中，则最好使用局部函数。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-03-07T06:24:12.010

就个人而言，我喜欢为长的 if 语句添加意义。我必须搜索代码才能找到合适的示例，但这是我想到的第一个示例：假设我碰巧遇到了一些古怪的逻辑，我想根据许多变量显示某个页面。

英语：“如果登录用户不是管理员教师，而只是普通教师，本身又不是学生……”

```
if not user.isAdmin() and user.isTeacher() and not user.isStudent():
    doSomething() 
```

当然这可能看起来不错，但是阅读那些 if 语句是很多工作。我们如何将逻辑分配给有意义的标签。“标签”实际上是变量名：

```
displayTeacherPanel = not user.isAdmin() and user.isTeacher() and not user.isStudent()
if displayTeacherPanel:
    showTeacherPanel() 
```

这可能看起来很愚蠢，但您可能还有另一种情况，您只希望显示另一个项目，当且仅当您正在显示教师面板或默认情况下用户有权访问该其他特定面板时：

```
if displayTeacherPanel or user.canSeeSpecialPanel():
    showSpecialPanel() 
```

尝试在不使用变量来存储和标记逻辑的情况下编写上述条件，不仅会得到一个非常混乱、难以阅读的逻辑语句，而且还会重复自己。虽然有合理的例外，但请记住：不要重复自己（DRY）。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2011-01-14T14:50:50.417

我很惊讶没有看到我喜欢的解决方案，

```
if (cond1 == 'val1' and cond2 == 'val2'
    and cond3 == 'val3' and cond4 == 'val4'):
    do_something 
```

因为`and`是一个关键字，所以它会被我的编辑器突出显示，并且看起来与它下面的 do_something 完全不同。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-11-24T07:44:29.843

简单明了，也通过了 pep8 检查：

```
if (
    cond1 and
    cond2
):
    print("Hello World!") 
```

* * *

最近，我更喜欢`all`and`any`函数，因为我很少混合 And 和 Or 比较，这很好用，并且具有生成器理解的早期失败的额外优势：

```
if all([
    cond1,
    cond2,
]):
    print("Hello World!") 
```

只要记住传递一个可迭代的！传入 N 参数是不正确的。

注意：`any`就像许多`or`比较，`all`就像许多`and`比较。

* * *

这与生成器理解很好地结合在一起，例如：

```
# Check if every string in a list contains a substring:
my_list = [
    'a substring is like a string', 
    'another substring'
]

if all('substring' in item for item in my_list):
   print("Hello World!")

# or

if all(
    'substring' in item
    for item in my_list
):
    print("Hello World!") 
```

更多信息：[生成器理解](https://stackoverflow.com/q/364802/1695680)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-10-08T10:38:37.490

“all”和“any”适用于相同类型案例的许多条件。但他们总是评估所有条件。如本例所示：

```
def c1():
    print " Executed c1"
    return False
def c2():
    print " Executed c2"
    return False

print "simple and (aborts early!)"
if c1() and c2():
    pass

print

print "all (executes all :( )"
if all((c1(),c2())):
    pass

print 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2011-01-14T08:33:47.987

（我稍微修改了标识符，因为固定宽度的名称不代表真实代码——至少不是我遇到的真实代码——并且会掩盖示例的可读性。）

```
if (cond1 == "val1" and cond22 == "val2"
and cond333 == "val3" and cond4444 == "val4"):
    do_something 
```

这适用于“and”和“or”（重要的是它们在第二行的第一个），但对于其他长条件则更不适用。幸运的是，前者似乎更常见，而后者通常很容易用临时变量重写。（通常并不难，但在重写时保持“and”/“or”的短路可能很困难或不太明显/可读性。）

由于我从[您关于 C++ 的博客文章](http://eli.thegreenplace.net/2011/01/14/how-python-affected-my-cc-brace-style/)中发现了这个问题，因此我将包括我的 C++ 风格是相同的：

```
if (cond1 == "val1" and cond22 == "val2"
and cond333 == "val3" and cond4444 == "val4") {
    do_something
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-10-09T02:45:40.300

如果我们只在条件和正文之间插入一个额外的空行并以规范的方式完成其余的工作呢？

```
if (cond1 == 'val1' and cond2 == 'val2' and
    cond3 == 'val3' and cond4 == 'val4'):

    do_something 
```

ps 我总是使用制表符，而不是空格；我无法微调...

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-08-01T17:53:44.293

我通常做的是：

```
if (cond1 == 'val1' and cond2 == 'val2' and
    cond3 == 'val3' and cond4 == 'val4'
   ):
    do_something 
```

这样，右大括号和冒号在视觉上标志着我们条件的结束。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-11-29T17:12:15.843

我知道这个线程很旧，但我有一些 Python 2.7 代码和 PyCharm (4.5) 仍然抱怨这种情况：

```
if foo is not None:
    if (cond1 == 'val1' and cond2 == 'val2' and
        cond3 == 'val3' and cond4 == 'val4'):
            # some comment about do_something
            do_something 
```

即使 PEP8 警告“视觉缩进的行与下一个逻辑行的缩进相同”，实际代码完全可以吗？这不是“过度缩进”？

...有时我希望 Python 能咬紧牙关，只带花括号。我想知道这些年来由于意外的错误缩进而意外引入了多少错误......

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-06-17T06:16:15.323

所有还为 if 语句提供多条件的受访者都与所提出的问题一样丑陋。你不能通过做同样的事情来解决这个问题..

即使是 PEP 0008 的答案也令人反感。

这是一种更具可读性的方法

```
condition = random.randint(0, 100) # to demonstrate
anti_conditions = [42, 67, 12]
if condition not in anti_conditions:
    pass 
```

要我吃我的话？说服我您需要多条件，我会逐字打印并吃掉它以供您娱乐。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-07-21T13:03:27.863

我认为@zkanda 的解决方案只要稍加改动就可以了。如果您在各自的列表中有条件和值，则可以使用列表推导进行比较，这将使添加条件/值对的事情更加通用。

```
conditions = [1, 2, 3, 4]
values = [1, 2, 3, 4]
if all([c==v for c, v in zip(conditions, values)]):
    # do something 
```

如果我确实想对这样的语句进行硬编码，为了便于阅读，我会这样写：

```
if (condition1==value1) and (condition2==value2) and \
   (condition3==value3) and (condition4==value4): 
```

[`iand`只是用操作员](https://docs.python.org/3.5/library/operator.html#inplace-operators)抛出另一个解决方案：

```
proceed = True
for c, v in zip(conditions, values):
    proceed &= c==v

if proceed:
    # do something 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-10-08T17:26:00.320

为了完整起见，只是其他一些随机的想法。如果它们对您有用，请使用它们。否则，您最好尝试其他方法。

你也可以用字典来做到这一点：

```
>>> x = {'cond1' : 'val1', 'cond2' : 'val2'}
>>> y = {'cond1' : 'val1', 'cond2' : 'val2'}
>>> x == y
True 
```

此选项更复杂，但您可能也会发现它很有用：

```
class Klass(object):
    def __init__(self, some_vars):
        #initialize conditions here
    def __nonzero__(self):
        return (self.cond1 == 'val1' and self.cond2 == 'val2' and
                self.cond3 == 'val3' and self.cond4 == 'val4')

foo = Klass()
if foo:
    print "foo is true!"
else:
    print "foo is false!" 
```

不知道这是否适合您，但这是另一个需要考虑的选择。这是另一种方法：

```
class Klass(object):
    def __init__(self):
        #initialize conditions here
    def __eq__(self):
        return (self.cond1 == 'val1' and self.cond2 == 'val2' and
               self.cond3 == 'val3' and self.cond4 == 'val4')

x = Klass(some_values)
y = Klass(some_other_values)
if x == y:
    print 'x == y'
else:
    print 'x!=y' 
```

最后两个我没有测试过，但如果你想要这样做，这些概念应该足以让你继续前进。

（为了记录，如果这只是一次性的事情，你可能最好使用你一开始提出的方法。如果你在很多地方进行比较，这些方法可能会增强可读性，足以让你对他们有点老套这一事实并不感到难过。）

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2014-12-03T19:19:18.710

我也一直在努力寻找一种体面的方法来做到这一点，所以我只是想出了一个主意（不是灵丹妙药，因为这主要是一个品味问题）。

```
if bool(condition1 and
        condition2 and
        ...
        conditionN):
    foo()
    bar() 
```

与我见过的其他解决方案相比，我发现这个解决方案有一些优点，即，你得到了一个额外的 4 个缩进空间（布尔），允许所有条件垂直排列，并且 if 语句的主体可以缩进一种清晰（ish）的方式。这也保留了布尔运算符的短路评估的好处，但当然增加了基本上什么都不做的函数调用的开销。您可以（有效地）争辩说，任何返回其参数的函数都可以在这里使用而不是 bool，但就像我说的，这只是一个想法，最终是一个品味问题。

有趣的是，当我写这篇文章并思考“问题”时，我想到*了另一个*想法，它消除了函数调用的开销。为什么不通过使用额外的括号来表明我们将要输入一个复杂的条件呢？再说 2 个，以给出子条件相对于 if 语句主体的 2 个空格缩进。例子：

```
if (((foo and
      bar and
      frob and
      ninja_bear))):
    do_stuff() 
```

我有点喜欢这样，因为当你看到它时，你的脑海中会立刻响起一个铃声，说*“嘿，这里发生了一件复杂的事情！”* . 是的，我知道括号对可读性没有帮助，但是这些条件应该很少出现，当它们出现时，无论如何你都必须停下来仔细阅读它们（因为它们很**复杂**）。

无论如何，还有两个我在这里没有看到的建议。希望这可以帮助某人:)

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-08-04T19:30:45.363

你可以把它分成两行

```
total = cond1 == 'val' and cond2 == 'val2' and cond3 == 'val3' and cond4 == val4
if total:
    do_something() 
```

甚至一次添加一个条件。这样，至少它将杂乱与`if`.

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2010-06-09T09:23:43.607

把你的条件打包成一个列表，然后做某事。像：

```
if False not in Conditions:
    do_something 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2011-09-22T08:31:27.493

我发现当我有长条件时，我经常有一个短代码体。在这种情况下，我只是双缩进正文，因此：

```
if (cond1 == 'val1' and cond2 == 'val2' and
    cond3 == 'val3' and cond4 == 'val4'):
        do_something 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2012-03-13T11:13:19.927

```
 if cond1 == 'val1' and \
     cond2 == 'val2' and \
     cond3 == 'val3' and \
     cond4 == 'val4':
      do_something 
```

或者如果这更清楚：

```
 if cond1 == 'val1'\
     and cond2 == 'val2'\
     and cond3 == 'val3'\
     and cond4 == 'val4':
      do_something 
```

在这种情况下，没有理由缩进应该是 4 的倍数，例如，请参阅“与开头分隔符对齐”：

[http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Indentation#Indentation](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html?showone=Indentation#Indentation)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2014-10-16T22:08:03.513

这是另一种方法：

```
cond_list = ['cond1 == "val1"','cond2=="val2"','cond3=="val3"','cond4=="val4"']
if all([eval(i) for i in cond_list]):
 do something 
```

这也使得添加另一个条件变得容易，而无需通过简单地将另一个条件附加到列表中来更改 if 语句：

```
cond_list.append('cond5=="val5"') 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-03-05T00:12:32.823

我通常使用：

```
if ((cond1 == 'val1' and cond2 == 'val2' and
     cond3 == 'val3' and cond4 == 'val4')):
    do_something() 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-12-06T12:27:55.893

如果我们的 if 和 else 条件必须在其中执行多个语句，那么我们可以像下面这样写。每当我们有 if else 示例时，其中都有一个语句。

谢谢它对我有用。

```
#!/usr/bin/python
import sys
numberOfArgument =len(sys.argv)
weblogic_username =''
weblogic_password = ''
weblogic_admin_server_host =''
weblogic_admin_server_port =''

if numberOfArgument == 5:
        weblogic_username = sys.argv[1]
        weblogic_password = sys.argv[2]
        weblogic_admin_server_host =sys.argv[3]
        weblogic_admin_server_port=sys.argv[4]
elif numberOfArgument <5:
        print " weblogic UserName, weblogic Password and weblogic host details are Mandatory like, defalutUser, passwordForDefaultUser, t3s://server.domainname:7001 ."
        weblogic_username = raw_input("Enter Weblogic user Name")
        weblogic_password = raw_input('Enter Weblogic user Password')
        weblogic_admin_server_host = raw_input('Enter Weblogic admin host ')
        weblogic_admin_server_port = raw_input('Enter Weblogic admin port')
#enfelif
#endIf 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-10-25T17:28:13.220

请原谅我的菜鸟，但碰巧我不像你们这里的任何人一样了解#Python，但碰巧我在 3D BIM 建模中编写自己的对象脚本时发现了类似的东西，所以我将调整我的算法以蟒蛇。

我在这里发现的问题是双面的：

1.  对于可能试图破译剧本的人来说，我的价值观似乎很陌生。
2.  如果更改了这些值（最有可能），或者如果必须添加新条件（损坏的模式），代码维护将付出高昂的代价

绕过所有这些问题，你的脚本必须像这样

```
param_Val01 = Value 01   #give a meaningful name for param_Val(i) preferable an integer
param_Val02 = Value 02
param_Val03 = Value 03
param_Val04 = Value 04   # and ... etc

conditions = 0           # this is a value placeholder

########
Add script that if true will make:

conditions = conditions + param_Val01   #value of placeholder is updated
########

### repeat as needed

if conditions = param_Val01 + param_Val02 + param_Val03 + param_Val04:
    do something 
```

这种方法的优点：

1.  脚本可读。

2.  脚本易于维护。

3.  conditions 是对表示所需条件的值之和的 1 比较操作。
4.  无需多级条件

希望对大家有帮助

# c# - 如果一个页面执行 Response.Redirect() 到不同的网页，新页面是否可以从原始页面访问 asp.net 控件中的值？

> ID：181532
> 
> 赞同：3
> 
> 时间：2008-10-08T06:19:29.400
> 
> 标签：c#, asp.net

我有一个文本字符串值，我想在不使用查询字符串或会话/视图状态的情况下从一个网页持久保存到另一个网页。我一直在尝试让 ASP http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx">HiddenField 控件将信息从一个 Web 表单传递到*另一个*表单。

我见过的所有隐藏字段控件示例都是为同一表单保留从客户端到服务器的往返行程。表单

是否可以从先前呈现的表单访问 ASP 控件（及其值） ? 或者当第二个表单执行它的*OnLoad*方法时，初始表单是否被简单地丢弃在内存中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T08:07:30.337

快速回答是否定的。正如其他人所指出的，您可以使用 Server.Transfer 然后您就可以使用 - 但是要谨慎使用。这是一个“服务器端重定向”，例如。

您的用户在[http://mysite.com/Page1.aspx](http://mysite.com/Page1.aspx)上单击按钮，然后您执行 Server.Transfer("Page2.aspx")。Page2.aspx 将在他们的浏览器中呈现，但 URL 仍将是 Page1.aspx，这可能会导致混乱和后退/前进导航混乱。

就我个人而言，我只会将 Server.Transfer 用作最后的手段——在网络世界中，跨页面共享数据通常意味着您需要使用存储机制；Cookie、QueryString、会话、数据库——任你选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T07:24:43.247

您无法使用 Response.Redirect 获取上一页字段。您可以使用[跨页发布](http://msdn.microsoft.com/en-us/library/ms178139.aspx)：

```
if (Page.PreviousPage != null)
{
    TextBox SourceTextBox = 
        (TextBox)Page.PreviousPage.FindControl("TextBox1");
    if (SourceTextBox != null)
    {
        Label1.Text = SourceTextBox.Text;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T07:20:19.560

如果两个页面位于同一个应用程序中，您可以使用 Server.Transfer：

第一页.aspx：

```
protected void Page_Load(object sender, EventArgs e)
{
    Server.Transfer("~/secondpage.aspx");
} 
```

第二页.aspx：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page previousPage = (Page) HttpContext.Current.PreviousHandler;
    Label previousPageControl = (Label) previousPage.FindControl("theLabel");
    label.Text =previousPageControl.Text;
} 
```

一个更好的解决方案是在您的第一页上实现一个接口，您可以在其中公开第二页所需值的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T06:25:51.573

我假设 Response.Redirect() 发送一个 Location: HTTP 标头来进行重定向。

由于 HTTP 是无状态的，我还假设这些变量是不可访问的。

但是，有解决方案。

1.  打印带有隐藏字段的表单，并使用 javascript 提交
2.  在内部重定向代码（加载需要手动访问的内容）
3.  将数据存储在某个临时数据库表中，并传递一个唯一 ID

但是，根据我的经验，我不明白为什么您可能需要这样做（除了在用户身份验证后重新提交表单 - 希望您应该能够使用方法 2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T06:27:25.017

请记住，Response.Redirect 指示浏览器向服务器发出另一个请求。就服务器而言，下一个请求与任何其他传入请求没有区别。它肯定不会以任何方式连接到以前的形式。

您能否在会议中解释您对存储的反感，以便我们提出一些可行的替代方案？

# sql-server - 使用 LogParser 将 SharePoint 使用日志文件导出到数据库中

> ID：181537
> 
> 赞同：3
> 
> 时间：2008-10-08T06:24:08.143
> 
> 标签：sql-server, sharepoint, moss, logparser

所以基本上我们有很多由我们的 SharePoint 2007 站点生成的 SharePoint 使用日志文件，我们希望了解它们。为此，我们正在考虑读取日志文件并将其转储到具有适当列和所有列的数据库中。现在我打算制作一个 SSIS 包来读取所有文本文件并在遇到 LogParser 时提取数据。有没有办法使用 LogParser 将数据转储到 Sql Server 数据库或 SSIS 方式更好？或者还有其他更好的方法来使用 SharePoint 使用日志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T11:58:54.847

您必须为 logparser 编写一个插件。这是我所做的：

> ```
> [Guid("1CC338B9-4F5F-4bf2-86AE-55C865CF7159")]
> public class SPUsageLogParserPlugin : ILogParserInputContext
> {
>     private FileStream stream = null;
>     private BinaryReader br = null;
>     private object[] currentEntry = null; 
> ```

```
 public SPUsageLogParserPlugin() { }

    #region LogParser

    protected const int GENERAL_HEADER_LENGTH = 300;
    protected const int ENTRY_HEADER_LENGTH = 50;
    protected string[] columns = {"TimeStamp",
                                  "SiteGUID",
                                  "SiteUrl",
                                  "WebUrl",
                                  "Document",
                                  "User",
                                  "QueryString",
                                  "Referral",
                                  "UserAgent",
                                  "Command"};

    protected string ReadString(BinaryReader br)
    {
        StringBuilder buffer = new StringBuilder();
        char c = br.ReadChar();
        while (c != 0) {
            buffer.Append(c);
            c = br.ReadChar();
        }
        return buffer.ToString();
    }

    #endregion

    #region ILogParserInputContext Members

    enum FieldType
    {
        Integer = 1,
        Real = 2,
        String = 3,
        Timestamp = 4
    }

    public void OpenInput(string from)
    {
        stream = File.OpenRead(from);
        br = new BinaryReader(stream);
        br.ReadBytes(GENERAL_HEADER_LENGTH);
    }

    public int GetFieldCount()
    {
        return columns.Length;
    }

    public string GetFieldName(int index)
    {
        return columns[index];
    }

    public int GetFieldType(int index)
    {
        if (index == 0) {
            // TimeStamp
            return (int)FieldType.Timestamp;
        } else {
            // Other fields
            return (int)FieldType.String;
        }
    }

    public bool ReadRecord()
    {
        if (stream.Position < stream.Length) {
            br.ReadBytes(ENTRY_HEADER_LENGTH); // Entry Header

            string webappguid = ReadString(br);

            DateTime timestamp = DateTime.ParseExact(ReadString(br), "HH:mm:ss", null);
            string siteUrl = ReadString(br);
            string webUrl = ReadString(br);
            string document = ReadString(br);
            string user = ReadString(br);
            string query = ReadString(br);
            string referral = ReadString(br);
            string userAgent = ReadString(br);
            string guid = ReadString(br);
            string command = ReadString(br);

            currentEntry = new object[] { timestamp, webappguid, siteUrl, webUrl, document, user, query, referral, userAgent, command };
            return true;
        } else {
            currentEntry = new object[] { };
            return false;
        }
    }

    public object GetValue(int index)
    {
        return currentEntry[index];
    }

    public void CloseInput(bool abort)
    {
        br.Close();
        stream.Dispose();
        stream = null;
        br = null;
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-21T02:19:53.250

这是我用来获取所有所需信息的[博客文章。](http://weblogs.asp.net/soever/archive/2005/05/29/409614.aspx)没有必要去定制代码的长度。

简而言之，创建表脚本：

```
CREATE TABLE [dbo].[STSlog](
 [application] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [date] [datetime] NULL,
 [time] [datetime] NULL,
 [username] [varchar](255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [computername] [varchar](255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [method] [varchar](16) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [siteURL] [varchar](2048) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [webURL] [varchar](2048) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [docName] [varchar](2048) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [bytes] [int] NULL,
 [queryString] [varchar](2048) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [userAgent] [varchar](255) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [referer] [varchar](2048) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 [bitFlags] [smallint] NULL,
 [status] [smallint] NULL,
 [siteGuid] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL
) ON [PRIMARY] 
```

调用以使日志解析器加载文件的数据

```
"C:\projects\STSLogParser\STSLogParser.exe" 2005-01-01 "c:\projects\STSlog\2005-01-01\00.log"  c:\projects\logparsertmp\stslog.csv
"C:\Program Files\Log Parser 2.2\logparser.exe" "SELECT 'SharePointPortal' as application, TO_DATE(TO_UTCTIME(TO_TIMESTAMP(TO_TIMESTAMP(date, 'yyyy-MM-dd'), TO_TIMESTAMP(time, 'hh:mm:ss')))) AS date, TO_TIME( TO_UTCTIME( TO_TIMESTAMP(TO_TIMESTAMP(date, 'yyyy-MM-dd'), TO_TIMESTAMP(time, 'hh:mm:ss')))), UserName as username, 'SERVERNAME' as computername, 'GET' as method, SiteURL as siteURL, WebURL as webURL, DocName as docName, cBytes as bytes,  QueryString as queryString, UserAgent as userAgent, RefURL as referer, TO_INT(bitFlags) as bitFlags, TO_INT(HttpStatus) as status, TO_STRING(SiteGuid) as siteGuid INTO STSlog FROM c:\projects\logparsertmp\stslog.csv WHERE (username IS NOT NULL) AND (TO_LOWERCASE(username) NOT IN (domain\serviceaccount))" -i:CSV -headerRow:ON -o:SQL -server:localhost -database:SharePoint_SA_IN -clearTable:ON 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T08:05:08.690

这是我们用来在 SQL Server 数据库中加载 IIS 日志文件的脚本：

```
LogParser "SELECT * INTO <TABLENAME> FROM <LogFileName>" -o:SQL -server:<servername> -database:<databasename> -driver:"SQL Server" -username:sa -password:xxxxx -createTable:ON 
```

和`<tablename>, <logfilename>, <servername>, <databasename>`sa 密码需要根据您的规格进行更改。

根据我的经验，LogParser 非常适合将数据从 IIS 日志加载到 SQL Server，因此最好采用混合方法：

*   使用 LogParser 将原始数据从 IIS 日志加载到 SQL Server
*   使用 SSIS 从包含您将用于报告的最终表中的原始数据的临时表中提取和操作数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-16T08:05:14.007

如果您想要更深入的报告并拥有现金和计算机能力，您可以查看[Nintex 报告](http://www.nintex.com/Nproducts/Reporting.aspx)。我看过它的演示，它非常全面，但是它需要在您的系统上持续运行。不过看起来很酷。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T08:27:53.963

抱歉，我发现 Sharepoint 日志与 IIS 日志不同。它们不一样。我们如何解析它们？

# sql-server - 在 SQL 查询中对拆分范围求和

> ID：181539
> 
> 赞同：2
> 
> 时间：2008-10-08T06:25:12.557
> 
> 标签：sql-server, tsql, range, aggregate

我有一个包含我的服务器状态的表

```
create table ServerStatus
(
    ServerId int, 
    StartTime datetime, 
    Seconds int,
    [State] char(8) 
) 
```

我想要一个给定开始和结束日期的查询，它将总结服务器在此期间在每个状态中花费的时间。我还希望查询返回服务器处于未知状态的时间量。

因此，例如对于以下数据

```
1   2008-01-01 00:00:00.000 120 broken  
1   2008-01-02 00:00:00.000 120 off     
1   2008-01-03 00:00:00.000 240 burning 
1   2008-01-04 00:00:00.000 60  off     
1   2008-01-05 00:00:00.000 60  off     
2   2008-01-01 00:00:00.000 60  broken  
2   2008-01-02 00:00:00.000 30  off     
2   2008-01-03 00:00:00.000 20  burning 
2   2008-01-04 00:00:00.000 600 off     
3   2007-01-04 00:00:00.000 600 off     
4   2007-12-12 00:00:00.000 999999999   onfire 
```

提供范围。

```
select  @start = dateadd(second, 60, '2008-01-01'), 
@fin = dateadd(second, 60, '2008-01-04') 
```

我想返回结果：

```
1   broken      60
1   burning     240
1   off         180
1   unknown     258720
2   burning     20
2   off         90
2   unknown     259090
4   onfire      259200 
```

这个问题有点相关：[Combining split date range in a SQL query](https://stackoverflow.com/questions/140205/combining-split-date-ranges-in-a-sql-query)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T06:25:56.237

这是迄今为止我想出的最好的：

```
declare @start datetime
declare @fin datetime 

select  @start = dateadd(second, 60, '2008-01-01'), @fin = dateadd(second, 60, '2008-01-04')

select ServerId, State, Total = sum(
    case when StartTime > @start and DateAdd(second, Seconds, StartTime) <= @fin
        then Seconds
    when StartTime < @start and DateAdd(second, Seconds, StartTime) <= @fin
        then DateDiff(second, @start, DateAdd(second, Seconds, StartTime)) 
    when StartTime < @start and DateAdd(second, Seconds, StartTime) >= @fin
        then DateDiff(second, @start, @fin)
    else 
        DateDiff(second,StartTime,@fin)
    end)
into #t
from ServerStatus 
where @start < dateadd(second, Seconds, StartTime) 
and @fin > StartTime
group by ServerId, State

insert #t
select ServerId, 'unknown', DateDiff(second, @start, @fin) - sum(Total) 
from #t 
group by ServerId
having DateDiff(second, @start, @fin) > sum(Total)

select * from #t 
order by ServerId, State 
```

# python - reduce() 有什么问题？

> ID：181543
> 
> 赞同：77
> 
> 时间：2008-10-08T06:27:12.350
> 
> 标签：python, python-3.x

网上似乎有很多关于 python 3.0 中 reduce() 函数的更改以及应该如何删除它的讨论。我很难理解为什么会这样；我发现在各种情况下使用它是很合理的。如果轻视只是主观的，我无法想象这么多人会关心它。

我错过了什么？reduce() 有什么问题？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-10-08T07:42:12.293

正如 Guido 在他[的 Python 3000 中 reduce() 的命运](http://www.artima.com/weblogs/viewpost.jsp?thread=98196)帖子中所说：

> 所以现在减少（）。这实际上是我一直最讨厌的一个，因为除了一些涉及 + 或 * 的示例之外，几乎每次我看到带有非平凡函数参数的 reduce() 调用时，我都需要拿起笔和纸来在我理解 reduce() 应该做什么之前，先画出实际输入该函数的内容。所以在我看来，reduce() 的适用性几乎仅限于关联运算符，在所有其他情况下，最好明确地写出累积循环。

`reduce`在[函数式编程 HOWTO](http://www.amk.ca/python/writing/functional)文章中有一个很好的混淆示例：

> 快，下面的代码在做什么？
> 
> ```
> total = reduce(lambda a, b: (0, a[1] + b[1]), items)[1] 
> ```
> 
> 你可以弄明白，但是要弄清表达式来弄清楚发生了什么需要时间。使用简短的嵌套 def 语句会使事情变得更好：
> 
> ```
> def combine (a, b):
>     return 0, a[1] + b[1]
> 
> total = reduce(combine, items)[1] 
> ```
> 
> 但如果我只使用一个 for 循环，那将是最好的：
> 
> ```
> total = 0
> for a, b in items:
>     total += b 
> ```
> 
> 或者 sum() 内置和生成器表达式：
> 
> ```
> total = sum(b for a,b in items) 
> ```
> 
> 当写成 for 循环时，reduce() 的许多用法更加清晰。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-10-08T07:20:43.803

`reduce()`没有被删除——它只是被移动到`functools`模块中。Guido 的推理是，除了像求和这样的琐碎情况外，使用 编写的代码`reduce()`通常在编写为累加循环时会更清晰。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-08T06:53:54.417

人们担心它会鼓励一种混淆的编程风格，做一些可以用更清晰的方法来实现的事情。

我并不反对减少自己，有时我也发现它是一个有用的工具。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-16T05:15:37.503

reduce 存在的主要原因是避免使用累加器编写显式的 for 循环。尽管 python 有一些支持函数式风格的工具，但不鼓励这样做。如果你喜欢“真实的”而不是“pythonic”的函数式风格——请改用现代的 Lisp（Clojure？）或 Haskell。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-12-08T15:59:07.443

通过 Horner 方法使用 reduce 计算多项式的值既紧凑又富有表现力。

计算 x 处的多项式值。a 是多项式的系数数组

```
def poynomialValue(a,x):
   return reduce(lambda value, coef: value*x + coef, a) 
```

# java - 如果 COM 对象实现了接口，如何使用 JIntegra 签入 Java？

> ID：181551
> 
> 赞同：2
> 
> 时间：2008-10-08T06:31:28.613
> 
> 标签：java, casting

我正在使用 JIntegra java com 网桥。我有一个 Object 类型的对象，其真正的 coclass 是未知的。我需要检查该对象是否可以转换为特定的 COM 接口（它具有由 JIntegra 生成的代理类）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-09T22:36:37.713

调用`queryInterface()`代理。如果底层 COM 对象没有实现代理接口，它应该抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T10:39:03.090

如果代理类实现了一个（生成的）接口，你能检查对象是否是那个的实例吗？

# python - py2exe 包括 .exe 中的 MSVC DLL

> ID：181556
> 
> 赞同：5
> 
> 时间：2008-10-08T06:34:21.103
> 
> 标签：python, dll, py2exe

当使用 py2exe 通过 wxPython 分发 Python 应用程序时，通常需要一些 MSVC DLL 来使 .exe 在新安装的机器上工作。特别是，两个最常见的 DLL 是 msvcp71.dll 和 msvcr71.dll

前者可以使用[此技巧](http://www.py2exe.org/index.cgi/OverridingCriteraForIncludingDlls)包含在 .exe 中。但是，后者只是由 py2exe 放在`dist`目录中，而不是放在可执行文件中，即使我特别要求包含它。

知道如何使 py2exe 将两者都包含在 .exe 中吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-08T06:46:57.740

那么它不会启动失败吗？您希望`msvcr71.dll`与 exe 位于同一目录中，以便库加载器能够找到并将其链接到应用程序的内存映射中。

它是基本操作所必需的，因此您不能只将`py2exe`其与其余的 DLL 一起解包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T10:31:51.560

py2exe 不能这样做。您可以包装 py2exe（[wiki 上有一个示例](http://py2exe.org/index.cgi/SingleFileExecutable)显示如何使用 NSIS 执行此操作）；如果不能使用 NSIS 或 InnoSetup，您可以构建自己的包装器。

或者，如果您确定您的用户将安装兼容的 msvcr71.dll 副本（IIRC Vista 或 XP SP2 用户），那么您可以不包含它而离开。也许更有用的是，如果您使用 Python 2.3（或更早版本），那么 Python 链接到 msvcr.dll 而不是 msvcr71.dll，并且任何 Windows 用户都将安装它，所以您不必担心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T08:51:08.887

是的，py2exe 可以做到这一点。[查看此链接。](http://www.py2exe.org/index.cgi/OverridingCriteraForIncludingDlls)如果您使用的是 python2.7，请将“msvcr71”替换为“msvcp90”。

# actionscript-3 - 使用 actionscript 3 加载外部电影时禁用错误消息框

> ID：181562
> 
> 赞同：-1
> 
> 时间：2008-10-08T06:38:00.970
> 
> 标签：actionscript-3

我有一个已编译的**swf**文件，但我**无法编辑它**，但电影工作正常（但会在消息框内显示错误消息）。

我正在从另一部电影中使用它（使用 as3 代码加载）。当加载器电影加载它时，会出现错误消息框。

**我想知道在使用 as3 加载电影时是否可以禁用错误。**

这是消息框中的错误：

```
"TypeError: Error #1009: Cannot access a property or method of a null object reference.
at motionsound11_fla::_all_29/motionsound11_fla::frame249()" 
```

* * *

是的。这是错误消息（编辑了我的第一篇文章）：

```
"TypeError: Error #1009: Cannot access a property or method of a null object reference.
at motionsound11_fla::_all_29/motionsound11_fla::frame249()" 
```

而且我不想反编译我的电影。反编译时变得更加复杂。是的，为了理解我所做的问题。但我的第一个问题是禁用错误消息框。

非常感谢。

* * *

是的，你是对的。浏览器中没有错误（带有 Flash 播放器插件）。我的项目不会在浏览器中。它将是一个可执行文件 (.exe) 或 .swf 。所以电脑上有“Adobe Flash CS3”的人会看到swf格式文件的错误。

（我会将此信息添加到我的问题中：“加载程序不会出现在网页上。它将用作 .swf 文件或可执行文件”）

**你的回答是可以接受的。我将发布为 html 页面而不是 .exe 或 .swf。这将更加安全、动态且不依赖于平台。**

**谢谢。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T07:18:43.867

我在这里可能错了，但我不确定 Flash 播放器插件的发布版本会产生这样的错误 - 你是在调试插件中运行它吗？你可以做的是在一个你知道从未用于开发的盒子上进行测试——当你部署你的应用程序时，错误可能根本不会出现。

也就是说，任何使用您的应用程序的 Flash 开发人员可能仍会看到它！

# java - 您使用哪种 Java Profiling 工具，您认为哪种工具最好？

> ID：181568
> 
> 赞同：20
> 
> 时间：2008-10-08T06:39:50.110
> 
> 标签：java, profiler, profiling

想知道 stackoverflow 社区对各种免费和非免费的 Java Profiler 和可用的分析工具的感受。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-08T06:51:26.873

JProfiler 非常适合我们。

[http://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T08:07:28.107

Yourkit 非常适合 CPU 分析。

对于使用堆转储的内存使用分析，请使用[http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-21T23:35:33.377

你问我们用什么。

工具很好，但对于寻找时间肿瘤，坦率地说，我没有见过比[这](https://stackoverflow.com/questions/266373/one-could-use-a-profiler-but-why-not-just-halt-the-program/317160#317160)更好的东西。

# python - wxPython：在同一帧中显示多个小部件

> ID：181573
> 
> 赞同：4
> 
> 时间：2008-10-08T06:41:18.967
> 
> 标签：python, user-interface, layout, wxpython, wxwidgets

我希望能够在单个框架中显示`Notebook`和wx 小部件。`TxtCtrl`以下是改编自 wxpython wiki 的示例；是否可以更改它们的布局（可能使用类似的东西）以在同一框架`wx.SplitterWindow`中显示下方的文本框？`Notebook`

```
import wx
import wx.lib.sheet as sheet

class MySheet(sheet.CSheet):
    def __init__(self, parent):
        sheet.CSheet.__init__(self, parent)

        self.SetLabelBackgroundColour('#CCFF66')
        self.SetNumberRows(50)
        self.SetNumberCols(50)

class Notebook(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(600, 600))
        menubar = wx.MenuBar()
        file = wx.Menu()
        file.Append(101, 'Quit', '' )
        menubar.Append(file, "&File")
        self.SetMenuBar(menubar)
        wx.EVT_MENU(self, 101, self.OnQuit)
        nb = wx.Notebook(self, -1, style=wx.NB_BOTTOM)
        self.sheet1 = MySheet(nb)
        self.sheet2 = MySheet(nb)
        self.sheet3 = MySheet(nb)
        nb.AddPage(self.sheet1, "Sheet1")
        nb.AddPage(self.sheet2, "Sheet2")
        nb.AddPage(self.sheet3, "Sheet3")
        self.sheet1.SetFocus()
        self.StatusBar()

    def StatusBar(self):
        self.statusbar = self.CreateStatusBar()

    def OnQuit(self, event):
        self.Close()

class MyFrame(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, wx.DefaultPosition, wx.Size(450, 400))
        self.text = wx.TextCtrl(self, -1, style = wx.TE_MULTILINE)
        self.Center()

class MyApp(wx.App):
    def OnInit(self):
        frame = Notebook(None, -1, 'notebook.py')
        frame.Show(True)
        frame.Center()
        frame2 = MyFrame(None, -1, '')
        frame2.Show(True)
        self.SetTopWindow(frame2)
        return True

app = MyApp(0)
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-08T07:11:08.050

实际上，让两个小部件出现在同一个框架上很容易。您应该使用 sizers 来完成此操作。

在您的示例中，您可以将`Notebook`类实现更改为如下所示：

```
class Notebook(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(600, 600))
        menubar = wx.MenuBar()
        file = wx.Menu()
        file.Append(101, 'Quit', '' )
        menubar.Append(file, "&File")
        self.SetMenuBar(menubar)
        wx.EVT_MENU(self, 101, self.OnQuit)
        nb = wx.Notebook(self, -1, style=wx.NB_BOTTOM)
        self.sheet1 = MySheet(nb)
        self.sheet2 = MySheet(nb)
        self.sheet3 = MySheet(nb)
        nb.AddPage(self.sheet1, "Sheet1")
        nb.AddPage(self.sheet2, "Sheet2")
        nb.AddPage(self.sheet3, "Sheet3")
        self.sheet1.SetFocus()
        self.StatusBar()
        # new code begins here:
        # add your text ctrl:
        self.text = wx.TextCtrl(self, -1, style = wx.TE_MULTILINE)
        # create a new sizer for both controls:
        sizer = wx.BoxSizer(wx.VERTICAL)
        # add notebook first, with size factor 2:
        sizer.Add(nb, 2)
        # then text, size factor 1, maximized
        sizer.Add(self.text, 1, wx.EXPAND)
        # assign the sizer to Frame:
        self.SetSizerAndFit(sizer) 
```

只是`__init__`方法变了。请注意，您可以通过更改`Add`方法的第二个参数来操纵笔记本和文本控件之间的比例。

[您可以从官方的Sizer 概述](https://docs.wxpython.org/sizers_overview.html)文章中了解有关Sizer 的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T06:52:03.533

你可以使用分离器，是的。

此外，创建一个面板，将您的小部件放入其中（使用大小调整器）并将此面板添加到框架中是有意义的。

# .net - .NET 中的凸包生成

> ID：181578
> 
> 赞同：6
> 
> 时间：2008-10-08T06:44:35.263
> 
> 标签：.net, 3d

我有一堆 3D 顶点位置 & 需要生成一个包含它们的凸包；有人知道.NET 的任何 QHull 绑定吗？还是原生 3D Delaunay 三角剖分算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-09T03:26:05.973

3d delaunay 很棘手，我不确定是否可以严格定义 3d 表面的 delaunay 约束。
如果您只想对表面进行网格化，通常的技术是选择一个方向并将其映射到 2 个坐标上并执行 2d delaunay。对于高度图，只需使用 x,y 即可。然后，当您拥有形成每个三角形的节点时，您当然可以使用它们的 3d 坐标。

最好的 2d 代码可能是[http://www.cs.cmu.edu/~quake/triangle.html](http://www.cs.cmu.edu/~quake/triangle.html)
这也会给你凸包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-19T18:33:01.283

好像你需要 MI Convex Hull： [https ://miconvexhull.codeplex.com/](https://miconvexhull.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-13T01:45:08.273

由于这是“凸面船体生成”的热门谷歌搜索结果，我想向读者介绍 Stan Melax 的船体生成代码。它被 John Ratcliff 包装为“stanhull”。比 QHull 更容易使用。

编辑：[斯坦赫尔的链接](http://codesuppository.blogspot.com/2006/03/john-ratcliffs-code-suppository-blog.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-09T07:20:51.570

看看[这个网站](http://ozviz.wasp.uwa.edu.au/~pbourke/geometry/insidepoly/)，它需要在形状中找到 2D 和 3D 点。

# openoffice.org - 开放式办公室电子表格中的列表理解

> ID：181579
> 
> 赞同：3
> 
> 时间：2008-10-08T06:44:53.967
> 
> 标签：openoffice.org, list-comprehension

列表理解是一种非常有用的代码机制，可以在多种语言中找到，例如 Haskell、Python 和 Ruby（仅举几例）。我对结构很熟悉。

我发现自己正在处理一个开放式办公室电子表格，我需要做一些相当普遍的事情：我想计算一系列单元格中介于上限和下限之间的所有值。我立即认为列表理解可以解决问题，但我在 Open Office 中找不到类似的东西。有一个名为“COUNTIF”的函数，它有点类似，但不是我需要的。

Open Office 中是否有可用于列表理解的构造？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-09T13:04:34.403

CountIf 可以计算等于所选值的值。不幸的是，这种功能似乎没有好的候选者。或者，您可以使用带有 If 的附加列来显示 1 或 0，如果值相应地适合范围或不适合：

```
=If(AND({list_cell}>=MinVal; {list_cell}<=MaxVal); 1; 0) 
```

然后剩下的就是总结这个额外的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T13:50:00.737

假设：

*   你的范围是 A1:A10
*   你的下限在 B1
*   你的上限在 B2

那么你想要的可以通过以下方式实现：

```
=COUNTIFS(A1:A10, ">" & B1, A1:A10, "<" & B2) 
```

（您可能需要将逗号更改为分号，具体取决于您对小数点的语言偏好）

引用已安装的 OpenOffice 文档：

> 标准之间的逻辑关系可以定义为逻辑与（合取）。换句话说，当且仅当所有给定条件都满足时，来自给定 Func_Range 的相应单元格的值才会被纳入计算。

> 此功能是 Office 应用程序的开放文档格式 (OpenDocument) 标准版本 1.2 的一部分。(ISO/IEC 26300:2-2015)

# c# - 在 C# 中生成 X.509 证书密钥对和签名请求 (CSR)

> ID：181581
> 
> 赞同：1
> 
> 时间：2008-10-08T06:45:40.393
> 
> 标签：c#, x509, csr

如何生成 X.509 公钥和私钥对以及签名请求（CSR 文件）以发送到 CA 以在 C# 中签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T06:58:48.667

生成 RSA 密钥对很容易：

```
// Generate a 2048 bit RSA keypair
RSA keypair = new RSACryptoServiceProvider(2048); 
```

不幸的是，.NET 不支持生成证书请求。您最好的选择可能是与 COM 组件[CEnroll](http://msdn.microsoft.com/en-us/library/aa382488(VS.85).aspx)接口。您应该使用[CreatePKCS10](http://msdn.microsoft.com/en-us/library/aa382820(VS.85).aspx) -方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-11T10:31:39.653

如果您使用可以从[Liping Dai 的网站](http://lipingshare.com/Asn1Editor/)获得的 IAsn1Node 类，以下方法应该可以为您完成：

```
 private static readonly Oid oidInstance = new Oid();

    private static void AddSubjectString(IAsn1Node parent, string oid, string value)
    {
        if (!string.IsNullOrEmpty(value))
        {
            parent.AddChild(AddString(new Asn1Node
            {
                Tag = Asn1Tag.SET | Asn1TagClasses.CONSTRUCTED
            },
                                      oid, value));
        }
    }

    private static Asn1Node AddString(Asn1Node parent, string name, string value)
    {
        var childNode = new Asn1Node
        {
            Tag = Asn1Tag.SEQUENCE | Asn1TagClasses.CONSTRUCTED
        };
        parent.AddChild(childNode);

        var nameNode = new Asn1Node
        {
            Tag = Asn1Tag.OBJECT_IDENTIFIER,
            Data = oidInstance.Encode(name)
        };
        childNode.AddChild(nameNode);

        var valueNode = new Asn1Node();
        if (value == null)
        {
            valueNode.Tag = Asn1Tag.TAG_NULL;
        }
        else
        {
            valueNode.Tag = Asn1Tag.PRINTABLE_STRING;
            valueNode.Data = Encoding.ASCII.GetBytes(value);
        }
        childNode.AddChild(valueNode);

        return parent;
    }

    public static void GenerateCsr(RSACryptoServiceProvider keyPair, Certificates.Subject subject, Stream output)
    {
        var rootNode = new Asn1Node
        {
            Tag = Asn1Tag.SEQUENCE | Asn1TagClasses.CONSTRUCTED
        };

        var topSequenceNode = new Asn1Node
        {
            Tag = Asn1Tag.SEQUENCE | Asn1TagClasses.CONSTRUCTED
        };
        rootNode.AddChild(topSequenceNode);

        var versionNode = new Asn1Node
        {
            Tag = Asn1Tag.INTEGER,
            Data = new byte[] { 0 }
        };
        topSequenceNode.AddChild(versionNode);

        var stringSequenceNode = new Asn1Node
        {
            Tag = Asn1Tag.SEQUENCE | Asn1TagClasses.CONSTRUCTED
        };
        topSequenceNode.AddChild(stringSequenceNode);

        AddSubjectString(stringSequenceNode, Oid.OID_COMMON_NAME, subject.CommonName);
        AddSubjectString(stringSequenceNode, Oid.OID_ORGANIZATIONAL_UNIT, subject.OrganisationalUnit);
        AddSubjectString(stringSequenceNode, Oid.OID_LOCALITY_NAME, subject.City);
        AddSubjectString(stringSequenceNode, Oid.OID_COUNTRY_NAME, subject.Country);
        AddSubjectString(stringSequenceNode, Oid.OID_PROVINCE_NAME, subject.Province);
        AddSubjectString(stringSequenceNode, Oid.OID_ORGANIZATION, subject.Organisation);
        AddSubjectString(stringSequenceNode, Oid.OID_EMAIL_ADDRESS, subject.EmailAddress);

        var rsaNode = new Asn1Node
        {
            Tag = Asn1Tag.SEQUENCE | Asn1TagClasses.CONSTRUCTED
        };
        topSequenceNode.AddChild(AddString(rsaNode, Oid.OID_RSA_ENCRYPTION, null));

        var publicKeyNode = new Asn1Node
        {
            Tag = Asn1Tag.BIT_STRING
        };
        rsaNode.AddChild(publicKeyNode);

        var publicKeySequenceNode = new Asn1Node
        {
            Tag = Asn1Tag.SEQUENCE | Asn1TagClasses.CONSTRUCTED
        };
        publicKeyNode.AddChild(publicKeySequenceNode);

        var publicKeyInfo = keyPair.ExportParameters(false);

        publicKeySequenceNode.AddChild(new Asn1Node
        {
            Tag = Asn1Tag.INTEGER,
            Data = publicKeyInfo.Modulus
        });
        publicKeySequenceNode.AddChild(new Asn1Node
        {
            Tag = Asn1Tag.INTEGER,
            Data = publicKeyInfo.Exponent
        });

        topSequenceNode.AddChild(new Asn1Node
        {
            Tag = Asn1TagClasses.CONTEXT_SPECIFIC | Asn1TagClasses.CONSTRUCTED
        });

        byte[] signature;
        using (var data = new MemoryStream(1024))
        {
            topSequenceNode.SaveData(data);
            signature = keyPair.SignData(data.GetBuffer(), 0, (int)data.Length, new SHA1CryptoServiceProvider());
        }

        AddString(rootNode, Oid.OID_SHA1_WITH_RSA, null);
        rootNode.AddChild(new Asn1Node
        {
            Tag = Asn1Tag.BIT_STRING,
            Data = signature
        });

        var csrOutput = new StreamWriter(output);

        csrOutput.WriteLine("-----BEGIN CERTIFICATE REQUEST-----");

        using (var data = new MemoryStream(1024))
        {
            rootNode.SaveData(data);
            var base64Data = Convert.ToBase64String(data.GetBuffer(), 0, (int)data.Length,
                                                    Base64FormattingOptions.InsertLineBreaks);
            csrOutput.WriteLine(base64Data);
        }

        csrOutput.WriteLine("-----END CERTIFICATE REQUEST-----");
        csrOutput.Flush();
    } 
```

感谢 Theodor 前来救援并为我们写了这篇文章。

# powershell - powershell 自动化期间的 RPC_E_SERVERCALL_RETRYLATER

> ID：181585
> 
> 赞同：1
> 
> 时间：2008-10-08T06:48:03.087
> 
> 标签：powershell, itunes

我正在使用 PowersHell 来自动化 iTunes，但发现错误处理/等待 com 对象处理不是最佳的。

示例代码

```
#Cause an RPC error
$iTunes = New-Object -ComObject iTunes.Application
$LibrarySource = $iTunes.LibrarySource
# Get "playlist" objects for main sections
foreach ($PList in $LibrarySource.Playlists)
{
  if($Plist.name -eq "Library") {
    $Library = $Plist
  }
}
do {
  write-host -ForegroundColor Green "Running a loop"
  foreach ($Track in $Library.Tracks)
  {
     foreach ($FoundTrack in $Library.search("$Track.name", 5)) {
       # do nothing... we don't care...
       write-host "." -nonewline
     }
  }
} while(1) 
#END 
```

进入iTunes并做一些让它弹出消息的事情 - 在我的情况下，我进入Party Shuffle并且我得到一个横幅“Party shuffle automatic blah blah ....”和“不要显示”消息。

此时如果运行脚本会重复执行此操作：

```
+      foreach ($FoundTrack in $Library.search( <<<< "$Track.name", 5)) {
Exception calling "Search" with "2" argument(s): "The message filter indicated
that the application is busy. (Exception from HRESULT: 0x8001010A (RPC_E_SERVER
CALL_RETRYLATER))"
At C:\Documents and Settings\Me\My Documents\example.ps1:17 char:45
+      foreach ($FoundTrack in $Library.search( <<<< "$Track.name", 5)) {
Exception calling "Search" with "2" argument(s): "The message filter indicated
that the application is busy. (Exception from HRESULT: 0x8001010A (RPC_E_SERVER
CALL_RETRYLATER))"
At C:\Documents and Settings\Me\My Documents\example.ps1:17 char:45 
```

如果您等到出现对话框后才运行示例，那么您将重复得到：

```
Running a loop
You cannot call a method on a null-valued expression.
At C:\Documents and Settings\Me\example.ps1:17 char:45
+      foreach ($FoundTrack in $Library.search( <<<< "$Track.name", 5)) { 
```

那是因为 $Library 句柄无效。

如果我的示例正在做一些重要的事情——比如转换曲目然后删除旧的，不正确处理错误可能对 iTunes 中的曲目是致命的。我想强化代码，以便它处理 iTunes 繁忙，并且会静默重试，直到成功。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T11:09:26.697

PowerShell 中的 COM 支持并非 100% 可靠。但我认为真正的问题是 iTunes 本身。应用程序和 COM 模型不是为这种类型的管理设计的，IMO。也就是说，您可以在脚本中实现陷阱。如果引发异常，您可以让脚本休眠几秒钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-19T22:39:51.323

这是一个重试操作的函数，在失败之间暂停：

```
function retry( [scriptblock]$action, [int]$wait=2, [int]$maxRetries=100 ) {
  $results = $null

  $currentRetry = 0
  $success = $false
  while( -not $success ) {
    trap {
      # Set status variables at function scope.
      Set-Variable -scope 1 success $false
      Set-Variable -scope 1 currentRetry ($currentRetry + 1)

      if( $currentRetry -gt $maxRetries ) { break }

      if( $wait ) { Start-Sleep $wait }
      continue
    }

    $success = $true
    $results = . $action
  }

  return $results
} 
```

对于示例中的第一个错误，您可以`foreach`像这样更改内部循环：

```
$FoundTracks = retry { $Library.search( "$Track.name", 5 ) }
foreach ($FoundTrack in $FoundTracks) { ... } 
```

`$wait`这使用and的默认值`$maxRetries`，因此它将尝试调用`$Library.search`100 次，每次尝试之间等待 2 秒。如果所有重试都失败，最后一个错误将传播到外部范围。您可以设置`$ErrorActionPreference`为`Stop`阻止脚本执行任何进一步的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-09T17:53:12.167

您的部分问题可能在于如何评估 $Track.name。您可以尝试使用 $($Track.name) 强制它完全评估名称。

您可能会尝试的另一件事是将 -strict 参数与 new-object 命令/

# xml - XML 作为数据源：阅读的最佳实践

> ID：181587
> 
> 赞同：0
> 
> 时间：2008-10-08T06:49:18.920
> 
> 标签：xml, data-access-layer

我正在做一个小项目，我第一次想使用 XML 作为唯一的数据源……基于文件的存储适合项目的需要。

在编写 DAL 时，我应该将所有 get 方法都设为静态吗？避免和“文件打开时读取”错误？我应该在文件上使用 CacheDependency 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-09T13:55:56.000

我认为你并没有像你本来可以那样清楚。这些文件有多大？数据层始终将 XmlDocument 保存在内存中并在每次更新时转储到硬盘是否有意义？

如果有的话，多久会更新一次？你将如何处理并发？更新是否会跨多个 xml 文件进行事务处理？您将如何处理一致性和事务完整性？如果没有更新，你的生活会简单得多。

方法不必是静态的。要考虑的主要事项是，将来您可能希望将 DAL 提供程序从 XML 更改为 DB。为此，DAL 接口的具体实现应与抽象数据提供者对话。对你来说，它最初是一个 Xml 提供程序，但你应该能够编写一个实现相同接口的 Sql 提供程序，并使用依赖注入、配置文件或你拥有的东西轻松切换实现。

如果您有 DAL 实现的实例，则可以只使用这些对象与数据层对话。

希望这对你来说是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-10T08:58:50.500

好的。

这些文件不太可能很大，我怀疑最大值会达到 1-2MB。

我为您提供了需要与数据库互换的 DAL 接口，因此我需要仔细考虑我的接口。

并发，嗯，我很担心，不完全确定我应该如何处理它。我在想静态读写方法会有所帮助。

XML 将被更新，不是那么频繁，可能一天一次，但它可能随时更频繁。

我使用 CacheDependancy 仅在文件更改时从源获取。

我会在同时读取缓存时遇到问题吗？那么如何处理并发问题呢？

# c# - TestDriven.NET AppDomain 中的 TraceSource

> ID：181595
> 
> 赞同：1
> 
> 时间：2008-10-08T06:54:59.593
> 
> 标签：c#, .net, unit-testing, testdriven.net

我正在使用 TestDriven.NET VS 插件运行测试，并且我正在测试的类库是使用 TraceSource 进行检测的。如何让该 TraceSource 的输出显示在 Visual Studio 的“输出”窗口中？DefaultTraceListener 似乎工作不正常。我是否需要手动添加一个 ConsoleListener 或其他东西（男孩，每个班级一个 TraceSource 会很乏味......）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-16T14:05:34.250

MSDN 文档指出：

> **DefaultTraceListener 向OutputDebugString**和 Debugger.Log 方法发出 Write 和 WriteLine 消息 。在 Visual Studio 中，这会导致调试消息出现在“输出”窗口中。Fail 和 failed Assert 消息也会发送到 OutputDebugString Windows API 和 Debugger.Log 方法，并且还会导致显示消息框。此行为是 Debug 和 Trace 消息的默认行为，因为 DefaultTraceListener 自动包含在每个 Listeners 集合中，并且是唯一自动包含的侦听器。*（强调我的）*

我没有使用过TestDrivent.NET，所以我不知道为什么跟踪输出没有出现在你的输出窗口中，但是你可以使用[DbgView](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)来查看你的输出，因为它收集了由OutputDebugString 编写的输出。

# c# - 如何将列号（例如 127）转换为 Excel 列（例如 AA）

> ID：181596
> 
> 赞同：525
> 
> 时间：2008-10-08T06:55:01.780
> 
> 标签：c#, excel

如何在 C# 中将数字转换为 Excel 列名，而不使用直接从 Excel 中获取值的自动化。

Excel 2007 的可能范围为 1 到 16384，这是它支持的列数。结果值应采用 excel 列名的形式，例如 A、AA、AAA 等。

* * *

## 回答 #1

> 赞同：999
> 
> 时间：2008-10-08T14:01:28.423

这是我的做法：

```
private string GetExcelColumnName(int columnNumber)
{
    string columnName = "";

    while (columnNumber > 0)
    {
        int modulo = (columnNumber - 1) % 26;
        columnName = Convert.ToChar('A' + modulo) + columnName;
        columnNumber = (columnNumber - modulo) / 26;
    } 

    return columnName;
} 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2009-01-30T14:25:33.813

如果有人需要在没有 VBA 的情况下在 Excel 中执行此操作，这里有一种方法：

```
=SUBSTITUTE(ADDRESS(1;colNum;4);"1";"") 
```

其中 colNum 是列号

在 VBA 中：

```
Function GetColumnName(colNum As Integer) As String
    Dim d As Integer
    Dim m As Integer
    Dim name As String
    d = colNum
    name = ""
    Do While (d > 0)
        m = (d - 1) Mod 26
        name = Chr(65 + m) + name
        d = Int((d - m) / 26)
    Loop
    GetColumnName = name
End Function 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-10-08T10:09:18.050

抱歉，这是 Python 而不是 C#，但至少结果是正确的：

```
def ColIdxToXlName(idx):
    if idx < 1:
        raise ValueError("Index is too small")
    result = ""
    while True:
        if idx > 26:
            idx, r = divmod(idx - 1, 26)
            result = chr(r + ord('A')) + result
        else:
            return chr(idx + ord('A') - 1) + result

for i in xrange(1, 1024):
    print "%4d : %s" % (i, ColIdxToXlName(i)) 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2010-04-16T12:25:09.467

您可能需要两种方式的转换，例如从 AAZ 等 Excel 列地址到整数以及从任何整数到 Excel。下面的两种方法可以做到这一点。假设基于 1 的索引，“数组”中的第一个元素是元素编号 1。这里对大小没有限制，因此您可以使用 ERROR 之类的地址，这将是列号 2613824 ...

```
public static string ColumnAdress(int col)
{
  if (col <= 26) { 
    return Convert.ToChar(col + 64).ToString();
  }
  int div = col / 26;
  int mod = col % 26;
  if (mod == 0) {mod = 26;div--;}
  return ColumnAdress(div) + ColumnAdress(mod);
}

public static int ColumnNumber(string colAdress)
{
  int[] digits = new int[colAdress.Length];
  for (int i = 0; i < colAdress.Length; ++i)
  {
    digits[i] = Convert.ToInt32(colAdress[i]) - 64;
  }
  int mul=1;int res=0;
  for (int pos = digits.Length - 1; pos >= 0; --pos)
  {
    res += digits[pos] * mul;
    mul *= 26;
  }
  return res;
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2010-08-09T21:16:11.313

我在第一篇文章中发现了一个错误，所以我决定坐下来算一算。我发现用于识别 Excel 列的数字系统不是以 26 为基数的系统，正如另一个人所发布的那样。考虑以 10 为基数的以下内容。您也可以使用字母表中的字母来执行此操作。

空格：............S1，S2，S3：S1，S2，S3
............ ......................0, 00, 000 :.. A, AA, AAA
...... .....................1, 01, 001 :.. B, AB, AAB
.................... ............，......，...... :........，......，......<br>...... .........................9, 99, 999 :.. Z, ZZ, ZZZ
空间状态总数：10, 100, 1000 : 26, 676, 17576 州
总数:................................1110................................18278

Excel 使用以 26 为基数的各个字母空间中的列编号。您可以看到，一般情况下，状态空间级数为 a、a^2、a^3，... 对于某些基数 a，状态总数为 a + a ^2 + a^3 + ... 。

假设你想找到前 N 个空间中状态 A 的总数。这样做的公式是 A = (a)(a^N - 1 )/(a-1)。这很重要，因为我们需要找到与索引 K 对应的空间 N。如果我想找出 K 在数字系统中的位置，我需要用 K 替换 A 并求解 N。解决方案是 N = log{基数 a} (A (a-1)/a +1)。如果我使用 a = 10 和 K = 192 的例子，我知道 N = 2.23804...。这告诉我 K 位于第三个空格的开头，因为它略大于 2。

下一步是准确找出我们在当前空间中的距离。为了找到这个，从 K 中减去使用 N 的下限生成的 A。在此示例中，N 的下限为 2。因此，A = (10)(10^2 – 1)/(10-1) = 110，正如您组合前两个空间的状态时所预期的那样。这需要从 K 中减去，因为前 110 个状态已经在前两个空间中计算在内。这给我们留下了 82 个状态。所以，在这个数字系统中，192 以 10 为底的表示是 082。

使用零基索引的 C# 代码是

```
 private string ExcelColumnIndexToName(int Index)
    {
        string range = string.Empty;
        if (Index < 0 ) return range;
        int a = 26;
        int x = (int)Math.Floor(Math.Log((Index) * (a - 1) / a + 1, a));
        Index -= (int)(Math.Pow(a, x) - 1) * a / (a - 1);
        for (int i = x+1; Index + i > 0; i--)
        {
            range = ((char)(65 + Index % a)).ToString() + range;
            Index /= a;
        }
        return range;
    } 
```

//旧帖

C# 中从零开始的解决方案。

```
 private string ExcelColumnIndexToName(int Index)
    {
        string range = "";
        if (Index < 0 ) return range;
        for(int i=1;Index + i > 0;i=0)
        {
            range = ((char)(65 + Index % 26)).ToString() + range;
            Index /= 26;
        }
        if (range.Length > 1) range = ((char)((int)range[0] - 1)).ToString() + range.Substring(1);
        return range;
    } 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-03-28T10:06:58.983

这个答案在 javaScript 中：

```
function getCharFromNumber(columnNumber){
    var dividend = columnNumber;
    var columnName = "";
    var modulo;

    while (dividend > 0)
    {
        modulo = (dividend - 1) % 26;
        columnName = String.fromCharCode(65 + modulo).toString() + columnName;
        dividend = parseInt((dividend - modulo) / 26);
    } 
    return  columnName;
} 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2008-10-08T08:24:46.293

**递归很容易。**

```
public static string GetStandardExcelColumnName(int columnNumberOneBased)
{
  int baseValue = Convert.ToInt32('A');
  int columnNumberZeroBased = columnNumberOneBased - 1;

  string ret = "";

  if (columnNumberOneBased > 26)
  {
    ret = GetStandardExcelColumnName(columnNumberZeroBased / 26) ;
  }

  return ret + Convert.ToChar(baseValue + (columnNumberZeroBased % 26) );
} 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-10-08T07:04:00.373

```
int nCol = 127;
string sChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
string sCol = "";
while (nCol >= 26)
{
    int nChar = nCol % 26;
    nCol = (nCol - nChar) / 26;
    // You could do some trick with using nChar as offset from 'A', but I am lazy to do it right now.
    sCol = sChars[nChar] + sCol;
}
sCol = sChars[nCol] + sCol; 
```

**更新**：[彼得](https://stackoverflow.com/users/5189/peter)的评论是正确的。这就是我在浏览器中编写代码所得到的。:-) 我的解决方案没有编译，它缺少最左边的字母并且它正在以相反的顺序构建字符串 - 现在都已修复。

撇开错误不谈，该算法基本上是将一个以 10 为底的数字转换为以 26 为底的数字。

**更新 2**：[Joel Coehoorn](https://stackoverflow.com/users/3043/joel-coehoorn)是对的 - 上面的代码将返回 AB 为 27。如果它是真正的以 26 为基数的数字，AA 将等于 A，Z 之后的下一个数字将是 BA。

```
int nCol = 127;
string sChars = "0ABCDEFGHIJKLMNOPQRSTUVWXYZ";
string sCol = "";
while (nCol > 26)
{
    int nChar = nCol % 26;
    if (nChar == 0)
        nChar = 26;
    nCol = (nCol - nChar) / 26;
    sCol = sChars[nChar] + sCol;
}
if (nCol != 0)
    sCol = sChars[nCol] + sCol; 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2013-02-08T19:36:11.463

到目前为止，我很惊讶所有解决方案都包含迭代或递归。

这是我在恒定时间内运行的解决方案（无循环）。此解决方案适用于所有可能的 Excel 列，并检查输入是否可以转换为 Excel 列。可能的列在 [A, XFD] 或 [1, 16384] 范围内。（这取决于您的 Excel 版本）

```
private static string Turn(uint col)
{
    if (col < 1 || col > 16384) //Excel columns are one-based (one = 'A')
        throw new ArgumentException("col must be >= 1 and <= 16384");

    if (col <= 26) //one character
        return ((char)(col + 'A' - 1)).ToString();

    else if (col <= 702) //two characters
    {
        char firstChar = (char)((int)((col - 1) / 26) + 'A' - 1);
        char secondChar = (char)(col % 26 + 'A' - 1);

        if (secondChar == '@') //Excel is one-based, but modulo operations are zero-based
            secondChar = 'Z'; //convert one-based to zero-based

        return string.Format("{0}{1}", firstChar, secondChar);
    }

    else //three characters
    {
        char firstChar = (char)((int)((col - 1) / 702) + 'A' - 1);
        char secondChar = (char)((col - 1) / 26 % 26 + 'A' - 1);
        char thirdChar = (char)(col % 26 + 'A' - 1);

        if (thirdChar == '@') //Excel is one-based, but modulo operations are zero-based
            thirdChar = 'Z'; //convert one-based to zero-based

        return string.Format("{0}{1}{2}", firstChar, secondChar, thirdChar);
    }
} 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2017-01-24T00:01:56.427

只需使用递归引入一个简单的两行 C# 实现，因为这里的所有答案似乎都比必要的复杂得多。

```
/// <summary>
/// Gets the column letter(s) corresponding to the given column number.
/// </summary>
/// <param name="column">The one-based column index. Must be greater than zero.</param>
/// <returns>The desired column letter, or an empty string if the column number was invalid.</returns>
public static string GetColumnLetter(int column) {
    if (column < 1) return String.Empty;
    return GetColumnLetter((column - 1) / 26) + (char)('A' + (column - 1) % 26);
} 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2009-12-17T22:17:33.750

..并转换为php：

```
function GetExcelColumnName($columnNumber) {
    $columnName = '';
    while ($columnNumber > 0) {
        $modulo = ($columnNumber - 1) % 26;
        $columnName = chr(65 + $modulo) . $columnName;
        $columnNumber = (int)(($columnNumber - $modulo) / 26);
    }
    return $columnName;
} 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2010-12-10T05:45:31.277

Java中的相同实现

```
public String getExcelColumnName (int columnNumber) 
    {     
        int dividend = columnNumber;   
        int i;
        String columnName = "";     
        int modulo;     
        while (dividend > 0)     
        {        
            modulo = (dividend - 1) % 26;         
            i = 65 + modulo;
            columnName = new Character((char)i).toString() + columnName;        
            dividend = (int)((dividend - modulo) / 26);    
        }       
        return columnName; 
    } 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2014-09-26T15:33:16.690

我想加入我使用的静态类，用于 col index 和 col Label 之间的互操作。我对我的 ColumnLabel 方法使用修改后的接受答案

```
public static class Extensions
{
    public static string ColumnLabel(this int col)
    {
        var dividend = col;
        var columnLabel = string.Empty;
        int modulo;

        while (dividend > 0)
        {
            modulo = (dividend - 1) % 26;
            columnLabel = Convert.ToChar(65 + modulo).ToString() + columnLabel;
            dividend = (int)((dividend - modulo) / 26);
        } 

        return columnLabel;
    }
    public static int ColumnIndex(this string colLabel)
    {
        // "AD" (1 * 26^1) + (4 * 26^0) ...
        var colIndex = 0;
        for(int ind = 0, pow = colLabel.Count()-1; ind < colLabel.Count(); ++ind, --pow)
        {
            var cVal = Convert.ToInt32(colLabel[ind]) - 64; //col A is index 1
            colIndex += cVal * ((int)Math.Pow(26, pow));
        }
        return colIndex;
    }
} 
```

像这样使用...

```
30.ColumnLabel(); // "AD"
"AD".ColumnIndex(); // 30 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-11-03T23:00:16.803

```
private String getColumn(int c) {
    String s = "";
    do {
        s = (char)('A' + (c % 26)) + s;
        c /= 26;
    } while (c-- > 0);
    return s;
} 
```

它不完全是基数 26，系统中没有 0。如果有，“Z”后面会跟着“BA”而不是“AA”。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2010-08-23T17:23:00.887

如果你只是想要一个没有代码的单元格公式，这里有一个公式：

```
IF(COLUMN()>=26,CHAR(ROUND(COLUMN()/26,1)+64)&CHAR(MOD(COLUMN(),26)+64),CHAR(COLUMN()+64)) 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2011-08-24T16:01:38.110

在德尔福（帕斯卡）：

```
function GetExcelColumnName(columnNumber: integer): string;
var
  dividend, modulo: integer;
begin
  Result := '';
  dividend := columnNumber;
  while dividend > 0 do begin
    modulo := (dividend - 1) mod 26;
    Result := Chr(65 + modulo) + Result;
    dividend := (dividend - modulo) div 26;
  end;
end; 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2012-01-05T07:38:50.267

游戏有点晚了，但这是我使用的代码（在 C# 中）：

```
private static readonly string _Alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
public static int ColumnNameParse(string value)
{
    // assumes value.Length is [1,3]
    // assumes value is uppercase
    var digits = value.PadLeft(3).Select(x => _Alphabet.IndexOf(x));
    return digits.Aggregate(0, (current, index) => (current * 26) + (index + 1));
} 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2012-04-18T01:42:57.217

在 perl 中，对于 1 (A)、27 (AA) 等的输入。

```
sub excel_colname {
  my ($idx) = @_;       # one-based column number
  --$idx;               # zero-based column index
  my $name = "";
  while ($idx >= 0) {
    $name .= chr(ord("A") + ($idx % 26));
    $idx   = int($idx / 26) - 1;
  }
  return scalar reverse $name;
} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2011-10-13T08:09:30.500

在查看了这里提供的所有版本之后，我决定自己做一个，使用递归。

这是我的 vb.net 版本：

```
Function CL(ByVal x As Integer) As String
    If x >= 1 And x <= 26 Then
        CL = Chr(x + 64)
    Else
        CL = CL((x - x Mod 26) / 26) & Chr((x Mod 26) + 1 + 64)
    End If
End Function 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2016-08-18T12:34:21.360

虽然我迟到了，但[格雷厄姆的回答](https://stackoverflow.com/a/182924/1997693)远非最佳。特别是，您不必使用`modulo`, call`ToString()`和 apply `(int)`cast。考虑到在 C# 世界中的大多数情况下，您将从 0 开始编号，这是我的修订：

```
public static string GetColumnName(int index) // zero-based
{
    const byte BASE = 'Z' - 'A' + 1;
    string name = String.Empty;

    do
    {
        name = Convert.ToChar('A' + index % BASE) + name;
        index = index / BASE - 1;
    }
    while (index >= 0);

    return name;
} 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-07-09T19:08:28.233

已经有 30 多个解决方案，但这是我的单行 C# 解决方案......

```
public string IntToExcelColumn(int i)
{
    return ((i<16926? "" : ((char)((((i/26)-1)%26)+65)).ToString()) + (i<2730? "" : ((char)((((i/26)-1)%26)+65)).ToString()) + (i<26? "" : ((char)((((i/26)-1)%26)+65)).ToString()) + ((char)((i%26)+65)));
} 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-07-27T15:20:16.200

改进原始解决方案（在 C# 中）：

```
public static class ExcelHelper
{
    private static Dictionary<UInt16, String> l_DictionaryOfColumns;

    public static ExcelHelper() {
        l_DictionaryOfColumns = new Dictionary<ushort, string>(256);
    }

    public static String GetExcelColumnName(UInt16 l_Column)
    {
        UInt16 l_ColumnCopy = l_Column;
        String l_Chars = "0ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        String l_rVal = "";
        UInt16 l_Char;

        if (l_DictionaryOfColumns.ContainsKey(l_Column) == true)
        {
            l_rVal = l_DictionaryOfColumns[l_Column];
        }
        else
        {
            while (l_ColumnCopy > 26)
            {
                l_Char = l_ColumnCopy % 26;
                if (l_Char == 0)
                    l_Char = 26;

                l_ColumnCopy = (l_ColumnCopy - l_Char) / 26;
                l_rVal = l_Chars[l_Char] + l_rVal;
            }
            if (l_ColumnCopy != 0)
                l_rVal = l_Chars[l_ColumnCopy] + l_rVal;

            l_DictionaryOfColumns.ContainsKey(l_Column) = l_rVal;
        }

        return l_rVal;
    }
} 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2010-03-29T14:37:30.413

这是一个 Actionscript 版本：

```
private var columnNumbers:Array = ['A', 'B', 'C', 'D', 'E', 'F' , 'G', 'H', 'I', 'J', 'K' ,'L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];

    private function getExcelColumnName(columnNumber:int) : String{
        var dividend:int = columnNumber;
        var columnName:String = "";
        var modulo:int;

        while (dividend > 0)
        {
            modulo = (dividend - 1) % 26;
            columnName = columnNumbers[modulo] + columnName;
            dividend = int((dividend - modulo) / 26);
        } 

        return columnName;
    } 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2013-10-03T09:43:58.267

**JavaScript 解决方案**

```
/**
 * Calculate the column letter abbreviation from a 1 based index
 * @param {Number} value
 * @returns {string}
 */
getColumnFromIndex = function (value) {
    var base = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
    var remainder, result = "";
    do {
        remainder = value % 26;
        result = base[(remainder || 26) - 1] + result;
        value = Math.floor(value / 26);
    } while (value > 0);
    return result;
}; 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2014-02-21T02:29:21.047

另一种VBA方式

```
Public Function GetColumnName(TargetCell As Range) As String
    GetColumnName = Split(CStr(TargetCell.Cells(1, 1).Address), "$")(1)
End Function 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2015-04-09T22:35:33.887

这些我的代码将特定数字（索引从 1 开始）转换为 Excel 列。

```
 public static string NumberToExcelColumn(uint number)
    {
        uint originalNumber = number;

        uint numChars = 1;
        while (Math.Pow(26, numChars) < number)
        {
            numChars++;

            if (Math.Pow(26, numChars) + 26 >= number)
            {
                break;
            }               
        }

        string toRet = "";
        uint lastValue = 0;

        do
        {
            number -= lastValue;

            double powerVal = Math.Pow(26, numChars - 1);
            byte thisCharIdx = (byte)Math.Truncate((columnNumber - 1) / powerVal);
            lastValue = (int)powerVal * thisCharIdx;

            if (numChars - 2 >= 0)
            {
                double powerVal_next = Math.Pow(26, numChars - 2);
                byte thisCharIdx_next = (byte)Math.Truncate((columnNumber - lastValue - 1) / powerVal_next);
                int lastValue_next = (int)Math.Pow(26, numChars - 2) * thisCharIdx_next;

                if (thisCharIdx_next == 0 && lastValue_next == 0 && powerVal_next == 26)
                {
                    thisCharIdx--;
                    lastValue = (int)powerVal * thisCharIdx;
                }
            }

            toRet += (char)((byte)'A' + thisCharIdx + ((numChars > 1) ? -1 : 0));

            numChars--;
        } while (numChars > 0);

        return toRet;
    } 
```

我的单元测试：

```
 [TestMethod]
    public void Test()
    {
        Assert.AreEqual("A", NumberToExcelColumn(1));
        Assert.AreEqual("Z", NumberToExcelColumn(26));
        Assert.AreEqual("AA", NumberToExcelColumn(27));
        Assert.AreEqual("AO", NumberToExcelColumn(41));
        Assert.AreEqual("AZ", NumberToExcelColumn(52));
        Assert.AreEqual("BA", NumberToExcelColumn(53));
        Assert.AreEqual("ZZ", NumberToExcelColumn(702));
        Assert.AreEqual("AAA", NumberToExcelColumn(703));
        Assert.AreEqual("ABC", NumberToExcelColumn(731));
        Assert.AreEqual("ACQ", NumberToExcelColumn(771));
        Assert.AreEqual("AYZ", NumberToExcelColumn(1352));
        Assert.AreEqual("AZA", NumberToExcelColumn(1353));
        Assert.AreEqual("AZB", NumberToExcelColumn(1354));
        Assert.AreEqual("BAA", NumberToExcelColumn(1379));
        Assert.AreEqual("CNU", NumberToExcelColumn(2413));
        Assert.AreEqual("GCM", NumberToExcelColumn(4823));
        Assert.AreEqual("MSR", NumberToExcelColumn(9300));
        Assert.AreEqual("OMB", NumberToExcelColumn(10480));
        Assert.AreEqual("ULV", NumberToExcelColumn(14530));
        Assert.AreEqual("XFD", NumberToExcelColumn(16384));
    } 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2017-03-22T11:01:04.647

这是所有其他人以及谷歌重定向到的问题，所以我在这里发布。

其中许多答案是正确的，但对于简单的情况（例如当您没有超过 26 列时）来说太麻烦了。如果您对是否可能进入双字符列有任何疑问，请忽略此答案，但如果您确定不会，那么您可以在 C# 中像这样简单地做到这一点：

```
public static char ColIndexToLetter(short index)
{
    if (index < 0 || index > 25) throw new ArgumentException("Index must be between 0 and 25.");
    return (char)('A' + index);
} 
```

哎呀，如果你对你传入的内容有信心，你甚至可以删除验证并使用这个内联：

```
(char)('A' + index) 
```

这在许多语言中都非常相似，因此您可以根据需要对其进行调整。

同样，**仅当您 100% 确定不会超过 26 列时才使用此选项**。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2017-11-05T18:04:45.193

抱歉，这是 Python 而不是 C#，但至少结果是正确的：

```
def excel_column_number_to_name(column_number):
    output = ""
    index = column_number-1
    while index >= 0:
        character = chr((index%26)+ord('A'))
        output = output + character
        index = index/26 - 1

    return output[::-1]

for i in xrange(1, 1024):
    print "%4d : %s" % (i, excel_column_number_to_name(i)) 
```

通过了这些测试用例：

*   列号：494286 => ABCDZ
*   列号：27 => AA
*   列号：52 => AZ

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2018-10-13T06:14:15.697

对于它的价值，这是格雷厄姆在 Powershell 中的代码：

```
function ConvertTo-ExcelColumnID {
param (
    [parameter(Position = 0,
        HelpMessage = "A 1-based index to convert to an excel column ID. e.g. 2 => 'B', 29 => 'AC'",
        Mandatory = $true)]
    [int]$index
);

[string]$result = '';
if ($index -le 0 ) {
    return $result;
}

while ($index -gt 0) {
    [int]$modulo = ($index - 1) % 26;
    $character = [char]($modulo + [int][char]'A');
    $result = $character + $result;
    [int]$index = ($index - $modulo) / 26;
}

return $result; 
```

}

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2012-02-24T14:45:36.773

我正在尝试在 Java 中做同样的事情......我编写了以下代码：

```
private String getExcelColumnName(int columnNumber) {

    int dividend = columnNumber;
    String columnName = "";
    int modulo;

    while (dividend > 0)
    {
        modulo = (dividend - 1) % 26;

        char val = Character.valueOf((char)(65 + modulo));

        columnName += val;

        dividend = (int)((dividend - modulo) / 26);
    } 

    return columnName;
} 
```

现在，一旦我用 columnNumber = 29 运行它，它会给我结果 =“CA”（而不是“AC”）任何我缺少的评论？我知道我可以通过 StringBuilder 扭转它......但是看着格雷厄姆的回答，我有点困惑......

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2013-05-01T22:44:13.120

这是我在 PHP 中的超晚实现。这是递归的。我是在找到这篇文章之前写的。我想看看其他人是否已经解决了这个问题......

```
public function GetColumn($intNumber, $strCol = null) {

    if ($intNumber > 0) {
        $intRem = ($intNumber - 1) % 26;
        $strCol = $this->GetColumn(intval(($intNumber - $intRem) / 26), sprintf('%s%s', chr(65 + $intRem), $strCol));
    }

    return $strCol;
} 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2015-04-24T11:38:11.483

简洁优雅的**Ruby**版本：

```
def col_name(col_idx)
    name = ""
    while col_idx>0
        mod     = (col_idx-1)%26
        name    = (65+mod).chr + name
        col_idx = ((col_idx-mod)/26).to_i
    end
    name
end 
```

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2015-08-09T01:44:26.933

NodeJS 实现：

```
/**
* getColumnFromIndex
* Helper that returns a column value (A-XFD) for an index value (integer).
* The column follows the Common Spreadsheet Format e.g., A, AA, AAA.
* See https://stackoverflow.com/questions/181596/how-to-convert-a-column-number-eg-127-into-an-excel-column-eg-aa/3444285#3444285
* @param numVal: Integer
* @return String
*/
getColumnFromIndex: function(numVal){
   var dividend = parseInt(numVal);
   var columnName = '';
   var modulo;
   while (dividend > 0) {
      modulo = (dividend - 1) % 26;
      columnName = String.fromCharCode(65 + modulo) + columnName;
      dividend = parseInt((dividend - modulo) / 26);
   }
   return columnName;
}, 
```

感谢[将 excel 列字母（例如 AA）转换为数字（例如 25）](https://stackoverflow.com/questions/9905533/convert-excel-column-alphabet-e-g-aa-to-number-e-g-25)。反过来：

```
/**
* getIndexFromColumn
* Helper that returns an index value (integer) for a column value (A-XFD).
* The column follows the Common Spreadsheet Format e.g., A, AA, AAA.
* See https://stackoverflow.com/questions/9905533/convert-excel-column-alphabet-e-g-aa-to-number-e-g-25
* @param strVal: String
* @return Integer
*/
getIndexFromColumn: function(val){
   var base = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', i, j, result = 0;
   for (i = 0, j = val.length - 1; i < val.length; i += 1, j -= 1) {
      result += Math.pow(base.length, j) * (base.indexOf(val[i]) + 1);
   }
   return result;
} 
```

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2016-12-14T17:42:02.563

每种方式的 F# 版本

```
let rec getExcelColumnName x  = if x<26 then int 'A'+x|>char|>string else (x/26-1|>c)+ c(x%26) 
```

请原谅最小化，正在开发更好版本的[https://stackoverflow.com/a/4500043/57883](https://stackoverflow.com/a/4500043/57883)

* * *

和相反的方向：

```
// return values start at 0
let getIndexFromExcelColumnName (x:string) =
    let a = int 'A'
    let fPow len i =
        Math.Pow(26., len - 1 - i |> float)
        |> int

    let getValue len i c = 
        int c - a + 1 * fPow len i
    let f i = getValue x.Length i x.[i]
    [0 .. x.Length - 1]
    |> Seq.map f
    |> Seq.sum
    |> fun x -> x - 1 
```

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2017-09-11T22:52:09.850

感谢这里的答案！！帮助我想出了这些帮助函数，以便与我在 Elixir/Phoenix 中使用的 Google Sheets API 进行一些交互

这是我想出的（可能会使用一些额外的验证和错误处理）

在长生不老药中：

```
def number_to_column(number) do
  cond do
    (number > 0 && number <= 26) ->
      to_string([(number + 64)])
    (number > 26) ->
      div_col = number_to_column(div(number - 1, 26))
      remainder = rem(number, 26)
      rem_col = cond do
        (remainder == 0) ->
          number_to_column(26)
        true ->
          number_to_column(remainder)
      end
      div_col <> rem_col
    true ->
      ""
  end
end 
```

和反函数：

```
def column_to_number(column) do
  column
    |> to_charlist
    |> Enum.reverse
    |> Enum.with_index
    |> Enum.reduce(0, fn({char, idx}, acc) ->
      ((char - 64) * :math.pow(26,idx)) + acc
    end)
    |> round
end 
```

还有一些测试：

```
describe "test excel functions" do
  @excelTestData [{"A", 1}, {"Z",26}, {"AA", 27}, {"AB", 28}, {"AZ", 52},{"BA", 53}, {"AAA", 703}]

  test "column to number" do
    Enum.each(@excelTestData, fn({input, expected_result}) ->
      actual_result = BulkOnboardingController.column_to_number(input)
      assert actual_result == expected_result
    end)
  end

  test "number to column" do
    Enum.each(@excelTestData, fn({expected_result, input}) ->
      actual_result = BulkOnboardingController.number_to_column(input)
      assert actual_result == expected_result
    end)
  end
end 
```

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2018-08-12T03:30:29.240

这是根据 Graham 的代码的 javascript 版本

```
function (columnNumber) {
    var dividend = columnNumber;
    var columnName = "";
    var modulo;

    while (dividend > 0) {
        modulo = (dividend - 1) % 26;
        columnName = String.fromCharCode(65 + modulo) + columnName;
        dividend = parseInt((dividend - modulo) / 26);
    }

    return columnName;
}; 
```

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2018-10-29T05:26:51.557

以前的大多数答案都是正确的。这是将列号转换为 excel 列的另一种方法。如果我们将此视为基本转换，则解决方案相当简单。只需将列号转换为基数 26，因为只有 26 个字母。您可以这样做：

**脚步：**

*   将列设置为商

*   从商变量中减去一个（来自上一步），因为我们需要以97 为 a 的[ascii 表结束。](http://www.asciitable.com/)

*   除以 26 得到余数。

*   将 +97 添加到余数并转换为 char（因为 97 在 ASCII 表中是“a”）
*   商成为新的商/ 26（因为我们可能会超过 26 列）
*   继续这样做直到商大于0然后返回结果

这是执行此操作的代码:)

```
def convert_num_to_column(column_num):
    result = ""
    quotient = column_num
    remainder = 0
    while (quotient >0):
        quotient = quotient -1
        remainder = quotient%26
        result = chr(int(remainder)+97)+result
        quotient = int(quotient/26)
    return result

print("--",convert_num_to_column(1).upper()) 
```

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2021-03-16T08:05:27.297

此代码段适用于 A 到 ZZ 列名称

```
string columnName = columnNumber > 26 ? Convert.ToChar(64 + (columnNumber / 26)).ToString() + Convert.ToChar(64 + (columnNumber % 26)) : Convert.ToChar(64 + columnNumber).ToString(); 
```

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2008-11-04T17:26:02.030

我在 VB.NET 2003 中使用这个，它运行良好......

```
Private Function GetExcelColumnName(ByVal aiColNumber As Integer) As String
    Dim BaseValue As Integer = Convert.ToInt32(("A").Chars(0)) - 1
    Dim lsReturn As String = String.Empty

    If (aiColNumber > 26) Then
        lsReturn = GetExcelColumnName(Convert.ToInt32((Format(aiColNumber / 26, "0.0").Split("."))(0)))
    End If

    GetExcelColumnName = lsReturn + Convert.ToChar(BaseValue + (aiColNumber Mod 26))
End Function 
```

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2008-11-21T22:28:14.390

如果您想以编程方式引用单元格，那么如果您使用工作表的 Cells 方法，您将获得更具可读性的代码。它采用行和列索引而不是传统的单元格引用。它与 Offset 方法非常相似。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2009-06-11T14:55:51.417

在 VB.Net 2005 中使用它：

```
Private Function ColumnName(ByVal ColumnIndex As Integer) As String

   Dim Name As String = ""

   Name = (New Microsoft.Office.Interop.Owc11.Spreadsheet).Columns.Item(ColumnIndex).Address(False, False, Microsoft.Office.Interop.Owc11.XlReferenceStyle.xlA1)
   Name = Split(Name, ":")(0)

   Return Name

End Function 
```

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2009-07-27T15:35:08.773

另一种解决方案：

```
private void Foo()
{
   l_ExcelApp = new Excel.ApplicationClass();
   l_ExcelApp.ReferenceStyle = Excel.XlReferenceStyle.xlR1C1;
   // ... now reference by R[row]C[column], Ex. A1 <==> R1C1, C6 <==> R3C6, ...
} 
```

在这里查看更多 - [Excel 中的单元格引用供所有人使用！Nitin Paranjape 博士](http://www.expresscomputeronline.com/20021216/techspace1.shtml)

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2010-03-18T18:17:49.150

```
public static string ConvertToAlphaColumnReferenceFromInteger(int columnReference)
    {
        int baseValue = ((int)('A')) - 1 ;
        string lsReturn = String.Empty; 

        if (columnReference > 26) 
        {
            lsReturn = ConvertToAlphaColumnReferenceFromInteger(Convert.ToInt32(Convert.ToDouble(columnReference / 26).ToString().Split('.')[0]));
        } 

        return lsReturn + Convert.ToChar(baseValue + (columnReference % 26));            
    } 
```

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2011-10-11T15:45:16.930

这是我在 Python 中的做法。该算法解释如下：

```
alph = ('a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z')
def labelrec(n, res):
    if n<26:
        return alph[n]+res
    else:
        rem = n%26
        res = alph[rem]+res
        n = n/26-1
        return labelrec(n, res) 
```

可以使用数字和空字符串调用函数 labelrec，例如：

```
print labelrec(16383, '') 
```

这就是它的工作原理：如果十进制数字的写入方式与 Excel 工作表列相同，则数字 0-9 将正常写入，但 10 将变为“00”，然后 20 将变为“10”，依此类推。映射几个数字：

0 - 0

9 - 9

10 - 00

20 - 10

100 - 90

110 - 000

1110 - 0000

所以，模式是明确的。从单位开始，如果一个数小于 10，它的表示与该数本身相同，否则需要通过将其减 1 并递归来调整剩余数。当数字小于 10 时，您可以停止。

相同的逻辑适用于上述解决方案中以 26 为底的数字。

PS 如果您希望数字从 1 开始，请在将输入数字减 1 后调用相同的函数。

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2014-01-24T10:21:52.197

（我意识到这个问题与 C# 有关，但是如果有人阅读需要用**Java**做同样的事情，那么以下内容可能有用）

事实证明，这可以使用[Jakarta POI](http://poi.apache.org/)中的“CellReference”类轻松完成。此外，转换可以通过两种方式完成。

```
// Convert row and column numbers (0-based) to an Excel cell reference
CellReference numbers = new CellReference(3, 28);
System.out.println(numbers.formatAsString());

// Convert an Excel cell reference back into digits
CellReference reference = new CellReference("AC4");
System.out.println(reference.getRow() + ", " + reference.getCol()); 
```

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2015-06-18T10:51:23.867

我今天只需要做这项工作，我的实现使用递归：

```
private static string GetColumnLetter(string colNumber)
{
    if (string.IsNullOrEmpty(colNumber))
    {
        throw new ArgumentNullException(colNumber);
    }

    string colName = String.Empty;

    try
    {
        var colNum = Convert.ToInt32(colNumber);
        var mod = colNum % 26;
        var div = Math.Floor((double)(colNum)/26);
        colName = ((div > 0) ? GetColumnLetter((div - 1).ToString()) : String.Empty) + Convert.ToChar(mod + 65);
    }
    finally
    {
        colName = colName == String.Empty ? "A" : colName;
    }

    return colName;
} 
```

这将数字作为方法和以“0”开头的数字（A = 0）视为字符串

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2015-08-01T00:33:11.710

Objective-C 实现：

```
-(NSString*)getColumnName:(int)n {
     NSString *name = @"";
     while (n>0) {
     n--;
     char c = (char)('A' + n%26);
     name = [NSString stringWithFormat:@"%c%@",c,name];
     n = n/26;
  }    
     return name; 
```

}

SWIFT 实施：

```
func getColumnName(n:Int)->String{
 var columnName = ""
 var index = n
 while index>0 {
     index--
     let char = Character(UnicodeScalar(65 + index%26))
     columnName = "\(char)\(columnName)"
     index = index / 26
 }
 return columnName 
```

}

答案基于：[https ://stackoverflow.com/a/4532562/2231118](https://stackoverflow.com/a/4532562/2231118)

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2015-11-13T22:45:06.757

看到另一个 VBA 答案 - 这可以在[excel-vba](/questions/tagged/excel-vba "显示标记为“excel-vba”的问题")中使用 1 行 UDF 完成：

```
Function GetColLetter(ByVal colID As Integer) As String
    If colID > Columns.Count Then
        Err.Raise 9, , "Column index out of bounds"
    Else
        GetColLetter = Split(Cells(1, colID).Address, "$")(1)
    End If
End Function 
```

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2020-01-15T16:11:01.677

**打字稿**

```
function lengthToExcelColumn(len: number): string {

    let dividend: number = len;
    let columnName: string = '';
    let modulo: number = 0;

    while (dividend > 0) {
        modulo = (dividend - 1) % 26;
        columnName = String.fromCharCode(65 + modulo).toString() + columnName;
        dividend = Math.floor((dividend - modulo) / 26);
    }
    return columnName;
} 
```

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2020-02-14T23:07:57.527

似乎很多答案比必要的复杂得多。这是基于上述递归的通用 Ruby 答案：

这个答案的一个好处是它不限于英文字母的 26 个字符。您可以在`COLUMNS`常量中定义您喜欢的任何范围，它会做正确的事情。

```
 # vim: ft=ruby
  class Numeric
    COLUMNS = ('A'..'Z').to_a

    def to_excel_column(n = self)
      n < 1 ?  '' : begin
        base = COLUMNS.size
        to_excel_column((n - 1) / base) + COLUMNS[(n - 1) % base]
      end
    end
  end

  # verify:
  (1..52).each { |i| printf "%4d => %4s\n", i, i.to_excel_column } 
```

这将打印以下内容，例如：

```
 1 =>    A
   2 =>    B
   3 =>    C
  ....
  33 =>   AG
  34 =>   AH
  35 =>   AI
  36 =>   AJ
  37 =>   AK
  38 =>   AL
  39 =>   AM
  40 =>   AN
  41 =>   AO
  42 =>   AP
  43 =>   AQ
  44 =>   AR
  45 =>   AS
  46 =>   AT
  47 =>   AU
  48 =>   AV
  49 =>   AW
  50 =>   AX
  51 =>   AY
  52 =>   AZ 
```

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2020-02-20T15:55:31.047

这是编码测试中常见的问题。它有一些限制：每行的最大列数 = 702 输出应该有行号+列名，例如 703 的答案是 2A。（注意：我刚刚从另一个答案修改了现有代码）这是相同的代码：

```
 static string GetExcelColumnName(long columnNumber)
    {
        //max number of column per row
        const long maxColPerRow = 702;
        //find row number
        long rowNum = (columnNumber / maxColPerRow);
        //find tierable columns in the row.
        long dividend = columnNumber - (maxColPerRow * rowNum);

        string columnName = String.Empty;

        long modulo;

        while (dividend > 0)
        {
            modulo = (dividend - 1) % 26;
            columnName = Convert.ToChar(65 + modulo).ToString() + columnName;
            dividend = (int)((dividend - modulo) / 26);
        }

        return rowNum+1+ columnName;
    }
} 
```

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2020-03-25T17:17:38.873

**T-SQL (SQL 服务器 18)**

第一页上的解决方案副本

```
CREATE FUNCTION dbo.getExcelColumnNameByOrdinal(@RowNum int)  
RETURNS varchar(5)   
AS   
BEGIN  
    DECLARE @dividend int = @RowNum;
    DECLARE @columnName varchar(max) = '';
    DECLARE @modulo int;

    WHILE (@dividend > 0)
    BEGIN  
        SELECT @modulo = ((@dividend - 1) % 26);
        SELECT @columnName = CHAR((65 + @modulo)) + @columnName;
        SELECT @dividend = CAST(((@dividend - @modulo) / 26) as int);
    END
    RETURN 
       @columnName;

END; 
```

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2020-08-04T00:09:56.080

这是基于零的列索引的更简单解决方案

```
 public static string GetColumnIndexNumberToExcelColumn(int columnIndex)
        {
            int offset = columnIndex % 26;
            int multiple = columnIndex / 26;

            int initialSeed = 65;//Represents column "A"
            if (multiple == 0)
            {
                return Convert.ToChar(initialSeed + offset).ToString();
            }

            return $"{Convert.ToChar(initialSeed + multiple - 1)}{Convert.ToChar(initialSeed + offset)}";
        } 
```

* * *

## 回答 #54

> 赞同：-1
> 
> 时间：2016-08-26T15:54:15.050

Microsoft Excel Miniature，快速而肮脏的公式。

你好，

这是从数字中获取 Excel 字符列标题的一种方法....

我为 Excel 单元格创建了一个公式。

（即我采取了不使用 VBA 编程的方法。）

该公式查看一个包含数字的单元格，并告诉您该列是什么——用字母表示。

在附图中：

*   我将 1、2、3 等放在顶行一直到 ABS 列。
*   我将我的公式一直粘贴到第二行到 ABS。
*   我的公式查看第 1 行并将数字转换为 Excel 的列标题 ID。
*   我的公式适用于 702 (zz) 以内的所有数字。
*   我这样做是为了证明公式有效，因此您可以查看公式的输出并查看上面的列标题，并轻松直观地验证公式是否有效。:-)

    =CONCATENATE(MID("_abcdefghijklmnopqrstuvwxyz",(IF(MOD(K1,26)>0,INT(K1/26)+1,(INT(K1/26)))),1),MID("abcdefghijklmnopqrstuvwxyz", IF(MOD(K1,26)=0,26,MOD(K1,26)),1))

下划线用于调试目的 - 让您知道有一个实际空间并且它工作正常。

使用上面的这个公式——无论你在 K1 中输入什么——这个公式都会告诉你列标题是什么。

该公式以其当前形式仅输出 2 位数字 (ZZ)，但可以修改为添加第三个字母 (ZZZ)。

[![在此处输入图像描述](https://i.stack.imgur.com/Aqzn4.png)](https://i.stack.imgur.com/Aqzn4.png)

* * *

## 回答 #55

> 赞同：-2
> 
> 时间：2019-10-15T03:02:38.373

这是我在python中的解决方案

```
import math

num = 3500
row_number = str(math.ceil(num / 702))
letters = ''
num = num - 702 * math.floor(num / 702)
while num:
    mod = (num - 1) % 26
    letters += chr(mod + 65)
    num = (num - 1) // 26
result = row_number + ("".join(reversed(letters)))
print(result) 
```

* * *

## 回答 #56

> 赞同：-4
> 
> 时间：2010-11-12T03:13:33.937

```
 public string ToBase26(int number)
    {
        if (number < 0) return String.Empty;

        int remainder = number % 26;
        int value = number / 26;

        return value == 0 ?
            String.Format("{0}", Convert.ToChar(65 + remainder)) :
            String.Format("{0}{1}", ToBase26(value - 1), Convert.ToChar(65 + remainder));
    } 
```

# asp.net - ASP.NET 控件的命名准则是什么？

> ID：181597
> 
> 赞同：20
> 
> 时间：2008-10-08T06:55:58.173
> 
> 标签：asp.net, naming-conventions, coding-style

我们正在制定我们希望在我们的开发团队中使用的设计指南，并在今天就如何命名 ASP.NET 控件展开讨论。我说的是我们的好朋友 Label、TextBox、Button 等。

我们提出了以下三种我们投票的可能性：（示例是输入/显示名字的文本框）

1.  将控件类型作为后缀添加到控件 ID：[FirstName `_`TextBox] 或 [FirstName `_`tbx]
2.  将控件类型作为前缀添加到控件 ID [tbxFirstName]
3.  将控件的 ID 设置为 FirstName 并命名相关字段（如文本框的标签或验证器），如选项 2 [lblTextBox] 中所示。

我们最终决定使用选项 2。它不像选项 1 那样冗长，我喜欢它在控件名称之前指定它是什么控件。

我的问题是，Microsoft 是否针对这些前缀发布了任何指南，或者您是否对我们的决定有任何意见。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-26T15:08:52.243

Visual Studio 在您将“TextBox1”添加到页面时添加它的原因是因为 Microsoft 无法知道您打算如何使用它。将其命名为“Control1”会太令人困惑，因为它可以是任意数量的控件。

Microsoft 提供了针对 OO 命名约定的一般指南，但没有专门针对 UI 控件的命名。由于 UI 控件最终是代码中使用的变量，因此它们应该遵循与任何其他变量相同的约定——没有匈牙利符号前缀。

*   [msdn.microsoft.com/en-us/library/xzf533w0(vs.71)](http://msdn.microsoft.com/en-us/library/xzf533w0(vs.71))
*   [msdn.microsoft.com/en-us/library/ms229002(VS.80)](http://msdn.microsoft.com/en-us/library/ms229002(VS.80).aspx)

主要原因是...

*   控件的类型可能会从文本框更改为列表框，然后必须修复所有相关代码（前面提到过）
*   你的代码应该更关心控件的内容，而不是它是什么类型的控件。当您关心控件的类型时，您开始依赖某些功能并破坏封装 - 您应该能够轻松地交换控件而无需更改太多或任何代码。（基本OOP原理）
*   为标准控件提供前缀相当容易，但每天都在开发新控件。您可以制作自己的 WebUserControl，也可以购买一套第三方控件。**您将如何决定自定义控件使用哪个前缀？**您的代码应该关注其中包含哪些信息，而不是关注控件的类型。

例子

*   txtFirstName => 名字或名字
*   txtState => 州或州
*   cboState => state 或 State（更改控件类型的主要示例 lstState 或 rdoState - 它们都应该具有相同的名称，因为您的代码不关心控件的类型，而是用户选择的状态）
*   ctlBilling => billingAddress 或 BillingAddress （自定义控件 - 使用匈牙利表示法，它甚至不是很明显控件是什么，但是有了一个有意义的名称，我开始理解其中包含的信息。即 billingAddress.Street、billingAddress.FullAddress 等）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-10-08T08:27:54.167

不确定微软官方标准，但这是我在整个开发生涯中所做的。

我一般在控件名称前面缩写控件类型。我保留缩写小写和控件的名称 CamelCase。

例如，用户名的 texbox 变为 tbUserName

以下是我使用的标准缩写列表：

```
Abbr     -  Control

btn  -  Button
cb   -  CheckBox
cbl  -  CheckBoxList
dd   -  DropDownList
gv   -  GridView
hl   -  Hyperlink
img  -  Image
ib   -  ImageButton
lbl  -  Label
lbtn -  LinkButton
lb   -  ListBox
lit  -  Literal
pnl  -  Panel
ph   -  PlaceHolder
rb   -  RadioButton
rbl  -  RadioButtonList
txt  -  Textbox 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-08T13:14:22.747

我发现大多数时候我关心的是控件用于什么类型的信息，而不是当前用于捕获该数据的控件类型，所以我更喜欢控件类型之前的信息类型，所以我可以在IDE 中的排序列表：

*   年龄范围下拉列表
*   同意条款复选框
*   名字文本框
*   姓氏文本框

对比：

*   chkAgreedToTerms
*   ddlAgeRange
*   txt名字
*   txt姓氏

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T08:32:08.150

我不确定有关 ASP.NET 的指南，但在 Microsoft 的框架设计指南一书中，有几个关于类成员命名的最佳实践指南。由于 ASP.NET 控件在大多数情况下会生成适当类型的受保护字段，因此我认为这些命名准则也适用于 ASP.NET 控件。事实上，代码分析不会区分控制引用字段和其他字段。

这些指南建议使用暗示逻辑用途的命名方案，而不是类型描述的变体。有几个原因。前缀对开发人员意味着一种类型，由于以后的更改可能不正确。它在代码维护中增加了一个额外的步骤。如果您将 Button 控件更改为 LinkBut​​ton 控件，则还需要更改名称以更正前缀。

出于这个原因，我会调用控件 FirstNameEdit 等...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-08T17:47:58.060

Microsoft 确实在此处提供*了一些*指导。

当您将控件拖到 Web 表单上时，您会自动获得类似“TextBox1”的内容。那就是 IDE 告诉您应该根据您的特定需求更改“1”部分。

在这种情况下，“TextBoxFirstName”似乎是要走的路。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T08:20:44.743

我更喜欢选项 1 的两个原因：

1.  FirstNameTextBox 与我的业务对象更匹配。
2.  更适用于 IntelliSense。

话虽如此，我正在考虑更改为 FirstNameCtrl，原因是 csgero 指出了更改控件类型的原因。那么为什么要使用任何后缀或前缀来减少/消除与 asp/win 表单属性冲突的可能性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-05-11T20:12:36.267

我认为最好使用选项 1，因为通过它的含义和用法很容易找到该字段，以了解以后的编程编码。此外，使用 IntelliSense 来查找我们在编程代码中使用此字段的位置更有用。因此，我可以通过有意义的字段名称找到正确的控件。我不记得我对这个字段使用了什么样的控件，但是我可以通过使用有意义的字段名称而不是控件的类型来找到这个字段我想找到“城市”控件，我只输入“城市”，Intellisence将向我显示此控件的所有信息，但如果我不记得我使用哪种控件，我不知道从什么开始......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-08-01T18:26:18.037

```
Abbreviation    ||   ASP.NET Control 
```

标准控制：

按钮

CB复选框

cbl CheckBoxList

ddl下拉列表

fu 文件上传

hdn 隐藏字段

lnk 超链接

图像图像

ibtn(btn) 图像按钮

lbl 标签

lbtn(btn) 链接按钮

磅列表框

点亮字面量

mv 多视图

pnl面板

ph 占位符

rb 单选按钮

rbl RadioButtonList

表

txt 文本框

v 查看

数据控制

dtl 数据列表

dp 数据页面

dtv 详情查看

ets EntityDataSource

fv 窗体视图

gv 网格视图

lds LinqDataSource

lv - 列表视图

ods 对象数据源

qe QueryExtender

rpt中继器

smd SiteMapDataSource

sds SqlDataSource

xds XmlDataSource

验证控制

cpv 比较验证器

ctv CustomValidator

rv RangeValidator

rev 正则表达式验证器

rfv 必填字段验证器

vs Validation总结

验证控制：

cpv // 比较验证器

ctv CustomValidator

rv RangeValidator

rev 正则表达式验证器

rfv 必填字段验证器

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-08T07:10:40.763

我们也使用数字 2，但我并不完全相信这是一个好方法。这是来自“坏”种类的匈牙利符号，这意味着前缀表示类型（语法）而不是目的（语义）。这样做的问题是，从 TextBox 开始的内容可能稍后会变成 DropDown，然后是 RadioButtonGroup，并且您每次都必须重命名控件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-08T07:34:16.007

几乎每个人都使用匈牙利风格的前缀（选项 2）。语义命名不太有用，因为“名字”实际上是 texbox.Text 值，而不是文本框本身。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-08T08:35:22.607

我倾向于使用控件类型作为前缀，然后使用控件名称，但我总是使用 CamelCase，因此在您的示例中，您可能拥有不同类型的控件。

*   Txb名字
*   DdFirstName
*   ChbFirstName

出于智能感知的原因，我也总是完全限定控件的名称，所以我不会做以下任何事情......

*   TxbFName
*   TxbClientNo
*   TxbNoOfCpn

但最终还是看个人喜好

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-08T12:55:53.890

我也一直在努力解决这个问题。我曾经使用“匈牙利风格前缀”。

现在我采取了不同的方法，我尝试将控件视为我班级的私有字段。我不会在我的私有字段后面加上它们的类型，那么我为什么要对 TextBox 这样做呢？

那么以前是这样的：

```
var newCustomer = new Customer();
newCustomer.Name = txtName.Value;
newCustomer.Address = txtAddress.Value;
newCustomer.City = txtCity.Value;
newCustomer.HasEnoughMoney = cbHasMoney.Selected; 
```

变成：

```
var newCustomer = new Customer();
newCustomer.Name = name.Value;
newCustomer.Address = address.Value;
newCustomer.City = city.Value;
newCustomer.HasEnoughMoney = hasMoney.Selected; 
```

老实说，我不在乎“名称”控件是文本框还是其他什么，我只想要它的价值。

如果您谈论您的控件或另一个字段/变量还不够清楚，我认为您应该重新考虑该字段/变量的名称或您的类的功能（意味着它可能有点大？） .

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-08T13:09:35.877

如果您从代码维护的角度来看它，那么在您 2 年前编写代码之后，最好的符号是什么。尽管我们尝试确保表单上没有太多字段，但我们都知道有时会发生这种情况。如果我们通过添加控件类型来使用匈牙利类型表示法，我认为更容易看到该值的来源，而不必在变量名称不明显的情况下弄清楚它。如果您使用任何类型的重构工具，那么更改控件的名称将自动更改代码，从而减少更改控件的争论。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-08T13:16:43.163

我认为这里没有正确或错误的答案，无论您决定什么，我认为最重要的方面就是在实际编码时保持一致。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-18T12:30:16.973

我使用 uxCity 是为了让您知道它绝对是用户界面控件，而不是其他对象，但如果您从 TextBox 转到 DropDownList，则无需更改它。

但是，如果我有一个 DropdownList*和*一个文本框，我需要使用 dlCity 和 txtCity 或者我会使用组合 cboCity。

当您仅限于 8 个字符的名称并且没有智能感知或调试突出显示时，匈牙利表示法是必要的。这是一门学科，您可以看到，如果编码风格正确，则代码很可能是正确的。它也用于变量，因此您可以阅读代码并理解它，因为它是一种 DIY 类型的强制执行。

但是，我确实使用 CityTextbox、CityTextboxLabel CityUx、CityUxLbl

这完全取决于谁在为项目制定标准。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-13T23:19:26.077

我发现使用匈牙利符号的唯一原因是 IDE 没有智能感知，而且很难弄清楚是什么，所以 iCounter 是一个整数

然而，使用brief 进行开发的时代已经一去不复返了，IDE 会在一秒钟内向您显示信息

然后你继承了 VB.NET 代码，它不区分大小写，你怎么办？

lblFirstName, txtFirstName 一个是标签，另一个是文本框

那么，如何在不区分大小写的情况下命名它们并真正知道它们是什么？

uxFirstName 和 uxFirstName 不起作用

我找到的唯一答案是使用匈牙利符号，是的，我吐在嘴里。然后是它的 vb.net，它应该区分大小写，因为 .net 是并且所有编译到 IL。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-10-08T07:01:26.743

不太确定是否有任何指导方针，我怀疑有，但我也总是使用 2 号！

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2008-10-08T07:08:34.870

这些实际上只是基于您的偏好，但是是的，所描述的选项 2 不那么冗长，甚至在显示其名称之前就向您指示控件的类型。

# vb.net - 如何重构需要大量参数的函数？

> ID：181605
> 
> 赞同：1
> 
> 时间：2008-10-08T07:00:56.697
> 
> 标签：vb.net, refactoring, wrapper, comobject

我为只排除字符串作为输入的 COM 对象编写了一个包装器，因此在良好的 OOP 实践中，我将字符串包装在一个函数中，以便更容易构建和调用。

我只是想知道是否有人能想到更好的方法来执行以下代码。

```
 Public Function OpenTable(ByVal TablePath As String, Optional ByVal OpenAs As String = Nothing, _
            Optional ByVal Hide As Boolean = False, Optional ByVal AsReadOnly As Boolean = False, _
            Optional ByVal Interactive As Boolean = True, Optional ByVal Password As String = Nothing, _
            Optional ByVal NoIndex As Boolean = False, Optional ByVal ViewAutomatic As Boolean = True) As TableInfo

            If String.IsNullOrEmpty(TablePath) Then
                Throw New ArgumentNullException("TablePath", "TablePath cannot be null or empty")
            End If

            Dim Builder = New StringBuilder("Open Table ")
            Builder.AppendFormat("{0}{1}{2}", ControlChars.Quote, TablePath, ControlChars.Quote)

            If (Not String.IsNullOrEmpty(OpenAs)) Then Builder.AppendFormat(" as {0} ", OpenAs)
            If (Hide) Then Builder.Append(" Hide ")
            If (AsReadOnly) Then Builder.Append(" ReadOnly ")
            If (Interactive) Then Builder.Append(" Interactive ")
            If (Not String.IsNullOrEmpty(Password)) Then Builder.AppendFormat(" Password {0} ", Password)
            If (NoIndex) Then Builder.Append(" NoIndex ")
            If (ViewAutomatic) Then Builder.Append(" View Automatic ")

            MyComApp.Do(Builder.ToString)

            Dim FileInfo = New IO.FileInfo(TablePath)
            Return New TableInfo(FileInfo.Name.Substring(0, InStrRev(FileInfo.Name, ".") - 1))
        End Function 
```

函数必须采用的参数数量是我最大的担心。这个还不错，但是我将来可能需要制作一些其他函数，这些函数需要更多的参数，所以我主要是在寻找更好的方法来构建大参数函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T07:09:11.517

在这种情况下，似乎许多参数只是“配置值”（最终是字符串），您可以修改它以接受您在调用之前准备的所有配置的单个类，并相应地返回字符串.

就像是

```
class COMConfiguration {
    private bool Hide = false;
    private bool AsReadOnly = false;
    //and so on...

    public void setHide(bool v) { Hide = v; }

    //only setters

    public string getConfigString() {
        StringBuilder sb = new StringBuilder();
        if (Hide) { sb.Append(" Hide "); }
        if (AsReadOnly) { sb.Append(" ReadOnly "); }
        //and so on
        return sb.ToString()
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T07:08:48.367

处理可以接受大量参数的函数的一种方法是创建一个新的对象类型，其唯一目的是为该函数保存参数。然后您创建一个该类型的新对象，根据需要设置属性，然后将该对象引用传递给您的`OpenTable`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T07:08:34.497

由于我不了解您的编程语言，因此我会将其保留为伪代码，但我的一般答案是使用 ann 数组作为单个参数：

```
function OpenTable( options As array) {
    if (options is not array or options is empty) {
        Throw exception
    }
    return_string = "";
    if ( key is set ('readOnly', options) and is not empty) {
        return_string = return_string + ' readonly';
    }
    // repeat last 3 lines for all your params
} 
```

好的，你函数的最后一部分对我来说没有意义，但我认为应该遇到参数数组的想法。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T07:18:34.507

[您可以将所有布尔参数切换为枚举](http://msdn.microsoft.com/en-us/library/8h84wky1(VS.80).aspx)类型的单个参数，标记为[Flags](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)。这是一个示例声明：

```
' Define an Enum with FlagsAttribute.
<FlagsAttribute( )> _
Enum TableOptions as Short
    Hide = 1
    AsReadOnly = 2
    Interactive = 4
    NoIndex = 8
    ViewAutomatic = 16
End Enum 
```

# f# - F#的隐藏特性

> ID：181613
> 
> 赞同：23
> 
> 时间：2008-10-08T07:05:58.807
> 
> 标签：f#, language-features, hidden-features

这是一个类似的[C#](https://stackoverflow.com/questions/9033/hidden-features-of-c)问题的不加掩饰的尝试。

那么您最喜欢的 F# 隐藏（或不隐藏）功能是什么？

到目前为止，我使用的大多数功能都没有完全隐藏，但非常令人耳目一新。与 C# 或 VB.NET 相比，重载运算符是多么微不足道。

并`Async<T>`帮助我剃掉了一些真正丑陋的代码。

我对这门语言还是很陌生，所以很高兴了解野外使用的其他功能。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-12-04T12:43:32.050

用户定义的数字文字可以通过提供一个模块来定义，该模块的名称以开头`NumericLiteral`并定义了某些方法（`FromZero`、`FromOne`等）。

`LanguagePrimitives.GenericZero`特别是，您可以使用它为调用and提供更易读的语法`LanguagePrimitives.GenericOne`：

```
module NumericLiteralG = begin
  let inline FromZero() = LanguagePrimitives.GenericZero
  let inline FromOne() = LanguagePrimitives.GenericOne
end

let inline genericFactorial n =
  let rec fact n = if (n = 0G) then 1G else n * (fact (n - 1G))
  fact n

let flt = genericFactorial 30.
let bigI = genericFactorial 30I 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-12-04T04:33:29.540

F# 有一个很少使用的功能，称为“签名文件”。您可以拥有一个充满*公共*类型/方法/模块/功能的大实现文件，但随后您可以通过签名文件*隐藏并选择性地将该功能公开给程序的后续版本。*也就是说，签名文件充当一种屏幕/过滤器，使您能够使实体“对该文件公开”但“对程序的其余部分保密”。

我觉得这是 .Net 平台上的一个非常杀手级的功能，因为用于这种封装的唯一其他/先前工具是程序集。如果您有一个包含一些相关类型的小组件，希望能够看到彼此的内部详细信息，但不希望这些类型将所有这些位公开给*所有人*，您该怎么办？好吧，你可以做两件事：

1.  您可以将该组件放在单独的程序集中，并使这些类型共享的成员为“内部”，并使您希望其他人看到的狭窄部分为“公共”，或者
2.  您只需将内部内容标记为“内部”，但将这些类型留在庞大的程序集中，并希望程序集中的所有其他代码选择不调用那些仅标记为“内部”的成员，因为需要另一种类型才能看到它.

以我的经验，在大型软件项目中，每个人都总是做#2，因为出于各种原因，#1 不是初学者（人们不想要 50 个小程序集，他们想要 1 个或 2 个或 3 个大程序集，对于其他可能 -与我提出的封装点无关的充分理由（除此之外：每个人都提到 ILMerge，但没有人使用它））。

所以你选择了选项#2。然后一年后，你终于决定重构那个组件，你发现在过去的一年里，其他 17 个地方现在调用了那个“内部”方法，而这个方法实际上只适用于另一种类型的调用，使它真的很难考虑到这一点，因为现在每个人都依赖于这些实现细节。真可惜。

关键是，在 .Net 中没有创建中等大小的程序集内封装范围/边界的好方法。很多时候“内部”太大而“私人”太小。

...直到 F#。使用 F# 签名文件，您可以通过在实现文件中将一堆东西标记为公共来创建“此源代码文件”的封装范围，因此文件中的所有其他代码都可以看到它并参与其中，然后使用隐藏所有细节的签名文件期望组件向世界其他地方公开的狭窄公共接口。这是快乐的。在一个文件中定义三个高度相关的类型，让他们看到彼此的实现细节，但只将真正公开的东西暴露给其他人。赢！

签名文件可能不是组件内封装边界的*理想功能，但它们是我所知道的**唯一*此类功能，因此我像海洋中的救生筏一样紧紧抓住它们。

TL;博士

复杂性是敌人。封装边界是对付这个敌人的武器。“私有”是一个很好的武器，但有时太小而无法应用，“内部”通常太弱，因为太多代码（整个程序集和所有 InternalsVisibleTo 的）可以看到内部的东西。F# 提供的范围大于“类型专用”但小于“整个程序集”，这非常有用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-10-06T05:47:04.730

我想知道如果你添加会发生什么

```
<appSettings>
  <add key="fsharp-navigationbar-enabled" value="true" />
</appSettings> 
```

到你的 devenv.exe.config 文件？（使用风险自负。）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2010-06-29T06:28:06.313

传递`--warnon:1182`给编译器会打开关于未使用变量的警告；以下划线开头的变量名是免疫的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-10-17T10:46:51.873

代数数据类型的自动生成比较函数（基于字典顺序）是一个相对未知的好特性；看

[http://lorgonblog.spaces.live.com/blog/cns!701679AD17B6D310!548.entry](http://lorgonblog.spaces.live.com/blog/cns!701679AD17B6D310!548.entry)

例如。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-10-09T05:19:22.283

是的，F# 没有任何“隐藏”功能，但它确实在简单的语言中包含了很多功能。该语言的一个鲜为人知的特性是，尽管 F# 是静态类型的，但您基本上[可以启用鸭子类型。](http://www.atrevido.net/blog/2008/08/31/Statically+Typed+Duck+Typing+In+F.aspx)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-07-23T07:44:30.603

看到这个问题

[F# 运算符“？”](https://stackoverflow.com/questions/890794/f-operator)

有关问号运算符的信息，以及它如何提供基本语言机制来构建类似于 C# 中“动态”的功能。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2010-06-29T14:33:16.847

不是真的*隐藏*，但作为一个非 ML 的人，这让我很长时间没有想到：

模式匹配可以**任意深入**地分解为数据结构。

这是一个 [令人难以置信的任意] 嵌套元组示例；这适用于列表或联合或嵌套值的任何组合：

```
let listEven =
  "Manipulating strings can be intriguing using F#".Split ' '
  |> List.ofArray
  |> List.map (fun x -> (x.Length % 2 = 0, x.Contains "i"), x)
  |> List.choose 
     ( function (true, true), s -> Some s 
              | _, "F#"         -> Some "language" 
              | _               -> None ) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-10T20:23:10.333

将 F# 用作实用程序脚本语言可能不受欢迎。F# 爱好者往往是 Quant。有时您希望备份 MP3（或数十个数据库服务器）的功能比批处理功能更强大。我一直在寻找 jscript / vbscript 的现代替代品。最近，我使用了 IronPython，但 F# 可能更完整，.NET 交互也不那么麻烦。

我喜欢用于娱乐价值的[咖喱函数。](https://stackoverflow.com/questions/8448/f-curried-function)向至少三个 WTF 的纯过程/OOP 程序显示柯里化函数。不过，从这里开始是获得 F# 转换的不好方法:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-12-04T12:31:45.913

泛型类型的内联运算符可以有不同的泛型约束：

```
type 'a Wrapper = Wrapper of 'a with
  static member inline (+)(Wrapper(a),Wrapper(b)) = Wrapper(a + b)
  static member inline Exp(Wrapper(a)) = Wrapper(exp a)

let objWrapper = Wrapper(obj())
let intWrapper = (Wrapper 1) + (Wrapper 2)
let fltWrapper = exp (Wrapper 1.0)

(* won''t compile *)
let _ = exp (Wrapper 1) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-10-08T07:14:32.393

没有隐藏功能，因为 F# 处于设计模式。我们所拥有的只是技术预览，每两个月更改一次。

见[http://research.microsoft.com/fsharp/](http://research.microsoft.com/fsharp/)

# java - Java 线程：是否可以从在同一 JVM 上运行的不同 Java 程序查看/暂停/杀死特定线程？

> ID：181615
> 
> 赞同：7
> 
> 时间：2008-10-08T07:08:04.107
> 
> 标签：java, multithreading, jvm

我有一个程序'foo'运行不同的线程，fooT1，fooT2，.. fooTn。

现在，如果我想编写另一个程序“bar”，它可能会杀死线程 fooTr，这可能吗？

原因：线程 fooTr 跟踪产品许可证之一。如果这个线程被杀死；一个人可以无限期地运行这个产品。杀死“foo”本身是可以容忍的，因为这正是许可证到期时所做的事情。

系统：Linux 的 Fedora 发行版

注意：启动 JVM 和程序 foo 的命令放在 /etc/init.d 中，任何对 rc.1/rc.2/rc.3 结构有相当了解的人都可以更改/添加启动参数。

我希望我的问题很清楚。如果没有，我可以随时编辑它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-17T10:37:05.430

实际上，Java 调试器将允许您通过向其中注入异常来终止线程。当我遇到这个问题时，我只是想弄清楚如何使用这个功能来杀死一个线程而不清除整个 jvm。如果您使用命令行选项运行 jvm，例如：

```
java -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8888 your.app.Main 
```

并将调试器与以下内容连接：

```
jdb -attach 127.0.0.1:8888 
```

你可以输入：

```
threads 
```

获取正在运行的线程列表，并使用 kill 命令杀死正在运行的线程。我目前不确定的是这个 kill 命令的语法，我已经尝试了明显的：

```
kill 0xe2e new java.lang.IllegalArgumentException("er"); 
```

我收到消息：

```
killing thread: Swank REPL Thread
Thread not suspended
Expression must evaluate to an object 
```

（“Swank REPL Thread”是我想杀死的线程，是的，我已经尝试过先挂起它；）

除了我无法使用 java 调试器之外，在我看来，一个线程可以被随机杀死。也许您可以确保忽略所有异常并继续运行就足够了，但我不确定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T09:51:26.853

据我所知，不可能直接这样做。但是，您可以考虑在您的“foo”上创建某种服务，可以从“bar”调用该服务以终止线程。当然，有数百种方法可以实现这一点。我的第一个想法是使用[RMI](https://stackoverflow.com/search?q=java+rmi "远程方法调用")来做到这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-09T19:29:58.073

即使没有单独的应用程序，您也可以这样做。编写您自己的启动类，该类将参数传递给应用程序的原始启动类。您的类的 main 方法虽然会创建一个线程，该线程会定期检查所有线程的列表（例如，`Thread.getAllStackTraces`或`Thread.enumerate`），找到有问题的线程，并在其上调用`stop()`。尽管`Thread.stop`已弃用，但它仍然有效。

另一种选择是在 Java 调试器下运行应用程序，例如，`jdb`然后挂起/终止所需的线程。您还可以向应用程序的启动添加参数，以便可以附加 JVM，然后附加`jdb`到正在运行的 JVM 并怀疑/杀死线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T10:36:57.743

到目前为止，不可能在同一台JVM中运行不同的程序，但有人正在研究它，以减少在同一台机器上运行的不同java程序的启动时间和内存和cpu使用率

# javascript - 使用 Javascript 从浏览器截屏？

> ID：181622
> 
> 赞同：3
> 
> 时间：2008-10-08T07:10:09.300
> 
> 标签：javascript

我想这是一个奇怪的问题，答案很可能是不可能的，因为它代表了安全漏洞；但我正在寻找一种方法——如果有的话——在浏览器中获取内容的屏幕转储。我不需要整个窗口，但实际上只需要转储标签的呈现状态。它需要跨平台和跨浏览器兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T07:32:07.023

（还）不能在纯 JavaScript 中完成。

作为旁注，如果您的目标是进行渲染测试，您可以尝试在托管环境中实例化目标浏览器（即在 WinForms 应用程序中托管 Internet Explorer 并获取渲染内容的屏幕截图） - 这将显示 Silverlight插件并允许截屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T15:30:15.000

如果您不需要实际的屏幕截图，您可以获取内容的 innerHTML 并通过 Ajax 将其发送回服务器，将其存储在某处并远程查看。

# c++ - C++：我应该使用什么正则表达式库？

> ID：181624
> 
> 赞同：108
> 
> 时间：2008-10-08T07:10:52.043
> 
> 标签：c++, regex, linux

我正在开发一个在基于 linux 的系统上运行的商业（非开源）C++ 项目。我需要在 C++ 代码中做一些正则表达式。（我知道：我现在有两个问题。）

问题：经常使用 C/C++ 进行正则表达式的人推荐我研究哪些库？快速搜索引起了我的注意：

1）Boost.Regex（我需要去阅读Boost软件许可证，但这个问题与软件许可证无关）

2) C（非 C++）POSIX 正则表达式（#include <regex.h>、regcomp、regexec 等）

3）[http://freshmeat.net/projects/cpp_regex/](http://freshmeat.net/projects/cpp_regex/) （我对这个一无所知；似乎是GPL，因此不能用于这个项目）

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-10-08T11:46:45.857

[Boost.Regex](http://www.boost.org/libs/regex/)非常好，并计划成为 C++0x 标准的一部分（它已经在 TR1 中）。

就个人而言，我发现[Boost.Xpressive](http://www.boost.org/libs/xpressive/)更好用。它是一个仅包含头文件的库，并且具有一些不错的功能，例如静态正则表达式（在编译时编译的正则表达式）。

**更新：**如果您使用的是符合 C++11 的编译器（gcc 4.8 不是！），请使用[std::regex](http://en.cppreference.com/w/cpp/regex)，除非您有充分的理由使用其他东西。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-10-09T05:36:36.053

感谢所有的建议。

我今天尝试了一些东西，对于我们正在尝试做的东西，我选择了最简单的解决方案，我不必下载任何其他 3rd-party 库。最后，我#include <regex.h> 并使用了标准的 C POSIX 调用 regcomp() 和 regexec()。不是 C++，但在紧要关头，这被证明是最简单的。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-10-08T07:12:10.060

在过去的 C++ 项目中，我成功地使用了[PCRE](http://pcre.org)。它非常完整且经过良好测试，因为它已用于许多高端项目。而且我看到谷歌最近也为 PCRE 贡献了一组 C++ 包装器。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-10-08T07:27:09.170

自 TR1 以来，C++ 有一个内置的正则表达式库。AFAIK Boost 的正则表达式库与它非常兼容，如果您的标准库不提供 TR1，则可以用作替代品。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2011-12-19T11:47:54.410

还有两个选择：

如果你可以用**c++11**编写它- 做教程： http: [//www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c15339](http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c15339)

注意：在编写我所知道的唯一一个 c++11 正则表达式库是[clang/llvm one](http://libcxx.llvm.org/)时，它​​只能在 Mac 上运行。GNU 还[没有实现正则表达式](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)。我不了解 Visual Studio。大多数人仍然使用[boost regex](http://www.boost.org/doc/libs/1_54_0/libs/regex/doc/html/index.html)实现。

* * *

或者您可以使用**ragel**生成一个有限状态机为您进行解析，并生成 C/C++ 代码实现： http: [//www.complang.org/ragel/](http://www.complang.org/ragel/)

我用它来生成解析 json 的代码。此 ragel 文件：[https](https://github.com/matiu2/yajp/blob/master/parser/number.rl) ://github.com/matiu2/yajp/blob/master/parser/number.rl 用于生成此代码 [https://github.com/matiu2/yajp/blob/master/parser/json .hpp#L254](https://github.com/matiu2/yajp/blob/master/parser/json.hpp#L254) 和这个有限状态机图：

![状态图](https://i.stack.imgur.com/76Y96.png)

* * *

**更新1：**

lvm 的 libc++ 正则表达式适用于 ubuntu 14.04：libc++-dev - LLVM C++ 标准库（开发文件）。编译时：`clang++ -std=c++11 -lc++ -I/usr/include/c++/v1 ...`

**更新 2：**

我目前正在享受**[boost spirit 3](http://ciere.com/cppnow15/x3_docs/)** - 我比正则表达式更喜欢它，因为它具有 BNF 样式规则并且经过深思熟虑。（较旧的（更多记录的）Spirit Qi libs [found here](http://www.boost.org/doc/libs/1_61_0/libs/spirit/doc/html/index.html)）

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-10-08T07:53:59.977

Boost中有[正则表达式](http://www.boost.org/doc/libs/1_36_0/libs/regex/doc/html/index.html)。

这应该能满足要求

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2011-01-09T18:19:07.160

您还可以查看[Yandex](http://yandex.com)搜索引擎开发的[快速正则表达式库](https://github.com/dprokoptsev/pire)，用于对大量数据进行数千种模式的快速匹配。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-10-08T08:25:38.133

我个人一直使用 boost.regex（尽管我在 C++ 中对正则表达式的需求并不大）。Microsoft Labs 也有一个正则表达式库，称为 GRETA：[http](http://research.microsoft.com/projects/greta/) ://research.microsoft.com/projects/greta/ 。显然它非常快并且具有完整的 Perl 5 语法。我没用过，但你可能想测试一下。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-04-21T10:09:58.037

我遇到了类似的情况，最终使用了亨利斯宾塞正则表达式引擎 [http://www.codeproject.com/KB/string/spencerregexp.aspx](http://www.codeproject.com/KB/string/spencerregexp.aspx)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-01-09T18:27:48.547

这里没有人谈论 C++0x 附带的那个。如果您使用的是支持 C++0x 的编译器和 STL，您可以直接使用它，而不是在您的项目中使用另一个库。

# k2 - 为什么我的 K2 流程没有出现在报告中？

> ID：181627
> 
> 赞同：1
> 
> 时间：2008-10-08T07:11:15.367
> 
> 标签：k2

我使用 K2 作为我的工作流引擎。由于某种原因，我的流程在任何报告视图（工作区）中都不可用。部署时我是否必须做一些特别的事情才能让它们到达那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T07:48:52.513

您的 k2 进程应该会自动出现在报告中。如果没有，也许它从未启动过？

查看 K2Server 数据库中的 _ProcInst 表，看看它是否存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-07-08T10:40:11.003

检查您是否为该进程设置了查看权限。如果您没有查看权限，您将不会在报告中看到该过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T22:11:04.020

TrueWill 的评论是正确的。但是，看不到特定流程数据的最可能原因是缺少所需的权限。根据要求，确保您的帐户对流程具有查看、查看参与或管理员权限。查看参与要求您以某种方式参与流程，例如成为目标用户（这通常意味着为您分配了一项任务），以便您查看该实例的报告数据。

# c++ - 如何将 /baseaddress 设置为“好”值？

> ID：181629
> 
> 赞同：9
> 
> 时间：2008-10-08T07:12:49.060
> 
> 标签：c++, dll, native

我们有一个项目，其中包含许多 dll 文件，这些文件在应用程序启动时会被加载。dll 文件的基地址确实重叠，因此内存映像被重新定位。是否有可能自动分配基地址或为每个 dll 文件计算“好”基地址的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-08T07:25:37.270

您可以使用平台 SDK 和 Visual Studio 附带的 REBASE 实用程序，我认为可以设置应用程序加载的一大堆 DLLS 的基地址

您向 REBASE 提供组成程序的 DLL 列表，不包括系统 Dll，然后它执行所有 DLL 的虚拟加载并为它们分配新的基地址。

这可以作为最终构建步骤的一部分执行。

Dobbs 博士有一篇关于 rebase的[文章和一篇关于 rebase](http://www.ddj.us/windows/184416922)[的](http://msdn.microsoft.com/en-us/library/ms810432.aspx)Microsoft 文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T12:50:59.127

如果您正在分发 DLL，无论您如何设置基地址，始终存在并非由您编写的其他 DLL 已经加载到该地址的风险（例如全局挂钩 DLL）。

此外，如果您正在为 Vista 构建，您实际上应该使用 /DYNAMICBASE 来启用 ASLR。

这是 msdn 链接：http: [//msdn.microsoft.com/en-us/library/bb384887.aspx](http://msdn.microsoft.com/en-us/library/bb384887.aspx)。

# c++ - 什么是好的稳定的 C++ 树实现？

> ID：181630
> 
> 赞同：47
> 
> 时间：2008-10-08T07:13:49.167
> 
> 标签：c++, tree, graph-theory

我想知道是否有人可以推荐一个好的 C++ 树实现，如果可能的话，希望它是兼容 stl 的。

作为记录，我以前写过很多次树算法，我知道这很有趣，但如果可能的话，我想变得务实和懒惰。因此，与工作解决方案的实际链接是这里的目标。

注意：我正在寻找通用树，而不是平衡树或地图/集，在这种情况下，结构本身和树的连接性很重要，而不仅仅是其中的数据。所以每个分支都需要能够保存任意数量的数据，并且每个分支都应该是可单独迭代的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-08T08:18:55.837

我不知道您的要求，但是如果您主要对结构感兴趣，而不是对特定于树的好处（例如通过平衡的速度）感兴趣，那么使用图表（例如在[Boost Graph](http://www.boost.org/doc/libs/release/libs/graph/doc/index.html)中的实现）会不会更好? 您可以通过图表“模拟”一棵树，也许它会（从概念上）更接近您正在寻找的东西。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-10-08T07:22:18.557

看看[这个](http://tree.phi-sci.com/)。

C++ 的 tree.hh 库为 n 叉树提供了一个类似 STL 的容器类，模板化了存储在节点上的数据。提供了各种类型的迭代器（post-order、pre-order 等）。在可能的情况下，访问方法与 STL 兼容，或者可以使用替代算法。

高温高压

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-10-08T07:20:13.383

我将建议使用 std::map 而不是树。

树的复杂性特征是：

插入：O(ln(n))
删除：O(ln(n))
查找：O(ln(n))

这些与 std::map 保证的特征相同。
因此，std::map 的大多数实现都在底层使用了树（红黑树）（尽管从技术上讲这不是必需的）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T07:36:29.310

如果您没有 (key, value) 对，而只是键，请使用 std::set。它使用与 std::map 相同的红黑树。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-08T08:06:15.003

好的，伙计们，我找到了另一个树库；[stlplus.ntree](http://stlplus.sourceforge.net/stlplus3/docs/ntree.html)。但是还没试过。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-21T19:02:42.667

假设问题是关于平衡的（以某种形式，主要是红黑树）二叉树，即使情况并非如此。

平衡二叉树，如向量，允许管理一些元素的排序，而不需要任何键（比如通过在向量中的任何位置插入元素），但是：

*   对一个元素的所有修改具有最佳 O(log(n)) 或更好的复杂性（在任何迭代器的开始、结束**和**前后添加/删除）
*   除了直接**破坏**迭代器指向的元素之外，通过任何修改来保持迭代器。

可选地，可以支持像向量中的索引访问（按元素计算一个 size_t 的成本），复杂度为 O(log(n))。如果使用，迭代器将是随机的。

可选的顺序可以通过一些比较函数来强制执行，但迭代器的持久性允许使用不可重复的比较方案（例如：交通堵塞期间任意车道改变）。

在实践中，平衡二叉树具有向量、列表、双链表、map、multimap、deque、queue、priority_queue 的接口......对于所有单元素操作都达到了理论上的最优 O(log(n)) 复杂度。

<sarcastic> 这大概就是为什么 c++ stl 没有提出它的原因</sarcastic>

由于难以正确管理平衡，特别是在元素提取期间，个人可能无法自行实现一般平衡树。

平衡二叉树没有广泛可用的实现，因为最先进的红黑树（此时由于移除期间固定数量的昂贵树重组而成为最佳平衡树类型）知道实现，每个实现者都从结构发明者的初始代码不允许迭代器持久性。这可能是缺少全功能树模板的原因。

# c# - Windows 应用程序中的等待窗口

> ID：181643
> 
> 赞同：1
> 
> 时间：2008-10-08T07:20:09.043
> 
> 标签：c#, .net, .net-2.0

我基本上需要向用户显示一个等待窗口。为此，我在应用程序中放置了两个单独的窗口窗体。第一个窗体是带有按钮的主窗体。第二个是空的，只有一个标签文本。单击 Form1 中的按钮时，我执行以下操作

```
Form2 f = new Form2();
f.Show();
Thread.Sleep(2000);
f.Close(); 
```

我的想法是向用户显示等待窗口 2 秒。但是当我这样做时，Form 2 没有完全加载，因为其中的标签是空白的。请让我知道您对此的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T07:24:53.967

那是因为你可能在同一个线程（UI 线程）中做了一些冗长的操作。您应该在一个新线程中执行您的代码（请参阅 Thread 类），或者至少从冗长的操作中定期调用 Application.DoEvents 来更新 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-06-17T02:54:13.957

这是我使用的 Waiting Box 类。以下是你如何使用它：

```
using WaitingBox;
ShowWaitingBox waiting = new ShowWaitingBox("Title Text","Some Text so the user knows whats going on..");
waiting.Start();
//do something that takes a while
waiting.Stop(); 
```

这是 WaitingBox 的代码：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.Threading;

    namespace WaitingBox
    {
            public class ShowWaitingBox
            {
                    private class WaitingForm:Form
                    {
                            public WaitingForm()
                            {
                                    this.tableLayoutPanel1 = new System.Windows.Forms.TableLayoutPanel();
                                    this.label1 = new System.Windows.Forms.Label();
                                    this.progressBar1 = new System.Windows.Forms.ProgressBar();
                                    this.tableLayoutPanel1.SuspendLayout();
                                    this.SuspendLayout();
                                    // 
                                    // tableLayoutPanel1
                                    // 
                                    this.tableLayoutPanel1.ColumnCount = 1;
                                    this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 50F));
                                    this.tableLayoutPanel1.Controls.Add(this.progressBar1, 0, 0);
                                    this.tableLayoutPanel1.Controls.Add(this.label1, 0, 2);
                                    this.tableLayoutPanel1.Dock = System.Windows.Forms.DockStyle.Fill;
                                    this.tableLayoutPanel1.Location = new System.Drawing.Point(0, 0);
                                    this.tableLayoutPanel1.Name = "tableLayoutPanel1";
                                    this.tableLayoutPanel1.RowCount = 3;
                                    this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 50F));
                                    this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Absolute, 29F));
                                    this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 50F));
                                    this.tableLayoutPanel1.Size = new System.Drawing.Size(492, 155);
                                    this.tableLayoutPanel1.TabIndex = 0;
                                    // 
                                    // label1
                                    // 
                                    this.label1.Anchor = System.Windows.Forms.AnchorStyles.Top;
                                    this.label1.AutoSize = true;
                                    this.label1.Location = new System.Drawing.Point(209, 92);
                                    this.label1.Name = "label1";
                                    this.label1.Size = new System.Drawing.Size(73, 13);
                                    this.label1.TabIndex = 3;
                                    this.label1.Text = "Please Wait...";
                                    // 
                                    // progressBar1
                                    // 
                                    this.progressBar1.Anchor = System.Windows.Forms.AnchorStyles.Bottom;
                                    this.progressBar1.Location = new System.Drawing.Point(22, 37);
                                    this.progressBar1.Name = "progressBar1";
                                    this.progressBar1.Size = new System.Drawing.Size(447, 23);
                                    this.progressBar1.TabIndex = 2;
                                    // 
                                    // WaitingForm
                                    // 
                                    this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
                                    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
                                    this.ClientSize = new System.Drawing.Size(492, 155);
                                    this.Controls.Add(this.tableLayoutPanel1);
                                    this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedToolWindow;
                                    this.Name = "WaitingForm";
                                    this.Text = "Working in the background";
                                    this.FormClosing += new System.Windows.Forms.FormClosingEventHandler(this.WaitingForm_FormClosing);
                                    this.Load += new System.EventHandler(this.WaitingForm_Load);
                                    this.tableLayoutPanel1.ResumeLayout(false);
                                    this.tableLayoutPanel1.PerformLayout();
                                    this.ResumeLayout(false);
                            }

                            private System.Windows.Forms.TableLayoutPanel tableLayoutPanel1;
                            private System.Windows.Forms.ProgressBar progressBar1;
                            private System.Windows.Forms.Label label1;

                            private void WaitingForm_Load(object sender, EventArgs e)
                            {
                                    progressBar1.Style = ProgressBarStyle.Marquee;
                                    this.BringToFront();
                                    this.CenterToScreen();
                            }

                            private void WaitingForm_FormClosing(object sender, FormClosingEventArgs e)
                            {
                            }

                            internal void SetLabel(string p)
                            {
                                    label1.Text = p;
                            }
                    }
                    private WaitingForm wf = new WaitingForm();
                    private string title, text;
                    private Thread waiting;
                    public bool IsAlive
                    {
                            get
                            {
                                    return waiting.IsAlive;
                            }
                            set { }
                    }
                    public ShowWaitingBox(string Title, string Text)
                    {
                            this.title = string.IsNullOrEmpty(Title) ? "Working in the Background..": Title;
                            this.text = string.IsNullOrEmpty(Text) ? "Please wait..." : Text;
                            waiting = new Thread(new ThreadStart(Show));

                    }

                    public ShowWaitingBox()
                    {
                            waiting = new Thread(new ThreadStart(Show));
                    }

                    private void Show()
                    {
                            wf.Show();
                            wf.Text = this.title;
                            wf.SetLabel(this.text);
                            while (true) {

                                    wf.Refresh();
                                    System.Threading.Thread.Sleep(50);
                            }
                    }
                    public void Start()
                    {
                            waiting.Start();
                    }
                    public void Stop()
                    {
                            waiting.Abort();
                    }
            }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T07:32:02.110

当您使用 Thread.Sleep 时，您将禁用 Windows 消息循环并阻止窗口自行绘制。

您可以强制重新绘制：

```
f.Refresh(); 
```

或者更好的是使用带有回调的计时器。

```
Timer t = new Timer();
t.Interval = 2000;
t.Tick += delegate { Close(); t.Stop();};
t.Start(); 
```

为了防止用户在原始窗口中单击，您可以将新表单作为对话框打开：

```
f.ShowDialog(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T07:25:11.967

你基本上阻塞了 UI 线程。

我建议您改为让您的 Form2 构造函数（或可能的 Load 事件处理程序）启动一个计时器，该计时器将在两秒钟后触发。当计时器触发时，关闭表单。在这两秒钟内，UI 线程将空闲，因此一切都将正常显示，用户将能够移动窗口等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T08:33:44.233

我认为你应该只使用

```
f.ShowDialog(this); 
```

然后当 f 关闭时返回控制。

通过使用睡眠，您将阻止 UI 线程更新 2 秒。（线程睡着了）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-10-08T07:40:21.733

您可以（对于 UI 线程始终应该）使用[Thread.Current.Join(2000)](http://msdn.microsoft.com/en-us/library/6b1kkss0.aspx)而不是 Thread.Sleep(2000)。

# python - 在 python 中打开 berkeley db 的问题

> ID：181648
> 
> 赞同：5
> 
> 时间：2008-10-08T07:21:19.683
> 
> 标签：python, database, berkeley-db

我在使用 bdtables 在 python 中打开 berkeley db 时遇到问题。由于我用来访问数据库的库使用 bdtables，因此我需要它来工作。

问题似乎是我试图打开的 db 环境（我有一个要打开的数据库副本）是 4.4 版，而 libdb 是 4.6 版。使用 bsddb.dbtables.bsdTableDB([dbname],[folder]) 时出现以下错误：

```
(-30972, "DB_VERSION_MISMATCH: Database environment version mismatch -- Program version 4.6 doesn't match environment version 4.4") 
```

但是， bsddb.btopen([dbname]) 有效。

我也试过安装 db4.4-util、db4.5-util 和 db4.6-util。尝试使用 db4.6_verify 会导致：

```
db4.6_verify: Program version 4.6 doesn't match environment version 4.4
db4.6_verify: DB_ENV->open: DB_VERSION_MISMATCH: Database environment version mismatchs 
```

db4.4_verify 导致计算机只是挂起，没有任何反应。

最后，如果我在数据库上运行 db4.4_recover，那就可以了。但是，之后我在 python 中收到以下错误“没有这样的文件或目录”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-09T02:16:06.663

我认为答案应该放在“答案”部分，而不是作为问题的附录，因为这将问题标记为在各种问题列表页面上都有答案。我会为您执行此操作，但如果您也有时间这样做，请对我的回答发表评论，以便我删除它。

引用“有问题的答案”：

验证了这个问题中的所有内容，我最终解决了这个问题。'没有这样的文件或目录'是由一些 __db.XXX 文件丢失引起的。使用

```
bsddb.dbtables.bsdTableDB([dbname],[folder], create=1) 
```

在 db4.4_recover 之后，这些文件被创建并且现在一切正常。

尽管如此，这仍然是一个晦涩难懂的问题，最初很难弄清楚。但是感谢[从 CLI 检查伯克利数据库文件](https://stackoverflow.com/questions/37644/examining-berkeley-db-files-from-the-cli)的问题，我得到了我需要的工具。如果将来有人遇到同样的问题并最终出现在 stackoverflow.com，我会在此处发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-11T12:21:41.917

该死的，验证了这个问题中的所有内容，我最终解决了这个问题。'没有这样的文件或目录'是由一些 __db.XXX 文件丢失引起的。在 db4.4_recover 之后使用 bsddb.dbtables.bsdTableDB([dbname],[folder], create=1)，这些文件被创建，现在一切正常。

尽管如此，这仍然是一个晦涩难懂的问题，最初很难弄清楚。但是感谢从 CLI 检查伯克利数据库文件的问题，我得到了我需要的工具。如果将来有人遇到同样的问题并最终出现在 stackoverflow.com，我会在此处发布

# ruby-on-rails - Ruby on Rails - 我可以在调用属性之前修改它的值吗？

> ID：181652
> 
> 赞同：6
> 
> 时间：2008-10-08T07:23:02.987
> 
> 标签：ruby-on-rails, ruby, model, attributes

假设我有一个名为*Product*的模型，其字段名为*brand*。假设*品牌值以**this_is_a_brand*格式存储。我可以在模型（或其他任何地方）中定义一个方法，允许我在调用之前修改*品牌的价值。*例如，如果我调用*@product.brand*，我想得到*This is a Brand*，而不是*this_is_a_brand*。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-08T17:49:38.510

我建议使用方括号语法 ( `[]`and `[]=`) 而不是`read_attribute`and `write_attribute`。方括号语法更短，[旨在包装**受保护**的read/write_attribute 方法](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#M001375)。

```
def brand
  original = self[:brand]
  transform(original)
end

def brand=(b)
  self[:brand] = reverse_transform(b)
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-08T08:32:34.843

而不是直接访问@attributes，您应该使用`read_attribute`and `write_attribute`：

```
def brand
  b = read_attribute(:brand) 
  b && b.transform_in_some_way
end

def brand=(b)
  b && b.transform_in_some_way
  write_attribute(:brand, b)
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-05T22:45:30.880

由于最后一个答案是 7 年前发布的，我将贡献[Rails API](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)当前建议的内容。

```
def brand
  super.humanize
end 
```

[Humanize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-humanize)将“this_is_a_brand”变成“这是一个品牌”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T07:25:22.450

在您的模型中，您可以覆盖方法调用`brand`。

```
def brand
#code to modify the value that is stored in brand
return modified_brand
end 
```

这将允许将其存储为 this_is_a_brand。但是，它将作为“这是一个品牌”返回。

# backup - Microsoft Virtual Server 2005 R2 的备份工具？

> ID：181671
> 
> 赞同：1
> 
> 时间：2008-10-08T07:27:13.163
> 
> 标签：backup, virtualization, virtual-server

我正在寻找一种备份工具来备份通过 Microsoft Virtual Server 2005 R2 运行的虚拟操作系统实例。根据[MS docs](http://technet.microsoft.com/en-us/library/cc720377.aspx) *，*应该可以通过卷影复制服务来实现，但我很难找到任何工具。

备份 MS 虚拟服务器实例的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T14:30:43.573

我个人喜欢使用[ImageX](http://technet.microsoft.com/en-us/library/cc722145.aspx)将 VHD 捕获到 WIM 文件。（这称为基于文件的映像，与基于扇区的映像相反。）WIM 有点像特定于 NTFS 的压缩格式。它还有一个单实例存储，这意味着多次出现的文件只存储一次。压缩非常好，文件系统通过 ACL 完美恢复，重新解析点完好无损。

您可以在 WIM 中存储多个 VHD 和这些 VHD 的多个版本。这意味着您可以备份 VHD 的增量版本，并且每次只会在 WIM 末尾添加一点增量。

至于实时映像，您可以[编写 vshadow.exe 脚本](http://redmondmag.com/columns/print.asp?EditorialsID=2324)以在备份之前制作虚拟机的副本。

您可以通过以下两种方式之一将图像捕获为 WIM 格式：

1.  使用虚拟服务器在 Windows PE 中安装要捕获的虚拟机。然后使用 /CAPTURE 标志运行 ImageX 并将 WIM 保存到网络驱动器。
2.  使用 VHDMount 之类的工具将虚拟机挂载为本地驱动器，然后使用 ImageX 进行捕获。（根据我的经验，VHDMount 不稳定，我会推荐 SmartVDK 来完成这项任务。VHDMount 更适合格式化磁盘和分区。）

这只是掠过这种方法的表面。我一直想写一个更详细的教程，涵盖所有这些的细微差别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T08:15:33.910

[http://technet.microsoft.com/en-us/library/cc720377.aspx](http://technet.microsoft.com/en-us/library/cc720377.aspx) [http://support.microsoft.com/kb/867590](http://support.microsoft.com/kb/867590)

似乎有多种方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-11T16:41:43.717

我将 BackupChain 用于 Virtual Server 2005 以及 VMWare。它创建仅包含文件更改的增量增量文件，并在 VM 运行时拍摄快照。这样我们节省了大量的存储空间和带宽，因为它通过 FTP 将备份发送到另一台服务器。保存

# java - 线程同步问题（java中）

> ID：181690
> 
> 赞同：4
> 
> 时间：2008-10-08T07:33:35.710
> 
> 标签：java, multithreading, concurrency, synchronization

我的 java 应用程序有一个加载任务，它需要两个可以并行化的服务器调用。所以我启动了一个 Thread t1 （执行**task1**）和一个 Thread t2 （用于**task2**）。然后，我想在其他两个任务（1 和 2）都结束时执行特定任务**task3 。**自然我不知道**task1**和**task2**中的哪一个会先完成......

哪种方法对您来说是最简单（也是最安全）的编码方式？

感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-08T07:59:20.043

你有几个选择：

1.  如果 task3 在单独的线程上，并且 task1 和 task2 线程是其任务专有的（无线程池）并在任务完成时完成，则可以使用 {T1.join(); T2.join();} 等待两个线程。优点：容易。缺点：情况很少那么简单。
2.  如果 task3 在单独的线程上，您可以使用所有线程之间共享的 java.util.concurrent.CountDownLatch。任务 3 将等待锁存器，而任务 1 和任务 2 将减少它。优点：很容易，对环境无动于衷。缺点：需要在真正需要之前创建 T3。
3.  如果 task3 应该只在 task1 和 task2 完成之后创建（在 task1 和 task2 完成之前没有单独的线程），你必须构建一些更复杂的东西。我建议要么创建你自己的 ExecutorService ，它除了未来之外还有一个条件，并且只在条件发生变化时执行未来，或者创建一个管理服务来检查条件并根据这些条件提交给定的未来。请注意，这是我的头等大事，可能有更简单的解决方案。优点：资源友好。缺点：复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T07:34:44.803

您可以[`join`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Thread.html#join())同时使用`t1`and `t2`（以任一顺序），然​​后在加入后运行 task3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T07:48:10.737

在您的 task3 中实现一个监听器接口，并将其注册到 task1 和 task2。Task1 和 Task2 必须在结束前调用它们的监听器。这样做，您可以在 task3 中记录哪个任务已经完成，当两者都完成时，您可以执行第三个任务。

当然，如果你的 task1/2 中的一个可以异常退出，别忘了把 task3 作为它的 UncaughtExceptionHandler

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T07:49:34.413

我不想在 2 个工作线程（task1 和 task2）完成工作时终止它们，那么您可以在 task3 中等待一个条件，直到另外两个完成。像这样的东西：

```
public class Master {

    private Object monitor_ = new Object();
    private boolean task1Finished_;
    private boolean task2Finished_;

    class Task1 extends Thread {

        public void run() {
            // do stuff
            synchronized (monitor_) {
                task1Finished_ = true;
                monitor_.notifyAll();
            }
            // keep on working
        }
    }

    class Task2 extends Thread {

        public void run() {
            // do stuff
            synchronized (monitor_) {
                task1Finished_ = true;
                monitor_.notifyAll();
            }
            // keep on working
        }
    }

    class Task3 extends Thread {

        public void run() {
            synchronized (monitor_) {
                while (!task1Finished_ || !task2Finished_) {
                    try {
                        monitor_.wait();
                    }
                    catch (InterruptedException ignored) {
                    }
                }
            }
            // do stuff
        }
    }
    // start tasks1, task2 and task3...
} 
```

# c++ - 标准容器的复杂性保证是什么？

> ID：181693
> 
> 赞同：177
> 
> 时间：2008-10-08T07:35:11.323
> 
> 标签：c++, stl, containers, big-o

显然 ;-) 标准容器提供了某种形式的保证。

什么类型的保证以及不同类型的容器之间究竟有什么区别？

从[SGI 页面](http://www.sgi.com/tech/stl/)工作（关于[STL](http://en.wikipedia.org/wiki/Standard_Template_Library)）我想出了这个：

```
Container Types:
================
Container:
    Forward Container
        Reverse Container
            Random Access Container
    Sequence
        Front Insert Sequence
        Back  Insert Sequence
    Associative Container
        Simple   Associative Container
        Pair     Associative Container
        Sorted   Associative Container
        Multiple Associative Container

Container Types mapped to Standard Containers
=============================================

std::vector:    Sequence    Back        Sequence                    Forward/Reverse/Random Container
std::deque:     Sequence    Front/Back  Sequence                    Forward/Reverse/Random Container
std::list:      Sequence    Front/Back  Sequence                    Forward/Reverse Container
std::set:       Sorted/Simple/Unique    Associative Container       Forward Container
std::map:       Sorted/Pair/Unique      Associative Container       Forward Container
std::multiset:  Sorted/Simple/Multiple  Associative Container       Forward Container
std::multimap:  Sorted/Pair/Multiple    Associative Container       Forward Container

Container Guarantees:
=====================

                                                                                  Simp
                                                                                  or
                          For   Rev  Rand        Front  Back  Assoc        Sort   Mult
                    Cont: Cont: Cont Cont: Sequ: Sequ:  Sequ: Cont:        Cont:  Cont:
Copy    Const:      O(n)
Fill    Const:                             O(n)
begin()             O(1)
end()               O(1)
rbegin()                        O(1)
rend()                          O(1)
front()                                    O(1)
push_front()                                     O(1)
pop_front()                                      O(1)
push_back()                                             O(1)
pop_back()                                              O(1)
Insert()                                                                          O(ln(n))
Insert: fill                               O(n)
Insert: range                              O(n)                                   O(kln(n)+n)
size()              O(1)
swap()              O(1)
erase key                                                     O(ln(n))
erase element                                                 O(1)
erase range                                                   O(ln(n)+S)
count()                                                       O(log(n)+k)
find()                                                        O(ln(n))
equal range                                                   O(ln(n))
Lower Bound/Upper Bound                                                    O(ln(n))
Equality                  O(n)
InEquality                O(n)
Element Access                       O(1) 
```

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2014-10-16T03:35:58.600

我找到了很好的资源*[Standard C++ Containers](http://www.cs.northwestern.edu/~riesbeck/programming/c++/stl-summary.html)*。可能这就是你们都在寻找的。

**向量**

**构造函数**

```
vector<T> v;              Make an empty vector.                                     O(1)
vector<T> v(n);           Make a vector with N elements.                            O(n)
vector<T> v(n, value);    Make a vector with N elements, initialized to value.      O(n)
vector<T> v(begin, end);  Make a vector and copy the elements from begin to end.    O(n) 
```

**访问器**

```
v[i]          Return (or set) the I'th element.                        O(1)
v.at(i)       Return (or set) the I'th element, with bounds checking.  O(1)
v.size()      Return current number of elements.                       O(1)
v.empty()     Return true if vector is empty.                          O(1)
v.begin()     Return random access iterator to start.                  O(1)
v.end()       Return random access iterator to end.                    O(1)
v.front()     Return the first element.                                O(1)
v.back()      Return the last element.                                 O(1)
v.capacity()  Return maximum number of elements.                       O(1) 
```

**修饰符**

```
v.push_back(value)         Add value to end.                                                O(1) (amortized)
v.insert(iterator, value)  Insert value at the position indexed by iterator.                O(n)
v.pop_back()               Remove value from end.                                           O(1)
v.assign(begin, end)       Clear the container and copy in the elements from begin to end.  O(n)
v.erase(iterator)          Erase value indexed by iterator.                                 O(n)
v.erase(begin, end)        Erase the elements from begin to end.                            O(n) 
```

对于其他容器，请参阅页面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-08T08:05:03.057

我不知道有什么可以让您一眼就比较所有表格的单一表格（我不确定这样的表格是否可行）。

当然，ISO 标准文档详细列举了复杂性要求，有时在各种可读性很强的表格中，有时在每个特定方法的可读性较差的要点中。

[此外， http:](http://www.cplusplus.com/reference/stl/) //www.cplusplus.com/reference/stl/ 上的 STL 库参考还提供了适当的复杂性要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-09T12:14:33.087

[此github 页面上](https://alyssaq.github.io/stl-complexities/)提供了另一个快速查找表

注意：这不考虑所有容器，例如 unordered_map 等，但仍然很好看。[这](http://cs.northwestern.edu/~riesbeck/programming/c++/stl-summary.html)只是一个更干净的版本

# sql - 一个数据库中的多种语言 - SQL Server 2005

> ID：181697
> 
> 赞同：5
> 
> 时间：2008-10-08T07:37:56.467
> 
> 标签：sql, sql-server, database, localization

我们有一个应用程序，人们可以在其中输入多种语言。虽然我们只有一个数据库来存储所有数据。我们有文本列作为 nvarchar （假设我们只希望文本数据是多种语言而不是所有日期等）

您认为这是一个可行的解决方案吗？除了排序和搜索之外，还有其他需要考虑的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T07:55:14.200

如果您使用 Nvarchar 字段，它们基本上可以存储每种本地化语言，而数据字段以不依赖于本地化的格式存储日期。

SQL 服务器的唯一问题在于排序功能和“LIKE”功能，因为它们将取决于您安装服务器或创建数据库时使用的代码页。这是一个相当复杂的问题，我建议阅读 SQL Server 手册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T13:11:52.767

首先，使用`NVARCHAR`是处理任何非英语语言的最佳方法，因为它支持所有变音符号和变音符号以及您需要的这些。

但排序*可能*是个问题。查看数据库的设置方式并确定最佳排序顺序。如果没有其他合适的，您可以使用`SQL_MixDiction_CP1253_CS_AS`，它专门允许混合字典。但是当您更改数据库的排序规则时会出现问题：

> **注意：**您不能更改当前由以下任何一项引用的列的排序规则：
> 
> *   计算列
> *   一个索引
> *   分布统计信息，自动生成或由 CREATE STATISTICS 语句生成
> *   CHECK 约束
> *   FOREIGN KEY 约束

解决这个问题的方法是在正确的排序规则下实际删除并重新创建数据库，因为除非另有说明，否则所有对象都将使用数据库的默认排序规则构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T07:42:30.763

我认为这取决于数据的类型。对于名称+地址，它可能没问题...无论使用哪种语言，名称都是名称。

对于描述性文本（例如注释字段），它可能会令人困惑......至少您可能想要记录文本所在的语言，以便以后可以过滤它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-23T18:09:10.473

——一些想法

```
 USE [db]
    GO

    /****** Object:  Table [dbo].[CultureInfo]    Script Date: 06/23/2009 21:07:38 ******/
    SET ANSI_NULLS ON
    GO

    SET QUOTED_IDENTIFIER ON
    GO

    SET ANSI_PADDING ON
    GO

    CREATE TABLE [dbo].[CultureInfo](
        [CultureInfoId] [int] IDENTITY(1,1) NOT NULL,
        [CultureName] [varchar](10)  NOT NULL,
        [DisplayName] [varchar](50)  NULL,
        [ISO_639x_Value] [nchar](6)  NULL,
        [CultureCode] [nvarchar](10)  NULL,
        [CollationName] [varchar](50)  NULL,
     CONSTRAINT [PK_CultureInfo] PRIMARY KEY CLUSTERED 
    (
        [CultureInfoId] ASC
    )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
    ) ON [PRIMARY]

    GO

    SET ANSI_PADDING ON
    GO

insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('af-ZA' , 'Afrikaans - South Africa' , '0x0436' , 'AFK' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sq-AL' , 'Albanian - Albania' , '0x041C' , 'SQI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-DZ' , 'Arabic - Algeria' , '0x1401' , 'ARG' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-BH' , 'Arabic - Bahrain' , '0x3C01' , 'ARH' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-EG' , 'Arabic - Egypt' , '0x0C01' , 'ARE' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-IQ' , 'Arabic - Iraq' , '0x0801' , 'ARI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-JO' , 'Arabic - Jordan' , '0x2C01' , 'ARJ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-KW' , 'Arabic - Kuwait' , '0x3401' , 'ARK' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-LB' , 'Arabic - Lebanon' , '0x3001' , 'ARB' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-LY' , 'Arabic - Libya' , '0x1001' , 'ARL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-MA' , 'Arabic - Morocco' , '0x1801' , 'ARM' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-OM' , 'Arabic - Oman' , '0x2001' , 'ARO' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-QA' , 'Arabic - Qatar' , '0x4001' , 'ARQ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-SA' , 'Arabic - Saudi Arabia' , '0x0401' , 'ARA' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-SY' , 'Arabic - Syria' , '0x2801' , 'ARS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-TN' , 'Arabic - Tunisia' , '0x1C01' , 'ART' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-AE' , 'Arabic - United Arab Emirates' , '0x3801' , 'ARU' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ar-YE' , 'Arabic - Yemen' , '0x2401' , 'ARY' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('hy-AM' , 'Armenian - Armenia' , '0x042B' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('Cy-az-AZ' , 'Azeri (Cyrillic) - Azerbaijan' , '0x082C' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('Lt-az-AZ' , 'Azeri (Latin) - Azerbaijan' , '0x042C' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('eu-ES' , 'Basque - Basque' , '0x042D' , 'EUQ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('be-BY' , 'Belarusian - Belarus' , '0x0423' , 'BEL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('bg-BG' , 'Bulgarian - Bulgaria' , '0x0402' , 'BGR' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ca-ES' , 'Catalan - Catalan' , '0x0403' , 'CAT' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-CN' , 'Chinese - China' , '0x0804' , 'CHS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-HK' , 'Chinese - Hong Kong SAR' , '0x0C04' , 'ZHH' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-MO' , 'Chinese - Macau SAR' , '0x1404' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-SG' , 'Chinese - Singapore' , '0x1004' , 'ZHI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-TW' , 'Chinese - Taiwan' , '0x0404' , 'CHT' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-CHS' , 'Chinese (Simplified)' , '0x0004' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('zh-CHT' , 'Chinese (Traditional)' , '0x7C04' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('hr-HR' , 'Croatian - Croatia' , '0x041A' , 'HRV' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('cs-CZ' , 'Czech - Czech Republic' , '0x0405' , 'CSY' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('da-DK' , 'Danish - Denmark' , '0x0406' , 'DAN' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('div-MV' , 'Dhivehi - Maldives' , '0x0465' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('nl-BE' , 'Dutch - Belgium' , '0x0813' , 'NLB' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('nl-NL' , 'Dutch - The Netherlands' , '0x0413' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-AU' , 'English - Australia' , '0x0C09' , 'ENA' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-BZ' , 'English - Belize' , '0x2809' , 'ENL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-CA' , 'English - Canada' , '0x1009' , 'ENC' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-CB' , 'English - Caribbean' , '0x2409' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-IE' , 'English - Ireland' , '0x1809' , 'ENI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-JM' , 'English - Jamaica' , '0x2009' , 'ENJ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-NZ' , 'English - New Zealand' , '0x1409' , 'ENZ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-PH' , 'English - Philippines' , '0x3409' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-ZA' , 'English - South Africa' , '0x1C09' , 'ENS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-TT' , 'English - Trinidad and Tobago' , '0x2C09' , 'ENT' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-GB' , 'English - United Kingdom' , '0x0809' , 'ENG' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-US' , 'English - United States' , '0x0409' , 'ENU' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('en-ZW' , 'English - Zimbabwe' , '0x3009' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('et-EE' , 'Estonian - Estonia' , '0x0425' , 'ETI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fo-FO' , 'Faroese - Faroe Islands' , '0x0438' , 'FOS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fa-IR' , 'Farsi - Iran' , '0x0429' , 'FAR' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fi-FI' , 'Finnish - Finland' , '0x040B' , 'FIN' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fr-BE' , 'French - Belgium' , '0x080C' , 'FRB' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fr-CA' , 'French - Canada' , '0x0C0C' , 'FRC' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fr-FR' , 'French - France' , '0x040C' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fr-LU' , 'French - Luxembourg' , '0x140C' , 'FRL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fr-MC' , 'French - Monaco' , '0x180C' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('fr-CH' , 'French - Switzerland' , '0x100C' , 'FRS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('gl-ES' , 'Galician - Galician' , '0x0456' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ka-GE' , 'Georgian - Georgia' , '0x0437' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('de-AT' , 'German - Austria' , '0x0C07' , 'DEA' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('de-DE' , 'German - Germany' , '0x0407' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('de-LI' , 'German - Liechtenstein' , '0x1407' , 'DEC' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('de-LU' , 'German - Luxembourg' , '0x1007' , 'DEL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('de-CH' , 'German - Switzerland' , '0x0807' , 'DES' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('el-GR' , 'Greek - Greece' , '0x0408' , 'ELL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('gu-IN' , 'Gujarati - India' , '0x0447' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('he-IL' , 'Hebrew - Israel' , '0x040D' , 'HEB' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('hi-IN' , 'Hindi - India' , '0x0439' , 'HIN' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('hu-HU' , 'Hungarian - Hungary' , '0x040E' , 'HUN' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('is-IS' , 'Icelandic - Iceland' , '0x040F' , 'ISL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('id-ID' , 'Indonesian - Indonesia' , '0x0421' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('it-IT' , 'Italian - Italy' , '0x0410' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('it-CH' , 'Italian - Switzerland' , '0x0810' , 'ITS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ja-JP' , 'Japanese - Japan' , '0x0411' , 'JPN' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('kn-IN' , 'Kannada - India' , '0x044B' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('kk-KZ' , 'Kazakh - Kazakhstan' , '0x043F' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('kok-IN' , 'Konkani - India' , '0x0457' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ko-KR' , 'Korean - Korea' , '0x0412' , 'KOR' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ky-KZ' , 'Kyrgyz - Kazakhstan' , '0x0440' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('lv-LV' , 'Latvian - Latvia' , '0x0426' , 'LVI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('lt-LT' , 'Lithuanian - Lithuania' , '0x0427' , 'LTH' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('mk-MK' , 'Macedonian (FYROM)' , '0x042F' , 'MKD' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ms-BN' , 'Malay - Brunei' , '0x083E' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ms-MY' , 'Malay - Malaysia' , '0x043E' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('mr-IN' , 'Marathi - India' , '0x044E' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('mn-MN' , 'Mongolian - Mongolia' , '0x0450' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('nb-NO' , 'Norwegian (Bokmål) - Norway' , '0x0414' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('nn-NO' , 'Norwegian (Nynorsk) - Norway' , '0x0814' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('pl-PL' , 'Polish - Poland' , '0x0415' , 'PLK' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('pt-BR' , 'Portuguese - Brazil' , '0x0416' , 'PTB' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('pt-PT' , 'Portuguese - Portugal' , '0x0816' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('pa-IN' , 'Punjabi - India' , '0x0446' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ro-RO' , 'Romanian - Romania' , '0x0418' , 'ROM' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ru-RU' , 'Russian - Russia' , '0x0419' , 'RUS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sa-IN' , 'Sanskrit - India' , '0x044F' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('Cy-sr-SP' , 'Serbian (Cyrillic) - Serbia' , '0x0C1A' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('Lt-sr-SP' , 'Serbian (Latin) - Serbia' , '0x081A' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sk-SK' , 'Slovak - Slovakia' , '0x041B' , 'SKY' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sl-SI' , 'Slovenian - Slovenia' , '0x0424' , 'SLV' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-AR' , 'Spanish - Argentina' , '0x2C0A' , 'ESS' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-BO' , 'Spanish - Bolivia' , '0x400A' , 'ESB' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-CL' , 'Spanish - Chile' , '0x340A' , 'ESL' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-CO' , 'Spanish - Colombia' , '0x240A' , 'ESO' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-CR' , 'Spanish - Costa Rica' , '0x140A' , 'ESC' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-DO' , 'Spanish - Dominican Republic' , '0x1C0A' , 'ESD' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-EC' , 'Spanish - Ecuador' , '0x300A' , 'ESF' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-SV' , 'Spanish - El Salvador' , '0x440A' , 'ESE' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-GT' , 'Spanish - Guatemala' , '0x100A' , 'ESG' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-HN' , 'Spanish - Honduras' , '0x480A' , 'ESH' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-MX' , 'Spanish - Mexico' , '0x080A' , 'ESM' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-NI' , 'Spanish - Nicaragua' , '0x4C0A' , 'ESI' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-PA' , 'Spanish - Panama' , '0x180A' , 'ESA' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-PY' , 'Spanish - Paraguay' , '0x3C0A' , 'ESZ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-PE' , 'Spanish - Peru' , '0x280A' , 'ESR' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-PR' , 'Spanish - Puerto Rico' , '0x500A' , 'ES' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-ES' , 'Spanish - Spain' , '0x0C0A' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-UY' , 'Spanish - Uruguay' , '0x380A' , 'ESY' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('es-VE' , 'Spanish - Venezuela' , '0x200A' , 'ESV' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sw-KE' , 'Swahili - Kenya' , '0x0441' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sv-FI' , 'Swedish - Finland' , '0x081D' , 'SVF' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('sv-SE' , 'Swedish - Sweden' , '0x041D' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('syr-SY' , 'Syriac - Syria' , '0x045A' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ta-IN' , 'Tamil - India' , '0x0449' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('tt-RU' , 'Tatar - Russia' , '0x0444' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('te-IN' , 'Telugu - India' , '0x044A' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('th-TH' , 'Thai - Thailand' , '0x041E' , 'THA' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('tr-TR' , 'Turkish - Turkey' , '0x041F' , 'TRK' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('uk-UA' , 'Ukrainian - Ukraine' , '0x0422' , 'UKR' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('ur-PK' , 'Urdu - Pakistan' , '0x0420' , 'URD' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('Cy-uz-UZ' , 'Uzbek (Cyrillic) - Uzbekistan' , '0x0843' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('Lt-uz-UZ' , 'Uzbek (Latin) - Uzbekistan' , '0x0443' , ' ' )
insert into CultureInfo (CultureName , DisplayName , ISO_639x_Value , CultureCode ) values ('vi-VN' , 'Vietnamese - Vietnam' , '0x042A' , 'VIT' ) 
```

# c# - 我应该在实际项目中使用 Mono 吗？

> ID：181701
> 
> 赞同：36
> 
> 时间：2008-10-08T07:39:08.430
> 
> 标签：c#, mono, enterprise

有没有人在大型或中型项目中使用过 Mono，开源 .NET 实现？我想知道它是否已准备好用于现实世界的生产环境。它是否稳定、快速、兼容、......足够使用？将项目移植到 Mono 运行时是否需要付出很多努力，或者它是否真的非常兼容，足以为微软的运行时获取并运行已经编写的代码？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-10-08T07:44:10.930

我已经将它用于许多内部和商业项目，并取得了巨大的成功。我的警告：

*   编写大量单元测试并确保它们都在 Mono 下通过——这将为您省去很多麻烦。
*   除非你绝对必须，否则不要使用他们的嵌入 API。它非常易于使用，但是垃圾收集有效内存或泄漏所有内存非常容易。
*   永远不要接近 SVN，除非别无选择，否则不要自己编译。SVN 中的事情变化如此频繁，如果您的项目非常大，您很可能最终会实现一些在发布版本上不起作用的东西。
*   不要长时间尝试自己解决问题，请使用 IRC 频道。那里的人很乐于助人，你会日复一日地拯救自己——不要犯我犯的同样错误。

祝你好运！

编辑：我说不要从源代码（发布或 SVN）编译你自己的原因是它很容易配置它而不是发布二进制文件和隐藏错误，例如在垃圾收集中。

编辑2：忘记回答您的问题的第二部分。就我而言，移植代码没有问题，但我没有使用任何特定于 MS 的库（WinForms、ASP.NET 等）。如果你只使用 System.* 东西，你会没事的；除此之外，您可能会遇到问题。不过，Mono 2.0 相当可靠。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-08T08:10:29.363

我发现 Mono 主要与 MS 二进制兼容。因此，我只是用 MS 编译，然后在任何地方运行，就像 Java 本来的样子！

Mono 在 Linux 上的性能非常接近 MS，在某些情况下慢了 2 倍，而在 Windows 上运行 Mono 时慢了 5-10 倍（但你真的应该坚持使用 MS）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-06-13T11:35:37.013

I had some experience with Mono.

**Pure .NET stuff (like business logic, controllers or algorithms) can be ported without any problems.** Yet, weird things start showing up in the components that interact with operating system, UI, services or persistence. So be prepared for some debugging and hacking.

Things that might help:

*   [Component-Driven Development](http://abdullin.com/wiki/component-driven-development.html) - so that code is reused by Windows .NET and Mono, while differences are isolated and tested)
*   [Continuous Integration](http://abdullin.com/wiki/continuous-integration.html) running and checking everything against Mono and MS.NET, so that possible issues could be discovered as fast as possible (automated deployment and sanity checks are also recommended)
*   There are not a lot of UI component suites for shell development in Mono.
*   When a component vendor says that his code is "compatible with Mono", it is not same as "runs on Mono and is supported".

Although in the present, there are some [companies going into production with Mono](http://mono-project.com/Companies_Using_Mono), I'd still wait before rushing in there due to:

*   Lack of decent and commercially supported UI component suites
*   Issues with efficient garbage collection
*   Not the best debugging experience (compare with the historical debugger in VS 2010)

PS: if there is a company offering fully managed cloud computing solution (not just a VM, but more like Hadoop equivalent for .NET), then I'll be forced to jump in despite these issues.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-08T07:58:25.787

如果您正在做 ASP.NET 2.0 的工作，它工作得很好。Winforms 可能会工作，但可能会导致显示问题。如果您希望表单应用程序具有兼容性，我建议您使用 GTK#，因为它是跨平台的。

就像建议的那样，只要你彻底测试，如果这对你来说是一个可行的选择，我会同意在商业上使用它，除非它是你需要的 winforms。在我看来，我会暂时远离它。忘记 WPF，因为目前没有支持，而且可能永远不会有（尽管他们正在研究月光，也就是 linux 的 silverlight）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T07:50:41.323

我自己没有使用过 Mono，但您可能有兴趣知道 FogBugz 使用 Mono 在 Linux 平台上提供 Lucene.NET。（我之所以知道这一点，是因为 Joel 在 Stack Overflow Podcast #24 中提到过。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-09T12:11:48.863

我有一堆正在生产的 shell 应用程序。

我同意@cody-brocious，写了很多单元测试。我过去发现正则表达式的工作方式与 windows CLR 的工作方式并不完全相同。

它实际上比你想象的要简单，只需编译和运行。如果你在你的项目中使用 NAnt，它更容易过渡。

我通常从源版本安装单声道，我没有遇到任何问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-17T18:45:55.260

我已经将它用于加密/解密工具，并且效果很好。

将来，我会考虑使用 Mono/C#，但我不希望它与Windows 上的 .Net 100%*完全一样。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-22T15:11:57.670

当然，您可以，尤其是在 Mono 2.0 发布之后。Mono 2.0 已准备好用于实际项目。

[你可以检查这个](http://www.mono-project.com/Release_Notes_Mono_2.0)

# c# - 为什么我不能调试我的 asp.net Web 应用程序

> ID：181718
> 
> 赞同：2
> 
> 时间：2008-10-08T07:46:38.790
> 
> 标签：c#, asp.net, iis, visual-c++

当我添加断点并按 F5 以在调试器中运行时（我正在使用我的调试版本），弹出一个对话框，告诉我的 web.config 文件中没有 debug=true （确实如此），我得到 2选择 a) 在没有调试器的情况下运行或 b) 让 Visual Studio 更新我的 web.config 文件。如果我选择 b) web.config 更新很差，什么都不会起作用。如果我选择 a)，那么该站点就会出现，我可以对其进行测试，但不能进行调试。

我是一位经验丰富的开发人员，但我以前从未使用 Visual Studio 和 asp.net 进行 Web 开发，所以我对它为阻止我工作而设置的所有墙壁感到非常沮丧。

到目前为止，我还无法使用调试器。有什么完全明显的我想念的吗？如果它发生在你身上，你会检查什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T07:52:50.633

手动打开 web.config 并确保下面的行在那里

```
<compilation defaultLanguage="c#" debug="true" /> 
```

现在您应该可以从 VS 进行调试了。如果这不起作用，我建议您重新创建项目。

编辑：也许从你所说的可能是 web.config 搞砸了，例如包含无效的 xml，某些元素没有结束标记等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T07:55:33.717

ligget78先说的^^

如果可能，请尝试完全删除 web.config 并让 Visual Studio 重新创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T07:58:56.830

我同意上面发布的内容，但您可以检查的另一件事是，确保您的 aspx 文件中的页眉不会禁用调试：

```
<%@ Page Language="C#" MasterPageFile="~/default.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" Title="some title" Debug="false" %> 
```

^^ 这将关闭调试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T12:58:40.313

在您的项目中，在解决方案范围内搜索“debug=”，如果只显示一个，则进行文件夹搜索。我在有多个配置文件的地方发生过这种情况，这可能会导致问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T07:57:41.107

如果启用了 debug=true，则 Internet 应用程序服务器应用程序中存在一些问题。尝试重新创建 Web 应用程序并让 Visual Studio 创建网站。

还要检查 cassini Web 服务器是否设置为在项目属性中用作调试 Web 服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-20T09:42:42.503

这可能是一个愚蠢的答案，但它也可能有所帮助。

我在设置中也遇到了这个问题。尽管 debug 已经设置为 true，但是当 F5 被按下时，它仍然不会在断点所在的位置停止。

当我关闭所有打开的 IE 然后再次按 F5 时，我偶然解决了它，这就是它的工作原理。（在我的情况下，我将断点放在 page_load 以验证它是否在断点处停止）。

# c# - 如何从 C# 启动进程？

> ID：181719
> 
> 赞同：184
> 
> 时间：2008-10-08T07:46:39.023
> 
> 标签：c#, .net, windows, process, process.start

如何启动进程，例如当用户单击按钮时启动 URL？

* * *

## 回答 #1

> 赞同：247
> 
> 时间：2008-10-08T08:42:04.730

正如马特汉密尔顿所建议的那样，您对过程的控制有限的快速方法是在 System.Diagnostics.Process 类上使用静态 Start 方法......

```
using System.Diagnostics;
...
Process.Start("process.exe"); 
```

另一种方法是使用 Process 类的实例。这允许对进程进行更多控制，包括调度、它将在其中运行的窗口类型，以及对我来说最有用的是等待进程完成的能力。

```
using System.Diagnostics;
...
Process process = new Process();
// Configure the process using the StartInfo properties.
process.StartInfo.FileName = "process.exe";
process.StartInfo.Arguments = "-n";
process.StartInfo.WindowStyle = ProcessWindowStyle.Maximized;
process.Start();
process.WaitForExit();// Waits here for the process to exit. 
```

这种方法允许的控制比我提到的要多得多。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-10-08T07:49:44.400

您可以使用[System.Diagnostics.Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)方法来启动一个进程。您甚至可以将 URL 作为字符串传递，它会启动默认浏览器。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-10-08T08:27:50.233

正如马特所说，使用[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)。

您可以传递 URL 或文档。它们将由注册的应用程序启动。

例子：

```
Process.Start("Test.Txt"); 
```

这将启动 Notepad.exe 并加载 Text.Txt。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-18T10:53:52.423

我在自己的程序中使用了以下内容。

```
Process.Start("http://www.google.com/etc/etc/test.txt") 
```

这有点基本，但它对我有用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-30T22:12:05.077

```
var path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "/YourSubDirectory/yourprogram.exe");
Process.Start(new ProcessStartInfo(path)); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-26T11:35:31.317

```
class ProcessStart
{
    static void Main(string[] args)
    {
        Process notePad = new Process();

        notePad.StartInfo.FileName   = "notepad.exe";
        notePad.StartInfo.Arguments = "ProcessStart.cs";

        notePad.Start();
    }
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-10-08T07:49:52.900

使用[进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process(VS.80).aspx)类。MSDN 文档有一个如何使用它的示例。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-06-30T14:11:00.637

您可以使用此语法运行任何应用程序：

```
System.Diagnostics.Process.Start("Example.exe"); 
```

对于 URL 也是如此。只需在这之间写下您的 URL `()`。

例子：

```
System.Diagnostics.Process.Start("http://www.google.com"); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-08-13T16:47:58.343

声明这个

```
[DllImport("user32")]
private static extern bool SetForegroundWindow(IntPtr hwnd);
[DllImport("user32")]
private static extern bool ShowWindowAsync(IntPtr hwnd, int a); 
```

并将它放在你的函数中（注意“checkInstalled”是可选的，但如果你要使用它，你必须实现它）

```
if (ckeckInstalled("example"))
{
    int count = Process.GetProcessesByName("example").Count();
    if (count < 1)
        Process.Start("example.exe");
    else
    {
        var proc = Process.GetProcessesByName("example").FirstOrDefault();
        if (proc != null && proc.MainWindowHandle != IntPtr.Zero)
        {
            SetForegroundWindow(proc.MainWindowHandle);
            ShowWindowAsync(proc.MainWindowHandle, 3);
        }
    }
} 
```

**注意：**我不确定在运行多个 .exe 实例时这是否有效。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-07-14T13:37:45.090

如果在 Windows 上使用

```
Process process = new Process();
process.StartInfo.FileName = "Test.txt";
process.Start(); 
```

适用于 .Net Framework 但对于 Net core 3.1 还需要将 UseShellExecute 设置为 true

```
Process process = new Process();
process.StartInfo.FileName = "Test.txt";
process.StartInfo.UseShellExecute = true;
process.Start(); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-11-06T05:40:30.227

Include the `using System.Diagnostics;`.

And then call this `Process.Start("Paste your URL string here!");`

Try something like this:

```
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Diagnostics;

namespace btnproce
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            string t ="Balotelli";
            Process.Start("http://google.com/search?q=" + t);
        }
    }
} 
```

Please note that it is a sample ASP.NET page as an example. You should try and improvise a little bit.

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-09-01T17:26:55.007

例如，要启动[Microsoft Word ，请使用以下代码：](https://en.wikipedia.org/wiki/Microsoft_Word)

```
private void button1_Click(object sender, EventArgs e)
{
    string ProgramName = "winword.exe";
    Process.Start(ProgramName);
} 
```

有关更多说明，请查看[此链接](http://www.csharp-tutorials1.blogspot.com/2016/08/how-to-start-process-or-program-in-c.html)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-28T16:42:27.357

您可以使用以下语法：

```
private void button1_Click(object sender, EventArgs e)  {
   System.Diagnostics.Process.Start(/*your file name goes here*/);
} 
```

甚至这样：

```
using System;
using System.Diagnostics;
//rest of the code

private void button1_Click(object sender, EventArgs e)  {
   Process.Start(/*your file name goes here*/);
} 
```

两种方法都将执行相同的任务。

# python - 何时使用 Python 调试器

> ID：181724
> 
> 赞同：6
> 
> 时间：2008-10-08T07:49:01.903
> 
> 标签：python, debugging

由于 Python 是一种动态的解释性语言，因此您不必在运行代码之前对其进行编译。因此，很容易编写代码、运行它、查看发生了什么问题并修复它们。使用热键或宏可以使这非常快。

所以，因为很容易立即看到程序的输出和可能发生的任何错误，所以我还没有使用调试器工具。与我目前使用的方法相比，哪些情况可能需要使用真正的调试器？

我想在陷入困境并感到沮丧之前知道，因为我不知道如何解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T10:09:56.580

在 30 年的编程生涯中，我使用调试器正好 4 次。这四次都是读取`core`C 程序崩溃产生的文件，以定位隐藏在其中的回溯信息。

我不认为调试器有多大帮助，即使在编译语言中也是如此。很多人喜欢调试器，使用它们是有原因的，我敢肯定，否则人们不会对它们给予如此大的爱和关怀。

重点是——**软件就是知识获取**。

是的，它必须运行。然而，更重要的是，软件是**有意义**的。

这不是对*您*使用调试器的指控。然而，我发现依赖调试的人有时会产生看起来很奇怪的代码，并且没有很好的理由来解释它的**含义**。他们只能说“这可能是一个黑客，但它有效。”

我对调试器的建议是“不要打扰”。

“但是，如果我完全被难住了怎么办？” 你问，“那我应该学习调试器吗？” 完全被什么难住了？语言？Python 太简单了，不会让人一头雾水。某个图书馆？也许。

这就是你要做的——有或没有调试器。

1.  你有来源，阅读它。
2.  您编写小测试来练习库。如果可能，使用交互式 shell。[所有真正优秀的库似乎都使用交互式 Python 模式来展示它们的特性——我力求达到这种紧密、清晰的简单性。]
3.  你有源，添加打印功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-08T08:04:08.643

我使用 pdb 进行基本的 python 调试。我使用它的一些情况是：

*   当您有一个循环迭代超过 100,000 个条目并希望在特定点中断时，它会变得非常有用。（条件中断）
*   跟踪别人代码的控制流。
*   使用调试器总是比用打印乱扔代码更好。
*   通常可能有多个故障点导致错误，乍一看并不明显。所以你寻找明显的地方，如果那里没有问题，你继续添加更多的打印。调试器可以节省你的时间，你不需要添加打印并再次运行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-10-08T08:04:12.857

通常当错误隐藏在某些函数中时，但我不知道究竟是什么或在哪里。要么我插入几十个`log.debug()`电话，然后必须将它们收回，要么只输入：

```
import pdb
pdb.set_trace () 
```

然后运行程序。调试器将在达到该点时启动，并给我一个完整的 REPL 来戳我。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T08:02:14.873

任何时候您想检查可能导致错误的变量的内容。你能做到这一点的唯一方法是停止执行并查看堆栈。

如果您正在寻找 Eclipse 中的 pydev，它是一个非常好的 IDE。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T16:07:57.047

我发现在失败的测试用例中放入调试器非常有用。

我`import pdb; pdb.set_trace()`在测试的失败点之前添加。测试运行，建立一个可能相当大的上下文（例如导入一个数据库夹具或构造一个 HTTP 请求）。当测试到达该`pdb.set_trace()`行时，它会进入交互式调试器，我可以使用通常的 pdb 命令检查失败发生的上下文，以寻找原因的线索。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T08:57:00.120

您可能想看看这个其他 SO 帖子：

[为什么在 IDE 中调试更好？](https://stackoverflow.com/questions/426569/why-is-debugging-better-in-an-ide)

它与您要询问的内容直接相关。

# c++ - Open GL 中的纹理采样

> ID：181731
> 
> 赞同：1
> 
> 时间：2008-10-08T07:50:43.150
> 
> 标签：c++, opengl

我需要从纹理中获取特定坐标处的颜色。有两种方法可以做到这一点，通过获取和查看原始 png 数据，或者通过对我生成的 opengl 纹理进行采样。是否可以对 opengl 纹理进行采样以获得给定 UV 或 XY 坐标的颜色（RGBA）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T07:55:33.683

我发现最有效的方法是访问纹理数据（无论如何，您都应该将我们的 PNG 解码为纹理）并自己在纹素之间进行插值。假设您的 texcoords 是 [0,1]，将 texwidth *u 和 texheight* v 相乘，然后使用它来找到纹理上的位置。如果它们是整数，则直接使用像素，否则使用 int 部分查找边界像素并根据小数部分在它们之间进行插值。

这是一些类似 HLSL 的伪代码。应该很清楚：

```
float3 sample(float2 coord, texture tex) {
    float x = tex.w * coord.x; // Get X coord in texture
    int ix = (int) x; // Get X coord as whole number
    float y = tex.h * coord.y;
    int iy = (int) y;

    float3 x1 = getTexel(ix, iy); // Get top-left pixel
    float3 x2 = getTexel(ix+1, iy); // Get top-right pixel
    float3 y1 = getTexel(ix, iy+1); // Get bottom-left pixel
    float3 y2 = getTexel(ix+1, iy+1); // Get bottom-right pixel

    float3 top = interpolate(x1, x2, frac(x)); // Interpolate between top two pixels based on the fractional part of the X coord
    float3 bottom = interpolate(y1, y2, frac(x)); // Interpolate between bottom two pixels

    return interpolate(top, bottom, frac(y)); // Interpolate between top and bottom based on fractional Y coord
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T08:36:28.547

在我的脑海中，你的选择是

1.  使用 glGetTexImage() 获取整个纹理并检查您感兴趣的纹素。
2.  绘制您感兴趣的纹素（例如，通过渲染 GL_POINTS 基元），然后使用 glReadPixels 从帧缓冲区中获取您渲染它的像素。
3.  将纹理图像的副本放在手边，不要使用 OpenGL。

选项 1 和 2 效率极低（尽管您可以通过使用像素缓冲区对象和异步复制来加快 2 的速度）。所以我最喜欢的 FAR 是选项 3。

**编辑：**如果您有`GL_APPLE_client_storage`扩展名（即您在 Mac 或 iPhone 上），那么这就是选项 4，这是很长一段时间内的赢家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T09:46:11.027

正如其他人所建议的那样，从 VRAM 读回纹理效率非常低，如果您甚至对性能感兴趣，也应该像瘟疫一样避免。

据我所知，两种可行的解决方案：

1.  随身携带一份像素数据的副本（虽然会浪费内存）
2.  使用着色器进行

# asp.net - 为什么消息 BC30560 'mymodule_ascx' is ambiguous in namespace 'ASP' 有时会出现然后消失？

> ID：181745
> 
> 赞同：13
> 
> 时间：2008-10-08T07:55:21.843
> 
> 标签：asp.net

通常在对 VS2008 ASP.net 项目进行更改时，我们会收到如下消息：

BC30560：“mymodule_ascx”在命名空间“ASP”中不明确。

这在重新编译或有时只需等待 10 秒并刷新页面后就会消失。

有什么办法摆脱它？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-02-01T18:54:35.063

我最近遇到了这个问题，即使所有服务器都运行相同的代码，它也只发生在一台服务器上。我彻底调查了这个问题，以确保没有名称冲突的用户控件、临时文件被清除等。

解决问题的唯一方法（似乎是永久的）是将 web.config 中编译元素的批处理属性更改为 false，如以下链接中所建议的那样：

[http://personalinertia.blogspot.com/2007/06/there-bug-in-compiler.html](http://personalinertia.blogspot.com/2007/06/there-bug-in-compiler.html)

```
<compilation debug="true" batch="false"> 
```

我坚信这实际上是该站点上建议的编译器中的错误。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-08-11T19:32:03.953

我刚刚通过以下链接的帮助解决了这个问题：http: [//www.netomatix.com/development/usercontrols2.aspx](http://www.netomatix.com/development/usercontrols2.aspx)

简而言之，您的课程称为 MyModule。但是，如果您没有在 @Control 指令中指定 ClassName 属性，编译器可能会将 _ascx 附加到控件的类中，从而生成 MyModule_ascx。由于该页面找不到 MyModule_ascx，它会在你的脸上炸开。您需要明确告诉它 ClassName ...

```
<%@ Control Language="vb" AutoEventWireup="false" CodeBehind="MyModule.ascx.vb" ClassName="MyModule" %> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T04:15:05.873

另一种可能：

[http://channel9.msdn.com/forums/TechOff/157050-BC30560-mycontrolascx-is-ambiguous-in-the-namespace-ASP/](http://channel9.msdn.com/forums/TechOff/157050-BC30560-mycontrolascx-is-ambiguous-in-the-namespace-ASP/)

似乎在改变方面取得了一些成功

```
src="mycontrol.ascx.cs" 
```

到

```
CodeBehind="mycontrol.ascx.cs" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T04:00:58.167

我以前也有这个问题。如果我没记错的话，它是由以下原因引起的：

```
<%@ Page Inherits="_Default" %> 
```

也许

```
<%@ Page ClassName="_Default" %> 
```

或类似的东西。我不是 100% 确定它是哪个属性（已经有一段时间了）。

但是在您的 Page 指令中查找类似 _Default 的内容，并将它们替换为所有文件中的实际类名。出于某种原因，ASP.Net 并不总是正确解释 _Default，从而产生临时的模棱两可的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T04:49:49.237

与前两个答案类似，您很可能会在同一站点中拥有现有页面的“复制和粘贴”副本，然后这将包含相同的 @Page 指令，这将导致功能冲突（尤其是因为.Net 中的所有内容都默认为部分类。）这个小宝石经常咬我。

只需更新“继承”以指向特定于您的页面的内容（即：您的页面名称以下划线为前缀——因为它通常比不保证是唯一的），并确保您没有两个在不同的代码隐藏文件中命名相同的公共部分类（否则 _Default [default.aspx] 中的 Page_Load 将与 _Default [default.aspx 副本] 中的 Page_Load 冲突）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-10-01T08:01:45.923

我刚受过这个。在一些不相关的更新之后，运行良好且几个月未受影响的东西开始随机失败。我会重新编译，问题会消失，只是在其他地方重新出现。

我似乎已经通过清除 ASP.NET 临时文件夹来解决它，例如 C:\Windows\Microsoft.NET\Framework\v2.0.xxxxx\Temporary ASP.NET Files。这需要重新启动 IIS 才能真正清除它。

**更新：** 我尝试添加`tempDirectory="e:\someotherfolder"`到`compilation`web.config 的元素，这似乎取得了一些成功。也添加了`batch="false"`，但不确定这是否有效果。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-14T17:39:06.860

尝试更改 web.config，将批处理设置为 false

```
<compilation batch="false">
</compilation> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-15T18:58:17.603

对我来说，这个错误是一个红鲱鱼。实际上，其中一个用户控件存在由 .NET 2.,0 到 4.5 迁移引起的错误，必须在代码中进行修复，但 VS 抛出了这种误导性错误消息。在多次尝试升级项目后，它最终开始在实际代码行上出错，但经过​​数小时的挫败感和无果而终的尝试从互联网上应用解决方案，我不知道如何重现这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-20T15:55:53.943

在最初是 .net 1.1 和 2.0 项目并随后转换的项目上，MasterPages 也遇到了这个问题。在这两种情况下，@MasterType 指令都引用了虚拟路径。我更改为 <%@ MasterType TypeName="MasterPages_MasterPage" %>，清理了解决方案，问题就消失了。高温高压

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-23T02:11:10.603

重建解决方案对我有用。

# .net - .NET 3.5 的 SP1 中的新增功能

> ID：181746
> 
> 赞同：2
> 
> 时间：2008-10-08T07:55:32.360
> 
> 标签：.net, .net-3.5

.NET 3.5 的 SP1 中发生了什么变化是否有确切的概述？新的类、方法等

例如，我注意到类中有一个新的`WaitOne(TimeSpan)`和`WaitOne(int)`重载`WaitHandle`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-08T07:58:23.493

[.NET Framework 版本 3.5 SP1 中的新增功能 - MSDN](http://msdn.microsoft.com/en-us/library/cc713697.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T08:00:17.030

这里有一个很好的总结。（忽略它在谈论测试版的事实）

[http://weblogs.asp.net/scottgu/archive/2008/05/12/visual-studio-2008-and-net-framework-3-5-service-pack-1-beta.aspx](http://weblogs.asp.net/scottgu/archive/2008/05/12/visual-studio-2008-and-net-framework-3-5-service-pack-1-beta.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T08:03:34.183

[SP1 程序集与 .NET 3.5 的低级比较](http://codebetter.com/blogs/patricksmacchia/archive/2008/08/13/net-3-5-sp1-changes-overview.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T08:07:40.167

**.NET Framework Client Profile**是一个很棒的功能，请查看所有功能[http://msdn.microsoft.com/en-us/library/cc713697.aspx](http://msdn.microsoft.com/en-us/library/cc713697.aspx)

# .net-2.0 - 事件处理程序行为差异.net 1.1 vs 2.0 with null delegate

> ID：181775
> 
> 赞同：1
> 
> 时间：2008-10-08T08:05:51.073
> 
> 标签：.net-2.0, delegates, events, .net-1.1, nullreferenceexception

不确定这里到底发生了什么，但似乎在 .NET 1.1 中未初始化的事件委托可以毫无问题地运行，但在 .NET 2.0+ 中它会导致 NullReferenceException。任何想法为什么。下面的代码在 1.1 中运行良好，没有问题，在 2.0 中它给出了 NullReferenceException。我很好奇为什么它的行为不同？发生了什么变化？

谢谢

例如

```
class Class1
    {
    public delegate void ChartJoinedRowAddedHandler(object sender);

    public static event ChartJoinedRowAddedHandler ChartJoinedRowAdded;
    public static DataTable dt;

    public static void Main()
    {           
        dt = new DataTable();
        dt.RowChanged += new DataRowChangeEventHandler(TableEventHandler);

        object [] obj = new object[]{1,2};
        dt.Columns.Add("Name");
        dt.Columns.Add("Last");
        dt.NewRow();
        dt.Rows.Add(obj);
    }

    private static void TableEventHandler(object sender, DataRowChangeEventArgs e)
    {
        ChartJoinedRowAdded(new object());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T08:11:33.247

[更新] AFAIK，这里的基本委托处理没有变化；区别在于 DataTable 的行为方式。

然而！使用静态事件要非常小心，特别是如果您订阅的是实例（而不是静态方法）。这是保持大量对象存活而不被垃圾收集的好方法。

从 1.1 通过 csc 运行代码表明一般委托方是相同的 - 我认为不同之处在于引发 RowChanged 的​​ DataTable 代码正在吞噬异常。例如，使代码如下所示：

```
 Console.WriteLine("Before");
    ChartJoinedRowAdded(new object());
    Console.WriteLine("After"); 
```

你会看到“之前”，但没有“之后”；DataTable 引发并吞下异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T08:29:41.323

事件处理程序系统基本上只是在引发给定事件时要调用的函数列表。

它初始化为“空”列表，而不是空列表，所以你需要做

```
if (ChartJoinedRowAdded != null)
      ChartJoinedRowAdded(new object()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T09:55:13.583

从 1.1 到 2，事件的工作方式并没有真正改变

尽管语法看起来像普通聚合，但实际上并非如此：

```
dt.RowChanged += TableEventHandler;
dt.RowChanged += null;
dt.RowChanged += delegate (object sender, DataRowChangeEventArgs e) {
    //anon
}; 
```

将触发`TableEventHandler`然后委托 - 只是跳过空值。

您可以使用 null 清除事件，但只能在事件触发类中：

```
this.MyEvent = null; 
```

如果没有人订阅，您的活动将为空 - 请参阅 soraz 的回答。该类`DataTable`将包含类似的检查，如果没有订阅者，则不会触发该事件。

标准模式是：

```
//events should just about always use this pattern: object, args
public static event EventHandler<MyEventArgs> ChartJoinedRowAdded;

//inheriting classes can override this event behaviour
protected virtual OnChartJoinedRowAdded() {
    if( ChartJoinedRowAdded != null )
        ChartJoinedRowAdded( this, new MyEventArgs(...) );
} 
```

# oracle - Oracle：如何将数据库备份设置到网络驱动器

> ID：181778
> 
> 赞同：1
> 
> 时间：2008-10-08T08:06:18.360
> 
> 标签：oracle, backup

甲骨文数据库 11g。将完整的夜间数据库备份设置到网络驱动器（即另一台计算机上的驱动器）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T08:35:26.583

[阅读备份和恢复指南。](http://www.oracle.com/pls/db111/portal.portal_db?selected=4&frame=#backup_and_recovery)

不要只是备份...确保定期测试备份！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-23T16:37:24.893

你需要一个备份策略。定义好之后，您将看到哪些选项可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-10T16:04:50.010

挂载网络驱动器，使用 rman 将数据库完全备份到网络驱动器。Rman 可以做的很热。另一种方法是完全导出，但您必须刷新所有写入并将数据库置于受限模式，以便在导出时没有用户可以进行更改以获得完整一致的备份。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-12T13:22:08.737

如果您有 Grid Control 设置，最简单的方法是使用 Web 界面。该界面允许您指定 unc 路径（\computer\share 名称）。您必须在远程计算机上创建一个共享。

如果您没有网格控制，您可以创建一个使用[RMAN](http://download.oracle.com/docs/cd/B28359_01/backup.111/b28270/toc.htm)的脚本。如果您需要脚本细节，了解您的数据库所在的操作系统会很有帮助。

# iphone - 是否有记录的方法来设置 iPhone 方向？

> ID：181780
> 
> 赞同：95
> 
> 时间：2008-10-08T08:06:48.000
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个应用程序，我想在某些视图中支持设备旋转，但其他在横向模式下并不特别有意义，所以当我交换视图时，我想强制将旋转设置为纵向。

UIDevice 上有一个未记录的属性设置器可以解决问题，但显然会生成编译器警告，并且可能会随着 SDK 的未来版本而消失。

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait]; 
```

是否有任何记录在案的方法来强制定向？

**更新：**我想我会提供一个例子，因为我不是在寻找 shouldAutorotateToInterfaceOrientation 因为我已经实现了。

我希望我的应用在视图 1 中支持横向和纵向，但在视图 2 中仅支持纵向。我已经为所有视图实现了 shouldAutorotateToInterfaceOrientation 但如果用户在视图 1 中处于横向模式然后切换到视图 2，我想强制手机旋转回纵向。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2011-02-06T18:56:02.303

这是事后很久了，但以防万一有人不使用导航控制器和/或不希望使用未记录的方法：

```
UIViewController *c = [[UIViewController alloc]init];
[self presentModalViewController:c animated:NO];
[self dismissModalViewControllerAnimated:NO];
[c release]; 
```

展示和关闭一个香草视图控制器就足够了。

显然，您仍然需要在覆盖 shouldAutorotateToInterfaceOrientation 时确认或拒绝方向。但这会导致 shouldAutorotate... 被系统再次调用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-01-21T04:07:47.293

据我所知，该`setOrientation:`方法不起作用（或者可能不再起作用）。这是我正在做的事情：

首先，将此定义放在文件顶部，就在您的#imports 下方：

```
#define degreesToRadian(x) (M_PI * (x) / 180.0) 
```

那么，在`viewWillAppear:`方法中

```
[[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO];     
if (self.interfaceOrientation == UIInterfaceOrientationPortrait) {  
    self.view.transform = CGAffineTransformIdentity;
    self.view.transform = CGAffineTransformMakeRotation(degreesToRadian(90));
    self.view.bounds = CGRectMake(0.0, 0.0, 480, 320);
} 
```

如果你想让它被动画化，那么你可以将整个东西包装在一个动画块中，如下所示：

```
[UIView beginAnimations:@"View Flip" context:nil];
[UIView setAnimationDuration:1.25];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

[[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO];     
if (self.interfaceOrientation == UIInterfaceOrientationPortrait) {  
    self.view.transform = CGAffineTransformIdentity;
    self.view.transform = CGAffineTransformMakeRotation(degreesToRadian(90));
    self.view.bounds = CGRectMake(0.0, 0.0, 480, 320);
}
[UIView commitAnimations]; 
```

然后，在您的纵向模式控制器中，您可以执行相反的操作 - 检查它当前是否处于横向状态，如果是，则将其旋转回纵向。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-04-27T12:32:27.920

如果你想强制它从纵向旋转到横向，这里是代码。请注意，您需要调整视图的中心。我注意到我的视图没有放在正确的位置。否则，它工作得很好。谢谢你的提示。

```
if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation)){

        [UIView beginAnimations:@"View Flip" context:nil];
        [UIView setAnimationDuration:0.5f];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];

        self.view.transform = CGAffineTransformIdentity;
        self.view.transform = CGAffineTransformMakeRotation(degreesToRadian(90));
        self.view.bounds = CGRectMake(0.0f, 0.0f, 480.0f, 320.0f);
        self.view.center = CGPointMake(160.0f, 240.0f);

        [UIView commitAnimations];
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2010-08-19T21:24:54.933

我遇到了一个问题，我`UIViewController`在屏幕上有一个，在一个`UINavigationController`，在横向。但是，当在流程中推送下一个视图控制器时，我需要设备返回纵向。

我注意到，`shouldAutorotateToInterfaceOrientation:`当一个新的视图控制器被压入堆栈时，该方法不会被调用，但是**当视图控制器从堆栈中弹出时它会被调用**。

利用这一点，我在我的一个应用程序中使用了这段代码：

```
- (void)selectHostingAtIndex:(int)hostingIndex {

    self.transitioning = YES;

    UIViewController *garbageController = [[[UIViewController alloc] init] autorelease];
    [self.navigationController pushViewController:garbageController animated:NO];
    [self.navigationController popViewControllerAnimated:NO];

    BBHostingController *hostingController = [[BBHostingController alloc] init];
    hostingController.hosting = [self.hostings objectAtIndex:hostingIndex];
    [self.navigationController pushViewController:hostingController animated:YES];
    [hostingController release];

    self.transitioning = NO;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    if (self.transitioning)
        return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
    else
        return YES;
} 
```

基本上，通过创建一个空视图控制器，将其压入堆栈，然后立即将其弹出，可以使界面恢复到纵向位置。弹出控制器后，我只需推动我最初打算推动的控制器。从视觉上看，它看起来很棒——用户永远不会看到空的、任意的视图控制器。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-10-27T15:54:37.480

我一直在挖掘和挖掘寻找一个好的解决方案。发现这篇博客文章可以解决问题：从键中删除最外层的视图`UIWindow`并再次添加它，然后系统将重新查询视图控制器中的`shouldAutorotateToInterfaceOrientation:`方法，强制应用正确的方向。看到它：[iphone 强制 uiview 重新定向](http://goodliffe.blogspot.com/2009/12/iphone-forcing-uiview-to-reorientate.html)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-09T12:00:43.897

有一种简单的方法可以以编程方式强制 iPhone 进入必要的方向 - 使用**kdbdallas** **Josh**已经提供的两个答案：

```
//will rotate status bar
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];

//will re-rotate view according to statusbar
UIViewController *c = [[UIViewController alloc]init];
[self presentModalViewController:c animated:NO];
[self dismissModalViewControllerAnimated:NO];
[c release]; 
```

奇迹般有效 ：）

编辑：

对于 iOS 6，我需要添加此功能：（适用于模态视图控制器）

```
- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight);
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-12-05T00:03:27.007

这不再是后来的 iPhone 3.1.2 SDK 的问题。它现在似乎尊重被推回堆栈的视图的请求方向。这可能意味着您需要检测较旧的 iPhone OS 版本，并且仅在最新版本之前应用 setOrientation。

目前尚不清楚 Apple 的静态分析是否会理解您正在解决较旧的 SDK 限制。我个人被 Apple 告知要在我的下一次更新中删除方法调用，所以我还不确定对旧设备进行黑客攻击是否会通过审批流程。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2011-06-13T15:20:23.500

乔希的回答对我来说很好。

但是，我更喜欢发布*“方向确实发生了变化，请更新 UI”*通知。当视图控制器收到此通知时，它会调用`shouldAutorotateToInterfaceOrientation:`，允许您通过返回`YES`所需的方向来设置任何方向。

```
[[NSNotificationCenter defaultCenter] postNotificationName:UIDeviceOrientationDidChangeNotification object:nil]; 
```

**唯一的问题是这会在没有**动画的情况下强制重新定向。您需要在`beginAnimations:`和之间包装这条线`commitAnimations`以实现平滑过渡。

希望有帮助。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-12-07T07:11:16.763

FWIW，这是我手动设置方向的实现（进入应用程序的根视图控制器，natch）：

```
-(void)rotateInterfaceToOrientation:(UIDeviceOrientation)orientation{

    CGRect bounds = [[ UIScreen mainScreen ] bounds ];
    CGAffineTransform t;
    CGFloat r = 0;
    switch ( orientation ) {
        case UIDeviceOrientationLandscapeRight:
            r = -(M_PI / 2);
            break;
        case UIDeviceOrientationLandscapeLeft:
            r  = M_PI / 2;
            break;
    }
    if( r != 0 ){
        CGSize sz = bounds.size;
        bounds.size.width = sz.height;
        bounds.size.height = sz.width;
    }
    t = CGAffineTransformMakeRotation( r );

    UIApplication *application = [ UIApplication sharedApplication ];

    [ UIView beginAnimations:@"InterfaceOrientation" context: nil ];
    [ UIView setAnimationDuration: [ application statusBarOrientationAnimationDuration ] ];
    self.view.transform = t;
    self.view.bounds = bounds;
    [ UIView commitAnimations ];

    [ application setStatusBarOrientation: orientation animated: YES ];     
} 
```

再加上以下`UINavigationControllerDelegate`方法（假设您使用的是 a `UINavigationController`）：

```
-(void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated{
    // rotate interface, if we need to
    UIDeviceOrientation orientation = [[ UIDevice currentDevice ] orientation ];
    BOOL bViewControllerDoesSupportCurrentOrientation = [ viewController shouldAutorotateToInterfaceOrientation: orientation ];
    if( !bViewControllerDoesSupportCurrentOrientation ){
        [ self rotateInterfaceToOrientation: UIDeviceOrientationPortrait ];
    }
} 
```

这负责根据传入是否`UIViewController`支持当前设备方向来旋转根视图。最后，您需要连接`rotateInterfaceToOrientation`到实际的设备方向更改以模仿标准 iOS 功能。将此事件处理程序添加到相同的根视图控制器：

```
-(void)onUIDeviceOrientationDidChangeNotification:(NSNotification*)notification{
    UIViewController *tvc = self.rootNavigationController.topViewController;
    UIDeviceOrientation orientation = [[ UIDevice currentDevice ] orientation ];
    // only switch if we need to (seem to get multiple notifications on device)
    if( orientation != [[ UIApplication sharedApplication ] statusBarOrientation ] ){
        if( [ tvc shouldAutorotateToInterfaceOrientation: orientation ] ){
            [ self rotateInterfaceToOrientation: orientation ];
        }
    }
} 
```

最后，注册`UIDeviceOrientationDidChangeNotification`通知`init`或`loadview`类似这样：

```
[[ NSNotificationCenter defaultCenter ] addObserver: self
                                           selector: @selector(onUIDeviceOrientationDidChangeNotification:)
                                               name: UIDeviceOrientationDidChangeNotification
                                             object: nil ];
[[ UIDevice currentDevice ] beginGeneratingDeviceOrientationNotifications ]; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-04-18T16:26:57.163

这对我有用（谢谢亨利库克）：

我的目标是只处理横向方向的变化。

## 初始化方法：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:nil]; 
```

* * *

```
- (void)orientationChanged:(NSNotification *)notification {    
    //[[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
    UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;
    CGRect bounds = [[ UIScreen mainScreen ] bounds ];
    CGAffineTransform t;
    CGFloat r = 0;
    switch ( orientation ) {
        case UIDeviceOrientationLandscapeRight:
            r = 0;
            NSLog(@"Right");
            break;
        case UIDeviceOrientationLandscapeLeft:
            r  = M_PI;
            NSLog(@"Left");
            break;
        default:return;
    }

    t = CGAffineTransformMakeRotation( r );

    UIApplication *application = [ UIApplication sharedApplication ];
    [ UIView beginAnimations:@"InterfaceOrientation" context: nil ];
    [ UIView setAnimationDuration: [ application statusBarOrientationAnimationDuration ] ];
    self.view.transform = t;
    self.view.bounds = bounds;
    [ UIView commitAnimations ];

    [ application setStatusBarOrientation: orientation animated: YES ];
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-10-03T15:45:37.447

> 我有一个应用程序，我想在某些视图中支持设备旋转，但其他在横向模式下并不特别有意义，所以当我交换视图时，我想强制将旋转设置为纵向。

我意识到这个线程中的上述原始帖子现在已经很老了，但我遇到了类似的问题 - 即。我的应用程序中的所有屏幕都是纵向的，除了一个屏幕，用户可以在横向和纵向之间旋转。

这很简单，但和其他帖子一样，我希望应用程序在返回上一个屏幕时，无论当前设备方向如何，都能自动返回纵向。

我实施的解决方案是在横向模式下隐藏导航栏，这意味着用户只能在纵向模式下返回之前的屏幕。因此，所有其他屏幕只能是纵向的。

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)pInterfaceOrientation {
    BOOL lHideNavBar = self.interfaceOrientation == UIInterfaceOrientationPortrait ? NO : YES;
    [self.navigationController setNavigationBarHidden:lHideNavBar animated:YES];
} 
```

这对我的应用程序也有额外的好处，因为在横向模式下有更多可用的屏幕空间。这很有用，因为有问题的屏幕用于显示 PDF 文件。

希望这可以帮助。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-05T03:55:31.040

最后我很容易解决了这个问题。我尝试了上面的每一个建议，但仍然很短，所以这是我的解决方案：

在需要保持横向（左或右）的 ViewController 中，我监听方向变化：

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(didRotate:)
                                             name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

然后在 didRotate 中：

```
- (void) didRotate:(NSNotification *)notification
{   if (orientationa == UIDeviceOrientationPortrait) 
    {
        if (hasRotated == NO) 
        {
            NSLog(@"Rotating to portait");
            hasRotated = YES;
            [UIView beginAnimations: @"" context:nil];
            [UIView setAnimationDuration: 0];
            self.view.transform = CGAffineTransformIdentity;
            self.view.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(-90));
            self.view.bounds = CGRectMake(0.0f, 0.0f, 480.0f, 320.0f);
            self.view.frame = CGRectMake(0.0f, 0.0f, 480.0f, 320.0f);
            [UIView commitAnimations];

    }
}
else if (UIDeviceOrientationIsLandscape( orientationa))
{
    if (hasRotated) 
    {
        NSLog(@"Rotating to lands");
        hasRotated = NO;
        [UIView beginAnimations: @"" context:nil];
        [UIView setAnimationDuration: 0];
        self.view.transform = CGAffineTransformIdentity;
        self.view.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(0));
        self.view.bounds = CGRectMake(0.0f, 0.0f, 320.0f, 480.0f);
        self.view.frame = CGRectMake(0.0f, 0.0f, 320.0f, 480.0f);
        [UIView commitAnimations];

    }
} 
```

请记住任何使用自动调整大小的超级视图/子视图，因为 view.bounds/frame 正在被显式重置......

这种保持视图景观的方法的唯一警告是，必须发生方向之间的固有动画切换，而最好让它看起来没有变化。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-01-13T00:42:41.503

iOS 6 解决方案：

```
[[[self window] rootViewController] presentViewController:[[UIViewController alloc] init] animated:NO completion:^{
    [[[self window] rootViewController] dismissViewControllerAnimated:NO completion:nil];
}]; 
```

确切的代码取决于每个应用程序以及您放置它的位置（我在我的 AppDelegate 中使用它）。替换`[[self window] rootViewController]`为您使用的内容。我正在使用一个`UITabBarController`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2010-09-10T14:26:59.163

我找到了一个解决方案并用法语写了一些东西（但代码是英文的）。[这里](http://www.geckogeek.fr/iphone-forcer-le-mode-landscape-ou-portrait-en-cours-dexecution.html)

方法是将控制器添加到窗口视图（控制器必须具有良好的 shouldRotate.... 函数实现）。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2008-10-08T15:21:14.957

如果你使用 UIViewControllers，有这个方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

返回`NO`包含您不想旋转的视图的视图控制器。

[更多信息在这里](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation:)

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2008-10-08T20:09:48.680

我认为这在运行时是不可能的，尽管您当然可以对您的 UI 应用 90 度变换。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2008-10-10T06:58:18.433

这就是我使用的。（您会收到一些编译警告，但它适用于模拟器和 iPhone）

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight]; 
```

# java - JAVA Swing客户端，远程数据库数据访问；伊巴蒂斯

> ID：181784
> 
> 赞同：3
> 
> 时间：2008-10-08T08:07:39.293
> 
> 标签：java, jboss, data-access-layer, ibatis, data-access

我有一个需要访问远程数据库的 Java 客户端。目标是向用户隐藏数据库凭据，而不是在代码中硬编码任何凭据。因此，数据库访问可能必须在服务器端。

我仅限于使用 Ibatis 作为数据抽象框架。除此之外，我还在网络服务器上运行 JBoss，允许我使用数据源。

您将如何设计远程数据库访问和数据序列化/反序列化。您是否更喜欢某种数据流的 Web 服务而不是套接字？你将如何实现两者中的任何一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T09:07:12.010

构建一个服务层并在 RMI 上公开它 - 可能作为您拥有 JBoss 的 EJB3 无状态会话 bean，可能作为纯 RMI。除非您有特殊需要，否则我不会使用 Web 服务。RMI 将为您处理序列化的情况。

您的服务层需要公开一种方法来使用在 Swing 应用程序启动时输入的凭据对用户进行身份验证。所有对数据的调用都经过服务层。Swing 应用程序中不存在 SQL。

除了隐藏数据库凭据之外，这种安排还有其他好处。您不仅最终获得了分层架构，而且通过在服务器上拥有单个数据源，您可以通过在所有客户端之间共享准备好的语句来提高效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T08:24:56.170

因此，您希望用户能够在不知道凭据的情况下访问数据库吗？您唯一的选择是服务器端数据库访问。不幸的是，没有办法在 Java 中隐藏用户名和密码——如果你把它放到一个属性文件中并加密它，一个确定的攻击者仍然可以附加一个调试器并查看你的代码中保存了哪些值。

此外，除非您通过安全连接连接到数据库，否则有人可以运行数据包嗅探器（例如 tcpdump）并在那里获取凭据。

您说您正在运行 JBoss 服务器，最好的办法是设置远程 EJB，这样您的客户端应用程序就不会直接访问数据库——它必须通过您的 EJB 方法。（它不一定是 EJB，顺便说一下，如果你愿意，你可以做一些诸如 web 服务之类的事情）。

关键是，您的服务器直接与数据库通信，而您的客户端的唯一访问权限是通过您在服务器上定义的一组有限的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T16:17:35.620

如前所述，您必须连接到处理数据库连接的服务器。没有办法有效地防止有人破坏您的安全，只需 30 分钟的努力。

如果客户端在本地连接，在 Intranet 中，在您的应用服务器上使用 EJB 可能是最好的选择......虽然您可能想要无状态会话 bean，但我不一定会打折消息驱动的 bean。

对于来自外部的更远距离的流量，我会通过 HTTPS 使用 Web 服务

在任何情况下，大多数应用服务器都有将 EJB 公开为 Web 服务的机制，使用 WSDL。并且有大约一百个实用程序可以从 WSDL 生成客户端、调用 web 服务（axis 的 wsdl2java 工作得很好）

# windows - 如何保存 Windows 内部 FTP 客户端的输出？

> ID：181791
> 
> 赞同：1
> 
> 时间：2008-10-08T08:12:07.740
> 
> 标签：windows, command-line, ftp, batch-file

> 更新：在win2k上它似乎工作正常。对困惑感到抱歉。

MS Windows Vista 内部 ftp 客户端有一个奇怪的行为。将其输出和错误重定向到文件时，错误不会显示在那里：

> ftp -n -s:commands.txt 主机>output.log 2>&1

从批处理文件中的任务计划程序运行它时，如果连接被拒绝，我不会收到任何错误消息。即使 echo 已打开或使用 -d 选项。你有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T14:40:38.843

你试过没有“2>&1”吗？我们一直这样做，但采用这种格式

```
ftp -s:FTPCMD.FTP > R:\foo\bar\FTPGET.LOG 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-09T03:36:23.350

不确定你发生了什么事。我会检查正在运行它的批处理文件，或者可能是您如何安排作业。

输出令人困惑，因为错误似乎无序，但重定向 stderr 似乎在我的 XP 机器上工作：

```
C:\Temp>ftp -s:ftpcmds.txt ftp.microsxoft.com >ftplog.txt 2>&1

C:\Temp>type ftplog.txt
ftp> Not connected.
ftp> USER sconners
Invalid command.
ftp> PASS skynet.com
Not connected.
ftp> PUT test.txt test1.txt
BYE
> ftp: connect :Unknown error number

C:\Temp> 
```

# mysql - 什么技术对处理数百万条记录最有效？

> ID：181792
> 
> 赞同：21
> 
> 时间：2008-10-08T08:12:53.727
> 
> 标签：mysql, database

我曾经有一个包含 2500 万条记录的 MySQL 数据库表，即使是简单的`COUNT(*)`查询也需要几分钟才能执行。我最终制作了分区，将它们分成几个表。我要问的是，是否有任何模式或设计技术来处理这类问题（大量记录）？MSSQL 或 Oracle 在处理大量记录方面更好吗？

PS`COUNT(*)`上面提到的问题只是一个示例，实际上该应用程序具有粗鲁功能和一些聚合查询（用于报告），但没有什么复杂的。只是由于表量的原因，执行这些查询需要相当长的时间（分钟）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T08:22:58.997

请参阅[为什么 MySQL 对大表](http://www.mysqlperformanceblog.com/2006/06/09/why-mysql-could-be-slow-with-large-tables/)和[COUNT(*) vs COUNT(col)可能会很慢](http://www.mysqlperformanceblog.com/2007/04/10/count-vs-countcol/)

确保在要计数的列上有索引。如果您的服务器有大量 RAM，请考虑增加 MySQL 的缓冲区大小。确保您的磁盘配置正确——启用了 DMA，不与交换分区共享驱动器或电缆等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-10-08T08:35:47.410

你用“SELECT COUNT(*)”问什么并不容易。

在 MySQL 中，MyISAM 非事务引擎通过保持记录计数来优化这一点，因此 SELECT COUNT(*) 将非常快。

但是，如果您使用的是事务引擎，则 SELECT COUNT(*) 基本上是在说：

*在我的事务*中，这张表中到底有多少条记录？

为此，引擎需要扫描整个表；它可能大致知道表中已经存在多少条记录，但是要获得特定事务的准确答案，它需要进行扫描。使用 MySQL innodb 不会很快，在 Oracle 或其他任何东西中也不会很快。必须读取整个表（不包括由引擎单独存储的内容，例如 BLOB）

将整个表放在 ram 中会使其更快一些，但它仍然不会很快。

如果您的应用程序依赖于频​​繁、准确的计数，您可能需要制作一个通过触发器或其他方式更新的汇总表。

如果您的应用程序依赖于频​​繁的、不太准确的计数，您可以使用计划任务维护摘要数据（这可能对其他操作的性能影响较小）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-08T08:18:52.763

大型表周围的许多性能问题都与索引问题或缺乏索引有关。我肯定会确保您熟悉索引技术和您计划使用的数据库的细节。

关于大表上的慢计数（*），我假设您在 MySQL 中使用 InnoDB 表类型。我在 MySQL 下使用 MyISAM 有一些超过 1 亿条记录的表，并且 count(*) 非常快。

特别是对于 MySQL，InnoDB 和 MyISAM 表之间甚至存在细微的索引差异，这两种最常用的表类型。值得了解每种方法的优缺点以及如何使用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T08:26:20.050

您需要什么样的数据访问权限？我使用[HBase](http://wiki.apache.org/hadoop/Hbase)（基于 Google 的 BigTable）加载了大量数据（约 3000 万行）作为可以在几秒钟内返回结果的应用程序的后端。但是，如果您需要“实时”访问（即为网站提供动力），这并不合适。如果您习惯了面向行的 DBMS，那么它面向列的性质也是一个相当彻底的改变。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T08:48:43.813

整张桌子上的 count(*) 实际上是您经常做的事情吗？

InnoDB 必须进行全表扫描来计算行数，如果计算所有行数是您真正想要做的事情，这显然是一个主要的性能问题。但这并不意味着桌子上的其他操作会很慢。

有了正确的索引，MySQL 将从比这大得多的表中检索数据的速度非常快。索引的问题在于它们会影响插入速度，特别是对于大型表，因为一旦索引所需的空间达到某个阈值（大概是它将保留在内存中的大小），插入性能就会急剧下降。但是，如果您只需要适度的插入速度，MySQL 应该可以满足您的所有需求。

任何其他数据库都将在检索速度和插入速度之间进行类似的权衡；它们可能对您的应用程序更好，也可能不会。但在您尝试其他数据库之前，我会首先考虑正确设置索引，并可能重写您的查询。对于它的价值，我们最初选择 MySQL 是因为我们发现它性能最好。

注意 MySQL 中的 MyISAM 表存储表的总大小。他们保持这一点是因为它在某些情况下对优化器很有用，但副作用是整个表上的 count(*) 非常快。这并不一定意味着它们在其他任何方面都比 InnoDB 快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T08:55:43.640

[我在This Stackoverflow Posting](https://stackoverflow.com/questions/126188/mssql-and-oracle-which-one-is-better-in-terms-of-scalability#126267)中详细回答了一个类似的问题，描述了两个系统架构的优点。在某种程度上，它是从数据仓库的角度完成的，但许多差异对事务系统也很重要。

但是，2500 万行不是 VLDB，如果您遇到性能问题，您应该考虑索引和调整。你不需要去 Oracle 来支持一个 2500 万行的数据库——在你真正进入 VLDB 领域之前，你还有大约 3 个数量级的工作要做。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-12T20:25:54.403

**您要的是一本值得回答的书，**因此我建议您买一本关于数据库的好书。有*很多*。

为了帮助您入门，这里有一些数据库基础知识：

首先，您需要一个出色的数据模型，该模型不仅基于您需要存储的数据，还基于使用模式。**良好的数据库性能始于良好的模式设计。**

其次，根据预期的查找和更新需求在列上放置索引，因为更新性能经常被忽略。

第三，尽可能不要将函数放在 where 子句中。

第四，使用质量设计的-ahem- RDBMS 引擎。我恭敬地提出，虽然它在最近有了很大的改进，但 mysql 不符合条件。（向那些想争辩说它最近终于取得成绩的人道歉。）不再需要在高价和质量之间进行选择；Postgres（又名 PostgreSql）是开源的，非常棒 - 并且拥有所有可用的插件来满足您的需求。

最后，了解您要求数据库引擎做什么 -深入*了解*内部结构 - 这样您就可以更好地判断哪些东西是昂贵的以及为什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-08T13:35:17.167

我要第二个[@Mark Ba​​ker](https://stackoverflow.com/questions/181792/what-techniques-are-most-effective-for-dealing-with-millions-of-records#181867)，并说你需要在你的表上建立索引。

对于您选择的查询以外的其他查询，您还应该知道使用 IN() 等结构比查询中的一系列 OR 语句更快。您可以采取许多小步骤来加速单个查询。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-08T14:48:58.467

索引是处理这么多记录的性能的关键，但编写查询的方式也会产生很大的不同。具体的性能调优方法因数据库而异，但总的来说，避免返回比实际需要更多的记录或字段，确保所有连接字段都被索引（以及常见的 where 子句字段），避免使用游标（虽然我认为这不太正确在 Oracle 中比在 SQL Server 中我不了解 mySQL）。

硬件也可能成为瓶颈，尤其是当您在同一台机器上运行除数据库服务器之外的其他东西时。

性能调优是一个非常技术性的主题，并不能以这样的格式得到很好的回答。我建议你买一本性能调优书并阅读它。这是指向 mySQL 的链接 [http://www.amazon.com/High-Performance-MySQL-Optimization-Replication/dp/0596101716](https://rads.stackoverflow.com/amzn/click/com/0596101716)

# outlook - Outlook 联系人同步 - 如何识别要同步的正确对象？

> ID：181799
> 
> 赞同：1
> 
> 时间：2008-10-08T08:18:01.173
> 
> 标签：outlook, synchronization, exchange-server, mapi, cdo.message

我有一个通过 CDO 将 Outlook 联系人同步到数据库（并返回）的 Web 应用程序。DB 只包含每个联系人一次（至少理论上，当然会发生双联），为联系人提供单点更改，无论有多少用户在 Outlook 中拥有该特定联系人（如交互或类似产品）。

同步过程不是自动的，而是用户初始化的。在用户决定同步他们的联系人之前，可以经过任意时间跨度。与此同时，其他用户可能已经更新了这些联系人的一个子集。

一般来说，这运行良好，但我从来没有能够解决这个基本问题：

**我如何毫无疑问地识别邮箱中的联系人对象？**

1.  我不能依赖`PR_ENTRYID`，这个属性会随着联系人移动或邮箱移动而改变。
2.  我不能依赖我自己的 ID（例如 DB 表 ID），因为这些会与联系人一起复制。
3.  我绝对不能依赖姓名或电子邮件地址等字段，它们可能会发生变化和更新。

目前我使用 1（首选）和 2（后备）的组合。但不可避免地，有时用户会遇到同步到错误联系人的问题，因为没有一个给定的`PR_ENTRYID`，而是两个具有相同 DB ID 的，其中选择了错误的一个。

那里有一堆 Outlook 同步产品，所以我想这个问题一定是可以解决的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-13T15:13:39.543

我有一个类似的问题需要通过一个内部 Outlook 插件来解决联系人同步问题。我最终在 Outlook 对象中粘贴了一个数据库 ID，并在进行同步时引用了该 ID。

这里的不同之处在于我们的系统有一堆重复项，这些重复项稍后会被用户解决。当它们合并时，我将删除旧记录并使用所有新信息和新 ID 更新 Outlook。

您可以进行模糊匹配来识别重复项，但重复项解决是一个有趣的问题，主要是反复试验。我们已经成功地使用 levenshtein 距离算法实现了“模糊”匹配逻辑，用于将名称和地址清理为哈希码。

祝你好运，我的同步经历有些痛苦。

# .net - 本地化页面的 html 标题的问题

> ID：181800
> 
> 赞同：1
> 
> 时间：2008-10-08T08:18:41.097
> 
> 标签：.net, asp.net, iis, localization

我正在尝试本地化我的 aspx 页面。我使用 .net f/w 提供的 L10n 功能完成了内容本地化，例如资源文件。但是我发现很难在页面标题中设置本地数据。

大多数浏览器，包括 IE 和 FF，都会在带有一些框的窗口标题上显示内容（FF 会在选项卡中显示正确本地化的文本，IE 甚至不会这样做）。但它在 safari（在 Windows 上）中运行良好。

当我进行研究时，似乎此问题仅适用于某些语言。例如，[印地语版本的 BBC](http://www.bbc.co.uk/hindi/)显示带有方框的标题。但[阿拉伯语版本](http://news.bbc.co.uk/hi/arabic/news/)在标题中显示本地化文本。

有人可以告诉我为什么会这样吗？我们如何解决这个问题？

注意：我的网站使用的是 Asp.net 2.0 / IIS

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T08:25:41.987

我怀疑这是字体问题。浏览器标题栏和其他窗口装饰通常由您的操作系统呈现，而不是由浏览器本身呈现，因此，如果您已将 Windows 配置为使用不支持印地语、阿拉伯语等所需的附加字符字形的字体，然后你会得到盒子。在您的实际页面中，您可能使用的字体确实包含对所有这些扩展字符的支持，这就是为什么您只在窗口标题上看到问题的原因。

Safari 对包括窗口镶边在内的所有内容都使用自己的渲染引擎，这就是为什么它看起来不像普通的 Windows 应用程序，以及为什么您的本地化标题可以正常工作。

您可能想尝试将您的 Windows“活动标题栏”字体（在显示属性、外观、高级下）更改为类似 Arial 的字体，它涵盖了完整的 Unicode 字符集，看看这是否能解决问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T08:25:57.197

对我来说，您链接的两个 BBC 站点都可以在窗口标题栏中获取正确的字符（在 Windows 上使用 Firefox 或 IE）。

我怀疑您没有安装正确的字体，尽管我不完全确定您会缺少什么字体会导致此问题，尤其是在 Safari 正常工作的情况下。

无论如何，我认为这是您系统配置的问题，而不是您正在开发的站点。希望您的目标受众将拥有一个正确配置的系统来显示他们自己的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T08:26:10.643

这是一个字体问题，而不是您可以在服务器端修复的问题。如果用于标题栏文本的字体缺少用于选项卡的字体中的字形，则它将正确显示在选项卡中，但不会正确显示在标题栏中。这也可以解释为什么 Safari 可以工作——它使用自己的字体和字体渲染系统来处理一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T08:27:30.860

问题与浏览器显示网页标题的位置和方式有关。

IE 在标准窗口标题中显示页面标题。IE 本身不进行绘图，而是将其留给操作系统。操作系统标题绘图代码使用标准字体，这取决于操作系统区域设置。您机器上的默认字体可能没有印地语字符。因此盒子。

Firefox 不会在标题中进行自定义绘图，因此它会显示相同的框。但是，FF 使用其选择的字体绘制选项卡。

Safari 对所有内容进行自定义绘制，包括窗口标题，并使用其选择的字体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-29T06:38:46.773

我认为您在 Windows 和 Linux 上提供的 FireFox 2 和 3 链接没有问题。在窗口标题和选项卡标题上。

# tomcat - 绝对路径和相对路径

> ID：181805
> 
> 赞同：10
> 
> 时间：2008-10-08T08:21:48.017
> 
> 标签：tomcat, path, relative-path

使用任何 Web 服务器或 Tomcat 时，绝对路径和相对路径有什么区别？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-10-08T08:24:51.113

绝对路径以 / 开头，指向当前站点（或虚拟主机）根目录的位置。

相对路径不以 / 开头，并且从引用的文档的实际位置引用一个位置。

示例，假设 root 是[http://foo.com/site/](http://foo.com/site/)

绝对路径，无论我们在网站的哪个位置

```
/foo.html 
```

将参考[http://foo.com/site/foo.html](http://foo.com/site/foo.html)

相对路径，假设包含链接位于[http://foo.com/site/part1/bar.html](http://foo.com/site/part1/bar.html)

```
../part2/quux.html 
```

将参考[http://foo.com/site/part2/quux.html](http://foo.com/site/part2/quux.html)

或者

```
part2/blue.html 
```

将参考[http://foo.com/site/part1/part2/blue.html](http://foo.com/site/part1/part2/blue.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T09:15:16.567

需要注意的是，相对路径也是主观的。

IE：

```
<?php 
  #bar.php
  require('../foo.php'); 
?> 
```

```
/dir/bar.php
/foo.php # 打印一个
/dir/foo.php # 打印 b
/dir/other/ # 空目录

```

```
$密码
> /
$ php 目录/bar.php
> / + ../foo.php == /foo.php   
> 打印一个
$ cd 目录
$ php bar.php
> /dir + ../foo.php = /foo.php
> 打印一个
$ cd 其他
$ php ../bar.php
> /dir/其他 + ../foo.php = /dir/foo.php
> 打印 b

```

这可能会造成一些相当混乱的情况，特别是如果您有许多具有相关引用的文件和多个可能的位置，这些文件可以充当控制相对路径相对于什么的“入口点”。

在这种情况下，应该根据固定的已知值手动计算绝对路径，即：

```
<?php
    require( realpath(dirname(__FILE__) . '/../foo.php') ) 
```

或者

```
<?php
   require( SOMECONSTANT . '/relative/path.php'  ); 
```

或者

```
<?php
   require( $_SERVER['DOCUMENT_ROOT'] . '/relative/path.php' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-17T09:41:50.660

通过反复试验，我确定 Tomcat 中路径的起点是 webapps 文件夹。

换句话说，如果您的 Java 代码试图读取 ../somefile.txt，那么该文件的绝对路径将是 %TOMCAT_HOME%/webapps/../somefile.txt 即 %TOMCAT_HOME%/webapps/somefile.txt

# xml - 移动客户端的 XML

> ID：181806
> 
> 赞同：0
> 
> 时间：2008-10-08T08:22:57.280
> 
> 标签：xml, java-me, mobile

我有一个 J2ME 应用程序，它需要与我的服务器通信，并以 XML 格式下载应用程序的信息。如果我有更好的数据格式，我的应用程序可以运行得更快，这将使我能够更有效地解析代码。

有谁知道 XML 的有效替代品？也许某些特定于手机的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T09:33:33.767

[JavaME 的最佳二进制 XML 格式](https://stackoverflow.com/questions/8599/best-binary-xml-format-for-javame)

结论是我同意的[WBXML 。](http://en.wikipedia.org/wiki/WBXML)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T10:15:09.770

你可以试试谷歌的[Protocol Buffers](http://code.google.com/apis/protocolbuffers/)。非常紧凑的二进制编码和高度优化的解析器/编码器。简而言之，你写了一些关于你的结构的描述，它编译成一个专门的 Java、C++ 或 Python 的 OOP 库，你包含在你的客户端和服务器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T08:43:14.620

总是有 JSON，但我不知道它是否是你需要的。

[http://java.sun.com/developer/technicalArticles/javame/json-me/](http://java.sun.com/developer/technicalArticles/javame/json-me/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T09:17:42.317

我还没有听说过很多用于这种东西的协议（高效且小），但你可以试试 Hessian，它在效率方面比 xml 好得多。

[http://www.caucho.com/resin-3.0/protocols/hessian.xtp](http://www.caucho.com/resin-3.0/protocols/hessian.xtp)

但是要疲倦并查看以下可能会有所帮助的内容

[https://stackoverflow.com/search?q=j2me+hessian](https://stackoverflow.com/search?q=j2me+hessian)

具体来说

[什么是移动应用程序的最佳远程技术？](https://stackoverflow.com/questions/82691/what-are-the-best-remoting-technologies-for-mobile-applications)

# eclipse - Eclipse 将项目中的所有文件视为 Derived

> ID：181808
> 
> 赞同：4
> 
> 时间：2008-10-08T08:24:10.087
> 
> 标签：eclipse

我在我的 Eclipse 工作区中创建了一个动态 Web 项目。它也是一个 Maven 项目，受 SVN 控制。但是在“打开资源”（Ctrl+Alt+R）中，没有出现该项目的文件，除非我从窗口的选项（右上角的下拉菜单）“显示派生资源”中进行检查。

我检查了一些项目的文件夹，它们没有标记为“派生”。

我在工作区中还有两个（纯 Java）项目，它们中的所有文件都在“开放资源”中可见。

您知道 Eclipse、Maven 插件或 Subclipse（SVN 插件）可能有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-29T07:59:50.883

在使用 Maven 和 Subclipse 插件时，我在 Eclipse (Ganymede) 中遇到了类似的问题。我还没有确定是哪个插件导致了这个问题，但我怀疑它与我的 pom.xml 包含嵌套模块（即 a `<modules><module>main-module</module><module>integration-test</module>`）有关。这些在 Eclipse 中显示为带有自己的 pom.xml 文件的嵌套文件夹（尽管我已经安装了 Multiple Projects 插件，但我没有使用它）。

当我通过 SVN 签出项目然后更新 MVN 依赖项和项目设置时，我假设其中一个插件错误地在这些文件夹上设置了派生标志。

当我在顶级嵌套模块目录上右键单击-> 属性时，我可以看到 Derived 标志被选中。通过取消选中模块目录上的派生标志（并改为检查每个子模块内目标目录上的派生标志），它修复了开放资源功能。

由于派生标志是从目录继承的，您可能需要检查层次结构中的所有目录以找到“罪魁祸首”。

如果它对插件作者有所帮助，我的顶级模块目录在其名称中包含连字符“-”。也许那是扔掉其中一个插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-25T14:06:25.390

我认为这是maven插件：

[吉拉问题](https://issues.sonatype.org/browse/MNGECLIPSE-1297)

另请参阅 2008 年 7 月 31 日 m2eclipse 的 New and Noteworthy 页面上的注释。

由于 stackoverflow 的限制，删除了其他几个不错的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-05T22:02:00.513

事实上，我认为不知何故这本身就是日食，因为我没有 m2eclipse 或为此使用 maven。

默认情况下，eclipse 使用 /bin 作为目标目录。我的情况类似于在项目中有 maven，因为目标目录更改为 lib/classes 以适应现有项目。

我开始看到类似于此处报告的问题，并且在搜索问题时遇到了这个解决方案。Eclipse 不知何故没有“取消选中”不再派生的 bin 目录，所以我遇到了同样的问题。我尝试复制它，但我不能。

# ant - 如何对自定义 ant 任务进行单元测试？

> ID：181810
> 
> 赞同：6
> 
> 时间：2008-10-08T08:24:47.557
> 
> 标签：ant, junit

我正在编写一个扩展 Task 的自定义 ant 任务。我在任务中使用 log() 方法。我想要做的是在开发任务时使用单元测试，但我不知道如何为要运行的任务设置上下文来初始化任务，就好像它在 ant 中运行一样。

这是自定义任务：

```
public class CopyAndSetPropertiesForFiles extends Task {
    public void execute() throws BuildException {
        log("CopyAndSetPropertiesForFiles begin execute()");

        log("CopyAndSetPropertiesForFiles end execute()");
    }
} 
```

这是单元测试代码：

```
CopyAndSetPropertiesForFiles task = new CopyAndSetPropertiesForFiles();
task.execute(); 
```

当代码作为测试运行时，它会在调用 log 时给出 NullPointerException。

```
java.lang.NullPointerException
    at org.apache.tools.ant.Task.log(Task.java:346)
    at org.apache.tools.ant.Task.log(Task.java:334)
    at uk.co.tbp.ant.custom.CopyAndSetPropertiesForFiles.execute(CopyAndSetPropertiesForFiles.java:40)
    at uk.co.tbp.ant.custom.test.TestCopyAndSetPropertiesForFiles.testCopyAndSetPropertiesForFiles(TestCopyAndSetPropertiesForFiles.java:22) 
```

有人知道提供上下文或存根或类似于任务的东西的方法吗？

谢谢，

抢。

接受 Abarax 的回答。我能够调用 task.setProject(new Project()); 代码现在执行正常（除了控制台中没有出现日志记录 - 至少我可以练习代码:-)）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-09T08:57:31.687

或者更好的是，将任务对象本身与任务内部的逻辑（我们称之为TaskImpl）分离——这样您就可以传入您自己的依赖项（例如，记录器）。然后，不是测试任务对象，而是测试 TaskImpl -> 你可以在记录器中传递它，以及它可能需要完成它的工作的任何其他奇怪的点点滴滴。那么单元测试就是模拟依赖关系的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-09T03:15:14.297

查看 Ant 源代码，这些是两个相关的类：[ProjectComponent](http://www.docjar.com/html/api/org/apache/tools/ant/ProjectComponent.java.html)和[Task](http://www.docjar.com/html/api/org/apache/tools/ant/Task.java.html)

您正在从 Task 调用 log 方法：

```
public void log(String msg) {
     log(msg, Project.MSG_INFO);
} 
```

哪个电话：

```
public void log(String msg, int msgLevel) {
  if (getProject() != null) {
    getProject().log(this, msg, msgLevel);
  } else {
    super.log(msg, msgLevel);
  }
} 
```

由于您没有设置项目，它将调用“super.log（msg，msgLevel）”

```
public void log(String msg, int msgLevel) {
  if (getProject() != null) {
     getProject().log(msg, msgLevel);
  } else {
    // 'reasonable' default, if the component is used without
    // a Project ( for example as a standalone Bean ).
    // Most ant components can be used this way.
    if (msgLevel <= Project.MSG_INFO) {
      System.err.println(msg);
    }
  }
} 
```

看起来这可能是你的问题。您的任务需要一个项目上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-09T17:15:49.300

Ant 有一个方便的类，称为 BuildFileTest，它扩展了 JUnit TestCase 类。您可以使用它来测试构建文件中各个目标的行为。使用它可以处理所有烦人的上下文。

Apache Ant 编写任务教程中有一个[测试任务](http://ant.apache.org/manual/tutorial-writing-tasks.html#TestingTasks)章节描述了这一点。

# python - 如何将 RSS 提要转回 RSS？

> ID：181818
> 
> 赞同：5
> 
> 时间：2008-10-08T08:26:14.730
> 
> 标签：python, rss

根据[feedparser 文档](http://feedparser.org/docs/introduction.html)，我可以将 RSS 提要转化为解析后的对象，如下所示：

```
import feedparser
d = feedparser.parse('http://feedparser.org/docs/examples/atom10.xml') 
```

但我找不到任何显示如何走另一条路的东西；我希望能够操作“d”，然后将结果输出为 XML：

```
print d.toXML() 
```

但是在 feedparser 中似乎没有任何东西可以朝那个方向发展。我是否必须遍历 d 的各种元素，还是有更快的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-10-10T15:33:14.823

Appended 不是一个非常优雅但有效的解决方案 - 它使用 feedparser 来解析提要，然后您可以修改条目，并将数据传递给 PyRSS2Gen。它保留了*大部分*的提要信息（无论如何重要的位，有些东西需要额外的转换，例如 parsed_feed['feed']['image'] 元素）。

我把它放在一起作为我正在摆弄的一个[小提要处理框架](http://github.com/dbr/pyfeedproc)的一部分。它可能有一些用处（它很短 - 完成后总共应该少于 100 行代码......）

```
#!/usr/bin/env python
import datetime

# http://www.feedparser.org/
import feedparser
# http://www.dalkescientific.com/Python/PyRSS2Gen.html
import PyRSS2Gen

# Get the data
parsed_feed = feedparser.parse('http://reddit.com/.rss')

# Modify the parsed_feed data here

items = [
    PyRSS2Gen.RSSItem(
        title = x.title,
        link = x.link,
        description = x.summary,
        guid = x.link,
        pubDate = datetime.datetime(
            x.modified_parsed[0],
            x.modified_parsed[1],
            x.modified_parsed[2],
            x.modified_parsed[3],
            x.modified_parsed[4],
            x.modified_parsed[5])
        )

    for x in parsed_feed.entries
]

# make the RSS2 object
# Try to grab the title, link, language etc from the orig feed

rss = PyRSS2Gen.RSS2(
    title = parsed_feed['feed'].get("title"),
    link = parsed_feed['feed'].get("link"),
    description = parsed_feed['feed'].get("description"),

    language = parsed_feed['feed'].get("language"),
    copyright = parsed_feed['feed'].get("copyright"),
    managingEditor = parsed_feed['feed'].get("managingEditor"),
    webMaster = parsed_feed['feed'].get("webMaster"),
    pubDate = parsed_feed['feed'].get("pubDate"),
    lastBuildDate = parsed_feed['feed'].get("lastBuildDate"),

    categories = parsed_feed['feed'].get("categories"),
    generator = parsed_feed['feed'].get("generator"),
    docs = parsed_feed['feed'].get("docs"),

    items = items
)

print rss.to_xml() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T09:25:41.007

如果您要阅读 XML 提要，修改它然后再次输出，[主要 python wiki 上有一个页面表明 RSS.py 库可能支持您所追求的](http://wiki.python.org/moin/RssLibraries)（它读取大多数 RSS 并且能够输出 RSS 1.0)。不过我没仔细看。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T08:32:52.267

```
from xml.dom import minidom

doc= minidom.parse('./your/file.xml')
print doc.toxml() 
```

唯一的问题是它不从互联网下载提要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T09:09:29.353

作为一种制作提要的方法，[PyRSS2Gen](http://www.dalkescientific.com/Python/PyRSS2Gen.html)怎么样？:)

我没有玩过 FeedParser，但你试过只做 str(yourFeedParserObject) 吗？我经常对具有**str**方法以将对象输出为文本的各种模块感到惊讶。

**[编辑]**刚刚尝试了 str() 方法，但它不适用于这个。不过值得一试；-)

# vb.net - VisualBasic Month 函数不一致

> ID：181829
> 
> 赞同：3
> 
> 时间：2008-10-08T08:31:41.693
> 
> 标签：vb.net

我正在使用 VB.NET 的 Web 应用程序中工作。里面还混有VisualBasic代码，特别是VB的Date变量和Month函数。

问题是这部分：

```
Month("10/01/2008") 
```

在服务器上，我得到 10（十月）作为月份（这应该是正确的）。在我的机器上，我得到 1（一月）（这应该是错误的）。

我的两个同事（在他们自己的机器上）得到不同的答案，一个得到 1，另一个得到 10。

**问题是，为什么会这样？**

最后，我可以通过使用 .NET 的 DateTime 的 Parse（或 ParseExact）函数来强制所有内容为“dd/MM/yyyy”格式来解决问题。这行得通。我只是想知道为什么会有不一致的地方。

额外信息：我知道 Month 函数的参数应该是 Date 变量。代码使用字符串作为参数，Option Strict 是关闭的，开发者主要是让 VB 自己做转换的事情。（遗留代码维护有很大的惯性……）

如果有帮助，服务器上的 Microsoft.VisualBasic.dll 版本是 7.10.6310.4（在 Framework 文件夹 v1.1.4322 下）。我（和我的 2 位同事）机器上的版本是 7.10.6001.4。

编辑：所有机器的区域设置已设置为 dd/MM/yyyy 格式（短日期格式）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T08:36:39.280

这通常与区域设置有关，更具体地说与日期/时间格式有关。如果您设置这些格式以使它们在您正在测试的机器上都相同，那么结果应该是一致的。

恕我直言，您使用 ParseExact 的想法绝对是更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T08:43:16.210

这是因为运行时必须将您的给定值“10/01/2008”这确实是一个字符串隐式转换为 DateTime 数据类型。

将字符串转换为日期或反之时，字符串格式取决于 windows 的区域设置。

请参阅msdn 上的[此链接](http://msdn.microsoft.com/en-us/library/aa292073.aspx)。

在[本文中](http://msdn.microsoft.com/en-us/library/3eaydw6e(VS.80).aspx)，一种指定日期文字的方法与您的语言环境设置无关：

只需用符号 # 将日期括起来并以 mm/dd/yyyy 的形式指定：

所以代码

```
Month(#10/01/2008#) 
```

应该在任何机器上给你答案 10。

在那篇 msdn 文章中给出了另外两个解决方法：

**1.使用带有预定义日期/时间格式的格式函数**

> 要将日期文字转换为您的语言环境的格式或自定义格式，请将文字提供给格式函数，指定预定义的日期/时间格式（格式函数）或用户定义的日期/时间格式（格式函数）。下面的示例演示了这一点。
> 
> MsgBox("格式化日期为" & Format(#5/31/1993#, "dddd, d MMM yyyy"))

**2\. 使用 DateTime-Class Constructor 构造正确的 DateTime 值**

> 或者，您可以使用 DateTime 结构的重载构造函数之一来组合日期和时间值。下面的示例创建一个值来表示 1993 年 5 月 31 日下午 12:14。
> 
> 暗淡 dateInMay 作为新 System.DateTime(1993, 5, 31, 12, 14, 0)

# java - 计算性能

> ID：181840
> 
> 赞同：2
> 
> 时间：2008-10-08T08:35:51.747
> 
> 标签：java, performance, api, profiling

我需要找出一个函数计算应用程序/函数性能所花费的时间。他们是否有任何开源 Java API 可以做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T08:40:19.320

您很幸运，因为有很多[开源 Java 分析器](http://java-source.net/open-source/profilers)可供您使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T08:40:08.807

看看 Eclipse 的官方[TPTP 插件](http://www.eclipse.org/tptp/)。这几乎可以满足您所描述的所有内容，并且（frikkin'）更多。我真的可以推荐它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T08:40:47.463

我不知道是否有 APIS，但您通常会使用 currenttimemillis 函数...您在开始时测量时间，然后在执行结束时再次测量时间，瞧！！！你得到了你的时间减去

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T10:55:22.590

Hiperic 提供了一个 GPLv2 许可工具，用于监控各种系统资源，称为 SIGAR（系统信息收集器和报告器）。

该工具用于在 GridGain（网格计算框架）中提供自适应负载平衡等功能。

[http://www.hyperic.com/products/sigar.html](http://www.hyperic.com/products/sigar.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T12:29:23.430

看看这个问题：[您使用哪种 java 分析工具，您认为哪种工具最好？](https://stackoverflow.com/questions/181568/which-java-profiling-tool-do-you-use-and-which-tool-you-think-is-the-best)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-05T00:18:47.360

如果它只是您关心的一个功能，请围绕它进行百万次迭代循环，并用秒表计时。然后秒转换为微秒。

另一方面，如果你想加快速度，你只需要[这个](http://www.wikihow.com/Optimize-Your-Program%27s-Performance)。

# java - 如何从 Java 过渡到 Clojure？

> ID：181842
> 
> 赞同：27
> 
> 时间：2008-10-08T08:36:07.487
> 
> 标签：java, functional-programming, clojure, use-case

在发现[Clojure](http://clojure.org)之后，我花了几天时间沉浸其中。

哪些项目类型适合于 Java 而不是 Clojure，反之亦然，以及它们的组合？

在 Clojure 之前您从未尝试过的程序示例有哪些？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-08T13:39:05.443

Clojure 非常适合[并发编程](http://clojure.org/concurrent_programming)。它为处理线程提供了如此出色的工具，例如软件事务内存和可变引用。

作为 Western Mass Developer's Group 的演示，Rich Hickey 做了一个蚁群模拟，其中每只蚂蚁都是自己的线程，所有变量都是不可变的。即使有大量线程，事情也很好。这不仅是因为 Rich 是一位了不起的程序员，还因为他在编写代码时不必担心锁定问题。你可以在这里查看他[关于蚁群的介绍](http://blip.tv/file/812787)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-10-08T13:40:47.340

如果您打算尝试并发编程，那么我认为 clojure 比您从 Java 中获得的开箱即用的要好得多。查看此演示文稿以了解原因：

[http://blip.tv/file/812787](http://blip.tv/file/812787)

我在博客上记录了我使用 Clojure 的前 20 天

[http://loufranco.com/blog/files/category-20-days-of-clojure.html](http://loufranco.com/blog/files/category-20-days-of-clojure.html)

我从 SICP 讲座开始，然后构建了一个平行的素数筛。我也玩过宏。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-10-10T07:08:11.970

> **哪些项目类型适合使用 Java 而不是 Clojure，反之亦然，或结合使用？**
> 
> 需要 GUI 构建工具（例如 Netbeans 中的 Matisse）的项目可能仍需要 Java。在 Java 中完成的任何事情都可以在 Clojure 中轻松完成，如果需要，可以使用代理和 gen-class，或者只是根据需要访问 Java（.、doto、new 等）。这允许 Clojure 项目轻松使用 Java 库或遗留 Java 代码。
> 
> **在 Clojure 之前，您从未尝试过哪些程序？**
> 
> 在我找到 Clojure 之前，我正在考虑一个需要 JDBC 的项目，该项目将在 servlet 容器中运行，并且我预计会进行大量迭代开发，因为不清楚哪些方法适用于我需要分析的数据。我把它放在次要位置，因为我没有时间或耐心进行 Java 所需的编译-调试-部署-验证循环。我现在已经在 Clojure 中编写了应用程序，我很高兴能够轻松地进行动态更改并能够立即检查结果。更不用说无锁编程的乐趣和从开发（和重构）类层次结构中解放出来的乐趣了。
> 
> **-**通过*clojure@googlegroups.com*邮件列表“MikeM”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-14T10:38:46.023

> 哪些项目类型适合于 Java 而不是 Clojure，反之亦然，以及它们的组合？

如果你想开发一个供 Java 和 Clojure 使用的框架，我发现用 Java 编写主要抽象（接口和基类）比用 Clojure 编写它们更可取（我发现 Clojure`gen-class`有点乏味，而且而是使用`proxy`）。

如果您是 Hibernate 或任何其他大量使用 Java 注释而不提供编程替代方案的框架的用户，那么您将遇到一些麻烦，因为使用 Clojure 的数据结构模拟带注释的 POJO 并非易事。

除此之外，我还没有遇到过 Clojure 比 Java 更不适合的用例。当然，您必须应对静态类型的丢失，这起初感觉有些令人不安，但往往会消失。

# wpf - 在具有超过 1000 个图像项的 WPF 列表框中，缩放图像变慢

> ID：181845
> 
> 赞同：13
> 
> 时间：2008-10-08T08:37:26.580
> 
> 标签：wpf, image, listbox, performance

我在开发照片查看器应用程序时遇到了问题。我使用 ListBox 来显示图像，它包含在 ObservableCollection 中。我将 ListBox 的 ItemsSource 绑定到 ObservableCollection。

```
 <DataTemplate DataType="{x:Type modeldata:ImageInfo}">
        <Image 
            Margin="6"
            Source="{Binding Thumbnail}"
            Width="{Binding ZoomBarWidth.Width, Source={StaticResource zoombarmanager}}"
            Height="{Binding ZoomBarWidth.Width, Source={StaticResource zoombarmanager}}"/>
  </DataTemplate>

<Grid DataContext="{StaticResource imageinfolder}">
    <ScrollViewer
        VerticalScrollBarVisibility="Auto" 
        HorizontalScrollBarVisibility="Disabled">
        <ListBox Name="PhotosListBox"
            IsSynchronizedWithCurrentItem="True"
            Style="{StaticResource PhotoListBoxStyle}" 
            Margin="5"
            SelectionMode="Extended" 
            ItemsSource="{Binding}" 
           />
    </ScrollViewer> 
```

我还将 ListBox 中的 Image'height 与滑块绑定。（滑块的值也绑定到 zoombarmanager.ZoomBarWidth.Width）。但是我发现如果集合变得更大，例如：包含超过 1000 张图像，如果我使用滑块更改 iamges 的大小，它会变得有点慢。我的问题是。1\. 为什么会变慢？成为它尝试缩放每个图像，或者它只是因为 notify("Width") 被调用超过 1000 次。2.有什么方法可以解决这类问题，让它更快。

PhotoListBoxStyle 是这样的：

```
 <Style~~ TargetType="{x:Type ListBox}" x:Key="PhotoListBoxStyle">
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBox}" >
                    <WrapPanel 
                        Margin="5" 
                        IsItemsHost="True" 
                        Orientation="Horizontal" 
                        VerticalAlignment="Top"                             
                        HorizontalAlignment="Stretch" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style~~> 
```

但是如果我使用上面的样式，我必须在 ListBox 之外使用 ScrollViewer，否则我不知道如何获得平滑滚动的滚动条，并且包装面板似乎没有默认滚动条。有人帮忙吗？据说带有滚动查看器的列表框性能很差。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-09T06:46:34.337

问题是您的新布局面板是 WrapPanel，它不支持虚拟化！可以创建自己的虚拟化 WrapPanel...[在这里阅读更多](http://jerryclin.wordpress.com/2008/02/06/making-a-virtualizing-wrappanel/)

[还可以在此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/b077f10c-e600-493f-b526-f2996ce6cffc/)阅读有关其他问题的更多信息，例如实现 IScrollInfo

我还强烈建议您不要仅仅为了替换布局面板而创建新的控件模板...而是执行以下操作：

```
<ListBox.ItemsPanel>
   <ItemsPanelTemplate>
      <WrapPanel Orientation="Horizontal"/>
   </ItemsPanelTemplate>
</ListBox.ItemsPanel> 
```

这样做的好处是您不需要将列表框包装在滚动查看器中！

[**更新**] 另请阅读Josh Smith 的[这篇](http://www.codeproject.com/KB/WPF/CustomListBoxLayoutInWPF.aspx)文章！要使 WrapPanel 换行...您还必须记住禁用水平滚动...

```
<Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T08:56:59.647

1.  我不熟悉这个组件，但一般来说，列表框一次可以显示的项目数量会受到限制。

2.  解决此类问题的一种方法是将控件中加载的图像数量保持在控件可以在可接受的性能水平上显示的数量之内。执行此操作的两种技术是分页或动态加载。

在分页中，您添加控件以在离散的图片块之间切换，例如，一次 100 个，带有前进和后退箭头，类似于导航数据库记录。

使用动态加载，您可以在后台实现分页，当用户滚动到最后时，应用程序会自动加载下一批图片，甚至可能删除一批旧图片以保持合理的响应性。发生这种情况时可能会有一个小的停顿，并且可能需要进行一些工作以将控件保持在正确的滚动点，但这可能是一个可以接受的折衷方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T13:45:06.833

部分问题是它正在加载每个中的完整图像。您必须通过在 上设置或属性，使用`IValueConverter`以缩略图大小打开每个图像。这是我在我的一个项目中使用的一个例子......`DecodePixelWidth``DecodePixelHeight``BitmapImage`

```
class PathToThumbnailConverter : IValueConverter {
    public int DecodeWidth {
        get;
        set;
    }

    public PathToThumbnailConverter() {
        DecodeWidth = 200;
    }

    public object Convert( object value, Type targetType, object parameter, System.Globalization.CultureInfo culture ) {
        var path = value as string;

        if ( !string.IsNullOrEmpty( path ) ) {

            FileInfo info = new FileInfo( path );

            if ( info.Exists && info.Length > 0 ) {
                BitmapImage bi = new BitmapImage();

                bi.BeginInit();
                bi.DecodePixelWidth = DecodeWidth;
                bi.CacheOption = BitmapCacheOption.OnLoad;
                bi.UriSource = new Uri( info.FullName );
                bi.EndInit();

                return bi;
            }
        }

        return null;
    }

    public object ConvertBack( object value, Type targetType, object parameter, System.Globalization.CultureInfo culture ) {
        throw new NotImplementedException();
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T13:56:32.147

我建议您不要绑定每个单独图像的 Width/Height 属性，而是在 ListBox 的 ItemsPanel 上[绑定一个](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemspanel.aspx)[LayoutTransform](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)。就像是：

```
<ListBox.ItemsPanel>
   <ItemsPanelTemplate>
      <StackPanel>
        <StackPanel.LayoutTransform>
           <ScaleTransform
               ScaleX="{Binding Path=Value, ElementName=ZoomSlider}"
               ScaleY="{Binding Path=Value, ElementName=ZoomSlider}" />
        </StackPanel.LayoutTransform>
      </StackPanel>
   </ItemsPanelTemplate>
</ListBox.ItemsPanel> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T10:10:40.993

尝试使用 VirtualizingStackPanel.IsVirtualizing="True" 附加属性来虚拟化您的 stackpael。这应该会提高性能。

在滚动查看器中使用包含许多项目的列表框是 wpf 中另一个已知的性能问题。如果可以，请尝试摆脱滚动查看器。

如果您的项目模板有点复杂，您应该考虑使用回收虚拟化模式。这告诉您的列表框重用现有对象，而不是一直创建新对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-08T10:06:49.317

您的 PhotoListBoxStyle 样式是什么样的？如果它正在更改 ListBox 的 ItemsPanelTemplate，那么您的 ListBox 很可能没有使用 VirtualizingStackPanel 作为其底层列表面板。许多项目的非虚拟化列表框要慢得多。

# open-source - 商业应用中的开源控件帮助

> ID：181850
> 
> 赞同：2
> 
> 时间：2008-10-08T08:40:10.473
> 
> 标签：open-source, components

在商业应用程序中包含一组根据[Mozilla 公共许可证发布的可视化组件有什么影响。](http://www.mozilla.org/MPL/MPL-1.1.html)

我有什么义务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T08:50:45.367

我在这里找到了 Frank Hecker 对 MPL（和其他人）的很好的分析：

[http://hecker.org/writings/setting-up-shop](http://hecker.org/writings/setting-up-shop)（搜索“Mozilla Public License”）

这几乎总结了它：

> 对于被视为一组源文件的 MozPL 版源代码，对原始源文件的修改也被认为属于 MozPL，新的源文件包含原始源文件的摘录也是如此。此类修改或新文件必须按照与原始文件相同的条款获得许可，特别是必须以源代码形式免费公开提供。

...

> 因此，最初在 MozPL 下发布的开源产品可以使用专有代码扩展以创建新的专有产品，只要专有代码是独立的（即，在单独的文件中）并使用定义的 API 与开源代码交互.

但像往常一样，请仔细阅读并咨询您的律师。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T09:08:02.773

唯一的问题是，如果您修改组件，您也必须在 Mozilla Public License 下发布它们

# c# - 模拟参数的属性更改 - 使用 Moq

> ID：181853
> 
> 赞同：3
> 
> 时间：2008-10-08T08:40:47.743
> 
> 标签：c#, tdd, mocking, moq

我正在使用 Moq 来模拟我的存储库层，以便进行单元测试。

当数据库插入成功时，我的存储库层插入方法会更新我的实体的 Id 属性。

如何配置 moq 以在调用 Insert 方法时更新实体的 Id 属性？

存储库代码：-

```
void IAccountRepository.InsertAccount(AccountEntity account); 
```

单元测试：-

```
[TestInitialize()]
public void MyTestInitialize() 
{
    accountRepository = new Mock<IAccountRepository>();
    contactRepository = new Mock<IContactRepository>();
    contractRepository = new Mock<IContractRepository>();
    planRepository = new Mock<IPlanRepository>();
    generator = new Mock<NumberGenerator>();

    service = new ContractService(contractRepository.Object, accountRepository.Object, 
                    planRepository.Object, contactRepository.Object, generator.Object);   
}

[TestMethod]
public void SubmitNewContractTest()
{
    // Setup Mock Objects
    planRepository
        .Expect(p => p.GetPlan(1))
        .Returns(new PlanEntity() { Id = 1 });

    generator
        .Expect(p => p.GenerateAccountNumber())
        .Returns("AC0001");

    // Not sure what to do here? 
    // How to mock updating the Id field for Inserts?
    //                                                 
    // Creates a correctly populated NewContractRequest instance
    NewContractRequest request = CreateNewContractRequestFullyPopulated();

    NewContractResponse response = service.SubmitNewContract(request);
    Assert.IsTrue(response.IsSuccessful);
} 
```

ContractService 类（WCF 服务合同）的实现片段。

```
AccountEntity account = new AccountEntity()
{
    AccountName = request.Contact.Name,
    AccountNumber = accountNumber,
    BillingMethod = BillingMethod.CreditCard,
    IsInvoiceRoot = true,
    BillingAddressType = BillingAddressType.Postal,
    ContactId = request.Contact.Id.Value
};

accountRepository.InsertAccount(account);
if (account.Id == null)
{
    // ERROR
} 
```

如果这些信息可能有点缺乏，我深表歉意。我今天才开始学习起订量和模拟框架。交流

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-08T08:45:47.873

您可以使用 Callback 方法来模拟副作用。就像是：

```
accountRepository
    .Expect(r => r.InsertAccount(account))
    .Callback(() => account.ID = 1); 
```

这是未经测试的，但它是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T23:37:59.400

我不确定这将如何工作，因为帐户是在方法内部创建的，所以当我将 ID 的值设置为 1 时，它不是我要引用的实例。

也许我的设计存在缺陷，我应该在 IAccountRepository.InsertAccount 实现中检查 ID > 0，如果没问题，然后返回一个布尔值。虽然那时我在插入一个具有需要插入的相关对象（并生成一个 Id）的帐户时遇到了问题。

我发现这是我的问题的答案

```
accountRepository
    .Expect(p => p.InsertAccount(It.Is<AccountEntity>(x => x.Id == null)))
    .Callback<AccountEntity>(a => a.Id = 1); 
```

谢谢。

# c# - 将 Prolog 与 C# 集成

> ID：181855
> 
> 赞同：31
> 
> 时间：2008-10-08T08:41:31.797
> 
> 标签：c#, prolog, integrate

有谁知道集成 Prolog 和 C# 的好方法（最好是免费的）？

我希望创建一个 Prolog dll 或类似的从我的托管代码调用，并在所有处理完成后检索答案。我希望它主要是单面的（c# 调用 Prolog）。

我看过[这个](https://stackoverflow.com/questions/130097/real-world-prolog-usage)关于 Prologs 真实世界使用的问题，但我想知道是否有人对 c# 和 Prolog 有任何经验？还是不错的教程/文章？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T09:27:18.117

你可以看看[Yield Prolog](http://yieldprolog.sourceforge.net/)。

Yield Prolog 使用`yield`C#（以及 Python 和 JavaScript）中的关键字和自定义`Variable`类来模拟 Prolog 机器。这样，您就可以使用自己喜欢的语言获得 Prolog API。您无需将主要语言与 P# 或类似项目联系起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-12-12T23:45:50.580

C#Prolog，[可从 SourceForge 获得](http://sourceforge.net/projects/cs-prolog/)（用 C# 编写的 Prolog 解释器）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-12T09:32:05.247

它不是免费的，但[Sicstus Prolog](http://www.sics.se/isl/sicstuswww/site/highlights.html)允许连接到 C# 和 Java

这是我们公司使用的 Prolog 实现，它非常快速且有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T08:49:11.470

也许[P#](http://www.dcs.ed.ac.uk/home/jjc/psharp/psharp-1.1.3/dlpsharp.html)对你有用

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-02T23:33:12.757

如果你的 prolog 是 swi-prolog，你有两个选择。较旧且基本上已弃用的版本是[http://www.swi-prolog.org/contrib/CSharp.html](http://www.swi-prolog.org/contrib/CSharp.html)

更新、更好的一个是 swicli。 [http://www.swi-prolog.org/contrib/NetMono.html](http://www.swi-prolog.org/contrib/NetMono.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-12T12:35:32.553

您可以使用 ECLiPSe Prolog。我已经将它与 VC8 集成。最好使用 VC8 而不是 C#。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-28T16:18:01.160

如果使用完整的 prolog 实现进行部署不是问题，您可以使用 SWI-Prolog 并通过 XPCE 和套接字与其通信。

# reporting-services - Reporting Services 2008：导出而不是重新生成？

> ID：181861
> 
> 赞同：1
> 
> 时间：2008-10-08T08:44:03.947
> 
> 标签：reporting-services

有没有办法在报告服务中缓存生成的报告，以便我以后可以将其导出为其他格式？

即，目前，我正在生成报告的 HTML 版本（通过 web 服务），如果用户要求提供 excel 文件，我会再次生成它，这次是在 excel 中。问题是，在此期间数据可能会发生变化，HTML 和 excel 版本可能会有所不同。另一个明显的缺点是报告正在重新生成，而只需更改格式就足够了。

所以问题是，报告服务是否支持生成数据的某种缓存机制以及以后导出为指定格式？我很好奇，报表查看器控件中的“导出”按钮是如何实现的——它实际上是重新生成报表，还是以某种方式导出它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T08:53:20.200

如果它与 SSRS 2005 相同，那么在您的报表服务器门户上的每个单独的报表下都会有一个“属性”选项卡，并且此选项卡下的选项之一将是“执行”。

第一个执行选项是使用最新数据，但子选项允许您按计划将报告缓存一段时间。

第二个选项允许您从快照自动生成报告，同样带有调度选项。

我不明白他们为什么会在 2008 年改变这一点，但我不明白为什么微软会做很多事情......

# oop - 练习OOP设计技巧的网站

> ID：181868
> 
> 赞同：10
> 
> 时间：2008-10-08T08:48:45.763
> 
> 标签：oop

是否有可用于练习 OOP 设计技能的网站/问题列表？假设我是一个熟悉面向对象设计理论的同事毕业，这些问题应该给我一个锻炼理论和提高我的软件设计技能的机会。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-08T08:55:19.743

如果您想尝试一种新的方法或其他东西，请尝试为您制作一个小型应用程序，或者仅供内部使用。例如：时间表应用程序、任务管理器、杂货清单组织器等。确保这是一个*真正的*问题，所以你不得不处理*真正的*需求。我发现，如果您只是四处玩耍并尝试一下，当某些部分不能立即起作用时，您往往会忽略它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-20T00:14:07.403

[CodeKata](http://codekata.pragprog.com/)是一个开始的地方。

它不是一个网站，但 Head First Design Patterns 有许多问题需要解决。

# iphone - Xcode Performance Tool 认为 iPhone 模拟器有摄像头

> ID：181886
> 
> 赞同：3
> 
> 时间：2008-10-08T08:58:19.113
> 
> 标签：iphone, xcode, profiling

当我在调试器或独立的模拟器中运行此代码时

```
[UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera] 
```

正如预期的那样，它告诉我相机不可用（返回 NO）。

但是，如果我在 Performance Tool 的模拟器中运行相同的代码，它会返回 YES！我的代码（在设备上运行良好）然后继续在模拟器中显示相机视图。如果我尝试捕获图像，我会收到一条控制台消息

> 照片只能在硬件上拍摄

这意味着如果我想在模拟器上分析我的应用程序（如果它在设备上运行会不会很好！！）我需要更改代码以便它显示正确的视图（即不是相机的视图！ ）。

从谷歌搜索来看，这似乎不是一个众所周知的问题。有没有其他人经历过它和/或有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T09:02:31.817

显而易见的解决方法是添加一个

```
#if TARGET_IPHONE_SIMULATOR 
```

但这很恶心。首先要做的`isSourceTypeAvailable`就是避免这种事情。

# ruby-on-rails - 通过 Attachment Fu 插件调用 has_attachment 时动态更改 :path_prefix

> ID：181889
> 
> 赞同：0
> 
> 时间：2008-10-08T09:01:08.077
> 
> 标签：ruby-on-rails, ruby, attachment-fu

默认情况下，[附件 Fu](http://agilewebdevelopment.com/plugins/attachment_fu)将上传的文件存储在`"public/#{table_name}"`. 我想将其修改为类似`"public/#{table_name}/#{site_id}"`，`site_id`模型的属性在哪里。请注意，我尝试过使用`self.site_id`但都失败了。

```
has_attachment :storage => :file_system, 
               :max_size => 25.megabytes,
               :path_prefix => "public/#{table_name}/#{site_id}",
               :thumbnails => { 
                 :large => '256x256>', 
                 :medium => '128x128>', 
                 :small => '64x64>' 
               } 
```

我收到“未定义的局部变量或方法 site_id”错误消息。从工作中删除`#{site_id}`组件`:path_prefix`并运行该`initialize`方法。我可以`site_id`按预期访问。

我有一个`initialize`看起来像这样的方法：

```
def initialize(site_id = nil)
  super(nil)
  self.site_id ||= site_id
end 
```

我通过 Rails 控制台实例化对象，如下所示：

```
r = Resource.new(100) 
```

该`has_attachment`方法是否在我的`initialize`方法之前运行？`:path_prefix`实例化模型时如何将参数动态传递给？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-09T01:28:59.317

`site_id`是一个动态值，所以你不能在类中设置它。您需要在模型中重新定义#full_filename。当前的定义如下所示：

```
def full_filename(thumbnail = nil)
  file_system_path = (thumbnail ? thumbnail_class : self).attachment_options[:path_prefix].to_s
  File.join(RAILS_ROOT, file_system_path, *partitioned_path(thumbnail_name_for(thumbnail)))
end 
```

将最后一行更改为：

```
File.join(RAILS_ROOT, file_system_path, site_id.to_s, *partitioned_path(thumbnail_name_for(thumbnail))) 
```

# linux - 从带有 libusb 的设备读取时出现问题

> ID：181892
> 
> 赞同：4
> 
> 时间：2008-10-08T09:04:06.887
> 
> 标签：linux, usb, libusb

情况是这样的：我有一个带有两个端点的 USB 设备（我正在尝试与之通信的自定义设备），一个写入设备，一个从设备读取。两者都是批量转移。每个通信事务都采用以下形式：（1）向设备写入命令（2）读取响应。我正在使用 libusb（版本 0.1 而不是 1.0 beta）来实际执行通信。

在 Windows 上，一切都很好。我可以连接设备，声明接口并愉快地通信。但是，在 Ubuntu（标准 Hardy 桌面安装）中，虽然我可以连接到设备并对其进行写入，但所有读取操作都会失败，并从 libusb 报告错误“提交 URB：无效参数”（错误代码 -22）。

如果我检查 /var/log/messages 我看到在尝试读取的同时记录了一条警告消息：“sysfs: duplicate filename 'usbdev4.3_ep81' can not be created” - 这与设备相符（确实是在那辆公共汽车上，它是我试图读取的端点 81）。

所以...有人在使用 libusb 时看到过类似的问题，或者知道如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-13T17:42:47.307

原来这是设备本身描述符中的错误配置。lsusb -v 显示了一个从未使用过的额外接口，它有一个同步端点 0x81。由于这从未使用过（据我所知，从未经过测试，因此很可能甚至没有正确定义）我将它从设备描述符中完全删除（在固件中）。

现在我有了一个可以正常工作的设备。为什么 linux 拒绝从设备读取但 Windows 运行良好我不知道，但它肯定让我大吃一惊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-09T16:47:41.160

我不得不对 udev 规则进行一些修改，以使创建的设备具有正确的权限，以便 libusb 工作。像这样：

```
SUBSYSTEM=="usb" ATTRS{idVendor}=="0a81", ATTRS{idProduct}=="0701", \
                MODE="0666" SYMLINK+="missile_launcher" 
```

（这是我正在为其编写驱动程序的 USB 导弹发射器。

此外，此代码段还需要不与内核冲突。

```
if(LIBUSB_HAS_DETACH_KERNEL_DRIVER_NP)
{
    // Detach kernel driver (usbhid) from device interface. (Linux hack)
    usb_detach_kernel_driver_np(launcher, 0);
    usb_detach_kernel_driver_np(launcher, 1);
} 
```

我不确定这与您的问题有何关系，但至少可能涉及两个可能的故障点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-09T00:57:37.460

我已经有一段时间没有使用 libusb 了——但是 sysfs 错误表明这很可能是内核问题，而不是 libusb 问题，所以我会首先尝试追踪该问题。（在您确定内核与设备正确通信之前，尝试使用 libusb 并没有多大意义）。

补丁是否在[http://kerneltrap.org/mailarchive/linux-usb-devel/2007/10/17/345922](http://kerneltrap.org/mailarchive/linux-usb-devel/2007/10/17/345922)适用于您的内核？（如果是这样，它可以解决问题吗？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-09T16:29:14.053

你可以试试[WinDriver](http://www.jungo.com/st/windriver_usb_pci_driver_development_software.html)，它是一个商业工具，但有免费的全功能评估（不知何故有时间限制）。您可以使用 WinDriver 检查，如果问题可重现，则可能是设备或您的协议故障。您没有提供足够的信息来确定或分析。

# mysql - MySQL - 强制不使用缓存来测试查询速度

> ID：181894
> 
> 赞同：369
> 
> 时间：2008-10-08T09:05:11.843
> 
> 标签：mysql

我正在测试 MySQL 中一些查询的速度。数据库正在缓存这些查询，这使我在测试这些查询的速度时很难获得可靠的结果。

有没有办法禁用查询缓存？

系统：Linux 虚拟主机上的 MySQL 4，我可以访问 PHPMyAdmin。

谢谢

* * *

## 回答 #1

> 赞同：573
> 
> 时间：2008-10-08T09:09:46.173

尝试在查询中使用[SQL_NO_CACHE](https://dev.mysql.com/doc/refman/5.7/en/query-cache-in-select.html) (MySQL 5.7) 选项。（MySQL 5.6 用户点击[这里](https://dev.mysql.com/doc/refman/5.6/en/query-cache-in-select.html)）

例如。

```
SELECT SQL_NO_CACHE * FROM TABLE 
```

这将停止 MySQL 缓存结果，但是请注意其他操作系统和磁盘缓存也可能会影响性能。这些更难解决。

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2011-07-15T12:07:53.423

仅影响当前连接的另一种选择：

```
SET SESSION query_cache_type=0; 
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2011-06-20T08:19:17.017

对当前日期/时间的任何引用都将禁用该选择的查询缓存：

```
SELECT *,NOW() FROM TABLE 
```

请参阅“使用 MySQL 查询缓存的先决条件和注意事项”@ [http://dev.mysql.com/tech-resources/articles/mysql-query-cache.html](http://dev.mysql.com/tech-resources/articles/mysql-query-cache.html)

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2011-03-24T07:45:20.693

还有配置选项：query_cache_size=0

> 要在服务器启动时禁用查询缓存，请将 query_cache_size 系统变量设置为 0。通过禁用查询缓存代码，没有明显的开销。如果您从源代码构建 MySQL，则可以通过使用 --without-query-cache 选项调用配置来完全从服务器中排除查询缓存功能。

见[http://dev.mysql.com/doc/refman/5.1/en/query-cache.html](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2008-10-10T06:51:48.163

您还可以运行以下命令来重置查询缓存。

```
RESET QUERY CACHE 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2009-08-11T00:47:12.747

一个问题

```
SELECT SQL_NO_CACHE * FROM TABLE 
```

方法是它似乎只防止查询结果被缓存。但是，如果您正在查询一个正在与您要测试的查询一起使用的数据库，那么其他客户端可能会缓存您的查询，从而影响您的结果。我正在继续研究解决这个问题的方法，如果我想出一个，我会编辑这篇文章。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2013-11-01T12:45:03.127

我会使用以下内容：

```
SHOW VARIABLES LIKE 'query_cache_type';
SET SESSION query_cache_type = OFF;
SHOW VARIABLES LIKE 'query_cache_type'; 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-01-14T13:20:01.790

在查询中使用用户定义的变量会使查询结果无法缓存。我发现它比使用`SQL_NO_CACHE`. 但是你应该把变量放在变量设置不会严重影响性能的地方：

```
SELECT t.*
FROM thetable t, (SELECT @a:=NULL) as init; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-17T12:53:18.160

如果要禁用查询缓存，请将 mysql 配置文件中的 'query_cache_size' 设置为 0。如果其设置为 0 mysql 将不会使用查询缓存。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-12-02T12:36:21.897

虽然有些答案很好，但有一个重要的警告。

mysql 查询可能会被阻止被缓存，但它不会阻止您的底层操作系统缓存磁盘访问到内存。对于某些查询来说，这可能会大大降低速度，尤其是当它们需要从旋转磁盘中提取数据时。

因此，虽然使用上述方法很好，但我也会尝试每次使用一组不同的数据/范围进行测试，这可能不会从磁盘拉到磁盘/内存缓存中。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-15T21:23:59.667

您必须更改 SQL 字符串。因为 SQL 字符串是缓存键。例如，为 SQL 注释添加时间戳。

PHP的功能：

```
function db_RunSQL($SQL, $NoCacheMode=false)
{
$SQL = (($NoCacheMode) ? '/*'.time().'*/ ' : '') . $SQL;
return mysqli_query(db_SavedConnect(), $SQL);
} 
```

# c# - 是否可以将 ServicePointManager 与 Webbrowser 控件一起使用？

> ID：181897
> 
> 赞同：3
> 
> 时间：2008-10-08T09:07:21.263
> 
> 标签：c#, browser, certificate

我想禁用从一个带有“不受信任的证书”的 HTTPS 站点的登录页面获得的“警报窗口”。

ServicePointManager 用于 WebRequest/WebResponse：

> ```
> > public static bool
> > ValidateServerCertificate(object
> > sender, X509Certificate certificate,
> > X509Chain chain, SslPolicyErrors
> > sslPolicyErrors) {
> >     return true; }
> > 
> > ServicePointManager.ServerCertificateValidationCallback
> > = new RemoteCertificateValidationCallback(ValidateServerCertificate); 
> ```

**但是如何将它与 Webbrowser 控件一起使用？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T11:10:55.413

ServicePointManager 用于托管代码；WebBrowser 是 shdocvw 的包装器，因此几乎可以肯定会有一个非常不同的编程模型。

*如果*您可以自动执行此操作（我不确定您是否可以），我希望必须参考 COM 版本才能获得完整的 API（请参阅：AxWebBrowser）。WebBrowser 仅公开了完整功能的一个对 .NET 友好的子集 - 足以完成最常见的工作。

另一种选择可能是自己获取数据（WebClient / WebRequest / 等），然后简单地将 html 推送到 WebBrowser - 但这会弄乱外部链接等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T13:58:44.170

正如 Marc Gravell 所指出的，我不认为可以在 WebBrowser 控件中使用 ServicePointManager 或 ServicePoint 类，但您也不需要这样做。

请参阅我对您提出原始问题的其他帖子的回答。

# apache - apache + lighttpd 前端代理概念

> ID：181898
> 
> 赞同：5
> 
> 时间：2008-10-08T09:07:39.467
> 
> 标签：apache, lighttpd

为了减轻 Apache 的负载，人们经常建议使用 lighttpd 来提供静态内容。

例如[http://www.linux.com/feature/51673](http://www.linux.com/feature/51673)

在此设置中，Apache 通过 mod_proxy 将静态内容请求传递回 lighttpd，同时自己处理动态请求。

我的问题是：这如何减少服务器的负载？由于您仍然为每个传入的请求生成一个 apache 进程，这对负载有何积极影响？从我可以看到，通过 lighttpd 代理其请求的 Apache 进程的大小与它为文件本身提供服务时一样大。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-10-09T01:48:01.197

*在 Apache后面*运行 Lighttpd来提供静态文件对我来说确实是个脑残。Apache 仍然需要解包 HTTP 数据包并通过其解析树解析请求，发送代理请求，然后 Lighttpd 必须重新解包，点击文件系统并通过 Apache 将文件发送回。我从未听说有人在生产中使用这样的设置。

您将看到，人们使用像[Nginx](http://nginx.net/)这样的轻量级网络服务器作为*前端*服务器来为 Apache 提供静态文件和代理动态 URL。或者，您可以运行[Varnish](http://varnish.projects.linpro.no/)或[Squid](http://www.squid-cache.org/)作为缓存反向代理前端，以便提供所有高流量静态文件（即图像、CSS 等*以及*您愿意为其发送缓存友好标头的任何动态页面）的记忆。

Apache 也可以优化为提供静态文件——所以当我经常听到人们抱怨 Apache 时，他们真的不知道如何配置它。他们只使用过 prefork MPM（与线程或工作线程相比）并启用了各种模块（通常它们从 Linux 发行版的厨房水槽 Apache 包运行，该包将所有内容构建为模块并默认启用 10-20模块或更多）。首先通过关闭不需要的模块/愚蠢的功能来调整 Apache，例如对 .htaccess 的支持（这使得 Apache 在每次请求时都会扫描文件系统！）。（您还可以运行 Apache 的两个实例，将“轻量级”Apache 作为前端代理到“重度”Apache 以进行动态请求......

关于：

> 由于您仍然为每个传入的请求生成一个 apache 进程，这对负载有何积极影响？从我可以看到，通过 lighttpd 代理其请求的 Apache 进程的大小与它为文件本身提供服务时一样大。

如果您在每个请求上都生成进程，那么这意味着您正在使用 prefork MPM。请记住，当操作系统报告每个进程的内存使用情况时，并非所有内存都已连接，其中许多进程处于空闲状态。当您谈论速度时，您更关心给定请求的请求解析和内部代码分支（服务器正在执行多少处理？）而不是操作系统报告的内存使用情况。

例如，如果您启用类似 mod_php 的功能，那么每个工作进程都会立即增加大约 20-40M（取决于您的 PHP 解释器中启用的内容），但这并不意味着 Apache 正在使用该内存静态请求。当然，如果您正在优化您的服务器以在小型静态文件上实现最大并发性，那么启用 mod_php 仍然会非常糟糕，您将无法将几乎尽可能多的 prefork 进程放入 RAM。

我可能会为 Apache 想出一个“噩梦配置”，它实际上*会*比将这些请求代理到后端 Lighttpd 更慢地提供静态文件，但它会涉及在 Apache 中启用昂贵的功能，例如在 Lighttpd 中禁用的 .htaccess，所以这真的不公平。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-08T09:40:31.803

1.  如果您仍然有能力从*同一台机器**上提供*静态和动态内容（正如您在[参考文章中](http://www.linux.com/feature/51673)所做的那样），那么我真的认为该设置没有任何意义。
**   也许它确实减少了 Apache 的负载，因为它不必对磁盘做 IO，但它会增加*同一台机器*上 Lighttpd 的负载，从而减少*apache 的可用负载*......*   也许 Lighttpd IO 访问比 Apache 1.3 更轻，但为什么不完全切换到 Apache 2 或 Lighttpd 呢？如果性能真的开始变差，请将静态文件托管在另一台机器 (media.yourdomain.com) 上。*

 *我在这里找到了关于如何进行高性能设置的简短介绍： [部署 Django](http://www.djangobook.com/en/1.0/chapter20/) -> 在结束前滚动到`Scaling`某个页面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T09:17:45.470

您没有为每个请求生成 Apache 进程 - 静态文件（图像等）由 lighttpd 直接获取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T10:08:58.783

我不太了解 Apache 的内部工作原理，但我看到的一种解释是关于内存压力。简而言之，Apache 试图平衡它用于缓存和动态页面的内存；但通常以缓存过多而应用程序过少而告终。如果将它们分成不同的进程，每个进程都会针对负载类型进行优化。

目前，我正在做的是使用[nginx](http://nginx.net/)作为前端。它真的又快又轻，专门设计为前端代理；但也提供静态文件。事实上，由于它也可以调用 FastCGI 进程，因此您可以摆脱 Apache 并仍然获得拆分文件/应用程序进程的好处。（还有一些额外的[memcached 魔法](http://www.igvita.com/2008/02/11/nginx-and-memcached-a-400-boost/)看起来绝对是天才）

（是的，lighttpd 也可以用作 Apache 和/或 FastCGI 的前端）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-17T01:19:07.480

使用 Apache MPM Worker fastcgi 这将降低您的服务器内存使用率。MPM worker 比 Prefork 更好地提供静态内容，并且在静态内容方面几乎与 lighttpd 相当。

# c# - Reflection.Net：如何加载依赖项？

> ID：181901
> 
> 赞同：30
> 
> 时间：2008-10-08T09:09:06.050
> 
> 标签：c#, reflection, dependencies, add-on

我尝试使用反射向我的 Windows.Net 应用程序添加一个插件系统；但是当有依赖的插件时它会失败。

插件类必须实现一个接口“IAddon”并有一个空的构造函数。
主程序使用反射加载插件：

```
Assembly assembly = Assembly.LoadFile(@"C:\Temp\TestAddon\Addon.dll");
Type t = assembly.GetType("Test.MyAddon");
ConstructorInfo ctor = t.GetConstructor(new Type[] { });
IAddon addon= (IAddon) ctor.Invoke(new object[] { });
addon.StartAddon(); 
```

当插件不使用依赖项时效果很好。但是，如果我的插件引用并使用保存在磁盘中插件附近的另一个 DLL (C:\Temp\TestAddon\MyTools.dll)，它将失败：
*System.IO.FileNotFoundException: 无法加载文件或程序集 'MyTools.dll ' 或其依赖项之一。*

我不想在我的可执行文件附近复制插件 DLL，我该如何告诉 .Net 运行时在“C:\Temp\TestAddon\”中搜索任何依赖项？

请注意，添加

```
Assembly assembly = Assembly.LoadFile(@"C:\Temp\TestAddon\MyTools.dll"); 
```

不要改变任何东西。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-10-08T09:31:14.427

如果*MyTools.dll与**Addon.dll*位于同一目录中，您需要做的就是调用`Assembly.LoadFrom`而不是`Assembly.LoadFile`让您的代码工作。否则，处理`AppDomain.AssemblyResolve`事件是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T09:10:02.600

几个选项：

1.  您可以附加到`AppDomain.AssemblyResolve`以帮助 CLR 解析程序集。
2.  您可以考虑将加载项隔离到它们自己的中`AppDomain`（请参阅`System.AddIn`命名空间和[本网站](http://www.codeplex.com/clraddins)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T09:39:15.690

您是否考虑过使用[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)容器？我将 Castle Windsor 与外部 Boo 文件一起使用，这让我可以轻松扩展应用程序，而无需重新编译或担心提供依赖项

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T09:57:45.327

您可以使用反射来访问私有*`Assembly.`**`_GetReferencedAssemblies()`***.

尽管该方法*可能*会在 .NET 框架的未来版本中发生变化，但这似乎不太可能 — ASP.NET 严重依赖它，尽管他们有可能将其从我所知道的唯一程序集`mscorlib`移至哪个程序集`System.Web`方法被引用的地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T13:39:58.827

在我尝试在插件中使用 webService 之前，Assembly.LoadFrom 运行良好，我遇到了“*无法将 'X' 类型的对象转换为 'X' 类型*”异常。

这很难看，但我会将 Assembly.LoadFile 与 AppDomain.AssemblyResolve 一起使用。

多谢你们。

# sql-server - 脚本表数据工具

> ID：181909
> 
> 赞同：7
> 
> 时间：2008-10-08T09:10:52.923
> 
> 标签：sql-server, database

是否有用于编写 MSSQL 表数据脚本的免费工具？我很乐意写一个，但我希望它已经完成，并且该应用程序之前成熟了一点/

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-08T09:31:34.117

以下是我为逆向工程 SQL 服务器模式编写的一些脚本。它们可能有一些用处。此外，作为普遍兴趣，他们给出了一些如何从数据字典中获取各种信息的示例。我在下面添加了一个 MIT 许可证，以明确使用许可和一些基本的无隐式保证 CYA。享受。

```
-- ====================================================================
-- === reverse_engineer_2005.sql ======================================
-- ====================================================================
-- 
--  Script to generate table, index, pk, view and fk definitions from
--  a SQL Server 2005 database.  Adapted from one I originally wrote 
--  for SQL Server 2000\.  It's not comprehensive (doesn't extract 
--  partition schemes) but it does do defaults and computed columns
--
--  Run the script with 'results to text' and cut/paste the output into
--  the editor window.  Set the schema as described below.
--
--  Copyright (c) 2004-2008 Concerned of Tunbridge Wells
-- 
--  Permission is hereby granted, free of charge, to any person
--  obtaining a copy of this software and associated documentation
--  files (the "Software"), to deal in the Software without
--  restriction, including without limitation the rights to use,
--  copy, modify, merge, publish, distribute, sublicense, and/or sell
--  copies of the Software, and to permit persons to whom the
--  Software is furnished to do so, subject to the following
--  conditions:
--
--  The above copyright notice and this permission notice shall be
--  included in all copies or substantial portions of the Software.
--
--  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
--  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
--  OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
--  NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
--  HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
--  WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
--  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
--  OTHER DEALINGS IN THE SOFTWARE.
--
-- ====================================================================
--

set nocount on

-- This does a specific schema.  Set the schema here
--
declare @schema varchar (max)
select @schema = 'dbo'

if object_id ('tempdb..#objects') is not null begin
    drop table #objects
end

if object_id ('tempdb..#views') is not null begin
    drop table #views
end

if object_id ('tempdb..#types') is not null begin
    drop table #types
end

-- Gets lists of tables and views belonging to the schema
--
select o.name
      ,o.object_id
  into #objects
  from sys.objects o
  join sys.schemas s
    on s.schema_id = o.schema_id
 where o.type in  ('U')
   and s.name = @schema

select o.name
      ,o.object_id
  into #views
  from sys.objects o
  join sys.schemas s
    on s.schema_id = o.schema_id
 where o.type in  ('V')
   and s.name = @schema

-- Some metadata for rendering types
--
select a.* 
  into #types
  from ((select 'decimal' as typename, 6 as format) union all
        (select 'numeric', 6) union all
        (select 'varbinary', 1) union all
        (select 'varchar', 1) union all
        (select 'char', 1) union all
        (select 'nvarchar', 1) union all
        (select 'nchar', 1)) a

-- This generates 'drop table' and 'drop view' statements
--
select 'if exists (select 1' + char(10) +
       '             from sys.objects o' + char(10) +
       '             join sys.schemas s' + char(10) +
       '               on o.schema_id = s.schema_id' + char(10) +
       '            where o.name = ''' + o.name + '''' + char(10) +
       '              and s.name = ''' + @schema +'''' + char(10) +
       '              and o.type = ''U'') begin' + char(10) +
       '    drop table [' + @schema + '].[' + o.name + ']' + char(10) +
       'end' + char(10) +
       'go' + char(10)
  from sys.objects o
  join #objects o2
    on o.object_id = o2.object_id
 where o.type = 'U'

select 'if exists (select 1' + char(10) +
       '             from sys.objects o' + char(10) +
       '             join sys.schemas s' + char(10) +
       '               on o.schema_id = s.schema_id' + char(10) +
       '            where o.name = ''' + o.name + '''' + char(10) +
       '              and s.name = ''' + @schema + '''' + char(10) +
       '              and o.type = ''V'') begin' + char(10) +
       '    drop view [' + @schema + '].[' + o.name + ']' + char(10) +
       'end' + char(10) +
       'go' + char(10)
  from sys.objects o
  join #objects o2
    on o.object_id = o2.object_id
 where o.type = 'V'

-- This generates table definitions
--
select case when c.column_id = 
                 (select min(c2.column_id)
                    from sys.columns c2
                   where c2.object_id = o.object_id)
            then 'create table [' + @schema + '].[' + isnull(o.name, 'XYZZY') + '] (' + char(10)
            else ''
            end +
       left('        [' +rtrim(c.name) + '] ' +
       '                                                  ', 48) +
       isnull(calc.text, 
              t.name +
              case when tc.format & 2 = 2 
                   then ' (' +convert (varchar, c.precision) +
                   case when tc.format & 2 = 2
                        then ', ' + convert (varchar, c.scale)
                        else ''
                   end + ')'
                   when tc.format & 1 = 1
                   then ' (' + convert (varchar, c.max_length) + ')'
                   else ''
              end + ' ' + 
              case when c.is_nullable <> 0 then 'null'
                   else 'not null'
              end + isnull(ident.text, isnull(con.text, ''))) +
       case when c.column_id =
            (select max(c2.column_id)
               from sys.columns c2
              where c2.object_id = o.object_id)
            then char(10) + ')' + char(10) + 'go' + char(10)
            else ','
            end
  from sys.objects o
  join #objects o2
    on o.object_id = o2.object_id
  join sys.columns c
    on c.object_id = o.object_id
  join sys.types t
    on c.user_type_id = t.user_type_id
  left join 
       (select object_id,
               column_id,
               'as ' + definition as text
          from sys.computed_columns) calc
    on calc.object_id = o.object_id
   and calc.column_id = c.column_id
  left join
       (select parent_object_id,
               parent_column_id,
               ' default ' + definition as text
          from sys.default_constraints) con
    on con.parent_object_id = o.object_id
   and con.parent_column_id = c.column_id
  left join
       (select o.object_id,
               col.column_id,
               ' identity (' + convert(varchar, ident_seed(o.name)) + ', ' +
                               convert(varchar, ident_incr(o.name)) + ')' as text
          from sys.objects o
          join sys.columns col
            on o.object_id = col.object_id
         where columnproperty (o.object_id, col.name, 'IsIdentity') = 1) as ident
    on ident.object_id = o.object_id
   and ident.column_id = c.column_id
  left join #types tc
    on tc.typename = t.name
 where o.type = 'U'
 order by o.name,
          c.column_id

-- This generates view definitions 
--
select definition + char(10) + 'go' + char(10)
  from sys.sql_modules c
  join sys.objects o
    on c.object_id = o.object_id
  join #views o2
    on o.object_id = o2.object_id

-- This generates PK and unique constraints
--

select case when ik.key_ordinal = 
            (select min(ik2.key_ordinal)
                from sys.index_columns ik2
               where ik2.object_id = ik.object_id
                 and ik2.index_id = ik.index_id)
            then 'alter table [' + rtrim (s.name) + '].[' + rtrim(t.name) + ']' + char(10) +
                 '  add constraint [' + rtrim (pk.name) + '] ' + 
                 case when pk.type = 'PK' then 'primary key'
                      when pk.type = 'UQ' then 'unique'
                      else 'foobar'
                      end + char(10) +
                 '      ('
            else '      ,'
            end +
            '[' + rtrim(c.name) + ']' +
        case when ik.key_ordinal =
             (select max(ik2.key_ordinal)
                from sys.index_columns ik2
               where ik2.object_id = ik.object_id
                 and ik2.index_id = ik.index_id)
             then ')' + char(10) + 'go' + char(10)
             else ''
             end
   from sys.objects t           -- table
   join #objects o
     on t.object_id = o.object_id
   join sys.schemas s
     on s.schema_id = t.schema_id
   join sys.objects pk          -- key
     on pk.parent_object_id = t.object_id
   join sys.columns c           -- columns
     on c.object_id = t.object_id
   join sys.indexes i           -- get index for constraint
     on i.object_id = t.object_id
    and i.name = pk.name
   join sys.index_columns ik        -- index column and name
     on ik.object_id = i.object_id
    and ik.index_id = i.index_id
    and ik.column_id = c.column_id     -- vvv Get the right index
  where c.name = index_col('[' + s.name + '].[' + t.name + ']', i.index_id, ik.key_ordinal)
    and pk.type in ('PK', 'UQ')   --probably redundant
  order by t.object_id,
           pk.object_id,
           ik.key_ordinal

-- This generates indexes
--
select case when ik.key_ordinal = 
             (select min(ik2.key_ordinal)
                from sys.index_columns ik2
               where ik2.object_id = ik.object_id
                 and ik2.index_id = ik.index_id)
            then 'create ' +
            case when is_unique_constraint = 1 then 'unique '
                 else ''
                 end +
            'index [' + rtrim(i.name) + ']' + char (10) +
            '    on [' + rtrim(t.name) + ']' + char (10) +
            '       ('
       else '       ,'
        end +
       '[' + c.name + ']' +
       case when ik.key_ordinal = 
            (select max(ik2.key_ordinal)
               from sys.index_columns ik2
              where ik2.object_id = ik.object_id
                and ik2.index_id = ik.index_id)
            then ')' + char(10) + 'go' + char(10)
            else ''
            end
  from sys.objects t           -- table
  join #objects o
    on o.object_id = t.object_id
  join sys.columns c           -- columns
    on c.object_id = t.object_id
  join sys.indexes i           -- get index for constraint
    on i.object_id = t.object_id
  join sys.index_columns ik        -- index column and name
    on ik.object_id = i.object_id
   and ik.index_id = i.index_id
   and ik.column_id = c.column_id     -- vvv Get the right index
 where c.name = index_col(t.name, i.index_id, ik.key_ordinal)
   and t.type = 'U'
   and i.name <> t.name
   and i.name not in
       (select c2.name
          from sys.objects c2
         where c2.parent_object_id = t.object_id
           and c2.type in ('PK', 'UQ'))
 order by t.name,
          i.name,
          ik.key_ordinal

-- This generates foreign keys
--
select con.constraint_text as [--constraint_text]
  from ((select case when kc.constraint_column_id = 
                     (select min(k2.constraint_column_id)
                        from sys.foreign_key_columns k2
                       where k2.constraint_object_id = k.object_id)
                     then 'alter table [' + @schema + '].[' + rtrim(t.name) + ']' + char(10) +
                          '  add constraint [' + rtrim (k.name) + '] ' + char(10) +
                          '      foreign key ('
                     else '                  ,'
                     end +
                '[' + tc.name + ']' +
                case when kc.constraint_column_id =
                     (select max(k2.constraint_column_id)
                        from sys.foreign_key_columns k2
                       where k2.constraint_object_id = k.object_id)
                     then ')' 
                     else ''
                     end as constraint_text,
                t.name as table_name,
                k.name as constraint_name,
                kc.constraint_column_id as row_order,
                t.object_id
           from sys.foreign_keys k
           join sys.objects t
             on t.object_id = k.parent_object_id
           join sys.columns tc
             on tc.object_id = t.object_id
           join sys.foreign_key_columns kc
             on kc.constraint_object_id = k.object_id
            and kc.parent_object_id = t.object_id
            and kc.parent_column_id = tc.column_id
           join sys.objects r
             on r.object_id = kc.referenced_object_id
           join sys.columns rc
             on kc.referenced_object_id = rc.object_id
            and kc.referenced_column_id = rc.column_id)
        union all
        (select case when kc.constraint_column_id = 
                     (select min(k2.constraint_column_id)
                        from sys.foreign_key_columns k2
                       where k2.constraint_object_id = k.object_id)
                     then '      references [' + rtrim(r.name) + ']' + char(10) +
                          '                 ('
                     else '                 ,'
                     end +
                '[' + rc.name + ']' +
                case when kc.constraint_column_id = 
                     (select max(k2.constraint_column_id)
                        from sys.foreign_key_columns k2
                       where k2.constraint_object_id = k.object_id)
                     then ')' + char(10) + 'go' + char(10)
                     else ''
                     end as constraint_text,
                t.name as table_name,
                k.name as constraint_name,
                kc.constraint_column_id + 100 as row_order,
                t.object_id
           from sys.foreign_keys k
           join sys.objects t
             on t.object_id = k.parent_object_id
           join sys.columns tc
             on tc.object_id = t.object_id
           join sys.foreign_key_columns kc
             on kc.constraint_object_id = k.object_id
            and kc.parent_object_id = t.object_id
            and kc.parent_column_id = tc.column_id
           join sys.objects r
             on r.object_id = kc.referenced_object_id
           join sys.columns rc
             on kc.referenced_object_id = rc.object_id
            and kc.referenced_column_id = rc.column_id)) con
  join #objects o
    on con.object_id = o.object_id
 order by con.table_name, 
          con.constraint_name, 
          con.row_order 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-10-08T10:02:06.753

Microsoft SQL Server 数据库发布向导是一个很好的 GUI，可以编写 SQL Server 2000/2005 db 的结构/数据/过程。

[http://www.microsoft.com/downloads/details.aspx?FamilyId=56E5B1C5-BF17-42E0-A410-371A838E570A&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=56E5B1C5-BF17-42E0-A410-371A838E570A&displaylang=en)

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-08T09:15:46.877

一个快速的谷歌和跳跃将我指向一个应该能够帮助你的存储过程。更具体地查看[我的代码库](http://vyaskn.tripod.com/code.htm#inserts)文件[generate_inserts.txt](http://vyaskn.tripod.com/code/generate_inserts.txt)看看它是否可以帮助您。

不是真正的工具，而是工具的开始！:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T11:57:17.223

对于加载和卸载表数据，您还可以使用[bcp](http://msdn.microsoft.com/en-us/library/ms187042.aspx)、[集成服务](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services)或[BULK INSERT](http://msdn.microsoft.com/en-us/library/ms175915.aspx)（用于加载部分）。 [本文](http://www.sqlteam.com/article/exporting-data-programatically-with-bcp-and-xp_cmdshell)介绍了一种从存储过程中调用 bcp 的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-10-08T09:28:30.860

TOAD for Oracle 可以做到，所以我怀疑 TOAD for SQL Server 也可以。

# c# - 在 .NET 中具有单独数据访问层的分层设计中，应在哪里管理连接字符串？

> ID：181912
> 
> 赞同：3
> 
> 时间：2008-10-08T09:14:41.387
> 
> 标签：c#, asp.net, database

这里有一个长期运行的习惯，即连接字符串存在于 web.config 中，Sql Connection 对象在使用该连接字符串的块中实例化并传递给 DataObjects 构造函数（通过 CreateInstance 方法作为构造函数私人的）。像这样的东西：

```
using(SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
{
    DataObject foo = DataObject.CreateInstance(conn);
    foo.someProperty = "some value";
    foo.Insert();
} 
```

这对我来说都闻起来了..我不知道。DataLayer 类库不应该负责 Connection 对象和 Connection 字符串吗？我会很感激知道其他人在做什么或任何关于这类设计决策的好的在线文章。

考虑到我们从事的项目始终是 Sql Server 后端，而且这种情况极不可能改变。所以工厂和供应商模式不是我所追求的。它更多地是关于责任在哪里以及应该在哪里管理数据层操作的配置设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T09:20:52.950

我喜欢对我的数据访问层中的类进行编码，以便它们具有一个以 IDbConnection 作为参数的构造函数，以及另一个以（连接）字符串为参数的构造函数。

这样，调用代码可以构建自己的 SqlConnection 并将其传递（便于集成测试）、模拟 IDbConnection 并将其传递（便于单元测试）或从配置文件（例如 web.config）中读取连接字符串并把它传进去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T09:27:07.620

嗯，我想我同意数据层应该负责管理这样的连接字符串，所以高层不需要担心这个。但是，我不认为 SQLConnection 应该担心连接字符串的来源。

I think, I would have a datalayer which provides certain DataInputs, that is, things that take a condition and return DataObjects. Such a DataInput now knows "hey, this DataObjects are stored in THAT Database, and using the Configurations, I can use some connection-string to get an SQL-Connection from over there.

That way you have encapsulated the entire process of "How and where do the data objects come from?" and the internals of the datalayer can still be tested properly. (And, as a side effect, you can easily use different databases, or even multiple different databases at the same time. Such flexibility that just pops up is a good sign(tm))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T09:21:03.357

这是一种“气味”是相对的。如果您非常确定将这段特定的代码耦合到 SQL Server 和 web.config 连接字符串条目，那么它完全可以。如果您不喜欢这种耦合，我同意这是一种代码味道并且是不可取的。

# sharepoint - Windows SharePoint Services 与 Microsoft Office SharePoint Server？

> ID：181920
> 
> 赞同：12
> 
> 时间：2008-10-08T09:18:30.647
> 
> 标签：sharepoint, moss, comparison, wss

有 Windows SharePoint Services (WSS)，然后是 Microsoft Office SharePoint Server (MOSS)。MOSS 比 WSS（作为 Microsoft 服务器许可的一部分提供）贵得多。

我的问题是：MOSS 做了什么让它*物有所值*？

..Microsoft [Search Server](http://www.microsoft.com/Enterprisesearch/)不与[业务数据缓存](http://msdn.microsoft.com/en-us/library/ms563661.aspx)(BDC) 竞争吗？

编辑：功能比较页面有助于说明 MOSS 具有而 WSS 没有的众多功能。从表面上看，MOSS 的大部分功能集都是面向企业的。

您如何用几句话描述 MOSS 相对于 WSS 的差异（或额外优势）？本质上，MOSS（而不是 WSS）中的“大票”项目是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-20T04:26:53.917

不要假设 WSS 在所有部署方案中都是免费的。当我们在面向客户端的外联网配置中部署 WSS 时，我们得到了很好的警醒。一个带有一堆隔离的客户端子站点的“主站点”。原来我们需要为操作系统购买一个“内部网许可证”（不记得确切的名称）。这与 SharePoint 互联网连接器不同 - 它实际上允许您使用 Win 2003 和无限数量的互联网用户。不是很贵，但我们没想到要付几千美元……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-08T11:55:42.093

关于 WSS 与 MOSS：

*   WSS 不是门户，它只是一个协作平台（WSS 中没有发布功能）
*   MOSS 允许您使用用户配置文件，而不是 WSS
*   与 MOSS 相比，WSS 中的搜索功能便宜（但您可以使用 Search Server Express 扩展它们）
*   许多其他：Infopath、BDC、附加 WebPart、附加站点和列表模板

关于 Search Server 和 BDC：它们不竞争。

Search Server 是剥离出来的 MOSS 搜索引擎。所以你只有搜索功能（你可以索引 SharePoint、网站、文件系统）。

BDC（业务数据目录）允许您查看外部业务数据源，例如 SQL 数据库（不一定是 SQL Server，它可以是 Oracle、MySQL....）或 Web 服务。您将能够在门户中查看数据，并将此数据集成到您的任何列表中。如果您有 SharePoint 企业版，BDC 还允许您为此内容源编制索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T09:32:54.283

是否*值得*额外的成本真的取决于 MOSS 为您实际*使用*的桌面带来了多少附加功能。

微软的以下比较页面肯定有助于回答您的问题。

[Microsoft Office SharePoint Server 2007 版本比较](http://office.microsoft.com/en-us/sharepointtechnology/FX101758691033.aspx?ofcresset=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-08T09:41:47.777

WSS 内置了很多东西，但 MOSS 有很多额外的东西，正如其他答案中所引用的那样。

在您问题的第二部分.. 搜索服务器和业务数据连接器完全不同.. 搜索服务器是关于查找东西... BDC 是关于合并数据源以便能够在共享点或连接的 Excel 表等中轻松使用它们。 . 重点是交付的内容——搜索结果或数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-08T11:29:38.887

我想说，如果您只需要几个内部小组的几个协作站点，那么 wss 就可以了。当您开始将 SharePoint 用于企业级应用程序并作为主要的开发平台时，您应该考虑使用 MOSS。

# c++ - 您对大型项目的首选 C/C++ 标头策略？

> ID：181921
> 
> 赞同：50
> 
> 时间：2008-10-08T09:19:12.737
> 
> 标签：c++, c, coding-style, include, header

在处理大型 C/C++ 项目时，您是否对源文件或头文件中的*#include*有一些特定规则？

例如，我们可以想象遵循以下两个过度规则之一：

1.  **.h*文件中禁止使用*#include ；*由每个*.c*文件来包含它需要的所有头文件*
**   每个*.h*文件都应包含其所有依赖项，即它应该能够单独编译而不会出现任何错误。*

 *我想任何项目之间都有权衡，但你的呢？你有更具体的规则吗？或者任何支持任何解决方案的链接？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-10-08T10:14:44.747

如果您仅将 H 文件包含到 C 文件中，则将 H 文件包含到 C 文件中可能会导致编译失败。它可能会失败，因为您可能必须预先包含 20 个其他 H 文件，更糟糕的是，您必须以正确的顺序包含它们。拥有大量 H 文件，从长远来看，该系统最终将成为管理方面的噩梦。您想要做的只是包含一个 H 文件，结果您花了两个小时找出还需要包含哪些其他 H 文件。

如果一个 H 文件只有在先包含另一个 H 文件的情况下才能成功包含到 C 文件中，那么第一个 H 文件应该包含第二个 H 文件，依此类推。这样，您可以简单地将每个 H 文件包含到您喜欢的每个 C 文件中，而不必担心这可能会破坏编译。这样，您只需指定您的直接依赖项，但如果这些依赖项本身也有依赖项，则由他们来指定这些依赖项。

另一方面，如果没有必要，不要将 H 文件包含到 H 文件中。`hashtable.h`应该只包含使用哈希表实现所需的其他头文件。如果实现本身需要`hashing.h`，则将其包含在 中`hashtable.c`，而不是包含在 中`hashtable.h`，因为只有实现需要它，而不是只想使用最终哈希表的代码。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-10-08T09:32:11.587

我认为这两个建议的规则都很糟糕。就我而言，我总是申请：

仅包含使用此标头中定义的内容编译文件所需的头文件。这表示：

1.  仅作为引用或指针出现的所有对象都应前向声明
2.  包括定义在头本身中使用的函数或对象的所有头。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-10-08T10:22:57.007

我会使用规则2：

所有标题都应该是自给自足的，可以通过：

*   不使用其他地方定义的任何东西
*   前向声明在别处定义的符号
*   包括定义无法前向声明的符号的标题。

因此，如果您有一个空的 C/C++ 源文件，包括头文件应该可以正确编译。

然后，在 C/C++ 源文件中，仅包含必要的内容：如果 HeaderA 前向声明了在 HeaderB 中定义的符号，并且您使用此符号，则必须同时包含这两者……好消息是，如果您不要使用前向声明的符号，那么您将能够仅包含 HeaderA，并避免包含 HeaderB。

请注意，使用模板会使此验证“包括您的标头在内的空源应该编译”变得更加复杂（并且有趣......）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-10-08T09:22:15.663

一旦存在循环依赖，第一条规则就会失效。所以不能严格应用。

（这仍然可以工作，但这将大量工作从程序员转移到这些库的消费者，这显然是错误的。）

我完全赞成规则 2（尽管包含“前向声明头”而不是真正的交易可能会更好，`<iosfwd>`因为这会减少编译时间）。一般来说，如果头文件“声明”它具有哪些依赖项，我认为这是一种自我记录——还有什么比包含所需文件更好的方法呢？

### 编辑：

在评论中，我受到质疑，标题之间的循环依赖是糟糕设计的标志，应该避免。

这是不正确的。事实上，*类之间*的循环依赖可能是不可避免的，而且根本不是糟糕设计的标志。例子很多，我只提一下观察者模式，它在观察者和主体之间有一个循环引用。

为了解决类之间的循环，您必须使用前向声明，因为声明的顺序在 C++ 中很重要。现在，以循环方式处理此前向声明以减少整体文件的数量并集中代码是完全可以接受的。诚然，以下情况不适合这种情况，因为只有一个前向声明。但是，我曾在一个图书馆工作过，其中更多。

```
// observer.hpp

class Observer; // Forward declaration.

#ifndef MYLIB_OBSERVER_HPP
#define MYLIB_OBSERVER_HPP

#include "subject.hpp"

struct Observer {
    virtual ~Observer() = 0;
    virtual void Update(Subject* subject) = 0;
};

#endif 
```

* * *

```
// subject.hpp
#include <list>

struct Subject; // Forward declaration.

#ifndef MYLIB_SUBJECT_HPP
#define MYLIB_SUBJECT_HPP

#include "observer.hpp"

struct Subject {
    virtual ~Subject() = 0;
    void Attach(Observer* observer);
    void Detach(Observer* observer);
    void Notify();

private:
    std::list<Observer*> m_Observers;
};

#endif 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-08T11:36:37.530

1.  总是有某种头球后卫。
2.  不要通过将任何`using namespace`语句放在标题中来污染用户的全局命名空间。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-08T10:15:38.503

2\. .h 文件的最小版本仅包括它特别需要编译的头文件，尽可能多地使用前向声明和 pimpl。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T09:43:15.247

我建议使用第二个选项。您经常会遇到这样的情况：您想要将 somwhing 添加到突然需要另一个头文件的头文件中。使用第一个选项，您将不得不检查并更新大量 C 文件，有时甚至不受您的控制。使用第二个选项，您只需更新头文件，甚至不需要您刚刚添加的新功能的用户甚至不需要知道您做了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-14T04:14:53.510

第一种选择（`#include`标题中没有 s）对我来说是一个主要的禁忌。我想自由地使用`#include`我可能需要的任何东西，而不必担心手动设置`#include`它的依赖项。所以，总的来说，我遵循第二条规则。

关于循环依赖，我个人的解决方案是根据*模块*而不是根据类来构建我的项目。在一个模块内部，所有类型和函数可能相互之间具有任意依赖关系。跨模块边界，模块之间可能不存在循环依赖关系。对于每个模块，都有一个 *.hpp 文件和一个 *.cpp 文件。这确保了标头中的任何前向声明（循环依赖所必需的，只能发生在模块内部）最终总是在同一个标​​头中解析。不需要任何仅前向声明的标头。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-26T00:59:52.373

我同意 Mecki 的观点，简而言之，

对于您项目中的每个 foo.h**仅**包含那些需要制作的标头

```
// foo.c
#include "any header"
// end of foo.c 
```

编译。

（当使用预编译的头文件时，它们当然是允许的——例如 MSVC 中的 #include "stdafx.h"）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-14T04:03:42.710

我个人是这样做的：
1 Perfer forward 声明以在 .h 文件中包含其他 .h 文件。如果某些东西可以用作该 .h 文件或类中的指针/引用，则可以进行前向声明而不会出现编译错误。这可以使标题更少包含依赖项（节省编译时间？不确定：（）。
2 使 .h 文件简单或具体。例如，在一个名为 CONST.h 的文件中定义所有常量是不好的，最好将它们分成多个，如 CONST_NETWORK.h, CONST_DB.h。所以使用一个 DB 的 constance，它不需要包含有关网络的其他信息
。3 不要将实现放在 headers。headers 用于快速查看其他人的公共事物; 实施时，不要污染他人的详细声明。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-08T10:07:16.710

铂。当您希望通过某个标头预编译标头时，1 失败；例如。这就是 StdAfx.h 在 VisualStudio 中的用途：您将所有常见的标头放在那里...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-08T10:39:35.773

这归结为界面设计：

1.  始终通过引用或指针传递。如果您不打算检查指针，请通过引用传递。
2.  尽可能前向声明。
3.  永远不要在课堂上使用 new - 创建工厂来为你做这件事并将它们传递给课堂。
4.  永远不要使用预编译的头文件。

在 Windows 中，我的 stdafx 只包含 afx___.h 标头 - 没有字符串、向量或 boost 库。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-09T12:24:02.753

规则编号。1 将要求您以非常特定的顺序列出头文件（基类的包含文件必须在派生类的包含文件等之前），如果您弄错顺序，很容易导致编译错误。

正如其他几个人所提到的，诀窍是尽可能多地使用前向声明，即如果使用引用或指针。为了以这种方式最小化构建依赖关系，[pimpl](http://www.gotw.ca/gotw/028.htm)习惯用法可能很有用。

# c# - TreeView 标签编辑问题

> ID：181928
> 
> 赞同：13
> 
> 时间：2008-10-08T09:24:13.663
> 
> 标签：c#, treeview

我有一个带有如下节点的树视图：“Foo (1234)”，并希望允许用户重命名节点，但只有 Foo 部分，没有 (1234)。我首先尝试`BeforeLabelEdit`像这样更改节点文本：

```
private void treeView1_BeforeLabelEdit(object sender, NodeLabelEditEventArgs e)
{
    e.Node.Text = "Foo";
} 
```

但是当我单击节点进行编辑时，文本框中会出现“Foo (1234)”。

好吧，那我们试试别的。

我设置`treeView1.LabelEdit`为false，然后执行以下操作：

```
private void treeView1_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        if (treeView1.SelectedNode == treeView1.GetNodeAt(e.Location))
        {
            treeView1.SelectedNode.Text = "Foo";
            treeView1.LabelEdit = true;
            treeView1.SelectedNode.BeginEdit();
        }
    }
} 
```

然后在 中`AfterLabelEdit`，我设置`LabelEdit`回 false。

你猜怎么着？这也不起作用。它将节点文本更改为“Foo”，但不会出现编辑文本框。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-31T10:16:29.860

最后，我在[CodeProject上找到了](http://www.codeproject.com)[解决方案](http://www.codeproject.com/KB/tree/CustomizedLabelEdit.aspx)。在底部的评论中，您还将找到一个便携式解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T09:27:09.647

嘿-几年前我打过那个。我什至[在 Connect 上留下了一个建议](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=94140)（投赞成票！）以允许在 BeforeLabelEdit 中更改标签。

一个选项（在 WinForms 中 - 在 WPF 中是另一回事）是为您的 TreeNodes 使用自定义绘画，以便实际标签仍然是“Foo”并且您自定义在其后绘制“(1234)”。不过，做对了有点痛苦。

# sql-server - SQL Server 2005 性能：WHERE IN 语句中的不同表或完整表

> ID：181930
> 
> 赞同：2
> 
> 时间：2008-10-08T09:25:38.870
> 
> 标签：sql-server, database, performance

我们有两个表：

*   文档：id、title、document_type_id、showon_id
*   文档类型：id，名称
*   关系：DocumentType hasMany Documents。(Document.document_type_id = DocumentType.id)

我们希望检索给定 ShowOn_Id 的所有文档类型的列表。

我们看到两种可能性：

```
SELECT DocumentType.*
FROM DocumentType
WHERE DocumentType.id IN (
    SELECT DISTINCT Document.document_type_id FROM Document WHERE showon_id = 42
);

SELECT DocumentType.*
FROM DocumentType
WHERE DocumentType.id IN (
    SELECT Document.document_type_id FROM Document WHERE showon_id = 42
); 
```

我们的问题是：何时以及是否使用 DISTINCT 来获取较小的记录集与检索整个表和 IN 语句将表带到第一个匹配项更好。（我们猜这就是它的作用;-)）

对于不同的数据库，这是否不同，有共同的答案吗？

或者有更好的方法吗？（我们在 .NET 领域）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-10-08T09:52:11.517

您可以使用联接：

```
SELECT DISTINCT DocumentType.*
FROM DocumentType
INNER JOIN Document
ON DocumentType.id=Document.document_type_id
WHERE Document.showon_id = 42 
```

我认为这是最好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-09T18:20:13.423

为了获得最佳性能，您应该使用：

```
SELECT DISTINCT dt.* 
FROM 
    DocumentType dt
    INNER JOIN Document d ON dt.id=d.document_type_id and d.showon_id = 42 
```

连接在桥接多个表时非常有效，因为 Where 子句中的嵌套查询需要执行单独的结果选择，以过滤 From 子句结果。join 语句也更具可读性。

除了主键和外键关系之外，我还会在 showon_id 上放置一个索引。

我的答案与 wmasm 的答案不同，只是将 showon_id 过滤器向上移动到内部连接。对于 MS SQL 2k5，我认为解释器足够聪明，可以自动执行此操作，但您总是希望使用尽可能小的结果集。在将多个表连接在一起时，将过滤器带到内部连接语句可以限制查询必须处理的行数。如果你这样做，你应该明白这发生在每个行比较中，所以复杂的过滤器（例如 x = '%a' 或函数调用）最好留给 Where 子句，以便内部连接可以过滤掉不必要的比较.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T14:46:38.457

使用 EXISTS。它有时更快，但在我看来，它比 DISTINCT 和 JOIN 更具可读性。只是为了好玩，请回复此查询的查询计划和上面的 JOIN，看看是否有任何不同（它们可能会优化到相同的计划）。如果它们相同，我建议使用 EXISTS，因为它比 JOIN 更接近“普通语言”描述（因为您不想要 Document 中的任何数据等）

```
SELECT whatever
  FROM DocumentType dt
 WHERE EXISTS( SELECT *
                 FROM Document 
                WHERE dt.id     = document_type_id
                  AND showon_id = 42) 
```

要获取查询计划（参考： http: [//msdn.microsoft.com/en-us/library/ms180765](http://msdn.microsoft.com/en-us/library/ms180765(SQL.90).aspx) (SQL.90).aspx ），请执行以下操作：

```
SET SHOWPLAN_TEXT ON
GO

SELECT ...
GO 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-08T10:44:08.180

从我的角度来看，它在 SQL Server 内部应该没有任何区别（但谁知道这是如何实现的）。

可以这样想：要返回结果集，服务器需要进入 Document 表并检索所有 document_type_id WHERE showon_id = 42。在检索 document_type_ids 的过程中（例如通过索引查找），它会将它们放入哈希表中。当这个过程完成时，哈希表将包含不同的值。之后，查询执行进入 Document_Type 表，扫描主键并探测哈希表。请注意，这取决于，例如，当来自 Document 表的预期行计数低于 Document_Type 时，不使用哈希表可能更有效，但通常您会得到与刚刚建议的查询 wmasm 相同的查询计划。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-09T13:50:01.753

跟进[马特的回答](https://stackoverflow.com/questions/181930/ms-sql-2k5-performance-distinct-or-full-table-in-where-in-statement#183155)：

我启用了查询计划并测试了到目前为止出现的以下四个不同的查询：

*   `SELECT DocumentType.* FROM DocumentType WHERE DocumentType.id IN (SELECT DISTINCT Document.document_type_id FROM Document WHERE showon_id = 42);`

*   `SELECT DocumentType.* FROM DocumentType WHERE DocumentType.id IN (SELECT Document.document_type_id FROM Document WHERE showon_id = 42);`

*   `SELECT DISTINCT DocumentType.* FROM DocumentType INNER JOIN Document ON DocumentType.id=Document.document_type_id WHERE Document.showon_id = 42;`

*   `SELECT DocumentType.* FROM DocumentType WHERE EXISTS ( SELECT * FROM Document WHERE DocumentType.id=Document.document_type_id AND showon_id = 42);`

所有四个查询的查询计划结果是相同的：

```
 |--Hash Match(Right Semi Join, HASH:([Document].[document_type_id])=([DocumentType].[Id]))
       |--Hash Match(Inner Join, HASH:([Document].[Title], [Uniq1005])=([Document].[Title], [Uniq1005]), RESIDUAL:([Document].[Title] as [Document].[Title] = [Document].[Title] as [Document].[Title] AND [Uniq1005] = [Uniq1005]))
       |    |--Index Seek(OBJECT:([Document].[IX_Document_3] AS [Document]), SEEK:([Document].[showon_id]=(1)) ORDERED FORWARD)
       |    |--Index Scan(OBJECT:([Document].[IX_Document_1] AS [Document]))
       |--Table Scan(OBJECT:([DocumentType] AS [DocumentType])) 
```

我不确定每一行和每一个元素的含义，但从性能的角度来看，你如何为这类问题构建查询似乎并不重要......

# sql-server - SQL Sever 2000 中未登录到 Windows 的帐户的 Windows 身份验证

> ID：181948
> 
> 赞同：0
> 
> 时间：2008-10-08T09:34:21.863
> 
> 标签：sql-server, odbc, windows-authentication

使用 Windows 身份验证的一个优点是，当用户当前登录 Windows 时，我不需要提供用户名和密码来登录服务器。但在特定情况下，我想以另一个用户身份登录 SQL Server，使用相同的 Windows Authenticated ODBC 连接。

所以，问题是：是否可以使用 Windows 身份验证登录 SQL Server，但不能以当前登录 Windows 的用户身份登录（没有询问用户名和密码的对话框）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T09:39:56.190

您的问题的简单答案是否定的，如果不显示对话框，则无法使用其他 Windows 帐户登录 SQL Server。

稍微复杂一点的答案是；您可以通过右键单击查询分析器图标并选择“运行方式”以其他用户身份登录（显示对话框）（可能需要按住 CTRL 或 SHIFT 键才能显示 RUN AS。

您还可以查看 RUNAS 命令行可执行文件，因此您可以创建一个包含 RUNAS 命令、凭据和查询分析器路径的快捷方式。这将消除在执行时被要求输入用户名或密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T09:45:38.190

无论如何，如果您不使用登录用户的凭据，您将需要传递其他凭据——除了直接要求它们之外，唯一的其他选择是存储它们。

一旦你这样做了，可能值得考虑混合模式身份验证并针对这种特定情况使用 SQL login/pw。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T09:46:18.563

Runas 不允许您在命令行上提供密码，并且会生成一个弹出窗口来收集它。稍微搜索一下，我就可以在 technet 上找到一篇文章，虽然它不是预期用途，但它可能会有所帮助。

[http://technet.microsoft.com/en-us/library/bb727155.aspx](http://technet.microsoft.com/en-us/library/bb727155.aspx)
[http://blogs.msdn.com/oldnewthing/archive/2004/11/29/271551.aspx](http://blogs.msdn.com/oldnewthing/archive/2004/11/29/271551.aspx)

# sql-server - 视图与内联子查询 SQL Server 2005/2008

> ID：181949
> 
> 赞同：1
> 
> 时间：2008-10-08T09:36:44.900
> 
> 标签：sql-server, views, subquery

在我的应用程序的某些区域中，我需要来自数据库中多个表的数据（我有一个应用程序，该应用程序有很多属性，每个属性都有几个定义，每个定义都有一个值）。我需要所有这些表中的数据用于应用程序。我应该使用视图（相当大的视图）还是子查询来选择记录？在子查询的情况下，优化器是否能够有效地工作？我也对缓存是否适用于子查询感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T09:54:00.730

视图通常会扩展为子查询，除非您通过在视图上删除聚集索引来明确地将视图标记为持久化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T09:52:46.163

这是一个“视情况而定”的问题。视图可能有助于使代码更易于维护，但复杂的选择谓词可能会使优化器感到困惑。

另一种选择是返回记录集的存储过程。如果您多次重复使用子查询，您可能会从拆分查询、将子查询选择到临时表中并在稍后的步骤中组合各个部分中获得一些好处。

如果没有对问题更具体的描述，很难真正给出有意义的答案。

# iframe - iframe 和重定向

> ID：181951
> 
> 赞同：0
> 
> 时间：2008-10-08T09:38:50.887
> 
> 标签：iframe, asp-classic

我有一个网页（比如 www.example.com/a.asp）.. 我在这个页面中有一个 iframe，它从不同的网站（www.example.net/b.asp）加载一个页面......这个 b .asp 向用户提出的问题很少，结果会发布到我的网站 (www.example.com/c.asp) 中的 c.asp。此页面 (www.example.com/c.asp) 被加载到 iframe 中。当我从 www.example.net 收到响应时，有什么方法可以重新加载整个网页并重定向到另一个 wbpage。对不起，如果这个问题令人困惑，有任何疑问请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-10-08T09:41:58.370

如果我理解正确，我认为您可以将帖子的目标设置为 c.asp 为“_top”。这应该重新加载整个页面，让您退出 iframe。您的 c.asp 页面必须处理您需要的重定向。

或者，c.asp 页面需要执行的重定向可能能够以“_top”本身为目标，以防您无法更改发布数据的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T09:44:30.783

嗯，不知道我说得对不对。你的意思是当你收到来自 abc.com 而不是你自己的网站的回复时？

HTML 中的表单标签似乎有一个目标属性，用于在提交数据后将响应加载到指定的（例如 _top）目标：

[http://de.selfhtml.org/html/referenz/attribute.htm#form](http://de.selfhtml.org/html/referenz/attribute.htm#form)（德语）

不确定我是否真的回答了你的问题。我有吗？

干杯马蒂亚斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T10:26:51.930

如果您无法控制加载到框架中的资源，则无法使用 HTTP 进行重定向，因此您坚持使用 JavaScript。

鉴于相同的来源策略，我认为您能做的最好的事情就是确定何时将新文档加载到 iframe 中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<title>test of iframe</title>
<iframe width="500" height="400" src="http://example.net/">
  <p><a href="http://example.net/">See The Example Site</a></p>
</iframe>
<script type="text/javascript">
        window.onload = function () {
                document.getElementsByTagName('iframe')[0].onload = function () {
                        window.alert('Document loaded in frame');
                }
        }
</script>
```

然后您可以设置 window.location （可能在计算事件触发的次数之后）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-25T19:28:58.517

如上所述，您可以在表单的目标中使用“_top”，或者您可以在结果页面上使用一些 JavaScript 来检查它是否是“顶部”页面。在所有条件相同的情况下，您最好避免使用 JavaScript，因为如果客户端禁用了脚本，它将无法工作。

# wpf - 您在哪里划清代码和 XAMLin WPF 之间的界限？

> ID：181953
> 
> 赞同：24
> 
> 时间：2008-10-08T09:39:23.537
> 
> 标签：wpf, xaml, mvvm

我对 WPF 和 XAML 了解得越多，我就越意识到您可以在 XAML 或代码（例如 C# 代码或 VB.Net 代码）中完成几乎所有的 GUI 初始化和事件处理粘合。

我的问题是那些在 WPF 上工作了更长时间的人，最好是那些已经使用它发布应用程序的人——你在哪里找到了在 XAML 和代码之间“划清界限”的最佳位置？您是否尽可能使用 XAML？仅在哪里与非编码 UI 设计师交互？

这方面的任何提示都会对我自己和其他刚刚进入 WPF 编程并且对我们可以做出的所有选择感到瘫痪的程序员非常有帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-10-08T10:40:18.393

我要看的一件事是模型-视图-视图模型模式。这是一个非常优雅的模式，它自然地将所有内容分成漂亮的桶......包括你的 xaml。

例如，它可以帮助您在开发人员和设计人员之间保持清晰的界限，甚至允许测试驱动的开发。

那里有很多信息，但我将从 John Gossman 的博客文章开始：

*   [http://blogs.msdn.com/johngossman/archive/2005/10/08/478683.aspx](http://blogs.msdn.com/johngossman/archive/2005/10/08/478683.aspx)
*   [http://blogs.msdn.com/johngossman/archive/2005/10/09/478894.aspx](http://blogs.msdn.com/johngossman/archive/2005/10/09/478894.aspx)
*   [http://blogs.msdn.com/johngossman/archive/2006/02/26/539598.aspx](http://blogs.msdn.com/johngossman/archive/2006/02/26/539598.aspx)
*   [http://blogs.msdn.com/johngossman/archive/2006/02/27/540304.aspx](http://blogs.msdn.com/johngossman/archive/2006/02/27/540304.aspx)
*   [http://blogs.msdn.com/johngossman/archive/2006/03/04/543695.aspx](http://blogs.msdn.com/johngossman/archive/2006/03/04/543695.aspx)
*   [http://blogs.msdn.com/johngossman/archive/2006/04/13/576163.aspx](http://blogs.msdn.com/johngossman/archive/2006/04/13/576163.aspx)

**更新：** 只是想将人们指向另一个 StackOverflow[帖子](https://stackoverflow.com/questions/275098/what-applications-could-i-study-to-understand-datamodel-view-viewmodel)，其中包含很多关于 MV-VM 的好信息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-10-08T09:42:13.533

一个提示是不要在 XAML 中声明事件处理程序。相反，在代码隐藏中命名您的元素并附加事件处理程序。这有助于在设计人员和开发人员之间保持清晰的分离。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-06-03T15:53:09.653

正如其他人建议的那样，尝试遵循 Model-View-ViewModel 模式。但是，将东西放在代码隐藏中是可以的！规则是，如果它与“视图”相关，则将其放在 Xaml 或代码隐藏中（以您更方便的为准）。如果它更多的是与用户如何与系统交互相关的业务逻辑，那么它属于 ViewModel。如果只是业务逻辑不关心交互，它属于模型。

每一个的例子是：

*   **Model**：定义一个名为 ModifiedDate 的属性，用于存储上次修改的时间。

*   **ViewModel**：根据修改时间将 ModifiedDate 转换为名为 ModifiedAge 的枚举属性：昨天、上周、上个月、去年等。

*   **View**：将 ModifiedAge 属性转换为背景颜色，其中最近访问的数据以亮黄色突出显示，而最近访问的数据更多的是米色-卡其色，您的设计师坚持称为“Meadow Lark Lilly Flowerpot”。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-10-08T09:51:35.387

另一个技巧是将 XAML 分为功能性和美观性。开发人员通常会在功能 XAML 中工作，而设计人员主要关心美学。这使得功能 XAML 非常易于理解，这很重要，因为开发人员经常需要编辑此类 XAML。Aesthetic XAML 通常由设计人员使用工具进行编辑，因此其简洁性和冗长性不是问题。

[不久前，我在这里](http://kentb.blogspot.com/2008/01/xaml.html)写了一篇关于此的博客文章。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-07-15T03:47:36.540

不要忽视 XAML*是代码*这一事实。它是声明性的，但它仍然*是一种编程语言。*事实上，它在转换为 IL 以供 .NET 编译器使用之前，会先转换为 C# 或 Visual Basic。

我将回应 Scott Whitlock 的评论：MVVM 是一种很好的方式来分离关注点并专注于架构细节。把东西放在你的代码隐藏中真的非常好，尤其是他描述的东西。如果您不需要将设计人员与开发人员分开，请根据您的特定需求调整 MVVM 模式；不要试图强迫自己对此保持纯粹或理想主义。

如果您不需要使用 ICommand 类进行命令的灵活性，也可以在后面的 View 代码中直接调用 ViewModel 的方法。或者，如果您知道您正在制作的 View 将始终绑定到您正在制作的 ViewModel 类。或者您可以更进一步，为您的 ViewModel 定义一个接口，并仅绑定到该接口的实现。然后，您仍然可以随时更换 ViewModel。

像这样的东西。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-08T17:09:03.490

当您遵循像**Mode-View-ViewModel**这样的正确模式时，您将有机会在 XAML 方面做更多事情，而在代码背后做更少。最大限度地利用 WPF 代码中的**RoutedEvents**和**Commands**。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-08T10:11:56.843

在构建 UserControls 时，我尝试尽可能地进行 Xamlize。

我在该领域发现的一个提示是，手动创建`ControlTemplate`真的`DataTemplates`很痛苦......我总是用 XAML 编写这些......

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-05-27T08:28:48.987

我想说尽可能多地使用 xaml，使用`Binding`, `commands`,`styles`等`templates`。我必须支持使用 XAMLReader/XAMLWriter 保存和加载模板的功能，并且对于具有更多 xaml 的控件来说更容易。

# wpf - 防止用户使用 WPF ListView 调整列的大小

> ID：181956
> 
> 赞同：26
> 
> 时间：2008-10-08T09:41:14.050
> 
> 标签：wpf, gridview, listview

如何防止用户使用 ListView 控件调整 GridViewColumns 的大小？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-18T05:22:32.723

对于那些寻求更快更简单答案的人。

在 ColumnHeaderContainerStyle 中将 IsEnabled 设置为 False。这将阻止用户调整大小。

像这样：

```
<GridView.ColumnHeaderContainerStyle>
  <Style TargetType="{x:Type GridViewColumnHeader}">
       <Setter Property="IsEnabled" Value="False"/>
  </Style>
</GridView.ColumnHeaderContainerStyle> 
```

如果要修复禁用的灰显颜色，请在 IsEnabled 属性上添加一个触发器并修复您需要的内容。

```
<GridView.ColumnHeaderContainerStyle>
   <Style TargetType="{x:Type GridViewColumnHeader}">
       <Setter Property="IsEnabled" Value="False"/>
    <Style.Triggers>
       <Trigger Property="IsEnabled" Value="False">                
          <Setter Property="TextElement.Foreground" Value="Black"/>                       
       </Trigger>
    </Style.Triggers>
  </Style>
</GridView.ColumnHeaderContainerStyle> 
```

这个答案可能不像其他帖子那样优雅；但就我而言，我所需要的只是一种快速的方法。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-11-11T16:08:49.143

Darkonekt 的回答很好，但是最好设置`IsHitTestVisible`为 false 而不是`IsEnabled`. 这样做的好处是不会使标题变灰。

```
<GridView.ColumnHeaderContainerStyle>
    <Style BasedOn="{StaticResource {x:Type GridViewColumnHeader}}" TargetType="{x:Type GridViewColumnHeader}">
        <Setter Property="IsHitTestVisible" Value="False"/>
    </Style>
</GridView.ColumnHeaderContainerStyle> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-10-08T10:30:27.913

我找到了一个解决方案，也许有一天它会帮助别人；）

您必须覆盖 GridViewColumnHeader 的 ControlTemplate（默认模板在[此处](http://msdn.microsoft.com/en-us/library/ms788747.aspx)）并从模板中删除**PART_HeaderGripper**以防止调整列的大小。

还有另一种解决方案，其中介绍[了此处](http://blogs.msdn.com/atc_avalon_team/archive/2006/04/11/573037.aspx)描述的子类化 GridViewColumn 。出于表示目的，我更喜欢仅 xaml 的解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-24T10:57:36.873

一个顺利的解决方案：

```
<GridViewColumn ...>
    <GridViewColumn.HeaderContainerStyle>
        <Style TargetType="{x:Type FrameworkElement}">
            <Setter Property="IsHitTestVisible" Value="False"/>
        </Style>
    </GridViewColumn.HeaderContainerStyle>
</GridViewColumn> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2010-08-10T12:55:38.607

我可以按照这篇文章中的说明做类似的事情

[http://blogs.msdn.com/b/atc_avalon_team/archive/2006/04/11/573037.aspx](http://blogs.msdn.com/b/atc_avalon_team/archive/2006/04/11/573037.aspx)

我无法使用完整的 XAML 解决方案，因为由于它的动态性，我在代码中构建了所有内容。第一次尝试效果很好。

# templates - struts 项目中的瓷砖 - 比 freemarker 更好？

> ID：181966
> 
> 赞同：4
> 
> 时间：2008-10-08T09:47:05.487
> 
> 标签：templates, struts, velocity, tiles, freemarker

我想在 struts 应用程序中使用模板引擎，并且想知道是否可以推荐使用 TILES 而不是 FREEMARKER 或 VELOCITY。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-08T09:55:07.250

我以前在一个项目中使用过瓷砖。它对模板很有用，但它不能与velocity 或freemarker 相提并论：使用Tiles，您可以使用普通的JSP，并且仅限于您拥有的JSP 标签。

Velocity（可能还有 Freemarker，虽然我以前没用过）提供自己的标签或表达语言，所以你可以这样想：

`Hello ${name}`

这是您在普通 JSP 中无法做到的。[由于评论而更新：在 JSP 2.0 中，包含了 EL，因此您可以执行类似的操作。但是，我认为 Velocity 或 Freemarker 的功能更强大。]

如果您的布局包含许多不同的组件（即标题、侧边栏等），并且您想定义各种不同的模板，那么图块不是一个糟糕的选择。（尽管被警告 - 它可能是相当多的 XML！）

但是，如果您需要比普通 JSP 更“高级”的东西，Velocity 或 Freemarker 可能是您的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-10T15:27:29.657

我使用瓷砖和速度。

Tiles 非常适合将页面划分为组件并在屏幕之间重用标记，而 Velocity 是一种很棒的模板语言，在 php 世界中非常[聪明。](http://www.smarty.net/)

我建议不要在瓷砖和速度之间进行选择，而是同时使用两者。他们相得益彰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-26T17:26:30.987

或者你可以使用条纹。比瓷砖容易得多！

# php - 电子请假申请数据库设计

> ID：181967
> 
> 赞同：0
> 
> 时间：2008-10-08T09:50:08.010
> 
> 标签：php, postgresql

我目前正在处理休假申请（这是我的电子调度项目的一个子集），我的数据库设计如下：

```
event (event_id, dtstart, dtend... *follows icalendar standard*)

event_leave (event_id*, leave_type_id*, total_days)

_leave_type (leave_type_id, name, max_carry_forward)

_leave_allocation (leave_allocation_id, leave_type_id*, name, user_group_id, total_days, year)

_leave_carry_forward(leave_carry_forward_id, leave_type_id*, user_id, year) 
```

stackoverflow 中是否有人也在开发电子休假应用程序？介意分享您的数据库设计，因为我正在寻找比我更好的设计。我当前设计的问题只出现在年初系统正在计算可以结转的天数时。

总共我必须运行 1 + {$number_of users} * 2 查询（第一个查询分配规则的数量和最大结转配额。然后对于每个用户，我需要找出余额，并且然后将余额插入数据库）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T11:02:14.963

我没有很好地遵循架构（看起来每个 leave_type 都会结转？事件*表上没有用户？）但您应该能够在任何时间点动态得出余额 - 包括跨年.

AAMOF，规范化规则将要求您能够*得出*平衡。如果您随后选择*非规范化*以提高性能，则取决于您，但设计应支持计算查询。鉴于此，计算年终结转是基于单个集合的查询。

编辑：我不得不稍微更改架构以适应这一点，我选择规范化以使逻辑更容易 - 但如果需要，您可以在此过程中插入非规范化以提高性能：

首先是对这种情况很重要的表......希望我的伪语法会有意义：

```
User { User_Id (PK) }

// Year may be a tricky business logic issue here...Do you charge the Start or End year
// if the event crosses a year boundary? Or do you just do 2 different events?
// You want year in this table, though, so you can do a FK reference to Leave_Allocation
// Some RDBMS will let you do a FK from a View, though, so you could do that
Event { Event_Id (PK), User_Id, Leave_Type_Id, Year, DtStart, DtEnd, ... 
   // Ensure that events are charged to leave the user has
   FK (User_Id, Leave_Type_Id, Year)->Leave_Allocation(User_Id, Leave_Type_Id, Year)
}

Leave_Type { Leave_Type_Id, Year, Max_Carry_Forward 
   // Max_Carry_Forward would probably change per year
   PK (Leave_Type_Id, Year)
}

// Starting balance for each leave_type and user, per year
// Not sure the name makes the most sense - I think of Allocated as used leave,
// so I'd probably call this Leave_Starting_Balance or something
Leave_Allocation { Leave_Type_Id (FK->Leave_Type.Leave_Type_Id), User_Id (FK->User.User_Id), Year, Total_Days 
   PK (Leave_Type_Id, User_Id, Year)
   // Ensure that leave_type is defined for this year
   FK (Leave_Type_Id, Year)->Leave_Type(Leave_Type_Id, Year)
} 
```

然后，视图（您可能希望在其中应用一些非规范化）：

```
/* Just sum up the Total_Days for an event to make some other calcs easier */
CREATE VIEW Event_Leave AS
   SELECT
      Event_Id,
      User_Id,
      Leave_Type_Id,
      DATEDIFF(d, DtEnd, DtStart) as Total_Days,
      Year
   FROM Event

/* Subtract sum of allocated leave (Event_Leave.Total_Days) from starting balance (Leave_Allocation) */
/* to get the current unused balance of leave */
CREATE VIEW Leave_Current_Balance AS
   SELECT
      Leave_Allocation.User_Id,
      Leave_Allocation.Leave_Type_Id,
      Leave_Allocation.Year,
      Leave_Allocation.Total_Days - SUM(Event_Leave.Total_Days) as Leave_Balance
   FROM Leave_Allocation
   LEFT OUTER JOIN Event_Leave ON
      Leave_Allocation.User_Id = Event_Leave.User_Id
      AND Leave_Allocation.Leave_Type_Id = Event_Leave.Leave_Type_Id
      AND Leave_Allocation.Year = Event_Leave.Year
   GROUP BY
      Leave_Allocation.User_Id,
      Leave_Allocation.Leave_Type_Id,
      Leave_Allocation.Year,
      Leave_Allocation.Total_Days 
```

现在，我们的离开结转查询只是截至 1 月 1 日午夜的当前余额的最小值或最大结转。

```
 SELECT
      User_Id,
      Leave_Type_Id,
      Year,
      /* This is T-SQL syntax...your RDBMS may be different, but should be able to do the same thing */
      /* If not, you'd do a UNION ALL to Max_Carry_Forward and select MIN(BalanceOrMax) */
      CASE 
         WHEN Leave_Balance < Max_Carry_Forward 
             THEN Leave_Balance 
         ELSE 
             Max_Carry_Forward 
      END as Leave_Carry_Forward
  FROM Leave_Current_Balance
  JOIN Leave_Type ON
      Leave_Current_Balance.Leave_Type_Id = Leave_Type.Leave_Type_Id
      /* This assumes max_carry_forward is how much you can carry_forward into the next year */
      /* eg,, a max_carry_forward of 300 hours for year 2008, means I can carry_forward up to 300 */
      /* hours into 2009\. Otherwise, you'd join on Leave_Current_Balance.Year + 1 if it's how much */
      /* I can carry forward into *this* year. */
      AND Leave_Current_Balance.Year = Leave_Type.Year 
```

因此，在年底，您将在新的一年将结转余额重新插入 LeaveAllocation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-08T10:12:56.730

总会有更好的设计！！

你目前的设计有效吗？您期望有多少用户（即，您必须运行 x 千次查询是否重要）。

如果当前设计的问题只是在年初，那么也许你可以忍受它！

干杯

纽西兰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-09T02:00:14.337

关于我的数据库设计和一些用例的进一步说明。

# 表设计

这是存储事件的主表（基本上基于 iCalendar 架构）。事件可以是典型事件，也可以是会议、公共假期等。

```
event (event_id (PK), dtstart, dtend, ... --other icalendar fields--) 
```

如果特定类型的事件有我必须跟踪的额外信息，我会用另一张桌子装饰它。例如，存储电子休假特定信息的表。（total_days 不是作为要求的一部分的计算字段）

```
event_leave (event_id (PK/FK->event), total_days, leave_type_id (FK->leave_type)) 
```

请假类型表存储有关每个请假类型的一些信息。例如，应用程序是否需要批准/推荐等。除此之外，它还存储允许的最大结转。我假设最大结转不会经常改变。

```
leave_type (leave_type_id (PK), name, require_support, require_recommend, max_carry_forward) 
```

用户被分成组，每个组将被赋予一些休假类型的可休假天**数**。存储在此表中的数据将每年填充一次（每年更新一次）。它只存储每个**组**的休假数，而不是每个用户。

```
leave_allocation (leave_allocation_id, year(PK), leave_type_id (PK/FK->leave_type), total_days, group_id) 
```

接下来是存储结转信息的表。该表将每年**为每个用户**填充一次。该表将每年填充一次，因为动态计算并不容易。为用户计算 leave_carry_forward 的公式为：

```
leave_carry_forward(2009) = min(leave_allocation(2008) + leave_carry_forward(2007) - leave_taken(2008), maximum_carry_forward());

leave_carry_forward (leave_carry_forward_id, user_id, year, total_days) 
```

# 一些示例用例和解决方案

## 计算余额 (WIP)

为了计算余额，我对声明如下的视图进行查询

```
DROP VIEW IF EXISTS leave_remaining_days;
CREATE OR REPLACE VIEW leave_remaining_days AS
    SELECT      year, user_id, leave_type_id, SUM(total_days) as total_days
    FROM        (
            SELECT  allocated.year, usr.uid AS "user_id", allocated.leave_type_id, 
                allocated.total_days
            FROM    users usr
                JOIN app_event._leave_allocation allocated
                ON allocated.group_id = usr.group_id
            UNION
            SELECT  EXTRACT(year FROM event.dtstart) AS "year", event.user_id, 
                leave.leave_type_id, leave.total_days * -1 AS total_days
            FROM    app_event.event event
                LEFT JOIN app_event.event_leave leave
                ON event.event_id = leave.event_id
            UNION
            SELECT  year, user_id, leave_type_id, total_days
            FROM    app_event._leave_carry_forward
        ) KKR
    GROUP BY    year, user_id, leave_type_id; 
```

## 在年初填充 leave_allocation 表

```
public function populate_allocation($year) {
    return $this->db->query(sprintf(
        'INSERT INTO %s (%s)' .
            "SELECT '%s' AS year, %s " .
            'FROM   %s ' .
            'WHERE  "year" = %s',
        'event_allocation',
        'year, leave_type_id, total_days ...', //(all the fields in the table)
        empty($year) ? date('Y') : $year,
        'leave_type_id, total_days, ..', //(all fields except year)
        $this->__table,
        empty($year) ? date('Y') - 1 : $year - 1
    ))
    ->count() > 0;  // using the database query builder in Kohana PHP framework
} 
```

## 在年初填充 leave_carry_forward 表

### 找出分配给用户的休假类型

我可能需要重命名这个视图（我不擅长命名东西......）。它实际上是一个用户的 leave_allocation 表。

```
DROP VIEW IF EXISTS user_leave_type;
CREATE OR REPLACE VIEW user_leave_type AS
    SELECT  la.year, usr.uid AS user_id, lt.leave_type_id, lt.max_carry_forward
    FROM    users usr
            JOIN app_event._leave_allocation la
                JOIN app_event._leave_type lt
                ON la.leave_type_id = lt.leave_type_id
            ON usr.group_id = la.group_id 
```

### 实际查询

```
INSERT INTO leave_carry_forward (year, user_id, leave_type_id, total_days)
    SELECT      '{$this_year}' AS year, user_id, leave_type_id, MIN(carry_forward) AS total_days
    FROM        (
                    SELECT  year, user_id, leave_type_id, total_days AS carry_forward
                    FROM    leave_remaining_days
                    UNION
                    SELECT  year, user_id, leave_type_id, max_carry_forward AS carry_forward
                    FROM    user_leave_type
                ) KKR
    WHERE       year = {$last_year}
    GROUP BY    year, user_id, leave_type_id; 
```

# linux - 使用 Gambas 处理 Linux 信号

> ID：181970
> 
> 赞同：1
> 
> 时间：2008-10-08T09:51:14.433
> 
> 标签：linux, signals, gambas

当特定文件已更改时，我想从 bash 脚本向 Gambas 程序发送一个（尚未确定的）信号。

我怎样才能让我的 Gambas 程序处理这个信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-02T15:27:43.060

该`gb.signal`组件允许您管理信号。你可以拦截它们，忽略它们，等等。有关详细信息，请参阅[http://gambaswiki.org/wiki/comp/gb.signal](http://gambaswiki.org/wiki/comp/gb.signal)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-07T16:38:55.460

根据[http://www.mail-archive.com/gambas-user@lists.sourceforge.net/msg01890.html](http://www.mail-archive.com/gambas-user@lists.sourceforge.net/msg01890.html)和[http://www.nabble.com/Question-about-signal-management-inside-gambas- console-program---td20626972.html](http://www.nabble.com/Question-about-signal-management-inside-gambas-console-program---td20626972.html)，目前还不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-22T13:37:23.367

如果文档可以通过，这似乎是不可能的。但是，我建议在 Gambas 邮件列表（和/或 Stack Overflow 上指向此问题的链接）上提出相同的问题。如果您通过邮件列表得到答复，请报告。

# c++ - Visual Studio MAP 文件中的函数地址不正确

> ID：181975
> 
> 赞同：2
> 
> 时间：2008-10-08T09:52:37.770
> 
> 标签：c++, visual-studio, debugging

我在 Visual Studio 的 MAP 文件中的函数地址（Rva+Base）与我在调试器中看到的地址（或者当我手动检查堆栈帧时）不匹配。

这可能是什么原因造成的？

/AB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T10:51:25.140

问题出在可执行文件还是 DLL 中？

如果它是一个 DLL，它的首选加载地址是什么？如果这与任何其他 DLL 发生冲突，那么它将由加载程序重新设置，这可能会导致您看到的内容。

作为构建过程的一部分，您应该确保所有 DLL 都被重新定位（有一个工具可以做到这一点），以便它们的地址空间不会发生冲突（这会释放一些页面文件空间并缩短加载时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T11:36:18.653

exe 和 dll 都可以重定位，除非您在链接时指定 /FIXED 命令行选项。我使用以下方法来确定真实地址以确定我的 exe 加载的位置，以便我可以计算映射文件的偏移量。

```
static void KnownFunctionAddress(){}

...

// check an address of a known function
// and compare this to the value read from the map file

intptr_t CheckRelocationOffset(MapFile map)
{
  intptr_t mapAddress = map.PhysicalAddress("?KnownFunctionAddress@@YAXXZ");
  intptr_t realAddress = (intptr_t)KnownFunctionAddress;

  return realAddress-mapAddress;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-12-21T23:15:32.253

当您在调试器中并单步执行代码时，您是否可以检查代码地址是否在您在“模块”窗口中看到的范围内？有时，同一段代码可能存在于多个相同/不同名称的模块中。

一旦您确定了包含代码的“模块”，请使用“模块”窗口中的基地址来（通过减去）DLL 入口点地址。

最后还有入口跳转表（trampoline）的效果，它是一种函数调用间接，可以在编译时或运行时添加。因此，“入口点”地址可能是一个烟幕，与函数体的地址不匹配。

（我对 DLL 结构的理解有限，所以我的回答可能有不准确之处。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-03-14T11:48:07.410

由于某种原因，我无法直接回复 Suma 的回复，但您也可以执行以下操作：

```
extern "C" struct IMAGE_DOS_HEADER __ImageBase; // On platforms other than Win32/Win64, this MAY be a different header type...
...
printf_s("base: %p", &__ImageBase); 
```

__ImageBase 由链接器（至少是 VC++）定义，获取它的地址将为您提供模块（EXE/DLL）的基地址，即使它在运行时被重定位。

还有

```
printf_s("calling module's base: %p\n", GetModuleHandle(NULL)); 
```

它可以为您提供相同的基地址值...但是 GetModuleHandle 有更多注意事项（另外它需要 windows.h）所以我建议坚持使用 __ImageBase。

就像其他人提到的那样，您的问题可能与 Windows 重新定位您的模块有关。如果模块文件中没有 .reloc 部分，则该文件不可重定位，在这种情况下，就像您遇到蹦床或类似 rwong 建议的那样。

# visual-studio - Eclipse的旋风之旅？

> ID：181977
> 
> 赞同：3
> 
> 时间：2008-10-08T09:53:40.170
> 
> 标签：visual-studio, eclipse, ide

有谁知道 Eclipse 的旋风之旅可以帮助（前）Visual Studio 用户跟上它的速度？

我只想告诉我所有基本功能在哪里，以及我听说过的所有很酷的东西是什么？

到目前为止，我主要将它用作文本编辑器，并且在其中编译和运行程序时遇到了一些运气。但是...我有点困惑，例如有时我似乎无法退出调试模式。

我确定我只是在错误的地方寻找所有东西，因为我习惯了不同的界面。

是否有 Eclipse 的插件使它看起来和感觉更像 Visual Studio？

我目前正在使用 Europa，因为那是我团队其他成员使用的，但是我很高兴迁移到 Ganemede ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T10:01:25.600

尝试`Help -> Help Contents`（不是开玩笑）并阅读`Workbench User Guide`：

尤其是章`Concepts`。

同章也很好看`Java Development User Guide`

我确信在阅读了这几页之后，您会比普通的 Eclipse 用户了解更多（因为现在需要`Help`？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T11:10:47.440

如果您无法直接从 Eclipse 访问帮助，请尝试[http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/welcome.htm 。](http://help.eclipse.org/help32/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/welcome.htm)

IBM 还[为 Visual Studio 用户提供了 Eclipse 简介](http://www.ibm.com/developerworks/opensource/library/os-eclipse-visualstudio/)（尽管我从未使用过 Visual Studio，因此无法衡量它的用处）。

# database - SOA/ESB中的数据库集成方式？

> ID：181978
> 
> 赞同：2
> 
> 时间：2008-10-08T09:53:53.883
> 
> 标签：database, integration, soa, esb

*情况：一些银行有旧的遗留 ABS（自动银行系统）。*

银行希望：

1.  通知旧的旧 CRM 系统有关客户的帐户更改（发布操作）。
2.  检查客户卡的 PIN 码（请求/响应操作） - 在同步模式下。

ABS 是在非常古老的私有技术中通过 StoredProcedures 调用实现的。所以，我只能通过数据库连接到这个系统。

您知道哪些 Java/.Net (ESB) 应用程序与旧/遗留数据库系统集成的方式？

**写/发布操作**

任何供应商的数据库服务器：

1.  扫描表以查找新条目 - 速度太慢。
2.  触发器（如果它们受支持），它处理 SQL 更新并将事件信息插入和写入某个表。并且应用程序侦听器应该检查此表中的事件。
3.  Oracle serevr：PL/SQL 触发器 + Oracle AQ。和 JMS 的监听器。

**读取操作**

1.  只需将结果写入 ABS 表 - 危险。

2.  ...

如何以同步模式通知遗留数据库系统有关响应的信息？？？如何在同步模式下实现写/读？？？

**同样，您知道哪些 Java/.Net (ESB) 应用程序与旧/遗留数据库系统集成的方式？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-11T16:38:12.510

许多供应商都在大肆宣传 DataServices。我认为这些产品的最大价值在于集成不同的数据源。

我会考虑制作一个简单的“应用程序”，将这些数据作为服务公开

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T10:10:30.387

这取决于许多因素；特别是数据库的读/写吞吐量和性能敏感度。

数据库往往是有点敏感的东西，当它们经过微调以在特定系统中用于生产时，对于来自任意其他系统的通用访问通常非常脆弱；人们经常将数据库复制到另一个只读从数据库，然后可以用于进行集成工作和查询等。

然后，您可以根据需要使用触发器/轮询/JMS，而不会影响原始数据库。

取决于使用的数据库复制技术；然后，您可以经常在副本数据库中安装触发器（可以不时从主数据库中获得一点延迟） - 以最大限度地减少对生产数据库的影响

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-01T20:03:45.927

我可以建议您在银行中使用 Mule 作为 ESB（另请参见[http://www.mulesource.org/display/MULE/Home](http://www.mulesource.org/display/MULE/Home)）。

它允许您直接与数据库通信（jdbc 级别必须与存储过程以及表/视图级别一致）。我在将核心银行系统（数据库级别，Oracle）与独立应用程序（Web 服务级别）集成方面有积极的经验。

坦率地说，我没有得到你所有的问题（如果你愿意的话，你可以直接用俄语问我），但是 IMO Mule 是你的方式 - 它可以使用 JMS、JDBC、文件级别和许多其他内容，并将同步和异步事件处理为好吧（另请参阅[http://www.mulesource.org/display/MULE2USER/Available+Transports](http://www.mulesource.org/display/MULE2USER/Available+Transports)）。

再次感谢。

PS 为了让讲英语的观众更清楚，我可以建议您使用更标准的术语核心银行系统而不是 ABS（这在 xUSSR 国家/地区意味着相同）。

# email - 在 MS Outlook 中组织电子邮件的最佳方式是什么？

> ID：181986
> 
> 赞同：11
> 
> 时间：2008-10-08T09:56:07.093
> 
> 标签：email, project-management

每个软件开发专业人员（尤其是项目经理）都必须处理源源不断的电子邮件。在 MS Outlook 中组织它们的最佳方式是什么？

显然，一些花哨的问题跟踪工具提供了更大的灵活性，但我对可以在大多数组织中部署的普通方法感兴趣。

PS 查找电子邮件通常是需要解决的最少的问题。现在搜索还不错。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-12T20:14:15.363

在我的主收件箱中，我有 3 个子文件夹：Do、Done、Defer 和 3 个宏，用于将所选文件夹移动到相关文件夹中。（alt-1 将选定的邮件移动到完成，然后选择下一封邮件）。每天我都会快速地将收件箱过滤到三个文件夹中。我可以在 20 分钟左右的时间内处理数百封邮件。

做，我希望今天处理的事情。完成了，我不关心/已经阅读和理解的东西，我不希望今天再参考这些。推迟，我会做一些事情，但不是今天。

在处理结束时，我希望我的收件箱是空的。

在一天结束时，Do 中的所有邮件项目都移至 Defer（我不想让事情在一夜之间完成）。

在一天开始时，Defer 中的所有项目都使用上述规则进行过滤，我不想在 Defer 中放置超过一两天的时间。如果东西停留时间太长，我会将其添加到我的日记中以便稍后处理.

一天结束时，完成中的所有邮件都将根据月/年复制到存档文件夹中。Done 只是一个存放东西的停车位。

我使用一个工具来索引我的档案，我实际上使用 X1，但谷歌桌面是一个很好的选择。

我过滤掉了我想在展望笔记中引用的任何重要事实。

我过滤掉任何我想重新聚焦到全焦点 ( [http://www.omnigroup.com/applications/omnifocus/](http://www.omnigroup.com/applications/omnifocus/) ) 的任务，这是我找到的最好的 GTD。

我从不将我的收件箱用作待办事项列表或记录我以后想回忆的微妙事实的机制。我知道很多人都这样做，但恕我直言，这只是一种糟糕的方式。

（交叉张贴到 LJ）。

编辑。

哦，根据上面的帖子，我还通过邮件发送到的邮件列表过滤任何未直接发送给我的邮件。我对每个邮件列表给予不同程度的关注。对于每个邮件列表，我确实遵循上述机制，但有些我看了一眼，有些我会详细处理。

重新编辑

在评论中，我被要求提供我上面提到的宏的来源。我不建议这被视为良好 VBA 的一个例子，我很确定它来自互联网并适用于我的目的。它已经可靠地工作了很多年。

```
Sub MoveToDone()
    On Error Resume Next

    Dim objFolder As Outlook.MAPIFolder, objInbox As Outlook.MAPIFolder
    Dim objNS As Outlook.NameSpace, objItem As Outlook.MailItem

    Set objNS = Application.GetNamespace("MAPI")
    Set objInbox = objNS.GetDefaultFolder(olFolderInbox)
    Set objFolder = objInbox.Folders("Done")

    'Assume this is a mail folder

    If objFolder Is Nothing Then
        MsgBox "This folder doesn't exist!", vbOKOnly + vbExclamation, "INVALID FOLDER"
    End If

    If Application.ActiveExplorer.Selection.Count = 0 Then
        'Require that this procedure be called only when a message is selected
        MsgBox "No msgs selected", vbOKOnly + vbExclamation, "NO_MSG_SELECTED"
        Exit Sub
    End If

    For Each objItem In Application.ActiveExplorer.Selection
        If objFolder.DefaultItemType = olMailItem Then
            If objItem.Class = olMail Then
                objItem.Move objFolder
            End If
        End If
    Next

    Set objItem = Nothing
    Set objFolder = Nothing
    Set objInbox = Nothing
    Set objNS = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-12T20:00:40.900

根据您收到的邮件数量，我有两种可以一起使用的策略：

1)**正如上面大多数人所建议的那样，将收件箱用作待办事项列表，并保持干净。有 1 个存档邮件文件夹，并使用所有搜索工具进行搜索！**

2)**如果您收到大量邮件，请使用过滤器将仅抄送您的邮件移动到另一个文件夹。然后每天只检查该文件夹 N 次（我使用 N=3，早上，午餐和回家时间）**

您会惊讶于它为您节省了多少时间，尤其是当您发现自己喜欢阅读收件箱中的邮件以保持收件箱清洁时。

这可以阻止非紧急邮件扰乱您的流程，并且速度更快，因为您现在可以阅读 TO 列表中的人员的整个转换线程。

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-08T10:00:11.670

任何自动生成的电子邮件都会自动过滤到其自己的文件夹中。每个项目的单独文件夹，人力资源和一般公司垃圾的更多文件夹。基本上收件箱应该只包含需要响应的东西，一旦响应消息移动到文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-08T11:53:05.017

我将任何需要我注意的东西都保存在我的收件箱中，并将完成的所有内容移到我的保存文件夹中。

我从星期一开始使用类别，我认为它们是更多人需要注意的事情。

我有一些规则可以从主题中检测项目名称并自动分配到正确的类别，并将我的收件箱设置为按类别分组。

最后，我使用 Google 桌面进行搜索——虽然不喜欢我将邮件移动到我的已保存文件夹，但更快更容易。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-10-08T10:10:47.173

安装[LookOut](http://www.lockergnome.com/windows/2004/07/26/microsoft-lookout-for-outlook/)，将所有内容留在收件箱中，然后搜索内容。

好吧，也许做*一些*组织，但是 LookOut 非常好，搜索越好，你需要做的手动组织就越少，这是一件好事，IMO。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-08T10:35:59.837

我用文件夹！！！我们通常会得到具有唯一编号的任务！所以文件夹以任务编号命名！！

已完成任务的文件夹移动到存档！简单而强大！我发现它很有用，并且在过去 3 年多的时间里一直在关注它

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-10-08T10:47:19.297

我只有两个文件夹：我的收件箱和一个名为“存档”的子文件夹。我的收件箱是我的待办事项列表。如果任何消息需要进一步关注，或者有一些需要完成的操作，或者我正在等待某事的答复，它会保留在收件箱中。如果处理完毕，我会将其移至存档。

因此，如果它在收件箱中，它会提醒我每次检查电子邮件时仍需要做的事情。

使用 Vista 的 Outlook 中的搜索索引使搜索电子邮件与使用 Google Mail 一样有趣，因此您可以应用与他们相同的策略。为什么要删除电子邮件？

此外，我关闭了自动归档功能，并将所有电子邮件保存在本地。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-08T11:01:19.893

我使用与这篇 GTD 文章相同的原则 -[链接文本](http://lifehacker.com/software/geek-to-live/getting-things-done-with-google-notebook-256844.php)

本质上，我保持收件箱清晰，并将所有内容移动到文章中提到的文件夹中。如今，搜索已经足够好，您不需要无穷无尽的子文件夹。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-10-08T11:23:16.887

似乎每个人都建议使用文件夹；我建议分类。

我有 1 个有效的 pst 和每个归档年 1 个 pst，每封邮件都分配一个或多个类别。将文件夹视图调整为按类别分组。

主要优点是您可以将多个类别分配给单个邮件。

仍然需要注意的所有内容都在收件箱中，没有类别。

哦，是的，还有规则！如前所述，自动电子邮件的规则以及已知发件人的规则，将收到的邮件归档到一个特殊的收件箱文件夹中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-08T10:00:23.027

文件夹！很好很简单。

多年来，我发现这些对于帮助根据客户或项目组织单独的电子邮件非常宝贵。即使涉及多方，我最多也只需查看 2 个文件夹即可找到我想要的内容。

编辑：与 tloach 所说的类似，我基本上将收件箱用作我仍需要查看的待办事项列表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-08T10:00:48.580

每个项目 1 个文件夹。
1 个个人邮件文件夹。
1 个文件夹用于支持。

大多数其他事情的收件箱。

我通常会设置规则以自动将邮件直接发送到正确的文件夹中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-08T10:17:51.057

文件和文件夹、自动筛选和小型收件箱（即[收件箱零](http://www.43folders.com/izero)）都是很好的做法，但最终都是为了能够在需要时找到电子邮件，而对于 Outlook，目前只有一个答案。

安装[Xobni](http://www.xobni.com/)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-10-08T10:25:54.100

我使用[Windows 桌面搜索](http://www.microsoft.com/windows/products/winfamily/desktopsearch/default.mspx)。

我有一个巨大的离线 PST，我可以在其中移动所有内容，并且可以通过搜索轻松找到任何内容。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-10-08T10:42:37.467

*   使用文件夹 - 每个主题前一个。项目 X、营销、个人、TODO 等。
*   我也使用 Xobni 快速查找来自特定发件人的电子邮件。
*   两个“特殊”文件夹：“收件箱”用于发送给我的电子邮件，“收件箱-抄送”用于我抄送的电子邮件。新电子邮件到达其中一个文件夹，然后我决定将它们存储在哪里。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-10-14T15:12:59.887

[Merlin Mann 作为收件箱零花](http://www.43folders.com/izero)了很多时间来探索这个。谷歌有一个很棒的视频[演示，](http://video.google.com/videoplay?docid=973149761529535925&hl=en)非常值得一看。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-10-24T16:25:00.270

我是一个极端的分拣员，并且在重新组织我老板的电子邮件模式方面度过了一段有趣的时光——她每天收到 500 封电子邮件。垃圾邮件之后。并要求她的所有电子邮件都保留在 Outlook 中（这意味着将电子邮件从 2001 年转移到存档文件中已经过时）。这仍然是一个有机的过程，但最有效、最容易被她采用的是：

1）使用文件夹来分隔功能区域。例如：包含合同（每个有效合同都有一个子文件夹）、业务发展（提案/潜在客户）和个人发展（教育和会议材料、收据等）的公司或工作文件夹。公司文件夹之外是非工作相关电子邮件的个人文件夹。

我唯一的经验法则是拥抱文件夹的使用，但不要对子文件夹发疯。将 M&Ms 与 Snickers 和 Dairy Milks 分开是一回事，将 M&Ms 的颜色分开是另一回事。

2）类别很烂。它们不是标签或标签。他们有缺陷。也就是说，除了 Outlook 2003 中的标志之外，几乎没有其他方法可以帮助您突出显示/着色电子邮件。我设置了一个规则来对公司内其他员工发送的任何电子邮件进行分类，因此它们不会被忽视。

一旦完成：规则，规则，规则。我没有找到限制。我首先有各种高度精炼的垃圾邮件过滤器，然后是新闻过滤器，它将所有列表和新闻通讯以及 RFP 公告移动到新闻文件夹并将它们标记为已读（未读消息表示优先级并需要注意；新闻是可选的 - 它是拖延，不工作）。然后，每个合同都有一条规则，将客户域中的任何电子邮件过滤到相应的合同文件夹。

当然，我会说阅读[收件箱零](http://www.43folders.com/izero)（特别是[这个](http://www.43folders.com/2006/03/14/delete)）和[电子邮件禅宗](http://zenhabits.net/2007/01/email-zen-clear-out-your-inbox/ "电子邮件禅")，并在继续之前了解对你最重要的好处。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-10-24T16:32:39.410

我只是将它全部保存在我的收件箱中并让它自动存档。这样我就可以对收件箱进行排序和搜索以查找任何内容。Google 桌面搜索也有帮助。

我知道有些人会小心翼翼地将他们的电子邮件重新分配到一个巨大的文件夹层次结构中。他们永远找不到超过 2 天的东西！“也许我把它放在 Project X 下；不，也许放在 Oracle 问题下；不，……”

# delphi - Any complete library for Jabber in Delphi?

> ID：181987
> 
> 赞同：5
> 
> 时间：2008-10-08T09:56:30.977
> 
> 标签：delphi, xmpp

I'm looking for for a Jabber library for Delphi, I can see some COM based jabber components. But I'm looking for a real VCL library.

Somebody knows one?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-08T13:37:41.077

You could compile the code that underlies Exodus into a VCL. That code is called JOPL, and can be found at [Google Code](http://code.google.com/p/exodus/source/browse/#svn/trunk/jopl).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-08T10:23:02.920

The Jabber protocol (XMPP) is supported by [IP*Works's xmpp component](http://www.nsoftware.com/products/component/xmpp.aspx).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-02-25T00:30:50.030

There is a Delphi XMPP client in the "Delphi on Rails" project here: [dorXMPPClient.pas](http://code.google.com/p/delphionrails/source/browse/trunk/src/dorXMPPClient.pas)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T00:37:22.067

Bricksoft have VCL component for MSN,YAHOO,AIM,ICQ and Jabber/GTalk.

Pls visit our website [http://www.imcomponents.com/](http://www.imcomponents.com/) if you want to get more information.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-29T22:03:13.720

Take care: Jopl is licensed as GPLv2\. So, if you wanna doing a commercial work, you'll need another library...

# php - 以编程方式访问货币汇率

> ID：181990
> 
> 赞同：113
> 
> 时间：2008-10-08T09:58:42.720
> 
> 标签：php, currency, finance

我正在建立一个在线订购系统，但我在澳大利亚，对于国际客户，我想以美元或欧元显示价格，这样他们就不必费力地从澳元兑换成美元。

有谁知道我是否可以以一种易于解析的格式从网上获取最新汇率，我可以从我的 PHP 脚本访问？

* * *

**更新：**我现在写了一个 PHP 类来实现这个。[您可以从我的网站获取代码](http://www.doctort.org/adam/general/currency-calculation-in-php.html)。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2008-10-08T10:23:43.697

您可以从 yahoo 获得简单格式的货币转换：

例如，要将 GBP 转换为 EUR： `http://download.finance.yahoo.com/d/quotes.csv?s=GBPEUR=X&f=sl1d1t1ba&e=.csv`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2010-04-05T12:18:55.670

这个答案已经很晚了，但是上面的答案中缺少一些关键信息。

如果您想向您的客户显示准确的价格，了解外汇汇率的运作方式非常重要。

大多数外汇服务仅报价即期汇率（介于买入价和卖出价之间）。现货是汇率的一种简写，但没有人能拿到现货，因为你只能在买价时卖出或在卖价时买进。您通常会在它们之间寻找至少 1% 的价差，因此您的客户的即期汇率为 0.5%。

但这并不止于此，您的客户几乎可以肯定使用信用卡，而 Visa/Mastercard/Amex 都收取外汇费用。根据我的经验，这些都不是微不足道的，至少 2.5%。例如，花旗澳大利亚银行收取 3.3% 的费用。这些因卡而异，因此您无法预测客户将被计费的最终价格。

如果您想根据汇率向您的客户报价“准确”的价格，您需要考虑上述因素并提供缓冲，这样您最终的收费就不会超过您的报价。

FWIW，我一直在 F/X 转换的其他情况下增加 4%。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2009-02-28T16:35:27.087

可能会很好添加

  [http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml](http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml)

到列表中。

官方参考利率由[欧洲中央银行](http://www.ecb.int/)根据欧洲中央银行体系内外中央银行之间的日常协调程序提供。

提要采用 XML 和[其他一些格式](http://www.ecb.int/stats/exchange/eurofxref/html/index.en.html#dowloads)。
更新通常在欧洲央行时间（=法兰克福时间）下午 2.15 (14:15) 进行。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2011-12-05T20:41:06.670

另一个非常棒的免费和开源链接是：

~~[https://raw.github.com/currencybot/open-exchange-rates/master/latest.json](https://raw.github.com/currencybot/open-exchange-rates/master/latest.json)
（我在这里找到了它：http: [//josscrowcroft.github.com/open-exchange-rates/](http://josscrowcroft.github.com/open-exchange-rates/)）~~
**[更新] ：**
Open Exchange Rates 项目数据已从 GitHub 移出。
现在可在以下网址获得：http: [//openexchangerates.org/](http://openexchangerates.org/)
JSON 格式的数据可在以下网址获得：http: [//openexchangerates.org/latest.json](http://openexchangerates.org/latest.json)

~~没有访问费用，没有速率限制~~，没有丑陋的 XML - 只是~~免费~~的，每小时更新的 JSON 格式的汇率。
现在这不是“完全”免费的。新的许可规定每月最多允许 1000 次点击，然后您需要付费。如果您想使用单一货币转换器（基本功能），您还需要付费。

[注意：您可能也想看看[这个](https://stackoverflow.com/a/8391430/1082289)答案。]

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-10-02T02:04:36.680

我最近实现了同样的事情，但使用了谷歌的 API。查询 URL 如下所示：

```
http://www.google.com/ig/calculator?hl=en&q=1GBP=?USD 
```

它需要3个参数。第一个参数是金额，后跟要转换的[ISO 4217](http://www.xe.com/iso4217.php)货币代码、等号和问号，以及要转换为的货币代码。[您可以在此处](http://www.kerstner.at/en/2011/12/liste-of-currencies-supported-by-google-currency-converter-iso-4217-codes/)找到 Google 支持的代码列表。对查询的响应将如下所示：

```
{lhs: "1 British pound",rhs: "1.6132 U.S. dollars",error: "",icc: true} 
```

这是不言自明的，所以我不会在这里详细介绍。这就是我处理查询响应的方式：

```
function convert_currency($amount, $from_code, $to_code){
    ini_set('max_execution_time', 60);
    $temp = 'http://www.google.com/ig/calculator?hl=en&q=' . $amount . $from_code . '=?' . $to_code;

    $response = file_get_contents($temp);
    $result_string = explode('"', $response);

    $final_result = $result_string['3'];

    $float_result = preg_replace("/[^0-9\.]/", '', $full_result);

    return $float_result;
} 
```

我敢肯定这远非最优雅的方法，但我对 PHP 还是很陌生。希望能帮助到你！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2010-11-25T06:44:01.753

我在 YQL 中添加了 Open Data 表，您可以使用它从 yahoo.finance 检索汇率数据。

[在 YQL 控制台中尝试](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20yahoo.finance.xchange%20where%20pair%3D%22eurusd%2C%20gbpusd%22&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys)

逗号分隔格式比“where pair in ('EURUSD','GBPUSD')”更可取，但无论如何，您可以同时使用它们甚至混合使用它们。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-08T10:07:16.213

这是提供汇率的肥皂服务

[http://www.newyorkfed.org/markets/pilotfx.html](http://www.newyorkfed.org/markets/pilotfx.html)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-10-08T10:10:31.167

本网站免费提供货币换算服务：

[http://www.webservicex.net/WS/WSDetails.aspx?WSID=10](http://www.webservicex.net/WS/WSDetails.aspx?WSID=10)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-10-01T06:58:16.957

[试试这个](http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=USD&ToCurrency=PHP)RESTful（我不确定这是否真的是一个 REST，因为我最初是从 SOAP 获得的，我只是尝试使用 HTTP GET 访问它）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-08-15T11:35:06.437

## iGoogle 已于 2013 年 11 月 1 日停用。此 API 不再有效。

要获得汇率，您可以使用以下内容：

```
function get_exchange_rate($from, $to){
    $data = file_get_contents("http://www.google.com/ig/calculator?hl=en&q=1{$from}=?{$to}");
    preg_match('/rhs\:\s?"([0-9\.]+)/', $data, $m);
    return $m[1];
} 
```

您可以在其中添加数据库缓存以确保您不会受到限制等。

正如在其他帖子/评论中所指出的那样，您将使用此汇率来计算您的货币

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-08T10:06:48.770

[XE.com](http://www.xe.com/cus/)提供他们的汇率信息。虽然不是免费的。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-10-01T00:20:18.773

Oanda.com 将货币汇率作为 XML API 公开，但不是免费的

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-08T09:59:43.683

coinnill.com 有一种网络服务。

> [http://coinmill.com/rss/AUD_USD.xml](http://coinmill.com/rss/AUD_USD.xml)

例如，将为您提供 AUD --> USD 汇率。您只需要解析返回的 XML。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2010-09-29T08:58:43.257

我觉得有必要补充：

[http://www.exchangerate-api.com/](http://www.exchangerate-api.com/)

使用干净的 RESTful API 非常简单，注册只需 5 秒。包括大多数主要语言的编码示例，大多数是 2-3 行长。

费率每小时更新一次，因此适用于大多数用途，您每月只需 7 美元即可获得 30000 次查询。我从来没有需要更多的东西，但是对于更高的数量来说，价格是非常合理的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-11-22T11:31:03.813

这对我有用。

货币汇率 API：[http ://currency-api.appspot.com/](http://currency-api.appspot.com/)

# visual-studio - 如何更改 Visual Studio 的默认 Web 浏览器？

> ID：181992
> 
> 赞同：2
> 
> 时间：2008-10-08T09:59:10.080
> 
> 标签：visual-studio, visual-studio-2008, silverlight, browser

这是一个未锚定到 .aspx 文件的 Silverlight 项目，因此右键单击等有点不可能。有任何想法吗？

编辑：

添加一个 .html 文件，然后单击它。真是傻。上次我在凌晨三点问一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-08T10:06:15.497

为什么右键单击是不可能的？至少对于任何 HTML 文档（即使在*Miscellaneous Files*中），您都可以右键单击它，选择*Browse With...*，选择浏览器，然后单击***Set as Default***。如果浏览器未出现在列表中，请单击*添加*...。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T22:40:37.603

默认浏览器更换扩展：

[http://visualstudiogallery.msdn.microsoft.com/233945ae-0b7b-47e7-9b02-c5a11798afb5](http://visualstudiogallery.msdn.microsoft.com/233945ae-0b7b-47e7-9b02-c5a11798afb5)

# python - 用于验证来自 Google 安全浏览 API 的更新的代码

> ID：181994
> 
> 赞同：3
> 
> 时间：2008-10-08T09:59:55.353
> 
> 标签：python, api, verification, safe-browsing

为了验证来自[Google 安全浏览 API](http://code.google.com/apis/safebrowsing/developers_guide.html)的数据，您可以计算每次更新的消息验证码 (MAC)。执行此操作的说明（来自 Google）是：

> MAC 是从 MD5 摘要中根据以下信息计算得出的：client_key|separator|table data|separator|client_key。分隔符是字符串：coolgoog: - 这是一个冒号，后跟“coolgoog”，后跟一个冒号。生成的 128 位 MD5 摘要采用 websafe base-64 编码。

还有要检查的示例数据：

```
client key: "8eirwN1kTwCzgWA2HxTaRQ==" 
```

回复：

```
[goog-black-hash 1.180 update][mac=dRalfTU+bXwUhlk0NCGJtQ==]
+8070465bdf3b9c6ad6a89c32e8162ef1   
+86fa593a025714f89d6bc8c9c5a191ac
+bbbd7247731cbb7ec1b3a5814ed4bc9d
*Note that there are tabs at the end of each line. 
```

我无法获得比赛。请指出我哪里出错了，或者只写几行必要的 Python 代码！

FWIW，我希望能够做这样的事情：

```
>>> s = "+8070465bdf3b9c6ad6a89c32e8162ef1\t\n+86fa593a025714f89d6bc8c9c5a191ac\t\n+bbbd7247731cbb7ec1b3a5814ed4bc9d\t"
>>> c = "8eirwN1kTwCzgWA2HxTaRQ=="
>>> hashlib.md5("%s%s%s%s%s" % (c, ":coolgoog:", s, ":coolgoog:", c)).digest().encode("base64")
'qfb50mxpHrS82yTofPkcEg==\n' 
```

但如您所见，'qfb50mxpHrS82yTofPkcEg==\n' != 'dRalfTU+bXwUhlk0NCGJtQ=='。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-08T20:07:42.630

安德斯的回答提供了必要的信息，但不是很清楚：客户端密钥需要在组合之前进行解码。（上面的示例也缺少在最终表格数据末尾的换行符）。

所以工作代码是：

```
>>> s = "+8070465bdf3b9c6ad6a89c32e8162ef1\t\n+86fa593a025714f89d6bc8c9c5a191ac\t\n+bbbd7247731cbb7ec1b3a5814ed4bc9d\t\n"
>>> c = "8eirwN1kTwCzgWA2HxTaRQ==".decode('base64')                            
>>> hashlib.md5("%s%s%s%s%s" % (c, ":coolgoog:", s, ":coolgoog:", c)).digest().encode("base64")
'dRalfTU+bXwUhlk0NCGJtQ==\n' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-08T10:47:51.030

```
c="8eirwN1kTwCzgWA2HxTaRQ==".decode('base64') 
```******