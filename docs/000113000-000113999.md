# StackOverflow 问答 000113000-000113999

# vxworks - 如何从 VxWorks 中的 RTP 访问我的内存映射 I/O 设备 (FPGA)？

> ID：113001
> 
> 赞同：2
> 
> 时间：2008-09-22T03:14:32.553
> 
> 标签：vxworks

使用 VxWorks 时，我们试图从实时进程访问内存映射的 I/O 设备。
由于 RTP 具有内存保护，我如何从一个访问我的 I/O 设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T03:21:49.540

您可以使用两种方法从 RTP 访问 I/O 映射设备。

**I/O 子系统**（首选）

您实际上创建了一个小型设备驱动程序。该驱动程序可以集成到 VxWorks 的 I/O 子系统中。集成后，RTP 只需使用标准 I/O 操作即可使用驱动程序：打开、关闭、读取、写入、ioctl。

请注意，“创建设备驱动程序”并不一定很复杂。它可以像为 ioctl 函数定义一个包装器一样简单。有关详细信息，请参阅 ioLib。

**直接映射内存**（不推荐）

您可以通过 sdOpen 调用创建一个共享内存区域。创建共享内存时，您可以指定物理地址应该是什么。指定地址为您设备的 I/O 映射区域，您可以直接访问该设备。

问题是共享内存区域是**任何**空间都可以使用的公共对象，直接在硬件上进行操作与 RTP 背后的理念背道而驰。

# python - 用 Python 写入 windows 日志

> ID：113007
> 
> 赞同：15
> 
> 时间：2008-09-22T03:15:31.723
> 
> 标签：python, windows, logging

是否可以在 python 中写入 Windows 日志？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-22T03:16:58.957

是的，只需使用 Windows Python 扩展，如此[处](http://www.ravenbrook.com/project/p4dti/master/design/win32-eventlog/ "python中的Windows事件日志")所述。

```
import win32evtlogutil
win32evtlogutil.ReportEvent(ApplicationName, EventID, EventCategory,
                EventType, Inserts, Data, SID) 
```

# asp.net - IIS 6.0 顽固地记住身份验证设置

> ID：113013
> 
> 赞同：0
> 
> 时间：2008-09-22T03:18:43.197
> 
> 标签：asp.net, http, authentication, iis-6, http-status-code-401

我的应用程序的文件夹中有一个 .asmx，并且我不断收到 401 尝试访问它。

我已经两次和三次检查了包括目录安全设置在内的设置。它允许匿名。我关闭了 Windows 身份验证。

如果我删除应用程序及其所在的文件夹，然后以相同的应用程序名称重新部署它，它会神奇地重新应用旧设置。

如果我将完全相同的应用程序部署到服务器上的不同文件夹并以新名称创建另一个应用程序并再次设置目录安全设置，它就可以工作！！！

如何让 IIS 忘记原始应用程序名称下的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T03:51:19.127

删除 IIS 中的第一个应用程序及其磁盘上的相关文件后，尝试重新启动 IIS（或您的服务器，如果可能）。然后回来重新创建整个设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T07:14:33.007

最终我让它再次工作。通过部署到不同的文件夹并为其重新创建虚拟文件夹/应用程序。

我不确定这有什么不同，但至少事情又恢复了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T13:40:00.897

我遇到了与 asp.net 页面类似的情况。我为虚拟目录启用了匿名并关闭了集成，但一页是相反的。一切正常，直到我转到一个特殊页面，然后我的回帖停止工作，我无法退出该站点，直到我部署到一个新的虚拟目录。

我最终的解决方案是为整个站点启用匿名和集成，然后在该页面上关闭匿名。

# php - 通过 rss 提要将 html 嵌入代码传递给 php 中的 rss 解析器的最佳方法是什么？

> ID：113024
> 
> 赞同：3
> 
> 时间：2008-09-22T03:22:45.090
> 
> 标签：php, html, xml, validation, rss

我试图将用于 Flash 视频的 html 嵌入代码放入 中，然后将由我的其他站点上`rss feed`的解析器进行解析。`(magpie)`我应该如何在一侧对嵌入代码进行编码，然后在另一侧对其进行解码，以便我可以将干净的 html 插入到`DB`接收服务器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T04:36:54.820

由于 RSS 是 XML，您可能想查看 CDATA，我相信它在各种 RSS 规范中都是有效的。

<摘要><![CDATA[此处的数据]]>

这是 w3schools 的条目：[http ://www.w3schools.com/XML/xml_cdata.asp](http://www.w3schools.com/XML/xml_cdata.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T03:36:08.040

htmlencode/htmldecode 应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T03:39:03.210

我一直在使用 htmlentities/html_entity_decode 但由于某种原因它不适用于解析器。在正常测试中它可以工作，但解析器总是返回不带 < > " 字符的 html 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T03:47:14.003

RSS 是 XML。它有非常具体的 HTML 编码规则。如果您正在生成它，我建议您使用 xml 库来编写包含 HTML 的节点，以确保您获得正确的编码。

HTMLencode 只会执行在 HTML 中嵌入数据所需的转义，XML 规则更严格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T08:53:57.417

与其编写自己的 RSS XML 提要，不如考虑使用以下 Django 联合框架`django.contrib.syndication`：

[https://docs.djangoproject.com/en/dev/ref/contrib/syndication/](https://docs.djangoproject.com/en/dev/ref/contrib/syndication/)

它还支持附件，这是嵌入图像或视频的 RSS 方式。

对于自定义标签，还有一个允许您更改 XML 的低级 API： [https ://docs.djangoproject.com/en/dev/ref/contrib/syndication/#the-low-level-framework](https://docs.djangoproject.com/en/dev/ref/contrib/syndication/#the-low-level-framework)

# algorithm - 稳定、高效的排序？

> ID：113025
> 
> 赞同：14
> 
> 时间：2008-09-22T03:23:39.567
> 
> 标签：algorithm, language-agnostic, data-structures, sorting

我正在尝试创建一个非常节省空间的不寻常的关联数组实现，我需要一个满足以下所有条件的排序算法：

1.  稳定（不更改具有相同键的元素的相对顺序。）
2.  就地或几乎就地（O(log n) 堆栈很好，但没有 O(n) 空间使用或堆分配。
3.  O(n log n) 时间复杂度。

还要注意，要排序的数据结构是一个数组。

很容易看出，有一个基本算法可以匹配这三个中的任何 2 个（插入排序匹配 1 和 2，合并排序匹配 1 和 3，堆排序匹配 2 和 3），但我一生都找不到任何符合所有这三个条件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-22T03:25:40.060

我相信合并排序可以写成就地。这可能是最好的路线。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T04:14:33.093

**注意**：标准快速排序*不是*O(n log n) ！在最坏的情况下，它可能需要 O(n^2) 时间。问题是您可能会以远离中位数的元素为中心，因此您的递归调用非常不平衡。

有一种方法可以解决这个问题，即仔细选择一个可以保证或至少很可能接近中位数的中位数。令人惊讶的是，您实际上可以在线性时间内找到确切的中位数，尽管在您的情况下，这听起来像是您关心速度，所以我不建议这样做。

我认为最实用的方法是实现一个**稳定的快速排序**（它很容易保持稳定），但使用**5 个随机值的中值作为**每一步的枢轴。这使得您不太可能进行缓慢的排序，并且是稳定的。

顺便说一句，归并排序可以在原地完成，尽管在原地和稳定的情况下都很难。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-22T03:25:36.363

快速排序呢？

Exchange 也可以这样做，按照您的条款可能更“稳定”，但快速排序更快。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T04:07:14.190

[维基百科](http://en.wikipedia.org/wiki/Sorting_algorithm#List_of_sorting_algorithms)上有一个排序算法列表。它包括按执行时间、稳定性和分配进行的分类。

您最好的选择可能是将有效的不稳定排序修改为稳定，从而降低其效率。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-10-04T14:26:01.060

因为您的元素位于数组（而不是链接列表）中，所以您可以在数组索引本身中获得有关它们原始顺序的一些信息。您可以通过编写排序和比较函数来了解索引来利用这一点：

```
function cmp( ar, idx1, idx2 )
{
   // first compare elements as usual
   rc = (ar[idx1]<ar[idx2]) ? -1 : ( (ar[idx1]>ar[idx2]) ? 1 : 0 );

   // if the elements are identical, then compare their positions
   if( rc != 0 )
      rc = (idx1<idx2) ? -1 : ((idx1>idx2) ? 1 : 0);

   return rc; 
} 
```

只要排序只执行元素交换，此技术可用于使任何排序稳定。元素的索引会改变，但相同元素的相对顺序将保持不变，因此排序保持稳健。对于像 heapsort 这样的排序，它不会开箱即用，因为原始的 heapification “丢弃”了相对排序，尽管您可以将这个想法应用于其他排序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T08:32:47.967

有一类稳定的就地合并算法，尽管它们复杂且线性，在 O(n) 中隐藏了相当高的常数。要了解更多信息，请查看[这篇文章及其参考书目](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.45.5606)。

编辑：合并阶段是线性的，因此合并排序是 nlog_n。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-11-04T16:51:29.603

快速排序可以通过在链表上进行来稳定。这花费 n 来选择 3 个枢轴的随机或中值，但常数非常小（列表遍历）。

通过拆分列表并确保对左列表进行排序，使相同的值向左，对右列表进行排序，使相同的值向右，排序将是隐式稳定的，没有真正的额外成本。此外，由于这涉及分配而不是交换，因此我认为速度实际上可能比对数组的快速排序稍好一些，因为只有一次写入。

所以总而言之，列出所有项目并在列表上运行快速排序

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-25T11:16:22.917

Quicksort can be made stable reasonably easy simply by having an sequence field added to each record, initializing it to the index before sorting and using it as the least significant part of the sort key.

This has a slightly adverse effect on the time taken but it doesn't affect the time complexity of the algorithm. It also has a minimal storage cost overhead for each record, but that rarely matters until you get very large numbers of records (and is mimimized with larger record sizes).

I've used this method with `C`'s `qsort()` function to avoid writing my own. Each record has a 32-bit integer added and populated with the starting sequence number before calling `qsort()`.

Then the comparison function checked the keys *and* the sequence (this guarantees there are no duplicate keys), turning the quicksort into a stable one. I recall that it still outperformed the inherently stable mergesort for the data sets I was using.

Your mileage may vary, so always remember: *Measure, don't guess!*

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-23T15:15:03.670

在你能证明它很重要之前，不要太担心 O(n log n)。如果你能找到一个常数大大降低的 O(n^2) 算法，那就去吧！

如果您的数据受到高度限制，则一般最坏的情况是不相关的。

简而言之：运行一些测试。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-08-17T20:04:02.217

[维基百科上](http://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms)有一个很好的排序函数列表，可以帮助你找到你想要的任何类型的排序函数。

例如，为了解决您的特定问题，看起来就地合并排序是您想要的。

但是，您可能还想看看[strand sort](http://en.wikipedia.org/wiki/Strand_sort)，它有一些非常有趣的属性。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-12-09T15:11:04.877

我已经实现了一个[稳定的就地快速排序](http://h2database.googlecode.com/svn/trunk/h2/src/tools/org/h2/dev/sort/InPlaceStableQuicksort.java)和一个[稳定的就地合并排序](http://h2database.googlecode.com/svn/trunk/h2/src/tools/org/h2/dev/sort/InPlaceStableMergeSort.java)。合并排序要快一点，并且保证在 O(n*log(n)^2) 中工作，但不是快速排序。两者都使用 O(log(n)) 空间。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-22T03:27:44.970

也许是[shell 排序](http://en.wikipedia.org/wiki/Shell_sort)？如果我正确回忆我的数据结构课程，它往往是稳定的，但更糟糕的情况是时间是 O(n log^2 n)，尽管它对几乎排序的数据执行 O(n)。它基于插入排序，所以它就地排序。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-08-17T19:44:33.347

也许我有点墨守成规，但我喜欢手工编码的合并排序。它简单、稳定且表现良好。它需要的额外临时存储只有`N*sizeof(int)`，还不错。

# internet-explorer - Internet Explorer 8 beta 2 和标准

> ID：113028
> 
> 赞同：3
> 
> 时间：2008-09-22T03:24:51.577
> 
> 标签：internet-explorer, internet-explorer-8, standards, compatibility

Internet Explorer 8 打破了我必须看到的每 3 页。我想，这个早期版本的目的是让网站所有者有机会更新他们的网站，这样最终版本就不会那么麻烦了。

有没有人真的这样做过？

有人甚至打算这样做吗？

我还没有注意到像 ebay、myspace、facebook 等任何大型网站都在打扰，那么如果小型网站可以只使用兼容模式，为什么还要这样做呢？

我想我会用我的，但是如何让您的网站与 IE7 和 8 兼容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T04:05:39.090

我开发了一个网站，要求兼容IE8，只要我从一开始就在IE8中测试就没有问题。在这一点上，IE8 的标准与大多数其他标准兼容的浏览器非常接近。

如果您不能（或不会）这样做，通常可以使用简单的元标记让您的页面或网站在 IE8 中运行：

```
<html>
<head>
<title>Works in IE8</title>
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
</head>
<body>Renders the same in IE8 as it did in IE7</body> 
```

它并不总是顺利运行 - IE8 仅在元标记是 head 部分中的第一个标记时才注意到它，这与 ASP.NET 主题冲突。在这种情况下，您可以回退到使用服务器范围的更改来写出 HTTP 标头。[我在这里](http://weblogs.asp.net/jgalloway/archive/2008/08/05/asp-net-themes-don-t-like-ie8-s-x-ua-compatible-header-neither-do-i.aspx)写过。

MSDN 提供了有关处理方法的更多信息：http: [//msdn.microsoft.com/en-us/library/cc817570 (en-us).aspx](http://msdn.microsoft.com/en-us/library/cc817570(en-us).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T04:24:31.183

您还可以查看 ie8 Compat 的[aggiorno express](http://www.aggiorno.com/learn/aggiornoexpress.aspx)，它是一个免费工具，可以使用 Jon 指向的元标记自动标记您的网站，一旦您的页面在标准模式。

该工具同时支持 GUI 和命令行，因此很容易编写脚本来标记多个站点。值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T03:49:41.720

从历史上看，与浏览器的最终版本相比，测试版在标准模式下呈现页面的要求更为严格。

这个想法是，在预览阶段，开发人员是唯一的人，微软将尝试通过在浏览器上设置更严格的模式来让他们修复他们的网站。但是当需要向用户发布最终版本时，他们通常会启用一种兼容模式，使所有从未修复的页面仍然可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T04:06:53.940

我认为此时最安全的选择是退出 IE8 渲染；如果你在你的页面上使用“IE7模式”标签，即使IE8出来了，它仍然会使用IE7渲染，所以你不会有惊喜。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-27T19:06:46.820

根据微软IE8通过[Acid2测试](http://blogs.msdn.com/ie/archive/2007/12/19/internet-explorer-8-and-acid2-a-milestone.aspx)。问题可能是每个人都已经习惯了 IE7 的问题，以至于他们创建了如此多的 IE 条件变通办法，以至于现在 IE8 越来越接近标准，它就被打破了。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2008-09-22T04:34:01.223

好吧，标准几乎是一个神话。没有一个真正的标准。如果您不相信我，那么请阅读[Joel](http://www.joelonsoftware.com/items/2008/03/17.html)关于该主题的文章。

# c++ - 如何使用一个对象的方法来更新另一个对象的属性？

> ID：113033
> 
> 赞同：3
> 
> 时间：2008-09-22T03:26:28.357
> 
> 标签：c++, oop, methods

我有三个 (C++) 类：Player、Hand 和 Card。

玩家有一个成员hand，它握着一只手。它还有一个方法 getHand()，它返回手的内容。

```
Hand Player::getHand() {
    return hand;
} 
```

Hand 有一个方法 addCard(Card c)，它可以向手牌添加一张牌。

我想做这个：

player1.getHand().addCard(c);

但它不起作用。它不会抛出错误，所以它正在做某事。但是如果我之后检查player1手上的内容，那张牌并没有被添加。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T03:27:41.320

如果 getHand() 按值返回，则您正在修改手的副本而不是原始手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T03:28:30.693

如果 getHand() 没有返回引用，您将遇到麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T03:37:08.053

Player.addCardToHand() 方法不是不合理的，如果您没有理由以其他方式暴露手。这在某些方面可能是理想的，因为您仍然可以提供手牌的副本以进行获胜检查比较，并且没有人可以修改它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T03:39:34.833

您的方法需要返回一个指针或对玩家的 Hand 对象的引用。然后您可以将其称为“player1.getHand()->addCard(c)”。请注意，这是您使用的语法，它是一个指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T03:42:05.577

返回对手对象的引用，例如。

```
Hand &Player::getHand() {
    return hand;
} 
```

现在您的 addCard() 函数正在正确的对象上运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T03:28:28.103

getHand() 的声明是什么？它是返回一个新的 Hand 值，还是返回一个 Hand& 引用？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T03:33:50.617

如前所述，您可能正在修改副本而不是原件。

为了防止这种错误，您可以将复制构造函数和等于运算符显式声明为私有。

```
 private:
    Hand(const Hand& rhs);
    Hand& operator=(const Hand& rhs); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T04:02:12.937

getX() 通常是成员 x 的访问器函数的名称，类似于您自己的用法。然而，“getX”访问器也经常是一个只读函数，因此在代码库的其他情况下看到修改 X 的“getX”调用可能会令人惊讶。

所以我建议，而不是仅仅使用一个引用作为返回值，来实际修改一下代码设计。一些替代方案：

*   公开一个返回指针（或引用）的**getMutableHand方法。**通过返回一个指针，您强烈建议调用者使用指针表示法，这样任何阅读代码的人都会看到这个变量正在改变值，并且不是只读的。
*   使**Player 成为 Hand 的子类**，以便任何操作 Hand 的东西也可以直接在 Player 上工作。直观地说，您可以说 Player 不是 Hand，但从功能上讲，它们具有正确的关系 - 每个 Player 都只有一只手，而且您似乎确实希望能够通过 Player 获得与 Hand 相同的访问权限会直接。
*   直接为您的 Player 类实现**addCard**方法。

# sql - 如何仅从 SQL Server DateTime 数据类型返回日期

> ID：113045
> 
> 赞同：2016
> 
> 时间：2008-09-22T03:31:33.277
> 
> 标签：sql, sql-server, tsql, date, datetime

```
SELECT GETDATE() 
```

回报：`2008-09-22 15:24:13.790`

我想要没有时间部分的日期部分：`2008-09-22 00:00:00.000`

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：2727
> 
> 时间：2008-09-22T03:34:16.873

```
SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, @your_date)) 
```

例如

```
SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

给我

```
2008-09-22 00:00:00.000 
```

优点：

*   不需要 varchar<->datetime 转换
*   无需考虑语言环境

* * *

## 回答 #2

> 赞同：796
> 
> 时间：2008-09-24T13:02:21.577

SQLServer 2008 现在有一个“日期”数据类型，它只包含一个没有时间组件的日期。使用 SQLServer 2008 及更高版本的任何人都可以执行以下操作：

```
SELECT CONVERT(date, GETDATE()) 
```

* * *

## 回答 #3

> 赞同：197
> 
> 时间：2011-01-31T09:44:38.633

如果使用 SQL 2008 及更高版本：

```
select cast(getdate() as date) 
```

* * *

## 回答 #4

> 赞同：83
> 
> 时间：2008-09-22T08:04:09.923

DATEADD 和 DATEDIFF 比 CONVERTing to varchar 要好。两个查询具有相同的执行计划，但执行计划主要与**数据**访问策略有关，并不总是揭示执行所有部分所花费的 CPU 时间所涉及的隐含成本。如果两个查询都针对具有数百万行的表运行，则使用 DateDiff 的 CPU 时间可以接近 Convert CPU 时间的 1/3！

要查看查询的执行计划：

```
set showplan_text on
GO 
```

DATEADD 和 DATEDIFF 都将执行 CONVERT_IMPLICIT。

尽管 CONVERT 解决方案对某些人来说更简单、更易于阅读，但*速度*较慢。无需转换回 DateTime（这是由服务器隐式完成的）。之后在 DateDiff 方法中也不需要 DateAdd，因为整数结果也将隐式转换回 DateTime。

* * *

**从日期表中选择转换（varchar，MyDate，101）**

```
 |--Compute Scalar(DEFINE:([Expr1004]=CONVERT(varchar(30),[TEST].[dbo].[DatesTable].[MyDate],101)))
       |--Table Scan(OBJECT:([TEST].[dbo].[DatesTable])) 
```

* * *

**从日期表中选择 DATEADD(dd, 0, DATEDIFF(dd, 0, MyDate))**

```
 |--Compute Scalar(DEFINE:([Expr1004]=dateadd(day,(0),CONVERT_IMPLICIT(datetime,datediff(day,'1900-01-01 00:00:00.000',CONVERT_IMPLICIT(datetime,[TEST].[dbo].[DatesTable].[MyDate],0)),0))))
       |--Table Scan(OBJECT:([TEST].[dbo].[DatesTable])) 
```

像@digi 建议的那样使用 FLOOR() 具有更接近 DateDiff 的性能，但不建议将 DateTime 数据类型转换为 float 和 back 并不总是产生原始值。

记住伙计们：不要相信任何人。查看性能统计数据，并自行测试！

测试结果时要小心。向客户端选择许多行将隐藏性能差异，因为通过网络发送行所需的时间比执行计算所需的时间长。因此，请确保所有行的工作都由服务器完成，但没有发送到客户端的行集。

有些人似乎对缓存优化何时影响查询感到困惑。在同一批次或不同批次中运行两个查询对缓存没有影响。因此，您可以手动使缓存过期，也可以简单地多次来回运行查询。查询 #2 的任何优化也会影响任何后续查询，因此如果您愿意，请放弃执行 #1。

这是[完整的测试脚本和性能结果](https://stackoverflow.com/questions/2775/whats-the-best-way-to-remove-the-time-portion-of-a-datetime-value-sql-server/3696991#3696991)，证明 DateDiff 比转换为 varchar 快得多。

* * *

## 回答 #5

> 赞同：59
> 
> 时间：2008-09-22T03:33:29.137

试试这个：

```
SELECT CONVERT(VARCHAR(10),GETDATE(),111) 
```

以上语句将您当前的格式转换为`YYYY/MM/DD`，请参考[此链接](https://www.mssqltips.com/sqlservertip/1145/date-and-time-conversions-using-sql-server/)选择您喜欢的格式。

* * *

## 回答 #6

> 赞同：45
> 
> 时间：2008-09-22T03:33:53.253

```
SELECT CONVERT(datetime, CONVERT(varchar, GETDATE(), 101)) 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2013-12-19T06:48:07.263

**以日期格式返回**

> CAST(OrderDate AS 日期)

上面的代码将在 sql server 2010 中工作

它将在 2013 年 12 月 12 日返回

**对于 SQL Server 2012，请使用以下代码**

```
CONVERT(VARCHAR(10), OrderDate , 111) 
```

* * *

## 回答 #8

> 赞同：23
> 
> 时间：2008-09-22T03:34:43.393

您可以使用该`CONVERT`函数仅返回日期。请参阅以下链接：

[SQL Server 2000 中的日期和时间操作](http://www.sqljunkies.ddj.com/Article/6676BEAE-1967-402D-9578-9A1C7FD826E5.scuk)

[铸造和转换](https://msdn.microsoft.com/en-us/library/ms187928.aspx)

使用转换函数的语法是：

```
CONVERT ( data_type [ ( length ) ] , expression [ , style ] ) 
```

* * *

## 回答 #9

> 赞同：20
> 
> 时间：2014-03-26T12:39:38.697

如果你需要结果作为 a `varchar`，你应该通过

```
SELECT CONVERT(DATE, GETDATE()) --2014-03-26
SELECT CONVERT(VARCHAR(10), GETDATE(), 111) --2014/03/26 
```

上面已经提到过。

如果您需要日期和时间格式的结果，您应该使用以下任何查询

1.  ```
    SELECT CONVERT(DATETIME, CONVERT(VARCHAR(10), GETDATE(), 111)) AS OnlyDate 
    ```

    > 2014-03-26 00:00:00.000

2.  ```
    SELECT CONVERT(DATETIME, CONVERT(VARCHAR(10), GETDATE(), 112)) AS OnlyDate 
    ```

    > 2014-03-26 00:00:00.000

3.  ```
    DECLARE  @OnlyDate DATETIME
    SET @OnlyDate = DATEDIFF(DD, 0, GETDATE())
    SELECT @OnlyDate AS OnlyDate 
    ```

    > 2014-03-26 00:00:00.000

* * *

## 回答 #10

> 赞同：20
> 
> 时间：2016-08-24T07:36:10.647

## 如果您使用的是**SQL Server 2012 或更高版本**，

使用[`Format()`](https://msdn.microsoft.com/en-IN/library/hh213505.aspx)功能。

SQL Server 已经有多种答案和格式类型。但是大多数方法都有些模棱两可，您很难记住与特定日期格式相关的格式类型或函数的数字。这就是为什么在 SQL Server 的下一个版本中有更好的选择。

```
FORMAT ( value, format [, culture ] ) 
```

文化选项非常有用，因为您可以根据观众指定日期。

您必须记住 d（用于小图案）和 D（用于长图案）。

## 1."d" - 短日期模式。

```
2009-06-15T13:45:30 -> 6/15/2009 (en-US)
2009-06-15T13:45:30 -> 15/06/2009 (fr-FR)
2009-06-15T13:45:30 -> 2009/06/15 (ja-JP) 
```

## 2.“D” - 长日期模式。

```
2009-06-15T13:45:30 -> Monday, June 15, 2009 (en-US)
2009-06-15T13:45:30 -> 15 июня 2009 г. (ru-RU)
2009-06-15T13:45:30 -> Montag, 15\. Juni 2009 (de-DE) 
```

查询中的更多示例。

```
DECLARE @d DATETIME = '10/01/2011';
SELECT FORMAT ( @d, 'd', 'en-US' ) AS 'US English Result'
      ,FORMAT ( @d, 'd', 'en-gb' ) AS 'Great Britain English Result'
      ,FORMAT ( @d, 'd', 'de-de' ) AS 'German Result'
      ,FORMAT ( @d, 'd', 'zh-cn' ) AS 'Simplified Chinese (PRC) Result'; 

SELECT FORMAT ( @d, 'D', 'en-US' ) AS 'US English Result'
      ,FORMAT ( @d, 'D', 'en-gb' ) AS 'Great Britain English Result'
      ,FORMAT ( @d, 'D', 'de-de' ) AS 'German Result'
      ,FORMAT ( @d, 'D', 'zh-cn' ) AS 'Chinese (Simplified PRC) Result';

US English Result Great Britain English Result  German Result Simplified Chinese (PRC) Result
----------------  ----------------------------- ------------- -------------------------------------
10/1/2011         01/10/2011                    01.10.2011    2011/10/1

US English Result            Great Britain English Result  German Result                    Chinese (Simplified PRC) Result
---------------------------- ----------------------------- -----------------------------  ---------------------------------------
Saturday, October 01, 2011   01 October 2011               Samstag, 1\. Oktober 2011        2011年10月1日 
```

如果你想要更多的格式，你可以去：

1.  [标准日期和时间格式字符串](https://msdn.microsoft.com/en-us/library/az4se3k1(v=vs.110).aspx)
2.  [自定义日期和时间格式字符串](https://msdn.microsoft.com/en-us/library/8kb3ddd4(v=vs.110).aspx)

* * *

## 回答 #11

> 赞同：17
> 
> 时间：2011-09-22T12:21:32.920

```
SELECT CONVERT(VARCHAR,DATEADD(DAY,-1,GETDATE()),103) --21/09/2011

SELECT CONVERT(VARCHAR,DATEADD(DAY,-1,GETDATE()),101) --09/21/2011

SELECT CONVERT(VARCHAR,DATEADD(DAY,-1,GETDATE()),111) --2011/09/21

SELECT CONVERT(VARCHAR,DATEADD(DAY,-1,GETDATE()),107) --Sep 21, 2011 
```

* * *

## 回答 #12

> 赞同：16
> 
> 时间：2008-09-22T07:38:59.953

使用 FLOOR() - 只是减少时间部分。

```
SELECT CAST(FLOOR(CAST(GETDATE() AS FLOAT)) AS DATETIME) 
```

* * *

## 回答 #13

> 赞同：14
> 
> 时间：2012-07-26T20:00:30.210

如果您想使用 CONVERT 并获得与提出的原始问题相同的输出，即 yyyy-mm-dd 然后使用`CONVERT(varchar(10),[SourceDate as dateTime],121)`与前面几个答案相同的代码，但使用破折号转换为 yyyy-mm-dd 的代码是121.

如果我能在我的肥皂盒上稍等片刻，***这种格式不属于数据层***，这就是为什么在 SQL Server 2008 之前没有愚蠢的高开销“技巧”是不可能的，当时实际的 datepart 数据类型是介绍了。在数据层进行这样的转换是对 DBMS 开销的巨大浪费，但更重要的是，当您执行此类操作时，您基本上已经创建了内存中的孤立数据，我假设您将返回到程序中。您不能将其放回另一个 3NF+ 列或将其与键入的任何内容进行比较而无需还原，因此您所做的只是引入了故障点并删除了关系引用。

您应该始终将您的 dateTime 数据类型返回给调用程序，并***在 PRESENTATION 层中进行必要的调整。***一旦你在将它们返回给调用者之前进行转换，你就消除了应用程序中引用完整性的所有希望。这将再次阻止 UPDATE 或 DELETE 操作，除非您进行某种手动还原，否则在不需要时再次将您的数据暴露给人/代码/gremlin 错误。

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2020-01-15T10:08:00.797

做就是了：

`SELECT CAST(date_variable AS date)`

或与 PostgreSQL 一起使用：

`SELECT date_variable::date`

这称为类型转换顺便说一句！

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2008-09-22T03:35:23.250

```
SELECT DATEADD(DD, DATEDIFF(DD, 0, GETDATE()), 0)

SELECT DATEADD(DAY, 0, DATEDIFF(DAY,0, GETDATE()))

SELECT CONVERT(DATETIME, CONVERT(VARCHAR(10), GETDATE(), 101)) 
```

编辑：前两种方法基本相同，并执行转换为 varchar 方法。

* * *

## 回答 #16

> 赞同：12
> 
> 时间：2013-11-17T17:36:27.173

为了获得指示的结果，我使用以下命令。

```
SELECT CONVERT(DATETIME,CONVERT(DATE,GETDATE())) 
```

我希望它很有用。

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2014-05-12T14:41:48.300

```
 Convert(nvarchar(10), getdate(), 101) --->  5/12/14

 Convert(nvarchar(12), getdate(), 101) --->  5/12/2014 
```

* * *

## 回答 #18

> 赞同：9
> 
> 时间：2016-05-13T21:00:11.317

如果要将结果分配给列或变量，请为其指定 DATE 类型，并且转换是隐式的。

```
DECLARE @Date DATE = GETDATE()   

SELECT @Date   --> 2017-05-03 
```

* * *

## 回答 #19

> 赞同：8
> 
> 时间：2019-11-24T08:00:22.063

**在这种情况下，仅日期，我们将运行此查询：**

选择转换（VARCHAR（10），getdate（），111）；[![在此处输入图像描述](https://i.stack.imgur.com/DDheQ.png)](https://i.stack.imgur.com/DDheQ.png)

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2013-11-27T06:16:38.803

我认为这适用于您的情况：

```
CONVERT(VARCHAR(10),Person.DateOfBirth,111) AS BirthDate
//here date is obtained as 1990/09/25 
```

* * *

## 回答 #21

> 赞同：7
> 
> 时间：2014-11-19T20:46:35.800

```
DECLARE @yourdate DATETIME = '11/1/2014 12:25pm'    
SELECT CONVERT(DATE, @yourdate) 
```

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2016-04-13T10:46:30.673

好的，虽然我有点晚了:)，这是另一个解决方案。

```
SELECT CAST(FLOOR(CAST(GETDATE() AS FLOAT)) as DATETIME) 
```

**结果**

```
2008-09-22 00:00:00.000 
```

如果您使用的是 SQL Server 2012 及更高版本，那么您可以使用`FORMAT()`这样的功能 -

```
SELECT FORMAT(GETDATE(), 'yyyy-MM-dd') 
```

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2016-05-21T09:24:33.713

日期：

```
选择转换（日期，GETDATE（））
选择 CAST(GETDATE() 作为日期)

```

时间：

```
选择转换（时间，GETDATE（），114）
选择 CAST(GETDATE() 作为时间)

```

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2017-09-08T05:24:19.953

只需您可以这样做：

```
SELECT CONVERT(date, getdate())
SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, @your_date))
SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
```

输出为：

```
2008-09-22 00:00:00.000 
```

或者干脆这样做：

```
SELECT CONVERT (DATE, GETDATE()) 'Date Part Only' 
```

结果：

```
Date Part Only
--------------
2013-07-14 
```

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2015-02-27T21:16:05.370

即使使用古老的 MSSQL Server 7.0，此处的代码（由此[链接](http://www.dreamincode.net/forums/topic/42872-working-with-date-values-in-sql-server/)提供）也允许我获得当时正在寻找的任何日期格式：

```
PRINT '1) Date/time in format MON DD YYYY HH:MI AM (OR PM): ' + CONVERT(CHAR(19),GETDATE())  
PRINT '2) Date/time in format MM-DD-YY: ' + CONVERT(CHAR(8),GETDATE(),10)  
PRINT '3) Date/time in format MM-DD-YYYY: ' + CONVERT(CHAR(10),GETDATE(),110) 
PRINT '4) Date/time in format DD MON YYYY: ' + CONVERT(CHAR(11),GETDATE(),106)
PRINT '5) Date/time in format DD MON YY: ' + CONVERT(CHAR(9),GETDATE(),6) 
PRINT '6) Date/time in format DD MON YYYY HH:MM:SS:MMM(24H): ' + CONVERT(CHAR(24),GETDATE(),113) 
```

它产生了这个输出：

```
1) Date/time in format MON DD YYYY HH:MI AM (OR PM): Feb 27 2015  1:14PM
2) Date/time in format MM-DD-YY: 02-27-15
3) Date/time in format MM-DD-YYYY: 02-27-2015
4) Date/time in format DD MON YYYY: 27 Feb 2015
5) Date/time in format DD MON YY: 27 Feb 15
6) Date/time in format DD MON YYYY HH:MM:SS:MMM(24H): 27 Feb 2015 13:14:46:630 
```

* * *

## 回答 #26

> 赞同：5
> 
> 时间：2014-05-17T05:46:19.993

你为什么不使用 DATE_FORMAT(your_datetiem_column, '%d-%m-%Y') ？

前任：`select DATE_FORMAT( some_datetime_column, '%d-%m-%Y' ) from table_name`

您可以通过重新排列`'%d-%m-%Y'`部分来更改 m、d 和 year 的顺序

* * *

## 回答 #27

> 赞同：5
> 
> 时间：2015-04-30T19:00:38.083

我赞成以下未提及的内容：

```
DATEFROMPARTS(DATEPART(yyyy, @mydatetime), DATEPART(mm, @mydatetime), DATEPART(dd, @mydatetime)) 
```

它也不关心本地或进行双重转换——尽管每个“日期部分”可能都会做数学运算。所以它可能比 datediff 方法慢一点，但对我来说它更清楚。特别是当我只想按年和月分组时（将日期设置为 1）。

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2016-01-15T18:14:06.703

我知道这是旧的，但我没有看到有人这样说。据我所知，这是 ANSI 标准。

```
SELECT CAST(CURRENT_TIMESTAMP AS DATE) 
```

如果 Microsoft 也可以支持 ANSI 标准 CURRENT_DATE 变量，那就太好了。

* * *

## 回答 #29

> 赞同：5
> 
> 时间：2016-05-24T09:36:18.633

在 SQL Server 2000 上

```
CAST(
(
    STR( YEAR( GETDATE() ) ) + '/' +
    STR( MONTH( GETDATE() ) ) + '/' +
    STR( DAY( GETDATE() ) )
)
AS DATETIME) 
```

* * *

## 回答 #30

> 赞同：5
> 
> 时间：2016-07-20T15:58:29.473

从 SQL SERVER 2012 开始，您可以这样做：

`SELECT FORMAT(GETDATE(), 'yyyy-MM-dd 00:00:00.000')`

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2014-03-29T15:22:57.063

您可以使用以下日期部分和格式化日期：

DATENAME => 返回一个字符串，表示指定日期的指定日期部分

DATEADD => 该`DATEPART()`函数用于返回日期/时间的单个部分，例如年、月、日、小时、分钟等。

DATEPART =>返回一个整数，表示指定日期的指定日期部分。

`CONVERT()`=> 该`CONVERT()`函数是将一种数据类型的表达式转换为另一种数据类型的通用函数。该 `CONVERT()`功能可用于以不同格式显示日期/时间数据。

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2015-07-08T06:28:44.247

**Date(date&time field)**和**DATE_FORMAT(date&time,'%Y-%m-%d')****都只**返回 date&time 中的日期

* * *

## 回答 #33

> 赞同：4
> 
> 时间：2015-09-01T13:02:45.503

```
SELECT * FROM tablename WHERE CAST ([my_date_time_var] AS DATE)= '8/5/2015' 
```

* * *

## 回答 #34

> 赞同：4
> 
> 时间：2021-03-09T12:28:21.040

句法：

```
SELECT CONVERT (data_type(length)),Date, DateFormatCode) 
```

前任：

```
Select CONVERT(varchar,GETDATE(),1) as [MM/DD/YY]
Select CONVERT(varchar,GETDATE(),2) as [YY.MM.DD] 
```

关于日期的所有日期格式代码：

```
DateFormatCode  Format
1       [MM/DD/YY]
2       [YY.MM.DD]
3       [DD/MM/YY]
4       [DD.MM.YY]
5       [DD-MM-YY]
6       [DD MMM YY]
7       [MMM DD,YY]
10      [MM-DD-YY]
11      [YY/MM/DD]
12      [YYMMDD]
23      [yyyy-mm-dd]
101     [MM/DD/YYYY]
102     [YYYY.MM.DD]
103     [DD/MM/YYYY]
104     [DD/MM/YYYY]
105     [DD/MM/YYYY]
106     [DD MMM YYYY]
107     [MMM DD,YYYY]
110     [MM-DD-YYYY]
111     [YYYY/MM/DD]
112     [YYYYMMDD] 
```

* * *

## 回答 #35

> 赞同：3
> 
> 时间：2017-10-21T04:02:23.830

我在没有时间部分的情况下获取日期的常用方法..

```
 SELECT CONVERT(VARCHAR(MAX),GETDATE(),103)

 SELECT CAST(GETDATE() AS DATE) 
```

* * *

## 回答 #36

> 赞同：3
> 
> 时间：2019-07-30T10:32:57.103

如果你想显示日期`2008-09-22 00:00:00.000`

然后你可以使用

```
SELECT CONVERT(datetime, (ROUND(convert(float, getdate()-.5),0))) 
```

这将以问题中的格式显示日期

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2018-11-21T11:39:50.820

我的风格

```
 select Convert(smalldatetime,Convert(int,Convert(float,getdate()))) 
```

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2019-03-24T17:36:20.663

```
select cast(createddate as date) as derivedate from table 
```

createdate 是您的日期时间列，这适用于 sqlserver

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2019-03-30T11:01:20.850

您可以使用如下所示的不同类型的输出仅用于日期

1.  `SELECT CONVERT(datetime, CONVERT(varchar, GETDATE(), 103))`-----dd/mm/yyyy

2.  `SELECT CONVERT(datetime, CONVERT(varchar, GETDATE(), 101))`------mm/dd/yyyy

3.  `SELECT CONVERT(datetime, CONVERT(varchar, GETDATE(), 102))`

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2019-04-23T17:56:52.940

哇，让我数一数你能做到这一点的方法。（没有双关语）

为了以这种格式获得您想要的结果：

2008-09-22

这里有几个选项。

```
SELECT CAST(GETDATE() AS DATE) AS 'Date1'
SELECT Date2  = CONVERT(DATE, GETDATE())
SELECT CONVERT(DATE, GETDATE()) AS 'Date3'
SELECT CONVERT(CHAR(10), GETDATE(), 121) AS 'Date4'
SELECT CONVERT(CHAR(10), GETDATE(), 126) AS 'Date5'
SELECT CONVERT(CHAR(10), GETDATE(), 127) AS 'Date6' 
```

所以，我建议选择一个你觉得舒服的方法，并在你的所有桌子上全面使用这种方法。

所有这些选项都以完全相同的格式返回日期。为什么 SQL Server 有这样的冗余？

我不知道，但他们知道。也许比我聪明的人可以回答这个问题。

希望这可以帮助某人。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2020-02-07T16:52:48.737

由于自从这个问题得到答案以来发生了很多变化，我想提供一种新的方法来获得所请求的结果。有两种方法可以解析 DATETIME 数据。首先，要获取此问题所要求的日期：

```
DATEVALUE([TableColumnName]) 
```

二、从值中获取时间：

```
TIMEVALUE([TableColumnName]) 
```

**例子：**

表：客户

列：CreationDate 作为 DateTime

[客户].[创建日期]：2/7/2020 09:50:00

```
DATEVALUE([Customers].[CreationDate]) '--> Output: 2/7/2020
TIMEVALUE([Customers].[CreationDate]) '--> Output: 09:50:00 
```

我希望这会有所帮助，因为我搜索了一段时间并找到了许多答案，如在这个问题中看到的，但没有一个有效。IE`CAST`和`CONVERT`.

快乐编码！

* * *

## 回答 #42

> 赞同：-1
> 
> 时间：2016-03-29T22:56:51.553

您可以简单地使用下面的代码仅获取日期部分并避免 SQL 中的时间部分：

```
SELECT SYSDATE TODAY FROM DUAL; 
```

* * *

## 回答 #43

> 赞同：-1
> 
> 时间：2018-10-05T08:18:37.693

```
select convert(getdate() as date)

select CONVERT(datetime,CONVERT(date, getdate())) 
```

* * *

## 回答 #44

> 赞同：-2
> 
> 时间：2019-05-28T08:34:47.540

最简单的方法是使用： `SELECT DATE(GETDATE())`

# java - 如何用 Java 编写 RSS 提要？

> ID：113063
> 
> 赞同：28
> 
> 时间：2008-09-22T03:37:37.147
> 
> 标签：java, rss, rome

我正在使用 Java，需要生成一个简单的、符合标准的 RSS 提要。我该怎么办？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-22T03:39:17.877

我建议使用[罗马](http://rometools.github.io/rome/RssAndAtOMUtilitiEsROMEV0.5AndAboveTutorialsAndArticles/RssAndAtOMUtilitiEsROMEV0.5TutorialUsingROMEToCreateAndWriteASyndicationFeed.html)：

```
// Feed header
SyndFeed feed = new SyndFeedImpl();
feed.setFeedType("rss_2.0");
feed.setTitle("Sample Feed");
feed.setLink("http://example.com/");

// Feed entries
List entries = new ArrayList();
feed.setEntries(entries);

SyndEntry entry = new SyndEntryImpl();
entry.setTitle("Entry #1");
entry.setLink("http://example.com/post/1");
SyndContent description = new SyndContentImpl();
description.setType("text/plain");
description.setValue("There is text in here.");
entry.setDescription(description);
entries.add(entry);

// Write the feed to XML
StringWriter writer = new StringWriter();
new SyndFeedOutput().output(feed, writer);
System.out.println(writer.toString()); 
```

# php - 保持我的 PHP 漂亮

> ID：113077
> 
> 赞同：11
> 
> 时间：2008-09-22T03:46:23.147
> 
> 标签：php, html, formatting

我正在创建一个站点，根据某些条件（即是否登录，是否填写表格等），不同的页面看起来会非常不同。这使得有必要在不同的时间输出不同的 html 块。

然而，这样做会使我的 php 代码看起来很可怕......它确实与代码的格式和“形状”相混淆。我应该如何解决这个问题？在我的脚本底部包含自定义“html 转储”功能？同样的事情，但包含？Heredocs（看起来不太好）？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-22T08:47:42.907

不要惊慌，每个新的 Web 程序员都会面临这个问题。

您必须将程序逻辑与显示分开。首先，尝试为每个网页使用两个文件来制作自己的解决方案：

*   一个只有 PHP 代码（没有 HTML）来填充变量
*   另一个使用 HTML 和很少的 PHP：这是您的页面设计

然后包括您需要的地点/时间。例如：

myPageLogic.php

```
<?php

// pure PHP code, no HTML

$name = htmlspecialchars($_GET['name']);
$age = date('Y') - htmlspecialchars($_GET['age']);

?> 
```

myPageView.php

```
// very few php code
// just enought to print variables
// and some if / else, or foreach to manage the data stream

<h1>Hello, <?php $name ?> !</h1>

<p>So your are <?php $age?>, hu ?</p> 
```

（您可能想为此使用[替代的 PHP 语法](http://php.mirror.camelnetwork.com/manual/en/control-structures.alternative-syntax.php)。但不要试图使其第一次完美，真的。）

我的页面.php

```
<?php

require('myPageLogic.php');
require('myPageView.php');
?> 
```

*暂时不要担心性能问题*。这不是你作为新手的首要任务。这个解决方案并不完美，但会帮助你解决你的编程水平的问题，并会教你基础知识。

然后，一旦你对这个概念感到满意，就买一本关于 MVC 模式的书（或者寻找关于它的堆栈溢出条目）。*那就是你下一次*想要做的事情。然后你会尝试一些模板系统和框架，但*稍后*。现在，只需编码并从头开始学习。你可以完美地编写这样的项目，作为一个菜鸟，这很好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-22T03:49:50.703

使用 mvc 方法。

[http://www.phpmvc.net/](http://www.phpmvc.net/)

这不是你会在几个小时内得到的。你真的需要练习它。主要的是控制器将访问您的模型（数据库层），对您的数据进行处理，然后将其发送到视图进行渲染。这过于简单了，但您只需要阅读和练习即可理解它。

这是我用来帮助我学习的东西。 [http://www.onlamp.com/pub/a/php/2005/09/15/mvc_intro.html](http://www.onlamp.com/pub/a/php/2005/09/15/mvc_intro.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T03:55:24.903

尽量将您的内容和布局与您的代码分开。每当您在 .php 文件中编写任何 HTML 时，停下来想一想“这*真的*属于这里吗？”

一种解决方案是使用模板。查看[Smarty](http://www.smarty.net)模板系统，了解一个非常易于使用的选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T16:25:17.817

> 然而，这样做会使我的 php 代码看起来很可怕......它确实与代码的格式和“形状”相混淆。我应该如何解决这个问题？

将您的 PHP 和 HTML 视为一个层次结构，具有单一、一致的缩进结构。因此，诸如“if”或“for”之类的 PHP 封闭结构引入了新级别的缩进，其内容始终是一组平衡的开始和结束标记。从本质上讲，您正在使您的 PHP 在 XML 术语的意义上“格式良好”，无论您是否实际使用 XHTML。

例子：

```
<div class="prettybox">
    Hello <?php echo(htmlspecialchars($name)) ?>!
    Your food:
    <?php foreach($foods as $food) { ?>
        <a href="/food.php?food=<?php echo(urlencode($food)) ?>">
            <?php echo(htmlspecialchars($food)) ?>
        </a>
    <?php } ?>
    <?php if (count($foods)==0) { ?>
        (no food today)
    <?php } ?>
</div> 
```

警惕围绕分离逻辑和标记的宗教教条再次出现在答案中。虽然您当然希望将业务逻辑排除在页面输出代码之外，但这并不一定意味着使用单独的文件、类、模板和框架会产生大量开销，这对于您正在做的事情确实是必要的。对于一个简单的应用程序，将动作/逻辑的东西放在文件的顶部和下面的页面输出可能就足够了。

（例如，根据上面的评论之一，执行 htmlspecialchars() 是页面输出功能，您绝对*不想*将其放入 PHP 的操作位中，混入所有业务逻辑中。始终保持文本为纯文本，未转义字符串，直到它离开你的应用程序逻辑。如果一直输入'echo(htmlspecialchars(...))'太罗嗦，你总是可以用一个像'h'这样的短名称来做同样的事情。 )

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T03:53:41.040

从您的问题的声音来看，您的代码中的逻辑和表示之间似乎没有太多分离。在设计应用程序时，这是一个非常重要的考虑因素，原因完全可以从您当前面临的情况中得到证明。

如果您还没有，我会看看一些 PHP 模板引擎，例如[Smarty](http://www.smarty.net/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T03:49:09.647

在这种情况下，我将所有内容增量写入变量或有时是数组，然后回显变量/数组。它还有一个额外的优势，即页面总是一次性呈现，而不是逐步呈现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T03:49:22.313

在这种情况下，我最终要做的是构建我包含的 HTML 数据的“模板”文件，然后使用正则表达式进行解析。它使代码保持干净，并且更容易将部分交给设计人员或其他 HTML 人员。

[在Wikipedia](http://en.wikipedia.org/wiki/Model-view-controller)上查看 MVC 编程实践背后的理想

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T03:57:22.323

你需要一个框架。这不仅会使您的代码变得漂亮（因为已经提到的模型-视图-控制器模式，MVC）- 由于已经为它编写了组件，它会节省您的时间。

我推荐 QCodo，它很棒；还有其他的——CakePHP、Symfony。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T04:18:35.237

如果这是一个大项目，可能需要一个框架。如果没有，请创建一些模板文件并在页面顶部决定要包含的模板文件。

例如

```
if ($_SESSION['logged_in'])
     include(TPL_DIR . 'main_logged_in.tpl'); 
else
     include(tPL_DIR . 'main.tpl'); 
```

只是一个简单的例子

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T07:24:15.120

如上所述..您正在解决症状，而不是问题..

您需要的是逻辑和表示的分离。这可以通过某种 mvc 框架来完成。即使您不想一直使用 mvc 框架.. 模板引擎是必须的，至少如果您的逻辑足够复杂以至于您对所解释的内容有困难

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-22T09:02:32.793

我强烈建议[savant](http://phpsavant.com/)而不是 smarty，

*   您不必为了创建模板而学习新的模板“语言”，专家模板是用 php 编写的
*   如果您不想使用 php，您可以使用编译器定义自己的模板“语言”
*   它可以通过您自己的 php 对象轻松扩展

将逻辑与表示分离并不意味着您的所有业务逻辑都必须在 php 中，而您的表示逻辑必须在其他东西中，分离是一个概念性的事情，您必须将准备数据的逻辑与显示它的逻辑分开。显然，业务逻辑不必包含表示元素。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-22T10:21:42.790

除了在模板系统（PHP 本身）之上实现模板系统，默认情况下会产生开销，您可以寻求更强大的解决方案，例如[XSL Transformations](http://www.w3schools.com/xsl/)，它也符合[MVC 原则](http://www.phpmvc.net/)（前提是您将数据检索分开；另外，我个人将逻辑与显示具有不同文件的 XML 分开）。

想象一下在一个数组中有以下信息，您希望将其显示在一个表格中。

```
Array
{
  [car] => green
  [bike] => red
} 
```

您可以轻松地创建一个以 XML 格式输出此信息的脚本：

```
echo "<VEHICLES>\n";
foreach(array_keys($aVehicles) as $sVehicle)
  echo "\t<VEHICLE>".$sVehicle."</NAME><COLOR>".$aVehicles[$sVehicle]."</COLOR></VEHICLE>\n";
echo "</VEHICLES>\n"; 
```

生成以下 XML：

```
<VEHICLES>
  <VEHICLE>
    <NAME>car</NAME>
    <COLOR>green</COLOR>
  </VEHICLE>
  <VEHICLE>
    <NAME>bike</NAME>
    <COLOR>red</COLOR>
  </VEHICLE>
</VEHICLES> 
```

现在这一切都很好，但不会以很好的格式显示。这就是 XSLT 的用武之地。使用一些简单的代码，您可以将其转换为表格：

```
<xsl:template match="VEHICLES">
  <TABLE>
    <xsl:apply-templates select="VEHICLE">
  </TABLE>
</xsl:template>

<xsl:template match="VEHICLE">
  <TR>
    <TD><xsl:value-of select="NAME"></TD>
    <TD><xsl:value-of select="COLOR"></TD>
  </TR>
</xsl:template> 
```

瞧，你有：

```
<TABLE>
  <TR>
    <TD>car</TD>
    <TD>green</TD>
  </TR>
  <TR>
    <TD>bike</TD>
    <TD>red</TD>
  </TR>
</TABLE> 
```

现在对于这个简单的例子，这有点矫枉过正；但是对于大型项目中的复杂结构，这是使您的脚本逻辑远离您的标记的绝对方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-22T13:03:16.427

检查这个[关于](https://stackoverflow.com/questions/62617/whats-the-best-way-to-separate-php-code-and-html)分离 PHP 和 HTML 的问题，有多种方法可以做到这一点，包括自己编写的模板系统、Smarty 等模板系统、PHP 作为自己的模板系统等等等等。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-22T15:57:26.337

我认为你在这里有两个选择，要么使用 MVC 框架，要么使用惰性模板方式，这会给你的代码带来很大的开销。显然我支持前者，我认为学习 MVC 是本书中最好的 Web 开发技巧之一。

# .net - 硒内件

> ID：113089
> 
> 赞同：3
> 
> 时间：2008-09-22T03:52:41.353
> 
> 标签：.net, selenium, testing, automated-tests

硒是如何工作的？你能解释一下它的内部工作原理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T04:00:23.987

首先有一层 javascript 代码用于自动化浏览器和模拟事件、运行和验证测试。接下来，你运行一个代理服务器——你将浏览器指向它——它会注入这个 javascript 代码。然后，您可以使用一组命令通过另一个端口与此代理服务器通信，这会导致代理服务器注入 javascript 代码以在（或远程控制）正在运行的浏览器上运行。使用这个框架，您可以编写自动化测试脚本，其风格非常类似于为浏览器编写宏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T08:51:11.540

[硒是如何工作的](http://selenium.openqa.org/about/how.html)

甚至还有一些漂亮的图像。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T10:46:12.050

基本上它适用于以下 principal 。它首先通过在驱动程序启动的浏览器中显示的 HTML 文档中搜索您在**定位器**中指定的元素来搜索它。找到元素后，它会获得对象的位置。获得该位置后 ROBOT 类方法（如 MOUSECLICK MOUSE Move 等）对这些位置执行操作。我希望这能工作:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-24T09:29:35.360

**I）如果是 selenium RC，那么过程将是，**

* * *

1.  您的脚本到达 selenium 服务器（您在特定端口启动）
2.  在服务器脚本将转换为“Java Script”（所有浏览器都可以理解）
3.  然后它到达浏览器并根据脚本执行进一步的操作（类型，单击等）。如果找不到元素，那么它将通过异常。:)

**II）如果是selenium webdriver，那么过程将是，**

* * *

1.  代替上述过程，脚本将直接与指定的浏览器交互（使用浏览器 API）-> 然后执行进一步的操作。

# security - 基于 IP 的动态黑名单

> ID：113090
> 
> 赞同：6
> 
> 时间：2008-09-22T03:53:04.487
> 
> 标签：security, apache, .htaccess, email-spam

伙计们，我们都知道 IP 黑名单不起作用 - 垃圾邮件发送者可以通过代理进入，另外，合法用户可能会受到影响......也就是说，在我看来，黑名单似乎是阻止持续攻击者的有效机制，因为IP 的实际列表是根据应用程序的反馈和用户行为动态确定的。

例如： - 有人试图暴力破解您的登录屏幕 - 编写不佳的机器人向您的站点发出非常奇怪的 HTTP 请求 - 脚本小子使用扫描仪查找您的应用程序中的漏洞

我想知道以下机制是否可行，如果可以，您是否知道是否有任何工具可以做到这一点：

*   在 Web 应用程序中，开发人员有一个钩子来报告“违规行为”。一项罪行可能是轻微的（密码无效），并且需要数十次这样的罪行才能被列入黑名单；或者它可能是重大的，在 24 小时内发生几次这样的罪行会让你出局。
*   在加载每个页面之前，某种形式的网络服务器级块会启动，并确定用户是否来自“坏”IP。
*   有一个内置的“宽恕”机制：一段时间后，攻击不再计入 IP。

谢谢！

**额外说明：如果该解决方案在 PHP 中工作，那就太棒了，但我很想听听您对任何语言/平台的一般方法的看法**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T03:59:15.800

看看[fail2ban](http://www.fail2ban.org/)。一个 python 框架，允许您从跟踪日志文件中提升 IP 表块，以发现错误行为的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T03:56:25.853

你在 *nix 机器上吗？这种事情可能最好留给操作系统级别，使用类似[iptables的东西](http://en.wikipedia.org/wiki/Iptables)

编辑：

作为对评论的回应，是的（有点）。但是，这个想法是 iptables 可以独立工作。您可以设置某个阈值来限制（例如，阻止端口 80 TCP 上超过 x 个请求/分钟的请求），这一切都是透明处理的（即，您的应用程序真的不需要知道任何关于它的信息，发生动态阻塞）。

如果您完全控制该框，我建议使用 iptables 方法，并且更愿意让您的防火墙处理限制（优点是，您不需要将此逻辑构建到您的 Web 应用程序中，并且它可以节省资源作为请求是在他们访问您的网络服务器之前下降）

否则，如果您希望阻塞不会是一个巨大的组件，（或者您的应用程序是可移植的并且不能保证对 iptables 的访问），那么将该逻辑构建到您的应用程序中会更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T03:56:20.893

我认为它应该是用户名加IP块的组合。不仅仅是IP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T04:02:57.053

您正在查看自定义锁定代码。开源世界中的一些应用程序包含各种风格的此类代码。也许你应该看看其中的一些，尽管你的要求很简单，所以标记一个 IP/用户名组合，并利用它来阻止一个 IP 一段时间。（注意我说的是阻止IP，而不是用户。用户可能会尝试通过有效的IP/用户名/密码组合上网。）

事实上，您甚至可以保留用户登录的痕迹，并且当使用 3 次错误的用户名/密码组合从未知 IP 登录时，将该 IP 锁定到您喜欢该用户名的时间。（请注意，许多 ISP 共享 IP，因此......）

您可能还希望延迟身份验证，以便 IP 不能每隔 'y' 秒左右多次尝试登录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T04:54:09.130

我已经为客户端开发了一个系统，它可以跟踪对 Web 服务器的点击，并在操作系统/防火墙级别动态禁止 IP 地址在可变时间段内用于某些攻击，所以，是的，这绝对是可能的。正如 Owen 所说，防火墙规则比在 Web 服务器中执行此类操作要好得多。（不幸的是，客户选择对该代码持有严格的版权，所以我无权分享它。）

我通常使用 Perl 而不是 PHP，但是，只要您有防火墙规则引擎的命令行界面（例如，/sbin/iptables），您应该能够通过任何语言轻松地做到这一点具有执行系统命令的能力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-28T23:57:00.953

err 这种系统既简单又常见，我可以很容易地给你我的

它在这里简单而简要地解释了[http://www.alandoherty.net/info/webservers/](http://www.alandoherty.net/info/webservers/)

编写的脚本无法下载{因为当前没有添加评论}，但请从上面的站点给我发一封电子邮件，我会将代码扔给您，并很乐意帮助您调试/计算它到您的服务器

# flash - 为什么 DisplayObject 的孩子的 .name 属性和 getChildByName() 的结果有时不同？

> ID：113103
> 
> 赞同：1
> 
> 时间：2008-09-22T03:57:19.267
> 
> 标签：flash, actionscript-3

谁能解释显示对象的“名称”属性与*getChildByName(“XXX”)*函数找到的值之间的区别？它们 90% 的时间都是一样的，直到它们不一样，事情就崩溃了。

例如，在下面的代码中，我仅通过直接检查孩子的 name 属性来按实例名称查找对象；*getChildByName()*失败。

```
var gfx:MovieClip = new a_Character(); //(a library object exported for Actionscript)

var do1:DisplayObject = null;
var do2:DisplayObject = null;

for( var i:int = 0 ; i < gfx.amSword.numChildren ; i++ )
{
    var child:DisplayObject = gfx.amSword.getChildAt(i);
    if( child.name == "amWeaponExchange" )  //An instance name set in the IDE
    {
        do2 = child;
    }
}

trace("do2:", do2 );

var do1:DisplayObject = gfx.amSword.getChildByName("amWeaponExchange"); 
```

生成以下输出：

```
do2: [object MovieClip]
ReferenceError: Error #1069: Property amWeaponExchange not found on builtin.as$0.MethodClosure and there is no default value. 
```

Flash在想什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-23T16:10:29.433

It seems you fixed it yourself!

With:

```
var do1:DisplayObject = gfx.amSword.getChildByName["amWeaponExchange"]; 
```

You get the error:

```
ReferenceError: Error #1069: Property amWeaponExchange not found on builtin.as$0.MethodClosure and there is no default value. 
```

Because the compiler is looking for the property "amWeaponExchange" on the actual getChildByName **method**.

When you change it to:

```
var do1:DisplayObject = gfx.amSword.getChildByName("amWeaponExchange"); 
```

As you did in your edit, it successfully finds the child and compiles.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T07:22:50.660

我还没有真正理解你在做什么。但我发现一件事是在第一帧访问 MovieClip 的孩子有点不可靠。例如，您不能 gotoAndStop() 然后访问该框架上的任何孩子，您必须等待一个框架才能使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T11:45:49.000

在一个地方你循环通过 gfx.amSword 和另一个 e.gfx.amSword - 你错过了 e. ?

此外，这不是问题的原因，但类名应该以大写字母开头，并且不包含下划线。“a_Character”应该只是“Character”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T14:47:06.647

哎呀，你对 e 的看法是对的，Iain，但这不是问题所在，我从代码中删除了 e 以专注于问题，但没有抓住那个问题。

我想我应该发布一个更清晰的失败示例。有趣的类名只是我个人对 Flash IDE 使用“export for Actionscript”自动生成的类的命名约定，但它使问题变得混乱。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-22T14:56:17.983

我误解了我的第一个答案。

这可能与 Flash IDE 发布设置有关：ActionScript 3.0 设置对话框中的“自动声明舞台实例”。??

# .net - 如何以编程方式创建基本的 Adob e Illustrator 文件？

> ID：113112
> 
> 赞同：6
> 
> 时间：2008-09-22T04:00:55.937
> 
> 标签：.net, file, file-format, adobe-illustrator

我需要在剪贴板上创建一个非常基本的 Adob​​e Illustrator 文件，我可以将其粘贴到 Adob​​e Illustrator 或 Expression Design 中。我正在寻找有关如何以编程方式生成 Adob​​e Illustrator 文件的代码示例，最好使用 C# 或其他一些 .NET 语言（但目前任何语言都可以使用）。

我在网上找到了 Adob​​e Illustrator 3 File Format 文档，但是对于这个简单的场景来说，它是为了消化。

我不想依赖实际的 Adob​​e Illustrator 程序（例如 COM 互操作）来生成我的文档。必须是纯代码。

该代码用于 Expression Studio 插件，我需要能够在剪贴板上创建一些内容，然后将其粘贴到 Expression Design 中。在查看了 Expression Design 在复制基本形状时放在剪贴板上的格式后，我得出结论，ADOBE AI3 我是最好使用的格式（其他要么是渲染图像，要么是无法粘贴 INTO Design 的 cfXaml）。

因此，基于此，我不能使用 SWG，这可能会更容易。

另一个想法可能是使用 PDF 组件，因为 AI 和 PDF 格式应该是兼容的？我还找到了一些对名为“Adobe Illustrator 剪贴板格式”（AICB）的格式的引用，但找不到有关它的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T04:11:20.233

我知道 Inkscape 是免费和开源的，并且可以编辑 .ai 文件。

这可能是一个开始的地方。 [http://www.inkscape.org/](http://www.inkscape.org/)

另外，我认为 Illustrator 可以处理标准的 svg 文件，因此生成这些文件可能会容易得多。（它们是基于 XML 的） [http://www.w3.org/Graphics/SVG/](http://www.w3.org/Graphics/SVG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-05-06T14:15:31.877

尝试使用由 Adob​​e 提供的类似 javascript 的脚本环境 ExtendScript（CS 中包含一个 ExtendScript 编辑器），它允许您使用脚本操作各种 Adob​​e 应用程序。我已经能够使用 ES 创建、操作和保存 Photoshop 文件，所以我相信你也可以使用 AI 来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T04:13:40.337

SVG可能是要走的路。

# ruby-on-rails - 我在哪里可以找到有关使用 Rails 进行 OpenID 身份验证的最新信息？

> ID：113113
> 
> 赞同：5
> 
> 时间：2008-09-22T04:01:04.360
> 
> 标签：ruby-on-rails, openid

这个问题说明了一切。我似乎找不到任何最近的 Rails 教程或任何设置 OpenID 身份验证系统的内容。我找到[了 RestfulOpenIDAuthentication](http://github.com/ReinH/restful_open_id_authentication/tree/master)但它比普通的 Restful 身份验证要老得多，而且文档甚至没有提到我非常警惕的 Rails 2。有没有人有任何提示？我想做 stackoverflow 所做的，并且*只*支持 OpenID。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T04:28:05.510

查看涵盖该主题的[Railscast 。](http://railscasts.com/episodes/68-openid-authentication)它建立在上一集讨论 Restful 身份验证的基础上。

# asp.net - 用于计算代码隐藏和 aspx 文件中代码行数的工具？

> ID：113118
> 
> 赞同：6
> 
> 时间：2008-09-22T04:03:17.693
> 
> 标签：asp.net, vb.net

寻找一种工具来计算 asp.net (vb.net) 应用程序中的代码行数。

棘手的部分是它还需要找出 aspx 文件中的内联代码。

所以它将是 vb 文件中的代码行（减去注释）加上 aspx 文件中的内联代码（不是 aspx 文件的所有行，只是 <% %> 标记之间的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-22T04:34:03.983

[SlickEdit](http://www.slickedit.com/content/view/441)有一些功能。我不确定它是否计入内联代码。值得一试。如果它不起作用，请告诉我，以便我可以更新我的帖子。

SLOC 报告 SLOC 报告工具提供了一种计算代码行数的简便方法。行数分为三类：代码、注释和空格。计算完代码行数后，将结果绘制为饼图。可以为解决方案、项目或单个文件生成 SLOC 报告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T04:26:46.483

我自己没有尝试过，但[LineCounterAddin](http://www.codeproject.com/KB/macros/LineCounterAddin.aspx)是 Visual Studio 插件，其中包括创建它的分步指南。它支持您所询问的格式（VB 和 ASPX）以及更多格式（例如 XML、XSD、TXT、JS、SQL...）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-23T12:38:40.160

我对[CLOC](http://cloc.sourceforge.net/)有很好的经验。它有多种命令行选项。但是，一个反直觉的事情是，第一个命令行参数是开始计数的目录，通常您可以将 cloc 放入源代码的父目录并使用“。” （它通过指定目录的子目录）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-11T05:31:33.243

从之前[的帖子](https://stackoverflow.com/questions/60394/calculate-code-metrics)中，[Source Monitor](http://www.campwoodsw.com/sm20.html)似乎是答案，而[NDepend](http://www.ndepend.com/)似乎是.NET。

# .net - 推荐的 WPF 日历

> ID：113131
> 
> 赞同：2
> 
> 时间：2008-09-22T04:09:04.543
> 
> 标签：.net, wpf

你会推荐什么 WPF 日历控件？我正在寻找可以让我显示可能跨越多个月的可变周数的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-09-14T14:10:30.643

微软现在已经发布了一个 WPF 日历控件。

```
<c:Calendar>
    <c:DatePicker.BlackoutDates>
        <c:CalendarDateRange Start="4/1/2008"  End="4/6/2008"/>
        <c:CalendarDateRange Start="4/14/2008" End="4/17/2008"/>
    </c:DatePicker.BlackoutDates>
</c:Calendar>
<c:DatePicker>
    <c:DatePicker.BlackoutDates>
        <c:CalendarDateRange Start="4/1/2008"  End="4/6/2008"/>
        <c:CalendarDateRange Start="4/14/2008" End="4/17/2008"/>
    </c:DatePicker.BlackoutDates>
</c:DatePicker> 
```

[![](https://i.stack.imgur.com/7WmdW.png)](https://i.stack.imgur.com/7WmdW.png)
[（来源：[windowsclient.net](http://windowsclient.net/SiteFiles/1000/wpfsp1/wpf-35sp1-toolkit/110-1.png)）]

*   [http://www.codeplex.com/wpf](http://www.codeplex.com/wpf)
*   [http://windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-calendar-datepicker-walkthrough.aspx](http://windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-calendar-datepicker-walkthrough.aspx)

Charles Petzold 也写了[一篇关于自定义 WPF 日历控件的好文章](http://msdn.microsoft.com/en-us/magazine/dd882520.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T04:31:24.897

我会看看[凯文的 Bag-o-tricks](http://j832.com/BagOTricks/)

# .net - 大型图像大小调整库

> ID：113144
> 
> 赞同：2
> 
> 时间：2008-09-22T04:13:42.317
> 
> 标签：.net, image, resize, image-manipulation

有谁知道任何可以处理调整大图像大小（~7573 x ~9485）的好的图像大小调整库。快速且不会占用太多内存的东西会很棒。目前我正在使用 IrfanView 并且只是用参数调用它，但我想找到更多集成到 .net 中的东西。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T04:24:18.547

[ImageMagick](http://www.imagemagick.org)一路走来。它是一个代码库，几乎包含您可能想做的所有与图像相关的操作，在 C 中相当有效地实现。这包括各种类型的调整大小，包括插值（双线性、三线性、自适应等），而不是（只是抽取（采样) 或复制像素。您可以在应用程序中使用大量 API（语言绑定），包括[MagickNet](http://midimick.com/magicknet/)。

另外，不确定它是否与您要尝试做的事情相关，但我认为这是一篇非常酷的 SIGGRAPH 论文，所以这里是：ImageMagick 还支持他们所谓的“液体重新缩放”或接缝雕刻，这个很酷的演示[在这里展示了技术，](http://www.youtube.com/watch?v=qadw0BRKeMk)[这里](http://www.imagemagick.org/Usage/resize/#liquid-rescale)讨论了它在 ImageMagick 中的实现和使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T04:18:49.247

几年前，我在一个需要加载一些相对较大的图像（12 兆像素图像）的程序中使用了[FreeImage 。](http://freeimage.sourceforge.net/)它的性能非常好（比 GDI+ 好），而且 API 很容易理解和开始使用。我什至写了一个 .NET 包装器，我想我仍然把它放在某个地方，但我想现在必须有更好的 .NET 包装器/绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T04:15:27.290

我过去使用过 ImageMagick - 请注意，您也必须从命令行调用它。好消息是集成到您的项目中轻而易举，而且它是一个非常强大的实用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T04:29:56.287

是的，我肯定会选择 ImageMagick。如果我是你，我会给[http://midimick.com/magicknet/一个机会。](http://midimick.com/magicknet/)

# c++ - 使用指向成员函数的指针与使用开关的成本是多少？

> ID：113150
> 
> 赞同：14
> 
> 时间：2008-09-22T04:15:52.420
> 
> 标签：c++, function-pointers

我有以下情况：

```
 class A
{
public:
    A(int whichFoo);
    int foo1();
    int foo2();
    int foo3();
    int callFoo(); // cals one of the foo's depending on the value of whichFoo
}; 
```

在我当前的实现中，我将 in 的值保存`whichFoo`在构造函数中的数据成员中，并使用`switch`in`callFoo()`来决定调用哪个 foo。或者，我可以`switch`在构造函数中使用 a 来保存指向要在`fooN()`中调用的权利的指针`callFoo()`。

`callFoo()`我的问题是，如果 A 类的对象只构造一次，而被调用很多次，那么哪种方式更有效。因此，在第一种情况下，我们多次执行 switch 语句，而在第二种情况下，只有一个 switch，并且使用指向它的指针多次调用成员函数。我知道使用指针调用成员函数比直接调用要慢。有谁知道这个开销是多于还是少于 a 的成本`switch`？

澄清：我意识到，除非您尝试并计时，否则您永远不会真正知道哪种方法可以提供更好的性能。但是，在这种情况下，我已经实现了方法 1，我想知道方法 2 是否至少在原则上更有效。看来它可以，现在我费心去实现它并尝试它是有意义的。

哦，出于美学原因，我也更喜欢方法 2。我想我正在寻找实施它的理由。:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-22T04:18:45.237

你有多确定通过指针调用成员函数比直接调用它慢？你能测量出差异吗？

一般来说，在进行绩效评估时，您不应该依赖您的直觉。坐下来使用您的编译器和计时功能，并实际*测量*不同的选择。你可能会感到惊讶！

更多信息：有一篇很棒的文章[Member Function Pointers and the Fastest Possible C++ Delegates](http://www.codeproject.com/KB/cpp/FastDelegate.aspx)深入详细地介绍了成员函数指针的实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T05:39:07.527

你可以这样写：

```
class Foo {
public:
  Foo() {
    calls[0] = &Foo::call0;
    calls[1] = &Foo::call1;
    calls[2] = &Foo::call2;
    calls[3] = &Foo::call3;
  }
  void call(int number, int arg) {
    assert(number < 4);
    (this->*(calls[number]))(arg);
  }
  void call0(int arg) {
    cout<<"call0("<<arg<<")\n";
  }
  void call1(int arg) {
    cout<<"call1("<<arg<<")\n";
  }
  void call2(int arg) {
    cout<<"call2("<<arg<<")\n";
  }
  void call3(int arg) {
    cout<<"call3("<<arg<<")\n";
  }
private:
  FooCall calls[4];
}; 
```

实际函数指针的计算是线性且快速的：

```
 (this->*(calls[number]))(arg);
004142E7  mov         esi,esp 
004142E9  mov         eax,dword ptr [arg] 
004142EC  push        eax  
004142ED  mov         edx,dword ptr [number] 
004142F0  mov         eax,dword ptr [this] 
004142F3  mov         ecx,dword ptr [this] 
004142F6  mov         edx,dword ptr [eax+edx*4] 
004142F9  call        edx 
```

请注意，您甚至不必在构造函数中修复实际的函数编号。

我已经将此代码与由`switch`. 该`switch`版本不提供任何性能提升。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T04:22:22.797

回答这个问题：在最细粒度的级别上，指向成员函数的指针会表现得更好。

为了解决未提出的问题：这里的“更好”是什么意思？在大多数情况下，我希望差异可以忽略不计。然而，根据它所做的类，差异可能很大。在担心差异之前进行性能测试显然是正确的第一步。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T04:25:15.737

如果你打算继续使用一个开关，这很好，那么你可能应该把逻辑放在一个辅助方法中，并从构造函数中调用 if 。或者，这是[策略模式](http://www.dofactory.com/Patterns/PatternStrategy.aspx)的经典案例。您可以创建一个名为 IFoo 的接口（或抽象类），它有一个带有 Foo 签名的方法。你会让构造函数接受一个 IFoo 实例（构造函数[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，它实现了你想要的 foo 方法。你会有一个私有的 IFoo ，它会用这个构造函数设置，每次你想调用 Foo 你都会调用你的IFoo 的版本。

注意：我从大学开始就没有使用过 C++，所以我的术语可能不在这里，但一般的想法适用于大多数 OO 语言。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T07:01:26.173

如果您的示例是真实代码，那么我认为您应该重新审视您的类设计。将值传递给构造函数，并使用它来更改行为实际上等同于创建子类。考虑重构以使其更明确。这样做的效果是您的代码最终将使用函数指针（所有虚拟方法实际上都是跳转表中的函数指针）。

但是，如果您的代码只是一个简化示例，询问一般来说跳转表是否比 switch 语句更快，那么我的直觉会说跳转表更快，但您依赖于编译器的优化步骤。但是，如果性能真的是这样一个问题，永远不要依赖直觉——敲出一个测试程序并测试它，或者查看生成的汇编程序。

有一点是肯定的，switch 语句永远不会比跳转表慢。原因是编译器的优化器可以做的最好的事情是将一系列条件测试（即开关）转换为跳转表。因此，如果您真的想确定，请将编译器从决策过程中取出并使用跳转表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T04:19:42.833

听起来您应该创建`callFoo`一个纯虚函数并创建一些`A`.

除非您真的需要速度，否则已经进行了广泛的分析和检测，并确定调用`callFoo`确实是瓶颈。你？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T04:24:53.727

函数指针几乎总是比链式 if 更好。它们使代码更清晰，并且几乎总是更快（除非在它只能在两个函数之间进行选择并且总是被正确预测的情况下）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T04:25:44.020

我应该认为指针会更快。

现代 CPU 预取指令；错误预测的分支会刷新缓存，这意味着它会在重新填充缓存时停止。指针不会这样做。

当然，您应该同时测量两者。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-22T09:20:39.317

## 仅在需要时进行优化

第一：大多数时候你很可能不在乎，差别会很小。首先确保优化此调用确实有意义。仅当您的测量结果表明调用开销确实花费了大量时间时，才继续对其进行优化（无耻插件 - 参见[如何优化应用程序以使其更快？](https://stackoverflow.com/questions/93479/how-to-optimize-an-application-to-make-it-faster)）如果优化不显着，则更喜欢可读性更高的代码。

## 间接调用成本取决于目标平台

一旦您确定值得应用低级优化，就该了解您的目标平台了。您可以在此处避免的成本是分支误预测惩罚。在现代 x86/x64 CPU 上，这种错误预测可能非常小（大多数情况下它们可以很好地预测间接调用），但是当针对 PowerPC 或其他 RISC 平台时，通常根本无法预测间接调用/跳转并避免它们可以带来显着的性能提升。另请参阅[虚拟通话费用取决于平台](https://stackoverflow.com/questions/113830/performance-penalty-for-working-with-interfaces-in-c#114000)。

## 编译器也可以使用跳转表实现切换

一个问题：切换有时也可以实现为间接调用（使用表格），尤其是在许多可能值之间切换时。这种开关表现出与虚函数相同的错误预测。为了使这种优化可靠，对于最常见的情况，人们可能更喜欢使用 if 而不是 switch。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-22T13:30:35.347

使用计时器来查看哪个更快。尽管除非这段代码一遍又一遍地重复，否则您不太可能注意到任何差异。

确保如果您从构造函数运行代码，如果构造失败，您将不会泄漏内存。

Symbian OS 大量使用此技术： [http ://www.titu.jyu.fi/modpa/Patterns/pattern-TwoPhaseConstruction.html](http://www.titu.jyu.fi/modpa/Patterns/pattern-TwoPhaseConstruction.html)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-22T13:38:14.410

如果您只调用 callFoo() 一次，那么函数指针*很可能*会慢一些。如果您多次调用它，则函数指针*很可能*会快一点（因为它不需要继续通过开关）。

无论哪种方式，查看汇编代码以确定它正在做你认为它正在做的事情。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-22T13:48:04.400

切换（甚至超过排序和索引）的一个经常被忽视的优势是，如果您知道在绝大多数情况下都使用特定值。订购开关很容易，以便首先检查最常见的开关。

附言。为了加强格雷格的回答，如果你关心速度 - 测量。当 CPU 具有预取/预测分支和流水线停顿等时，查看汇编程序无济于事

# python - C 中的 sighold 和 sigrelse 函数的 Python 等价物是什么？

> ID：113170
> 
> 赞同：3
> 
> 时间：2008-09-22T04:25:22.943
> 
> 标签：python, signals

看来 Python 信号模块没有任何类似于 C 中使用 signal.h 的 sighold 和 sigrelse 函数的东西。是否有*任何*类型的 Python 等价物？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T04:36:29.190

没有办法暂时“阻止”来自关键部分的信号（因为并非所有 Unix 风格都支持这一点）。

[https://docs.python.org/library/signal.html](https://docs.python.org/library/signal.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T04:47:24.980

在 Python 中没有直接的绑定。通过 ctypes 访问它们很容易；这是一个例子。

```
import ctypes, signal
libc = ctypes.cdll.LoadLibrary("libc.so.6")
libc.sighold(signal.SIGKILL)
libc.sigrelse(signal.SIGKILL) 
```

我不熟悉这些调用的用法，但请注意 Python 的信号处理程序与 C 的工作方式不同。当 Python 代码附加到信号回调时，信号在解释器的 C 端被捕获并排队。解释器偶尔会因内部管理（和线程切换等）而中断。正是在中断期间，将调用信号的 Python 处理程序。

综上所述，请注意 Python 的信号处理比普通的 C 信号处理程序少一点异步性。

# c# - 在 .NET C# 中设置操作

> ID：113173
> 
> 赞同：5
> 
> 时间：2008-09-22T04:26:58.213
> 
> 标签：c#, .net, data-structures, set

我现在正在研究与 roughset 相关的东西。该项目使用了大量的集合操作和操作。我一直在使用字符串操作作为设置操作的权宜之计。它一直运行良好，直到我们需要通过算法处理一些不合情理的数据（500,000 条记录，每条记录大约 40 多列）。

我知道 .net 2.0 中没有设置数据结构（2.0 是我开始项目时最新的） 我想知道是否有任何库在 .net c# 中提供快速设置操作，或者 3.5 是否添加了本机设置数据结构体。

谢谢 。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-22T04:33:25.217

.NET 3.5 已经有一个原生的集合数据类型：[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)。您可能还想查看操作的[HashSet 和 LINQ 集合运算符](http://msdn.microsoft.com/en-us/library/bb397728.aspx)。

在 .NET 1.0 中，有一个第三方 Set 数据类型：[Iesi.Collections](http://www.codeproject.com/KB/recipes/sets.aspx)，它使用 .NET 2.0 泛型和[Iesi.Collections.Generic](http://www.codeproject.com/KB/recipes/GenericISet.aspx)进行了扩展。

您可能想尝试查看所有这些，看看哪一个对您最有利。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T04:29:22.373

LINQ 支持一些集合操作。有关示例，请参见[LINQ 101 页面](http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx)。
还有一个类[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx) (.NET 3.5)

* * *

以下是 .NET 中设置操作的 Microsoft 指南：

### [HashSet 和 LINQ 集操作](http://msdn.microsoft.com/en-us/library/bb397728.aspx)

HasSet 类支持的集合操作列表：

### [HashSet 集合类型](http://msdn.microsoft.com/en-us/library/bb397727.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T05:16:07.423

It may be worth taking a look at [C5](http://www.itu.dk/research/c5/), it's a generic collection library for .NET which includes sets.

Note that I haven't looked into it much, but it seems to be a pretty fantastic collection library.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T04:29:37.257

更新：这是针对 .Net 2.0 的。对于 .Net 3.5，请参阅 aku、Jon 的帖子。

这是[在 .Net 中有效表示集合的](http://msdn.microsoft.com/en-us/library/aa289153(VS.71).aspx)一个很好的参考。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T04:29:51.560

在 .NET 3.5 中尝试[HashSet 。](http://msdn.microsoft.com/en-us/library/bb359438.aspx)

[.NET BCL 团队成员的这个页面](http://blogs.msdn.com/bclteam/archive/2006/11/09/introducing-hashset-t-kim-hamilton.aspx)有一些关于 HashSet 意图的好信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T09:25:22.147

我一直在滥用 .NET 2.0 中的 Dictionary 类：

```
private object dummy = "ok";

public void Add(object el) {
  dict[el] = dummy;
}

public bool Contains(object el) {
  return dict.ContainsKey(el);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T04:27:57.167

您可以在 C# 3.0 中使用 Linq to Objects。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T04:29:35.477

你有想过唱 F# 吗？这似乎是函数式编程语言的工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T09:07:42.080

你应该看看[C5 Generic Collection Library](http://www.itu.dk/research/c5/)。该库是通过提供缺失的结构以及用一组精心设计的接口和泛型类替换现有结构来修复 .NET 类库中的漏洞的系统方法。

其中，有`HashSet<T>`- 基于线性散列的通用 Set 类。

# python - 如何使用 owfs 读取 iButton 温度记录器？

> ID：113185
> 
> 赞同：9
> 
> 时间：2008-09-22T04:30:19.717
> 
> 标签：python, ubuntu, 1wire

我已经安装[`owfs`](http://www.owfs.org/)并试图从[iButton 温度记录器](http://www.maxim-ic.com/quick_view2.cfm/qv_pk/4088)中读取数据。

`owfs`让我将 iButton 挂载为 fuse 文件系统，我可以看到所有数据。不过，我无法弄清楚访问数据的最佳方式是什么。`cat`我可以通过ting 文件来获得单独的读数，例如`cat onewire/{deviceid}/log/temperature.1`，但`onewire/{deviceid}/log/temperature.ALL`文件“损坏”（可能太大，因为`histogram/temperature.ALL`工作正常）。

读取所有文件的 python 脚本似乎可以工作，但需要很长时间。有更好的方法吗？有没有人有任何例子？

我使用的是 Ubuntu 8.04，无法运行 java“单线查看器”应用程序。

**更新**：使用[`owpython`](http://owfs.sourceforge.net/owpython.html)（与 owfs 一起安装），我可以获得当前温度，但不知道如何访问记录的日志：

```
>>> import ow
>>> ow.init("u") # initialize USB
>>> ow.Sensor("/").sensorList()
[Sensor("/81.7FD921000000"), Sensor("/21.C4B912000000")]
>>> x = ow.Sensor("/21.C4B912000000")
>>> print x.type, x.temperature
DS1921           22 
```

`x.log`给出一个`AttributeError`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-08T06:07:29.503

我也遇到了 owfs 的问题。我发现它是一个简单问题的过度设计的解决方案。现在我使用[DigiTemp](http://www.digitemp.com/)代码没有问题。我发现它灵活可靠。例如，我通过运行每分钟将房间的温度存储在一个日志文件中

```
/usr/local/bin/digitemp_DS9097U -c /usr/local/etc/digitemp.conf \
    -q -t0 -n0 -d60 -l/var/log/temperature 
```

为了达到这一点，我下载了源文件，解压它，然后执行以下操作。

```
# Compile the hardware-specific command
make ds9097u
# Initialize the configuration file
./digitemp_DS9097U -s/dev/ttyS0 -i
# Run command to obtain temperature, and verify your setup
./digitemp_DS9097U -a 
# Copy the configuration file to an accessible place
cp .digitemprc /usr/local/etc/digitemp.conf 
```

我还手动编辑了我的配置文件以将其调整为我的设置。这就是它的结局。

```
TTY /dev/ttyS0
READ_TIME 1000
LOG_TYPE 1
LOG_FORMAT "%b %d %H:%M:%S Sensor %s C: %.2C F: %.2F"
CNT_FORMAT "%b %d %H:%M:%S Sensor %s #%n %C"
HUM_FORMAT "%b %d %H:%M:%S Sensor %s C: %.2C F: %.2F H: %h%%"
SENSORS 1
ROM 0 0x10 0xD3 0x5B 0x07 0x00 0x00 0x00 0x05 
```

在我的情况下，我还创建了一个 /etc/init.d/digitemp 文件并使其在启动时运行。

```
#! /bin/sh
#
# System startup script for the temperature monitoring daemon
#
### BEGIN INIT INFO
# Provides: digitemp
# Required-Start:
# Should-Start:
# Required-Stop:
# Should-Stop:
# Default-Start:  2 3 5
# Default-Stop:   0 1 6
# Description:    Start the temperature monitoring daemon
### END INIT INFO

DIGITEMP=/usr/local/bin/digitemp_DS9097U
test -x $DIGITEMP || exit 5

DIGITEMP_CONFIG=/root/digitemp.conf
test -f $DIGITEMP_CONFIG || exit 6

DIGITEMP_LOGFILE=/var/log/temperature

# Source SuSE config
. /etc/rc.status

rc_reset
case "$1" in
    start)
        echo -n "Starting temperature monitoring daemon"
        startproc $DIGITEMP -c $DIGITEMP_CONFIG  -q -t0 -n0 -d60 -l$DIGITEMP_LOGFILE
        rc_status -v
        ;;
    stop)
        echo -n "Shutting down temperature monitoring daemon"
        killproc -TERM $DIGITEMP
        rc_status -v
        ;;
    try-restart)
        $0 status >/dev/null && $0 restart
        rc_status
        ;;
    restart)
        $0 stop
        $0 start
        rc_status
        ;;
    force-reload)
        $0 try-restart
        rc_status
        ;;
    reload)
        $0 try-restart
        rc_status
        ;;
    status)
        echo -n "Checking for temperature monitoring service"
        checkproc $DIGITEMP
        rc_status -v
        ;;
    *)
        echo "Usage: $0 {start|stop|status|try-restart|restart|force-reload|reload}"
        exit 1
        ;;
esac
rc_exit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T20:47:15.207

我不认为有什么聪明的方法。owpython 不支持 API 文档中的说明。我想`/proc`这是你最安全的选择。也许看看 owpython 模块的源代码并检查您是否可以了解它是如何工作的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-08-01T18:22:06.693

好吧，我刚刚开始研究 ibuttons 并想使用 python。

这看起来更有希望：

[http://www.ohloh.net/p/pyonewire](http://www.ohloh.net/p/pyonewire)

# .net - .net 中的隐藏马尔可夫模型实现？

> ID：113189
> 
> 赞同：4
> 
> 时间：2008-09-22T04:32:03.600
> 
> 标签：.net, hidden-markov-models

有谁知道.net中的任何HMM实现？

我所做的一些事情基本上是根据我对这个主题的一点了解以及我的一位教授所做的一个非常特定领域的应用程序的一些 c++ 代码进行逆向工程的。

我想对其进行一些改进，并与其他人使用相同语言的作品进行比较可以真正帮助确定我是否做对了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T04:51:43.940

一个快速的谷歌搜索返回了这个[C# 实现](http://corsis.svn.sourceforge.net/viewvc/corsis/trunk/Tenka.Text/Tenka.Text/Statistics/MarkovNGramm.cs?view=markup)似乎是一个隐马尔可夫模型（他们说它是一个[n-gram](http://en.wikipedia.org/wiki/N-gram)，但实现似乎是一个 HMM）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-05-11T08:02:06.223

我敢肯定它已经很晚了，但也许这将为其他人提供参考：[Accord.NET](http://accord-net.origo.ethz.ch/)框架集成了一个简单、高效的 HMM 实现。

# windows - 创建一个可以在任何地方运行的小型“窗口形式”应用程序

> ID：113206
> 
> 赞同：3
> 
> 时间：2008-09-22T04:37:35.160
> 
> 标签：windows, linux, macos, programming-languages, widget

我在嵌入式世界工作，主要使用 C 语言，根本没有 GUI（因为没有显示屏）。

转到我几乎没有经验的非嵌入式世界，对于我来说，构建一个可以在所有常见平台上运行的简单窗口形式应用程序的最佳编程环境（语言/IDE/等）是什么：windows /linux/mac-os ?

我不想构建网络应用程序。

我关注 Python 和其中一个小部件库，QT 或 WxWidgets。这是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T04:39:57.260

我个人喜欢[GTK+](http://www.gtk.org/)，但你提到的那个或任何一个都应该没问题。我不知道就 RAM 使用率而言哪个是最好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T04:42:14.963

wx 和 QT 都有直接绘制小部件的嵌入式/通用版本。它们都可以从 python 调用，但如果你的系统非常小，python 或 py2exe 可能不可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T04:54:40.720

除非您想嵌入 HtmlWindow，否则我会使用 wxWindows... 到目前为止对我来说在任何地方都可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T05:39:37.883

[Qt](http://trolltech.com/downloads)是一个不错的选择。在我看来，它有一个最好的（易于使用、简单且信息丰富的）API 文档。包还包括许多示例 - 从非常基本到复杂。而且，是的，它确实是跨平台的。

检查[Qt Licensing](http://trolltech.com/products/qt/learnmore/licensing-pricing/licensing)页面，该库仅对 GPL 项目免费。

我使用[QDevelop](http://qdevelop.free.fr/)作为文本编辑器，但还有许多其他选择 - [Eclipse](http://www.eclipse.org/cdt/)、[KDevelop](http://www.kdevelop.org/)、[Code:Blocks](http://www.codeblocks.org/)、 VS 插件等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T05:40:44.713

我都广泛使用过 PyQt 和 wxPython。PyQt 设计得更好，并带有非常好的 UI 设计器，因此您可以快速组装您的 UI

wxPython 有一个非常好的演示，它几乎可以做 PyQT 可以做的任何事情，我会更喜欢 PyQt，但它可能是免费的商业用途，但 wxPython 是免费的并且是不错的跨平台库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T07:44:44.133

为什么不使用swing和java？它是跨平台的，对于表单应用程序来说看起来很合理。如果你眯着眼睛忽略 Java，它会非常令人愉快 - 或者，在 JVM 上使用其中一种动态语言（我推荐使用[Groovy](http://groovy.codehaus.org/GUI+Programming+with+Groovy)）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T04:49:13.837

它将是一个什么样的应用程序？您是否考虑过使用基于 Web 的应用程序？从这个意义上说，基于 Web 的应用程序可以非常灵活——您可以在任何具有现代浏览器的平台上运行它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-10-06T20:35:17.647

到目前为止，创建本机跨平台应用程序的最简单选择是[REALbasic](http://www.realsoftware.com)。试一试，您将在几分钟内拥有适用于 Mac OS X、Windows 和 Linux 的工作应用程序。无需担心运行时间或其他问题。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-09-22T04:42:30.967

我认为您应该尝试 Html 应用程序。它类似于包含 DHTML、java 脚本、ActiveX 的网页，但它像 .exe 一样执行。

**编辑：** 很抱歉建议您使用 html 应用程序。我只知道它只能在 Windows 上运行。

# internet-explorer - 去除在 IE 中使用额外不透明度过滤的透明 PNG 上的斑点

> ID：113212
> 
> 赞同：2
> 
> 时间：2008-09-22T04:41:38.567
> 
> 标签：internet-explorer, cross-browser, png, transparency

我使用 Javascript 和 CSS 制作了一个旋转图像推子来显示图像并卸载它们。我想使用透明的 PNG，我没想到也不关心它们在 IE 6 中是否看起来不错，但 IE 7 和 8 对它们同样不尊重。Firefox 和其他现代浏览器看起来很棒。
每张带有`image.filter = alpha(opacity=xxx)`透明度的图片看起来都有一些残留的噪点，可能来自压缩或其他原因，无论我对图片做什么，那里仍然有一些东西。

我已经通过将 JPG 放在白色背景上并使用 GIF 来解决问题。
也有人可以告诉我这是否实际上是 IE 中的错误？

* * *

如果你需要一个例子，请告诉我，我会做一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-26T20:11:16.817

我遇到了同样的问题——所有的 IE 都会失败，但 Firefox 和所有其他浏览器不会有问题。

我修复它的方法是在 Gimp 中打开 PNG，选择模糊选择工具，将阈值设置为 150%，选中抗锯齿，取消选中羽化边缘，选中选择透明区域。接下来，我点击透明区域——我可以在图像上找到的所有区域，然后点击 Delete 键（意思是“清除”）。然后，我再次重新保存了图像。对于所有 Internet Exploder 中的大多数图像，这解决了大约 98% 的问题。

不过，我想稍微警告一下该指令。如果选择Fuzzy Select，最后选择的比之前的透明区域多，那么设置为3%，模糊选择，点击Delete，然后重新选择模糊选择为150%，然后点击Delete，不删除应该可以解决你的任何形象。

如果您没有 Gimp，它是跨平台的，适用于 Windows、Mac 和 Linux。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T04:48:50.437

您必须将 'finishopacity' 与 'opacity' 一起使用，以便在图片上获得均匀的不透明度。

顺便说一句，透明度在 IE 6 中也不是那么好。我为此使用 Bob Osola 的 JavaScript 修复程序，效果很好！

[http://homepage.ntlworld.com/bobosola/](http://homepage.ntlworld.com/bobosola/)

# javascript - 添加选项以选择框而不使用 Internet Explorer 关闭框？

> ID：113218
> 
> 赞同：4
> 
> 时间：2008-09-22T04:45:59.120
> 
> 标签：javascript, ajax

我正在尝试构建一个带有许多下拉选择框的网页，这些下拉选择框在第一次打开框时异步加载它们的选项。这在 Firefox 下运行良好，但在 Internet Explorer 下不行。

下面是我想要实现的一个小例子。基本上，有一个选择框（id 为“selectBox”），它只包含一个选项（“Any”）。然后有一个`onmousedown`处理程序在单击框时加载其他选项。

```
<html>
 <head>
  <script type="text/javascript">
    function appendOption(select,option) {
      try {
        selectBox.add(option,null); // Standards compliant.
      } catch (e) {
        selectBox.add(option);      // IE only version.
      }
    }

    function loadOptions() {
      // Simulate an AJAX request that will call the
      // loadOptionsCallback function after 500ms.
      setTimeout(loadOptionsCallback,500);
    }

    function loadOptionsCallback() {
      var selectBox = document.getElementById('selectBox');
      var option = document.createElement('option');
      option.text = 'new option';
      appendOption(selectBox,option);
    }
  </script>
 </head>
 <body>
  <select id="selectBox" onmousedown="loadOptions();">
   <option>Any</option>
  </select>
 </body>
</html> 
```

期望的行为（Firefox 会这样做）是：

1.  用户看到的是一个包含“任何”的封闭选择框。
2.  用户单击选择框。
3.  选择框打开以显示唯一的选项（“任何”）。
4.  500 毫秒后（或当 AJAX 调用返回时）下拉列表扩展以包含新选项（在此示例中硬编码为“新选项”）。

所以这正是 Firefox 所做的，这很棒。但是，在 Internet Explorer 中，只要在“4”中添加新选项，浏览器就会关闭选择框。选择框确实包含正确的选项，但该框已关闭，需要用户单击以重新打开它。

那么，是否有人对我如何在不 IE 关闭下拉框的情况下异步加载选择控件的选项有任何建议？

我知道我可以在单击框*之前*加载列表，但是我正在开发的真实表单包含许多这样的选择框，它们都是相互关联的，所以如果我可以加载，客户端和服务器都会**好得多**每组选项只在需要时。

此外，如果结果是同步加载的，在选择框的`onmousedown`处理程序完成之前，IE 将按预期显示完整列表 - 但是，同步加载在这里不是一个**好**主意，因为它会在网络请求时完全“锁定”浏览器发生。

最后，我还尝试使用 IE 的`click()`方法在添加新选项后打开选择框，但这不会重新打开选择框。

任何想法或建议将不胜感激！:)

谢谢！

保罗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T05:18:49.650

I would suggest to load the contents of the selects that don't depend on any other select boxes on page load. Then in the onchange event of those selects load the contents of the rest of the selects that depend on them.

Your idea is sound from a programming point of view, but you will get that lag between clicking on the select and it being populated with all the options which from the user's point of view looks kind of sloppy.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T05:06:19.537

您是否考虑过在表单上其他相关字段之一的 onblur 事件中调用 loadOptions 方法？这会在单击之前将列表加载到下拉框中，但行为应该仍然相似。

我认为您将探索稍微不同的选项来获得您想要的东西，因为如果您使用 onmousedown 或 onclick 事件，您可能会被 Internet Explorer 关闭该下拉列表所困。使用这些事件的另一个缺点是，如果用户使用键盘选择字段，您的方法可能永远不会被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-13T18:59:01.940

我找到了解决方案，问题似乎在于 IE 对 onclick、hover、mouseover 等的实现。将项目添加到下拉列表后，下拉列表关闭。如果您不在 select 属性中提供方法，而是让 jquery 在运行时添加该函数，它可以工作。

```
$(function() {
    jQuery(".selectBox").live("focus", function() {
       loadOptions();
     });
}); 
```

整个页面：

```
<html>
<head>
    <script src="jquery-latest.js" type="text/javascript"/>
</head>
<body>
    <select id="selectBox" onmousedown="loadOptions();">
        <option>Any</option>
    </select>
    <script type="text/javascript">
        $(function() {
            jQuery(".selectBox").live("focus", function() {
                loadOptions();
            });
        });
        function appendOption(select, option) {
            try {
                selectBox.add(option, null); // Standards compliant.
            } catch (e) {
                selectBox.add(option);      // IE only version.
            }
        }

        function loadOptions() {
            // Simulate an AJAX request that will call the
            // loadOptionsCallback function after 500ms.
            setTimeout(loadOptionsCallback, 500);
        }

        function loadOptionsCallback() {
            var selectBox = document.getElementById('selectBox');
            var option = document.createElement('option');
            option.text = 'new option';
            appendOption(selectBox, option);
        }
    </script>
</body> 
```

# tcp - IPv4 允许的最大 TCP/IP 网络端口号是多少？

> ID：113224
> 
> 赞同：438
> 
> 时间：2008-09-22T04:50:39.123
> 
> 标签：tcp, network-protocols

可以使用的最高端口号是多少？

* * *

## 回答 #1

> 赞同：612
> 
> 时间：2008-09-22T04:53:02.130

端口号是一个无符号的 16 位整数，因此是 65535。

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2008-09-22T04:53:11.007

最大端口号是无符号短 2^16-1: 65535

注册端口是由 Internet Corporation for Assigned Names and Numbers (ICANN) 分配给特定用途的端口。每个注册端口都在 1024–49151 范围内。

自 2001 年 3 月 21 日起，注册机构为 ICANN；在那之前是IANA。

编号小于注册端口号的端口称为知名端口；编号大于已注册端口的端口称为动态和/或私有端口。

[维基百科：注册端口](http://en.wikipedia.org/wiki/Registered_port)

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2008-09-22T04:56:28.017

据我了解，您最多只能使用 49151，因为从 49152 到 65535 是为[临时端口保留的](http://www.ncftp.com/ncftpd/doc/misc/ephemeral_ports.html)

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2008-09-22T05:10:13.133

只是对[ssamery](https://stackoverflow.com/questions/113224/what-is-the-largest-tcpip-network-port-number-allowable-for-ipv4#113237) 's answer的跟进。临时端口范围（至少在 Linux 上，我怀疑其他 Unices 也是如此）不是固定的。这可以通过写入来控制 `/proc/sys/net/ipv4/ip_local_port_range`

唯一的限制（就 IANA 而言）是 1024 以下的端口被指定为知名端口。以上端口可免费使用。通常您会发现 1024 以下的端口仅限于超级用户访问，我相信正是出于这个原因。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-04-06T01:33:35.937

根据 RFC 793，端口是 16 位无符号整数。

这意味着范围是 0 - 65535。

但是，在该范围内，端口 0 - 1023 通常保留用于特定目的。我说一般是因为除了端口 0 之外，通常不会执行 0-1023 保留。TCP/UDP*实现*通常不强制除 0 之外的保留。如果需要，您可以在端口 80、25 或 65535 上运行 Web 服务器的 TLS 端口，而不是标准的 443。同样，即使它是SMTP 服务器侦听端口 25 的标准，您可以在 80、443 或其他端口上运行它。

大多数*实现*为特定目的保留 0 - 随机端口分配。所以在大多数*实现*中，说“监听端口 0”实际上意味着“我不在乎我使用什么端口，只要给我一些随机未分配的端口来监听”。

因此，使用 0-65535 范围内的端口（包括 0、临时保留范围等）的任何限制都是特定于*实现（即操作系统/驱动程序）的*，但是包括 0 在内的所有端口都是 RFC 793 中的有效端口。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-10-08T17:16:54.553

端口的有效数字是：0 到 2^16-1 = 0 到 65535
这是因为端口号是 16 位长度的。

但是端口分为：
**知名端口**：0 到 1023（用于系统服务，例如 HTTP、FTP、SSH、DHCP ...）
**注册/用户端口**：1024 到 49151（您可以将其用于您的服务器，但可以小心一些著名的应用程序：如 Microsoft SQL Server 数据库管理系统 (MSSQL) 服务器或 Apache Derby Network Server 已经从这个范围内占用，即不建议将 MSSQL 的端口分配给您的服务器，否则如果 MSSQL 正在运行，那么您的服务器最由于端口冲突，可能不会运行）
**动态/私有端口**：49152 到 65535。（不用于服务器而不是客户端，例如在 NATing 服务中）

在编程中，您可以为您的服务器使用 0 到 65535 之间的任何数字，但是您应该坚持上面提到的范围，否则某些系统服务或某些应用程序将由于端口冲突而无法运行。
在此处查看大多数端口的列表：[https ://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-09-22T04:53:45.840

这取决于您所说的范围，但动态范围最高可达 65535 或 2^16-1（16 位）。

[http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-09-22T04:53:51.720

应该是 65535。

# .net - 如何在不捆绑 .Net 框架的情况下发布 .Net 应用程序？

> ID：113233
> 
> 赞同：1
> 
> 时间：2008-09-22T04:54:12.547
> 
> 标签：.net, linker

我有一个奇怪的要求，即在不捆绑 .Net 框架的情况下发布应用程序（以节省内存占用和带宽）。

这可能吗？客户可能会或可能不会在他们的系统上安装 .Net 运行时。

做 Ngen 会解决这个问题吗？我一直在寻找类似发布 C++ 应用程序的旧方法（使用链接器仅链接您需要的二进制文件）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T04:58:57.917

不使用 Ngen 的一种选择可能是使用 .Net Framework 3.5 SP1“客户端配置文件”发布。这是 .Net Framework 的子集，用于构建客户端应用程序，可以作为单独的、更小的包下载。

请参阅此处的[BCL 团队博客和此处](http://blogs.msdn.com/bclteam/archive/2008/05/21/net-framework-client-profile-justin-van-patten.aspx "BCL 团队博客 - .NET Framework 客户端配置文件 [Justin Van Patten]")的[Scott Guthrie](http://weblogs.asp.net/scottgu/archive/2008/05/12/visual-studio-2008-and-net-framework-3-5-service-pack-1-beta.aspx "Scottgu 的博客 - Visual Studio 2008 和 .NET Framework 3.5 Service Pack 1 Beta")的详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T05:02:12.543

在这种情况下，事实上的标准解决方案是您的客户应该拥有正确版本的 .Net 框架，只要它是 Windows 更新的一部分。因此，您的安装程序应检查您在客户端计算机上使用的 .NET 版本的可用性，并建议从 Microsoft 下载它。这将阻止您的公司通过您的渠道传输它并确保您的应用程序具有正确的基础架构，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T04:58:43.347

你检查过蝾螈吗？[远程软件](http://www.remotesoft.com/linker/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T05:00:45.667

仅供参考，

这个话题已经讨论过了。不幸的是，我目前找不到链接（应该改进搜索）。

* * *

好的，我发现了类似的问题：

[.NET 框架依赖项](https://stackoverflow.com/questions/11199/net-framework-dependency)

我记得有完全相同的问题，但我找不到它:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T04:57:03.883

如果您的软件需要 .NET，那么您的最终用户将需要相同版本的 .NET。您不能像使用 MFC 或 Delphi 那样将 .NET“链接”到可执行文件中以创建单个 .exe。如果您的安装程序没有安装 .NET 运行时，那么您需要确保用户知道这一点并将他们指向 Microsoft 的 .NET 下载。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T05:01:04.963

您可以使用“客户端配置文件”，它是用于桌面应用程序的 .NET Framework 的子集。客户端配置文件的大小约为 20 MB

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T05:06:48.040

您还可以包含在 VS 中创建的引导程序“setup.exe”。它会检测你是否有必要的 .net 版本，如果有，启动安装程序；如果没有，它会提示您下载框架。

# html - 居中的背景图像偏离 1px

> ID：113253
> 
> 赞同：3
> 
> 时间：2008-09-22T05:03:46.423
> 
> 标签：html, css, background-image

我的网页位于一个 960px 宽的 DIV 中，我使用以下代码将这个 DIV 置于页面中间：

```
html,body{background: url(images/INF_pageBg.gif) center top repeat-y #777777;text-align:center;}
#container{background-color:#ffffff;width:960px;text-align:left;margin:0 auto 0 auto;} 
```

我需要将 html/body 的背景图像平铺在页面中间，但是如果浏览器中的可查看窗格的像素宽度为奇数，则居中的背景和居中的 DIV 不会对齐在一起.

这只发生在FF中。

有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T05:08:00.313

是的，这是已知问题。不幸的是，您只能修复 div 和图像宽度，或使用脚本动态更改 stye.backgroundPosition 属性。另一个技巧是将表达式放入 CSS 类定义中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-24T15:34:04.100

（最）常见的问题是您的背景图像有一个奇数，而您的容器是一个偶数。我用我最好的英语写了一篇文章，我还解释了浏览器如何定位你的图片：[在这里查看](http://www.blacktower.nl/2008/03/19/center-div-with-center-background/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-09T15:52:06.897

我发现通过在奇数像素宽上制作背景图像，Firefox 的问题就消失了。

设置填充：0px 0px 0px 1px；修复了 IE 的问题。

卡洛卡波卡萨，Travian Games

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-20T13:06:09.463

我能够用 jQuery 解决这个问题：

```
$(document).ready(function(){
 $('body').css({
  'margin-left': $(document).width()%2
 });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T18:09:14.527

我有同样的问题。

要使*背景居中*，您需要有一个**比视口更宽的背景图像**。尝试使用**2500 像素**宽的背景。它将强制浏览器将可查看的图像部分居中。

请让我知道这对你有没有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-22T19:18:26.820

如何创建具有相同背景图像的包装 div。

```
body{ background: url(your-image.jpg) no-repeat center top; }
#wrapper{ background: url(your-image.jpg) no-repeat center top; margin: 0 auto; width: 984px; } 
```

包装器有一个偶数，背景将在任何屏幕尺寸上保持相同的位置。

# vb.net - VB.NET - 实现 IDisposable 时是否应该添加 Finalize 方法？

> ID：113267
> 
> 赞同：7
> 
> 时间：2008-09-22T05:07:43.217
> 
> 标签：vb.net, dispose, idisposable, destructor, finalize

在 Visual Studio 中，当我键入“ `Implements IDisposable`”行时，IDE 会自动添加：

*   成员`disposedValue`变量
*   一种`Sub Dispose() Implements IDisposable.Dispose`
*   一种`Sub Dispose(ByVal disposing As Boolean)`

应该不理`Dispose()`会，清理代码应该放在`Dispose(disposing)`.

然而[Dispose Finalize Pattern](http://msdn.microsoft.com/en-us/library/s9bwddyx.aspx "处理完成模式")说你也应该重写`Sub Finalize()`call `Dispose(False)`。为什么 IDE 也不添加这个？我必须自己添加它，还是以某种方式隐式调用它？

~~**编辑：**知道为什么 IDE 会自动添加 80% 的所需内容但忽略 Finalize 方法吗？这种功能的全部意义不在于帮助您*不要*忘记这些事情吗？~~

**EDIT2：**谢谢大家的出色回答，现在这很有意义！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-22T05:59:04.357

如果您实际上持有垃圾收集器不会自动清理的非托管资源并在 Dispose() 中清理这些资源，那么是的，您应该在 Finalize() 中执行相同的操作。

如果您出于其他原因实施 IDisposable，则不需要实施 Finalize()。

基本问题是这样的：如果没有调用 Dispose() 并且您的对象被垃圾收集，内存会泄漏吗？如果是，则执行 Finalize。如果没有，你不需要。此外，避免“仅仅因为它更安全”而实施 Finalize。具有自定义终结器的对象可能需要两次 GC 传递来释放它们——一次将它们放入待处理的终结器队列，第二次传递以实际释放它们的内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T06:02:27.920

不，除非您有非托管资源要清理，否则您不需要 Finalize。

在大多数情况下，类是一次性的原因是因为它保留了对其他托管 IDisposable 对象的引用。在这种情况下，不需要或不需要 Finalize 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-12-12T06:55:24.893

```
Implements IDisposable

Public Overloads Sub Dispose() Implements IDisposable.Dispose

    Dispose(True)
    GC.SuppressFinalize(Me)

End Sub

Protected Overloads Sub Dispose(ByVal disposing As Boolean)

    If disposing Then
        ' Free other state (managed objects).
    End If
    ' Free your own state (unmanaged objects).
    ' Set large fields to null.
End Sub

Protected Overrides Sub Finalize()

    Dispose(False)
    MyBase.Finalize()

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T06:59:11.450

正如其他人所说，除非您直接持有非托管资源，否则您不需要实现终结器。此外，假设您在 .NET 2.0 或更高版本中工作，您不太可能需要实现终结器，因为通常可以使用 SafeHandle 来包装您的非托管资源。

不久前，我写了一篇[相当长的博客文章](http://gregbeech.com/blogs/tech/archive/2007/03/07/implementing-and-using-the-idisposable-interface.aspx)，介绍了 IDisposable 和终结器的背景和实现，如果您不完全清楚，可能值得一读。

# ruby-on-rails - 如何在 shoulda 测试中删除重复项？

> ID：113275
> 
> 赞同：2
> 
> 时间：2008-09-22T05:12:57.510
> 
> 标签：ruby-on-rails, unit-testing, shoulda

这是我所拥有的：

```
 context "Create ingredient from string" do
      context "1 cups butter" do

         setup do
            @ingredient = Ingredient.create(:ingredient_string => "1 cups butter")
         end

         should "return unit" do
            assert_equal @ingredient.unit, 'cups'
         end

         should "return amount" do
            assert_equal @ingredient.amount, 1.0
         end

         should "return name" do
            assert_equal @ingredient.name, 'butter'
         end
      end
      context "1 (18.25 ounce) package devil's food cake mix with pudding" do

         setup do
            @ingredient = Ingredient.create(:ingredient_string => "1 (18.25 ounce) package devil's food cake mix with pudding")
         end

         should "return unit" do
            assert_equal @ingredient.unit, '(18.25 ounce) package'
         end

         should "return amount" do
            assert_equal @ingredient.amount, 1.0
         end

         should "return name" do
            assert_equal @ingredient.name, 'devil\'s food cake mix with pudding'
         end
      end
   end 
```

显然那里有很多重复。关于如何删除它的任何想法，如果至少是上下文和字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T13:12:45.530

这是针对您的特定问题的解决方案。这个想法是创建一个类方法（如 Shoulda 的上下文、设置和应该）。

将重复封装在一个类方法中，接受所有不同的部分作为参数，如下所示：

```
def self.should_get_unit_amount_and_name_from_string(unit, amount, name, string_to_analyze)
  context string_to_analyze do
    setup do
      @ingredient = Ingredient.create(:ingredient_string => string_to_analyze)
    end

    should "return unit" do
       assert_equal @ingredient.unit,   unit
    end

    should "return amount" do
       assert_equal @ingredient.amount, amount
    end

    should "return name" do
       assert_equal @ingredient.name,   name
    end
  end
end 
```

现在，您可以使用一个衬垫调用所有这些封装测试（为了便于阅读，此处为 5 个衬垫 ;-)

```
context "Create ingredient from string" do
  should_get_unit_amount_and_name_from_string(
    'cups',                   
    1.0, 
    'butter', 
    "1 cups butter")
  should_get_unit_amount_and_name_from_string(
    '(18.25 ounce) package',  
    1.0, 
    'devil\'s food cake mix with pudding', 
    "1 (18.25 ounce) package devil's food cake mix with pudding")
end 
```

在某些情况下，您可能希望接受一个可以用作您的 Shoulda 设置的块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T08:27:35.203

测试中的重复不一定是坏事（tm）

我建议您阅读 Jay Field 的以下文章

[http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html](http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html)

[http://blog.jayfields.com/2008/05/testing-duplicate-code-in-your-tests.html](http://blog.jayfields.com/2008/05/testing-duplicate-code-in-your-tests.html)

他们为测试中的代码重复提供了一个令人信服的案例，并为每个测试保留一个断言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-23T05:38:34.350

测试/规范不是生产代码，因此干燥不是优先事项。

原则是规范应该清晰易读，即使这意味着测试中存在重复的文本。

不要太担心规格干燥。过分强调干测试往往会使事情变得更加困难，因为您必须跳到事物的定义以了解正在发生的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T05:54:54.977

对于这个测试，我个人不会使用Shouda。您可以使用动态方法创建轻松删除重复，如下所示：

```
class DefineMethodTest < Test::Unit::TestCase
    [{:string => '1 cups butter', :unit => 'cups', :amount => 1.0, :name => 'butter'},{:string => '1 (18.25 ounce) package devil's food cake mix with pudding', :unit => '(18.25 ounce) package', :unit => 1.0, :name => "devil's food cake mix with pudding"}].each do |t|
        define_method "test_create_ingredient_from_string_#{t[:string].downcase.gsub(/[^a-z0-9]+/, '_')}" do
            @ingredient = Ingredient.create(:ingredient_string => t[:string])

            assert_equal @ingredient.unit, t[:unit], "Should return unit #{t[:unit]}"
            assert_equal @ingredient.amount, t[:amount], "Should return amount #{t[:amount]}"
            assert_equal @ingredient.name, t[:name], "Should return name #{t[:name]}"
        end
    end
end 
```

# windows - 跨多个平台维护多个数据库

> ID：113277
> 
> 赞同：1
> 
> 时间：2008-09-22T05:15:04.040
> 
> 标签：windows, database, linux, macos, solaris

跨多个平台（Windows、Linux、Mac OS X 和 Solaris）维护多个数据库并使它们彼此同步的最佳方法是什么？我尝试了几种不同的程序，但似乎没有任何效果！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T05:22:27.363

我认为您应该问自己，为什么必须经历跨平台维护多个数据库并让它们彼此同步的麻烦。听起来那里有很多冗余。为什么不只拥有该数据库的一个实例，因为我确信无论如何它都可以被多个平台上的多个应用程序访问（例如通过 SOA 方法）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T13:09:52.417

为什么要经历这些麻烦？管理层声称它更贵？

以下是如何证明它们是错误的。

选择一个数据库，将其称为“主数据库”或“记录系统”。

编写脚本以从主服务器导出数据并将其加载到您的副本中。如果您有一个不错的数据库（MySQL、SQL/Server、Oracle 或 DB2），那么有一些不错的工具可以为您进行这种复制。如果您有多种数据库，您将不得不求助于导出更改的数据并重新加载更改的数据。这个想法是这是一个单向复制：从主复制到复制。

修复每个应用程序，一次一个，只在主数据库中进行更新。由于每个应用程序都有一个到数据库的 JDBC（或 ODBC 或其他）连接，因此它可以很容易地连接到主数据库。

一旦您将应用程序修复为仅更新主服务器，副本就毫无价值。管理层可以坚持认为拥有它们更便宜。它们就在那里——主数据库的克隆——正是管理层所说的你*必须*拥有的。

您的生活更简单，因为这些应用程序只是更新记录系统。他们很高兴，因为您拥有所有克隆的数据库。

# code-generation - 您是否创建自己的代码生成器？

> ID：113286
> 
> 赞同：30
> 
> 时间：2008-09-22T05:19:49.710
> 
> 标签：code-generation

[Pragmatic Programmer](https://rads.stackoverflow.com/amzn/click/com/020161622X)提倡使用代码生成器。您是否在项目中创建代码生成器？如果是，你用它们做什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-17T03:44:28.610

在“实用程序员”中，Hunt 和 Thomas 区分了被动代码生成器和主动代码生成器。

被动生成器运行一次，然后编辑结果。

活动生成器会根据需要运行，您永远不应该编辑结果，因为它会被替换。

IMO，后者更有价值，因为它们接近 DRY（不要重复自己）原则。

如果您的程序的输入信息可以分为两部分，很少更改的部分（A）（如元数据或 DSL），以及每次程序运行时不同的部分（B）（实时输入） ，您可以编写一个仅将 A 作为输入的生成器程序，并编写一个仅将 B 作为输入的 ad-hoc 程序。（另一个名称是部分评估。）

生成器程序更简单，因为它只需要遍历输入 A，而不是 A 和 B。此外，它不必很快，因为它不经常运行，也不必关心内存泄漏。

ad-hoc 程序更快，因为它不必费力地处理几乎总是相同的输入 (A)。它更简单，因为它只需要对输入 B 做出决定，而不是 A 和 B。

生成的 ad-hoc 程序具有很强的可读性是一个好主意，这样您就可以更容易地找到其中的任何错误。一旦你从生成器中删除了错误，它们就永远消失了。

在我参与的一个项目中，一个团队设计了一个复杂的数据库应用程序，其设计规范为 2 英寸厚，实施计划很长，而且对性能充满了担忧。通过编写代码生成器，两个人在三个月内完成了这项工作，源代码清单（C 语言）大约有半英寸厚，生成的代码速度很快，不成问题。临时程序每周重新生成一次，成本微不足道。

因此，***当您可以使用它时*****，主动代码生成是双赢的***。而且，我认为这正是编译器所做的事情并非偶然。*

 ** * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T05:24:39.277

如果在没有正确论证的情况下广泛使用代码生成器，则会降低代码的可理解性并降低可维护性（顺便说一下，动态 SQL 也是如此）。就我个人而言，我将它与一些 ORM 工具一起使用，因为它们在这里的使用最为明显，有时用于诸如搜索器-解析器算法和语法分析器之类的东西，这些东西最近不是为了“手动”维护而设计的。干杯。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-22T05:29:10.543

在硬件设计中，在“堆栈”的多个级别上执行此操作是相当普遍的做法。例如，我编写了一个代码生成器来为 DMA 引擎和交叉开关的各种宽度、拓扑和结构发出 Verilog，因为表达这种参数化所需的结构在综合和仿真工具流程中还不成熟。

为可以通过算法表达和生成的非常规则的事物（如 SRAM、缓存和寄存器文件结构）发出逻辑模型一直到布局数据也是例行公事。

我还花了相当多的时间编写一个代码生成器，它可以获取片上系统上所有寄存器的 XML 描述，并发出 HTML（是的，是的，我知道 XSLT，我刚刚发现发出它以编程方式更省时）、Verilog、SystemVerilog、C、Assembly 等。该数据的“视图”供不同团队（前端和后端 ASIC 设计、固件、文档等）使用（和通过这个单一的 XML“代码库”使它们保持一致）。这算不算？

人们还喜欢编写代码生成器，例如对非常常见的事物（如有限状态机）进行简洁描述，并机械地输出更冗长的命令式语言代码以有效地实现它们（例如转换表和遍历代码）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-22T05:28:59.937

我们使用代码生成器来生成数据实体类、数据库对象（如触发器、存储过程）、服务代理等。在任何你看到大量重复代码遵循模式和涉及大量手动工作的地方，代码生成器都可以提供帮助。但是，您不应该过多地使用它，以至于可维护性是一种痛苦。如果您想重新生成它们，也会出现一些问题。

Visual Studio、Codesmith 等工具为大多数常见任务提供了自己的模板，并使此过程更容易。但是，很容易自行推出。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T06:26:35.633

创建一个从规范生成代码的代码生成器通常很有用——通常是具有常规表格规则的代码生成器。它减少了通过拼写错误或遗漏引入错误的机会。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-26T12:48:22.973

是的，我为 AAA 协议 Diameter (RFC 3588) 开发了自己的代码生成器。它可以为从描述直径应用程序语法的 XML 文件读取的直径消息生成结构和 Api。

这大大缩短了开发完整直径接口（如SH/CX/RO等）的时间。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-22T05:50:50.117

在我看来，一种好的编程语言不需要代码生成器，因为自省和运行时代码生成将成为语言的一部分，例如在 python 元类和新模块等中。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-22T06:12:26.807

代码生成器通常会在长期使用中生成更多难以管理的代码。

但是，如果绝对必须使用代码生成器（我有时会使用 Eclipse VE 进行 Swing 开发），那么请确保您知道正在生成什么代码。相信我，您不会希望应用程序中出现您不熟悉的代码。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-12-27T06:45:07.577

为项目编写自己的生成器效率不高。相反，请使用 T4、CodeSmith 和 Zontroy 等生成器。

T4 更复杂，您需要了解一门 .Net 编程语言。您必须逐行编写模板，并且必须自己完成数据关系操作。您可以通过 Visual Studio 使用它。

CodeSmith 是一个功能性工具，有很多模板可供使用。它基于 T4，编写自己的模板需要花费太多时间，就像在 T4 中一样。有试用版和商业版。

Zontroy 是一款具有用户友好用户界面的新工具。它有自己的模板语言，易于学习。有一个在线模板市场，并且正在发展。甚至您也可以提供模板并在市场上在线销售。它有免费版和商业版。即使是免费版本也足以完成一个中等规模的项目。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-22T05:31:58.620

那里可能有很多代码生成器，但是我总是创建自己的代码生成器以使代码更易于理解并适合我们使用的框架和指南

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-22T05:37:30.557

我们为所有新代码使用生成器，以帮助确保遵循编码标准。

我们最近用[CodeSmith](http://www.codesmithtools.com/)替换了我们内部的 C++ 生成器。我们仍然必须为该工具创建模板，但不必自己维护该工具似乎是理想的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-22T05:47:19.690

我最近对生成器的需求是一个从硬件读取数据并最终将其发布到“仪表板”用户界面的项目。中间是几个数据点的模型、属性、演示者、事件、接口、标志等。我为几个数据点建立了框架，直到我对我可以接受这个设计感到满意。然后，在一些精心放置的注释的帮助下，我将“生成”放在了 Visual Studio 宏中，调整并清理了宏，将数据点添加到宏中的函数以调用生成 - 并节省了几个繁琐的小时（天？） 到底。

*不要低估宏的力量*:)

* * *

我现在也在尝试了解[CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/index.xml)自定义功能，以帮助我满足更多本地生成需求。如果您在生成代码块时需要即时决策，那么那里有强大的东西。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-22T05:51:32.533

我有自己的代码生成器，可以针对 SQL 表运行。它生成用于访问数据、数据访问层和业务逻辑的 SQL 过程。它在标准化我的代码和命名约定方面创造了奇迹。因为它需要数据库表中的某些字段（例如 id 列和更新的 datetime 列），它也有助于标准化我的数据设计。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-17T04:18:51.740

你要找几个？我创建了两个主要的和许多次要的。主要的第一个允许我生成程序 1500 行程序（给予或接受），这些程序具有很强的家族相似性，但与数据库中的不同表相协调 - 并且可以快速、可靠地完成。

代码生成器的缺点是，如果生成的代码中存在错误（因为模板包含错误），则需要进行大量修复。

但是，对于需要完成大量近乎重复的编码的语言或系统，一个好的（足够）代码生成器是一个福音（而且比“doggle”更像是一个福音）。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2011-06-20T03:06:21.393

在嵌入式系统中，有时您需要闪存中的一大块二进制数据。例如，我有一个包含位图字体字形的文本文件并将其转换为 .cc/.h 文件对，声明有趣的常量（例如第一个字符、最后一个字符、字符宽度和高度），然后将实际数据为一个大的`static const uint8_t[]`。

尝试在 C++ 本身中做这样的事情，因此字体数据将在编译时自动生成而无需第一次通过，这将是一种痛苦并且很可能难以辨认。手动编写 .o 文件是不可能的。拆开方格纸，手动编码为二进制，然后输入所有内容也是如此。

恕我直言，这种事情就是代码生成器的用途。*永远不要忘记计算机为您工作，而不是相反。*

顺便说一句，如果您使用生成器，请*始终始终*在每个生成的文件的开头和结尾都包含一些这样的行：

```
// This code was automatically generated from Font_foo.txt. DO NOT EDIT THIS FILE.
// If there's a bug, fix the font text file or the generator program, not this file. 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-22T05:32:08.977

是的，我不得不维持一些。CORBA 或其他一些对象通信风格的接口可能是我首先想到的一般事物。您有将要讨论的接口提供给您的对象定义，但您仍然必须在代码中构建这些对象。构建和运行代码生成器是一种相当常规的方法。这可能会变成一个相当冗长的编译，只是为了支持一些遗留的通信通道，而且由于有很大的趋势是在 CORBA 周围放置包装器以使其更简单，所以事情只会变得更糟。

通常，如果您有大量结构，或者只是需要使用快速变化的结构，但您无法处理通过元数据构建对象的性能损失，那么您需要编写代码生成器。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-22T05:58:46.963

我想不出我们需要从头开始创建自己的代码生成器的任何项目，但是有几个我们使用了预先存在的生成器。（我已经使用 Antlr 和 Eclipse 建模框架在 Java 中为企业软件构建解析器和模型。）使用其他人编写的代码生成器的美妙之处在于作者往往是该领域的专家并且已经解决了问题我什至不知道它的存在。这节省了我的时间和挫败感。

因此，即使我可以编写解决手头问题的代码，我也可以更快地生成代码，并且很有可能它比我编写的任何代码都更少错误。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-22T07:09:04.097

如果您不打算编写代码，您会对其他人生成的代码感到满意吗？

从长远来看，编写自己的代码或代码生成器是否更便宜？

我编写了一个代码生成器，它将构建 100 个类 (java)，这些类 (java) 将以 DTD 或模式兼容的方式从数据库输出 XML 数据。代码生成通常是一次性的，然后代码将使用各种业务规则等进行智能处理。输出是针对一个相当迂腐的银行。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-12-17T03:51:41.217

代码生成器是针对编程语言限制的解决方法。我个人更喜欢反射而不是代码生成器，但我同意代码生成器更灵活，并且在运行时生成的代码显然更快。我希望，未来的 C# 版本将包含某种 DSL 环境。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-12-17T04:32:05.770

我使用的唯一代码生成器是 Web 服务解析器。我个人远离代码生成器，因为交接后新员工或单独团队的维护问题。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-01-26T12:35:02.220

我编写自己的代码生成器，主要在 T-SQL 中，在构建过程中调用。

基于元模型数据，它们生成触发器、日志记录、C# const 声明、INSERT/UPDATE 语句、数据模型信息，以检查应用程序是否在预期的数据库模式上运行。

我仍然需要编写一个表单生成器来提高生产力、更多的规范和更少的编码；）

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-01-26T12:41:45.247

我创建了一些代码生成器。我有一个使用模板的 SQL 存储过程的被动代码生成器。这生成了我们 90% 的存储过程。

自从我们切换到实体框架后，我在 Visual Studio 中使用 T4（[文本模板转换工具包](http://madhavrao.com/2008/03/15/t4-how-to/)）创建了一个活动代码生成器。我用它为我们的实体创建了基本的存储库部分类。工作得很好，节省了大量的编码。我还使用 T4 来装饰具有某些属性的实体类。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2009-01-26T12:49:24.373

我使用[EMF-Eclipse Modeling Framework](http://www.eclipse.org/modeling/emf/)提供的代码生成功能。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2009-01-26T12:58:26.587

代码生成器在很多情况下都非常有用，尤其是在从一种格式映射到另一种格式时。我已经完成了 IDL 到 C++ 的代码生成器、数据库表到 OO 类型以及编组代码等等。

我认为作者试图说明的观点是，如果您是开发人员，您应该能够让计算机为您工作。生成代码只是自动化的一项显而易见的任务。

我曾经和一个人一起工作，他坚持要手动完成我们的 IDL 到 C++ 的映射。在项目开始时他能够跟上，因为我们其他人都在努力弄清楚该怎么做，但最终他成为了瓶颈。我在 Perl 中做了一个代码生成器，然后我们几乎可以在几分钟内完成他的“工作”。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2011-03-29T18:01:55.987

请参阅我们基于程序转换的[“通用”代码生成器。](http://www.semanticdesigns.com/Products/DMS/CodeGenerator.html)

我是架构师和关键实施者。值得注意的是，这个生成器的很大一部分是使用这个生成器生成的。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-10-11T15:11:00.227

我们在项目中使用**Telosys**代码生成器：[http ://www.telosys.org/](http://www.telosys.org/)

我们创建它是为了减少重复任务（如 CRUD 屏幕、文档等）的开发时间......

对我们来说最重要的是能够自定义生成器的模板，以便在必要时创建新的生成目标并自定义现有模板。这就是为什么我们还创建了一个模板编辑器（用于 Velocity .vm 文件）。它适用于 Java/Spring/AngularJS 代码生成器，并且可以适应其他目标（PHP、C#、Python 等）

# c++ - 来自同一个可执行文件的多个服务

> ID：113288
> 
> 赞同：3
> 
> 时间：2008-09-22T05:20:02.033
> 
> 标签：c++, winapi, service

我写了一个小服务（普通的 Win32），我想知道当多个用户登录时是否可以运行它的多个实例。

基本上，假设我们有 UserA 和 UserB，对于 UserA，服务将以“domain\UserA”身份登录，而对于 UserB，服务将以“domain\UserB”身份登录——这当然来自同一个可执行文件。我可以使用 ChangeServiceConfig() 函数动态更改登录，但它似乎会在系统范围内更改它，而我希望每个用户都拥有自己的服务副本，仅为他运行。

提前感谢您的任何指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T05:22:06.880

Win32 服务被设计为系统范围的，并在任何用户登录之前开始运行。如果您希望在每个用户的基础上运行某些东西，最好将其设计为常规应用程序并从用户的 Startup 运行它团体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T05:23:19.403

服务的整个概念是它在任何用户登录之前启动。因此，即使这是可能的，您也无法在服务启动时在 userA 和 userB 之间进行选择，因为它们都还没有登录。

* * *

一个可能的方向是让服务以 SYSTEM 身份运行，每隔几分钟检查是否有用户登录，是否有 - 冒充该用户并执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T05:28:30.420

是否有可能让服务创建子进程，然后采用用户凭据（或从它们开始）？这样，您仍然仅限于服务的单个实例，但它能够以同样的方式完成每个用户的工作。IIRC Windows 任务计划程序服务执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T05:29:25.770

是的，这听起来很接近（我正在回答 Greg 的评论，但评论太短，不适合我的回复）。

我事先不知道用户列表，但有一个 GUI 控制应用程序可用于为每个用户输入用户名/密码对。因此，用户 A 将登录，运行应用程序，输入他的凭据，服务将使用它。同时（在用户 A 注销后，但服务仍在使用用户 A 的凭据运行）用户 B 登录，使用应用程序，服务的另一个副本开始以登录用户 B 的身份运行。因此，同时 userA 和 userB 服务正在运行。

那可能吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T05:41:05.257

您可能正在寻找模拟用户。在此处查看我通过快速 Google 搜索找到的一些参考资料：

*   [关于 WindowsIdentity.Impersonate 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.impersonate.aspx)
*   [.Net 安全博客文章](http://blogs.msdn.com/shawnfa/archive/2005/03/21/400088.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T06:05:16.277

听起来你实际上有两个不同的、相互冲突的要求，关于时间和身份。

1.  以每个登录用户身份运行
2.  即使没有用户登录也会自动运行。

没有办法简单地做到这一点，而是考虑将您的程序包装在服务中；该程序将在每个用户的启动时正常运行（通过启动文件夹或任务调度程序），*此外还*创建一个服务以作为系统用户（或您定义的任何其他用户）运行您的应用程序。
由于您还需要（您在评论中提到这一点）应用程序即使在他注销后仍以最终用户身份继续运行，您可以让服务为您管理此过程。

然而，这可能不是最好的主意，因为用户仍然有效地登录。这可能会产生许多副作用，包括安全性、性能（一次登录的用户太多......）等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T06:19:08.147

您可以创建一个服务应用程序和一个非服务（普通）应用程序，并让它们通过 IPC（映射文件、管道、MailSolts ......你的名字）进行通信。

这样你就解决了所有的麻烦。

注意：同一个应用程序的行为可能不同 - 当作为进程启动时和由用户启动时，但最终它是相同的，您仍然有 2 个应用程序（无论您是否只有一个可执行文件）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T15:07:57.173

可以使用不同的帐户运行。事实上，这很常见。请参阅 svchost.exe，它实现了一堆 OS 服务。

我只是不明白你如何确定哪些帐户。在一家大公司中，设置了许多 PC，因此所有 100.000 多名员工都可以使用它。您不想以登录用户的身份运行您的服务，也不想为所有 100.000 个用户运行它。那么对于哪些帐户，我必须问？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T15:20:21.467

Windows 进程一次只能以一个用户的权限执行。这适用于服务和其他进程。有了足够的权限，就可以通过使用模拟在不同用户之间“切换”。您尝试做的最常见的模式是拥有一个特权服务实例，该服务注册登录/注销事件并相应地创建子进程，每个子进程都模拟登录用户。该模式还将简化 UI，因为每个进程在每个单独用户的桌面上运行，就好像它是一个常规应用程序一样。

如果您使特权服务的代码尽可能简单，则此模式还有一个额外的好处，就是您可以最大限度地减少代码的攻击面。如果用户在您的服务的“以用户身份运行”端发现安全问题，这不是问题，而特权服务中的安全问题可能会导致权限提升。事实上，在实现 Windows 消息处理循环的 Vista 特权服务之前，很容易受到一种称为[Shatter 攻击](http://en.wikipedia.org/wiki/Shatter_attack)的攻击，鉴于您正在尝试执行的操作，您应该意识到这一点。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-26T05:29:08.357

您不需要服务的多个实例。从您的问题描述来看，您需要的是一种可以模拟用户并代表他们执行作业的服务。

您可以通过实现服务中托管的 COM 对象来做到这一点。您的客户端应用程序（最终用户运行的）将在您的 CLSID 上调用 CoCreateInstanceEx。这将导致在您的服务中创建您的 COM 对象的新实例。然后应用程序可以在您的一个接口上使用一种方法将收集的用户凭据传递给 COM 对象（尽管我对收集凭据持谨慎态度，而是查看是否可以传递用户令牌）。在服务上下文中运行的 COM 对象然后可以调用 LogonUser() 来登录用户并模拟它，因此它可以代表她做任何事情（例如查找用户本地 appdata 文件夹:-)）。其他答案与使用凭据或令牌模拟用户有很好的联系。

如果您对 COM 感到满意，我建议您将对象创建为多线程（位于 MTA 中），这样它们的执行就不会被 COM 序列化。如果没有，默认的单线程模型对您来说就足够了。

Visual Studio ATL 向导可以生成服务中的 COM 对象的骨架。您还可以在此处阅读有关使用 ATL 实现 Windows 服务的信息：http: [//msdn.microsoft.com/en-us/library/74y2334x (VS.80).aspx](http://msdn.microsoft.com/en-us/library/74y2334x(VS.80).aspx)

如果您根本不了解 COM，则可以使用其他通信渠道将凭据传递给您的服务。

无论如何，一旦您的服务获得凭据，代表用户的所有工作都必须在后台线程上执行，以免阻塞以用户身份运行的应用程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-07T17:59:55.410

你希望它一直运行，所以你需要一个服务。

您想要跟踪每个用户的东西，因此您想要一个在用户会话中运行并与服务通信的应用程序（使用命名管道或 DCOM 或任何符合您要求的东西）。

# localhost - 主机 localhost 是否始终可用于自己的系统？

> ID：113293
> 
> 赞同：4
> 
> 时间：2008-09-22T05:21:51.780
> 
> 标签：localhost, ping

是否总是可以 ping 本地主机并解析为 127.0.0.1？

我知道 Windows Vista、XP、Ubuntu 和 Debian 会这样做，但每个人都这样做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-22T05:24:00.073

TCP/IP 的任何正确实现都将保留地址 127.0.0.1 以引用本地计算机。但是，名称“localhost”到该地址的映射通常取决于系统`hosts`文件。如果您要从中删除 localhost 条目`hosts`，则 localhost 名称可能根本无法正确解析。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T05:30:35.503

127.0.0.1 在任何 IP 堆栈中为本地主机保留。

**不能**保证“localhost”作为主机名存在。如果主机/DNS 设置配置错误，localhost 将无法解析。

debian box 上的示例：

```
topaz:/root# vi /etc/hosts
[comment out localhost entry]

topaz:/root# ping localhost 
ping: unknown host localhost 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-22T06:03:44.750

不，首先`localhost`是一种惯例，而不是规则。大多数情况下它是默认设置的，但没有任何强制要求。

其次，没啥好说的，总能ping通127.0.0.1。作为示例（在 unix 系统上）尝试以下操作：

`sudo ifconfig lo down` `ping 127.0.0.1`

正如[cruizer](https://stackoverflow.com/questions/113293/is-the-host-localhost-always-available-for-the-own-system#113302)所说，127.0.0.1（如果存在）被定义为本地机器。但它不一定存在。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-22T06:29:13.817

迂腐的答案（抱歉，Greg :) 是阅读[RFC 3330](http://www.faqs.org/rfcs/rfc3330.html)：

```
 127.0.0.0/8 - This block is assigned for use as the Internet host
   loopback address.  A datagram sent by a higher level protocol to an
   address anywhere within this block should loop back inside the host.
   This is ordinarily implemented using only 127.0.0.1/32 for loopback,
   but no addresses within this block should ever appear on any network
   anywhere [RFC1700, page 5]. 
```

（上面的“通常”应该读作“经常”——大多数当前的操作系统都支持使用所有 127.0.0.0/8 作为环回。）

关于“localhost”是否总是解析为 127.0.0.1 - 他是正确的，它通常是相同的，但在技术上是特定于实现的：

```
~> dig localhost.t...e.org

...

;; ANSWER SECTION:
localhost.t...e.org. 86400 IN    A       127.0.0.2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T07:59:10.573

如果您的客户端连接的 DNS 服务器遵循 rfc1912，那么是的，localhost 应该解析为 127.0.0.1。

```
RFC1912
4.1
...
   Certain zones should **always be present** in nameserver configurations:
           primary         localhost               localhost
           primary         0.0.127.in-addr.arpa    127.0
...
   The "localhost" address is a "special" address which always refers to
   the local host.  It should contain the following line:

           localhost.      IN      A       127.0.0.1

   The "127.0" file should contain the line:

           1    PTR     localhost. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T05:24:11.743

我认为 localhost 对于大多数平台来说几乎可以解析为 127.0.0.1 但所有以 127 开头的 IP *。*.* 也解析为 localhost。尝试 ping 127.255.255.254，它仍然会响应。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T05:27:35.913

理论上，在某些情况下它可能不存在。在实践中，它总是存在的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T08:16:49.783

体面的防火墙也允许您过滤环回接口上的访问。因此，可以设置一个防火墙规则，将 icmp ping 数据包丢弃到 localhost (127.0.0.1)。此外，正如其他人已经提到的那样，即使存在 localhost 或 127.0.0.1 地址和环回接口也无法保证。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-29T04:43:15.000

答案是：

需要 127.0.0.1，通常称为“环回”。尽管您的计算机可能会让您做一些愚蠢的事情，例如禁用它，或者在物理接口上配置该范围，但这些都是无效的。

“localhost”只是一个主机名，按照惯例，应该是 127.0.0.1 作为系统管理员或主机管理员，您应该避免允许 localhost 指向其他地址的配置。

您不应该编辑您的主机文件来更改“localhost”的地址。您应该将您的域配置为具有 localhost。和指向 127.0.0.1 的 localhost.domain.com 条目。

您不应该让您的代理服务器响应“localhost”或任何以 localhost 开头的 FQDN。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2008-09-22T05:28:27.800

行。

它解决它的原因记录在 %WINDOWS_DIR%\System32\drivers\etc\hosts 文件中，如下所示：

127.0.0.1 本地主机

# project-management - Team size and project iteration length

> ID：113339
> 
> 赞同：3
> 
> 时间：2008-09-22T05:48:45.490
> 
> 标签：project-management, agile, iteration

Do you think that project iteration length is related to project team size? If so, how? What other key factors do you use to recognize correct iteration length for different projects?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T05:54:34.057

Iteration length is primarily related to the teams ability to communicate and complete a working version of the software. More team members equals more communication channels ([Brooks's Law](http://en.wikipedia.org/wiki/Brooks%27s_law)) which will likely increase your iteration time.

I think that 2 week iterations, whether you deliver to the client or not, are a good goal, as it allows for very good health checks.

Ultimately, the iteration length will depend on the features you wish to implement in the next iteration, and in the early phases your iterations may jump around from 1 week to 1 month as you become comfortable with the team and the technology stack.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T05:56:56.467

One of the main drivers for short iterations, is easing integration between modules/features/programmers. Obviously, the bigger your team, the more integration you will have. It's a tradeoff: short iterations mean you're integrating often, which is good - BUT if its a big team you'll be spending a LOT of team on integration overhead, even without new code. Longer iterations obviously mean more integration each time less seldom, and a lot more risky.

If your team is very large, you can try branched integration, i.e. integrating small subteams often, and integrating between the teams less often... BUT then you'll be having inconsistencies between branches, and you lose much of that benefit right there.

Another key factor to consider is complexity - obviously complex, backend systems are riskier integration, simple Web-UI pages are less risky.

(I realize I didnt give you a clear cut answer, there is none. It's always tradeoffs, I hope I give you some food for thought.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T05:57:47.607

My experience is that the length of the iterations are somewhat dependent on team size,

External dependencies, like in cases where we had to integrate with in house systems that was not using a iteration based development cycle (read waterfall) where another factor we observed.

Our team were real noobs when it came to iterative development, so in the beginning the iterations where really long (12 weeks). But later on we saw that there was no need to worry, and the iterations shrunk considerably (4-6 weeks).

So another factor in how long the iterations are is how familiar you are with the concept of iterative development.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T20:20:21.473

可以完成多少工作是有关系的，但这里还有一些其他关键因素，比如他们在处理什么类型的项目，例如 Windows 应用程序、控制台应用程序或 Web 应用程序以及代码库的开发方式与当前团队的风格相比，在规模、复杂性和风格方面，以及团队在方法论和他们正在做的工作方面拥有哪些专业知识，因为缺乏经验可能会让每个人都精通流程，成本很高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-30T19:21:14.727

> 我认为 2 周的迭代，无论您是否交付给客户，都是一个很好的目标，因为它可以进行非常好的健康检查。

2 周的迭代对我和我通常做的项目类型来说是最舒服的，但我不同意不交付是一个好的结果 - 重点需要保持在“工作软件超过流程”方面。

如果产品所有者/用户不可用，我会考虑延长迭代时间，即使只是每隔几周展示一次，因为快速迭代在技术方面允许的相同健康检查需要在参与方面进行这生意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-03T14:15:49.490

迭代长度应该由许多因素决定……团队规模实际上只是“迭代开销”考虑的一部分。

[这篇文章](http://www.mountaingoatsoftware.com/article/view/30)解释了其中的许多。

重要的国际海事组织：

1.  总发行长度
2.  优先级可以保持多长时间不变
3.  迭代的开销

# python - 类之间的 Python 传递变量

> ID：113341
> 
> 赞同：3
> 
> 时间：2008-09-22T05:49:00.997
> 
> 标签：python, oop, variables, wxpython

我正在尝试为游戏创建角色生成向导。在一类中，我计算了角色的属性。在另一个类中，我根据角色的属性向用户显示哪些专业可用。但是，我不记得如何在不同的类之间传递变量。

这是我所拥有的一个例子：

```
class BasicInfoPage(wx.wizard.WizardPageSimple):            
    def __init__(self, parent, title):
         wiz.WizardPageSimple.__init__(self, parent)
         self.next = self.prev = None
         self.sizer = makePageTitle(self, title)

                    <---snip--->

         self.intelligence = self.genAttribs()

class MOS(wx.wizard.WizardPageSimple):
     def __init__(self, parent, title):
         wiz.WizardPageSimple.__init__(self, parent)
         self.next = self.prev = None
         self.sizer = makePageTitle(self, title)
      def eligibleMOS(self, event):
          if self.intelligence >= 12: 
               self.MOS_list.append("Analyst") 
```

问题是我不知道如何使用从 BasicInfoPage 类到 MOS 类的“智能”变量。我尝试了互联网上的几种不同的方法，但似乎没有任何效果。我错过了什么？

**编辑**我在发布此内容后意识到我没有很好地解释它。我正在尝试从 1980 年代创建 Twilight 2000 RPG 的计算机版本。

我正在使用 wxPython 创建一个向导；我的类的父类是来自 wxPython 的向导。该向导将引导用户创建角色，因此基本信息页面（BasicInfoPage 类）允许用户提供角色的名称和角色属性的“滚动”。这就是“self.intelligence”的来源。

我正在尝试将她创建的属性用于向导中进一步的页面，用户可以在其中选择角色的专业。可用的专长取决于角色的属性，例如，如果智力足够高，则角色可以是 Intel Anaylst。

自从我编程以来已经有好几年了，尤其是在 OOP 的想法方面。这就是为什么我对如何使用类和方法创建本质上是全局变量的东西感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-22T10:12:50.783

您可能混淆了“类”和“实例”。从您的示例中不清楚，因此我假设您使用了很多类定义并且没有这些类的适当对象实例。

类实际上没有可用的属性值。类只是对象集合的一组通用定义。您应该将类​​视为定义，而不是实际事物。

类的实例，“对象”，是具有实际属性值并执行方法功能的实际事物。

您不会在*classes*之间传递变量。*您在实例*之间传递变量。实际上，只有实例变量很重要。[是的，有类变量，但它们是一个相当专业且经常令人困惑的东西，最好避免。]

创建对象（类的实例）时

```
b= BasicInfoPage(...) 
```

然后`b.intelligence`是 的`b`实例的智能值`BasicInfoPage`。

一个非常普遍的事情是

```
class MOS( wx.wizard.PageSimple ):
    def __init__( self, parent, title, basicInfoPage ):
        <snip>
        self.basicInfo= basicInfoPage 
```

现在，在 MOS 方法中，您可以说`self.basicInfo.intelligence`是因为 MOS 有一个可用的 BasicInfoPage 对象。

当您构建 MOS 时，您为它提供了它应该使用的 BasicInfoPage 实例。

```
someBasicInfoPage= BasicInfoPage( ... ) 
m= MOS( ..., someBasicInfoPage ) 
```

现在，对象`m`可以检查`someBasicInfoPage.intelligence`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T10:18:04.687

向导的每一页——就其本身而言——实际上不应该是您正在收集的信息的容器。

阅读[模型-视图-控制](http://en.wikipedia.org/wiki/Model-view-controller)设计模式。您的页面具有设计的查看和控制部分。然而，它们不是数据模型。

如果您有一个由页面“构建”的单独对象，您会更开心。每个页面都会设置该底层模型对象的一些属性。然后，页面相互独立，因为页面都获取和设置此底层模型对象的值。

既然你正在构建一个角色，你就会有这样的课程

```
class Character( object ):
    def __init__( self ):
        self.intelligence= 10
        <default values for all attributes.> 
```

然后你的各种 Wizard 实例只需要被赋予底层 Character 对象作为放置和获取值的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-23T09:48:59.430

我的问题确实是类与实例的混淆。我试图通过类来做所有事情，而没有创建一个实际的实例。另外，我强迫“BasicInfoPage”类做太多的工作。

最终，我创建了一个新类（**BaseAttribs**）来保存我需要的所有变量。然后我在运行向导时在该类的实例中创建并将该实例作为参数传递给需要它的类，如下所示：

```
#---Run the wizard
if __name__ == "__main__":
    app = wx.PySimpleApp()
    wizard = wiz.Wizard(None, -1, "TW2K Character Creation")
    attribs = BaseAttribs

#---Create each page
    page1 = IntroPage(wizard, "Introduction")
    page2 = BasicInfoPage(wizard, "Basic Info", attribs)
    page3 = Ethnicity(wizard, "Ethnicity")
    page4 = MOS(wizard, "Military Occupational Specialty", attribs) 
```

然后，我使用 S.Lott 提供的信息并在每个类中创建了单独的实例（如果这就是它的名称）；但是，每个类都在访问相同的变量。

据我所知，一切正常。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T06:05:58.677

您所需要的只是一个参考。这不是一个简单的问题，我可以给出一些单行解决方案（除了一个可能会破坏其他东西的简单丑陋的全局），而是一个程序结构。您不会神奇地访问在另一个类的另一个实例上创建的变量。您必须将智能参考提供给 MOS，或者从 BasicInfoPage 中获取，但这可能会发生。在我看来，这些类的设计相当奇怪——一个信息页面，一方面，不应该产生任何东西，如果它产生了，它应该把它返回给任何需要知道的东西——某种中心位置，它应该是第一个生成它的人。通常，您会在那里设置变量，然后从那里获取它们。或者至少，我愿意。

如果您想要“我如何在不同类之间传递变量”的基本答案，那么就可以了，但我怀疑这正是您想要的，因为您看起来正在使用某种控制框架：

```
class Foo(object):
    def __init__(self, var):
        self.var = var

class Bar(object):
    def do_something(self, var):
        print var*3

if __name__ == '__main__':
    f = Foo(3)
    b = Bar()
    # look, I'm using the variable from one instance in another!
    b.do_something(f.var) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T05:59:28.147

如果我理解正确，那么答案是：你不能。

如果您希望两个类都继承它，智能应该是 WizardPageSimple 的一个属性。

根据您的情况，您可能会尝试将智能和相关属性提取到另一个基类中。然后你可以从两者继承：

```
class MOS(wiz.WizardPageSimple, wiz.IntelligenceAttributes): # Or something like that. 
```

在这种情况下，您**必须**使用合作社超级。事实上，您应该已经在使用它了。而不是打电话

```
wiz.WizardPageSimple.__init__(self, parent) 
```

称呼

```
super(MOS, self).__init__(self, parent) 
```

# apache-flex - Flex AdvancedDataGrid：如何设置摘要行的样式？

> ID：113349
> 
> 赞同：2
> 
> 时间：2008-09-22T05:51:32.863
> 
> 标签：apache-flex

我有一个带有 GroupingCollection 和 SummaryRow 的 AdvancedDataGrid。如何以粗体显示汇总行数据？下面是我的代码：

```
<mx:AdvancedDataGrid width="100%" height="100%" id="adg" defaultLeafIcon="{null}"  > 
    <mx:dataProvider>
        <mx:GroupingCollection id="gc" source="{dataProvider}">
            <mx:Grouping>
                <mx:GroupingField name="bankType">
                    <mx:summaries>
                      <mx:SummaryRow summaryPlacement="group" id="summaryRow">
                        <mx:fields>
                            <mx:SummaryField dataField="t0" 
                                label="t0" operation="SUM" />
                        </mx:fields>
                      </mx:SummaryRow>
                    </mx:summaries>                    
                </mx:GroupingField>
            </mx:Grouping>
        </mx:GroupingCollection>
    </mx:dataProvider>
                  <mx:columns>
        <mx:AdvancedDataGridColumn dataField="GroupLabel" 
            headerText=""/>
        <mx:AdvancedDataGridColumn dataField="name" 
            headerText="Bank" />
        <mx:AdvancedDataGridColumn dataField="t0"
            headerText="Amount" formatter="{formatter}"/>
    </mx:columns>            

</mx:AdvancedDataGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-22T15:55:49.797

过去，当我需要这样做时，我必须在我的样式函数中添加一个条件来尝试确定它是否是摘要行。

```
public function dataGrid_styleFunction (data:Object, column:AdvancedDataGridColumn) : Object  
{  
      var output:Object;  

      if ( data.children != null )  
      {  
          output = {color:0x081EA6, fontWeight:"bold", fontSize:14}  
      }  

      return output;  
  } 
```

如果它有孩子，它应该是一个摘要行。我不确定这是正确的引用/取消引用方式，但它确实有效，至少在我的使用中。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T11:27:25.817

如果我正确理解[了文档](http://livedocs.adobe.com/flex/3/html/advdatagrid_10.html)，您应该能够通过在`rendererProviders`属性中指定项目渲染器并使用虚拟数据字段名称将摘要链接到 rendererProvider 来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-17T14:38:16.623

[http://livedocs.adobe.com/flex/3/html/help.html?content=advdatagrid_04.html](http://livedocs.adobe.com/flex/3/html/help.html?content=advdatagrid_04.html)应该有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-23T10:15:20.317

```
 private function styleCallback(data:Object, col:AdvancedDataGridColumn):Object
      {
         if (data["city"] == citySel) 
            return {color:0xFF0000,backgroundColor:0xFFF552,
            fontWeight:'bold',fontStyle:'italic'}; 

         // Return null if the Artist name does not match.
         return null;      
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-08T16:16:13.950

我只想格式化我的分组文件，所以我在我的 ADG 上设置了 styleFunction，然后在我的 styleCallback() 方法中我检查了存在于我的子行中但不存在于我的组标题中的一段数据。

例如，我有主要标题作为我的组，然后是带有次要标题和描述等的数据行。所以在我的函数中，我检查：

if (data["MinorHeading"] == null) return {color:0xFF0000,backgroundColor:0xFFF552,fontWeight:'bold'};

这样，只有我的组标题被格式化为红色和粗体。
仅供参考，背景颜色样式不适用（我想我需要一个纯色图形渲染器来做到这一点）

# opengl - OpenGL：将鼠标点击投影到几何体上

> ID：113352
> 
> 赞同：9
> 
> 时间：2008-09-22T05:52:50.957
> 
> 标签：opengl, graphics

我有这个视图集：

```
glMatrixMode(GL_MODELVIEW); //Switch to the drawing perspective
glLoadIdentity(); //Reset the drawing perspective 
```

我通过鼠标点击获得屏幕位置（sx，sy）。

给定 z 值，我如何从 sx 和 sy 计算 3d 空间中的 x 和 y？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-23T01:24:42.153

你应该使用`gluUnProject`：

首先，计算到近平面的“非投影”：

```
GLdouble modelMatrix[16];
GLdouble projMatrix[16];
GLint viewport[4];

glGetIntegerv(GL_VIEWPORT, viewport);
glGetDoublev(GL_MODELVIEW_MATRIX, modelMatrix);
glGetDoublev(GL_PROJECTION_MATRIX, projMatrix);

GLdouble x, y, z;
gluUnProject(sx, viewport[1] + viewport[3] - sy, 0, modelMatrix, projMatrix, viewport, &x, &y, &z); 
```

然后到远平面：

```
// replace the above gluUnProject call with
gluUnProject(sx, viewport[1] + viewport[3] - sy, 1, modelMatrix, projMatrix, viewport, &x, &y, &z); 
```

现在，您在世界坐标中得到了一条线，可以追踪您*可能*点击过的所有可能点。所以现在你只需要插值：假设你得到了 z 坐标：

```
GLfloat nearv[3], farv[3];  // already computed as above

if(nearv[2] == farv[2])     // this means we have no solutions
   return;

GLfloat t = (nearv[2] - z) / (nearv[2] - farv[2]);

// so here are the desired (x, y) coordinates
GLfloat x = nearv[0] + (farv[0] - nearv[0]) * t,
        y = nearv[1] + (farv[1] - nearv[1]) * t; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T06:03:43.177

最权威的来源[OpenGL 的网站](http://www.opengl.org/resources/faq/technical/selection.htm)最好地回答了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T06:02:17.983

这实际上取决于投影矩阵，而不是模型视图矩阵。 [http://www.toymaker.info/Games/html/picking.html](http://www.toymaker.info/Games/html/picking.html)应该可以帮助您——它以 D3D 为中心，但理论是一样的。

但是，如果您要进行基于鼠标的选择，我建议您使用选择渲染模式。

编辑：请注意，模型视图矩阵确实起作用，但是由于您的身份是身份，所以这不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T05:57:41.660

[libqglviewer](http://freshmeat.net/projects/libqglviewer/)有一个很好的选择框架，如果那是你正在寻找的

# eclipse - 如何让 Eclipse Package Explorer 显示名称以 . （时期）？

> ID：113365
> 
> 赞同：2
> 
> 时间：2008-09-22T05:57:22.833
> 
> 标签：eclipse, package-explorer

当 Eclipse 包资源管理器中的文件夹（链接到文件系统中某个目录的文件夹）包含名称以 . （句号），这些文件不会出现。可以将 Eclipse 配置为显示这些文件吗？如果可以，如何配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T06:00:41.000

单击包资源管理器中的向下箭头（在编辑器链接器旁边）。然后，您只需更改过滤器。取消标记“.*”资源的框。

# html - HTML中的字符限制

> ID：113376
> 
> 赞同：96
> 
> 时间：2008-09-22T05:59:59.893
> 
> 标签：html, character-limit

如何对 HTML 中的文本输入施加字符限制？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2008-09-22T08:35:34.230

有2个主要解决方案：

纯 HTML 之一：

```
<input type="text" id="Textbox" name="Textbox" maxlength="10" /> 
```

JavaScript 之一（将其附加到 onKey 事件）：

```
function limitText(limitField, limitNum) {
    if (limitField.value.length > limitNum) {
        limitField.value = limitField.value.substring(0, limitNum);
    } 
} 
```

但无论如何，也没有好的解决办法。你无法适应每个客户糟糕的 HTML 实现，这是一场不可能获胜的战斗。这就是为什么最好在服务器端使用 PHP / Python / 任何脚本检查它。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2008-09-22T06:01:00.733

有一个 maxlength 属性

```
<input type="text" name="textboxname" maxlength="100" /> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-22T06:08:29.887

除了上述之外，我想指出客户端验证（HTML 代码、javascript 等）是远远不够的。还要检查服务器端的长度，或者根本不检查（如果它不是那么重要以至于人们可以绕过它，那么它也不够重要，不能真正保证采取任何措施来防止这种情况发生）。

另外，伙计们，他（或她）说的是 HTML，而不是 XHTML。;)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-22T06:08:03.867

正如其他人所说，使用“maxlength”属性。

如果您需要在文本区域上设置最大字符长度，则需要使用 Javascript。看看这里：[如何使用 JavaScript 在 HTML 中的 textArea 上施加 maxlength](https://stackoverflow.com/questions/1125482/how-to-impose-maxlength-on-textarea-in-html-using-javascript)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T06:12:18.397

对于 <input> 元素，有 maxlength 属性：

```
<input type="text" id="Textbox" name="Textbox" maxlength="10" /> 
```

（顺便说一句，类型是“文本”，而不是其他人写的“文本框”），但是，您必须使用带有 <textarea> 的 javascript。无论哪种方式，都应该在服务器上检查长度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-01T11:31:16.867

您可以使用非常快的 jquery 设置 maxlength

```
jQuery(document).ready(function($){ //fire on DOM ready
 setformfieldsize(jQuery('#comment'), 50, 'charsremain')
}) 
```

# c# - 如何确定我的类实例上的泛型参数的值

> ID：113384
> 
> 赞同：1
> 
> 时间：2008-09-22T06:04:02.567
> 
> 标签：c#, generics, reflection

我有一个标记接口定义为

```
public interface IExtender<T>
{
} 
```

我有一个实现 IExtender 的类

```
public class UserExtender : IExtender<User> 
```

在运行时，我收到 UserExtender 类型作为我的评估方法的参数

```
public Type Evaluate(Type type) // type == typeof(UserExtender) 
```

如何让我的 Evaluate 方法返回

```
typeof(User) 
```

基于运行时评估。我确信涉及到反射，但我似乎无法破解它。

（我不确定如何措辞这个问题。我希望它足够清楚。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T06:09:14.253

有一个示例可以执行您在 MSDN 文档中描述的[GetGenericTypeDefinition 方法](https://docs.microsoft.com/en-us/dotnet/api/system.type.getgenerictypedefinition)。它使用[GetGenericArguments 方法](https://docs.microsoft.com/en-us/dotnet/api/system.type.getgenericarguments)。

```
Type[] typeArguments = t.GetGenericArguments();
Console.WriteLine("\tList type arguments ({0}):", typeArguments.Length);
foreach (Type tParam in typeArguments)
{
    Console.WriteLine("\t\t{0}", tParam);
} 
```

在您的示例中，我认为您想替换`t`为`this`. 如果这不能直接起作用，您可能需要使用[GetInterfaces 方法](https://docs.microsoft.com/en-us/dotnet/api/system.type.getinterfaces)来枚举您的类型上的当前接口，然后`GetGenericArguments()`从接口类型中枚举。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T06:27:08.220

根据提供的一些花絮，我采取了这种方式。在接口上处理多个通用参数可以变得更加健壮......但我不需要它;）

```
private static Type SafeGetSingleGenericParameter(Type type, Type interfaceType)
{
    if (!interfaceType.IsGenericType || interfaceType.GetGenericArguments().Count() != 1)
        return type;

    foreach (Type baseInterface in type.GetInterfaces())
    {
        if (baseInterface.IsGenericType &&
                baseInterface.GetGenericTypeDefinition() == interfaceType.GetGenericTypeDefinition())
        {
            return baseInterface.GetGenericArguments().Single();
        }
    }

    return type;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T11:31:36.040

我读你的问题与其他答案完全不同。

如果评估签名可以更改为：

```
public Type Evaluate<T>(IExtender<T> it)
{
    return typeof(T);
} 
```

这不需要更改调用代码，但确实需要参数为 type `IExtender<T>`，但是您可以轻松获取 type `T`：

```
// ** compiled and tested    
UserExtender ue = new UserExtender();
Type t = Evaluate(ue); 
```

当然，它不像只采用参数那样通用`Type`，但这是对问题的不同看法。另请注意，反射存在[安全注意事项 [msdn]](https://docs.microsoft.com/en-us/dotnet/framework/reflection-and-codedom/security-considerations-for-reflection)

# c++ - 甚至在创建该类之前声明一个对象

> ID：113385
> 
> 赞同：10
> 
> 时间：2008-09-22T06:04:39.007
> 
> 标签：c++, class, object, instantiation

无论如何，在用 C++ 创建类之前声明一个类的对象吗？我问是因为我正在尝试使用两个类，第一个类需要在其中包含第二个类的实例，但第二个类也包含第一个类的实例。我意识到您可能认为我可能会陷入无限循环，但实际上我需要在第一个类之前创建第二个类的实例。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-09-22T06:08:41.930

你不能做这样的事情：

```
class A {
    B b;
};
class B {
    A a;
}; 
```

最明显的问题是编译器不知道生成类 A 需要多大，因为 B 的大小取决于 A 的大小！

但是，您可以这样做：

```
class B; // this is a "forward declaration"
class A {
    B *b;
};
class B {
    A a;
}; 
```

将类 B 声明为前向声明允许您使用指向该类的指针（和引用），而无需完整的类定义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T06:07:05.070

你不能声明一个未定义类的实例，但你可以声明一个**指针**：

```
class A;  // Declare that we have a class A without defining it yet.

class B
{
public:
    A *itemA;
};

class A
{
public:
    B *itemB;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T16:04:23.653

有一个使用模板[的优雅解决方案。](http://acius2.blogspot.com/2007/11/breaking-return-by-value-recursive.html)

> ```
> template< int T > class BaseTemplate {};
> typedef BaseTemplate< 0 > A;
> typedef BaseTemplate< 1 > B;
> // A
> template<> class BaseTemplate< 0 >
> {
> public:
>    BaseTemplate() {} // A constructor
>    B getB();
> }
> 
> // B
> template<> class BaseTemplate< 1 >
> {
> public:
>    BaseTemplate() {} // B constructor
>    A getA();
> }
> 
> inline B A::getB() { return A(); }
> inline A B::getA() { return B(); } 
> ```
> 
> 此代码将起作用！那么，为什么它会起作用？原因与模板的编译方式有关。模板会延迟函数签名的创建，直到您在某处实际使用该模板。这意味着 getA() 和 getB() 都不会分析它们的签名，直到类 A 和 B 都已经完全声明之后。这就是这种方法的魔力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T06:08:34.117

这是否接近您想要的：第一个类包含第二个类，但第二个类（即首先创建）仅具有对第一个类的引用？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T06:11:04.547

这称为交叉引用。请参阅[此处](http://www.daniweb.com/forums/thread97195.html)的示例。

# css - What's the relationship between margin, padding and width in different browsers?

> ID：113387
> 
> 赞同：12
> 
> 时间：2008-09-22T06:05:55.650
> 
> 标签：css

CSS width value = display width of inside?

or

CSS width value = display width of inside + CSS margin-left + CSS margin-right?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-22T06:09:18.560

You have to make yourself familiar with the [CSS Box Model](http://www.w3.org/TR/CSS2/box.html). It explains where padding, margin and border as well as width work.

However do note that different browsers implement this differently: most notably, [Internet Explorer has a box model bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug) (this is infamously present in IE6 -- I am not aware if this has been fixed in IE7 or IE8) that caused the infamous "quirks mode" CSS hack.

Briefly stated, Internet Explorer set their box model to include padding in computing the width, as opposed the official standard wherein width should only constitute the content.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T07:21:51.380

正如其他人所提到的，经验法则是[CSS 盒子模型](http://www.w3.org/TR/CSS2/box.html)。这通常如 Opera、Firefox 和 Safari 等浏览器所宣传的那样工作。Internet Explorer 是您的例外，其中“宽度”包括边距、填充和边框。

有一些很棒的工具可以直观地描述浏览器如何呈现内容。对于 Firefox，请查看[Firebug](http://getfirebug.com/)，对于 Internet Explorer，请查看[Developer Toolbar](http://www.microsoft.com/en-us/download/details.aspx?id=18359)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T09:47:43.527

[*在这里*](http://redmelon.net/tstme/box_model/)，您可以看到一个“爆炸”盒子的动画图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T07:17:22.407

它不仅取决于您选择的浏览器和版本，还取决于您的 html 文档的 doctype。例如，“怪癖模式”中的 Internet Explorer 与文档类型为 XHTML 1.0 Transitional 的 Internet Explorer 完全不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-11T20:51:22.520

我认为版本 6 之前的 IE 错误地包含了宽度和高度的边框和填充。请参阅：[Microsoft 承认 IE 5 搞砸了](http://msdn.microsoft.com/en-us/library/bb250395.aspx)

# asp.net - 在 Asp.Net 中动态添加控件

> ID：113392
> 
> 赞同：11
> 
> 时间：2008-09-22T06:07:53.760
> 
> 标签：asp.net, web-user-controls

我正试图围绕asp.net。我有一个长期 php 开发人员的背景，但我现在面临学习 asp.net 的任务，我遇到了一些麻烦。这很可能是因为我试图将框架强加于它不打算用于的东西 - 所以我想学习如何“以正确的方式”去做。:-)

我的问题是如何在运行时以编程方式将控件添加到页面。据我所知，您需要在 page_init 创建控件，否则它们会在下一次 PostBack 时消失。但是很多时候我面临的问题是我不知道在 page_init 中添加哪些控件，因为它依赖于以前 PostBack 中的值。

一个简单的场景可能是在设计器中添加了一个下拉控件的表单。下拉菜单设置为 AutoPostBack。当 PostBack 发生时，我需要根据下拉控件中的选定值呈现一个或多个控件，并且最好让这些控件的行为就像它们是由设计添加的一样（如“在回发时，行为“正确”）。

我在这里走错路了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-22T06:55:57.387

我同意这里提出的其他观点“如果您可以摆脱动态创建控件，那么就这样做......”（@ [Jesper Blad Jenson aka](https://stackoverflow.com/users/11559/jesper-blad-jensen-aka-deldy)）但这是我过去使用动态创建的控件制定的一个技巧。

问题变成了先有鸡还是先有蛋。您需要您的 ViewState 来创建控件树，并且您需要创建您的控件树来获取您的 ViewState。嗯，这几乎是正确的。有一种方法可以在填充树的其余部分*之前获取您的 ViewState 值。*那是通过覆盖[`LoadViewState(...)`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.loadviewstate.aspx "MSDN - Control.LoadViewState 方法")and [`SaveViewState(...)`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.saveviewstate.aspx "MSDN - Control.SaveViewState 方法")。

在 SaveViewState 中存储您要创建的控件：

```
protected override object SaveViewState()
{
    object[] myState = new object[2];
    myState[0] = base.SaveViewState();
    myState[1] = controlPickerDropDown.SelectedValue;

    return myState
} 
```

当框架调用您的“LoadViewState”覆盖时，您将取回您从“SaveViewState”返回的确切对象：

```
protected override void LoadViewState(object savedState) 
{
    object[] myState = (object[])savedState;

    // Here is the trick, use the value you saved here to create your control tree.
    CreateControlBasedOnDropDownValue(myState[1]);

    // Call the base method to ensure everything works correctly.
    base.LoadViewState(myState[0]);
} 
```

我已经成功地使用它来创建 ASP.Net 页面，其中 DataSet 被序列化到 ViewState 以存储对整个数据网格的更改，从而允许用户使用 PostBacks 进行多次编辑并最终在单个“保存”中提交所有更改手术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T06:23:52.067

您必须在 OnInit 事件中添加您的控件，并且视图状态将被保留。不要使用if(ispostback)，因为每次都必须添加控件，事件在回发！
(De) 视图状态的序列化发生在 OnInit 之后和 OnLoad 之前，因此如果在 OnInit 中添加它们，您的视图状态持久性提供程序将看到动态添加的控件。

但是在您描述的场景中，多视图或简单的隐藏/显示（可见属性）可能是更好的解决方案。
这是因为在 OnInit 事件中，当您必须读取下拉菜单并添加新控件时，视图状态尚未读取（反序列化）并且您不知道用户选择了什么！（你可以做 request.form()，但感觉有点不对）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-30T08:07:14.440

在与这个问题搏斗了一段时间之后，我想出了这些似乎可行的基本规则，但是 YMMV。

*   尽可能使用声明性控件
*   尽可能使用数据绑定
*   了解 ViewState 的工作原理
*   Visibilty 属性可以走很长的路
*   如果您必须在事件处理程序中使用添加控件，请使用 Aydsman 的提示并在重写的 LoadViewState 中重新创建控件。

[真正理解 ViewState](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/truly-understanding-viewstate.aspx)是必读的。

[通过示例了解动态控件](http://weblogs.asp.net/infinitiesloop/archive/2008/04/23/truly-understanding-dynamic-controls-by-example.aspx)展示了一些关于如何使用数据绑定而不是动态控件的技术。

[《真正理解动态控制](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)》还阐明了可用于避免动态控制的技术。

希望这可以帮助其他有同样问题的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T06:46:46.753

如果您确实需要使用动态控件，则应使用以下方法：

*   在 OnInit 中，重新创建与满足前一个请求时页面上完全相同的控制层次结构。（如果这不是最初的请求，当然）
*   在 OnInit 之后，框架将从先前的请求中加载视图状态，并且您的所有控件现在都应该处于稳定状态。
*   在 OnLoad 中，删除不需要的控件并添加必要的控件。此时，您还必须以某种方式保存当前的控制树，以便在以下请求的第一步中使用。您可以使用一个会话变量来指示动态控制树的创建方式。我什至将整个 Controls 集合存储在会话中一次（*放下你的干草叉，这只是为了演示*）。

重新添加您将不需要并且无论如何都会在 OnLoad 中删除的“陈旧”控件似乎有点古怪，但 Asp.Net 的设计并没有真正考虑到动态控件的创建。如果在视图状态加载期间没有保留完全相同的控件层次结构，则各种难以发现的错误开始潜伏在页面中，因为旧控件的状态被加载到新添加的控件中。

阅读 Asp.Net 页面生命周期，尤其是视图状态的工作原理，它将变得清晰。

编辑：这是一篇关于视图状态如何表现以及在处理动态控件时应该考虑什么的非常好的文章：http: [//geekswithblogs.net/FrostRed/archive/2007/02/17/106547.aspx](http://geekswithblogs.net/FrostRed/archive/2007/02/17/106547.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T06:12:55.447

好。如果您可以摆脱动态创建控件，那么就这样做 - 否则，我应该做的是使用 Page_Load 而不是 Page_Init，而不是在 If Not IsPostBack 中放置东西，然后直接在方法中设置 i。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T06:13:00.987

我认为这里的答案在`MultiView`控件中，例如，下拉菜单在多视图中的不同视图之间切换。

您甚至可以将多视图的当前视图属性数据绑定到下拉列表的值！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-22T06:13:48.457

啊，这就是 ASP.NET Web 表单的泄漏抽象问题。

也许您会对查看用于创建此 stackoverflow.com 网站的 ASP.NET MVC 感兴趣？这应该更适合您，来自 PHP（因此，当涉及到 HTML 和 Javascript 时，踏板到金属）背景。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-23T15:08:10.317

Aydsman 给出了唯一正确的答案。LoadViewState 是添加动态控件的唯一位置，其中重新创建时将恢复其视图状态值，并且您可以访问视图状态以确定要添加的控件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-23T22:43:11.300

我在“C# 2008 中的 Pro ASP.NET 3.5”一书中的动态控件创建部分下遇到了这个问题：

> 如果需要多次重新创建控件，则应在 Page.Load 事件处理程序中执行控件创建。这还有一个额外的好处，就是允许您在动态控件中使用视图状态。即使视图状态通常在 Page.Load 事件之前恢复，如果您在 Page.Load 事件的处理程序中创建一个控件，ASP.NET 将应用它在 Page.Load 事件处理程序结束后拥有的任何视图状态信息。这个过程是自动的。

我没有对此进行测试，但您可以研究一下。

# visual-studio - 如何使用 Visual Studio 测试中资源文件中的特定异常消息测试预期异常？

> ID：113395
> 
> 赞同：39
> 
> 时间：2008-09-22T06:08:15.553
> 
> 标签：visual-studio, unit-testing, exception, internationalization

Visual Studio Test 可以使用 ExpectedException 属性检查预期的异常。你可以像这样传入一个异常：

```
[TestMethod]
[ExpectedException(typeof(CriticalException))]
public void GetOrganisation_MultipleOrganisations_ThrowsException() 
```

您还可以像这样检查 ExpectedException 中包含的消息：

```
[TestMethod]
[ExpectedException(typeof(CriticalException), "An error occured")]
public void GetOrganisation_MultipleOrganisations_ThrowsException() 
```

但是在测试 I18N 应用程序时，我会使用资源文件来获取该错误消息（如果我愿意，任何人甚至可以决定测试错误消息的不同本地化，但 Visual Studio 不会让我这样做：

```
[TestMethod]
[ExpectedException(typeof(CriticalException), MyRes.MultipleOrganisationsNotAllowed)]
public void GetOrganisation_MultipleOrganisations_ThrowsException() 
```

编译器将给出以下错误：

> 属性参数必须是属性的常量表达式、typeof 表达式或数组创建表达式

有人知道如何测试具有来自资源文件的消息的异常吗？

* * *

我考虑过的一种选择是使用自定义异常类，但基于经常听到的建议，例如：

> “如果您的错误条件可以以与任何其他现有异常不同的方式以编程方式处理，请创建并抛出自定义异常。否则，抛出现有异常之一。” [来源](http://blogs.msdn.com/kcwalina/archive/2005/03/16/396787.aspx)

我不希望在正常流程中以不同的方式处理异常（这是一个严重的异常，所以无论如何我都会进入恐慌模式），我不认为为每个测试用例创建一个异常是正确的做法。有什么意见吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2008-09-22T07:26:43.303

我建议使用辅助方法而不是属性。像这样的东西：

```
public static class ExceptionAssert
{
  public static T Throws<T>(Action action) where T : Exception
  {
    try
    {
      action();
    }
    catch (T ex)
    {
      return ex;
    }
    Assert.Fail("Exception of type {0} should be thrown.", typeof(T));

    //  The compiler doesn't know that Assert.Fail
    //  will always throw an exception
    return null;
  }
} 
```

然后你可以写你的测试是这样的：

```
[TestMethod]
public void GetOrganisation_MultipleOrganisations_ThrowsException()
{
  OrganizationList organizations = new Organizations();
  organizations.Add(new Organization());
  organizations.Add(new Organization());

  var ex = ExceptionAssert.Throws<CriticalException>(
              () => organizations.GetOrganization());
  Assert.AreEqual(MyRes.MultipleOrganisationsNotAllowed, ex.Message);
} 
```

这还有一个好处，它可以验证异常是在您期望它被抛出的行上抛出的，而不是在测试方法中的任何地方抛出的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-16T05:40:59.507

ExpectedException Message 参数与异常消息不匹配。相反，如果预期的异常实际上没有发生，则这是在测试结果中打印的消息。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-22T06:28:54.457

*只是*一个意见，但我会说错误文本：

*   是测试的一部分，在这种情况下，从资源中获取它是“错误的”（否则您最终可能会得到一个一致损坏的资源），因此只需在更改资源时更新测试（或测试失败）
*   不是测试的一部分，您应该只关心它是否引发异常。

请注意，第一个选项应该允许您测试多种语言，因为它能够使用语言环境运行。

至于多个异常，我来自 C++ 领域，在那里创建大量异常（到每个“抛出”语句一个！）在大继承中是可以接受的（如果不常见的话），但 .Net 的元数据系统可能不会'不喜欢那样，因此建议。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T06:15:31.510

我认为你可以在你的测试代码中做一个显式的 try-catch，而不是依赖 ExpectedException 属性来为你做这件事。然后你可以想出一些帮助方法来读取资源文件并将错误消息与捕获的异常所带来的错误消息进行比较。（当然，如果没有异常，那么测试用例应该被认为是失败的）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-22T06:15:57.560

如果您切换到使用非常好的[xUnit.Net](http://codeplex.com/xunit)测试库，您可以将 [ExpectedException] 替换为如下内容：

```
[Fact]
public void TestException()
{
   Exception ex = Record.Exception(() => myClass.DoSomethingExceptional());
   // Assert whatever you like about the exception here.
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T06:46:01.983

我想知道 NUnit 是否正在远离简单的道路……但你去吧。

**ExpectedException 属性的新增强（2.4.3 及更高版本？）允许您通过 Handler 方法更好地控制对预期 Exception 执行的检查**。更多详细信息在[官方 NUnit 文档页面](http://www.nunit.org/index.php?p=exception&r=2.4.3).. 到页面末尾。

```
[ExpectedException( Handler="HandlerMethod" )]
public void TestMethod()
{
...
}

public void HandlerMethod( System.Exception ex )
{
...
} 
```

*注意：这里感觉有些不对劲。为什么您的异常消息国际化了。您是否将异常用于需要处理或通知给用户的事情。除非你有一群文化不同的开发人员修复错误......你不应该需要这个。英语或通用接受语言的例外情况就足够了。但万一你必须有这个..它可能:)*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-18T22:00:31.847

我在尝试自己解决类似问题时遇到了这个问题。（我将详细说明我在下面确定的解决方案。）

我必须同意 Gishu 关于将异常消息国际化为代码气味的评论。

我最初是在我自己的项目中这样做的，以便我可以在我的应用程序抛出的错误消息和我的单元测试中保持一致。即，当时只需在一个地方定义我的异常消息，资源文件似乎是一个明智的地方，因为我已经将它用于各种标签和字符串（并且因为添加参考是有意义的在我的测试代码中验证这些相同的标签是否显示在适当的位置）。

有一次，我曾考虑（并测试过）使用 try/catch 块来避免 ExpectedException 属性对常量的要求，但是如果大规模应用，这似乎会导致相当多的额外代码。

最后，我确定的解决方案是在我的资源库中创建一个静态类并将我的异常消息存储在其中。这样就不需要将它们国际化（我同意这没有意义），并且在资源字符串可以访问的任何时候都可以访问它们，因为它们在同一个命名空间中。（这符合我不希望验证异常文本成为一个复杂过程的愿望。）

然后我的测试代码简单地归结为（请原谅我的修改......）：

```
[Test, 
    ExpectedException(typeof(System.ArgumentException),
    ExpectedException=ProductExceptionMessages.DuplicateProductName)]
public void TestCreateDuplicateProduct()
{
    _repository.CreateProduct("TestCreateDuplicateProduct");
    _repository.CreateProduct("TestCreateDuplicateProduct");
} 
```

# security - 在家中良好的安全备份开发人员

> ID：113423
> 
> 赞同：36
> 
> 时间：2008-09-22T06:16:04.473
> 
> 标签：security, backup

对于在家进行研发并且无法承受失去任何工作的程序员来说，有什么好的、安全的备份方法？

条件：

1.  备份必须始终在相当容易的范围内。

2.  不能保证 Internet 连接始终可用。

3.  解决方案必须是免费的或在合理范围内定价，并受上述 2 限制。

* * *

## 状况报告

目前仅考虑免费选项。

答案中建议了以下**开源项目（此处和其他地方）：**

*   [BackupPC](http://backuppc.sourceforge.net/)是一个高性能的企业级系统，用于将 Linux、WinXX 和 MacOSX PC 和笔记本电脑备份到服务器磁盘。
*   [Storebackup](http://savannah.nongnu.org/projects/storebackup)是一种将文件存储在其他磁盘上的备份实用程序。
*   [mybackware](http://deekayen.net/mybackware)：开发这些脚本是为了创建 SQL 转储文件，用于小型 MySQL 安装的基本灾难恢复。
*   [Bacula](http://www.bacula.org/en/) [...] 用于管理跨不同类型计算机网络的计算机数据的备份、恢复和验证。从技术上讲，它是一个基于网络的备份程序。
*   [AutoDL 2 和 Sec-Bk](http://www.metatrontech.com/projects/)：AutoDL 2 是一个可扩展的独立于传输的自动文件传输系统。它适用于将文件从登台服务器上传到生产服务器场中的每台服务器 [...] Sec-Bk 是一组简单的实用程序，可将文件安全地备份到远程位置，甚至是公共存储位置。
*   [rsnapshot](http://www.rsnapshot.org/)是一个文件系统快照实用程序，用于备份本地和远程系统。
*   [rbme](http://schapiro.org/schlomo/projects/rbme.php)：使用 rsync 进行备份 [...] 您可以获得永久增量备份，这些备份显示为完整备份（每天），因此可以轻松恢复或进一步复制到磁带等。
*   [Duplicity](http://www.nongnu.org/duplicity/)通过生成加密的 tar 格式卷并将它们上传到远程或本地文件服务器来支持目录。[...] 使用 librsync，[用于] 增量存档
*   [simplebup](http://github.com/slashmais/simplebup)，对正在修改的文件进行实时备份。该工具也可用于监视其他目录。它旨在作为即时自动备份，而不是作为版本控制。这是非常容易使用。

**其他可能性：**

使用分布式版本控制系统 (DVCS)，例如[Git](http://git.or.cz/) (/ [Easy Git](http://www.gnome.org/~newren/eg/) )、[Bazaar](http://bazaar-vcs.org/)，[Mercurial](http://www.selenic.com/mercurial/wiki/)满足了在本地提供备份的需求。

使用免费的在线存储空间作为远程备份，例如：压缩您的工作/备份目录并将其邮寄到您的 gmail 帐户。

**策略**

见[疯子的回答](https://stackoverflow.com/questions/113423/good-secure-backups-developers-at-home/2383368#2383368)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-22T06:18:53.280

我更喜欢[http://www.jungledisk.com/](http://www.jungledisk.com/)。它基于 Amazon S3，价格便宜，多平台，多台机器，一个许可证。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-22T06:19:04.870

usb 硬盘 + [rsync](http://samba.anu.edu.au/rsync/)对我有用

（参见[此处](http://www.itefix.no/i2/node/10650)了解 Win32 版本）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-22T06:19:01.593

[Scott Hanselman](https://stackoverflow.com/users/6380/scott-hanselman)在其标题恰当的文章 [The Case of the Failing Disk Drive 或 Windows Home Server 挽救了我的婚姻](http://www.hanselman.com/blog/TheCaseOfTheFailingDiskDriveOrWindowsHomeServerSavedMyMarriage.aspx)中推荐了 Windows Home Server 。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-22T06:22:36.047

首先：异地备份对个人和企业同样重要。如果你的房子被烧毁，你不想失去一切。

尤其如此，因为它很容易实现。就个人而言，我有一个外部 USB 硬盘，我放在我父亲的家里。通常，它连接到他的互联网连接，我通过网络备份（使用 rsync），但是当我需要备份非常大的东西时，我收集它并通过 USB 复制东西。理想情况下，我应该得到另一个磁盘，以分散风险。其他选项是免费的在线存储设施（使用加密！）。

为了安全起见，只需使用 TrueCrypt。它在 IT 界享有盛誉，而且似乎运行良好。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T06:24:57.040

取决于您在哪个平台上运行（Windows/Linux/Mac/...？）

作为独立于平台的方式，我使用了个人颠覆服务器。所有的贵重物品都在那里，所以如果我丢失了一台机器，一个简单的“svn checkout”就会把东西拿回来。但是，这需要一些初步工作，并且需要纪律。它可能不适合你？

作为非 svn 内容的第二次备份，我使用OS X 内置的[Time Machine 。简直太棒了。](http://www.apple.com/macosx/features/timemachine.html):)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-22T06:58:06.010

我强烈推荐 www.mozy.com。他们的软件既简单又好用，而且由于它存储在他们的服务器上，因此您可以隐式地获得异地备份。无需担心运行备份服务器并确保其正常工作。此外，该公司得到 EMC（领先的数据存储产品公司）的支持，因此让我有足够的信心信任他们。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-22T06:19:26.010

我是 Acronis Trueimage 的忠实粉丝。请确保您轮换使用几个备份 HDD，以便您有几代人可以返回，或者如果其中一个备份发生故障。如果这是一个重要的里程碑，我会邮寄一套 DVD 给妈妈，她会帮我归档。她住在一个不同的州，所以它应该涵盖大多数低于圣经比例的灾难。

编辑：Acronis 通过密码进行加密。我还发现 snailmail 的带宽有点无限 - 10GB 一夜之间 = 115 kb/s，给予或接受。从未被澳大利亚邮政扼杀。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-22T06:32:51.140

我投票赞成某种形式的云存储。几乎所有“家庭”备份的问题是它们都留在家里，这意味着对正在备份的系统的任何灾难性损坏也可能会损坏备份（火灾、洪水等）。我的要求是

1) 自动 - 手动备份被遗忘，通常只是在最需要的时候

2) 场外 - 见上文

3) 多个版本 - 即备份不止一件事，以防一件事失败。

作为开发人员，通常用于备份的数据大小相对较小，因此几个免费的云备份帐户可能会这样做。它们还经常完成第 1 部分，因为它们通常可以自动化。我听说过有关 www.getdropbox.com/ 的好消息。

多于 1 个帐户的另一个优点是您可以在“每日同步”中使用一个，在“每周同步”中使用另一个帐户，以便为您提供一些历史记录。这远不及真正的增量备份。

就我个人而言，我更喜欢脚本备份（相对于本地硬盘驱动器，我将其旋转为“异地”工作。这在很大程度上是由于我的爱好（摄影），因此我相对蹩脚的互联网上游带宽无法应对数据量。

带回家的信息——不要依赖一种解决方案，也不要认为您的数据不够重要，无法像“企业”那样深入思考这些问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-22T07:02:57.683

买个防火的。这不仅是存储备份的好主意，而且是一个好主意。

您放入其中的确切媒体是此处其他答案的主题。

但是，从火灾中恢复的角度来看，有一个可清洗的介质是好的。只要温度不会太高，CD 和 DVD 就显得相当有弹性，尽管我会担心烟雾损坏。硬盘驱动器也是如此。

闪存驱动器确实具有不会损坏移动部件的好处，并且您无需担心光学特性。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-10-03T11:21:14.407

mozy.com 为王。我开始只用它来备份代码，然后每月花 5 块钱来备份我的个人照片和其他东西，如果房子被烧毁，我宁愿不会丢失这些东西。初始备份可能需要一些时间，但之后您几乎可以忘记它，直到您需要恢复某些内容。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-22T06:21:56.750

获得一个带网络端口的外部硬盘驱动器，这样您就可以将备份保存在另一个房间中，这除了是您可以在家中自己操作的简单解决方案外，还可以提供一点防火安全。

下一步是在某个远程位置获取存储空间（例如，服务器每月的价格非常便宜）或拥有多个外部硬盘驱动器并定期在家里和远程位置之间切换。如果您使用加密，这可以是任何地方，例如朋友或父母的地方或工作场所。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-22T06:23:38.480

Bacula 是一个很好的软件，它是开源的，应该会提供很好的性能，是一种商业软件，第一次配置有点困难，但不是那么难。它有很好的文档

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-22T06:33:22.107

[我支持JungleDisk](http://www.jungledisk.com/)的投票。我用它将我的文档和项目文件夹推送到 S3。我来自亚马逊的平均每月账单约为 20 美分。

我所有的项目都在外部主机上的 Subversion 中。

除此之外，我在 Mac 上，所以我使用 SuperDuper 为我的驱动器拍摄夜间图像。我确信在 Windows/Linux 世界中有很好的选择。

我有两个外部驱动器，我每周轮换一次，并在休息周期间将其中一个驱动器存储在场外。

这意味着如果发生故障，我距离图像只有 24 小时，而如果发生灾难性故障（火灾盗窃），我距离图像只有 7 天。将驱动器插入机器并从图像立即运行的能力极大地节省了我的时间。我的引导分区在电源故障期间损坏（幸运的是，不是硬件故障）。我插入备份，恢复并在传输外部驱动器文件所需的时间内再次工作。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-22T07:01:47.920

这些是“个人备份问题”的有趣时期。

现在有几种思想流派：

1.  频繁自动本地备份+定期本地手动备份

    > 自动化：计划的每晚备份到外部驱动器。
    > 手动：每周/每月/每年一次复制到第二个外部驱动器/*哎呀-忘记了*
    > ，然后将其放在“妈妈的房子”。
    >  
    > 该领域有很多软件，但这里有一些：Mac 上有 RSync 和 TimeMachine，Windows 上有 DeltaCopy www.aboutmyip.com/AboutMyXApp/DeltaCopy.jsp。

2.  频繁的远程备份

    > 有很多服务可以让您通过互联网连接备份到远程数据中心。[如今， Amazon](http://aws.amazon.com/s3)的 S3 服务 + JungleDisk 的客户端软件是一个不错的选择 - 这不是最便宜的选择，但您为使用的东西付费，而且 Amazon 的业绩记录表明，作为一家公司，它的经营时间与任何其他存储提供商一样长或更长今天谁挂了他们的木瓦。
    >  
    > 我有没有提到它应该被加密？对 JungleDisk 的支持，用于很好地处理“加密问题”和面向未来（与 Jungle Disk 互操作的开源库）。

3.  上述所有的。

    > 有人称其为偏执狂……其他人则对自己说：“啊，我现在可以晚上睡觉了”。

* * *

此外，它比备份更具有容错性，但您应该检查一下[Drobo](http://www.drobo.com) - 基本上，它是看起来运行良好的简单 RAID。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-22T07:14:29.917

[mozy.com](http://mozy.com)的另一票

您可以免费获得 2gb，或者每月 5 美元即可获得无限的备份空间。备份可以定时进行，也可以在您的 PC/Mac 不忙时进行。它在传输和存储过程中被加密。

您可以通过内置软件、通过网络检索文件或购买 DVD 刻录和回传。

威廉麦克唐纳

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-22T07:43:26.570

如果您想同步到云端并且不介意最初的 Beta 版 2GB 上限，那么我已经爱上了[Dropbox](http://www.getdropbox.com/)。

它有适用于 Windows、OSX 和 Linux 的版本，可以毫不费力地工作，保持文件版本化，并且完全根据文件更改的时间在后台运行（不是每日计划或手动激活）。

如果随机的互联网极客的话还不够的话，[Ars Technica](http://arstechnica.com/news.ars/post/20080914-how-dropbox-ended-my-search-for-seamless-sync-on-linux.html)和[Joel Spolsky都已经坠入爱河（尽管对 Spolsky 的爱似乎很强烈，但让我们假装吧！）。](http://www.joelonsoftware.com/items/2008/09/11b.html)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2010-03-04T22:57:39.253

以下是我要注意的功能：

*   尽可能接近全自动。如果它依赖于您按按钮或定期运行程序，您会感到无聊并最终停止打扰。每小时一次的 cron 工作为我解决了这个问题；我同步到我在家庭网络上运行的 24x7 服务器。
*   多个可移动备份媒体，以便您可以在场外保留一些（和/或旅行时随身携带）。我使用可热插拔的 SATA 驱动器托架和每周通过电子邮件提醒我更换驱动器的 cron 作业来执行此操作。
*   高度加密的媒体，以防万一丢失。linux 加密设备支持 ( `cryptsetup`et al) 为我做这件事。
*   某种时间点恢复，但请仔细考虑您想要的解决方案。每天可能就足够了——拥有多个备份媒体可能会让你做到这一点——或者你可能想要更全面的东西，比如 Apple 的 Time Machine。我对我的可移动驱动器使用了一些谨慎的 rsync 选项：每天都会创建一个新的快照目录，但与前一天相比未更改的文件是硬链接而不是复制，以节省空间。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-22T08:40:15.420

或者只是建立一个 gmail 帐户并将其邮寄给自己:) 除非你对谷歌知道你的东西有点偏执，因为你说研究。它对结构和东西没有多大帮助，但它是免费的、大存储空间和异地，非常安全。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2010-02-25T16:41:58.513

如果您使用[OS X](http://www.apple.com/macosx/) 10.5 或更高版本，那么[Time Machine](http://www.apple.com/macosx/what-is-macosx/time-machine.html)的成本就是外部硬盘驱动器的成本。不仅如此，界面使用起来也非常简单。打开您要恢复的文件夹，单击时间机器图标，然后像回到 1999 年一样浏览目录！

我没有尝试加密它，但我想你可以使用[truecrypt](http://www.truecrypt.org/)。

是的，这个答案是在提出问题后很久才发布的，但是我相信它应该可以帮助那些将来偶然发现这个帖子的人（就像我一样）。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2010-09-30T09:31:42.110

设置 Linux 或 xBSD 服务器：

- 在其上设置您选择的源代码控制系统。
--Mirror Raid (raid 1) at min
--每日（甚至每小时）备份到外部驱动器[s]。

您还可以从服务器设置自动异地备份。如果互联网不可用，您仍然可以使用外部驱动器，并且只要它回来就自动同步。

一旦设置好，它应该是大约 0 工作。

对于异地备份，您不需要任何“花哨”的东西。获取允许存储非 Web 数据的虚拟主机。通过 sftp 或 rsync 通过 ssh 同步。如果您偏执，将另一端的数据存储在真正的 crypt 容器中。

如果您为雇员/承包商工作，也请询问他们。大多数地方已经有一些东西，或者让你与他们的 IT 一起工作。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-22T08:26:29.870

我的投票是 dirvish（对于 linux）。它使用 rsync 作为后端，但很容易配置。它对目录进行自动、定期和差异备份。最大的好处是，它会为自上次备份以来未更改的所有文件创建硬链接。所以恢复很容易：只需将最后创建的目录复制回来 - 而不是像其他差异备份工具需要做的那样一个接一个地恢复所有差异。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-03-29T00:02:55.717

我有以下备份方案并使用 rsync 脚本存储在 USB 和网络共享上。

1.  (**每周**) Windows 备份用于“裸机”恢复
    系统驱动器 C:\ 的内容使用 Windows 备份在物理磁盘故障后进行快速恢复，因为我不想从头开始重新安装 Windows 和应用程序。这被配置为使用 Windows 备份计划自动运行。

2.  （**每日**和**有条件**的）使用 rsync 进行活动内容备份
    Rsync 负责处理笔记本电脑、手机和其他设备中所有更改的文件。我每晚都会备份笔记本电脑，并在内容发生重大变化后备份，例如将最近的照片 RAW 从 SD 卡导入笔记本电脑。

我创建了一个 bash 脚本，我在 Windows 上从 Cygwin 运行以启动 rsync：[https ://github.com/paravz/windows-rsync-backup](https://github.com/paravz/windows-rsync-backup)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-06-28T19:43:59.710

如果您使用重复数据删除，请远离 JungleDisk。他们的还原客户端弄乱了重解析点，并使文件无法使用。您希望可以通过以下方式在安全模式下修复它：

> fsutil 重解析点删除

# c# - 转换逆波兰表示法

> ID：113424
> 
> 赞同：9
> 
> 时间：2008-09-22T06:16:10.573
> 
> 标签：c#, c++, rpn

使用 C++ 或 C# 时，有什么方法可以将逆波兰表示法解释为“正常”数学表示法？我在一家工程公司工作，所以他们偶尔会使用 RPN，我们需要一种方法来转换它。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-22T06:22:55.877

是的。想想 RPN 计算器是如何工作的。现在，不是计算值，而是将操作添加到树中。因此，例如，`2 3 4 + *`当您到达 + 时，不是将 7 放入堆栈，而是放入`(+ 3 4)`堆栈。同样，当您到达 * 时（您的堆栈将看起来像`2 (+ 3 4) *`在那个阶段），它变成`(* 2 (+ 3 4))`.

这是前缀表示法，然后您必须将其转换为中缀。从左到右遍历树，深度优先。对于每个“内部级别”，如果运算符的优先级较低，则必须将运算放在括号中。在这里，你会说，`2 * (3 + 4)`因为 + 的优先级低于 *。

希望这可以帮助！

编辑：有一个微妙之处（除了上面没有考虑一元运算之外）：我假设是左关联运算符。对于右结合（例如），对于⇒与⇒ `**`，您会得到不同的结果。`2 3 4 ** **``(** 2 (** 3 4))``2 3 ** 4 **``(** (** 2 3) 4)`

从树中重构中缀时，两种情况都表明优先级不需要括号，但实际上后一种情况需要括号（`(2 ** 3) ** 4`）。因此，对于右关联运算符，左侧分支需要更高优先级（而不是更高或等于）以避免括号。

`-`此外，进一步的想法是您也需要和运算符的右手分支的括号`/`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T06:24:15.717

调车场算法用于将中缀（即代数）转换为 RPN。这与您想要的相反。

你能给我一个你的RPN输入的例子吗？我是一位资深的惠普计算器用户/程序员。我假设您有一个包含所有输入和运算符的堆栈。我猜你需要重建表达式树，然后遍历树来生成中缀形式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T06:21:53.867

C# 没有对解析逆波兰表示法 (RPN) 的内置支持。您需要编写自己的解析器，或者在网上找到一个。

有许多教程将后缀形式（RPN）转换为中缀（代数方程）。看看[这个](http://www.dreamincode.net/forums/showtopic35320.htm)，也许你会发现它很有用，你可以尝试“逆向工程”它以将后缀表达式转换为中缀形式，请记住，给定的后缀可以有多个中缀表示法。实际上讨论将后缀转换为中缀的有用示例很少。这是我发现非常有用的两部分条目。它还有一些伪代码：

*   [PostFix to Infix：将 RPN 转换为代数表达式](http://blog.boyet.com/blog/blog/postfix-to-infix-converting-rpn-to-algebraic-expressions/)
*   [后缀到中缀，第 2 部分：添加括号](http://blog.boyet.com/blog/blog/postfix-to-infix-part-2-adding-the-parentheses/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T06:28:53.957

如果你能阅读 ruby​​，你会在[这里找到一些很好的解决方案](http://www.rubyquiz.com/quiz148.html "红宝石测验 148")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T06:25:32.280

一种方法是取[龙书](https://rads.stackoverflow.com/amzn/click/com/0321486811)第二章中的示例，该章解释了如何编写解析器以将中缀表示法转换为后缀表示法，并将其反转。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T06:26:28.160

如果您希望将一些源文本（字符串/s）从 RPN（后缀表示法）转换为“普通表示法”（中缀），这当然是可能的（并且可能不太难）。

RPN 是为基于堆栈的机器设计的，因为操作的表示方式（“2 + 3” -> “2 3 +”）适合它在硬件上的实际执行方式（将“2”推入堆栈，将“3” " 到堆栈上，从堆栈中弹出顶部的两个参数并添加它们，然后推回到堆栈上）。

基本上，您想通过创建要在“叶节点”上操作的 2 个表达式和操作本身（随后是“父节点”）来从 RPN 创建语法树。这可能会通过递归查看您的输入字符串来完成（您可能希望确保子表达式正确括起来以更加清晰，如果它们还没有的话）。

一旦你有了那个语法树，你就可以输出前缀、中缀或后缀表示法，只需对该树进行前序、后序或按序遍历（同样，如果需要，为了清楚起见，将输出括起来）。

更多信息可以在[这里](http://www.cs.man.ac.uk/~pjj/cs2121/fix.html)找到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-08T22:33:53.253

我刚刚用 Java 写了一个版本，它在[这里](https://github.com/raoulsson/snippets/blob/master/src/main/java/com/twentytwelve/snippets/calculator/RPNToInfixSimple.java)和一个在 Objective-C 中，在[这里](https://github.com/raoulsson/ocex2/blob/master/Calculator/Calculator/CalculatorRPNToInfixMultiple.m)。

**可能的算法**：假设您有一个堆栈，其中包含 rpn 中的输入，因为用户将输入它，例如 8、9、*。您从第一个到最后一个迭代数组，并且始终删除当前元素。您评估的这个元素。如果它是一个操作数，则将其添加到结果堆栈中。当它是一个运算符时，您将结果堆栈弹出两次（对于二进制操作），并将结果字符串写入结果堆栈。

**使用“ 8, 9, +, 2, *** ”的示例输入，您可以在结果堆栈上获得这些值 *（方括号表示单个元素）*：

第 1 步：**[8]**

第 2 步：**[8]、[9]**

第 3 步：**[(8 + 9)]**

第 4 步：**[(8 + 9)]，[2]**

第 5 步：**[(8 + 9) * 2]**

当输入堆栈为空时，您就完成了，resultStack 的唯一元素就是您的结果。（但请注意，输入可能包含多个条目或没有意义的条目，例如前导操作：“+ 2 3 /”。）

链接中的实现故意不使用任何自制类型，例如运算符或操作数，也不应用例如复合模式。它简洁明了，因此可以轻松理解并移植到任何其他语言。

将其移植到 C# 是直截了当的。

# c# - 如何在 .NET 中连接到 USB 网络摄像头？

> ID：113426
> 
> 赞同：25
> 
> 时间：2008-09-22T06:18:07.667
> 
> 标签：c#, .net, camera, webcam, image-capture

我想连接到 .NET 中的 USB 网络摄像头，特别是使用 C#。作为 .NET 的新手，我不知道标准库中有什么样的支持。我在网上找到了一个通过剪贴板复制位图的示例，但这看起来很笨拙（而且可能很慢）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-22T06:23:35.907

您将需要使用[Windows 图像采集 (WIA)](https://docs.microsoft.com/en-gb/windows/win32/wia/-wia-startpage)将网络摄像头与您的应用程序集成。有很多这样的现成的例子。这是一个带有源代码的[C# 网络摄像头用户控件](https://docs.microsoft.com/en-gb/archive/blogs/markhsch/c-webcam-user-control-source)。

以下是希望解决与您相同的问题的人们的更多文章和博客文章：

*   [MSDN Coding4Fun：看着我！Windows 图像采集](https://web.archive.org/web/20100123131023/http://blogs.msdn.com:80/coding4fun/archive/2006/10/31/912546.aspx)
*   [CodeProject：WIA 脚本和 .NET](https://www.codeproject.com/Articles/2303/WIA-Scripting-and-NET)
*   [CodeProject：使用 WIA 的 WebCam 快速图像捕获服务](https://www.codeproject.com/Articles/15219/WebCam-Fast-Image-Capture-Service-using-WIA)
*   [clausn.dk：来自 C# 和 WIA 的网络摄像头控制](https://web.archive.org/web/20111216162211/http://clausn.dk/post/2006/02/Webcam-control-from-C-and-WIA.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-24T14:34:59.213

有趣的旁注，Vista 不再支持 WIA 从网络摄像头进行捕获。他们主要针对扫描仪和从相机中提取静止图像。

此外，像罗技这样的大型制造商已经放弃了威亚对 DirectShow 的青睐。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-22T06:26:55.617

这是一个很好的例子。它使用 DirectShow.Net ( [http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/) )，这可能比使用“剪贴板”更好：D。

[https://www.codeproject.com/Articles/18511/Webcam-using-DirectShow-NET](https://www.codeproject.com/Articles/18511/Webcam-using-DirectShow-NET)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-01-04T13:36:42.683

有一个与计算机视觉系统有关的功能包，称为 AForge。如果您仍在寻找，他们有一种简单的方法可以从 USB 摄像头获取网络摄像头图像。

只需查看计算机视觉运动传感器示例代码的示例代码即可。我相信你可以像我一样从中提取你需要的函数调用。

[对不起necro，但这可能对将来的某人有用]

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-22T07:23:29.647

在我的电脑上，WIA 非常缓慢……所以我决定尝试一下[Windows Multimedia Video Capture](http://windowssdk.msdn.microsoft.com/en-us/library/ms713477(VS.80).aspx)。

[你可以在这里](http://www.timvw.be/wp-content/code/csharp/testavicap32.zip)找到一个演示。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T07:52:08.907

It really depends on what you want to do. WIA is primarily for capturing stills from imaging devices, and DirectShow (used either through [directshow.net](http://directshownet.sourceforge.net/about.html) or managed DirectX) is for access to fuller video features.

The other option is to create a WPF application. It has a huge amount of built in support for video (to the extent that having a looping video clip as a button is pretty trivial), and should be quick and easy to develop.

# linux - 如何清除 screen 命令中的回滚？

> ID：113427
> 
> 赞同：34
> 
> 时间：2008-09-22T06:18:09.163
> 
> 标签：linux, command-line, gnu-screen

我在 Linux 中使用该`screen`命令进行命令行多任务处理，并将我的回滚缓冲区长度设置为一个非常大的值。当我不想再坐在那里时，是否有一个组合键可以清除某个选项卡的缓冲区？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-09-22T06:32:29.893

[该线程](http://osdir.com/ml/gnu.screen.user/2006-01/msg00029.html)有以下建议：

> 在要删除其回滚的窗口中，将回滚设置为零，然后将其恢复为正常值（在您的情况下为 15000）。
> 
> 如果需要，可以将其绑定到一个键：
> 
> 绑定/评估“回滚0”“回滚15000”

你也可以在会话中发出`scrollback 0`命令，在输入`C-a :`. HTH。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-22T06:24:39.507

*   `C-a C`将清除屏幕，包括提示
*   `clear`（命令，不是组合键）会清屏，留下提示

ETA：误读了原始问题；这些只会清除可见文本，但不会清除缓冲区！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-31T14:51:42.690

我还添加了“清除”命令来清理当前屏幕。注意：您必须按 Enter 才能重新获得提示。

```
bind '/' eval "clear" "scrollback 0" "scrollback 15000" 
```

还将它添加到您的“.screenrc”以使其永久化。

注意我在斜杠周围添加了单引号以确保它不会干扰我的“.screenrc”。可能没有必要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-23T15:23:13.877

别名 cls='printf "\e[3J\033c"'

清除屏幕和回滚缓冲区。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-15T08:26:47.947

Command-K 似乎是 Mac 的最佳解决方案。有关详细信息和说明，请参阅[此页面](https://apple.stackexchange.com/questions/31872/how-do-i-reset-the-scrollback-in-the-terminal-via-a-shell-command)。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-03-30T20:41:16.777

```
^a : clear 
```

在 Ubuntu 上为我工作。

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2008-09-22T06:27:39.763

从手册页：

```
C-a C       (clear)       Clear the screen. 
```

# iphone - iPhone 应用程序：是否可以使用“双”滑块来选择价格范围

> ID：113437
> 
> 赞同：5
> 
> 时间：2008-09-22T06:21:49.123
> 
> 标签：iphone, user-interface, slider

我正在开发一个 iphone 应用程序（不是网络应用程序），我想构建一个表单，要求用户指明价格范围。我宁愿使用双滑块来设置最低和最高价格，而不是使用两个文本字段。我知道可以使用简单的滑块（例如声音控制），但我从未见过双滑块。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T06:39:51.933

如果不创建自定义控件，这是不可能的。您需要从 UIControl 或 UIView 继承并提供自定义 drawRect 方法。您还需要响应触摸和拖动事件来更新控件的状态。我自己并没有这样做，但我会准备好进行相当大量的工作，以使所有内容都能按预期响应和显示。

我很好奇为什么你需要在一个滑块上指定两个值？为什么不并排或堆叠使用两个滑块？它不需要比双滑块更多的输入步骤，并且更符合标准 UI 指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T07:19:11.793

如果你继承 UISlider，我*认为*你可以为单个滑块指定多个拇指，至少我隐约记得这在 MacOSX 中是可能的。但是 Code Addict 是对的，使用标准控件可能会更好 - 双拇指滑块似乎很难在触摸屏环境中处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-08T19:47:44.770

我构建了这样一个控件并将其添加到 GitHub，因此请随意查看，如果您喜欢该控件，请扩展它并做出贡献。

GitHub页面：http: [//github.com/doukasd/DoubleSlider](http://github.com/doukasd/DoubleSlider)

博客文章（显示其工作原理的视频）：[http ://dev.doukasd.com/2010/08/double-slider/](http://dev.doukasd.com/2010/08/double-slider/)

# javascript - 在博客文章中显示代码

> ID：113440
> 
> 赞同：9
> 
> 时间：2008-09-22T06:21:57.250
> 
> 标签：javascript, syntax-highlighting

您使用哪些库和/或包来创建带有代码块的博客文章？拥有一个支持行号和缩进的 JavaScript 库是理想的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-22T06:24:40.677

GeSHi[文本荧光笔](http://qbnz.com/highlighter/)非常棒。如果您使用的是 WordPress，那么已经有一个适合您[的插件](http://wordpress.org/extend/plugins/wp-syntax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T06:25:59.330

一个简单的谷歌查询显示[http://code.google.com/p/syntaxhighlighter/](http://code.google.com/p/syntaxhighlighter/)

从最初的外观来看，它似乎还不错。完全基于 JS，因此可以独立于使用的服务器端语言来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T06:26:38.177

[Wordpress](http://wordpress.com/)使用[语法荧光笔](http://code.google.com/p/syntaxhighlighter/)并产生很好的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T06:27:43.507

将 Visual Studio 代码复制为 HTML [http://www.jtleigh.com/people/colin/software/CopySourceAsHtml/](http://www.jtleigh.com/people/colin/software/CopySourceAsHtml/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T06:29:35.297

我使用 Live Writer 并使用将源代码复制为 html 的 VS 插件来复制代码，然后在 Writer 中更改为 HTML 视图并粘贴结果

您可以在以下位置下载插件：http: [//blogs.microsoft.co.il/blogs/bursteg/archive/2007/11/21/copy-source-as-html-copysourceashtml-for-visual-studio-2008-rtm .aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/11/21/copy-source-as-html-copysourceashtml-for-visual-studio-2008-rtm.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T06:35:31.103

前段时间我对这个话题做了一些研究，得出的结论[是使用 GeSHi 是要走的路](http://hype-free.blogspot.com/2006/10/how-to-publish-good-looking-code-on.html)。但是最近我一直在寻找更多的选择：

*   使用带有语法荧光笔插件的 Windows Live Writer（[有几个](http://www.istaysharp.net/index.php?title=SyntaxColor4Writer)[可用](http://www.codeplex.com/Wiki/View.aspx?ProjectName=Highlight4Writer) [的](http://www.wilcob.com/Wilco/Toolbox/SyntaxHighlighter.aspx) ）
*   使用[syntaxhighlighter](http://code.google.com/p/syntaxhighlighter/)库或[google 代码美化](http://code.google.com/p/google-code-prettify/)库。两者都是用 JS 编写的，我认为第二个用于 stackoverflow
*   使用一些中间过程，例如我在 Markdown 中编写帖子并让程序生成最终的 HTML

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T06:36:57.793

就个人而言，我使用这个网站为我做这件事：http: [//puzzleware.net/codehtmler/default.aspx](http://puzzleware.net/codehtmler/default.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-22T07:00:38.547

如果那是我自己的代码，我会使用[SciTE](http://www.scintilla.org/SciTE.html "SciTE 源代码编辑器")的导出到 HTML 并粘贴它。否则（像这里那样突出显示代码），我更愿意在服务器端进行：JS 突出显示（如在 JavaLobby 上所见）在页面以默认模式显示之后发生（所以有一个突然的变化的样子，不是很好），而且经常很慢，加上 JS 可以禁用。
实际上，这样的任务可以完成一次，在用户输入之后，不需要在提供给访问者的每个页面上一遍又一遍地完成。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-24T08:16:45.990

我通常使用[这个格式化 C# 代码的免费在线工具](http://manoli.net/csharpformat/)。除了 C#，它还格式化 VB、HTML、XML、T-SQL 和 MSH（代号 Monad）的代码。

# java - Java 用户界面规范

> ID：113464
> 
> 赞同：3
> 
> 时间：2008-09-22T06:28:12.477
> 
> 标签：java, swing, user-interface

Java 为使用 Java Swing 构建的应用程序提供标准用户界面指南。基本准则很好，但我真的觉得外观和感觉真的很无聊和过时。

是否有人知道公开可用的 Java 用户界面指南，其外观指南比 Sun 提供的指南更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T06:40:44.773

**[您在这里显示了](http://www.javootoo.com/plaf/notskinnable.html)**许多 LNF（外观和感觉） ，但它们没有提供完全的“Java 用户指南”。

但是**[MigLayout](http://www.miglayout.com/)**确实严格遵循现有的主要用户界面标准（包括一些晦涩的[按钮顺序](http://www.migcalendar.com/miglayout/whitepaper.html)点）：

> 例如，OK 和 Cancel 按钮在 Windows 和 Mac OS X 上的顺序不同。
> 虽然其他布局管理器为此使用工厂和按钮构建器，但 MigLayout 仅通过标记按钮就固有地支持它。
> 只需将 OK 按钮标记为“ok”，将 Cancel 按钮标记为“cancel”，如果将它们放在同一个网格单元中，它们将按照应用程序运行的平台的正确顺序结束。

Mac 上的示例：

[![](https://i.stack.imgur.com/2pDT0.png)](https://i.stack.imgur.com/2pDT0.png)
[（来源：[miglayout.com](http://www.miglayout.com/images/Form.png)）]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T07:28:40.663

苹果开发者指南有一个人机界面指南 - [http://developer.apple.com/documentation/UserExperience/Conceptual/AppleHIGuidelines/XHIGIntro/chapter_1_section_1.html#//apple_ref/doc/uid/TP30000894-TP6](http://developer.apple.com/documentation/UserExperience/Conceptual/AppleHIGuidelines/XHIGIntro/chapter_1_section_1.html#//apple_ref/doc/uid/TP30000894-TP6)。

即使它针对的是 mac 平台，你也可以从中学到一些东西——这就是为什么这么多 mac 应用程序使用起来很愉快，而且美观的原因！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-22T08:56:31.030

根据 Chii 的回答，我建议您查看[Windows Vista 用户体验指南](http://msdn.microsoft.com/en-us/library/aa511258.aspx "Windows Vista 用户体验指南")，了解有关制作用户界面的一般提示。

尽管名称（“Windows Vista 用户体验指南”）和来源（Microsoft）可能暗示它只包含以 Windows 为中心的提示和建议，但它确实提供了很好的一般提示和指导，可在为非 Windows 应用程序设计界面时使用也是。

[设计原则](http://msdn.microsoft.com/en-us/library/aa511328.aspx)部分解决了设计有效用户界面时要牢记的一些要点。例如，[如何设计出色的用户体验的](http://msdn.microsoft.com/en-us/library/aa511335.aspx)项目符号三说：

> **不要对所有人都是一切**你的程序通过取悦目标用户比试图满足所有人更成功。

这些技巧适用于在任何平台上设计用户界面。当然，也有特定于 Windows 的指南。

我相信 Swing 应用程序的外观和感觉看起来“乏味”和“过时”的最大原因之一是由于 Java 的平台独立性。为了使图形用户界面能够在几个不同的平台上工作，Java 需要具备使用户界面适应不同主机操作系统的工具。

例如，各种平台的窗口、按钮和其他视觉组件的尺寸各不相同，因此绝对定位效果不佳。为了解决这个问题，Swing 使用[布局管理](http://java.sun.com/docs/books/tutorial/uiswing/layout/using.html "使用布局管理器")器（通常）使用相对定位将可视组件放置在屏幕上。

尽管为 Java 构建图形用户界面存在这些“限制”，但我认为使用非 Sun 资源和非 Java 特定资源提供的指南中的提示仍然是设计和实现用户界面的一个很好的信息来源这是有效的。毕竟，设计用户界面不是关于编程语言，而是更多关于人机交互。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T06:54:32.867

我认为没有其他完整的指导方针。但是如果你不是在谈论组件的间距/定位（我不认为外观设计指南的那部分已经过时），而只是关于外观和感觉良好的起点是 singlabx / swingx：

[http://swinglabs.org](http://swinglabs.org)

[http://swinglabs.org/docs/presentations/2007/DesktopMatters/FilthyRichClients.pdf](http://swinglabs.org/docs/presentations/2007/DesktopMatters/FilthyRichClients.pdf)

[http://parleys.com/display/PARLEYS/Home#slide=1;talk=7643;title=Filthy%20Rich%20Clients](http://parleys.com/display/PARLEYS/Home#slide=1;talk=7643;title=Filthy%20Rich%20Clients)

和 JGoodies：

[http://www.jgoodies.com/articles/index.html](http://www.jgoodies.com/articles/index.html)

[http://www.jgoodies.com/articles/efficient%20swing%20design.pdf](http://www.jgoodies.com/articles/efficient%20swing%20design.pdf)

# asp.net - 何时启用/禁用 Viewstate

> ID：113479
> 
> 赞同：17
> 
> 时间：2008-09-22T06:35:13.273
> 
> 标签：asp.net, web-user-controls

我通常禁用我的 ASP.net 控件的视图状态，除非我明确知道我将需要它们的视图状态。我发现这可以显着减小生成的 HTML 的页面大小。

这是好习惯吗？什么时候应该启用或禁用？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-22T06:57:12.690

是的，这是一个非常好的主意。有人可能会争辩说，微软应该默认禁用它，就像缓存一样。

要查看 Viewstate 在大小增加方面有多糟糕，您可以使用名为[Viewstate Analyzer](http://lab.aspitalia.com/26/ViewStateAnalyzer200.aspx#eng)的工具。当您有一个启用 Viewstate 开发的现有应用程序时，这特别有用。

禁用 Viewstate 的另一个很好的理由是，当您有大量依赖于它的组件时，很难在以后禁用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-22T06:37:36.433

我认为这是一个很好的做法。许多 ASP.NET 开发人员没有意识到他们的视图状态给发送到用户浏览器的 HTML 添加了巨大的包袱。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-22T07:06:23.213

您可能会发现MSDN 上的[“ASP.NET 状态管理建议”文章中包含的信息对您做出决定很有帮助。](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)

通常在 ASP.NET 2.0 及更高版本中，禁用 ViewState 的破坏性较小，因为引入了控制状态来存储引发事件等所需的信息。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T06:38:42.203

这是一个很好的做法。除非您在回发中使用 ViewState 值，或者某些复杂控件本身需要它们，否则最好将 ViewState 保存为将发送给客户端的内容的一部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T07:07:22.353

绝对是个好主意，没有比开发人员每次在 Page_Load 中绑定 dataGrid 的页面还要提交视图状态更糟糕的了！

如果您计划使用 AJAX 扩展中的 UpdatePanel，这也是一个非常好的主意，这意味着您在 UpdatePanel 请求期间提交的内容更少。

（不要因为说 UpdatePanel 很好：P）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T06:47:09.670

_Viewstate 会不必要地增加需要传输的字节数。因此，除非下次要使用数据，否则最好将其关闭。

# wordpress - 让 IIS6 与 WordPress 配合得很好

> ID：113489
> 
> 赞同：2
> 
> 时间：2008-09-22T06:40:21.387
> 
> 标签：wordpress, mod-rewrite, iis-6, permalinks

我有一个 WordPress 驱动的博客，我正试图在我们的 IIS6 服务器上进行设置，除了我非常头疼的永久链接结构之外，一切正常。

在谷歌搜索/wordpress codex 之后，我了解到这是因为 IIS6 没有与 Apache 的 mod_rewrite 等效的功能，这是该功能工作所必需的。这就是我现在所处的位置。如果没有“index.php/”，我似乎找不到功能性解决方案来让漂亮的永久链接工作，有人有什么建议吗？

我不能做的：

*   升级到 IIS7
*   切换到阿帕奇
*   辞掉我的工作

这些建议已经提供给我，但遗憾的是，我不能做任何这些。只是一个，仅供参考。

非常感谢任何可以引导我走向正确方向的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-24T18:23:54.423

我刚刚在另一个问题上遇到了以下答案： [搜索页面的漂亮网址](https://stackoverflow.com/questions/128796/pretty-urls-for-search-pages#128864)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-10-08T02:32:56.710

[IIRF](http://iirf.codeplex.com)为 IIS6 执行此操作。

自由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T07:06:26.287

我简要研究了这个主题，看来您需要一个额外的部分，称为*URL Rewrite (Go Live)*。

[这是一篇文章](http://learn.iis.net/page.aspx/466/enabling-pretty-permalinks-in-wordpress/)，将引导您了解如何使用它创建重写规则。他们还需要 IIS7，我不确定它是否真的很重要。但这可能是您必须注意的另一件事。

以防万一上述 URL 稍后失败，以下是 Wordpress 的示例重写规则：

```
<rewrite>
    <rules>
        <rule name="Main Rule" stopProcessing="true">
            <match url=".*" />
            <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            </conditions>
            <action type="Rewrite" url="index.php" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-22T21:00:58.517

我为我的 Wordpress 博客使用了一个共享的 IIS7 主机，所以我也没有安装 URL 重写模块的选项。经过一番搜索，我能想到的最佳解决方法是使用自定义 404 错误处理程序，它修复了一些服务器变量，然后将请求交给 index.php 进行处理。为了证明这确实有效，我将链接到我[博客](http://opmon.co.uk/blog/2009/06/06/wordpress-pretty-permalinks-on-shared-hosted-iis/)上的相关帖子:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-20T01:08:55.460

几天以来我一直在努力解决这个问题，在搜索了这么多东西后我得到了解决方案，现在我在我的自托管（IIS7 + windows Server）博客中有漂亮的永久链接。（先决条件：PHP5.0+ 版本和 FAST CGI SCRIPT - 不要使用 ISAPI 过滤器）

我已经制作了一个 web.config，您需要将该文件放在您的根目录中并完成。 [http://www.geekblogger.org/2010/03/how-to-set-pretty-permalinks-in.html](http://www.geekblogger.org/2010/03/how-to-set-pretty-permalinks-in.html)

# linux - Windows 性能计数器端口到 Linux、HP-UX 和 AIX

> ID：113498
> 
> 赞同：0
> 
> 时间：2008-09-22T06:46:41.480
> 
> 标签：linux, aix, performancecounter, hp-ux

我们实现了一个仅在 Windows 上可用的服务器应用程序。现在我们也喜欢将它移植到 Linux、HP-UX 和 AIX。此应用程序通过性能计数器将内部统计信息提供到 Windows 性能监视器中。

更准确地说：应用程序是一个数据库，我们喜欢向管理员提供连接用户数或执行请求数等信息。所以这些是我们应用程序专有的“新”信息。但我们希望它们在操作系统提供 CPU 等信息的相同环境中可用。目标是使它们易于管理员阅读。

Linux、HP-UX 和 AIX 下合适且常用的性能监视器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T15:27:45.643

Management is where most OSes depart from one another. For this reason there are not many tools that are common between all the OSes.

Additionally, Unix tools follow the single process single responsibility idiom where one tool gets cpu info, another gets memory etc.

The only tool i have seen in the Unix world that gets all this info in one place is top. Almost all sys admins are familiar with this tool and works on all the flavors of OSes you are interested in. It also has the additional advantage of being open source. You could simply extend this tool to expose the counters you are interested in and ship it along with your application.

Another way to do this might be to expose your counters through SNMP and leave it to some third party SNMP tool like HP open view that can collect and present a consistent view along with other management info. This might be a more enterprisy solution, which might appeal to the marketing folks.

I would also say its a good idea to write a standalone console tool that admins can use from their custom home grown scripts (there are many firsm out there with super human admins / over paid it staff that does this).

All together would be a healthy solution for your requirement i think.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T06:53:08.690

我会说：这取决于您要监控的性能。使用 CPU 时间？空闲内存？磁盘IO？冰箱里的啤酒数量...

但不管怎样，您都可以查看 /proc 下的任何文件。我不确定 HP，但至少 Linux 和 AIX 应该有那棵树（如果它在内核编译时没有被停用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-03T13:09:40.620

用于此类数据的最标准的 unix 工具是 *stat（iostat、vmstat、netstat）工具和 sar。在 Linux 上，您可以在 /proc 中找到所有这些信息，但大多数 Unix 没有 /proc 很好地填充您要查找的内容。上述工具非常标准化，可用于收集您需要的数据。

# delphi - 对已释放对象的错误引用

> ID：113504
> 
> 赞同：6
> 
> 时间：2008-09-22T06:49:24.720
> 
> 标签：delphi

有没有办法确保我们持有对一个对象的可用引用，即确保它尚未被释放，使非零引用悬空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T06:55:07.157

如果您使用 FastMM4 作为内存管理器，则可以检查该类是否不是**TFreeObject**。**或者，在更标准的情况下，使用一个例程，通过检查类 VMT**
来验证您的对象是它所说的那样。

 **这样的 ValidateObj 函数已经存在了一段时间（Ray Lischner 和 Hallvard Vassbotn：[http](http://hallvards.blogspot.com/2004/06/hack-6checking-for-valid-object.html) ://hallvards.blogspot.com/2004/06/hack-6checking-for-valid-object.html ）

这是另一个：

```
function ValidateObj(Obj: TObject): Pointer;
// see { Virtual method table entries } in System.pas
begin
  Result := Obj;
  if Assigned(Result) then
    try
      if Pointer(PPointer(Obj)^) <> Pointer(Pointer(Cardinal(PPointer(Obj)^) + Cardinal(vmtSelfPtr))^) then
        // object not valid anymore
        Result := nil;
    except
      Result := nil;
    end;
end; 
```

更新：有点谨慎......上述函数将确保结果为 nil 或有效的非 nil 对象。如果内存管理器已经重新分配了先前释放的内存，它不能保证 Obj 仍然是您认为的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T06:58:06.523

不。除非您使用引用计数或垃圾收集器之类的东西来确保在它们具有零引用之前不会释放任何对象。

如果您使用接口，Delphi 可以为您进行引用计数。当然 Delphi for .Net 有一个垃圾收集器。

如前所述，您可以使用 Delphi 或内存管理器内部的知识来检查有效的指针或对象，但它们并不是唯一可以为您提供指针的。因此，即使使用这些方法，您也无法涵盖所有​​指针。而且你的指针也有可能再次有效，但给了其他人。所以它不是你要找的指针。你的设计不应该依赖它们。使用工具来检测您所做的任何参考错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T06:59:18.860

标准，不...

这就是为什么 VCL 组件可以注册自己以收到有关对象销毁的通知，以便它们可以从内部组件列表中删除引用或只是重置它们的属性。

因此，如果您想确保没有任何无效的引用，他们有两个选择：

*   实现每个类都可以订阅的销毁通知处理程序。
*   以引用不通过不同对象传播的方式修复您的代码。例如，您只能通过另一个对象的属性提供对引用的访问。而不是复制对私有字段的引用，而是访问另一个对象的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T08:02:02.720

正如其他人所说，没有明确的方法，但是如果您管理得当，那么 FreeAndNil 例程将确保您的变量在不指向任何内容的情况下为零。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T11:50:00.893

无论如何，检查参考是否有效通常不是一个好主意。如果引用无效，您的程序将在使用无效引用的地方崩溃。否则，无效的引用可能会存活更长时间，调试变得更加困难。

以下是一些关于为什么最好在无效引用上崩溃的参考。（他们谈论 Win32 中的指针，但这些想法仍然相关）：

*   [IsBadXxxPtr 真的应该被称为 CrashProgramRandomly](http://blogs.msdn.com/oldnewthing/archive/2006/09/27/773741.aspx)
*   [我应该检查我的函数的参数吗？](http://blogs.msdn.com/larryosterman/archive/2004/05/18/134471.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T06:54:11.637

不幸的是，没有办法 100% 保证指向任何东西的指针仍然有效，除非精心编写正确的代码。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-11-10T15:26:40.607

使用接口引用（而不是对象引用）可以避免这些无效指针问题，因为您的代码中不再显式调用 Free。

# c# - 在控件中包含 WebService 引用

> ID：113507
> 
> 赞同：0
> 
> 时间：2008-09-22T06:52:21.983
> 
> 标签：c#, .net, javascript, ajax, web-services

我用 C# 编写了一个覆盖内置 DropDownList 控件的控件。为此，我需要包含一个 javascript 资源，我将其作为嵌入式资源包括在内，然后添加 `WebResource`属性，这很好。

但是，我还需要引用一个 web 服务，我通常会像这样将它包含在页面上的脚本管理器中

```
<asp:scriptmanager id="scriptmanager" runat="server">
<Services>
<asp:ServiceReference Path="~/Path/To/Service.asmx" />
</Services>
</asp:scriptmanager> 
```

有没有办法让页面在我创建的控件后面的代码中包含这个引用，类似于它包含嵌入的 javascript 文件的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-17T00:46:39.180

您可以在代码或控件的标记中添加 ScriptManagerProxy，并通过它添加服务引用。ScriptManagerProxy 中的设置在编译时与“真正的”ScriptManager 合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T07:02:29.150

如果您知道用户控件所在的页面，则可以从用户控件执行 ((PageName)this.Page).scriptmanager.Services.Add()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-10T23:45:17.263

您可以添加 javascript 来自己调用 web 服务：

Sys.Net.WebServiceProxy.invoke(url, methodName, useHttpGet, parameters, succeededCallback, failedCallback, userContext, timeOut);

[http://www.asp.net/AJAX/Documentation/Live/ClientReference/Sys.Net/WebServiceProxyClass/WebServiceProxyInvokeMethod.aspx](http://www.asp.net/AJAX/Documentation/Live/ClientReference/Sys.Net/WebServiceProxyClass/WebServiceProxyInvokeMethod.aspx)

这些文档适用于 asp.net Ajax 1.0，但它与 .net 3.5 相同。

# java - 集合的 hashCode 方法的最佳实现

> ID：113511
> 
> 赞同：315
> 
> 时间：2008-09-22T06:53:35.333
> 
> 标签：java, hash, equals, hashcode

我们如何决定`hashCode()`集合方法的最佳实现（假设 equals 方法已被正确覆盖）？

* * *

## 回答 #1

> 赞同：460
> 
> 时间：2008-09-22T07:22:13.707

最好的实现？这是一个难题，因为它取决于使用模式。

在*Josh Bloch*的 ***Effective Java***的第 8 条（第二版）中，几乎所有情况下都提出了合理的良好实现。最好的办法是在那里查找，因为作者在那里解释了为什么这种方法很好。

### 一个简短的版本

1.  创建一个`int result`并分配一个**非零**值。

2.  对于方法中测试的*每个字段* ，通过以下方式计算哈希码：`f``equals()``c`

    *   如果字段 f 是 a `boolean`：计算`(f ? 0 : 1)`；
    *   如果字段 f 是 a `byte`, `char`,`short`或`int`: 计算`(int)f`;
    *   如果字段 f 是 a `long`：计算`(int)(f ^ (f >>> 32))`；
    *   如果字段 f 是 a `float`：计算`Float.floatToIntBits(f)`；
    *   如果字段 f 是 a `double`：像每个 long 值一样计算`Double.doubleToLongBits(f)`和处理返回值；
    *   如果字段 f 是一个*对象*：使用`hashCode()`方法的结果或 0 if `f == null`;
    *   如果字段 f 是一个*数组*：将每个字段视为单独的元素，并以*递归方式*计算散列值，然后将这些值组合起来，如下所述。
3.  将哈希值`c`与`result`：

    ```
    result = 37 * result + c 
    ```

4.  返回`result`

对于大多数使用情况，这应该会导致哈希值的正确分布。

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2013-08-05T19:49:46.577

如果您对 dmeister 推荐的 Effective Java 实现感到满意，您可以使用库调用而不是自己滚动：

```
@Override
public int hashCode() {
    return Objects.hashCode(this.firstName, this.lastName);
} 
```

这需要 Guava ( `com.google.common.base.Objects.hashCode`) 或 Java 7 ( ) 中的标准库，`java.util.Objects.hash`但工作方式相同。

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2015-07-04T11:45:24.787

尽管这与[Github上的](https://github.com/ciscorucinski/HashcodeAndEqual/blob/master/src/io/github/ciscorucinski/hashcodeandequal/MyType.java)[`Android`文档（Wayback Machine）](http://web.archive.org/web/20150207205800/https://developer.android.com/reference/java/lang/Object.html)和我自己的代码相关联，但它通常适用于 Java。我的答案是[dmeister 的答案](https://stackoverflow.com/a/113600/2333021)的扩展，代码更易于阅读和理解。

```
@Override 
public int hashCode() {

    // Start with a non-zero constant. Prime is preferred
    int result = 17;

    // Include a hash for each field.

    // Primatives

    result = 31 * result + (booleanField ? 1 : 0);                   // 1 bit   » 32-bit

    result = 31 * result + byteField;                                // 8 bits  » 32-bit 
    result = 31 * result + charField;                                // 16 bits » 32-bit
    result = 31 * result + shortField;                               // 16 bits » 32-bit
    result = 31 * result + intField;                                 // 32 bits » 32-bit

    result = 31 * result + (int)(longField ^ (longField >>> 32));    // 64 bits » 32-bit

    result = 31 * result + Float.floatToIntBits(floatField);         // 32 bits » 32-bit

    long doubleFieldBits = Double.doubleToLongBits(doubleField);     // 64 bits (double) » 64-bit (long) » 32-bit (int)
    result = 31 * result + (int)(doubleFieldBits ^ (doubleFieldBits >>> 32));

    // Objects

    result = 31 * result + Arrays.hashCode(arrayField);              // var bits » 32-bit

    result = 31 * result + referenceField.hashCode();                // var bits » 32-bit (non-nullable)   
    result = 31 * result +                                           // var bits » 32-bit (nullable)   
        (nullableReferenceField == null
            ? 0
            : nullableReferenceField.hashCode());

    return result;

} 
```

**编辑**

通常，当您覆盖 时`hashcode(...)`，您还希望覆盖`equals(...)`。所以对于那些将要或已经实施的人`equals`，这里是[我的 Github](https://github.com/ciscorucinski/HashcodeAndEqual/blob/master/src/io/github/ciscorucinski/hashcodeandequal/MyType.java)的一个很好的参考...

```
@Override
public boolean equals(Object o) {

    // Optimization (not required).
    if (this == o) {
        return true;
    }

    // Return false if the other object has the wrong type, interface, or is null.
    if (!(o instanceof MyType)) {
        return false;
    }

    MyType lhs = (MyType) o; // lhs means "left hand side"

            // Primitive fields
    return     booleanField == lhs.booleanField
            && byteField    == lhs.byteField
            && charField    == lhs.charField
            && shortField   == lhs.shortField
            && intField     == lhs.intField
            && longField    == lhs.longField
            && floatField   == lhs.floatField
            && doubleField  == lhs.doubleField

            // Arrays

            && Arrays.equals(arrayField, lhs.arrayField)

            // Objects

            && referenceField.equals(lhs.referenceField)
            && (nullableReferenceField == null
                        ? lhs.nullableReferenceField == null
                        : nullableReferenceField.equals(lhs.nullableReferenceField));
} 
```

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2008-11-29T06:30:41.857

最好使用Eclipse提供的功能，它做得很好，你可以把你的精力和精力放在开发业务逻辑上。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-09-22T07:08:10.650

首先确保equals正确实现。来自[IBM DeveloperWorks 文章](http://www.ibm.com/developerworks/java/library/j-jtp05273.html#N10184)：

> *   对称性：对于两个引用，a 和 b，a.equals(b) 当且仅当 b.equals(a)
> *   自反性：对于所有非空引用，a.equals(a)
> *   传递性：如果 a.equals(b) 和 b.equals(c)，那么 a.equals(c)

然后确保他们与 hashCode 的关系尊重联系人（来自同一篇文章）：

> *   与 hashCode() 的一致性：两个相等的对象必须具有相同的 hashCode() 值

最后，一个好的散列函数应该努力接近[理想的散列函数](http://en.wikipedia.org/wiki/Hash_function#Properties)。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-09-22T08:47:44.763

about8.blogspot.com，你说

> 如果 equals() 对两个对象返回 true，则 hashCode() 应该返回相同的值。如果 equals() 返回 false，则 hashCode() 应该返回不同的值

我不能同意你的看法。如果两个对象具有相同的哈希码，则不一定意味着它们相等。

如果 A 等于 B 则 A.hashcode 必须等于 B.hascode

但

如果 A.hashcode 等于 B.hascode 这并不意味着 A 必须等于 B

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-22T08:35:40.657

[在Apache Commons Lang中有一个](https://commons.apache.org/proper/commons-lang/)*有效的 Java*`hashcode()`和`equals()`逻辑的良好实现。结帐[HashCodeBuilder](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/HashCodeBuilder.html)和[EqualsBuilder](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/EqualsBuilder.html)。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-09-22T12:50:22.217

如果你使用eclipse，你可以生成`equals()`和`hashCode()`使用：

> 源 -> 生成 hashCode() 和 equals()。

使用此功能，您可以决定要使用*哪些字段*进行相等和哈希码计算，Eclipse 会生成相应的方法。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-22T07:08:12.880

只是一个快速说明完成其他更详细的答案（在代码方面）：

如果我考虑[how-do-i-create-a-hash-table-in-java](https://stackoverflow.com/questions/29324/how-do-i-create-a-hash-table-in-java)这个问题，尤其是[jGuru FAQ entry](http://www.jguru.com/faq/view.jsp?EID=430247)，我相信可以判断哈希码的其他一些标准是：

*   同步（算法是否支持并发访问）？
*   失败安全迭代（算法是否检测到在迭代期间发生变化的集合）
*   空值（哈希码是否支持集合中的空值）

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-09-22T07:16:46.713

如果我正确理解了您的问题，那么您有一个自定义集合类（即从 Collection 接口扩展的新类）并且您想要实现 hashCode() 方法。

如果您的集合类扩展了 AbstractList，那么您不必担心它，已经有一个 equals() 和 hashCode() 的实现，它通过遍历所有对象并将它们的 hashCodes() 添加在一起来工作。

```
 public int hashCode() {
      int hashCode = 1;
      Iterator i = iterator();
      while (i.hasNext()) {
        Object obj = i.next();
        hashCode = 31*hashCode + (obj==null ? 0 : obj.hashCode());
      }
  return hashCode;
   } 
```

现在，如果您想要的是计算特定类的哈希码的最佳方法，我通常使用 ^（按位异或）运算符来处理我在 equals 方法中使用的所有字段：

```
public int hashCode(){
   return intMember ^ (stringField != null ? stringField.hashCode() : 0);
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-22T07:06:16.317

@about8：那里有一个非常严重的错误。

```
Zam obj1 = new Zam("foo", "bar", "baz");
Zam obj2 = new Zam("fo", "obar", "baz"); 
```

相同的哈希码

你可能想要类似的东西

```
public int hashCode() {
    return (getFoo().hashCode() + getBar().hashCode()).toString().hashCode(); 
```

（这些天你可以直接从 Java 中的 int 获取 hashCode 吗？我认为它会进行一些自动转换。如果是这种情况，请跳过 toString，它很难看。）

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-22T07:15:38.667

正如您特别要求收集的那样，我想添加其他答案尚未提及的一个方面： HashMap 不希望它们的键在添加到集合后更改其哈希码。会破坏整个目的......

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-22T10:16:12.383

[在 Apache Commons EqualsBuilder](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/EqualsBuilder.html)和[HashCodeBuilder](https://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/HashCodeBuilder.html)上使用反射方法。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-12-21T12:08:22.857

我使用了一个很小的包装器，[`Arrays.deepHashCode(...)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepHashCode(java.lang.Object[]))因为它可以正确处理作为参数提供的数组

```
public static int hash(final Object... objects) {
    return Arrays.deepHashCode(objects);
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-22T07:20:26.457

任何在可能范围内均匀分布散列值的散列方法都是一个很好的实现。查看有效的java（[http://books.google.com.au/books?id=ZZOiqZQIbRMC&dq=effective+java&pg=PP1&ots=UZMZ2siN25&sig=kR0n73DHJOn-D77qGj0wOxAxiZw&hl=en&sa=X&oi=book_result&resnum=1&ct=result](http://books.google.com.au/books?id=ZZOiqZQIbRMC&dq=effective+java&pg=PP1&ots=UZMZ2siN25&sig=kR0n73DHJOn-D77qGj0wOxAxiZw&hl=en&sa=X&oi=book_result&resnum=1&ct=result)），有一个很好的提示在那里用于实现哈希码（我认为是第 9 项......）。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-22T08:51:42.773

*我更喜欢使用来自类 Objects 的 Google Collections lib*中的实用方法，这有助于我保持代码整洁。很多时候`equals`，`hashcode`方法是由 IDE 的模板制作的，所以它们读起来不干净。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-12-30T13:18:51.963

这是另一个包含超类逻辑的 JDK 1.7+ 方法演示。我认为它非常方便使用 Object class hashCode() 计算，纯 JDK 依赖并且没有额外的手动工作。请注意`Objects.hash()`是零容忍的。

我没有包括任何`equals()`实现，但实际上你当然会需要它。

```
import java.util.Objects;

public class Demo {

    public static class A {

        private final String param1;

        public A(final String param1) {
            this.param1 = param1;
        }

        @Override
        public int hashCode() {
            return Objects.hash(
                super.hashCode(),
                this.param1);
        }

    }

    public static class B extends A {

        private final String param2;
        private final String param3;

        public B(
            final String param1,
            final String param2,
            final String param3) {

            super(param1);
            this.param2 = param2;
            this.param3 = param3;
        }

        @Override
        public final int hashCode() {
            return Objects.hash(
                super.hashCode(),
                this.param2,
                this.param3);
        }
    }

    public static void main(String [] args) {

        A a = new A("A");
        B b = new B("A", "B", "C");

        System.out.println("A: " + a.hashCode());
        System.out.println("B: " + b.hashCode());
    }

} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-12-10T18:02:05.143

标准实现很弱，使用它会导致不必要的冲突。想象一个

```
class ListPair {
    List<Integer> first;
    List<Integer> second;

    ListPair(List<Integer> first, List<Integer> second) {
        this.first = first;
        this.second = second;
    }

    public int hashCode() {
        return Objects.hashCode(first, second);
    }

    ...
} 
```

现在，

```
new ListPair(List.of(a), List.of(b, c)) 
```

和

```
new ListPair(List.of(b), List.of(a, c)) 
```

具有相同的`hashCode`，即`31*(a+b) + c`用于`List.hashCode`在这里重用的乘数。显然，碰撞是不可避免的，但产生不必要的碰撞只是......不必要的。

使用`31`. 乘数必须为奇数以避免丢失信息（任何偶数乘数至少会丢失最高有效位，四的倍数会丢失二，等等）。任何奇数乘数都是可用的。小的乘法器可能会导致更快的计算（JIT 可以使用移位和加法），但考虑到乘法在现代 Intel/AMD 上只有三个周期的延迟，这无关紧要。小的乘数也会导致小输入的更多冲突，这有时可能是一个问题。

使用素数是没有意义的，因为素数在环 Z/(2**32) 中没有意义。

所以，我建议使用随机选择的大奇数（随意取质数）。由于 i86/amd64 CPU 可以对适合单个有符号字节的操作数使用更短的指令，因此对于像 109 这样的乘法器有微小的速度优势。为了最大限度地减少冲突，请使用 0x58a54cf5 之类的东西。

在不同的地方使用不同的乘数是有帮助的，但可能不足以证明额外的工作是合理的。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-10-03T15:18:13.507

在组合哈希值时，我通常使用 boost c++ 库中使用的组合方法，即：

```
seed ^= hasher(v) + 0x9e3779b9 + (seed<<6) + (seed>>2); 
```

这在确保均匀分布方面做得相当好。有关此公式如何工作的一些讨论，请参阅 StackOverflow 帖子：[Boost::hash_combine 中的魔数](https://stackoverflow.com/questions/4948780/magic-numbers-in-boosthash-combine)

在以下位置对不同的哈希函数进行了很好的讨论：http: [//burtleburtle.net/bob/hash/doobs.html](http://burtleburtle.net/bob/hash/doobs.html)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2008-09-22T07:00:54.427

对于一个简单的类，通常最容易实现 hashCode() 基于由 equals() 实现检查的类字段。

```
public class Zam {
    private String foo;
    private String bar;
    private String somethingElse;

    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }

        if (obj == null) {
            return false;
        }

        if (getClass() != obj.getClass()) {
            return false;
        }

        Zam otherObj = (Zam)obj;

        if ((getFoo() == null && otherObj.getFoo() == null) || (getFoo() != null && getFoo().equals(otherObj.getFoo()))) {
            if ((getBar() == null && otherObj. getBar() == null) || (getBar() != null && getBar().equals(otherObj. getBar()))) {
                return true;
            }
        }

        return false;
    }

    public int hashCode() {
        return (getFoo() + getBar()).hashCode();
    }

    public String getFoo() {
        return foo;
    }

    public String getBar() {
        return bar;
    }
} 
```

最重要的是保持 hashCode() 和 equals() 一致：如果 equals() 对两个对象返回 true，则 hashCode() 应该返回相同的值。如果 equals() 返回 false，则 hashCode() 应该返回不同的值。

# security - 存储社会安全/保险号码 (SSN/SIN) 的潜在法律问题？

> ID：113526
> 
> 赞同：7
> 
> 时间：2008-09-22T06:59:12.963
> 
> 标签：security

使用我们系统的客户要求我们将最终用户的 SSN/SIN 存储在我们的数据库中。目前，我们存储有关用户的最少信息（姓名、电子邮件地址和可选的国家/地区），所以我并不太担心安全漏洞 - 但是，我怀疑存储 SSN 可能存在法律问题而不是“适当的”措施来保护他们（来自澳大利亚，这是我第一次遇到他们）。这是一个有效的担忧吗？

我还在关于 SIN（加拿大相当于 SSN）的 Wikipedia 页面上读到，它只应在绝对必要时使用，绝对不应用作通用标识符或类似标识符。

那么，这类事情是否存在任何潜在的法律问题？你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T07:23:22.440

基线建议将是：

*   在用户使用您的站点/应用程序之前，通知他们您正在存储他们的 SSN。**由于该请求似乎是在*事后*收集信息，因此用户应该有办法在登录之前或在输入 SSN 之前选择退出您的系统。**
*   发出法律保证，您不会提供、出售或以其他方式分发上述信息（当然还有他们的其他个人信息）
*   让他们选中一个复选框，说明他们了解您确实在存储他们的 SSN

但最重要的部分可能是：

*   聘请精通网络法律事务的律师

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T10:33:41.950

关于 SSN 的有趣之处……创建它们的法律也明确定义了它们的用途（基本上是税务记录、退休福利等）以及它们不允许用于什么 - 其他一切。

因此，银行要求您的 SSN 开立支票账户，您的 ISP 要求您提供高速互联网接入，航空公司在允许您上飞机之前要求它，您当地的杂货店/酒吧保留您的 SSN 存储的标签 - 那都是*非法*的。令人震惊，不是吗...
关于身份盗窃的所有喧嚣，以及由于一个单一的、不受保护的“秘密”可以“唯一”识别您的身份（更不用说它有时用作**身份验证**）是多么容易- 不应该成为可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T07:49:48.273

这里已经说明了一些好的警告。

我只想补充一点，说到 SIN（加拿大的社会保险号）代码，我相信 SIN 和 SSN 之间可能会发生冲突（换句话说，相同的号码，但两个不同的人/国家）。这不应该是一个惊喜，因为这些是单独的编码系统，但我可以想象一些做数据输入的人可能倾向于将 SIN 粘贴到 SSN 字段中，反之亦然（想想大学/大学的国际学生作为一个例子- 一位 DBA 朋友告诉我，他看到了这种情况）。

给定的信息系统可能被设计为不允许重复，无论哪种方式，您都可以看到为什么可能存在混淆和数据完整性问题（使用 SSN 列作为唯一键？嗯）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T07:14:11.807

尽管有据可查的问题，美国有太多的组织使用 SSN 作为人们的唯一标识符。除非您的应用程序实际上与政府福利有关，否则您没有充分的理由存储 SSns。

鉴于如此多的组织（错误）使用它们来识别诸如信用检查之类的人，你真的需要小心它们。仅凭某人的姓名、地址和 SSN，就很容易以他们的名义获得信用，并[窃取他们的身份](http://en.wikipedia.org/wiki/Social_security_number#Identity_theft)。

法律问题类似于因泄露任何包含 SSN 的个人信息而被起诉而被遗忘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T07:24:16.150

如果是我，我会像瘟疫一样避开它们，或者想出一些非常安全的方法来存储它们。另外（在任何程度上都不是法律专家，但是..）如果您可以在某处写下任何内容，您将不承担任何责任。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-29T19:21:26.763

至少，您要确保 SSN 在没有任何保护的情况下永远不会通过电子邮件发送。我认为 Excel 中内置的“打开密码”在法律上就足够了。我认为电子邮件是最薄弱的环节，至少在我的行业中是这样。

时不时会出现“笔记本电脑被盗：数以千计的 SSN 可能遭到破坏”的新闻。我非常担心它可能是我的笔记本电脑。我将所有包含 SSN 的文件放在受 PGP 保护的虚拟驱动器中。

你的数据库确实有很好的安全性，不是吗？如果不是，为什么不呢？

# sql-server - 在 Web 服务器上运行 SQL Server

> ID：113531
> 
> 赞同：4
> 
> 时间：2008-09-22T07:01:18.780
> 
> 标签：sql-server, optimization, webserver

在您的网络服务器上运行 SQL Server 是好、坏还是无关紧要？

我使用的是 Server 2008 和 SQL Server 2005，但我认为这对这个问题并不重要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-22T07:13:23.743

对于小型网站，这并没有什么区别。但是，随着负载的增加，它的扩展性真的很差，而且比你想象的要快：

*   数据库服务器是在它们“拥有”服务器的前提下构建的。他们用内存换取速度，并且很容易将所有可用的 RAM 用于内部缓存。
*   一旦资源开始变得稀缺，分析就变得非常困难——很明显 IIS 和 SQL 都在受苦，不太清楚瓶颈在哪里。IIS 需要 CPU，SQL Server 需要 RAM 或 CPU 等
*   无论您在代码中放置多少层，它们都在同一个 CPU 上运行，因此单层应用程序在这种情况下会运行得更好——开销更少——但它不会扩展。
*   安全性真的很差，通常你将 SQL 隔离在防火墙后面！

如果你能负担得起，花几块钱买第二台服务器可能会更好，也许使用 PostgreSQL。由于许可成本，一台 IIS 服务器和一台 PostgreSQL 的成本与 IIS + SQL Server 的成本差不多……

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-23T14:29:20.550

较大的商店可能不会认为这是最佳实践……但是，如果您不处理每秒数百个请求，则可以将它们放在一个盒子上。

事实上，对于小型应用程序，您会在后端看到更好的性能，因为数据不必通过网络传输。一切都与规模有关。

请记住，数据库服务器会消耗内存。这是硬敲学校的一个重要教训：**如果您决定在与您的 Web 服务器相同的机器上运行 SQL Server 2005（这就是您在问题中提到的设置），请确保您进入 Sql Server Management Studio 并这样做**：

1.  右键单击服务器实例，然后单击属性
2.  从左侧列表中选择“内存”
3.  将“最大服务器内存”更改为您的服务器可以承受的值。

如果您不这样做，SQL Server 最终将占用您服务器的所有 RAM 并无限期地挂起。这将导致您的服务器或多或少地溅射和死亡。如果您不知道这一点，排除故障可能会*非常令人沮丧*。

我已经这样做了好几次了。如果您拥有大型公司的基础设施并且无法扩展，那么您不会这样做，但这对很多事情都很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-22T07:03:20.177

这真的取决于你的网络服务器和你的 sql 服务器正在做多少工作。

如果没有更多信息，我怀疑你会得到任何有用的答案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T14:52:25.760

如果您的 Web 服务器是可公开访问的，那么从安全角度来看，这是一个非常糟糕的主意。

尽管从路由、防火墙、端口、身份验证等角度来看，它使很多事情变得更加困难，但分离是好的。当您的数据库服务器在 Web 服务器上运行时，如果您的 Web 服务器受到威胁，那么您的 sql 服务器也会受到威胁。

当您将它们放在单独的盒子上时，您已经提高了一点。

要保护您的 Web 服务器和数据库服务器，还有很多工作要做，但为什么要让它变得比需要的更容易呢？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T08:44:57.733

我会说最好在同一台服务器上运行它们，直到它成为一个问题。这样一来，您就可以为自己节省一些金钱和时间。一旦该站点成功并需要进行一些架构更改，它应该已经为自己付出了代价。

记得备份:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T07:04:00.113

这将取决于服务器的预期负载。对于小型站点，完全没有问题（如果配置正确）。对于大型站点，您可能需要考虑将负载分布在不同的服务器上：Web 服务器、文件服务器、数据库服务器等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-11-06T16:50:32.707

我一遍又一遍地看到这个问题。正确的答案是将 SQL Server 放在一台机器上，将 IIS（Web 服务器）放在另一台机器上。您的钱将用于 SQL Server 机器，因为必须购买正确的驱动器系统和 RAM 以支持高效的服务器，但 Web 服务器可以是一个大大缩小且价格更便宜的机器，只需一个镜像驱动器集。

# python - Python中是否有一个函数可以在不忽略空格的情况下拆分字符串？

> ID：113534
> 
> 赞同：12
> 
> 时间：2008-09-22T07:02:04.830
> 
> 标签：python, split

Python中是否有一个函数可以在不忽略结果列表中的空格的情况下拆分字符串？

例如：

```
s="This is the string I want to split".split() 
```

给我

```
>>> s
['This', 'is', 'the', 'string', 'I', 'want', 'to', 'split'] 
```

我想要类似的东西

```
['This',' ','is',' ', 'the',' ','string', ' ', .....] 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-09-22T07:08:04.677

```
>>> import re
>>> re.split(r"(\s+)", "This is the string I want to split")
['This', ' ', 'is', ' ', 'the', ' ', 'string', ' ', 'I', ' ', 'want', ' ', 'to', ' ', 'split'] 
```

在 re.split() 中使用捕获括号会导致函数也返回分隔符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T07:08:59.463

我认为标准库中没有一个函数可以自行完成，但是“分区”很接近

最好的方法可能是使用正则表达式（这就是我在任何语言中的做法！）

```
import re
print re.split(r"(\s+)", "Your string here") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T18:34:12.157

愚蠢的回答只是为了它：

```
mystring.replace(" ","! !").split("!") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T07:07:58.357

你想要做的最困难的部分是你没有给它一个可以分裂的角色。split() 在您提供给它的字符上分解一个字符串，并删除该字符。

也许这可能会有所帮助：

```
s = "String to split"
mylist = []
for item in s.split():
    mylist.append(item)
    mylist.append(' ')
mylist = mylist[:-1] 
```

凌乱，但它会为你做的伎俩......

# windows - 如何使用 PowerShell 卸载应用程序？

> ID：113542
> 
> 赞同：140
> 
> 时间：2008-09-22T07:04:06.977
> 
> 标签：windows, powershell, windows-installer, uninstallation

有没有一种简单的方法可以使用 PowerShell连接到标准的“**添加或删除程序”功能来****卸载现有的应用程序**？或者检查应用程序是否已安装？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2008-09-22T07:17:01.330

```
$app = Get-WmiObject -Class Win32_Product | Where-Object { 
    $_.Name -match "Software Name" 
}

$app.Uninstall() 
```

**编辑：** Rob 找到了另一种使用 Filter 参数的方法：

```
$app = Get-WmiObject -Class Win32_Product `
                     -Filter "Name = 'Software Name'" 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-08-28T10:26:37.743

编辑：多年来，这个答案得到了相当多的支持。我想补充一些意见。从那以后我就没有使用过 PowerShell，但我记得观察到一些问题：

1.  如果以下脚本的匹配项多于 1，则它不起作用，您必须附加将结果限制为 1 的 PowerShell 过滤器。我相信是这样，`-First 1`但我不确定。随意编辑。
2.  如果应用程序不是由 MSI 安装的，它就不起作用。之所以写如下，是因为它修改了 MSI 以在没有干预的情况下进行卸载，这在使用本机卸载字符串时并不总是默认情况。

* * *

使用 WMI 对象需要很长时间。如果您只知道要卸载的程序的名称，这将非常快。

```
$uninstall32 = gci "HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall" | foreach { gp $_.PSPath } | ? { $_ -match "SOFTWARE NAME" } | select UninstallString
$uninstall64 = gci "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall" | foreach { gp $_.PSPath } | ? { $_ -match "SOFTWARE NAME" } | select UninstallString

if ($uninstall64) {
$uninstall64 = $uninstall64.UninstallString -Replace "msiexec.exe","" -Replace "/I","" -Replace "/X",""
$uninstall64 = $uninstall64.Trim()
Write "Uninstalling..."
start-process "msiexec.exe" -arg "/X $uninstall64 /qb" -Wait}
if ($uninstall32) {
$uninstall32 = $uninstall32.UninstallString -Replace "msiexec.exe","" -Replace "/I","" -Replace "/X",""
$uninstall32 = $uninstall32.Trim()
Write "Uninstalling..."
start-process "msiexec.exe" -arg "/X $uninstall32 /qb" -Wait} 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2009-01-29T07:02:12.450

要修复 Jeff Hillman 帖子中的第二种方法，您可以执行以下操作：

```
$app = Get-WmiObject 
            -Query "SELECT * FROM Win32_Product WHERE Name = 'Software Name'" 
```

或者

```
$app = Get-WmiObject -Class Win32_Product `
                     -Filter "Name = 'Software Name'" 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-02-23T08:54:45.350

一行代码：

```
get-package *notepad* |% { & $_.Meta.Attributes["UninstallString"]} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-10-10T23:13:35.497

```
function Uninstall-App {
    Write-Output "Uninstalling $($args[0])"
    foreach($obj in Get-ChildItem "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall") {
        $dname = $obj.GetValue("DisplayName")
        if ($dname -contains $args[0]) {
            $uninstString = $obj.GetValue("UninstallString")
            foreach ($line in $uninstString) {
                $found = $line -match '(\{.+\}).*'
                If ($found) {
                    $appid = $matches[1]
                    Write-Output $appid
                    start-process "msiexec.exe" -arg "/X $appid /qb" -Wait
                }
            }
        }
    }
} 
```

这样称呼它：

```
Uninstall-App "Autodesk Revit DB Link 2019" 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-05-21T20:37:11.597

为了给这篇文章添加一点内容，我需要能够从多个服务器中删除软件。我用杰夫的回答引导我这样做：

首先，我得到了一个服务器列表，我使用了[AD](http://en.wikipedia.org/wiki/Active_Directory)查询，但是您可以根据需要提供计算机名称数组：

```
$computers = @("computer1", "computer2", "computer3") 
```

然后我遍历它们，将 -computer 参数添加到 gwmi 查询中：

```
foreach($server in $computers){
    $app = Get-WmiObject -Class Win32_Product -computer $server | Where-Object {
        $_.IdentifyingNumber -match "5A5F312145AE-0252130-432C34-9D89-1"
    }
    $app.Uninstall()
} 
```

我使用了 IdentificationingNumber 属性而不是名称来匹配，只是为了确保我卸载了正确的应用程序。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-08-22T14:22:04.237

我发现不推荐使用 Win32_Product 类，因为它会触发修复并且未优化查询。[来源](http://blogs.technet.com/b/heyscriptingguy/archive/2011/11/13/use-powershell-to-quickly-find-installed-software.aspx)

如果您知道应用程序 guid，我从 Sitaram Pamarthi 找到了这篇带有卸载脚本的[帖子。](http://techibee.com/powershell/powershell-uninstall-software-on-remote-computer/1400)[他还提供了另一个脚本来](http://techibee.com/powershell/powershell-script-to-query-softwares-installed-on-remote-computer/1389)快速搜索应用程序。

> 像这样使用：.\uninstall.ps1 -GUID {C9E7751E-88ED-36CF-B610-71A1D262E906}

```
[cmdletbinding()]            

param (            

 [parameter(ValueFromPipeline=$true,ValueFromPipelineByPropertyName=$true)]
 [string]$ComputerName = $env:computername,
 [parameter(ValueFromPipeline=$true,ValueFromPipelineByPropertyName=$true,Mandatory=$true)]
 [string]$AppGUID
)            

 try {
  $returnval = ([WMICLASS]"\\$computerName\ROOT\CIMV2:win32_process").Create("msiexec `/x$AppGUID `/norestart `/qn")
 } catch {
  write-error "Failed to trigger the uninstallation. Review the error message"
  $_
  exit
 }
 switch ($($returnval.returnvalue)){
  0 { "Uninstallation command triggered successfully" }
  2 { "You don't have sufficient permissions to trigger the command on $Computer" }
  3 { "You don't have sufficient permissions to trigger the command on $Computer" }
  8 { "An unknown error has occurred" }
  9 { "Path Not Found" }
  9 { "Invalid Parameter"}
 } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-03T04:09:11.053

我会做出自己的一点贡献。我需要从同一台计算机上删除一个包列表。这是我想出的脚本。

```
$packages = @("package1", "package2", "package3")
foreach($package in $packages){
  $app = Get-WmiObject -Class Win32_Product | Where-Object {
    $_.Name -match "$package"
  }
  $app.Uninstall()
} 
```

我希望这被证明是有用的。

请注意，我欠 David Stetler 这个脚本的功劳，因为它是基于他的。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-13T12:32:29.723

这是使用 msiexec 的 PowerShell 脚本：

```
echo "Getting product code"
$ProductCode = Get-WmiObject win32_product -Filter "Name='Name of my Software in Add Remove Program Window'" | Select-Object -Expand IdentifyingNumber
echo "removing Product"
# Out-Null argument is just for keeping the power shell command window waiting for msiexec command to finish else it moves to execute the next echo command
& msiexec /x $ProductCode | Out-Null
echo "uninstallation finished" 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-11-02T23:08:52.057

根据杰夫希尔曼的回答：

这是您可以添加到`profile.ps1`当前 PowerShell 会话或在当前 PowerShell 会话中定义的函数：

```
# Uninstall a Windows program
function uninstall($programName)
{
    $app = Get-WmiObject -Class Win32_Product -Filter ("Name = '" + $programName + "'")
    if($app -ne $null)
    {
        $app.Uninstall()
    }
    else {
        echo ("Could not find program '" + $programName + "'")
    }
} 
```

假设您想卸载[Notepad++](http://en.wikipedia.org/wiki/Notepad%2B%2B)。只需在 PowerShell 中输入：

`> uninstall("notepad++")`

请注意，这`Get-WmiObject`可能需要一些时间，所以请耐心等待！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-12T13:45:10.617

采用：

```
function remove-HSsoftware{
[cmdletbinding()]
param(
[parameter(Mandatory=$true,
ValuefromPipeline = $true,
HelpMessage="IdentifyingNumber can be retrieved with `"get-wmiobject -class win32_product`"")]
[ValidatePattern('{[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}}')]
[string[]]$ids,
[parameter(Mandatory=$false,
            ValuefromPipeline=$true,
            ValueFromPipelineByPropertyName=$true,
            HelpMessage="Computer name or IP adress to query via WMI")]
[Alias('hostname,CN,computername')]
[string[]]$computers
)
begin {}
process{
    if($computers -eq $null){
    $computers = Get-ADComputer -Filter * | Select dnshostname |%{$_.dnshostname}
    }
    foreach($computer in $computers){
        foreach($id in $ids){
            write-host "Trying to uninstall sofware with ID ", "$id", "from computer ", "$computer"
            $app = Get-WmiObject -class Win32_Product -Computername "$computer" -Filter "IdentifyingNumber = '$id'"
            $app | Remove-WmiObject

        }
    }
}
end{}}
 remove-hssoftware -ids "{8C299CF3-E529-414E-AKD8-68C23BA4CBE8}","{5A9C53A5-FF48-497D-AB86-1F6418B569B9}","{62092246-CFA2-4452-BEDB-62AC4BCE6C26}" 
```

它没有经过全面测试，但它在 PowerShell 4 下运行。

我已经运行了这里看到的 PS1 文件。让它从[AD](http://en.wikipedia.org/wiki/Active_Directory)中检索所有系统并尝试卸载所有系统上的多个应用程序。

我使用了 IdentificationNumber 来搜索 David Stetler 输入的软件原因。

未测试：

1.  不在脚本中的函数调用中添加 id，而是使用参数 ID 启动脚本
2.  调用具有超过 1 个计算机名称的脚本**不会**自动从函数中检索
3.  从管道中检索数据
4.  使用 IP 地址连接到系统

它没有什么：

1.  如果在任何给定系统上确实找到了该软件，它不会提供任何信息。
2.  它不提供有关卸载失败或成功的任何信息。

我无法使用卸载（）。尝试我得到一个错误，告诉我为具有 NULL 值的表达式调用方法是不可能的。相反，我使用了 Remove-WmiObject，它似乎完成了同样的工作。

**注意**：如果没有给出计算机名称，它会从Active Directory 中的**所有**系统中删除该软件。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-26T07:48:44.293

对于我的大多数程序，这篇文章中的脚本都可以完成这项工作。但是我不得不面对一个无法使用 msiexec.exe 或 Win32_Product 类删除的遗留程序。（由于某种原因，我得到了 exit 0 但程序仍然存在）

我的解决方案是使用 Win32_Process 类：

[在nickdnk](https://stackoverflow.com/users/1650180/nickdnk)的帮助下，此命令用于获取卸载 exe 文件路径：

64位：

```
[array]$unInstallPathReg= gci "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall" | foreach { gp $_.PSPath } | ? { $_ -match $programName } | select UninstallString 
```

32位：

```
 [array]$unInstallPathReg= gci "HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall" | foreach { gp $_.PSPath } | ? { $_ -match $programName } | select UninstallString 
```

您将不得不清理结果字符串：

```
$uninstallPath = $unInstallPathReg[0].UninstallString
$uninstallPath = $uninstallPath -Replace "msiexec.exe","" -Replace "/I","" -Replace "/X",""
$uninstallPath = $uninstallPath .Trim() 
```

现在当你有相关**程序卸载 exe 文件路径**时，你可以使用这个命令：

```
$uninstallResult = (Get-WMIObject -List -Verbose | Where-Object {$_.Name -eq "Win32_Process"}).InvokeMethod("Create","$unInstallPath") 
```

> $uninstallResult - 将有退出代码。0是成功

上述命令也可以远程运行 - 我使用调用命令完成了它，但我相信添加参数 -computername 可以工作

# php - 基于角色的访问控制

> ID：113543
> 
> 赞同：26
> 
> 时间：2008-09-22T07:04:12.033
> 
> 标签：php, codeigniter, access-control

是否有任何开源的、`PHP based`基于角色的访问控制系统可用于`CodeIgniter`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-01-24T20:14:36.373

也许我误解了这个问题，但基于角色的访问控制 (RBAC) 的重点不就是*避免*访问控制列表 (ACL) 吗？

> ***RBAC 与访问控制列表 (ACL)** (...) 的不同之处在于，它将权限分配给在组织中有意义的特定操作，而不是分配给低级数据对象。例如，访问控制列表可用于授予或拒绝对特定系统文件的写访问权限，但它不会说明可以以何种方式更改该文件。在基于 RBAC 的系统中，操作可能是在金融应用程序中创建“信用账户”交易 (...)。分配执行特定操作的权限是有意义的，因为这些操作是细粒度的，并且它们本身在应用程序中具有意义。* （引用：[维基百科](http://en.wikipedia.org/wiki/Role-based_access_control)）

我不知道 Zend_ACL 或提到的其他实现的细节，但如果它们是基于 ACL 的，我不建议将它们用于基于角色的授权。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-22T07:23:25.730

Brandon Savage 介绍了他的 PHP 包“ [ApplicationACL](http://www.brandonsavage.net/projects.php) ”，它可能会也可能不会完成基于角色的访问。[PHPGACL](http://phpgacl.sourceforge.net/)可能也可以，但我不能肯定地告诉你。

然而，我可以告诉您的是，Zend 框架的[Zend_ACL](http://framework.zend.com/manual/en/zend.acl.html)组件将执行基于角色的设置（但是您必须进行子类化才能同时检查多个角色）。当然，这样做的痛苦是您必须从整体下载（或 SVN 结帐）中提取 Zend_ACL，我不相信它有任何外部依赖项。

Zend_ACL 的好处在于它与存储无关。您可以每次都重新构建它，也可以将其设计为序列化（我将两者结合使用，为缓存序列化并从数据库重新构建）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T13:27:32.980

[我创建了一个名为PHP-Bouncer](https://github.com/brennydoogles/php-bouncer)的开源项目，您可能会感兴趣。它还很年轻，但运行良好且易于配置。我最终开发了它，因为现有的解决方案似乎都不能满足我的需求。我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T07:20:12.493

phpgacl [http://phpgacl.sourceforge.net/](http://phpgacl.sourceforge.net/)是一个通用的基于acl的访问控制框架

虽然我不知道任何 CI 特定实现，但我知道您只需要主类文件即可使 phpgacl 工作。所以我相信与 CI 的集成不会有任何问题。（我曾与 CI 合作过）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-30T22:42:48.600

这是我发现的两个 PHP RBAC 库：

*   [https://github.com/leighmacdonald/php_rbac](https://github.com/leighmacdonald/php_rbac)
*   [https://github.com/brandonlamb/php-rbac](https://github.com/brandonlamb/php-rbac)

我实际上在 PolyAuth 中使用了第一个：[https ://github.com/Polycademy/PolyAuth/](https://github.com/Polycademy/PolyAuth/)

它是一个功能齐全的身份验证库，包括 NIST 1 级 RBAC。是的，RBAC 与 ACL 不同。我也使用 Codeigniter，您所要做的就是使用 PDO 驱动程序并传入连接 ID。请参阅本教程了解如何做到这一点：[http ://codebyjeff.com/blog/2013/03/codeigniter-with-pdo](http://codebyjeff.com/blog/2013/03/codeigniter-with-pdo)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-23T08:42:49.137

发现了关于 Khaos ACL 这是一个 CI 库...我也在检查 phpgacl 以及如何将它用于 CI...还没有检查 Zend ACL。但也许它可以“移植”到 CI

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-18T08:16:49.540

试试 CodeIgniter 的 DX_Auth 插件。我正在研究 DX_Auth 具有的类似（而不是超集）功能。我的 CI 插件集包括菜单显示（可以通过 CSS 控制）、在调用控制器之前基于角色的访问控制和其他功能。我希望尽快发布它。当我这样做时会给出项目 URL

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-09-14T16:36:36.263

RBAC != ACL - Roland 有这个问题的唯一正确答案。

顺便说一句，当然它是实现任何类型的权限系统的框架的重要组成部分——至少使用框架没有意义，如果它没有给你一个设计良好的 RBAC 系统——使用简单的模板可能会更好然后使用任何 ORM 层的系统。

这是 php 世界中常见的反模式，像 Ruby 或 Django 这样的框架被“克隆”只是作为这些现代框架提供的一个子集 - 作为一个典型的综合症，你会看到这些框架中缺乏良好的 ACL 或 RBAC 集成 - 什么本质上是一个笑话。目前只有 Yii PHP 框架带有一个不错的 RBAC 实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-08-05T06:05:35.973

~~[http://www.jframework.info](http://www.jframework.info)~~（死链接）

jFramework 有一个标准的 NIST 2 级 RBAC，具有增强功能，据说是最快的（包括基准测试）它可以在单个 SQLite 数据库文件上运行并经过彻底测试，就像手套一样工作。

依赖于 jFramework DBAL，但您可以简单地将代码中的 DBAL SQL 查询替换为您想要的 DBAL，当然您可以以 SOP 方式使用 jFramework。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-28T13:32:30.427

我知道这条路很冷，但是突然出现了一个新项目：

PHP-RBAC 是 PHP Hierarchical NIST Level 2 标准基于角色的访问控制，非常成熟。它也是一个 OWASP 项目。

我希望你喜欢它在[http://phprbac.net](http://phprbac.net)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-08-01T18:54:00.183

Ion Auth Library 使用用户和组 - [https://github.com/benedmunds/CodeIgniter-Ion-Auth](https://github.com/benedmunds/CodeIgniter-Ion-Auth) 但没有可用的 RBAC 系统来使用和管理它们。但是你可以把你的函数变白。

# iphone - 在 Windows 上开发 iPhone

> ID：113547
> 
> 赞同：228
> 
> 时间：2008-09-22T07:05:42.340
> 
> 标签：iphone, windows, ios

> **可能重复：**
> [如何使用 Windows 开发机器为 iPhone 开发？](https://stackoverflow.com/questions/22358/how-can-i-develop-for-iphone-using-a-windows-development-machine)

有没有办法在 Windows 上开发 iPhone (iOS) 应用程序？我真的不想再买一台机器了。

[http://code.google.com/p/winchain/wiki/HowToUse](http://code.google.com/p/winchain/wiki/HowToUse)上有一个项目似乎适用于 iPhone 1.0，但在 iPhone 2.0 上的成功有限，而且它需要所有[Cygwin](http://en.wikipedia.org/wiki/Cygwin)的疯狂。

还有什么，或者我必须买一台Mac吗？

# linux - Vmware 服务器的最佳 Linux 发行版是什么？

> ID：113561
> 
> 赞同：-1
> 
> 时间：2008-09-22T07:09:30.443
> 
> 标签：linux

在 Webserver 和低包大小安装方面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T07:30:07.523

老实说，VMWare 的最佳发行版是管理员最有经验的发行版。在禁用所有 GUI 的情况下，我没有发现 RedHat、Centos 和 Ubuntu 在运行 VMWare 时的性能有任何差异。

选择最容易管理的发行版将为您省去麻烦。如果您已经有几个使用相同风格的 linux 系统，那么管理员的工作会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T07:34:45.127

It is not clear to me if you are asking about the distro for the Vmware host, or for the guest operating system that will be your web server.

I generally really like Debian or Debian based distributions. But as far as Vmware is concerned Centos or anything really should work.

If you are looking at setting up many vms on this server you might want to look at using the bare-metal hypervisor product that has been released as a free product. (Vmware ESX)

# language-agnostic - Why Re-throw Exceptions?

> ID：113565
> 
> 赞同：37
> 
> 时间：2008-09-22T07:11:16.680
> 
> 标签：language-agnostic, exception, exception-handling

I've seen the following code many times:

```
try
{
    ... // some code
}
catch (Exception ex)
{
    ... // Do something
    throw new CustomException(ex);

    // or
    // throw;

    // or
    // throw ex;
} 
```

Can you please explain the purpose of re-throwing an exception? Is it following a pattern/best practice in exception handling? (I've read somewhere that it's called "Caller Inform" pattern?)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-09-22T07:15:12.193

Rethrowing the same exception is useful if you want to, say, log the exception, but not handle it.

Throwing a new exception that wraps the caught exception is good for abstraction. e.g., your library uses a third-party library that throws an exception that the clients of your library shouldn't know about. In that case, you wrap it into an exception type more native to your library, and throw that instead.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-22T07:26:42.227

Actually there is a difference between

```
throw new CustomException(ex); 
```

and

```
throw; 
```

The second will preserve the stack information.

But sometimes you want to make the Exception more "friendly" to your application domain, instead of letting the DatabaseException reach your GUI, you'll raise your custom exception which contains the original exception.

For instance:

```
try
{

}
catch (SqlException ex)
{
    switch  (ex.Number) {
        case 17:
        case 4060:
        case 18456:
           throw new InvalidDatabaseConnectionException("The database does not exists or cannot be reached using the supplied connection settings.", ex);
        case 547:
            throw new CouldNotDeleteException("There is a another object still using this object, therefore it cannot be deleted.", ex);
        default:
            throw new UnexpectedDatabaseErrorException("There was an unexpected error from the database.", ex);
    } 
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-22T07:44:16.617

Sometimes you want to hide the implementation details of a method or improve the level of abstraction of a problem so that it’s more meaningful to the caller of a method. To do this, you can intercept the original exception and substitute a custom exception that’s better suited for explaining the problem.

Take for example a method that loads the requested user’s details from a text file. The method assumes that a text file exists named with the user’s ID and a suffix of “.data”. When that file doesn’t actually exist, it doesn’t make much sense to throw a FileNotFoundException because the fact that each user’s details are stored in a text file is an implementation detail internal to the method. So this method could instead wrap the original exception in a custom exception with an explanatory message.

Unlike the code you're shown, best practice is that the original exception should be kept by loading it as the InnerException property of your new exception. This means that a developer can still analyze the underlying problem if necessary.

When you're creating a custom exception, here's a useful checklist:

• Find a good name that conveys why the exception was thrown and make sure that the name ends with the word “Exception”.

• Ensure that you implement the three standard exception constructors.

• Ensure that you mark your exception with the Serializable attribute.

• Ensure that you implement the deserialization constructor.

• Add any custom exception properties that might help developers to understand and handle your exception better.

• If you add any custom properties, make sure that you implement and override GetObjectData to serialize your custom properties.

• If you add any custom properties, override the Message property so that you can add your properties to the standard exception message.

• Remember to attach the original exception using the InnerException property of your custom exception.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-09-22T07:25:52.807

You typically catch and re-throw for one of two reasons, depending on where the code sits architecturally within an application.

At the core of an application you typically catch and re-throw to translate an exception into something more meaningful. For example if you're writing a data access layer and using custom error codes with SQL Server, you might translate SqlException into things like ObjectNotFoundException. This is useful because (a) it makes it easier for callers to handle specific types of exception, and (b) because it prevents implementation details of that layer such as the fact you're using SQL Server for persistence leaking into other layers, which allows you to change things in the future more easily.

At boundaries of applications it's common to catch and re-throw without translating an exception so that you can log details of it, aiding in debugging and diagnosing live issues. Ideally you want to publish error somewhere that the operations team can easily monitor (e.g. the event log) as well as somewhere that gives context around where the exception happened in the control flow for developers (typically tracing).

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T07:30:19.537

I can think of the following reasons:

*   Keeping the set of thrown exception types fixed, as part of the API, so that the callers only have to worry about the fixed set of exceptions. In Java, you are practically forced to do that, because of the checked exceptions mechanism.

*   Adding some context information to the exception. For example, instead of letting the bare "record not found" pass through from the DB, you might want to catch it and add "... while processing order no XXX, looking for product YYY".

*   Doing some cleanup - closing files, rolling back transactions, freeing some handles.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T07:15:13.957

Generally the "Do Something" either involves better explaining the exception (For instance, wrapping it in another exception), or tracing information through a certain source.

Another possibility is if the exception type is not enough information to know if an exception needs to be caught, in which case catching it an examining it will provide more information.

This is not to say that method is used for purely good reasons, many times it is used when a developer thinks tracing information may be needed at some future point, in which case you get try {} catch {throw;} style, which is not helpful at all.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T07:15:14.517

I think it depends on what you are trying to do with the exception.

One good reason would be to log the error first in the catch, and then throw it up to the UI to generate a friendly error message with the option to see a more "advanced/detailed" view of the error, which contains the original error.

Another approach is a "retry" approach, e.g., an error count is kept, and after a certain amount of retries that's the only time the error is sent up the stack (this is sometimes done for database access for database calls that timeout, or in accessing web services over slow networks).

There will be a bunch of other reasons to do it though.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T07:17:52.140

FYI, this is a related question about each type of re-throw: [Performance Considerations for throwing Exceptions](https://stackoverflow.com/questions/6891/performance-considerations-for-throwing-exceptions#6978)

My question focuses on "Why" we re-throw exceptions and its usage in application exception handling strategy.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T07:13:00.903

Until I started using the EntLib ExceptionBlock, I was using them to log errors before throwing them. Kind of nasty when you think I could have handled them at that point, but at the time it was better to have them fail nastily in UAT (after logging them) rather than cover a flow-on bug.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T07:14:18.077

The application will most probably be catching those re-thrown exceptions higher up the call stack and so re-throwing them allows that higher up handler to intercept and process them as appropriate. It is quite common for application to have a top-level exception handler that logs or reports the expections.

Another alternative is that the coder was lazy and instead of catching just the set of exceptions they want to handle they have caught everything and then re-thrown only the ones they cannot actually handle.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-07-30T16:52:44.743

As Rafal mentioned, sometimes this is done to convert a checked exception to an unchecked exception, or to a checked exception that's more suitable for an API. There is an example here:

[http://radio-weblogs.com/0122027/stories/2003/04/01/JavasCheckedExceptionsWereAMistake.html](http://radio-weblogs.com/0122027/stories/2003/04/01/JavasCheckedExceptionsWereAMistake.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-11-06T23:24:25.077

If you look at exceptions as on **an alternative way to get a method result**, then re-throwing an exception is like wrapping your result into some other object.

And this is a common operation in a non-exceptional world. Usually this happens on a border of two application layers - when a function from layer `B` calls a function from layer `C`, it transforms `C`'s result into `B`'s internal form.

`A -- calls --> B -- calls --> C`

If it doesn't, then at the layer `A` which calls the layer `B` there will be a full set of JDK exceptions to handle. :-)

As also the accepted answer points out, layer `A` might not even be aware of `C`'s exception.

**Example**

*Layer A*, servlet: retrieves an image and it's meta information
*Layer B*, JPEG library: collects available DCIM tags to parse a JPEG file
*Layer C*, a simple DB: a class reading string records from a random access file. Some bytes are broken, so it throws an exception saying "can't read UTF-8 string for record 'bibliographicCitation'".

So `A` won't understand the meaning of 'bibliographicCitation'. So `B` should translate this exception for `A` into `TagsReadingException` which wraps the original.

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2008-09-22T07:17:50.847

THE MAIN REASON of re-throwing exceptions is to leave Call Stack untouched, so you can get more complete picture of what happens and calls sequence.

# ruby-on-rails - 如何从图像中读取条形码

> ID：113571
> 
> 赞同：13
> 
> 时间：2008-09-22T07:13:37.267
> 
> 标签：ruby-on-rails, c, ruby, image-processing, barcode

我正在寻找有关如何从图像中读取[EAN-13](http://en.wikipedia.org/wiki/EAN-13)条形码（包括[ISBN](http://en.wikipedia.org/wiki/ISBN#EAN_format_used_in_barcodes.2C_and_upgrading)和[ISSN](http://en.wikipedia.org/wiki/ISSN)编码）的库、技术或建议。图像可能来自手机或网络摄像头，因此分辨率可能很差且对齐不佳。

我对可以从 ruby​​ on rails 使用的东西特别感兴趣，但是欢迎其他语言的答案。首选开源解决方案。

迄今为止领先的解决方案：

1.  [ZBar](http://zbar.sourceforge.net/)（以前称为 Zebra - h/t @bgbg、@Natim）- 用 C 语言实现，具有 Python、Perl 和 C++ 接口
2.  [ZXing](http://code.google.com/p/zxing/) (h/t @codr) - 在 Java（J2SE 和 Android）中实现，其他模块/端口处于不同的开发状态（JavaME、C#、C++、JRuby、RIM、iPhone/Objective C）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T07:28:13.410

斑马条形码阅读器 ( [http://zebra.sourceforge.net/](http://zebra.sourceforge.net/) ) 是一个用 C 实现的小型分层条形码扫描和解码库（还提供了 C++ 包装器）。它支持许多流行的符号（条形码类型），包括 EAN-13。但是，我不知道任何 Ruby 绑定。该库在 GPL 下可用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-30T01:31:47.873

这个项目可能就是你要找的：[ZXing](http://code.google.com/p/zxing/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T07:43:12.157

如果它允许您网站的访问者扫描内容，您可能想尝试一下，我认为它可以嵌入到您自己的网站中，但我从未使用过它：[http ://en.barcodepedia.com/](http://en.barcodepedia.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-23T19:40:10.880

我们使用[Softek](http://www.softeksoftware.co.uk/index.html)库。

对结果非常满意。

# import - 附加 Informix .dat 和 .idx 文件

> ID：113582
> 
> 赞同：1
> 
> 时间：2008-09-22T07:16:40.847
> 
> 标签：import, export, informix

我们正试图在测试服务器上复制我们的一个 informix 数据库，但如果没有内部的 Informix 专业知识，我们只能猜测我们需要做什么。我自己在动态学习这些东西，远不及有效甚至低效操作 Informix 所需的专业知识水平。无论如何...我们设法从某处的实时服务器复制了 .dat 和 .idx 文件。在其上安装 Linux 和最新的 Informix Dynamic Server 并使其启动并运行。

现在我们应该如何处理来自实时服务器的 .dat 和 idx 文件？我们是否将它复制到某个地方，它会自动识别它？

或者是否有类似的方法可以从 MS SQLServer 附加数据库以在新数据库中注册数据库文件？

在我的绳索末端...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T18:49:46.580

你在不知不觉中问了一个相当复杂的问题。Informix 被构建为一个共享一切的数据库引擎，这意味着该实例可用的所有资源对该实例中的每个数据库都可用。这意味着在您的情况下，多个数据库可以将数据存储在任何给定的 dbspace、.dat 或 .idx 文件中。大多数 DBA 都知道不这样做，但需要注意这一点。有了这些知识，您现在知道 .dat 和 .idx 文件不属于数据库，而是属于实例。创建 dbspace 和文件是为了包含您的数据库数据，但它们在技术上属于该实例。值得注意的是，.dat 和 .idx 文件通过逻辑 dbspace 名称为数据库所知。

有了这些背景信息，并假设生产和开发服务器运行相同的操作系统并且您的硬件相对相同，而不是 PARISC、Itanium 或 x86/x64 的组合，我将为您提供几个选项.

1.  在新实例中创建您需要的 dbspace，并使用 onunload 和 onload 将数据库从生产复制到开发。
2.  使用 ontape 或 onbar 备份整个生产实例并在您的开发实例上恢复它。

选项 1 要求您知道 dbspace 的名称以及它们的大小。在生产实例上使用`onstat -d`以找出这一点。顺便说一句， onstat -d 中列出的数字是以页为单位的，我相信 Linux 是 2K 页。

选项 2 只要求数据文件的路径在两台服务器上相同。这意味着 ROOTDBS 在两种情况下都需要相同。可以通过执行找到`onstat -c | grep ROOTDBS`

有很多内容被遗漏了，但我希望这能为您提供推进任务所需的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-25T00:25:00.063

.dat 和 .idx 文件与 C-ISAM 相关联，或者，当组织在名为 dbase.dbs（其中 dbase 是数据库名称）的目录中时，.dat 和 .idx 文件与 Informix 标准引擎相关联，又名 Informix SE。SE 使用 C-ISAM 来管理其存储。SE 与 Informix Dynamic Server (IDS) 有很大不同（并且比它简单得多）。.dat 和 .idx 文件与 IDS 关联并非不可能；这是极不可能的。

从可用信息来看，您的生产服务器似乎正在运行 SE。要将数据从 SE 获取到 IDS，您可能希望在 SE 端使用 DB-Export，在 Linux/IDS 端使用 DB-Import。当然，这是最简单的方法。

还有其他可能的解决方案 - C-ISAM 数据刀片就是其中之一 - 但它们更昂贵并且可能没有保证。还有其他可能的加载解决方案，例如 HPL（高性能加载器）。

有关 Informix 的更多信息，请使用已经引用的各种网站（[http://www.informix.com](http://www.informix.com)是 IBM 网站的 Informix 部分的链接），或者使用[国际 Informix 用户组 (IIUG)](http://www.iiug.org/)网站。有可用的邮件列表（要求您加入，但会员资格是免费的）用于详细讨论 Informix。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-29T23:27:04.027

那些 Informix-SE 数据文件 (.DAT) 及其关联的索引文件 (.IDX) 是无用的，除非您还拥有所有关联的目录文件，例如 SYSTABLES.DAT SYSTABLES.IDX、SYSCOLUMNS、SYSINDEXES 等。

然后您还必须担心创建它们的是哪个版本的 Informix-SE，因为有些索引文件节点大小为 2K 或 4K。

您最好的方法是从源数据库中获取所有 .DAT 和 .IDX 文件，以及正确的标准引擎，安装在相同的硬件和操作系统上。

长话短说，在源机器上，运行“dbexport”将所有数据卸载到 ascii 文件，并运行“dbschema”生成所有表模式和索引。在将所有文件卸载到 ascii 平面文件之前，对所有文件运行“bcheck”也没有什么坏处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T07:27:20.230

我没有任何特定于 Informix 的建议，但对于此类情况，您通常可以通过查找如何移动数据库（常见的管理任务，通常在手册中进行了详细描述）并跳过可能的步骤来找到答案删除旧数据库。

另外，要注意不同系统架构引起的问题；如果您将某些 DB 从大端系统（例如 Solaris）移动到小端系统（例如 x86 Linux），它们会严重失败。同样，关于移动 DB 的手册部分将涵盖所需的任何额外步骤。

# winapi - 在 Windows 中获取登录用户的用户名/密码

> ID：113592
> 
> 赞同：10
> 
> 时间：2008-09-22T07:18:49.970
> 
> 标签：winapi, visual-c++, mfc

是否有任何 API 可以在 Windows 中获取当前登录的用户名和密码？

先感谢您。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-09-22T07:29:41.427

密码：不，出于安全原因，它不会保留 - 它被使用，然后被丢弃。您可以从注册表中检索该用户的加密密码，获得足够的权限，然后使用类似[Rainbow tables](http://en.wikipedia.org/wiki/Rainbow_table)的东西对其进行解密，但使用当前方法非常耗费资源且非常耗时。更好地提示用户。

或者，如果您想像 Novell 那样实现某种“单点登录”系统，您应该通过 GINA（Vista 之前）或凭据提供程序（Vista）来实现，这将导致您的代码被赋予用户名和登录时的密码，这是密码可用的唯一时间。

对于用户名，获取*当前*用户名（运行代码的用户）很容易：AdvApi32.dll 中的 GetUserName 函数正是为您完成了这项工作。

如果你作为服务运行，你需要记住没有一个“登录用户”：除了任何实际的人之外，任何时候都有几个，例如 LocalSystem、NetworkService、SYSTEM 和其他帐户。[本文提供了一些示例代码和文档](http://www.codeproject.com/KB/system/logonsessions.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-25T19:39:20.400

对于许多认为不可能泄露当前登录用户的密码的评论者，请参阅[Dump cleartext passwords of logged in user(s)](https://tinyapps.org/blog/windows/201304110700_dump_passwords.html)，它展示了如何使用[mimikatz](https://github.com/gentilkiwi/mimikatz)来做到这一点：

```
mimikatz # privilege::debug
Demande d'ACTIVATION du privilège : SeDebugPrivilege : OK

mimikatz # sekurlsa::logonPasswords full
...
Utilisateur principal       : user
Domaine d'authentification  : domain
        kerberos :
         * Utilisateur  : user
         * Domaine      : domain
         * Mot de passe : pass 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T07:21:25.923

如果可能的话，我认为这是一个巨大的安全漏洞！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T07:22:16.903

您无法获取用户的密码，因为它已加密（更不用说不以明文形式存储密码的标准做法）。

要获取用户名，您可以使用[GetUserName](http://msdn.microsoft.com/en-us/library/ms724432.aspx)或[NPGetUser](http://msdn.microsoft.com/en-us/library/aa378803(VS.85).aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-22T07:29:43.063

请注意它是如何完成的，但[http://www.nirsoft.net/utils/network_password_recovery.html](http://www.nirsoft.net/utils/network_password_recovery.html)的“网络密码恢复”工具似乎从某个缓存中获取密码。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T07:22:01.427

GetUserName 将为您获取名称，但您无法获取密码。它甚至不是 Windows 存储的东西，AFAIK - 只是密码的哈希值。

根据您要实现的目标（您可以告诉我们更多......），可以模拟登录用户并代表他/她做事。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-22T07:30:43.763

Windows API 中身份验证的完整详细信息可以在 MSDN 上找到：http: [//msdn.microsoft.com/en-us/library/aa374735 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa374735(VS.85).aspx)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-07-26T20:25:38.913

我不知道 Windows 登录密码...但是您绝对可以从凭据管理器中提取明文密码。例如，这里是一个提取 TFS 密码的程序。在大多数情况下，这与 Windows 登录相同。

```
namespace ShowPassword
{
    using Microsoft.TeamFoundation.Client;
    using System;
    using System.Net;

    class Program
    {
        static void Main(string[] args)
        {
            var tpc = new TfsTeamProjectCollection(new Uri("http://mycompany.com/tfs"));
            var nc = tpc.Credentials as NetworkCredential;
            Console.WriteLine("the password is " + nc.Password);
        }
    }
} 
```

我使用 Nuget 包 TeamFoundation ExtendedClient 将其编译为 vs 2015 下的“控制台”应用程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T07:23:07.540

用GetUserName()可以得到用户名，但不能得到密码；这将违反假人 101 的安全性。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T15:58:53.340

重新“网络密码恢复”工具
Windows（最高 XP）使用更简单的易于破解的加密存储密码的副本 - 用于连接到旧式 lanmanager 网络共享。这些工具通常会针对此尝试所有可能的密码，使用彩虹表（字典单词的预先计算的加密版本）可以加快速度。

在 XPsp2/3 Vista 中，此功能已被删除。新的加密更难破解，需要很多小时来尝试所有可能的值，有一些在线服务可以在大量机器上运行它，以便以一定的价格为您提供快速答案。

要回答原始海报 - 您通常不会存储密码并将其与用户输入的内容进行比较。您加密（实际上是散列）输入的密码并存储它。要检查密码，您对用户输入的任何内容执行相同的加密并进行比较。通常不可能从加密形式回到真实密码。

**编辑**我怀疑您在这里问错了问题-您为什么要密码，您要验证什么以及何时验证？

# mysql - 为什么 ENUM 优于 INT

> ID：113609
> 
> 赞同：23
> 
> 时间：2008-09-22T07:24:08.287
> 
> 标签：mysql

我刚刚在我的一张桌子上运行了“PROCEDURE ANALYZE ( )”。我有这个 INT 类型的列，它只包含从 0 到 12 的值（类别 ID）。MySQL说我最好使用ENUM（'0'，'1'，'2'，...，'12'）。这个类别基本上是静态的，将来不会改变，但如果他们这样做，我可以改变那个列并将它添加到 ENUM 列表中......

那么为什么在这种情况下 ENUM 更好呢？

编辑：我最感兴趣的是这个的性能方面......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-09-22T07:38:30.843

简而言之，这是因为它以不同的方式编入索引。

在这种情况下，`ENUM`说“它是这 13 个值之一”，而`INT`说“它可以是任何整数”。

这意味着索引更容易，因为它不必考虑那些你不使用的整数的索引，“以防万一”你曾经使用它们。

这一切都与算法有关。

我会对自己感兴趣，但当它达到`INT`比`ENUM`.

不过，在 an 中使用数字`ENUM`可能有点危险……就好像您将此数字不带引号地发送到 SQL 一样——您最终可能会得到错误的值！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-22T14:08:53.087

哎呀！`ENUM`在字段中使用数字有很多歧义。当心。我记得的一个问题是您可以`ENUMS`按索引访问值：如果您的枚举是`ENUM('A', 'B', 'C', '1', '2, '3')`，那么这两个查询非常不同：

```
INSERT INTO TABLE (example_col) VALUES( '1' ); -- example_col == 1
INSERT INTO TABLE (example_col) VALUES(  1  ); -- example_col == A 
```

我假设该建议是因为它限制了可以进入表格的有效值。例如，插入 13 应该得到默认选择。

更好的选择是使用`TINYINT`而不是`INT`. an`UNSIGNED TINYINT`的范围是 0 到 255，只需要[1 个字节来存储](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)。An`INT`需要 4 个字节来存储。如果要限制进入表的值，可以添加检查值的触发器`ON INSERT`。`ON UPDATE`

如果您担心 和 之间的性能差异`ENUM`，`TINYINT`您可以随时进行基准测试以查看差异。[这篇文章](http://www.mysqlperformanceblog.com/2008/01/24/enum-fields-vs-varchar-vs-int-joined-table-what-is-faster/)似乎有些相关。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-22T07:29:10.053

因为它引入了对可能值的约束。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-22T07:30:06.073

我不是 MySQL 专家，但我的猜测是整数总是占用四个字节的空间，而枚举根据所需的数据范围占用不同数量的空间。由于您只需要 13 个项目，因此可以为您的列使用 1 个字节。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-22T07:57:39.843

在 Oracle 上，我将有一个 BITMAP 索引，它比基于散列的查找如此少量的值要快得多。（所以我认为 MySQL 可以使用查询优化或索引方面的类似好处。）

有趣的是，MySQL 文档建议使用“看起来像数字的东西”对于 ENUM 类型来说是一个不好的选择，因为枚举值和枚举索引之间可能会混淆（[http://dev.mysql.com/doc/refman/5.0 /en/enum.html](http://dev.mysql.com/doc/refman/5.0/en/enum.html) )。

# workflow - jBPM，并发执行和流程变量

> ID：113626
> 
> 赞同：2
> 
> 时间：2008-09-22T07:29:44.747
> 
> 标签：workflow, business-process-management, jbpm

当 jBPM 中的流程分叉成并发路径时，这些路径中的每一个都获得自己的流程变量副本，因此它们彼此隔离运行。

但是当路径再次连接时会发生什么？显然可能存在冲突的更新。上下文是否恢复到分叉之前的状态？我可以选择从单独的轨道复制单个变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T10:08:49.157

我认为您必须配置任务的任务控制器。`access`在某些情况下，以不会导致冲突的方式设置属性就足够了（例如`read`，访问第一条路径和`read,write`访问第二条路径）。如果不是这种情况，那么您可以实现自己的并使用您的自定义逻辑`TaskControllerHandler`实现该方法。`void submitTaskVariables(TaskInstance taskInstance, ContextInstance contextInstance, Token token)`请参阅：[任务控制器](http://docs.jboss.com/jbpm/v3.2/userguide/html/taskmanagement.html#taskcontrollers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T19:36:51.440

我尝试了一个小实验：

```
<fork name="fork1" >
    <transition to="right" />
    <transition to="left" />    
</fork>

<node name="left">
    <event type="node-enter">
        <script>
            <expression >
                left="left";
                shared = left;
            </expression>
            <variable name='left' access='write' />
            <variable name='shared' access='write' />
        </script>
    </event>
    <transition to="join" />
</node>

<node name="right">
    <event type="node-enter">
        <script>
            <expression >
                right="right";
                token.parent.processInstance.contextInstance.setVariable("fromRight", "woot!");
                shared = right;
            </expression>
            <variable name='right' access='write' />
            <variable name='shared' access='write' />
        </script>
    </event>
    <transition to="join" />
</node>

<join name="join" >
    <transition to="done"></transition>
</join>

<end-state name="done"/> 
```

最后，我可以访问三个变量，shared、right 和“fromRight”，这些变量是由脚本针对父对象明确设置的。

共享变量从右分叉获取其值，在左侧所做的更改似乎消失了。

请注意，转换对我来说实际上并不是异步的，整个实验将在一个事务中运行，这些因素可能会影响结果

# html - 哪个 CSS 标记创建了一个这样的带有标题的框？

> ID：113640
> 
> 赞同：50
> 
> 时间：2008-09-22T07:35:51.753
> 
> 标签：html, css, fieldset, legend

我想创建一个这样的带有标题的框：

![带标题的 CSS 框](https://i.stack.imgur.com/2rip1.gif)

任何人都可以让我知道是否有默认的 CSS 标签来执行此操作吗？还是我需要创建我的自定义样式？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2008-09-22T07:42:46.697

我相信您正在寻找`fieldset`HTML 标记，然后您可以使用 CSS 对其进行样式设置。例如，

```
 <fieldset style="border: 1px black solid">

      <legend style="border: 1px black solid;margin-left: 1em; padding: 0.2em 0.8em ">title</legend>

      Text within the box <br />
      Etc
    </fieldset>
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2010-05-29T22:59:54.903

如果您没有在表单中使用它，而是想在不可编辑的表单中使用它，您可以通过以下代码执行此操作 -

```
.title_box {
  border: #3c5a86 1px dotted;
}

.title_box #title {
  position: relative;
  top: -0.5em;
  margin-left: 1em;
  display: inline;
  background-color: white;
}

.title_box #content {}
```

```
<div class="title_box" id="bill_to">
  <div id="title">Bill To</div>
  <div id="content">
    Stuff goes here.<br> For example, a bill-to address
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-22T07:44:14.353

来自[http://www.pixy.cz/blogg/clanky/css-fieldsetandlabels.html](http://www.pixy.cz/blogg/clanky/css-fieldsetandlabels.html)

```
fieldset {
  border: 1px solid green
}

legend {
  padding: 0.2em 0.5em;
  border: 1px solid green;
  color: green;
  font-size: 90%;
  text-align: right;
}
```

```
<form>
  <fieldset>
    <legend>Subscription info</legend>
    <label for="name">Username:</label>
    <input type="text" name="name" id="name" />
    <br />
    <label for="mail">E-mail:</label>
    <input type="text" name="mail" id="mail" />
    <br />
    <label for="address">Address:</label>
    <input type="text" name="address" id="address" size="40" />
  </fieldset>
</form>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T07:44:22.810

这会给你你想要的

```
<head>
    <title></title>
    <style type="text/css">
        legend {border:solid 1px;}
    </style>
</head>
<body>
    <fieldset>
        <legend>Test</legend>
        <br /><br />
    </fieldset>
</body> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T07:41:01.430

据我所知（如果我错了，请纠正我！），没有。

我建议您使用内部带有负边距 h1 的 div。根据文档的语义结构，您还可以使用带有一个图例 (HTML) 的字段集 (HTML)，其中默认情况下大致如下所示。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-28T08:43:37.033

你可以试试这个。

```
<fieldset class="fldset-class">
    <legend class="legend-class">Your Personal Information</legend>

    <table>
        <tr>
            <td><label>Name</label></td>
            <td><input type='text' name='name'></td>
        </tr>
        <tr>
            <td><label>Address</label></td>
            <td><input type='text' name='Address'></td>
        </tr>
        <tr>
            <td><label>City</label></td>
            <td><input type='text' name='City'></td>
        </tr>
    </table>
</fieldset> 
```

[演示](http://jsfiddle.net/3tnqgLr5/1/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-10T13:01:34.610

我认为这个例子对某人也有用：

```
.fldset-class {
    border: 1px solid #0099dd;
    margin: 3pt;
    border-top: 15px solid #0099dd
}

.legend-class {
    color: #0099dd;
}
```

```
<fieldset class="fldset-class">
    <legend class="legend-class">Your Personal Information</legend>

    <table>
        <tr>
            <td><label>Name</label></td>
            <td><input type='text' name='name'></td>
        </tr>
        <tr>
            <td><label>Address</label></td>
            <td><input type='text' name='Address'></td>
        </tr>
        <tr>
            <td><label>City</label></td>
            <td><input type='text' name='City'></td>
        </tr>
    </table>
</fieldset>
```

# file-format - File format of CF10-jpg

> ID：113641
> 
> 赞同：4
> 
> 时间：2008-09-22T07:36:23.280
> 
> 标签：file-format

While working on a tool that allows to exchange images of several third-party applications and thus creating individual "skins" for those applications, I have stumbled across a jpg-format about which I cannot seem to find any decent informations.

When looking at it in a hex-editor, it starts with the tag "CF10". Searching the internet has only provided a tool that is able to handle these kind of files, without any additional informations.

Does anyone have any further informations about this type of jpg-format?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-08T23:03:25.513

[`file(1)`](http://linux.die.net/man/1/file)应该给你一些有用的信息。您还可以使用 ImageMagick 的[`identify(1)`](http://www.imagemagick.org/script/identify.php)程序（可以选择使用该`-verbose`选项）来获取有关该文件的更多详细信息。请参阅该页面上的示例，以很好地了解它提供的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-08T23:09:41.567

您还可以尝试查看[Droid](http://droid.sourceforge.net/)识别工具对该文件的说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T07:42:31.707

CF stands for "Compression Factor". CF-10 means factor ten, and I don't think it's different from any "standard" jpeg.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-29T23:00:58.607

DROID 将其称为“JTIP（JPEG 平铺图像金字塔）”。[来自http://www.bcr.org/cdp/digitaltb/digital_imaging/formats.html](http://www.bcr.org/cdp/digitaltb/digital_imaging/formats.html)的一些信息：

> JTIP（JPEG 平铺图像金字塔）类似于 GridPrix。它提供多层越来越高的分辨率。每一层进一步分为瓦片。用户可以放大这些图块，或请求更高分辨率的相应图块。

# c# - 属性网格对象在选择组合框时失败，但在组合框滚动或双击时确定

> ID：113644
> 
> 赞同：1
> 
> 时间：2008-09-22T07:36:53.687
> 
> 标签：c#, winforms, propertygrid

我在 C# 中有一个属性网格，加载了一个“PropertyAdapter”对象（围绕我的一个对象的基本包装，显示带有适当标签的相关属性）

我在其中一个属性（DataType，返回可能值的枚举）上有一个 TypeConverter，因为我想将属性网格可用的值限制为 Decimal 和 Integer，使用以下 2 种方法

```
public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
{
    return true;
}

public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
{
    return new StandardValuesCollection(new List<Constants.DataTypes>() { Constants.DataTypes.Decimal, Constants.DataTypes.Integer });
} 
```

这就像我在属性网格上想要的那样显示，当我双击属性网格中的属性字段时，它会愉快地在整数和小数之间切换。同样，我可以使用鼠标滚轮滚动属性字段组合框中的选项。

但是，如果我将属性字段用作组合框并从下拉列表中选择一个值，则会得到带有错误的标准属性网格错误框：

> “System.String”类型的对象无法转换为“Pelion.PM3.Utils.Constants+DataTypes”类型。

我假设我可以使用类型转换器中的转换器覆盖来捕获这些并将它们转换为数据类型的枚举，但是当我从下拉列表中选择而不是双击或“鼠标滚轮”时，为什么属性网格会失败落下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T10:38:34.140

从组合框下拉列表中选择时，该值以字符串形式返回。我不知道为什么会这样，但我以前见过。我认为基本上双击或滚动鼠标滚轮会更改值集合中的值，而从下拉列表中选择就像将字段值编辑为字符串一样。然后，您可以将值从字符串转换为枚举值。

# crystal-reports - VS 2003 CrystalReports - 细节部分问题

> ID：113645
> 
> 赞同：0
> 
> 时间：2008-09-22T07:37:39.160
> 
> 标签：crystal-reports, visual-studio-2003

我的报告中有 2 个详细信息部分（详细信息 a 和详细信息 b）。两个部分中的字段最多可以增长到 10 行。

如何强制 Crystal Report 在一页上打印两个部分？目前底页打印部分“详细信息 a”的报告，但“详细信息 b”部分打印在下一页。如何防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-22T10:16:27.343

我找到了解决方案。添加新的组部分（空）并在此组上标记 Keep together。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-24T21:03:30.967

您不需要额外的组。您可以在详细信息区域（部分上的节点）上设置标志保持在一起。

# python - python中是否有将单词拆分为列表的功能？

> ID：113655
> 
> 赞同：114
> 
> 时间：2008-09-22T07:40:50.853
> 
> 标签：python, function, split

python中是否有将单词拆分为单个字母列表的功能？例如：

```
s="Word to Split" 
```

要得到

```
wordlist=['W','o','r','d','','t','o' ....] 
```

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2008-09-22T07:42:15.607

```
>>> list("Word to Split")
['W', 'o', 'r', 'd', ' ', 't', 'o', ' ', 'S', 'p', 'l', 'i', 't'] 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-22T07:46:45.177

最简单的方法可能只是使用`list()`，但至少还有一个其他选项：

```
s = "Word to Split"
wordlist = list(s)               # option 1, 
wordlist = [ch for ch in s]      # option 2, list comprehension. 
```

他们都应该*给*你你需要的东西：

```
['W','o','r','d',' ','t','o',' ','S','p','l','i','t'] 
```

如前所述，对于您的示例，第一个可能是最可取的，但有些用例可能使后者对于更复杂的东西非常方便，例如，如果您想对项目应用一些任意函数，例如：

```
[doSomethingWith(ch) for ch in s] 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-09-22T07:47:20.743

列表函数将执行此操作

```
>>> list('foo')
['f', 'o', 'o'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-22T14:36:35.987

滥用规则，结果相同：（x for x in 'Word to split'）

实际上是一个迭代器，而不是一个列表。但很可能你不会真正关心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-11T10:58:07.163

```
text = "just trying out"

word_list = []

for i in range(0, len(text)):
    word_list.append(text[i])
    i+=1

print(word_list)

['j', 'u', 's', 't', ' ', 't', 'r', 'y', 'i', 'n', 'g', ' ', 'o', 'u', 't'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-14T12:52:54.863

最简单的选择是只使用 list() 命令。但是，如果您不想使用它或者由于某些集市原因它不起作用，您可以随时使用此方法。

```
word = 'foo'
splitWord = []

for letter in word:
    splitWord.append(letter)

print(splitWord) #prints ['f', 'o', 'o'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-26T09:06:38.150

def count(): list = 'oixfjhibokxnjfklmhjpxesriktglanwekgfvnk'

```
word_list = []
# dict = {}
for i in range(len(list)):
    word_list.append(list[i])
# word_list1 = sorted(word_list)
for i in range(len(word_list) - 1, 0, -1):
    for j in range(i):
        if word_list[j] > word_list[j + 1]:
            temp = word_list[j]
            word_list[j] = word_list[j + 1]
            word_list[j + 1] = temp
print("final count of arrival of each letter is : \n", dict(map(lambda x: (x, word_list.count(x)), word_list))) 
```

# configuration - Installing PowerShell on 600 client computers - Recommended settings

> ID：113664
> 
> 赞同：3
> 
> 时间：2008-09-22T07:42:22.800
> 
> 标签：configuration, powershell, installation

I want to install PowerShell to 600 Window XP computers, and use it as the main processing shell. For example, for replacing batch scripts, VB scripts, and some other little programs. The installation process is not a problem. Some issues I think I'm going to come across are:

1.  Changing permissions to allow PowerShell to run scripts

2.  The speed of PowerShell starting

3.  Using PowerShell for logon/logoff scripts with GPO

Problem 2: There is a script that is supposed to speed up PowerShell, but it seems to need to be run as administrator (which of course isn't something that normal users do). Has anyone had any experience with using PowerShell in this way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T12:51:18.297

为了加快 PowerShell 的启动，Jeffrey Snover（负责 PowerShell 的合作伙伴/架构师）[在此处](http://blogs.msdn.com/powershell/archive/2008/09/02/speeding-up-powershell-startup-updating-update-gac-ps1.aspx)提供了“Update-GAC”脚本。

基本上，它只是运行为 PowerShell 和 NGen'ing（将 IL 预编译为机器代码）加载的程序集。这确实加快了 PowerShell 的启动。

另一个技巧是使用 -nologo 和 -noprofile 开关运行 PowerShell。

这将跳过配置文件脚本和启动徽标。

有一个[产品用于使用 PowerShell 来](http://www.specopssoft.com/powershell/)从 Special Operations Software 登录/注销脚本。还有其他方法可以做到这一点。

```
%windir%\system32\WindowsPowerShell\v1.0\powershell.exe -nologo -noprofile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T12:44:53.257

可以通过组策略更改权限以允许 Powershell 脚本。

[Microsoft在这里](http://www.microsoft.com/downloads/details.aspx?FamilyID=2917a564-dbbc-4da7-82c8-fe08b3ef4e6d&DisplayLang=en)提供 ADM 模板，只有一个选项“打开脚本执行”，可以在用户或计算机级别分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-02T12:50:09.220

似乎可以静默运行 poweshell，但不仅仅是通过调用自身。这篇[文章](http://blog.integrii.net/?p=45)有更多信息。

所以回答我自己的问题

1.  这可以通过 GPO 完成
2.  在我们的计算机上首次运行至少需要 10 秒。这可能会将该时间添加到不可接受的登录时间上。
3.  这似乎很简单，使用上面的脚本是需要隐形的，或者通过调用 powershell exe 并传递它的启动选项。

在我们的计算机上，仅仅因为登录时间增加，使用 powershell 登录似乎不值得。

# javascript - 在当前浏览器窗口中使用 javascript 隐藏工具栏/状态栏？

> ID：113682
> 
> 赞同：0
> 
> 时间：2008-09-22T07:47:33.753
> 
> 标签：javascript, user-interface

有没有办法通过javascript在当前窗口中隐藏浏览器工具栏/状态栏等？我知道我可以在弹出窗口中做到这一点，`window.open()`但我需要这样做。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T07:49:22.347

我相信这是不可能的。无论如何，不​​要这样做。你的页面可以在渲染区域做它想做的事，但是浏览器的其余部分属于用户，网站没有任何业务来搞乱它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-22T07:55:13.487

根据先前的答案，据我所知，这是不可能的，无论如何最好避免。即使可以找到解决方案，请记住，如今大多数浏览器都允许用户阻止 Javascript 干扰他们的浏览器设置和窗口镶边，即使在使用 window.open 时也是如此。所以你绝对没有办法保证你正在寻找的行为，因此你最好完全忘记它。让用户决定他们希望如何配置他们的窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T07:54:09.337

Marijn：好的，谢谢。这适用于 Intranet 站点，我们将 InfoPath 表单显示为单独的、无工具栏、无状态栏的窗口。这是客户要求，我不是要作恶；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T08:03:00.597

致 Martin Meredith、Luke、Marijn：感谢您的快速回复。现在已经确定这是不可能的。

我同意你们所有关于这是一种不良行为的看法，但正如我之前所说，这是针对银行内部网应用程序的，在该应用程序中，所有用户都在运行一个严格控制、集中配置、定制和被黑死的浏览器，他们无论如何都无法控制，并且客户端实际上希望应用程序具有这种行为。当然，在面向公众/一般网站上这样做会很愚蠢和烦人。但有时我们只需要完成工作:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T07:51:58.703

不。如果可能的话，这将是一个巨大的安全漏洞……更不用说烦人了。

我的浏览器甚至不允许您在弹出窗口中执行此操作……这也很烦人！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T22:17:03.493

您可能想使用[HTA（HTML 应用程序）](http://www.microsoft.com/technet/scriptcenter/hubs/htas.mspx)进行调查。

它将以零浏览器 chrome 呈现 HTML 页面，可以在任务栏上显示自定义图标，并且可以删除整个“标题”。最后一个选项产生一个没有关闭按钮的浮动窗口。

对于我想象的您的需求，您可能希望从以下内容开始：

```
<html>
  <head>
    <title>HTA Demonstration</title>
    <hta:application innerborder="no" icon="magnify.exe" />
  </head>
  <body style="overflow: hidden; margin: 0;">
    <iframe src="http://www.yahoo.com" style="width: 100%; height: 100%;"></iframe>
  </body>
</html> 
```

将上述 HTML 保存到一个文件中，并将其命名为“example.hta”作为文件名。然后，您的桌面上会出现一个通用图标，您可以双击它来启动。

```
<hta:application innerborder="no" caption="no" icon="magnify.exe" /> 
```

此更改将在运行脚本时删除标题栏。如果执行此操作，请按 Alt-F4 退出脚本。

这也仅适用于 IE，但这不应该是 Intranet 上的问题。

# dry - 如何不在项目和/或语言中重复自己

> ID：113696
> 
> 赞同：1
> 
> 时间：2008-09-22T07:53:47.670
> 
> 标签：dry, maintainability

我正在使用不同的编程语言从事几个不同但相关的项目。其中一些项目需要解析其他项目编写的文件名，并且需要某种文件名模式。

这种模式现在在多个地方和多种语言中进行了硬编码，使其成为维护炸弹。在给定项目中只定义一次这种模式是相当容易的，但是为所有项目和所有使用的语言一次性定义它的技术是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T07:56:58.503

创建领域特定语言，然后将其编译成您正在使用的每种目标语言的代码将是最好的解决方案（也是最优雅的）。

制作 DSL 并不难——将其嵌入到某些东西中（比如在 Ruby 中，因为它现在是“in”的东西，或者像 LISP/Haskell 这样的另一种语言......），或者从头开始创建语法（使用 Antlr？） . 看起来项目很大，那么这条路值得你一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T07:57:40.407

我会将模式存储在一个简单的文本文件中，并且取决于特定的项目：

*   在构建时将其嵌入源中（预处理）
*   如果上述不是一个选项，则将其视为在运行时读取的配置文件

编辑：我认为该模式并不比正则表达式复杂，否则我会从另一个答案中选择 DSL 解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T07:59:30.760

您可以使用通用脚本、进程或 Web 服务来生成文件名（取决于您的设置）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T08:05:28.250

我不知道您说的是哪种语言，但大多数语言都可以使用外部动态库 dll/共享对象并从该库中导出通用功能。例如，您在简单的 c lib 中实现函数获取文件名并使用 acrros 其他语言。
另一种选择是动态创建通用代码作为每种语言的构建过程的一部分，这不应该太复杂。
如果可行，我会建议使用动态链接方法（您没有提供足够的信息来确定这一点），因为维护这个解决方案会比维护不同语言的代码生成要容易得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T07:56:23.640

将模式放入数据库中——最简单舒适的方法是使用 XML 数据库。所有项目都可以访问该数据库，他们将从那里读取模式

# css - 如何在最后一个添加“最后一个”类 在视图生成的列表中？

> ID：113702
> 
> 赞同：5
> 
> 时间：2008-09-22T07:55:08.807
> 
> 标签：css, drupal

如何`<li>`在视图生成的列表中的最后一个上添加“最后一个”类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-22T08:06:28.420

您可以在 li 元素上使用**last-child**伪类来实现这一点

```
<html>
<head>
<style type="text/css">
ul li:last-child
{
font-weight:bold
}
</style>
</head>
<body>
<ul>
<li>IE</li>
<li>Firefox</li>
<li>Safari</li>
</ul>
</body>
</html> 
```

还有一个可用的 first-child 伪类。

我不确定最后一个子元素在 IE 中是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T08:24:18.033

或者，如果某些浏览器不支持 last-child 类，您可以通过 JavaScript 实现此目的。例如，此脚本为所有“ul”标签中的最后一个“li”元素设置类名，尽管它可以很容易地适应其他标签或特定元素。

```
function highlightLastLI()
{
    var liList, ulTag, liTag;
    var ulList = document.getElementsByTagName("ul");
    for (var i = 0; i < ulList.length; i++)
    {
        ulTag = ulList[i];
        liList = ulTag.getElementsByTagName("li");
        liTag = liList[liList.length - 1];
        liTag.className = "lastchild";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T08:13:45.627

jquery 是否与 drupal 捆绑在一起，如果是这样，您可以使用

```
$('ul>li:last').addClass('last'); 
```

为达到这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T09:59:13.110

您可以使用该 pesudo-class **last-child**，**first-child**用于第一个或**nth-child**用于任意数量的孩子

```
li:last-child{
    color:red;
    font-weight:bold;
} 
```

# wpf - LocBaml 包括以前的翻译

> ID：113712
> 
> 赞同：0
> 
> 时间：2008-09-22T07:57:47.147
> 
> 标签：wpf

从应用程序中提取 csv 文件时，有没有办法结合以前的翻译？或者任何其他可以为我完成这项工作的工具？

如果每次在我的应用程序中添加新控件时都必须从头开始翻译所有内容，我真的看不出如何使用 locbaml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-22T08:12:31.917

您可能会考虑使用[WinMerge](http://www.winmerge.org/)之类的工具将现有文件与旧文件合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-06T11:59:18.703

你可以试试我的开源插件[http://easybaml.codeplex.com](http://easybaml.codeplex.com)，它会自动结合以前的翻译。现在它使用 .resx 而不是 .csv，如果需要可以更改。

# browser - I'm looking for publications about the history of the internet browsers

> ID：113717
> 
> 赞同：2
> 
> 时间：2008-09-22T07:59:26.190
> 
> 标签：browser, browser-history

I'm looking for publications about the history of the internet browsers. Papers, articles, blog posts whatever. Cannot find anything on ACM IEEE etc. and my blog search also didn't reveal anything remarkable.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-22T08:25:27.000

你看过维基百科中的条目吗？这是一个有用的起点。

这里有一些让你开始：

[维基百科 - 网络浏览器](http://en.wikipedia.org/wiki/Web_browser)

[维基百科 - 网络浏览器的时间线](http://en.wikipedia.org/wiki/Timeline_of_web_browsers)

[维基百科 - 浏览器大战](http://en.wikipedia.org/wiki/Browser_war)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T08:09:44.700

There's Eric Sink's blog post: "[Memoirs From the Browser Wars](http://www.ericsink.com/Browser_Wars.html)".

Eric Sink was one of the members of the team that implemented Mosaic, the first web browser. He litterally *is* part of the the history of the internet browser :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-06T04:20:21.567

我会在一个像样的图书馆索引（或谷歌）中搜索的关键字是：

*   [Tim Berners-Lee](http://en.wikipedia.org/wiki/Tim_Berners-Lee)（第一个 HTTP 客户端和 HTTP 服务器的发明者）
*   [WorldWideWeb](http://en.wikipedia.org/wiki/WorldWideWeb)（上面提到的 HTTP 客户端。注意名称中没有空格。）
*   [NCSA Mosaic](http://en.wikipedia.org/wiki/NCSA_Mosaic)（第一个图形网络浏览器，演变为 Netscape 并最终演变为 Firefox）
*   [Marc Andreessen](http://en.wikipedia.org/wiki/Marc_Andreessen)（Mosaic 的项目负责人，Netscape 的创始人。也是最早设想基于浏览器的操作系统的技术专家之一，我们现在可以称之为“网络应用程序”。）
*   [浏览器大战](http://en.wikipedia.org/wiki/Browser_war)（应该涵盖与我们如何看待现代 Web 浏览器有关的大多数主要参与者）。

大部分这些内容都包含在之前帖子中建议的文章中。只是希望这可以帮助您选择可以帮助您找到学术资源的术语。

HTTP 客户端（现在更广为人知的是 Web 浏览器）是万维网（或简称为“网络”）的关键组件之一，它与更通用的“互联网”的区别在于它使用多种技术组合（最值得注意的是：HTML、HTTP（客户端和服务器）和域名）。您可能无法在搜索中找到好的来源的原因是您正在搜索“网络浏览器的历史”，这有点像搜索“吉他独奏的历史”，因为信息就在那里但与更大的话题。虽然您可能会得到一些结果，但您想要的大部分信息可能会集成到网络历史的来源中。这就是为什么我建议首先搜索 Tim Berners-Lee，因为他发明了所有对网络至关重要的主要组件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T13:43:59.543

正如 Eward 提到的，我将从 Wikipedia 开始。

但是在您阅读维基百科之后，请查看文章底部以了解所使用的来源。然后阅读这些来源。如果这是一篇学校论文，我怀疑你会因为使用维基百科而获得满分。

# windows - 适用于 Windows 的简单数据库应用程序

> ID：113723
> 
> 赞同：12
> 
> 时间：2008-09-22T08:01:42.517
> 
> 标签：windows, database, embedded-database

我需要为 Windows 构建一个简单的单用户数据库应用程序。主要要求是独立于 Windows 版本和安装的软件。您会推荐哪些技术（语言/框架）？我对语言的偏好是 Visual Basic。

编辑：VB.Net 和 SQL Server Compact Edition 怎么样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-22T08:03:02.530

我会推荐[Sqlite](http://www.sqlite.org/)。它是完全独立的，并且是*公共领域*，因此根本没有许可证问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-22T08:04:38.533

单用户还是多用户？

对于单个用户，答案是[SQLite](http://www.sqlite.org/)

对于多用户（或多线程），请尝试[MySQL](http://www.mysql.com/)或[PostgreSQL](http://www.postgresql.org/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-22T09:13:18.757

由于您的要求是基于 Windows 的应用程序，我建议您使用免费工具 sql server 2005 express edition，但有一些小的限制。当您使用付费版本时，您可以升级到更大的版本。

还有其他数据库引擎，例如 SQL Lite 或 FireBird，如果它们提供的支持和增长选项对您来说足够好，请选择它们

此外，Visual Basic 是生命周期的。VB.NET 目前可能是一个更好的基于 Windows 的平台。它将提供更好的平台/功能，并且当您想扩展您在项目中工作的人才时，我认为.NET 人才可能比想要使用死语言的程序员更容易获得。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-11-24T18:31:57.420

.NET[中的快速嵌入式数据库有哪些选项？](https://stackoverflow.com/questions/1578070/what-options-are-there-for-a-quick-embedded-db-in-net/1578102#1578102)

我将从那里重复我的答案：

"Or theres Esent, the built in database that exists in every copy of windows. Read about it here: [http://ayende.com/Blog/archive/2008/12/23/hidden-windows-gems-extensible-storage-engine.aspx](http://ayende.com/Blog/archive/2008/12/23/hidden-windows-gems-extensible-storage-engine.aspx)" and [http://www.codeplex.com/ManagedEsent](http://www.codeplex.com/ManagedEsent)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T08:12:35.720

SQLite 适用于本地桌面应用程序。如果您想要多个用户、几千兆数据和多个连接，我会使用 mysql 或 Firebird。

[http://www.mysql.com/](http://www.mysql.com/) [http://www.firebirdsql.org/](http://www.firebirdsql.org/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-22T11:03:00.057

[FireBird SQL](http://firebirdsql.org)服务器将是首选。它可以像传统数据库一样用于嵌入式和多用户模式。它实现了许多 SQL 标准并拥有强大的社区基础。它适用于 Windows、Linux、Solaris、OS X、HP-UX

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-22T10:08:33.820

如前所述，SQLite 是一个很棒的单用户数据库。 [此页面有 VB/SQLite 示例](http://www.tannertech.net/sqlite3vb/)。曾经担心的是 SQLite 解析外键约束，但不强制执行它们。您可以使用[此代码为 SQLite 生成“外键触发器”](http://www.rcs-comp.com/site/index.php/view/Utilities-SQLite_foreign_key_trigger_generator)，从而获得一个易于使用的具有 FK 约束的数据库。

但是，根据您的数据库需求的要求，您可能需要考虑 MS Access。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T10:25:05.997

我使用了 SQL Server 精简版。这就像 sqllite。使用 ADO.NET 访问的单个 SDF 文件。您可以使用 Visual Basic .NET 开发应用程序并使用 Visual Studio 管理数据库（添加表、列、约束等）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-22T08:03:13.683

SQLite 可能是您正在寻找的。 [http://www.sqlite.org/](http://www.sqlite.org/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T08:07:17.857

取决于您对应用程序的需求。

您可以使用[SQLLite](http://www.sqlite.org/)，它是一个非常好的数据库，无需安装。

您还可以使用[Microsoft SQL Server：SQL Server Compact 3.5](http://www.microsoft.com/sql/editions/compact/default.mspx)。

两者都是免费的！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-22T08:07:43.033

好吧，假设你之前没有任何经验...

您需要某种持久性存储（例如数据库）和客户端。对于存储，您几乎可以使用任何东西。例如，您可以在 MS Access 中创建数据库，然后将其作为文件发送，使用 ADO 访问它。其他选项是 MS SQL Express 版本（预装在某些机器上或可以免费安装）和大量开源数据库，如[SQLite](http://www.sqlite.org/)

对于客户端，VBScript 和 ADO（使用 OLE DB 驱动程序）不会出错。自黑暗时代以来，它们随每个 Windows 安装一起提供，您将在线获得大量参考/教程/答案。一个缺点：没有 UI 可言，因此您必须构建一个命令行界面（用于“简单”应用程序）。

如果您想构建一个 UI，我建议您使用 .NET WinForms。开销会大大增加，但 .NET 现在已安装在所有 XP/Vista 机器上，即使不是，您也可以始终将框架与您的应用程序一起安装。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-22T08:11:49.357

从您的帖子中不清楚您是否想要一个 Web 应用程序。

对于 Web 应用程序，MySQL 在 Windows 平台上有效地工作。您还拥有几乎无限的开发环境选项，包括 PHP、Ruby on Rails、Django 和 .Net。

如果您正在查看桌面应用程序，MS Access 可能是合适的……对于简单的应用程序来说非常简单。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-22T08:24:24.117

如果您想构建可以轻松移动到其他 PC 的应用程序，我更喜欢 Microsoft Access，它是易于使用且无需安装的小型数据库。它适用于地址簿、迷你 crud 系统等应用程序。

但是如果你想开发企业数据库系统，你应该使用[MySQL](http://www.mysql.com/)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-22T08:37:43.803

我不明白您所说的“独立形式 [...] 已安装软件”是什么意思。您至少需要安装 DBMS 以及一个客户端或用户界面。

我建议使用 MS Access。对于简单的单用户任务和快速原型开发来说，它既简单又便宜。只需购买开发版本（“正常”访问）即可创建数据库。Access 2007 的运行时版本可以从 Microsoft 主页免费下载 - 仅使用您创建的数据库。

它还将 DBMS 和 GUI 前端结合在同一个工具中。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-22T09:25:18.573

我敢提 MS Access ...吗？

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-22T10:54:54.880

如果您正在寻找占用空间小（最多几 MB）和易于部署（最终用户应该只安装您的应用程序以使其工作），那么您的选择是嵌入 SQLite 和 Firebird。

在这两者中，我会随时选择 Firebird，因为它完全支持 SQL（例如，您不能在 SQLite 中删除列）、ACID 合规性以及无需任何更改即可进入客户端/服务器的能力（只需如果您决定让多个用户在同一个数据库上工作，请将连接字符串从嵌入式更改为服务器）。

更不用说你可以使用全服务器开发（这意味着你的应用程序和数据库管理工具可以同时连接到数据库）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-22T12:04:27.927

我成功地使用了 Turbo Delphi（免费用于商业和非商业用途）+ ZeosLib（zeos.firmos.at）。

您需要与 .exe 一起分发的唯一东西是数据库客户端 dll（无需安装客户端，只需将 dll 放在同一目录中）。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-11-24T18:28:00.580

[可喜有用](http://kexi-project.org/)吗？

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-01-23T20:46:31.487

I can recommend from personal experience "My Visual database" free, no code, no sql, just drag and drop.

[http://myvisualdatabase.com/](http://myvisualdatabase.com/)

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2008-09-22T09:54:14.963

最好的选择是使用**[Delphi](http://www.codegear.com/products/delphi/win32)**创建一个 Win32 本机应用程序并使用 SQLLite 作为数据库。

原因是 Delphi 可以在机器上不安装任何其他产品的情况下生成本机 win32 应用程序。

# php - 即使更新了 sudoers，PHP 网页也不会启动 unix 命令

> ID：113728
> 
> 赞同：2
> 
> 时间：2008-09-22T08:03:05.027
> 
> 标签：php, exec, sudo

基本上我正在尝试从 php 网页重新启动服务。

这是代码：

```
<?php
exec ('/usr/bin/sudo /etc/init.d/portmap restart');
?> 
```

但是，在 中`/var/log/httpd/error_log`，我得到

> 无法更改为 sudoers gid：不允许操作

在 /var/log/messages 中，我得到

> 9 月 22 日 15:01:56 ri 内核：审计（1222063316.536:777）：avc：拒绝 { getattr } for pid=4851 comm="sh" name="var" dev=dm-0 ino=114241 scontext=root:system_r :httpd_sys_script_t tcontext=system_u:object_r:var_t tclass=dir
> Sep 22 15:01:56 ri kernel: audit(1222063316.549:778): avc: denied { setrlimit } for pid=4851 comm="sudo" scontext=root:system_r: httpd_sys_script_t tcontext=root:system_r:httpd_sys_script_t tclass=process
> Sep 22 15:01:56 ri kernel: audit(1222063316.565:779): avc: denied { read } for pid=4851 comm="sudo" name="shadow" dev= dm-0 ino=379669 scontext=root:system_r:httpd_sys_script_t tcontext=system_u:object_r:shadow_t tclass=file
> 9 月 22 日 15:01:56 ri kernel: audit(1222063316.568:780):avc: denied { read } for pid=4851 comm="sudo" name="shadow" dev=dm-0 ino=379669 scontext=root:system_r :httpd_sys_script_t tcontext=system_u:object_r:shadow_t tclass=file
> Sep 22 15:01:56 ri kernel: audit(1222063316.571:781):avc: denied { setgid } for pid=4851 comm="sudo" capability=6 scontext=root :system_r:httpd_sys_script_t tcontext=root:system_r:httpd_sys_script_t tclass=capability
> Sep 22 15:01:56 ri kernel: audit(1222063316.574:782):avc: denied { setuid } for pid=4851 comm="sudo" capability=7 scontext =root:system_r:httpd_sys_script_t tcontext=root:system_r:httpd_sys_script_t tclass=能力
> 9 月 22 日 15:01:56 ri kernel: audit(1222063316.577:783):avc: denied { setgid } for pid=4851 comm="sudo" capability=6 scontext=root:system_r:httpd_sys_script_t tcontext=root:system_r:httpd_sys_script_t tclass =能力

在我的 visudo 中，我添加了这些行

> 用户别名 WWW=apache
> 
> WWW ALL=(ALL) NOPASSWD:ALL

你能帮我么 ？难道我做错了什么 ？

谢谢你的帮助，

蒂邦

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-22T08:20:10.913

目前问题不在于 sudo ，而在于[SELinux](http://en.wikipedia.org/wiki/Selinux)，它（合理地）设置为拒绝 HTTPD 获得 root 权限。
您将需要明确允许此操作（您可以为此使用[audit2allow](http://fedoraproject.org/wiki/SELinux/audit2allow)），或者将 SELinux 设置为允许。我建议前者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T08:16:30.673

您收到的错误似乎与您的 SELinux 配置有关。您可以尝试暂时禁用它。

顺便说一句，我强烈建议您将 sudo 配置调整为更具限制性。

```
User_Alias WWW=apache
Cmnd_Alias WEBCMDS=/etc/init.d/portmap
WWW ALL=NOPASSWD: WEBCMDS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-28T11:15:59.957

我最近遇到了这个问题，上面接受的答案有帮助。但是，我想发布这个答案来详细说明，这样下一个人就不需要像我一样花太多时间了！

请遵循以下链接的第 7 节：[https](https://wiki.centos.org/HowTos/SELinux) ://wiki.centos.org/HowTos/SELinux 。

用 grep 做`httpd_sys_script_t`.

基本上步骤是：

```
# grep httpd_sys_script_t /var/log/audit/audit.log | audit2allow -M httpdallowsudo
# semodule -i httpdallowsudo.pp 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2008-09-22T08:19:41.103

这可能归结为尝试在非交互式 shell 中执行 sudo 之类的事情。

如果您在 apache 用户邮件日志中对 'sudo' 执行 grep，您可能会发现类似这样的内容

> sudo：对不起，你必须有一个 tty 才能运行 sudo

# linux - 当（Ubuntu）Linux机器上的IP地址更改（很可能使用dhclient挂钩）时，如何运行脚本？

> ID：113730
> 
> 赞同：3
> 
> 时间：2008-09-22T08:03:27.443
> 
> 标签：linux, unix, hook, dhcp

我有一个脚本可以联系几个来源并告诉他们“IP 地址 XXX.XXX.XXX.XXX 是我当前的”。我的测试 Web 服务器通过 DHCP 具有动态 IP 地址，除此之外，它需要在其 IP 地址更改时更新 DDNS 条目。然而，它不是唯一的，所以我需要运行我自己的自定义脚本。

我怀疑这可以通过附加要为给定 dhclient 挂钩运行的脚本来实现。但是我仍然需要知道我应该使用哪个钩子，以及如何使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T08:15:25.857

我建议将脚本放入 dhclient-exit-hooks.d。因为如果地址更改已经完成，您应该只更改 DDNS 条目。但是，如果分配地址失败，我不确定是否调用了 dhclient-exit-hooks。

编辑：手册页（man dhclient-script）说，exit-hooks 脚本将在 shell 变量（exit_status）中获取退出代码。所以你可以检查一下。

# cruisecontrol.net - CruiseControl.NET 构建后操作

> ID：113731
> 
> 赞同：0
> 
> 时间：2008-09-22T08:03:53.667
> 
> 标签：cruisecontrol.net

我们在我们的 ASP.NET 应用程序上设置了 CC.NET。当我们构建项目时，ASP.NET 应用程序被预编译并复制到网络共享，服务器从该网络共享运行应用程序。

服务器与开发盒有点不同，我们的暂存环境中的下一个服务器则更加不同。区别在于特定的配置文件等等——所以我想排除一些文件——或者在将预编译的应用程序复制到网络共享之前删除它们。

我的配置文件如下所示：

```
 <project name="Assembly.Web.project">
    <triggers>
        <intervalTrigger seconds="3600" />
    </triggers>
    <sourcecontrol type="svn">
        <trunkUrl>svn://svn-server/MyApp/Web/Trunk</trunkUrl>
        <workingDirectory>C:\build-server\Assembly\Web\TEST-HL</workingDirectory>
    <executable>C:\Program Files (x86)\SVN 1.5 bin\svn.exe</executable>
    <username>uid</username>
    <password>pwd</password>
    </sourcecontrol>
    <tasks>
        <msbuild>
          <executable>C:\Windows\Microsoft.NET\Framework64\v3.5\MSBuild.exe</executable>
          <workingDirectory>C:\build-server\Assembly\Web\TEST-HL</workingDirectory>
          <projectFile>C:\build-server\Assembly\Web\TEST-HL\Web\Web.sln</projectFile>
          <buildArgs>/noconsolelogger /p:Configuration=Debug /v:diag</buildArgs>
          <targets>Build</targets>
          <timeout>900</timeout>
          <logger>C:\Program Files\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll</logger>
        </msbuild>
    </tasks>
    <publishers>
        <buildpublisher>
             <sourceDir>C:\build-server\Assembly\Web\PrecompiledWeb</sourceDir>
             <publishDir>\\test-web01\Web</publishDir>
             <useLabelSubDirectory>false</useLabelSubDirectory>
             <alwaysPublish>false</alwaysPublish>
        </buildpublisher>           
    </publishers>
</project> 
```

如您所见，我使用 buildPublisher 将预编译文件复制到网络共享。我在这里要做的是 1）在复制某些文件之前删除它们或 2）在复制这些文件后替换它们。

我不想让一些应用程序运行监视特定文件以进行更改，然后用其他文件替换这些文件。我希望某些事情要么由 CC.NET 完成，要么由 CC.NET 触发。

你能用 CC.NET 启动一个 .bat 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T08:07:40.897

我使用[NAnt](http://nant.sourceforge.net/) [任务](http://www.cruisecontrolnet.org/projects/ccnet/wiki/NAnt_Task)进行所有发布、部署、清理等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T09:39:31.847

查看[MSDEPLOY](http://blogs.iis.net/msdeploy/archive/2008/01/22/welcome-to-the-web-deployment-team-blog.aspx)或[Web 部署项目](http://weblogs.asp.net/scottgu/archive/2008/01/28/vs-2008-web-deployment-project-support-released.aspx)。有一个问题将[在此处提供更多详细信息](https://stackoverflow.com/questions/45783/automate-deployment-for-web-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T08:14:24.530

你必须使用[NAnt](http://nant.sourceforge.net/)来处理这些事情。这是[Nant 的任务参考](http://nant.sourceforge.net/release/latest/help/tasks/)..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T19:56:02.147

当然 CruiseControl.NET 可以运行批处理文件，只需使用 exec 任务即可。但是，更简单的答案可能就是让 MSBuild 为您完成任务。在后编译目标中添加几个步骤应该很简单。

# powershell - 如何使用 PowerShell 停止和启动群集的“通用服务”？

> ID：113737
> 
> 赞同：2
> 
> 时间：2008-09-22T08:05:19.890
> 
> 标签：powershell

如何使用 PowerShell 停止和启动 Microsoft“集群管理员”软件中的“通用服务”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-26T17:57:42.807

您也可以使用 WMI。您可以通过以下方式获得所有通用服务：

```
$services = Get-WmiObject -Computer "Computer" -namespace 'root\mscluster' `
MSCluster_Resource | Where {$_.Type -eq "Generic Service"} 
```

要停止和启动服务：

```
$timeout = 15
$services[0].TakeOffline($timeout)
$services[0].BringOnline($timeout) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T08:27:07.027

事实证明，答案是简单地使用命令行工具 CLUSTER.EXE 来执行此操作：

集群 RES MyGenericServiceName /OFF

集群 RES MyGenericServiceName /ON

# javascript - 如何在初始 mousedown 事件后取消文本选择？

> ID：113750
> 
> 赞同：3
> 
> 时间：2008-09-22T08:10:56.677
> 
> 标签：javascript, jquery, html

我正在尝试实现一个基于单击并按住的弹出菜单，定位为（真正）缓慢的单击仍将触发默认操作，并设置延迟以使文本选择手势不会t 通常触发菜单。

我似乎无法做的是以一种不会首先阻止文本选择的方式取消文本选择：从事件处理程序（或调用`$(this).preventDefault()`）返回 false 会阻止用户选择，并且显然`$().trigger('mouseup')`根本不会对选择做任何事情。

*   这是在页面的一般上下文中，而不是特定于文本区域或其他文本字段。
*   `e.stopPropogation()`不取消文本选择。
*   如果满足某些条件，我并不是要*阻止*文本选择，而是要在短时间内*否决它们。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T08:19:18.577

尝试这个：

```
var input = document.getElementById('myInputField');
if (input) {
    input.onmousedown = function(e) {

        if (!e) e = window.event;
        e.cancelBubble = true;
        if (e.stopPropagation) e.stopPropagation();

    }
} 
```

如果没有，请阅读：

[http://www.quirksmode.org/js/introevents.html](http://www.quirksmode.org/js/introevents.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-05-31T13:58:57.140

除了顶级线程之外，还有一种官方方法可以在 DOM 中实现我认为您想要的东西。您可以使用范围对象来代替事件。

考虑一下，（在 FF3 上绝对有效）

```
window.onclick = 函数（evt）
{
   // 检索选择并显示其内容
   var selectObj = window.getSelection();
   警报（选择对象）；

   // 现在将选择折叠到选择的初始点
   var rangeObj = selectObj.getRangeAt(0);
   rangeObj.collapse(true);
}

```

不幸的是，这并不完全适用于 IE、Opera、Chrome 或 Safari。不知道为什么，因为在 Opera、Chrome 或 Safari 中，有一些与 collapse 和 getRangeAt 方法相关的东西。如果我知道更多，我会告诉你的。

* * *

我之前的答案的更新，更普遍的是选择对象和折叠、折叠开始、折叠结束方法。（[链接文字](https://developer.mozilla.org/en/DOM/Selection#Properties)）

现在考虑上面的 2.0：

```
window.onmouseup = 函数（evt）
{
   var selectObj = window.getSelection();
   警报（选择对象）；// 了解您选择的内容

   // 适用于 FF3、Safari、Opera 和 Chrome
   selectObj.collapseToStart();

   // 适用于 FF3、Safari、Chrome（但不适用于 Opera）
   /* selectObj.collapse(document.body, 0); */

   // 由于代码是原生的，我不知道为什么...
   // ...这让我很难过
}

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T09:47:01.453

我不确定这是否会有所帮助，但这里有一些代码可以取消选择文本：

```
// onselectstart is IE-only
if ('undefined' !== typeof this.onselectstart) {
    this.onselectstart = function () { return false; };
} else {
    this.onmousedown   = function () { return false; };
    this.onclick       = function () { return true;  };
} 
```

在这种情况下，“this”将是您要阻止文本选择的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T08:21:57.697

`$(this).focus()`（或任何类似的东西`document.body.focus()`）似乎可以解决问题，尽管我没有在 ff3 之外对其进行过测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T17:58:53.933

感谢 knight 提出了一个通用解决方案。这种轻微的修改还包括对 IE 7-10（可能还有 6）的支持。

我有一个与 cwillu-gmail 类似的问题。在特定的“设计”模式下，需要附加到 shift-click 事件（按住 shift 键时单击标签）以执行一些替代功能。（是的，听起来很奇怪，但这正是客户想要的。）这部分很简单，但有选择文本的烦人效果。这对我有用：（我使用 onclick 但你可以使用 onmouseup .. 取决于你想要做什么以及何时）

```
var element = document.getElementById("myElementId");
element.onclick = function (event)
{
    // if (event.shiftKey) // uncomment this line to only deselect text when clicking while holding shift key
    {
        if (document.selection)
        {
            document.selection.empty(); // works in IE (7/8/9/10)
        }
        else if (window.getSelection)
        {
            window.getSelection().collapseToStart(); // works in chrome/safari/opera/FF
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-02-02T07:27:03.173

这个问题的答案对我有用： [如何使用 jquery 禁用文本选择？](https://stackoverflow.com/a/2700029/694469)

（它不仅禁用，而且*取消*任何文本选择。
至少在我的 FF 和 Chrome 计算机上。）

这是答案的作用：

```
 .attr('unselectable', 'on')

    '-ms-user-select': 'none',
    '-moz-user-select': 'none',
    '-webkit-user-select': 'none',
    'user-select': 'none'

    .each(function() {  // for IE
      this.onselectstart = function() { return false; };
    }); 
```

# c# - 以编程方式将应用程序添加到 Windows 防火墙

> ID：113755
> 
> 赞同：27
> 
> 时间：2008-09-22T08:13:38.200
> 
> 标签：c#, windows, firewall

我有一个通过 ClickOnce 安装和更新的应用程序。该应用程序通过 FTP 下载文件，因此需要将其作为例外添加到 Windows 防火墙。由于 ClickOnce 的工作方式，EXE 的路径会随着每次更新而改变，因此异常也需要改变。对防火墙进行更改以使其对最终用户*不可见的最佳方法是什么？*

（该应用程序是用 C# 编写的）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-22T08:22:41.640

不确定这是否是最好的方法，但运行[netsh](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-xp/bb490617(v=technet.10))应该可以：

> netsh 防火墙添加 allowedprogram C:\MyApp\MyApp.exe MyApp ENABLE

我认为这需要管理员权限，原因很明显:)

编辑：我只是对 ClickOnce 了解不够，不知道您是否可以通过它运行外部程序。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-22T12:11:27.193

我找到了这篇文章，其中包含一个完整的包装类，用于操作 Windows 防火墙。[将应用程序添加到 Windows 防火墙的例外列表中](http://web.archive.org/web/20070707110141/http://www.dot.net.nz/Default.aspx?tabid=42&mid=404&ctl=Details&ItemID=8)

```
/// 

/// Allows basic access to the windows firewall API.
/// This can be used to add an exception to the windows firewall
/// exceptions list, so that our programs can continue to run merrily
/// even when nasty windows firewall is running.
///
/// Please note: It is not enforced here, but it might be a good idea
/// to actually prompt the user before messing with their firewall settings,
/// just as a matter of politeness.
/// 

/// 
/// To allow the installers to authorize idiom products to work through
/// the Windows Firewall.
/// 
public class FirewallHelper
{
    #region Variables
    /// 

    /// Hooray! Singleton access.
    /// 

    private static FirewallHelper instance = null;

    /// 

    /// Interface to the firewall manager COM object
    /// 

    private INetFwMgr fwMgr = null;
    #endregion
    #region Properties
    /// 

    /// Singleton access to the firewallhelper object.
    /// Threadsafe.
    /// 

    public static FirewallHelper Instance
    {
        get
        {
            lock (typeof(FirewallHelper))
            {
                if (instance == null)
                    instance = new FirewallHelper();
                return instance;
            }
        }
    }
    #endregion
    #region Constructivat0r
    /// 

    /// Private Constructor.  If this fails, HasFirewall will return
    /// false;
    /// 

    private FirewallHelper()
    {
        // Get the type of HNetCfg.FwMgr, or null if an error occurred
        Type fwMgrType = Type.GetTypeFromProgID("HNetCfg.FwMgr", false);

        // Assume failed.
        fwMgr = null;

        if (fwMgrType != null)
        {
            try
            {
                fwMgr = (INetFwMgr)Activator.CreateInstance(fwMgrType);
            }
            // In all other circumnstances, fwMgr is null.
            catch (ArgumentException) { }
            catch (NotSupportedException) { }
            catch (System.Reflection.TargetInvocationException) { }
            catch (MissingMethodException) { }
            catch (MethodAccessException) { }
            catch (MemberAccessException) { }
            catch (InvalidComObjectException) { }
            catch (COMException) { }
            catch (TypeLoadException) { }
        }
    }
    #endregion
    #region Helper Methods
    /// 

    /// Gets whether or not the firewall is installed on this computer.
    /// 

    /// 
    public bool IsFirewallInstalled
    {
        get
        {
            if (fwMgr != null &&
                  fwMgr.LocalPolicy != null &&
                  fwMgr.LocalPolicy.CurrentProfile != null)
                return true;
            else
                return false;
        }
    }

    /// 

    /// Returns whether or not the firewall is enabled.
    /// If the firewall is not installed, this returns false.
    /// 

    public bool IsFirewallEnabled
    {
        get
        {
            if (IsFirewallInstalled && fwMgr.LocalPolicy.CurrentProfile.FirewallEnabled)
                return true;
            else
                return false;
        }
    }

    /// 

    /// Returns whether or not the firewall allows Application "Exceptions".
    /// If the firewall is not installed, this returns false.
    /// 

    /// 
    /// Added to allow access to this metho
    /// 
    public bool AppAuthorizationsAllowed
    {
        get
        {
            if (IsFirewallInstalled && !fwMgr.LocalPolicy.CurrentProfile.ExceptionsNotAllowed)
                return true;
            else
                return false;
        }
    }

    /// 

    /// Adds an application to the list of authorized applications.
    /// If the application is already authorized, does nothing.
    /// 

    /// 
    ///         The full path to the application executable.  This cannot
    ///         be blank, and cannot be a relative path.
    /// 
    /// 
    ///         This is the name of the application, purely for display
    ///         puposes in the Microsoft Security Center.
    /// 
    /// 
    ///         When applicationFullPath is null OR
    ///         When appName is null.
    /// 
    /// 
    ///         When applicationFullPath is blank OR
    ///         When appName is blank OR
    ///         applicationFullPath contains invalid path characters OR
    ///         applicationFullPath is not an absolute path
    /// 
    /// 
    ///         If the firewall is not installed OR
    ///         If the firewall does not allow specific application 'exceptions' OR
    ///         Due to an exception in COM this method could not create the
    ///         necessary COM types
    /// 
    /// 
    ///         If no file exists at the given applicationFullPath
    /// 
    public void GrantAuthorization(string applicationFullPath, string appName)
    {
        #region  Parameter checking
        if (applicationFullPath == null)
            throw new ArgumentNullException("applicationFullPath");
        if (appName == null)
            throw new ArgumentNullException("appName");
        if (applicationFullPath.Trim().Length == 0)
            throw new ArgumentException("applicationFullPath must not be blank");
        if (applicationFullPath.Trim().Length == 0)
            throw new ArgumentException("appName must not be blank");
        if (applicationFullPath.IndexOfAny(Path.InvalidPathChars) >= 0)
            throw new ArgumentException("applicationFullPath must not contain invalid path characters");
        if (!Path.IsPathRooted(applicationFullPath))
            throw new ArgumentException("applicationFullPath is not an absolute path");
        if (!File.Exists(applicationFullPath))
            throw new FileNotFoundException("File does not exist", applicationFullPath);
        // State checking
        if (!IsFirewallInstalled)
            throw new FirewallHelperException("Cannot grant authorization: Firewall is not installed.");
        if (!AppAuthorizationsAllowed)
            throw new FirewallHelperException("Application exemptions are not allowed.");
        #endregion

        if (!HasAuthorization(applicationFullPath))
        {
            // Get the type of HNetCfg.FwMgr, or null if an error occurred
            Type authAppType = Type.GetTypeFromProgID("HNetCfg.FwAuthorizedApplication", false);

            // Assume failed.
            INetFwAuthorizedApplication appInfo = null;

            if (authAppType != null)
            {
                try
                {
                    appInfo = (INetFwAuthorizedApplication)Activator.CreateInstance(authAppType);
                }
                // In all other circumnstances, appInfo is null.
                catch (ArgumentException) { }
                catch (NotSupportedException) { }
                catch (System.Reflection.TargetInvocationException) { }
                catch (MissingMethodException) { }
                catch (MethodAccessException) { }
                catch (MemberAccessException) { }
                catch (InvalidComObjectException) { }
                catch (COMException) { }
                catch (TypeLoadException) { }
            }

            if (appInfo == null)
                throw new FirewallHelperException("Could not grant authorization: can't create INetFwAuthorizedApplication instance.");

            appInfo.Name = appName;
            appInfo.ProcessImageFileName = applicationFullPath;
            // ...
            // Use defaults for other properties of the AuthorizedApplication COM object

            // Authorize this application
            fwMgr.LocalPolicy.CurrentProfile.AuthorizedApplications.Add(appInfo);
        }
        // otherwise it already has authorization so do nothing
    }
    /// 

    /// Removes an application to the list of authorized applications.
    /// Note that the specified application must exist or a FileNotFound
    /// exception will be thrown.
    /// If the specified application exists but does not current have
    /// authorization, this method will do nothing.
    /// 

    /// 
    ///         The full path to the application executable.  This cannot
    ///         be blank, and cannot be a relative path.
    /// 
    /// 
    ///         When applicationFullPath is null
    /// 
    /// 
    ///         When applicationFullPath is blank OR
    ///         applicationFullPath contains invalid path characters OR
    ///         applicationFullPath is not an absolute path
    /// 
    /// 
    ///         If the firewall is not installed.
    /// 
    /// 
    ///         If the specified application does not exist.
    /// 
    public void RemoveAuthorization(string applicationFullPath)
    {

        #region  Parameter checking
        if (applicationFullPath == null)
            throw new ArgumentNullException("applicationFullPath");
        if (applicationFullPath.Trim().Length == 0)
            throw new ArgumentException("applicationFullPath must not be blank");
        if (applicationFullPath.IndexOfAny(Path.InvalidPathChars) >= 0)
            throw new ArgumentException("applicationFullPath must not contain invalid path characters");
        if (!Path.IsPathRooted(applicationFullPath))
            throw new ArgumentException("applicationFullPath is not an absolute path");
        if (!File.Exists(applicationFullPath))
            throw new FileNotFoundException("File does not exist", applicationFullPath);
        // State checking
        if (!IsFirewallInstalled)
            throw new FirewallHelperException("Cannot remove authorization: Firewall is not installed.");
        #endregion

        if (HasAuthorization(applicationFullPath))
        {
            // Remove Authorization for this application
            fwMgr.LocalPolicy.CurrentProfile.AuthorizedApplications.Remove(applicationFullPath);
        }
        // otherwise it does not have authorization so do nothing
    }
    /// 

    /// Returns whether an application is in the list of authorized applications.
    /// Note if the file does not exist, this throws a FileNotFound exception.
    /// 

    /// 
    ///         The full path to the application executable.  This cannot
    ///         be blank, and cannot be a relative path.
    /// 
    /// 
    ///         The full path to the application executable.  This cannot
    ///         be blank, and cannot be a relative path.
    /// 
    /// 
    ///         When applicationFullPath is null
    /// 
    /// 
    ///         When applicationFullPath is blank OR
    ///         applicationFullPath contains invalid path characters OR
    ///         applicationFullPath is not an absolute path
    /// 
    /// 
    ///         If the firewall is not installed.
    /// 
    /// 
    ///         If the specified application does not exist.
    /// 
    public bool HasAuthorization(string applicationFullPath)
    {
        #region  Parameter checking
        if (applicationFullPath == null)
            throw new ArgumentNullException("applicationFullPath");
        if (applicationFullPath.Trim().Length == 0)
            throw new ArgumentException("applicationFullPath must not be blank");
        if (applicationFullPath.IndexOfAny(Path.InvalidPathChars) >= 0)
            throw new ArgumentException("applicationFullPath must not contain invalid path characters");
        if (!Path.IsPathRooted(applicationFullPath))
            throw new ArgumentException("applicationFullPath is not an absolute path");
        if (!File.Exists(applicationFullPath))
            throw new FileNotFoundException("File does not exist.", applicationFullPath);
        // State checking
        if (!IsFirewallInstalled)
            throw new FirewallHelperException("Cannot remove authorization: Firewall is not installed.");

        #endregion

        // Locate Authorization for this application
        foreach (string appName in GetAuthorizedAppPaths())
        {
            // Paths on windows file systems are not case sensitive.
            if (appName.ToLower() == applicationFullPath.ToLower())
                return true;
        }

        // Failed to locate the given app.
        return false;

    }

    /// 

    /// Retrieves a collection of paths to applications that are authorized.
    /// 

    /// 
    /// 
    ///         If the Firewall is not installed.
    ///   
    public ICollection GetAuthorizedAppPaths()
    {
        // State checking
        if (!IsFirewallInstalled)
            throw new FirewallHelperException("Cannot remove authorization: Firewall is not installed.");

        ArrayList list = new ArrayList();
        //  Collect the paths of all authorized applications
        foreach (INetFwAuthorizedApplication app in fwMgr.LocalPolicy.CurrentProfile.AuthorizedApplications)
            list.Add(app.ProcessImageFileName);

        return list;
    }
    #endregion
}

/// 

/// Describes a FirewallHelperException.
/// 

/// 
///
/// 
public class FirewallHelperException : System.Exception
{
    /// 

    /// Construct a new FirewallHelperException
    /// 

    /// 
    public FirewallHelperException(string message)
      : base(message)
    { }
} 
```

ClickOnce 沙盒没有出现任何问题。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-22T08:26:39.777

可以从防火墙访问数据，请看以下文章。

*   [Windows XP SP2 防火墙控制器](https://www.codeproject.com/Articles/10911/Windows-XP-SP2-Firewall-Controller)
*   [通过 COM 互操作使用 C# 控制 Windows 防火墙](http://www.shafqatahmed.com/2008/01/controlling-win.html)

真正的问题是 ClickOnce 沙盒是否允许这种访问？我的猜测是它没有。也许您可以使用网络服务？（有关 ClickOnce 中数据访问方法的更多信息，请参阅[在 ClickOnce 应用程序中访问本地和远程数据](https://docs.microsoft.com/en-gb/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications?view=vs-2015)）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-05T08:17:39.727

假设我们使用的是 Visual Studio Installer->Setup Project - 您需要在正在安装的程序集中有这样的安装程序类，然后确保在安装阶段为“主要输出”添加自定义操作。

```
using System.Collections;
using System.ComponentModel;
using System.Configuration.Install;
using System.IO;
using System.Diagnostics;

namespace YourNamespace
{
    [RunInstaller(true)]
    public class AddFirewallExceptionInstaller : Installer
    {
        protected override void OnAfterInstall(IDictionary savedState)
        {
            base.OnAfterInstall(savedState);

            var path = Path.GetDirectoryName(Context.Parameters["assemblypath"]);
            OpenFirewallForProgram(Path.Combine(path, "YourExe.exe"),
                                   "Your program name for display");
        }

        private static void OpenFirewallForProgram(string exeFileName, string displayName)
        {
            var proc = Process.Start(
                new ProcessStartInfo
                    {
                        FileName = "netsh",
                        Arguments =
                            string.Format(
                                "firewall add allowedprogram program=\"{0}\" name=\"{1}\" profile=\"ALL\"",
                                exeFileName, displayName),
                        WindowStyle = ProcessWindowStyle.Hidden
                    });
            proc.WaitForExit();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-22T08:27:03.580

我知道的最简单的方法是使用[netsh](http://en.wikipedia.org/wiki/Netsh)，你可以简单地删除规则并重新创建它，或者设置一个端口规则，如果你的规则是固定的。
[这](http://technet.microsoft.com/en-us/library/bb490617.aspx "附录 B：Netsh 防火墙上下文的 Netsh 命令语法")是一个描述其防火墙上下文选项的页面。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-03-16T19:38:42.247

可以在 The Wayback Machine 上找到“将应用程序添加到 Windows 防火墙上的例外列表”的死链接：

[http://web.archive.org/web/20070707110141/http://www.dot.net.nz/Default.aspx?tabid=42&mid=404&ctl=Details&ItemID=8](http://web.archive.org/web/20070707110141/http://www.dot.net.nz/Default.aspx?tabid=42&mid=404&ctl=Details&ItemID=8)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-29T03:52:44.133

这个答案可能为时已晚。这就是我最终使用的：

[https://support.microsoft.com/en-gb/help/947709/how-to-use-the-netsh-advfirewall-firewall-context-instead-of-the-netsh](https://support.microsoft.com/en-gb/help/947709/how-to-use-the-netsh-advfirewall-firewall-context-instead-of-the-netsh)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-05-23T14:00:08.177

答案是您只允许受信任的软件以管理员权限运行。有时，某些软件必须具有管理员权限并对您的系统进行敏感更改。否则，您还不如拥有一个只读硬盘...

# winapi - 您可以将一个进程的 Direct3D 窗口渲染到另一个进程的 HWND 中吗？

> ID：113758
> 
> 赞同：8
> 
> 时间：2008-09-22T08:14:18.527
> 
> 标签：winapi, direct3d

我想要做的是让 Windows 应用程序启动另一个 Direct3D 应用程序，并将 Direct3D 应用程序呈现到父进程提供的控件中。

这甚至可能吗？如果是，它会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-02T20:08:46.383

它可以轻松完成，您只需在创建 D3DDevice 时将 HWND 窗口 id 作为参数传递。它甚至可以在互操作期间工作 - 您可以将 hWnd 从 .NET 传递到 C++ 并使用本机 directX 呈现 C# 窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-08T19:53:04.503

下面是一个示例，在现有 Win32 窗口中托管 WPF 窗口的内容。我在编写基于 WPF 的屏幕保护程序时这样做了，必须渲染到屏幕保护程序的小预览窗口中。

[http://stuff.seans.com/2008/09/01/writing-a-screen-saver-in-wpf/](http://stuff.seans.com/2008/09/01/writing-a-screen-saver-in-wpf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T08:53:48.993

这个有可能。我记得在编写屏幕保护程序时在 VB6 中做过。屏幕保护程序控制面板使用预览窗口的 HWND 向屏幕保护程序发送命令行。使用该 HWND，您可以获取 HDC 并从那里获取您需要的所有其他内容。

# jsp - 有没有办法继承特定 JSP 标签的现有 TLD 定义？

> ID：113765
> 
> 赞同：5
> 
> 时间：2008-09-22T08:16:40.267
> 
> 标签：jsp, tags

我计划扩展 Spring 提供的基本 html 输入标记，以将更多功能融入其中。我过去也为 Struts 做过类似的练习。那时，我必须创建一个 tld 文件，其中包含我引入的属性以及父标记中可用的所有属性。

这有点令人厌烦和重复，所以问题是是否有继承特定 JSP 标签的现有 TLD 定义？

或者有什么捷径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T12:25:11.887

我认为没有**继承**TLD 定义的选项。

我认为最短的解决方案是继承标签类并将 tld 更改为您的新（派生）类。

# java - 如何解决java图像缩放错误

> ID：113776
> 
> 赞同：0
> 
> 时间：2008-09-22T08:21:25.777
> 
> 标签：java, image-scaling

我有一个java servlet，它在缩小图像时遇到了这个错误......

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5101502](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5101502)

我正在尝试找出解决它的最佳方法，并感谢社区的任何想法。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-23T20:58:16.713

使用 Java 进行图像缩放可能会非常复杂 - 我在执行批处理时遇到了许多可重现的 JVM 崩溃，但这些与您的错误无关。最后，我最终使用了[ImageMagick](http://www.imagemagick.org/script/index.php)的外部命令行工具“convert” ，可用于相关平台。只需使用`Runtime.exec(.)`适当的参数调用它。可能比真正的 Java 解决方案还要快，但这对于所有应用程序来说肯定不是一个好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T08:38:19.683

您可能想要使用 Java 高级成像 (JAI) API。可以在[此处](http://archives.java.sun.com/cgi-bin/wa?A2=ind9908&L=jai-interest&P=R14150)找到如何使用 JAI 缩放图像的示例。

# javascript - JavaScript curry：有哪些实际应用？

> ID：113780
> 
> 赞同：181
> 
> 时间：2008-09-22T08:22:06.183
> 
> 标签：javascript, function, currying, partial-application

我想我还没学会咖喱。我明白它的作用，以及如何去做。我只是想不出我会使用它的情况。

你在哪里使用 JavaScript 中的柯里化（或者主要库在哪里使用它）？欢迎使用 DOM 操作或一般应用程序开发示例。

[其中一个答案](https://stackoverflow.com/questions/113780/javascript-curry-what-are-the-practical-applications#113799)提到了动画。类似的函数`slideUp`，`fadeIn`将元素作为参数，通常是一个柯里化函数，返回内置默认“动画函数”的高阶函数。为什么这比仅仅应用带有一些默认值的更高层函数更好？

使用它有什么缺点吗？

根据这里的要求，有一些关于 JavaScript currying 的好资源：

*   [http://www.dustindiaz.com/javascript-curry/](http://www.dustindiaz.com/javascript-curry/)
*   Crockford, Douglas (2008) *JavaScript：好的部分*
*   [http://www.svendtofte.com/code/curried_javascript/](http://www.crockford.com/javascript/www_svendtofte_com/code/curried_javascript/index.html) （绕道进入 ML，所以跳过“ML 速成课程”的整个部分，然后从“如何编写 curried JavaScript”重新开始）
*   [http://web.archive.org/web/20111217011630/http://blog.morrisjohns.com:80/javascript_closures_for_dummies](http://web.archive.org/web/20111217011630/http://blog.morrisjohns.com:80/javascript_closures_for_dummies)
*   [JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-does-a-javascript-closure-work)
*   **[http://ejohn.org/blog/partial-functions-in-javascript](http://ejohn.org/blog/partial-functions-in-javascript/)（Resig 先生照常谈钱）**
*   [http://benalman.com/news/2010/09/partial-application-in-javascript/](http://benalman.com/news/2010/09/partial-application-in-javascript/)

当他们在评论中出现时，我会添加更多内容。

* * *

因此，根据答案，一般来说，柯里化和部分应用是便利技术。

如果您经常通过使用相同配置调用高级函数来“优化”高级函数，则可以对高级函数进行 curry（或使用 Resig 的部分）来创建简单、简洁的辅助方法。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2011-07-28T15:49:08.027

这是使用闭包的 JavaScript 中柯里化的一个[**有趣且实用的用法**](http://javascriptweblog.wordpress.com/2010/10/25/understanding-javascript-closures/)：

> ```
> function converter(toUnit, factor, offset, input) {
>     offset = offset || 0;
>     return [((offset + input) * factor).toFixed(2), toUnit].join(" ");
> }
> 
> var milesToKm = converter.curry('km', 1.60936, undefined);
> var poundsToKg = converter.curry('kg', 0.45460, undefined);
> var farenheitToCelsius = converter.curry('degrees C', 0.5556, -32);
> 
> milesToKm(10);            // returns "16.09 km"
> poundsToKg(2.5);          // returns "1.14 kg"
> farenheitToCelsius(98);   // returns "36.67 degrees C" 
> ```

这依赖于 的`curry`扩展`Function`，尽管您可以看到它只使用`apply`（没什么花哨的）：

> ```
> Function.prototype.curry = function() {
>     if (arguments.length < 1) {
>         return this; //nothing to curry with - return function
>     }
>     var __method = this;
>     var args = toArray(arguments);
>     return function() {
>         return __method.apply(this, args.concat([].slice.apply(null, arguments)));
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-09-22T09:47:20.220

@汉克盖伊

回应 EmbiggensTheMind 的评论：

我想不出一个在 JavaScript中单独使用[柯里化的例子。](http://en.wikipedia.org/wiki/Currying)它是一种将具有多个参数的函数调用转换为每个调用具有单个参数的函数调用链的技术，但 JavaScript 支持在单个函数调用中使用多个参数。

不过，在 JavaScript 中——我假设大多数其他实际语言（不是 lambda 演算）——它通常与部分应用程序相关联。John Resig[更好地解释它](http://ejohn.org/blog/partial-functions-in-javascript/#postcomment)，但要点是有一些逻辑将应用于两个或多个参数，并且您只知道其中一些参数的值。

您可以使用部分应用程序/currying 来修复那些已知值并返回一个仅接受未知数的函数，以便稍后在您实际拥有希望传递的值时调用。这提供了一种绝妙的方法来避免重复自己，因为您将一遍又一遍地使用所有相同的值调用相同的 JavaScript 内置函数，但只有一个。窃取约翰的例子：

```
String.prototype.csv = String.prototype.split.partial(/,\s*/);
var results = "John, Resig, Boston".csv();
alert( (results[1] == "Resig") + " The text values were split properly" ); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-03T15:25:47.820

同意 Hank Gay - 它在某些真正的函数式编程语言中非常有用 - 因为它是必要的部分。例如，在 Haskell 中，您根本无法将多个参数传递给一个函数 - 在纯函数式编程中您无法做到这一点。您一次获取一个参数并建立您的功能。在 JavaScript 中它是完全没有必要的，尽管像“转换器”这样人为的例子。这是相同的转换器代码，无需柯里化：

```
var converter = function(ratio, symbol, input) {
    return (input*ratio).toFixed(2) + " " + symbol;
}

var kilosToPoundsRatio = 2.2;
var litersToUKPintsRatio = 1.75;
var litersToUSPintsRatio = 1.98;
var milesToKilometersRatio = 1.62;

converter(kilosToPoundsRatio, "lbs", 4); //8.80 lbs
converter(litersToUKPintsRatio, "imperial pints", 2.4); //4.20 imperial pints
converter(litersToUSPintsRatio, "US pints", 2.4); //4.75 US pints
converter(milesToKilometersRatio, "km", 34); //55.08 km 
```

我非常希望 Douglas Crockford 在“JavaScript: The Good Parts”中提到了柯里化的历史和实际使用，而不是他的随意评论。读完之后很长一段时间里，我都感到困惑，直到我学习函数式编程并意识到这就是它的来源。

经过一番思考，我认为 JavaScript 中的柯里化有一个有效的用例：如果您尝试使用 JavaScript 使用纯函数式编程技术进行编写。不过，这似乎是一个罕见的用例。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-22T08:49:04.527

我发现类似于 python 的函数`functools.partial`在 JavaScript 中更有用：

```
function partial(fn) {
  return partialWithScope.apply(this,
    Array.prototype.concat.apply([fn, this],
      Array.prototype.slice.call(arguments, 1)));
}

function partialWithScope(fn, scope) {
  var args = Array.prototype.slice.call(arguments, 2);
  return function() {
    return fn.apply(scope, Array.prototype.concat.apply(args, arguments));
  };
} 
```

你为什么要使用它？您想要使用 this 的常见情况是当您想要将`this`函数绑定到值时：

```
var callback = partialWithScope(Object.function, obj); 
```

现在当回调被调用时，`this`指向`obj`. 这在事件情况下或节省一些空间时很有用，因为它通常会使代码更短。

Currying 类似于 partial，不同之处在于 currying 返回的函数只接受一个参数（据我所知）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T08:46:53.783

这不是魔法或任何东西......只是匿名函数的一种令人愉快的简写。

`partial(alert, "FOO!")`相当于`function(){alert("FOO!");}`

`partial(Math.max, 0)`对应于`function(x){return Math.max(0, x);}`

对 partial 的调用（[MochiKit](http://mochikit.com)术语。我认为其他一些库为函数提供了一个 .curry 方法，它做同样的事情）看起来比匿名函数稍微好一点，噪音也更少。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-07-22T10:39:46.840

我知道它的旧线程，但我将不得不展示它是如何在 javascript 库中使用的：

我将使用 lodash.js 库来具体描述这些概念。

例子：

```
var fn = function(a,b,c){ 
return a+b+c+(this.greet || ‘'); 
} 
```

部分应用：

```
var partialFnA = _.partial(fn, 1,3); 
```

咖喱：

```
var curriedFn = _.curry(fn); 
```

捆绑：

```
var boundFn = _.bind(fn,object,1,3 );//object= {greet: ’!'} 
```

用法：

```
curriedFn(1)(3)(5); // gives 9 
or 
curriedFn(1,3)(5); // gives 9 
or 
curriedFn(1)(_,3)(2); //gives 9

partialFnA(5); //gives 9

boundFn(5); //gives 9! 
```

不同之处：

在柯里化之后，我们得到了一个没有预先绑定参数的新函数。

在部分应用之后，我们得到一个与一些预先绑定的参数绑定的函数。

在绑定中，我们可以绑定一个用于替换“this”的上下文，如果没有绑定任何函数的默认值将是窗口范围。

忠告：没有必要重新发明轮子。部分应用程序/绑定/currying 非常相关。你可以看到上面的区别。在任何地方使用这个含义，人们都会认识到你在做什么，而不会出现理解问题，而且你将不得不使用更少的代码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-07-29T17:47:35.980

考虑`filter`功能。你想为它写一个回调。

```
let x = [1,2,3,4,5,6,7,11,12,14,15];
let results = x.filter(callback); 
```

假设只想输出偶数，所以：

```
let callback = x => x % 2 === 0; 
```

现在想象我们想要实现我们的`callback`这样，根据场景它输出高于某个**阈值**的偶数（这个数字应该是可配置的）。

我们不能轻易地将这样的阈值数作为`callback`函数的参数，因为`filter`调用`callback`并默认传递数组元素和索引。

你将如何实现这一点？

这是一个很好的柯里化用例：

```
let x = [1,2,3,4,5,6,7,11,12,14,15];
let callback = (threshold) => (x) => (x % 2==0 && x > threshold);

let results1 = x.filter(callback(5)); // Even numbers higher than 5
let results2 = x.filter(callback(10)); // Even numbers higher than 10

console.log(results1,results2);
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-22T08:26:22.443

至于使用它的库，总是有[Functional](http://osteele.com/sources/javascript/functional/)。

什么时候在 JS 中有用？可能同时它在其他现代语言中也很有用，但我唯一能看到自己使用它的时候是与部分应用程序结合使用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-22T08:27:38.947

我会说，很可能，JS 中的所有动画库都在使用柯里化。不必为每次调用传递一组受影响的元素和一个函数，描述元素的行为方式，将其传递给一个更高阶的函数，以确保所有时间的东西，它通常更容易让客户发布，因为公共 API 一些像“slideUp”、“fadeIn”这样的函数，它只接受元素作为参数，这只是一些返回高阶函数的柯里化函数，内置了默认的“动画函数”。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-07-23T22:01:54.813

这是一个例子。

我正在使用 JQuery 检测一堆字段，以便查看用户在做什么。代码如下所示：

```
$('#foo').focus(trackActivity);
$('#foo').blur(trackActivity);
$('#bar').focus(trackActivity);
$('#bar').blur(trackActivity); 
```

（对于非 JQuery 用户，我的意思是每当几个字段获得或失去焦点时，我希望调用 trackActivity() 函数。我也可以使用匿名函数，但我必须复制它4次，所以我把它拔出来并命名。）

现在事实证明，其中一个字段需要以不同的方式处理。我希望能够在其中一个调用中传递一个参数，以传递给我们的跟踪基础设施。使用咖喱，我可以。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-03-20T18:52:10.900

JavaScript 函数在其他函数式语言中称为 lamda。它可用于根据其他开发人员的简单输入来编写新的 api（更强大或更复杂的功能）。咖喱只是其中一种技术。你可以用它来创建一个简化的api来调用一个复杂的api。如果你是使用简化 api 的开发者（例如你使用 jQuery 做简单的操作），你不需要使用 curry。但是如果你想创建简化的 api，curry 是你的朋友。您必须编写一个 javascript 框架（如 jQuery、mootools）或库，然后您才能体会到它的强大功能。[我在http://blog.semanticsworks.com/2011/03/enhanced-curry-method.html](http://blog.semanticsworks.com/2011/03/enhanced-curry-method.html)写了一个增强的咖喱函数. 你不需要 curry 方法来做柯里化，它只是帮助做柯里化，但你总是可以通过编写函数 A(){} 来手动完成，以返回另一个函数 B(){}。为了让它更有趣，使用函数 B() 来返回另一个函数 C()。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-02-07T16:45:52.020

我同意，有时您希望通过创建一个始终填充第一个参数的值的伪函数来让事情顺利进行。幸运的是，我遇到了一个名为 jPaq 的全新 JavaScript 库（h ttp [:// jpaq.org/](http://jpaq.org/) )，它提供了这个功能。该库最好的一点是您可以下载自己的构建，其中仅包含您需要的代码。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-04-07T23:04:47.097

我刚刚写了一个 jPaq 示例，它展示了 curry 函数的一些很酷的应用。在这里查看： [Currying Up String Functions](http://jpaq.org/examples/7)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-06-01T18:21:00.497

只是想为 Functional.js 添加一些资源：

讲座/会议解释一些应用程序 [http://www.youtube.com/watch?v=HAcN3JyQoyY](http://www.youtube.com/watch?v=HAcN3JyQoyY)

更新了 Functional.js 库： [https](https://github.com/loop-recur/FunctionalJS) ://github.com/loop-recur/FunctionalJS 一些不错的帮手（对不起，这里没有声誉：p）：/loop-recur/PreludeJS

我最近一直在使用这个库来减少 js IRC 客户端帮助库中的重复。这是很棒的东西——真的有助于清理和简化代码。

此外，如果性能成为问题（但这个库很轻），只需使用本机函数重写就很容易。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-08-20T11:17:03.927

您可以使用本机绑定进行快速的单行解决方案

```
function clampAngle(min, max, angle) {
    var result, delta;
    delta = max - min;
    result = (angle - min) % delta;
    if (result < 0) {
        result += delta;
    }
    return min + result;
};

var clamp0To360 = clampAngle.bind(null, 0, 360);

console.log(clamp0To360(405)) // 45
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-08T16:56:47.713

另一个尝试，来自承诺。

*（免责声明：JS noob，来自 Python 世界。即使在那里，**currying**也没有被太多使用，但它有时会派上用场。所以我抄袭了 currying 函数 - 见链接）*

首先，我从一个 ajax 调用开始。我对成功有一些特定的处理，但在失败时，我只想给用户反馈，调用*某些东西会*导致*一些错误*。在我的实际代码中，我在引导面板中显示错误反馈，但我只是在这里使用日志记录。

我已经修改了我的实时网址以使其失败。

```
function ajax_batch(e){
    var url = $(e.target).data("url");

    //induce error
    url = "x" + url;

    var promise_details = $.ajax(
        url,
        {
            headers: { Accept : "application/json" },
            // accepts : "application/json",
            beforeSend: function (request) {
                if (!this.crossDomain) {
                    request.setRequestHeader("X-CSRFToken", csrf_token);
                }
        },
        dataType : "json",
        type : "POST"}
    );
    promise_details.then(notify_batch_success, fail_status_specific_to_batch);
} 
```

现在，为了告诉用户批处理失败，我需要在错误处理程序中写入该信息，因为它得到的只是来自服务器的响应。

我仍然只有在编码时可用的信息 - 就我而言，我有许多可能的批次，但我不知道哪个批次失败了，因为解析服务器响应有关失败的 url。

```
function fail_status_specific_to_batch(d){
    console.log("bad batch run, dude");
    console.log("response.status:" + d.status);
} 
```

我们开始做吧。控制台输出为：

安慰：

`bad batch run, dude utility.js (line 109) response.status:404`

现在，让我们稍微改变一下，使用一个可重用的通用故障处理程序，但也是一个在运行时使用已知代码时调用上下文和从事件中可用的运行时信息进行*柯里化的处理程序。*

```
 ... rest is as before...
    var target = $(e.target).text();
    var context = {"user_msg": "bad batch run, dude.  you were calling :" + target};
    var contexted_fail_notification = curry(generic_fail, context); 

    promise_details.then(notify_batch_success, contexted_fail_notification);
}

function generic_fail(context, d){
    console.log(context);
    console.log("response.status:" + d.status);
}

function curry(fn) {
     var slice = Array.prototype.slice,
        stored_args = slice.call(arguments, 1);
     return function () {
        var new_args = slice.call(arguments),
              args = stored_args.concat(new_args);
        return fn.apply(null, args);
     };
} 
```

安慰：

`Object { user_msg="bad batch run, dude. you were calling :Run ACL now"} utility.js (line 117) response.status:404 utility.js (line 118)`

更一般地说，考虑到回调在 JS 中的广泛使用，currying 似乎是一个非常有用的工具。

[https://javascriptweblog.wordpress.com/2010/04/05/curry-cooking-up-tastier-functions/](https://javascriptweblog.wordpress.com/2010/04/05/curry-cooking-up-tastier-functions/) [http://www.drdobbs.com/open-source/currying-and-partial-functions-in- javasc/231001821?pgno=2](http://www.drdobbs.com/open-source/currying-and-partial-functions-in-javasc/231001821?pgno=2)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-07T10:30:57.700

[我在https://softwareengineering.stackexchange.com/questions/384529/a-real-life-example-of-using-curry-function](https://softwareengineering.stackexchange.com/questions/384529/a-real-life-example-of-using-curry-function)上问了一个类似的问题

但是只有在我使用[了 ramda](https://ramdajs.com/)之后，我才终于体会到了 curry 的用处。所以我认为，如果我们需要将函数链接在一起以一次处理一些输入数据，例如文章[Favoring Curry](https://fr.umio.us/favoring-curry/)中的 Promise 链示例，通过“函数优先，数据最后”使用 curry，代码看起来确实很干净！

# asp.net - 将 dotnetnuke (dnn) 与 subversion 一起使用

> ID：113791
> 
> 赞同：1
> 
> 时间：2008-09-22T08:26:25.097
> 
> 标签：asp.net, svn, dotnetnuke

目前我正在使用 DNN 框架开发网站。目前我的开发和登台环境是相同的。客户正在查看我用于开发的同一站点。

我已经开始使用 tortoise svn (subversion) 来维护版本和备份。我正在使用基于文件的 svn 存储库。

问题是 svn 在每个文件夹中创建 .svn 文件夹（隐藏）。此文件夹和其中的文件显示在门户系统中，同时文件选择和许多不同的位置，如 FCKEditor 文件浏览器、模块/页面的图标选择、皮肤选择。

我想为整个应用程序隐藏这个文件夹，它不应该出现在任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T08:32:10.947

您是否必须拥有相同的开发和登台环境？我真的会反对它。即使您将它们放在同一台服务器上，我认为您至少应该将它们放在单独的虚拟目录中。

假设您已经这样做了，保留“。”很简单。隐藏目录，您只需`export`将您的 svn 存储库从 dev 转移到 staging。暂存将不再是工作副本，因此“。” 目录将不存在。这也允许在不影响客户端的情况下测试潜在的重大更改，并使登台环境更加稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T15:38:38.020

Personally if you are NOT modifying the core of DNN, I wouldn't check in the core system, and only your custom modules, skins etc.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T08:32:46.937

您可以在 DNN 中隐藏 .svn 文件夹，但您必须修改核心。

可能更简单的解决方案是从您的存储库中排除文件夹 Portals/[PortalID] ，但这取决于您正在开发的内容。您需要存储库中的门户文件吗？

# mysql - MySQL外键 - 如何跨表强制一对一？

> ID：113803
> 
> 赞同：6
> 
> 时间：2008-09-22T08:29:30.283
> 
> 标签：mysql

如果我在 MySQL 中有一个代表基类的表，并且我有一堆代表派生类中的字段的表，每个表都使用外键引用基表，有什么方法可以获取 MySQL强制派生表和基表之间的一对一关系，还是必须在代码中完成？

以下面的快速“n”脏模式为例，有没有办法让 MySQL 确保 product_cd 和 product_dvd 中的行不能共享相同的 product_id？是否有更好的方法来设计架构以允许数据库强制执行这种关系，或者根本不可能？

```
CREATE TABLE IF NOT EXISTS `product` (
    `product_id` int(10) unsigned NOT NULL auto_increment,
    `product_name` varchar(50) NOT NULL,
    `description` text NOT NULL,
    PRIMARY KEY  (`product_id`)
) ENGINE = InnoDB;

CREATE TABLE `product_cd` (
    `product_cd_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
    `product_id` INT UNSIGNED NOT NULL ,
    `artist_name` VARCHAR( 50 ) NOT NULL ,
    PRIMARY KEY ( `product_cd_id` ) ,
    INDEX ( `product_id` )
) ENGINE = InnoDB;

ALTER TABLE `product_cd` ADD FOREIGN KEY ( `product_id` ) 
    REFERENCES `product` (`product_id`) 
    ON DELETE RESTRICT ON UPDATE RESTRICT ;

CREATE TABLE `product_dvd` (
    `product_dvd_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
    `product_id` INT UNSIGNED NOT NULL ,
    `director` VARCHAR( 50 ) NOT NULL ,
    PRIMARY KEY ( `product_dvd_id` ) ,
    INDEX ( `product_id` )
) ENGINE = InnoDB;

ALTER TABLE `product_dvd` ADD FOREIGN KEY ( `product_id` ) 
    REFERENCES `product` (`product_id`) 
    ON DELETE RESTRICT ON UPDATE RESTRICT ; 
```

@Skliwz ，您[能否](https://stackoverflow.com/questions/113803/mysql-foreign-keys-how-to-enforce-one-to-one-across-tables#113811)提供有关如何使用触发器通过提供的架构强制执行此约束的更多详细信息？

@boes ，听起来不错[。](https://stackoverflow.com/questions/113803/mysql-foreign-keys-how-to-enforce-one-to-one-across-tables#113858)在您有孩子的孩子的情况下，它如何工作？例如，如果我们添加 product_movie 并使 product_dvd 成为 product_movie 的子级？让 product_dvd 的检查约束也必须考虑所有子类型会是可维护性的噩梦吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-22T08:47:05.530

强制 1:0-1 或 1:1 关系可以通过在外键的列上定义唯一约束来实现，因此只能存在一种组合。通常这将是子表的主键。

如果 FK 位于引用表的主键或唯一键上，它将将它们限制为父表中存在的值，并且列上的唯一约束将它们限制为唯一性。这意味着子表在受约束的列中只能具有与父表对应的值，并且每一行必须具有唯一值。这样做会强制子表最多有一行对应于父记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T08:38:24.630

如果您摆脱*product-dvd-id*和*product-cd-id*，并使用*product-id*作为所有三个表的主键，您至少可以确保没有两张 DVD 或没有两张 CD 使用相同的*产品-id*。另外，要跟踪的 ID 也会减少。

而且您可能需要产品表中的某种*类型*列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-22T08:34:51.567

您可以将一个外键从一个主键添加到另一个主键。因为 PK 必须是唯一的，所以您会自动获得一对一的关系。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-22T08:49:07.677

为了确保产品是 cd 或 dvd，我将添加一个类型列并将其作为主键的一部分。在派生列中，为类型添加检查约束。在示例中，我将 cd 设置为 1，您可以为每个派生表设置 dvd = 2 等等。

```
CREATE TABLE IF NOT EXISTS `product` (
`product_id` int(10) unsigned NOT NULL auto_increment,
'product_type' int not null,
`product_name` varchar(50) NOT NULL,
`description` text NOT NULL,
PRIMARY KEY (`product_id`, 'product_type')
) ENGINE = InnoDB;

CREATE TABLE `product_cd` (
`product_id` INT UNSIGNED NOT NULL ,
'product_type' int not null default(1) check ('product_type' = 1)
`artist_name` VARCHAR( 50 ) NOT NULL ,
PRIMARY KEY ( `product_id`, 'product_type' ) ,
) ENGINE = InnoDB;

ALTER TABLE `product_cd` ADD FOREIGN KEY ( `product_id`, 'product_type' ) 
REFERENCES `product` (`product_id`, 'product_type') 
ON DELETE RESTRICT ON UPDATE RESTRICT ; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-07-22T17:34:14.590

保持一对一关系的唯一有效方法是将外键列设置为**UNIQUE**；这样我们就可以确定只会为其创建一条记录。如果你试图违反这个约束，你会得到以下错误（MySQL 5.1）：

```
`1 error(s) saving changes to table testdb`.table4: INSERT INTO testdb.table4 (idtable4, label, table3_idtable3) VALUES (0, 'soso', 0) 1062: Duplicate entry '0' for key 'table3_idtable3_UNIQUE' Rollback complete 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-22T08:33:23.597

如果您使用 MySQL 5.x，您可以对这些类型的约束使用触发器。

另一个（次优）选项是使用父表中的“类型”列来默默地忽略重复，并能够选择正确的“扩展表”。

# c++ - 支持多种持久性策略的类库

> ID：113818
> 
> 赞同：2
> 
> 时间：2008-09-22T08:37:34.977
> 
> 标签：c++, design-patterns, persistence

我正在开发一个包含域模型类的 C++ 类库，并且我想添加对从各种持久性机制（即数据库和文件）实例化这些类的支持。应该给类库的用户一个接口（？）来编写一个可以从/向持久性机制传输数据的类。

我知道似乎适用于 Java 的数据访问对象模式，但我不确定如何将其应用于 C++。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T08:48:38.380

[Boost Serialization](http://www.boost.org/doc/libs/1_36_0/libs/serialization/doc/index.html)为处理 C++ 类型的序列化提供了一些非常有用的东西，但它与你想要的接口的匹配程度我不知道。它支持侵入式和非侵入式设计，因此非常灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T08:54:55.777

C++ 支持多重继承，因此您可以拥有通用的持久性 API 并继承持久性机制。这仍然需要使用自省来获取类元数据，但是对于任何持久层，您仍然会遇到这个问题。

或者，您可以执行类似的操作，但使用元数据驱动代码生成器，该代码生成器为持久层填充“Getters”和“Setters”。

任何持久层通常会使用一种或另一种方法，因此您的问题是将加载机制挂钩到持久层。我认为这使您的问题与单个持久层没有什么不同，而是从另一个方向解决它。您不是在持久性框架上构建域类，而是提供一组域类，其中包含第三方可以插入其数据访问机制的持久性框架的钩子。

我认为一旦您提供对类元数据和回调的访问权限，持久性机制就相对简单。查看任何方便的 C++ O/R 映射框架的元数据组件并了解它们是如何工作的。使用 API 将其封装在您的域类的基类之一中，并提供通用的 getter/setter API 用于实例化或持久化。其余的取决于实现持久层的人。

**编辑：** 我想不出具有您所描述的可插入持久性机制类型的 C++ 库，但我在 Python 中做了一些可以添加这种类型的工具的事情。特定的实现使用 Python 中的工具，没有直接的 C++ 等价物，尽管基本原理可能适用于 C++。

在 Python 中，您可以通过覆盖`__getattr()__`和来拦截对实例变量的访问`__setattr()__`。持久化机制实际上在幕后维护了自己的数据缓存。当功能被混合到类中（通过多重继承完成）时，它会覆盖默认的系统行为来访问成员并检查被查询的属性是否匹配其字典中的任何内容。发生这种情况时，调用被重定向以获取或设置数据缓存中的项目。

缓存有自己的元数据。它知道其数据模型中实体之间的关系，并且知道要拦截哪些属性名称来访问数据。这种工作方式将其与数据库访问层分开，并且可以（至少在理论上）允许持久性机制与不同的驱动程序一起使用。您不能（例如）构建一个将其序列化为 XML 文件的驱动程序并没有内在的原因。

在 C++ 中进行类似的工作会有点繁琐，并且可能无法使对象缓存访问像在该系统中那样透明。您可能最好使用一个显式协议，该协议将对象的状态加载并刷新到缓存中。从缓存元数据生成的代码非常适合，但这必须在编译时完成。您可以使用模板或通过覆盖`->`操作符来使访问协议更加透明来做一些事情，但这可能比它的价值更麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-22T09:27:27.727

我会避免序列化，恕我直言，我们早在 1995 年就在 MFC 中为我们的一个应用程序实现了这个，我们足够聪明，可以使用独立的对象版本控制和文件版本控制，但你最终会得到很多旧的混乱代码。

想象某些场景，弃用类、弃用成员等，每一个都提出了一个新问题。现在我们使用压缩的“XML 类型”流，我们可以添加新数据并保持向后兼容性。

读取和写入文件是从将数据映射到对象中抽象出来的，我们现在可以切换文件格式，添加导入器/导出器而无需修改我们的核心业务对象。

话虽如此，有些开发者喜欢序列化，但我自己的遭遇是，切换代码库、平台、语言、工具包都会带来很多问题，读取和写入数据不应该是其中之一。

此外，使用带有一些专有密钥的标准数据格式，意味着它更容易与第三方合作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T08:52:12.227

您可能想查看[boost serialization](http://www.boost.org/doc/libs/1_36_0/libs/serialization/doc/index.html)。没用过，不知道推荐不推荐。Boost 库通常是高质量的。

# ubuntu - 在 Ubuntu 中登录时挂载 TrueCrypt 卷

> ID：113824
> 
> 赞同：7
> 
> 时间：2008-09-22T08:39:21.540
> 
> 标签：ubuntu, login, truecrypt

登录 Ubuntu 8.04 时是否可以自动挂载 TrueCrypt 卷？它已经使用 Seahorse 密码管理器存储了无线网络密钥。是否可以让 TrueCrypt 从同一个密钥环中获取其卷密码？目前，这似乎是将我的源代码存储在我随身携带的 U 盘上启动的最方便的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T10:37:09.710

虽然我目前不是 Gentoo 用户（现在在 Ubuntu 上），但多年来我一直是一个用户，并且已经了解到，在[forums.gentoo.org](http://forums.gentoo.org) 和[Gentoo wiki](http://gentoo-wiki.com)上搜索 linux 答案是一件好事。我找到了这些，HTH：

*   [http://forums.gentoo.org/viewtopic-t-691788-highlight-truecrypt.html](http://forums.gentoo.org/viewtopic-t-691788-highlight-truecrypt.html)
*   [http://forums.gentoo.org/viewtopic-t-657404-highlight-truecrypt.html](http://forums.gentoo.org/viewtopic-t-657404-highlight-truecrypt.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:14:25.560

我真的不记得我在哪里找到了这个解决方案，但它在带有 gdm 的 Ubuntu Karmic 上对我有用。您必须编辑该`/etc/gdm/Init`文件并添加以下内容：

```
if !(echo `mount` | grep -q "/home/your_username type")
then
        truecrypt /dev/sdaxxx /home/your_username
fi 
```

Unfortunately it doesn't work in the new Precious Penguin Ubuntu release, since it doesn't come with the gmd package. Does anybody know how to init truecrypt for this Ubuntu release?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-07T08:19:53.370

显然，一种解决方案是更新到 Ubuntu 8.10，它默认支持每个用户的加密目录，在登录时挂载。它与 TrueCrypt 不同，但有其他优点和缺点。

还有一种方法可以[让 TrueCrypt 使用登录密码](http://blog.littleimpact.de/index.php/2008/07/12/automatic-encryption-of-home-directories-using-truecrypt/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T08:21:51.963

我对 Truecrypt 了解不多，但如果可以使用脚本挂载它，您可以编写这样的脚本并将其放置在会话启动中（系统 -> 首选项 -> 会话，我认为）。如果它需要命令行上的密码，您可以让脚本为您启动 gnome-terminal。

# php - 如何在 PHP 中将日期转换为时间戳？

> ID：113829
> 
> 赞同：373
> 
> 时间：2008-09-22T08:41:20.100
> 
> 标签：php, date, timestamp

如何从 eg 获取时间戳`22-09-2008`？

* * *

## 回答 #1

> 赞同：637
> 
> 时间：2008-09-22T08:45:20.917

*此方法适用于**Windows**和 Unix **，并且**可以识别**时区**，如果您使用[dates](https://unix4lyfe.org/time/) ，这可能是您想要的。*

如果您不关心时区，或者想使用服务器使用的时区：

```
$d = DateTime::createFromFormat('d-m-Y H:i:s', '22-09-2008 00:00:00');
if ($d === false) {
    die("Incorrect date string");
} else {
    echo $d->getTimestamp();
} 
```

**1222093324** [（这取决于您的服务器时区...）]

如果要指定在哪个时区，这里是 EST。（与纽约相同。）

```
$d = DateTime::createFromFormat(
    'd-m-Y H:i:s',
    '22-09-2008 00:00:00',
    new DateTimeZone('EST')
);

if ($d === false) {
    die("Incorrect date string");
} else {
    echo $d->getTimestamp();
} 
```

**1222093305**

或者，如果您想使用[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)。（与“ [GMT](https://en.wikipedia.org/wiki/Greenwich_Mean_Time) ”相同。）

```
$d = DateTime::createFromFormat(
    'd-m-Y H:i:s',
    '22-09-2008 00:00:00',
    new DateTimeZone('UTC')
);

if ($d === false) {
    die("Incorrect date string");
} else {
    echo $d->getTimestamp();
} 
```

**1222093289**

无论如何，在将字符串解析为结构化数据时，严格要求始终是一个很好的起点。以后可以省去麻烦的调试。因此，我建议始终指定日期格式。

* * *

## 回答 #2

> 赞同：188
> 
> 时间：2008-09-22T08:52:45.220

还有**strptime()**只需要一种格式：

```
$a = strptime('22-09-2008', '%d-%m-%Y');
$timestamp = mktime(0, 0, 0, $a['tm_mon']+1, $a['tm_mday'], $a['tm_year']+1900); 
```

* * *

## 回答 #3

> 赞同：130
> 
> 时间：2011-05-17T09:01:48.537

使用[`DateTime`API](http://php.net/manual/en/class.datetime.php)：

```
$dateTime = new DateTime('2008-09-22'); 
echo $dateTime->format('U'); 

// or 

$date = new DateTime('2008-09-22');
echo $date->getTimestamp(); 
```

与过程 API 相同：

```
$date = date_create('2008-09-22');
echo date_format($date, 'U');

// or

$date = date_create('2008-09-22');
echo date_timestamp_get($date); 
```

如果由于您使用的是[不受支持的格式](http://www.php.net/manual/de/datetime.formats.php)而导致上述操作失败，您可以使用

```
$date = DateTime::createFromFormat('!d-m-Y', '22-09-2008');
echo $dateTime->format('U'); 

// or

$date = date_parse_from_format('!d-m-Y', '22-09-2008');
echo date_format($date, 'U'); 
```

请注意，如果您不设置`!`，则时间部分将设置为当前时间，这与前四个不同，在您省略时间时将使用午夜。

另一种选择是使用[`IntlDateFormatter`](http://php.net/manual/en/class.intldateformatter.php)API：

```
$formatter = new IntlDateFormatter(
    'en_US',
    IntlDateFormatter::FULL,
    IntlDateFormatter::FULL,
    'GMT',
    IntlDateFormatter::GREGORIAN,
    'dd-MM-yyyy'
);
echo $formatter->parse('22-09-2008'); 
```

除非您使用本地化的日期字符串，否则更简单的选择可能是 DateTime。

* * *

## 回答 #4

> 赞同：116
> 
> 时间：2008-09-22T16:22:12.317

小心`strtotime()`那些试图“猜测”你的意思的函数（它当然不会猜测，[规则就在这里](https://stackoverflow.com/questions/113829/date-to-timestamp-php#113871)）。

Indeed`22-09-2008`将被解析为*22 September 2008*，因为这是唯一合理的事情。

将如何`08-09-2008`解析？可能*是 2008 年 8 月 9 日*。

怎么样`2008-09-50`？某些版本的 PHP 将其解析为*20 October 2008*。

所以，如果你确定你的输入是`DD-MM-YYYY`格式的，最好使用[@Armin Ronacher](https://stackoverflow.com/questions/113829/date-to-timestamp-php#113871)提供的解决方案。

* * *

## 回答 #5

> 赞同：63
> 
> 时间：2013-10-11T14:21:01.677

*此方法适用于**Windows**和 Unix **，并且**可以识别**时区**，如果您使用[dates](https://unix4lyfe.org/time/) ，这可能是您想要的。*

如果您不关心时区，或者想使用服务器使用的时区：

```
$d = DateTime::createFromFormat('d-m-Y H:i:s', '22-09-2008 00:00:00');
if ($d === false) {
    die("Incorrect date string");
} else {
    echo $d->getTimestamp();
} 
```

**1222093324** [（这取决于您的服务器时区...）]

如果要指定在哪个时区，这里是 EST。（与纽约相同。）

```
$d = DateTime::createFromFormat(
    'd-m-Y H:i:s',
    '22-09-2008 00:00:00',
    new DateTimeZone('EST')
);

if ($d === false) {
    die("Incorrect date string");
} else {
    echo $d->getTimestamp();
} 
```

**1222093305**

或者，如果您想使用[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)。（与“ [GMT](https://en.wikipedia.org/wiki/Greenwich_Mean_Time) ”相同。）

```
$d = DateTime::createFromFormat(
    'd-m-Y H:i:s',
    '22-09-2008 00:00:00',
    new DateTimeZone('UTC')
);

if ($d === false) {
    die("Incorrect date string");
} else {
    echo $d->getTimestamp();
} 
```

**1222093289**

无论如何，在将字符串解析为结构化数据时，严格要求始终是一个很好的起点。以后可以省去麻烦的调试。因此，我建议始终指定日期格式。

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2008-09-22T08:44:11.870

使用[mktime](http://php.net/mktime)：

```
list($day, $month, $year) = explode('-', '22-09-2008');
echo mktime(0, 0, 0, $month, $day, $year); 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2015-04-06T22:24:06.273

使用 strtotime() 函数，您可以轻松地将日期转换为时间戳

```
<?php
// set default timezone
date_default_timezone_set('America/Los_Angeles');

//define date and time
$date = date("d M Y H:i:s");

// output
echo strtotime($date);
?> 
```

更多信息： http: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

在线转换工具： http: [//freeonlinetools24.com/](http://freeonlinetools24.com/)

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2010-09-08T16:07:16.023

`split`这是一个使用and`mtime`函数的非常简单有效的解决方案：

```
$date="30/07/2010 13:24"; //Date example
list($day, $month, $year, $hour, $minute) = split('[/ :]', $date); 

//The variables should be arranged according to your date format and so the separators
$timestamp = mktime($hour, $minute, 0, $month, $day, $year);
echo date("r", $timestamp); 
```

它对我来说就像一个魅力。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2010-01-07T13:26:02.897

如果您知道格式使用`strptime`，因为`strtotime`会猜测格式，这可能并不总是正确的。由于`strptime`未在 Windows 中实现，因此有一个自定义功能

*   [http://nl3.php.net/manual/en/function.strptime.php#86572](http://nl3.php.net/manual/en/function.strptime.php#86572)

请记住，返回`tm_year`值是从 1900 开始的！并且`tm_month`是 0-11

例子：

```
$a = strptime('22-09-2008', '%d-%m-%Y');
$timestamp = mktime(0, 0, 0, $a['tm_mon']+1, $a['tm_mday'], $a['tm_year']+1900) 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-12-13T03:32:14.403

如果您想确定日期是否被解析为您期望的内容，您可以使用`DateTime::createFromFormat()`：

```
$d = DateTime::createFromFormat('d-m-Y', '22-09-2008');
if ($d === false) {
    die("Woah, that date doesn't look right!");
}
echo $d->format('Y-m-d'), PHP_EOL;
// prints 2008-09-22 
```

在这种情况下很明显，但例如`03-04-2008`可能是 4 月 3 日或 3 月 4 日，具体取决于您来自哪里:)

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-06-11T10:36:49.937

鉴于该函数`strptime()`不适用于 Windows 并且`strtotime()`可能返回意外结果，我建议使用`date_parse_from_format()`：

```
$date = date_parse_from_format('d-m-Y', '22-09-2008');
$timestamp = mktime(0, 0, 0, $date['month'], $date['day'], $date['year']); 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2018-02-09T10:03:23.047

使用 PHP 函数`strtotime()`

```
echo strtotime('2019/06/06'); 
```

[date - 格式化本地时间/日期](https://www.w3schools.com/php/func_date_strtotime.asp)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2013-11-15T00:26:56.390

```
<?php echo date('M j Y g:i A', strtotime('2013-11-15 13:01:02')); ?> 
```

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2014-07-31T07:31:27.740

```
$time = '22-09-2008';
echo strtotime($time); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2010-06-13T13:00:04.043

这是我的做法：

```
function dateToTimestamp($date, $format, $timezone='Europe/Belgrade')
{
    //returns an array containing day start and day end timestamps
    $old_timezone=date_timezone_get();
    date_default_timezone_set($timezone);
    $date=strptime($date,$format);
    $day_start=mktime(0,0,0,++$date['tm_mon'],++$date['tm_mday'],($date['tm_year']+1900));
    $day_end=$day_start+(60*60*24);
    date_default_timezone_set($old_timezone);
    return array('day_start'=>$day_start, 'day_end'=>$day_end);
}

$timestamps=dateToTimestamp('15.02.1991.', '%d.%m.%Y.', 'Europe/London');
$day_start=$timestamps['day_start']; 
```

这样，您可以让函数知道您使用的日期格式，甚至指定时区。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2012-02-11T11:26:19.933

```
function date_to_stamp( $date, $slash_time = true, $timezone = 'Europe/London', $expression = "#^\d{2}([^\d]*)\d{2}([^\d]*)\d{4}$#is" ) {
    $return = false;
    $_timezone = date_default_timezone_get();
    date_default_timezone_set( $timezone );
    if( preg_match( $expression, $date, $matches ) )
        $return = date( "Y-m-d " . ( $slash_time ? '00:00:00' : "h:i:s" ), strtotime( str_replace( array($matches[1], $matches[2]), '-', $date ) . ' ' . date("h:i:s") ) );
    date_default_timezone_set( $_timezone );
    return $return;
}

// expression may need changing in relation to timezone
echo date_to_stamp('19/03/1986', false) . '<br />';
echo date_to_stamp('19**03**1986', false) . '<br />';
echo date_to_stamp('19.03.1986') . '<br />';
echo date_to_stamp('19.03.1986', false, 'Asia/Aden') . '<br />';
echo date('Y-m-d h:i:s') . '<br />';

//1986-03-19 02:37:30
//1986-03-19 02:37:30
//1986-03-19 00:00:00
//1986-03-19 05:37:30
//2012-02-12 02:37:30 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2012-12-13T03:20:41.777

```
<?php echo date('U') ?> 
```

如果需要，将其放入[MySQL](http://en.wikipedia.org/wiki/MySQL)输入类型时间戳中。以上效果很好（仅在 PHP 5 或更高版本中）：

```
<?php $timestamp_for_mysql = date('c') ?> 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-05-19T11:50:06.780

如果您将其设置为在数据库中保存日期，请注意时间/区域，因为当我比较从 mysql 转换为`timestamp`using的日期时遇到问题`strtotime`。在将日期转换为时间戳之前，您必须使用完全相同的时间/区域，否则 strtotime() 将使用默认的服务器时区。

请看这个例子：[https ://3v4l.org/BRlmV](https://3v4l.org/BRlmV)

```
function getthistime($type, $modify = null) {
    $now = new DateTime(null, new DateTimeZone('Asia/Baghdad'));
    if($modify) {
        $now->modify($modify);
    }
    if(!isset($type) || $type == 'datetime') {
        return $now->format('Y-m-d H:i:s');
    }
    if($type == 'time') {
        return $now->format('H:i:s');
    }
    if($type == 'timestamp') {
        return $now->getTimestamp();
    }
}
function timestampfromdate($date) {
    return DateTime::createFromFormat('Y-m-d H:i:s', $date, new DateTimeZone('Asia/Baghdad'))->getTimestamp();
}

echo getthistime('timestamp')."--".
    timestampfromdate(getthistime('datetime'))."--".
    strtotime(getthistime('datetime'));

//getthistime('timestamp') == timestampfromdate(getthistime('datetime')) (true)
//getthistime('timestamp') == strtotime(getthistime('datetime')) (false) 
```

* * *

## 回答 #19

> 赞同：-4
> 
> 时间：2016-02-27T15:52:38.757

如果您希望将 UTC 日期时间 ( `2016-02-14T12:24:48.321Z`) 转换为时间戳，请执行以下操作：

```
function UTCToTimestamp($utc_datetime_str)
{
    preg_match_all('/(.+?)T(.+?)\.(.*?)Z/i', $utc_datetime_str, $matches_arr);
    $datetime_str = $matches_arr[1][0]." ".$matches_arr[2][0];

    return strtotime($datetime_str);
}

$my_utc_datetime_str = '2016-02-14T12:24:48.321Z';
$my_timestamp_str = UTCToTimestamp($my_utc_datetime_str); 
```

# c++ - 在 C++ 中使用接口的性能损失？

> ID：113830
> 
> 赞同：46
> 
> 时间：2008-09-22T08:41:37.150
> 
> 标签：c++, performance, abstract-class, virtual-functions

在 C++ 中使用接口（抽象基类）时是否存在运行时性能损失？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-09-22T08:45:47.107

简短的回答：没有。

长答案：影响其速度的不是基类或类在其层次结构中的祖先数量。唯一的问题是方法调用的成本。

非虚拟方法调用有成本（但可以内联）
虚拟方法调用的成本略高，因为您需要在调用它之前查找要调用的方法（但这是一个简单的表查找而**不是**搜索） . 由于接口上的所有方法根据定义都是虚拟的，因此存在此成本。

除非您正在编写一些对超速敏感的应用程序，否则这应该不是问题。您从使用界面中获得的额外清晰度通常可以弥补任何感知到的速度下降。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-09-22T09:39:12.627

## 使用虚拟调度调用的函数没有内联

对于虚函数有一种很容易忘记的惩罚：在对象类型不知道编译时间的（常见）情况下，虚调用不会内联。如果您的函数很小并且适合内联，那么这种损失可能非常显着，因为您不仅增加了调用开销，而且编译器也限制了它如何优化调用函数（它必须假设虚函数可能已经改变了一些寄存器或内存位置，它不能在调用者和被调用者之间传播常量值）。

## 虚拟通话费用取决于平台

至于与普通函数调用相比的调用开销损失，答案取决于您的目标平台。如果您的目标是具有 x86/x64 CPU 的 PC，调用虚拟函数的代价非常小，因为现代 x86/x64 CPU 可以对间接调用执行分支预测。但是，如果您的目标是 PowerPC 或其他 RISC 平台，则虚拟调用损失可能相当大，因为在某些平台上从未预测过间接调用（参见[PC/Xbox 360 跨平台开发最佳实践](http://download.microsoft.com/download/7/9/d/79d06ce7-d587-48cf-8a36-f98e924a0150/Cross_Platform_Development_Best_Practices.ppt)）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-22T08:43:55.833

与常规调用相比，每个虚函数调用都会受到少量惩罚。除非您每秒执行数十万次调用，否则您不太可能观察到差异，而且无论如何，为增加代码清晰度付出代价通常是值得的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-22T08:47:00.757

当你调用一个虚函数（比如通过一个接口）时，程序必须在表中查找该函数，以查看为该对象调用哪个函数。与直接调用函数相比，这会带来很小的损失。

此外，当您使用虚函数时，编译器无法内联函数调用。因此，对一些小函数使用虚函数可能会受到惩罚。这通常是您可能看到的最大性能“打击”。如果函数很小并且被多次调用，这真的只是一个问题，比如在一个循环中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-22T13:02:02.187

在某些情况下适用的另一种替代方法是使用模板的编译时多态性。例如，当您想在程序开始时做出实现选择，然后在执行期间使用它时，它很有用。一个运行时多态的例子

```
class AbstractAlgo
{
    virtual int func();
};

class Algo1 : public AbstractAlgo
{
    virtual int func();
};

class Algo2 : public AbstractAlgo
{
    virtual int func();
};

void compute(AbstractAlgo* algo)
{
      // Use algo many times, paying virtual function cost each time

}   

int main()
{
    int which;
     AbstractAlgo* algo;

    // read which from config file
    if (which == 1)
       algo = new Algo1();
    else
       algo = new Algo2();
    compute(algo);
} 
```

同样使用编译时多态性

```
class Algo1
{
    int func();
};

class Algo2
{
    int func();
};

template<class ALGO>  void compute()
{
    ALGO algo;
      // Use algo many times.  No virtual function cost, and func() may be inlined.
}   

int main()
{
    int which;
    // read which from config file
    if (which == 1)
       compute<Algo1>();
    else
       compute<Algo2>();
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-22T12:42:55.417

我不认为虚拟函数调用和直接函数调用之间的成本比较。如果您正在考虑使用抽象基类（接口），那么您会遇到一种情况，即您希望根据对象的动态类型执行多个操作之一。你必须以某种方式做出选择。一种选择是使用虚函数。另一种是通过 RTTI（可能很昂贵）或向基类添加 type() 方法（可能会增加每个对象的内存使用）来切换对象的类型。所以虚函数调用的成本应该与替代的成本进行比较，而不是与什么都不做的成本进行比较。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-22T17:00:01.537

大多数人都注意到运行时的惩罚，这是正确的。

然而，根据我从事大型项目的经验，清晰的接口和适当的封装所带来的好处很快就抵消了速度的提升。模块化代码可以交换为改进的实现，因此最终结果是巨大的收益。

您的里程可能会有所不同，这显然取决于您正在开发的应用程序。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-12T11:42:30.967

请注意，多重继承使用多个 vtable 指针使对象实例膨胀。在 x86 上使用 G++，如果您的类有一个虚方法但没有基类，那么您有一个指向 vtable 的指针。如果你有一个带有虚方法的基类，你仍然有一个指向 vtable 的指针。如果您有两个带有虚方法的基类，则*每个实例上都有**两个*vtable 指针。

 *因此，使用多重继承（这是在 C++ 中实现接口的方式），您需要支付基类乘以对象实例大小中的指针大小。内存占用的增加可能会对性能产生间接影响。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-22T09:38:16.170

应该注意的一件事是，虚拟函数调用成本可能因平台而异。在控制台上，它们可能更明显，因为通常 vtable 调用意味着缓存未命中并且可能会破坏分支预测。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-22T08:45:15.223

在 C++ 中使用抽象基类通常要求使用虚函数表，所有接口调用都将通过该表查找。与原始函数调用相比，成本很小，因此在担心它之前，请确保您需要比这更快。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-22T08:45:23.600

我知道的唯一主要区别是，由于您没有使用具体的类，因此内联（很多？）更难做到。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-22T08:45:59.167

我唯一能想到的是，调用虚方法比非虚方法慢一点，因为调用必须通过[虚方法表](http://en.wikipedia.org/wiki/Virtual_table)。

然而，这是搞砸你的设计的一个不好的理由。如果您需要更高的性能，请使用更快的服务器。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-22T08:48:48.270

对于任何包含虚函数的类，都使用 vtable。显然，通过像 vtable 这样的分派机制调用方法比直接调用要慢，但在大多数情况下，您可以接受。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-22T08:53:01.553

是的，但据我所知没有什么值得注意的。性能下降是因为您在每个方法调用中都有“间接”。

但是，这实际上取决于您使用的编译器，因为某些编译器无法内联从抽象基类继承的类中的方法调用。

如果你想确定你应该运行自己的测试。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-22T14:24:46.980

是的，有罚款。可以提高平台性能的方法是使用没有虚函数的非抽象类。然后使用指向您的非虚拟函数的成员函数指针。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-11-04T22:34:08.367

我知道这是一个不常见的观点，但即使提到这个问题，我也会怀疑你对班级结构的思考太多了。我见过许多具有太多“抽象级别”的系统，仅此一项就使它们容易出现严重的性能问题，这不是由于方法调用的成本，而是由于倾向于进行不必要的调用。如果这种情况发生在多个层次上，那就是一个杀手。[看一看](http://www.wikihow.com/Optimize-Your-Program%27s-Performance)

# database - 根据word中的表格格式将数据库中的数据插入word

> ID：113845
> 
> 赞同：4
> 
> 时间：2008-09-22T08:46:11.583
> 
> 标签：database, ms-word

现在我需要将一些来自 sqlserver 的数据插入到一个单词中，我知道如何使用书签和 office interop api 来做到这一点，但是调用 word process 这样做很慢，而且它是书签定义和代码之间的耦合，是吗可以在没有文字处理启动的情况下做到这一点吗？如果没有，是否有任何模板引擎可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-22T08:58:27.157

您可能希望查看自定义文档编写器，而不是使用 Microsoft 的 COM Wrapped API。我听说过关于 OfficeWriter 的好消息。它不是免费的，但速度从来都不是。

它不需要服务器上的 Word。

[http://officewriter.softartisans.com/officewriter-59.aspx](http://officewriter.softartisans.com/officewriter-59.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-24T00:59:25.543

对于您想要做什么，我没有确切的答案。但是，您可能希望考虑在您的服务器上构建整个文档。

MS Excel 97 及更高版本支持创建简单的 XML 或 HTML（带表格）文件并调用该文件`something-uniqueid.xls`

MS Word 也有可能做类似的事情。获取任何基本的 HTML 文件（使用`<h1> <h2> <u>`标签作为开始）并将名称更改为`something.doc`查看 Word 是否会通过双击打开它。

如果这可行，您可以将整个文档作为 html 文件提供，但告诉客户它被称为 something-unique-id#.doc

要在 Web 服务器上工作，您需要设置 HTTP 标头`Content-type: application/msword`和`Content-disposition: Attachment; filename=something-unique-id.doc`

*请检查 msword 的 MIME 类型。我不确定这是否正确。*

最后但并非最不重要的一点是要 100% 确保尝试使用将最后一个 GET 变量设置为的 URL，`.doc`这意味着您的 URL 应该看起来像`/listing.asp?var1=abc&var2=def&output=.doc`

这在 9 年前是必要的，以提供 100% 的浏览器覆盖率。您必须测试它是否仍然需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-22T02:43:43.673

如果您在 Word 2003 中需要这个，为什么不直接使用 WordML 呢？[在 Word 中使用 XML 文档进行开发](http://msdn.microsoft.com/en-us/library/aa297505(office.11).aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-24T00:47:15.090

不确定这是否有帮助，但如果它是来自 SQL Server 的表格数据，您可能需要先将其拉入 Excel（通过嵌入式查询），然后将 Excel 表嵌入 Word doc (OLE)。

听起来很笨拙，但我做得更糟。:-)

# svn - SVN 在更新时忽略版本化

> ID：113859
> 
> 赞同：3
> 
> 时间：2008-09-22T08:49:14.247
> 
> 标签：svn

我有这个设置，在我的开发副本中，我可以将某个文件的更改提交到存储库。然后在我的生产副本中，它只做结帐，我通常会编辑这个文件，因为它包含与环境无关的引用。有什么方法可以在不使用的情况下在后续结帐/更新时忽略此文件`svn:ignore`？更像是一个`--ignore-files /projectroot/config.php`或`--ignore-files -F ignoredfiles.txt`标志。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-22T08:52:10.620

我建议将存储库中的文件从 config.php 重命名为 config.php.sample。这是您将编辑以更改默认选项的文件。对于部署，无论是部署到您的开发环境还是生产服务器，您都可以将 config.php.sample 复制到 config.php 并对其进行编辑，而不必担心未来的冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-22T09:55:11.153

另一个解决方案是维护 SVN 中每个环境的所有配置文件。根据环境变量的值，仅使用一些文件。

优点：
1\. SVN中的所有文件。
2\. deploy/checkouts/updates 中没有文件副本...

缺点：
1\. SVN中的所有文件。
2.有一个环境变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-08T12:51:20.140

另一种解决方法是使用 tsvn:ignore-on-commit 属性。它将使文件在 TortoiseSVN 的提交对话框中始终未选中。如果你想提交它，你需要手动检查它。

[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-commit.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-commit.html) （页面底部）

# delphi - 如何检查系统上是否安装了 OLEDB 驱动程序？

> ID：113860
> 
> 赞同：17
> 
> 时间：2008-09-22T08:50:08.860
> 
> 标签：delphi, oledb, ado

当我启动我的应用程序时，如何确保安装了某个 OLEDB 驱动程序？我使用 Delphi 的 ADO，如果缺少驱动程序，我想显示描述性错误消息。从 ADO 返回的错误并不总是那么用户友好。

可能有一个不错的小函数可以返回所有已安装的驱动程序，但我还没有找到它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T14:49:58.373

这是一个老问题，但我现在遇到了同样的问题，也许这可以帮助其他人。

在 Delphi 7 中，ADODB 中有一个过程，它返回一个带有提供程序名称的 TStringList。

使用示例：

```
names := TStringList.Create;
ADODB.GetProviderNames(names);

if names.IndexOf('SQLNCLI10')<>-1 then
  st := 'Provider=SQLNCLI10;'
else if names.IndexOf('SQLNCLI')<>-1 then
  st := 'Provider=SQLNCLI;'
else if names.IndexOf('SQLOLEDB')<>-1 then
  st := 'Provider=SQLOLEDB;'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-30T19:26:24.137

每个提供程序都有一个与其类关联的 GUID。要查找 guid，请打开 regedit 并在注册表中搜索提供程序名称。例如，搜索“Microsoft Jet 4.0 OLE DB Provider”。找到它后，复制密钥（GUID 值）并在应用程序的注册表搜索中使用它。

```
function OleDBExists : boolean;
var
  reg : TRegistry;
begin
  Result := false;

  // See if Advantage OLE DB Provider is on this PC
  reg := TRegistry.Create;
  try
    reg.RootKey := HKEY_LOCAL_MACHINE;
    Result := reg.OpenKeyReadOnly( '\SOFTWARE\Classes\CLSID\{C1637B2F-CA37-11D2-AE5C-00609791DC73}' );
  finally
    reg.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-10-03T05:27:01.897

您可以获取 ADO 提供程序名称并在注册表中的路径 HKEY_CLASSES_ROOT\[Provider_Name] 中检查它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-22T09:58:33.063

最简单的方法不是尝试在启动时建立连接并捕获错误吗？

我的意思是你可能会得到一些不同的错误，例如，用户在线，但它们是你应该能够测试的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T14:04:47.823

我相信有问题的 OLEDB 对象被埋在注册表中的某个地方，因为 OLEDB / ADO 是一个 COM 解决方案。我的猜测是看看您是否可以在注册表中找到安装驱动程序的 GUID。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-07-29T14:02:20.997

```
namespace Common {
  public class CLSIDHelper {

  [DllImport("ole32.dll")]
  static extern int CLSIDFromProgID([MarshalAs(UnmanagedType.LPWStr)] string lpszProgID, out Guid pclsid);

  public static Guid RetrieveGUID(string Provider) {
    Guid CLSID = Guid.Empty;
    int Ok = CLSIDFromProgID(Provider, out CLSID);
    if (Ok == 0)
       return CLSID;
    return null;
  }
 }
} 
```

# visual-studio - “优化代码”选项在 Visual Studio 中的真正作用是什么？

> ID：113866
> 
> 赞同：80
> 
> 时间：2008-09-22T08:51:29.870
> 
> 标签：visual-studio, optimization

选项的名称说明了一些事情，但 Visual Studio/编译器真正做了什么，真正的后果是什么？

编辑：如果你搜索谷歌，你可以找到[这个地址](http://msdn.microsoft.com/en-us/library/k1ack8f1.aspx)，但这并不是我真正想要的。我想知道真正发生的事情。例如为什么循环的时间更少等等。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-09-22T10:00:40.907

如果没有优化，编译器会产生非常愚蠢的代码——每个命令都以非常直接的方式编译，因此它可以完成预期的事情。Debug 版本默认禁用优化，因为如果没有优化，生成的可执行文件会直接匹配源代码。

## 保存在寄存器中的变量

打开优化后，编译器会应用许多不同的技术来使代码运行得更快，同时仍然执行相同的操作。在 Visual C++ 中优化和未优化构建之间最明显的区别是变量值在优化构建中尽可能长时间地保存在寄存器中，而没有优化它们总是存储在内存中。这不仅会影响代码速度，还会影响调试。由于这种优化，调试器在您单步执行代码时无法可靠地获取变量值。

## 其他优化

编译器应用了多种其他优化，如[/O 选项（优化代码）MSDN 文档](http://msdn.microsoft.com/en-us/library/k1ack8f1.aspx)中所述。有关各种优化技术的一般描述，请参阅[Wikipedia Compiler Optimization 文章](http://en.wikipedia.org/wiki/Compiler_optimization)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-09-22T10:03:04.863

来自[保罗维克的](http://www.panopticoncentral.net/archive/2004/02/03/267.aspx)博客：

*   它删除了我们会发出以帮助调试的任何 NOP 指令。当优化关闭（并且调试信息打开）时，编译器将为没有任何实际 IL 关联但您可能希望在其上放置断点的行发出 NOP 指令。最常见的例子是“If”语句的“End If”——没有为 End If 发出实际的 IL，所以我们不发出 NOP，调试器不会让你设置断点在上面。打开优化会强制编译器不发出 NOP。

*   我们对生成的 IL 进行简单的基本块分析，以删除任何死代码块。也就是说，我们将每个方法分成由分支指令分隔的 IL 块。通过快速分析块如何相互关联，我们可以识别出任何没有分支的块。因此，我们可以找出永远不会执行并且可以省略的代码块，从而使程序集更小。此时我们也做了一些小的分支优化——例如，如果你转到另一个 GoTo 语句，我们只优化第一个 GoTo 以跳转到第二个 GoTo 的目标。

*   我们发出一个 DebuggableAttribute，并将 IsJITOptimizerDisabled 设置为 False。基本上，这允许运行时 JIT 以它认为合适的方式优化代码，包括重新排序和内联代码。这将产生更高效和更小的代码，但这意味着尝试调试代码可能非常具有挑战性（任何尝试过它的人都会告诉你）。我不知道 JIT 优化的实际列表——也许像 Chris Brumme 这样的人会在某个时候插话。总而言之，优化开关启用了可能使设置断点和单步执行代码变得更加困难的优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T09:14:56.477

简短的回答是：使用 -Ox 并让编译器完成它的工作。

长答案：无法准确预测不同类型优化的效果。有时针对快速代码进行优化实际上会产生比针对大小进行优化时更小的代码。如果你真的想获得最后 0.01% 的性能（速度或尺寸），你必须对不同的选项组合进行基准测试。

此外，最新版本的 Visual Studio 具有更高级优化的选项，例如链接时优化和配置文件引导优化。

# c - Platform Builder 命令行构建

> ID：113872
> 
> 赞同：0
> 
> 时间：2008-09-22T08:52:51.413
> 
> 标签：c, visual-studio, windows-ce, platform-builder

我正在使用 WinCE 平台构建器从命令行构建一个项目，我需要启用 RTTI，以便我的项目正常工作。我尝试在源代码和每个目录的 makefile中设置选项`RTTI="YES`“，并且我还尝试将它添加 `CDEFINES`到.是，我怎样才能找到该选项的设置位置，以便我可以修改它？`D9025``"/GR was overriden by /GR-" ( enable RTTI was overriden by don't enable RTTI )`

* * *

问题是我们只将源代码复制到一些目录，我们在一个名为“sources”的文件中指定它们，然后我们通过发出以下命令继续构建：`build`

我想知道的是，构建从哪里获取它的选项？文件的名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T09:12:12.613

**命令行警告 D9025**

如果两个选项指定了矛盾或不兼容的指令，则使用命令行最右侧选项中指定或隐含的指令。

如果您在从开发环境编译时收到此警告，并且不确定冲突选项的来源，请考虑以下事项：

可以在代码或项目的项目设置中指定选项。如果您查看编译器的命令行属性页，并且如果您在所有选项字段中看到冲突的选项，则这些选项是在项目的属性页中设置的，否则，这些选项是在源代码中设置的。

如果在项目的属性页中设置了选项，请查看编译器的预处理器属性页（在解决方案资源管理器中选择项目节点）。如果您没有看到那里设置的选项，请检查每个源代码文件（在解决方案资源管理器中）的预处理器属性页设置，以确保它没有添加到那里。

如果选项是在代码中设置的，则可以在代码中或在窗口标题中设置。您可以尝试创建一个预处理文件 (/P) 并在其中搜索符号。

参考： http: [//msdn.microsoft.com/en-us/library/8k3f51f1 (vs.80).aspx](http://msdn.microsoft.com/en-us/library/8k3f51f1(vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-03T02:47:11.273

首先查看sources.cmn，它是整个构建系统的通用源文件。如果它不存在，请记住每个 SOURCES 文件都可以更改其文件夹的编译器变量，此外，makefile 也可以更改内容。为了增加乐趣，系统和平台构建批处理文件还可以使用环境变量，进而可以调整设置。

# vb.net - 在 VB.NET 中扩展 ControlCollection

> ID：113873
> 
> 赞同：0
> 
> 时间：2008-09-22T08:52:57.170
> 
> 标签：vb.net, inheritance, overriding

我想扩展`ControlCollection`VB.NET 中的基本功能，这样我就可以将图像和文本添加到自制控件中，然后自动将它们转换为图片框和标签。

所以我做了一个继承自 ControlCollection 的类，重写了 add 方法，并添加了功能。

但是当我运行这个例子时，它给出了一个`NullReferenceException`.

这是代码：

```
 Shadows Sub add(ByVal text As String)
            Dim LB As New Label
            LB.AutoSize = True
            LB.Text = text
            MyBase.Add(LB) 'Here it gives the exception.
        End Sub 
```

我在谷歌上搜索，有人说`CreateControlsInstance`需要重写该方法。所以我这样做了，但随后它给出`InvalidOperationException`了一条`innerException`消息`NullReferenceException`。

我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T08:59:08.107

为什么不从[UserControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.usercontrol.aspx)继承来定义具有 Text 和 Image 等属性的自定义控件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T09:05:31.210

无论如何，您最好只使用通用集合。Bieng Control Collection 并没有真正为它做任何特别的事情。

```
puclic class MyCollection : Collection<Control> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T11:31:48.473

如果您从 Control.ControlCollection 继承，那么您需要在您的类中提供一个 New 方法。您的 New 方法必须调用 ControlCollection 的构造函数 (MyBase.New) 并将其传递给有效的父控件。

如果您没有正确执行此操作，则会在 Add 方法中引发 NullReferenceException。

这也可能导致您的 CreateControlsInstance 方法中出现 InvalidOperationException

以下代码错误地调用构造函数，导致 Add 方法抛出 NullReferenceException...

```
Public Class MyControlCollection
    Inherits Control.ControlCollection

    Sub New()
        'Bad - you need to pass a valid control instance
        'to the constructor
        MyBase.New(Nothing)
    End Sub

    Public Shadows Sub Add(ByVal text As String)
        Dim LB As New Label()
        LB.AutoSize = True
        LB.Text = text
        'The next line will throw a NullReferenceException
        MyBase.Add(LB)
    End Sub
End Class 
```

# sql - 如何确定 SQL 2005 中数据库的排序规则？

> ID：113883
> 
> 赞同：0
> 
> 时间：2008-09-22T08:57:03.900
> 
> 标签：sql, collation

您如何确定 SQL 2005 中数据库的排序规则，例如，如果您需要执行不区分大小写的搜索/替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T08:57:43.537

使用以下 SQL 确定数据库的排序规则：

```
SELECT DATABASEPROPERTYEX('{database name}', 'Collation') SQLCollation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-10-01T04:55:20.727

请记住，各个列可以覆盖数据库排序规则：

```
SELECT TABLE_NAME, COLUMN_NAME, COLLATION_NAME
FROM INFORMATION_SCHEMA.COLUMNS 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-02T20:49:14.013

如果你想做一个不区分大小写的搜索并且不能依赖数据库的排序规则，你总是可以专门为你感兴趣的查询请求它。例如：

```
SELECT TOP 1 FName, *
FROM People
WHERE FName LIKE '%mich%' COLLATE Latin1_General_CI_AI 
```

我通常有相反的问题，我想要区分大小写但在数据库的排序规则中没有它，所以我发现自己在查询中使用了很多 Latin1_General_BIN 排序规则。如果你还不知道，你可以这样做：

```
SELECT 
FROM ::fn_helpcollations() 
```

获取可用排序规则的列表和它们的用途描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-20T06:02:40.177

选择数据库并运行以下命令。

```
sp_helpsort 
```

# linux - 如何在 Linux 上通过 FTP 递归下载文件夹

> ID：113886
> 
> 赞同：348
> 
> 时间：2008-09-22T08:57:59.950
> 
> 标签：linux, command-line, ftp

我正在尝试使用命令行 ftp 客户端对文件夹进行 ftp，但到目前为止，我只能使用“get”来获取单个文件。

* * *

## 回答 #1

> 赞同：677
> 
> 时间：2008-09-22T09:01:46.213

您可以依赖 wget 通常可以正确处理 ftp get （至少以我自己的经验）。例如：

```
wget -r ftp://user:pass@server.com/ 
```

您也可以使用`-m`适合镜像的。目前相当于`-r -N -l inf`.

如果凭据详细信息中有一些特殊字符，则可以指定`--user`和`--password`参数以使其工作。具有特定字符的自定义登录示例：

```
wget -r --user="user@login" --password="Pa$$wo|^D" ftp://server.com/ 
```

正如@asmaier 所指出的，请注意，即使`-r`是用于递归，它的默认最大级别为 5：

> ```
> -r
> --recursive
>     Turn on recursive retrieving.
> 
> -l depth
> --level=depth
>     Specify recursion maximum depth level depth.  The default maximum depth is 5. 
> ```

如果您不想错过子目录，最好使用镜像选项`-m`：

> ```
> -m
> --mirror
>     Turn on options suitable for mirroring.  This option turns on recursion and time-stamping, sets infinite
>     recursion depth and keeps FTP directory listings.  It is currently equivalent to -r -N -l inf
>     --no-remove-listing. 
> ```

* * *

## 回答 #2

> 赞同：181
> 
> 时间：2011-04-06T14:13:09.683

只是为了补充[Thibaut Barrère 给出的答案](https://stackoverflow.com/a/113900/4298200)。

我用了

```
wget -r -nH --cut-dirs=5 -nc ftp://user:pass@server//absolute/path/to/directory 
```

请注意服务器名称后的双斜杠。如果您不添加额外的斜杠，则路径是相对于用户的主目录的。

*   `-nH`避免创建以服务器名称命名的目录
*   `-nc`如果目标上已经存在新文件，则避免创建新文件（它只是被跳过）
*   `--cut-dirs=5` 允许获取 /absolute/path/to/directory 的内容并将其放在启动 wget 的目录中。数字 5 用于过滤掉路径的 5 个分量。双斜线表示一个额外的组件。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-09-22T09:02:23.417

```
ncftp -u <user> -p <pass> <server>
ncftp> mget directory 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-12-08T18:20:37.157

如果`lftp`安装在您的机器上，请使用`mirror dir`. 你完成了。如果您想递归下载目录，请参阅下面 Ciro 的评论。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-09-22T08:59:12.707

如果您可以使用`scp`代替`ftp`，该`-r`选项将为您执行此操作。我会检查您是否可以使用比 FTP 更现代的文件传输机制。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2008-09-22T09:05:07.407

请改用 WGet。它支持 HTTP 和 FTP 协议。

```
wget -r ftp://mydomain.com/mystuff 
```

祝你好运！

参考： http: [//linux.about.com/od/commands/l/blcmdl1_wget.htm](http://linux.about.com/od/commands/l/blcmdl1_wget.htm)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-22T09:05:21.493

有 'ncftp' 可用于在 linux 中安装。这适用于 FTP 协议，可用于递归下载文件和文件夹。在linux上工作。已被使用并且在递归文件夹/文件传输中运行良好。

检查此链接... [http://www.ncftp.com/](http://www.ncftp.com/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-22T09:02:44.197

如果可以的话，我强烈建议您`tar`和`bzip`（或者`gzip`，随便什么东西）远程机器上的目录——对于任何显着大小的目录，节省的带宽可能值得花时间进行压缩/解压缩。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-22T09:07:45.247

如果你想坚持使用命令行 FTP，你应该尝试 NcFTP。然后您可以使用 get -R 递归获取文件夹。你也将完成。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2010-05-07T22:01:42.770

`wget -r ftp://url`

完美适用于 Redhat 和 Ubuntu

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-11-17T20:08:43.183

你不应该使用`ftp`. 就像`telnet`它没有使用安全协议一样，密码以明文形式传输。这使得第三方很容易捕获您的用户名和密码。

要远程复制远程目录，这些选项更好：

*   `rsync`如果您可以通过 登录，它是最适合的工具`ssh`，因为它只复制差异，并且可以轻松地在中间重新启动，以防连接中断。

*   `ssh -r`是递归复制目录结构的次佳选择。

要递归地获取文件，您可以使用如下脚本： [https ://gist.github.com/flibbertigibbet/8165881](https://gist.github.com/flibbertigibbet/8165881)

看：

*   [rsync](http://linux.die.net/man/1/rsync)手册页

*   [ssh](http://linux.die.net/man/1/ssh)手册页

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2011-03-14T10:20:00.707

通过 PROMPT 命令切换提示。

用法：

```
ftp>cd /to/directory    
ftp>prompt    
ftp>mget  * 
```

# java - 如何获取图像paint/paintComponent 生成？

> ID：113897
> 
> 赞同：5
> 
> 时间：2008-09-22T09:00:27.073
> 
> 标签：java, swing, paint, jcomponent

我有一个快速的问题。如何获取由 JComponent.paint 或 paintComponent 生成的图像？

我有一个 JComponent，我将其用作“工作区”，并在其中将 paintComponent 方法覆盖为我自己的。问题是我的工作区 JComponent 也有孩子，他们有自己的 paintComponent 方法。

所以当 Swing 渲染我的工作区组件时，它会渲染工作区图形，然后是它的子组件。

但是，我想获取我的工作区组件生成的图像（包括工作区图形和子图形）。

我怎么做？

我尝试使用自己的图形自己调用paintComponent/paint-method，但我只返回了一个黑色图像。这是我尝试过的；

```
public void paintComponent(Graphics g) {

    if (bufferedImage != null) {
        g.drawImage(bufferedImage, 0, 0, this);
    }
    else {
        g.setColor(Color.WHITE);
        g.fillRect(0, 0, bufferedImage.getWidth(), bufferedImage.getHeight());
    }
}

public BufferedImage getImage() {

    BufferedImage hello = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB);
    Graphics g = hello.getGraphics();
    paintComponent( g );

    return hello;
} 
```

欢迎任何想法或评论！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T09:04:38.203

如果您过早调用 getImage，您的组件将尚未显示，并且宽度和高度仍为 0。你确定你在足够晚的时间给它打电话吗？尝试将组件的大小打印到标准输出，看看它的尺寸是多少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T09:46:34.730

似乎问题是由于 BufferedImage 是如何创建的。使用时：

```
BufferedImage hello = bufferedImage.getSubimage(0,0, getWidth(), getHeight()); 
```

相反，它奏效了。我还必须将 switch 从paintComponent 更改为paint 以渲染孩子。

问题已解决，但如果有人知道。为什么我的：

```
 BufferedImage hello = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_ARGB); 
```

总是渲染黑色图像？离题，但可能会很有趣:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T14:04:12.867

不要从外部调用paintComponent() 或paint()。相反，让您的图像在这些（覆盖）方法中创建。然后您可以确定您的图像实际上将包含组件的绘制内容。

这是一个示例应用程序。ImagePanel 实际上会在每次绘制组件时抓取组件的图形内容，这可能有点浪费，因此您可能需要调整完成此操作的频率。

```
public class SomeApp extends JFrame {

    private static class ImagePanel extends JPanel {
        private BufferedImage currentImage;
        public BufferedImage getCurrentImage() {
            return currentImage;
        }
        @Override
        public void paint(Graphics g) {
            Rectangle tempBounds = g.getClipBounds();
            currentImage = new BufferedImage(tempBounds.width, tempBounds.height, BufferedImage.TYPE_INT_ARGB);
            super.paint(g);
            super.paint(currentImage.getGraphics());
        }
    }

    public SomeApp() {
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        setSize(800,600);
        int matrixSize = 4;
        setLayout(new BorderLayout());
        add(new JLabel("Wonderful Application"), BorderLayout.NORTH);
        final ImagePanel imgPanel = new ImagePanel();
        imgPanel.setLayout(new GridLayout(matrixSize,matrixSize));
        for(int i=1; i<=matrixSize*matrixSize; i++) {
            imgPanel.add(new JButton("A Button" + i));
        }
        add(imgPanel, BorderLayout.CENTER);
        final JPanel buttonPanel = new JPanel();
        buttonPanel.add(new JButton(new AbstractAction("get image") {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(SomeApp.this, new ImageIcon(imgPanel.getCurrentImage()));
            }

        }));
        add(buttonPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        System.setProperty("swing.defaultlaf", UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new SomeApp().setVisible(true);
            }
        });
    }
} 
```

就像 Martijn 所说，您的图像可能是黑色的，因为该组件甚至还没有绘制/显示。您可以添加一个 ComponentListener 以在显示时收到通知。您使用 getSubimage 的“解决方案”与实际问题无关。我建议你删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-09-02T14:06:59.613

将新的 BufferedImage 更改为 TYPE_INT_RGB 为我解决了这个问题。不过我无法给出解释——只是一个 Swing 的谜团。

```
public BufferedImage getImage() {

    BufferedImage hello = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
    Graphics g = hello.getGraphics();
    paintComponent( g );

    return hello;
} 
```

# c# - 桌面上的透明表格

> ID：113899
> 
> 赞同：1
> 
> 时间：2008-09-22T09:01:42.063
> 
> 标签：c#, winforms, window, desktop

我想创建带有多个窗口的 ac# 应用程序，这些窗口都是透明的，上面有一些文本。

棘手的部分是使这些表单位于桌面顶部但位于桌面图标下方。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T09:10:29.653

只是使窗口透明是非常简单的：

```
this.BackColor = Color.Fuchsia;
this.TransparencyKey = Color.Fuchsia; 
```

您可以执行以下操作，以便您仍然可以与桌面或窗口下的任何其他内容进行交互：

```
public const int WM_NCHITTEST = 0x84;
public const int HTTRANSPARENT = -1;

protected override void WndProc(ref Message message)
{
    if ( message.Msg == (int)WM_NCHITTEST )
    {
        message.Result = (IntPtr)HTTRANSPARENT;
    }
    else
    {
        base.WndProc( ref message );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T10:51:03.920

感谢杰夫的提示。它仍然不是我所追求的。我实际上希望窗口看起来像是桌面的一部分，以便图标可以位于我的表单顶部。

也许有不同的方法可以做到这一点。我真的可以直接在桌面上绘制文本和图形吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-11T23:05:33.913

Jeff Hillman 上面描述的方法在使窗口透明方面是有效的，这应该使您能够让它看起来好像它是桌面的一部分（您提到的是您的目标。

您可能遇到的一个问题（我最近也遇到过）是在设置了任何抗锯齿标志的情况下绘制到窗口。具体来说，使用 DrawText，任何设置了抗锯齿标志的文本都会被渲染，就好像背景不透明一样。最终结果是你得到的文本周围有一个轻微的色差边框。我相信这也适用于其他任何事情，尽管我没有尝试过。

关于如何解决这个问题有什么想法吗？

# sql - 如何在 SQL 2000/2005 中执行区分大小写的搜索和替换？

> ID：113901
> 
> 赞同：14
> 
> 时间：2008-09-22T09:02:10.797
> 
> 标签：sql, sql-server-2005, sql-server-2000, collation

为了对 SQL Server 2000/2005 数据库中的表执行区分大小写的搜索/替换，您必须使用正确的排序规则。

您如何确定数据库的默认排序规则是否区分大小写，如果不是，如何执行区分大小写的搜索/替换？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-22T09:05:04.253

```
SELECT testColumn FROM testTable  
    WHERE testColumn COLLATE Latin1_General_CS_AS = 'example' 

SELECT testColumn FROM testTable
    WHERE testColumn COLLATE Latin1_General_CS_AS = 'EXAMPLE' 

SELECT testColumn FROM testTable 
    WHERE testColumn COLLATE Latin1_General_CS_AS = 'eXaMpLe' 
```

不要假设默认排序规则会区分大小写，只需每次指定一个区分大小写的排序规则（当然使用适合您的语言的正确排序规则）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-22T09:05:29.683

确定默认排序规则是否区分大小写，如下所示：

`select charindex('RESULT', 'If the result is 0 you are in a case-sensitive collation mode')`

结果 0 表示您处于区分大小写的排序模式，8 表示它不区分大小写。

如果排序规则不区分大小写，则需要在执行搜索/替换时显式声明要使用的排序规则模式。

以下是如何通过指定要使用的排序模式来构造 UPDATE 语句以执行区分大小写的搜索/替换：

```
update ContentTable
set ContentValue = replace(ContentValue COLLATE Latin1_General_BIN, 'THECONTENT', 'TheContent')
from StringResource
where charindex('THECONTENT', ContentValue COLLATE Latin1_General_BIN) > 0 
```

这将匹配并替换`'THECONTENT'`，但不是`'TheContent'`or `'thecontent'`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-24T08:20:49.387

如果您**在同一个字段中**有相同单词的**不同案例**，并且只想**替换特定案例**，那么您可以在函数中使用排序规则：****`REPLACE`****

 ****```
UPDATE tableName
SET fieldName = 
    REPLACE(
        REPLACE(
            fieldName COLLATE Latin1_General_CS_AS,
            'camelCase' COLLATE Latin1_General_CS_AS,
            'changedWord'
        ),
        'CamelCase' COLLATE Latin1_General_CS_AS,
        'ChangedWord'
    ) 
```

这将导致：

```
This is camelCase 1 and this is CamelCase 2 
```

变得：

```
This is changedWord 1 and this is ChangedWord 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T14:26:07.947

可以在多个语句中完成。如果您的长字符串同时包含要替换的大写小写单词，这**将不起作用。**您可能还需要使用不同的排序规则，这是区分重音和大小写的。

```
UPDATE T SET [String] = ReplacedString
FROM [dbo].[TranslationText] T, 
    (SELECT [LanguageCode]
      ,[StringNo]
      ,REPLACE([String], 'Favourite','Favorite') ReplacedString
    FROM [dbo].[TranslationText]
    WHERE 
    [String] COLLATE Latin1_General_CS_AS like '%Favourite%'
    AND [LanguageCode] = 'en-us') US_STRINGS
WHERE 
T.[LanguageCode] = US_STRINGS.[LanguageCode] 
AND T.[StringNo] = US_STRINGS.[StringNo]

UPDATE T SET [String] = ReplacedString
FROM [dbo].[TranslationText] T, 
    (SELECT [LanguageCode]
      ,[StringNo]
      , REPLACE([String], 'favourite','favorite') ReplacedString 
    FROM [dbo].[TranslationText]
    WHERE 
    [String] COLLATE Latin1_General_CS_AS like '%favourite%'
    AND [LanguageCode] = 'en-us') US_STRINGS
WHERE 
T.[LanguageCode] = US_STRINGS.[LanguageCode] 
AND T.[StringNo] = US_STRINGS.[StringNo] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T09:30:22.087

首先检查这个： [http ://technet.microsoft.com/en-us/library/ms180175(SQL.90).aspx](http://technet.microsoft.com/en-us/library/ms180175(SQL.90).aspx)

您将看到 CI 指定不区分大小写，而 CS 指定区分大小写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T09:53:33.653

此外，这可能很有用。select * from fn_helpcollat​​ions() - 这将获取您的服务器支持的所有排序规则。select * from sys.databases - 这里有一列指定服务器上每个数据库的排序规则。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-24T01:29:28.513

您可以在每次查询表时指定排序规则，也可以通过更改表将排序规则永久应用于列。

如果您确实选择执行查询方法，那么包含不区分大小写的搜索参数也是有益的。您将看到，如果您包含它们，SQL 将选择更有效的执行计划。例如：

```
SELECT testColumn FROM testTable 
    WHERE testColumn COLLATE Latin1_General_CS_AS = 'eXaMpLe' 
    and testColumn = 'eXaMpLe' 
```

# windows - 您会为触摸屏界面使用哪个 GUI 工具包？

> ID：113906
> 
> 赞同：3
> 
> 时间：2008-09-22T09:04:07.657
> 
> 标签：windows, cross-platform, touchscreen, gui-toolkit

到目前为止，我对触摸屏界面的唯一体验是所有内容都是自定义绘制的，我觉得这不是最有效的方式（即使是最基本的布局更改也是地狱）。我知道很多用于键盘和鼠标界面的 GUI 工具包，但你能推荐一些适合触摸屏的工具包吗？目标平台是 Windows，但跨平台会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T09:34:09.583

查看 Windows Presentation Foundation ( [WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation) )。它使用 XML ( [XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language) ) 来定义界面，因此很容易创建一个易于与触摸屏一起使用的界面。

需要 .NET 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T09:22:29.673

我在Little Caesars工作，所有订单都是通过电脑系统处理的。他们使用类似于放大版普通表格的触摸屏界面。按钮大约比您通常得到的大 20 倍，并且文本也被放大了很多。它看起来相当简单，我怀疑他们使用了一个特殊的框架。我建议您使用标准工具包试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T07:46:23.547

我想将 Qt 添加为具有（现在）可靠触摸支持的 UI 工具包：[QTouchEvent](https://doc.qt.io/qt-5/qtouchevent.html)。

它也是每个主要平台的跨平台，包括嵌入式设备。

# java - 在创建 JSplitPane 时获取 java.lang.ClassCastException: javax.swing.KeyStroke

> ID：113915
> 
> 赞同：1
> 
> 时间：2008-09-22T09:06:08.183
> 
> 标签：java, swing, jsplitpane

使用 JDK 1.5.0_08 初始化 JSplitPane 时出现随机不可重现的错误。请注意，这并非每次都会发生，而是大约 80% 的时间发生：

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: javax.swing.KeyStroke
at java.util.TreeMap.compare(TreeMap.java:1093)
at java.util.TreeMap.put(TreeMap.java:465)
at java.util.TreeSet.add(TreeSet.java:210)
at javax.swing.plaf.basic.BasicSplitPaneUI.installDefaults(BasicSplitPaneUI.java:364)
at javax.swing.plaf.basic.BasicSplitPaneUI.installUI(BasicSplitPaneUI.java:300)
at javax.swing.JComponent.setUI(JComponent.java:652)
at javax.swing.JSplitPane.setUI(JSplitPane.java:350)
at javax.swing.JSplitPane.updateUI(JSplitPane.java:378)
at javax.swing.JSplitPane.<init>(JSplitPane.java:332)
at javax.swing.JSplitPane.<init>(JSplitPane.java:287)
    ... 
```

想法？我已经尝试清理和重建我的项目，以尽量减少损坏类文件的可能性。

**编辑 #1**请参阅[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434148](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434148) - 似乎是 JDK 错误。任何已知的解决方法？错误条目页面上没有列出任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T09:08:47.147

在 bugs.sun.com 上进行了一些谷歌搜索后，这看起来可能是一个 JDK 错误，仅在 JDK 6 中修复。

请参阅[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434148](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6434148)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T10:18:53.840

当我升级 java verion 和 db Visualizer dint 支持 jre7 时，抛出了同样的异常。并且因为在 Windows 和 Linux/UNIX 的 DbVisualizer 8.0 中引入了对 Java 7 的支持。

DbVisualizer 9.1 中引入了对 Mac OS X 上的 Java 7 的支持。

所以对我有用的解决方案： **Windows/Unix/Linux：** 在 DbVisualizer 安装目录中有一个 .install4j 目录，如果该目录不存在，则在此目录中创建一个名为 pref_jre.cfg 的文件，在文本编辑器中打开该文件, 添加要使用的 Java 安装的根目录的完整路径。示例：C:\Program Files\Java\jre7

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-07T09:00:35.537

```
java.lang.ClassCastException: javax.swing.KeyStroke cannot be cast to java.lang.Comparable.... 
```

如果在 dbviz 中安装 java 7 后出现上述错误，请添加环境变量，如：'DBVIS_JAVA_HOME' 作为'变量名'和 java 路径，如 ex。“C:\SWDTOOLS\IBM\RAD85\runtimes\base_v7\java”

# sql - 如何找出 SQL 2000/2005 中可用的排序规则

> ID：113916
> 
> 赞同：2
> 
> 时间：2008-09-22T09:07:05.577
> 
> 标签：sql, collation

如果我需要选择一种排序模式来使用，我如何知道哪些排序规则可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-22T09:07:17.587

使用此查询列出可用的整理模式：

选择 * 从 fn_helpcollat​​ions()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-23T00:30:52.140

```
select distinct COLLATION_NAME from INFORMATION_SCHEMA.COLUMNS order by 1 
```

# drm - 是否有有效的 DRM 方案？

> ID：113923
> 
> 赞同：31
> 
> 时间：2008-09-22T09:08:34.573
> 
> 标签：drm, rights, rights-management

我们帮助客户在线管理和发布他们的媒体——图像、视频、音频等等。他们总是问我的老板是否可以阻止用户复制他们的媒体，他问我，我总是告诉他同样的事情：不能。如果用户可以查看媒体，那么一个足够坚定的用户将始终能够制作副本。但我说得对吗？

我今天又被问到了，我答应我的老板我会在网上问这件事。那么 - 是否有可行的 DRM 方案？一种会在不停止合法观看媒体的情况下阻止用户制作副本的方法吗？

如果没有，我该如何说服我的老板？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2008-09-22T09:10:17.783

不会。如果你让他们查看，他们总是可以复制他们看到的内容。你可以让这种情况更难发生，但最终，你无法阻止一个有适当决心的攻击者。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-22T09:17:07.237

如果不提供专门定制的硬件（这是微软通过其可信计算“Palladium”计划推动的），答案是否定的，你不能阻止他们去解决问题。

即使在专门定制的硬件的情况下，具有足够技能和资源的攻击者仍然可以访问您的内容，您只是大大减少了攻击面。

当然，摄像机在许多情况下也可以正常工作，然后您必须使用一组特定的电视/监视器来应对这种情况。它很快就不再具有经济可行性。

为了说服老板，告诉他什么更容易理解：你不能阻止某人在电视机前放置相机。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-09-22T10:00:49.033

没有什么是完美的，但是您可以使复制变得更加困难=不值得。

*   您可以为媒体的预览副本添加水印。
*   您可以对所有副本进行序列号，以便对其进行跟踪。
*   您可以加密媒体，只允许您控制的软件对其进行解密。（例如 Adob​​e Acrobat 文档可以设置为只读。Audible 电子书只能在 Audible 播放器中播放）。
*   您可以提供对合法用户以外的任何人都没有价值的媒体。（例如，我朋友在聚会上的照片对除了认识他们的人之外的任何人都没有什么价值）。

恕我直言，任何 DRM 尝试都会让合法的最终用户感到烦恼，所以我不推荐它。

也许你可以说服你的老板，让她想出一个有效的 DRM 方法，然后演示如何克服它？

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-22T09:10:56.953

简单地说，不，没有。可以复制任何可以查看的内容。这一点也不例外，除非你可以改变物理定律对你有利:)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-22T09:18:02.710

长答案：只允许用户通过访问您的办公室并使用位于那里的机器来浏览您的网站 - 当然，在严格的监督下。

简短的回答：没有。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-22T09:30:14.413

无论如何都无法阻止 DRM 的原因如下：想象一个银行金库。必须有办法把钱拿出来。如果有办法进去，那就意味着有人可以进去，因此它不是不可穿透的。如果金库是不可穿透的，那就意味着没有人可以进去——这意味着没有人可以将钱进出，即使是合法有权使用这些钱的人也不行。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-22T09:28:23.323

在某一时刻，您将不得不放弃您使用的任何编码/加密来规避非法复制的制作，并将内容一目了然地展示给用户。最新的，此时用户可以简单地捕获内容并制作副本。这意味着，如果您无法控制您的用户是谁（或他们如何使用您的技术），您就无法阻止他们制作副本。

现在，当然，从未加密的内容中复制可能不是最有效的复制方式（因为一个 - 取决于它被捕获的位置 - 它可能没有被压缩（例如，捕获发生在视频卡和显示器之间） )，因此可能会占用大量空间)。

基于以上所述，除非您有足够的控制权，否则技术上的答案是不，您不能阻止用户进行非法复制。

但是，您可以通过使用加密或其他与 DRM 相关的技术使他们更难以所需格式制作这些副本。根据您的用户和您的内容的受欢迎程度，颠覆 DRM 技术所需的努力可能高于您的用户愿意支付/投资的费用。是否存在这一点完全取决于您的业务和受众的性质。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-22T09:14:26.027

任何可以被人类查看和理解的东西都可以被计算机查看和存储。

您能做的最好的事情就是混淆并试图混淆，但任何适当确定的用户都会成功。您可以将文本作为图像、带水印的图像、带有公钥/私钥的加密文件提供，但最好的方法是让您跟踪谁“泄露”了某些东西，而不是阻止它泄露。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-22T10:02:57.483

现在我可以看到 12 个答案都同意答案是“否”。

如果您的业务依赖于您的客户的媒体在受保护的情况下发布，那么您的业务可能已经陷入困境。您需要与您的客户就他们正在生成的内容、他们生成内容的原因以及他们希望从中获得什么展开对话。看起来他们可能拥有过时的商业模式，在这种情况下，他们也可能处于危险之中。

客户所说的他们想要的可能是他们最好的尝试来规定他们没有告诉你的问题的解决方案。尝试更深入地挖掘他们的实际问题。也许看看[五个为什么](http://en.wikipedia.org/wiki/5_Whys)以获得灵感。

我绝对不认为我现在想在 DRM 上规划一个长期的职业生涯......

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-10-21T19:35:01.990

就说服你的老板而言，将事情归结为基本的 DRM。你卖一些有价值的东西。为了防止你的客户复制它，你把它锁在一个盒子里。为了让你的客户使用它，你给他们盒子的钥匙。

希望到那时，您的老板已经开始曙光了。

技术不是解决方案。我们有一个法律体系来处理未经许可的知识产权复制。盗窃在一小部分人口中很普遍。我的建议是不要试图出售吸引可能偷窃的人群的数字媒体。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-10-21T19:42:00.603

您需要确定的主要内容是您希望阻止复制内容的用户*级别。*你永远不会阻止 1337 h4xx0r 复制你的东西并将任何黑客知识传递给更有能力的技术人员。

当您沿着技术能力较低的路线徘徊时，您可以做更多的事情（例如通常的 DRM）来阻止他们尝试复制您的内容。当您遇到白痴用户时，您可能可以执行各种技巧，这些技巧足以使他们认为他们无法复制内容，但是他们所要做的就是遇到一个称职的技术人员并让他们提供一个链接让他们能够更上一层楼。

这是一个收益递减的例子，但仍然有用户认为仅仅因为网站禁用了右键单击，他们就无法下载图像。如果您的客户想要针对这些用户（并提供大量资金），那么可能值得进行一些混淆，但这是收益递减的情况，您的客户需要意识到他们所购买的一切都是伪装。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-22T09:10:46.753

答案很简单：不

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-22T09:12:52.533

不，他们无法阻止用户使用其相机截取屏幕截图，或使用其录音机录制电影、歌曲或其他任何内容。

如果你说的是防止制作数字化内容的“精确”副本，答案仍然是一样的：不。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-22T09:24:45.860

您无法停止观看，但可以通过在每个观看者视频中放置一个序列号，它可以让您跟踪副本。例如，在视频的右上角放一个该用户独有的小数字。如果他们复制视频并上传，你就会知道是谁做的。您也可以在长视频中移动它，或者让它随机出现以使其更难移除。

只是一个想法。我实际上是反 DRM。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-22T20:47:06.453

您可以拥有非常复杂的 DRM（自定义播放器，每次播放/加载时激活），但它仍然不会 100% 防黑客。老实说，这不值得麻烦，

尽量让诚实的人保持诚实；要么根本没有 DRM，要么只是一些易于实施且适用于 80% 的公众的简单 DRM，而剩下的 20% 则不用管，它们可能已经足够技术了，无论如何都不会被阻止。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-10-21T19:06:23.810

请允许我争辩说，答案实际上是“是的，有资格”。可以创建一个*足够*难以破解的 DRM 系统，这样非技术用户将无法复制和重新分发内容，而高技术用户将很难做到这一点。

所以最初的答案是正确的：一个“有适当动机的”黑客总是能够得到他想要的。但是可以将标准设置得足够高，以使有适当动机的黑客的数量大约等于零。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-10-21T19:17:05.973

使用当今使用的硬件，您无法阻止用户复制您的媒体。而当前的（主要）DRM 技术甚至与此无关。

DRM 是关于烦人的想要复制的用户。希望如此之多，以至于他们中的大多数人都不会复制。

问题是通过惹恼用户，你惹恼了所有用户。

这就是为什么我几乎从不购买任何受 DRM 保护的东西。当我这样做时，只有在我获得了无 DRM 副本之后，所以我确信我实际上能够听到/看到该产品的副本。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-01-04T18:59:29.030

我相信你误解了你老板的问题。**也许他甚至不知道该问什么正确的问题，所以我会给你应该**发生的问答。

老板：我们能阻止每一个坚定的用户复制我们客户的媒体吗？

你：不，这是不可能的。

老板：我们能不能让它变得困难，使得绝大多数坚定的攻击者都无法破坏我们的内容保护？

你：是的，这是可能的。

老板：能不能做到不影响媒体播放性能，不给我们的合法用户带来不便？

你：是的，这很有挑战性，但很容易处理。

老板：实施这样的保护制度在经济上可行吗？

你：这取决于我们与媒体提供商的合同细节。如果某些提供商因为我们不愿意为他们保护而不愿意向我们许可所需的内容，这可能是经济上的迫切需要。如果您决定采取这种方式，我们应该聘请一名或多名数字版权管理专家来实施该系统。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-22T09:23:11.777

至于说服你的老板，你可以试试[这本随笔书中](http://craphound.com/content/)科里·多克托罗的论点。

他有一些非常好的观点。

我认为最好的论点是您将花费大量程序员资源来编写用户不喜欢的功能。没有人希望他们的播放器说：“你不能听这首歌，因为它已经在你的电脑上”，实现这个功能会很痛苦。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-22T10:06:20.300

如果可以查看，则可以复制。

如果一个人可以复制它，他就可以将它发送给其他一百万人。

所以让它难以复制是没有意义的，因为总是有人*可以*复制它，然后他们会继续将它发送给所有不能复制的人。

DRM 唯一能做的就是让消费者更难合法使用内容。但这是故意的——媒体提供商不*希望*您备份 DVD 并将其转换为在 iPod 上播放：他们希望您再次从他们那里购买 iPod 格式的同一部电影。

*这*就是 DRM 的真正原因。他们知道阻止海盗是行不通的；他们确实知道它会阻止合法的合理使用。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2010-03-24T10:10:08.103

是的，有一个基本上未破解的 DRM。它被称为超级音频光盘 (SACD)，这是一种出色的 5.1 环绕声格式，旨在取代原始 CD。不要认为它真的像创作者希望的索尼那样流行，但仍然有大量的发烧友追随。

它基本上牢不可破的主要原因是你需要一个特殊的播放器来读取光盘，它们不能在计算机或 CD 播放器上播放，除非它们是双层的。意思是 SACD 和 CD 数据在一张光盘上，然后他们只能翻录 CD 数据而不是 SACD。

因此，如果您有想要分享的音乐，并且您的客户喜欢高端音频。如果您想要牢不可破/不可共享的音频/音乐，那么 SACD 可能是您的最佳选择。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2009-09-21T03:17:00.163

我倾向于同意，在实际意义上，可能没有万无一失的方法来防止复制，但我能证明吗？不，我还没有听到任何密封的证据。

复制是正常计算中固有的，并且是不可逆的。例如

```
X = A; // statement 1
X = B; // statement 2 
```

当执行语句 2 时，没有办法反转它，因为 X 没有记忆它的先前值。这就是抄袭的本质——忘记抄袭。

根据我对量子计算和密码学的了解，在那个领域，所有过程都是可逆的，因此可以保证始终可以检测到副本。

回到正常计算的世界，如果可以控制信息的查看者，可以尝试确保任何副本都降级并且不如原始副本。例如，有水印的想法，它实际上可以变得不可见。或者可以添加未显示但显示图像所需的附加信息。

我并不是说在正常计算中可以使用强大的 DRM。我只是说如果不是，那是一个强有力的主张，我希望看到它的无懈可击的证据。这个领域有许多曾经被认为不可能的事情，例如公钥密码学和 Dijkstra 的互斥算法。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2010-07-10T15:07:52.343

用微软工程师的话来说*“如果你的解决方案持续 6 个月，那就是永恒”*。是时候转移到 DRM 解决方案的更新实施了。因此，我们不能保证万无一失的 DRM 解决方案。但是，我们可以通过使加密程度较低的数据变得清晰，从而使破解/黑客变得非常困难。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2012-03-30T19:28:04.010

虽然“什么可以看，什么都可以复制”在理论上显然是正确的，但这并不一定为 DRM 敲响丧钟。

如果 DRM 能够很好地控制硬件，一直到显示介质，使得在显示之前没有数据泄漏，那么任何对显示的“复制”都可能是不完美的。

例如，电影院多路复用中的摄像机——当然，观看的数据已被复制，但非常次优。

为了使这种“查看；复制”的数据达到最佳状态，它需要一个能够完美记录每一个“位”数据的记录设备（并且可能实时工作）。

展望未来，您可能会获得一种 DRM 技术，该技术可以防止在存在能够复制产品的设备时查看产品。

# c# - 我可以在 LINQ 插入后返回“id”字段吗？

> ID：113928
> 
> 赞同：186
> 
> 时间：2008-09-22T09:10:02.417
> 
> 标签：c#, .net, linq, linq-to-sql

当我使用 Linq-to-SQL 将对象输入到数据库中时，是否可以在不进行另一个数据库调用的情况下获取我刚刚插入的 id？我假设这很容易，我只是不知道如何。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2008-09-22T09:15:39.563

将对象提交到数据库后，对象会在其 ID 字段中接收一个值。

所以：

```
myObject.Field1 = "value";

// Db is the datacontext
db.MyObjects.InsertOnSubmit(myObject);
db.SubmitChanges();

// You can retrieve the id from the object
int id = myObject.ID; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-22T09:16:22.447

插入生成的 ID 时，将保存到正在保存的对象的实例中（见下文）：

```
protected void btnInsertProductCategory_Click(object sender, EventArgs e)
{
  ProductCategory productCategory = new ProductCategory();
  productCategory.Name = “Sample Category”;
  productCategory.ModifiedDate = DateTime.Now;
  productCategory.rowguid = Guid.NewGuid();
  int id = InsertProductCategory(productCategory);
  lblResult.Text = id.ToString();
}

//Insert a new product category and return the generated ID (identity value)
private int InsertProductCategory(ProductCategory productCategory)
{
  ctx.ProductCategories.InsertOnSubmit(productCategory);
  ctx.SubmitChanges();
  return productCategory.ProductCategoryID;
} 
```

参考：[http ://blog.jemm.net/articles/databases/how-to-common-data-patterns-with-linq-to-sql/#4](http://blog.jemm.net/articles/databases/how-to-common-data-patterns-with-linq-to-sql/#4)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-14T14:55:10.687

试试这个：

```
MyContext Context = new MyContext(); 
Context.YourEntity.Add(obj);
Context.SaveChanges();
int ID = obj._ID; 
```

# asp.net - 从 ASP.NET 工作进程 ID 获取性能计数器实例名称 (w3wp#XX)

> ID：113930
> 
> 赞同：15
> 
> 时间：2008-09-22T09:10:09.017
> 
> 标签：asp.net, iis-6, performancecounter

我想使用 .NET/Process 性能计数器在网页上显示一些内存统计信息（工作集、GC 等）。不幸的是，如果该服务器上有多个应用程序池，它们会使用索引（#1、#2 等）进行区分，但我不知道如何将进程 ID（我拥有）与该 #xx 索引匹配。是否有编程方式（来自 ASP.NET 网页）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-29T09:34:24.650

```
private static string GetProcessInstanceName(int pid)
{
  PerformanceCounterCategory cat = new PerformanceCounterCategory("Process");

  string[] instances = cat.GetInstanceNames();
  foreach (string instance in instances)
  {

     using (PerformanceCounter cnt = new PerformanceCounter("Process",  
          "ID Process", instance, true))
     {
        int val = (int) cnt.RawValue;
        if (val == pid)
        {
           return instance;
        }
     }
  }
  throw new Exception("Could not find performance counter " + 
      "instance name for current process. This is truly strange ...");
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-22T09:26:59.880

谷歌上的第一击：

[出现多个 CLR 性能计数器，其名称类似于“W3wp#1”](http://openrent.blogspot.com/2008/01/multiple-clr-performance-counters.html)

> 当多个 ASP.NET 工作进程正在运行时，公共语言运行时 (CLR) 性能计数器的名称将类似于“W3wp#1”或“W3sp#2”等。这在 .NET Framework 2.0 中得到了纠正，在 .NET CLR 内存性能对象中包含一个名为 Process ID 的计数器。此计数器显示实例的进程 ID。您可以使用此计数器来确定与进程关联的 CLR 性能计数器。

还有[知识库 281884](http://support.microsoft.com/kb/281884)：

> 默认情况下，性能监视器 (Perfmon.msc) 通过按以下方式枚举进程来显示具有相同名称的多个进程：
> 
> 进程#1 进程#2 进程#3
> 
> 性能监视器还可以通过以下方式将进程 ID (PID) 附加到名称中来显示这些进程：
> 
> 进程_PID

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-23T01:59:55.550

尽管更改注册表设置看起来很容易，但不幸的是，我们大多数人都无权在服务器上进行更改（或者我们不想碰它！）。在这种情况下，有一个小的解决方法。我在[这里](http://chillicode.wordpress.com/2009/09/17/worker-process-instance-and-process-id/)写过关于这个的博客。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T10:01:47.530

chiru 的示例在特定情况下不起作用 - 当您有同一个程序的两个版本，名称相同，一个不是 .net 并且您在非 .net 版本之后启动 .net 版本。.Net 版本将命名为 applicaion#1，但是当您使用此名称访问 CLR 性能计数器时，计数器上的实例名称的名称没有 #1，因此您会失败。

缺口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-14T20:54:04.237

我知道之前已经回答过了，但只是为了完整的工作代码，我发布了这个解决方案。请注意此代码基于 M4N 在此链中提交的方法：

```
public static long GetProcessPrivateWorkingSet64Size(int process_id)
{
  long process_size = 0;
  Process process = Process.GetProcessById(process_id);
  if (process == null) return process_size;
  string instanceName = GetProcessInstanceName(process.Id);
  var counter = new PerformanceCounter("Process", "Working Set - Private", instanceName, true);
  process_size = Convert.ToInt32(counter.NextValue()) / 1024;
  return process_size;
}

public static string GetProcessInstanceName(int process_id)
{
  PerformanceCounterCategory cat = new PerformanceCounterCategory("Process");
  string[] instances = cat.GetInstanceNames();
  foreach (string instance in instances)
  {
    using (PerformanceCounter cnt = new PerformanceCounter("Process", "ID Process", instance, true))
    {
       int val = (int)cnt.RawValue;
       if (val == process_id)
         return instance;
    }
  }
  throw new Exception("Could not find performance counter ");
} 
```

此外，如果要获取同一进程的多个实例的总内存，请使用上述方法和以下方法：

```
public static long GetPrivateWorkingSetForAllProcesses(string ProcessName)
{
  long totalMem = 0;
  Process[] process = Process.GetProcessesByName(ProcessName);
  foreach (Process proc in process)
  {
    long memsize = GetProcessPrivateWorkingSet64Size(proc.Id);
    totalMem += memsize;
  }
  return totalMem;
} 
```

# winapi - Vista 上的 IPC（服务和应用程序）

> ID：113951
> 
> 赞同：4
> 
> 时间：2008-09-22T09:17:05.007
> 
> 标签：winapi, windows-vista, service, ipc

我正在 Vista 上创建一个应用程序，其中包括一个服务和一个控制台应用程序。两者都在同一个用户帐户中运行

在服务中，我正在创建一个事件并等待该事件。在控制台应用程序中，我正在打开相同的事件（问题从这里开始）并调用*SetEvent*函数。我无法在控制台应用程序中打开事件（出现错误 5，访问被拒绝）。我在网上搜索并看到了一些关于完整性级别的内容（我不确定问题与完整性级别有关）。它告诉那个服务并且应用程序具有不同的完整性级别。

这是代码的一部分，发生IPC

**服务**

```
DWORD
WINAPI IpcThread(LPVOID lpParam)
{
HANDLE ghRequestEvent = NULL ;

ghRequestEvent = CreateEvent(NULL, FALSE,
FALSE, "Global\\Event1") ; //creating the event

if(NULL == ghRequestEvent)
{
//error
}
while(1)
{
WaitForSingleObject(ghRequestEvent, INFINITE) //waiting for the event
//here some action related to event
}
} 
```

**控制台应用程序**

在应用程序中，打开事件并设置事件

```
unsigned int
event_notification()
{
HANDLE ghRequestEvent = NULL ;

 ghRequestEvent = OpenEvent(SYNCHRONIZE|EVENT_MODIFY_STATE, FALSE, "Global\\Event1") ;

if(NULL == ghRequestEvent)
{
//error
}
SetEvent(ghRequestEvent) ;
} 
```

我正在以管理权限运行两个应用程序（服务和控制台应用程序）（我以管理员身份登录并通过右键单击并使用“以管理员身份运行”选项运行控制台应用程序）。

我在控制台应用程序（我在其中打开事件）中遇到的错误是错误号 5（拒绝访问。）。

因此，如果您告诉如何在 Vista 中的服务和应用程序之间进行 IPC，将会非常有帮助

提前致谢

纳瓦尼思

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-22T09:41:47.037

服务和应用程序是作为具有不同完整性级别的同一用户运行，还是作为不同用户运行？

如果是前者，那么 MSDN[中关于完整性级别的这篇文章可能会有所帮助](http://msdn.microsoft.com/en-us/library/bb250462.aspx)。他们有一些用于降低文件完整性级别的示例代码。我不确定这可能与事件有关。

```
#include <sddl.h>
#include <AccCtrl.h>
#include <Aclapi.h>

void SetLowLabelToFile()
{
  // The LABEL_SECURITY_INFORMATION SDDL SACL to be set for low integrity 
  #define LOW_INTEGRITY_SDDL_SACL_W L"S:(ML;;NW;;;LW)"
  DWORD dwErr = ERROR_SUCCESS;
  PSECURITY_DESCRIPTOR pSD = NULL;    

  PACL pSacl = NULL; // not allocated
  BOOL fSaclPresent = FALSE;
  BOOL fSaclDefaulted = FALSE;
  LPCWSTR pwszFileName = L"Sample.txt";

  if (ConvertStringSecurityDescriptorToSecurityDescriptorW(
         LOW_INTEGRITY_SDDL_SACL_W, SDDL_REVISION_1, &pSD;, NULL)) 
  {
    if (GetSecurityDescriptorSacl(pSD, &fSaclPresent;, &pSacl;, 
         &fSaclDefaulted;))
    {
      // Note that psidOwner, psidGroup, and pDacl are 
      // all NULL and set the new LABEL_SECURITY_INFORMATION
      dwErr = SetNamedSecurityInfoW((LPWSTR) pwszFileName, 
                 SE_FILE_OBJECT, LABEL_SECURITY_INFORMATION, 
                 NULL, NULL, NULL, pSacl);
    }
    LocalFree(pSD);
  }
} 
```

如果是后者，您可能会查看此链接，该链接[建议创建一个 NULL ACL](http://www.tech-archive.net/Archive/Development/microsoft.public.win32.programmer.kernel/2007-04/msg00086.html)并将其与对象关联（在示例中它是一个命名管道，但对于我确定的事件，该方法是相似的：

```
BYTE sd[SECURITY_DESCRIPTOR_MIN_LENGTH];
SECURITY_ATTRIBUTES sa;

sa.nLength = sizeof(sa);
sa.bInheritHandle = TRUE;
sa.lpSecurityDescriptor = &sd;

InitializeSecurityDescriptor(&sd, SECURITY_DESCRIPTOR_REVISION);
SetSecurityDescriptorDacl(&sd, TRUE, (PACL) 0, FALSE);

CreateNamedPipe(..., &sa); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T10:16:02.647

我注意到您正在“全局”命名空间中创建对象，但试图在本地命名空间中打开它。在公开通话中的名称中添加“Global\”是否有帮助？

此外，在 //error 区域中，是否有任何内容可以让您知道它没有被创建？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T10:05:25.357

首先，重要的是从概念上理解需要什么。一旦理解了这一点，我们就可以从那里得到它。

在服务器上，它应该类似于：

```
{
   HANDLE hEvent;
   hEvent = CreateEvent(null, true, false, TEXT("MyEvent"));
   while (1)
   {
       WaitForSingleObject (hEvent);
       ResetEvent (hEvent);
       /* Do something -- start */
       /* Processing 1 */
       /* Processing 2 */
       /* Do something -- end */
   }
} 
```

在客户端：

```
{
   HANDLE hEvent;
   hEvent = OpenEvent(0, false, TEXT("MyEvent"));
   SetEvent (hEvent);
} 
```

需要注意的几点：

*   ResetEvent 应该尽可能早，就在 WaitForSingleObject 或 WaitForMultipleObjects 之后。如果多个客户端正在使用服务器并且第一个客户端的处理需要时间，那么第二个客户端可能会设置事件并且在服务器处理第一个请求时可能不会被捕获。
*   您应该实现一些机制来通知客户端服务器已完成处理。
*   在做任何 win32 服务 mumbo-jumbo 之前，让服务器作为简单的应用程序运行。这将消除任何与安全相关的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-24T05:08:47.910

“1800 INFORMATION”是对的——这是一个UIPI问题；无论如何不要在新代码中使用事件，如果在触发事件时目标阻塞事件恰好在用户模式 ​​APC 代码中，则事件信号可能会丢失。Win32 中编写服务/应用程序的规范方法是使用 RPC 调用来跨越 UIPI 边界。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-23T14:33:17.140

@纳瓦尼思：

优秀的反馈。由于您的错误是拒绝访问，因此我会将所需的访问权限从您真正不需要的 EVENT_ALL_ACCESS 更改为

```
(SYNCHRONIZE | EVENT_MODIFY_STATE) 
```

SYNCHRONIZE 让您等待事件，而 EVENT_MODIFY_STATE 让您调用 SetEvent、ResetEvent 和 PulseEvent。

您可能需要更多访问权限，但这是非常不寻常的。

# openid - 欧洲有 OpenID 提供商吗？

> ID：113963
> 
> 赞同：2
> 
> 时间：2008-09-22T09:24:20.683
> 
> 标签：openid

有人知道欧洲的 OpenID 提供商吗？我没有使用著名的大型服务之一（雅虎，..）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T09:30:16.033

我自己开发了一个，[LoginBuzz](http://www.loginbuzz.com/en)。它主要是丹麦语，上周我首先翻译了它的许多部分，但它应该是功能齐全的。

它支持简单的注册、属性交换和PAPE。我还实现了 CardSpace 支持和短信（目前仅在丹麦可用），以实现更安全的身份验证过程。在不久的将来，它也应该得到对客户端证书的支持。

我的主要目标是保持简单和快速。您真正想要的是返回请求身份验证的站点，而不是在提供商的站点上花费时间。

我对反馈非常感兴趣，以使其成为更好的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T19:15:52.750

当然，还有支持许多安全身份验证机制的[Clavid](http://www.clavid.ch/) OpenID 提供程序。

# dynamics-crm - Microsoft CRM 中的故障单

> ID：113972
> 
> 赞同：0
> 
> 时间：2008-09-22T09:27:22.437
> 
> 标签：dynamics-crm, dynamics-crm-4, ticket-system

我正在为我的大学定制一个 Microsoft Dynamics CRM (4.0) 系统作为论文。我的老师想知道是否可以在 CRM 中实施票务系统，以便用户（而不是客户）可以生成故障单。例如，如果他们的计算机无法正常工作。我浏览了互联网，发现了一些可以处理票务的软件，但我不明白这是否可以集成到 CRM 中

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-22T15:28:07.267

CRM 包含构建工单业务对象所需的所有功能，让用户创建新工单，将工单分配给开发人员或支持技术人员进行工作，并在工作完成后解决工单（带注释）。不需要外部软件。

# c# - 当另一个声音使用 XNA/XACT 结束时，如何立即播放一个声音？

> ID：113977
> 
> 赞同：1
> 
> 时间：2008-09-22T09:30:06.177
> 
> 标签：c#, audio, xna, xact

这个问题介于音频设计师和程序员的世界之间。虽然这个问题可能必须由音频设计师的那个领域来部分回答，但这对于程序员来说肯定是一个问题。在我们的项目中，我们希望在游戏计时器还剩一分钟以上时循环播放声音（背景音乐）。当这个时间到达时，我们希望停止创作的音乐，**然后立即继续结束片段**。我一直在研究 XACT，它似乎支持不同的事件。不幸的是，缺少文档，并且该应用程序对我作为程序员来说有些陌生。

我想做的是沿着这些思路（不同的方法）：

1.  当音乐停止时，我想绑定一个事件立即播放另一个声音
2.  当音乐中触发标记时，我想立即播放另一个声音
3.  我还想在我的应用程序中知道其中一些事件何时发生

问题是当另一个声音开始时我找不到任何自动播放声音的机制，而且我找不到将 XACT 项目中的事件连接到 C# 的方法。

如果这无法完成（即 XACT/XNA 不支持这些操作），请收集您的想法，了解如何以最小的交叉声音时间错误解决此问题。最好我可以通过调用 XNA 在 C# 中尽可能地控制它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T12:08:35.967

## 我想我现在已经解决了

这就是我的做法。

1.  选择要在**XACT中停止后更改声音的****Cue**。
***   将**播放列表类型**设置为**Interactive**。*   打开提示**转换**。*   选择**按目的地查看**。*   在树视图中可见的**（停止）**节点中选择**Cue 。*****   在树视图右侧的**转换属性中，对于****Source 和 Destination**：
    1.  将**Source**设置为**End of Loop**。
    2.  将**目标**设置为**开始**。*   在树视图右侧的**Transition Properties中，对于****Transitions**：
    1.  将**转换类型**设置为**直接并发转换**。
    2.  将**Transitional Sound**设置为**您希望**在循环声音完成循环后播放的声音。****

 ****关闭窗口并通过播放 Cue 进行测试。**还要测试以将其按原样**停止，以查看该行为是否符合您的期望。

* * *

## 执行

在代码中，**Stop** the Cue **As Authored**以获取此行为。**立即**停止提示而不播放声音结尾。我希望这对将来可能遇到此问题的其他人有所帮助。问题和答案并不像我最初想象的那样面向代码。此外，这适用于 XNA 2.0。我不知道在 XNA 3.0+ 中是否会有其他选项来控制这种行为。

# excel - 使用 Excel 宏查找单元格范围

> ID：113983
> 
> 赞同：0
> 
> 时间：2008-09-22T09:33:25.700
> 
> 标签：excel, vba

我在工作表中有许多嵌入的对象（形状），并且图标显示在单元格内。我如何知道显示形状对象的单元格范围。

*示例：*当我选择 a`B2`然后在 中选择对象（形状）时 `B17`，我在`Cell.Address`它显示的内容上进行查询`B2`- 如何将单元格地址设为`B17`？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-22T09:45:46.980

您可以使用`Shape`属性`.TopLeftCell`并`.BottomRightCell`返回形状重叠的矩形范围的范围。

在您的示例中，`YourShape.TopLeftCell.Address`应该返回`$B$17`

# .net - 测试是否安装了字体

> ID：113989
> 
> 赞同：31
> 
> 时间：2008-09-22T09:35:03.293
> 
> 标签：.net, windows, fonts

有没有一种简单的方法（在.Net中）来测试当前机器上是否安装了字体？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-09-22T09:39:17.213

```
string fontName = "Consolas";
float fontSize = 12;

using (Font fontTester = new Font( 
       fontName, 
       fontSize, 
       FontStyle.Regular, 
       GraphicsUnit.Pixel)) 
{
    if (fontTester.Name == fontName)
    {
        // Font exists
    }
    else
    {
        // Font doesn't exist
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-22T09:38:57.590

[你如何获得所有已安装字体的列表？](https://stackoverflow.com/questions/89886/how-do-you-get-a-list-of-all-the-installed-fonts#89895)

```
var fontsCollection = new InstalledFontCollection();
foreach (var fontFamily in fontsCollection.Families)
{
    if (fontFamily.Name == fontName) {...} \\ check if font is installed
} 
```

有关详细信息，请参阅[InstalledFontCollection 类](http://msdn.microsoft.com/en-us/library/system.drawing.text.installedfontcollection.aspx)。

MSDN：
[枚举已安装的字体](http://msdn.microsoft.com/en-us/library/0yf5t4e8(VS.71).aspx)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-22T09:56:24.397

感谢 Jeff，我最好阅读 Font 类的文档：

> 如果 familyName 参数指定的字体未安装在运行应用程序的计算机上或不受支持，则将替换 Microsoft Sans Serif。

这些知识的结果：

```
 private bool IsFontInstalled(string fontName) {
        using (var testFont = new Font(fontName, 8)) {
            return 0 == string.Compare(
              fontName,
              testFont.Name,
              StringComparison.InvariantCultureIgnoreCase);
        }
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-11T14:57:29.977

`Font`使用创建提出的其他答案仅在可用时才`FontStyle.Regular`有效。某些字体（例如 Verlag Bold）没有常规样式。创建将失败，并出现异常*Font 'Verlag Bold' does not support style 'Regular'*。您需要检查应用程序需要的样式。解决方案如下：

```
 public static bool IsFontInstalled(string fontName)
  {
     bool installed = IsFontInstalled(fontName, FontStyle.Regular);
     if (!installed) { installed = IsFontInstalled(fontName, FontStyle.Bold); }
     if (!installed) { installed = IsFontInstalled(fontName, FontStyle.Italic); }

     return installed;
  }

  public static bool IsFontInstalled(string fontName, FontStyle style)
  {
     bool installed = false;
     const float emSize = 8.0f;

     try
     {
        using (var testFont = new Font(fontName, emSize, style))
        {
           installed = (0 == string.Compare(fontName, testFont.Name, StringComparison.InvariantCultureIgnoreCase));
        }
     }
     catch
     {
     }

     return installed;
  } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-24T21:47:52.317

这是我的做法：

```
private static bool IsFontInstalled(string name)
{
    using (InstalledFontCollection fontsCollection = new InstalledFontCollection())
    {
        return fontsCollection.Families
            .Any(x => x.Name.Equals(name, StringComparison.CurrentCultureIgnoreCase));
    }
} 
```

需要注意的一点是，该`Name`属性并不总是您在 C:\WINDOWS\Fonts 中所期望的。例如，我安装了一种名为“Arabic Typsetting Regular”的字体。`IsFontInstalled("Arabic Typesetting Regular")`将返回 false，但`IsFontInstalled("Arabic Typesetting")`将返回 true。（“Arabic Typesetting”是Windows字体预览工具中的字体名称。）

就资源而言，我运行了一个测试，多次调用此方法，每次测试仅在几毫秒内完成。我的机器有点过载，但除非您需要非常频繁地运行此查询，否则性能似乎非常好（即使您这样做了，这也是缓存的用途）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-01T19:35:17.853

脱离 GvS 的回答：

```
 private static bool IsFontInstalled(string fontName)
    {
        using (var testFont = new Font(fontName, 8))
            return fontName.Equals(testFont.Name, StringComparison.InvariantCultureIgnoreCase);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-13T08:44:41.483

在我的情况下，我需要检查带有扩展名的字体文件名

例如：verdana.ttf = Verdana 常规，verdanai.ttf = Verdana 斜体

```
using System.IO;

IsFontInstalled("verdana.ttf")

public bool IsFontInstalled(string ContentFontName)
{
    return File.Exists(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), ContentFontName.ToUpper()));
} 
```

# sorting - 对堆进行排序的最快方法（至少在理论上）是什么？

> ID：113991
> 
> 赞同：2
> 
> 时间：2008-09-22T09:35:51.420
> 
> 标签：sorting, heap

堆是一个列表，其中适用以下内容：

```
l[i] <= l[2*i] && l[i] <= [2*i+1] 
```

为了`0 <= i < len(list)`

我正在寻找就地排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-22T09:55:22.073

只需使用堆排序。它是就地的。那将是最自然的选择。

您也可以直接使用您的堆并使用其他算法对其进行排序。之后，您从排序列表中重新构建堆。快速排序是一个很好的选择，因为您可以确定它不会仅仅因为您的堆已经预先排序而以最坏的 O(n²) 顺序运行。

如果您的比较功能很昂贵，那可能会更快。堆排序倾向于经常评估比较函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T09:46:08.117

好吧，通过将数据放在堆中，您已经完成了堆排序的一半。您只需要实现堆排序算法的第二部分。这应该比在堆数组上使用快速排序更快。

如果你有勇气，你可以尝试实现[smoothsort](http://www.cs.utexas.edu/users/EWD/ewd07xx/EWD796a.PDF)，它比堆排序快于几乎排序的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-22T09:55:03.713

就地对堆进行排序听起来像是[Heap Sort](http://en.wikipedia.org/wiki/Heapsort)的工作。

我假设内存受到限制，也许是嵌入式应用程序？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T09:56:05.397

既然你已经有一个堆，你不能只使用[堆排序](http://en.wikipedia.org/wiki/Heapsort)的第二阶段吗？它可以在适当的位置工作，并且应该很好且高效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-22T09:58:30.273

对于就地排序，最快的方法如下。当心我的代码中的一个错误。请注意，此方法提供了一个反向排序列表，该列表需要在最后一步中取消。如果你使用最大堆，这个问题就会消失。

总体思路很简洁：将最小元素（索引 0 处）与堆中的最后一个元素交换，将该元素向下冒泡直到堆属性恢复，然后将堆的大小缩小一并重复。

[正如 David Mackay在这里](http://http://users.aims.ac.za/~mackay/sorting/sorting.html)演示的那样，这并不是非就地排序的绝对最快方法- 您可以通过将更可能是最小的元素放在堆顶部而不是底部行中的元素来做得更好。

时间复杂度是 T(n.log n) 最坏情况 - n 次迭代可能有 log n（堆的高度）通过 while 循环。

```
for (int k=len(l)-1;k>0;k--){
swap( l, 0, k );
while (i*2 < k)
  {
int left = i*2;
int right = l*2 + 1;
int swapidx = i;
if ( l[left] < l[right] )
  {
    if (l[i] > l[left])
      {
    swapidx = left;
      }
  }
else
  {
    if (l[i] > l[right])
      {
    swapidx = right;
      }
  }

if (swapidx == i)
  {
    // Found right place in the heap, break.
    break;
  }
swap( l, i, swapidx );
i = swapidx;
  }}

// Now reverse the list in linear time:
int s = 0; 
int e = len(l)-1;
while (e > s)
  {
    swap( l, s, e );
    s++; e--:
  } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-22T09:45:50.083

逐一读取堆顶的项目。基本上你所拥有的是堆排序。

# c++ - C++ 二元运算符的优先顺序

> ID：113992
> 
> 赞同：4
> 
> 时间：2008-09-22T09:36:01.777
> 
> 标签：c++, binary-operators

以什么顺序测试以下参数（在 C++ 中）？

```
if (a || b && c)
{
} 
```

我刚刚在我们的应用程序中看到了这段代码，我讨厌它，我想添加一些括号来澄清排序。但是在我知道我将它们添加到正确的位置之前，我不想添加括号。

***编辑：接受的答案和跟进***

这个链接有更多信息，但它的含义并不完全清楚。看来|| 和 && 具有相同的优先级，在这种情况下，它们是从左到右计算的。

[http://msdn.microsoft.com/en-us/library/126fe14k.aspx](http://msdn.microsoft.com/en-us/library/126fe14k.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-22T09:45:20.413

[ [http://www.cppreference.com/wiki/operator_precedence]](http://www.cppreference.com/wiki/operator_precedence])（通过谷歌搜索“C++ 运算符优先级”找到）

该页面告诉我们 && 在第 13 组中的优先级高于 || 在第 14 组中，所以表达式等价于 || (b && c)。

不幸的是，维基百科文章 [ [http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence]](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence])不同意这一点，但由于我的办公桌上有 C89 标准并且它与第一个站点一致，我'我要修改维基百科的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-22T09:38:12.117

从[这里](http://www.difranco.net/compsci/C_Operator_Precedence_Table.htm)：

```
a || (b && c) 
```

这是默认优先级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-22T10:39:29.550

&& (boolean AND) 的优先级高于 || （布尔或）。因此以下是相同的：

```
a || b && c
a || (b && c) 
```

一个好的助记规则是记住 AND 就像乘法，OR 就像加法。如果我们将 AND 替换为 * 并将 OR 替换为 +，我们会得到一个更熟悉的等价物：

```
a + b * c
a + (b * c) 
```

实际上，在布尔逻辑中，AND 和 OR 的行为类似于以下算术运算符：

```
aba AND ba * ba OR ba + b
--------------------------------------
0 0 0 0 0 0
0 1 0 0 1 1
1 0 0 0 1 1
1 1 1 1 1 1（确实是 2，但我们假装是 1）

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T10:34:27.080

回答后续问题：显然 MSDN 上的表格是拙劣的，可能是有人无法制作像样的 HTML 表格（或使用 Microsoft 工具生成它！）。
我想它应该看起来更像 Rodrigo 引用的 Wikipedia 表格，其中我们有明确的小节。
但显然公认的答案是正确的，不知何故，我们与 && 和 || 具有相同的优先级 例如，与 * 和 + 相比。
您给出的片段对我来说是清晰明确的，但我想添加括号也不会造成伤害。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-09-22T09:39:12.300

我不确定，但你应该很容易找到。

只需创建一个小程序，其中包含以下语句的真值： (true || false && true)

如果结果为真，则 || 优先级高于&&，如果是falase，则反之。************