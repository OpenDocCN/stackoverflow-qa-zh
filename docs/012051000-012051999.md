# StackOverflow 问答 12051000-12051999

# javascript - JavaScript、JScript 和 ECMAScript 有什么区别？

> ID：12051002
> 
> 赞同：32
> 
> 时间：2012-08-21T08:35:23.277
> 
> 标签：javascript, jscript

好的，所以我正在尝试正确地学习 JavaScript，以便我可以编写好的、干净的客户端代码，但是每当我认为我正在取得进展时，总会有一些事情阻止我走上正轨！

我想知道：

1.  JavaScript、ECMAScript 和 JScript 有什么区别？

2.  我应该重点学习哪个？

3.  如果这些是版本化的，我应该支持哪个版本？

4.  是否有任何非常好的参考资料（网络/书籍等）必须拥有/阅读？

5.  如何确保我编写的内容与所有主流浏览器（IE、FF、Safari、Chrome、Opera 等）兼容？

6.  最重要的是......是否有核心对象（数组、数字等）的引用，所以我知道已经实现了什么以及我自己需要做什么？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-21T08:45:45.060

Javascript 是 Netscape 开发该语言时的原始名称。

JScript 是微软自己实现的名称。

ECMAScript 是由 ECMA 开发的语言标准的名称，源自最初的 Javascript 实现。

因此，它只是一种语言，具有不同的实现。

Javascript 和 JScript 的实现在支持的内容上有所不同，但每个版本都支持相应版本的 ECMAScript 标准中的内容。通常你只使用几个版本支持的东西，这样它就可以在所有仍在使用的浏览器中工作。

一个参考是[Mozilla 开发者网络](https://developer.mozilla.org/en-US/)，因为 Mozilla 是 Javascript 的当前开发者。对于每个方法和属性，您可以找到它支持的版本。

JScript 记录在[Microsoft Developer Network](http://msdn.microsoft.com/en-gb/)中，并且有类似的支持信息。（请注意，所有 Microsoft 文档都在那里，不仅是 JScript，因此例如，您需要搜索“jscript array”而不仅仅是“array”。）

使用像 jQuery 这样的库有助于避免处理浏览器之间的一些兼容性问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T08:41:55.817

1.  ECMAScript 是由 Ecma International 在 ECMA-262 规范和 ISO/IEC 16262 中标准化的脚本语言。该语言以 JavaScript、JScript、和动作脚本。

2.  取决于你，但我认为 Web 开发最常用的是 JavaScript

3.  JavaScript 是在 ECMAScript 语言标准中形式化的，主要以客户端 JavaScript 的形式使用

4.  我会推荐[这](https://rads.stackoverflow.com/amzn/click/com/0596517742)本书

5.  通过越来越多地了解语言本身并编写测试

6.  看[这里](http://www.w3schools.com/js/default.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T08:47:02.173

重要的是要理解，ECMAScript 是上个世纪定义的标准。:D 而 Javascript 是从 ECMAScript 派生的。从某种意义上说，它实现了标准。

最大的不同是，Javascript 实际上只存在于浏览器中，也就是说，它本身并不是一个标准。每个浏览器都可以（并且很多）实现它自己的方法。

所以，如果你真的想学习它并编写干净的代码，那么恕我直言，你必须首先熟悉 ECMAScript 标准。

To 3：由于Javascript是由浏览器实现的，这实际上取决于您要为其开发代码的浏览器。较旧的浏览器可能必须在您的代码中进行一些单独的处理。

To 5：同样，javascript可以检查哪个浏览器（或一般的客户端软件）请求它加载的页面。含义：如果情况变得更糟，您可以在代码中单独处理每个浏览器。但大多数时候它们都非常合规（至少在以后的版本中）

在 4 和 6 上，我必须先检查自己。

希望我能帮到你一点。

问候

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T08:50:08.523

1.  ECMAScript 是语言，JavaScript 和 JScript 是*方言*

2.  我个人会看并学习 JavaScript。

3.  这取决于您要支持的浏览器，很容易用谷歌搜索。

4.  [MDN](https://developer.mozilla.org/en-US/docs/JavaScript)是一个非常好的网络资源。[JavaScript: The Good Parts](https://rads.stackoverflow.com/amzn/click/com/0596517742)和[JavaScript: The Definitive Guide](https://rads.stackoverflow.com/amzn/click/com/0596000480)都是很不错的书，第一本短小精悍，后者非常详细。

5.  出于这个原因，像 jQuery 这样的 JavaScript 库非常好。这一切都归结为学习浏览器的所有怪癖。谷歌是你的朋友。

6.  [MDN](https://developer.mozilla.org/en-US/docs/JavaScript)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T08:40:10.563

1.  请维基百科。
2.  Javascript 是一种语言，这可能是您想要学习的内容，而不是规范。
3.  欢迎来到地狱，所有人。[Modernizr](http://modernizr.com)和[jQuery](http://jquery.com)的存在是有原因的。除非您使用 Node.js 在服务器端执行 Javascript，否则在这种情况下您可以只专注于一个 JS 引擎（V8 for Node）。
4.  [MDN](https://developer.mozilla.org/en-US/docs/JavaScript)
5.  测试，测试，测试和重新测试。尽量不要使用太新的功能并使用库。
6.  MDN 告诉你哪个浏览器支持什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-21T08:42:34.120

1.  它们是一回事 - 有关 JavaScript 的历史，请观看 YouTube 上的 Douglas Crockford 网络广播。

[http://youtu.be/_DKkVvOt6dk](http://youtu.be/_DKkVvOt6dk) http://youtu.be/hQVTIJBZook

2,3,4。从这个[http://eloquentjavascript.net/开始](http://eloquentjavascript.net/)

1.  像 jQuery 这样的库在规范跨浏览器的行为方面做得很好。

2.  我*认为*这就是您正在寻找的[http://dochub.io/#javascript/](http://dochub.io/#javascript/)

# serial-port - 来自 24 位 ADC 的位太多？

> ID：12051005
> 
> 赞同：0
> 
> 时间：2012-08-21T08:35:33.480
> 
> 标签：serial-port, bit, adc

我正在使用 Analog Devices 的 ADuC834 来测量一些电压。我将结果存储在包含 34 个 LONG 数字的表中。存储过程如下所示（BASCOM）：

```
 Adcout = 0

  Adcout = Adcout Or Adc0h

  Shift Adcout , Left , 8

  Adcout = Adcout Or Adc0m

  Shift Adcout , Left , 8

  Adcout = Adcout Or Adc0l

  Result(count) = Adcout 
```

完成所有转换后，它们将通过 RS232 端口发送。

```
 Printhex Result(count) 
```

而不是接收 24 位，我得到 25 位。

结果的形式是`0x01HHMMLL`它们应该看起来像`0x00HHMMLL`。

这个额外的位从哪里来？我应该将其视为转换结果的一部分吗？

谢谢您的帮助。乌卡斯

# jquery - 函数多次调用

> ID：12051007
> 
> 赞同：4
> 
> 时间：2012-08-21T08:35:42.483
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

大家好，我假设我的移动应用程序中有两个 html 文件，分别是 page1.html 和 page2.html。在 page2.html 中，我有一个表，单击行时，我显示了一个警报。如果假设我从 page1 转到 page2.html，那么在单击表时它会显示一次警报框。如果我按下返回按钮然后它会转到 page1.html 如果假设我再次转到 page2.html 并单击表格行，那么这次警报显示 2 次。如果我再次返回 page1 并再次访问 page2.html 那么这次单击行时会显示警报 3 次，依此类推...

我的 page2.html 表如下所示：

```
<div id="myTable"  align="center"  data-theme="b"></div>
        <script type="text/javascript"> 

var theader = '<table border="1" id=\"tableId\">\n';

                    var colheader = '<tr id="headingtab" bgcolor="#D68B8B"><th>Name</th><th>Address</th><th>City</th><th>LTP</th><th>State</th><th>Country</th><th>Mob No</th></tr>\n';
                    tbody = colheader; 

                    tbody += '<td>';
                        tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>';

                        tbody += '<td>';
                       tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>'

                        tbody += '<td>';
                        tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>'

                        tbody += '<td>';
                       tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>'

                        tbody += '<td>';
                        tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>'

                        tbody += '<td>';
                        tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>'

                        tbody += '<td>';
                        tbody += "QQQQQQQQQQQQQQQQQQQQQ";
                        tbody += '</td>'                             

                        tbody += '</tr>\n';

                        var tfooter = '</table>';
                        document.getElementById('myTable').innerHTML = theader + tbody + tfooter;

                        </script>

 <script type="text/javascript">

            $("#tableId tr td").live("click",function()
            {    
                console.log("??????????????????????????????");

                alert("Row Click");

            });

    </script>
    </div> 
```

我希望每次点击只显示一个时间警报。怎么做？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:49:54.850

使用 jquery 函数 .one()

```
$(#tableId tr td).one("click",function()
            {    
                console.log("??????????????????????????????");

                alert("Row Click") 
} 
```

[检查这个](http://api.jquery.com/one/)

这可能会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:47:30.130

试试这个

```
 $("#tableId tr td").click(function()
        {    
            console.log("??????????????????????????????");

            alert("Row Click");

        }); 
```

**编辑** [小提琴](http://fiddle.jshell.net/krmKL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:51:51.333

由于每次加载 page2.html 时都会绑定该事件处理程序，因此会出现此问题。我猜这个页面是用 Ajax 加载的？这意味着每次加载页面时都会添加事件处理程序，并且由于它是 Ajax，JavaScript 事件处理程序仍然存在。事件处理程序一直存在，直到您将它们自己删除以重新加载完整的页面。

最好的解决方案是只在基本页面（执行所有 ajax 加载的页面）中添加一次事件处理程序。

另一种解决方案是首先取消绑定旧的事件处理程序并添加新的事件处理程序。

```
$("#tableId tr td").unbind('click').live('click'..... 
```

更好的是使用 jQuery 的委托方法：

```
$("#tableId").die('click', 'tr td').live('click', 'tr td'..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T12:33:08.293

如果我`e.stopImmediatePropagation();`用作：

```
$("#tableId").die('click', 'tr td').live('click', 'tr td', function (){
            alert ("Click");
            e.stopImmediatePropagation();

            }); 
```

然后它给了我正确的结果，但是如果我使用 `e.stopPropagation(); 那么它是行不通的。

顺便说一句，谢谢你们`fredrik,Ashirvad Singh,Arjun T Raj` 的时间和回复。任何其他建议将不胜感激。谢谢。

# c++ - 我应该返回 const 对象吗？

> ID：12051012
> 
> 赞同：79
> 
> 时间：2012-08-21T08:36:00.267
> 
> 标签：c++

在`Effective C++`Item 03 中，尽可能使用 const。

```
class Bigint
{
  int _data[MAXLEN];
  //...
public:
  int& operator[](const int index) { return _data[index]; }
  const int operator[](const int index) const { return _data[index]; }
  //...
}; 
```

`const int operator[]`确实有所不同`int& operator[]`。

但是关于：

```
int foo() { } 
```

和

```
const int foo() { } 
```

好像他们是一样的。

我的问题是，为什么我们使用`const int operator[](const int index) const`而不是`int operator[](const int index) const`？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-08-21T08:50:42.853

非类类型的返回类型的顶级 cv 限定符被忽略。这意味着即使你写：

```
int const foo(); 
```

返回类型是`int`. 如果返回类型是引用，当然`const`就不再是顶层了，区别如下：

```
int& operator[]( int index ); 
```

和

```
int const& operator[]( int index ) const; 
```

很重要。（还要注意，在函数声明中，像上面一样，任何顶级 cv 限定符也被忽略。）

区别也与类类型的返回值有关：如果你 return `T const`，那么调用者不能在返回值上调用非常量函数，例如：

```
class Test
{
public:
    void f();
    void g() const;
};

Test ff();
Test const gg();

ff().f();             //  legal
ff().g();             //  legal
gg().f();             //  **illegal**
gg().g();             //  legal 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-08-21T08:50:18.463

您应该清楚地区分应用于返回值、参数和函数本身的 const 用法。

**返回值**

*   如果函数*按 value*返回，则 const 无关紧要，因为正在返回对象的副本。然而，它在涉及移动语义的 C++11 中很重要。
*   它对基本类型也无关紧要，因为它们总是被复制的。

考虑`const std::string SomeMethod() const`。它不允许使用该`(std::string&&)`函数，因为它需要非常量右值。换句话说，返回的字符串将始终被复制。

*   如果函数*通过引用*返回，`const`则保护返回的对象不被修改。

**参数**

*   如果*按值*传递参数，则 const 会阻止函数*中的函数*修改给定值。无论如何都无法修改参数的原始数据，因为您只有副本。
*   请注意，由于始终创建副本，因此 const 仅对*函数体*有意义，因此，仅在函数定义中检查它，而不是在声明（接口）中检查。
*   如果*通过引用*传递参数，则适用与返回值相同的规则

**函数本身**

*   如果函数`const`末尾有，则只能运行其他`const`函数，不能修改或允许修改类数据。因此，如果它通过引用返回，则返回的引用必须是 const。只能在对象上调用 const 函数或引用本身为 const 的对象。可变字段也可以更改。
*   编译器创建的行为将`this`引用更改为`T const*`. 函数 can always `const_cast` `this`，但当然不应该这样做并且被认为是不安全的。
*   只在类方法上使用这个说明符当然是明智的；最后带有 const 的全局函数会引发编译错误。

**结论**

如果您的方法不会也永远不会修改类变量，请将其标记为 const 并确保满足所需的所有条件。它将允许编写更清晰的代码，从而使其保持*const-correct*。然而，不加思索`const`地到处放置肯定不是要走的路。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-08-21T09:03:37.207

将限定条件添加到非引用/非指针右值几乎没有***价值***，将其添加到内置函数也***没有意义。***`const`

 *在***用户定义类型***的情况下，`const`限定将阻止调用者在返回的对象上***调用非`const`成员函数。***例如，给定

```
const std::string foo();
      std::string bar(); 
```

然后

```
foo().resize(42); 
```

将被禁止，而

```
bar().resize(4711); 
```

将被允许​​。

对于像这样的`int`内置函数，这根本没有意义，因为这样的右值无论如何都不能被修改。

（不过，我确实记得*Effective C++*讨论过创建引用的返回类型`operator=()`，`const`这是需要考虑的事情。）

* * *

***编辑：***

看来***斯科特确实给出了这个建议***。如果是这样，那么由于上述原因，***我发现即使对于 C++98 和 C++03 也是有问题的***。***对于 C++11，我认为它显然是错误***的，正如 Scott 本人似乎已经发现的那样。在[*Effective C++ 第 3 版*](http://www.aristeia.com/BookErrata/ec++3e-errata.html)[的勘误表中。](http://www.aristeia.com/BookErrata/ec++3e-errata.html)*，他写道（或引用其他抱怨的人）：*

 *> 文本暗示所有按值返回都应该是 const，但不难找到非常量按值返回是好的设计的情况，例如 std::vector 的返回类型，其中调用者将使用带有空向量的交换“抓取”返回值内容而不复制它们。

然后：

> 声明按值函数返回值 const 将防止它们被绑定到 C++0x 中的右值引用。因为右值引用旨在帮助提高 C++ 代码的效率，所以在指定函数签名时考虑 const 返回值的交互和右值引用的初始化非常重要。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-08-21T08:40:10.190

你可能会错过迈耶斯的建议。本质区别在于`const`方法的修饰符。

这是一个非常量方法（`const`最后没有注意），这意味着它可以修改类的状态。

```
int& operator[](const int index) 
```

这是一个 const 方法（`const`最后注意）

```
const int operator[](const int index) const 
```

参数和返回值的类型呢，和之间有细微的差别`int`，`const int`但与建议的点无关。您应该注意的是，非常量重载返回`int&`意味着您可以分配给它，例如`num[i]=0`，并且 const 重载返回不可修改的值（无论返回类型是`int`or `const int`）。

**在我个人看来，如果一个对象是按值**传递的，那么`const`修饰符是多余的。这种语法更短并且达到相同的效果

```
int& operator[](int index);
int operator[](int index) const; 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-08-21T08:44:00.077

将值返回为 const 的主要原因是您不能说类似`foo() = 5;`. 这实际上不是原始类型的问题，因为您不能分配给原始类型的右值，但这*是*用户定义类型的问题（例如`(a + b) = c;`，重载的`operator+`）。

我总是为这种相当脆弱的理由找到理由。您无法阻止打算编写笨拙代码的人，而这种特殊类型的强制在我看来并没有真正的好处。

对于 C++11，这个习惯用法实际上有很多*危害*：将值返回为 const 会阻止移动优化，因此应尽可能避免。基本上，我现在认为这是一种反模式。

这是[一篇](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)与 C++11 相关的文章。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-08-21T08:40:51.860

当那本书写成时，这个建议几乎没有用，但确实起到了防止用户写作的作用，例如，`foo() = 42;`并期望它改变一些持久的东西。

在 的情况下`operator[]`，如果您不提供`const`返回非引用的非重载，这可能会有些混乱，尽管您可以通过返回引用或代理对象而不是值来`const`防止这种混淆。`const`

这些天来，这是一个不好的建议，因为它会阻止您将结果绑定到（非`const`）右值引用。

（正如评论中所指出的，当返回一个原始类型时这个问题是没有实际意义的`int`，因为该语言阻止你分配一个`rvalue`这样的类型；我说的是更一般的情况，包括返回用户定义的类型。 )

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-21T08:42:03.997

对于原始类型（如`int`），结果的常量性无关紧要。对于类，它可能会改变行为。例如，您可能无法对函数的结果调用非常量方法：

```
class Bigint {
    const C foo() const { ... }
     ...
}

Bigint b;
b.foo().bar(); 
```

`bar()`如果不是 的 const 成员函数，则禁止上述内容`C`。一般来说，选择任何有意义的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-21T08:42:02.637

看那个：

```
const int operator[](const int index) const 
```

声明的`const`结尾。它描述了可以在常量上调用此方法。

另一方面，当你只写

```
int& operator[](const int index) 
```

它只能在非常量实例上调用，并且还提供：

```
big_int[0] = 10; 
```

句法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-21T08:42:07.260

您的重载之一是返回对数组中某个项目的**引用**，然后您可以对其进行更改。

```
int& operator[](const int index) { return _data[index]; } 
```

另一个重载是返回一个值供您使用。

```
const int operator[](const int index) const { return _data[index]; } 
```

由于您以相同的方式调用这些重载中的每一个，并且在使用时永远不会更改值。

```
int foo = myBigInt[1]; // Doesn't change values inside the object.
myBigInt[1] = 2; // Assigns a new value at index ` 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-21T08:42:20.330

在数组索引运算符 ( `operator[]`) 的示例中，它确实有所作为。

和

```
int& operator[](const int index) { /* ... */ } 
```

您可以使用索引直接更改数组中的条目，例如像这样使用它：

```
mybigint[3] = 5; 
```

第二个，`const int operator[](const int)`运算符仅用于获取值。

但是，作为函数的返回值，对于简单的类型，例如`int`，它并不重要。重要的是您是否返回更复杂的类型，比如 a `std::vector`，并且不希望函数的调用者修改向量。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-21T08:47:03.280

返回类型在`const`这里并不那么重要。`int`由于 int 临时对象不可修改，因此使用vs没有明显的区别`const int`。如果您使用可以修改的更复杂的对象，您会看到不同之处。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-08-21T09:01:25.220

围绕这两个版本的技术性有一些很好的答案。对于原始值，它没有任何区别。

**但是**，我一直认为`const`是为程序员而不是为编译器而存在。当你写的时候`const`，你明确地说“这不应该改变”。让我们面对现实吧，`const`无论如何通常都可以被规避，对吧？

当您返回 a`const`时，您是在告诉使用该函数的程序员该值不应更改。如果他正在改变它，他可能做错了什么，因为他/她不应该这样做。

编辑：我也认为“`const`尽可能使用”是个坏建议。你应该在有意义的地方使用它。**

# android - 如果选中复选框，则启动另一个活动

> ID：12051017
> 
> 赞同：4
> 
> 时间：2012-08-21T08:36:16.820
> 
> 标签：android, android-activity, checkbox, manifest

当我的应用程序启动时，会出现登录活动。它包含复选框“下次给我签名”。如果选中了复选框，我想在下次应用程序启动时启动另一个 Activity 并将用户的用户名和密码发送给它。

我该如何实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:46:11.520

您可能希望将用户名和复选框值保存在 SharedPreferences 中。之后，您可以在应用程序启动时检索它们。

例子：

```
//Saving the values
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putString("username",username);
editor.putString("password",password);
editor.putBoolean("isChecked", isCheckBoxChecked);
editor.commit();

//Retrieving the values
SharedPreferences sharedPreferences = getPreferences(MODE_PRIVATE);
if(sharedPreferences.getBoolean("isChecked"))
{
     //Do whatever you need to do if it's checked
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:41:27.307

用于`SharedPreferences`保存您的用户名和密码。当您的活动开始时，检查它们是否存储在`Shared Preferences`. 你可以在谷歌找到很多很好的例子`Shared Preferences`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:15:22.340

在您的登录活动中执行以下操作，

```
 pref = getSharedPreferences(PREFS_NAME, 0);
 intent = new Intent(context, LaunchingActivity.class);

 isChecked = pref.getBoolean("isChecked", false); 
 if(isChecked)
      startActivity(intent);

 btn.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        if(username.equalsIgnoreCase("") && password.equalsIgnoreCase("")) {
            username = userEdtTxt.getText().toString();
            password = pwdEdtTxt.getText().toString();
        }

        if(checkBox.isChecked()) {              
            editor = pref.edit();
            editor.putString("username", username);
            editor.putString("password", password);
            editor.putString("isChecked", true);
            editor.commit();
        }   
        startActivity(intent);      
    }

 }); 
```

然后在启动活动中执行此操作，

```
 SharedPreferences pref = getSharedPreferences(PREFS_NAME, 0);
 String username = pref.getString("username", "");
 String password = pref.getString("password", ""); 
```

# fpga - 时序约束

> ID：12051020
> 
> 赞同：6
> 
> 时间：2012-08-21T08:36:34.637
> 
> 标签：fpga

我正在设计一个用于与 USB 芯片通信的 ULPI 接口。
但是我遇到了一些关于时序约束的问题。

数据在时钟的上升沿输出，在下降沿采样。

我可以看到（使用 Post-Route）从时钟上升沿到数据输出有大约 6ns 的“最佳情况可实现延迟”是有效的。

如果我想要更小的延迟，我是否应该重写我的代码，例如延迟我的时钟，直到上升沿适合数据输出？

我知道上面的解决方案可能不好，因为它既依赖于 fpga 设备又依赖于路由......但是还有哪些其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:34:11.580

您的数据输出寄存器是否打包到 IO 寄存器中？UCF 中的约束是：`INST "some_ff" IOB = TRUE;` 或者，您可以使用 map 选项`-pr b`，它将输入和输出 ([b]oth) 打包到 io 寄存器中。

这有两个效果：

1.  锁定 IO 引脚和 FF 的第一个/最后一个 D/Q 引脚之间的时序（构建以构建一致性）
2.  最大限度地提高时钟输出性能（您不能让 Q 更靠近输出引脚）。

*编辑：*上述建议适用于 Xilinx 工具链。其他供应商可能具有类似的架构，但调用该选项所需的参数/控件不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T12:12:28.100

假设 Xilinx 器件：

使用 FPGA 编辑器检查触发器的位置。有时，如果它们是从非顶级块中推断出来的，则工具不会将它们打包到 IOB 中，即使 UCF 和选项设置为它们应该是的。

作为一种解决方法，在顶层添加额外的触发器层会有所帮助。或者您可以实例化一个 ODDR2 块来强制解决问题，并将两个数据输入连接到相同的内部信号。

# sql - 错误转换 varchar datetime

> ID：12051021
> 
> 赞同：2
> 
> 时间：2012-08-21T08:36:39.220
> 
> 标签：sql, sql-server, datetime, varchar

我有这个查询：

```
update table 
set initTime = '2012-08-20 09:30:00.000' 
WHERE id='0124' 
```

它说：

> *从 varchar 到 datetime 的转换生成了超出范围的值。*

你能帮我吗？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:38:28.910

为了安全起见，您应该对日期字符串使用与语言无关的日期格式：

```
UPDATE dbo.table 
SET initTime = '2012-08-20T09:30:00.000' 
WHERE id = '0124' 
```

看到不同？我`T`在日期和时间部分之间添加了一个。这使其成为有效的 ISO-8601 日期/时间字符串，无论您拥有何种 SQL Server 语言和区域设置，它都应该有效。

如果没有`T`中间的那个，它就不是一个正确的 ISO-8601 日期/时间字符串，并且根据 SQL Server 中的语言/区域/日期格式设置，它可能被解释为*2012 年第 20 个月的第 8 天，*当然，那第 20 个月的排序不存在..... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:03:08.160

或使用 YYYYMMDD HH:MM:SS 格式。您可以在这篇文章中找到有关明确格式的更多信息 [http://beyondrelational.com/modules/2/blogs/70/posts/10898/understanding-datetime-column-part-ii.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10898/understanding-datetime-column-part-ii.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:22:36.590

将其转换为日期时间，然后将其输入表中。

```
update table 
set initTime = CONVERT(DateTime, '2012-08-20 09:30:00.000')
WHERE id='0124' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:06:59.593

尝试在您的陈述之前使用[此命令。](http://msdn.microsoft.com/en-us/library/ms189491.aspx)我认为您的语言设置中有另一个 DAY/MONTH 订单：

```
SET DATEFORMAT ymd; 
```

# c# - 以编程方式从 SQL Reporting Services 访问隐藏字段

> ID：12051022
> 
> 赞同：0
> 
> 时间：2012-08-21T08:36:41.160
> 
> 标签：c#, reporting-services

我有一个表，其中包含对其他表的引用，该表按顺序包含一个带有 PDF 文件二进制数据的字段。此表用于 SSRS (SQL Reporting Services) 报告。包含二进制字段的表不包含在报告中（以避免性能问题）。用户也不应该在报告中看到任何表格的 Id 字段。

这是一个简化的结构：

```
Table A
------------
AId (should not be visible in the report)
SomeField

Table B  (not included in the report)
------------
BId 
FK_AId
BinaryPdfData 
```

我需要开发一个 C# 应用程序，它使用 Render 函数从 SSRS 导出数据并将导出的文件放在某个文件夹中。

我需要以某种方式获取所有 AId 字段（在呈现的报告中不可见）并从数据库中收集所有相关的 PDF 字母。

**如何将 AId 字段添加到 SSRS 报告中，使该字段在报告中不可见但可从 C# 代码访问，以便我可以使用 AId 字段收集所有相关的 PDF 信件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T20:02:33.387

您可以将您的辅助字段添加为查询参数，并通过您的 C# 代码访问该参数。

# jquery - 横幅滑块脚本在 Safari、Chrome 中无法正常工作

> ID：12051023
> 
> 赞同：0
> 
> 时间：2012-08-21T08:36:42.840
> 
> 标签：jquery, asp.net, html, css, slider

[链接][1] 下方有一个横幅（赞助商徽标）滑块脚本，它在 IE 8、9 和 Firefox 中运行良好。但是将包装盒的大小减小到非常小的部分，这使得横幅在所有浏览器中几乎不可见（在我按下 Ctrl + F5 之后）。

如果是 Safari 和 chrome，它有时会在访问链接时显示横幅或使横幅包装盒非常小。

我试图玩弄并给出固定的大小，但它一直在覆盖默认的高度和宽度。

我会很感激这方面的帮助

Safari，它有时在 safari 中工作，有时它的行为类似于 Chrome 浏览器。我尝试使用 jQuery 提供固定尺寸来动态提供尺寸，但问题不断出现。

使用 carouFredSel 时使用以下脚本解决了问题，我使用 carouFredSel 机器人生成现在可以正常工作的脚本。

```
$("#SponsorSlider").carouFredSel({
    width: 610,
    height: 152,
    align: "left",
    padding: 0,
    items: {
        visible: 4,
        minimum: 4,
        width: "variable",
        height: "variable"
    },
    scroll: {
        fx: "fade",
        duration: 1000
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:50:24.763

滑块必须有某种配置才能设置好的尺寸。如果您将链接指向您使用的滑块，那会更容易。

但是，如果你没有找到它，你可以使用 !important CSS hack：[http ://css-tricks.com/override-inline-styles-with-css/](http://css-tricks.com/override-inline-styles-with-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:44:15.270

使用 carouFredSel 时使用以下脚本解决了问题，我使用 carouFredSel 机器人生成现在可以正常工作的脚本。

```
$("#SponsorSlider").carouFredSel({
    width: 610,
    height: 152,
    align: "left",
    padding: 0,
    items: {
        visible: 4,
        minimum: 4,
        width: "variable",
        height: "variable"
    },
    scroll: {
        fx: "fade",
        duration: 1000
    }
}); 
```

# windows - 硬件 ID 和驱动程序 inf 文件的类

> ID：12051025
> 
> 赞同：1
> 
> 时间：2012-08-21T08:36:49.907
> 
> 标签：windows, driver

我有一台 Honeywell Voyager MS 9540 激光扫描仪。
我想使用 Microsoft (Windows xp) 的 winusb 将 ascii 代码发送到扫描仪设备。
winusb驱动安装需要一个inf文件。
关于这个 inf 文件，我有 2 个问题：

关于硬件 id (hw-id) 的第一个问题。
该文档说明了 INF 模型部分：

```
device-description=install-section-name[,hw-id][,compatible-id...] 
```

在示例 inf 文件中，这一行是：

```
%DeviceName% =USB_Install, USB\VID_0547&PID_1002 
```

这里，逗号后面的字符串是硬件 id。
我查看了激光扫描仪手册，但没有在其中找到任何硬件 ID。
是否所有激光扫描仪都具有相同的硬件 ID，或者这是供应商特定的 ID？
我打开设备管理器，选择一个 USB 条目并查看详细信息部分。有一个硬件 ids 部分的字符串类似于示例 (USB\Vid_0bda&Pid_0111&Rev_110=)。但是我怎么知道哪个 USB 入口是我的 USB 激光扫描仪呢？

第二个问题：
霍尼韦尔激光扫描仪扫描条码。当您打开记事本时，它将条形码的数字作为文本打印到记事本中，就好像它是用键盘输入的一样。
在 INF 文件的版本部分中，您必须定义一个类和一个 classguid。
我应该为此 USB 激光扫描仪选择“Class = USB”还是“Class = HIDClass”（人机接口设备，因为它也是一个隐藏设备）？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:15:41.690

您可以在设备管理器中找到硬件 ID。当您打开设备的属性窗口时，名为 details 的第三个选项卡包含一个选择器，它向您显示分配给设备本身的硬件 ID。

inf 文件中的类字段包含设备安装所在的类别。我不知道，这是否会改变驱动程序本身的行为。

# jquery - jQuery 基本附加

> ID：12051033
> 
> 赞同：0
> 
> 时间：2012-08-21T08:37:07.180
> 
> 标签：jquery, append

我使用了 jQuerys `$("...").append()`，发现它比我想象的要先进。例如，以下示例

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script>
jQuery(function($) {
    $("body").append("<div>");
});
</script>
</head>
<body>
</body>
</html> 
```

输出

```
<body>
    <div></div>
</body> 
```

. 如您所见，jQuery 自己添加了结束标记。就我而言，我只想附加开始标签，因为我想填充这个元素 peu à peu。
例如

```
jQuery(function($) {
    $("body").append("<div>");
    if(...){
        $("body").append("true");
    }else{
        $("body").append("false");
    }        
}); 
```

输出

```
<body>
    <div></div>
    true
</body> 
```

代替

```
<body>
    <div>true
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:38:56.897

追加到正文后如何追加到 div ？

```
jQuery(function($) {
    $("body").append("<div>");
    if(...){
        $("body div").append("true");
    }else{
        $("body div").append("false");
    }        
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:42:46.580

您不能只附加一个开始标签，因为它不会转换为实际的 DOM 元素。这只是 DOM 元素的一部分，不能转换为 DOM 元素。

如果您要创建的是这样的：

```
<body>
    <div>true
</body> 
```

那不是有效的 HTML。它必须是有效的：

```
<body>
    <div>true</div>
</body> 
```

你可以像这样解决你的问题：

```
jQuery(function($) {
    var myDiv = $("<div>");    // create DOM element
    if(...){
        myDiv.html("true");    // set contents of DOM element
    }else{
        myDiv.html("false");
    }        
    $(document.body).append(myDiv);   // append DOM element to the page
}); 
```

工作示例：http: [//jsfiddle.net/jfriend00/eSncS/](http://jsfiddle.net/jfriend00/eSncS/)

# c# - 从 Excel 工作表中删除空白行

> ID：12051035
> 
> 赞同：0
> 
> 时间：2012-08-21T08:37:13.983
> 
> 标签：c#, excel, worksheet

我已经进行了一些搜索，但似乎找不到一种快速的方法来摆脱工作表中的所有空白行。我不希望它占用太多时间。有没有这样的方法？

我尝试了一些不太出色的方法，包括过滤所有列中的空白，然后删除屏幕上的内容。也许我在这里缺少excel中的一个功能？

我正在寻找类似`UsedRange.RemoveDuplicates()`功能在一两秒内完成大量工作的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:34:06.680

这是删除活动工作表上所有空白行的两种方法...

**1个VBA**。这种方式应该比遍历行要快得多：

```
cells.RowDifferences(cells(rows.Count,columns.Count)).rows.Hidden=true
cells.SpecialCells(xlCellTypeVisible).EntireRow.Delete
cells.Rows.Hidden=false 
```

**2 键盘**。这种方式只是撤消列表中的三个步骤，因此可以轻松撤消/回溯。

![在此处输入图像描述](../Images/89b8a1f32ae4be157c51ead4ca7f8745.png)

*步骤 1\. 选择数据单元格。* 单击左角标题以选择所有单元格，然后按`Shift+Tab` `Ctrl+\`

*步骤 2\. 隐藏和删除剩余的行。* 按`Ctrl + 9` `Ctrl + A` `Alt+;` `Ctrl + -`

*第 3 步。取消隐藏选定的行并选择第一个单元格。*按：`Ctrl + Shift + 9` `Ctrl + Home`

**前**

![在此处输入图像描述](../Images/ce13b497f64cc73953687356edf181bb.png)

**后**

![在此处输入图像描述](../Images/528acc8f7aee86dad434b0ac98f2b79f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:02:36.173

如果您需要让您的函数在 excel 中快速运行，您应该设置全局 Excel 应用程序变量，例如“Visible = false”、“ScreenUpdating = false”。过滤空白并删除它们应该是最快的方法，尽管我会手动制作要删除的行列表，然后在一次调用中删除它们

```
RowsToDelete = "2:2;4:4;8:8";
Range = Sheet.Range()
Range.Delete() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:44:49.203

对于非常大的数据集（100k+ 行），我总是发现按空格排序然后删除比过滤和删除大量分隔行要快得多**。**如果空白行分布在整个文件中，它可以快 5 到 10 倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-28T17:58:27.023

遍历每一行需要很长时间，但这只是因为 FOR 循环开销。主要操作 WorksheetFunction.CountA 和 Range.EntireRow.Delete 确实不需要很长时间。

我发现的最佳解决方案是从 100K 行的块开始并删除所有没有值的行，然后以 10 的幂向下移动，直到您处于单行级别。

无论您是尝试删除数据周围的多余空格还是偶尔删除主要数据范围内的单行，这都很快。

```
Public Sub removeblankrows()
Dim ws As Worksheet: Set ws = ActiveSheet

With WorksheetFunction
    Dim pow As Long

    For pow = 6 To 0 Step -1

        Dim chunkSize As Long: chunkSize = 10 ^ pow

        Dim chunks As Long: chunks = (ws.UsedRange.Rows.Count \ chunkSize) + 1

        Dim c As Long
        For c = chunks To 1 Step -1
            Dim last As Long, first As Long

            last = .Min(c * chunkSize, ws.Rows.Count)
            first = .Max(1, (c - 1) * chunkSize)

            Dim c1 As Range, c2 As Range, rng As Range
            Set c1 = ws.Cells(first, 1)
            Set c2 = ws.Cells(last, ws.UsedRange.Columns.Count)

            Set rng = ws.Range(c1, c2)

            If .CountA(rng) = 0 Then rng.EntireRow.Delete

        Next c

    Next pow
End With 
```

结束子

# javascript - 从脚本触发所有页面生命周期事件

> ID：12051037
> 
> 赞同：5
> 
> 时间：2012-08-21T08:37:19.393
> 
> 标签：javascript, jquery

我有一个页面的 html 存储在一个字符串中。我想用我的字符串中的html替换显示页面的整个html，然后触发document.ready、window.load等所有页面生命周期事件。

我虽然关于使用文件系统 API - 将 html 写入文件系统，然后重定向到它。不过，不确定它是否可行，而且绝对是矫枉过正。
有没有更简单、更干净的方法来获得相同的结果？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:40:51.563

关于什么

```
$('html').html(new_html_body); 
```

# c - C: 结构是作为指针实现的吗？

> ID：12051038
> 
> 赞同：1
> 
> 时间：2012-08-21T08:37:23.670
> 
> 标签：c, arrays, pointers, struct

好的，我在这里搜索了其他名称相似的问题，但没有骰子。

我的问题：假设我们有一个结构和一个所述结构的数组：

```
typedef struct derp {
    int herp;
    double schlerp;
} struct_t;
struct_t* dynamic_array = (struct_t*)calloc(my_array_size, sizeof(struct_t)); 
```

结构是作为指针实现的吗？意思是，以下行为如何？

```
struct_t me;
me = dynamic_array[complicated calculation best not repeated];
me.herp += 2; //pretend it's properly initialized
me.schlerp *= 2; //ditto 
```

该数组中的条目会显示结构成员的更改吗？即是`me`数组结构成员的深层副本，还是仅仅是指向数组所指向的相同成员的某种“指针”？

如果这个问题没有多大意义，我深表歉意，我试图用多种方式来表达它，以尽量减少误解。（希望这不会适得其反：P）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:43:28.867

`me`是数组中数据的*浅*拷贝。更改成员`me`不会改变数组中的内容。如果结构包含一个指针（`char *`例如 a ），那么它所指向的内容不会被复制，只是指针值，因此修改引用的指针也会影响数组条目的解除引用值（这有意义吗？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:40:50.283

它们不是作为指针实现的。

当您 `[]`在指针上使用下标运算符时，它被解释为请求该位置的元素。因此编译器能够简单地确定偏移量，因为结构的大小是已知的/恒定的。

```
// creates a new struct on the stack:
struct_t me;
// copies from dynamic_array[idx] to me
me = dynamic_array[idx]; 
```

> 该数组中的条目会显示结构成员的更改吗？

不 -`me`是副本。

> 即 me 是数组结构成员的深层副本，还是仅仅是指向数组所指向的相同成员的某种“指针”？

如果你想改变原来的，你可以重新分配结构：

```
dynamic_array[idx] = me; 
```

或者只是使用指向要变异的结构的指针：

```
struct_t* const me = &dynamic_array[idx];
me->herp += 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T11:12:18.423

结构是编译器用来确定从结构开始的内存区域的开头到结构的各个成员的偏移量的描述或模板。

如果您使用结构创建单个非数组变量，编译器将为该变量分配内存。内存的大小将取决于结构的大小，而结构的大小又取决于结构成员的类型。

使用结构定义的数组是单个结构成员的数组。当您访问数组元素时，编译器会根据所使用的数组索引和结构的大小来计算内存偏移量。

结构的行为类似于 int 等内置类型。您可以声明一个 int 或一个结构，一个 int 或一个结构的数组，或者一个指向一个 int 或一个结构的指针。

int 和 struct 之间的主要区别在于 int 是内置类型，其中 struct 由程序员创建并描述为新类型。

然而，我发现将所有数据类型（内置或由程序员指定）视为内存区域的模板是最有帮助的，编译器使用它来跟上内存区域的地址，类型内存区域，内存区域的大小，内存区域允许哪些动作。

重要的一点是，当您在 C 中进行赋值时，将其视为一个内存区域到另一个内存区域的副本，除了使用`memcpy()`函数执行相同的内存复制之外没有任何智能。因此，当一个包含指针的结构变量分配给另一个结构变量时，两个结构变量将具有相同的指针，指向相同的内存区域。

然而，struc 和内置类型之间的赋值、指针计算和其他行为的基础非常相似。

```
typedef struct {
   int iValue;
   int jValue;
} MyStruct;

{
   int   iLoneInt, jLoneInt;
   int  *piLoneInt;
   MyStruct  aStruct, bStruct;
   MyStruct  *paStruct;

   // simple assignment
   iLoneInt = 1;
   aStruct.iValue = 1;    // specify the struct member

   // assignment of one variable to another
   bStruct = aStruct;    // copies the value in memory region aStruct to bStruct
   jLoneInt = iLoneInt;  // copies the value in memory region iLoneInt to jLoneInt
   memcpy (&bStruct, &aStruct, sizeof(MyStruct));  // same as assignment
   memcpy (&jLoneInt, &iLoneInt, sizeof(int));  // same as assignment

   piLoneInt = &iLoneInt;   // gets address of memory region iLoneInt
   paStruct = &aStruct;     // gets address of memory region aStruct

   jLoneInt = *piLoneInt;   // copies value in memory region pointed to by piLineInt to jLoneInt
   bStruct = *paStruct;    // copies value in memory region pointed to by paStruct to bStruct
   memcpy (&bStruct, paStruct, sizeof(MyStruct));  // same as assignment 
```

# iphone - iOS - 在 UIScrollView 上缩放 UIImageView

> ID：12051039
> 
> 赞同：1
> 
> 时间：2012-08-21T08:37:25.867
> 
> 标签：iphone, ios, uiimageview, gallery, zooming

我正在制作一个图片库，在 UIScrollViews 内有大量 UIImageView，在主 UIScrollView 内。图库允许水平更改图片，并对每张图片进行缩放。

它一般工作正常，但缩放动画效果并不好。

当图像很小并且没有填满整个屏幕时，就会出现问题。当您放大图像，但直到填满整个画廊时，图像会发生一点位移，我用下一个代码进行更正，使其位于 ScrollView 的中心。

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale{

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    aImg.frame = [self centeredFrameForScrollView:myScrollView andUIView:aImg];
    [UIView commitAnimations];
} 
```

最终图像在正确的位置，但似乎有点奇怪。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:08:33.633

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
return imageView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:11:42.537

**示例代码：**

```
- (void)handleTwoFingerTap:(UIGestureRecognizer *)gestureRecognizer
{
    // two-finger tap zooms out
    float newScale = [scrlView zoomScale] / ZOOM_STEP;
    CGRect zoomRect = [self zoomRectForScale:newScale withCenter:[gestureRecognizer locationInView:gestureRecognizer.view]];
    [scrlView zoomToRect:zoomRect animated:YES];
}

- (CGRect)zoomRectForScale:(float)scale withCenter:(CGPoint)center
{
    CGRect zoomRect;
    // the zoom rect is in the content view's coordinates.
    //    At a zoom scale of 1.0, it would be the size of the imageScrollView's bounds.
    //    As the zoom scale decreases, so more content is visible, the size of the rect grows.
    zoomRect.size.height = [scrlView frame].size.height / scale;
    zoomRect.size.width  = [scrlView frame].size.width  / scale;
    // choose an origin so as to get the right center.
    zoomRect.origin.x    = scrlView.center.x - (zoomRect.size.width  / 2.0);
    zoomRect.origin.y    = scrlView.center.y - (zoomRect.size.height / 2.0);
    return zoomRect;
} 
```

# html - 移动设备视口大小和设备显示规格不对应

> ID：12051040
> 
> 赞同：1
> 
> 时间：2012-08-21T08:37:33.497
> 
> 标签：html, css, mobile

我有点困惑......我正在测量我网站的视口尺寸，以便我可以针对响应式网页设计对其进行优化。现在 iPhone 4 的显示规格是：**640x960**，而 HTC 欲望（Bravo）的显示规格是**480x800**。现在，在这些设备上查看视口大小时，这里是由以下函数给出的渲染视口尺寸（我对宽度感兴趣......）：

```
$(window).resize(function(){
            $('#viewport').empty().append($(window).width(), 'x', $(window).height())
        }).resize(); 
```

纵向（手机正常位置）：iPhone 视口**宽度**：**320px；** HTC 视口**宽度**：**320px；**

横向（当设备侧向旋转时）：iPhone 视口**宽度**：**480px；** HTC 视口**宽度**：**533px；**

现在这有点令人困惑。为什么不符合设备的技术显示规格？此外，在[这篇文章中](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)，（顺便说一句，这是一篇很好的文章）说，为智能手机的横向和纵向尺寸设计，**最小 320 像素和最大 480 像素**应该足以满足所有（大多数）智能手机的需求，但在这里，iPhone 4 属于该类别，但不是 HTC ……横向宽度为 533 像素……？所以在 HTC 上，我的网站从纵向旋转到横向时看起来很糟糕......

任何解释/帮助？

谢谢

# java - 使用线程

> ID：12051041
> 
> 赞同：0
> 
> 时间：2012-08-21T08:37:35.853
> 
> 标签：java, android, multithreading, callable

我有以下任务：

1.  从网上下载图片
2.  使用它创建另一个图像
3.  将图像保存到 SD 卡并显示

我需要在另一个线程中完成每一步。看来，当我完成加载图像时，我需要将其转移到第二个线程中。

经过一番谷歌搜索后，我意识到我需要为每个线程实现 Callable 接口，然后将其与 ExecutorService 一起使用。问题是我不明白如何传递数据，例如，从第一个线程到第二个线程。

任何人都可以举一个简单的例子吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T08:39:44.357

使用[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)和[Producer-Consumer 模式](http://dhruba.name/2011/05/21/the-producer-consumer-pattern-in-java/)。

在这种方法中，第一个线程将下载您的图像并将它们放入队列中。第二个线程将等待，直到队列中出现某些内容，转换图像并将其放入另一个队列中，第三个线程将等待。

阅读我链接到的文章以获得更多解释和生产者-消费者模式的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:28:49.983

您可以使用 java.util.concurrent.Exchanger。这是两个线程可以交换对象的同步点。有关更多详细信息，请参阅[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Exchanger.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Exchanger.html)

# android - jQuery UI 可排序和可拖动不适用于 iPad、iPhone 或 Android

> ID：12051045
> 
> 赞同：3
> 
> 时间：2012-08-21T08:38:03.827
> 
> 标签：android, ipad, jquery-ui, jquery-ui-sortable

浏览器 没有问题，但是当我在 iPad、iPod、iPhone 和 Android 等手持设备上测试它时，它就不起作用了。我根本无法拖动框或对订单进行排序。

有谁知道我怎样才能让它在所有平台上工作？

我有一个演示： -http: [//jsfiddle.net/uJcB7/184/](http://jsfiddle.net/uJcB7/184/)

希望大家帮忙，加油

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T00:16:42.550

[Touch Punch](http://touchpunch.furf.com/)也将解决这个问题，以及大多数其他关于触摸设备的 jQuery UI 问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T16:28:37.253

问题是 jQuery Sortable 已将拖动附加到鼠标事件上，这些事件可能不会在触摸设备上触发。作为一种解决方法，您可以使用（或调整）[http://code.google.com/p/rsslounge/source/browse/trunk/public/javascript/addtouch.js?r=115](http://code.google.com/p/rsslounge/source/browse/trunk/public/javascript/addtouch.js?r=115)上的代码基本上，它映射触摸事件，例如 touchstart、touchmove 和 touchend 到 mousedown、mousemove 和 mouseup。这是使用它的 jsfiddle 的快速更新[http://jsfiddle.net/uJcB7/218/](http://jsfiddle.net/uJcB7/218/)

# vb.net - 提高绘图时间 - VB.net

> ID：12051046
> 
> 赞同：1
> 
> 时间：2012-08-21T08:38:09.147
> 
> 标签：vb.net, directx, gdi+, slimdx

我目前正在开展一个项目，以显示 Gerber 文件的 2d 图形表示。该函数从列表中绘制每个元素，在我当前的测试文件中可能有大约 50,000 个形状。

我在系统绘图命名空间中使用绘图函数的初始方法，我认为它使用 GDI+，并渲染到屏幕外位图，但被证明太慢，特别是在每次用户放大或移动图像时都必须重新绘制位图时。

然后我希望在 slim dx 库中使用直接 2d，但这实际上速度较慢，这似乎不正确（任何人都可以对此提供任何见解吗？？？我制作了一个测试文件，在随机位置绘制 1000000 个椭圆形状进行测试，并且可以/如果我有时间可以上传）

我只是在寻找下一步的想法。我想知道是否应该考虑使用direct3d11 而不是direct2d。有人推荐XNA，但我想更多的是游戏设计。

任何想法都将受到欢迎...

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:51:28.433

您应该做的第一件事是仅绘制可见对象。不要尝试绘制屏幕之外的任何内容。这将限制需要绘制的形状数量。

如果形状列表不经常更改，您可以在位图中绘制它们，然后仅缩放/缩放/平移位图。这样，您就不需要每次都绘制形状。

另一种技术是通过使用双缓冲使用户体验更流畅，而不是真正更快。[http://msdn.microsoft.com/en-us/library/b367a457.aspx](http://msdn.microsoft.com/en-us/library/b367a457.aspx)

GDI+ 应该足够快。

# java - 原始变量和引用变量的内存分配

> ID：12051047
> 
> 赞同：1
> 
> 时间：2012-08-21T08:38:18.033
> 
> 标签：java

`type name;`

**对于引用类型，这会通知编译器您将使用 name 来引用类型为 type 的数据。对于原始变量，此声明还为变量保留了适当的内存量。**

以上是我从 oracle docs java 教程中读到的确切内容。

我的问题是，什么时候进行内存分配。在编译时或运行时？原始变量和参考变量是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:40:53.960

运行。

由于*Java*由 a 执行，因此在**编译时***分配内存*`VM`没有意义。

 ***像函数*参数*或*函数内的*变量一样的“*局部变量*”仅在堆栈上“*分配*”（原始值或引用）。对象*总是*在**堆上**创建的。

 *******但是：关于***内存管理*的一切（分配、释放、垃圾收集）都`JVM`依赖于实现，并且*只*在**运行时**发生（当然除了*原始*常量和*字符串常量*）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:39:45.740

内存分配发生在运行时，引用类型和原语都需要存储分配。更准确地说，我不明白它是什么意思`memory allocation in compile time`（对于`java`）。********

# sql - 分组查询和前n条记录SQL

> ID：12051051
> 
> 赞同：0
> 
> 时间：2012-08-21T08:38:31.050
> 
> 标签：sql, database

如果我有一个以列`pid, sid`作为主键的表，`price`并且`color`.

如何创建一个 SQL 查询，该查询可以获取每个`pid`（产品 ID）`color`等于的最便宜的价格`green`？

例如我有行：

```
(1, 1, 10, "green")
(1, 2, 8, "green")
(1, 3, 11, "green")
(2, 1, 7, "green")
(2, 2, 15, "green")
(2, 3, 22, "green")
(3, 1, 10, "red")
(1, 2, 8, "red")
(1, 3, 11, "red") 
```

然后我会收到 :`(1, 2, 8)->pid=1`和`(2, 1, 7)->pid=2`. 不`pid=3`，因为它的颜色是红色的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:41:11.110

```
SELECT pid, min(Price)
from table
Where Color='green'
group by pid 
```

或者，如果您想要整行（并且您的 sql 平台支持排名）...

```
select * 
from
(
 select *, ROW_NUMBER() over (partition by pid order by price) rn
 from #t
 where color='green'
) v
where rn=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:54:07.340

试试这个，

```
SELECT  a.*
FROM    tableName a
            INNER JOIN
            (
                SELECT pid, min(price) minPrice
                FROM    tableName b
            ) c ON a.pid = c.pid AND
                    a.price = c.minprice
WHERE   a.color = 'green' 
```

# r - 如何在表格行中选择大于 x 的值

> ID：12051052
> 
> 赞同：3
> 
> 时间：2012-08-21T08:38:38.567
> 
> 标签：r

我是 R 新手，我正在努力学习这门语言。我一直在研究 Bioconductor 的 multtest 包中包含的 Golub (1999) 数据。

以 Golub 数据为例，我试图在“ALL”患者（由第 1 到 27 列表示；“AML”患者表示第 28 至 38 栏）。这就是我所做的：

```
library(multtest); data(golub)
gol.fac <- factor(golub.cl,levels=0:1, labels= c("ALL","AML"))
x <- golub[1042, gol.fac=="ALL"] > 2.4
golub [1042, x] 
```

我得到的结果是：

```
[1] 2.44562 2.76610 2.59385 1.12058 
```

为什么得到值“1.12058”？我发现“1.12058”是第 1042 行中属于 AML 患者的最后一个（第 38 列）表达式值。

有人可以告诉我做我想做的事情的正确方法吗？并解释为什么我得到 AML 患者的价值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T09:06:15.767

@seancarmody 给了你一个完美的答案，但我发现他使用的范式不太可读（这纯粹是主观的）。这是我试图展示一种稍微不同的方式。

```
golub[1042, which(golub[1042, gol.fac == "ALL"] > 2.4)] 
```

从内到外阅读，我们有：

*   选择第 1042 行和列`gol.fac == "ALL"`
*   查找大于 2.4（`which()`部分）的值的位置
*   Subset`golub`的第 1042 行并取出值大于 2.4 的列（最外层`[]`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T08:52:35.613

您的向量`x`将是一系列`TRUE`和`FALSE`值，指示`golub[1042, gol.fac=="ALL"]`值大于 2.4 的位置，但随后您使用它来索引`x <- golub[1042, ]`（即跨越两个因素，而不仅仅是`AML`.

尝试这个：

```
golub[1042, gol.fac=="ALL"][x] 
```

# sql - SQL：外键是另一个外键的孩子

> ID：12051053
> 
> 赞同：1
> 
> 时间：2012-08-21T08:38:40.217
> 
> 标签：sql, foreign-keys

我想问一下我遇到的一个特定问题。

例如，我有一个`Student`具有 a`SchoolID`和 a的表，它们分别是 the和表`ClassID`的外键。该表有一列是该表的外键。`School``Classroom``Class``SchoolID``School`

有什么办法可以确保表格中`ClassID`的`Student`是 的孩子`SchoolID`，还是我必须删除`SchoolID`并与 一起生活`ClassID`以防止任何可能的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:46:34.187

`Student.SchoolId`是的，从技术上讲，如果 Class 已经有，您应该删除外键，因为这已经定义了and`SchoolId`之间的关系。`Student``School`

也就是说，有一些常见的“例外”，例如：

1.  如果和之间的关系可能意味着`Student`与和`School`之间的关系不同的东西`Class`（`School`例如，如果学生作为“他/她的主要学校”去学校 X，但随后还在学校 Z 上额外的壁画 Y 班）。（实际上，这可能会突出一个建模错误，即 Student : Class 实际上可能是多对多关系）

2.  出于性能原因，有时（有点不情愿）选择将父级的外键添加到子级以避免需要重新加入父级。但正如您所说，这可能会导致完整性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:49:59.450

是的，您可以通过在表的外键引用中有多个列来强制执行它`Classes`：

```
create table Schools (
    SchoolID int not null primary key,
    Name varchar(30) not null unique
)
go
create table Classes (
    ClassID int not null primary key,
    SchoolID int not null foreign key references Schools (SchoolID),
    Name varchar(30) not null,
    constraint UQ_Class_Schools UNIQUE (ClassID,SchoolID),
    constraint UQ_Class_Names UNIQUE (SchoolID,Name)
)
go
create table Students (
    StudentID int not null primary key,
    SchoolID int not null foreign key references Schools (SchoolID),
    ClassID int not null,
    Name varchar(95) not null,
    constraint FK_Student_Classes FOREIGN KEY (ClassID,SchoolID) references Classes (ClassID,SchoolID)
) 
```

根据口味，您可能还决定在两个表中的列上也声明一个*外键。*`ClassID`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:46:44.757

Student 表应该引用 Class。

```
create table Student (
  ...
  SchoolID integer not null,
  ClassID integer not null,
  foreign key (SchoolID, ClassID) references Class (SchoolID, ClassID),
  ...
); 
```

反过来，Class 表应该引用 School。

# java - Java/JSoup 明文提取与存储

> ID：12051060
> 
> 赞同：0
> 
> 时间：2012-08-21T08:39:03.123
> 
> 标签：java, html, regex, string, jsoup

我正在尝试解决以下问题。

假设我有一个 HTML 文件，内容如下：

* * *

```
</div class = nameCouldBeAnything1><br>
    <p>some text here</p><br>
</div>

<div class = nameCouldBeAnything2><br>
    <p>some more text here</p><br>
</div>

<div class = nameCouldBeAnything3><br>
    <p>even more text here</p><br>
<p>and here</p><br>
<p>and here</p><br>
<p>and here</p><br>
<p>and here</p><br>
</div> 
```

* * *

我想要实现的是将**div**标签之间的内容存储到单独的字符串或字符串数​​组变量中。

如果有 Jsoup 解决方案，那就太好了，如果没有，那么从 p 开始并以 /p 结尾的正则表达式字符串匹配也很好。

**需要考虑的挑战是：**

1）您不能使用特定的div类名来精确定位p标签的位置，以便使用Jsoup获取明文。

2）使用`doc.select("body p")`或`doc.select("div p")`来自 Jsoup 的作品，但是当您想将 p 标签存储到字符串变量中时，它们将单独写入变量而不是通过**div**写入变量。

这是我到目前为止所拥有的：

```
htmlFile = Jsoup.parse(input, "UTF-8");
Elements body = htmlFile.select("body p");
Element bodyStart = body.first();
Element bodyEnd = body.last(); 
Element p = bodyStart;
int divCount = 0; 

while(p != bodyEnd)
{
    p = body.get(divCount);
    System.out.println(p.text());        
    divCount++;
} 
```

这将获得每个单独的 p 标签，但是我希望 p 标签保留在它们各自的 div 中，并将每个单独的 div 存储到字符串/字符串数组变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:23:42.017

您需要遍历文档`body->div->p`而不是`body->p`.

```
Elements divs = htmlFile.select("body div");
//initialize div map here
for(Element div : divs) {
    Elements paras = div.getElementsByTag("p");
    for(Element para : paras) {
       String text = para.text();
    }
} 
```

您可以在遍历时根据您的要求将其存储为任何数据结构。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:46:45.033

这会将包含 p-tag 的 div-tags 放入字符串列表中。

```
public class Main {
  public static void main(String[] args) throws IOException {
    File html = new File("src/main/resources/markup.html");
    Document doc = Jsoup.parse(html, "UTF-8");
    //all div tags wrapping a p tag
    Elements divs = doc.select("div:has(p)");
    //put the divs into a list
    List<String> list = new ArrayList<String>();
    for (Element div : divs) {
      list.add(div.toString());
      System.out.println(div + "\n");
    }
  }
} 
```

* * *

**标记.html**

```
<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <title>whatever</title>
</head>

<body>
  <div class=nameCouldBeAnything0>
    <p>some text here</p>
  </div>

  <div class=nameCouldBeAnything1></div>

  <div class=nameCouldBeAnything2>
    <p>some more text here</p>
  </div>

  <div class=nameCouldBeAnything3>
    <p>even more text here</p>
    <p>and here</p>
    <p>and here</p>
    <p>and here</p>
    <p>and here</p>
  </div>

  <div class=nameCouldBeAnything4>
    <span>even more text here</span>
  </div>
</body>
</html> 
```

* * *

**输出**

```
<div class="nameCouldBeAnything0"> 
  <p>some text here</p> 
</div>

<div class="nameCouldBeAnything2"> 
  <p>some more text here</p> 
</div>

<div class="nameCouldBeAnything3"> 
  <p>even more text here</p> 
  <p>and here</p> 
  <p>and here</p> 
  <p>and here</p> 
  <p>and here</p> 
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:51:20.500

我能够解决我的困境。

这是我使用的代码，希望它可以帮助有需要的人。

感谢所有发帖的人。

```
public static ArrayList proc(Document htmlFile)
{
    Elements body = htmlFile.select("body");
    ArrayList HTMLPlainText = new ArrayList();

    HTMLPlainText.add(htmlFile.title());

    for(Iterator<Element> it = body.iterator(); it.hasNext();)
    {
        Element pBody = it.next();
        Elements. pTag = pBody.getElementsByTag("p");parents();

            for(int pTagCount = 0; pTagCount < pTag.size(); pTagCount++)
            {
                Element p = pTag.get(pTagCount);
                String pt = p.text();

                if(pt.length() != 0)
                {
                    HTMLPainText.add(pt);
                    pTagCount++:
                }

                pTag.parents().empty();     

            }
    }
} 
```

注意，可能有一些语法错误，我是手动输入的。

# c# - Lucene 中的通配符和 WordDelimiterFilter

> ID：12051062
> 
> 赞同：0
> 
> 时间：2012-08-21T08:39:05.243
> 
> 标签：c#, solr, lucene, lucene.net

我正在使用 lucene.net (2.3.2 ) 和兼容的 WordDelimiterFilter 的移植版本，但是当我使用带有连字符的单词执行通配符搜索时，它们不起作用。

一个例子是单词**"CL-276-0001"**，当我搜索**"cl"** / **"cl-276"** / **"cl-276-0001" 时**，我发现记录没有问题（这是我最初试图解决的问题)，但现在当我搜索**"cl-276*"**或**"cl-276-0*"**时，它不再起作用。**“cl*”**不受影响，这让我相信它可能正在使用查询解析器做一些事情，而不是将通配符添加回被调用的任何内容。

任何帮助解决/理解这一点将不胜感激。

编辑：我查看了查询解析器生成的查询。这正是输入的内容，我猜这意味着搜索不起作用，因为它会查找用户输入的内容作为前缀。现在我想我不应该改变这种行为。

第二次编辑：有人问分析仪是什么样的：

```
public override TokenStream TokenStream(string fieldName, TextReader reader)
{
    TokenStream result = new WhitespaceTokenizer(reader);
    result = new WordDelimiterFilter(result,1, 1, 1 , 1, 1 );
    result = new StandardFilter(result);
    result = new LowerCaseFilter(result);
    result = new StopFilter(result, LoadStopWords());
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:57:02.593

`CL-276-0001`被分析器分成标记 [cl] [276] 和 [0001]，这些标记存储在索引中。
另一方面，通配符搜索不使用分析器，仅小写搜索条件。由于您的搜索标准`cl-276`（或`cl-276-0`）在索引中不存在，因此您不会得到任何结果。

一种解决方案是构建一个 TermQuery（大小写很重要），而不是使用 QueryParser。

# mysql - mySQL 子查询

> ID：12051064
> 
> 赞同：2
> 
> 时间：2012-08-21T08:39:10.473
> 
> 标签：mysql

我编写了这段代码，它具有以下结果，现在我想将联合后获得的两行的结果相加。知道我该怎么做（我的意思是我需要在这个新的“表”上进行另一个选择）。任何帮助表示赞赏

```
SELECT Date_format(`creation`, '%Y-%m-%d') AS short_date,
       Sum(`param7`)                       AS time_spent_in_sessions,
       Count(*)                            AS nb_of_sessions
FROM   `f_colony_ios_play_resume_pn__20120823`
WHERE  `id` IN ( '22965', '22966' )

UNION

SELECT Date_format(`creation`, '%Y-%m-%d') AS short_date,
       Sum(`param8`)                       AS time_spent_in_sessions,
       Count(*)                            AS nb_of_sessions
FROM   `f_colony_ios_play_resume_pn__20120823`
WHERE  `id` IN ( '22970', '22971' )

-----------------------------
result:
    short_date       time_spent_in_sessions      nb_of_sessions
    2012-08-23               7                        2
    2012-08-23               10                       1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:45:08.177

```
SELECT short_date, SUM(time_spent_in_sessions), SUM(nb_of_sessions) 
FROM (both your queries here) AS subquerytable 
```

我认为这是要走的路...

# javascript - 检测显示器的物理尺寸

> ID：12051071
> 
> 赞同：4
> 
> 时间：2012-08-21T08:39:37.337
> 
> 标签：javascript, flash, screen, monitor

我想获得显示器的显示尺寸。

可以使用 JavaScript 或 Flash 吗？

我尝试了以下功能：

```
var dpi_x = document.getElementById('testdiv').offsetWidth;
        var dpi_y = document.getElementById('testdiv').offsetHeight;
        var width_in = screen.width / dpi_x;
        var height_in = screen.height / dpi_y;
        var diagonal_in = Math.round(10 * Math.sqrt(width_in * width_in + height_in * height_in)) / 10; 
```

但它没有显示固定的对角线值......因为当我改变显示器的分辨率时......

我想要像 16.5" 这样的固定尺寸......我的意思是，它应该针对任何特定的显示器固定......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:45:45.207

无法检测物理尺寸。分辨率与您将获得的一样接近。

# android - 关于 Android SDK 插件开发

> ID：12051072
> 
> 赞同：0
> 
> 时间：2012-08-21T08:39:39.473
> 
> 标签：android, sdk, add-on

我正在尝试开发自己的 Android SDK 插件。由于我的谷歌搜索不是很成功，有人能提供一些关于这方面的信息吗？

另外，插件在什么情况下会生成系统镜像，什么时候不会呢？我发现一些官方附加组件有自己的映像（如摩托罗拉附加组件），而另一些则使用默认系统映像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:55:34.907

您最好的选择是查看 android SDK 本身的源代码，它分布在 Android 源代码中，它包含从 SDK 到 Eclipse 插件的所有内容，您可以从源代码访问每段代码；我认为您不会找到有关它的文档或更好的来源。

# css - wordpress 样式表加载

> ID：12051085
> 
> 赞同：0
> 
> 时间：2012-08-21T08:40:07.020
> 
> 标签：css, wordpress, internet-explorer-7

在 IE7 中， display: inline-block 不起作用。

在 style.css 中的 wordpress 站点中，我定义了：

```
#footerlinks li {display:inline-block;list-style-type:none;height:25px;} 
```

style.css 来自 functions.php 使用：

```
wp_enqueue_style( 'style', get_stylesheet_uri() ); 
```

对于 IE7，我想使用：

```
#footerlinks li {_height:25px;zoom:1;*display:inline;list-style-type:none;} 
```

我应该使用什么代码，我应该把它放在哪里？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:51:13.893

使用条件注释的正式方式是：

```
wp_enqueue_style( 'my-style', WP_PLUGIN_URL . '/my-plugin/style.css' );
global $wp_styles;
$wp_styles->add_data( 'my-style', 'conditional', 'lte IE 7' ); 
```

来源：[http ://core.trac.wordpress.org/ticket/10618#comment:6](http://core.trac.wordpress.org/ticket/10618#comment:6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:45:00.863

在 wp_head() 之后的 header.php 中

```
<!--[if IE 7]>
<link rel="stylesheet" href="my.ie7.css">
<![endif]--> 
```

而已。阅读有关 quirksmode 条件包含的更多信息：[http ://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:47:47.650

处理此问题的最佳方法是使用条件样式表。在`<head>`header.php 的部分中包括以下内容；

```
<!--[if IE 7]><link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/css/ie7.css" type="text/css" media="screen" /><![endif]--> 
```

确保它**在**调用之后，`<?php wp_head(); ?>`否则样式不会覆盖 styles.css 值。

然后你添加你的;

```
#footerlinks li {_height:25px;zoom:1;*display:inline;list-style-type:none;} 
```

到一个名为 ie7.css 的文件并将其放在 css 目录中（或任何你想要的地方，这基于我的示例）。

这将仅适用于 IE7。

# c# - 如何使用 AutoFixture 简化单元测试 DDD 值对象平等

> ID：12051087
> 
> 赞同：7
> 
> 时间：2012-08-21T08:40:07.773
> 
> 标签：c#, unit-testing, domain-driven-design, autofixture

我目前正在使用 xUnit、Moq 和 AutoFixture 为我的域项目编写单元测试。让我们看看这个测试方法：

```
[Theory]
public void SameValueAs_OnOtherHasDifferentEmail_ReturnsFalse()
{
    Fixture fix = new Fixture();
    var sut = fix.CreateAnonymous<CoreAddress>();

    var other = new CoreAddress(
        sut.Firstname,
        sut.Lastname,
        sut.Company,
        sut.Street,
        sut.City,
        sut.ZIP,
        "other@email.com");

    Assert.False(sut.SameValueAs(other));
} 
```

如您所见，我正在测试类 CoreAddress 及其 SameValueAs 方法。要测试所有可能的情况，我必须创建测试方法*OnOtherHasDifferentFirstname*、*OnOtherHasDifferentLastname*等。这种模式可以吗？关于 AutoFixture 的使用，我能以某种方式简化这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T18:59:41.000

这种方法与我自己会做的非常相似。鉴于几乎所有的自动化测试都围绕着测试一些实际结果等于一些预期结果，我从来没有真正理解为什么人们不想对相等性本身进行单元测试。

使用像上面这样的值对象，它很容易变得有点乏味，因为它会导致许多非常相似的测试。

您可以与 xUnit.net 一起使用的一种技巧是：

```
[Theory]
[InlineData("other first name", null, null, null, null, null, null)]
[InlineData(null, "other last name", null, null, null, null, null)]
[InlineData(null, null, "other company", null, null, null, null)]
[InlineData(null, null, null, "other street", null, null, null)]
[InlineData(null, null, null, null, "other city", null, null)]
[InlineData(null, null, null, null, null, "other zip", null)]
[InlineData(null, null, null, null, null, null, "other@email.com")]
public void EqualsIsFalseWhenAtLeastOneValueDiffers(
    string firstName,
    string lastName,
    string company,
    string street,
    string city,
    string zip,
    string email)
{
    Fixture fix = new Fixture();
    var sut = fix.CreateAnonymous<CoreAddress>();

    var other = new CoreAddress(
        firstName ?? sut.Firstname,
        lastName ?? sut.Lastname,
        company ?? sut.Company,
        street ?? sut.Street,
        city ?? sut.City,
        zip ?? sut.Zip,
        email ?? sut.Email);

    Assert.False(sut.Equals(other));
} 
```

然而，虽然它很紧凑，但我不太热衷于做这样的事情，因为测试本身的圈复杂度为 8 - 大约 7 太多了......只有输入值的轻微错误配置可能会破坏测试最终产生误报或误报。

另一方面，我们都是程序员，如果事情变得重复，我们该怎么办？

编写一些代码来消除乏味。这基本上是[AutoFixture.Idioms](https://github.com/AutoFixture/AutoFixture/blob/master/Src/IdiomsUnitTest/Scenario.cs)项目的全部内容，虽然它目前没有像上面那样的封装测试，但它可能会在未来得到一个......它是开源的，我们偶尔会接受拉取请求;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:29:15.110

就我而言，我不会打扰单元测试值对象的相等性。如果你真的想这样做，有一些方法可以抽象出这种单元测试并使它们编写起来不那么乏味：http: [//kennethxu.blogspot.fr/2009/11/unit-test-value-object.html](http://kennethxu.blogspot.fr/2009/11/unit-test-value-object.html)

# ruby - 从 IO 对象也是 .xls 对象，如何？

> ID：12051090
> 
> 赞同：0
> 
> 时间：2012-08-21T08:40:09.660
> 
> 标签：ruby, spreadsheet, celerity

我用我的 Cucumbertesting 下载了一个 .xls 文件，但这是使用 Celerity @browser.span(:id, "someid").download 作为 ruby​​ 中的 IO 流下载的

使用 gem '电子表格'，我希望验证文档，但这个模块似乎只让我从路径打开一个文件。

正面问题：
我可以使用我的 IO 对象并将其转换为 .xls 文件，以便我可以使用电子表格模块打开它吗？我也不确定如何从 IO 跳转 .xls 所以我可以阅读它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:02:36.350

> 我可以使用我的 IO 对象并将其转换为 .xls 文件，以便我可以使用电子表格模块打开它吗？

是的你可以。gem 的代码说 Spreadsheet.open 接受 IO 对象或路径作为第一个参数（请参阅[https://github.com/voraz/spreadsheet/blob/master/lib/spreadsheet.rb](https://github.com/voraz/spreadsheet/blob/master/lib/spreadsheet.rb)）。

# sql-server - 如何在 SQL Server 的同一列中查找两个日期之间的差异？

> ID：12051092
> 
> 赞同：2
> 
> 时间：2012-08-21T08:40:13.043
> 
> 标签：sql-server, sql-server-2008

我需要一个查询来找出两个日期与状态条件之间的差异，

我的表数据是这样的：

```
select  
    ROW_NUMBER() OVER (ORDER BY eventtime) as id,
    Eventcode, eventtime, status 
from cfw.dbo.DCTBLEVENTINFO 
where
   MeterID = 4722
   and EventTime >= '2011-10-21' and EventCode = 13 
```

数据：

```
id  Eventcode eventtime                status
1   13        2011-10-21 21:42:00.000   1
2   13        2011-10-21 22:02:24.107   0
3   13        2011-10-22 09:45:00.000   1
4   13        2011-10-22 10:05:24.107   0
5   13        2011-10-22 15:08:00.000   0
6   13        2011-10-22 16:33:00.000   1
7   13        2011-10-22 16:44:00.000   0
8   13        2011-10-22 16:53:24.107   0
9   13        2011-10-23 08:52:00.000   1
10  13        2011-10-23 09:12:24.107   0
11  13        2011-10-23 10:18:00.000   0
12  13        2011-10-23 10:35:00.000   1
13  13        2011-10-23 10:36:00.000   0
14  13        2011-10-23 10:55:24.107   0
15  13        2011-10-23 10:56:00.000   1
16  13        2011-10-23 11:01:00.000   0
17  13        2011-10-23 11:16:24.107   0
18  13        2011-10-23 18:28:00.000   1
19  13        2011-10-23 18:30:00.000   0 
```

在此状态列 中， **1**指的是`occurencetime`，**0**指的是`restorationtime`。我必须取第一个发生时间和下一个相应的恢复时间之间的差异，然后取下一个发生时间

**例如**

对于**2011-10-22 的日期，总共有 5**个条目，我必须接受`occurencetime`as`2011-10-22 09:45:00.000`和`restoration time`as`2011-10-22 10:05:24.107`并有所作为。下一个条目有`restorationtime alone(status 0)`我必须离开那个条目并搜索下一个 1 和 0 条目。然后有所作为。

我的最终结果集是这样的：

```
Eventcode   occurencetime            restorationtime              difference (sec)
13          2011-10-21 21:42:00.000  2011-10-21 22:02:24.107      1224
13          2011-10-22 09:45:00.000  2011-10-22 10:05:24.107      1224 
13          2011-10-22 16:33:00.000  2011-10-22 16:44:00.000       660 
```

帮助我做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:44:11.230

试试这个：

```
 ;with cte as (
 select ROW_NUMBER() OVER (ORDER BY eventtime) as id,
        Eventcode, eventtime, status 
from cfw.dbo.DCTBLEVENTINFO 
where MeterID = 4722
and EventTime >= '2011-10-21' and EventCode = 13)
select   c1.Eventcode,
         c1.eventtime as occurencetime,
         min(c2.eventtime) as restorationtime,
         datediff(ss,c1.eventtime,min(c2.eventtime)) as difference
from     cte c1
left outer join cte c2
on       c1.eventtime < c2.eventtime           
and      c1.Eventcode=c2.Eventcode
where    c1.status=1
and      c2.status=0      
group by c1.Eventcode,c1.eventtime 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:56:41.110

使用 获取所有行，`status = 1`然后使用 using`cross apply`获取下一行。`status = 0``top(1) ... order by`

```
select T1.EventCode,
       T1.EventTime as OccurenceTime,
       T3.RestorationTime,
       datediff(second, T1.EventTime, T3.RestorationTime) as "Difference(sec)"
from cfw.dbo.DCTBLEVENTINFO as T1
  cross apply (
              select top(1) T2.EventTime as RestorationTime
              from cfw.dbo.DCTBLEVENTINFO as T2
              where T2.EventTime > T1.EventTime and
                    T2.Status = 0 and
                    T2.MeterID = T1.MeterID and
                    T2.EventCode = T1.EventCode               
              order by T2.EventTime
              ) as T3
where T1.Status = 1 and
      T1.MeterID = 4722 and
      T1.EventTime >= '20111021' and
      T1.EventCode = 13 
```

结果：

```
EventCode   OccurenceTime           RestorationTime         Difference(sec)
----------- ----------------------- ----------------------- ---------------
13          2011-10-21 21:42:00.000 2011-10-21 22:02:24.107 1224
13          2011-10-22 09:45:00.000 2011-10-22 10:05:24.107 1224
13          2011-10-22 16:33:00.000 2011-10-22 16:44:00.000 660
13          2011-10-23 08:52:00.000 2011-10-23 09:12:24.107 1224
13          2011-10-23 10:35:00.000 2011-10-23 10:36:00.000 60
13          2011-10-23 10:56:00.000 2011-10-23 11:01:00.000 300
13          2011-10-23 18:28:00.000 2011-10-23 18:30:00.000 120 
```

# c# - 如何以与 stackoverflow 相同的方式路由 URL

> ID：12051094
> 
> 赞同：3
> 
> 时间：2012-08-21T08:40:20.797
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, url-rewriting, asp.net-mvc-routing

这就是我认为这是有效的

```
http://stackoverflow.com/questions/12333706/how-to-bla-bla-question 
```

我认为应该有一个控制器动作和链接

```
@Html.ActionLink("how-to-bla-bla-question", "Questions", "Controller", new{questionId=12333706})
...
public ActionResult Questions(questionId)
{
    ...
} 
```

通常 url 应该是

```
http://stackoverflow.com/questions/12333706/ 
```

现在这是由javascript处理还是有一些其他方法如何在它之后制作带有ID和标题的url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:53:54.640

我就是这样做的。

Global.asax 片段：

```
routes.MapRoute(
        "GotoPostOrPage",
        "p/{dataItemTypeId}/{dataItemId}/{ignored}", // This allows you to append a random slug if you like
        new { controller = "DataItem", action = "Details", ignored = UrlParameter.Optional }
        ); 
```

然后在控制器中是这样的：

```
public PartialViewResult Details(int dataItemTypeId, int dataItemId)
{
    IDataItemView dataItem = _dataItemService.SelectDataItem(dataItemTypeId, dataItemId);
    DataItemViewModel vm = MappingFunctions.DataItemToViewModel(dataItem);

    return PartialView("_Details", vm);
} 
```

请注意，这允许您附加一个随机 slug，这正是 stackoverflow 所做的。但是，stackoverflow 然后将您的 slug 更正为存储在数据库中的那个。这将是微不足道的。

另请注意，我已经向您展示了我的真实代码；您显然需要稍微调整一下（但不多）以适应您的情况。重要的一点是在路由表中附加一个可选的 url 参数。就我而言，我完全忽略了它，这实际上也是 SO 在进入的过程中所做的事情，因此您可以导航到这个愚蠢的 URL 并仍然到达这里：[https ://stackoverflow.com/questions/12051094/i-like-to -吃蛋糕](https://stackoverflow.com/questions/12051094/i-like-to-eat-cake "https://stackoverflow.com/questions/12051094/i-like-to-eat-cake")

# javascript - jQuery 没有进行异步调用 vel async:false 指定

> ID：12051097
> 
> 赞同：2
> 
> 时间：2012-08-21T08:40:39.717
> 
> 标签：javascript, jquery

这是我的代码

```
var jsonpath;

function loginFromDef() {

    var a = grantAccess($('#login :input').serialize());
    if (a.Msg) {
        $('#msg').html(a.Msg).attr('class', 'error');
    }
    else if (a.done) {
        var returnUrl = getQueryString('ReturnURL');
        if (returnUrl)
            window.location = returnUrl;
        else
            window.location = 'Home.aspx';
    }

    return false;
}

function grantAccess(dataToPost) {

    $.ajax({
        type: "POST",
        url: jsonpath + 'Json.ashx?method=GrantAccess',
        async: false,
        data: dataToPost,
        success: function (data) {
            return data;
        }
    });
}

function getQueryString(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
} 
```

`var jsonPath`正在 Default.aspx 页面中定义，我在提交按钮`loginFromDef()`的事件中调用函数。`onclick`

我收到错误**`TypeError: a is undefined`** 不要担心我的`.ashx`处理程序。它工作正常。我会测试它。

我认为`var a`功能`loginFromDef`没有被初始化。因为**`may be jQuery is making asynchronous call. Even I have set async:false`**在选项中。

我怎么了。。？？请提出解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T08:48:20.483

您在`grantAccess`. 回调中的 return 语句没有任何效果（因为它是由`$.ajax`内部调用的）。

Ajax 调用*是*同步的，但您不会从`grantAccess`.

你可以这样做：

```
return $.ajax({
    type: "POST",
    url: jsonpath + 'Json.ashx?method=GrantAccess',
    async: false,
    data: dataToPost,
}).responseText; 
```

*也许您必须`$.parseJSON`在返回该值之前使用。*

`$.ajax`返回一个`jqXHR`对象，您可以在[文档](http://api.jquery.com/jQuery.ajax/#jqXHR)中找到更多信息。

但是，我**强烈**建议不要使用同步 Ajax 调用，而且我看不出有什么理由需要在这里使用。在收到响应之前，同步请求可能会阻塞浏览器（包括其 UI），使浏览器无响应，从而导致糟糕的使用体验。

更改您的代码，以便您可以使用回调来处理响应。例如：

```
function loginFromDef() {

    grantAccess($('#login :input').serialize()).done(function(a) {
        if (a.Msg) {
            $('#msg').html(a.Msg).attr('class', 'error');
        }
        else if (a.done) {
            var returnUrl = getQueryString('ReturnURL');
            if (returnUrl)
                window.location = returnUrl;
            else
                window.location = 'Home.aspx';
        }
    });

    return false;
} 
```

where`grantAccess`简单地返回`jqXHR`由返回的对象`$.ajax`：

```
function grantAccess(dataToPost) {
    return $.ajax({
        type: "POST",
        url: jsonpath + 'Json.ashx?method=GrantAccess',
        data: dataToPost
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:46:05.577

在进行 AJAX 调用后，您的`grantAccess`函数将返回。由于您没有为`grantAccess`函数指定返回值，因此它隐式返回`undefined`.

然后，您的`success`函数将`data`变量返回给它的**caller**，它位于 jQuery 代码中的某个位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T08:53:10.320

问题在于`success`您的 Ajax 调用的功能。

```
function grantAccess(dataToPost) {
    $.ajax({
        type: "POST",
        url: jsonpath + 'Json.ashx?method=GrantAccess',
        async: false,
        data: dataToPost,
        success: function (data) {
            return data;
        }
    });
} 
```

成功函数不同于 GrantAccess 函数。GrantAccess 不返回值，因此以下行：

```
var a = grantAccess($('#login :input').serialize()); 
```

总会导致存在。**_**`a``null`

你应该做的是以下几点：

```
function loginFromDef() {

    grantAccess($('#login :input').serialize());
}

function grantAccess(dataToPost) {

    $.ajax({
        type: "POST",
        url: jsonpath + 'Json.ashx?method=GrantAccess',
        async: false,
        data: dataToPost,
        success: TheFollowUpFunction(data)
    });
}

    //NEWLY ADDED:

    function TheFollowUpFunction(a) {

        if (a.Msg) {
            $('#msg').html(a.Msg).attr('class', 'error');
     }
    else if (a.done) {
         var returnUrl = getQueryString('ReturnURL');
          if (returnUrl)
            window.location = returnUrl;
          else
            window.location = 'Home.aspx';
    }

    } 
```

# php - 如何计算一个数组以填充另一个数组？

> ID：12051099
> 
> 赞同：0
> 
> 时间：2012-08-21T08:40:46.837
> 
> 标签：php, arrays

我有一个数组存储等级名称，等级值作为键，等级名称作为值：

```
$labels=array(1=>'Insufficient',2=>'Sufficient',3=>'Satisfactory',4=>'Good',5=>'Excellent' ); 
```

然后，还有另一个数组存储所有获得成绩的人的记录，其中 user_id 为 key，grade value 为 value：

```
$grades = array( 123 = > 1, 456 => 5 , 789 = > 3); 
```

现在我想统计每个年级下的记录-- `grade-1 => 5 users, grade-2=>6 users`，形式如下：

```
array(1=>5, 2=>6, 3=>2, 4=>2, 5=>1); 
```

我试过这个并得到未定义偏移的错误：

```
$result = array();

for($i=1;$i<=5;++$i)
{
    foreach($grades as $user_id=>$user_grade)
    {
        $result[$i] = ( $user_grade == $i ) ? $result[$i]+1 : $result[$i];
    }
} 
```

如何获得计算每个年级下有多少用户的结果数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:55:14.517

听起来像[array_count_values()](http://docs.php.net/array_count_values)会成功。

例如

```
<?php
$grades = array ( // this array contains no value "1"
   68 => 4, 138 => 4, 189 => 2, 255 => 4,
  297 => 3, 366 => 2, 425 => 4, 465 => 3,
  489 => 5, 580 => 4, 646 => 4, 704 => 5,
  784 => 2, 811 => 4, 897 => 4, 974 => 5,
  1006 => 2, 1093 => 2, 1189 => 2, 1222 => 4
);

$cnt = array_count_values($grades);
$cnt += array(1=>0,0,0,0,0);
ksort($cnt);

print_r($cnt); 
```

印刷

```
Array
(
    [1] => 0
    [2] => 6
    [3] => 2
    [4] => 9
    [5] => 3
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:50:06.047

尝试一下 ：

```
// $labels = array("Grade Value" => "Grade Name")
$labels=array(1=>'Insufficient',2=>'Sufficient',3=>'Satisfactory',4=>'Good',5=>'Excellent' );

// $grades = array("User Id" => "Grade Value")
$grades = array( 123 => 1, 456 => 5 , 789 => 3);

//OutPUT :  array( "Gread Value " => "No Of Users ")

foreach($labels as $key => $value)
{
    $userCount = 0;
    foreach($grades as $key1=> $value1)
    {
        if($key == $value1)
        {
            $userCount++;
        }
    }

    $result[$key] = $userCount;
}

print_r($result); 
```

# java - 运行时命令不再起作用

> ID：12051104
> 
> 赞同：0
> 
> 时间：2012-08-21T08:40:53.330
> 
> 标签：java, command, runtime, lpt

我的命令是：

```
Runtime.getRuntime().exec("cmd /c copy /b D:\\MeAgent\\Reports\\receipt.hex lpt2:");
System.out.println("test"); 
```

在控制台中出现“测试”，但该命令未执行并且没有错误消息:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:53:43.670

看起来你没有逃脱最后一个反斜杠。

**编辑 - 现在你已经解决了显而易见的问题**

当您调用 exec 时，您会生成一个进程。您需要等待该过程完成。

你在这里得到的是一个竞争条件——即你的代码在进程执行之前完成。

[http://docs.oracle.com/javase/1.7/docs/api/java/lang/Process.html](http://docs.oracle.com/javase/1.7/docs/api/java/lang/Process.html)

# php - 将数据发布到网站表单卷曲

> ID：12051106
> 
> 赞同：0
> 
> 时间：2012-08-21T08:40:57.493
> 
> 标签：php, post, curl

我正在尝试在 php 的数组中打印此页面的数据，但发布正确的字段。

基本上我需要提交 2010/2011 年和第二赛区（男子）的数据，我不知道我哪里出错了？

```
 $ch = curl_init();
      curl_setopt($ch, CURLOPT_URL, "http://www.englandbasketball.co.uk/leaguetables/default.aspx");
      curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
      curl_setopt($ch, CURLOPT_POST, true);

      $data = array(
     'ddlStartYear' => '2011',
     'ddlCompetitionGroups' => '540'
 );

      curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
      $output = curl_exec($ch);
      $info = curl_getinfo($ch);
      curl_close($ch);

      print ($info); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:34:06.930

您想提交包含您的信息 (2010/2011) 的表单并希望在数组中获得结果。如果我是对的，他们应该使用 SOAP。并且应该有一个功能来处理您的数据以继续它们。

[请阅读这个](http://php.net/manual/en/book.soap.php)

# sql - 从 3 个表中选择 2 列

> ID：12051111
> 
> 赞同：4
> 
> 时间：2012-08-21T08:41:00.750
> 
> 标签：sql, sql-server-2005

我有 3 张桌子：

```
Table t1:     Table t2:     Table t3:     
+----+----+   +----+----+   +----+----+   
| i1 | i2 |   | i2 | c2 |   | i1 | c1 |   
+----+----+   +----+----+   +----+----+   
|  1 | 22 |   |  11| cc |   |  1 | e  |   
|  2 | 33 |   |  22| bb |   |  2 | f  |   
|  3 | 11 |   |  33| aa |   |  3 | g  |   
+----+----+   +----+----+   +----+----+ 
```

我想使用带有列 i1 和 i2 的表 t1 从 t2 中选择列 c2 和从 t3 中选择 c1 列，结果会很薄：

```
requested Tabel:     
+----+----+   
| c1 | c2 |   
+----+----+   
|  e | bb |   
|  f | aa |   
|  g | cc |   
+----+----+ 
```

我用这样的工会做了一个选择：

```
select pve.c1
from dbo.t3 as pve
join dbo.t1 as v
on pve.i1 = v.i1
union
select vse.c2
from dbo.t2 as vse
join dbo.t1 as e
on vse.i2 = e.i2 
```

结果是这样的：

```
resulted Tabel:     
+----+
| i1 |
+----+
|  e |
|  f |
|  g |
|  bb|
|  aa|
|  cc|
+----+ 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T08:43:30.870

试试这个，

```
SELECT  c.c1, b.c2
FROM    t1 a
            INNER JOIN t2 b
                on a.i2 = b.i2
            INNER JOIN t3 c
                on a.i1 = c.i1 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/d314c/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:44:30.670

```
SELECT c1, c2 FROM t1
JOIN t2 ON t1.i2=t2.i2
JOIN t3 ON t1.i1=t3.i1; 
```

# wcf - 初始化开销较大的 WCF 服务

> ID：12051114
> 
> 赞同：1
> 
> 时间：2012-08-21T08:41:11.143
> 
> 标签：wcf, iis, .net

我有一个初始化过程很长的服务。

如果我在构造函数中进行初始化，即使只需要读取 wsdl 的调用也会花费很长时间。
在第一次调用服务期间进行初始化将使此调用花费很长时间。

还有其他选择吗？是否可以在构造函数中触发异步初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:49:43.400

如果您在 IIS 中托管您的服务，您可以安装 Windows Server AppFabric，这是一个扩展，旨在提供额外的配置选项，如监控、检测、日志记录和持久性工作流。

WCF 的另一个有用功能是**无需等待第一个客户端**请求即可自动启动服务的能力，如果没有 AppFabric，WAS 仅在第一个客户端请求进入时才启动您的托管进程。这在像您这样的单例场景中非常重要

[http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)

# php - 如何使我在网站上的 Flash 文件不可点击？

> ID：12051117
> 
> 赞同：0
> 
> 时间：2012-08-21T08:41:12.260
> 
> 标签：php, javascript, jquery

我的网站上有一些 /swf 文件 - 我正在以这种方式发布它们：

```
 <div class="cvreation" style="padding-top:25px;" >
            <object class="flash_banner" type="application/x-shockwave-flash" data="/prod_bann/flashfile.swf" ></object>
           </div> 
```

它工作得很好——但是当我点击这个 flash 对象时——它让我进入 currenturl/undefined。如何使这些横幅不可点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:49:12.330

**HTML**

```
 <div class="cvreation" style="padding-top:25px;" >
        <div class="cover"></div>
        <object class="flash_banner" type="application/x-shockwave-flash" 
                   data="/prod_bann/flashfile.swf" wmode="opaque" ></object>
       </div> 
```

[WMODE 文档](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Browser_support_for_Window_Mode__wmode__values)

# ios - 有没有办法在 iOS 上生成二维码图像

> ID：12051118
> 
> 赞同：39
> 
> 时间：2012-08-21T08:41:19.677
> 
> 标签：ios, qr-code

是否有一种标准方法可以生成 QR 码并将其附加到来自 iOS 客户端应用程序的邮件项目（无服务器代码）？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2014-03-10T09:35:21.103

从 iOS 7 开始，您可以使用 Core Image 过滤器来生成 QR 图像。请参阅[此处的最终提示](https://github.com/ShinobiControls/iOS7-day-by-day/blob/master/15-core-image-filters/15-core-image-filters.md)：

```
- (CIImage *)createQRForString:(NSString *)qrString {
    NSData *stringData = [qrString dataUsingEncoding: NSISOLatin1StringEncoding];

    CIFilter *qrFilter = [CIFilter filterWithName:@"CIQRCodeGenerator"];
    [qrFilter setValue:stringData forKey:@"inputMessage"];

    return qrFilter.outputImage;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-06-22T11:48:49.843

对于完美适合我的 Obj-C 版本，我混合了答案 पवन 和 Teja Kumar Bethina：

```
NSString *qrString = @"My string to encode";
NSData *stringData = [qrString dataUsingEncoding: NSUTF8StringEncoding];

CIFilter *qrFilter = [CIFilter filterWithName:@"CIQRCodeGenerator"];
[qrFilter setValue:stringData forKey:@"inputMessage"];
[qrFilter setValue:@"H" forKey:@"inputCorrectionLevel"];

CIImage *qrImage = qrFilter.outputImage;
float scaleX = self.qrImageView.frame.size.width / qrImage.extent.size.width;
float scaleY = self.qrImageView.frame.size.height / qrImage.extent.size.height;

qrImage = [qrImage imageByApplyingTransform:CGAffineTransformMakeScale(scaleX, scaleY)];

self.qrImageView.image = [UIImage imageWithCIImage:qrImage
                                             scale:[UIScreen mainScreen].scale
                                       orientation:UIImageOrientationUp]; 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-02-12T07:09:11.353

**使用斯威夫特 2**

```
import UIKit
import CoreImage

func createQRFromString(str: String) -> CIImage? {
    let stringData = str.dataUsingEncoding(NSUTF8StringEncoding)

    let filter = CIFilter(name: "CIQRCodeGenerator")

    filter?.setValue(stringData, forKey: "inputMessage")

    filter?.setValue("H", forKey: "inputCorrectionLevel")

    return filter?.outputImage
}

if let img = createQRFromString("Hello world program created by someone") {
    let somImage = UIImage(CIImage: img, scale: 1.0, orientation: UIImageOrientation.Down)
} 
```

[![在此处输入图像描述](../Images/1f8ce96accaaaa98761021df4c19321d.png)](https://i.stack.imgur.com/if8fz.png)

**斯威夫特 3.0**

```
import UIKit
import CoreImage

func createQRFromString(_ str: String) -> CIImage? {
        let stringData = str.data(using: String.Encoding.utf8)

        let filter = CIFilter(name: "CIQRCodeGenerator")

        filter?.setValue(stringData, forKey: "inputMessage")

        filter?.setValue("H", forKey: "inputCorrectionLevel")

        if let img = createQRFromString("Hello world program created by someone") {
            let somImage = UIImage(ciImage: img, scale: 1.0, orientation: UIImageOrientation.down)
        }

        return filter?.outputImage
    }

if let img = createQRFromString("Hello world program created by someone") {
            let somImage = UIImage(ciImage: img, scale: 1.0, orientation: UIImageOrientation.down)
        } 
```

斯威夫特 4.2

```
private func createQRFromString(str: String) -> CIImage? {
        let stringData = str.data(using: .utf8)

        let filter = CIFilter(name: "CIQRCodeGenerator")
        filter?.setValue(stringData, forKey: "inputMessage")
        filter?.setValue("H", forKey: "inputCorrectionLevel")

        return filter?.outputImage
    }

    var qrCode: UIImage? {
        if let img = createQRFromString(str: "Hello world program created by someone") {
            let someImage = UIImage(
                ciImage: img,
                scale: 1.0,
                orientation: UIImage.Orientation.down
            )
            return someImage
        }

        return nil
    } 
```

Xcode 12.4 或 Swift 版本 >= 5.2

```
import UIKit
import CoreImage

func createQRFromString(str: String) -> CIImage? {
  let stringData = str.data(using: .utf8)

  let filter = CIFilter(name: "CIQRCodeGenerator")

  filter?.setValue(stringData, forKey: "inputMessage")

  filter?.setValue("H", forKey: "inputCorrectionLevel")

  return filter?.outputImage
}

if let img = createQRFromString(str: "Hello world program created by someone") {
  let somImage = UIImage(ciImage: img, scale: 1.0, orientation: .down)
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-01-05T09:08:30.533

自从提出这个问题以来已经有一段时间了，并且已经给出了一些几乎完美的答案。但是，我必须调整并结合几个答案，才能让它在 2018 年使用 Xcode 9.2 完美适用于 AppleTV 4K、iPhone X 和 iPadPro。如果有人需要，这里是代码。

```
@IBOutlet weak var qrCodeBox: UIImageView!

func createQRFromString(_ str: String, size: CGSize) -> UIImage {
    let stringData = str.data(using: .utf8)

  let qrFilter = CIFilter(name: "CIQRCodeGenerator")!
  qrFilter.setValue(stringData, forKey: "inputMessage")
  qrFilter.setValue("H", forKey: "inputCorrectionLevel")

  let minimalQRimage = qrFilter.outputImage!
  // NOTE that a QR code is always square, so minimalQRimage..width === .height
  let minimalSideLength = minimalQRimage.extent.width

  let smallestOutputExtent = (size.width < size.height) ? size.width : size.height
  let scaleFactor = smallestOutputExtent / minimalSideLength
  let scaledImage = minimalQRimage.transformed(
    by: CGAffineTransform(scaleX: scaleFactor, y: scaleFactor))

  return UIImage(ciImage: scaledImage, 
                 scale: UIScreen.main.scale, 
                 orientation: .up)
}

override func viewDidLoad() {
    super.viewDidLoad()
    let myQRimage = createQRFromString("https://www.apple.com", 
                      size: qrCodeBox.frame.size)
    qrCodeBox.image = myQRimage
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-02-18T10:13:34.387

在 Swift 2.0 中生成 QR 图像的代码。

```
let reqStr = “string to convert as QR code”
let data = reqStr.dataUsingEncoding(NSISOLatin1StringEncoding, allowLossyConversion: false)

let filter = CIFilter(name: "CIQRCodeGenerator")
filter!.setValue(data, forKey: "inputMessage")

let qrImage:CIImage = filter!.outputImage!

//qrImageView is a IBOutlet of UIImageView        
let scaleX = qrImageView.frame.size.width / qrImage.extent.size.width
let scaleY = qrImageView.frame.size.height / qrImage.extent.size.height

let resultQrImage = qrImage.imageByApplyingTransform(CGAffineTransformMakeScale(scaleX, scaleY))
qrImageView.image = UIImage(CIImage: resultQrImage) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T08:33:57.630

> ...这将让我生成链接...

首先，您需要找到一个短链接服务，例如[bit.ly](http://bit.ly/)或[goo.by](http://goo.by/)，以使长链接更短，从而减少 QR 码的大小。

要自动执行此任务，您必须使用一些 Web 服务。

> ...然后生成一个二维码...

[ZXing](http://code.google.com/p/zxing/)是一个流行的开源二维码生成器，也可用于 iOS

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-21T01:05:51.917

如果您不介意使用公共 api，这里有一个简单的 10 秒方法。[http://goqr.me/api](http://goqr.me/api)

只需填写数据参数，然后从响应中加载图像。干杯。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-14T12:34:56.293

我为 Obj-C 创建了一个 NSString 类别，以 Mike Demidov 的精彩回答

**NString+GGQRCode.h**

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>

@interface NSString (GGQRCode)

-(UIImage *)qrCodeImage:(CGFloat)width height:(CGFloat)height;
-(UIImage *)qrCodeImage:(CGFloat)width height:(CGFloat)height scale:(CGFloat)scale orientation:(UIImageOrientation)orientation;

@end 
```

**NString+GGQRCode.m**

```
#import "NSString+GGQRCode.h"

@implementation NSString (GGQRCode)

-(UIImage *)qrCodeImage:(CGFloat)width height:(CGFloat)height
{
    return [self qrCodeImage:width height:height scale:[UIScreen mainScreen].scale orientation:UIImageOrientationUp];
}

-(UIImage *)qrCodeImage:(CGFloat)width height:(CGFloat)height scale:(CGFloat)scale orientation:(UIImageOrientation)orientation
{
    NSData *stringData = [self dataUsingEncoding: NSUTF8StringEncoding];

    CIFilter *qrFilter = [CIFilter filterWithName:@"CIQRCodeGenerator"];
    [qrFilter setValue:stringData forKey:@"inputMessage"];
    [qrFilter setValue:@"H" forKey:@"inputCorrectionLevel"];

    CIImage *qrImage = qrFilter.outputImage;
    float scaleX = width / qrImage.extent.size.width;
    float scaleY = height / qrImage.extent.size.height;

    qrImage = [qrImage imageByApplyingTransform:CGAffineTransformMakeScale(scaleX, scaleY)];

    return [UIImage imageWithCIImage:qrImage scale:scale orientation:orientation];
}

@end 
```

# sql - 数据库设计 - 可空字段

> ID：12051119
> 
> 赞同：2
> 
> 时间：2012-08-21T08:41:20.720
> 
> 标签：sql, database, postgresql, database-design

有点“最佳实践”的问题，因为我是数据库设计的新手，我想确保我在正确的轨道上使用这个

我有 3 种用户类型，用户（单人）、组（很多用户）和公司（很多组），每个都有自己的登录名，允许他们发布消息。所以例如。如果一家公司发布一条消息，它将出现在所有链接用户的新闻提要中。

为了实现这一点，我有一个存储消息内容的表“消息”，以及用于链接用户类型的外键

我打算使用以下模式（PostgreSQL）来实现这一点......

```
create table notifications(
    notification_id serial primary key,
    user_id integer references users,
    group_id integer references groups,
    company_id integer references companies,
    date_created timestamp not null default now(),
    title_id text not null,
    message_id text not null,
    icon text not null default 'logo'
);
comment on table notifications is 'Messages to be displayed on a users home feed'; 
```

这将允许我构建一个查询，为用户新闻提要提取相关消息（例如，只有一个字段 user_id、group_id 或 company_id 将具有值）

但这是最好的方法吗？我确信拥有可为空的外键是一个坏主意，我在想使用一种枚举键可能会有更好的解决方案？（这甚至存在吗？！）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:27:09.410

一种高度规范化的选择是使表格更像

```
create table notifications( 
    notification_id serial primary key, 
    date_created timestamp not null default now(), 
    title_id text not null, 
    message_id text not null, 
    icon text not null default 'logo' 
); 

create table usernotifications
(
    notification_id integer references notifications,
    user_id integer references users
);

create table groupnotifications
(
    notification_id integer references notifications,
    group_id integer references groups
);

create table companynotifications
(
    notification_id integer references notifications,
    company_id integer references companies
); 
```

其中条目仅存在于任何给定通知的相关（用户/公司/组）通知表中。

（在表明外键是可选的情况下，我认为可空外键没有任何问题，但类似类型的多个外键确实给人一种非规范化设计的印象）

# ruby-on-rails - RESTful 资源和 link_to

> ID：12051120
> 
> 赞同：0
> 
> 时间：2012-08-21T08:41:23.747
> 
> 标签：ruby-on-rails, ruby

有点麻烦。我有一个嵌套路由系统：

```
 resources :forums do
    resources :posts
  end 
```

帖子属于论坛，我已经在模型中进行了关联。

但是，当我访问`/forums/ID/posts` <===This 并没有正确呈现 Posts 控制器的索引操作时。问题是我不知道在嵌套资源中如何使用 link_to 。

```
 @post.each do |post| 
        <li>link_to post.title, post</li>
 end 
```

[取出 ERB 语法] 这是 Posts 控制器`index action => @post = Forum.find(params[:id]).posts`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:53:14.263

尝试

```
link_to post.title, forum_post_path(forum,post) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:20:06.623

论坛 id 参数不对。

```
@post = Forum.find(params[:id]).posts 
```

在你的 PostController 你应该做

```
 @forum = Forum.find(params[:forum_id])
 @posts = @forum.posts 
```

在你看来

```
 @posts.each do |post| 
        <li>link_to post.title, post</li>
 end 
```

# android - Android 应用程序在活动之间切换时显示主屏幕

> ID：12051123
> 
> 赞同：0
> 
> 时间：2012-08-21T08:41:33.237
> 
> 标签：android, android-activity

在我的应用程序中，当从一个活动转到另一个活动并切换内容视图时，会显示大约一秒钟的主屏幕。我尝试在其中添加加载屏幕，但从活动转到加载屏幕时仍显示主屏幕。所以最后我尝试从我的主菜单活动切换到一个空白活动，它仍然显示主屏幕大约一秒钟。关于如何摆脱活动之间显示的主屏幕的任何想法？

我目前正在使用意图在活动之间进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:07:11.363

打电话`startActivity()`，*然后* `finish()`而不是相反。

或者，简单地说，不要调用`finish()`您当前的活动。应用程序中的默认行为是按下`back`会将您带到上一个活动，如果上一个活动已被`finish`ed()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:03:03.467

请`finish()`在您创建意图之后以及在您开始您的意图之前（即）在声明之前调用`startActivity(intent);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T23:24:28.050

事实证明，我将主题设置为 noTitleBar 并尝试以编程方式将其删除，只需将主题设置为 DeviceDefault.noTitleBar 滞后就消失了。

# android - android - 如何在电子邮件正文中创建表格

> ID：12051125
> 
> 赞同：6
> 
> 时间：2012-08-21T08:41:36.197
> 
> 标签：android, html

我想在电子邮件正文中创建表格。我读了一些android不支持table标签的地方。如何实现这一点。请任何人都可以帮助我。

**输出：**

![在此处输入图像描述](../Images/c75da5421c16323117fa45e581de6675.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:37:35.317

您可以尝试使用 HTML 的 div 标签。

例子 ：

1.  [http://www.codeproject.com/Articles/47934/DIV-TABLE](http://www.codeproject.com/Articles/47934/DIV-TABLE)
2.  [http://snook.ca/archives/html_and_css/getting_your_di](http://snook.ca/archives/html_and_css/getting_your_di)

# html - 在下拉列表中选择值

> ID：12051126
> 
> 赞同：-2
> 
> 时间：2012-08-21T08:41:38.243
> 
> 标签：html, asp.net-mvc

这是我的代码：

```
<%: Html.DropDownListFor(m => m.type, new SelectList(new[] { "something", "other", "third thing" }))%> 
```

并且 m.type 的值为 1，这意味着应该选择“其他”。但事实并非如此。为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:50:32.160

这不起作用的原因是选择列表项没有数值。如果您查看源代码，您可能会看到该值与文本相同，而不是数字。

要解决此问题，您还需要构建选择列表并添加数值。

因此，您可能需要像这样构建您的选择列表：

```
 new SelectList(new[] { 
            new SelectListItem{Text = "something", Value = 0}, 
            new SelectListItem{Text ="other", Value = 1},
            new SelectListItem{Text ="third thing", Value = 2 }}) 
```

# windows-phone-7 - 使用 RestSharp 通过代理的 Web 请求

> ID：12051137
> 
> 赞同：17
> 
> 时间：2012-08-21T08:42:13.403
> 
> 标签：windows-phone-7, restsharp

我正在尝试通过 Windows phone 7 上的代理发出 Web 请求。据我所知，Compact Framework 不包括为 HttpWebRequest 对象配置代理。我尝试使用 RestSharp 但 RestClient 也不允许这样做。我还尝试在本地计算机上配置 Internet 选项以使用代理，希望相同的选项将应用于我的 Windows Phone 模拟器。那没有用。你有什么想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T16:52:06.533

在 Web.config 的“配置”部分下添加：

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true"></defaultProxy>
</system.net> 
```

（更多信息 - [MSDN - defaultProxy 元素（网络设置）](http://msdn.microsoft.com/en-us/library/kd3cf2ex%28v=vs.110%29.aspx)）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-20T09:28:25.533

对于来自 Google 的人，他们正在寻找如何使用 RestSharp 设置代理，如果您不在 Windows Phone 上，至少从版本 104.4.0 开始，您可以执行以下操作：

```
var client = new RestClient("http://example.com")
client.Proxy = new WebProxy("http://proxy.example.com") 
```

不知道这是否适用于 Windows Phone，因为我不熟悉那里的框架；由于问题的标题不包含 Windows Phone，我认为像我这样的许多人最终会来到这里，只是搜索如何使用 RestSharp 设置代理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-14T16:16:09.060

这对我有用。

```
String url = "some url";

IWebProxy proxy = WebRequest.DefaultWebProxy;
proxy.Credentials = CredentialCache.DefaultCredentials;
RestClient client = new RestClient(url);
{
Proxy = proxy,
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-07T17:48:11.123

使用方法和类的一些示例：调用：

```
 var client = new RestClient(urlbase);
            if(myConfigInstance.ProxyActive) {
                 client.Proxy = GetWebProxy(myConfigInstance);
            } 
```

和方法：

```
 public static WebProxy GetWebProxy(ProxySettings proxySettings)
    {
        WebProxy proxy;
        try
        {
            proxy = new WebProxy(proxySettings.Server, Int32.Parse(proxySettings.Port))
            {
                Credentials = new NetworkCredential(proxySettings.Username, proxySettings.Password, proxySettings.Domain)
            };
        }
        catch (Exception ex)
        {
          throw new Exception("Error");
        }
        return proxy;
    } 
```

和班级：

```
public class ProxySettings
{
    public bool ProxyActive { get; set; }
    public string Port { get; set; }
    public string Server { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
    public string Domain { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-25T21:02:13.273

在 RestSharp v107 中，您可以使用选项对象设置代理。

```
var options = new RestClientOptions("https://api.myorg.com") {
    Proxy = GetWebProxy() // <-- Right here.
    ThrowOnAnyError = true,
    Timeout = 1000
};
var client = new RestClient(options); 
```

返回`WebProxy`对象的方法：

```
public static WebProxy GetWebProxy()
{
    var proxyUrl = "http://proxy-name.companydomain.com:9090/";
    // First create a proxy object
    var proxy = new WebProxy()
    {
        Address = new Uri(proxyUrl),
        BypassProxyOnLocal = false,
        //UseDefaultCredentials = true, // This uses: Credentials = CredentialCache.DefaultCredentials
        //*** These creds are given to the proxy server, not the web server ***
        Credentials = CredentialCache.DefaultNetworkCredentials
        //Credentials = new NetworkCredential("proxyUserName", "proxyPassword")
    };

    return proxy;
} 
```

参考：[https ://restsharp.dev/v107/#restsharp-v107](https://restsharp.dev/v107/#restsharp-v107)

# java - 在 Java 项目中处理每个开发人员的资源，例如 database.properties 或 log4j.properties

> ID：12051141
> 
> 赞同：0
> 
> 时间：2012-08-21T08:42:23.510
> 
> 标签：java, maven, resources, log4j

我们是 4 名开发人员，致力于基于**maven 的 java web 项目**。`database.properties`我们每个人都有一个指向每个开发人员数据库模式的特定文件。

我们目前遇到的问题是，**我们有时会无意中提交每个开发人员的 database.properties 或`log4j.properties`**文件，这会导致明显的问题。

另一方面，如果我们将这些文件放到`/lib`Tomcat 的目录中，我们可能会忘记将它们包含在交付的生产应用程序中。

任何人都可以提供建议或建议最佳实践以解决此问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:56:15.903

您应该开始一起使用[Maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)和[Maven 资源过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)。

如果将这两种技术结合起来，那么每个用户都可以在文件中定义他的配置`%USER_HOME%/.m2/settings.xml`文件，而`database.properties`and`log4j.properties`文件使用资源过滤从用户配置文件属性中获取用户特定的属性。

我一直在使用这种技术通过设置如下结构来支持不同的数据库：

```
src
  |-main
       |-filters
       |       |-derby.properties
       |       |-h2.properties
       |       |-mssql.properties
       |       |-mysql.properties
       |-templates
                 |-db.properties 
```

而在我的`pom.xml`

```
<profiles>
    <profile>
        <id>derby</id>
        <build>
            <filters>
                <filter>src/main/filters/derby.properties</filter>
            </filters>
            <resources>
                <resource>
                    <directory>src/main/templates</directory>
                    <filtering>true</filtering>
                </resource>
            </resources>
        </build>
    </profile>
    <profile>
        <id>mysql</id>
        <build>
            <filters>
                <filter>src/main/filters/mysql.properties</filter>
            </filters>
            <resources>
                <resource>
                    <directory>src/main/templates</directory>
                    <filtering>true</filtering>
                </resource>
            </resources>
        </build>
    </profile>
    <profile>
        <id>mssql</id>
        <build>
            <filters>
                <filter>src/main/filters/mssql.properties</filter>
            </filters>
            <resources>
                <resource>
                    <directory>src/main/templates</directory>
                    <filtering>true</filtering>
                </resource>
            </resources>
        </build>
    </profile>
    <profile>
        <id>h2</id>
        <build>
            <filters>
                <filter>src/main/filters/h2.properties</filter>
            </filters>
            <resources>
                <resource>
                    <directory>src/main/templates</directory>
                    <filtering>true</filtering>
                </resource>
            </resources>
        </build>
    </profile>
</profiles> 
```

你应该能够对你的文件做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:51:19.147

使用 Git 并且仅在您 clense 本地引用时推送到主服务器。

# php - 在通用服务器环境中同时使用 Spring 和 php 的优点

> ID：12051143
> 
> 赞同：6
> 
> 时间：2012-08-21T08:42:30.693
> 
> 标签：php, spring, hibernate, jakarta-ee, jms

我的提议可能听起来很奇怪，但我有我的理由。

很长一段时间以来，我们都有这个基于 Spring 的 API，它起源于 CRUD 功能的抽象 REST 服务集。然而，随着时间的推移，我们开始在顶层构建业务和表示层，直到我们陷入死胡同。不要误会我的意思，Spring/Hibernate 是很棒的框架，构建在 JVM 之上有其明显的优势，包括性能优于 PHP 等其他 Web 技术。与 PHP 相比，它为我们提供了更深入的方式来控制事务、多线程、处理字节数据、控制原生 C++ 应用程序、使用 JNI 等。

堆栈明显碰到硬墙的地方是需求最常更改的地方，即业务和表示层。将应用程序转变为以用户为中心的现代社交应用程序，我们经历了职业生涯中最严峻的挑战。Java EE 表示技术很难使用。此外，由于构建测试和部署大规模 Java 应用程序的传统障碍，改变业务需求变成了一个非常长的周期。

在很大程度上，我们也觉得我们正在尝试重新发明轮子。在 PHP 世界中，已经存在很多项目，它们为您提供了一个完整的管理系统，与任何类型的后端系统无关（将挂钩映射到 REST/SOAP 端点）。他们中的许多人都准备好了所有这些功能，允许管理员友好地更改场景和规则，具有模板等。另外，基于 PHP 意味着绝对不会在构建和部署上浪费时间。编写更改，测试，断言它有效，然后切换。

我们现在的想法是找到一种方法来移动这种基于 PHP 的前端服务器应用程序中的业务和表示层，并将纯后端的东西留给 Spring/Hibernate。不过，由于我们对 Spring 的相对缺乏经验，我们有一些担忧。

1.  如果我们使用 PHP 方法实现业务方法，我们如何保持事务安全？我的意思是，如果一个业务方法必须向 JAVA 发出三个单独的 HTTP 请求，我们如何保证它们都将在同一个事务中执行，DB 明智的？

2.  有没有办法在两个系统之间使用代理或承诺对象？例如，如果 PHP 业务方法需要调用 Spring 搜索方法从数据库中获取对象集合，然后将其传递给另一个 Spring 方法，这将意味着整个集合必须来回发送。也许，可以将它存储在 JAVA 端的会话对象中，然后简单地将空代理发送回前端，前端可以将其返回到另一个 java 方法。

3.  我们很多基于 Spring 的功能依赖于插件结构，使用 Spring 事件。我们如何才能使我们的前端服务器也能在每个发生的 ackend 事件上得到通知。我在这里有两个想法：一个后处理过滤器，它使用一些命名约定简单地向前端服务器上的控制器发出 POST 请求。或者......使用某种消息队列，例如 JMS 或 RabbitMQ，或者为什么不使用像 Reddis 这样的东西，在那里人们可以观察数据的变化

以前有谁这样做过？一般来说，这是一个好主意吗？任何建议如何解决上述问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:07:12.120

这不是您问的问题，但我认为值得一提的是，您在使用 Java 时遇到的一些问题是大多数有经验的 Java 开发人员有一天会遇到的问题，并且大多数人已经找到了解决方案。例如，您可以使用 Arquillian 在 Java 中执行“更快”的 TDD。您可以使用 JRebel 执行“代码和刷新”方法，就像在 PHP 中一样。现代 IDE 还有助于重构，这有助于“需求更改”场景。

当然，表示部分仍然是 Java 的一个大问题。我个人不喜欢 JSF，而且（对我而言）大多数其他表示技术要么不直观，要么很麻烦。

我想说这就是为什么很多 Java 开发人员开始采用 HTML5 和 Javascript（backbone.js、underscore.js、jquery、...）作为前端，而 REST 在后端。中间不需要*PHP*。

恐怕我无法回答您的其他问题，但也许一个好的开始是看看 PHP 是否可以从 Java EE 容器内运行？我知道这适用于 Ruby 和 Python 应用程序，因为 JRuby 和 Jython 会负责这两个世界之间的桥梁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T16:29:23.363

以前没有这样做过，不确定这是否是一个好主意，但这里有一些关于您的问题的想法：

1.  首先，在 PHP 世界中，每个请求（无论是否使用 keep-alive）都作为一个孤立的进程运行，因此这种场景通常是闻所未闻的；可以使用持久的数据库连接，但是当请求完成时，任何未提交的事务都会自动回滚。现在，这就是我对 Spring 的了解不足的地方，因为我不确定只要使用相同的 HTTP 连接，Java 是否可以在请求之间将数据库连接保持在相同的状态；如果是这样，您可以使用 PHP + cURL 在重用网络连接的同时执行三个 HTTP 请求。

2.  PHP 和 Java 之间的对象（取消）编组可能不会很好地工作；集合的表示可能必须以结果标识符的形式进行，PHP 可以通过 REST 获取该结果标识符并作为不透明字符串传递回 Java。

3.  应该注意的是，PHP 请求通常是短暂的，这使其成为水平扩展的良好候选者；因此，很少出现长时间运行的进程，例如用于 Pub/Sub 系统的进程。就我个人而言，我更喜欢使用发送 HTTP 请求的替代方法，以便前端缓存可以从 Java 服务中抽象出来。

当我想到其他任何事情时，我会添加更多，如果我的回答给您带来更多问题，请告诉我:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T18:33:04.330

绝对没有直接的出路。您必须**重新编写**后端控制器层，将 REST 调用公开给 PHP。您需要对一些细粒度的服务进行分组，并使它们成为粗粒度的。

一句忠告——你可以在最后一天通过在这里和那里进行调整、引入队列或其他框架或库等来让事情正常进行——但你也会引入很多[意外的复杂性](http://en.wikipedia.org/wiki/Accidental_complexity)..事情在未来会变得非常糟糕维护，错误修复，升级等

如果关注开发速度，请探索其他替代方案，例如[Play Framework 1.2.x](http://www.playframework.org/)框架，以便您可以按原样重用服务器端代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T04:02:01.050

在很大程度上，您要做的就是我们所说的：[SOFEA](https://stackoverflow.com/questions/817617/what-is-sofea)

在这种情况下，PHP 是您的前端，Java 是您的服务层。

**关注 1**

传统 REST 或 WS 上的事务是 PITA。要么考虑聚合你的服务调用来做更多的工作，以便整个事务都在一个服务调用中，要么让 Java 处理你的前端。否则请参阅Finagle 的*关注点 3 。*

**关注 2**

我建议您保持无状态并使用 REST 或 RCP。这听起来像你关心速度，我认为你不应该担心，直到它出现问题。但是，如果您确实想做基于用户的对象缓存，我会使用 Redis 及其发布/订阅功能（或 RabbitMQ + memcache）。

**关注点 3**

使用 RabbitMQ，或 Redis，或/和 Finagle。

**我的最终意见**

**我认为你不需要 PHP，特别是如果你知道 Java。** 今天的 Web 应用程序世界中的很多东西都在转向 Javascript（在客户端），当有更好的选择（例如 Node.js 或仅使用 Java）时，我认为使用 PHP 服务页面之类的东西没有任何好处。

@jpkrohling 是对的……模板和前端过去常常吸收 Java，但它变得更好了，特别是因为你的大部分 UI 代码无论如何都将使用 Javascript。如果您需要 Java 中更现代的 Web 内容的示例，请查看以下项目：[MWA](https://github.com/jknack/modern-web-app)和同一作者：[Handlebars in Java](https://github.com/jknack/handlebars.java)。

总结一下我的观点并回到 SOFEA：后端 = Java 和前端 = Javascript

# php - 如何在多维数组 PHP 中添加新键并合并数组值

> ID：12051144
> 
> 赞同：0
> 
> 时间：2012-08-21T08:42:30.123
> 
> 标签：php, multidimensional-array, array-merge

这是我的第一个函数的结果：

```
Array
(
[0] => Array
    (
        [MaidID] => 13
        [Stores] => Array
            (
                [0] => 14
                [1] => 5
            )
    )

  [1] => Array
     (
        [MaidID] => 3
        [Stores] => Array
            (
                [0] => 4
            )

    )

[2] => Array
    (
        [MaidID] => 41
        [Stores] => Array
            (
                [0] => 14
            )

    )
 ) 
```

然后，这是我的第二个函数的结果：

```
 Array
 (
 [1] => Array
    (
        [MaidID] => 14
        [Cash] => 10000
        [Debit] => 0
        [Credit] => 0
    )
  ) 
```

这应该是结果：

```
 Array ([0] => Array (

        [MaidID] => 14
        [Cash] => 10000.00
        [Debit] => 0
        [Credit] => 0   
        [MaidsID] => Array(
                       [0] => 13                          
                       [1] => 41
     )
   )
 ) 
```

有可能做到吗？我需要一个新的密钥名称 MaidsID 指向多个商店拥有的 MaidID 列表。请帮助我，请耐心等待我的问题，我只是一个初学者。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:22:44.637

此代码工作正常。$a 是你的第一个数组 $b 是第二个，$c 是结果

$a = array (array('Maid' => 1, 'Stores' => array (1,5) ), array('Maid' => 3, 'Stores' => array (4) ), array('女仆' => 4, '商店' => 数组 (1) ));

$b = array (array('Maid' => 1, 'Cash' => 10000, 'Debit' => 0, 'Credit' => 0));

```
$MaidsID=array();

foreach ($a as $aa ){
    if (count($aa['Stores']>1)){
        array_push($MaidsID, $aa['Maid']);
    }
}
$MaidsID=array('MaidsID' => $MaidsID);

$c = array_merge($b, $MaidsID);` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:18:36.470

我在这里测试过，没问题。（只需将 $a 替换为您的第一个数组，将 $b 替换为 seccond ）。你确定你的数组结构和你上面写的完全一样吗？也许这有什么问题。您已将数组放入另一个数组中？（我认为不需要）

但是：对于此代码：

`$a = array (array('Maid' => 1, 'Stores' => array (1,5)), array('Maid' => 3, 'Stores' => array (4)), array( '女仆' => 4, '商店' => 数组 (1) )); $b = array (array('Maid' => 1, 'Cash' => 10000, 'Debit' => 0, 'Credit' => 0));

```
print_r($a);
echo "<br><br>================================================<br><br>";
print_r($b);
echo "<br><br>================================================<br><br>";

$MaidsID=array();

foreach ($a as $aa ){
    if (count($aa['Stores']>1)){
        array_push($MaidsID, $aa['Maid']);
    }
}
$MaidsID=array('MaidsID' => $MaidsID);

$c = array_merge($b, $MaidsID);

print_r($c);
echo "<br><br>================================================<br><br>";` 
```

输出是：

Array ( [0] => Array ( [Maid] => 1 [Stores] => Array ( [0] => 1 [1] => 5 ) ) [1] => Array ( [Maid] => 3 [ Stores] => Array ( [0] => 4 ) ) [2] => Array ( [Maid] => 4 [Stores] => Array ( [0] => 1 ) ) )

=================================================

数组（[0] => 数组（[女佣] => 1 [现金] => 10000 [借方] => 0 [贷方] => 0））

=================================================

Array ( [0] => Array ( [Maid] => 1 [Cash] => 10000 [Debit] => 0 [Credit] => 0 ) [MaidsID] => Array ( [0] => 1 [1] => 3 [2] => 4))

=================================================

这不就是你想要的结果吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T08:47:03.773

看看这个。也许这可以帮助你。

`$result = array_merge($array1, $array2);`

# java - Incorporating two Java classes into one

> ID：12051149
> 
> 赞同：3
> 
> 时间：2012-08-21T08:42:49.423
> 
> 标签：java, oop, class, inner-classes

I'm new in object-oriented programming and I use Java. I'm stil finding it hard to manipulate through the classes using generics and stuff. As a practice, I looked for codes in the internet and my colleague suggested me a program that came from [this site](http://www.codeforge.com/read/147427/Term.java__html).

This is the first class:

```
import java.awt.Color;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Label;
import java.awt.TextField;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowListener;
import java.util.ArrayList;
import java.util.StringTokenizer;
import java.util.Vector;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

public class quine extends JFrame implements ActionListener, WindowListener{
        /**
     * 
     */
    private static final long serialVersionUID = 1L;
        static ArrayList<Term>[][] table=new ArrayList[5][5];                   // SERVES AS OUR STORAGE FOR ARRANGING TERMS AND TO OUR RESULTING TERMS THAT ARE BEING COMPARED.
        static Vector<String> inputTerm= new Vector <String>();                 // STORES OUR ORIGINAL INPUT/NUMBERS
        static Vector<String> resultingTerms= new Vector <String>();            // STORES RESULTING TERMS FOR EACH SET OF COMPARISON
        static int var=0;                                                       //NUMBER OF VARIABLE
        static int numbers=0;                                                   //NUMBER OF INPUTS
        final static int maxTerms=1000;                                         //MAXIMUM NUMBER OF TERMS WITH SAME NUMBER OF 1'S
        static TextField result = new TextField("  ",50);
        static TextField text;
        static TextField text1;
        static quine  qWindow;
        static String finalT = "";

        public static void main(String[] args){
            qWindow = new quine("Quine-McCluskey Simulator");                   //creates a window
            qWindow.setSize(400,250);                                           //sets the size of the window
            qWindow.setVisible(true);                                           //makes the window visible
            qWindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE );            //CLOSES THE WINDOW WHEN CLOSING OR CLICKING THE X BUTTON

            JOptionPane.showMessageDialog(null, "Welcome to my Quine-McCluskey Simulator!"); //DISPLAYS MESSAGE
        }//end main

        public static int count_one(String temp){   //COUNT 1'S FROM EACH TERM

            int count=0;
            char[] tempArray=temp.toCharArray();
            int i=0;
            while(i<temp.length()){
                if(tempArray[i]=='1'){
                    count++;
                }
                i++;
            }//end while
            return count;
        }//end one

        public static void getPrimeImplicants(){                // PAIRS TERMS UNTIL NOTHING TO PAIR, END TERMS ARE OUR PRIME IMPLICANTS
            table=createTermTable(inputTerm);
            printTermTable();
            createPairing();

        }

        public static ArrayList<Term>[][] createTermTable(Vector <String> input){   // CREATE TABLE, ARRANGES TERMS BASED ON THE NUMBER OF 1'S IN 
                                                                                   //EACH TERM USING count_one,therefore, row 1 contains terms with 1 1 bit.
            Term temp;
            int one=0;
            int element=0;
            ArrayList[][] arrayLists = new ArrayList[var+1][maxTerms+1];            //CREATES AN ARRAY WITH VAR ROWS CORRESPONDING TO POSSIBLE NUMBER OF
                                                                                    // 1 FOR EACH TERM AND 1000 COLUMNS
            ArrayList<Term> [][]tempTable = arrayLists;
            for(int x=0;x<=var;x++){                                                //?
                for(int y=0;y<=maxTerms;y++){
                    tempTable[x][y]= new ArrayList<Term>();
                }//end y
            }//end for x

            for(int i=0;i<input.size();i++){
                one=count_one(input.get(i));                             //COUNT 1'S FROM EACH TERM
                temp=initTerm(input.get(i),false);                     // INITIALIZE PROPERTIES OF THAT TERM

                while(!tempTable[one][element].isEmpty()){
                    element++;
                }//end while

                tempTable[one][element].add(temp);
                element=0;
            }   //end for

            return tempTable;
        }//end createTermTable

        public static Term initTerm(String n,boolean u){                    //INITIALIZE USED and NUM PROPERTY OF THE TERM
            Term term=new Term();
            term.used=u;                                                    // TO INDICATE IF THE TERM IS ALREADY PAIRED
            term.num=n;                                                     // THE TERM ITSELF
            return term;
        }//end initTerm

        public static void printTermTable(){                                // PRINTS THE COMPUTATION/TABLES
            System.out.println("\nCOMPUTING:");
            for(int i=0;i<var+1;i++){
                System.out.print(i);
                System.out.println("    --------------------------------------------");
                for(int j=0;!table[i][j].isEmpty();j++){                    //PRINTS TERM ON EACH ROW WHILE TERM IS NOT EMPTY
                    System.out.println(table[i][j].get(0).num);
                }//end for j
            }//end for i

        }

        public static void createPairing(){                             //PAIRS A TERM TO EACH TERM ON THE NEXT ROW
            int finalterms=0;
            String term_num="";
            int found=0;
            Vector<String> preResult= new Vector<String>();
            for(int x=0;x<=var-1;x++){                                  // REPEATS PAIRING OF A TERMS OF THE TABLE VAR TIMES TO MAKE SURE WHAT ARE LEFT ARE PRIME IMPLICANTS
                preResult=new Vector<String>();                         // STORES THE RESULTING TERMS FOR EACH SET OF PAIRING
                for(int i=0;i<=var;i++){                            //COMPARES A ROW WITH EACH TERMS ON THE NEXT ROW
                    //Vector <String> rowResult= new Vector<String>();  //STORES RESULTING TERMS ON THAT PARTICULAR TERM OF THE ROW. THIS IS TO AVOID REPETITIONS
                    for(int j=0;!table[i][j].isEmpty();j++){            // TERM ON THE  ROW BEING COMPARED WITH EACH TERM ON NEXT ROW
                        if(i+1!=var+1)                                  // MAKES SURE THAT THE PROCESS NOT EXCEEDS THE ARRAYBOUND
                        for(int k=0;!table[i+1][k].isEmpty();k++){      //TERM ON THE NEXT ROW THAT IS BEING COMPARED WITH TERM ON THE CURRENT ROW.
                            term_num=pair(table[i][j].get(0).num,table[i+1][k].get(0).num); //ASSIGNS RESULT OF PAIRING TO term_num

                            if(term_num!=null){                         // IF PAIRING IS SUCCESSFUL
                                table[i+1][k].get(0).used=true;         // TERM IS PAIRED/USED
                                /*if(!rowResult.contains(term_num)){    //MAKES SURE THAT TERM IS NOT REPEATE
                                    rowResult.add(term_num);
                                    found=1;
                                }
                                */
                                if(!preResult.contains(term_num)){          // MAKES SURE THAT TERM IS NOT REPEATED
                                    preResult.add(term_num);
                                    found=1;
                                    finalterms++;                           // COUNTS THE FINAL/RESULTING TERMS FOR THIS SET OF PAIRING
                                }//end if !resultingTerms
                                found=1;
                            }//end if term_num!=null
                        }//end for k
                        if(found==0){                                       // IF TERM IS NOT SUCCESSFULLY PAIRED/USED, ADD TO THE RESULTING TERMS FOR THIS SET
                            if(table[i][j].get(0).used!=true){     
                                preResult.add(table[i][j].get(0).num);
                            }
                        }
                        found=0;
                    }//end for j

                }//end for i
                table=createTermTable(preResult);                               // CREATE ANOTHER TABLE FOR NEXT SET. THE NEW TABLE CONTAINS THE RESULTING TERMS OF THIS SET
                if(preResult.size()!=0)
                    resultingTerms=preResult;                                 //IF THE ARE RESULTING TERMS, THEN PRINT AND ASSIGN TO resultingterms. THE END VALUE OF resultingterms WILL BE SIMPLIFIED
                printTermTable();
            }//end for x

        }//end createPairing

        public static String pair(String a,String b){
            int difference=-1;
            char []array1 = new char[a.length()];                           
            char []array2;
            for(int i=0;i<var;i++){
                array1=a.toCharArray();                                     //CONVERTS TERMS OF TYPE STRING TO TERMS OF TYPE CHAR
                array2=b.toCharArray();
                if(array1[i]!=array2[i]){                                  // IF NOT EQUAL FOR A PARTICULAR CHARACTER FOR THE FIRST TIME, THEN GET THE INDEX CORRESPONDING TO THAT CHARACTER.
                    if(difference==-1)
                        difference=i;
                    else                                                     //IF NOT NOT EQUAL FOR THE FIRST TIME, THEN THE TERMS DIFFER IN MORE THAN 1 PLACE
                        return null;
                }//end if
            }//end for

            if(difference==-1)                                             //THE TERMS ARE INDENTICAL, RETURN NULL, PAIRING UNSUCCESSFUL
                return null;

            char[] result= a.toCharArray();                                //CHARACTER CORRESPONDING TO THE INDEX WHERE TERMS DIFFER ONLY ONCE WILL BE CHANGED TO '-' 
            result[difference]='-';
            String resulTerm= new String(result);
            return resulTerm;                                              //RETURNS THE MODIFIED TERM, PAIRING SUCCESSFUL
        }//end pair

        public static void simplifymore(){                                 //SIMPLIFY THE RESULTINGTERMS
            int primes=resultingTerms.size();                           // RESULTING TERMS CORRESPOND TO OUR PRIME IMPLICANTS
            int[][] s_table= new int[primes][numbers];                   //CREATES A TABLE WITH ROWS EQUAL TO NUMBER OF PRIME IMPLICANTS AND COLUMNS EQUAL TO THE NUMBER OF THE ORIGINAL INPUT
            for(int i=0;i<primes;i++){
                for(int j=0;j<numbers;j++){
                    s_table[i][j]=implies(resultingTerms.get(i),inputTerm.get(j));  
                }//end for j
            }//end for i

            Vector <String> finalTerms= new Vector<String>();               // STORES THE FINALTERMS
            int finished=0;
            int index=0;
            while(finished==0){                                             //UNTIL ALL ELEMENTS ARE NOW TURNED TO 0
                index=essentialImplicant(s_table);
                if(index!=-1)
                    finalTerms.add(resultingTerms.get(index));              // IF RESULTING TERM IS THE ONLY ONE IMPLYING THE CURRENT ORIGINAL TERM, THEN ADD TO FINAL TERMS
                else{                                                       // THOSE THAT HAVE MORE THAN ONE IMPLICATION FOR A PARTICULAR ORIGINAL TERM
                    index=largestImplicant(s_table);
                    if(index!=-1)
                        finalTerms.add(resultingTerms.get(index));          //ADD TO FINAL TERMS IF LARGEST IMPLICANT(ONE WHICH HAS MORE NUMBER OF 1'S. SEE COMMENTS ON largestImplicant.
                    else
                        finished=1;                                         //IF INDEX IS -1 THEN ALL ELEMENTS HAVE ALREADY BEEN DELETED OR HAVE MADE VALUE 0
                }//end else
            }//end while finished
            System.out.println("Final Terms :");
            for(int x=0;x<finalTerms.size();x++)                            //PRINTS THE FINAL TERMS IN BINARY FORMAT
                System.out.println(finalTerms.get(x));

            printSimplified(finalTerms);
        }//end simplifymore

        public static void printSimplified(Vector <String> finalTerms){
            String temp="";
            char[] tempArray;
            char variables[]= {'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'};   //basis for our variables to printed
            int index=0;
            int i=0;
            int j=0;
            System.out.print("F = ");
            while(i<finalTerms.size()){                                 //until all final terms are printed in algebraic form.

                temp=finalTerms.get(i);                                 //assigns current final term to temp
                tempArray=temp.toCharArray();                           //CONVERTS TEMP TO ARRAY

                while(j<var){
                    if(tempArray[j]=='-'){                              //IGNORES -
                        index++;
                    }
                    else if (tempArray[j]=='0'){
                        finalT+=variables[26-var+index]+"'";  // PRINTS THE CORRESPONDING LETTER.IF CHARACTER IS 0 THEN APPEND ' AFTER THE VARIABLE

                        index++;
                    }
                    else if (tempArray[j]=='1'){
                        finalT+=variables[26-var+index];     // PRINTS CORRESPONDING LETTER
                        index++;
                    }
                    else{};
                    j++;
                }//end while

                if(i<finalTerms.size()-1)
                    finalT+=" + ";                          // APPENDS +
                i++;
                temp="";
                j=0;
                index=0;
            }//end while
            System.out.println(finalT);
        }//print simplified

        public static int essentialImplicant(int[][] s_table){              // CHECKS EACH RESULTING TERM IMPLYING A PARTICULAR ORIGINAL TERM
            for(int i=0;i<s_table[0].length;i++){ // 
                int lastImplFound=-1;
                for(int impl=0;impl<s_table.length;impl++){
                    if(s_table[impl][i]==1){                                //IF RESULTING TERM IMPLIES ORIGINAL TERM
                        if(lastImplFound==-1){                              
                            lastImplFound=impl;
                        }else{                                          // IF MORE THAN ONE IMPLICATION,THEN IT IS NOT AN ESSENTIAL PRIME IMPLICANT.GO TO NEXT ORIGINAL TERM
                            lastImplFound=-1;
                            break;
                        }//end else
                    }
                }
                if(lastImplFound!=-1){                              // ONE IMPLICATION FOR THE ORIGINAL TERM. THIS IS AN ESSENTIAL PRIME IMPLICANT
                    implicant(s_table,lastImplFound);
                    return lastImplFound;
                }
            }//end for impl
            return -1;
        }

        public static void implicant(int [][] s_table,int impA){   // DELETE OR MAKE VALUE 0 THE ROW WHERE THE ESSENTIAL PRIME IMPLICANT IS AND THE COLUMNS OF ALL THE ORIGINAL TERMS IMPLIED BY IT
            for(int i=0;i<s_table[0].length;i++){
                if(s_table[impA][i]==1)
                    for(int impB=0;impB<s_table.length;impB++){
                        s_table[impB][i]=0;
                    }
            }
        }//end implicant

        public static int largestImplicant(int[][] s_table){
            int maxImp=-1;
            int max=0;
            for(int imp=0;imp<s_table.length;imp++){            // LOCATES WHICH HAS MORE NUMBER OF 1'C IN EACH PRIME
                int num=0;
                for(int i=0;i<s_table[0].length;i++){
                    if(s_table[imp][i]==1)
                        num++;
                }//end for i
                if(num>max){                            // TERM WITH MORE 1'S AT THE END OF THE LOOP WILL BE ADDED TO THE FINAL TERMS
                    max=num;
                    maxImp=imp;
                }//end if num>max
            }//end for imp

            if(maxImp!=-1){                             // IF WE HAVE SUCCESSFULLY LOCATED A PRIME IMPLICANT
                implicant(s_table,maxImp);              // DELETE OR MAKE VALUE 0 THE ROW WHERE THE ESSENTIAL PRIME IMPLICANT IS AND THE COLUMNS OF ALL THE ORIGINAL TERMS IMPLIED BY IT
                return maxImp;
            }//end if maxImp!=-1
            return -1;
        }   

        public static int implies(String term1, String term2){    // RETURNS 1 IF RESULTING TERM IMPLIES THE ORIGINAL TERM, 0 OTHERWISE
            char[] term1Array=term1.toCharArray();
            char[] term2Array=term2.toCharArray();
                                                                //EX. ORG TERM IS 100100, RES TERM IS 1--10- ,RESULTING TERM IMPLIES THE ORIGINAL TERM. SINCE - HERE IS TREATED AS 0 OR 1
            for(int i=0;i<var;i++){
                if(term1Array[i]!=term2Array[i] && term1Array[i]!='-') 
                    return 0;
            }

            return 1;
        }

//end class

        public quine(String name){
            super(name);                                            //ASSIGNS LABEL OF THE WINDOW
            setLayout(new GridLayout(1, 1));                        //SETS THE LAYOUT       
            setLocation(350,200);                                   //SETS THE LOCATION OF THE WINDOW ON THE SCREEN
            GridBagLayout gridbag = new GridBagLayout();        //used to align buttons
            GridBagConstraints constraints = new GridBagConstraints();//to specify the size and position for the gridbaglayout
            setLayout(gridbag);
            constraints.weighty = 1;                                //distributes spaces among columns
            constraints.weightx = 1;                                //distributes spaces among rows
            constraints.gridwidth = GridBagConstraints.REMAINDER;   //to specify that the component be the last one in its column

            Label label1 = new Label("     How many variables does the function have?");        //CREATES A LABEL
            label1.setVisible(true);                                            //MAKES THE LABEL VISIBLE, ASSIGNS NEW FONT AND COLOR THEN ADD TO THE WINDOW
            label1.setFont(new Font("Sans Serif", Font.BOLD, 12));
            label1.setBackground(Color.CYAN);
            add(label1);

            text1= new TextField("",10);
            gridbag.setConstraints(text1,constraints);                              //applies constraints to text
            text1.setEditable(true);                                                //SO THAT WE COULD STILL HAVE AN UNLIMITED LENGTH OF INPUT
            text1.setForeground(Color.black);
            text1.setBackground(Color.white);
            text1.setVisible(true);
            text1.addActionListener(this);                                          //ACTIVATES ACTIONLISTENER FOR THIS FIELD
            add(text1);

            label1 = new Label(" Please list all the minterms that evaluates to 1:");//CREATES LABEL
            gridbag.setConstraints(label1,constraints);
            label1.setVisible(true);                                                //MAKES THE LABEL VISIBLE, ASSIGNS NEW FONT AND COLOR THEN ADD TO THE WINDOW
            label1.setBackground(Color.green);label1.setFont(new Font("Sans Serif", Font.BOLD, 12));
            label1.setBackground(Color.CYAN);
            add(label1);

            text = new TextField("Enter your numbers here separated by a comma",50);
            gridbag.setConstraints(text,constraints);               //applies constraints to text
            text.setEditable(true);                                 //ENABLES UNLIMITED LENGTH OF INPUT
            text.setForeground(Color.black);
            text.setBackground(Color.white);
            text.setVisible(true);
            text.addActionListener(this);                   //ACTIVATES ACTIONLISTENER FOR THIS FIELD
            text.setForeground(Color.blue);
            add(text);

            JButton enter = new JButton ("Enter");          // CREATES BUTTON NAMED Enter
            enter.setVisible(true);                         //MAKES IT VISIBLE, APPLIES THE CONSTRAINTS, AND ADD TO THE WINDOW
            add(enter);
            enter.setBackground(Color.green);
            enter.addActionListener(this);                  //ACTIVATES ACTIONLISTENER
            gridbag.setConstraints(enter,constraints);

            JButton reset = new JButton ("Reset");          // CREATES BUTTON NAMED Reset
            reset.setVisible(true);                         //MAKES IT VISIBLE, APPLIES THE CONSTRAINTS, AND ADD TO THE WINDOW
            gridbag.setConstraints(reset,constraints);
            reset.setBackground(Color.green);
            add(reset);
            reset.addActionListener(this);  

            label1 = new Label(" Result:");
            gridbag.setConstraints(label1,constraints);
            label1.setVisible(true);
            label1.setBackground(Color.cyan);
            label1.setFont(new Font("Sans Serif", Font.BOLD, 12));
            label1.setBackground(Color.CYAN);
            add(label1);

            result = new TextField(" ",50);
            gridbag.setConstraints(result,constraints);             //applies constraints to text
            result.setEditable(true);
            result.setForeground(Color.black);
            result.setBackground(Color.white);
            result.setVisible(true);
            add(result);

        }

        public void actionPerformed(ActionEvent e) {
            String stringInput="";
            String numOfVar="";
            String temp="";
            String temp1="";
            int num=0;

            if(e.getActionCommand() == "Enter"){                    // IF Enter BUTTON IS CLICKED
                stringInput = text.getText();                       // GETS STRING INPUT FROM TEXT(MINTERMS) 
                numOfVar = text1.getText();                         //GETS STRING INPUT FROM TEXT1(VARIABLES)
                var = Integer.parseInt(numOfVar);                   //CONVERTS numOfVar TO INTEGER
                StringTokenizer token= new StringTokenizer(stringInput," ,"); //TOKENIZE INPUT. ELIMINATE ALL COMMAS AND SPACES
                while(token.hasMoreTokens()){                           //WHILE THERE ARE MORE TOKENS
                    temp1=token.nextToken();                        //GETS TOKEN
                    numbers++;                                          //COUNTS THE NUMBER OF INPUTS
                    num=Integer.parseInt(temp1);                    //CONVERT INPUT TO INTEGER
                    temp=Integer.toBinaryString(num);               //CONVERTS INTEGER FORM OF INPUT TO BINARY IN ITS PROPER LENGTH BASED ON THE NUMBER OF VARIABLES GIVEN
                    if(temp.length()!=var){                     
                        while(temp.length()!=var){
                            temp="0"+temp;
                    }
                    }
                    inputTerm.add(temp);                            //ADDS RESULT(BINARY FORM) TO inputTerm

                }//end while
                getPrimeImplicants();                                   //GET PRIMEIMPLICANTS
                simplifymore();                                         // SIMPLIFY MORE    
                result.setText(finalT);                                 // DISPLAYS THE RESULT (SIMPLIFIED) TO RESULT TEXTFIELD

            }//end if

            if(e.getActionCommand()== "Reset"){                 //RESETS THE VALUES FOR NEXT SET OF INPUTS
                var=0;
                table=new ArrayList[5][5];                      // SERVES AS OUR STORAGE FOR ARRANGING TERMS AND TO OUR RESULTING TERMS THAT ARE BEING COMPARED.
                inputTerm= new Vector <String>();               // STORES OUR ORIGINAL INPUT/NUMBERS
                resultingTerms= new Vector <String>();          //STORES THE RESULTING TERMS FOR EACH COMPUTATION
                finalT="";                                      //STORES THE FINAL TERMS IN THEIR ALGEBRAIC FORM
                numbers=0;                                      //COUNTS THE NUMBER OF INPUTS FROM THE USER
                text.setText("");                               //ERASE THE TEXTS DISPLAYED ON THE TEXT FIELDS
                text1.setText("");
                result.setText("");
            }   
        }

        public void windowActivated(WindowEvent e) {}
        public void windowClosed(WindowEvent e) {qWindow.setVisible(false);}    //CLOSES THE WINDOW AFTER PROGRAMS STOPS RUNNING
        public void windowClosing(WindowEvent e) {}
        public void windowDeactivated(WindowEvent e) {}
        public void windowDeiconified(WindowEvent e) {}
        public void windowIconified(WindowEvent e) {}
        public void windowOpened(WindowEvent e) {}

}//end class 
```

And this is the second class. Funny (it only consists of less than 10 lines unlike the first one)

```
public class Term {
        public String num;

        public boolean used;

} 
```

Can you please help me incorporate these two classes into one (if that's possible)? I tried declaring `String num` and `boolean used` inside the first class and removed the `Term` but it shows lot of errors. I tried separating the `initTerm` method into two: one returns a string and the other boolean. But it adds error. What else can I do? Can you also advise me some techniques in doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:45:40.863

You can put the whole class inside `quine` so that `Term` becomes an [inner class](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html) of `quine`. The class `Term` is then visible to the code in `quine` and you don't need a separate file anymore for the class `Term`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:47:49.227

1) Don't declare variables as public unless they are static. It's standard practise to use getter/setter methods to access member variables.

2) Have you tried creating a super class that extends JFrame then get quine to extend that class. Add getter/setters in the super class. Then the sub class can access them via getVariable() etc etc.

3) Class names should start with an upper case letter. Variables, methods and package names should all be lower case.

# excel - VBA 复制给我一个 400 错误

> ID：12051150
> 
> 赞同：0
> 
> 时间：2012-08-21T08:42:52.670
> 
> 标签：excel, vba

我让它工作得很好，然后由于我不知道的原因，它现在产生了 400 错误：

```
Set ws = Sheets("Overview")

         LastCol = ws.Cells.Find(What:="*", _
            After:=ws.Range("A1"), _
            LookAt:=xlPart, _
            LookIn:=xlFormulas, _
            SearchOrder:=xlByColumns, _
            SearchDirection:=xlPrevious, _
            MatchCase:=False).Column

           ws.Columns(LastCol).Copy ws.Columns(LastCol + 1) 
```

复制部分工作正常，但似乎失败的地方是将它复制到新列，我不知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:13:04.480

我建议这样做而不是复制。此处无需涉及剪贴板：

```
 ws.Columns(LastCol + 1).value = ws.Columns(LastCol).Value 
```

# sparql - 获取时间间隔

> ID：12051151
> 
> 赞同：1
> 
> 时间：2012-08-21T08:42:56.383
> 
> 标签：sparql

抱歉，如果以前有人问过这个问题，但这似乎是一个显而易见的问题，我似乎无法找到可行的解决方案。我已将一些数据加载到 Fuseki 中，其中包含包含 xsd:date 信息的语句。我写了一个查询来提取这些日期，我想找到两个特定日期之间的持续时间（以天为单位）。一个缩减的查询如下所示。

```
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX abc: <http://www.acme.com/ABC/1.0/abc-schema#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT ?entry
(date1 - date2) AS ?interval)
WHERE
{
    # Not the real query but you get the idea
    ?entry a abc:thing ;
        abc:abcDateType1 ?date1 ;
        abc:abcDateType2 ?date2 .
} 
```

?interval 计算正确，似乎是 xsd:duration 数据类型的形式，我的问题是如何提取它包含的天数？或者，是否有更好的（标准）方法来做到这一点。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T12:34:34.797

您将需要使用 XSD 持续时间的词法。很可能是“PD....”的形式

答案应该是调用 fn:days-from-duration 或该函数的关键字，但目前不在标准发行版中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T18:32:00.560

一种方法是抽象地添加与日期相关的 unix 样式时间戳：

?blankNode eg:hasDate ?date ?blankNode eg:hasEpoch ?epoch

然后你可以很容易地从另一天减去一天的时间戳，然后除以 86400 得到当天的答案，例如：

```
SELECT ?entry
((?time1 - ?time2)/86400) AS ?interval)
WHERE
{
    # Not the real query but you get the idea
    ?entry a abc:thing ;
        abc:abcDateType1 ?date1 ;
        abc:abcDateType2 ?date2 .

    ?blankNode1 hasDate ?date1 .
    ?blankNode1 hasTime ?time1 .
    ?blankNode2 hasDate ?date1 .
    ?blankNode2 hasTime ?time1 .
} 
```

# ios - 在精灵移动时跟踪它的身体位置

> ID：12051156
> 
> 赞同：0
> 
> 时间：2012-08-21T08:43:21.657
> 
> 标签：ios, cocos2d-iphone, box2d, box2d-iphone

这听起来可能很简单。我想仅在它被 mouseJoint 移动之后才跟踪精灵主体的位置，因此我可以通过将它的位置（在释放 mouseJoint 后的任何给定时间）与给定位置进行比较来限制它的移动。请帮忙。

**更新**

这就是我所做的。我创建了一个返回精灵位置的方法，我在 ccTouchesEnded 方法中调用了它：

```
- (CGPoint)spritePositionRelease    {

for(b2Body *b = mouseJoint->GetBodyB(); b; b=b->GetNext())    {
    if (b->GetUserData() != NULL)
    {
        CCSprite *mySprite = (CCSprite*)b->GetUserData();
        if (mySprite.tag == 1) {
            mySprite.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
            spritePosition = mySprite.position;
            CCLOG(@"the sprite position is x:%0.2f , y:%0.2f", spritePosition.x, spritePosition.y);

            return spritePosition;
        }
    }
}
} 
```

ccTouchesEnd:

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

if (mouseJoint)
{
    [self spritePositionRelease];
    world->DestroyJoint(mouseJoint);
    mouseJoint = NULL;
}
} 
```

在 tick 方法中，我添加了以下代码：

```
 for(b2Body *b = world->GetBodyList(); b; b=b->GetNext())    {
        if (b->GetUserData() != NULL)
        {
            CCSprite *mySprite = (CCSprite*)b->GetUserData();
            if (mySprite.tag == 1) {
                mySprite.position = CGPointMake( b->GetPosition().x * PTM_RATIO, b->GetPosition().y * PTM_RATIO);
                CGPoint spriteCurrentPosition = mySprite.position;

                if ( spritePosition.x != spriteCurrentPosition.x && 
                     spritePosition.y == spriteCurrentPosition.y) {
                    CCLOG(@"the sprite limit for y is y:%0.2f has been reached",  spriteCurrentPosition.y);
                }
            }
        }
    } 
```

我在 HelloWorldLayer.h 类中初始化了 spritePosition。我知道我做错了什么。我不认为我在 tick 方法中访问的 spritePosition 与 ccTouchesEnded 方法中的 spritePosition 具有相同的值，因此 tick 方法中的条件永远不会得到满足。我不知道如何纠正这个问题。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:14:31.003

您可以使用`ccpdistance(X2 , X1);`来查找两点之间的距离。从那个距离你可以限制精灵可以移动的范围。

# asp.net-mvc-3 - 如何在 Telerik 网格中实现排序？

> ID：12051163
> 
> 赞同：0
> 
> 时间：2012-08-21T08:43:42.030
> 
> 标签：asp.net-mvc-3, razor, telerik-grid

我想按 3 列对 Telerik 网格进行排序，例如按 id、按 pid、按 perc。如何在 Telerik 控制上下订单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:52:57.933

您需要在[Sortable](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-sorting.html)方法参数上使用 OrderBy 方法：

```
<%= Html.Telerik().Grid(Model)
        .Name("Grid")
        .Sortable(sorting => sorting
            .Enabled(true)
            .SortMode(GridSortMode.MultipleColumn)
            .OrderBy(sortOrder => 
                { 
                    sortOrder.Add(o => o.id);
                    sortOrder.Add(o => o.pid);
                    sortOrder.Add(o => o.perc);
                }))
%> 
```

# jsf-2 - f:ajax 中的 JSF 对组件进行分组

> ID：12051165
> 
> 赞同：3
> 
> 时间：2012-08-21T08:43:48.180
> 
> 标签：jsf-2, primefaces, onblur

我有一个 JSF 页面通过 ui:include -affordability.xhtml 加载到主页中。我的问题是第一次加载页面时不会触发 f:ajax onblur 事件。如果我刷新页面，则 ajax onblur 事件会正常触发。

问题是否与 f:ajax 标记在首次加载时找不到执行标记中列出的组件这一事实有关？我没有收到任何 js 错误或抛出 java/jsf 异常。
根据 Java EE 6 文档，可以在 f:ajax 标记内对组件进行分组。

另一个奇怪的问题是输入组件都保持焦点，即您可以单击多个输入框并且它们都保持在“焦点”中。

在下图中，我“选择”了 6 个输入框。 ![在此处输入图像描述](../Images/c95fb36b4a73a6817b00f9fe7b4194a5.png)

负担能力.xhtml 如下所示：

```
 <h:panelGrid columns="2" style="font-size: 80%" id="incomePanel">
            <f:facet name="header"><h:outputText value="Income"/></f:facet>

            <f:ajax event="blur" execute="netSalary otherSalary" render="totalIncome affordabilityBreakdown">
                <h:outputText value="Net salary as per Payslip"/>
                <p:inputText id="netSalary" style="width:250px;" value="#{campaignBean.validBatchLead.lead.leadAffordability.incNetSalary}" required="true" requiredMessage="Please enter the Net Salary"/>                    

                <h:outputText value="Other"/>
                <p:inputText id="otherSalary" style="width:250px;" value="#{campaignBean.validBatchLead.lead.leadAffordability.incOther}" required="false"/>

                <h:outputText value="Total" style="font-weight: bold; float: right"/>
                <h:outputText id="totalIncome" value="#{campaignBean.validBatchLead.lead.leadAffordability.declaredIncome}">
                    <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
                </h:outputText>
            </f:ajax>

        </h:panelGrid>

        <h:panelGrid columns="2" style="font-size: 80%; border: 1px dashed lightgray" id="affordabilityBreakdown">

            <h:outputText value="Provisional Calculation" style="font-weight: bold;"/>
            <h:outputText value="#{campaignBean.validBatchLead.lead.leadAffordability.provisional}">
                <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
            </h:outputText> 

            <h:outputText value="Projected Expenses" style="font-weight: bold;"/>
            <h:outputText value="#{campaignBean.validBatchLead.lead.leadAffordability.projectedExpenses}">
                <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
            </h:outputText>                

            <h:outputText value="Disposable Income" style="font-weight: bold; background: #EE0000;"/>
            <h:outputText value="#{campaignBean.validBatchLead.lead.leadAffordability.disposableIncome}" 
                          style="font-weight: bold; background: #EE0000">
                <f:convertNumber minFractionDigits="2" maxFractionDigits="2"/>
            </h:outputText>
        </h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-10T06:18:55.127

页面加载时尝试使用 onblur 事件做什么？填充字段的目的是什么？如果是这样，您可以改用 <f:event type="preRenderView ... > 吗？

例如，将其添加到页面：

```
<body>
    <ui:define name="metadata">
        <f:view>
            <f:metadata>
                <f:event type="preRenderView" listener="#{campaignBean.init}" />
            </f:metadata>
        </f:view>
    </ui:define>

<ui:composition template ="... 
```

然后，您在 CampaignBean 的“init”方法中填充字段（假设这是您的托管 bean）。但是，如果不告诉我们您要做什么，要提供帮助并不容易。如果不是这样，其他人有想法吗？:)

# java - 测试 Web 服务时出现强制转换异常

> ID：12051166
> 
> 赞同：0
> 
> 时间：2012-08-21T08:43:51.713
> 
> 标签：java, web-services, wsdl

我是 Java Web 服务的新手，在过去的 4 天里我一直被这个问题困扰。问题来了，我打算创建 Web 服务以供其他应用程序使用。要求是 Web 服务必须从表中返回多条记录，所以我创建了一个示例 Web 服务，这是代码

界面

```
@WebService 
@SOAPBinding(style = Style.DOCUMENT)
public interface TestClassInt {

/**
 * @param args
 */

@WebMethod
SampleClass[] getCaseId (String country);
} 
```

具有两个字符串对象的自定义类

```
public class SampleClass {
protected String caseid;
protected String dummy;

public SampleClass(){
    super();
}
public SampleClass(String caseid,String dummy){
    this.caseid=caseid;
    this.dummy=dummy;
}
public String getDummy() {
    return dummy;
}

public void setDummy(String dummy) {
    this.dummy = dummy;
}

public String getCaseid() {
    return caseid;
}

public void setCaseid(String caseid) {
    this.caseid = caseid;
}
} 
```

这是实现

```
@WebService(endpointInterface = "com.org.ccb.test.TestClassInt")
public class TestClassImpl implements TestClassInt {

public SampleClass[] getCaseId(String country) {
    // TODO Auto-generated method stub
    System.out.println("Console " + country);
    SampleClass tempSc[] = new SampleClass[2];
    tempSc[0]=new SampleClass();
    tempSc[1]=new SampleClass();
    tempSc[0].setCaseid(country);
    tempSc[0].setDummy(country);
    tempSc[1].setCaseid(country);
    tempSc[1].setDummy(country);
    return tempSc;
}

} 
```

使用 JBoss Developer Studio 生成的 WSDL 是

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name="TestClassImplService targetNamespace="http://test.ccb.org.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://test.ccb.org.com/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
<wsdl:types>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://test.ccb.org.com/" targetNamespace="http://test.ccb.org.com/" version="1.0">
<xs:element name="getCaseId" type="tns:getCaseId"/>
<xs:element name="getCaseIdResponse" type="tns:getCaseIdResponse"/>
<xs:complexType name="getCaseId">
<xs:sequence>
<xs:element minOccurs="0" name="arg0" type="xs:string"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="getCaseIdResponse">
<xs:sequence>
<xs:element maxOccurs="unbounded" name="sampleClass" type="tns:sampleClass"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="sampleClass">
<xs:sequence>
<xs:element maxOccurs="1" name="caseid" type="xs:string"/>
<xs:element maxOccurs="1" name="dummy" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:schema>
</wsdl:types>
<wsdl:message name="getCaseIdResponse">
<wsdl:part name="parameters" element="tns:getCaseIdResponse">
</wsdl:part>
</wsdl:message>
<wsdl:message name="getCaseId">
<wsdl:part name="parameters" element="tns:getCaseId">
</wsdl:part>
</wsdl:message>
<wsdl:portType name="TestClassInt">
<wsdl:operation name="getCaseId">
  <wsdl:input name="getCaseId" message="tns:getCaseId">
</wsdl:input>
  <wsdl:output name="getCaseIdResponse" message="tns:getCaseIdResponse">
</wsdl:output>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="TestClassImplServiceSoapBinding" type="tns:TestClassInt">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="getCaseId">
  <soap:operation soapAction="" style="document"/>
  <wsdl:input name="getCaseId">
    <soap:body use="literal"/>
  </wsdl:input>
  <wsdl:output name="getCaseIdResponse">
    <soap:body use="literal"/>
  </wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="TestClassImplService">
<wsdl:port name="TestClassImplPort" binding="tns:TestClassImplServiceSoapBinding">
  <soap:address location="http://localhost:8080/rc_ccb/TestClass"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

当给定一个 SOAP 请求时，我得到了强制转换异常 **[Lcom.org.ccb.test.SampleClass; 不能转换为 com.org.ccb.test.SampleClass**

对于从 Web 服务获取对象数组，以下是 WSDL 定义对吗？

```
<xs:complexType name="getCaseIdResponse">  
<xs:sequence>  
<xs:element maxOccurs="unbounded" name="sampleClass" type="tns:sampleClass"/>  
</xs:sequence>  
</xs:complexType>  
<xs:complexType name="sampleClass">  
<xs:sequence>  
<xs:element maxOccurs="1" name="caseid" type="xs:string"/>  
<xs:element maxOccurs="1" name="dummy" type="xs:string"/>  
</xs:sequence>  
</xs:complexType> 
```

服务器：JBoss eap 5.1

任何的想法？

堆栈跟踪

```
14:31:46,743 WARNING [PhaseInterceptorChain] Interceptor for {http://test.ccb.org.com  /}TestClassImplService#{http://test.ccb.org.com/}getCaseId has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: [Lcom.org.ccb.test.SampleClass; cannot be cast to   com.org.ccb.test.SampleClass
at   org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor.handleMessage(WrapperClassOutInterceptor.java:119)
at  org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)
at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:76)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:109)
at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:98)
at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:406)
at org.jboss.wsf.stack.cxf.ServletControllerExt.invoke(ServletControllerExt.java:173)
at org.jboss.wsf.stack.cxf.RequestHandlerImpl.handleHttpRequest(RequestHandlerImpl.java:61)
at org.jboss.wsf.stack.cxf.CXFServletExt.invoke(CXFServletExt.java:163)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451)
at java.lang.Thread.run(Thread.java:662)
  Caused by: java.lang.ClassCastException: [Lcom.org.ccb.test.SampleClass; cannot be cast to com.org.ccb.test.SampleClass
at   com.org.ccb.test.jaxws.GetCaseIdResponse_WrapperTypeHelper1.createWrapperObject(Unknown Source)
at  org.apache.cxf.jaxws.interceptors.WrapperClassOutInterceptor.handleMessage(WrapperClassOutInterceptor.java:103)
... 33 more 
```

** 主要编辑 ** 创建 Web 服务向导生成了 esdl 文件，但它不包含 maxOccurs="unbounded" ，所以我手动添加、保存并重新启动，以为它会改变，但发现 wsdl 没有改变它保留了旧的，所以应该是问题所在！找不到 wsdl 文件没有改变的原因！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:57:22.020

我认为 JBoss 生成的 WSDL 文件是错误的，代码如下

```
<xs:complexType name="getCaseId">
<xs:sequence>
<xs:element minOccurs="0" name="arg0" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

应该是这样的

```
<xs:complexType name="getCaseId">
<xs:sequence>
<xs:element minOccurs="0" maxOccurs="unbounded" name="arg0" type="xs:string"/>
</xs:sequence>
</xs:complexType> 
```

默认`maxOccurs`属性值为 1，并且您的数组`SimpleClass`只是一个`SingleClass`导致类转换错误的实例（尝试将数组转换为实例）。

我没有使用 JBoss 工作室的经验，但我可以建议您使用一些集合而不是数组 - 也许 JBoss 可以比数组更好地处理集合。您也可以尝试 JAX-WS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:20:54.363

您需要了解一些高级概念。

[http://weblogs.java.net/blog/kohsuke/archive/2005/04/xmladapter_in_j.html](http://weblogs.java.net/blog/kohsuke/archive/2005/04/xmladapter_in_j.html)

[http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

[http://docs.oracle.com/javaee/5/tutorial/doc/bnazf.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnazf.html)

我如何做到这一点，是要获得一个代表我的表/实体的类。然后我有一个 list_of_entities 的包装类；这是来自 Web 服务的返回。所以，总共：

1.  具有所需注释的实体类
2.  具有所需注释的包装类
3.  具有所需注释的 Web 服务

我为下面的每一个提供了一个示例，它可能**不会运行**。他们只是为了给你一个理解。

```
//*********************** 1\. your Object/Structure/table record you want to return

//since you'll like to send the object across thus it should be serializable
import java.io.Serializable;

//The following two imports are specific to your case. Read about them
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

//The code related to the following classes is just to give you a taster of the JPA side of it
import javax.persistence.Table;
import javax.persistence.Column;
import javax.persistence.Id;
import javax.persistence.Entity;

/**
 *  The class that will be the Type of your list, I have used it as an entity too for the JPA Layer
 *
 */
@XmlType(namespace = "myNamespace")

@Entity
@Table(name="MY_TABLE"
    ,schema="MY_DB_SCHEMA"
)

public class SampleClass implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;
protected String caseid;
protected String dummy;
/**
 * @return the dummy
 */
@XmlElement(namespace = "myNamespace")
@Column(name="TYPE", nullable=true, length=225) 
public String getDummy() {
    return dummy;
}
/**
 * @return the caseid
 */
@Id
@Column(name="TYPE", nullable=false, length=225)

@XmlElement(namespace = "myNamespace")

public String getCaseid() {
    return caseid;
}
/**
 * @param caseid the caseid to set
 */
public void setCaseid(String caseid) {
    this.caseid = caseid;
}
/**
 * @param dummy the dummy to set
 */
public void setDummy(String dummy) {
    this.dummy = dummy;
} 
```

}

// ***** ** *** ** *** ** *** *******2.对象包装类******* *** ** *** ** *** ** *** *********

 ***```
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.1-b02-fcs 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2009.02.12 at 12:55:08 PM GMT 
//
import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;

import YOURPACKAGE.SampleClass;

/**
 * Wrapper class for List, makes it possible for JAXB to marshal/unmarshal java.util.List.
 * 
 * @param <T>
 *          Generic List
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "myListType", propOrder = { "listReturn" })
public class ExampleList {

  /**
   * instructing JAXB about the xml element and the name to use in the resulting xml structure.
   */
  @XmlElement(name = "sampleClass")
  protected List<SampleClass> listReturn;

  public ExampleList() {
    listReturn = new ArrayList<SampleClass>();
  }

  /**
   * @param local_list
   *          a generic list
   */
  public ExampleList(final List<SampleClass> local_list) {
    listReturn = local_list;
  }

  public List<SampleClass> getList() {
    return listReturn;
  }

} 
```

// ***** ** *** ** *** ** *** ** *** ** *** ***

// ***** ** *** ** *** *******3.网络服务******* *** ** *** ** *** ** ********

 ***```
import javax.ejb.Stateless;
import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebResult;
import javax.jws.WebService;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;

@Stateless(name = "myEJB")
@WebService(serviceName = "myService", targetNamespace = "mynamespace", name = "myServicePT", portName = "myServicePort")
public class ServiceImpl implements ServiceLocal {

  @SuppressWarnings("unused")
  private final Log log = LogFactory.getLog(ServiceImpl.class);

  @PersistenceContext(name = "MyContext")
  private EntityManager em;

  @WebMethod(operationName = "listAll")
  @WebResult(name = "myList", targetNamespace = "mynamespace")
  public ExampleList listAll() throws EastException {
    try {
      Query query = em.createNamedQuery("myQueryToGetMyListFromDB");
      return new ExampleList(query.getResultList());
    }
    catch (Exception e) {
      log.error("Error in retrieving  list", e);

    }
  }

} 
```

// ***** ** *** *******3.1 web服务本地接口****** ** *** *******

 *```
import javax.ejb.Local;

@Local
public interface ServiceLocal {
    ExampleList listAll();
} 
```

// ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T06:36:10.257

由于它是一个自下而上的服务，因此编辑 wsdl 是徒劳的，因此我从 wsdl（使用 JBoss Studio）生成了 java 框架类，并在实现类中编写了我的业务。现在服务运行良好。无论如何，我不知道为什么`maxOccurs="unbounded"`最初从 java 类生成 wsdl 时没有自动生成。谢谢大家的回复`@gkzmin @mhan @dan`*******

# ios - 在 UITableView 自定义单元格中的元素上点击手势

> ID：12051167
> 
> 赞同：0
> 
> 时间：2012-08-21T08:43:54.150
> 
> 标签：ios, uitableview, uibutton

这个话题已经被一遍又一遍地讨论过了，但是经过两天的研究和尝试了所有建议的解决方案，我仍然无法做我想做的事。

首先，我正在使用情节提要为 iOS 5 创建一个应用程序。

我有一个 UITableViewController，有 2 种类型的单元格（一个原始的“消息”和一些“答案”）。我在情节提要中创建了表格，检查了“原型单元格”，用我的 2 个或 3 个标签、一个 textView 和一个图像设计了 2 个单元格。然后，我`UITableViewCell`使用 2 个新类进行子类化，我称之为`ThreadAlertCell`和`ThreadAnswerCell`。我为单元格的元素创建了属性，因此我可以以编程方式设置标签和图像的文本。我像往常一样将我的图形元素与它们在情节提要中的定义联系起来。在我的 TableViewController 中`cellForRowAtIndexPath`，我创建了单元格并填充它们。到目前为止一切顺利，一切都正确显示以及我想要的方式。

但是，我想要一个单元格图像上的“触摸”，弹出一个新视图，显示用户的个人资料页面（另一个基本视图，我可以使用 performSegue 来完成，这没问题）。

我已经尝试了很多东西，我不确定在这里详细介绍所有内容是否很有用。在寻找答案时，我了解到`UIImageView`在您期望处理手势时使用 a 并不是最好的方法。所以我把它改成了`UIButton`. 但我无法让触摸事件做任何事情！

我将仅给出“答案”单元格的示例。

这是我的**ThreadAnswerCell**头文件（我不会给出 .m，那里没什么有趣的）：

```
@interface ThreadAnswerCell : UITableViewCell

@property (nonatomic) IBOutlet UILabel *senderLabel;
@property (nonatomic) IBOutlet UILabel *dateLabel;
@property (nonatomic) IBOutlet UITextView *contentTextView;
@property (nonatomic, weak) IBOutlet UIButton *senderButton;

@end 
```

这是`cellForRowAtIndexPath`我的**TableViewController**的一半（在那之前我对“消息”做了同样的事情）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"ThreadAnswerCell";
    ThreadAnswerCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[ThreadAnswerCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    Message *message = [threadArray objectAtIndex:indexPath.row];

    cell.senderLabel.text = [NSString stringWithFormat:@"%@", message.sender];
    cell.contentTextView.text = [NSString stringWithFormat:@"%@", message.content];
    cell.dateLabel.text = [NSString stringWithFormat:@"%@", message.date];
    //[cell.senderButton setBackgroundImage: [[UIImage alloc] initWithData: [NSData dataWithBase64EncodedString: message.userPic]]
    //                             forState: UIControlStateNormal];

    [cell.senderButton addTarget:self action:@selector(firstButtonSelected:) forControlEvents:UIControlEventTouchUpInside];

    CGRect frame = cell.contentTextView.frame;
    frame.size.height = cell.contentTextView.contentSize.height;
    cell.contentTextView.frame = frame;
    [cell.contentTextView sizeToFit];

    return cell;
} 
```

正如你所看到的，我使用我的自定义单元格，然后用内容填充它（我使用了三个没用`stringWithFormat`的，但我有我的理由，哈哈），我尝试向我的按钮添加一个事件。我还评论了我将按钮的背景图像设置为“看到”屏幕上的按钮的部分。

这是我希望按钮调用的方法：

```
- (void)firstButtonSelected: (id)sender
{
    NSLog(@"hello");
} 
```

但是，该方法永远不会被调用！关于我哪里出错或任何其他可行解决方案的任何想法都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:57:19.523

你有 `- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

在您的 tableview 委托类中实现？

我认为，您的单元格捕获了触摸事件。尝试删除该方法。和 `cell.selectionStyle = UITableViewCellSelectionStyleNone`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:51:58.773

是最顶层的景色吗？确保最后将 senderButton 视图添加到单元格视图中。任何其他视图都可能被触及。

# iphone - 如何在 iPhone 中将一张图片覆盖在另一张图片上

> ID：12051168
> 
> 赞同：0
> 
> 时间：2012-08-21T08:43:54.090
> 
> 标签：iphone, camera, uiimage, overlay

在我的应用程序中，我有一张透明图像，现在当用户从照片库中选择一张图像时，该图像必须显示在透明图像上并制作为一张 uiiimage，以便用户可以邮寄或分享。我使用了以下代码，但是图像在透明图像上不正确

```
UIImage *backgroundImage = [UIImage imageNamed:@"iPhoneOverLay.png"];

UIGraphicsBeginImageContext(backgroundImage.size);
[backgroundImage drawInRect:CGRectMake(0, 0, backgroundImage.size.width, backgroundImage.size.height)];
[testImage drawInRect:CGRectMake(backgroundImage.size.width - testImage.size.width, backgroundImage.size.height - testImage.size.height, testImage.size.width, testImage.size.height)];
UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

这里 testImage 是从照片库中选择的或从相机中获取的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T21:34:20.087

您以错误的顺序绘制 2 张图像。透明度是一种属性，它使之前已经绘制*过*的东西变得光彩照人。因此，您必须首先绘制（不透明）照片，然后绘制（透明）叠加层。

# java - Infinispan 如何在数据持久性中使用？

> ID：12051172
> 
> 赞同：0
> 
> 时间：2012-08-21T08:44:14.373
> 
> 标签：java, jboss, infinispan

我对 Infinispan 框架非常陌生。我想知道 Infinispan 能否用于兑现实体的数据同步与 Oracle 数据库表。简单的场景是，当我将实体放入缓存时，我想将该实体保存到数据库中，而不是将其保存到数据库中（仅放入缓存）。我正在寻找的是一个稍微不同的缓存存储。它背后的想法是将数据存储起来，就像我们使用 Hibernate JPA 一样。所以缓存存储需要根据映射键的信息和/或从 JPA 注释获得的信息更新正确的表/行请告诉我 Infinispan 是否支持这种情况？如果支持请与我分享一些示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:05:37.873

也许您正在寻找的是[Hibernate OGM](http://www.hibernate.org/subprojects/ogm.html)，它允许您在使用 JPA API 时将数据存储到数据网格中，例如 Infinispan，而不是数据库？

# ruby-on-rails - Rails 控制器操作 redirect_to 刷新页面

> ID：12051174
> 
> 赞同：2
> 
> 时间：2012-08-21T08:44:23.843
> 
> 标签：ruby-on-rails, redirect, controller, action

我希望我的页面在创建记录后刷新，此时它将它定向到之前的页面。这是我的控制器的代码：

```
def create
@license = License.new(params[:license])

respond_to do |format|
  if @license.save
    format.html { redirect_to :controller => 'customers', :action => 'index' }
    format.json { render json: @customer, status: :created, location: @customer }
  else
    format.html { render action: "new" }
    format.json { render json: @customer.errors, status: :unprocessable_entity }
  end

end 
```

它说`redirect_to`我需要使用当前 id 刷新或链接到当前页面，这将是`:controller => 'customers', :action => 'show'`但具有当前页面记录的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:48:17.337

尝试

```
redirect_to customer_path(@license.id) 
```

反而。

根据您的 routes.rb 文件所说的内容，它应该可以工作。

但如果没有，请尝试：

```
redirect_to show_customer_path(@license.id) 
```

但是，在这里我必须假设您的 customers_controller.rb 以某种方式显示了来自许可证模型的记录。如果 License 和 Customer 是不同的模型，您将不得不以其他方式找到 customer_id。

也许，它是：

```
redirect_to customer_path(@license.customer_id) 
```

如果许可证未以任何方式连接到客户，您需要将其作为发布请求的一部分传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:51:03.517

试试看，我认为您正在将 customer_id 传递给参数（被许可人属于客户），如果是这样， `redirect_to customer_path(@license.customer)`或者`redirect_to customer_path(params[:customer_id])`

# blackberry - 在 BlackBerry OS 10 上安装 COD 文件

> ID：12051184
> 
> 赞同：2
> 
> 时间：2012-08-21T08:44:47.097
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin, blackberry-jde, blackberry-os6

在 BBOS 10 发布之前，我使用 Java SDK 开发了 BlackBerry 应用程序。但是最近发布的 BBOS 10 并没有提供 Java SDK 平台来开发应用程序。
那么有什么方法可以在 BBOS 10 模拟器/设备上运行我以前开发的应用程序（使用 Java SDK 5.0、6.0、7.0、7.1）。

黑莓在不久的将来会发布Java SDK吗？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:28:53.527

如果您编写了[WebWorks](https://developer.blackberry.com/html5/)应用程序，那么您可以将其重新编译为 BB 10。否则就[没有机会](http://supportforums.blackberry.com/t5/Java-Development/DevCon-update-BB-Java-is-dead-no-java-support-for-QNX/td-p/1369863)在 BB 10 上运行您的应用程序。不幸的是！

# jpa - Equinox OSGi + JPA Eclipselink + PAX JDBC 驱动适配器

> ID：12051186
> 
> 赞同：2
> 
> 时间：2012-08-21T08:44:54.120
> 
> 标签：jpa, jdbc, osgi, eclipselink, pax

在使用 JPA 持久性和 Eclipse 链接的 OSGi 中出现许多“未找到类”问题之后，我发现了一些介绍 PAX JDBC 驱动程序适配器的文章。

有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T08:49:23.843

Pax JDBC 使用起来应该相当简单。只需查看[文档](http://team.ops4j.org/wiki/display/PAXJDBC/Documentation)。

结合 Eclipselink，您可能应该远离 Eclipselink OSGi 适配器，它对 Eclipse Gemini DBAccess 有不必要的依赖，至少在我上次查看它时是这样。

[Pax JPA](https://github.com/ops4j/org.ops4j.pax.jpa)是一个孵化项目，它为 Eclipselink 和 OpenJPA 提供符合 OSGi Enterprise 的适配器。

# c - strcpy 和 printf 一个多维字符数组 C

> ID：12051187
> 
> 赞同：2
> 
> 时间：2012-08-21T08:44:57.883
> 
> 标签：c, printf, arrays, strcpy

说我有一个数组

```
char messages[10][2][50]; 
```

strcpy 的正确语法是什么，以便将数据放入其中一个字符串（大小为 50 的最内层 char 数组），然后通过 %s 将其提供给 printf 的相应约定？

就此而言，我是否以正确的顺序声明数组下标？它打算是 10 对（2 个）字符串。每个字符串为 50 个字符宽。

```
01{{50 chars},{50 chars}}
02{{50 chars},{50 chars}}
...
09{{50 chars},{50 chars}}
10{{50 chars},{50 chars}} 
```

各种互联网资源似乎在省略哪个下标方面存在冲突，而且无论我尝试什么似乎都会产生意想不到的结果。

例如，你能在下面填空吗

```
strcpy(message???, "Message 1 Part 1");
strcpy(message???, "m1 p2");
strcpy(message???, "m2 p1");
strcpy(message???, "m2 p2");
strcpy(message???, "m3 p1");
strcpy(message???, "m3 p1");
//So on...

int i;
for(i=0;i<10;i++)
    printf("%s, %s\n", message???, message???); 
```

使得数组具有以下结构并保持：

```
01{{"Message 1 Part 1\0"},{"m1 p2\0"}}
02{{"m2 p1\0"},{"m2 p2\0"}}
01{{"m3 p1\0"},{"m3 p2\0"}}
//So on... 
```

和这样的输出

> 消息 1 第 1 部分，m2 p2
> 
> 平方米，p2
> 
> m3, p3
> 
> 等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:58:44.183

我刚刚编写了一个快速程序来显示您所询问的内容...在声明时加载它们，将它们 strncpy 放入其中一个，然后将它们打印出来。

希望能帮助到你

编辑：我有点讨厌魔术数字，所以我几乎完全删除了它们
编辑：我添加了替代品 Tommi Kyntola，我在评论中谈论

```
#include <stdio.h>
#include <string.h>

// safe string copy macro, terminates string at end if necessary
// note: could probably just set the last char to \0 in all cases
// safely if intending to just cut off the end of the string like this

#define sstrcpy(buf, src, size) strncpy(buf, src, size); if(strlen(src) >= size) buf[size-1] = '\0';

#define MSGLIMIT 10
#define MSGLENGTH 30
#define MSGFIELDS 2
#define MSGNAME 0
#define MSGTEXT 1

int main(void) {
    char messages[MSGLIMIT][MSGFIELDS][MSGLENGTH] = { {"bla", "raa"},
                                                      {"foo", "bar"}
                                                    };
    int i;

    char *name1 = "name16789012345678901234567890";
    char *text1 = "text16789012345678901234567890";

    char *name2 = "name26789012345678901234567890";
    char *text2 = "text26789012345678901234567890";

    char *name3 = "name36789012345678901234567890";
    char *text3 = "text36789012345678901234567890";

    // doesn't set last char to \0 because str overruns buffer
    // undocumented result of running this, but likely to just get the name2 string
    // as that'll be the very next thing in memory on most systems

    strncpy(messages[2][MSGNAME], name1, MSGLENGTH); // 2 because it's the next empty one
    strncpy(messages[2][MSGTEXT], text1, MSGLENGTH);

    // alternative suggested by Tommi Kyntola
    // printf family are more complicated and so cost more cpu time than strncpy
    // but it's quick and easy anywhere you have string.h and fine most of the time

    snprintf(messages[3][MSGNAME], MSGLENGTH, "%s", name2);
    snprintf(messages[3][MSGTEXT], MSGLENGTH, "%s", text2);

    // uses the define macro at the top of the page to set the last char to \0 if
    // otherwise not set by strncpy, adds a little weight but still the better option
    // if performance of this section of code is important

    sstrcpy(messages[4][MSGNAME], name3, MSGLENGTH);
    sstrcpy(messages[4][MSGTEXT], text3, MSGLENGTH);

    for(i = 0; i < 5; i++) // 5 because that's how many I've populated
            printf("%s : %s\n", messages[i][MSGNAME], messages[i][MSGTEXT]);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:49:41.290

您可以省略最大订阅（例如，它是 10），因为它可以由编译器根据剩余订阅计算。要传递 50 个元素的层，请使用指针： (*messages)[10][2] - 将是 50 个元素的层上的指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:50:08.247

我会使用：

假设你想复制到`char* new_buff`

```
memcpy(new_buff, messages, 10*2*50); 
```

您可以执行 3 个嵌套循环并使用`strncpy`.

不要使用 strcpy ......它是不安全的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:00:33.673

正如已经指出的那样，最好使用 strncpy，或者如下面的示例，使用断言，以防止可能的缓冲区溢出。strcpy 与 strncpy 相比，性能略有提高。

```
 #define FIRST_OF_PAIR 0
#define SECOND_OF_PAIR 1

    int message_num = 7;

    char messages[10][2][50];

    char *string = "hello";

    assert(strlen(string) < 50);
    assert(message_num > 0 &&  message_num < 10);

    strcpy(messages[message_num][SECOND_OF_PAIR], "Hello");

    printf("%s", messages[message_num][SECOND_OF_PAIR]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:00:43.877

这将是

```
strcpy(message[0][0], "Message 1 Part 1");
strcpy(message[0][1], "m1 p2");
strcpy(message[2][0], "m2 p1");
strcpy(message[2][1], "m2 p2");
strcpy(message[3][0], "m3 p1");
strcpy(message[3][1], "m3 p2");

for(i=0;i<10;i++)
    printf("%s, %s\n", message[i][0], message[i][1]); 
```

尝试理解这个概念。

# php - Wordpress 多站点用户编辑权限错误

> ID：12051190
> 
> 赞同：1
> 
> 时间：2012-08-21T08:45:05.217
> 
> 标签：php, wordpress

我正在研究 wordpress 多站点。

当用户创建新站点时，他被赋予管理员角色。他具有以下能力

1.  '编辑用户',
2.  'manage_network_users',
3.  'edit_users'、'promote_users'。

但是，当用户尝试在同一站点中编辑另一个用户时，会出现权限错误。

但是，如果我评论说：

```
`if(!current_user_can('edit_user', $userid))` in user-edit.php line around 148 and 100 
```

它有效。但用户角色无法更改。

有趣的是用户有能力'edit_user'，我检查了很多次。

可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:21:57.923

我找到了一个链接[http://thereforei.am/2011/03/15/how-to-allow-administrators-to-edit-users-in-a-wordpress-network/#comment-6855](http://thereforei.am/2011/03/15/how-to-allow-administrators-to-edit-users-in-a-wordpress-network/#comment-6855)有完美的答案这个。显然阻塞是由capabilities.php而不是user-edit.php完成的。感谢这个站点，我的问题得到了解决。

# android - 为什么使用 xCode 编译比使用 Eclipse for Android 慢得多？

> ID：12051191
> 
> 赞同：0
> 
> 时间：2012-08-21T08:45:05.803
> 
> 标签：android, iphone, xcode

我有一个适用于 iPhone 和 Android 的应用程序。

编译和链接直到应用程序在 Android 上启动只需要几秒钟。在 xCode 上做同样的事情（都在 MacBook Pro 上）现在使用 xCode 4.4 大约需要 3 个小时。使用以前的 xCodes 大约需要 2 个小时。

两个平台的代码非常相似，并且有一些大约 20k 行的数据类（我不能将其存储在数据库或文件中，因为它们需要根据环境进行计算）

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T00:56:12.653

您是否在需要很长时间的系统上运行了防病毒软件？我在我的 MacBook 上运行卡巴斯基，有时当我保存文件时，我会得到 10 秒的沙滩球，有时长达 5 分钟。我在使用 Xcode 时关闭了 Kaspersky，并希望我在冲浪时记得将其重新打开。

# android - Onclick改变按钮颜色的常用方法或xml

> ID：12051194
> 
> 赞同：0
> 
> 时间：2012-08-21T08:45:26.257
> 
> 标签：android, button

我的应用中有大约 20 个自定义按钮，每个按钮都有**不同的图像**。我知道要创建*点击*效果，我必须像[这样](https://stackoverflow.com/a/7176006/501859)创建一个 XML 资源，我必须为我的按钮创建 20 个不同的 XML 资源。

有没有更好的方法来获得相同的结果，而无需为每个按钮创建单独的 XML 资源？

**更新：**
我们可以在单击按钮时使按钮半透明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:58:37.043

[在这里](http://shikii.net/blog/android-button-background-image-pressedhighlighted-and-disabled-states-without-using-multiple-images/)找到解决方案。

```
 public class SAutoBgButton extends Button {

  public SAutoBgButton(Context context) {
    super(context);
  }

  public SAutoBgButton(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  public SAutoBgButton(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }

  @Override
  public void setBackgroundDrawable(Drawable d) {
    // Replace the original background drawable (e.g. image) with a LayerDrawable that
    // contains the original drawable.
    SAutoBgButtonBackgroundDrawable layer = new SAutoBgButtonBackgroundDrawable(d);
    super.setBackgroundDrawable(layer);
  }

  /**
   * The stateful LayerDrawable used by this button.
   */
  protected class SAutoBgButtonBackgroundDrawable extends LayerDrawable {

    // The color filter to apply when the button is pressed
    protected ColorFilter _pressedFilter = new LightingColorFilter(Color.LTGRAY, 1);
    // Alpha value when the button is disabled
    protected int _disabledAlpha = 100;

    public SAutoBgButtonBackgroundDrawable(Drawable d) {
      super(new Drawable[] { d });
    }

    @Override
    protected boolean onStateChange(int[] states) {
      boolean enabled = false;
      boolean pressed = false;

      for (int state : states) {
        if (state == android.R.attr.state_enabled)
          enabled = true;
        else if (state == android.R.attr.state_pressed)
          pressed = true;
      }

      mutate();
      if (enabled && pressed) {
        setColorFilter(_pressedFilter);
      } else if (!enabled) {
        setColorFilter(null);
        setAlpha(_disabledAlpha);
      } else {
        setColorFilter(null);
      }

      invalidateSelf();

      return super.onStateChange(states);
    }

    @Override
    public boolean isStateful() {
      return true;
    }
  }

} 
```

在 xml 中使用它：

```
<net.shikii.widgets.SAutoBgButton
  android:layout_width="wrap_content" android:layout_height="wrap_content"
  android:background="@drawable/button_blue_bg"
  android:text="Button with background image" /> 
```

# .net - 如何使用正则表达式查找跳过标签的匹配项？

> ID：12051197
> 
> 赞同：0
> 
> 时间：2012-08-21T08:45:36.230
> 
> 标签：.net, html, regex

我想写一个正则表达式，它应该忽略字符串之间存在的标签。

例如，这是我的字符串

```
<p>hi this is a reg<del>U</del><ins>u</ins>lar expression match</p> 
```

我想要一个正则表达式从上面的字符串中找到“常规”，匹配应该找到包括标签的整个单词，即，`reg<del>U</del><ins>u</ins>lar`

这里大小写可以忽略。

请帮助我..提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:49:33.703

我认为您无法在正则表达式中获得强大的解决方案。无论如何，它的可读性并不高。这里，以详细的形式，是一个符合您修改后的规范的正则表达式。请注意，它无法处理`<del>`包含任何嵌套标签的标签——这对于 nsregularexpressions 是不可能的。

```
\b        # Start of word
r         # Match r
(?:       # Match either
 <del>    #  <del>
 [^<>]*   #  any characters besides angle brackets
 </del>   #  </del>
|         # or
 <[^<>]*> #  any other tag
)*        # End of alternation
e         # Match e
(?:<del>[^<>]*</del>|<[^<>]*>)*  # etc...
g
(?:<del>[^<>]*</del>|<[^<>]*>)*
u
(?:<del>[^<>]*</del>|<[^<>]*>)*
l
(?:<del>[^<>]*</del>|<[^<>]*>)*
a
(?:<del>[^<>]*</del>|<[^<>]*>)*
r
\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:56:13.950

你真的需要某种形式的 HTML 解析器。正则表达式不适合 HTML，您将花时间改进和调整以尝试覆盖*所有*边缘情况（您不能这样做）。

# java - JAVA - 返回接口列表

> ID：12051198
> 
> 赞同：3
> 
> 时间：2012-08-21T08:45:37.073
> 
> 标签：java, list, interface, implements

我有这个问题，我想只在`if`块之后返回接口和实现类的列表。

```
public interface Lotto { }

public class LottoImplSecond implements Lotto { }
public class LottoImplFirst implements Lotto { }

public class MyClass {
   public List<Lotto> getLotto(Integer number){
       if(number==1) List<Lotto> listaLotto=new ArrayList<LottoImplFirst>();
       else if(number==2) List<Lotto> listaLotto=new ArrayList<LottoImplSecond>();
   return listaLotto;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-21T08:48:30.163

```
public interface Lotto { }

public class LottoImplSecond implements Lotto { }
public class LottoImplFirst implements Lotto { }

public class MyClass {
   public List<? extends Lotto> getLotto(Integer number){
       List<? extends Lotto> listaLotto;
       if(number==1) listaLotto=new ArrayList<LottoImplFirst>();
       else if(numeber==1) listaLotto=new ArrayList<LottoImplSecond>();
       return listaLotto;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T08:57:53.080

First`List<Lotto>`不是`List<LottoImplSecond>`or`List<LottoImplFirst>`所以你需要返回一个超类型`List<? extends Lotto>`

列表的问题`List<? extends Lotto>`是**您只能从中获取并且永远不会添加到它**（安全，没有编译器警告）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T08:50:39.060

如果您返回`List<Lotto>`，则内部是否使用特定类型都没有关系，实际上，您不能这样做，因为`ArrayList<LottoImplFirst>`它不是`List<Lotto>`. 你实际上可以这样做：

```
public List<Lotto> getLotto(Integer number){
   return new ArrayList<Lotto>();
} 
```

（另请注意，您`listaLotto`在语句中声明了变量 ( ) `if-else`，因此 return 语句超出了它们的范围。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T08:52:31.600

你的台词

```
if(number==1) List<Lotto> listaLotto=new ArrayList<LottoImplFirst>();
else if(numeber==1) List<Lotto> listaLotto=new ArrayList<LottoImplSecond>(); 
```

就调用您的方法的代码而言，一无所获。这两个列表对于您的来电者来说**绝对无法区分。**我建议你只写

```
listaLotto = new ArrayList<Lotto>(); 
```

相应地调整返回类型并完成它。

附注：您的代码不是可编译的 Java，但这是一个小问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T08:51:41.737

if 和 else 的条件相同。泛型继承不同于 Java 继承。

```
 public List<Lotto> getLotto(Integer number)
{
    return ((List<Lotto>)(number == 1 ? new ArrayList<LottoImplFirst>() : new ArrayList<LottoImplSecond>());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T08:51:59.587

您的代码中有许多错误，但我认为您想要做的是将`getLotto`方法签名更改为：

```
public List<? extends Lotto> getLotto(Integer number); 
```

您还必须`listaLotto`在语句之外进行定义`if`，以便在您尝试使用它时它仍在范围内`return`。

另请注意，`else if`条件上有一个错字 - 我认为它应该测试 if `number == 1`，尽管目前这永远不会像原始`if`条件测试 if一样执行`number == 1`。

完整的解决方案（假设第二个`value`是 2）如下所示：

```
public interface Lotto { }

public class LottoImplSecond implements Lotto { }
public class LottoImplFirst implements Lotto { }

public class MyClass {
   public List<? extends Lotto> getLotto(Integer number){
       List<? extends Lotto> listaLotto;
       if(number==1) {
            listaLotto=new ArrayList<LottoImplFirst>();
       }
       else if(number==2) {
            listaLotto=new ArrayList<LottoImplSecond>();
       }
       return listaLotto;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T08:54:05.843

试试这个。我刚刚编译它：

```
class MyClass {
   public List<? extends Lotto> getLotto(Integer number){

       List<? extends Lotto> listaLotto = null; 

       if(number==1) {
           listaLotto= new ArrayList<LottoImplFirst>();
       }           
       else if(number ==1) {
           listaLotto=new ArrayList<LottoImplSecond>();
       }
   return listaLotto;
}
} 
```

# android - 使用 Locale.getDefault() 和 context.getResources().getConfiguration().locale 的语言环境有什么区别？

> ID：12051204
> 
> 赞同：5
> 
> 时间：2012-08-21T08:46:06.863
> 
> 标签：android, locale

通过以下方式返回的字符串有什么区别：

```
Locale.getDefault().toString() 
```

和

```
context.getResources().getConfiguration().locale.toString() 
```

询问是因为我怀疑这会导致应用程序出现错误，在某些美国设备上，使用之前`Locale.getDefault().toString()`有效的东西不再适用于 . `context.getResources().getConfiguration().locale.toString()`但不确定是不是这个原因。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:54:41.677

`Locale.getDefault().toString()`并且 `context.getResources().getConfiguration().locale.toString()`应该返回相同的值。

两者之间唯一的主要区别是`Locale.getDefault()`可以*直接*覆盖`Locale.setDefault(locale)`. （这也会影响`context.getResources().getConfiguration().locale.toString()`）

# opengl - 为什么要使用 glBindAttribLocation？

> ID：12051205
> 
> 赞同：14
> 
> 时间：2012-08-21T08:46:08.367
> 
> 标签：opengl

> **可能重复：**
> [OpenGL 着色器的显式与自动属性位置绑定](https://stackoverflow.com/questions/4635913/explicit-vs-automatic-attribute-location-binding-for-opengl-shaders)

在我的另一个问题中，其中一个答案表明我应该使用`glBindAttribLocation`并且不允许着色器编译器分配自己的索引。我想知道为什么这是推荐的做法，它有什么优点（或者说不使用它有什么缺点）？

我确实明白，如果我有多个共享属性的程序，这是有道理的，因为我可以在程序之间切换而不必重置这些属性。但是，对于未共享的属性，或者如果我的程序不使用此类共享，我认为没有必要显式绑定索引。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-21T11:39:15.343

# jquery - 中心浮动元素

> ID：12051209
> 
> 赞同：0
> 
> 时间：2012-08-21T08:46:22.590
> 
> 标签：jquery, css

我已经探索了这个荒谬的数量，但我想我想多了！基本上：

[http://jsfiddle.net/shannonhochkins/EugZp/2/](http://jsfiddle.net/shannonhochkins/EugZp/2/)

尽管我需要将文本与上面的文本居中对齐，但我的 ^ 效果很好。我已经尝试`display: inline-block`在子元素和`text-align:center;`它们的父元素上使用，这确实使它们居中，但是动画它们的 jquery 不能正常工作，因为我相信它们都对齐在一起而不是分开。

有谁知道任何技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:54:54.500

您将它们放在父 div 中并以该 div 为中心，就像[这样](http://jsfiddle.net/EugZp/10/)

更新：为 Firefox 和 IE9 修复了小提琴，宽度增加了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:52:40.980

看到更新的小提琴我希望你想要这样的东西：http: [//jsfiddle.net/EugZp/9/](http://jsfiddle.net/EugZp/9/)

# highcharts - 编辑highcharts图例的样式（仅对某些字符串加粗）

> ID：12051212
> 
> 赞同：0
> 
> 时间：2012-08-21T08:46:37.360
> 
> 标签：highcharts

参考这个线程[How to wrap legend items in highcharts](https://stackoverflow.com/questions/6611832/how-to-wrap-legend-items-in-highcharts)我成功地调整了我的图例宽度

```
legend: {
  itemStyle: {
    width: 90 // or whatever
}, 
```

但我需要检查一些条件，如果该条件为真，我应该用粗体突出显示标签，所以我使用的是 labelFormatter，但我发现在添加 itemStyle 选项后，我的 html 标签只能在回车之前工作...你可以在这里看到这个：http: [//jsfiddle.net/yDWh9/5/](http://jsfiddle.net/yDWh9/5/)

我怎么解决这个问题？

谢谢你

______编辑_______

这是highcharts生成的代码：

```
<g class="highcharts-legend-item" zindex="1" transform="translate(8,18)">
   <text x="21" y="15" style="font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;font-size:12px;cursor:pointer;color:#3E576F;width:290;fill:#3E576F;" text-anchor="start" zindex="2">
      <tspan style="font-weight:bold" x="21">Lorem ipsum</tspan>
      <tspan dy="16" x="21">dolor sit amet</tspan>
   </text>
   <rect rx="2" ry="2" fill="#AA4643" x="0" y="4" width="16" height="12" stroke-width="0.000001" zindex="3" stroke="#AA4643"></rect>
</g> 
```

如您所见，它在两个 tspan 中破坏了字符串，并且只有第一个具有 font-weight:bold

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T12:18:58.000

尝试

```
legend: {
    useHTML: true,
    itemStyle: {
    width: 90 // or whatever
}, 
```

和系列：

```
series: [{
    name: '<b>Tokyo</b>',
    data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
}, {
    name: 'New York',
    data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
}, {
    name: 'Berlin',
    data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
}, {
    name: '<b>London</b>',
    data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
}] 
```

# sql-server-2008 - 在所有数据库中搜索列名

> ID：12051216
> 
> 赞同：9
> 
> 时间：2012-08-21T08:46:54.750
> 
> 标签：sql-server-2008, information-schema

我有这个查询可以找到与某个数据库的列名匹配的所有表和视图。我正在使用**SQL SERVER 2008**

```
SELECT table_name FROM information_schema.columns
WHERE column_name = 'product_name' 
```

我想扩展我的查询功能以搜索所有数据库，甚至查找具有我搜索的列名的存储过程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-11T06:14:02.523

此脚本将在所有数据库的所有表中搜索您的列。

```
Create table #yourcolumndetails(DBaseName varchar(100), TableSchema varchar(50), TableName varchar(100),ColumnName varchar(100), DataType varchar(100), CharMaxLength varchar(100))

EXEC sp_MSForEachDB @command1='USE [?];
    INSERT INTO #yourcolumndetails SELECT
    Table_Catalog
    ,Table_Schema
    ,Table_Name
    ,Column_Name
    ,Data_Type
    ,Character_Maximum_Length
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME like ''%yourcolumnname%'''

select * from #yourcolumndetails
Drop table #yourcolumndetails 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T14:05:39.653

您可以使用此查询来查找在 SP/View 或 Function 中使用的字段名称

```
SELECT 
    OBJECT_NAME(object_id) as 'Procedure/Function/View Name',
    definition
    --,*
FROM sys.sql_modules
WHERE 
    ( definition LIKE '%' + '<Your_Field_Name>' + '%' ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T22:41:55.630

跨数据库查找代码，我发现的最简单的方法是在每个数据库中使用下面的 SQL 使用一个视图，然后放入一个主视图，将它们跨数据库联合起来。如果你有大量的数据库或一些你无法触摸的数据库，那会有点痛苦，但对我来说效果很好。

```
select
    s.name as SchemaName,
    objs.name as ObjectName,
    objs.ObjectType,
    OBJECT_DEFINITION(objs.object_id) AS ObjectDefinition
from
    (SELECT object_id, name, 'Proc' as ObjectType
    FROM    sys.procedures p
        UNION
    select  object_id, name, 'View'
    from    sys.views 
        UNION
    SELECT  object_id, Name, type
    FROM    sys.objects o
    WHERE   o.[type] IN ('fn', 'fs', 'ft', 'if', 'tf')) objs
    inner join sys.objects o
        on objs.object_id=o.object_id
    inner join sys.schemas s
        on o.schema_id=s.schema_id 
```

列（如在服务器上任何数据库的抽象表中查找列），你可以做同样的事情，只是 UNION 信息模式，但这对我想要的不起作用，所以我正在寻找一个更通用的解决方案 - 如果我找到它会添加它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:58:17.887

要在程序中搜索，请使用 information_schema.routines

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T09:00:11.210

您在没有 mysql 管理员权限的情况下运行此查询，因此它仅显示您有权访问的数据库/表

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-19T14:54:49.503

```
select * from information_schema.tables
where table_name like upper('%email%'); ' 
```

说明：
Table_name 是
帮助我找到列“电子邮件”的所有命令的名称 > 采取的步骤：

```
show databases ;
show tables;
select * from information_schema.tables;

select * from information_schema.tables
where table_name like upper('%email%');' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-03-18T17:28:01.927

```
DECLARE @colName NVARCHAR(30) 
```

声明 @insertCMD NVARCHAR(256)

CREATE TABLE #yourcolumndetails ( DBaseName VARCHAR(100) ,TableSchema VARCHAR(50) ,TableName VARCHAR(100) ,ColumnName VARCHAR(100) ,DataType VARCHAR(100) ,CharMaxLength VARCHAR(100) )

SET @colName = UPPER('你的列名')

SET @colName = '''%' + @colName + '%'''

打印@colName

SET @insertCMD = '使用 [?]; INSERT INTO #yourcolumndetails SELECT Table_Catalog ,Table_Schema ,Table_Name ,Column_Name ,Data_Type ,Character_Maximum_Length FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME like' + @colName

打印@insertCMD

EXEC sp_MSForEachDB @command1 = @insertCMD

选择 * 从 #yourcolumndetails

删除表#yourcolumndetails

# csv - 如何将 Excel 工作表另存为 CSV，以便导出的文件中不包含引号？

> ID：12051221
> 
> 赞同：0
> 
> 时间：2012-08-21T08:47:20.910
> 
> 标签：csv, excel, excel-2003, vba

好的，所以我想在 Excel 2003 中有一个宏，它将当前工作表保存为 .txt 文件。我已经使用以下代码获得了该部分：

```
Dim filename As String
Dim path As String
filename = InputBox("Please enter file name", "Save as CSV", "CSV_" & Format(Now, "DD_MM_yyyy"))
path = "C:\Temp" & filename & ".txt"

ActiveWorkbook.SaveAs filename:=path, FileFormat:=xlTextMSDOS, CreateBackup:=False 
```

但现在是实际问题：在我的工作表中有一些包含逗号的单元格。如果我使用上面显示的宏，文件将保存为 CSV，但包含逗号的单元格周围有引号。我不要那个。如果我通过文件 -> 另存为 -> CSV/TXT 手动保存文件，则生成的文件不包含这些引号。

有谁知道如何解决这个问题？

非常感谢！

编辑：我忘了说，手动保存时，我选择了文本制表符分隔，而不是逗号分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:10:48.830

好吧，让我们看看我在阁楼里有什么......

我有一个符合要求的 VBA **Array To File**功能：对于您正在做的工作可能有点矫枉过正，因为您不需要标题行、转置和检查带有错误陷阱的预先存在文件的选项读取文件的日期戳并防止对函数的重复调用不断覆盖文件。但这是我手头的代码，简化它比按原样使用更麻烦。

你*想要*的是这个函数默认使用制表符作为字段分隔符。当然，您可以将其设置为逗号... csv 文件的普遍接受定义是用逗号分隔的字段和封装在双引号中的文本字段（可能包含逗号字符）。但是我不能声称可以证明这种迂腐的道德制高点，因为下面的代码没有强加封装引号。

**编码说明：**

1.  您需要对 Windows 脚本运行时库的引用：scrrun.dll - 这可以在系统文件夹（通常是 C:\WINDOWS\system32）中找到 - 因为我们使用的是文件系统对象；
2.  ArrayToFile 将数据写入临时文件夹中的命名文件。如果您指定“CopyFilePath”，它将被复制到其他地方：永远不要写入网络文件夹，写入本地驱动器并使用本机文件系统功能移动或复制完成的文件总是更快；
3.  数据以块的形式写入文件，而不是逐行写入；
4.  有进一步优化的空间：使用 Split 和 Join 函数将消除循环中的字符串连接；
5.  您可能希望使用 VbCrLF 而不是 VbCr 作为行分隔符：回车通常可以工作，但某些系统和应用程序需要回车和换行符组合才能正确读取或显示换行符。

**使用 ArrayToFile 函数：**

这很简单：只需输入工作表使用范围的 .Value2 属性：

```
 ArrayToFile Worksheets("Sheet1").UsedRange.Value2, "MyData.csv" 
```

'Value2' 的原因是 'Value' 属性捕获格式，您可能需要日期字段的基础序列值。

**VBA ArrayToFile 函数的源代码：**

分享和享受......并注意有用的换行符，插入任何可以通过浏览器（或 StackOverflow 的有用格式化功能）破坏代码的地方：

```
 Public Sub ArrayToFile(ByVal arrData As Variant, _
                       ByVal strName As String, _
                       Optional MinFileAge As Double = 0, _
                       Optional Transpose As Boolean = False, _
                       Optional RowDelimiter As String = vbCr, _
                       Optional FieldDelimiter = vbTab, _
                       Optional CopyFilePath As String, _
                       Optional NoEmptyRows As Boolean = True, _
                       Optional arrHeader1 As Variant, _
                       Optional arrHeader2 As Variant)

' Output an array to a file. The field delimiter is tab (char 9); rows use CarriageReturn(char 13).
' The file will be named as specified by strName, and saved in the user's Windows Temp folder.

' Specify CopyFilePath (the full name and path) to copy this temporary file to another folder.
' Saving files locally and copying them is *much* faster than writing data across the network.

' If a Min File Age 'n' is specified, and n is greater than zero, an existing file will not be
' replaced, *and no data will be written* unless the file is more than MinFileAge seconds old.

' Transpose = TRUE is useful for arrays generated by Recordset.GetRows and ListControl.Column
' Note that ADODB.Recordset has a native 'save' method (rows delimited by VbCr, fields by Tab)

' **** This code is in the Public Domain **** Nigel Heffernan [http://Excellerando.blogspot.com](http://Excellerando.blogspot.com)

On Error Resume Next

Dim objFSO As Scripting.FileSystemObject
Set objFSO = New Scripting.FileSystemObject

If objFSO Is Nothing Then
    Shell "Regsvr32.exe /s scrrun.dll", vbHide
    Application.Wait Now + (0.25 / 3600 / 24)
    Set objFSO = CreateObject("Scripting.FileSystemObject")
End If

If objFSO Is Nothing Then
    Exit Sub
End If

Dim strFile     As String
Dim strTemp     As String

Dim i As Long, j As Long

Dim strData     As String
Dim strLine     As String

Dim strEmpty    As String
Dim dblCount    As Double

Const BUFFERLEN As Long = 255

strName = Replace(strName, "[", "")
strName = Replace(strName, "]", "")

Set objFSO = New Scripting.FileSystemObject

If objFSO Is Nothing Then
    Shell "Regsvr32.exe /s scrrun.dll", vbHide
    Application.Wait Now + (0.25 / 3600 / 24)
    Set objFSO = CreateObject("Scripting.FileSystemObject")
End If

If objFSO Is Nothing Then
    Exit Sub
End If

strTemp = objFSO.GetSpecialFolder(Scripting.TemporaryFolder).ShortPath

strFile = objFSO.BuildPath(strTemp, strName)

If objFSO.FileExists(strFile) Then

```
If MinFileAge > 0 Then
    If objFSO.GetFile(strFile).DateCreated + (MinFileAge / 3600 / 24) > Now Then
        Set objFSO = Nothing
        Exit Sub
    End If
End If

Err.Clear
objFSO.DeleteFile strFile, True

If Err.Number = 70 Then
    VBA.FileSystem.Kill strFile
End If 
```

End If

If objFSO.FileExists(strFile) Then
    Exit Sub
End If

Application.StatusBar = "Cacheing data in a temp file... "

strData = vbNullString
With objFSO.OpenTextFile(strFile, ForWriting, True)

```
' **** **** **** HEADER1 **** **** ****
If Not IsMissing(arrHeader1) Then
If Not IsEmpty(arrHeader1) Then
If InStr(1, TypeName(arrHeader1), "(") > 1 Then  ' It's an array...

    Select Case ArrayDimensions(arrHeader1)
    Case 1  ' Vector array

       .Write Join(arrHeader1, RowDelimiter)

    Case 2 ' 2-D array... 3-D arrays are not handled

        If Transpose = True Then

            For i = LBound(arrHeader1, 2) To UBound(arrHeader1, 2)

                For j = LBound(arrHeader1, 1) To UBound(arrHeader1, 1)

                    strData = strData & FieldDelimiter & CStr(arrHeader1(j, i))

                Next j

                strData = strData & RowDelimiter

            Next i

       Else   ' not transposing:

            For i = LBound(arrHeader1, 1) To UBound(arrHeader1, 1)

                For j = LBound(arrHeader1, 2) To UBound(arrHeader1, 2)

                    strData = strData & CStr(arrHeader1(i, j))

                    If j &lt; UBound(arrHeader1, 2) Then
                        strData = strData & FieldDelimiter
                    End If

                Next j

                strData = strData & RowDelimiter

            Next i

        End If ' Transpose

    End Select

 '   .Write strData
 '   strData = vbNullString
    Erase arrHeader1

Else ' treat it as a string
    If LenB(arrHeader1) > 0 Then
        .Write arrHeader1
    End If
End If
End If 'Not IsMissing(arrHeader1)
End If 'Not IsEmpty(arrHeader1)

' **** **** **** HEADER2 **** **** ****
If Not IsMissing(arrHeader2) Then
If Not IsEmpty(arrHeader2) Then
If InStr(1, TypeName(arrHeader2), "(") > 1 Then  ' It's an array...

    Select Case ArrayDimensions(arrHeader2)
    Case 1  ' Vector array

       .Write Join(arrHeader2, RowDelimiter)

    Case 2 ' 2-D array... 3-D arrays are not handled

        If Transpose = True Then

            For i = LBound(arrHeader2, 2) To UBound(arrHeader2, 2)

                For j = LBound(arrHeader2, 1) To UBound(arrHeader2, 1)

                    strData = strData & FieldDelimiter & CStr(arrHeader2(j, i))

                Next j

                strData = strData & RowDelimiter

            Next i

       Else   ' not transposing:

            For i = LBound(arrHeader2, 1) To UBound(arrHeader2, 1)

                For j = LBound(arrHeader2, 2) To UBound(arrHeader2, 2)

                    strData = strData & CStr(arrHeader2(i, j))

                    If j &lt; UBound(arrHeader2, 2) Then
                        strData = strData & FieldDelimiter
                    End If

                Next j

                strData = strData & RowDelimiter

            Next i

        End If ' Transpose

    End Select        

 '   .Write strData
 '   strData = vbNullString
    Erase arrHeader2

Else ' treat it as a string
    If LenB(arrHeader2) > 0 Then
        .Write arrHeader2
    End If
End If
End If 'Not IsMissing(arrHeader2)
End If 'Not IsEmpty(arrHeader2)

' **** **** **** BODY **** **** ****

If InStr(1, TypeName(arrData), "(") > 1 Then
    ' It's an array...

    Select Case ArrayDimensions(arrData)
    Case 1

        If NoEmptyRows Then
            .Write Replace$(Join(arrData, RowDelimiter), RowDelimiter & RowDelimiter, "")
        Else
            .Write Join(arrData, RowDelimiter)
        End If

    Case 2

        If Transpose = True Then

            strEmpty = String(UBound(arrData, 1) - 1, FieldDelimiter) & RowDelimiter

            For i = LBound(arrData, 2) To UBound(arrData, 2)

                For j = LBound(arrData, 1) To UBound(arrData, 1)

                    strData = strData & FieldDelimiter & CStr(arrData(j, i))

                Next j

                strData = strData & RowDelimiter

                If (Len(strData) \ 1024) > BUFFERLEN Then

                    If NoEmptyRows Then
                        strData = Replace$(strData, strEmpty, "")
                        'strData = Replace$(strData, RowDelimiter & RowDelimiter, "")
                    End If

                    Application.StatusBar = "Cacheing data in a temp file... (" & Format(dblCount + (Len(strData) \ 1024), "0,000") & "kB)"

                    dblCount = dblCount + (Len(strData) \ 1024)
                    .Write strData
                    strData = vbNullString
                End If

            Next i

        Else   ' not transposing:

            strEmpty = String(UBound(arrData, 2) - 1, FieldDelimiter) & RowDelimiter

            For i = LBound(arrData, 1) To UBound(arrData, 1)

                For j = LBound(arrData, 2) To UBound(arrData, 2)

                    strData = strData & CStr(arrData(i, j))

                    If j &lt; UBound(arrData, 2) Then
                        strData = strData & FieldDelimiter
                    End If

                Next j

                strData = strData & RowDelimiter

                If (Len(strData) \ 1024) > BUFFERLEN Then

                    If NoEmptyRows Then
                        strData = Replace$(strData, strEmpty, "")
                        'strData = Replace$(strData, RowDelimiter & RowDelimiter, "")
                    End If

                    Application.StatusBar = "Cacheing data in a temp file... (" & Format(dblCount + (Len(strData) \ 1024), "0,000") & "kB)"

                    dblCount = dblCount + (Len(strData) \ 1024)
                    .Write strData
                    strData = vbNullString
                End If

            Next i

        End If ' Transpose

    End Select

    If NoEmptyRows Then
        strData = Replace$(strData, strEmpty, "")
        'strData = Replace$(strData, RowDelimiter & RowDelimiter, "")
    End If

    If Right$(strData, Len(RowDelimiter)) = RowDelimiter Then
        Mid$(strData, Len(strData) - Len(RowDelimiter), Len(RowDelimiter)) = ""
    End If

    .Write strData
    strData = vbNullString
    Erase arrData

Else ' treat it as a string

     .Write arrData

End If 
```

.Close
End With ' textstream object from objFSO.OpenTextFile

If CopyFilePath <> "" Then

```
Application.StatusBar = "Copying " & strName & " to " & CopyFilePath & "..."
objFSO.CopyFile strFile, CopyFilePath, True 
```

End If

Application.StatusBar = False
Set objFSO = Nothing
strData = vbNullString

End Sub 为了完整起见，这里是从文件读取到数组的补充函数，以及清理临时文件的粗略子程序：

```
``Public Sub FileToArray(arrData As Variant, strName As String, Optional MaxFileAge As Double = 0, Optional RowDelimiter As String = vbCr, Optional FieldDelimiter = vbTab, Optional CoerceLowerBound As Long = 0) ' Load a file created by FileToArray into a 2-dimensional array
' The file name is specified by strName, and it is exected to exist in the user's temporary folder.
' This is a deliberate restriction: it's always faster to copy remote files to a local drive than to edit them across the network
' If a Max File Age 'n' is specified, and n is greater than zero, files more than n seconds old will NOT be read.`` `' **** This code is in the Public Domain **** Nigel Heffernan [http://Excellerando.blogspot.com](http://Excellerando.blogspot.com)

On Error Resume Next

Dim objFSO As Scripting.FileSystemObject
Set objFSO = New Scripting.FileSystemObject

If objFSO Is Nothing Then
    Shell "Regsvr32.exe /s scrrun.dll", vbHide
    Application.Wait Now + (0.25 / 3600 / 24)
    Set objFSO = CreateObject("Scripting.FileSystemObject")
End If

If objFSO Is Nothing Then
    Exit Sub
End If

Dim strFile As String
Dim strTemp As String

Dim i   As Long
Dim j   As Long

Dim i_n As Long
Dim j_n As Long

Dim i_lBound As Long
Dim i_uBound As Long
Dim j_lBound As Long
Dim j_uBound As Long

Dim arrTemp1 As Variant
Dim arrTemp2 As Variant

Dim dblCount As Double

Set objFSO = New Scripting.FileSystemObject

If objFSO Is Nothing Then
    Shell "Regsvr32.exe /s scrrun.dll", vbHide
    Application.Wait Now + (0.25 / 3600 / 24)
    Set objFSO = CreateObject("Scripting.FileSystemObject")
End If

If objFSO Is Nothing Then
    Exit Sub
End If

strTemp = objFSO.GetSpecialFolder(Scripting.TemporaryFolder).ShortPath

strFile = objFSO.BuildPath(strTemp, strName)

If Not objFSO.FileExists(strFile) Then
    Exit Sub
End If

If MaxFileAge > 0 Then
    ' If the file's a bit elderly, bail out - the calling function will refresh the data from source
    If objFSO.GetFile(strFile).DateCreated + (MaxFileAge / 3600 / 24) < Now Then
        Set objFSO = Nothing
        Exit Sub
    End If

End If

Application.StatusBar = "Reading the file... (" & strName & ")"

arrData = Split2d(objFSO.OpenTextFile(strFile, ForReading).ReadAll, RowDelimiter, FieldDelimiter, CoerceLowerBound)

Application.StatusBar = "Reading the file... Done"

Set objFSO = Nothing

End Sub

Public Sub RemoveTempFiles(ParamArray FileNames())

On Error Resume Next

Dim objFSO As Scripting.FileSystemObject
Set objFSO = New Scripting.FileSystemObject

If objFSO Is Nothing Then
    Shell "Regsvr32.exe /s scrrun.dll", vbHide
    Application.Wait Now + (0.25 / 3600 / 24)
    Set objFSO = CreateObject("Scripting.FileSystemObject")
End If

If objFSO Is Nothing Then
    Exit Sub
End If

Dim varName As Variant
Dim strName As String
Dim strFile As String
Dim strTemp As String

strTemp = objFSO.GetSpecialFolder(Scripting.TemporaryFolder).ShortPath

For Each varName In FileNames

```
strName = vbNullString
strFile = vbNullString

strName = CStr(varName)
strFile = objFSO.BuildPath(strTemp, strName)

If objFSO.FileExists(strFile) Then
    objFSO.DeleteFile strFile, True
End If 
```

Next varName

Set objFSO = Nothing

End Sub` 
```

``我建议您将其保留在 Option Private Module 下的模块中 - 这不是我希望其他用户直接从工作表调用的那种功能。`` `* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2012-08-21T08:58:56.217

这是不可能的（有点）。

包含分隔符的字段必须用引号引起来。否则，该字段将被分隔符“一分为二”。

唯一的解决方案是使用不同的分隔符，例如制表符（有效地将其更改为 TSV 文件），这当然只有在数据中也没有出现新的分隔符时才有效。

* * *

## 回答 #3

> 赞同：0
> 
>             
> 
> 时间：2012-08-21T09:38:16.823

如果这些`SaveAs`格式都不适合您，请编写您的解析器，例如

```
Sub SaveFile()
    Dim rng As Range
    Dim rw As Range
    Dim ln As Variant

    ' Set rng to yout data range, eg
    Set rng = ActiveSheet.UsedRange

    Open "C:\Temp\TESTFILE.txt" For Output As #1    ' Open file for output.
    For Each rw In rng.Rows
        ln = Join(Application.Transpose(Application.Transpose(rw)), vbTab)
        Print #1, ln; vbNewLine;
    Next
    Close #1
End Sub 
```` 
```

# javascript - 仅检索到最后一行二维数组

> ID：12051226
> 
> 赞同：2
> 
> 时间：2012-08-21T08:47:48.400
> 
> 标签：javascript, jquery

数组 slidesArray 是二维数组。它充满了 2 行。问题是当尝试在 jQuery 上使用 (each) 函数时它只得到最后一行。

这是代码：

```
jQuery.each(slidesArray,function(index,value) {
    $("#slider").show();

    var linkHref = value[1];
    var imageSource = value[0];;

    $("#slider").html(
        "<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>")
        .fadeOut(5000);
}); 
```

那么，问题或原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:53:16.170

纠正这个

```
 $("#slider").html
            (
                "<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>"
            ).fadeOut(5000); 
```

至

```
 $("#slider").html
            ($("#slider").html()+
                "<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>"
            ).fadeOut(5000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:53:14.547

```
$("#slider").append("<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>").fadeOut(5000); 
```

“html”应替换为“附加”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:20:55.917

看起来你想添加项目以`$("#slider")`淡出它们然后用新项目替换它们，`.html()`不等待[`.fadeOut()`](http://api.jquery.com/fadeOut/)，你可以使用`.fadeOut()`回调来替换淡出后的项目。

```
function fadeFunc(){
    var i = $("#slider").data('current')+1;
    if (i < slidesArray.length){
        $("#slider").data('current', i);
        var linkHref = slidesArray[i][1];
        var imageSource = slidesArray[i][0];

        $("#slider").html(
            "<a href='" + linkHref + "'><img src='"+ imageSource + "'></a>")
            .fadeOut(5000, fadeFunc);            
    }
} 

$("#slider").data('current', 0)
    .html("<a href='" + slidesArray[0][1] + "'><img src='"+ slidesArray[0][0] + "'></a>")
    .fadeOut(5000, fadeFunc); 
```

# cakephp - cakePHP 2 中的 javascript 助手发生了什么变化？

> ID：12051234
> 
> 赞同：5
> 
> 时间：2012-08-21T08:48:38.897
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我已经使用了这个[项目](http://bakery.cakephp.org/articles/agusti/2010/02/02/transparent-datepicker-with-jquery)并得到了这个错误：

```
Missing Helper
Error: JavascriptHelper could not be found.
Error: Create the class JavascriptHelper below in file: app/View/Helper/JavascriptHelper.php
<?php
     class JavascriptHelper extends AppHelper {
 } 
```

确实，这个文件不存在，我尝试在我的辅助数组中使用“Js”。

```
class myClassController expend AppController {
    var $helpers = array('Html', 'Js'); // and not 'Javascript'); 
```

在代码中，该方法`$this->Javascript->codeBlock`被调用以添加一个javascript方法（在内容中间而不是标题中）但也没有$this->Js->codeBlockcodeBlock。

```
$output .= $this->Js->codeBlock("datepick('" . $htmlAttributes['id'] . "','01/01/" . $options['minYear'] . "','31/12/" . $options['maxYear'] . "');"); 
```

你能解释一下旧的 Javascript 助手发生了什么或者如何让代码工作吗？

还有其他可以与 CakePHP-2.0 一起使用的助手吗？

亲切地，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-21T08:53:58.400

你读过迁移指南吗？如果现在不这样做：http: [//book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#xmlhelper-ajaxhelper-and-javascripthelper-removed](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html#xmlhelper-ajaxhelper-and-javascripthelper-removed)

> XmlHelper、AjaxHelper 和 JavascriptHelper 已删除 AjaxHelper 和 JavascriptHelper 已被删除，因为它们在 1.3 版中已被弃用。XmlHelper 已被删除，因为随着对 Xml 的改进，它已过时且多余。Xml 类应该用于替换以前使用的 XmlHelper。
> 
> AjaxHelper 和 JavascriptHelper 被 JsHelper 和 HtmlHelper 取代。
> 
> JsHelper JsBaseEngineHelper 现在是抽象的，您将需要实现以前生成错误的所有方法。

所以

```
$this->Js->codeBlock('...'); 
```

就是现在

```
$this->Html->codeBlock('...'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:00:31.060

```
HtmlHelper::scriptBlock($code, $options = array())
    //Parameters:   

    $code (string) – The code to go in the script tag.
    $options (array) – An array of html attributes. 
```

# php - 字符串处理——从一个字符串中获取20个单词

> ID：12051237
> 
> 赞同：2
> 
> 时间：2012-08-21T08:48:51.057
> 
> 标签：php

我想知道从英语句子中获取前 20 个单词的方法是什么。在进一步处理之前，我需要分析它的主语和动词。因为有些句子没用所以我不需要分析它们，而是转储它们:-D

好的，初学者先开始总是更好（pss有一句谚语或说法很符合我在英语中的要求 - 我是一个非常活跃的英语学习者;-D）

干得好：

```
$array=explode($string," ");
$con=$array[0];
$i=0;
foreach($array as $v)
{
  if($i++ == 20){break;}
  $con.=" ".$v[i];
} 
```

哦，yezzz，任何人都可以帮助提供更整洁的功能或方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:51:34.710

您可以使用众所周知的 php 函数`substr`这是用法...

```
string substr ( string $string , int $start [, int $length ] ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T08:54:37.470

[`array_slice()`](http://uk.php.net/manual/en/function.array-slice.php)将为您切片数组。只需指定开始和结束元素：

```
$words = explode($string, ' ');
$firstTwenty = array_slice($words, 0, 20); 
```

如果您想变得非常紧凑（但可读性较差），请改为执行以下操作：

```
$twentyWords= array_slice(explode($string, ' '), 0, 20); 
```

`$twentyWords`将是一个数组。如果要将其连接回字符串，只需使用[`implode()`](http://php.net/manual/en/function.implode.php)：

```
$newString = implode(' ', $twentyWords); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:56:53.350

你可以试试这个功能...

```
$first_twenty_words = wordlimit($string, 20);

function wordlimit($string, $length = 20) 
{ 
   $words = explode(' ', $string); 
   if (count($words) > $length) 
       return implode(' ', array_slice($words, 0, $length)); 
   else 
       return $string; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:57:00.127

这将使用空格作为单词边界分割单词并返回前 20 个：

```
implode(' ', array_slice(explode(' ', $sentence), 0, 20)); 
```

在某些情况下，单词边界可能不是空格；你也可以看看[`preg_match`](http://php.net/manual/en/function.preg-match.php)and `\b`。

> 信用：[如何选择句子的前 10 个单词？](https://stackoverflow.com/questions/5956610/how-to-select-first-10-words-of-a-sentence)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:03:51.960

通过这种方式，您可以获得任何字符串的前 20 个单词：

```
 $str = "this is a string and i want to slice string after 20 words.
this is a string and i want to slice string after 20 words";

    $strArray = explode(" ",$str);
    $strArray = array_slice($strArray,0 , 20);
    $string =  implode(" ",$strArray);
    echo $string; 
```

# css - 使用-webkit的水平框布局的CSS问题

> ID：12051238
> 
> 赞同：0
> 
> 时间：2012-08-21T08:48:58.843
> 
> 标签：css, webkit

代码： http: [//jsfiddle.net/YM5Cb/](http://jsfiddle.net/YM5Cb/) 请看小提琴。我正在尝试 webkit 模型。我正在尝试水平盒子布局。查看右上角的面板，它的高度大于其父级。如何使其高度与其父级高度相同

上述演示仅适用于 chrome 和 safari。我正在学习为 android 和 ios 设备创建 HTML 5 应用程序。这就是我使用 webkit 的原因。所以它足以让代码在 chrome 和 safari 上工作，所以它可以在 ios 和 android 设备上正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:56:59.283

也许您可以尝试`height:auto`为子框/div设置属性

# sql-server-2008 - 所有用户的权限不足 - 如何在数据库级别更改用户设置？

> ID：12051239
> 
> 赞同：0
> 
> 时间：2012-08-21T08:48:59.943
> 
> 标签：sql-server-2008, dynamics-crm-2011

我刚刚安装了 MS CRM 2011，对其进行了定制，导入了大量数据，然后我更改了一些设置：团队、业务部门、用户角色等。刷新后，所有用户都被锁定了。

我们现在正在尝试通过 SQL 数据库重置用户设置，但我们不确定要编辑哪些表以及如何编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:56:30.517

**不要这样做！**

权限仅在应用程序内进行管理。通过直接 SQL 执行此操作是完全不受支持的，并且会以泪水告终。数据库级别的安全模型很复杂且没有文档记录。如果您手动操作它，您可以肯定会破坏您的安装并需要完全重新安装。

希望您没有更改默认角色。如果是这种情况，请将默认角色授予用户，然后将这些角色*复制*为新角色的基础以供您自定义。

很可能您已经删除了对用户数据、核心记录和系统设置的读取和写入等内容的访问权限，但手动将这些重新拼凑起来可能会很痛苦。

如果您覆盖了原始角色，则根据您拥有的 CRM 2011 版本，您可以恢复原始角色定义：

1.  配置新的“临时”CRM 租户
2.  创建新解决方案（设置 > 解决方案 > 新建）
3.  将默认角色添加到您的新解决方案
4.  将解决方案导出为非托管解决方案（zip 文件）
5.  将解决方案导入原始租户

然后，您应该已经恢复了角色，并且可以有效地重新开始您的安全自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:07:27.973

（从我原来的“更干净”的答案移动）。

OP 可能从所有用户 (TBC) 中删除了系统管理员角色。**如果是这样，仍然不支持**使用 SQL 将该角色恢复给用户，但相对容易做到：

```
-- Get id of sys admin role:
SELECT RoleId from [YourOrg_MSCRM].dbo.RoleBase where Name = 'System Administrator'

-- Get id of user to grant access
SELECT systemuserid from [YourOrg_MSCRM].dbo.SystemUserBase where DomainName = 'MyDomain\MyUser'

-- Check role is not already granted (result should be 0)
SELECT COUNT(*) FROM [YourOrg_MSCRM].dbo.SystemUserRoles WHERE RoleId = '[Id of Role]' AND SystemUserId = '[Id of user]'

-- Insert role against that user
INSERT INTO [YourOrg_MSCRM].[dbo].[SystemUserRoles]([SystemUserId],[RoleId],[SystemUserRoleId])
 VALUES ([Id of user] ,[Id of role], NEWID()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:56:27.140

在尝试以下步骤之前，我将创建一个新租户，以确保您的主数据库/AD 环境仍然正常工作。如果可行，那么我将尝试从备份中恢复。

如果您有更改之前的数据库备份，则可以使用[导入组织过程](http://technet.microsoft.com/en-us/library/hh127042.aspx)，这应该会使您恢复到以前的状态。在开始之前，您需要备份租户和主数据库。

1.  删除租户数据库
2.  恢复租户数据库

如果它仍然不起作用：

1.  从部署管理器中删除租户（您必须先禁用它）
2.  使用导入组织流程重新创建租户

如果不这样做，您可以[从头开始重建](http://technet.microsoft.com/en-us/library/hh699759)

# iphone - iPhone：关于 UIPopoverController 自动调整大小

> ID：12051242
> 
> 赞同：0
> 
> 时间：2012-08-21T08:49:26.027
> 
> 标签：iphone, ios, xcode

我在 ScrollView 中有一个 Button，当用户触摸该按钮时它会弹出一个 UIPopoverController。

我的问题是：当我向上滚动按钮并触摸它时，Popover 窗口会自动缩小。所以无论如何要修复 Popover 的大小或收听缩小行为？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:19:35.850

我通过更改 popovercontroller.presentPopoverFromRect.myRect; 来解决它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:36:15.777

不要将弹出箭头方向保持在顶部。当顶部没有空间时，保留它 `UIPopoverArrowDirectionAny`，这将允许弹出框显示在按钮的底部。

# android - 使用 Files.List() API 在 Android 上列出 Google Drive 文件

> ID：12051244
> 
> 赞同：2
> 
> 时间：2012-08-21T08:49:29.023
> 
> 标签：android, google-drive-api

目前我需要制作一个可以列出所有 Google Drive 文件的应用程序。我已经完成了帐户选择和 oauth 过程，并且已经获得了令牌。但是当我尝试使用 API 调用列出我在 Google Drive 上的所有文件（通过使用 drive.files.list）时，我没有得到任何结果，应该保存所有文件的文件数组列表仍然是空的。
我也有错误：

> java.net.unknownHostException www.googleapis.com 无法解决

这是我的代码：

```
SharedPreferences settings = getSharedPreferences(PREF, 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("accountName", got.name);
    editor.commit();
    account=got;
    amf=accMgr.getAuthToken(account, authTokenType, true,
                new AccountManagerCallback<Bundle>(){
                    public void run(AccountManagerFuture<Bundle> arg0) {
                        try {
                            Bundle result;
                            Intent i;
                            String token;
                            Drive a;
                            result = arg0.getResult();
                            if (result.containsKey(accMgr.KEY_INTENT)) {
                                i = (Intent)result.get(accMgr.KEY_INTENT);
                                if (i.toString().contains("GrantCredentialsPermissionActivity")) {
                                    // Will have to wait for the user to accept
                                    // the request therefore this will have to
                                    // run in a foreground application
                                    cbt.startActivity(i);
                                } else {
                                    cbt.startActivity(i);
                                }

                            }
                            else if (result.containsKey(accMgr.KEY_AUTHTOKEN)) {
                                accessProtectedResource.setAccessToken(result
                                        .getString(accMgr.KEY_AUTHTOKEN));
                                   buildService(result
                                        .getString(accMgr.KEY_AUTHTOKEN),API_KEY);
                            /*else {
                                token = (String)result.get(AccountManager.KEY_AUTHTOKEN);*/

                                /*
                                 * work with token
                                 */

                                // Remember to invalidate the token if the web service rejects it
                                // if(response.isTokenInvalid()){
                                //    accMgr.invalidateAuthToken(authTokenType, token);
                                // }

                            }
                        } catch (OperationCanceledException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (AuthenticatorException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    }
                }, handler);

}

private void buildService(final String authToken, final String ApiKey) {
    HttpTransport httpTransport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();
    Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
    b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
        @Override
        public void initialize(JsonHttpRequest request) throws IOException {
            DriveRequest driveRequest = (DriveRequest) request;
            driveRequest.setPrettyPrint(true);
            driveRequest.setKey(ApiKey);
            driveRequest.setOauthToken(authToken);
        }
    });
    System.out.println(authToken);
    service= b.build();
    List<File> a=new ArrayList<File>();
    try {
        a = retrieveDriveFile(service);
        System.out.println(a.size());
        File c=a.get(0);
        TextView ad=(TextView) findViewById(R.id.test);
        ad.setText(c.getOriginalFilename());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public List<File> retrieveDriveFile(Drive service) throws IOException{
    List<File> result = new ArrayList<File>();
    Files.List request = service.files().list();

    do {
      try {
        FileList files = request.execute();

        result.addAll(files.getItems());
        request.setPageToken(files.getNextPageToken());
      } catch (IOException e) {
        System.out.println("An error ssoccurred: " + e);
        request.setPageToken(null);
      }
    } while (request.getPageToken() != null &&
             request.getPageToken().length() > 0);

    return result;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T15:31:20.290

如果您的设备上没有可用的互联网连接，通常会发生这种情况。

另外不要忘记添加以下权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

如果您在代理后面，也可能发生这种情况。如果是这种情况，请看看[这个问题](https://stackoverflow.com/questions/1838140/how-do-i-fix-this-unknownhostexception)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T07:26:09.150

如果您想从 Goolge Drive 获取所有文件。假设您已经完成了 Account Choose 过程和创建 Drive (Drive mService) 等。现在在 Button Click Event 下调用此函数

```
 ButtonClickEvent
  {
     GetDriveData();
  }
        // FUNCTION TO RETRIEVE GOOGLE DRIVE DATA
 private void GetDriveData() 
    {
       private List<File>   mResultList;                
      Thread t = new Thread(new Runnable() 
    {
        @Override
        public void run() 
        {
              mResultList = new ArrayList<File>();
            com.google.api.services.drive.Drive.Files f1 = mService.files();
            com.google.api.services.drive.Drive.Files.List request = null;

            do 
            {
                try 
                { 
                    request = f1.list();
                    request.setQ("trashed=false");
                    com.google.api.services.drive.model.FileList fileList = request.execute();
                    mResultList.addAll(fileList.getItems());

                }
                catch (UserRecoverableAuthIOException e)
                {
                    startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
                } 
                catch (IOException e)
                {
                    e.printStackTrace();
                    if (request != null)
                    {
                        request.setPageToken(null);
                    }
                }
            } while (request.getPageToken() !=null && request.getPageToken().length() > 0);

            populateListView();//Calling to Populate Data to the List
        }

    });
    t.start();
}

 //Populating Retrieved data to List
 private void populateListView() 
    {
        runOnUiThread(new Runnable() 
            {
                @Override
                public void run() 
                {

                    mFileArray = new String[mResultList.size()];
                    int i = 0;
                    for(File tmp : mResultList)
                    {
                        //System.out.println("FILE DATA "+tmp.getId()+"."+tmp.getFileSize()+".."+tmp.getFileExtension()+",,"+tmp.getMimeType()+"/"+tmp.getTitle());
                        mFileArray[i] = tmp.getTitle();
                    i++;
                    }

                    mAdapter = new ArrayAdapter<String>(mContext, android.R.layout.simple_list_item_1, mFileArray);
                mListView.setAdapter(mAdapter);
                    button2.setText("yes");
                }
            });
        } 
```

# python - Python - TypeError：需要可迭代参数

> ID：12051246
> 
> 赞同：1
> 
> 时间：2012-08-21T08:49:37.167
> 
> 标签：python, list, typeerror, iterable

当我尝试执行以下代码时，我得到**“TypeError：需要可迭代参数” ：**

```
for i in range(len(SE_FE_Lists)):                    
    print "** ", SE_FE_Lists[i]["List_contents"]
    if ":" in SE_FE_Lists[i]["List_contents"]:
        print ": ", SE_FE_Lists[i]
        print "*--* ", SE_FE_Lists[i]["List_contents"]
    if " " in SE_FE_Lists[i]["List_contents"]:
        print "Space :", SE_FE_Lists[i]
        print "*--* ", SE_FE_Lists[i]["List_contents"] 
```

错误位于**List[i]["List_contents"] 中的 if ":" 行中：**

清单内容：

```
[{'List_selection': 'List1', 'List_contents': '1:4'}, {'List_selection': 'List2', 'List_contents': '1 2 4'}, {'List_selection': 'List3',
 'List_contents': 1}] 
```

作为输出我得到：

```
**  1:4

:  {'List_selection': 'List1', 'List_contents': '1:4'}

*--*  1:4

**  1 2 4

Space : {'List_selection': 'List2', 'List_contents': '1 2 4'}

*--*  1 2 4

**  1 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:55:08.977

首先，如果你想遍历你的对象列表的项目，你应该使用 pythonic 的方式来做它：

```
for item in List:

    if ":" in item["List_contents"]:
        print "*--* ", item["List_contents"]
    if " " in item["List_contents"]:
        print "*--* ", item["List_contents"] 
```

对于您遇到的错误，您的对象似乎`List`不是字典列表。

编辑 ：

在您的版本之后，问题是由于您的 List 的最后一项 : `{'List_selection': 'List3', 'List_contents': 1}`，这里的成员 'List_contents' 是一个整数，python 在整数中找不到“：”...如果你不能修改内容在列表中，尝试强制 python 使用以下`str()`方法的字符串：

```
if ":" in str(item["List_contents"]): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:10:59.560

问题是您的字典中有一个整数，而不是可迭代的：

```
{'List_selection': 'List3', 'List_contents': 1} 
```

这一行：

```
if ":" in SE_FE_Lists[i]["List_contents"]: 
```

正在寻找整数中的“：” `1`。运算符`in`需要一个可迭代的，而不是整数，所以这显然是错误。如果列表内容看起来像这样，它应该可以工作：

```
{'List_selection': 'List3', 'List_contents': '4 5 6'} 
```

# facebook - 我无法访问 developer.facebook.com

> ID：12051251
> 
> 赞同：2
> 
> 时间：2012-08-21T08:49:47.557
> 
> 标签：facebook

## 问题

我正在尝试使用用户帐户访问developers.facebook.com *，*[但](http://developers.facebook.com)我只得到一个空白页面。我阅读了一些关于如何成为 Facebook 开发人员的文章。根据文章，您必须至少有一个朋友、一个经过验证的帐户，并且您必须将 Facebook 开发人员应用程序添加到您的帐户中。除了添加开发者应用程序之外，我做了所有这些。当我搜索开发者应用程序并尝试访问开发者应用程序的页面时，我被重定向到我的“主页”页面（请参阅附录）。

 *Stackoverflow 上有很多问题描述了完全相同的行为。例如：

1.  [如何访问 Facebook 开发者应用程序？](https://stackoverflow.com/questions/8763109/how-do-i-access-facebook-developer-app)
2.  [无法登录到 Facebook 开发者应用程序，而是被重定向到我的 Facebook 页面](https://stackoverflow.com/questions/10066711/cant-login-to-facebook-developer-app-getting-redirected-to-my-facebook-page-ins)

*他们都表示，问题在于如果您使用企业*或*页面*帐户，您将无法成为开发人员。所以我试图找出我的帐户是否属于这种类型。Facebook 文档说：

> 企业帐户专为只想使用 Facebook 管理主页及其广告活动的用户而设计。您可以使用企业帐户查看您创建的所有页面和社交广告。您还可以通过企业帐户在 Facebook 上查看其他人的公开信息，但您无法在主页上下文之外与这些人互动。而且，与个人帐户不同，企业帐户无法在搜索、发送或接收好友请求或创建/开发应用程序中找到。（[链接](http://www.facebook.com/help/131976240210052)）

由于我添加了另一个帐户作为朋友，我不认为该帐户是*企业*或*页面*帐户。

## 到目前为止我尝试过的

首先，我删除了所有的 cookie，以确保这些不是问题。我还尝试了另一个浏览器（Chrome 21 和 Firefox 14）。访问developers.facebook.com 的子页面也会导致重定向到我的主页。

## 问题

1.  如何将开发者应用添加到我的帐户？
2.  如何访问developers.facebook.com？

## 附录

![将 Facebook 开发者应用添加到您的帐户](../Images/116068308f4e14918fcd051e9c6acfc3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T07:47:05.777

很久之后，我想我找到了问题所在。我得到的帐户实际上是一个*用户*帐户。但这是一个*测试用户*帐户。这些帐户非常有限，不能用于访问[developers.facebook.com](http://developers.facebook.com)。[您可以在Facebook 文档](https://developers.facebook.com/docs/test_users/)中阅读有关测试用户的更多信息。

我还写道：

> 由于我添加了另一个帐户作为朋友，我不认为该帐户是企业或页面帐户。

有趣的是，我添加的帐户也是一个*测试用户*帐户。这些人可以互相成为朋友，但不能*成为真实*账户。*

# php - 如何使用 PHP 向 Lotus domino 服务器中的群组发送电子邮件

> ID：12051252
> 
> 赞同：0
> 
> 时间：2012-08-21T08:49:49.740
> 
> 标签：php, email, lotus-domino

我在 PHP 中有一个代码，可以向用户发送电子邮件并按预期工作。我需要帮助来弄清楚如何向 Lotus Notes 中定义的组发送电子邮件。所以基本上存在一个名为 DEV TEAM 的组，如果我直接输入，PHP 会抛出`501 Syntax error, parameters in command....`. 那么，有没有办法弄清楚如何检索该组的电子邮件地址格式或任何其他发送电子邮件的方式。

我和你们这里的所有大师都知道，我肯定会得到一些解决方案:)。感谢您提前提供任何帮助。

如果我可以提供任何其他详细信息，请告诉我。

我可以通过该代码向用户发送电子邮件，但不能向 Lotus Notes 中的组发送电子邮件。

```
<?php
$to = "testuserto@domain.com";
$subject = "TEST EMAIL";
$message = "Hello! Its is test email.";
$from = "testuser@domain.com";
$headers = "From:" . $from . "\r\n";;
$headers .= "Content-Type: text/html";
mail($to,$subject,$message,$headers);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:39:54.010

请参阅我对您的问题的评论。如果我的假设是正确的，那么 Domino 服务器的管理员必须检查以下内容：

*   DEV TEAM 是 Domino 目录中的有效组，类型为“Mail Only”或“Multi-Purpose”。
*   DEV TEAM 组中没有可以限制匿名用户向其发送邮件的 reader 字段。
*   服务器的配置文档中没有阻止邮件发送到组的邮件规则或限制。
*   Domino 目录中的 DEV TEAM 组文档中的 Internet 地址字段已配置。这应该是一个有效的 RFC-821 地址，例如 DEV_TEAM@yourDomain.com（这可能是可选的，但它更容易记录解决方案。）

确认上述配置信息后，您的代码应使用在 Domino 目录中 DEV TEAM 组的 Internet 地址字段中配置的值。（即，DEV_TEAM@yourDomain.com）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:43:50.407

我的猜测是，这与它是 Domino 服务器这一事实几乎没有关系。我假设 $from 或 $to 中的地址格式错误。另请参阅[http://www-01.ibm.com/support/docview.wss?uid=swg21105288](http://www-01.ibm.com/support/docview.wss?uid=swg21105288)，关于严格的 RFC821 格式，其中需要“<”和“>”。在任何情况下，发送到“dev team@domain.com”的邮件都不起作用，地址无效。

# android - 安卓GCM实现

> ID：12051253
> 
> 赞同：2
> 
> 时间：2012-08-21T08:49:50.660
> 
> 标签：android, google-cloud-messaging

我想实现谷歌云消息服务 CCM。但我收到强制关闭错误。我正在真实设备上调试代码。我的 Main.java 代码如下：

```
package com.imran.fgcm;

import com.google.android.gcm.GCMRegistrar;
import android.os.Bundle;
import android.app.Activity;
import android.widget.Toast;

public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, "123450000");
          Toast.makeText(this, regId , Toast.LENGTH_LONG).show();
        } else {
        // Log.v(TAG, "Already registered");
            Toast.makeText(this, "Already registered" , Toast.LENGTH_LONG).show();
        } 
```

我的android清单文件代码如下：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.imran.fgcm"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />
    <permission android:name="com.imran.fgcm.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.imran.fgcm.permission.C2D_MESSAGE" /> 
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

  <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver" android:permission="com.google.android.c2dm.permission.SEND" >
  <intent-filter>
    <action android:name="com.google.android.c2dm.intent.RECEIVE" />
    <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
    <category android:name="com.imran.fgcm" />
  </intent-filter>
</receiver>
<service android:name=".GCMIntentService" />
    </application>

</manifest> 
```

现在，在我添加 GCMIntetservice.java 类后，它已经停止给出强制关闭错误。但它仍然没有对设备 ID 进行分类。我的 logcat 输出是

```
01-03 11:34:01.023: V/GCMRegistrar(6469): Registering receiver
01-03 11:34:01.023: D/GCMRegistrar(6469): resetting backoff for com.imran.fgcm
01-03 11:34:01.058: V/GCMRegistrar(6469): Registering app com.imran.fgcm of senders 732773857047
01-03 11:34:01.288: D/TextLayoutCache(6469): Using debug level: 0 - Debug Enabled: 0
01-03 11:34:01.843: D/CLIPBOARD(6469): Hide Clipboard dialog at Starting input: finished by someone else... !
01-03 11:34:03.138: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-03 11:34:03.138: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:03.138: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:03.143: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-1
01-03 11:34:03.148: D/GCMBaseIntentService(6469): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-03 11:34:03.148: D/GCMBaseIntentService(6469): Registration error: SERVICE_NOT_AVAILABLE
01-03 11:34:03.148: D/GCMBaseIntentService(6469): Scheduling registration retry, backoff = 4143 (3000)
01-03 11:34:03.213: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:07.318: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.gcm.intent.RETRY
01-03 11:34:07.318: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:07.318: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:07.353: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-2
01-03 11:34:07.368: V/GCMRegistrar(6469): Registering app com.imran.fgcm of senders 732773857047
01-03 11:34:07.398: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:07.443: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-03 11:34:07.443: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:07.443: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:07.453: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-3
01-03 11:34:07.458: D/GCMBaseIntentService(6469): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-03 11:34:07.458: D/GCMBaseIntentService(6469): Registration error: SERVICE_NOT_AVAILABLE
01-03 11:34:07.458: D/GCMBaseIntentService(6469): Scheduling registration retry, backoff = 7873 (6000)
01-03 11:34:07.503: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:07.508: D/dalvikvm(6469): GC_CONCURRENT freed 213K, 4% free 12852K/13319K, paused 3ms+3ms
01-03 11:34:15.343: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.gcm.intent.RETRY
01-03 11:34:15.343: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:15.343: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:15.378: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-4
01-03 11:34:15.393: V/GCMRegistrar(6469): Registering app com.imran.fgcm of senders 732773857047
01-03 11:34:15.428: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:15.498: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-03 11:34:15.498: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:15.498: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:15.503: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-5
01-03 11:34:15.508: D/GCMBaseIntentService(6469): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-03 11:34:15.508: D/GCMBaseIntentService(6469): Registration error: SERVICE_NOT_AVAILABLE
01-03 11:34:15.508: D/GCMBaseIntentService(6469): Scheduling registration retry, backoff = 7347 (12000)
01-03 11:34:15.538: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:22.863: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.gcm.intent.RETRY
01-03 11:34:22.863: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:22.863: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:22.908: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-6
01-03 11:34:22.923: V/GCMRegistrar(6469): Registering app com.imran.fgcm of senders 732773857047
01-03 11:34:22.958: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:22.968: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-03 11:34:22.968: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:22.968: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:22.978: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-7
01-03 11:34:22.978: D/GCMBaseIntentService(6469): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-03 11:34:22.983: D/GCMBaseIntentService(6469): Registration error: SERVICE_NOT_AVAILABLE
01-03 11:34:22.983: D/GCMBaseIntentService(6469): Scheduling registration retry, backoff = 35123 (24000)
01-03 11:34:23.013: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:58.113: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.gcm.intent.RETRY
01-03 11:34:58.118: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:58.118: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:58.153: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-8
01-03 11:34:58.168: V/GCMRegistrar(6469): Registering app com.imran.fgcm of senders 732773857047
01-03 11:34:58.203: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:34:58.228: V/GCMBroadcastReceiver(6469): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-03 11:34:58.228: V/GCMBroadcastReceiver(6469): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:34:58.228: V/GCMBaseIntentService(6469): Acquiring wakelock
01-03 11:34:58.233: V/GCMBaseIntentService(6469): Intent service name: GCMIntentService-732773857047-9
01-03 11:34:58.238: D/GCMBaseIntentService(6469): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-03 11:34:58.238: D/GCMBaseIntentService(6469): Registration error: SERVICE_NOT_AVAILABLE
01-03 11:34:58.238: D/GCMBaseIntentService(6469): Scheduling registration retry, backoff = 67761 (48000)
01-03 11:34:58.268: V/GCMBaseIntentService(6469): Releasing wakelock
01-03 11:35:50.863: D/CLIPBOARD(6469): Hide Clipboard dialog at Starting input: finished by someone else... !
01-03 11:35:52.688: E/ActivityThread(6469): Activity com.imran.fgcm.Main has leaked IntentReceiver com.google.android.gcm.GCMBroadcastReceiver@41903ec8 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-03 11:35:52.688: E/ActivityThread(6469): android.app.IntentReceiverLeaked: Activity com.imran.fgcm.Main has leaked IntentReceiver com.google.android.gcm.GCMBroadcastReceiver@41903ec8 that was originally registered here. Are you missing a call to unregisterReceiver()?
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:763)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:567)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1118)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ContextImpl.registerReceiver(ContextImpl.java:1105)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:355)
01-03 11:35:52.688: E/ActivityThread(6469):     at com.google.android.gcm.GCMRegistrar.setRetryBroadcastReceiver(GCMRegistrar.java:293)
01-03 11:35:52.688: E/ActivityThread(6469):     at com.google.android.gcm.GCMRegistrar.register(GCMRegistrar.java:215)
01-03 11:35:52.688: E/ActivityThread(6469):     at com.imran.fgcm.Main.onCreate(Main.java:19)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.Activity.performCreate(Activity.java:4470)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.os.Looper.loop(Looper.java:137)
01-03 11:35:52.688: E/ActivityThread(6469):     at android.app.ActivityThread.main(ActivityThread.java:4511)
01-03 11:35:52.688: E/ActivityThread(6469):     at java.lang.reflect.Method.invokeNative(Native Method)
01-03 11:35:52.688: E/ActivityThread(6469):     at java.lang.reflect.Method.invoke(Method.java:511)
01-03 11:35:52.688: E/ActivityThread(6469):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-03 11:35:52.688: E/ActivityThread(6469):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-03 11:35:52.688: E/ActivityThread(6469):     at dalvik.system.NativeStart.main(Native Method)
01-03 11:36:06.028: V/GCMRegistrar(6860): Registering receiver
01-03 11:36:06.033: D/GCMRegistrar(6860): resetting backoff for com.imran.fgcm
01-03 11:36:06.053: V/GCMRegistrar(6860): Registering app com.imran.fgcm of senders 732773857047
01-03 11:36:06.093: D/TextLayoutCache(6860): Using debug level: 0 - Debug Enabled: 0
01-03 11:36:06.178: D/CLIPBOARD(6860): Hide Clipboard dialog at Starting input: finished by someone else... !
01-03 11:36:06.203: V/GCMBroadcastReceiver(6860): onReceive: com.google.android.c2dm.intent.REGISTRATION
01-03 11:36:06.203: V/GCMBroadcastReceiver(6860): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:36:06.203: V/GCMBaseIntentService(6860): Acquiring wakelock
01-03 11:36:06.218: V/GCMBaseIntentService(6860): Intent service name: GCMIntentService-732773857047-1
01-03 11:36:06.238: D/GCMBaseIntentService(6860): handleRegistration: registrationId = null, error = SERVICE_NOT_AVAILABLE, unregistered = null
01-03 11:36:06.238: D/GCMBaseIntentService(6860): Registration error: SERVICE_NOT_AVAILABLE
01-03 11:36:06.238: D/GCMBaseIntentService(6860): Scheduling registration retry, backoff = 2363 (3000)
01-03 11:36:06.263: V/GCMBaseIntentService(6860): Releasing wakelock
01-03 11:36:08.618: V/GCMBroadcastReceiver(6860): onReceive: com.google.android.gcm.intent.RETRY
01-03 11:36:08.618: V/GCMBroadcastReceiver(6860): GCM IntentService class: com.imran.fgcm.GCMIntentService
01-03 11:36:08.618: V/GCMBaseIntentService(6860): Acquiring wakelock
01-03 11:36:08.653: V/GCMBaseIntentService(6860): Intent service name: GCMIntentService-732773857047-2
01-03 11:36:08.668: E/GCMBaseIntentService(6860): Received invalid token: 1111101101100100100110110001110011001001010011110110001010010110
01-03 11:36:08.668: V/GCMBaseIntentService(6860): Releasing wakelock 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:01:16.830

用于 GCM 实施。创建一个新项目并将 GCM.jar 文件添加到其构建路径。根据以下生成清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="YOUR PACKAGE NAME"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <permission
        android:name="YOUR PACKAGE NAME.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="YOUR PACKAGE NAME.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
   <uses-permission android:name="android.permission.USE_CREDENTIALS" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".DemoGCMPush"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="YOUR PACKAGE NAME" />
            </intent-filter>
        </receiver>

        <service android:name="YOUR PACKAGE NAME.GCMIntentService" />
    </application>

</manifest> 
```

然后在您的主要活动中添加以下代码进行注册。将 SENDER_ID 替换为 URL 中的 12 位项目 ID。

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

最后添加第二类 GCMIntentService.java 用于处理 GCM 消息。

```
import android.app.IntentService;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;

/**
 * {@link IntentService} responsible for handling GCM messages.
 */
public class GCMIntentService extends GCMBaseIntentService {

    @SuppressWarnings("hiding")
    private static final String TAG = "GCMIntentService";

    public GCMIntentService() {
        super("SENDER ID");
    }

    /**
     * Issues a notification to inform the user that server has sent a message.
     */
    private static void generateNotification(Context context, String message) {
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher,
                message, when);
        String title = context.getString(R.string.app_name);
        Intent notificationIntent = new Intent(context,
                SamplePushActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0,
                notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notificationManager.notify(0, notification);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {

        Log.d("GCM", "RECIEVED A MESSAGE");
        // Get the data from intent and send to notificaion bar
        generateNotification(arg0, arg1.getStringExtra("message"));
    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:06:25.393

您是否在 GCMIntentService 类中正确添加了您的项目 ID。还要确保设备安装了 Android Market/Play 商店并使用 Google 帐户登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T11:19:01.500

要接收通知，您需要覆盖 GCMIntentService 类的 onMessage 方法，如下所示

```
@Override
    protected void onMessage(Context arg0, Intent arg1) {

        Log.d("GCM", "RECIEVED A MESSAGE");
        // Get the data from intent and send to notificaion bar
        generateNotification(arg0, arg1.getStringExtra("**mymsg**"));
    } 
```

这里的“mymsg”应该与您的 php 消息属性相匹配。请注意，两个名称在 php 和 android 中应该相同，否则您将不会收到通知。

# graphite - 使用石墨和 statsd 绘制旧数据

> ID：12051256
> 
> 赞同：15
> 
> 时间：2012-08-21T08:50:01.643
> 
> 标签：graphite, statsd

我可以输入时间戳以通过 statsd(javascript statsd) 将数据发送到石墨吗？我需要绘制旧数据。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T16:15:27.817

不，你不能用 statsd 做到这一点，但是你可以通过将数据直接发送到接受 tiemstamps 的 carbon 来实现相同的目的。

Statsd 只是收集实时数据，并在配置的期间汇总或平均该期间收到的每个指标，并将其发送到当前时间戳的石墨碳守护进程。

将数据发送到 carbon daemon 非常简单，您只需要打开一个到 carbon 公共端口的套接字（如果您想使用 pickle，则有另一个端口），然后在该套接字上打印每行一个具有以下值的度量： metric_name metric_value metric_timestamp

Carbon 会将该值存储在该时间戳中，您可以使用所需的任何时间戳，只要它在该指标存储配置的范围内即可。

周围有很多例子，比如[这个用netcat发送](http://cuddletech.com/blog/?p=617)

还有一个[用 C 编写的 Graphite 客户端](https://github.com/vdevos/graphite-c-client)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T19:21:42.663

我想使用 statsd 但不是实时的，因为我每小时处理一次日志文件。所以我修改了服务器代码以接受时间戳，并修改了客户端代码以发送时间戳。它最终对我有用，尽管它感觉非常“本土化”，而且我无法在没有额外工作的情况下更新到新版本的 statsd。棘手的部分是服务器将一些聚合到 10 秒的存储桶中。实时，这很容易做到，但如果你要接受时间戳，你必须保留更多的数据。对我来说，由于我的数据只能保存一个小时左右，这并不太难，但我的解决方案并不适用于一般情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T23:44:12.887

看起来有一种方法可以通过 STATSD 发送原始数据，但它不会被聚合：

```
def send(self, subname, value, timestamp=None):
    '''Send the data to statsd via self.connection
    :keyword subname: The subname to report the data to (appended to the
        client name)
    :keyword value: The raw value to send
    '''
    name = self._get_name(self.name, subname)
    return statsd.Client._send(self, {name: '%s|r|%s' % (value, ts)}) 
```

见： http: [//python-statsd.readthedocs.org/en/latest/_modules/statsd/raw.html](http://python-statsd.readthedocs.org/en/latest/_modules/statsd/raw.html) [https://github.com/chuyskywalker/statsd/blob/master/README.md](https://github.com/chuyskywalker/statsd/blob/master/README.md)

# vb.net - .NET OleDbDataAdapter .Fill 抛出 ullPointerException

> ID：12051259
> 
> 赞同：-2
> 
> 时间：2012-08-21T08:50:05.917
> 
> 标签：vb.net, nullpointerexception, fill, oledbdataadapter

在我的应用程序中，我使用 OleDbDataAdapter 并通过它访问数据集。代码是：

```
 Dim id As Integer
    Try
        typeSql = "SELECT DOCHDR.dochdr_lDocId, TXNTYP.txntyp_cDocTypCat FROM TXNTYP INNER JOIN DOCHDR ON TXNTYP.txntyp_sDocTyp = DOCHDR.dochdr_sDocType WHERE ((DOCHDR.dochdr_lDocId)=395920);"
        typeAdap = New OleDb.OleDbDataAdapter(typeSql, connStr)
        typeDs = New DataSet()
        type_adap.Fill(type_ds) ' THROWS ERROR

    Catch ex As Exception
        Console.WriteLine("ERROR : " + ex.Message + " INNER " + ex.InnerException.ToString())
        Console.WriteLine("STACK = " + ex.StackTrace())
        Me.Close()
    End Try 
```

我在此之前和之后使用其他 OleDbAdapter ，但它只有这个 adap 会引发异常。其他所有 adaps/ds r 都使用不同的变量以与上述相同的方式填充。

```
MEssage : Object reference not set to an instance of an object. 
```

如果我在 DB 中执行查询，它会显示 1 行

我无法弄清楚这里出了什么问题。谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:56:39.227

看来你用错了`DataSet`：

```
type_adap.Fill(type_ds) 
```

应该

```
typeAdap.Fill(typeDs) 
```

因为你`typeDs = New DataSet()`之前打过电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T08:57:13.397

```
 Dim id As Integer
Try
    typeSql = "SELECT DOCHDR.dochdr_lDocId, TXNTYP.txntyp_cDocTypCat FROM TXNTYP INNER JOIN DOCHDR ON TXNTYP.txntyp_sDocTyp = DOCHDR.dochdr_sDocType WHERE ((DOCHDR.dochdr_lDocId)=395920);"
    typeAdap = New OleDb.OleDbDataAdapter(typeSql, connStr)
    typeDs = New DataSet()
    typeAdap.Fill(typeDs) ' THROWS ERROR

Catch ex As Exception
    Console.WriteLine("ERROR : " + ex.Message + " INNER " + ex.InnerException.ToString())
    Console.WriteLine("STACK = " + ex.StackTrace())
    Me.Close()
End Try 
```

# sqlite - 多个进程共享的内存中 SQLite 数据库

> ID：12051263
> 
> 赞同：3
> 
> 时间：2012-08-21T08:50:13.330
> 
> 标签：sqlite

我有一个系统，其中多个进程成功共享一个基于 SQLite 磁盘的数据库。数据库的大小和性质决定了总是需要更快的访问速度，而数据库无论如何都是临时的，因此将其完全保存在内存中听起来是个好主意。我知道 SQLite 支持[内存数据库](http://www.sqlite.org/inmemorydb.html)，但似乎没有办法与另一个进程共享内存数据库（或者至少我是这样理解的）。考虑到 SQLite 似乎使用[文件映射](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366537%28v=vs.85%29.aspx)，我看不出为什么进程共享的内存数据库不存在（至少在理论上）。

我很想知道是否有人知道这样做的方法或有其他建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-14T18:10:42.370

确实，SQlite 不支持与其他进程共享内存数据库。几乎没有理由实现这样的功能，因为用例大多是人为的。您将性能作为一个用例，但如果您在 Linux 上，则可以在 tmpfs 上创建一个基于文件的数据库。否则，您仍然可以使用许多 pragma，例如`PRAGMA synchronous=OFF;`通过放弃持久性来加速数据库。更进一步，您可以使用`PRAGMA journal_mode=MEMORY;`在内存中准备提交，甚至`PRAGMA journal_mode=OFF;`在您根本不需要事务支持时使用。

缺乏支持的主要原因之一是需要锁定。SQlite 需要一些方法来锁定数据库，目前这些锁定操作与 SQlite VFS 实现中的文件操作相关联。您可能仍然能够实现自己的在内存中工作的 VFS 模块，但您可能会冒着实现文件系统的风险。

# eclipse - Eclipse PTP：在本地机器上运行并行 (MPI) 应用程序？

> ID：12051266
> 
> 赞同：3
> 
> 时间：2012-08-21T08:50:18.683
> 
> 标签：eclipse, parallel-processing, mpi, openmpi

eclipse PTP 必须如何配置才能在本地机器上使用 OpenMPI 运行 MPI 应用程序？使用“添加资源管理器”，我可以选择 OpenMPI 并在“连接名称”中切换到 Localhost。但是，仍然要求我提供一些用户名和密码名。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:26:49.983

做这个

```
sudo apt-get install openssh-server openssh-client 
```

然后按照 PTP 文档中的说明进行操作。

# asp.net-mvc - 复杂模型的自定义数据注释

> ID：12051267
> 
> 赞同：2
> 
> 时间：2012-08-21T08:50:22.320
> 
> 标签：asp.net-mvc, unobtrusive-javascript

我有一个这样的视图模型：

```
public class Event
{
    public string Name { get; set; }

    [DateRangeValidator]
    public DateTimeSpan DateRange { get; set; }
} 
```

这包含另一个名为的类`DateTimeSpan`，如下所示：

```
public class DateTimeSpan
{
    public DateTime Start { get; set; }
    public DateTime End { get; set; }
} 
```

我想在客户端启用 jQuery 非侵入式验证，所以我编写了一个自定义数据注释验证器（它继承自`ValidationAttribute`并实现`IClientValidatable`）但它似乎只有在我将注释应用于类的`Start`和`End`属性时才有效`DateTimeSpan`，而不是如果我将其应用于类的`DateRange`属性`Event`。

这在我看来：

```
@Html.LabelFor(x => x.DateRange.Start, "Start Date:") @Html.ValidationMessageFor(x => x.DateRange.Start)
        @Html.TextBoxFor(x => x.DateRange.Start)

@Html.LabelFor(x => x.DateRange.End, "End Date:") @Html.ValidationMessageFor(x => x.DateRange.End)
        @Html.TextBoxFor(x => x.DateRange.End) 
```

`Start`如果将注释添加到and属性， ASP.NET MVC 3 只会将不显眼的 JavaScript data-* 属性注入 HTML，`End`如果将属性应用于属性，是否有办法使其工作`DateRange`？

我不希望我的域模型类（`DateRange`即非视图模型类）必须实现 IClientValidatable，因为我必须在域模型项目中引用 System.Web.Mvc。

编辑：不确定它是否相关，但该`DateRangeValidator`属性会检查以确保结束日期发生在开始日期之后等。

# jsf - 创建数据表 JSF

> ID：12051275
> 
> 赞同：-3
> 
> 时间：2012-08-21T08:50:55.437
> 
> 标签：jsf, jsf-2, primefaces

我需要一些帮助来创建数据表。在数据表中，第二列应该分成4列。您能否让我知道如何使用 JSF 实现相同的目标。提前致谢。 ![表头示例](../Images/bc93dbde0ad7b211fa1ab0a3d953c9e7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:36:03.167

如果您使用 PrimeFaces，您可以使用[`p:columnGroup`](http://www.primefaces.org/showcase/ui/datatableGrouping.jsf)：

```
<p:dataTable>
    <p:columnGroup type="header">
        <p:row>
            <p:column rowspan="2" headerText="TType"/>
            <p:column colspan="4" headerText="Capacity"/>
            <p:column rowspan="2" headerText="Availability"/>
        </p:row>
        <p:row>
            <p:column headerText="Litre"/>
            <p:column headerText="Weight"/>
            <p:column headerText="Vol"/>
            <p:column headerText="Value"/>
        </p:row>
    </p:columnGroup>
    <p:column>
        Ttype
    </p:column>
    <p:column>
        Litre
    </p:column>
    <p:column>
        Weight
    </p:column>
    <p:column>
        Vol
    </p:column>
    <p:column>
        Value
    </p:column>
    <p:column>
        Availability
    </p:column>
</p:dataTable> 
```

# jquery - 使用 html() 加载不同页面的整个正文

> ID：12051277
> 
> 赞同：0
> 
> 时间：2012-08-21T08:50:56.747
> 
> 标签：jquery

我是 jQuery 的新手。

尝试使用 html() 加载我网站的不同页面的整个正文，在以下示例中，“htmlb”包含整个正文。

我可以看到 HTML 是通过 AJAX 正确加载的，并且事先也可以正确提取正文。另外值得注意的是，HTML 格式良好，相当短，并且在 W3 验证器中完美验证：

```
var eb=$('<html>').html(htmlb); 
alert($(eb).html); 
```

警报显示了一些奇怪的 JavaScript 函数，而不是正文的 HTML。

从这个论坛的其他帖子来看，它应该真的有效吗？

任何帮助是极大的赞赏！

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:54:04.607

```
// don't use the angle brackets, that makes a new element
var eb=$('html').html( htmlb );

// use parentheses to call the function
alert( $(eb).html() ); 
```

jQuery 文档是一个很好的资源；这是[`.html()`函数](http://api.jquery.com/html/)和[元素选择器](http://api.jquery.com/element-selector/)的链接。

对于元素选择器，jQuery 语法直接源自 css 语法：您只需使用元素名称。例如选择所有`<div>`元素，只需执行`$('div')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:53:02.437

尝试：

```
alert($(eb).html()); 
```

html() 是一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:55:24.827

通过这样做`$(eb).html`，您只是在提醒`.html`功能的内容。

要使用它，您需要执行以下操作：

```
alert($(eb).html()); 
```

`html`在调用函数之后使用那些额外的括号。

在您的第一行中，您不想使用尖括号，因为这将创建一个新的 HTML 元素而不是选择`html`标记：

```
var eb=$('html').html(htmlb); 
alert($(eb).html()); 
```

# database - 将 LOOKUP 用于一对多关系是否很好？

> ID：12051279
> 
> 赞同：2
> 
> 时间：2012-08-21T08:51:00.930
> 
> 标签：database, ms-access, database-design

在 Access 中：如果我将两个表连接为一对多关系，那么在其中一个表中添加查找字段是否很好。而不是正常的关系？

示例：嗯，关系是`EMPLOYEES M ------WORKS FOR------ 1 DEPARTMENT`

*   部门（Department_ID **（自动编号）**、Department_Name .. 等）
*   员工（ Employee_ID **(AutoNumber)** , Employee_Fnmae , Employee_Lname , ... Department_ID **(LOOKUP)**）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:40:04.717

除非您使用 Sharepoint，否则我不建议查找。MVP MS Access 站点列出了您不应该这样做的一些原因：[http ://access.mvps.org/access/lookupfields.htm](http://access.mvps.org/access/lookupfields.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T21:08:23.740

而不是使用“查找”只是映射关系。您可以创建第三个表，它只映射名为的关系

```
EmployeesDepartment ( autonumber, EmployeesID, DepartmentID ) 
```

这也使您可以灵活地在此关系上添加额外的跟踪。（历史部门通过添加日期）

# git - GIT：对上游的更新会丢失所有不在上游的本地更改

> ID：12051283
> 
> 赞同：1
> 
> 时间：2012-08-21T08:51:13.580
> 
> 标签：git

我正在尝试更新我的本地存储库以匹配上游。有一堆冲突。更新时如何丢失本地更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:56:28.753

创建一个新分支：

```
git checkout -b newbranchname 
```

然后回到主人：

```
git checkout master 
```

然后尝试拉和合并（类似）

```
git pull upstream master 
```

您还可以采用旧的提交，并与上游合并以确保快速向前合并。然后你可以尝试慢慢解决冲突。

如果您想尝试一次解决一个文件，请尝试：

```
git checkout newbranchname
git merge master 
```

如果有冲突，它只会在工作目录中合并。现在您可以在单个文件中解决冲突。

然后你可以尝试：

```
git reset 
```

取消暂存所有更改，并添加您解决冲突的文件：

```
git add solvedfile
git commit -m "Single file merged" 
```

如果你解决另一个文件，你可以

```
git add anotherfile
git commit --amend -m "2 files merged" 
```

--amend 修改之前的提交，以便您看到包含两个更改的单个提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:10:15.243

> 我希望我的本地人与上游完全相同

这是一个“硬重置”。本地分支中的所有更改都将丢失。

```
git checkout master

git reset --hard my_upstream_branch_name 
```

# java - 用杰克逊反序列化嵌套的json

> ID：12051285
> 
> 赞同：0
> 
> 时间：2012-08-21T08:51:15.503
> 
> 标签：java, json, jackson

[这是对我之前的问题Extract specific value from complex JSON in java](https://stackoverflow.com/questions/11844180/extract-specific-value-from-complex-json-in-java)的扩展 。我得到了解决方案，但我想尝试从带有 bean 类的 json 字符串中提取 3 个值。对于给定的 json 结构。json结构在链接中。

我正在使用以下代码调用杰克逊：

```
mainbean obj = mapper.readValue(file, mainbean.class);
System.out.println(obj.clientPayload.e.h.getAk()); 
```

我已经为 mainbean 类的整个层次结构生成了 POJO：

```
public class mainbean {
    public Cpld cp;

    public Cpld getCp() {
        return Cp;
    }

    public void setCp(Cpld cp) {
        this.cp= cp;
    }
    public SPL getSp() {
        return sp;
    }
    public void setSp(SPL sp) {
        this.sp= sp;
    }
    private SPL sp;
    @Override
    public String toString() {
        return "mainbean [cp=" + cp+ "]";
    }
} 
```

其次是CPLD类

```
public class Cpld {
    public E e;

    public E getE() {
        return e;
    }

    public void setE(E e) {
        this.e = e;
    }
    public String toString(){
        return "E string" + e;
    }
} 
```

然后e课

```
public class E {
    public H h;

    public H getH() {
        return h;
    }
    public void setH(H h) {
        this.h = h;
    }
    public C c;
    public B b;
    public TT tt;
    public C getC() {
        return c;
    }
    public void setC(C c) {
        this.c = c;
    }
    public B getB() {
        return b;
    }
    public void setB(B b) {
        this.b = b;
    }
    public TT getTt() {
        return tt;
    }
    public void setTt(TT tt) {
        this.tt = tt;
    }
} 
```

等等......我遇到了一个例外

```
Exception in thread "main" com.fasterxml.jackson.databind.JsonMappingException: Can not instantiate value of type [simple type, class JsonPath.Cpld] from JSON String; no single-String constructor/factory method (through reference chain: JsonPath.mainbean["clientPayload"])
    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator._createFromStringFallbacks(StdValueInstantiator.java:419)
    at com.fasterxml.jackson.databind.deser.std.StdValueInstantiator.createFromString(StdValueInstantiator.java:295)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromString(BeanDeserializer.java:405)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:117)
    at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:336)
    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:89)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:290)
    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:112)
    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:2577)
    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:1764) 
```

谁能在这里为我指明正确的方向...在此先感谢您的帮助

更新：Json 文件：[从 java 中的复杂 JSON 中提取特定值](https://stackoverflow.com/questions/11844180/extract-specific-value-from-complex-json-in-java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T22:49:07.137

Just add an empty constructor to your Clpd class

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T18:01:11.443

因为顶部 JSON 对象的值`CP`是 JSON 对象的字符串表示形式，而不是 JSON 对象本身，所以您的`Cpld`类需要一个显式构造函数，该构造函数接受一个字符串并将其反序列化为该对象的属性。

# c# - F#看不到C#可序列化抽象类的抽象属性

> ID：12051288
> 
> 赞同：2
> 
> 时间：2012-08-21T08:51:32.347
> 
> 标签：c#, f#, abstract, abstraction

这是我的可序列化抽象类

```
namespace NEN_FS {
    [Serializable()]
    abstract public class NFS : IEquatable<NFS> {
        abstract public string Path { get; set; }
        public NFS() {
            Path = "";
            }
        public NFS(string path) {
            Path = path;
            }
        public override bool Equals(object obj) {
            NFS other = obj as NFS;
            return (other != null) && ((IEquatable<NFS>)this).Equals(other);
            }
        bool IEquatable<NFS>.Equals(NFS other) {
            return Path.Equals(other.Path);
            }
        public override int GetHashCode() {
            return Path != null ? Path.GetHashCode() : base.GetHashCode();
            }
        }
    } 
```

我在 F# 中有什么：`let file = files.[0].`并且没有 Path 字段。

这是为什么？如何访问 Path 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:08:11.143

嗯？奇怪..可能是元数据读取或智能感知中的一些错误。尝试写入 file.[0].Path 并编译。有时 Intellisense 会跳过某些内容，但编译器会正确地看到整个结构并且可以毫无怨言地进行编译。

如果不工作 - 那么也许 F# 不喜欢`abstract`我不知道的某些原因（即一些整体的废话，比如不可能实例化一个“示例对象”）..我还不流利地使用 F#，但正在考虑 .Net本身，您是否尝试过定义和使用接口而不是抽象基础？我是说：

```
namespace NEN_FS {
    public interface class INFS : IEquatable<NFS>
    {
        string Path { get; set; }
    }

    [Serializable()]
    abstract public class NFS : INFS {
        abstract public string Path { get; set; }
        public NFS() {
            Path = "";
            }
        public NFS(string path) {
            Path = path;
            }
        public override bool Equals(object obj) {
            NFS other = obj as NFS;
            return (other != null) && ((IEquatable<NFS>)this).Equals(other);
            }
        bool IEquatable<NFS>.Equals(NFS other) {
            return Path.Equals(other.Path);
            }
        public override int GetHashCode() {
            return Path != null ? Path.GetHashCode() : base.GetHashCode();
            }
        } 
```

然后暴露`IEnumerable<INFS> Files`而不是`IEnumerable<NFS> Files`. 这样它就必须工作，因为接口是访问许多东西的核心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:28:02.777

您遇到的是与智能感知相关的错误（或者只是智能感知的基本无能）。F# 完全能够“看到”该`Path`属性。只需尝试完成该行`let file = files.[0].Path`并编译（或将其写入 fsi）。你会看到一切都很顺利。

Intellisense 是一个很棒的工具，但有时它不能很好地工作（我有时也会在使用 C# 时得到它）。依靠它来始终报告最新和最完整的信息会不时引起一些混乱。

# c# - 如何在只有表 ID 的 TableHeaderRow 中查找列数？

> ID：12051298
> 
> 赞同：0
> 
> 时间：2012-08-21T08:52:05.983
> 
> 标签：c#, asp.net, .net

我有一种情况，我想制作一个通用的代码隐藏函数来显示跨越整个表的消息行。我之前已经传递了 Table 对象和列数，以便它可以设置列跨度，但这有点容易出错，因为我们有时会添加新列并且我必须更新消息的列计数。

Table 对象中似乎没有任何列数，也没有任何方法可以获取已添加到 aspx 文件中的 TableHeaderRow。我也想避免将 id 添加到所有 TableHeaderRow 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:59:45.090

试试这个，应该可以工作（假设 TableHeaderRow 是表的第一个孩子）：

```
int j = 0;
foreach (Control current in tableId.Controls[0].Controls)
{
    if (current.ToString() == "System.Web.UI.WebControls.TableHeaderCell")
    {
        j++;
    }
} 
```

# android - OSGi System Bundle 未导出的系统包

> ID：12051300
> 
> 赞同：2
> 
> 时间：2012-08-21T08:52:18.697
> 
> 标签：android, osgi, apache-felix

我是 OSGi 的新手。我在 Android 上运行 Apache Felix。我已将系统包导出的系统包设置如下：

```
/** Packages exported by the system bundle. */
String SYSTEM_PACKAGES = 
    "org.osgi.framework;version=\"1.6.0\"," + 
    "org.osgi.framework.launch;version=\"1.0.0\"," +
    "org.osgi.framework.wiring;version=\"1.0.0\"," +
    "org.osgi.framework.startlevel;version=\"1.0.0\"," +
    "org.osgi.framework.hooks.bundle;version=\"1.0.0\"," +
    "org.osgi.framework.hooks.resolver;version=\"1.0.0\"," +
    "org.osgi.framework.hooks.service;version=\"1.1.0\"," +
    "org.osgi.framework.hooks.weaving;version=\"1.0.0\"," +
    "org.osgi.service.packageadmin;version=\"1.2.0\"," +
    "org.osgi.service.startlevel;version=\"1.1.0\"," +
    "org.osgi.service.url;version=\"1.0.0\"," +
    "org.osgi.util.tracker;version=\"1.5.0\"";

Map map = new HashMap();
map.put ( "org.osgi.framework.system.packages" , SYSTEM_PACKAGES );
// I set more properties ...
felix = new Felix ( map );
felix.start(); 
```

但是，当我尝试安装 ConfigAdmin 包时，它给出了 BundleException：

```
org.osgi.framework.BundleException: Unresolved constraint in bundle 
org.apache.felix.configadmin [1]: Unable to resolve 1.0: missing requirement [1.0] 
osgi.wiring.package; (&(osgi.wiring.package=org.osgi.framework)(version>=1.4.0)
(!(version>=2.0.0))) 
```

当我从版本 1.6.0 的系统包中导出 org.osgi.framework 包时，为什么缺少此要求？我通过执行以下操作检查了系统属性是否正确设置：

```
// DEBUG
Toast.makeText ( getApplicationContext() , 
                 felix.getBundleContext().getProperty ( "org.osgi.framework.system.packages" ) , 
                 Toast.LENGTH_LONG ).show(); 
```

可能这是我的一个简单错误。有人可以帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:04:17.627

你为什么做这个？Felix 应该自动从系统包中导出这些包。

如果您需要从系统捆绑包中导出其他包，除了通常导出的包之外，请使用[`org.osgi.framework.system.packages.extra`](http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Constants.html#FRAMEWORK_SYSTEMPACKAGES_EXTRA)启动配置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T06:33:05.997

问题解决了。我在设置额外的包参数时犯了一个错误：

```
map.put ( "org.osgi.framework.system.packages.extra" , "" ); 
```

Felix 不接受空字符串（我最初使用的是空字符串，我想我稍后会添加包名称）。当我删除此声明时，一切正常。

正如 BJ Hargrave 所说，无需设置系统包。

另外，我们不应该将空字符串作为映射值传递，我没有意识到这一点。

# java - 如何让 Websphere App 将每个应用程序日志条目重定向到不同的文件？

> ID：12051303
> 
> 赞同：1
> 
> 时间：2012-08-21T08:52:32.593
> 
> 标签：java, logging, websphere

我正在使用正常`java.util.logging`登录。是否可以将每个应用程序日志重定向到不同的文件？

例子 ：

```
Application.war 's log entries to Application.log 

Application2.war 's log entries to Application2.log 
```

等等 ，

不是日志专家，还是只过滤与应用程序对应的那些并尝试使用脚本自动化它 - 只是一个想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:09:17.673

是的，这是可能的。

请看以下内容；

[http://wpcertification.blogspot.co.uk/2008/10/using-logproperties-file.html](http://wpcertification.blogspot.co.uk/2008/10/using-logproperties-file.html)

[http://publib.boulder.ibm.com/infocenter/wchelp/v6r0m0/index.jsp?topic=%2Fcom.ibm.commerce.admin.doc%2Ftasks%2Ftlslogging.htm](http://publib.boulder.ibm.com/infocenter/wchelp/v6r0m0/index.jsp?topic=%2Fcom.ibm.commerce.admin.doc%2Ftasks%2Ftlslogging.htm)

也请看一下这个线程。

[Websphere 应用程序调试日志记录](https://stackoverflow.com/questions/3310604/websphere-application-debug-logging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:12:56.113

是的，您可以使用一个应用程序和一个日志。您只需为一个应用程序添加一个日志记录配置文件。请参阅此[示例](http://www.javapractices.com/topic/TopicAction.do?Id=143)以了解 Java 日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T10:30:38.050

选择了 log4j ，浏览了它的文档，发现我可以在 log4j.xml 中配置，以根据需要将每个应用程序重定向到不同的文件（并重定向到 sysout，以便我可以在 RAD 中看到）

简单的 java.util.logging 似乎不可能，但无法验证

# magento - 仅向自定义产品添加属性？

> ID：12051305
> 
> 赞同：1
> 
> 时间：2012-08-21T08:52:39.243
> 
> 标签：magento, attributes

菜鸟在这里。我尝试向我的自定义产品 (customproduct) 添加一些属性，但它们最终也适用于所有产品。

我希望仅在我的自定义产品 (customproduct) 的常规选项卡下显示属性的组/选项卡（自定义设置）。谁能指导我正确的方式？

我的代码如下所示：（mysql4-install-0.1.0.php）

```
$installer = $this;
$setup = new Mage_Eav_Model_Entity_Setup('core_setup');
$installer->startSetup();
$setup->addAttribute('catalog_product', 'PartnerID', array(
        'group'         => 'Custom Settings',
        'input'         => 'text',
        'type'          => 'text',
        'label'         => 'Partner ID',
        'backend'       => '',
        'visible'       => 1,
        'required'      => 0,
        'user_defined' => 1,
        'searchable' => 0,
        'filterable' => 0,
        'comparable'    => 0,
        'visible_on_front' => 0,
        'visible_in_advanced_search'  => 0,
        'is_html_allowed_on_front' => 0,
        'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
        'apply_to'      => 'customproduct',
    )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:59:50.017

要回答我自己的问题，答案如下：我需要将属性添加到以下数组并重新运行 installscript。（另外，我的新产品类型 customproduct 的配置有误）

```
$fieldList = array(
            'PartnerId'
                        ...
    );

    // make these attributes applicable to customproduct
    foreach ($fieldList as $field) {
        $applyTo = split(',', $installer->getAttribute('catalog_product', $field, 'apply_to'));
        if (!in_array('customproduct', $applyTo)) {
            $applyTo[] = 'customproduct';
            $installer->updateAttribute('catalog_product', $field, 'apply_to', join(',', $applyTo));
        }
    } 
```

现在，新属性仅适用于 customproduct。

# javascript - 避免在 JavaScript 中使用幻数 - 与 JsHint 一起使用的替代方案

> ID：12051307
> 
> 赞同：8
> 
> 时间：2012-08-21T08:52:40.943
> 
> 标签：javascript, magic-numbers

JSHint 的检查现在内置在 PhpStorm 中，让我了解了 JavaScript 幻数，我意识到这将使代码更清晰，从而避免使用它们。

我试过这个：

```
var constants = {
    millisecs: 1000,
    secs: 60
}; 
```

还有这个：

```
var constants = function () {
    this.millisecs = 1000;
    this.getMillisecs = function () {
        return this.millisecs;
    };
}; 
```

JsHint 抱怨两者。

从[这个答案](https://stackoverflow.com/a/2821987/149998)中获取解决方案虽然效果很好：

```
var constants = (function() {
    var millisecs = 1000,
        defaultMsgsPerSecond = 60;
    this.getMillisecs = function() { return millisecs; };
    this.getDefaultMsgsPerSecond = function() { return defaultMsgsPerSecond; };
})(); 
```

估计是关门的缘故。为什么这被接受了，而从另一个 SO 问题中得到的其他两个建议却没有？

编辑：虽然没有触发错误，但它实际上不起作用。说常量未定义是错误的。[提琴手](http://jsfiddle.net/Hu6mu/)。

*澄清一下——“作品”是指“不会触发来自 JsHint 的警告”*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-07T17:33:45.050

在 EcmaScript 6 中，您将能够：

```
const MILLISECS = 1000;
const DEFAULT_MSG_PER_SECOND = 60; 
```

但在那之前，您可以使用 EcmaScript 5 的 Object.freeze：

```
var constants = {
  millisecs: 1000,
  defaultMsgPerSecond: 60
};

var constants = Object.freeze(constants);

// Now constants is in fact... a constant!
constants.millisecs = 999;
constants.millisecs; // Still === 1000 
```

如果你的天性是冗长，你可以试试 Object.defineProperties：

```
var constants = {};

Object.defineProperties(constants, {
    'millisecs': {
        value: 1000,
        writable: false
     },
    'defaultMsgPerSecond': {
        value: 60,
        writable: false
     },
});

// Again, constants is in fact... a constant!
constants.millisecs = 999;
constants.millisecs; // Still === 1000 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-30T19:01:17.477

**关于你的编辑**

我想你想要`new`内联对象：

```
var constants = new (function() {
    var millisecs = 1000,
        defaultMsgsPerSecond = 60;
    this.getMillisecs = function() { return millisecs; };
    this.getDefaultMsgsPerSecond = function() { return defaultMsgsPerSecond; };
})(); 
```

**但是**JSHint 也会抱怨：`Weird construction. Is 'new' unnecessary?`.

如果你把它用作闭包，那么你实际上需要返回一些东西。如果不这样做，`constants`确实会包含`undefined`. 一个简单的解决方法是 return `this`，但这将是一个糟糕的解决方案，因为您正在扩展`this`它是您不拥有的对象的实例。

所以返回一个内联对象似乎是这里的解决方案：

```
var constants = (function() {
    var millisecs = 1000,
        defaultMsgsPerSecond = 60;
    return {
        getMillisecs: function() { return millisecs; }
        getDefaultMsgsPerSecond: function() { return defaultMsgsPerSecond; }
    };
})(); 
```

# ios - 带有滚动视图和超过 5000 个自定义 uiview 的内存警告

> ID：12051313
> 
> 赞同：1
> 
> 时间：2012-08-21T08:53:10.787
> 
> 标签：ios, xcode, memory

我需要帮助。

我有自定义的 uitableviewcell，里面有 uiscrollview，我遍历一个 nsarray 并使用 addsubview: 方法将自定义 uiviews（只是子类化 drawrect: 并进行自定义绘图）添加到我的滚动视图中，我每秒刷新一次，它给我一个内存警告并让我崩溃应用程序。我的项目是ARC，我不能调用release。我认为这不是最好的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:12:59.813

简单的。不要显示 5000 个视图，或者只创建/保留您必须呈现的视图。

清除不可见的内容 - 或者 - 如果它们都同时可见，请使用不同的方法进行渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T11:02:04.723

贾斯汀的答案的改进，如果有一个数据列表，那么你最好看看 UITableView 是如何工作的。

如果您正在考虑构建一个游戏并同时在屏幕上显示许多小图形，那么您最好使用 Cocos2d 或 Sparrow 等主要的 2d 渲染库。

这些是您可以实现贾斯汀想法的几种方法，前者仅在使用每一行时绘制（换句话说，保留在内存中）。后者是为处理大量较小的图像而构建的，并且通过执行自定义绘制例程在处理大量图形时表现更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T18:28:31.730

最后，我使用我的第二种方法（自定义绘制单个 UIView 并将其添加到我的滚动视图）感谢大家的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:06:54.097

如果它只是在几次刷新后崩溃，那意味着你可能有内存泄漏。

很有可能你正在使用一些 CG 的东西。Core Graphics 的东西不是由 ARC 维护的，你需要做 CG 发布。您可以通过添加任何缺少的版本来解决此问题，或者如果您不在后台线程中执行图形处理，则通常可以使用 UI 等效项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T16:12:02.523

是的，Gordon，我使用了很多 CG 的东西来绘制我的自定义视图，但没什么特别的，这是我的自定义 UIView (ITPieceBlock) 的绘制代码：

```
- (void)drawRect:(CGRect)rect { 
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(ctx, 1.00);

    CGContextSetRGBFillColor(ctx, 0.10, 0.10, 0.10, 1.0);
    CGContextFillRect(ctx, rect);

    if(self.status == 0)
        CGContextSetRGBFillColor(ctx, 0.5, 0.5, 1.00, 1.0);
    else
        CGContextSetRGBFillColor(ctx, 0.25, 0.25, 1.00, 1.0);

    CGContextFillRect(ctx, rect);
    CGContextSetRGBStrokeColor(ctx, 0.25, 0.25, 0.25, 1.0);
    CGContextStrokeRect(ctx, rect);

    [super drawRect:rect];
} 
```

以及将此视图添加到我的 UISCrollView 的方法：

```
- (void)processPieces:(NSString *)pieces withCount:(double)pieceCount{
    static int i, j, k;
    static NSData *buffer;

    static int offsetX = 10;
    static int offsetY = 10;
    static int blockW = 5;
    static int blockH = 5;
    static int x;
    static int y;
    CGRect rect = _scrollView.frame;

    [_piecesArray removeAllObjects];

    buffer = [NSData dataWithBase64EncodedString:pieces];

    unsigned char* r = (unsigned char*)[buffer bytes];
    for (i=1; i<=[buffer length]; i++){
        j = (int) r[i];
        for (k=1; k<=8; k++){
            if (pieceCount == 8)
                break;
            if ((j & 0x80) != 0){
                [_piecesArray addObject:[NSNumber numberWithInt:1]];
            } else {
                [_piecesArray addObject:[NSNumber numberWithInt:0]];
            }

            j = j << 1;
            pieceCount--;
        }
    }

    x = offsetX;
    y = offsetY;

    if ([_piecesArray count] != 0)
        for (int i = 0; i< [_piecesArray count]; i++){
            if (i != 0) {
                if ((x + blockW) < rect.size.width - offsetX)
                    x += blockW;
                else {
                    x = offsetX;
                    y += blockH;
                }
            }

            ITPieceBlock * pieceBlock = [[ITPieceBlock alloc] initWithFrame:CGRectMake(x, y, blockW, blockH)];
            [pieceBlock setFrame:CGRectMake(x, y, blockW, blockH)];

            if ([[_piecesArray objectAtIndex:i] intValue] == 0)
                pieceBlock.status = 0;
            else
                pieceBlock.status = 1;

            [_scrollView addSubview:pieceBlock];
        }
    _scrollView.contentSize = CGSizeMake(280, y);
    [_scrollView flashScrollIndicators];
} 
```

# php - HTML 公式化：MySQL 还是 PHP？

> ID：12051314
> 
> 赞同：3
> 
> 时间：2012-08-21T08:53:10.973
> 
> 标签：php, mysql

我正在做一个 MySQL/php 项目，我遇到了从 MySQL 获取查询结果并将它们转储到 HTML 表中的情况。现在我将表格中特定列的单元格包装在一些锚标记中，我只是想知道在 php 或 MySQL 查询本身中进行包装是否更好或更有效，例如：

```
...
$row_results_from_query['user'] = '<a href="?user=' . $row_results_from_query['user'] . '">' . $row_results_from_query['user'] . '</a>';
... 
```

或使用查询

```
SELECT ..., CONCAT("<a href='?user=", Users.user, "'>", Users.user, "</a>") FROM ... 
```

我认为 php 方式更快，但是我发现[一些文章](http://www.onextrapixel.com/2010/06/23/mysql-has-functions-part-5-php-vs-mysql-performance/)表明对于某些事情 MySQL 更快。

什么是最佳实践？为什么？

或者，在 MySQL 中创建存储过程是否更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:42:46.450

“在 MySQL 中创建存储过程更好吗？” 不，因为这是模板的典型用例（参见：[http](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) ://en.wikipedia.org/wiki/Model–view–controller ）。PHP 提供了比 MySQL 更多的解析模板的选项。请记住任何可能的未来更改，例如将 URL 格式从 切换`?user=XXX`到`?uid=XXX`或类似的东西。在 MySQL 中，您需要删除重新创建的存储过程，或者每次都需要处理查询，这很容易出错。如果您对此类任务使用某种模板，则只需对其进行编辑。

# directx - 编译着色器的基础知识

> ID：12051317
> 
> 赞同：3
> 
> 时间：2012-08-21T08:53:14.720
> 
> 标签：directx, shader

我发誓我一直在详尽地寻找这个问题的答案，但我没有找到真正解决我的问题的方法。那是什么问题？

好吧，我是 DirectX 和着色器的新手。关于着色器的一些事情我仍然不明白。

1 - 如何制作着色器？我必须在项目中创建一个 .fx 文件吗？有时确实如此，但在某些示例中，我找不到任何 .fx 文件。以及如何制作这个文件？我的 Visual Studio 版本无法直接创建 .fx 文件；我必须将文件“强制”为 .fx。

2 - 我如何编译它们？他们是在我编译解决方案的同时编译还是他们有特殊的编译方式？

3 - 周围有很好的教程吗？我一直在寻找着色器圣经，但大多数情况下我发现解释一些事情的模糊和简短的教程，而且从来没有深入的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T11:57:11.127

**1\. 着色器新手？**

要了解 sharder，请使用免费的 shazzam 着色器编辑器 ( [http://shazzam-tool.com/](http://shazzam-tool.com/) ) 通过交互式绘图工具创建简单的着色器。尝试使用不同的选项，然后比较自动生成的 HLSL(.fx) 代码以便更好地理解。在您了解如何编写着色器代码后，购买标准书籍/在线教程并练习根据您的要求编写自己的代码。

**2\. 常用编译方法：**

**一种。D3DXCreateEffectFromFile** - 编写着色器代码并保存在 .fx 扩展名中，并通过**D3DXCreateEffectFromFile**动态编译代码。编译后的代码可以使用 effect(ID3DXEffect) 接口在你的核心模块中使用。

**湾。显式编译：**编写着色器代码并保存在 .fx 扩展名中，并使用 fxc.exe 显式编译代码（您可以在 DirectX SDK Utility 文件夹中找到）。

示例：
**fxc.exe /Tfx_2_0 /Fo file.fxo file.fx**

创建二进制文件后，如下所示

```
 1\. Create a buffer and load the generated binary file(.fxo) by the file stream.
  2\. Call D3DXCreateEffect and give the buffer content as a input parameter.
  3\. Like "method a" use effect(ID3DXEffect) interface for interacting with the
     shader code. 
```

**3.介绍教程：**

[http://rbwhitaker.wikidot.com/hlsl-tutorials](http://rbwhitaker.wikidot.com/hlsl-tutorials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T13:26:53.977

1.  着色器就像您将着色器代码放入其中的普通文本文件一样。如果您在运行时使用 D3D 函数编译着色器，则无需将它们添加到您的项目中。

2.  有两种方法可以做到这一点。一种是将着色器代码放在 .fx 文件或 *.hlsl 文件中，然后在运行时使用 D3D 库函数 (D3DCompileFromFile) 编译着色器。尽管微软不再建议这样做，因为 D3DCompileFromFile 在 Metro 风格的应用程序中不起作用。另一种方法是使用 fxc.exe 在构建时编译着色器。Visual Studio 2012 将此过程作为常规构建的一部分。因此，您可以将您的 hlsl 文件添加到您的项目中，并且它们将在您构建项目时构建。这也将使您能够在编译时查看着色器中的任何错误/警告。

3.  [http://msdn.microsoft.com/en-us/library/windows/desktop/bb509633(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509633(v=vs.85).aspx)

希望有帮助。

# ruby-on-rails - Ajax 要求日期差异

> ID：12051318
> 
> 赞同：0
> 
> 时间：2012-08-21T08:53:14.487
> 
> 标签：ruby-on-rails

在我的 _form.html.erb 中，我有两个 DatePicker：-

```
<div class="field">
    <!--%= f.label :leaveFrom %-->
    <div><%= f.text_field :leaveFrom, :id => 'datepicker4', :placeholder => "From Date"%></div>
  </div>
  <div class="field">
    <!--%= f.label :leaveTo %-->
    <div><%= f.text_field :leaveTo, :id => 'datepicker5', :placeholder => "To Date" %></div>
  </div> 
```

我的要求是计算这两个日期之间的日期差异，而不是在表单提交上。一旦我选择“To Date”，它就会显示天数。我无法实现 ajax 调用。任何人都可以提供一些解决方案来实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T08:58:37.823

我认为最好的方法是使用 java 脚本而不是调用 ajax.var leaveFrom = 来显示差异

```
 function dayDiff(){
      var leavefrom = $('.datepicker4').datepicker('getDate');
      var leaveto = $('.datepicker5').datepicker('getDate');
      var dayDiff = Math.ceil((leavefrom - leaveto) / (1000 * 60 * 60 * 24));
   } 
```

在选择日期或提交表单之前调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:03:44.743

假设`CalculatorController`有`date_diff`方法，使用 jQuery 试试这个

```
$(function() {
 $('#datepicker5').live("change", function() {
    $.ajax({
        url: "/calculator/date_diff",
        type: "POST",
        data: {date1 : $("#datepicker4").val(), date2 : $("#datepicker5").val()}
        success: function(result) {
            alert(result);
        }
    });
 });
}); 
```

# html - 合并一个元素的两个类背景图像

> ID：12051320
> 
> 赞同：0
> 
> 时间：2012-08-21T08:53:25.500
> 
> 标签：html, css, background

我正在尝试将两个类添加到一个元素，两个不同的背景图像位于其不同的空间。但是当我应用另一个类时，它会覆盖第一类背景图像。见下文

```
<li class="first">

li.first {background:url(images/first.png)no-repeat center top}
li.second{background:url(images/second.png)no-repeat right center} 
```

所以我想在 li 元素上应用两个类时合并两个背景，比如

```
<li class="first second"> 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:57:56.780

如果您可以控制标记，则可以使用如下嵌套元素。

```
li {background:url(images/first.png)no-repeat center top}
li span {background:url(images/second.png)no-repeat right center; width: 100%; height: 100%;}

<li><span></span></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:26:32.340

我可以想到两种方法。

您可以不将第二个背景添加到元素本身，而是添加到绝对定位的伪元素，使其完全覆盖`li`. 但是，如果您希望对三个以上的类和背景执行此操作，则此方法不起作用，因为您只能有两个伪元素（`:before`和`:after`）。

或者您也可以简单地将第一个背景添加到第二个类中。

[**演示**](http://dabblet.com/gist/3413901)

在这两种情况下，HTML 都类似于：

```
<li class="first second"></li> 
```

第一种情况下的相关CSS：

```
li { 
    background-repeat: no-repeat;
    background-size: 50%;
}
.first {
    background-image: linear-gradient(rgba(102,37,93,.95) 50%, transparent 50%);
    background-position: 50% 0;
}
.second {
    position: relative;
}
.second:after {
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    background-image: radial-gradient(rgba(255,255,255,.2), rgba(255,0,0,.9));
    background-position: 100% 50%;
    background-repeat: no-repeat;
    background-size: 50%;
    content: '';
} 
```

...在第二种情况下：

```
li { 
    background-repeat: no-repeat;
    background-size: 50%;
}
.first {
    background-image: linear-gradient(rgba(102,37,93,.95) 50%, transparent 50%);
    background-position: 50% 0;
}
.second {
    background-image: radial-gradient(rgba(255,255,255,.2), rgba(255,0,0,.9)), 
        linear-gradient(rgba(102,37,93,.95) 50%, transparent 50%);
    background-position: 100% 50%, 50% 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T08:58:48.383

如果您在同一个元素上有两个类，则第二个总是具有更高的优先级并覆盖第一个。

您应该使用 CSS3 多个背景图像来实现效果：

```
li.multi-bg{
    background-image: url(images/first.png), url(images/second.png);
    background-position: center bottom, left top;
    background-repeat: no-repeat;

} 
```

[http://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T08:59:19.627

如果通过“合并”，你的意思是你想`<li class="first second">`同时应用*两个*背景图像，你可以使用 CSS 3 背景图像来实现这一点。我发现[CSS3 Info 上的这个页面](http://www.css3.info/preview/multiple-backgrounds/)是使用它的一个非常好的资源。

请注意，与更新的 CSS 功能一样，浏览器支持并不广泛。上面的页面列出了浏览器支持：

> Firefox 从 3.6 版（Gecko 1.9.2）开始支持多种背景，从 1.3 版开始支持 Safari，从 10 版开始支持 Chrome，从 10.50 版（Presto 2.5）开始支持 Opera，从 9.0 版开始支持 Internet Explorer。

BG图像的基本实现很简单：

```
.someElement {
  background: url(x.png) 0 0 repeat-x, url(y.png) 10 10 no-repeat;
} 
```

# asp.net-mvc - 如何在全局级别添加 AuthorizeAttribute 并将其排除在某些操作中？

> ID：12051321
> 
> 赞同：4
> 
> 时间：2012-08-21T08:53:32.440
> 
> 标签：asp.net-mvc, asp.net-mvc-3, action-filter

我需要检查一个动作是否具有特定属性，我需要通过以下方法进行：

```
protected override bool AuthorizeCore(System.Web.HttpContextBase httpContext) {

} 
```

我知道我可以在这里检查：

```
public override void OnAuthorization(AuthorizationContext filterContext) {

    filterContext.ActionDescriptor.IsDefined(typeof(AnonymousAllowedAttribute), true)
 ...
} 
```

有谁知道我怎样才能得到`ActionDescriptor`对象`System.Web.HttpContextBase`？

**更新**

实际上，我想要任何标有`AnonymousAllowedAttribute`该 `AuthorizeCore`方法的操作返回 true 或者如果可能不运行（我的意思是我的覆盖方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T13:27:36.520

要执行您想要的操作，您需要在 global.asax 中编写和注册新的 FilterProvider。例子：

```
public class AuthorizeFilterProvider:IFilterProvider
{
    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        if (!actionDescriptor.IsDefined(typeof(AnonymousAllowedAttribute), true))
            return new Filter[] {new Filter(new AuthorizeAttribute(), FilterScope.Action, 0), };
        return new Filter[0];
    }
} 
```

全球.asax：

```
protected void Application_Start()
    {
        ....
        RegsterFilterProviders(FilterProviders.Providers);
    }

    private void RegsterFilterProviders(FilterProviderCollection providers)
    {
        providers.Add(new AuthorizeFilterProvider());
    } 
```

现在，如果您的任何操作未标记`[AnonymousAllowed]`应用程序认为它被标记为`[Authorize]`
**PS：**不要忘记标记`[AnonymousAllowed]`您的登录和注册操作 :)

# .net - 与多个应用程序域通信

> ID：12051322
> 
> 赞同：2
> 
> 时间：2012-08-21T08:53:35.810
> 
> 标签：.net, wcf, remoting, appdomain, .net-4.5

我有一个应用程序，它需要有多个应用程序域来隔离潜在的不安全模块，并为非线程安全代码提供一定程度的隔离。每个模块都实现了一个通用接口，但也包括长期存在的方法调用（分钟）。

在遥远的过去，当我做类似的事情时，我使用过，`MarshalByRefObject`但后来我[读到 WCF](https://stackoverflow.com/a/314356/156755)现在是跨 AppDomain 边界进行通信的首选机制。

由于我想要多个应用程序域并且每个请求都可能是长期存在的，因此我看到了几个问题：

*   我明确地只需要一个线程在给定时间执行“工作”代码（因此 WCF 为每个请求实例化新主机类的默认方法是一个问题）
*   如何管理应用程序域列表/适当的端点以进行调用（如何通知每个 AD 使用哪个端点/它应该如何报告它随机选择的端点）

我最初计划对 AppDomain 进行异步调用，并在内部有某种形式的排队系统，允许我监视/检索结果，但考虑到使用 WCF 和覆盖足以控制服务主机对象的实例化的麻烦（允许对同一个对象进行后续调用），我开始怀疑是否应该使所有调用阻塞并允许父进程处理所有线程问题。当然，那么我还需要确保我从来没有收到超过 1 个等待给定应用程序域的呼叫，并在父进程中执行排队。

有没有人有类似场景的经验/关于良好架构/链接到体面文章的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:32:00.573

WCF 框架非常适合通过远程过程调用机制使用消息交换模式编写面向服务的应用程序。netNamedPipesBinding 可用于在同一物理内存空间内实现对单独 AppDomain 的“管理”，但这种控制级别并不是 WCF 的初衷。

也许[Jeffery Richter 的这篇博客文章](http://www.wintellect.com/CS/blogs/jeffreyr/archive/2010/09/01/using-appdomains-to-make-non-threadsafe-code-threadsafe.aspx)中的内容更适合您尝试做的事情。

# image - Zend Image Upload 验证问题编辑页面

> ID：12051324
> 
> 赞同：0
> 
> 时间：2012-08-21T08:53:41.120
> 
> 标签：image, zend-framework, file-upload, validation

我正在开发`Zend Framework 1.11.12`版本。在我必须放置`file upload (for photo upload)`字段的添加表单中，它几乎没有`validations as required, file extensions and size specific criteria`提到如下，这是在我的 zend 表单下声明的：

```
 // part of my form class (Default_Form_Photo::init)
    $photo = new Zend_Form_Element_File('photo', '', array('required'   => true));
    $photo->setLabel('Photo')
          ->setDestination('/var/www/zendframework/public/uploads/');
    // ensure its mandatory
    #$photo->addValidator('required', true);
    // ensure only one file
    $photo->addValidator('Count', false, array('min' => 1));
    // max 2MB
    $photo->addValidator('Size', false, 2097152)
          ->setMaxFileSize(2097152);
    // only JPEG, PNG, or GIF
    $photo->addValidator('Extension', false, 'jpg,jpeg,png,gif');
    $photo->setValueDisabled(true);
    $this->addElement($photo, 'photo'); 
```

现在我已经拍摄了一个`hidden field`，`edit page`如果没有上传新图像，它将返回我当前的图像名称：

```
 // hidden element for edit time photo save
    $this->addElement('hidden', 'photo_uploaded', array( )); 
```

我设置了这个`hidden element value from controller`。`$form->photo_uploaded->setValue($result['photo'])`

现在的问题是：当用户编辑信息时，它不允许保存，因为`file upload field is blank`没有上传新图像，但在我的情况下必须使用现有的当前图像，我从隐藏元素传递到我的控制器。

所以验证在这里会导致问题，任何想法如何删除我的编辑页面的验证，用户不必每次都上传新图像，他们正在编辑信息。

尽早回复将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:50:43.440

要解决这个问题，您需要在表单中添加两个函数：isValid 和 getValues。首先，从 photo 元素中删除 required ，因为我们将在 isValid 中检查这一点：

```
/**
 * Check if a photo has been submitted. If not, set the form element as required.
 * @param $data Array of values
 * @return Boolean true if all form element requirements are mets
 */
public function isValid($data)
{
 //A photo has not been uploaded this time, nor previously.
 if(!$data['photo'] AND !$data['photo_uploaded'])
 {
  $this->photo->isRequired(TRUE);
 }
 return parent::isValid($data);
}

/**
 * Return an array of form element values
 * @return Array of values
 */
public function getValues()
{
 $values = $this->getValues();

 //if photo has been uploaded, but no previous photos have been uploaded, then set photo_uploaded value.
 if($values['photo'] AND !$values['photo_uploaded'])
 {
  $values['photo_uploaded'] = $values['photo'];
 }

 //if previous photo has been uploaded, but photo has not been uploaded this time, set photo value
 if($values['photo_uploaded'] AND !$values['photo'])
 {
  $values['photo'] = $values['photo_uploaded'];
 }

 return $values;
} 
```

# bash - 使用定义的 Content-Type 从 .sh 脚本运行 curl

> ID：12051329
> 
> 赞同：9
> 
> 时间：2012-08-21T08:53:49.433
> 
> 标签：bash, curl, sh

当我尝试运行 test.sh 脚本时，我总是收到来自 curl 的错误：

```
curl: (6) Couldn't resolve host 'application' 
```

测试.sh：

```
#!/bin/sh
CT="Content-Type:\ application/json"

TEST="curl http://127.0.0.1 -H $CT"
echo $TEST

RESPONSE=`$TEST`
echo $RESPONSE 
```

但是，如果我只是从控制台运行以下命令，一切都很好：

```
curl http://127.0.0.1 -H Content-Type:\ application/json 
```

您能否让我知道脚本中有什么问题，因为我知道“空间”转义有问题，但不知道如何解决。

我也尝试了以下组合，但结果相同：

```
CT="Content-Type: application/json"
TEST="curl http://127.0.0.1 -H \"$CT\"" 
```

*升级版：*

bash / dash 仅在服务器上可用。(/bin/sh --> bash)

```
GNU bash, version 4.2.10(1)-release (x86_64-pc-linux-gnu) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-21T09:43:59.143

运行以下命令：（删除*Content-Type*后的空格）

```
#!/bin/bash
CT="Content-Type:application/json"

TEST="curl http://127.0.0.1 -H $CT"
echo $TEST

RESPONSE=`$TEST`
echo $RESPONSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T07:08:31.477

您可以尝试：`bash -c your_bash_file.sh`它对我有同样的问题

# php - 哪个更快/更高效——大量的小 MySQL 查询或一个大的 PHP 数组？

> ID：12051334
> 
> 赞同：11
> 
> 时间：2012-08-21T08:54:00.740
> 
> 标签：php, mysql, arrays, performance

我有一个基于 PHP/MySQL 的 Web 应用程序，它通过一个名为 , 和字段的 MySQL 表来`language_strings`支持`string_id`国际化`lang_id`。`lang_text`

当我需要以所选语言显示字符串时，我调用以下函数：

```
public function get_lang_string($string_id, $lang_id)
    {
        $db = new Database();
        $sql = sprintf('SELECT lang_string FROM language_strings WHERE lang_id IN (1, %s) AND string_id=%s ORDER BY lang_id DESC LIMIT 1', $db->escape($lang_id, 'int'), $db->escape($string_id, 'int'));
        $row = $db->query_first($sql);

        return $row['lang_string'];
    } 
```

这非常有效，但我担心可能会有很多数据库查询正在进行。例如，主菜单有 5 个链接文本，它们都调用了这个函数。

将所选的整个`language_strings`表结果加载`lang_id`到 PHP 数组中然后从函数中调用它会更快吗？这可能是一个巨大的数组，其中大部分是冗余的，但显然每个页面加载一个数据库查询而不是很多。

任何人都可以提出另一种更有效的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T08:56:50.727

没有不区分大小写的答案。您可以根据具体情况逐个陈述。话虽如此，大多数情况下，在一个查询中获取所有数据，将其弹出到数组或对象中并从那里引用它会更快。

需要注意的是，您是否可以像运行五个单独的查询一样快速地在一个查询中提取您需要的所有数据。这就是查询本身的性能发挥作用的地方。

有时，包含一个或两个子查询的查询实际上比单独运行几个查询的时间效率低。

我的建议是测试一下。一起获取一个查询，获取你需要的所有数据，看看执行需要多长时间。对其他五个查询中的每一个进行计时，看看它们合并需要多长时间。如果它几乎相同，请将输出粘贴到一个数组中，这样会更有效，因为不必频繁连接到数据库本身。

但是，如果您的组合查询需要更长的时间才能返回数据（例如，它可能会导致全表扫描而不是使用索引），那么请坚持使用单个查询。

最后，如果您要一遍又一遍地使用*相同*的数据 - 数组或对象*每次*都会胜出，因为访问它比从数据库中获取它要快得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T13:05:50.673

好的 - 我做了一些基准测试，惊讶地发现将事物放入数组而不是使用单个查询平均会慢 10-15%。

我认为这样做的原因是，即使我过滤掉了“不常见”的元素，不可避免地总会有一些未使用的元素作为理所当然的事情。

对于个人查询，我只会得到我需要的东西，而且由于查询非常简单，我认为我最好坚持使用这种方法。

这对我有用，当然在单个查询更复杂的其他情况下，我认为将公共数据存储在数组中的方法会变得更有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-21T09:06:00.253

同意每个人在这里所说的......这都是关于数字的。

一些额外的提示：

1.  尝试创建一个存储您需要的最小值的单个内存阵列。这意味着删除大部分明显的冗余。

2.  在性能关键的环境中，有针对这些问题的标准方法，例如将 memcached 与 mysql 一起使用。这有点矫枉过正，但这基本上可以让您分配一些外部内存并在那里缓存您的查询。由于您选择了要分配的内存量，因此您可以根据系统的内存量进行规划。

3.  只是玩数字。尝试使用单独的查询（这是最简单的方法）并强调您的 PHP 脚本（例如从命令行调用它数百次）。测量这需要多少时间，看看实际性能损失有多大。从我个人的经验来说，我通常将所有内容缓存在内存中，然后有一天当数据变得太大时，我会耗尽内存。然后我将所有内容拆分为单独的查询以节省内存，并首先看到性能影响并没有那么糟糕:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T09:19:39.263

我同意 Fluffeh 的意见：查看您可以使用的其他选项（连接、子查询，确保您的索引反映数据的相对性 - 但不要过度索引和*测试*）。很可能你会在某个时候得到一个数组，所以这里有一些性能提示，与你所期望的相反，比如

```
$all = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

与之相比，内存效率也较低：

```
$all = array();//or $all = []; in php 5.4
while($row = $stmt->fetch(PDO::FETCH_ASSOC);
{
    $all[] = $row['lang_string '];
} 
```

更重要的是：您可以在获取数据时检查冗余数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T09:50:24.470

我的回答是在两者之间做点什么。检索 lang_id 的所有字符串，这些字符串短于某个长度（例如，100 个字符）。与较长的字符串相比，较短的文本字符串更有可能在多个地方使用。在 get_lang_string() 中缓存静态关联数组中的条目。如果未找到某个项目，则通过查询检索它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-20T13:15:41.990

我目前正处于`site/application`我不得不踩刹车并非常仔细地考虑速度的地步。我认为提到的这些速度测试应该将服务器上的流量视为影响结果的重要变量。如果您将数据放入 javascript 数据结构并在客户端计算机上处​​理，则处理时间应该更规律。如果您通过 mysql 通过 php 请求大量数据（例如），这是对一台机器/服务器的需求，而不是传播它。随着流量的增长，您必须与许多用户共享服务器资源，我认为这就是让 JavaScript 做更多事情的地方，这将减轻服务器上的负载。您还可以通过以下方式将数据存储在本地计算机中`localstorage.setItem(); / localstorage.getItem();`（大多数浏览器每个域大约有 5mb 的空间）。如果数据库中的数据不经常更改，则可以将其存储到客户端，然后只需在“启动”时检查它是否仍处于日期/有效状态。

这是我在拥有并使用该帐户 1 年后发表的第一条评论，因此我可能需要微调我的漫无边际 - 只是表达我目前的想法。

# java - Telecom API 的服务要求

> ID：12051340
> 
> 赞同：0
> 
> 时间：2012-08-21T08:54:08.733
> 
> 标签：java, web-services, load-testing, performance-testing, telecommunication

我创建了一个使用 Telecom 提供的 Location 和 SMS REST API 的服务或应用程序（无论你怎么称呼它；））。我希望我不必解释这些 API 的作用，但首先是获取手机位置，其次是向手机发送 SMS。

我想知道哪些参数主要以电信方式用于描述对这些 API 很重要的参数。我认为这将是 ：

-响应时间，在重负载下维护服务，服务延迟，可能是 CAPS（每秒呼叫）。

这就是为什么我想问，这些 API 还能测试什么......结合电信的要求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:19:37.790

如果您使用“REST API”，则意味着您使用高级 API 并通过网关与网络交谈，这可以解决大多数问题。

但是，如果您直接通过 SMPP 与 SMSC 或 USSDC 通话，则第一条规则是“尽快发送确认数据包（响应）”，否则它将再次向您发送 SMS。USSDС 将保持信号链接，直到您向客户发送答案。等等。但这不是您的情况……您使用的网关可以确保网络安全。

定位服务不是那么反复无常。

# objective-c - 链接到 Dropbox

> ID：12051341
> 
> 赞同：3
> 
> 时间：2012-08-21T08:54:11.007
> 
> 标签：objective-c, ios, dropbox

我有一个奇怪的问题。我的应用程序应该链接到 Dropbox，并且应该能够上传/下载文件。我有一个名为“连接到 Dropbox”的按钮。按下此按钮时，应用程序应链接到 Dropbox。

```
- (IBAction)btnLoginClick:(id)sender {
    [[DBSession sharedSession] linkFromController:self];
} 
```

当调用此操作时，一切正常。Dropbox.app 已加载并请求权限等。

如果我将函数更改为如下所示：

```
- (IBAction)btnLoginClick:(id)sender {
    [[appDelegate getDropboxService] link:self];
} 
```

然后打开 Dropbox.app 并请求许可，但该应用程序未链接到 Dropbox。

我收到以下错误：

```
[WARNING] DropboxSDK: error making request to /1/metadata/dropbox - Token is invalid. 
```

appDelegate 中的函数仅返回 Dropbox 对象，或者如果它为 nil，它将被创建。Link 函数只调用与第一个代码块相同的行。

```
[[DBSession sharedSession] linkFromController:self]; 
```

我不知道为什么会发生这种情况或我做错了什么。

问候亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:14:30.423

我有同样的问题。就我而言，我创建了一个`restClient`链接到 Dropbox 的 before 应用程序实例。可能这有帮助

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    if ([[DBSession sharedSession] handleOpenURL:url]) {
        if ([[DBSession sharedSession] isLinked]) {
            NSLog(@"App linked successfully!");
            //now you can call restClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T01:20:12.393

我的问题是，当 DropBox 用户安装了官方 DropBox 应用程序时，您的应用程序会将身份验证转移到该应用程序，而不是使用内置工作表。如果您的应用程序设置为在不再是关键时退出，那么`([DBSession sharedSession])`当您的应用程序再次获得焦点（即重新启动）时，共享会话将不再存在。这导致（在我的情况下）导致重新链接、失败、尝试再次重新链接等的无限循环。

对我来说，解决方法是在通话中重新创建共享会话`- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url`。

# mysql - 为什么这个查询需要这么长时间才能执行

> ID：12051342
> 
> 赞同：2
> 
> 时间：2012-08-21T08:54:16.683
> 
> 标签：mysql, query-optimization

我有三张桌子

*   glSalesJournal
*   HMIS添加
*   HMISMain

现在我要做的是添加 glSalesJournal amt 与 HMISAdd amt 同时与各种字段分组并将结果插入 glSalesJournal

glSalesJournal 包含 633173 条记录

HMISAdd 包含 4193 条记录

HMISAdd 和 glSalesJournal 包含相同的列，它们是

*   位置
*   glAcct
*   glSubAcct
*   批次Nbr
*   合同Nbr
*   上午

我在表中添加了索引，结果仍然相同。

这是我的代码：

```
INSERT INTO hmismain
            (loc,
             glacct,
             subacct,
             batchnbr,
             contractnbr,
             amt)
SELECT glsalesjournal.loc,
       glsalesjournal.glacct,
       glsalesjournal.glsubacct,
       ( glsalesjournal.amt + hmisadd.amt ) AS sumAmt,
       glsalesjournal.batchnbr,
       glsalesjournal.salescontnbr
FROM   glsalesjournal
       LEFT OUTER JOIN hmisadd
                    ON ( glsalesjournal.loc = hmisadd.loc
                         AND glsalesjournal.glacct = hmisadd.glacct
                         AND glsalesjournal.glsubacct = hmisadd.subacct
                         AND glsalesjournal.batchnbr = hmisadd.batchnbr
                         AND glsalesjournal.salescontnbr = hmisadd.contractnbr )
GROUP  BY glsalesjournal.loc,
          hmisadd.loc,
          glsalesjournal.glacct,
          hmisadd.glacct,
          glsalesjournal.glsubacct,
          hmisadd.subacct,
          glsalesjournal.batchnbr,
          hmisadd.batchnbr,
          glsalesjournal.salescontnbr,
          hmisadd.contractnbr 
```

脚本执行时间超过2小时。即使我将记录限制为 100 条，所花费的时间也是一样的。

有人可以指导我如何优化脚本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:16:43.103

1）看起来这是一个一次性的查询，我在这里正确吗？如果不是，您每次都将相同的数据插入 hmismain 表中。
2）您正在对来自**两个**单独表的字段进行分组，因此再多的索引也无济于事。**唯一**有帮助的索引是以相同方式链接这两个表的视图上的索引。

进一步说明：
有什么意义

```
 GROUP  BY glsalesjournal.loc,
      hmisadd.loc,
      glsalesjournal.glacct,
      hmisadd.glacct,
      glsalesjournal.glsubacct,
      hmisadd.subacct,
      glsalesjournal.batchnbr,
      hmisadd.batchnbr,
      glsalesjournal.salescontnbr,
      hmisadd.contractnbr 
```

您正在按相同的字段对数据进行两次分组
`glsalesjournal.loc, hmisadd.loc`
`glsalesjournal.glacct, hmisadd.glacct,`
......

从 GROUP BY 中删除重复项，它应该运行得很快

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:00:30.737

您是否在此字段上添加了索引：

```
glSalesJournal.loc
glSalesJournal.glAcct
glSalesJournal.glSubAcct
glSalesJournal.batchNbr
glSalesJournal.salesContNbr
HMISAdd.Loc
HMISAdd.GlAcct
HMISAdd.SubAcct
HMISAdd.batchNbr 
HMISAdd.contractNbr 
```

如果此字段没有索引，它将对每个单独的记录执行全表扫描，从而导致性能下降。

**[MySQL 创建索引语法](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)**

# zend-framework - 转换 Zend 框架网站语言？

> ID：12051346
> 
> 赞同：0
> 
> 时间：2012-08-21T08:54:35.043
> 
> 标签：zend-framework, translation, multilingual, translate, zend-translate

您好，我是 Zend Framework 的新手。我想将使用 Zend 框架以英语构建的网站转换为乌克兰语。任何人都可以帮我做什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:41:28.650

1.  确保您的网站支持国际化，因此所有 UI 字符串都可以通过 translate() 助手和 Zend_Translate 进行本地化。

如果您的网站已经有不止一种语言 - 在大多数情况下，您不应该关心这一步。

1.  将所有 UI 字符串提取到翻译资源文件（Gettext .po、TMX、xliff 等）

2.  聘请翻译为您进行实际翻译，或自行完成。

3.  将新资源部署到网站并确保您的语言能够识别区域设置（或执行手动语言切换链接）

您的问题非常笼统，我不确定您在哪一步需要帮助。一般来说，乌克兰语的本地化不应有任何特殊情况。遵循 ZF 网站本地化的众多 HOWTO 中的任何一个，了解您可以在 Internet 上找到的任何其他语言。

# javascript - 如何使没有 href 属性的链接可访问？

> ID：12051353
> 
> 赞同：14
> 
> 时间：2012-08-21T08:54:58.930
> 
> 标签：javascript, html, accessibility, anchor, wai-aria

在我工作的网站上使用了第三方脚本，它替换了一些`<a href="">`with的实例`<a>`。由于脚本的另一部分，这些链接仍然有效，但它们不再被用户代理视为链接。

我可以通过添加将它们恢复为选项卡式导航顺序，`tabindex="0"`但我怎样才能使辅助技术将它们宣布为链接或将它们包含在页面上所有链接的列表中？

会增加`role="link"`帮助吗？

我正在推动第三方改进他们的脚本，以使 href 保持不变。但与此同时，我如何最好地修复正在造成的损害？

我无法将原始代码`href`或类似内容添加`href="#"`回链接，因为第三方代码将不再执行它的功能。我希望他们改进他们的代码，以便我可以，但现在我需要使链接可以在没有“href”的情况下访问。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T10:56:59.937

要使非 href 的`<a>`行为类似于`<a>`（并且可访问），您必须添加`role=link`, `tabindex=0`，将其设置为看起来像真正的链接，*并*添加键盘处理程序代码以将 Return 视为单击。

`role="link"`还不够；屏幕阅读器可能会将其报告为链接，但如果没有`tabindex="0"`适当的视觉样式，有视力的用户将无法首先使用标签，并且如果没有键盘事件处理程序，则只有鼠标用户才能单击它。（从技术上讲，屏幕阅读器用户通常有热键来模拟鼠标点击，但只有键盘视力的用户通常没有这个选项，所以不要依赖它。）

或者，如果（大如果！）您使用的疯狂脚本允许它，您可以尝试`<a>`在原始脚本中填充“键盘点击源”（我的术语）：所以你有：

```
<a>foo</a> 
```

您将其替换为：

```
<a><a class='shim' href="javascript:void(0)">foo</a></a> 
```

（`class='shim'`仅当您需要执行稍后描述的事件时才需要...）您可以在 jQuery 中使用以下方法执行此操作：（借用 Jack's answer）

```
$("a:not([href])").wrapInner("<a class='shim' href='javascript:void(0)'></a>") 
```

它的工作原理是内部新添加`<a ...>`的有一个`href`，因此它作为链接公开并且是可选项卡的。更重要的是，如果用户选择它并按下回车键，默认的 A 行为会将键盘输入转换为`click`事件。这个特定的 A 有一个`href`返回 undefined/void(0)，所以不会发生实际的导航，但是点击事件仍然会冒泡到原始的 A，它会对其进行操作。

（这是一种允许某些父元素（通常是 DIV 或类似元素）处理点击事件的简洁模式，添加一个可以从键盘获取点击事件的子标签 A 为您提供鼠标和键盘都可用的 UI。）

这里最大的警告是它假设您的原始脚本不关心`target`事件的发生。如果该脚本确实检查了这一点，那么当它看到来自 shim A 而不是原始 As 的点击事件时，它会感到困惑。解决此问题的一种方法是捕获并重新引发事件，这可能很繁琐，并且可能仅适用于最近的浏览器 - 例如使用类似：

```
// 'shim' class used so we can do this:
$("a.shim").click(function(e) {
    e.preventDefault();
    e.stopPropagation();

    // the following works if listener using jQuery or is setting onclick directly, otherwise...
    // $(e.target).parent().click();.

    // More general way to raise events; may need alternate for IE<9
    var e2 = document.createEvent("UIEvents");
    e2.initUIEvent("click", true, true, window, 1);
    e.target.parentNode.dispatchEvent(e2)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:19:01.130

虽然它不是很漂亮，但你可以`href`使用 jQuery 获得没有像这样的属性的所有锚点；

```
$("a:not([href])") 
```

然后，您可以将`href`这些链接上的属性设置为“#”，这将使它们再次作为常规链接工作。

[这是一个有效的 JSFiddle](http://jsfiddle.net/EXRZK/)

很抱歉用 jQuery 解决方案回复...但是在常规 JavaScript 中执行此操作会更加冗长。

另一种方法是给锚点一个角色，然后以这种方式选择它们：

```
$("a[role='link']") 
```

# javascript - 使用 stringify 设置和获取对象到本地存储？

> ID：12051357
> 
> 赞同：8
> 
> 时间：2012-08-21T08:55:22.203
> 
> 标签：javascript, object, local-storage, stringify

创建一个名为 car 的对象：

```
function car(temp){

    this.brand=temp[0];
    this.color=temp[1];
    this.year=temp[2];
}

var temp = ['Skoda', 'Red', '2012'];
car = new car(temp); 
```

1.  从 localStorage 读取后设置对象和字符串化：

    ```
    localStorage.setItem('car',car);
    car = localStorage.getItem('car');
    car = JSON.stringify(car); 
    ```

    字符串化后的汽车----------------> [object Object] at file:///android_asset/www/...

2.  在它之后将对象字符串化并将对象设置为 localStorage： `localStorage.setItem('car',JSON.stringify(car)); car = localStorage.getItem('car');`

stringify 后的车----------------> "{\"brand\":\"Skoda\",\"color\":\"Red\",\"year \":\"2012\"}" 在 file:///android_asset/www/...

问题1：为什么字符串化对象时的顺序会有所不同？

问题2：为什么我不能使用这样的字符串化对象：

```
08-21 11:49:14.860: I/Web Console(9642): car after stringify----------------->     {"brand":"Skoda","color":"Red","year":"2012"} 
```

console.log("car.brand----->" +car.brand); car.name----->未定义

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T09:01:01.340

据我了解，一旦它被字符串化，你就不能使用你的字符串化对象，因为它不再是一个对象。这是一个字符串。

因此，当您尝试对`car.brand`字符串进行操作时，没有属性`brand`。

就个人而言，我认为好的做法是这样做。

```
 function car(temp){
     this.brand=temp[0];
     this.color=temp[1];
     this.year=temp[2];
 }

 var temp = ['Skoda', 'Red', '2012'];
 car = new car(temp);

 localStorage.setItem('car',JSON.stringify(car)); 
 car = localStorage.getItem('car');
 car = JSON.parse(car); 
```

这意味着汽车对象现在不是字符串而是对象。

执行此操作时，还使用 ​​stringify 写入本地存储并使用 parse 读取。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-21T08:59:55.907

您不能将 JavaScript 对象存储为 localStorage，[请参阅此问题](https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage)。

所以使用你的第二个选项。首先将对象字符串化并存储它。稍后将其拾取并将其解析为 javascript 对象。

```
localStorage.setItem('car',JSON.stringify(car));
carString = localStorage.getItem('car');
car = JSON.parse(carString);
console.log(car.brand); // Skoda 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:31:15.510

我最近也面临同样的问题。看看我写的这个脚本。
[https://github.com/andresgallo/truStorage](https://github.com/andresgallo/truStorage)

它允许在本地存储中存储和检索对象。如果需要，它将自动将对象作为对象返回。另一件事是您还设置和获取嵌套对象中的项目。最好的部分是它是一个小脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-21T21:31:36.493

最新的浏览器现在原生支持`localStorage`对象。我已经用 Chrome v44 和 Firefox v34 对此进行了测试：

```
localStorage
Storage {debug: "undefined", uid: "3", length: 2} 

typeof localStorage
"object" 
```

所以从现在开始。你会没事的。

# c# - 移动到下一个字段 webbrowser 控件

> ID：12051361
> 
> 赞同：0
> 
> 时间：2012-08-21T08:55:27.353
> 
> 标签：c#, wpf, webbrowser-control

我在 wpf 中使用 Web 浏览器控件来加载网页。我需要一个 wpf 按钮，单击该按钮将帮助用户移动下一个输入字段，该网页有两个文本框和两个单选按钮作为输入字段。单击 wpf 按钮时如何模拟这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:05:21.860

要将焦点设置在 WPF 文本框上，您可以执行以下操作。（可能重复：[来源](https://stackoverflow.com/questions/828155/cursor-focus-on-textbox-in-wpf-c)）

将逻辑焦点设置到输入控件

```
FocusManager.SetFocusedElement(this, textboxJack);     // set logical focus 
```

将键盘焦点设置到输入控件

```
Keyboard.Focus(textboxJill);                             // set keyboard focus 
```

# android - Google Play 内容政策

> ID：12051362
> 
> 赞同：5
> 
> 时间：2012-08-21T08:55:27.500
> 
> 标签：android, google-play

我刚刚收到一封来自 Google 的电子邮件，告诉我我的一个应用违反了开发者条款，我有 7 天的时间来遵守。他们是这样说的：

> 警告原因：违反内容政策的垃圾邮件条款。
> 
> *   不要发布重复的内容。
> *   产品描述不应误导或加载关键字以试图操纵商店搜索结果中的排名或相关性。
> 
> 如果您未在本通知发布后的 7 天内修改您的应用程序描述以使其符合要求，您的应用程序将被删除。

据我所知，他们认为应用描述加载了关键字的原因，我真的不知道“不要发布重复内容”是指什么。这是否意味着市场上还有其他类似的应用程序？我的是第一个，最具创新性的，并且是同类产品中最受欢迎的。或者可能是因为描述中重复了某些内容（嗯，不是）？

所以问题是 - 内容政策指的是什么？我非常讨厌谷歌没有客户支持。没有人可以联系以询问详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:07:56.790

一定是所有这些网站。谷歌可能认为这是试图拥有大量入站链接以操纵搜索引擎排名。显然不是，但您可以通过一个指向您的网站的链接来解决问题，该链接列出了您获取内容的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:01:16.450

好奇怪，我们能看到App描述吗？我敢打赌，这与您在描述中所说的内容有关，对我来说重复的内容意味着多次发布相同的内容....

编辑：刚刚发现这个，提到了很多关于变化但仍然没有正确的描述 oO

[http://androidcommunity.com/google-play-app-policies-updated-with-major-changes-20120801/](http://androidcommunity.com/google-play-app-policies-updated-with-major-changes-20120801/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:39:46.647

很明显，所有这些链接（只是太多）构成“违反内容政策的垃圾邮件规定”，请注意句子中的**垃圾邮件一词。**

我认为“重复”不是这个警告中的相关概念，除了许多链接的重复（文字游戏）。

同样从 SEO（搜索引擎优化）的角度来看，使用流行网站的名称创建搜索引擎链接并构成网页排名的操纵......

# javascript - 如何检查 Chrome 扩展程序是否已完全安装

> ID：12051366
> 
> 赞同：8
> 
> 时间：2012-08-21T08:55:44.593
> 
> 标签：javascript, google-chrome, google-chrome-extension

使用 Chrome 网上应用店内联安装 ( [https://developers.google.com/chrome/web-store/docs/inline_installation](https://developers.google.com/chrome/web-store/docs/inline_installation) ) 可以指定在`chrome.webstore.install()`成功安装扩展程序时执行的回调。

通过一些非常繁琐的调试，我了解到在执行回调时不一定 100% 安装扩展 - 可能尚未加载背景或内容脚本尚不可用。

在我的特殊情况下，问题以这种方式出现：

1.  `chrome.webstore.install()`用户单击绑定到`onclick`事件的安装按钮。
2.  成功回调注入 iFrame。
3.  为 iFrame 定义内容脚本并注入以完成一些收尾工作
4.  内容脚本返回完成的安装对话框。

第3步是问题。有时 iFrame 将在内容脚本完全加载之前被注入，因此不会注入任何脚本（内容脚本仅注入到新创建的 iFrame 中，而不是在安装/启用扩展时已经存在的 iFrame）。

我知道有可能的解决方法，例如让扩展本身注入 iFrame 或 simple `setTimeout()`，但为了帮助其他人，我认为值得提出这个问题：

**`chrome.webstore.install()`当回调不能确保扩展时，如何确定扩展已 100% 安装？**

[使用检查用户是否安装了某个扩展](https://stackoverflow.com/questions/8042548/checking-if-user-has-a-certain-extension-installed)中描述的著名`<img>`加载方法不能可靠地工作（对于那些认为这是一个解决方案的人）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T22:43:35.187

这是这样做的方法：

[http://code.google.com/chrome/extensions/extension.html#global-events](http://code.google.com/chrome/extensions/extension.html#global-events)

正如下面最后一个链接中提到的，你应该能够做到：

```
var myPort=chrome.extension.connect('yourextensionid_qwerqweroijwefoijwef', some_object_to_send_on_connect); 
```

您还可以检查下一个链接中的**检查项目是否已安装部分：**

[https://developers.google.com/chrome/web-store/docs/inline_installation](https://developers.google.com/chrome/web-store/docs/inline_installation)

或者您可以按照这篇文章中所做的操作：

[检查用户是否安装了 Chrome 扩展程序](https://stackoverflow.com/questions/6293498/check-whether-user-has-my-chrome-extension-installed)

我还看到了有关背景页面和本地存储的解决方案：

[http://developer.chrome.com/extensions/background_pages.html](http://developer.chrome.com/extensions/background_pages.html)

[Chrome 扩展安装后挂钩/API 功能：它存在吗？](https://stackoverflow.com/questions/8549263/chrome-extension-post-install-hook-api-function-does-it-exist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:33:06.243

您确定您的内容脚本的工作需要在用户安装扩展的同一页面上完成吗？如果没有，只需让您的扩展程序调用[`chrome.tabs.update`](https://developer.chrome.com/extensions/tabs.html#method-update)或（不需要选项卡权限[`chrome.tabs.create`](https://developer.chrome.com/extensions/tabs.html#method-create)的少数方法中的两种）打开一个可以注入您的内容脚本的页面。`tabs`

否则，您的扩展程序可以使用[编程注入来注入可以](https://developer.chrome.com/extensions/content_scripts.html#pi)[与您的页面通信](https://developer.chrome.com/extensions/content_scripts.html#host-page-communication)的内容脚本。您可以使用[`chrome.tabs.query`](https://developer.chrome.com/extensions/tabs.html#method-query)它来确保您正在注入正确的选项卡。

# java - 安装过程中如何打开防火墙端口？

> ID：12051371
> 
> 赞同：4
> 
> 时间：2012-08-21T08:55:57.063
> 
> 标签：java, windows, firewall, install4j, windows-firewall

如何在安装过程中使用 install4j 打开 Windows 防火墙端口？
我为 c# 找到了这个解决方案，但我无法将它移植到 install4j 自定义代码： http:
[//www.codeproject.com/Articles/14906/Open-Windows-Firewall-During-Installation](http://www.codeproject.com/Articles/14906/Open-Windows-Firewall-During-Installation)

也许有人有想法或替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-28T14:10:01.177

问这个问题已经有一段时间了，但这是我使用 install4j 5.1/6.1 的方法

对于每个防火墙规则，我都使用了带有以下参数的“运行可执行文件或批处理文件”操作：

可执行文件：`${installer:sys.system32Dir}\netsh.exe`

工作目录：`${installer:sys.system32Dir}`

参数：取决于我想使用[netsh](http://technet.microsoft.com/en-us/library/dd734783%28v=ws.10%29.aspx)语法创建的规则。

例如：`advfirewall; firewall; add; rule; name=${compiler:sys.shortName} UDP IN; dir=in; action=allow; service=${compiler:sys.shortName}; localip=any; remoteip=any; localport=any; remoteport=any; protocol=udp; interfacetype=any; security=notrequired; edge=no; profile=any; enable=yes`

或者，从编辑对话框：

```
advfirewall
firewall
add
rule
name=${compiler:sys.shortName} UDP IN
dir=in
action=allow
service=${compiler:sys.shortName}
localip=any
remoteip=any
localport=any
remoteport=any
protocol=udp
interfacetype=any
security=notrequired
edge=no
profile=any
enable=yes 
```

一句忠告：

netsh 对它接收的参数很挑剔。更糟糕的是，当它无法解析您的输入时，它往往会打印出非常无用和误导性的消息。所以请注意以下几点：

1.  将每个 netsh 命令作为单独的参数传递。在属性表中使用分号分隔它们。在由换行符分隔的编辑对话框中。
2.  不要在你的论点中使用引号。如果 Microsoft 文档告诉您指定这样的规则名称：`name="rule name"`，则仅在命令行中执行此操作。从 install4j 开始，参数应该`name=rule name` **不带引号**。
3.  确保您的论点不包含任何不应该包含的内容，**例如它们不属于的地方的空白**。netsh 不喜欢这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-07T06:49:12.023

Thx，我找到了一个类似的解决方案，我刚刚创建了一个“firewall.cmd”，规则让它在安装过程中从 install4j 运行。“firewall.cmd”的内容：

```
netsh.exe advfirewall firewall delete rule name="QOMET-IN"
netsh.exe advfirewall firewall delete rule name="QOMET-OUT"
netsh.exe advfirewall firewall add rule name="QOMET-IN" protocol=TCP dir=in localport=3050,29418-29430,14416 security=notrequired action=allow profile=any enable=yes
netsh.exe advfirewall firewall add rule name="QOMET-OUT" protocol=TCP dir=out remoteport=3050,29418-29430,14416,20,21,25,587,80 security=notrequired action=allow profile=any enable=yes 
```

# firefox - Firefox 收藏夹存储在 Windows 中的什么位置？

> ID：12051380
> 
> 赞同：0
> 
> 时间：2012-08-21T08:56:22.723
> 
> 标签：firefox, explorer, favorites

我想清理一下我的 Firefox 收藏夹，因为它已经添加了 4 年，但没有从中删除。

我在哪里可以查看收藏夹以便我可以在 Windows 资源管理器中浏览它们？

我正在使用 Windows 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:03:27.633

为什么不导出它们？之后，如果需要，您可以将它们保存到本地硬盘驱动器作为备份以备将来恢复。

# python - 有没有办法在 Python（或其他语言）中确定 JPG 图像是否损坏？

> ID：12051381
> 
> 赞同：6
> 
> 时间：2012-08-21T08:56:27.420
> 
> 标签：python, image, file

我想知道是否有办法在 Python（或其他语言）中确定打开 JPEG 文件，并确定它是否已损坏（例如，如果我在 JPG 文件完成之前终止下载，那么我无法打开文件并查看）？是否有可以轻松完成此操作的库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T09:40:40.223

您可以尝试使用 PIL。但是仅仅打开一个截断的 JPG 文件不会失败，该`verify`方法也不会失败。但是，尝试加载它会引发异常；

首先，我们修改一个好的 jpg 文件：

```
> du mvc-002f.jpg
56  mvc-002f.jpg
> dd if=mvc-002f.jpg of=broken.jpg bs=1k count=20
20+0 records in
20+0 records out
20480 bytes transferred in 0.000133 secs (154217856 bytes/sec) 
```

然后我们尝试 Python Imaging Library：

```
>>> import Image
>>> im = Image.open('broken.jpg')
>>> im.verify()
>>> im = Image.open('broken.jpg')  # im.verify() invalidates the file pointer
>>> im.load()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/PIL/ImageFile.py", line 201, in load
    raise IOError("image file is truncated (%d bytes not processed)" % len(b))
IOError: image file is truncated (16 bytes not processed) 
```

正如用户 827992 所说，即使是截断的图像通常仍然可以部分解码和显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:07:06.957

你可以使用 PIL 包来做到这一点：

```
import Image

def is_image_ok(fn):
    try:
        Image.open(fn)
        return True
    except:
        return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:08:57.610

我不这么认为。

JPEG 标准更像是一个容器，而不是关于实现的标准。

损坏这个词通常意味着文件不再代表原始数据，但大部分时间仍然可以解码，它会产生一个未定义的输出，不是应该产生的输出，但很可能是放在 JPEG 解码器中要输出一些东西，同样因为没有办法将唯一的位排列与 JPEG 文件格式相关联，你不能以编程方式执行此操作，你没有特定的模式，即使你有它，你也不能这么说仅在解析实际文件时，在不知道原始内容是什么的情况下，有点是错误的地方或丢失了。

文件的标题也可能被损坏，但在这种情况下，您的文件可能被指定为损坏而不关心“是什么”，因为任何通用文件都可能损坏。

# ios - 如何在 iOS 上显示电子邮件正文

> ID：12051385
> 
> 赞同：0
> 
> 时间：2012-08-21T08:56:32.940
> 
> 标签：ios, email, uiwebview

我正在 iOS 上开发电子邮件应用程序。我想创建一个可以显示电子邮件的视图。我的问题是电子邮件正文可能是纯文本或 HTML（有时带有 CSS），因此我无法为此类内容找到合适的 UI 组件。我试过`UIWebView`了，但是当内容是纯文本时，换行符被忽略了！

如何将纯文本转换为 HTML？或者只是使用 UITextView 来显示纯文本内容？那么，您有什么建议吗？

更新：

此外，许多 HTML 内容包含大多数只是 url 的图像。如果我使用基于文本的视图，如何显示图像？是否有任何库支持此类功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:03:05.743

您应该使用 UIWebView 并将换行符转换为 br 标签，如下所示：

```
HtmlText = [dataString stringByReplacingOccurrencesOfString:@"\n" withString:@"<br/>"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:05:17.343

使用第三方 textView - 适用于 iOS 的富文本视图，具有基本的 HTML 呈现。按照[bctextview](http://www.cocoacontrols.com/platforms/ios/controls/bctextview)链接。

# php - 使用 htaccess 向数百个 .htm 文件添加 php 函数和一些文本？这能行吗？

> ID：12051389
> 
> 赞同：2
> 
> 时间：2012-08-21T08:56:47.027
> 
> 标签：php, javascript, jquery, html, .htaccess

要向 100 多个 .htm 文件添加一项功能（以显示 eu cookie law 弹出窗口），这个提议的系统是否可以工作：

htaccess：将所有传入的 .htm 请求重定向到 cookie.php

在 cookie.php 里面：

```
$_SERVER['REQUEST_URI']
perform document search to get element in head, function{
    include cookie display files
}
document search for element in footer, function{
    Add <a href="#">Cookie Policy</a>
}
Send data to client browser 
```

我有一些我不确定的事情。

*   将不会读取每个 URL：example.com/cookie.php
*   我不确定如何使用 request_uri 实际吐出数据

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:12:45.300

听起来您对一个缺乏动态环境挂钩的静态网​​站感到厌烦。

我在这里的方法是进行全局查找和替换以将单个挂钩插入每个文件，这样您就可以通过该中央挂钩对任何文件执行任何操作。

我会尝试将其插入页面的主要内容区域。当然，这是假设每个页面都具有相似的结构 - 如果不是，您将需要不同的查找和替换操作来将钩子插入到不同类型的页面中。假设每个页面都有一个主要内容区域，一个`div`带有 ID的区域`main`。

在您的文本编辑器中，您将按照以下行进行 REGEX 替换：

```
/id=('|")main\1[^>]*>/, '$0<?php include_once "hook.php"; ?>' 
```

我假设你的文本编辑器的 REGEX 实现有几件事，但基本上我是在`div`' 的开始标记之后直接插入 PHP 挂钩。

然后，在 hook.php 中，你可以做你想做的事。所以输出cookie信息，或者其他什么。

一种更简单的方法是利用每个页面共享的任何常见 JS 挂钩。因此，如果每个页面都加载了 common.js 或其他任何内容，您可以执行与上述类似的操作 - 只有内容会被 DOM 脚本化到页面中而不是源代码中，如果内容是 SEO 敏感的，这不太理想.

# regex - 用vim在单行中查找重复项

> ID：12051396
> 
> 赞同：0
> 
> 时间：2012-08-21T08:56:58.950
> 
> 标签：regex, vim, duplicates

假设我有一个包含多行的文件，例如

```
A.B C B.DAT
E.F C F1.DAT 
```

我想确定那些我有重复的行（例如 B）。但仅当重复项后跟 .DAT 时（请注意，每个元素 A、B、C、... 可以是任意长度）

所以在前面提到的例子中，第一行应该返回一个匹配，第二行不应该。

我想继续删除重复项（即 B.DAT），那么如何确保仅匹配每行的第二次出现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T09:00:15.553

这个正则表达式应该做你想做的（如果我理解你的话......）

```
/\(.\).*\zs\1\.DAT 
```

这转化为

```
\(         2: and "keep" it for later with `\1`
 .      1: get any character
\)         2:
.*            3: Match any number of characters ...
\zs              4: (and set the start of the matched region)
\1                  5: ... followed by the kept character (step 2)
\.DAT                  6: followed by .DAT 
```

使用此正则表达式，您可以`B.DAT`删除

```
%s/\(.\).*\zs\1\.DAT// 
```

**更新**事实证明，副本可以包含多个字符。在这种情况下，正则表达式变为`\(\S\+\).*\zs\1\.DAT`. 现在`\S\+`匹配任何数量 > 1= 的非空白字符，正则表达式的其余部分是相同的。

# api - 命名嵌套资源的 REST 最佳实践

> ID：12051401
> 
> 赞同：0
> 
> 时间：2012-08-21T08:57:08.137
> 
> 标签：api, rest

目前我有以下资源：

```
/api/user/12 
```

返回有关 id=12 的用户的信息

```
/api/user/12/trips 
```

返回用户 12 的行程列表及其信息

但是我认为 /trip/ 是一个单独的资源，所以这将像这样继续：

```
/api/trip/5 
```

返回 id=5 的行程信息

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:00:11.430

最佳实践是使用域的路径。

要显示某个用户：

```
/api/user/{username} 
```

显示所有用户：

```
/api/user 
```

使用查询过滤所有用户。

```
/api/user?region=Italy 
```

这是一篇不错的文章：http: [//developer.immobilienscout24.de/wiki/Path_and_Query_Parameters](http://developer.immobilienscout24.de/wiki/Path_and_Query_Parameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:00:19.033

您应该始终使用复数来命名资源：

```
/api/users 
```

含义：所有用户（集合）。

```
/api/users/12 
```

含义：用户 12。

对于与给定资源相关的嵌套资源，您可以执行以下操作：

```
/api/users/12/trips 
```

含义：全部`trips`为`user`12。

`trip`但是，您仍然可以使用此 URI来描述特定的：

```
/api/trips/5 
```

含义：行程 5。

# jquery - 如何 jQuery JSONP 从 url 检索数据？

> ID：12051408
> 
> 赞同：-2
> 
> 时间：2012-08-21T08:57:24.307
> 
> 标签：jquery, jsonp

我正在获取响应表单服务 url，但正在寻找`jQuery`将数据放在页面上。有人可以帮我处理 jQuery 代码循环吗？

谢谢，

```
<script type="text/javascript"> 

$.jsonp({
    url: "http://test.com",
    callback: "_jqjsp",
    success: function(json) {
       // Will be given the response of service

        alert("success");
       console.log("success");
    },
    error: function() {
       // Will be notified of an error requesting service
       alert("error");
       console.log("error");
    }
});

</script> 
```

这是我的 JSONP 数据

```
_jqjsp({
"response":{
  "numFound":2,
  "docs":[
     {
        "id":"1",
        "Name":"22689",
        "Company":"ABC"

     },
     {
         "id":"2",
        "Name":"00012",
        "Company":"ABC
     },

  ]
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:43:08.317

我想通了希望它可以帮助别人:)

```
 $.jsonp({
json: "http://www.test.com/....",
callback: "_jqjsp",

success: function(json) { // json object

//Success
     $.each(json.response.docs, function(i,item) { // json is the name of the object

          $("#records").append('Test: </br>'); //item is named at the opening of this $.each function
          $("#records").append(item.abc + '</br>'); 
          $("#records").append(item.def + '</br>'); 
          $("#records").append('<p>'); 
          });     

            console.log(json);
            console.log("JSONP was retrieved successfully");
},
error: function() {
   // Will be notified of an error requesting service
   alert("error");
   console.log("error"); // This is for debugging
} }); 
```

# ios - 从 Storyboard ViewController 调用函数？

> ID：12051409
> 
> 赞同：0
> 
> 时间：2012-08-21T08:57:37.620
> 
> 标签：ios, ios4, storyboard

我将项目设置为故事板。

有一个子视图，我已经打开了该视图，我想访问情节提要`UIViewController's`功能来触发事件。

这样的东西可以访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:58:52.360

根据我的经验，如果您没有通过情节提要触发过渡，通常最好使用老式方式。

```
UIViewController* newVC = [self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];
// do whatever setup you want here

[self.navigationController pushViewController:newVC]; 
```

当你正在做的事情适合故事板方法时，它很棒，但它并没有给你任何你不能用手做的事情，一旦你开始在 VC 之间传递任何复杂的东西，不必这样做就节省了优势通过编写复杂的 prepareForSeque 等来快速抵消实现 IBActions。

# python - 导入 Python 文件和导入同一文件的 * 之间的区别

> ID：12051412
> 
> 赞同：2
> 
> 时间：2012-08-21T08:57:51.117
> 
> 标签：python, python-import

> **可能重复：**
> [python 导入问题](https://stackoverflow.com/questions/4635017/python-import-question)

从文件夹导入 Python 文件有什么区别，即：

```
from coredump.analyzer.utils import netAnalyzer 
```

并导入同一文件的“*”，即：

```
from coredump.analyzer.utils.netAnalyzer import * 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T08:59:55.407

第一行导入模块`netAnalyzer`。这意味着您必须按如下方式调用函数：`netAnalyzer.myfunction(...)`.

第二个导入行将函数导入命名空间：这意味着您可以`myfunction(...)`在不提及模块名称的情况下调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:03:18.503

不同之处在于，如果您使用第二次导入并且您不知道自己在做什么，您可能会弄乱命名空间（因为您可能不知道该模块实现了与您的某些名称相同的函数或变量可能已经在您的代码中实现，并且将被覆盖）

# multithreading - 存储特定于作业的数据

> ID：12051418
> 
> 赞同：0
> 
> 时间：2012-08-21T08:58:09.970
> 
> 标签：multithreading, playframework, threadpool, playframework-1.x

在我的游戏应用程序中，我有几个工作，我有一个单例类。

我想做的是让每个 Job 将数据存储在单例类中，并且我希望能够通过另一个类从这个单例类中检索与当前 Job 对应的数据。

换句话说，我想要这样的东西：

*-Job 1 在单例类中存储“Job1Data”*

*-Job 2 在单例类中存储“Job2Data”*

*-另一个类询问当前正在执行的作业的单例类数据（我猜是在当前线程中）并使用它*

为此，我假设每个作业都在不同的线程上运行。然后我所做的是将存储在单例类中的每个 Job 的数据存储在一个 Map 中，该 Map 将当前线程 id 与数据映射。

但是我不确定这是我应该这样做的方式，因为它可能不是线程安全的（尽管据说 Hashtable 是线程安全的），并且每次执行 Job 时可能会创建另一个线程，这会使我的 Map 增长很多，从不清除它自己。

我想到了另一种方法来做我想做的事。也许我可以在我的单例中使用 ThreadLocal 类来确保它是线程安全的并且我存储线程特定的数据。但是，我不知道如果每次执行 Job 时都使用另一个线程，它是否会正常工作。此外，我在某处读到，如果不删除数据，ThreadLocal 会产生内存泄漏，问题是我不知道什么时候可以删除数据。

那么，有人能解决我的问题吗？我想确保我想在作业执行期间存储的数据存储在一个全局类中，并且可以被另一个类访问（可以访问正确作业的数据，因此我猜是正确的线程）。

谢谢您的帮助

# active-directory - 在联合被动请求期间遇到错误。

> ID：12051419
> 
> 赞同：1
> 
> 时间：2012-08-21T08:58:14.400
> 
> 标签：active-directory, saml, adfs2.0, adfs, saml-2.0

我正在尝试将 ADFS 设置为与 SAML 2.0 服务提供商一起使用，但我遇到了无法通过 ADFS 网页对用户进行身份验证的问题。这是我得到的错误：

```
Encountered error during federation passive request. 

Additional Data 

Exception details: 
Microsoft.IdentityServer.Web.RequestFailedException: MSIS7012: An error occurred while processing the request. Contact your administrator for details. ---> System.ServiceModel.FaultException: The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs.
   at Microsoft.IdentityServer.Protocols.WSTrust.WSTrustClientManager.Issue(Message request, WCFResponseData responseData)
   at Microsoft.IdentityServer.Protocols.WSTrust.WSTrustClient.Issue(RequestSecurityToken rst, WCFResponseData responseData)
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.SubmitRequest(MSISRequestSecurityToken request)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.SubmitRequest(MSISRequestSecurityToken request)
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.RequestBearerToken(MSISSignInRequestMessage signInRequest, SecurityTokenElement onBehalfOf, SecurityToken primaryAuthToken, String desiredTokenType, Uri& replyTo)
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.BuildSignInResponseCoreWithSecurityToken(SecurityToken securityToken, WSFederationMessage incomingMessage)
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.BuildSignInResponseForProtocolRequest(FederationPassiveContext federationPassiveContext, SecurityToken securityToken)
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.BuildSignInResponse(SecurityToken securityToken)

System.ServiceModel.FaultException: The server was unable to process the request due to an internal error.  For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the <serviceDebug> configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs.
   at Microsoft.IdentityServer.Protocols.WSTrust.WSTrustClientManager.Issue(Message request, WCFResponseData responseData)
   at Microsoft.IdentityServer.Protocols.WSTrust.WSTrustClient.Issue(RequestSecurityToken rst, WCFResponseData responseData)
   at Microsoft.IdentityServer.Web.FederationPassiveAuthentication.SubmitRequest(MSISRequestSecurityToken request) 
```

有什么想法吗？我尝试了许多设置选项，甚至在新的 Windows 副本上重新安装了 ADFS。

# jquery - 如何使图像在单击时表现为按钮？

> ID：12051421
> 
> 赞同：0
> 
> 时间：2012-08-21T08:58:16.030
> 
> 标签：jquery, css, html, jquery-mobile

我的html代码是

```
<div align="center">
          <div class="buttonwrap"><div class="imgtext">Renew Your Policy</div></div>  
       </div> 
```

我希望此图像显示为单击它的按钮。任何人都可以帮助我在单击它时将其外观和感觉设置为按钮..请帮助我..提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:03:15.143

嗨，您可以使用 CSS 将真正的按钮宽度设置为图像作为背景

```
input.button {
    background: url('path_to_your_image') o o no-repeat;
    border: 0;
    overflow: hidden;
    text-indent: 500px;
}

<input type="button" class="button" onclick="your_function();" /> 
```

或者

```
<input type="submit" class="button" onclick="your_function();" /> 
```

或者你可以做

```
<img src="path_to_your_image" onclick="your_function();" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:59:32.927

```
.buttonwrap {
  border: 3px outset gray;
  background-color: lightgray;
}

.buttonwrap:active {
  border-style: inset;
} 
```

但是 buttonwrap div 真的应该是 an `A`，你不能把 a`DIV`放在 an`A`所以将 imgtext 更改为 a `SPAN`（或者干脆去掉它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T07:25:12.020

我想你想做这样的。使用地图标签 [http://www.w3schools.com/tags/tag_map.asp](http://www.w3schools.com/tags/tag_map.asp)

`enter code here`

```
<img src="planets.gif" width="145" height="126" alt="Planets" usemap="#planetmap">
<map name="planetmap">
  <area shape="rect" coords="0,0,82,126" href="sun.htm" alt="Sun">
  <area shape="circle" coords="90,58,3" href="mercur.htm" alt="Mercury">
  <area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus">
</map> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:02:10.483

嘿，Ekta，你看起来像这样吗：- [http://tinkerbin.com/XOblz5U7](http://tinkerbin.com/XOblz5U7)

**更新的答案**

`.button`在后台定义背景图片

**HTML**

```
<div align="center">
  <div class="buttonwrap"><div class="imgtext"><input type="button" class="button" value="Renew Your Policy"/></div></div>  
   </div> 
```

**CSS**

```
.button {
background:red;
width:150px;
height:50px;
} 
```

查看更新的演示：- [http://tinkerbin.com/E30xfTi8](http://tinkerbin.com/E30xfTi8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:03:18.573

为什么不使用`<button>`then 呢？

```
<div align="center">
  <button class="buttonwrap">
        <span class="imgtext">Renew Your Policy</span>
  </button>  
</div> 
```

你可以乱用填充、边框、背景颜色等等，但这是创建类似按钮行为的最基本设置。只要把它变成一个真正的按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T09:04:18.833

我会在 Ariel 的回答中再添加一种风格：

```
.buttonwrap {
  cursor:pointer;
  border: 3px outset gray;
  background-color: lightgray;
}

.buttonwrap:active {
  border-style: inset;
} 
```

# .net - MVC 4 绑定和返回用户编辑

> ID：12051425
> 
> 赞同：0
> 
> 时间：2012-08-21T08:58:28.383
> 
> 标签：.net, asp.net-mvc, vb.net, asp.net-mvc-4, visual-studio-2012

我目前正在 VS2012 中完成我的第一个 ASP.MVC4 项目，我想知道您如何处理将数据绑定到文本框和组合框（选择块），然后如何将结果返回给控制器？

**模型**

```
Public Class OpenBuildFaultsViewModel

    Public Property FailureID As Int64
    Public Property ModelName As String
    Public Property ZoneName As String
    Public Property Fault As String
    Public Property FaultCode As String
    Public Property FaultCodeDetail As String
    Public Property FaultArea As String
    Public Property MajorAssembly As String
    Public Property SubAssembly As String
    Public Property ComponentAssembly As String
    Public Property BusinessTest As String
    Public Property AuditScore As String
    Public Property Comment As String
    Public Property ShortagePart As String
    Public Property CreatedBy As String
    Public Property FixedByID As Int32
    Public Property FixedByComment As String
    Public Property FixedByFaultRectificationID As Int32

End Class

Public Class RectificationCodesViewModel

    Friend Property ID As Long
    Friend Property Description As String

End Class 
```

**控制器**（失败签核方法）

```
Namespace QSmartRectification

    Public Class FailuresController
        Inherits System.Web.Mvc.Controller

        Function FailureSignOff() As ActionResult

            Dim failureID As Int64 = Convert.ToInt64(TempData("FailureID"))

            Dim data As IEnumerable(Of OpenBuildFaultsViewModel) = Session("Failures")
            Dim model = data.Where(Function(w) w.FailureID.Equals(failureID))

            Dim codes As IEnumerable(Of RectificationCodesViewModel) = TryCast(Session("RectificationCodes"), IEnumerable(Of RectificationCodesViewModel))

            If codes IsNot Nothing Then
                Dim recCodes = From c In codes
                                Select New SelectListItem With {.Value = c.ID, .Text = c.Description}
                ViewBag.RectificationCodes = recCodes
            End If

            Return View(model.FirstOrDefault)

        End Function

        ' POST: /Failures/FailureSignOff
        <HttpPost> _
        Function FailureSignOff(model As OpenBuildFaultsViewModel) As ActionResult

            Stop

        End Function

    End Class

End Namespace 
```

**看法**

```
@ModelType QSmartRectification.OpenBuildFaultsViewModel

@Code
    ViewData("Title") = "Failure Sign Off"
End Code
@section featured
    <section class="featured">
        <div class="content-wrapper" >
            <p class="site-title float-left">QSmart Rectification Sign Off</p>
            <input type="image" src="../../Images/Product.png" />
        </div>
    </section>
End Section
<br />
@Using Html.BeginForm()
@Html.ValidationSummary()  
    @<fieldset class="fieldset">
        <legend>Fault Sign Off</legend>
            <section class="contentdetail">
                <section class="block">
                    <div class="divHeader">
                        <div class="float-left" >
                            <img alt="Missing Image" src="@String.Format("../../Images/{0}.png", Model.MajorAssembly)"/>
                        </div>
                        <div class="divHeaderOffset">
                            <div class="float-left divHalfSpace">
                                <label class="header">Major Assembly</label>
                                <label>@Model.MajorAssembly</label>
                                <label class="header">Sub Assembly</label>
                                <label>@Model.SubAssembly</label>
                            </div>
                            <div class="float-left divHalfSpace">
                                <label class="header">Component Assembly</label>
                                <label>@Model.ComponentAssembly</label> 
                                <label class="header">Business Test</label>
                                <label>@Model.BusinessTest</label> 
                            </div>                            
                        </div>
                    </div>
                    <br />
                    <fieldset class="fieldset">
                        <legend>Fix Details</legend>
                        <div class="divDetailMargin">
                            <div class="float-left divHalfSpace">
                                <label class="header">Rectification Code</label>
                                @Html.DropDownListFor(Function(x) x.FixedByFaultRectificationID, ViewBag.RectificationCodes))
                            </div>
                            <div class="float-left divHalfSpace">
                                <label class="header">Rectification Comment</label>
                                @Html.TextAreaFor(Function(x) x.FixedByComment, 4)
                            </div>
                        </div>
                    </fieldset>
                    <div class="divButtonHeader">
                        <div class="divThreeColumns">
                        </div>
                        <div class="divThreeColumns">
                            <input id="FixFault" type="submit" value=""/>
                            <input id="Back" type="button" value="" onclick="location.href='@Url.Action("Index", "Failures")'" />
                        </div>
                        <div class="divThreeColumns">
                        </div>
                    </div>
                </section>
            </section>
    </fieldset>
End Using 
```

控制器中的 POST 当前返回一个空模型，但 FixedByFaultRectificationID 和 FixedByComment 除外，它们是从视图中的选定组合项和 TextAreaFor 正确填充的。

```
' POST: /Failures/FailureSignOff
<HttpPost> _
Function FailureSignOff(model As OpenBuildFaultsViewModel) As ActionResult

    Stop

End Function 
```

**结果**

![在此处输入图像描述](../Images/44449c64bc1bd9540f26d81b880632eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T12:03:29.753

尝试从属性中 删除`ReadOnly`关键字。`Failure`

`Public ReadOnly Property Failure As OpenBuildFaultsViewModel`

我认为模型绑定器将无法设置属性，因为只读属性只能在类的声明或构造函数中设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:49:38.803

好的，经过对 MVC 和模型绑定的进一步调查，我已经解决了这个问题。在重构代码以使用 ViewBag 将一些数据传递到视图中并通过 ViewBag 绑定视图数据之后，我可以将一个更简单的模型传递给视图。

HTTPPost 操作中未返回模型的原因是，并非模型中的所有项目都绑定在视图中，如本文[所述](https://stackoverflow.com/questions/1388581/passing-object-back-to-view-in-httppost)。

**工作视图**

```
@ModelType QSmartRectification.OpenBuildFaultsViewModel

@Code
    ViewData("Title") = "Failure Sign Off"
End Code
@section featured
    <section class="featured">
        <div class="content-wrapper" >
            <p class="site-title float-left">QSmart Rectification Sign Off</p>
            <input type="image" src="../../Images/Product.png" />
        </div>
    </section>
End Section
<br />
@Using Html.BeginForm()
@Html.ValidationSummary()  
    @<fieldset class="fieldset">
        <legend>Fault Sign Off</legend>
            <section class="contentdetail">
                <section class="block">
                    <div class="divHeader">
                        <div class="float-left" >
                            <img alt="Missing Image" src="@String.Format("../../Images/{0}.png", Model.MajorAssembly)"/>
                        </div>

                        @Html.Hidden("FailureID", Model.FailureID)
                        @Html.Hidden("ModelName", Model.ModelName)
                        @Html.Hidden("ZoneName", Model.ZoneName)
                        @Html.Hidden("Fault", Model.Fault)
                        @Html.Hidden("FaultCode", Model.FaultCode)
                        @Html.Hidden("FaultCodeDetail", Model.FaultCodeDetail)
                        @Html.Hidden("FaultArea", Model.FaultArea)
                        @Html.Hidden("AuditScore", Model.AuditScore)
                        @Html.Hidden("Comment", Model.Comment)
                        @Html.Hidden("ShortagePart", Model.ShortagePart)
                        @Html.Hidden("CreatedBy", Model.CreatedBy)
                        @Html.Hidden("FixedByID",model.FixedByID)

                        <div class="divHeaderOffset">
                            <div class="float-left divHalfSpace">
                                <label class="header">Major Assembly</label>
                                @Html.TextBoxFor(Function(x) x.MajorAssembly, New With {.ReadOnly = True})
                                <label class="header">Sub Assembly</label>
                                @Html.TextBoxFor(Function(x) x.SubAssembly, New With {.ReadOnly = True})
                            </div>
                            <div class="float-left divHalfSpace">
                                <label class="header">Component Assembly</label>
                                @Html.TextBoxFor(Function(x) x.ComponentAssembly, New With {.ReadOnly = True})
                                <label class="header">Business Test</label>
                                @Html.TextBoxFor(Function(x) x.BusinessTest, New With {.ReadOnly = True})
                            </div>                            
                        </div>
                    </div>
                    <br />
                    <fieldset class="fieldset">
                        <legend>Fix Details</legend>
                        <div class="divDetailMargin">
                            <div class="float-left divHalfSpace">
                                <label class="header">Rectification Code</label>
                                @Html.DropDownListFor(Function(x) x.FixedByFaultRectificationID, ViewBag.RectificationCodes)
                            </div>
                            <div class="float-left divHalfSpace">
                                <label class="header">Rectification Comment</label>
                                @Html.TextAreaFor(Function(x) x.FixedByComment, 4)
                            </div>
                        </div>
                    </fieldset>
                    <div class="divButtonHeader">
                        <div class="divThreeColumns">
                        </div>
                        <div class="divThreeColumns">
                            <input id="FixFault" type="submit" value=""/>
                            <input id="Back" type="button" value="" onclick="location.href='@Url.Action("Index", "Failures")'" />
                        </div>
                        <div class="divThreeColumns">
                        </div>
                    </div>
                </section>
            </section>
    </fieldset>
End Using 
```

**工作控制器**

```
Namespace QSmartRectification

    Public Class FailuresController
        Inherits System.Web.Mvc.Controller

        Function FailureSignOff() As ActionResult

            Dim failureID As Int64 = Convert.ToInt64(TempData("FailureID"))

            Dim data As IEnumerable(Of OpenBuildFaultsViewModel) = Session("Failures")
            Dim model = data.Where(Function(w) w.FailureID.Equals(failureID))

            Dim codes As IEnumerable(Of RectificationCodesViewModel) = TryCast(Session("RectificationCodes"), IEnumerable(Of RectificationCodesViewModel))

            If codes IsNot Nothing Then
                Dim recCodes = From c In codes
                                Select New SelectListItem With {.Value = c.ID, .Text = c.Description}
                ViewBag.RectificationCodes = recCodes
            End If

            Return View(DirectCast(model.FirstOrDefault, OpenBuildFaultsViewModel))

        End Function

        ' POST: /Failures/FailureSignOff
        <HttpPost> _
        Function FailureSignOff(model As OpenBuildFaultsViewModel) As ActionResult

            Stop

        End Function

    End Class

End Namespace 
```

进行这些更改后，视图将正确填充回 HTTPPost 上的控制器。

![返回模型](../Images/08a426fcc0cb1e86db251c4df6937ddc.png)

# windows-phone-7 - 当 GeoCoordinateWatcher 无法获取当前的 LatLon 时，重新启动 GeoCoordinateWatcher 的最佳做法是什么

> ID：12051428
> 
> 赞同：1
> 
> 时间：2012-08-21T08:58:33.987
> 
> 标签：windows-phone-7

声明一个 GeoCoordinateWatcher 跟踪器。该跟踪器将在 PageOnload 事件上启动，如下所示。

我不知道如何创建一个条件来显示这个：case GeoPositionStatus.NoData，所以我需要一些建议。我的目标是它将重新启动，直到它获得当前的纬度和经度。

Q1) 对于 GeoPositionStatus.NoData 案例，重新启动 GeoCoordinateWatcher 的最佳做法是什么？

在 GeoPositionStatus.NoData 的情况下执行此操作

跟踪器.Stop(); 跟踪器.Start();

```

   void tracker_StatusChanged（对象发送者，GeoPositionStatusChangedEventArgs e）
   {
      开关（例如状态）
       {
            案例 GeoPositionStatus.Disabled：

            if (tracker.Permission == GeoPositionPermission.Denied)
             {
                 MessageBox.Show("此设备上的定位服务已关闭。请阅读隐私。");
              }
            别的
              {
                  MessageBox.Show("定位服务正在运行，但无法获取定位数据。");
               }
              休息;

           案例 GeoPositionStatus.Initializing：

              // 需要初始化的代码放在这里
                休息;

            案例 GeoPositionStatus.NoData：

               //MessageBox.Show("位置数据不可用。");

               休息;

               案例 GeoPositionStatus.Ready：
                    // 位置数据可用时需要执行的代码放在这里
                    休息;
            }
        }

```

# android - “原生 Android 应用”已启用，但 Facebook 移动网站用户总是被带到 Play 商店，即使他们安装了我的应用

> ID：12051431
> 
> 赞同：0
> 
> 时间：2012-08-21T08:58:39.900
> 
> 标签：android, facebook, mobile

在配置我的 Facebook 应用程序时，我启用了“原生 Android 应用程序”，并在其中启用了“为 Android SSO 配置”和“Android 原生深度链接”。

我的配置和应用程序代码似乎是正确的，因为如果 Android 用户安装了我的应用程序并通过 THE NATIVE FACEBOOK 应用程序在 Facebook 上点击我的应用程序的链接，他们会立即按预期定向到我的应用程序。伟大的！

但是，如果安装了我的应用程序的 Android 用户没有安装 NATIVE FACEBOOK 应用程序，而是通过移动网站[http://m.facebook.com](http://m.facebook.com)浏览 Facebook ，当他们点击指向我的应用程序的链接时，他们总是被带到Play 商店。

无论如何要解决这个问题，因为就我而言，这是一个巨大的缺点，并且使“Native Android App”选项不切实际且无法使用。

也许这是预期的行为，也许 Facebook 只是假设 Facebook 用户总是使用原生 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T03:43:50.540

我在 Facebook 工作，我可以帮助提供一些见解。首先，您可能会对此[错误报告](https://developers.facebook.com/bugs/259835577454071)感兴趣，因为我们目前正在跟踪本机深度链接在 Facebook 上某些发布的 URL 上不起作用的问题。

**关于您的问题，将其称为本机**深度链接是有原因的。此功能适用于使用 Android 版 Facebook 应用程序的用户快速切换到您的原生应用程序。此功能仅适用于原生应用 -> 原生应用链接。浏览器上的网页根本无法检测您目前使用的设备上是否安装了应用程序。这就是为什么由于平台的技术限制，我们总是退回到 Play 商店。

让我知道这是否有帮助。

# perl - 如果日志文件不存在，则在 Perl 中为日志文件创建一个目录

> ID：12051440
> 
> 赞同：17
> 
> 时间：2012-08-21T08:58:59.897
> 
> 标签：perl, directory, mkdir

我有一个 Perl 脚本，它需要一些参数。它是这样执行的：

```
exec myscript.pl --file=/path/to/input/file --logfile=/path/to/logfile/logfile.log 
```

我在脚本中有以下行：

```
open LOGFILE, ">>$logFilePath" or die "Can't open '$logFilePath': $!\n"; 
```

从命令行`$logfilePath`获取的位置。如果有路径 /path/to/logfile/，但没有 logfile.log，它只会创建它（这是所需的操作）。但是，如果没有这样的路径，它将无法启动。如果在运行脚本之前它不存在，如何让脚本为日志文件创建路径？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-21T09:26:17.220

`logfile.log`假设您在变量 中具有日志文件的路径（可能包括也可能不包括文件名：） `$full_path`。然后，您可以根据需要创建相应的目录树：

```
use File::Basename qw( fileparse );
use File::Path qw( make_path );
use File::Spec;

my ( $logfile, $directories ) = fileparse $full_path;
if ( !$logfile ) {
    $logfile = 'logfile.log';
    $full_path = File::Spec->catfile( $full_path, $logfile );
}

if ( !-d $directories ) {
    make_path $directories or die "Failed to create path: $directories";
} 
```

现在，`$full_path`将包含`logfile.log`文件的完整路径。路径中的目录树也将被创建。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T09:22:58.940

更新：正如 Dave Cross 指出的，`mkdir`只创建一个目录。因此，如果您想一次创建多个关卡，这将不起作用。

使用 Perl 的[`mkdir`](http://perldoc.perl.org/functions/mkdir.html)命令。例子：

```
#Get the path portion only, without the filename.
if ($logFilePath =~ /^(.*)\/[^\/]+\.log$/)
{
    mkdir $1 or die "Error creating directory: $1";
}
else
{
    die "Invalid path name: $logFilePath";
} 
```

使用 perl 自己的函数比运行 unix 命令更可取。

编辑：当然，您还应该首先检查目录是否存在。用于`-e`检查某物是否存在。将此添加到上面的代码中：

```
#Get the path portion only, without the filename.
if ($logFilePath =~ /^(.*)\/[^\/]+\.log$/)
{
    if (-e $1) 
    {
        print "Directory exists.\n";
    }
    else
    {
        mkdir $1 or die "Error creating directory: $1";
    }
}
else
{
    die "Invalid path name: $logFilePath";
} 
```

# c# - 活动目录别名

> ID：12051446
> 
> 赞同：2
> 
> 时间：2012-08-21T08:59:29.023
> 
> 标签：c#, active-directory

我的组织使用 Active Directory。对于内部通信，我们使用`alias@organization.com`地址。

我正在寻找一个 API，它允许我解析“别名”，例如：

`jonvu@org.com`是电子邮件，`jonvu`是别名，所以我想找到联系人的姓名，如下所示：

```
John Von Neumann. 
```

PS：C++/C/C#中的API

谢谢你的帮助。

干杯-B

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:06:22.823

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Domain);

// find a user - this searches for a variety of name-related attributes
// maybe that also finds your "alias" - depending on where in AD this is stored..
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   // do something here....     
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:02:45.330

您好，您可以在此处找到有关不同 API 的文章：COM 或 .Net

[http://www.c-sharpcorner.com/UploadFile/john_charles/AccessingtheActiveDirectoryfromMicrosoftNET04172007154931PM/AccessingtheActiveDirectoryfromMicrosoftNET.aspx](http://www.c-sharpcorner.com/UploadFile/john_charles/AccessingtheActiveDirectoryfromMicrosoftNET04172007154931PM/AccessingtheActiveDirectoryfromMicrosoftNET.aspx)

对于我的情况，我`DirectorySearcher`在`System.DirectoryServices`命名空间中使用

# html - html 网站中的下载链接无法显示对话框

> ID：12051447
> 
> 赞同：0
> 
> 时间：2012-08-21T08:59:31.507
> 
> 标签：html, download

我有一个 html 网站。这里我需要写一个`<a >`标签来下载一个PDF文件。查看我的代码

```
<a  href="brochure/brochure.pdf" target="_blank" ><img src="images/downloads.jpg" alt="Downloads" width="258" height="64" border="0" /></a> 
```

但是当我点击下载按钮时，pdf文件将被打开。

我需要像往常一样显示具有保存和打开选项的对话框

请回复我...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:12:15.317

您实际上需要强制下载 PDF 文件，尝试 Content-Type: application/download 并让我知道它是否有效

# matlab - 绘制不是函数图形的 3D 表面

> ID：12051451
> 
> 赞同：8
> 
> 时间：2012-08-21T08:59:39.837
> 
> 标签：matlab, plot, povray

我有一个不是函数图的表面的 3D 数据集。数据只是 3D 中的一堆点，我唯一能想到的就是`scatter3`在 Matlab 中尝试。`Surf`将不起作用，因为表面不是函数图。

`scatter3`由于没有任何类型的透视/阴影，因此使用给出了不太理想的结果。

有什么想法吗？它不一定是 Matlab，但这是我绘图的首选来源。

要了解我所拥有的表面类型，请考虑以下四个图像： ![在此处输入图像描述](../Images/d62c8ceac05ebd2582a35912ad33a555.png)

第一个是 3D 等高线图，第二个是等高线平面 {z = 1.8} 中的切片。我的目标是拾取所有红色区域。我有一种方法可以对每个切片 {z = k} 执行此操作。这是第三个情节，我非常喜欢我在这里看到的。

对 z 进行迭代将给出一个表面，这是第 4 个图，它有点嘈杂（尽管我有减少噪音的想法......）。如果我只使用没有轮廓的 scatter3 绘制黑色表面，我得到的只是一个无法区分的黑色斑点，但是对于每个切片，我都会得到一条平滑的曲线，并且我注意到当我调整 z 时曲线变化非常平滑。

一些微调将给出更好的第 4 个图，但是，****即使我让第 4 个图完全没有噪音，`scatter3`当单独绘制而不是在 3D 轮廓顶部时，使用的结果将是一个黑色的难以理解的斑点。我想得到一张没有绘制在 3D 等高线图顶部的完整表面的漂亮图片****

****事实上，只是为了比较和显示`scatter3`表面的糟糕程度，即使你在球体上有精确的点并使用`scatter3`结果将是一个黑色的斑点，甚至看起来不像一个球体****

POV-Ray 可以处理这个吗？我从来没用过...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:07:54.643

如果您对点进行三角测量，则可以考虑使用该`trisurf`功能。我以前用它来生成没有边界的封闭曲面（例如多面体和球体）。缺点是您必须生成点的三角剖分。这可能不适合您的需求，但绝对是一种选择。

**编辑：**正如@High Performance Mark 建议的那样，您可以尝试使用`delaunay`在 Matlab 中生成三角剖分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T09:04:46.700

只是想跟进这个问题。在 Matlab 中执行此操作的一种快速好方法如下：

考虑定义为从 (x, y, z) 到数据集的最小距离的函数 d(x, y, z)。确保 d(x, y, z) 在某个包含您要绘制的数据集的网格上定义。

然后用于`isosurface`绘制 d(x, y, z) 的（一些）countour(s)。对我来说，绘制 d(x, y ,z) 的轮廓 0.1 就足够了：Matlab 将在数据集的 0.1 距离内绘制一个漂亮的表面，所有点都具有良好的照明等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:17:55.520

在 povray 中，如果将 blob 对象设为球体中心，则可以使用 blob 对象来显示非常密集的点集合。
[http://www.povray.org/documentation/view/3.6.1/71/](http://www.povray.org/documentation/view/3.6.1/71/) 如果您希望能够制作“空间”切片并根据您的数据对它们进行着色，那么可能是对象模式（基于#declared blob 对象）可能会解决问题。

Povray 还有一种方法可以处理我从未使用过的 df3 文件，但这个用户似乎做了与您的可视化类似的事情。 [http://paulbourke.net/miscellaneous/df3/](http://paulbourke.net/miscellaneous/df3/)

# objective-c - 没有 @property 的 Objective-C 属性分配

> ID：12051452
> 
> 赞同：0
> 
> 时间：2012-08-21T08:59:52.567
> 
> 标签：objective-c, properties, dealloc, alloc, synthesize

我目前正在开发一个由另一位开发人员启动的 iOS 应用程序。

通常，我为每个实例变量创建一个属性（为 int、bool 等赋值/为所有类保留）。

所以在我的项目中，这条线会导致泄漏：

```
myVar = [[NSString alloc] init]; (alloc/init +1, retain in setter +1, release in dealloc -1 => +1) 
```

所以我使用：

```
NSString *tmpMyVar = [[NSString alloc] init];
[self setMyVar: tmpMyVar];
[tmpMyVar release]; 
```

或者：

```
NSString *tmpMyVar = [[[NSString alloc] init] autorelease];
[self setMyVar: tmpMyVar]; 
```

在这个新项目中，之前的开发人员没有使用@property/@synthesize，所以我想知道在这种情况下上一行代码的结果是什么（我猜它不会调用setter）？内存泄漏？

以前的开发者在dealloc方法中释放变量，和我一样。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:02:47.353

因为它直接将实例变量分配给分配的对象，所以它的保留计数为 1（因为，就像你说的，没有调用 setter）。而且因为它是在 dealloc 中释放的，所以一切都平衡了。所以没有内存泄漏。

> 所以在我的项目中，这条线会导致泄漏：
> 
> myVar = [[NSString alloc] init]; （alloc/init +1，在 setter +1 中保留，在 dealloc -1 中释放 => +1）

不，它甚至不会在你的项目中，因为正如你所指出的，没有使用 setter。

此外，在使用属性时，建议直接在 init 方法中访问实例变量，而不是使用 setter。

要检查像您的示例那样有问题的内存泄漏，还可以使用 clang 静态分析器或仪器的泄漏工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:05:22.807

您需要查看其他开发人员的 setter 实现。确保他们释放现有值并保留新值；就像是：

```
- (void)setMyString:(NSString *)string
{
    [string retain];
    [_string release];    // ivar
    _string = string;
} 
```

实现自己的 setter/getter 方法的唯一好处是在设置值时做一些事情（除了设置 ivar）。如果这些方法没有做这样的事情，那么为什么不将所有实现更改为`@property/@synthensize`？

# android - 给定图像的路径，如何显示该路径中内容的图像

> ID：12051461
> 
> 赞同：0
> 
> 时间：2012-08-21T09:00:19.977
> 
> 标签：android, sqlite, uri

我将相机拍摄的图像的路径保存到 sqlite DB 中，如下所示：retrievePath() 方法是从数据库中检索保存的路径。

`getImageUri(imgPath)`方法是将文件路径转换为uri。

```
OnClickListener btn_TakePictureListener = new OnClickListener() {

@Override
public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        File imgPath = retrievePath();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri(imgPath));
        startActivityForResult(intent, RequestCode);
    }
};

    private File retrievePath() {
    int []x = imgOpHlpr.getIDs();
    String s = imgOpHlpr.getImg_Path(x.length);
    File file = new File(s);
    Toast.makeText(getApplicationContext(), "retrieved path "+s.toString(),    
    Toast.LENGTH_LONG).show();
    return file;            
}   

private Uri getImageUri(File path) {
    Uri imgFileUri = Uri.fromFile(path);
    return imgFileUri;
} 
```

我现在想知道的是：从数据库中检索路径后，如何在 imageView 中显示该路径的内容。换句话说，当然图像的路径包含数据，我想在`ImageView`.

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:09:32.900

您可以使用

```
imageView.setImageDrawable(Drawable.createFromPath(filePath)); 
```

# performance - 关于文件系统设计和实现的性能相关文章

> ID：12051468
> 
> 赞同：1
> 
> 时间：2012-08-21T09:00:36.320
> 
> 标签：performance, caching, optimization, filesystems, inode

我正在寻找有关各种文件系统实现如何处理其性能问题的论文/小组讨论/博客。我似乎找不到任何好的和最近的东西，这就是为什么我可能没有一个好的清单来说明我真正在寻找什么，但只是举个例子：什么被缓存了，为什么？如何？以及尝试并最终使用了哪些哈希函数？多线程相关问题？- 为了简单起见，什么用互斥锁保护，什么保持原子性？排队相关问题？可能还有更多，但正如我所说，我刚刚开始研究它，所以我很感激任何意见和建议。谢谢。

# django - Django：在模型上设置当前用户以在 InlineModelAdmin 中使用

> ID：12051470
> 
> 赞同：0
> 
> 时间：2012-08-21T09:00:43.543
> 
> 标签：django, django-models, django-forms, django-admin

我有一些这样的模型：

```
class BaseModel(models.Model):
    created_by = models.ForeignKey(User, related_name="%(app_label)s_%(class)s_created")
    created_date = models.DateTimeField(_('Added date'), auto_now_add=True)
    last_updated_by = models.ForeignKey(User, related_name="%(app_label)s_%(class)s_updated")
    last_updated_date = models.DateTimeField(_('Last update date'), auto_now=True)

    class Meta:
        abstract = True

class Image(BaseModel):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')

    name = models.CharField(_('Item name'), max_length=200, blank=True)
    image = models.ImageField(_('Image'), upload_to=get_upload_path)

    def save(self, *args, **kwargs):
        if self.image and not GALLERY_ORIGINAL_IMAGESIZE == 0:
            width, height = GALLERY_ORIGINAL_IMAGESIZE.split('x')
            super(Image, self).save(*args, **kwargs)

            filename = os.path.join( settings.MEDIA_ROOT, self.image.name )
            image = PILImage.open(filename)

            image.thumbnail((int(width), int(height)), PILImage.ANTIALIAS)
            image.save(filename)

        super(Image, self).save(*args, **kwargs)

class Album(BaseModel):
    name = models.CharField(_('Album Name'), max_length=200)
    description = models.TextField(_('Description'), blank=True)
    slug = models.SlugField(_('Slug'), max_length=200, blank=True)
    status = models.SmallIntegerField(_('Status'),choices=ALBUM_STATUSES)

    images = generic.GenericRelation(Image) 
```

我为所有模型使用 BaseModel 抽象模型来跟踪保存和更新日志。我可以使用 ModelAdmin 类自动设置用户字段：

```
class BaseAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        if not change:
            obj.created_by = request.user

        obj.last_updated_by = request.user
        obj.save()

class AlbumAdmin(BaseAdmin):
    prepopulated_fields = {"slug": ("name",)}
    list_display = ('id','name')
    ordering = ('id',) 
```

这样可行。所有 BaseAdmin 字段都会自动填写。但我想通过内联将图像添加到相册。所以，我像这样更改我的 admin.py：

```
from django.contrib.contenttypes import generic

class ImageInline(generic.GenericTabularInline):
    model = Image
    extra = 1

class AlbumAdmin(BaseAdmin):
    prepopulated_fields = {"slug": ("name",)}
    list_display = ('id','name')
    ordering = ('id',)

    inlines = [ImageInline,] 
```

当我保存页面时，出现错误：`gallery_image.created_by_id may not be NULL`在图像模型保存方法的第一`super(Image, self).save(*args, **kwargs)`行。我知道这是因为 GenericTabularInline 类没有要覆盖的“save_model”方法。

所以，问题是，如何覆盖保存方法并在 InlineModelAdmin 类上设置当前用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:35:27.160

我找到了另一个问题的解决方案：[https ://stackoverflow.com/a/3569038/198062](https://stackoverflow.com/a/3569038/198062)

所以，我改变了我的 BaseAdmin 模型类，它就像一个魅力：

```
from models import BaseModel

class BaseAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        if not change:
            obj.created_by = request.user

        obj.last_updated_by = request.user
        obj.save()

    def save_formset(self, request, form, formset, change):
        instances = formset.save(commit=False)

        for instance in instances:
            if isinstance(instance, BaseModel): #Check if it is the correct type of inline
                if not instance.created_by_id:
                    instance.created_by = request.user

                instance.last_updated_by = request.user            
                instance.save() 
```

请注意，您必须为包含内联的 ModelAdmin 扩展相同的抽象类才能使用此解决方案。或者，您可以将该 save_formset 方法添加到专门包含内联的 ModelAdmin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T15:32:00.913

我希望用户在我的所有模型上都被设置，无论他们在哪里/如何被操纵。我花了很长时间才弄清楚，但这里是如何使用中间件在任何模型上设置它：

```
"""Add user created_by and modified_by foreign key refs to any model automatically.
   Almost entirely taken from https://github.com/Atomidata/django-audit-log/blob/master/audit_log/middleware.py"""
from django.db.models import signals
from django.utils.functional import curry

class WhodidMiddleware(object):
    def process_request(self, request):
        if not request.method in ('GET', 'HEAD', 'OPTIONS', 'TRACE'):
            if hasattr(request, 'user') and request.user.is_authenticated():
                user = request.user
            else:
                user = None

            mark_whodid = curry(self.mark_whodid, user)
            signals.pre_save.connect(mark_whodid,  dispatch_uid = (self.__class__, request,), weak = False)

    def process_response(self, request, response):
        signals.pre_save.disconnect(dispatch_uid =  (self.__class__, request,))
        return response

    def mark_whodid(self, user, sender, instance, **kwargs):
        if instance.has_attr('created_by') and not instance.created_by:
            instance.created_by = user
        if instance.has_attr('modified_by'):
            instance.modified_by = user 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-15T09:29:19.720

除了mindlace的回答；当 created_by 字段恰好有`null=True`错误`not instance.created_by`时。我`instance.created_by_id is None`用来避免这种情况。

（我宁愿将此作为对答案的评论，但我目前的声誉不允许......）

# javascript - 如何使用 jquery 在特定 div 中动态添加元素。我想添加评论

> ID：12051472
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:01:04.647
> 
> 标签：javascript, jquery, html, css

我想创建评论系统，输入的评论将被添加到特定的 div。下面是我的代码。

```
<ul class="comments">

    <li>
        <a class="commenter_name" href="/">Dushyanth Lion</a>
            comment by user
    </li>
     <li>
         <a class="commenter_name" href="/">Saikat Bhattacharjee</a>
         comment by user
     </li>
</ul>
  <div class="comment_entry">
        <form method="post" action="#">
            <input type="text" placeholder="Leave comment" />
            <input type="submit" style="display:none;" onclick="" />
        </form>
  </div> 
```

你可以弄清楚我在这里做什么。请告诉我如何在提交评论后动态添加“li”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:04:50.083

试试这个（见演示：http: [//jsfiddle.net/7rkX4/](http://jsfiddle.net/7rkX4/)）：

```
var user_name = 'Danil';

$('.comment_entry form').submit(function (e) {
  e.preventDefault();
  var comment = $('input', this).val();
  $('.comments').append('<li><a class="commenter_name" href="/">' + user_name + '</a>' + comment + '</li>');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:03:27.777

```
$('.comments').append('<li><a href="#">Foobar</a> Comment</li>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:08:42.307

提交到普通按钮并为其以及文本字段提供一个ID：

```
<input type="text" placeholder="Leave comment" id="comment" />
<button type="button" style="display:none;" id="submitComment" /> 
```

添加一个jQuery：

```
$('#submitComment').live(click,function(){
    $('.comments').append('<a class=\"commenter_name\" href=\"/\">Dushyanth Lion</a>'+ $('#comment').val());
}); 
```

# xml - Pyrus 安装错误

> ID：12051473
> 
> 赞同：1
> 
> 时间：2012-08-21T09:01:11.717
> 
> 标签：xml, zend-framework, pyrus

我正在尝试使用 pyrus 安装 zend 框架 2，但在 pyrus install 上出现一个奇怪的错误：`Pyrus\Config\Exception: Unable to parse invalid PEAR configuration at "." Pyrus\Config\Exception: Document is empty Pyrus\Config\Exception: Start tag expected, '<' not found`

我的配置是：

```
<?xml version="1.0"?>
<pearconfig version="1.0">
     <default_channel>pear2.php.net</default_channel>
     <auto_discover>0</auto_discover>
     <http_proxy></http_proxy>
     <cache_dir>~/.pear/cache</cache_dir>
     <temp_dir>~/.pear/temp</temp_dir>
     <verbose>1</verbose>
     <preferred_state>stable</preferred_state>
     <umask>0022</umask>
     <cache_ttl>3600</cache_ttl>
     <my_pear_path>.</my_pear_path>
     <plugins_dir>/home/sebastian/.pear</plugins_dir>
</pearconfig> 
```

有人可以帮我弄清楚这有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:06:56.323

您当前的目录中似乎有一个`pearconfig.xml`。是你发的那个吗？如果没有，只需将其删除。

还要尝试找出它真正尝试加载的配置，例如使用 strace：

```
$ strace -f -e trace=open pyrus get 
```

其中一个文件是它加载的配置文件，它已损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-14T22:54:35.440

您没有说明您的平台，但如果您要求将软件包安装在您的主目录中，则在 OS X 和其他平台上进行全新安装时会发生上述错误。而是要求将它们安装在子目录中。

所以

```
/Users/youraccount/pear 
```

而不是

```
/Users/youraccount 
```

回应 pyrus 安装问题。

要删除损坏的配置：

```
rm -r ~/.pear* 
```

# android - 为 android xml 文件中的布局内容创建别名

> ID：12051476
> 
> 赞同：2
> 
> 时间：2012-08-21T09:01:24.127
> 
> 标签：android, xml, android-layout, android-linearlayout

我创建了一个继承自 TextView 的类，所以现在当我必须使用时，我实现：

```
<cdz.chapitreUn.preums.BoldTextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        tools:context=".PreumsActivity" /> 
```

在xml文件上。问题是包含类的路径是一个很长的语法，无论如何（别名或其他东西）我只能写：

```
<BoldTextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        tools:context=".PreumsActivity" /> 
```

谢谢

# javafx-2 - JavaFX2.2 TableView：如何在不点击鼠标的情况下编辑表格单元格？

> ID：12051479
> 
> 赞同：0
> 
> 时间：2012-08-21T09:01:28.137
> 
> 标签：javafx-2

我遇到了可编辑表格单元格的问题。我在我的项目中使用 TableView 就像[Oracle 教程](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)一样。

根据它，我使用 setCellFactory 方法在 TextFieldTableCell 类的帮助下将表格单元格重新实现为文本字段。但是，我发现要编辑单元格的步骤有点复杂：

1.  使用方向键选择表格单元格。
2.  按“Enter”将单元格转换为文本文件，以便对其进行编辑。
3.  单击文本字段允许编辑内容

问题是第 3 步，您必须使用鼠标单击才能在此表格单元格中输入数据。

那么，是否有避免步骤 3 的解决方案？即文本字段允许您只需按“Enter”即可输入数据（步骤 2）。

顺便说一句，英语不是我的母语。希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:03:01.573

[节点可以手动](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#requestFocus%28%29)聚焦。这`TextFieldTableCell`是`TableCell`一个节点（图形）`TextField`，当单元格处于编辑模式时将被渲染。您需要手动关注此文本字段，但通过使用`TextFieldTableCell`您无法访问该文本字段。但是，如果您更喜欢您所指的教程中描述的替代方式，那么您就有机会集中精力。该教程中唯一更改的方法是：

```
@Override
public void startEdit() {
    super.startEdit();
    createTextField();
    setText(null);
    setGraphic(textField);
    textField.selectAll();
    // Set the focus
    Platform.runLater(new Runnable() {
        @Override
        public void run() {
            textField.requestFocus();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T20:44:53.283

要在没有鼠标单击事件的情况下在 TableView 中开始编辑，请调用 TreeView.edit(rowIndex, tableColumn);

例如：

```
//create tableview object
TableView<YourModel> tableView = new TableView<>();
//create column
TableColumn<YourModel, String> column = new TableColumn<>("Property Name");
//add column to tableview
tableView.getColumns().add(column);
//... your cell factory and the rest
//add an item
tableView.getItems().add(new YourModel());
//if you want to edit the selected item, get its index
int selectedIndex = tableView.getSelectionModel().getSelectedIndex();
//fire edit
tableView.edit(selectedIndex, column); 
```

# mysql - 如何与 BigInteger 值进行比较？

> ID：12051481
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:01:32.040
> 
> 标签：mysql

我在两个单独的表中有一个 BigInteger 值列表，比如 t1 和 t2。它们使用 MySQL Workbench 作为长文本数据类型插入。我想检查 t1 中的每个值是否存在于 t2 中。我执行了以下语句：

```
SELECT  *
FROM    t1
WHERE   col1.t1 IN
   (
     SELECT col1.t2 
     FROM   t2
   ) ; 
```

但声明似乎永远不会结束（数十万条记录）。现在我想将数字重新插入为 BIGINT，因为比较数字会比文本快。我使用 Java 程序从文本文件中逐行读取这些 BigInteger 值。该程序给了我以下错误：

> DB_Error:_com.mysql.jdbc.MysqlDataTruncation：数据截断：列的值超出范围

我怎么解决这个问题？我需要尽快比较 BigInteger 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:05:53.563

你为什么不试试

```
 SELECT t1.* FROM t1,t2 WHERE t1.col1=t2.col2; 
```

这会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:28:51.220

在您的第一次尝试中，尝试为文本列 t1.col1 和 t2.col1 创建索引。然后使用这个查询：

```
select distinct t1.col1 from t1 join t2 on (t1.col1=t2.col1) 
```

# jquery - 有没有 jQuery 的 winJS 插件？

> ID：12051482
> 
> 赞同：0
> 
> 时间：2012-08-21T09:01:35.050
> 
> 标签：jquery, microsoft-metro, winjs

我喜欢使用 jQuery 的简单方法，并且希望在 Metro 风格的应用程序中也使用它。我想要一个插件/包装器/猴子补丁，它使用 jQuery 中的 winJS-Functions。例如，我使用以下插件来避免 MSPointer-Problems：

```
$.fn.msMousedown = function(handler) {
    var eventType = 'mousedown touchstart';
        if (window.navigator.msPointerEnabled)
          eventType = 'MSPointerDown';
    this.bind(eventType,handler);
})( jQuery ); 
```

有没有我可以使用的项目来为我做这个处理？也许是一个 jQuery 插件，它允许在 Windows 8 项目中使用 jQuery？

在我看来，winJS 很复杂，如果它使用简单的 jQuery 语法会容易得多。所以我正在寻找winJS的替代品

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T03:06:55.460

看看[我的 jqToDo 示例](https://github.com/gzortch/jqToDo)。它有一个可重用的包装脚本，使 WinJS 控件看起来像 jQueryUI 小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:14:22.967

您可以直接在 WinRT 项目中使用 jQuery。您需要将 jQuery 文件直接添加到您的项目中（不要从 CDN 引用），因为即使在离线时文件也需要可用。它还提供了正确的安全上下文。我在这里做了一个非常简短、非常简单的示例视频... [http://slickthought.net/post/2012/08/01/Windows-8-and-HTML-Part-2-3rd-Party-Frameworks.aspx](http://slickthought.net/post/2012/08/01/Windows-8-and-HTML-Part-2-3rd-Party-Frameworks.aspx)

包括一个使用 jQuery 和 jsRender 的快速示例。

您也可以混合搭配——这两个框架并不相互排斥。

# python - 使用 psutil 杀死进程

> ID：12051485
> 
> 赞同：7
> 
> 时间：2012-08-21T09:01:43.957
> 
> 标签：python, windows-7, windows-xp

我正在寻找一些代码，这些代码将根据进程的名称和拥有者来终止进程。这在 Windows XP 上运行良好，但是当我在 Windows 7 上运行相同的代码时，在尝试获取进程的用户名时出现访问被拒绝错误。

有没有更简单的方法来杀死一个可以在 XP 和 Win7 上运行的进程？

实际上需要检查该进程是否由“SYSTEM”拥有，因此我可以检查该进程何时完成用户进程，因为 SYSTEM 进程仍然存在，我不关心这个。

```
PROCNAME = 'python.exe'
for proc in psutil.process_iter():
  if proc.name == PROCNAME:
    p = psutil.Process(proc.pid)

    if not 'SYSTEM' in p.username:
      proc.kill() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:08:46.970

如果您没有使用 PSUTIL 终止进程的权限，那么您将不会使用*其他任何东西*来终止它。首先想到的是[UAC](http://en.wikipedia.org/wiki/User_Account_Control)，它恰好出现在 XP 和 Windows 7 之间。这意味着您的 PSUTIL 必须从提升的提示符下运行，这不足为奇。添加清单以[请求提升](http://en.wikipedia.org/wiki/User_Account_Control#Requesting_elevation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T09:14:55.833

问题是某些进程没有名称，因此您会收到错误消息。

如果你把它放在一个 try 块中，它将起作用：

```
PROCNAME = 'python.exe'
for proc in psutil.process_iter():
  try:
      if proc.name == PROCNAME:
      p = psutil.Process(proc.pid)

      etc..
  except:
    pass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:31:54.843

从 2010 年 10 月开始（[参见 issue 114](http://code.google.com/p/psutil/issues/detail?id=114)），`username`使用 C 函数调用获得（参见`get_process_username`源[代码](http://code.google.com/p/psutil/source/browse/trunk/psutil/_psutil_mswindows.c)）

这意味着它遇到了[上一个 stackoverflow 问题中描述的问题](https://stackoverflow.com/questions/4800924/get-process-username-c)

基本上你可以捕捉到`AccessDenied`异常并假设用户是“系统”或“本地服务”

**编辑：**据我所见，Python 中还有一个错误导致更多的 AccessDenied 错误比应该的错误多。`SetSeDebug`来自 psutil的函数最后调用`RevertToSelf`，实际上恢复了它所做的所有更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:10:04.667

这只是一个猜测，但也许 UAC 正在阻止 Python 拥有管理员权限。尝试在 Win 7 上使用“以管理员身份运行”的东西以管理员身份执行 Python（我不记得它到底在哪里，但它可能涉及以管理员身份启动终端，这可以从“开始”菜单完成，然后执行你的来自那里的 Python 脚本）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-27T08:03:09.753

如果 psutil 不起作用，您可以随时尝试通过 os.system（命令提示符）使用 taskkill 示例来杀死所有 excel 实例：

```
import os
os.system("""taskkill /f /im excel.exe""") 
```

# asp.net-mvc-3 - MVC3 @html.radiobuttonfor

> ID：12051487
> 
> 赞同：2
> 
> 时间：2012-08-21T09:01:49.363
> 
> 标签：asp.net-mvc-3, radiobuttonfor

这是我的课：

```
public class QuestionClass 

{ 

    public static FeedbackDatabaseDataContext context = new FeedbackDatabaseDataContext(); 

        public class Tabelfields : Question 
        { 
            //public int QuestionID { get; set; } 
            //public string Email { get; set; } 
            //public string QuestionName { get; set; } 
            //public string Option1 { get; set; } 
            //public string Option2 { get; set; } 
            //public string Option3 { get; set; } 
            //public string Option4 { get; set; } 
             public string SelectedOption { get; set; } 
        } 

        public static List<Question> getallQuestion(string email) 
        { 
            var list = (from q in context.Questions where q.Email==@email select     q).ToList(); 

            return list.ToList();  
        } 
} 
```

我的观点 ：

```
@model IEnumerable SQLOperation.Models.QuestionClass.Tabelfields

<p> Question</p> 

     @foreach (var item in Model) 
     { 
         using (Html.BeginForm("Question", "home", new {email=item.Email,item})) 
         {    

             @Html.DisplayFor(modelItem => item.QuestionName) 

             <br /><br />    
             if (item.Option1 != "") 
             { 
                        @Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option1, item)                 
                        @Html.DisplayFor(modelItem => item.Option1) 
                        <br /><br />                 
             } 

             if (item.Option2 != "") 
             { 
                        @Html.RadioButtonFor(modelItem => item.SelectedOption, item.Option2)               
                        @Html.DisplayFor(modelItem => item.Option2) 
                        <br /><br /> 
             } 

             if (item.Option3 != "") 
             {            
                        @Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option3)               
                        @Html.DisplayFor(modelItem => item.Option3) 
                        <br /><br /> 
             } 

             if (item.Option4 != "") 
             { 
                        @Html.RadioButtonFor(modelItem =>item.SelectedOption, item.Option4)              
                        @Html.DisplayFor(modelItem => item.Option4)  
                        <br /><br />      
             } 
             i = (Int16)i + 1; 

             if (Model.Count() == i) 
             { 
                    <input name="btnsumbit" type="submit" value="Submit Feedback"  
                    style="font-family:Segoe UI Light;font-size:medium;"/> 
             } 
         } 
     } 
```

这是我的控制器

```
 public ActionResult Question(string email)

        {              
             return View(QuestionClass.getallQuestion(email)); 
        } 

        [HttpPost, ActionName("Question")] 
        public void Question(string Email,List<QuestionClass.Tabelfields> q) 
        { 
        } 
```

在类即“Tabelfields”中，我创建了新属性，即 SelectedOption。我继承了基类，即问题。其中 Question 是 Sql server 数据库中的一个表。

我用这个创建了强烈的类型视图

```
@model IEnumerable SQLOperation.Models.Question 
```

如果我将强烈类型的视图更改为

```
 @model IEnumerable SQLOperation.Models.QuestionClass.Tabelfields 
```

我收到这个错误

> “传入字典的模型项的类型为‘System.Collections.Generic.List `1[SQLOperation.Models.Question]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[SQLOperation.Models.QuestionClass+Tabelfields]’。”

为什么我会收到此错误，我该如何解决？

谢谢，

杰伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:11:21.760

你需要改变：

```
 @model IEnumerable SQLOperation.Models.QuestionClass.Tabelfields 
```

对此：

```
 @model List<SQLOperation.Models.Question> 
```

那应该可以解决错误。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:57:25.047

将模型中的 getallQuestion 更改为此

```
public static IEnumerable<Question> getallQuestion(string email) 
        { 
            var list = (from q in context.Questions where q.Email==@email select     q).ToList(); 

            return list.AsEnumerable();  //just remove `ToList()` and place `AsEnumerable()`.
        } 
```

尝试这个。这应该适合你。

# java - 如何应用 onClick 函数打开其 URL

> ID：12051489
> 
> 赞同：1
> 
> 时间：2012-08-21T09:02:00.913
> 
> 标签：java, android, url

我有以下代码：

```
try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;
            String myString = null;
            for (int i = 0; i < jArray.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                json_data = jArray.getJSONObject(i);
                map.put("id", String.valueOf(json_data.getString("news_id")));
                map.put("title", json_data.getString("news_title"));
                myString = myString + "| "
                        + json_data.getString("news_title").toString();
            }
            String myString1 = myString.replace("null", "");
            txt1 = (TextView) findViewById(R.id.twxmorq);
            txt1.setSelected(true); 
            txt1.setText(myString1); 
```

我在文本视图中打印整个标题，并在单行中使用 ' ！' 分割。现在我想申请`onclick`每个标题并在新活动中打开它，并在网络视图中显示详细新闻。

详细新闻将加载以下数据：

```
"http://www.taxmann.com/TaxmannWhatsnewService/Services.aspx?service=getnewsdetails&newsid=" + id 
```

不同标题的 id 会有所不同。你能告诉我逻辑或发布一些实现代码吗？我无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:05:55.890

在布局 xml 文件中，用于`TextView`属性添加，

```
android:autoLink="web" 
```

或者，

```
txt1.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# parsing - 解析 AMF3 对象

> ID：12051494
> 
> 赞同：3
> 
> 时间：2012-08-21T09:02:36.480
> 
> 标签：parsing, object, actionscript, amf

我正在尝试解码包含 AMF3 的 AMF0 消息.. 除了理解 U29 格式和字符串在 AMF4 中编码的方式之外，一切都很好

```
 channel=3  size=134  pkttype=0x11  time=1973

  00000: 00 02 00 14 73 65 6E 64  55 6E 69 76 65 72 73 61  6C 4D 65 73     ....sendUniversalMes
  00020: 73 61 67 65 00 00 00 00  00 00 00 00 00 05 02 00  11 6D 62 5F     sage.............mb_
  00040: 31 32 32 31 30 5F 37 35  39 32 33 33 38 30 05 00  40 58 C0 00     12210_75923380..@X..
  00060: 00 00 00 00 11 0A 0B 01  09 68 62 69 64 04 81 CF  5E 09 73 72     .........hbid...^.sr
  00080: 63 65 06 49 63 37 62 39  32 33 65 65 2D 30 61 30  38 2D 34 62     ce.Ic7b923ee-0a08-4b
  00100: 61 32 2D 38 65 37 63 2D  63 38 32 61 39 33 64 37  37 31 34 32     a2-8e7c-c82a93d77142
  00120: 09 68 62 64 6C 04 00 09  74 65 78 74 01 01                        .hbdl...text..

  first byte I skip 
  02 = string
  00 14 = length of string ( 20 characters , sendUniversalMessage )
  00 00 00 00 00 00 00 00 00 = number = 0
  05 = null
  02 = string
  00 11 = length of string ( 17 characters , mb_12210_75923380 )
  05 = null
  00 40 58 C0 00 00 00 00 00 = number = 99
  11 = AMV+

  here is where I have problems

  0A = AMF3 object 
  now I need to do a readU29 which starts with
  0B = what does this mean
  01 = what does this mean
  09 = what does this mean

  where is the length of the string 'hbid' ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T14:15:40.043

在 U29 中，如果第一个字节的值小于 128，则它适合第一个字节。所以你必须把它读成 3 个不同的 u29，价值 0B、01、09。

0B：关于对象类型的详细信息。看来你对那个字节不太感兴趣，而且它很复杂，所以通过。

01：LSB 是表示这不是字符串引用的位。那么 01 >> 1 = 0 就是类名的长度。这意味着空字符串，这意味着这是一个匿名（无类型）对象。

09: = 00001001。LSB 也是表示这不是字符串引用的位。那么 1001 >> 1 = 0100 = 4 是字符串长度。

希望有帮助

# html - 背景样式中的引用？

> ID：12051495
> 
> 赞同：1
> 
> 时间：2012-08-21T09:02:39.770
> 
> 标签：html, css

假设我想为某物添加背景图像，我可能会写：

```
background: url(/images/button_bg.png) repeat-x scroll left bottom #146BAE 
```

但是，如果我在 Firebug 中查看此代码，它将显示以下内容：

```
background: url("/images/button_bg.png") repeat-x scroll left bottom #146BAE 
```

图像路径周围的引号是否有意义？他们是让它更快/更符合标准，还是 Firebug 只是为了让代码更容易阅读？

我也看到使用单引号（''），我不确定它们是否有任何不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:06:20.723

如果该图像的路径包含非字母数字字符或空格，则它们很重要。

最好用`"`（引号）或`'`（单引号）包裹 url。这不是一个标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:08:46.180

如果 URI 中有特殊字符，它们很重要（[请参阅此处的规范](http://www.w3.org/TR/CSS2/syndata.html#value-def-uri)），否则它们是可选的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:07:32.337

我们（web.de）不在背景图像路径周围使用引号，它们不会使解析器更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:27:55.510

我们应该为 URI 值使用引号

```
(Uniform Resource Identifiers which includes URLs, URNs, etc) 
```

URI 值的格式是 'url'，它是可选的单引号 (') 或双引号 (") 我们可以使用其中任何一个，但无论我们使用什么，两个引号字符必须相同，在下面的现场演示中给出还有。

例如 ：-

身体{背景：网址（“http://www.example.com/pinkish.png”）}[`double quote (") demo`](http://tinkerbin.com/hXDrVhzd)

正文 { 背景： url('http://www.example.com/pinkish.png') } [`single quote (') demo`](http://tinkerbin.com/4S9Stbnh)

# c++ - 来自一个 Win32 控制台应用程序的多个控制台窗口

> ID：12051496
> 
> 赞同：2
> 
> 时间：2012-08-21T09:02:44.250
> 
> 标签：c++, visual-studio-2008, windows-console

我在 VS2008 中基于一个空的 Win32 控制台应用程序编写了一个程序，该程序在 Win7 64 位上运行。该程序完全是基于菜单的生成`main.cpp`，它只调用外部函数，这些函数根据用户需求（例如收银员、库存、报告等）引导到其他界面。我想做的是为每个界面提供一个新的控制台窗口。

理想情况下，它会在调用任何其他界面等时关闭主菜单，以在用户完成其功能时关闭，包括在必要时重新打开主菜单。

这样做的基础是我下周开始新学期，用 C++ 深入研究 OOP，我想复习我的文本并完成随着主题进展的顶点项目，以确保我拥有所有的基础知识拍拍。尽管我很想以最聪明、最简单的方式做到这一点，但最好还是坚持本书中提供的有限知识，这些知识仅暗示`STL`并没有提及其他库，例如`boost`.

当然，我已经搜索过 SO 和其他地方寻找解决方案。我找到了答案，其中大多数都超出了我的严格要求，有些是从头开始构建控制台窗口。虽然从头开始似乎是最有前途的，但它似乎是在处理那些不使用像 VS 这样强大的 IDE 的人，我不知道它是否会导致更多的冲突而不是它的价值，或者它是否甚至可以用于多重性。然而，大多数人给我的印象是这是不可能的。一个例外是将控制台链接到进程。这就是我希望在我的未来！

让我想到这一点的原因是需要清晰地审视每一个事件的转折。起初我试图用一个基本的功能来清除屏幕，比如`void clearScreen(int lines);`但这将始终从底部清除。所以，如果我在下一个界面之前清除屏幕，它仍然在底部。如果我清除它然后接受输入，提示仍然在底部。

以防到目前为止还没有弄清楚。我的问题是：
是否有可能在合理的范围内生成多个与进程相关的控制台窗口，或者是否有一种我不知道的简单方法来操纵主控制台窗口的滚动？
尽管我“需要”停留在传统学习的婴儿步过程的范围内，但我很想听到除了切换应用程序类型之外的任何输入。

这更像是一个强迫症问题，而不是任务的要求，所以如果努力不值得，那也没关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:13:45.363

没有可移植的方式在控制台窗口周围移动光标 - 在 Unix/Linux 中，您可以为此发送终端代码，在 Windows 中我不知道。

什么**可以**跨平台工作，但是非常慢而且不太好，将是：

*   逐个字符读取您的输入
*   记住下一个字符应该出现在屏幕上的哪个位置
*   每次按键后重绘整个屏幕

如果你想做得更好，你必须转向特定于平台的解决方案，或者找到一个可以为你做这件事的库（比如 Unix 世界中的 ncurses），但我不知道这些是否符合你的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T09:17:41.427

[您可以使用SetConsoleCursorPosition](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686025%28v=vs.85%29.aspx)在 Windows 上设置光标位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:05:37.517

既然您说的是 VS，我认为将自己限制在 Windows 上不是问题。如果是这样，您可以为此使用[Windows API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073(v=vs.85).aspx)。

除此之外，[ncurses](http://www.gnu.org/software/ncurses/)似乎至少部分移植到最常见的平台。

如果您正在寻找一种在标准 C++ 中执行此操作的方法 - 它不存在。C++ 甚至不需要运行它的平台有控制台，因此没有控制台操作功能。

两者都不是很难使用，但如果这真的只是一些学生的东西，你希望学习一些有用的东西，你可能不应该打扰。控制台操作不是您经常拥有或想要做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-06T02:22:12.943

尽管在我最初的问题中可能还不清楚，但我一直在寻找在控制台窗口中使用的解决方案。理想情况下，该解决方案至少可以在 Linux 和 Windows 上运行，因为我为学校编写的任何程序都必须在每个程序上编译。这不是一项任务，但学习在那里也可用的东西显然是有利的。

# 这是我发现的

### ...感谢 Tim Wei 的解决方案

```
void clearScreen()
{
    #ifdef _WIN32
        system("cls");
    #else
        system("clear");
    #endif
} 
```

这虽然很简单，但正是我想要的。该函数清除屏幕并将光标放在控制台窗口的顶部，从而提供一种方法来提供带有变化数据表的静态标题或标题。它还允许简单的基于文本的动画——如果你喜欢那种东西的话。本学期我的控制台应用程序的外观、感觉和一致性都发生了显着变化！

# iphone - 目标 C 中宏（#define）的优缺点是什么？

> ID：12051502
> 
> 赞同：0
> 
> 时间：2012-08-21T09:02:58.190
> 
> 标签：iphone, objective-c, macros

我想知道宏是否只有任何编程语言的优点。由于必须有限制，我们可以创建宏，以及使用频率。

假设我们在一个类中创建了 100 个宏，并将其导入到应用程序项目的 100 个类中。这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:38:35.920

`#define`是一个预处理器宏。您不要*在类中创建宏，*因为宏在使用时会在文本上进行扩展，但它的定义不是类的一部分，即使您碰巧在类中用词法编写它。

另外，您不要`import`在其他类中使用类，而是`import`在类声明头中。即使您多次指定导入，每个编译单元也只会发生一次。因此，每个编译单元中的每个宏最多仍然有一个声明，并且由于宏只是预处理器，它只会在编译的早期阶段出现。

您并没有确切地说出您想使用宏来做什么，因此很难说它们是否是您的最佳解决方案，或者您是否有更好的选择。但我不会担心他们的人数。标准头文件定义了数百个宏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:12:23.383

`#define`适用于：

*   标头包括 C 和 C++ 标头的保护（成语：`#include`C 和 C++ 标头，`#import`ObjC 标头）
*   语言兼容性的条件编译（例如`UIKIT_EXTERN`），必须在预处理期间解决。
*   平台/编译器/版本特定声明（例如`NS_AVAILABLE_IOS()`）的条件编译，必须在预处理期间解决。
*   断言宏。指定文件、行和表达式等信息太嘈杂且容易出错。

对于其他一切，有一个替代方案可以让你一路走来头疼。

> 假设我们在一个类中创建了 100 个宏，并将其导入到应用程序项目的 100 个类中。这是一个正确的方法吗？

不 - 这*太可怕*了:)

**缺点**

有许多。很多时候，程序很难被人和程序（编译器、解析器、索引器）理解。这是引入错误并完全替换不相关程序的文本的好方法（通过简单的`#import`. 几乎所有东西都有更现代的替代品（例如函数、内联、typedef、常量、枚举）——让编译器让你的生活更轻松！

# php - CKeditor 的 WIRIS 插件在本地工作但不能在线

> ID：12051503
> 
> 赞同：1
> 
> 时间：2012-08-21T09:03:01.117
> 
> 标签：php, mysql, ckeditor

我正在做一个名为在线考试申请的项目。为此，我使用了 CK Editor 和 WIRIS 插件来插入数学符号和其他特殊字符。它正在我的本地机器上运行，但是在在线上传而不是符号后，我得到了这个：

> «数学 xmlns=¨http://www.w3.org/1998/Math/MathML¨»«mroot»«mrow/»«mrow/»«/mroot»«/math»

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T11:20:04.237

请在文件中找到`plugin.js`以下行：

```
var _wrs_conf_saveMode = 'tags'; // This value can be 'tags', 'xml' or 'safeXml' 
```

并设置回：

*   `tags`如果您希望公式是图像（这是默认设置）

*   `xml`如果您希望某些现代浏览器从 MathML 呈现公式

随时寻求`support at wiris.com`更多帮助。

# cancan - Rails - CanCan - 设置和分配角色？

> ID：12051513
> 
> 赞同：4
> 
> 时间：2012-08-21T09:03:23.640
> 
> 标签：cancan

如何设置 CanCan 的角色，以及如何将这些角色分配给用户？我现在至少希望在注册时有一个下拉菜单，供用户选择他们的角色。我不太确定我似乎一直错过的所有文档，但非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-03T13:20:02.903

这是一个可靠的适合 Rails 的角色管理方法。我用这个。我喜欢。从本质上讲，您创建了一个“has-and-belongs-to-many”表来关联用户和角色并定义一个函数`User#has_role?`来检查关联。

```
# file: app/models/user.rb
class User < ActiveRecord::Base
  has_many :user_roles, :dependent => :destroy
  has_many :roles, :through => :user_roles

  def has_role?(name)
    roles.pluck(:name).member?(name.to_s)
  end
end

# file: app/models/role.rb
class Role < ActiveRecord::Base
  has_many :user_roles, :dependent => :destroy
  has_many :users, :through => :user_roles
end

# file: app/models/user_role.rb
class UserRole < ActiveRecord::Base
  belongs_to :user
  belongs_to :role
end 
```

迁移/架构文件：

```
# file: db/migrate/xxx_create_users.rb
class CreateUsers < ActiveRecord::Migration
  def change
    create_table(:users) do |t|
      t.string :email,              :null => false, :default => ""
      # ... any other fields you want ...
      t.timestamps
    end
  end
end

# file: db/migrate/xxx_create_roles.rb
class CreateRoles < ActiveRecord::Migration
  def change
    create_table :roles do |t|
      t.string :name
      t.timestamps
    end
  end
end

# file: db/migrate/xxx_create_user_roles.rb
class CreateUserRoles < ActiveRecord::Migration
  def change
    create_table :user_roles do |t|
      t.references :user
      t.references :role
      t.timestamps
    end
    add_index :user_roles, [:user_id, :role_id], :unique => true
  end
end 
```

所以现在，您的技能文件将如下所示：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new  # support guest user
    if user.has_role?(:admin)
      can :manage, :all
    elsif user.has_role?(:nsa)
      can :read, :all
    elsif user.has_role?(:editor)
      # ... add other abilities here
    end

  end
end 
```

需要明确的是，这并没有回答 OP 关于如何首先创建角色的问题。但是由于用户、角色和 user_roles 现在是完整的 Rails 模型，您可以使用标准的 CRUD 工具来管理它们。但在 90% 的情况下，您只需将管理员权限分配给一两个用户，这很容易在种子文件中完成，如下所示：

```
# file: db/seeds.rb

# create a role named "admin"
admin_role = Role.create!(:name => "admin")

# create an admin user
admin_user = User.create!(:email => "admin@admin.com")

# assign the admin role to the admin user.  (This bit of rails
# magic creates a user_role record in the database.)
admin_user.roles << admin_role 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T09:38:43.703

我大部分时间都明白了这一点。

1.  对于设置角色，它们实际上是在您在能力类中定义它们时设置的。

例如：

```
 if user.has_role? :admin
        can :manage, :all
    else
        can :read, :all
    end 
```

这基本上是“设置”管理员角色。出于某种原因，我认为您还必须在其他地方初始化该角色。

1.  要分配角色，按照我见过的大多数教程，您需要进入 rails 控制台并使用类似于：

    ```
    user = User.find(1)
    user.add_role :admin # sets a global role
    user.has_role? :admin
    => true 
    ```

第一行查找用户，第二行添加角色。第三个用于检查用户是否被分配到该角色。还有一些方法可以在注册时添加它，还有其他一些方法。当我遇到它们时，我会尝试在此处列出它们，但希望这可以消除将来某人的任何困惑。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:17:58.727

我通过在用户表中放置一个角色字段来处理这个问题，角色逗号分隔在字符串字段中。我让管理员管理用户角色，对配置文件进行编程检查是否有效（使用诸如 valid_role?、has_role? 之类的函数。然后我在 CanCan 可以调用的用户模型中编写了一些函数，例如 user_can_see_...

不确定这对于自我管理的角色系统如何工作，但如果您有兴趣，可以在以下位置找到我的代码：[github 上的 tws_auth](https://github.com/tayloredwebsites/tws_auth)

# android - 手风琴风格的安卓动画

> ID：12051517
> 
> 赞同：2
> 
> 时间：2012-08-21T09:03:40.667
> 
> 标签：android, animation

我需要制作一个手风琴谎言动画，但我不知道从哪里开始。

您能否向我提供资源和示例代码，以便我更好地理解如何做到这一点？

我在 Android 上看到的最接近的东西是 Go Launcher 中的绳子动画，所以我不知道这是否可能，反正我很高兴能够创建类似 Go 的动画的东西。

谢谢

[您可以在 iPhone 应用程序“任务” http://www.youtube.com/watch?v=56isCnonYqA&feature=player_embedded#t=38s](http://www.youtube.com/watch?v=56isCnonYqA&feature=player_embedded#t=38s)的屏幕截图中看到一个示例

# c# - LINQ 添加或求和项目

> ID：12051519
> 
> 赞同：0
> 
> 时间：2012-08-21T09:03:46.063
> 
> 标签：c#, asp.net-mvc-3, linq

我一直在试图找到我的问题的答案，但措辞很困难。

假设我有以下内容：

*   第一张缔约方表：`party 1, party 2, party 3, party 4`

*   第二个表，记录谁属于哪一方：

    ```
    party 1 - alex, party 1 - cynthia
    party 2 - charles
    party 3 - ana, party 3 - david 
    ```

我如何构建一个 linq 查询来告诉我每个聚会有多少人参加，所以结果将是：

```
party 1 , 2 people
party 2 , 1 people
party 3 , 2 people 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:07:31.073

```
list.GroupBy(x => x.Party)
    .Select(x => new { Party = x.Key, Count = x.Count() }); 
```

# java - 如何从 Google App Engine 向 Android 应用发送数据？

> ID：12051520
> 
> 赞同：0
> 
> 时间：2012-08-21T09:03:46.163
> 
> 标签：java, android, google-app-engine

据我了解，有两种方法可以将数据从 GAE 发送到我的应用程序：

1.  应用程序发出请求，服务器将数据作为响应发送。
2.  服务器直接将数据发送到应用程序*，而不需要应用程序执行请求*。

我知道如何使用 (1) 发送数据，但如何使用 (2) 发送数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:45:44.913

您似乎正在寻找 Google Cloud 消息传递，它有助于将消息从您的服务器“推送”到您的应用程序（通过 GCM 服务）

阅读详情

> [http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

# php - url中的ID作为登录名

> ID：12051524
> 
> 赞同：0
> 
> 时间：2012-08-21T09:04:06.017
> 
> 标签：php, apache, .htaccess, mod-rewrite

我有一个自定义身份验证方法：在 URL 中，斜杠后面有一个唯一 ID，就像登录一样。

当用户通过链接时，我需要捕获该 ID 并将其发送到例如`index.php?url_id=****`.

URL 类似于 domain.com/ *udfgsdfgsd*或 domain.com/ *urtywerty*。

我正在尝试这样的事情：

```
Options +FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.+)$ index.php?url_id=$1 [QSA, L] 
```

但我是 mod_rewrite 的新手，所以什么也没发生……

PS我还有另一个`GET (?panel_status=****)`在授权导航后出现，我想知道授权后的URL如何做到这一点，就像 domain.com/some-user-id/some-panel-status 或者可能只是为用户ID添加一些前缀喜欢`u_*****`并重定向`u`到`url_id`，在其他情况下到 panel_status

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:10:08.740

我刚刚在这篇文章的答案中描述了这种情况。看这里： [htaccess 重写以在每个文件夹中包含文件](https://stackoverflow.com/questions/12050485/htaccess-rewriting-to-include-file-in-every-folder/12051130#12051130)

# c# - 如何从进程列表中隐藏 .net 应用程序

> ID：12051525
> 
> 赞同：3
> 
> 时间：2012-08-21T09:04:07.827
> 
> 标签：c#, .net, windows, desktop-application

我们正在为所有用户开发一个在启动时运行的 .net 应用程序。现在我们想从任务管理器-> 进程列表中隐藏这个应用程序，这样登录的用户就不能删除它。我们使用的是 windows-xp

请让我知道这是否可行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:08:52.977

绝对可以隐藏一个进程；你说的是设计一个**[rootkit](http://en.wikipedia.org/wiki/Rootkit)**。如果这实际上是您想要做的，请参阅[这个问题](https://stackoverflow.com/questions/187983/how-do-i-hide-a-process-in-task-manager-in-c)。

然而，这通常不是解决此问题的正确方法：如果您是一台机器的管理员并且您不希望其他用户终止某个进程，那么您根本不授予他们执行此操作的权限。

让您的用户使用**[受限的用户帐户](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ua_c_account_types.mspx?mfr=true)**登录，并让您的应用程序在不同的帐户下运行。

* * *

要可靠地获得登录时间，您可以使用一些 Windows 安全日志，或者如果您在域中，则可以使用 Active Directory 服务：

[在 C# 中获取本地 Windows 用户登录会话时间戳](https://stackoverflow.com/questions/682360/getting-local-windows-user-login-session-timestamp-in-c-sharp)

获得空闲时间更复杂，因为它取决于您认为“空闲”是什么，但如果您认为`GetLastInputInfo()`足够，这个问题描述了一种很好的方法，用户进程向系统进程报告：

[在 C# 中获取用户空闲时间？](https://stackoverflow.com/questions/6494436/getting-user-idle-time-in-c)

由于用户无法终止系统进程，因此您可以让其监视用户进程并在必要时重新创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:06:07.990

将其隐藏起来：使其作为服务运行，名称看起来应该是 Windows 的一部分。

然后让另一个服务监视这个关闭并重新启动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:08:15.987

这就是 Windows 安全性的用途。以他/她无法管理服务或终止进程的方式定义用户帐户的权限。

如果情况如您在 Colin 的回答下的评论中描述的那样，那么您可以运行一个服务级进程，该进程在每次被杀死（由用户）时重新生成用户进程。这种方式甚至更简单。您可以使用 WinApi 中的 CreateProcessAsUser 代表用户执行流程：http: [//msdn.microsoft.com/en-us/library/ms682429%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms682429%28v=vs.85%29.aspx)

# git - 如何为 git 远程存储库定义替代远程 url？

> ID：12051527
> 
> 赞同：9
> 
> 时间：2012-08-21T09:04:28.387
> 
> 标签：git, git-annex

我正在使用 git-annex 来管理我的文件。我的一些遥控器可以使用 2 或 3 种方法，例如 ssh 和 nfs，但 nfs 访问当然只能在我的本地网络上进行。然后，git-annex 选择最快的方法来同步或获取文件（nfs，如果可用，ssh 代替，使用分数来选择）。现在，我为每个存储库和每个访问方法定义了一个远程（例如：server-by-ssh，server-by-nfs），但这并不是真正的 git-annex 方式来完成这项工作，因为它不符合numcopies 选项，它检查附件中的文件是否保留了足够的复制（使用我当前的方法，许多遥控器实际上是硬盘驱动器上的相同文件夹）。

然后，**我的问题适用于 git 和 git-annex，因为遥控器是在 git 中添加的，而不是 git-annex：我想知道是否可以为给定的遥控器定义替代 url。**

我曾尝试使用该`git remote set-url --add`命令，但它并没有像我预期的那样真正起作用。事实上，如果 nfs url 不可访问，git 就会挂断并等待。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:53:41.327

您可以将遥控器添加为

```
git remote add new-origin https://example.com/proj.git 
```

更改现有遥控器的值

```
git remote set-url new-origin https://example-new.com/proj.git 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T18:22:38.457

我从[git-annex 论坛](http://git-annex.branchable.com/forum/How_to_define_an_alternative_remote_url_for_a_git_remote_repository__63__/)得到了答案，在那里我问了一个类似的问题。是否有许多遥控器使用不同的访问方法指向相同的存储库并不重要。实际上，每个存储库在由 git-annex 初始化时都会获得一个 UUID。然后，此 UUID 在添加和同步时与远程相关联。因此，git-annex 将具有相同 UUID 的不同远程视为单个存储库。

# ruby-on-rails - 如何在 Rails 应用程序中检索 central_logger 的信息

> ID：12051528
> 
> 赞同：0
> 
> 时间：2012-08-21T09:04:29.357
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

我正在为我的 rails 应用程序使用 central_logger(0.3.3) gem。

我按照文档[https://github.com/customink/central_logger](https://github.com/customink/central_logger)遵循每条说明。

记录插入成功。但是我想获取 central_logger 的记录以在我的应用程序中显示分析有什么办法吗？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:48:18.583

我能够根据文档访问数据库及其记录

```
db = Rails.logger.mongo_connection  #specifies db, NO Need to change anything use as is

collection = db[Rails.logger.mongo_collection_name] #specifies mongo collection, NO Need to change anything use as is.

cursor = collection.find(:action => 'show') #get all central_logger records with action show 

cursor.each do |obj|
  obj ## A single mongo  record object
end 
```

为我工作......！

# minify - 组合和缩小跨脚本变量

> ID：12051529
> 
> 赞同：0
> 
> 时间：2012-08-21T09:04:30.353
> 
> 标签：minify

我正在寻找合并和缩小我的 JavaScript 文件。我有个问题; 在我的页面上，我基本上有相同的库 JS 文件，然后是一个“特定”JS 文件来运行该页面的代码。我还在那个特定的 JS 文件中定义了变量，然后在库 JS 文件的其他地方使用这些变量。例如，我定义了 var tablename，然后在库文件中使用它来渲染一个使用设置为“tablename”的表。

我的问题是，如果我将我所有页面中的所有 JavaScript 文件合并到一个大 JS 文件中，然后在我的页面上包含该合并/缩小的文件，那么作为合并所有文件的结果，那么该大 JS 文件将有多个 .ready() 事件，并且将多次定义相同的变量表名。这是如何克服的？也许它不能在我的情况下，我需要为我的每个页面创建一个组合/缩小文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:11:46.027

我想我找到了解决方案；YUI Compressor（我正在使用）不会修改全局变量，并且由于我的表名变量将是全局变量（不在函数中），因此它不会被修改。

# c# - 如何在数据网格视图列中查看多个数据c#

> ID：12051530
> 
> 赞同：0
> 
> 时间：2012-08-21T09:04:31.867
> 
> 标签：c#

我遇到了一个问题，如果值属于同一类别，则数据网格视图列不显示超过 1 个值。

示例：2 个人在同一个地方工作。第一人轮班时间为：10:00 - 1700。第二人轮班时间为：1500:2100。

我实现了代码以在计划数据网格视图中显示 2 个人的轮班时间。问题从这里开始。这 2 名工人在 15:00 - 17:00 之间有重叠的时间班次。15:00 - 17:00 之间的数据网格视图中显示的值只是第一个人的名字。我需要在 15:00 - 17:00 的时间班次期间显示两个员工的姓名。

这是将数据显示到数据网格视图中的代码。

```
foreach (allocation a in query)
        {
            for (int i = 0; i < scheduleDGV.Rows.Count - 1; i++)
            {
                for (int j = 0; j < scheduleDGV.Columns.Count; j++)
                {
                    if (cbLocation.SelectedItem.Equals(a.LocationName) && cbScheduleDate.SelectedItem.Equals(a.AllocationDate))
                    {
                        if (a.LocationName.Equals(scheduleDGV["Location", i].Value.ToString()) &&
                            a.StationName.Equals(scheduleDGV["Station", i].Value.ToString()))
                        {
                            if (scheduleDGV.Columns[j].HeaderText.Equals(a.AllocationTime.ToString()))
                            {
                                scheduleDGV[j, i].Value = a.EmployeeName;
                            }
                        }
                    }
                }
            }
        } 
```

那里的任何人都对如何实现它有任何想法，以便它可以显示两个名称而不是只显示一个名称？谢谢！帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:18:13.347

您的问题可能来自该行

```
scheduleDGV[j, i].Value = a.EmployeeName; 
```

您只是将相关的员工姓名放入单元格中，而不是检查那里是否已经有姓名。

在不重构其余代码的情况下，您可以将此行替换为：

```
var existingName = scheduleDGV[j, i].Value as string;
if (!String.IsNullOrempty(existingName))
{
    scheduleDGV[j, i].Value = 
        existingName +
        Environment.NewLine +
        a.EmployeeName;
}
else
{
    scheduleDGV[j, i].Value = a.EmployeeName; 
} 
```

看看这是否符合您的预期。

# ruby-on-rails - 有谁知道“预期的 SCALAR、SEQUENCE-START、MAPPING-START 或 ALIAS”是什么意思？

> ID：12051531
> 
> 赞同：3
> 
> 时间：2012-08-21T09:04:35.193
> 
> 标签：ruby-on-rails, ruby, database, hash, scalar

谁能指出我正确的方向，因为当我通过文件上传将一个小的序列化哈希保存到数据库时它工作得很好，但是当一个大文件出现时它会出错；

```
expected SCALAR, SEQUENCE-START, MAPPING-START, or ALIAS 
```

我正在运行 Ruby 1.9.3po 和 rails 3.2.3，sQlite3。数据库列是具有默认限制的 TEXT 类型。用于将`serialize, :db_column, Hash`其正确保存为数据库的哈希。

我在谷歌上找不到任何决定性的东西。这可能与数据库列的配置方式有关吗？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T15:55:33.640

对我来说，这个错误是在处理延迟工作时发生的。我的rails模型中有以下内容：

```
model MyModel < ActiveRecord::Base

  handle_asynchronously :enqueue

  def enqueue
  end

end 
```

enqueue 是 DJ 中的保留字，因此它未能触发并导致上述错误（并且在我发现发生了什么之前非常头疼）

# jquery-mobile - 移动网站中的固定位置按钮

> ID：12051532
> 
> 赞同：2
> 
> 时间：2012-08-21T09:04:36.023
> 
> 标签：jquery-mobile, twitter-bootstrap, mobile-website

我正在构建一个移动网站，需要一个固定位置的按钮（用于快速链接以滚动到顶部），该按钮应在滚动屏幕时移动。移动浏览器不支持固定位置。任何人都可以提出相同的方法。我正在使用推特引导程序。我在 jquery 移动框架中观察到移动的固定位置页眉和页脚，但可以在 twitter 引导页面中使用它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T18:55:30.653

您可以在您的网站上使用导航栏`navbar-fixed-top`或`navbar-fixed-bottom`导航栏，这将在移动设备上正常运行。[请参阅导航栏http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)下的可选显示变体部分。

# c# - 来自json的wp7列表框绑定

> ID：12051534
> 
> 赞同：0
> 
> 时间：2012-08-21T09:04:39.740
> 
> 标签：c#, json, windows-phone-7, listbox

大家好我有一个小问题我无法绑定列表框中的数据，如果有人能告诉我是什么问题请

我解析我的数据，然后从下面的 json 中得到我想要的一切

```
{
maj: true,
data: [
{
c: 2,
t: 0,
r: [
168,
"La rentrée Auchan",
0,
"2012-08-15 00:00:00",
"2012-08-21 00:00:00",
56,
"VL"
]
},
.... 
```

我毫无问题地解析了我想要的数据，我得到了我想要一切正常的所有数据，但我不知道在这种情况下如何绑定它。注意：json 结果在 e.result 中

```
 var obj = App.Current as App;
            // obj.R2= JsonConvert.DeserializeObject<Root>(e.Result).data.Where(d => d.t == 0).SelectMany(d => d.r.Take(2));

            JObject jobject = JObject.Parse(e.Result);
            JArray arr = (JArray)jobject["data"];
            List<JsonC> apps = new List<JsonC>();
            for (int i = 0; i < arr.Count; i++)
            {
                apps.Add(new JsonC { t = (int)arr[i]["t"], r = (JArray)arr[i]["r"] });
            }
            List<int> itList = new List<int>();
            List<int> Number = new List<int>();
            List<string> Name = new List<string>();
            List<string> stList = new List<string>();
            //listClients.ItemsSource = apps.Where(ap => ap.t == 0);
            foreach (var el in apps.Where(ap => ap.t == 0))
            {
                itList.Add((int)el.r[0]);
                Name.Add((string)el.r[1]);
                Number.Add((int)el.r[5]);
                stList.Add((string)el.r[6]);
            }

            obj.R1 = itList;
            obj.R2 = Number;
            obj.R3 = Name;
            obj.R4 = stList; 
```

现在我尝试在 texblock 中绑定 obj.R3 但它没有任何帮助？

```
<ListBox Height="512"  Margin="0,-2,6,0" Name="listClients" VerticalAlignment="Top" Loaded="listImage_Loaded">

                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel ItemHeight="150" ItemWidth="150"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>

                                <TextBlock Text="{Binding obj.R3}" x:Name="Textblock1" Foreground="Black" Width="100" TextAlignment="Center" Style="{StaticResource PhoneTextSubtleStyle}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:54:21.520

您应该从代码隐藏本身指定 ListBox 的 Datacontext。

```
listClients.ItemsSource = obj.R3; 
```

和

```
<TextBlock Text="{Binding}" .../> 
```

# java - ImageIO 无法读取某些图像

> ID：12051535
> 
> 赞同：3
> 
> 时间：2012-08-21T09:04:44.163
> 
> 标签：java, image, javax.imageio

我有以下问题。我们有一个带有图片上传功能的 Web 服务。当您尝试上传某些图像时，它会失败。这些图像具有正确的 MIMETYPE，它们不是 CMYK（至少 GIMP 说它们是 RGB 格式）。 **抛出的异常是：“不支持的图像类型”！** 尝试启动此命令时会出现问题：

```
BufferedImage img = ImageIO.read(new ByteArrayInputStream(image.getData())); 
```

我挖得更深一点`ImageIO.read(ImageInputStream stream)`，当他再次尝试关闭流时，真正的异常被抛出了！

```
public static BufferedImage read(ImageInputStream stream)
    throws IOException {
    if (stream == null) {
        throw new IllegalArgumentException("stream == null!");
    }

    Iterator iter = getImageReaders(stream);
    if (!iter.hasNext()) {
        return null;
    }

    ImageReader reader = (ImageReader)iter.next();
    ImageReadParam param = reader.getDefaultReadParam();
    reader.setInput(stream, true, true);
    BufferedImage bi;
    try {
        bi = reader.read(0, param);
    } finally {
        reader.dispose();
        stream.close();
    }
    return bi;
} 
```

抛出异常的图像是这样的，例如：
![崩溃的图像](../Images/8f06d362c7431d593b10dbccbcd936d6.png)

我希望有人可以帮助我弄清楚为什么会崩溃以及如何解决它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:26:19.777

附图有CMYK颜色模型。尝试将其转换为 RGB。

这个问题很有用：[How to convert from CMYK to RGB in Java correct?](https://stackoverflow.com/questions/3123574/how-to-convert-from-cmyk-to-rgb-in-java-correctly/11796281)

# java - 使用 Spring 作为 grails 前端的后端

> ID：12051542
> 
> 赞同：2
> 
> 时间：2012-08-21T09:05:01.757
> 
> 标签：java, spring, grails

我们有一个 Spring 应用程序，它将所有业务逻辑公开为 RESTful Web 服务，由 jQuery 前端使用。我们的 jQuery 前端代码随着 javascript 操作 html 文件而变得难以管理。所以我们计划使用 grails 和 jquery/bootstrap 来克服这些问题。现在，我们正在做一个 Poc 来了解迁移到新堆栈的含义。

我们目前的理解是我们将运行两个应用程序——一个用于 grails，一个用于 Spring 后端。我们可以实现 CAS 来维护这两个应用程序之间的会话。Grails 将对所有数据和业务逻辑使用 spring。我们的前端只与 grails 通信，而 grails 又根据需要连接到 Spring。

我不确定在新方法中要寻找哪些潜在的东西。有人可以就我们的方法提供反馈吗？

谢谢--文基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:11:23.900

我建议在 grails 中只创建一个应用程序。将所有现有代码插入 src/java 并使用 groovy 域/服务从现有业务逻辑中获取数据。

通过这种方式，您将无需运行 2 个 web 应用程序，这些应用程序将通过 http 进行通信以服务一个客户端请求。

# jquery - 如何将 jQuery 对象和选择器绑定在一起？

> ID：12051544
> 
> 赞同：0
> 
> 时间：2012-08-21T09:05:15.380
> 
> 标签：jquery

我有以下 $form 是一个 jQuery 对象。

```
var $form  = oSubmit.$form; 
```

在这个表单上，我有一个带有更新网格类的输入元素。

```
 $('input.update-grid')
            .each(function () {
                var id = this.id.replace('modal', '');
                $('#input' + id).val(this.value)
            }) 
```

如何将这两者联系在一起，以便该函数在 $form 对象上的每个 input.update-grid 上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:06:58.530

使用对象`$form`作为上下文：

```
$('input.update-grid', $form).each(function(index, elem) {
    var id = elem.id.replace('modal', '');
    $('#input' + id).val(elem.value)
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:11:27.733

尝试这个：

`$form.find('input.update-grid').each(function () {`

 `var id = this.id.replace('modal', '');

$('#input' + id).val(this.value)` 

`})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:09:21.517

您可以使用

```
$('input.update-grid', $form).each(...) 
```

这实际上只是一个包装器：

```
$form.find('input.update-grid').each(...) 
```

# c++ - ImageMagick 使用我的真实字体转换 SVG (Magick++)

> ID：12051546
> 
> 赞同：1
> 
> 时间：2012-08-21T09:05:18.763
> 
> 标签：c++, c, svg, imagemagick, imagemagick-convert

我正在`Magick++`使用`ImageMagick`. 我不知道如何使用我的字体将渲染 svg 设置为光栅。[这是我的 svg](https://www.dropbox.com/s/974n4uzu2krqqrt/ua_03.svg)。

目标是实现类比

```
convert.exe -font C:\Fonts\RoadSymbols.ttf C:\ua_03.svg C:\1.png 
```

但使用`Magick++`API。

我试图设置这样的字体：

```
Magick::Image svgImage("C:\\ua_03.svg");
svgImage.magick("png");
svgImage.font("@C:\\Fonts\\RoadSymbols.ttf");
svgImage.write("C:\\1.png"); 
```

但我没有得到所需的结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:21:25.610

首先使用命令行列出 ImageMagick 已知的所有字体：

```
 convert.exe -list font 
```

你会看到这样的东西：

```
Path: /opt/local/etc/ImageMagick/type-ghostscript.xml
Font: AvantGarde-Book
  family: AvantGarde
  style: Normal
  stretch: Normal
  weight: 400
  glyphs: /opt/local/share/fonts/urw-fonts/a010013l.pfb
Font: AvantGarde-BookOblique
  family: AvantGarde
  style: Oblique
  stretch: Normal
  weight: 400
  glyphs: /opt/local/share/fonts/urw-fonts/a010033l.pfb
Font: AvantGarde-Demi
  family: AvantGarde
  style: Normal
  stretch: Normal
  weight: 600
  glyphs: /opt/local/share/fonts/urw-fonts/a010015l.pfb
Font: AvantGarde-DemiOblique
  family: AvantGarde
  style: Oblique
  stretch: Normal
  weight: 600
  glyphs: /opt/local/share/fonts/urw-fonts/a010035l.pfb
[...] 
```

然后，在从该列表中为 ImageMagick 细读选择字体时，您可以选择：

*   (a) ...要么使用出现在`Font:`标签后面的字体名称，

*   (b) ...或使用实际字体文件的完整路径（出现在`glyphs:`标签后面。

并且不要尝试只使用`family:`ImageMagick 的名称......

**如果它们包含任何空格，请务必在任何字体名称或路径周围使用引号！**

# wpf - 绑定错误

> ID：12051551
> 
> 赞同：1
> 
> 时间：2012-08-21T09:05:29.487
> 
> 标签：wpf, xaml, binding

在一个窗口中，我有一个文本框，我正在使用 canExecute 函数来检查该字段是否为空。我对文本框中使用的 DependencyProperty 有一个 to-way 绑定。无论如何，它在 CanExecute 中始终为空（编辑：它不是空的，它是空的：“”）。你能告诉我错误在哪里吗？

```
<TextBox Text="{Binding Path=StatusName, ElementName=Window, Mode=TwoWay}" x:Name="StatusNameTextBox" /> 
```

* * *

```
public String StatusName
    {
        get { return (String)GetValue(StatusNameProperty); }
        set { SetValue(StatusNameProperty, value); }
    }

public static readonly DependencyProperty StatusNameProperty =
        DependencyProperty.Register("StatusName", typeof(String), typeof(AddStatusWindow), new UIPropertyMetadata(""));

private void AddNewStatusCommand_CanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        e.CanExecute = !String.IsNullOrEmpty(StatusName);

    } 
```

PS：我在 VS 调试器中没有绑定错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:13:05.697

在绑定中，设置 UpdateSourceTrigger=PropertyChanged。使用 TextBox，默认值为 LostFocus，因此您将获得一个空字符串，直到您使用 tab 键。

# c# - 如何查询 C# 数据表？

> ID：12051553
> 
> 赞同：0
> 
> 时间：2012-08-21T09:05:41.020
> 
> 标签：c#

我已经创建并返回了数据表，这个表有 10 列。现在我想根据一些动态搜索参数从这个表中过滤。这该怎么做？任何想法都会得到及时的帮助。

```
// This function will create and return the source table.
var DisplayTable = CreateQueryTable(); 
```

在这里我想做动态搜索`If col1=MyName and Col2=MyCity`

```
ResultGrid.DataSource = DisplayTable;
ResultGrid.DataBind();
Panel1.Controls.Add(ResultGrid); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T09:14:33.823

你可以通过这些方式做到这一点，

1.创建数据视图喜欢

```
var dv = dataTable.DefaultView;
dv.RowFilter =  "col1='MyName' and Col2='MyCity'"; // if MyName and MyCity are literal string. 
```

或者

```
dv.RowFilter = "col1='"+MyName+"' and Col2 ='"+ MyCity +"'";// if MyName and MyCity are string variable. 
```

2.使用DataTable Select方法，它会返回DataRow数组

```
var rows = dataTable.Select("col1='MyName' and Col2='MyCity'"); //if string literal 
```

或者

```
var rows = dataTable.Select("col1='"+MyName+"' and Col2='"+MyCity+"'"); // if string variable 
```

3.林奇

```
var filterdData = from row in dataTable.AsEnumerable()
                  where row.Field<string>("col1") == "MyName" 
                  && row.Field<string>("col2") == "MyCity"
                  select row; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:07:12.330

您创建数据表的 DataView 并使用 Filter // Create a DataView DataView dv = new DataView(yourDataTable); dv.RowFilter = "col1='MyName' and Col2='MyCity'"; //用DataView绑定你的网格

你也可以在你的桌子上使用 select 方法

```
 DataRow[] foundRows;
  foundRows = yourDataTable.Select("col1='MyName' and Col2='MyCity'"); 
```

您还可以使用 Linq To DataTable

```
var results = from myRow in yourDataTable.AsEnumerable()
where myRow.Field<string>("col1") == Myname &&
      myRow.Field<string>("Col2") == MyCity
select myRow; 
```

# iphone - 带有图像和文本的 UIBarButtonItem

> ID：12051555
> 
> 赞同：2
> 
> 时间：2012-08-21T09:05:44.797
> 
> 标签：iphone, objective-c, ios, uinavigationitem

我必须在地球上创建一个 UIBarButton 并在其上写一个文本“地图”。

我做了什么：

1.  我添加了一个 UIButton，其中地球的图像作为 backgroundImage。
2.  设置按钮上的文本。
3.  然后从上面的按钮创建了一个 UIBarButton initWithCustomView。
4.  鉴于它的风格为边框。

结果：

现在我得到的是一个平面按钮，地球图像拉伸在与其中的文本重叠的地方。

我已经搜索了很多，但我只找到了显示背景图像和按钮上方文本的链接。没有什么比图像和文字在一起。

[任何人都可以帮助我按照附件](http://i.stack.imgur.com/nlzLH.png)中显示的方式创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:13:52.367

尝试这个 ：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];  
[button setTitle:@"Title" forState:UIControlStateNormal];
UIImage *butImage_on = [[UIImage imageNamed:@"closebutton_on.png"] stretchableImageWithLeftCapWidth:10 topCapHeight:10];  
UIImage *butImage_over = [[UIImage imageNamed:@"closebutton_over.png"] stretchableImageWithLeftCapWidth:10 topCapHeight:10];  
[button setBackgroundImage:butImage_on forState:UIControlStateNormal];  
[button setBackgroundImage:butImage_over forState:UIControlStateHighlighted];  
[button setImage:[UIImage imageNamed:@"globe.png"] forState:UIControlStateNormal];  
[button addTarget:self action:@selector(closeProfilePage) forControlEvents:UIControlEventTouchUpInside];
button.frame = CGRectMake(0, 0, 61, 30);  

[button setTitleEdgeInsets:UIEdgeInsetsMake(0, -15, 0, 2)];
[button setImageEdgeInsets:UIEdgeInsetsMake(30,
                                         20,
                                         0,
                                         20)];

UIBarButtonItem *backButton = [[[UIBarButtonItem alloc] initWithCustomView:button] autorelease];  
self.navigationItem.leftBarButtonItem = backButton; 
```

注意：您需要根据您的要求管理插图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:17:30.367

使用带有@2x 的图像。如果您的图形是高分辨率的。根据 640 X 960 像素;:-

```
UIView *parentView1 = [[UIView alloc] initWithFrame:CGRectMake(0, 6,51, 44)];
UIButton *btnBack = [[UIButton alloc] initWithFrame:CGRectMake(0, 6, 51, 30)];

[btnBack setBackgroundImage:[UIImage imageNamed:@"back@2x.png"] forState:UIControlStateNormal];

[btnBack addTarget:self action:@selector(backButtonClicked) forControlEvents:UIControlEventTouchUpInside];  

[parentView1 addSubview:btnBack];

[btnBack release];  

UIBarButtonItem *homeBarButtomItem2 = [[UIBarButtonItem alloc] initWithCustomView:parentView1]; 

[parentView1 release];  

[self.navigationItem setLeftBarButtonItem:homeBarButtomItem2];

[homeBarButtomItem2 release]; 
```

# hibernate - JPA join fetch 查询与多对多

> ID：12051559
> 
> 赞同：1
> 
> 时间：2012-08-21T09:05:54.290
> 
> 标签：hibernate, jpa, join, many-to-many

我有一个最喜欢的对象。这个对象与颜色有多对多的联系。可以说一些收藏夹有很多颜色，2-3 等。当我搜索收藏夹时：

```
SELECT fav FROM Favourite fav join fetch fav.colors as cl WHERE fav.name = "blabla" . 
```

生成的对象包含与此收藏相关的所有颜色。我的问题是当我想搜索具有某种颜色的收藏夹时。例如：

```
SELECT fav FROM Favourite fav join fetch fav.colors as cl WHERE cl.name = "red" 
```

然后生成的对象仅包含红色。结果，我想获得包含“红色”颜色的收藏对象，但也显示所有相关颜色。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:15:17.790

Well finally it worked with an inner query and "EXISTS" operator. (color is an object of , int id and string name).

```
SELECT fav FROM Favourite fav join fetch fav.colors as cl WHERE EXISTS ( SELECT fav2 FROM Favourite fav2 join fetch fav2.colors as cl2 WHERE fav2.id = fav.id AND cl2.name = "red" ) 
```

# select - JPQL 语句返回布尔值

> ID：12051563
> 
> 赞同：46
> 
> 时间：2012-08-21T09:06:01.283
> 
> 标签：select, jpa, jpa-2.0, jpql

是否可以编写如下 JPQL 查询：

`select count(*) > 0 from Scenario scen where scen.name = :name`

这将根据实体填充标准是否存在返回真/假布尔值？

我想以这种方式使用查询：

```
boolean exists = entityManager.createQuery(query,Boolean.class).setParameter("name",name).getSingleResult(); 
```

我的示例中的查询在语法上不正确（解析错误），但是有没有像 JPQL 中那样进行检查的正确方法，它会返回布尔值，或者它只能在 Java 代码中实现？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-21T09:55:28.850

是的，可以通过以下方式：

```
select case when (count(scen) > 0)  then true else false end  
from Scenario scen where scen.name = :name 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-05-22T09:23:19.907

只是：

```
select count(scen) > 0
from Scenario scen where scen.name = :name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-27T15:28:08.200

我遇到了同样的问题，然后我将休眠更新为 4.3.11.Final，现在它可以工作了。

# html - 没有空格的HTML定位元素

> ID：12051573
> 
> 赞同：3
> 
> 时间：2012-08-21T09:06:33.623
> 
> 标签：html, css

我有两个元素（图片）

imgA 高 2000 像素 imgB 高 1000 像素

我将它们一个接一个地放置，然后向上移动 imgB（我使用相对定位）以与 imgA 重叠。

因此，浏览器中的窗口应该是 2000px 高。

但是，似乎在放置 imgA 和 imgB 时，浏览器会为它们分配位置，即 3000px hig，并且在我将 imgB 向上移动以重叠 imgA 后，我在页面底部留下了一个空白空间 =1000px .

如何防止这个空白？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:10:05.130

**忽略这个**

> 这是因为图像是块级元素。要阻止浏览器分配空间，您只需将：添加`display:inline-block` 到第二张图像。这将使图像脱离块结构，因此浏览器不会为其分配空白。

也看看[相对绝对定位](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)，它对你正在做的事情非常方便。

* * *

***已编辑***

如下所述，这不起作用。改用[相对绝对定位](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)。

[这是一个 jsFiddle，它显示了将图像定位在另一个图像上所需的代码](http://jsfiddle.net/RAkqC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T10:18:52.927

在您的图像上使用`display: block`，然后使用`position: absolute`而不是`position: relative`将 imgB 定位在 imgA 上。

不要忘记将父元素分配给除`position: static`使图像相对于父元素定位之外的任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:13:43.450

绝对定位只是针对您的情况的特定解决方案。在某些类似的情况下它可能不起作用（例如，如果您在一般包含的 div 中的这两个图像之上还有其他元素）。

我相信最好的解决方案是使用

```
margin-top: -1000px; 
```

对于第二张图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:21:21.423

如需进一步说明，您可以在此处查看“css 块”的示例

[http://www.tutorialswire.com/css/css-display](http://www.tutorialswire.com/css/css-display)

# python - Twitter Streaming API：是否可以仅过滤具有坐标的推文？

> ID：12051574
> 
> 赞同：2
> 
> 时间：2012-08-21T09:06:40.720
> 
> 标签：python, api, twitter, streaming

我有以下代码过滤特定位置跨度，但我真的希望它只返回具有位置坐标的推文。目前，如果没有，它将返回“无”，但我想完全忽略它们。有任何想法吗？

```
 loc = [-3.72,50.29,-3.42,50.41]

class CustomStreamListener(tweepy.StreamListener):
    def on_status(self, status):

        try:
            print "%s\t%s\t%s\t%s\t%s" % (status.text,
                                      status.author.screen_name,
                                      status.created_at,
                                      status.source,
                                      status.coordinates)          

        except Exception, e:
            print >> sys.stderr, 'Encountered Exception:', e
            pass

    def on_error(self, status_code):
        print >> sys.stderr, 'Encountered error with status code:', status_code
        return True # Don't kill the stream

    def on_timeout(self):
        print >> sys.stderr, 'Timeout...'
        return True # Don't kill the stream

streaming_api = tweepy.streaming.Stream(auth, CustomStreamListener(), timeout=60)

streaming_api.filter(follow=None, locations=loc) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:34:25.967

如果您只需要从列表中删除 None 的元素，您可以这样做：

```
>>> l = ['a', 'b', None, 'c', None]
>>> filter(None, l)
['a', 'b', 'c'] 
```

# sql - 如果没有行匹配，则 UPDATE 不会锁定表，竞争条件

> ID：12051575
> 
> 赞同：1
> 
> 时间：2012-08-21T09:06:43.497
> 
> 标签：sql, oracle, transactions, locking

我想从数据库表中增加并返回一个计数器。

java代码如下：

```
String sqlUpdate = "UPDATE mytable SET col3 = col3 + 1 WHERE colpk1 = ? AND colpk2 = ?";
Query queryUpdate = manager.createNativeQuery(sqlUpdate);
queryUpdate.setParameter(1, ...);
queryUpdate.setParameter(2, ...);

int num = queryUpdate.executeUpdate();

if (num == 0) {
    long count = 1;
    String sqlInsert = "INSERT INTO mytable (colpk1, colpk2, col3) VALUES (?,?,?)";
    Query queryInsert = manager.createNativeQuery(sqlInsert);
    queryInsert.setParameter(1, ...);
    queryInsert.setParameter(2, ...);
    queryInsert.setParameter(3, count);
    queryInsert.executeUpdate();

    return count;
} else {
    String sqlSelect = "SELECT col3 FROM mytable WHERE colpk1 = ? AND colpk2 = ?";
    Query querySelect = manager.createNativeQuery(sqlSelect);
    querySelect.setParameter(1, ...);
    querySelect.setParameter(2, ...);

    Object result = querySelect.getSingleResult();

    return Long.parseLong(result.toString());
} 
```

如果已经存在具有给定主键的行，这也可以同时使用（创建锁）。但是，如果该行尚不存在（num == 0），则 UPDATE 不会锁定，并且两个查询之间可能会发生并发访问，然后在将 INSERT 作为新行执行时导致唯一约束验证在此期间已经创建。

解决这个问题的最佳方法是什么？`SELECT FOR UPDATE`首先使用一个然后根据结果执行更新或插入会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:11:21.640

该`MERGE`语句将避免拆分语句。

[http://en.wikipedia.org/wiki/Merge_(SQL](http://en.wikipedia.org/wiki/Merge_(SQL) )

或者，您可以始终在条件发生时为极少数情况捕获唯一约束异常，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T13:59:42.967

由于 Merge 可以在并发执行时抛出 Unique Constraint 异常，因此最好的解决方案是在执行插入时捕获异常，然后该行必须已经存在，然后继续更新。

在容器管理事务的情况下提交此事务是下一个问题，因为异常会导致`isRollBackOnly == true`. 有效的方法是使用新的 bean 调用来尝试在新事务中插入，请参阅[异常后提交事务 - 撤消 setRollbackOnly](https://stackoverflow.com/questions/12088574/commit-transaction-after-exception-undo-setrollbackonly)

# mysql - 带有 OR 条件的 sql 多重连接

> ID：12051592
> 
> 赞同：3
> 
> 时间：2012-08-21T09:07:39.700
> 
> 标签：mysql, sql

我有三张桌子 AA、BB 和 CC。BB 和 CC 与表 AA 具有一对一的映射关系（在两个表中都有外键列：aa_id）。提供一个条件，即只有 BB 或 CC 可以引用表 AA 的一行。

我想从 AA 中选择**最新**的 1000 行，或者加入 BB 或 CC。我可以做单独的查询来分别选择 500 行加入 BB 和 CC 并制作 1000。但这不能保证我从 AA 表中获得最新的 1000 行。

所以，我想出了以下查询，通过同时加入 BB 和 CC 从 AA 中选择记录。但是由于**我的限制**（只有 BB 或 CC 可以引用表 AA 的一行），我从下面的查询中得到 0 行。

```
SELECT  * FROM AA 
       INNER JOIN BB  ON (
            AA.id = BB.aa_id
            AND SOME_CONDITION
        ) 
        INNER JOIN CC  ON (
            AA.id = CC.aa_id
            AND SOME_CONDITION
        )
ORDER BY
AA.id DESC limit 1000; 
```

你能告诉我怎么做吗？有什么办法可以让我 OR 这两个 JOIN 条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:10:08.547

只需将您`INNER JOIN`的 s 更改为`LEFT OUTER JOIN`s 即可。您可能想阅读[codinghorror.com 上的这篇文章，了解](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)不同的连接类型。

你的结果应该是这样的：

```
SELECT * FROM AA 
  LEFT OUTER JOIN BB  ON (
    AA.id = BB.aa_id
    AND /* SOME_CONDITION */
  ) 
  LEFT OUTER JOIN CC  ON (
    AA.id = CC.aa_id
    AND /* SOME_CONDITION */
  )
ORDER BY AA.id DESC
LIMIT 1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:10:55.253

`BB`由于 中或`CC`中的每一行只有一个匹配项`AA`，因此您应该将 your 替换`INNER JOIN`为`LEFT OUTER JOIN`.

所以查询应该是：

```
SELECT * FROM AA 
    LEFT OUTER JOIN BB ON (
        AA.id = BB.aa_id
        AND SOME_CONDITION
    ) 
    LEFT OUTER JOIN CC ON (
        AA.id = CC.aa_id
        AND SOME_CONDITION
    )
ORDER BY
AA.id DESC limit 1000; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:27:30.193

如果您希望 AA 中的所有记录存在 BB 或 CC 中的相应记录，您甚至不必加入（假设您不需要 BB 和 CC 中的值）。改用`EXISTS`：

```
SELECT *  FROM AA
    WHERE
    (
        EXISTS (
            SELECT 1 FROM BB WHERE AA.id = BB.aa_id
                /* AND SOME_CONDITION */
        ) OR EXISTS (
            SELECT 1 FROM CC WHERE AA.id = CC.aa_id
                /* AND SOME_CONDITION */)
    )
    ORDER BY AA.id DESC limit 1000; 
```

对我来说，这看起来更干净（而且它也可能更快一些，因为处理的数据更少，但我还没有测试过）！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:24:07.567

**编辑**：您说“AA 的最后 1000 行”，因此请注意在选择中指定 AA.*，否则您将获得由 AA 组成的 1000 行，然后是 BB 的所有字段和 CC 的所有字段（其中一个这两组也将被清空）。

这将获得匹配 BB 或 CC（或两者）的 AA 的最后 1000 行：

```
SELECT  AA.* FROM AA
   LEFT JOIN BB  ON (
        AA.id = BB.aa_id
        AND SOME_CONDITION
    ) 
    LEFT JOIN CC  ON (
        AA.id = CC.aa_id
        AND SOME_CONDITION
    )
    WHERE (BB.aa_id IS NOT NULL OR CC.aa_id IS NOT NULL)
ORDER BY AA.id DESC LIMIT 1000; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:42:51.560

@oezi 是绝对正确的。您的查询几乎不需要更改，只需删除`INNER JOIN`. `LEFT OUTER JOIN`与`AND`@oeze 提到的条件一起使用。

# windows - WinRT GridView 禁用对项目的选择，但保持启用状态

> ID：12051593
> 
> 赞同：3
> 
> 时间：2012-08-21T09:07:41.993
> 
> 标签：windows, gridview, microsoft-metro, windows-runtime

这类似于[禁用单个项目的选择](https://stackoverflow.com/questions/10729315/how-to-disable-selection-a-single-item-in-a-gridview)，但是，我想保持启用该项目（对于点击，也就是点击事件）。因此，简单地将 IsEnabled 设置为 false 显然不是一个选项。什么是实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T13:08:25.517

您可以使用自定义样式解决此问题。

用法 ：

```
<GridViewItem Style="{StaticResource NonGridViewItemStyle}"> 
   <!-- Your content here-->
</GridViewItem> 
```

将此样式放在资源字典中：

```
<Style x:Key="NonGridViewItemStyle"
   TargetType="GridViewItem">
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="GridViewItem">
            <Border x:Name="OuterContainer">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Normal"/>
                        <VisualState x:Name="PointerOver">

                        </VisualState>
                        <VisualState x:Name="Pressed">
                            <Storyboard>
                                <PointerDownThemeAnimation TargetName="ContentContainer" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="PointerOverPressed">
                            <Storyboard>
                                <PointerDownThemeAnimation TargetName="ContentContainer" />
                                <DoubleAnimation Storyboard.TargetName="PointerOverBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionBackground"
                                                                Storyboard.TargetProperty="Fill">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedPointerOverBackgroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectedBorder"
                                                                Storyboard.TargetProperty="Stroke">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedPointerOverBorderThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectedEarmark"
                                                               Storyboard.TargetProperty="Fill">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedPointerOverBackgroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Disabled">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="contentPresenter"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="{ThemeResource ListViewItemDisabledThemeOpacity}" />
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="FocusStates">
                        <VisualState x:Name="Focused">
                            <Storyboard>
                                <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisual" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Unfocused"/>
                        <VisualState x:Name="PointerFocused"/>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="SelectionHintStates">
                        <VisualState x:Name="VerticalSelectionHint">
                            <Storyboard>
                                <SwipeHintThemeAnimation TargetName="SelectionBackground" ToVerticalOffset="15" ToHorizontalOffset="0" />
                                <SwipeHintThemeAnimation TargetName="ContentBorder" ToVerticalOffset="15" ToHorizontalOffset="0" />
                                <SwipeHintThemeAnimation TargetName="SelectedBorder" ToVerticalOffset="15" ToHorizontalOffset="0" />
                                <SwipeHintThemeAnimation TargetName="SelectedCheckMark" ToVerticalOffset="15" ToHorizontalOffset="0" />
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="HintGlyph"
                                                               Storyboard.TargetProperty="Opacity"
                                                               Duration="0:0:0.500">
                                    <DiscreteDoubleKeyFrame Value="0.5" KeyTime="0:0:0" />
                                    <DiscreteDoubleKeyFrame Value="0" KeyTime="0:0:0.500" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="HorizontalSelectionHint">
                            <Storyboard>
                                <SwipeHintThemeAnimation TargetName="SelectionBackground" ToHorizontalOffset="-23" ToVerticalOffset="0" />
                                <SwipeHintThemeAnimation TargetName="ContentBorder" ToHorizontalOffset="-23" ToVerticalOffset="0" />
                                <SwipeHintThemeAnimation TargetName="SelectedBorder" ToHorizontalOffset="-23" ToVerticalOffset="0" />
                                <SwipeHintThemeAnimation TargetName="SelectedCheckMark" ToHorizontalOffset="-23" ToVerticalOffset="0" />
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="HintGlyph"
                                                               Storyboard.TargetProperty="Opacity"
                                                               Duration="0:0:0.500">
                                    <DiscreteDoubleKeyFrame Value="0.5" KeyTime="0:0:0" />
                                    <DiscreteDoubleKeyFrame Value="0" KeyTime="0:0:0.500" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="NoSelectionHint" />
                        <VisualStateGroup.Transitions>
                            <VisualTransition To="NoSelectionHint" GeneratedDuration="0:0:0.65"/>
                        </VisualStateGroup.Transitions>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="SelectionStates">
                        <VisualState x:Name="Unselecting">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="HintGlyphBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Unselected">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="HintGlyphBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="UnselectedPointerOver">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="HintGlyphBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedForegroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="UnselectedSwiping">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="SelectingGlyph"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="0.5" />
                                <DoubleAnimation Storyboard.TargetName="HintGlyphBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Selecting">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectingGlyph"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="HintGlyphBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedForegroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Selected">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedCheckMark"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedForegroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="SelectedSwiping">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedCheckMark"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedForegroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="SelectedUnfocused">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="SelectedCheckMark"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="contentPresenter"
                                                               Storyboard.TargetProperty="Foreground">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ListViewItemSelectedForegroundThemeBrush}" />
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="DragStates">
                        <VisualState x:Name="NotDragging" />
                        <VisualState x:Name="Dragging">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="InnerDragContent"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="{ThemeResource ListViewItemDragThemeOpacity}" />
                                <DragItemThemeAnimation TargetName="InnerDragContent" />
                                <FadeOutThemeAnimation TargetName="SelectedCheckMarkOuter" />
                                <FadeOutThemeAnimation TargetName="SelectedBorder" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="DraggingTarget">
                            <Storyboard>
                                <DropTargetItemThemeAnimation TargetName="OuterContainer" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="MultipleDraggingPrimary">
                            <Storyboard>
                                <!-- These two Opacity animations are required - the FadeInThemeAnimations
                                     on the same elements animate an internal Opacity. -->
                                <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayBackground"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayText"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="1" />
                                <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                 Storyboard.TargetProperty="Opacity"
                                                 Duration="0"
                                                 To="{ThemeResource ListViewItemDragThemeOpacity}" />
                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayBackground" />
                                <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                <DragItemThemeAnimation TargetName="ContentBorder" />
                                <FadeOutThemeAnimation TargetName="SelectionBackground" />
                                <FadeOutThemeAnimation TargetName="SelectedCheckMarkOuter" />
                                <FadeOutThemeAnimation TargetName="SelectedBorder" />
                                <FadeOutThemeAnimation TargetName="PointerOverBorder" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="MultipleDraggingSecondary">
                            <Storyboard>
                                <FadeOutThemeAnimation TargetName="ContentContainer" />
                            </Storyboard>
                        </VisualState>
                        <VisualStateGroup.Transitions>
                            <VisualTransition To="NotDragging" GeneratedDuration="0:0:0.2"/>
                        </VisualStateGroup.Transitions>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="ReorderHintStates">
                        <VisualState x:Name="NoReorderHint"/>
                        <VisualState x:Name="BottomReorderHint">
                            <Storyboard>
                                <DragOverThemeAnimation TargetName="ReorderHintContent" ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" Direction="Bottom" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="TopReorderHint">
                            <Storyboard>
                                <DragOverThemeAnimation TargetName="ReorderHintContent" ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" Direction="Top" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="RightReorderHint">
                            <Storyboard>
                                <DragOverThemeAnimation TargetName="ReorderHintContent" ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" Direction="Right" />
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="LeftReorderHint">
                            <Storyboard>
                                <DragOverThemeAnimation TargetName="ReorderHintContent" ToOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" Direction="Left" />
                            </Storyboard>
                        </VisualState>
                        <VisualStateGroup.Transitions>
                            <VisualTransition To="NoReorderHint" GeneratedDuration="0:0:0.2"/>
                        </VisualStateGroup.Transitions>
                    </VisualStateGroup>
                    <VisualStateGroup x:Name="DataVirtualizationStates">
                        <VisualState x:Name="DataAvailable"/>
                        <VisualState x:Name="DataPlaceholder">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextBlock"
                                                               Storyboard.TargetProperty="Visibility"
                                                               Duration="0">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderRect"
                                                               Storyboard.TargetProperty="Visibility"
                                                               Duration="0">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Grid x:Name="ReorderHintContent" Background="Transparent">
                    <Path x:Name="SelectingGlyph" Opacity="0" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{ThemeResource ListViewItemCheckSelectingThemeBrush}" Height="13" Stretch="Fill" Width="15" HorizontalAlignment="Right" Margin="0,9.5,9.5,0" VerticalAlignment="Top" FlowDirection="LeftToRight"/>
                    <Border x:Name="HintGlyphBorder"
                            Height="40"
                            Width="40"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Opacity="0"
                            Margin="4">
                        <Path x:Name="HintGlyph" Opacity="0" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{ThemeResource ListViewItemCheckHintThemeBrush}" Height="13" Stretch="Fill"  Width="15" HorizontalAlignment="Right" Margin="0,5.5,5.5,0" VerticalAlignment="Top" FlowDirection="LeftToRight"/>
                    </Border>
                    <Border x:Name="ContentContainer">
                        <!-- This extra wrapper grid is necessary because rendertransforms set by the reorder hint animations
                             will be lost when ContentContainer becomes a LTE -->
                        <Grid x:Name="InnerDragContent">
                            <Rectangle x:Name="PointerOverBorder"
                                       IsHitTestVisible="False"
                                       Opacity="0"
                                       Fill="{ThemeResource ListViewItemPointerOverBackgroundThemeBrush}"
                                       Margin="1" />
                            <Rectangle x:Name="FocusVisual"
                                       IsHitTestVisible="False"
                                       Opacity="0"
                                       StrokeThickness="2"
                                       Stroke="{ThemeResource ListViewItemFocusBorderThemeBrush}" />
                            <Rectangle x:Name="SelectionBackground"
                                       Margin="4"
                                       Fill="{ThemeResource ListViewItemSelectedBackgroundThemeBrush}"
                                       Opacity="0" />
                            <Border x:Name="ContentBorder"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    Margin="4">
                                <Grid>
                                    <ContentPresenter x:Name="contentPresenter"
                                                      ContentTransitions="{TemplateBinding ContentTransitions}"
                                                      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                      VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      Margin="{TemplateBinding Padding}" />
                                    <!-- The 'Xg' text simulates the amount of space one line of text will occupy.
                                         In the DataPlaceholder state, the Content is not loaded yet so we
                                         approximate the size of the item using placeholder text. -->
                                    <TextBlock x:Name="PlaceholderTextBlock"
                                               Visibility="Collapsed"
                                               Text="Xg"
                                               Foreground="{x:Null}"
                                               Margin="{TemplateBinding Padding}"
                                               IsHitTestVisible="False"
                                               AutomationProperties.AccessibilityView="Raw"/>
                                    <Rectangle x:Name="PlaceholderRect"
                                               Visibility="Collapsed"
                                               Fill="{ThemeResource ListViewItemPlaceholderBackgroundThemeBrush}"/>
                                    <Rectangle x:Name="MultiArrangeOverlayBackground"
                                               IsHitTestVisible="False"
                                               Opacity="0"
                                               Fill="{ThemeResource ListViewItemDragBackgroundThemeBrush}" />
                                </Grid>
                            </Border>
                            <Rectangle x:Name="SelectedBorder"
                                       IsHitTestVisible="False"
                                       Opacity="0"
                                       Stroke="{ThemeResource ListViewItemSelectedBackgroundThemeBrush}"
                                       StrokeThickness="{ThemeResource GridViewItemSelectedBorderThemeThickness}"
                                       Margin="4"/>
                            <Border x:Name="SelectedCheckMarkOuter"
                                    IsHitTestVisible="False"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Top"
                                    Margin="4">
                                <Grid x:Name="SelectedCheckMark" Opacity="0" Height="40" Width="40">
                                    <Path x:Name="SelectedEarmark" Data="M0,0 L40,0 L40,40 z"  Fill="{ThemeResource ListViewItemSelectedBackgroundThemeBrush}" Stretch="Fill"/>
                                    <Path Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{ThemeResource ListViewItemCheckThemeBrush}" Height="13" Stretch="Fill" Width="15" HorizontalAlignment="Right" Margin="0,5.5,5.5,0" VerticalAlignment="Top" FlowDirection="LeftToRight"/>
                                </Grid>
                            </Border>
                            <TextBlock x:Name="MultiArrangeOverlayText"
                                       Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DragItemsCount}"
                                       Foreground="{ThemeResource ListViewItemDragForegroundThemeBrush}"
                                       FontFamily="{ThemeResource ContentControlThemeFontFamily}"
                                       FontSize="26.667"
                                       IsHitTestVisible="False"
                                       Opacity="0"
                                       TextWrapping="Wrap"
                                       TextTrimming="WordEllipsis"
                                       Margin="18,9,0,0" 
                                       AutomationProperties.AccessibilityView="Raw"/>
                        </Grid>
                    </Border>
                </Grid>
            </Border>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

GridViewItem 现在不显示 selectionborder，但它仍然是可选择的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T12:15:50.583

给绑定到项目的类一个 bool 类型的额外属性（例如 canBeSelected），处理 selectionchanged 事件并检查 bool 是否为假，如果它被设置为 null

# ruby-on-rails - Ruby 在打印语句中使用变量

> ID：12051596
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:07:49.043
> 
> 标签：ruby-on-rails, ruby

我有以下代码，通过从我的程序的菜单中选择选项 1 来调用它：

```
def self.addModuleToScheme
=begin
Create an empty hash for the schemes
=end
 schemes = Hash.new()
=begin
Allow user to enter scheme names into a set of variables, and use each scheme name as a hash/ array of modules.
Then allow the user to enter the the modules for each scheme into each of the hashes

Create specific hash elements by using the following line:
schemes = {:scheme1 => scheme1variable, :scheme2 => scheme2variable}
=end

 puts "What is the name of the scheme that you would like to add a module to? "
 schemeName = gets
=begin
Need to use an if statement here to check whether or not the scheme already exists, if it doesn't, create it, if it does,
tell the user that it does.
=end
 if schemes.has_key?(schemeName)
   puts "This scheme has already been added "
 else
   schemes[@noOfModulesInScheme] = schemeName
 end

 @noOfModulesInScheme + 1
# moduleName.moduleScheme = schemeName

# Print to check that scheme has been added to system:
 if schemes.has_key?(schemeName)
   puts "@schemeName has been added to the system "
 end 
```

目前，当我运行代码时，会显示菜单，我选择选项 1，即调用此代码的时间。然后我被问到我想添加模块的方案的名称是什么。我输入它，然后程序退出。

我想做的是打印输出，告诉我刚刚输入的方案已添加到系统中，然后我的程序继续询问我想添加到方案中的模块。

但是我不知道如何在句子中打印散列元素的内容。谁能指出我正确的方向？

**编辑**

如果有任何帮助，这是我程序中的另一个类（打印菜单的地方）

```
class Application
# To change this template use File | Settings | File Templates.
require './courseModules.rb'
def initialize
  mainMenu
end

=begin
  def navigateTo(what)
  what.new(v).display
  mainMenu
  end
=end

def mainMenu
  puts "What would you like to do?
      1: Add module to a scheme
      2: Remove module from a scheme
      3: Query modules
      4: Modify module
      5: Register a student on a scheme
      6: Remove a student from a scheme
      7: Register a student on a module
      8: Remove a student from a module"
  case gets.strip
    when "1"
      CourseModules.addModuleToScheme
    when "2"
      CourseModules.removeModuleFromScheme
    when "3"
      navigateTo CourseModules
    when "4"
      navigateTo CourseModules
    when "5"
      navigateTo Student
    when "6"
      navigateTo Student
    when "7"
      navigateTo Student
  end
end
Application.new
end 
```

**编辑**

好的，我已经进行了建议的更改，但是，当我现在运行我的程序时，我收到一条错误消息，提示“CourseModules: Class (NoMethodError) 的未定义方法'add_module'。

尽管事实上我从类中删除了旧方法（称为 addModuleToScheme），然后编写了新方法，更新了菜单中的方法调用，并保存了两个类。似乎我的菜单仍在尝试调用旧方法，即使它不再存在......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:50:25.547

您的代码有很多问题-

1.  在方法名和变量名中使用 Un-Ruby 风格的语法。
2.  `=begin; comment; =end`即使是单行注释的使用也不好。就我个人而言，即使是多行注释，我也更喜欢使用 # 样式。
3.  局部变量和实例变量的可互换使用。例如，在最后一行中，您在哈希键中搜索局部变量`schemeName`，随后`puts`使用实例变量`@schemeName`，尽管我怀疑您可能正在尝试实现插值效果，您需要使用哪个 btw`"#{schemeName}"`而不是`"@schemeName"`

但是，除此之外，如果我正确理解了您想要实现的目标（即创建一个方案哈希，其中方案作为键，模块作为值），然后尝试以下代码。在此示例中，我假设您希望方案和模块之间具有 1:1 的关系，但是如果您想为每个方案定义多个模块，您可以通过添加另一个循环并将方案的字符串值替换为数组来轻松实现在下面的代码中。

```
def add_module
    schemes = {}
    scheme_exists = false
    add_another_scheme = true
    while add_another_scheme
            print "Enter Scheme Name: "
            scheme_name = gets
            schemes.has_key?(scheme_name.chop) ? scheme_exists = true : scheme_exists = false

            if !scheme_exists
                    print "Enter Module Name: "
                    module_name = gets
                    schemes[scheme_name.chop] = module_name.chop
                    puts "Scheme #{scheme_name.chop} has been added to the system"
            else
                    scheme_exists = false
                    puts "This scheme has already been added"
            end

            print "Enter another scheme? "
            ask_user_if_would_like_to_add_another_scheme = gets
            if !(ask_user_if_would_like_to_add_another_scheme.chop == "Y" or ask_user_if_would_like_to_add_another_scheme.chop == "Yes")
                    add_another_scheme = false
            end
    end
    puts schemes
end 
```

# c# - 带日期选择器的淘汰赛MVC

> ID：12051600
> 
> 赞同：0
> 
> 时间：2012-08-21T09:07:55.493
> 
> 标签：c#, asp.net-mvc-3, knockout-2.0

我在我的项目中使用[Knockout MVC](http://knockoutmvc.com/)，并且在添加 datePicker 时遇到问题。

这是我的代码： **剃刀代码：**

```
@Html.Label("Date of birth: ")
@ko.Html.TextBox(m => m.DateofBirth, new{@class="date"}) 
```

**Javascript代码**

```
$('.date').datepicker({ dateFormat: "dd/mm/yy" }); 
```

没有任何变体，怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:34:40.173

尝试使用这个js

```
$('.date').val($.datepicker.formatDate('dd/mm/yy', new Date(year, month, 1))); 
```

或针对您的具体问题尝试

```
$('.date').live('mousedown', function () { $('.date').datepicker({ dateFormat: "dd/mm/yy" }); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:42:25.253

我已经为 datepicker 做了一个 KO 绑定，请看我的 Github repo

[https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

和演示：http: [//jsfiddle.net/H8xWY/2/](http://jsfiddle.net/H8xWY/2/)

# jquery - jqgrid & Lib.Web.Mvc.JQuery.JqGrid.DataAnnotations：如何隐藏列？

> ID：12051603
> 
> 赞同：0
> 
> 时间：2012-08-21T09:08:04.380
> 
> 标签：jquery, jqgrid, data-annotations, lib.web.mvc

我有这个 jqgrid

```
var grid = new JqGridHelper<VisualisationModel>(
    "gridVisualizzazioni",
    caption: null,
    dataType: JqGridDataTypes.Json,      
    methodType: JqGridMethodTypes.Post,
    pager:true,
    sortingName: "IndicatoreVisualizzazioniPk",
    sortingOrder: JqGridSortingOrders.Asc,
    url: Url.Action("LoadGrid", new {
                                      indicatorePk = Model.IndicatorePk
                                    }),
    autoWidth: true,
    viewRecords: true, 
    loadComplete:"SetCellBackColor"); 
```

在我的模型中，我创建了一些列...

尤其

```
[Required]
[JqGridColumnFormatter(JqGridColumnPredefinedFormatters.Integer)]
public int AggregazioniDatiId { get; set; } 
```

可以通过DataAnnotation隐藏jqGrid中的上述列吗？

我试过了

```
[ScaffoldColumn(false)] 
```

但是在 colModel 中，该列没有出现，然后我的 jquery 代码不起作用

```
var grid = $("#gridVisualizzazioni");
var selRowId = grid.jqGrid('getGridParam', 'selrow');
var celValue = grid.jqGrid ('getCell', selRowId, 'AggregazioniDatiId'); 
```

提前致谢。

萨拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:25:54.953

试试这个：

```
[HiddenInput(DisplayValue = false)] 
```

# c# - RavenDB 静态索引，从引用文档列表中查询

> ID：12051605
> 
> 赞同：1
> 
> 时间：2012-08-21T09:08:07.110
> 
> 标签：c#, nosql, ravendb

我有以下域：

```
class Product
{
    Guid Id { get; set; }
    string Title { get; set; }
    List<CreatorInfo> Authors { get; set; }
}

class CreatorInfo
{
    Guid Id { get; set; }
    string GuestName { get; set; }
    UserReference Person { get; set; }
}

class UserReference
{
    Guid Id { get; set; }
    string Name { get; set; }
}

class UserReference
{
    Guid Id { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
} 
```

我需要建立一个索引，我可以在其中按产品标题、创建者 guestName 和用户 firstName 和 lastName查询**产品。**单个查询可以吗？

# java - java检查第一个和最后一个字符是否大写

> ID：12051607
> 
> 赞同：1
> 
> 时间：2012-08-21T09:08:09.387
> 
> 标签：java, string, if-statement

我正在努力实现这一目标。我有一串 9char （总是一样的）。但我也知道第一个和最后一个字符总是一个 aplhabetic，它必须是。中间的其余部分是数字。如何检查。到目前为止我得到了这个逻辑，语法是我的问题

```
string samplestring;
samplestring = a1234567B
If(samplestring.length() == 9 && samplestring.substring(0,1).uppercase && samplestring.substring(8,9) && samplestring.THE REST OF THE CHAR IN THE MIDDLE ARE DIGITS)

{
 println("yes this is correct");
}

else
{
println("retype");
} 
```

请不要介意简单的英语只是想知道语法，但我希望逻辑在那里..

也可以请告诉我那些小写字母如何转换为大写字母吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T09:11:03.053

正则表达式将是合适的：

```
String s = new String("A2345678Z");
if (s.matches("[A-Z][0-9]{7}[A-Z]")))
{
} 
```

正则表达式解释：

*   `[A-Z]`表示任何大写字母
*   `[0-9]{7}`表示 7 位数字

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T09:10:55.487

```
Pattern p = Pattern.compile("^[A-Za-z]\\d+[A-Za-z]$");
Matcher m = p.match("A1234567B");
if (m.matches()) {
  //
} 
```

编辑：

如果总是有七位数字，您可以`\\d+`将`\\d{7}`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T09:15:05.677

```
String str="A12345678B";
char first = str.charAt(0);
char second = str.charAt(str.length()-1);
if(Character.isUpperCase(first)&& Character.isUpperCase(second)){
    //do something
} 
```

# android - 如何在 Android 中制作自定义共享菜单

> ID：12051608
> 
> 赞同：2
> 
> 时间：2012-08-21T09:08:09.293
> 
> 标签：android

我想在 android 中使用自定义菜单共享图像，例如来自 android market.i 的 quickpic 应用程序。我已经通过共享意图共享图像，但是，我希望使用共享选项的自定义菜单共享图像，如下面的屏幕截图：

![在此处输入图像描述](../Images/f035a115bfded423994eb74eb8ddd59b.png)

我搜索了很多次，但没有找到像屏幕截图一样制作自定义共享菜单（红色框框）

帮助我，感谢您阅读我的帖子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:34:12.750

你看过这篇博客文章吗？ [http://android-developers.blogspot.de/2012/02/share-with-intents.html](http://android-developers.blogspot.de/2012/02/share-with-intents.html) 这是目前在Android上分享内容的推荐方式。任何处理共享意图的已安装应用程序都应自动出现在列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:12:17.330

您必须使用[操作栏 Sherlock](http://actionbarsherlock.com/)。

检查上面下载的演示中的 ShareActionProviders.java 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T02:23:54.453

尝试阅读此博客文章：“创建您自己的共享应用程序”

[http://blog.sephiroth.it/2010/09/18/android-create-your-own-sharing-app/](http://blog.sephiroth.it/2010/09/18/android-create-your-own-sharing-app/)

包括一个代码片段和解释。我还没有测试过，如果你成功了请告诉我们！

享受

# ruby-on-rails - Rails form_for 选择框，显示除存储ID外的所有记录

> ID：12051611
> 
> 赞同：0
> 
> 时间：2012-08-21T09:08:16.313
> 
> 标签：ruby-on-rails, forms, drop-down-menu, dropdownbox

我有一个软件表，它有 4 个字段；id、供应商、标题和版本。我的许可证表单中需要一个下拉框，它会显示每条记录，如下所示：供应商 - 标题 - 版本，但只将所选记录的 id 保存到数据库中。我目前正在使用一个文本框，用户可以在其中输入将保存到数据库的软件的 ID。这是我目前的表格：

```
<%= form_for(@licenses) do |f| %>

<div class="well">
<%= f.label 'Software' %><br />
<%= f.text_field :software_id %>

<%= f.label 'Quantity' %><br />
<%= f.text_field :amount %>

<%= f.submit 'add'%>
</div>

<% end %> 
```

我需要将软件文本字段更改为下拉框，抱歉，如果这含糊不清，我之前与下拉框没有任何关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:19:17.567

结帐[collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)以填充下拉框

在软件模型中创建一个方法，例如

```
def title_edition
"#{self.vendor.name}- #{self.title} - #{edition}"
end
@softwares = Software.all #In controller 
```

并且在视野中

```
<%= f.collection_select :software_id ,@softwares,:id,:title_edition %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:19:33.430

你会想要[`collection_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)这样的东西：

```
f.collection_select(:software_id, Software.all, :id, :blah, :prompt => true) 
```

现在`:blah`是棘手的事情。在您的`Software`模型中，您将需要定义一个返回您想要的连接字符串的方法；我打电话给它是`:blah`为了引起你的注意，但它可以被命名为任何东西。它看起来像这样：

```
def blah
    "#{self.vendor}-#{self.title}-#{self.edition}"
end 
```

这应该像你提到的那样返回字符串，当你调用它时，`collection_select`它会像你想要的那样显示它。

# objective-c - 在标签上显示

> ID：12051612
> 
> 赞同：0
> 
> 时间：2012-08-21T09:08:26.413
> 
> 标签：objective-c

我想在标签中显示一些文本表示任何带有扩展名的源文件的名称。但是宽度是固定的，如果名称大于宽度，我希望名称显示为“Women Que...nnaire.jpg”。能不能这样显示。如果可能，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:10:48.847

在标签对象中设置以下内容：

```
adjustsFontSizeToFitWidth=NO;
lineBreakMode=NSLineBreakByTruncatingMiddle;
numberOfLines=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:17:56.857

这是你的答案；

放 ：

labell.adjustsFontSizeToFitWidth=YES;

设置文本的最小字体大小；

labell.minimumFontSize=10;// 取决于你。你想要多小的字体！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T09:20:58.800

使用此属性从标签自动调整大小 -

`sizeToFit`

# c# - 是否有库可以从 .NET 搜索 Amazon CloudSearch？

> ID：12051613
> 
> 赞同：5
> 
> 时间：2012-08-21T09:08:32.283
> 
> 标签：c#, .net, amazon-web-services, amazon-cloudsearch

有哪些库可以在 AWS 的 CloudSearch 域中执行搜索？AWS 开发工具包几乎没有搜索功能。

* * *

我想将 Amazon CloudSearch 用于一个项目，以在预先存在的数据库中搜索某些与客户相关的数据以进行计费。

我们已经在基于 Solr 的搜索服务方面拥有丰富的经验，但在这种特殊情况下，我们不想在内部托管搜索服务，并且已经拥有使用 AWS 的经验。

Amazon SDK 提供了一种不错的基于 .NET 的方法来管理搜索域。但是：显然它缺乏任何实际**搜索**事物的能力。

我发现[了一些](https://github.com/Bigjono/AWS-CloudSearch) 提供搜索 API的[尝试，但没有任何 OOTB 有效。](https://github.com/breaker05/Amazon-CloudSearch)在 .NET 中对 CloudSearch 有任何建议或经验吗？

（是的，我知道在 Web 服务调用中插入参数并处理 JSON 回复很容易；包装器/库只会更好地处理解析等混乱的细节。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T01:03:37.997

我在 github 上用 C# 写了一个库，你可以使用。 [https://github.com/martin-magakian/Amazing-Cloud-Search](https://github.com/martin-magakian/Amazing-Cloud-Search)

它“只是”一个包装器，但部分挑战是将 JSON 与您正在使用的对象（通用）相匹配。因为亚马逊云搜索总是使用字符串数组或 uint 数组，但我仍然希望我的库匹配对象属性，无论它是否是数组。

我分享我的工作并不像预期的那么容易，因此我们更多人可以使用 Amazon Cloud Search。

马丁马加基安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-30T17:46:09.047

就像[@martin-magakian 的](https://stackoverflow.com/a/12118365/1037948)v1 的 Amazing-Cloud-Search 库（顺便说一句，效果很好），您可以使用 v2 的 Comb 包装器：[https](https://github.com/BarryDahlberg/Comb) ://github.com/BarryDahlberg/Comb 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-22T20:56:16.567

据说 AWS .NET SDK 现在包括对 CloudSearch 的支持：http: [//aws.amazon.com/releasenotes/1600390926978863](http://aws.amazon.com/releasenotes/1600390926978863)

# javascript - 使用 opengraph api 列出最新操作

> ID：12051614
> 
> 赞同：0
> 
> 时间：2012-08-21T09:08:39.770
> 
> 标签：javascript, facebook, facebook-opengraph

我们正在开发一个基于开放图形 API 的应用程序。在我们的应用程序中，用户将阅读新闻，阅读 15 秒后，阅读器的墙上会出现一个动作。

我需要一种使用开放图形 API 的方法来获取最后的操作，并将其发布在读者的墙上。我需要它来让用户能够删除这些操作。我在 facebook 文档中找到了如何使用操作的`id`.

但是我找不到如何获取`ids`来自我的应用程序的最新操作。

有没有办法获取它们，或者我必须在成功发布操作后将它们存储在我的服务器上？

PS我正在使用javascript API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:31:24.437

只需向请求的 API 发出 GET 请求`/userid/app_namespace:action_name`，它将返回为该用户发布的该类型的操作。

# c++ - 分量系统向上转换的反转

> ID：12051624
> 
> 赞同：0
> 
> 时间：2012-08-21T09:09:25.060
> 
> 标签：c++, components, polymorphism, upcasting

我目前正在开发一个用 c++ 编写的基于组件的游戏引擎。所有组件都继承自组件基类。场景中的所有组件都被向上转换为组件的向量，它们可以被迭代并且`Update()`可以被调用。

我正在尝试为组件设计一个通信系统。如果我有一个名为`GetComponent<Type>()`Like Unity 的函数，我将能够从它被向上转换之前的状态返回一个组件。

所以基本上我有一个向上转换的组件，我想反转它，所以它是它的原始类，然后通过函数返回它（就像它曾经的类一样）。这可能吗？如果有可能，组件如何知道它曾经是什么类？

有没有我可以学习的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:16:48.277

我假设通过向上转换组件，您的意思是将指向它的指针（或引用）转换为指向基类的指针。在这种情况下，使用`dynamic_cast<Derived *>(pointer)`(或`dynamic_cast<Derived &>(reference)`在运行时进行安全的向下转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:45:09.320

为此，您必须在将组件添加到集合（向上转换）之前知道组件的原始类型。

所以知道这一点，它可以这样做（假设`component`是 type `Component*`）：

```
SpecificComponent* specific = dynamic_cast<SpecificComponent*>(component); 
```

并不是说 dynamic_cast 可能会失败 =>如果实际组件类型不适用，则上述内容可以设置`specific`为。`nullptr`那个，以及它比其他演员阵容慢的事实使它成为最不喜欢的 C++ 演员阵容。

也可以看一下 boost::polymorphic_downcast，功能类似。如果在 DEBUG 模式下失败，它会生成`dynamic_cast`并断言，但`static_cast`在 RELEASE 模式下会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:57:18.133

如果您有 RTTI，则可以很容易地进行映射。我建议有 2 个函数`GetComponentExact`& `GetComponentDerived`。

```
template< typename Type >
Type* GameObject::FindComponentExact( size_t a_Index )
{
    size_t found = 0;
    for( ComponentVector::iterator itrCur = m_Components.begin(), itrEnd = m_Components.end(); itrCur != itrEnd; ++itrCur )
        if( typeid( Type ) == typeid( *(*itrCur) ) && found++ == a_Index )
            return static_cast< Type* >( *itrCur );
    return NULL;
}

template< typename Type >
Type* GameObject::FindComponentDerived( size_t a_Index )
{
    size_t found = 0;
    for( ComponentVector::iterator itrCur = m_Components.begin(), itrEnd = m_Components.end(); itrCur != itrEnd; ++itrCur )
        if( dynamic_cast< Type* >( *itrCur ) && found++ == a_Index )
            return static_cast< Type* >( *itrCur );
    return NULL;
} 
```

这就是它在我的引擎中的样子，我有一个默认为 0 的索引，让我可以遍历所有实例，因为我可以拥有多个特定组件的单个实例。

# google-app-engine - 谷歌应用商店中的文本搜索

> ID：12051632
> 
> 赞同：0
> 
> 时间：2012-08-21T09:09:52.867
> 
> 标签：google-app-engine, search, google-cloud-datastore

我们的应用程序正在使用`Google App Engine`和`DataStore`用于服务器端。我们将带有名称和描述的博客模型存储在数据存储区中。

我们想为描述提供搜索功能。我们找不到正确的方法来做到这一点。

谁能指导我们正确的方法来搜索具有特定描述的博客？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:58:53.097

您需要使用[搜索服务](https://developers.google.com/appengine/docs/python/search/overview)（目前是实验性的）。

# drupal - 为 Drupal Webform 创建拆分标题

> ID：12051640
> 
> 赞同：0
> 
> 时间：2012-08-21T09:10:30.297
> 
> 标签：drupal, drupal-7, drupal-modules

我正在尝试制作一个看起来像这样的网络表单：

* * *

一些标题

一些正文内容

表格标题 1

标签 1（字段 1）

标签 2（字段 2）

标签 3（字段 3）

表格标题 2

标签 4（字段 4）

标签 5（字段 5）

* * *

所以我的问题是，我如何告诉 webform 模块我想要一个没有输入值的“Form Title 1”和“Form Title 2”？

我尝试使用分页符，但这不是我想要的，因为我试图创建一个拆分标题。

本质上它是一种形式。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:00:33.470

嗯，解决方案似乎如此明显，以至于没有人费心回复..

基本上我需要做的就是添加一个“标记”类型，然后按字面意思输入 HTML

例如表格标题

# c# - 将文件保存到位置？

> ID：12051642
> 
> 赞同：0
> 
> 时间：2012-08-21T09:10:34.900
> 
> 标签：c#, file

我正在从网站下载文件，它总是保存到我的下载文件中，有没有办法可以选择将文件保存到哪里？

```
public void myDownloadfile(string token, string fileid, string platform)
{
    Dictionary<string, string> parameters = new Dictionary<string, string>();
    parameters.Add("Token", token);
    parameters.Add("fileid", fileid);
    parameters.Add("plateform", platform);

    string url;
    url = "https://formbase.formmobi.com/dvuapi/downloadfile.aspx?" + "token=" + token + "&fileid=" + fileid + "&platform=" + platform;
    System.Diagnostics.Process.Start(url);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:13:38.407

`System.Diagnostics.Process.Start`只需在所需的 url 上打开您的默认网络浏览器。
您可以将浏览器设置为打开另存为对话框。

但更好地使用`WebClient.DownloadFile`： http: [//msdn.microsoft.com/en-us/library/ez801hhe.aspx](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx) 它接收目标文件的路径作为它的参数之一。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T09:13:56.690

由于您使用系统的标准浏览器下载文件，因此您必须在此处更改设置。

* * *

否则，您可能希望使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)该类来下载文件，因为它与

```
using System.Net;

WebClient webClient = new WebClient();
webClient.DownloadFile("http://mysite.com/myfile.txt", @"c:\myfile.txt"); 
```

（[这里](http://www.csharp-examples.net/download-files/)的例子）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:14:53.037

不要使用 Process.Start 会启动默认浏览器来下载文件，下载位置将非常依赖于用户的系统设置。使用 WebClient 来下载它，它会更容易指定一个位置。

```
 public void myDownloadfile(string token, string fileid, string platform)
    {
        Dictionary<string, string> parameters = new Dictionary<string, string>();
        parameters.Add("Token", token);
        parameters.Add("fileid", fileid);
        parameters.Add("plateform", platform);

        string url;
        url = "https://formbase.formmobi.com/dvuapi/downloadfile.aspx?" + "token=" + token + "&fileid=" + fileid + "&platform=" + platform;
        System.Net.WebClient wc = new System.Net.WebClient()
        wc.DownloadFile(url, "C:\\myFile.ext")
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:14:41.183

您可以使用 WebClient 下载数据并使用 SaveFile Dialog 设置开始的默认位置。

[http://www.techrepublic.com/blog/programming-and-development/download-files-over-the-web-with-nets-webclient-class/695](http://www.techrepublic.com/blog/programming-and-development/download-files-over-the-web-with-nets-webclient-class/695)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:16:39.550

您可以使用`HttpResponse`.

浏览链接：[提示保存对话框下载文件](http://corymathews.com/aspnetc-prompt-a-save-dialog-box-to-download-a-file/)

# php - Zend 框架中的 register_shutdown_function

> ID：12051643
> 
> 赞同：0
> 
> 时间：2012-08-21T09:10:39.717
> 
> 标签：php, zend-framework, error-handling

我试图捕捉 Zend Framework 应用程序中发生的致命错误。我试图从引导程序中调用 register_shutdown_function：

```
protected function _initErrorHandler()
{
    register_shutdown_function(array("My_ErrorHandler", 'shutdownHandler'));
} 
```

然后，在 My_ErrorHandler 中，我编写了一个函数：

```
<?php
class My_ErrorHandler
{
    static function shutdownHandler()
    {
        die('here');
    }
} 
```

这行不通。我对 set_error_handler 进行了同样的尝试，它可以工作。但是，最后一个函数无法捕获致命错误。

你是我想念的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T07:41:08.393

我设法使它工作。

事实上，它是有效的，但这不是很“友好”。die('here') 被击中，但在浏览器中显示致命错误之后。

所以我发现了致命错误，然后重定向到标准 Zend Framework 错误控制器，结果如下：

```
<?php
class My_ErrorHandler
{
    /** 
     * Catch all errors within the Applications
     * @see Bootstrap
     */ 
    static function shutdownHandler()
    {
        $e = error_get_last();
        if (!is_null($e) && $e['type'] == E_ERROR) { //fatal error

            //log
            Zend_Registry::get('log')->err($e['message']);

            //Redirect to error page
            $redirector = new Zend_Controller_Action_Helper_Redirector();
            $redirector->gotoSimple('error', 'error', null, array('error_handler' => 'fatal'));
        }
    }
} 
```

希望它会帮助别人;）

感谢@Jon、@Richard Parnaby-King 和@ficuscr 的帮助。

注意：尽量保持shutdownHandler() 尽可能轻：它被称为每个页面显示。

# c#-4.0 - Linq to Entities (EF 4.0) 并将 2 个不相关的表分组到一个聚合对象中

> ID：12051653
> 
> 赞同：0
> 
> 时间：2012-08-21T09:11:00.143
> 
> 标签：c#-4.0, entity-framework-4, linq-to-entities

我有 2 个没有外键关系的表（文档和消息），但是表消息将文档中的 id 列作为一列（糟糕的设计，我知道..）

表文档：DocId、名称

表消息：MessageId、DocId、Value

一个文档对象可以有零个或多个 Message 对象

我想编写一个返回名为 DocumentWithMessages 的聚合对象列表的查询：

```
public class DocumentWithMessages
{
Document Document {get;set;}
List<Message> Messages {get;set;}
} 
```

查询应返回所有文档（有或没有消息列表）

我开始编写这样的方法，但它给了我一个例外：

```
public ICollection<DocumentWithDocumentSplitMessages> GetSplitJobsWithMessages()
        {
            var messages = (from dm in ObjectContext.DocumentSplitMessages select dm).ToList();
            var jobs = from d in ObjectContext.Documents                       

                       let msgs = messages.Where(dm => dm.DocID == d.DocID).ToList()

                       select new DocumentWithDocumentSplitMessages()
                           {
                               Document = d,
                               DocumentSplitMessages = msgs
                           };                                    

            return jobs.ToList();
        } 
```

例外是：

System.NotSupportedException：LINQ to Entities 无法识别方法 'System.Collections.Generic.List `1[BraArkivDataModel.DocumentSplitMessage] ToList[DocumentSplitMessage](System.Collections.Generic.IEnumerable`1[BraArkivDataModel.DocumentSplitMessage])' 方法，并且此方法无法转换为存储表达式。

我该如何编写这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:39:48.297

我认为您可以使用类似于您尝试过的方法，但在 let 子句上使用*IQueryable ：*

```
var jobs = from d in ObjectContext.Documents                       

           let msgs = ObjectContext.DocumentSplitMessages.Where(dm => dm.DocID == d.DocID)

           select new DocumentWithDocumentSplitMessages()
           {
               Document = d,
               DocumentSplitMessages = msgs
           };                                    

        return jobs.ToList(); 
```

# internationalization - OpenGraph 刮板不接受语言环境

> ID：12051655
> 
> 赞同：2
> 
> 时间：2012-08-21T09:11:07.390
> 
> 标签：internationalization, locale, facebook-opengraph, scraper

我遇到了 Open Oraph 对象的国际化问题。

当我要求刮板在特定语言环境中刮我的 opengraph 对象时，对象首先在默认语言环境中刮，即不带参数 fb_locale，然后在正确的语言环境中刮，即使用 fb_locale=[LOCALE]。抓取的返回包含第一个默认语言环境 (en_US) 抓取的结果，并且该对象未在正确的语言环境中显示，无论是在慢性还是在提要中。

这是我的电话：

```
Call the scraper
POST        https://graph.facebook.com
id          http://apps.facebook.com/[APP_NAMESPACE]/?ogObjType=prize&ogObjId=1&ogObjVariant=
scrape      true
locale      de_DE 
```

然后第一次抓取由 Facebook 完成：

```
GET [GAME_HOST]?ogObjType=prize&ogObjId=1&ogObjVariant

Returns:
<html><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# [APP_NAMESPACE]: http://ogp.me/ns/fb/[APP_NAMESPACE]#">

  <meta property="og:locale" content="en_US" />
  <meta property="og:locale:alternate" content="de_DE" />
  <meta property="og:locale:alternate" content="en_US" />
  <meta property="og:locale:alternate" content="fr_FR" />
  <meta property="fb:app_id" content="[APP_ID" /> 
  <meta property="og:type"   content="[APP_NAMESPACE]:prize" /> 
  <meta property="og:url"    content="http://apps.facebook.com/[APP_NAMESPACE]/?ogObjType=prize&ogObjId=1&ogObjVariant" /> 
  <meta property="og:title" content="Golden Medal" />
  <meta property="og:description" content="A Golden Medal" />
  <meta property="og:determiner" content="the" />
  <meta property="og:image" content="[IMAGE_en_US_URL]" />
</head><body...</body></html> 
```

然后第二次抓取由 facebook 完成：

```
GET [GAME_HOST]?ogObjType=prize&ogObjId=1&ogObjVariant&fb_locale=de_DE

Returns:
<html><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# [APP_NAMESPACE]: http://ogp.me/ns/fb/[APP_NAMESPACE]#">

  <meta property="og:locale" content="de_DE" />
  <meta property="og:locale:alternate" content="de_DE" />
  <meta property="og:locale:alternate" content="en_US" />
  <meta property="og:locale:alternate" content="fr_FR" />
  <meta property="fb:app_id" content="[APP_ID]" /> 
  <meta property="og:type"   content="[APP_NAMESPACE]:prize" /> 
  <meta property="og:url"    content="http://apps.facebook.com/[APP_NAMESPACE]/?ogObjType=prize&ogObjId=1&ogObjVariant" /> 
  <meta property="og:title" content="Goldmedaille" />
  <meta property="og:description" content="Eine Goldmedaille" />
  <meta property="og:determiner" content="the" />
  <meta property="og:image" content="[IMAGE_de_DE_URL]" />
</head><body>...</body></html> 
```

刮刀返回：

```
{"url":"http:\/\/apps.facebook.com\/[APP_NAMESPACE]\/?ogObjType=prize&ogObjId=1&ogObjVariant",
"type":"[APP_NAMESPACE]:prize",
"title":"Golden Medal",
"locale":{"locale":"en_us","alternate":["de_de","en_us","fr_fr"]},
"image":[{"url":"[IMAGE_en_US_URL]"}],
"description":"A Golden Medal",
"site_name":"[APP_NAME]",
"determiner":"the",
"updated_time":"2012-08-21T08:58:57+0000",
"id":"[SOME_ID]",
"application":{"id":"[APP_ID]","name":"[APP_NAME]","url":"http:\/\/www.facebook.com\/apps\/application.php?id=[APP_ID]"}} 
```

你有什么建议，为什么对象被刮了两次，本地化的版本没有存储？

# php - 表单提交前加密密码

> ID：12051656
> 
> 赞同：0
> 
> 时间：2012-08-21T09:11:13.057
> 
> 标签：php, javascript

我们有一个简单的 HTML 页面，其中包含一个包含两个字段的表单：用户名和密码。

表单提交到 PHP 页面。

当我发布表单时，密码应该加密而不是纯文本。

如果用户输入密码为“abc”，那么在发布并获取该值后，它应该被加密。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:14:38.127

您无法加密传输密码...

除非您使用 SSL。

如果不使用 https 协议，则不会加密。

您可以加密密码以存储在服务器上。这意味着它一旦存储就无法解密，因此用户无法取回明文密码。

但是，如果有人截获传输，除非使用 SSL，否则密码将是明文。如果您使用 SSL，则需要付费才能获得 SSL 证书。

或者，您可以创建自签名 SSL 证书。然而，许多浏览器会抱怨并告诉用户这是一个不安全的站点，直到用户点击确认他们想要访问该站点，即使它是不安全的。

否则，请尝试[http://www.cacert.org/](http://www.cacert.org/)获取免费的 SSL 证书。但是免费证书通常仍然不能被浏览器很好地识别。

# django - ajax调用中的url参数冲突

> ID：12051658
> 
> 赞同：0
> 
> 时间：2012-08-21T09:11:18.470
> 
> 标签：django, url

在提交表单之前，我会根据用户的输入执行多个 ajax 请求。问题是两个 url 在我传递的参数的数量和类型上匹配，导致调用错误的视图。我的意思是说：

```
url(r'^main_Webrequests/(?P<d>\d+)/(?P<m>\d+)/(?P<y>\d+)/$', 'auth.views.get_dates', name='get_dates'), 
```

我在哪里得到输入日期和

```
url(r'^main_Webrequests/(?P<veh_id1>\d+)/(?P<veh_id2>\d+)/(?P<load_id>\d+)/$', 'auth.views.get_initialVehicles', name='initialVehicles'), 
```

我得到其他输入的地方。

使用日期（第一次调用）一切正常，但是由于当 ajax 调用获取第二个 url（第二次调用）的参数时，django 检查从第一个到最后一个的 url，它调用 get_dates 并且功能失败。有没有办法解决它，或者我的整个逻辑是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:59:56.567

您必须更改您的网址，以便它们彼此不同。现在你有两个相等的 url 模式，所以所有请求都进入第一个视图。或者您可以将逻辑划分为一个视图。例如：

```
...
perform auth.views.get_dates logic
...
if request.is_ajax():
   perform some auth.views.get_initialVehicles logic 
```

# php - html 在提交时清除占位符

> ID：12051665
> 
> 赞同：-3
> 
> 时间：2012-08-21T09:11:33.387
> 
> 标签：php, jquery, html

我正在使用 html 5 中提供的占位符属性来获得占位符效果。

```
<input id="search" class="hasPlaceholder" type="text" placeholder="Personal Trainer" 
value="" name="search"> 
```

我还添加了代码来清除提交时的占位符。

```
$(function() {
    if(!$.support.placeholder) { 
        var active = document.activeElement;
        $(':text').focus(function () {
            if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
                $(this).val('').removeClass('hasPlaceholder');
            }
        }).blur(function () {
            if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
                $(this).val($(this).attr('placeholder'));
                $(this).addClass('hasPlaceholder');
            }
        });
        $(':text').blur();
        $(active).focus();
        $('form').submit(function () {
            $(this).find('.hasPlaceholder').each(function() {

                var input = $(this);
                input.removeClass('hasPlaceholder');

                if (input.val() == input.attr('placeholder')) {
                input.removeAttr('placeholder');
                input.val("");
            } 
            });
        });
    }
}); 
```

但它仍然在提交后给出占位符值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:15:45.910

当我将您问题的最后一部分（*请建议我在哪里可以获取 excel 格式的所有职业/行业列表*）输入谷歌时，我在第 1 页上[看到了这个链接。它有一个指向这个电子表格的](http://www.bls.gov/SOC/#materials)[链接](http://www.bls.gov/soc/soc_structure_2010.xls)，其中包含确切的内容你正在寻找。我喜欢帮助人们，但说真的，先做一些研究和谷歌搜索。

```
11-0000             Management Occupations
    11-1000         Top Executives
        11-1010     Chief Executives
            11-1011 Chief Executives
        11-1020     General and Operations Managers
            11-1021 General and Operations Managers
        11-1030     Legislators
            11-1031 Legislators 
```

示例数据。

# python - 匹配正则表达式，其中要匹配的字符串是从变量构建的

> ID：12051666
> 
> 赞同：1
> 
> 时间：2012-08-21T09:11:37.280
> 
> 标签：python, regex

我有问题。我试图只匹配第二个文件。

ERIC_KM_NOW_SYSTEMIC_17001900_data.html

ERIC_KM_NOW_17001900_data.html

```
import re
viewTag = "KM_NOW"
regex = re.escape(viewTag) + r'(\d{8})' + re.escape('_data')
test = re.search(regex, "ERIC_KM_NOW_17001900_data.html")
print(test) 
```

这不正确吗？我输入“无”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:15:10.107

你忘了一个`_`之后`KM_NOW`。

（提示：`print(regex)`下次很容易看到它。;-)）

# kendo-ui - 由于客户端模板存在，在网格中插入新项目失败

> ID：12051669
> 
> 赞同：0
> 
> 时间：2012-08-21T09:12:12.510
> 
> 标签：kendo-ui

我有一个需要可编辑的 Kendo UI 网格。我还需要其中一列的客户端模板。

剑道用户界面网格中让我烦恼的部分：

```
.Columns(columns =>
    {
        columns.Bound(p => p.Author).Filterable(false).Width(100);
        columns.Bound(p => p.Name).Filterable(false).Title("Idea Name");
        columns.Bound(p => p.Description).Filterable(false);
        columns.Bound(p => p.BeginDate).Format("{0:d}");
        columns.Bound(p => p.ReleaseDate).Format("{0:d}");
        columns.Bound(p => p.NextAvailableStates).ClientTemplate
                        (
                         "#for(var i = 0; i < NextAvailableStates.length; i++) {" +
                         "# <li>" +
                         "<a href=/Idea/NextState?state=#=NextAvailableStates[i].ID#" +                                                "> #=NextAvailableStates[i].StepName # </a>" +
                         "</li> #" +
                         "} #"
                         )
                 .Title("Actions").IncludeInMenu(false).Visible(true)
                 .Sortable(false).Filterable(false);

    }) 
```

我的控制器：

```
 public partial class IdeaController : Controller
    {

        private StateMachineHelper helper = new StateMachineHelper();

        public ActionResult Index(int? state)
        {   //must ad to Model the next available states
            var model = new List<Idea>();
            model.AddRange(helper.GetIdeasByState(helper.GetStateByID(state)));
            foreach (var item in model)
            {
               item.NextAvailableStates = helper.GetNextStates(helper.GetStateMachineInstancesByOrderID(item.ID));
            }
            return View(model);
        }

        public ActionResult NextState()
        {
            return View();
        }

        public ActionResult Read([DataSourceRequest]DataSourceRequest request, DateTime start, DateTime end)
        {
            var ideas = helper.GetIdeasBetweenDates(start, end);
            DataSourceResult result = ideas.ToDataSourceResult(request);
            return Json(result);
        }

        [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Create([DataSourceRequest] DataSourceRequest request, Idea product)
        {
            if (product != null && ModelState.IsValid)
            {

                var helper = new StateMachineHelper();
                var machine = new StateMachineInstance() { 
                    ParentID = 0,
                    //1 -> machineID
                    CurrentStateID = helper.GetFirstStateOfMachine(1).ID,
                    MachineID =1,
                    ParentStateID =0,
                    //OrderType: idea/command 
                    OrderType = "Idea"
                };
                helper.AddNewOrder(product, machine);
                product.NextAvailableStates = helper.GetNextStates(machine);

            }
            return Json(new[] { product }.ToDataSourceResult(request, ModelState));
        }
    } 
```

```
public Idea()
    {
        this.StateMachineInstances = new HashSet<StateMachineInstance>();
    }
    [ScaffoldColumn(false)]
    [DataMember]
    public int ID { get; set; }
    [Required]
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string Description { get; set; }
    [DataMember]
    [Required]
    public string Author { get; set; }
    [DataMember]
    public System.DateTime BeginDate { get; set; }
    [DataMember]
    public Nullable<System.DateTime> ReleaseDate { get; set; }
    [DataMember]

    public List<State> NextAvailableStates
    {
        get
        {
            return nextAvailableStates;
        }
        set
        {
            nextAvailableStates = value;
        }
    }

    private List<State> nextAvailableStates = new List<State>();

    public virtual ICollection<StateMachineInstance> StateMachineInstances { get; set; }

} 
```

网格渲染得很好，每一列都填充了正确的信息。当我需要向网格中添加新项目时，就会出现问题。弹出窗口没有出现，我得到`Uncaught ReferenceError: NextAvailableStates is not defined`. 这实际上是有道理的，因为网格会在新项目返回之前尝试绘制。

我的问题：有没有办法在使用自定义客户端模板时实现新项目的插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:05:02.993

You can try modifying your client template to check for the existence of `NextAvailableStates` before using them:

```
 "# if (NextAvailableStates) {" +
 " for(var i = 0; i < NextAvailableStates.length; i++) {" +
    "# <li>" +
     "<a href=/Idea/NextState?state=#=NextAvailableStates[i].ID#" +                                                 "> #=NextAvailableStates[i].StepName # </a>" +
    "</li> #" +
 " } " + 
 "} #" 
```

# python - 在 Python 中使用“从复制导入复制”语句是否安全？

> ID：12051670
> 
> 赞同：4
> 
> 时间：2012-08-21T09:12:13.243
> 
> 标签：python, python-import

Python 有复杂的命名空间和模块概念，所以我对此不确定。通常 python`module`和从它导入的东西有不同的名称，或者只导入模块并且它的内容由完全限定名称使用：

```
import copy # will use copy.copy
from time import localtime # "localtime" has different name from "time". 
```

但是，如果模块与我从中导入的东西具有相同的名称怎么办？例如：

```
from copy import copy
copy( "something" ) 
```

安全吗？也许这是一些我看不到的复杂后果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:25:24.620

来自 PEP8（[http://www.python.org/dev/peps/pep-0008/#imports](http://www.python.org/dev/peps/pep-0008/#imports)）：

从包含类的模块中导入类时，通常可以拼写为：

```
from myclass import MyClass
from foo.bar.yourclass import YourClass 
```

如果此拼写导致本地名称冲突，则拼写它们

```
import myclass
import foo.bar.yourclass 
```

并使用“myclass.MyClass”和“foo.bar.yourclass.YourClass”。

# android - 在光标android里面写

> ID：12051678
> 
> 赞同：5
> 
> 时间：2012-08-21T09:12:33.527
> 
> 标签：android, android-cursor

在阅读`Cursor` [此处](http://developer.android.com/intl/zh-CN/reference/android/database/Cursor.html)的文档时，我读到游标提供了读/写访问权限。我已经浏览了 API 方法，`Cursor`但没有可用于写入`Cursor`. 如果您能给我提供代码片段，那将是非常有帮助的。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:16:19.277

我认为这是文档中的一个错误。您说得对，没有任何`Cursor`方法可以修改基础数据。

如果您在使用 a 迭代数据时尝试修改基础数据（例如，通过执行 SQL 语句）`Cursor`，就会发生不好的事情。如果您需要进行更改，您应该在使用 迭代时单独记录需要更改的内容`Cursor`，然后在`Cursor`安全关闭后单独应用这些更改。

# objective-c - NSString, NSArray 方法中的内存泄漏

> ID：12051679
> 
> 赞同：0
> 
> 时间：2012-08-21T09:12:33.790
> 
> 标签：objective-c, cocoa-touch, memory-leaks

每次我调用这个方法 2`NSString`和 1`NSMutableArray`对象泄漏，这很恶心，因为我在我的应用程序中经常使用它。

这是方法：

```
+ (NSString *)queryStringFromParameters:(NSDictionary *)parameters {
    NSMutableArray __block *entries = [[NSMutableArray alloc] init];

    [parameters enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) {
        NSString *entry = [NSString stringWithFormat:@"%@=%@", [key pcen], [obj pcen]];
        [entries addObject:entry];
    }];
    return [entries componentsJoinedByString:@"&"];
} 
```

这是`[pcen]`方法

```
- (NSString *)pcen {
    CFStringRef string = CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                 (CFStringRef)self,
                                                                 NULL,
                                                                 CFSTR("!*'();:@&=+$,/?%#[]"),
                                                                 kCFStringEncodingUTF8);
    return [(NSString *)string autorelease];
} 
```

它们在同一个文件中，我的项目是 ARC，但对于这个文件，我未选中 ARC。为什么每次我尝试使用它时都会发生这种泄漏？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:19:32.830

您不释放`entries`阵列。

顺便说一句，`__block`这里不需要修饰符，因为您不会在块内修改该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:21:36.913

您在 queryStringFromParameters: 方法中分配/初始化 NSArray。您返回的数组确实是一个自动释放的对象（[entries componentsJoinedByString:@"&"]），但您永远不会释放条目数组。

你可以换行

```
NSMutableArray __block *entries = [[NSMutableArray alloc] init]; 
```

经过

```
NSMutableArray __block *entries = [NSMutableArray array]; 
```

解决问题。字符串泄漏是因为它们保存在泄漏的 NSArray 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:25:04.760

在您的 queryStringFromParameters 方法中，我认为不需要分配条目。只需使用自动引用数组

```
 NSMutableArray *entries = [NSMutableArray array]; 
```

在第二种方法中，您使用了 CFURLCreateStringByAddingPercentEscapes，它在您传递 (CFStringRef)self 时具有第二个参数，但这应该是 OriginalString - 要复制的 CFString 对象。

CFURLCreateStringByAddingPercentEscapes 的示例如下：

```
CFStringRef originalURLString = CFSTR("http://online.store.com/storefront/?request=get-document&doi=10.1175%2F1520-0426(2005)014%3C1157:DODADSS%3E2.0.CO%3B2");

CFStringRef preprocessedString = CFURLCreateStringByReplacingPercentEscapesUsingEncoding(kCFAllocatorDefault, originalURLString, CFSTR(""), kCFStringEncodingUTF8); 
```

也像@Martin R所说的那样删除__block

# iphone - 如何通过用户在 AppStore 中给出的评论解锁 iPhone 应用程序中的功能

> ID：12051683
> 
> 赞同：-1
> 
> 时间：2012-08-21T09:12:42.950
> 
> 标签：iphone, app-store, review

我为 GMAT 考试开发了一个应用程序，我的第一篇试卷被锁定了。我想在用户`review`为我的应用程序提供`appstore`. 建议我任何教程来做到这一点..？当用户点击纸张时，它应该要求给一个`review`..如果他/她给`review`我想解锁纸张。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:20:21.833

无法检测到这一点，因为您不知道用户是谁，因此无法访问。因此，您将无法检查用户是否查看了您的应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:42:24.387

这是一个涵盖用户应用评级的博客。[http://iostipsntricks.wordpress.com/2011/05/10/how-to-get-people-to-rate-your-ios-app/](http://iostipsntricks.wordpress.com/2011/05/10/how-to-get-people-to-rate-your-ios-app/)

他提供了 Appirater 的链接，这是一个免费的 API 来处理应用评级等。

另外，看看这个帖子

[来自 IOS 应用程序的评分和评论](https://stackoverflow.com/questions/4784248/rating-and-reviews-from-within-an-ios-app)

从那里您可以添加自己的方法来解锁论文。

# sql - 用于从表中选择数据的 Sql 查询

> ID：12051687
> 
> 赞同：0
> 
> 时间：2012-08-21T09:12:58.687
> 
> 标签：sql, ms-access

我正在做一个检查结直肠癌的项目。我有一些数据要使用 Sql 查询进行过滤。问题是一些实验失败了，如果第二次或第三次尝试这个实验，一些样本位于另一个文件夹中，用 _2 或 _3 指向。

我的数据如下所示：

![在此处输入图像描述](../Images/4b6606b22752130f86723b98d63e3c5c.png)

所以我想检查 Sentrix_ID 是否存在超过 1 次，如果这样的话，查询应该采用最新版本 _2 或 _3 等等。是否有任何查询可以为我做到这一点。

和 raw_data：

```
ID  Sample_Name Sample_Code Sample  Sentrix_ID  NorTum  Pool_ID Sample_Group    Sentrix_Position    Folderdate  opmerkingen
1835    99-02872T2  99-02872T2  99-02872    1495455 T2  GS0006564-OPA   HNPCC_UV    R001_C010   Exp060501   MLH1-UV
1836    97-5332T1   97-5332T1   97-5332 1495455 T1  GS0006564-OPA   MUTYH   R001_C011   Exp060501   1105delC_G382D
1827    R02-81709N  R02-81709N  R02-81709   1495455 N   GS0006563-OPA   HNPCC_UV    R001_C002   Exp060501   MSH2
492 t03-32120 N t03-32120 N t03-32120   1495455_2   N   GS0006563-OPA   TEM_TME_LOH R004_C005   Exp060920   
484 t02-27628 N t02-27628 N t02-27628   1495455_2   N   GS0006563-OPA   TEM_TME_LOH R004_C004   Exp060920   
478 t03-06297 B2    t03-06297 B2    t03-06297   1495455_2   B2  GS0006563-OPA   TEM_TME_LOH R006_C003   Exp060920   
479 t03-06297 B3    t03-06297 B3    t03-06297   1495455_2   B3  GS0006563-OPA   TEM_TME_LOH R007_C003   Exp060920 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:18:07.223

```
SELECT TOP 1 * FROM [YourTable] WHERE [Sentrix_ID] LIKE '<value>%' ORDER BY [Sentrix_ID] DESC 
```

这对你的问题有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:57:30.147

```
SELECT * 
FROM (
    SELECT count(Sentrix_ID) AS senId 
    FROM tableName 
    GROUP BY Sentrix_ID
) AS m  
WHERE senId = 1; 
```

如果 Sentrix_ID 存在多于 1 个，则此查询将给出最新版本，但在上述问题中，它将向您显示空表，因为 Sentrix_id(1495455 & 1495455_2) 已重复多次。因此，如果您将 _3 作为表中的一项，则意味着它将提供 _3 数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T15:46:28.270

所以你想将 sentrix_id 列中的值解析为前缀和后缀？您可以使用 instr() 函数来识别下划线的位置（如果有），除非您知道前缀的长度始终相同。

尝试类似的东西

```
select *, 
left(sentrix_id,8) as prefix,
iif(len(sentrix_id) = 8 ,"",mid(sentrix_id,10)) as suffix
from table 
```

如果您使用等效的 sql 创建一个新查询，您应该会在表中看到另外两行，一行用于 ID，另一行用于版本后缀。

然后，在第二个新查询中使用这些查询结果，您可以按前缀分组并返回最大值（后缀）。

# firefox - 使用 -ms-filter 时 LESS 的转义语法：“codeNeedsVar”；

> ID：12051692
> 
> 赞同：0
> 
> 时间：2012-08-21T09:13:31.743
> 
> 标签：firefox, explorer, favorites

我需要能够减少变量

```
/* Opacity */
.opacity(@opacity: 0.35){
    -moz-opacity: @opacity;
    -khtml-opacity: @opacity;
    -webkit-opacity: @opacity;
    opacity: @opacity;
    @ieOpacity: @opacity * 100;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=@ieOpacity)";
    filter: ~"alpha(opacity=@ieOpacity)";
} 
```

完成此操作后，.css 文件中的代码将如下所示`(Opacity=@ieOpacity)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:13:31.743

答案很简单，添加`@{var}`以便较少知道它是一个变量而不是文本

```
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=@{ieOpacity})"; 
```

# c++ - 为模板函数专门化一个模板类

> ID：12051697
> 
> 赞同：0
> 
> 时间：2012-08-21T09:13:39.623
> 
> 标签：c++, templates

我有两个模板类，比如

```
template <class T>
class MyClass1{};

template <class T>
class MyClass2{}; 
```

我有一个使用它们作为参数的模板函数。这些类专用于 std::string：

```
template <template class<std::string> T> myMethod(T<std::string>& arg){} 
```

我想使用 myMethod(objectOfMyClass1) 和 myMethod(objectOfMyClass2)，但代码无法编译。如何为模板函数专门化模板类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:25:01.123

首先，如果您的方法不带任何参数，您将无法随意调用它。

其次，`MyClass1`and`MyClass2`不是类而是类模板——因此你不能拥有`objectOfMyClass1`and `objectOfMyClass2`。

如果您的函数专门针对任何类型的参数表现形式`SomeClassTemplate<std::string>`，那么您所追求的是部分函数模板专业化，这在 C++ 中是不允许的。您将不得不使用部分专业化的类：

```
template <class T>
struct MyMethodCall;

template <template <typename> class T>
struct MyMethodCall<T<std::string> > {
  static void call(T<std::string> object) {
    ...
  }
};

template <class T>
void myMethod(T & object) {
  MyMethodCall<T>::call(object);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:24:59.143

这是一个可编译的例子

```
template <class T>
class MyClass1{};

template <class T>
class MyClass2{};

template <template <typename> class T> 
void myMethod(T<std::string>& arg){}

int main()
{
MyClass1<std::string> c1;
myMethod(c1);
MyClass1<std::string> c2;
myMethod(c2);
} 
```

# php - 无法提交联系我们（magento 1.7）

> ID：12051698
> 
> 赞同：0
> 
> 时间：2012-08-21T09:13:41.073
> 
> 标签：php, magento, contact-form, magento-1.7

我无法发送电子邮件联系我们 magento 1.7 并且我总是有以下错误知道我有可用的 hideit 输入

```
 <div class="buttons-set">
    <p class="required"><?php echo Mage::helper('contacts')->__('* Required Fields') ?></p>
    <input type="text" name="hideit" id="hideit" value="" style="display:none !important;" />
    <button type="submit" title="<?php echo Mage::helper('contacts')->__('Submit') ?>"           class="button"><label><?php echo Mage::helper('contacts')->__('Submit') ?></label></button>
     </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T03:13:48.583

这个问题的大多数答案都涉及涉及黑客的回答。由于我们希望我们的网站易于升级，因此我们试图远离黑客攻击。在版本 1.6.2 上，我们的答案是从配置中的电子邮件地址字段中删除第二个电子邮件地址以获取“联系我们”详细信息，然后错误就消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T09:20:45.067

您必须对联系人和商店邮件地址使用完全相同的字符串。在将所有内容都放入潜艇后，我混合了大写字母和潜艇。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:29:13.767

如果您添加了“hideit”输入，请确保已将其注释掉：

```
if (Zend_Validate::is(trim($post[’hideit’]), ‘NotEmpty’)) { 
$error = true; 
} 
```

在 app/code/core/Mage/contacts/controllers/indexController.php 里面

并确保您编辑正确的 form.phtml！

根据： http: [//www.magentocommerce.com/boards/viewthread/84843/](http://www.magentocommerce.com/boards/viewthread/84843/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T06:59:31.400

“Ethan”描述的解决方案是最好的一个。您必须检查您为联系信息所做的后端配置。您还应该检查使用的电子邮件地址。

1）进入系统->配置->常规->“发送电子邮件至”下的联系人填写电子邮件，如xyz@example.com。

2）请参阅电子邮件发件人示例“自定义电子邮件 2”。

3）现在转到系统->配置->存储电子邮件地址。然后在“自定义email2”下填写相同的电子邮件地址，即“xyz@example.com”。

如果您使用的是 Localhost，最后最重要的事情。您必须安装 SMTP 服务器才能检查收到的电子邮件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-28T06:55:43.943

我从 Magento 1.9 获得解决方案

1.  检查您是否可能错过了启用电子邮件发送功能的配置设置。

2.尝试将“发送电子邮件至”更改为与您的 Magento 网站不具有相同电子邮件域的其他电子邮件。如果“发送自”电子邮件与“发送至”电子邮件来自同一主机提供商，则某些主机可能会产生问题。

3.为联系人表单交易电子邮件创建新的交易电子邮件您的magento站点域，并将其命名为不同于默认的名称。转到系统->配置->常规->“发送电子邮件至”下的联系人填写电子邮件，如xyz@domain.com .

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-09T15:08:04.657

这是一个非常古老的问题，但我遇到了同样的问题。解决此问题的方法之一是转到配置 > 高级 > 系统 > 邮件发送设置

将禁用电子邮件通信设置为否

# c++ - Boost Python 和 C++ 头文件

> ID：12051703
> 
> 赞同：3
> 
> 时间：2012-08-21T09:13:54.677
> 
> 标签：c++, python, boost, boost-python

我想为我的 提供`python`接口`C++ shared library`，我打算使用`Boost::python`相同的接口，我的基于代码的代码非常庞大，并且`C++`分布在多个文件中。但是所有示例都讨论了在文件中添加结构以及如何处理头文件。并且我可以基于相同的代码，以便我可以构建共享库和`headers``implementation``python::boost``python::boost``cpp``C++``python modules`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-21T09:56:13.407

以下是有关如何使用 Boost.Python 的指南的链接：http: [//www.boost.org/doc/libs/1_51_0/libs/python/doc/tutorial/doc/html/python/exposing.html](http://www.boost.org/doc/libs/1_51_0/libs/python/doc/tutorial/doc/html/python/exposing.html)

使用标头/实现结构的示例：

```
//hpp
#include <boost/python.hpp>
using namespace boost::python;

struct World
{
    void set(std::string msg);
    std::string greet();
    std::string msg;
};

BOOST_PYTHON_MODULE(hello)
{
    class_<World>("World")
        .def("greet", &World::greet)
        .def("set", &World::set)
    ;
}

//cpp

void World::set(std::string msg) { this->msg = msg; }
std::string greet() { return this->msg; } 
```

# c# - 移植应用程序时有效利用 64 位架构

> ID：12051707
> 
> 赞同：3
> 
> 时间：2012-08-21T09:14:07.750
> 
> 标签：c#, .net, performance, 64-bit

我正在考虑将处理器密集型 32 位 .NET 4 (C#) 控制台应用程序移植到 64 位。它是一种运行大约五个小时的并行数字运算算法。

我对性能优势有所了解，但不确定如何更改代码以充分利用 64 位架构。例如，我是否应该考虑将所有 Int32 类型更改为 Int64 等？

在哪里可以找到一些全面的资源来了解移植到 x64 时的优化注意事项？搜索主要是关于 x64 架构的一般信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:31:29.820

你的努力会得到回报的希望很小。x64 内核的运行速度与 x86 内核相同，时钟速度相同，并且受硅物理特性的限制。x64 内核的一个明显优势是它可以同时处理 64 位，是 x86 内核数量的两倍。但在实践中，很少有现实世界的问题实际上需要该范围。大多数整数问题在 +/- 20 亿范围内都能正常工作。从您的代码中很容易看出，如果您的最内层循环中有很多*long*而不是*int*变量，那么您将领先。

x64 内核的一个显着*缺点*是它消耗可用缓存的速度要快得多。这也受到硅的限制，芯片上只能容纳这么多内存。任何指针都是大小的两倍，8 字节而不是 32 位模式下的 4 字节。指针用于任何对象引用。缓存在现代内核上*非常*重要，与内核的速度相比，内存总线非常缓慢。x64 有 8 个以上的 cpu 寄存器（r8 到 r15）在一定程度上抵消了这个缺点。

最终效果是 32 位代码的执行速度通常比 64 位代码*快一点。*只有当您的程序因不得不将其处理的数据塞入 2 GB 的地址空间而陷入困境时，您才能从 64 位代码中获益。换句话说，必须使用文件或内存映射文件来避免内存不足。如果您的应用程序受到计算限制，如您的问题中所建议的，那么您不太可能领先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:21:57.583

对于纯 .NET 代码，您似乎无法优化自己。编译到任何 cpu，IL 编译器将针对 x64 进行优化，例如额外的内存空间和更多的寄存器。

请参阅[如何为 64 位编译我的应用程序使其更快或更好？](https://stackoverflow.com/questions/498369/how-can-compiling-my-application-for-64-bit-make-it-faster-or-better?rq=1)类似的讨论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:28:18.243

将 32 位类型更改为 64 位类型本身并没有帮助。32 位操作都与 x64 上的 64 位操作一样快或更快。不同的是，64 位操作比 32 位模式更快。因此，例如，如果您使用一个 int32 数组，并且您也可以使用一个*长度为一半*的 int64 数组，那么它可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T10:13:31.467

您没有提到您的应用程序是否也是内存密集型的。但是，请注意，在进行此转换时，您的应用程序内存占用量预计会显着增长。由于所有引用类型指针现在占用了两倍的空间。换句话说，虽然你有一个有效的无限地址空间，但有效的内存利用率仍然受到 RAM 的限制。

# sql - 我们可以在 DFT 中的 Source 查询中访问用户变量吗？

> ID：12051708
> 
> 赞同：1
> 
> 时间：2012-08-21T09:14:09.483
> 
> 标签：sql, ssis, dft, user-variables

我正在优化数据流任务。我 Ado.Net 源触发如下查询。

```
Select Emp_id, EmpName, Salary from Employee. 
```

在源之后，我有一个派生列转换，其中添加了一个具有用户变量值的派生列`@[User::TestVariable].`

现在我想这个派生的列转换至少需要一些时间，所以我想知道是否可以通过在源代码中执行以下操作来节省时间。

```
Select Emp_id, EmpName, Salary, DerivColumn as @[User::TestVariable]
 from Employee 
```

有可能做这样的事情吗？如果是的话怎么办？

![在此处输入图像描述](../Images/f17d0e1e190e093da201ccb34c1528e2.png)

以上是 DFT，我正在研究如何找出哪个组件花费了多少时间，所以我可以寻求优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T13:58:01.937

您可以在 ADO.NET Source 中使用该变量。

1.在DFT任务的属性窗口中点击表达式属性，选择ADO.NET Source SQL Command

![在此处输入图像描述](../Images/28a96db8d73609fec248beeb7232302d.png)

2.  在表达式中写下你的 SQL 查询

    ```
    Select LoginId,JobTitle," + (DT_WSTR,10) @[User::TestVariable] + " as DerivedColumn
    from HumanResources.Employee" 
    ```

![在此处输入图像描述](../Images/197ff1e3c260dc97e16372cab95f4d2e.png)

我认为您的派生列不会增加任何开销，因为它是一个非阻塞组件（bt 有一些例外）

为了找到单个组件的速度，

1.计算包的整体执行时间，您可以在执行结果选项卡中找到它

```
 Overall Execution Speed = Source Speed + Transformation Speed 
```

2.删除派生组件并将源连接到行转换。现在再次查看执行时间。这将为您提供源速度。

3.  ```
    Overall Execution Speed - Source Speed = Transformation Speed 
    ```

SSIS是一个内存管道，所以它的所有转换都发生在内存中。它严重依赖缓冲区。在你的情况下，SSIS缓冲区有196,602行。这个值由2个属性控制 `DefaultMaxBufferRows`，`DefaultMaxBufferSize`MaximumBufferSize是100MB。现在你需要计算通过计算表中的列大小来估计行大小。假设添加数据类型长度约为 40 个字节，那么 196,602 行的字节数为

```
 196,602*40=7864080 ~ 7MB 
```

这小于 DefaultMaxBufferSize 10MB。您可以尝试增加 DefaultMaxBufferRows 以提高速度。但是在得出结论之前，您需要再次进行所有性能测试。我建议您阅读[这篇](http://msdn.microsoft.com/en-us/library/cc966529.aspx)文章以全面了解 SSIS 性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:39:42.650

因此，您希望向数据集中添加一个具有固定值（包含在 @[User::TestVariable] 上）的新列，以便稍后在目标上插入，对吧？不，你不能做你想做的事情，因为范围是数据库（你执行查询的地方）并且变量在包上。

你确定这个派生列操作需要那么长时间吗？它不应该。如果是，您可以使用执行 SQL 任务将数据库上的这个值插入到临时表中，然后在查询中使用它

```
declare @aux int
select @aux = your_config_column from your_temp_table

Select Emp_id, EmpName, Salary, @aux as DerivColumn 
from Employee 
```

这是一种混乱的解决方案，但如果派生列真的花了那么长时间，这是值得的

# iphone - 如何使用 uiactionsheet 删除 tablerow？

> ID：12051709
> 
> 赞同：0
> 
> 时间：2012-08-21T09:14:09.543
> 
> 标签：iphone, ios, uialertview, uiactionsheet

我有一个项目的表格视图，当我单击一行时，我使用带有 3 个按钮的 uiactionsheet：编辑、删除和取消。当我单击按钮编辑时，我将打开一个模态视图，那么我该怎么做呢？删除 tablerow 的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:30:01.070

如果要从 a 中删除一行`UITableView`，请使用名为 的方法`deleteRowsAtIndexPaths:withRowAnimation:`。[您可以在UITableView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)页面上找到所有详细信息。

另外不要忘记从您的模型中删除相应的项目！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:45:22.687

UIActionSheet 有一个委托属性。将 UIActionSheetDelegate 协议添加到您的视图控制器，并在显示之前将自己设置为操作表的委托。

操作表将调用

```
– actionSheet:clickedButtonAtIndex: 
```

当用户选择和操作时，它是委托。在你的实现中，你可以做你想做的事，比如删除 fguchelaar 描述的行。此方法不直接知道调用了操作表的哪一行，因此您可以继承 UIActionSheet 以便它可以存储 indexPath、将 indexPath 存储在 viewController 中，或者以其他方式传递信息。

# asp.net - 为什么应用程序根“~”在 ASP.NET 中解析为站点根“/”？

> ID：12051711
> 
> 赞同：0
> 
> 时间：2012-08-21T09:14:17.937
> 
> 标签：asp.net, iis, relative-path, visual-studio-2012, virtual-path

我有一个在 Visual Studio 2012 下开发的 ASP.NET Web 表单站点。有一个带有导航栏和指向 CSS 表的链接的母版页。Bot 使用[应用程序根](http://msdn.microsoft.com/en-us/library/ms178116.aspx)操作符“~”指定

```
<asp:PlaceHolder runat="server">
    <%: Styles.Render("~/Content/themes/base/css", "~/Content/css") %>
</asp:PlaceHolder>
...
<li><a runat="server" href="~/Forms/SelectResults.aspx">Generate Table</a></li>
<li><a runat="server" href="~/BrowseDB.aspx">Browse DB</a></li> 
```

浏览页面时，`http://localhost/Forms/SelectResults.aspx`我发现“~”在这些情况下的解析方式不同：

```
<link href="/Content/site.css" rel="stylesheet" type="text/css" />
...
<li><a href="SelectResults.aspx">Generate Table</a></li>
<li><a href="../BrowseDB.aspx">Browse DB</a></li> 
```

所以 CSS 的路径是绝对的，其他页面的路径是相对的。在本地主机上运行时，一切正常。但是在将我的站点部署到服务器后，它有一个地址`http://MyDomain/MySite/`，因此它不在域根目录中。并且由于绝对路径，无法加载任何 CSS 文件！导航工作正常，但所有样式都被破坏了。

为什么“~”运算符在`Styles.Render`指令中不起作用？这两个代码片段都是由标准的 ASP.NET 网站模板生成的，我没有修改任何内容。

网站是在 Visual Studio 2012、.NET Framework 4.5 下开发的。我的服务器规格是：

*   视窗 7 x64
*   IIS 7.5
*   网站应用程序池框架 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T11:26:01.423

问题是由我们的代理服务器引起的，它实际上是转发`http://MyDomain/MySite/`到`http://InternalDomain:InternalPort/`. 对于该内部域应用程序根目录实际上是一个站点根目录。

# google-drive-api - 列出根目录中的文件

> ID：12051712
> 
> 赞同：1
> 
> 时间：2012-08-21T09:14:19.123
> 
> 标签：google-drive-api, google-docs-api

我正在尝试通过 Google Documents API v3.0 仅列出根目录中的条目。一些用户拥有数千个文件，因此通过移动数据连接请求完整的提要花费的时间太长。

向文档列表请求添加“q='root' in parents”查询仅返回一个文件，尽管我的根目录中有很多文件。这发生在我们的 REST 应用程序中，并且可以使用 OAuth2 操场进行复制。我还尝试了各种 URL 编码：

```
https://docs.google.com/feeds/default/private/full?q='root'%20in%20parents
https://docs.google.com/feeds/default/private/full?q=%27root%27+in+parents
https://docs.google.com/feeds/default/private/full?q=%27root%20%20in%20parents 
```

这是 OAuth2 游乐场的输出：

要求：

```
GET /feeds/default/private/full?q='root'%20in%20parents HTTP/1.1
Host: docs.google.com
Gdata-version: 3.0
Content-length: 0
Authorization: OAuth (removed) 
```

回复：

```
HTTP/1.1 200 
Gdata-version: 3.0
Content-length: 4997
Via: HTTP/1.1 GWA
Content-location: https://docs.google.com/feeds/default/private/full?q='root'%20in%20parents
X-content-type-options: nosniff
Etag: W/"AkAMSXcyfit7ImA9WhJWFU4."
Expires: Tue, 21 Aug 2012 08:46:29 GMT
Vary: Accept, X-GData-Authorization, GData-Version
X-google-cache-control: remote-fetch
Server: GSE
Last-modified: Tue, 21 Aug 2012 08:46:28 GMT
X-xss-protection: 1; mode=block
Cache-control: private, max-age=0, must-revalidate, no-transform
Date: Tue, 21 Aug 2012 08:46:29 GMT
X-frame-options: SAMEORIGIN
Content-type: application/atom+xml; charset=UTF-8; type=feed
-content-encoding: gzip
<?xml version='1.0' encoding='UTF-8'?><feed xmlns='http://www.w3.org/2005/Atom' xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/' xmlns:docs='http://schemas.google.com/docs/2007' xmlns:batch='http://schemas.google.com/gdata/batch' xmlns:gd='http://schemas.google.com/g/2005' gd:etag='W/&quot;AkAMSXcyfit7ImA9WhJWFU4.&quot;'><id>https://docs.google.com/feeds/default/private/full</id><updated>2012-08-21T08:46:28.996Z</updated><category scheme='http://schemas.google.com/g/2005#kind' term='http://schemas.google.com/docs/2007#item' label='item'/><title>Available Documents - brains.for.rent@gmail.com</title><link rel='alternate' type='text/html' href='https://docs.google.com'/><link rel='http://schemas.google.com/g/2005#resumable-create-media' type='application/atom+xml' href='https://docs.google.com/feeds/upload/create-session/default/private/full'/><link rel='http://schemas.google.com/docs/2007#alt-post' type='application/atom+xml' href='https://docs.google.com/feeds/upload/file/default/private/full'/><link rel='http://schemas.google.com/g/2005#feed' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full'/><link rel='http://schemas.google.com/g/2005#post' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full'/><link rel='http://schemas.google.com/g/2005#batch' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full/batch'/><link rel='self' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full?q=%27root%27+in+parents'/><author><name>brains.for.rent</name><email>brains.for.rent@gmail.com</email></author><openSearch:startIndex>1</openSearch:startIndex><entry gd:etag='&quot;WlEQVU5RRCt7ImBk&quot;'><id>https://docs.google.com/feeds/id/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw</id><published>2012-03-25T00:31:20.449Z</published><updated>2012-03-25T00:31:20.449Z</updated><app:edited xmlns:app='http://www.w3.org/2007/app'>2012-06-26T09:54:47.811Z</app:edited><category scheme='http://schemas.google.com/g/2005#kind' term='http://schemas.google.com/docs/2007#file' label='text/plain'/><category scheme='http://schemas.google.com/g/2005/labels' term='http://schemas.google.com/g/2005/labels#modified-by-me' label='modified-by-me'/><title>_bowie.txt</title><content type='text/plain' src='https://doc-14-28-docs.googleusercontent.com/docs/securesc/jop11jq8q8326onuco763m92b29jcdfk/dh4ie9qrgpm9eub14drrse8ni0fsb4ku/1345536000000/09632875278015879870/09632875278015879870/0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw?h=16653014193614665626&amp;e=download&amp;gd=true'/><link rel='http://schemas.google.com/docs/2007#parent' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full/folder%3A0B4sxUOzToIviNGNKMGZEbENRVUNrZGtNQ1ZqN3BfZw' title='conv'/><link rel='alternate' type='text/html' href='https://docs.google.com/file/d/0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw/edit'/><link rel='http://schemas.google.com/docs/2007#icon' type='image/png' href='https://ssl.gstatic.com/docs/doclist/images/icon_10_text_list.png'/><link rel='http://schemas.google.com/g/2005#resumable-edit-media' type='application/atom+xml' href='https://docs.google.com/feeds/upload/create-session/default/private/full/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw'/><link rel='http://schemas.google.com/docs/2007#alt-edit-media' type='application/atom+xml' href='https://docs.google.com/feeds/upload/file/default/private/full/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw'/><link rel='self' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw'/><link rel='edit' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/full/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw'/><link rel='edit-media' type='text/plain' href='https://docs.google.com/feeds/default/media/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw'/><author><name>brains.for.rent</name><email>brains.for.rent@gmail.com</email></author><gd:resourceId>file:0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw</gd:resourceId><docs:modifiedByMeDate>2012-03-25T00:31:20.443Z</docs:modifiedByMeDate><gd:lastModifiedBy><name>brains.for.rent</name><email>brains.for.rent@gmail.com</email></gd:lastModifiedBy><gd:quotaBytesUsed>353894</gd:quotaBytesUsed><docs:writersCanInvite value='false'/><docs:md5Checksum>d9fb3e201d3dcc724d5ed5d05cf27b98</docs:md5Checksum><docs:filename>_bowie.txt</docs:filename><docs:suggestedFilename>_bowie.txt</docs:suggestedFilename><docs:size>353894</docs:size><gd:feedLink rel='http://schemas.google.com/acl/2007#accessControlList' href='https://docs.google.com/feeds/default/private/full/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw/acl'/><gd:feedLink rel='http://schemas.google.com/docs/2007/revisions' href='https://docs.google.com/feeds/default/private/full/file%3A0B4sxUOzToIviLUJGRkJ0VkJSTktQWTNHdWVST2gtdw/revisions'/></entry></feed> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T02:36:22.757

您是否尝试返回此集合的内容？

```
https://docs.google.com/feeds/default/private/full/folder%3Aroot/content 
```

V3 DocList API 对此有这样的说法：

如果您正在寻找仅在根集合中的东西，找到它们的更简单方法是进行以下查询...

-麦克风

# oauth - 强制 facebook 连接到登录弹出窗口

> ID：12051714
> 
> 赞同：0
> 
> 时间：2012-08-21T09:14:22.993
> 
> 标签：oauth, facebook-c#-sdk

如何在没有用户单击 facebook 按钮的情况下调用 facebook 连接？

我的 Login.aspx 中有 facebook 登录按钮，而 Main.aspx 中有其他按钮，它们只是重定向到 Login.aspx。如果用户单击 Main.aspx 的按钮，我想调用 facebook 登录按钮（打开小弹出窗口 bla bla bla。）。如果我不这样做，用户必须单击 2 次才能打开 facebook 对话框弹出窗口。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T00:31:50.490

如果您使用 JavaScript... 您需要调用[FB.login](http://developers.facebook.com/docs/reference/javascript/FB.login/)，这将打开登录对话框。

希望有帮助。

# abap - SAP系统中的客户端是什么？

> ID：12051723
> 
> 赞同：9
> 
> 时间：2012-08-21T09:14:55.787
> 
> 标签：abap, netweaver

有人可以解释一下使用 ABAP 堆栈的 SAP NetWeaver 系统中的客户端是什么以及它如何在同一安装中创建逻辑分离？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-21T09:22:46.320

一个 SAP 系统可用于多个独立的公司（或公司的子公司）。客户端用于分离这些公司的数据。因此，SAP 系统中的大多数数据库表都以客户端为键。这用于例如交易数据、主数据和客户相关的定制数据。尽管如此，也有适用于所有客户端的定制（所谓的跨客户端定制）。

简而言之：客户端是大多数数据库表中的关键字段，用于分隔使用同一 SAP 系统的多个公司的数据。每家公司都有自己的客户编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-05T00:44:47.760

除了 Christian Trebing 的回答，还有一些更重要的点需要注意。

1.  用户登录客户端。每个客户端都有单独的设置用户和身份验证。

2.  一般对一个表的所有数据库操作都有“client”字段，代码不需要指定client。系统已经处理好了。

大多数标准流程（业务交易/外部通信等）已经针对客户进行了设置并以这种方式执行。

# c# - 在 Winforms 中对 WPF 文本框进行数据绑定

> ID：12051730
> 
> 赞同：0
> 
> 时间：2012-08-21T09:15:17.987
> 
> 标签：c#, .net, wpf, vb.net, winforms

我在 Winforms 项目的元素宿主内使用 WPF 文本框。

我想将此文本框数据绑定到绑定源，就像使用标准 winforms 文本框一样，如下所示：

```
 Me.tbxCorrectiveAction.DataBindings.Add("Text", bgsTasks, "CorrectiveAction", False) 
```

这是我尝试过的：

```
 Dim host As New System.Windows.Forms.Integration.ElementHost()
    Dim wpfTextBox As New System.Windows.Controls.TextBox()
    wpfTextBox.SpellCheck.IsEnabled = True

    host.Dock = DockStyle.Fill
    host.Child = wpfTextBox
    Me.Panel8.Controls.Add(host)

    Dim binCorrectiveAction As New System.Windows.Data.Binding("CorrectiveAction")
    binCorrectiveAction.Source = bgsTasks
    wpfTextBox.SetBinding(System.Windows.Controls.TextBlock.TextProperty, binCorrectiveAction) 
```

VB 或 C# 中的解决方案都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T11:42:45.477

~~试试这个：~~

**更新**。

您的代码中有错误（或者只是一个拼写错误，这会导致逻辑错误）。
您正在尝试在**TextBox控件上绑定****TextBlock** .TextProperty 。

 **应该有`TextBox.TextProperty`：

```
 var dataTable = new DataTable();

        dataTable.Columns.Add("Id", typeof(Int32));
        dataTable.Columns.Add("Name", typeof(String));

        dataTable.Rows.Add(1, "John");
        dataTable.Rows.Add(2, "Mary");
        dataTable.Rows.Add(3, "Peter");
        dataTable.Rows.Add(4, "Helen");

        var bindingSource = new BindingSource();
        bindingSource.DataSource = dataTable;

        var binding = new System.Windows.Data.Binding("Name");
        binding.Source = bindingSource;
        binding.UpdateSourceTrigger = System.Windows.Data.UpdateSourceTrigger.PropertyChanged;

        var textBox = new System.Windows.Controls.TextBox();
        textBox.SpellCheck.IsEnabled = true;
        textBox.SetBinding(System.Windows.Controls.TextBox.TextProperty, binding);

        elementHost1.Child = textBox; 
```

原因是这些依赖属性（和控件）是**不同**的，尽管它们具有相似的名称。

如果不是错字，那么我建议您在[此处](http://msdn.microsoft.com/en-us/library/ms752914.aspx)阅读有关 WPF 依赖属性机制的信息。**

# php - 通过脚本修改 Windows Azure Web 角色上的 php.ini

> ID：12051731
> 
> 赞同：1
> 
> 时间：2012-08-21T09:15:19.353
> 
> 标签：php, azure, azure-web-roles

我在 Web 角色上使用了启动脚本，通过 Windows 平台安装程序安装 PHP。一切正常，PHP 已安装并且应用程序可以运行，但是当我上传大文件时，应用程序会生成错误。我通过手动编辑 php.ini 文件并更改 upload_max_filesize 来修复它。我的问题是，如何通过添加要在安装 php 后执行的 som 脚本来自动（而不是手动）修改 php.ini 文件。我写了“AFTER”，因为这个脚本必须等到我的启动脚本完全执行并安装了 php。感谢您的帮助感谢所有建议。

更新：以下是我的 install-php.bat 文件，它位于我的 web 角色的 bin 文件夹中。我对powershell不熟悉。如何将其转换为 powershell 脚本？

```
ECHO "Starting PHP Installation" >> log.txt

md "%~dp0appdata"
cd "%~dp0appdata"
cd..

reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d "%~dp0appdata" /f

"..\MyWebpicmdline\WebPICmdLine" /Products:PHP53 /AcceptEula >>log.txt 2>>err.txt

reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d %%USERPROFILE%%\AppData\Local /f

ECHO "Completed PHP Installation" >> log.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:41:08.923

因此，我假设您有以下启动任务：

```
WebPICmdLine.exe /Products: PHP 
```

您需要编写一些脚本来更新您的 php.ini 文件并在安装 PHP 后运行它。一个可能的解决方案是使用 PowerShell 执行此操作：

```
WebPICmdLine.exe /Products: PHP
powershell -command "Set-ExecutionPolicy Unrestricted"
powershell .\UpdatePhpIni.ps1 
```

找到一个允许您更新 ini 文件的脚本（如[Edit Ini File](http://powershell.com/cs/media/p/13594.aspx)），将其添加到您的 UpdatePhpIni.ps1 文件中并添加所需的代码以修改执行时间。

请注意，我不是 PHP 专家，但如果我没记错的话，您应该在 IIS 的[FastCGI 设置](http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis/#Per-site_PHP_configuration)中进行配置（我认为这些设置优先于 php.ini）。

**更新：**这是您的脚本在 FastCGI 配置下的样子。

```
ECHO "Starting PHP Installation" >> log.txt

md "%~dp0appdata"
cd "%~dp0appdata"
cd..

reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d "%~dp0appdata" /f

"..\MyWebpicmdline\WebPICmdLine" /Products:PHP53 /AcceptEula >>log.txt 2>>err.txt

ECHO Updating activity timeout.
%windir%\system32\inetsrv\appcmd.exe set config -section:system.webServer/fastCgi "/[fullPath='%ProgramFiles(x86)%\PHP\v5.3\php-cgi.exe'].activityTimeout:800"

reg add "hku\.default\software\microsoft\windows\currentversion\explorer\user shell folders" /v "Local AppData" /t REG_EXPAND_SZ /d %%USERPROFILE%%\AppData\Local /f

ECHO "Completed PHP Installation" >> log.txt 
```

# ssas - 在计算的度量定义中切片？(MDX)

> ID：12051735
> 
> 赞同：0
> 
> 时间：2012-08-21T09:15:46.797
> 
> 标签：ssas, mdx, olap

我在维度 D 和度量 M 之间存在多对多关系。

我需要创建一个具有以下公式的通用计算度量：M/Σ(M)，其中 Σ 代表与给定维度的至少一个成员相关联的所有度量事实的总和。

对于其他（一对多）维度来说很容易，但是在多对多中获取 Σ ......好吧，如果它只是一个常规的 MDX 查询，那也很容易。我可以对一个维度的所有孩子进行切片：

```
SELECT [Measures].[M] ON 0
FROM [MyCube]
WHERE [D].[All].CHILDREN 
```

但是我如何在计算的度量中切片呢？

我*期望*工作的简化示例：

```
CREATE MEMBER [Measures].[Calc] AS
  [Measures].[M] / ( DRILLUPLEVEL( AXIS( 1 ).ITEM( 0 ).HIERARCHY.MEMBERS ).ITEM( 0 ), [Measures].[M] )
  WHERE DRILLUPLEVEL( AXIS( 1 ).ITEM( 0 ).HIERARCHY.MEMBERS ).ITEM( 0 ).CHILDREN 
```

但当然，MDX 不支持定义中的`WHERE`子句`MEMBER`。

请告诉我如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T00:40:41.547

使用[聚合](http://www.iccube.com/support/documentation/mdx/Aggregate.html)方法怎么样？

```
CREATE MEMBER [Measures].[Calc] AS
  [Measures].[M] / Aggregate( DRILLUPLEVEL( AXIS( 1 ).ITEM( 0 ).HIERARCHY.MEMBERS ).ITEM( 0 ).CHILDREN, [Measures].[M] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:57:26.880

最后，这就是我得到的：

```
CREATE HIDDEN [Total M] =
  AGGREGATE(
    DESCENDANTS(
      AXIS( 1 ).ITEM( 0 ).DIMENSION.LEVELS( 0 ).ITEM( 0 ),
      AXIS( 1 ).ITEM( 0 ).DIMENSION.LEVELS.COUNT
    ) - AXIS( 1 ).ITEM( 0 ).DIMENSION.LEVELS( 0 ).ITEM( 0 ),
    [Measures].[M]
  ); 
```

简而言之，我从维度成员的集合中减去了根成员。对剩余集合进行聚合可以在多对多关系中提供适当的值。我现在可以在其他度量中使用这个度量来计算 M/Σ(M) 等。

# c# - WinForm加载后截图

> ID：12051737
> 
> 赞同：1
> 
> 时间：2012-08-21T09:16:02.520
> 
> 标签：c#, arguments, screenshot

我有一个屏幕截图应用程序，用户可以在其中传递命令行参数，并根据这些参数确定表单的行为。

我试图在表单加载后截取屏幕截图，但是我有功能在`InitializeComponent();`. 像这样——

```
if (counts > 0)
        {
            generateScreenshotButton_Click(null, null);

            button2_Click(null, null);
        } 
```

我的问题是这些函数在表单加载**之前触发。**因此屏幕截图是空白的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:19:43.260

您是否尝试过使用 MainForm[`Loaded`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件？
在那个事件处理程序中做你的事情吗？:)

或者也许使用[`Shown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)事件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:22:48.690

在您的文件中添加`Load`事件。`Form.cs`

`InitializeComponent`和之间有区别`Form Load`。请参阅[InitializeComponent() 做什么，以及它在 WPF 中如何工作？](https://stackoverflow.com/questions/245825/what-does-initializecomponent-do-and-how-does-it-work-wpf)它适用于 WPF，但在 Windows 窗体中相同。

试试这个代码：

```
public Form1()
        {
            InitializeComponent(); //this is the InitializeComponent method. this This method locates a URI to the XAML for the Window/UserControl that is loading, and passes it to the System.Windows.Application.LoadComponent() static method. 
            this.Load += new EventHandler(Form1_Load); //this create Load Form event
        }

        void Form1_Load(object sender, EventArgs e) //after your form is completely loaded, your program will run the code from here...
        {
            //your code goes here
        } 
```

希望我对你有所帮助。

# android - 如何在html页面而不是android中的图像上做卷曲效果

> ID：12051744
> 
> 赞同：1
> 
> 时间：2012-08-21T09:17:10.170
> 
> 标签：android, android-layout

[https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)

这是我作为在 android 上执行 curl 效果的示例的链接，但它具有图像翻转，因为我希望 html 页面具有我们在图像上所做的那样的 curl 效果。如何做到这一点只是给我的想法。

我还浏览了[http://code.google.com/p/android-page-curl/](http://code.google.com/p/android-page-curl/)

我想用 html 页面而不是图像来做同样的事情，如果可能的话，我希望 html 页面具有卷曲效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:28:46.657

您是在 html 页面或 WebView 本身中寻找东西吗？
对于 html 页面，您可以使用 javascript，例如[http://www.turnjs.com/](http://www.turnjs.com/)
我不知道是否可以卷曲 WebView。我会说不。

# jquery - 单击选项卡后表格未动态显示，仅在单击网页上显示的任何位置后

> ID：12051746
> 
> 赞同：0
> 
> 时间：2012-08-21T09:17:12.973
> 
> 标签：jquery, html, jsp, servlets

所以总而言之，我使用 JSP 的视图和 servlet 来完成我所有的数据处理。JQuery .ajax 函数用于从服务器端的 servlet 获取数据。一切正常。

在一页上，我正在使用 JQuery UI 选项卡。

页面加载时，它会正确加载选项卡和页面。但在第二个选项卡上，我有一个 html 表，它通过来自 servlet 的数据动态更新。

所以：点击标签：

```
$(document).ready(function() 
{
    $("#tabs-2").click( function()
       $.ajax(
                                    {
                                        url:'URLTOSERVLET',
                                        type:"GET",
                                        async:true,
                                        success:function(data)
                                        { 
                                            $("#myTable").html(data);

                                        }
                                    });
    });
}); 
```

ajax（Data）的输出应该放入的Div：

```
<div id="myTable">                          
</div> 
```

输出数据为基本表格格式示例：

```
<table>
<tr>
<td>
  data
</td>
<td>
  data
</td>
<td>
  data
</td>
<td>
  data
</td>
</tr>
</table> 
```

现在我的问题在于，点击选项卡后，表格没有显示。但是，如果我在网页上单击 ANYWHERE，它会显示表格。（就好像在 JQuery 函数之后通过鼠标单击“刷新”了网页。有人知道这个吗？以及有关如何修复的建议？

问候，

# javascript - 使用 jquery 的滚动窗格

> ID：12051751
> 
> 赞同：0
> 
> 时间：2012-08-21T09:17:40.710
> 
> 标签：javascript, jquery, css, html

```
<script language="javascript">
$(document).ready(function($) {

    var methods = {
        init: function(options) {
            this.children(':first').stop();
            this.marquee('play');
        },
        play: function() {
            var marquee = this,
                pixelsPerSecond = 100,
                firstChild = this.children(':first'),
                totalHeight = 0,
                difference,
                duration;

            // Find the total height of the children by adding each child's height:
            this.children().each(function(index, element) {
                totalHeight += $(element).innerHeight();
            });

            // The distance the divs have to travel to reach -1 * totalHeight:
            difference = totalHeight + parseInt(firstChild.css('margin-top'), 10);

            // The duration of the animation needed to get the correct speed:
            duration = (difference/pixelsPerSecond) * 1000;

            // Animate the first child's margin-top to -1 * totalHeight:
            firstChild.animate(
                { 'margin-top': -1 * totalHeight },
                duration,
                'linear',
                function() {
                    // Move the first child back down (below the container):
                    firstChild.css('margin-top', marquee.innerHeight());
                    // Restart whole process... :)
                    marquee.marquee('play');
                }
            );
        },
        pause: function() {
            this.children(':first').stop();
        }
    };

    $.fn.marquee = function(method) {

        // Method calling logic
        if (methods[method]) {
            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' + method + ' does not exist on jQuery.marquee');
        }

    };

})(jQuery);

var marquee = $('#marquee');

marquee.marquee();

marquee.hover(function() {
    marquee.marquee('pause');
}, function() {
    marquee.marquee('play');    
});
</script>
<style type="text/css">
#marquee {
    margin:inherit;
    width:auto;
    height:inherit 
}

</style> 
```

我想使用 jquery 创建一个滚动条，但我失败了。上面的代码是我用来向上滚动我的项目的选框。我正在使用它，如下所示，

```
<html>
<body>
<div class="content">
<div id="marquee">
    <ul>
       <li>...</li> 
       ....
    </ul>
</div>
</div></body>
</html> 
```

但它根本不滚动，我正在使用的代码中有什么不正确的地方吗？你可以帮我找到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:31:58.953

不确定 margin-top 是否应该适用于此。尝试将 position:relative 用于支架块（选框）和 position:absolute 用于内容（ul）。并更新顶部而不是边距顶部。但在这种情况下，您可能需要为选取框 div 指定高度和溢出：隐藏。另一个选项是为选取框设置高度和 oveflow:hidden，但保留默认位置。[并使用scrollTop](http://api.jquery.com/scrollTop/)或一些类似的 jquery 函数滚动内容。

# qt - Qt 按钮分配命令

> ID：12051758
> 
> 赞同：2
> 
> 时间：2012-08-21T09:18:09.947
> 
> 标签：qt, qpushbutton

我正在使用 qt creator 为 vtk 应用程序创建 gui。

我做了一个#define 操作，我想将该命令分配给QPushButton。

如果按下，如何使按钮重现我的定义？

例子。ui->pushButton->...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T11:32:09.007

简单的方法是为您的按钮定义一个默认的响应槽。在您的类定义（定义 pushButton 的同一类）中，您可以在该`slots`部分下创建一个默认插槽。

```
class MyMainApplication : public QMainWindow
{
  Q_OBJECT

  public:
    MyMainApplication(QWidget *parent = 0);
    ~MyMainApplication();

   // More stuff in the public section (...)

  public slots:
    void on_pushButton_clicked();    // This is the important line

  // The remaining definitions in your class
}; 
```

现在你只需`on_pushButton_clicked()`在你的类实现中编写函数，它就会响应点击按钮`pushButton`。

默认插槽的语法是`on_NAMEOFTHEWIDGET_NAMEOFTHESIGNAL`.

使用默认插槽，会自动建立连接。如果要为插槽使用通用名称，则必须手动进行连接。例如，假设 `on_pushButton_clicked()`您不想使用`mySlot()`. 在类定义中，您将键入

```
(...)
public slots:
  void mySlot();
(...) 
```

在类实现中，可能在构造函数中，在`ui->setupUi(this);`命令之后，您将连接按钮和插槽：

```
connect(ui->pushButton, SIGNAL(clicked()), this, SLOT(mySlot())); 
```

最后一点：在这种特殊情况下，我几乎可以肯定插槽也可以是`private`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:36:39.780

您需要使用 Qt 的[Signals and Slots](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html)功能。许多对象在与之交互时可以发送信号。示例是从 QPushButton 发出的“clicked()”信号，或在单击 QAction 时发出的“triggered()”。

主要思想是将信号连接到插槽。插槽是在发出信号时调用的函数。我可以为您提供一个 PyQt 示例：

`QtCore.QObject.connect(self.ui.myButton, QtCore.SIGNAL("clicked()"), self.someFunction)`

C++ 代码应该没有太大的不同。检查 Qt 示例，它们提供了很多好东西。

# c# - 如何将字符串（屏蔽）转换为十进制？

> ID：12051764
> 
> 赞同：-2
> 
> 时间：2012-08-21T09:18:37.760
> 
> 标签：c#, type-conversion, maskedtextbox

我在文本框“99:99”中有掩码，我需要转换为十进制。示例：字符串“12:34”转换为 12.34

我创建方法：

```
private decimal ConvertStringMaskToDecimal(string strMask)
{
    var split = strMask.Split(':');
    if(split.Length==2)
    {
        decimal returnValue = decimal.Parse(split[0]) + decimal.Parse(split[1])/100;
        return returnValue;
    }
    else
    {
        throw new ArgumentException("strMask not valid");
    }
} 
```

此代码有效，但我认为代码不正确，如何解决此问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:33:34.060

正如我在对 Oded 回答的评论中所说：不建议将点硬编码为小数分隔符。

[这张照片](http://en.wikipedia.org/wiki/File%3aDecimalSeparator.svg)解释了原因。

我建议：

```
using System.Globalization;

// (...)
decimal.Parse(strMask.Replace(":", CultureInfo.CurrentCulture.NumberFormat.NumberDecimalSeparator)); 
```

反而。

或者，正如 Henk Holterman 所建议的：

```
decimal.Parse(strMask.Replace(':', '.'), CultureInfo.InvariantCulture); 
```

达到同样的效果（不会在非美国机器上崩溃）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:20:57.317

只需在解析前替换`:`with ：`.`

```
decimal.Parse(strMask.Replace(':', '.'), CultureInfo.InvariantCulture) 
```

请注意使用`CultureInfo.InvariantCulture`以确保`.`正确解释 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-21T09:22:00.010

您可以在用小数点`decimal.Parse`替换冒号后使用`:``.`

```
decimal.Parse(strMask.Replace(':', '.'), CultureInfo.InvariantCulture) 
```

# javascript - 为什么有些 JavaScript 开发者使用 setTimeout 一毫秒？

> ID：12051769
> 
> 赞同：13
> 
> 时间：2012-08-21T09:18:49.757
> 
> 标签：javascript, jquery, settimeout, tablesorter

我在使用 jQuery 插件[tablesorter](http://tablesorter.com/)时遇到问题，我不能两次调用触发器。

例如，这将不起作用：

```
this._$table.trigger('update');
this._$table.trigger('sorton', [[[1,1]]]); 
```

但这有效：

```
this._$table.trigger('update');
setTimeout($.proxy(function() {
    this._$table.trigger('sorton', [[[1,1]]]);
}, this), 1); 
```

然后我看到问题出在触发器“更新”中，它使用正文调用方法：

```
function () {
    var me = this;
    setTimeout(function () {
        // rebuild parsers.
        me.config.parsers = buildParserCache(
        me, $headers);
        // rebuild the cache map
        cache = buildCache(me);
    }, 1);
} 
```

为什么 tablesorter 开发人员使用`setTimeout`一毫秒？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-21T09:27:13.787

## 简短的回答：函数执行排队

这是对您问题的简短回答。`setTimeout`0 或 1 毫秒用于函数执行队列。继续阅读以了解原因和方式。

## Javascript具有单线程执行

Javascript引擎是一个单线程进程。因此，每当开发人员想要推迟某些函数执行以在当前刚刚执行的函数之后立即执行时，a`setTimeout`被用于实际**排队下一个函数**......它与事件没有任何直接关系，尽管函数可能是事件处理程序。此等式中的唯一事件是 setTimeout 创建的超时事件。

这是两个函数的示例，其中第一个函数在其执行期间将第二个函数排入队列，以便在其之后立即执行。

```
function first()
{
    // does whatever it needs to

    // something else needs to be executed right afterwards
    setTimeout(second, 1);

    // do some final processing and exit
    return;
}

function second()
{
    // whatever needs to be done
} 
```

因此，对于 javascript 引擎线程，执行队列如下所示：

```
first()
second() 
```

请注意，这**与函数调用堆栈无关**。

## 为什么是 1 毫秒？

1ms 是一个非常短的时间，（几乎）可以确保您的第二个函数将在您的第一个函数返回后立即执行。您有时甚至会看到**0ms**实际**在第一个函数返回后**立即执行它。

另一方面，如果使用更长的时间，即 100 毫秒，这可能会导致同时执行不同的函数，这可能会对整个 UI 过程产生不良影响。

## 为什么首先要进行函数排队？

现在的浏览器通过观察长时间运行的功能来阻止客户端功能挂起当前浏览器会话。如果特定函数运行时间足够长，浏览器 Javascript 执行引擎将暂停它并询问用户是要终止它（杀死它）还是等待它完成。

当您实际上确实具有长时间运行的功能时，这通常是不希望的效果。例如，假设您有一个函数必须在处理过程中循环处理大量项目。您绝对不希望用户终止进程，因为循环需要执行。

**在这种情况下有什么**解决方案？**在这种情况下，您宁愿使用循环（排队）函数，然后将函数调用排队以处理每个项目，而不是使用带有循环的单个函数并执行它。这只是这种功能的一个外部骨架。**

 **```
function queueItems(items) {
    for(var i = 0; i < items.length, i++)
    {
        setTimeout((function(item) {
            return function() {
                processItem(item);
            };
        })(items[i]), 0);
    }
}

function processItem(item) {
    // process individual item
} 
```

这样你就可以防止你的函数运行太久，并且在每个执行的函数控制之后返回到 Javascript 引擎*重置它的函数挂起计时器*。但是请注意，当您的函数正在执行时，您的 UI 可能会无响应或最多是不可预测的。最好在函数之间留出一些时间空间来排队，以便 UI 在需要时保持响应。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-21T09:26:43.773

这是一个古老的黑客。如果一个事件需要在另一个事件之后触发，您可以使用`setTimeout`1ms 来确保该事件在另一个事件之后触发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:25:41.397

我认为由于`trigger('update')`内部有一个`setTimeout`，只有通过设置另一个`setTimeout`才能实现所需的语句执行顺序。如果您不调用它`'sorton'`，`setTimeout`它将在之前执行`'update'`。

另一方面，我猜想`'update'`用于`setTimeout`防止“更新”成为阻塞功能，因为它可能需要很长时间才能执行。**

# android - 使用 JNI 访问 C++ 中的二维数组字段

> ID：12051770
> 
> 赞同：1
> 
> 时间：2012-08-21T09:18:51.527
> 
> 标签：android, arrays, android-ndk, java-native-interface

我有一个这样的Java类：

```
class Blah{
    float[][] params;
} 
```

在 JNI 中，我尝试获取这样的参数：

```
jclass cls = env->GetObjectClass(obj);
jfieldID paramsFid = env->GetFieldID(cls, "params", "[[F;");
jobjectArray paramArray = (jobjectArray)env->GetObjectField(obj, paramsFid); 
```

但它总是在 GetObjectField 上失败，我没有找到 2D 数组的专用函数，所以我只是将它视为一个对象并将其转换为一个对象数组。有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T18:55:30.887

您的`GetFieldID`调用看起来返回 null。您需要删除类型中的分号，使其看起来像：

```
jfieldID paramsFid = env->GetFieldID(cls, "params", "[[F"); 
```

分号用于类名的末尾，而不是原始类型。

[这](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/types.html)是关于 JNI 类型的一个很好的参考。

# c++ - 如何将 this 的 shared_ptr 返回给拥有它的对象？

> ID：12051771
> 
> 赞同：2
> 
> 时间：2012-08-21T09:18:53.617
> 
> 标签：c++, c++11, smart-pointers

这里的类似问题似乎都使用了boost，我没有使用。

我正在尝试做的事情如下所示：

在“所有者”中：

```
std::shared_ptr<State> m_state;

m_state = make_shared<State>(param);

m_state = m_state->SomeVirtualFunction();    // The original m_state object gets destroyed 
```

在“拥有”中：

```
std::shared_ptr<State> State::SomeVirtualFunction() {
    return std:shared_ptr<State>(this);
} 
```

在 MSVS 2012 的 Visual C++ 中，拥有的对象被销毁。我怎样才能让它活着？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T09:22:32.450

您需要继承自[`std::enable_shared_from_this`](http://en.cppreference.com/w/cpp/memory/enable_shared_from_this); 看看[`enable_shared_from_this` 有什么用处？](https://stackoverflow.com/questions/712279/what-is-the-usefulness-of-enable-shared-from-this). `std::enable_shared_from_this`为您的类型配备`shared_from_this`您调用的成员函数，而不是`std::shared_ptr<State>(this)`：

```
std::shared_ptr<State> State::SomeVirtualFunction() {
    return shared_from_this();
} 
```

在 C++11（或 Boost，这是 C++11`enable_shared_from_this`的来源）之前，假设您有一个`shared_ptr`不提供的实现，您可以通过将a给它自己来`enable_shared_from_this`手动执行此操作，它可以转换为当它需要时：`State``weak_ptr``shared_ptr`

```
class State {
    ...
    std::weak_ptr<State> weak_self;
};

m_state = make_shared<State>(param);
m_state->weak_self = m_state;

std::shared_ptr<State> State::SomeVirtualFunction() {
    return weak_self.lock()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:24:03.563

`State`应该继承`std::enable_shared_from_this<State>`并且`State::SomeVirtualFunction()`应该是

```
return shared_from_this(); 
```

请注意，您不得更改所有者中的代码。

# sql - 如何将日期/时间安排到上午输入/输出和下午输入/输出

> ID：12051772
> 
> 赞同：2
> 
> 时间：2012-08-21T09:18:54.457
> 
> 标签：sql, vb.net, ms-access

我正在做一个工资单系统，我从 zktechnology 购买了 B3 tft，并想安排记录。

目前，我可以使用以下格式从生物特征中提取数据：

```
计算 EmpID InOutMode 日期
1 1 0 2012 年 8 月 20 日 07:49:01
2 1 1 2012 年 8 月 20 日 12:08:21
3 1 0 2012 年 8 月 20 日 12:43:10
4 1 1 2012 年 8 月 20 日 17:56:15
5 2 0 2012 年 8 月 20 日 07:53:11
6 2 1 2012 年 8 月 20 日 12:02:01
7 2 0 2012 年 8 月 20 日 12:39:56
8 2 1 2012 年 8 月 20 日 17:20:43
9 1 0 2012 年 8 月 21 日 08:10:20
10 1 1 2012 年 8 月 21 日 12:01:26
11 1 0 2012 年 8 月 21 日 13:03:11
12 1 1 2012 年 8 月 21 日 17:11:15
13 2 0 2012 年 8 月 21 日 07:48:26
14 2 1 2012 年 8 月 21 日 12:14:58
15 2 0 2012 年 8 月 21 日 12:59:31
16 2 1 2012 年 8 月 21 日 17:20:12

```

输入输出模式：

0 = 输入，1 = 输出

现在，我想像这样转换上面的数据：

```
EmpID 日期 AM_In AM_Out PM_In PM_Out
1 2012 年 8 月 20 日 07:49:01 12:08:21 12:43:10 17:56:15
2 2012 年 8 月 20 日 07:53:11 12:02:01 12:39:56 17:20:43
1 2012 年 8 月 21 日 08:10:20 12:01:26 13:03:11 17:11:15
2 2012 年 8 月 21 日 07:48:26 12:14:58 12:59:31 17:20:12

```

所以我可以用 EmpID、Date、AM_In、AM_Out、PM_In、PM_Out 字段将它保存到数据库中。

我以前在这里看到过类似的代码，但我不记得网址了。

更新：

VB.net 代码或 ms 访问格式的 sql 是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T20:47:28.007

创建两个交叉表和一个查询以将它们连接到可用的日期和员工可能是最简单的。

凌晨 1 点交叉表

```
TRANSFORM Min(tm.Date) AS MinOfDate
SELECT Format([Date],"dd/mm/yyyy") AS dt, tm.EmpID
FROM tm
GROUP BY Format([Date],"dd/mm/yyyy"), tm.EmpID
PIVOT tm.InOutMode; 
```

下午 2 点交叉表

```
TRANSFORM Max(tm.Date) AS MinOfDate
SELECT Format([Date],"dd/mm/yyyy") AS dt, tm.EmpID
FROM tm
GROUP BY Format([Date],"dd/mm/yyyy"), tm.EmpID
PIVOT tm.InOutMode; 
```

其中 tm 是您的表的名称。

然后你可以加入这些。

```
SELECT Alldates.dt, 
       Alldates.empid, 
       am.[0] AS [Am In], 
       am.[1] AS [Am Out], 
       pm.[0] AS [Pm In], 
       pm.[1] AS [Pm Out] 
FROM   ((SELECT DISTINCT Format([date], "dd/mm/yyyy") AS dt, 
                        empid 
        FROM   tm) AS Alldates 
        LEFT JOIN am 
               ON ( Alldates.empid = am.empid ) 
                  AND ( Alldates.dt = am.dt )) 
       LEFT JOIN pm 
              ON ( Alldates.empid = pm.empid ) 
                 AND ( Alldates.dt = pm.dt ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:12:08.137

这是一个应该在 MS Access 中产生您想要的结果的查询：

```
select am_in.empid,
    format(am_in.min_in_dt, "MM/DD/YYYY") as [date],
    format(am_in.min_in_dt, "hh:mm:ss") as AM_In,
    format(am_out.min_out_dt, "hh:mm:ss") as AM_Out,
    format(pm_in.max_in_dt, "hh:mm:ss") as PM_In,
    format(pm_out.max_out_dt, "hh:mm:ss") as PM_Out
from
(
    (
        (
           SELECT empid,
              min(dt) as min_in_dt
            FROM yourTable
            where inoutmode = 0
            group by empid
        ) am_in
        inner join
        (
           SELECT empid,
              min(dt) as min_out_dt
            FROM yourTable
            where inoutmode = 1
            group by empid
        ) am_out
            on am_in.empid = am_out.empid
    )
    inner join
    (
       SELECT empid,
          max(dt) as max_in_dt
        FROM yourTable
        where inoutmode = 0
        group by empid
    ) pm_in
        on am_in.empid = pm_in.empid
)
inner join
(
   SELECT empid,
      max(dt) as max_out_dt
    FROM yourTable
    where inoutmode = 1
    group by empid
) pm_out
    on am_in.empid = pm_out.empid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:47:02.847

像这样的东西会起作用

```
select 
    empid,
    dateadd(day,datediff(day,0,DATE),0) as date,
    max(case when sno=1 then convert(varchar(8),DATE,108)) as AM_IN,
    max(case when sno=2 then convert(varchar(8),DATE,108)) as AM_OUT,
    max(case when sno=3 then convert(varchar(8),DATE,108)) as PM_IN,
    max(case when sno=4 then convert(varchar(8),DATE,108)) as PM_OUT
from
(
    select *, 
        row_number() over (partition by empid order by Empid) as sno
    from 
        table 
) as t
group by
    empid,dateadd(day,datediff(day,0,DATE),0) 
```

Written directly in jsp: ÆØÅ æøå

### xml transformed with jstl:

<c:import url="/Test.xsl" var="xsltdoc"><c:import url="/Test.xml" var="xmldoc"><x:transform xml="${xmldoc}" xslt="${xsltdoc}">I am using JSTL libraries (Implementation-Version: 1.2) on JBOSS AP 4.2.3. node.jsbackbone.js 4 1 回答 1 This answer is useful 4 Backbone uses an internal attribute called changed on models: http://backbonejs.org/#Model-changed changed model.changed The changed property is the internal hash containing all the attributes that have changed since the last "change" event was triggered. Please do not update changed directly. Its state is maintained internally by set and change. A copy of changed can be acquired from changedAttributes. Rename your callback to something else and that works Box = Backbone.Model.extend({ initialize: function() { this.on('change:status', this.changedState, this); }, changedState: function() { console.log('changed'); } }); A Fiddle to reproduce your problem http://jsfiddle.net/NrTPk/ and a modified version http://jsfiddle.net/NrTPk/1/ 于 2012-08-21T10:11:58.330 回答 Related 1 javascript - 如何在 Windows8 HTML5/JS 应用程序中使用 WCF 服务？ 4 iphone - 如何获取 CGPath 的 CGPoint(s) 1 vim - vim 的 javacomplete 插件 1 c# - 检查 Active Directory 帐户是否被锁定（WPF C#） 1 java - 使用 AtomicReference.compareAndSet 设置对数据库调用结果的引用是否合适？ 1 optimization - 如何正确使用 GHC 的 SPECIALIZE pragma？（示例：使用 Identity 从一元函数中专门化纯函数。） 2 javascript - 在 HTML 页面中显示 XML 内容以创建表单元素 0 php - 尝试添加没有数组值的数组键 1 boost - Boost jam，使用依赖的绝对路径 3 jquery - 如何使用 .dotdotdot 在段落末尾显示省略号？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# node.js - Backbonejs，“对象# has no method apply" when setting model attribute inside a Collections.each I made and initialized my model with the "change:status" event like this Box = Backbone.Model.extend({ initialize: fu 问问题 问问题 2012-08-21T09:19:01.083 1261 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I made and initialized my model with the "change:status" event like this Box = Backbone.Model.extend({ initialize: function() { this.on('change:status', this.changed, this); }, changed: function() { $('.changed').text('I changed'); // Testing if the 'change:status' is fired } }); My Box collections is setup this way BoxList = Backbone.Collection.extend({ model: Box, initialize: function() { this.on('add', this.addOne, this); socket.on('box-status-change', this.boxStatusChanged, this); }, boxStatusChanged: function(box) { Boxes.each(function(model) { if(model.get('changed') == box.changed) { model.set({status: 'changed'}); } }); }, addOne: function.... // Some code removed }); Boxes = new BoxList(); Checking in Chromes web developer tools, the attribute status was set to changed properly but an error Uncaught TypeError: Object # has no method 'apply' occured. The change:title event of the model was not fired. Is there something I miss when adding the event to the model? By the way, I'm using the backbone-iosync.js for the Backbone.sync method... Can JSTL transform XML encoded in UTF-8? I am making a simple JSP application to transform XML data into HTML. I use JSTL and my XML data is encoded in UTF-8\. It works, but the danish characters look strange in the browser. Like this: Danish characters written directly in jsp: ÆØÅ æøå Same danish characters transformed with jstl: character: Ã† character: Ã¦ character: Ã˜ character: Ã¸ character: Ã… character: Ã¥ However, if I manually change the xml definition like so: The output is transformed properly. Should I set up JSTL in some way to handle UTF-8, or is it,that my file is actually latin1 encoded by mistake? I do not know how to check this... Here is my test xml file: <rows><row><name>character: Æ</name> <surname>character: æ</surname></row> <row><name>character: Ø</name> <surname>character: ø</surname></row> <row><name>character: Å</name> <surname>character: å</surname></row></rows> Here is my xsl:<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:template match="/"><xsl:for-each select="rows/row"></xsl:for-each>

| <xsl:value-of select="name"></xsl:value-of> | <xsl:value-of select="surname"></xsl:value-of> |</xsl:template></xsl:stylesheet> My index.jsp: <%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> <%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml"%>  <title>Insert title here</title> Written directly in jsp: ÆØÅ æøå

### xml transformed with jstl:

<c:import url="/Test.xsl" var="xsltdoc"><c:import url="/Test.xml" var="xmldoc"><x:transform xml="${xmldoc}" xslt="${xsltdoc}">I am using JSTL libraries (Implementation-Version: 1.2) on JBOSS AP 4.2.3. node.jsbackbone.js 4 1 回答 1 This answer is useful 4 Backbone uses an internal attribute called changed on models: http://backbonejs.org/#Model-changed changed model.changed The changed property is the internal hash containing all the attributes that have changed since the last "change" event was triggered. Please do not update changed directly. Its state is maintained internally by set and change. A copy of changed can be acquired from changedAttributes. Rename your callback to something else and that works Box = Backbone.Model.extend({ initialize: function() { this.on('change:status', this.changedState, this); }, changedState: function() { console.log('changed'); } }); A Fiddle to reproduce your problem http://jsfiddle.net/NrTPk/ and a modified version http://jsfiddle.net/NrTPk/1/ 于 2012-08-21T10:11:58.330 回答 Related 1 javascript - 如何在 Windows8 HTML5/JS 应用程序中使用 WCF 服务？ 4 iphone - 如何获取 CGPath 的 CGPoint(s) 1 vim - vim 的 javacomplete 插件 1 c# - 检查 Active Directory 帐户是否被锁定（WPF C#） 1 java - 使用 AtomicReference.compareAndSet 设置对数据库调用结果的引用是否合适？ 1 optimization - 如何正确使用 GHC 的 SPECIALIZE pragma？（示例：使用 Identity 从一元函数中专门化纯函数。） 2 javascript - 在 HTML 页面中显示 XML 内容以创建表单元素 0 php - 尝试添加没有数组值的数组键 1 boost - Boost jam，使用依赖的绝对路径 3 jquery - 如何使用 .dotdotdot 在段落末尾显示省略号？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12051775
> 
> 赞同：2
> 
> 时间：
> 
> 标签：node.js, backbone.js

I made and initialized my model with the "change:status" event like this

```
Box = Backbone.Model.extend({
    initialize: function() {
      this.on('change:status', this.changed, this);
    },
    changed: function() {
      $('.changed').text('I changed'); // Testing if the 'change:status' is fired
    }
}); 
```

My Box collections is setup this way

```
BoxList = Backbone.Collection.extend({
    model: Box,
    initialize: function() {
       this.on('add', this.addOne, this);
       socket.on('box-status-change', this.boxStatusChanged, this);
    },
    boxStatusChanged: function(box) {
        Boxes.each(function(model) {
          if(model.get('changed') == box.changed) {
            model.set({status: 'changed'});
          }
        });
    },
    addOne: function.... // Some code removed
});

Boxes = new BoxList(); 
```

Checking in Chromes web developer tools, the attribute `status` was set to `changed` properly but an error `Uncaught TypeError: Object #<Object> has no method 'apply'` occured. The `change:title` event of the model was not fired. Is there something I miss when adding the event to the model?

By the way, I'm using the *backbone-iosync.js* for the `Backbone.sync` method...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:11:58.330

Backbone uses an internal attribute called changed on models:

[http://backbonejs.org/#Model-changed](http://backbonejs.org/#Model-changed)

> **changed** *model.changed*
> The changed property is the internal hash containing all the attributes that have changed since the last "change" event was triggered. Please do not update changed directly. Its state is maintained internally by set and change. A copy of changed can be acquired from changedAttributes.

Rename your callback to something else and that works

```
Box = Backbone.Model.extend({
    initialize: function() {
      this.on('change:status', this.changedState, this);
    },
    changedState: function() {
      console.log('changed');
    }
}); 
```

A Fiddle to reproduce your problem [http://jsfiddle.net/NrTPk/](http://jsfiddle.net/NrTPk/) and a modified version [http://jsfiddle.net/NrTPk/1/](http://jsfiddle.net/NrTPk/1/)</x:transform></c:import></c:import></x:transform></c:import></c:import>

# encoding - JSTL 可以转换以 UTF-8 编码的 XML 吗？

> ID：12051776
> 
> 赞同：2
> 
> 时间：2012-08-21T09:19:04.397
> 
> 标签：encoding

我正在制作一个简单的 JSP 应用程序来将 XML 数据转换为 HTML。我使用 JSTL，我的 XML 数据以 UTF-8 编码。它可以工作，但丹麦语字符在浏览器中看起来很奇怪。

像这样：

直接用 jsp 编写的丹麦字符：ÆØÅ æøå 使用 jstl 转换
的相同丹麦字符：
字符：Ã† 字符：Ã¦字符：Ã~ 字符
：Ã¸
字符：Ã…

但是，如果我像这样手动更改 xml 定义：

```
<?xml version="1.0" encoding="ISO-8859-1" ?> 
```

输出被正确转换。

我应该以某种方式设置 JSTL 来处理 UTF-8，还是我的文件实际上是错误编码的 latin1？我不知道如何检查这个...

这是我的测试 xml 文件：

```
 <?xml version="1.0" encoding="UTF-8" ?>
<rows>
<row>
    <name>character: Æ</name>
    <surname>character: æ</surname>
</row>
<row>
    <name>character: Ø</name>
    <surname>character: ø</surname>
</row>
<row>
    <name>character: Å</name>
    <surname>character: å</surname>
</row>
</rows> 
```

这是我的 xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
    <table border="0">
        <xsl:for-each select="rows/row">
            <tr>
                <td>
                    <xsl:value-of select="name" />
                </td>
                <td>
                    <xsl:value-of select="surname" />
                </td>
            </tr>
        </xsl:for-each>
    </table>
</xsl:template>
</xsl:stylesheet> 
```

我的 index.jsp：

```
<?xml version="1.0" encoding="UTF-8" ?>
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="x" uri="http://java.sun.com/jsp/jstl/xml"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Insert title here</title>
</head>
<body>
Written directly in jsp: ÆØÅ æøå
<h3>xml transformed with jstl:</h3>
<c:import url="/Test.xsl" var="xsltdoc" />
<c:import url="/Test.xml" var="xmldoc" />
<x:transform xml="${xmldoc}" xslt="${xsltdoc}" />
</body>
</html> 
```

我在 JBOSS AP 4.2.3 上使用 JSTL 库（实施版本：1.2）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:14:56.470

好的，我在[这里](http://sodved.awardspace.info/unicode.pl "这里")检查了我的 xml 数据的编码，它是正确的，它是 UTF-8 编码的。

显然，在 index.jsp 中，JSTL 必须像这样设置为使用 UTF-8

```
<c:import url="/Metadata1.xsl" var="xsltdoc" charEncoding="UTF-8" />
<c:import url="/Metadata1.xml" var="xmldoc" charEncoding="UTF-8" /> 
```

这解决了我的问题。

# java - Unable to insert data using POI for null values in excel sheet

> ID：12051777
> 
> 赞同：1
> 
> 时间：2012-08-21T09:19:05.410
> 
> 标签：java, apache-poi

I'm trying to find a blank value in excel (xlsx) sheet and replace with some string like "ENTER VALUE" using my program with Apache POI library as below

I'm able to read and identify blank/null values in excel sheet but couldnt insert any value into those cells

```
public static void main(String args[]) throws IOException, InvalidFormatException
    {

                FileInputStream inputFile = new FileInputStream("//Users//suk//Documents/tes//testexcel.xlsx");

        //now initializing the Workbook with this inputFie

        // Create workbook using WorkbookFactory util method

         Workbook wb = WorkbookFactory.create(inputFile);

         // creating helper for writing cells

         CreationHelper createHelper = wb.getCreationHelper();

        // setting the workbook to handle null

         wb.setMissingCellPolicy(Row.CREATE_NULL_AS_BLANK);

        Sheet sheet = wb.getSheetAt(0);

        for (Row row : sheet) {
            int lastCellNo =row.getLastCellNum();
            int firstCellNo=row.getFirstCellNum();

            int rowNo =row.getRowNum();
            System.out.println(" row number = "+rowNo);
            System.out.println(" last cell no = "+lastCellNo);

            for(int i=firstCellNo;i<lastCellNo;i++){
                System.out.println("************");

                Cell cell = row.getCell(i);
                int colIndex =cell.getColumnIndex();
                if(cell==null)
                {
                    System.out.println(" The Cell:"+colIndex+" for row "+row.getRowNum()+" is NULL");
                }

              System.out.println(" column  index  = "+colIndex);

             int cellType = cell.getCellType();
             System.out.println(" cell type ="+cellType);

             // writing a switch case statement

             switch(cellType)
             {

             case 0:
             {
                double numValue = cell.getNumericCellValue();
                //System.out.println(numValue);
                 break;
             }
             case 1:
             {
                 String cellString = cell.getStringCellValue();
                 System.out.println("----String value = "+cellString+"---String length ="+cellString.length());

                 // here checking null consition

            /*   if(cellString == null || cellString.equalsIgnoreCase("") || cellString.length()<=0 || cellString.equalsIgnoreCase(" "))
                 {
                     // here creating the cell value after last cell

                 } */
                 break;
             }
             case 4:
             {
                  boolean bolValue =cell.getBooleanCellValue();
                  //System.out.println(bolValue);
                  break;
             }

             // for case of blank cell

             case 3:
             {

                 //int lastCellPlus =lastCellNo+1;
                 //System.out.println("last+1 column ="+lastCellPlus);
                 //row.createCell(lastCellPlus).setCellValue(" NULL VALUE..PLEASE ENTER VALUE ");

                 System.out.println(" cell details = "+cell.getColumnIndex()+" row details ="+row.getRowNum());
                 cell.setCellValue(createHelper.createRichTextString("ENTER VALUE"));
                 System.out.println(" Sucessfully written error");

                  break;
             }

             default: 
                 System.out.println(" unknown format");
                 break;

             }// switch

          } // row and cell iterator

          }
        } 
```

}

Below is the bit of code by which im identifying its Blank/Null value and trying to insert String but its not writing to that cell

```
case 3:
             {

                 //int lastCellPlus =lastCellNo+1;
                 //System.out.println("last+1 column ="+lastCellPlus);
                 //row.createCell(lastCellPlus).setCellValue(" NULL VALUE..PLEASE ENTER VALUE ");

                 System.out.println(" cell details = "+cell.getColumnIndex()+" row details ="+row.getRowNum());
                 cell.setCellValue(createHelper.createRichTextString("ENTER VALUE"));
                 System.out.println(" Sucessfully written error");

                  break;
             } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T06:03:25.183

```
if(row.getCell(0))==null || getCellValue(row.getCell(0)).trim().isEmpty()){
   cell.setCellValue("ENTER VALUE"); 
```

}

```
private String getCellValue(Cell cell) {
    if (cell == null) {
        return null;
    }
    if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
        return cell.getStringCellValue();
    } else if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
        return cell.getNumericCellValue() + "";
    } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
        return cell.getBooleanCellValue() + "";
    }else if(cell.getCellType() == Cell.CELL_TYPE_BLANK){
        return cell.getStringCellValue();
    }else if(cell.getCellType() == Cell.CELL_TYPE_ERROR){
        return cell.getErrorCellValue() + "";
    } 
    else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:39:38.670

这应该可以正常工作：

```
Sheet s = wb.getSheetAt(0);
for (int rn=0; rn<s.getLastRowNum(); rn++) {
    Row r = s.getRow(rn);
    if (r == null) {
       // No values exist in this row
       r = s.createRow(rn);
    }

    int minColumnsPerRow=10; // Fix for your needs
    for (int cn=0; cn<minColumnsPerRow; cn++) {
       Cell c = r.getCell(cn);
       if (c == null || c.getCellType() == Cell.CELL_TYPE_BLANK) {
           // This cell is empty
           if (c == null) { 
              c = r.createCell(cn, Cell.CELL_TYPE_STRING);
           }
           cell.setCellValue(createHelper.createRichTextString("ENTER VALUE"));
       }
    }
 } 
```

请记住，单元格可以为空白或 null（从未使用过），并且行可以为 null（从未使用过）

# serial-port - Find Serial Buffer Size of Converter

> ID：12051779
> 
> 赞同：1
> 
> 时间：2012-08-21T09:19:15.943
> 
> 标签：serial-port, usbserial, javax.comm, termios

I'm using an FTDI USB-to-Serial converter on linux. I'm writing an application that implements the standard functionality of changing settings like baud rate, etc... The only thing that I'm not sure how to get is the buffer size, e.g. if the user wants to know.

For example in the javax.comm SerialPort API there's a method getInputBufferSize(), so I thought there must be a way to check this on the device being used. So if I'm using a USB-to-Serial converter, is it possible to query it for the buffer size? I checked the termios documentation and cannot see such a setting.

Any suggestions on this please?

# php - php array_merge_recursive 保留数字键

> ID：12051782
> 
> 赞同：28
> 
> 时间：2012-08-21T09:19:22.753
> 
> 标签：php, array-merge

我只想合并

```
$a = array("59745506"=>array("up" => 0,));
$b = array("59745506"=>array("text" => "jfrj"));
$c = array_merge_recursive_new($a, $b); 
```

结果：

```
Array
(
    [0] => Array
        (
            [up] => 0
        )

    [1] => Array
        (
            [text] => jfrj
        )

) 
```

预期结果：

```
 Array
(
    [59745506] => Array
        (
            [up] => 0
            [text] => jfrj
        )

) 
```

[http://www.php.net/manual/en/function.array-merge-recursive.php](http://www.php.net/manual/en/function.array-merge-recursive.php)中的第二条评论正在工作，它是我的最佳解决方案吗（我需要将数组与多个数字键合并，并有2个级别）？

另一种解决方法是使用 array_map(function ()... 来实现它

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-21T09:36:04.650

该[`array_replace_recursive()`](http://php.net/array_replace_recursive)功能看起来是您所需要的。

```
$a = array("59745506" => array("up" => 0,));
$b = array("59745506" => array("text" => "jfrj"));
$c = array_replace_recursive($a, $b);
var_export($c);

// array (
//   59745506 => 
//   array (
//     'up' => 0,
//     'text' => 'jfrj',
//   ),
// ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:01:13.600

即使您将其表示为字符串文字（参见[PHP: Arrays -> Syntax](http://php.net/manual/de/language.types.array.php) ），您的期望也会失败，因为`$a`and是 numeric(! )。`$b`

我认为是否有更好的解决方案取决于您*到底*需要什么。它可能比递归合并更简单：

1) 你确定`$a`and`$b`数组中的每个值都将永远是一个数组吗？

2）如果这些数组共享一个公共密钥（即，如果在您的示例`"text"`中再次出现）应该发生什么？`"up"`是否继续递归合并？

# java - Match public IP addresses with user-supplied netmasks

> ID：12051783
> 
> 赞同：1
> 
> 时间：2012-08-21T09:19:31.403
> 
> 标签：java, networking, ip, subnet

Recently I was given a task at my company where I have to create a function like this:

```
boolean addrMatch(String IP, String netMask); 
```

**This has nothing to do with routing.** We have a network service that will use this function. The IP parameter varies upon all requests, the netMask parameter is user-supplied. The function must tell that an actual IP address matches with the supplied netmask or not. This is something like the user tells our system to only serve requests on the public internet to a specific subset of IP addresses, not all of them. My networking related knowledge is far from complete, so I did a deep search on the topic, but I didn't get very far. What I know (or been told): all the two parameteres are valid IP addresses or netmasks in xxx.xxx.xxx.xxx notation. I have to do a bitwise AND on them (obviously after converting them into BitSet or at least byte[] array). But I guess this is not the complete algorithm. So my question: what is the correct algorithm for matching an IP address with a netmask?

ps.: I'm working in Java, but I need the generic method.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:00:48.777

网络掩码只是一个位掩码。基本上，如果`address & netmask != 0`地址在由网络掩码表示的子网中。您必须处理的实现细节是字节而不是位，并且字节数取决于您使用的是 IPv4 还是 IPv6。但这基本上是微不足道的。

# java - 捕获异常时是否有理由不使用 final 关键字？

> ID：12051791
> 
> 赞同：20
> 
> 时间：2012-08-21T09:19:47.323
> 
> 标签：java, performance, exception, final

我在一些示例 BlackBerry Java 类中看到了如下代码：

```
try
{
    // stuff that will throw an exception
}
catch(final Exception e)
{
    // deal with it
} 
```

我认为这`final`是为了性能。根据标题，由于很少（曾经？）有任何理由修改`Exception`已经被抛出的，他们应该总是这样`final`吗？

如果是这样，这不是编译器可以完成的事情吗？还是由编译器完成并且`final`手动添加完全没有影响？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-21T09:27:20.707

[Java 语言规范 11.2.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.2.2)对最终异常和非最终异常进行了区分：

> 一个 throw 语句（第 14.18 节），其抛出的表达式具有静态类型 E，并且不是 final 或有效的 final 异常参数，可以抛出 E 或抛出的表达式可以抛出的任何异常类。
> [...]
> 抛出的表达式是 catch 子句 C 的最终或有效最终异常参数的 throw 语句可以抛出异常类 E iff：
> 
> *   E是声明C的try语句的try块可以抛出的异常类；和
> *   E 是与 C 的任何可捕获异常类兼容的赋值；和
> *   E 与在同一 try 语句中声明在 C 左侧的 catch 子句的任何可捕获异常类的赋值都不兼容。

有趣的是，[JLS 14.20](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20-620)还说：

> 在 uni-catch 子句中，未声明为 final（隐式或显式）的异常参数如果从未作为赋值运算符的左侧操作数出现在其范围内，则被认为是有效的 final。

换句话说，如果你不重新分配`e`你的 catch 语句（如`e = new SomeOtherException();`），它会被隐式声明为 final。

所以我只能得出结论，它没有任何区别，除非在 catch 块中修改了异常，我能想出的唯一例子是：

```
public void method1() throws IOException {
    try {
        throw new IOException();
    } catch (Exception e) { // e is not modified in catch => implicitly final
        throw e; //compiles OK
    }
}

//it works because method1 is semantically equivalent to method2:
public void method2() throws IOException {
    try {
        throw new IOException();
    } catch (final Exception e) {
        throw e;
    }
}

public void method3() throws IOException {
    try {
        throw new IOException("1");
    } catch (Exception e) {
        e = new IOException("2"); //e modified: not implicitly final any more
        throw e; //does not compile
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:28:08.583

我相信`final`当可以使用它的代码太长而难以阅读和理解时很有用。例如，我会`final`在可能的情况下创建字段，以确保它们在构造函数中正确分配，并且不会在类中的任何地方进行修改。

使用`final`catch 子句不太可能有太大帮助，因为 a) 保证设置该值 b) 使用它的代码应该很短，c) 无论如何都很少修改它。

然而，没有什么能阻止你这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:23:37.067

我不确定这是关于性能，但更多的是关于约定。如果您使用的是 Eclipse，请尝试设置一个`final`尽可能添加关键字的格式化程序，并使用该格式化程序重新格式化您的源代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-21T09:27:50.533

我怀疑 final 是否真的会给性能带来任何好处，因为异常实例是块本地的（这是一个非常好的答案，解释它[https://stackoverflow.com/a/306966/492561](https://stackoverflow.com/a/306966/492561)）。

所以它只是作为一个明确的标记，表示我不会修改。

有时您可能需要修改异常以将其返回，可能需要编辑消息以使其在更高级别更清晰。

本质上，我会说这是一个偏好问题，有些人可能喜欢，有些人可能不喜欢。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-21T09:31:44.277

我见过几个项目，其中未修改的所有内容都必须是最终的（例如参数、字段、本地变量等）。

[PMD](http://pmd.sourceforge.net/)代码分析器中还有一个对应的样式检查，它验证所有可能的东西都被声明为`final`.

# java - 文件上传到liferay中的数据库

> ID：12051792
> 
> 赞同：0
> 
> 时间：2012-08-21T09:19:48.893
> 
> 标签：java, jsp, liferay

嘿伙计们，我是 liferay 的新手，并且迫切需要上传文件（如果可能，请使用 Excel）和制作数据库条目。

已收集 jsp 页面应包含的信息

```
<aui:form action="<%=actionURL%>" enctype="multipart/form-data" method="post" name="<%=Constants.IMPORT_ACTION %>" >
    <div class="manage-main" style="padding-top: 20px;">
        <table>`

            <tr>
                <td class="lbl"><liferay-ui:message key="select-file-to-upload" /></td>
                <td><input type="file" name="fileupload" id="fileupload" size="40" /></td>
            </tr>

        </table>

    <aui:button type="submit" value="upload" name="upload" cssClass="topSpace"/>
</aui:form> 
```

* * *

**爪哇代码**

```
// you can directly cast from renderRequest to portletRequest.    
UploadPortletRequest upreq = PortalUtil.getUploadPortletRequest(portletRequest);
CsvReader csv =getCSV(upreq); 
```

请提供一些容易理解的步骤，因为我没有时间去探索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:36:54.480

您可能想看看[Liferay Faces 桥](http://www.liferay.com/community/liferay-projects/liferay-faces/demos)的 JSF2 和 Primefaces3 参考 portlet 。它们包含有关如何进行文件上传的示例代码。这将使您获得对支持 bean 代码中文件的实际引用。然后它只取决于您实际想要对该文件执行的操作以及“创建数据库条目”的含义。

您可以读入该文件，然后使用 JDBC 或 Hibernate 之类的东西将信息持久保存到数据库中。

如果您只需要存储实际文件本身，那么您可以使用 Liferay [DLAppLocalServiceUtil](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/documentlibrary/service/DLAppLocalServiceUtil.html)之类的东西将文件存储在 Liferay 媒体库中。

# coldfusion - ColdFusion = OnRequest 错误

> ID：12051800
> 
> 赞同：0
> 
> 时间：2012-08-21T09:20:39.093
> 
> 标签：coldfusion, coldfusion-8, application.cfc

查看日志，我们得到了数百个以下内容

```
"Error","jrpp-185","08/21/12","10:05:43","PATH","www.domain.com 
Agent:Mozilla/4.0 (compatible; Synapse) 
Error: An exception occurred when invoking a event handler method from Application.cfc. 
The method name is: onRequest. 
```

它们似乎*主要是*搜索机器人。我可以看到对函数的引用在 APplication.cfc 上的位置如下

```
<cffunction name="onRequest" returnType="void">
        <cfargument name="targetPage" type="String" required=true/>
        <cfsetting enablecfoutputonly="yes" requesttimeout="20">

        <cfparam name="url.refresh" default="0">
        <cfset request.strMember = Duplicate(session.strMember)/>

        <cfset request.tNow = GetTickCount()>
        <cfif url.refresh EQ 0>
            <cfset request.iCacheHr = 12/>
        <cfelse>
            <cfset request.iCacheHr = 0/>
        </cfif>

        <cflogin>
            <cfif IsDefined("session.strMember.sRoles")>
                <cfloginuser name="#session.strMember.sFirstName##session.strMember.sLastName#"
                    password="12345"
                    roles="#session.strMember.sRoles#"/>
            </cfif>
        </cflogin>

        <cfinclude template="core/incl/SessionLogger.cfm">
        <cfinclude template="core/incl/LinkTranslator.cfm">
        <cfinclude template="core/incl/udf.cfm">

        <cfinclude template="urlcheck.cfm"/>
        <cfinclude template="#Arguments.targetPage#">
    </cffunction> 
```

从那以后，任何人都可以就问题所在以及如何解决问题提出建议吗？我对 CF 还很陌生，这让我把剩下的头发都拔掉了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:48:24.453

1）您使用两种不同的编码风格

```
 <cfparam name="url.refresh" default="0">
    <cfset request.strMember = Duplicate(session.strMember)/> 
```

第一行中的无效/左打开 XML 标记和第二行中的有效（关闭）XML 标记。尝试坚持一个（最好是最后一个）。

2）您正在使用旧方法来检查正在定义的变量

```
IsDefined("session.strMember.sRoles") 
```

阅读更新（更好更快）

```
StructKeyExists(session.strMember, "sRoles") 
```

3）很可能您的代码正在调用

```
<cfloginuser ... > 
```

在每个页面请求

4) 确保所有包含的路径都是正确的，并且它们本身没有任何错误。

简化您的方法，直到您停止收到错误，然后调查究竟是什么导致它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T00:50:27.667

机器人是否访问了不存在的页面？

也许尝试将最后一行更改为：

```
<cfif fileExists(expandPath(Arguments.targetPage))>
    <cfinclude template="#Arguments.targetPage#">
<cfelse>
    <cfabort>
</cfif> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T01:29:41.797

也许您可以检测它们是否是机器人并为它们提供其他服务？取决于您希望网站的搜索友好程度：

[http://www.bennadel.com/blog/1083-ColdFusion-Session-Management-And-Spiders-Bots.htm](http://www.bennadel.com/blog/1083-ColdFusion-Session-Management-And-Spiders-Bots.htm)

# android - Phonegap 与 MonoTouch/Droid

> ID：12051801
> 
> 赞同：2
> 
> 时间：2012-08-21T09:20:44.250
> 
> 标签：android, ios, mobile, cordova, cross-platform

我们有一个即将到来的[大]项目，涉及一系列移动应用程序。不幸的是，我们还是这个市场的新手。我们最大的问题不是学习新东西，而是必须两次开发相同的应用程序，这意味着大约两倍的成本，因此我们正试图找到一个跨平台的解决方案。

由于我们的专长是 C# 和 .NET，我们对 MonoDroid/Touch 非常感兴趣，而且据我所知，它是一个成熟的框架。然而，它并不完全是跨平台的（或者我错了吗？），所以我们求助于 Phonegap，它可以让您使用 js、css 和 html 构建移动应用程序，这些技术我们觉得使用起来很舒服。

我们的应用程序将是数据密集型的，并且可能还需要由服务器“调用”，即服务器和应用程序之间可能存在双向通信。

所以我的问题是，鉴于这些应用程序，您会建议 phonegap 或 monoTouch/Droid 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:40:12.770

1.  Monotouch 不是跨平台的。它允许您创建可重用的元素，但您无法构建一次并部署到所有平台，特别是如果您的项目确实像您说的那么复杂。

2.  我对phonegap了解不多。我一直避开它。自从我上次查看它以来，它可能已经发生了变化，但据我所知，它不是很健壮，也不能创建非常好的应用程序，尤其是（再次）对于复杂的应用程序。

3.  还有另一个名为 Titanium 的跨平台框架，但与上面的两者类似，它不是很好。每天都有更多的支持，但它缺少一些关键组件，你往往会深入到一个项目中，并意识到你无法再进一步。

我的回答，你不会想听到的，是你应该为每个平台单独做这件事，然后向你的客户收费。

创建移动应用跨平台就像创建适合所有人的 T 恤。好的，所以你可以让它有弹性，你可以以一种“适合”每个人的方式设计它，但你最终会得到的东西会太大或太小，没有人会请享用。

iPhone、android、iPad、黑莓、windows phone 7、bada 等，它们都是非常不同的平台。仅仅因为它们都是手机并不能使它们完全相似。UI 的设计和显示方式各不相同，您与硬件（最终与用户）交互的方式也各不相同。案例和要点 - iPhone 当您向下查看视图时，您会创建一个导航堆栈，您可以使用标题栏中的后退按钮（其中包含当前视图的标题）进行导航。Android 您使用设备上的后退按钮导航，操作栏用于应用标题和其他“操作按钮”。

为此，我建议，如果您真的不想在本地做所有事情（这绝对是最好的选择），那么我建议您查看 Monotouch 并创建两个具有可重用组件的应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-21T10:18:09.170

使用 PhoneGap，您将创建一个 Web 应用程序。它可能看起来像一个原生应用程序，但它实际上是一个在浏览器对象中运行的 Web 应用程序。

您将编写客户端 HTML 和 javascript，就像任何其他客户端 Web 应用程序一样。您可以创建对服务器的 ajax 调用以获取您的数据并在那里执行所有常用的 C#/.Net 工作。

使用 Mono，您将创建一个客户端应用程序，并且您可以在 C#/.Net 中对该客户端进行编程。

PhoneGap 或多或少是免费的，并且可以用于 Windows、iOS 和 Android 以外的其他平台，尽管您必须为每个版本设置环境。您可以为云中的所有平台进行编译，但这会花钱。

MonoTouch/Droid 将花费你几百美元。

对于每个平台，您*都*必须进行一些额外的调整。可能给它一个原生的外观和感觉，调用不同的 API 等等。

我个人会建议 Mono 路线，因为您已经了解 C#/.Net。它会给你更快的结果。利用 MonoTouch 的免费试用版，看看它是否适合您以及是否值得购买（'touch 和 'droid 均需 698 美元）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T05:22:40.103

这取决于。

我同意原生化可以为您提供最佳性能和用户体验。如果应用程序具有要求苛刻的 UI，这当然是唯一可行的选择。但是，如果应用程序提供更多信息（例如，可能显示新闻提要），那么混合 HTML5 应用程序可能是最佳选择。iOS 上的 UIWebView 中对 HTML5 的支持在较旧的 iOS 版本中存在一些怪癖，因此请谨慎行事。在 Android 和其他平台上，HTML5 还没有完全成熟。当然不是在没有 grunt 的旧硬件或带有次优 javascript 引擎的浏览器上。

凭借您的 .NET 背景，我建议您查看[http://www.vsnomad.com](http://www.vsnomad.com)并自行评估。将一个快速演示放在一起，看看它是如何支撑的。否则，是的，走原生路线。

# mongodb - 如何计算大于数组中某个值的值

> ID：12051804
> 
> 赞同：0
> 
> 时间：2012-08-21T09:20:49.780
> 
> 标签：mongodb

数据结构如下：

```
{ 
"_id" : ObjectId("5031e3f0a606e8ef48c7da6b"), 
"hitTime" : [ 1345446896, 1345446943, 1345446991 ], 
"tag" : "a" 
} 
```

我想获得`hitTime`>1345446991 的条目，以便我可以对标签的受欢迎程度进行排名。

我该怎么做呢？或者是否有其他数据结构可以方便地进行这种增量计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:46:04.350

文档：

> 即检查“value”时，如果是数组，则检查数组中的每个值。

使用[MongoDB 文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-ValueinanArray)，您的查询应如下所示：

```
db.collectionName.find({
    hitTime : {
        $gt : 1345446991
    }
}); 
```

我不确定这是否正常工作，但你可能会明白。=)

# javascript - 如何从a中获取选定的ID

> ID：12051805
> 
> 赞同：0
> 
> 时间：2012-08-21T09:20:50.003
> 
> 标签：javascript, coldfusion, coldfusion-9

有什么帮助吗？我现在花了几个小时寻找如何做到这一点，但还没有找到任何东西。我发现的大多数事情对我来说有点太复杂了。

![我的 CFGRID](../Images/ff234b472a6b464e886b9c664c5331a0.png)

我有这个网格。我希望用户能够选择一行，然后在外面的网格中按下一个按钮。按下按钮时，所选行的 FormID 将传递给另一个 cfm 以发送电子邮件。

如果有人能指出我可以学习这个的地方，或者如果有人知道并且可以向我解释，那就太好了。

谢谢，威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:13:44.117

我认为实现您想要做的最简单的方法是使用 cfgrid 的 href 和 hrefkey 属性。您不会让他们选择按钮，但是当他们单击一行时，他们将被发送到您在 href 属性中设置的页面，并且 hrefkey 属性将作为名为 CFGRIDKEY 的 url 变量传递。

希望这可以帮助。

```
 href="#CGI.script_name#/#REQUEST.URL#/FORM/"
                hrefkey="program_id"
                highlighthref="no" 
```

# html - CSS3家谱，怎么加老婆

> ID：12051809
> 
> 赞同：7
> 
> 时间：2012-08-21T09:20:59.360
> 
> 标签：html, css, family-tree

我正在关注本[指南](http://thecodeplayer.com/walkthrough/css3-family-tree)，了解如何仅使用 CSS3 制作家谱。但我真的不知道如何结婚。

澄清一下：代码现在的作用是： ![在此处输入图像描述](../Images/008d07bf2c664d038e75e1963b754de0.png)

我要补充的是： ![在此处输入图像描述](../Images/ecdf6617119eeef7b2386389dd0819d0.png)

我知道这是一个简单的问题，但现在我有货

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-12T22:32:21.033

将丈夫/妻子放在同一个 li 元素中然后使用 CSS 连接它们怎么样？像这样的东西：

```
<style>
  .husband { float: left; }
  .wife { margin-left:10px; }
  .wife::before { 
    /* pseudo CSS, will need to be modified */
    content: '';
    position: absolute; top: 0; right: 50%;
    border-top: 1px solid #ccc;
    width: 50%; height: 20px;
  }
</style>

<li>
    <ul>
        <li>
            <a class="husband" href="#">Grand Child</a>
            <a class="wife" href="#">Wife</a>
            <ul>
               <li><a href="#">Kid</a></li>
               <li><a href="#">Kid</a></li>
            </ul>
        </li>
    </ul>
</li> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T09:26:03.713

从页面上的注释：

“注意：我正在开发这个家谱的新版本，它将在一定程度上支持 IE，并且将有多个父级，使其成为家谱的实用解决方案。”

因此，目前似乎还不支持“多父母”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-15T17:08:16.623

似乎有人[更新](http://thecodeplayer.com/experiments/css3-family-tree-multiple-parents.html)了原始代码以支持夫妻关系。祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-29T13:42:56.163

这是我采取的方法

```
<li>
  <ul>
    <li>Father</li>
    <li>Mother</li>
  </ul>
  <a href="http://www.clarkeology.com/names/clarke/21/james">James CLARKE1779 - 1860</a>
  <div itemprop="spouse">
    <a href="http://www.clarkeology.com/names/cole/19/elizabeth">Elizabeth COLE 1794 - 1865</a>
  </div>
  <ol>
    <li><a>Child</a></li>
    <li><a>Child</a></li>
    <li><a>Child</a></li>
  </ol>
</li> 
```

然后`<li>`整个树中的任何一个都可以像这样重复（尽管如果你将孩子和父母都添加到他们身上，你会得到一团糟......通常只要你越过那个视图中的“核心”人就可以添加一个或另一个。

真实示例在[http://www.clarkeology.com](http://www.clarkeology.com)上，在 /css/_tree.css 上带有带注释的 css，我为解析 GEDCOM 文件并创建必要的 html 而编写的代码在[https://github.com/pauly/ js-gedcom](https://github.com/pauly/js-gedcom)

我使用`itemprop`而不是`class`上面的，因为我实际上也将 schema.org 微格式添加到我的所有文件中，但是类可以正常工作。

前几天我发现原来的 css 时，我真的很喜欢，这很有趣。欢迎在我的代码上请求请求！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T09:30:25.737

这个怎么样？

```
<li>
    <ul>
        <li>
            <a href="#">Grand Child</a>
        </li>
        <li>
            <a href="#">Wife</a>
        </li>
    </ul>
</li> 
```

所以将最后一个孙子包装成一个ul。这为您提供了两者之间的界限，而不是介于两者之间，但我认为您的盒子模型现在不允许这样做......

# string - 操作或拆分字符串

> ID：12051810
> 
> 赞同：3
> 
> 时间：2012-08-21T09:21:05.087
> 
> 标签：string, variables, nginx, split

我有一个快速的问题，如果可能的话，这将解决我的一些问题：

是否可以使用 nginx 拆分/操作请求 URL？

我的意思是：这样的网址：sub.somewhere.com/something/somethingelse

变成：

其他东西

然后进一步进入：

子/som/eth/ing/som/eth/ing/els/e

然后使用给定的路径来检索文件（很可能，它必须存储在可以重复使用或直接使用的变量中）

这有可能吗？或者如果不是，那么究竟有什么可能，限制在哪里？

**（编辑）是否有这样做的本机可能性，包括 PERL 模块？或者这是唯一的方法？（也许是一个只做字符串处理的小模块？）**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-21T17:21:38.357

这是可能的并且相对容易，您需要做的就是将您在正则表达式上的位置与适当的反向引用相匹配

```
location ~ (sub).(somewhere).(com)/(some)(thing)/(something)(else) {
  set $var1 = $1; # =sub in above example
  set $var2 = $2; # =somewhere in above example
  set $var3 = $3; # =com in above example
  set $var4 = $4; # =some in above example
  set $var5 = $5; # =thing in above example
  set $var6 = $6; # = something in above example
  set $var7 = $7; # = elsein above example
  rewrite ^ $1/$2 last; # would be sub/somewhere
} 
```

您需要在重写之前保存反向引用，因为重写指令会将引用重置为正则表达式第一个参数中的引用（因此，如果您使用其他一些指令，例如 try_files 不这样做，您可以直接使用反向引用而不保存它们）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:36:29.947

这可以通过使用[Nginx perl 模块轻松完成](http://nginx.org/en/docs/http/ngx_http_perl_module.html)

我不知道另一种方式或本机模块来做到这一点。你可以编写自己的模块让 nginx 做这样的事情，但实际上没有必要。Perl 模块如果非常简单快速地进行字符串操作。我有在生产中使用 perl 模块完成类似任务的成功经验。

# c++ - 谁能解释一下输出？

> ID：12051811
> 
> 赞同：5
> 
> 时间：2012-08-21T09:21:05.027
> 
> 标签：c++, function

谁能解释一下输出？

```
#include<iostream>

using namespace std;  

int &fun(){   
  static int x = 10;   
  return x;   
} 

int main(){         
  fun() = 30;
  cout << fun();          
  return 0;         
} 
```

输出为 30

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T09:22:15.167

这就是静态局部变量的工作方式——它们在函数调用之间保持值。基本上`fun()`有一个静态局部变量并返回一个对它的引用，效果与使用全局变量的效果大致相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:22:09.580

您通过引用返回静态，因此当`fun() = 30`您更改它时。

这很清楚，不是吗？

基本上，`foo()`返回*对*.`x`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-21T09:31:48.650

当您调用`fun()`静态变量时，会创建一个静态变量并返回对它的引用。基本上，由于 ，`static`即使您退出函数范围，变量也不会被破坏。您使用 30 影响引用，然后调用您获得 30 的函数（第二次调用时的 x 与第一次调用时完全相同）。在这种情况下，基本上静态就像全局变量一样工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:23:56.600

AS fun 是对函数的引用，因此当您编写此行时 `fun() = 30;`，它会将 30 存储在其返回值中，即`x`，这就是您将输出设为 30 的原因。

# android - android listactivity onCheckedChangeListener

> ID：12051813
> 
> 赞同：0
> 
> 时间：2012-08-21T09:21:11.883
> 
> 标签：android, listview

我正在开发一个应用程序，我有一个`ListActivity`，它的选择模式设置为`choice_mode_multiple`. 现在我想覆盖方法，当一个项目被*选中/取消选中*时调用，我发现该`onCheckChanged()`方法只为`RadioGroup`和 compund实现`Button`。我怎样才能覆盖这样的东西`ListActivity`？还是我必须自己实施`Adapter`？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:51:29.967

如果您使用标准数组适配器和 SINGLE 或 MULTIPLE 选择模式，请使用 isItemChecked (int position) 或 setItemChecked(int position, boolean value)。[http://developer.android.com/reference/android/widget/AbsListView.html#isItemChecked(int](http://developer.android.com/reference/android/widget/AbsListView.html#isItemChecked(int) )

您还可以创建自定义适配器并使用可以容纳 onClickListener 和 CheckedChangedListener 的复选框来扩展行布局。使用搜索查找示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:07:11.217

设置 onlistitemclick 监听器为 listview ，然后在 itemclick 方法中获取 mylistView.getCheckedItemCount() ，编写要执行的操作的代码。

如果不清楚，请告诉我您在检查项目时要实施什么。

```
mylistView = (ListView)customView.findViewById(R.id.mylist);
mylistView.setAdapter(mFolderAdapter);

mylistView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

mylistView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> arg0, View v,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub

                        if(mylistView.isItemChecked(arg2)){

  //Dooperation

                            } 
// or 
if(mylistView.getCheckedItemCount()>1){
  //Dooperation
}

                }
            }); 
```

# web-services - 如何在 Visual Studio 2012 中创建 Web 服务（服务器和客户端）？

> ID：12051814
> 
> 赞同：32
> 
> 时间：2012-08-21T09:21:12.060
> 
> 标签：web-services

如何在 Visual Studio 2012 中创建 Web 服务（服务器和客户端）？就像在 2012 年之前完成的一样 [http://www.tutorialspoint.com/asp.net/asp.net_web_services.htm](http://www.tutorialspoint.com/asp.net/asp.net_web_services.htm)

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-12T20:35:19.137

创建**新项目**时，在您选择的语言下，选择**Web**，然后更改为**.NET Framework 3.5**，您将获得创建**ASP.NET WEB 服务应用程序**的选项。

![在此处输入图像描述](../Images/232fc9075650439826f1b3ce09d1f4b3.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-05-13T11:15:21.243

1.  创建一个新的空 Asp.NET Web 应用程序。
2.  解决方案资源管理器右键单击项目根目录。
3.  选择菜单项添加-> Web 服务

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-28T20:15:53.833

WCF 是一种较新的技术，在许多情况下是一种可行的替代方案。ASP 很棒并且运行良好，但我个人更喜欢 WCF。你可以在 .Net 4.5 中做到这一点。

![WCF 项目](../Images/03f213f8abc27adac9d8b99e0f0fc718.png)

![在此处输入图像描述](../Images/6280f9231235637d508955a9d60a9e66.png)

创建一个新项目。 ![在此处输入图像描述](../Images/754a82062f271b265e5a5f41115beb3f.png) 在解决方案资源管理器中右键单击项目，选择“添加服务引用” ![在此处输入图像描述](../Images/e8d3913d4df7f8ca2a82859b965337d0.png)

在新应用程序中创建一个文本框和按钮。下面是我的按钮点击事件：

```
private void btnGo_Click(object sender, EventArgs e)
    {
        ServiceReference1.Service1Client testClient = new ServiceReference1.Service1Client();
        //Add error handling, null checks, etc...
        int iValue = int.Parse(txtInput.Text);
        string sResult = testClient.GetData(iValue).ToString();
        MessageBox.Show(sResult);
    } 
```

你完成了。 ![在此处输入图像描述](../Images/49367a7b5e2fbb0fce6feb6124fbd240.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T07:31:45.000

--- 创建一个ws服务器vs2012更新3

1.  新项目

2.  选择 .net 框架 3.5

3.  asp.net 网络服务应用程序

4.  右键单击项目根目录

5.  选择添加服务参考

6.  选择wsdl

--- 如何从 wsdl 文件创建 ws 客户端？

我在 tomcat 7 下有一个 ws 服务器 Axis2，我想测试兼容性

# blackberry - 黑莓应用程序退出而不崩溃

> ID：12051819
> 
> 赞同：0
> 
> 时间：2012-08-21T09:21:29.043
> 
> 标签：blackberry

我正在做一个黑莓应用程序，虽然在模拟器上运行良好，但当我从一个屏幕切换到另一个屏幕然后又回到前一个屏幕时。奇怪的是应用程序并没有崩溃，它只是退出......控制台显示以下内容：

```
[0.0] AM: Exit MYAPP(308)
[0.0] ApplicationManagerImpl.processExited : process process switching to background:  pid=308
[0.0] AM: Foreground is requested: net_rim_bb_ribbon_app(130)
[0.0] Process MYAPP(308) cleanup started
[0.0] Process MYAPP(308) cleanup done
[0.0] AM: Foreground is set: net_rim_bb_ribbon_app(130) 
```

可能是什么问题？黑莓上是否有某种垃圾收集器正在退出我的应用程序？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:02:53.870

好吧，由于某种原因，这次没有出现在控制台上。我正在做屏幕弹出然后推送，而不是相反，导致应用程序瞬间丢失屏幕并退出。这仅发生在真实设备上，在模拟器上一切正常。

# blackberry - 5.0 OS blackberry 的浏览器字段上未显示地图 url

> ID：12051820
> 
> 赞同：1
> 
> 时间：2012-08-21T09:21:35.943
> 
> 标签：blackberry, map

当我试图在浏览器字段上显示地图 url 时，我能够在 os 6.0 及更高版本上显示它，当涉及到 OS 5.0 时，当我点击标志时，它一直显示带有登录选项的纯白屏幕在选项中并尝试登录我的谷歌凭据我收到了类似的错误

[https://accounts.google.com/ServiceLoginAuth](https://accounts.google.com/ServiceLoginAuth)

不支持指定的 HTTP 方法

通过这样做，我的问题也是我无法在浏览器上显示地图我的网址将是这样的

[http://www.advainc.com/mobileadvantage/Map/default.aspx?saddr=46.822609,-114.079847+to:46.825311,-114.078487+to:46.82565,-114.080534+to:46.827338,-114.0853137+to:46.833 -114.11006+转：46.843613,-114.11006](http://www.advainc.com/mobileadvantage/Map/default.aspx?saddr=46.822609,-114.079847+to:46.825311,-114.078487+to:46.82565,-114.080534+to:46.827338,-114.085307+to:46.843613,-114.11006+to:46.843613,-114.11006)

提前致谢

# performance - 我应该一次将多少数据读入 RAM？

> ID：12051823
> 
> 赞同：0
> 
> 时间：2012-08-21T09:21:54.000
> 
> 标签：performance

我正在编写一个读取文件的程序，对每个字节执行操作，然后将其写入另一个文件。为了节省较大文件的内存，我一次做一点，性能明显下降。读入 RAM 的大小合适？现在我任意将默认设置为 1 兆字节。但是我一次做的越多，我的程序就越快。

我在这里问的真正问题是，一个程序使用多少 RAM 会被认为是贪婪的？

# java - 文件未从 JarInputStream 完全读取

> ID：12051835
> 
> 赞同：2
> 
> 时间：2012-08-21T09:22:55.357
> 
> 标签：java, jar, io

我有一个 JarInputStream（由一个包含 JAR 文件的字节数组构成）并想从中读取一个特定的文件。所以我遍历包含的 ZipEntries 并搜索文件。然后我尝试将文件写入字节数组。

但是，文件不知何故没有被完全读取。如果我将它写入文件系统并在文本编辑器中打开它，它只会在正确读取的前几行之后包含 NULL。

代码如下所示：

```
JarInputStream is = new JarInputStream(new ByteArrayInputStream(_jarFile));
ZipEntry entry = is.getNextEntry();
while (entry != null) {                 
    if (entry.getName().endsWith(".xyz")) {
        // read the *.xyz file and load it into a byte array
        int size = (int) entry.getSize();
        byte[] _xyzFile = new byte[size];
        is.read(_xyzFile, 0, size);
        break;
    }
    entry = is.getNextEntry();
}

is.close(); 
```

该`size`变量肯定包含正确的字节数，所以我不知道为什么读取几行后就停止了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:32:12.620

`is.read(_xyzFile, 0, size);`不一定将`size`字节读入数组，但最多读`size`字节。该方法返回实际读取的字节数。

您必须实现一个循环来`is.read`多次调用或使用任何提供此类功能的实用程序库，例如`IOUtils.toByteArray(InputStream)`来自 Apache Commons-IO。

# java - java：连接数组列表中的所有哈希图

> ID：12051836
> 
> 赞同：0
> 
> 时间：2012-08-21T09:22:56.967
> 
> 标签：java, list, hashmap

我有一个哈希图列表，我想将这些哈希图合并为一个（键应该是唯一的）。我该怎么做？任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:25:48.593

一种方法是创建一个新实例`HashMap ubermap`，遍历 ubermap 的`ArrayList<HashMap>`并调用[`putAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#putAll%28java.util.Map%29)方法，一次一张地图。一个聪明的优化是给有`ubermap`问题的一个大的初始容量，这样你就可以避免许多重新哈希调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:25:05.437

`Map.Entry`您可以从哈希映射中迭代 trought条目。`entrySet()`您可以使用方法获取条目。代码应如下所示：

```
public static <X,Y> Map<X,Y> test(Collection<Map<X,Y>> maps){
    HashMap<X,Y> result = new HashMap<X,Y>();
    for (Map<X,Y> singleMap:maps){
        for(Map.Entry<X,Y> entry:singleMap.entrySet()){
            result.put(entry.getKey(),entry.getValue());
        }
    }
    return result;
} 
```

**UPD**：许多用户明智地建议使用`putAll`方法，但我忘记了。所以最好使用这段代码：

```
 public static <X,Y> Map<X,Y> test(Collection<Map<X,Y>> maps){
        HashMap<X,Y> result = new HashMap<X,Y>();
        for (Map<X,Y> singleMap:maps){
            result.putAll(singleMap);
        }
        return result;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:25:32.540

你应该看看[Map.putAll()](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#putAll%28java.util.Map%29)函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:26:06.930

循环`list`并使用将所有地图添加到结果地图[`putAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#putAll%28java.util.Map%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T09:27:04.370

Here is the way:

1.  Create a new (big) hashmap that will contain the merged key-value pairs

2.  Iterate through your list

3.  For each item of your list, iterate through the hashmap in question

4.  For each value of the hashmap, add the pair in the (big) hashmap

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-21T09:25:48.753

`Map`有方法`putAll(Map m)`。遍历您的列表并对`putAll`每个条目执行结果映射。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-21T09:25:57.077

[您可以使用 for-each 循环并使用HashMap.putAll()](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#putAll%28java.util.Map%29)从一个哈希图中的列表中一一添加映射

# android - 刷机前自定义安卓ROM应用数据

> ID：12051838
> 
> 赞同：1
> 
> 时间：2012-08-21T09:22:59.120
> 
> 标签：android, apk, android-rom

我在一家相当大的公司的 IT 部门工作，我们为所有员工配备了 Android 手机。每次有人因任何原因退出或上交手机时，我们都必须恢复出厂设置，然后为我们公司安装所有必需的应用程序，这需要时间。

我最近发现，如果您刷新自定义 ROM，您可以选择要在 ROM 中预安装的应用程序。这对我们来说是个好消息，它让我进一步思考。

所以我的问题是，有没有办法在刷 ROM 之前自定义应用程序数据？

例如，我们希望我们公司的电子邮件应用程序预先安装了正确的用户数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T10:16:53.447

看这里[http://forum.xda-developers.com/forumdisplay.php?f=613](http://forum.xda-developers.com/forumdisplay.php?f=613)，那里有一些所谓的“rom kitchens”，可以让你从 rom 中删除或添加应用程序并进行一些自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:24:24.533

我不确定用户数据是否已经在电子邮件应用程序中，但您需要反编译 ROM，将公司的应用程序放在 /system/app/ 文件夹中，然后重新编译 ROM。这将使您不必手动安装应用程序。

# c# - 无法使用 linq 将数据从列表中添加到 xml

> ID：12051839
> 
> 赞同：1
> 
> 时间：2012-08-21T09:23:07.410
> 
> 标签：c#, xml, linq

这段代码对我不起作用，我不明白为什么。

```
xmlDoc.Element("results").Add(
                new XElement("user",
                    new XAttribute("id", user.Id),
                    new XAttribute("facebookid", user.FacebookId),
                    new XAttribute("email", user.Email),
                    new XAttribute("totalpoints", totalpoints)
                    ).Add(
                            user.Answers.Select(value => new XElement("question",
                            new XAttribute("id", value.QuestionId),
                            new XAttribute("answer_id", value.AnswerId),
                            new XAttribute("points", value.Points)))
                          )
                  ); 
```

我正在尝试创建这个

```
<results>
  <user id="2323" facebookId="3254954795743957" email="david@gmail" totalPoints="">
    <question id="1" answer_id="3" points="0" />
    <question id="2" answer_id="1" points="1" />
  </user>
</results> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T10:05:19.233

```
xmlDoc.Element("results").Add(
    new XElement("user",
        new XAttribute("id", user.Id),
        new XAttribute("facebookid", user.FacebookId),
        new XAttribute("email", user.Email),
        new XAttribute("totalpoints", totalpoints),
        user.Answers.Select(value => new XElement(
                "question",
                new XAttribute("id", value.QuestionId),
                new XAttribute("answer_id", value.AnswerId),
                new XAttribute("points", value.Points)
            ))
        )
    ); 
```

问题是该`Add`方法返回，`void`因此您无法继续使用另一个结果。此外，对于您需要使用的属性，而不是.`Add``void``XAttribute``XElement`

# ruby-on-rails - Partial vs. Helper - 差异，但大多数，今天的表现

> ID：12051845
> 
> 赞同：0
> 
> 时间：2012-08-21T09:23:41.423
> 
> 标签：ruby-on-rails, performance, partial-views, helper

我只是想解决 RubyOnRails 3.2.8 中的 Partials 和 Helpers 的困境。我是新手，是的，我试图找到，但每个答案都不清楚或超过 2 年。那么有什么关系呢？

我想知道这个片段最好使用什么。帮手还是偏心？

```
<td><%= User.where("id = ?", job.created_by_id).first.email %></td>
<td><%= job.document.to_s.from(53) %></td>
<td><%= job.translation_length %></td>
<td><%= job.translation_language %></td>
<td><%= job.cost %></td>
<td><%= job.translation_type %></td>
<td><%= job.comments %></td>
<td>
  <% if job.as_soon_as_possible.to_i.equal?(0) %>
      <%= job.due_to_date %>
  <% else %>
      ASAP
  <% end %>
</td>
<td><%= job.status %></td> 
```

我都用过，都很好用，但我不确定，如果它好的话，把它放在一边。渲染部分和调用辅助方法之间的性能如何？在 2 岁时阅读一些关于它的内容，帮助者似乎要快得多。渲染局部有什么改进吗？

其次，我阅读了有关使用 partials 和 helpers 的内容，但是开发人员有很多意见。我说得对吗：助手正在使用包含更多带有 html 的 ruby​​ 代码和带有 html 的 Partials 和少量 ruby​​ 代码的片段。（根据这个想法，我上面的代码应该放在helper 中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:31:04.457

我认为，辅助方法是针对特定建议的，它们提供统一和集中的路由生成，并允许避免构建一些重复的 html 结构（与模型对象结合或不结合）。而partial是页面的一部分，一些语义独立的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:32:31.407

考虑您的代码。现在您可能列出工作，假设这些代码重复多个您创建部分的地方，例如添加/更新记录具有相同的字段，因此创建表单部分

现在，下面的代码将返回工作截止日期或尽快

```
<td>
  <% if job.as_soon_as_possible.to_i.equal?(0) %>
      <%= job.due_to_date %>
  <% else %>
      ASAP
  <% end %>
</td> 
```

因此，根据需要创建将返回截止日期或尽快返回的助手。

partial 和 helper 之间还有很多区别。如果我找到了一些有用的文章，我会与你分享。

# c# - 使用自动映射器从两个项目映射

> ID：12051852
> 
> 赞同：4
> 
> 时间：2012-08-21T09:24:02.633
> 
> 标签：c#, automapper

在我的数据层中，我有一个可以返回如下项目列表的存储库：

```
new List<Item> {
    new Item { Title = "Something", DetailId = 500 },
    new Item { Title = "Whatever", DetailId = 501 },
} 
```

当给定项目详细信息 ID 时，存储库有另一种方法可以返回这些项目的详细信息：

```
// repository.GetDetail(500) would return something like:
new ItemDetail {
    Id = 500,
    Size = "Large"        
} 
```

现在，在我的服务层中，我想将上面的列表映射成这样的：

```
new List<ServiceItem> {
    new ServiceItem { Title = "Something", Size = "Large" },
    new ServiceItem { Title = "Whatever", Size = "Medium" },
} 
```

请注意，我需要列表中的对象（`Title`在本例中）和详细对象的属性。有什么好的方法可以用 AutoMapper 映射它吗？

我曾考虑过创建一个依赖于我的存储库实例的配置文件，然后让 AutoMapper 执行详细请求，但是让 AutoMapper 获取新数据感觉有点混乱？

有没有一种干净的方法可以将两个对象映射为一个对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T20:23:32.720

一种可能性是将您的 Item 和 ItemDetail 对象包装在一个 Tuple 中，并根据该 Tuple 定义您的 Map。映射代码看起来像这样。

```
Mapper.CreateMap<Tuple<Item, ItemDetail>, ServiceItem>()
    .ForMember(d => d.Title, opt => opt.MapFrom(s => s.Item1.Title))
    .ForMember(d => d.Size, opt => opt.MapFrom(s => s.Item2.Size)); 
```

您必须自己加入正确的 Item 和 ItemDetail。如果您希望 Automapper 也将 Item 与正确的 ItemDetail 匹配，则需要更改映射，以便在解析 Size 期间，Automapper 执行查找并返回匹配的 Size。代码看起来像这样。

```
Mapper.CreateMap<Item, ServiceItem>()
    .ForMember(d => d.Size, opt => opt.MapFrom(s => itemDetails.Where(x => s.DetailId == x.Id).First().Size)); 
```

此映射使用 Automapper 的自动映射功能将 Item.Title 映射到 ServiceItem.Title。该地图使用名为 itemDetails 的 IEnumerable 来查找匹配项，但应该可以将其替换为数据库调用。现在，由于我不认为 Autmapper 的设计目的是进行这种类型的查找，因此对于大量项目而言，性能可能不是那么好。那将是要测试的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T12:21:12.767

这个博客描述了一种方法来做到这一点：[http](http://consultingblogs.emc.com/owainwragg/archive/2010/12/22/automapper-mapping-from-multiple-objects.aspx) ://consultingblogs.emc.com/owainwragg/archive/2010/12/22/automapper-mapping-from-multiple-objects.aspx 。它对每个输入对象进行一次 Map() 调用，但至少将其包装在一个助手中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T20:26:43.863

使用 ValueInjecter 而不是 AutoMapper，它可以在两者之间轻松切换，并且 ValueInjecter 支持开箱即用地从多个来源注入值。

```
serviceItem.InjectFrom(item);
serviceItem.InjectFrom(itemDetail); 
```

作为奖励，您不必像使用 AutoMapper 那样进行所有静态映射

# c - 用VS2012编译C程序

> ID：12051855
> 
> 赞同：0
> 
> 时间：2012-08-21T09:24:13.527
> 
> 标签：c, compilation, visual-studio-2012

我的程序看起来像这样

```
/* print_it.c—This program prints a listing with line numbers! */
#include <stdlib.h>
#include <stdio.h>

void do_heading(char *filename);

int line = 0, page = 0;

int main( int argv, char *argc[] )
 {
 char buffer[256];
 FILE *fp;

 if( argv < 2 )
 {
 fprintf(stderr, “\nProper Usage is: “ );
 fprintf(stderr, “\n\nprint_it filename.ext\n” );
 return(1);
 }

 if (( fp = fopen( argc[1], “r” )) == NULL )
 {
 fprintf( stderr, “Error opening file, %s!”, argc[1]);
 return(1);
 }

 page = 0;
 line = 1;
 do_heading( argc[1]);

 while( fgets( buffer, 256, fp ) != NULL )
 {
 if( line % 55 == 0 )
 do_heading( argc[1] );

Type & Run 1
nting Your Listings 27
 fprintf( stdprn, “%4d:\t%s”, line++, buffer );
 }

 fprintf( stdprn, “\f” );
 fclose(fp);
 return 0;
 }

 void do_heading( char *filename )
 {
 page++;

 if ( page > 1)
 fprintf( stdprn, “\f” );

 fprintf( stdprn, “Page: %d, %s\n\n”, page, filename );
 } 
```

使用 Win 8 + VS 2012。要编译它，打开 Developer Command Prompt，然后输入

```
cl print_it.c 
```

得到这个屏幕（一堆错误和警告）

![在此处输入图像描述](../Images/aab2c70e3a0bcb62a3ff4722c8baf30c.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:26:38.233

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:37:39.613

正如@cnicutar[提到](https://stackoverflow.com/a/12051899/151641)的，首先修复损坏的双引号并删除垃圾。

`stdprn`但是，由于Windows 上没有可用的流，因此您不会使用 Visual C++ 编译该程序

请参阅[如何使打印机在 MS VC++ Express 版中使用 C 语言工作？](https://stackoverflow.com/q/2257218/151641)有关如何解决它的详细信息。

# jquery - 哦，为什么，$.post 函数

> ID：12051856
> 
> 赞同：0
> 
> 时间：2012-08-21T09:24:16.463
> 
> 标签：jquery, ajax

现在有一段时间我正在努力使用这个功能。这是一个例子：

HTML 示例代码：

```
 <form method="POST">            
        <label>Input 1:</label><br/>
        <input type="text" name="Input1" id="Input1"/><br/>
        <input type="submit" name="Login" value="Login" id="Login"/>
    </form> 
```

PHP 示例代码（script.php）：

```
 if(isset($_POST['Input1Php']))
    {   
        $Input1 = $_POST['Input1Php'];

        if($Input1 == "Random Condition")
        {
            echo "All good";
        }else
        {
            echo "Hell no!";
        }
    } 
```

jQuery 示例代码（我也尝试使用 .submit()，没有改变任何东西）：

```
$('#Login').click(function()
{
    var Input1JS = $('#Input1 ').val();

    if("Something"=="Random Condition")
    {   
        $.post('script.php',{Input1Php:Input1JS},function(data)
        {
            if(data=="All good")
            {
                   Show me that
            }else
            {
                   Show me this
            }
        });
    }else
    {
        Just don't do anything
    }
}); 
```

该脚本适用于 .keyup 等查找，但是当我将其更改为单击或提交时，它只是不做任何事情。我不明白为什么。我错过了什么吗？$.post 是否不适用于这些事件？

PS：请不要将 $.post 更改为其他内容。我的意思是了解此功能如何或是否适用于这些事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:34:02.673

由于您的问题缺少一些信息，因此您的页面可能正在发回，因此它不会等待`$.post`返回。尝试改变

```
<input type="submit" name="Login" value="Login" id="Login"/> 
```

至

```
<input type="button" name="Login" value="Login" id="Login"/> 
```

看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T10:17:15.477

浏览器通常对按钮有一些默认操作。在这种情况下，帖子数据将通过传统方式提交。如果您想防止这种行为，只需在回调`return false;`末尾添加一个。`click`

# html - 绝对定位嵌套元素上的 z-index

> ID：12051857
> 
> 赞同：5
> 
> 时间：2012-08-21T09:24:25.623
> 
> 标签：html, css, css-position, z-index

我有一些绝对定位的盒子。其中一个有嵌套的弹出窗口，比框大。我想在所有框前弹出。

设置`z-index: 100`框和`z-index: 200`弹出窗口无济于事。弹出框后按文档顺序排列的框似乎超出了弹出框。我想念 z 指数的什么？

```
div {
    border: 1px solid black;
}

.container {
    position: relative;
}

.foo {
    position: absolute;
    background-color: white;
    width: 5em;
    z-index: 100;
}

#b0 {
    top: 0em;
    left: 0em;
}

#b1 {
    top: 3em;
    left: 1em;
}

#b2 {
    top: 6em;
    left: 2em;
}

#b3 {
    top: 9em;
    left: 3em;
}

#b4 {
    top: 12em;
    left: 4em;
}

.popup {
    z-index: 200;
    position: absolute;
    left: 1em;
    top: -1em;
    width: 8em;
    height: 8em;
    background-color: grey;
}
```

```
<div class="container">
    <div class="foo" id="b0">
        <span>absolute box b0</span>
    </div>
    <div class="foo" id="b1">
        <span>absolute box b1</span>
        <div class="popup">
            popup box inside b1
        </div>
    </div>
    <div class="foo" id="b2">
        <span>absolute box b2</span>
    </div>
    <div class="foo" id="b3">
        <span>absolute box b3</span>
    </div>
</div>
```

[http://jsfiddle.net/B59pR/2/](http://jsfiddle.net/B59pR/2/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-15T13:53:11.733

您需要查看[https://css-tricks.com/almanac/properties/z/z-index/](https://css-tricks.com/almanac/properties/z/z-index/)以快速了解这一切。特别是在它说的部分：

> 另请注意，嵌套起着重要作用。如果元素 B 位于元素 A 之上，则元素 A 的子元素永远不会高于元素 B。

你在那里所做的就是从低级元素中获取子元素，并尝试让它们高于高级元素的子元素。

您需要做的就是获取 z-index 101 上的 #b1 框：

```
div {
    border: 1px solid black;
}

.container {
    position: relative;
}

.foo {
    position: absolute;
    background-color: white;
    width: 5em;
    z-index: 100;
}

#b0 {
    top: 0em;
    left: 0em;
}

#b1 {
    top: 3em;
    left: 1em;
}

#b2 {
    top: 6em;
    left: 2em;
}

#b3 {
    top: 5em;
    left: 3em;
}

#b1 {
    z-index: 101;
}

.popup {
    z-index: 200;
    position: absolute;
    left: 3em;
    top: -1em;
    width: 8em;
    height: 8em;
    background-color: grey;
}
```

```
<div class="container">
    <div class="foo" id="b0">
        <span>absolute box b0</span>
    </div>
    <div class="foo" id="b1">
        <span>absolute box b1</span>
        <div class="popup">
            popup box inside b1
        </div>
    </div>
    <div class="foo" id="b2">
        <span>absolute box b2</span>
    </div>
    <div class="foo" id="b3">
        <span>absolute box b3</span>
    </div>
</div>
```

我把这个固定在这个[小提琴](http://jsfiddle.net/B59pR/23)上，让你理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T16:17:09.690

核心思想是元素以 DOM 树顺序（深度优先）递归呈现：

1.  元素本身的背景和边框
2.  以负 zindex 定位的孩子
3.  非定位内容
4.  zindex 为零（或缺失）的定位子级
5.  以正 zindex 定位的孩子

这意味着父母的树顺序优先于其孩子的 z-index。

在有问题的示例中，所有`foo`框都具有相等的 zindex=100 并且在步骤 3 中进行了树排序。弹出窗口的一些“叔叔”在父母之后呈现。

参考：

[https://www.w3.org/TR/CSS22/visuren.html#propdef-z-index](https://www.w3.org/TR/CSS22/visuren.html#propdef-z-index) [https://www.w3.org/TR/CSS22/zindex.html](https://www.w3.org/TR/CSS22/zindex.html)

# php - php-csv-parser 无法正常工作

> ID：12051858
> 
> 赞同：0
> 
> 时间：2012-08-21T09:24:28.067
> 
> 标签：php, csv

我使用 php-csv-parser 来解析我网站中的 csv 文件。在我的 csv 文件中，我有要存储在表中的数字列表。

如果我在 openoffice.org 中创建 csv 文件，它工作正常。如果我使用 ms office 创建了 csv 文件，则会产生问题。

在我的 csv 文件中，我有如下数字，

1001 1002 1003 1004

如果我给，1,1001 2,1002 3,1003

当我将 csv 存储在 openoffice.org 中时，上述方法也可以正常工作。

但我在 msoffice csv 文件中创建了上述格式，它无法正确解析。

当我打印它显示的数组时，

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => 1000000001
2
            [2] => 1000000002
3
            [3] => 1000000003
4
            [4] => 1000000004
5
            [5] => 1000000005
        )

) 
```

它显示了一个数组中的所有记录。

现在我需要是否以任何格式创建 csv，或者正常我需要正确解析值。

就像每个数据的解析一样，不像上面那样。

否则你能建议我任何其他的 csv 解析器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:01:18.177

我找到了备用 CSV 解析器。

试试这个[http://code.google.com/p/parsecsv-for-php/](http://code.google.com/p/parsecsv-for-php/)

效果很好。如果我在记事本中创建数据并将其保存为 CSV。那也工作正常。即使我用（，）给出行值，它也会将每一行解析为记录。喜欢，

1,20 2,21 3,22 4,23

它解析文件并以数组的形式给出值，

```
Array
(
    [0] => Array
        (
            [0] => 1
            [1] => 20
        )

    [1] => Array
        (
            [0] => 2
            [1] => 21
        )

    [2] => Array
        (
            [0] => 3
            [1] => 22
        )

    [3] => Array
        (
            [0] => 4
            [1] => 23
        )

) 
```

# soap - 用合适的值替换空值

> ID：12051861
> 
> 赞同：0
> 
> 时间：2012-08-21T09:24:35.657
> 
> 标签：soap, wso2esb

我有以下肥皂反应。现在我想用合适的值替换空值。我怎样才能实现它？

```
 <?xml version='1.0' encoding='utf-8'?>
            <soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soapenvelope">
                  <soapenv:Body>
                    <Entries xmlns="http://ws.wso2.org/dataservice">
                       <Entry>
                             <empId>xxx</empId>
                             <empName>yyy</empName>
                             <allocatedDesk>null</allocatedDesk>
                       </Entry>
                    </Entries>
                   </soapenv:Body>
            </soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:26:14.760

您可以使用 XSLT 替换“null”：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xpath-default-namespace="http://ws.wso2.org/dataservice" version="2.0">
    <xsl:output method="xml" encoding="utf-8" indent="yes"/>

    <xsl:template match="/soapenv:*">
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="allocatedDesk[text()='null']">
        <xsl:copy>
            <xsl:value-of select="'YOUR DESIRED TEXT'"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*|node()|@*">
        <!-- copy all elements -->
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

xslt 中介器用于在 WSO2 中的 MessageContext 上应用 XSLT。请参阅文档： [http ://wso2.org/project/esb/java/3.0.1/docs/mediators/xslt.html](http://wso2.org/project/esb/java/3.0.1/docs/mediators/xslt.html)

# sql - 是否可以在 SQL 中使用 IF/Else？

> ID：12051863
> 
> 赞同：3
> 
> 时间：2012-08-21T09:24:47.197
> 
> 标签：sql, database

是否可以在 SQL 中使用 if/else？如果我有一个名为`supplier`列的表：`sid`-> 主键，`sname`并且`city`.

然后我希望：

1.  `select sid from supplier where city="taipei"`如果不为空。
2.  或者`select sid from supplier where city="tainan"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:33:52.783

是的你可以。我不知道其他 DBMS，但我在我的存储过程中的 Microsot SQL Server 中使用过这样的东西；

```
IF EXISTS
   (SELECT [sid] FROM [supplier]  WHERE [city]= "taipei")

select sid from supplier where city="taipei"  // your true condition query
ELSE
select sid from supplier where city="tainan" 
```

在 MySQL From this [link](http://forums.digitalpoint.com/showthread.php?t=1283130)中，事实证明这也是可能的。看;

```
IF EXISTS(SELECT * FROM tbl_name WHERE category_code ='some-category-code') THEN UPDATE tbl_name SET active='0' WHERE category_code = 'some-category-code' END IF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:30:06.230

目前还不清楚你想做什么（我把我之前的假设留在下面）。

您想将优先级关联到您的供应商，以便选择台北的供应商，但如果它不可用，则选择台南。

在这种特定情况下，您可以使用：

```
SELECT sid FROM supplier WHERE city = (
    SELECT MAX(city) FROM supplier WHERE city IN ('Taipei', 'Tainan')
); 
```

内部子 SELECT 将检索台北，如果不可用，则检索台南。

这利用了台北在字典上大于台南的事实，但是如果您想要更灵活的解决方案，MAX 将无法工作。在这种情况下，您将更改子选择以按可取的顺序对城市进行排序（丢失的城市当然是不可取的），然后获取最可取的一个：

```
SELECT sid FROM supplier WHERE city = (
    SELECT city FROM supplier ORDER BY CASE
        WHEN city = 'Taipei' THEN 1
        WHEN city = 'Tainan' THEN 2
        WHEN city = 'New York' THEN 3
        ELSE 4
     END
     LIMIT 1
); 
```

现在的子选择将首先检索台北，但缺少台北它将到达台南等等。

请注意，如果您只需要一个 SID，则可以更简单地执行此操作：

```
SELECT sid FROM supplier ORDER BY CASE
        WHEN city = 'Taipei' THEN 1
        WHEN city = 'Tainan' THEN 2
        WHEN city = 'New York' THEN 3
        ELSE 4
     END
     LIMIT 1 
```

这将检索所有供应商，但台北的供应商（如果有）将首先出现；并且 LIMIT 1 将截断对该第一行的响应。

*以下解决方案不适用*

这将从城市为台北或台南的供应商处获得 sid（这当然意味着该城市不是空的！）：

```
SELECT sid FROM supplier WHERE city IN ('Taipei', 'Tainan'); 
```

如果 sid 不为空，这将从供应商那里获得 sid：

```
SELECT sid FROM supplier WHERE city IN ('Taipei', 'Tainan') AND sid IS NOT NULL; 
```

这将从上面的供应商处获取 sid，如果 sid 为空，则替换它。

```
SELECT CASE WHEN sid IS NULL then 'Empty' ELSE sid END AS sid
    FROM supplier WHERE city IN ('Taipei', 'Tainan'); 
```

也许您应该提供两三个具有预期结果的示例行。

**编辑**：对不起，我现在看到 sid 是一个主键，这意味着它永远不应该为空。这意味着案例 2 和 3 永远不会适用。

那么也许您的意思是*sname*不为空？：

```
SELECT sid FROM supplier WHERE city IN ('Taipei', 'Tainan')
    AND sname IS NOT NULL AND sname != ''; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:38:49.053

以下选择台北有供应商，否则选择台南供应商。如果它们都不存在，则不会返回任何内容。

```
select sid
from supplier
where city = 'Taipei'

union all

select sid
from supplier
where city = 'Tainan' 
  and not exists (select 1 from supplier where city = 'taipei') 
```

# java - Sqlite 不允许 WHERE 子句

> ID：12051864
> 
> 赞同：-2
> 
> 时间：2012-08-21T09:24:49.053
> 
> 标签：java, android, sqlite

我正在开发一个应用程序，我在其中制作了 sqlite 数据库。所以有一个带有 3 个字段的表

*   1._id
*   2.应用名称
*   3.评分

为此，我需要在 Last Field(Rating) 中设置数据，条件`_id = 1`是这样的……但是从 Post 中我发现 Sqlite 不允许 where 子句，那么我该怎么做呢？

```
INSERT INTO Packageinformation(appRating)VALUES (3) where _id=1; 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:27:40.050

您必须使用更新，而不是插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:30:20.570

也许这就是你需要的：

```
UPDATE Packageinformation SET appRating = 3 WHERE _id = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:28:37.283

INSERT INTO 向数据库中插入数据，WHERE 子句仅用于 SELECT，即读取行。

带有 WHERE 子句的 INSERT INTO 是无稽之谈。

如果要更新行，请使用 UPDATE（有关详细信息，请参阅文档）。

您也可以使用 REPLACE INTO，但要小心，因为它可能会将所有其他字段设置为其默认值。

# jquery - 使用 jQuery 检查表单字段上的正整数

> ID：12051870
> 
> 赞同：0
> 
> 时间：2012-08-21T09:25:06.787
> 
> 标签：jquery, regex, integer

首先请在 JSfiddle 中查看我的示例：http: [//jsfiddle.net/WMxKk/1/](http://jsfiddle.net/WMxKk/1/)

您可以看到，当您单击提交时，如果这些字段尚未填写，它会阻止您。但我也想检查某些字段是否为整数？

我用来检查的当前代码似乎不起作用：

```
else if (required[i] == "vidHeight" && intRegex.test(input.val())) {
            // Check certain fields are positive intergers
            input.addClass("needsfilled");
            $('#' + required[i]).after('<p style="font-weight:bold;" id="' + required[i] + '_error">' + interror + '</p>');
            errornotice.fadeIn(750); 
```

if 语句本身：

```
required[i] == "vidHeight" && intRegex.test(input.val()) 
```

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:35:08.910

你不需要否定正则表达式吗？如果它是您要查找的属性 && 它不是数字，则显示错误。

```
required[i] == "vidHeight" && !intRegex.test(input.val()) 
```

# grails - 尝试在 grails 中实现时间表

> ID：12051874
> 
> 赞同：1
> 
> 时间：2012-08-21T09:25:39.277
> 
> 标签：grails

我正在从事大学项目，它有许多领域，如课程、部门、学院等。我想为学生制定一个学期的时间表。那么是否有任何可用的插件，就像我们为日历提供的一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:57:43.740

您可能（也可能不会）从使用 FullCalendar（一种基于 JavaScript 的解决方案，类似于 Google 日历）中受益。这里有一个可用的插件：

[http://grails.org/plugin/full-calendar](http://grails.org/plugin/full-calendar)

这里还有一些关于在 Grails 中集成 FullCalendar 的博客文章：

[http://www.craigburke.com/blog/2012/02/09/creating-google-calendar-in-grails-part-1-the-model/](http://www.craigburke.com/blog/2012/02/09/creating-google-calendar-in-grails-part-1-the-model/)

# java - 创建数组，继承

> ID：12051882
> 
> 赞同：0
> 
> 时间：2012-08-21T09:25:59.063
> 
> 标签：java, arrays, inheritance

我正在为即将到来的考试学习并解决示例问题，但被困在问题的第四部分。到目前为止的代码如下，其中评论了问题。

```
/*Part 1\. Write a class Employee to encapsulate the notion of an employee. 
The class should include a name and a department (both of type String), 
an all-args constructor, and a method to print the details of the employee on the screen. 
It should also provide an appropriate equals method 
(equality of employees requires that name and department be the same). 
Check it by compiling. */

public class Employee {

public String name;
public String department;

public Employee(String n, String d) {
    name = n;
    department = d;
}

public void print() {
    System.out.println("Employee's name: " + name);
    System.out.println("Employee's department: " + department);
}

public boolean equals(Employee e) {
    return(name==e.name&&department==e.department);
}
} 
```

第二部分

```
/* A tradesman is an employee with a trade such as “carpenter” or “painter”. 
Write a class Tradesman to encapsulate the notion of a tradesman. 
It should include a method to print out the tradesman’s details. 
Make the class by inheritance from Employee. 
An employee’s trade is not significant for equality. 
Check the class by compiling. */

public class Tradesman extends Employee {

public String trade;

public Tradesman(String n, String d, String t) {
    super(n, d);
    trade = t;
}

public void setTrade (String newTrade) {
    trade = newTrade;
}

public void print() {
    System.out.println("Tradesmans name: " + name);
    System.out.println("Tradesmans department: " + department);
    System.out.println("Tradesmans trade: " + trade);
}
} 
```

下一部分是我卡住的地方，我知道我应该有一个构造函数 Staff() 来创建一个数组，我可以在其中存储员工和商人我只是不知道如何去做。所有指针表示赞赏。

```
/* A staff is a collection of employees, some of whom are tradesmen. 
Write a class Staff to encapsulate the notion of a staff. 
The members of staff should be stored in an array (which will typically not be full). 
Include methods hire to hire and fire to fire a staff member, 
as well as method put to print out a complete list of the staff members. 
Check it by compiling.*/

import java.util.ArrayList;
import java.util.Arrays;

public class Staff {

private ArrayList emp = new ArrayList();

public Staff() {
}

public void hire(Employee employee) {
    emp.add(employee);
}

public void fire(Employee employee) {
    emp.remove(employee);
}

public void put() {
    // get array 
Object ia[] = emp.toArray(); 
for(int i=0; i<ia.length; i++) 
System.out.println("Employee details: " + ia[i]); 
 } 
} 
```

正在使用以下程序进行测试：

```
class StaffTest { 

public static void main(String[] args) {  
Staff personnel = new Staff();
    Employee e1 = new Employee("Mike","Sales");
    Employee e2 = new Tradesman(
                    "Fred","Engineering","Welder");
    Employee e3 = new Employee("Pat","Sales");
    Employee e4 = new Tradesman(
                    "Jean","Finishing", "Painter");
    Employee e5 = new Employee("Bill","Marketing");
    Employee e6 = new Tradesman(
                    "Anne","Engineering", "Fitter");
    Employee e7 = new Tradesman(
                    "Paul","Design", "Draughtsman");
    Employee e8 = new Tradesman(
                    "Eddy","Finishing","Painter");
    Employee e9 = new Employee("John","Despatch"); 
    personnel.hire(e1); personnel.hire(e2); 
    personnel.hire(e3); personnel.hire(e4); 
    personnel.hire(e5); personnel.hire(e6);
    personnel.hire(e7); personnel.hire(e8); 
    personnel.hire(e9); 
    personnel.put(); System.out.println();
    personnel.fire(e1); personnel.fire(e5); 
    personnel.fire(e9);
    personnel.put(); System.out.println();
    personnel.fire(new Tradesman(
                    "Eddy", "Finishing", "Painter"));               
    personnel.put(); 
}
} 
```

我得到一个奇怪的输出：

员工详细信息：Employee@4e82701e

员工详细信息：Tradesman@558ee9d6

员工详细信息：Employee@199a0c7c

员工详细信息：Tradesman@50a9ae05

员工详细信息：Employee@33dff3a2

员工详细信息：Tradesman@33f42b49

员工详细信息：Tradesman@6345e044

员工详细信息：Tradesman@86c347

员工详细信息：Employee@f7e6a96

对此的任何建议以及对上述实施的任何提示/改进将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:39:49.883

您将需要一个`Staff`包含以下集合的类`Employees`

这是一些`groovy`用作伪代码的代码（所以你不能只是复制它:-)）

```
class Staff {

    def members = [:] // A collection

    void hire(Employee employee) {
        // Add to collection
    }

    void fire(Employee employee) {
        // Remove from collection
    }

    void print() {
        // iterate over collection and print content
    }
} 
```

* * *

去你自己的例子......

```
public class Staff {

    private Employee[] emp = new Employee[100];

    public Staff() {
    }

    public void hire() {
    }
} 
```

但是您应该考虑使用 an`ArrayList`代替，因为您可以通过这种方式更轻松地操作集合。但我不确定你的老师是否允许这样做。否则它会是这样的：

```
public class Staff {

    private ArrayList<Employee> emp = new ArrayList<Employee>();

    public Staff() {
    }

    public void hire() {
    }
} 
```

将此添加到您的`Employee`课程中：

```
public class Employee {
    ... // all your code

    @Override
    public String toString() {
        // Create a string by using StringBuilder.append() and return sb.toString();
    }
} 
```

做同样的事情，`Tradesman`但首先调用 `super.toString() 并从这个类中添加额外的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:40:11.110

> 员工是员工的集合，其中一些是商人。

看？员工应该是员工的集合。那么你为什么要扩展它`tradesman`呢？

您必须考虑三件事：

您不必为`Staff`. 它应该是一个包含 a `collection`of `Employee`s 的类。

`Tradesman`继承自您`Employee`不需要担心将此类对象添加到该集合中。您可以从该集合中的两个类中进行实例化。

而且，您需要一些函数来将对象添加到该集合中/从该集合中移除对象。我相信您需要为此`LinkedList`使用`collecetion`.

# performance - 测量网络上的 ZeroMQ 性能

> ID：12051887
> 
> 赞同：3
> 
> 时间：2012-08-21T09:26:09.563
> 
> 标签：performance, networking, zeromq

这可能是一个非常幼稚的问题，但我真的是这方面的新手。

我想根据不同的通信模式测试 0MQ 性能（延迟、吞吐量）：REQ/REP、PUB/SUB、PUSH/PULL、ROUTER/DEALER 等等，......并估计性能方面的好坏， 0MQ 将处理我们在软件中遇到的各种通信场景。

当一切都在同一台机器上运行时，根据消息大小等进行测量和进行基本统计相对容易。我确定我的消息何时发送，何时接收。

但是，如果没有公共时间参考（我的意思是足够准确），我如何在网络上进行测量？我是否测量往返行程（从机器 A 到机器 B 并返回）？这是一个有意义的测试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T10:09:45.537

ZeroMQ 自带性能测试工具；查看 perf/ 目录。例如，为了测试吞吐量，在一台机器上运行 local_thr，在另一台机器上运行 remote_thr。您可以设置消息大小和计数。使用足够的消息进行测试以获得准确的数字（测试应运行至少 5-10 秒）。

# python - ImportError：无法导入名称线程

> ID：12051895
> 
> 赞同：5
> 
> 时间：2012-08-21T09:26:19.463
> 
> 标签：python, windows, python-3.x

这是我第一次学习 python，我继续尝试从[这篇博客文章](http://www.saltycrane.com/blog/2008/09/simplistic-python-thread-example/)中进行线程化。问题是它似乎已经过时了：

```
import time
from threading import Thread

def myfunc(i):
    print ("sleeping 5 sec from thread %d" % i)
    time.sleep(5)
    print ("finished sleeping from thread %d" % i)

for i in range(10):
    t = Thread(target=myfunc, args=(i,))
    t.start() 
```

如何运行此代码而不会出现此错误：

```
$ python helloworld.py
Traceback (most recent call last):
  File "helloworld.py", line 1, in <module>
    import threading
  File "c:\Documents and Settings\Hermione\learningPython\threading.py", line 2, in <module>
    from threading import Thread
ImportError: cannot import name Thread 
```

奇怪`threading.py`的是，**我已经删除了那个文件**（并且它一直出现！！）和一个神秘的`__PyCache__`文件夹。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-21T09:30:41.097

您的问题是您*曾经有*一个名为 的文件`threading.py`，它可能留下了一个名为 threading.pyc 的字节码文件。

你也必须删除它。

类似的问题[在这里](https://stackoverflow.com/questions/11949200/pygame-importerror-no-module-named-locals-rasberry-pi)。

**编辑：**意识到您正在使用 python3，也删除该[`__pycache__`](http://www.python.org/dev/peps/pep-3147/)目录（这是使用 python3.2 及更高版本的文件所在的位置）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-21T09:27:24.717

您已命名您的文件，该文件`threading.py`以相同的名称隐藏标准库模块。..不要那样做:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:31:44.977

您需要删除 threading.pyc 以及 threading.py 文件，或者如果您使用的是 Python 3.2，则需要删除该`__pycache__`目录。

# xml - XSD - 需要两个单独的选择选项

> ID：12051896
> 
> 赞同：1
> 
> 时间：2012-08-21T09:26:31.717
> 
> 标签：xml, xsd, choice

我正在写一些 XSD，我对`<choice>`标签只有一个基本的了解。我让它与一个部分一起工作，但不是另一个具有`attribute`.

例如，所有元素都是可选的，但如果我没有一个，那么我需要另一个。如果有 2 个元素，这很好，但我有 3 个。

查看下面的架构部分。我可以有`message`或`scan`没有`include`，或者我可以有`include`但没有`message`或`scan`。

```
 <xs:element name="messages">
        <xs:complexType>
          <xs:sequence>
            <xs:element minOccurs="0" ref="n:properties"/>

        <xs:choice>
          <xs:sequence>
            <xs:element ref="n:message" maxOccurs="unbounded"/>
            <xs:element ref="n:scan" minOccurs="0"/>
          </xs:sequence>

          <xs:element ref="n:scan"/>
        </xs:choice>

              <xs:attribute name="include"/>
          </xs:sequence>
        </xs:complexType>

  </xs:element> 
```

目前，这是可行的`message`，`scan`但显然给了我一个错误`include`，因为我还没有选择。

谁能给我看一些我会怎么做的样本`(message OR scan) OR include`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:35:47.163

到目前为止，说“A 或 B 或 C”的最简单方法是让 A、B 和 C 都成为元素并编写

```
<xs:choice>
  <xs:element ref="A"/>
  <xs:element ref="B"/>
  <xs:element ref="C"/>
</xs:choice> 
```

另一种方法是说“包含来自另一个文件的消息与指定消息不同”并定义两者`n:messages`（包含 a`message`或 a `scan`）和`n:message-inclusion`（指向另一个文件）。在父元素中允许任一。或者定义一个抽象`message-thingy`元素并将`n:messages`and`n:message-inclusion`放入它的替换组中。

第二种选择：转移到 XSD 1.1 并使用断言来强制执行规则，即`include`当子级不存在时属性存在。

# javascript - 如何获取 值？

> ID：12051898
> 
> 赞同：18
> 
> 时间：2012-08-21T09:26:31.557
> 
> 标签：javascript

有一段代码，但不能使用`<id>`标签。

那么，我怎么去`<span> 1 2 3 4`？

```
<div id="test">
    <span>1</span>
    <span>2</span>
    <span>3</span>
    <span>4</span>
<div> 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-21T09:30:07.433

试试这个

```
var div = document.getElementById("test");
var spans = div.getElementsByTagName("span");

for(i=0;i<spans.length;i++)
{
  alert(spans[i].innerHTML);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-21T09:39:05.703

```
var test = document.getElementById( 'test' );

// To get the text only, you can use "textContent"
console.log( test.textContent ); // "1 2 3 4" 
```

`textContent`是标准方式。`innerText`是用于旧版 IE 的属性。如果您想要尽可能跨浏览器的东西，请递归使用`nodeValue`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-21T09:31:42.127

没有 jQuery 标签，所以我假设是纯 JavaScript

```
var spanText = document.getElementById('targetSpanId').innerText; 
```

是你需要的

但在你的情况下：

```
var spans = document.getElementById('test').getElementsByTagName('span');//returns node-list of spans
for (var i=0;i<spans.length;i++)
{
    console.log(spans[i].innerText);//logs 1 for i === 0, 2 for i === 1 etc
} 
```

[这是一个小提琴](http://jsfiddle.net/8hWeX/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T09:32:38.757

```
<div id="test">
    <span>1</span>
    <span>2</span>
    <span>3</span>
    <span>4</span>
</div>
<div id="test2"></div>

<script type="text/javascript">
    var getDiv = document.getElementById('test');
    var getSpan = getDiv.getElementsByTagName('span');​​​
    var divDump = document.getElementById('test2');

    for (var i=0; i<getSpan.length; i++) {
        divDump.innerHTML = divDump.innerHTML + ' ' + getSpan[i].innerHTML;
    }
</script> 
```

​</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-21T09:31:49.227

纯javascript会是这样的

```
var children = document.getElementById('test').children; 
```

如果您使用的是 jQuery，它将是这样的

```
$("#test").children() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-03T16:32:04.170

您可以使用 querySelectorAll 获取所有 span 元素，然后使用新的 ES2015 (ES6) 扩展运算符将 querySelectorAll 返回的 StaticNodeList 转换为跨度数组，然后使用 map 运算符获取项目列表。

请参见下面的示例

```
([...document.querySelectorAll('#test span')]).map(x => console.log(x.innerHTML))
```

```
<div id="test">
    <span>1</span>
    <span>2</span>
    <span>3</span>
    <span>4</span>
<div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-05T17:59:45.403

**您需要更改您的代码如下： -**

```
<html>
<body>

<span id="span_Id">Click the button to display the content.</span>

<button onclick="displayDate()">Click Me</button>

<script>
function displayDate() {
   var span_Text = document.getElementById("span_Id").innerText;
   alert (span_Text);
}
</script>
</body>
</html> 
```

**完成此操作后，您将在警报中获得标签值。**

# php - Crop from the center and resize in PHP

> ID：12051902
> 
> 赞同：1
> 
> 时间：2012-08-21T09:27:07.880
> 
> 标签：php, image, resize, crop

I want to have a function that resizes to a specific height en weight of an image without losing the aspect ratio. So first i want to crop it and then resizing it.

This is what i got so far:

```
 function image_resize($src, $dst, $width, $height, $crop=1){

  if(!list($w, $h) = getimagesize($src)) return "Unsupported picture type!";

  $type = strtolower(substr(strrchr($src,"."),1));
  if($type == 'jpeg') $type = 'jpg';
  switch($type){
    case 'bmp': $img = imagecreatefromwbmp($src); break;
    case 'gif': $img = imagecreatefromgif($src); break;
    case 'jpg': $img = imagecreatefromjpeg($src); break;
    case 'png': $img = imagecreatefrompng($src); break;
    default : return "Unsupported picture type!";
  }

  // resize
  if($crop){
    if($w < $width or $h < $height) return "Picture is too small!";
    $ratio = max($width/$w, $height/$h);
    $h = $height / $ratio;
    $x = ($w - $width / $ratio) / 2;
    $w = $width / $ratio;
  }
  else{
    if($w < $width and $h < $height) return "Picture is too small!";
    $ratio = min($width/$w, $height/$h);
    $width = $w * $ratio;
    $height = $h * $ratio;
    $x = 0;
  }

  $new = imagecreatetruecolor($width, $height);

  // preserve transparency
  if($type == "gif" or $type == "png"){
    imagecolortransparent($new, imagecolorallocatealpha($new, 0, 0, 0, 127));
    imagealphablending($new, false);
    imagesavealpha($new, true);
  }

  imagecopyresampled($new, $img, 0, 0, $x, 0, $width, $height, $w, $h);

  switch($type){
    case 'bmp': imagewbmp($new, $dst); break;
    case 'gif': imagegif($new, $dst); break;
    case 'jpg': imagejpeg($new, $dst); break;
    case 'png': imagepng($new, $dst); break;
  }
  return true;
} 
```

The function is working fine, but its crops from the upper leftcorner. I want it to crop from the center.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:43:34.820

You have to calculate cropped image shift for imagecopyresampled():

Keep original size before you calculate new:

```
// resize
$originalW = $w;
$originalH = $h;
if ($crop) {
... 
```

And replace Your imagecopyresampled by this:

```
imagecopyresampled($new, $img, 0, 0, ($originalW - $width)/2, ($originalH - $height)/2, $width, $height, $w, $h); 
```

You can check manual [here](http://cz2.php.net/manual/en/function.imagecopyresampled.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T14:48:59.050

我解决了图像中的黑色区域。现在这个脚本调整大小、裁剪和居中。最终代码在这里：

```
if(!list($w, $h) = getimagesize($src)) return array(false,"Unsupported picture type!");

$type = strtolower(substr(strrchr($src,"."),1));
if($type == 'jpeg') $type = 'jpg';

switch($type){
    case 'bmp': $img = imagecreatefromwbmp($src); break;
    case 'gif': $img = imagecreatefromgif($src); break;
    case 'jpg': $img = imagecreatefromjpeg($src); break;
    case 'png': $img = imagecreatefrompng($src); break;
    default : return array(false,"Unsupported picture type!");
}

// resize
$originalW = $w;
$originalH = $h;
if($crop){
    if ($w < $width or $h < $height) return array(false,"Picture is too small! Min size $width px X $height px");
    $ratio = max($width/$w, $height/$h);
    $h = $height / $ratio;
    $x = ($w - $width / $ratio) / 2;
    $w = $width / $ratio;
} else {
    if($w < $width and $h < $height) return array(false,"Picture is too small! Min size $width px X $height px");
    $ratio = min($width/$w, $height/$h);
    $width = $w * $ratio;
    $height = $h * $ratio;
    $x = 0;
}

$new = imagecreatetruecolor($width, $height);

// preserve transparency
if($type == "gif" or $type == "png"){
    imagecolortransparent($new, imagecolorallocatealpha($new, 0, 0, 0, 127));
    imagealphablending($new, false);
    imagesavealpha($new, true);
}
imagecopyresampled($new, $img, 0, 0, ($w - $width)/2, ($h - $height)/2,  $width,  $height, $w - (($w - $width)/2), $h - (($h - $height)/2) );

switch($type){
    case 'bmp': imagewbmp($new, $dst); break;
    case 'gif': imagegif($new, $dst); break;
    case 'jpg': imagejpeg($new, $dst); break;
    case 'png': imagepng($new, $dst); break;
}
return array(true,$dst); 
```

# php - Symfony 2 - Sonata Admin 表单字段选择外部源

> ID：12051909
> 
> 赞同：1
> 
> 时间：2012-08-21T09:27:27.210
> 
> 标签：php, symfony, symfony-sonata, symfony-2.1, sonata-admin

**上下文**

*   我需要将我的用户与公司联系起来。
*   这些公司存储在另一个数据库（mssql :().
*   我有一个存储过程，可以为我提供公司列表。

**我做了什么**

*   将 dbal 配置为能够调用存储过程。
*   扩展了 SonataUser 的实体并为公司 ID 添加了一个整数字段。
*   扩展 SonataUser 的`configureFormFields()`管理员

    ```
    $formMapper
    #...
      ->add('company', 'choice', array('choices' => $companies))
    #... 
    ```

`$companies`应该包含公司列表但不确定这是正确的方法，我什至不知道如何从这个类中调用存储过程......

**问题**

*   我怎样才能将这些公司列入 SonataUser 的表格？
*   如何在列表中显示选定的公司名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:32:50.333

这是我所做的：

*   创建一个服务来[注入](http://symfony.com/doc/current/book/service_container.html#referencing-injecting-services)连接以获取公司
*   创建[自定义字段](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html)
*   将其注册为服务并在构造函数中[注入](http://symfony.com/doc/current/book/service_container.html#referencing-injecting-services)第一个服务
*   为字段提供选择（进入自定义字段定义）

    ```
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
    #... 
    ```

然后我可以简单地使用它`configureFormFields()`：

```
->add('company', 'company') 
```

# javascript - 无法使用谷歌地图获得多页jquery mobile

> ID：12051911
> 
> 赞同：0
> 
> 时间：2012-08-21T09:27:33.110
> 
> 标签：javascript, jquery, jquery-mobile, google-maps-api-3, jquery-ui-map

我有 jQuery 移动与谷歌地图一起使用，这样我就可以显示一个独立的页面，其中的地图占据了全屏。但是，我不知道如何制作一个简单的 2 页示例，其中有一个按钮可以将我带到地图。

我对为什么所有示例的正文标记中都有 javascript 感到非常困惑。我一直在尝试遵循此处的示例[http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html](http://jquery-ui-map.googlecode.com/svn/trunk/demos/jquery-google-maps-mobile.html)，但很难弄清楚什么是仅对所有源 HTML 中的 basic_map 是必需的。我是使用 jQuery 和 javascript 的新手。

这是作为独立页面工作的 HTML 代码。

```
<!doctype html>
<html lang="en">
   <head>
        <title>Simple Map</title>
        <!--link type="text/css" rel="stylesheet" href="css/style.css" -->
    </head>
    <body>

        <div id="basic_map" data-role="page" class="page-map">
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
            </div>
        </div>

        <script type="text/javascript"          
        src="http://maps.googleapis.com/maps/api/js?&sensor=true"></script> 
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
            <script type="text/javascript" src="./jquery-ui-map-3.0-rc/ui/jquery.ui.map.js"></script>
        <!--script type="text/javascript" src="./jquery-ui-map-3.0-rc/demos/js/demo.js"></script-->     
        <script type="text/javascript">
                $(function(){
                    initializeMap(37.6, -122.1);
                });

                function initializeMap(lat,lng) {
                    var adjustedHeight = ($(window).height());
                    $('#map_canvas').css({height:adjustedHeight});
                    //$("#map_canvas").height = $(window).height() - $("#header").height() - $("#footer").height();
                    setTimeout(function() {

                        var latlng = new google.maps.LatLng(lat, lng);
                        var myOptions = {
                                zoom: 9,
                            center: latlng,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                        };

                        var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
                        google.maps.event.trigger(map, 'resize');
                        map.setZoom( map.getZoom() );
                    }, 500);
                }
        </script>
    </body>
</html> 
```

我已经尝试实现以下 2 个屏幕示例，我在第一页上输入纬度和经度，然后转到下一页上以该点为中心的地图。但是，我的地图显示在文本框下（而不是根据需要显示在新页面上）并且我收到错误消息：

> 未捕获的类型错误：无法调用未定义的方法“changePage”

根据其他帖子，错误与我需要调用`pagecreate`函数而不是`$(document).ready()`. 我没有调用这些函数中的任何一个，因为我不知道它们是否有必要，因为我能够制作其他简单的多页面移动 Web 应用程序，而无需等待其他页面准备好或创建。

我产生错误的多个屏幕代码是

```
<!doctype html>
<html lang="en">
<head>
    <title>Simple Map</title>
    <link type="text/css" rel="stylesheet" href="css/style.css">
</head>
<body>
    <script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?&sensor=true"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="./jquery-ui-map-3.0-rc/ui/jquery.ui.map.js"></script>
    <!--script type="text/javascript" src="./jquery-ui-map-3.0-rc/demos/js/demo.js"></script-->
    <script type="text/javascript">

    var lat;
    var lng;
    function plotPoint(){
        lat = document.getElementById("lat").value;
        lng = document.getElementById("lng").value;

        initializeMap(lat,lng);
        $.mobile.changePage("#basic_map", "pop");
    }

    function initializeMap(lat,lng) {
        var adjustedHeight = ($(window).height());
        $('#map_canvas').css({height:adjustedHeight});
        //$("#map_canvas").height = $(window).height() - $("#header").height() - $("#footer").height();
        setTimeout(function() {

            var latlng = new google.maps.LatLng(lat, lng);
            var myOptions = {
                zoom: 9,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
            google.maps.event.trigger(map, 'resize');
            map.setZoom( map.getZoom() );
            }, 500);
        }
        </script>
<!-- Main Page-->
<!-- Start of second page: #viewMap -->
<div data-role="page" id="main" data-theme="c">
    <div data-role="header">
        <h1>Main Page</h1>
    </div><!-- /header -->
    <div data-role="content" data-theme="c">
        <label for="lat">Latitude:</label>
        <input type="text" name="lat" id="lat" value="" />
        <label for="lng">Longitude:</label>
        <input type="text" name="lng" id="lng" value="" />
        <a href="#" data-role="button" data-theme="b" onclick="plotPoint()">Plot this point</a>
    </div><!-- /content -->
</div><!-- /viewMap page -->

<div id="basic_map" data-role="page">
    <div data-role="content">
        <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
            <div id="map_canvas" style="height:350px;"></div>
        </div>
    </div>
</div>

</body>
</html> 
```

总而言之，我的问题是：

1.  我很困惑我需要在哪里放置我的 javascripts。在第一个独立页面示例中，如果我将 javascript 移动到 head 标签，则没有任何效果。我需要将javascript放在头部和身体中吗？如果是这样，什么去哪里？

2.  我如何`pagecreate`在这个例子中实现，一般什么时候应该使用它？

3.  我还需要做什么才能使这个基本示例正常工作？

4.  是否有指向简单的移动 jQuery 代码的指针，而其中没有大量额外的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T18:13:31.047

> 如[jQuery Mobile 文档](http://jquerymobile.com/demos//1.2.0/docs/api/events.html)中所述，在 jQuery Mobile 中，AJAX 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序`$(document).ready()`仅针对第一页执行。

jQuery Mobile 只加载 DOM 中第一个 data-role="page" 元素内的代码。因此，如果通过 AJAX 执行导航，则不会加载第二页上的脚本。

您可以在下面找到 jQuery Mobile 中的两个 Google 地图示例。

第一个示例是多页示例。

第二个示例包含两个页面，通过 Ajax 执行导航，并且在第二个页面中加载地图。

示例 1：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Map Example Multiple Pages</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>jQuery mobile with Google maps</title>
        <meta content="en" http-equiv="content-language">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script>
            function initialize() {
                var mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278),
                myOptions = {
                    zoom:10,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: mapCenter
                },
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            }

            $(document).on("pageinit", "#map-page", function() {
                initialize();
            });
        </script>
    </head>

    <body>
        <div data-role="page" id="home-page">
            <!-- /header -->
            <div data-role="header">
                <h1>Maps</h1>
            </div>
            <!-- /content -->
            <div data-role="content">
                <a href="#map-page" data-role="button" data-transition="fade">Click to see the Map</a>
            </div>
        </div>

        <!-- /page -->
        <div data-role="page" id="map-page">
            <!-- /header -->
            <div data-role="header">
                <h1>Map</h1>
                <a href="#home-page" data-icon="home">Home</a>
            </div>
            <!-- /content -->
            <div data-role="content" class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <div id="map_canvas" style="height:300px;"></div>
            </div>
        </div>
    </body>
</html> 
```

示例 2：

指示：

*   创建文件夹
*   在文件夹中创建一个名为 maps.js 的文件
*   在文件夹中创建一个名为 map-intro.html 的文件
*   在文件夹中创建一个名为 map.html 的文件
*   用相应的代码填充每个创建的文件，可以在下面找到

在 maps.js 中添加以下代码：

```
function initialize() {
    var mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278),
    myOptions = {
        zoom:10,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: mapCenter
    },
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

$( document ).on( 'pageshow', '#map-page',function(event){
  initialize();
});

$( document ).on( 'click', '#map-anchor',function(event){
  event.preventDefault();
  $.mobile.changePage( "map.html", { transition: "flip" } );
}); 
```

在 map-intro.html 中添加以下代码：

```
<!doctype html>
<html lang="en">
   <head>
        <title>Map Intro Page</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script src="./maps.js"></script>
    </head>
    <body>
        <div id="map-intro-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Map Example</a></h1>
            </div>
            <div data-role="content">   
                <ul data-role="listview" id="my-list">
                    <li><a href="#" id="map-anchor">Go to Map</a></li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

在 map.html 中添加以下代码：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>jQuery mobile with Google maps geo directions example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    </head>
    <body>
        <!-- /page -->
        <div data-role="page" id="map-page">
            <!-- /header -->
            <div data-role="header">
                <h1>Map</h1>
                <a data-rel="back">Back</a>
            </div>
            <!-- /content -->
            <div data-role="content" class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <div id="map_canvas" style="height:300px;"></div>
            </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

# java - 检查文件是否是系统/操作系统文件？

> ID：12051922
> 
> 赞同：3
> 
> 时间：2012-08-21T09:28:16.220
> 
> 标签：java, file, file-io, operating-system

在**Java**中，有没有办法检查给定`File`对象是否是受保护的系统文件？

`File`我希望被归类为受保护对象的一些示例：

视窗

```
C:\WINDOWS\
C:\WINDOWS\explorer.exe 
```

其他

```
~/Library/
/Library/
/var/
/sys/
/bin/

etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:31:59.067

什么是系统文件高度依赖系统。Windows 资源管理器有一个系统目录的概念，它试图对用户隐藏。在 Linux/Unix 上，您可以查看谁拥有这些目录。

一般来说，您不需要知道这一点，因为文件权限控制您是否可以读/写/执行文件。

您将如何使用这些信息，而权限不会为您服务？

# asp.net - 在 ASP.NET 中创建特殊的浮动菜单

> ID：12051925
> 
> 赞同：1
> 
> 时间：2012-08-21T09:28:24.657
> 
> 标签：asp.net, menu, floating

我将创建一个像这个网站一样的特殊浮动菜单： [http ://www.just-eat.co.uk/restaurants-toscana/menu](http://www.just-eat.co.uk/restaurants-toscana/menu)

如您所见，类别和您的订单菜单浮动在屏幕上，因此它们的位置几乎总是相同的，并且它们总是停留在屏幕顶部（当然在您向下滚动页面之后），我如何在 ASP 中创建这种效果。网？我已将菜单样式位置属性设置为固定，但这样，我的菜单始终具有相同的位置，我希望我的菜单贴在屏幕顶部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T09:41:45.737

不确定 ASP.NET 是否默认具有此类功能。从来没有在里面看到过这样的东西。但它可以通过 CSS position:fixed 轻松完成，例如放置在菜单块的最顶部 div 或使用这样[的](http://simianstudios.com/portamento/)插件。请注意 position:fixed 可能会导致旧浏览器出现问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:41:10.993

你好，阿里，你必须添加样式表才能浮动你的菜单，但是你没有属性来浮动你的菜单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:52:35.733

您可以保留`div`to的位置`position:fixed`。

通过这样做，它的位置将`relative`位于浏览器窗口的位置，并且看起来是固定的。

这是**[样品小提琴](http://jsfiddle.net/XgX47/)**

**[更多关于 CSS 固定定位的信息。](https://www.google.com/webhp?hl=en#hl=en&sugexp=les;&gs_nf=1&tok=z29n6lBqF0SfVALq2SBTyA&pq=fixed%20position&cp=1&gs_id=4&xhr=t&q=css%20fixed%20position&pf=p&sclient=psy-ab&oq=cfixed%20position&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=3d6f376293f03481&biw=1024&bih=679)**

# magento - Magento 检索属性值

> ID：12051926
> 
> 赞同：2
> 
> 时间：2012-08-21T09:28:32.880
> 
> 标签：magento

在 Magento 中检索属性值有不同的方法，

`$options=$_product->getAttributeText('some_attribute')`

`$options=$_product->getResource()->getAttribute('some_attribute')->getFrontend()->getValue($_product)`

`$options=$_product->getSomeAttribute()`

上述方法有什么不同，哪一种是检索属性值的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T16:25:30.350

```
echo $_product->getSomeAttribute() 
```

将获取带有属性的值作为文本值或文本区域值等。

```
echo $_product->getAttributeText('some_attribute') 
```

将获得一个or属性类型**的所有选项的数组。**`Drop Down``Multiple Select`

```
$attributes = $_product->getAttributes();
$someAttr = $attributes['some_attribute']->getFrontend()->getValue($_product); 
```

将为您提供任何类型的属性的**值**，甚至是`Drop Down or Multiple Select`属性类型的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:18:44.573

使用 getAttributetext 您将直接在属性数组上获取属性。当您使用 get 方法时，您将通过“正确”的方式获得产品，因为 get 和 set 可以根据 magento 规则来衡量日期。并使用 getFrontend 您将直接从数据库中获取它。

没有正确的方法可以做到这一点，但有低成本的解决方案，我认为使用 get 方法和 getAttributeText 是最好的方法。

# java - 如何为我的 Java 应用程序配置远程 Hbase 服务器

> ID：12051930
> 
> 赞同：6
> 
> 时间：2012-08-21T09:28:45.787
> 
> 标签：java, hadoop, hbase

我对 Hadoop 和 Hbase 非常陌生，Hbase 与 RDMS 完全不同。我想创建一个表并使用 MapReduce 将其加载到 Hbase 中。Hadoop 和 Hbase 位于不同的服务器中。我可以使用 IP 地址、用户名和密码使用“腻子”访问该服务器。在 JDBC 中，我们可以使用驱动程序、用户名和密码进行配置，但在 HBase 中，我可以如何为我机器中的应用程序配置 IP 地址、用户名和密码。我检查了“hbase-site.xml”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T05:58:53.010

您可以使用对象连接到远程 HBase。使用该类，您可以在像 hbase-site.xml 这样的 xml 文件中设置所有必要的参数，并使用 addResource 方法示例将文件名传递给 Configuration 对象：

```
org.apache.hadoop.conf.Configuration hbaseConfiguration = HBaseConfiguration.create();
hbaseConfiguration.addResource(new Path("/home/john/hbase-site.xml)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T09:37:09.043

连接到远程系统时，您可以使用此代码进行配置

```
`config.set("hbase.zookeeper.quorum", args[0]);// ip of hbase server(remote)
config.set("hbase.zookeeper.property.clientPort", args[1]);// portno : 2181 default` 
```

`编辑 hbase 目录中的 conf/regionservers 文件以在其中添加 Hbase 服务器（远程）（我这样做了，不需要编辑 etc/hosts 以在我的办公室网络中获取 hbase 服务器），即在编辑 regionservers 后看起来像

localhost
远程hbase服务器的ip地址

例如
本地主机
10.132.258.366`

# apache-flex - Flex数据网格标题行右键单击

> ID：12051932
> 
> 赞同：0
> 
> 时间：2012-08-21T09:28:59.930
> 
> 标签：apache-flex, datagrid, air, header, right-click

我的 Flex 应用程序中有一个 Datagrid。

右键单击标题行时，我需要显示一个上下文菜单。单击其余数据网格项（包含数据的项）时，不得出现后一个上下文菜单。

编辑：应用程序在 AIR 环境中运行，所以我没有 Flash 播放器的麻烦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:46:45.053

下面的代码可以帮助你： -

我创建了一个示例，其中我只添加了一个项目。您可以根据需要对其进行转换和更改逻辑。我的想法是提供一种基本逻辑。你可能会得到更好的解决方案，但这对你有用。

```
 <?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout/>
    </s:layout>

    <mx:DataGrid id="myDG" width="350"> 
        <mx:dataProvider>
            <mx:ArrayCollection>
                <mx:source>
                    <fx:Object Artist="" Price="11.99" 
                               Album="Slanted and Enchanted" />
                    <fx:Object Artist="" 
                               Album="Brighten the Corners" Price="11.99" />
                </mx:source>
            </mx:ArrayCollection>
        </mx:dataProvider>
        <mx:columns>
            <mx:DataGridColumn dataField="Artist" headerRenderer="StackLabelRenderer"/>
            <mx:DataGridColumn dataField="Album" headerRenderer="StackLabelRenderer"/>
            <mx:DataGridColumn id="price" dataField="Price" headerRenderer="StackLabelRenderer"/>
        </mx:columns>
    </mx:DataGrid>

</s:Application> 
```

**StackLabelRenderer.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Label xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx"
          click="dispatchClickEvent()">

    <fx:Script>
        <![CDATA[
            import mx.controls.DataGrid;
            import mx.controls.dataGridClasses.DataGridColumn;
            import mx.controls.dataGridClasses.DataGridListData;
            import mx.core.mx_internal;

            private function dispatchClickEvent():void
            {
                trace("Item Clicked")
            }

            import mx.controls.Alert;

            [Bindable]
            private var cm:ContextMenu;

            override protected function createChildren():void
            {
                    cm = new ContextMenu();
                    cm.hideBuiltInItems();
                    cm.addEventListener(ContextMenuEvent.MENU_SELECT, contextMenu_menuSelect);
                    this.contextMenu = cm;
            }

            private function contextMenu_menuSelect(evt:ContextMenuEvent):void {
                //condition to check length of column data length
                var allNull:Boolean=true;
                var columnName:String = DataGridColumn(data).headerText;
                for each(var o:Object in DataGrid(owner).dataProvider) {
                    if(o[columnName] != "") {
                        allNull=false;
                        break;
                    }
                }
                if(!allNull)
                {
                    var cmi:ContextMenuItem = new ContextMenuItem("First Element...", true);
                    cmi.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, contextMenuItem_menuItemSelect);
                    cm.customItems = [cmi];
                }
            }

            private function contextMenuItem_menuItemSelect(evt:ContextMenuEvent):void {
            }
        ]]>
    </fx:Script>
</mx:Label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:37:24.810

我不确定鼠标右键单击，cos flex 应用程序在 Flash 播放器中运行，然后右键单击会显示其菜单。最好的办法是在 DatagRid 上使用 headerRelease 事件。然后，在您的事件处理程序中，您可以创建菜单（可能在弹出窗口或某些悬停面板中？），然后在那里执行您需要执行的操作。[在此处](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_7.html)阅读有关它的更多信息

编辑：也许您可以使用 contextMenu 类，并将其附加到您的 dataGrid.contextMenu？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:47:36.817

在 flex 中，更一般地在 flash 中，没有办法捕获右键单击事件。

# dialog - 如何在对话框中添加文本字段

> ID：12051939
> 
> 赞同：1
> 
> 时间：2012-08-21T09:29:25.877
> 
> 标签：dialog, textfield, lwuit, codenameone

我希望使用对话框将用户输入的信息保存在我的表单上。

> 对话框 d=new.dialog(); d.show("保存信息","要保存吗?","OK","取消");

我可以在对话框中添加一个文本字段（编辑文本框），以便用户在按确定之前输入所需的名称（字母数字）。如果不感兴趣，他可以简单地取消。我会将信息保存为具有用户选择名称的对象中的哈希表。

如果无法在对话中完成，那么下一个最佳方法是什么。请添加一段代码或教程以便更好地理解。

它是一个以代号一开发的移动应用程序。因此，即使是 LWUIT 用户也可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:35:06.907

尝试这个：

```
Textfield myTF = new textfield();

Dialog abc = new Dialog();//how ever u wish to initialize it

abc.addComponenet(myTF);//add text field to dialog
abc.show();//show dialog. 
```

注意：对话框扩展了一个表单。所以你会在你的对话框中获得一个表单的属性。

# php - mysql连接失败

> ID：12051941
> 
> 赞同：0
> 
> 时间：2012-08-21T09:29:34.797
> 
> 标签：php, sql, linux

我正在将此代码用于mysql连接

```
 $con = mysql_connect("localhost", "username" , "password");
    if (!$con)
    {
       die('Could not connect: ');
    }
    else 
     { echo "connection failed....";}
   mysql_select_db("ManagersDatabase", $con); 
```

mysql 数据库位于`/var/lib/mysql/ManagersDatabase`. 我的 php 页面位于`/var/www/html/`. 它不打印任何东西。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:50:38.873

这就是你应该如何连接，通过使用 PDO:[并在查询时使用准备好的查询。](http://php.net/manual/en/pdo.prepared-statements.php)

```
<?php 
try{
    $con = new PDO('mysql:host=127.0.0.1;dbname=your_database','root','password');
    $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $con->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $con->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC);
}catch (Exception $e){
    die('Cannot connect to database. Details:'.$e->getMessage());
}
?> 
```

或 mysqli[并在查询时使用准备好的查询](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

```
<?php
$con = new mysqli("127.0.0.1", "user", "password", "your_database");
if ($con->connect_errno) {
    die("Failed to connect to MySQL: (".$con->connect_errno.") ".$con->connect_error);
}
print_r($con);
?> 
```

**编辑（回复评论）：** 如果添加`print_r($con);`，您应该看到 mysqli 连接对象，如：

```
/*
mysqli Object
(
    [affected_rows] => 0
    [client_info] => mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $
    [client_version] => 50010
    [connect_errno] => 0
    [connect_error] => 
    [errno] => 0
    [error] => 
    [error_list] => Array
        (
        )

    [field_count] => 0
    [host_info] => 127.0.0.1 via TCP/IP
    [info] => 
    [insert_id] => 0
    [server_info] => 5.5.25a
    [server_version] => 50525
    [stat] => Uptime: 10  Threads: 1  Questions: 1  Slow queries: 0  Opens: 33  Flush tables: 1  Open tables: 26  Queries per second avg: 0.100
    [sqlstate] => 00000
    [protocol_version] => 10
    [thread_id] => 1
    [warning_count] => 0
)
*/ 
```

其他方法已经过时并且很快（谢天谢地）被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:38:06.307

您应该在 else 块中连接到您的数据库；

```
 $con = mysql_connect("localhost", "username" , "password");
    if (!$con)
    {
       die('Could not connect: ');
    }
    else    // if connection is made, then select the DB
     { 
       mysql_select_db("ManagersDatabase", $con);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T09:45:08.310

Quote from your question:

```
if (!$con)
{
   die('Could not connect: ');
}
else 
 { echo "connection failed....";} 
```

... you do notice it doesn't make much sense? it is saying if (something) { //could not connect } else { //connection failed } so your code thinks it is always failing.

What you should have is something like

```
$con = mysql_connect("localhost", "username" , "password");
if ($con === false)
{
   die('Could not connect: ' . mysql_error());
}
mysql_select_db("ManagersDatabase", $con); 
```

So it would actually print out anything.

Also, you should have either display_errors enabled to get the errors on screen or error_log in use so you would get the errors logged to somewhere.

In addition, please check you actually have the mysql extension enabled and in use, and mysql_connect() function available. phpinfo(); will tell what extensions you have, and function_exists() can tell you have the function available.

So, things to do:

1.  Fix your code logic like listed above
2.  Enable error printing or logging
3.  Check that you have the mysql extension enabled
4.  Check that mysql_connect() function actually is callable

* * *

**Edit**. as the missing mysql extension seems to be the problem ('call to undefined function mysql_connect'):

First of all, you need to have access to your PHP configuration. If this is your local installation or server, you should have that - if you are using someone elses hosting, they are the people who should change these things.

Given some assumptions, such as

*   you are using your local apache server
*   you are not using XAMPP or any other *AMP products, but vanilla installations

this is what you should do:

*   Find your php.ini configuration file or create one based on example files in the PHP folder if you don't have one
*   Find the lines below (.dll for windows, .so for linux, don't know about others)

* * *

```
;extension=php_mysql.dll
;extension=php_mysqli.dll
;extension=php_pdo_mysql.dll 
```

* * *

*   Strip out the comment (the first ';') from the one you want to use. You are using the first one in your example, the others are for using other abstractions described in some of the other postings here, so if you want to go with the code you have, you'd uncomment the first one.
*   Enable "display_startup_errors" also if you want to see any configuration problems immediately
*   Check that "extension_dir" setting is correct, and is pointing to the folder where you have the above .dll extensions
*   Restart your apache server

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-23T13:52:09.647

这是您的项目**connect.php**的模板文件。你可以使用它。

```
<?php
// Connecting, selecting database
  $link = mysql_connect('localhost', 'root', '') or die('Could not connect: ' . mysql_error());
//echo 'Connected successfully';
  mysql_select_db('procost') or die('Could not select database');
?> 
```

# javascript - 使用 Knockout-Kendo.js 库刷新 KendoDropDown

> ID：12051943
> 
> 赞同：1
> 
> 时间：2012-08-21T09:29:38.893
> 
> 标签：javascript, knockout.js, kendo-ui

我正在使用 Ryan Niemeyer 的 Knockout-Kendo.js 库。我有一个这样定义的 kendodropdown：

```
<input id="availableLanguagesDropdown" data-bind="kendoDropDownList: { data: Languages, value:Language }" onchange="onAvailableLanguageChangeHandler();" /> 
```

where`Languages`是 observable 数组并且`Language`是 observable。在我的应用程序中，项目从`Languages`数组中删除（这是 kendodropdown 的数据源）。当数组中没有剩余语言时，kendodropdown 会显示最后可用的语言。

我正在像这样评估语言的空值：

```
omega.Language(""); 
```

但下拉菜单中仍然显示了最后一种可用的语言。我想我应该刷新 kendodropdown。在 kendoUI 的文档中，它是这样完成的：

```
var dropdownlist = $("dropdownlist").data("kendoDropDownList");
// re-render the items in drop-down list.
dropdownlist.refresh(); 
```

但是当我使用 Knockout-Kendo.js 库时，我不确定我该怎么做。有人可以告诉我如何在没有项目时刷新下拉列表吗？当其中没有项目时，这会帮助我显示空下拉列表吗？感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:04:01.593

`widget`如果您传递参数，绑定将在 observable 中向您提供小部件。看起来简单地调用`refresh()`并不能解决问题。我不得不使用该`text`方法将其清空。

就像是：

```
<input id="availableLanguagesDropdown" data-bind="kendoDropDownList: { data: Languages, value:Language, widget: dropDown }" /> 
```

使用 JS：

```
var ViewModel = function() {
    this.Languages = ko.observableArray(["one", "two", "three"]);
    this.Language = ko.observable("two");

    this.dropDown = ko.observable();

    this.removeLanguages = function() {
        this.Languages([]);
        this.Language("");
        this.dropDown().text("");
    };
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/GQqwY/](http://jsfiddle.net/rniemeyer/GQqwY/)

似乎我应该尝试在库本身中解决一些问题。我一直希望访问小部件并调用其方法仅用于高级或最后的使用。

# javascript - TinyMCE 使用 Javascript 动态更改语言？

> ID：12051945
> 
> 赞同：2
> 
> 时间：2012-08-21T09:29:50.033
> 
> 标签：javascript, jquery, tinymce

我正在构建一个在线编辑器，其中语言由用户设置设置，可以使用 AJAX 动态更改（页面不会重新加载），所以我第一次正确初始化 tinyMCE 对象，但在用户尝试再次初始化之后，编辑器控件中的文本具有不正确的值（“advanced.bold”而不是“Bold”，advanced.italic_desc 而不是“Italic”等），但插件弹出窗口的语言正确！

基本上，每次用户更改偏好中的语言时，我的代码都会执行 init 方法......

```
initMCE: function(lang) {
    tinyMCE.init({  
        language : lang,
        mode : "textareas",
        theme : "advanced",
        relative_urls : false,
        editor_selector : "tinymce",
        plugins : "emotions,spellchecker,advhr,insertdatetime,preview,media,inlinepopups,xhtmlxtras",

        // Theme options - button# indicated the row# only
        theme_advanced_buttons1 : "fontselect,fontsizeselect,bold,italic,underline,forecolor,|,bullist,numlist,|,blockquote,|,image,|,link,unlink,|,code,spellchecker",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",      
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "right",
        theme_advanced_resizing : true,

        content_css : "../_style/_css/style.css",
        inline_styles : false
    });
} 
```

关于如何做或我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:36:38.227

我创建了一个[fiddle fork](http://fiddle.tinymce.com/nYbaab/1)，试图使其工作，并认为您可能需要正确关闭以前的实例。语言没有正确改变——你可能想在[这里](http://www.tinymce.com/develop/bugtracker_bugs.php)报告一个错误修正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:54:45.543

我在他们的网站上将此报告为错误，他们告诉我在修复它时使用一种解决方法（似乎 load lang 调用只是在 init 内运行一次）。在 init 之后使用这一行，语言更改工作正常：

```
tinyMCE.ThemeManager.requireLangPack(THEME_IN_USE); 
```

检查[这个小提琴](http://fiddle.tinymce.com/nYbaab/2)看看它工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T17:26:52.117

你可以使用这样的东西：

```
 function init(lang) {  
        //language_url: lang === 'en' ? null : 'url to es file',
        options.language = lang;
        tinymce.remove(editor);
        tinymce.init(options);
        tinymce.execCommand('mceRepaint');
      } 
```

这个小提琴对我有用，注意第 31 行的注释：

[https://jsfiddle.net/antd3tsf/19/](https://jsfiddle.net/antd3tsf/19/)

# jquery - 带有 HTML5 视频标签的 Coverflow

> ID：12051953
> 
> 赞同：0
> 
> 时间：2012-08-21T09:30:15.620
> 
> 标签：jquery, html, video, coverflow

我正在寻找一个 jQuery 插件或任何非 Flash 解决方案来构建一个像 i tunes 覆盖流这样的覆盖流：

![iTunes 封面流](../Images/770807d1cce48b8a058c0cce80ec162e.png)

在我的情况下，我的元素将是通过 HTML5 video 标签包含的 mp4 视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:35:17.917

谷歌快速搜索：[http ://addyosmani.com/blog/jqueryuicoverflow/](http://addyosmani.com/blog/jqueryuicoverflow/)

但是我会放慢滚动速度，这有点激烈。拖动滑块时看起来很棒。

这是JS：

```
(function($){

    function getPrefix( prop ){  
            var prefixes = ['Moz','Webkit','Khtml','O','ms'],  
                elem     = document.createElement('div'),  
                upper      = prop.charAt(0).toUpperCase() + prop.slice(1),  
                pref     = "",
                len      = 0;

            for(len = prefixes.length; len--;){  
                if((prefixes[len] + upper) in elem.style){  
                    pref = (prefixes[len]);  
                }  
            }  

            if(prop in elem.style){  
                pref = (prop);  
            }  
            return pref;
      }

    var vendorPrefix = getPrefix('transform');

    $.easing.easeOutQuint = function (x, t, b, c, d) {
        return c*((t=t/d-1)*t*t*t*t + 1) + b;
    };

    $.widget("ui.coverflow", {

       options: {
            items: "> *",
            orientation: 'horizontal',
            item: 0,
            trigger: 'click',
            center: true, //If false, element's base position isn't touched in any way
            recenter: true //If false, the parent element's position doesn't get animated while items change

      },

        _create: function() {

            var self = this, o = this.options;
            this.items = $(o.items, this.element);
            this.props = o.orientation == 'vertical' ? ['height', 'Height', 'top', 'Top'] : ['width', 'Width', 'left', 'Left'];
            //For < 1.8.2: this.items['outer'+this.props[1]](1);

            this.itemSize = 0.73 * this.items.innerWidth();
            this.itemWidth = this.items.width();
            this.itemHeight = this.items.height();
            this.duration = o.duration;
            this.current = o.item; //initial item

            //Bind click events on individual items
            this.items.bind(o.trigger, function() {
                self.select(this);

            });

            //Center the actual parent's left side within it's parent

            this.element.css(this.props[2],
                (o.recenter ? -this.current * this.itemSize/2 : 0)
                + (o.center ? this.element.parent()[0]['offset'+this.props[1]]/2 - this.itemSize/2 : 0) //Center the items container
                - (o.center ? parseInt(this.element.css('padding'+this.props[3]),10) || 0 : 0) //Subtract the padding of the items container
            );

            //Jump to the first item
            this._refresh(1, 0, this.current);

        },

        select: function(item, noPropagation) {

            this.previous = this.current;
            this.current = !isNaN(parseInt(item,10)) ? parseInt(item,10) : this.items.index(item);

            //Don't animate when clicking on the same item
            if(this.previous == this.current) return false; 

            //Overwrite $.fx.step.coverflow everytime again with custom scoped values for this specific animation
            var self = this, to = Math.abs(self.previous-self.current) <=1 ? self.previous : self.current+(self.previous < self.current ? -1 : 1);
            $.fx.step.coverflow = function(fx) { self._refresh(fx.now, to, self.current); };

            // 1\. Stop the previous animation
            // 2\. Animate the parent's left/top property so the current item is in the center
            // 3\. Use our custom coverflow animation which animates the item

            var animation = { coverflow: 1 };

            animation[this.props[2]] = (
                (this.options.recenter ? -this.current * this.itemSize/2 : 0)
                + (this.options.center ? this.element.parent()[0]['offset'+this.props[1]]/2 - this.itemSize/2 : 0) //Center the items container
                - (this.options.center ? parseInt(this.element.css('padding'+this.props[3]),10) || 0 : 0) //Subtract the padding of the items container
            );

            //Trigger the 'select' event/callback
            if(!noPropagation) this._trigger('select', null, this._uiHash());

            this.element.stop().animate(animation, {
                duration: this.options.duration,
                easing: 'easeOutQuint'
            });

        },

        _refresh: function(state,from,to) {

            var self = this, offset = null;

            this.items.each(function(i) {

                var side = (i == to && from-to < 0 ) ||  i-to > 0 ? 'left' : 'right',
                    mod = i == to ? (1-state) : ( i == from ? state : 1 ),
                    before = (i > from && i != to),
                    css = { zIndex: self.items.length + (side == "left" ? to-i : i-to) };
                    //css[($.browser.safari ? 'webkit' : ($.browser.opera ? 'O' : 'Moz'))+'Transform'] = 'matrix(1,'+(mod * (side == 'right' ? -0.2 : 0.2))+',0,1,0,0) scale('+(1+((1-mod)*0.3)) + ')'; 

                if(vendorPrefix == 'ms' || vendorPrefix == ""){

                    css["filter"] = "progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11=1, M12=0, M21=" + (mod * (side == 'right' ? -0.2 : 0.2)) + ", M22=1";
                    css[self.props[2]] = ( (-i * (self.itemSize/2)) + (side == 'right'? -self.itemSize/2 : self.itemSize/2) * mod );

                    if(i == self.current){
                    css.width = self.itemWidth * (1+((1-mod)*0.3));
                    css.height = css.width * (self.itemHeight / self.itemWidth);
                    css.top = -((css.height - self.itemHeight) / 3);

                    css.left -= self.itemWidth/6 -50;
                    }
                    else{
                    css.width = self.itemWidth;
                    css.height = self.itemHeight;
                    css.top = 0;

                    if(side == "left"){
                    css.left -= self.itemWidth/5 -50;
                    }

                    }//end if

                }else{

                    css[vendorPrefix + 'Transform'] = 'matrix(1,'+(mod * (side == 'right' ? -0.2 : 0.2))+',0,1,0,0) scale('+(1+((1-mod)*0.3)) + ')'; 
                    css[self.props[2]] = ( (-i * (self.itemSize/2)) + (side == 'right'? -self.itemSize/2 : self.itemSize/2) * mod );

                }

                $(this).css(css);

            });

            this.element.parent().scrollTop(0);

        },

        _uiHash: function() {
            return {
                item: this.items[this.current],
                value: this.current
            };
        }

    });

})(jQuery); 
```

但是如果你想要滚动，你需要一个像这样的 jQuery 滚动插件：[https ://github.com/brandonaaron/jquery-mousewheel](https://github.com/brandonaaron/jquery-mousewheel)

# java - 由于使用工件的 3rd 方 JAR 依赖关系而导致构建失败

> ID：12051954
> 
> 赞同：0
> 
> 时间：2012-08-21T09:30:19.160
> 
> 标签：java, maven, maven-2, artifactory

我已将第 3 方 JAR（在 Maven 存储库中不可用）导入到我的项目中，它在开发环境中构建良好。然而，在我们有一个中央工件的 CI 环境中 (http://wiki.jfrog.org/confluence/display/RTF/Artifactory+User+Guide)。在构建时，我收到错误

```
Failed to read artifact descriptor for: com.abc.client:client-parent:pom:1.0-SNAPSHOT
......
......
Caused by: org.apache.maven.model.resolution.UnresolvableModelException: Could not find artifact com.abc.client:client-parent:pom:1.0-SNAPSHOT 
```

我打开了第 3 方 JAR 并检查了 POM。它确实有那个父母。

```
<groupId>com.abc.client</groupId>
<artifactId>client-java</artifactId>
.....
.....
<parent>
    <groupId>com.abc.client</groupId>
    <artifactId>client-parent</artifactId>
    <version>1.0-SNAPSHOT</version>
</parent> 
```

不确定，如果构建在一个环境中运行良好，为什么它在 CI 中失败。工件是否以不同的方式处理工件？

# c# - 一个聚合根可以包含嵌套的子节点吗？

> ID：12051959
> 
> 赞同：0
> 
> 时间：2012-08-21T09:30:37.193
> 
> 标签：c#, asp.net, domain-driven-design

两个月前，我买了 Scott Millet 的《专业的 ASP.NET 设计模式》一书，因为我想学习如何使用设计模式构建一个分层的 Web 应用程序。我在自己的应用程序中使用了本书中的案例研究，所以一切都设置好了。

我的问题是我不确定我的总根。

我有一个可以创建集合的用户。用户可以将类别添加到集合中，并将关键字添加到类别中。在我的数据库中看起来像这样：

```
- Users
    - PK: UserId

- Collections
    - PK: CollectionId
    - FK: UserId

- Categories
    - PK: CategoryId
    - FK: CollectionId

- Keywords
    - PK: KeywordId
    - FK: CategoryId 
```

我认为让用户成为集合的聚合根不合逻辑，但类别和关键字一起形成一个集合。所以我让用户成为一个还没有孩子的聚合根，并收集一个聚合根。一个集合可以有多个类别，类别可以有多个关键字。所以当我想添加一个类别时，我会这样做：

```
public void CreateCategory(CreateCategoryRequest request)
    {
        Collection collection = _collectionRepository.FindCollection(request.IdentityToken, request.CollectionName);

        Category category = new Category { Collection = collection, CategoryName = request.CategoryName };

        ThrowExceptionIfCategoryIsInvalid(category);

        collection.AddCategory(category);

        _collectionRepository.Add(collection);
        _uow.Commit();
    } 
```

效果很好，但是当我想添加关键字时，我首先需要获取集合，然后获取可以添加关键字的类别，然后提交集合：

```
public void CreateKeyword(CreateKeywordRequest request)
    {
        Collection collection = _collectionRepository.FindCollection(request.IdentityToken, request.CollectionName);

        Category category = collection.Categories.Where(c => c.CategoryName == request.CategoryName).FirstOrDefault();

        Keyword keyword = new Keyword { Category = category, KeywordName = request.KeywordName, Description = request.KeywordDescription };

        category.AddKeyword(keyword);

        _collectionRepository.Add(collection);
        _uow.Commit();
    } 
```

而这只是感觉不对（是吗？）是什么让我相信我应该让类别成为关键字的总根。但这提出了另一个问题：我有一个集合聚合，它像我在第一个代码示例中所做的那样创建一个类别聚合，这仍然有效吗？示例：collection.Add(category);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:50:14.373

聚合根当然可以包含嵌套的子级，但是如果这些子级也是聚合，这可能是一个警告，即聚合可能做的太多了。在您的情况下，我认为`Collection`是聚合而`Category`不是聚合，它只是一个实体，甚至是属于`Collection`聚合的值对象，它恰好包含`Keyword`也是值对象的实例。

我会更改实现，使`CreateCategory`服务方法看起来更像这样：

```
public void CreateCategory(CreateCategoryRequest request)
{
        var collection = _collectionRepository.Get(request.IdentityToken, request.CollectionName);

        collection.AddCategory(request.CategoryName);

        _uow.Commit();
} 
```

上的`AddCategory`方法`Collection`负责创建`Category`实例以及错误检查。这是有道理的，因为它是聚合根，它负责管理它包含的实体集群和值对象。没有调用存储库上的 Add 方法，因为环境工作单元应该提交更改。

我会改变的`CreateKeyword`方法看起来更像：

```
public void CreateKeyword(CreateKeywordRequest request)
{
        var collection = _collectionRepository.Get(request.IdentityToken, request.CollectionName);

        collection.AddKeyword(request.CategoryName, request.KeywordName, request.KeywordDescription);

        _uow.Commit();
} 
```

`AddKeyword`on 方法`Collection`检索适当的内容`Category`，然后向其添加关键字，如果需要，则抛出异常以强制一致性和有效性。

如您所见，这两种方法有一个模式 - 首先通过键检索聚合，然后调用聚合上的方法，最后提交所有内容。通过这种方式，聚合可以更好地控制它们自己的状态，并且您可以避免出现[贫乏的域模型](http://en.wikipedia.org/wiki/Anemic_domain_model)以及减少服务中存在的代码量。

有关聚合设计的深入处理，请查看[Vaughn Vernon 的有效聚合设计](http://dddcommunity.org/library/vernon_2011)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:51:10.843

这可能感觉不对，因为要添加一个新的关键字，您一直从 Collection 引用开始，而您完全可以从 Category 引用开始。当用户添加关键字时，他肯定是在类别的上下文中这样做的，因此您当时可能在内存中拥有该类别。

另外，我没有得到`_collectionRepository.Add(collection)`你每个方法的结尾`Add[SomeSubEntity]()`。Collection 应该已经存在于存储库中，所以您应该做的就是保存它，对吗？

至于嵌套聚合，我发现它有点复杂，并且与 2 个单独的聚合（类别和集合）相比并没有真正看到好处。

# mysql - 需要捕获 bash 命令输出

> ID：12051960
> 
> 赞同：0
> 
> 时间：2012-08-21T09:30:40.423
> 
> 标签：mysql, bash

我正在尝试测量 MySQL QPS（每秒查询数）以进行趋势分析。

```
mysqladmin -P3104 -rvi1 ex 2>&1 | grep Questions 
```

我无法使用以下内容将上述内容放入文本文件中：

```
mysqladmin -P3104 -rvi1 ex 2>&1 | grep Questions > out.txt 
```

或 mysqladmin -P3104 -rvi1 ex 2>&1 | grep 问题 | 开球.txt

我认为`ex`可能会干扰 stdout/stderr 重定向。但我只需要将输出捕获到文件中，不需要查看屏幕输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:47:20.357

2>&1 而不是 2&>1：

```
mysqladmin -P3104 -rvi1 ex 2>&1 | grep Questions > out.txt 
```

# jquery - 使用 jquery 将类添加到根据 location.href 的 href 链接

> ID：12051961
> 
> 赞同：0
> 
> 时间：2012-08-21T09:30:40.193
> 
> 标签：jquery

有没有办法更有效地编写以下代码？

请注意，这部分导航是 CMS 的一部分，并且设置为隐藏，因此您不会看到它展开。我有以下代码可以工作，即重新编写导航项并根据 location.href 添加一类当前但我希望它可以更有效地编写？

HTML

```
 <ul>
      <li><a class="current" href="#"><strong>Level 1</strong></a>
        <ul class="sub">
          <li><a class="" href="#">sub level</a></li>
          <li><a class="" href="#">sub level</a></li>
          <li><a class="" href="#">sub level</a></li>
        </ul>
      </li>
    </ul> 
```

jQuery

第一部分重写隐藏部分

```
 $(document).ready(function () {
$('menu li:eq(4)').html('<ul><li><a href="/level1" class="current"><strong>level1</strong></a>'
    +'<ul class="sub"><li><a href="/sub-level-a" class="">Sub Level A</a></li>'
    +'<li><a href="/sub-level-b" class="">Sub Level B</a></li>'
    +'<li><a href="/sub-level-c" class="">Sub Level C</a></li></ul></li></ul>'); 
```

});

添加类

```
 $(document).ready(function () {
        if(window.location.href.indexOf("/ucpoolvehicles")!=-1)
                    {
        $("ul.sub li a:eq(0)").addClass("current");
                    } else {

        $("ul.sub li a:eq(0)").removeClass("current");
        }
        if(window.location.href.indexOf("/car-rental")!=-1)
                    {
        $("ul.sub li a:eq(1)").addClass("current");
                    } else {

        $("ul.sub li a:eq(1)").removeClass("current");
        }

        if(window.location.href.indexOf("/private-vehicle-usage")!=-1)
                    {
        $("ul.sub li a:eq(2)").addClass("current");
                    } else {

        $("ul.sub li a:eq(2)").removeClass("current");

        }

        }); 
```

我希望我的指示很清楚 在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:37:19.300

这应该有效：

```
$(function() {
    $("ul.sub li a").removeClass("current");
    var href = window.location.href;
    if (href.indexOf("/ucpoolvehicles") != -1) {
        $("ul.sub li a:eq(0)").addClass("current");
    } else if (href.indexOf("/car-rental") != -1) {
        $("ul.sub li a:eq(1)").addClass("current");
    } else if (href.indexOf("/private-vehicle-usage") != -1) {
        $("ul.sub li a:eq(2)").addClass("current");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T11:26:34.500

这将在没有隐藏部分的情况下工作

```
jQuery(document).ready(function ($) {
    alert(window.location.href);

    var url = window.location.href;

    // Will only work if string in href matches with location
    $('ul.sub li a[href="' + url + '"]').addClass('active');

    // Will also work for relative and absolute hrefs
    $('ul.sub li a').filter(function () {
        return this.href == url;
    }).addClass('active');
}); 
```

# ruby-on-rails - 如何在 Facebook 的墙上测试某些内容是否已发布

> ID：12051967
> 
> 赞同：0
> 
> 时间：2012-08-21T09:31:36.950
> 
> 标签：ruby-on-rails, facebook, testing, cucumber

我用考拉在我的用户的墙上贴了一些东西，它可以工作，但我必须为此写黄瓜场景，我不知道怎么做。有人能帮我吗？提前致谢 ：）

更新：我试图看看会返回什么：

```
 something = @graph.put_wall_post(to_text(message), attachment, username)
   p something 
```

即使我在墙上贴了帖子，也有些东西是零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:09:19.630

首先为您的应用程序创建一个[测试用户](https://developers.facebook.com/docs/test_users/)。然后在您的测试中，将消息发布到墙上，然后验证它是否已出现在用户[新闻提要](https://developers.facebook.com/tools/explorer/?method=GET&path=me/feed)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T11:11:54.780

如果您使用 api 在 facebook 上发布内容，您总是会从服务器获得一些响应字符串。

如果帖子成功，Facebook api 会返回状态更新 ID。

阅读[Facebook 图形 API](http://developers.facebook.com/docs/reference/api/status/)

# c# - 防止这种不安全的交叉线程

> ID：12051968
> 
> 赞同：0
> 
> 时间：2012-08-21T09:31:40.720
> 
> 标签：c#, multithreading

我有这个代码：

```
 private void Form1_Load(object sender, EventArgs e)
        {
            /*start update timer*/
            System.Timers.Timer updateticker = new System.Timers.Timer();
            updateticker.Elapsed += new ElapsedEventHandler(update_overload);
            //10 minute ticker
            updateticker.Interval = 600000;
            //30 sec ticker
            updateticker.Interval = 30000;
            updateticker.Enabled = true;

            System.Timers.Timer guiTimer = new System.Timers.Timer();
            guiTimer.Elapsed += new ElapsedEventHandler(idle_display);
            //1 minute ticker
            guiTimer.Interval = 60000;
            //30 sec ticker
            //updateticker.Interval = 30000;
            guiTimer.Enabled = true;

        }

 //run front end idle timer
        public void idle_display(object source, ElapsedEventArgs e)
        {
            if (minutes_left > 0) {
                minutes_left = minutes_left - 1;
            }

            lbl_dyn_status.Text = "Time until next automatic update: "+ minutes_left + " minutes.";
        } 
```

Visual Studio 将第二个函数的最后一行标记为不安全的交叉线程。谁能建议我如何重写它来解决问题？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T09:33:59.597

使用`System.Windows.Forms.Timer`代替`System.Timers.Timer`

或使用Timer 的[SynchronizingObject](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)属性。

> 当 SynchronizingObject 为 null 时，将在系统线程池中的线程上调用处理 Elapsed 事件的方法。有关系统线程池的更多信息，请参阅 ThreadPool。
> 
> 当 Elapsed 事件由可视化 Windows 窗体组件（例如按钮）处理时，通过系统线程池访问组件可能会导致异常或可能无法正常工作。通过将 SynchronizingObject 设置为 Windows 窗体组件来避免这种影响，这会导致在创建该组件的同一线程上调用处理 Elapsed 事件的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:40:14.183

正如其他人建议的那样，使用[`System.Windows.Forms.Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx). 与[`System.Threading.Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)在线程池线程上运行的 不同，它保证在 UI 线程上调用滴答事件。

UI 线程是唯一允许修改 UI 的线程。这就是为什么您在尝试 write 时遇到异常的原因`lbl_dyn_status.Text`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:35:40.487

使用 System.Windows.Forms.Timer 计时器而不是 System.Timers.Timer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T09:42:27.193

将处理程序更改为

```
public void IdleDisplay(object source, ElapsedEventArgs e)
{
    if (lbl_dyn_status.InvokeRequired)
    {
        this.Invoke(IdleDisplay)
    }
    else
    {
        if (minutes_left > 0)
        {
            minutes_left = minutes_left - 1;
        }

        lbl_dyn_status.Text = string.Format(
            "Time until next automatic update: {0} minutes.",
             minutes_left);
    }
} 
```

这种方式允许您免费使用线程`System.Threading.Timer`，但会检查处理程序中的跨线程调用。如果检测到调用，则通过`Form`类在主 GUI 线程上调用。

这[在 MSDN 上有更详细的描述。](http://msdn.microsoft.com/en-us/library/ms171728.aspx)

更一般地说，您不应该像这样使用计时器来计算时间。您的计时器绑定的线程越多，它就越可能偏离实际经过的时间。您可以使用计时器来安排时钟更新，但是，您应该计算自某个固定点以来经过的时间，而不是使用迭代计数器。

# android - 如何在 Cocos2dxActivity 中显示自定义对话框

> ID：12051973
> 
> 赞同：0
> 
> 时间：2012-08-21T09:31:45.387
> 
> 标签：android, java-native-interface, cocos2d-x, runtimeexception

如何在 Cocos2dxActivity 中显示自定义 android 对话框（带有自定义布局）？我尝试通过 JNI 调用一个方法，在该方法中我创建了一个对话框，设置它的布局并显示它。

```
public void displayDialog()
 {
    Dialog d=new Dialog(this);
    d.setContectView(R.layout.myDialog);
    d.show();
 } 
```

它给了我这个错误

`08-21 14:34:08.045: E/AndroidRuntime(2675): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:08:09.087

我是一个活动，在你的情况下我 = 这个；关键是使用 runOnUiThread(new Runnable(){public void run(){}}

```
public void rateMe(String s){
    me.runOnUiThread(new Runnable() {
          public void run() {
            AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
            dialog.setTitle("Rate Me");

            dialog.setMessage("If you enjoy this game, please take a moment to rate it. Thanks for your support!");
            //tv.setWidth(240);
            dialog.setPositiveButton("Rate Now",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface arg0,
                                int arg1) {
                            mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.home.test")));
                        }

                    });

            dialog.setNegativeButton("No, thanks",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface arg0,
                                int arg1) {

                        }
                    });       
            dialog.show();    
          }
    });
} 
```

# objective-c - 在 Objective-C 中显示 PowerPoint 幻灯片

> ID：12051976
> 
> 赞同：1
> 
> 时间：2012-08-21T09:31:55.063
> 
> 标签：objective-c, ios, powerpoint

我想问是否可以通过 TableViewController 或 UIButton 显示 PowerPoint 而不是使用 UIWebView？

PowerPoint 幻灯片存储在 Xcode 的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:53:42.507

我不知道您对 UIButton 的设想是什么，这对我来说意义不大，但是您当然可以将 UIWebView 放在表格单元格中。我想这不是你想要的？

您可能最好在后端服务器上预处理 PowerPoint 文件以将它们转换为 PDF。（或者作为构建过程的一部分，如果它们是静态的）你有更多的选项可以在 iOS 上显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T09:08:36.443

你可以做更多的事情。你当然可以使用

[快速查看框架](https://developer.apple.com/library/ios/DOCUMENTATION/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)即使不将其转换为 pdf 也可以显示 ppt。UIWebView 也应该能够呈现您的 ppt 而无需转换它。

这些解决方案的问题是您将**丢失演示文稿中的所有动画**。我知道唯一不会破坏动画的解决方案是将演示文稿直接导出为 HMTL 文件，或者使用[PPTToHTML5Converter](http://www.digitalofficepro.com/powerpoint/powerpoint-to-html5-converter.html)等程序将您的 ppt 转换为 HTML5 文件并在 UIWebView 中显示。

我希望我能帮上忙。

# silverlight - Silverlight 的自动生成列 Gridview 的工具提示

> ID：12051977
> 
> 赞同：-2
> 
> 时间：2012-08-21T09:31:57.437
> 
> 标签：silverlight, gridview, telerik, tooltip

这是我尝试过的

```
<telerik:RadGridView.Resources>
                <Style TargetType ="telerik:GridViewHeaderCell">
                 <Setter Property="ToolTipService.ToolTip" Value="{Binding Content, RelativeSource={RelativeSource Self}}"/>\
                </Style>
</telerik:RadGridView.Resources> 
```

在这里，如果`Value="toool tip text"`我想将标题文本显示为工具提示我分配给值的内容，这可以正常工作，因此它现在应该对我有用，对于上面的代码行，它会给我带来错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:42:16.997

我写了一篇博文，您可以阅读它以了解更多详细信息：[Assign ToolTip to dynamic created colum of silverlight Gridview 和 How to create style for element runtime](http://pranayamr.blogspot.ca/2012/08/assign-tooltip-to-dynamically-created.html)

我解决了以下问题，您可以在 Telerik silverlight 网格视图中为自动生成的列添加工具提示，同样的事情将适用于 silverlight 网格视图只需要更改类小修改

```
private void EditableGV_AutoGeneratingColumn(object sender, GridViewAutoGeneratingColumnEventArgs e)
{
   var style = new Style(typeof(GridViewHeaderCell));
   style.Setters.Add(new Setter(ToolTipService.ToolTipProperty, column.UniqueName));
   column.HeaderCellStyle = style; 
} 
```

# wix - wix - 获取父目录

> ID：12051983
> 
> 赞同：0
> 
> 时间：2012-08-21T09:32:15.163
> 
> 标签：wix, windows-installer

我的安装程序需要从注册表中读取一个值并将安装路径设置为该值的父级。

例如，从注册表中我得到：

```
D:\apps\client 
```

然后安装程序应将应用程序安装到

```
D:\apps 
```

我试过`[DIR]\..\`（在“目录”或“自定义操作”中），但在安装时看到以下错误：

```
Error 1324\. The folder path '..' contains an invalid character. 
```

我怎样才能用 WiX 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T05:30:29.793

看来你不能用纯wix做到这一点。您可以使用[自定义操作类型 1](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372048%28v=vs.85%29.aspx)。在“LaunchConditions”操作之前以立即模式执行它。在您的 wix-code 新属性中的某处初始化，例如：

```
<Property Id="DIRFROMREG" Value="0" Secure="yes"> 
```

这是 C# 上的示例：

```
 public class CustomActions
{
    [CustomAction]
    public static ActionResult DirectorySearchAction(Session session)
    {
        try
        {
            session.Log("Directory search");
            RegistryKey reg = Registry.LocalMachine.OpenSubKey(@"...your subkey...");
            if (reg != null)
            {
                var dir=reg.GetValue("...your value...");
                /*
                    var parentdir= split here your directory
                */
                session["DIRFROMREG"] =parentdir;
                session.Log(@"directory is ");
            }
            else
            {
                session.Log(@"The registry key is not found");
            }
        }
        catch (Exception e) 
        {
            session.Log(@"Error "+e);
        }
        return ActionResult.Success;
    }
} 
```

最后一件事：

```
<SetProperty Id="INSTALLLOCATION" Value="[DIRFROMREG]" After="Your custom action">NOT DIRFROMREG=0</SetProperty> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-28T17:02:37.063

Nerielle 有一个很好的答案。我的安装都转到子文件夹，所以当我找到一个旧组件时，我需要父文件夹进行安装，所以我来[这里](https://stackoverflow.com/questions/12051983/wix-getting-parent-directory)寻求答案。
从[自定义操作到操作属性](https://stackoverflow.com/questions/36503593/custom-action-in-wix-to-manipulate-string-and-set-property) ，我发现了如何获取父文件夹，因为我有一个已知的固定安装子路径。

```
 <!-- Set INSTALLFOLDER from SERVERINSTALLFOLDER without the \Server\ -->
    <CustomAction Id="VBScriptInstallFolderFromFoundServer" Script="vbscript">
      <![CDATA[         
        pathvalue = Session.Property("SERVERINSTALLFOLDER")
        if pathvalue <> "" Then
          Session.Property("INSTALLFOLDER") = Left(pathvalue,Len(pathvalue)-Len("\Server\"))
        End If
      ]]>
    </CustomAction> 
```

结合[定位另一个产品的安装目录](https://stackoverflow.com/questions/17292834/how-can-an-msi-installer-extension-locate-the-installation-directory-of-another)

```
 <Property Id="SERVERINSTALLFOLDER">
      <!-- Id="C_SERVER_SERVERHOST.EXE" Guid="{xxx GUID OF my exe component xxx}" -->
      <ComponentSearch Id="ServerComponentSearch" Type="file" Guid="{xxx GUID OF my exe component xxx}">
        <DirectorySearch Id="ServerComponentDirectorySearch" Depth="0" AssignToProperty="yes" />
      </ComponentSearch>
    </Property> 
```

并且使用[Wix 记住](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern/) 在注册表中存储 INSTALLFOLDER 路径的属性模式。
我现在可以更新旧版本，或者安装新版本，以获得先前安装的正确安装路径作为建议。
vbscript 可能已更改为使用路径处理功能来查找父级，而不是删除固定的子字符串以更正确地回答问题但是......
我的 InstallUISequence 和 InstallExecuteSequence ：

```
 <!-- Save INSTALLFOLDER parameter to CMDLINE_INSTALLFOLDER -->
      <Custom Action='SaveCmdLineValue' Before='AppSearch' />
      <!-- Set INSTALLFOLDER from SERVERINSTALLFOLDER without the \Server\ -->
      <Custom Action="VBScriptInstallFolderFromFoundServer" After="AppSearch">
        SERVERINSTALLFOLDER
      </Custom>
      <!-- Set INSTALLFOLDER from parameter CMDLINE_INSTALLFOLDER -->
      <Custom Action='SetFromCmdLineValue' After='VBScriptInstallFolderFromFoundServer'>
        CMDLINE_INSTALLFOLDER
      </Custom> 
```

最后......在产品中，我指的是我放入这些的片段：

```
 <!-- Install to previous install path From parameter, OR from found installation OR from registry -->
    <CustomActionRef Id='SaveCmdLineValue' />
    <PropertyRef Id='INSTALLFOLDER'/><!-- include Fragment -->
    <PropertyRef Id='SERVERINSTALLFOLDER'/><!-- include Fragment -->
    <CustomActionRef Id='VBScriptInstallFolderFromFoundServer' /><!-- include Fragment --> 
```

# python - 关于 Python 中另一个函数中的函数

> ID：12051987
> 
> 赞同：1
> 
> 时间：2012-08-21T09:32:35.757
> 
> 标签：python, function, scope, behavior

> **可能重复：**
> [Python 变量范围问题](https://stackoverflow.com/questions/370357/python-variable-scope-question)
> [Python 嵌套函数范围](https://stackoverflow.com/questions/2609518/python-nested-function-scopes)

我对以下代码感到困惑

```
def func():
    a=10
    def func2():
        print a
        a=20
    func2()
    print a

func() 
```

在python 2.7中，运行上述代码时，python会报错`UnboundLocalError`，，抱怨在`func2`，当`print a`，'a'在赋值前被引用

但是，如果我发表评论`a=20`，`func2`一切顺利。Python 将打印两行 10；即，以下代码是正确的。

```
def func():
    a=10
    def func2():
        print a

    func2()
    print a

func() 
```

为什么？因为在其他语言中，比如 c/c++

```
{
    a=10
    {
        cout<<a<<endl //will give 10
        a=20          //here is another a
        cout<<a<<endl //here will give 20
    }
} 
```

局部变量和外部变量可以很清楚地区分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T09:36:03.020

通过添加 行`a=20`，Python 分析代码并看到它`a`也用作局部变量名称。在这种情况下，您尝试打印尚未定义的变量的值（在 中`func2`）。

如果没有该行，Python 将使用`a`范围 of 中的值`func`（在内部仍然有效`func2`）。您是正确的，这与您在 C/C++ 中的示例不同。

# html - 浮动：右+保持固定

> ID：12051991
> 
> 赞同：1
> 
> 时间：2012-08-21T09:32:43.170
> 
> 标签：html, css

我正在创建一个右侧有 div 的网站（float:right;）。但我希望它也表现得像一个固定的 div。但是当添加 (position:fixed;) 时，div 的行为不再像浮动 div 了。所以左 div 占据所有位置并与右 div 重叠。

希望有答案...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T09:34:36.527

```
#div-right {
   position: fixed;
   right: 0px;
   width: 100px;
}
#div-left {
   margin-right: 100px;
} 
```

[工作示例](http://jsfiddle.net/4xEyE/3/)

# ruby-on-rails - 在 Rails 中没有其他查询的情况下限制急切地加载 `where`

> ID：12051996
> 
> 赞同：3
> 
> 时间：2012-08-21T09:33:08.070
> 
> 标签：ruby-on-rails, activerecord, activemodel

A有很多B，B有很多C。C 有一个名为 的属性`thing`：

```
class A < ActiveRecord::Base
  has_many :bs
end
class B < ActiveRecord::Base
  belongs_to :a
  has_many :cs
end
class C < ActiveRecord::Base
  belongs_to :b
  attr_accessible :thing
end 
```

我想查询属于 A 的所有 B，并急切地加载属于所述 B 的 C：

```
> a = A.first
  A Load (0.2ms)  SELECT "as".* FROM "as" LIMIT 1
 => #<A id: 1, created_at: "2012-08-21 09:25:18", updated_at: "2012-08-21 09:25:18"> 
> bs = a.bs.includes(:cs)
  B Load (0.2ms)  SELECT "bs".* FROM "bs" WHERE "bs"."a_id" = 1
  C Load (0.1ms)  SELECT "cs".* FROM "cs" WHERE "cs"."b_id" IN (1)
 => [#<B id: 1, a_id: 1, created_at: "2012-08-21 09:25:22", updated_at: "2012-08-21 09:25:22", thing: nil>] 
> 
```

这很好用：

```
> bs[0]
 => #<B id: 1, a_id: 1, created_at: "2012-08-21 09:25:22", updated_at: "2012-08-21 09:25:22", thing: nil> 
> bs[0].cs
 => [#<C id: 1, b_id: 1, thing: 2, created_at: "2012-08-21 09:29:31", updated_at: "2012-08-21 09:29:31">] 
> 
```

——但不是在我想稍后`where()`对属于 B 实例的 C 执行搜索的情况下：

```
> bs[0].cs.where(:thing => 1)
  C Load (0.2ms)  SELECT "cs".* FROM "cs" WHERE "cs"."b_id" = 1 AND "cs"."thing" = 1
 => [] 
> bs[0].cs.where(:thing => 2)
  C Load (0.2ms)  SELECT "cs".* FROM "cs" WHERE "cs"."b_id" = 1 AND "cs"."thing" = 2
 => [#<C id: 1, b_id: 1, thing: 2, created_at: "2012-08-21 09:29:31", updated_at: "2012-08-21 09:29:31">] 
> 
```

请注意，尽管我们有可用信息，但仍会重新发出查询。

当然，我可以使用`Enumerable#select`：

```
> bs[0].cs.select {|c| c.thing == 2}
 => [#<C id: 1, b_id: 1, thing: 2, created_at: "2012-08-21 09:29:31", updated_at: "2012-08-21 09:29:31">] 
> 
```

这避免了重新查询，但我有点希望 Rails 本身可以做类似的事情。

真正的缺点是我想在我们不知道关联是否已被热切加载的情况下使用此代码。如果没有，则该`select`方法将在执行过滤之前为 B 加载所有 C，而该`where`方法将生成 SQL 以获取较小的数据集。

我根本不相信这很重要，但是如果我在急切加载方面缺少什么，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:02:24.543

我不认为你缺少任何东西。我不相信主动记录可以做任何聪明的事情——而且我认为要可靠地做到这一点非常困难。就像你说的那样，它必须确定你是否已经预先加载了关联，但它还必须猜测循环遍历 Cs 的内存集合是否更快（如果它很小集合）或者去数据库一次获取所有适当的 C 是否会更快（如果它是一个非常大的集合）。

在您的情况下，最好的办法可能是将默认范围设置为*始终*预加载 cs，甚至可能编写自己的奇特方法来逐个获取它们。可能是这样的：

```
class B < ActiveRecord::Base
  belongs_to :a
  has_many :cs
  default_scope includes(:cs)

  def cs_by_thing(thing)
    cs.select{|c|c.thing == thing}
  end
end 
```

然后你总是可以知道在查询你的 cs 时你永远不会回到数据库：

```
a = A.first
[db access]
a.bs.first
[db access]
a.bs.first.cs
a.bs.first.cs_by_thing(1)
a.bs.first.cs_by_thing(2) 
```

# android - Android WebView 屏幕在点击不可点击区域时冻结

> ID：12051998
> 
> 赞同：0
> 
> 时间：2012-08-21T09:33:11.343
> 
> 标签：android, android-webview

我的 webView 上有几个按钮，我只希望它们可以点击。

目前，如果我点击空闲空间或文本区域，图形会变形，很快整个画面就会冻结。

我试图覆盖 OnTouchListener 使用

```
webView.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            return true;
        }
    }); 
```

这部分符合我的目的。现在屏幕不会在点击时被选中，但即使是按钮也不能再点击了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:09:04.147

检查你的logcat。可能会发生任何您无法捕获的异常。找到那个例外。

# java - Swing 依赖组件和事件系统

> ID：12051999
> 
> 赞同：2
> 
> 时间：2012-08-21T09:33:15.230
> 
> 标签：java, swing, jtable, tablemodel, tablecelleditor

我必须用 Swing 在 JAVA 中构建一个复杂的 GUI（目前我有近 80 个类）。应用程序的图形部分拆分如下：第一个选项卡系列（例如“管理”、“管理”、“配置”），然后是第二个级别（例如，“用户”、“组”、“游戏” ）。现在我有两个年级（每个级别的标签一个）。下一个级别是管理业务对象的 JPanel（我的整个 GUI 是围绕我的业务模型构建的），在这个级别有 2 种类型的 JPanel：谁管理简单对象（例如，“用户”、“类别”、“游戏” ”，“级别”）和管理对象的“复合主键”（例如“User_Game”，它代表所有用户的每个游戏级别的复式表的形式）。我的第二级选项卡可以包含多个 JPanel。当我的 JPanel 管理单个对象时，它由一个 JTable 和两个按钮（添加和删除）组成，我在上面放置事件，如果不是，它就是一个简单的 JTable。当我有外键（例如“用户”的“组”和“游戏”的“类别”或“用户游戏”的“级别”）时，它是一个直接从 JTableModel 获取其信息的 JComboBox。在管理 JTable 对象以“复合主键”时，列和行也直接依赖于模型（例如“Game”和“User”“User_Game”）。每个都有自己的 JTable 模型来处理持久层（用于信息的 Hibernate）和其他 TableModel。要管理更改（例如添加、修改或删除“用户”），我使用以下代码：

```
import java.awt.event.*;
import javax.swing.*;
import java.beans.*;

/*
 *  This class listens for changes made to the data in the table via the
 *  TableCellEditor. When editing is started, the value of the cell is saved
 *  When editing is stopped the new value is saved. When the oold and new
 *  values are different, then the provided Action is invoked.
 *
 *  The source of the Action is a TableCellListener instance.
 */
public class TabCellListener implements PropertyChangeListener, Runnable
{
    private JTable table;
    private Action action;

    private int row;
    private int column;
    private Object oldValue;
    private Object newValue;

    /**
     *  Create a TableCellListener.
     *
     *  @param table   the table to be monitored for data changes
     *  @param action  the Action to invoke when cell data is changed
     */
    public TabCellListener(JTable table, Action action)
    {
        this.table = table;
        this.action = action;
        this.table.addPropertyChangeListener( this );
        this.table.getModel().addTableModelListener(new ModelListenerTableGui(this.table, this.action));
    }

    /**
     *  Create a TableCellListener with a copy of all the data relevant to
     *  the change of data for a given cell.
     *
     *  @param row  the row of the changed cell
     *  @param column  the column of the changed cell
     *  @param oldValue  the old data of the changed cell
     *  @param newValue  the new data of the changed cell
     */
    private CellListenerTableGui(JTable table, int row, int column, Object oldValue, Object newValue)
    {
        this.table = table;
        this.row = row;
        this.column = column;
        this.oldValue = oldValue;
        this.newValue = newValue;
    }

    /**
     *  Get the column that was last edited
     *
     *  @return the column that was edited
     */
    public int getColumn()
    {
        return column;
    }

    /**
     *  Get the new value in the cell
     *
     *  @return the new value in the cell
     */
    public Object getNewValue()
    {
        return newValue;
    }

    /**
     *  Get the old value of the cell
     *
     *  @return the old value of the cell
     */
    public Object getOldValue()
    {
        return oldValue;
    }

    /**
     *  Get the row that was last edited
     *
     *  @return the row that was edited
     */
    public int getRow()
    {
        return row;
    }

    /**
     *  Get the table of the cell that was changed
     *
     *  @return the table of the cell that was changed
     */
    public JTable getTable()
    {
        return table;
    }
//
//  Implement the PropertyChangeListener interface
//
    @Override
    public void propertyChange(PropertyChangeEvent e)
    {
        //  A cell has started/stopped editing

        if ("tableCellEditor".equals(e.getPropertyName()))
        {
            if (table.isEditing())
                processEditingStarted();
            else
                processEditingStopped();
        }
    }

    /*
     *  Save information of the cell about to be edited
     */
    private void processEditingStarted()
    {
        //  The invokeLater is necessary because the editing row and editing
        //  column of the table have not been set when the "tableCellEditor"
        //  PropertyChangeEvent is fired.
        //  This results in the "run" method being invoked

        SwingUtilities.invokeLater( this );
    }
    /*
     *  See above.
     */
    @Override
    public void run()
    {
        row = table.convertRowIndexToModel( table.getEditingRow() );
        column = table.convertColumnIndexToModel( table.getEditingColumn() );
        oldValue = table.getModel().getValueAt(row, column);
        newValue = null;
    }

    /*
     *  Update the Cell history when necessary
     */
    private void processEditingStopped()
    {
        newValue = table.getModel().getValueAt(row, column);

        //  The data has changed, invoke the supplied Action

        if ((newValue == null && oldValue != null) || (newValue != null && !newValue.equals(oldValue)))
        {
            //  Make a copy of the data in case another cell starts editing
            //  while processing this change

            CellListenerTableGui tcl = new CellListenerTableGui(
                getTable(), getRow(), getColumn(), getOldValue(), getNewValue());

            ActionEvent event = new ActionEvent(
                tcl,
                ActionEvent.ACTION_PERFORMED,
                "");
            action.actionPerformed(event);
        }
    }
} 
```

以及以下动作：

```
import java.awt.event.ActionEvent;
import java.beans.PropertyChangeListener;

import javax.swing.Action;

public class UpdateTableListener<N> extends AbstractTableListener implements Action
{
    protected boolean enabled;
    public UpdateTableListener(AbstractTableGui<N> obs)
    {
        super(obs);
        this.enabled = true;
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        if (null != e && e.getSource() instanceof CellListenerTableGui)
        {
            TabCellListener tcl = (TabCellListener)e.getSource();

            this.obs.getModel().setValueAt(tcl.getNewValue(), tcl.getRow(), tcl.getColumn());
            int sel = this.obs.getModel().getNextRequiredColumn(tcl.getRow());

            if (sel == -1)
                this.obs.getModel().save(tcl.getRow());
        }
    }

    @Override
    public void addPropertyChangeListener(PropertyChangeListener arg0)
    {
    }

    @Override
    public Object getValue(String arg0)
    {
        return null;
    }

    @Override
    public boolean isEnabled()
    {
        return this.enabled;
    }

    @Override
    public void putValue(String arg0, Object arg1)
    {

    }

    @Override
    public void removePropertyChangeListener(PropertyChangeListener arg0)
    {

    }

    @Override
    public void setEnabled(boolean arg0)
    {
        this.enabled = arg0;

    }

} 
```

此代码运行良好，数据保存良好。然后我添加这段代码来刷新依赖组件：

```
import java.awt.event.ActionEvent;
import java.beans.PropertyChangeListener;

import javax.swing.Action;

public class ChangeTableListener implements Action
{

    protected AbstractTableGui table;

    public ChangeTableListener(AbstractTableGui table)
    {
        this.table = table;
    }

    @Override
    public void actionPerformed(ActionEvent arg0)
    {
        this.table.getModel().fireTableDataChanged();
        this.table.repaint();
    }

    @Override
    public void addPropertyChangeListener(PropertyChangeListener arg0)
    {
    }

    @Override
    public Object getValue(String arg0)
    {
        return null;
    }

    @Override
    public boolean isEnabled()
    {
        return false;
    }

    @Override
    public void putValue(String arg0, Object arg1)
    {
    }

    @Override
    public void removePropertyChangeListener(PropertyChangeListener arg0)
    {
    }

    @Override
    public void setEnabled(boolean arg0)
    {
    }
} 
```

我的 TableModel.fireTableDataChanged 重建 JTable 内容（调用 super.fireTableDataChanged 和 fireTableStructureChanged），JTable.repaint 重置了渲染器，它适用于 Combobox（外键）并且它更新了复式表上的标题，但它不能添加或删除复式表中的列或行。此外，如果有最轻微的变化，我会看到更高的延迟。

我的问题很简单：你如何管理相互依赖的组件？

为了您的帮助，提前，谢谢。

编辑：这里是 TableCellEditor 的一个例子。

```
import javax.swing.DefaultCellEditor;
import javax.swing.JTextField;

public class TextColumnEditor extends DefaultCellEditor
{

    public TextColumnEditor()
    {
        super(new JTextField());
    }

    public boolean stopCellEditing()
    {
        Object v = this.getCellEditorValue();
        if(v == null || v.toString().length() == 0)
        {
            this.fireEditingCanceled();
            return false;
        }
        return super.stopCellEditing();
    }
} 
```

TableModel 的一个例子：

```
import java.util.ArrayList;

public class GroupModelTable extends AbstractModelTable<Groups>
{
    protected GroupsService service;

    public GroupModelTable(AbstractTableGui<Groups> content)
    {
        super(content, new ArrayList<String>(), new ArrayList<Groups>());
        this.headers.add("Group");
        this.content.setModel(this);
        this.service = new GroupsService();
        this.setLines(this.service.search(new Groups()));
    }

    public Object getValueAt(int rowIndex, int columnIndex)
    {
        switch (columnIndex)
        {
            case 0:
                return this.lines.get(rowIndex).getTitle();
            default:
                return "";
        }
    }

    public void setValueAt(Object aVal, int rowIndex, int columnIndex)
    {
        switch (columnIndex)
        {
            case 0:
                this.lines.get(rowIndex).setTitle(aVal.toString());
                break;
            default:
                break;
        }
    }

     @Override
     public Groups getModel(int line, int column)
     {
         return null;
     }

     @Override
     public Groups getModel(int line)
     {
         return this.lines.get(line);
     }

     public boolean isCellEditable(int row, int column)
     {
        return true;
     }

    @Override
    public GroupModelTableGui newLine()
    {
        this.lines.add(new Groups());
        return this;
    }

    @Override
    public int getNextRequiredColumn(int row)
    {
        Groups g = this.getModel(row);
        if (g != null && g.getTitle() != null && g.getTitle().length() > 0)
            return -1;

        return 0;
    }

    @Override
    public void save(int row)
    {
        Groups g = this.getModel(row);
        if (g != null)
        {
            try
            {
                if (g.getId() == null)
                    this.service.create(g);
                else
                    this.service.update(g);
            }
            catch (Exception e)
            {

            }
        }
    }

    @Override
    public void removeRow(int row)
    {
        Groups g = this.getModel(row);
        if (g != null)
        {
            try
            {
                if (g.getId() != null)
                    this.service.delete(g);

                super.removeRow(row);
            }
            catch (Exception e)
            {

            }
        }
    }
} 
```

表的一个例子：

```
public class GroupTable extends AbstractTable<Groups>
{
    public GroupTable()
    {
        new GroupModelTableGui(this);
        new CellListenerTableGui(this.getContent(), new UpdateTableListenerGui<Groups>(this));
        this.getContent().getColumnModel().getColumn(0).setCellEditor(new TextColumnEditorGui());
    }

} 
```

我希望它能帮助你理解：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T10:12:33.587

你`TabCellListener`对我来说很陌生。您*不*`TableCellEditor`应该与直接交互。它应该实现and ，如本[例](https://stackoverflow.com/a/10067560/230513)所示。当编辑器结束时，模型将具有新值。你应该处理持久性。一个以上的视图可能会收听一个via 。*`TableModel``getTableCellEditorComponent()``getCellEditorValue()``TableModel``TableModel``TableModelListener`*

 *附录：您的`CellEditor`, `TextColumnEditor`, 可能不应该调用`fireEditingCanceled()`. 按下`Escape`应该足以恢复编辑，如本[例](https://stackoverflow.com/a/7539298/230513)所示。您还可以查看相关的[教程部分](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#validtext)和[示例](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableFTFEditDemoProject/src/components/IntegerEditor.java)。*