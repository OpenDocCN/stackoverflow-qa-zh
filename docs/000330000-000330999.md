# StackOverflow 问答 000330000-000330999

# flash - Flash CS3 错误：fl.getDocumentDOM() 没有属性

> ID：330004
> 
> 赞同：0
> 
> 时间：2008-12-01T03:56:28.017
> 
> 标签：flash, flash-cs3

是什么导致发布错误：“fl.getDocumentDOM() has no properties”？

该错误仅在使用项目窗格中的“测试项目”按钮时发生。它不会导致发布失败，只是很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-01T03:57:36.580

当您没有打开任何 Flash 文档时会发生这种情况。您不能在不引发错误的情况下在 flash cs3 中发布“无头”（尽管是良性的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-09T09:59:12.723

我有一个友好的解决方案：

```
var myDocument = fl.getDocumentDom() || false;
if(!myDocument){
  alert("Please open at least one document");
} 
```

# ruby - 在 Ruby 中，getoptlong 会破坏性地解析 ARGV。有没有解决的办法？

> ID：330008
> 
> 赞同：3
> 
> 时间：2008-12-01T03:58:00.383
> 
> 标签：ruby, getopt

我需要多次调用 getoptlong，但在第一次 ARGV 为空之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T04:00:24.013

在第一次调用之前捕获参数，完成后将它们放回去。不过，听起来你正在做一些奇怪的事情。

**编辑**：（扩展）

这里有很多复制和粘贴。我认为这有助于清晰：

```
require 'getoptlong'

storage = ARGV.clone

opts = GetoptLong.new(
  ['--help', '-h', GetoptLong::NO_ARGUMENT ],
  [ '--repeat', '-n', GetoptLong::REQUIRED_ARGUMENT ],
  [ '--name', GetoptLong::OPTIONAL_ARGUMENT ]
)

puts "Before: #{ARGV.inspect}"
opts.each { |opt, arg| puts "Parsed #{opt} = #{arg}" }
puts "After: #{ARGV.inspect}"

# Copy
storage.each {|x| ARGV << x }

opts = GetoptLong.new(
  ['--help', '-h', GetoptLong::NO_ARGUMENT ],
  [ '--repeat', '-n', GetoptLong::REQUIRED_ARGUMENT ],
  [ '--name', GetoptLong::OPTIONAL_ARGUMENT ]
)

puts "Before 2: #{ARGV.inspect}"
opts.each { |opt, arg| puts "Parsed #{opt} = #{arg}" }
puts "After 2: #{ARGV.inspect}" 
```

# latex - 如何在 LaTeX 的数学模式下显示插入符号 (^)？

> ID：330010
> 
> 赞同：20
> 
> 时间：2008-12-01T03:59:10.570
> 
> 标签：latex, math-mode

我试图`^`在 LaTeX 中以数学模式显示插入符号 () 以表示在“C 语言”中实现的独占或操作。默认情况下，`^`用于在数学模式下创建上标。我似乎能得到的最接近的是 using `\wedge`，这是不一样的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-01T04:53:25.937

您可能希望使用通用符号来表示排他性，或者改为使用 \oplus（但使用类似 的名称为其命名`\newcommand\XOR{\oplus}`）。

插入符号有点太小而无法作为二元运算符引起注意。但是，如果您确实坚持使用插入符号，请使用：

```
\newcommand\XOR{\mathbin{\char`\^}}
$x \XOR y$ 
```

为二元运算符在符号周围`\mathbin`放置正确的间距，并`\char`确保字形是从罗马字体获得的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2011-09-20T07:45:26.880

使用楔形符号作为上标。它有完美的尺寸。

像这样的东西：

```
$ ^\wedge $ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-01T04:05:37.687

怎么样

```
\^{} 
```

或者

```
\verb|^| 
```

?

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-01T04:16:34.637

在数学模式下，您可以使用：

```
$7 \^{ } 3 = 4$ 
```

要做到这一点，如在线 LaTeX 渲染器[所示](http://thornahawk.unitedti.org/equationeditor/equationeditor.php)。

![在此处输入图像描述](https://i.stack.imgur.com/qIxxp.jpg)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-10-20T14:09:48.667

`\textasciicircum`在文本模式下使用。如果您处于数学模式，则需要使用类似`$\mbox{\textasciicircum}$`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-02-17T16:41:26.777

这就是我所做的：

```
$2\hat{\text{ }}3$ 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-01T04:22:09.557

`\^`是适用于其他字符的重音字符，在其头上`\^{4}`给出一个克拉。`4`它不占用水平空间。如果你写`$7 \^{} 3 = 4$`，你会得到一个`73`带有标记的`7`和`3`。然后，您需要稍微填充空间。通过反复试验和一个名为 LatexIt 的不错的应用程序，我发现这个序列可以很好地工作：

```
\hspace{1.5} \^{} \hspace{1.5} 
```

这给出了 3 个单位的宽度，其中克拉居中。看起来很好。

虽然它是一个尖尖的克拉，并`\verb|^|`给出了一个更扁平的，看起来更像是编程语言中经常使用的单型字体。

# java - 如果我只想在其中使用 Java，Eclipse 和 Netbeans 有什么区别？

> ID：330027
> 
> 赞同：26
> 
> 时间：2008-12-01T04:12:13.197
> 
> 标签：java, eclipse, netbeans, vista64

我最近为自己买了一台戴尔 XPS 64 位 Vista。Eclipse 没有 64 位版本，但我在论坛上看到他们下载了 Eclipse 并在 Vista 上使用 Java 1.5，但只有一些问题。我有 Java 1.6，而且 Netbeans 很容易下载。

如果我现在从 Eclipse 转移到 Netbeans，我会注意到的基本/重大区别是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-12-02T16:35:57.267

可口可乐和百事可乐有什么区别？

好吧，它并不是真的那么相似，但很多差异都在定性方面。说到 Netbeans 6.1 和 6.5：

*   Netbeans 有一个非常不同的 UI 和工作流程。没有透视图，但工具栏等会根据需要自动出现/隐藏（即调试）。构建过程不同。管理项目是不同的。

*   Netbeans 专注于流畅、集成的体验，有时会牺牲功能。Profiler 完全集成到编辑器中（上下文菜单让您可以快速操作分析器），但缺少 Eclipse 分析器的一些功能。

*   Netbeans 具有紧密集成的 JSP/Servlet/JSF 开发环境。整个工作流程从开发、调试、部署连接在一起。这更像是一种“感觉”。

*   Netbeans 编辑器缺少几个 Eclipse 功能。拼写检查是一项突出的检查。快速完成（Ctrl-K、Ctrl-J）是未充分利用的 Netbeans 功能。片段是另一个（尽管它们有一个自动完成的模板，可以填充不同但相似的细分市场）。

*   选择少。如果您不喜欢其中一个包含的工具，那么您不太可能找到一个好的替代插件。

*   马蒂斯。Eclipse GUI 编辑器已经开始迎头赶上，但它们根本无法与 Matisse 相比。从表面上看，它们似乎是等价的……

*   `<sarcasm>`你的朋友会取笑你。`</sarcasm>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-01T22:06:38.613

也许当您同时处理多个（许多）项目时，我更喜欢 Eclipse（工作空间组织非常适合）。界面似乎在 Eclipse 中响应更好（至少与旧版本的 NetBeans 相比，例如 5.0）。这与 SWT 与 Swing 性能问题有关，尽管差异没有 Java 1.4 天那么大。

但是我会说 Netbeans 是一个更好的集成 IDE，无论您是开发桌面应用程序还是 JSP/Servlet Web 应用程序，您都可以以相同的方式启动/调试应用程序。构建完全依赖于 Ant（我认为是第 4 版），Netbeans 透明地启动/添加 ant 目标。Eclipse 中的 Ant 具有与贴在汽车前部的一对公牛角相同的集成度。

Eclipse 比 Netbeans 更具可扩展性，但后者更统一。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-10T00:30:37.583

为什么不同时使用？

我喜欢 netbeans Profiling 工具比 eclipse 的*好得多*，因为它们在 Linux 上直接开箱即用。

我使用 Eclipse 进行正常编辑，mylin 工具确实可以帮助您以面向任务的方式工作。

Netbeans 支持 Eclipse 项目的导入，因此如果需要，您可以使用两个 IDE 处理单个项目。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-12-01T04:20:29.137

我认为这主要是文化冲击。不同地方的东西。功能命名不同的事物。

如果您真的想尝试一下 Netbeans，请强迫自己使用一个月。第一天左右会很糟糕，因为没有一个快捷方式是相同的，各种成语会有所不同等等。

在月底，你将有足够的能力，这些东西应该已经消失了，你可以客观地决定你是否更喜欢它。（顺便说一句，我目前正在尝试使用 IntelliJ。当前状态，困惑 ;-)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-05T22:54:23.207

遗憾的是，您还很快发现 Netbeans 远比 Eclipse 不稳定。我对 6.1 进行了认真的尝试（一个多月；）），这对我来说是更引人注目的“功能”。有时，鼠标的简单移动就足以杀死应用程序。他们自 5.x 以来取得了巨大的进步，但恕我直言，Netbeans 仍然远远落后于 Eclipse。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-25T20:47:32.747

Netbeans 的基本工作流程更加流畅可靠；像 ^X 这样的小东西可以正常工作。它也很简单，可以理解它在做什么。

otoh，Eclipse 本身就具有作为平台的 emacs 质量；有些人发誓。

编辑：在遇到 HyperAssist 时，我改变了主意：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=159157](https://bugs.eclipse.org/bugs/show_bug.cgi?id=159157)

很简单，HyperAssist 插件填补了使 Eclipse 无法获得金牌的缺失部分；有了它，Eclipse 是我用过的最好的 IDE。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-07-22T10:15:10.733

我最近一直在尝试 Netbeans 6.5 并发现/理解：

*   Netbeans 有更好的新语言支持（因为它是新技术的“参考”IDE/实现）
*   与上面类似，但 Eclipse*仍然*没有与 sun 的 javac 的 1-1 通用兼容性或“使其兼容”的选项（Eclipse 在推断类型方面太聪明了 - 正确，但如果你的构建机器不能它）
*   不需要立即使用插件 - 内置了 subversion（和 Mercurial？），并且由于它与 ant 很好地集成，我发现对 Ivy 等插件的需求较少。
*   多个类路径——你有编译时间、运行时间、测试编译时间和测试运行时间。这意味着如果你添加一些东西作为测试依赖项（你的构建脚本知道），它对主代码是不可见的。同样，对于 IDE/构建服务器的一致性非常好。

*   标记导航是通过任务列表而不是通过当前文件。

*   Netbeans在更新标记*方面*要慢得多（可能是由于 ant 编译而不是 eclipse 的三重编译器）。当试图快速导航和修复任务标记时，这会导致巨大的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-08T08:00:39.547

流行的[Mylyn](http://www.eclipse.org/mylyn)生产力工具是一个仅在 Eclipse 中可用的关键特性。

一位 Joel on Software 论坛参与者写道：“我被 Eclipse 的一些特性所吸引，特别是：Mylyn，并且想尝试一下。” [http://discuss.joelonsoftware.com/default.asp?joel.3.703449](http://discuss.joelonsoftware.com/default.asp?joel.3.703449)

[Mylyn](http://www.eclipse.org/mylyn)提供对错误和问题跟踪器的集成访问。当您处理错误或问题时，Mylyn 将 Eclipse UI 仅集中在与手头任务相关的代码上。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-01T06:10:25.937

构建系统不同。Eclipse 有一个内部构建机制，而 NetBeans 依赖于 ant。

# objective-c - Objective-C 对象的列表选择器

> ID：330030
> 
> 赞同：40
> 
> 时间：2008-12-01T04:13:18.437
> 
> 标签：objective-c, selector

我有一个对象，我想列​​出它响应的所有选择器。感觉这应该是完全可能的，但我在找到 API 时遇到了麻烦。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2008-12-01T05:54:52.647

这是一个基于运行时 C 函数的解决方案：

给定可从对象获得的 Class 对象，class_copyMethodList 返回类方法列表。

```
#import <objc/runtime.h> 
```

[..]

```
SomeClass * t = [[SomeClass alloc] init];

int i=0;
unsigned int mc = 0;
Method * mlist = class_copyMethodList(object_getClass(t), &mc);
NSLog(@"%d methods", mc);
for(i=0;i<mc;i++)
    NSLog(@"Method no #%d: %s", i, sel_getName(method_getName(mlist[i])));

/* note mlist needs to be freed */ 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-06T08:43:37.673

我认为通常您会希望在控制台中执行此操作，而不是让您的代码与调试代码混淆。在 lldb 中调试时，您可以这样做：

（假设一个对象 t）

```
p int $num = 0;
expr Method *$m = (Method *)class_copyMethodList((Class)object_getClass(t), &$num);
expr for(int i=0;i<$num;i++) { (void)NSLog(@"%s",(char *)sel_getName((SEL)method_getName($m[i]))); } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-10T02:09:32.960

这在 Swift 中也是可能的：

```
let obj = NSObject()

var mc: UInt32 = 0
let mcPointer = withUnsafeMutablePointer(&mc, { $0 })
let mlist = class_copyMethodList(object_getClass(obj), mcPointer)

print("\(mc) methods")

for i in 0...Int(mc) {
    print(String(format: "Method #%d: %s", arguments: [i, sel_getName(method_getName(mlist[i]))]))
} 
```

输出：

```
251 methods
Method #0: hashValue
Method #1: postNotificationWithDescription:
Method #2: okToNotifyFromThisThread
Method #3: fromNotifySafeThreadPerformSelector:withObject:
Method #4: allowSafePerformSelector
Method #5: disallowSafePerformSelector
...
Method #247: isProxy
Method #248: isMemberOfClass:
Method #249: superclass
Method #250: isFault
Method #251: <null selector> 
```

使用运行 iOS 9.2、Xcode 版本 7.2 (7C68) 的 6s 模拟器进行测试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-15T23:06:22.297

从[JAL](https://stackoverflow.com/a/35305698/1288097)的回答中汲取灵感，在 Swift 中，您可以执行以下操作：

```
extension NSObject {
    var __methods: [Selector] {
        var methodCount: UInt32 = 0
        guard
            let methodList = class_copyMethodList(type(of: self), &methodCount),
            methodCount != 0
        else { return [] }
        return (0 ..< Int(methodCount))
            .flatMap({ method_getName(methodList[$0]) })
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-28T20:07:45.877

ARC实现

```
SomeClass *someClass = [[SomeClass alloc] init];    

//List of all methods
unsigned int amountMethod = 0;
Method *methods = class_copyMethodList(someClass, &amountMethod);

for (unsigned int i = 0; i < amountMethod; i++) {
    Method method = methods[i];

    printf("\t method named:'%s' \n", sel_getName(method_getName(method)));
}

free(methods); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T05:11:04.607

像这样的东西应该可以工作（只需将它放在您感兴趣的对象中）。例如，如果您有一个委托对象并且想知道有哪些“钩子”可用，这将打印出消息为您提供该线索：

```
-(BOOL) respondsToSelector:(SEL)aSelector {
    printf("Selector: %s\n", [NSStringFromSelector(aSelector) UTF8String]);
    return [super respondsToSelector:aSelector];
} 
```

请注意，我在**iPhone Developer's Cookbook**中发现了这一点，所以我不能相信！例如，我从`UIViewController`实现协议的 a 获得的输出`<UITableViewDelegate, UITableViewDataSource>`：

```
Selector: tableView:numberOfRowsInSection:
Selector: tableView:cellForRowAtIndexPath:
Selector: numberOfSectionsInTableView:
Selector: tableView:titleForHeaderInSection:
Selector: tableView:titleForFooterInSection:
Selector: tableView:commitEditingStyle:forRowAtIndexPath:
Selector: sectionIndexTitlesForTableView:
Selector: tableView:sectionForSectionIndexTitle:atIndex:
...
...
etc.,etc. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-04T02:13:34.717

如果你还想获得超类的选择器，你可以像这样循环：

```
 Class c = [myObject class];
    while (c != nil) {
        int i = 0;
        unsigned int mc = 0;
        Method* mlist = class_copyMethodList(c, &mc);
        NSLog(@"%d methods for %@", mc, c);
        for(i = 0; i < mc; i++) {
            const char* selName = sel_getName(method_getName(mlist[i]));
            NSLog(@"Method #%d: %s", i, selName);
        }
        free(mlist);
        c = [c superclass];
    } 
```

# c# - 检查文件是否为 .NET 程序集

> ID：330032
> 
> 赞同：12
> 
> 时间：2008-12-01T04:16:09.147
> 
> 标签：c#, .net, reflection, clr

我已经看到了一些[通过检查二进制结构来检查 PEFile 是否为 .NET 程序集的方法](http://www.anastasiosyal.com/archive/2007/04/17/3.aspx)。

这是测试多个文件的最快方法吗？我假设尝试加载每个文件（例如通过[Assembly.ReflectionOnlyLoad](http://msdn.microsoft.com/en-us/library/0et80c7k(VS.80).aspx)）文件可能会很慢，因为它将加载文件类型信息。

注意：我正在寻找一种以编程方式检查文件的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-01T18:04:51.580

我猜 Stormenet 的回答在技术上不是*程序*化的，所以我将把我的回答分成一个答案。

为了获得最佳性能，没有什么比使用 a 打开文件`StreamReader`、读取前 (n) 个字节并检查字节流中的 .NET 文件签名数据结构更好的了。

几乎与您验证某个 DOS 可执行文件的方式相同：

[http://en.wikipedia.org/wiki/DOS_executable](http://en.wikipedia.org/wiki/DOS_executable)

寻找“MZ”标头字节，这也恰好是 MS-DOS 的开发者之一 Mark Zbikowski 的首字母。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T15:38:59.113

也许这有帮助

来自[https://web.archive.org/web/20110930194955/http://www.grimes.demon.co.uk/dotnet/vistaAndDotnet.htm](https://web.archive.org/web/20110930194955/http://www.grimes.demon.co.uk/dotnet/vistaAndDotnet.htm)

> 接下来，我检查它是否是一个 .NET 程序集。为此，我检查文件是否包含 CLR 标头。此标头包含有关 .NET 代码在文件中的位置以及用于编写该代码的框架版本的重要信息。此标头的位置在文件的数据目录表中给出。如果数据目录项的值为零，则该文件是非托管的，如果它具有非零值，则该文件是一个 .NET 程序集。
> 
> 您可以使用带有 /headers 开关的 dumpbin 实用程序自行测试。该实用程序将在命令行上的文件中打印各种标题。在可选标头值的末尾，您将看到数据目录的列表（总是有 16 个），如果 COM 描述符目录的位置不为零，则表明该文件是一个 .NET 程序集。还可以使用 /clrheader 开关列出 CLR 标头的内容（如果文件是非托管的，则不会显示任何值）。XP 在执行文件时测试 CLR 标头，如果存在 CLR 标头，它将初始化运行时并将程序集的入口点传递给运行时，以便文件完全在运行时内运行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-01T17:32:22.067

过去我使用过 AssemblyName.GetAssemblyName()，如果它不是托管程序集，则会引发异常。但是，我从来没有对它进行性能测试，所以我不能说它有多快。

[官方文档](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/assemblies-gac/how-to-determine-if-a-file-is-an-assembly)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T04:57:13.603

第一个链接将是最快和最简单的检查方法（PE 文件头）。您假设调用 Assembly.ReflectionOnlyLoad 会很慢是正确的。

# c# - Silverlight 和 WCF：最大消息大小

> ID：330034
> 
> 赞同：4
> 
> 时间：2008-12-01T04:16:49.083
> 
> 标签：c#, .net, wcf, silverlight

当我使用 WCF 从 silverlight 应用程序中传递对象列表时，一切正常，直到列表变得太大。似乎当我超过 80 项时出现错误：远程服务器返回了意外响应：（404）未找到

我假设这是因为列表变得太大，因为当列表有 70 个项目时，一切正常。奇怪的错误信息，对吧？

在配置文件中，我将 maxBufferSize 更改为它将接受的最大值，但我的列表中仍然不能有超过 80 个项目。

如何在不必拆分对象的情况下传递大对象？

* * *

谢谢肖恩，那我到底在哪里做呢？这是我的 ServiceReferences.ClientConfig

```
<configuration>
<system.serviceModel>
    <client>
      <!--"http://sy01911.fw.gsjbw.com/WcfService1/Service1.svc"-->
      <endpoint address="http://localhost/WcfService1/Service1.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService11"
            contract="SilverlightApplication1.ServiceReference1.IService1"
            name="BasicHttpBinding_IService1" />
    </client>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService1" maxBufferSize="655360000"
                maxReceivedMessageSize="655360000">
                <security mode="None" />
            </binding>
            <binding name="BasicHttpBinding_IService11" maxBufferSize="655360000"
                maxReceivedMessageSize="655360000">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

* * *

这是您提到的服务器配置

* * *

```
<services>
  <service name="WcfService1.Service1" behaviorConfiguration="WcfService1.Service1Behavior" >
    <!-- Service Endpoints -->
    <endpoint address="" binding="basicHttpBinding" contract="WcfService1.IService1" >
      <!-- 
          Upon deployment, the following identity element should be removed or replaced to reflect the 
          identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
          automatically.
      -->
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="WcfService1.Service1Behavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-07-09T13:32:11.443

如果要从 WCF 发送大量项目，还要确保 maxItemsInObjectGraph 是一个相对较高的数字

```
<behaviors>
   <serviceBehaviors>
      <behavior name="YourBahvior">
         <dataContractSerializer maxItemsInObjectGraph="6553600"/>
      </behavior>
   </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T13:26:21.253

有两个配置文件。silverlight clientconfig 将允许您发送更大的消息，但如果您使用 WCF，则有一个服务器 web.config 会限制接收到的消息的大小（以防止 DDOS 攻击）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T09:13:26.013

在服务器端，更改配置文件以使服务可以接受大消息。

1.  在部分添加`basicHttpBinding`配置`<system.serviceModel>`：

    ```
    <?xml version="1.0" encoding="utf-8" ?>
    <configuration>
        <system.serviceModel>
           <bindings>
             <basicHttpBinding>
                <binding name="MyBasicHttpBinding" maxReceivedMessageSize="300000000">
                   <security mode="None"/>
                   <readerQuotas maxStringContentLength="300000000"/>
                </binding>
             </basicHttpBinding>
           </bindings>
    ....... 
    ```

2.  将配置添加到服务绑定。

    ```
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="MyBasicHttpBinding" contract="WcfService1.IService1"> 
    ```

# oop - 当 Web 应用程序中的父对象不完整时，保留子对象

> ID：330035
> 
> 赞同：0
> 
> 时间：2008-12-01T04:18:04.183
> 
> 标签：oop

我正在尝试建立在父对象不完整或 Web 应用程序中尚不存在时处理子对象创建的最佳实践。我想以无状态的方式处理这个问题，所以内存中的对象已经被淘汰了。

例如，假设我们有一个错误跟踪应用程序。

一个 Bug 有一个标题和一个描述（都是必需的）和任意数量的附件。因此，“Bug”是具有“附件”子项列表的父对象。

因此，您呈现一个带有标题输入、描述输入和文件输入的页面以添加附件。然后人们添加附件，但我们还没有创建父错误。

你如何处理持久化添加的附件？

显然我们必须跟踪添加的附件，但此时我们还没有持久化父“Bug”对象来附加“附件”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T04:52:23.800

在用户提交表单后，我通常会在同一个 HTTP 响应中创建 Bug 对象及其子对象 Attachment 对象。

如果我没看错的话，用户输入由一个表单组成，其中包含前面提到的错误标题、描述和附件字段。在用户填写完这些字段（包括选择要上传的文件），然后单击提交后，您的应用程序会同时接收所有这三个数据，作为 HTTP 请求中的 POST 变量。（附件只是另一个 POST 数据，如[RFC 1867](http://www.ietf.org/rfc/rfc1867.txt)中所述。）

在您的应用程序端，根据您使用的框架类型，您可能会获得一个文件名，该文件名指向某个合适的临时目录中上传文件的位置。例如，使用 Perl 的 CGI 模块，您可以：

```
use CGI qw(:standard);
my $query = CGI->new;
print "Bug title: " . $query->param("title") . "\n";
print "Description: " . $query->param("description"). "\n";
print "Path to uploaded attachment: " . $query->param("attachment") . "\n"; 
```

获取上传文件的名称（您的用户通过表单发送的文件数据为方便您自动保存在临时文件中）及其元数据。由于您可以同时访问文本字段数据和文件附件，因此您可以按照您喜欢的任何顺序创建错误和附件对象，而无需在 HTTP 响应中保留任何不完整的数据。

还是我在这里不理解你？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T06:55:41.227

创建不完整的错误并定义处理不完整的过程。（等待 X 分钟/小时/天，然后删除它/给某人发电子邮件/按原样接受它。）即使没有标题或描述，知道发生了问题并且附件中的信息可能有用。附件可能包含完整的描述，但用户只是将其放在您未参加过的其他地方。或者它可能只包含分散的数据点，这些数据点本身没有意义——但可以证实另一个用户的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T06:26:09.120

在这种情况下，我会考虑将附件存储在某种类型的临时存储中，无论是会话状态、文件系统上的临时目录还是数据库。保存错误后，我会将附件复制到它们的实际位置。

但是要小心会话，如果您让他们上传大型附件，您可能会根据您的环境推送内存问题。

我之前看到的一种方法是，一旦用户打开新的 bug 表单，就会在您的数据库中生成一个新的 bug。根据您的应用程序，这可能是也可能不是一件好事。例如，如果您从用户那里收集数据，这很有用，因为即使他们未能输入数据并离开您的站点，您也会获得一些情报。你仍然知道他们开始了这个过程，以及你收集的任何其他东西，比如用户代理等。

# c# - C++ CLI 结构到字节数组

> ID：330043
> 
> 赞同：4
> 
> 时间：2008-12-01T04:23:34.310
> 
> 标签：c#, struct, c++-cli, marshalling

我有一个代表有线格式数据包的结构。在这个结构中是其他结构的数组。对于大多数情况，我有通用代码可以很好地处理这个问题，但是这个结构数组的情况正在将编组器抛出一个循环。

不安全的代码是不行的，因为我无法获得指向带有数组的结构的指针（啊！）。

我可以从[这篇 codeproject 文章](http://www.codeproject.com/KB/dotnet/ReadingStructures.aspx)中看到，有一种非常好的通用方法，涉及 C++/CLI，类似于...

```
public ref class Reader abstract sealed
    {
    public:
        generic <typename T> where T : value class
        static T Read(array<System::Byte>^ data)
        {
            T value;

            pin_ptr<System::Byte> src = &data[0];
            pin_ptr<T> dst = &value;

            memcpy((void*)dst, (void*)src,
                /*System::Runtime::InteropServices::Marshal::SizeOf(T::typeid)*/
                sizeof(T));

            return value;
        }
    }; 
```

现在，如果只有结构-> 字节数组/写入器版本，我将被设置！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T07:19:00.713

这可能不是正确的方法。允许 CLR 添加填充、重新排序项目并更改其在内存中的存储方式。

如果要执行此操作，请务必添加`[System.Runtime.InteropServices.StructLayout]`属性以强制结构的特定内存布局。一般来说，我建议你不要弄乱 .NET 类型的内存布局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T05:16:31.227

如果您不控制结构的字节打包，则使用 memcpy 将字节数组复制到结构是非常危险的。一次编组和解组一个字段的结构更安全。当然，您将失去您给出的示例代码的通用特性。

不过，要回答你真正的问题（并考虑这个伪代码）：

```
public ref class Writer abstract sealed
    {
    public:
        generic <typename T> where T : value class
        static System::Byte[] Write(T value)
        {
            System::Byte buffer[] = new System::Byte[sizeof(T)]; // this syntax is probably wrong.
            pin_ptr<System::Byte> dst = &buffer[0];
            pin_ptr<T> src = &value;

            memcpy((void*)dst, (void*)src,
                /*System::Runtime::InteropServices::Marshal::SizeOf(T::typeid)*/
                sizeof(T));

            return buffer;
        }
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-14T19:06:27.613

Unsafe code can be made to do this, actually. See my post on reading structs from disk: [Reading arrays from files in C# without extra copy.](http://randy.teamkern.net/2009/02/reading-arrays-from-files-in-c-without-extra-copy.html "Reading arrays from files in C# without extra copy")

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T13:57:44.007

我错过了什么吗？为什么不创建一个相同大小的新数组并在循环中分别初始化每个元素呢？

除非您仅针对一个平台，否则使用字节数据数组非常危险……例如，您的方法不考虑源数组和目标数组之间的不同字节序。

我对您的问题也不太了解的是，为什么在您的班级中有一个数组作为成员会导致问题。如果该类来自 .NET 语言，您应该没有问题，否则，您应该能够在不安全代码中获取指针并通过逐一检查指向的元素（使用不安全代码）并添加来初始化新数组他们对它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T21:14:10.277

不改变结构当然是合理的建议。我使用大量的 StructLayout 属性来指定打包、布局和字符编码。一切都很好。

我的问题只是我需要一个高性能且最好是通用的解决方案。性能，因为这是一个服务器应用程序和优雅的通用。如果您查看 codeproject 链接，您会发现 StructureToPtr 和 PtrToStructure 方法的执行速度比简单的不安全指针转换慢 20 倍。这是不安全代码充满胜利的领域之一。C# 只会让您拥有指向原语的指针（而且它不是泛型的 - 无法获得指向泛型的指针），这就是 CLI 的原因。

感谢您的psuedocode悲伤，我会看看它是否能完成工作并报告。

# c# - SharePoint 日历列表：限制输入具有相同起始日期和结束日期的第二个项目

> ID：330051
> 
> 赞同：0
> 
> 时间：2008-12-01T04:33:23.510
> 
> 标签：c#, sharepoint, sharepoint-2007

我想限制新项目进入共享点日历​​列表，对于同一创建的用户具有相同的开始日期和结束日期。让我知道这可以做到，使用 C# 访问共享点对象模型。

环境 WSS3.0，MOSS 2007，C#

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-01T04:56:32.200

您将需要使用列表事件接收器并绑定到 ItemAdding 事件 - [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx)

这里有一个很好的教程：http: [//msdn.microsoft.com/en-us/library/bb736146.aspx](http://msdn.microsoft.com/en-us/library/bb736146.aspx)

还有一个很好的附加事件接收器的小工具 - [http://lirliron.blogspot.com/2007/08/moss-list-event-receiver-register_08.html](http://lirliron.blogspot.com/2007/08/moss-list-event-receiver-register_08.html)

您可以检查 To 和 From 并查看列表中是否已经有一个项目，以及是否适当地设置了 SPItemEventProperties.Cancel。

# sql-server - LINQ 更新的“更新检查”有多少开销

> ID：330053
> 
> 赞同：13
> 
> 时间：2008-12-01T04:34:14.557
> 
> 标签：sql-server, linq, updatecheck

我有一个使用 LINQ 编辑的简单行。它有大约 30 列，包括一个主键数字序列。

当通过 LINQ 执行 UPDATE 时，UPDATE 语句包括表的所有列（用于并发检查）。

我想知道这是多么低效-如果不是negligibiel。由于主键上有一个索引，我假设该列用于初始行搜索，然后另外检查其他字段。我不会想到这将花费的时间可以忽略不计。

我问的原因是我已经看到这个 UPDATE 在某些情况下需要一秒钟，这似乎不正确。可能还有其他长期运营的事情正在进行，但这让我很好奇我是否应该担心。

我知道我可以将所有其他字段的“UpdateCheck”设置为从不，但这很痛苦。

有没有办法为单个 SubmitChanges() 关闭“更新检查”，或者我必须通过更改每个字段的“更新检查”来做到这一点。

任何意见，将不胜感激。

这是 SQL 更新：

```
exec sp_executesql N'UPDATE [dbo].[SiteVisit]
SET [TotalTimeOnSite] = @p12, [ContentActivatedTime] = @p13
WHERE ([SiteVisitId] = @p0) AND ([SiteUserId] IS NULL) AND ([ClientGUID] = @p1) AND ([ServerGUID] IS NULL) AND ([UserGUID] = @p2) AND ([SiteId] = @p3) AND ([EntryURL] = @p4) AND ([CampaignId] = @p5) AND ([Date] = @p6) AND ([Cookie] IS NULL) AND ([UserAgent] = @p7) AND ([Platform] IS NULL) AND ([Referer] = @p8) AND ([KnownRefererId] = @p9) AND ([FlashVersion] IS NULL) AND ([SiteURL] IS NULL) AND ([Email] IS NULL) AND ([FlexSWZVersion] IS NULL) AND ([HostAddress] IS NULL) AND ([HostName] IS NULL) AND ([InitialStageSize] IS NULL) AND ([OrderId] IS NULL) AND ([ScreenResolution] IS NULL) AND ([TotalTimeOnSite] IS NULL) AND ([CumulativeVisitCount] = @p10) AND ([ContentActivatedTime] IS NULL) AND ([ContentCompleteTime] IS NULL) AND ([MasterVersion] = @p11) AND ([VisitedHome] IS NULL) AND ([VisitedStore] IS NULL) AND ([VisitedVideoDemos] IS NULL) AND ([VisitedProducts] IS NULL) AND ([VisitedAdvantages] IS NULL) AND ([VisitedGallery] IS NULL) AND ([VisitedTestimonials] IS NULL) AND ([VisitedEvolution] IS NULL) AND ([VisitedFAQ] IS NULL)',N'@p0 int,@p1 uniqueidentifier,@p2 uniqueidentifier,@p3 int,@p4 varchar(46),@p5 varchar(3),@p6 datetime,@p7 varchar(164),@p8 varchar(36),@p9 int,@p10 int,@p11 int,@p12 int,@p13 int',@p0=1009772,@p1='039A0614-31EE-4DD9-9E1A-8A0F947E1719',@p2='C83C0E68-142A-47CB-B7F9-BAF462E79429',@p3=1,@p4='http://www.example.com/default.aspx?c=183',@p5='183',@p6='2008-11-30 18:22:59:047',@p7='Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; SIMBAR={85B62341-3F6B-4645-A473-53A2D2BB66DC}; FunWebProducts; .NET CLR 1.1.4322; InfoPath.1; .NET CLR 2.0.50727)',@p8='http://apps.facebook.com/inthemafia/',@p9=1,@p10=1,@p11=30,@p12=6,@p13=6 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-01T04:56:38.300

我们很早就在 Stack Overflow 上遇到了这个问题。每个 LINQ to SQL 更新都会在编写更新之前验证基础字段是否未更改。换句话说，每次更新都是“*只有当*这个字段等于，这个字段等于，这个字段等于”时才更新记录。

我们决定大多数时候我们不关心悲观更新，更新需要检查的唯一字段是 Id 字段。

因此，我们所做的是**`UpdateCheck="never"`**为 dbml 映射文件中除 Id 之外的每个字段设置，如下所示：

```
<Type Name="Badge">
  <Column Name="Id" Type="System.Int32" DbType="Int NOT NULL IDENTITY"
      IsPrimaryKey="true" IsDbGenerated="true" CanBeNull="false" />
  <Column Name="Class" Type="System.Byte" DbType="TinyInt NOT NULL"
      CanBeNull="false" UpdateCheck="Never" />
  <Column Name="Name" Type="System.String" DbType="VarChar(50) NOT NULL" 
      CanBeNull="false" UpdateCheck="Never" /> 
```

我不知道是否有办法以编程方式或即时执行此操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-02T02:42:22.893

您断言更新检查的开销可以忽略不计是正确的。如果 where 子句的任何部分都满足索引（或主键），则将使用该索引（或主键）。检查其他列的成本可以忽略不计。您可以通过在 SQL 管理工作室（或旧版本 SQL Server 的查询分析器）中启用执行计划显示来确认这一点并运行更新。

较长的执行时间很可能是由其他原因引起的。锁定是一个不错的选择。如果可以重现它，请使用 SQL Profiler 找出发生了什么。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-01T05:29:16.457

就个人而言，我喜欢单个时间戳/行版本列的简单性；将此设置为唯一要检查的列（IIRC，自动发生`timestamp`），并且您已排序 - 然后您应该得到 TSQL，如下所示：

```
exec sp_executesql N'UPDATE [dbo].[SiteVisit]
SET [TotalTimeOnSite] = @p2, [ContentActivatedTime] = @p3
WHERE ([SiteVisitId] = @p0) AND ([Timestamp] = @p1) 
```

这依赖于它们不是对同一记录的并发（非冲突）更新；使用时间戳/行版本等，*任何*冲突的更新都将导致第二个中止，即使它们更新了不同的列等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-02T02:15:27.657

时间戳字段似乎是最优雅的方式。我讨厌必须弄乱单个字段的属性——主要是这样我就可以安全地删除表并将其重新添加到我的 DBML 文件中，而不必担心后果。

[http://msdn.microsoft.com/en-us/library/bb470449.aspx](http://msdn.microsoft.com/en-us/library/bb470449.aspx)

现在为 UPDATE 生成的 SQL 是：

```
exec sp_executesql N'UPDATE [dbo].[SiteVisit]
SET [TotalTimeOnSite] = @p2
WHERE ([SiteVisitId] = @p0) AND ([timestamp] = @p1) 
```

在同一笔交易中：

```
SELECT [t1].[timestamp]
FROM [dbo].[SiteVisit] AS [t1]
WHERE ((@@ROWCOUNT) > 0) AND ([t1].[SiteVisitId] = @p3)',N'@p0 int,@p1 timestamp,@p2 int,@p3 int',@p0=814109,@p1=0x0000000000269CB8,@p2=1199920,@p3=814109 
```

它执行更新，然后检索新的时间戳发送回我的客户。我不确定我是否完全理解 @@ROWCOUNT > 0 的含义，但现在我真的不在乎 :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-13T16:20:47.940

如果您可以修改架构，请添加类型为 rowversion 的列。最新的 LINQ to SQL 将所有列的更新检查设置为从不。如果您有时间戳，它将使用它作为乐观锁检查，并且每次有更新时系统都会碰撞它。

注意：这曾经是 SQL '92 定义的 Timestamp 数据类型，但在没有任何时间信息的情况下实现了它，因此它与任何其他标准系统都不兼容。也许这是故意的，谁知道呢。

# database - 在数据库中聚类纬度/经度

> ID：330056
> 
> 赞同：14
> 
> 时间：2008-12-01T04:36:25.720
> 
> 标签：database, latitude-longitude, cluster-analysis, geography

我正在尝试查看是否有人知道如何使用数据库对一些经纬度结果进行聚类，以减少通过线路发送到应用程序的结果数量。

有许多关于如何集群的资源，无论是在客户端还是在服务器（应用程序）端......但不是在数据库端:(

[这是一个类似的问题](https://stackoverflow.com/questions/73927/clustering-algorithm-for-mapping-application)，由 SO 成员提出。解决方案是基于服务器端的（即背后的 C# 代码）。

有没有人有解决这个问题的运气或经验，但在数据库中？是否有任何数据库专家正在接受一个轴和性感的数据库挑战？

请帮忙 ：）

编辑1：澄清 - 通过聚类，我希望将`x`多个点分组为一个区域的单个点。因此，如果我说将所有内容聚集在 1 英里/1 公里的正方形中，那么该“正方形”中的所有结果都将 GROUP'D 组合成一个结果（例如...正方形的中间）。

编辑 2：我正在使用 MS Sql 2008，但我愿意听取其他数据库中是否有其他解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-01T05:23:11.477

我可能会为您的点使用笛卡尔（例如 WGS-84 ECF）坐标的[*k*均值聚类的修改*版本。](http://en.wikipedia.org/wiki/K-means)它易于实施和快速收敛，并且无论它看起来如何都能适应您的数据。此外，您可以选择*k*以满足您的带宽要求，并且每个集群将具有相同数量的关联点 (mod k)。

我会制作一个集群质心表，并在原始数据表中添加一个字段以指示它也属于哪个集群。如果您的数据是动态的，您显然希望定期更新集群。我不知道您是否可以使用存储过程和触发器来做到这一点，但也许。

*“修改”是调整计算出的质心向量的长度，使它们位于地球表面。否则你最终会得到一堆负高度的点（当转换回 LLH 时）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T04:48:13.577

如果您在地理位置上进行集群，我无法想象它是其他任何东西 :-)，您可以将“集群 ID”与纬度/经度坐标一起存储在数据库中。

我的意思是将世界地图划分为（例如）一个 100x100 矩阵（10,000 个集群），每个坐标都分配给这些集群之一。

然后，您可以通过选择同一方格中的坐标来检测非常接近的坐标，并通过选择相邻方格中的坐标来检测适度接近的坐标。

您的正方形的大小（以及它们的数量）将取决于您需要聚类的准确程度。显然，如果您只有一个 2x2 矩阵，您可能会得到一些相距很远的坐标聚类。

您将始终拥有边缘情况，例如两个点靠得很近但在不同的集群中（一个集群的最北端，另一个集群的最南端），但您可以调整集群大小**或**在客户端对结果进行后处理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-01T04:52:19.060

我为一个地理应用程序做了类似的事情，我想确保我可以轻松地缓存点集。我的地理哈希代码如下所示：

```
def compute_chunk(latitude, longitude)
  (floor_lon(longitude) * 0x1000) | floor_lat(latitude)
end

def floor_lon(longitude)
  ((longitude + 180) * 10).to_i
end

def floor_lat(latitude)
  ((latitude + 90) * 10).to_i
end 
```

从那里一切都变得非常容易。我有一些代码用于抓取从给定点到给定半径的所有块，这些块将转换为单个 memcache multiget（以及一些代码在丢失时回填）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T05:38:49.743

对于[movielandmarks.com](http://www.movielandmarks.com)，我使用了[Mike Purvis的集群代码，他是《](http://forum.sydphp.org/?a=topic&t=1074) [Beginning Google Maps Applications with PHP and AJAX](https://rads.stackoverflow.com/amzn/click/com/1590597079)》的作者之一。它使用 PHP 和 MySQL 为不同的缩放级别构建集群/点树，​​并将其存储在数据库中，以便快速调用。即使您使用不同的数据库，其中一些可能对您有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-15T11:43:22.863

为什么不测试多种方法？

1.  [使用IKVM.NET](http://www.ikvm.net/)翻译 .NET CLI 中的[weka](http://www.cs.waikato.ac.nz/ml/weka/)库
2.  将您的代码和 weka.dll（使用 ilmerge）生成的程序集添加到您的数据库中

做一些测试，就是这样。没有特定的聚类比其他任何人都更有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T06:47:06.237

我相信你可以使用[MSSQL 的空间数据类型](http://www.microsoft.com/sqlserver/2008/en/us/spatial-data.aspx)。如果它们与我知道的其他空间数据类型相似，它们会将您的点存储在矩形树中，然后您可以转到较低分辨率的矩形以获取隐式集群。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-06T22:39:14.047

如果您最终想要探索 Geohash（它是在您发布此问题的同时发明的），这里是您可能感兴趣的 SQL Server TSQL 的 Geohash 相关函数的更充实的实现。

*   [QalGeohash-TSQL](https://github.com/qalocate/qalgeohash-tsql)

我已经广泛使用整数版本的 Geohash 来对结果进行聚类，以减少发送到客户端的有限视口的数据。

# asp.net - 社区服务器新版本你推荐吗？您可以将新模块集成到其中吗？

> ID：330059
> 
> 赞同：1
> 
> 时间：2008-12-01T04:40:07.117
> 
> 标签：asp.net, community-server, telligent

我计划在我们的一个项目中使用社区服务器，我过去使用过它，但我们在定制它和理解事情如何工作时遇到了很多问题，我害怕再次进入这个问题，我想添加一些东西对它，但我不知道它有多灵活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-10T21:13:23.517

基于我们从 1.0 版（甚至之前作为 ASP.Net 论坛）就一直在使用 CS 的事实，我可以告诉你这一点 - CS 2007 和 2008 引入了一个很棒的开箱即用的社区解决方案以及一个非常广泛的平台，您可以在其上开发和扩展。

如果您的目标是 Microsoft 技术，那么这里就是您的最佳选择。

重要 - 不要急于使用他们的 SDK 并开始更改移动部件，专注于学习他们的主题引擎 (Chameleon) 并使用它的各种控件，让您比您想象的更远。仅当您需要更好地了解事物的内部工作并且已达到扩展 CS 的程度时才使用 SDK。

重要 #2 - 扩展时，请记住 Telligent 每年发布两个主要版本，通常包括您项目所需的功能，请记住查看您的更改并在产品核心之外进行开发，以便更轻松地升级到未来版本。

祝你好运！

# iphone - 使用 NSURLRequest 将数据 POST 到服务器的问题

> ID：330060
> 
> 赞同：32
> 
> 时间：2008-12-01T04:41:12.467
> 
> 标签：iphone, cocoa-touch, http

我创建一个`NSURLRequest`将我在 iPhone 应用程序中的数据发布到服务器以继续执行 PHP 脚本。我的 PHP 脚本是这样的。

```
<?php
    $name = $_POST['name'];
    $email = $_POST['email'];

    $link = mysql_connect("localhost", "fffasfdas","Nfdsafafs") or die ("Unable to connect to database.");
    mysql_select_db("muradsbi_mydatabase") or die ("Unable to select database.");

    $sqlstatement= "INSERT INTO dbname (name,email) VALUES ('$name','$email')";
    $newquery = mysql_query($sqlstatement, $link);
    echo 'thanks for your register';
?> 
```

我`NSURLRequst`的创建如下。

```
NSString *myRequestString = @"&name=Hello%20World&email=Ohai2u";
NSData *myRequestData = [NSData dataWithBytes: [myRequestString UTF8String] length: [myRequestString length]];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: @"http://www.google.com/"]];
[request setHTTPMethod: @"POST"];
[request setHTTPBody: myRequestData];
NSData *returnData = [NSURLConnection sendSynchronousRequest: request returningResponse: nil error: nil]; 
```

但是，该站点无法从此应用程序获取数据并将其保存到数据库中，但我知道它已成功连接，因为我的应用程序能够从服务器获取响应数据。我不知道我的变量名是否以错误的方式声明或其他问题。我该如何解决？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-12-01T04:47:49.457

您应该删除前导`&`，`myRequestString`问题很可能`content-type`是未发送正确的标头。尝试添加呼叫

```
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"]; 
```

你也不应该`nil`因为错误而通过，这样你就可以看到客户的想法。

不相关，但您的 PHP 代码容易受到[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-02T18:00:55.000

应当指出的是 ...

```
NSData *data = [NSData dataWithBytes: [myRequestString UTF8String]
                              length: [myRequestString length]]; 
```

...非常糟糕，可能会导致模糊的错误。使用 UTF8，零保证编码字符串中的字节数与字符串中的字符数相同。

因此，您应该简单地使用：

```
NSData *data = [myRequestString dataUsingEncoding: NSUTF8StringEncoding]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-08-26T13:48:58.540

尝试这个

```
NSString *name = [[NSString alloc]initWith String: @"Hello World"];     
NSString *email = [[NSString alloc]initWith String: @"Ohai2u"];     
NSString *urlString = [NSString stringWithFormat:@"http://somedomain.com/sendMail.php?name=%@&email=%@", 
                           [name stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding],
                           [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSURL *url = [[NSURL alloc] initWithString:urlString];

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

    NSData *urlData;
    NSURLResponse *response;
    urlData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil];
    [url release]; 
```

只是不要忘记**释放**字符串

在 PHP 脚本中设置标题

# iphone - 解析 .plist 文件时出现问题

> ID：330074
> 
> 赞同：1
> 
> 时间：2008-12-01T04:56:41.857
> 
> 标签：iphone, plist

我有一个 plist 文件，我想解析它并将它的内容复制到 NSArray 中，我正在使用的代码就是。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);

NSString *documentsPath = [paths objectAtIndex:0];

NSString *fooPath = [documentsPath stringByAppendingPathComponent:@"myfirstplist.plist"];
NSLog(fooPath);
self.myArray = [[NSArray arrayWithContentsOfFile:fooPath] retain];
NSLog(@"%@",myArray); 
```

现在问题很奇怪，有时当我打印 myArray 内容时它会打印文件数据，有时它不会。

即使我使用 URL 作为路径，我也面临同样的问题。

```
self.myArray = [[NSArray arrayWithContentsOfURL:URlPath] retain]; 
```

原因是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T11:53:24.090

根据您最初生成 .plist 的方式，如果您尝试将其作为数组读回，您可能会遇到问题。读取 plist 最安全的方法是使用 NSPropertyListSerialization 类：[Apple Doc。](https://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/NSPropertyListSerialization_Class.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-27T01:00:55.897

获取路径使用

```
NSString *plistPath = [bundle pathForResource:  @"file-name" ofType:@"plist"]; 
```

然后使用它

```
NSArray *phrase2 = [NSArray arrayWithContentsOfFile: plistPath]; 
NSLog (@"%@", phrase2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-27T01:09:47.563

```
NSBundle *bundle = [NSBundle mainBundle]; 

NSString *plistPath = [bundle pathForResource:  @"file-name" ofType:@"plist"]; 

NSArray *phrase2 = [NSArray arrayWithContentsOfFile: plistPath];

NSLog (@"%@", phrase2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T23:21:45.450

这是一个非常愚蠢的错误，
我将“myarray”属性声明为“保留和非原子”，并且在解析操作期间我再次保留它，

```
self.myArray = [[NSArray arrayWithContentsOfURL:URlPath] retain]; 
```

意味着我保留了它但从未发布它。这就是为什么存在那个奇怪的问题。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T05:09:07.370

[您是否使用writeToFile:atomically](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSArray/writeToFile:atomically:) :生成文件？你检查这是否返回true？

# midi - Alesis QS MIDI Sysex 数据转换

> ID：330085
> 
> 赞同：2
> 
> 时间：2008-12-01T05:11:25.963
> 
> 标签：midi, sysex

我的目标是将来自 Alesis 合成器的字节码流转换为人类可读的格式。我需要能够获取“程序转储”并读取组成补丁名称的 10 个字符串。

为了从合成器接收“程序转储”，我通过 MIDI-OX 向合成器发送了以下命令：

```
F0 00 00 0E 0E 01 73 F7 
```

我要求它向我发送程序 73 的转储。

我收到了这个：

```
F0 00 00 0E 0E 00 73 00 60 24 0B 27 27 01 64 1E 19 19 05 23 19 1E 2A 41 0D 23 46 19 1E 06 00 47 0D 23 30 6C 18 63 30 6C 18 40 3F 0A 67 1B 16 20 40 00 60 18 00 18 06 05 0C 2B 41 13 70 05 30 40 31 63 70 05 00 40 31 63 70 05 00 40 31 63 00 4C 2A 51 00 46 7F 78 18 40 0F 40 31 40 31 04 30 0C 00 30 6C 03 30 3C 0F 00 00 05 0A 0F 14 19 1E 23 28 2D 72 00 76 34 3C 54 42 19 46 0C 33 3C 0C 00 0E 1B 46 60 58 31 46 61 58 31 00 7F 14 4E 37 6C 74 13 00 40 31 00 30 0C 0A 18 56 02 27 60 0B 60 00 63 46 61 0B 00 00 63 46 61 0B 00 00 63 46 01 18 55 22 01 0C 7F 71 31 00 1F 00 63 00 63 08 60 18 00 60 58 07 60 18 1E 00 00 0A 14 1E 28 32 3C 46 50 5A 64 01 0C 2D 15 29 05 36 0C 19 66 78 18 00 1C 36 0C 41 31 63 0C 43 31 63 00 7E 29 1C 6F 58 00 01 02 00 63 00 60 18 14 30 2C 05 4E 40 17 40 01 46 0D 43 17 00 00 46 0D 43 17 00 00 46 0D 03 30 2A 45 02 18 7E 63 63 00 3E 00 46 01 46 11 40 31 00 40 31 0F 40 71 3D 00 00 14 28 3C 50 64 78 0C 21 35 49 03 58 4C 71 31 1C 6C 18 32 4C 71 31 00 38 6C 18 02 63 46 19 06 63 46 01 7C 53 00 60 18 53 37 6C 70 0D 03 40 31 28 60 58 0A 1C 01 2F 00 03 0C 1B 06 2F 00 00 0C 1B 06 2F 00 00 0C 1B 06 60 54 0A 05 30 7C 47 47 01 7C 00 0C 03 0C 23 00 63 00 00 63 1E 3C 63 18 00 00 28 50 78 20 49 71 19 42 6A 12 07 F7 
```

MIDI-OX 告诉我它收到了 408 个字节。

这符合规范：

“单个程序转储发送了 400 个数据字节，对应于 350 个字节的程序数据。加上标头，与程序转储一起传输的总字节数为 408。显示了每个参数在程序转储中的位置在下一节中。”

“程序转储”应由以下值组成：

```
F0 00 00 0E 0E 00 <program#> <data> F7 
```

这意味着数据应以“00 60”开头并以“07 F7”结尾。

现在我应该能够将这 400 字节转换为该程序的“350 字节的打包参数数据”。遵循“程序数据格式”，程序名称的 10 位数字应位于打包数据中的某处。补丁 73 被称为“BlowDeTune”或“PanBristle”，不完全确定它是从 0 开始还是从 1 开始。

那么你如何进行转换呢？规范的第1页给出了传输格式，但我不明白如何解压。

任何人都可以帮忙吗？

Alesis QS MIDI Sysex 规范在这里：

[http://www.midiworld.com/quadrasynth/qs_swlib/qs678r.pdf](http://www.midiworld.com/quadrasynth/qs_swlib/qs678r.pdf)

MIDI-OX 可以在这里找到：

[http://www.midiox.com/](http://www.midiox.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T16:23:19.087

你很幸运，因为几年前我玩了一点 Midi（用我的 Atari ST 520）所以我对这个话题有足够的兴趣来调查一下......

作为记录，我根据您为合成器提供的参考找到了[MIDI System Exclusive Message格式。](http://crystal.apana.org.au/ghansper/midi_introduction/midi_system_exclusive.html "MIDI 系统专有信息")
我最初以为在[这个页面](http://crystal.apana.org.au/ghansper/midi_introduction/file_dump.html "MIDI 文件转储信息")中描述了打包算法，但是在实现了它的解码和创建垃圾之后，我发现我错了......我会给出这个代码以防万一它在其他地方对你有用......

第一次尝试很有用，因为当我重新阅读 PDF 文件中的规范时，我了解到 A7 到 G0 符号实际上是位...

数据被“打包”，因为 Midi 非控制字必须是 7 位干净的（高位始终未设置）。
他们获取 7 个字节的原始数据，将其视为 56 位的大字，然后将该字每 7 位拆分一次，使高位始终为 0：

原始数据（使用不同的符号）：

```
0 - b07 b06 b05 b04 b03 b02 b01 b00
1 - b17 b16 b15 b14 b13 b12 b11 b10
2 - b27 b26 b25 b24 b23 b22 b21 b20
3 - b37 b36 b35 b34 b33 b32 b31 b30
4 - b47 b46 b45 b44 b43 b42 b41 b40
5 - b57 b56 b55 b54 b53 b52 b51 b50
6 - b67 b66 b65 b64 b63 b62 b61 b60 
```

传输/编码数据：

```
0 -  0  b06 b05 b04 b03 b02 b01 b00
1 -  0  b15 b14 b13 b12 b11 b10 b07
2 -  0  b24 b23 b22 b21 b20 b17 b16
3 -  0  b33 b32 b31 b30 b27 b26 b25
4 -  0  b42 b41 b40 b37 b36 b35 b34
5 -  0  b51 b50 b47 b46 b45 b44 b43
6 -  0  b60 b57 b56 b55 b54 b53 b52
7 -  0  b67 b66 b65 b64 b63 b62 b61 
```

所以我们有：

```
0 - 00000000 0x00
1 - 01100000 0x60
2 - 00100100 0x24
3 - 00001011 0x0B
4 - 00100111 0x27
5 - 00100111 0x27
6 - 00000001 0x01
7 - 01100100 0x64

0 - 00011110 0x1E
1 - 00011001 0x19
2 - 00011001 0x19
3 - 00000101 0x05
4 - 00100011 0x23
5 - 00011001 0x19
6 - 00011110 0x1E
7 - 00101010 0x2A 
```

一旦解码，我们应该有：

```
0 - 00000000 0x00
1 - 00110000 0x30
2 - 01101001 0x69
3 - 01110001 0x71
4 - 00111010 0x3A
5 - 00000101 0x05
6 - 11001000 0xC8

0 - 10011110 0x9E
1 - 01001100 0x4C
2 - 10100110 0xA6
3 - 00110000 0x30
4 - 11001010 0xCA
5 - 01111000 0x78
6 - 01010100 0x54 
```

我相信我正确解码了数据，但仍然有垃圾（即不可读的字符串）......
也许你会在我的代码中看到一个逻辑错误，这可能是一个起点。

我看到 MIDI-OX 可以使用 WSH 编写脚本，所以我编写了一个使用 WSH 运行的 JS 脚本，并在控制台上输出：

```
var midiData =
[
  0xF0, 0x00, 0x00, 0x0E, 0x0E, 0x00, 0x73,
  0x00, 0x60, 0x24, 0x0B, 0x27, 0x27, 0x01, 0x64, 0x1E, 0x19, 0x19, 0x05, 0x23, 0x19, 0x1E, 0x2A,
  0x41, 0x0D, 0x23, 0x46, 0x19, 0x1E, 0x06, 0x00, 0x47, 0x0D, 0x23, 0x30, 0x6C, 0x18, 0x63, 0x30,
  0x6C, 0x18, 0x40, 0x3F, 0x0A, 0x67, 0x1B, 0x16, 0x20, 0x40, 0x00, 0x60, 0x18, 0x00, 0x18, 0x06,
  0x05, 0x0C, 0x2B, 0x41, 0x13, 0x70, 0x05, 0x30, 0x40, 0x31, 0x63, 0x70, 0x05, 0x00, 0x40, 0x31,
  0x63, 0x70, 0x05, 0x00, 0x40, 0x31, 0x63, 0x00, 0x4C, 0x2A, 0x51, 0x00, 0x46, 0x7F, 0x78, 0x18,
  0x40, 0x0F, 0x40, 0x31, 0x40, 0x31, 0x04, 0x30, 0x0C, 0x00, 0x30, 0x6C, 0x03, 0x30, 0x3C, 0x0F,
  0x00, 0x00, 0x05, 0x0A, 0x0F, 0x14, 0x19, 0x1E, 0x23, 0x28, 0x2D, 0x72, 0x00, 0x76, 0x34, 0x3C,
  0x54, 0x42, 0x19, 0x46, 0x0C, 0x33, 0x3C, 0x0C, 0x00, 0x0E, 0x1B, 0x46, 0x60, 0x58, 0x31, 0x46,
  0x61, 0x58, 0x31, 0x00, 0x7F, 0x14, 0x4E, 0x37, 0x6C, 0x74, 0x13, 0x00, 0x40, 0x31, 0x00, 0x30,
  0x0C, 0x0A, 0x18, 0x56, 0x02, 0x27, 0x60, 0x0B, 0x60, 0x00, 0x63, 0x46, 0x61, 0x0B, 0x00, 0x00,
  0x63, 0x46, 0x61, 0x0B, 0x00, 0x00, 0x63, 0x46, 0x01, 0x18, 0x55, 0x22, 0x01, 0x0C, 0x7F, 0x71,
  0x31, 0x00, 0x1F, 0x00, 0x63, 0x00, 0x63, 0x08, 0x60, 0x18, 0x00, 0x60, 0x58, 0x07, 0x60, 0x18,
  0x1E, 0x00, 0x00, 0x0A, 0x14, 0x1E, 0x28, 0x32, 0x3C, 0x46, 0x50, 0x5A, 0x64, 0x01, 0x0C, 0x2D,
  0x15, 0x29, 0x05, 0x36, 0x0C, 0x19, 0x66, 0x78, 0x18, 0x00, 0x1C, 0x36, 0x0C, 0x41, 0x31, 0x63,
  0x0C, 0x43, 0x31, 0x63, 0x00, 0x7E, 0x29, 0x1C, 0x6F, 0x58, 0x00, 0x01, 0x02, 0x00, 0x63, 0x00,
  0x60, 0x18, 0x14, 0x30, 0x2C, 0x05, 0x4E, 0x40, 0x17, 0x40, 0x01, 0x46, 0x0D, 0x43, 0x17, 0x00,
  0x00, 0x46, 0x0D, 0x43, 0x17, 0x00, 0x00, 0x46, 0x0D, 0x03, 0x30, 0x2A, 0x45, 0x02, 0x18, 0x7E,
  0x63, 0x63, 0x00, 0x3E, 0x00, 0x46, 0x01, 0x46, 0x11, 0x40, 0x31, 0x00, 0x40, 0x31, 0x0F, 0x40,
  0x71, 0x3D, 0x00, 0x00, 0x14, 0x28, 0x3C, 0x50, 0x64, 0x78, 0x0C, 0x21, 0x35, 0x49, 0x03, 0x58,
  0x4C, 0x71, 0x31, 0x1C, 0x6C, 0x18, 0x32, 0x4C, 0x71, 0x31, 0x00, 0x38, 0x6C, 0x18, 0x02, 0x63,
  0x46, 0x19, 0x06, 0x63, 0x46, 0x01, 0x7C, 0x53, 0x00, 0x60, 0x18, 0x53, 0x37, 0x6C, 0x70, 0x0D,
  0x03, 0x40, 0x31, 0x28, 0x60, 0x58, 0x0A, 0x1C, 0x01, 0x2F, 0x00, 0x03, 0x0C, 0x1B, 0x06, 0x2F,
  0x00, 0x00, 0x0C, 0x1B, 0x06, 0x2F, 0x00, 0x00, 0x0C, 0x1B, 0x06, 0x60, 0x54, 0x0A, 0x05, 0x30,
  0x7C, 0x47, 0x47, 0x01, 0x7C, 0x00, 0x0C, 0x03, 0x0C, 0x23, 0x00, 0x63, 0x00, 0x00, 0x63, 0x1E,
  0x3C, 0x63, 0x18, 0x00, 0x00, 0x28, 0x50, 0x78, 0x20, 0x49, 0x71, 0x19, 0x42, 0x6A, 0x12, 0x07,
  0xF7
];

// Show original data
DumpData(midiData, 16);

var headerLength = 7; // Bytes to skip
var resultData = new Array();
var decodedByteCount = 0;  // Number of expanded bytes in result

var cumulator = 0;
var bitCount = 0;
for (var i = headerLength; // Skip header
    i < midiData.length - 1; // Omit EOF
    i++)
{
  var rank = (i - headerLength) % 8; // We split the data in runs of 8 bytes
  // We cumulate the bits of these runs (less the high bit) to make a big word of 56 bits
/*
  cumulator |= midiData[i] << (7 * rank);
  if (rank == 7)  // End of the run
  {
    // Split the cumulator in 7 bytes
    for (var j = 0; j < 7; j++)
    {
      var shift = 8 * j;
      var byte = (cumulator & (0xFF << shift)) >> shift;
      WScript.StdOut.Write(ByteToHex(byte) + ' ');
      resultData[decodedByteCount++] = byte;
    }
    cumulator = 0;  // Reset the buffer
  }
*/
  // Actually, we cannot do that, because JS' bit arithmetic seems to be limited to signed 32 bits!
  // So I get the bytes out as soon as they are complete.
  // Somehow, it is more elegant anyway (but reflects less the original algorithm).
  cumulator |= midiData[i] << bitCount;
  bitCount += 7;
//~   WScript.StdOut.Write((i - 7) + ':' + ByteToHex(midiData[i]) + ' (' + bitCount + ') ' + DecimalToHex(cumulator) + '\n');
  if (bitCount >= 8)
  {
    var byte = cumulator & 0xFF;
    bitCount -= 8;
    cumulator >>= 8;
    resultData[decodedByteCount++] = byte;
//~     WScript.StdOut.Write((i - 7) + ':' + ByteToHex(midiData[i]) + ' (' + bitCount + ') ' + DecimalToHex(cumulator) + ' > '  + ByteToHex(byte) + '\n');
  }
}
DumpData(resultData, 14); 
```

实用程序：

```
function DumpData(data, lineLength)
{
  WScript.StdOut.Write("Found " + data.length + " bytes\n");
  var txt = '';
  for (var i = 0; i < data.length; i++)
  {
    var rd = data[i];
    if (rd > 31)
    {
      txt += String.fromCharCode(rd);
    }
    else
    {
      txt += '.';
    }
    WScript.StdOut.Write(ByteToHex(rd) + ' ');
    if ((i+1) % lineLength == 0)
    {
      WScript.StdOut.Write(' ' + txt + '\n');
      txt = '';
    }
  }
  WScript.StdOut.Write(' ' + txt + '\n');
}

function NibbleToHex(halfByte)
{
  return String.fromCharCode(halfByte < 10 ?
      halfByte + 48 : // 0 to 9
      halfByte + 55); // A to F
}

function ByteToHex(dec)
{
  var h = (dec & 0xF0) >> 4;
  var l = dec & 0x0F;
  return NibbleToHex(h) + NibbleToHex(l);
}

function DecimalToHex(dec)
{
  var result = '';
  do
  {
    result = ByteToHex(dec & 0xFF) + result;
    dec >>= 8;
  } while (dec > 0);
  return result;
} 
```

输出：

```
Found 350 bytes
00 30 69 71 3A 05 C8 9E 4C A6 30 CA 78 54  .0iq:.ÈL¦0ÊxT
C1 C6 C8 98 F1 18 00 C7 C6 08 C6 C6 8C 61  ÁÆÈñ..ÇÆ.ÆÆa
6C 0C F0 A7 38 6F 2C 20 20 00 8C 01 60 0C  l.ð§8o,  ..`.
05 C6 2A 38 81 17 60 C0 D8 18 5E 00 00 63  .Æ*8.`ÀØ.^..c
63 78 01 00 8C 8D 01 4C 55 14 60 FC E3 31  cx...LU.`üã1
C0 07 30 06 8C 11 60 0C 00 8C 3D 80 F1 1E  À.0..`..=ñ.
00 40 41 F1 A0 64 3C 23 54 4B 0E B0 D3 78  .@Añ d<#TK.°Óx
54 61 C6 C8 98 F1 18 00 C7 C6 08 C6 C6 8C  TaÆÈñ..ÇÆ.ÆÆ
61 6C 0C F0 A7 38 6F 6C FA 04 00 8C 01 60  al.ð§8olú...`
0C 05 C6 2A 38 81 17 60 C0 D8 18 5E 00 00  ..Æ*8.`ÀØ.^..
63 63 78 01 00 8C 8D 01 4C 55 14 60 FC E3  ccx...LU.`üã
31 C0 07 30 06 8C 11 60 0C 00 8C 3D 80 31  1À.0..`..=1
1E 00 40 41 F1 A0 64 3C 23 54 4B 0E 30 5A  ..@Añ d<#TK.0Z
95 54 C1 C6 C8 98 F1 18 00 C7 C6 08 C6 C6  TÁÆÈñ..ÇÆ.ÆÆ
8C 61 6C 0C F0 A7 38 6F 2C 20 20 00 8C 01  al.ð§8o,  ..
60 0C 05 C6 2A 38 81 17 60 C0 D8 18 5E 00  `..Æ*8.`ÀØ.^.
00 63 63 78 01 00 8C 8D 01 4C 55 14 60 FC  .ccx...LU.`ü
E3 31 C0 07 30 06 8C 11 60 0C 00 8C 3D 80  ã1À.0..`..=
F1 1E 00 40 41 F1 A0 64 3C 23 54 4B 0E B0  ñ..@Añ d<#TK.°
CC 78 8C C3 C6 C8 98 F1 18 00 C7 C6 08 C6  ÌxÃÆÈñ..ÇÆ.Æ
C6 8C 61 6C 0C F0 A7 00 30 66 7A 63 C3 1B  Æal.ð§.0fzcÃ.
03 60 0C 05 C6 2A 38 81 17 60 C0 D8 18 5E  .`..Æ*8.`ÀØ.^
00 00 63 63 78 01 00 8C 8D 01 4C 55 14 60  ..ccx...LU.`
FC E3 31 C0 07 30 06 8C 11 60 0C 00 8C 3D  üã1À.0..`..=
BC 31 06 00 40 41 F1 A0 64 3C 23 54 4B 0E  ¼1..@Añ d<#TK. 
```

以防万一，另一种解包算法：

```
// Here the 8 bits of 7 bytes of raw data are coded as 7 bytes of data stripped off of the high bit,
// while the stripped bits are grouped in the first byte of the data run.
// In other words, when we have a run of 8 bytes, the first one groups the high bits of the 7 next bytes.
// Information found at http://crystal.apana.org.au/ghansper/midi_introduction/file_dump.html

var headerLength = 7;
var resultData = new Array();
var decodedByteCount = 0;  // Number of expanded bytes in result
var runCount = -1; // Number of runs in the encoded data
for (var i = headerLength; // Skip header
    i < midiData.length - 1; // Omit EOF
    i++)
{
  var rank = (i - headerLength) % 8; // We split the data in runs of 8 bytes
  if (rank == 0)  // Start of the run
  {
    // Get the high bits
    var highBits = midiData[i];
    runCount++;
//~     WScript.StdOut.Write(runCount + ' > ' + (i - 7) + ' >> ' + ByteToHex(highBits) + '\n');
  }
  else
  {
    resultData[decodedByteCount++] = midiData[i] |
        ((highBits & (1 << (7 - rank))) << rank);
//~     WScript.StdOut.Write((i - 7) + ' >> ' +  ByteToHex(midiData[i]) + ' > ' +
//~         ByteToHex(midiData[i] | ((highBits & (1 << (7 - rank))) << rank)) + '\n');
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T14:32:55.737

感谢您的出色工作，我想出了这个作为包算法。似乎 Alesis 使用与 Moog Voyager 相同的架构。

```
packSysex : function(midiData) {
    var header = [0xF0, 0x04, 0x01, 0x00, 0x03, 0x00]; //Voyager Single Preset Dump.

    var resultData = new Array();
    var packedByteCount = 0;
    var bitCount = 0;

    var thisByte;
    var packedByte;
    var nextByte = 0x0;

    for (var i = 0; i <= midiData.length; i++)
    {
        thisByte = midiData[i];
        packedByte = ((thisByte << bitCount) | nextByte) & 0x7F;
        nextByte = midiData[i] >> (7-bitCount);

        resultData[packedByteCount++] = packedByte;

        bitCount++;
        if(bitCount >= 7) {
            bitCount = 0;

            //Fill last byte
            packedByte = nextByte & 0x7F;
            resultData[packedByteCount++] = packedByte;
            nextByte = 0x0;
        }
    }

    resultData[packedByteCount++] = 0xF7;
    resultData = header.concat(resultData);

    return resultData;
}, 
```

# shell - 开始使用 Shell 脚本？

> ID：330092
> 
> 赞同：0
> 
> 时间：2008-12-01T05:19:14.793
> 
> 标签：shell, scripting, tcsh

我不熟悉 shell 脚本，所以我不确定如何去做或者是否可能。如果你能给我链接或建议，那就太好了。

我想做的是：

*   创建一个文件，简单的文本文件 EX：

    参数 1（随机值）

    其中 randomvalue 是生成的随机数。

*   使用我们刚刚创建的文件运行程序并输出到文件

    ./program filewejustcreated > A

该程序已经创建，它需要一个文件名作为参数，无需担心这些东西。

*   使用我们刚刚创建的文件运行另一个程序，该程序已经存在并将其放入文件中

./我们刚刚创建的另一个程序文件 > B

*   在 A, B 上运行 diff 命令

    差异AB

显示 diff 返回的内容...

谢谢

[编辑] 我正在使用外壳：tcsh

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T05:34:54.917

你几乎已经写好了剧本。唯一缺少的是随机数；我会用 Perl 来做。这是 sh （或 bash；我假设您使用的是 Linux/Unix 系统）中的一个快速而肮脏的解决方案：

```
#!/bin/sh
perl -e 'print "TheWord (", int(rand(1000)), ")\n"' > tempfile
./program tempfile > A
./Anotherprogram tempfile > B
# rm tempfile  # this would delete 'tempfile' if uncommented
diff A B 
```

现在将其保存在一个文件中（例如 script.sh）并在 shell 中执行：

```
chmod +x script.sh 
```

使其可执行，并且

```
./script.sh 
```

运行它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T05:37:42.197

我不确定在 tcsh 中生成随机数的功能。但是，在 BASH 等更常见的 shell 中，对变量 的引用会`$RANDOM`生成随机数。

因此，在您的 shell 脚本（`BASH`此处为 shell 脚本）中，内容将是：

```
#Pick the first argument to the call as the file name
FILE_NAME=shift
echo "param1 $RANDOM" > $FILE_NAME
./program $FILE_NAME > $FILE1
./Anotherprogram $FILE_NAME > $FILE2
diff $FILE1 $FILE2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T05:47:46.060

Shell 脚本主要只是以完成工作的方式将不同的程序组合在一起。有很多程序只做一件简单的事情，并且可以组合起来完成更大的任务，当您进入 shell 脚本世界时，您将了解这些任务。大型 shell 脚本的一个示例是[perl 的配置脚本](http://public.activestate.com/cgi-bin/perlbrowse/f/Configure)。首先，您会看到（以及一些幽默的评论）使用了 cat、true、sh、rm、test、sed、uname 和 grep。

# visio - 学习在 Visio 中绘制 UML 类图的最有用的资源是哪些？

> ID：330098
> 
> 赞同：1
> 
> 时间：2008-12-01T05:23:09.683
> 
> 标签：visio

我坚持正确对齐类之间的泛化箭头。我无法让它们出现在 UML 书籍中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T08:07:27.247

Visio UML 模具不是很好，使用它们非常令人沮丧。看看[http://softwarestencils.com/uml/index.html](http://softwarestencils.com/uml/index.html)，有一些非常不错的免费模板更新用于 Visio UML 2.0。适应它们需要很少的时间。在我使用它们之后，我再也没有回头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T07:41:11.683

[UML 模型图 - Visio - Microsoft Office Online](http://office.microsoft.com/en-us/visio/CH010266691033.aspx)

一注。如果您希望 UML 图表看起来像经典书籍示例，您应该使用 Rational Rose 而不是 Visio。

# c# - 从 C#/.NET 中的非托管执行应用程序中检索产品信息

> ID：330115
> 
> 赞同：0
> 
> 时间：2008-12-01T05:44:01.793
> 
> 标签：c#, .net, com, unmanaged

在 C# 中，可以使用反射检索程序集相关信息，如产品名称、版本等：

```
string productName = Assembly.GetCallingAssembly().GetName().Name;
string versionString = Assembly.GetCallingAssembly().GetName().Version.ToString(); 
```

如果正在执行的程序集是用非托管 C++ 编写的（比如说），我该怎么做？甚至可能吗？假设我有一个 .NET dll，它通过 COM 接口在非托管代码中被调用。

**编辑：**
为了让事情变得非常清楚，这是我的场景：

*   我有一个用非托管 C++ 编写的可执行文件
*   我有一个用 C#/.NET 编写的 dll
*   可执行文件通过 COM 接口调用 dll
*   在 .NET dll 中，我希望能够检索调用可执行文件的产品名称和版本等信息。

可能的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T18:38:10.123

无需遍历堆栈即可找出您所在的进程。您只需进行一次 Win32 API 调用：

```
HMODULE hEXE = GetModuleHandle(NULL); 
```

根据[此调用的文档](http://msdn.microsoft.com/en-us/library/ms683199(VS.85).aspx)：

> 如果此参数为 NULL，GetModuleHandle 返回用于创建调用进程的文件（.exe 文件）的句柄。

您可以使用另一个标准 Win32 API [GetModuleFileName()](http://msdn.microsoft.com/en-us/library/ms683197(VS.85).aspx)将此模块句柄转换为文件名。手头有文件名，然后您可以调用[GetFileVersionInfo()](http://msdn.microsoft.com/en-us/library/ms647003(VS.85).aspx)来检索该文件的 VS_VERSIONINFO 结构。你想要的信息就在里面。

现在，由于您在 .NET 中，您可以对[GetModuleHandle()](http://www.pinvoke.net/default.aspx/kernel32/GetModuleHandle.html?diff=y)和[GetModuleFileName()](http://www.pinvoke.net/default.aspx/kernel32/GetModuleFileName.html)使用 P/Invoke 签名。对于 GetFileVersionInfo() 您可以使用[System.Diagnostics.FileVersionInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo_members.aspx)。

但实际上最简单的方法可能是坚持使用 System.Diagnostics 命名空间，您需要的一切都在那里。调用[System.Diagnostics.Process.GetCurrentProcess()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.getcurrentprocess.aspx)以返回您正在运行的进程的 Process 对象。然后您可以从[MainModule](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainmodule.aspx)属性中检索 ProcessModule。ProcessModule 有一个名为[FileVersionInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processmodule.fileversioninfo.aspx)的属性。你想要的信息就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T09:01:53.720

您可以在 VB.Net 中使用以下代码来检索扩展文档属性：

```
Sub Main()
    Dim arrHeaders(41)

    Dim shell As New Shell32.Shell
    Dim objFolder As Shell32.Folder

    objFolder = shell.NameSpace("C:\tmp\")

    For i = 0 To 40
        arrHeaders(i) = objFolder.GetDetailsOf(objFolder.Items, i)
    Next
    For Each strFileName In objfolder.Items
        For i = 0 To 40
            Console.WriteLine(i & vbTab & arrHeaders(i) & ": " & objFolder.GetDetailsOf(strFileName, i))
        Next
    Next

End Sub 
```

将对 Microsoft Shell 控件和自动化的 COM 引用添加到要编译的项目中。

上述程序的输出将是分配给 C:\tmp 中所有文件的元数据列表，例如

```
0       Name: dpvoice.dll
1       Size: 208 KB
2       Type: Application Extension
3       Date Modified: 14.04.2008 04:41
4       Date Created: 14.04.2008 04:41
5       Date Accessed: 01.12.2008 09:56
6       Attributes: A
7       Status: Online
8       Owner: Administrators
9       Author:
10      Title:
11      Subject:
12      Category:
13      Pages:
14      Comments:
15      Copyright:
16      Artist:
17      Album Title:
18      Year:
19      Track Number:
20      Genre:
21      Duration:
22      Bit Rate:
23      Protected:
24      Camera Model:
25      Date Picture Taken:
26      Dimensions:
27      :
28      :
29      Episode Name:
30      Program Description:
31      :
32      Audio sample size:
33      Audio sample rate:
34      Channels:
35      Company: Microsoft Corporation
36      Description: Microsoft DirectPlay Voice
37      File Version: 5.3.2600.5512
38      Product Name: Microsoftr Windowsr Operating System
39      Product Version: 5.03.2600.5512
40      Keywords: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T09:20:42.340

假设您正在寻找@divo 调用返回的EXE/DLL 的PE 标头数据，例如公司、产品等……顺便说一句。源自调用 Win32 版本信息 API - MSDN 上的详细信息：

> [http://msdn.microsoft.com/en-us/library/ms646981.aspx](http://msdn.microsoft.com/en-us/library/ms646981.aspx)

您面临的下一个挑战是枚举调用堆栈以发现调用者的模块上下文。我没有尝试过 - 但如果你检查自己的调用堆栈，我怀疑你会看到非托管调用者的帧编组到那里。怀疑它在切换到 CCW 之前在注入的过渡帧处停止。此外，由于它是 COM，因此可以想象调用者可以从进程外调用 - 您的调用者将是一个代理进程。

如果失败 - 您需要调试 API 来展开外部堆栈 - 这会引入其他约束：

*   遍历堆栈所需的提升的安全权限
*   展开堆栈的潜在性能影响。

在逐个调用的基础上，其中任何一个都可能使调试器方法不切实际。

**更新**

一些研究表明，即使在调试器中读取 CCW 过渡帧上方的堆栈时也存在大量错误和陷阱。例如

> [http://support.microsoft.com/kb/317221](http://support.microsoft.com/kb/317221)

混合非托管/托管符号解析非常难看 - 这里有一些关于如何做到这一点的想法...... DaveBr 关于调试的博客也非常棒。

> [http://bytes.com/groups/net-vc/280340-stackwalk-callstack-symbol-resolve-managed-unmanaged-code-dbghelp-etc](http://bytes.com/groups/net-vc/280340-stackwalk-callstack-symbol-resolve-managed-unmanaged-code-dbghelp-etc)
> 
> [http://blogs.msdn.com/davbr/archive/2005/10/06/478006.aspx](https://web.archive.org/web/20190114032244/https://blogs.msdn.microsoft.com/davbr/2005/10/06/profiler-stack-walking-basics-and-beyond/)

在非托管/托管客户端之间编组呼叫所采取的步骤有很多素材 - 例如

> [http://msdn.microsoft.com/en-us/library/ms973872.aspx](http://msdn.microsoft.com/en-us/library/ms973872.aspx)

# oracle - 从 Oracle 连接 SQL SERVER 2005

> ID：330117
> 
> 赞同：0
> 
> 时间：2008-12-01T05:46:15.923
> 
> 标签：oracle

我在同一台服务器上运行 Oracle 和 SQL SERVER 2oo5。Plstform 赢得 2003 企业版。我已经创建了一个系统文件 DSN。在 listener.ora 和 tnsnames.ora 中创建条目。

但是当我试图 ping 我的 dsn 系统时没有响应。当我尝试使用我的 dsn 创建数据库链接时，它会出错。

该怎么办 ？提前感谢您的帮助。

苏尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T06:18:06.653

你必须：

- 创建 UDL 文件

- 配置异构服务 ($ORACLE_HOME\hs\admin) 并创建一个类似`initDATAB.ora`以下内容的文件：

```
HS_FDS_CONNECT_INFO="UDLFILE=C:\\ccc\\SQLSERVER.udl 
```

`listener.ora`-像这样添加条目`SID_LIST_LISTENER`：

```
 (SID_DESC=
      (SID_NAME=DATAB)
      (ORACLE_HOME = C:\oraclexe\app\oracle\product\10.2.0\server)
      (PROGRAM=hsolesql)
   ) 
```

-创建一个条目`tnsnames.ora`：

```
SQLSERVERDB =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = riereta)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME=DATAB)
    )
    (HS=OK) 
  ) 
```

-创建指向的数据库链接`SQLSERVERDB`

**参考资料**：

- [Oracle® 数据库异构连接管理员指南](http://download.oracle.com/docs/cd/B19306_01/server.102/b14232/toc.htm)

- [Oracle® 数据库网络服务参考](http://download.oracle.com/docs/cd/B19306_01/network.102/b14213/toc.htm)

-[在 Oracle® 数据库 SQL 参考上创建数据库链接](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5005.htm#i2061505)

# c# - 箭头键的键码

> ID：330125
> 
> 赞同：6
> 
> 时间：2008-12-01T05:55:17.903
> 
> 标签：c#, winforms, keypress

谁能帮我获取 c# .net keypress 事件中箭头键的键码？你能帮我离开这个检查点吗？

最好的问候，阿伦。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-01T06:04:26.260

你是说 KeyUp 事件吗？KeyPress 不会为 Arrows 触发，并且事件 args 没有 KeyCode 属性，但对于 keyUp 事件中的 Arrow Keys，它们是：

Keys.Up、Keys.Down、Keys.Left、Keys.right

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-01T06:04:30.177

[http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)

Keys.Up、Keys.Left、Keys.Right、Keys.Down。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T10:32:54.907

您可以在此处查找键码：http: [//msdn.microsoft.com/en-in/library/aa243025 (v=vs.60).aspx](http://msdn.microsoft.com/en-in/library/aa243025(v=vs.60).aspx)

它指出：

```
vbKeyLeft 37 左箭头键
vbKeyUp 38 向上箭头键
vbKeyRight 39 右箭头键
vbKeyDown 40 向下箭头键

```

你可以用它来比较像这样

```
e.KeyValue==39 
```

# c# - 为什么我不能在另一个类中调用公共方法？

> ID：330138
> 
> 赞同：11
> 
> 时间：2008-12-01T06:12:10.350
> 
> 标签：c#, methods, call

我已经让这两个类进行交互，并且我试图从第一类中调用四个不同的类以在第二类中使用。

这些方法是公共的，它们确实返回值，但由于某种原因没有建立连接。我尝试时得到的错误是：`"An object reference is required for the nonstatic field, method, or property 'GradeBook.[method I want called]'"`

* * *

我已经初始化了一切。我不想将方法创建为静态的。我再次阅读了我的任务的细节，我什至不应该这样做，但无论如何我似乎无法让它发挥作用。

myGradeBook.[方法] GraceBook.[方法]

这一切似乎都会产生错误。

当前错误：

```
The best overloaded method match or 'System.Console.WriteLine(string, object)' has some invalid arguments.

Arugment '2': cannot convert from 'method group' to 'object' 
```

我什至不知道这些是什么意思......

编辑：由于 Visual Studio 的 Step Into 功能，我刚刚解决了这个问题。我不知道为什么我花了这么长时间才使用它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-12-01T06:16:31.183

您正在尝试调用该类的实例方法。要调用类的实例方法，您必须创建一个实例来调用该方法。如果要在非实例上调用该方法，请添加 static 关键字。例如

```
class Example {
  public static string NonInstanceMethod() {
    return "static";
  }
  public string InstanceMethod() { 
    return "non-static";
  }
}

static void SomeMethod() {
  Console.WriteLine(Example.NonInstanceMethod());
  Console.WriteLine(Example.InstanceMethod());  // Does not compile
  Example v1 = new Example();
  Console.WriteLine(v1.InstanceMethod());
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-01T06:16:51.900

听起来你没有实例化你的类。这是我收到“需要对象引用”错误的主要原因。

```
MyClass myClass = new MyClass(); 
```

添加该行后，您就可以调用您的方法

```
myClass.myMethod(); 
```

另外，您的所有类都在同一个命名空间中吗？当我第一次学习 c# 时，这对我来说是一个常见的绊脚石。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-01T06:16:03.383

您必须创建一个类类型的变量，并首先将其设置为等于对象的新实例。

```
GradeBook myGradeBook = new GradeBook(); 
```

然后在您刚刚创建的对象上调用该方法。

```
myGradeBook.[method you want called] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T08:22:01.477

例如 1 和 2 你需要创建静态方法：

```
public static string InstanceMethod() {return "Hello World";} 
```

然后例如 3，您需要一个对象实例来调用该方法：

```
object o = new object();
string s = o.InstanceMethod(); 
```

# asp.net - SQL Server 数据库文件和 WCF

> ID：330146
> 
> 赞同：1
> 
> 时间：2008-12-01T06:19:18.383
> 
> 标签：asp.net, sql-server, wcf

我有一个公开方法 GetCustomers() 的 WCF 服务。该方法的内部使用数据层和业务层来返回客户列表。目前我正在使用保存在服务器上的 SQL Server 数据库文件。在我的本地网络上一切正常，但我想把它移到网络上。

我认为最好的方法是创建一个 IIS WCF 服务，它调用当前 WCF 服务的 GetCustomers()。我对 SQL Server 数据库文件没有太多经验，但我认为我需要将 .mdf 文件移动到 IIS WCF Service App_Data 文件夹，但我不确定如何更改数据库连接字符串并让所有这些工作适当地。我唯一能想到的是，我必须在 IIS WCF 服务中重新实现 GetCustomers() 方法并将其指向正确的数据库。看来我不应该这样做。

我知道，如果我在完整的 SQL Server 实现中托管数据库，这不会成为问题，因为连接字符串不会改变。在这一点上，这不是一个选择。

我想我让这变得比它应该的更困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T13:08:31.240

我有一些坏消息 - 您不能直接访问 SQL Server 数据文件。您必须运行 SQL Server。

您正在采用 Access 方法，该方法无需任何类型的 Access Server 即可工作 - 您只需将数据源指向文件即可。SQL Server 文件不能以这种方式工作。

如果您的数据库很小，请考虑查看[Microsoft SQL Server Express](http://www.microsoft.com/express/sql/default.aspx)，它具有 SQL Server 的大部分功能，而无需昂贵的许可。

# c# - 是否有任何用于 C# 的基于 Web、独立（免安装）或无管理员安装程序编译器

> ID：330149
> 
> 赞同：0
> 
> 时间：2008-12-01T06:22:32.700
> 
> 标签：c#, .net, compiler-construction

我希望每天花一点午休时间来教自己一些 C#。我可以通过雇主支付的 Books24x7 订阅访问一些关于该主题的书籍，但我无法在工作时运行代码。

我的工作 PC 相当锁定（没有管理员权限，只读“程序文件” - 尽管可以安装到基于桌面的文件夹，并且禁止使用 USB 拇指驱动器..），所以我正在寻找另一种编译方式一些代码。

任何人都可以指出： * 基于 Web 的编译器（从已知良好的站点下载二进制文件，或者可能是基于 Web 的 CLI 以与非 GUI 应用程序交互） * 无需安装的独立编译器 * 不需要安装的编译器需要管理员权限才能安装。

谢谢！

* * *

**[编辑 1]**
我想我首先提到基于 Web 的编译器的另一个原因是我不确定 .Net 框架的哪个版本可能安装在我的工作机器上。我们绝对没有在我的项目上进行任何 .Net 工作，因此没有理由相信除了 XP 附带的功能之外还有其他任何东西。如果有办法在没有管理员权限的情况下安装最新版本，我很想听听！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T06:27:44.933

如果您的计算机上安装了 .Net Framework，那么您应该已经有了编译器。

它将在`C:\Windows\Microsoft.NET\Framework\[VERSION]\`

它被称为`csc.exe`。

这应该在没有任何管理员权限的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-09T12:36:29.973

## 有[ideone.com](http://ideone.com/)。

它可以编译并在服务器端运行几种通常需要在客户端 PC 上安装该语言的语言。对我来说，我可以编写和运行任何 C# 应用程序，而无需安装 Visual Studio 或最新的 .NET Framework。

# user-interface - 你应该在 UI 类中加入多少逻辑？

> ID：330151
> 
> 赞同：5
> 
> 时间：2008-12-01T06:23:54.957
> 
> 标签：user-interface, refactoring

我不确定这是否已经被问过，但是你应该在你的 UI 类中加入多少逻辑？

当我开始编程时，我曾经将所有代码放在表单上的事件后面，众所周知，这使得测试和维护非常痛苦。加班我来释放这种做法有多糟糕，并开始将所有内容分解为类。

有时在重构的时候我还是有那种“我应该把这些东西放在哪里”的感觉，但是因为大部分时间我正在处理的代码是在 UI 层，没有单元测试并且会在难以想象的地方中断，所以我通常最终将其留在 UI 层。

关于在 UI 类中放置多少逻辑有什么好的规则吗？我应该寻找什么模式，这样我以后就不会做这种事情了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-01T08:34:45.240

只是处理 UI 的逻辑。

有时人们甚至试图将其放入业务层。例如，一个人可能在他们的 BL 中有：

```
if (totalAmount < 0)
     color = "RED";
else
     color = "BLACK"; 
```

并且在 UI 中使用颜色显示 totalAmount ——这是完全错误的。它应该是：

```
if (totalAmount < 0)
     isNegative = true;
else
     isNegative = false; 
```

当 isNegative 为 true 时，应该如何显示 totalAmount 完全取决于 UI 层。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T11:00:01.377

**尽可能少...** UI 应该只具有与演示相关的逻辑。我现在的个人偏好是拥有 UI/View

*   只需向 PresenterClass 提出事件（带有支持数据），说明发生了什么事。让 Presenter 响应事件。
*   具有渲染/显示要呈现的数据的方法
*   最少量的客户端验证，以帮助用户在第一时间正确地完成它......（最好以声明方式完成）在无效输入到达演示者之前筛选掉它，例如确保文本字段值在 ab 范围内设置 min 和 max 属性。

[http://martinfowler.com/eaaDev/uiArchs.html](http://martinfowler.com/eaaDev/uiArchs.html)描述了 UI 设计的演变。摘录

> 当人们谈论自测代码时，用户界面很快就会提出问题。许多人发现测试 GUI 的过程介于艰难和不可能之间。这在很大程度上是因为 UI 与整个 UI 环境紧密耦合，并且难以分解和分段测试。但是在某些情况下这是不可能的，您会错过重要的交互，存在线程问题，并且测试运行速度太慢。
> 
> 因此，设计 UI 的方式一直在稳步发展，以尽量减少难以测试的对象的行为。Michael Feathers 在 The Humble Dialog Box 中清晰地总结了这种方法。Gerard Meszaros 将这个概念推广到 Humble Object 的概念——任何难以测试的对象都应该有最小的行为。这样，如果我们无法将其包含在我们的测试套件中，我们将最大程度地减少未检测到的故障的机会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T06:34:23.737

您正在寻找的模式可能是[Model-view-controller](http://en.wikipedia.org/wiki/Model-view-controller)，它基本上将 DB（模型）与 GUI（视图）和逻辑（控制器）分开。这是[杰夫阿特伍德](http://www.codinghorror.com/blog/archives/001112.html)对此的看法。我相信人们不应该对任何框架、语言或模式感到狂热——虽然繁重的数值计算可能不应该放在 GUI 中，但在那里进行一些基本的输入验证和输出格式化是可以的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T06:32:04.457

我建议 UI 不应该包含任何类型的业务逻辑。甚至没有验证。它们都应该处于业务逻辑级别。通过这种方式，您可以使您的 BLL 独立于 UI。您可以轻松地将 Windows 应用程序转换为 Web 应用程序或 Web 服务，反之亦然。您可以使用像[Csla](http://www.lhotka.net/cslanet/)这样的对象框架来实现这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T06:29:07.287

附加到控件的输入验证。像带有文本框的电子邮件、年龄、日期验证器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T08:42:23.040

詹姆斯是正确的。根据经验，您的业务逻辑不应该对表示做出任何假设。

如果您打算在各种媒体上展示您的结果怎么办？其中一个可能是黑白打印机。“RED”不会削减它。

当我创建模型甚至控制器时，我试图说服自己用户界面将是一个泡泡浴。相信我，这大大减少了我代码中的 HTML 数量；）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-01T08:55:15.980

始终在您正在工作的任何层中放置尽可能少的逻辑。

我的意思是，如果您要向 UI 层添加代码，请添加该层执行其 UI（仅）操作所需的最少逻辑量。

这样做不仅可以很好地分离层......它还可以使您免于代码膨胀。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-01T10:01:38.217

我已经在[这里](https://stackoverflow.com/questions/47400/best-way-to-test-a-ms-access-application#70572)写了这个问题的“兼容”答案。规则是（根据我），除了 UI 逻辑和调用将管理通用/特定情况的标准过程之外，UI 中不应有任何逻辑。

在我们的情况下，我们到达了一个点，表单的代码是从表单上可用的控件列表中自动生成的。根据控件的类型`bound text, bound boolean, bound number, bound combobox, unbound label, ...`（`beforeUpdate``afterUpdate``onClick`

然后，此代码可以执行通用操作（测试是否**可以在事件中更新字段值**，在`beforeUpdate`事件中**对记录集进行**升序/降序排序`onClick`等）或基于表单和/或控件名称的特定处理（例如一些工作在一个`afterUpdate`事件中，例如从**unitPrice**和**quantity值中计算一个****totalAmount**控件的值）。

 ****我们的系统现在是完全自动化的，表单的生成依赖于两个表：`Tbl_Form`应用程序中可用的表单列表，以及表单中可用`Tbl_Control`的控件列表

在 SO 中引用的答案和其他帖子之后，一些用户要求我根据自己的想法进行开发。由于题目比较复杂，最后决定开个[博客](http://thebis.blogspot.com/)来聊聊这个UI逻辑。我已经开始谈论 UI 界面，但可能需要几天（.. 几周！）才能具体涉及您感兴趣的主题。

# .net - 如何使用 FtpWebRequest (.NET) 更改目录？

> ID：330155
> 
> 赞同：8
> 
> 时间：2008-12-01T06:27:09.773
> 
> 标签：.net, ftp, ftpwebrequest

有人可以告诉我如何使用 FtpWebRequest 更改目录吗？这似乎应该是一件容易的事，但我没有看到它。

**编辑**

我只是想补充一下……我对 FtpWebRequest 没有信心。如果有更好（更简单）的方式在 .NET 中执行 FTP，请告诉我。

* * *

显然没有办法使用实时连接来做到这一点，您需要更改 uri 以欺骗 ftpwebrequest 使用不同的请求（感谢 Jon）。

所以我正在寻找一个第三方客户......

我尝试的一些开源解决方案效果不太好（一直崩溃），但我发现了一个开源解决方案，它通过了我的一些初步测试（[.NET FTP Client](http://sourceforge.net/projects/dotnetftpclient/)）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-01T06:48:58.277

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-27T10:46:55.683

You have to close the current connection:

```
request.Close(); 
```

And open a new one with an other uri:

```
uri = "ftp://example.com/%2F/directory" //Go to a forward directory (cd directory)
uri = "ftp://example.com/%2E%2E" //Go to the previously directory (cd ../)

FtpWebRequest request = (FtpWebRequest)WebRequest.Create(uri); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-23T10:44:53.833

Instead of using ListDirectory method of FTPWebRequest you can use ListDirectoryDetails method of FtpWebRequest .

From That you can use regular expression to get value you want. Thats it,It work fine for me in my case

# printf - 在 D 中打印浮点数

> ID：330169
> 
> 赞同：2
> 
> 时间：2008-12-01T06:38:36.957
> 
> 标签：printf, d

[自从我上次使用D 编程语言](http://digitalmars.com/d)以来已经有一段时间了，现在我将它用于一些涉及科学计算的项目。

我有一堆浮点数据，但是当我使用 打印它们时`writefln`，我得到的结果如下：`4.62593E-172`这是一个零！如何使用字符串格式 % 的东西来打印诸如 0 之类的东西？

现在我正在使用黑客：

```
 if( abs(a) < 0.0000001 )
        writefln(0);
    else
        writefln(a); 
```

它完成了这项工作，但如果可能的话，我想使用格式化操作来完成它。

**更新**

有人建议`writefln("%.3f", a)`但它的问题是它打印了不必要的额外零，即`0`变为`0.000`并`1.2`变为`1.200`
我可以让它也删除尾随零吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T09:13:05.710

简短的回答：这不能用 printf 格式说明符来完成。

由于 D 使用与 C99 相同的格式`vsprintf()`，您可以在此线程中找到答案：[避免 printf() 中的尾随零](https://stackoverflow.com/questions/277772)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T06:56:43.940

尝试类似的东西

```
writefln("%.3f", a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T07:04:08.950

Federico 的回答应该有效，有关更多信息，请查看[格式说明符](http://www.digitalmars.com/d/2.0/phobos/std_format.html#format-string)部分。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-01T11:37:30.550

我看到您目前正在使用 Phobos，但是 Tango 支持您尝试做的事情。

```
Stdout.formatln("{:f2}", 1.2); 
```

将打印“1.20”

# open-source - 在商业产品中使用 gSOAP 需要什么许可证？

> ID：330174
> 
> 赞同：17
> 
> 时间：2008-12-01T06:46:36.753
> 
> 标签：open-source, licensing, gsoap

我想在将要进行商业分发的产品中使用 gSOAP。我想到的用途是我怀疑是一个非常典型的工作流程——使用 wsdl2h 生成标头，使用 soapcpp2 使用标头，然后在我的代码中调用存根中生成的函数。

我不能 100% 确定我需要使用哪个[许可证](http://www.cs.fsu.edu/~engelen/soap.html)才能做到这一点。这里有没有人已经经历过这个并想出了解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-08-17T17:56:40.023

我希望以下澄清有所帮助。如有问题，请通过 contact@genivia.com 联系我们。

如果满足以下任一条件，gSOAP 软件需要商业产品开发的商业许可证：

1.  如果使用 wsdl2h 生成代码。由于生成的代码默认为 GPL，因此您应该从 Genivia 获得商业许可（[www.genivia.com/Products/gsoap/contract.html](http://www.genivia.com/Products/gsoap/contract.html)）。wsdl2h 工具本身是 GPL，我们拥有它的版权。

2.  或者您使用 gsoap/samples/webserver 中的 Web 服务器代码。该组件默认为 GPL。

3.  或者您使用 gsoap/uddi2 中的 UDDI 组件，默认情况下也是 GPL。

商业许可证是开发站点许可证。永久使用 gSOAP 开发产品（“目标应用程序”）需要支付一次性费用。没有版税。

另一个好消息是，该软件的所有其他部分都是在 gSOAP 公共许可证下发布的，允许免费商业使用。

所以答案是，只要你不使用 wsdl2h，不使用 Web 服务器代码，不使用 UDDI 代码，那么你就可以免费使用 gSOAP 公共许可证（它基于 MPL1.1 开源许可证和 gSOAP 公共许可证的副本包含在包中）。

希望这能阐明我们的许可模式。

*   罗伯特·范恩格伦，Genivia Inc.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T06:54:23.430

从网站：

> 重要提示：wsdl2h WSDL 解析器、UDDI 代码和示例应用程序（例如独立 Web 服务器）仅在 GPL 或专有许可下分发。

这意味着您的产品必须完全获得 GPL 许可（因此，如果尚未开源，您需要将您的应用程序开源），或者您必须购买商业许可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T08:51:23.803

您必须购买一个商业许可证——每个要使用 gSOAP 的项目一个。我们在这里的一些项目中一直非常成功地使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-01-25T14:45:39.517

gSoap 许可证非常不清楚，我认为其中一部分甚至是错误的。例如，在许可中反对 GPL 使用和商业使用，这是完全错误的。

此外，GPL 代码生成器不一定会生成 GPL 代码： [http ://www.gnu.org/licenses/gpl-faq.html#WhatCaseIsOutputGPL](http://www.gnu.org/licenses/gpl-faq.html#WhatCaseIsOutputGPL)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-12-31T20:46:04.707

根据我对 GPL 的理解，只要您在 GPL 下发布所有衍生产品，代码甚至可以免费用于商业用途。当然，大多数公司都不想发布他们的源代码供任何人自由复制，因此需要商业许可。我认为 Genivia 的总结在这一点上并没有那么清楚。

# java - 这是损坏的双重检查锁定吗？

> ID：330178
> 
> 赞同：5
> 
> 时间：2008-12-01T06:50:17.790
> 
> 标签：java, synchronization, locking, double-checked-locking

Checkstyle 将此代码报告为“双重检查锁定习惯用法已损坏”，但我认为我的代码实际上并未受到双重检查锁定问题的影响。

如果不存在具有该 id 的行，则该代码应该在数据库中创建一行。它在多线程环境中运行，我想避免主键存在 SQL 异常。

伪代码：

```
private void createRow(int id) {
  Row row = dao().fetch(id);
  if (row == null) {
     synchronized (TestClass.class) {
        row = dao().fetch(id);
        if (row == null) {
           dao().create(id);
        }
     }
  }
} 
```

我同意它看起来像双重检查锁定，但我没有使用静态变量，并且 fetch() 和 create() 中的代码可能太复杂而无法内联和乱序。

我错了还是检查式？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T06:56:15.393

我认为在这种情况下， checkstyle 是正确的。在您提供的代码中，考虑如果两个线程都`row == null`在同步块的入口处会发生什么。线程 A 将进入块，并插入新行。然后在线程 A 退出该块后，线程 B 将进入该块（因为它不知道刚刚发生了什么），并尝试再次插入相同的新行。

我看到您刚刚更改了代码并在其中添加了一个非常重要的缺失行。在*新*代码中，您也许可以避免这种情况，因为两个线程不会依赖对共享（静态）变量的更改。但是您最好看看您的 DBMS 是否支持诸如`INSERT OR UPDATE`.

将此功能委托给 DBMS 的另一个很好的理由是，如果您需要部署多个应用程序服务器。由于`synchronized`块不能跨机器工作，因此无论如何您都必须做其他事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T06:54:54.257

假设您希望最里面的行读取：

```
row = dao().create(id); 
```

`dao().fetch`假设与 create 方法正确互斥，这不是经典的双重检查锁问题。

**编辑**：（代码已更新）

双重检查锁的经典问题是在两个线程访问相同值的初始化发生之前分配一个值。

假设 DAO 正确同步并且不会返回部分初始化的值，这不会受到双重检查锁习惯用法的缺陷的影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-01T08:52:18.823

如果您想编写这样的代码，请考虑：

*   从 Java 1.4 开始，同步方法变得非常便宜。它不是免费的，但运行时确实不会受到太大的影响，值得冒数据损坏的风险。

*   从 Java 1.5 开始，您拥有 Atomic* 类，允许您以原子方式读取和设置字段。不幸的是，它们不能解决您的问题。为什么他们没有添加 AtomicCachedReference 或其他东西（当调用 get() 并且当前值 == null 时会调用可覆盖的方法）超出了我的理解。

*   试试[ehcache](http://ehcache.sourceforge.net/)。它允许您设置缓存（即，如果映射中*不*包含键，则允许您调用代码的对象）。这通常是您想要的，并且缓存真正解决了您的问题（以及您甚至不知道它们存在的所有其他问题）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-02T18:53:39.080

正如其他人指出的那样，此代码将按原样执行您的预期，但仅在一组严格的非显而易见的假设下：

1.  Java 代码是非集群的（参见@Greg H 的回答）
2.  *仅*在同步块之前的第一行中检查“行”引用是否为空。

双重检查锁定习惯用法被破坏的原因（根据[Java Concurrency in Practice的第](http://www.javaconcurrencyinpractice.com/)*16.2.4*节）是运行此方法的线程在进入同步块（除非“dao”提供正确的同步）。如果您的方法除了检查它是否为空之外，还对“行”做任何事情，它就会被破坏。就目前而言，它可能还可以，但*非常脆弱*- 如果我认为其他开发人员稍后可能会在不了解 DCL 的微妙之处的情况下修改该方法的可能性很小，那么我个人不会愿意提交此代码。

# c++ - 安全修改 std::pair ::首先在成对的向量中？

> ID：330186
> 
> 赞同：2
> 
> 时间：2008-12-01T06:54:59.543
> 
> 标签：c++, sorting, std-pair

我目前正在研究 DNA 数据库类，我目前将数据库中的每一行与匹配分数（基于编辑距离）和实际 DNA 序列本身相关联，在迭代循环中首先以这种方式修改是否安全？

```
typedef std::pair<int, DnaDatabaseRow> DnaPairT;
typedef std::vector<DnaPairT>          DnaDatabaseT;

// ....

for(DnaDatabaseT::iterator it = database.begin();
    it != database.end(); it++)
{
    int score = it->second.query(query);
    it->first = score;
} 
```

我这样做的原因是为了以后可以按分数对它们进行排序。我已经尝试过地图并收到有关首先修改的编译错误，但是是否有比这更好的方法来存储所有信息以供以后排序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T07:01:48.750

要回答你的第一个问题，是的。修改对的成员是完全安全的，因为对中的实际数据不会影响向量本身。

**编辑：**我感觉您在使用地图时遇到错误，因为您试图修改`first`地图内部对的值。这是不允许的，因为该值是地图内部运作的一部分。

正如[dribeas 所说](https://stackoverflow.com/users/36565/dribeas)：

> 在地图中，您不能先更改，因为它会破坏地图作为已排序平衡树的不变量

**编辑：**要回答你的第二个问题，我认为你构建数据的方式没有任何问题，但我会让数据库保存*指向*对象的指针，`DnaPairT`而不是对象本身。这将大大减少在排序过程中复制的内存量。

```
#include <vector>
#include <utility>
#include <algorithm> 

typedef std::pair<int, DnaDatabaseRow> DnaPairT;
typedef std::vector<DnaPairT *>       DnaDatabaseT;

// ...

// your scoring code, modified to use pointers
void calculateScoresForQuery(DnaDatabaseT& database, queryT& query)
{
    for(DnaDatabaseT::iterator it = database.begin(); it != database.end(); it++)
    {
        int score = (*it)->second.query(query);
        (*it)->first = score;
    }
}

// custom sorting function to handle DnaPairT pointers
bool sortByScore(DnaPairT * A, DnaPairT * B) { return (A->first < B->first); }

// function to sort the database
void sortDatabaseByScore(DnaDatabaseT& database)
{
    sort(database.begin(), database.end(), sortByScore);
}

// main
int main()
{
    DnaDatabaseT database;

    // code to load the database with DnaPairT pointers ...

    calculateScoresForQuery(database, query);
    sortDatabaseByScore(database);

    // code that uses the sorted database ...
}
```

您可能需要研究更有效的方法的唯一原因是您的数据库太大以至于排序循环需要很长时间才能完成。但是，如果是这种情况，我想您的`query`函数将是占用大部分处理时间的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T07:56:16.893

您无法修改，因为 std::pair 的变量 first 被定义为 const

# gps - GPS信号清理&路网匹配

> ID：330191
> 
> 赞同：6
> 
> 时间：2008-12-01T06:56:31.210
> 
> 标签：gps, gis

我正在使用 GPS 装置和移动计算机来跟踪个别行人的行程。我想实时“清理”传入的 GPS 信号以提高其准确性。此外，事实上，不一定是实时的，我想将个人的 GPS 定位“锁定”到道路网络沿线的位置。有任何技术、资源、算法或现有软件可以在这两个方面提出建议吗？

我已经在考虑信号清理方面的一些事情： - 删除修复哪个 num。卫星数 = 0 - 速度异常高的丢弃修复（例如，600 英里/小时）

在“锁定”街道网络（我听说称为“地图匹配”）方面： - 根据均方根误差锁定到最近的网络边缘 - 当修复远离道路网络时，突出显示这些点并允许用户使用 GUI（例如，Web 浏览器中的 OpenLayers）来拖放到道路网络上

谢谢你的想法！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-01T09:13:56.690

我假设您想“清理”您的数据以消除由不可靠的读数引起的错误峰值。这是一个基本的 dsp 进程。您可以采取多种方法来解决此问题，这取决于您希望它有多聪明。

在基本层面上是的，你可以只寻找非常大的数字，但什么是真正的大数字？是的，600 英里/小时的速度很快，但如果你在协和式飞机上，则不会。当您正在寻找一个“与众不同”的值时，您实际上是在硬编码“普通”。更好的方法是检查过去的数据以确定“普通”是什么，然后寻找偏差。您可能需要考虑在一个小的局部窗口上计算数据的方差，然后查看当前数据的 z 分数是否大于某个阈值，如果是，则将其排除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T15:45:10.957

注意：您应该使用 3 作为最小卫星，而不是 0。GPS 需要至少三个源来计算水平位置。我使用的每一个 GPS 在数据流中都包含一个状态标志；以某种方式将少于 3 颗卫星报告为“坏”数据。

您还应该考虑“固定”数据。您将如何处理静止不动一段时间的行人？也许在人行横道上等待或与街头小贩互动？

根据您计划对数据执行的操作，您可能需要抑制这些额外的数据点或将它们平均到单个点或位置。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-01T16:10:37.443

您提到这是用于行人跟踪，但您也提到了道路网络。行人可以去很多汽车不能去的地方，事实上，这些地方可能不会出现在你找到的任何“道路网络”地图上。大多数路线图没有公园中的步行道、远足小径等内容。不要假设“越野网络”意味着 GPS 没有得到准确的定位。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-01T10:17:39.883

除了 Andrew 的评论之外，您可能还需要考虑干扰因素，例如多径，以及它们如何影响传入的 GPS 数据流，例如 NMEA0183 的 GSA 线中的 HDOP。在我自己的 GPS 控制器软件中，我允许用户针对一系列 QA 相关参数指定拒绝标准。

在这方面，我也倾向于研究移动窗口原则，您可以考虑根据同一窗口中的周围数据拒绝代表峰值的数据。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-23T03:40:02.917

阅读 posfix 以查看信号是否有效（如果您解析原始 NMEA 字符串，则在 $GPGGA 语句中的某处）。如果为 0，则忽略该消息。

除此之外，如果您确实需要确保信号非常准确，则可以查看 HDOP 和卫星数量的组合，但在正常情况下，这不是必需的。

当然，对 GPS 信号进行一些健全性检查并没有什么坏处：

*   纬度在 -90..90 之间；
*   -180..180 之间的经度（或 E..W、N..S、0..90 和 0..180，如果您正在阅读原始 NMEA 字符串）；
*   速度在 0 到 255 之间（对于普通汽车）；
*   与先前测量匹配的距离（基于纬度/经度）与指示的速度大致匹配；
*   系统时间不大于 x 的时差（除非系统时钟不可信或依赖 GPS 同步:-)）；

要进行地图匹配，您基本上会遍历您的路段，并检查哪个路段最适合您当前的位置、方向、速度以及可能之前的 gps 测量和匹配。如果您不是在做实时应用程序，或者如果反馈延迟是可以接受的，您甚至可以查看“未来”以查看最有可能的部分。

做好这一切本身就是一门艺术，这里的空间太短，无法深入。通常很难以 100% 的信心确定某人居住在哪个路段。例如，如果有 2 条平行道路与当前位置同样接近，这就是创造性启发式的问题。

# static - 是否可以在 Windows 上使用 Mono 静态编译？

> ID：330194
> 
> 赞同：3
> 
> 时间：2008-12-01T06:59:50.470
> 
> 标签：static, mono, compilation

我想知道是否可以在 Windows 上使用 Mono 静态编译。如果是这样，我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-02T07:46:45.533

要静态编译您的代码，您可以使用工具“mkbundle”。

mkbundle 工具需要 cygwin 设置（它需要汇编器、链接器和编译器）来生成静态二进制文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-02T15:26:24.583

是的，有可能，

[http://www.mono-project.com/AOT#Supported_Platforms](http://www.mono-project.com/AOT#Supported_Platforms)

# php - 我想优化检查 PHP 中定义的常量

> ID：330206
> 
> 赞同：1
> 
> 时间：2008-12-01T07:16:16.443
> 
> 标签：php, constants

在 PHP 中，根据您的错误报告级别，如果您没有定义常量，然后像这样调用它：

```
<?= MESSAGE ?> 
```

它可能会打印常量的名称而不是值！

所以，我写了下面的函数来解决这个问题，但我想知道你是否知道用更快的代码来做这件事？我的意思是，当我在没有此功能的情况下进行速度测试时，我可以在 0.0073 秒内定义和转储 500 个常量。但是使用下面的这个函数，它会切换到 0.0159 到 0.0238 秒之间的任何位置。因此，将微秒降至尽可能小会很棒。为什么？因为我想用它来做模板。我认为必须有一种比使用我要显示的每个变量切换错误报告更好的方法。

```
function C($constant) {
    $nPrev1 = error_reporting(E_ALL);
    $sPrev2 = ini_set('display_errors', '0');
    $sTest = defined($constant) ? 'defined' : 'not defined';
    $oTest = (object) error_get_last();
    error_reporting($nPrev1);
    ini_set('display_errors', $sPrev2);
    if (strpos($oTest->message, 'undefined constant')>0) {
        return '';
    } else {
        return $constant;
    }
}

<?= C(MESSAGE) ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T08:19:46.207

只要您不介意在常量上使用引号，您就可以这样做：

```
function C($constant) {
    return defined($constant) ? constant($constant) : 'Undefined';
}

echo C('MESSAGE') . '<br />';

define('MESSAGE', 'test');

echo C('MESSAGE') . '<br />'; 
```

输出：

> 不明确的
> 
> 测试

否则，如果不捕捉使用未定义常量引发的通知，就无法绕过它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2008-12-01T07:21:29.133

尝试

```
if (isset(constant($constant)) ...
```

这不应触发任何 E_NOTICE 消息，因此您不必设置和重置 error_reporting。

# hash - 为什么 MD5 哈希值不可逆？

> ID：330207
> 
> 赞同：99
> 
> 时间：2008-12-01T07:16:58.987
> 
> 标签：hash, cryptography, md5, cryptographic-hash-function

我一直想知道的一个概念是加密哈希函数和值的使用。我知道这些函数可以生成一个唯一且几乎不可能反转的哈希值，但这是我一直想知道的：

如果在我的服务器上，我会在 PHP 中生成：

```
md5("stackoverflow.com") = "d0cc85b26f2ceb8714b978e07def4f6e" 
```

当您通过 MD5 函数运行相同的字符串时，您会在 PHP 安装中得到相同的结果。一个过程被用来从一些初始值产生一些价值。

这是否意味着有某种方法可以解构正在发生的事情并反转哈希值？

这些函数是什么使生成的字符串无法回溯？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2008-12-01T07:19:56.063

输入材料可以是无限长的，输出总是 128 位长。这意味着无限数量的输入字符串将生成相同的输出。

如果您选择一个随机数并将其除以 2，但只记下余数，您将得到 0 或 1——分别为偶数或奇数。是否可以取那个 0 或 1 并得到原始数字？

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2008-12-01T09:22:00.123

如果像 MD5 这样的哈希函数是可逆的，那么这将是数据压缩算法历史上的一个分水岭！很容易看出，如果 MD5 是可逆的，那么任意大小的任意数据块可以仅用 128 位表示，而不会丢失任何信息。因此，无论原始消息的大小如何，您都可以从 128 位数字重构原始消息。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2011-08-22T18:00:41.413

与此处最受赞成的答案所强调的相反，由大（可能无限）输入大小和固定输出大小之间的差异引起的密码散列函数的**非注入性**（即有几个字符串散列到相同的值）**不是重要的一点**——实际上，我们更喜欢那些冲突尽可能少发生的哈希函数。

考虑这个函数（在 PHP 表示法中，作为问题）：

```
function simple_hash($input) {
     return bin2hex(substr(str_pad($input, 16), 0, 16));
} 
```

如果字符串太短，这会附加一些空格，然后获取字符串的前 16 个字节，然后将其编码为十六进制。它具有与 MD5 哈希相同的输出大小（32 个十六进制字符，如果我们省略 bin2hex 部分，则为 16 个字节）。

```
print simple_hash("stackoverflow.com"); 
```

这将输出：

```
737461636b6f766572666c6f772e636f6d 
```

该函数还具有与 Cody 对 MD5 的回答所强调的相同的非注入性属性：我们可以传入任何大小的字符串（只要它们适合我们的计​​算机），它只会输出 32 个十六进制数字。当然不能单射。

但是在这种情况下，找到一个映射到相同哈希的字符串是微不足道的（只需应用于`hex2bin`您的哈希，就可以了）。如果您的原始字符串长度为 16（如我们的示例），您甚至会得到这个原始字符串。即使您知道输入的长度很短（除了尝试所有可能的输入直到我们找到匹配的输入，例如蛮力攻击），MD5 也不应该出现这种情况。

**加密哈希函数的重要假设是：**

*   很难找到任何产生给定哈希的字符串（原像电阻）
*   很难找到任何不同的字符串产生与给定字符串相同的哈希（第二原像电阻）
*   很难找到任何一对具有相同哈希的字符串（抗碰撞）

显然我的`simple_hash`功能不满足这些条件。（实际上，如果我们将输入空间限制为“16 字节字符串”，那么我的函数就会变成单射的，因此甚至可以证明是抗第二原像和抗碰撞的。）

现在存在针对 MD5 的冲突攻击（例如，可以产生一对字符串，即使具有给定的相同前缀，具有相同的散列，有相当多的工作，但并非不可能做很多工作），所以你不应该使用MD5 对于任何关键的东西。目前还没有原像攻击，但攻击会变得更好。

**要回答实际问题：**

> 这些函数是什么使生成的字符串无法回溯？

MD5（以及其他基于 Merkle-Damgard 结构的散列函数）有效地做的是应用加密算法，将消息作为密钥，将某个固定值作为“纯文本”，使用生成的密文作为散列。（在此之前，输入被填充并分割成块，每个块用于加密前一个块的输出，与输入进行异或以防止反向计算。）

现代加密算法（包括散列函数中使用的算法）的制作方式使得很难恢复密钥，即使在明文和密文（甚至当对手选择其中之一时）也是如此。他们通常通过执行大量位混洗操作来做到这一点，每个输出位由每个关键位（几次）以及每个输入位确定。这样，如果您知道完整的密钥以及输入或输出，您就可以轻松地追溯内部发生的事情。

对于类似 MD5 的散列函数和原像攻击（使用单块散列字符串，以使事情更容易），您只有加密函数的输入和输出，但没有密钥（这就是您要寻找的）。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2008-12-01T07:32:59.997

Cody Brocious 的回答是正确的。严格来说，您不能“反转”散列函数，因为许多字符串都映射到同一个散列。然而，请注意，要么找到*一个*映射到给定哈希的字符串，要么找到*两个*映射到同一个哈希的字符串（即*冲突*），对于密码分析者来说将是重大突破。这两个问题的巨大困难是好的散列函数在密码学中有用的原因。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2008-12-01T07:41:05.893

MD5 不会创建唯一的哈希值；MD5 的目标是快速生成一个值，该值会根据对源的微小更改而发生显着变化。

例如，

```
"hello" -> "1ab53"
"Hello" -> "993LB"
"ZR#!RELSIEKF" -> "1ab53" 
```

（显然这不是真正的 MD5 加密）

大多数哈希（如果不是全部）也是非唯一的；相反，它们*足够*独特，因此碰撞是极不可能的，但仍有可能。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-12-13T11:26:27.873

考虑哈希算法的一个好方法是考虑在 Photoshop 中调整图像的大小……假设您有一个 5000x5000 像素的图像，然后将其调整为 32x32。您所拥有的仍然是原始图像的表示，但它要小得多，并且有效地“丢弃”了图像数据的某些部分以使其适合较小的尺寸。因此，如果您将 32x32 图像的大小重新调整为 5000x5000，您将得到的只是一团模糊的混乱。然而，由于 32x32 图像并没有那么大，理论上可以想象另一个图像可以缩小尺寸以产生完全相同的像素！

这只是一个类比，但它有助于理解哈希在做什么。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-12-01T07:49:05.177

哈希冲突的可能性比您想象的要大得多。看看[生日悖论](http://en.wikipedia.org/wiki/Birthday_paradox)，以更好地理解为什么会这样。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-02T14:17:38.760

由于可能的输入文件的数量大于 128 位输出的数量，因此不可能为每个可能的文件唯一地分配一个 MD5 散列。

加密散列函数用于检查数据完整性或数字签名（为提高效率而对散列进行签名）。因此，更改原始文档应该意味着原始哈希与更改后的文档不匹配。

有时会使用这些标准：

1.  原像抗性：对于给定的散列函数和给定的散列，应该很难找到具有该函数给定散列的输入。
2.  第二原像抗性：对于给定的散列函数和输入，应该很难找到具有相同散列的第二个不同的输入。
3.  碰撞阻力：对于给定的函数，应该很难找到具有相同哈希的两个不同输入。

选择这些标准是为了使找到与给定哈希匹配的文档变得困难，否则就有可能通过将原始文档替换为与哈希匹配的文档来伪造文档。（即使替换是胡言乱语，仅仅替换原件也可能导致中断。）

数字 3 意味着数字 2。

尤其是 MD5，它已经被证明是有缺陷的： [如何破解 MD5 和其他哈希函数](http://www.infosec.sdu.edu.cn/uploadfile/papers/How%20to%20Break%20MD5%20and%20Other%20Hash%20Functions.pdf)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-12-01T07:47:34.820

但这就是彩虹桌发挥作用的地方。基本上它只是大量单独散列的值，然后将结果保存到磁盘。然后反转位“只是”在一个非常大的表中进行查找。

显然，这仅适用于所有可能输入值的子集，但如果您知道输入值的范围，则可以计算它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-03-13T06:07:36.080

中国科学家发现了一种称为“选择前缀冲突”的方法，可以在两个不同的字符串之间产生冲突。

下面是一个例子： http: [//www.win.tue.nl/hashclash/fastcoll_v1.0.0.5.exe.zip](http://www.win.tue.nl/hashclash/fastcoll_v1.0.0.5.exe.zip)
源代码： http: [//www.win.tue.nl/hashclash/fastcoll_v1.0.0。 5_source.zip](http://www.win.tue.nl/hashclash/fastcoll_v1.0.0.5_source.zip)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-02-15T16:53:15.740

了解所有投票最多的答案意味着什么的最佳方法是实际尝试还原 MD5 算法。我记得几年前我试图恢复**MD5crypt**算法，不是为了恢复原始消息，因为这显然是不可能的，而只是为了生成一条可以产生与原始哈希相同的哈希的消息。至少从理论上讲，这将为我提供一种登录 Linux 设备的方法，该设备使用生成的消息（密码）而不是使用原始消息（密码）将 user:password 存储在 /etc/passwd 文件中。由于两条消息将具有相同的结果散列，因此系统会将我的密码（从原始散列生成）识别为有效。那根本行不通。几周后，如果我没记错的话，**盐的使用**在最初的消息中杀了我。我不仅要生成一个有效的初始消息，而且还要生成一个加盐的有效初始消息，这是我永远无法做到的。但是我从这个实验中得到的知识很好。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-12-03T10:42:37.540

正如大多数人已经说过的那样，MD5 设计用于将可变长度数据流散列为固定长度的数据块，因此许多输入数据流共享单个散列。

但是，如果您确实需要从校验和中找出原始数据，例如，如果您有密码的哈希值并且需要找出原始密码，那么只需 google（或您喜欢的任何搜索器）哈希值通常会更快答案比暴力破解它。我已经使用这种方法成功找到了一些密码。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-01T08:14:20.790

根据定义，密码散列函数不应该是可逆的，并且应该具有尽可能少的冲突。

关于您的问题：这是一种单向哈希。输入（与长度无关）将生成固定大小的输出，该输出将基于算法（MD5 的 512 位边界）进行填充。信息被压缩（丢失）并且实际上不可能从反向变换中生成。

有关 MD5 的附加信息：它容易受到碰撞。我最近浏览了这篇文章， [http://www.win.tue.nl/hashclash/Nostradamus/](http://www.win.tue.nl/hashclash/Nostradamus/)

加密哈希实现（MD5 和 SHA）的开源代码可以在 Mozilla 代码中找到。（免费图书馆）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-30T15:04:55.760

现在每天 MD5 散列或任何其他散列都会为所有可能的字符串预先计算并存储以便于访问。虽然理论上 MD5 是不可逆的，但使用这样的数据库，您可能会发现哪个文本产生了特定的哈希值。

例如，在[http://gdataonline.com/seekhash.php](http://gdataonline.com/seekhash.php)尝试以下哈希代码，以找出我用来计算哈希的文本

```
aea23489ce3aa9b6406ebb28e0cda430 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-19T22:45:24.920

f(x) = 1 是不可逆的。哈希函数不是不可逆的。

这实际上是他们完成确定某人是否拥有散列数据的未损坏副本的功能所***必需的。***这带来了蛮力攻击的敏感性，如今这些攻击非常强大，尤其是针对 MD5。

在具有数学知识但对密码破译知识很少的人中，这里和其他地方也存在混淆。几个密码只是简单地将数据与密钥流进行异或运算，因此您可以说密文对应于该长度的所有明文，因为您可以使用任何密钥流。

但是，这忽略了从种子产生的合理明文`password`比种子产生的另一个明文的可能性要大得多，`Wsg5Nm^bkI4EgxUOhpAjTmTjO0F!VkWvysS6EEMsIJiTZcvsh@WI$IH$TYqiWvK!%&Ue&nk55ak%BX%9!NnG%32ftud%YkBO$U6o`以至于任何声称第二种可能性的人都会被嘲笑。

同样，如果您要在两个潜在的密码`password`和之间做出决定`Wsg5Nm^bkI4EgxUO`，这并不像某些数学家让您相信的那么难。

* * *

## 回答 #16

> 赞同：-5
> 
> 时间：2014-09-23T21:38:55.400

我喜欢各种不同的论点。很明显，散列值的真正价值只是为诸如密码之类的字符串提供人类不可读的占位符。它没有特定的增强安全优势。假设攻击者获得了使用散列密码访问表的权限，他/她可以：

*   散列他/她自己选择的密码，如果他/她对表具有写入/编辑权限，则将结果放入密码表中。
*   生成常用密码的哈希值，并测试密码表中是否存在类似的哈希值。

在这种情况下，弱密码不能仅仅因为它们被散列而受到保护。

# php - PHP函数来确定一个字符串是否只包含字母数字字符？

> ID：330215
> 
> 赞同：2
> 
> 时间：2008-12-01T07:23:11.610
> 
> 标签：php, string

是否有一个 PHP 函数来确定一个字符串是否仅由 ASCII 字母数字字符组成？

注意：如果这个问题对某些人来说听起来很愚蠢，我很抱歉，但我无法在 Php 手册中轻松找到这样的功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-01T07:25:45.270

试试[ctype_alnum](http://us3.php.net/manual/en/function.ctype-alnum.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T07:33:10.793

```
preg_match('/^[a-z0-9]+$/i', $str); 
```

编辑：约翰 T 的答案更好。只是提供另一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T03:29:45.990

这是我的解决方案

```
<?php
public function alphanum($string){
    if(function_exists('ctype_alnum')){
        $return = ctype_alnum($string);
    }else{
        $return = preg_match('/^[a-z0-9]+$/i', $string) > 0;
    }
    return $return;
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-07T17:58:25.963

我漫长但简单的解决方案

```
strspn($string, '0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM_') == strlen($string) 
```

函数 strspn() 查找仅包含字母、数字和下划线字符（第二个参数）的 $string 的初始段的长度。如果整个字符串仅由字母、数字和下划线组成，则返回值将等于字符串的长度。

# refactoring - 大规模重构策略

> ID：330220
> 
> 赞同：23
> 
> 时间：2008-12-01T07:26:11.323
> 
> 标签：refactoring, legacy

我目前正在编写一段代码，其中逻辑和数据访问都存在于 GUI 类中。显然，我想改善这种情况。

目前的结构基本上是：

*   大泥球

最终目标是实现类似 DDD 的结构：

*   达尔
*   领域模型
*   服务层
*   演示模型
*   图形用户界面

那么，你将如何解决这个问题呢？

*   大爆炸
    *   定义最终状态的结构并将代码推送到其最终位置。
*   分而治之
    *   试着把大泥球分成两块。重复直到完成...
*   扼杀
    *   扼杀类（如[http://martinfowler.com/bliki/StranglerApplication.html](http://martinfowler.com/bliki/StranglerApplication.html)中所述）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-01T08:32:34.170

永远不要尝试“大爆炸”。它几乎总是扑面而来，因为当其他一切都失败时，这是一种高风险、绝望的措施。

分而治之：这很好用……如果你的世界只有两个方面。在真正的软件中，你必须同时征服如此多的战线，你很少能负担得起生活在黑白幻想中的代价。

我想在我职业生涯的大部分时间里，我一直在使用“扼杀”之类的东西：逐渐将糟糕的旧代码转变为闪亮的新代码。这是我的食谱：

从某个地方开始，从哪里开始并不重要。编写一些单元测试以查看代码的实际行为。找出它做你认为它做的事情的频率，以及它不做的频率。使用您的 IDE 重构代码，以便您可以对其进行测试。

第一天之后，猜猜你是否从正确的地方开始拆解这个怪物。如果是这样，继续。如果没有，找一个新的地方重新开始。

这种策略的优点：它以小步骤工作，因此可以控制风险，如果出现问题，是否必须在您上周工作的代码中。

缺点：这需要很多时间，而且你会感到沮丧，因为通常情况下，进展似乎很慢，直到“结”弹出，突然间，一切都开始到位，就像施了魔法一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T07:56:09.093

我从来没有听说过“扼杀者应用程序”这个词——我喜欢它。在可能的情况下，这始终是一个好方法，它无疑将风险降到最低，并且非常务实，将这座大大厦一块块地削掉。

根据我的经验，这不起作用的地方是需要立即进行相当大的更改 - 需要进行一些重构（或大量黑客攻击）的更改。在那种情况下，我经常发现我需要做的改变就在大泥球的中心，除了变脏别无选择——即使应该是标准维护或微小的增强改变也太可怕了，而且主要重构是最好的选择。

对于这些情况，我会选择分而治之——我一直瞄准的第一个目标是可测试性，一旦你有了它，剩下的就容易多了。事实上，这通常是我从大泥球中重构的主要驱动力之一——那种代码通常几乎是不可测试的，希望有示例 UI 输入和输出，但有时甚至缺少.

因此，当面对所有内容都集中在 UI 中的代码时，我通常首先将离散的功能单元分解为类和方法，然后将这些代码部分下推到域或服务层中。一点一点地做这件事大大减少了破坏某些东西的机会，并且当事情出错时更容易查明破坏代码的位置。

在每次更改结束时运行您可用的任何测试用例，并确保您仍然满足某种基线。

如果你写好的单元测试，你可以开始减少问题的规模，我发现采用扼杀方法很快就会变得实用——使用体面的单元测试或至少有正确的框架来允许编写体面的单元测试逐渐替换部分功能变得更加实用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2010-12-02T16:47:46.867

我偶然发现了似乎很有希望解决此类问题的“天皇方法”。

[http://mikadommethod.wordpress.com/](http://mikadomethod.wordpress.com/)

Øredev 2010 中也有关于 Mikado 方法的讨论。

[http://oredev.org/2010/sessions/large-scale-refactorings-using-the-mikado-method](http://oredev.org/2010/sessions/large-scale-refactorings-using-the-mikado-method)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-17T08:47:29.720

Big bang / Big re-design / rewriting the SW ... 或任何其他名称都不适用于生活 SW。原因是：

*   您仍然需要使用（可能）您拥有的相同资源来支持现有的软件。

*   你可能没有重写的要求。您的旧代码中嵌入了所有要求。你们的工程师都不知道所有的软件领域和所有的要求。

*   Rewriting will take time. At the end of this time you will find that the existing SW has changed to support things that were required during this time. your new SW actually split from the original and merge will be needed (which will also take time).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T07:55:10.907

取决于您是否必须始终保持工作状态，以便您可以随时进行错误修复和部署，那么Devide and Conquer将是一个很好的解决方案。如果您可以维护旧代码，同时处理新代码（并有纪律将错误修复应用于两个代码库），那么重写可能是更好的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T08:00:53.233

如果通过重构，您的意思是在不修改功能的情况下改进代码，我将从创建一个自动化回归测试基线开始。有很多工具可以帮助解决这个问题。我使用[TestComlete](http://www.automatedqa.com/products/testcomplete/)虽然有很好的廉价替代品。

建立回归测试基线后，我个人会选择分而治之，因为根据我的经验，它最有可能成功。一旦你有了一个测试基线，你选择哪种方法就不再重要了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-01T08:41:30.047

对我来说，这取决于情况。

如果这是一个非常小的项目，我会很想从头开始重写它……但是您通常不会拥有这种奢侈。

做不到这一点，我会去一块一块地切掉它。我会编写单元测试来验证现有功能，并慢慢使用 TDD 将代码转换为优雅且设计良好的系统。根据这个过程需要多长时间，它可能开始看起来像你上面提到的 StranglerApplication。

BigBang 风险很大，因为您没有简单的方法来验证更新后的系统是否与旧系统执行相同的操作。

分而治之的风险比 BigBang 的风险小……但如果它的系统足够大，它最终可能会像 BigBang 一样有问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-01T07:38:53.123

完全重写是一种选择吗？根据我的经验，从头开始重写通常比试图清理现有的混乱更有效。您仍然保留部分现有代码，但在新的上下文中。如果你有 gui 和数据库，也是如此。从头开始重写并随身携带您可以使用的东西。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-12-01T08:08:14.967

从一个干净的新架构开始，将旧的代码片段逐段移动到这个新架构中，并对其进行重构以适应新架构将是一个不错的选择。我认为在移动功能时采用自下而上的方法会很好。

# mysql - 在 mysql 中使用“不存在”的 SQL 分区

> ID：330221
> 
> 赞同：2
> 
> 时间：2008-12-01T07:28:06.980
> 
> 标签：mysql, sql

我有下表：

```
“委员会”表

通用名 profname
=========================
通讯账单
通讯插孔
通讯吹笛者
通讯帐单
通讯吹笛者

```

我正在努力寻找“派珀”所在的每个委员会的教授（答案应该是派珀和比尔）：

我有以下 SQL 除法查询，但它是错误的，我无法弄清楚问题出在哪里（不返回账单，只是吹笛者）：

```
选择 b.profname
来自委员会 b
不存在的地方

（选择通讯名
来自委员会
其中 profname = 'piper' 并且不存在

（选择通讯名
来自委员会
其中 a.profname=b.profname ))

```

有人可以帮我解决这个问题吗？谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-01T08:07:41.567

你最里面的选择在它的 where 子句中没有使用它自己的任何东西，所以它总是为 piper 找到一些东西。尝试

```
select distinct b.profname from committee b
where not exists (
    select commname from committee a
    where a.profname = 'piper' and not exists  (
        select commname from committee c
        where c.profname=b.profname and c.commname=a.commname
    )
); 
```

# rdlc - 如何：更改 rdlc 导出时的图像可见性

> ID：330224
> 
> 赞同：3
> 
> 时间：2008-12-01T07:33:03.447
> 
> 标签：rdlc

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-03T21:17:48.613

我发现如何做到这一点的唯一方法是创建一个自定义的“导出”功能......这真的很简单。

第 1 步：在您的报告中创建一个名为“ShowImage”的参数。我使用了字符串的数据类型，隐藏了提示并设置了默认值“False”。这样，当报表首次在页面上的报表查看器中运行时，它不会被隐藏。

第 2 步：将图像的可见性属性更改为具有以下内容的表达式：

```
=CBool(Parameters!ShowImage.Value) 
```

第 3 步：隐藏报表查看器上的导出控制。这是我的例子：

```
<rsweb:ReportViewer ID="ReportViewer1"  runat="server" ShowExportControls="false" Font-Names="Verdana" Font-Size="8pt">
        <LocalReport ReportPath="Report1.rdlc" >
        </LocalReport>
    </rsweb:ReportViewer> 
```

第 4 步：向您的页面添加一个按钮并编写自定义导出代码。您需要确保设置在步骤 1 中创建的参数。

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click

    'Create ReportViewer
    Dim viewer As New Microsoft.Reporting.WebForms.ReportViewer()
    Dim p(0) As Microsoft.Reporting.WebForms.ReportParameter

    p(0) = New Microsoft.Reporting.WebForms.ReportParameter("ShowImage", "True")

    viewer.LocalReport.ReportPath = Server.MapPath("Report1.rdlc")
    viewer.LocalReport.SetParameters(p)

    'Export to PDF
    Dim reportContent As Byte() = viewer.LocalReport.Render("PDF", Nothing, Nothing, Nothing, Nothing, Nothing, Nothing)

    'Return PDF
    Me.Response.Clear()
    Me.Response.ContentType = "application/pdf"
    Me.Response.AddHeader("Content-disposition", "attachment; filename=Report.pdf")
    Me.Response.BinaryWrite(reportContent)
    Me.Response.End()

End Sub 
```

而已。请问，您为什么不想创建自定义导出事件？

# html - 如何使用 css 应用换行/延续样式和代码格式

> ID：330229
> 
> 赞同：13
> 
> 时间：2008-12-01T07:38:52.310
> 
> 标签：html, css

在 Web 上呈现预格式化的文本（例如代码示例）时，换行可能是个问题。您希望在不滚动的情况下进行换行以提高可读性，但还需要让用户清楚地知道它是一行，没有换行符。

例如，您可能有一个很长的命令行要显示，如下所示：

```
c:\Program Files\My Application\Module\bin\..> Some_really_long_command line "with parameters" "that just go on and on" " that should all be typed on one line" "but need to be wrapped for display and I'd like the text style to indicate that it has wrapped" 
```

（Stackoverflow 强制这样的行不换行。）

有没有一种使用 CSS 进行样式设置的方法，可以提供与您在书中看到的相同的处理方式？即换行，但包含指示行继续的图像或字形。

显然，我正在寻找一种可以应用于所有文本的样式，并让浏览器的 XHTML/CSS 渲染引擎找出哪些行已经换行，因此需要特殊处理。

# 到目前为止的解决方案..

## 添加行继续字形

感谢 Jack Ryan 和 Maarten Sander，他们提供了一个合理可行的解决方案，可以在换行的左侧或右侧添加延续字形。它需要一个在垂直方向具有重复字形的图像，该图像是偏移的，因此如果只有一条展开的线，它是不可见的。这种技术的主要要求是每行都需要在一个块内（例如 p、span 或 div）。这意味着它不能轻易地手动使用仅位于预块中的现有文本。

下面的片段总结了基本技术。[我在这里](http://blog.tardate.com/2008/12/code-formatting-and-line-continuations.html)发布了一个活生生的例子。

```
.wrap-cont-l {
  margin-left: 24px;
  margin-bottom: 14px;
  width: 400px;
}

.wrap-cont-l p {
  font-family: Courier New, Monospace;
  font-size: 12px;
  line-height: 14px;
  background: url(wrap-cont-l.png) no-repeat 0 14px; /* move the background down so it starts on line 2 */
  text-indent: -21px;
  padding-left: 14px;
  margin: 0 0 2px 7px;
}

.wrap-cont-r {
  margin-left: 24px;
  margin-bottom: 14px;
  width: 400px;
}

.wrap-cont-r p {
  font-family: Courier New, Monospace;
  font-size: 12px;
  line-height: 14px;
  background: url(wrap-cont-r.png) no-repeat right 14px; /* move the background down so it starts on line 2 */
  text-indent: -28px;
  margin: 0 0 2px 28px;
  padding-right: 14px;
} 
```

像这样使用：

```
<div class="wrap-cont-l">
  <p>take a long line</p>
  <p>take a long line</p>
</div>
<div class="wrap-cont-r">
  <p>take a long line</p>
  <p>reel him in</p>
</div> 
```

## 但是等等，还有更多！

我最近发现了 Alex Gorbatchev 的[syntaxhighlighter](http://code.google.com/p/syntaxhighlighter)。它是动态和自动格式化文本块的绝佳工具。它主要用于语法高亮代码，但可用于任何文本。然而，在 v1.5.1 中，它不换行（实际上它强制它们不换行）。

不过，我做了一些修改，并且能够添加一个简单的换行选项 syntaxhighlighter 并且还结合了延续字形的想法。

我已将此添加到[实时示例](http://blog.tardate.com/2008/12/code-formatting-and-line-continuations.html)中，并包含一些关于所需黑客的注释（它们很简单）。因此，将此作为页面中的文本：

```
<textarea name="code" class="java:wraplines" cols="60" rows="10">
public class HelloWorld {

  public static void main (String[] args)

  {

    System.out.println("Hello World! But that's not all I have to say. This line is going to go on for a very long time and I'd like to see it wrapped in the display. Note that the line styling clearly indicates a continuation.");

  }

}
</textarea> 
```

这是格式化结果的快照：

[截图 http://tardate.com/syntaxhighlighter/line-continuation-example.jpg](http://tardate.com/syntaxhighlighter/line-continuation-example.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T09:19:33.310

这是这样做的一种（不愉快的）方式。它需要一些不好的做法。但是 SO 是关于实际问题的解决方案，所以我们开始......

首先，每一行都需要包装在某种包含块中。跨度或 p 可能是最合适的。

然后包含块的样式需要设置行高。和一个背景图像，该图像在除第一行之外的每一行的开头都包含许多 newLine 字形。由于这是代码，因此期望它不会超过 5 次是合理的。所以重复5次可能就够了。

然后可以将其设置为背景图像，并且应该显示在除第一行之外的每一行的开头。我猜生成的 CSS 可能如下所示：

```
p.codeLine
{
    font-size: 12px;
    line-height: 12px;
    font-family: Monospace;
    background: transparent url(lineGlyph) no-repeat 0 12px; /* move the background down so it starts on line 2 */
    padding-left: 6px; /* move the text over so we can see the newline glyph*/
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T09:45:30.917

我找到了一个与 Jack Ryan 非常相似的解决方案，但在行尾添加了“延续”字符。它还缩进连续的行。

CSS：

```
 p {
  font-family: Arial, Sans-Serif;
  font-size: 13px;
  line-height: 16px;
  margin: 0 0 16px 0;
}

.wrap-cont {
  font-family: Courier New, Monospace;
  margin-bottom: 16px;
  width: 400px;
}

.wrap-cont p {
  background: url(wrap-cont.gif) no-repeat bottom right;
  text-indent: -32px;
  margin: 0 0 0 32px;
  padding-right: 16px;
} 
```

的HTML：

```
 <p>For example, you may have a really long command line to display, like this:</p>
<div class="wrap-cont">
  <p>c:\Program Files\My Application\Module\bin\..&gt; Some_really_long_command line "with parameters" "that just go on and on" " that should all be typed on one line" "but need to be wrapped for display and I'd like the text style to indicate that it has wrapped"</p>
  <p>c:\Program Files\My Application\Module\bin\..&gt; Some_really_long_command line "with parameters" "that just go on and on" " that should all be typed on one line" "but need to be wrapped for display and I'd like the text style to indicate that it has wrapped"</p>
</div>
<p>Stackoverflow forces a line like this not to wrap.</p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T08:50:13.073

这不能用 CSS 完成。对不起。:(

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T10:16:19.293

如果您希望它明确，则必须添加标记。我建议每行代码使用一个带有一个列表项的 <ol> ，因为这样您就可以免费获得行号。如果整个站点的工作量太大，您可以随时使用 Javascript 添加它。

# .net - 使用 URL 查询字符串设置 LinqDataSource 绑定 DropDownList

> ID：330240
> 
> 赞同：1
> 
> 时间：2008-12-01T07:47:45.023
> 
> 标签：.net, linq

这对我来说是个谜，我能够让三个 DropDownLists 表现得像级联（它获取正确的数据），但是我遇到问题的地方是我尝试根据查询字符串的值设置下拉列表的值.

只有第一个下拉列表似乎从查询字符串中获取它的值。另外两个没有。事实上，第三个 DropDownlist 也会出现下面的错误（看起来控件还没有绑定：

```
'ddlStation' has a SelectedValue which is invalid because it does not exist in the list of items.
Parameter name: value 
```

仅供参考，这是在 Page_Load 事件中设置 DropDownList 的部分：

```
// see if there is any querystring and set dropdownlist accordingly
                if (Request.QueryString["cell"] != null)
                {
                    ddlCell.SelectedValue = Request.QueryString["cell"].ToString();
                    if (Request.QueryString["subcell"] != null)
                    {
                        ddlSubCell.SelectedValue = Request.QueryString["subcell"].ToString();
                        if (Request.QueryString["station"] != null)
                        {
                            ddlStation.SelectedValue = Request.QueryString["station"].ToString();
                        }
                    }
                } 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T07:56:14.507

您只能在数据绑定发生后设置 SelectItem/Value/Text。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T14:11:08.760

你是对的，数据绑定必须首先发生..

我有点想通的是，下拉列表的设置应该在每个下拉列表的 Databound 事件中（而不是在原始的 Page_Load 事件中）。

它现在可以工作了:)

# sql - DB2 是否有“插入或更新”语句？

> ID：330241
> 
> 赞同：41
> 
> 时间：2008-12-01T07:48:38.017
> 
> 标签：sql, database, db2, insert-update, upsert

从我的代码（Java）中，我想确保在我的代码执行后数据库（DB2）中存在一行。

我的代码现在执行 a `select`，如果没有返回结果，它执行`insert`. 我真的不喜欢这段代码，因为它让我在多线程环境中运行时遇到并发问题。

我想做的是将这个逻辑放在 DB2 中，而不是放在我的 Java 代码中。DB2 有`insert-or-update`声明吗？或者我可以使用的任何类似的东西？

例如：

```
insertupdate into mytable values ('myid') 
```

另一种方法可能是始终执行插入并捕获“SQL-code -803 主键已经存在”，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-12-01T09:23:09.637

是的，DB2 有 MERGE 语句，它将执行 UPSERT（更新或插入）。

```
MERGE INTO target_table USING source_table ON match-condition
{WHEN [NOT] MATCHED 
          THEN [UPDATE SET ...|DELETE|INSERT VALUES ....|SIGNAL ...]}
[ELSE IGNORE] 
```

看：

~~[http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0010873.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=/com.ibm.db2.udb.admin.doc/doc/r0010873.htm)~~

[https://www.ibm.com/support/knowledgecenter/en/SS6NHC/com.ibm.swg.im.dashdb.sql.ref.doc/doc/r0010873.html](https://www.ibm.com/support/knowledgecenter/en/SS6NHC/com.ibm.swg.im.dashdb.sql.ref.doc/doc/r0010873.html)

[https://www.ibm.com/developerworks/community/blogs/SQLTips4DB2LUW/entry/merge?lang=en](https://www.ibm.com/developerworks/community/blogs/SQLTips4DB2LUW/entry/merge?lang=en)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-21T13:26:27.820

我找到了这个线程，因为我真的需要一个用于 DB2 INSERT OR UPDATE 的单行代码。

以下语法似乎有效，不需要单独的临时表。

它通过使用 VALUES() 创建表结构来工作。SELECT * 恕我直言似乎多余，但没有它我会收到语法错误。

```
MERGE INTO mytable AS mt USING (
    SELECT * FROM TABLE (
        VALUES 
            (123, 'text')
    )
) AS vt(id, val) ON (mt.id = vt.id)
WHEN MATCHED THEN
    UPDATE SET val = vt.val
WHEN NOT MATCHED THEN
    INSERT (id, val) VALUES (vt.id, vt.val)
; 
```

如果您必须插入多行，则可以重复 VALUES 部分，而无需复制其余部分。

```
VALUES 
    (123, 'text'),
    (456, 'more') 
```

结果是一个可以插入或更新一行或多行的单个语句，大概是原子操作。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-16T08:44:46.730

此响应希望能完全回答 MrSimpleMind 在[use-update-and-insert-in-same-query 中的查询](https://stackoverflow.com/questions/15987691/use-update-and-insert-in-same-query)，并提供一个简单的 DB2 MERGE 语句示例，其中包含一次性插入和更新的场景（记录ID 2 被更新，记录 ID 3 被插入）。

```
CREATE TABLE STAGE.TEST_TAB (  ID INTEGER,  DATE DATE,  STATUS VARCHAR(10)  );
COMMIT;

INSERT INTO TEST_TAB VALUES (1, '2013-04-14', NULL), (2, '2013-04-15', NULL); COMMIT;

MERGE INTO TEST_TAB T USING (
  SELECT
    3 NEW_ID,
    CURRENT_DATE NEW_DATE,
    'NEW' NEW_STATUS
  FROM
    SYSIBM.DUAL
UNION ALL
  SELECT
    2 NEW_ID,
    NULL NEW_DATE,
    'OLD' NEW_STATUS
  FROM
    SYSIBM.DUAL 
) AS S
  ON
    S.NEW_ID = T.ID
  WHEN MATCHED THEN
    UPDATE SET
      (T.STATUS) = (S.NEW_STATUS)
  WHEN NOT MATCHED THEN
    INSERT
    (T.ID, T.DATE, T.STATUS) VALUES (S.NEW_ID, S.NEW_DATE, S.NEW_STATUS);
COMMIT; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-22T15:34:20.847

另一种方法是执行这 2 个查询。它比创建 MERGE 语句更简单：

```
update TABLE_NAME set FIELD_NAME=xxxxx where MyID=XXX;

INSERT INTO TABLE_NAME values (MyField1,MyField2) 
WHERE NOT EXISTS(select 1 from TABLE_NAME where MyId=xxxx); 
```

如果 MyId 存在，第一个查询只是更新您需要的字段。如果 MyId 不存在，第二个将行插入到 db 中。

结果是只有一个查询在您的数据库中执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T04:51:58.353

我从休眠项目开始，休眠允许您保存或更新（）。我将该项目转换为 JDBC 项目，问题在于保存和更新。我想使用 JDBC 同时保存和更新。所以，我做了一些研究，我遇到了 DUPLICATE KEY UPDATE ：

```
String sql="Insert into tblstudent (firstName,lastName,gender) values (?,?,?) 
ON DUPLICATE KEY UPDATE 
firstName= VALUES(firstName),
lastName= VALUES(lastName),
gender= VALUES(gender)"; 
```

上述代码的问题在于它两次更新了主键，根据 mysql 文档，这是正确的：受影响的行只是一个返回码。1 行表示您已插入，2 表示您已更新，0 表示未发生任何事情。

我引入了 id 并将其增加到 1。现在我正在增加 id 的值而不是 mysql。

```
String sql="Insert into tblstudent (id,firstName,lastName,gender) values (?,?,?) 
ON DUPLICATE KEY UPDATE 
id=id+1,
firstName= VALUES(firstName),
lastName= VALUES(lastName),
gender= VALUES(gender)"; 
```

上面的代码适用于我的插入和更新。

希望它也适用于你。

# php - 我有一个整数数组，如何在 mysql 查询（在 php 中）中使用每个整数？

> ID：330268
> 
> 赞同：19
> 
> 时间：2008-12-01T08:15:42.737
> 
> 标签：php, mysql, arrays

我有一个充满随机内容项 ID 的数组。我需要使用数组中的每个 ID，按照它们出现在所述数组中的顺序运行 mysql 查询（数组中的 id 位于 WHERE 子句中）。我该怎么做？

对于数组中的每个 ID，这将是一个 UPDATE 查询。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-12-01T08:30:52.597

与几乎所有“我如何从 PHP 中执行 SQL”问题一样 - 您*确实*应该使用准备好的语句。这并不难：

```
$ids  = array(2, 4, 6, 8);

// prepare an SQL statement with a single parameter placeholder
$sql  = "UPDATE MyTable SET LastUpdated = GETDATE() WHERE id = ?";
$stmt = $mysqli->prepare($sql);

// bind a different value to the placeholder with each execution
for ($i = 0; $i < count($ids); $i++)
{
    $stmt->bind_param("i", $ids[$i]);
    $stmt->execute();
    echo "Updated record ID: $id\n";
}

// done
$stmt->close(); 
```

或者，您可以这样做：

```
$ids    = array(2, 4, 6, 8);

// prepare an SQL statement with multiple parameter placeholders
$params = implode(",", array_fill(0, count($ids), "?"));
$sql    = "UPDATE MyTable SET LastUpdated = GETDATE() WHERE id IN ($params)";
$stmt   = $mysqli->prepare($sql);

// dynamic call of mysqli_stmt::bind_param                    hard-coded eqivalent
$types = str_repeat("i", count($ids));                        // "iiii"
$args = array_merge(array($types), $ids);                     // ["iiii", 2, 4, 6, 8]
call_user_func_array(array($stmt, 'bind_param'), ref($args)); // $stmt->bind_param("iiii", 2, 4, 6, 8)

// execute the query for all input values in one step
$stmt->execute();

// done
$stmt->close();
echo "Updated record IDs: " . implode("," $ids) ."\n";

// ----------------------------------------------------------------------------------
// helper function to turn an array of values into an array of value references
// necessary because mysqli_stmt::bind_param needs value refereces for no good reason
function ref($arr) {
    $refs = array();
    foreach ($arr as $key => $val) $refs[$key] = &$arr[$key];
    return $refs;
} 
```

根据需要为其他字段添加更多参数占位符。

**选哪一个？**

*   第一个变体迭代地处理可变数量的记录，多次访问数据库。这对于 UPDATE 和 INSERT 操作最有用。

*   第二个变体也适用于可变数量的记录，但它只访问数据库一次。这比迭代方法效率更高，显然你只能对所有受影响的记录做同样的事情。这对于 SELECT 和 DELETE 操作最有用，或者当您想要更新具有相同数据的多条记录时。

**为什么要准备好声明？**

*   准备好的语句更安全，因为它们使 SQL 注入攻击成为不可能。这是使用准备好的语句的主要原因，即使编写它们需要更多的工作。一个明智的习惯是：总是使用准备好的陈述，即使你认为它“不是真的必要”。忽视会来咬你（或你的客户）。
*   使用不同的参数值多次重复使用相同的预处理语句比向数据库发送多个完整的 SQL 字符串更有效，因为数据库只需编译一次语句，也可以重复使用它。
*   只有参数值被发送到数据库`execute()`，因此在重复使用时需要通过网络传输的数据更少。

在较长的循环中，使用准备好的语句和发送普通 SQL 之间的执行时间差异会变得很明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T08:20:33.787

# 使用“IN”子句

可能是你所追求的

```
$ids = array(2,4,6,8);
$ids = implode($ids);
$sql="SELECT * FROM my_table WHERE id IN($ids);";
mysql_query($sql); 
```

否则，有什么问题

```
$ids = array(2,4,6,8);
foreach($ids as $id) {
    $sql="SELECT * FROM my_table WHERE ID = $id;";
    mysql_query($sql);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T08:47:10.660

阿门托马拉克对声明的评论。

但是，如果您不想使用 mysqli，您可以随时使用 intval() 来防止注入：

```
$ids  = array(2, 4, 6, 8);
for ($i = 0; $i < count($ids); $i++)
{
    mysql_query("UPDATE MyTable SET LastUpdated = GETDATE() WHERE id = " . intval($ids[$i]));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T09:02:48.897

```
$values_filtered = array_filter('is_int', $values);
if (count($values_filtered) == count($values)) {
    $sql = 'update table set attrib = 'something' where someid in (' . implode(',', $values_filtered) . ');';
    //execute
} else {
    //do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T08:26:08.160

您可以执行以下操作，但是您需要非常小心，该数组仅包含整数，否则您最终可能会遇到 SQL 注入。

如果你能提供帮助，你真的不想做多个查询来获取内容。像这样的东西可能就是你所追求的。

```
foreach ($array as $key = $var) {
   if ((int) $var <= 0) {
       unset($array[$key]);
   }
}

$query = "SELECT * 
from content 
WHERE contentid IN ('".implode("','", $array)."')";

$result = mysql_query($query); 
```

# .net - 在 C# 中创建带有用户通知的 Windows 服务？

> ID：330282
> 
> 赞同：1
> 
> 时间：2008-12-01T08:32:44.433
> 
> 标签：.net, windows-services

我想以这种方式创建 Windows 服务：

-> 它需要输入数据库信息...

-> 在服务完成时，它会通知用户流程完成。

如何在 C#.Net 中使用 Windows 服务执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T09:28:20.140

我想你在问三个问题：

1.  如何创建 Windows 服务
2.  如何打开和读取数据库中的数据
3.  如何通知用户

答案：

1.  [例子](http://www.codeproject.com/KB/dotnet/simplewindowsservice.aspx)
2.  如果您可以使用 .NET 3.5 和 SQL Server 2005 或 2008，我会推荐[LINQ to SQL](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)
3.  Windows 服务没有 UI，因此您需要考虑如何通知用户。最简单的选择可能是[向他们发送电子邮件](http://www.developer.com/net/asp/article.php/3096831)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T09:26:22.500

根据您在问题中提供的一些线索，我认为您可能应该查看 WCF：

[http://msdn.microsoft.com/en-us/netframework/aa663324.aspx](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)

# mysql - 如何配置 binlog 获取 User-Information？

> ID：330299
> 
> 赞同：2
> 
> 时间：2008-12-01T08:51:15.253
> 
> 标签：mysql, security, logging

我需要在 mysql 中获得审计跟踪；有没有办法配置二进制日志以获取不仅更改，还获取进行此更改的用户（连接）？还是我必须使用 mySQL 代理？

TIA

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T07:00:30.983

我认为不可能让 binlog 显示连接信息。我的方法是在记录到审计表的数据库中设置触发器。例如，这是一个来自工作的：

```
CREATE TRIGGER whatever_audit_INSERT
  AFTER INSERT ON whatever FOR EACH ROW
  BEGIN
    INSERT INTO whatever_audit(
      audit_when_start, audit_who_start, col1, col2
    ) VALUES (
      now(), @app_user, new.col1, new.col2
    )
END 
```

那是凭记忆；希望我的语法正确......

# sql - 如何将 NULL 限制为存储过程 SQL Server 的参数？

> ID：330303
> 
> 赞同：42
> 
> 时间：2008-12-01T08:54:17.057
> 
> 标签：sql, sql-server, stored-procedures

是否可以将存储过程创建为

```
CREATE PROCEDURE Dummy 
    @ID INT NOT NULL
AS
BEGIN
END 
```

为什么不能做这样的事情？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-12-01T09:11:58.927

您可以在存储过程中检查它的 NULL 性`RAISERROR`并将状态报告回调用位置。

```
CREATE   proc dbo.CheckForNull @i int 
as
begin
  if @i is null 
    raiserror('The value for @i should not be null', 15, 1) -- with log 

end
GO 
```

然后调用：

```
exec dbo.CheckForNull @i = 1 
```

或者

```
exec dbo.CheckForNull @i = null 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-20T12:19:03.203

您的代码是正确的、明智的，甚至是良好的实践。您只需要等待支持这种语法的**SQL Server 2014 。**

毕竟，既然可以在编译时捕获，为什么还要在运行时捕获呢？

另请参阅[此 Microsoft 文档](http://msdn.microsoft.com/en-us/library/ms187926.aspx)并在其中搜索`Natively Compiled`。

正如 dkrez 所说，可空性不被视为数据类型定义的一部分。我仍然想知道为什么不。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-13T08:30:32.460

哦，好吧，我似乎无法编辑@Unsliced 帖子，因为“此编辑偏离了帖子的初衷。即使是必须做出重大改变的编辑也应该努力保持帖子所有者的目标。”。

所以（@crokusek 和每个感兴趣的人）这是我提出的解决方案：

您可以在存储过程中检查它的 NULL 性`RAISERROR`并将状态报告回调用位置。

```
CREATE proc dbo.CheckForNull 
  @name sysname = 'parameter',
  @value sql_variant
as
begin
  if @value is null
    raiserror('The value for %s should not be null', 16, 1, @name) -- with log
end
GO 
```

然后调用：

```
exec dbo.CheckForNull @name 'whateverParamName', @value = 1 
```

或者

```
exec dbo.CheckForNull @value = null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-10T08:51:29.367

您可能需要这种语法的一个原因是，当您在 C# 数据集 GUI 向导中使用 sp 时，如果没有 null 限制，它会创建带有可为 null 参数的函数。sp 正文中没有空检查有助于它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-01T09:07:56.327

参数验证目前不是 SQL Server 中过程逻辑的一项功能，NOT NULL 只是一种可能的数据验证类型。表中的 CHAR 数据类型具有长度规范。是否也应该实施？以及如何处理异常？对于表模式中的异常处理，有一种广泛的、高度开发的并且有点基于标准的方法；但不适用于程序逻辑，可能是因为程序逻辑是在关系系统之外定义的。另一方面，存储过程已经具有引发错误事件的现有机制，并与众多 API 和语言相关联。对参数的声明性数据类型约束没有这种支持。添加它的含义是广泛的；特别是因为它得到很好的支持和可扩展，只需添加代码：

```
IF ISNULL(@param) THEN
    raise error ....
END IF 
```

与表或 SQL 表达式的上下文相比，存储过程上下文中的 NULL 概念甚至都没有明确定义。这不是微软的定义。SQL 标准组花费了很多年的时间来编写大量文献来确定 NULL 的行为以及该行为的定义范围。存储过程不是其中之一。

存储过程被设计为尽可能轻量级，以使数据库性能尽可能高效。参数的数据类型不是为了验证，而是为了使编译器能够为查询优化器提供更好的信息，以编译最佳的查询计划。参数上的 NOT NULL 约束通过使编译器更复杂以实现验证参数的新目的而走向另一条路径。因此效率较低且较重。

存储过程不写成 C# 函数是有原因的。

# web-services - Web 服务中的超时时间

> ID：330305
> 
> 赞同：0
> 
> 时间：2008-12-01T08:55:03.280
> 
> 标签：web-services

我需要更改由 .net 控制台应用程序调用的 Web 服务的超时时间。

如何更改超时时间。

它不在 IIS 中托管。它的单一 WSDL。我不想写任何代码。我需要在 app.config 中更改它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T09:00:34.923

大多数 Web 服务最终都派生自 WebClientProtocol。此类具有可用于更改超时的[超时属性。](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.webclientprotocol.timeout.aspx)在调用服务之前设置它，它应该可以解决问题。

例子

```
void SomeMethod() {
  SomeWebService v1 = new SomeWebService();
  v1.Timeout = 1000;
  v1.AWebServiceCall();
} 
```

# sharepoint - 测试工作流程历史记录自动清理

> ID：330315
> 
> 赞同：1
> 
> 时间：2008-12-01T09:01:57.620
> 
> 标签：sharepoint, sharepoint-2007, moss

我在这里面临一个相当特殊的问题。我们有一个 OOTB 批准工作流，它将所有工作流历史记录到一个工作流历史列表中。此列表每 60 天清除一次。为了增加保留工作流程历史记录的时间段，我搜索了一下，发现我已经运行了这段代码：

使用 (SPSite wfSite = new SPSite(siteUrl)) {

```
using (SPWeb wfWeb = wfSite.OpenWeb(webName))

{

     SPList wfList = wfWeb.Lists[listName];

     SPWorkflowAssociation _wfAssociation = null;

     foreach (SPWorkflowAssociation a in wfList.WorkflowAssociations)

     {

         if("approval 1" == wfAssociationName.ToLowerInvariant())

         {

             a.AutoCleanupDays = newCleanupDays;

             _wfAssociation = a;

             assoCounter++;

         }

         else

         {

             _wfAssociation = a;

         }

     }

     wfList.UpdateWorkflowAssociation(_wfAssociation);

} 
```

}

该代码运行良好，因为它不会引发任何异常。到现在为止还挺好。但我现在的问题是我需要测试我的代码是否有效。所以我将 newCleanupDays 变量设置为 0。但我看到新的工作流活动仍在工作流历史记录列表中记录。我可以将变量设置为 1，但这意味着要等待一整天才能查看代码是否有效。

有什么方法可以测试我的场景，这样我就可以将自动清理天数设置为 1，而且我不必等待一整天来查看我的代码是否有效？有什么办法可以“愚弄”系统认为已经过去了 1 天？我尝试更改系统时间并重新启动服务器和所有内容，但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T21:05:42.697

更改系统时间应该可以工作，但您将不得不启动启动工作流程的计时器作业。时间更改后不要重新启动服务器。

一个警告是，SharePoint 真的不喜欢时光倒流。在“未来”创建的任何文档都会出现问题。所以记得在回滚到“现在”时可以删除的新网站进行测试。

# .net - 为什么我们不能在接口/抽象类中使用共享（静态）函数/方法？

> ID：330318
> 
> 赞同：6
> 
> 时间：2008-12-01T09:04:48.207
> 
> 标签：.net

在 .net 中，我们不允许在抽象类和接口中共享函数/方法。为什么他们不允许？

这在其他语言中是否相同。喜欢 Java 吗？

如果允许共享方法，可能会出现什么潜在问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-01T09:22:54.630

您当然可以在抽象类中拥有静态（共享）方法。但是，您不能在接口中使用它们。

听起来您真的想要*虚拟*静态/共享方法 - 而这些方法不可用。静态方法不是以多态方式调用的，而且按照*大多数*.NET 的工作方式，这没有多大意义。当将静态方法用作类型参数约束时，能够在接口中指定静态方法是有意义的——[这是我之前在博客上写过的一个想法](http://msmvps.com/blogs/jon_skeet/archive/2008/08/29/lessons-learned-from-protocol-buffers-part-4-static-interfaces.aspx)。

Delphi 有元类的概念，其中（据我了解）类元类中的实例方法就像类本身中的静态方法 - 一个元类可以从另一个派生，覆盖方法等。我我不是 Delphi 程序员，但如果您想了解更多信息[，Delphi in a Nutshell 第 2 章](http://oreilly.com/catalog/delphi/chapter/ch02.html)可能对您有用。

Java 允许在接口中指定常量，但这是那里唯一支持的静态成员。

有趣的是，CLI 本身*确实*允许在接口中使用静态方法，但那是带有主体的方法——不仅仅是接口的实例成员提供的签名。

# asp.net - 如何获取没有域的用户名

> ID：330320
> 
> 赞同：48
> 
> 时间：2008-12-01T09:06:25.737
> 
> 标签：asp.net

在一个 aspx 页面中，我获得了带有函数的 Windows 用户名`Request.LogonUserIdentity.Name`。此函数返回格式为“域\用户”的字符串。

是否有一些功能可以只获取用户名，而不像这样使用`IndexOf`and `Substring`？

```
public static string StripDomain(string username)
{
    int pos = username.IndexOf('\\');
    return pos != -1 ? username.Substring(pos + 1) : username;
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-22T15:25:02.623

如果您使用的是 Windows 身份验证。这可以简单地通过调用`System.Environment.UserName`which 将只为您提供用户名来实现。如果你只想要你可以使用的域名`System.Environment.UserDomainName`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2008-12-01T09:56:19.553

我不相信。我之前使用这些方法获得了用户名-

```
var user = System.Web.HttpContext.Current.User;   
var name = user.Identity.Name;

var slashIndex = name.IndexOf("\\");
return slashIndex > -1 
    ? name.Substring(slashIndex  + 1)
    : name.Substring(0, name.IndexOf("@")); 
```

或者

```
var name = Request.LogonUserIdentity.Name;

var slashIndex = name.IndexOf("\\");
return slashIndex > -1 
    ? name.Substring(slashIndex  + 1)
    : name.Substring(0, name.IndexOf("@")); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2011-10-13T13:07:54.783

获取零件[1] 不是一种安全的方法。我更喜欢使用 LINQ .Last()：

```
WindowsIdentity windowsIdentity = WindowsIdentity.GetCurrent();
if (windowsIdentity == null)
    throw new InvalidOperationException("WindowsIdentity is null");
string nameWithoutDomain = windowsIdentity.Name.Split('\\').Last(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-01T17:00:51.723

如果您使用的是 .NET 3.5，您始终可以为 WindowsIdentity 类创建一个扩展方法来为您工作。

```
public static string NameWithoutDomain( this WindowsIdentity identity )
{
    string[] parts = identity.Name.Split(new char[] { '\\' });

    //highly recommend checking parts array for validity here 
    //prior to dereferencing

    return parts[1];
} 
```

这样，您在代码中任何地方都需要做的就是参考：

> Request.LogonUserIdentity.NameWithoutDomain();

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T22:02:58.587

```
static class IdentityHelpers
{
    public static string ShortName(this WindowsIdentity Identity)
    {
        if (null != Identity)
        {
            return Identity.Name.Split(new char[] {'\\'})[1];
        }
        return string.Empty;
    }
} 
```

如果包含此代码，则可以执行以下操作：

```
WindowsIdentity a = WindowsIdentity.GetCurrent();
Console.WriteLine(a.ShortName); 
```

显然，在 Web 环境中，您不会写入控制台 - 只是一个示例......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-10T00:49:11.070

与其他答案做同样事情的另一种方法：

```
var usernameWithoutDomain = Path.GetFileName(@"somedomain\someusername") 
```

不检查用户名的 @ 变体是不安全的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-01T10:02:38.167

我建议使用正则表达式，但它们会矫枉过正。[System.String.Split]( [http://msdn.microsoft.com/en-us/library/b873y76a(VS.80).aspx)](http://msdn.microsoft.com/en-us/library/b873y76a(VS.80).aspx))完成这项工作。

```
string[] parts= username.Split( new char[] {'\\'} );
return parts[1]; 
```

# jquery - jQuery $.get() 没有设置标题时的回复字符集？

> ID：330331
> 
> 赞同：6
> 
> 时间：2008-12-01T09:11:06.213
> 
> 标签：jquery, character-encoding

我最近刚刚安装了[Winamp Song Requester](http://www.oddsock.org/tools/gen_songrequester/)，它是一个 Winamp 网络歌曲请求插件，内置了最小的 HTTP CGI 服务器。

该插件的作用是它运行一个 Web 服务器，提供一个带有一些特殊变量的 html 页面，它会根据请求（播放列表、请求队列、歌曲剩余时间等）替换为实际数据。

我认为这是学习一些 jQuery 的一个有趣且好的项目，所以我开始连接我自己的 js 代码来替换、修复和 ajaxify 来自插件的服务网站，但我现在遇到了字符编码的问题。

在页面上，您可以获得播放列表中所有歌曲的链接。当您单击其中一个链接时，我连接了我自己的 jQuery 单击功能。因此，当您请求一首歌曲时，我不会重新加载整个页面`$.get($(this).attr('href', function(response) {... code ...})`，然后我使用 replaceWith 将当前队列替换为新生成的队列，并即时添加您的请求。我做同样的事情来显示/更新当前正在播放和搜索，以便在后台获取所有内容，然后动态替换为添加一些动画。

所有 jQuery/Ajax 都很好用，但我遇到的最大问题是字符集和队列/播放列表中的歌曲名称。名称中的特殊字符（åäöé 等）根本不起作用。

该插件以 iso-8859-1/latin1 输出所有内容，并且我在标记中的元标记告诉浏览器此页面是 latin1。在浏览器中正常的页面刷新时，效果很好，特殊字符正常显示。但是当我使用 jQuery 并动态`$.get()`替换代码块时，特殊字符仅显示为？。

我认为问题在于如果没有标头另有说明，jQuery 默认认为`$.get()`响应是 UTF-8。该插件根本没有为编码/字符集设置任何标头，因为我无法控制所有后端以及设置了哪些标头，所以我无法更改它。

我从插件的响应中得到的唯一标题是：

> 服务器：WinampServer
> 连接：关闭
> 内容类型：text/html

我希望你能理解我的问题。我有一个页面，我完全无法控制后端，我需要处理的只是生成的 HTML。我无法在回复中更改或添加标题。我需要告诉 jQuery 响应实际上是 latin1 而不是 UTF-8，这样特殊字符的编码就不会中断。我已经在 jQuerys ajaxSetup 中尝试了 scriptCharset: 'iso-8859-1' ，但这仅适用于 script/json 类型，并且我正在使用 HTML 响应。

知道这是否可能或您可以考虑的任何其他解决方法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-12-01T09:51:09.127

**编辑**：好的，我认为这有效（至少它在我的测试环境中有效，请参阅先前尝试的修订）

```
$.ajaxSetup({
    'beforeSend' : function(xhr) {
        xhr.overrideMimeType('text/html; charset=UTF-8');
    },
});
$('#stuff').load('/yourresource.file'); // your ajax load 
```

我所拥有的是设置的主文件`UTF-8`和设置的数据文件`ISO-8859-1`。没有上面的代码，我得到了一堆垃圾测试字符串**åäöé**，正如预期的那样。使用上面的代码，它加载了正确编码的**åäöé 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T11:16:45.973

首先，如果您使用更通用的 $.ajax() 函数会更好。

根据[文档](http://docs.jquery.com/Ajax/jQuery.ajax#options)，有 scriptCharset 选项，但它仅适用于某些数据类型。还指出只有在调用页面的编码不同时才需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-11T15:35:09.753

This is just to point out that while the overrideMimeType() method is available in Gecko-based browsers (Firefox, ...), it is NOT in IE (at least <=7), and there appears to be no workaround. (I don't know about availability in other browsers.)

# python - 解析嵌套模式的字符串

> ID：330334
> 
> 赞同：3
> 
> 时间：2008-12-01T09:12:05.697
> 
> 标签：python, regex

什么是最好的方法来做到这一点。

输入字符串是

```
<133_3><135_3><116_2>The other system worked for about 1 month</116_2> got some good images <137_3>on it then it started doing the same thing as the first one</137_3> so then I quit using either camera now they are just sitting and collecting dust.</135_3></133_3> 
```

预期的输出是

```
{'The other system worked for about 1 month got some good images on it then it started doing the same thing as the first one so then I quit \
using either camera now they are just sitting and collecting dust.':[133, 135],

'The other system worked for about 1 month': [116],

'on it then it started doing the same thing as the first one':[137]

} 
```

这似乎是一个递归的正则表达式搜索，但我不知道到底是怎么回事。

到目前为止，我可以想到一个乏味的递归函数，但感觉应该有更好的方法。

相关问题：[可以使用正则表达式匹配嵌套模式吗？](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T10:15:25.803

使用 XML 解析器，使其生成 DOM（文档对象模型），然后构建遍历所有节点的递归算法，在每个节点中调用“text()”（这应该为您提供当前节点和所有子节点中的文本) 并将其作为键放入字典中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T10:31:44.880

使用 expat 或其他 XML 解析器；考虑到您正在处理 XML 数据，它比其他任何东西都更明确。

但是，请注意，XML 元素名称不能以数字开头，因为您的示例中有数字。

这是一个解析器，可以满足您的需求，尽管您需要对其进行调整以将重复的元素组合到一个 dict 键中：

```
from xml.parsers.expat import ParserCreate

open_elements = {}
result_dict = {}

def start_element(name, attrs):
    open_elements[name] = True

def end_element(name):
    del open_elements[name]

def char_data(data):
    for element in open_elements:
        cur = result_dict.setdefault(element, '')
        result_dict[element] = cur + data

if __name__ == '__main__':
    p = ParserCreate()

    p.StartElementHandler = start_element
    p.EndElementHandler = end_element
    p.CharacterDataHandler = char_data

    p.Parse(u'<_133_3><_135_3><_116_2>The other system worked for about 1 month</_116_2> got some good images <_137_3>on it then it started doing the same thing as the first one</_137_3> so then I quit using either camera now they are just sitting and collecting dust.</_135_3></_133_3>', 1)

    print result_dict 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T11:40:54.710

```
from cStringIO   import StringIO
from collections import defaultdict
####from xml.etree   import cElementTree as etree
from lxml import etree

xml = "<e133_3><e135_3><e116_2>The other system worked for about 1 month</e116_2> got some good images <e137_3>on it then it started doing the same thing as the first one</e137_3> so then I quit using either camera now they are just sitting and collecting dust. </e135_3></e133_3>"

d = defaultdict(list)
for event, elem in etree.iterparse(StringIO(xml)):
    d[''.join(elem.itertext())].append(int(elem.tag[1:-2]))

print(dict(d.items())) 
```

输出：

```
{'on it then it started doing the same thing as the first one': [137], 
'The other system worked for about 1 month': [116], 
'The other system worked for about 1 month got some good images on it then it started doing the same thing as the first one so then I quit using \
either camera now they are just sitting and collecting dust. ': [133, 135]} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T09:20:58.283

我认为语法将是这里的最佳选择。我找到了一些信息的链接： [http ://www.onlamp.com/pub/a/python/2006/01/26/pyparsing.html](http://www.onlamp.com/pub/a/python/2006/01/26/pyparsing.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T10:45:42.387

请注意，您实际上无法通过正则表达式解决此问题，因为它们没有强制执行正确嵌套的表达能力。

采取以下迷你语言：

> *一定数量的“（”后跟相同数量的“）”，不管是多少。*

你可以很容易地制作一个正则表达式来表示这种迷你语言的超级语言（你不强制开始括号和结束括号的数量相等）。您还可以使正则表达式非常容易地表示任何有限的子语言（您将自己限制在某个最大嵌套深度）。但是你永远不能用正则表达式来表示这种精确的语言。

所以你必须使用语法，是的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T14:02:02.367

这是一个不可靠的低效递归正则表达式解决方案：

```
import re

re_tag = re.compile(r'<(?P<tag>[^>]+)>(?P<content>.*?)</(?P=tag)>', re.S)

def iterparse(text, tag=None):
    if tag is not None: yield tag, text
    for m in re_tag.finditer(text):
        for tag, text in iterparse(m.group('content'), m.group('tag')):
            yield tag, text

def strip_tags(content):
    nested = lambda m: re_tag.sub(nested, m.group('content'))
    return re_tag.sub(nested, content)

txt = "<133_3><135_3><116_2>The other system worked for about 1 month</116_2> got some good images <137_3>on it then it started doing the same thing as the first one</137_3> so then I quit using either camera now they are just sitting and collecting dust. </135_3></133_3>"
d = {}
for tag, text in iterparse(txt):
    d.setdefault(strip_tags(text), []).append(int(tag[:-2]))

print(d) 
```

输出：

```
{'on it then it started doing the same thing as the first one': [137], 
 'The other system worked for about 1 month': [116], 
 'The other system worked for about 1 month got some good images on it then it started doing the same thing as the first one so then I quit using \
 either camera now they are just sitting and collecting dust. ': [133, 135]} 
```

# javascript - 如何从greasemonkey 脚本中关闭firefox 选项卡？

> ID：330337
> 
> 赞同：16
> 
> 时间：2008-12-01T09:13:04.757
> 
> 标签：javascript, firefox, greasemonkey

我有一个带有这行代码的greasemonkey用户脚本......

```
window.close(); 
```

但 Firefox 不允许用户脚本关闭窗口（由错误控制台中的错误消息报告）

有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-01T09:28:38.907

**您需要更改 Firefox (about:config) 的配置设置以允许这样做。**

## 脚步：

1.  转到地址栏并输入**about:config**
2.  转到参数**dom.allow_scripts_to_close_windows**
3.  将其值设置为**true**

现在您的脚本可以使用 'window.close()' 关闭 TAB

***例如。***

```
function closeTab(){
    window.open('', '_self', '');
    window.close();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-10-30T06:59:20.617

由于 Firefox 对待 Greasemonkey 代码与外部网站上的脚本代码具有相同的特权，因此不可能只允许 Greasemonkey 代码能够关闭窗口，而不允许常规脚本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-24T05:40:37.867

到目前为止，一些*-monkies*允许使用*@grant*选项来正式解锁诸如*window.close()*之类的命令，而无需转到*about:config*。例如，在[Tampermonkey](https://tampermonkey.net/documentation.php)中：

```
// @grant window.close
// @grant window.focus 
```

（后一个*授权*允许您将浏览器重新聚焦在您的窗口上。）这将消除错误。

***编辑：***正如[@baptx](https://stackoverflow.com/users/1176454/baptx)在评论中正确提到的那样，浏览器的安全选项也应该设置为允许脚本关闭窗口。

# ruby-on-rails - 重新生成脚手架

> ID：330339
> 
> 赞同：8
> 
> 时间：2008-12-01T09:13:19.530
> 
> 标签：ruby-on-rails, scaffolding

有没有办法从新更新的模型中重新生成视图？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-01T18:31:58.560

除非您对脚手架进行了大量更改，否则仅覆盖当前脚手架可能更容易：

```
./script/generate -f scaffold Model 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-15T10:24:39.770

我也有同样的需求，我只是备份了一些更改并进行了销毁/生成，**小心，销毁删除了与模型相关的所有**内容 ：

`rails destroy scaffold Model -f`

在我再次生成之前。

`rails generate scaffold Model`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T18:02:23.037

脚手架的目的不是*创建*接口，只是为进一步开发做一个起点。我不确定是否有可能（没有很多不必要的工作）重做脚手架，无论如何手动编辑视图和控制器要快得多。

# c# - C# 从文件中读取 JPEG 并存储为图像

> ID：330346
> 
> 赞同：40
> 
> 时间：2008-12-01T09:16:55.763
> 
> 标签：c#, image, jpeg

如何在我的文件系统上读取 JPEG 并将其作为 System.Drawing.Image 存储在我的 C# 代码中？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2008-12-01T09:18:35.993

```
Image i = Image.FromFile("image.jpg"); 
```

如果您需要更多信息，这里是[链接](http://msdn.microsoft.com/en-us/library/system.drawing.image.fromfile.aspx)。

# c++ - 哪种屏幕键盘适用于触摸屏应用？

> ID：330348
> 
> 赞同：4
> 
> 时间：2008-12-01T09:17:34.217
> 
> 标签：c++, user-interface, windows-xp, touchscreen

我正在用 C++ 开发一个应用程序，该应用程序部分由 Windows XP Embedded 上的触摸屏驱动。用户需要一些文本输入。到目前为止，我们一直在使用标准的 Windows 屏幕键盘 (osk.exe)，但有两个主要问题：

1.  它在更高分辨率的屏幕上相当小，这可能会使用户很难按正确的键
2.  这对客户来说太“丑陋”了，他们想要一个更流畅的屏幕键盘，可以更好地与应用程序的自定义外观集成。

因此，我正在寻找 Windows 屏幕键盘 (osk.exe) 的替代品，它允许更大尺寸的按钮并且可以换肤。理想情况下，它应该有一个类似 BSD 的许可证，可以轻松地集成到商业应用程序中，但免版税的商业解决方案也可以工作。

您是否知道任何此类应用程序，或者您是否有类似的项目以另一种方式解决了问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T09:56:10.303

我们正在为我们的系统使用[Click-N-Type](http://www.lakefolks.org/cnt/)。它是完全可调整大小的。它有一些定制的可能性，但我从未尝试过。我们在“普通”Windows XP 上使用它，但它也应该在嵌入式 Windows XP 上工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-06-01T12:54:30.443

我知道这个问题被标记为“c++”，但这是我发现并集成不到 5 分钟工作的 .Net 选项。（我看过，这个问题没有.Net风格，我想它也可以毫不费力地移植到C++）。

它使用标准的 Windows 屏幕键盘 (osk.exe)、调整大小、将其停靠在屏幕底部并移除标题和菜单栏，所有这些都来自应用程序中的一次调用。

[代码项目 - 管理 Windows XP 屏幕键盘](http://www.codeproject.com/KB/miscctrl/ClKeyboard.aspx "The Code Project - Manage Windows XP On Screen Keyboard")

The download is a single VB.Net class.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-23T23:43:57.690

please check WPF Component([http://fpscomponents.com/Product.aspx?id=8](http://fpscomponents.com/Product.aspx?id=8)) that is fully customizable by inbuilt editor. So programmer can fill it with own language and define layout!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-21T02:18:32.613

Check johngnazzo code:

[http://www.daniweb.com/forums/thread4548.html#](http://www.daniweb.com/forums/thread4548.html#)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T09:21:42.010

为什么不编写自己的键盘 UI？这将（应该）相对微不足道，并让您完全控制它的外观和感觉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T09:23:19.200

我用 Java 编写了屏幕键盘。当您想要使用 Java 组件和 Java 框架时，这非常有效。当您想在每个打开的窗口中提示时，您必须通过实现机器人发送器来发送关键事件。我遇到的问题是焦点所有者获得了发送的键，当您打开键盘时，键盘具有焦点。据我所知，您无法真正实现全局 Java 键盘。

当您只想使用 Java 键盘时，请使用 Java。否则你应该使用另一种语言。

您应该使用可以处理操作系统焦点所有者的本地语言或可以完全禁用键盘焦点但也可以将键盘带到屏幕前面的语言

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-07T11:46:41.147

看看[棋盘虚拟键盘](http://www.chessware.ch/virtual-keyboard/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-03-01T14:09:03.160

[http://hot-virtual-keyboard.com/](http://hot-virtual-keyboard.com/)

# python - 如何让 Python 对象在 Web 应用程序中持久化？

> ID：330367
> 
> 赞同：6
> 
> 时间：2008-12-01T09:26:07.867
> 
> 标签：python, web-applications, concurrency, persistence

我正在编写一个相当复杂的 Web 应用程序。Python 后端运行一种算法，其状态取决于存储在几个相互关联的数据库表中的数据，这些数据不经常更改，以及用户特定的数据经常更改。当用户使用应用程序时，算法的每个用户状态会发生许多小的变化。在每个用户的工作中经常使用该算法来做出某些重要的决定。

出于性能原因，对来自（半规范化）数据库数据的每个请求重新初始化状态很快变得不可行。例如，最好以某种方式缓存状态的 Python 对象，以便在必要时可以简单地使用和/或更新它。但是，由于这是一个 Web 应用程序，有多个进程为请求提供服务，因此使用全局变量是不可能的。

我已经尝试序列化相关对象（通过pickle）并将序列化数据保存到数据库，现在正在尝试通过memcached缓存序列化数据。但是，这仍然具有经常序列化和反序列化对象的巨大开销。

我查看了共享内存解决方案，但我发现唯一相关的是[POSH](http://poshmodule.sourceforge.net/)。然而 POSH 似乎并没有被广泛使用，我觉得将这样一个实验性组件集成到我的应用程序中并不容易。

我需要一些建议！这是我开发 Web 应用程序的第一次尝试，所以我希望这是一个足够普遍的问题，以便有针对此类问题的众所周知的解决方案。在这一点上，假设 Python 后端在单个服务器上运行的解决方案就足够了，但是对于扩展到多个服务器的解决方案也可以加分:)

笔记：

*   我有这个应用程序正在运行，目前正在使用并且有活跃用户。我一开始没有做任何过早的优化，然后根据需要进行优化。我已经完成了测量和测试，以确保上述问题是实际的瓶颈。我很确定我可以从当前设置中挤出更多性能，但我想问是否有更好的方法。
*   设置本身仍在进行中；假设系统的架构可以是任何适合您的解决方案的架构。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-01T11:29:48.337

小心过早的优化。

补充：“Python 后端运行一个算法，其状态...”是 Web 框架中的会话。就是这样。让 Django 框架在缓存中维护会话状态。时期。

“当用户使用应用程序时，算法的每个用户状态会发生许多小的变化。” 大多数 Web 框架都提供缓存的会话对象。通常它是非常高性能的。请参阅 Django 的[会话文档](http://docs.djangoproject.com/en/dev/topics/http/sessions/#topics-http-sessions)。

建议。[修改]

看来你有一些有用的东西。利用杠杆来学习你的框架，学习工具，并了解你可以毫不费力地转动哪些旋钮。具体来说，使用会话状态。

其次，摆弄缓存、会话管理等容易调整的东西，看看你是否有足够的速度。通过尝试找出 MySQL 套接字或命名管道是否更快。这些是无编程优化。

第三，测量性能以找到您的实际瓶颈。准备好提供（并捍卫）测量值，使其足够细粒度，足以有用且足够稳定，以提供对备选方案的有意义的比较。

例如，显示持久会话和缓存会话之间的性能差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T11:32:43.523

我认为[多处理](http://docs.python.org/library/multiprocessing.html)框架在这里可能适用 - 即共享 ctypes 模块。

多处理对 Python 来说是相当新的，所以它可能有一些奇怪的地方。我不太确定该解决方案是否适用于不是通过`multiprocessing`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T11:07:00.190

我认为你可以给 ZODB 一个机会。

“ZODB 的一个主要特性是透明性。您不需要编写任何代码来显式地从数据库读取对象或从数据库写入对象。您只需将持久对象放入一个像 Python 字典一样工作的容器中。里面的一切字典保存在数据库中。这个字典被称为数据库的“根”。它就像一个魔术袋；你放入其中的任何 Python 对象都会变得持久化。

最初它是 Zope 不可或缺的一部分，但最近也提供了一个独立的软件包。

它有以下限制：

“实际上，您可以在 ZODB 中存储的内容有一些限制。您可以将任何可以“腌制”的对象存储为标准的跨平台串行格式。可以腌制列表、字典和数字等对象。对象像文件、套接字和 Python 代码对象一样，不能存储在数据库中，因为它们不能被腌制。”

我已经阅读了它，但我自己还没有尝试过。

其他可能的事情可能是内存中的sqlite db，这可能会稍微加快进程 - 作为内存中的数据库，但您仍然必须做序列化的事情等等。注意：在内存中 db 的资源很昂贵。

这是一个链接：[http ://www.zope.org/Documentation/Articles/ZODB1](http://www.zope.org/Documentation/Articles/ZODB1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T13:47:51.537

首先，您的方法不是常见的 Web 开发实践。即使正在使用多线程，Web 应用程序也被设计为能够运行多处理环境，以实现可扩展性和更轻松的部署。

如果您只需要初始化一个大对象，并且以后不需要更改，您可以通过使用在创建 WSGI 应用程序时初始化的全局变量轻松完成，或者包含正在加载的对象的模块等，多处理对你来说很好。

如果您需要更改对象并从每个线程访问它，则需要确保您的对象是线程安全的，使用锁来确保这一点。并使用单个服务器上下文，一个进程。任何多线程 python 服务器都会很好地为您服务，FCGI 也是这种设计的不错选择。

但是，如果多个线程正在访问和更改您的对象，则锁定可能会对您的性能提升产生非常糟糕的影响，这可能会使所有好处都消失。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-17T02:31:06.547

> 这就是 Durus，一个用于使用 Python 编程语言编写的应用程序的持久对象系统。Durus 提供了一种简单的方法来使用和维护一个或多个进程使用的对象实例的一致集合。持久实例的访问和更改通过缓存的 Connection 实例进行管理，该实例包括 commit() 和 abort() 方法，因此更改是事务性的。

[http://www.mems-exchange.org/software/durus/](http://www.mems-exchange.org/software/durus/)

我以前在一些研究代码中使用过它，我想保留某些计算的结果。我最终改用[pytables](http://www.pytables.org)，因为它更好地满足了我的需求。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T11:30:39.003

另一种选择是查看状态要求，听起来如果序列化是瓶颈，那么对象就非常大。你真的需要这么大的物体吗？

我知道在 Stackoverflow 播客 27 中，reddit 的人讨论了他们用于状态的内容，所以听听可能很有用。

# sql - 数据库和函数式编程有矛盾吗？

> ID：330371
> 
> 赞同：130
> 
> 时间：2008-12-01T09:28:20.267
> 
> 标签：sql, database, functional-programming, lisp

我从事网络开发已经有一段时间了，最​​近开始学习一些函数式编程。像其他人一样，我在将这些概念中的许多概念应用于我的专业工作时遇到了一些重大麻烦。对我来说，造成这种情况的主要原因是我看到 FP 保持无状态的目标之间的冲突似乎与我所做的大多数 Web 开发工作都与非常以数据为中心的数据库密切相关这一事实相矛盾。

让我成为 OOP 方面更高效的开发人员的一件事是发现了对象关系映射器，例如 .Net 的 MyGeneration d00dads、perl 的 Class::DBI、ruby 的 ActiveRecord 等。这让我远离从整天编写插入和选择语句，到专注于将数据作为对象轻松处理。当然，当需要 SQL 查询的功能时，我仍然可以编写它们，但除此之外，它在幕后被很好地抽象出来了。

现在，转向函数式编程，似乎许多 FP Web 框架（如 Links）需要编写大量样板 sql 代码，如[本例所示](http://groups.inf.ed.ac.uk/links/examplessrc/dictionary/dict-suggest-update.links)。Weblocks 似乎好一点，但它似乎使用一种 OOP 模型来处理数据，并且仍然需要为数据库中的每个表手动编写代码，如[本例所示](http://www.bitbucket.org/S11001001/weblocks-dev/src/3ca71e2dfdd3/examples/weblocks-clsql-demo/src/model/)。我想您使用一些代码生成来编写这些映射函数，但这似乎绝对不像lisp。

（请注意，我没有非常仔细地研究过 Weblocks 或 Links，我可能只是误解了它们的使用方式）。

所以问题是，对于 Web 应用程序的数据库访问部分（我相信它相当大），或其他需要与 sql 数据库接口的开发，我们似乎被迫走以下路径之一：

1.  不要使用函数式编程
2.  以令人讨厌的、非抽象的方式访问数据，包括手动编写大量 SQL 或类似 SQL 的代码 ala Links
3.  强制我们的函数式语言进入伪 OOP 范式，从而消除真正函数式编程的一些优雅和稳定性。

显然，这些选项似乎都不理想。是否找到了规避这些问题的方法？这里真的有一个问题吗？

注意：我个人最熟悉 FP 方面的 LISP，所以如果你想给出任何例子并了解多种 FP 语言，lisp 可能是首选语言

PS：对于特定于 Web 开发其他方面的问题，请参阅[此问题](https://stackoverflow.com/questions/292033/is-functional-programming-relevant-to-web-development)。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2008-12-01T19:22:28.380

从数据库人员的角度来看，我发现前端开发人员过于努力地寻找使数据库适合他们的模型的方法，而不是考虑使用不是面向对象或功能但关系和使用数据库的最有效方法集合论。我已经看到这通常会导致代码性能不佳。此外，它还创建了难以调整性能的代码。

在考虑数据库访问时，有三个主要考虑因素 - 数据完整性（为什么所有业务规则都应该在数据库级别而不是通过用户界面强制执行）、性能和安全性。编写 SQL 是为了比任何前端语言更有效地管理前两个注意事项。因为它是专门为此设计的。数据库的任务与用户界面的任务大不相同。难怪在管理任务中最有效的代码类型在概念上是不同的？

数据库保存着对公司生存至关重要的信息。难怪企业在生存受到威胁时不愿意尝试新方法。哎呀，许多企业甚至不愿意升级到现有数据库的新版本。因此，数据库设计中存在固有的保守主义。它是故意的。

我不会尝试编写 T-SQL 或使用数据库设计概念来创建您的用户界面，为什么您会尝试使用您的界面语言和设计概念来访问我的数据库？因为您认为 SQL 不够花哨（或新）？还是你觉得不舒服？仅仅因为某些东西不适合您最喜欢的模型，并不意味着它是坏的或错误的。这意味着它是不同的，并且可能出于正当的原因而不同。您为不同的任务使用不同的工具。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-12-01T11:33:00.763

首先，我不会说 CLOS（Common Lisp Object System）是“伪 OO”。这是一流的OO。

其次，我认为你应该使用适合你需要的范式。

您不能无状态地存储数据，而函数是数据流并且不需要状态。

如果你有几个混合的需求，混合你的范式。不要限制自己只使用工具箱的右下角。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-05-08T10:01:00.597

您应该查看 Ben Moseley 和 Peter Marks 的论文“Out of the Tar Pit”，可在此处获得：[“Out of the Tar Pit”（2006 年 2 月 6 日）](http://www.curtclifton.net/storage/papers/MoseleyMarks06a.pdf)

这是一部现代经典，详细介绍了称为函数式关系编程的编程范式/系统。虽然与数据库没有直接关系，但它讨论了如何将与外部世界（例如数据库）的交互与系统的功能核心隔离开来。

本文还讨论了如何实现一个系统，其中使用关系代数定义和修改应用程序的内部状态，这显然与关系数据库有关。

本文不会给出如何集成数据库和函数式编程的确切答案，但会帮助您设计一个系统以最小化问题。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-05-08T13:32:58.623

1.  函数式语言的目标不是保持无状态，它们的目标是使状态管理变得明确。例如，在 Haskell 中，您可以将 State monad 视为“正常”状态的核心，而 IO monad 是必须存在于程序之外的状态表示。这两个 monad 都允许您 (a) 显式表示有状态的操作，以及 (b) 通过使用引用透明工具组合它们来构建有状态的操作。

2.  您引用了许多 ORM，根据它们的名称，它们将数据库抽象为对象集。确实，这不是关系数据库中的信息所代表的！顾名思义，它代表关系数据。SQL 是一种用于处理关系数据集上的关系的代数（语言），实际上它本身就非常“实用”。我提出这一点是为了考虑（a）ORM 不是映射数据库信息的唯一方法，（b）SQL 实际上对于某些数据库设计来说是一种非常好的语言，以及（c）函数式语言通常具有关系代数映射以惯用的方式（在 Haskell 的情况下，类型检查）中暴露 SQL 的力量。

我会说大多数 lisps 是穷人的功能语言。它完全可以根据现代功能实践使用，但由于它不需要它们，因此社区不太可能使用它们。这导致混合的方法可能非常有用，但肯定会掩盖纯函数式接口如何仍然有意义地使用数据库。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-12-01T10:44:54.103

我不认为 fp 语言的无状态特性是连接到数据库的问题。Lisp 是一种非纯函数式编程语言，因此处理状态应该没有任何问题。像 Haskell 这样的纯函数式编程语言有处理输入和输出的方法，可以应用于使用数据库。

从您的问题看来，您的主要问题似乎在于找到一种好方法，将您从数据库中返回的基于记录的数据抽象为 lisp-y（lisp-ish？）而无需编写大量 SQL代码。这似乎更像是工具/库的问题，而不是语言范例的问题。如果您想做纯 FP，那么 lisp 可能不适合您。Common lisp 似乎更多的是整合来自 oo、fp 和其他范例的好想法，而不是纯粹的 fp。如果你想走纯 FP 路线，也许你应该使用 Erlang 或 Haskell。

我确实认为 lisp 中的“伪 oo”想法也有其优点。您可能想尝试一下。如果它们不适合您处理数据的方式，您可以尝试在 Weblocks 之上创建一个层，让您可以按照自己的方式处理数据。这可能比自己编写所有内容更容易。

免责声明：我不是 Lisp 专家。我对编程语言最感兴趣，并且一直在使用 Lisp/CLOS、Scheme、Erlang、Python 和一点 Ruby。在日常的编程生活中，我仍然被迫使用 C#。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-05-08T12:20:17.267

如果您的数据库不破坏信息，那么您可以通过将整个数据库的功能作为一个值工作，以与“纯功能”编程值一致的功能方式使用它。

如果在时间 T 数据库声明“Bob 喜欢 Suzie”，并且您有一个接受数据库和喜欢者的函数 likes，那么只要您可以在时间 T 恢复数据库，您就有一个涉及数据库的纯函数程序. 例如

```
# Start: Time T
likes(db, "Bob")
=> "Suzie"
# Change who bob likes
...
likes(db "Bob")
=> "Alice"
# Recover the database from T
db = getDb(T)
likes(db, "Bob")
=> "Suzie" 
```

为此，您永远不能丢弃您可能使用的信息（这实际上意味着您不能丢弃信息），因此您的存储需求将单调增加。但是您可以将数据库作为一系列线性离散值开始工作，其中后续值通过事务与先前的值相关。

[例如，这是Datomic](http://www.datomic.com/)背后的主要思想。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-12-01T09:33:41.657

一点也不。有一种类型的数据库被称为“功能数据库”，其中[Mnesia](http://www.erlang.org/doc/apps/mnesia/)可能是最容易获得的例子。基本原理是函数式编程是声明式的，所以可以优化。您可以在持久集合上使用[List Comprehensions](http://en.wikipedia.org/wiki/List_comprehension)实现连接，查询优化器可以自动计算出如何实现磁盘访问。

Mnesia 是用[Erlang](http://en.wikipedia.org/wiki/List_comprehension)编写的，并且至少有一个 Web 框架 ( [Erlyweb](http://erlyweb.org/) ) 可用于该平台。Erlang 本质上与无共享线程模型并行，因此在某些方面它适用于可扩展架构。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-08-28T23:01:25.147

数据库是在无状态 API 中跟踪状态的完美方式。如果您订阅 REST，那么您的目标是编写与数据存储（或其他一些后端）交互的无状态代码，以透明的方式跟踪状态信息，这样您的客户端就不必这样做了。

Object-Relational Mapper 的想法，将数据库记录作为对象导入然后修改它，对于函数式编程和面向对象编程一样适用和有用。需要注意的是，函数式编程不会就地修改*对象，但数据库 API 可以允许您就地修改**记录*。您的客户端的控制流程如下所示：

*   将记录作为对象导入（此时数据库API可以锁定记录），
*   根据你喜欢的内容读取对象和分支，
*   用您想要的修改打包一个新对象，
*   将新对象传递给相应的 API 调用，该调用会更新数据库上的记录。

数据库将使用您的更改更新记录。纯函数式编程可能不允许*在程序范围内*重新分配变量，但您的数据库 API 仍然允许就地更新。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-05-08T09:21:05.060

我对 Haskell 最满意。最著名的 Haskell Web 框架（可与 Rails 和 Django 相媲美）称为 Yesod。它似乎有一个很酷的、类型安全的、多后端的 ORM。看看他们书中的[持久性章节](http://www.yesodweb.com/book/persistent)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-05-11T13:58:04.467

数据库和函数式编程可以融合。

例如：

Clojure 是一种基于关系数据库理论的函数式编程语言。

```
 Clojure -> DBMS, Super Foxpro
                   STM -> Transaction，MVCC
Persistent Collections -> db, table, col
              hash-map -> indexed data
                 Watch -> trigger, log
                  Spec -> constraint
              Core API -> SQL, Built-in function
              function -> Stored Procedure
             Meta Data -> System Table 
```

注意：在最新的 spec2 中，spec 更像是 RMDB。请参阅：[spec-alpha2 wiki：模式和选择](https://github.com/clojure/spec-alpha2/wiki/Schema-and-select)

我提倡：在hash-map之上构建关系数据模型，实现NoSQL和RMDB优势的结合。这实际上是 posgtresql 的反向实现。

Duck Typing：如果它看起来像鸭子，叫起来像鸭子，那它一定是鸭子。

**如果 clojure 的数据模型像 RMDB，clojure 的工具像 RMDB，clojure 的数据操作像 RMDB，那么 clojure 必须是 RMDB。**

[Clojure 是一种基于关系数据库理论的函数式编程语言](https://github.com/linpengcheng/PurefunctionPipelineDataflow/blob/master/doc/Clojure_is_FP_based_on_RMDB.md)

[一切都是 RMDB](https://github.com/linpengcheng/PurefunctionPipelineDataflow/blob/master/doc/Everything_is_RMDB.md)

[基于hash-map（NoSQL）实现关系数据模型和编程](https://github.com/linpengcheng/PurefunctionPipelineDataflow/blob/master/doc/relational_model_on_hashmap.md)

# c++ - long long 在 32 位机器上的实现

> ID：330374
> 
> 赞同：24
> 
> 时间：2008-12-01T09:30:18.107
> 
> 标签：c++, c

根据 c99 标准，大小`long long`应至少为 64 位。这是如何在 32 位机器中实现的（例如 2`long long`秒的加法或乘法）。此外，什么是`long long`C++ 中的等价物。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-01T09:41:30.863

C++ 中的等价物也很长。它不是标准所要求的，但大多数编译器都支持它，因为它非常有用。

它是如何实施的？大多数计算机体系结构已经内置了对多字加法和减法的支持。他们不直接进行 64 位加法，而是使用进位标志和特殊的加法指令从两个 32 位加法构建一个 64 位加法。

减法也存在相同的扩展（在这些情况下进位称为借位）。

长字乘法和除法可以从较小的乘法中构建，而无需进位标志的帮助。有时只是一点一点地进行操作会更快。

有些架构根本没有任何标志（一些 DSP 芯片和简单的微控制器）。在这些架构上，溢出必须通过逻辑操作来检测。这些机器上的多字算术往往很慢。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-01T09:38:34.753

在 IA32 架构上，64 位整数是使用两个 32 位寄存器（eax 和 edx）实现的。

C++ 有特定于平台的等效项，您可以在可用的情况下使用 stdint.h 标头（boost 为您提供了[一个](http://www.boost.org/doc/libs/1_37_0/boost/cstdint.hpp)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-01T09:51:54.117

正如大家所说，一个 64 位整数通常通过简单地将两个 32 位整数一起使用来实现。然后使用聪明的代码生成来跟踪[进位和/或借](http://en.wikipedia.org/wiki/Carry_flag)位以跟踪溢出，并进行相应的调整。

这当然使得这种算法在代码空间和执行时间方面的成本高于为原生支持 64 位操作的架构编译的相同代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T09:36:23.977

如果你关心位大小，你应该使用

```
#include <stdint.h>

int32_t n; 
```

和朋友。这也适用于 C++。

32 位机器上的 64 位数字按照您的想法实现，增加了 4 个字节。因此，您可以通过执行以下操作来实现您自己的 64 位数据类型：

```
struct my_64bit_integer {
    uint32_t low;
    uint32_t high;
}; 
```

您当然必须自己实现数学运算符。

我的 GCC 版本附带的 stdint.h 中有一个 int64_t，在 Microsoft Visual C++ 中，您也有一个 __int64 类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-01T17:57:36.867

下一个 C++ 标准（2009 年或 2010 年到期）将包含“long long”类型。如前所述，它已经普遍使用。

实现取决于编译器编写者，尽管计算机一直支持多精度运算。某些语言，如 Python 和 Common Lisp，需要支持不定精度整数。很久以前，我为一台计算机（Z80）编写了 64 位乘法和除法例程，它可以管理 16 位加法和减法，根本不需要硬件乘法。

了解如何在您的特定编译器上实现操作的最简单方法可能是编写代码示例并检查汇编器输出，这可从我使用过的所有主要编译器中获得。

# python - jython日期转换

> ID：330383
> 
> 赞同：2
> 
> 时间：2008-12-01T09:40:18.540
> 
> 标签：python, jython, date-conversion

给定如下字符串，我需要转换：

2008 年 12 月 1 日 06:43:00 +0100

到

MM/DD/YYYY HH:MM:SSAM

使用 jython 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T10:32:57.140

我没有方便的 jython，但我希望这样的东西可以工作：

```
import java
sdf = java.text.SimpleDateFormat

fmt_in = sdf('d MMM yyyy HH:mm:ss Z')
fmt_out = sdf('MM/dd/yyyy HH:mm:ssaa')

fmt_out.format(fmt_in.parse(time_str)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T11:47:02.357

[Jython](http://www.jython.org/) 2.5b0 (beta) 有一个[time 模块](http://www.python.org/doc/2.5.2/lib/module-time.html)的实现，其中包括

> `strptime(string[, format])`.
> 
> 根据格式解析表示时间的字符串。返回值是 gmtime() 或 localtime() 返回的 struct_time。

（`strptime`在 Jython2.2.1 中缺失）。

转换格式的 python 版本将如下所示（不确定区域组件）：

```
import time
mytime = time.strptime("1 Dec 2008 06:43:00 +0100", "%d %b %Y %H:%M:%S %Z")
new_time_string = time.strftime("%m/%d/%Y %I:%M:%S%p", mytime) 
```

# .net - .Net 中 KeyedByTypeCollection 的用途？

> ID：330387
> 
> 赞同：10
> 
> 时间：2008-12-01T09:45:07.470
> 
> 标签：.net, .net-3.5

在查看 .net 中的通用集合时，我发现了 KeyedByTypeCollection。虽然我使用它并知道如何使用它，但我没有得到它在哪种情况下有用。

我通读了[ServiceProvider、缓存等，使用泛型完成](https://stackoverflow.com/questions/178255/serviceprovider-cache-etc-done-with-generics-without-cast)，但没有得到太多。

我认为，为什么它被包含在.Net框架中一定是有原因的。任何使用过 KeyedByTypeCollection 的机构都可以向我解释他们为什么使用它，或者任何机构，如果他们知道在哪种情况下可能使用它，可以向我解释。

出于好奇，是否有其他语言支持这种类型的集合？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-08T12:01:51.307

AFAIK，这个通用集合只是一个简单的包装器，用于`KeyedCollection<KEY,VALUE>`何时存储`KEY`的类型`VALUE`。

例如，如果要实现工厂返回单例，使用此集合非常方便：

```
public class Factory<T>
{
    private readonly KeyedByTypeCollection<T> _singletons = new KeyedByTypeCollection<T>();

    public V GetSingleton<V>() where V : T, new()
    {
        if (!_singletons.Contains(typeof(V)))
        {
            _singletons.Add(new V());
        }
        return (V)_singletons[typeof(V)];
    }
} 
```

这个简单工厂的使用如下所示：

```
 [Test]
    public void Returns_Singletons()
    {
        Factory<ICar> factory = new Factory<ICar>();
        Opel opel1 = factory.GetSingleton<Opel>();
        Opel opel2 = factory.GetSingleton<Opel>();

        Assert.IsNotNull(opel1);
        Assert.IsNotNull(opel2);
        Assert.AreEqual(opel1, opel2);
    } 
```

另一种用法`KeyedByTypeCollection<T>`是在服务定位器内......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T13:07:56.243

“单件工厂”是解决单件问题的不同方法。

主要有以下三种方法：

1.  在每个类中实现一个`Current`or`Instance`属性 - 意味着大量重复的代码。哪个不好。

2.  实现一个`Singleton<T>`基类——意味着你可以拥有`class A : Singleton<B>`这显然是错误的。

3.  实施 a `SingletonFactory`- 这是有据可查的。大约 12 个月前我想到了它，坦率地说，我很惊讶地发现它在 Java 世界中是一个覆盖面非常广的主题。我为我当前的客户端编写的那个没有接口限制，并且是静态的，这意味着它在集合周围有一个锁以确保线程安全。如果不将其设为静态，您就有可能得到两个相同类型的单例，它们是不同的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-15T03:26:29.253

在分析这门课时，我认为它完全无关紧要。使用基类`KeyedCollection`并编写`GetKeyForItem`方法以返回 Item 参数的 Type。

在 上定义了四种`KeyedByTypeCollection`不相关的方法（`Find`、`FindAll`、`Remove`和`RemoveAll`）。*Find、FindAll 和 RemoveAll*没有基本`KeyedCollection`实现。 *Remove*确实存在于基类中。

中所有这四种方法的第一个问题`KeyedByTypeCollection`是它们对基本集合执行连续搜索以查找项目。为什么不直接使用索引器`KeyedCollection`来检索适当的项目？

其次，`FindAll`只会`RemoveAll`找到一项（如果集合中存在一项） - 因为根据定义，集合中只会存在指定类型的一项（哦，并且`FindAll`会连续读取集合中的所有元素，甚至如果它在开头找到匹配的元素）。因此，`FindAll`将`RemoveAll`在查找/删除 0 或 1 个项目之前读取集合中的所有项目。同样，为什么不使用索引器或 Remove 的基本版本来执行所需的过程？

该类的第二个问题是它没有被设计为基类（换句话说，除非您知道方法的内部是如何编写的，否则不要从它继承）。`GetKeyForItem`在应该使用该方法的地方没有对该方法的调用，因此，如果您重写该`GetKeyForItem`方法，您还必须重写其他几个方法才能正确获取 Collection 的键。

# abap - 在源代码控制中管理 ABAP 源代码

> ID：330389
> 
> 赞同：10
> 
> 时间：2008-12-01T09:45:32.180
> 
> 标签：abap, sap-basis

我们的产品目前涵盖大量技术，包括 Java、PL/SQL、VB.Net 和 ABAP。我们为除 ABAP 之外的所有语言设置了相当成熟的源代码控制和构建系统，ABAP 仍处于石器时代。由于 SAP 在其中设置了构建系统，我们的工程师在 SAP 环境中进行所有开发，导出传输，并将*它们*检查到源代码控制中。由于我们支持多个 SAP 版本，因此跟踪版本和跨 4.6、4.7、5.0 等迁移代码变得非常困难。

我理想的过程是将 ABAP 代码检查到文本文件中的源代码控制中，然后将其加载到 SAP 中并生成传输作为构建过程的一部分。SAP 工程师认为没有支持这种模型的工具。

如果您在源代码控制系统中管理 ABAP 代码，您的流程是什么样的？是否有可用的工具（最好是命令行）将 ABAP 代码加载到 SAP 中？您的工程师如何管理代码/测试/调试周期？他们*是在*SAP 中编码，然后在完成后导出代码，还是在外部编辑器中编辑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-07-06T13:42:58.740

为此，我使用了 SAPLINK（在前面的答案中提到）。还有一个名为“zake”的相关项目，据说可以自动执行一些任务，但我从未使用过它。我只是将我的代码手动导出到所谓的 slinkee（它们包含单个对象，如函数组；另一方面，掘金包含多个对象）。

使用一些外部源代码控制系统的原因：

*   与非abap源代码相关（因为我们的软件由.net和abap代码组成）
*   托管/维护 SAP 并不是我们所擅长的，所以很高兴知道您将代码放在安全的地方

不过有一件事：您至少需要 WAS 620 才能使用 saplink

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-04T14:25:17.903

我对 SAP 系统的 ABAP 堆栈之外的版本控制有什么好处感兴趣。

我从未见过有人为 ABAP 使用外部源代码控制，因为它是内置的。我也从未见过有人在 SAP 系统之外编写 ABAP 代码。真的不适合这个模型。

SAP 的 ABAP 堆栈是单一开发系统环境。所有开发人员都登录到一个系统并在那里进行开发。系统自动记录版本，并将更改的对象分组到传输中。传输只是更改对象的列表。导出传输后，每个对象的版本号都会递增，并且您会获得其他系统的包。

ABAP 堆栈本身也没有真正的“构建”概念。你所做的一切都是一个补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T14:28:13.210

另请查看 SAP CTS+，它用于管理基于 ABAP 和 JAVA 的组件的传输和版本控制。

[https://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/e0249083-c0ab-2a10-78b8-b7a7854b1070](https://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/e0249083-c0ab-2a10-78b8-b7a7854b1070)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-23T17:37:03.473

嗨，

正如 Dom 告诉你的，SAP 有自己的版本管理。但是，为了在传输释放之间进行定期保存，您可以使用以下工具：

*   [SAPLink](http://code.google.com/p/saplink/)（如 Wili aus Rohr 所说）
*   [ZAPLink](http://code.google.com/p/zaplink/)

该工具可用于将 ABAP 组件提取到 XML 中。我真的不建议自动导入 SAP，原因有很多： # 这些工具没有保证 # 并非所有 ABAP 组件都可以这样处理

但是使用（Google 代码）之类的工具来详细显示软件更改可能会很有趣，这在 ABAP 对象上可能会更复杂。

我使用 ZAPLINK_EXTRACTOR 程序在 ZAP Link 框架上开发了这个程序，该程序在 SAP 组件发生更改时将其导出为 XML。这可以防止 XML 文件更改（新文件但内容相同）并被 mercurial 等工具检测为更改。

希望能帮助到你。

请记住，您应该使用 SAP 工具来更改 SAP 组件。SAP 顾问可能会为您详细解释。

塔里克。[ [http://www.steria.com](http://www.steria.com)斯特里亚（法国）]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-02-08T13:54:19.573

至少，应该在 SAP 开发系统中进行修改和测试。没有人在 ABAP 中使用外部编辑器。（另一方面，SAP Java ......）没有理由不能直接备份 SAP 代码，作为文本文件，或者（最好）使用 SAPLink 或传输转储文件。（向您的 BASIS 人员询问有关传输文件的信息）。意识到如果您使用文本文件路径，您可能会错过存储在数据库中其他位置的字段文本等内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-13T15:18:14.253

2020 年对这个问题的回答很简单：使用[AbapGit](https://docs.abapgit.org/)。它为您提供了现代版本控制的所有优势，文档齐全，开源并且像魅力一样工作。

# asp.net - 文件夹内容更改时重新启动 ASP.NET 应用程序

> ID：330390
> 
> 赞同：2
> 
> 时间：2008-12-01T09:46:31.897
> 
> 标签：asp.net, monitor, restart

我正在编写一个具有“插件”的 Web 应用程序。插件将是 .DLL 文件，它们将通过预定义的接口导出其功能。所有 .DLL 文件都位于名为“Plugins”的文件夹中，ASP.NET 应用程序在启动时将它们全部加载（通过使用 Assembly.LoadFrom）。

问题是在开发时，这些插件会经常变化（所有功能都在插件中，网站本身只是一个骨架）。因此，我需要一种在 .DLL 文件更改时自动重新启动应用程序的方法。

我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-01T10:14:35.227

如果 plugins 目录在您的 Bin 目录下，则当任何更改时，Web 应用程序将自动重新启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T10:18:15.157

[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类是此类问题的通用解决方案，并且是`HttpRuntime.UnloadAppDomain();`重新启动应用程序的一种方法。我认为需要更多的研究/解释：有很多可能的解决方案。

**编辑**：探测路径。不错的答案。

# outlook - 展望中的降价

> ID：330391
> 
> 赞同：46
> 
> 时间：2008-12-01T09:46:50.633
> 
> 标签：outlook, markdown

因为这不是那种接受wiki的公司，所以我们倾向于通过outlook进行大量的交流。通过它发送代码片段很痛苦。有什么方法可以让我们在这里得到降价的东西，但是在前景中？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-07-01T17:10:51.877

对于未来的访问者：[https ://github.com/mmanela/MarkdownOutlook](https://github.com/mmanela/MarkdownOutlook)

根据他们的维基：

> Outlook 2013 的一个简单插件，它在撰写邮件菜单中添加了一个按钮以启用 Markdown 模式。启用后，您的电子邮件将在发送时从 Markdown 语法转换为 html。
> 
> *   使用 MarkdownSharp 进行降价转换
> *   使用 VSTO 与 Outlook 集成
> *   使用安装程序项目来构建安装程序

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2011-04-06T06:16:16.060

我找不到编辑器，但是您可以在我现在输入的地方写下您的电子邮件，这将在预览窗格中向您显示结果。（包括代码片段）

然后，您可以将预览窗格中的结果复制到 Outlook 中（我也尝试过 Thunderbird，它可以工作）

如果一开始你的代码没有很好地呈现（即颜色编码），那么确保你在“提问”编辑器中进行编辑（而不是在你的答案部分）——这对我来说很重要。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-01T12:41:13.323

由于 Outlook 使用 Word 作为电子邮件编辑器（Outlook 2007、Outlook 2003 可以配置为使用 Word），您可以使用自动更正功能将简单的格式应用于您的电子邮件。`__text__`将触发斜体`**bold**`并将触发粗体。键入时可以自动创建列表`-`或`1.`

另一种选择可能是在发送将 Markdown 格式转换为 (X)HTML 的电子邮件时运行 VBA 宏。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-23T15:29:25.657

我已经开始在我的 Mac 上运行[Markdown Pro](http://www.markdownpro.com)并将预览窗格结果粘贴到消息中。痛苦但可行。

有一个类似的编辑器[MarkdownPad](http://markdownpad.com)用于 Windows，但我没有尝试过。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-15T19:48:08.927

如果你使用[Thunderbird](https://www.mozilla.org/en-US/thunderbird/)，那么你可以使用[markdown-here](https://github.com/adam-p/markdown-here)扩展。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-20T17:40:27.353

我的 Outlook 2007 使用基本的降价 _italic_ 和 *bold*，无需配置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T20:15:52.703

我是在 OS X 上开发的新手，但是——我一直在使用简单但可以工作的[MarkdownLive](https://github.com/rentzsch/markdownlive)来实现相同的目的。我想我一直在 Windows 上使用免费版本的[MarkdownPad](http://markdownpad.com/download.html)，尽管我一直想检查[WriteMonkey](http://writemonkey.com/)中的 MD 功能。展望未来，我几乎肯定会使用[Sublime Text 2](http://www.sublimetext.com/2)。

您可能会查看[Brett Terpstra](http://brettterpstra.com/)正在做什么......怀疑他正在运行 Outlook，但这可能是他已经解决的问题。我还想看看这个[标记的脚本包](http://support.markedapp.com/kb/how-to-tips-and-tricks/marked-bonus-pack-scripts-commands-and-bundles)

嗯。我的工作电子邮件是通过 Outlook 的 Web UI 访问的……我想我在这里的某个地方闻到了 Chrome 扩展程序的味道……

# windows - DNS 问题，nslookup 有效，ping 无效

> ID：330395
> 
> 赞同：62
> 
> 时间：2008-12-01T09:50:16.617
> 
> 标签：windows, dns

我正在我的公寓里设置一个开发服务器。我已经在其上设置了一个 Ubuntu DNS 服务器并添加了区域婚礼列表（只是婚礼列表 - 没有[TLD](http://en.wikipedia.org/wiki/Top-level_domain)。它只是一个内部域。）

这在我的 Ubuntu 笔记本电脑上运行良好。

在我所有的 Windows PC（Vista 和 XP）上，我从命令提示符处得到以下信息：

```
C:\Users\Giles Roadnight>nslookup weddinglist
Server:  UnKnown
Address:  192.168.0.40

Name:    weddinglist
Address:  192.168.0.41

C:\Users\Giles Roadnight>ping 192.168.0.41

Pinging 192.168.0.41 with 32 bytes of data:
Reply from 192.168.0.41: bytes=32 time<1ms TTL=64
Reply from 192.168.0.41: bytes=32 time<1ms TTL=64
Reply from 192.168.0.41: bytes=32 time<1ms TTL=64
Reply from 192.168.0.41: bytes=32 time<1ms TTL=64

Ping statistics for 192.168.0.41:
Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds: Minimum = 0ms, Maximum = 0ms, Average = 0ms

C:\Users\Giles Roadnight>ping weddinglist
Ping request could not find host weddinglist. Please check the name and try again. 
```

我的ipconfig：

```
C:\Users\Giles Roadnight>ipconfig -all

Windows IP Configuration

   Host Name . . . . . . . . . . . . : Giles-Desktop
   Primary Dns Suffix  . . . . . . . :
   Node Type . . . . . . . . . . . . : Hybrid
   IP Routing Enabled. . . . . . . . : No
   WINS Proxy Enabled. . . . . . . . : No

Ethernet adapter Local Area Connection:

   Connection-specific DNS Suffix  . :
   Description . . . . . . . . . . . : Marvell Yukon 88E8001/8003/8010 PCI Gigabit Ethernet Controller
   Physical Address. . . . . . . . . : **-**-**-**-**-**
   DHCP Enabled. . . . . . . . . . . : No
   Autoconfiguration Enabled . . . . : Yes
   Link-local IPv6 Address . . . . . : fe80::f179:680f:f313:5448%8(Preferred)
   IPv4 Address. . . . . . . . . . . : 192.168.0.5(Preferred)
   Subnet Mask . . . . . . . . . . . : 255.255.255.0
   Default Gateway . . . . . . . . . : 192.168.0.1
   DNS Servers . . . . . . . . . . . : 192.168.0.40
   NetBIOS over Tcpip. . . . . . . . : Enabled 
```

我很确定我的 DNS 设置正常，因为 nslookup 正常，但我无法 ping，也无法访问weddinglist 上的网页。

我怎样才能使 ping 在 Windows PC 上工作？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2008-12-01T09:56:52.313

Windows 内部解析器可能会将“.local”添加到域名中，因为其中没有点。 `nslookup`不会那样做。

要验证这种可能性，请在您的客户端计算机上安装“Wireshark”（以前称为 Ethereal），并在运行`ping`命令时观察任何离开它的 DNS 请求数据包。

* * *

好的，在我自己的 XP 机器上的进一步调查显示，对于单标签名称（即“foo”或“foo.”），系统根本不使用 DNS，而是使用 NBNS（NetBios 名称服务）。

使用在[http://www.chicagotech.net/netforums/viewtopic.php?t=1476](http://www.chicagotech.net/netforums/viewtopic.php?t=1476)找到的提示，我发现我可以通过将单个条目读取为“。”来强制对单个标签域进行 DNS 查找。*在“高级 TCP/IP 设置*”对话框的“*附加这些 DNS 后缀（按顺序）* ”中

 ** * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-21T01:43:14.663

我在使用多标签名称时偶尔会遇到这个问题，即 test.internal

我的解决方案是在我的 Windows 7 机器上停止/启动 dnscache。以管理员身份打开控制台并输入

```
net stop dnscache
net start dnscache 
```

然后叹了口气，想办法让 Mac 作为你的主要桌面。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-06T06:33:12.530

我的家庭服务器上运行的 IIS 也有同样的问题，在客户端机器上，一个命令`ipconfig /flushdns`通常可以解决问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-30T01:04:55.573

我遇到过同样的问题。正如其他答案所指出的，ping 和 nslookup 使用不同的机制来查找 ip。

您可能正在尝试 ping 不在同一域中的计算机。当您 ping 服务器的完全限定名称时，这应该可以工作。

**nslookup 工作：**

```
PS C:\Users\Administrator> nslookup nuget
Server:  ad-01.docs.com
Address:  192.168.10.20

Name:    nuget.docs.com
Address:  192.168.10.17 
```

**Ping 失败：**

```
PS C:\Users\Administrator> ping nuget
Ping request could not find host nuget. Please check the name and try again. 
```

**Ping 工作，使用 FQDN：**

```
PS C:\Users\Administrator> ping nuget.docs.com

Pinging nuget.docs.com [192.168.70.17] with 32 bytes of data:
Reply from 192.168.10.17: bytes=32 time=1ms TTL=127
Reply from 192.168.10.17: bytes=32 time=2ms TTL=127
Reply from 192.168.10.17: bytes=32 time=2ms TTL=127
Reply from 192.168.10.17: bytes=32 time=2ms TTL=127

Ping statistics for 192.168.10.17:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 1ms, Maximum = 2ms, Average = 1ms 
```

* * *

## 要解决此问题，您需要更改机器的 DNS 设置并将 DNS 后缀添加到查找中。

1.  控制面板\网络和 Internet\网络连接
2.  网络适​​配器 -> 属性
3.  IPV4 -> 属性
4.  常规选项卡 -> 高级
5.  DNS 选项卡
6.  选择“附加这些 DNS 后缀（按顺序）”
7.  添加所需的域名
8.  禁用，然后启用您的网络适配器（不要在 VM 上执行此操作，您将失去连接，而是尝试 'ipconfig /renew'）

![高级 TCP/IP 设置](https://i.stack.imgur.com/TP9ga.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-16T07:33:40.630

我认为可以关闭此行为，但 Window 的在线帮助不是很清楚：

> 如果禁用 TCP/IP 上的 NetBIOS，则不能使用基于广播的 NetBIOS 名称解析将计算机名称解析为同一网段上计算机的 IP 地址。如果您的计算机位于同一网段，并且 TCP/IP 上的 NetBIOS 已禁用，则必须安装 DNS 服务器并让计算机注册 DNS（或手动配置 DNS 记录）或在本地 Hosts 文件中为每个计算机配置条目计算机。

在 Windows XP 中，有一个复选框：

高级 TCP/IP 设置

[]启用LMHOSTS查找

还有一本书详细介绍了这一点，“使用 TCP/IP 连接个人计算机：构建 TCP/IP 网络（O'Reilly 旧书）”。不幸的是，我无法查找它，因为我不久前处理了我的副本。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-01T09:58:24.930

你的hosts文件里有*weddinglist*的条目吗？您可以在以下位置找到它：

```
C:\WINDOWS\system32\drivers\etc 
```

`nslookup`总是使用 DNS，而 ping 也使用其他方法来查找主机名。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-18T04:53:27.400

我在 windows Server 2003 R2 EE 中发现了一个小错误。你知道当你在网卡（网络连接）中指定你的IP地址时，windows会告诉你，如果你不指定首选DNS服务器，它会放他自己的ip，因为它是DNS服务器？好吧，它没有那样做...

我解决了手动编写 dns 地址的问题，而不是让 windows 为我做这件事。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-14T09:36:26.290

尝试 ipconfig /displaydns 并查找weddinglist。如果它被缓存为“名称不存在”（可能是因为之前的间歇性查找失败），您可以使用 ipconfig /flushdns 刷新缓存。

nslookup 不使用缓存，而是直接查询 DNS 服务器。

它对我有用..

来自[https://superuser.com/a/507892](https://superuser.com/a/507892)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-01-04T21:08:51.357

如果您可以 ping FQDN，请查看如何设置 PC 的 DNS 传递。

如果在 TCP/IP 高级 DNS 设置中选中附加主要和连接特定 DNS 后缀，则 MS ping 将自动使用客户端 PC 的 FQDN 的 Winsock API。如果主机在另一个域中，客户端必须执行 DNS 传递。

在 XP TCP/IP 高级属性 DNS 下，确保检查附加父后缀，以便 ping 请求遍历域返回父。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-20T00:58:28.760

仅供参考 - 在过去的 3 个小时里，我一直在努力解决这个问题。尝试了一切，刷新DNS，使用代理，使用netsh重置目录并清除路由。没有任何效果，所以我决定尝试 Windows 还原，我使用 Windows cd -> 修复 -> 系统还原并成功了！在网上找不到任何解决方案，所以我想把它贴出来

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-10T19:59:48.930

我知道这不是您的具体问题，但是当我在网络适配器设置中配置静态 IP 地址并忘记输入“默认网关”时，我遇到了相同的症状。

将该字段留空，网络图标显示 Internet 连接，我可以 ping 内部服务器但不能 ping 外部服务器，所以我认为这是 DNS 问题。NSLookup 仍然有效，但当然，ping 无法找到服务器（再次，似乎是 DNS 问题。）无论如何，还有一件事要检查。=P

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-28T08:35:07.430

我认为问题可能是由于 NAT。通常，DNS 客户端通过 UDP 发出请求。但是当 DNS 服务器位于 NAT 后面时，UDP 请求将不起作用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-11T16:29:24.877

我也遇到了这个问题。没有 Windows 应用程序（Chrome 除外）可以访问互联网。我发现它是 LAN 上的重复 IP。我更改了本地 IP，包括 ping 在内的所有内容都重新开始工作。

我发现了问题

```
IPCONFIG /ALL 
```

它列出了

> IPv4 地址。. . . . . . . . . . ：10.10.0.20（重复）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-12T23:52:54.377

我在加入本地 AD 域的 Server 2012 R2 VM 上也遇到了这个问题。我最终通过将虚拟机从域中移除并重新加入来解决了这个问题。

# sql - T-SQL：如何使单元格值唯一？

> ID：330405
> 
> 赞同：2
> 
> 时间：2008-12-01T09:53:48.060
> 
> 标签：sql, sql-server, tsql

如果我有一个表格，其中**列中的单元格不应具有相同的值**，我该如何检查并更新？（我知道我可以在设置中设置约束，但我不想这样做。）

假设列名称为*唯一哈希名*并包含

```
彼得
彼得
彼得
戴夫
戴夫

```

等等。我希望将其转换为：

```
彼得
彼得1
彼得2
戴夫
戴夫1

```

用于 SQL Server 的 T-SQL 是什么？

**更新**：为了清楚起见，我们将表格称为“Persons”和我想要唯一的单元格“UniqueName”。你能不能让它成为一个 SELECT 语句，所以我可以在更新之前测试结果。我正在使用**SQL Server 2005 及更高版本**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T12:34:33.087

编辑：我已更改查询以使用您的字段名称，并添加了一个“仅选择”查询供您预览。

这实际上很容易做到......只需将 ROW_NUMBER() 与 PARTITION 子句一起使用：

```
UPDATE Persons SET UniqueName = temp.DeDupded FROM
    (SELECT ID,
        CASE WHEN ROW_NUMBER() OVER
            (PARTITION BY UniqueName ORDER BY UniqueName) = 1 THEN UniqueName
        ELSE UniqueName + CONVERT(VARCHAR, ROW_NUMBER()
            OVER (PARTITION BY UniqueName ORDER BY UniqueName)-1) END AS DeDupded
    FROM Persons) temp
WHERE Persons.ID = temp.ID 
```

如果你想要一个“仅限选择”，那么你去：

```
SELECT ID,
    CASE WHEN ROW_NUMBER() OVER
        (PARTITION BY UniqueName ORDER BY UniqueName) = 1 THEN UniqueName
    ELSE UniqueName + CONVERT(VARCHAR, ROW_NUMBER()
        OVER (PARTITION BY UniqueName ORDER BY UniqueName)-1) END AS DeDupded
FROM Persons 
```

* * *

再次编辑：如果您正在寻找 SQL Server 2000 解决方案...

```
CREATE TABLE #Persons ( ID INT IDENTITY(1, 1), UniqueName VARCHAR(100) )

INSERT INTO #Persons VALUES ('Bob')
INSERT INTO #Persons VALUES ('Bob')
INSERT INTO #Persons VALUES ('Bob')
INSERT INTO #Persons VALUES ('John')
INSERT INTO #Persons VALUES ('John')

SELECT
    ID,
    CASE WHEN Position = 0 THEN UniqueName
        ELSE UniqueName + (CONVERT(VARCHAR, Position))
    END AS UniqueName
FROM
    (SELECT
        ID,
        UniqueName,
        (SELECT COUNT(*) FROM #Persons p2 WHERE
            p1.UniqueName = p2.UniqueName AND p1.ID > p2.ID) AS Position
    FROM
        #Persons p1) _temp

DROP TABLE #Persons 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-08T16:49:18.467

这感觉像是一个非常清晰的[触发器](http://doc.ddart.net/mssql/sql70/create_8.htm)用例（插入、更新）。

# javascript - 我可以在任何浏览器上禁用 SOP（同源策略）进行开发吗？

> ID：330427
> 
> 赞同：33
> 
> 时间：2008-12-01T10:11:28.057
> 
> 标签：javascript, soap, wsdl, same-origin-policy

我想在我的 Windows 机器上开发 JavaScript。你知道我可以关闭*同源策略*以便在本地开发的浏览器吗？Firefox 将是最佳选择。

或者，如果您知道我可以将其用于 SOAP/WSDL 站点的代理，那也很棒。

我正在尝试使用[JavaSCript SOAP Client](http://www.codeplex.com/JavaScriptSoapClient)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-05-05T07:44:37.813

**更新 6/2012：这在撰写本文时曾经有效，但显然不再有效。对不起。**

在 Firefox（可能也适用于其他基于 Gecko 的浏览器）中，您可以使用以下 JavaScript 片段来允许跨域调用：

```
if (navigator.userAgent.indexOf("Firefox") != -1) {
    try {
        netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
    } 
    catch (e) {
        alert("Permission UniversalBrowserRead denied -- not running Mozilla?");
    }
} 
```

看起来在 Chromium 问题跟踪器中创建了[一个问题](https://code.google.com/p/chromium/issues/detail?id=6449)以实现相同的功能，因此您可以尝试使用参数启动 Chrome `--disable-web-security`。我不知道它到底是在哪个版本上运行的，但至少诺基亚的[WRT 工具](http://developer.symbian.org/wiki/index.php/Wrttools)附带了一个 Chrome 安装，它实际上允许从其他站点加载内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-07-05T01:54:27.133

不幸的是，使用以下内容：

```
netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"); 
```

已在 Firefox 5 中禁用。

[https://bugzilla.mozilla.org/show_bug.cgi?id=667312](https://bugzilla.mozilla.org/show_bug.cgi?id=667312)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-08-30T00:19:12.937

使用 Chromium 13.07，您可以在禁用安全性的情况下启动它：

/usr/bin/chromium-browser --disable-web-security

那是在 Ubuntu 11 上，但将位置更改为您的系统。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-03T19:07:01.577

在本地服务器上创建一个调用远程服务器的页面，并与远程服务器一样回答。

例如，javascript 为 JSON 调用本地服务器。本地服务器为该 JSON 调用远程服务器。本地服务器从远程服务器接收 JSON 并将其发送到 javascript。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-03T20:21:36.640

当谈到在生产中绕过相同的原产地政策时，所有给定的答案都是好的答案。

对于开发，没有方便的方法来“禁用”此安全检查。有解决方法（请参阅其他答案）或黑客（您可以使用 Greasemonkey 来包装 JavaScript 并使用他们的 GM_xmlhttprequest 作为临时措施），但没有办法像您描述的那样实际“关闭它”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-31T08:29:04.600

我在 mac 上运行这个命令，当我使用 google chrome 运行我的项目时它对我有效。

```
open -a Google\ Chrome --args --disable-web-security --user-data-dir 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-01T10:19:25.467

> Firefox 将是最佳选择。

如果您可以使用 Internet Explorer，则可以使用 .hta 应用程序

[http://msdn.microsoft.com/en-us/library/ms536496(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms536496(VS.85).aspx)

（这是 Selenium 测试自动化工具处理问题的方式之一）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-11-25T16:43:30.523

我对此没有真正的经验，但 FireFox 3.5 根据[W3C Cross-Origin Resource Sharing Draft](http://dev.w3.org/2006/waf/access-control/)允许 Cross-Site JS 。

见：[https ://developer.mozilla.org/En/HTTP_access_control](https://developer.mozilla.org/En/HTTP_access_control)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-05T17:00:47.687

在 Chrome (& Chromium) 48 及更高版本中，您应该`--user-data-dir`像这样添加标志：

```
chromium-browser --disable-web-security --user-data-dir 
```

它有效。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-03-05T17:51:58.733

您还可以通过 ssh 将本地端口重定向到远程服务器和端口。

# c# - 如何处理 WPF 中数据绑定菜单中的单击事件

> ID：330444
> 
> 赞同：11
> 
> 时间：2008-12-01T10:20:11.800
> 
> 标签：c#, wpf, data-binding

我有一个 MenuItem，它的 ItemsSource 数据绑定到一个简单的字符串列表，它显示正确，但我正在努力了解如何为它们处理点击事件！

这是一个演示它的简单应用程序：

```
<Window x:Class="WPFDataBoundMenu.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="300">
<Grid>
    <Menu>
        <MenuItem Header="File" Click="MenuItem_Click" />
        <MenuItem Header="My Items" ItemsSource="{Binding Path=MyMenuItems}" />
    </Menu>
</Grid> 
```

```
using System.Collections.Generic;
using System.Windows;

namespace WPFDataBoundMenu
{
    /// <summary>
    /// Interaction logic for Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        public List<string> MyMenuItems { get; set;}

        public Window1()
        {
            InitializeComponent();
            MyMenuItems = new List<string> { "Item 1", "Item 2", "Item 3" };
            DataContext = this;
        }

        private void MenuItem_Click(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("how do i handle the other clicks?!");
        }
    }
} 
```

非常感谢！

克里斯。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-01T11:30:56.930

```
<MenuItem Header="My Items" ItemsSource="{Binding Path=MyMenuItems}" Click="DataBoundMenuItem_Click" /> 
```

后面的代码..

```
private void DataBoundMenuItem_Click(object sender, RoutedEventArgs e)
{
   MenuItem obMenuItem = e.OriginalSource as MenuItem;
   MessageBox.Show( String.Format("{0} just said Hi!", obMenuItem.Header));
} 
```

事件将冒泡到公共处理程序。然后，您可以使用 Header 文本或更好的 DataContext 属性来根据需要进行切换和操作

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-01T11:24:16.770

您可以让每个菜单项执行相同的命令，从而集中处理执行。如果您需要区分实际对象实例之外的菜单项，您也可以绑定命令参数：

```
<MenuItem Header="My Items" ItemsSource="{Binding Path=MyMenuItems}">
    <MenuItem.ItemContainerStyle>
        <Style TargetType="MenuItem">
            <Setter Property="Command" Value="{x:Static local:MyCommands.MyCommand}"/>
            <Setter Property="CommandParameter" Value="{Binding SomeProperty}"/>
        </Style>
    </MenuItem.ItemContainerStyle>
</MenuItem> 
```

`SomeProperty`假定为`MyMenuItems`集合中每个项目的属性。因此，您的命令执行处理程序将接收`SomeProperty`单击的特定菜单项的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T10:17:56.497

恕我直言，更通用的事件处理程序，能够从 itemssource 获取项目

```
private void DataBoundMenuItem_Click(object sender, RoutedEventArgs e)
{
    // get menu item with ItemsSource bound
    var myItemsMenuItems = sender as MenuItem; 

    // get submenu clicked item constructed from MyMenuItems collection
    var myItemsMenuSubItem = e.OriginalSource as MenuItem; 

    // get underlying MyMenuItems collection item
    var o = myItemsMenuItems
        .ItemContainerGenerator
        .ItemFromContainer(myItemsMenuSubItem);
    // convert to MyMenuItems type ... in our case string
    var itemObj = o as (string);

    // TODO some processing
} 
```

希望对smbd有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-18T13:54:40.280

如果您想要一种更简单的方式来访问菜单项内容：

```
<MenuItem Header="My Items" ItemsSource="{Binding Path=MyMenuItems}" Click="MenuItem_Click">
    <MenuItem.ItemContainerStyle>
        <Style TargetType="MenuItem">
            <Setter Property="CommandParameter" Value="{Binding}" />
        </Style>
    </MenuItem.ItemContainerStyle>
</MenuItem> 
```

鳕鱼后面：

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
{
   var item = ((MenuItem)e.OriginalSource).CommandParameter;   
} 
```

# c# - 将 .cs 转换为 .dll

> ID：330447
> 
> 赞同：6
> 
> 时间：2008-12-01T10:22:42.260
> 
> 标签：c#, dll

如何将 .cs 文件编译成 DLL？

我的项目名称是 WA。在`bin`编译后的文件夹中，我发现：

*   `WA.exe`
*   `WA.vshost.exe`
*   `WA.pdb`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-01T10:25:12.960

你必须编译它：

```
csc /t:library source.cs  -> source.dll 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T10:25:25.267

你在使用 Visual Studio 吗？

如果你在 VS 中创建一个类库项目，添加你的 .cs 文件然后编译项目，输出将是一个 .dll 文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-01T10:24:43.817

您使用编译器。Csc.exe 随 .NET 框架一起提供。

检查此链接：http: [//msdn.microsoft.com/en-us/library/78f4aasd.aspx](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)

如果您希望开发过程更简单，也可以使用 Visual Studio 之类的 IDE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T10:26:05.500

当您在 Visual Studio 中运行构建时，它会自动为您创建。检查项目文件夹中的 bin 文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-08-29T08:49:04.870

供您参考，有两种名为“托管”和“非托管”的 DLL 文件。托管类型是您可以使用并添加到 Visual Studio IDE 中的引用的类型。但是，如果要将每个类分别转换为 Dll，可以使用新的 windows 应用程序-> 类库。调试并运行后，您可以在源目标中找到 DLL 文件。试试看。PS：通常你被迫在一个 DLL 文件中使用多个类。

# asp.net - ASP.NET ListView 通过复选框选择和突出显示行

> ID：330453
> 
> 赞同：1
> 
> 时间：2008-12-01T10:25:28.123
> 
> 标签：asp.net, .net-3.5, listview

我试图让一个 ASP.NET 3.5 ListView 控件通过第一列中显示的复选框来选择和突出显示行。如果我使用 asp:LinkBut​​ton 而不是复选框，则通过 LinkBut​​ton 的属性 CommandName="Select" 自动支持行选择。我如何使用复选框来做到这一点？一旦我设法做到这一点，如何在按下表单上的提交按钮时获得选定的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T11:06:55.183

我不确定我是否遵循您想要实现的目标，您是否希望在选中复选框时进行视觉更改？如果是这样，最好的选择是使用 jQuery 并附加到复选框的 onchange 事件。

然后，当您回发表单时，您可以遍历 ListView 中的项目并找到复选框，检查其选中状态，然后执行您想要的操作：

```
foreach(var item in listView1.Items){
  var checkbox = (CheckBox)item.FindControl("checkBox1");
  if(checkbox.Checked) // do stuff
} 
```

# perl - 如何从 Perl 确定本地机器的 IP 地址？

> ID：330458
> 
> 赞同：13
> 
> 时间：2008-12-01T10:27:37.807
> 
> 标签：perl, networking

是否有一种干净且独立于操作系统的方法来从 Perl 确定本地计算机的 IP 地址？

到目前为止，我找到了以下解决方案：

*   解析ifconfig和ipconfig的输出（硬，不同的windows版本有不同的ipconfig输出）

*   建立与已知 IP 的网络连接并检查套接字的本地 IP 地址（如果我无法建立连接将无法工作，并且只会确定一个 IP 地址）

有更好的建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-01T11:24:09.487

您还有[其他一些选择](http://www.perlmonks.org/?node_id=53660)，包括“建立与已知 IP 的网络连接并检查套接字的本地 IP 地址”的解决方案。

但是，在这种情况下（建立网络连接），该文章指出：

> 没有主机的 IP 地址这样的东西。
> 网络接口有 IP 地址，而不是主机，单个网络接口可以有多个（虚拟）IP 地址。操作系统的路由子系统决定使用哪个网络接口和 IP 地址连接到远程机器。
> 
> 如果你的机器只有一个外网接口，而这个接口只有一个IP地址，那么这个IP地址就是通常所说的机器地址，这是不准确的。
> 例如，如果机器通过虚拟接口连接到 VPN，它将使用该接口的 IP 地址连接到 VPN 上的另一台机器，而不是外部 IP 地址

在其他解决方案中：[`Sys::Hostname`](https://perldoc.perl.org/Sys::Hostname)- 如果它提供可解析的主机名，则可以使用。

```
use Sys::Hostname;
use Socket;
my $addr = inet_ntoa((gethostbyname(hostname))[4]);
print "$addr\n"; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-12-01T12:13:53.457

[Net::Address::IP::Local](http://search.cpan.org/perldoc?Net::Address::IP::Local)看起来很有希望。

```
use Net::Address::IP::Local;

# Get the local system's IP address that is "en route" to "the internet":
my $address      = Net::Address::IP::Local->public; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-14T14:47:07.867

就我而言，我需要一个没有任何非核心依赖的解决方案。在研究 Net::Address::IP::Local 中的代码后，我想出了这个：

```
#!/usr/bin/env perl

use strict;
use warnings;

use IO::Socket::INET;

my $local_ip_address = get_local_ip_address();

print "$local_ip_address\n";

# This idea was stolen from Net::Address::IP::Local::connected_to()
sub get_local_ip_address {
    my $socket = IO::Socket::INET->new(
        Proto       => 'udp',
        PeerAddr    => '198.41.0.4', # a.root-servers.net
        PeerPort    => '53', # DNS
    );

    # A side-effect of making a socket connection is that our IP address
    # is available from the 'sockhost' method
    my $local_ip_address = $socket->sockhost;

    return $local_ip_address;
} 
```

`get_local_ip_address()`应该返回与 相同的字符串`Net::Address::IP::Local->public_ipv4`。

如果需要，您可以将`PeerAddr`属性（在 IO::Socket::INET 的构造函数的参数中）更改为本地 DNS 服务器。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-10T14:52:41.840

要检索*所有*接口的 IP 地址，请使用[IO::Interface::Simple](https://metacpan.org/module/IO::Interface::Simple)：

```
perl -MIO::Interface::Simple '-Esay $_->address for grep { $_->is_running && defined $_->address } IO::Interface::Simple->interfaces' 
```

如果您对 127.0.0.1（环回）不感兴趣，您可以过滤`$_->is_loopback`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-11-09T09:47:20.743

Perldoc[在其常见问题解答（“perlfaq9”）中对此问题有一个答案](http://perldoc.perl.org/perlfaq9.html#How-do-I-find-out-my-hostname%2c-domainname%2c-or-IP-address%3f)- 使用不同的模块（它们是标准库的一部分）甚至是内置函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T16:16:08.070

我在 Linux 和 Solaris 上使用[IO::Interface](http://search.cpan.org/perldoc?IO::Interface)取得了很好的成功，我认为它甚至可以在 AIX 上运行，但我无法确定。在 search.cpan.org、rt.cpan.org 和 ActiveState 的各种站点上四处寻找，看起来 IO::Interface 可能在 Windows 上遇到构建问题。我想知道它是否可用的唯一方法是在 PPM 中搜索 io-interface 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-01T10:44:03.200

使用 WMI？

[提取 IP 地址的示例](http://www.computerperformance.co.uk/ezine/ezine141.htm)（在 Powershell 中，但很清楚发生了什么）

[从 Perl 访问 WMI 的示例](http://talhatariq.wordpress.com/2006/06/09/a-perl-wmi-script-for-fetching-local-remote-os-info/)（不是相同的 WMI 函数，但该过程还是相当清晰的）

编辑：在 Google 代码搜索中搜索 Networkadapterconfiguration 和语言“perl”后：

[示例看起来几乎是您需要的](http://www.google.com/codesearch?hl=en&q=networkadapterconfiguration+lang:perl+show:S-o7TNXPu0g:7J-KcLWeJok:S-o7TNXPu0g&sa=N&cd=3&ct=rc&cs_p=cvs+:pserver:anonymous%40ocsinventory.cvs.sourceforge.net:/cvsroot/ocsinventory+.&cs_f=unified_unix_agent/lib/Ocsinventory/Agent/Backend/OS/Win32/Networks.pm)

EDIT2：事实上，OCS 代码似乎包含大多数平台的代码来执行此操作，因此虽然可能没有一组代码可以执行此操作，但您可以重用他们的想法。不过，它是 GPL 的。

例如，[这里是 Solaris 代码](http://www.google.com/codesearch?hl=en&q=show:DmOgK1BEY5s:FzZZCRcA3DU:DmOgK1BEY5s&sa=N&ct=rd&cs_p=cvs+:pserver:anonymous%40ocsinventory.cvs.sourceforge.net:/cvsroot/ocsinventory+.&cs_f=unified_unix_agent/lib/Ocsinventory/Agent/Backend/OS/Solaris.pm)。其他位包括 BSD、Linux、MacOS ......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-01-01T19:58:44.627

[在 Perl 中获取网络接口的 IP 地址，无需额外的模块使用和“ifconfig”输出解析](http://snipplr.com/view/46170/the-most-reliable-and-correct-method-to-get-network-interface-address-in-linux-using-perl/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-11-15T15:16:14.433

Net::Address::IP::Local 工作正常，但由于原始海报要求所有本地地址，我认为这个更好：

[http://www.perlmonks.org/?node_id=166951](http://www.perlmonks.org/?node_id=166951)

使用 ActivePerl for Windows XP 对我来说效果很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-02-25T19:32:56.700

对于我使用的窗户

```
foreach (split(/\r?\n/,`netstat -r`))
{
  next unless /^\s+0.0.0.0/;
  @S = split(/\s+/); 
  # $S[3] = Default Gateway
  # $S[4] = Main IP
} 
```

以 0.0.0.0 开头的第一行是默认网关。可能有多个网关。以 255.255.255.255 开头的行也很有用。netstat -r 和 route print 是一样的。

可以适应 OSX，Linux 没那么有用。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-01-29T08:01:05.343

我使用了这些 Linux 命令的组合，因此不依赖任何 perl 模块。

```
hostname -i
hostname -I
ls /sys/class/net
ip -f inet addr show eth0| grep -Po 'inet \K[\d.]+' 
```

# iphone - 如何获取电池状态？

> ID：330461
> 
> 赞同：16
> 
> 时间：2008-12-01T10:30:00.483
> 
> 标签：iphone, cocoa-touch

如何获取 iPhone 上的电池状态？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-04-09T06:49:46.713

```
UIDevice *myDevice = [UIDevice currentDevice];
[myDevice setBatteryMonitoringEnabled:YES];
float batLeft = [myDevice batteryLevel];
int i=[myDevice batteryState];

int batinfo=(batLeft*100);

NSLog(@"Battry Level is :%d and Battery Status is :%d",batinfo,i);

switch (i)
{
    case UIDeviceBatteryStateUnplugged:
    {
        [BCStatus setText:NSLocalizedString(@"UnpluggedKey", @"")];
        break;
    }
    case UIDeviceBatteryStateCharging:
    {
        [BCStatus setText:NSLocalizedString(@"ChargingKey", @"")];
        break;
    }
    case UIDeviceBatteryStateFull:
    {
        [BCStatus setText:NSLocalizedString(@"FullKey", @"")];
        break;
    }
    default:
    {
        [BCStatus setText:NSLocalizedString(@"UnknownKey", @"")];
        break;
    }
} 
```

BCStatus 是 uilabel。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T11:24:12.497

Iphone SDK 3.0 beta 支持这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-20T05:49:34.263

上面的答案非常好，但它们都在 Obj-C 中，我已经将这些与其他示例一起用于在 上执行相同的任务`MonoTouch`，所以我将我的代码放在这里以防万一有人需要它：

```
try
{
    UIDevice.CurrentDevice.BatteryMonitoringEnabled = true;
    _Battery.Level = (int)(UIDevice.CurrentDevice.BatteryLevel * IOSBatteryLevelScalingFactor);
    _Battery.State = UIDevice.CurrentDevice.BatteryState;
}
catch (Exception e)
{
    ExceptionHandler.HandleException(e, "BatteryState.Update");
    throw new BatteryUpdateException();
}
finally
{
    UIDevice.CurrentDevice.BatteryMonitoringEnabled = false;
} 
```

我的博客上也有一篇完整的帖子，在[这里提供所有详细信息](http://www.hasaltaiar.com.au/reading-battery-level-and-status-in-ios-using-monotouch/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:57:42.673

这是我将字符串用作快速实用方法的方法，请注意，您必须启用电池监控才能获得一个值，然后如果您不想获得通知（显然在那里可以获得一些效率，因为它们给您可以将其关闭）然后您应该在之后再次将其关闭（就像我在此功能中所做的那样）：

```
NSString *statusString(void)
{
    UIDevice *device = [UIDevice currentDevice];
    NSString *batteryStateString = nil;
    switch(device.batteryState)
    {
        case UIDeviceBatteryStateUnplugged: batteryStateString = @"Unplugged"; break;
        case UIDeviceBatteryStateCharging: batteryStateString = @"Charging"; break;
        case UIDeviceBatteryStateFull: batteryStateString = @"Full"; break;
        default: batteryStateString = @"Unknown"; break;
    }

    [device setBatteryMonitoringEnabled:YES];
    NSString *statusString = [NSString stringWithFormat:@"Battery Level - %d%%, Battery State - %@",
                              (int)round(device.batteryLevel * 100), batteryStateString];
    [device setBatteryMonitoringEnabled:NO];
    return statusString;
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-09-13T20:00:55.990

现在 3.1 SDK 已发布，请查看 UIDevice 文档中的获取设备电池状态部分。它有很多电池*特性。

# c# - c#为什么不能将可为空的int赋值为null

> ID：330471
> 
> 赞同：141
> 
> 时间：2008-12-01T10:36:30.923
> 
> 标签：c#, nullable

解释为什么不能为可为空的 int 分配 null 的值，例如

```
int? accom = (accomStr == "noval" ? null  : Convert.ToInt32(accomStr)); 
```

那个代码有什么问题？

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2008-12-01T10:41:02.303

问题不在于 null 不能分配给 int 吗？问题是三元运算符返回的两个值必须是同一类型，或者一个必须隐式转换为另一个。在这种情况下，null 不能隐式转换为 int，反之亦然，因此需要显式转换。试试这个：

```
int? accom = (accomStr == "noval" ? (int?)null : Convert.ToInt32(accomStr)); 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2008-12-01T10:44:11.877

Harry S 说的完全正确，但是

```
int? accom = (accomStr == "noval" ? null : (int?)Convert.ToInt32(accomStr)); 
```

也可以解决问题。（我们 Resharper 用户总是可以在人群中发现彼此......）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-09-24T06:21:45.400

另一种选择是使用

```
int? accom = (accomStr == "noval" ? Convert.DBNull : Convert.ToInt32(accomStr); 
```

我最喜欢这个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T11:47:46.357

同样，我做了很长时间：

```
myLongVariable = (!string.IsNullOrEmpty(cbLong.SelectedItem.Value)) ? Convert.ToInt64(cbLong.SelectedItem.Value) : (long?)null; 
```

# sql-server - 与 SQL Server 2000 相比，SQL Server 2005/2008 的主要优势是什么？

> ID：330474
> 
> 赞同：3
> 
> 时间：2008-12-01T10:38:52.307
> 
> 标签：sql-server, migration

我们的一位客户正在升级他们的服务器，因为旧机器无法再处理数据库的负载。在过去的 6 年中，他们一直在使用 sql 2000，并且数据库已经增长到可以容纳几 GB 的数据。

**是否值得升级到 2005 年或 2008 年？与 2000 相比，新版本的主要优势是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T10:48:51.303

除了 Galwegian 提到的 CLR 集成之外，对我来说主要的优点是：

*   2005 年有更好的 XML 支持
*   [常用表表达式](http://msdn.microsoft.com/en-us/library/ms190766(SQL.90).aspx)

另一个需要注意的区别是，您在 Sql 2005 中使用的不是 DTS 包，而是使用[Integration Services](http://www.microsoft.com/sqlserver/2005/en/us/integration-services.aspx)，虽然类似但完全不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T10:55:41.603

根据您使用的 SQL Server 版本，SQL 2005 的硬件限制/上限比 SQL2k 中的相应版本要少。

例如，SQL 2000 标准版不会使用超过 2Gb（实际上是 1.7Gb），而 SQL 2005 标准版没有上限（最多允许 OS 最大值）。

请参阅：http: [//msdn.microsoft.com/en-us/library/aa933149 (SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa933149(SQL.80).aspx)

...和...

[http://www.microsoft.com/sqlserver/2005/en/us/compare-features.aspx](http://www.microsoft.com/sqlserver/2005/en/us/compare-features.aspx)

所以：如果您正在运行标准版 + 您的 SQL Server 2000 实例当前使用 ~1.6Gb RAM + 您的服务器有 3Gb 或更多物理 RAM，那么可能值得升级只是因为内存使用量增加带来的好处......（更多缓存表数据、索引、计划等）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-01T11:04:59.790

如果您打算从 SqlServer 2000 升级，我会跳过 2005 年直接转到 SqlServer 2008

它具有 2005 的所有功能以及一些附加功能（例如，将表变量作为参数传递给存储过程的选项、新的日期类型、空间数据处理等）

您可以参考[MS SQL Server 2008 相对于 MS SQL Server 2005 的优势](https://stackoverflow.com/questions/198478/advantages-of-ms-sql-server-2008-over-ms-sql-server-2005)问题以获取完整的功能列表

**编辑**

我可以看到问题已更新，现在 SqlServer 2008 已包含在问题中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-01T12:20:16.207

MS SQL 2005 和 2008 有很多大肆宣传的技术，其中之一就是能够将 CLR 代码填充到存储过程中。*不要这样做*！

另一个“功能”是再次将您的数据库公开为 WebServices 的能力；不要这样做！

第三个特性是能够再次使用来自数据库和应用层的“通知”；*不要这样做*......！

您的数据库是一个*存储桶*，它应该“存储数据”，句号。微软在 2005 年和 2008 年推出的许多功能我确信他们确实做到了，因为他们想使 O/RM 库的使用复杂化，从而抽象出实际的数据库供应商，以便人们可以根据需要更改数据库。然后通过添加许多“愚蠢的功能”，这些“愚蠢的功能”违背了我们自 70 年代以来了解的关于数据库的每一个最佳实践，他们设法创建了一个新的锁定，通过让人们使用他们真正不应该使用的东西来消除供应商锁定随便用...

其中一部分可能在 2005 年和 2008 年有很多很酷的功能（就像这里提到的；支持！）以及优化、错误修复等。但要*小心*，不要开始使用会影响您的应用程序并使其无法使用最佳实践并锁定您的东西...... :(

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-01T10:40:30.587

老实说，主要好处是[CLR 集成](http://blogs.msdn.com/sqlclr/)- 它允许您在编码数据库的方式上更加灵活，让您可以选择在过程中包含过程 C# 或 VB.NET，而不是基于集合的 T-SQL。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T10:47:52.740

有一些有用的新功能，例如服务代理，但在性能方面，您不会看到从 2000 年到 2005 年的巨大改进。a) 调整数据库和 b) 投资会更好在新硬件中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-01T11:06:22.300

用户和模式的分离是另一个好处。在 SQL 2005 中，如果您希望通过逻辑/功能区域或类似区域而不是数据库中的用户来分离模式，您可以创建诸如“hr”、“sales”、“accounting”、“production”之类的模式，然后创建用户表在各自的架构下。

在 SQL 2000 中，模式名称与表所有者/创建者相同。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-01T11:26:40.323

我认为 Microsoft 不再支持 SQL Server 2000。如果我错了，很快就会...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-01T10:56:28.933

在线索引重建是一个不错的功能。我认为它可能只是企业版中的一个选项。

# c# - 如何在 C# 中创建 ContextMenuStrip 哪些项目是图像？

> ID：330479
> 
> 赞同：1
> 
> 时间：2008-12-01T10:40:10.167
> 
> 标签：c#, drawing, contextmenustrip

我想在 C# 中创建上下文菜单，哪些项目是不同高度和宽度的图像。

我不知道如何解决的主要问题是如何设置菜单项和上下文菜单的宽度和高度。

如果启用了菜单项的自动调整大小，则所有菜单项的高度都相同。如果我禁用菜单项的自动调整大小，那么我无法正确设置上下文菜单的宽度 - 它不尊重菜单项的宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T15:17:16.863

请尝试这种情况：

```
this.toolStripMenuItem2.DisplayStyle = System.Windows.Forms.ToolStripItemDisplayStyle.Image; 
```

# c# - 在保持排序的同时将有序列表保存到数据库的最佳方法

> ID：330482
> 
> 赞同：71
> 
> 时间：2008-12-01T10:40:42.367
> 
> 标签：c#, database, nhibernate, sql-order-by

我想知道是否有人对我在过去几年中多次遇到的问题有很好的解决方案。

我有一个购物车，我的客户明确要求它的订单很重要。所以我需要将订单保存到数据库。

显而易见的方法是简单地插入一些 OrderField，我将在其中将数字 0 分配给 N 并以这种方式对其进行排序。

但是这样做会使重新排序变得更加困难，而且我不知何故觉得这个解决方案有点脆弱，总有一天会回来找我。

（我将 C# 3,5 与 NHibernate 和 SQL Server 2005 一起使用）

谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-27T19:26:08.620

好的，这是我的解决方案，可以让任何发生在这个线程上的人都更容易编程。诀窍是能够在一次更新中更新插入/删除上方或下方的所有订单索引。

在 SQL 查询支持的表中使用数字（整数）列

```
CREATE TABLE myitems (Myitem TEXT, id INTEGER PRIMARY KEY, orderindex NUMERIC); 
```

要删除 orderindex 6 处的项目：

```
DELETE FROM myitems WHERE orderindex=6;    
UPDATE myitems SET orderindex = (orderindex - 1) WHERE orderindex > 6; 
```

要交换两个项目（4 和 7）：

```
UPDATE myitems SET orderindex = 0 WHERE orderindex = 4;
UPDATE myitems SET orderindex = 4 WHERE orderindex = 7;
UPDATE myitems SET orderindex = 7 WHERE orderindex = 0; 
```

ie 0 没有被使用，所以使用它作为一个虚拟对象以避免有一个模棱两可的项目。

在 3 处插入：

```
 UPDATE myitems SET orderindex = (orderindex + 1) WHERE orderindex > 2;
 INSERT INTO myitems (Myitem,orderindex) values ("MytxtitemHere",3) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2011-03-31T18:03:48.797

最好的解决方案是[双向链接列表](http://en.wikipedia.org/wiki/Doubly_linked_list)。O(1) 对于除索引之外的所有操作。除了您想要的项目上的 where 子句之外，没有什么可以快速索引 SQL。

0,10,20 种类型失败。序列列失败。浮动序列列在组移动时失败。

双向链表对于添加、删除、组删除、组添加、组移动是相同的操作。单链表也可以。在我看来，双链接使用 SQL 更好。单链表要求您拥有整个列表。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-12-01T10:45:09.580

FWIW，我认为您建议的方式（即将订单提交到数据库）对于您的问题来说并不是一个糟糕的解决方案。我也认为这可能是最安全/最可靠的方式。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2010-02-19T01:09:17.717

使用链表实现怎么样？有一列将保存下一个项目的值（订单号）。我认为这是迄今为止在两者之间插入订单时最容易使用的。无需重新编号。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-01T10:54:11.573

不幸的是，没有灵丹妙药。如果没有 order by 子句，您无法保证任何`SELECT`语句的顺序。您需要添加列并围绕它进行编程。

我不知道我是否建议在订单序列中添加间隙，具体取决于列表的大小和网站上的点击量，处理逻辑的开销可能会很少（你仍然需要以适应所有间隙都用完的场合）。我会仔细看看这会给你带来什么好处。

对不起，我不能提供更好的东西，希望这有帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-02T18:59:34.870

我根本不会推荐 A、AA、B、BA、BB 方法。确定层次结构涉及很多额外的处理，并且在两者之间插入条目一点也不好玩。

只需添加一个 OrderField，整数。不要使用间隙，因为您必须在下一个中间插入时使用非标准“步骤”，或者您必须先重新同步您的列表，然后添加一个新条目。

有 0...N 很容易重新排序，如果您可以使用 SQL 之外的 Array 方法或 List 方法将集合重新排序为一个整体，然后更新每个条目，或者您可以找出插入的位置，并且相应地在其之后或之前的每个条目+1或-1。

一旦你为它编写了一个小库，它就会变得轻而易举。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-01T11:38:14.013

我只想插入一个订单字段。它是最简单的方法。如果客户可以重新排序字段或者您需要在中间插入，那么只需重写该批次中所有项目的订单字段。

如果您发现由于插入和更新性能不佳而导致此限制，则可以使用 varchar 字段而不是整数。这允许在插入时具有相当高的精度。例如，要在项目“A”和“B”之间插入，您可以插入订购为“AA”的项目。不过，这对于购物车来说几乎可以肯定是矫枉过正。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-08-03T07:19:09.453

在购物车项目之上的抽象级别上，假设 CartOrder（与 Ca​​rtItem 有 1-n），您可以维护一个名为 itemOrder 的字段，它可能只是一个逗号分隔的 cartItem 记录相关的 id(PK) 列表。它将在应用程序层，您需要对其进行解析并相应地安排您的项目模型。这种方法的最大优点是在订单重新洗牌的情况下，可能不会对单个对象进行更改，但是由于订单作为索引字段保留在订单项目表行中，因此您必须为每个对象发出更新命令行更新其索引字段。请让我知道您对这种方法的批评，我很想知道这可能会以何种方式失败。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-21T12:47:51.680

**我像这样务实**地解决了它：

1.  订单在 UI 中定义。

2.  后端收到一个 POST 请求，其中包含列表中每个项目的 ID 和相应的位置。

3.  我开始交易并更新每个 ID 的位置。

**完毕。**

所以订购是昂贵的，但阅读订购的列表是超级便宜的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-01T10:47:59.730

我建议在订单号中保留空白，因此不要使用 1、2、3 等，而是使用 10、20、30 ...在那时候。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-01T11:48:59.030

好吧，我想说的简短答案是：

在 cartcontents 表中创建一个 autoidentity 的主键，然后以正确的自上而下的顺序插入行。然后通过按主键自动标识列的顺序从表中选择，将为您提供相同的列表。通过这样做，您必须删除所有项目并重新插入，以防购物车内容发生变化。（但这仍然是一种非常干净的方法）如果这不可行，那么就像其他人建议的那样使用订单列。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-12-25T19:01:51.033

当我使用`Hibernate`并且需要保存 a 的顺序时`@OneToMany`，我使用 a`Map`而不是 a `List`。

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "rule", cascade = CascadeType.ALL)
@MapKey(name = "position")
@OrderBy("position")
private Map<Integer, RuleAction>    actions             = LazyMap.decorate(new LinkedHashMap<>(), FactoryUtils.instantiateFactory(RuleAction.class, new Class[] { Rule.class }, new Object[] { this })); 
```

在此 Java 示例中，`position`是 的 Integer 属性，`RuleAction`因此以这种方式保持顺序。我猜在 C# 中这看起来很相似。

# vb.net - 触摸屏winforms应用程序的UI组件？

> ID：330485
> 
> 赞同：2
> 
> 时间：2008-12-01T10:42:10.147
> 
> 标签：vb.net, user-interface, controls, touchscreen

我看到了这个问题： [有没有适合触摸屏 Web 应用程序的 UI 组件？](https://stackoverflow.com/questions/134067/are-there-any-decent-ui-components-for-touch-screen-web-applications)并且有完全相同的问题，但我专注于winforms。

我正在开发一个不是主要用于触摸屏的应用程序，但现在我看到越来越多的客户使用触摸屏并希望该应用程序能够更好地支持它。

我想“添加”到 UI，以便例如右键单击组合框（或单击组合框侧面的按钮）打开一个对话框，该对话框可以更轻松地在触摸屏上处理项目的显示和选择。

我想要增强或替换的控件是列表框、组合框和文本框。

我知道自己创建这些控件很容易，但我认为必须有一些标准和经过测试的 UI 在那种环境下运行良好。如果已经存在好的轮子，我不想重新发明轮子并制造一个糟糕的轮子。

总结一下：是否有关于触摸屏的控制指南，那么在哪里？是否有任何我可以通过（或免费的）已经制作好的控件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T11:46:07.117

查到一些资料：

**触摸屏应用交互设计指南** [http://www.sapdesignguild.org/resources/TSDesignGL/INDEX.HTM](http://www.sapdesignguild.org/resources/TSDesignGL/INDEX.HTM)
**pdf-version:**
[http://www.sapdesignguild.org/resources/TSDesignGL/TSDesignGL.pdf](http://www.sapdesignguild.org/resources/TSDesignGL/TSDesignGL.pdf)

**人与交互式信息亭之间的界面**
[http://www.visi.com/~keefner/pdfs/focus1.pdf](http://www.visi.com/~keefner/pdfs/focus1.pdf)

**成功的 Kiosk 应用程序的关键** 一般可以使用一些技巧：http:
[//www.visi.com/~keefner/pdfs/Kiosk-Tips.ppt](http://www.visi.com/~keefner/pdfs/Kiosk-Tips.ppt)

# c# - 将对象集合加入逗号分隔的字符串

> ID：330493
> 
> 赞同：30
> 
> 时间：2008-12-01T10:45:26.240
> 
> 标签：c#, .net, .net-3.5

在我们的代码中的许多地方，我们都有对象集合，我们需要从中创建一个逗号分隔的列表。集合的类型各不相同：它可能是我们需要某个列的 DataTable，也可能是 List<Customer> 等。

现在我们遍历集合并使用字符串连接，例如：

```
string text = "";
string separator = "";
foreach (DataRow row in table.Rows)
{
    text += separator + row["title"];
    separator = ", ";
} 
```

有没有更好的模式呢？理想情况下，我想要一种我们可以重用的方法，只需发送一个函数即可从每个对象中获取正确的字段/属性/列。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2008-12-01T11:20:55.857

```
string.Join(", ", Array.ConvertAll(somelist.ToArray(), i => i.ToString())) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-01T11:00:59.360

```
static string ToCsv<T>(IEnumerable<T> things, Func<T, string> toStringMethod)
{
    StringBuilder sb = new StringBuilder();

    foreach (T thing in things)
        sb.Append(toStringMethod(thing)).Append(',');

    return sb.ToString(0, sb.Length - 1); //remove trailing ,
} 
```

像这样使用：

```
DataTable dt = ...; //datatable with some data
Console.WriteLine(ToCsv(dt.Rows, row => row["ColName"])); 
```

或者：

```
List<Customer> customers = ...; //assume Customer has a Name property
Console.WriteLine(ToCsv(customers, c => c.Name)); 
```

我手头没有编译器，但理论上它应该可以工作。众所周知，在理论上，实践和理论是相同的。在实践中，他们不是。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2011-03-04T15:33:59.580

我发现 string.Join 和 lambda`Select<Func<>>`有助于编写最少的代码。

```
List<string> fruits = new List<string>();
fruits.Add("Mango");
fruits.Add("Banana");
fruits.Add("Papaya");

string commaSepFruits = string.Join(",", fruits.Select(f => "'" + f + "'"));
Console.WriteLine(commaSepFruits);

List<int> ids = new List<int>();
ids.Add(1001);
ids.Add(1002);
ids.Add(1003);

string commaSepIds = string.Join(",", ids);
Console.WriteLine(commaSepIds);

List<Customer> customers = new List<Customer>();
customers.Add(new Customer { Id = 10001, Name = "John" });
customers.Add(new Customer { Id = 10002, Name = "Robert" });
customers.Add(new Customer { Id = 10002, Name = "Ryan" });

string commaSepCustIds = string.Join(", ", customers.Select(cust => cust.Id));
string commaSepCustNames = string.Join(", ", customers.Select(cust => "'" + cust.Name + "'"));

Console.WriteLine(commaSepCustIds);
Console.WriteLine(commaSepCustNames);

Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-12-01T11:11:46.187

```
// using System.Collections;
// using System.Collections.Generic;
// using System.Linq

public delegate string Indexer<T>(T obj);

public static string concatenate<T>(IEnumerable<T> collection, Indexer<T> indexer, char separator)
{
    StringBuilder sb = new StringBuilder();
    foreach (T t in collection) sb.Append(indexer(t)).Append(separator);
    return sb.Remove(sb.Length - 1, 1).ToString();
}

// version for non-generic collections
public static string concatenate<T>(IEnumerable collection, Indexer<T> indexer, char separator)
{
    StringBuilder sb = new StringBuilder();
    foreach (object t in collection) sb.Append(indexer((T)t)).Append(separator);
    return sb.Remove(sb.Length - 1, 1).ToString();
}

// example 1: simple int list
string getAllInts(IEnumerable<int> listOfInts)
{
    return concatenate<int>(listOfInts, Convert.ToString, ',');
}

// example 2: DataTable.Rows
string getTitle(DataRow row) { return row["title"].ToString(); }
string getAllTitles(DataTable table)
{
    return concatenate<DataRow>(table.Rows, getTitle, '\n');
}

// example 3: DataTable.Rows without Indexer function
string getAllTitles(DataTable table)
{
    return concatenate<DataRow>(table.Rows, r => r["title"].ToString(), '\n');
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-04-18T06:13:17.407

在 .NET 4 中，您可以这样做`string.Join(", ", table.Rows.Select(r => r["title"]))`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-01T11:02:05.880

您可以编写一个将 IEnumerable<string> 转换为逗号分隔字符串的函数：

```
public string Concat(IEnumerable<string> stringList)
{
    StringBuilder textBuilder = new StringBuilder();
    string separator = String.Empty;
    foreach(string item in stringList)
    {
        textBuilder.Append(separator);
        textBuilder.Append(item);
        separator = ", ";
    }
    return textBuilder.ToString();
} 
```

然后，您可以使用 LINQ 查询您的集合/数据集/等以提供 stringList。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-01T10:53:14.197

顺便说一句：我要做的第一个修改是使用[StringBuilder 类](http://msdn.microsoft.com/en-us/library/2839d5h5.aspx)而不仅仅是一个字符串 - 它会为您节省资源。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-07-06T17:04:41.857

我喜欢[Matt Howells](https://stackoverflow.com/questions/330493/join-collection-of-objects-into-comma-separated-string/330522#330522)在这篇文章中的回答：

我不得不把它变成一个扩展：

```
public static string ToCsv<T>(this IEnumerable<T> things, Func<T, string> toStringMethod) 
```

用法（我正在获取所有电子邮件并将它们转换为电子邮件的[CSV](https://en.wikipedia.org/wiki/Comma-separated_values)字符串）：

```
var list = Session.Find("from User u where u.IsActive = true").Cast<User>();

return list.ToCsv(i => i.Email); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-26T23:45:38.313

对于集合，您也可以使用此方法，例如：

```
string.Join(", ", contactsCollection.Select(i => i.FirstName)); 
```

您可以选择要分离的任何属性。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-11T14:24:16.090

```
string strTest = "1,2,4,6";
string[] Nums = strTest.Split(',');
Console.Write(Nums.Aggregate<string>((first, second) => first + "," + second));
//OUTPUT:
//1,2,4,6 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-11T13:44:32.620

这是我最喜欢的适合该问题的答案，并更正了 Convert to ConvertAll：

```
string text = string.Join(", ", Array.ConvertAll(table.Rows.ToArray(), i => i["title"])); 
```

# c# - 如何在 C# 中测试与未知 Web 服务的连接性？

> ID：330496
> 
> 赞同：15
> 
> 时间：2008-12-01T10:46:41.887
> 
> 标签：c#, web-services

我正忙于编写一个监视 RAS 连接状态的类。我需要测试以确保连接不仅已连接，而且还可以与我的 Web 服务进行通信。由于这个类将在未来的许多项目中使用，我想要一种方法来测试与 Web 服务的连接，而无需对此一无所知。

我正在考虑将 URL 传递给类，以便它至少知道在哪里可以找到它。ping 服务器不是一个充分的测试。服务器可能可用，但服务处于脱机状态。

如何有效地测试我是否能够从 Web 服务获得响应？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-06-18T17:07:37.800

您可以尝试以下测试网站是否存在的方法：

```
public static bool ServiceExists(
    string url, 
    bool throwExceptions, 
    out string errorMessage)
{
    try
    {
        errorMessage = string.Empty;

        // try accessing the web service directly via it's URL
        HttpWebRequest request = 
            WebRequest.Create(url) as HttpWebRequest;
        request.Timeout = 30000;

        using (HttpWebResponse response = 
                   request.GetResponse() as HttpWebResponse)
        {
            if (response.StatusCode != HttpStatusCode.OK)
                throw new Exception("Error locating web service");
        }

        // try getting the WSDL?
        // asmx lets you put "?wsdl" to make sure the URL is a web service
        // could parse and validate WSDL here

    }
    catch (WebException ex)
    {   
        // decompose 400- codes here if you like
        errorMessage = 
            string.Format("Error testing connection to web service at" + 
                          " \"{0}\":\r\n{1}", url, ex);
        Trace.TraceError(errorMessage);
        if (throwExceptions)
            throw new Exception(errorMessage, ex);
    }   
    catch (Exception ex)
    {
        errorMessage = 
            string.Format("Error testing connection to web service at " + 
                          "\"{0}\":\r\n{1}", url, ex);
        Trace.TraceError(errorMessage);
       if (throwExceptions)
            throw new Exception(errorMessage, ex);
        return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-01T12:19:51.917

你是对的，ping 服务器是不够的。服务器可以启动，但由于多种原因，Web 服务不可用。

为了监控我们的 Web 服务连接，我创建了一个具有 CheckService() 方法的 IMonitoredService 接口。每个 Web 服务的包装类实现此方法以在 Web 服务上调用一个无害的方法并报告该服务是否启动。这允许监视任意数量的服务，而无需负责监视的代码知道服务的详细信息。

如果您对直接访问 URL 会返回什么 Web 服务有所了解，您可以尝试仅使用 URL。例如，Microsoft 的 asmx 文件返回 Web 服务的摘要。不过，其他实现可能会有不同的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T12:56:18.973

提示：使用“InvokeWithSomeParameters”方法创建一个接口/基类。“SomeParameters”的意思应该是“100%不影响任何重要状态的参数”。

我认为，有两种情况：

*   简单的 web 服务，不影响服务器上的任何数据。例如：GetCurrentTime()。可以不带参数调用此 Web 服务。
*   复杂的网络服务，可能会影响服务器上的某些数据。例如：登记挂起的任务。您使用 100% 引发异常的值填充参数（分别不会更改影响挂起的任务），如果您遇到诸如“ArgumentException”之类的异常，您就知道服务处于活动状态。

我不认为，这是最明确的解决方案，但它应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T23:29:30.193

如何打开到 web 服务使用的端口的 TCP/IP 连接？如果连接正常，则 RAS 连接、网络的其余部分和主机都在正常工作。Web 服务几乎肯定也在运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T09:54:31.807

如果是 Microsoft SOAP 或 WCF 服务且允许服务发现，则可以请求网页 serviceurl + "?disco" 进行发现。如果返回的是一个有效的 XML 文档，那么您就知道该服务是有效的。不允许 ?disco 的非 Microsoft SOAP 服务也可能返回有效的 XML。

示例代码：

```
 HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL + "?disco");
    request.ClientCertificates.Add(
      new X509Certificate2(@"c:\mycertpath\mycert.pfx", "<privatekeypassword>")); // If server requires client certificate
    request.Timeout = 300000; // 5 minutes
    using (WebResponse response = request.GetResponse())
    using (Stream stream = response.GetResponseStream())
    using (StreamReader sr = new StreamReader(stream, Encoding.UTF8))
    {
      XmlDocument xd = new XmlDocument();
      xd.LoadXml(sr.ReadToEnd());
      return xd.DocumentElement.ChildNodes.Count > 0;
    } 
```

如果 Web 服务器存在，但服务不存在，则 404 错误将很快引发异常。示例中相当长的超时是为了让缓慢的 WCF 服务在长时间不活动或 iisreset 之后重新启动。如果客户端需要响应，您可以使用更短的超时进行轮询，直到服务可用。

# c++ - C++ 构造函数编码错误

> ID：330497
> 
> 赞同：2
> 
> 时间：2008-12-01T10:47:01.090
> 
> 标签：c++, constructor

我刚刚在一些遗留代码中偶然发现了这个错误：

```
class MyAPIHandler
{
    private:
     int handle;
    public:
    void MyApiHandler()  // default constructor
    {
        handle = 42;
    };
}; 
```

它编译得很好，没有警告 - 但行为不是我想要的，因为构造函数名称拼写错误。这本身会产生关于“函数不返回值”的警告，但我想我是在自动驾驶仪上并添加了一个“void”返回类型来“修复”这个问题。

现在，错误修复很容易，但我的问题是：-

我可以使用哪些技术来防止此类错误再次发生？

一些语言需要一个明确的“构造函数”关键字，这应该使这个问题显而易见。单元测试，显然也应该抓住它。我还可以做些什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-01T11:14:24.047

If you always use initialiser lists in your constructors:

```
MyApiHandler()  // default constructor
: handle(42)
{
} 
```

the misnamed constructor bug would be even more unlikely, and it's better [style](http://www.parashift.com/c++-faq-lite/ctors.html#faq-10 "style") anyway.

**Edit**: thanks to commenter for the link

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T10:51:53.293

代码审查？正如你提到的，单元测试也很好。代码覆盖率。许多用于查找错误的常用工具都可以找到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T10:55:30.307

除了小心或进行代码审查之外，您*无能为力*。

您可以制作一个清单，以编写具有以下主题的新课程：

*   复制粘贴要用作第一个构造函数的类名。
*   如果实现复制构造函数，则实现析构函数和复制赋值运算符（[三规则](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming))。
*   注意单参数构造函数或具有默认参数的构造函数 - 考虑使它们显式

These are constructor-related points, the whole checklist could be longer. After a while you'll start doing things like this automatically.

Personally, I think Unit Testing is the best answer to avoid your specific problem, as you already mentioned.

**EDIT:** Added idea from comments:
In some development environments you could use code templates or macros to generate a correct class skeleton for you. This is a real "programmer's solution" - automating everything that can be automated to avoid errors.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T18:13:20.393

This shouldn't be much of a problem. Constructors don't have return values (not even void), so the compiler should be able to tell whether something is meant to be a constructor or a member function, and let you know if there's a problem. Obviously someone saw the compiler's error on that and chose the wrong solution (adding a return type instead of correcting the spelling). (EDIT: Sorry, didn't realize that you'd done that yourself.)

Personally, I always put the constructor(s) near the beginning of the the class's public section (before any member functions, but after public type definitions and constants), so a problem like that would be pretty obvious to me on re-reading the code. But conventions differ on that.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T10:58:59.833

I'm pretty sure that PC Lint, a static code analysis tool, would have spotted this error. It isn't free but it is very, very good. Worth a look:

[http://www.gimpel.com/](http://www.gimpel.com/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T18:38:34.740

## I believe you should not think too much about this issue

It happens for constructors, but also for any other method, or even function. For example:

```
class MyBase
{
   // etc.
   virtual void doSomething() ;
} ;

class MyDerived : public MyBase
{
   // etc.
   virtual void DoSomething() ;
} ; 
```

Or:

```
bool isOk(int value) { /* etc. */ }
bool isOK(double value) { /* etc. */ }

void doSomething(int value)
{
   if(isOK(value)) // isOK(double) will be called
   {
      // Etc.
   }
} 
```

And this is not only a problem of character case. This kind of error happens. IDE helpers like autocompletion can help somewhat, as could a good unit-testing code (something covering all methods of a class), but I don't believe the compiler alone could protect against this kind of developer mistyping even with additionnal keywords.

## What about CONSTRUCTOR?

As for the CONSTRUCTOR define mentionned before me, this is a bad idea IMHO:

It will help as much as a comment (and so, why not use /* CONSTRUCTOR */ instead?), and if someone thought about using the word CONSTRUCTOR as a define symbol, then you can bet someone else will have the same idea in some header you include but don't own, and that it will break your code...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-17T05:46:13.353

If the member variable is not going to change, declare it const and the compiler will force you to use an initialiser list, which in this case would force you to detect your error (because it won't compile).

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-01T10:54:24.210

也许你可以做一个

```
#define CONSTRUCTOR 
```

然后在你的代码中

```
class MyAPIHandler
{
   public:
       CONSTRUCTOR MyAPIHandler()
       {
           // Deep magic
       }
}; 
```

现在，它本身不会做任何事情，但如果你习惯这样写，你应该能够更容易地发现错误。

尽管老实说，我认为这种情况非常罕见，不值得麻烦。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-01T11:01:21.090

I guess following TDD will help, though not the solution you were looking for ...

as you said its legacy code, i suggest you read "working with legacy code- Kent Beck". That might help.

regression testing will pick issues due to bug fixes.

even i am looking forward for out of box suggestions :)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-01T13:56:55.120

Unit tests.

```
MyAPIHandler mah;
BOOST_CHECK_EQUAL(mah.handle, 42); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-01T18:45:44.460

I have a set of broilerplates/templates (in Vim.. but I guess you can have them in any modern editor) which avoids typos of this nature.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-01T20:56:12.857

Most IDEs allow for macros of some sort. Just use a macro to create a class definition. That's the way I have it setup. My macro prints outs:

```
class CHANGETHIS
{
    public: 
      CHANGETHIS();
      ~CHANGETHIS();
}
#error "Finish this class definition" 
```

The #error line is just a safety net to make sure it doesn't build if I am interrupted in the middle of my work and forget about it when I get back.

What I like about this is that its portable across any editor, so I don't feel handicapped when I switch to a different IDE. Hope this helps.

In addition, use initialization lists. They're faster and lead to less bugs.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-02T16:09:38.143

I'd say the simplest way of avoiding this problem is to lay down the law for naming in the form of a coding style guide. In this you set down how to name your entities and you stick to it.

Specifically at work we've got it mandatory that abbreviations are only capitalised on the first letter, therefore this would be caught more easily.

# c++ - 如何解决此 VC++ 6.0 链接器错误？

> ID：330500
> 
> 赞同：2
> 
> 时间：2008-12-01T10:48:38.123
> 
> 标签：c++, windows, visual-c++-6, linker-errors, unresolved-external

这是一个 Windows 控制台应用程序（实际上是一个服务），它是一个以前的人在 4 年前构建并安装并运行的。我现在需要进行一些更改，但甚至无法构建当前版本！这是构建输出：

```
--------------------Configuration: MyApp - Win32 Debug--------------------
Compiling resources...
Compiling...
Main.cpp
winsock.cpp
Linking...
LINK : warning LNK4098: defaultlib "LIBCMTD" conflicts with use of other libs; use /NODEFAULTLIB:library
Main.obj : error LNK2001: unresolved external symbol _socket_dontblock
Debug/MyApp.exe : fatal error LNK1120: 1 unresolved externals
Error executing link.exe.

MyApp.exe - 2 error(s), 1 warning(s)
-------------------------------------------------------------------------- 
```

如果我使用`/NODEFAULTLIB`，那么我会收到很多错误。该代码实际上并没有使用`_socket_noblock`，但我在“网络”上找不到任何东西。大概它被我链接到的某个库使用，但我不知道它在哪个库中。

--- 阿利斯泰尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T11:08:35.337

LNK4098 可能不是问题。例如，如果您链​​接到某个库的发布版本，该库使用静态运行时链接并导致将 LIBCMT（注意“D”后缀的缺失）添加到默认库，则可能会发生这种情况。您的应用程序在 Debug 配置中构建，使用 LIBCMT **D**，因此存在冲突。它实际上可能是安全的，前提是您没有与该库交换任何依赖于运行时的内容。

至于`_socket_noblock`.obj 和 .lib 文件，您可以使用一些搜索工具（例如 grep 或 find）来搜索此字符串。这样，您将知道哪个库引用了该符号，这可能是发现该库具有哪些依赖项的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T11:00:14.307

您可以使用[“Dependency Walker”](http://www.dependencywalker.com/) - 一个免费工具来查找应用程序的依赖项，以了解您的应用程序如何链接到 libcmtd。 **编辑：**当然，您不能在无法链接的新版本上使用它（请参阅评论），但您可以在旧版本或新版本链接的已知库上使用它。

然而，由于真正的问题与我的建议无关，也许这个问题应该被关闭。

看起来您正在链接到不同版本的 CRT - 可能是因为您正在使用旧的构建库以及新的编译器和 CRT 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T11:05:30.460

抱歉，这是内部问题。4 年前一个特立独行的编码员和一个生锈的一无所有（我！）现在的组合。

该代码不使用`_socket_noblock`，但它**确实**使用`socket_noblock`，我只需要链接到我们自己的库之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-12T13:25:25.427

**defaultlib "LIBCMTD" 与使用其他库发生冲突**是一个警告，表明您的程序使用的运行时库版本与您的一个或多个库不同。在程序和库中使用相同的运行时，以使警告消失。

（项目设置）（c++选项卡）类别（代码生成）（使用运行时库）

# c# - System.IO.Stream.Read(byte[], int, int) 的阻塞版本

> ID：330502
> 
> 赞同：3
> 
> 时间：2008-12-01T10:49:45.547
> 
> 标签：c#, .net

我正在使用`System.IO.Stream.Read(byte[] buffer, int offset, int count)`. 是否有该方法的替代方法（或要设置的属性），以便在读取所有计数（或到达流的末尾）之前该方法不会返回？或者我应该做这样的事情：

```
int n = 0, readCount = 0;
while ((n = myStream.Read(buffer, readCount, countToRead - readCount)) > 0)
    readCount += n; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-01T11:06:03.140

[BinaryReader.ReadBytes](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readbytes.aspx)以所需的方式阻塞。然而，这并不等同于读到流的末尾。（你不想调用`BinarReader.ReadBytes(int.MaxValue)`- 它会尝试创建一个 2GB 的缓冲区！）

我倾向于使用 MemoryStream 从未知大小的流中读取所有数据。有关示例代码，请参阅[此相关问题](https://stackoverflow.com/questions/221925/creating-a-byte-array-from-a-stream)。

# phone-number - 如何识别传真号码？

> ID：330505
> 
> 赞同：2
> 
> 时间：2008-12-01T10:51:39.753
> 
> 标签：phone-number, fax

在不实际发送传真的情况下识别号码已连接到传真的最佳方法应该是什么？

我想可以打一个简短的电话：目标是确定一个被声明为传真线路的号码是否*真的*是一条传真线路，工作且可用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T11:01:44.693

如果您可以拨打电话，许多传真会产生“[传真识别音](http://telecom.tbi.net/fax-call.htm)”。

> 该信号可能会在接听电话后 1.8 到 2.5 秒之间由终接传真机发送。CED 信号由持续时间为 2.6 至 4 秒的 2100 Hz 音调组成。CED 音对于禁用线路上的任何回声消除器很有用。
> 
> CED 在 2100 Hz 音调之后还包含一个“静音”间隔。此间隔持续 55 到 95 (75 +/- 20) 毫秒。在此间隔之后，终接传真机将通过发送一个 300 BPS“线路周转”前导码来启动消息前识别程序。

一些较旧的传真不支持这一点，不知道如何触发它们（即通过您先发送音调，但如果您有电话而不是传真号码，那可能真的很烦人）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T11:59:35.560

我理解您的问题，因为您的客户数据库中*有*一份传真号码列表，并且想要验证这些号码是否仍然有效。

然后您可以使用[TAPI](http://en.wikipedia.org/wiki/Telephony_Application_Programming_Interface)以编程方式呼叫这些号码并检查它是否是正在应答的传真，无需实际发送任何传真，只需连接并询问设备（传真）它具有哪些功能。

以下是[有关其 TAPI 的 Microsoft 信息](http://msdn.microsoft.com/en-us/library/ms950407.aspx)

一种更简单的方法是在 com 端口上安装一个传真调制解调器，并使用 ATI 命令呼叫设备并发送 ATX3D 并查看设备是否以 ATA 应答。（或类似的东西，很久以前我编程调制解调器..）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T10:58:26.463

至少在新西兰没有。

在这里，传真号码在命名空间方面与普通号码没有区别。

一个传真号码可能与他们的正常线路仅相差 1 位（最右边），甚至一个公司可能没有**不同**的 FAX/Phone 线路，它们只是共享一条线路并使用音调检测来启动传真协议。

此外，您无需向任何人注册即可在您的电话线上使用传真服务，因此您无法查看索引以查看其是否为传真。唯一知道的方法是拨打电话，看看您是否收到传真回复，即使这样，如果传真碰巧被关闭，您也会得到误报。

我认为你的问题可能会导致寻找幻影。

哦，为了获得更多乐趣，您可能会将带有拨号调制解调器的台式机插入墙上，只是模拟传真设备:)。如果您不想将这些包括为“传真机”。你很可能会倒霉。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T11:07:24.263

这基本上是不可能的。

他们制造线路共享开关设备。例如，访问[http://www.faxswitch.com/](http://www.faxswitch.com/)查看他们的产品。

*在您*发送传真识别音之前，该线路看起来就像一条语音线路。然后线路切换到传真机（如果存在）。

因此，单个号码可以是语音和传真。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-01T12:26:03.417

测试号码是否是传真号码的一种快速而肮脏的方法是使用谷歌（使用某些 API）搜索“Fax [number]”。

例如
[http://www.google.co.uk/search?q=](http://www.google.co.uk/search?q=) "Fax+01422+329262"

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T11:50:02.867

首先，将其识别为传真线路的号码中没有任何固有的东西。甚至电话公司也不知道——它只是一个连接到墙上插孔的设备，由客户提供。

在某些时候，您只需要信任用户。但是，也请尝试以下想法：

*   在每份传真上，公布一个号码（最好是免费的），收件人可以打电话取消。在某些地方，无论如何这可能是一项要求——“不请自来的”传真被认为是滥用的，与垃圾邮件的方式大致相同，因为它们会给收件人带来材料和带宽成本。如果有人订阅了不属于他们的号码，这将保护您。
*   在您的软件中添加某种错误阈值，一旦*n*次尝试失败，它将停止传真尝试，并将该号码标记为无效。如果您有其他方式联系用户，您可以通知他们此事件。同样的原则也适用于电子邮件地址——当我更改电子邮件地址并忘记通知他们时，我收到了来自公司的蜗牛邮件通知；一旦电子邮件被退回了几次，他们就发来一封礼节性的信，提醒我更新它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-01T11:13:48.710

许多旧的传真线路被设置为即使在语音通话中也会自动接听，因此您只需打电话查看即可。另一方面，它不适用于很多新的，所以虽然你可以说它是一条传真线路，但你不能说它不是。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-01T12:22:12.503

我确定传真是调制解调器，所以如果您连接到它 - 可能使用 AT 代码（1990 年代！），您可以从响应代码中确定那里有传真 - 但您仍然需要拨打电话，进行谈判等 - 只是不发送页面。

# outlook - Outlook(2003) msg file 扩展名的注册表值代表什么？

> ID：330513
> 
> 赞同：1
> 
> 时间：2008-12-01T10:55:30.463
> 
> 标签：outlook, registry, vsto

如果要打开扩展名为 .msg 的 msg 电子邮件文件，Outlook 2003 将使用一些参数启动。因此，您可以找到以下注册表项：

```
HKEY_CLASSES_ROOT\msgfile\shell\Open\command\(standard)
HKEY_CLASSES_ROOT\msgfile\shell\Open\command\command 
```

第一个指向带有参数 /f "%1" 的 "outlook.exe"。这将使用打开邮件的信息启动 Outlook。但是“命令”键具有以下值：

```
%]gAVn-}f(ZXfeAR6.jiOUTLOOKFiles>ir@X7cr$%@u$}&V7{4p' /f "%1" 
```

谁能告诉我这到底有什么用？

我正在编写一个需要修改这些键的 vsto Outlook 插件。如果我修改“标准”键，Outlook 将正常启动，而无需使用我更改的键。如果我还修改“命令”键 Outlook 甚至不再启动。

只有当我删除“命令”键时，一切才能按预期正常工作。但是，如果不知道密钥的用途，这不可能是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T11:46:00.033

这个“命令”值是由 Windows 安装程序生成的所谓“达尔文描述符”，用于自动修复损坏的安装。

有关“MSI darwin 描述符”，请参见[http://www.symantec.com/community/tip/4999/darwin-descriptor](http://www.symantec.com/community/tip/4999/darwin-descriptor)或 google。

# c# - C# 动态更改 NavigateUrl HyperLinkField

> ID：330526
> 
> 赞同：1
> 
> 时间：2008-12-01T11:02:34.803
> 
> 标签：c#, hyperlink, navigateurl

在我的代码中，我创建了一个 HyperLinkField 对象。根据数据库字段值，我想设置 NavigateUrl 属性。这是我的问题，不知道怎么解决。

和：

```
objHF.DataNavigateUrlFields = new[] { "id", "Stype" }; 
```

我得到我的数据库字段。现在我想检查 Stype 值。根据这个值，我想设置导航到的页面。我怎样才能做到这一点？？

最后，我将数据源设置为 gridview，然后调用 bind() 方法。

我希望有人可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T12:15:27.417

将 HyperLinkField 设为 TemplateField，并将生成的 HyperLink（在标记中）的 NavigateUrl 设置为类似

```
<%# myUrlFunction(Eval("id"), Eval("stype")) %> 
```

接下来在.cs文件中创建对应的函数：

```
private string myUrlFunction(object id, object stype)
{
    return "mypagename.aspx?whatever=" + id.ToString() + 
        "&youwanttodo=" + stype.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-13T10:20:41.427

试试这个方法

```
<%# this.myUrlFunction(Eval("id"), Eval("stype")) %> 
```

这是有效的

# java - selectitem 和 selectitems 标签之间的区别

> ID：330529
> 
> 赞同：8
> 
> 时间：2008-12-01T11:04:45.017
> 
> 标签：java, html, jsp, jsf

jsf中的selectitem和selectitems标签有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-01T11:14:12.110

差异正是您所期望的。该`selectitem`标签将单个项目添加到 HTML 列表中，同时`selectitems`添加多个项目。

来自[JSF 核心标签参考](http://www.jsftoolbox.com/documentation/help/12-TagReference/core/f_selectItem.html)：

### 选择物品：

该`SelectItem`标签将一个子`UISelectItem`组件添加到与封闭标签关联的组件中。在 HTML renderkit 中，这会创建一个元素。它可以与 JSF HTML 标记库中的任何选择标记一起使用。此标签的正文内容必须为空。

*例子：*

```
<h:selectOneMenu id="list1">
    <f:selectItem itemLabel="Option 1" itemValue="1"></f:selectItem>
</h:selectOneMenu> 
```

*HTML 输出：*

```
<select id="list1" name="list1" size="1">
    <option value="1">Option 1</option>
</select> 
```

### 选择项目：

该`SelectItems`标签将一个子`UISelectItems`组件添加到与封闭标签关联的组件中。您可以使用此标记将域模型中的对象列表设置为选择组件的选项。此标签的正文内容必须为空。

*例子：*

```
<h:selectManyListbox id="list">
    <f:selectItems value="#{optionBean.optionList}"></f:selectItem>
</h:selectManyListbox> 
```

*HTML 输出：*

```
<select id="list" name="list" multiple="true" size="-2147483648">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-25T14:32:33.290

记住 f:selectItems 可以指向 SelectItem、SelectItem 对象的数组或集合，或者将标签映射到值的 Map 也很高兴。

# php - 巡航控制和 PHP 项目

> ID：330532
> 
> 赞同：8
> 
> 时间：2008-12-01T11:05:31.643
> 
> 标签：php, unit-testing, cruisecontrol

我正在寻找一个完整的解决方案来自动“构建”和测试 PHP 应用程序。我遇到了 PhpUnderControl，这是一个运行围绕 Cruise Control 创建的自动化应用程序构建的解决方案。

不幸的是，PhpUC 仍处于开发的早期阶段，我无法让它在 windows box 上运行。

经过几个小时的尝试，我放弃了 phpUc。我现在正在尝试单独使用巡航控制。在运行整个构建过程时它工作得很好。我放入 ant 构建文件的每个命令都运行正常。

我遇到的唯一问题是 Cruise Control 不会将运行构建中的日志合并到项目日志文件中，因此我看不到任何构建结果。但是 Cruise control 中的示例项目工作正常，构建日志被合并到项目的日志中。

我想知道 Cruise Control 是否能够将 PHPUnit 创建的日志（以 XML 格式）合并到项目日志中，或者它是否仅适用于 Java 的 JUnit 文件。有没有人尝试在 php 项目中单独使用 Cruise Control？

这是项目配置（config.xml）的日志部分：

```
<log dir="logs/${project.name}">
<merge dir="projects/${project.name}/build/logs/"/>
</log> 
```

这是从 Cruise Control 的示例项目更改的复制粘贴 + 路径。

任何想法请任何人。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T16:57:33.447

> 我想知道 Cruise Control 是否能够将 PHPUnit 创建的日志（以 XML 格式）合并到项目日志中，或者它是否仅适用于 Java 的 JUnit 文件。

CC 将合并您指向的任何 xml 文件。当您说合并文件不起作用时，您是在合并它们时遇到错误还是测试结果没有显示在结果页面上？如果您查看构建日志文件，您是否看到合并的测试结果？

您可能会看到的一个问题是 jsp 报告应用程序中的 .xsl 文件期望测试结果位于 ant junit 任务创建的结构中。可能发生的情况是您正在合并文件，但 .xsl 不知道如何显示结果。

但我认为有一个简单的解决方案。PhpUnderControl 项目提供了一个 phpunit.jsp。我认为如果您将其添加到现有的 CC 安装中，您将能够查看测试结果。您可以很容易地将 phpunit.jsp 添加到选项卡中；只要看看 main.jsp 就应该很明显了。

如果您有任何后续问题，我推荐 CruiseControl[用户邮件列表](http://cruisecontrol.sourceforge.net/contact.html)。

（我没有在 PHP 项目中使用 CC，但我是 CC 提交者之一。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-05T10:43:45.523

phpunit、phpUnderControl 和 CC 工作得很好！

要在 phpunit xml 文件中的选项卡（带有 CC 的 phpUnderControl）中获取测试，请确保生成的 phpunit 日志文件位于正确的路径中

```
 <log type="junit" target="...../cruisecontrol-bin-2.8.4/projects/<projname>/build/logs/logfile.xml" logIncompleteSkipped="false"/> 
```

从 phpunit 生成 logfile.xml 后，测试会显示在 phpUnderControl 和 CC 的测试选项卡中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-10T17:29:54.950

我们尝试将 PHPUc 与 CC 结合使用，但无法正常工作。我们尝试了直接 CC，但发现很难在其中获得身份验证（我们是分布式的，所以我们的报告将向全世界开放，除非我们确定它——我们无法弄清楚。）

所以，我们现在实际上使用 Hudson 作为我们的 CI 引擎和 Phing 作为我们的构建工具。它工作得很好。我们有直接来自 PHPUnit 的代码覆盖率报告（Hudson 在 Java 世界中仍将其称为“Clover 覆盖率”，但嘿，它只是一个链接的名称，我们知道它的含义）。

Hudson 易于设置，并且似乎可以处理 PHP 所需的一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-03T11:01:36.333

我发现 CruiseControl 仅在测试失败时合并包含测试结果的日志。

当我故意破坏测试时，结果会合并到日志中，并显示在 CruiseControl 仪表板上。

那会是你的问题吗？

# web-applications - 支持 Web 应用程序 - 网站

> ID：330541
> 
> 赞同：1
> 
> 时间：2008-12-01T11:08:48.440
> 
> 标签：web-applications, web, maintenance

我正在为客户创建一个使用 ASP.NET + C# 的电子商店。首先，我想问一下是否有人知道 Crystal Tech 网络托管有多好（不是专用服务器包，因为那有点贵）；

其次，我想问一下我应该向我的客户提供什么样的支持 - 维护 - 保证，以及我应该知道什么样的问题可能会在网站上蔓延。

简而言之，我想问一下你们所有更有经验的开发人员，我应该避免哪些常见的陷阱，我应该要求我的客户保护他免受这些陷阱的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T11:28:51.397

我对您的客户的建议是确保团队中的某个人具有电子商务经验。我无意冒犯 - 这是标准建议 - 有许多潜在的陷阱，如果处理不当，可能会让您的客户付出代价。也许你可以与以前做过这件事的人分包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T11:29:49.647

不知道Crystal Tech作为主持人...

一般来说，在支持等方面我会；

对于应用程序的托管，永远不要提供托管公司可以提供给您的任何东西。只说您的托管可能会更好（客户可能会感觉更好）

如果有营销活动 - 网站的流量可能过多，这意味着它可能会中断 - 所以请注意。客户通常根据成本风险来理解它。 **但是**，如果托管公司确实想最大程度地指定，则确实会根据托管公司可以提供的内容提供向上滑动的规模。

对于软件支持 - 通常您（您的公司）应该提供联合支持，您将需要诸如响应时间、修复时间、解决时间以及基于这些差异的成本计算。

青铜银金等

然后看看你花了多少钱...

我的 2cents 值

希望能帮助到你。/

只有我的想法

# iphone - 设置 iPhone 键盘语言

> ID：330542
> 
> 赞同：15
> 
> 时间：2008-12-01T11:08:51.623
> 
> 标签：iphone, cocoa-touch, keyboard

当用户点击 UITextField 时，我希望 iPhone 虚拟键盘显示为预设为特定语言（例如俄语）。有没有办法在 Cocoa 代码中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-01T13:10:58.973

不幸的是，这是用户定义的设置，不能被程序员弄乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-23T09:58:12.673

3.1+没有问题。我将此设置为 3.0：

```
self.searchBar.keyboardType = UIKeyboardTypeURL; 
```

并出现语言切换按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-03T14:56:58.910

您无法将键盘设置为所需的字符集，但下一个最好的方法是防止用户输入来自任何其他字符集的字符。下面的代表会执行此操作，并且在输入错误字符时还会使 iPhone 的振动器发出嗡嗡声，这可以很好地快速提醒用户他们选择了错误的键盘。这适用于韩语，但很容易修改为其他语言（见评论）：

头文件：

```
#import <Foundation/Foundation.h>
#import <AudioToolbox/AudioToolbox.h>

@interface KoreanOnlyInput : NSObject <UITextFieldDelegate>
{
    NSMutableCharacterSet* koreanUnicode; 
}

@end 
```

.m 文件：

```
#import "KoreanOnlyInput.h"

@implementation KoreanOnlyInput

- (id)init
{
    self = [super init];
    if (self) {
        // From http://www.unicodemap.org/ :
        // 0x1100 - 0x11FF : Hangul Jamo (256)
        // 0x3130 - 0x318F : Hangul Compatibility Jamo (96)
        // 0xAC00 - 0xD7A3 : Hangul Syllables (11172)

        koreanUnicode = [[NSMutableCharacterSet alloc] init];
        NSRange range;

        range.location = 0x1100;
        range.length = 1 + 0x11FF - range.location;
        [koreanUnicode addCharactersInRange:range];

        range.location = 0x3130;
        range.length = 1 + 0x318F - range.location;
        [koreanUnicode addCharactersInRange:range];

        range.location = 0xAC00;
        range.length = 1 + 0xD7A3 - range.location;
        [koreanUnicode addCharactersInRange:range];
    }
    return self;
}

- (void)dealloc
{
    [koreanUnicode release];
    [super dealloc];
}

- (BOOL)textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString*)string
{
    if ([string isEqualToString:@"\n"])
        return YES;

    BOOL shouldChange = YES;    
    for (int i=0; i<[string length]; i++)
    {
        if (![koreanUnicode characterIsMember:[string characterAtIndex:i]])
            shouldChange = NO;
    }

    if (!shouldChange)
    {
        AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);
    }

    return shouldChange;
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-08T14:34:48.020

我想这样做是因为我正在编写一个语言学习应用程序。

是什么让 iPhone 上的当前键盘选择设置变得更糟（至少对我而言）是它不记得每个应用程序的键盘。因此，如果您为一个应用程序更改它，它对于您打开的下一个应用程序仍然是相同的键盘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T17:40:17.167

不知道你为什么要这样做——我不会说俄语，如果突然出现俄语键盘，我会有点担心。

用户可以在他们的 iPhone 设置应用程序中选择他们想要的语言。然后确定当他们点击文本字段时出现哪个键盘。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-19T13:53:12.647

在回答关于英文键盘的问题时——Apple 确实为此设计了——你可以使用 ASCII 键盘——你可以选择：UIKeyboardTypeASCIICapable。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-11T23:54:38.307

我不知道 iPhone 3.0 SDK，但从 2.x 开始，你无法控制它。但是，您可以做的是制作自定义键盘。这是更多的工作，但您可以重新制作每种语言的布局。

# php - 使用javascript输出html时出错

> ID：330543
> 
> 赞同：0
> 
> 时间：2008-12-01T11:08:57.893
> 
> 标签：php, javascript, html, ajax

我有这个 php 代码，我试图用它来生成一个包含 html 文件内容的弹出窗口，但是在添加脚本标签后，没有显示任何 html。我尝试回显 $row2，但单词数组被打印到屏幕上，没有别的。

```
<?php
session_start();
if (isset($_GET["cmd"]))
  $cmd = $_GET["cmd"];
else
  die("You should have a 'cmd' parameter in your URL");
 $pk = $_GET["pk"];
$con = mysql_connect("localhost","root","geheim");
if(!$con)
{
die('Connection failed because of' .mysql_error());
}
mysql_select_db("ebay",$con);
if($cmd=="GetAuctionData")
{
$sql="SELECT * FROM Auctions WHERE ARTICLE_NO ='$pk'";
$sql2="SELECT ARTICLE_DESC FROM Auctions WHERE ARTICLE_NO ='$pk'";
$htmlset = mysql_query($sql2);
$row2 = mysql_fetch_array($htmlset);
echo $row2;
echo '<script> 
function makewindows(){
child1 = window.open ("about:blank");
child1.document.write('.$row2["ARTICLE_DESC"].');
child1.document.close(); 
}
</script>';

$result = mysql_query($sql);
while ($row = mysql_fetch_array($result))
{
echo "<div id='leftlayer'>
    <strong>Article Number</strong> ".$row['ARTICLE_NO']."
    <p><strong>Article Name</strong></p> ".$row['ARTICLE_NAME']."
    <p><strong>Subtitle</strong></p> ".$row['SUBTITLE']."
    <p><strong>Username</strong></p> ".$row['USERNAME']."
    <p><strong>Total Selling</strong></p> ".$row['QUANT_TOTAL']."
    <p><strong>Total Sold</strong></p> ".$row['QUANT_SOLD']."
    <p><strong>Category</strong></p> ".$row['CATEGORY']."
    <p><strong>Highest Bidder</strong></p> ".$row['BEST_BIDDER_ID']."
  </div>
<div class='leftlayer2'>
  <strong>Current Bid</strong> ".$row['CURRENT_BID']."
  <p><strong>Start Price</strong></p> ".$row['START_PRICE']."
  <p><strong>Buyitnow Price</strong></p> ".$row['BUYITNOW_PRICE']."
  <p><strong>Bid Count</strong></p> ".$row['BID_COUNT']."
  <p><strong>Start Date</strong></p> ".$row['ACCESSSTARTS']."
  <p><strong>End Date</strong></p> ".$row['ACCESSENDS']."
  <p><strong>Original End</strong></p> ".$row['ACCESSORIGIN_END']."
  <p><strong>Auction Type</strong></p> ".$row['AUCTION_TYPE']."
</div>
<div class='leftlayer2'>
    <strong>Private Auction</strong></p> ".$row['PRIVATE_AUCTION']."
  <p><strong>Paypal Accepted</strong></p> ".$row['PAYPAL_ACCEPT']."
  <p><strong>Auction Watched</strong></p> ".$row['WATCH']."
  <p><strong>Finished</strong></p> ".$row['FINISHED']."
  <p><strong>Country</strong></p> ".$row['COUNTRYCODE']."
  <p><strong>Location</strong></p> ".$row['LOCATION']."
  <p><strong>Conditions</strong></p> ".$row['CONDITIONS']."
</div>
<div class='leftlayer2'>
  <strong>Auction Revised</strong></p> ".$row['REVISED']."
  <p><strong>Cancelled</strong></p> ".$row['PRE_TERMINATED']."
  <p><strong>Shipping to</strong></p> ".$row['SHIPPING_TO']."
  <p><strong>Fee Insertion</strong></p> ".$row['FEE_INSERTION']."
  <p><strong>Fee Final</strong></p> ".$row['FEE_FINAL']."
  <p><strong>Fee Listing</strong></p> ".$row['FEE_LISTING']."
  <p><a href='#' onclick='makewindows(); return false;'>Click for full description </a></p>
</div>";

$lastImg = $row['PIC_URL'];
echo "<div id='rightlayer'>Picture Picture
<img src=".$lastImg.">
</div>";

}

}
mysql_close($con);
?> 
```

编辑：我已经修复了 Roborg 指出的错误，但是脚本仍然不会加载并且不会给出精确的错误。

我已经更新了上面的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T11:20:58.057

除了失踪`</script>`，

`child1.document.write('.$row2["ARTICLE_DESC"].')` 应该

`child1.document.write(' . json_encode($row2["ARTICLE_DESC"]) . ');`

该[`json_encode()`](http://www.php.net/json_encode)功能将为您处理任何报价。

编辑：

`<a href='#' onclick=makewindows()>`应该是`<a href='#' onclick='makewindows(); return false;'>`- 你应该有引号，`return false`当你点击链接时，它会阻止你被带到“#”。

另外，从记忆中我不确定您是否可以打开 about:blank 然后写入它 - 我认为它认为这是跨域脚本。您最好在服务器上创建一个最小的“blank.html”文件并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T11:13:23.267

您的`<script>`标签永远不会关闭，您的*JavaScript*指令也不会以分号结尾。这可能是问题的根源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T13:01:37.353

你必须 print_r 一个数组，比如`print_r($row2);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T13:08:10.227

在这一行：

```
$row2 = mysql_fetch_array($htmlset); 
```

您将设置`$row2`为表示查询结果的整行的数组。即使“行”只是一个字段，它仍然是一个数组。如果您只想获取第一个字段的值，可以使用[`mysql_result`](http://www.php.net/mysql_result).

参数是：`resource $result , int $row [, mixed $field ]`因此使用示例如下：

```
// get the first field of the first row
$fieldVal = mysql_result($htmlset, 0);

// get the third field
$fieldVal = mysql_result($htmlset, 0, 2);

// get the first field of the 2nd row
$fieldVal = mysql_result($htmlset, 1); 
```

# ajax - ajax架构问题

> ID：330545
> 
> 赞同：0
> 
> 时间：2008-12-01T11:11:23.553
> 
> 标签：ajax

我有一个包含 3 层的页面，一层用于导航，一层用于数据库记录，一层用于结果。当我单击数据库记录时，结果会通过 ajax 显示在结果层中。对于导航，链接将只是不同的查询。我想知道将每个不同的查询作为 ajax 数据发送并放入记录层是否有意义，或者更确切地说每次都将查询附加到 php 文件中。哪种方法更有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-01T12:01:08.007

我认为您的问题非常不具体且令人困惑。什么是“附加到 php 文件”？

你真的关心效率吗？我的意思是，应该以多快的速度显示结果？还是您担心服务器工作量？

你读过这个教程吗？[Ajax 的原型介绍](http://www.prototypejs.org/learn/introduction-to-ajax) 我认为它应该回答您的大部分问题并提供足够的示例代码以继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T12:20:04.397

好吧，根据我的观点，建议发送不同的 AJAX 请求。作为

1.  **性能方面**，它会减少响应时间，因为只发送 POST 数据并接收数据字节。然后页面可以对其进行格式化，它接收一个 XMLHttpResponse

2.  **安全方面**：我更喜欢使用 POST 而不是 GET，因为它至少对作为参数传递的内容提供了一些不透明性，并且不是任何人都可以编辑 url 并随意玩弄。**另外**，在 POST 中传递参数时，您没有 URL 长度限制。

> 所以，我会说在每个链接上触发一个 XMLHTTPRequest，并在页面的结果层（窗格/div）中显示响应。

# mysql - mysql数据库的备份和灾难管理计划

> ID：330554
> 
> 赞同：5
> 
> 时间：2008-12-01T11:15:05.620
> 
> 标签：mysql, backup, disaster-recovery

我有一个多用户应用程序，其中包含一些用户的关键数据。我正在为应用程序制定备份和灾难恢复计划。

想知道一些关于这个的最佳实践..

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-01T11:32:54.990

注意：您可能希望在关键数据管理中包含故障转移。

备份通常用于准备恢复的数据副本。

[故障转移和 DRP](https://stackoverflow.com/questions/120139/failover-disaster-recovery)恢复***服务***（不仅仅是数据），因为有新服务器可用：

*   在几分钟内进行故障转移，因为它通常在同一个网络上，并且它的名称不必在各种 DNS 上公布
*   在 DRP 的情况下，几小时内

对于纯备份策略，我使用每日增量备份和每周完整备份。

但是，我们还有一个[SRDF](http://en.wikipedia.org/wiki/SRDF)连接，允许与我们用于 DRP 的远程数据中心进行实时数据复制。

现在，备份 + 故障转移 + SRDF（用于 DRP）对于开发数据来说可能是多余的，但对于**生产**数据来说是合理的（需要恢复在生产中运行的服务）。

因此，为了更好地完善您的策略，您需要清楚地分析您的数据所代表的内容。

# java - Java 统计包？（马尔可夫链和高级分布）

> ID：330559
> 
> 赞同：12
> 
> 时间：2008-12-01T11:20:50.413
> 
> 标签：java, statistics

我在寻找一个提供马尔可夫链和其他高级分布（如统计）的像样的 Java 库时遇到了麻烦。

我在 source forge 上找到了[http://sourceforge.net/projects/hydra-mcmc/](http://sourceforge.net/projects/hydra-mcmc/) ，它看起来有点用，但有人知道/使用更新的包吗？（还没有真正了解这个包，但人们会认为一个维护得更好的包是可取的）。

任何人都可以提出建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T11:48:24.320

它不是一个库，但它可以给你一些指示：

[Java-mcmc](http://www.lbreyer.com/java.html)引入了一些复杂的小程序，说明：

*   常见的 Metropolis-Hastings 算法
*   马尔可夫链的耦合结构

**此马尔可夫链蒙特卡罗 (MCMC)**网络演示的源代码可[在此处获得](http://www.lbreyer.com/mcmc-webdemo.html)。

**[那里列出了](http://www.martindalecenter.com/Calculators2A_2_A%5A.html)****其他类似的项目**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T12:03:45.973

您可以尝试与 R (r-project.org) 交互，就像[http://jgr.markushelbig.org/JGR.html](http://jgr.markushelbig.org/JGR.html)使用 Java 访问 R 语言一样。

# vim - 仅在 GUI 中使用 vim 会话？

> ID：330562
> 
> 赞同：1
> 
> 时间：2008-12-01T11:22:06.183
> 
> 标签：vim

我的使用场景可能看起来有点不寻常，但这里是：当使用 vim（它是我经常使用的大约 4 种不同的编辑器之一）时，我在两种不同的情况下使用它。第一种是通过 GUI，其中我将有多个缓冲区，并且有一些与我从命令行使用它时不同的设置（通过测试“ `if has('gui_running')`”）。另一种是当我需要从命令行做一些简短而快速的事情时，例如对点文件或其他类型的配置进行小的更改。

我*想做*的是为 GUI 启用会话，但让任何命令行调用忽略它们。也就是说，我不想在 CL 调用中调出完整的现有会话，也不希望它（以及它涉及的任何缓冲区/文件）更改 GUI 正在使用的会话。由于我对 vim 的后 vi 功能还很陌生，所以我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T12:32:56.897

在你的`.gvimrc`和你的`.vimrc`. GUI 将同时获取两者，但 CL 版本将仅获取`.vimrc`.

会话魔术是设置自动命令以在退出时将会话写入文件，并在进入时通过获取文件重新加载它。

```
au VimLeave * mksession ~/.gvimsession
au VimEnter * source ~/.gvimsession 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-05-01T21:32:35.193

您可能需要添加一个 ! 到 mksession 以便您每次退出时都不会收到覆盖错误消息。

```
au VimLeave * mksession! ~/.gvimsession
au VimEnter * source ~/.gvimsession 
```

# xml - XSLT、XPath 和 InStr

> ID：330569
> 
> 赞同：6
> 
> 时间：2008-12-01T11:24:47.377
> 
> 标签：xml, xslt, xpath

有没有办法找到与部分值匹配的节点。

如果我有以下情况：

```
<competition id="100" name="Barclays Premier League"/>
<competition id="101" name="CocaCola Championship" />
<competition id="102" name="CocaCola League 1" /> 
```

给定字符串“Premier League”甚至“Prem”，我将如何匹配正确的节点并获得 id 100。

我已经使用 for-each 和 contains 进行了管理，但这非常低效，并且无法满足我们的要求。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-01T11:33:19.187

字符串处理并不是 XSLT 擅长的，但有一些选择。

在这种情况下，您可以尝试：

```
//competition[contains(@name,'Prem')] 
```

有关更多选项和详细信息，请参见[此处](http://www.w3schools.com/Xpath/xpath_functions.asp#string)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T13:31:44.143

采用：

**    `//competition[contains(@name, 'Prem')]/@id`**

在其他情况下，诸如：[**starts-with()**](http://www.w3.org/TR/xpath#function-starts-with)或[**ends-with()**](http://www.w3.org/TR/xpath-functions/#func-ends-with)（仅限 XPath 2.0）之类的函数可能很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T12:38:32.627

还有一个“匹配”函数，它使用正则表达式，但这仅在 XSL 2.0 中可用。

# asp.net - DataGrid 中的 DataBound DropDownList - 绑定顺序

> ID：330571
> 
> 赞同：0
> 
> 时间：2008-12-01T11:27:55.017
> 
> 标签：asp.net, data-binding, datagrid, webforms, drop-down-menu

我有一个看起来像这样的 DataGrid（这里稍微简化了）：

```
<asp:DataGrid ID="grdQuotas" runat="server" AutoGenerateColumns="False">
    <HeaderStyle CssClass="quotas-header" />
    <Columns>
        <asp:TemplateColumn>
            <HeaderTemplate>
                Max order level</HeaderTemplate>
            <ItemTemplate>
                <asp:DropDownList ID="ddlMaxOrderLevel" runat="server" DataSourceID="xdsOrderLevel"
                    DataTextField="Text" DataValueField="Value" SelectedValue='<%# Bind("MaxOrderLevel") %>'>
                </asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateColumn>
    </Columns>
</asp:DataGrid>

<asp:XmlDataSource ID="xdsOrderLevel" runat="server" DataFile="~/App_Data/OrderLevels.xml">
</asp:XmlDataSource> 
```

在我的`Page_Load`事件处理程序中，我正在创建一个`DataTable`包含默认值并将`DataBind`其添加到`DataGrid`.

问题是这是在**ddlMaxOrderLevel**绑定到它*之前*发生的，所以我收到一个运行时错误，告诉我无法设置。`DropDownList` **`DataSource``SelectedValue`**

 **如果**ddlMaxOrderLevel**不在 a`DataGrid`我可以调用`DataBind()`它。但是，在这种情况下我不能这样做 - 因为它位于`ItemTemplate`.

任何人都可以提出解决方法或替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T12:14:13.457

您可以在 DataGrid 的 Databound 事件中对 DropDownlist 进行数据绑定。

编辑：我会给你一个我测试过的例子：

```
 protected void dg_ItemDataBound(object sender, DataGridItemEventArgs e)
    {
        if (e.Item.ItemType != ListItemType.Header && e.Item.ItemType != ListItemType.Footer)
        {
            DropDownList dl = (DropDownList)((DataGridItem)e.Item).FindControl("ddlMaxOrderLevel");

            dl.DataSource = levels;
            dl.DataBind();

            dl.SelectedValue = ((DataRowView)e.Item.DataItem)["number"].ToString();

        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-09T14:09:38.317

创建另一个 DataSource 并将其绑定到 DataGrid。SelectMethod 将在简单对象中返回默认值。

然后所有的绑定应该愉快地一起工作。

# python - 用于虚拟主机控制面板应用程序的 CherryPy

> ID：330573
> 
> 赞同：1
> 
> 时间：2008-12-01T11:29:47.697
> 
> 标签：python, multithreading, fork, cherrypy

很长一段时间以来，我一直想开始一个宠物项目，旨在及时成为一个网络托管控制面板，但主要专注于 Python 托管——这意味着我想为用户提供一种生成/启动 Django 的方法/ 面板中的其他框架项目。我似乎找到了用它来构建我的应用程序的完美工具：CherryPy。

这将允许我按照自己的方式进行操作，使用自己的 HTTP/HTTPS 服务器以及我最喜欢的编程语言构建应用程序。

但是现在出现了一个新问题：由于 CherryPy 是一个线程服务器，它是否适合这种任务？

会有很多耗时的任务，所以如果其中一个任务阻塞，其余试图访问其他页面的用户将等待并最终超时。

我想这种问题不会发生在基于分叉的服务器上。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T11:54:45.633

“Threaded”和“Fork based”服务器是等价的。“线程”服务器具有多个执行线程，如果一个阻塞，那么其他线程将继续。“基于分叉”的服务器有多个正在执行的进程，如果一个进程阻塞，那么其他进程将继续执行。唯一的区别是，默认情况下，线程服务器将在线程之间共享内存，默认情况下“基于分叉”的服务器不会共享内存。

还有一点——“子进程”模块不是线程安全的，所以如果你尝试从 CherryPy 中使用它，你会得到奇怪的错误。（这是[Python 错误 1731717](http://bugs.python.org/issue1731717)）

# asp.net - 使用 Application_BeginRequest 进行 url 重写

> ID：330585
> 
> 赞同：2
> 
> 时间：2008-12-01T11:37:26.917
> 
> 标签：asp.net, url-rewriting

到目前为止，我们一直在使用自定义 404 页面重写 URL：该 url 不会映射到站点中的任何文件，并且我们将 IIS 配置为将 404 错误发送到将这些 url 重定向到正确 URL 的 aspx 页面。
现在我们要停止使用重定向，所以在阅读了 Scott Guthrie 关于 Url Rewriting 的文章后，我想在 Global.asax 中使用 Application_BeginRequest。问题是我们的很多 url 都没有被重写，并且可以在没有任何干预的情况下到达正确的位置。我担心现在每个请求都必须通过 Application_BeginRequest 方法（甚至是未重写的 url），我担心这会减慢它们的加载时间。
你怎么看？使用 Application_BeginRequest 时加载时间是否存在问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T11:53:23.483

无论如何，每个请求都会通过 Application_BeginRequest。

您需要添加一些逻辑，以便只更改那些需要重写的页面。

那一点点逻辑不会很昂贵。

我已经使用了它，并且根本没有注意到性能下降。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T12:10:57.910

如果您要更频繁地使用它并且模仿 Apache 模块 mod_rewrite，那么有非常强大的解决方案，我喜欢这个，因为我已经使用过它并且它没有给我带来任何问题：

[http://www.codeplex.com/IIRF](http://www.codeplex.com/IIRF)

或者：

[http://urlrewriter.net/](http://urlrewriter.net/)

[http://www.managedfusion.com/products/url-rewriter/](http://www.managedfusion.com/products/url-rewriter/)

您可以在这篇文章中阅读更多选项：

[ASP.NET URL 重写](https://stackoverflow.com/questions/2262/aspnet-url-rewriting)

正如乔希所说，基本文章是： [http ://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-11T10:57:17.933

只是给可能遇到麻烦的其他人的便条。确保拥有

```
<modules runAllManagedModulesForAllRequests="true"> 
```

在你的 web.config

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T12:11:54.443

那篇文章有点老了......现在.NET框架中有更好的方法。有趣的是，我曾经完全按照您正在做的事情（劫持错误处理程序）。

[http://www.singingeels.com/Blogs/Nullable/2007/09/14/URL_ReWriting_The_Right_Way_Its_Easy.aspx](http://www.singingeels.com/Blogs/Nullable/2007/09/14/URL_ReWriting_The_Right_Way_Its_Easy.aspx)

这就是我认为你现在想做的事情。哦，关于性能......这会使您的页面时间增加约 0.00001 秒。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T12:05:19.997

Scott Guthrie 的[文章](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)是一篇不错的文章，但我很好奇您为什么选择通过 Global.asax 执行此操作，而不是像他建议的那样使用 HttpModule。此外，无论如何，Asp.Net 页面生命周期都会贯穿 Global.asax 中的每一个事件。

HttpModule 事件运行每一个请求，只要你没有在你的逻辑中做任何疯狂的事情，那么你应该很高兴。甚至 Application_BeginRequest 方法中的数据库查找也可以通过适当的缓存来缓解。

如有疑问，请将一些信息写入[Trace](http://msdn.microsoft.com/en-us/library/ms972204.aspx)以准确了解您的例行程序需要多长时间。我想您会发现，与您最昂贵的操作（数据库查找）相比，时间可以忽略不计。

# java - 为什么更改时 JComboBox 上的 itemStateChanged 会被调用两次？

> ID：330590
> 
> 赞同：38
> 
> 时间：2008-12-01T11:40:30.047
> 
> 标签：java, swing, jcombobox, itemlistener

我正在使用带有 ItemListener 的 JComboBox。当值改变时，itemStateChanged 事件被调用两次。第一次调用，ItemEvent 显示选择的原始项目。第二次显示用户刚刚选择的项目。下面是一些测试代码：

```
public Tester(){

    JComboBox box = new JComboBox();
    box.addItem("One");
    box.addItem("Two");
    box.addItem("Three");
    box.addItem("Four");

    box.addItemListener(new ItemListener(){
        public void itemStateChanged(ItemEvent e){
            System.out.println(e.getItem());
        }
    });

    JFrame frame = new JFrame();
    frame.getContentPane().add(box);
    frame.pack();
    frame.setVisible(true);
} 
```

因此，当我将组合框从“一”更改为“三”时，控制台显示：

```
One
Three 
```

有没有办法我可以使用 ItemEvent 来判断它是第二个项目（即用户选择的项目）？如果有人能解释为什么它会被调用两次，那就太好了！

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-01T11:50:46.607

看看这个来源：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Tester {

    public Tester(){

        JComboBox box = new JComboBox();
        box.addItem("One");
        box.addItem("Two");
        box.addItem("Three");
        box.addItem("Four");

        box.addItemListener(new ItemListener(){
            public void itemStateChanged(ItemEvent e){
                System.out.println(e.getItem() + " " + e.getStateChange() );
            }
        });

        JFrame frame = new JFrame();
        frame.getContentPane().add(box);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String [] args) {
        Tester tester = new Tester();
    }
} 
```

使用 getStateChange 确定是否选择或取消选择项目

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-12-01T11:55:32.480

根据这个[线程](http://forums.sun.com/thread.jspa?threadID=5262595&tstart=13094)，

> 当您离开一个结果时它会被触发，然后在设置为另一个结果时再次调用
> 
> 不要听 itemStateChanged。请改用 ActionListener，这对于处理组合事件很有用。
> 如果您需要根据所涉及的项目单独处理取消选择/选择，则需要一个 ItemStateListener。
> 
> 在 itemStateChanged 中更改项目的状态会导致 itemStateChanged 被触发……这称为“重入”。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-01-08T23:57:19.857

我想在组合框中选择并设置后获取索引字符串

```
 comboBox1.addItemListener(new ItemListener() {
            @Override
            public void itemStateChanged(ItemEvent e) {
                if(e.getStateChange() == ItemEvent.SELECTED) {
                    comboBox1ItemStateChanged();
                }
            }
        }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-07-22T19:09:26.363

哟可以这样做：

```
import java.awt.event.*;

jComboBox1.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Hello");
        }
    }); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-12-12T06:15:34.017

```
private void dropDown_nameItemStateChanged(java.awt.event.ItemEvent evt) {                                                 

    if(evt.getStateChange() == ItemEvent.SELECTED)
    {
        String item = (String) evt.getItem();
        System.out.println(item);
    }

} 
```

祝你好运！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-05-13T11:49:42.547

代码是：

```
public class Tester {

    private JComboBox box;

    public Tester() {

        box = new JComboBox();
        box.addItem("One");
        box.addItem("Two");
        box.addItem("Three");
        box.addItem("Four");

        box.addItemListener(new ItemListener() {

            public void itemStateChanged(ItemEvent e) {
                if (e.getStateChange() == 1) {

                    JOptionPane.showMessageDialog(box, e.getItem());
                    System.out.println(e.getItem());
                }
            }
        });

        JFrame frame = new JFrame();
        frame.getContentPane().add(box);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-05-31T08:51:02.457

看这里，

```
box.addItemListener(new ItemListener(){
    public void itemStateChanged(ItemEvent e){
        if(e.getStateChange()== ItemEvent.SELECTED) {
            //this will trigger once only when actually the state is changed
            JOptionPane.showMessageDialog(null, "Changed");
        }
    }
}); 
```

当你选择一个新的选项时，它只会调用一次 JOptionPane，表示那里的代码只会被调用一次。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-26T11:17:50.427

引用[Java 教程](https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners)：

“一次只能在组合框中选择一个项目，因此当用户进行新选择时，先前选择的项目将变为未选择。**因此，每次用户从菜单中选择不同的项目时都会触发两个项目事件**。如果用户选择相同的项目，不会触发任何项目事件。”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-23T03:39:10.533

1.  当从组合框中选择任意项时，它会在内部触发选择更改，即它会调用函数setSelectedItem。
2.  如果实现了显式 itemStateChanged 事件侦听器，则 setSelectedItem 将调用 itemStateChanged。因此，当一个项目被选中时，它调用 setSelectedItem 然后它调用 itemStateChanged。
3.  随着组合框的值发生变化，即使这样也会触发 itemStateChanged 并因此调用 itemStateChanged。
4.  我已经为项目更改编写了监听器，以处理从代码内部设置时组合框值的变化，这导致函数被调用两次。

这是 2 个回溯，当从组合框中选择一个值时会调用它。

**第一次实际值变化：**

```
dataMgr.MainInterface.jComboBoxPaymentStatusValueChangeHandle(MainInterface.java:1431), 
dataMgr.MainInterface.jComboBoxPaymentStatusItemStateChanged(MainInterface.java:1676), 
dataMgr.MainInterface.access$600(MainInterface.java:28), 
dataMgr.MainInterface$7.itemStateChanged(MainInterface.java:437), 
javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1223), 
javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1271), 
javax.swing.JComboBox.contentsChanged(JComboBox.java:1330), 
javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:118), 
javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:93), 
javax.swing.JComboBox.setSelectedItem(JComboBox.java:576), javax.swing.JComboBox.setSelectedIndex(JComboBox.java:622), javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:852), java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290), java.awt.Component.processMouseEvent(Component.java:6533), javax.swing.JComponent.processMouseEvent(JComponent.java:3324), javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(BasicComboPopup.java:501), java.awt.Component.processEvent(Component.java:6298), java.awt.Container.processEvent(Container.java:2236), java.awt.Component.dispatchEventImpl(Component.java:4889), java.awt.Container.dispatchEventImpl(Container.java:2294), java.awt.Component.dispatchEvent(Component.java:4711), java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888), java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525), java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466), java.awt.Container.dispatchEventImpl(Container.java:2280), java.awt.Window.dispatchEventImpl(Window.java:2746), java.awt.Component.dispatchEvent(Component.java:4711), java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758), java.awt.EventQueue.access$500(EventQueue.java:97), java.awt.EventQueue$3.run(EventQueue.java:709), java.awt.EventQueue$3.run(EventQueue.java:703), java.security.AccessController.doPrivileged(Native Method), java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76), java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86), java.awt.EventQueue$4.run(EventQueue.java:731), java.awt.EventQueue$4.run(EventQueue.java:729), java.security.AccessController.doPrivileged(Native Method), java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76), java.awt.EventQueue.dispatchEvent(EventQueue.java:728), java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201), java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116), java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105), java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101), java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93), java.awt.EventDispatchThread.run(EventDispatchThread.java:82)] 
```

**第二次由于对组合框的操作**

```
dataMgr.MainInterface.jComboBoxPaymentStatusValueChangeHandle(MainInterface.java:1431), 
dataMgr.MainInterface.jComboBoxPaymentStatusItemStateChanged(MainInterface.java:1676), 
dataMgr.MainInterface.access$600(MainInterface.java:28), 
dataMgr.MainInterface$7.itemStateChanged(MainInterface.java:437), 
javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1223), 
javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1280), 
javax.swing.JComboBox.contentsChanged(JComboBox.java:1330), 
javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:118), 
javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:93), 
javax.swing.JComboBox.setSelectedItem(JComboBox.java:576), 
javax.swing.JComboBox.setSelectedIndex(JComboBox.java:622), 
javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:852), 
java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290), 
java.awt.Component.processMouseEvent(Component.java:6533), 
javax.swing.JComponent.processMouseEvent(JComponent.java:3324), 
javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(BasicComboPopup.java:501), 
java.awt.Component.processEvent(Component.java:6298), java.awt.Container.processEvent(Container.java:2236), 
java.awt.Component.dispatchEventImpl(Component.java:4889), java.awt.Container.dispatchEventImpl(Container.java:2294), 
java.awt.Component.dispatchEvent(Component.java:4711), java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888), 
java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525), java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466), 
java.awt.Container.dispatchEventImpl(Container.java:2280), java.awt.Window.dispatchEventImpl(Window.java:2746), 
java.awt.Component.dispatchEvent(Component.java:4711), java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758),
java.awt.EventQueue.access$500(EventQueue.java:97), java.awt.EventQueue$3.run(EventQueue.java:709), 
java.awt.EventQueue$3.run(EventQueue.java:703), java.security.AccessController.doPrivileged(Native Method),
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76), 
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86), 
java.awt.EventQueue$4.run(EventQueue.java:731), java.awt.EventQueue$4.run(EventQueue.java:729), 
java.security.AccessController.doPrivileged(Native Method), java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76), java.awt.EventQueue.dispatchEvent(EventQueue.java:728), java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201), java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116), java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105), java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101), java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93), java.awt.EventDispatchThread.run(EventDispatchThread.java:82)] 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2010-12-22T07:37:16.277

`JComboBox.setFocusable(false)`会成功的。

# zend-framework - zend 框架堆栈跟踪

> ID：330601
> 
> 赞同：3
> 
> 时间：2008-12-01T11:50:03.567
> 
> 标签：zend-framework

有没有办法让堆栈跟踪在出现错误时显示整个生成的 SQL 语句，而不是只显示它的前几个字符？

这是它当前显示的内容

> ...\Zend\Db\Adapter\Pdo\Abstract.php(220): Zend_Db_Adapter_Abstract->query('UPDATE "diction...', Array)

..我想在发送到数据库之前查看整个更新语句以跟踪它有什么问题。

谢谢您的帮助。SWK

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-01T20:35:11.463

如果要查看完整的 sql 语句，可以使用 Zend_Debug。例如，如果您的 sql 语句在变量 $select 中，并且您想查看完整的 sql 语句，您可以使用以下代码行：

```
Zend_Debug::Dump($select);
exit; 
```

或者，如果您的代码是使用 Zend_Db_Table 类创建的，您可以使用：

```
$select = new Zend_Db_Select(Zend_Registry::get('db'));
$select->from('string');
Zend_Debug::Dump($select->assemble());
exit; 
```

我认为查看 sql 语句的最佳方法是在数据库连接上使用 profiling 函数。这与日志记录功能相结合，Firefox 的 firePHP 插件是我最喜欢的设置。

如果您使用 Zend Framework 的 MVC 配置，则这行代码完成：

```
// setup the database connection
$db = Zend_Db::factory(Zend_Registry::get('config')->database->adapter,Zend_Registry::get('config')->database->params);

// create a new profiler
profiler = new Zend_Db_Profiler_Firebug('All DB Queries');

// enable profiling (this is only recommended in development mode, disable this in production mode)
$profiler->setEnabled(true);
// add the profiler to the database object
$db->setProfiler($profiler);

// setup the default adapter to use for database communication
Zend_Db_Table_Abstract::setDefaultAdapter($db);

// register the database object to access it in other parts of the project
Zend_Registry::set('db',$db);

/**
*
* This part is optional
*
* You can use this logger to log debug information to the firephp add-on for Firefox
* This is handy for debugging but must be disabled in production mode
*
*/

// create logger
$logger = new Zend_Log();

// create firebug writer
$firebug_writer = new Zend_Log_Writer_Firebug();

// add writer to logger
$logger->addWriter($firebug_writer);

// register the logger object to access it in other parts of the project
Zend_Registry::set('log',$logger); 
```

firebug 插件（firephp 的要求）可以在这个网站上找到： [Firebug](http://getfirebug.com/)

FirePHP 插件可以在这个网站上找到： [FirePHP](http://www.firephp.org/)

伊沃·特罗珀特

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-30T14:55:12.810

虽然分析器很酷 - 当系统抛出异常时它无助于调试..

查看这篇关于给出更详细的堆栈跟踪 inc 完整 SQL 的帖子

仅出于明显的原因在开发环境中使用

[http://www.edmondscommerce.co.uk/blog/zend-framework/zend-framework-more-detailed-stack-trace/](http://www.edmondscommerce.co.uk/blog/zend-framework/zend-framework-more-detailed-stack-trace/)

# iis - Changing IIS6 Site Home Directory with Powershell

> ID：330608
> 
> 赞同：6
> 
> 时间：2008-12-01T11:57:29.357
> 
> 标签：iis, powershell, scripting, iis-6

I'm trying to change a site's home directory using powershell. This is what I have so far, but it isn't saving the changes...

```
$server = "localhost"
$siteName = "mysite"
$iis = [ADSI]"IIS://$server/W3SVC"
$site = $iis.psbase.children | where { $_.keyType -eq "IIsWebServer" 
        -AND $_.ServerComment -eq $siteName }
$path = [adsi]($site.psbase.path+"/ROOT")

$path.path = "D:\Sites\mysite\www2"
$site.psbase.CommitChanges() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-01T13:32:05.827

```
$server = "localhost"
$siteName = "mysite"
$iis = [ADSI]"IIS://$server/W3SVC"
$site = $iis.psbase.children | where { $_.keyType -eq "IIsWebServer" 
        -AND $_.ServerComment -eq $siteName }
$path = [adsi]($site.psbase.path+"/ROOT")
$path.path
$path.psbase.properties.path[0] = "D:\Sites\$siteName\www2"
$path.path
$path.psbase.CommitChanges() 
```

# objective-c - NSAnimationContext 结束时如何触发回调？

> ID：330609
> 
> 赞同：4
> 
> 时间：2008-12-01T11:57:41.727
> 
> 标签：objective-c, cocoa, macos, core-animation

我有一个动画可以移动一些视图。当这个动画完成时，我希望窗口重新计算 keyview 循环。我的代码类似于以下模拟代码：

```
[NSAnimationContext beginGrouping];        
[newView setAlpha: 0.0]; //hide newView
[self addSubView:newView];

//position the views
[[oldView animator] setFrame: newFrame1];
[[newView animator] setFrame: newFrame2];

[[newView animator] setAlpha: 1.0]; //fade-in newView

[NSAnimationContext endGrouping]; 

[[self window] recalculateKeyViewLoop]; 
```

这段代码的问题`recalculateKeyViewLoop`是在视图处于新位置之前调用，这意味着 keyviewloop 是错误的。

我该如何解决？

我的第`recalculateKeyViewLoop`一个方法是在动画结束时调用回调，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T22:29:31.453

不太明显的事情，或者至少对我来说不是，是当你做 a 时有两个动画`setFrame:`，用键`frameSize`和`frameOrigin`.

根据您的原始帧和最终帧是什么，您可能需要将自己注册为其中一个或两个的代表。

我还建议您复制您从中返回的动画`-animationForKey:`并将修改后的副本存储在`animations`对象的字典中。这样，您的委托只会在特定对象的动画持续时间结束时被调用，而不是为该键设置动画的所有对象。

例如。

```
CAAnimation *animation = [[view animationForKey:@"frameOrigin"] copy];
animation.delegate = self;
[view setAnimations:[NSDictionary dictionaryWithObject:animation forKey:@"frameOrigin"]]; 
```

这样，您的动画对象将取代该视图的默认动画对象。然后实现您感兴趣的任何委托方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T15:17:48.220

您应该能够发送`-animationForKey:`到您的视图以获取一个`CAAnimation`实例，然后将自己设置为它的委托并实现[Adam 提到](https://stackoverflow.com/questions/330609/how-do-i-trigger-a-callback-when-a-nsanimationcontext-ends#330759)的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T13:00:57.077

如果你使用 CAAnimation 这有一个 animationDidStop:finished: 委托方法..

[http://developer.apple.com/documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation](http://developer.apple.com/documentation/GraphicsImaging/Reference/CAAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CAAnimation)

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-10T03:27:53.933

您可以使用这样的完成处理程序：

```
[NSAnimationContext runAnimationGroup:^(NSAnimationContext *context){
    // Start some animations.
    [[myView animator] setFrameSize:newViewSize];
    [[myWindow animator] setFrame:newWindowFrame display:YES];
} completionHandler:^{
    // This block will be invoked when all of the animations started above have completed or been cancelled.
    NSLog(@"All done!");
}]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-10-27T15:53:40.687

在这里查看我的帖子：[我将如何在 OSX 上制作这个 iOS 动画？](https://stackoverflow.com/questions/7788998/how-would-i-do-this-ios-animation-on-osx/7880009#7880009)

我写了一个类来为你处理这个，使用块。希望您的目标允许阻止！:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-04T12:45:53.960

如果您正在动画 an `NSWindow`（而不是 an `NSView`），则其他答案将不起作用，您应该这样做：

```
CAAnimation *animation = [CABasicAnimation animation];
animation.delegate = self;
self.window.animations = @{@"frame": animation};
[[self.window animator] setFrame:NSMakeRect(0, 0, 400, 200) display:YES]; 
```

然后它将`animationDidStop:finished:`在您的委托上调用该方法（在上面的代码中将是`self`）

# sql - SQL 查找非空列

> ID：330612
> 
> 赞同：5
> 
> 时间：2008-12-01T11:59:39.290
> 
> 标签：sql

我有一个时间序列数据表，我需要在其中找到在给定时间段内至少包含一个非空值的所有列。到目前为止，我正在使用以下查询：

```
select max(field1),max(field2),max(field3),... 
   from series where t_stamp between x and y 
```

之后，我检查结果的每个字段是否包含非空值。

该表有大约 70 列，一个时间段可以包含 >100k 条目。

我想知道是否有更快的方法来做到这一点（仅使用标准 sql）。

编辑：不幸的是，重构表设计不是我的选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T15:02:07.113

EXISTS 操作可能会更快，因为它可以在找到任何符合条件的行后立即停止搜索（与您正在使用的 MAX 相比）。这取决于您的数据以及您的 SQL 服务器的智能程度。如果您的大多数列的非空数据率很高，那么此方法将快速找到行并且应该快速运行。如果您的列主要是 NULL 值，那么您的方法可能会更快。我会给他们一个机会，看看他们是如何优化的以及他们是如何运行的。另请记住，如果您的数据分布发生显着变化，性能可能会随时间而变化。

此外，我只在 MS SQL Server 上对此进行了测试。一年多来，我不必编写严格的 ANSI 兼容 SQL 代码，所以我不确定这是否完全通用。

```
SELECT
     CASE WHEN EXISTS (SELECT * FROM Series WHERE t_stamp BETWEEN @x AND @y AND field1 IS NOT NULL) THEN 1 ELSE 0 END AS field1,
     CASE WHEN EXISTS (SELECT * FROM Series WHERE t_stamp BETWEEN @x AND @y AND field2 IS NOT NULL) THEN 1 ELSE 0 END AS field2,
... 
```

EDIT: Just to clarify, the MAX method might be faster since it could determine those values with a single pass through the data. Theoretically, the method here could as well, and potentially with less than a full pass, but your optimizer may not recognize that all of the subqueries are related, so it might do separate passes for each. That still might be faster, but as I said it depends on your data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T12:07:21.113

使用不同的表格设计会更快：

```
create table series (fieldno integer, t_stamp date);

select distinct fieldno from series where t_stamp between x and y; 
```

拥有一个包含 70 个“相似”字段的表通常不是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T13:03:23.513

当您说“执行此操作的更快方法”时，如果您的意思是查询运行的更快方式，那么是的，这是如何做到的：将其分解为每列一个查询：

`select top 1 field1 from series where t_stamp between x and y and field1 is not null`

`select top 1 field2 from series where t_stamp between x and y and field2 is not null`

`select top 1 field3 from series where t_stamp between x and y and field3 is not null`

这样，您将不会对整个表进行表扫描以找到最大值。相反，一旦发现非空值，数据库引擎就会停止。假设您的数据不是 99% 的空值，这应该可以让您更快地执行 - 但代价是需要更多的编程时间来设置它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T13:40:16.123

这个怎么样...您查询可以迭代的字段名称列表。

```
select 'field1' as fieldname from series 
   where field1 is not null and t_stamp between x and y
UNION
select 'field2' from series where field2 is not null 
... etc 
```

然后你有一个记录集，它只包含不为空的字段的字符串名称。然后，您可以遍历此记录集以将您的真实查询构建为动态 SQL，并忽略没有任何数据的字段。当没有匹配 where 子句的条件时，“select 'field2'”将不会返回字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T12:07:17.603

编辑：我想我误读了这个问题......这将为您提供所有具有非空值的*行。*我会把它留在这里，以防它对某人有帮助，但这不是你问题的答案。谢谢@Pax

我想你想使用[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

`SELECT ... WHERE COALESCE(fild1, field2, field3) IS NOT NULL`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T12:08:35.183

首先，这对于标准 SQL 来说是一个非常糟糕的主意，因为并非所有 DBMS 都使用 NULL 最后排序。

有各种棘手的方法可以做到这一点，而且大多数都会非常缓慢。

我建议您（某种程度上）对数据库进行更多规范化，以便每个列都在一个单独的表中，这将使选择更容易，但这可能不是您想要的。

问题编辑后：如果重构表设计不是一个选项，那么您给定的解决方案可能是最好的，特别是如果您对所有 70 列都有索引。

尽管这可能会大大降低插入速度，但您可能希望使用非索引表以获得最大插入速度并定期（隔夜？）将数据传输到索引表，该表将以最佳速度运行您的选择（通过避免全表扫描）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-01T12:28:10.650

```
select count(field1),count(field2),count(field3),... 
   from series where t_stamp between x and y 
```

将告诉您每列中有多少个非空值。不幸的是，它并不比你现在做的方式好多少。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-01T12:29:15.283

试试这个：

```
SELECT CASE WHEN field1 IS NOT NULL THEN '' ELSE 'contains null' END AS field1_stat,
       CASE WHEN field2 IS NOT NULL THEN '' ELSE 'contains null' END AS field2_stat,
... for every field to be checked
FROM   series
WHERE  foo IN bar
GROUP BY CASE WHEN field1 IS NOT NULL THEN '' ELSE 'contains null' END,
         CASE WHEN field2 IS NOT NULL THEN '' ELSE 'contains null' END 
... etc 
```

这将为您提供有关表中“空”字段组合的摘要

# c# - Programming language where you can refer to a array element by . (dot)

> ID：330622
> 
> 赞同：1
> 
> 时间：2008-12-01T12:05:45.563
> 
> 标签：c#, arrays

In C# language when you refer to an array element you can write:

myclass.my_array['element_name'] = new Point(1,1);

I think about refering to a element with name element_name by using dot in place of backets:

myclass.my_array.element_name = new Point(1,1);

Do you know any language where exists similar syntax to the example above?

What do you think about this example of refering to a array element? Is this good or is it as bad as my writing in english skills?

Kind regards

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-01T12:33:13.560

JavaScript does exactly what you describe. In JavaScript, every object is just a map of property names to values. The bracket operator just returns a property by name (or by value in the case of an integer index). You can refer to named properties by just using a dot, though you can't do that with integer indicies. [This page](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Operators/Member_Operators) describes the bracket operator and dot notation in detail.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T12:13:40.290

You could almost certainly do this in any dynamic language, by handling property/variable access as an indexer if the specified property/variable didn't actually exist. I suspect that many dynamic languages already provide this functionality in some areas.

It's possible that in C# 4 you'll be able to make your objects behave like this if you really want to.

However, I would agree with the implicit judgement in Mohit's question - I see no reason to consider this more generally readable than using the more common indexer syntax, and it will confuse people who are used to indexers looking like indexers.

One area where I *would* quite possibly do something like this would be for an XML API, where a property would indicate "take the first element of the given name":

```
XElement author = doc.Root.Posts.Author; 
```

That's quite neat - for the specific cases where it's what you want. Just don't try to apply it too generally...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T12:12:24.880

What would be the advantage of such a syntax for you?

If you have fix names why not create a class with properties?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T12:15:49.553

REXX has the concept of stems, where you can say x.1, x.2 x.bob and these refer to array elements x[1], x[2] and x['bob'] respectively.

In addition LotusScript (in Notes) allows you to process the Notes databases in this fashion, where db.get("fieldname") is the same as db.fieldname.

I've used the REXX one a bit (as there's no choice) but when I've coded for Notes databases, I've preferred the get/put way of doing things.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T12:19:52.447

Lua [tables](http://www.lua.org/pil/2.5.html) have a.x as syntactic sugar for a["x"]. Lua tables are associative arrays that could be used to represent arrays, hashes, and records of other languages. The sugar helps making code more readable by illustrating the intention (Record? Array? Hashtable?), though it makes no difference to the language.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T12:22:46.090

Maybe you are looking for a class or struct if you you want to use the element name as a field/property.

# asp.net - Asp.Net ListView如何删除一行而不从数据源中删除

> ID：330624
> 
> 赞同：4
> 
> 时间：2008-12-01T12:06:38.543
> 
> 标签：asp.net, listview

通过`CommandName="Delete"`我尝试从 ListView 控件中删除一行，而不是从数据源中删除一行。在按下 Delete 键时，我希望网页重新加载并向我显示更新后的 ListView（删除了一行）。但没有任何变化，ListView 将在按 Delete 后显示相同的内容。我做错了什么？

```
 <asp:ListView ID="ListView1"     
                    DataSourceID="XmlDataSource1" 
                    ItemContainerId="DataSection"                       
                    runat="server">        
    <LayoutTemplate>
    <h3>Protocols to Upload...</h3>                               
      <table border=0 style="background-color:#9C9EFF; width: 100%;">  
        <tr align=left>
            <th>Region/Exam/Program</th><th>Protocol</th><th>Position</th>
        </tr>                       
        <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
      </table>
    </LayoutTemplate>                              
    <ItemTemplate>          
      <tr>
        <td><%#XPath("Location/Path")%></td>
        <td><%#XPath("Location/Name")%></td>
        <td><%#XPath("Location/Position")%></td>
        <td style="width:40px">
         <asp:LinkButton  ID="SelectCategoryButton" runat="server" Text="Select" CommandName="Select"/>
        </td>
      </tr>

    </ItemTemplate>       
    <SelectedItemTemplate>
      <tr id="Tr1" runat="server" style="background-color:#F7F3FF">
        <td><%#XPath("Location/Path")%></td>
        <td><%#XPath("Location/Name")%></td>
        <td><%#XPath("Location/Position")%></td>
         <td style="width:40px">
            <asp:LinkButton runat="server" ID="SelectCategoryButton" Text="Delete" CommandName="Delete" />
        </td>
      </tr>
    </SelectedItemTemplate>
   <%-- <ItemSeparatorTemplate>
      <div style="height: 0px;border-top:dashed 1px #ff0000"></div>
    </ItemSeparatorTemplate>--%>
    </asp:ListView>         
    <asp:XmlDataSource ID="XmlDataSource1" XPath="HttpRequestBO/ProtocolsDTO/ProtocolDTO"  runat="server" 
        DataFile="~/HttpRequestBo.Sample.xml"></asp:XmlDataSource> 
```

这是背后的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
}

protected void ListView1_OnItemDeleted(Object sender, ListViewDeletedEventArgs e)
{
    if (e.Exception != null)
    {                   
        e.ExceptionHandled = true;
    }
}

protected void ListView1_OnItemCommand(object sender, ListViewCommandEventArgs e)
{
    if (String.Equals(e.CommandName, "Delete"))
    {
        ListViewDataItem dataItem = (ListViewDataItem)e.Item;
        ListView1.Items.Remove(dataItem);
    }
} 
```

如果我不使用`e.ExceptionHandled = true;`，按 Delete 链接后，网页会出现“不支持指定的方法”。信息。为什么？

如果我使用上面提到的行，那么页面会刷新，但我仍然可以看到所有原始行（尽管在调试时我可以看到 ListVieItem 集合现在只包含一个项目。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T12:56:44.540

这是因为 DatasourceID 参数在原始文件的每个回发时都绑定。

您应该做的是仅在第一页加载时绑定您的列表。删除按钮将按照您的预期工作。

--- 评论后。

好的。事实上，如果您在数据源上定义了 Delete 方法，Delete 命令就会起作用。由于这不是您想要的，您必须定义 ItemCommand 事件处理程序并告诉它删除发出事件的 ListViewItem。

```
protected void yourListView_OnItemCommand(object sender, ListViewCommandEventArgs e)
{
  if (String.Equals(e.CommandName, "Delete"))
  {
    ListViewDataItem dataItem = (ListViewDataItem)e.Item;
    yourListView.Items.Remove(dataItem);
  }
} 
```

它会在不触及下面的 XML 文件的情况下这样做。不要对其进行数据绑定，否则“已删除”行将再次出现。

# html - 如何在 IE 中禁用模态对话框的缓存？

> ID：330625
> 
> 赞同：9
> 
> 时间：2008-12-01T12:07:08.900
> 
> 标签：html, internet-explorer, caching, modal-dialog

我们使用 IE 方法实现了一个弹出窗口作为模式对话框：

```
window.showModalDialog('...aspx') 
```

弹出窗口的目标本身就是一个 ASP.Net 网页。

假设以下步骤从未启动弹出窗口：

1.  启动弹出窗口。
2.  Page_Load 事件处理程序在服务器端执行。
3.  关闭弹出窗口。
4.  立即再次启动弹出窗口。
5.  这次 Page_Load 事件处理程序不执行。

很明显，弹出内容正在被缓存，因为如果在第 4 步我们清除临时 Internet 文件，Page_Load 事件处理程序将第二次执行。

我们已经尝试将以下内容添加到网页的头部（如其他几个来源所推荐的那样），但似乎都没有效果。

```
<meta http-equiv="Cache-Control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" /> 
```

我们还看到[不鼓励使用这些的地方](http://code.google.com/webstats/2005-12/metadata.html)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-01T12:17:48.347

将时间戳查询字符串变量添加到对话框内容的 URL - 自 2008 年 1 月 1 日以来的滴答数或其他东西 - IE 会将其视为新页面并忽略缓存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-02-26T16:04:08.953

要清除缓存，请在页面加载中添加：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-02T09:26:28.600

鉴于 http-equiv 指令不起作用（并且可以说不应该使用），尽管不幸的是它属于 hack 解决方案类别，但我认为我们将不得不这样做（由 Greg 发布）。 ..

```
url = "<Some url with query string>"
var date = new Date();
window.showModalDialog(url + “&amp;” + date.getTime(), ... ); 
```

奇怪的是，没有明确的方法来禁用这些模式对话框上的缓存。我不确定在网络浏览器中使用模式对话框是否被接受为“好主意”，但我们至少知道一些缺点和替代方案，但不幸的是无法在这个项目中使用它们。

感谢您的建议。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T13:53:01.633

将[Fiddler](http://www.fiddlertool.com/fiddler/)放在 IE 和您的服务器之间。然后检查对您的请求的响应是否带有 HTTP 标头*Cache-Control*。*除了no-cache*之外，还有其他一些值吗？如果是这样，那么 IE 可能会将此标头优先于您的*http-equiv*指令。

如果没有，您应该尝试让服务器发送 HTTP 标头*Cache-Control:no-cache*。如果 IE 不尊重这一点，那就是 IE 中的一个错误。经验表明，选择不同的解决方案比要求修正错误更容易，所以在这种情况下，我同意 Greg 的建议。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-10-04T16:41:01.377

首先，我尝试使用以下代码。

```
meta http-equiv="Cache-Control" content="no-cache" 
meta http-equiv="Pragma" content="no-cache" 
meta http-equiv="Expires" content="-1" 
```

但之后没有给出任何解决方案，我尝试使用带有时间戳变量的查询字符串，比如

```
vat time = new Date().getTime();

url?queryString&time=time 
```

然后它工作....

谢谢...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-02T10:32:41.723

您忘记了重新处理页面的标签。

```
<base target="_top" /> 
```

如果你把下面的标签，缓存将被清除：

```
<meta http-equiv="Expires" content="0" />
<meta http-equiv="Cache-Control" content="no-cache, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<base target="_top" /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-07T16:46:27.380

IE 的一个奇怪的怪癖是在文件开头设置 no-cache 似乎不起作用，但是将那个部分移到原始 HTML 之后通常会起作用。仍然最好将其作为 HTTP 标头发送，但以下方法在大多数情况下都有效：

```
<html>
   <head><title>Blah</title></head>
   <body>Contents</body>
</html>
<html>
   <head>
      <meta http-equiv="Cache-Control" content="no-cache" />
      <meta http-equiv="Pragma" content="no-cache" />
      <meta http-equiv="Expires" content="-1" />
   </head>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-18T03:15:27.170

答案 Response.Cache.SetCacheability(HttpCacheability.NoCache); 是唯一能与 IE9 一起正常工作的。如果您在查询字符串中设置了时间戳，您仍然需要刷新页面以获取不同的 URL。因此，除非您使用 Response.Cache.SetCacheability(HttpCacheability.NoCache); 在 URL 和 Response.Cache.SetCacheability(HttpCacheability.NoCache) 上使用时间戳；最好，覆盖所有的基础。毕竟我们要处理的是IE。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-09T03:54:22.383

您还可以在被调用的 aspx 页面顶部尝试以下语句：

```
<%@ OutputCache Location="None" %> 
```

# .net - 使用二进制文件进行基于 PowerShell 的数据库同步

> ID：330630
> 
> 赞同：1
> 
> 时间：2008-12-01T12:09:17.850
> 
> 标签：.net, database, powershell

我编写了一个使用二进制文件作为存储的数据库应用程序。它是通过 powershell cmdlet 访问的。

您可以使用 put- 将信息放入数据库，也可以使用 get- 读取信息。

问题是同步。确保 cmdlet 不会同时访问文件的最佳方法是什么？

put- 必须具有独占访问权限，即没有其他写入者或读取者可以访问该文件。get- 不需要独占访问或读者可以同时访问数据库。

我最好使用基于文件的锁定机制还是基于 .NET 的同步机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-01T12:36:50.930

我认为[互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)在这里可以很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T14:46:12.947

我不知道任何适用于此处的基于 .NET 的同步机制（请继续阅读 - 我做出的假设可能不正确）。

如果您绝对必须对“放置”具有独占访问权限，那么 (a) 基于文件的锁定或 (b) 基于数据库的锁定可能是合适的。例如，一个“put”命令可能首先检查一个特殊的数据库字段，看它是否可以获得独占访问；如果可以，它会更新该字段以显示已获得独占访问权限，从而防止发生另一个同时放置。

如果我正确地解释了您的问题，则该数据库有可能被多台计算机访问，这意味着互斥锁不会真正起作用，因为它们是为线程间同步而设计的。如果不是这种情况，并且在任何给定时间只有一台计算机会访问该文件，那么互斥锁就可以很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T14:55:18.110

我认为现在必须使用互斥锁方法。虽然 PowerShell v2 确实允许轻松远程执行脚本，但我认为目前担心这一点只会妨碍 PowerShell v1 的快速实施。

我使用的数据库只是一个普通的旧二进制文件，所以不幸的是我不能指望数据库为我做同步。

With the mutex, as lots of databases can be interacted with at the same time, do I need to use a named mutex, using the file path as the name, so that I can guarantee that the mutexes are unique for each database?

# asp.net-mvc - 表单在 MVC 中的后续提交操作上提交相同的复选框值

> ID：330649
> 
> 赞同：0
> 
> 时间：2008-12-01T12:16:51.487
> 
> 标签：asp.net-mvc, forms, checkbox

我已经按照这个问题的建议...

[[如何处理 ASP.NET MVC 表单中的复选框？](https://stackoverflow.com/questions/220020/how-to-handle-checkboxes-in-aspnet-mvc-forms][1])

...设置多个具有相同 name="..." 属性的复选框，并且表单在第一次提交时表现如预期。表单的后续提交使用原始的 Guid 值数组，而不是正确发送新的检查项值数组。

视图中的相关代码...

```
 <% foreach (ItemType itemType in ViewData.Model.ItemTypes) %>
        <%{ %>
        <li>
            <input id="selectedItems" name="selectedItems" type="checkbox" value="<%= itemType.Id%>" />
            <%= itemType.Description %></li>
        <%} %> 
```

这会产生一系列复选框，每个项目都有一个复选框，其中 value="..." 属性设置为项目的 Id。

然后在我的控制器操作中，方法签名是......

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult SelectItems(Guid[] selectedItems)
{...} 
```

第一次通过该方法， selectedItems 数组正确保存每个选定项目的 Guid。但是后续提交的表单仍将*始终*包含在初始提交操作中首先选择的内容，无论您在提交表单之前对其检查的内容进行了何种更改。这似乎与我的代码没有任何关系，因为检查 MVC 框架传递给方法的 selectedItems 数组证明框架似乎总是一遍又一遍地提交相同的值。

关闭浏览器，重新开始，在提交时选择不同的初始复选框，然后重新开始该过程（最初选择的复选框 ID*始终*是 selectedItems 参数中的内容）。

假设我一定很厚，并且忽略了框架对表单值的某种缓存，但我发誓这在预览版 5 中不会这样表现。

让我发疯，可能是简单的问题；有任何想法吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T12:29:26.360

FWIW，这是我所做的（不确定是否相关）：

```
 // please MS, stop screwing around!!!!!!!!!!!!!!!
  string r = Request.Form["r"]; 
```

然后继续从“r”中手动提取值。我仍然使用 Preview 4，因为它们确实破坏了太多现有功能，并且没有修复报告的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T13:05:06.990

我不确定是什么导致了您的问题，但我有一个 WAG...

您是否在控制器的 Post 方法中使用 RedirectToAction？

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult SelectItems(Guid[] selectedItems)
{
  /* lol snip */
  return RedirectToAction("WhateverActionIsTheGetVersionOfThisPostAction");
} 
```

它可能有助于重置背景中发生的任何事情......再次，疯狂的猜测......

# string - Symbian C++ 中的 RBuf8 到 char*

> ID：330662
> 
> 赞同：0
> 
> 时间：2008-12-01T12:22:06.077
> 
> 标签：string, symbian, s60

我正在使用这种代码将 Web 服务中的文本字符串下载到 RBuf8 中（它有效..）

```
void CMyApp::BodyReceivedL( const TDesC8& data ) {
    int newLength = iTextBuffer.Length() + data.Length();
    if (iTextBuffer.MaxLength() < newLength)
        {
            iTextBuffer.ReAllocL(newLength);
        }
    iTextBuffer.Append(data);
} 
```

然后我想将 RBuf8 转换为 char* 字符串，我可以在标签或其他任何内容中显示.. 或者出于调试目的，显示在

```
RDebug::Printf("downloading text %S", charstring); 
```

**为清楚起见进行编辑**..

我的转换函数看起来像这样..

无效 CMyApp::DownloadCompleteL() { { RBuf16 buf; buf.CreateL(iTextBuffer.Length()); buf.Copy(iTextBuffer);

```
 RDebug::Printf("downloaded text %S", buf);
    iTextBuffer.SetLength(0);
    iTextBuffer.ReAlloc(0);                                 
} 
```

但这仍然会导致崩溃。我正在使用 S60 第三版 FP2 v1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T12:36:54.533

void RBuf16::Copy(const TDesC8&) 将采用 8 位描述符并将其转换为 16 位描述符。

您应该能够在屏幕上显示任何 16 位描述符。如果它似乎不起作用，请发布您正在使用的特定 API。

当 API 可以与未定义数量的参数一起使用时（如 void RDebug::Printf(const char*, ...) ），%S 用于“指向 16 位描述符的指针”。注意大写的 %S。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T13:12:04.323

您可能需要的是以下效果：

```
RDebug::Print( _L( "downloaded text %S" ), &buf ); 
```

[本教程](http://wiki.forum.nokia.com/index.php/How_to_use_RDebug)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T12:44:43.520

谢谢，%S 是一个有用的提醒。

但是，这似乎不起作用..我的转换功能看起来像这样..

```
void CMyApp::DownloadCompleteL() {
    {
        RBuf16 buf;
        buf.CreateL(iTextBuffer.Length());
        buf.Copy(iTextBuffer);

        RDebug::Printf("downloaded text %S", buf);
        iTextBuffer.SetLength(0);
        iTextBuffer.ReAlloc(0);                 
    } 
```

但这仍然会导致崩溃。我正在使用 S60 第三版 FP2 v1.1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-02T15:47:07.660

您必须在 RDebuf::Printf 中提供一个指向描述符的指针，所以它应该是

```
RDebug::Print(_L("downloaded text %S"), &buf); 
```

尽管不鼓励使用 _L。_LIT 宏是首选。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-01T13:11:40.033

正如 quickrecipesonsymbainosblogspotcom 所述，您需要将指针传递给描述符。

`RDebug::Printf("downloaded text %S", &buf); //note the address-of operator`

这是有效的，因为`RBuf8`它源自`TDes8`（并且与 16 位版本相同）。

# ruby-on-rails - ::Base 部分在 ActiveRecord::Base 中的含义

> ID：330666
> 
> 赞同：9
> 
> 时间：2008-12-01T12:22:56.433
> 
> 标签：ruby-on-rails, ruby

::Base 部分在 Person < ActiveRecord::Base 类声明中是什么意思？我是 ruby​​ 新手，从我目前收集到的信息来看，应该使用 Person < ActiveRecord。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-01T12:42:12.557

::Base 是模块 ActiveRecord 中的一个类。模块所做的其中一件事是在 Ruby 中提供命名空间。在 Ruby 中，您不会从模块继承，但您可以使用 include 语句将其混合在一起。

我可以建议拿起[Pickaxe](http://www.pragprog.com/titles/ruby3/programming-ruby-1-9)书或阅读[Why's (Poignant) Guide to Ruby](http://poignant.guide/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T12:41:13.340

在 Ruby 中，`::`访问静态类或模块常量。`ActiveRecord::Base`表示`ActiveRecord`该类或模块有一个名为`Base`您正在扩展的静态内部类。

**编辑：**正如迈克指出的那样，在这种情况下`ActiveRecord`是一个模块......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-25T06:14:05.553

`::`是一个一元运算符，可让您访问在另一个类或模块中定义的常量、模块或类。它用于提供命名空间，以便方法和类名不会与不同作者的其他类冲突。

当您在 Rails 中看到 ActiveRecord::Base 时，这意味着在 Rails`ActiveRecord::Base` 中是这样的

```
module ActiveRecord
  class Base
  end
end 
```

这意味着一个被调用的*类*`Base`在一个*模块* `ActiveRecord`中，然后被引用为`ActiveRecord::Base`

为了更好地理解 :: 运算符，只需从[tutorialspoint.com](http://www.tutorialspoint.com/ruby/ruby_operators.htm)浏览这个示例：

```
MR_COUNT = 0        # constant defined on main Object class
module Foo
  MR_COUNT = 0
  ::MR_COUNT = 1    # set global count to 1
  MR_COUNT = 2      # set local count to 2
end
puts MR_COUNT       # this is the global constant
puts Foo::MR_COUNT  # this is the local "Foo" constant 
```

# web-services - 如果客户使用 Microsoft ISA Server，则在代码中授权代理访问

> ID：330668
> 
> 赞同：0
> 
> 时间：2008-12-01T12:23:44.653
> 
> 标签：web-services, proxy

我的代码提供了对我们网络服务的访问。

WebProxy 代理 = new WebProxy(ProxyURL, ProxyPort); proxy.UseDefaultCredentials = false;

NetworkCredential nc = new NetworkCredential(ProxyLogin, ProxyPassword); proxy.Credentials = nc;

myWebService.Proxy = 代理；

我的问题是客户不知道 ProxyLogin 和 ProxyPassword，特别是如果他正在运行 Microsoft ISA 服务器。公司政策不允许他知道密码和登录名。

反正有没有通过代码获得授权信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T22:43:55.010

没有办法通过代码获取密码。如果有办法，那将是一个安全漏洞。

用户应该对其帐户具有代理访问权限。如果他没有，那么这一切就结束了。如果他具有代理访问权限，那么您的应用程序应该使用他的凭据。

```
proxy.UseDefaultCredentials = true; 
```

# svn - 单图颠覆

> ID：330673
> 
> 赞同：2
> 
> 时间：2008-12-01T12:25:48.783
> 
> 标签：svn, mercurial

有人知道基本[Subversion](http://subversion.tigris.org/)用法的好插图吗？类似于此目录中的图像：[http](http://www.ivy.fr/mercurial/ref/v1.0/) ://www.ivy.fr/mercurial/ref/v1.0/ （它们用于[Mercurial](http://www.selenic.com/mercurial/wiki/)），单个图像说明了最常见的操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-01T12:35:49.467

那个更详细（来自[Subversion (svn) quickstart](http://agata.in2p3.fr/dotclear/index.php?2005/05/13/6-subversion-svn-quickstart)）：

![替代文字](https://i.stack.imgur.com/aE3jL.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T12:58:37.110

关于从“[我的经验中的 Subversion 分支](http://www.javalinux.it/wordpress/?p=32)”进行**分支**的一个很好的方法

![svn](https://i.stack.imgur.com/aBYFh.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-05T09:30:53.457

我自己的图片，灵感来自 Mercurial one（点击查看大图）：

[替代文字 http://stuff.wfrag.org/tracpy/browser/quicksvn/Subversion-QuickStart-v1.0-60-dpi.png?format=raw](http://stuff.wfrag.org/tracpy/wiki/QuickSVN)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-01T12:48:52.373

[幽默开]（即维基拥有的答案）

那是关于一个非常重要的主题-[将数据发布](http://www.nixonmcinnes.co.uk/2007/11/28/publication-one-project-multiple-developers-part-2/)到生产中-...
并且必须也是我在SVN上看到的最丑陋的模式之一；）

尽管如此，即使对于单个开发人员来说，它也是一个需要考虑的话题，正如[另一个 SO 问题所说明](https://stackoverflow.com/questions/330848)的那样。

![svn](https://i.stack.imgur.com/bbQQ8.jpg)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T12:45:48.823

另一个[很好的介绍](http://aji.techshu.com/svn/)：

[![替代文字](https://i.stack.imgur.com/egDkP.gif)](https://i.stack.imgur.com/egDkP.gif)
[（来源：[idealwebtools.com](http://img.idealwebtools.com/blog/svn.gif)）]

# java - 我如何为 n 牧师访问 n 教会制定时间表？

> ID：330685
> 
> 赞同：4
> 
> 时间：2008-12-01T12:31:18.367
> 
> 标签：java, algorithm, random

我想为许多牧师制定一个时间表。条件是：

1.  每个月，每个牧师都必须去另一个教堂，
2.  牧师不能去他来的同一个教堂
3.  1年内他必须去12个不同的教堂
4.  有13个教会和13个牧师，每个教会每个月只接受1个牧师

我不能使用随机数（1 到 12），因为牧师有可能去同一个教堂（他去同一个教堂的几率为 8.3%）。

我想让他去同一个教堂的机会很小（大约 3% 或更少）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-01T13:31:34.113

您的条件不要求随机选择给定牧师的下一个教堂。你不能只遍历教会列表吗？

也就是说，给每位牧师分配一个数字，0-12。为每个教堂分配一个数字，0-12。第一个月：

> 第0 个月：
> pastor-0 --> Church-0
> Pastor-1 --> Church-1
> Pastor-2 --> Church-2
> ...
> Pastor-N --> Church-N

下个月，只需增加一个计数器（带环绕）

> 第 1 个月：
> pastor-0 --> Church-1
> Pastor-1 --> Church-2
> Pastor-2 --> Church-3
> ...
> Pastor-N --> Church-0

然后重复剩余的几个月：

> 第 3 个月：
> pastor-0 --> Church-2 Pastor
> -1 --> Church-3 Pastor
> -2 --> Church-4
> ...
> Pastor-(n-1) --> Church-0 Pastor
> -n- -> 教堂-1

所有这些都有一个非常简单的循环（O（n））。如果它让你感到困惑，我建议在纸上尝试使用 n=3 的循环。

如果需要随机性，请更新您的问题。

由 PAX 编辑

我正在删除我的答案并投票赞成这个答案，因为它是 O(n) 并且我的扩展以满足编辑将至少是 O(n^2)。

您仍然可以通过将 pastor-0 到 Pastor-N 值索引到一个随机排序的牧师数组中来获得随机性，从而使这个解决方案至少和我的一样好。

由 PAX 结束编辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T13:49:39.083

鉴于您拥有相同数量的牧师和教堂，这里有一个非常简单的算法：

1.  从 0 到 12 给每个教堂编号

2.  构造一个数组，其中包含元素 0 到 12。

3.  对阵列执行 Knuth Shuffle（见下文），生成随机打乱的教堂列表。

4.  每个牧师都从自己的教堂开始（如果牧师没有指定教堂，只需将牧师任意编号为 0 到 12，并将其与具有相同编号的教堂匹配）。每个月，每位牧师都会搬到名单上的下一个教堂。如果他们在名单上的最后一个教堂，他们会去第一个。

这样做的好处是非常容易解释：只需向每位牧师展示打乱的名单，并告诉他们从哪里开始。

Knuth 洗牌（大致）是这样的：

```
def knuth_shuffle(l):
    for i in range(len(l)):
        j = random.randint(i, len(l))
        l[i], l[j] = l[j], l[i] 
```

值得注意的是，在每次迭代中，您都将列表中的当前项目与仅从尚未选择的那些中选择的随机元素*交换*。这确保了可能的 shuffle 的数量与排列的数量完全匹配（因此，它们都具有相等的概率），基于交换随机元素或将当前元素与整个列表中的任何元素交换的天真的 shuffle，不要'没有。

# mysql - 多个搜索条件

> ID：330688
> 
> 赞同：3
> 
> 时间：2008-12-01T12:32:27.413
> 
> 标签：mysql

我正在使用以下查询，但我目前必须在每个参数中输入一个值才能使查询正常工作。有没有办法使参数成为可选参数，以便 1 个或多个值返回结果？

```
SELECT * FROM film
WHERE day LIKE '%day%'
AND month LIKE '%month%'
AND year LIKE '%year%' 
```

* * *

就像是

```
 function queryData(year,month,day) 

 declare Y

 if year == nothing
     Y = '%'
 else
     Y = '%' + year + '%'

 declare M

 if month == nothing
     M = '%'
 else
     M = '%' + month + '%'

 declare D

 if day == nothing
     D = '%'
 else
     D = '%' + day + '%'

 return result of :

 SELECT * FROM film
 WHERE day LIKE D
 OR month LIKE M
 OR year LIKE Y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T13:08:19.650

为什么不动态创建查询？根据您拥有的参数，动态附加过滤器。

例如：

```
string query = "SELECT * FROM film";
string paramenters = string.empty;

if(day!= string.empty)
  parameters = " Where day LIKE '%day%'";

if(month != string.empty)
{
  if(parameters != string.empty)
     parameters += "AND month LIKE '%month%'";
  else
     parameters = "WHERE month LIKE '%month%'";
} 
```

等等....

在这种情况下，您不会得到额外的结果，而`OR`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T12:36:17.843

```
SELECT * FROM film
WHERE day LIKE '%day%'
OR month LIKE '%month%'
OR year LIKE '%year%' 
```

您仍将提供所有三个参数，但它们是空白还是 NULL 无关紧要，匹配仍将从非空白的那些返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T12:57:53.227

使用 OR 而不是 AND 会改变查询的逻辑。它不会使参数成为可选参数。要走的路是不使用你不使用的参数。我不知道还有什么办法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T13:00:20.773

我会将每个参数的默认值设为 %，当有人填写参数时，我会传递 %value%

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T13:24:14.610

我没有测试过，但是只要确保未使用的参数是空字符串，您的查询看起来应该可以工作。例如

```
day = ""
month = "dec"
year = "2008" 
```

将使您的查询：

```
SELECT * FROM film
WHERE day LIKE '%%'
AND month LIKE '%dec%'
AND year LIKE '%2008%' 
```

`'%%'`应该匹配任何字符串，只要它不为 NULL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T14:01:15.130

感谢您的帮助，我结束了以下操作。工作一种享受

```
if year == nothing
   Y = ''
else
   Y = '%' + year + '%' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-10-11T12:15:33.337

如果您希望进行非动态查询，则可以使用以下方法：

```
SELECT * FROM film
WHERE (:daysearch is null or day LIKE :daysearch)
AND (:monthsearch is null or month LIKE :monthsearch)
AND (:yearsearch is null or year LIKE :yearsearch) 
```

虽然，我确实想知道数据库是否会受到性能影响。

# iphone - 可以用 SIMBL 为 iPhone 的 Safari 开发插件吗？

> ID：330700
> 
> 赞同：0
> 
> 时间：2008-12-01T12:35:36.970
> 
> 标签：iphone, cocoa-touch, safari, simbl

可以用 SIMBL 为 iPhone 的 Safari 开发插件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T13:25:23.453

你不能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-01T14:47:28.217

正如 Apple 对 iPhone SDK 的使用条款所明确的那样，任何应用程序都不能运行非本地代码。这意味着，除其他外，没有插件。完全没有。不适用于 Safari，也不适用于您自己的应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-26T15:49:31.707

对于具有 Cydia 的设备，您可以构建一个[MobileSubstrate](http://svn.saurik.com/repos/menes/trunk/mobilesubstrate/)插件。这种插件的一个例子是 DHowett 的[Safari 下载管理器](http://thebigboss.org/2009/08/02/safari-download-manager-100-is-out/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-08-21T03:50:12.063

您还可以创建一个 Safari 网络插件，它加载自定义 UIView 以根据 MIME 类型显示内容。

[http://iphonedevwiki.net/index.php/Internet_Plug-Ins](http://iphonedevwiki.net/index.php/Internet_Plug-Ins)

# c# - 如何使用单个 SqlCommand 插入记录并返回新创建的 ID？

> ID：330707
> 
> 赞同：49
> 
> 时间：2008-12-01T12:37:49.523
> 
> 标签：c#, sql, sql-server

我正在使用 SqlCommand 对象将记录插入到具有自动生成的主键的表中。如何编写命令文本以便在使用 ExecuteScalar() 方法时获得新创建的 ID？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2008-12-01T12:47:40.410

```
INSERT INTO YourTable(val1, val2, val3 ...) 
VALUES(@val1, @val2, @val3...);
SELECT SCOPE_IDENTITY(); 
```

不要忘记每个语句末尾的分号。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-12-01T12:50:13.417

将以下行添加到 Sql 查询的末尾...

```
SELECT SCOPE_IDENTITY() 
```

然后在 SqlCommand 对象上使用 ExecuteScalar 方法...

```
var rowCount = command.ExecuteScalar() 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-12-01T12:45:24.173

```
insert into Yourtable()  
values()  
SELECT SCOPE_IDENTITY() 
```

我刚刚运行了一个测试，并使用 SQL Server 2005 SP2 和 .Net 3.5 验证了分号是可选的

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-01T15:53:32.220

将输出参数添加到命令对象，然后将值设置为存储过程中的新 ID。

**存储过程：**

```
@ID AS INT OUTPUT

[Insert Command]

SET @ID = SCOPE_IDENTITY() 
```

**。网：**

```
cmd.CommandText = "stored_procedure";

SqlParameter pID = new SqlParameter("ID", DBType.Int32, 4);

pID.Direction = ParameterDirection.Output;

cmd.ExecuteScalar();

int id = Convert.ToInt32(cmd.Parameters["ID"].Value.ToString()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-01T12:57:00.610

在插入 stmt 后立即使用

```
SELECT CAST(scope_identity() AS bigint) ---- incase you have a return result as int64 
```

这将返回创建的 id/identity 列。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-01T13:48:26.073

不要使用@@IDENTITY，不管它看起来多么简单。它可能返回不正确的值。

```
SELECT SCOPE_IDENTITY() 
```

似乎是显而易见的选择。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-01T16:50:47.860

虽然我喜欢[Dave Markle 的](https://stackoverflow.com/questions/330707/how-to-insert-a-record-and-return-the-newly-created-id-using-a-single-sqlcommand#330728)回答，（我也看到你这样做了，因为你将其标记为你的答案），但如果你的数据库上有触发器、审计 CUD 操作并且你的审计表有一个 IDENTITY 列，那么该方法可能会失败。它将返回审计表的标识值，而不是您刚刚插入的表，因为审计表实际上发生在之后。

在这种情况下，可以使用更通用的方法，在这两种情况下都可以使用，而不管任何审计。它有点罗嗦，但你得到你付出的代价。

例子：

```
@"DECLARE @tmp AS TABLE ( id int )
                    INSERT INTO case
                    (
                        caseID,
                        partID,
                        serialNumber,
                        hardware,
                        software,
                        firmware
                    )
                    OUTPUT Inserted.ID into @tmp
                    VALUES
                    (
                        @caseID,
                        @partItemID,
                        @serialNumber,
                        @hardware,
                        @software,
                        @firmware
                    )
                Select ID from @tmp" ) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-02T12:57:01.313

如果您的 id 是 Guid，那么我发现这个解决方案是最好的：

```
INSERT INTO YourTable (val1, val2, val3) 
OUTPUT inserted.id 
VALUES (@val1, @val2, @val3) 
```

谢谢@Scott Ivey

完整演示：

```
 internal static Guid InsertNote(Note note)
    {
            Guid id;

            using (
                var connection =
                    new SqlConnection(ConfigurationManager.ConnectionStrings["dbconn"].ConnectionString))
            {
                connection.Open();
                using (
                    var command =
                        new SqlCommand(
                            "INSERT INTO Notes ([Title],[Text]) " +
                            "OUTPUT inserted.id " +
                            $"VALUES ('{title}','{text}');", connection))
                {
                    command.CommandType = CommandType.Text;
                    var reader = command.ExecuteReader();
                    reader.Read();
                    id = reader.GetGuid(reader.GetOrdinal("id"));
                }
                connection.Close();
            }

            return id;
    } 
```

我建议使用存储过程，但这是为了对我们的存储库进行单元测试。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-01T12:46:23.343

直接走出[漩涡](http://forums.whirlpool.net.au/forum-replies-archive.cfm/699785.html)：

> 如果您使用的是 MS SQL，您可以在插入后使用“SELECT @@IDENTITY as Value”来获取生成的最后一个 ID

和：

> `@@IDENTITY`并`SCOPE_IDENTITY`返回当前会话中任何表中生成的最后一个标识值。但是，`SCOPE_IDENTITY`只返回当前范围内的值；`@@IDENTITY`不限于特定范围。

**编辑：**正如评论中指出的那样，您应该始终使用`SCOPE_IDENTITY`，而不是`@@IDENTITY`。

# php - 一些基本的 PHP 问题

> ID：330709
> 
> 赞同：-1
> 
> 时间：2008-12-01T12:39:02.377
> 
> 标签：php

我只是有一些基本的 php 问题来加深我的理解，因为我无法找到简单的答案

1.  我有一个生成 mysql 行表的 php ajax 应用程序。我想知道是否有办法让 php 生成整洁的 html，因为当我回显它时它看起来足够整洁，但是当“查看源代码”时，html 是一个巨大的混乱块，没有换行符或任何东西。这样做有诀窍吗？

2.  限制 mysql 数据库表输出的最佳方法是什么，所以只显示前 10 条左右的记录，并且记录之间会自动生成下一个和上一个链接？

3.  从 mysql 数据库中使用 php 输出信息时，处理布尔值的最佳方法是什么？显示“是”或“否”或勾号或叉号的最简单方法是什么？编辑：我的意思不是我应该使用文字或图片，而是如何显示任何一个以响应布尔值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T13:28:32.417

## 问题 1

您需要将 PHP 代码和 HTML 输出分开。作为新手，最简单的事情是：

*   用您的条目填充一个名为 $tab 的变量。

*   创建一个名为 " `my_tab_template.php`" 的文件，包括您的 xHTML 代码，使用很少的 PHP 解压 $tab 并且仅使用**PHP 替代语法**。

```
<表格>
   <?php foreach ($tab as $line) : ?>
      <tr>
         <?php foreach ($line as $cell) : ?>
           <td><?php echo $cell ?></td>
         <?php endforeach; ?>
      </tr>
    <?PHP endforeach; ?>
</table>

```

*   `my_tab_template.php`填写完 $tab 后立即添加。

不要担心优化和性能，当你开始编码时，这肯定不会成为你的网站瓶颈，你会让一些事情变得更加麻烦;-)

然后，在您的下一个项目中，当您感觉很好时，尝试了解 MVC 模式（对 SO 进行一些搜索可能会有所帮助）。不要听人们谈论模板系统等等。在通过驾驶执照之前，不要尝试开始运行 150 cc。

## 问题2

这不是 PHP 问题。您要做的是限制数据库的输出。您可以使用“LIMIT”SQL 关键字来做到这一点。

您可以使用 ：

*   LIMIT 10 ：这会将您的查询限制为第一行 10 (= LIMIT 0,10)

*   LIMIT X, Y ：这会将您的查询限制为 Y 行，从 X 行开始

请记住在使用 LIMIT 之前使用“ORDER BY”对查询结果进行排序以避免令人讨厌的意外。

PHP中没有自动分页。有一些 PHP 库可以为您完成这项肮脏的工作，但在您使用它们之前，我建议您先破解您自己的解决方案以了解其机制。实际上，这只是检查变量并使用“限制”。

然后你可以看看 PEAR 那里有一个标准的方法来做到这一点。但是不要太努力去寻找它，你最好先自己编码。

## 问题 3

如果您的数据库存储一个布尔值，那么它将输出“0”表示假，其他任何东西（很可能“1”）表示真。只需测试它：

```
if ($my_bool) 
    echo "True";
else
   echo "False"; 
```

在 PHP 中，有一个捷径可以这么说，但你没有义务使用它。无论如何，很高兴知道它的存在。满足布尔运算符：

```
echo  $my_bool ? "True"  : "False" ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T12:55:34.933

1.  如果您想以良好的格式查看 HTML 输出，我建议您使用 Firebug。它将您的所有 HTML 转换为可折叠的树格式，甚至让您只需单击一个项目即可显示它在源代码中的位置。
2.  没有一种简便的方法可以在本地生成搜索结果的分页（仅显示 10 个结果，然后为您提供返回/下一页按钮）。我确信某些框架会在这方面为您提供帮助，但最简单的方法是在您的 SQL 中使用 LIMIT 关键字。eg：你想看第3页吗？`SELECT * FROM mytable LIMIT 20,10`
3.  显示布尔值的最简单方法是这样的：`var_dump($myBool)`它将显示`bool(true)`.
    或者，您可以这样做：`echo $myBool ? "True" : "False";`- 用您认为最容易阅读的内容替换“True”和“False”。
    如果屏幕空间是一个问题，显示布尔值的一种可接受的方式是使用 1 或 0\.
    `echo $myBool ? 1 : 0;`，甚至更短：`echo (int)$myBool;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-07T10:51:34.037

`$amir`用你的变量替换 var

```
<table>
    <?php foreach ($amir as $yasir) : ?>
        <tr>
        <?php foreach ($yasir as $shah) : ?>
            <td>
                <?php echo $shah?>
            </td>
        <?php endforeach; ?>
        </tr>
    <?PHP endforeach; ?>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T12:41:57.333

1.  您可以使用[PHP Tidy Addon](http://de3.php.net/manual/de/intro.tidy.php)。请记住，使用它过滤 HTML 会占用相当多的服务器 CPU。或者，您必须自己打印换行符（回显“\n”；）但是我建议您保持原样。只需考虑有多少人会从阅读源代码中受益，而如果您没有很好地格式化 HTML，有多少人会从较小的文件大小中受益。

2.  您必须手动执行此操作。网上有一些帮助库。只是[谷歌它](http://www.google.de/search?q=php+mysql+paging&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:de:official&client=firefox-a)。

3.  这由您决定并取决于应用程序。牢记您的用户需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T12:47:45.947

1.  有一个非常好的 PHP HTML 模板引擎，叫做 Smarty。

2.  `select * from table limit 10, 10;`将显示 10 到 20 之间的结果

3.  从 UI 的角度来看，这确实是您的决定，我个人会使用 True 或 False

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-01T13:31:55.640

只是触及第一点，因为看起来其他两个已经得到了很好的回答：

如果它在 HTML 中看起来不错，而您只是担心在查看源代码时会出现混乱，只需在打印时在每行的末尾添加“\n”即可。

# silverlight - Silverlight 2.0 - 垂直滚动，水平环绕

> ID：330716
> 
> 赞同：1
> 
> 时间：2008-12-01T12:42:14.477
> 
> 标签：silverlight, xaml, silverlight-2.0, scroll, word-wrap

在银光 2.0 中。我有一些内容要垂直滚动并水平换行。在控件中，我有一个停靠面板。填充它的 DockPanel 的最后一个子项是 ScrollViewer

```
<UserControl x:Class="MyProject.MyControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:WinControls="clr-namespace:Microsoft.Windows.Controls;
      assembly=Microsoft.Windows.Controls" 
    Width="400" Height="300">
    <WinControls:DockPanel LastChildFill="True">
    ...
<ScrollViewer x:Name="MessageScroll" HorizontalScrollBarVisibility="Hidden"
     VerticalScrollBarVisibility="Auto" BorderThickness="0" >
    <Controls:TextDisplay x:Name="TextDisplay"></Controls:TextDisplay>
</ScrollViewer> 
```

TextDisplay 控件 XAML 如下所示：

```
<UserControl x:Class="MyProject.TextDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
        <TextBlock x:Name="TextDisplayText" TextWrapping="Wrap">
        </TextBlock>
</UserControl> 
```

我想要发生的事情： TextDisplay 应该占据控件的主要区域，如果高度不合适，则使用垂直滚动条。消息在水平方向过长时应该换行。

滚动有效，但现在消息不会在右侧边缘换行。他们只是切断了。它不限制宽度，只是隐藏 Horizo​​ntalScrollBar。如果我设置 Horizo​​ntalScrollBarVisibility="Auto" 我可以看到它们向右滚动。我如何强制它包装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T13:03:06.150

尝试将 ScrollViewer 的 Horizo​​ntalScrollBarVisibility 设置为 Disabled（或不指定值，因为 Disabled 是默认值），然后 TextDisplay 将正确换行并且不会显示水平滚动条。

# xml - XML 中大于符号的使用

> ID：330725
> 
> 赞同：73
> 
> 时间：2008-12-01T12:47:19.410
> 
> 标签：xml, xsd

我用 xml version="1.0" 创建了 xml 文档。

在该文档中，我需要使用大于符号`>`和小于符号`<`。

我应该如何包含这些符号？它不工作。

`&gt;`并且`&lt;`不为我工作。

有没有专门的编码器呢？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2008-12-01T12:49:32.230

您需要[字符实体引用](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

`< = &lt;`

`> = &gt;`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-12-01T12:55:41.580

您可以尝试使用[CDATA](https://www.w3schools.com/XML/xml_cdata.asp)来放置所有不起作用的符号。

可以在 XML 中工作的示例：

```
<![CDATA[
function matchwo(a,b) {
    if (a < b && a < 0) {
        return 1;
   } else {
       return 0;
   }
}
]]> 
```

当然，您可以使用`&lt;`and `&gt;`。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-12-01T12:49:27.863

分别用于“大于”和“小于`&gt;`”`&lt;`

# java - 比较 Java 中的无穷大

> ID：330730
> 
> 赞同：10
> 
> 时间：2008-12-01T12:48:11.720
> 
> 标签：java

以下表达式在 Java 中返回什么？

```
Math.max(Float.POSITIVE_INFINITY, Double.POSITIVE_INFINITY); 
```

我在一个网站上看到了这个问题，答案是`Double.POSITIVE_INFINITY`。我不确定这个答案，因为我们如何比较 2 个无穷大？有人可以澄清一下吗？谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-01T13:12:01.297

Float.POSITIVE_INFINITY 返回浮点数，而 Double.POSITIVE_INFINITY 返回双精度数。

没有称为 Math.max(float, double) 的方法。只有 Math.max(float, float) 和 Math.max(double, double)

因此，当该方法被调用 Math.max(float, double) 时，它将 float 参数转换为 double，因此 Math.max(double, double) 被调用，因此 Double.POSITIVE_INFINITY 被返回。

Java 不会从 double 转换为 float，因为它可能会导致精度问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T12:52:03.740

当然，您可以比较无穷大。除非您进入具有不同程度无限的超限编号系统，否则无限意味着它所说的，一个没有限制的数字。

两个无限制数的最大值/和/积/平均是一个无限制数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-01T13:12:57.910

I think you will find that all operations using the special values defined for double and float types is defined in the [IEEE floating point spec](http://en.wikipedia.org/wiki/IEEE_754). Most programming languages and nearly all CPUs follow that standard.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-12-01T12:53:18.277

从数学上讲，您是否可以比较无穷大的问题最好留给这里有更多数学知识的人。但我认为在 Float.POSITIVE_INFINITY 与 Double.POSITIVE_INFINITY 的情况下，只是 Double 大于 Float 的情况，而 POSITIVE_INFINITY 常量只是每种数据类型的最大可能值。

# jquery - jQuery datepicker- 2 个输入/文本框和限制范围

> ID：330737
> 
> 赞同：53
> 
> 时间：2008-12-01T12:49:37.677
> 
> 标签：jquery, jquery-plugins, datepicker, jquery-ui-datepicker

我正在使用带有两个输入框的 jQuery Datepicker 小部件，一个用于**“From”**日期，第二个用于**“To”**日期。我使用[jQuery Datepicker 功能演示](http://jqueryui.com/datepicker/)作为让两个输入框相互配合的基础，但我需要能够添加这些额外的限制：

1.  日期范围不得早于 2008 年 12 月 1 日

2.  **“到”**日期不能迟于今天

3.  选择**“开始”**日期后，**“结束”**日期只能在**“开始”**日期之后的 7 天范围内

4.  如果先选择**“To”**日期，则**“From”**日期只能在**“To”**日期前 7 天的范围内（限制为 12 月 1 日为第一个可选日期）

我似乎无法将上述所有内容一起工作。

总而言之，我希望能够选择从 12 月 1 日到今天之间最多 7 天的范围（我意识到我在 12 月 1 日发布了这个，所以目前只能在今天得到）。

到目前为止我的代码

```
$(function () {

$('#txtStartDate, #txtEndDate').datepicker(
            {
            showOn: "both",
            beforeShow: customRange,
            dateFormat: "dd M yy",
            firstDay: 1, 
            changeFirstDay: false
            });
});

function customRange(input) 
{ 

return {
         minDate: (input.id == "txtStartDate" ? new Date(2008, 12 - 1, 1) : null),
         minDate: (input.id == "txtEndDate" ? $("#txtStartDate").datepicker("getDate") : null), 
         maxDate: (input.id == "txtStartDate" ? $("#txtEndDate").datepicker("getDate") : null)
       }; 
} 
```

我错过了 7 天范围限制，并且还阻止了2008 年 12 月 1 日之前或今天之后的**“到”**日期选择。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2008-12-02T10:35:37.430

非常感谢您的帮助 Ben，我在您的帖子的基础上提出了这一点。它现在已经完成并且工作出色！

这是一个**[工作演示](http://jsbin.com/evudo)**。将**/edit**添加到 URL 以查看代码

完整代码如下 -

```
$(function () 
{   
    $('#txtStartDate, #txtEndDate').datepicker({
        showOn: "both",
        beforeShow: customRange,
        dateFormat: "dd M yy",
        firstDay: 1, 
        changeFirstDay: false
    });

});

function customRange(input) { 
    var min = new Date(2008, 11 - 1, 1), //Set this to your absolute minimum date
        dateMin = min,
        dateMax = null,
        dayRange = 6; // Set this to the range of days you want to restrict to

    if (input.id === "txtStartDate") {
        if ($("#txtEndDate").datepicker("getDate") != null) {
            dateMax = $("#txtEndDate").datepicker("getDate");
            dateMin = $("#txtEndDate").datepicker("getDate");
            dateMin.setDate(dateMin.getDate() - dayRange);
            if (dateMin < min) {
                dateMin = min;
            }
        }
        else {
            dateMax = new Date; //Set this to your absolute maximum date
        }                      
    }
    else if (input.id === "txtEndDate") {
        dateMax = new Date; //Set this to your absolute maximum date
        if ($("#txtStartDate").datepicker("getDate") != null) {
            dateMin = $("#txtStartDate").datepicker("getDate");
            var rangeMax = new Date(dateMin.getFullYear(), dateMin.getMonth(),dateMin.getDate() + dayRange);

            if(rangeMax < dateMax) {
                dateMax = rangeMax; 
            }
        }
    }
    return {
        minDate: dateMin, 
        maxDate: dateMax
    };     
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-06-10T15:26:55.577

我意识到我参加聚会有点晚了，但这是我修改工作示例代码的方式。我不需要设置具体的最大和最小日期，只是不想日期范围重叠，所以我只是让它们相互设置：

```
jQuery(function() {
  jQuery('#calendardatetime_required_to, #calendardatetime_required_from').datepicker('option', {
    beforeShow: customRange
  });
});

function customRange(input) {
  if (input.id == 'calendardatetime_required_to') {
    return {
      minDate: jQuery('#calendardatetime_required_from').datepicker("getDate")
    };
  } else if (input.id == 'calendardatetime_required_from') {
    return {
      maxDate: jQuery('#calendardatetime_required_to').datepicker("getDate")
    };
  }
} 
```

（我的日期选择器已经在脚本中初始化了，但这只是默认设置。）

似乎做我需要的事情:)

有关我的示例，请参见[此处](http://jsbin.com/evudo/26)。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-12-01T21:18:21.313

好吧，这个怎么样：

```
function customRange(input) 
{ 
    var min = new Date(2008, 12 - 1, 1);
    var dateMin = min;
    var dateMax = null;

    if (input.id == "txtStartDate" && $("#txtEndDate").datepicker("getDate") != null)
    {
        dateMax = $("#txtEndDate").datepicker("getDate");
        dateMin = $("#txtEndDate").datepicker("getDate");
        dateMin.setDate(dateMin.getDate() - 7);
        if (dateMin < min)
        {
            dateMin = min;
        }           
    }
    else if (input.id == "txtEndDate")
    {
        dateMax = new Date();
        if ($("#txtStartDate").datepicker("getDate") != null)
        {
            dateMin = $("#txtStartDate").datepicker("getDate");
            dateMax = $("#txtStartDate").datepicker("getDate");
            dateMax.setDate(dateMax.getDate() + 7); 
        }
    }
    return {
     minDate: dateMin, 
     maxDate: dateMax
   }; 

} 
```

这是我能想到的最好的满足你所有要求的（我认为......）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-01T13:37:52.197

考虑使用 rangeSelect 来拥有一个控件而不是两个控件。

为了实现您的目标，我想您需要添加一个 onSelect 侦听器，然后调用`datepicker( "option", settings )`以更改设置。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-01T14:30:13.527

您的 txtStartDate 开始日期不起作用，因为您的第二个 minDate 在第二次检查 input.id 时被设置为 null 。此外，maxDate 应该检查 txtEndDate，而不是 txtStartDate。试试这个：

```
 function customRange(input) 
{ 
    var mDate = (input.id == "txtStartDate" ? new Date(2008, 12 - 1, 1) : $("#txtStartDate").datepicker("getDate"));
    return {
         minDate: mDate, 
         maxDate: (input.id == "txtEndDate" ? $("#txtStartDate").datepicker("getDate").getDate() + 5 : null)
       }; 
} 
```

我不知道为什么是“+ 5”而不是“+ 7”，但是如果我添加 0，我会得到一个可选择的日期范围，即我选择的日期加上下一个日期。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-10-01T22:40:31.550

这是我经过大量挖掘以解决我认为是常见问题的解决方案后提出的解决方案。这有效地在兼容天数的共享输入范围内“反弹”输入。含义 - 如果我有两个字段，任何一个都可以用来约束另一个，如果需要，另一个可以重新定义原始字段。这样做的目的是始终确保两个字段之间只有有限的天数（或数月或其他）。这个具体的例子还限制了未来可以在任一字段中选择某物的时间量（例如 3 个月）。

```
 $("#startdate").datepicker({
   minDate: '+5', 
   maxDate: '+3M',
   changeMonth: true,
   showAnim: 'blind',
   onSelect: function(dateText, inst){ 

    // Capture the Date from User Selection
    var oldDate = new Date(dateText);
    var newDate = new Date(dateText);

    // Compute the Future Limiting Date
    newDate.setDate(newDate.getDate()+5);

    // Set the Widget Properties
    $("#enddate").datepicker('option', 'minDate', oldDate);
    $("#enddate").datepicker('option', 'maxDate', newDate);

    }
  });

 $("#enddate").datepicker({
  minDate: '+5',
  maxDate: '+3M',
  changeMonth: true,
  showAnim: 'blind', 
  onSelect: function(dateText, inst){ 

    // Capture the Date from User Selection
    var endDate = new Date(dateText);
    var startDate = new Date(dateText);

    // Compute the Future Limiting Date
    startDate.setDate(startDate.getDate()-5);

    // Set the Widget Properties
    $("#startdate").datepicker('option', 'minDate', startDate);
    $("#startdate").datepicker('option', 'maxDate', endDate);

    }

  }); 

```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-02-16T09:13:55.697

这就是我使用它的方式：

```
function customRange(input)
{
    var min = new Date();
    return {
        minDate: ((input.id == "txtStartDate") ? min : (input.id == "txtEndDate" ? $("#txtStartDate").datepicker("getDate") : null)),
        maxDate: (input.id == "txtStartDate" ? $("#txtEndDate").datepicker("getDate") : null)
    };
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-13T08:42:31.397

我就是这样做的。我从 Jquery UI 网站获取了源代码并对其进行了修改以添加您的约束。

```
$(document).ready(function ()
{      
  var dates = $('#StartDate, #EndDate').datepicker({
        minDate: new Date(2008, 11, 1), 
        maxDate: "+0D",
        dateFormat: "dd M yy",
        changeMonth: true,
        changeYear: true,
        onSelect: function (selectedDate)
        {
            var option = this.id == "StartDate" ? "minDate" : "maxDate",
                instance = $(this).data("datepicker"),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings);
            var edate;
            var otherOption;
            var d;
            if (option == "minDate")
            {
                otherOption = "maxDate";
                d = date.getDate() + 7;
            }
            else if (option == "maxDate")
            {
                otherOption = "minDate";
                d = date.getDate() - 7;
            }

            var m = date.getMonth();
            var y = date.getFullYear();
            edate = new Date(y, m, d);

            dates.not(this).datepicker("option", option, date);
            dates.not(this).datepicker("option", otherOption, edate);
        }
    });
}); 
```

最初的想法来自：http: [//jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)

**注意：**您还需要一个选项来重置/清除日期（即，如果用户选择“起始日期”，则“截止日期”会受到限制。如果用户现在选择“截止日期”，则在选择“起始日期”后'，起始日期也受到限制。您需要有一个明确的选项以允许用户现在选择不同的“起始”日期。）

# windows - 为表单创建一条可选字母

> ID：330750
> 
> 赞同：1
> 
> 时间：2008-12-01T12:57:14.010
> 
> 标签：windows, winforms

我希望在表单上显示从 a 到 z 的字母列表。每个字母都需要是可点击的，并且该值作为点击参数传递。除了创建 26 个字母并使用每个字母的点击事件之外，有没有人知道一种快速的方法来做到这一点？我知道如何加载动态控件等以及如何做到这一点。只是想知道是否有人知道这样做的聪明方法？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T13:23:04.863

这是我会采用的“动态方式”。我知道您要求其他聪明的方式来做到这一点，但我认为这是最被接受的方式。这将生成这些按钮并添加一个将按钮作为发送者的点击处理程序。如果超出表单宽度，它还将看到按钮位置换行。

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim ButtonSize As New Size(20, 20)
    Dim ButtonLocation As New Point(10, 20)

    For p As Integer = Asc("A") To Asc("Z")
        Dim newButton As New Button            
        If ButtonLocation.X + ButtonSize.Width > Me.Width Then
            ButtonLocation.X = 10
            ButtonLocation.Y += ButtonSize.Height
        End If
        newButton.Size = ButtonSize
        newButton.Location = ButtonLocation
        newButton.Text = Chr(p)
        ButtonLocation.X += newButton.Width + 5
        AddHandler newButton.Click, AddressOf ButtonClicked
        Me.Controls.Add(newButton)
    Next

    End Sub

    Sub ButtonClicked(ByVal sender As Object, ByVal e As System.EventArgs)
        MsgBox(CType(sender, Button).Text)
    End Sub
End Class 
```

[替代文字 http://img235.imageshack.us/img235/2267/testoa6.jpg](http://img235.imageshack.us/img235/2267/testoa6.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T13:36:58.283

您可以使用 FlowLayoutPanel 和这样的循环：

```
private void button1_Click(object sender, EventArgs e)
{
  flowLayoutPanel1.FlowDirection = FlowDirection.LeftToRight;
  flowLayoutPanel1.AutoSize = true;
  flowLayoutPanel1.WrapContents = false; //or true, whichever you like
  flowLayoutPanel1.Controls.Clear();

  for (char c = 'A'; c <= 'Z'; c++)
  {
    Label letter = new Label();
    letter.Text = c.ToString();
    letter.AutoSize = true;
    letter.Click += new EventHandler(letter_Click);
    flowLayoutPanel1.Controls.Add(letter);

  }
}

private void letter_Click(object sender, EventArgs e)
{
  MessageBox.Show("You clicked on " + ((Label)sender).Text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T14:12:08.837

在控件上绘制一个字符串，然后将鼠标单击与窗体上的字符位置相匹配。它实际上比听起来容易（这改编自 MeasureCharacterRanges 上的标准文档，它简化了整个任务）。该示例是在表单上绘制的，将其制作成用户控件会很简单。

在这个例子中，点击一个字母会导致一个消息框出现，告诉你你刚刚点击了哪个字母。

希望能帮助到你。

PS 请原谅“幻数”，例如“已知”数组中将有 25 个项目，这毕竟只是一个示例 :)

```
Public Class Form1

    Const LETTERS As String = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    Private letterRects(25) As System.Drawing.RectangleF
    Private Sub Form1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Click
        Dim index As Integer = -1
        Dim mouseP As Point = Me.PointToClient(MousePosition)
        For i As Integer = 0 To 25
            If letterRects(i).Contains(mouseP.X, mouseP.Y) Then
                index = i
                Exit For
            End If
        Next
        If index >= 0 Then
            MessageBox.Show("Letter = " + LETTERS(index).ToString())
        End If
    End Sub

    Private Sub Form1_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Me.Paint
        ' Set up string.
        Dim stringFont As New Font("Times New Roman", 16.0F)

        ' Set character ranges 
        Dim characterRanges(26) As CharacterRange
        For i As Integer = 0 To 25
            characterRanges(i) = New CharacterRange(i, 1)
        Next

        ' Create rectangle for layout, measurements below are not exact, these are "magic numbers"
        Dim x As Single = 50.0F
        Dim y As Single = 50.0F
        Dim width As Single = 400.0F 
        Dim height As Single = 40.0F
        Dim layoutRect As New RectangleF(x, y, width, height)

        ' Set string format.
        Dim stringFormat As New StringFormat
        stringFormat.FormatFlags = StringFormatFlags.FitBlackBox
        stringFormat.SetMeasurableCharacterRanges(characterRanges)

        ' Draw string to screen.
        e.Graphics.DrawString(letters, stringFont, Brushes.Black, _
        x, y, stringFormat)
        Dim stringRegions() As [Region]
        ' Measure two ranges in string.
        stringRegions = e.Graphics.MeasureCharacterRanges(letters, _
        stringFont, layoutRect, stringFormat)
        For i As Integer = 0 To 25
            letterRects(i) = stringRegions(i).GetBounds(e.Graphics)
        Next
    End Sub
End Class 
```

# winapi - CComPtr CoCreateInstance() 失败

> ID：330752
> 
> 赞同：0
> 
> 时间：2008-12-01T12:57:44.383
> 
> 标签：winapi, com

我有一个`.dll`成功注册的 COM，`regsvr32`但不知何故`CoCreateInstance()`未能创建其接口之一。是否有可以确定失败原因的免费软件工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T13:24:03.487

首先，检查 CoCreateInstance() 调用的返回值。其次，您可以使用 Regmon 或 Process Monitor 之类的工具来查看哪些注册表查找失败。这样，您可以快速确定哪些内容没有按照您期望的方式注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-10T18:57:44.337

如果你的 com dll 是用 C++ 实现的并且有调试信息，你也可以尝试使用 MSVC 调试以进入 CoCreateInstance。

我的猜测是您错过了将您的类与其中一个接口正确关联。我错误地做了很多次。如果您使用 ATL，则需要确保您的实现类派生自接口，并且您还`COM_INTERFACE_ENTRY(I____)`为 COM_MAP 中的接口添加了：

```
BEGIN_COM_MAP(CFileHelper)
    COM_INTERFACE_ENTRY(IFileHelper)
    COM_INTERFACE_ENTRY(IDispatch)
    COM_INTERFACE_ENTRY(IStream)
    COM_INTERFACE_ENTRY(ISupportErrorInfo)
END_COM_MAP() 
```

或者，IDL 文件和实现 C++ 文件中的 GUID 可能不同。MSVC6 有一个烦人的错误，如果向导由于文件权限而无法创建新类（例如，它要更改的某些文件是只读的），但它已经向 IDL 文件添加了 GUID，并且您修复了文件权限并再次执行此操作，GUID 中会出现不一致，并且很难抓住这一点。在理想情况下，GUID 定义将仅驻留在一个文件中，您就不必担心这一点。

如果不是这样，有时会出现关于编组和公寓的奇怪错误，但只有当您有多个线程并且跨线程或接口边界发送接口指针时才会弹出。

# graphics - 转换 Direct3D 网格

> ID：330757
> 
> 赞同：2
> 
> 时间：2008-12-01T12:58:45.083
> 
> 标签：graphics, directx, direct3d, mesh

我试图写一个`TransformMesh`函数。该函数接受一个`Mesh`对象和一个`Matrix`对象。这个想法是使用矩阵变换网格。为此，我锁定了顶点缓冲区，并在每个顶点上调用 Vector3::TransformCoordinate。它没有*产生*预期的结果。生成的网格无法识别。

我究竟做错了什么？

```
// C++/CLI code. My apologies.
int n = verts->Length;
for(int i = 0; i < n; i++){
        verts[i].Position = DX::Vector3::TransformCoordinate(verts[i].Position, matrix);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T18:42:48.627

如果没有围绕您正在做的事情的上下文代码，可能很难知道确切的问题。网格是如何创建的？verts[] 怎么读，怎么写？您是否尝试从只写顶点缓冲区中读取？

我的建议是首先尝试使用非常简单的转换矩阵并调试代码并查看顶点输入和输出。看看您是否收到了良好的数据以及是否正确转换。如果是这样，则问题出在顶点步幅、流声明或 DirectX 管道中更深层次的其他东西上。

正如我所说，需要更多代码来查明问题的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T07:55:32.213

我完全同意 Coincoin，上下文代码会有所帮助。
如果您只想将变换后的网格绘制到屏幕上，则不需要以这种方式变换网格。您可以只更改世界、视图和投影矩阵之一。这会产生预期的结果。就像下面的示例代码一样。

```
 // Clear the backbuffer to a Blue color.
  device.Clear(ClearFlags.Target | ClearFlags.ZBuffer, Color.Blue,   
     1.0f, 0);

  // Begin the scene.
  device.BeginScene();

  device.Lights[0].Enabled = true;

  // Setup the world, view, and projection matrices.
  Matrix m = new Matrix();

  if( destination.Y != 0 )
     y += DXUtil.Timer(DirectXTimer.GetElapsedTime) * (destination.Y 
          * 25);

  if( destination.X != 0 )
     x += DXUtil.Timer(DirectXTimer.GetElapsedTime) * (destination.X 
          * 25);

  m = Matrix.RotationY(y);
  m *= Matrix.RotationX(x);

  device.Transform.World = m;
  device.Transform.View = Matrix.LookAtLH(
      new Vector3( 0.0f, 3.0f,-5.0f ),
      new Vector3( 0.0f, 0.0f, 0.0f ),
      new Vector3( 0.0f, 1.0f, 0.0f ) );   
  device.Transform.Projection = Matrix.PerspectiveFovLH(
      (float)Math.PI / 4, 1.0f, 1.0f, 100.0f );

  // Render the teapot.
  teapot.DrawSubset(0);

  // End the scene.
  device.EndScene(); 
```

这个样本取自[这里](http://msdn.microsoft.com/en-us/magazine/cc164112.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-11T14:47:14.880

我推荐使用函数 D3DXConcatenateMeshes。通过一个网格和一个矩阵。结果将转换为网格。这很容易。

# c - 如何根据 C 编程语言标准初始化结构

> ID：330793
> 
> 赞同：545
> 
> 时间：2008-12-01T13:13:17.223
> 
> 标签：c, struct, initialization

我想初始化一个结构元素，在声明和初始化中分开。这就是我所拥有的：

```
typedef struct MY_TYPE {
  bool flag;
  short int value;
  double stuff;
} MY_TYPE;

void function(void) {
  MY_TYPE a;
  ...
  a = { true, 15, 0.123 }
} 
```

这是`MY_TYPE`按照 C 编程语言标准（C89、C90、C99、C11 等）声明和初始化局部变量的方式吗？或者有什么更好的或者至少可以工作的吗？

**更新**我最终得到了一个静态初始化元素，我根据需要设置了每个子元素。

* * *

## 回答 #1

> 赞同：849
> 
> 时间：2008-12-01T13:39:37.323

在 (ANSI) C99 中，您可以使用**指定的初始化程序**来初始化结构：

```
MY_TYPE a = { .flag = true, .value = 123, .stuff = 0.456 }; 
```

其他成员初始化为零：“省略的字段成员被隐式初始化，与具有静态存储持续时间的对象相同。” （[https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html](https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)）

* * *

## 回答 #2

> 赞同：235
> 
> 时间：2008-12-01T13:28:09.003

您可以使用[复合文字](http://gcc.gnu.org/onlinedocs/gcc-4.3.2/gcc/Compound-Literals.html)来做到这一点。根据该页面，它适用于 C99（也算作[ANSI C](http://en.wikipedia.org/wiki/ANSI_C)）。

```
MY_TYPE a;

a = (MY_TYPE) { .flag = true, .value = 123, .stuff = 0.456 };
...
a = (MY_TYPE) { .value = 234, .stuff = 1.234, .flag = false }; 
```

初始化器中的名称是可选的；你也可以写：

```
a = (MY_TYPE) { true,  123, 0.456 };
...
a = (MY_TYPE) { false, 234, 1.234 }; 
```

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2013-06-09T03:51:57.747

我看到您已经收到了有关 ANSI C 99 的答案，所以我将介绍一下 ANSI C 89。ANSI C 89 允许您以这种方式初始化结构：

```
typedef struct Item {
    int a;
    float b;
    char* name;
} Item;

int main(void) {
    Item item = { 5, 2.2, "George" };
    return 0;
} 
```

需要记住的重要一点是，当您在结构中初始化一个对象/变量时，它的所有其他变量都将被初始化为默认值。

如果您不初始化结构中的值，则所有变量都将包含“垃圾值”。

祝你好运！

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-12-01T13:27:22.280

`a = (MYTYPE){ true, 15, 0.123 };`

在 C99 中会做得很好

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2008-12-01T13:21:54.333

你几乎得到它...

```
MY_TYPE a = { true, 15, 0.123 }; 
```

快速[搜索'struct initialize c'会](http://www.google.com/search?hl=en&q=struct+initialize+c) [告诉我这个](http://publications.gbdirect.co.uk/c_book/chapter6/initialization.html)

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2016-06-08T11:43:11.043

C 编程语言标准**ISO/IEC 9899:1999**（通常称为 C99）允许使用**指定的初始化程序**来初始化结构或联合的成员，如下所示：

```
MY_TYPE a = { .stuff = 0.456, .flag = true, .value = 123 }; 
```

它在ISO/IEC 9899:1999 标准的`paragraph 7`部分中定义为：`6.7.8 Initialization`

> 如果指定者具有
> . 标识符
> ，则当前对象（定义如下）应具有结构或联合类型，标识符应是该类型成员的名称。

请注意，`paragraph 9`同一部分指出：

> 除非另有明确说明，就本子条款而言，结构和联合类型对象的未命名成员不参与初始化。**即使在初始化之后，结构对象的未命名成员也具有不确定的值。**

然而，在 GNU GCC 实现中，省略的成员被初始化为零或类似零的类型适当值。如GNU GCC 文档的[6.27 节指定初始化程序中所述：](https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)

> 省略的字段成员与具有静态存储持续时间的对象一样被隐式初始化。

根据官方博客文章[C++ Conformance Roadmap](https://blogs.msdn.microsoft.com/somasegar/2013/06/28/c-conformance-roadmap/) ，Microsoft Visual C++ 编译器应支持自 2013 版以来的指定初始化程序。`Initializing unions and structs`MSDN Visual Studio 文档中的[Initializers](https://msdn.microsoft.com/en-us/library/w7wd1177(v=vs.140).aspx)文章段落建议未命名的成员初始化为类似于 GNU GCC 的类似零的适当值。

**已取代 ISO/IEC 9899:1999 的ISO/IEC 9899:2011**标准（通常称为 C11）在`6.7.9 Initialization`. 它也保持`paragraph 9`不变。

已取代 ISO/IEC 9899:2011的新**ISO/IEC 9899:2018**标准（通常称为 C18）在第`6.7.9 Initialization`. 它也保持`paragraph 9`不变。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2013-09-04T09:37:18.910

正如[罗恩努尼所说](https://stackoverflow.com/a/17006240/4298200)：

```
typedef struct Item {
    int a;
    float b;
    char* name;
} Item;

int main(void) {
    Item item = {5, 2.2, "George"};
    return 0;
} 
```

需要记住的重要一点：当你在结构中初始化一个对象/变量时，它的所有其他变量都将被初始化为默认值。

如果您不初始化结构中的值（即，如果您只是声明该变量），那么所有`variable.members`将包含“垃圾值”，**只有声明是本地的！**

如果声明是**全局或静态**的（如本例），所有未初始化**`variable.members`**的将自动初始化为：

*   `0`对于整数和浮点
*   `'\0'`for `char`（当然这和 , 是一样的`0`，`char`是整数类型）
*   `NULL`为指针。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2021-01-03T04:45:42.543

添加到所有这些好的答案中，总结了如何在 C 中初始化结构（联合和数组），特别关注设计的初始化程序。

## 标准初始化

```
struct point 
{
    double x;
    double y;
    double z;
}

p = {1.2, 1.3}; 
```

* * *

## 指定初始化器

指定初始化器从 ISO C99 开始出现，它是一种不同且更动态的方式，用于在初始化时在 C 中进行初始化`struct`，`union`或在`array`.

与标准初始化的最大区别是您不必按固定顺序声明元素，也可以省略元素。

来自[GNU 指南](https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)：

> 标准 C90 要求初始值设定项的元素以固定顺序出现，与被初始化的数组或结构中元素的顺序相同。

> 在 ISO C99 中，您可以按随机顺序给出元素，指定它们适用的数组索引或结构字段名称，GNU C 也允许将其作为 C90 模式的扩展

* * *

## 例子

### 1.数组索引

**标准初始化**

```
int a[6] = { 0, 0, 15, 0, 29, 0 }; 
```

**指定初始化**

```
int a[6] = {[4] = 29, [2] = 15 }; // or
int a[6] = {[4]29 , [2]15 }; // or
int widths[] = { [0 ... 9] = 1, [10 ... 99] = 2, [100] = 3 }; 
```

### 2.结构或联合：

**标准初始化**

```
struct point { int x, y; }; 
```

**指定初始化**

```
struct point p = { .y = 2, .x = 3 }; or
struct point p = { y: 2, x: 3 }; 
```

### 3.将命名元素与连续元素的普通C初始化结合起来：

**标准初始化**

```
int a[6] = { 0, v1, v2, 0, v4, 0 }; 
```

**指定初始化**

```
int a[6] = { [1] = v1, v2, [4] = v4 }; 
```

### 4\. 其他：

**标记数组初始值设定项的元素**

```
int whitespace[256] = { [' '] = 1, ['\t'] = 1, ['\h'] = 1,
                        ['\f'] = 1, ['\n'] = 1, ['\r'] = 1 }; 
```

**在“=”之前编写一系列“.fieldname”和“[index]”指示符以指定要初始化的嵌套子对象**

```
struct point ptarray[10] = { [2].y = yv2, [2].x = xv2, [0].x = xv0 }; 
```

* * *

## 指南

*   [指定初始化器-c | geeksforgeeks.org](https://www.geeksforgeeks.org/designated-initializers-c/)
*   [使用指定初始化器](https://riptutorial.com/c/example/18609/using-designated-initializers)
*   [教程点.com | 指定初始化程序-in-c](https://www.tutorialspoint.com/designated-initializers-in-c)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-05-12T17:14:03.263

我不喜欢这些答案中的任何一个，所以我自己做了。我不知道这是否是 ANSI C，它只是默认模式下的 GCC 4.2.1。我永远记不起括号，所以我从我的数据子集开始，并与编译器错误消息作斗争，直到它关闭。可读性是我的首要任务。

```
// in a header:
typedef unsigned char uchar;

struct fields {
  uchar num;
  uchar lbl[35];
};

// in an actual c file (I have 2 in this case)
struct fields labels[] = {
  {0, "Package"},
  {1, "Version"},
  {2, "Apport"},
  {3, "Architecture"},
  {4, "Bugs"},
  {5, "Description-md5"},
  {6, "Essential"},
  {7, "Filename"},
  {8, "Ghc-Package"},
  {9, "Gstreamer-Version"},
  {10, "Homepage"},
  {11, "Installed-Size"},
  {12, "MD5sum"},
  {13, "Maintainer"},
  {14, "Modaliases"},
  {15, "Multi-Arch"},
  {16, "Npp-Description"},
  {17, "Npp-File"},
  {18, "Npp-Name"},
  {19, "Origin"}
}; 
```

数据可能以制表符分隔文件的形式开始存在，您可以搜索替换以将其插入其他内容。是的，这是 Debian 的东西。因此，一对外部 {} （指示数组），然后是内部每个结构的另一对。之间用逗号。把东西放在标题中并不是绝对必要的，但我的结构中有大约 50 个项目，所以我希望它们放在一个单独的文件中，既可以避免我的代码混乱，也更容易替换。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-08-13T09:36:41.707

这可以通过不同的方式完成：

```
MY_TYPE a = { true, 1, 0.1 };

MY_TYPE a = { .stuff = 0.1, .flag = true, .value = 1 }; //designated initializer, not available in c++

MY_TYPE a;
a = (MY_TYPE) { true,  1, 0.1 };

MY_TYPE m (true, 1, 0.1); //works in C++, not available in C 
```

此外，您可以在声明结构时定义成员。

```
#include <stdio.h>

struct MY_TYPE
{
    int a;
    int b;
}m = {5,6};

int main()
{
    printf("%d  %d\n",m.a,m.b);    
    return 0;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-12-01T13:19:49.877

```
void function(void) {
  MY_TYPE a;
  a.flag = true;
  a.value = 15;
  a.stuff = 0.123;
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-04-20T19:39:46.633

如果 MS 还没有更新到 C99，`MY_TYPE a = { true,15,0.123 };`

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-12-04T03:15:55.490

我找到了另一种初始化结构的方法。

结构：

```
typedef struct test {
    int num;
    char* str;
} test; 
```

初始化：

```
test tt = {
    num: 42,
    str: "nice"
}; 
```

根据 GCC 的文档，此语法[自 GCC 2.5 以来已过时](https://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-09-06T18:38:28.550

C中的结构可以这样声明和初始化：

```
typedef struct book
{
    char title[10];
    char author[10];
    float price;
} book;

int main() {
    book b1={"DS", "Ajay", 250.0};

    printf("%s \t %s \t %f", b1.title, b1.author, b1.price);

    return 0;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-08-12T14:10:33.627

我已经阅读了[用于初始化聚合类型的 Microsoft Visual Studio 2015 文档](https://msdn.microsoft.com/en-us/library/81k8cwsz.aspx)，所有形式的初始化`{...}`都在此处进行了说明，但此处未提及使用点进行初始化，名为“指定器”。它也不起作用。

C99 标准第 6.7.8 章初始化解释了指示符的可能性，但在我看来，对于复杂的结构并不是很清楚。[C99 标准为](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)pdf 。

在我看来，这可能会更好

1.  对所有静态数据使用`= {0};`-initialization。机器代码的工作量更少。
2.  使用宏进行初始化，例如

    `typedef MyStruct_t{ int x, int a, int b; } MyStruct; define INIT_MyStruct(A,B) { 0, A, B}`

宏可以调整，它的参数列表可以独立于改变的结构内容。如果应该初始化更少的元素是合适的。它也适用于嵌套结构。3\. 一个简单的形式是： 在子程序中初始化：

```
void init_MyStruct(MyStruct* thiz, int a, int b) {
  thiz->a = a; thiz->b = b; } 
```

这个例程看起来像 C 中的面向对象。使用`thiz`，而不是`this`用 C++ 编译它！

```
MyStruct data = {0}; //all is zero!
init_MyStruct(&data, 3, 456); 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2018-12-02T17:46:09.513

我一直在寻找一种初始化我的结构的好方法，我必须使用下面的（C99）。这让我可以像普通类型一样初始化单个结构或结构数组。

```
typedef struct {
    char *str;
    size_t len;
    jsmntok_t *tok;
    int tsz;
} jsmn_ts;

#define jsmn_ts_default (jsmn_ts){NULL, 0, NULL, 0} 
```

这可以在代码中用作：

```
jsmn_ts mydata = jsmn_ts_default; /* initialization of a single struct */

jsmn_ts myarray[10] = {jsmn_ts_default, jsmn_ts_default}; /* initialization of
                                                    first 2 structs in the array */ 
```

# php - PHPMailer 错误

> ID：330810
> 
> 赞同：0
> 
> 时间：2008-12-01T13:22:46.563
> 
> 标签：php, email

```
function register_contact ($person = array()) {
    $nogood = false;
    foreach ($person as $val) {
        if (strlen($val)==0) {
            $nogood = true;
            $status = "There was an error sending the registration please fill in all fields";
        }
    }
    if (!$nogood) {
        require_once("class.phpmailer.php");

        $message = "New request for Fox In Touch Recipient:.\r\n\r\n";
        $message .= "Forename: " . $person['fname'];
        $message .= "\r\nSurname: " . $person['sname'];
        $message .= "\r\nEmail: " . $person['email'];
        $message .= "\r\nJob Title: " . $person['job'];
        $message .= "\r\nCompany: " . $person['company'];
        $message .= "\r\n\r\nFox In Touch.";

        $mail = new PHPMailer();

        $mail->IsSMTP();                                   // send via SMTP
        $mail->Host     = "ahost"; // SMTP servers
        $mail->SMTPAuth = true;     // turn on SMTP authentication
        $mail->Username = "name";  // SMTP username
        $mail->Password = "pass"; // SMTP password
        //$mail->Post = 587;

        $mail->From     = "foxintouch@bionic-comms.co.uk";
        $mail->FromName = "Fox In Touch";
        //$mail->AddAddress("foxlicensing.europe@fox.com", "Fox Licensing");
        $mail->AddAddress("andrew@yahoo.co.uk", "Andrew");
        $mail->AddReplyTo("foxintouch@bionic-comms.co.uk","Information");
        $mail->IsHTML(false);                               // send as HTML

        $mail->Subject  =  "Contact request for Fox In Touch!";
        $mail->Body     =  $message;

        if(!$mail->Send()) {
            $nogood = true;
            $status = "Message was not sent <p>";
            $status .= "Mailer Error: " . $mail->ErrorInfo;
        } else {
            $status = "Thank you! Your message has been sent to 20th Century Fox. Submit another?"; 
        }
    }
    return array('email_failed'=>$nogood, 'status'=>$status);
} 
```

上面的代码不断给我错误，“邮件程序错误：无法加载语言字符串：recipients_failedandrew@yahoo.co.uk”。我尝试更改 AddAddress()。smtp 连接设置是正确的，因为这是我遇到的最后一个错误！任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T13:33:07.633

听起来你有两个问题。

1）您的语言文件没有被加载 - 请参阅[安装](http://phpmailer.codeworxtech.com/index.php?pg=install)

2) 收件人被拒绝 - errr 仔细检查 SMTP 设置和收件人地址

# c# - 如何在运行时调用正确的重载函数？

> ID：330832
> 
> 赞同：1
> 
> 时间：2008-12-01T13:29:06.193
> 
> 标签：c#, reflection

在给定基于对象的实际类型的对象引用的情况下，如何调用正确的重载函数。例如...

```
class Test
{
    object o1 = new object();
    object o2 = new string("ABCD");
    MyToString(o1);
    MyToString(o2);//I want this to call the second overloaded function

    void MyToString(object o)
    {
        Console.WriteLine("MyToString(object) called.");
    }

    void MyToString(string str)
    {
        Console.WriteLine("MyToString(string) called.");
    }
} 
```

我的意思是有比以下更好的选择吗？

```
if(typeof(o) == typeof(string))
{
    MyToString((string)o);
}
else
{
    MyToString(o);
} 
```

这可以使用反射来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T13:29:58.157

好的，我一发帖就记得这确实可以使用反射来完成......

```
var methInfo = typeof(Test).GetMethod("MyToString", new Type[] {o.GetType()});
methInfo.Invoke(this, new object[] {o}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-04T13:14:18.293

您可以使用三元运算符使用一行干净的代码对其进行编码：

```
MyToString(o is string ? (string)o : o); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T13:31:30.400

为什么在实际对象本身中没有 toString() 函数？这样您就可以调用 myObj.toString() 并给出相对输出。那么你不必做任何比较。

# windows - 当系统上没有可执行文件时如何卸载 Windows 服务？

> ID：330836
> 
> 赞同：183
> 
> 时间：2008-12-01T13:31:16.233
> 
> 标签：windows, windows-services, uninstallation

当系统上没有可执行文件时，如何卸载 Windows 服务？我无法运行`installutil -u`，因为系统上没有可执行文件。我仍然可以在“服务”控制台中看到该服务的条目。

出现这种状态的原因可能是因为msi包中的一个问题没有正确移除服务，但是一旦服务处于这种状态，我该如何修复呢？

* * *

## 回答 #1

> 赞同：353
> 
> 时间：2008-12-01T13:43:23.510

通过在“管理员”命令提示符下运行以下命令，您应该能够使用 sc.exe（我认为它包含在 Windows 资源工具包中）卸载它：

```
sc.exe delete <service name> 
```

`<service name>`正如您在服务管理控制台中看到的那样，服务本身的名称在哪里，而不是 exe 的名称。

您可以在 System 文件夹中找到 sc.exe，它需要管理员权限才能运行。[此 Microsoft 知识库文章中的更多信息](http://support.microsoft.com/kb/251192)。

或者，您可以直接调用[DeleteService()](http://msdn.microsoft.com/en-us/library/ms682562(VS.85).aspx) api。这种方式稍微复杂一些，因为您需要通过[OpenSCManager()](http://msdn.microsoft.com/en-us/library/ms684323.aspx)等来获取服务控制管理器的句柄，但另一方面，它可以让您更好地控制正在发生的事情。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-09-23T16:43:06.837

**通过注册表删除 Windows 服务**

如果您知道正确的路径，从注册表中删除服务非常容易。我是这样做的：

1.  运行**Regedit**或**Regedt32**

2.  转到注册表项“HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services”

3.  查找您要删除的服务并将其删除。您可以查看密钥以了解服务正在使用哪些文件并删除它们（如有必要）。

**通过命令行窗口删除 Windows 服务**

或者，您也可以使用命令提示符并使用以下命令删除服务：

**sc 删除**

您还可以使用以下命令创建服务

sc create "MorganTechService" binpath= "C:\Program Files\MorganTechSPace\myservice.exe"

注意：您可能必须重新启动系统才能在服务管理器中更新列表。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-12-01T13:35:42.513

[在这里找到](http://msmvps.com/blogs/nuoyan/archive/2004/11/07/18247.aspx)

我刚刚在windows XP上试过，它工作

本地计算机：sc \\. 删除 [服务名称]

```
 Deleting services in Windows Server 2003

  We can use sc.exe in the Windows Server 2003 to control services, create services and delete services. Since some people thought they must directly modify the registry to delete a service, I would like to share how to use sc.exe to delete a service without directly modifying the registry so that decreased the possibility for system failures.

  To delete a service: 

  Click “start“ - “run“, and then enter “cmd“ to open Microsoft Command Console.

  Enter command:

  sc servername delete servicename

  For instance, sc \\dc delete myservice

  (Note: In this example, dc is my Domain Controller Server name, which is not the local machine, myservice is the name of the service I want to delete on the DC server.)

  Below is the official help of all sc functions:

  DESCRIPTION:
    SC is a command line program used for communicating with the
    NT Service Controller and services. 
  USAGE:
          sc 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-08-04T13:48:40.953

这是删除服务的powershell脚本`foo`

```
$foo= Get-WmiObject -Class Win32_Service -Filter "Name='foo'"
$foo.delete() 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-12-01T23:30:39.627

我最喜欢的方法是使用[Sysinternals Autoruns](http://technet.microsoft.com/en-us/sysinternals/bb963902.aspx)应用程序。只需选择服务并按删除。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-11T20:32:29.693

我会为此使用 PowerShell

```
Remove-Service -Name "TestService" 
```

[https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/remove-service](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/remove-service)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-01T13:33:45.137

创建相同服务的可执行文件的副本并将其粘贴到现有服务的相同路径上，然后卸载。

# version-control - 单人网络应用程序的最佳版本控制？

> ID：330848
> 
> 赞同：15
> 
> 时间：2008-12-01T13:34:16.867
> 
> 标签：version-control

我只是在学习如何做事，并想开始对 Web 应用程序使用某种版本控制。

什么最适合我自己部署 python 或 php web 应用程序？我正在使用 linux 并且有一个 linux 服务器。

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-12-01T13:44:04.383

SVN，***但***您需要能够**使用 SVN 轻松部署您的 webapp**。

由于这并不总是一项简单的任务，所以我只是指出**[这篇文章](http://www.jejik.com/articles/2008/08/easily_develop_and_deploy_web_applications_from_subversion/)**可能对您的项目感兴趣。

一般原则：

*   在您的开发服务器上配置 Apache，以便它选择您签出的工作副本作为单独的子域。使用它，您可以简单地检查您的项目，它会自动启动并运行。无需触摸 Apache 配置。您需要一个**[DNS 通配符条目](http://en.wikipedia.org/wiki/Wildcard_DNS_record)**，以便 dev.example.org 的所有子域都转到您的开发服务器。

在本地使用上述 Apache 配置的唯一问题是 DNS 通配符。除非您的桌面由网络的 DNS 服务器分配了主机名，并且您可以在那里设置通配符，否则您将不得不使用您的本地主机地址。您可以安装**[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html)**作为本地缓存 DNS 服务器并将通配符放在您自己的机器上

*   使用 dnsmasq 这样你就可以在你自己的开发机器上达到同样的效果。这样您就可以在本地开发 Web 应用程序，而无需中央开发服务器。在我的示例中，我将假设您使用 subversion 进行版本控制，但它与其他版本控制包（例如 git 或 bazaar）的工作方式几乎相同。

* * *

注意：（*幽默*）
[Subversion 上的另一个问题](https://stackoverflow.com/questions/330673)让我可以指出这篇关于[将其（源代码控制的）数据发布到生产](http://www.nixonmcinnes.co.uk/2007/11/28/publication-one-project-multiple-developers-part-2/)环境的文章，其中可能是我见过的关于该主题的最丑陋的图表 ;-)

![图表](https://i.stack.imgur.com/kUlaH.jpg)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-12-01T13:39:34.453

如果我没有碰到[git](http://git.or.cz/)，我无疑会选择 SVN。话虽如此，我会推荐git。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-01T13:56:18.837

如今，我肯定会使用分布式版本控制系统。设置速度更快，因为您不需要设置版本控制服务器和一切，您通常需要做的就是在开发框中初始化某个目录以进行版本控制，您就可以开始了。如今，它们似乎也是要走的路。如果是 2001 年，我会推荐像 Subversion 这样的集中式系统。但现在是 2008 年，每个人都在转向分布式系统和用户界面，并且支持工具往往会变得更好。

这里有一些建议给你：

*   [Darcs](http://darcs.net)：易于学习并具有您通常需要的所有功能
*   [水银](http://www.selenic.com/mercurial/wiki/)
*   [吉特](http://git.or.cz/)：强大。可能需要一些时间才能理解，但发展迅速

通过通常的包管理解决方案，它们都应该在基于 Linux 的操作系统中随时可用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-01T13:36:02.370

[SVN](http://subversion.tigris.org/)很棒。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-12-01T13:41:14.263

现在围绕[DVCS](http://en.wikipedia.org/wiki/Distributed_revision_control)的炒作。

我更喜欢[集市](http://en.wikipedia.org/wiki/Bazaar_software)。

因为它的名称、支持、功能集，它在我的 window$ 机器上也能很好地工作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-01T15:28:36.497

我正在使用 unfuddle.com，我喜欢它。一个人的网络应用程序是免费的

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-01T13:40:47.620

答案真的取决于你的思维方式。我个人在从 SourceSafe 切换到 subversion 时遇到了问题。如果您来自微软商店，我建议您使用 SourceGear Vault，它对 <=2 用户免费。如果您来自非 microsoft 领域，则最好使用 subversion。如果在 linux 上工作，请考虑使用 git。HTH，阀门。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-01T14:44:27.927

我个人使用[monotone](http://monotone.ca)，学习 DVCS 绝对是前进的方向。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-01T15:25:14.927

对于一个人的工作，几乎任何版本控制系统都可以完成这项工作。当你接触到多个人，然后进入多个存储库时，就会开始出现差异。

鉴于此，我会选择您的开发环境最支持的任何自由软件系统。我看到提到了 Subversion 和 Git，它们都是不错的选择。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-01T13:37:33.537

[SVN](http://subversion.tigris.org/)将是我的第一选择。如果我必须采取第二选择，我会去 CVS。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-01T13:37:41.433

今天最流行的模型之一是[Subversion](http://subversion.tigris.org/)。它通常易于设置和配置，并且能够处理多个平台。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-01T13:40:06.793

**SVN**。如果不需要并发访问（这是您的情况），则设置非常容易，因为根本不需要服务器。绝对是你的首选武器。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-01T13:41:27.133

我完全同意SVN。命令行 SVN 也很简单。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-01T13:42:01.720

虽然我非常喜欢 svn，但我发现 mercurial 可以方便地在本地拥有整个存储库。（git 也是如此，但在我看来，它的界面没有那么精致。）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-12-01T15:49:14.613

我曾经使用过[Perforce](http://www.perforce.com)，对它印象深刻。有 GUI 和命令行版本，它支持服务器和客户端的 Windows、Linux、Mac 和 Unix。它与 Eclipse 集成，并具有用于编写您自己的客户端应用程序（C/C++、Ruby、Perl、Python）的 API 虽然在您需要购买许可证之前它只支持两个用户和五个工作区（但这在这个问题的范围内） .

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-12-02T06:22:46.800

我无法按要求回答问题，因为我不在 Linux 服务器上开发。

但也许这种经历在 Linux 世界中也有类似的经历。

我使用一个仅限本地局域网的 IIS 服务器（实际上是在一台不再旅行但用作小型服务器的旧笔记本电脑上）。我也在该服务器上安装了 VSS。IIS 服务器、该服务器上的 FrontPage 扩展和 VSS 之间存在集成。

结果是我可以使用 FrontPage 来构建和编辑我的站点并构建始终在 VSS 中备份的开发映像，并且我可以从 FrontPage 中签出、签入和执行所有这些操作。

现在，我发布的方式是利用 VSS 的共享功能，因此我有一个与实际是 IIS 网站的项目共享的部署映像。我有一个部署映像目录，我可以将最新签入的材料传输到该目录（未更改的材料不会更新）。然后，我使用 FTP 将部署映像部署到托管的公共网站（同样，仅传输新文件和更新文件）。

我介绍所有这些细节以建议可能感兴趣的用例，即使 Linux 需要不同的解决方案方法。

如果我没有使用与 Web 服务器以及服务器上的源代码控制集成的工具，我可以通过检查 VSS 材料进出本地目录然后将更新的 VSS 项目推送到 IIS 来做类似的事情服务器网页目录层次结构。工作流程有点笨拙。在这种情况下，我不会直接在开发 Web 服务器上编辑页面，除非我可以将签入页面锁定为只读或其他。

这是否表明在 Linux 服务器案例中可能具有吸引力？

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-02-05T08:48:08.593

毫无疑问，Mercurial 是一个不错的选择，快速，易于使用，非常适合单独工作或与多个其他开发人员一起工作，完美的多平台，处理合并，分支等非常简单，基于插件，有很棒的工具，例如不错的 IDE插件（尤其是 Netbeans 和 Eclipse）。

强大，它就像您期望的那样工作，不像SVN（我每天都有很多年）......

Sun、Xen 和 Mozilla 都在 Mercurial 上托管他们所有的存储库。经过 6 个月的每日测​​试，我们目前正在从 SVN 迁移到 Mercurial，没有任何遗憾。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2008-12-01T13:54:13.987

颠覆是一个不错的选择。对于客户端，TortoiseSVN ( [http://tortoisesvn.tigris.org/](http://tortoisesvn.tigris.org/) ) 与外壳集成，让您可以通过右键单击文件夹来执行操作。为了与 Visual Studio 集成（我假设这是您的环境），有 VisualSVN（[http://www.visualsvn.com/](http://www.visualsvn.com/)）和 AnhkSVN（[http://ankhsvn.open.collab.net/](http://ankhsvn.open.collab.net/)）。对于服务器，您可以在此处 ( [http://svn1clicksetup.tigris.org/](http://svn1clicksetup.tigris.org/) ) 找到一键式安装程序，它可以快速完成设置。VisualSVN 还有一个（免费）服务器，您可以使用它提供它自己的 Web 访问和安全性（而不是使用 apache），并有一个用于管理/创建存储库和用户的 mmc-snapin。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2010-04-02T00:14:19.127

CVS - 不，我不是在开玩笑。并不是说它更好（不是）或最简单（不是），但归根结底这并不重要。重要的是开始使用任何版本控制系统，即使它是一个开发人员商店，即使它是 CVS。

# c# - 如何在 C# TextBox 中添加 HTML 链接？

> ID：330850
> 
> 赞同：3
> 
> 时间：2008-12-01T13:34:37.070
> 
> 标签：c#, html, textbox, hyperlink

如何在 C# 中放置链接`TextBox`？我试图将 HTML 标记放在框中，但不是显示链接，而是显示整个 HTML 标记。这可以用 a 来完成`TextBox`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-01T13:48:19.383

使用[RichTextBox](http://msdn.microsoft.com/en-us/library/f591a55w.aspx)，无需自己构建，VS自带

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-01T13:45:42.930

我会尝试使用可编辑的 div 并使其看起来像一个文本框。这将允许您获取用户输入并使用链接。

为了使这更容易，请尝试[JEditable](http://www.appelsiini.net/projects/jeditable)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T14:14:31.060

如果那是在 Windows 窗体中并且您真的不能使用richtextbox，您可以在文本框内创建一个带有链接标签的控件。

[http://www.codeproject.com/KB/miscctrl/LinkTextBox.aspx](http://www.codeproject.com/KB/miscctrl/LinkTextBox.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T13:56:01.927

我会考虑一下。如果允许用户在可编辑控件中执行代码，则用户可以执行**任何**代码。这通常是一个坏主意。

C# 控件的行为旨在防止您尝试创建的确切行为。一点创意（例如从文本框中解析出链接并在文本框旁边或下方创建链接列表）将提供更安全的应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T13:41:40.847

据我所知，不是标准文本框。您必须创建自己的。[Telerik](http://www.telerik.com/)控制的一个选项，它们对于个人开发来说有点贵，但非常强大且可配置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-22T06:39:41.277

对于 windows 应用程序，我们可以使用 webbrowser 控件。但是，对于 Web 应用程序，Freetextbox 将完成这项工作。这是免费提供的 dll。

# compact-framework - 使用 Compact Framework 的 Windows CE 媒体

> ID：330853
> 
> 赞同：3
> 
> 时间：2008-12-01T13:35:58.503
> 
> 标签：compact-framework, windows-ce

我有以下要求：

我需要一个可以在 CE (x86) + .NET Compact Framework 上运行的 api 来播放视频（类似于 CorePlayer API...只是免费的）？

他们还有什么可用的吗，还是我必须使用 CorePlayer？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-01T16:43:43.770

您需要使用 DShow 并为您打算在图像中播放的任何媒体提供编解码器。WMP 9.0 的 COM 互操作（至少在 CE 5.0 中提供，也可能在 6.0 中提供）对于托管代码来说是非入门的。

如果您不了解 DShow，那么即使在本机代码中，这也是相当多的工作，因为 DShow 不是一个有趣或友好的 API 集。

好处是你在镜像中根本不需要 WMP，所以你通常可以使用 Core CE 许可证（使用 WMP 需要 Pro）。我知道[一个商业 DShow 控件](http://www.opennetcf.com/Products/Controls/MediaPlayerControls/tabid/264/Default.aspx)，但你说你正在寻找一个免费的解决方案，我不知道除了滚动你自己的之外的任何东西。根据你对 COM 互操作的熟悉程度（你需要 DShow 的东西）以及 DShow 和 filtergraphs 的使用，我会分配至少一两个星期来让它工作。

一个补充说明 - 复杂性也会根据您希望视频显示的方式而变化。如果它只是全屏，那么它比将它放入应用程序的窗口中要少一些工作。不是少很多，但至少是一点点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T14:15:57.063

您可以将 MediaPlayer 与 COM 互操作一起使用。看看[这个](http://www.eggheadcafe.com/software/aspnet/30991558/windows-media-player-for.aspx)和[这个](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=64938&SiteID=1)。

此外，您的设备中可能未安装媒体播放器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-01T13:56:13.720

直接秀？查看[此页面](http://www.geekpage.jp/en/programming/directshow/renderfile.php)作为起点。前提是 DirectShow 出现在您的 CE 上，我不知道...

**编辑**：既然你可以使用 DirectShow，我想补充一点。

正如*ctacke 所*指出的，如果您手动执行所有操作，可能会做很多工作，但如果您可以使用它就非常简单`IGraphBuilder`（请参阅我上面链接的示例）。

我对 DirectShow 版本了解不多，但 Windows Mobile 6.0 中包含的版本缺少用于 MPEG 音频的分离器。这意味着，例如，除非您将它们包装在 RIFF 标头中，否则它不会播放 .mp3 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T19:38:00.737

我敢打赌，如果您正在寻找 C# 解决方案，您可以将一些[DirectShow.Net转换为在 CE 上运行。](http://directshownet.sourceforge.net/)

# perl - Perl 如何决定将标量视为字符串还是数字？

> ID：330878
> 
> 赞同：0
> 
> 时间：2008-12-01T13:42:45.790
> 
> 标签：perl, string, numbers, scalar

考虑以下代码及其输出：

### 代码

```
#!/usr/bin/perl -w
use strict;
use Data::Dumper;
my $HOURS_PER_DAY = 24.0 * 1.0;
my $BSA = 1.7 * 1.0;
my $MCG_PER_MG = 1000.0 * 1.0;
my $HOURS_DURATION    = 20.0 * $HOURS_PER_DAY;
my $dummy = $HOURS_PER_DAY * $BSA * $MCG_PER_MG * $HOURS_DURATION;
print Dumper($HOURS_PER_DAY);
print Dumper( $BSA);
print Dumper( $MCG_PER_MG);
print Dumper( $HOURS_DURATION ); 
```

### 输出

```
$VAR1 = 24;
$VAR1 = '1.7';
$VAR1 = 1000;
$VAR1 = 480; 
```

* * *

如您所见，第二个变量被视为字符串，而第一个和第四个变量被视为数字。有人知道基本逻辑是什么吗？

**编辑**添加的算术计算并不能完全解决问题（请参阅 $BSA 变量）。

* * *

```
$ perl -v

This is perl, v5.10.0 built for cygwin-thread-multi-64int
(with 6 registered patches, see perl -V for more detail)

Copyright 1987-2007, Larry Wall 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-01T16:01:41.033

Data::Dumper 的工作是对数据进行序列化，您无法根据其输出告诉 perl 在内部对数据做了什么。[Devel::Peek](http://search.cpan.org/perldoc?Devel::Peek)模块可以转储存储在变量中的底层标志和值。Devel::Peek POD 解释了标志的重要性。

```
#!/usr/bin/perl

use warnings;
use strict;
use Devel::Peek;

my $HOURS_PER_DAY = 24.0 * 1.0;
my $BSA = 1.7 * 1.0;
my $MCG_PER_MG = 1000.0 * 1.0;
my $HOURS_DURATION    = 20.0 * $HOURS_PER_DAY;
my $dummy = $HOURS_PER_DAY * $BSA * $MCG_PER_MG * $HOURS_DURATION;

Dump($HOURS_PER_DAY);
Dump($BSA);
Dump($MCG_PER_MG);
Dump($HOURS_DURATION);

__END__
SV = PVNV(0xd71ff0) at 0xd87f90
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,IOK,NOK,pIOK,pNOK)
  IV = 24
  NV = 24
  PV = 0
SV = PVNV(0xd71fc8) at 0xd87f60
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,NOK,pIOK,pNOK)
  IV = 1
  NV = 1.7
  PV = 0
SV = PVNV(0xd72040) at 0xd87f40
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,IOK,NOK,pIOK,pNOK)
  IV = 1000
  NV = 1000
  PV = 0
SV = IV(0xd8b408) at 0xd87f30
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,IOK,pIOK)
  IV = 480
# compare the above output to output without the assignment to $dummy:
SV = IV(0x7b0eb8) at 0x7adf90
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,IOK,pIOK)
  IV = 24
SV = NV(0x7c7c90) at 0x7adf60
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,NOK,pNOK)
  NV = 1.7
SV = IV(0x7b13d8) at 0x7adf40
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,IOK,pIOK)
  IV = 1000
SV = IV(0x7b1408) at 0x7adf30
  REFCNT = 1
  FLAGS = (PADBUSY,PADMY,IOK,pIOK)
  IV = 480 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-01T14:57:46.373

Perl 将变量视为字符串或数字的整个概念是有缺陷的。Perl 会在您需要时以正确的方式处理您的变量，例如，算术运算符**总是**将其参数视为数字（假设您没有滥用运算符重载等）。

你不应该担心这个：Perl 知道它在做什么。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-01T13:47:01.803

Data::Dumper 在变量的字符串表示上使用一个简单的模式来确定它是否是一个数字。从源代码：

```
...
elsif ($val =~ /^(?:0|-?[1-9]\d{0,8})\z/) { # safe decimal number
  $out .= $val;
}
else {               # string
... 
```

这与具有解释您观察到的行为的小数点的数字不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T13:51:51.763

强制数字上下文的快速肮脏方法：

```
打印自卸车（$HOURS_DURATION + 0.0）；

```

如果您担心数据将如何显示，那么干净的方法是：-

```
printf "%5.2d",$HOURS_DURATION;

```

# html - 是否可以隐藏 HTML textarea 元素上的滚动条？

> ID：330895
> 
> 赞同：8
> 
> 时间：2008-12-01T13:49:44.747
> 
> 标签：html, textarea, scrollbar

是否可以使用 CSS 或任何其他方式隐藏 HTML textarea 元素上的滚动条？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-01T13:51:16.413

```
style="overflow:hidden" 
```

不过，不确定您为什么要这样做。

# java - 与 dotnet 客户端相比，Java Web 服务客户端速度较慢

> ID：330898
> 
> 赞同：1
> 
> 时间：2008-12-01T13:51:15.180
> 
> 标签：java, web-services

我们有 DotNet webservice，它被两个客户端调用，一个是 dotnet 客户端，另一个是 javaclient

问题是与 dotnet 客户端相比，java 客户端处理结果的时间更长，并且极大地影响了性能，我在 java 中使用轴

关于我在这里的情况，axis 是否有任何已知问题。

同样的java客户端在linux平台上运行时处理时间也更长。

请在这里给我一些指示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-01T14:08:40.557

根本原因几乎可以是任何事情：-

*   较慢的硬件。
*   客户端写的不好
*   每次调用都会启动长时间运行的 Windows 客户端与 Java 客户端。
*   配置差异
    *   为 java 客户端打开了 XSD 验证。
    *   JVM内存分配太小（java -mx 20m --default一般都很小）
    *   完全安全打开与安全关闭
*   不同的网络路由——是通过扫描防火墙的javacleint。

基本上，您需要获得一些监控工具并衡量时间的去向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T16:17:28.410

Java/Axis 客户端是否重复使用它与 Web 服务/服务器的连接，或者它是否为每个请求启动一个新连接？

# python - 如何快速解析字符串列表

> ID：330900
> 
> 赞同：20
> 
> 时间：2008-12-01T13:51:42.963
> 
> 标签：python

如果我想拆分由分隔符分隔的单词列表，我可以使用

```
>>> 'abc,foo,bar'.split(',')
['abc', 'foo', 'bar'] 
```

但是，如果我还想处理可以包含分隔符的引号字符串，如何轻松快速地做同样的事情？

```
In: 'abc,"a string, with a comma","another, one"'
Out: ['abc', 'a string, with a comma', 'another, one'] 
```

相关问题：[如何将逗号分隔的字符串解析为列表（警告）？](https://stackoverflow.com/questions/118096/how-can-i-parse-a-comma-delimited-string-into-a-list-caveat)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-12-01T13:59:22.573

```
import csv

input = ['abc,"a string, with a comma","another, one"']
parser = csv.reader(input)

for fields in parser:
  for i,f in enumerate(fields):
    print i,f    # in Python 3 and up, print is a function; use: print(i,f) 
```

结果：

```
0 ABC
1 一个字符串，带逗号
2另一个，一个

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-01T13:53:57.687

[CSV 模块](http://www.python.org/doc/2.5.2/lib/module-csv.html)应该能够为您做到这一点

# java - 使用 JUnit 3.x 与 JUnit 4.x 运行测试仍然是最佳实践吗？

> ID：330901
> 
> 赞同：11
> 
> 时间：2008-12-01T13:51:50.560
> 
> 标签：java, unit-testing, junit

我有一段时间没看过这个了，但如果我没记错的话，ant 和 maven 仍然依赖 JUnit 3 进行单元测试（从 maven 2.09 开始，默认的 POM 文件仍然有 JUnit 3.81）。

坚持使用 JUnit 3 而不是使用最新最好的版本是否仍然有意义？我可能会失踪有什么好的理由吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-01T17:58:35.413

我认为没有理由坚持使用 3.x 版本。大多数工具与 4.x 兼容已有一段时间了。我坚持使用 3.x 的唯一原因是在 java 1.4 环境中（因为没有其他方法）。

顺便说一句，maven 在 2.1 中切换到 Java 5，所以他们有机会提出 junit 4.x

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-01T16:19:48.203

与 3.x 相比，JUnit 4 有很多优势。最重要的是您不再需要扩展 TestCase，您的测试方法也不必以“测试”开头。现在都是基于注释的。您还可以添加 Hamcrest 匹配器，它为您提供了一种非常好的和富有表现力的方式来编写测试断言。

但是，如果您被困在 Java-1.5 之前的项目中，您可能不得不坚持使用 JUnit 3.x。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-02T08:59:40.820

JUnit 4.x 有一些原因，也有一些反对它。

优点：

*   注释易于理解并增加可读性。
*   忽略测试更容易。
*   您可以随意命名方法。

缺点：

*   您需要 Java 5（注释）。
*   可能需要迁移（？）。

我使用 JUnit 4，因为它更好，但这是我个人的看法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-01T16:59:52.973

Ant 没有回复 JUnit 3。

我建议您迁移到新的 JUnit，原因很简单，因为您将看到越来越多的工具和仅适用于 JUnit4 的示例。坚持使用 JUnit3 意味着生活在一个日益缩小的生态系统中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-02T09:04:17.957

Ant 和 Maven 都可以很好地运行 JUnit 4 测试。使用 JUnit 3 的唯一原因是遗留系统：要么您被迫使用 Pre-Java 5 JDK，要么您拥有大量依赖于 JUnit 3 且不支持 JUnit 4 的工具。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-01T13:56:50.130

Maven 没有明确绑定到 Junit 3.81。你可以切换到任何你想要的junit版本。如果您正在运行 java 5，我认为您应该至少切换到 4.4 Spring 2.5 与 4.5 不兼容。

# asp.net - 确认对话

> ID：330904
> 
> 赞同：0
> 
> 时间：2008-12-01T13:52:02.463
> 
> 标签：asp.net

我怎样才能最好地实现以下场景？我有一个“下一个期间...”按钮，允许用户关闭当前会计期间并推进当前期间。我想在第一次单击按钮时进行服务器端权限检查，并在用户没有权限时向他们发出警报。如果用户有权限，我想给他们一个确认对话，以确认他们真的想要提前这个期限。

如果用户没有权限，我们的标准会阻止我禁用按钮，因为规定所有功能都应该始终可用，但如果它们无法执行，请提供适当的反馈。

如果只是权限检查，我可以做回调事件，检查权限，并返回一个脚本向用户显示警报，如果我想在权限检查之前确认，我可以在 OnClientClick 中显示确认按钮，但我想在确认之前进行权限检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-01T13:54:46.110

如果您在第一次执行页面时知道他们是否拥有权限，您可以让按钮返回一个 javascript 警报“您不能这样做”，而不是让它运行服务器端脚本。

这样该按钮仍处于启用状态，但您不会对服务器进行任何不必要的调用。

# nhibernate - 在 HQL 上使用 Min、Max 和 Count

> ID：330918
> 
> 赞同：6
> 
> 时间：2008-12-01T13:56:23.140
> 
> 标签：nhibernate, hibernate, hql, min

hibernate HQL 查询是否支持使用 select min、max、count 和其他 sql 函数？

像：

`select min(p.age) from person p`

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-01T14:01:33.910

是的`min()`，`max()`和`count()`在 HQL 中受支持。

请参阅Hibernate Doc 中的[聚合函数](http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#hql-aggregate-functions)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-07-01T06:36:23.343

这就是我在 Hibernate 中使用 max 的方式：

```
public long getNextId(){
long appId;         
try{
            Session session = HibernateUtil.getAdmSessionFactory().getCurrentSession();
            Transaction t = session.beginTransaction();
            String sequel = "Select max(JAdmAppExemptionId) from JAdmAppExemption";
            Query q = session.createQuery(sequel);
            List currentSeq = q.list();
            if(currentSeq == null){
                return appId;
            }else{
            appId = (Long)currentSeq.get(0);
            return appId+1;
            }

        }catch(Exception exc){
            System.out.print("Unable to get latestID");
            exc.printStackTrace();

        }
        return 0;

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T13:59:04.213

支持一些聚合函数：查看[手册](http://docs.jboss.org/hibernate/orm/5.2/userguide/html_single/Hibernate_User_Guide.html#hql-aggregate-functions)

# performance - 魔法计算的其他例子

> ID：330922
> 
> 赞同：13
> 
> 时间：2008-12-01T13:58:03.823
> 
> 标签：performance, language-agnostic, math

我在[这里看到了这个](https://stackoverflow.com/questions/295579/fastest-way-to-determine-if-an-integers-square-root-is-an-integer)关于约翰卡马克计算平方根的神奇方法的话题，参考这篇文章： http: [//www.codemaestro.com/reviews/9](http://www.codemaestro.com/reviews/9)。这让我很惊讶，我只是没有意识到计算 sqrt 可以这么快。

我只是想知道计算机游戏用来运行更快的“魔法”还有哪些其他例子。

**更新**：约翰卡马克不是魔法代码的作者。[这篇文章](http://www.beyond3d.com/content/articles/8/)告诉更多。谢谢@moocha。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T14:22:59.517

有一本书收集了许多“魔术技巧”，你可能会感兴趣：[黑客的喜悦](https://rads.stackoverflow.com/amzn/click/com/0201914654)。

例如，您有许多技巧，例如小技巧等...（例如，您有几种平方根算法，可以在 google 图书版本上看到）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-01T14:34:16.810

不完全是数学技巧，但我喜欢Java6 中关于**[罗马数字的这个：](http://www.iam.unibe.ch/~akuhn/blog/2008/11/roman-numerals-in-your-java/)**

```
public class Example {
    public static void main(String[] args) {
        System.out.println(
            MCMLXXVII + XXIV
        );
    }
} 
```

会给你[预期的结果](http://home.hiwaay.net/~lkseitz/math/roman/rn.cgi)（1977 + 24 = **2001**），因为重写规则：
`class Transform extends TreeTranslator`Java 编译器的内部类。

`Transform`访问源代码中的所有语句，并将名称与罗马数字匹配的每个变量替换为具有相同数值的 int 字面量。

```
public class Transform extends TreeTranslator {
    @Override
    public void visitIdent(JCIdent tree) {
        String name = tree.getName().toString();
        if (isRoman(name)) {
            result = make.Literal(numberize(name));
            result.pos = tree.pos;
        } else {
            super.visitIdent(tree);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-01T14:19:08.087

我是 Bresenham Line 的忠实粉丝，但是当 CPU 速度较慢时，[CORDIC 旋转器](http://www.andraka.com/cordic.htm)为我启用了各种像素诡计。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-02T15:14:12.970

我一直对与日期有关的两个经典“魔术”算法印象深刻：

*   用于计算给定日期的星期几的[Zeller 同余](http://en.wikipedia.org/wiki/Zeller%27s_congruence)
*   计算复活节日期的[高斯算法](http://en.wikipedia.org/wiki/Computus)

一些（未经测试的）代码如下：

```
import math

def dayOfWeek(dayOfMonth, month, year):
    yearOfCentury = year%100
    century = year // 100

    h = int(dayOfMonth + math.floor(26.0*(month + 1)/10) + yearOfCentury \
         + math.floor(float(yearOfCentury)/4) + math.floor(float(century)/4) \
         + 5*century) % 7
    return ['Saturday', 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'][h]

def easter(year):
    a = year%19
    b = year%4
    c = year%7
    k = int(math.floor(float(year)/100))
    p = int(math.floor((13 + 8.0*k)/25))
    q = int(math.floor(float(k)/4))
    M = (15 - p + k - q)%30
    N = (4 + k - q)%7
    d = (19*a + M)%30
    e = (2*b + 4*c + 6*d + N)%7
    day1 =  22 + d + e 
    if day1 <= 31: return "March %d"%day1
    day2 = d + e - 9
    if day2 == 26: return "April 19"
    if day2 == 25 and (11*M + 11)%30 < 19: return "April 18"
    return "April %d"%day2  

print dayOfWeek(2, 12, 2008)  # 'Tuesday'
print easter(2008)            # 'March 23' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-02T19:07:05.697

[Bit Twiddling Hacks](http://www-graphics.stanford.edu/~seander/bithacks.html)有很多很酷的技巧。

虽然其中一些现在已经过时，但我对Michael Abrash[的“代码优化之禅”中的一些技巧感到敬畏。](http://portal.acm.org/citation.cfm?id=174601)生命游戏的实施令人难以置信。

# c# - 在像架构这样的插件中使用 Ninject

> ID：330927
> 
> 赞同：27
> 
> 时间：2008-12-01T13:59:40.967
> 
> 标签：c#, .net, plugins, ninject

我正在学习 DI，最近做了我的第一个项目。

在这个项目中，我实现了存储库模式。我有接口和具体的实现。我想知道是否可以将我的接口的实现构建为“插件”，即我的程序将动态加载的 dll。

所以程序可以随着时间的推移而改进，而不必重建它，您只需将 dll 放在“插件”文件夹中，更改设置，瞧！

这可能吗？Ninject 可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2011-12-12T23:08:26.083

虽然[Sean Chambers 的解决方案](https://stackoverflow.com/a/1733373)适用于您控制插件的情况，但它不适用于插件可能由第三方开发并且您不希望它们必须依赖于编写 ninject 模块的情况。

使用Ninject的[Conventions Extension](https://github.com/ninject/ninject.extensions.conventions)很容易做到这一点：

```
public static IKernel CreateKernel()
{
    var kernel = new StandardKernel();

    kernel.Scan(scanner => {
        scanner.FromAssembliesInPath(@"Path\To\Plugins");
        scanner.AutoLoadModules();
        scanner.WhereTypeInheritsFrom<IPlugin>();
        scanner.BindWith<PluginBindingGenerator<IPlugin>>();
    });

    return kernel;
}

private class PluginBindingGenerator<TPluginInterface> : IBindingGenerator
{
    private readonly Type pluginInterfaceType = typeof (TPluginInterface);

    public void Process(Type type, Func<IContext, object> scopeCallback, IKernel kernel)
    {
        if(!pluginInterfaceType.IsAssignableFrom(type))
            return;
        if (type.IsAbstract || type.IsInterface)
            return;
        kernel.Bind(pluginInterfaceType).To(type);
    }
} 
```

然后，您可以使用`kernel.GetAll<IPlugin>()`.

这种方法的优点是：

1.  您的插件 dll 不需要知道它们正在加载 ninject
2.  具体的插件实例将由 ninject 解析，因此它们可以具有构造函数来注入插件宿主知道如何构造的类型。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-11-14T05:27:57.903

这个问题适用于我在这里提供的相同答案：[NInject 可以按需加载模块/程序集吗？](https://stackoverflow.com/questions/1694640/can-ninject-load-modules-assemblies-on-demand/1733369#1733369)

我很确定这就是你要找的东西：

```
var kernel = new StandardKernel();
kernel.Load( Assembly.Load("yourpath_to_assembly.dll"); 
```

如果您在 Ninject.dll 中查看带有反射器的 KernelBase，您将看到此调用将递归加载已加载程序集中的所有模块（Load 方法采用 IEnumerable）

```
public void Load(IEnumerable<Assembly> assemblies)
{
    foreach (Assembly assembly in assemblies)
    {
        this.Load(assembly.GetNinjectModules());
    }
} 
```

我将它用于我不希望直接程序集引用会非常频繁地更改的东西的场景，并且我可以换出程序集以为应用程序提供不同的模型（假设我有适当的测试）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-03-15T12:42:39.383

扩展基于 v.2 的 @ungood 好答案，使用 Ninject 的 v.3（目前在 RC3 上），它可以变得更加容易。您不再需要任何 IPluginGenerator，只需编写：

```
var kernel = new StandardKernel();
kernel.Bind(scanner => scanner.FromAssembliesInPath(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location))
                                   .SelectAllClasses()
                                   .InheritedFrom<IPlugin>()
                                   .BindToAllInterfaces()); 
```

请注意，我正在寻找在应用程序的同一路径中实现 IPlugin（将您的界面放在此处）的插件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-01T14:02:09.853

您可以使用普通的 C# 反射轻松地做到这一点，您不需要任何额外的技术。

网上有很多例子，例如 [http://www.codeproject.com/KB/cs/c__plugin_architecture.aspx](http://www.codeproject.com/KB/cs/c__plugin_architecture.aspx)

通常，在您的主应用程序中，您需要加载实现插件的程序集，例如：

```
ass = Assembly.Load(name); 
```

然后您需要创建插件的一个实例。如果您知道类的名称，它将如下所示：

```
ObjType = ass.GetType(typename);
IPlugin plugin = (IPlugin)Activator.CreateInstance(ObjType); 
```

然后你就用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-05T17:00:20.753

看看托管可扩展性框架。[http://www.codeplex.com/MEF](http://www.codeplex.com/MEF)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-29T02:24:32.373

我认为不需要框架。本教程解决了您的问题[http://www.codeproject.com/KB/cs/c__plugin_architecture.aspx](http://www.codeproject.com/KB/cs/c__plugin_architecture.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-28T15:26:11.000

我得到了这个作为 Activator.CreateInstance + Ninject 的成功，只是想指出这方面的一些事情 - 希望它会激发某人对这个问题提出一个真正的杀手级答案。

如果您还没有遇到自动扫描模块和类并在 Ninject 中正确注册它们的麻烦，并且仍在通过 Activator.CreateInstance 创建您的插件，那么您可以 post-CreateInstance 将依赖项注入 via

```
IKernel k = ...
var o = Activator.CreateInstance(...);
k.Inject( o ); 
```

当然，这只是通往[http://groups.google.com/group/ninject/browse_thread/thread/880ae2d14660b33c之类的临时解决方案](http://groups.google.com/group/ninject/browse_thread/thread/880ae2d14660b33c)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-01T14:05:16.617

有多种方法可以解决这个问题，您已经完成了通过预定义接口实现具体实现的主要目标。实际上，如果您的界面保持稳定，您应该能够构建您的核心应用程序。

但是，我不确定实施将如何与 Ninject 一起使用。您可以使用[提供者模型](http://msdn.microsoft.com/en-us/library/aa479030.aspx)或反射来执行此操作 - 尽管我认为反射是多余的，如果您不是绝对需要这样做的话。

使用提供者模型方法，您将文件放在 /bin 文件夹或您正在探测的任何其他文件夹中，并调整 .config 文件以反映提供者的存在。如果您有一个特定的“插件”文件夹，您可以创建一个在应用程序启动时调用的方法，并定期调用，否则，扫描新的或删除的实例并重新加载提供程序。

这将在 C# 或 VB 下的 ASP.NET 中工作。但是，如果您正在执行某种其他应用程序，则需要考虑另一种方法。提供者实际上只是 Microsoft 对[Strategy Pattern](http://en.wikipedia.org/wiki/Strategy_pattern)的转折。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-12-01T14:03:35.030

问题是，如果您在模块加载中设置的对象在程序内部使用，您可能需要重新编译。原因是你的程序可能没有你的类的最新版本的程序集。例如，如果您为其中一个接口创建一个新的具体类，假设您更改了插件 dll。现在，Injector 将加载它，很好，但是当它在您的程序 (kernel.get(...)) 中返回时，您的程序可能没有程序集并且会抛出错误。

我正在谈论的示例：

```
BaseAuto auto = kernel.Get<BaseAuto>();//Get from the NInjector kernel your object. You get your concrete objet and the object "auto" will be filled up (interface inside him) with the kernel.

//Somewhere else:

public class BaseModule : StandardModule
{
        public override void Load(){
            Bind<BaseAuto>().ToSelf();
            Bind<IEngine>().To<FourCylinder>();//Bind the interface
        }     
 } 
```

如果您创建了一个名为 SixCylinder 的新 FourCylinder，那么您的实际程序将不会引用您的新对象。因此，一旦您从插件加载 BaseModule.cs，您可能会遇到一些参考问题。为了能够做到这一点，您需要使用您的插件分发这个具体实现的新 dll，该插件将具有注入器将接口加载到具体类所需的模块。这可以毫无问题地完成，但是您开始拥有一个驻留在从插件加载的整个应用程序，并且在某些方面可能会出现问题。意识到。

但是，如果您确实需要一些插件信息，您可以[从 CodeProject 获得一些教程](http://www.codeproject.com/KB/cs/c__plugin_architecture.aspx)。

# vba - Access VBA：是否可以重置错误处理？

> ID：330937
> 
> 赞同：15
> 
> 时间：2008-12-01T14:06:55.507
> 
> 标签：vba, ms-access, error-handling

我在程序的第一部分使用

`On Error GoTo start`

假设在我的第二部分我再次使用

`On Error Resume Next`

第二个错误陷阱将不会被激活，因为第一个错误陷阱仍将处于活动状态。有什么方法可以在使用第一个错误处理程序后停用它？

```
Set objexcel = CreateObject("excel.Application")
                     objexcel.Visible = True
                     On Error GoTo Openwb
                     wbExists = False
                     Set wbexcel = objexcel.Workbooks.Open("C:\REPORT3.xls")
                     Set objSht = wbexcel.Worksheets("Sheet1")
                     objSht.Activate
                     wbExists = True
Openwb:

                     On Error GoTo 0
                     If Not wbExists Then
                     objexcel.Workbooks.Add
                     Set wbexcel = objexcel.ActiveWorkbook
                     Set objSht = wbexcel.Worksheets("Sheet1")

                     End If

                     On Error GoTo 0

Set db = DBEngine.opendatabase("C:\book.mdb")
Set rs = db.OpenRecordset("records")

Set rs2 = CreateObject("ADODB.Recordset")
rs2.ActiveConnection = CurrentProject.Connection

For Each tdf In CurrentDb.TableDefs

   If Left(tdf.Name, 4) <> "MSys" Then
        rs.MoveFirst
        strsql = "SELECT * From [" & tdf.Name & "] WHERE s=15 "

        Do While Not rs.EOF
            On Error Resume Next

            rs2.Open strsql 
```

执行最后一条语句后，我想忽略错误并转到下一张表，但错误处理似乎不起作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-01T16:43:23.117

`On error goto 0`使用 Visual Basic 进行错误处理（在一般消息框中）

`On error goto label`会将您的代码重定向到***标签：***

`On error resume next`将忽略错误并继续

`Resume next`引发错误后将代码重定向到下一行

这意味着指令的组合，例如

```
 On Error goto 0
    ...
    On Error goto 0 
```

没有意义

如果你想重定向一个“错误”指令，你必须这样做：

```
 Do While Not rs.EOF

        On Error Resume Next
        rs2.Open strsql
        On error Goto 0

        rs2.moveNext

    Loop 
```

如果您想将错误重定向到标签（用于处理或其他），然后返回发生错误的代码，您必须编写如下内容：

```
 On error goto label
    ...
    ...
    On error goto 0
    exit sub (or function)

    label:
    ....
    resume next
    end function 
```

但我真的建议您对错误管理更加严格。您首先应该能够执行以下操作：

```
 Set objexcel = CreateObject("excel.Application")
    objexcel.Visible = True

    On Error GoTo error_Treatment
    wbExists = False
    Set wbexcel = objexcel.Workbooks.Open("C:\REPORT3.xls")
    Set objSht = wbexcel.Worksheets("Sheet1")
    objSht.Activate
    wbExists = True
    On error GoTo 0

    Set db = DBEngine.opendatabase("C:\book.mdb")
    Set rs = db.OpenRecordset("records")

    Set rs2 = CreateObject("ADODB.Recordset")
    rs2.ActiveConnection = CurrentProject.Connection

    For Each tdf In CurrentDb.TableDefs
        ....
        'there are a number of potential errors here in your code'
        'you should make sure that rs2 is closed before reopening it with a new instruction'
        'etc.'
    Next tdf

    Exit sub

    error_treatment:
    SELECT Case err.number
       Case **** '(the err.number raised when the file is not found)'
           objexcel.Workbooks.Add
           Set wbexcel = objexcel.ActiveWorkbook
           Set objSht = wbexcel.Worksheets("Sheet1")
           Resume next 'go back to the code'
       Case **** '(the recordset cannot be opened)'
           ....
           ....
           Resume next 'go back to the code'
       Case **** '(whatever other error to treat)'
           ....
           ....
           Resume next 'go back to the code'
       Case Else
           debug.print err.number, err.description '(check if .description is a property of the error object)'
           'your error will be displayed in the immediate windows of VBA.' 
           'You can understand it and correct your code until it runs'
       End select
    End sub 
```

下一步将是预测代码中的错误，以便不会引发 err 对象。例如，您可以编写一个像这样的通用函数：

```
 Public function fileExists (myFileName) as Boolean 
```

然后，您可以通过测试 xls 文件的存在来在代码中利用此功能：

```
 if fileExists("C:\REPORT3.xls") Then
        Set wbexcel = objexcel.Workbooks.Open("C:\REPORT3.xls")
    Else
       objexcel.Workbooks.Add
       Set wbexcel = objexcel.ActiveWorkbook
    Endif        
    Set objSht = wbexcel.Worksheets("Sheet1")
    objSht.Activate 
```

你不再需要你的 wbExist 变量了......

同样，您应该预料到您的记录集没有记录的情况。在测试之前写下 rs.MoveFirst 可能会引发错误。然后你应该写

```
 If rs.EOF and rs.BOF then
    Else
        rs.moveFirst
        Do while not rs.EOF
             rs.moveNext
        Loop
    End If 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-01T14:41:13.690

您需要清除错误。尝试将此代码放入：

```
If Err.Number > 0 Then
    Err.Clear
End If 
```

您还可以使用 Err.Number 来处理特定的错误情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-01T14:57:38.900

避免错误而不是处理错误几乎总是更好。例如：

```
Set objexcel = CreateObject("excel.Application")
objexcel.Visible = True

'On Error GoTo Openwb '
'wbExists = False '

If Dir("C:\REPORT3.xls") = "" Then
    objexcel.Workbooks.Add
    Set wbexcel = objexcel.ActiveWorkbook
    Set objSht = wbexcel.Worksheets("Sheet1")
Else
    Set wbexcel = objexcel.Workbooks.Open("C:\REPORT3.xls")
    Set objSht = wbexcel.Worksheets("Sheet1")
End If

objSht.Activate
'wbExists = True ' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T14:11:03.893

尝试

```
On Error Goto 0 
```

如需进一步帮助，请查看此处：http: [//msdn.microsoft.com/en-us/library/bb258159.aspx](http://msdn.microsoft.com/en-us/library/bb258159.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-12T22:49:45.693

答案和解决方案是有区别的。有时我们只需要一个答案，感谢警告，让我们从经验中了解到这实际上并不是一个好的解决方案。话虽如此，我发现[了这个](https://stackoverflow.com/questions/15542747/on-error-goto-0-not-resetting-error-trapping?rq=1)：

您需要使用 On Error GoTo -1 或 Err.Clear 来重置错误捕获。

检查我几个月前发布的[这个答案以获得更详细的解释。](https://stackoverflow.com/questions/14158901/difference-between-on-error-goto-0-and-on-error-goto-1-vba/14159999#14159999)

# asp.net-mvc - 有谁知道asp.net mvc是否有5星评级控制？

> ID：330938
> 
> 赞同：11
> 
> 时间：2008-12-01T14:07:16.257
> 
> 标签：asp.net-mvc

我需要为基于 asp.net mvc 构建的应用程序设置星级控制（允许部分评级，如 4.5）。

朝这个方向的任何指示都会有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-01T15:32:19.907

来自 Komodomedia 的[Rogie](http://www.komodomedia.com/blog/)在这个话题上花了太长时间[写](http://www.komodomedia.com/blog/2005/08/creating-a-star-rater-using-css/)了3[篇关于这个](http://www.komodomedia.com/blog/2007/01/css-star-rating-redux/)[话题](http://www.komodomedia.com/blog/2005/08/creating-a-star-rater-using-css/) 的文章。

[以防万一有人在链接汤中迷路了，这是最新的。](http://www.komodomedia.com/blog/2007/01/css-star-rating-redux/)

它不是 MVC 特定的，但它是跨浏览器的，允许您通过回发或 ajax 取回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T17:02:10.863

同时，我在 asp.net 中找到了这个带有示例的链接。 [http://beckelman.net/post/2008/08/30/Survey-Using-jQuery-Star-Rating-Widget.aspx](http://beckelman.net/post/2008/08/30/Survey-Using-jQuery-Star-Rating-Widget.aspx)

这很有帮助。

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-01-26T19:21:37.213

我知道它不是一个控件，但我发现它很容易实现。

我刚刚在我的一个网站上使用 MVC 实现了这一点，并且效果很好。

[http://www.mikesdotnetting.com/Article/114/jQuery-Star-Rating-with-ASP.NET-MVC](http://www.mikesdotnetting.com/Article/114/jQuery-Star-Rating-with-ASP.NET-MVC)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-01T05:38:54.823

This one is my favorite Rating plug-in for JQuery:

[http://rateit.codeplex.com/](http://rateit.codeplex.com/)

it comes with good examples: [http://www.radioactivethinking.com/rateit/example/example.htm](http://www.radioactivethinking.com/rateit/example/example.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-01T14:09:10.073

jQuery 插件列表中有几个可以满足您的需求。然而，目前还没有针对 MVC 的特定控制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-15T11:24:22.900

I tried looking at the links given as response however was not that happy and I developed my own star rating system here and have wrote an article of how I have done it. Hope this will be helpful

[http://www.dotnetfunda.com/articles/show/2828/developing-a-star-rating-in-aspnet-mvc](http://www.dotnetfunda.com/articles/show/2828/developing-a-star-rating-in-aspnet-mvc)

Thanks

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-08-04T09:12:34.667

我知道这是一篇旧帖子，但我想为所有将通过搜索引擎找到此帖子的人回答这个问题。

本文解释了如何为 MVC 实现星级评定系统。我已经实现了它，它就像一个魅力。

[http://www.codecapers.com/post/Building-a-Star-Rating-System-with-ASPNET-MVC-and-jQuery.aspx](http://www.codecapers.com/post/Building-a-Star-Rating-System-with-ASPNET-MVC-and-jQuery.aspx)

# blackberry - BlackBerry - 如何向主屏幕添加内容？

> ID：330940
> 
> 赞同：1
> 
> 时间：2008-12-01T14:08:49.637
> 
> 标签：blackberry, java-me

在 Windows Mobile 世界中，您可以创建一个所谓的 Today 插件，将内容添加到手机的主屏幕——您可以在其中查看未接电话、未读短信和即将发生的事件的数量。是否有可能在黑莓上做类似的事情？我想在那里显示一些重要信息，以便它们尽可能可见且易于访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-03-17T12:57:27.833

要在主屏幕上提供一些信息，您可以使用应用程序图标：
[在 BlackBerry JDE 4.5.0 的状态栏中添加通知图标](https://stackoverflow.com/questions/1699369/add-a-notification-icon-at-the-status-bar-in-blackberry-jde-4-5-0)
[alt text http://img691.imageshack.us/img691/6459/icoupdate3.jpg](http://img691.imageshack.us/img691/6459/icoupdate3.jpg) 其他可用的东西来自 RIM OS 4.6 如果应用程序指示器：
[Blackberry - 如何在状态栏](https://stackoverflow.com/questions/1465224/blackberry-how-to-use-notification-icon-in-statusbar)
[替代文本中使用通知图标 http://img198.imageshack.us/img198/3807/standardindicator.png](http://img198.imageshack.us/img198/3807/standardindicator.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-01T14:23:42.807

这些东西已经根据主题显示在功能区上。如果要创建/修改主题，请使用 Plazmic CDK。

有两种方法可以将单个图标放在功能区上（类似于邮件、日历、地址簿、浏览器、地图等图标）：

1.  渠道推送：如果用户在 BES 上最简单，现在为 BIS 上的非企业人员提供一种称为 WebSignals 的方法。
2.  编写 midp 或 rimlet j2me 应用程序。除非您确实需要与其他（非 RIM）j2me midp 设备兼容，否则首选 Rimlet。
3.  好的，技术上还有第三种方式，但我真的不认为它很严重：MDS Studio。

所有工具都是免费的，但如果您使用安全 API 编写轮辋，则可能需要代码签名密钥。

[http://na.blackberry.com/eng/support/docs/developers/?userType=21](http://na.blackberry.com/eng/support/docs/developers/?userType=21)

# sql - SQL 关系和索引

> ID：330946
> 
> 赞同：3
> 
> 时间：2008-12-01T14:10:07.357
> 
> 标签：sql, sql-server, tsql

我有一个 MS SQL 服务器应用程序，我在其中定义了我的关系和主键。

但是，我是否需要进一步定义关系字段的索引，这些索引有时不用于连接，而只是作为 where 子句的一部分？

我正在假设定义关系会创建一个索引，sql 引擎可以重用该索引。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-01T14:33:10.477

关于这个主题已经写了一些很厚的书！

以下是一些经验法则：-

不要费心索引（除了 PK）任何小于 1000 行的表。

否则为所有 FK 编制索引。

检查您的 SQL 并寻找最能减少您的结果集和索引该列的 where 子句。

例如。给定：

```
    从颜色 =“红色”且制造商 =“宝马”和 ECAP =“2.0”的汽车中选择所有者；

```

您可能有 20,000 辆红色汽车中的 5000 辆，因此编制索引不会有太大帮助。但是，您可能只有 100 辆宝马，因此索引 MANUFACURER 会立即将您的结果集减少到 100，并且您可以通过简单地扫描一百行来消除蓝色和白色汽车。

通常，dbms 会根据基数选择一个或两个可用的索引，因此需要进行二次猜测并仅定义可能使用的那些索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-01T14:14:47.287

不会在外键约束上自动创建索引。但是唯一和主键约束将创建它们。

在您使用的查询上创建索引，无论是在连接上还是在 WHERE 子句上都是可行的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T14:14:02.200

就像编程世界中的一切一样，这取决于。您显然希望创建索引和关系以保持规范化并加快数据库查找速度。但是您还希望通过没有太多索引来平衡这一点，因为 SQL Server 将花费更多时间来构建每个索引。此外，您拥有的索引越多，数据库中可能出现的碎片就越多。

所以我所做的就是放入明显的​​索引和关系，然后在应用程序建立在可能的慢查询上之后进行优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-01T14:14:48.050

定义关系不会创建索引。

通常在您需要索引的某个字段的 where 子句的地方，但请注意不要只是将索引扔到所有地方，因为它们可以并且确实会对插入/更新性能产生影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-01T14:13:41.220

我会首先确保每个 PK 和 FK 都有一个索引。

此外，我发现在 SSMS 中使用索引调优向导会在您为其提供正确信息时提供极好的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T11:41:25.650

**数据库注意事项**

设计索引时，请考虑以下数据库准则： 表上的大量索引会影响 INSERT、UPDATE、DELETE 和 MERGE 语句的性能，因为所有索引都必须随着表中数据的变化而适当调整。

1.  避免过度索引大量更新的表并保持索引窄，即尽可能少的列。

2.  使用许多索引来提高对更新要求低但数据量大的表的查询性能。大量的索引可以帮助不修改数据的查询的性能，例如 SELECT 语句，因为查询优化器有更多的索引可供选择，以确定最快的访问方法。

3.  索引小表可能不是最优的，因为查询优化器遍历索引搜索数据的时间比执行简单的表扫描要长。因此，可能永远不会使用小表上的索引，但仍必须在表中的数据发生变化时对其进行维护。

4.  Indexes on views can provide significant performance gains when the view contains aggregations, table joins, or a combination of aggregations and joins. The view does not have to be explicitly referenced in the query for the query optimizer to use it.

--Stay_Safe--

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-01T14:13:45.260

索引不是很昂贵，并且比您想象的更快地加快查询速度。我建议为查询中经常使用的所有关键和非关键字段添加索引。您甚至可以使用执行计划来推荐可以加快查询速度的其他索引。

索引对您不利的唯一一点是当您进行大量数据插入时。每次插入都需要表中的每个索引与表的数据一起更新。

您可以选择等到应用程序正在运行并且您对要改进的数据库有一些已知查询，或者如果您有一个好主意，您现在可以这样做。

# php - 删除前导 0？

> ID：330951
> 
> 赞同：2
> 
> 时间：2008-12-01T14:12:37.197
> 
> 标签：php

有没有一种简单的方法可以删除前导零（如 01 变为 1）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-01T14:28:18.163

您可以使用以下[`ltrim`](http://php.net/ltrim)功能：

```
ltrim($str,"0"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-01T14:15:27.690

```
$str = "01";
echo intval($str); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-01T19:25:31.463

如果您使用修剪功能，您可能会错误地删除一些其他字符，例如修剪“12”您将获得“2”。使用 intval() 函数。此函数会将您的字符串（可能以前导零开头）转换为整数值。intval("02") 将为 2，而 intval ("32") 将为 32。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-01T14:19:03.347

正则表达式替换`/^0*/`为 '' 以获得字符串返回解决方案

确切的代码将是这样的

```
<?php
 $string_number = '000304';
 echo preg_replace('/^0*/', '', $string_number);
?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-01T14:18:05.703

只需乘以 1

```
echo "01"*1 
```

# svn - 为什么选择 Subversion 而不是竞争对手？

> ID：330963
> 
> 赞同：18
> 
> 时间：2008-12-01T14:15:40.730
> 
> 标签：svn, version-control

我个人以有限的方式使用了 Mercurial 和 Subversion，我只是不明白为什么 95% 的人会选择 SVN 而不是其他东西。只是垄断案例还是SVN中隐藏了很多其他系统没有的好东西？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2008-12-01T14:17:34.160

它是免费的、开源的、有良好的文档、被广泛使用、简单/易于使用、具有重要的功能集、可在许多平台上使用、提供支持。

对于一款软件，您可以要求的不多。

编辑我知道它在处理分支和合并方面不如其他工具好 - 但很多人要么接受它，要么使用该工具来避免合并。

另一个原因是概念模型与 CVS 和 SourceSafe 的概念模型相匹配 - 因此人们不必掌握不同的思考源代码控制和更改的方式。（就像 Hg 和 Git 一样）

我当然不是说 SVN 比那些更好 - 只是给出它为什么受欢迎的答案。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-12-01T14:22:43.213

*   大多数开发人员还不习惯分布式源代码控制。从一个“传统” SCM 到 SVN 的概念转变较少。特别是它是 CVS 的自然迁移路径。
*   Subversion 已经出现了更长的时间。不要低估获得牵引力需要多长时间。
*   SVN 不仅因推出时间长而具有更大的发展势头，而且还拥有良好的业绩记录。长期稳定，得到了很多项目的信任，没有让他们失望。如果你是经理，那是你想听到的。
*   Subversion 与许多 IDE 很好地集成在一起。也许 Mercurial 也是如此，但 git 肯定不是这样。

就我个人而言，我刚刚开始掌握 git 长期以来一直是 Subversion 的粉丝。我仍然更喜欢 Subversion，但否认分布式源代码控制的优势是愚蠢的......

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-12-01T14:19:42.160

这都是关于支持的。

*   文件支持
*   IDE的支持
*   托管公司的支持
*   企业级支持

支持，支持，支持。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-12-01T14:23:49.403

CVS 曾经是默认的（它几乎是唯一的答案）。SVN 被明确设计为更好的 CVS。许多 CVS 用户会迁移到 SVN 是有道理的，因为它修复了 CVS 的几乎所有故障，更易于使用和维护，添加了新功能，并且具有非常简单的迁移路径。

SVN 也有一些问题，但通常只有高级用户会遇到这些问题。诸如 Git 和 Mercurial 之类的系统似乎可以解决这些问题（我只是稍微涉足了 git，从未使用过 mercurial）。SVN 对于大多数用途来说已经足够好了，并且拥有用户群、社区和工具支持，使其成为对刚入门的人非常有吸引力的选择。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-01T14:31:46.173

我发现设置起来非常快。如果我使用[VisualSVN](http://visualsvn.com/)服务器（免费）和[AnkhSVN](http://ankhsvn.open.collab.net/) VS 插件（也是免费的）并添加[TortoiseSVN](http://tortoisesvn.tigris.org/) shell 扩展，我可以在不到 20 分钟的时间内让您的代码在源代码控制下加上 3 个客户端。简单易懂...很好的支持...

那里是最好的吗？可能不是。但它确实很容易设置。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-12-01T20:21:13.940

不是*每个人*都使用 SVN，我们中的一些人正在使用[GIT](http://git.or.cz/) ... ;)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-01T14:22:58.110

许多人来自 CVS，Subversion 可能是最像 CVS 的 SCM，因此易于学习。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-12-01T14:25:07.670

对于集中式版本控制，这是安全的选择，它已经足够好了，每个人都在使用它。与 TortioseSVN 等工具一起使用非常好。可能有更好的解决方案，但它们不是免费的，不是众所周知的或两者兼而有之。

去中心化版本控制非常适合 OSS 的工作方式，但我认为大多数公司不会使用它。跟踪更改和版本似乎更难。拥有许多不同版本的代码更容易解​​决许多不同的错误排列和实现的功能，这是很难卖给管理层的东西。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-02T23:28:47.993

图形用户界面的。

根据我的经验，没有技术人员使用版本控制是一项艰苦的斗争。给他们一个漂亮的 GUI 并告诉他们通过右键单击来更新/提交是他们使用它的唯一方式。

现在，如果 git 有一个干净、可用的 GUI，那么它真的会起飞。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-12-01T14:20:47.163

出于我们的目的，它很容易站起来，易于使用，并且在我们选择的 IDE 中具有良好的集成工具。它是最好的吗？也许不是，但就中央存储库而言，它可以解决问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-01T14:27:04.030

在大约半天左右的时间里，我安装了 SVN，并针对 Windows 域帐户（使用 Apache）进行身份验证，以识别具有域的组。虽然我同时使用 Windows 和 Unix 进行开发，但公司的后端服务都是微软的。在 Microsoft 环境下易于设置的事实非常棒。

我们没有做任何花哨的事情，因为这里的大多数开发人员都拥有他们的整个项目（我们还没有进行任何合并）。由于任何人（有权限）都可以在他们的浏览器中查看存储库，因此这是分发版本的好方法。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-12-01T14:51:03.420

对我来说：免费、良好的文档、通过 TortoiseSVN 与 Windows 的良好集成以及作为 CVS 的标准和自然继承者的看法使其成为一个非常明显的选择。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-12-01T14:29:48.083

我们不只是使用 Subversion - 在早期我们使用 Source Safe（*远离*），然后我们成长并需要分支，所以我们切换到 TFS。

TFS 真的很难以这种方式使用。不是用户友好的。完全没有。对于像我们这样的小型操作（5 个开发人员），感觉非常臃肿。

此外，TFS 与 SharePoint 有这种邪恶的共生关系，这对我们不利。如果我们有更多的 IT 资源，也许我们可以为这些迷宫般的领域投入更多的开发人员，这不会是一个问题，但是在我们的 SharePoint 安装周围有一些严重的 IT 崩溃，这让我们对我们的资源感到害怕。

而且因为它的分支非常神秘，所以我们实现它的任务失败了！

大约一个月前，我们使用 VisualSVN 作为我们的客户端切换到 Subversion（它的成本为 50 美元/座，但比免费的 AnkhSVN 更精致）。VisualSVN 建立在 Tortoise 之上，效果很好。

关于 Subversion，我最喜欢的一点是它可以将您的代码存储为文本文件，而不是存储在专有数据库中（尽管它可以使用 BerkleyDB 作为后端，但性能优势通常可以忽略不计）。因此，您不会遇到 SharePoint 出现故障并且您的代码很难获取或可能 (gulp) 消失的情况。它只是磁盘上的文本文件。

因此，它是免费的、精简的、易于使用的，并且可以正常工作。我对 Subversion 非常满意。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-12-01T14:31:46.080

这是人们所知道的。没有更多的东西。是的，一旦设置好（这可能会很痛苦），它很容易使用，是的，它与大多数 IDE 集成得很好，是的，有很好的工具可供它使用（例如 TortoiseSVN），是的，它已经稳定了很长时间时间，但所有这些事情只是意味着大多数人并不认为迫切需要*寻找*替代方案。

它之所以被广泛使用，基本上*是因为*它被广泛使用。人们熟悉它，几乎每个人都“默认”使用它。

我仍然习惯于 Bazaar 和去中心化 SCM 的想法，但我已经或多或少地相信它对于几乎任何项目来说都是一个更好的模型。但这是一场艰苦的斗争，因为这是一个人们必须习惯并融入其工作流程的新概念。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-12-01T20:30:38.073

它免费、稳定、独立于平台、易于部署、易于集成到 IDE 中并被广泛使用。

这些是我使用它的原因。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-12-02T02:18:45.950

实际上，我将 Mercurial 视为 Subversion 的替代品……我真的很喜欢 Mercurial 的命令语法。然后我做了一个小实验。我拿了 Boost 的 tar 球，解压缩并尝试将其签入 Mercurial 存储库。

我在 Windows 和 Unix 上做了这个。由于 Mercurial 中的一些路径深度错误，它在 Windows 上失败了。

Subversion 和 git 对此没有问题（bazaar、IIRC 也没有）。我不喜欢 Darc 的命令语法。Git 有腐烂的 windows 支持（需要 Cygwin 或 MSYS），几乎没有人听说过 Bazaar ......所以我留在了 Subversion。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-12-01T14:21:31.563

它比人们以前使用的 CVS 好得多。而且它的缺点很少，人们没有这种感觉，他们应该尝试其他的东西。Subversion 足以满足大多数需求，因此他们不尝试其他任何方法，即使它可能更有效率。我还没有使用过 mercurial（我想尝试一下，但没有时间，而且由于 SVN 工作，这在我的列表中没有高优先级）。

此外，分布式版本控制一开始就比较复杂，所以人们可能会感到害怕。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-12-01T14:31:27.173

在我的公司，我们一直在使用带有 TortoiseSVN 的 Subversion 来替代 Visual Sourcesafe（哎呀，是的，我知道），总的来说，这是一次非常积极的体验。

但是，我们遇到了一个非常重要的针对颠覆的重大负面问题：针对基于 Apache 服务器的 SVN 使用的任何 1.5.X 版本都会泄漏内存，并且对于我们的使用模式来说，这已经够糟糕了，它往往会导致服务器每天多次崩溃。如果我没记错的话，我们不得不恢复到 1.4.8 版本，这引起了一些恐慌。
幸运的是，有一些 Python 脚本可以帮助将工作副本恢复到旧版本的 SVN。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-12-01T20:28:37.093

SVN 看起来很有希望，但在尝试了几个项目之后，我又回到了 CVS。这很简单，而且很有效。

我为此写了一篇博文，结尾是这样一句话：*“我越想，SVN 似乎是一个书呆子对理论问题的实现，而 CVS 是对现实生活情况的务实解决方案。”*

如果你喜欢你可以在这里找到完整的帖子： [http ://www.rolfje.com/2008/02/16/svn-is-missing-the-point/](http://www.rolfje.com/2008/02/16/svn-is-missing-the-point/)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-12-02T23:17:35.457

它是免费的，易于管理，具有小型组织所需的基本功能。

但根据我的经验，它无法击败商业替代品（尤其是 AccuRev，还有 ClearCase、Perforce 等），它们会给你带来比 svn 更多的功能。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2009-04-21T15:27:34.567

除了被广泛使用之外，您还可以找到大量提供 SVN 存储库的托管服务。但是，我同意.. SVN 有一些痛苦。

# windows - 我应该在哪里存储我的日志文件，以便用户对其具有写入权限？

> ID：330965
> 
> 赞同：2
> 
> 时间：2008-12-01T14:15:50.933
> 
> 标签：windows

我目前将我的日志文件存储在 Program Files\My App 文件夹中，但如果某些用户不是高级用户或管理员，则他们无权在此处写入。这种类型的日志文件有一个共同的位置吗？

### 更新：

我目前正在使用 Application.StartupPath。

```
logFileLocation = System.Windows.Forms.Application.StartupPath; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T14:23:35.880

[我会使用 Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData)](http://msdn.microsoft.com/en-us/library/system.environment.getfolderpath.aspx)然后[Path.Combine](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)与 ApplicationName\Version\LogFileName

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T14:22:04.510

我会使用临时文件夹。

使用Windows API 上的[GetTempPath](http://msdn.microsoft.com/en-us/library/aa364992(VS.85).aspx)函数，或.NET 中的[Path.GetTempPath](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-05-02T21:53:36.437

Instead of writing to a log file, write to the [event log](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx). It's managed by a system service, so you don't have to worry about any particular user's storage permissions. If you write to the general application event log, then your application's messages will be mixed with everything else from the system, so when you request the logs from your customer, you'll get to see what else was happening on the system when your application failed. You can also write to an application-specific event log.

# php - 如何在 Zend_Form 中使用来自 Zend_Db_Table 的数据

> ID：330971
> 
> 赞同：1
> 
> 时间：2008-12-01T14:18:31.897
> 
> 标签：php, database, zend-framework, zend-form, zend-db-table

我创建了一个表单类，用于编辑删除并将用户添加到数据库。如果我想编辑一个用户，我怎么能简单地将用户的信息提供给表单。

我使用 Zend_Db_Table 从数据库中获取数据。

这是用户窗体类：

```
class UsersForm extends Zend_Form
{
    public function init ()
    {
        $username = new Zend_Form_Element_Text('username',array(
            'validatrors' => array(
                'alpha',
                array('stringLength',5,10)
                ),
            'filters'   => array(
                'StringToLower'
                ),
            'required'  => true,
            'label'     => 'Gebruikersnaam:'
            ));

        $password = new Zend_Form_Element_Password('password', array(
            'validators'=> array(
                'Alnum',
                array('StringLength', array(6,20))
                ),
            'filters'   => array('StringTrim'),
            'required'  => true,
            'label'     => 'Wachtwoord:'
            ));

        $actif = new Zend_Form_Element_Checkbox('actif', array(
            'label'     => 'actif'));

        $this->addElements(array($username,$password,$actif));

        $this->setDecorators(array(
            'FormElements',
            array('HtmlTag', array('tag' => 'dl', 'class' => 'zend_form')),
            array('Description',array('placement' => 'prepand')),
            'Form'
        ));
    }
} 
```

谢谢，

伊沃·特罗珀特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-01T17:36:58.593

这是通过以下方式完成的：

```
$form->populate($data); 
```

其中 $data 是一个包含表行数据的数组，其中字段名称必须与表单中的名称匹配。Zend 将完成剩下的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T18:50:22.080

扩展 Db_Table 上的 'fetchXXX' 或 'find' 方法之一将返回一个 Rowset，在其上调用 current() 将为您提供一个 Row，该方法有一个 toArray 方法，可为您提供 tharkun 响应所要求的格式。

# asp.net - 从 asp.net 缓存返回页面时，哪些事件不会触发？

> ID：330975
> 
> 赞同：0
> 
> 时间：2008-12-01T14:19:30.800
> 
> 标签：asp.net, events, caching

我有一个用户必须登录的应用程序。登录后，他们可能会对我们的数据库进行搜索。

他们的身份会影响搜索结果。

我希望使用缓存页面的结果。VaryByParam 听起来很适合这个。

但是，我不明白在返回页面的缓存版本时会触发或不触发的事件。

我不希望其他用户尝试提供可能指示另一个用户帐户的 url 参数，从而允许他们访问其他人的结果。

因此，我需要一个服务器事件，即使从缓存中返回页面，它也始终会触发，以便我可以根据会话版本检查此 ID 参数。

然而，这也意味着我不能在这个事件中执行我的搜索，因为它总是会运行，因此会破坏缓存的目的。所以我需要另一个事件，只有在没有从缓存中检索到页面时才会*触发*。

**哪些事件在这两组情况下运行？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T14:12:36.953

您是否考虑过设置响应缓存属性以允许客户端计算机缓存结果？对响应使用缓存策略的 SetCacheability 方法将缓存能力设置为**Private**。

如果每个用户可能有不同的结果，您实际上并不需要服务器缓存，请让客户端缓存来完成这项工作。

# c# - 在 C# .NET 中用于在 O(1) 时间内获取项目的“正确”集合？

> ID：330978
> 
> 赞同：6
> 
> 时间：2008-12-01T14:19:50.863
> 
> 标签：c#, .net, optimization, collections, string

如果我要存储一堆字符串值并且我希望稍后能够在 O(1) 时间内找到它们，我经常做的事情是：

```
foreach (String value in someStringCollection)
{
    someDictionary.Add(value, String.Empty);
} 
```

这样，我以后可以轻松地对这些字符串值执行**恒定时间**查找，例如：

```
if (someDictionary.containsKey(someKey))
{
    // etc
} 
```

但是，我觉得我通过创建值**String.Empty**来作弊。我应该使用更合适的 .NET 集合吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-01T14:28:08.227

如果您使用的是 .Net 3.5，请尝试[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)。如果您不使用 .Net 3.5，请尝试[C5](http://www.itu.dk/research/c5/)。否则你当前的方法是好的（@leppie 建议的布尔更好，或者不像@JonSkeet 建议的那样，dun dun dun！）。

```
HashSet<string> stringSet = new HashSet<string>(someStringCollection);

if (stringSet.Contains(someString))
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-01T14:28:33.357

您可以`HashSet<T>`在 .NET 3.5 中使用，否则我会坚持使用当前方法（实际上我更喜欢`Dictionary<string,bool>`，但并不总是那么奢侈）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-01T14:50:32.033

您可能要添加的内容是哈希的**初始大小。**我不确定 C# 的实现方式是否与 Java 不同，但它通常有一些默认大小，如果你添加更多，它会扩展集合。然而，适当大小的散列对于实现尽可能接近 O(1) 很重要。目标是在每个存储桶中准确地获取 1 个条目，而不会使其变得非常大。如果您进行一些搜索，我知道有一个建议的哈希表大小比例，假设您事先知道要添加多少元素。例如，“哈希的大小应为要添加的元素数量的 1.8 倍”（不是实际比率，只是一个示例）。

来自[维基百科](http://en.wikipedia.org/wiki/Hash_table)：

> 使用良好的散列函数，散列表通常可以包含大约 70%–80% 的元素，因为它包含表槽并且仍然表现良好。根据冲突解决机制，随着更多元素的添加，性能可能会逐渐或急剧下降。为了解决这个问题，当负载因子超过某个阈值时，需要分配一个新的更大的表，并将原表的所有内容添加到这个新表中。例如，在 Java 的 HashMap 类中，默认的负载因子阈值为 0.75。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-02T03:10:33.210

我可能应该提出这个问题，因为我经常看到这个问题。是什么让您认为字典是 O(1)？从技术上讲，唯一可能类似于 O(1) 的事情是使用整数索引值访问标准整数索引的固定绑定数组（以这种方式实现的数组中没有查找）。

假设如果它看起来像一个数组引用，它是 O(1)，而“索引”是一个*必须*以某种方式查找的值，但是在幕后，这意味着它不太可能是一个 O(1) 方案，除非你很幸运能够获得一个没有冲突的数据的哈希函数（并且可能有很多浪费的单元格）。

我看到了这些问题，我什至看到了声称 O(1) 的答案 [不是在这个特定问题上，但我确实看到了它们]，没有任何理由或解释确保实际实现 O(1) 所需的任何理由或解释。

嗯，我想这是一个不错的问题。在这里发表此评论后，我会这样做。

# ruby-on-rails - rails中未定义的方法

> ID：330993
> 
> 赞同：4
> 
> 时间：2008-12-01T14:23:00.717
> 
> 标签：ruby-on-rails, ruby, routing

我是 ruby​​ 新手，并开始创建我的 *nd 玩具应用程序。一世：

1.  创建控制器“问题”
2.  创建模型“问题”
3.  创建控制器动作“新”
4.  添加了“New.html.erb”文件

在 erb 文件中，我使用`form_for`助手和`new`控制器操作来实例化 `@question`实例变量。当我尝试运行它时，我得到了`'undefined method: questions_path for #<ActionView::Base:0x5be5e24>'`错误。下面是我的 new.html.erb：

```
<%form_for @question do |f| %>
   <%=f.text_field :title %>
<%end%> 
```

请告知如何解决此问题，并帮助我将此控制器操作混叠。我的意思是我想输入[http://mysite/questions/ask](http://mysite/questions/ask)，而不是 /questions/create

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-01T14:53:40.217

在`config/routes.rb`您需要添加：

```
map.resources :questions 
```

修复未定义的方法 questions_path 问题。

一种获取方法`/questions/ask`是像这样修改`routes.rb`：

```
map.ask_question '/questions/ask', :controller => 'questions', :action => 'create' 
```

这将为您提供`ask_question_path`可以在代码中引用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-01T15:03:58.467

看起来您单独完成了所有这些步骤。您应该尝试脚手架生成器，它将为您构建所有这些。

例子：

```
>ruby script/generate scaffold question question:string answer:string votes:integer
  exists  app/models/
  exists  app/controllers/
  exists  app/helpers/
  create  app/views/questions
  exists  app/views/layouts/
  exists  test/functional/
  exists  test/unit/
  exists  public/stylesheets/
  create  app/views/questions/index.html.erb
  create  app/views/questions/show.html.erb
  create  app/views/questions/new.html.erb
  create  app/views/questions/edit.html.erb
  create  app/views/layouts/questions.html.erb
  create  public/stylesheets/scaffold.css
  create  app/controllers/questions_controller.rb
  create  test/functional/questions_controller_test.rb
  create  app/helpers/questions_helper.rb
  route  map.resources :questions
  dependency  model
  exists    app/models/
  exists    test/unit/
  exists    test/fixtures/
  create    app/models/question.rb
  create    test/unit/question_test.rb
  create    test/fixtures/questions.yml
  create    db/migrate
  create    db/migrate/20081201150131_create_questions.rb 
```

如您所见，通过脚手架，我们得到了我们的模型、控制器、视图、路由、数据库迁移，它将构建一个包含两个字段的问题表，以及 RESTful 控制器操作以立即添加/更新/查看/删除任何问题数据。哦，最重要的是，一组空的测试文件已准备好供您编写测试:)。*******