# StackOverflow 问答 000382000-000382999

# oop - 我们应该总是支持多态而不是枚举吗？

> ID：382000
> 
> 赞同：22
> 
> 时间：2008-12-19T19:42:09.797
> 
> 标签：oop, enums, polymorphism

看完：[干净的代码谈——继承、多态性和测试](http://www.youtube.com/watch?v=4F72VULWFvc)

我检查了我的代码，发现一些 switch 语句可以重构为多态，但我也注意到我只使用带有枚举的 switch 语句。这是否意味着枚举在 OO 设计中是“邪恶的”并且应该用多态性来消除？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-19T19:49:00.530

首先，Java 实际上有很棒的可以多态使用的枚举。我不是 Java 程序员，所以其他人当然可以举一个很好的例子（我不能）。此外，请考虑多态性通常只是矫枉过正。我也刚刚看过这个演讲，它很棒，但它只提供指导，没有灵丹妙药。

尤其*不是*所有`switch`语句都可以替换。状态机实际上是枚举很有意义的一种情况。我在解析中经常使用状态机。当然，这可以通过设计模式和类多态来完成。但它的代码*要多得多*，它执行相同的工作，只是速度较慢，它的可读性并不高，而且它是一种只需要在一个地方使用的解决方案，无需任何代码回收。在这里使用子类化根本没有优势。

再说一次，这是一个例外。一般来说，子类化通常是支持它的语言中更好的解决方案。

编辑：我注意到这可能会引起争议。当然有很多很好的封装解析的解决方案，从正则表达式到 Antlr 等解析器生成器框架。他们没有错，除了琐碎的情况外，这些都是更好的解决方案。但是，我经常使用低级代码（显然不是在 Java 中），其中不支持正则表达式并且解析器生成器也会产生开销。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-19T20:11:16.587

并不是枚举是邪恶的，而是 switch 语句。[C++ FAQ Book](https://rads.stackoverflow.com/amzn/click/com/0201309831)对此进行了长时间的讨论，但要点是：除了有限的领域——例如对来自设备上的寄存器的数据的解释——一个大开关梳建议你重新使用数据来区分子类型。取而代之的是，您应该只使用子类型，获得编译器的帮助以保持其正确性，并且还意味着当您（不可避免地）更改案例集时编译器将自动添加新案例。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-12-19T20:07:57.387

```
class Sunday extends DayOfWeek {}
class Monday extends DayOfWeek {}
class Tuesday extends DayOfWeek {}
class Wednesday extends DayOfWeek {}
class Thursday extends DayOfWeek {}
class Friday extends DayOfWeek {}
class Saturday extends DayOfWeek {} 
```

枚举很好。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-19T19:49:07.333

我毫不犹豫地称任何事情为*邪恶*。这是一个“你想设计这个有多重”的问题。

枚举/开关很好 - 在某些领域。设置类层次结构是问题并不总是需要的开销。但是 case 语句中的代码越多，就越有可能，是的，也许你*应该*转向更重的方法。

我的经典经验是几年前我为一个班级编写的编译器。我的室友和我上同一个班，我们以两种截然不同的方式接近它。我采用了重 OO 方法，充满了多态性。他采用了重型 C 方法，使用枚举和联合。他的代码大约是我的 LOC 大小的 1/2，他的代码编译速度更快，而且他的代码可以*工作*。他的代码很灵活，因为它*没有*过度设计。这对我来说是软件设计方面的宝贵一课。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-12-19T19:46:21.270

“这是否意味着枚举在 OO 设计中是“邪恶的”，应该用多态性来消除？”

通常。

switch/enum 结构可以是多种多态结构中的任何一种： **State**和**Strategy**是最常出现的两个常见结构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T19:46:40.707

我认为当值已知且数量很少时，枚举很有用。
此外，枚举在某种程度上被命名为常量。

枚举没有存储任何其他状态（除了它的值）。
当您具有不同的条件状态时，多态性将很有帮助（并且条件需要比依赖单个变量更多的状态）。

# .net - Visual Studio 2008 致命执行引擎错误 (7A2E0F92)

> ID：382003
> 
> 赞同：1
> 
> 时间：2008-12-19T19:43:16.953
> 
> 标签：.net, visual-studio, visual-studio-2008

当我在 WPF 应用程序中操作 WebBrowser 控件时，Visual Studio 2008 将突然退出。

这是在事件日志中：

> .NET 运行时版本 2.0.50727.3053 - 不可恢复的系统错误。
> 
> .NET 运行时版本 2.0.50727.3053 - 致命的执行引擎错误 (7A2E0F92) (0)

有谁知道此错误的原因或解决方法？

当我更改此 XAML 时会发生这种情况：

```
<WebBrowser
    Name="WebBrowserPreview"
    Grid.Row="1"
    Margin="5"
    Source="http://www.google.com"/> 
```

对此：

```
<WebBrowser
    Name="WebBrowserPreview"
    Grid.Row="1"
    Margin="5" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T19:52:14.207

我只是把整个部分都删掉了。然后从记事本中粘贴新的 <WebBrowser> 标记。

那个时候没有崩溃。

奇怪的。

# wpf - WPF ListView 非活动选择颜色

> ID：382006
> 
> 赞同：66
> 
> 时间：2008-12-19T19:43:55.987
> 
> 标签：wpf, listview, selection

我正在创建一个 WPF 应用程序，其中连续进行了几个 ListView 选择（类似于 iTunes 浏览器）。问题是默认的非活动选择颜色太浅了。（见下文） ![默认非活动选择颜色（太亮）](https://i.stack.imgur.com/hwctc.jpg)

如何更改此颜色，使我的非活动列表视图看起来像这样？（见下文） ![非活动和活动选择颜色相同](https://i.stack.imgur.com/aORZ9.jpg)

## 解决方案

像这样覆盖默认的 SystemColor `Style`：

```
<Style TargetType="ListViewItem">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="{x:Static SystemColors.HighlightColor}"/>
    </Style.Resources>
</Style> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-16T16:42:18.797

改变`SystemColors.ControlBrushKey`对我不起作用，我必须改变 `SystemColors.InactiveSelectionHighlightBrushKey`

所以而不是：

```
<SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Red" /> 
```

我不得不使用：

```
<SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="Red"/> 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2008-12-19T20:43:57.190

该`ListBox`模板使用一种系统颜色调用`ControlBrush`来设置非活动突出显示颜色。因此，您可以覆盖该颜色：

```
<ListBox>
    <ListBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}">Red</SolidColorBrush>
    </ListBox.Resources>
</ListBox> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2010-09-09T08:56:10.510

答案在某些情况下会解决问题，但并不理想，因为当控件被禁用/只读时它会中断，并且它还会覆盖配色方案，而不是利用它们。我的建议是在 ListBox 标记中添加以下内容：

```
<ListBox....>
    <ListBox.Resources>
            <Style TargetType="ListBoxItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <Border Name="Border" Padding="2" SnapsToDevicePixels="true">
                                <ContentPresenter />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="true">
                                    <Setter TargetName="Border" Property="Background"
                                            Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
        </Style>
    </ListBox.Resources>
</ListBox> 
```

这将在列表框项被选中时设置突出显示背景颜色（无论控件状态如何）。

我的答案基于已经给出的答案的帮助以及以下博客：http: [//blogs.vbcity.com/xtab/archive/2009/06/29/9344.aspx](http://blogs.vbcity.com/xtab/archive/2009/06/29/9344.aspx)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-03-30T10:28:12.350

您必须覆盖 SystemColors 的某些属性。看看[SystemColors Class (MSDN)](https://msdn.microsoft.com/en-us/library/system.windows.systemcolors%28v=vs.110%29.aspx)。还有比 InactiveSelectionHighlightBrushKey 更多的属性，例如影响文本颜色的 InactiveSelectionHighlightTextBrushKey。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="White"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="Yellow"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="Blue"/>
        <Style TargetType="ListViewItem">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Padding" Value="25,5" />
        </Style>
    </Window.Resources>
    <StackPanel Orientation="Horizontal">
        <ListView>
            <ListViewItem Content="Item" />
            <ListViewItem Content="Item" />
        </ListView>
        <ListView>
            <ListViewItem Content="Item" />
            <ListViewItem Content="Item" />
        </ListView>
    </StackPanel>
</Window> 
```

![在此处输入图像描述](https://i.stack.imgur.com/JVvlR.jpg)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-16T09:01:35.410

在较旧的 .NET 框架中，覆盖系统颜色不起作用。适用于 .NET Framework 4.0 的解决方案在[这里](https://blog.jsinh.in/change-background-color-of-selected-listboxitem-listbox-in-wpf/#.WHyJc_nhDcs)。

```
<ListView>
<ListView.Resources>
<Style TargetType="{x:Type ListViewItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListViewItem}">
                <Border x:Name="Bd"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Background="{TemplateBinding Background}"
                        Padding="{TemplateBinding Padding}"
                        SnapsToDevicePixels="true">
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                </Border>
                <ControlTemplate.Triggers>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="Selector.IsSelectionActive"
                                        Value="False" />
                            <Condition Property="IsSelected"
                                        Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Background"
                                TargetName="Bd"
                                Value="DarkOrange" />
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="Selector.IsSelectionActive"
                                        Value="True" />
                            <Condition Property="IsSelected"
                                        Value="True" />
                        </MultiTrigger.Conditions>
                        <Setter Property="Background"
                                TargetName="Bd"
                                Value="OrangeRed" />
                    </MultiTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

适用于 ListBox 和 ListView。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-10T19:34:11.823

基于[this other answer](https://stackoverflow.com/a/14912591/3195477)我使用以下内容使活动和非活动颜色相同，而无需对实际值进行硬编码：

```
<ListBox.Resources>
    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" 
                     Color="{x:Static SystemColors.HighlightColor}"/>
    <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}"
                     Color="{x:Static SystemColors.HighlightTextColor}"/>
</ListBox.Resources> 
```

为活动和非活动设置相同的颜色可能并不*理想*，但默认颜色非常暗淡，很难分辨在非活动时选择了哪个项目；这是一个明确的改进。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-06T18:06:26.613

对我来说，这成功了：

```
 <ListBox HorizontalContentAlignment="Stretch">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Label  Margin="-5, -2,-5,-2" Content="{Binding Item}">
                            <Label.Style>
                                <Style TargetType="Label">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBox}},Path=IsFocused}" Value="False"/>
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="True"/>
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="Background" Value="CornflowerBlue"/>
                                        </MultiDataTrigger>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="True">
                                            <Setter Property="Foreground" Value="White"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="False">
                                            <Setter Property="Foreground" Value="Black"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Label.Style>
                        </Label>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

# .net - 当我的主要方法在 Windows 服务中运行时，我是否应该让计时器进入睡眠状态

> ID：382009
> 
> 赞同：-1
> 
> 时间：2008-12-19T19:46:09.723
> 
> 标签：.net, windows-services, timer

在我的 .net windows 服务中，当我的计时器过去并且我的主要方法被调用时，将计时器置于睡眠模式是最佳做法吗？

这是为了以防我的 main 方法运行时间过长，并且在之前的调用 main 方法完成执行之前计时器已经过去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T20:05:15.553

它并不是真正的“主要方法”，但我想您只是指由于经过的事件而被调用的方法。这取决于。您需要它在每个间隔运行还是只需要在每个间隔启动进程，如果它已经在运行，不要做任何事情。

如果是后者，正如我所怀疑的那样，既然你在问这个，那么可以继续并停止你的计时器作为经过事件处理程序中的第一条语句。当您完成“主要方法”中的所有其他内容后，再次启动计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T19:04:02.197

除了 BobbyShaftoe 提到的内容之外，我想建议使用 try/catch/finally 块并将重新启动计时器的代码放在 finally 块中。因此，如果发生异常，您的计时器仍将重新启动并稍后运行。除非您希望它无限期地停止。

# web - 如何通知搜索引擎我的网站已关闭一段时间？

> ID：382045
> 
> 赞同：2
> 
> 时间：2008-12-19T19:56:36.957
> 
> 标签：web, search-engine

我的网站将在接下来的几天内关闭。有没有办法让搜索引擎知道这一点，并且不对网站的声誉和页面排名采取任何措施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T20:00:54.280

我认为您应该返回 503 状态（服务暂时不可用）。这告诉机器人存在临时情况。

当然，这假设关闭，您的意思是域可用但内容不可用。另一方面，如果您没有域可用性，我不确定正确的操作过程是什么。

# use-case - 谁负责编写用例？

> ID：382049
> 
> 赞同：3
> 
> 时间：2008-12-19T19:59:21.977
> 
> 标签：use-case

谁负责编写用例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-19T20:06:00.853

某人谁

1.  沟通清楚。

2.  了解商业价值。这意味着商业知识或良好的面试技巧。

3.  可以了解参与者是谁，以及与系统的哪些交互将创造该业务价值。这意味着一些技术愿景，以了解交互如何创造价值。不是每个人都有能力实现这一愿景。有些人重复过去的方式。其他人写假设的（“如果......会很好”）陈述。有明确*和*有远见的中间立场。

职位和组织无关紧要。重要的是清晰、理解和阐明愿景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T18:48:36.190

虽然拥有用例的业务分析师（因为他们正在定义需要测试的需求）应该是共同的责任，业务提供输入，测试提供质量审查，因为他们需要消耗可交付成果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T20:05:50.107

负责执行业务分析的人员。所以当时戴上业务分析师帽子的人。这可能是项目经理、专门的业务分析师或首席开发人员，这取决于团队......

# objective-c - 使用 @synthesize 覆盖 Objective-C 中的属性访问器名称

> ID：382051
> 
> 赞同：4
> 
> 时间：2008-12-19T19:59:37.700
> 
> 标签：objective-c

我正在尝试查找有关如何使用 @synthesize 覆盖 Objective-C 中的属性名称的文档。如果我有一个名为“foo”的实例变量，我想将它的访问器写为“bar”。

做一些事情，比如

```
@synthesize foo = bar; 
```

给出编译时错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-19T22:48:42.993

我认为您只是在@synthesize 中将其倒退。你想要的是：

```
@synthesize bar = foo; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-19T20:13:00.980

您可以在声明属性时更改 getter 名称 (getter=bar)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-19T20:09:49.473

您可以，但“bar”必须首先存在（作为声明的变量）。从[文档](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/chapter_5_section_3.html)

> 您可以使用 property=ivar 的形式来指示应该为属性使用特定的实例变量，例如：

```
@synthesize firstName, lastName, age = yearsOld; 
```

# asp.net - AJAX Asp.net AutoCompleteExtender 将字符串 0010 解释为八进制

> ID：382063
> 
> 赞同：2
> 
> 时间：2008-12-19T20:03:44.027
> 
> 标签：asp.net, ajax, autocomplete, hex, octal

我在文本框上使用 MS AJAX AutoCompleteExtender。它工作正常，除非 Web 服务返回像“0010”这样的字符串——在这种情况下，它显示“8”。

我最终意识到它将字符串“0010”解释为八进制数（然后通过添加诸如“0100”和“0x10”之类的字符串来证明这一点。）

我怎样才能防止这种情况？如果 Web 服务返回“0010”，我希望自动完成扩展器也显示“0010”，而不是将其解释为八进制并显示等效的十进制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T20:24:56.230

单引号吧。JavaScript 使它成为一个 int。

# web-services - 实现动态数据导入器工具的良好设计模式是什么？

> ID：382100
> 
> 赞同：5
> 
> 时间：2008-12-19T20:16:41.393
> 
> 标签：web-services, design-patterns, etl, data-importer

我们正计划构建一个动态数据导入工具。基本上以指定格式（access、excel、csv）在一端获取信息并将其上传到网络服务中。

**情况是我们不知道导出字段名称，因此应用程序需要能够看到 wsdl 定义并映射到另一端的有效条目。**

在导入部分，我们可以定义大部分字段，但通常它们有一些是自定义的。我认为这没有问题。

我只是想知道是否有适合这种类型的应用程序或有助于开发它的设计模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-03T13:33:03.543

我不确定您的应用程序的复杂性在哪里，所以我将举例说明我如何使用模式来导入不同格式的数据。我创建了一个工厂，它将文件格式作为参数并返回特定文件格式的解析器。然后我使用构建器模式。解析器提供了一个构建器，解析器在解析文件以在应用程序中构造所需的数据对象时调用该构建器。

```
// In this example file format describes a house (complex data object)
AbstractReader reader = factory.createReader("name of file format");
AbstractBuilder builder = new HouseBuilder(list_of_houses);
reader.import(text_stream, builder);

// now the list_of_houses should contain an extra house
// as defined in the text_stream 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-19T20:25:49.443

我会说适配器模式，因为您正在将数据从文件“调整”到对象，就像 SqlDataDataAdapter 从 Sql 表到 DataTable 一样

每种文件类型/格式都有不同的适配器？例如 SqlDataAdptor、MySqlDataAdapter，它们处理相同的命令但不同的数据源，以实现相同的输出 DataTable

[适配器模式](https://www.dofactory.com/net/adapter-design-pattern)

高温高压

骨头

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T20:18:36.367

可能 Bridge 可能适合，因为您必须处理不同的文件格式。和 Façade 以简化使用。小心处理我的回复，我只是在学习设计模式:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T20:25:07.697

您可能还需要抽象工厂和命令模式。

如果数据与输入格式不匹配，您可能需要以某种方式对其进行转换。这就是命令模式的用武之地。因为格式是动态的，所以您需要基于输入生成的命令。这就是抽象工厂有用的地方。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T20:51:58.593

我们的情况是我们需要从竞争对手文件中导入参数形状。它们的屏幕和数据字段的布局相似但又足够不同，以至于有一个转换过程。此外，我们有超过六个竞争对手，如果仅通过代码完成维护将是一场噩梦。由于他们中的大多数使用表格来存储他们的形状参数，我们编写了一个通用的对象集合来将 X 转换为 Y。

在我的 CAD/CAM 应用程序中，文件导入是一个命令。然而，转换魔法是由规则集通过以下步骤完成的。

1.  将数据导入表中。字段名称也会根据格式被拉入。
2.  我们将表传递给 RuleSet。我将在一分钟内解释规则集的结构。
3.  规则集将数据转换为我们检索的一组新对象（或表）
4.  我们将结果传递给软件的其余部分。

RuleSet 由一组规则组成。一个规则可以包含另一个规则。规则有一个它测试的条件和一个映射表。

MAP TABLE 将传入字段与结果中的字段（或属性）进行映射。可以有一个映射或多个映射。映射不必只涉及将输入值插入输出字段。我们也有用于计算和字符串连接的语法。

此语法也用于 Condition 并且可以合并多个文件，例如 ([INFIELD1] & "-" & [INFIELD2])="AB" 或 [DIM1] + [DIM2] > 10。括号之间的任何内容都替换为传入字段。

规则可以包含其他规则。它的工作方式是，为了使子规则映射同时应用它的条件和它的父（或父）的条件，必须为真。如果 subRule 的映射与父映射冲突，则应用 subRule 映射。

如果同一级别的两条规则的条件为真并且映射冲突，则具有较高索引的规则（或者如果您正在查看树视图，则在列表中较低）将应用其映射。

嵌套规则等效于 AND，而同一级别的规则等效于 OR。

结果是一个映射表，该表应用于传入数据以将其转换为所需的输出。

在 UI 中显示是友好的。即显示规则层次结构的树视图和显示规则的映射表和条件的侧面板。同样重要的是，您可以创建自动化常见规则结构的向导。

# php - 您更喜欢运行还是包含在一个 php 文件中？

> ID：382101
> 
> 赞同：0
> 
> 时间：2008-12-19T20:18:20.550
> 
> 标签：php, function, include

你如何管理你的php代码？您更喜欢在一个 php 文件中运行还是包含更大的“原始代码”块？

编辑：事实上，我的代码非常讨厌，因为我不使用任何命名空间和类——只使用函数和包括在内。我会查课的^^。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T20:29:11.340

根据需要使用它们。我将 include 用于处理大代码块，并将函数用于“实用程序”功能。我使用的 Sometines 也包含在函数中......这真的取决于你喜欢你的代码的干净程度。

认为许多包含意味着来自 PHP 模块的更多 fopen()，而这些可能会减慢整个脚本的执行速度。所以不要尝试放置太多包含。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T20:21:47.843

如果您使用的是 php 类，这将自行解决。如果你不是，那么很难给出一个可以接受的答案，除非你应该学会这样做。我见过的所有没有类的php代码似乎都很快变得混乱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-19T20:27:38.800

我同意 OOP 是要走的路。大型实体代码块是维护的噩梦。绝对不是要走的路。您应该将您的代码拆分成小块，这些小块相互交互并且易于自行维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-19T20:20:54.833

当我以前用 PHP 编程时，我喜欢将通用实用程序函数分组到一个通用文件中以包含在大多数页面中，并将类分组到专用文件中，以便仅在需要时加载它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T20:32:12.097

我通常将函数/类用于逻辑并包含用于显示。我最终在控制器中得到了这样的东西......

```
case 'widgetlist':
  $widgets = $DAO->getWidgets();   //get some query
  include('view/showWidgets.php'); //assume a global $widgets variable
  break; 
```

我发现为 HTML/CSS 设计器提供包含而不是显示的函数调用更容易。不利的一面是我依靠全局变量将变量传递给包含而不是更安全的参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-20T00:07:42.677

我在单独的文件中创建类，并使用正确的前缀作为命名空间（至少包含它们）。我还将函数作为静态方法放在“静态类”中以实现命名空间效果。

我使用自动加载来包含文件，所以我不必编写一百个包含。将 My_Example_Class 保存为 {lib}/My/Example/Class.php

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-20T00:20:43.400

我正在处理的事情在每一页的顶部都有一个包含文件，其中包含所有全局函数和数据库设置内容。它按原样工作，但我现在将这些函数移动到单独的文件中，因为所有内容都集中在一个大块中，进行任何测试都是完全不切实际的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-05T01:01:00.720

PHP 有一个 __autoLoad() 魔术函数，可以用来拦截类调用。如果该类尚不存在，您可以设置一些简单的代码来查找要包含的正确类代码。然后它将继续正常执行。

# .net - 您什么时候会使用 In-Proc WCF 组件？

> ID：382107
> 
> 赞同：1
> 
> 时间：2008-12-19T20:20:20.110
> 
> 标签：.net, wcf, components, decoupling, servicemodelex

我正在研究 Juval Lowy 的优秀 Programming WCF Services，我刚刚使用他的 InProcFactory 类和他的 ServiceModelEx 库创建了一个非常简单的进程内组件。

你为什么要这样做而不是在你的项目中只使用常规类？使用他的方法需要引用他的库并创建一个接口。

我能想到几个优点：

*   如果您始终如一地这样做，您将大大减少耦合。
*   一旦您编写了进程内组件，它们就可以在进程外或远程使用而无需更改。

这样做有更多优势吗？

您是否使用进程内 WCF 组件编写代码？

所有类都应该是组件吗？

你能完全脱离整个脱钩吗？

将所有类组件化的缺点是否大于优点？反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T20:26:59.033

WCF 还提供了一些额外的日志记录和跟踪，它们可能会派上用场。我认为将服务重新配置为远程（用于可扩展性或其他）的能力可能是使用它的更大原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-25T02:03:04.307

如果您订阅了 IDesign 时事通讯，您就会知道 Juval 已经使用 EVERY CLASS 作为 WCF 服务进行了一些性能基准测试。他说性能对于正常的业务应用程序来说是可以接受的。话虽如此，我认为在学习曲线方面存在相当大的开销（即，如果我们都是 WCF 大师，那将不是问题）在做这样的事情时。你也想做perf。测试您的个人场景。

因此，我认为 WCF 是他在书中提到的实现 AOP 的方法之一，但是正如我已经说过的那样，实际上 WCF 的学习曲线很高。

# sql - 如何编写 SQL 约束以使数字落在某个范围内？

> ID：382108
> 
> 赞同：12
> 
> 时间：2008-12-19T20:20:25.647
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server，我如何对表中的字段编写约束脚本，以使可接受的值范围在 0 到 100 之间？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-12-19T20:23:18.247

```
ALTER TABLE Table
ADD CONSTRAINT CK_Table_Column_Range CHECK (
   Column >= 0 AND Column <= 100 --Inclusive
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T20:25:22.297

像“fieldname BETWEEN 0 AND 100”这样的检查约束应该可以做到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T20:25:52.750

尝试：

```
ALTER TABLE myTableName
ADD CONSTRAINT myTableName_myColumnName_valZeroToOneHundred
CHECK (myColumnName BETWEEN 0 AND 100) 
```

此检查将是包容性的 - 这是来自 MSDN 的有关 BETWEEN 的一些信息： [BETWEEN (Transact SQL)](http://msdn.microsoft.com/en-us/library/ms187922(SQL.90).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-19T23:17:46.130

在我看来，正确的问题不是“如何”而是“为什么”。

这个 0-100 规则对我来说听起来像是一个商业规则。为什么要在服务器/数据库端实现？如果输入了不正确的值，谁会收到错误消息？

如果用户收到错误消息，在事务到达服务器之前让代码给他消息不是更容易吗？

范围修改呢？规则可以改变吗？我想是的：规则总是会改变。范围可以从0-100更新到101-200吗？在这种情况下，数据库中已经输入的值呢？

# forms - 浏览器插件/扩展和浏览器表单数据

> ID：382110
> 
> 赞同：1
> 
> 时间：2008-12-19T20:21:15.690
> 
> 标签：forms, parameters, add-on

有人可以向我指出一篇文章（或在此处讨论），该文章解释了插件/扩展如何读取用户在浏览器中的表单中完成的内容，以便您可以根据搜索参数向他们展示数据？

一个例子是 Sidestep 扩展，当用户在航空公司/旅游网站上搜索时打开一个侧边栏，并根据原始航空公司/旅游网站上使用的参数向他们呈现一个 Sidestep 元搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T20:25:48.693

延伸到什么？你的身体？：）

如果您在谈论浏览器扩展程序，那么我很确定您走错路了。您可以只在当前页面中搜索表单，然后根据字段名称尝试找出用户搜索的内容...一个 js 文件和一个 AJAX 调用就是您所需要的，您基本上可以跳过ajax 调用也...但我通常更喜欢服务器端处理，因为源代码以这种方式更加隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-19T21:06:46.113

浏览器扩展必须是特定于浏览器的。我会查看您的目标浏览器的 API。这是关于[Firefox 3.0 扩展](https://stackoverflow.com/questions/264932/how-to-create-firefox3-sidebar)的主题。

# java - 在 Java 中生成 CPU 负载

> ID：382113
> 
> 赞同：14
> 
> 时间：2008-12-19T20:21:57.220
> 
> 标签：java, encryption, load, cpu

我正在进行一些吞吐量测试。我的申请必须

1.  从 JMS 读取
2.  做一些处理
3.  写入 JMS

我的目标是模拟#2，“一些处理”。也就是说，在转发事件之前引入延迟并占用 CPU 一段给定的时间（例如 500 毫秒）。

天真的方法是`Thread.sleep(500)`. 这将在执行中引入正确的延迟，但不会使用 CPU。

计算斐波那契数是一种选择。 **有没有人使用任何有趣的技术来让 CPU 在给定时间内保持忙碌？**

理想的特征是：

*   执行各种指令，而不是（例如）只是循环旋转
*   HotSpot VM 不会优化到零
*   有一种简单的方法可以向上或向下调整处理周期（完成时间会因硬件而明显不同）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-19T21:09:17.437

你可以尝试一些简单的事情，比如

```
private static void spin(int milliseconds) {
    long sleepTime = milliseconds*1000000L; // convert to nanoseconds
    long startTime = System.nanoTime();
    while ((System.nanoTime() - startTime) < sleepTime) {}
} 
```

测试：

```
public static void main(String[] args) {
    final int NUM_TESTS = 1000;
    long start = System.nanoTime();
    for (int i = 0; i < NUM_TESTS; i++) {
        spin(500);
    }
    System.out.println("Took " + (System.nanoTime()-start)/1000000 +
        "ms (expected " + (NUM_TESTS*500) + ")");
} 
```

我的输出：

```
$ java SpinTest
Took 500023ms (expected 500000) 
```

所以循环没有得到优化（是的，我将我的 CPU 提高到 100% 八分钟只是为了测试这个:)）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-19T20:38:25.097

通过调用 Cipher.update() 加密字符串（在循环中）。根据定义，加密算法很难优化。唯一的问题是您需要执行一些重要的设置。我将此答案标记为社区 wiki，以便最近编写它的人可以填写它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-19T20:44:52.977

创建一个非常大的随机对象集合，然后交替调用`Collections.shuffle()`和`Collections.sort()`。

我使用 Jakarta Commons Lang 生成随机字符串以进行洗牌/排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T21:33:02.880

创建一个矩阵并进行一些矩阵操作。

您可以通过改变矩阵的大小来轻松调整它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-25T11:49:37.290

您可以使用的另一种东西，也许是：

```
 long start  = System.currentTimeMillis();
        long count = 0l;
        for(long x=0;x<Integer.MAX_VALUE ;x++){
            count+=1;
        }
        long end = System.currentTimeMillis();
        System.out.println(end-start +" ms"); 
```

# java - javafx 和 javadoc

> ID：382114
> 
> 赞同：3
> 
> 时间：2008-12-19T20:22:10.730
> 
> 标签：java, javadoc, javafx

我通常对 JavaFX 不以为然，但至少他们的[API 文档比 javadoc 有了很大的改进](http://java.sun.com/javafx/1/docs/api/)，javadoc 十年来没有任何实质性的改进。是否可以使用 JavaFX 技术为常规 Java 文件生成[更具吸引力的 javadoc ？](http://java.sun.com/javafx/1/docs/api/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T20:30:09.853

有许多替代的 javadoc doclet，[这里](http://doclet.com/)有一些（有点过时，但有很多有趣的想法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-22T18:11:40.993

我主要用

[Docjar](http://www.docjar.com/)

它允许显示每个方法或整个类/接口的源代码。

# sql-server - 有人可以解释 DBCC DROPCLEANBUFFERS 吗？

> ID：382122
> 
> 赞同：18
> 
> 时间：2008-12-19T20:25:05.810
> 
> 标签：sql-server, sql-server-2005, tsql

有人可以`DBCC DROPCLEANBUFFERS`与操作员一起解释使用`CHECKPOINT`并提供示例吗？

我知道在您的查询之前测试运行的性能很有用，但我没有完全掌握它。我也不知道与 CHECKPOINT 运算符结合使用。

如果我在查询之前执行它，它们需要更长的时间才能运行，所以我猜*比较*性能是好的，但不能准确地评估它们。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-19T20:35:36.723

[CHECKPOINT](http://msdn.microsoft.com/en-us/library/ms188748.aspx)将修改后的数据页刷新到磁盘：

> [CHECKPOINT] 将当前数据库的所有脏页写入磁盘。脏页是已进入缓冲区高速缓存并被修改但尚未写入磁盘的数据页。检查点通过创建保证所有脏页都已写入磁盘的点来节省稍后恢复期间的时间。

[DBCC DROPCLEANBUFFERS](http://msdn.microsoft.com/en-us/library/ms187762.aspx)然后删除所有非脏（iow，clean）页面：

> 使用 DBCC DROPCLEANBUFFERS 使用冷缓冲区缓存测试查询，而无需关闭并重新启动服务器。
> 
> 要从缓冲池中删除干净的缓冲区，首先使用 CHECKPOINT 生成冷缓冲区高速缓存。这会强制将当前数据库的所有脏页写入磁盘并清理缓冲区。完成此操作后，您可以发出 DBCC DROPCLEANBUFFERS 命令从缓冲池中删除所有缓冲区。

最终结果是您从没有缓存任何内容开始。

# asp.net-mvc - 如何将一些参数传递给不在 ViewData 中的 MVC 用户控件

> ID：382150
> 
> 赞同：5
> 
> 时间：2008-12-19T20:34:55.320
> 
> 标签：asp.net-mvc

我想将一些参数传递给我的 MVC UserControl，例如 ShowTitle(bool) 和 ViewData.Model.Row 。我如何定义我的用户控件并将它们传递给它？坦克斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T21:32:13.270

您可以使用 RenderAction HtmlHelper，它位于[codeplex](http://www.codeplex.com/aspnet)的 MVC 期货 dll 中。在您的主页...

您需要一个带有参数的控制器上的操作方法。然后该操作为用户控件创建一个 ViewData。用户控件作为视图返回

```
return View("usercontrolname", model); 
```

.ascx 文件然后将模型仅用于用户控件。生成的 HTML 将呈现到调用页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T21:07:30.793

您可以将控件定义为

```
public partial class MyUserControl : System.Web.Mvc.ViewUserControl<MyUserControlViewData> {
}

public class MyUserControlViewData {
    public IList<MyData> MyData { get; set; }
    public string SomethingElse { get; set; }
} 
```

之后，您可以在控制器中创建 MyUserControlViewData 类的实例，填充数据并将其传递给视图。那是你要找的吗？

# windows - 控制 Delphi 2006 中新打开窗口的位置 (x,y)

> ID：382152
> 
> 赞同：2
> 
> 时间：2008-12-19T20:35:45.630
> 
> 标签：windows, delphi

我试图控制我的程序打开一个新窗口的坐标，因为目前它们正在彼此之上打开。有没有人有一个如何做到这一点的工作示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T20:47:12.613

您始终可以手动设置 .Top 和 .Left 属性，如下所示：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  frm : TForm;
begin
  frm := TForm.Create(Self);
  frm.Left := 100;  //replace with some integer variable
  frm.Top := 100;  //replace with some integer variable
  frm.Show;
end; 
```

但是，Windows 有一个默认的窗口放置算法，它试图保持每个窗口的标题栏可见。在我的电脑上，重复点击这个 Button1 程序会得到很好的堆叠窗口：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  frm : TForm;
begin
  frm := TForm.Create(Self);
  frm.Show;
end; 
```

另外，不要忘记您可以使用内置的 TPosition 位置集：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  frm : TForm;
begin
  frm := TForm.Create(Self);
  frm.Position := poOwnerFormCenter;
  {
  Other possible values:
    TPosition = (poDesigned, poDefault, poDefaultPosOnly, poDefaultSizeOnly,
      poScreenCenter, poDesktopCenter, poMainFormCenter, poOwnerFormCenter);

  //}
  frm.Show;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-19T21:39:08.903

此类功能已在[关于 SO 的另一个问题中](https://stackoverflow.com/questions/140993/grab-and-move-application-windows-from-a-net-app)针对 C# 进行了解释。

此外，对于 Delphi，请查看在 Delphi 中[了解和使用 Windows 回调函数](http://delphi.about.com/od/windowsshellapi/a/callback_delphi.htm)，其中描述了获取当前打开的窗口的句柄。并参见[从 Delphi 代码中摇动一个窗口（窗体），](http://delphi.about.com/od/adptips2005/qt/windowshake.htm)它描述了如何在获得窗口句柄后移动窗口。

# vim - 如何在 Vim 中使用替换重复命令？

> ID：382155
> 
> 赞同：29
> 
> 时间：2008-12-19T20:37:29.933
> 
> 标签：vim, history, repeat, substitution

在 Unix 中，`^`允许您用一些文本替换新文本来重复命令。例如：

```
csh% grep "stuff" file1 >> Results
grep "stuff" file1
csh% ^file1^file2^
grep "stuff" file2
csh% 
```

有 Vim 等价物吗？很多时候，我发现自己在命令行上一遍又一遍地编辑小东西。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-07-18T13:48:08.670

专门用于替换：**用于`&`**从正常模式**重复当前行上的最后替换。**

要对所有行重复，请键入`:%&`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-19T21:12:53.107

`q:`进入命令行窗口 ( `:help cmdwin`)。

您可以在此窗口中编辑和重复使用以前输入的 ex-style 命令。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-19T21:27:06.167

一旦你点击`:`，你可以输入几个字符和向上箭头，它会匹配你输入的字符。例如键入`:set`，它会爬回你的“集合”。这也适用于搜索 - 只需键入`/`和向上箭头。向上箭头会按时间顺序`/abc`为您提供匹配的搜索字符串。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-12-19T21:04:01.237

有2种方式。

1.  您只需按一下`.`键即可精确重播最后一个命令（移动除外）。例如，我键入`c``w`then`hello`以将单词更改为“hello”。将光标移动到另一个单词后，我`.`再次点击。
2.  对于更高级的命令，如替换，在您执行替换后，只需按一下`:`键，然后`↑</kbd> up arrow key, and it fills your command line with the same command.`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-04-11T21:43:07.990

要在所有具有相同标志的行上重复前面的替换，您可以使用映射`g&`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-12T06:28:00.247

如果您已在普通模式（当前行）或可视模式*（*当前选择中包含的行）下进行了替换，并且您想重复最后一次替换，您可以：`:s/A/B/g``:'<,>'s/A/B/g`

*   移动到另一行（正常模式）并简单地按`&`，或者如果你喜欢，`:`- `&`- `<CR>`（看起来像`:&`），以影响当前行而不突出显示，或者

*   突出显示范围（可视模式）并按`:`- `&`- `<CR>`（看起来像`:'<,'>&`）以影响选择中的线条范围。

以我对 Vim 的有限了解，这解决了几个问题。一方面，最后一个视觉替换`:'<,'>s/A/B/g`可作为正常模式和视觉模式下的最后一个命令 ( `:`- `<UP>`) 使用，但在正常模式下总是会产生错误。（它仍然指的是视觉模式的最后一个选择——而不是我假设的光标处的空选择——我的示例替换在一次遍历中耗尽了所有匹配项。）同时，最后一个正常模式替换以`:s`, not开头`:'<,'>s`，所以你需要修改它以在可视模式下使用。最后，`&`可以直接从正常模式使用，因此它接受重复和其他选择的替代方案，如`2&`接下来的两行，正如用户 ruohola 所说，`g&`对于整个文件。

在这两个版本中，按`:`then`&`就像您已按`:`然后重新键入一样工作`s/A/B/`，因此您上次所处的模式无关紧要，只有当前光标行或选择确定要受影响的行。（请注意，像这样的尾随标志也`g`被清除，但在此语法中也将出现在`:&g`/中`: '<,'>&g`。在我看来，这是喜忧参半，因为您可以/必须在此处重新指定标志，而独立`&`似乎没有拿旗子。我一定是错过了什么。）

欢迎提出建议和指正。其中大部分来自刚刚的实验，所以我相信它还有很多，但希望它无论如何都会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T21:17:53.003

看看这个： http: [//vim.wikia.com/wiki/Using_command-line_history](http://vim.wikia.com/wiki/Using_command-line_history)进行解释。

# c++ - 智能指针+“this”被认为是有害的？

> ID：382166
> 
> 赞同：11
> 
> 时间：2008-12-19T20:45:25.643
> 
> 标签：c++, pointers, this, smart-pointers, shared-ptr

在使用智能指针的 C++ 项目中，例如`boost::shared_ptr`，关于使用“ **`this`**”的良好设计理念是什么？

考虑一下：

*   存储包含在任何智能指针中以供以后使用的原始指针是很危险的。您已经放弃了对对象删除的控制，并相信智能指针会在正确的时间执行此操作。

*   非静态类成员本质上使用**`this`**指针。这是一个原始指针，无法更改。

如果我曾经存储`this`在另一个变量中或将其传递给另一个函数，该函数可能会存储它以供以后使用，或者将其绑定到回调中，那么当任何人决定创建指向我的类的共享指针时，我就会创建错误。

**鉴于此，我什么时候适合显式使用`this`指针？** 是否有可以防止与此相关的错误的设计范例？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-10-26T03:13:40.407

# 错误的问题

> 在使用智能指针的 C++ 项目中

这个问题实际上与智能指针无关。这只是关于所有权。

## 智能指针只是工具

他们没有改变所有权的概念，尤其是。**需要在您的程序中明确定义所有权**，所有权可以自愿转让，但不能由客户获取。

您必须了解智能指针（也包括锁和其他 RAII 对象）同时表示一个值和 WRT 此值的关系。A`shared_ptr`是一个对象的引用，建立关系：对象不能在 this 之前被销毁`shared_ptr`，当 this`shared_ptr`被销毁时，如果是最后一个给这个对象起别名，则必须立即销毁该对象。（`unique_ptr`可以被视为一种特殊情况，`shared_ptr`根据定义，别名为零，因此`unique_ptr`始终是对象的最后一个别名。）

## 为什么应该使用智能指针

建议使用智能指针，因为它们仅使用变量和函数声明来表达很多内容。

智能指针只能表达定义良好的设计，它们不会消除定义所有权的需要。相反，垃圾收集消除了定义谁负责内存释放的需要。（但不要取消定义谁负责其他资源清理的需要。）

即使在非纯函数式垃圾收集语言中，您也需要明确所有权：如果其他组件仍需要旧值，您不希望覆盖对象的值。在 Java 中尤其如此，其中可变数据结构的所有权概念在线程程序中极为重要。

## 原始指针呢？

使用原始指针并不意味着没有所有权。它只是没有通过变量声明来描述。它可以在注释、您的设计文档等中进行描述。

这就是为什么许多 C++ 程序员认为使用原始指针而不是适当的智能指针是**劣等**的：因为它的表达能力较差（我故意避免使用“好”和“坏”这两个术语）。我相信使用一些 C++ 对象来表达关系，Linux 内核会更具可读性。

您可以使用或不使用智能指针来实现特定设计。适当使用智能指针的实现将被许多 C++ 程序员认为是优越的。

# 你真正的问题

> 在 C++ 项目中，关于使用“this”的良好设计理念是什么？

这是非常模糊的。

> 存储原始指针以供以后使用是很危险的。

为什么你需要一个指针供以后使用？

> 您已经放弃了对对象删除的控制，并相信负责的组件会在正确的时间执行此操作。

实际上，某些组件负责变量的生命周期。你不能承担责任：它必须被转移。

> 如果我曾经将它存储在另一个变量中或将其传递给另一个可能存储它以供以后使用的函数或将其绑定到回调中，我正在创建当任何人决定使用我的类时引入的错误。

显然，由于调用者没有被告知该函数将隐藏一个指针并在以后不受调用者控制的情况下使用它，因此您正在创建错误。

解决方案显然是：

*   将处理对象生命周期的责任转移给函数
*   确保指针仅在调用者的控制下保存和使用

只有在第一种情况下，您最终可能会在类实现中使用智能指针。

## 你问题的根源

我认为您的问题是您正在努力使用智能指针使事情复杂化。智能指针是使事情变得更容易而不是更难的工具。如果智能指针使您的规范复杂化，那么请从更简单的角度重新考虑您的规范。

**在遇到问题之前，不要尝试引入智能指针作为解决方案。**

只引入智能指针来解决特定的定义明确的问题。因为你没有描述一个明确定义的具体问题，**所以不可能讨论一个具体的解决方案**（涉及或不涉及智能指针）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-19T20:55:25.763

虽然我没有一般的答案或一些成语，但有[`boost::enable_shared_from_this`](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/enable_shared_from_this.html). 它允许您获得一个管理已由 shared_ptr 管理的对象的 shared_ptr。由于在成员函数中您没有引用管理 shared_ptr 的那些，因此 enable_shared_ptr 确实允许您获取 shared_ptr 实例并在需要传递 this 指针时传递它。

但这并不能解决`this`从构造函数中传递的问题，因为那时还没有 shared_ptr 正在管理您的对象。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-19T21:22:40.153

一个正确使用的例子是`return *this;`在像 operator++() 和 operator<<() 这样的函数中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-19T22:20:26.263

当您使用智能指针类时，您是对的，直接暴露“ `this`”是危险的。有一些与之相关的指针类`boost::shared_ptr<T>`可能有用：

*   [`boost::enable_shared_from_this<T>`](http://www.boost.org/libs/smart_ptr/enable_shared_from_this.html)
    *   提供让对象返回指向自身的共享指针的能力，该共享指针使用与指向对象的现有共享指针相同的引用计数数据
*   [`boost::weak_ptr<T>`](http://www.boost.org/libs/smart_ptr/weak_ptr.htm)
    *   与共享指针一起工作，但不持有对对象的引用。如果所有共享指针都消失并且对象被释放，弱指针将能够告诉您该对象不再存在，并将返回您`NULL`而不是指向无效内存的指针。您可以使用弱指针来获取指向有效引用计数对象的共享指针。

当然，这些都不是万无一失的，但它们至少可以使您的代码更加稳定和安全，同时为您的对象提供适当的访问和引用计数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T20:56:39.503

如果您需要使用`this`，只需明确使用它。智能指针仅包装它们所拥有的对象的指针 - 或者以独占方式 ( `unique_ptr`) 或以共享方式 ( `shared_ptr`)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T21:05:16.977

我个人喜欢在访问类的成员变量时使用**this指针。**例如：

```
void foo::bar ()
{
    this->some_var += 7;
} 
```

这只是一个无害的风格问题。有些人喜欢，有些人不喜欢。

但是将**this**指针用于其他任何事情都可能会导致问题。如果你真的需要用它做一些花哨的事情，你真的应该重新考虑你的设计。我曾经看到一些代码，在类的构造函数中，它将 this 指针分配给存储在其他地方的另一个指针！这太疯狂了，我想不出这样做的理由。顺便说一句，整个代码是一团糟。

你能告诉我们你到底想用指针做什么吗？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-19T09:27:37.257

另一种选择是使用侵入式智能指针，并在对象本身而不是指针中处理引用计数。这需要更多的工作，但实际上更有效且易于控制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-19T22:07:43.013

绕过这个的另一个原因是，如果您想保留所有对象的中央注册表。在构造函数中，一个对象用 this 调用注册中心的一个静态方法。它对各种发布/订阅机制很有用，或者当您不希望注册表需要了解系统中的对象/类时。

# javascript - 使用 Javascript 更改在输入键按下时激活哪个提交

> ID：382171
> 
> 赞同：23
> 
> 时间：2008-12-19T20:50:37.927
> 
> 标签：javascript, html, webforms, submit, user-input

我在 HTML 页面上有一个表单，其中包含执行不同操作的多个提交按钮。但是，当用户在文本输入中键入一个值并按 Enter 键时，浏览器通常会表现得好像下一个提交按钮按顺序被激活了一样。我想要一个特定的动作发生，所以我发现的一个解决方案是在有问题的文本输入之后直接将不可见的提交按钮放入 HTML 中，如下所示：

```
<input type="text" name="something" value="blah"/>
<input type=submit name="desired" value="Save Earth" style="display: none"/>
...
<input type=submit name="something_else" value="Destroy Earth" />
...
<input id="foobar" type=submit name="desired" value="Save Earth" /> 
```

这在大多数浏览器中就像一个魅力，除了它在 Safari 和 Chrome 等 webkit 浏览器中没有。出于某种原因，他们跳过了不可见的提交按钮。我一直在试图弄清楚如何拦截输入键并使用 Javascript 激活正确的提交，但我无法让它工作。拦截 keydown 并将焦点设置在正确的提交上不起作用。

当用户在 HTML 表单的文本输入中按下回车键时，是否有任何方法使用 Javascript 或其他方式来选择将使用哪个提交按钮？

*编辑：为了澄清，表单不能要求Javascript从根本上“工作”。我不在乎在 webkit 浏览器上没有 Javascript 时是否不希望输入键提交，但我无法删除或更改提交按钮的顺序。*

~~这是我尝试过的，它不会改变 webkit 浏览器中的提交行为。~~
有效的方法是将以下代码中的*focus()更改为**click()*。

```
document.onkeypress = processKey;

function processKey(e)
{
    if (null == e)
        e = window.event ;
    if (e.keyCode == 13)  {
        document.getElementById("foobar").click(); // previously: focus()
    }
} 
```

**编辑：最终解决方案：**

适用于所有浏览器，仅在需要时拦截回车键：

HTML：

```
<input type="text" name="something" value="blah" 
    onkeydown="return processKey(event)" />
<input type=submit name="desired" value="Save Earth" style="display: none"/>
...
<input type=submit name="something_else" value="Destroy Earth" />
...
<input id="foobar" type=submit name="desired" value="Save Earth" /> 
```

Javascript：

```
function processKey(e)
{
    if (null == e)
        e = window.event ;
    if (e.keyCode == 13)  {
        document.getElementById("foobar").click();
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-19T20:56:47.507

一种方法是删除所有提交按钮并使用输入按钮以编程方式提交表单。这将删除通过在文本框中按回车键来提交表单的能力。您还可以将一个提交按钮保留为默认提交功能，并为其他按钮使用常规按钮输入并以编程方式提交表单。

明显的缺点是用户需要启用 JavaScript。如果这不是问题，这是您需要考虑的。

**编辑：**

在这里，我尝试使用 jQuery 为您制作一个示例（无需 jQuery 也可以轻松创建相同的功能）......如果这有帮助，请告诉我......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>Untitled</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript"><!--
    $(document).ready(function(){
        $("#f input").filter(":text").keydown( function(event) {
            if (event.keyCode==13) {
                $(this).nextAll().eq(0).click();
            }
        });
    });
    //--></script>
</head>
<body>
    <form name="f" id="f">
        <input type="text" id="t1" name="t1" /><input type="button" id="b1" name="b1" value="button-one" onclick="alert('clicked enter on textbox 1');" /><br />
        <input type="text" id="t2" name="t2" /><input type="button" id="b2" name="b2" value="button-two" onclick="alert('clicked enter on textbox 2');" /><br />
        <input type="text" id="t3" name="t3" /><input type="button" id="b3" name="b3" value="button-three" onclick="alert('clicked enter on textbox 3');" /><br />
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-20T14:21:36.383

不可见的默认提交操作是一种合理的方法，不会将 JavaScript 拖入等式。然而，带有“display: none”的表单元素通常并不可靠。我倾向于在页面上的其他按钮之前使用绝对定位的提交按钮，位于页面的左侧。它仍然很丑陋，但可以完成工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-01-01T12:42:04.570

使用 CSS 怎么样？您可以只设置第一个按钮，即屏幕可见区域之外的默认按钮，设置为“位置：绝对；左侧：-200 像素；顶部：-200 像素；”。据我所知，任何浏览器都不会忽略它，因为它不是不可见的。这工作得很好：

```
<form method="get">
<input type="text" name="something" value="blah"/>
<input type=submit name="desired" value="Save Earth"
       style="position: absolute; left: -200px; top: -200px;"/>
...
<input type=submit name="something_else" value="Destroy Earth" />
...
<input id="foobar" type=submit name="desired" value="Save Earth" />
</form> 
```

地球得救了……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T21:19:45.870

只需控制按键事件。将 onKeyPress 放在 body 标签中

```
 onkeypress=CheckKeyPress() 
```

然后处理回车键

```
 function CheckKeyPress(){
    var code;
    if(!e) var e = window.event;
    if(e.keyCode){
        code = e.keyCode;
    }else if(e.which){
        code = e.which;
    }
    if(code == 13){
        //Do Something
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T21:25:43.317

不拦截`keydown`事件，拦截`submit`事件。

所以：

```
form.onsubmit = function(e){
   // Do stuff.  Change the form's action or method maybe.  
   return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T21:49:09.943

使用单独的表格怎么样？也许我错过了一些使这不可能的东西：P

# c# - 有哪些替代方法可以暂停和恢复线程？

> ID：382173
> 
> 赞同：29
> 
> 时间：2008-12-19T20:52:42.180
> 
> 标签：c#, .net-2.0, thread-safety

从 .NET 2.0 开始`Thread.Suspend()`，这两种方法都已过时。`Thread.Resume()`为什么？还有哪些其他选择和示例？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-15T19:18:55.310

您需要使用 AutoResetEvent EventWaitHandle。

假设你想做这样的事情（**注意**：不要这样做！）：

```
private Thread myThread;

private void WorkerThread() 
{
    myThread = Thread.CurrentThread;
    while (true)
    {
        myThread.Suspend();
        //Do work.
    }
}

public void StartWorking() 
{
    myThread.Resume();
} 
```

正如其他人所说，这是一个坏主意。尽管仅在其自己的线程上使用 Suspend 相对安全，但您永远无法确定您是否在线程实际挂起时调用 Resume。所以 Suspend 和 Resume 已经过时了。

相反，您想使用 AutoResetEvent：

```
private EventWaitHandle wh = new AutoResetEvent();

private void WorkerThread() 
{
    while(true) 
    {
        wh.WaitOne();
        //Do work.
    }
}

public void StartWorking()
{
    wh.Set();
} 
```

工作线程将在等待句柄上等待，直到另一个线程调用 StartWorking。它的工作原理与暂停/恢复非常相似，因为 AutoResetEvent 只允许“恢复”一个线程。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-19T20:58:38.860

好的替代方案都是通过线程达到它乐于等待的点来工作的。挂起是危险的，因为它可能会在线程持有互斥锁时挂起线程 - 这是死锁的秘诀。

因此，您的线程需要的是一个可以等待的 ManualResetEvent - 在它可以安全地这样做的时候，当它没有持有任何锁时。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-19T20:57:09.487

这是有史以来最好的 Thread 教程（用于 C#）：[http ://www.albahari.com/threading/](http://www.albahari.com/threading/)

对于等待，您需要在线程上使用 .Join() 。这将等到胎面完成工作。否则，您将需要使用[Wait/Pulse](http://www.albahari.com/threading/part4.aspx#_Wait_and_Pulse)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-15T09:01:36.730

您可以使用 ManualReset 而不是 AutoReset：

```
public class Worker
{
 ManualResetEvent _shutdownEvent = new ManualResetEvent(false);
 ManualResetEvent _pauseEvent = new ManualResetEvent(true);
 Thread _thread;

public Worker() { }

public void Start()
 {
 _thread = new Thread(DoWork);
 _thread.Start();
 Console.WriteLine("Thread started running");
 }

public void Pause()
 {
 _pauseEvent.Reset();
 Console.WriteLine("Thread paused");
 }

public void Resume()
 {
 _pauseEvent.Set();
 Console.WriteLine("Thread resuming ");
 }

public void Stop()
 {
 // Signal the shutdown event
 _shutdownEvent.Set();
 Console.WriteLine("Thread Stopped ");

// Make sure to resume any paused threads
 _pauseEvent.Set();

// Wait for the thread to exit
 _thread.Join();
 }

public void DoWork()
 {
 while (true)
 {
 _pauseEvent.WaitOne(Timeout.Infinite);

if (_shutdownEvent.WaitOne(0))
 break;

// Do the work..
 Console.WriteLine("Thread is running");

 }
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T21:12:13.263

那个太长了 我需要的是一个快速的示例代码来使用。我从讨论中找到了一个并由 Mark R. Dawson 在[http://bytes.com/groups/net-c/458947-thread-suspend](http://bytes.com/groups/net-c/458947-thread-suspend)回答。它解释了过时方法的危险以及如何使用 AutoResetEvent 通知第二个线程继续处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T20:59:23.447

我同意这是一个很棒的教程。Suspend() 和 Resume() 过时的主要原因是它们是非常危险的方法。在任何时候 Thread t 都可以做任何事情。任何事物。想象一下，您的线程正在读取一个文件并对其进行了锁定。你暂停你的线程。文件保持锁定状态。任何其他资源也是如此。互斥锁上的锁也是如此。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-25T02:15:11.767

.NET 中过时或删除的原因与`Thread.Suspend()`Java中过时和过时的原因基本相同。相比-`Thread.Resume()``Thread.suspend()``Thread.resume()`

*   Java 的[线程原语弃用常见问题解答](https://docs.oracle.com/javase/9/docs/api/java/lang/doc-files/threadPrimitiveDeprecation.html)（`suspend`“天生容易死锁”），与
*   Mark R. Dawson[对 .NET 的 Thread.Suspend()` 的回答](https://bytes.com/topic/c-sharp/answers/458947-thread-suspend)（“如果您在执行过程中停止线程，您可能会遇到死锁和竞争条件”）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-08T15:04:04.037

解决方案：只有当另一个线程自己挂起时，才让一个线程恢复另一个线程。因此，第一个线程仅在另一个线程暂停自身（即其 ThreadState = Suspended）时才恢复另一个线程，从而使自己准备好恢复。这似乎安全无瑕。

或者，我不了解 .Net 线程吗？

# java - 如何更改 Netbeans 字体和颜色预览文档？

> ID：382174
> 
> 赞同：5
> 
> 时间：2008-12-19T20:54:16.873
> 
> 标签：java, netbeans, fonts, colors, options

在 Netbeans 6.5 的工具 -> 选项 -> 字体和颜色 -> 语法对话框中，您可以更改 Netbeans 文本编辑器的外观。当您选择一种语言时，您会看到字体/配色方案的预览。但是，当我预览 Java 时，语法更改的选项比预览窗口中显示的要多得多。如果我能够查看一段更健壮的代码，我将能够看到更多选项的直接效果。

如何提供预览文档来查看我的字体/颜色更改？

更新：

在对此进行了更多研究之后，我已经能够缩小问题的范围。据我所知，Netbeans 中的所有内容都被视为插件。GUI 编辑器是一个插件，甚至文本编辑器也是一个插件。这意味着 Netbeans 中真正分析 Java 代码和语法高亮的部分也是一个插件（因为 Java 只是 Netbeans 高亮的众多语言之一，所以这是一个插件是有道理的）。

我认为 fromvega 的建议是正确的。创建清单文件编辑插件的教程为我指明了正确的方向。本教程避开了用作字体/颜色预览的示例文档的文件。它告诉你如何在这个新的插件项目中创建一个。（位于“在 NetBeans 系统文件系统中注册选项”，第 4 部分。大约在页面下方的 4/5 处。）

我的下一个想法是寻找 Java 语法编辑模式插件并找到该文件并使用更丰富的示例文件对其进行更新。我查看了安装目录，发现是空的，但我在我的用户设置目录中找到了合适的文件。在我的用户目录（Windows：C:\Documents and Settings\saterus.netbeans\config）中有一个包含很多子文件夹的 config 目录。

我一直在这个目录中四处寻找，但只找到了清单教程谈到的 xml 文件。我一直找不到我认为应该存在的 Java 插件的无扩展名示例文件。

由于我暂时碰壁了，我想我会把它扔回 SO 社区，看看你们是否可以做出最后的飞跃并找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-02-04T16:35:25.533

只是对于任何想要自己更改它的人来说，都可以在 unix 机器上使用 grep 来定位文件，即

```
grep -lr "some part of the current sample code" /path/to/netbeans 
```

我使用这种方法来定位 ruby​​ 示例文件名，并从中确定它作为名为 RubyExample 的文件保存在 org-netbeans-modules-ruby.jar 中。通过简单地更改该文件，我能够构建一个更好的示例文件供我自己使用。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-22T21:25:12.113

显示的文档（对于每种 mime 类型）在“系统文件系统”（这是一个 NetBeans 概念，它是由各个模块的贡献组成的虚拟文件系统）中的特定文件夹中指定；这就是动态注册功能的方式在 NetBeans 中）。

模块通常在插件中名为“layer.xml”的文件中指定它们的系统文件系统贡献。创建插件模板通常提供为您创建它。

例如，以下是 Python 示例的注册方式：

```
<文件系统>
    ...
    <文件夹名称="选项对话框">
        <文件夹名称="PreviewExamples">
            <文件夹名称="文本">
                <file name="x-python" url="PythonExample.py"/>
            </文件夹>
        </文件夹>
        ...

```

这里，PythonExample.py 是与图层文件在同一目录下的示例文件。

因此，您需要做的是创建一个插件来覆盖您关心的 mime 类型的现有注册并提供替代示例文档。您可能需要先隐藏现有注册（请参阅 _hidden 部分[http://doc.javanb.com/netbeans-api-javadoc-5-0-0/org-openide-filesystems/org/openide/filesystems/MultiFileSystem.html](http://doc.javanb.com/netbeans-api-javadoc-5-0-0/org-openide-filesystems/org/openide/filesystems/MultiFileSystem.html)）。

希望这会引导您朝着正确的方向前进。

然而，考虑到这一点，我们可能应该让预览区域可编辑——这样人们就可以在那里剪切和粘贴他们关心的任何代码片段。这不会是持久的，因此每当您更改语言时，您都会返回原始示例 - 但它提供了一种查看您自己的代码的快速方法。这不仅适用于字体和颜色自定义，还适用于格式预览面板。

我为此向 NetBeans 提出了问题： [http://www.netbeans.org/issues/show_bug.cgi?id=155964](http://www.netbeans.org/issues/show_bug.cgi?id=155964)

-- 托尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T21:18:39.100

我认为你只能通过一个新插件来实现这一点，因为你需要某种解析来定义什么是什么。

看看这些教程，我没有详细阅读它们，但它们似乎向你展示了如何做你想做的事：

[http://platform.netbeans.org/tutorials/nbm-mfsyntax.html](http://platform.netbeans.org/tutorials/nbm-mfsyntax.html) [http://www.antonioshome.net/kitchen/netbeans/nbms-coloring.php](http://www.antonioshome.net/kitchen/netbeans/nbms-coloring.php)

# php - Zend 框架中的数据库驱动路由教程？

> ID：382176
> 
> 赞同：4
> 
> 时间：2008-12-19T20:55:19.337
> 
> 标签：php, zend-framework, url-routing, model-view-controller, database-driven

我正在开发一个需要使用数据库驱动的 MVC 方案的项目，其中控制器和视图的路由通过单个数据库表进行控制。但是，我找不到任何教程可以用当前版本的框架演示这一点（它们似乎都是在几个版本之前编写的），我想知道是否有人用更新的版本做了类似的事情框架，或者如果有人知道讨论如何以简单方式完成此任务的博客或教程。

基本思想是会有一个 sitePage 表，其中包含 pageName、控制器、模块和视图字段。当请求被处理时，我需要在数据库中查询给定的 pageName 并确定适当的控制器、模块和视图，然后将其传递给必要的 Zend 类以继续正常路由和处理请求。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-04-05T07:52:19.077

您还可以在插件中使用 routeStartup() 方法。例如：

```
 class My_Plugin_PageRoute extends Zend_Controller_Plugin_Abstract {

     public function routeStartup ()  {
         $front = Zend_Controller_Front::getInstance();
                    $pages = new Model_Pages();
                    $page_data = $pages ->getPageInfo();

        $router = $front->getRouter();

        foreach($page_data as $page) {
            $r = new Zend_Controller_Router_Route(
                '' . $page -> page_name,
                array('controller' => 'pages',
                      'action' => 'index',
                      'page_id' => $page -> page_id)
            );
            $router->addRoute('pages_' . $page -> page_id, $r);
        }

     }

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-19T21:43:17.007

也许最好的方法不是使用路由器，而是使用插件或通用控制器。如果没有更深入的分析，我建议您创建一个前端控制器插件，然后在该`preDispatch()`方法中您可以与数据库通信并重置请求，以便将其分派到正确的控制器。

您也可以通过使用通用控制器获得相同的效果，所有请求都路由到它，然后它可以在与数据库通信后转发到正确的控制器，尽管我更喜欢使用插件。

从手册：

`preDispatch()`在调度程序调度操作之前调用。此回调允许代理或过滤器行为。通过更改请求并重置其已分派标志（通过`Zend_Controller_Request_Abstract::setDispatched(false)`），可以跳过和/或替换当前操作。

[http://framework.zend.com/manual/en/zend.controller.plugins.html](http://framework.zend.com/manual/en/zend.controller.plugins.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T21:53:05.087

我意识到更优雅的方法确实是使用路由器，但为此您需要通过扩展 Zend_Controller_Router_Abstract 类并实现“路由”方法来创建自定义的方法。

你得到一个 Zend_Controller_Request_Abstract 对象作为“路由”方法的参数。在那里您可以与数据库对话，然后您可以使用：

```
Zend_Controller_Request_Abstract::setModuleName(),
Zend_Controller_Request_Abstract::setControllerName(),
Zend_Controller_Request_Abstract::setActionName() 
```

定义你的路线。

我希望它有帮助！

# math - 将多项式拟合到数据

> ID：382186
> 
> 赞同：54
> 
> 时间：2008-12-19T20:59:00.577
> 
> 标签：math, statistics

给定一组值`(x,f(x))`，有没有办法找到最适合数据的给定度数的多项式？

我知道[多项式插值](http://en.wikipedia.org/wiki/Polynomial_interpolation)，它用于查找`n`给定`n+1`数据点的次数多项式，但是这里有大量值，我们想找到一个低次数多项式（找到最佳线性拟合、最佳二次、最佳三次等）。 ）。它可能与[最小二乘](http://en.wikipedia.org/wiki/Least_squares)有关......

更一般地说，我想知道当我们有一个多元函数时的答案——比如说`(x,y,f(x,y))`，点——并且想要`p(x,y)`在变量中找到给定次数的最佳多项式 ( )。（特别是多项式，而不是样条或傅里叶级数。）

理论和代码/库（最好是 Python，但任何语言都可以）都会很有用。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-12-20T08:45:51.523

感谢大家的回复。这是总结它们的另一种尝试。如果我说了太多“显而易见”的事情，请原谅：我以前对最小二乘一无所知，所以一切对我来说都是新的。

## 非多项式插值

[多项式插值](http://en.wikipedia.org/wiki/Polynomial_interpolation)拟合`n`给定`n+1`数据点的度数多项式，例如找到精确通过四个给定点的三次方。正如问题中所说，这不是我想要的——我有很多点并且想要一个小次数多项式（除非我们很幸运，否则它只会*近似*拟合）——但由于一些答案坚持谈论关于它，我应该提到它们 :)[拉格朗日多项式](http://en.wikipedia.org/wiki/Lagrange_polynomial)、[范德蒙德矩阵](http://en.wikipedia.org/wiki/Vandermonde_matrix)等。

## 什么是最小二乘？

“最小二乘”是多项式拟合“有多好”的特定定义/标准/“度量”。（还有其他的，但这是最简单的。）假设您试图将多项式 p(x,y) = a + bx + cy + dx ² + ey ² + fxy 拟合到某些给定的数据点 (x [i] ,y [i] ,Z [i] )（其中“Z [i] ”在问题中是“f(x [i] ,y [i] )”）。使用最小二乘法的问题是找到“最佳”系数（a，b，c，d，e，f），使得最小化（保持“最小”）的是“残差平方和”，即

S = ∑ [i] (a + bx [i] + cy [i] + dx [i] ² + ey [i] ² + fx [i] y [i] - Z [i] ) ²

## 理论

重要的想法是，如果您将 S 视为 (a,b,c,d,e,f) 的函数，则 S在其[梯度](http://en.wikipedia.org/wiki/Partial_derivative)[为 0的点处被](http://en.wikipedia.org/wiki/Critical_point_(mathematics))[最小化](http://en.wikipedia.org/wiki/Maxima_and_minima)。这意味着例如∂S/∂f=0，即

∑ [i] 2(a + … + fx [i] y [i] - Z [i] )x [i] y [i] = 0

以及 a、b、c、d、e 的类似方程。请注意，这些只是 a...f 中的线性方程。所以我们可以用[高斯消元](http://en.wikipedia.org/wiki/Gaussian_elimination)法或任何[常用方法](http://en.wikipedia.org/wiki/System_of_linear_equations#Other_methods)来解决它们。

这仍然被称为“线性最小二乘法”，因为虽然我们想要的函数是二次多项式，但它*在参数*(a,b,c,d,e,f) 中仍然是线性的。请注意，当我们希望 p(x,y) 是*任意*函数 f [j]的任何“线性组合” ，而不仅仅是多项式（=“单项式的线性组合”）时，同样的事情也有效。

## 代码

对于单变量情况（当只有变量 x - f [j]是单项式 x ^j时），有 Numpy's [`polyfit`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html)：

```
>>> import numpy
>>> xs = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> ys = [1.1, 3.9, 11.2, 21.5, 34.8, 51, 70.2, 92.3, 117.4, 145.5]
>>> p = numpy.poly1d(numpy.polyfit(xs, ys, deg=2))
>>> print p
       2
1.517 x + 2.483 x + 0.4927 
```

对于多元情况，或一般的线性最小二乘法，有 SciPy。[如其文档](http://docs.scipy.org/doc/scipy/reference/tutorial/linalg.html#solving-linear-least-squares-problems-and-pseudo-inverses)中所述，它采用值 f [j] ( **x** [i] )的矩阵 A。（理论是它找到 A 的[Moore-Penrose 伪逆](http://en.wikipedia.org/wiki/Moore-Penrose_pseudoinverse#Applications)。）在我们上面涉及 (x [i] ,y [i] ,Z [i] ) 的示例中，拟合多项式意味着 f [j]是单项式 x ^(()) y ^(())。以下找到最佳二次（或任何其他次数的最佳多项式，如果您更改“degree = 2”线）：

```
from scipy import linalg
import random

n = 20
x = [100*random.random() for i in range(n)]
y = [100*random.random() for i in range(n)]
Z = [(x[i]+y[i])**2 + 0.01*random.random() for i in range(n)]

degree = 2
A = []
for i in range(n):
    A.append([])
    for xd in range(degree+1):
        for yd in range(degree+1-xd):
            A[i].append((x[i]**xd)*(y[i]**yd)) #f_j(x_i)

c,_,_,_ = linalg.lstsq(A,Z)
j = 0
for xd in range(0,degree+1):
    for yd in range(0,degree+1-xd):
        print " + (%.2f)x^%dy^%d" % (c[j], xd, yd),
        j += 1 
```

印刷

```
 + (0.01)x^0y^0  + (-0.00)x^0y^1  + (1.00)x^0y^2  + (-0.00)x^1y^0  + (2.00)x^1y^1  + (1.00)x^2y^0 
```

所以它发现多项式是x ² +2xy+y ² +0.01。[最后一项有时为 -0.01，有时为 0，这是可以预料的，因为我们添加了随机噪声。]

Python+Numpy/Scipy 的替代品是[R](http://www.r-project.org/)和计算机代数系统：[Sage](http://sagemath.org/index.html)、Mathematica、Matlab、Maple。甚至 Excel 也能做到。[Numerical Recipes](http://numerical.recipes/oldverswitcher.html)讨论了我们自己实现它的方法（在 C、Fortran 中）。

## 关注点

*   它受到**如何选择点的**强烈影响。当我有`x=y=range(20)`而不是随机点时，它总是产生 1.33x ² +1.33xy+1.33y ²，这令人费解......直到我意识到因为我总是有`x[i]=y[i]`，所以多项式是相同的：x ² +2xy+y ² = 4x ² = (4/3)(x ² +xy+y ² )。因此，重要的是仔细选择点以获得“正确的”多项式。（如果可以选择，您应该选择[Chebyshev 节点](http://en.wikipedia.org/wiki/Chebyshev_nodes)进行多项式插值；不确定最小二乘是否也是如此。）

*   **过度拟合**：更高次的多项式总是可以更好地拟合数据。如果将 更改`degree`为 3 或 4 或 5，它仍然主要识别相同的二次多项式（系数为 0 表示更高阶项），但对于更大的阶数，它开始拟合更高阶多项式。但即使使用 6 次，取更大的 n（更多数据点而不是 20，比如 200）仍然适合二次多项式。因此，道德是避免过度拟合，这可能有助于获取尽可能多的数据点。
*   可能存在我不完全理解的[数值稳定性问题。](http://en.wikipedia.org/wiki/Numerical_stability)
*   如果您不需要多项式，则可以更好地拟合其他类型的函数，例如[样条](http://en.wikipedia.org/wiki/Spline_(mathematics))（分段多项式）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-19T21:06:37.783

是的，这通常是通过使用最小二乘来完成的。还有其他方法可以指定多项式的拟合程度，但该理论对于最小二乘法来说是最简单的。一般理论称为线性回归。

您最好的选择可能是从[数字食谱](http://www.numerical.recipes/oldverswitcher.html)开始。

[R](http://www.r-project.org/)是免费的，可以做任何你想做的事情，但它有一个很大的学习曲线。

如果您有权访问 Mathematica，则可以使用 Fit 函数进行最小二乘拟合。我想 Matlab 和它的开源对应 Octave 有类似的功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-19T21:33:23.440

对于 (x, f(x)) 情况：

```
import numpy

x = numpy.arange(10)
y = x**2

coeffs = numpy.polyfit(x, y, deg=2)
poly = numpy.poly1d(coeffs)
print poly
yp = numpy.polyval(poly, x)
print (yp-y) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-20T09:52:55.973

请记住，更高次的多项式总是更好地拟合数据。更高次的多项式通常会导致非常不可能的函数（参见[奥卡姆剃刀](http://en.wikipedia.org/wiki/Occams_razor)），尽管（过度拟合）。您想在简单性（多项式次数）和拟合（例如最小二乘误差）之间找到平衡。在数量上，有这方面的测试，[Akaike 信息准则](http://en.wikipedia.org/wiki/Akaike_information_criterion)或[贝叶斯信息准则](http://en.wikipedia.org/wiki/Bayesian_information_criterion)。这些测试给出了首选模型的分数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-19T21:35:16.230

如果您想将*(xi, f(xi))拟合到**n*次多项式，那么您将使用数据*(1, xi, xi, xi^2, ..., xi^)*建立线性最小二乘问题*n, f(xi))。* 这将返回一组系数*(c0, c1, ..., cn)*，因此最佳拟合多项式是 *y = c0 + c1 * x + c2 * x^2 + ... + cn * x^n。 *

*您可以通过在问题中包含y的幂以及**x*和*y*的组合来概括这两个以上的因变量。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-19T22:38:26.273

拉格朗日多项式（如@jw 发布的）在您指定的点上为您提供精确拟合，但如果多项式的次数超过 5 或 6，您可能会遇到数值不稳定。

最小二乘法为您提供“最佳拟合”多项式，其中误差定义为各个误差的平方和。（取你所拥有的点和产生的函数之间沿 y 轴的距离，将它们平方并求和）MATLAB`polyfit`函数会执行此操作，并且使用多个返回参数，你可以让它自动处理缩放/偏移问题（例如，如果您在 x=312.1 和 312.3 之间有 100 个点，并且您想要一个 6 次多项式，您将需要计算 u = (x-312.2)/0.1，因此 u 值分布在-1 和 +=)。

**请注意**，最小二乘拟合的结果受到 x 轴值分布的**强烈**影响。如果 x 值是等距的，那么你会在末端得到更大的错误。如果您有一个可以*选择*x 值的情况，并且您关心与已知函数的最大偏差和插值多项式，那么使用[Chebyshev 多项式](http://en.wikipedia.org/wiki/Chebyshev_polynomials)将为您提供接近完美极小极大多项式的东西（这是非常难以计算）。这在数字食谱中有详细讨论。

**编辑：**据我所知，这一切都适用于一个变量的函数。对于多元函数，如果度数超过 2，则可能会更加困难。我确实[在 Google Books 上找到了参考](http://books.google.com/books?id=VKs7Afjkng4C&pg=PA218&lpg=PA220)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-07-28T12:39:42.003

在大学里，我们有这本书，我仍然觉得它非常有用：Conte, de Boor；基本数值分析；麦格罗希尔。相关段落是 6.2：数据拟合。
示例代码来自 FORTRAN，清单也不是很可读，但同时解释深入而清晰。您最终会了解自己在做什么，而不仅仅是这样做（就像我对数字食谱的经验一样）。
我通常从数字食谱开始，但对于这样的事情，我很快就不得不抓住 Conte-de Boor。

也许更好地发布一些代码......它有点精简，但最相关的部分在那里。显然，它依赖于 numpy！

```
def Tn(n, x):
  if n==0:
    return 1.0
  elif n==1:
    return float(x)
  else:
    return (2.0 * x * Tn(n - 1, x)) - Tn(n - 2, x)

class ChebyshevFit:

  def __init__(self):
    self.Tn = Memoize(Tn)

  def fit(self, data, degree=None):
    """fit the data by a 'minimal squares' linear combination of chebyshev polinomials.

    cfr: Conte, de Boor; elementary numerical analysis; Mc Grow Hill (6.2: Data Fitting)
    """

    if degree is None:
      degree = 5

    data = sorted(data)
    self.range = start, end = (min(data)[0], max(data)[0])
    self.halfwidth = (end - start) / 2.0
    vec_x = [(x - start - self.halfwidth)/self.halfwidth for (x, y) in data]
    vec_f = [y for (x, y) in data]

    mat_phi = [numpy.array([self.Tn(i, x) for x in vec_x]) for i in range(degree+1)]
    mat_A = numpy.inner(mat_phi, mat_phi)
    vec_b = numpy.inner(vec_f, mat_phi)

    self.coefficients = numpy.linalg.solve(mat_A, vec_b)
    self.degree = degree

  def evaluate(self, x):
    """use Clenshaw algorithm

    http://en.wikipedia.org/wiki/Clenshaw_algorithm
    """

    x = (x-self.range[0]-self.halfwidth) / self.halfwidth

    b_2 = float(self.coefficients[self.degree])
    b_1 = 2 * x * b_2 + float(self.coefficients[self.degree - 1])

    for i in range(2, self.degree):
      b_1, b_2 = 2.0 * x * b_1 + self.coefficients[self.degree - i] - b_2, b_1
    else:
      b_0 = x*b_1 + self.coefficients[0] - b_2

    return b_0 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-21T16:34:25.680

*请记住，近似*多项式和找到一个*精确*的多项式之间存在很大差异。

例如，如果我给你 4 分，你可以

1.  用最小二乘法等方法逼近一条线
2.  用最小二乘法等方法逼近抛物线
3.  通过这四个点找到一个*精确的三次函数。*

请务必选择适合您的方法！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-28T15:57:24.423

如果您知道如何将最小二乘问题表示为线性代数问题，那么使用 Excel 的矩阵函数很容易快速拟合。（这取决于您认为 Excel 作为线性代数求解器的可靠性。）

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-12-19T21:40:13.847

[拉格朗日多项式](http://en.wikipedia.org/wiki/Lagrange_polynomial)在某种意义上是适合给定数据点集的“最简单”的插值多项​​式。

有时会出现问题，因为数据点之间的差异可能很大。

# objective-c - 既然 Objective-C/Cocoa 有垃圾收集，我还需要学习管理内存吗？

> ID：382187
> 
> 赞同：8
> 
> 时间：2008-12-19T20:59:22.527
> 
> 标签：objective-c, cocoa, macos, garbage-collection

所以我终于把我的 Objective-C/Cocoa 书掸掉了……原来它们已经快 7 岁了！Objective-C 2.0 现在有了垃圾收集，内存管理的章节有多重要？

垃圾收集有多大的不同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-19T21:24:23.257

理解内存管理仍然非常重要。如果您的目标是较旧的操作系统，则需要进行内存管理。如果您使用的是较旧的库，则需要进行内存管理。如果您下降到核心基础级别，您（可能会或可能不会）需要进行内存管理。

如果您正在为 iPhone 编程，则需要进行内存管理。

Objective-C 中的垃圾收集器非常出色——如果你可以使用它，你绝对应该使用它——但它还没有涵盖所有的编程情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T21:33:30.087

一些 Cocoa 技术，例如分布式对象、PyObjC（Python-Objective-C 桥）插件和 CoreImage（至少我最近听说过；这可能已经修复）不能很好地与垃圾收集配合使用。如果您使用这些技术，您仍将不得不使用传统的内存管理。当然，正如其他人所说，如果您在代码中支持 OS X 10.4 或 iPhone，您仍然需要使用传统的 Cocoa 内存管理（引用计数）。

另一方面，新的 GC 可以非常好。然而，这不是免费的午餐。您仍然需要了解 GC 系统的语义、模式及其局限性……就像您对任何技术所做的那样。

由于许多第三方框架可能还不支持 GC，因此最好还是了解引用计数系统。如果您遵循 Apple 的[内存管理指南](http://developer.apple.com/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html#//apple_ref/doc/uid/10000011)中给出的简单的对象所有权规则，您应该总是可以的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-20T01:54:31.073

如果你正在编写 iPhone 平台，你需要知道保留/释放，因为 Cocoa Touch 没有 GC。

如果您打算使用 Core Foundation、Core Graphics、大多数 Core Services 或任何其他基于 CF 的 API，您需要了解保留/释放，因为 CF 派生对象默认情况下不会被 GC（并且您必须无论如何，明确地把它们拿出来取走）。

如果您要使用任何 POSIX API 或任何其他核心服务，您需要了解分配/释放内存管理。你甚至没有得到引用计数。（例外：Icon Services，它也有引用计数。从 Carbon 诞生的 API 是一团糟。）

所以，一句话：是的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-19T21:21:31.623

这取决于。如果您打算忽略 10.4 用户，那么您*可能*不必担心；但是 Objective-C 2.0 在 10.4 及更低版本上不可用，因此您仍然需要担心这些平台上的内存管理。

也就是说，内存管理始终是一项有用的技能，而且在 Cocoa 中并没有*那么*难，所以学习它并不是一个坏技能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-19T21:25:27.357

支持 Cocoa 内存管理的概念可能值得学习，因为它在某些情况下仍然有用。例如，iPhone OS 不支持垃圾收集。可能在其他情况下使用手动内存管理是有利的，并且能够做出这种选择是有用的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-21T12:25:13.733

了解 Cocoa 出色的内存管理概念将有助于您了解一般的内存管理概念。我已经将自动发布的概念复制到了几个 C++ 项目中，效果很好。Apache 和 Subversion 是也使用自动发布的其他软件的示例。

就我个人而言，我发现保留/释放/自动释放对我来说是正确的抽象级别。这不是魔法，所以如果我真的需要做一些奇怪的事情，这样做很容易。另一方面，规则是如此简单以至于它成为第二天性，以至于你最终不再考虑内存管理，它就可以工作。

除此之外，如上所述，只有大部分 Cocoa 支持垃圾回收，而您正在编写的是 C，因此您编写和/或使用的任何不是 Cocoa 的代码都需要手动管理。这包括 CoreAudio、CoreGraphics 等。

（是的，CF 对象与 GC 一起使用，但前提是您为每个对象显式启用它，而且我发现很难学习 GC-CF 规则）

总结：我自己从不使用垃圾收集器（我唯一一次这样做非常痛苦，因为我混合了一些 C++ 和 CG），据我所知，大多数 Cocoa 编码器都非常习惯于保留/release/autorelease 并使用它。

# asp.net - 涉及日期时间的有点奇怪的 .NET 错误

> ID：382197
> 
> 赞同：3
> 
> 时间：2008-12-19T21:04:45.370
> 
> 标签：asp.net, vb.net, datetime

我在远程服务器上收到此错误，但相同的代码在本地执行良好。请不要说它很糟糕，或者给我你对动态 sql 的咆哮​​，我没有写它，只是想弄清楚它为什么会抛出异常。突出显示的错误是第 56 行。

```
Protected Sub drpDateRange_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles drpRange.SelectedIndexChanged
    Dim sql As String = "SELECT postedDate, inspectionType FROM tInspectionRequest WHERE source_lookupID = 'IRS_WEB' "
    If _franchiseID > 0 Then sql &= " and franchiseeID = " & _franchiseID.ToString
    Dim db As New Database
    Dim ds As DataSet = db.selectQuery(sql)
    Dim dv As New DataView(ds.Tables(0))
    dv.RowFilter = "inspectionType='Buyer' AND postedDate >= #" & DateTime.Now.AddDays(-1) & "#"
    lblB1.Text = dv.Count
End Sub 
```

这是一个例外，似乎 DateTime.Now.AddDays(-1) 未能被转换为日期时间？不管它是一个转换问题/日期到字符串错误，奇怪的是它只在远程服务器上失败，而不是在本地。

字符串未被识别为有效的日期时间。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.FormatException：字符串未被识别为有效的 DateTime。

源错误：

`Line 55: Dim dsInspectionHistory As DataSet = objDB.selectQuery(sqlInspectionHistory)`

`Line 56: Dim dvInspectionHistory As New DataView(dsInspectionHistory.Tables(0))`

`Line 57: dvInspectionHistory.RowFilter = "inspectionType='Buyer' AND postedDate >= #" & DateTime.Now.AddDays(-1).ToString & "#"`

`Line 58: lblB1.Text = dvInspectionHistory.Count`

`Line 59: dvInspectionHistory.RowFilter = "inspectionType='Seller' AND postedDate >= #" & DateTime.Now.AddDays(-1) & "#"`

[FormatException：字符串未被识别为有效的 DateTime。] System.DateTimeParse.Parse（String s，DateTimeFormatInfo dtfi，DateTimeStyles 样式）+2291962 System.DateTime.Parse（String s，IFormatProvider 提供程序）+26 System.Data.ConstNode。 .ctor(DataTable table, ValueType type, Object constant, Boolean fParseQuotes) +485 System.Data.ExpressionParser.Parse() +830 System.Data.DataExpression..ctor(DataTable table, String expression, Type type) +124 System. Data.DataView.set_RowFilter(String value) +161 controls_inspectionRequestChart.drpRange_SelectedIndexChanged(Object sender, EventArgs e) in xxxx controls_inspectionRequestChart.Page_Load(Object sender, EventArgs e) in xxxx System.Web.UI.Control.OnPreRender(EventArgs e) +2117788 System.Web.UI.Control.PreRenderRecursiveInternal() +86 System.Web.UI.Control。PreRenderRecursiveInternal() +170 System.Web.UI.Control.PreRenderRecursiveInternal() +170 System.Web.UI.Control.PreRenderRecursiveInternal() +170 System.Web.UI.Control.PreRenderRecursiveInternal() +170 System.Web.UI。 Control.PreRenderRecursiveInternal() +170 System.Web.UI.Control.PreRenderRecursiveInternal() +170 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint） +2041布尔型 includeStagesAfterAsyncPoint) +2041布尔型 includeStagesAfterAsyncPoint) +2041

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T21:11:26.107

这可能是由于服务器和您的开发 PC 之间的区域日期时间设置不同。代码中日期时间和字符串之间存在隐式转换（请记住它是内联 sql（编辑：RowFilter 语法），您没有设置参数）。

尝试格式化字符串

```
dv.RowFilter = "inspectionType='Buyer' AND postedDate >= #" & DateTime.Now.AddDays(-1).ToString("MMM dd yyyy hh.mm.ss") & "#" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-19T21:24:43.130

我认为 ChrisE 的答案可能会解决您的问题，但是当您修复它时，为什么不实际*修复*它。

```
Protected Sub drpDateRange_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles drpRange.SelectedIndexChanged
    Dim sql As String
    sql = "DECLARE @Yesterday DateTime;Set @Yesterday= getdate()-1;" & _
      " SELECT COUNT(*) AS CNT" & _
      " FROM tInspectionRequest" & _
      " WHERE source_lookupID = 'IRS_WEB' AND inspectionType='Buyer'" & _
          " AND (@FranchiseID <= 0 OR @FranchiseID = franchiseID)" & _
          " AND postedDate >= @Yesterday;"
     lblB1.Text = New Database().selectQuery(sql.Replace("@FranchiseID", _franchiseID.ToString()))
End Sub 
```

这应该会执行*得*更好，因为它让数据库处理过滤行并且只通过连接发送*必要*的信息。通过让数据库为您处理它，它还完全避开了您的日期转换问题。

当然，真正的查询参数会更好，但我知道你还不能这样做，因为你必须使用那个自定义数据库包装器，而且这里没什么大不了的，因为唯一的参数是一个强类型整数。另外，我不知道如果数据库包装器为返回标量值而不是数据集做了什么规定。应该有一些东西，但这意味着您至少需要更改该函数名称才能使此代码正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T21:08:00.480

日期周围的#是怎么回事？

SQL 在使用文本表示的日期时理解引用的日期，即“01/01/1901”或“05/28/1978 21:13:00.000”。

您从中选择的数据集/表可能将张贴日期列作为字符串而不是日期时间。你能检查列类型吗？

检查远程机器上的区域设置，看看它们是否与您的区域设置匹配。

# organization - 中断后重回正轨

> ID：382200
> 
> 赞同：4
> 
> 时间：2008-12-19T21:06:30.623
> 
> 标签：organization

在过去的几周里，除了参加培训课程外，我似乎还被旧项目的维护任务打断了很多。我觉得我已经失去了当前项目的所有前进动力。甚至开始编码都很困难，因为我不确定我在做什么以及在中断之前我在想什么。

在中断导致您离开当前项目几个小时或几天后，您有哪些技巧或技术可以帮助您更轻松地重新启动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T21:13:20.657

*   花一点时间给自己（在你面前的纸上）写下你正在放下的项目的笔记，然后再拿起另一个

*   还是一团糟？耳机开着，音乐开着，声音大到足以淹没周围的环境，而且没有歌词

*   真的搞砸了吗？去吃午饭，散散步，出去散散心，直到打扰消失后再回来

*   真的真的很乱吗？不要再接受打扰了。对同事和经理要坚定这一点。如果您需要自我隔离以完成工作，他们应该能够理解这一点，归根结底，对您有效的对他们来说也是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-19T21:14:25.070

我的一些技术包括

1.  文档。这让你思考你的项目。如果它不容易描述，它可能还不够优雅
2.  静态代码分析 - [FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)、[Lint](http://en.wikipedia.org/wiki/Lint_programming_tool)、[圈复杂度](http://en.wikipedia.org/wiki/Cyclomatic_complexity)、安全分析器。现在是退出代码并检查最佳实践的好时机
3.  单元测试。这再次让您思考代码以及如何改进它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-19T21:16:06.563

我经常被电话打断，更多技术项目的销售报价，项目经理向我询问可行性和时间限制，以及初级开发人员寻求帮助解决问题。

我发现以下几点虽然不如关上办公室的门并连续几个小时独自一人那么理想，但却是最有效的：

*   安装 Firefox 插件“LeechBlock”并在那里添加您最常用的网站。您可以设置一个时间限制（即每两个小时 5 分钟），这样您就不会完全关闭自己。

*   如果您在隔间工作或很忙，请戴上耳机。

*   把手机打开请勿打扰。

*   关闭您的电子邮件客户端并仅在特定时间（即上午 11 点、下午 3 点）打开它。

*   出于礼貌，要求同事仅在特定时间（即上午 11 点、下午 3 点）见您，但表示您仍然可以应对紧急情况。

*   将尽可能多的相似任务组合在一起（即每天下午 4 点到 5 点执行维护任务），然后将一天的剩余时间留给项目工作。

这并不理想，但这是我找到的最佳解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-19T21:25:01.257

从本质上讲，您要做的是在中断后回到生产“状态”，关键是找到*对您*而言触发该生产状态的事物。尽管我仍在学习该主题，但您可能会在有关[NLP](http://en.wikipedia.org/wiki/Neuro-linguistic_programming)（神经语言编程）的书籍中找到一些有用的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T22:27:50.630

1.  先找个小任务来实现它（如果你没有中断的话，要花 1-6 个小时来完成）。在制定要做什么的过程中，您会稍微回忆一下项目的状态。您还可以查看客户或项目经理的要求。
2.  执行此任务，但不要着急——您可能会花费比计划更多的时间。查看代码以更深入地回忆。
3.  至于我，在这之后我记得大部分事情。

如果您在提到的步骤后有问题需要继续，这可能表明项目中的一些问题，例如丑陋的设计、缺少文档、对项目目的理解不足或其他问题。现在是重新审视该项目的好时机。当您深入项目时，您会注意到难以发现的问题。

当然，这对于几天的中断很有用，但对于几个小时的中断却没有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T21:08:04.943

是的，祝你好运！（我认为没有什么好的方法可以让中断不完全中断。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T22:16:32.167

老实说，恕我直言，坐下来做吧。现在抱怨只是分散了开始的注意力。如果你想研究如何在未来改善这个问题，请在几天后重新拿起接力棒后再做。

# sql - 如何从另一个表中删除存在于一个表中的项目？

> ID：382207
> 
> 赞同：4
> 
> 时间：2008-12-19T21:07:33.507
> 
> 标签：sql

我有表 A 和 B。表 B 的项目可能也存在于表 A 中，我想删除这些项目。执行此操作的 SQL 语句会是什么样子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T21:11:25.420

这是一个选项

```
delete from a
where a.key in (select key from b) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T21:16:54.970

任何一个：

```
DELETE a
WHERE a.some_field IN (SELECT some_field FROM b) 
```

或者

```
DELETE A
WHERE EXISTS (SELECT 1 FROM b WHERE b.field1 = a.field2) 
```

根据您的数据库，您可能会发现其中一个比另一个更有效。IIRC Oracle 倾向于选择 WHERE EXISTS 而不是 IN，但这可能取决于许多因素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T21:11:11.723

就像是：

```
DELETE 
FROM TableA as A 
WHERE A.ID IN (SELECT ID 
               FROM TableB AS B 
               WHERE [your condition here]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-19T21:27:32.640

在某些数据库中，相当奇特的 DELETE FROM FROM*非常*有效

```
delete from foo from foo as f
where exists 
(
  select 1 from bar as b  where b.field = f.field
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T07:54:01.660

根据标准，这是允许的。

```
delete a from a join b on a.id = b.id; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T21:20:27.943

如果您的表使用 InnoDB，最简单的方法是使用表 B 中的[外键](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)设置表 A ，并使用 ON DELETE CASCADE。这样就不需要更改代码，并且可以保证数据库的完整性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T21:10:16.793

```
delete a
--select a.*
from tablea a
join tableb b on a.someid = b.someid 
```

确保首先运行选择部分以确保获得所需的记录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-19T21:22:27.283

```
DELETE FROM FIRST_TABLE FT
WHERE EXISTS(
            SELECT 1
            FROM SECOND_TABLE ST
            WHERE ST.PRIMARY_KEY = FT.PRIMARY_KEY
            ); 
```

# antlr - ANTLR 或 JavaCC 哪个更好？

> ID：382211
> 
> 赞同：47
> 
> 时间：2008-12-19T21:09:12.520
> 
> 标签：antlr, javacc

关注点是文档/可学习性、eclipse 集成、工具、社区支持和性能（大致按此顺序）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2010-01-30T08:48:22.030

您不应该排除以下几种选择：

*   [JParsec](https://github.com/jparsec/jparsec)是一个解析器组合器框架，它允许您完全从代码构建解析器。
*   [Scala 的解析器组合器框架](http://www.codecommit.com/blog/scala/the-magic-behind-parser-combinators)解决了类似的问题。然而，Scala 的语法使所有这些都更具可读性。
*   然后还有 John Metsker 为他的书[Building Parsers With Java](http://books.google.nl/books?id=uB-eYkcxImEC&dq=john+metsker+building+parsers+java&printsec=frontcover&source=bn&hl=nl&ei=zu9jS4TaGNWW-ga9pYWHDg&sa=X&oi=book_result&ct=result&resnum=4&ved=0CBwQ6AEwAw#v=onepage&q=&f=false)完成的解析器组合器框架；我不记得图书馆的确切位置，但至少过去它在互联网上流传。它解决了同样的问题：您没有在单独的非 Java 文件中定义语法和标记定义；相反，这都是Java。
*   Fortress，Sun 多年来一直致力于开发的编程语言，现在似乎是建立在这个工具包上的：[Rats](http://cs.nyu.edu/rgrimm/xtc/rats-intro.html)。我没有太多信息，但我认为如果他们将它用于他们的新编程语言，它可能有一些有趣的特性。

总的来说，我的印象是代码生成器的时代已经结束。如果我是你，我会使用 Scala 的解析器组合器工具包。基本上，任何支持 Scala 的 IDE 也“支持”这个解析器组合器框架。性能很好，AFAICT。

顺便说一句，ANTLR 有相当不错的 IDE 支持，作为一个 Eclipse 插件（但也许 IntelliJ 中也有一些东西 - 我不记得了。）所以，如果你选择在外部定义词法分析器和解析器的经典方法你的语言，那么 ANTLR 应该是你的选择，我认为。它在 Java 开发人员中占有最大的份额，有工具支持，还有 ANTLR 作者的一本好书。我认为任何其他工具包都不能声称这一点。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-21T20:50:52.980

ANTLR 功能更全面：它是一个开箱即用的编译器编译器——词法分析、解析、AST、树转换和代码生成。

对于 JavaCC，它更像是一个解析器生成器，而不是一个编译器编译器。AST 支持是通过另一个名为 JJTree 的库提供的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2010-01-30T08:27:01.007

关于您提到的问题，我建议 JavaCC 是一个更好的选择。Java开发人员学习起来更快更容易（语法与普通Java极为相似），文档全面，Eclipse集成充足。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-12-19T22:05:41.783

粗略地说，在实践中对你来说真正重要的是符号对你的眼睛有多方便和直观。

话虽如此，我已经使用 ANTLR 和 JavaCC 完成了项目，并且发现 ANTLR 在大多数事情上都是非常重量级的。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-07-05T04:05:37.607

ANTLR 相对于 JavaCC 的一个具体优势是它具有 Java 以外的其他语言的生成器。这可能会使您的语言更容易移植到其他地方。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-07-05T03:49:32.127

我在上面第二个jamesh。

> ANTLR 功能更全面：它是一个开箱即用的编译器编译器——词法分析、解析、AST、树转换和代码生成。
> 
> 对于 JavaCC，它更像是一个解析器生成器，而不是一个编译器编译器。AST 支持是通过另一个名为 JJTree 的库提供的。

根据我的个人经验，你可以用 ANTLR 做更多的事情，包括在规则之间传递参数以及通过所有子规则，这在制作复杂的解析器时很有帮助，比如 C# 的解析器。此外，规则重写也是经典之作。它可以帮助您轻松格式化理想的 AST。

然而，它真的很重。对于一个简单的项目，您可能永远不会使用这些功能。Javacc 更酷。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-29T19:19:46.213

我有一段时间没有使用解析器生成器了，但几年前我对它们感兴趣时，我记得我最喜欢[SableCC](http://sablecc.org/)。它实现了一些关于面向对象解析器生成的有趣想法，这些想法可能会或可能不会被替代方案采用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-03-19T23:49:53.693

我用 SableCC 为 CAS 语言（如 Maple 或 MuPAD）编写了一个编译器，将这种单一语言转换为 Maxima（用于 CAS-Capacity）和 LaTeX（用于显示）。SableCC 的 AST 是严格的面向对象的，很容易扩展它以生成不同的语言。如果您想将一种语言编译成多种其他语言，请尝试一下。

# c# - 用 C# 将数千条记录输入 Oracle db 的 sql 是什么？

> ID：382214
> 
> 赞同：0
> 
> 时间：2008-12-19T21:09:53.970
> 
> 标签：c#, sql, oracle

用 C# 将数千条记录输入 Oracle db 的 sql 是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-19T21:25:02.037

使用[ODP.NET](http://www.oracle.com/technology/software/tech/windows/odpnet/utilsoft.html)和[数组绑定](http://youngcow.net/doc/oracle10g/win.102/b14307/featOraCommand.htm#i1007888)：

```
class Record {
  public int Value1 { get; set; }
  public int Value2 { get; set; }
}

Record[] records = GetRecords();

const string CMD_TEXT = "INSERT INTO TABLE (Col1, Col2) VALUES (:Col1, :Col2);"
using (var conn = new OracleConnection(connectionString))
using (var cmd = new OracleCommand(CMD_TEXT, conn)) {
   cmd.BindByName = true;
   // number of rows to insert
   cmd.ArrayBindCount = records.Length;

   // bind array of values to parameters
   cmd.Parameters.Add(":col1", OracleDbType.Int32, 
      records.Select(r => r.Value1).ToArray()
   );
   cmd.Parameters.Add(":col2", OracleDbType.Int32, 
      records.Select(r => r.Value2).ToArray()
   );

   conn.Open();
   cmd.ExecuteNonQuery();
   conn.Close();
} 
```

# delphi - Delphi 编程中的 Enums vs Const vs Class Const

> ID：382234
> 
> 赞同：14
> 
> 时间：2008-12-19T21:19:00.363
> 
> 标签：delphi

我在 ClientDataSet 中有一个整数字段，我需要与一些值进行比较，如下所示：

我可以使用 const

```
const
  mvValue1 = 1;
  mvValue2 = 2;

if ClientDataSet_Field.AsInteger = mvValue1 then 
```

或枚举

```
TMyValues = (mvValue1 = 1, mvValue2 = 2);

if ClientDataSet_Field.AsInteger = Integer(mvValue1) then 
```

或类常量

```
TMyValue = class
const
   Value1 = 1;
   Value2 = 2;
end;

if ClientDataSet_Field.AsInteger = TMyValues.Value1 then 
```

我喜欢 class const 方法，但似乎不是 delphi 方法，所以我想知道您的想法

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-19T22:21:41.517

宣言：

```
type
  TMyValues = class
    type TMyEnum = (myValue1, myValue2, myValue3, myValue4);
    const MyStrVals: array [TMyEnum] of string =
      ('One', 'Two', 'Three', 'Four');
    const MyIntVals: array [TMyEnum] of integer =
      (1, 2, 3, 4);
  end; 
```

用法：

```
if ClientDataSet_Field.AsInteger = TMyValues.MyIntVals[myValue1] then 
```

演员通常是我最后的选择。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-19T22:09:40.183

我不会说类 const 不是 Delphi 的方式。只是它们最近才被介绍给 Delphi，而且您在 Internet 上找到的很多书籍和文章都是在介绍它们之前编写的，因此您不会看到它们被广泛使用。许多 Delphi 开发人员（我会说大多数）在 Delphi 可用之前就已经开始使用它们，因此他们并不是人们首先想到的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-19T23:49:25.663

需要考虑的一件事是向后兼容性——类常量对 Delphi 来说是相对较新的，所以如果你的代码必须与以前的版本共享，那么它们就出来了。

我通常使用枚举类型，与您的不同之处在于我的第一个枚举通常是一个“未定义”项，用于在 int 字段中表示 NULL 或 0。

```
TmyValues = (myvUndefined, myvDescription1, myvDescription2)

if ClientDataSet_Field.AsInteger = Ord(myvDescription1) then... 
```

要使用一点 Jim McKeeth 的答案 - 如果您需要向用户显示文本可查看版本，或者如果您需要将他们选择的文本转换为枚举类型，那么数组与类型结合使用会派上用场：

```
const MYVALS: array [TmyValues ] of string = ('', 'Description1', 'Description2'); 
```

然后，您可以使用实用函数来设置/获取字符串的枚举类型/从字符串中获取枚举类型：

```
Function MyValString(const pMyVal:TmyValues):string;
begin
  result := MYVALS[Ord(pMyVal)];
end;

Function StringToMyVal(const pMyVal:String):TMyValues;
var i:Integer;
begin
  result := myvUndefined;
  for i := Low(MYVALS) to High(MYVALS) do
  begin
    if SameText(pMyVal, MYVALS[i]) then
    begin
      result := TMyValues(i);
      break;
    end;
  end;
end; 
```

继续...您可以使用 scatter 例程来设置组合/列表框：

```
Procedure SetList(const DestList:TStrings);
begin
  DestList.Clear;
  for i := Low(MYVALS) to High(MYVALS) do
  begin
    DestList.Insert(MYVALS[i]);
  end;
end; 
```

在代码中：SetList(Combo1.Items) 或 SetList(ListBox1.Items)..

然后，如果您在此处看到模式...围绕枚举的有用实用程序函数，则将所有内容添加到它自己的类中，并将该类放入它自己的名为 MyValueEnumeration 或 whaterver 的单元中。您最终将围绕此枚举的所有代码放在一个地方，并根据需要继续添加实用程序函数。如果您保持单元清洁 - 不要混合其他不相关的功能，那么它对于与该枚举相关的所有项目都会非常方便。

随着时间的推移，您会看到更多的模式，并且一遍又一遍地使用相同的功能，您将再次构建一个更好的捕鼠器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-15T14:40:36.510

使用常量时，我​​建议在数据类型为数字浮点数时分配类型。

如果类型不匹配，Delphi 和其他语言将不会总是正确地评估值......

```
TMyValue = class
const
   // will not compare correctly to float values.
   Value1 = 1; // true constant can be used to supply any data type value
   Value2 = 2; // but should only be compared to similar data type

   // will not compare correctly to a single or double.
   Value3 = 3.3; // default is extended in debugger 

   // will not compare correctly to a single or extended.
   Value1d : double = Value1; // 1.0
   Value2d : double = Value2; // 2.0
end; 
```

if () 和 while () 语句中的比较浮点值应与相同数据类型的值进行比较，因此最好定义用于任何比较语句 (=<>) 的浮点类型的临时或全局变量。

与相同的浮点数据类型相比，这种格式对于任何编程语言中的比较运算符都更可靠，不仅在 Delphi 中，而且在定义的浮点类型因变量到常量而异的任何编程语言中。

一旦你指定了一个类型，Delphi 将不允许你使用该变量来提供另一个常量，所以真正的常量可以很好地提供任何相关的数据类型，但不能用于循环和 if 语句中的比较，除非它们被赋值并与整数进行比较价值观。

***注意：将值从一种浮点类型转换为另一种可能会更改存储的值，而不是您为比较目的输入的值，因此请在执行此操作时使用循环的单元测试进行验证。

不幸的是，Delphi 不允许枚举格式，例如... TController : Integer = (NoController = 0, ncpod = 1, nextwave = 2);

或强制类型名称访问枚举值。

或允许在调用中将类常量用作参数默认值... function getControllerName( Controller : TController = TController.NoController) : string;

但是，提供两种访问类型的更安全的方法是将枚举放在一个类中。

```
 TController = class
  //const
     //NoController : Integer = 1;
     //ncpod : Integer = 2;
     //nextwave : Integer = 3;

  type
     Option = (NoController = 0, ncpod = 1, nextwave = 2);

  public
    Class function Name( Controller : Option = NoController) : string; static;
 end;

 implementation

 class function TController.Name( Controller : Option = NoController) : string;
 begin
    Result := 'CNC';
    if (Controller = Option.nextwave) then
       Result := Result + ' Piranha'
    else if (Controller = Option.ncpod) then
       Result := Result + ' Shark';

    Result := Result + ' Control Panel';
 end; 
```

这种方法将有效地隔离值，提供静态方法并允许使用 for () 循环访问值。

从浮动函数访问值将是这样的......

```
 using TControllerUnit;

 function getName( Controller : TController.Option = TController.Option.NoController) : string;

 implementation

 function getName( Controller : TController.Option = TController.Option.NoController) : string;
 begin
   Result := 'CNC';
   if (Controller = TController.Option.nextwave) then
       Result := Result + ' Piranha'
   else if (Controller = TController.Option.ncpod) then
       Result := Result + ' Shark';

   Result := Result + ' Control Panel';
 end; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T21:34:37.383

这么多选择！:-) 我更喜欢枚举并按照您的描述定期使用它们。我喜欢的部分之一是我可以将它们与“for”循环一起使用。我也使用类常量，但更喜欢枚举（甚至私有枚举），具体取决于我想要实现的目标。

```
TMyType=class
private const    // d2007 & later i think
  iMaxItems=1;   // d2007 & later i think
private type     // d2007 & later i think
  TMyValues = (mvValue1 = 1, mvValue2 = 2);     // d2007 & later i think
private
public
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-22T07:15:20.393

您没有想到的一个选项是在数据库中使用查找表，然后您可以检查数据库中的字符串。

例如。

```
 Select value, Description from tbl_values inner join tbl_lookup_values where tbl_values.Value = tbl_lookup_values.value

if ClientDataSet_Field.AsString = 'ValueIwant' then 
```

# macos - 第三方统一类型标识符实现？

> ID：382244
> 
> 赞同：3
> 
> 时间：2008-12-19T21:22:10.390
> 
> 标签：macos, cocoa, mime, file-extension

用于确定文件类型的文件扩展名和 MIME 类型以及创建者代码和幻数的疯狂是一个巨大的混乱。来自 Cocoa 编程的背景，我想我被宠坏了：在 Tiger 中，OS X 添加了一个称为[统一类型标识符](http://en.wikipedia.org/wiki/Uniform_Type_Identifier)(UTI) 的系统，它使整个过程变得理智。

鉴于我正在做一堆 Web 开发（在此处插入您最喜欢的 Web 开发环境），是否有任何类似的东西不依赖于运行 OS X 并且 - 更好的是 - 可以在多种编程语言中工作？

现在，我`file`在 Linux 上使用该命令来复制一些功能，但它只是不一样。当然，每个人都有自己[庞大的查找表](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#typesconfig)，但没有什么是集中的。

有没有人这样做过或遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-31T14:35:05.353

在 OS X 之外似乎没有任何这样的东西。该`file`命令是您在 linux 上可以做的最好的命令，我在 linux 上看到的所有文件类型识别系统都在内部使用它（当它们不仅仅是使用文件扩展名）。

特别是，您可以使用`file -i`输出 MIME 类型而不是普通的人类可读字符串。

UTI 系统似乎有很多有用的功能，也许如果你能告诉我们你特别想念它的地方，而你找到的其他方法没有给你，我们可能会更容易找到你的东西有用。

# c# - LinkBut tons 在 ASP.net/C# 应用程序生产部署中不起作用

> ID：382248
> 
> 赞同：0
> 
> 时间：2008-12-19T21:23:34.177
> 
> 标签：c#, asp.net

大家好，我遇到了这样一种情况，即在我部署在生产机器上的一个应用程序中，链接按钮在 gridview 控件上没有响应。不确定到底发生了什么。

[这个问题与这个](https://stackoverflow.com/questions/96837/linkbutton-not-firing-on-production-server)问题非常相似，尽管我已经检查了页面上的输出 html 并且看起来很合理。任何想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T22:05:00.023

如果这些 LinkBut​​tons 是作为 gridview 的 DataBinding 的一部分动态创建的，则它们也必须在回发期间重新创建。

Page_load 在链接按钮单击事件发生之前触发，如果在 page_load 完成之后没有重新创建相同的链接按钮，则没有连接事件，因为当时链接按钮不存在，并且单击事件不会触发.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-22T05:21:24.930

浏览器中是否有可能禁用javascript？对于某些在浏览器中使用 JavaScript 的 AV 安全应用程序，我也遇到过类似的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T16:21:25.593

原来这是 SQL 服务器身份验证的问题。这对我来说不是很明显，因为我在 Firefox 中运行我的应用程序，它没有显示任何错误；只是非响应式 UI 元素。在 IE 中运行的东西揭示了这个问题。我调整了我试图连接的数据库的权限，现在一切正常。谢谢大家的建议。

# .net - 如何在 Silverlight 数据网格中删除鼠标悬停突出显示和选定行突出显示

> ID：382249
> 
> 赞同：5
> 
> 时间：2008-12-19T21:23:34.210
> 
> 标签：.net, silverlight

我有一个数据网格，每行都有一个按钮（xaml 如下所示）。我试图摆脱蓝色突出显示功能，它突出显示选定的行，以及鼠标悬停在其上的行。我正在尝试将其设置好，因此您只需单击按钮而无需获得行选择和鼠标悬停突出显示功能。我尝试将 IsHitTestVisible 设置为 false，但按钮不可点击。我怎样才能做到这一点？

```
<data:DataGrid x:Name="grdClinics"
               HorizontalAlignment="Left" 
               VerticalAlignment="Bottom" 
               AutoGenerateColumns="False"
               HeadersVisibility="None"
               RowHeight="55"
               Background="Transparent"
               AlternatingRowBackground="Transparent"
               RowBackground="Transparent"
               BorderBrush="Transparent"
               Foreground="Transparent" 
               GridLinesVisibility="None" 
               SelectionMode="Single">                         

    <data:DataGrid.Columns>
        <data:DataGridTemplateColumn Header="Clinic">
            <data:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button x:Name="btnClinic" 
                            Height="46" 
                            Width="580" 
                            Content="{Binding Path=Description}" 
                            Style="{StaticResource ShinyButton}" 
                            Click="btnClinic_OnClick"
                            FontSize="24"
                            FontFamily="Tahoma"
                            FontWeight="Bold">
                        <Button.Background>
                            <LinearGradientBrush EndPoint="0.528,1.144" StartPoint="1.066,1.221">
                                <GradientStop Color="#FF000000"/>
                                <GradientStop Color="#FFEDC88F" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                </DataTemplate>
            </data:DataGridTemplateColumn.CellTemplate>
        </data:DataGridTemplateColumn>
    </data:DataGrid.Columns>
</data:DataGrid> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-28T17:58:26.543

简短的回答是使用样式。长答案如下：

Silverlight 2.0 数据网格中有两个样式属性可以解决您的问题。第一个是 CellStyle，第二个是 RowStyle。CellStyle 属性将删除当前选定单元格周围的浅蓝色突出显示。RowStyle 属性是您可以移除指示所选行的浅蓝色阴影的属性。我使用的 CellStyle 如下：

```
 <Style x:Key="CellStyle" TargetType="local:DataGridCell">
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="Cursor" Value="Arrow" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DataGridCell">
                    <Grid Name="Root" Background="Transparent">
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CurrentStates" >
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="0" />
                                </vsm:VisualStateGroup.Transitions>

                                <vsm:VisualState x:Name="Regular" />
                                <vsm:VisualState x:Name="Current" />
                                    <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="FocusVisual" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Rectangle Name="FocusVisual" Stroke="#FF6DBDD1" StrokeThickness="1" Fill="#66FFFFFF" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsHitTestVisible="false" Opacity="0" />
                        <ContentPresenter Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" Cursor="{TemplateBinding Cursor}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="{TemplateBinding Padding}" />
                        <Rectangle Name="RightGridLine" Grid.Column="1" VerticalAlignment="Stretch" Width="1" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

如果你注意到，我注释掉了改变 FocusVisual 矩形不透明度值的情节提要。这样做是将 FocusVisual 矩形设置为在单元格选择中显示。（请注意：您不能删除 FocusVisual 元素，因为 CellPresenter 需要此元素，找不到该元素会导致错误。）

我使用的 RowStyle 如下：

```
 <Style TargetType="local:DataGridRow" x:Key="MyCustomRow">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DataGridRow">
                    <localprimitives:DataGridFrozenGrid x:Name="Root">
                        <localprimitives:DataGridFrozenGrid.Resources>
                            <Storyboard x:Key="DetailsVisibleTransition" >
                                <DoubleAnimation Storyboard.TargetName="DetailsPresenter" Storyboard.TargetProperty="ContentHeight" Duration="00:00:0.1" />
                            </Storyboard>
                        </localprimitives:DataGridFrozenGrid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates" >
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="Normal AlternatingRow">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="0" />
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="MouseOver" />
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To=".5" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                                <vsm:VisualState x:Name="Normal Selected"/>
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="1" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                                <vsm:VisualState x:Name="MouseOver Selected"/>
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="1" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                                <vsm:VisualState x:Name="Unfocused Selected"/>
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="1" />
                                        <ColorAnimationUsingKeyFrames BeginTime="0" Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)">
                                            <SplineColorKeyFrame KeyTime="0" Value="#FFE1E7EC" />
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>-->
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <localprimitives:DataGridFrozenGrid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </localprimitives:DataGridFrozenGrid.RowDefinitions>
                        <localprimitives:DataGridFrozenGrid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </localprimitives:DataGridFrozenGrid.ColumnDefinitions>
                        <Rectangle x:Name="BackgroundRectangle" Grid.RowSpan="2" Grid.ColumnSpan="2" Opacity="0" Fill="#FFBADDE9"  />
                        <localprimitives:DataGridRowHeader Grid.RowSpan="3" x:Name="RowHeader" localprimitives:DataGridFrozenGrid.IsFrozen="True" />

                        <localprimitives:DataGridCellsPresenter x:Name="CellsPresenter" localprimitives:DataGridFrozenGrid.IsFrozen="True"/>

                        <localprimitives:DataGridDetailsPresenter Grid.Row="1" Grid.Column="1" x:Name="DetailsPresenter" />
                        <Rectangle Grid.Row="2" Grid.Column="1" x:Name="BottomGridLine" HorizontalAlignment="Stretch" Height="1" />
                    </localprimitives:DataGridFrozenGrid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

如您所见，我注释掉了更多的视觉状态。您需要注释掉 MouseOver VisualState 故事板、Normal Selected 故事板、MouseOver Selected 故事板和 Unfocused Selected 故事板。

（请注意：我并没有删除这些视觉状态，我只是注释掉了它们曾经做过的事情。）

这是我的完整代码供参考：（首先是 XAML，然后是 VB）

XAML：

```
<UserControl x:Class="DataGrid_Mouseover.Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:data="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"  
    xmlns:local="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data"
    xmlns:primitives="clr-namespace:System.Windows.Controls.Primitives;assembly=System.Windows"
    xmlns:localprimitives="clr-namespace:System.Windows.Controls.Primitives;assembly=System.Windows.Controls.Data"
    xmlns:vsm="clr-namespace:System.Windows;assembly=System.Windows">
<UserControl.Resources>

    <Style x:Key="CellStyle" TargetType="local:DataGridCell">

        <!-- TODO: Remove this workaround to force MouseLeftButtonDown event to be raised when root element is clicked. -->
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="Cursor" Value="Arrow" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DataGridCell">
                    <Grid Name="Root" Background="Transparent">
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CurrentStates" >
                                <vsm:VisualStateGroup.Transitions>
                                    <vsm:VisualTransition GeneratedDuration="0" />
                                </vsm:VisualStateGroup.Transitions>

                                <vsm:VisualState x:Name="Regular" />
                                <vsm:VisualState x:Name="Current" />
                                    <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="FocusVisual" Storyboard.TargetProperty="Opacity" To="1" Duration="0" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <!-- TODO Refactor this if SL ever gets a FocusVisualStyle on FrameworkElement -->
                        <Rectangle Name="FocusVisual" Stroke="#FF6DBDD1" StrokeThickness="1" Fill="#66FFFFFF" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsHitTestVisible="false" Opacity="0" />
                        <ContentPresenter Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" Cursor="{TemplateBinding Cursor}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="{TemplateBinding Padding}" />
                        <Rectangle Name="RightGridLine" Grid.Column="1" VerticalAlignment="Stretch" Width="1" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="local:DataGridRow" x:Key="MyCustomRow">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:DataGridRow">
                    <localprimitives:DataGridFrozenGrid x:Name="Root">
                        <localprimitives:DataGridFrozenGrid.Resources>
                            <Storyboard x:Key="DetailsVisibleTransition" >
                                <DoubleAnimation Storyboard.TargetName="DetailsPresenter" Storyboard.TargetProperty="ContentHeight" Duration="00:00:0.1" />
                            </Storyboard>
                        </localprimitives:DataGridFrozenGrid.Resources>
                        <vsm:VisualStateManager.VisualStateGroups>
                            <vsm:VisualStateGroup x:Name="CommonStates" >
                                <vsm:VisualState x:Name="Normal" />
                                <vsm:VisualState x:Name="Normal AlternatingRow">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="0" />
                                    </Storyboard>
                                </vsm:VisualState>
                                <vsm:VisualState x:Name="MouseOver" />
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To=".5" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                                <vsm:VisualState x:Name="Normal Selected"/>
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="1" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                                <vsm:VisualState x:Name="MouseOver Selected"/>
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="1" />
                                    </Storyboard>
                                </vsm:VisualState>-->
                                <vsm:VisualState x:Name="Unfocused Selected"/>
                                <!--<Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" Duration="0" To="1" />
                                        <ColorAnimationUsingKeyFrames BeginTime="0" Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)">
                                            <SplineColorKeyFrame KeyTime="0" Value="#FFE1E7EC" />
                                        </ColorAnimationUsingKeyFrames>
                                    </Storyboard>
                                </vsm:VisualState>-->
                            </vsm:VisualStateGroup>
                        </vsm:VisualStateManager.VisualStateGroups>
                        <localprimitives:DataGridFrozenGrid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </localprimitives:DataGridFrozenGrid.RowDefinitions>
                        <localprimitives:DataGridFrozenGrid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </localprimitives:DataGridFrozenGrid.ColumnDefinitions>
                        <Rectangle x:Name="BackgroundRectangle" Grid.RowSpan="2" Grid.ColumnSpan="2" Opacity="0" Fill="#FFBADDE9"  />
                        <localprimitives:DataGridRowHeader Grid.RowSpan="3" x:Name="RowHeader" localprimitives:DataGridFrozenGrid.IsFrozen="True" />

                        <localprimitives:DataGridCellsPresenter x:Name="CellsPresenter" localprimitives:DataGridFrozenGrid.IsFrozen="True"/>

                        <localprimitives:DataGridDetailsPresenter Grid.Row="1" Grid.Column="1" x:Name="DetailsPresenter" />
                        <Rectangle Grid.Row="2" Grid.Column="1" x:Name="BottomGridLine" HorizontalAlignment="Stretch" Height="1" />
                    </localprimitives:DataGridFrozenGrid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" Background="White">
    <local:DataGrid x:Name="TestGrid"
           HorizontalAlignment="Left" 
           VerticalAlignment="Bottom" 
           AutoGenerateColumns="False"
           HeadersVisibility="None"
           RowHeight="55"
           Background="Transparent"
           AlternatingRowBackground="Transparent"
           RowBackground="Transparent"
           BorderBrush="Transparent"
           Foreground="Transparent" 
           GridLinesVisibility="None" 
           SelectionMode="Single"
           CellStyle="{StaticResource CellStyle}" 
           RowStyle="{StaticResource MyCustomRow}">

        <local:DataGrid.Columns>
            <local:DataGridTemplateColumn Header="Clinic">
                <local:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <Button x:Name="btnClinic" 
                        Height="46" 
                        Width="580" 
                        Content="{Binding Path=Description}" 
                        Click="btnClinic_Click"
                        FontSize="24"
                        FontFamily="Tahoma"
                        FontWeight="Bold">
                            <Button.Background>
                                <LinearGradientBrush EndPoint="0.528,1.144" StartPoint="1.066,1.221">
                                    <GradientStop Color="#FF000000"/>
                                    <GradientStop Color="#FFEDC88F" Offset="1"/>
                                </LinearGradientBrush>
                            </Button.Background>
                        </Button>
                    </DataTemplate>
                </local:DataGridTemplateColumn.CellTemplate>
            </local:DataGridTemplateColumn>
        </local:DataGrid.Columns>
    </local:DataGrid>
</Grid>
</UserControl> 
```

VB：

```
Partial Public Class Page
Inherits UserControl

Public Sub New()
    InitializeComponent()
    Dim test As IList(Of String) = New List(Of String)
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")
    test.Add("test1")

    TestGrid.ItemsSource = test

End Sub

Private Sub btnClinic_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs)

End Sub
End Class 
```

希望这可以帮助。

谢谢，斯科特

# crystal-reports - Crystal Reports - 默认参数

> ID：382256
> 
> 赞同：1
> 
> 时间：2008-12-19T21:25:20.820
> 
> 标签：crystal-reports

在 Crystal 报表中，您可以定义报表参数的默认值。

例如，我可能有一个日期范围，并将默认开始时间设置为 2008 年 12 月 1 日和 2008 年 12 月 31 日的默认结束时间。

是否可以在运行时修改这些默认值？例如：

1 - 默认为当月的第一天和最后一天？

2 - 默认为专有公司财务日历的第一天和最后一天？（即，在数据库中查找）

3 - 今年的第一天和最后一天？

你明白了。这可能吗？我什至愿意接受涉及运行外部应用程序以访问报告并修改它们的解决方案，如果有人知道该怎么做的话。

编辑：

为了回答 Philippe Grondier 提出的问题，这些报告中的大多数都是从应用程序内部运行的。我希望有比在运行时操作水晶对象更简单的东西；我现在正忙着弄清楚该 API 的其他部分。不过，我将来可能会看看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T23:01:39.423

您打算从 Crystal Reports 界面运行 Crystal Reports 还是作为嵌入在另一个程序中的插件（例如，您可以使用 Crystal Reports ActiveX Designer 运行时支持 - craxdrt.dll - 在 VB 代码中）？在最后一种情况下，可以在启动报表之前操纵报表的每个对象。然后可以根据您的需要更新参数等对象。

作为此类运行时更新的一个简单示例，我的报表打印例程将始终检查报表中是否存在名为“printedBy”的字段。如果找到该字段，其值将被结算为请求报告的用户的域名，并将被打印出来。

在更高级别上，您甚至可以重塑报表 SQL 字符串以添加可以从您的代码继承的特定过滤器。通过这样做，您甚至可能不再需要参数：让您的代码“即时”添加过滤值

编辑：一些代码示例：

（m_rapport 是一个 CRAXDRT.report 对象，ActiveSession 是我当前的会话对象）

```
If m_rapport.ParameterFields.Count > 0 Then
    For i = 1 To m_rapport.ParameterFields.Count
        If m_rapport.ParameterFields(i).Name = "{?PUB_DateDebutPeriode}" Then
            m_rapport.ParameterFields(i).AddCurrentValue CDate(DateValue(sessionActive.dateDebutPeriode))
        End If
        If m_rapport.ParameterFields(i).Name = "{?PUB_DateFinPeriode}" Then
            m_rapport.ParameterFields(i).AddCurrentValue CDate(DateValue(sessionActive.dateFinPeriode))
        End If
        If m_rapport.ParameterFields(i).Name = "{?PUB_id_Personne}" Then
            m_rapport.ParameterFields(i).AddCurrentValue StringFromGUID(clientActif.id_Personne)
        End If
    Next i
Endif 
```

我还有另一个功能可以在运行时更改报告的数据源，以便可以在不同的服务器/位置上执行报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-18T13:56:27.477

Read my posting [Crystal Reports: Named-Date-Range Parameters](http://www.cogniza.com/blog/?p=18). Maybe you'll be able to leverage this technique for your purposes.

# c# - 用于在文本中搜索术语的 C# 代码/算法

> ID：382263
> 
> 赞同：4
> 
> 时间：2008-12-19T21:28:06.023
> 
> 标签：c#, .net, algorithm, search

我们有 5mb 的典型文本（只是简单的单词）。我们有 1000 个单词/短语可用作在本文中搜索的术语。

在 .NET（最好是 C#）中执行此操作的最有效方法是什么？

我们的想法包括正则表达式（一个，很多），甚至还有 String.Contains 的东西。

输入是 2mb 到 5mb 的文本字符串 - 所有文本。多次点击是好的，因为在每个匹配的术语（1000 个）中，我们确实想知道它。就整个执行时间而言的性能，不关心足迹。当前算法使用朴素的 string.contains 提供大约 60 秒以上的时间。我们不希望 'cat' 提供与 'category' 甚至是 'cats' 的匹配（即整个词词必须命中，没有词干）。

我们预计文本中的命中率 <5%。理想情况下，结果只是匹配的术语（还不需要位置或频率）。我们每 10 秒得到一个新的 2-5mb 字符串，所以不能假设我们可以索引输入。1000 个术语是动态的，尽管变化率约为每小时 1 次变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T22:18:34.143

一个幼稚的字符串。包含 762 个单词（最后一页）的 War and Peace (3.13MB) 对我来说大约需要 10 秒。切换到 1000 个 GUID 大约需要 5.5 秒。

Regex.IsMatch 在大约 0.5 秒内找到了 762 个单词（其中大部分可能也在前面的页面中），并在 2.5 秒内排除了 GUID。

我建议您的问题出在其他地方……或者您只需要一些不错的硬件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-20T10:05:00.520

Why reinvent the wheel? Why not just leverage something like [Lucene.NET](http://incubator.apache.org/lucene.net/)?

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T21:57:39.477

您是否考虑过以下问题：

1.  你关心子字符串吗？假设我正在寻找“猫”这个词，不多也不少。现在考虑 Knuth-Morris-Pratt 算法，或 string.contains 用于“连接”。这两个都将返回 true （或索引）。这个可以吗？

2.  此外，您还必须研究单词的词干或“有限”状态的概念。让我们再找“日记”，试句是“日记有很多种”。对你和我来说，我们有“日记”这个词，这算吗？如果是这样，我们将需要预处理句子，将单词转换为有限状态（日记 -> 日记），句子将变为“有多种日记”。现在我们可以说Diary 在句子中（请看porter Stemmer Algroithm）

3.  此外，在处理文本（又名自然语言处理）时，您可以将一些词作为噪音删除，例如“a, have, you, I, me, some, to” <- 这些可以被视为无用词，并且然后可以在进行任何处理之前删除吗？例如

“我今天写了一些 C#”，如果我有 10,000 个关键作品要查找，我将不得不扫描整个句子 10,000 x 句子中的单词数。事先去除噪音会缩短处理时间

“今天写的 C#” <- 消除了噪音，现在需要看的东西少了很多。

可以在这里找到一篇关于 NLP 的精彩文章。[句子比较](http://www.codeproject.com/KB/string/semanticsimilaritywordnet.aspx)

高温高压

骨头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T21:46:50.620

修改后的[Suffix 树](http://en.wikipedia.org/wiki/Suffix_tree)会非常快，尽管它会占用大量内存，而且我不知道构建它的速度有多快。然而，在那之后，每次搜索都需要 O(1)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T21:53:21.217

您是要获得匹配单词的列表，还是要在文本中突出显示它们以获得匹配位置的开始和长度？如果您要做的只是找出单词是否存在，那么您可以使用子集理论来相当有效地执行此操作。

但是，我希望您尝试每个匹配项在文本中的开始位置......在这种情况下，这种方法将不起作用。

我能想到的最有效的方法是使用列表动态构建匹配模式，然后使用正则表达式。维护包含 1000 个项目的列表比维护基于相同的 1000 个项目的正则表达式模式要容易得多。

据我了解，Regex 使用建议的相同 KMP 算法来有效处理大量数据 - 所以除非你真的需要深入了解它的工作原理（这可能有利于个人成长），否则 regex 可能会没事。

这里有一篇关于大文件中许多模式的搜索算法的非常有趣的论文：[http ://webglimpse.net/pubs/TR94-17.pdf](http://webglimpse.net/pubs/TR94-17.pdf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T21:55:38.137

这是另一个想法：创建一个像这样的类：

```
class Word
{
    string Word;
    List<int> Positions;
} 
```

对于文本中的每个唯一单词，您都创建了此类的一个实例。Positions 数组将存储从找到该单词的文本开始的位置（以单词而不是字符计数）。

然后再制作两个列表作为索引。一个将存储所有这些类按它们的文本排序，另一个 - 按它们在文本中的位置。本质上，文本索引可能是一个 SortedDictionary，而位置索引可能是一个简单的`List<Word>`.

然后要搜索一个短语，您将该短语拆分为单词。查找字典中的第一个单词（即 O(log(n))）。从那里你知道文本中跟随它的可能单词是什么（你从 Positions 数组中得到它们）。查看这些单词（使用位置索引在 O(1) 中找到它们）并继续，直到找到一个或多个完全匹配。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T22:11:51.100

这是瓶颈吗？多久时间？5 MiB 实际上并不是要搜索的大量数据。正则表达式可能会很好，特别是如果您使用交替将所有搜索字符串编码为*一种模式。*这基本上将搜索的总成本摊销到 O(n + m) ，其中 n 是文本的长度，m 是所有模式的总长度。请注意，这是一个非常好的表现。

[Wu Manber 算法](http://en.wikipedia.org/wiki/Agrep)是非常适合许多模式的替代方案。我已经发布了该算法的一个非常简单的[C++ 实现](https://stackoverflow.com/questions/154365/search-25-000-words-within-a-text#154410)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-19T22:41:15.987

好的，当前的返工显示这是最快的（伪代码）：

```
foreach (var term in allTerms)
{
    string pattern = term.ToWord(); // Use /b word boundary regex
    Regex regex = new Regex(pattern, RegexOptions.IgnoreCase);
    if (regex.IsMatch(bigTextToSearchForTerms))
    {                    
        result.Add(term);                                        
    }
} 
```

令人惊讶的是（至少对我来说！）运行正则表达式 1000 次比具有 1000 个替代项的单个正则表达式更快，即 "/b term1 /b | /b term2 /b | /b termN /b" 然后尝试使用 regex.Matches.Count

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-19T23:39:27.070

相比之下，这表现如何？它使用 LINQ，所以它可能会慢一点，不确定......

```
List<String> allTerms = new List<String>(new String(){"string1", "string2", "string3", "string4"});
List<String> matches = allTerms.Where(item => Regex.IsMatch(bigTextToSearchForTerms, item, RegexOptions.IgnoreCase)); 
```

这使用经典谓词来实现 FIND 方法，因此它应该比 LINQ 更快：

```
static bool Match(string checkItem)
{
  return Regex.IsMatch(bigTextToSearchForTerms, checkItem, RegexOptions.IgnoreCase);
}

static void Main(string[] args)
{
  List<String> allTerms = new List<String>(new String(){"string1", "string2", "string3", "string4"});
  List<String> matches = allTerms.Find(Match);
} 
```

或者这使用 lambda 语法来实现经典谓词，它应该比 LINQ 更快，但比以前的语法更具可读性：

```
List<String> allTerms = new List<String>(new String(){"string1", "string2", "string3", "string4"});
List<String> matches = allTerms.Find(checkItem => Regex.IsMatch(bigTextToSearchForTerms, checkItem, RegexOptions.IgnoreCase)); 
```

我还没有对它们中的任何一个进行性能测试，但是它们都使用正则表达式通过搜索列表实现了您的迭代想法。这只是实现它的不同方法。

# jboss - 将 Richfaces 升级到较新版本的性能优势

> ID：382267
> 
> 赞同：3
> 
> 时间：2008-12-19T21:29:25.773
> 
> 标签：jboss, seam, richfaces

我有一个运行基于 JBoss 4.0.5、Seam 1.2 和 RichFaces 3.0.1 的应用程序的客户端。他们的系统存在性能问题，因为大量数据从服务器返回以显示在屏幕上，而且看起来这些数据的渲染需要很长时间。带回的数据显示在选项卡式界面中，但选项卡当前不是单独加载，而是一次加载。

我正在尝试建立一个案例来向客户展示升级到从不版本的 RichFaces 的好处，据我了解，它添加了大量与选项卡式面板相关的功能，并且能够使用 ajax分页数据并加载您目前实际需要显示的块，而不是其他选项卡中的其余部分。

迁移到更新版本的 RichFaces 也将导致 Jboss 和 Seam 永远不会出现版本，因为 RichFaces 3.2.1 的当前生产版本需要 JSF 1.2。

如果有人对当前版本 RichFaces、分页等的性能有一些建议或经验，我将非常感谢一些反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-07T18:55:23.020

通过各种 Richfaces 版本进行升级，我并没有注意到性能有很大提高。您最好优化渲染中涉及的代码 - 例如检查代码是否被多次调用（就像将逻辑放在 getter 中的情况一样）。

我发现 Tobias Hill 在 Seam 论坛中概述的 bean-timing 拦截器 (@MeasureCalls) 非常棒 - 比针对特定问题的分析器更重要（如果你不知道从哪里开始寻找，可能更少）。它让我可以追踪那些调用频率超过所需的方法，并让我能够简化我的 bean。

论坛链接是：[http ://www.seamframework.org/Community/SeamPerformanceProblemRewardingWorkaround](http://www.seamframework.org/Community/SeamPerformanceProblemRewardingWorkaround)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-06T23:50:42.630

一个警告...我最近升级到 JBoss 5.1.0GA、JSF 1.2 等...以便我们的软件保持最新状态，但有一个缺点。JBoss 5 比 JBoss 4 使用显着更多的内存，并且启动时间更长。在尝试切换系统范围之前，您最好在一台机器上测试我们的新配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-02T16:02:19.640

使用分析器并为自己做。只有你有应用程序。只有您知道哪些组件组合是“慢”的。我认为您可以非常快速地为自己测量它。

ps 向我们展示结果,-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-06T15:58:04.343

我发现 JSF1.2 的 Apache 实现比 JSF1.0 的 Apache 实现要好得多。我使用了一点 RichFace 3.2，它看起来还不错，仍然有太多信息从客户端的 ajax 请求中发送，所以 RichFaces Ajax 的执行速度比手工制作的 AJAX 解决方案要慢得多，但在 RichFaces 中的代码要快得多。

# c++ - 使用编译器生成的赋值运算符安全吗？

> ID：382272
> 
> 赞同：3
> 
> 时间：2008-12-19T21:32:27.483
> 
> 标签：c++, mfc, variable-assignment

我正在使用 MFC 中的 CPoint 类。没有明确定义的赋值运算符或复制构造函数 (AFAIK)。然而，这有效：

```
C点 p1(1, 2), p2;
p2 = p1; // p2 现在等于 p1

```

我假设这是由于编译器生成的赋值运算符而自动工作的。正确的？

如果是这样，我可以确信这没有做任何意想不到的事情吗？在这种情况下，CPoint 非常简单，我认为一切都很好，但总的来说，这让我有点担心。这样做是否更好：

```
p2.SetPoint(p1.x, p2.x);

```

-cr

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T21:40:08.263

这是安全的——如果不打算提供赋值运算符，那么 MFC 设计者可以确保它不可用（例如，通过将其设为私有）。

IIRC 编译器将执行逐个成员的复制，因此对于像这样包含 POD 的类，您不会有问题。如果您有一个分配内存的类并且忽略覆盖 operator= 并执行深度复制，它可能会变得混乱。

FWIW 我问了一个关于编译器可以做什么和不能做什么的问题：

[为什么 C++ 编译器不定义 operator== 和 operator!=？](https://stackoverflow.com/questions/217911/why-dont-c-compilers-define-operator-and-operator)

一些答案使阅读变得有趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T21:41:38.323

查找默认的复制构造函数：

[http://www.fredosaurus.com/notes-cpp/oop-condestructors/copyconstructors.html](http://www.fredosaurus.com/notes-cpp/oop-condestructors/copyconstructors.html)

这不是 CPoint 的特别之处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-19T21:38:23.040

如果一个类是“简单的”，那么编译器生成的赋值运算符将起作用（按成员复制）。如果有一些成员需要更高级的逻辑（假设对象维护一个指向它所期望的私有缓冲区的内部指针），那么编译器生成的赋值运算符就会出现问题。`CPoint`只存储一个点的 x 和 y 坐标，所以你不应该遇到问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T21:38:33.023

我不知道 MFC，但我可以猜到（或者）：

*   CPoint 有一个定义的赋值运算符（所以不是编译器生成的），或者
*   编译器生成的赋值运算符在堆栈分配成员时起作用，因此它会按成员复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T21:41:04.220

内置的复制赋值操作符只是使用它们的复制赋值操作符依次复制每个成员。我假设 CPoint 不查看其文档是安全的（原因：如果不是，他们当然会提供自己的实现）。该点类应该只有两个成员（x 和 y），它们只是浮点数（或 int，取决于它的用途）。

有人说这是一个“浅拷贝”，因为只复制了成员的值。如果您有指针成员，则会复制指针值，而不是指针指向的对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T21:47:37.047

对于像 CPoint 这样的简单数据对象（您可以从 Visual Studio 安装中包含的 MFC 源代码中看到，它只是一个带有一些便利功能的 Win32 POINT 结构），使用编译器生成的赋值运算符没有任何问题。

但如前所述，默认赋值运算符是浅拷贝，如果结构包含指针（或包含包含指针但未定义赋值运算符的结构），则会给您带来麻烦。由于 CPoint 不符合该描述，因此它是安全的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T22:02:16.563

是的。如果你`operator=`在一个类上没有定义任何方法，编译器会为你生成一个方法，它只是简单地对类中的字段进行按位复制。我记得，`CPoint`is just `{int x; int y}`，所以按位复制就可以了。

# sql-server - 如何让 xp_pcre 在 64 位系统上运行？

> ID：382286
> 
> 赞同：0
> 
> 时间：2008-12-19T21:38:47.733
> 
> 标签：sql-server, regex

多年来，我们一直在 sql server 中使用 xp_pcre 进行正则表达式：

[xp_pcre - T-SQL 中的正则表达式](http://www.codeproject.com/KB/database/xp_pcre.aspx "xp_pcre - T-SQL 中的正则表达式")

我刚刚迁移到新的 64 位 vista 开发机器并安装了 xp pcre。不幸的是，当我尝试使用存储过程时，我收到以下错误：无法加载 DLL xp_pcre.dll 或它引用的 DLL 之一。原因：193（%1 不是有效的 Win32 应用程序。）。

有没有人在运行 vista 的 64 位机器上安装 xp_pcre 成功？有什么建议吗？在此先感谢，谢恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T22:01:31.167

由于它是一个已编译的 DLL，您可能必须重新编译它以获得一个 64 位 DLL，该 DLL 可以在您的 64 位机器上运行。由于该页面自 2005 年以来没有任何更新，因此不太可能已经存在 64 位的预构建版本。但是，由于包含源代码，如果您有 VS for C++，使用 64 位编译器，您可以自己编译它并尝试让它以这种方式工作。

# windows - 与 Windows Shell 集成

> ID：382291
> 
> 赞同：6
> 
> 时间：2008-12-19T21:40:53.143
> 
> 标签：windows, windows-shell, shell-extensions

好的，

我想创建一个位于文件菜单中的 Windows shell 扩展，就像“Tortorise SVN”菜单一样。

有谁知道我从哪里开始，一篇好文章，或者要实现哪些接口？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-19T21:48:55.157

实际上这很简单。这是一个3-4步的过程。您没有指定您使用的语言。

以下是如何在本机代码中执行此操作：

[http://www.kbcafe.com/articles/HowTo.Shell.pdf](http://www.kbcafe.com/articles/HowTo.Shell.pdf)

以下是使用 .NET 的方法。请注意，它本质上与使用本机代码执行此操作相同。

[http://www.theserverside.net/tt/articles/showarticle.tss?id=ShellExtensions](http://www.theserverside.net/tt/articles/showarticle.tss?id=ShellExtensions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T22:27:01.087

啊...外壳扩展...如果它们很复杂，它们可能会让人头疼，但是您可以做很多整洁的事情。一个很好的起点是 codeproject.com 上 Mike Dunn 的[Complete Idiot's Guide To Writing Shell Extensions](http://www.codeproject.com/KB/shell/shellextguideindex.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T22:28:50.053

O'Reilly 有一本名为[VB Shell Programming](https://rads.stackoverflow.com/amzn/click/com/1565926706)的书，它深入探讨了 API。正如标题所暗示的，它是针对 Visual BASIC 的，但是 API 是通过 COM 公开的，并且书中讨论的技术几乎适用于任何支持 COM 的东西。快速浏览一下 Amazon.com 表明您可能花几美元就能买到一本二手书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-20T11:39:46.727

避免 codeproject（对于孩子们，充满错误）并阅读 SNE 上 MSDN 的完整文档。

# audio - 使用 Windows Media Encoder 以编程方式将 wma 转换为 wav

> ID：382299
> 
> 赞同：4
> 
> 时间：2008-12-19T21:43:19.987
> 
> 标签：audio, wma, windows-media-encoder

有没有人使用 Windows Media Encoder 将 WMA 转换为 WAV？如果是这样，您是否有一个简短的代码片段来说明您是如何做到的？我见过的所有样本都是 WAV 到 WMA，而不是相反。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-22T10:42:43.517

您看到的所有示例都是针对 WAV 到 WMA 的原因是您正在查看 Windows Media **Encoder**。您想将WMA**解码**为 WAV。请查看[Windows Media Format SDK](http://msdn.microsoft.com/en-us/library/aa387410.aspx)。

# jquery - Jquery Accordion 关闭然后打开

> ID：382301
> 
> 赞同：11
> 
> 时间：2008-12-19T21:45:11.857
> 
> 标签：jquery, jquery-plugins, accordion

我使用 jquery 手风琴插件在页面上设置了许多手风琴，因此我可以实现全部展开和折叠所有功能。

每个 ID 元素都是它自己的手风琴，下面的代码可以将它们全部关闭，无论哪些已经打开：

```
$("#contact, #address, #email, #sales, #equipment, #notes, #marketingdata")
    .accordion("activate", -1)
; 
```

我的问题是全部展开。当我让它们都用这段代码展开时：

```
$("#contact, #address, #email, #sales, #equipment, #notes, #marketingdata")
    .accordion("activate", 0)
; 
```

有些会收缩，有些会根据它们之前是否开放而扩展。

我纠正这个问题的想法是将它们全部折叠，然后在单击全部展开时将它们全部展开。但是，此代码将无法正确执行：

```
$("#contact, #address, #email, #sales, #equipment, #notes, #marketingdata")
    .accordion("activate", -1)
;
$("#contact, #address, #email, #sales, #equipment, #notes, #marketingdata")
    .accordion("activate", 0)
; 
```

它只会点击第二个命令，而不是先关闭它们。有什么建议么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-12-20T03:03:11.683

我不确定你在追求什么，但这是我最好的猜测。在所有手风琴中，您希望“全部打开”按钮打开所有关闭的手风琴（即，不显示任何部分）。我会通过使用来做到这一点`filter()`

```
$("#contact, #address, #email, #sales, #equipment, #notes, #marketingdata")
    .filter(":not(:has(.selected))")
    .accordion("activate", 0)
; 
```

那是你所追求的吗？

* * *

编辑以解释该过滤器功能：

过滤器功能只是通过过滤器运行您当前的选择，删除任何不匹配的内容。它有两种不同的形式：一种是你传递一个常规的 jQuery 查询，就像我上面所做的那样，另一种是你可以定义一个函数来过滤。如果函数返回 false，则删除该元素。

在这种情况下，查询会删除任何不 ( `:not`) 具有 ( `:has`) 具有“已选择”类 ( ) 的子项的内容`.selected`。我在`.selected`这里使用了选择器，因为这是手风琴添加到当前打开的面板的内容。

如果您只有一个手风琴，或者您为每个手风琴指定了某种标识符，例如类名，那么您可以大大减少整个脚本。假设对于您想要变成手风琴的每个元素，您给它一个类“accord”。

```
$(".accord:not(:has(.selected))").accordion("activate", 0); 
```

这更加清晰和可维护，因为如果您愿意，将来可以轻松添加更多手风琴，这将处理它。

过滤器的文档在这里：[http ://docs.jquery.com/Traversing/filter](http://docs.jquery.com/Traversing/filter)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-10-22T20:40:05.797

```
jQuery('#accordion').accordion({        
    active:-1,
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-09T05:37:52.007

我遇到了同样的问题，并通过一些短代码解决了这个问题，该代码利用 JQuery 的 each() 函数来折叠，同时将焦点设置为项目 [0]，以便可以恢复正常导航。

[http://spstring.jeffthink.com/?p=49](http://spstring.jeffthink.com/?p=49)

# javascript - 这个 Javascript 代码是什么导致它在 IE 中正确生成表？

> ID：382307
> 
> 赞同：0
> 
> 时间：2008-12-19T21:46:59.823
> 
> 标签：javascript, internet-explorer, html-table

这个源代码是什么导致它在 IE 中实际生成一个表，而不是什么都不做。

```
 function generateATable()
        {
            tableContainer = document.getElementById("tableDiv");
            var tableElement = document.createElement("table");

            // Append the Table Element to the table 
            // container.
            tableContainer.appendChild(tableElement);

            // IE Requires a TBODY when dynamically generating 
            // tables.  (I thought this was it but apparently it isn't)
            var tbodyElement = document.createElement("tbody");

            // First we'll append the tbody.
            tableElement.appendChild(tbodyElement);

            var trElement1 = document.createElement("tr");

            // Next we'll append the first trElement to the 
            // tbody.
            tbodyElement.appendChild(trElement1);

            var aaCell = trElement1.insertCell(-1);
            var abCell = trElement1.insertCell(0);

            var textNodeAA = document.createTextNode("AA");
            var textNodeAB = document.createTextNode("AB");

            aaCell.appendChild(textNodeAA);
            abCell.appendChild(textNodeAB);

            tbodyElement.appendChild(trElement1);

            var baCell = trElement1.cells[0].cloneNode(false);
            var bbCell = trElement1.cells[1].cloneNode(false);

            var textNodeBA = document.createTextNode("BA");
            var textNodeBB = document.createTextNode("BB");

            trElement2 = trElement1.cloneNode(false);

            tbodyElement.appendChild(trElement2);

            baCell.appendChild(textNodeBA);
            bbCell.appendChild(textNodeBB);

            trElement2.appendChild(baCell);
            trElement2.appendChild(bbCell);

            tableElement.style.border="4px solid black";

        } 
```

* * *

我很抱歉...这是其他问题...创建表格的数据没有填写，投票支持每个人...对不起！...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-19T21:50:43.420

```
 tableContainer = document.getElementById("tableDiv");
                    var tableElement = document.createElement("table");

                    // Append the Table Element to the table 
                    // container.
                    tableContainer.appendChild(tableElement); 
```

就是这样。其余的实际上是填充表格。

我们在现有的 HTML 文档中找到一个名为“tableDiv”的 div，然后我们创建一个 <table> 元素，并将其添加到 tableDiv。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-19T21:53:14.023

创建可以在页面上看到的表包括两个步骤 - 创建表节点：

```
var tableElement = document.createElement("table"); 
```

…并将其添加为文档中节点的子节点：

```
tableContainer = document.getElementById("tableDiv");
tableContainer.appendChild(tableElement); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T21:52:00.000

```
document.createElement("table")
  ...
tableContainer.appendChild(tableElement); 
```

这会向 DOM 添加一个元素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-19T21:55:26.017

我不确定您为什么要对所有回答正确的人投反对票。您想要逐行描述代码的作用吗？

```
function generateATable() {
    /* obtain a reference to a div */
    tableContainer = document.getElementById("tableDiv");
    /* create a table element */
    var tableElement = document.createElement("table");

    // Append the Table Element to the table 
    // container.
    /* append the table element to the div */
    tableContainer.appendChild(tableElement);

    // IE Requires a TBODY when dynamically generating 
    // tables.  (I thought this was it but apparently it isn't)
    /* create a tbody element */
    var tbodyElement = document.createElement("tbody");

    // First we'll append the tbody.
    /* append the tbody element to the table element */
    tableElement.appendChild(tbodyElement);

    /* create a row element */
    var trElement1 = document.createElement("tr");

    // Next we'll append the first trElement to the 
    // tbody.
    /* append the row element to the tbody element */
    tbodyElement.appendChild(trElement1);

    /* insert two cells */
    var aaCell = trElement1.insertCell(-1);
    var abCell = trElement1.insertCell(0);

    /* create two text nodes */
    var textNodeAA = document.createTextNode("AA");
    var textNodeAB = document.createTextNode("AB");

    /* append the text nodes to the cells */
    aaCell.appendChild(textNodeAA);
    abCell.appendChild(textNodeAB);

    /* append the row element to the tbody element ... again */
    tbodyElement.appendChild(trElement1);

    /* create two new cells that are shallow copies of the two cells above */
    var baCell = trElement1.cells[0].cloneNode(false);
    var bbCell = trElement1.cells[1].cloneNode(false);

    /* create two more text nodes */
    var textNodeBA = document.createTextNode("BA");
    var textNodeBB = document.createTextNode("BB");

    /* create a row element that is a shallow copy of the first row */
    trElement2 = trElement1.cloneNode(false);

    /* append the 2nd row element to the tbody element */
    tbodyElement.appendChild(trElement2);

    /* append the text nodes to the cells */
    baCell.appendChild(textNodeBA);
    bbCell.appendChild(textNodeBB);

    /* append the cells to the 2nd row element */
    trElement2.appendChild(baCell);
    trElement2.appendChild(bbCell);

    /* set the border style of the table element */
    tableElement.style.border="4px solid black";
} 
```

# php - 如果我总是用 PHP 控制我的数据库输入，那么像 NOT NULL 和 FOREIGN KEY 这样的约束有多重要？

> ID：382309
> 
> 赞同：23
> 
> 时间：2008-12-19T21:47:46.890
> 
> 标签：php, mysql, constraints

我正在尝试在作为外键的表中创建一个列，但在 MySQL 中这比它应该的要困难。这将需要我返回并对已使用的表进行某些更改。所以我想知道，**MySQL 是否有必要确保某个值是合适的？难道我不能只用像 PHP 这样的语言来做到这一点吗，无论如何我都用它来访问这个*数据库*？**

与 NOT NULL 类似。如果我只用 PHP 访问这个数据库，我不能简单地让 PHP 确保没有输入空值吗？

**为什么我应该使用 MySQL 来强制执行这些约束，而我可以使用 PHP 来做到这一点？**

* * *

由于上述原因，我意识到 NOT NULL 是一个非常愚蠢的部分。但是 MySQL 不会强制执行外键，除非有严重程度的胡闹。

在您看来，使用“假”外键并简单地检查要输入的值是否在其他表中与 PHP 匹配是否仍然很糟糕？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2008-12-19T21:54:24.553

你*会*在 PHP 上犯错，100% 保证。PHP 是程序化的。你想要的是声明性约束。你想告诉整个堆栈：“这些是对数据的约束，不能违反这些约束。” 作为对数据实施约束的方法，您不想过多使用“步骤 1 ... 步骤 2 ... 步骤 3 ... 步骤 432 ...”，因为

*   你会弄错的
*   当你以后改变它时，你会忘记你现在所做的
*   没有人会像你现在知道的那样知道所有这些隐含的约束，包括你未来的自己
*   需要大量代码才能始终正确地强制执行约束 - 数据库服务器已经拥有此代码，但您准备好编写它了吗？

这个问题的措辞实际上应该是“为什么我应该使用 PHP 来强制执行这些约束，而我可以只使用 MySQL 来做到这一点？”

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-12-19T21:58:19.707

你不能“仅仅”用[PHP](http://en.wikipedia.org/wiki/PHP)来做这件事，就像程序员“只是”不能写出没有错误的代码一样。这比你想象的要难。特别是如果你认为这并不难。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-19T21:57:05.403

如果你可以发誓你的生命不会*通过*任何其他方式访问数据库，那么你的（当然是无错误的）PHP 页面，那么单独使用 PHP 就可以了。

由于现实世界的场景总是包含一些不确定性，因此最好让数据库服务器监视数据的完整性。

对于简单的数据库，参照完整性约束可能不是绝对的要求，而是一个不错的选择。应用程序越复杂，您从中获得的好处就越多。尽早计划它们会使您以后的生活更轻松。

此外，引用完整性是迫使您以更加按部就班的方式设计数据库的一部分，因为并非所有肮脏的黑客行为都成为可能。这也是一件好事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-19T21:54:25.097

它们非常重要。您不想完全通过 PHP 定义模型。如果您的 PHP 代码中有错误怎么办？您可以轻松地在您的业务规则声明不应该的地方设置空列。通过在数据库级别定义它，您至少可以免费获得该检查。当您的 PHP 中存在错误或任何其他工具曾经使用您的数据库时，您会非常讨厌它。你只是在问问题，恕我直言。

请注意，这是故事的非常简短的版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-19T21:56:18.247

在数据库中实现约束很重要，因为无法预测未来！你永远不知道你的要求什么时候会改变。

还要考虑您可能有多个开发人员在同一应用程序上工作的可能性。您可能知道所有限制是什么，但初级开发人员可能不知道。由于数据库受到限制，初级开发人员的代码会产生错误，他会知道需要修复一些问题。没有约束，代码可能不会失败，数据可能会损坏。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-12-19T23:09:30.843

我通常赞成在数据库中声明约束。约束的参数：

*   声明式代码比命令式代码更容易消除错误。即使应用程序代码包含错误，也会强制执行约束。
*   支持“不要重复自己”原则，如果您有多个应用程序或代码模块访问同一个数据库，并且您需要统一执行业务规则。如果您需要更改约束，即使您有许多应用程序，也可以在一个地方完成。
*   即使人们试图绕过应用程序，也可以强制数据完整性，使用临时查询工具修改数据库。
*   强制*一致性*，这意味着您始终可以确定数据在任何数据更新之前和之后都处于有效状态。如果您不使用约束，您可能需要运行定期查询来检查损坏的引用并清理它们。
*   您可以使用约束轻松建模级联更新/删除。在应用程序代码中做同样的事情既复杂又低效，不能原子地应用更改（尽管建议使用事务隔离），并且容易出现错误。
*   约束有助于数据库更加自我记录，就像列名和 SQL 数据类型有帮助一样。

反对约束的论点：

*   更复杂的业务规则无法通过声明性约束建模，因此无论如何您都必须在应用程序空间中实现一些。鉴于此，为什么不在一个地方（您的应用程序）并以相同的语言实现所有业务规则？这使得调试、测试和跟踪代码修订变得更加容易。
*   约束通常涉及索引，这会在插入/更新期间产生一些开销。另一方面，即使您不声明约束，您也可能无论如何都需要索引，因为该列可能经常用于搜索条件或连接条件。
*   约束可能会使您尝试“清理”数据中的错误变得复杂。
*   在您当前的项目中，MyISAM 与 InnoDB 在引用约束方面的不兼容导致了一些问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-19T22:00:28.830

对我来说，使用 NOT NULL 最重要的是文档部分。几个月后我返回项目时，我忘记了哪些列可以包含空值。如果该列显示 NOT NULL，那么我知道我永远不必处理其中的潜在空值。如果它允许为空，那么我肯定知道我必须处理它们。

另一件事是，正如其他人所指出的：您可能会在某处遗漏某些东西，清理数据很糟糕，或者可能完全不可能。最好确定数据库中的所有数据都是一致的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-19T22:02:37.920

在 MySQL 中启用这些约束几乎需要零时间。如果由于错误的 PHP 或其他代码，它们甚至可以使您免于一个错误，那不值得吗？

请记住，您将从中拯救自己的各种错误可能非常令人讨厌。查找和修复错误本身可能并不难；令人讨厌的是，一旦你修复了这个错误，你就会留下一堆甚至可能无法挽救的错误数据。

我什至不会从“好吧，有朝一日 PHP 以外的东西可能会访问您的数据”的角度来解决这个问题。确实如此，但在我看来，更重要的是头痛、时间（金钱）和数据丢失，您只需添加一些简单的约束即可节省您自己。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-19T22:03:28.963

将数据库用于结构数据完整性，其余部分使用 BR 层。并尽早发现错误。他们一起工作。

幸运的是，当您的代码成熟时，您不会遇到数据库 RI 错误；你可以自豪地宣布自己是第一个。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-22T07:04:25.843

让您的数据层通过约束强制执行数据一致性有助于确保您的数据保持一致，并在您的应用程序中提供廉价的运行时错误检查。

如果您认为约束不值得，那么您要么拥有一个小型/非关键任务系统，要么您正在放弃提高系统质量的**巨大机会。**这不能被低估。

选择包括：选择不同的 RDBMS、重新发明您自己的元数据系统或手动管理约束。随着模式/系统复杂性的增长以及不必要地使不断发展的模式复杂化，在没有元数据系统的情况下手动管理查询很快变得无法正确维护和审计。

我的建议是选择不同的 RDBMS。

一致性检查比您想象的要困难得多。例如 MySQL 使用事务读取一致性，这意味着您检查的值可能与另一个事务范围内的值不同。如果不直接绑定到数据层，则并发访问的一致性语义非常难以正确。

当一切都说完了，即使在人工检查上投入了少量的努力，可能的结果是，人们仍然能够驾驶卡车通过你没有考虑到或在成型时犯了错误的极端情况。

关于您的 NOT NULL 问题...明显的数据字段要求是一个很好的起点。以下是定义列可空性时要考虑的其他几件事。

它提供了一种保证，在编写查询时非常有用。各种连接可以使用 NULL 条件来显示与 NULL 值分开的表行的不匹配，如果条件允许空值，则不能假定该值。（如果允许 NULL，则匹配可能意味着行不匹配或行匹配但列值为空。）

NOT NULL 的使用还有助于为更简单的查询匹配值定义规则。由于如果 value1 和 value2 都为 NULL，则您不能说“WHEN value1 = value2”，因此评估结果仍然是错误的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-07-25T10:58:51.377

即使您的 PHP 代码完全没有错误，它也可能会在脚本中间停止（内存不足错误、某些库中的段错误等），在数据库中留下一半插入的内容，因此使用 InnoDB 和事务非常重要。

约束也一样，当然你应该有适当的表单验证，以及它背后的数据库约束来捕捉错误。

数据库约束很容易指定，在应用程序中查找错误很困难，没有约束就更难了。

我的经验是，约束不当的数据库，以及任何使用 MyISAM 的东西，在使用几个月后都会有不一致的数据，而且很难找到它的来源。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-19T22:16:44.850

1.  我认为您不能确定您的数据库只能由 PHP 访问，如果是这样，开发人员将使用它来尊重数据库整个生命周期的这些约束。

2.  如果您在架构中包含这些约束，则可以通过调查您的架构来很好地了解数据是如何使用和关联的。如果您只将所有这些都放在代码中，那么有人将不得不同时查看数据库和 PHP 代码。

*但是这些东西不应该在设计文档、数据字典和逻辑数据库设计中吗？*

是的，但这些文件因过时和陈旧而臭名昭著。我知道*你*永远不会允许这种情况发生，但是一些有经验的项目经验较少的人可能会认为你的项目是这样的，并且想要查阅实际的代码和架构而不是文档。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-19T22:34:53.317

我非常感谢您的问题，因为我深信默认值规则应该在代码端实现，而不是在数据库端实现，原因很简单：当用户是发起数据库更改的人时（ INSERTS、SELECTS 和 UPDATES），这些变化应该整合所有的业务规则，默认值基本上是业务规则：

*   没有发票号码就没有发票
*   没有没有数量的发票行，不接受 0 或 null
*   没有接收日期就没有收到的邮件
*   ETC

几年前，我们决定摆脱所有这些“数据库端”的人工制品，如“not null”、“（不允许）允许空字符串”和其他“默认值”技巧，并且效果很好。支持默认值的参数主要是指一种“安全”原则（“在数据库端这样做，因为你会在代码端忘记它/你的语言不是为此而设计的/这样做更容易在数据库端”）一旦您选择不在数据库端实现任何默认值就没有任何意义：只需在调试时检查您的业务规则是否正确实现。

在过去的 2 年里，团队中没有人想过在表中声明一个默认值。我猜我们年轻的实习生***甚至不知道***所谓的“默认值”。

编辑：在这里重读一些答案，我的最后评论是：在任何方面做，无论是数据库还是代码，但做出你的选择，只做一面！没有什么比在双方都有这样的控制更危险的了，因为最终（1）你永远不会知道双方是否真的在执行相同的规则，这意味着（2）检查规则将意味着检查双方，这真的可以变得一团糟！最坏的情况当然是当一部分工作在数据库端完成（即创建数据库时确定的规则）而另一部分（即新确定的规则）在客户端完成......噩梦……

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-22T05:24:36.420

恐怕这是一个宗教话题。

从纯粹的角度来看，您希望数据库具有参照完整性。当您有多个应用程序访问数据库时，这是理想的，因为约束在一个地方。不幸的是，现实世界并不理想。

如果您必须强制执行某种参照完整性，根据我的经验，您的应用程序将需要知道如何执行此操作。这与它是否是最终仲裁者无关，或者数据库也会对其进行检查。即使数据库*确实*做到了引用完整性，那么应用程序也必须知道如果数据库拒绝更新该怎么办，因为引用完整性会被违反......

作为旁注，设置 MySQL 以支持外键约束是一个过程，因为您需要转移到[InnoDB](http://en.wikipedia.org/wiki/InnoDB)。如果你这样做*，*你可以通过设置为 1 来获得很多性能`innodb_flush_log_at_tx_commit`。但如果你可以重新设计你的站点以支持事务，那可能会更好。然后你会得到 InnoDB 的两个好处。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-23T13:41:43.823

在数据库级别实现默认值和约束；将导致任何消费应用程序可接受的数据的规则。这使您免受完整性问题的影响。

然后，在应用程序级别实现更好的默认值和约束。如果您在技术上被禁止（*访问数据库外部的 API*）实现约束或在数据库级别生成默认值，那么您需要在应用程序中执行此操作。这将产生*更好*的默认值。但是，应用程序的段错误或一般故障不会导致不可接受的数据被持久化。

# java - java web 启动 JAVA_HOME

> ID：382317
> 
> 赞同：5
> 
> 时间：2008-12-19T21:53:01.590
> 
> 标签：java, java-web-start

我有一个使用 java web start 启动 Swing gui 的应用程序。用户安装了 4 个版本的 java 1.6（1.6.0.3、1.6.0.5、1.6.0.7\. 1.6.0.11）

Webstart 正在选择 java 版本 1.6.0.11，但 JAVA_HOME 设置为 java 版本 1.6.0.3。这会对 webstart 造成任何潜在问题吗？

*   富有的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T12:53:32.833

在[此线程](http://forums.sun.com/thread.jspa?threadID=5282583)中，提到了一个 Java Web Start 应用程序检查此路径中可用 JRE 的版本：

```
C:\Documents and Settings\[User]\Application Data\Sun\Java\Deployment\deployment.properties
(for Windows XP)

C:\Users\[User]\AppData\LocalLow\Sun\Java\Deployment\deployment.properties
(for Windows Vista) 
```

在其中，行如下：

```
deployment.javaws.jre.0.path=C\:\\Program Files\\Java\\jre6\\bin\\javaw.exe
deployment.javaws.jre.0.product=1.6.0_11 
```

被发现。

我相信 JWS 将从这些设置开始，而不是来自`JAVA_HOME`变量的设置，这应该不是问题。

如此[处详述](http://java.sun.com/j2se/1.5.0/docs/guide/deployment/deployment-guide/properties.html)，

> 该**`deployment.properties`**文件用于在 Java 控制面板中存储和检索部署配置属性。它们**还用于自定义 Java Plug-in 和 Java Web Start 的运行时行为**。
> 
> 总是有一个用户级`deployment.properties`文件。它的位置是不可配置的，如下所述。也可能有一个（可选的）系统级`deployment.properties`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-19T21:56:52.707

看看里面的 jave web start 脚本。他们可能在其中有自己的 JRE 或 JDK 路径。用户甚至可能正在使用上面列表中未列出的版本。这通常是为了便于最终用户安装。

希望你找到解决办法。

# c# - log4net 和 system.data.sqlite

> ID：382336
> 
> 赞同：5
> 
> 时间：2008-12-19T21:59:04.590
> 
> 标签：c#, visual-studio-2008, sqlite, log4net

有谁知道如何设置 log4net 以使用 system.data.sqlite 提供程序的一个很好的例子？

我最近一直在玩它，我认为我已经完成了所有工作。它成功连接到数据库并将其“写”出。但是，当我查看表数据时，它实际上从未提交日志。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-09-02T18:32:39.257

确保您设置了以下引用：

*   log4net（显然）
*   System.Data.SQLite（你可能会忘记这个）

在 Visual Studio 中关闭项目并在文本编辑器中重新打开 .csproject（或 VB 等效项目），然后查找参考部分。我的看起来像这样：

```
<Reference Include="log4net, Version=1.2.10.0, Culture=neutral, PublicKeyToken=1b44e1d426115821, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\..\..\..\externals\log4net-1.2.10\bin\net\2.0\release\log4net.dll</HintPath>
</Reference>
<Reference Include="System" />
<Reference Include="System.Core">
  <RequiredTargetFramework>3.5</RequiredTargetFramework>
</Reference>
<Reference Include="System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139, processorArchitecture=x86">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\..\..\..\externals\sqlite.net\System.Data.SQLite.dll</HintPath>
</Reference> 
```

请注意 SQLite 的参考。在这种情况下，您需要以下文本：`System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139`这是承载 ADO.net 兼容 sql 连接类的程序集的全名，这实际上是 log4net 所依赖的。

在 Visual Studio 中重新打开您的项目，确保您有 .config 文件并在 XML 文本编辑器中打开它。在这里粘贴我的配置文件比解释所有内容要容易得多。请注意，您将在此处使用程序集名称。

将其放在 configSections XML 节点中：

```
 <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" /> 
```

作为配置的直接 XML 子节点，放置这个 XML 部分：

```
<log4net>
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
        <layout type="log4net.Layout.PatternLayout">
            <conversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline" />
        </layout>
    </appender>
    <appender name="sqlite" type="log4net.Appender.AdoNetAppender">
        <bufferSize value="100" />
        <connectionType value="System.Data.SQLite.SQLiteConnection, System.Data.SQLite, Version=1.0.65.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
        <connectionString value="Data Source=log4net.db;Version=3;" />
        <commandText value="INSERT INTO Log (Date, Level, Logger, Message) VALUES (@Date, @Level, @Logger, @Message)" />
        <parameter>
            <parameterName value="@Date" />
            <dbType value="DateTime" />
            <layout type="log4net.Layout.RawTimeStampLayout" />
        </parameter>
        <parameter>
            <parameterName value="@Level" />
            <dbType value="String" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%level" />
            </layout>
        </parameter>
        <parameter>
            <parameterName value="@Logger" />
            <dbType value="String" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%logger" />
            </layout>
        </parameter>
        <parameter>
            <parameterName value="@Message" />
            <dbType value="String" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%message" />
            </layout>
        </parameter>
    </appender>
    <root>
        <level value="ALL" />
        <appender-ref ref="ConsoleAppender" />
        <appender-ref ref="sqlite" />
    </root>
</log4net> 
```

作为最后一步，您必须确保您指定的 sqlite db 文件预先存在于指定位置。一种方法是创建数据库并将其作为要复制到输出文件夹的资源附加。确保它与您指定的名称相同（在这种情况下`log4net.db`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-16T18:58:58.530

我今天也在搜索同样的东西，发现[http://sqlite.phxsoftware.com/forums/t/1667.aspx](http://sqlite.phxsoftware.com/forums/t/1667.aspx)

这是一个成功使用 System.Data.SQLite ADO 提供者的示例配置（而不是官方 apache 文档中记录的另一个）。

希望它能引导你朝着正确的方向前进。

# c# - 使用线程时是否需要锁定“只读”服务？

> ID：382344
> 
> 赞同：1
> 
> 时间：2008-12-19T22:01:07.690
> 
> 标签：c#, multithreading

我有一项服务，我正在重写以使用线程。我知道来自一个线程的状态不应该被另一个线程访问，但是我对什么构成“状态”有点困惑。这是否意味着方法范围之外的*任何字段/属性/方法？*

具体来说，我的服务看起来像这样：

```
public class MyService
{
      private IRepository<MyClass> repository;
      private ILogger log;
      ...
      public void MyMethod()
      {
        ...
        var t = new Thread(MyMethodAsync);
        t.Start(someState);
      }

      //Is this OK???
      public void MyMethodAsync(object state)
      {
          var someState = (MyState)state;
          log.Log("Starting");
          var someData = repository.GetSomeData(someState.Property);
          //process data
          log.Log("Done");            
      }

      //Or should I be doing this:
      public void MyMethodAsync2(object state)
      {
          var someState = (MyState)state;
          lock(log){
             log.Log("Starting");  }

          lock(repository){         
             var someData = repository.GetSomeData(someState.Property);}

          //process data   
          lock(log){
             log.Log("Done"); }            
      }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T22:04:32.020

“状态”是类中包含的所有数据，就并发而言，真正的问题是写访问，所以你的直觉是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-19T22:15:39.970

呃...不，您不需要锁定只读资源。锁定它们的目的是，如果您需要在写入资源之前检查它的值，那么另一个资源不能在您的读取和写入之间更改值。IE：

```
SyncLock MyQueue
  If MyQueue.Length = 0 Then
    PauseFlag.Reset
  End If
End SyncLock 
```

If we were to check the length of our queue before we set the flag to pause our process queue thread and then another resource were to add an item to the queue, then our process queue thread would sit in a paused state while an item potentially could've been added between checking the queue length and setting the pause flag...

If all resources are only accessing the queue in a read only fashion (not that I could think of a single useful application of a read-only queue) then there's no need to lock it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T22:23:02.997

Even worse, locking read-only structures is a good way to create deadlocks.

# eclipse - 如何设置 Eclipse 以将 ssh-agent 用于 cvs？

> ID：382353
> 
> 赞同：5
> 
> 时间：2008-12-19T22:03:50.337
> 
> 标签：eclipse, ssh, cvs

问这个问题的几种方法：

*   如何让 eclipse 使用我的 ssh-config？
*   如何让 eclipse 使用 /usr/bin/ssh 而不是内部实现？（我不完全确定它确实如此，但它不会读取 .ssh/config 中的主机条目）

这是我尝试过的：

*   在eclipse启动的环境中有CVS_ROOT（我被要求输入用户名和密码，我知道这个设置适用于命令行cvs）
*   使用连接类型 ext 创建一个新的存储库位置（消息：从 cvs 服务器收到未知响应：）
*   同样，使用 extssh （错误：找不到主机，这意味着 .ssh/config 没有被读取，我指的是那里定义的主机别名）
*   相同，但是使用服务器的 dns 名称，这次我被要求输入 id_rsa 文件的密码，所以 eclipse 似乎知道我的 ssh 设置的至少部分。passphrase-dialog 来自 eclipse，而不是通常的 ssh-agent-dialog。

我在 ubuntu 08.10 上使用 eclipse 3.4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-13T10:53:19.643

我希望您已经在 Windows --> Preferences 中查看过 SSH。

我在 Eclipse 中使用了 ssh。IIRC，我需要在其中添加一个密钥

*   窗口 --> 首选项 --> 常规 --> 网络连接 --> SSH2。

您还可以更改用于 SSH 的程序（例如，您不信任 SSH 的 Java 实现）

*   窗口 --> 首选项 --> 团队 --> CVS --> 外部连接方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:12:33.313

Eclipse 可以像这样使用 ssh-agent：

1.  Window / Preferences / Team / CVS /Ext Connection Method
2.  选择“使用外部程序连接”
3.  CVS_RSH：ssh
4.  参数：-l {用户} {主机}
5.  CVS_SERVER: cvs

注意你的 cvs url 在 .cvs 目录中有“ext:”

这样，eclipse 就像在 shell 上一样使用 ssh。如果 ssh-agent 在你的 shell 中工作，它也适用于 eclipse。

# java - 将 HttpUrlConnection 无限期地打开到远程 REST 端点是否合理？

> ID：382357
> 
> 赞同：1
> 
> 时间：2008-12-19T22:05:14.983
> 
> 标签：java, rest, connection, httpurlconnection

我希望通过一个简单的 REST 风格的 HTTP 帖子优化一个持续运行并频繁调用（平均每秒 > 1 次）外部 API 的进程。我注意到的一件事是，目前，根据以下结构，为每个 API 调用创建和关闭 HttpUrlConnection（为了便于阅读，删除了非必要代码和错误处理）。

```
//every API call
try {
  URL url = new URL("..remote_site..");
  conn = (HttpURLConnection) url.openConnection();
  setupConnectionOptions(conn); //sets things like timeoout and usecaches false
  outputWriter = new OutputStreamWriter(new BufferedOutputStream(conn.getOutputStream()));
  //send request
} finally {
  conn.disconnect();
  outputWriter.close();
} 
```

我没有直接处理http协议的丰富经验，但是根据一般的套接字常识/知识，似乎只创建一次连接并重新使用它，然后重新初始化它会更有效在一个问题上，避免每次都进行连接协商，像这样：

```
//on startup, or error
private void initializeConnection()
{
  URL url = new URL("..remote_site..");
  conn = (HttpURLConnection) url.openConnection();
  setupConnectionOptions(conn); //sets things like timeoout and usecaches false
}

//per request
try {
  outputWriter = new OutputStreamWriter(new BufferedOutputStream(conn.getOutputStream()));
  //send request
} catch (IOException) {
  try conn.disconnect();
  initializeConnection();
} finally {
  outputWriter.close();
}

//on graceful exit
conn.disconnect(); 
```

我的问题是：

*   一般来说，这是一个合理的优化吗（速度增加会很明显）吗？

假设是：

*   我应该重用输出流以及连接吗？
*   仅在错误时重新初始化连接是否合理，或者我应该在一定数量的请求/时间后这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T22:08:03.993

基本上，是的，而且它节省了很多时间——设置一个套接字需要付出很大的努力，使用 SSL 更糟。这就是为什么在旧时代实施“keepalive”的原因。这与 REST 哲学有点相反，但它是一种性能优化。

关于它的一件事是套接字是有限的资源。在一个真正大量使用的环境中，您最终可能没有用于新连接的套接字。这是一件坏事。

# c# - 如何从内容页面访问母版页中的用户控件？

> ID：382358
> 
> 赞同：5
> 
> 时间：2008-12-19T22:05:37.557
> 
> 标签：c#, asp.net, user-controls, master-pages

假设我在母版页中有一个标题用户控件，并且想要根据母版页中加载的内容页面来更改用户控件的属性。我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-19T22:16:53.510

您可以使用两种方法。第一个是通过使用`Page.Master.FindControl('controlID')`. 然后您可以将其转换为您的用户控件的类型。第二种方法是向您的 aspx 页面添加`<%@ MasterType VirtualPath="">`OR`<%@ MasterType TypeName=""%>`标记。在`VirtualPath`母版页中添加虚拟路径，或`TypeName`. 然后，您可以使用智能感知访问所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-02-21T18:29:07.513

首先在母版页中找到用户控件，如下所示。然后找到您需要访问其属性的控件。

```
UserControl uch = Page.Master.FindControl("ucHeader1") as UserControl;
PlaceHolder phProxylist= ucHeader1.FindControl("phProxy") as PlaceHolder;
DropDownList ddlproxylist1 = ucHeader1.FindControl("ddlProxyList") as DropDownList;
phProxylist.Visible = false; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-19T22:25:45.317

还有另一种方法，即在母版页上创建一个公开用户控件的公共属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T02:20:42.033

使用公共财产是可行的。在内容页面的 FormLoad 方法中，您可以执行以下操作（VB）：

```
Dim myMaster as MyMasterPage = CType(Page.Master, MyMasterPage)
myMaster.MyUserControl.Text = "Hello!" 
```

# java - 如何处理源代码中的巨大 SQL 字符串

> ID：382361
> 
> 赞同：5
> 
> 时间：2008-12-19T22:07:13.763
> 
> 标签：java, sql, coding-style

我目前正在开发一个项目，其中代码中有大约 3000 行的 SQL 字符串。

该项目是一个 java 项目，但这个问题可能适用于任何语言。

无论如何，这是我第一次看到这么糟糕的事情。代码库是遗留的，所以我们可以突然迁移到 Hibernate 或类似的东西。

你如何处理这样的非常大的 SQL 字符串？

我知道这很糟糕，但我不确切知道建议解决方案的最佳方法是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-19T22:08:49.967

在我看来，将这些硬编码的值放入存储过程并从代码中引用存储过程可能是高产出和低工作量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-19T22:13:07.383

SQL 是否有很多用于变量的字符串连接？

如果没有，您可以提取它们并将它们放入资源文件中。但是您必须删除换行符中的字符串内容。

您使用的存储过程方法非常好，但有时当需要了解 SQL 在做什么时，您必须从工作区切换到您喜欢的 SQL IDE。这是唯一的坏事。

对于我的建议，它会是这样的：

```
String query = "select ......."+
3000 lines. 
```

到

```
ResourceBundle bundle = ResourceBundle.getBundle("queries");
String query = bundle.getString( "customerQuery" ); 
```

嗯，就是这样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-19T22:10:20.683

我想第一个问题是，你*应该*用它做什么？如果它没有坏，就悄悄地把它合上，假装你从未见过它。否则，像疯了一样重构——希望某处有一些看起来像合同的退出条件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-19T22:08:10.420

到目前为止，我能想到的最好的办法是将查询放入几个存储过程中，就像我在 Java 中处理一个太长的方法一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-19T22:35:36.670

我和你在同一个地方......我的计划是将 SQL 拉入项目中的单独 .sql 文件中，并创建一个实用方法来在我需要查询时读取文件。

```
string sql = "select asd,asdf,ads,asdf,asdf," 
           + "from asdfj asfj as fasdkfjl asf"
           + "..........................."
           + "where user = @user and ........"; 
```

查询被转储到一个名为 usageReportByUser.sql 的文件中
，然后变成这样。

```
string sql = util.queries("usageReportByUser"); 
```

确保以不公开访问文件的方式完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T22:10:20.543

我在 PHP 中所做的是：

```
$query = "SELECT * FROM table WHERE ";
$query .= "condition < 5 AND ";
$query .= "condition2 > 10 AND "; 
```

然后，一旦你完成了分层`$query`：

```
mysql_query($query); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-20T05:15:47.907

使用框架[iBatis](http://ibatis.apache.org/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-20T05:39:51.337

不久前我为此编写了一个[工具包](http://github.com/dustin/spyjar)，并在多个项目中使用了它。它允许您将查询放在大多数文本文件中，并为它们生成绑定和文档。

查看[此示例](http://github.com/dustin/photo/tree/master/src/java/net/spy/photo/sp/InsertAnnotation.spt)和[示例使用](http://github.com/dustin/photo/tree/master/src/java/net/spy/photo/impl/SavablePhotoImage.java#L229)（它几乎只是编译为具有早期绑定/类型安全查询绑定的 java 类的准备好的语句）。

它也生成了一些不错的 javadocs，但我目前没有任何在线文档。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-31T20:28:22.627

我赞同 iBatis 的建议。至少，您可以从最可能使用 StringBuffer 的 Java 代码中提取 SQL，并将其附加或 String concat 到 XML 中，这样更易​​于维护。

我为旧版 Web 应用程序执行此操作，然后打开调试并为 DAO 运行单元测试，并将为每个语句生成的 sql 复制到 iBatis xml 中。工作很顺利。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-19T22:09:35.020

一种简单的方法是将它们分解成某种常量。这至少会使代码更具可读性。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-19T22:23:19.500

我将它们存储在文件（或资源）中，然后在应用程序启动时读取并缓存它们（如果它是服务或其他东西，则在更改时）。

或者，只是将它们作为 consts 或 readonlys 放入一个大的旧 SqlQueries 类中。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-07-19T17:31:31.190

我已经成功地将大型动态查询转换为 linq 查询。（1K 行+）这非常适用于在相对较少的表格上进行大量动态过滤和动态分组的报告方案。为这些表创建一个 edmx，您可以编写出色的强类型可组合查询。

我发现性能实际上有所提高，生成的 sql 也简单了很多。我敢肯定你会用 Hibernate 获得类似的里程 - 除了能够使用 linq 当然。但一般来说，如果生成的 sql 需要高度动态，那么它不适合存储过程。在存储过程中编写动态 sql 是两全其美的。sql 生成框架将是我去这里的首选方式。如果您挖掘 Hibernate，我认为这将是一个很好的解决方案。

话虽如此，如果查询只是带有参数的简单字符串，那么只需将它们放入存储过程中并完成即可。- 但是你错过了与对象一起工作的结果。

# performance - Oracle BPEL PM 有哪些可用的调优参数

> ID：382368
> 
> 赞同：1
> 
> 时间：2008-12-19T22:08:49.750
> 
> 标签：performance, bpel

是否有任何可用于 Oracle BPEL 流程管理器的调整旋钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-22T10:27:22.903

没有单一的 GUI 可以用来调整 Oracle`BPEL PM.`虽然管理和配置选项卡允许您调整一些参数，但大多数参数都在 XML 配置文件中。看看[这个](http://download-west.oracle.com/docs/cd/B32110_01/core.1013/b28942/tuning_bpel.htm)。

# javascript - 如何使用 Javascript 通过我的网站找出用户点击了 3 次

> ID：382382
> 
> 赞同：1
> 
> 时间：2008-12-19T22:10:36.297
> 
> 标签：javascript, click, dom-events

JavaScript 中有什么方法可以找出用户在同一个域中点击了 2 次或更多次？

用户在网站上的任意位置单击 3 次后，我需要弹出一个窗口。一键单击后我知道该怎么做 - 使用`document.referrer`or `addEventListener`，但后来我迷路了。

我需要能够捕获所有点击事件（不仅是链接）并计算它们的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T22:17:36.330

当然。您需要在 cookie 或服务器端数据存储中存储用户的点击事件列表。在每次记录的点击中，将计数加一，并在数字达到 3 时执行您的操作。

尝试使用会话 cookie 来存储页面之间的状态——它们速度快、兼容性非常好，并且会在浏览器关闭时归零，以防止向用户的 cookie 罐发送垃圾邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T05:49:10.100

我试过了，效果很好：

```
window.onload = function() {
    var clicked = readCookie('popunder');
    if(clicked == null) {
        clicked = 0;
    }

    var allLinks = document.getElementsByTagName("a");
    for(i=0;i<=allLinks.length;i++) {
        allLinks[i].addEventListener("click",countClicks,true);
    }

    function countClicks() {           
        if(clicked == 2) {
            popunder(); //something to do
        } else {
            clicked++;
            doCookie('popunder', clicked, 1);
            alert(clicked);
        }
    }

    function popunder() { alert('thats 3 clicks!'); }

    function doCookie(name,value,days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
        } else {
            var expires = "";
        }
        document.cookie = name+"="+value+expires+"; path=/";
    }

    function readCookie(name) {
        var readName = name + "=";
        var cSplit = document.cookie.split(';');
        for(var i=0;i < cSplit.length;i++) {
            var sc = cSplit[i];
            while (sc.charAt(0)==' ') sc = sc.substring(1,sc.length);
            if (sc.indexOf(readName) == 0) return sc.substring(readName.length,sc.length);
        }
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T00:58:22.607

感谢您的所有建议。我试过这段代码。但刷新后，**点击**的变量再次变为 0。我需要将**点击**的每个新值保存到 cookie（或其他任何内容）中，因此每次点击页面上的链接时，它的数量都会增加。是否可以通过这种方式更改 cookie 中变量的值？

> window.onload = 函数（）{

```
var **allLinks** = document.getElementsByTagName("a");

var **clicked** = 0;

**doCookie**('popunder',clicked,1);

for(i=0;i<=allLinks.length;i++){
    allLinks[i].addEventListener("click",countClicks,true);
}

function **countClicks**(){           
        if(clicked == 3){
            popunder(); //something to do
        }
        else{
            alert(readCookie('popunder'));
            return clicked++;
        }
}

function **doCookie**(name,value,days) {
if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
}
else var expires = "";
document.cookie = name+"="+value+expires+"; path=/";
}

function **readCookie**(name) {
    var readName = name + "=";
    var cSplit = document.cookie.split(';');
    for(var i=0;i < cSplit.length;i++) {
        var sc = cSplit[i];
        while (sc.charAt(0)==' ') sc = sc.substring(1,sc.length);
        if (sc.indexOf(readName) == 0) return sc.substring(readName.length,sc.length);
    }
        return null;
} 
```

# asp.net - ASP.NET 模拟和 SQL Server 可信连接调用

> ID：382383
> 
> 赞同：0
> 
> 时间：2008-12-19T22:11:27.793
> 
> 标签：asp.net, vb.net, security, authentication, impersonation

我正在处理一个 ASP.NET 页面，我们在代码中模拟了请求用户。我们正在使用以下代码开始模拟。

```
Dim impersonationContext As System.Security.Principal.WindowsImpersonationContext
Dim currentWindowsIdentity As System.Security.Principal.WindowsIdentity
currentWindowsIdentity = CType(User.Identity, System.Security.Principal.WindowsIdentity)
impersonationContext = currentWindowsIdentity.Impersonate() 
```

在此之后，我们通过调用验证了应用程序正在正确的上下文中运行：

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name 
```

这将返回用户的正确身份，并且文件访问和其他项目似乎正在使用他们的帐户。但是，当使用 Microsoft 应用程序数据应用程序块 SqlHelper 类调用使用受信任连接的数据库时，“NT AUTHORITY\ANONYMOUS LOGON”用户身份验证失败。

我们可以在失败后重新验证当前身份仍然是我们想要的帐户，而不是匿名登录帐户。

有谁知道这是为什么？或者更具体地说，我们如何绕过它？

**编辑** 有关来自这些页面的调用如何工作的一些附加信息。

我们从 .aspx 页面进行模拟调用。

在我们模拟之后，我们调用一个被引用的“业务逻辑”程序集。

我们知道上下文标识在这里仍然是正确的。

之后，“业务逻辑”程序集调用另一个实际执行可信连接调用的程序集。我们不能修改这个“数据访问”程序集，这个程序集也会报告身份验证异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T22:49:28.700

我认为@John Sonmez 是对的，您遇到了双跳问题。模拟只是故事的一半，您还需要查看委托（假设您的网络使用 Kerberos 身份验证）。下面的文章对帮助我解决同样的问题最有用

[模仿和委托](http://msdn.microsoft.com/en-us/library/ms998351.aspx)

[ASP.NET 委托](http://msdn.microsoft.com/en-us/library/aa291350(VS.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-19T22:30:43.357

我知道我之前在 ASP.NET 中使用过模拟（使用 C# 并访问文件系统），我想知道您是否尝试过将包含**currentWindowsIdentity.Impersonate()**的逻辑包装为“使用/结束使用”（明确定义代码块的安全上下文）。

所以，它看起来像这样：

```
Using impersonationContext = currentWindowsIdentity.Impersonate() 
' Logic here 
End Using 
```

# asp.net - 有没有办法确定 Web 服务是否具有安全性？

> ID：382386
> 
> 赞同：1
> 
> 时间：2008-12-19T22:12:10.680
> 
> 标签：asp.net, web-services, security

我有一个网络服务： [http://machine001/Services/conversionService.asmx](http://machine001/Services/conversionService.asmx)

这个 Web 服务有一个方法叫做 convert(string pInput)。

如果此 Web 服务应用了安全性，我正在尝试找出是否有一种方法可以弄清楚，而无需登录 machine001 并且无需实际调用 convert 方法。

如果我能够访问[http://machine001/Services/conversionService.asmx](http://machine001/Services/conversionService.asmx)，查看服务描述，创建代理类并从任何客户端实例化 Web 服务对象，这是否意味着没有安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T22:16:42.447

使用您的浏览器并转到：

[http://machine001/Services/conversionService.asmx?wsdl](http://machine001/Services/conversionService.asmx?wsdl)

并查看描述是否包含 WSE 安全声明。对你来说是最后一段，是的，如果你能做到所有这些并且你没有做任何其他事情来进行身份验证，那么它就是不安全的。

# asp.net - Web 部署项目构建不再属于项目的文件

> ID：382401
> 
> 赞同：5
> 
> 时间：2008-12-19T22:18:00.260
> 
> 标签：asp.net, web-deployment-project

这是我得到的错误：

> 错误 101 无法加载类型“控件”。/Test.vbproj/x.ascx 1 1 WebDeployProject

这是上周作为项目一部分的遗留文件，但其中一位开发人员将其从项目中删除。我必须手动删除文件才能构建 WDP。有没有办法告诉 WDP 忽略不属于项目的文件或查看这些文件不属于项目并删除它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-20T19:14:05.670

You'll need to use your source control tools to find and remove local files that aren't under source control.

For instance, if you're using TFS, do the following:

*   Open Source Control Explorer (View -> Other Windows -> Source Control Explorer)
*   Right-click on the path in TFS that corresponds to your local working copy and select Compare
*   Use your TFS path as Source Path and your local working copy as Target Path
*   Under View Options, select "Show items that exist only in target path"

You've now got a list of all the files that exist in your local working copy but aren't in source control. For each file, either delete your local copy or add it to source control.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-31T20:19:32.240

它可能与网络项目的类型有关。

如果它是一个网站，那么编译器将尝试编译文件夹中的每个文件。但是，如果它是一个 Web 应用程序项目，那么它只会编译您专门添加为项目一部分的那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-21T08:28:06.630

如果您最近从项目中删除/删除了一个文件，那么您需要转到项目>“显示所有文件”，所有删除的文件都将出现在您的解决方案资源管理器中。您可以删除文件 /x.ascx 并重建 WDP。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-21T18:29:03.247

It has nothing to do with the type of Web project: [http://amiraryani.wordpress.com/2008/11/06/web-deployment-project-aspparse-could-not-load-type/](http://amiraryani.wordpress.com/2008/11/06/web-deployment-project-aspparse-could-not-load-type/).

A Web Site *itself* considers files under its root directory as part of the site.

A Web Application Project *itself* allows you to customize build actions, etc. on a per-file basis.

A Web Deployment Project, however, will try to include files under the root directory (*a la* a Web Site), even if the WDP is associated with a WAP. That's why it doesn't matter which kind of Web project it is.

EDIT: To clarify, it *would* matter what type of Web project you are using if you were trying to Build, Debug, or Publish that project itself instead of using a WDP.

# tfs - 如何在 TFS 2008 中报告给定一周内完成的工作？

> ID：382406
> 
> 赞同：1
> 
> 时间：2008-12-19T22:20:11.350
> 
> 标签：tfs, ssas, mdx

我们在 Team Foundation Server 2008 上，我正在尝试找到一种方法来报告每周在任务级别上完成的工作的变化。下面的 MDX 查询工作得很好，但我想摆脱硬编码上周日期的需要。我试过使用 prevmember 和 parallelperiod 没有成功，但我不是 MDX 专家。

```
WITH 
MEMBER [Measures].[Completed Work by WI on dt1] AS
(
[Assigned To].[Person].CurrentMember,
[Work Item].[System_Id].CurrentMember,
[Date].[Year Week Date].[Week].&[2008-12-07T00:00:00],
[Measures].[Microsoft_VSTS_Scheduling_CompletedWork]
)

MEMBER [Measures].[Completed Work by WI on dt2] AS
(
[Assigned To].[Person].CurrentMember,
[Work Item].[System_Id].CurrentMember,
[Date].[Year Week Date].CurrentMember,
[Measures].[Microsoft_VSTS_Scheduling_CompletedWork]
)

MEMBER [Measures].[Completed Work] AS
[Measures].[Completed Work by WI on dt2] - [Measures].[Completed Work by WI on dt1]

SELECT
NON EMPTY
{
[Measures].[Completed Work] 
}
ON COLUMNS,

NON EMPTY
{
Filter(
([Assigned To].[Person].[Person],[Work Item].[System_Id].[System_Id],[Work Item].[System_Title].[System_Title]), [Measures].[Completed Work] >0 )
}
ON ROWS

FROM [Team System] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T05:47:22.303

查看提供的“已完成工作”报告。它会自动将其日期字段之一设置为今天减去一个月。

编辑：刚刚登录到我的工作系统来仔细检查这个。该报告实际上称为“剩余工作”。转到为您的团队项目创建的 SharePoint 门户，并找到标准报告列表。它会在那个列表中。您可以将该报告导出到文件，在 Visual Studio 中打开它并查看日期字段逻辑。

EDIT2：对于获得前一周的 MDX 函数，请尝试对此进行更改：[http ://social.msdn.microsoft.com/Forums/en-US/tfsreporting/thread/0a656453-eaf1-47a2-a376-cb6eaec0db51](http://social.msdn.microsoft.com/Forums/en-US/tfsreporting/thread/0a656453-eaf1-47a2-a376-cb6eaec0db51)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-22T14:44:48.177

@sliderhouserules - 我查看了该报告，它似乎只是在输入日期并使用 strtomember 函数。在我的查询中，它看起来相当于带有硬编码日期的行：

```
StrToMember("[Date].[Year Week Date].[Week].&[" + Format(DATEADD("d", -7, "2008-12-21"), "s") + "]") 
```

这工作正常。然而，我真正想要的是消除对任何东西进行硬编码的需要。我尝试使用 Now() 函数而不是硬编码日期。我无法让它工作，但即使我这样做了，这仍然意味着我需要更改要减去的天数才能回到前一周的星期日。似乎应该有一个 MDX 函数可以完成这项工作。如果不是，那么也许有一些方法可以修改 StrToMember 行，以正确格式导出上周日的日期。

# flashmenu - 带有子菜单和渐变颜色的 Flash 菜单？

> ID：382407
> 
> 赞同：0
> 
> 时间：2008-12-19T22:20:13.143
> 
> 标签：flashmenu

我是 Flash 新手，想创建一个带有子菜单的 Flash 菜单。此外，菜单元素的背景颜色也需要是渐变图像。

有什么建议可以在哪里找到一些教程？

我正在寻找类似的 [东西](http://www.flash-extensions.net/menus/total-flash-menu/total_menu_free1.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-20T07:55:46.133

您可能想尝试一下[Adob​​e Flex](http://flex.org)。对于应用程序开发人员来说，它基本上是 Flash，并且（假设您来自应用程序开发背景）您可能会发现在其中构建 Flash 菜单更容易。

但是，它确实需要您的用户拥有 Flash 9 或更高版本，并且在 Flash 9 播放器的早期版本中，SWF 文件可能非常大（后来的版本对缓存 Flex 框架有更好的支持）。

# perl - 关于角色的文档

> ID：382413
> 
> 赞同：1
> 
> 时间：2008-12-19T22:22:38.520
> 
> 标签：perl, interface, oop, roles, behavior

前段时间，我发现一篇文章（[角色：对象行为的可组合单元](http://www.oreillynet.com/onlamp/blog/2006/08/roles_composable_units_of_obje.html)）描述了使用角色与接口或其他处理行为需求的方式的优点。你们有谁知道我在哪里可以找到更多关于这方面的文献，或者知道更多关于角色的信息吗？

我知道这几乎是一个研究课题，但也许有人（也许是某个 Perl 程序员）已经尝试过使用它（Moose？）。

注意：添加标签“perl”的原因是可能Perl程序员更有可能给出答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T23:01:36.133

对于基于 Moose 的示例，您应该检查[这个](http://search.cpan.org/~drolsky/Moose/lib/Moose/Cookbook/Roles/Recipe1.pod)和[那个](http://search.cpan.org/~drolsky/Moose/lib/Moose/Cookbook/Roles/Recipe2.pod)示例以及[这个](http://search.cpan.org/~drolsky/Moose/lib/Moose/Spec/Role.pod)规范。

ETA：有关理论方面，请参阅[此](http://www.iam.unibe.ch/~scg/Research/Traits/)页面

# html - YUI 按钮错位

> ID：382416
> 
> 赞同：0
> 
> 时间：2008-12-19T22:23:23.713
> 
> 标签：html, css, yui

我正在使用 YUI，并且与文本输入字段内联的 YUI 按钮存在对齐问题。渲染问题出现在 FF3 中，甚至出现在 YUI 自己的网站上。

[http://developer.yahoo.com/yui/examples/button/btn_example09.html](http://developer.yahoo.com/yui/examples/button/btn_example09.html)

如您所见，按钮位于高于文本字段的位置。关于如何在同一高度获得所有想法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T22:56:02.867

在该页面上，在 FF3 中，摆脱`vertical-align:baseline`规则使按钮与文本输入框底部对齐。

所以：

```
#calendarpicker {
    // vertical-align:baseline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T07:49:42.120

看起来它也是一个组合

```
.yui-skin-sam .yui-button button, .yui-skin-sam .yui-button a {
    min-height:2em;
} 
```

评论出来也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-06T08:33:23.820

最后我不得不使用 position:relative;

这是一个实际上正确对齐的 YUI 示例：http: [//developer.yahoo.com/yui/examples/calendar/calcontainer_clean.html](http://developer.yahoo.com/yui/examples/calendar/calcontainer_clean.html)

我复制了它的css

# networking - 为什么我的网站即使关闭了也能看到？

> ID：382418
> 
> 赞同：1
> 
> 时间：2008-12-19T22:23:52.653
> 
> 标签：networking, caching

我想知道是否有人知道这是怎么回事？我的网站已关闭，但我的互联网连接/路由器上的每台计算机都可以看到它。我已经清除了我的缓存等，但房子里的另一台电脑不应该看到离线的网站。多么奇怪？

它是远程托管的，而不是在我的网络或任何东西上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T22:40:37.657

要问自己的第一个问题是，你有多确定它已经失败了？如果计算机 A 可以访问它而计算机 B 不能访问，则任何一个都可能是“正确的”：

1.  该站点可能已关闭，计算机 A 可能正在查看来自 ISP 的缓存版本。

2.  该站点可能已启动，但计算机 B 可能存在一般的 Internet 连接问题，或者特别是访问该站点的问题（DNS 缓存错误等）

一种判断方法是向站点添加一些新内容（例如，通过 FTP 或诸如 wordpress 之类的就地内容管理系统）并查看可以访问它的计算机（计算机 A）是否可以看到更改。如果是这样，那么您正在查看一个“实时”站点，其中页面直接从服务器提供。（如果服务器处于活动状态并运行 PHP 或 ASP 等 Web 软件，那么这将是另一种“证明”站点已启动并运行的方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T22:24:50.793

互联网提供商缓存可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-19T23:06:57.853

您的朋友使用什么 DNS 服务器？和你的一样吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T01:04:48.380

你知道你的网络服务器的IP地址吗？您是否可以通过 80 端口直接访问 Internet？

通过执行以下操作来判断您的服务器是启动还是关闭

```
telnet 255.255.255.255 80 
```

其中 255.255.255.255 是您的 Web 服务器的 IP 地址。在 Windows 上，如果服务器应答，屏幕将变为空白。然后输入

```
GET / HTTP/1.0 
```

并按回车两次。您应该会看到默认页面的内容。如果您作为虚拟主机运行，您可能需要使用 HTTP/1.1 和 Hostname 标记。

```
GET / HTTP/1.1
Host: www.yourservername.com 
```

在 HTTP/1.1 之后有一个返回，在您的主机名之后有两个返回。如果您从 Web 服务器返回内容（正确的内容），它肯定不会关闭。如果服务器无法连接，则您的 Web 服务器确实已关闭，您的计算机看到的内容可能是以下任何一种：

*   本地页面缓存
*   本地代理服务器
*   ISP代理服务器
*   本地 ARP 中毒攻击将您重定向到攻击者的本地 Web 服务器，该服务器镜像您的站点。
*   DNS中毒将您的浏览器定向到镜像您网站的其他人的Web服务器。

如果您的站点已启动，但地理位置分散的人看不到您的站点，则很可能是 DNS 问题或 ISP 级别的路由问题。

检查 DNS 问题的一个好工具是[OpenDNS 的 CacheCheck](http://www.opendns.com/support/cache/)。至于路由问题，最好的办法是致电您的网络托管公司，看看他们是否有其他客户的其他投诉，或者他们目前是否正在处理路由问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T22:26:22.803

您的 ISP 可能正在缓存内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T23:04:54.550

我知道它失败了，因为我让我在其他地方的朋友看看它。然后我使用我找到的这个网站进行了测试。

[http://www.websitepulse.com/help/tools.php](http://www.websitepulse.com/help/tools.php)

我正在切换主机，我们正在处理我的主域名。这是我期待这种中断的另一个原因。我只想知道它什么时候最终切换。

ISP缓存是件坏事吗？

# programming-languages - 适用于范围分析器的良好 API

> ID：382431
> 
> 赞同：0
> 
> 时间：2008-12-19T22:28:19.227
> 
> 标签：programming-languages, code-generation, scope, lexical-analysis

我正在开发一些代码生成工具，很多复杂性来自于范围分析。我经常发现自己想知道诸如

1.  函数或块的自由变量是什么？
2.  这个符号在哪里声明？
3.  这个声明掩盖了什么？
4.  这种符号的使用是否可能在初始化之前发生？
5.  这个变量有可能逃脱吗？

我认为是时候重新考虑我的范围界定问题了。

我可以完成所有这些分析，但我正在尝试找出一种构建 API 的方法，以便它易于使用，并且理想情况下，可以懒惰地完成足够多的这项工作。

人们熟悉哪些类似的工具，他们在 API 中做对与错的地方是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T04:11:50.157

我对这个问题有点惊讶，因为我已经完成了大量的代码生成，而且很少出现范围界定的问题（除了偶尔**生成唯一名称**的愿望）。

要回答您的示例问题**，需要认真的程序分析远远超出范围界定**。逃逸分析本身是不平凡的。根据目标语言，初始化前使用可以是微不足道的，也可以是非微不足道的。

以我的经验，用于程序分析的 API**很难设计并且经常是特定于语言的**。如果您的目标是低级语言，您可能会从[Machine SUIF](http://www.eecs.harvard.edu/hube/software/nci/overview.html) API 中学到一些有用的东西。

在你的位置上，我很想**窃取别人的程序分析框架**。 [George Necula](http://www.cs.berkeley.edu/~necula/)和他的学生构建了[CIL](http://manju.cs.berkeley.edu/cil/)，这似乎是当前分析 C 代码的标准。 [Laurie Hendren](http://www.sable.mcgill.ca/~hendren/)的小组已经构建了一些很好的 Java 分析工具。

**如果我不得不自己动手**，我会更少担心 API，而更多地担心抽象语法树的非常好的表示。

在非常有限的数据流分析领域（包括未初始化变量问题），João Dias 和我改编了[Sorin Lerner、David Grove 和 Craig Chambers 的一些出色工作](http://citeseer.ist.psu.edu/old/lerner01composing.html)。仅公布我们的[初步结果](http://www.cs.tufts.edu/~nr/pubs/zipcfg-abstract.html)。

最后，如果您想**生成多种语言的代码，**那么这就是一个**完整的蠕虫罐头**。我已经做了好几次了。如果您创建了自己喜欢的东西，请发布它！

# c# - 在什么情况下应该使用 Singleton 类？

> ID：382449
> 
> 赞同：6
> 
> 时间：2008-12-19T22:39:54.787
> 
> 标签：c#, .net, design-patterns, oop

**关闭为[这个问题](https://stackoverflow.com/questions/228164/on-design-patterns-when-to-use-the-singleton)的完全相同的副本。但重新打开，因为其他 Singleton 问题用于一般用途，不用于数据库访问**

我正在考虑将内部数据访问类设为 Singleton，但无法说服自己做出选择，主要是因为该类除了其方法中的局部变量外没有任何状态。

毕竟将这些类设计为单例的目的是什么？
由于大多数现代数据库都可以很好地处理并发，因此是否保证对数据库的顺序访问并不令人信服？
是否可以通过连接池处理重复使用单个连接的能力？还是通过运行单个实例来节省内存？

请赐教我这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T22:43:46.730

我发现单例模式适用于以下类：

*   没有状态
*   充满了基本的“服务员”
*   必须严格控制其资源。

这方面的一个例子是数据访问类。

您将拥有接受参数并返回例如 DataReader 的方法，但您不会在单例中操纵阅读器的状态，您只需获取它并返回它。

同时，您可以采用可以在您的项目中传播的逻辑（用于数据访问）并将其集成到一个单独的类中，该类可以正确地管理其资源（数据库连接），而不管是谁调用它。

话虽如此，Singleton 是在 .NET 完全静态类的概念之前发明的，所以我对你是否应该采用一种或另一种方式持观望态度。事实上，这是一个很好的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T22:42:19.307

这个问题在我思考之前就被问过了。看看[这里](https://stackoverflow.com/questions/185448/would-you-consider-this-a-singletonsingleton-pattern)

看到这个问题：
[关于设计模式：何时使用单例？](https://stackoverflow.com/questions/228164/on-design-patterns-when-to-use-the-singleton)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-19T22:44:57.617

您可能不想在您描述的情况下使用单例。通过 DBD/DBI 类型类的单个实例连接到数据库会严重限制您的请求吞吐量性能。

高温高压

干杯，

抢

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-19T22:47:40.093

来自“[设计模式：可重用的面向对象软件的元素](https://rads.stackoverflow.com/amzn/click/com/0201633612)”：

> 对于某些类来说，只有一个实例很重要。尽管系统中可以有许多打印机，但应该只有一个打印机假脱机程序。应该只有一个文件系统和一个窗口管理器。...
> 
> 在以下情况下使用单例模式：
> 
> *   必须有一个类的实例，并且客户端必须可以从众所周知的访问点访问它
> *   唯一的实例应该可以通过子类化来扩展，并且客户端应该能够在不修改其代码的情况下使用扩展的实例

一般来说，在 Web 开发中，真正应该实现 Singleton 模式的只有 Web 框架本身；您在应用程序中编写的所有代码（一般来说）都应该假设并发，并依赖于数据库或会话状态之类的东西来实现全局（跨用户）行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T22:44:15.777

Singleton 是一种有用的设计模式，它只允许类的一个实例。Singleton 的目的是控制对象的创建，将数量限制为一个，但允许在情况发生变化时灵活地创建更多对象。由于只有一个 Singleton 实例，因此 Singleton 的任何实例字段在每个类中只会出现一次，就像静态字段一样。

来源：[java.sun.com](http://java.sun.com/developer/technicalArticles/Programming/singletons/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T22:51:49.630

1.  在这里使用单例并不能真正给你任何东西，但会[限制灵活性](http://www.google.com/search?q=singletonitis)
2.  您想要并发，否则您将无法扩展
3.  在这里担心连接和内存是[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-19T23:06:35.157

近年来，单例模式已经失去了很多光彩，主要是由于单元测试的兴起。

单例会使单元测试变得非常困难——如果你只能创建一个实例，你如何编写需要被测对象的“新”实例的测试？如果一个测试以某种方式修改了该单例，那么针对同一对象的任何进一步测试都不是真正从一张白纸开始的。

单例也是有问题的，因为它们实际上是全局变量。几周前我们在我的办公室遇到了一个线程问题，原因是一个单例全局变量正在从各种线程中修改；开发人员被认可的“模式”蒙蔽了双眼，没有意识到他真正创建的是一个全局变量。

另一个问题是，在某些情况下创建真正的单例可能是病态的困难。例如，在 Java 中，如果您没有正确实现`readResolve()`Serializable 类的方法，则可以创建“单例”的多个实例。

与其创建一个 Singleton，不如考虑提供一个返回实例的静态工厂方法；这至少使您能够在不破坏 API 的情况下改变主意。

[Josh Bloch 在Effective Java](http://java.sun.com/docs/books/effective/toc.html)中对此进行了很好的讨论。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-20T23:50:30.387

您有一个想要创建一次的存储库层，并且该引用在其他任何地方都使用。

如果您使用标准单例，则会产生不好的副作用。你基本上扼杀了可测试性。所有代码都与单例实例紧密耦合。现在，您无法在不访问数据库的情况下测试任何代码（这使单元测试变得非常复杂）。

我的建议：

1.  找到您喜欢的 IOC 并将其集成到您的应用程序中（StructureMap、Unity、Spring.Net、Castle Windsor、Autofac、Ninject ......选择一个）。
2.  为您的存储库实现一个接口。
3.  告诉 IOC 将存储库视为单例，并在代码通过接口请求存储库时返回它。
4.  了解依赖注入。

对于一个简单的问题，这是很多工作。但你会过得更好。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-21T00:03:52.013

举个例子，**对象工厂**通常是单例的好候选。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-21T00:18:42.780

如果一个类*没有*状态，那么让它成为一个单例是没有意义的；所有行为良好的语言最多只会创建一个指向向量表（或等效结构）的指针，用于分派方法。

如果在类的实例之间存在可以变化的实例状态，那么单例模式将不起作用；您需要多个实例。

因此，穷举之后，应该使用 Singleton 的唯一情况是存在必须在所有访问器之间共享的状态，并且只有必须在所有访问器之间共享的状态。

有几件事会导致类似单例的情况：

*   工厂模式：你构造并返回一个对象，使用一些共享状态。
*   资源池：你有一个包含一些有限资源的共享表，比如数据库连接，你必须在一大群用户中管理它。（bumpo 版本是单例持有*一个DB 连接的地方。）*
*   外部资源的并发控制；信号量通常是单例的变体，因为 P/V 操作必须以原子方式修改共享计数器。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-19T23:08:33.217

使用 c#，我会说单例很少合适。单例的大多数用途都可以通过静态类更好地解决。尽管对于任何静态的东西，注意线程安全都非常重要。对于数据库访问，您可能不想要单个连接，如上所述。您最好的选择是创建一个连接，并使用内置池。如果您愿意，您可以创建一个返回新连接以减少代码的静态方法。然而，ORM 模式/框架可能会更好。

在 c# 3.5 中，扩展方法可能比静态类更合适。

# security - HttpPostedFile.FileName - 不同于 IE

> ID：382464
> 
> 赞同：25
> 
> 时间：2008-12-19T22:48:06.253
> 
> 标签：security, browser, file-upload, httppostedfile

当我使用 ASP:File 控件将文件上传到站点时，IE 和 Firefox 中的 FileName 属性是不同的。在 Firefox 中，它只提供文件名，但 IE 提供文件的完整路径。

我通过添加代码解决了这个问题：

```
Dim FileName As String = file.FileName
If FileName.LastIndexOf("\") > 0 Then
    FileName = FileName.Substring(FileName.LastIndexOf("\") + 1)
End If 
```

但我不确定为什么不同浏览器之间会有所不同。有谁知道这是什么原因？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2011-10-13T08:16:42.890

在 IE 和 Chrome 中测试的简单解决方法

```
new FileInfo(myHttpPostedFileBase.FileName).Name 
```

即使包含路径，这将确保您始终只获得文件名。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-19T23:54:09.100

这是一个安全/隐私问题，firefox/mozilla 做得对，如果没有插件、applet、silverlight、flash 或其他一些机制，您将无法获得完整路径。

以下是有关 Mozilla 立场的更多信息：

[https://developer.mozilla.org/en/Updating_web_applications_for_Firefox_3](https://developer.mozilla.org/en/Updating_web_applications_for_Firefox_3)

请参阅**安全更改部分->文件上传字段**

我希望 IE 也能效仿，这样我们就有了一个一致且安全的环境。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-20T00:27:55.007

在 IE8 中，这种行为已经改变，它只会传递文件名，而不是完整路径。;-)

讨论 IE8 更改的 IE 博客文章的详细信息和链接：http: [//blogs.msdn.com/b/webtopics/archive/2009/07/27/uploading-a-file-using-fileupload-control-fails-在-ie8.aspx](http://blogs.msdn.com/b/webtopics/archive/2009/07/27/uploading-a-file-using-fileupload-control-fails-in-ie8.aspx)

希望解析文件名的服务器端应用程序应该检查，但不要**期望**文件名中有反斜杠。

IE8 用户设置覆盖：http: [//blogs.msdn.com/blogfiles/webtopics/WindowsLiveWriter/UploadingafileusingFileUploadcontrolfail_167/clip_image002_2.jpg](http://blogs.msdn.com/blogfiles/webtopics/WindowsLiveWriter/UploadingafileusingFileUploadcontrolfail_167/clip_image002_2.jpg)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-27T08:33:33.973

您还可以使用仅返回文件名的 Path.GetFileName(File.FileName)。例子：

```
Dim File As HttpPostedFile = context.Request.Files("txtFile")
' let's FileName is "d:\temp\1.txt"
Dim FileName As String = Path.GetFileName(File.FileName)
' FileName will be "1.txt" 
```

# python - 比较python中的大量字典列表

> ID：382466
> 
> 赞同：13
> 
> 时间：2008-12-19T22:49:15.813
> 
> 标签：python

我从来没有想过我会遇到 python 的速度问题，但我有。我正在尝试根据字典值将非常大的字典列表相互比较。我比较了两个列表，第一个像这样

```
biglist1=[{'transaction':'somevalue', 'id':'somevalue', 'date':'somevalue' ...}, {'transactio':'somevalue', 'id':'somevalue', 'date':'somevalue' ...}, ...] 
```

'somevalue' 代表用户生成的字符串、整数或小数。现在，第二个列表非常相似，除了 id 值始终为空，因为它们还没有被分配。

```
biglist2=[{'transaction':'somevalue', 'id':'', 'date':'somevalue' ...}, {'transactio':'somevalue', 'id':'', 'date':'somevalue' ...}, ...] 
```

因此，我想获取 biglist2 中的字典列表，这些字典与 biglist1 中的字典匹配，用于*除*id 之外的所有其他键。

我一直在做

```
for item in biglist2:
    for transaction in biglist1:
       if item['transaction'] == transaction['transaction']:
          list_transactionnamematches.append(transaction)

for item in biglist2:
    for transaction in list_transactionnamematches:
       if item['date'] == transaction['date']:
          list_transactionnamematches.append(transaction) 
```

...等等，不比较 id 值，直到我得到最终的匹配列表。由于列表可能非常大（每个列表大约 3000 多个项目），因此 python 循环遍历需要相当长的时间。

我猜这并不是真正应该进行这种比较的方式。有任何想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-20T01:01:00.243

您要用于查找的字段的索引。O(n+m)

```
matches = []
biglist1_indexed = {}

for item in biglist1:
    biglist1_indexed[(item["transaction"], item["date"])] = item

for item in biglist2:
    if (item["transaction"], item["date"]) in biglist1_indexed:
        matches.append(item) 
```

这可能比您现在所做的快数千倍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-19T22:58:09.087

您要做的是使用正确的数据结构：

1.  创建一个字典，将第一个字典中其他值的元组映射到它们的 id。

2.  在两个字典中创建两组值的元组。然后使用集合操作得到你想要的元组集合。

3.  使用第 1 点的字典为这些元组分配 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-19T23:07:13.093

原谅我生疏的 python 语法，已经有一段时间了，所以考虑一下这个部分伪代码

```
import operator
biglist1.sort(key=(operator.itemgetter(2),operator.itemgetter(0)))
biglist2.sort(key=(operator.itemgetter(2),operator.itemgetter(0)))
i1=0;
i2=0;
while i1 < len(biglist1) and i2 < len(biglist2):
    if (biglist1[i1]['date'],biglist1[i1]['transaction']) == (biglist2[i2]['date'],biglist2[i2]['transaction']):
        biglist3.append(biglist1[i1])
        i1++
        i2++
    elif (biglist1[i1]['date'],biglist1[i1]['transaction']) < (biglist2[i2]['date'],biglist2[i2]['transaction']):
        i1++
    elif (biglist1[i1]['date'],biglist1[i1]['transaction']) > (biglist2[i2]['date'],biglist2[i2]['transaction']):
        i2++
    else:
        print "this wont happen if i did the tuple comparison correctly" 
```

这会将两个列表按（日期，交易）排序为相同的顺序。然后它并排穿过它们，逐个遍历寻找相对相邻的匹配项。它假设 (date,transaction) 是唯一的，并且在元组排序和比较方面我并没有完全偏离我的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-19T23:02:50.780

在 O(m*n)...

```
for item in biglist2:
    for transaction in biglist1:
       if (item['transaction'] == transaction['transaction'] &&
           item['date'] == transaction['date'] &&
           item['foo'] == transaction['foo'] ) :

          list_transactionnamematches.append(transaction) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T01:31:19.187

我可能会采取的方法是用一个实例变量和一个方法创建一个非常非常轻量级的类。实例变量是指向字典的指针；该方法覆盖内置的特殊方法`__hash__(self)`，返回一个从字典中除 之外的所有值计算的值`id`。

从那里开始，解决方案似乎相当明显：创建两个最初为空的字典： `N`和`M`（对于*不匹配*和*匹配*。）对每个列表只循环一次，并且对于代表事务的每个字典（我们称之为 a `Tx_dict`），创建一个实例的新类 (a `Tx_ptr`)。然后在中测试与此匹配的`Tx_ptr`项`N`，`M`如果没有匹配项`N`，则将当前项`Tx_ptr`插入`N`；如果 中 有匹配项，`N`但 中没有匹配项`M`，则将当前项插入其中，并将`Tx_ptr`其`M`本身`Tx_ptr`作为键，将包含的列表`Tx_ptr`作为值；如果有匹配的项目`N`在 中`M`，将当前值附加`Tx_ptr`到与该键关联的值中`M`。

在您浏览完每一项后，您的字典`M`将包含指向与其他交易匹配的所有交易的指针，所有交易都整齐地组合到您的列表中。

*编辑*：哎呀！显然，如果存在匹配`Tx_ptr`in`N`而不是 in ，正确的操作`M`是插入一个键值对`M`，其中当前`Tx_ptr`作为键，作为值，当前`Tx_ptr` *和*`Tx_ptr`已经存在的列表`N`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-20T08:32:02.940

看看 Psyco。它是一个 Python 编译器，可以从您的源代码创建非常快速、优化的机器代码。

[http://sourceforge.net/projects/psyco/](http://sourceforge.net/projects/psyco/)

虽然这不是解决代码效率问题的直接解决方案，但它仍然可以帮助加快处理速度，而无需编写任何新代码。也就是说，我仍然强烈建议您尽可能优化您的代码，并使用 Psyco 来尽可能提高速度。

他们指南的一部分专门讨论了使用它来加速列表、字符串和数值计算的繁重函数。

[http://psyco.sourceforge.net/psycoguide/node8.html](http://psyco.sourceforge.net/psycoguide/node8.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-12-02T12:44:44.420

我也是新手。我的代码的结构与他的大致相同。

```
for A in biglist:
    for B in biglist:
        if ( A.get('somekey') <> B.get('somekey') and #don't match to itself
             len( set(A.get('list')) - set(B.get('list')) ) > 10:
            [do stuff...] 
```

浏览 10000 个字典的列表需要几个小时。每个字典都包含很多东西，但我可能只提取 id（'somekey'）和列表（'list'）并重写为 10000 个键：值对的单个字典。

问题：那会快多少？而且我认为这比使用列表列表要快，对吧？

# c# - 非英语操作系统中的 Everyone 组的名称

> ID：382471
> 
> 赞同：8
> 
> 时间：2008-12-19T22:51:44.297
> 
> 标签：c#, globalization

我们在创建`Mutex`. 问题线是：

```
MutexAccessRule rule = new MutexAccessRule("Everyone", MutexRights.FullControl, AccessControlType.Allow); 
```

硬编码的“Everyone”字符串仅适用于英文操作系统，我们如何更改此行以使其适用于所有语言？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-19T22:53:37.850

谷歌今天很有帮助：

看起来[这会有所帮助](http://www.hanselman.com/blog/FindingOutTheNameOfTheEVERYONEGroupOnANonenglishInternationalVersionOfWindows.aspx)

这段代码解决了这个问题：

```
 SecurityIdentifier sid = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
  MutexAccessRule rule = new MutexAccessRule(sid, MutexRights.FullControl, AccessControlType.Allow); 
```

VB：

```
Dim sid As System.Security.Principal.SecurityIdentifier = New System.Security.Principal.SecurityIdentifier(System.Security.Principal.WellKnownSidType.WorldSid, Nothing)
Dim rule As System.Security.AccessControl.MutexAccessRule = New System.Security.AccessControl.MutexAccessRule(sid, System.Security.AccessControl.MutexRights.FullControl, System.Security.AccessControl.AccessControlType.Allow) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-19T13:29:33.633

我遇到了同样的问题，但需要“Everyone”组名的实际本地化字符串才能启用对 MessageQueue 的访问。这是我找到的解决方案，效果很好：

```
SecurityIdentifier sid = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
var acct = sid.Translate(typeof(NTAccount)) as NTAccount;
myMessageQueue.SetPermissions(acct.ToString(), MessageQueueAccessRights.FullControl); 
```

# ruby-on-rails - 使用 open_id_authentication 插件时如何在 RSpec 用户故事/Cucumber 中伪造 OpenID 登录

> ID：382473
> 
> 赞同：6
> 
> 时间：2008-12-19T22:52:42.267
> 
> 标签：ruby-on-rails, openid, rspec, cucumber

我正在尝试编写一个需要我有一个登录用户的 Cucumber 场景——这通常很简单，但我只使用 OpenID 身份验证（身份验证插件的粗略）。然而，在挖掘了 open_id_authentication 插件的胆量之后，我不确定如何在 Cucumber 中实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T23:48:11.140

我想出了一个办法，如果你把它放在你的 features/support/env.rb 中：

```
ActionController::Base.class_eval do
  private

  def begin_open_id_authentication(identity_url, options = {})
    yield OpenIdAuthentication::Result.new(:successful), identity_url, nil
  end 
end 
```

然后，您可以在适当的步骤中执行以下操作：

```
Given /^I am logged in as "(.*)"$/ do |name|
  user = User.find_by_name(user)
  post '/session', :openid_url => user.identity_url
  # Some assertions just to make sure our hack in env.rb is still working
  response.should redirect_to('/')
  flash[:notice].should eql('Logged in successfully')
end 
```

我只是完全破坏了黄瓜功能的开放 id 身份验证，显然如果我需要登录失败的实例，我可以根据提供的 identity_url 来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-03T14:36:48.033

[Bort](https://github.com/fudgestudios/bort/)是一个 Rails 框架应用程序，有一套完整的 rspec 测试并支持 openID 登录，所以你可能想看看他们做了什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-09T20:52:08.587

如果您希望能够删除响应，请执行以下操作：

在 features/support/helpers.rb 中：

```
ActionController::Base.class_eval do

  private
    def fake_openid_response(identity_url)
      [OpenIdAuthentication::Result.new(:successful), identity_url, nil]
    end

    def begin_open_id_authentication(identity_url, options = {})
        yield fake_openid_response(identity_url)
    end 
end 
```

通过将响应移至单独的方法，您现在可以在必要时在步骤中存根响应。例如，如果我想要一个 :missing 响应并且我有一个控制器 GoogleLoginController 我可以使用 Mocha 执行以下操作：

```
GoogleLoginController.any_instance.stubs(:fake_openid_response)
    .returns([OpenIdAuthentication::Result.new(:missing), identity_url, nil]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-03T13:30:26.530

DEfusion 的答案很有效，只是我需要对 identity_url 进行标准化，例如：

```
ActionController::Base.class_eval do

    private

        def begin_open_id_authentication(identity_url, options = {})
            yield OpenIdAuthentication::Result.new(:successful), self.normalize_identifier(identity_url), nil
        end 
end 
```

谢谢

# java - 适用于 JDK 6.10 的 Emacs 的 JDE

> ID：382474
> 
> 赞同：7
> 
> 时间：2008-12-19T22:53:31.517
> 
> 标签：java, emacs

是否有支持 JDK 6.10 的适用于 emacs 的 JDE 版本？我一直无法找到有关此的任何信息。当它运行时，每次我尝试编译文件时，JDE 都会说它无法识别我的 JDK 版本并恢复到假设它是 Java5 版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-21T16:37:57.747

我对 JDE 进行了以下自定义：

```
'(jde-bug-debugger-host-address "127.0.0.1")
'(jde-bug-jre-home "/usr/lib/jvm/java-6-sun")
'(jde-compile-option-debug (quote ("all" (t nil nil))))
'(jde-debugger (quote ("jdb")))
'(jde-global-classpath (quote ("." "/usr/share/java/" "/usr/lib/jvm/java-6-sun/")))
'(jde-jdk-doc-url "/usr/share/doc/sun-java6-jdk/html/api/index.html")
'(jde-jdk-registry (quote (("1.5" . "/usr/lib/jvm/java-6-sun"))))
'(jde-regexp-jar-file "/usr/share/java/regexp.jar")
'(jde-sourcepath (quote ("."))) 
```

所以它编译没有抱怨，虽然我有 jdk 1.6.0.07。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T03:20:58.293

您可以通过使用`M-x customize-variable`并选择`jde-jdk-registry`. 保存该状态，然后再做`M-x customize-variable`一次，自定义`jde-jdk`并选择您想要的状态。

应该*这样*做；如果没有，请给我们一些更详细的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T04:53:46.967

是的，我已经做到了。问题是当我调用'jde-compile 时，消息'JDE 无法识别JDK6.0.10 JDK。假设 JDK 1.5 Javac?”出现。此外，看起来 Java6 结构（例如注释）并未在语法检查或缩进规则中定义。

# visual-c++ - 将可选参数传递给 VC++ 中的 COM 函数

> ID：382475
> 
> 赞同：4
> 
> 时间：2008-12-19T22:53:33.700
> 
> 标签：visual-c++, com, arguments

我在 COM 对象上有一个 MFC 包装器。有一个函数需要大量的选项，这些选项大多是可选的。我如何传递一些参数而不传递其他参数？

对于它的价值，可选参数被列为 VARIANT*。

下面是代码

```
CComVariant vFalse = false;
CApplication application;

{
    application.CreateDispatch(_T("Word.Application"));

    CDocuments documents = application.get_Documents();       

    CComVariant vFilename = _T("c:\\temp\\test.rtf");
    CComVariant vNothing;
    CComVariant vEmpty = _T("");
    CComVariant vOpenFormat = 0;
    application.put_Visible(TRUE);

    //
    // THIS FUNCTION has a number of optional arguments
    //
    LPDISPATCH pDocument = documents.Open(&vFilename, &vFalse, &vFalse, &vFalse, &vEmpty, &vEmpty, &vFalse, &vEmpty, &vEmpty, &vOpenFormat, &vOpenFormat, &vFalse, &vFalse, &vOpenFormat, &vFalse, &vFalse);
}
application.Quit(&vFalse, NULL, NULL); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-24T06:15:58.137

要跳过 COM 方法中的可选参数，请传递 VT_ERROR 类型的 VARIANT，并且错误代码必须由 DISP_E_PARAMNOTFOUND 提供。

```
CComVariant vtOptional;
vtOptional.vt = VT_ERROR;
vtOptional.scode = DISP_E_PARAMNOTFOUND; 
```

现在您可以使用 vtOptional 作为您不想指定的参数是否为可选参数。

这是官方的说法：“[在 Visual C++ 中调用函数时如何传递可选参数](https://web.archive.org/web/20111228051004/http://support.microsoft.com/kb/238981)”

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2008-12-20T00:38:34.953

未指定的变体通常是 VT_EMPTY：

```
_variant_t vtEmpty(VT_EMPTY); 
```

您显然已经围绕 COM 接口编写了 CDocuments 和 CApplication 包装器，因此您可以将可选参数指定为具有默认值 vtEmpty。

# multithreading - 如何避免线程？

> ID：382478
> 
> 赞同：6
> 
> 时间：2008-12-19T22:54:54.837
> 
> 标签：multithreading, language-agnostic, concurrency

我最近读了很多关于编写多线程应用程序是如何令人头疼的文章，并且已经对这个主题了解得足够多，至少在某种程度上可以理解为什么会这样。

我读过使用函数式编程技术可以帮助减轻这种痛苦，但我从未见过一个简单的并发函数式代码示例。那么，使用线程有哪些替代方法？至少，有什么方法可以将它们抽象出来，这样您就不必考虑诸如锁定之类的事情以及特定库的对象是否是线程安全的。

我知道 Google 的 MapReduce 应该可以帮助解决这个问题，但我还没有看到一个简洁的解释。

尽管我在下面给出了一个具体的例子，但我对一般技术比解决这个具体问题更感兴趣（尽管使用这个例子来帮助说明其他技术会有所帮助）。

当我写一个简单的网络爬虫作为学习练习时，我遇到了这个问题。它工作得很好，但速度很慢。大多数瓶颈来自下载页面。它目前是单线程的，因此一次只能下载一个页面。因此，如果可以同时下载页面，即使爬虫在单处理器机器上运行，它也会显着加快速度。我研究过使用线程来解决问题，但它们吓到了我。关于如何在不引发可怕的线程噩梦的情况下为此类问题添加并发性的任何建议？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-12-19T23:01:42.047

函数式编程有助于并发的原因并不是因为它避免使用线程。

相反，函数式编程宣扬不变性和没有副作用。

这意味着一个操作可以扩展到 N 个线程或进程，而不必担心会弄乱共享状态。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-19T23:11:30.450

实际上，线程很容易处理，直到您需要同步它们。通常，您使用线程池来添加任务并等待它们完成。

当线程需要通信和访问共享数据结构时，多线程变得非常复杂。只要你有两个锁，就会出现死锁，这就是多线程变得非常困难的地方。有时，只需几条指令，您的锁定代码就可能是错误的。在这种情况下，您只能在生产中看到多核机器上的错误（如果您在单核上开发，就发生在我身上）或者它们可能由其他硬件或软件触发。单元测试在这里没有多大帮助，测试会发现错误，但你永远无法像在“普通”应用程序中那样确定。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-19T23:20:24.830

我将添加一个示例，说明如何使用函数式代码*安全地*使代码并发。

以下是您可能希望并行执行的一些代码，因此您无需等待一个文件完成即可开始下载下一个文件：

```
void DownloadHTMLFiles(List<string> urls)
{
    foreach(string url in urls)
    {
         DownlaodOneFile(url);  //download html and save it to a file with a name based on the url - perhaps used for caching.
    }
} 
```

如果您有许多文件，用户可能会花一分钟或更长时间等待它们。我们可以像这样在功能上重写这段代码，它基本上做同样的事情：

```
urls.ForEach(DownloadOneFile); 
```

请注意，这仍然按顺序运行。然而，它不仅更短，而且我们在这里获得了一个重要的优势。由于对 DownloadOneFile 函数的每次调用都与其他函数完全隔离（出于我们的目的，可用带宽不是问题），因此您可以很容易地将 ForEach 函数换成另一个非常相似的函数：一个启动对 DownlaodOneFile 的每次调用的函数来自线程池的单独线程。

事实证明，.Net 使用[Parallel Extensions](http://www.microsoft.com/downloads/details.aspx?FamilyId=348F73FD-593D-4B3C-B055-694C50D2B0F3)就可以使用这样的功能。因此，通过使用函数式编程，您可以更改一行代码，突然间让一些原本按顺序运行的并行运行。这是相当强大的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-20T01:07:26.660

有一些关于异步模型的简短提及，但没有人真正解释过它，所以我想我会插话。我见过用作多线程替代方案的最常见方法是异步架构。真正的意思是，您不是在单个线程中按顺序执行代码，而是使用轮询方法来启动一些函数，然后返回并定期检查，直到有可用数据。

这实际上只适用于您前面提到的爬虫之类的模型，其中真正的瓶颈是 I/O 而不是 CPU。概括地说，异步方法将在多个套接字上启动下载，并且轮询循环定期检查它们是否完成下载，完成后，我们可以继续下一步。这允许您通过在同一个线程中进行上下文切换来运行在网络上等待的多个下载。

多线程模型的工作原理大致相同，除了使用单独的线程而不是轮询循环检查同一线程中的多个套接字。在 I/O 绑定应用程序中，对于许多用例来说，异步轮询的工作方式几乎与线程处理一样好，因为真正的问题只是等待 I/O 完成，而不是等待 CPU 处理数据。

另一个现实世界的例子是一个需要执行许多其他可执行文件并等待结果的系统。这可以在线程中完成，但它也相当简单，并且几乎与简单地启动几个外部应用程序作为 Process 对象一样有效，然后定期检查直到它们全部执行完毕。这会将 CPU 密集型部分（外部可执行文件中的运行代码）放在它们自己的进程中，但数据处理都是异步处理的。

我使用的 Python ftp 服务器库，[pyftpdlib](http://code.google.com/p/pyftpdlib/)使用 Python asyncore 库来处理仅使用单个线程为 FTP 客户端提供服务，以及用于文件传输和命令/响应的异步套接字通信。

进一步阅读 Python Twisted 库关于[异步编程](http://twistedmatrix.com/projects/core/documentation/howto/async.html)的页面- 虽然有些特定于使用 Twisted，但它还从初学者的角度介绍了异步编程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T23:00:58.707

并发是计算机科学中相当复杂的学科，需要对硬件架构和操作系统行为有很好的理解。

多线程有许多基于您的硬件和托管操作系统的实现，尽管它已经很困难，但陷阱很多。需要注意的是，要想实现“真正的”并发，线程是唯一的出路。基本上，线程是程序员在软件的不同部分之间共享资源同时允许它们并行运行的唯一方法。通过*并行*，您应该考虑标准 CPU（除了双核/多核）一次只能*做一件事*。诸如上下文切换之类的概念现在开始发挥作用，它们有自己的一套规则和限制。

我认为在你开始在你的程序中实现并发之前，你应该在这个主题上寻找更通用的背景，就像你说的那样。

我想最好的起点是[关于并发的维基百科文章](http://en.wikipedia.org/wiki/Concurrency_(computer_science))，然后从那里继续。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T23:04:05.753

通常使多线程编程成为噩梦的原因是线程共享资源和/或需要相互通信。在下载网页的情况下，您的线程将独立工作，因此您可能没有太多麻烦。

您可能要考虑的一件事是产生多个进程而不是多个线程。在您提到的情况下-同时下载网页-您可以将工作负载分成多个块，并将每个块交给一个单独的工具实例（如[cURL](http://curl.haxx.se/)）来完成工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-19T23:16:03.983

如果您的目标是实现并发，则很难摆脱使用多个线程或进程。诀窍不是避免它，而是以可靠且不易出错的方式管理它。尤其是死锁和竞争条件是并发编程中容易出错的两个方面。管理此问题的一种通用方法是使用生产者/消费者队列......线程将工作项写入队列，工作人员从中提取项目。您必须确保正确同步对队列的访问并且您已设置好。

此外，根据您的问题，您可能还可以创建一种域特定语言来消除并发问题，至少从使用您的语言的人的角度来看......当然，处理语言的引擎仍然需要处理并发，但如果这将被许多用户利用，它可能是有价值的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-19T12:42:24.847

那里有一些不错的图书馆。

[java.util.concurrent.ExecutorCompletionService](http://java.sun.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)将采用 Futures 的集合（即返回值的任务），在后台线程中处理它们，然后将它们放入队列中，以便您在它们完成时进一步处理。当然，这是 Java 5 及更高版本，因此并非随处可用。

换句话说，你所有的代码都是单线程的——但是你可以识别出可以安全并行运行的东西，你可以把它交给一个合适的库。

关键是，如果您可以使任务独立，那么只要稍微考虑一下，线程安全就不是不可能实现的——尽管强烈建议您将复杂的部分（如实现 ExecutorCompletionService）留给专家......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-19T23:02:44.803

在您的简单场景中避免线程化的一种简单方法是从不同的进程下载。主进程将调用其他进程，并带参数将文件下载到本地目录，然后主进程就可以完成真正的工作。

我认为这些问题没有任何简单的解决方案。它不是线程问题。它的并发性阻碍了人类的思想。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-19T23:17:15.383

您可以观看有关 F# 语言的 MSDN 视频：[PDC 2008: An Introduction to F#](http://channel9.msdn.com/pdc2008/TL11/)

这包括您正在寻找的两件事。（功能+异步）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-19T23:29:40.693

对于 python，这看起来是一个有趣的方法： http: [//members.verizon.net/olsongt/stackless/why_stackless.html#introduction](http://members.verizon.net/olsongt/stackless/why_stackless.html#introduction)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-20T00:30:42.553

线程是不可回避的，它们也不是“困难的”。函数式编程也不一定是答案。.NET 框架使线程相当简单。稍加思考，您就可以制作出合理的多线程程序。

这是您的网络爬虫示例（在 VB.NET 中）

```
 Imports System.Threading
Imports System.Net

Module modCrawler

    Class URLtoDest
        Public strURL As String
        Public strDest As String
        Public Sub New(ByVal _strURL As String, ByVal _strDest As String)
            strURL = _strURL
            strDest = _strDest
        End Sub
    End Class

    Class URLDownloader

        Public id As Integer
        Public url As URLtoDest

        Public Sub New(ByVal _url As URLtoDest)
            url = _url
        End Sub

        Public Sub Download()

            Using wc As New WebClient()
                wc.DownloadFile(url.strURL, url.strDest)
                Console.WriteLine("Thread Finished - " & id)
            End Using

        End Sub

    End Class

    Public Sub Download(ByVal ud As URLtoDest)
        Dim dldr As New URLDownloader(ud)
        Dim thrd As New Thread(AddressOf dldr.Download)
        dldr.id = thrd.ManagedThreadId
        thrd.SetApartmentState(ApartmentState.STA)
        thrd.IsBackground = False
        Console.WriteLine("Starting Thread - " & thrd.ManagedThreadId)
        thrd.Start()        
    End Sub

    Sub Main()

        Dim lstUD As New List(Of URLtoDest)

        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file0.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file1.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file2.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file3.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file4.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file5.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file6.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file7.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file8.txt"))
        lstUD.Add(New URLtoDest("http://stackoverflow.com/questions/382478/how-can-threads-be-avoided", "c:\file9.txt"))

        For Each ud As URLtoDest In lstUD
            Download(ud)
        Next

        ' you will see this message in the middle of the text
        ' pressing a key before all files are done downloading aborts the threads that aren't finished
        Console.WriteLine("Press any key to exit...")
        Console.ReadKey()

    End Sub

End Module 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-20T00:54:41.257

使用扭曲。“Twisted 是一个用 Python 编写的事件驱动的网络引擎” [http://twistedmatrix.com/trac/](http://twistedmatrix.com/trac/)。有了它，我可以在不使用线程的情况下一次发出 100 个异步 http 请求。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-26T23:01:54.130

您的具体示例很少通过多线程解决。正如许多人所说，这类问题是 IO 密集型的，这意味着处理器要做的工作很少，并且大部分时间都在等待一些数据通过线路到达并进行处理，同样它必须等待用于刷新磁盘缓冲区，以便它可以将更多最近下载的数据放在磁盘上。

性能的方法是通过 select() 工具或等效的系统调用。基本过程是打开一些套接字（用于网络爬虫下载）和文件句柄（用于将它们存储到磁盘）。接下来，您将所有不同的套接字和 fh 设置为非阻塞模式，这意味着在发出请求后，它不会让您的程序等待直到数据可以读取，而是立即返回一个特殊代码（通常是 EAGAIN）来指示没有数据准备好。如果您以这种方式循环通过所有套接字，您将进行轮询，这很好，但仍然浪费 cpu 资源，因为您的读取和写入几乎总是会返回 EAGAIN。

为了解决这个问题，所有的套接字和 fp 将被收集到一个“fd_set”中，它被传递给 select 系统调用，然后你的程序将阻塞，等待任何套接字，当有一些套接字时会唤醒你的程序要处理的任何流上的数据。

* * *

另一种常见情况，计算绑定工作，毫无疑问，最好通过某种真正的并行性（与上面介绍的异步并发相反）来访问多个 cpu 的资源。如果您的 cpu 绑定任务在单线程架构上运行，请务必避免任何并发，因为开销实际上会减慢您的任务。

# logging - 如何禁用控制台的 log4net 状态消息？

> ID：382479
> 
> 赞同：12
> 
> 时间：2008-12-19T22:55:26.770
> 
> 标签：logging, console, log4net

我在我的 .NET 3.5 控制台应用程序中使用 log4net，并希望在控制台标准输出和 RollingFileAppender 中都能看到我生成的日志消息。文件输出就像一个魅力，但是当我执行时，我看到一串状态消息流向控制台标准。我想跳过所有状态信息，只看到我以编程方式生成到日志文件的相同消息。

这是我运行应用程序后看到的示例：

```
log4net: XmlHierarchyConfigurator: Configuration update mode [Merge].
log4net: XmlHierarchyConfigurator: Logger [root] Level string is [DEBUG].
log4net: XmlHierarchyConfigurator: Logger [root] level set to [name="DEBUG",value=30000].
log4net: XmlHierarchyConfigurator: Loading Appender [Console] type: [log4net.Appender.ConsoleAppender]
log4net: PatternParser: Converter [message] Option [] Format [min=-1,max=2147483647,leftAlign=False] 
```

它会一直持续下去，直到它描述了记录器对象的整个实例化。

我该如何关闭它？我可以吗？我已经尝试了各种配置文件设置，但没有什么能让这些消失！呃……

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2010-08-24T10:33:58.307

设置调试 = 假

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>

  <log4net debug="false">
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="your file name" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n" />
      </layout>
    </appender>

    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
  </log4net>
</configuration> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-13T22:09:48.493

我刚刚遇到了同样的问题（不出所料，这就是我发现这个问题的方式）。

无论如何，我的问题，也可能是你的问题，是由“ `<`log4net debug=true `>`”的 web/app 配置文件设置引起的。太明显了吧？我已经从 web 片段中粘贴了我的 app.config 设置的骨架，并且专注于附加程序，并没有真正让根 log4net 元素再看一眼。但是你现在有了。这在常见问题解答中，但其他事情再次引起了我的注意，而不是这个属性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-10T03:03:51.947

如果你的代码中有这个：

```
log4net.Config.BasicConfigurator.Configure(); 
```

将其更改为：

```
log4net.Config.XmlConfigurator.Configure(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-20T18:18:22.820

请尝试使用新项目一步来复制问题（首先参考没有附加程序的 log4net，然后使用控制台附加程序，然后使用两个附加程序）。如果它显示相同的行为，请发布 log4net 的完整配置。

您也可以尝试使用[log4net 配置示例页面](http://logging.apache.org/log4net/release/config-examples.html)中的配置示例。

**编辑：**这可能是这些消息的原因：[如何启用 log4net 内部调试](http://log4net.sourceforge.net/release/1.2.0.30316/doc/manual/faq.html#internalDebug)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-05T14:57:07.857

在我继承的应用程序中，有一行：

```
<appSettings>
   <add key="log4net.Internal.Debug" value="true"/> 
```

改变它来`false`解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-03T06:15:19.513

Could you provide what your log4net config section looks like, or at least how you have it configured? My best guess is that [this answer](https://stackoverflow.com/questions/382479/how-do-i-disable-log4net-status-messages-to-the-console#383562) is correct in that you have log4net internal debugging configured. Either that or you're have the source of log4net in your project and you're compiling it with your own code. That would cause it to pick up your configurations and run it the same way.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-04T19:13:21.737

我和OP有同样的问题。在 log4net.config 中，我设置了 debug = false。我也有一个定义了 PatternLayout 的 FileAppender 集。当我使用 log.Warn("test") 时，我将预期的格式化结果写入预期的 txt 文件。但是，我还得到了一个更详细的字符串写入控制台（stdout）。

**编辑：**对我来说，解决方法是在我的代码 *BasicConfigurator.Configure();中消除这一行。* 请注意，我的配置中没有明确告诉 log4net 写入控制台和声明的 FileAppender。实际上，声明了 log4net debug=false 并且问题继续存在。log4net主页上的示例代码不小心调用了BasicConfigurator.Configure()；尽管我确实使用了 log4net，但该库也遇到了许多雄心勃勃的开源项目的相同问题。存在冗长的 XML 驱动配置，为开发人员提供了数以千计的选项来完成一项真正应该有更简化的界面可用的任务。程序员不倾向于珍惜彼此的时间。我们在我们的用户界面中应用“不要让我思考”规则，而不是在我们的机器界面中。就好像我们鄙视一个对良好设计普遍适用的核心原则。开发人员应该可以使用复杂性，但是不应该浪费几个小时来完成核心功能。考虑到这一点，我会说 log4net 设计不佳。与大多数软件一样，为了复杂性而存在很多复杂性。如果指导该项目的开发人员更有才华，那么库的最常见用例（引用然后使用它登录到应用程序文件夹中的文本文件）可以在没有任何先前知识的情况下通过 5-10 分钟的公开来实现。情况并非如此，因为界面设计和配置方法。它突出了我讨厌大多数软件工程师思考方式的原因。他们无法看到最常见用例的简单性的指数价值，而是假设他们使界面越令人费解，它将为其他开发人员增加更多价值。他们受自我和无知的驱使。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-21T11:40:29.440

好吧，它确实说根记录器级别设置为调试。如果无法访问您的配置文件或启动日志记录的代码，我猜您正在隐式使用根记录器的默认值，即

1.  转到命令行 (stdout)，然后
2.  默认为 DEBUG

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-01T08:54:00.547

请查看[log4net 常见问题解答](http://logging.apache.org/log4net/release/faq.html)。他们确实拥有您可能遇到的所有常见陷阱。

# c++ - C++专家：在这些条件下，成员变量与其类常量的偏移量是多少？

> ID：382480
> 
> 赞同：6
> 
> 时间：2008-12-19T22:55:40.217
> 
> 标签：c++

给定一个`foo`类型`FooClass*`的变量和该类中名为 的成员变量，在任何情况下具有一些约束的情况下，`bar`两者之间的距离`foo`是相同的：`&(foo->bar)`

1.  `FooClass`是非 POD 类型。

2.  我们知道它`foo`总是指向 的一个实例`FooClass`，而不是它的某个子类型。

3.  我们只关心单个编译器和单个编译下的行为；也就是说，在 gcc 下这可能导致的值永远不会在使用 MSVC 编译的代码中使用，并且永远不会保存以在编译之间重新使用。它以二进制计算并在二进制中使用，就是这样。

4.  我们不使用 custom `new`，尽管该类的某些实例可能是堆栈分配的，而一些是堆分配的。

5.  没有明确`ctor`的 for `FooClass`; 它依赖于编译器生成的（并且每个字段`FooClass`都是 POD 或默认可构造的）。

我无法在标准中找到任何一种方式的保证（我也没有预料到），但我对 gcc 的初步测试让我相信它总是会出现这种情况。我也知道这种保证是针对 POD 类型的，但是让我们假设这种类型不能是 POD。

**更新/澄清：**这仅适用于单个二进制文件的单个编译；计算出的偏移量永远不会离开那一次执行。基本上，我希望能够在静态映射中唯一标识一个类的字段，然后能够在该映射中查找某些宏/模板/EVIL 技巧。这只是为了我自己的娱乐，没有生命支持机器会依赖这个代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-19T23:39:52.390

编译程序后，**Yes***。

偏移量将保持不变。

但是，有一个非常重要的限制： **foo 必须专门指向 FooClass 对象**。不是从 FooClass 派生的类，也不是其他任何东西。

C++ 对成员偏移量进行 POD 区分的原因是，多重继承和 vtable 指针的位置（或缺少）都可能导致对象的地址与该对象的基地址不同的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T23:09:29.503

我不是专家，但无论如何我都会尝试回答你:)

1.  FooClass 是非 POD 类型。这意味着它可以有多个`private`,`public`或的部分`protected`。在这样的部分中，顺序是成员定义的顺序，但在这些部分中，顺序是任意且未指定的。
2.  foo 将始终指向 FooClass。好吧，所以我们保证没有进行偏移调整。至少在一次编译中，偏移量将是相同的（没有备份的标准报价。但如果它们不同，它将无法工作）。
3.  我们只关心单个编译器的行为。好吧，由于访问修饰符的各个部分未指定成员的顺序，并且允许编译器在成员之间放置填充，因此这不会给我们带来太多好处。
4.  我们只关心堆栈上的对象（自动存储持续时间）。好吧，我看不出这会如何改变对象布局。

所以毕竟我不认为你有任何保证偏移量在编译过程中是不变的。对于一个编译中的考虑（因此，如果我们使用一个编译器，其生成的代码使用随每次不同编译而变化的 ABI），偏移量就不能不同。但是，即使您知道偏移量，也无法访问该成员。您访问成员的唯一方法是使用成员访问运算符`->`和`.`（在 9.2/9 中说）。

为什么不使用数据成员指针？它们允许安全地访问成员。这是一个示例：（[按名称查找成员](https://stackoverflow.com/questions/286402/initializing-struct-using-an-array#287353)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-19T23:23:51.937

在一个编译器设置总是相同的编译器下，没有任何东西添加到 FooClass 中或从 FooClass 中删除，那么是的，存储的地址之间的距离`foo`将`&(foo->bar)`始终相同，否则编译器将无法生成跨编译单元工作的正确代码。

但是，一旦您向类添加任何内容或更改编译器设置，所有的赌注都将被取消。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-19T23:26:40.433

据我所知，无论是否是 POD 类，都应该如此。在编译时，根据编译器、体系结构、设置等，编译器确定类的大小及其所有成员的偏移量。然后，对于编译单元中类的所有实例（如果保留单一定义规则，则通过扩展链接单元），这是固定的。

由于编译器按字面意思处理类型指针，即使底层类型错误（例如：指针被错误地转换为 c 样式），计算出的 &foo 和 &(foo.bar) 之间的距离将是相同的，因为偏移量是在编译时静态已知。

注意：这肯定已经有效地完成了。例如，请参阅 Microsoft 的 ATL 数据绑定代码，使用他们的“offsetof”宏...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T23:10:27.533

有两件事会影响对象的内部布局：

*   成员对象的大小。如果您更改成员定义，希望您能重新编译所有受影响的模块。
*   打包 pragma 可能会更改在成员之间添加的填充。确保使用该类的所有模块的打包是相同的，或者至少是定义该类的部分。如果你不这样做，你会遇到比不可预测的偏移更大的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-19T23:15:46.697

底线：如果此类包含 POD 以外的任何内容，那么您绝对不能对偏移量做出任何假设。如果该类只是公共 POD 的集合，那么您是安全的。

这是一本优秀的中级 C++ 书中章节的一部分的链接。如果你对 C++ 很认真，我建议大家阅读这本书。

这个特别的摘录解决了这里提出的问题的一部分：

[http://my.safaribooksonline.com/0321321928/ch11?portal=oreilly](http://my.safaribooksonline.com/0321321928/ch11?portal=oreilly)

其余的详细信息，请查看本书。我上面的“底线”是对本章的简单总结。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-20T01:54:14.863

是的，偏移量是在编译时确定的，因此只要您不比较编译器或编译器之间的偏移量，它就始终是常量。

# visual-studio-2008 - 在 Visual Studio 2008 中使用 sql server 2005 数据库项目的最佳实践

> ID：382482
> 
> 赞同：2
> 
> 时间：2008-12-19T22:57:53.067
> 
> 标签：visual-studio-2008, sql-server-2005, continuous-integration, tfsbuild

在 Visual Studio 2008 中使用“sqlserver 2005 数据库项目”的最佳实践是什么？

我创建了一个项目文件。如何为存储过程、视图和表创建脚本？我将如何生成脚本来填充一些查找数据？

在数据库已经部署到生产环境后，我将如何处理可能需要在生产服务器上运行的修改。（我想我会使用所有更改脚本创建以部署**日期命名的文件夹）**

有没有办法让 Team Build 拆除并重建数据库以测试所有脚本是否正常工作？

我一直无法在网上找到散步。如果您能指出我正确的方向，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T00:05:30.327

我一般不使用VS中的数据库项目类型。我最喜欢处理数据库的工具是[Red Gate 的 SQL Compare](http://www.red-gate.com/products/SQL_Compare/index.htm)（SQL Data Compare 也不错）。脚本总是与 qa/production 不同步，而这个工具会挽救你的生命（嗯，至少可以节省你的时间和理智）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-01T08:45:33.987

**无论采用何种技术，管理任何**数据库生命周期的最佳实践是：

1.  您应该能够一步构建您的项目。这包括运行您的单元测试、集成测试、回归测试以及通过扩展测试您的迁移。（当然，这是[The Joel Test](http://www.joelonsoftware.com/articles/fog0000000043.html)中的第 2 点。）
2.  通过扩展，您应该能够一步部署数据库更改。

至少，您应该从您的自动化构建中获得一些可以在您的生产服务器上运行而无需调整的东西，以便在升级程序时将您的数据库升级到新版本。Ruby on Rails 迁移是一个很好的例子，说明了它应该如何完成。

不幸的是，SQL Server 2005 数据库项目采用了完全不同的方法，据我所知，这与这些原则完全不兼容。他们确实提供“增量部署”，但似乎这完全基于模式比较工具。模式比较作为一个起点很有用，但有许多数据库重构它们无法处理，而且通常情况下，您将不得不对它们进行调整（由于冗长、难以阅读他们生成的意大利面条代码。）

我写了一篇博文，我[在其中更详细地研究了这些问题](http://jamesmckay.net/2009/06/why-sql-server-2005-database-projects-in-vsts-are-a-bad-idea/)。

# php - 如何阻止 PHP 类执行？

> ID：382485
> 
> 赞同：5
> 
> 时间：2008-12-19T22:59:04.250
> 
> 标签：php, exception, class

我正在寻找类似`break`for 循环的东西。

这是一些示例代码（使用 Symfony 的石灰），其中`stop()`不会让类继续并且`I_DONT_WANT_THIS_TO_RUN()`不会被执行。

```
$browser->isStatusCode(200)
  ->isRequestParameter('module', 'home')
  ->isRequestParameter('action', 'index')
  ->click('Register')
  ->stop()
  ->I_DONT_WANT_THIS_TO_RUN();
$browser->thenThisRunsOkay(); 
```

`$this->__deconstruct();`从内部调用`stop()`似乎并不奏效。有没有我可以调用的函数可以`stop()`实现这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-19T23:08:18.617

您可以使用[PHP 异常](http://php.net/exceptions)：

```
// This function would of course be declared in the class
function stop() {
    throw new Exception('Stopped.');
}

try {
    $browser->isStatusCode(200)
      ->isRequestParameter('module', 'home')
      ->isRequestParameter('action', 'index')
      ->click('Register')
      ->stop()
      ->I_DONT_WANT_THIS_TO_RUN();
} catch (Exception $e) {
    // when stop() throws the exception, control will go on from here.
}

$browser->thenThisRunsOkay(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-19T23:52:31.427

只需返回另一个类，它将为每个调用的方法返回 $this。

例子：

```
class NoMethods {
    public function __call($name, $args)
    {
        echo __METHOD__ . " called $name with " . count($args) . " arguments.\n";
        return $this;
    }
}

class Browser {
    public function runThis()
    {
        echo __METHOD__ . "\n";
        return $this;
    }

    public function stop()
    {
        echo __METHOD__ . "\n";
        return new NoMethods();
    }

    public function dontRunThis()
    {
        echo __METHOD__ . "\n";
        return $this;
    }
}

$browser = new Browser();
echo "with stop\n";
$browser->runThis()->stop()->dontRunThis()->dunno('hey');
echo "without stop\n";
$browser->runThis()->dontRunThis();
echo "the end\n"; 
```

将导致：

```
with stop
Browser::runThis
Browser::stop
NoMethods::__call called dontRunThis with 0 arguments.
NoMethods::__call called dunno with 1 arguments.
without stop
Browser::runThis
Browser::dontRunThis
the end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T03:45:21.927

OIS 的答案非常好，尽管我可以看到如果对象突然变成其他东西可能会让人感到困惑。也就是说，您希望在链的末端，您最终会得到相同的对象。为了避免这个问题，我会添加一个私有变量来告诉班级是否实际做任何事情。如果课程已经停止，那么每个课程都会`$this`立即返回。这为您提供了能够重新启动执行的额外好处。

```
class MyClass {
    private $halt;

    function __call($func, $args) {
        if ($this->halt) {
            return $this;
        } else {
            return $this->$func($args);
        }
    }

    private function isRequestParameter() {
        // ...
    }
    public function stop() {
        $this->halt = true;
    }
    public function start() {
        $this->halt = false;
    }
} 
```

这可以放入父类中，因此您不必复制此代码。

# .net - 如何使用 NGEN 二进制文件安装 IronPython 2.0？

> ID：382487
> 
> 赞同：2
> 
> 时间：2008-12-19T23:00:36.040
> 
> 标签：.net, ironpython

有谁知道如何使用 MSI 包安装 IronPython 2.0 和 NGEN 的二进制文件？[IronPython 官方主页](http://www.codeplex.com/IronPython)说 NGEN 选项将大大缩短启动时间，但由于某种原因，它默认没有启用。它实际上并没有说明您需要传递哪些 MSI 参数才能启用它，而且我在网站上找不到文档页面，所以我希望这里有人知道。（澄清：我正在为分发到多台机器进行静默安装，所以我正在寻找命令行参数，谢谢）

我问这个是因为在我的笔记本电脑上，一个简单的“hello world”脚本的开始时间大约是 5-6 秒，配备 2+ghz Intel Core 2 Duo w/4gig。每次我跑步时都会发生这种情况。我希望这个 NGEN 选项可以解决这个问题，因为它现在很慢，几乎感觉就像我在使用一种编译语言。

**更新**： srivatsn 有使用 NGENDLLS=True 命令行参数的正确答案。

为了将来参考，这里是我用来静默安装 IronPython 2.0 的完整 MSI 命令行：

```
msiexec /qn /i "IronPython.msi" NGENDLLS=True 
```

* * *

感谢 Igal，但我实际上是在进行静默安装（通过 msiexec /qn）以集中分发到多台机器。有谁知道启用 NGEN 选项的命令行参数（非 UI）是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-20T01:00:06.410

尝试从命令行传入 NGENDLLS=True 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T23:07:15.543

**更新 1：** 如果您使用脚本进行大规模分发，那么您可能只能从您的脚本中获取 ngen。此外，[ironpython 邮件列表](http://lists.ironpython.com/listinfo.cgi/users-ironpython.com)非常敏感，您可以尝试在那里提出您的问题。

**更新 0：** 在最终版本中，有一个复选框可以启用 ironpython 程序集的生成。只需在安装过程中检查它。也许你安装了 rc realese，据我所知，没有这个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T02:30:05.870

与直接问题无关，但如果您正在寻找一般的加速，您还可以通过将其设为空来查看修改标准 site.py。您还可以查看使用 pyc.py 示例来预编译所有标准模块（然后也使用该 DLL）。

# wordpress - 在 WordPress 中创建帖子之间的关系

> ID：382488
> 
> 赞同：-1
> 
> 时间：2008-12-19T23:00:51.937
> 
> 标签：wordpress

有没有办法在 WordPress 中的两个帖子之间创建明确的关系，而不管这些帖子可能属于什么类别？

这个想法是，在帖子模板中，它将获取并列出当前帖子的相关帖子。

我猜你可以使用标签将帖子组合在一起来实现这一点，但这似乎是对标签系统的劫持，其目的并非旨在达到目的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T23:10:35.070

将帖子 ID 添加为元数据有帮助吗？我写了一个快速技巧来显示提交给 Digg 的帖子的 Digg 框。我正在手动添加`digg_url`带有 Digg URL 的元字段。也许您可以添加多个`related__post`字段并添加一些代码来遍历所有字段并呈现帖子链接？您是否正在寻找更自动化的解决方案？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T23:19:52.523

也许我没有抓住重点，但类别不只是为了那个目的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-28T22:02:30.730

我可能错过了理解这个问题。但是标签、档案和类别​​可以根据这种共同的联系来“连接”帖子。

除此之外，我只能看到...

1.  手动将帖子与博客文章的文本链接或

2.  使用插件。我的两个用户是相似的帖子（[http://rmarsh.com/plugins/similar-posts/](http://rmarsh.com/plugins/similar-posts/)）和 SEO 智能链接（[http://www.prelovac.com/vladimir/wordpress-plugins/seo-smart-links](http://www.prelovac.com/vladimir/wordpress-plugins/seo-smart-links)）

如果高度可配置，并且允许博客自动建议“相关帖子”和 SEO 智能链接、链接（在帖子中）单词或短语到相关帖子，则类似帖子。

一切顺利

斯蒂芬

# achievements - 2008年你在编程方面取得了哪些成就？

> ID：382496
> 
> 赞同：0
> 
> 时间：2008-12-19T23:02:53.960
> 
> 标签：achievements

2008年你在编程方面取得了哪些成就？今年有哪些技术让你感到惊讶或学到了什么，你对 2009 年的编程术语有什么期望

编辑：更改为 Wiki

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T23:21:34.017

1.  我编写了 2 个 VB.NET 语言功能，它们将作为 VS 2010 的一部分提供。

2.  我设计了一种名为 Liberty 的编程语言，

    但是，我只实现了其中的一小部分。我停止了这方面的工作，以便专注于建立一家盈利的软件公司。我最初的意图是将该语言（实际上是它的 IDE）作为我的第一个产品进行营销，但是鉴于编程语言的经济性，我决定为我公司的第一个产品选择其他东西。我一直在考虑把它变成一个开源项目。如果“一种感觉像 LISP，但看起来像 C# 的编程语言......”这句话对您有任何吸引力，并且您对开发开源 .NET 编译器感兴趣，请告诉我。

3.  我创办了自己的软件公司

4.  我设计并实现了我公司的第一个产品“Transactor Code Agent”的大部分内容，该产品应该在 2009 年第一季度发布。我一直将其称为“程序员的灾难恢复工具”。

    它是一个为源代码提供自动本地版本历史记录的工具。您将它指向包含您的源的文件夹，然后每当您对文件进行更改时，它会自动为您创建一个备份。它旨在通过保护您通常不会检查到源代码控制中的所有“损坏的”、“进行中的”工作来对现有的源代码控制设置进行补充。

    顺便说一句，我们正在寻找 Beta 测试人员。如果你感兴趣，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T23:39:13.653

在斯科特外出之后，我会因为承认我在 2008 年所取得的成就而感到深深的耻辱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-20T00:13:00.387

通过从中删除功能，我使我的“旗舰”应用程序之一变得更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T00:00:41.037

第一次，我通过 App Store 将我的作品卖给了普通观众。这样做，我：

*   达到的用户数量是我以前最广泛使用的作品的五倍以上（26000+ 而不是 5000+）
*   赚的钱是我之前最赚钱的工作的三倍多（2005 年谷歌编程之夏）
*   坚持多年 Perl 学习了两个新环境（Objective-C/Cocoa Touch 和 Ruby/Rails）
*   自律足以完成无聊的部分
*   了解对成千上万的人负责意味着什么

但也许最重要的是，我做出了我可以引以为豪的美丽事物。

在 2009 年（或者可能是 08 年末），我将发布一个新产品，我希望它能够将这一切推得更远，甚至可能成为解决每个人面临的问题的最佳解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T00:11:05.260

1.  帮助将另一个版本推向门（还没有）
2.  在 WorldComp 上发表了一篇关于加速 Hough 变换的论文
3.  平均每周只写一篇博文
4.  建立了在声誉上追赶约翰斯基特的希望
5.  是否有大量关于反射和动态代码生成的奇怪工作
6.  放弃了名誉追赶约翰斯基特的所有希望
7.  管理三名员工，或多或少成功

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T23:09:21.733

我决定学习一门新的语言，当时没有什么特别的，从那时起我就学会了 Python。

在接下来的一年里，我想学习另一种语言，最好是 c++ 之类的，或者可能只是（我是一个 *nix 有点'家伙）我会尝试使用 .net 之类的 Microsoft 堆栈，但我们会看看会发生什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T23:09:22.513

提高面试技巧。现在，我能够通过更好的问题（包括小型白板编码会议）更好地辨别申请人的好坏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-19T23:15:02.907

我已经跟上了 Drupal 的步伐，但还有很多东西要学。第一次真正使用一个*好的*框架。

2009 年，也许我会做一些 lisp 的乐趣

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-19T23:21:24.970

我向动态语言和函数式语言的世界敞开了大门。我可以使用 {} 和 ; 来阅读不类似于 C++ 或 C# 类型代码的程序。在此过程中，人们对 MVC 等模式有了更好的理解。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-19T23:28:45.563

我需要在今年 12 月初学习 PF，因为我们现有的防火墙解决方案对于工业应用来说功能严重不足，但我们没有足够的资金来学习“专业”解决方案（即 ci$cso 的东西）。

所以我最终将我现有的 OpenBSD 盒子放在服务器堆栈中，并使用 PF 将其变成防火墙。由于系统使用多个服务器和多个 IP（一些在域上），我需要 NAT、RDR 和通常的规则的组合。

它当然不像学习 APL 或 LISP（或 Ruby 等）那样有趣，但它是必要且紧迫的。

新的防火墙运行良好，我不再需要每周两次重置可怕的小防火墙设备（这必须远程完成，这也不好玩）。:-)

干杯，

-理查德

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-19T23:33:15.680

好吧，我已经建立了一个大网站（用于某些项目）并学习了 java，现在我想为来年学习 C。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-12-19T23:37:57.120

1.  我将我的第一个程序发布到了互联网的狂野世界。

2.  通过在 Objective-C 中创建前面提到的程序，我走出了我的 .NET 泡沫。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-12-19T23:44:24.143

我构建了一个非常酷的字符串提取实用程序和相应的处理库，以促进在本机 C++ 应用程序中自动本地化字符串资源，而无需重构代码以从使用字符串的位置提取字符串，另外还有一个好处是允许跨语言字符串池化本地化字符串。

我还构建了一个很酷的 operator_cast<> 函数（在 SO 社区的[帮助](https://stackoverflow.com/questions/209793/any-way-to-cast-with-class-operator-only)下），以帮助在使用自定义转换运算符时编写编程意图。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-12-20T00:08:05.173

1- 我对之前编写的国际葡萄酒大赛软件进行了更改。之所以更改，是因为新赞助商在比赛中有不同的逻辑，我们在 3 天前收到有关更改的通知，所以我和一个朋友连续 2 天编写代码，字面意思是从工作到比赛以提供支持. 最后一切都完美无瑕

2.- 为视频游戏零售商发布了我的第一个销售和库存程序

3.- 开始我的编码博客

当然都在.Net中

# c# - LINQ to Object 帮助

> ID：382501
> 
> 赞同：3
> 
> 时间：2008-12-19T23:05:42.117
> 
> 标签：c#, linq

我有以下实体结构：

```
public class Party
{
    public Int32 PartyId { get; set; }
    public List<PartyRelationship> RelationShips { get; set; }
}

public class PartyRelationship
{
    public Int32 PartyId { get; set; }
    public Int32 RelatedPartyId { get; set; }
} 
```

现在，如果我创建一个 Party 对象的通用列表，例如 List，我如何针对该列表编写一个 LINQ 查询，该查询将返回与基于 RelatedPartyId 的特定 PartyId 有关系的所有 PartyRelationship 对象？LINQ 查询需要评估为 Party 定义的所有关系的 RelatedPartyId，并将其与我正在搜索的特定 PartyId 进行比较。找到匹配项后，我希望在结果中返回特定的 PartyRelationship 对象。顺便说一句，可以发生不止一场比赛。

谁能提供一些关于我如何做到这一点的见解？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T23:10:27.160

你的意思是：

```
 var query = from party in parties // the list
                where party.RelationShips != null // overkill???
                from related in party.RelationShips
                where related.RelatedPartyId == id
                select related; 
```

# php - 使用 Zend_Form 从数据库中填充选择

> ID：382509
> 
> 赞同：1
> 
> 时间：2008-12-19T23:07:39.647
> 
> 标签：php, zend-framework, zend-form

填充作为 Zend_Form 一部分的选择元素的最佳方法是什么？

我习惯于`populate()`填写各种表单元素值，但选择语句不会被填充。

我的解决方案（可行但我怀疑并不理想）如下：

在(which extends ) 的`init()`方法中，我进行数据库调用并获取所需的数据。`MyForm``Zend_Form`

```
$opt = Zend_Registry::get('dbAdapter');
$sql = 'SELECT DISTINCT foo FROM bar';
$res = $opt->fetchAll($sql);
$flat = $this->flattenArray($res); //this flattens the array and 
                                   //sets the keys to equal the values 
```

此时我传递`$flat`给正确选择元素的多选项值。然后，当控制器获取视图的表单时，如果需要填充表单，我会在其上调用填充，并且所有内容都显示为正确填充。

我看到的一些问题：首先我在表单的`init()`方法中有这个数据库调用，所以每次使用表单时都会调用它。其次，我打开了一个数据库连接以填充选择元素，然后我进行第二个连接以使用填充。

有什么更好的方法来完成这一切？我想做一个数据库连接并使用填充来填充所有内容并在我的控制器中完成所有操作，而不是在扩展表单类和控制器之间拆分它。这是最好的方法吗？这是我的定制解决方案，它有效，但我知道它远非理想

（顺便说一句，作为一个独自工作并在一个孤立的地方工作的人能够向stackoverflow提出这样的问题，就好像我正在抓住一个同事问一个问题一样，对我来说非常有用......谢谢）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T06:56:18.797

我不是 100% 确定你在追求什么。我解释说，您的示例中的 SQL 调用针对一个页面视图执行了多次，您不喜欢这样吗？

您可以缓存选择的内容

*   在 init 函数或类中具有静态变量的页面视图。
*   用户作为会话变量。
*   所有用户都使用 Zend_Cache 来归档或 memcache，这取决于它是如何动态生成的。

# forms - Delphi：应用程序初始化 - 最佳实践/方法

> ID：382527
> 
> 赞同：3
> 
> 时间：2008-12-19T23:13:05.487
> 
> 标签：forms, delphi, initialization, datamodule

我经常遇到这个问题，我只是在寻找最佳实践/方法。我有一个包含数据库/数据模块的应用程序，并希望在启动时启动数据库/数据集，而在设计时将“运行时活动”设置为 true（数据库位置不同）。当应用程序启动时，还要运行一个网络“检查更新”例程。

给定 TForm 事件序列，以及各种试验和错误的结果，我目前正在使用这种方法：

我使用在主窗体中设置的“全局”记录来存储所有全局变量，其中有一个元素称为 Globals.AppInitialized（布尔值），并在主窗体的初始化部分将其设置为 False。

在主窗体的 OnShow 事件（所有窗体都由那时创建），我测试 Globals.AppInitialized; 如果它是假的，我运行我的“初始化”东西，然后通过设置 Globals.AppInitialized := True 来完成。

这似乎工作得很好，但它是最好的方法吗？从他人的经验、想法和意见中寻找洞察力。蒂亚..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-20T03:42:08.250

我通常总是关闭所有表单的自动创建，除了主表单和可能的主数据模块。

我了解到您可以做的一个技巧是将您的数据模块添加到您的项目中，允许它在您的主表单之前自动创建和创建。然后，当您的主窗体创建时，数据模块的 onCreate 将已经运行。

如果您的应用程序有一些代码要说，请设置控件的焦点（您不能在创建时执行此操作，因为它“尚不可见”）然后创建一条用户消息并将其发布到 oncreate 中的表单。一旦处理完表单消息循环，就应该（不保证）处理消息。例如：

```
const
  wm_AppStarted = wm_User + 101;

type
  Form1 = class(tForm)
    :
    procedure wmAppStarted(var Msg:tMessage); message wm_AppStarted;
  end; 

// in your oncreate event add the following, which should result in your wmAppStarted event firing.
PostMessage(handle,wm_AppStarted,0,0); 
```

我想不出有一次这个消息从未被处理过，但调用的本质是它被添加到消息队列中，如果队列已满，则它被“丢弃”。请注意存在边缘情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-20T00:37:28.250

您可能希望在表单创建调用之后和 Application.Run 之前直接干扰项目源（.dpr 文件）。（或者甚至更早，以防万一。）

这就是我通常处理此类初始化内容的方式：

```
...
Application.CreateForm(TMainForm, MainForm);    
...
MainForm.ApplicationLoaded; // loads options, etc..
Application.Run;
... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-20T11:00:32.470

我不知道这是否有帮助，但我的一些应用程序没有自动创建任何表单，即它们在 IDE 中没有主表单。

以 Application 对象为其所有者创建的第一个表单将自动成为主表单。因此，我只自动创建一个数据模块作为加载程序，并让这个数据模块决定何时创建哪些数据模块以及以什么顺序创建哪些表单。这个数据模块有一个 StartUp 和 ShutDown 方法，它们在 dpr 中被称为 Application.Run 周围的“括号”。ShutDown 方法对关闭过程提供了更多控制。

当您为应用程序的不同用例设计了不同的“主窗体”或者您可以使用一些配置文件来选择不同的主窗体时，这会很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T00:26:41.313

Delphi 中实际上没有“全局变量”这样的概念。所有变量的范围都限于它们所在的单位和使用该单位的其他单位。

只需将*AppInitialized*和*Initialization*内容作为数据模块的一部分。基本上有一个类（或数据模块）来统治你所有的非 UI 东西（有点像 One-Ring，除了不是所有的邪恶之类的东西。）

或者，您可以：

*   从您的启动画面调用它。
*   在登录时进行
*   在后台线程中运行“检查更新”——不要强迫他们*现在*更新。像 Firefox 那样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-19T23:39:30.423

我不确定我是否理解您为什么需要全局变量？现在，我编写所有的 Delphi 应用程序时都没有一个全局变量。即使我确实使用了它们，每个应用程序我也从来没有超过过几个。

所以也许你需要先想想为什么你真的需要它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-08T12:32:46.053

我使用主数据模块检查数据库连接是否正常，如果不正常，则显示自定义组件表单来设置数据库连接，然后加载主表单：

```
Application.CreateForm(TDmMain, DmMain);

  if DmMain.isDBConnected then
    begin
      Application.CreateForm(TDmVisualUtils, DmVisualUtils);
      Application.CreateForm(TfrmMain, frmMain);
    end;

  Application.Run; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-21T13:42:31.720

我使用的一个技巧是在主窗体上放置一个 TTimer，将时间设置为 300 毫秒，然后执行任何初始化（数据库登录、网络文件复制等）。启动应用程序会立即打开主窗体并允许任何初始化“东西”发生。用户不会在启动多个实例时想“哦……我没有 dbl-click……我会再做一次……”

# sharepoint - 如何更新 SharePoint 中列表的 SPItemEventReceiver 程序集版本？

> ID：382535
> 
> 赞同：2
> 
> 时间：2008-12-19T23:16:10.033
> 
> 标签：sharepoint, event-receiver

我们有一个 SPItemEventReceiver 编译到它自己的程序集中。

我们正在使用 STSDev 将此 EventReceiver 作为一项功能打包一个 SharePoint 解决方案。我没有将 SPItemEventReceiver 分配给 elements.xml 中的特定 ListTemplateId，而是在 feature.xml 中链接一个 ReceiverAssembly 并以编程方式将 SPItemEventReceiver 分配给多个 SPList 项。

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
        foreach (SPWeb web in site.AllWebs)
        {
            SPListCollection webListCollection = web.Lists;

            foreach (SPList myList in webListCollection)
            {
                if (myList.Title == "Lab Reports")
                {
                    SPEventReceiverDefinitionCollection receivers = myList.EventReceivers;
                    SPEventReceiverDefinition receiver = receivers.Add();
                    receiver.Name = "PostUpdateLabReport";
                    receiver.Assembly = "LabReportEventHandlers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1111111111111";
                    receiver.Class = "LabReportEventHandlers.LabReportsHandler";
                    receiver.Type = SPEventReceiverType.ItemUpdated;
                    receiver.Update();
                    break;
                }
            }

            web.Dispose();
        }
    } 
```

我正在使用 FeatureDeactivating 与上述代码相反，从列表中删除 EventReceiver。

**问题：**

以后 LabReportEventHandlers 更新，版本发生变化，我应该如何处理？

这些是我能想到的选项：

1.  停用/重新激活功能——我会将更新后的 dll 包装回 SharePoint 解决方案文件，更改上面的代码以反映新版本，然后使用 stsadmin 升级解决方案。然后我会停用/重新激活该功能。

2.  将程序集重定向添加到 web.config。

3.  不要碰撞 LabReportEventHandlers 版本号。

更改解决方案版本是否对我有帮助？

我认为这3个选项存在问题：

1.  停用该功能后，有人可以在我重新激活之前更新项目。

2.  我不想手动编辑 web.config，所以我会改用 sharepoint API。我将在哪里运行该代码？

3.  这是完全错误的，但很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-21T18:51:00.473

也许您可以将易于更改的逻辑封装到一个单独的程序集中，由您的事件处理程序引用和使用。这样，事件处理程序本身就不必更改，您只需将更新的“逻辑”程序集适当地部署到 GAC 或 bin 目录。

HTH, jt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T06:28:24.827

我不确定您想要升级什么，是否要将新事件处理程序应用于旧列表或仅用于新列表。

对于仅升级新列表，您可以将程序集信息放在单独的文件中，在 FeatureActivated 方法中读取该文件，然后应用新值。升级时，您需要做的就是更新单独的配置文件，任何新的激活都将使用新的值和版本号。

如果您需要升级旧的事件处理程序，您可以执行类似的过程，但在删除旧的之前添加新的功能接收器。如果您以相同的方法执行此操作，则添加新处理程序和删除旧处理程序之间的时间将是最短的，并且任何人在该确切时间添加项目的机会接近于零。如果您想一直归零，您可以隐藏列表或使用额外的 ItemUpdated 事件处理程序来检查升级是否正在进行，如果是则停止更新。

所以，简而言之：对于新列表，从外部文件中读取程序集配置对于旧列表，在删除旧处理程序之前添加升级的程序集信息。

.b

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-04T20:29:51.797

如果需要执行程序集的（旧的和新的）版本，我只使用程序集版本控制。我在事件接收器上从来不需要这个。因此，我不会更改事件接收器的程序集版本。

# java - 在线 Java 书籍

> ID：382536
> 
> 赞同：1
> 
> 时间：2008-12-19T23:16:40.503
> 
> 标签：java

有没有像*Dive into Python*这样的在线 Java 书籍来学习 Python？

除了标准 Java 文档之外的其他在线资源（这很棒，但几乎太技术化了）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-19T23:18:23.150

绝对是 Bruce Eckel 的“ [Thinking in Java](http://www.mindview.net/Books/TIJ/) ”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-20T00:34:09.737

很难判断您是否指的是“标准在线文档”，但[Java 教程](http://java.sun.com/docs/books/tutorial/)非常好，而且我们许多老前辈都是从这里开始的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-30T02:30:46.047

当我学习 Java 时，我经常发现自己回到这个网站：[Java Programming Notes](http://www.leepoint.net/notes-java/index.html)

非常彻底但简洁易读。

# css - 对齐图像 - 水平

> ID：382548
> 
> 赞同：-1
> 
> 时间：2008-12-19T23:20:49.637
> 
> 标签：css, image, alignment

如果您访问我的网站：www.ryancoughlin.com - 如果您在页面右侧看到 Google、Yahoo 等 RSS 按钮。我试图让它们均匀对齐，它们都是相同的图像高度，我一直试图让它们均匀排列。但我没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-19T23:33:53.883

似乎您`class="feed-image"`在 Yahoo 图片上不见了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T23:23:49.397

尝试将它们指定为“内联”而不是块，这应该允许您将它们视为单词。另一个机会是制作一个列表（这似乎是合适的，因为该图像“列表”的性质）并让“li”元素向左浮动（然后调整边距）。

此外，我认为您应该更改“对齐图像 - 垂直”中的标题，以方便未来用户的搜索。

# delphi - Delphi 视觉组件 - 远离 TFrame 基础？

> ID：382562
> 
> 赞同：3
> 
> 时间：2008-12-19T23:26:55.473
> 
> 标签：delphi, forms, frames, custom-component

我有一个从 TFrame 构建的可视组件（但随后注册到调色板等）；它工作得很好，我喜欢能够使用 IDE 以视觉方式构建它。

我现在想创建一个相关组件的“家族”，为此，我想创建这个组件的超类，然后从那里继承这个组件和其他组件。

有很多方法可以做到这一点，我敢肯定，但我发现自己想知道：是否有工具可以将 *.DFM 文件（即 Forms 或 TFrames）转换为原始 Object Pascal*构造函数*代码？考虑从哪里开始使用视觉形式或 TFrame 很不错，但随后在某些时候打破了该继承，并用实质上替代 DFM 文件流的构造函数替换了构造函数。

一如既往，所有的想法/意见表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-19T23:34:07.033

GExperts“组件到代码”，为选定的组件生成代码。财产之类的图像，您必须自己签名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T23:55:39.627

有点好奇为什么乍一看你想这样做......你可以从 IDE 中的表单/框架继承。

取决于您的 Delphi 版本，在 Delphi 2009 中，File->New，然后选择 Inheritable Items 并选择您想要继承的 Form/Frame。在以前的版本中，您会选择 File-New，然后会有一个项目名称选项卡和一个可供选择的所有项目表单的列表。

这很方便！你最终会得到不同风格的表单/框架，而你之后创建的几乎所有东西都是其中一个的后代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-22T23:56:59.700

我支持 Cesar 的 GExperts 评论，并补充说图像可以包含（和名称）在资源文件中，然后 INCed 到 PAS 文件中。

# groovy - 如何使用 ProxyMetaClass 拦截 Groovy 中的属性访问？

> ID：382564
> 
> 赞同：2
> 
> 时间：2008-12-19T23:27:02.773
> 
> 标签：groovy

用于拦截任意 Groovy 方法调用的 ProxyMetaClass 和 Iterceptor 类都有很好的文档记录。还有一种方法可以拦截属性访问吗？当我尝试通过拦截“getProperty”来执行此操作时，我仍然收到错误消息：

groovy.lang.MissingPropertyException：没有这样的属性：foo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-21T04:06:11.227

我不完全确定您要解决的用例，但可能您想要[propertyMissing](http://groovy.codehaus.org/Using+methodMissing+and+propertyMissing)或[getProperty (或者可能是 invokeMethod)](http://groovy.codehaus.org/Using+invokeMethod+and+getProperty)之一。

第一个将让您在对象上实际上不存在属性请求时拦截它们：

```
class Person {
    def name = "Ted"
    def propertyMissing(String name) { "my $name" }
}

def p = new Person()
assert "my address" == p.address
assert "my email" == p.email
assert "Ted" == p.name // property isn't missing 
```

第二个将让您拦截所有属性请求，即使是已定义的属性：

```
class Person {
    def name = "Ted"
    def getProperty(String name) { "my $name" }
}

def p = new Person()
assert "my address" == p.address
assert "my email" == p.email
assert "my name" == p.name 
```

如果您正在使用现有类，则可以使用以下方法之一对其进行子类化，或者将这些方法添加到元类：

```
String.metaClass.getProperty = { String name ->
    return "String's property $name"
}

assert "String's property foo" == "".foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-12T22:05:33.537

你的方法似乎是正确的。试试[这里](http://groovy.codehaus.org/Using+the+Delegating+Meta+Class)的一些食谱。

抓着稻草：你调用方法的对象真的是你元编程的类吗？有时由于多态性，您没有使用您认为的类。

# iphone - 使用 loadNibNamed: 方法时是否需要释放 IBOutlets？

> ID：382576
> 
> 赞同：17
> 
> 时间：2008-12-19T23:35:46.843
> 
> 标签：iphone, objective-c

我有一个 .xib 文件，其中包含一个 UIView 和 2 个 UILabel 子视图，这些子视图链接到一个名为 Note 的类，并适当地为每个标签分配了插座，该类的定义包含以下内容。

```
@interface Note : UIView {
    IBOutlet UILabel *time;
    IBOutlet UILabel *content;
} 
```

我正在使用以下代码构建它

```
NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"Note" owner:self options:nil];
note = [nibViews lastObject];
[self addSubview:note]; 
```

现在，在我的 Note 类 dealloc 阶段，我没有发布时间或内容，但我想知道我是否应该这样做？

```
- (void)dealloc {
    [super dealloc];
} 
```

我假设我没有，因为我没有在代码中的任何地方明确保留这些对象，并且我没有将它们合成到 getter/setter 中。但是我对 nib 取消归档知之甚少，不知道我是否应该在我的 dealloc 阶段释放这些？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-11-09T08:38:02.113

即使您*没有*编写或合成访问器方法，也应该释放 IBOutlet。NIB 生命周期文档说，虽然未归档对象最初设置为自动释放，但当 UIKit 连接所有 IBOutlet 连接绑定时，它们的保留计数会增加 1。因此，您需要在完成后通过 release 手动递减。

UIKit 会这样做并不明显，因此您可能会假设您可以关闭 setter/getter 方法并相信一切都是自动释放的。但事实并非如此。

请注意，Interface Builder 模板显式释放任何 IBOutlets，因此您添加的任何内容都应同样处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T00:39:30.193

这对 iPhone 来说是正确的；不过，这在 Mac 上是不正确的。

但是，您可能希望重新编写此代码。假设视图将是从 nib 加载的最后一个对象是不安全的。相反，我建议您将其连接到视图控制器中的“note”插座，或者扫描列表以查找 Note 子类的对象。（如果您要加载多个便笺并使用出口选项，请确保在加载另一个便笺之前添加一个便笺。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-22T03:23:48.007

你确实需要释放它。看

“然而，当它重建对象层次结构时，UIKit 使用 setValue:forKey: 方法重新建立对象之间的连接，该方法使用可用的 setter 方法，如果没有可用的 setter 方法，则默认保留对象。” 在[笔尖对象保留](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/chapter_3_section_4.html#//apple_ref/doc/uid/10000051i-CH4-SW18)

换句话说，因为您没有将这些条目指定为@property（隐式声明一个setter），或者直接提供了一个setter，所以没有可用的setter方法，并且本段的最后部分适用 - 对象由默认。

您应该在您的 dealloc() 方法中将所有 IBOutlets 设置为 nil 使用

```
self.outletName = nil; 
```

如果未定义 setter，则 setValue 将自动释放旧值（如果在线程中运行，请确保您有 NSAutoreleasePool）。如果定义了 setter，它将执行您定义的任何行为。无论哪种方式，设置为 nil 都会做正确的事情，并确保您没有内存泄漏。不要这样做

```
outletName = nil; 
```

这将直接设置成员变量，并绕过调用 setValue。

有关详细信息，请参阅 NSObject setValue:forKey 的文档。

运行性能工具（泄漏）不会显示泄漏，但您可以通过查看当前运行的分配内存总量来验证是否确实存在泄漏。

cf [The Airsource - 内存管理和 NIB](http://blog.airsource.co.uk/index.php/2008/12/23/memory-management-and-nibs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T22:42:16.997

除非您将 IBOutlets 声明为属性并将它们合成为 ivars，否则您将无法将它们从内存中取出：

```
@interface Note : UIView {
    IBOutlet UILabel *time;
    IBOutlet UILabel *content;
}

@property (nonatomic, retain) IBOutlet UILabel *time;
@property (nonatomic, retain) IBOutlet UILabel *content;

@end

@implementation Note
@synthesize time, content;

// your methods

- (void)dealloc {
     [time release], time = nil;
     [content release], content = nil;
     [super dealloc];
}

@end 
```

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2008-12-20T00:33:17.617

我相信你是对的。有关更多详细信息，请参阅下面的文档链接。

文档：

*   [笔尖对象生命周期](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html)
*   [Apple 支持板上的讨论线程](http://discussions.apple.com/thread.jspa?threadID=1675355&tstart=3960)
*   [另一个讨论线程](http://forums.macrumors.com/showthread.php?t=563410)

# windows - 如何从第 N 个位置获取批处理文件参数？

> ID：382587
> 
> 赞同：19
> 
> 时间：2008-12-19T23:39:55.353
> 
> 标签：windows, batch-file

除了[如何在批处理文件中传递命令行参数之外，](https://stackoverflow.com/questions/26551/how-to-pass-command-line-parameters-in-batch-file)如何通过精确指定它们来获取其余参数？我不想使用 SHIFT，因为我不知道可能有多少参数，如果可以的话，我想避免计算它们。

例如，给定这个批处理文件：

```
@echo off
set par1=%1
set par2=%2
set par3=%3
set therest=%???
echo the script is %0
echo Parameter 1 is %par1%
echo Parameter 2 is %par2%
echo Parameter 3 is %par3%
echo and the rest are %therest% 
```

运行`mybatch opt1 opt2 opt3 opt4 opt5 ...opt20`会产生：

```
the script is mybatch
Parameter 1 is opt1
Parameter 2 is opt2
Parameter 3 is opt3
and the rest are opt4 opt5 ...opt20 
```

我知道`%*`给出所有参数，但我不希望前三个（例如）。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-12-20T02:23:24.993

以下是不使用的方法`SHIFT`：

```
@echo off

for /f "tokens=1-3*" %%a in ("%*") do (
    set par1=%%a
    set par2=%%b
    set par3=%%c
    set therest=%%d
)

echo the script is %0
echo Parameter 1 is %par1%
echo Parameter 2 is %par2%
echo Parameter 3 is %par3%
echo and the rest are %therest% 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-01T00:21:08.787

```
@echo off
setlocal enabledelayedexpansion

set therest=;;;;;%*
set therest=!therest:;;;;;%1 %2 %3 =!

echo the script is %0
echo Parameter 1 is %1
echo Parameter 2 is %2
echo Parameter 3 is %3
echo and the rest are: %therest% 
```

这适用于带引号的参数和具有等号或逗号的参数，只要前三个参数没有这些特殊的分隔符字符。

样本输出：

```
test_args.bat "1 1 1" 2 3 --a=b "x y z"
Parameter 1 is "1 1 1"
Parameter 2 is 2
Parameter 3 is 3
and the rest are: --a=b "x y z" 
```

这通过替换`%1 %2 %3`原始命令行来工作`%*`。前五个分号只是为了确保只`%1 %2 %3`替换第一次出现的分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T20:31:52.513

以下代码使用`shift`，但它避免使用解析命令行`for`并让命令行解释器完成这项工作（关于`for`没有正确解析双引号，例如参数集`A B" "C`被解释为 3 个参数`A`, `B"`, `"C`by `for`，但作为 2 arguments `A`，`B" "C`由解释器；这种行为会阻止引用的路径参数（如`"C:\Program Files\"`被正确处理）：

```
@echo off

set "par1=%1" & shift /1
set "par2=%1" & shift /1
set "par3=%1" & shift /1

set therest=
set delim=

:REPEAT
if "%1"=="" goto :UNTIL
set "therest=%therest%%delim%%1"
set "delim= "
shift /1
goto :REPEAT
:UNTIL

echo the script is "%0"
echo Parameter 1 is "%par1%"
echo Parameter 2 is "%par2%"
echo Parameter 3 is "%par3%"
echo and the rest are "%therest%"
rem.the additional double-quotes in the above echoes^
    are intended to visualise potential whitespaces 
```

中的其余参数`%therest%`可能看起来不像它们最初与分隔符有关的方式（请记住，命令行解释器也将制表符`,`、、、、作为分隔符以及所有组合），因为这里所有分隔符都被单个空格替换`;`。`=`但是，当传递`%therest%`给其他命令或批处理文件时，它将被正确解析。

到目前为止，我遇到的唯一限制适用于包含插入符号的参数`^`。其他限制（与`<`, `>`, `|`, `&`,相关`"`）适用于命令行解释器本身。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-10T14:33:43.707

```
@ECHO OFF
SET REST=
::# Guess you want 3rd and on.
CALL :SUBPUSH 3 %*
::# ':~1' here is merely to drop leading space.
ECHO REST=%REST:~1%
GOTO :EOF

:SUBPUSH
SET /A LAST=%1-1
SHIFT
::# Let's throw the first two away.
FOR /L %%z in (1,1,%LAST%) do (
  SHIFT
)
:aloop
SET PAR=%~1
IF "x%PAR%" == "x" (
  GOTO :EOF
)
ECHO PAR=%PAR%
SET REST=%REST% "%PAR%"
SHIFT
GOTO aloop
GOTO :EOF 
```

我喜欢使用子例程而不是`EnableDelayedExpansion`. 以上是从我的目录/文件模式处理批处理中提取的。不要说这不能用 处理参数`=`，但至少可以用空格和通配符做带引号的路径。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-19T20:08:25.927

另一种选择:-)

其他一些答案没有处理引号或参数之间的额外空格。免责声明：我没有很好地测试过这个。

这只是在 ugg`%*`之后不更新的一种解决方法！`shift`

我从@Pavel-P 的技术开始将其实现为 POP。

*   它依赖批处理解析器来删除多余的空格
*   它取决于全局变量“Params”
*   `~`删除引号 - 让您根据需要重新引用。`~`如果您不想这样做，请删除。

```
:PopFirstParam
    @set varname=%~1
    @set %varname%=%~2
    @rem @echo %varname% = '!%varname%!'
    @if '%3' equ '' set Params=&goto :eof
    @call :popone %Params%
@goto :eof
:popone
    @set Params=;;;%*
    @set Params=!Params:;;;%1 =!
@goto :eof 
```

用法：

```
@setlocal enabledelayedexpansion
@set Params=%*
@call :PopFirstParam P1 %Params%
@call :PopFirstParam P2 %Params%
@call :PopFirstParam P3 %Params%
@call :PopFirstParam P4 %Params%
@rem etc . . . 
```

具体来说，我使用它来选择性地异步运行命令：

```
@setlocal enabledelayedexpansion
@rem set variables that decide what to be run  . . . . 

@call :RunIfDefined doNum1 "Title 1"      mycmd1.exe     some  "params"   here
@call :RunIfDefined doNum2 "MyTitle 2"    mylongcmd2.exe some  "params"   here
@call :RunIfDefined doNum3 "Long Title 3" mycmd3.exe     some  "params"   here
@goto :eof

:RunIfDefined
    @set Params=%*
    @call :PopFirstParam DefineCheck %Params%
    @if not defined %DefineCheck% goto :eof

    @call :PopFirstParam WindowTitle %Params%
    @call :PopFirstParam Command %Params%
    @rem %Params% should now be the remaining params (I don't care about spaces here)
    @echo start "%WindowTitle%" "%Command%" %Params%
    @start "%WindowTitle%" "%Command%" %Params%
@goto :eof 
```

```
C:\test> set doNum1=yes
C:\test> set doNum3=yes
C:\test> call dothings.bat

start "Title 1" "mycmd1.exe"     some  "params"   here
start "Long Title 3" "mycmd3.exe"     some  "params"   here 
```

太糟糕了 DOS 没有#include

# pdf - 使用 eps 图像的乳胶构建缓慢

> ID：382590
> 
> 赞同：3
> 
> 时间：2008-12-19T23:43:40.540
> 
> 标签：pdf, latex, dvi-tex

使用带有 eps 图像的乳胶文档，如下例所示...

```
\documentclass[11pt]{paper}
\usepackage[dvips]{graphicx}
\usepackage{fullpage}
\usepackage{hyperref} 
\usepackage{amsmath} 
\DeclareMathSizes{8}{8}{8}{8}

\author{Matt Miller}
\title{my paper}
\begin{document}

\begin{figure}[!ht]
    \begin{center}
    \includegraphics[width=2in] {Figuer.eps}
    \end{center}
    \caption{Figure\label{fig:myFig}}
\end{figure}
\end{document} 
```

当我开始构建我的乳胶文档时，构建文档所需的时间会随着时间的推移而增加。是否有任何提示或技巧可以帮助加快此过程？

```
latex paper.tex; dvipdf paper.dvi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T02:32:36.253

一些额外的想法：

*   尝试制作一个更简单的图形（例如，如果它是位图图形，则制作一个较低分辨率的图形或具有低分辨率预览的图形）
*   使用 pdflatex 并将图设为 .jpg、.png 或 .pdf 源。

我一般采用后一种方法（pdflatex）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-20T02:45:34.153

eps文件有多大？Latex 只需要知道边界框的大小，它位于文件的开头。

dvips（不是 dvipdf）不应该花费太多时间，因为它只需要将 eps 嵌入到 postscript 文件中。

另一方面，dvipdf 必须将 eps 转换为 pdf，这很昂贵。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-05T16:32:37.753

确实可以直接使用

```
pdflatex paper.tex 
```

很少需要更改。

1.  在运行之前将您的图形从 EPS 转换为 PDF `pdflatex`。您只需执行一次：

    ```
    epstopdf Figuer.eps 
    ```

    如果会生产`Figuer.pdf`哪个适合`pdflatex`。在您的示例`dvipdf`中，每次构建都会这样做。

2.  在文档中使用

    ```
    \usepackage[pdftex]{graphicx} % not [dvips] 
    ```

3.  并且要包括图形，请省略扩展名：

    ```
    \includegraphics[width=2in] {Figuer} % but {Figuer.pdf} works too 
    ```

    它将选择`Figuer.pdf`何时编译`pdflatex`和`Figuer.eps`何时编译`latex`。所以文档仍然与 legacy 兼容`latex`（只记得 chage `\usepackage{graphics}`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-30T22:56:30.983

减小 EPS 文件的文件大小可能会有所帮助。这里有一些想法如何做到这一点。

如果您的原始图像为 JPEG、PNG、TIFF、GIF（或任何其他采样图像），请使用您拥有的任何工具减小原始文件大小，然后使用 sam2p 转换为 EPS。sam2p 为您提供的 EPS 文件大小比您从大多数流行的转换器中获得的要小得多。

`pdftops -eps`如果您的 EPS 是矢量图形，请使用 ps2pdf14（Ghostscript 的一部分）将其转换为 PDF，然后使用（xpdf 的一部分）转换回 eps 。这可能会大大减少 EPS 文件的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-19T23:47:57.273

作为快速修复，尝试将 [draft] 选项传递给 graphix 包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-20T02:53:21.127

您是使用 DVI 预览器还是直接转至 pdf？如果您一直使用 pdf，您将支付取消编码和重新编码的费用（我曾经遇到过 visio 图表的问题）。但是，如果您可以在大部分时间生成 PS 或直接使用 DVI，那么体验将是可控的。

此外，一些软件包会为您从图形创建 .pdf 文件，然后您可以将其嵌入（我在我的 Mac 上这样做）

# jquery - 在 jQuery 中旋转 div 元素

> ID：382591
> 
> 赞同：59
> 
> 时间：2008-12-19T23:43:43.943
> 
> 标签：jquery, ajax, dom, canvas, jquery-animate

试图旋转一个 div 元素...这可能是对 DOM 的亵渎，它可以与画布元素一起使用吗？我不确定 - 如果有人对这如何工作或为什么不工作有任何想法，我很想知道。谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2010-09-25T01:35:34.627

旋转 DIV 使用`WebkitTransform / -moz-transform: rotate(Xdeg)`.

这在 IE 中不起作用。Raphael 库确实可以与 IE 一起使用，并且**[可以进行旋转](https://dmitrybaranovskiy.github.io/raphael/image-rotation.html)**。我相信它使用`canvas`es

如果要为旋转设置动画，可以使用递归**[`setTimeout()`](https://developer.mozilla.org/en/window.setTimeout)**

您甚至可以使用 jQuery 进行部分旋转**[`.animate()`](http://api.jquery.com/animate/)**

确保您考虑元素的宽度。如果旋转宽度大于其可见内容的宽度，您会得到**[有趣的结果](http://jsfiddle.net/4FZvn/)**。但是，您可以缩小元素的宽度，**[然后旋转它们](http://jsfiddle.net/Hn9kb/)**。

这是一个简单的 jQuery 片段，它可以旋转 jQuery 对象中的元素。可以开始和停止旋转：

```
$(function() {
    var $elie = $(selectorForElementsToRotate);
    rotate(0);
    function rotate(degree) {

          // For webkit browsers: e.g. Chrome
        $elie.css({ WebkitTransform: 'rotate(' + degree + 'deg)'});
          // For Mozilla browser: e.g. Firefox
        $elie.css({ '-moz-transform': 'rotate(' + degree + 'deg)'});

          // Animate rotation with a recursive call
        setTimeout(function() { rotate(++degree); },5);
    }
}); 
```

## **[jsFiddle 示例](http://jsfiddle.net/pajtai/R6fzF/)**

*注意：*
获取度数并增加它，将顺时针旋转图像。减小旋转度数将逆时针旋转[图像](http://jsfiddle.net/pajtai/dawc7/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-20T02:51:49.100

是的，我认为你不会有太多的运气。我相信，在主要浏览器使用的 3 种绘图方法（Canvas、SVG、VML）中，通常对文本的支持很差。如果您想旋转图像，那么一切都很好，但是如果您的内容与格式和样式混合在一起，则可能不会。

查看[RaphaelJS](http://raphaeljs.com/)以获取跨浏览器绘图 API。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-14T15:52:19.523

跨浏览器旋转任何元素。适用于 IE7 和 IE8。**在 IE7 中，它看起来不像在 JSFiddle 中工作，但在我的项目中也在 IE7 中工作**

[http://jsfiddle.net/RgX86/24/](http://jsfiddle.net/RgX86/24/)

```
var elementToRotate = $('#rotateMe');
var degreeOfRotation = 33;

var deg = degreeOfRotation;
var deg2radians = Math.PI * 2 / 360;
var rad = deg * deg2radians ;
var costheta = Math.cos(rad);
var sintheta = Math.sin(rad);

var m11 = costheta;
var m12 = -sintheta;
var m21 = sintheta;
var m22 = costheta;
var matrixValues = 'M11=' + m11 + ', M12='+ m12 +', M21='+ m21 +', M22='+ m22;

elementToRotate.css('-webkit-transform','rotate('+deg+'deg)')
    .css('-moz-transform','rotate('+deg+'deg)')
    .css('-ms-transform','rotate('+deg+'deg)')
    .css('transform','rotate('+deg+'deg)')
    .css('filter', 'progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\','+matrixValues+')')
    .css('-ms-filter', 'progid:DXImageTransform.Microsoft.Matrix(SizingMethod=\'auto expand\','+matrixValues+')'); 
```

编辑 2013 年 9 月 13 日 15:00 包含在一个漂亮且简单、可链接的 jquery 插件中。

使用示例

```
$.fn.rotateElement = function(angle) {
    var elementToRotate = this,
        deg = angle,
        deg2radians = Math.PI * 2 / 360,
        rad = deg * deg2radians ,
        costheta = Math.cos(rad),
        sintheta = Math.sin(rad),

        m11 = costheta,
        m12 = -sintheta,
        m21 = sintheta,
        m22 = costheta,
        matrixValues = 'M11=' + m11 + ', M12='+ m12 +', M21='+ m21 +', M22='+ m22;

    elementToRotate.css('-webkit-transform','rotate('+deg+'deg)')
        .css('-moz-transform','rotate('+deg+'deg)')
        .css('-ms-transform','rotate('+deg+'deg)')
        .css('transform','rotate('+deg+'deg)')
        .css('filter', 'progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\','+matrixValues+')')
        .css('-ms-filter', 'progid:DXImageTransform.Microsoft.Matrix(SizingMethod=\'auto expand\','+matrixValues+')');
    return elementToRotate;
}

$element.rotateElement(15); 
```

JSFiddle：http: [//jsfiddle.net/RgX86/175/](http://jsfiddle.net/RgX86/175/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T01:12:23.227

这里有两个 jQuery 补丁可以提供帮助（可能在您阅读本文时已经包含在 jQuery 中）：

*   [修补 jQuery css() 方法以支持“转换”](http://www.zachstronaut.com/posts/2009/02/22/jquery-patch-css-transform.html)
*   [jQuery 补丁：动画 CSS 旋转和缩放](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-28T11:45:48.327

编辑：为 jQuery 1.8 更新

jQuery 1.8 将添加特定于浏览器的转换。[jsFiddle 演示](http://jsfiddle.net/jz23ugw8/)

```
var rotation = 0;

jQuery.fn.rotate = function(degrees) {
    $(this).css({'transform' : 'rotate('+ degrees +'deg)'});
    return $(this);
};

$('.rotate').click(function() {
    rotation += 5;
    $(this).rotate(rotation);
}); 
```

* * *

编辑：添加代码使其成为 jQuery 函数。

对于那些不想进一步阅读的人，请看这里。有关更多详细信息和示例，请继续阅读。[jsFiddle 演示](http://jsfiddle.net/WhZym/5/)。

```
var rotation = 0;

jQuery.fn.rotate = function(degrees) {
    $(this).css({'-webkit-transform' : 'rotate('+ degrees +'deg)',
                 '-moz-transform' : 'rotate('+ degrees +'deg)',
                 '-ms-transform' : 'rotate('+ degrees +'deg)',
                 'transform' : 'rotate('+ degrees +'deg)'});
    return $(this);
};

$('.rotate').click(function() {
    rotation += 5;
    $(this).rotate(rotation);
}); 
```

* * *

编辑：这篇文章的评论之一提到了[jQuery Multirotation](http://plugins.jquery.com/multirotation/)。这个 jQuery 插件本质上是在支持 IE8 的情况下执行上述功能。如果您想要最大的兼容性或更多选项，它可能值得使用。但为了最小化开销，我建议使用上述功能。它适用于 IE9+、Chrome、Firefox、Opera 等。

* * *

*Bobby... 这是为那些真正想在 javascript 中做这件事的人准备的。这可能需要在 javascript 回调上进行轮换。*

这是一个[jsFiddle](http://jsfiddle.net/38ZsD/)。

如果您想以自定义间隔旋转，您可以使用 jQuery 手动设置 css 而不是添加类。像[这样](http://jsfiddle.net/WhZym/)！我在答案的底部包含了两个 jQuery 选项。

**HTML**

```
<div class="rotate">
    <h1>Rotatey text</h1>
</div> 
```

**CSS**

```
/* Totally for style */
.rotate {
    background: #F02311;
    color: #FFF;
    width: 200px;
    height: 200px;
    text-align: center;
    font: normal 1em Arial;
    position: relative;
    top: 50px;
    left: 50px;
}

/* The real code */
.rotated {
    -webkit-transform: rotate(45deg);  /* Chrome, Safari 3.1+ */
    -moz-transform: rotate(45deg);  /* Firefox 3.5-15 */
    -ms-transform: rotate(45deg);  /* IE 9 */
    -o-transform: rotate(45deg);  /* Opera 10.50-12.00 */
    transform: rotate(45deg);  /* Firefox 16+, IE 10+, Opera 12.10+ */
} 
```

**jQuery**

确保这些都包含在 $(document).ready

```
$('.rotate').click(function() {
    $(this).toggleClass('rotated');
}); 
```

自定义间隔

```
var rotation = 0;
$('.rotate').click(function() {
    rotation += 5;
    $(this).css({'-webkit-transform' : 'rotate('+ rotation +'deg)',
                 '-moz-transform' : 'rotate('+ rotation +'deg)',
                 '-ms-transform' : 'rotate('+ rotation +'deg)',
                 'transform' : 'rotate('+ rotation +'deg)'});
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-20T00:16:39.273

我怀疑您是否可以使用 DOM/CSS 旋转元素。您最好的选择是渲染到画布并旋转它（不确定具体情况）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-24T18:07:32.727

我整理了一个动画旋转代码程序..你可以在这里得到你的代码......（如果不是太晚的话）

[http://99mission.why3s.tw/rotatetest.html](http://99mission.why3s.tw/rotatetest.html)

# unit-testing - 单独的类与方法

> ID：382602
> 
> 赞同：5
> 
> 时间：2008-12-19T23:53:21.363
> 
> 标签：unit-testing, language-agnostic, tdd, mocking

快速设计问题。

ClassA 有一个名为 DoSomething(args) 的方法

在 DoSomething() 中，在它真正可以做某事之前，它需要对 args 做一些准备工作。我认为这应该封装在 ClassA 中（而不是在外面做准备工作并将其传入），因为没有其他东西需要知道 DoSomething 需要这项准备工作。

然而，让我思考的是实际的准备工作代码所属的地方。

在我的特定示例中，准备工作是从 args 创建满足特定条件的项目列表。

我的预感是我应该创建一个新类 ListOfStuff，它在其构造函数中接受 args 并将这个准备工作放在这里。

从 TDD 的角度来看，我认为这是正确的选择。然后我们可以对 ListOfStuff 进行单元测试，直到我们心满意足为止。如果我们把准备工作放在 ClassA 的私有方法中，我们只能通过测试 DoSomething() 来间接测试它。

但这是否矫枉过正？自从采用 TDD 和 DI 方法以来，我已经看到我编写的类的数量成倍增加——我应该担心吗？

塔。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T23:59:07.500

最简单可行的方法是什么？这就是 TDD 的口头禅。不要试图想得太远。如果需要创建帮助程序类，您就会知道，因为您将在其他类的多个方法中完成各种相关工作。在那之前，按照你的方法完成工作。如果它使方法太长或难以阅读，请将工作提取到自己的方法中。这种方法也可以在不需要其他类的情况下进行测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-20T00:18:15.587

这里有一些启发式方法。

1.  这个类是否存在从调用到调用的状态？每次你需要 doSomething() 时，这个准备工作都会完成，还是完成并保存？如果是这样，那就为班级争辩。
2.  这种计算是否需要在不止一次的地方发生？如果是这样，那就证明了一个类。
3.  doSomething() 方法的实现细节，或者它的准备工作，是否可以在不影响封闭类的情况下改变？如果是这样，那就证明了一个类。

好吧，三个启发式。没有人期望西班牙宗教裁判所。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-20T00:02:45.260

一定要把它放在一个新的类中。它称为关注点分离。你不想重载一个类并让它做各种各样的其他事情。这是因为您的课程将无法在其他任何地方使用，因为它特定于一件事。

把它放在课堂上，然后在其他地方使用那个课。否则你以后必须一次又一次地写这个。

为了使其具有可扩展性，并能够传入各种不同的算法，您所追求的设计模式就是[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式。但那是为了未来...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T00:00:55.403

您的对象模型设计应该单独考虑，而不是在您的开发策略的上下文中。如果构建 ListOFStuff 并传递给 DoSomething 确实是对象模型最适合组合在一起的方式，那么**不管您的开发策略如何**，都这样做。

我认为您已经回答了一些您自己的问题，但是，由于 ListOfStuff 使单元测试变得更容易，这可能意味着它也是一种**更简洁的设计**。

希望有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T06:46:17.020

> 自从采用 TDD 和 DI 方法以来，我已经看到我编写的类的数量成倍增加——我应该担心吗？

如果您的目标是过程编程，是的。但是由于您几乎可以肯定想要以 OO 方式工作，所以不。

大多数人使用的类型太少，花在 OO 设计上的时间太少。

您关于班级责任的问题反映了思维的成熟（恕我直言）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-27T06:10:57.900

仅当所讨论的“关注”与班级无关，或者您发现班级共享此“关注”（又名，违反 DRY）时，SoC 才有效。在您的情况下，代码似乎是该类所固有的 - 所以可能一个`private`函数会更合适。

正如上面tvanfosson所说，你需要平衡SoC和YAGNI。就个人而言-我认为您可能会过早地考虑这一点（我知道！我也一直这样做）。

# python - 编程语言在什么情况下真正使用了 Infinity 值？

> ID：382603
> 
> 赞同：28
> 
> 时间：2008-12-19T23:54:04.747
> 
> 标签：python, ruby, language-agnostic, idioms, infinity

所以在 Ruby 中有一个技巧来指定无穷大：

```
1.0/0
=> Infinity 
```

我相信 Python 你可以做这样的事情

```
float('inf') 
```

不过，这些只是示例，我确信大多数语言在某些方面都具有无限性。你什么时候会在现实世界中真正使用这个构造？为什么在范围内使用它比仅使用布尔表达式更好？例如

```
(0..1.0/0).include?(number) == (number >= 0) # True for all values of number
=> true 
```

总而言之，我正在寻找的是使用 Infinity 的真实世界理由。

**编辑**：我正在寻找真实世界的代码。可以说这是您“可以”使用它的时候，人们*实际*使用它的时候，这一切都很好。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-12-19T23:55:12.843

在头顶上，在搜索最小值时，它可以用作初始值。

例如：

```
min = float('inf')

for x in somelist:
  if x<min: 
    min=x 
```

我更喜欢`min`最初设置为的第一个值`somelist`

当然，在 Python 中，在大多数情况下，您应该只使用 min() 内置函数。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-12-20T00:40:24.123

Dijkstra 算法通常将无穷大指定为图中的初始边权重。这不一定*是*“无穷大”，只是一些任意常数，但在 java 中我通常使用 Double.Infinity。我认为可以类似地使用红宝石。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-12-20T14:03:13.660

似乎有一个隐含的“为什么这个功能甚至存在？” 在你的问题中。原因是 Ruby 和 Python 只是提供了访问 IEEE 指定的浮点形式可以指定的全部值的权限。

这个页面似乎描述得很好： [http ://steve.hollasch.net/cgindex/coding/ieeefloat.html](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)

因此，您还可以使用 NaN（非数字）值和 -0.0，但您可能也不会立即在实际世界中使用这些值。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-12-20T00:07:03.100

在一些物理计算中，您可以将相同阶数的不规则性（即无限数）相互标准化，同时取消它们并允许得出近似结果。

当您处理限制时，可以实现像 (infinity / infinity) -> 接近一个有限数这样的计算。语言能够覆盖常规的被零除错误是很有用的。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-12-20T01:29:23.387

在实现数学算法时使用`Infinity`和调用它。`-Infinity`

在 Ruby 中，`Infinity`并且`-Infinity`具有很好的比较属性，因此`-Infinity`< `x`<`Infinity`对于任何实数`x`。例如，`Math.log(0)`返回`-Infinity`，扩展到暗示`0`的属性。此外，如果 x > 0，如果 x < 0，如果 x为0，则为“NaN”（不是数字；即未定义）。`x > y``Math.log(x) > Math.log(y)``Infinity * x``Infinity``-Infinity`

例如，我在一些[对数似然比](http://en.wikipedia.org/wiki/Likelihood_ratio)的计算中使用了以下代码。`-Infinity`即使`k`is`0`或`n`AND`x`是`0`or ，我也会明确引用定义一个值`1`。

```
Infinity = 1.0/0.0
def Similarity.log_l(k, n, x)
  unless x == 0 or x == 1
    k * Math.log(x.to_f) + (n-k) * Math.log(1.0-x)
  end
    -Infinity
  end
end 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-12-20T00:46:51.770

[α-β修剪](http://en.wikipedia.org/wiki/Alpha-beta_pruning)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-12-29T23:05:55.570

我用它来指定物理模拟中静态物体的质量和惯性。静态对象基本上不受重力和其他模拟力的影响。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-12-11T03:08:47.543

在 Ruby 中，infinity 可用于实现惰性列表。假设我想要从 200 开始的 N 个数字，每次依次增大 100 个单位：

```
Inf = 1.0 / 0.0
(200..Inf).step(100).take(N) 
```

更多信息在这里：[http ://banisterfiend.wordpress.com/2009/10/02/wtf-infinite-ranges-in-ruby/](http://banisterfiend.wordpress.com/2009/10/02/wtf-infinite-ranges-in-ruby/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-01-07T05:57:16.863

我已经将它用于您想要定义偏好/允许范围的情况。

例如，在 37signals 应用程序中，您对项目数量有限制

```
Infinity = 1 / 0.0
FREE = 0..1
BASIC = 0..5
PREMIUM = 0..Infinity 
```

然后你可以做检查

```
if PREMIUM.include? current_user.projects.count 
 # do something
end 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-07-31T17:49:14.030

我用它来表示相机焦距，令我惊讶的是在 Python 中：

```
>>> float("inf") is float("inf")
False
>>> float("inf") == float("inf")
True 
```

我想知道为什么会这样。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-12-22T13:56:57.557

我在[minimax 算法](http://en.wikipedia.org/wiki/Minimax)中使用过它。当我生成新动作时，如果最小玩家在该节点上获胜，则该节点的值为 -∞。相反，如果最大玩家获胜，则该节点的值为 +∞。

此外，如果您正在生成节点/游戏状态，然后尝试几种启发式方法，您可以将所有节点值设置为 -∞/+∞，这很有意义，然后当您运行启发式方法时，很容易设置节点值：

```
node_val = -∞
node_val = max(heuristic1(node), node_val)
node_val = max(heuristic2(node), node_val)
node_val = max(heuristic2(node), node_val) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-12-29T22:14:52.960

我在类似于 Rails 的 DSL 中使用过它，`has_one`并且`has_many`：

```
has 0..1 :author
has 0..INFINITY :tags 
```

这使得在您的 DSL 中表达 Kleene star 和 plus 等概念变得容易。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-12-20T01:28:57.833

当我有一个 Range 对象的一端或两端需要打开时，我会使用它

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-01-07T22:04:54.557

我在处理范围比较时使用了正无穷和负无穷的符号值，以消除需要特殊处理的极端情况：

给定两个范围 A=[a,b) 和 C=[c,d) 它们是否相交，一个大于另一个，还是一个包含另一个？

```
A > C iff a >= d
A < C iff b <= c
etc... 
```

如果您有分别比较大于和小于所有其他值的正无穷和负无穷值，则不需要对开放范围进行任何特殊处理。由于浮点数和双精度数已经实现了这些值，因此您不妨使用它们，而不是尝试在您的平台上找到最大/最小值。对于整数，使用“无穷大”更加困难，因为它不受硬件支持。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2010-04-13T20:18:39.107

我遇到了这个问题，因为我正在寻找一个“无限”值来设置最大值，如果给定值不存在，则试图创建一个二叉树。（因为我是根据一系列值进行选择的，而不仅仅是一个值，所以我很快意识到在我的情况下，即使是哈希也行不通。）

因为我希望所有涉及的数字都是正数，所以最小值很容易：0。但是，由于我不知道最大值是什么，我希望上限是某种无穷大。这样，我就不必弄清楚我应该将事物与什么“最大值”进行比较。

由于这是我正在工作的一个项目，因此从技术上讲，它是一个“现实世界的问题”。它可能有点少见，但就像很多抽象一样，当你需要它时它很方便！

另外，对于那些说这个（和其他例子）是人为的人，我要指出*所有*的抽象都是人为的。这并不意味着当你设计它们时它们是有用的。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-12-20T00:01:33.140

在使用三角（尤其是切线）的问题域中工作时，可以得出无穷大的答案。Trig 最终在图形应用程序、游戏和地理空间应用程序以及显而易见的数学应用程序中大量使用。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-12-20T00:19:37.067

我确信还有其他方法可以做到这一点，但您可以使用 Infinity 检查字符串到浮点数转换中的合理输入。至少在 Java 中，Float.isNaN() 静态方法将为具有无限大小的数字返回 false，表明它们是有效数字，即使您的程序可能希望将它们分类为无效。检查 Float.POSITIVE_INFINITY 和 Float.NEGATIVE_INFINITY 常量可以解决这个问题。例如：

```
// Some sample values to test our code with
String stringValues[] = {
  "-999999999999999999999999999999999999999999999",
  "12345",
  "999999999999999999999999999999999999999999999"
};

// Loop through each string representation
for (String stringValue : stringValues) {
  // Convert the string representation to a Float representation
  Float floatValue = Float.parseFloat(stringValue);

  System.out.println("String representation: " + stringValue);
  System.out.println("Result of isNaN: " + floatValue.isNaN());

  // Check the result for positive infinity, negative infinity, and
  // "normal" float numbers (within the defined range for Float values).
  if (floatValue == Float.POSITIVE_INFINITY) {
    System.out.println("That number is too big.");
  } else if (floatValue == Float.NEGATIVE_INFINITY) {
    System.out.println("That number is too small.");
  } else {
    System.out.println("That number is jussssst right.");
  }
} 
```

**样本输出：**

字符串表示：-999999999999999999999999999999999999999999999
isNaN的结果：false
这个数字太小了。

字符串表示：12345
isNaN 的结果：false
该数字是正确的。

字符串表示：999999999999999999999999999999999999999999999
isNaN的结果：false
这个数字太大了。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-01-13T14:49:21.350

它在图形中被广泛使用。例如，3D 图像中不属于实际对象的任何像素都被标记为无限远。以便以后可以用背景图像替换它。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2011-04-08T23:18:20.683

我正在使用一个网络库，您可以在其中指定重新连接尝试的最大次数。因为我希望我的永远重新连接：

`my_connection = ConnectionLibrary(max_connection_attempts = float('inf'))`

在我看来，它比典型的“设置为 -1 以永久重试”样式更清楚，因为它的字面意思是“重试直到连接尝试的次数大于无穷大”。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-12-20T00:51:04.587

一些程序员使用 Infinity 或`NaN`s 来显示一个变量从未在程序中被初始化或赋值。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-03-14T01:20:30.070

如果您想要输入中的最大数字，但他们可能会使用非常大的负数。如果我输入-13543124321.431，它仍然是最大的数字，因为它大于-inf。

```
enter code here
initial_value = float('-inf')
while True:
    try:
        x = input('gimmee a number or type the word, stop ')
    except KeyboardInterrupt:
        print("we done - by yo command")
        break
    if x == "stop":
        print("we done")
        break
    try:
        x = float(x)
    except ValueError:
        print('not a number')
        continue
    if x > initial_value: initial_value = x
print("The largest number is: " + str(initial_value)) 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2011-11-07T03:05:08.233

您可以使用：

```
import decimal
decimal.Decimal("Infinity") 
```

或者：

```
from decimal import *
Decimal("Infinity") 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2014-08-22T14:04:23.103

# 用于排序

我已经看到它用作排序值，说“总是将这些项目排序到底部”。

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2015-03-19T14:28:04.773

## 指定不存在的最大值

如果您正在处理数字，`nil`则表示未知数量，并且在这种情况下应该首选`0`。同样，`Infinity`表示一个无限量，在这种情况下应该首选`(arbitrarily_large_number)`。

我认为它可以使代码更干净。例如，我`Float::INFINITY` [在 Ruby gem](https://github.com/nathanl/nokogiri_bang_finders/blob/bd0f735376f82b35ca95a4fa7fa7e371f0f2337b/lib/nokogiri_bang_finders.rb#L13)中使用的正是：用户可以指定消息的最大字符串长度，或者他们可以指定`:all`. 在这种情况下，我将最大长度表示为`Float::INFINITY`，以便稍后当我检查“此消息是否比最大长度长？” 答案总是错误的，不需要特殊情况。

# macos - 在 mac osx 上使用 Latex（特别是 pdflatex）生成时，pdf 文档中的字体搞砸了

> ID：382608
> 
> 赞同：4
> 
> 时间：2008-12-19T23:56:00.203
> 
> 标签：macos, pdf, latex, fonts, pdf-generation

我的同事建议 texniscope 在某种程度上应该受到责备，我应该尝试从我的系统中清除它。我真的希望不必诉诸于此！

可能的线索：

*   在我升级到 Leopard 之前，这不是问题。

*   当我说字体被搞砸时，我的意思是正文看起来可能是默认的 mac 系统字体，所有的数学都是完全不可读的。基本上所有特殊符号都是完全乱码的。

*   我从这里安装了乳胶： [http](http://www.tug.org/mactex/) ://www.tug.org/mactex/ 。我已经安装了texniscope。

*   当我运行时`/usr/texbin/pdflatex foo.tex`，它似乎工作：

```
     这是 pdfTeXk，版本 3.1415926-1.40.9 (Web2C 7.5.7)
     %&-line 解析已启用。
     进入扩展模式
    ...

```

但生成的 pdf 文件搞砸了字体。

*   在命令行上使用 pdflatex 或使用 TeXShop 都会发生同样的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-18T23:08:59.187

Apple 知道这个问题并且不打算修复它（我让一位教员花了很多时间测试并向 Apple 提交了一个错误）。他们声称 PDFTeX 错误地嵌入了字体，并且他们已修复 Apple PDF 库，使其对将接受和不接受的内容更加严格，这意味着您将继续在预览中看到使用 PDFTeX 创建的 PDF 文档的问题、TeXShop 或其他使用 Apple 的 PDF 引擎显示 PDF 的工具。不幸的是，他们根本不清楚 PDFTeX 到底做错了什么，这使得修复它甚至向 PDFTeX 开发人员报告错误成为问题。请注意，Adobe 的 Acrobat 或 Reader 应用程序通常可以毫无问题地显示这些文档；大概 Adob​​e 的错误检查比 Apple 的更自由。

您实际上可以在不重新启动的情况下从该问题中恢复，尽管您可能会看到它在同一个会话中与同一个文档一起出现。你需要跑

```
atsutil server -shutdown 
```

这将杀死 Apple 类型服务服务器守护程序 (ATSServer) 并生成一个新实例，巧合地重建其缓存文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-16T22:29:38.337

TUG 最近发布了更新的二进制文件，修复了触发字体缓存损坏的错误：http://www.tug.org/mactex/fontcache/

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T00:54:16.453

看来我找到了答案，来自[http://www.stat.duke.edu/~dmm36/tech.php](http://www.stat.duke.edu/~dmm36/tech.php)，粘贴在下面。唉，看来我不得不放弃 TeXniscope。我喜欢 TeXniscope 比 Skim 好得多，因为它更简单，具有更好的分页键盘快捷方式，并且 Skim 让您在每次出现乳胶错误时手动刷新 pdf（否则 Skim 自动刷新）。

引自[http://www.stat.duke.edu/~dmm36/tech.php](http://www.stat.duke.edu/~dmm36/tech.php)：

在最近升级到 Leopard 之后，由 latex（MacTeX 2007 发行版）创建的 pdf 文件开始发生一些非常奇怪和可怕的事情。关键是任何使用 Apple 原生 pdf 引擎的应用程序（例如 preview.app、skim.app、Texniscope.app、LaTeXit.app，但不是 adobe reader 8）都不能正确显示字体。更神秘的是，同一个文档在多个开口上可能呈现不同的效果。

随后进行了很多谷歌搜索，直到我在 mac tex 新闻组上找到一个线程，该线程表明问题在于损坏的字体缓存。另一项搜索带来了有关如何删除 Leopard 中所有字体缓存的提示。从终端发出以下命令：

```
sudo rm -rf `lsof | grep com.apple.ATS/annex.aux | grep Finder | cut -c 66-139` 
```

（替换`lsof`为`/usr/sbin/lsof`如果`/usr/sbin`不在您的路径中）

```
sudo rm -rf /private/var/folders/*/*/-Caches-/com.apple.ATS 
```

然后重启。这为我解决了字体问题。

注意：这个问题的一部分似乎是 TeXniscope.app 搞砸了字体缓存的结果。例如，如果您删除字体缓存，重新启动并在预览中打开某些内容，它看起来会很好，但是一旦您再次在 TeXniscope 中打开某些内容，就会回到绘图板。如果您遇到此问题并使用 TeXniscope 作为您的 pdf 预览器（如在 aquamacs 中），您应该切换到 Skim 作为您的 pdf 预览器。它非常好，Skim wiki 有关于如何将它与 Aquamacs 集成的说明。无论如何，TeXniscope 并没有处于积极的开发中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-09T16:10:32.307

这个错误让我发疯了。受此[提示](http://www.macosxhints.com/article.php?story=20071026081555971)的启发，这是我找到的应对它的最佳方法，即在 shell 中执行以下序列：

```
atsutil databases -removeUser
sudo atsutil databases -remove
atsutil server -shutdown
atsutil server -ping 
```

您可以将此序列添加到您的 shell 配置文件中的 shell 函数中（我的是`.zshrc`）：

```
function atsrm()
{
  atsutil databases -removeUser
  sudo atsutil databases -remove
  atsutil server -shutdown
  atsutil server -ping
} 
```

...并简单地调用`atsrm`终端来清除字体缓存。请注意，如果打开 Skim 会崩溃，并且某些应用程序可能无法正确显示某些字符，因此您必须重新启动它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T00:21:12.417

在 Adob​​e Reader 中的文档属性下查看 pdf。如果您有用于数学的 Type 3 (?) 位图字体，您需要告诉驱动程序将正确的 Type 1 矢量字体嵌入到生成的文档中。

我在 linux 上使用乳胶和 dvips，然后使用 pdf。以前我不得不告诉它这样做，但现在看来至少 ubuntu 上的包具有正确的字体设置。

在网上查看告诉您如何将正确的字体嵌入到文档中。

再想一想，也许您的系统上没有安装任何字体，或者您的字体没有嵌入到文档中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-20T00:46:11.960

我对你的 MacTeX 问题感到有点惊讶。我最近安装了 2008 版本，无论是 pdftex/latex 还是 xetex/latex，它的运行都非常棒。即使我安装了以前的 teTeX，字体也不是问题。你能把你的 foo.tex 放在某个地方供我们测试吗？

# architecture - 高级架构

> ID：382614
> 
> 赞同：4
> 
> 时间：2008-12-20T00:00:42.317
> 
> 标签：architecture, agile

即使您正在使用敏捷，在开始实施项目之前，您也需要一个高级架构。

通过高级架构，我的意思是将项目分成小部分，基础设施，分布式/基于网络/厚客户端等......

有没有关于这个主题的书籍/文章？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T00:29:10.183

我不止一次和 Kent Beck 争论过，他会说你错了，你不需要做出这些架构决策，或者更确切地说，你应该选择可能的最简单的东西工作并从那里开始。

我看到的问题是，在您发现 STTCPW 实际上不起作用并给您留下*大量*返工之前，您可能会走很长一段路。现在，如果您正在逐步正确地做事，或者使用风险驱动模型做得更好，因此您首先检查风险最高的决策，那么希望您能相对较早地发现这些事情，但肯定不能保证。

另一方面，很多敏捷项目都处于大多数架构都是预先确定的环境中，例如 Ruby on Rails 或 J2EE。这些系统大大降低了风险，因为你有一个确定的环境。

尽管我正在考虑写一本，但我不知道有关该主题的任何特定书籍；这在敏捷社区中仍有待商榷。

可能我最喜欢的论坛是[Martin Fowler 的 blik](http://www.martinfowler.com/bliki/) i 和[InfoQ](http://www.infoq.com/)，但需要注意的是我即将开始在 infoQ 上发帖，因此可能会受到偏见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-21T01:39:29.777

关于该主题的一篇好文章是[“谁需要建筑师？”](http://www.slowleadership.org/blog/2008/12/its-time-to-challenge-received-wisdom/) 通过马丁福勒。

我个人的看法是，您可能需要预先做出的架构决策比您想象的要少得多。如果你做的足以得出合理的估计，你应该做得很好。

不过，您*需要*密切关注设计力量，并擅长重构。你会想尽早开始练习。没有预先提出架构应该会给你很多机会。;)

你会做出错误的决定吗？是的。改变架构是否需要时间。当然。

但是你也节省了很多时间，因为你不试图预先构想一个架构。而且，因为在项目开始时您拥有的信息量最少，所以无论如何，前期架构不会真正“正确”。运气好的话，它“只是”有点矫枉过正，更有可能的是，还会做出一些你最好稍后再改变的决定。

关于风险，请记住您应该首先开始开发最重要的功能。这样，您的架构实际上将构建为最好地支持最重要的功能，这正是它应该的方式。

您可能会喜欢的一本关于该主题的好书是 Robert Martin 的“敏捷软件开发 - 原则、模式、实践”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T00:27:28.283

在一般架构上，您有例如：

*   Fowler：企业应用架构模式
*   Hohpe：企业集成模式
*   [扎克曼](http://en.wikipedia.org/wiki/Zachman_framework)框架_
*   开放组[架构](http://www.opengroup.org/togaf/)框架

而且您有特定于平台的书籍，例如Java：

*   Sun 认证 JEE 架构师学习指南
*   Broemmer：J2EE 最佳实践

维基百科有一个相当全面的[软件架构](http://en.wikipedia.org/wiki/Software_architecture)指针列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-28T10:47:53.050

这是敏捷的关键问题，我认为还没有人解决它。最初的架构决策对成功至关重要，正如 Kent Beck 所说，理想情况下，您应该推迟它们，直到您有足够的信息。

当然，他能这么说很大程度上是因为他可以选择他的客户，并要求那种程度的自由。项目进行三个月后，更改实现语言对他来说可能没问题，但对我们大多数人来说，这不是一个选择。我们必须尽早做出一些决定，而且它们必须是正确的。我们必须在信息不足的情况下工作，并尽可能有效地利用我们的经验和智慧。

大多数建筑文本都有一个过程，从表达所需功能的英文句子开始，然后将名词和动词分解成分类器的语义表示，最终变成实际的代码行。

我们不能在敏捷中轻易做到这一点——用户故事不适合分解，因为它们不够详细，而且我们没有任何其他功能需求来源。

我建议避免使用 UML 之类的东西（至少保留自己的笔记除外），直到您至少编写了发布计划，并且您对哪些故事可能在哪个迭代中实现有所了解。此时您可以开始详细的架构工作。

在此之前，您必须做出一些决定，我认为您能做的最好的事情就是尝试确定您可以做到的细节：

*   非功能性需求可能是什么，
*   您必须遵守哪些标准，
*   您必须与哪些现有系统及其 API 进行交互，
*   部署平台将是什么，
*   目标运营团队具备哪些技能，

之类的东西。通常，这些约束可以充分限制您的预期交付，您可以对高级组件以及它们将驻留的位置充满信心。

我强烈建议在用户界面上进行信息架构工作。UI 很脆弱且更改成本很高，并且线框表示与完成的文章足够接近，可以与利益相关者讨论并获得有价值的答案。

但是，您需要一个优秀的信息架构师，并且您需要定期挖掘 IA 中的用户故事更改，以确保其中的所有内容都得到适当的估计。

对于非 UI 工作，请仔细考虑解决方案中的一些核心概念——通常可以非常清楚地识别和陈述事务边界和事务安全要求等内容，即使您不知道每个内容具体包含什么交易类型。就交易和数据安全的约束和成功标准做出一些陈述，并得到利益相关者的同意。

最后，在每次迭代开始时，您可以进行一些详细的建模和架构工作，因为这是真正的功能分解发生的地方。我强烈建议为这项工作投入时间预迭代。在迭代的实际编码开始时，您应该清楚地了解您将要创建的每个类、它将存在于何处以及它将与什么对话。如果没有这个，就无法协调开发团队。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T01:33:18.743

听起来您正在讨论功能分解。

有自下而上和自上而下的方法。我喜欢从双方考虑一个项目。这一点尤其重要，因为当您从底层开始时，您可以考虑类及其方法。当您从顶部开始时，您可以考虑程序将如何流动。

尝试：

John Lakos 的大型 C++ 软件设计（Addison-Wesley 专业计算系列）（平装本 - 1996 年 7 月 20 日）

# windows - 系统资源监视器/图表

> ID：382617
> 
> 赞同：0
> 
> 时间：2008-12-20T00:01:23.173
> 
> 标签：windows, taskmanager, resource-monitor

我正在寻找一个在任务管理器的性能选项卡上执行相同操作的应用程序，但基于每个进程并具有更多绘制值。至少，我希望能够绘制 CPU 和内存使用情况，但如果它可以绘制，那就太好了：

*   网络使用情况
*   文件系统 IO（每个驱动器/共享子标题会很好）
*   打开文件流计数
*   [LSOF之](http://linux.about.com/library/cmd/blcmdl8_lsof.htm)类的东西
*   “进程”选项卡可以为您提供的所有其他统计信息
*   ... 还要别的吗 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T00:31:56.310

Windows 附带 perfmon，这几乎正是您想要的。它有无数个不同类别的计数器——各个应用程序也可以注册自己的计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T00:32:18.167

我在 FS Walker Hughes 与 Norm 一起工作，他做了这个并在[CodeProject上发布](http://www.codeproject.com/KB/docview/graphfx.aspx)

**你确切需要的是这个 => [processestudio](http://www.codeproject.com/KB/cpp/processstudio.aspx)**

两者都有完整的源代码。

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T11:42:58.310

只需使用 NAPI。

# jackrabbit - 是否有直接编辑 Jackrabbit 存储库内容的工具？

> ID：382622
> 
> 赞同：6
> 
> 时间：2008-12-20T00:03:06.447
> 
> 标签：jackrabbit

我有一个基于文件系统的 Jackrabbit 存储库，我想直接查看和编辑它。是否有现成的工具可以让我直接查看/编辑/删除/添加节点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-31T17:27:53.007

Jackrabbit 本身目前没有内置的通用 JCR 资源管理器，但有一些可用的开源选项。[本文](http://dev.day.com/microsling/content/blogs/main/jcrtools.html)提供了很好的概述，Jackrabbit wiki 上的[JCRLinks](http://wiki.apache.org/jackrabbit/JcrLinks)页面有一个[关于此类工具的部分](http://wiki.apache.org/jackrabbit/JcrLinks#head-b923fd013974428bd9d78e4c6adb6709e6c2a4f8)。

最好的基于 Web 的可能是[JCR Explorer](http://www.jcr-explorer.org/index.html "JCR 资源管理器")。对于在 Eclipse 中的使用，[Day 的 Eclipse 插件](http://www.day.com/eclipse/)提供了大多数功能（它还支持 Jackrabbit）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-20T00:12:10.297

如果它位于 WebDAV 服务器后面，请将其挂载为文件系统。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-12T22:12:22.967

[SPT JCR 经理](http://code.google.com/p/sptjcrmanager/)：

> 用于查看和管理 Java 内容存储库的简单 Web 应用程序

# python - @measured 是标准的装饰器吗？它在哪个图书馆？

> ID：382624
> 
> 赞同：2
> 
> 时间：2008-12-20T00:04:41.840
> 
> 标签：python, decorator

在[这篇博客文章中](http://abstracthack.wordpress.com/2007/09/05/multi-threaded-map-for-python/)，他们使用了以下构造：

```
 @measured
  def some_func():
    #...
  # Presumably outputs something like "some_func() is finished in 121.333 s" somewhere 
```

该`@measured`指令似乎不适用于原始 python。它是什么？

更新：我从 Triptych 看到这`@something`是有效的，但我在哪里可以找到`@measured`，它是在某个库中，还是这个博客的作者使用了他自己的私人代码库中的东西？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-20T00:37:25.377

`@measured`使用名为 的函数或类装饰 some_func() 函数`measured`。是`@`装饰器语法，`measured`是装饰器函数名。

装饰器可能有点难以理解，但它们基本上用于将代码包装在函数周围，或者将代码注入其中。

例如测量的功能（用作装饰器）可能是这样实现的......

```
import time

def measured(orig_function):
    # When you decorate a function, the decorator func is called
    # with the original function as the first argument.
    # You return a new, modified function. This returned function
    # is what the to-be-decorated function becomes.

    print "INFO: This from the decorator function"
    print "INFO: I am about to decorate %s" % (orig_function)

    # This is what some_func will become:
    def newfunc(*args, **kwargs):
        print "INFO: This is the decorated function being called"

        start = time.time()

        # Execute the old function, passing arguments
        orig_func_return = orig_function(*args, **kwargs)
        end = time.time()

        print "Function took %s seconds to execute" % (end - start)
        return orig_func_return # return the output of the original function

    # Return the modified function, which..
    return newfunc

@measured
def some_func(arg1):
    print "This is my original function! Argument was %s" % arg1

# We call the now decorated function..
some_func(123)

#.. and we should get (minus the INFO messages):
This is my original function! Argument was 123
# Function took 7.86781311035e-06 to execute 
```

装饰器语法只是执行以下操作的一种更短更简洁的方式：

```
def some_func():
    print "This is my original function!"

some_func = measured(some_func) 
```

例如，Python 中包含一些装饰器[`staticmethod`](http://docs.python.org/library/functions.html#staticmethod)- 但`measured`不是其中之一：

```
>>> type(measured)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'measured' is not defined 
```

检查项目`import`语句以查看函数或类的来源。如果它使用`from blah import *`你需要检查所有这些文件（这就是`import *`不鼓励的原因），或者你可以做类似的事情`grep -R def measured *`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-20T00:05:52.697

是的，这是真的。它是一个函数装饰器。

Python 中的函数装饰器是将函数作为单个参数并在其位置返回一个新函数的函数。

`@classmethod`并且`@staticmethod`是两个内置的函数装饰器。

[阅读更多 ”](http://www.python.org/dev/peps/pep-0318/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T00:29:56.907

测量是必须在该代码工作之前定义的函数的名称。

一般来说，任何用作装饰器的函数都必须接受一个函数并返回一个函数。该函数将替换为将其传递给装饰器的结果 - 在这种情况下为 measure() 。

# java - 比较 Java 中的现有数据条目

> ID：382626
> 
> 赞同：1
> 
> 时间：2008-12-20T00:05:37.377
> 
> 标签：java, hash, compare

我有一个将键与字符串相关联的 HashMap，我需要将一些字符串相互比较。但是，某些字符串可能在也可能不在 HashMap 中。

示例：假设我有 4 个字符串，如果可能的话，我打算将它们相互比较，但其中只有 3 个最终出现在 HashMap 中。如何比较存在的字符串而不尝试将它们与不存在的字符串进行比较，并且不做一堆嵌套的 if 和 else？

编辑：Alohci 的解决方案既简单又快速，而且很有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T02:04:26.950

循环遍历 HashMap 的 .values 集合存储第一个条目。将每个剩余条目与存储的条目进行比较。一旦你找到一个不匹配的，抛出你的错误。如果您到达循环的末尾，则所有字符串都匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T03:38:06.230

听起来您需要一个反向映射，将所有值映射到它们的键集。

```
Map<Key,Value> forwardMap;
Map<Value, Set<Key> reverseMap; 
```

然后，您可以查看您正在查看的所有条目是否都在集合中。确保在添加/删除正向映射时放入反向映射。

这种方法的好处是，测试将是 O(n)，其中 n 是您正在测试的键的大小，而不是 O(m)，其中 m 是前向映射的大小。

# php - PHP 的绝对路径包括

> ID：382629
> 
> 赞同：1
> 
> 时间：2008-12-20T00:07:12.240
> 
> 标签：php, include

好的，我在这个星期五的工作中设置了一个表，其中包含来自名为 values.php 的单独文件的数据。当我这样写时，div 变成空白。我想我的“包含”写错了，绝对路径不起作用吗？

```
<?php include('http://www.nextadvisor.com/credit_report_services/values.php'); ?>

<div class="box_text">
                        <div class="box_image">
                         <a href="<?php echo $offer1link ?>" target="blank"><img src="<?php echo $offer1logo ?>" alt="<?php echo $offer1name ?>"></a></div>
                      <div class="box_rating">
                            Rating:<span class="star_rating"><img src="<?php echo $offer1star1 ?>" alt=""></span><br>
                          <div class="rating_review"><a href="<?php echo $offer1link ?>" target="blank">Go to Site</a> | <a href="<?php echo $offer1anchor ?>">Review</a></div>                         </div>

                        <br style="clear: both;">
                      </div> 
```

哦，提前感谢您提供的任何帮助。帮助过我的人是最伟大的。我感觉很糟糕，因为有时两个人回答了这个问题，而我不能给两个人都投绿票。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-20T00:39:16.030

由于您使用的是 URL，PHP 将向服务器发送文件请求，服务器将解析它，就像浏览器请求它一样。您可能想要做的是使用相对于包含脚本的路径。如果要包含的文件在同一个文件夹中，只需使用
`include('values.php');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T00:28:19.577

默认情况下，您尝试执行的包含类型被阻止，并不是说它很危险。您正在尝试包含一个远程文件。

如果您的脚本与“values.php”在同一台机器上，您应该使用类似于“/var/www/nextadvisor.com/credit_report_services/values.php”的绝对路径或取决于文件位置的相对路径, 而不是[http://www.nextadvisor.com/credit_report_services/values.php](http://www.nextadvisor.com/credit_report_services/values.php)

在我看来，您似乎并未尝试包含远程文件，但如果您仍想包含远程文件，则必须在 php.ini 中设置以下指令

```
allow_url_fopen = 1
allow_url_include = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T00:28:56.660

绝对文件名类似于 /path/to/file.php，因为您可以从文件系统层次结构中的任何位置访问该文件。

如果它在同一个目录中，或者相对于同一个目录，你可以使用类似的东西

```
include dirname(__FILE__) . '/file.php';
include realpath(dirname(__FILE__) . '/../dir') . '/file.php';
include realpath(dirname(__FILE__) . '/../dir/file.php'); 
```

您可能应该制作一些常量，例如

```
define('BASEDIR', dirname(__FILE__));
define('LIBDIR', BASEDIR . '/lib'); 
```

# java - CheckStyle 模块“NeedBraces”可以与嵌套的 if/else 块一起使用吗？

> ID：382633
> 
> 赞同：3
> 
> 时间：2008-12-20T00:11:13.183
> 
> 标签：java, coding-style, checkstyle

我们正在使用[CheckStyle](http://checkstyle.sourceforge.net/index.html)来执行我们的样式标准。我们选择包含的样式规则之一是*NeedBraces*模块。

*[NeedBraces](http://checkstyle.sourceforge.net/config_blocks.html#NeedBraces)*指定每个块类型语句（例如`if`,`else`,`for`）必须有左花括号和右花括号。但是，据我所知，它并不能完全正常工作。

此示例将触发 CheckStyle 错误。

```
 if (true)
    {
        System.out.println("20");   
    }
    else
        System.out.println("30"); 
```

因为 else 案例没有大括号。但是，下一个示例未能触发 CheckStyle 错误。

```
 if (true)
    {
        System.out.println("20");   
    }
    else
        if (true)
        {
            System.out.println("30");
        } 
```

由于 else 情况下缺少大括号，这应该失败，但 checkstyle 让它通过。仔细检查文档后，我找不到任何原因导致它无法正常工作。

那么... **CheckStyle 模块“NeedBraces”可以与嵌套的 if/else 块一起使用吗？** 有任何想法吗？

* * *

这个问题的答案引出[了另一个问题](https://stackoverflow.com/questions/387008/is-there-a-checkstyle-rule-to-force-if-else-keywords-to-be-on-the-same-line-in)：是否有规则将上述不良代码标记为违规？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-20T00:54:46.590

我相信这是一个例外，因为虽然格式很奇怪，但你所拥有的是“else if”。在这种情况下，它不应该强迫你在 "if" 周围加上大括号，因为你最终会得到 "... else { if { ... } }

您的代码应格式化：

```
if (true)
{
    System.out.println("20");   
}
else if (true)
{
    System.out.println("30");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T02:35:15.530

在您的第一个示例中，如果您尝试在*else*块下添加另一个语句，那么您将需要放置大括号。另一方面，在第二个示例中，您将在大括号内添加语句。我相信这就是 CheckStyle 在前者中显示错误的原因，因为它容易出错。当您确实希望将其作为*else*的一部分而不是在外面时，您可能最终会添加语句而不放置大括号。

# rss - RSS 的联合部分如何工作？

> ID：382660
> 
> 赞同：4
> 
> 时间：2008-12-20T00:34:01.827
> 
> 标签：rss, syndication

我了解如何制作 RSS 文件。它的 XML 很简单。但是我是否需要任何特别的东西才能分发更新，或者我只需要定期更新文件，其余的就会自己处理？我在 rss 上找到的所有内容都在谈论它的作用，但并没有谈及它的作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-20T00:36:55.147

客户端会定期或偶尔重新下载您的 RSS 资源，部分基于您可以在 RSS 数据本身中建议的更新计划。如果客户保留了他们之前下载的内容，那么他​​们可以注意到上次的新内容。

# ajax - 使用 iframe 和 ajax 包含外部页面的内容有什么区别？

> ID：382662
> 
> 赞同：3
> 
> 时间：2008-12-20T00:35:50.000
> 
> 标签：ajax, iframe, external

我一直在阅读这方面的内容，似乎如果您使用 ajax，您只能引入位于同一域中的内容，而使用 iframe，您可以引入来自任何域的内容。是这样吗？还有哪些不同之处？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-20T00:42:28.910

请记住，它们是两种完全独立的技术。

(i)frame 确实将一个完整的 HTML 页面加载到浏览器中。页面是在同一个域还是另一个域中，对于纯粹的查看来说，并不重要。

Ajax 仅描述了一个系统，以促进 JavaScript 与（并且在当前跨浏览器的安全限制下，仅与）您生成 JavaScript 调用的文档所在的服务器进行通信。

(i)frame 技术从给定的任何 URL 加载和呈现完整的 HTML 页面。使用 JavaScript 从其他域访问其他文档的某些安全限制仍然适用。

使用 Ajax，它只意味着使用纯 JavaScript 与原始服务器通信（发送一些数据）并通常会返回一些数据。在 JavaScript 中。这些数据是什么以及如何使用它取决于您。是否将其插入 DOM（文档对象模型）、交换部件或加载新页面取决于您。

在某种程度上，你拥有你想要的所有自由。您可以在页面上有一个 (i) 框架，仍然进行 Ajax 调用并决定将另一个 URL 加载到 (i) 框架中。或者使用 Ajax 返回值在 (i) 框架内动态生成新的 HTML。或者在外面，在另一个文件中。

在这种情况下应用的安全限制称为“同源策略”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T00:47:11.397

很简单，iframe 就像一个常规框架，但它不会将浏览器窗口分割成多个部分，它位于页面内部并受滚动条的影响。

另一方面，Ajax 使用 javascript 来完成页面的部分加载，允许从服务器加载少量数据，而无需进行完整的回发。例如，当您发表评论、投票、排队播放视频等时，Youtube 使用 Ajax。他们这样做是为了让您的视频不会因完整的页面回发而中断和重新启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T06:01:05.547

除了其他人提到的这些差异之外，还有其他差异。iframe 加载整个 html/php 页面，无论是来自自己的服务器还是其他外部服务器。通常，它也有一个新的`<html>`,`<head>`和`<body>`标签。Ajax 只加载 html/php 页面的一部分。

此外，Ajax 从父文件中提取 CSS（甚至可能是 javascript 代码），但对于 Iframe，它无法提取相同的内容。

例如，这是主文件编码。

```
<!doctype html>
<html>
<head>
<style>
    .gappu {background-color:black;color:red;}
</style>
<meta charset="utf-8">
    <script src="../AllJqueries/jquery-1.11.3.min.js"></script> <!-- Use your own jQuery file -->
    <script>
        <!--
        $(document).ready(function(){
            $.ajax({url:"slave1.php?bare=true", success:function(data){
                $(".myDomain").html(data);
            }});
        }); /* End of Main Jquery */
        //-->
    </script>
<title>Ajax vs Iframe</title>
</head>

<body>
    <div class="myDomain"></div>
    <div>Iframe below</div>
    <iframe width="100%" height="500px" src="slave1.php"></iframe>
</body>
</html> 
```

现在，我们还有另一个文件，命名为 slave1.php

```
<?php
if(isset($_GET['bare'])) $bare = $_GET['bare'];
else $bare = false;
if(!$bare):
?>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<style>
    .gappu {background-color:blue;color:yellow;}
</style>
<!-- You can remove the above style later, and see the difference. The parent style will not apply for iframe -->
<title>Inside the Iframe</title>
</head>

<body>
<?php endif; ?>
    <div class="gappu">Hi, welcome to this demo</div>
<?php if(!$bare): ?>
</body>
</html>
<?php endif; 
```

在 Ajax 调用的情况下，行**Hi, welcome to this demo**将是黑色背景和红色，因为它是从父级借用 css。但在 iframe 中，它将是蓝色背景和白色，这是在 slave1.php 中定义的。您可以从 slave1.php 中删除样式，您会发现以 iframe 格式打印的纯文本。

希望这可以帮助。干杯。维杰·斯里尼瓦斯

# stack - 术语“网络堆栈”是什么意思？

> ID：382665
> 
> 赞同：23
> 
> 时间：2008-12-20T00:36:57.627
> 
> 标签：stack, web

当我在短语“web stack”中看到“web”的相关性时，我想知道“stack”在这种情况下指的是什么。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-12-20T00:38:16.517

它指的是用于构建网站的组件或技术/语言/操作系统/等。例如，“LAMP”堆栈是：Linux、Apache、MySQL、PHP

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-12-20T04:48:57.790

“堆栈”是程序员使用的俚语，他们拼命想让他们使用的工具集听起来很酷。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-20T00:51:10.140

堆栈是因为组件相互堆叠

```
Your Application Presentation
Your Application Controls
Your Application Models
HTTP Server (Apache, IIS, etc.)
Database
Operating System 
```

它不是严格意义上的堆栈（不像 OSI 协议堆栈）。但它大约是一个堆栈。

# javascript - 如何将 div 放置在两个 iframe 上，其中一个 iframe 具有外部（不同域）内容？

> ID：382675
> 
> 赞同：0
> 
> 时间：2008-12-20T00:40:36.713
> 
> 标签：javascript, ajax, iframe, html

我正在寻找一种方法将 div （它将是一个弹出窗口，由用户悬停和/或单击很像灯箱一样激活）在一个拆分 iframe 上，其中顶部 iframe 是来自我的服务器和底部 iframe 是来自另一台服务器的内容。像这样：

```
--------------------------------------
 | |
 | 鞋面 |
 | |
 | ------------------- |
 | | 分区 | |
 --------- --------|
 | | | |
 | -------------------- |
 | |
 | 降低 |
 | |
 --------------------------------------

```

基本上，它看起来像一个在顶部（上部）和底部（下部；外部内容）之间水平拆分的框，以及一个悬停在两者上方的 DIV，因此顶部和底部都有重叠。

顺便说一句，我还发布了另一个问题：ajax 与 iframe 的外部内容以及在这种情况下我应该使用什么。因此，较低的（外部内容）不一定必须是 iframe，具体取决于答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-20T01:14:50.497

Take a look at this:

[http://ahare.us/test.html](http://ahare.us/test.html)

This page does pretty much what you are asking for. I would try to avoid z-index as much as possible because once you head down that road you are committed to it in ways that may become painful.

(Just so you know I tested this in Firefox 3 and IE 6).

Here is the code - I have two rules for the #pop div, the first is purely the presentation, the second rule has the positioning styles that make the whole thing work.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>test</title>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <style type="text/css">
            iframe { width:500px; height:200px; }
            #pop { width:400px; height:300px; background:#ff9; }
            #pop { position:absolute; top:50px; left:50px; }
        </style>
    </head>
    <body>
        <div id="pop">this is the popup</div>   
        <div>
            <iframe src="content.html"></iframe>
        </div>
        <div>
            <iframe src="http://www.google.com"></iframe>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T00:56:57.663

您最好的选择是确保将样式设置为：

```
.overlapper
{
    position: absolute;
    z-index: 9000;  /* some very high value to ensure its always on top */
    top: 50px; /* whatever positioning you need */
    left: 50px;
    width: 500px;
    height: 100px;
} 
```

只需将您的值设置为您需要的任何值。要注意的主要事情是 z-index，较高的值意味着它在层顺序中较高，0 或 1 是最低的。

Some things to note; you can set your position to "position: relative;" too if the absolute positioning isn't conducive to the layout, in which case you may need to use negative top values to drag it back over top of the first iframe.

# wpf - WPF中好的NumericUpDown等价物？

> ID：382676
> 
> 赞同：103
> 
> 时间：2008-12-20T00:42:14.807
> 
> 标签：wpf, spinner, numericupdown

我正在 WPF 中寻找一个简单的 NumericUpDown（又名数字微调器）控件。这似乎是 WPF 中另一个缺乏控制的问题。肯定有一些现有的，我不喜欢重新发明轮子。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2011-03-17T03:23:48.583

扩展的 WPF 工具包有一个：[NumericUpDown](http://wpftoolkit.codeplex.com/wikipage?title=NumericUpDown&referringTitle=Home) ![在此处输入图像描述](https://i.stack.imgur.com/KbVoa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-14T12:06:47.130

如果商业解决方案没问题，你可以考虑这个控件集： [Mindscape 的 WPF Elements](http://www.mindscape.co.nz/products/WpfElements)

它包含这样一个旋转控件，或者（我个人的偏好）一个旋转装饰器，可以像这样在 XAML 中装饰各种数字控件（如 IntegerTextBox、NumericTextBox，也是控件集的一部分）：

```
<WpfElements:SpinDecorator>
   <WpfElements:IntegerTextBox Text="{Binding Foo}" />
</WpfElements:SpinDecorator> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-28T21:13:36.117

添加文本框和滚动条

在 VB 中

```
Private Sub Textbox1_ValueChanged(ByVal sender As System.Object, ByVal e As System.Windows.RoutedPropertyChangedEventArgs(Of System.Double)) Handles Textbox1.ValueChanged
     If e.OldValue > e.NewValue Then
         Textbox1.Text = (Textbox1.Text + 1)
     Else
         Textbox1.Text = (Textbox1.Text - 1)
     End If
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-20T12:22:20.117

原始 WPF 控件集中缺少但经常使用的控件是 NumericUpDown 控件。这是一种让用户在小范围内从固定范围内选择数字的巧妙方法。可以使用滑块，但对于水平空间很小的紧凑型表单，NumericUpDown 是必不可少的。

**解决方案 A（通过 WindowsFormsHost）**

您可以通过将 Windows 窗体 NumericUpDown 控件托管在 WindowsFormsHost 中来使用 WPF 中的控件。请注意，您必须包含对*System.Windows.Forms.dll*程序集的引用。

```
<Window x:Class="WpfApplication61.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms" 
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>    
        <WindowsFormsHost>
            <wf:NumericUpDown/>
        </WindowsFormsHost>
... 
```

**解决方案 B（自定义）**

周围有几个商业和 codeplex 版本，但都涉及安装 3rd 方 dll 和项​​目开销。构建你自己的要简单得多，而且使用 ScrollBar 是一种有目的的方法。

没有 Thumb（只是中继器按钮）的垂直 ScrollBar 实际上正是我们想要的。它继承了 rom RangeBase，因此它具有我们需要的所有属性，例如 Min、Max 和 SmallChange（设置为 1，将其限制为整数值）

所以我们改变了ScrollBar ControlTemplate。首先，我们删除 Thumb 和 Horizo​​ntal 触发动作。然后我们将剩余部分分组到一个网格中，并为数字添加一个 TextBlock：

```
<Grid Margin="2">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <TextBlock VerticalAlignment="Center" FontSize="20" MinWidth="25" Text="{Binding Value, RelativeSource={RelativeSource TemplatedParent}}"/>
    <Grid Grid.Column="1" x:Name="GridRoot" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Background="{TemplateBinding Background}">
        <Grid.RowDefinitions>
            <RowDefinition MaxHeight="18"/>
            <RowDefinition Height="0.00001*"/>
            <RowDefinition MaxHeight="18"/>
        </Grid.RowDefinitions>
        <RepeatButton x:Name="DecreaseRepeat" Command="ScrollBar.LineDownCommand" Focusable="False">
            <Grid>
                <Path x:Name="DecreaseArrow" Stroke="{TemplateBinding Foreground}" StrokeThickness="1" Data="M 0 4 L 8 4 L 4 0 Z"/>
            </Grid>
        </RepeatButton>
        <RepeatButton Grid.Row="2" x:Name="IncreaseRepeat" Command="ScrollBar.LineUpCommand" Focusable="False">
            <Grid>
                <Path x:Name="IncreaseArrow" Stroke="{TemplateBinding Foreground}" StrokeThickness="1" Data="M 0 0 L 4 4 L 8 0 Z"/>
            </Grid>
        </RepeatButton>
    </Grid>
</Grid> 
```

资料来源：

*   [wpf 中是否有 numericUpDown 组件？](https://social.msdn.microsoft.com/Forums/vstudio/en-US/c39664fb-2a22-472f-b0b0-ee48d2fac43c/is-there-a-numericupdown-component-in-wpf?forum=wpf)
*   [来自重新模板化 ScrollBar 的 WPF NumericUpDown](http://code.msdn.microsoft.com/windowsdesktop/WPF-NumericUpDown-from-15a7f578)

# multithreading - IIS 挂起状态

> ID：382678
> 
> 赞同：0
> 
> 时间：2008-12-20T00:42:35.057
> 
> 标签：multithreading, iis, freeze

任何检测在 IIS 下运行的 VB6 组件中的缺陷的建议。IIS 变得不稳定并在一段时间后进入挂起状态。这些问题大部分仅发生在生产环境中。我们有许多模块正在运行。可能存在有错误的组件，需要识别它们。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T02:18:12.977

使用[Windows 调试工具](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)分析 IIS 转储。[Tess 的博客](http://blogs.msdn.com/tess/pages/net-debugging-demos-information-and-setup-instructions.aspx)是学习使用 WinDbg 的最佳资源之一。尽管她专注于 .NET 调试，但大部分材料适用于任何 Win32 进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T00:50:07.770

One thing to watch out for is multi-threading issues. VB6 components often don't play well when accessed by multiple threads.

If the client code is an ASP.NET application consider putting synchlocks around the calls to ensure that they are called sequentially.

Another sure-fire way to fubar IIS is to display a message box or initiate some other sort of user interaction. Get those MsgBox calls outa there.

Other than that... good logging helps. VB6 is pretty opaque when errors arise.

# css - IE 中的空格 - FF 显示正常

> ID：382706
> 
> 赞同：1
> 
> 时间：2008-12-20T01:00:39.683
> 
> 标签：css, internet-explorer, space

在我的个人网站上查看单个帖子时，我有一个概述 DIV，在 FF 中，主标题和摘录之间没有空格，但在 IE 中有一个空格。关于如何摆脱它的任何想法？

我有 FF 的 FireBug，我在我的另一台 PC 上安装了 IE Developer Toolbar 以尝试检查代码以找到问题，但没有运气。

[http://www.ryancoughlin.com/2008/12/19/dunks-or-starbucks-who-comes-out-on-top/](http://www.ryancoughlin.com/2008/12/19/dunks-or-starbucks-who-comes-out-on-top/)

这是一个例子。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T01:30:25.707

看起来包含日历日期的 div 正在将其向下推，因为它的摘录宽度设置为 100%，将其设置为 90%，您会看到它会移到顶部。

编辑：如果您将日历 DEC 19th 的容器的宽度从 88 更改为 80，它应该看起来更好

这是我在 IE 开发人员工具栏中看到的内容

[http://imagebin.antiyes.com/451](http://imagebin.antiyes.com/451)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T01:47:55.937

在使用任何其他样式表之前尝试添加一个[重置 css 文件。](http://meyerweb.com/eric/thoughts/2008/01/15/resetting-again/)这将重置浏览器之间标准 css 的不一致。

# wiki - How to import word documents into wiki?

> ID：382710
> 
> 赞同：5
> 
> 时间：2008-12-20T01:03:22.940
> 
> 标签：wiki

Anyone knows? Because i think one of the stumbling blocks for people to embrace wiki is of the fact that they need to separately upload the images to the wiki instead of just doing simple copy/paste to the word document

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-20T09:22:48.140

[OpenOffice](http://www.openoffice.org)可以保存为 Mediawiki 文本文件，随时可以在线粘贴到编辑框中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T21:00:08.223

Microsoft 有一个 Word 2007 和 Word 2010 的附加组件，可以保存在 mediawiki 标记中。可以从[http://www.microsoft.com/download/en/details.aspx?id=12298下载](http://www.microsoft.com/download/en/details.aspx?id=12298)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-20T01:29:32.263

The guys at mindtouch.com told me they have a tool that imports word docs into their wiki.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T08:57:47.613

您没有指定使用哪个 wiki，以下是一些与 mediawiki 相关的链接：

*   您可以使用[wikEd](http://en.wikipedia.org/wiki/User:Cacycle/wikEd)，它允许粘贴格式化文本
*   [Help:WordToWiki](http://en.wikipedia.org/wiki/Help:WordToWiki)列出了 3 种替代方式
*   [扩展：Word2MediaWikiPlus](http://www.mediawiki.org/wiki/Extension:Word2MediaWikiPlus)还包括自动图像上传。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-19T19:29:47.120

webworks.com 的人们有一个很好的桌面软件解决方案，可以自动将 Word 文档发布到 wiki。目前它们支持开箱即用：Confluence、Mediawiki 和 MoinMoin。

# sql - Returning more than one value from a sql statement

> ID：382711
> 
> 赞同：2
> 
> 时间：2008-12-20T01:03:35.200
> 
> 标签：sql, tsql

I was looking at sql inner queries (bit like the sql equivalent of a C# anon method), and was wondering, can I return more than one value from a query?

For example, return the number of rows in a table as one output value, and also, as another output value, return the distinct number of rows?

Also, how does distinct work? Is this based on whether one field may be the same as another (thus classified as "distinct")?

I am using Sql Server 2005\. Would there be a performance penalty if I return one value from one query, rather than two from one query?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T01:13:28.003

You could do your first question by doing this:

```
SELECT
  COUNT(field1),
  COUNT(DISTINCT field2)
FROM table 
```

(For the first field you could do * if needed to count null values.)

Distinct means the definition of the word. It eliminates duplicate returned rows.

Returning 2 values instead of 1 would depend on what the values were, if they were indexed or not and other undetermined possible variables.

If you are meaning subqueries within the select statement, no you can only return 1 value. If you want more than 1 value you will have to use the subquery as a join.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T14:43:20.210

如果内部查询是内联的`SELECT`，您可能很难选择多个值。但是，通常可以改为`JOIN`使用子查询；这样，子查询可以命名，你可以得到多个结果

```
SELECT a.Foo, a.Bar, x.[Count], x.[Avg]
FROM a
INNER JOIN (SELECT COUNT(1) AS [Count], AVG(something) AS [Avg]) x
  ON x.Something = a.Something 
```

这可能会有所帮助。

`DISTINCT`做它所说的。IIRC，您可以`SELECT COUNT(DISTINCT Foo)`等查询不同的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T15:10:45.287

形式的内部查询：

```
SELECT * FROM tbl WHERE fld in (SELECT fld2 FROM tbl2 WHERE tbl.fld = tbl2.fld2) 
```

不能返回多行。当您需要来自辅助查询的多行时，通常需要对另一个查询进行内部联接。

行：

```
SELECT count(*), count(distinct *) from table 
```

将返回一个数据集，其中一行包含两列。第 1 列是表中的总行数。第 2 列只计算不同的行。

Distinct 表示返回的数据集不会有任何重复的**行**。Distinct 通常只能在选择后直接出现一次。因此查询如下：

```
SELECT distinct a, b, c FROM table 
```

可能会有这样的结果：

```
 a1  b1  c1
 a1  b1  c2
 a1  b2  c2
 a1  b3  c2 
```

请注意，值在整个结果集中重复，但每一行都是唯一的。

我不确定你的最后一个问题是什么意思。您应该从查询中返回与查询相关的所有数据。至于更快，只有基准测试才能告诉您哪种方法更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-20T16:08:29.523

您可以通过 3 种方式返回多个结果（我想不到）

1.  通过具有多个值的选择，例如：选择 col1、col2、col3
2.  有多个查询，例如： select 1 ; 选择“2”；选择 colA。您可以通过调用 .NextRecord() 在数据读取器中找到它们
3.  使用输出参数，在执行查询之前声明参数，然后从它们获取值。例如：设置 @param1 = "2" 。字符串 myparam2 = sqlcommand.parameters["param1"].tostring()

不同，过滤结果行是唯一的。

# web-applications - 何时编写基于 Web 的应用程序以及何时编写基于桌面的应用程序？

> ID：382718
> 
> 赞同：2
> 
> 时间：2008-12-20T01:07:28.703
> 
> 标签：web-applications, desktop-application

现在是时候为基于 Web 的应用程序编写所有内容了吗？编写 web 应用程序比基于 winforms 的应用程序慢？

何时基于 Web 编写，何时基于桌面编写？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-20T01:22:53.057

您应该在一个单独的层中编写所有具有逻辑的应用程序，以便您可以根据不断变化的业务决策轻松编写 Web 界面或 winforms 界面。

更严肃的一点。当您需要大量用户访问和更改大量共享数据时，您应该创建一个 Web 应用程序。当共享数据非常少时，或者当数据共享简单到通过电子邮件来回发送文件就足够了时，您应该构建桌面应用程序。Web 应用程序通常更难正确处理，因此您只应在必要时承担额外的工作。编程权限需要做更多的工作，维护应用程序服务器和数据库需要做更多的工作。但是，Web 应用程序可以立即更新，因此您可以从一些小事开始，并且每个使用该应用程序的人都可以在完成后获得新功能和修复。所以你必须决定哪个更重要。无论您选择哪一种，都有一些权衡取舍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T01:43:44.993

这就像一切 - 有时间和地点。您可以根据项目的需求选择架构。没有适用于所有情况的正确解决方案。

如果我需要大量使用低功耗机器的用户来访问高性能数据存储，我倾向于编写一个 Web 应用程序。如果我正在编写实用程序应用程序来与文件等进行交互，那么我会编写一个 WinForms 应用程序。所以这真的取决于...

此外，如果您正在编写一个需要大量即时反馈给用户的高度交互的应用程序，那么编写 WinForms 应用程序通常更容易/更快，并且更易于维护......但是，权衡是它更难推广到一家大型公司，那里有很多机器需要访问该软件......所以你需要开始考虑如何在 Web 应用程序中实现该功能。

没有“正确”的方法，也没有“错误”的方法——这是一个审查项目需求和评估可用技术并在当时做出最佳决策的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T01:42:22.267

您是否探索过创建[智能客户端的选项](http://en.wikipedia.org/wiki/Smart_client)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-20T03:16:51.453

我曾在需要这两种类型的应用程序的项目中工作过，如果您不想担心安装和/或客户端配置，那么这一切都与您的要求有关，您正在寻找基于 Web 的应用程序，但是如果该应用程序需要高响应性和大量计算，那么您应该在 WinForm 应用程序中考虑，如前所述，分层应用程序将帮助您重用代码。这也将是一个商业应用程序，您应该考虑许可限制

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-20T02:44:26.090

看看 WPF/Silverlight。它解决了这个问题。如果您必须在客户端 PC 上访问某些内容，那么当然，瘦客户端上的独立规则（至少目前如此）

# asp.net-mvc - EC2 上的 ASP.net MVC

> ID：382719
> 
> 赞同：4
> 
> 时间：2008-12-20T01:07:36.457
> 
> 标签：asp.net-mvc, amazon-ec2

Amazon EC2 是否支持 ASP.net MVC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-30T07:37:21.077

是的，您需要安装[.NET 3.5 SP](http://talesfromthebleedingedge.blogspot.com/2008/11/cloud-hosting-amazon-ec2.html) 1 并配置[IIS6.0](http://talesfromthebleedingedge.blogspot.com/2008/11/cloud-hosting-amazon-ec2.html)。但是您可以完全控制实例，所以一切皆有可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T01:57:35.747

它可以[运行完整的 Windows Server 2003](http://aws.amazon.com/windows/)，所以是的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-14T16:58:10.937

（免责声明，我是[AppHarbor](http://appharbor.com/)的联合创始人）

您绝对可以在您配置和维护的 EC2 实例上运行 ASP.NET MVC 应用程序。如果您不想处理安装、管理和更新服务器的麻烦，您应该考虑将您的应用程序推送到[AppHarbor](http://appharbor.com/)。AppHarbor 是一个完全托管的平台，可在 Amazon EC2 上运行（并将应用程序部署到）Amazon EC2。

# oracle - What is the easiest approach to synchronize and duplicate oracle db schema?

> ID：382720
> 
> 赞同：1
> 
> 时间：2008-12-20T01:08:19.310
> 
> 标签：oracle

I find it hard to generate the dbscripts from TOAD. I get errors when executing the scripts things like looping chain of synonyms or certain statement not abel to exceute etc.

Is there any seamless way in said like connecting a remote oracle schema and just duplicate to my local environment?

And also do synchronization along the way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-21T22:14:06.960

If you are doing a one-off copy exp/imp (or expdp/impdp in newer versions) is best. If you are progressing changes from dev to test to prod, then you should be using formal source control, with SQL or SQL*Plus scripts.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T02:00:36.020

Syncing an entire schema, data and all, is fairly easily done with exp and imp:

```
$ exp username/password@source-sid CONSISTENT=Y DIRECT=Y OWNER=schema FILE=schema.exp
$ ⋮ # some command(s) to nuke objects, see below
$ imp username/password@dest-sid FROMUSER=schema FILE=schema.exp 
```

You can import into a different schema if you want by using TOUSER in the imp command.

You'll need to get rid of all the objects if they already exist before running imp. You can either write a quick script to drop them all (look at the user_objects view), or just drop the user with cascade and re-create the user.

There is probably a better way to do this, but this is quick to implement and it works.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-19T19:23:33.457

[Schema Compare for Oracle](http://www.red-gate.com/products/oracle-development/schema-compare-for-oracle/)应该能够实现这一点，因为它是专门用于解决此任务的工具。

如果您希望它在后台发生，可以使用命令行来实现此目的。

# escaping - 使用 tcsh 别名转义双引号

> ID：382734
> 
> 赞同：5
> 
> 时间：2008-12-20T01:23:10.357
> 
> 标签：escaping, alias, quotes, tcsh

我正在尝试运行以下命令：

```
replace -x "must " A2input.txt
replace -x " a" -f -s ## A2input.txt
replace -x to -s ## -a A2input.txt
replace -x faith -f "unequivocal" A2input.txt 
```

如果我可以将它的别名为“a”、“b”、“c”、“d”等简短而简单的名称，那就太好了……

但是，其中一些参数有一个引号，这弄乱了别名。有谁知道如何真正逃避双引号？我已经尝试过'\"'和\"之类的东西，但似乎没有任何效果。

我正在使用 tcsh 作为我的外壳。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-04T04:12:59.100

以下所有工作都`tcsh`可以实现各种结果：

```
alias t echo hello world # 你可能实际上不需要任何引号
alias u 'echo "hello world"' # 不同类型的嵌套引号
alias v echo\ \"hello\ world\" # 转义一切
alias w echo '\;'hello'";"' world # 仅引用/转义问题区域
alias x 'echo \"hello world\"' # 单引号和文字转义 "
alias y "echo "\""hello world"\" # 取消引用，转义引用，引用 ("\"")
alias z 'echo '\''hello world'\' # 同样适用于单引号 ('\'')

```

要查看 shell 如何解释这些，请`alias`不带参数运行：

```
% 别名
t（回声你好世界）
你回声“你好世界”
v 回声“你好世界”
w (回声\;你好";"世界)
x echo \"你好世界\"
y 回声“你好世界”
z echo '你好世界'

```

括号中的任何内容都在子shell中运行。如果您尝试设置环境变量，这会很糟糕，但其他情况大多无关紧要。

最后，这是示例的实际作用：

```
%t; 你; 五; w; X; 是；z
你好世界
你好世界
你好世界
;你好; 世界
“你好世界”
你好世界
你好世界

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-20T02:00:11.937

我通过将带有双引号的字符串存储在一个变量中来使其工作，其中字符串由单引号引起来。当我使用单引号内的变量时。
例子：

```
[11:~] phi%
[11:~] phi% set text = 'a quote "'
[11:~] phi% 别名 ec echo '$text'
[11:~] phi%ec
报价“
[11:~] phi%
[11:~] phi% alias ec echo this has '$text'
[11:~] phi%ec
这有一个报价“
[11:~] phi%

```

我在 OSX 上用 tcsh 测试了这个

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-18T17:34:34.160

`tcsh`有一个较新的变量`backslash_quote`。不确定何时添加，但在`6.18.01`（OS X El Capitan 上的版本）和`6.19`（撰写本文时的最新稳定版本）中受支持。这使得可以在引号内转义`'`、`"`和。```

```
set backslash_quote

set sentence = 'I\'m a little teapot.'
set sentence2 = "The man said \"hello\"" 
```

如果您不想使用此选项，您的选择仅限于在符号周围使用不同类型的引号

```
"The man said "'"'"hello"'"' 
```

或者根本不使用引号并随意反斜杠。

```
The\ man\ said\ \"hello\" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-24T23:29:29.050

It would appear that the reason that `\"` and `\'` don't work as you expect is that `csh` traditionally didn't support such syntax, so, if `tcsh` were to unconditionally support it, then such older scripts may not work properly anymore.

As mentioned in another answer, tcsh itself has the ***`set backslash_quote`*** feature; however, unlike implied in the mentioned answer, this is hardly a new feature, it's just a tcsh-specific one, and was actually added to [tcsh](http://ports.su/shells/tcsh) at least some 27 years ago — the feature was first documented in the manual page at [`tcsh.man,v 3.8 1991/07/25 04:50:55`](https://github.com/tcsh-org/tcsh/commit/9c3521cc0e7da88c77de00063d0b130eaed4e655), which hardly qualifies it as "new".

[http://mdoc.su/n,f,d/tcsh.1](http://mdoc.su/n,f,d/tcsh.1)

> ```
> backslash_quote (+)
>        If set, backslashes (`\') always quote `\', `'', and `"'.  This
>        may  make complex quoting tasks easier, but it can cause syntax
>        errors in csh(1) scripts. 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T01:53:15.287

如果您无法使用别名，只需编写一个简短的 shell 脚本 chmod +x，并将其放在 $PATH 中的某个位置（如 $HOME/bin）：

```
#!/bin/tcsh
replace -x "must" ... 
```

我对 tcsh 没有任何经验，但是使用 bash 你可以像以下任何一种方式一样：

```
alias t='echo "hello  world"'     # using single quotes to enclose entire string
alias t=echo\ \"hello\ \ world\"  # escape " and <space>
alias t="echo \"hello  world\""   # double-quote + escape inner double quotes 
```

也许类似的东西会在 tcsh 中起作用？

# asp.net-mvc - MVC ModelBind ListBox With Multple Selections

> ID：382747
> 
> 赞同：1
> 
> 时间：2008-12-20T01:39:57.747
> 
> 标签：asp.net-mvc, model-view-controller

How do I submit the ListBox selections to the ModelBinder?

```
<%=Html.Hidden("response.Index",index)%>
<%=Html.ListBox("response[index].ChoiceID",
                new MultiSelectList(gc.choice,"ChoiceID","ChoiceText") )%> 
```

'gc.choice' is a List

I can get the fisrt selected value to the model, but not the second selection presumably because I cannot change the index.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-02-04T11:24:55.523

我以稍微不同的方式解决了这个问题......

```
[Model]
public IEnumerable<string> SelectedStores { get; set; }

[View]
<%= Html.ListBox("SelectedStores", 
    (MultiSelectList)ViewData["Stores"], 
    new { size = "8" }) %>

[Controller]
ViewData["Stores"] = 
    new MultiSelectList(StoreItems, "Value", "Text", model.SelectedStores); 
```

所以模型有一个 IEnumberable，它将填充用户选择。视图显示带有 MultiSelectList 的 ListBox，并且控制器在构造 MultiSelectList 时从模型中传入 SelectedStores。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-31T12:40:03.943

我构建了一个`SamplePresentationModel`具有 MultiSelect 成员的演示模型类`userList`。然后假设`IEnumerable<User> allUser`是选项列表。我用

```
 View(new SamplePresentationModel(){ userList = new MultiSelectList(allUsers, 
    "UserId", 
    "UserName", 
    allUsers.Select(user => user.UserID))}); 
```

将 MultiSelection 传递给视图。

然后在视图中我可以构造列表框

```
 <label for="userList">users:</label>
    <%= Html.ListBox("usersList", Model.userList)%> 
```

在 POST 操作中，我可以捕获选择：

```
IEnumerable<int> selectedUserIDs = Request["usersList"].Split(new Char[] { ',' }).Select(idStr => int.Parse(idStr)); 
```

不知道这是否有帮助！

# html - IE7 缺少 Atom 提要自动发现

> ID：382751
> 
> 赞同：4
> 
> 时间：2008-12-20T01:43:29.177
> 
> 标签：html, feed, autodiscovery, atom-feed

我一直在向坚持使用 IE 的客户展示一个网站，但令我惊讶的是，我发现 IE7 不会自动发现 Atom 新闻源。

提要链接到有效 HTML 4.01 Strict 页面的 HEAD 元素内`<link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom 1.0">`，链接指向正确的 URL，链接的提要是作为 application/atom+xml 的有效 Atom 1.0 XML 文件并包含正确的`<link rel="self">`.

Firefox、Opera、Safari 和 IE8 beta 2 都正确地找到了提要并点亮了相关的地址栏按钮——只有 IE7 保持灰色。[相同的 IE7 在其他地方发现新闻源并通过DiveIntoMark 的自动发现测试套件](http://diveintomark.org/tests/client/autodiscovery/)的 HTML 部分没有任何问题。

将 HREF 更改为完全限定的 URL 没有任何区别，将 TYPE 更改为 RSS 2.0 MIME 或删除 TITLE 属性也没有任何区别。

网站地址为[http://www.monteanalogo.net/](http://www.monteanalogo.net/)。

关于这里有什么问题的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T14:26:06.593

我将您的源代码复制到了我的本地计算机上，一旦我将 href 更改为完整的 url，而不是相对的，IE7 的自动发现就会很好地启动：

```
 <link rel="alternate" type="application/atom+xml" 
          href="http://www.monteanalogo.net/atom.xml" title="Atom 1.0"> 
```

需要一个完整的 URL 似乎是一个 IE 故障，因为[关于 atom 自动发现的 RFC](http://philringnalda.com/rfc/draft-ietf-atompub-autodiscovery-01.html#anchor10)指出：

> 该值可能是一个相对 URI，如果是这样，客户端必须将其解析为一个完整的 URI ...使用文档的基本 URI

微软自己的[发布者指南](http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx)也在`href`标签中列出了完整的 url，但没有提到它是强制性的：

> 以下是 Atom 自动发现的示例：
> 
> ```
> <head>
>   <link rel="alternate" type="application/atom+xml" 
>      title="your feed title here"
>      href= "http://www.company.com/feedurl.xml">
> </head> 
> ```

# vb.net - Compiling Massive VB.NET Project

> ID：382765
> 
> 赞同：1
> 
> 时间：2008-12-20T01:57:22.953
> 
> 标签：vb.net, makefile, compilation

To compile my current project, one exe with ~90,000 loc + ~100 DLL's it takes about a half hour or more depending on the speed of the workstation.

The build process is one of running devenv from Powershell scripts. This works very well with no problems.

The problem is that it is slow. I want to speed up this build process.

MSBuild (using VS-2005) is one option but there's a bug specifying icons to the vb compiler/linker on the command line such that it won't successfully link.

What other options are there to "make" VB.NET programs?

(Faster workstation is not an option.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-20T03:03:56.033

您是否每次都必须编译整个解决方案？有了这么多的程序集，除非它们真正改变，否则它们似乎不太可能都需要构建。如果您的解决方案由多个项目组成，您可能会考虑在构建环境中创建多个解决方案。一个主解决方案可以包含所有项目，另一个包含最常更改的项目。然后，您可以配置构建过程以专注于已更改的项目。根据您使用的源代码控制系统，您可能能够查询系统以确定自上次构建以来哪些项目已更改，并且仅构建这些项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T03:10:00.563

如果可以，请升级到 3.5 版本的 MSBuild。它可以构建解决方案文件，并启用对[多处理器支持的支持](http://blogs.msdn.com/aaronhallberg/archive/2007/10/02/fancy-new-command-line-options-for-msbuild.aspx)[（](http://blogs.msdn.com/msbuild/archive/2007/10/22/enabling-multiprocessor-support-in-an-msbuild-host.aspx)或者如果您需要自己托管它），使其能够并行构建项目。

需要注意的是，您需要使用项目引用，以便它知道要构建什么。

还有，现在需要多长时间？您是否查看过 CPU/内存使用情况（使用类似[PerfMon](http://msdn.microsoft.com/en-us/library/aa645516(VS.71).aspx)的东西）来查看它是否是瓶颈？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T02:05:48.740

There's [NAnt](http://nant.sourceforge.net/), and [Cruisecontrol.NET](http://confluence.public.thoughtworks.org/display/CCNET/Welcome+to+CruiseControl.NET) for continuous build.

You mentioned that getting a faster PC is not an option, but how much memory do you have? 2GB should be the minimum for a developer machine. Also, using a fast 10K RPM hard disk makes a [big difference](http://weblogs.asp.net/scottgu/archive/2007/11/01/tip-trick-hard-drive-speed-and-visual-studio-performance.aspx).

Have you tried disabling any virus scanner during your build?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-20T08:21:01.637

如果您有大量项目，那么您应该尝试减少它们。您以后可以随时将它们拆分为 dll。项目越少，构建的速度就越快。特别是如果它必须按特定顺序构建它们。

将它们分解为更小的解决方案也是一种选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T05:52:49.143

除了为您的机器添加更多内核、CPU 能力和内存之外，您无能为力让构建过程更快，但这不是您的选择。

大多数大型项目都不是独立于单个 EXE 中的。更常见的是，逻辑单元被移动到单独的程序集中，这些程序集可以是 DLL 或 EXE。最终结果是一大堆小组件，而不是一个巨大的组件。

举一个例子，我参与的一个项目是巨大的，由 700 多个表格和 10 个类组成，其中 1000 个。功能相关的表单，例如与打印、报告生成、用户询问等相关的表单，都包含在自己的 EXE 中。如果我正在处理报告，我会从构建过程中排除所有与报告无关的项目，这有助于将编译时间从半小时缩短到几秒钟。

这种编程风格可能很棘手，但如果做得好，它就可以简单地工作并且完美无缺。

# delphi - Why is my cloned dataset blank?

> ID：382772
> 
> 赞同：0
> 
> 时间：2008-12-20T02:02:04.287
> 
> 标签：delphi, clone, client-dataset

I'm using TClientDataset.CloneCursor to implement different views of the same data. I have a master dataset, and several clones, each of which contains a different subset of the master dataset's fields. But when I try to display data from the clones, they come up empty. The master dataset is populated with data correctly, and the clone datasets' CloneSource property is pointing to the correct dataset, but if I put two grids side-by-side, one showing the master and the other linked to a clone view, the clone view one will be blank.

Any idea what can cause this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T08:47:40.490

好的，既然你没有任何代码，那我给你写一些。这听起来像你在说什么，它适用于我的机器。所以现在你告诉我你在做什么不同。**将TClientDataSet**、**TDataSource**、**TDBGrid**各放两个。将它们连接起来并正确命名：

```
var
  idField: TFieldDef;
  stringField: TFieldDef;
begin
  idField := ds1.FieldDefs.AddFieldDef;
  idField.DataType := ftInteger;
  idField.Name := 'id';

  stringField := ds1.FieldDefs.AddFieldDef;
  stringField.DataType := ftString;
  stringField.Size := 10;
  stringField.Name := 'name';

  ds1.CreateDataSet;
  ds1.InsertRecord([1, 'Jim McKeeth']);
  ds1.InsertRecord([2, 'Mason Wheeler']);
  ds1.InsertRecord([3, 'Jeff Atwood']);

  ds2.CloneCursor(ds1, true);
  ds2.Filter := 'id=1';
  ds2.Filtered := True;
end; 
```

# vim - Emacs 等效于 Vim 的 foldmethod = indent

> ID：382781
> 
> 赞同：12
> 
> 时间：2008-12-20T02:19:56.717
> 
> 标签：vim, emacs, editor, folding, outline

**问题：** Emacs 是否有一个规范的等价于 Vim 的[Folding with Foldmethod=indent](http://vimdoc.sourceforge.net/htmldoc/options.html#'foldmethod')？

我对可以与任何 Emacs 主要模式和任何文件一起工作的东西特别感兴趣。Emacs 搜索还没有找到明确的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-20T03:33:24.757

似乎可以，虽然我自己不使用折叠，所以我没有尝试过。毫不奇怪，Python 的人都在关注这个特性。请参阅以下内容：

*   [http://mail.python.org/pipermail/tutor/2002-September/017482.html](http://mail.python.org/pipermail/tutor/2002-September/017482.html)
*   [http://www.nabble.com/Code-folder-with-Emacs-td16189193.html](http://www.nabble.com/Code-folder-with-Emacs-td16189193.html)
*   [http://groups.google.ca/group/comp.lang.python/msg/956f1c2d37f93995](http://groups.google.ca/group/comp.lang.python/msg/956f1c2d37f93995)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-15T22:26:14.377

也许选择性显示？我将[以下函数](http://emacs.wordpress.com/2007/01/16/quick-and-dirty-code-folding/)绑定到 [f2]

```
;; http://emacs.wordpress.com/2007/01/16/quick-and-dirty-code-folding/
(defun jao-toggle-selective-display (column)
  (interactive "P")
  (set-selective-display
   (if selective-display nil (or column 1)))) 
```

不过，这很简单，你真的希望它对 Pythony 缩进敏感....

更新：昨晚我盯着这个，意识到我厌倦了 Cu 进入我所在的列（加 1）......所以我把它编码了：

```
(defun toggle-selective-display-column ()
  "set selective display fold everything greater than the current column, or toggle off if active"
  (interactive)
  (set-selective-display
   (if selective-display nil (or (+ (current-column) 1) 1)))) 
```

进一步的阐述应该结合这两个功能。

另见：[如何在emacs中实现代码折叠效果](https://stackoverflow.com/questions/1085170/how-to-achieve-code-folding-effects-in-emacs)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-05-19T02:38:38.270

我尝试了 Joe Casadonte 和 Michael Paulukonis 的所有建议，但没有一个能像 vim 的那样好用。因此，目前看来，对 OP 问题的更准确答案可能是否定的。

# jetty - 如何为 Jetty 7.0pre5 配置 JNDI

> ID：382791
> 
> 赞同：3
> 
> 时间：2008-12-20T02:30:10.207
> 
> 标签：jetty, jndi

启动使用 Mysql 连接池的 Jetty 时出现此错误。有人可以帮帮我吗？

```
[root@localhost test]# java -DOPTIONS=plus,ext.default -classpath %CLASSPATH% -jar /usr/src/jetty7/start.jar myjetty.xml
2008-12-20 18:24:08.138::INFO:  Logging to STDERR via org.mortbay.log.StdErrLog
2008-12-20 18:24:08.307::WARN:  Config error at <New id="dev" class="org.mortbay.jetty.plus.naming.Resource"><Arg>jdbc/mysql</Arg><Arg>
<New class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource"><Set name="User">root</Set><Set name="URL">jdbc:mysql://192.168.1.105/app</Set><Set name="Password">sqlpass</Set></New>
</Arg></New>
2008-12-20 18:24:08.307::WARN:  EXCEPTION 
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.mortbay.xml.XmlConfiguration.newObj(XmlConfiguration.java:608)
    at org.mortbay.xml.XmlConfiguration.configure(XmlConfiguration.java:256)
    at org.mortbay.xml.XmlConfiguration.configure(XmlConfiguration.java:214)
    at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:974)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.mortbay.start.Main.invokeMain(Main.java:218)
    at org.mortbay.start.Main.start(Main.java:564)
    at org.mortbay.start.Main.main(Main.java:136)
Caused by: javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)
    at javax.naming.InitialContext.getNameParser(InitialContext.java:480)
    at org.mortbay.jetty.plus.naming.NamingEntry.save(NamingEntry.java:182)
    at org.mortbay.jetty.plus.naming.NamingEntry.<init>(NamingEntry.java:58)
    at org.mortbay.jetty.plus.naming.NamingEntry.<init>(NamingEntry.java:76)
    at org.mortbay.jetty.plus.naming.Resource.<init>(Resource.java:44)
    ... 15 more
2008-12-20 18:24:08.308::WARN:  Nested in java.lang.reflect.InvocationTargetException:
javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)
    at javax.naming.InitialContext.getNameParser(InitialContext.java:480)
    at org.mortbay.jetty.plus.naming.NamingEntry.save(NamingEntry.java:182)
    at org.mortbay.jetty.plus.naming.NamingEntry.<init>(NamingEntry.java:58)
    at org.mortbay.jetty.plus.naming.NamingEntry.<init>(NamingEntry.java:76)
    at org.mortbay.jetty.plus.naming.Resource.<init>(Resource.java:44)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.mortbay.xml.XmlConfiguration.newObj(XmlConfiguration.java:608)
    at org.mortbay.xml.XmlConfiguration.configure(XmlConfiguration.java:256)
    at org.mortbay.xml.XmlConfiguration.configure(XmlConfiguration.java:214)
    at org.mortbay.xml.XmlConfiguration.main(XmlConfiguration.java:974)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.mortbay.start.Main.invokeMain(Main.java:218)
    at org.mortbay.start.Main.start(Main.java:564)
    at org.mortbay.start.Main.main(Main.java:136)
[root@localhost test]# 
```

这是我的 Jetty.xml

```
<?xml version="1.0"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" 
"http://jetty.mortbay.org/configure.dtd">

<Configure id="Server" class="org.mortbay.jetty.Server">
<Call name="addConnector">
    <Arg>
        <New class="org.mortbay.jetty.nio.SelectChannelConnector">
            <!-- the ip address or domain to bind -->
            <Set name="host"><SystemProperty name="jetty.host" /></Set>

            <!-- the port to use/bind, defaults to 8080 if property not set -->
            <Set name="port"><SystemProperty name="jetty.port" default="8090"/></Set>

            <!-- the time in milliseconds when a connection is considered idle -->
            <Set name="maxIdleTime">300000</Set>

            <!-- the number of acceptors (their job is to accept the connection and dispatch to thread pool) -->
            <Set name="Acceptors">2</Set>

            <!-- should the connection statistics be turned on? (Not advisable in production) -->
            <Set name="statsOn">false</Set>

            <!-- the confidential port -->
            <Set name="confidentialPort">8443</Set>

            <!-- indicates the minimum number of connections when the server is considered low on resources -->
            <Set name="lowResourcesConnections">20000</Set>

            <!-- when low on resources, this indicates the maximum time (milliseconds) a connection must be idle to not be closed -->
            <Set name="lowResourcesMaxIdleTime">5000</Set>
        </New>
    </Arg>
</Call>

<Set name="handler">
  <New id="Handlers" class="org.mortbay.jetty.handler.HandlerCollection">
    <Set name="handlers">
     <Array type="org.mortbay.jetty.Handler">
       <Item>
         <New id="Contexts" class="org.mortbay.jetty.handler.ContextHandlerCollection"/>
       </Item>
       <Item>
         <New id="DefaultHandler" class="org.mortbay.jetty.handler.DefaultHandler"/>
       </Item>
       <Item>
         <New id="RequestLog" class="org.mortbay.jetty.handler.RequestLogHandler"/>
       </Item>
     </Array>
    </Set>
  </New>
</Set>

<Array id="plusConfig" type="java.lang.String">
  <Item>org.mortbay.jetty.webapp.WebInfConfiguration</Item>
  <Item>org.mortbay.jetty.plus.webapp.EnvConfiguration</Item>
  <Item>org.mortbay.jetty.plus.webapp.Configuration</Item>
  <Item>org.mortbay.jetty.webapp.JettyWebXmlConfiguration</Item>
  <Item>org.mortbay.jetty.webapp.TagLibConfiguration</Item>
</Array>

<New id="dev" class="org.mortbay.jetty.plus.naming.Resource">
  <Arg>jdbc/mysql</Arg>
  <Arg>
    <New class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource">

      <Set name="User">root</Set>
      <Set name="URL">jdbc:mysql://192.168.1.105/app</Set>
      <Set name="Password">sqlpass</Set>
    </New>
  </Arg>
</New>

<Call name="addLifeCycle">
  <Arg>
    <New class="org.mortbay.jetty.deployer.WebAppDeployer">
 <Set name="ConfigurationClasses"><Ref id="plusConfig"/></Set>

      <Set name="contexts"><Ref id="Contexts"/></Set>
      <Set name="configurationDir"><SystemProperty name="jetty.home" default="/root/test"/>/contexts</Set>

      <Set name="scanInterval">5</Set>
    </New>
  </Arg>
</Call>

<Ref id="RequestLog">
  <Set name="requestLog">
    <New id="RequestLogImpl" class="org.mortbay.jetty.NCSARequestLog">
      <Set name="filename"><SystemProperty name="jetty.logs" default="./logs"/>/yyyy_mm_dd.request.log</Set>
      <Set name="filenameDateFormat">yyyy_MM_dd</Set>
      <Set name="retainDays">90</Set>
      <Set name="append">true</Set>
      <Set name="extended">true</Set>
      <Set name="logCookies">false</Set>
      <Set name="LogTimeZone">GMT</Set>
    </New>
  </Set>
</Ref>

</Configure> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-12T20:24:12.140

[确保](http://markmail.org/message/yr67nl6dohol4glz)jetty-plus.jar 文件位于您的类路径中，并且配置文件`etc/jetty-plus.xml`包含在命令行中：

```
java -DOPTIONS=plus,ext.default -classpath %CLASSPATH% -jar /usr/src/jetty7/start.jar /path/to/etc/jetty-plus.xml myjetty.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-12T11:37:57.540

应在 start.ini 中设置 OPTIONS：

```
OPTIONS=Server,jsp,jmx,resources,websocket,ext,plus 
```

然后 InitialContext 可用。

# oop - 教授系统分析和设计——需要多少编程经验？

> ID：382797
> 
> 赞同：1
> 
> 时间：2008-12-20T02:34:04.237
> 
> 标签：oop, design-patterns, uml

我教了一学期的大学系统分析和设计课程。主题包括设计模式、UML、OOP、软件开发生命周期，以及各种方法（如敏捷/SCRUM/BDUF/瀑布）的历史、优缺点。

进入这门课程的学生应该对编程有*一定*的了解，但实际上我已经看到了从精通一两种现代语言的人到勉强通过 FizzBu​​zz 测试的人。

我的问题是双重的：你认为学生在接触这些主题之前需要多少编程经验（或者你认为他们应该在学习编码之前学习它们），第二，你认为什么是公平和适当的方式在课程开始时预测试他们，知道他们的背景没有一致的语言或平台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T02:46:06.820

我认为当学生能够将所学的材料付诸实践时，他们学得最好。为此，我认为最好的课程将包括一些涉及编码的项目（或小型项目）。通常，我希望向高年级本科生和研究生教授这一点。到这个时候，学生应该已经上过一些编程课、一些离散数学和基本的数据结构课程。虽然不是技术上的先决条件（编程课除外），但如果您可能需要这些其他人，那么您就有更好的机会获得具有适当背景的学生。

至于预测试，我建议在课程早期进行一些简单的编程项目来说明设计模式/OOP。也许，对于这些项目，我会比你在课堂早期尝试分配的要求更严格。预先说明课程需要编程技能并以这种方式评分。通过您的评分，让人们知道要求很严格。

这听起来可能很苛刻，但我已经看到太多学生依靠他们的项目合作伙伴完成课程，因为他们无法跟上所需的编码。我认为他们并没有真正从课程中学到很多，因为他们没有机会通过经验将知识内化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-20T03:58:28.063

**你不能教学生解决他们从未遇到过的问题。** 如果你想让学生能够用这些材料**做点什么**，他们必须有**丰富的编程经验**，这样他们才能对**所有这些想法要解决的问题**有一定的了解。

问问自己**为什么**要教这些材料，**以及你希望你的学生**在学期结束时如何改变。如果你想要的只是让他们能够在白板上解释概念，那么编程经验的数量就不那么重要了。但真正的目标取决于你：你**越仔细地为班级表达你的目标，你就越有可能实现它们。** 你希望完成什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T03:23:07.650

我一直处于同样的位置，我相信学生**应该**有丰富的编程经验，以及一些复杂的数学知识。至少是一*门*好的、严肃的编程课程、一门数据结构课程，也许还有一门计算机组织或系统编程课程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T04:03:18.020

我没有接受过正规的计算机科学教育，所以我不能从这个角度说话，但我确实觉得**需要大量的编程经验才能理解诸如设计模式之类的概念**。

在经历了从爱好编程阶段到认真对待编程的过程中，我通过经验发现适当的设计可以使代码具有高度可维护性。我经历了从`GOTO`BASIC 中 s 的意大利面条代码到利用设计模式和 MVC 方法的过程，并开始认真欣赏基于良好设计的编码。

如果没有适当的经验水平，学生只会将课程视为*“哦，所以有设计模式之类的东西，这很好”*，但它不会真正打动人心。

我也是 tvanfosson 的第二篇文章，我[认为](https://stackoverflow.com/questions/382797/teaching-systems-analysis-and-design-how-much-programming-experience-is-needed#382810)将项目作为课程不可或缺的一部分将真正展示如何利用面向对象的编程和设计模式来编写设计良好、维护良好、可重用的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T05:28:53.403

我想说这取决于您的课程目标/目的、目标受众和结果。

从表面上看，你不需要任何编程背景就可以从这样的课程中学到很多东西。毕竟，这些方法和技术实际上是关于通信的，而不是专门针对编程的。事实上，如果做得好，设计可以消除大量不必要的编程——即使使用敏捷方法（这就是为什么他们被告知首先和经常与客户沟通）。

此外，如果有针对性，这门课程可以是许多其他课程、学院和认证的交叉课程；例如各种商业学位、管理课程等。如果有人在“管理”中学习过这样的课程并真正了解正确的客户沟通的必要性，而不是仅仅关注营销想要什么，那不是很好吗？一周加上通常的截止日期太短？

因此，我鼓励您将“程序员”作为此类课程的目标受众进行思考。首先将其视为一门沟通课程，然后从那里开始。

最良好的祝愿。

干杯，

-理查德

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-20T03:01:33.137

大约 2 年前我还是学生的时候。在最后的课程中可以更好地理解这类主题。为了掌握所有这些主题，我认为学生必须至少有 3 门编程课程（结构编程、OOP 1、OOP 2），软件工程课程也会很棒，还有一些 DB 背景。尝试鼓励学生从头开始一个项目（需求收集 - 发布）没有什么比实践-实践-实践更好的了

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-20T05:16:13.613

Coobird 和 Tvan 关于需要大量编程时间的观点是绝对正确的。我将补充一点，在学习环境中，获得即时反馈（除了让代码运行）和处理各种情况非常重要。

没有什么比吃自己的狗粮和被迫收拾自己的烂摊子更能说明问题的了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-24T06:25:58.357

我认为可能有一个基本的计算机编程课程可以在介绍现代编程的各种基本思想的课程之前提供，例如什么是 IDE，什么是算法，什么是测量复杂性的基本方法等。是给学生的 2 个选择：使用课程建议的语言，或者从这个列表中选择你自己的，TA 和其他人会足够了解以确定解决方案是否可以接受。要考虑的一个问题是各种异国语言，如 Logo、Lisp、Modula-3 或 Fortran 是否可以。理解如何使用各种工具的想法将比使用可能在学术界之外无法使用的特定编程语言更重要。

在某些方面，此类课程的期末考试将作为确定一个人是否能够跳过此类课程的一种方式。主要思想是确定特定领域内的一些基础知识，这与小学中以 10 为基数的阿拉伯数字系统具有加、减、乘、除和放置值（如十、百等）操作不同。是数学的基础知识，而不是学习任何这些作为对数学的介绍，这些都是可能的起点：

1.  三角函数使用十六进制数基定义函数，例如正弦、正割、正切以及每个函数的余数和所有这些函数的倒数以及这些函数的图形。

2.  图论包括路径、广度优先搜索、深度优先搜索和最小权重生成树。

3.  复数系统或一些更高维空间（如 N x N 实数矩阵）上的导数、积分和偏微分方程。

4.  概率和统计理论，包括算术和几何平均值、中位数、众数，以及最小二乘和线性回归的概念，以及足够的代数，所以这一切都是有意义的。

5.  有限数学，例如排列、组合、枚举和渐近线。

6.  模块化算术和浮点数系统。

7.  各种形状的几何检查角度和平行边的类型作为对各种形状进行分类的方法。这里还有各种形状的周长、面积、表面积和体积的公式。

8.  具有极限和无限概念的序列和系列，以及用于总和的大写 sigma 和用于乘积的 pi 的特殊东西。

9.  布尔代数涉及各种逻辑门，例如真值表形式的 AND、OR、XOR 和 NOT。

10.  仅使用矩阵和线性变换的线性代数。

11.  类似于棋盘游戏线索的逻辑问题。

12.  纯数学涉及各种定理的证明，并使用充满缩写的语法，包括以下内容：<=> 好像且仅当 => 暗示，向后 E 表示存在，向后 E 后跟感叹号表示存在并且是唯一的，颠倒 A 作为“For all”或“For each”限定词，一个排列中的三个点代表“因此”，另一个代表“Since”，以及与充分条件相比的必要条件的想法以及归纳证明。

13.  代数概念，如群、环和场。这里还有逆运算、结合运算和交换运算的概念。

想象一下，如果一个教室有 30 名学生，其中 10 人接受过北美基础教育，另外 20 人每人学习上述 12 个数学部分中的一个，但不一定学习其他部分。像“图”这样的术语是否可能是多个分支使用具有非常不同含义的术语的情况，例如 (x,y) 平面中的函数图与作为图或网络中的一组顶点和边的图如何构建各种 3-D 形状的 2-D 表示？我相信那将是类似的情况。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-12-22T00:23:29.277

我已经做了很长时间的程序员，我希望我一开始就学会了正确的系统分析。

正确分析系统和设计解决方案是创建正确解决方案的基本步骤。系统分析方法为您提供了构建的基础。这是蓝图。如果没有适当的计划，您如何构建应用程序？可以做到，但通常是一团糟。如果我有编程课程，这就是我会教的：

1.系统分析与设计。
2.项目规划（PMI研究所）使用MS Project。获得这些技能后，您可以以专业的方式从事任何编程工作。
3.创建设计的编程解决方案（VB.NET、C#、C++、ASP.NET JAVA等）。

如果你想成为一名专业的程序员，那么这些就是你需要的基本技能。不幸的是，我没有在我工作过的地方看到这些项目被强制执行。一个好的计划总是有帮助的。

# perl - mod_perl 与 mod_fastcgi

> ID：382798
> 
> 赞同：15
> 
> 时间：2008-12-20T02:34:46.763
> 
> 标签：perl, apache, mod-perl, mod-fastcgi

我正在使用 Perl 开发一个 Web 应用程序，其中包含一些 C 语言，这是一些繁重的数字运算所必需的。到目前为止，我遇到的主要问题是试图决定是否应该使用 mod-perl、mod-fastcgi 或同时使用两者来运行我的脚本，因为我很难分析每个 mod 的优缺点。

任何人都可以发布摘要或提供链接，我可以在其中找到一些比较信息，也许还有一些带有示例的建议？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-20T02:51:36.823

他们是完全不同的野兽。

mod_fastcgi（顺便说一下，推荐使用[mod_fcgid](http://fastcgi.coremail.cn/)）只支持 FCGI 协议以更快地执行 CGI，并通过一些旋钮控制它将同时运行的进程数，而不是更多。

另一方面，mod_perl 是一个用于开发应用程序的平台，它向您展示了大多数 Apache 内部结构，因此您可以从代码中调整每个 Web 服务器旋钮，加速 CGI[等等](http://perl.apache.org/start/index.html)。

如果您只想快速运行 CGI，并希望支持尽可能多的主机，那么您应该坚持支持这两种运行代码的方式，并且可能还支持标准 CGI。

如果您关心以灵活性为代价的最大效率，您*可以*瞄准单一平台，可能是 mod_perl。

但可能最明智的选择是在任何地方运行并使用框架来构建应用程序，该应用程序将利用特定执行方式的优势（如果存在），如[Catalyst](http://catalystframework.org/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-20T02:39:12.793

我建议您使用像[Catalyst](http://catalyst.perl.org/)这样的框架来处理这些细节。对于大多数应用程序，程序如何连接到网络服务器并不重要，只要它以一种有效的方式完成即可。mod_perl 和 FastCGI 之间的选择应该由部署它的系统管理员做出，而不是开发人员。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-20T01:28:00.013

这是一个站点，其中包含 mod_perl、mod_fastcgi、cgi (Perl) 和 Java servlet 的一些实际性能比较 - 对于一个非常基本的脚本：[https ://sites.google.com/site/arjunwebworld/Home/programming/apache-jmeter](https://sites.google.com/site/arjunwebworld/Home/programming/apache-jmeter)

总之：

```
cgi - 1200+ requests per minute
mod_perl - 6000+ requests per minute (ModPerl::PerlRun only)
fast_cgi - 6000+ requests per minute
mod_perl - 6000+ requests per minute (ModPerl::Registry)
servlets - 2438 requests per minute. 
```

PerlMonks 上有一个比较 mod_perl 和 fastcgi 的旧线程：[http ://www.perlmonks.org/?node_id=108008](http://www.perlmonks.org/?node_id=108008)

# .net - ADO.NET 实体：限制基于视图的数据选择

> ID：382800
> 
> 赞同：1
> 
> 时间：2008-12-20T02:35:57.260
> 
> 标签：.net, ado.net-entity-data-model

考虑以下示例：

SQL 表客户：

```
ID: Primary Key
Name: Name 
```

SQL 视图 ViewCustomerSelection：

```
ID: Link to Customer ID
SomeOption: Not important 
```

我想创建 ADO.NET 一个仅选择在 ViewCustomerSelection 中具有相应值的客户的实体

以下不起作用：

*   创建映射到 Customer 和 ViewCustomerSelection 的实体，而不使用 ViewCustomerSelection 中的任何条件和任何字段： ViewCustomerSelection 不包含在 SQL 中，并且返回所有客户。
*   包括来自 ViewCustomerSelection 的字段：返回正确的选择，但现在 Customer 对象不可更新
*   在 SomeOption 字段上指定“非空”条件：错误 - 必须映射具有 'IsNull=false' 条件的属性 ViewCustomerSelection.SomeOption。
*   在 ViewCustomerSelection.ID 字段上指定“非空”条件：错误 - “实体类型在其主键上包含一个条件。请从映射中删除该条件。

澄清

数据库定义：

```
create table Customer {
    ID [int] IDENTITY(1,1) NOT NULL,
    Name [varchar](50) NOT NULL
} CONSTRAINT [PK_Customer] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)

create table ViewCustomerSelection
as select customer.id, ToUpper(customer.name) as SomeOption where customer.name like 'A%' 
```

我想要具有 ID 和名称的实体 Customer，它只有 ViewCustomerSelection 中存在的记录的记录（注意 - 实际上视图更复杂，不能使用简单的条件来表达）

# emacs - “\C-” 的 Emacs 键绑定

> ID：382811
> 
> 赞同：6
> 
> 时间：2008-12-20T02:47:29.080
> 
> 标签：emacs

如何将函数设置为 \C-' ？当我尝试这样做时：

```
(global-set-key "\C-'" 'myfunct) 
```

它给了我“字符串中的无效修饰符”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-20T02:52:32.627

是什么`\C-'`？当您键入反斜杠+c+引号时，您希望发生什么事情吗？还是您的意思是`C-'`（控制+引号）？如果是后者（我猜是），那么你应该使用

```
(global-set-key (kbd "C-'") 'myfunct) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-09-10T17:02:43.130

对于您要使用的任何键序列，按 Ch k，然后按您要使用的键序列。然后它会告诉您密钥的名称。应该使用该名称（使用已接受答案中的代码）。

# c++ - 析构函数 C++：类型 '***' 参数赋予'delete'，预期指针

> ID：382822
> 
> 赞同：14
> 
> 时间：2008-12-20T02:58:22.630
> 
> 标签：c++, destructor

我声明了一个私有变量

```
vector<SomeClass> theVector; 
```

我的 SomeClass 课程中的某个地方。

为什么我不能说：`delete theVector`在我的 SomeClass 析构函数中？

编译器错误说：

```
 type `class Vector<SomeClass>' argument given to `delete', expected pointer 
```

什么预期的指针？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-20T03:01:23.263

如果新建和删除齐头并进。

要删除某些内容，您需要通过 new 创建它（它会为您提供一个指针）。然后，您可以删除指针。您声明它在堆栈（而不是堆）上创建的向量的方式，当它超出范围时将被释放。

```
int main()
{
    vector<SomeClass> theVector;

    vector<SomeClass>* ptrVctor = new vector<SomeClass>();

    delete ptrVctor;   // ptrVctor must be deleted manually
    // theVector destroyed automatically here
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-20T03:40:04.340

在 C++ 中（与 Java 不同），您可以在堆栈或堆上创建对象。正如您所做的那样，在堆栈上创建它的一个示例是：

```
vector<SomeClass> theVector; 
```

当堆栈帧消失时（通常当您从创建该对象的函数返回时，该对象将超出范围。

在堆上创建对象可以让它们比创建它们的函数更长寿，你可以通过执行以下操作来做到这一点：

```
vector<SomeClass> *theVectorPtr = new vector<SomeClass>(); 
```

然后，您可以将`theVectorPtr`指针传递回函数的调用者（或将其全局存储，无论您想要什么）。

为了摆脱堆上的对象，你明确地删除它：

```
delete theVectorPtr; 
```

在您的代码中的某处。

删除堆上的对象会结束该对象的范围，就像从函数返回结束在堆栈上创建的变量的范围一样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-20T03:01:11.733

如果一个对象（而不是一个值）被定义为一个类成员变量，那么它的存储总是与该类的对象实例相关联。

因此，如果包含对象是在堆栈上分配的，那么当堆栈展开时，该对象和字段将消失。

如果包含对象是在堆上分配的，那么当整个包含对象因删除而死亡时，字段对象将死亡。

如果它是一个指针，您只会将删除应用于一个字段，因为与包含对象一起存储的所有内容都是某个其他内存区域的地址，并且您正在删除该区域中的材料。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T03:00:51.813

这是因为 theVector 不是指针，所以`delete' expects. "Expected pointer" means the operand of`delete' 必须是指针。

将此与

```
int theInt;
delete theInt; 
```

它肯定会产生类似于你得到的错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-20T03:02:16.943

TheVector 的内存是为 SomeClass 对象分配的内存的一部分，因此您不能在不删除整个 SomeClass 对象的情况下删除它。TheVector 的内存将在 SomeClass 对象被破坏时自动释放。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-12T02:10:23.850

要销毁向量中保存的所有对象，您将执行以下操作：

```
theVector.resize(0); 
```

当向量超出范围时，这将自动发生。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-20T06:08:33.400

c++ 让您可以灵活地在堆栈和堆中创建对象。当通过 new 运算符在堆中创建对象时，如下所示，它返回指向堆中对象的指针。

```
ClassA * pobj_class = new ClassA(); 
```

对于在堆栈中创建的对象，构造函数返回对象而不是指针，如下所示。

```
ClassA obj_class(); 
```

当变量（obj_class）超出范围时，堆栈对象会自动销毁，但在堆上创建的对象会永远存在。因此，要销毁堆对象，c++ 为您提供了删除运算符，该运算符将指针作为参数并销毁指针指向的对象。

# java - JAVA中的super()函数

> ID：382854
> 
> 赞同：7
> 
> 时间：2008-12-20T03:36:06.720
> 
> 标签：java, super

按钮类：

```
class SubmitButton extends JButton implements ActionListener {
    public SubmitButton(String title){
        super(title);
        .... 
```

我在哪里声明：

```
SubmitButton submit = new SubmitButton("Submit");
submit.setBounds(530+150, 200, 100, 25); 
```

**super(title) 如何将String title 设置为按钮的标题？它与常规 JButton 的方法 .setText() 有何相同之处？**

换句话说，调用 super() 如何与 .setText() 做同样的事情 super() 如何知道更改标题？.setText() 是 JButton 类中唯一将字符串作为参数的方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-12-20T03:49:38.843

*   SubmitButton 扩展 JButton
*   JButton 有一个构造函数，可能看起来像这样（简化）：

    ```
    public JButton(String title) {
        setText(title);
    } 
    ```

*   SubmitBUtton 有一个构造函数：

    ```
    public SubmitButton(String title) {
        super(title);
    } 
    ```

SubmitButton 构造函数调用超类 (JButton) 构造函数，而后者又调用 setText。现在在内部，JButton 的工作方式可能不同，但效果是一样的。

**总体要点是 super(...) 调用超类构造函数。**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-12-20T03:46:52.673

JButton 是一个支持多个构造函数的中央 Java Swing 类。这些构造函数之一允许您设置按钮标签的文本。

添加 super(title) 实际上并没有进行调用 - 无论如何都会调用父级的构造函数，但它有助于选择调用哪个构造函数。

setText() 操作允许您在按钮创建之后但（通常）在显示之前更改文本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-20T03:49:25.710

当使用构造函数 SubmitButton(String title) 初始化 SubmitButton 时，您可以使用标题调用父/超类构造函数。如果你没有指定 super(title)，那么 Java 编译器会自动插入代码来调用超类的默认构造函数。然后在创建 SubmitButton 时不会设置标题。

此外，超类 (JButton) 可能在其构造函数中使用 .setText(string)，这就是它执行相同功能的原因（需要查看实际的 Java 源代码）。

[http://www.javaworld.com/jw-10-2000/jw-1013-constructors.html?page=2](http://www.javaworld.com/jw-10-2000/jw-1013-constructors.html?page=2)
[http://leepoint.net/notes-java/oop/constructors/constructor.html](http://leepoint.net/notes-java/oop/constructors/constructor.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T03:52:53.657

在 java 中的所有情况下，“调用”都会`super()`调用父类的 ctor。像所有函数一样，当您调用 ctor 时，Java 模式匹配名称和参数类型。 `JButton`声明一个带有字符串参数的 ctor，因此当您调用时`super(title)`，效果是您正在调用采用单个字符串参数的直接超类 (JButton) 的构造函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T03:45:01.317

[http://java.sun.com/javase/6/docs/api/javax/swing/JButton.html#JButton(java.lang.String)](http://java.sun.com/javase/6/docs/api/javax/swing/JButton.html#JButton(java.lang.String))

（复制粘贴整个 URL；由于某种原因，字符串部分未链接）

它正在调用上面链接的 JButton 类中定义的构造函数，它将按钮的文本设置为传入的字符串。 super() 是对超类构造函数的调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-14T15:04:18.510

我个人通过设置标题而不是文本来解决这个问题。

static String TitleName = "一些标题"; 超级（标题名称）；

然后在你的按钮或任何应该发生动作的地方。

setTitle("新标题");

这对我有用。:-)

# java - 通过 Windows 拖放启动 java 类

> ID：382878
> 
> 赞同：5
> 
> 时间：2008-12-20T03:55:05.370
> 
> 标签：java, windows, drag-and-drop

我有一个带有 main 方法的 java 类文件。在 Windows 中，我希望能够将文件拖到桌面图标/短/等上，这将调用将文件名提供给我的主要方法。基本上，我希望允许用户在程序执行时拖放文件，而不是在命令行上键入它们。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T04:29:36.127

To build on daub815's answer, in Windows, you can use a batch file to pass arguments to another command. In this case, we'll use the `java` launcher to launch your class with the `main` method.

I did a quick Google search on how to do write a batch file to take multiple arguments, and [found a page with a batch file to pass arguments](http://www.robvanderwoude.com/parameters.html) to another command. Adapting from the example, here is what you can do:

```
@ECHO OFF
:Loop
IF "%1" == "" GOTO Done
java YourClass %1
SHIFT
GOTO Loop
:Done 
```

Save the above file as a batch file (with a ".bat" extension), and then you can drag-and-drop files onto it, and it will be passed as arguments.

Also, you can call the batch file from the command line and pass arguments as well.

**Edit**: It appears that the batch file will not work with quoted arguments which contain spaces. Using a workaround presented in the site I've linked to will split the spaces contained in the quoted full path of the file into separate arguments, so that won't work either. If anyone has a good idea how to fix this, please either edit this entry, or post another answer. I will make this a community wiki.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T10:11:51.527

如果您将类打包在一个可执行的 JAR 文件中（这就是您应该这样做的方式）并制作一个如下所示的 .reg 文件，那么 PhiLho 的答案非常有效。然后只需双击该 .reg 文件将其合并到注册表中即可。这使您既可以双击一个 JAR 文件来运行它，也可以通过拖放来启动它。

请记住更改安装 Java 可执行文件的路径。

```
Windows Registry Editor Version 5.00 

[HKEY_CLASSES_ROOT\.jar] 
@="jarfile" 

[HKEY_CLASSES_ROOT\jarfile\DefaultIcon] 
@="C:\\Java\\jdk1.7.0\\bin\\java.exe,1" 

[HKEY_CLASSES_ROOT\jarfile\shell\open] 
@="Run Java Program" 

[HKEY_CLASSES_ROOT\jarfile\shell\open\command] 
@="\"C:\\Java\\jdk1.7.0\\bin\\java.exe\" -jar \"%1\" %*" 

[HKEY_CLASSES_ROOT\jarfile\shellex\DropHandler] 
@="{86C86720-42A0-1069-A2E8-08002B30309D}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-20T18:36:18.663

好的，我成功了……基础知识是在注册表中使用 DropHandler UUID。我做了一个基础设置，如下：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.class]
@="JavaClass"

[HKEY_CLASSES_ROOT\JavaClass\DefaultIcon]
@="C:\\Java\\jdk1.6.0_05\\bin\\java.exe,1"

[HKEY_CLASSES_ROOT\JavaClass\shell\open]
@="Run Java class"

[HKEY_CLASSES_ROOT\JavaClass\shell\open\command]
@="\"C:\\Java\\jdk1.6.0_05\\bin\\java.exe\" \"%1\" %*"

[HKEY_CLASSES_ROOT\JavaClass\shellex\DropHandler]
@="{86C86720-42A0-1069-A2E8-08002B30309D}" 
```

并且......它没有工作！
我只是忘记了 java.exe 想要一个类名，而不是文件名！但我认为在注册表中没有办法做到这一点。

幸运的是，有一种解决方法，如果我们想要通用的话，仍然需要一个脚本文件来处理任何/所有类文件（当然，使用静态 main 函数！）。不是批次，我尽可能避免它们。我选择使用 WSH，因为它应该可以在任何现代 Windows 系统上使用。我也选择了做一个 JS 脚本，它也可以是一个 VB 脚本。

所以我制作了以下脚本（LaunchJavaClass.js）：

```
if (WScript.Arguments.count() == 0)
{
  WScript.StdOut.Write("No parameters");
  WScript.Quit(1);
}
var className = WScript.Arguments.Item(0);
//~ WScript.StdOut.Write(className + "\n");
var m = className.match(/^(.*)\\(.+?)\.class$/);
if (m == null)
{
  WScript.StdOut.Write("Not a class file");
  WScript.Quit(1);
}
var classPath = m[1];
className = m[2];
//~ WScript.StdOut.Write(classPath + " >>> " + className + "\n");
var params = new Array();
for (i = 1; i < WScript.Arguments.count(); i++)
{
  params[params.length] = WScript.Arguments.Item(i);
}
var cmd = "cmd /c cd /D " + classPath + 
    " & C:/Java/jdk1.6.0_05/bin/java.exe " + 
    className + " " + params.join(" ");
//~ WScript.StdOut.Write(cmd + "\n");
var shell = WScript.CreateObject("WScript.Shell");
//~ var exec = shell.Exec(cmd); // Can be used to get stdout
shell.Run(cmd, 0); 
```

我留下了一些输出，在这种情况下没有用，但可用于调试（使用 cscript 运行）。
当然，必须调整 JRE 的路径。

我更改了`command`注册表中的内容，如下所示：

```
[HKEY_CLASSES_ROOT\JavaClass\shell\open\command]
@="\wscript -b "D:\\_PhiLhoSoft\\WSH\\LaunchJavaClass.js\" %1 %*" 
```

当然，调整路径，并保留上面的其他行。

现在，如果我将一些文件拖放到 .class 文件中，它会获取短文件路径作为 main() 函数的参数。

```
import java.io.*;

class TestDnD
{
 public static void main(String[] args)
 {
  Writer output = null;
  try
  {
   output = new BufferedWriter(new FileWriter(new File("LogFile.txt")));
   for (String arg : args)
   {
    output.write(arg + "\n");
   }
  }
  catch (IOException ioe)
  {
   ioe.printStackTrace();
   return;
  }
  finally
  {
    try { output.close(); } catch (IOException e) {}
  }
 }
} 
```

我认为 .reg 文件的第一个版本可以用于其他用途，例如。在 .jar 文件上拖放（当然要适应它）。

这种技术用途有限：我们很少用 Java 编写一类程序！但这看起来是一个很好且有趣的挑战，所以我没有抗拒去解决它。`-Djava.ext.dirs="some path;another path"`注意：如果您需要使用外部库（在 jar 文件中），您可以添加一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-20T04:22:01.760

Adding onto Adiel A. If you create a batch file, which launches your a Java window using Swing. You would have the user drop the files onto that window. You could then be able to root through those dropped files.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-20T04:34:30.750

So there's no way to have windows itself pass the args into main() via drag and drop?

# .net - 我如何让持怀疑态度的同事相信 .Net 中的正确命名空间？

> ID：382880
> 
> 赞同：5
> 
> 时间：2008-12-20T03:57:28.157
> 
> 标签：.net, namespaces

我的团队正在开展一个转换项目，将一种产品（但有很多方面）从 VB6 转换为 .Net（我们有超过 300k LOC）。在我加入之前，我决定不管程序集的位置或文件夹结构如何，所有类/结构都将位于一个命名空间中：

.

他们甚至会更改自动生成的应用程序设置设计器代码、资源设计器代码等以强制统一。我如何说服他们使用命名空间是好的？命名空间的正确使用是什么，优缺点是什么？我想我很难理解为什么我的同事会经历如此多的麻烦来节省一些使用线。任何支持您的论点的外部、有信誉的参考将不胜感激。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-20T13:42:18.367

# 好的答案，已经

我读了很多很好的答案（例如，驱动器文件夹的图像很好，对象/概念分离/组织也是如此）。

尽管如此，其他一些不那么“技术性”的论点可能会有所帮助，不是解释为什么命名空间比替代方案更好，而是找出不使用命名空间的坏原因。

# [权威论证](http://en.wikipedia.org/wiki/Appeal_to_authority)

每个 C#、VB.NET、Java、C++，无论在这个星球上什么值得一试的开发人员都承认命名空间/包是一件好事。嘿，[他们甚至在 Mozilla 的 JavaScript 中考虑它](https://www.mozilla.org/fr/js/simple-packages.html)。

我猜你关于 Stack Overflow 的问题有“权威论据”的感觉...... ^_^

# 旧习难改

我相信你正在陷入“旧习惯”的情况。

虽然我没有关于 VB.NET 与 VB6 旧习惯的直接经验，但我对 C++ 反对精简的 C 类 C++ 有经验。

## *一半的工作...*

在处理遗留习惯时，一半的工作是发现他们已经使用命名空间，而没有承认这一点。

例如（这对于 C++ 开发人员与“旧时尚”、类似 C 代码的冲突最为正确，但我猜它在任何地方都是可行的），他们是否使用前缀作为符号。

他们有没有：

*   *帐户*用户
*   *账户*价格
*   *帐户*编号
*   *登录*用户
*   *登录*密码

类/符号，并解释帐户的“用户”与登录的“用户”不同，因此，区分它们的前缀？

当“模式”按模块为其符号添加前缀时，“模式”会直接穿过天花板（如果代码足够大，这肯定是您的代码的情况）：

您有 MyUtil DLL、MyKernel DLL 和 MyGui DLL 吗？因此，您是否有：

*   *MyUtil_*东西
*   *MyUtil_SomethingElse* _
*   *MyKernel_* YetAnotherObject
*   *MyKernel_AnotherThing* _
*   *MyGui_SomeGui* _

类/符号？

**如果是，那么他们应该承认他们已经在使用命名空间。**

如果不是，那么您的代码库太小（但您的“9 个项目”告诉我不是），或者它们经常是名称冲突的问题......这可以通过上面解释的前缀解决，或者更好的是，通过命名空间。

## *另一半...*

另一半的工作是让他们解释为什么他们的“命名空间”比语言中内置的更好（*这是你应该避免因为致命的暴露脑死亡推理而沮丧地撞到墙上的那一刻*） .

同样，您可以使用按权威论证的事情（*什么？您确实相信比微软的壮志凌云工程师更了解？*），但在这种情况下，您应该举例说明为什么 .NET（或其他）命名空间比他们使用（或不使用）的那个。

对于 VB.NET/.NET，已经有足够多的好论据了，我不会继续讨论 C++ 命名空间背后的论据，因为它会超出主题。

但至少，使用内置命名空间使上述前缀成为可选的。引用互联网上的一个例子（我对 VB.NET 不是很了解）：

```
Imports MyWholeProject

Class HelloWorld

   Public Sub Main()
      Dim o As MyModuleAAA_MyObject = New MyModuleAAA_MyObject
      Dim t As MyModuleBBB_MyThing = New MyModuleBBB_MyThing
      Dim g As MyModuleCCC_MyGizmo = New MyModuleCCC_MyGizmo
      REM etc.
   End Sub

End Class 
```

比启用的命名空间更详细：

```
Imports MyWholeProject.MyModuleAAA
Imports MyWholeProject.MyModuleBBB
Imports MyWholeProject.MyModuleCCC

Class HelloWorld

   Public Sub Main()
      Dim o As MyObject = New MyObject
      Dim t As MyThing = New MyThing
      Dim g As MyGizmo = New MyGizmo
      REM etc.
   End Sub

End Class 
```

冗长会导致更晦涩的代码，从而导致错误。当然，您可以将 MyModuleAAA 替换为较短的内容，例如 MMAAA ......但是，它会导致代码更加晦涩，等等。

谷歌搜索可以找到 .NET 上命名空间的更多用途，例如：[http ://www.vbdotnetheaven.com/UploadFile/ggaganesh/NamespacesInVbDotNet04202005005133AM/NamespacesInVbDotNet.aspx](http://www.vbdotnetheaven.com/UploadFile/ggaganesh/NamespacesInVbDotNet04202005005133AM/NamespacesInVbDotNet.aspx)

# 项目/职业相关的原因

这些原因与项目/职业管理更相关......

## *维护不是可选的*

如果您的应用程序是一头垂死的老牛，更改标签或组合的内容值得 2 天的工作（*确实*会发生），那么重构的额外工作可能没有意义。另一方面，如果重构是自动化的，那么无论如何你都应该这样做。

但是，如果您的应用程序应该在将来使用，那么破坏它以将其保留在过去是一个坏主意。总有一天你会为此付出代价的。避免维护应该赢得的每一小时将在不可避免的那一天获得两倍或十倍的报酬（你知道，因为紧急而没有时间正确完成它的那一天......）

## *让自己保持最新不是可选的*

这个论点适用于有职业并且必须保住工作的工程师：像应用程序一样，软件工程师可能会过时。

这意味着过时的开发人员在申请另一份工作时也会失败。因为，嘿，谁愿意为没有像命名空间这样简单的东西买单？

经验与当前最新技术的知识相结合是一件好事。如果不是，那么这只是恐龙时代的愤世嫉俗和无用的漫谈“*在我的时代，当我们不需要所有那些像物体这样的小玩意儿时，**它是如何变得更好*（阅读：更简单）”。

 *## *让自己保持最新不是可选的（经理方面）*

通过拒绝适应语言的新特性（通常是因为“*我们知道得更好，你知道吗？* ”），工程师只是在穿上混凝土鞋，而竞争对手可能在穿上跑鞋。这意味着一个过时的团队制作的应用程序最终会失败。时期。

以类似的方式，该团队将聘请新工程师，他们可能知道这些功能，并且会感到惊讶，然后对他们只是像他们的祖母几十年前所做的那样编程这一事实感到沮丧。过时的团队不会留住新工程师很长时间（至少，那些值得他们付出的人）。

请注意，开发一个过时的产品使高层管理人员更容易决定从头开始重写它会变得更容易......而且可能在其他地方，与薪水较低的工程师和管理人员......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-20T04:22:20.947

命名空间的正确使用是为逻辑分组的类、接口、枚举等提供有序的结构。这就像将所有文件放在一个文件夹中......或者更糟糕的是，将它们全部放在 C: 驱动器的根目录中......

我绝对不能指出你的团队非常短视，我并不是真正开始质疑其他团队的政策和程序的地方——但如果我处于你的位置，我会坚持下去。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-20T04:54:20.070

希望您的团队了解面向对象的设计原则。您将相关信息分组到具有对该信息进行操作的类中。命名空间是（或应该）相似的。您使用命名空间将相关的类组合在一起，它们一起提供操作以处理命名空间的集体信息。

这有助于代码的可理解性。将数据层类分组到单个命名空间中将它们标识为相关的，并且以某种方式相关以提供命名空间指示的功能 [顺便说一句，这就是为什么您需要为命名空间和类提供有意义的名称]。如果您将所有类分组在同一个命名空间中，那么这一切都会变成一团泥。您已经丢失了代码组织的语义线索，必须深入研究以找出哪些类协同工作以提供所需的功能。

关键是：这不仅仅是个人喜好的问题。就像您不能期望将所有句子都放在一个段落中一样，而是必须将它们组织成几个段落，其中句子是相关的；你需要把你的类组织到命名空间中。将您的写作分解成相关句子的段落可以提供清晰性和意义，将您的类分解为命名空间可以提高代码的清晰度。随着班级数量的增加，这只会变得越来越重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T05:15:45.627

虽然您完全正确地认为命名空间是好的、有益的和完全必要的，但听起来已经付出了相当大的努力来建立您团队的现状。我认为你有机会推销这个想法的唯一方法是：

1.  确定没有命名空间的成本（可维护性、调试等），并让执行管理人员参与进来。

2.  自愿创建命名空间约定并完成所有工作以转换项目。

不幸的是，根据我的经验，一旦建立了像命名空间约定这样普遍的东西，就需要国会的行动来改变它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-20T06:23:54.163

1.  就像许多人指出的那样，代码的易读性和组织性。

2.  将类似名称的类分隔到不同的“空间”中，例如 Network.Session、Meeting.Session、WebServer.Session 等。在现实世界中，有许多对象具有相同或相似的名称。这就是为什么名称需要自己的空格来限定它们的原因。如果使用得当，命名空间还有助于程序集的命名，例如**System.Web.DLL**和**System.Messaging.DLL**。这有助于代码重用，因为您将代码分成更小的功能块 (DLL)，可以根据需要包含这些块，而不包括整个巨大的块（或混乱）。

3.  命名空间是分隔不同项目、用途和类别的代码的边界。在共享和重用许多 DLL 文件的大型项目中，程序员需要一种易于记忆的方式来引用正确的类，并避免引用错误的类。如果微软决定将所有的 .NET 类放到一个单一的“系统”命名空间中，人们能想象这种难以控制的疯狂吗？程序员怎么会开始编写代码来调用这些类？此外，您将需要处理名为**WindowsFormsTextBox**和**WebUIWebControlsTextBox 之**类的类或比这更长的名称。拥有适当的命名空间有助于程序员快速安全地编写代码。

命名空间的好处在大型项目中变得更加明显，或者当小型项目逐渐变得大到成为问题时。您可以查看当前项目的规模，并确定您需要多努力地扭转同事的手臂。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-20T05:04:13.747

对于某些人来说，再多的逻辑论述都不会像物理类比那样令人信服。

所以，当每个人有一天都在吃午饭时，把他们所有的书从办公室和书柜里拿出来，然后堆放在会议室的桌子上。一定要把电脑书和漫画漫画和一个月前的 MSDN 杂志等彻底混为一谈。

告诉他们这是拥有一个命名空间的物理表示——会议桌是命名空间，书籍是模块/类/项目。

然后让他们在书堆里找到关于遗传算法的书。（确保你把它藏在堆的底部）。

如果他们仍然不明白，放弃并开始寻找另一份工作。你不想和这么厚的人一起工作！;-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-20T04:19:44.540

如果您的代码是洗衣房，那么您将有两种选择，或者您可以将所有东西都放在一大堆中并在每次需要时通过它进行检查，或者您可以将衣服放在办公室里。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-20T04:21:44.880

如果我有一个设计良好的命名空间方案，代码文件顶部的 using/Imports 语句会记录我在此文件中使用的内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-20T05:04:08.227

如果您必须说服他们拥有分区命名空间而不是简单的“唯一真正的命名空间”是一件好事，那么这似乎表明您可能无法说服他们相信它。说实话。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-20T11:29:25.077

如果开发人员对 VB6 和现有 VB6 项目的结构感到满意，那么将移植的项目结构与原始项目非常相似可能是有意义的，即使它损害了 .net 中的一些最佳实践。（我假设 VB6 不支持命名空间？）当新的代码库稳定并且开发人员更熟悉 .net 时，可以稍后引入命名空间。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-20T19:35:14.473

他们认为命名空间有什么用？他们为什么认为 BCL 使用它们？

# javascript - 你如何阅读 JavaScript 中的点符号？

> ID：382883
> 
> 赞同：2
> 
> 时间：2008-12-20T03:58:35.083
> 
> 标签：javascript, notation

举个例子，这个语句是

```
window.Number.constructor.prototype.constructor(); 
```

读起来像一条路？

```
C:\Users\Vista\Documents\Work\text.txt 
```

从左到右

```
window:\Number\constructor\prototype\constructor() 
```

`window`根对象在哪里，`Number`里面是一个对象，里面是一个对象，里面`window`是一个对象，里面是一个对象吗？`constructor``Number``prototype``constructor``constructor()``prototype`

就像在这个声明中一样

```
window.document.myForm.textBox.value; 
```

这等于

```
[object].[object].[object].[object].1 
```

对象实际上并没有相互作用的地方？

**或者**

实际值是从右到左读取的，每个对象直接作用于它左侧的对象吗？

在哪里

```
window.Number.constructor.prototype.constructor(); 
```

等于

```
[object] . function Number() { [native code] } . function Function() { [native code] } . function prototype() { [native code] } . function anonymous() { } 
```

作为

```
window.Number(9.256).toFixed(2); 
```

等于

```
[object].(9.256).(9.26); 
```

`toFixed`使用对象的返回值`Number`并将结果存储为对象的属性的属性在哪里`window`？

正如您可能会说的那样，我在这里有点纠结:) 只是难以理解点概念。我确信 Java 的背景会有所帮助，但不幸的是，我（还）没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-20T04:40:01.193

从左到右阅读。每个“事物”都解析为一个对象。对象可以具有属性或功能。属性是另一个对象，它又可以有自己的属性和功能。如果它是一个函数，那么要成为合法的语法，该函数必须返回一个对象。那么右边的链接项必须是该对象的属性（或函数）。

像 jQuery 这样的框架通过让每个方法返回自身的副本来工作，以便可以将方法链接在一起。

在您的第一个示例中，它指的是一系列对象属性，但最后一个是函数。在第二个中，它调用窗口对象上的一个函数，该函数返回一个具有 toFixed() 函数的 Number 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T04:06:43.380

是的，或者像 C 中的一个字段`struct`。它实际上是一堆哈希表或字典。所以你的例子

```
window.Number.constructor.prototype.constructor() 
```

是“窗口对象，一个名为'Number'的项目，其中包含一个名为'constructor'的项目，其中包含一个名为'prototype'的项目---这是命名方法的地方---其中包含一个名为constructor的方法。 " 最后`()`的意思是“并将其视为没有参数的函数”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T04:10:01.907

Left to right.

# java - 独立的 java 基础 java 格式化程序

> ID：382886
> 
> 赞同：1
> 
> 时间：2008-12-20T04:00:39.540
> 
> 标签：java, format, coding-style, executable-jar

是否有可以格式化 java 代码（缩进/间距）的基于 Java 的程序（executable-jar）？

如果它是可配置的，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T04:03:46.850

你打赌：[JIndent](http://www.jindent.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T04:21:03.897

[CheckStyle](http://checkstyle.sourceforge.net/) is another and FREE. [CheckStyle:Indentation](http://checkstyle.sourceforge.net/config_misc.html#Indentation).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T17:16:00.470

[https://github.com/google/google-java-format](https://github.com/google/google-java-format) Google Java 格式。它是不可配置的。您还可以使用 clang-format 和 prettier 来格式化 Java 代码。不过，那些不是罐子。Clang 格式是可配置的；更漂亮是固执己见。

# c# - 用 C# 中未加修饰的对应物替换重音/变音符号

> ID：382917
> 
> 赞同：7
> 
> 时间：2008-12-20T04:30:58.650
> 
> 标签：c#, string, diacritics

## 重复[249087](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)

我有一堆用户生成的地址，其中可能包含带有变音符号的字符。将任何此类字符自动转换为最接近的英文等效字符的最有效（即通用）方式（除了直接替换）是什么？

例如，任何**àâãäå**都会**变成**

**æ**将成为两个单独的字母**ae**

**ç**会变成**c**

任何**èéêë**都会变成**e**

等所有可能的字母变体（最好不必为字母的每种变音符号形式查找和编码查找）。

（注意：我必须将这些地址传递给无法打印除英文字符以外的任何内容的第三方软件。我希望该软件能够处理它们，但我无法控制。）

编辑：没关系......找到答案[这里] [2]。它在我发布后出现在问题右侧的“相关”部分，但**没有**出现在我之前的搜索中或作为发布前的建议。唔。无论如何，我在另一个问题中添加了“变音符号”标签。

编辑2：天哪！在我关闭它后谁投票给了这个-1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T04:46:09.417

只是要发布相同的链接:-)

听起来您已经这样做了，但我建议您将原始字符串存储在您的应用程序中以供显示，并且仅对第 3 方的内容执行此操作。如果人们认为自己的真名不重要，他们会变得暴躁:-)

# wpf - 如何使用 VB.net (2008) 将节点添加到 WPF 树列表

> ID：382928
> 
> 赞同：0
> 
> 时间：2008-12-20T04:41:04.670
> 
> 标签：wpf, vb.net, xaml, treeview

我需要创建一个 wpf treeviewlist 看起来像这样：

```
AAAA

BBBB

....CCCC

....DDDD

.......EEEE

FFFFF 
```

（上面的点是缩进）

我需要从 vb.net (2008) 代码中执行此操作。

我花了很长时间试图弄清楚这一点，到目前为止我所拥有的只是：

VB.net：

```
Dim tvi1, tvi2 As TreeViewItem

tvi1 = New TreeViewItem

tvi2 = New TreeViewItem

Dim Node1 As Integer

tvi1.Header = "AAAA"

tvi2.Header = "BBBB"

Node1 = TreeView1.Items.Add(tvi1)

Node1 = TreeView1.Items.Add(tvi2) 
```

任何指针或示例将不胜感激。

谢谢，罗伯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-20T07:07:38.103

你可以很容易地做到这一点。只需将您的子 TreeViewItems 直接添加到父项，就像这样（C#，但很清楚）

```
var parent = new TreeViewItem();
var child = new TreeViewItem();
parent.Header = "Hey";
child.Header = "There!";
parent.Items.Add(child);
treeView1.Items.Add(parent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-20T12:28:31.713

这是我最终得到的结果，感谢 Pwninstein：

```
 Dim Node(5) As TreeViewItem

        For x As Int16 = 0 To 5
            Node(x) = New TreeViewItem
        Next

        Node(0).Header = "AAAA"
        TreeView1.Items.Add(Node(0))

        Node(1).Header = "BBBB"
        TreeView1.Items.Add(Node(1))

        Node(2).Header = "CCCC"
        Node(1).Items.Add(Node(2))

        Node(3).Header = "DDDD"
        Node(1).Items.Add(Node(3))

        Node(4).Header = "EEEE"
        Node(3).Items.Add(Node(4))

        Node(5).Header = "FFFF"
        TreeView1.Items.Add(Node(5)) 
```

# jquery - 时间间隔后的按键事件

> ID：382930
> 
> 赞同：4
> 
> 时间：2008-12-20T04:43:45.380
> 
> 标签：jquery, ajax

我有这个 jQuery 代码，它在 keyup 事件上查询 API（通过 keyterms.php）。它按原样工作，但我试图弄清楚如何实现“暂停”，可以这么说，以便它只会在最后一次键入后的一定时间（比如 2 秒）后进行查询。任何帮助都感激不尽。谢谢！

```
$(document).ready(function() {
    $('#loading').hide();
    $('#q').keyup(function(){
      $('#loading').show();
      $.post("keyterms.php", {
        q: $('#q').val()
      }, function(response){
        $('#qResult').fadeOut();
        setTimeout("finishAjax('qResult', '"+escape(response)+"')", 400);
      });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-20T05:13:05.383

您可以使用 StackOverflow 用于其[用户页面](https://stackoverflow.com/users)的 jQuery 插件；它被称为[TypeWatch](https://github.com/medihack/typewatch)

它可以像这样应用：

```
<input type="text" id="tb" />

<script>
$("#tb").typeWatch({ highlight: true, wait: 500, captureLength: -1, callback: finished });
</script> 
```

在这种情况下，`finished`是一个回调函数（一个引用），当输入的时间量（在本例中为 500 毫秒）从最后一个 keyUp 事件过去时将被调用。

下面是它接受的参数的简短描述（*它实际上接受一个参数，一个对象，它的属性用作输入参数*）：

*   *highlight*：美学，确定文本框获得焦点时是否应突出显示文本。默认为**真**
*   *wait*：插件认为输入完成之前等待的毫秒数。默认**750**。
*   *captureLength*：允许事件触发之前所需的最少字符数。默认**2**。
*   *callback：*用户“完成”输入后回调的函数。默认**无效**

有关此插件的现场*演示*，请查看[用户页面](https://stackoverflow.com/users)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-20T05:07:50.387

使用 a`setTimeout`只在按键两秒后调用 ajax 方法，而不是在按键时直接调用。我对 JQuery 的弱点不太熟悉，因为我还没有机会使用它，但它应该能够插入到您上面的方法中。

（注意：两秒是相当长的时间；））

# user-interface - 如何为 GUI 应用程序（VC MFC）应用测试驱动开发？

> ID：382946
> 
> 赞同：18
> 
> 时间：2008-12-20T04:57:00.953
> 
> 标签：user-interface, mfc, tdd

我可以将 TDD 用于 gui 应用程序吗？怎么做。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-01-18T00:29:47.413

在过去几年中发展的答案是，*您不将 TDD 应用于 GUI，您设计 GUI 的方式是在下面有一个层，您可以使用 TDD 进行开发。*Gui 被简化为控件到 ViewModel 的简单映射，通常带有框架绑定，因此对于 TDD 被忽略。

这被称为[表示模型](http://martinfowler.com/eaaDev/PresentationModel.html)（Fowler）[模型-视图-视图模型](http://blogs.msdn.com/johngossman/archive/2005/10/08/478683.aspx)和数据模型-视图-[视图模型](http://robbbloggg.blogspot.com/2008/04/datamodel-view-viewmodel-in-wpf-part-1.html)架构。

这种方法从 TDD 和单元测试中移除了 GUI 层。这并不意味着 GUI 从未经过测试，而只是承认追求自动化 GUI 测试并不划算，尤其是作为 TDD 的一部分。集成和用户测试应涵盖 GUI。

Josh Smith 的[2009 WPF 文章](https://msdn.microsoft.com/en-us/magazine/dd419663.aspx)通过一些测试详细解释了 MVVM。

最近，Houssem Dellai 的[2016 视频为 Xamarin 表单应用程序创建单元测试](https://channel9.msdn.com/Blogs/MVP-Windows-Dev/Creating-Unit-Tests-for-Xamarin-Forms-Apps)展示了一个带有绑定 ViewModel 的 XAML UI，并介绍了如何创建一个单元测试项目

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-20T05:03:52.783

为什么不。[这](http://blog.objectmentor.com/articles/category/testing-guis)是一篇好文章，来自[对象导师](http://objectmentor.com/)。

找到另一篇博文，[TDD - 起订量简介](http://weblogs.asp.net/stephenwalther/archive/2008/06/11/tdd-introduction-to-moq.aspx)。它与 C# 和 VB.NET 有关。

检查有关 TDD 的[神话和误解](http://www.agiledata.org/essays/tdd.html#Misconceptions)是必须的。

这是一本与 .NET、[Microsoft .NET 中的 TDD](https://rads.stackoverflow.com/amzn/click/com/0735619484)相关的书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-20T06:21:03.797

Chad Myers 对控制器进行了很好的测试：

[http://www.chadmyers.com/Blog/archive/2007/11/27/tdd-with-asp.net-mvc-3.5-extensions.aspx](http://www.chadmyers.com/Blog/archive/2007/11/27/tdd-with-asp.net-mvc-3.5-extensions.aspx)

# entity-framework - 实体框架 - 关联实体问题

> ID：382952
> 
> 赞同：0
> 
> 时间：2008-12-20T05:04:39.910
> 
> 标签：entity-framework, linq-to-entities

我注意到，如果我有 Pk/FK 关联，则 FK ID 将从设计器中的实体中删除。如何加入查询语句？

基本上我正在寻找一些好的 Linq to Entity 视频教程（对不起，我是一个音频/视频学习者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-06T06:50:29.893

假设你有一个“评论”项目，它与一个“产品”相关，你会做这样的事情：

```
review.productsReference.Value = db.products.First(p => p.product_id == 2); 
```

设置 reference.Value 等于对象本身。

[http://naspinski.net/post/Getting-started-with-Linq-To-Entities.aspx](http://naspinski.net/post/Getting-started-with-Linq-To-Entities.aspx)

# flash - AS3 时间线变量问题

> ID：382963
> 
> 赞同：0
> 
> 时间：2008-12-20T05:11:33.203
> 
> 标签：flash, actionscript-3, timeline

我正在尝试从时间轴获取动态影片剪辑。

我有一个长度未知的时间线，其中一个关键帧（假设为 88）上有一个实例名称为“blah”的影片剪辑。
无论我做什么，我都无法获得对上述电影剪辑的引用。

这是我尝试过的：

```
trace(blah); // null
trace(this.blah); // null
trace(getChildByName("blah")); // null

if(currentFrame == 88)
    trace(getChildByName("blah")); // null

for(var i:int=0; i<numChildren; ++i)
    trace(getChildAt(i));
/* Returns:
 * [object MovieClip]
 * [object Shape]
 * null
 * [object TextField]
 */

// Assuming the first movie clip is the correct one
trace(getChildAt(0).name); // instance?? where ?? are random digits, I'm expecting "blah" 
```

有人可以阐明如何通过代码导入时间线生成的对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-20T12:38:01.400

如果您刚刚导航到第 88 帧，则可能是您在初始化之前尝试使用它。尝试添加：

```
stage.addEventListener(Event.ADDED, onAdded);

function onAdded(event:Event):void
{
    trace("new object "+event.target);
    trace("new object name "+event.target.name);
} 
```

并查看是否/何时创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-23T14:28:58.990

如果您加载一个 swf，其中的实例名称将无法直接使用，并且（取决于您的时间线的设置）使用 gotoAndStop() 或 gotoAndPlay() 进行移动也是如此。这将迫使您实施一种解决方法来侦听 Event.ADDED（在添加 swf 的情况下）或 Event.ENTER_FRAME 或 Event.RENDER（对于 gotoAndStop/gotoAndPlay）。

我不知道确切的细节，但[http://bugs.adobe.com/jira/browse/FP-43](http://bugs.adobe.com/jira/browse/FP-43)上的评论包含有用的链接。

gotoAndPlay/Stop 问题还有另一种解决方法 - 通过在您已经设置实例名称但使符号不可见的第 1 帧添加关键帧，确保您的所有符号在整个影片剪辑中都可用。根据具体情况，这可能与侦听器解决方法一样麻烦，但有时它更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-27T17:13:58.403

里拉努纳，

我提前道歉 - 我不知道你对 Flash 有多少经验，所以我的建议可能是侮辱基本的......

首先，您是如何添加影片剪辑并为其指定名称的？你是通过IDE添加的吗？

如果是这样，我经常犯的一个错误是我在命名时选择了错误的东西。换句话说，我没有为剪辑 A 分配名称，而是将其分配给剪辑的父级。或者更糟的是，我无意中分配了框架标签而不是对象名称。

您描述的行为（而不是名称“blah”，影片剪辑的名称为“instance##”）与通过 IDE 添加剪辑一致，但未命名 - “instance##”是 Flash IDE 的默认值您尚未命名的对象的命名方案。

所以，我会仔细检查你是否真的分配了你认为你拥有的名字。

另一方面，如果您以编程方式添加该剪辑，您能否提供您用来执行此操作的代码？

干杯，马特

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-27T17:47:57.507

这是我们在 Flash Player 9 上遇到的异步问题。一个简单的解决方法是在更改帧后等待 ENTER_FRAME 事件的第一次调度，或者使用 ADDED 事件来了解您的对象何时添加到显示列表中。令人高兴的是，这个问题在 Flash Player 10 上得到了修复。

[http://www.bytearray.org/?p=236](http://www.bytearray.org/?p=236)

# parentid - 如何使用 ActiveRecord 在同一张表上设置父子关系？

> ID：382976
> 
> 赞同：3
> 
> 时间：2008-12-20T05:32:15.627
> 
> 标签：parentid

如何在同一张桌子上设置父子关系？

```
Id int, 
title string, 
ParentId int  ---> this is refer to Id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T17:17:59.023

您使用的是什么 ActiveRecord 实现？

在[Castle ActiveRecord](http://www.castleproject.org/activerecord/index.html)中，如果您的表格如下所示：

```
table Document (
   Id int primary key,
   ParentDocumentId int,
   Title string
) 
```

您将使用以下语法：

```
[ActiveRecord(Table = "Document")]
public class Document : ActiveRecordBase<Document> {

    private int id;
    private Document parent;
    private string title;
    private List<Document> children = new List<Document>();

    [PrimaryKey]
    public int Id {
        get { return id; }
        set { id = value; }

    }

    [BelongsTo("ParentDocumentId")]
    public virtual Document Parent {
        get { return parent; }
        set { parent = value; }
    }

    [HasMany(Table = "Document", ColumnKey = "ParentDocumentId", Inverse = true, Cascade = ManyRelationCascadeEnum.All)]
    public IList<Document> Children {
        get { return children.AsReadOnly(); }
        private set { children = new List<Document>(value); }
    }

    [Property]
    public string Title {
        get { return title; }
        set { title = value; }
    }
} 
```

# macos - 在 Mac OS X 中，是否有一种编程方式让机器进入睡眠/休眠状态？

> ID：382980
> 
> 赞同：3
> 
> 时间：2008-12-20T05:40:58.150
> 
> 标签：macos

是否有一些命令行或 AppleScript 可以编写/运行以使机器自动进入睡眠状态，甚至更好地进入休眠模式？

我可以以 root 身份运行该程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-20T05:48:08.230

```
osascript -e 'tell application "Finder" to sleep' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-24T00:01:45.353

要进入休眠模式，您需要在电源管理器上设置正确的设置。

可能的设置：

0 - 旧式睡眠模式，睡眠时打开 RAM，禁用安全睡眠和超快速唤醒。

1 - 休眠模式，将 RAM 内容写入磁盘，系统在“睡眠”时完全关闭，并且由于从硬盘驱动器读取 RAM 的内容，唤醒速度较慢。

3 - 自 2005 年秋季以来引入的机器上的默认模式。RAM 在睡眠时开启，但 RAM 内容也在睡眠前写入磁盘。在完全断电的情况下，系统会自动进入休眠模式。

5 - 这与模式 1 相同，但适用于使用安全虚拟内存的用户（在系统偏好设置 -> 安全中）。

7 - 这与模式 3 相同，但适用于使用安全虚拟内存的用户。

因此，毕竟，如果您想自动休眠并且没有打开安全 VM，那么您可以运行以下 shell 命令（作为 setuid 根脚本）：

```
pmset -a hibernatemode 1; osascript -e 'tell application "Finder" to sleep' 
```

# c - 为什么编译器不警告超出范围的静态数组索引？

> ID：382993
> 
> 赞同：20
> 
> 时间：2008-12-20T06:03:43.113
> 
> 标签：c, arrays, warnings

我的一位同事最近因为越界写入堆栈上的静态数组而被严重咬伤（他在没有增加数组大小的情况下向其中添加了一个元素）。编译器不应该捕获这种错误吗？下面的代码可以用 gcc 干净地编译，即使有`-Wall -Wextra`选项，但它显然是错误的：

```
int main(void)
{
  int a[10];
  a[13] = 3;  // oops, overwrote the return address
  return 0;
} 
```

我很肯定这是未定义的行为，尽管目前我找不到 C99 标准的摘录。但是在最简单的情况下，数组的大小被称为编译时，索引在编译时是已知的，编译器至少不应该发出警告吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-20T08:28:36.673

GCC*确实*对此提出警告。但是你需要做两件事：

1.  启用优化。至少没有 -O2，GCC 没有做足够的分析来知道什么`a`是，并且你跑出了边缘。
2.  更改您的示例以便实际使用 a[] ，否则 GCC 会生成一个无操作程序并完全放弃您的分配。

.

```
$ cat foo.c 
int main(void)
{
  int a[10];
  a[13] = 3;  // oops, overwrote the return address
  return a[1];
}
$ gcc -Wall -Wextra  -O2 -c foo.c 
foo.c: In function ‘main’:
foo.c:4: warning: array subscript is above array bounds 
```

顺便说一句：如果您在测试程序中返回 a[13] ，那也不起作用，因为 GCC 再次优化了数组。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-12-20T18:27:54.423

你试过`-fmudflap`GCC 吗？这些是运行时检查，但很有用，因为无论如何您通常都必须处理运行时计算的索引。它不会默默地继续工作，而是会通知您这些错误。

> `-fmudflap -fmudflapth -fmudflapir` 对于支持它的前端（C 和 C++），检测所有有风险的指针/数组解引用操作、一些标准库字符串/堆函数，以及其他一些具有范围/有效性测试的相关结构。如此检测的模块应该不受缓冲区溢出、无效堆使用和其他一些 C/C++ 编程错误的影响。该工具依赖于一个单独的运行时库 (libmudflap)，如果在链接时给出 -fmudflap，它将被链接到一个程序中。检测程序的运行时行为由 MUDFLAP_OPTIONS 环境变量控制。有关其选项，请参见“env MUDFLAP_OPTIONS=-help a.out”。
> 
> 如果您的程序是多线程的，请使用 -fmudflapth 而不是 -fmudflap 来编译和链接。如果检测应忽略指针读取，则使用 -fmudflapir 和 -fmudflap 或 -fmudflapth。这产生了更少的检测（因此更快的执行），并且仍然提供了一些保护以防止直接破坏内存的写入，但允许错误读取的数据在程序中传播。

以下是泥瓣给我的例子：

```
[js@HOST2 cpp]$ gcc -fstack-protector-all -fmudflap -lmudflap mudf.c        
[js@HOST2 cpp]$ ./a.out
*******
mudflap violation 1 (check/write): time=1229801723.191441 ptr=0xbfdd9c04 size=56
pc=0xb7fb126d location=`mudf.c:4:3 (main)'
      /usr/lib/libmudflap.so.0(__mf_check+0x3d) [0xb7fb126d]
      ./a.out(main+0xb9) [0x804887d]
      /usr/lib/libmudflap.so.0(__wrap_main+0x4f) [0xb7fb0a5f]
Nearby object 1: checked region begins 0B into and ends 16B after
mudflap object 0x8509cd8: name=`mudf.c:3:7 (main) a'
bounds=[0xbfdd9c04,0xbfdd9c2b] size=40 area=stack check=0r/3w liveness=3
alloc time=1229801723.191433 pc=0xb7fb09fd
number of nearby objects: 1
[js@HOST2 cpp]$ 
```

它有很多选择。例如，它可以在违规时分叉 gdb 进程，可以向您显示程序泄漏的位置（使用`-print-leaks`）或检测未初始化的变量读取。用于`MUDFLAP_OPTIONS=-help ./a.out`获取选项列表。由于 mudflap 只输出地址而不是文件名和源代码行，所以我写了一个小 gawk 脚本：

```
/^ / {
    file = gensub(/([^(]*).*/, "\\1", 1);
    addr = gensub(/.*\[([x[:xdigit:]]*)\]$/, "\\1", 1);
    if(file && addr) {
        cmd = "addr2line -e " file " " addr
        cmd | getline laddr
        print $0 " (" laddr ")"
        close (cmd)
        next;
    }
}

1 # print all other lines 
```

将 mudflap 的输出通过管道传输到其中，它将显示每个回溯条目的源文件和行。

还有`-fstack-protector[-all]`：

> `-fstack-protector` 发出额外的代码来检查缓冲区溢出，例如堆栈粉碎攻击。这是通过将保护变量添加到具有易受攻击对象的函数来完成的。这包括调用 alloca 的函数，以及缓冲区大于 8 字节的函数。进入函数时初始化守卫，然后在函数退出时检查。如果保护检查失败，则会打印一条错误消息并退出程序。
> 
> `-fstack-protector-all` 与 -fstack-protector 类似，只是所有函数都受到保护。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-20T06:21:17.010

你是对**的，行为是 undefined**。C99 指针必须指向声明的或堆分配的数据结构内或仅指向一个元素。

我一直无法弄清楚`gcc`人们是如何决定何时发出警告的。我很震惊地得知它`-Wall` *本身*不会警告未初始化的变量。至少你需要`-O`，即使这样，有时也会忽略警告。

我猜想因为无界数组在 C 语言中很常见，所以编译器可能无法在其表达式树中*表示*一个在编译时具有已知大小的数组。因此，尽管信息出现在声明中，但我猜想在使用时它已经丢失了。

我**[赞同 valgrind](http://valgrind.org/)****的推荐。** 如果你用 C 编程，你应该**在每个程序上运行 valgrind，**一直到你不能再承受性能损失为止。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-20T06:21:59.643

它不是静态数组。

未定义的行为与否，它正在从数组的开头写入 13 个整数的地址。有什么是你的责任。有几种 C 技术会出于合理的原因故意错误分配数组。而这种情况在不完整的编译单元中并不少见。

根据您的标志设置，该程序的许多功能将被标记，例如从不使用数组这一事实。并且编译器可能很容易将其优化为不存在而不告诉你 - 一棵树倒在森林里。

这是C路。这是你的阵列，你的记忆，用它做你想做的事。:)

（有许多 lint 工具可以帮助您找到这类东西；您应该自由地使用它们。但它们并非都通过编译器工作；编译和链接通常很乏味。）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-21T00:41:52.263

C 不这样做的原因是 C 没有信息。像这样的声明

```
int a[10]; 
```

做两件事：它分配`sizeof(int)*10`字节空间（可能还有一点用于对齐的死空间），它在符号表中放入一个条目，从概念上讲，

```
a : address of a[0] 
```

或用 C 术语

```
a : &a[0] 
```

就这样。事实上，在 C 中，您可以在（几乎*）所有情况下`*(a+i)`与`a[i]`按定义无效的情况互换。所以你的问题相当于问“为什么我可以向这个（地址）值添加任何整数？”

*流行测验：这*不是*真的吗？

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-12-21T04:37:41.197

C 哲学是*程序员永远是对的*。所以它会默默地允许你访问你在那里提供的任何内存地址，假设你总是知道你在做什么并且不会用警告来打扰你。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-12-20T06:22:41.360

> 编译器至少不应该发出警告吗？

不; C 编译器通常不执行数组边界检查。正如您所提到的，这样做的明显负面影响是具有未定义行为的错误，这可能很难找到。

这样做的积极方面是在某些情况下可能具有很小的性能优势。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-20T06:34:36.703

我相信某些编译器在某些情况下会这样做。例如，如果我没记错的话，较新的 Microsoft 编译器有一个“缓冲区安全检查”选项，可以检测缓冲区溢出的琐碎情况。

为什么不是所有的编译器都这样做？要么（如前所述）编译器使用的内部表示不适合这种类型的静态分析，要么它在作者优先级列表中不够高。说实话，无论哪种方式都是一种耻辱。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-20T06:15:08.147

gcc 中有一些扩展（从编译器方面） [http://www.doc.ic.ac.uk/~awl03/projects/miro/](http://www.doc.ic.ac.uk/~awl03/projects/miro/)

另一方面，夹板、老鼠和相当多的其他静态代码分析工具会发现这一点。

您还可以在代码上使用 valgrind 并查看输出。 [http://valgrind.org/](http://valgrind.org/)

另一个广泛使用的库似乎是 libefence

这只是一个设计决策。现在导致了这件事。

问候弗里德里希

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-20T08:06:17.267

-fbounds-checking 选项可用于 gcc。

值得通过这篇文章 [http://www.doc.ic.ac.uk/~phjk/BoundsChecking.html](http://www.doc.ic.ac.uk/~phjk/BoundsChecking.html)

'le dorfier' 已经对你的问题给出了恰当的回答，它是你的程序，它是 C 的行为方式。

# asp.net - 您如何处理在 IIS 上运行的网站的计划任务？

> ID：382997
> 
> 赞同：7
> 
> 时间：2008-12-20T06:13:30.550
> 
> 标签：asp.net, windows, scheduled-tasks

我有一个在 Windows 服务器上运行的网站，我想添加一些计划的后台任务来执行各种任务。例如，客户希望用户接收总结网站最近活动的电子邮件。

如果发送电子邮件是唯一需要执行的任务，我可能会设置一个运行脚本来发送这些电子邮件的计划任务。但是，对于这个特定站点，客户希望执行各种不同的计划任务，其中一些始终运行，而另一些则仅在满足某些条件时才运行。现在，他们已经给了我一套他们希望看到实现的初始设置，但我知道未来还会有更多。

我想知道的是，是否有一个简单的 Windows 解决方案可以让我定义需要运行的任务，然后有一个每天运行的计划任务并执行每个已定义的计划任务。批处理文件是最简单的方法，还是我可以使用其他一些解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-20T06:32:44.053

为了简单起见，我会避免构建一个大型的单体 exe，并将要完成的工作分解为单独的任务，并为每个任务设置一个 Windows 计划任务。这样，您可以更轻松地维护代码库并在更精细的级别更改功能。

稍后，您可以构建一个 Windows 服务，该服务根据计划为每个不同的任务动态加载插件。这对于未来的项目可能更可重用。

但老实说，如果你在截止日期前，我会应用 KISS 原则并为每个任务安排一个计划任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-20T06:49:34.380

我会立即使用 Windows 服务。这将是满足您的需求的最可扩展的方法，创建服务不会增加您的开发时间，并且可能会在不久的将来为您节省时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-24T23:08:39.610

我们使用 Windows 调度程序服务来启动小型控制台应用程序，该应用程序只是将参数传递给 Web 服务。

例如，如果用户有计划报告 #388 和 #88，计划任务将使用如下所示的命令行创建：

> c:\launcher\app.exe 报告：388 报告：88

当调度程序触发时，此应用程序仅在 Web 服务上执行 Web 方法，例如 InternalService.SendReport(int id)。

通常，您的 Web 应用程序中已经具备所有必需的业务逻辑。这种方法允许以最小的努力使用它，因此无需创建任何复杂的 .exe 或带有可插拔模块的 Windows 服务等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-15T15:01:26.053

从预定的 EXE 而不是从网页内部进行操作的问题在于，这些操作可能会受益于，甚至完全*需要*网页将拥有的资源——IIS 缓存和 ORM 缓存是两件事我想到了。在 ORM 的情况下，在 Web 应用程序上下文之外进行数据库更改甚至可能是致命的。我的偏好是安排 curl.exe 从本地主机请求网页。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T06:31:29.953

使用 Windows 计划任务或创建自行执行计划的 Windows 服务。

# winapi - 以编程方式/从命令行“修复”网络连接

> ID：382998
> 
> 赞同：10
> 
> 时间：2008-12-20T06:13:56.213
> 
> 标签：winapi, networking, windows-xp, tcp

当您在网络连接上单击“修复”时，有谁知道 Windows XP 究竟做了什么？我想以编程方式或从命令行执行相同的操作。

我用谷歌搜索，找到[了这篇文章](http://windowsitpro.com/article/articleid/41060/what-actions-occur-when-i-click-repair-on-a-network-connection-in-windows-xp-and-later.html)，有很好的解释，但我认为它并不完整。我可以可靠地重现我失去网络连接并单击修复按钮修复问题的情况，但运行该文章中的命令不能。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-20T07:31:08.833

谢谢各位，我想我明白了。[lpfavreau 发布的 MS 知识库文章](http://support.microsoft.com/kb/289256/EN-US/)中的步骤*几乎*完成了。这就是我尝试过的，但没有奏效。但是，如果我`ipconfig /release`先这样做，那么它似乎可以工作。我怀疑“修复”按钮在没有明确记录的情况下会这样做。对于我的特殊情况，我还必须清除路线（“route -f”）。所以，我最终运行的命令是：

```
route -f
ipconfig /release
ipconfig /renew
arp -d *
nbtstat -R
nbtstat -RR
ipconfig /flushdns
ipconfig /registerdns 
```

我还找到了一些 C 代码来调用实际的“修复连接”功能，尽管我还没有测试过 -[请参阅此处的最后一篇文章](http://forum.ihome.net.ua/lofiversion/index.php/t32720.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-20T06:29:57.680

似乎还有[一些事情要做](http://support.microsoft.com/kb/289256/EN-US/)：

> *   更新动态主机配置协议 (DHCP) 租约：ipconfig /renew
> *   地址解析协议 (ARP) 缓存被刷新：arp -d
> *   重新加载 NetBIOS 名称缓存：nbtstat -R
> *   发送 NetBIOS 名称更新：nbtstat -RR
> *   刷新域名系统 (DNS) 缓存：ipconfig /flushdns
> *   DNS 名称注册：ipconfig /registerdns

但有一件事，如果您的连接经常中断，您需要以编程方式修复您的网络，这可能不是您正在寻找的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-01-13T10:21:55.413

有一个命令可以从命令行执行此操作。

引用[http://en.kioskea.net/faq/sujet-848-windows-xp-repairing-the-network-connection-using-command-line](http://en.kioskea.net/faq/sujet-848-windows-xp-repairing-the-network-connection-using-command-line)：

> 在 Windows XP 下，有一个小功能允许您修复网络连接。转到控制面板（控制面板/网络连接）中的网络连接选项，右键单击所需的网络连接并选择修复选项。
> 
> 可以使用 Netsh 实用程序在以下命令行中运行相同的命令：
> 
> `netsh int ip reset c:\network-connection.log`
> 
> c:\network-connection.log 表示将存储报告的文件的地址
> 
> netsh int ip ...命令允许您重置 TCP/IP。
> 
> 使用 Windows XP Service Pack 2，您可以使用：
> 
> `netsh winsock reset catalog`
> 
> 重置管理 TCP/IP 的套接字。这可用于处理网络问题（浏览器问题、IP 地址相关问题等......）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T06:22:56.537

在无线连接的情况下，它还会禁用和重新启用网络适配器。我怀疑文章中缺少类似的内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-31T06:57:43.433

除了 lpfavreau 和 Evgeny 列出的要点外，“修复”网络连接还执行以下操作。- 重置网络设备 MAC（可能还有 PHY）。这会导致设备重新启动其所有本地数据结构，清除它可能陷入的任何错误情况。 - 清除设备驱动程序和网络接口中的 Rx/Tx 数据包队列，清除任何旧队列数据包。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-07T15:28:15.343

我遇到了wifi连接，在我的XP盒子上不时掉线，没有任何明显的原因，解决这个问题的唯一方法是右键单击系统托盘上的wifi连接图标并修复。

要从命令行完成此操作，我按照本文中的步骤操作，它适用于我：[http ://wlanbook.com/enable-disable-wireless-card-command-line/](http://wlanbook.com/enable-disable-wireless-card-command-line/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-05T10:00:00.277

什么对我有用：

```
netsh interface show interface 
```

显示对我来说是“以太网2”的接口名称，然后：

```
netsh interface set interface "Ethernet 2" DISABLED
netsh interface set interface "Ethernet 2" ENABLED 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-20T06:22:54.683

```
ipconfig /renew 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-20T11:46:00.160

只需 1 次 api 调用即可完成！

在 Win32 api 论坛 news://comp.os.ms-windows.programmer.win32 上查看代码已给出的位置 (C)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-04-14T15:12:02.750

我能找到的最接近的东西是。 [http://msdn.microsoft.com/en-us/library/ff358632(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ff358632(v=vs.85).aspx)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-10T08:25:06.973

这对我有用。

创建一个批处理文件（我称为我的 netrepair.bat）并将其放在您具有执行权限的目录中。使用记事本创建文件。

在文件中键入以下行

ipconfig /renew arp -d * nbtstat -R nbtstat -RR ipconfig /flushdns ipconfig /registerdns

然后保存并关闭。

以管理员身份打开 cmd 终端，导航到保存 netrepair.bat 的文件夹，然后键入

netrepair.bat

在命令行。

就是这样。

有关命令作用的说明，请参阅[http://support.microsoft.com/kb/289256](http://support.microsoft.com/kb/289256)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-01-15T17:45:00.123

这是一个任务管理器 XML 文件（将其导入任务管理器），它将在唤醒 5 秒后执行 netsh 接口设置接口“以太网”禁用”，然后执行“启用”。

```
<?xml version="1.0" encoding="UTF-16"?>
<Task version="1.4" xmlns="http://schemas.microsoft.com/windows/2004/02/mit/task">
  <RegistrationInfo>
    <Date>2015-01-15T10:19:28.1634612</Date>
    <Author>MACHINE\user</Author>
  </RegistrationInfo>
  <Triggers>
    <EventTrigger>
      <Enabled>true</Enabled>
      <Subscription>&lt;QueryList&gt;&lt;Query Id="0" Path="System"&gt;&lt;Select Path="System"&gt;*[System[Provider[@Name='Microsoft-Windows-Power-Troubleshooter'] and EventID=1]]&lt;/Select&gt;&lt;/Query&gt;&lt;/QueryList&gt;</Subscription>
      <Delay>PT5S</Delay>
    </EventTrigger>
  </Triggers>
  <Principals>
    <Principal id="Author">
      <UserId>S-1-5-18</UserId>
      <RunLevel>HighestAvailable</RunLevel>
    </Principal>
  </Principals>
  <Settings>
    <MultipleInstancesPolicy>IgnoreNew</MultipleInstancesPolicy>
    <DisallowStartIfOnBatteries>false</DisallowStartIfOnBatteries>
    <StopIfGoingOnBatteries>true</StopIfGoingOnBatteries>
    <AllowHardTerminate>true</AllowHardTerminate>
    <StartWhenAvailable>true</StartWhenAvailable>
    <RunOnlyIfNetworkAvailable>false</RunOnlyIfNetworkAvailable>
    <IdleSettings>
      <StopOnIdleEnd>true</StopOnIdleEnd>
      <RestartOnIdle>false</RestartOnIdle>
    </IdleSettings>
    <AllowStartOnDemand>true</AllowStartOnDemand>
    <Enabled>true</Enabled>
    <Hidden>true</Hidden>
    <RunOnlyIfIdle>false</RunOnlyIfIdle>
    <DisallowStartOnRemoteAppSession>false</DisallowStartOnRemoteAppSession>
    <UseUnifiedSchedulingEngine>false</UseUnifiedSchedulingEngine>
    <WakeToRun>false</WakeToRun>
    <ExecutionTimeLimit>P3D</ExecutionTimeLimit>
    <Priority>7</Priority>
  </Settings>
  <Actions Context="Author">
    <Exec>
      <Command>C:\Windows\System32\netsh.exe</Command>
      <Arguments>interface set interface "Ethernet" DISABLED</Arguments>
    </Exec>
    <Exec>
      <Command>C:\Windows\System32\netsh.exe</Command>
      <Arguments>interface set interface "Ethernet" ENABLED</Arguments>
    </Exec>
  </Actions>
</Task> 
```*