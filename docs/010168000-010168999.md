# StackOverflow 问答 10168000-10168999

# c++ - 如何在不同的类中使用函数指针？

> ID：10168000
> 
> 赞同：1
> 
> 时间：2012-04-16T02:16:52.970
> 
> 标签：c++, function-pointers

在 function.h 文件中，我已将函数声明为内联函数，例如

```
inline double foo(int &a)
{

     return a*double value
} 
```

在 a.cpp 文件中，我包含了 function.h 文件并在许多地方调用了 foo 函数。a.cpp 文件也有一个 b 类的实例，我想在 b 实例中调用 foo 函数。当我在b中调用一个函数时，我想将函数指针传递给b，这样我就可以在b中调用foo函数而不包括function.h文件。

```
b.cpp file
void b_foo(a function pointer to foo function)
{
     call foo
} 
```

由于我已将该函数声明为内联，因此我不确定传递函数指针是否有效，而不仅仅是在 b.cpp 中包含 function.h 文件。

我想看看可能有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:21:49.027

试试这个：

```
typedef double (*foo_ptr)(int &);

void b_foo(foo_ptr f)
{
  if (f != NULL) {
    double d = f(5);
  }
}

void f() {
  b_foo(foo);
} 
```

这`typedef`使得引用指向函数的类型变得更容易。

调用时不需要取消引用指针（可以，但不是必须的）。作为参数传递时，您也不需要获取函数的地址（同样，您可以根据需要）

注意

```
inline double foo(int &a)  
{  
  return a*double value  
} 
```

无效，因为它有语法错误。尝试：

```
inline double foo(int &a)  
{  
  return a*4.5; 
} 
```

您也可以声明/使用`double`局部变量而不是双重文字

注意：您在谈论实例中的功能。如果你真的想调用一个成员函数，你需要：

```
typedef double (*B::foo_ptr)(int &); 
```

where`B`是声明函数的类。然后以这种方式使用它：

```
B b;
foo_ptr f = B::foo;
b.*f(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:50:28.067

首先，你不是在用 C 编程。你是在用 C++ 编程。这是一种不同的语言。C 没有引用或类。在您的代码中，您没有使用类，而是使用了引用（无缘无故）。

其次，考虑“函数指针”的含义。它是该函数的代码地址。现在考虑“内联”的含义。这意味着该功能在机器代码中不独立存在。它的源（概念上）放在调用它的地方，并编译调用函数。所以你想获取不存在的东西的地址。

简短的回答是你不能。

你想达到什么目标？你想总是从 b 调用 foo 吗？如果是这样，您不需要间接。您可以调用内联函数并将其内联到调用站点，或者您可以调用非内联函数并生成真正的函数调用。

```
// a.c
double foo(int a) { return a * 3.1415926; }

// b.c
double foo(int a); // declaration, not definition.
void b(void) { printf("%f\n", foo(10)); }
int main() { b(); return 0; } 
```

构建： `gcc -O2 -c -o a.o a.c`

请注意，在编译 bc 时，编译器不知道函数 foo 做了什么，它只知道它的签名。 `gcc -O2 -c -o b.o b.c`

这将这两个部分链接到一个程序中，并在开头和结尾添加部分，使其可以运行它： `gcc -o program a.o b.o`

区别在于效率。内联允许许多优化（直到使用参数的值来预先计算结果并完全消除代码，就像这里一样）。在无法进行此类优化的地方内联仍然可以更快，因为它消除了函数调用开销，并且可以允许更好的寄存器分配，以及使代码更有可能在缓存中。但是内联可能很糟糕，因为它会导致代码膨胀和缓存污染，从而使代码不太可能在缓存中。

如果在编译时不知道要从 b 调用哪个函数，则需要间接调用。因此，您将拥有 foo_1 和 foo_2 并且您将传递给 b 指向其中任何一个的指针，并且它将调用该指针指向的函数，而不知道它是哪一个。这会降低性能，但有时是必要的。

```
double foo_1(int a) { return a * 3.1415926; }
double foo_2(int a) { return a * 2.81; }

void b(double (*foo)(int)) { printf("%f\n", foo(10)); }
int main(int argc, char *argv[])
{
  if (argc < 2) return;
  b(argv[1][0]-48 ? &foo_1 : &foo_2);
  return 0;
} 
```

C++ 有一个特性，您可以告诉编译器从相同的源代码生成函数 b 的两个版本：一个总是调用 foo_1，另一个总是调用 foo_2。然后 foo_1 和 foo_2 可以在两个调用站点内联，而不是选择将指向 foo_1 或 foo_2 的指针传递给 b，您需要选择调用 b_with_foo_1 或 b_with_foo_2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T02:22:44.957

单击[此处](http://c.learncodethehardway.org/book/learn-c-the-hard-waych19.html)“指向函数的指针”这可能对您有所帮助。我不知道，但我是c新手。我相信你需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T02:38:02.660

它是否会产生真正的性能差异，您只能通过实现两个版本、打开编译器优化并比较速度来确定。它取决于与代码的其余部分相关的太多因素，无法预测。这显然特别取决于您的函数实际调用了多少次。

但一般来说，内联可能会对速度产生重大的积极影响。

为了**保持灵活性**，并且考虑到您显然使用的是 C++（而不是 C），最好使用更多**类似 C++ 的方法**来处理这种情况。有关各种可能性及其含义，请参阅[此 SO 帖子。](https://stackoverflow.com/q/4860762/777186)如果您遵循该问题中概述的策略之一，编译器可能会尽可能内联，同时您仍然可以获得函数指针的灵活性。

# ruby - 是否有任何用于使用 mongoid 进行复杂搜索的插件（例如用于 ActiveRecord 的 meta_search）？

> ID：10168001
> 
> 赞同：0
> 
> 时间：2012-04-16T02:16:58.530
> 
> 标签：ruby, mongoid, meta-search

我尝试了 meta_search，但在我的模型中添加“include MetaSearch::Searches::ActiveRecord”后，运行“MyModel.search(params[:search])”时出现“未定义方法 `joins_values'”的错误

我认为我不需要全文，所以我认为以下 gem 现在不适合我的项目:: mongoid_fulltext mongoid-sphinx sunspot_mongoid mongoid_search

我尝试了一个名为 scoped-search 的旧 gem，我可以让它工作，例如：

```
get :search do
  @search        = Notification.scoped_search(params[:search]
  search_scope   = @search.scoped
  defaul_scope   = current_user.notifications
  result_scope   = search_scope.merge defaul_scope
  @notifications = result_scope

  render 'notifications/search'
end 
```

但允许在我的模型中调用任何范围。

有没有做这项工作的“最佳实践”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:39:38.280

如果你想限制你想在 scoped_search 上使用的范围，你可以过滤你的 params[:search] 像：

```
def limit_scope_search
  params[:search].select{|k,v| [:my_scope, :other_scope_authorized].include?(k) }
end 
```

# version-control - 具有中央构建/自动推送到服务器功能的 DVCS？

> ID：10168002
> 
> 赞同：1
> 
> 时间：2012-04-16T02:17:02.853
> 
> 标签：version-control, mercurial, dvcs

我正在寻找用于开发 Java EE 应用程序的[NWDI](http://help.sap.com/saphelp_nw72/helpdata/en/49/2fe24eb7476b1fe10000000a42189d/content.htm)（SAP 的 Netweaver Development Infrastructure 的代表）源控制系统的替代品。主要是因为：

1.  NWDI 不是 DVCS：所以开发人员必须在线才能做任何事情。
2.  用户界面：很难使用和培训开发人员使用该系统。
3.  跟踪更改/生成报告：对此的支持非常有限。例如，我无法找出过去 2 周内更改了哪些项目（项目中的文件）。
4.  代码审查：您可以进行代码审查，它有一个很好的 diff 实用程序。但仅此而已，没有办法将代码审查附加到更改请求中。
5.  分支和合并非常痛苦。

但是，当前系统具有一些方便的功能：

1.  自动构建：无需编写任何构建脚本，所有内容都是内置的。因此，当创建一个新的存储库（我们称之为轨道）时，它会根据创建时选择的组件类型（由存储库支持）自动配置构建。每当开发人员提交（激活更改）时，都会触发中央构建。无论构建的状态如何，现在都会对整个团队进行更改。

2.  自动推送到中央测试服务器：在创建存储库时，您可以定义所有服务器（中央测试、QA、Prod）。开发人员可以通过单击按钮将他的更改推送到中央测试服务器。同样，一切都是内置的，不需要像在 Mercurial 中那样扩展任何钩子。

我正在探索[Mercurial](http://mercurial.selenic.com/)、[Kiln](http://www.fogcreek.com/kiln/)，但找不到任何有用的东西。对于 mercurial [Hooks](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)可以用来做同样的事情，但我想需要一些定制工作。

有没有像 Mercurial 这样的酷 DVCS 也可以完成上述 2 项，还是我必须对其进行自定义才能使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:01:08.520

我不知道 DVCS 提出了所有内置功能。
唯一的替代方案（不是 DVCS，但其中包含一些 DVCS 特性）是[Rational Team Concert 或 RTC](https://jazz.net/library/LearnItem.jsp?href=content/docs/rtc1.0-capabilities/index.html)（最多 10 位开发人员免费）。

仅使用 DVCS，CI 和审查的通常设置是：

*   [吉特](http://git-scm.com/)
*   [格里特](http://code.google.com/p/gerrit/)（评论）
*   [詹金斯](http://jenkins-ci.org/)（调度员）

请参阅“[将 Gerrit Git Review 与 Jenkins CI 服务器一起使用](http://vimeo.com/20084957)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:51:36.863

看起来没有开箱即用的东西。我将试用 Kiln，因为它看起来很容易使用并尝试自定义它。

# sql - SSAS - 自然层次结构中的属性关系

> ID：10168008
> 
> 赞同：0
> 
> 时间：2012-04-16T02:18:19.687
> 
> 标签：sql, attributes, ssas, hierarchy, relationship

我发现很难正确理解在 SQL Server Analysis Services 2008 R2 中实现维度属性之间的属性关系的最佳用例场景。

从我所阅读的内容来看，出于性能原因，应避免使用**“非自然层次结构” ，而****“自然”**层次结构是首选的用户定义层次结构。

参考： http: [//support.microsoft.com/kb/2131988](http://support.microsoft.com/kb/2131988)

话虽如此，我想请教您对以下情况的看法：

我有一个具有以下属性的维度：

* * *

**维度名称：** DimReserveData
**维度成员：**

项目线
覆盖代码
覆盖类型
覆盖状态

* * *

我想将这些属性以相同的顺序放置在层次结构中，如下所示：

**ReserveDataHierarchy** .........................
程序行
覆盖代码
覆盖类型
覆盖状态
。 ……………………………………………………………………………………………………………………………………

**层次结构信息：**

计划行是代表所提供的保险范围计划的代码。（例如：AA-23、BB-25、CC-78 等）

覆盖代码属性代表一个数字代码，代表为特定程序行提供的特定覆盖范围。（例如：123、456 等）

覆盖类型表示与特定覆盖代码相关的覆盖类型。（例如：车辆或身体）。

覆盖状态表示给定覆盖的状态（打开或关闭）。

因此，对于层次结构中的基数，我们可以说以下内容：

一个程序行可以包含许多覆盖代码。
一个覆盖率代码可以包含多种类型。
一种覆盖类型可以包含许多状态值。

因此，浏览层次结构将产生以下属性和相应的成员：

**DimReserveData** .................................................. ..................................................... .*.................................
**程序行 | 覆盖代码 | 覆盖类型 | 覆盖状态** .................................................. ..................................................... .....................
AA-12 ...... ........123........车辆......打开
BB-14 .. .............456.......................车辆...... ....封闭式
CC-23 ...................123 ....车辆 .... .............打开
DD-23 .............456................ ......身体............打开

我的问题是，在“自然”或“非自然”层次结构中对这些属性进行建模是否是一种好习惯。我想使用“自然”层次结构来提高性能。

显然，将此层次结构建模为“自然”需要使用属性关系。

回到我上面的示例层次结构，如果一个给定的覆盖代码属性属于多个程序行以及包含相同覆盖类型的多个覆盖代码，“自然”层次结构是否可能？

在这篇有用的帖子中：[http](http://sqlserverpedia.com/blog/sql-server-bloggers/idiots-guide-to-ssas-attribute-relationships/) ://sqlserverpedia.com/blog/sql-server-bloggers/idiots-guide-to-ssas-attribute-relationships/提到在一个城市属于多个州或省的情况下，可以修改属性键列，以便唯一定义层次结构中的每个属性。

这在我上面的例子中有效吗？

我在想我可以像这样对属性关系进行建模：（使用 SSAS 2008 R2）

[来自维度的代理键属性]--> 覆盖状态--> 覆盖类型--> 覆盖代码--> 程序行

上面的每个属性的键列设置如下：

.....................
**覆盖状态：** ...... .........................
承保状态
承保类型

.....................
**覆盖类型：** ...... .........................
保险类型
保险代码

.....................
**覆盖代码：** ...... .........................
覆盖代码
程序行

.....................
程序行：
...... .........................
程序行

这行得通吗？这种情况是否更适合**“不自然”**的层次结构？

非常感谢您花时间阅读我上面的帖子！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:21:21.797

如果你必须在一个层次结构中拥有这些，强制它是一个自然的。与仅使用不自然的层次结构相比，您将付出更少的性能损失。强制自然层次结构的惩罚主要与键大小的增加有关（因为您将使用复合键来自然化层次结构）。

但是也许您应该考虑通过将这些属性强制为用户层次结构来实现什么？

是为了简化一些 MDX 查询吗？是不是维度太宽（与key直接相关的属性太多）导致处理时内存压力？

如果答案只是为用户界面（例如 Excel）对这些属性进行分组，您可能需要考虑简单地使用允许这些属性按您喜欢的顺序出现的命名约定......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-03T01:07:18.697

Microsoft 删除了您引用的 KB（参考： http: [//support.microsoft.com/kb/2131988](http://support.microsoft.com/kb/2131988)）

我对在那里管理 KB 内容的人感到非常沮丧。有人需要将手指从 DEL 键上移开！那是我的知识库，我可能花了一个多星期的时间帮助 MS 记录非自然层次结构中的意外问题（相对于属性的等效交叉连接）！！！

# ios - iOS：图标偶尔无法传输到设备

> ID：10168012
> 
> 赞同：6
> 
> 时间：2012-04-16T02:19:19.977
> 
> 标签：ios, icons, ipad-2

有谁知道为什么会这样？我的项目使用本地网络，所以只在一台设备上测试它没有意义，所以我想在 20 上安装它。我这样做的方式是我构建一次，然后使用组织者。但是，大约每 3 或 4 次传输，图标无法随之传输，而我**只**在主屏幕上留下一个白色图标。如果我启动它，然后检查多任务栏，图标就在那里（当多任务栏处于活动状态时，它会在主屏幕上淡出显示）。如果我再次转移应用程序，图标就很好了。这些设备都是 32 GB iPad 2。

图标尺寸正确（72x72 RGB24），图标名称正确（Icon-72.png）。我注意到我的信息列表中有两个条目：图标文件和图标文件（iOS 5）。我的部署目标是 5.0，所以我应该删除第一个吗？这个程序很大，传输和安装需要很长时间，所以我不喜欢加载两次。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:28:18.243

应用程序图标（视网膜和普通）需要放置在应用程序的根目录上。为了解决这个问题，我发现最好的办法是从头开始这个过程：

1.  从项目中删除图标
2.  清理构建
3.  删除派生数据（组织者->项目）*
4.  从应用程序信息 plist 文件中删除图标（图标文件和图标文件 iOS5）。
5.  将图标拖到“摘要应用程序图标”部分
6.  建造

* 我不知道是否需要此步骤，但我在故障排除时还是会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:46:25.650

在较新版本的 Xcode 中，它似乎没有发生。所以我会把它归结为 Xcode 中的一个怪癖。

# amazon-web-services - Scale Up 与 Scale Out 场景对 Elastic Map 的性能影响减少

> ID：10168017
> 
> 赞同：0
> 
> 时间：2012-04-16T02:20:40.797
> 
> 标签：amazon-web-services, mapreduce, elastic-map-reduce

我刚刚运行了 Elastic Map reduce 示例应用程序：“Apache 日志处理”

默认值：当我使用默认配置（2 个小型核心实例）运行时 - 花了 19 分钟

Scale Out：然后我使用配置运行它：8 个小型核心实例 - 花了 18 分钟

扩大规模：然后我使用配置运行它：2 个大型核心实例 - 花了 14 分钟。

当我们拥有更大的数据集时，如何看待纵向扩展和横向扩展的性能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:22:05.513

我会说这取决于。我通常发现使用 m1.large 和 m1.xlarge 实例的原始处理速度要好得多。除此之外，正如您所注意到的，相同的工作可能会以相同的摊销或标准化实例小时数来完成。

对于您的工作，您可能希望首先尝试使用较小的样本数据集，看看需要多少时间，然后估计使用大型数据集完成完整工作需要多长时间。我发现这是估算工作完成时间的最佳方法。

# php - 这是策略模式的一个很好的用例吗？

> ID：10168020
> 
> 赞同：4
> 
> 时间：2012-04-16T02:20:55.127
> 
> 标签：php, design-patterns, language-agnostic, factory-pattern, strategy-pattern

我正在使用一个需要接收多个视频并将它们显示在特定页面上的应用程序，目前这些视频只能来自 YouTube，由于不允许其他提供商的实现，因为获取视频数据的代码，作为预览图，直接放在了负责显示视频的View Helper中。

我想更改此结构以方便添加新的提供程序，例如 Vimeo，并且我认为 Strategy 模式将是理想的，我将在我的 View Helper 中有方法`setVideoUrl( string $url )`，此方法将从中调用方法`getProviderStrategy( string $url )`，`class VideoProviderFactory`这然后，工厂类将返回（如果可用）`interface VideoProvider`为视频 url 的提供者实现 , 的策略类。

你怎么看？这是对的？我需要改变一些东西吗？

细节：我最初考虑在 View Helper 中直接放置一个选择策略的开关，但在阅读了这个问题后：I [Strategy Pattern with no 'switch' statements？](https://stackoverflow.com/questions/3834091/strategy-pattern-with-no-switch-statements)我看到我错了，然后`class VideoProviderFactory`出现了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T04:10:24.673

这看起来是一个非常好的设计，具有适当的职责分离。

为了给您更多思考，请考虑工厂将*如何*决定创建哪种策略。稍后当您想添加*另一个*策略时，需要更改什么？首先，您将创建一个新的`VideoProvider`，然后您必须更改工厂`switch`语句（如您所描述的）并包含此新策略的选择逻辑。现在，这在大多数情况下都很好，但是如果您想在不更改工厂的情况下添加新策略怎么办？

一种方法是使用类似工厂的接口，该接口基于 URL 决定是否应该创建特定的`VideoProvider`; 让我们称之为`VideoProviderMatcher`（伪代码）：

```
interface VideoProviderMatcher {
  bool understands(url)
  VideoProvider create()
} 
```

现在，这个接口知道它是否理解一个 URL 以及如何创建与之`VideoProvider`相关的 URL。当您需要创建新策略时，您需要同时实施`VideoProvider`和相关的`VideoProviderMatcher`. 至于工厂，它使用*责任链*（伪代码）封装了一个`VideoProviderMatcher`s 列表并委托给第一个理解给定 URL 的人：

 *```
class VideoProviderFactory {
  List[VideoProviderMatcher] matchers
  void registerMatcher(VideoProviderMatcher matcher) {
    matchers.add(matcher)
  }
  VideoProvider getVideoProviderFor(url) {
    foreach (matcher in matchers) {
      if (matcher.understands(url)) return matcher.create()
    }
  }
} 
```

现在唯一需要更改的代码是首先创建工厂的代码。理想情况下，它有一个`VideoProviderMatcher`用于填充工厂的 s 列表，您只需将另一个项目添加到列表中。

现在，这值得吗？我想说这取决于匹配逻辑的复杂性、将 URL 匹配与视频提供者一起封装的意愿、添加新策略时保持工厂稳定的愿望以及添加新策略的速率解决方案。*

# android - Android：startActivity 上的序列化 IO 异常

> ID：10168022
> 
> 赞同：0
> 
> 时间：2012-04-16T02:20:56.433
> 
> 标签：android, exception, serialization, io

我有一个简单的数据结构类，它实现了 Serializable 并保存在 onSaveInstanceState 的主要活动中，并成功地在 onRestoreInstanceSate 上重试。

但是，当我尝试使用 startActivity 命令以简单的意图启动新活动时，onSaveInstanceState 方法的超级构造函数会引发 IO 异常：

Parcelable 在写入可序列化对象时遇到 IOException (name = com.mumfordmedia.xyz.CustomArrayAdapter)

经过一番谷歌搜索，看起来其他几个人遇到了这个问题，但从未找到令人满意的解决方案，因为他们没有注意到这个问题仅在开始新活动时才会出现。

任何人都可以对此有所了解吗？

最大限度

# iphone - 在 tabBar didSelectItem 上加载核心数据的替代方法？还是加快速度？

> ID：10168024
> 
> 赞同：0
> 
> 时间：2012-04-16T02:21:08.480
> 
> 标签：iphone, objective-c, core-data, ios5, xcode4.2

我在 didSelectItem 上为我的 TableView 加载核心数据，但这使得标签栏感觉迟缓，直到新数据加载后才会更新。解决此问题的好方法是什么？我可以在数据加载之前更新选项卡栏和空白表格视图，还是可以以某种方式显示活动指示器？

这是我当前的代码

```
- (void) tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
NSInteger index = [item tag];
NSMutableArray *schedule = [dataHandler fetchEntriesForCourse:[[_Courses objectAtIndex:index] valueForKey:@"CourseCode"]];
tableView.schedule = schedule;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:03:01.117

您可以在后台线程中进行获取，使用 GCD 并在数据到来时填充表格视图。这是一篇关于在后台线程中使用 Core Data 的精彩文章。

[http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)

真的，如果您使用 fetchresultscontroller 捕获数据，您需要做的就是在另一个线程中进行 fetch。然后随着 fetch 的进行，它会自动捕获添加的新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T11:41:24.363

当应用程序启动时，我最终制作了一个 NSMutableArray 来存储数据，因此选项卡更改得更快，因为它不必获取核心数据。

# android - 我的一项活动在 SDK > 10 时过早退出，如果 SDK <= 10 则正常工作

> ID：10168025
> 
> 赞同：1
> 
> 时间：2012-04-16T02:21:13.693
> 
> 标签：android, debugging

我的程序在 SDK 4.0.4 下开始失败，但在 SDK 2.3.3 上运行，这没有意义。

基本流程是：

*   第一个活动启动远程服务，然后单击按钮调用第二个活动
*   第二个活动绑定到服务，然后退出，logcat 中没有任何内容可以解释它发生的原因。

这是我在服务启动后看到的：

```
04-15 09:13:46.614: I/ErrandAssistantService(7015): Setting a new request for location updates
04-15 09:13:46.661: I/ErrandAssistantService(7015): saveProximityAlert - used GPS
04-15 09:13:46.669: I/ErrandAssistantService(7015): saveProximityAlert - used network
04-15 09:13:46.677: I/ErrandAssistantService(7015): saveProximityAlert - used GPS
04-15 09:13:46.681: I/ErrandAssistantService(7015): saveProximityAlert - used network 
```

这发生在第二个活动中：

```
04-15 09:13:47.044: I/MapViewActivity(7039): OnResume: mapView loaded = true
04-15 09:13:47.083: I/MapActivity(7039): Handling network change notification:CONNECTED
04-15 09:13:47.196: I/ErrandMapActivity(7039): onServiceConnected
04-15 09:13:47.196: I/ErrandMapActivity(7039): registering callback
04-15 09:13:47.200: I/ErrandAssistantService(7015): registerCallback
04-15 09:13:47.200: I/ErrandMapActivity(7039): onResume - binding succeeded 
```

然后我看到这个来自服务，试图将信息发送到第二个活动（已经退出）：

```
04-15 09:13:49.142: I/ErrandAssistantService(7015): Sent location changed callback
04-15 09:13:49.142: I/ErrandAssistantService(7015): Sent route changed
04-15 09:13:49.142: I/ErrandAssistantService(7015): geoPoint set 
```

因此，该活动已绑定到该服务，然后该服务将数据发送回该活动，但该活动已经退出。

如果我将其设置为高于 10，则它会崩溃，否则它可以正常工作：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="10" /> 
```

那么，如何解决更高版本的 SDK 使应用程序崩溃而无一例外，并且它没有通过`onStop`或`onDestroy`？

在第二个活动中，我有这个，它没有被调用，所以它的退出似乎是异常的。

```
@Override
public void onStop() {
    Log.i(TAG, "onStop");
    super.onStop();
} 
```

如果我将 SDK 版本设置为 17，但手机是 SDK 2.3.3，则它不会崩溃，但这似乎与我将 SDK 版本设置为 10 并且手机版本相同4.0.4。

我还尝试了第二个未绑定到服务的活动，但观察到了相同的行为，因此它似乎与远程服务无关。

我还让服务在与活动相同的进程中运行，以查看是否可以获得任何调试信息，但这也没有给我任何额外的信息。

我不喜欢将 SDK 版本设置得这么低，但我需要进行新的更新，这是唯一可行的解​​决方案。

# c# - 不确定何时在 C# 中使用“base”

> ID：10168027
> 
> 赞同：3
> 
> 时间：2012-04-16T02:21:31.557
> 
> 标签：c#, oop, interface, abstract-class, base

我正在尝试在 C# 中自学 OOP，但我有一个关于何时使用`base`. 我了解一般原则，但我不确定下面的示例中什么是最好的。这个简单的测试包括：

*   具有`interface`两个`string`属性的
*   `abstract`实现此接口并添加更多`string`属性的类
*   实现抽象类的两个类。一个使用`base`而另一个不使用，但它们在程序执行时都产生相同的输出。

我的问题是：**在这个例子中，一种实现比另一种更可取**吗？我不确定 和 之间是否有任何有意义的差异`TranslationStyleA`，`TranslationStyleB`或者是否只是个人喜好？

非常感谢您的时间和想法！

```
using System;

namespace Test
{
    interface ITranslation
    {
        string English { get; set; }
        string French { get; set; }
    }

    public abstract class Translation : ITranslation
    {
        public virtual string English { get; set; }
        public virtual string French { get; set; }

        public string EnglishToFrench { get { return English + " is " + French + " in French"; } }
        public string FrenchToEnglish { get { return French + " is " + English + " in English"; } }

        public Translation(string e, string f)
        {
            English = e;
            French = f;
        }
    }

    public class TranslationStyleA : Translation
    {
        public override string English
        {
            get { return base.English; }
            set { base.English = value; }
        }

        public override string French
        {
          get { return base.French; }
          set { base.French = value; }
        }

        public TranslationStyleA(string e, string f) : base(e, f)
        {
        }
    }

    public class TranslationStyleB : Translation
    {
        private string english;
        public override string English
        {
            get { return english; }
            set { english = value; }
        }

        private string french;
        public override string French
        {
            get { return french; }
            set { french = value; }
        }

        public TranslationStyleB(string e, string f) : base(e, f)
        {
            this.English = e;
            this.French = f;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            TranslationStyleA a = new TranslationStyleA("cheese", "fromage");
            Console.WriteLine("Test A:");
            Console.WriteLine(a.EnglishToFrench);
            Console.WriteLine(a.FrenchToEnglish);

            TranslationStyleB b = new TranslationStyleB("cheese", "fromage");
            Console.WriteLine("Test B:");
            Console.WriteLine(b.EnglishToFrench);
            Console.WriteLine(b.FrenchToEnglish);

            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T02:30:00.120

您需要了解的第一件事是当您拥有自动属性时会发生什么：

```
public virtual string English { get; set; } 
```

在幕后，编译器正在生成一个私有字段，并在您访问该属性时获取/设置该私有字段。相当于这个

```
private string _english;
public virtual string English { get { return _english; } set { _english = value; } } 
```

除了您不知道私有字段的名称，因此您无法访问它。

因此，在您的`TranslationStyleA`课程中，您实际上并没有对 English 属性做任何事情，因为它只是直接访问基类的属性并且不会改变它的行为。

```
 // None of this is even needed- we are just delegating to the base class
    public override string English
    {
        get { return base.English; }
        set { base.English = value; }
    } 
```

现在在`TranslationStyleB`课堂上，您实际上正在更改属性的行为（尽管以一种相当无用的方式）。不是将 English 属性的值存储在基类的自动实现的私有变量中，而是将其存储在派生类级别定义的私有变量中：

```
 private string english;
    public override string English
    {
        get { return english; }
        set { english = value; }
    } 
```

当然，这些实现都没有做任何事情，并且在实现时都不需要，因为基类本身完美地实现了属性。因此，鉴于您描述的代码，我对您最初问题的回答是两者都不是首选。

现在，让我们看一个与您的问题相关的示例。例如，如果你想*改变*它们的行为，你只需要覆盖它们。

```
 // We don't want any leading or trailing whitespace, so we remove it here.
    public override string English
    {
        get { return base.English; }
        set { base.English = value.Trim(); }
    } 
```

我们想在这里委托给基类，因为首先这些是属性。从语义上讲，属性与字段相同：

```
public String Foo;
public String Foo { get; set; } // <-- why bother with all this extra { get; set; } stuff? 
```

原因是从编译器的角度来看，从属性到字段的接口是一个重大变化。所以如果我改变

```
public String Foo; 
```

到

```
public String Foo { get; set; } 
```

然后任何依赖于我的代码的代码都需要重新编译。但是，如果我改变

```
public String Foo { get; set; } 
```

到

```
private string _foo;
public String Foo { get { return _foo; } set { _foo = value.Trim(); } } 
```

那么依赖代码仍然只看到公共属性，不需要重新编译（因为我的类的接口没有改变）。

如果此处的基类 ( `Translation`) 要更改其属性的行为，则`English`如下：

```
private string _english;
public String English { get { return _english; } set { _english = value.ToUpper(); } } 
```

你会想在你的派生类中选择它！

因此，考虑到属性具有与之关联的行为，您应该始终委托给父类实现，除非该实现在您的派生类中产生不良影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T02:26:23.880

第一种风格绝对是可取的，除非你有充分的理由选择另一种。

每个自动实现的属性`Translation`都添加了一个字段，样式 B 添加了更多而不是使用编译器添加的属性。样式 A 重用了编译器添加的样式，节省了一些存储空间。

此外，如果您不打算更改超类的功能，则无需覆盖超类的属性。你甚至可以像这样写另一种风格：

```
public class TranslationStyleC : Translation {
    public TranslationStyleC(string e, string f) : base(e, f) {
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T02:27:34.863

您实际上不需要重写任何超类属性来实现您想要的效果，因为您不会以任何方式增强超类行为。

如果`abstract`从 base 中删除修饰符`Translation`，则不再需要子类，因为它在功能上等同于两者。

现在，至于何时使用`base`; 当您想要访问在子类中被*覆盖*的超类中的功能时，您应该使用它。`base`调用总是*在编译时*静态绑定到超类方法；即使超类方法是`virtual`（如您的情况）。对于`base`呼叫可能发生的奇怪事情，请查看[此处](http://blogs.msdn.com/b/ericlippert/archive/2010/03/29/putting-a-base-in-the-middle.aspx)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T02:35:34.637

如前所述，样式 A**重用**已声明的字段，而样式 B**声明新字段**。关于何时使用**base**的问题，经验法则是“只要您想重用父类中定义的逻辑/代码”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T02:43:42.137

它确实归结为您打算如何利用您的构造。

在实现时，TranslationStyleA 上的覆盖成员有点多余，因为消费者可以轻松访问基本成员，而无需在基本派生中提供覆盖。在这种情况下，如果这样做不会为设计增加任何价值，我个人根本不会费心重写基本成员。

当您真正想要覆盖基类成员的设置和访问时，第二种实现很常见，例如，如果基类成员的设置是启动另一个操作的催化剂，那么派生上的覆盖成员将是一个合适的地方发生这种情况。

# textmate - 如何根据我在 finder 中看到的目录从 Mac Finder 启动 textmate？

> ID：10168028
> 
> 赞同：0
> 
> 时间：2012-04-16T02:21:41.773
> 
> 标签：textmate

如何根据我在 finder 中看到的目录从 Mac Finder 启动 textmate？

即用该文件夹的内容打开TextMate

例如，我看不到文件夹 - 右键单击​​ - 在 Mac 中使用 XXX 选项打开

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:48:45.180

只需将文件夹图标拖到 Dock 中 TextMate 的图标上即可。

***编辑***

另外两种方式：

*   您可以对位于 Finder 窗口标题栏中的代理图标执行相同操作。在抓取当前文件夹的图标时会失去状态的情况下，它可能很有用。

*   您可以使用[这个方便的小应用程序](http://henrik.nyh.se/2007/10/open-in-textmate-from-leopard-finder)从 Finder 窗口的工具栏中打开当前文件夹。

***结束编辑***

# javascript - 如何在不使用库的情况下反转 JavaScript 中的数组？

> ID：10168034
> 
> 赞同：86
> 
> 时间：2012-04-16T02:23:15.097
> 
> 标签：javascript, arrays

我正在使用`array`s 按顺序保存一些数据，并且我想添加一个用户可以反转列表的功能。我想不出任何可能的方法，所以如果有人知道如何，请帮忙。

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-04-16T02:27:14.283

Javascript 有一个`reverse()`可以在数组中调用的方法

```
var a = [3,5,7,8];
a.reverse(); // 8 7 5 3 
```

不确定这是否是您所说的“无法使用的库”，我猜这与练习有关。如果是这种情况，您可以实现自己的版本`.reverse()`

```
function reverseArr(input) {
    var ret = new Array;
    for(var i = input.length-1; i >= 0; i--) {
        ret.push(input[i]);
    }
    return ret;
}

var a = [3,5,7,8]
var b = reverseArr(a); 
```

请注意，内置`.reverse()`方法对原始数组进行操作，因此您无需重新分配`a`。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-02-19T10:35:31.173

> [`Array.prototype.reverse()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse)是您完成这项工作所需的全部内容。请参阅[兼容性表](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse#Browser_compatibility)。

```
var myArray = [20, 40, 80, 100];
var revMyArr = [].concat(myArray).reverse();
console.log(revMyArr);
// [100, 80, 40, 20]
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-03-17T03:15:35.110

这是一种功能性的方法。

```
const array = [1,2,3,4,5,6,"taco"];

function reverse(array){
  return array.map((item,idx) => array[array.length-1-idx])
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-11-27T23:14:38.263

**20 字节**

```
let reverse=a=>[...a].map(a.pop,a) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-06-08T20:35:52.163

我见过的最短的反向方法是这个：

```
let reverse = a=>a.sort(a=>1) 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-08-16T11:44:16.193

```
reveresed = [...array].reverse() 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-04-24T02:29:19.863

**

## 不使用反向方法的最短反向数组方法：

**

```
 var a = [0, 1, 4, 1, 3, 9, 3, 7, 8544, 4, 2, 1, 2, 3];

 a.map(a.pop,[...a]); 
// returns [3, 2, 1, 2, 4, 8544, 7, 3, 9, 3, 1, 4, 1, 0] 
```

a.pop 方法取出最后一个元素并使用扩展运算符 () 预先放置

MDN 链接供参考：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/pop](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/pop)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-07-21T21:28:42.917

```
const original = [1, 2, 3, 4];
const reversed = [...original].reverse(); // 4 3 2 1 
```

简明扼要，保持原样不变。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-04-16T02:25:14.270

这就是你想要的：

```
array.reverse(); 
```

## [演示](http://jsfiddle.net/Pp5e9/)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2015-05-09T10:59:14.040

我已经对解决方案进行了一些测试，这些解决方案不仅可以反转数组，还可以复制它。这是测试代码。该`reverse2`方法是 Chrome 中最快的方法，但在 Firefox 中该`reverse`方法是最快的。

```
var array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];

var reverse1 = function() {
  var reversed = array.slice().reverse();
};

var reverse2 = function() {
  var reversed = [];
  for (var i = array.length - 1; i >= 0; i--) {
    reversed.push(array[i]);
  }
};

var reverse3 = function() {
  var reversed = [];
  array.forEach(function(v) {
    reversed.unshift(v);
  });
};

console.time('reverse1');
for (var x = 0; x < 1000000; x++) {
  reverse1();
}
console.timeEnd('reverse1'); // Around 184ms on my computer in Chrome

console.time('reverse2');
for (var x = 0; x < 1000000; x++) {
  reverse2();
}
console.timeEnd('reverse2'); // Around 78ms on my computer in Chrome

console.time('reverse3');
for (var x = 0; x < 1000000; x++) {
  reverse3();
}
console.timeEnd('reverse3'); // Around 1114ms on my computer in Chrome 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-07-20T20:55:29.737

这是一个不需要临时数组的版本。

```
function inplaceReverse(arr) {
  var i = 0;
  while (i < arr.length - 1) {
    arr.splice(i, 0, arr.pop());
    i++;
  }
  return arr;
}

// Useage:
var arr = [1, 2, 3];
console.log(inplaceReverse(arr)); // [3, 2, 1] 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-04-16T02:26:56.187

```
> var arr = [1,2,3,4,5,6];
> arr.reverse();
  [6, 5, 4, 3, 2, 1] 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-04-22T16:07:05.480

```
array.reverse() 
```

上面将反转您的数组，但会修改原始数组。如果您不想修改原始数组，则可以这样做：

```
var arrayOne = [1,2,3,4,5];

var reverse = function(array){
    var arrayOne = array
    var array2 = [];

    for (var i = arrayOne.length-1; i >= 0; i--){
      array2.push(arrayOne[i])
    } 
    return array2
}

reverse(arrayOne) 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-05-23T12:29:11.947

```
function reverseArray(arr) {
    let reversed = [];
    for (i = 0; i < arr.length; i++) { 
    reversed.push((arr[arr.length-1-i]))
    }
  return reversed;
} 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2017-12-03T10:23:04.953

你可以做

```
var yourArray = ["first", "second", "third", "...", "etc"]
var reverseArray = yourArray.slice().reverse()

console.log(reverseArray) 
```

你会得到

```
["etc", "...", "third", "second", "first"] 
```

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-08-26T19:22:33.780

使用 .pop() 方法和 while 循环。

```
var original = [1,2,3,4];
var reverse = [];
while(original.length){
    reverse.push(original.pop());
} 
```

输出：[4,3,2,1]

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-08-08T20:48:31.957

# 53 字节

```
function reverse(a){
    for(i=0,j=a.length-1;i<j;)a[i]=a[j]+(a[j--]=a[i++],0)
} 
```

`.reverse`只是为了好玩，这里有一个比原生方法更快的替代实现。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-11-06T09:51:52.813

使用函数式编程反转数​​组的纯函数：

```
var a = [3,5,7,8];

// ES2015
function immutableReverse(arr) {
  return [ ...a ].reverse();
}

// ES5
function immutableReverse(arr) {
  return a.concat().reverse()
} 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2018-10-09T13:29:31.840

正如其他人提到的，您可以`.reverse()`在数组对象上使用。

但是，如果您关心**保留原始对象**，则可以`reduce`改用：

```
const original = ['a', 'b', 'c'];
const reversed = original.reduce( (a, b) => [b].concat(a) );
//                                           ^
//                                           |
//                                           +-- prepend b to previous accumulation

// original: ['a', 'b', 'c'];
// reversed: ['c', 'b', 'a']; 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2019-06-03T20:19:07.700

也可以使用map方法来实现。

```
[1, 2, 3].map((value, index, arr) => arr[arr.length - index - 1])); // [3, 2, 1] 
```

或使用reduce（稍微长一点的方法）

```
[1, 2, 3].reduce((acc, curr, index, arr) => {
    acc[arr.length - index - 1] = curr;
    return acc;
}, []); 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-11-18T01:21:55.260

我不确定库是什么意思，但这是我能想到的最好方法：

```
// return a new array with .map()
const ReverseArray1 = (array) => {
    let len = array.length - 1;

    return array.map(() => array[len--]);
}

console.log(ReverseArray1([1,2,3,4,5])) //[5,4,3,2,1]

// initialize and return a new array
const ReverseArray2 = (array) => {
    const newArray = [];
    let len = array.length;

    while (len--) {
        newArray.push(array[len]);
    }

    return newArray;
}

console.log(ReverseArray2([1,2,3,4,5]))//[5,4,3,2,1]

// use swapping and return original array
const ReverseArray3 = (array) => {
    let i = 0;
    let j = array.length - 1;

    while (i < j) {
        const swap = array[i];
        array[i++] = array[j];
        array[j--] = swap;
    }

    return array;
}
console.log(ReverseArray3([1,2,3,4,5]))//[5,4,3,2,1]

// use .pop() and .length
const ReverseArray4 = (array) => {
    const newArray = [];

    while (array.length) {
        newArray.push(array.pop());
    }

    return newArray;
}
console.log(ReverseArray4([1,2,3,4,5]))//[5,4,3,2,1] 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2020-02-21T03:26:10.147

使用变量交换（可变）反转到位

```
const myArr = ["a", "b", "c", "d"];
for (let i = 0; i < (myArr.length - 1) / 2; i++) {  
    const lastIndex = myArr.length - 1 - i; 
    [myArr[i], myArr[lastIndex]] = [myArr[lastIndex], myArr[i]] 
} 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-05-16T17:13:05.567

## 使用 sort 方法进行反转

*   这是一种更简洁的方法。

```
const resultN = document.querySelector('.resultN');
const resultL = document.querySelector('.resultL');

const dataNum = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
const dataLetters = ['a', 'b', 'c', 'd', 'e'];

const revBySort = (array) => array.sort((a, b) => a < b);

resultN.innerHTML = revBySort(dataNum);
resultL.innerHTML = revBySort(dataLetters);
```

```
<div class="resultN"></div>
<div class="resultL"></div>
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2018-10-25T07:15:25.210

使用 ES6 的 rest 运算符和箭头函数。

```
const reverse = ([x, ...s]) => x ? [...reverse(s), x] : [];
reverse([1,2,3,4,5]) //[5, 4, 3, 2, 1] 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2021-02-18T21:33:56.657

两种方式：

1.  计数器循环

    ```
    function reverseArray(a) { 
         var rA = []
         for (var i = a.length; i > 0; i--) {
             rA.push(a[i - 1])
         } 

         return rA;
      } 
    ```

2.  使用 .reverse()

    ```
     function reverseArray(a) {  
         return a.reverse()  
      } 
    ```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-12-14T14:38:05.450

使用交换并返回原始数组。

```
const reverseString = (s) => {
  let start = 0, end = s.length - 1;
  while (start < end) {
    [s[start], s[end]] = [s[end], s[start]]; // swap
    start++, end--;
  }
  return s;
};

console.log(reverseString(["s", "t", "r", "e", "s", "s", "e", "d"]));
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2021-05-17T18:18:14.533

事实上，`reverse()`在某些情况下可能不起作用，所以你必须先做一个做作，如下所示

```
let a = [1, 2, 3, 4];
console.log(a);  // [1,2,3,4]
a = a.reverse();
console.log(a); // [4,3,2,1] 
```

或使用**concat**

```
let a = [1, 2, 3, 4];
console.log(a, a.concat([]).reverse());  // [1,2,3,4], [4,3,2,1] 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-12-01T20:29:20.083

**不使用 push() 怎么办！**

**使用异或的解决方案**！

```
var myARray = [1,2,3,4,5,6,7,8];

function rver(x){
    var l = x.length;
    for(var i=0; i<Math.floor(l/2); i++){

        var a = x[i];
        var b = x[l-1-i];

        a = a^b;
        b = b^a;
        a = a^b;

        x[i] = a;
        x[l-1-i] = b;
    }

    return x;

}

console.log(rver(myARray)); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-06-18T04:56:43.273

JavaScript 已经在 Array 上有 reverse() 方法，所以你不需要做那么多！

想象一下你有下面的数组：

```
var arr = [1, 2, 3, 4, 5]; 
```

现在只需这样做：

```
arr.reverse(); 
```

你得到这个结果：

```
[5, 4, 3, 2, 1]; 
```

但这基本上改变了原始数组，您可以编写一个函数并使用它来返回一个新数组，如下所示：

```
function reverse(arr) {
  var i = arr.length, reversed = [];
  while(i) {
    i--;
    reversed.push(arr[i]);
  }
  return reversed;
} 
```

或者简单地改变 Array 的 JavaScript 内置方法，如下所示：

```
function reverse(arr) {
  return arr.slice().reverse();
} 
```

你可以这样称呼它：

```
reverse(arr); //return [5, 4, 3, 2, 1]; 
```

如前所述，主要区别在于第二种方式，您不要触摸原始数组...

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-06-27T05:42:02.333

这个怎么样？：

```
 function reverse(arr) {
    function doReverse(a, left, right) {
      if (left >= right) {
        return a;
      }
      const temp = a[left];
      a[left] = a[right];
      a[right] = temp;
      left++;
      right--;
      return doReverse(a, left, right);
    }

    return doReverse(arr, 0, arr.length - 1);
  }

  console.log(reverse([1,2,3,4])); 
```

[https://jsfiddle.net/ygpnt593/8/](https://jsfiddle.net/ygpnt593/8/)

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-03-23T21:18:10.883

此函数适用于索引之间可能存在间隙的数组。

```
function reverse( a ) {
    var b = [], c = [] ;
    a.forEach( function( v ) { b.push( v ) } ) ;
    a.forEach( function( v, i ) { c[i] = b.pop() } ) ;
    return c ;
}

var a= [] ; a[1] = 2 ; a[3] = 4 ; a[7] = 6 ; a[9] = 8 ;
a = reverse( a ) ;
var s = '' ;
a.forEach( function( v, i ) { s += 'a[' + i + '] = ' + v + '  ' } ) ;
console.log( s ) ;
// a[1] = 8  a[3] = 6  a[7] = 4  a[9] = 2 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-05-21T08:57:23.640

*以下是具有最佳空间和时间复杂度的解决方案*

```
function reverse(arr){
let i = 0;
let j = arr.length-1; 
while(i<j){
arr[j] = arr[j]+arr[i];
arr[i] = arr[j] - arr[i];
arr[j] = arr[j] - arr[i];
i++;
j--;
}
return arr;
}
var arr = [1,2,3,4,5,6,7,8,9]
reverse(arr); 
```

**输出 => [9,8,7,6,5,4,3,2,1]**

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2020-03-01T01:02:27.460

使用 ES6 反转数组和子数组（就地）。

```
function reverse(array, i=0, j=array.length-1){
  while (i < j){
    [array[i], array[j]] = [array[j], array[i]];
    ++i;
    --j;
  }
} 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2020-03-19T04:36:28.390

我们有 reverse() 函数来反转 JS 中的给定数组。

```
var a = [7,8,9];
a.reverse(); // 9 8 7

function reverseArr(input) 
{
var ret = new Array;
for(var i = input.length-1; i >= 0; i--) 
{
    ret.push(input[i]);
}
return ret;
} 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2020-04-25T13:53:40.367

我也面临同样的问题。谢谢你的这个问题。我做了如下代码片段的代码。它工作得很好。我用的是 ES6。

```
const Array = ["a", "b", "c", "d"];
let revArray = [].concat(Array).reverse(); 
```

当我 console.log 它时，我得到如下输出

```
console.log(revArray)
// output: ["d","c","b","a"] 
```

* * *

## 回答 #36

> 赞同：-1
> 
> 时间：2018-03-06T23:38:37.647

我只是将haskell实现重写为js。

```
const rev = (list, reversed) => {
    if (list.length == 0) return reversed

    reversed.unshift(list[0])
    return rev(list.slice(1), reversed)
}

const reverse = (list) => rev(list, []) 
```

# mysql - 获取mysql中条目的排名

> ID：10168040
> 
> 赞同：0
> 
> 时间：2012-04-16T02:24:37.730
> 
> 标签：mysql, ruby-on-rails

我正在尝试根据当前收到的投票数来获取 activerecord 对象的排名。在我的对象模型中，我有一个方法“rank”定义为：

```
Object.count(:conditions => ['votes > (?)', self.votes], :distinct => true) + 1 
```

这将返回排名。但是，在我的程序的其他地方，我发现我实际上需要在 mysql 查询本身中获取它。我想尝试做如下的事情：

```
Object.select('id, votes, (SELECT COUNT(DISTINCT "objects"."id") 
FROM "objects" 
WHERE "objects"."votes" > votes) AS rank').limit(10) 
```

但是，我不知道如何执行“objects.votes > votes”部分。我需要用一些对自身的引用来替换“>投票”。不确定这是否清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:31:24.460

我猜你的意思是，你如何`self.votes`从 rails 传递到 SQL 查询？

你可以这样做：

```
Object.where("votes > ?",self.votes) 
```

所以要传递`self.votes`给您的查询：

```
Object.select('id, votes, (SELECT COUNT(DISTINCT "objects"."id") 
FROM "objects" 
WHERE "objects"."votes" > ?) AS rank',self.votes).limit(10) 
```

# database - 这是功能同步算法吗？

> ID：10168045
> 
> 赞同：1
> 
> 时间：2012-04-16T02:25:50.003
> 
> 标签：database, algorithm, sync

我正在研究用户笔记的基本同步算法。我已经弄清楚了大部分，但在我开始编程之前，我想在这里运行它，看看它是否有意义。通常我最终没有意识到一件别人很容易看到而我无法看到的重要事情。以下是它的工作原理：

我的数据库中有一个表，我在其中插入名为`SyncOperation`. A`SyncOperation`是一种关于每个设备需要执行以保持最新状态的性质的元数据。假设用户有 2 个注册设备，`firstDevice`并且`secondDevice`. `firstDevice`创建一个新笔记并将其推送到服务器。现在，`SyncOperation`使用便笺的 Id、操作类型和创建a `processedDeviceList`。我创建了一个`SyncOperation`类型为“ e”的`NewNot`设备，并将原始设备 ID 添加到. 所以现在检查服务器以查看它是否需要进行任何更新。它进行查询以获取所有secondDeviceId 不在. 它发现它的类型是，所以它得到新的注释并将自己添加到. 现在此设备已同步。`SyncOperation``processedDeviceList``secondDevice``SyncOperations``processedDeviceList``NewNote``processedDeviceList`

当我删除一个笔记时，我发现已经`SyncOperation`在表格中创建了类型为“NewNote”的笔记。我将类型更改为删除，删除`processedDevicesList`除删除笔记的设备之外的所有设备。因此，现在当新设备调用以查看他们需要更新的内容时，由于他们的 deviceId 不在 中`processedList`，他们将不得不处理该`SyncOperation`，这会告诉他们的设备删除相应的注释。

这通常是它的工作方式。我的解决方案太复杂了吗？可以简化吗？谁能想到这不起作用的情况？这在大规模上会效率低下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:37:52.280

听起来很复杂——中央数据库不应该负责确定哪些设备收到了哪些更新。这是我的做法：

*   `SyncOperations`数据库为每个更改保留一个表。每个`SyncOperation`is 都有一个`change_id`按升序编号的编号（即`change_id INTEGER PRIMARY KEY AUTOINCREMENT`.）
*   每个设备都有一个`current_change_id`数字，代表它最后看到的变化。
*   当设备想要更新时，它会更新`SELECT * FROM SyncOperations WHERE change_id > current_change_id`。这会得到它需要更新的所有更改的列表。按时间顺序应用它们中的每一个。

这有一个迷人的功能，如果你愿意，你可以简单地通过创建一个新的客户端来初始化一个新设备`current_change_id = 0`。然后它将拉入所有更新。

* * *

请注意，如果两个用户可以同时进行编辑（哪个编辑“获胜”？），这将不会真正起作用。您可以尝试自动合并编辑，也可以向用户发出通知。如果您想要一些灵感，请查看`git`版本控制系统（或 Mercurial，或 CVS ......）的操作以进行冲突编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:13:28.197

您可能想查看 SyncML，了解如何处理同步操作 (http://www.openmobilealliance.org/tech/affiliates/syncml/syncml_sync_protocol_v11_20020215.pdf)。SyncML 已经存在了一段时间，作为一个公共标准，已经进行了大量的审查和审查。还有一些开源实现（想到了 Funambol）也可以提供一些编码线索。您不必使用整个规范，但阅读它可能会给您一些关于同步数据的“啊哈”时刻 - 我知道它有助于思考需要做什么。

标记

PS 协议的更高版本 - [http://www.openmobilealliance.org/technical/release_program/docs/DS/V1_2_1-20070810-A/OMA-TS-DS_Protocol-V1_2_1-20070810-A.pdf](http://www.openmobilealliance.org/technical/release_program/docs/DS/V1_2_1-20070810-A/OMA-TS-DS_Protocol-V1_2_1-20070810-A.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:39:27.823

我已经看到了在其他地方跟踪数据库中的操作的基本想法，所以我敢说它可以工作。您可能希望考虑如果不同的设备同时使用会发生什么，并最终提交相互冲突的更改 - 例如两次不同的尝试编辑同一个笔记。这可能表现为对用户界面的更改，以允许他们手动干预以解决此类冲突。

# php - 在 profile.php/ 之后创建文件夹

> ID：10168046
> 
> 赞同：0
> 
> 时间：2012-04-16T02:25:54.877
> 
> 标签：php, .htaccess

我不确定我需要搜索什么，因为即使我描述正确我也不知道它叫什么，所以请不要告诉我我没有做我的研究，我做了。老实说，我做到了。

我怎样才能使它像 *profile.php 这样的 .php 可以重定向到文件夹。例如：

profile.php = example.com/profile.php/ = example.php/user/ = 然后是一个文件夹 = example.com/user/info/

我有它，以便 $_GET['user'] 通过 .htaccess 将 profile.php?username=$1 重定向到“Brian”。但是有可能让它喜欢 profile.php/folder 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:30:51.203

看一眼`$_SERVER['REQUEST_URI']`

# java - 遍历一个图，但只有 n 层深

> ID：10168050
> 
> 赞同：0
> 
> 时间：2012-04-16T02:26:17.390
> 
> 标签：java, graph

我有一个图，它本质上是一个节点的 ArrayList，每个节点都存储它们的邻居。

```
public class Node {
    ArrayList<Node> neighbors;
    String data;
    public Node() {
        data = null;
        neighbors = new ArrayList<Node>();
    }
} 
```

我打印出这张图中的每条路径，但只做 n 级深。我应该如何进行编码？

或者，如果我应该以不同的方式存储它，请随时告诉我。但更重要的是，我想知道如何打印出每条 n 级深度的路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T02:39:40.413

只需对图进行[深度有限](http://en.wikipedia.org/wiki/Depth-limited_search)的遍历。这就像深度优先搜索一样，除了在递归步骤中，您还添加了一个名为的变量，该变量`depth`在每次下降时递增。然后，一旦达到所需的深度，就停止递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:32:38.180

1.  `visited`添加一个在每个节点中调用的额外变量。
2.  使用 a 进行广度优先搜索`Queue`并使用`visited`防止形成循环。
3.  做它的长度`n`。

# c++ - c++ 类运算符重载参考

> ID：10168057
> 
> 赞同：1
> 
> 时间：2012-04-16T02:27:21.540
> 
> 标签：c++

我很困惑为什么我需要在下面的书中的这个例子中使用返回类型和参数列表的引用。除了它占用的内存比使用按值传递复制所有内容之外，他们还有什么理由吗？或者如果我想做级联，它是否需要处理更多？

```
istream &operator>>( stream &input, PhoneNumber &number)
{
//input whatever
return input;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T02:33:29.640

因为a）流不可复制，b）从流中获取输入意味着改变它，所以你需要修改原始而不是副本（但是会实现）。并且引用`PhoneNumber`应该是显而易见的——您从流中获取输入并进入该对象。如果您通过副本传递它，那么它在操作员之外是不可见的，这使得整个练习变得毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:33:42.990

使用指针和引用的最大原因不是因为它可以让您使用更少的内存（尽管确实如此），而是因为它可以让您使用更少的时间。复制对象需要时间，您通常需要分配额外的内存，然后最终将其释放。

更重要的是，像流这样的对象根本不应该被复制：它们包含与物理对象相关的内部状态 - 磁盘上的文件或网络流 - 以及它们相关的缓冲区，这并不多感觉复制。

# java - OpenCV for Android 中的基本矩阵乘法

> ID：10168058
> 
> 赞同：7
> 
> 时间：2012-04-16T02:27:25.310
> 
> 标签：java, android, opencv, matrix, multiplication

我在这里可能非常愚蠢，但是我在使用 OpenCV for Android 进行一些基本的 Mat 乘法时遇到了麻烦。

我有两个相同类型的垫子，`CV_64F`

`mat1`大小：3 行，3 列
`mat2`大小：3 行，1 列

我想将它们相乘以得到`mat3`大小为 3 行、1 列的乘积。

我试过使用：

```
Mat mat3 = new Mat(3, 1, CvType.CV_64F);
Core.multiply(mat1, mat2, mat3); 
```

但我收到一个错误：

> CvException [org.opencv.core.CvException:/home/andreyk/OpenCV2/trunk/opencv_2.3.1.b2/modules/core/src/arithm.cpp:1253: error: (-209) 操作既不是'array op array'（其中数组具有相同的大小和相同的通道数），也不是 'array op scalar'，也不是函数中的 'scalar op array' void cv::arithm_op(const cv::_InputArray&, const cv::_InputArray&, const cv::_OutputArray&, const cv::_InputArray&, int, void (* *)(const uchar* , size_t, const uchar*, size_t, uchar*, size_t, cv::Size, void*), bool, void*)

我究竟做错了什么？

感谢您提前提供任何帮助。

**编辑：**
如果有帮助，3x3 矩阵`mat2`是结果，`Imgproc.getPerspectiveTransform`其余代码如下：

```
Mat mat1 = new Mat(3, 1, CvType.CV_64F);
mat1.put(0, 0, 2.0);
mat1.put(1, 0, 0.5);
mat1.put(2, 0, 1.0);

Mat mat3 = new Mat(3, 1, CvType.CV_64F);
Core.multiply(mat2, mat1, mat3); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T12:32:55.743

您现在基本上是在尝试执行以下操作：

```
[ 0 ]   [ 0 1 2 ]
[ 1 ] * [ 3 4 5 ]
[ 2 ]   [ 6 7 8 ] 
```

这里 * 是乘法。矩阵乘法不能以这种方式完成。[在此处](http://en.wikipedia.org/wiki/Matrix_multiplication#Matrix_product_.28two_matrices.29)阅读矩阵乘法。

您要执行的操作是：

```
 [ 0 1 2 ]
[ 0 1 2 ] * [ 3 4 5 ]
            [ 6 7 8 ] 
```

要使您的代码正常工作，请进行以下更改：

```
Mat mat1 = new Mat(1, 3, CvType.CV_64F); // A matrix with 1 row and 3 columns
mat1.put(0, 0, 2.0); // Set row 1 , column 1
mat1.put(0, 1, 0.5); // Set row 1 , column 2
mat1.put(0, 2, 1.0); // Set row 1 , column 3 
```

## 编辑

另外，您正在使用方法`Core.multiply`。在 OpenCv 的文档中提到：函数 multiply 计算两个矩阵的每个元素的乘积。如果您正在寻找矩阵产品，而不是每元素产品，请参阅[Core.gemm()](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#cv-gemm)。

该函数`gemm(src1, src2, alpha, src3, beta, dest, flags)`根据以下函数执行乘法：

```
dest = alpha * src1 * src2 + beta * src3 
```

基本矩阵乘法（在您的情况下）由以下方式完成：

```
Core.gemm(mat2, mat1, 1, NULL, 0, mat3, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:36:12.210

反转您的 2 个相乘矩阵： Core.multiply(mat2, mat1, mat3);

# html - 在 CSS 中使用不透明度时，如何使背景透明但文本不透明？

> ID：10168060
> 
> 赞同：0
> 
> 时间：2012-04-16T02:27:35.947
> 
> 标签：html, css, opacity

基本上我有一个我希望背景透明的 div。

```
<div id="modSideTop"><div id="modSideTopText">This Text Must Not Be Transparent</div></div> 
```

modSideTop div 有一个通过 css 附加的背景图像。我需要的其余 css 是什么来保持文本正常和背景透明？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:37:01.470

使用[颜色](http://www.w3.org/TR/css3-color/#rgba-color)而不是[使用`rgba`](http://www.w3.org/TR/css3-color/#rgba-color). 例如 50% 半透明黑色：`background``opacity`

```
background: rgba(0, 0, 0, 0.5); 
```

**在 JSFiddle 上试试[。](http://jsfiddle.net/7pxrP/embedded/result,css/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:23:30.233

嗨，我提到的属性可以通过它增加和减少背景的不透明度，并且不会影响文本颜色，简单地看**CSS**，基本上你必须在背景和 alpa 中使用 rgb 颜色来获得不透明度。

背景：rgba（146,146,146,0.1）；

或查看示例：- [http://jsfiddle.net/8LFLd/3/](http://jsfiddle.net/8LFLd/3/)

# php - PHP将选择语句分配给下拉列表值

> ID：10168061
> 
> 赞同：0
> 
> 时间：2012-04-16T02:27:37.370
> 
> 标签：php, mysql

我有一个填充了数据库值的下拉列表。我想要实现的是为每个值分配一个选择语句。

![菜单](../Images/920faaef8450502ea2b781a6357abe1f.png)

**填充菜单代码**

```
<?php
require 'conn.php';

$filter=mysql_query("select distinct fuel_type from car");
while($row = mysql_fetch_array($filter)) {
$options .="<option>" . $row['fuel_type'] . "</option>";

$menu="<form id='filter' name='filter' method='post' action=''>
  <p><label>Filter</label></p>
    <select name='filter' id='filter'>
      " . $options . "
    </select>
</form>";
}
echo $menu;
?> 
```

现在此菜单将用于过滤汽车列表，并将放置在侧边栏上 ![汽车](../Images/2596889f06e6d01a754979f4c2afa7a9.png)

如何从下拉列表中为每个值分配不同的选择语句，例如； `select * from car where fuel_type = (dropdown list value selected)`无需提交表格。

也许类似于以下内容？

```
 if($_GET["filter"] == 'Petrol'){
$query=mysql_query("select * from car where fuel_type = 'Petrol'");
header("Location: cars.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:44:45.617

首先，当您构建选项标签时，将您希望在 SQL 查询中过滤的值分配给 value 属性：

```
$options .="<option value='".$row['fuel_type']."'>" . $row['fuel_type'] . "</option>"; 
```

其次，为您的表单和您的选择元素分配唯一的 ID。然后将表单提交操作分配给选择元素的 onchange 事件。

```
$menu="<form id='filterForm' name='filterForm' method='post' action=''>
  <p><label>Filter</label></p>
    <select name='filter' id='filter' onchange='document.getElementById("filterForm").submit()'>
      " . $options . "
    </select>
</form>";
} 
```

现在，当您更改选择选项时，将提交表单，并且选择的选项值将填充为选择元素#filter 的值。

在表单发布到的 php 页面上，检查带有 id #filter 的 select 元素的值以构建查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:38:11.283

你需要 javascript 来打开一个带有一些参数的 php 页面。

在 php 中，您从 post 或 get super globals 接收这些参数，然后有一个 switch 语句根据您收到的参数执行不同的查询。

关于“没有提交按钮”，您可以在 javascript 中设置一个侦听器以在值更改时提交表单或触发函数。因为它是一个下拉列表，所以是一个简单的内联 onmouseup="javascript:submitform();" 就足够了

# javascript - 如何将自定义消息处理程序与 Strophe 连接

> ID：10168062
> 
> 赞同：2
> 
> 时间：2012-04-16T02:27:42.923
> 
> 标签：javascript, jquery, xmpp, strophe

我在 Facebook 聊天系统上与 Strophe 合作，到目前为止，登录和发送消息都有效。

到目前为止，我可以在 Google Chrome Inspector 控制台中看到已注册传入消息，但是，我目前没有注册任何传入消息处理程序。

我试过了

```
conn.addHandler(AjaxIM.client.incoming, null, "chat");

-- and --

conn.addHandler(AjaxIM.client.incoming, null, "message", null, null, null); 
```

但这似乎没有任何作用。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T10:14:07.990

采用：

```
conn.addHandler(handler, null, 'message', 'chat'); 
```

请参阅精美的[文档](http://strophe.im/strophejs/doc/1.0.2/files2/strophe-js.html#Strophe.Connection.addHandler)；）

# jquery - 如何使用 jquery 删除隐藏字段数组

> ID：10168065
> 
> 赞同：1
> 
> 时间：2012-04-16T02:28:01.380
> 
> 标签：jquery, hidden-field

我将此作为表单的隐藏值：

```
<input type="hidden" name="times[]" value='{"date" : "April 12, 2012"}' />
<input type="hidden" name="times[]" value='{"date" : "April 13, 2012"}' />
<input type="hidden" name="times[]" value='{"date" : "April 14, 2012"}' /> 
```

使用 jquery，我如何创建一个链接，单击它可以删除上面的隐藏表单字段？所以说我点击一个链接，我希望点击删除上面的第二个隐藏表单字段，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:33:22.727

创造 -

```
 var $ip = $('<input>').attr({
    type: 'hidden',
    id: 'yourid',
    name: 'yourname',
   value: 'yourvalue' 
})
$(ip).appendTo('body'); 
```

然后删除 - 您可以在任何点击事件中添加它..

```
$ip.remove(); 
```

要删除所有隐藏字段，试试这个。您可以在任何点击事件中添加它..

```
$("input[type='hidden']").remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:37:14.950

这是一个通用函数，可用于删除与 json 编码值匹配的元素。

调用它`removeByJsonValue(':hidden',{date:"April 13, 2012"});`

```
removeByJsonValue(selector, data) { // data = {key:value, ...}
    $(selector).each(function(element) {
        var element_data = $.parseJSON($(element).val());
        var remove = true;
        $(data).each(function(key,value) {
            if (element_data[key] != value) {
                remove = false;
            }
        });
        if (remove) {
            $(element).remove();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T02:30:05.033

假设您只有三个隐藏字段并且按照确切的顺序，您可以

```
$('input[type=hidden]:eq(1)').remove(); 
```

[http://jsfiddle.net/vGLSd/](http://jsfiddle.net/vGLSd/)

`eq`文档[http://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

`remove()`文档[http://api.jquery.com/remove/](http://api.jquery.com/remove/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T02:33:59.413

如果您有如下链接：

```
<a href="#" id="remove">remove hidden</a> 
```

你的jQuery代码将是

```
$("#remove").on("click", function(e){
    e.preventDefault();
    console.log($("input[name='times[]']").eq(1).val());
    $("input[name='times[]']").eq(1).remove();
}); 
```

链接到 jsfiddle [http://jsfiddle.net/LUtSp/](http://jsfiddle.net/LUtSp/)

# java - 如何在 Java 中打印出 List 的所有元素？

> ID：10168066
> 
> 赞同：280
> 
> 时间：2012-04-16T02:28:17.833
> 
> 标签：java, list

我试图打印出 a 的所有元素`List`，但是它打印的是指针`Object`而不是值。

这是我的打印代码...

```
for(int i=0;i<list.size();i++){
    System.out.println(list.get(i));
} 
```

谁能帮助我为什么它不打印元素的值。

* * *

## 回答 #1

> 赞同：549
> 
> 时间：2012-04-16T03:30:48.017

以下内容很紧凑，避免了示例代码中的循环（并为您提供了漂亮的逗号）：

```
System.out.println(Arrays.toString(list.toArray())); 
```

但是，正如其他人指出的那样，如果您没有为列表中的对象实现明智的 toString() 方法，您将获得您正在观察的对象指针（实际上是哈希码）。无论它们是否在列表中，这都是正确的。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2012-04-16T02:43:15.403

这是一些关于打印出列表组件的示例：

```
public class ListExample {

    public static void main(String[] args) {
        List<Model> models = new ArrayList<>();

        // TODO: First create your model and add to models ArrayList, to prevent NullPointerException for trying this example

        // Print the name from the list....
        for(Model model : models) {
            System.out.println(model.getName());
        }

        // Or like this...
        for(int i = 0; i < models.size(); i++) {
            System.out.println(models.get(i).getName());
        }
    }
}

class Model {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

* * *

## 回答 #3

> 赞同：128
> 
> 时间：2014-06-08T19:25:55.957

从 Java 8 开始，List 继承了一个默认的“forEach”方法，您可以将它与方法引用“System.out::println”结合起来，如下所示：

```
list.forEach(System.out::println); 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2014-11-13T05:24:25.447

```
System.out.println(list);//toString() is easy and good enough for debugging. 
```

**[`toString()`](https://docs.oracle.com/javase/7/docs/api/java/util/AbstractCollection.html#toString%28%29)of[`AbstractCollection`](https://docs.oracle.com/javase/7/docs/api/java/util/AbstractCollection.html#toString%28%29) 将是干净和容易做到这一点**。`AbstractList`是 的子类`AbstractCollection`，**因此不需要 for 循环，也不需要 toArray()。**

> 返回此集合的字符串表示形式。字符串表示由集合元素的列表组成，按其迭代器返回的顺序排列，用方括号 ("[]") 括起来。相邻元素由字符“、”（逗号和空格）分隔。通过 String.valueOf(Object) 将元素转换为字符串。

如果您在列表中使用任何自定义对象，例如 Student ，您需要重写其`toString()`方法（重写此方法总是好的）以获得有意义的输出

请参见以下示例：

```
public class TestPrintElements {

    public static void main(String[] args) {

        //Element is String, Integer,or other primitive type
        List<String> sList = new ArrayList<String>();
        sList.add("string1");
        sList.add("string2");
        System.out.println(sList);

        //Element is custom type
        Student st1=new Student(15,"Tom");
        Student st2=new Student(16,"Kate");
        List<Student> stList=new ArrayList<Student>();
        stList.add(st1);
        stList.add(st2);
        System.out.println(stList);
   }
}

public  class Student{
    private int age;
    private String name;

    public Student(int age, String name){
        this.age=age;
        this.name=name;
    }

    @Override
    public String toString(){
        return "student "+name+", age:" +age;
    }
} 
```

输出：

```
[string1, string2]
[student Tom age:15, student Kate age:16] 
```

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2020-03-05T16:12:56.647

使用`String.join()` 例如：

```
System.out.print(String.join("\n", list)); 
```

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2016-05-23T03:29:29.113

Java 8 Streams 方法...

```
list.stream().forEach(System.out::println); 
```

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2012-04-16T02:30:25.877

列表中的对象必须已`toString`实现，以便它们打印对屏幕有意义的内容。

这是一个快速测试以查看差异：

```
public class Test {

    public class T1 {
        public Integer x;
    }

    public class T2 {
        public Integer x;

        @Override
        public String toString() {
            return x.toString();
        }
    }

    public void run() {
        T1 t1 = new T1();
        t1.x = 5;
        System.out.println(t1);

        T2 t2 = new T2();
        t2.x = 5;
        System.out.println(t2);

    }

    public static void main(String[] args) {        
        new Test().run();
    }
} 
```

当它执行时，打印到屏幕的结果是：

```
t1 = Test$T1@19821f
t2 = 5 
```

由于 T1 没有覆盖 toString 方法，它的实例 t1 打印出来的东西不是很有用。另一方面，T2 覆盖了 toString，所以我们控制它在 I/O 中使用时打印的内容，并且我们在屏幕上看到了一些更好的东西。

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2018-04-04T08:12:13.430

或者您可以简单地使用 Apache Commons 实用程序：

[https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#toString-java.lang.Object-](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html#toString-java.lang.Object-)

```
List<MyObject> myObjects = ...
System.out.println(ArrayUtils.toString(myObjects)); 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2017-12-10T05:03:34.833

考虑`List<String> stringList`可以使用**Java 8**结构以多种方式打印的 a：

```
stringList.forEach(System.out::println);                            // 1) Iterable.forEach
stringList.stream().forEach(System.out::println);                   // 2) Stream.forEach (order maintained generally but doc does not guarantee)
stringList.stream().forEachOrdered(System.out::println);            // 3) Stream.forEachOrdered (order maintained always)
stringList.parallelStream().forEach(System.out::println);           // 4) Parallel version of Stream.forEach (order not maintained)
stringList.parallelStream().forEachOrdered(System.out::println);    // 5) Parallel version ofStream.forEachOrdered (order maintained always) 
```

## 这些方法有何不同？

**第`Iterable.forEach`**[一种](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#fail-fast)方式（**_** _ `ConcurrentModificationException`_ **_** 如[文档](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)中所述`ArrayList`：

> 结构修改是添加或删除一个或多个元素或显式调整后备数组大小的任何操作；仅设置元素的值不是结构修改。

所以这意味着`ArrayList.forEach`设置值是允许的，没有任何问题。并且在并发收集的情况下，例如`ConcurrentLinkedQueue`迭代器将是[弱一致](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html#Weakly)的，这意味着`forEach`允许传入的操作甚至进行结构更改而`ConcurrentModificationException`不会引发异常。但是在这里，修改可能会或可能不会在该迭代中可见。

**第二种方法 ( `Stream.forEach`) -** 顺序未定义。虽然它可能不会发生在顺序流中，但规范并不能保证它。还要求该动作本质上是不干扰的。如[文档](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-)中所述：

> 此操作的行为是明确的非确定性的。对于并行流管道，此操作不能保证尊重流的遇到顺序，因为这样做会牺牲并行性的好处。

**第三种方法 ( `Stream.forEachOrdered`) -** 该动作将按照流的遭遇顺序执行。因此，只要订单很重要，就可以毫不犹豫地使用`forEachOrdered`。如[文档](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEachOrdered-java.util.function.Consumer-)中所述：

> 如果流具有定义的遇到顺序**，则按照流的遇到顺序**为此流的每个元素执行一个操作。

在迭代**同步集合**时，**第一种方法**将获取集合的锁一次，并将在所有调用操作方法中保持它，但在流的情况下，它们使用集合的拆分器，它不锁定并依赖于已经建立的非规则-干涉。如果在迭代期间修改了支持流的集合，`ConcurrentModificationException`则会抛出异常或可能出现不一致的结果。

**第四种方法（并行`Stream.forEach`）-** 如前所述，在并行流的情况下，不能保证遵守预期的相遇顺序。有可能在不同的线程中针对不同的元素执行操作，而`forEachOrdered`.

**第五种方法（并行`Stream.forEachOrdered`）-**将按源指定 的`forEachOrdered`顺序处理元素，而不管流是顺序的还是并行的。所以将它与并行流一起使用是没有意义的。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2018-10-07T06:00:47.057

我也遇到过类似的问题。我的代码：

```
List<Integer> leaveDatesList = new ArrayList<>();

.....inserted value in list....... 
```

**方式1：在for循环中打印列表**

```
for(int i=0;i<leaveDatesList.size();i++){
    System.out.println(leaveDatesList.get(i));
} 
```

**方式 2：在 forEach、for 循环中打印列表**

```
for(Integer leave : leaveDatesList){
    System.out.println(leave);
} 
```

**方式3：在java 8中打印列表**

```
leaveDatesList.forEach(System.out::println); 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2012-04-16T02:40:51.583

1.  您还没有指定列表包含哪种元素，如果它是[原始数据类型](http://en.wikipedia.org/wiki/Primitive_data_type)，那么您可以打印出元素。
2.  但是，如果元素是对象，那么正如 Kshitij Mehta 所提到的，您需要在该对象中实现（覆盖）方法“toString”——如果它尚未实现——并让它从对象中返回一些有意义的东西，例如：

    ```
    class Person {
        private String firstName;
        private String lastName;

        @Override
        public String toString() {
            return this.firstName + " " + this.lastName;
        }
    } 
    ```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-01-10T18:48:49.120

对于 String 数组的列表

```
list.forEach(s -> System.out.println(Arrays.toString((String[]) s ))); 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-02-12T14:49:20.297

For循环打印列表的内容：

```
List<String> myList = new ArrayList<String>();
myList.add("AA");
myList.add("BB");

for ( String elem : myList ) {
  System.out.println("Element : "+elem);
} 
```

结果 ：

```
Element : AA
Element : BB 
```

如果您想在一行中打印（仅供参考）：

```
String strList = String.join(", ", myList);
System.out.println("Elements : "+strList); 
```

结果 ：

```
Elements : AA, BB 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-07-23T16:14:25.930

`System.out.println(list);`为我工作。

这是一个完整的例子：

```
import java.util.List;    
import java.util.ArrayList;

public class HelloWorld {
     public static void main(String[] args) {
        final List<String> list = new ArrayList<>();
        list.add("Hello");
        list.add("World");
        System.out.println(list);
     }
} 
```

它将打印`[Hello, World]`.

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2020-01-17T16:01:07.890

这取决于存储在 中的对象类型`List`，以及它是否具有`toString()`方法的实现。`System.out.println(list)`应该打印所有标准的 java 对象类型（`String`,`Long`等`Integer`）。如果我们使用自定义对象类型，那么我们需要`override` `toString()`自定义对象的方法。

例子：

```
class Employee {
 private String name;
 private long id;

 @Override
 public String toString() {
   return "name: " + this.name() + 
           ", id: " + this.id();
 }  
} 
```

测试：

```
class TestPrintList {
   public static void main(String[] args) {
     Employee employee1 =new Employee("test1", 123);
     Employee employee2 =new Employee("test2", 453);
     List<Employee> employees = new ArrayList(2);
     employee.add(employee1);
     employee.add(employee2);
     System.out.println(employees);
   }
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-12-26T23:58:58.657

```
 list.stream().map(x -> x.getName()).forEach(System.out::println); 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2014-10-02T11:56:34.510

我写了一个转储函数，如果它没有覆盖 toString()，它基本上会打印出一个对象的公共成员。人们可以轻松地将其扩展为调用 getter。Java 文档：

> 使用以下规则将给定对象转储到 System.out：
> 
> *   如果 Object 是 Iterable，则转储其所有组件。
> *   如果 Object 或其超类之一覆盖 toString()，则转储“toString”
> *   否则，该方法会为 Object 的所有公共成员递归调用

```
/**
 * Dumps an given Object to System.out, using the following rules:<br>
 * <ul>
 * <li> If the Object is {@link Iterable}, all of its components are dumped.</li>
 * <li> If the Object or one of its superclasses overrides {@link #toString()}, the "toString" is dumped</li>
 * <li> Else the method is called recursively for all public members of the Object </li>
 * </ul>
 * @param input
 * @throws Exception
 */
public static void dump(Object input) throws Exception{
    dump(input, 0);
}

private static void dump(Object input, int depth) throws Exception{
    if(input==null){
        System.out.print("null\n"+indent(depth));
        return;
    }

    Class<? extends Object> clazz = input.getClass();
    System.out.print(clazz.getSimpleName()+" ");
    if(input instanceof Iterable<?>){
        for(Object o: ((Iterable<?>)input)){
            System.out.print("\n"+indent(depth+1));
            dump(o, depth+1);
        }
    }else if(clazz.getMethod("toString").getDeclaringClass().equals(Object.class)){
        Field[] fields = clazz.getFields();
        if(fields.length == 0){
            System.out.print(input+"\n"+indent(depth));
        }
        System.out.print("\n"+indent(depth+1));
        for(Field field: fields){
            Object o = field.get(input);
            String s = "|- "+field.getName()+": ";
            System.out.print(s);
            dump(o, depth+1);
        }
    }else{

        System.out.print(input+"\n"+indent(depth));
    }
}

private static String indent(int depth) {
    StringBuilder sb = new StringBuilder();
    for(int i=0; i<depth; i++)
        sb.append("  ");
    return sb.toString();
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2018-08-09T19:26:30.233

我现在正好在做这个...

```
List<Integer> a = Arrays.asList(1, 2, 3);
List<Integer> b = Arrays.asList(3, 4);
List<int[]> pairs = a.stream()
  .flatMap(x -> b.stream().map(y -> new int[]{x, y}))
  .collect(Collectors.toList());

Consumer<int[]> pretty = xs -> System.out.printf("\n(%d,%d)", xs[0], xs[1]);
pairs.forEach(pretty); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-07-07T12:36:11.063

您对 java 11 的问题的解决方案是：

```
String separator = ", ";
String toPrint = list.stream().map(o -> String.valueOf(o)).collect(Collectors.joining(separator));

System.out.println(toPrint); 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-11-08T15:26:09.450

尝试根据需要覆盖 toString() 方法，该元素将被打印。所以打印的方法可以是这样的：

```
for(int i=0;i<list.size();i++){
    System.out.println(list.get(i).toString());
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-06-15T11:31:02.600

```
public static void main(String[] args) {
        answer(10,60);

    }
    public static void answer(int m,int k){
        AtomicInteger n = new AtomicInteger(m);
        Stream<Integer> stream = Stream.generate(() -> n.incrementAndGet()).limit(k);
        System.out.println(Arrays.toString(stream.toArray()));
    } 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-09-20T12:33:41.810

你可以试试：

*   2D（或更多）

    System.out.println(Arrays.deepToString(list.toArray()));

*   一维

    System.out.println(Arrays.toString(list.toArray()))

* * *

## 回答 #23

> 赞同：-2
> 
> 时间：2017-02-27T22:59:59.603

```
 List<String> textList=  messageList.stream()
                            .map(Message::getText)
                            .collect(Collectors.toList());

        textList.stream().forEach(System.out::println);
        public class Message  {

        String name;
        String text;

        public Message(String name, String text) {
            this.name = name;
            this.text = text;
        }

        public String getName() {
            return name;
        }

      public String getText() {
        return text;
     }
   } 
```

# html - 如何将一个img放在另一个img之上

> ID：10168070
> 
> 赞同：0
> 
> 时间：2012-04-16T02:29:24.533
> 
> 标签：html, css, image, href

我试图在我的网站[Finegra.in 上将](http://www.finegra.in)一个放在另一个之上。这是该网站现在的屏幕截图：

![在此处输入图像描述](../Images/983dcfa3007c07c809ff8f75311e6f25.png)

我只希望“访问我们的 kickstarter 项目”img 就在这里： ![在此处输入图像描述](../Images/147938ffdc3617712f6a4c000f88af9b.png)

这是html和样式表：

```
<div id="page" class="hfeed">
    <header id="branding" role="banner">

            <!-- 
<nav id="access" role="navigation">
                <h3 class="assistive-text">Main menu</h3>
                                <div class="skip-link"><a class="assistive-text" href="#content" title="Skip to primary content">Skip to primary content</a></div>
                <div class="skip-link"><a class="assistive-text" href="#secondary" title="Skip to secondary content">Skip to secondary content</a></div>
                                <div class="menu"><ul><li class="current_page_item"><a href="http://www.finegra.in/" title="Home">Home</a></li></ul></div>
            </nav><!~~ #access ~~>
 -->

            <hgroup>
            <div>
                <a href="http://www.finegra.in"><img id="logo" alt="fine grain Logo" src="http://www.finegra.in/wp-content/uploads/2012/04/fineGRAINlogoGOOD-WEB.png">
</a>
<img id="headerimg" alt="The Sheffield Case" src="http://www.finegra.in/wp-content/uploads/2012/04/headerimg2.jpg">
<a href="http://www.kickstarter.com/projects/finegrain/17408941?token=364cb635"><img id="branding" alt="The Sheffield Case" src="http://www.finegra.in/wp-content/uploads/2012/04/checkOurProject.png">
</a>

            </div>
            <div id="site-generator">
                FineGrain LLC Copyright 2012\. All Rights Reserved  
            </div>
        </hgroup>
    </header><!-- #branding --> 
```

样式.css：

```
#branding {
    border-top: 0px solid #BBBBBB;
    padding-bottom: 10px;
    position: relative;
    z-index: 9999;
    background: none repeat scroll 0 0 #DADAD2;
}

#headerimg {
    width: 30% !important;
    width: 100% !important;
}

#branding img {
    margin-bottom: 20px;
    width: auto;
}

.one-column #page {
    max-width: 1500px;
}

.one-column #content {
    margin: 0;
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:04:58.330

假设您使用的是 jQuery，您可以在 DOM 就绪函数中为您的图像创建水印，并使其位置相对于图像绝对和计算。

```
<script type="text/javascript">

    // Watermark image, change the src with your image's url
    var watermark = '<img src="watermark.png" border="0" style="border:none; background-color:transparent; position:absolute; ';

    // Position relative to image inside:
    var insideTop = 20;
    var insideLeft = 50;

    $(document).ready(function () {
        $("img").each(function (ix, el) {
            var top = $(this).offset().top + insideTop;
            var left = $(this).offset().left + insideLeft;
            var imgWatermark = watermark + 'top:' + top + 'px; left:' + left + 'px;"/>';
            $("body").append(imgWatermark);
        });
    });

</script> 
```

如果您有带有水印的图像和没有水印的图像，请将属性 class="withWatermark" 添加到将具有的图像中，并将脚本中的 $("img") 替换为 $(".withWatermark") .

```
<img src="myimage.jpg" class="withWatermark" /> 
```

```
$(".withWatermark").each(function (ix, el) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:37:47.103

这样的事情怎么样？[http://jsfiddle.net/UtKbC/](http://jsfiddle.net/UtKbC/)

CSS：

```
.visit_project {
    position: absolute;
    top: 250px;
    left: 400px;
} 
```

HTML：

```
<a href="http://www.kickstarter.com/projects/finegrain/17408941?token=364cb635" class="visit_project"><img id="branding" alt="The Sheffield Case" src="http://www.finegra.in/wp-content/uploads/2012/04/checkOurProject.png">
</a> 
```

将标题图像包装在它自己的 div 中并根据该 div 包装器将 checkOurProject.png 图像设置为绝对值可能更明智。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T06:20:10.360

我认为您可以在 float 的帮助下通过简单的 css 轻松做到这一点：-

**CSS**

```
 #header {
    background: url("http://i.imgur.com/1nrC6.jpg");
    width:1040px;
    height:402px;
}

.logo {
    float:right;
    margin-top:200px;
} 
```

**HTML**

```
<div id="header">
<a href="#"><img class="logo" src="http://i.imgur.com/17oqa.png"border="0"/></a>
</div> 
```

看演示：- [http://jsfiddle.net/UtKbC/6/](http://jsfiddle.net/UtKbC/6/)

# html - 在不悬停时无法使 li 链接的颜色正确

> ID：10168076
> 
> 赞同：0
> 
> 时间：2012-04-16T02:30:05.763
> 
> 标签：html, css

我在悬停和所有其他 syling 作品中得到白色，它只是在它的静态位置它仍然具有标准颜色。我看了一遍又一遍，就是看不出来！

的CSS

```
 .MainMenu li{
display: inline;
margin-left: 0px;
text-decoration:none;
height: 35px;
color: #ffffff;
}
.MainMenu :link{
text-decoration:none;
margin-left: 0px;
height: 35px;
font-size: 24px;
padding-top:10px;
padding-bottom:10px;
padding-left: 5px;
padding-right: 5px;
color: #ffffff;
}
.MainMenu :hover {
background: #34a4f8;
text-decoration: none;
height: 35px;
color: white;
}
.MainMenu {
padding-left:0px;
}
p.MainMenu {
color:#ffffff;
} 
```

html

```
<p class='MainMenu'>
<ul class="MainMenu">
  <li><a href="">Home</a></li>
  <li><a href="">Gallery</a></li>
  <li><a href="">Contact Us</a></li>
</ul>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:20:07.773

为了回应@mrtsherman 的评论，目前尚不清楚您想要什么。

但这将有助于您的测试，我相信：代替`<a href="">`，尝试使用`<a href="#">`.

# c++ - 为什么 size_t 是无符号的？

> ID：10168079
> 
> 赞同：64
> 
> 时间：2012-04-16T02:30:25.203
> 
> 标签：c++, unsigned-integer, size-t

Bjarne Stroustrup 在 C++ 编程语言中写道：

> 无符号整数类型非常适合将存储视为位数组的用途。使用 unsigned 而不是 int 来获得更多位来表示正整数几乎不是一个好主意。通过声明变量 unsigned 来确保某些值是正数的尝试通常会被隐式转换规则打败。

**size_t**似乎是无符号的“以获得更多位来表示正整数”。那么这是一个错误（或权衡）吗？如果是，我们是否应该尽量减少在我们自己的代码中使用它？

Scott Meyers 的另一篇相关文章[在这里](http://www.aristeia.com/Papers/C++ReportColumns/sep95.pdf)。总而言之，他建议不要使用无符号接口，无论该值是否始终为正。换句话说，**即使负值没有意义，也不一定要使用无符号数。**

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-16T04:00:20.463

`size_t`由于历史原因未署名。

在具有 16 位指针的体系结构上，例如“小型”模型 DOS 编程，将字符串限制为 32 KB 是不切实际的。

出于这个原因，C 标准要求（通过所需的范围）`ptrdiff_t`、带符号的对应物`size_t`和指针差异的结果类型实际上是 17 位。

这些原因仍然适用于嵌入式编程世界的某些部分。

但是，它们不适用于现代 32 位或 64 位编程，其中更重要的考虑是 C 和 C++ 不幸的隐式转换规则使无符号类型成为错误吸引子，当它们用于数字时（和因此，算术运算和幅度比较）。事后看来，我们现在可以看到 20-20 的决定采用那些`string( "Hi" ).length() < -3`实际上得到保证的特定转换规则的决定是相当愚蠢和不切实际的。然而，这个决定意味着在现代编程中，对数字采用无符号类型有严重的缺点，没有任何优点——除了满足那些发现`unsigned`是一个自我描述的类型名称而没有想到的人的感受`typedef int MyType`。

总结起来，这不是一个错误。出于当时非常合理、实用的编程原因，这是一个决定。它与将期望从像 Pascal 这样的边界检查语言转移到 C++ 无关（这是一个谬论，但非常普遍，即使其中一些人从未听说过 Pascal）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-16T02:32:01.350

`size_t`是`unsigned`因为负尺寸没有意义。

（来自评论：）

这与其说是确保，不如说是说明是什么。您最后一次看到大小为 -1 的列表是什么时候？过分遵循这个逻辑，你会发现 unsigned 根本不应该存在，也不应该允许位操作。–[极客龙](https://stackoverflow.com/users/643977/geekosaur)

更重要的是：由于您应该考虑的原因，地址没有签名。大小是通过比较地址生成的；将地址视为已签名会做很多错误的事情，并且使用签名值作为结果会丢失数据，而您对 Stroustrup 引用的阅读显然认为可以接受，但实际上并非如此。也许您可以解释一下否定地址应该做什么。–[极客龙](https://stackoverflow.com/users/643977/geekosaur)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-20T20:28:52.570

使索引类型无符号的一个原因是为了与 C 和 C++ 对半开区间的偏好对称。如果您的索引类型将是无符号的，那么将您的大小类型也设置为无符号会很方便。

* * *

在 C 中，您可以有一个指向数组的指针。有效指针可以指向数组的任何元素或数组末尾之后的一个元素。它不能指向数组开头之前的一个元素。

```
int a[2] = { 0, 1 };
int * p = a;  // OK
++p;  // OK, points to the second element
++p;  // Still OK, but you cannot dereference this one.
++p;  // Nope, now you've gone too far.
p = a;
--p;  // oops!  not allowed 
```

C++ 同意并将这个想法扩展到迭代器。

反对无符号索引类型的论据经常会举出一个从后到前遍历数组的例子，代码通常如下所示：

```
// WARNING:  Possibly dangerous code.
int a[size] = ...;
for (index_type i = size - 1; i >= 0; --i) { ... } 
```

此代码*仅*在`index_type`有符号时才有效，它用作索引类型应该被签名的参数（并且，通过扩展，大小应该被签名）。

该论点没有说服力，因为该代码是非惯用的。观察如果我们尝试用指针而不是索引重写这个循环会发生什么：

```
// WARNING:  Bad code.
int a[size] = ...;
for (int * p = a + size - 1; p >= a; --p) { ... } 
```

哎呀，现在我们有未定义的行为！忽略当`size`为 0 时的问题，我们在迭代结束时会出现问题，因为我们生成了一个无效指针，该指针指向第一个元素之前的元素。即使我们从未尝试取消引用该指针，这也是未定义的行为。

因此，您可以争辩通过更改语言标准来解决此问题，以使其合法地拥有指向第一个元素之前的元素的指针，但这不太可能发生。半开区间是这些语言的基本组成部分，所以让我们编写更好的代码。

一个正确的基于指针的解决方案是：

```
int a[size] = ...;
for (int * p = a + size; p != a; ) {
  --p;
  ...
} 
```

许多人发现这令人不安，因为减量现在在循环体中而不是在标头中，但是当您的 for 语法主要设计用于通过半开间隔的前向循环时，就会发生这种情况。（反向迭代器通过推迟递减来解决这种不对称性。）

现在，以此类推，基于索引的解决方案变为：

```
int a[size] = ...;
for (index_type i = size; i != 0; ) {
  --i;
  ...
} 
```

无论`index_type`是有符号还是无符号，这都有效，但无符号选择会产生更直接映射到惯用指针和迭代器版本的代码。无符号还意味着，与指针和迭代器一样，我们将能够访问序列的每个元素——我们不会放弃一半的可能范围来表示无意义的值。虽然这在 64 位世界中不是一个实际问题，但在 16 位嵌入式处理器或为大量范围内的稀疏数据构建抽象容器类型时可能是一个非常现实的问题，仍然可以提供与本机容器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-25T14:34:37.343

另一方面 ...

**误区 1**： `std::size_t`未签名是因为不再适用的遗留限制。

这里通常提到两个“历史”原因：

1.  `sizeof`Returns `std::size_t`，自 C 时代以来一直未签名。
2.  处理器的字长更小，因此挤出额外的范围很重要。

但是，这些原因，尽管已经很老了，但实际上都没有成为历史。

`sizeof`仍然返回一个`std::size_t`仍然未签名的。如果你想与`sizeof`标准库容器互操作，你将不得不使用`std::size_t`.

替代方案都更糟：您可以禁用有符号/无符号比较警告和大小转换警告，并希望这些值始终在重叠范围内，以便您可以忽略使用不同类型的潜在错误可能引入。或者你可以做*很多*范围检查和显式转换。或者您可以通过巧妙的内置转换引入自己的尺寸类型以集中范围检查，但没有其他库会使用您的尺寸类型。

尽管大多数主流计算都是在 32 位和 64 位处理器上完成的，但即使在今天，C++ 仍在嵌入式系统中的 16 位微处理器上使用。在那些微处理器上，拥有一个可以表示内存空间中任何值的字大小的值通常非常有用。

我们的新代码仍然需要与标准库进行互操作。如果我们的新代码使用有符号类型，而标准库继续使用无符号类型，我们会让每个必须同时使用这两种类型的消费者变得更加困难。

**误区2**：你不需要额外的一点。（AKA，当你的地址空间只有 4GB 时，你永远不会有一个大于 2GB 的字符串。）

大小和索引不仅仅用于内存。您的地址空间可能有限，但您可能会处理比地址空间大得多的文件。虽然您可能没有超过 2GB 的字符串，但您可以轻松地拥有超过 2GB 的位组。并且不要忘记为稀疏数据设计的虚拟容器。

**误区 3**：您始终可以使用更广泛的有符号类型。

不总是。确实，对于一个或两个局部变量，您可以使用 a `std::int64_t`（假设您的系统有一个）或 a`signed long long`并且可能编写完全合理的代码。（但您仍然需要一些显式强制转换和两倍的边界检查，否则您将不得不禁用一些编译器警告，这些警告可能会提醒您代码中其他地方的错误。）

但是，如果您要构建一个大型索引表怎么办？*当您只需要一个位*时，您真的需要为每个索引增加两个或四个*字节*吗？即使您有足够的内存和现代处理器，将表扩大一倍也可能对引用的局部性产生有害影响，并且您的所有范围检查现在都是两步的，从而降低了分支预测的有效性。如果你*没有*所有的记忆怎么办？

 ****误解 4**：无符号算术令人惊讶且不自然。

这意味着有*符号*算术并不令人惊讶或更自然。而且，也许是在从数学角度思考时，所有基本算术运算都在所有整数的集合上封闭。

但是我们的计算机不能处理整数。它们使用整数的无穷小部分。我们的有符号算术在所有整数的集合上不是封闭的。我们有上溢和下溢。对许多人来说，这太令人惊讶和不自然，他们大多只是忽略它。

这是错误：

```
auto mid = (min + max) / 2;  // BUGGY 
```

如果`min`和`max`被签名，总和可能会溢出，这会产生未定义的行为。我们大多数人经常会错过这些类型的错误，因为我们忘记了加法不是封闭在有符号整数集上的。我们侥幸逃脱，因为我们的编译器通常会生成一些合理的代码（但仍然令人惊讶）。

如果`min`和`max`是无符号的，总和仍可能溢出，但未定义的行为消失了。你仍然会得到错误的答案，所以它仍然令人惊讶，但并不比使用有符号整数更令人惊讶。

真正的 unsigned 惊喜来自于减法：如果你从一个较小的 unsigned int 中减去一个较大的 unsigned int，你最终会得到一个很大的数字。这个结果并不比你除以 0 更令人惊讶。

即使您可以从所有 API 中消除无符号类型，如果您处理标准容器或文件格式或有线协议，您仍然必须为这些无符号“惊喜”做好准备。是否真的值得在您的 API 中添加摩擦以仅“解决”部分问题？**

# windows - 在 .bat 脚本中动态提供文件名以通过 PGP 进行加密

> ID：10168083
> 
> 赞同：1
> 
> 时间：2012-04-16T02:31:28.680
> 
> 标签：windows, batch-file, ftp, pgp

我们需要监视一个目录，如果有任何文件进入，我们需要使用 PGP 加密该文件并将其放在特定目录中的 FTP 服务器上。这可以通过批处理脚本来实现吗？如果是的话，有人可以告诉我怎么做。我是脚本新手。

由于某些问题，我们用来实现这一切的工具突然无法通过命令提示符执行 PGP。它过去很多年都可以工作，但突然停止工作以执行 PGP 命令。所以我们现在手动进行。我们希望自动化这个过程。任何帮助是极大的赞赏。

# mysql - 试图从 phpMyAdmin 中删除数据库但失败了。现在我什么也做不了

> ID：10168086
> 
> 赞同：0
> 
> 时间：2012-04-16T02:32:24.170
> 
> 标签：mysql, phpmyadmin, drop-database

我编写了一个与我的数据库交互的 java 应用程序，但它出现了问题。我不得不删除数据库，因为我的应用程序做出了太多错误的更改。在我运行程序之前，我很小心并备份了我的数据库，所以我开始删除整个数据库，以恢复到原来的状态。

我使用 phpMyAdmin 删除了有问题的数据库，但 20 分钟后似乎什么也没发生，所以我强迫浏览器关闭并重新加载 PMA。不出所料，我想删除的数据库仍然显示在 PMA 的数据库列表中，但是当我尝试访问它时，浏览器变为空白并挂起。我尝试从终端访问数据库（我使用的是 OS X 10.4.11），当我输入“use name_of_database”时，终端本身也挂起。我还尝试在终端中再次删除数据库，但这也挂起。

我现在如何摆脱这个数据库？我总是可以用不同的名称重新加载我的数据库，但是这个仍然会在这里，我真的想摆脱它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:46:49.657

您需要重新启动数据库服务器...顺便说一句，在其上运行 java 代码时发生了这种情况吗？想知道您是否忘记关闭连接，或者您是否没有 finally 块来关闭数据库连接并且您的程序崩溃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T14:47:02.987

如果您还没有使用 SSH 登录到 mySQL 来删除数据库..

> sudo mysql -u yourmysqlusername -p （提示时输入密码。）
> 
> mysql> 显示数据库；（找到你的数据库）
> 
> mysql>使用你的数据库TODROP；（更改数据库）
> 
> mysql> 删除数据库 YOURDATABASETODROP; （你完成了。）

# android - 我可以设置 viewpager 的项目宽度吗？

> ID：10168087
> 
> 赞同：6
> 
> 时间：2012-04-16T02:32:24.973
> 
> 标签：android, android-widget

我希望我可以在 viewpager 的页面中显示 3 个项目，但现在我只能设置 viewpager 的填充值和边距值，所以它只能在 viewpager 的页面中显示一个项目。如何设置项目宽度？我想如果我可以设置更小的项目宽度，viewpager 将在页面中显示更多项目。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-01-04T13:11:49.540

# 快速回答

您想要的是覆盖您为此所做`getPageWidth`的`PagerAdapter`实现`ViewPager`。

例如，将其设置为`0.8f`将使单个页面仅覆盖 viewpagers 宽度的 80%，以便下一页和/或上一页的一部分可见。

```
@Override
public float getPageWidth(final int position) {
    return 0.8f;
} 
```

更多信息，请访问[https://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageWidth(int)](https://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageWidth(int))

# 其他备注

另请注意，负边距只会导致单独的页面相互重叠。页边距用于定义每页之间的间距。

如果没有配置替代 pageWidth（没有设置器，只有覆盖），默认情况下它将覆盖 100%，除非拖动，否则其他页面的任何部分都不可见。

# 代码示例

可以在这里找到对可能的非常好的概述[https://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html](https://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html)

布局中的视图寻呼机

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</android.support.v4.view.ViewPager> 
```

内联配置适配器实现的示例，这将进入 onCreate 或 onViewCreated 方法：

```
// get a reference to the viewpager in your layout
ViewPager mViewPager = (ViewPager) findViewById(R.id.viewpager);
// this margin defines the space between the pages in the viewpager mViewPager.setPageMargin(context.getResources().getDimensionPixelSize(R.dimen.margin_normal));
// setting the adapter on the viewpager, this could/should be a proper Adapter implementation in it's own class file instead
mViewPager.setAdapter(new PagerAdapter() {

    // just example data to show, 3 pages
    String[] titles = {"Eins", "Zwei", "Drei"};
    int[] layouts = {R.layout.layout1, R.layout.layout2, R.layout.layout3};

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        LayoutInflater inflater = LayoutInflater.from(MainActivity.this);
        // here you can inflate your own view and dress up
        ViewGroup layout = (ViewGroup) inflater.inflate(layouts[position], container, false);
        container.addView(layout);
        return layout;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        container.removeView((View)object);
    }

    @Override
    public float getPageWidth(final int position) {
        return 0.8f;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return titles[position];
    }

    @Override
    public int getCount() {
        return layouts.length;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }
}); 
```

基于[https://newfivefour.com/android-viewpager-simple-views.html的示例代码](https://newfivefour.com/android-viewpager-simple-views.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T02:40:38.790

您是否尝试将页边距设置为负值，请参阅[`setPageMargin(int)`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setPageMargin%28int%29)？如果我没记错的话，我读到有人意识到与您所描述的类似。

或者，您可以看看使用 a[`Gallery`](http://developer.android.com/reference/android/widget/Gallery.html)代替，尽管我不得不承认我不是它们的忠实粉丝，因为它们似乎不太灵活且更容易出错。

# jquery - jQuery FadeOut() 函数在 FF 中没有做任何事情

> ID：10168089
> 
> 赞同：0
> 
> 时间：2012-04-16T02:32:53.533
> 
> 标签：jquery, fade

我正在构建的婚礼 RSVP 网站有以下 HTML：

```
<!doctype html>
<html>
    <head>
        <title>Amy and Scott's Wedding - RSVP Page</title>
        <link href="http://www.asjwedding.com/style/base.css" rel="stylesheet">
        <link href="http://www.asjwedding.com/style/user.css" rel="stylesheet">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://www.asjwedding.com/script/formControl.js"></script>

    </head>
    <body>
        <div id="doc">
            <div id="content">
                <div class="text-content">
                    <h1>Welcome!</h1>
                    <div class="question">
                        ... omitted for brevity ...
                                        <div id="messageArea" class="response">
                                        </div>
                                        <div class="submitButton">
                      <input type="submit" value="Submit" onclick="validateForm();">
                      </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html> 
```

而且，我有以下使用 jQuery 的 javascript：

```
function hideMessage() {
  alert("Fading...");
  $("#messageArea").fadeOut();
} 
```

但是，由于某种原因，褪色不起作用，我不确定为什么。如果我在 hideMessage() 中执行 hide()，它可以正常工作，但如果我使用 fadeOut()，则什么也不会发生。（实际上，这不是真的......它确实给了我警报，但它实际上并没有褪色）。

我在 Linux 上使用 Firefox Nightly (14.0)，但 Android 上的 Firefox Nightly**确实**有效……我不完全确定为什么它不能在桌面上运行。

有人可以帮助我吗？

**编辑**：

我拥有的其他 javascript 函数的一些代码：

```
function validateForm() {
  // Verify at least one of the rsvp options is selected.
  if (!$("#radNone").attr("checked") &&
      !$("#radWedding").attr("checked") &&
      !$("#radReception").attr("checked") &&
      !$("#radBoth").attr("checked")) {
     sendMessage("Please choose one of the RSVP options.");
        return;
  }
}

function hideMessage() {
  alert("Fading...");
  $("#messageArea").fadeOut();
}

function sendNegativeMessage(message) {
  $("#messageArea").css('background-color', '#FF6666');
  $("#messageArea").html(message);
  $("#messageArea").show();
}

function sendMessage(message, type) {
  setTimeout(hideMessage, 1000);

  $('#messageArea').css('opacity', '1.0');
  // Type can be 'positive', 'negative.
  if (!type) {
    // Assume it's negative.
    sendNegativeMessage(message);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:44:20.890

您需要确保在加载 DOM 后调用它（否则警报将正确触发，但 DOM 元素将不存在，当您尝试操作它时会导致问题）。尝试这个：

```
function hideMessage() {
    alert("Fading...");
        $("#messageArea").fadeOut();
    }

$(function() {
    hideMessage();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:41:13.273

嗯......奇怪，但现在它似乎工作得很好。我实际上并没有改变任何东西（我知道人们会这么说，但在这种情况下，甚至文件的时间戳都是在我问这个问题之前）。

我一定是在看旧版本的网站……或者什么……

# events - 为什么我不能从我自己的 iOS 应用程序将图片上传到我粘贴的事件？

> ID：10168093
> 
> 赞同：2
> 
> 时间：2012-04-16T02:33:31.430
> 
> 标签：events, facebook-graph-api, image, facebook-ios-sdk

我遇到了一个奇怪的问题，当我从 web 端向过去的事件添加图片时，一切正常，但是当我从自己的 iOS 应用程序中这样做时，也不例外，我只是看不到新添加的图像。我们不能从移动客户端将照片添加到过去的事件中吗？谁都知道。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:image,@"source", nil];
[facebookDelegate requestWithGraphPath:[NSString stringWithFormat:@"%@/photos",self.eventID] andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

没有错误，但我只是看不到上传的图片。

还有一个问题，如何用graph api设置事件的头像？我使用了以下代码：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:image,@"picture", nil];
[facebookDelegate requestWithGraphPath:self.eventID andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

它也不起作用。更重要的是，我想知道我们是否可以从网络上传图片，所以我们只提供图片链接到 facebook 吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:39:50.610

我想你现在可以试试第一个。它现在工作

# configuration - 使用 Play 部署资源！框架

> ID：10168094
> 
> 赞同：0
> 
> 时间：2012-04-16T02:33:34.827
> 
> 标签：configuration, playframework

我的 Web 应用程序使用 MyBatis ORM。作为其中的一部分，我有典型的 mybatis.xml 配置文件以及我的 SQL 的映射器。运行 Play 时！服务器，包含这些资源的目录不会被拾取并添加到类目录中。

有没有办法配置 Play！将此目录包含在其加载/部署过程中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:47:23.927

使用 Play 1.x 最简单的方法是将文件放在类路径中的 conf 目录中

# java - Spring AbstractTransactionalDataSourceSpringContextTests - 在每次 Junit 测试后防止数据库回滚

> ID：10168096
> 
> 赞同：0
> 
> 时间：2012-04-16T02:33:49.247
> 
> 标签：java, spring, dbunit

我有一个扩展 AbstractTransactionalDataSourceSpringContextTests 的测试类。

我没有写这个类，需要做一个小改动。我想看看如果我在每次测试后阻止重新创建测试数据库（使用 DbUnit）会发生什么。

我试过玩以下几行：

```
@Override
protected void onSetUpBeforeTransaction() throws Exception {
    initialisingTables.create("Init");
}

@Override
protected void onTearDownAfterTransaction() throws Exception {
    deleteTables(true);
    deleteTables(false);
} 
```

但似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:25:47.560

我想你只需要注释你的测试方法

```
@Rollback(false) 
```

或者像这样的测试类：

```
@TransactionConfiguration(transactionManager="txMgr", defaultRollback=false) 
```

见：[10.3.3。JDBC 测试支持](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html#integration-testing-support-jdbc)

# algorithm - 如何以及何时在后缀树中创建后缀链接？

> ID：10168097
> 
> 赞同：28
> 
> 时间：2012-04-16T02:33:57.940
> 
> 标签：algorithm, suffix-tree

谁能给我一个关于如何以及何时在后缀树中创建后缀链接的示例？

如果我的字符串是`ABABABC`，但如果这样更好，请使用不同的示例。

希望给一些图片来说明每一步。

非常感谢。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-16T05:08:50.527

要理解这一点，首先回想一下后缀树中存在三种节点：

*   根
*   内部节点
*   叶节点

在下图中，它是 的后缀树`ABABABC`，黄色圆圈是**根**，灰色、蓝色和绿色是**内部节点**，黑色小圆圈是**叶子。**

![](../Images/8f0aa89d1238342ff586155f77c843a1.png)

有两件重要的事情需要注意：

*   **内部节点总是有超过 1 个出边**。也就是说，内部节点标记了树中发生*分支*的那些部分。

*   分支发生在涉及**重复字符串**的任何地方，并且仅存在于那里。对于任何内部节点 X，从根到 X 的字符串在输入字符串中出现的次数必须至少与*来自 X的****出边****一样多***。**

 ****示例：**通向蓝色节点的字符串是`ABAB`. 实际上，这个字符串在输入字符串中出现了两次：位置 0 和位置 2。这就是蓝色节点存在的原因。

**现在关于后缀链接：**

1.  如果通向某个内部节点 X的字符串**s长于 1 个字符，则****减去第一个字符的相同字符串** （称为**s [-1]**）也必须在树中（毕竟它是后缀树，所以后缀它的任何字符串也必须在树中）。

    **示例：**让 s= `ABAB`，通向蓝色节点的字符串。然后在删除第一个字符后， s [-1]是`BAB`。事实上，该字符串也在树中找到。它通向绿色节点。

2.  如果某个字符串**s**指向一个内部节点，那么它的缩短版本 s [-1也] **必须**指向一个内部节点（称为 X [-1]）。为什么？因为**s**必须在输入字符串中至少出现两次，所以**s [-1]**必须至少出现多次（因为它是**s 的**一部分：在**s**出现的任何地方， **s [-1]**也必须出现）。但是如果**s [-1]** 在输入字符串中出现多次，那么它必须有一个内部节点。

3.  **在任何这种情况下，将 X 连接到 X [-1]的特殊链接是后缀链接。**

**注意：**由于上面的 (1) 和 (2)，**每个**内部节点 X 如果从根到 X 的标签超过 1 个字符，则**必须**具有到另一个内部节点的后缀链接。

**例子：**

![](../Images/e7db77493bfa86df7a32e58e398dc717.png)

这是和以前一样的后缀树；虚线表示后缀链接。如果您从蓝色节点开始并从那里跟随后缀链接（从蓝色到绿色，到第一个灰色，再到第二个灰色），并查看从根到每个节点的字符串，您将看到：

```
 ABAB   ->    BAB    ->    AB    ->    B
(blue)      (green)     (gray1)     (gray2) 
```

这就是为什么它们被称为**后缀链接**（整个序列称为**后缀链**）。

**它们有什么用？**

它们对许多事情都有好处。[但是，它们在Ukkonen 的后缀树构造算法中](https://stackoverflow.com/a/9513423/777186)扮演着特殊的角色，特别是在**规则 3**中描述的：在某个点 X 处插入某些后缀**s**的最后一个字符后，该算法需要插入后缀**s的最后一个字符[-1]**在 O(1) 时间内。为此，它使用后缀链接直接跳转到 X [-1]位置并进行插入。

**但是，请注意**，没有必要将后缀链接放在后缀树中。它们不是后缀树定义的一部分——它们只是一些构造或使用后缀树的算法使用的特殊链接。

* * *

**关于单字符节点：**如果内部节点 X 的字符串（即从根到 X 的路径上的字符串）仅包含一个字符怎么办？根据上面的定义，X 没有后缀链接。但是，您可以假设如果它有一个后缀链接，它将指向根节点。此外：根据上述定义，如果内部节点没有后缀链接，则它必须是单字符节点，因此您始终可以假设，如果内部节点不存在后缀链接，则它必须是单字符节点。字符节点，因此表示s [-1]后缀的节点就是根节点。（在这种情况下，某些算法实际上可能会添加指向根节点的显式后缀链接。）感谢 j_random_hacker 对此的评论。**

# scala - 将可变长度参数传递给另一个期望相同的函数？

> ID：10168101
> 
> 赞同：6
> 
> 时间：2012-04-16T02:34:26.263
> 
> 标签：scala, variadic-functions

如何在 Scala 中正确编码？

```
def myFun(strings: String*) = {
  // do something...
}

def myWraper(strings: String*) = {
  // do something else and then call myFun with the dame input
  myFun(strings)
} 
```

我试过放一个星号

```
def myWraper(strings: String*) = {
  // do something else and then call myFun with the dame input
  myFun(strings*)
} 
```

但这似乎不起作用...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T02:40:27.740

试试这个：

```
 myFun(strings: _*) 
```

您需要告诉它`strings`在可变参数中拆分。

# ios - 在 UIButton 中，setImage 和 setBackgroudnImage 的内容 id 不同，它旋转了 90 度

> ID：10168102
> 
> 赞同：1
> 
> 时间：2012-04-16T02:34:47.807
> 
> 标签：ios, uiimage, uibutton, rotation, setbackground

我已经对 UIButton 进行了测试，该按钮应该显示来自相机的捕获缓冲区，所以我将为 UIButton 设置图像和背景图像。从相机捕获的数据中，我设置了图像和背景图像，图像显示是正确的，但是当我按下按钮时，背景图像已经旋转了 90 度。测试代码是：

```
NSData *imagedata = [AVCaptureStillImageOutput jpegStillImageNSDataRepesentation:buffer];
UIImage *image = [[UIImage alloc] initWithData:imagedata];
[galleryBtn setImage:image forState:UIControlStateNormal];
[galleryBtn setBackgroundImage:image forState:UIControlStateNormal]; 
```

但是当我从 png 数据创建 UIImage 时，显示是正确的并且没有旋转。

```
UIImage *image = [UIImage imageNamed:@"0.png"]; 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T20:00:09.890

解决方案是设置突出显示的图像状态（以及正常），如下所示：

```
[galleryBtn setImage:image forState:UIControlStateHighlighted];
[galleryBtn setImage:image forState:UIControlStateNormal]; 
```

尽管这确实隐藏了默认情况下在印刷过程中发生的任何颜色突出显示。

# c# - 检索 SQL 行并设置为字符串

> ID：10168103
> 
> 赞同：0
> 
> 时间：2012-04-16T02:34:59.560
> 
> 标签：c#, .net, visual-studio-2010

我对 C# 有点陌生 - 我在我的应用程序 web.config 中设置了一个名为“ApplicationServices”的连接字符串操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T02:39:36.230

这是完整的解释。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)

```
//Taken from MSDN
private static void ReadOrderData(string connectionString)
{
    string queryString =
        "SELECT OrderID, CustomerID FROM dbo.Orders;";
    using (SqlConnection connection = new SqlConnection(
               connectionString))
    {
        SqlCommand command = new SqlCommand(
            queryString, connection);
        connection.Open();
        SqlDataReader reader = command.ExecuteReader();
        try
        {
            while (reader.Read())
            {
                Console.WriteLine(String.Format("{0}, {1}",
                    reader[0], reader[1]));
            }
        }
        finally
        {
            // Always call Close when done reading.
            reader.Close();
        }
    }
} 
```

您还可以使用 ORM，例如 LINQ2SQL [http://codesamplez.com/database/linq-to-sql-c-sharp-tutorial](http://codesamplez.com/database/linq-to-sql-c-sharp-tutorial)

**编辑：**

如何调试...

下面是一些关于如何在 Visual Studio 中使用调试功能的链接。

[http://msdn.microsoft.com/en-us/library/ms165053.aspx](http://msdn.microsoft.com/en-us/library/ms165053.aspx) http://msdn.microsoft.com/en-us/library/k0k771bt(v=vs.71).aspx [http://www .dotnetperls.com/debugging](http://www.dotnetperls.com/debugging)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:41:41.203

如果您打算编写一个返回单个值的查询，您应该看看**ExecuteScalar**。有关如何从数据库中检索值并将其设置为变量的快速演示，请参阅此示例：

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

# python - 无法使用 Windows 服务器使 SVN 预提交脚本失败

> ID：10168108
> 
> 赞同：2
> 
> 时间：2012-04-16T02:35:45.200
> 
> 标签：python, svn, batch-file, pre-commit-hook, pre-commit

我正在编写一个 SVN pre-commit.bat 文件，该文件调用 Python 脚本来查询我们的问题跟踪系统，以确定用户提供的问题跟踪 ID 是否处于正确状态（例如“打开”状态）并与权限相关联项目。SVN 服务器正在运行 Windows（我认为是 2003 服务器 - 如果有问题，我可以与我们的 IT 小组联系......）。

问题是我似乎无法使 SVN 提交失败*；它总是成功的。AFAIK Python 脚本正在做它应该做的事情；它调用“sys.exit(1)”表示失败（调用“sys.exit(0)”表示成功）。对于 .bat 文件，我在这个论坛中改编了一些据说可以工作的例子，但到目前为止，还没有运气。这是稍微简化的 .bat 文件，

```
@echo off

set repos=%1 
set transaction=%2 
set proj=ferry

\Python26\python svn_sync.py -s --repos=%repos% --transaction=%transaction% --project=%proj% 

IF %ERRORLEVEL% GTR 0 (GOTO err) else exit 0 

REM This should return a failure to Subversion, but does not
:err
 echo 1>&2  
 echo Your commit has failed due to invalid PR or PR state. 1>&2  
 echo Thanks 1>&2
exit 1 
```

我再次知道脚本正在运行（即不是服务器上的环境变量问题），并且`sys.exit(1)`代码正在被命中。此外，我很确定“err”函数正在运行，仅仅是“退出 1”返回码被 SVN 忽略了吗？

*注：不完全正确；我提交失败的唯一方法是 Python 脚本出现运行时错误。但是，在这种情况下，生成故意的运行时错误不是可接受的解决方法。

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:14:36.530

尝试更改`exit 1`为`exit /b 1`. `exit`将退出命令解释器（cmd.exe）；`exit /b`将退出当前的批处理脚本，但不会退出命令解释器。

`exit 1`可能正在关闭运行预提交脚本的命令解释器，因此如果它也在同一个命令解释器下运行，则退出代码对 SVN 不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T18:24:41.587

感谢您的建议，但是我找到了解决方案。

早些时候我说服自己不是这样，但错误实际上是在 Python 脚本中。本质上，当我认为“sys.exit(1)”正在执行时，“sys.exit(0)”正在执行。

下面我稍微改进了之前 .bat 文件中的 echo 语句中的注释，我可以确认这些确实显示在 TortoiseSVN GUI 窗口中。

```
\Python26\python svn_sync.py -s --repos=%repos% --transaction=%transaction% --project=%proj%   

IF %ERRORLEVEL% GTR 0 GOTO err 

echo ___________________ 1>&2  
echo Commit successful.  1>&2  
echo ___________________ 1>&2  
exit 0 

:err
echo _____________________________________________________ 1>&2  
echo Your commit has failed due to invalid PR or PR state. 1>&2  
echo _____________________________________________________ 1>&2  
exit 1 
```

# linux - 使用问题

> ID：10168109
> 
> 赞同：2
> 
> 时间：2012-04-15T21:28:03.170
> 
> 标签：linux, c

嗨，我在为我的操作系统类工作时遇到了一个小问题。我被指示使用 getrusage() 来确定我正在编写的程序在用户模式和内核模式下花费的时间量。问题是它总是告诉我我的 CPU 和内核使用率为零。在查找该函数时，手册页提到，如果您的特定版本的 linux 不支持 rusage 结构的某些成员，它们将被设置为零。基本上我想知道是否有人可以告诉我我对函数的调用和访问它的参数是否正确（所以我可以判断我是否是问题或我的内核不支持这些功能）。

代码

```
struct rusage usage;
struct rusage *p = &usage;

getrusage(RUSAGE_SELF, p);

printf("time in user mode = %ld\ntime in kernel mode = %ld\n", p->ru_utime.tv_sec, p->ru_stime.tv_sec); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T02:40:24.553

`struct rusage`成员`ru_utime`和`ru_stime`都是 type ，`struct timeval`如下所示：

```
struct timeval {
    time_t      tv_sec;     /* seconds */
    suseconds_t tv_usec;    /* microseconds */
}; 
```

`tv_sec`告诉您经过的秒数，并`tv_usec`告诉您剩余的微秒数。因此，如果要打印整个时间段，则需要同时打印两者。

由于您只打印`tv_sec`成员，我怀疑您的程序运行时间不够长，无法超过 0 秒。您还需要打印[其他值](https://stackoverflow.com/questions/1469495/unix-programming-struct-timeval-how-to-print-it-c-programming)：

```
printf("time in user mode = %ld.%06ld ", 
     p->ru_utime.tv_sec, p->ru_utime.tv_usec);
printf("time in kernel mode = %ld.%06ld\n", 
     p->ru_stime.tv_sec, p->ru_stime.tv_usec); 
```

您可以看到我为其他打印​​结构的方法[链接的问题。](https://stackoverflow.com/questions/1469495/unix-programming-struct-timeval-how-to-print-it-c-programming)`timeval`

# html - 是否应该使用 X-UA-Compatible 来减少解析/呈现 HTML 页面的时间？

> ID：10168110
> 
> 赞同：0
> 
> 时间：2012-04-16T02:36:17.393
> 
> 标签：html, performance, internet-explorer, http-headers, x-ua-compatible

在 Internet Explorer（8、9 或 10）中，如果我指定带有值的[`X-UA-Compatible`响应标头](https://msdn.microsoft.com/en-us/library/jj676915(v=vs.85).aspx)`IE=edge,chrome=1`，浏览器解析/呈现 HTML 页面的速度是否更快，而不是不包括任何引用`X-UA-Compatible`？就我而言，我 100% 确定 IE 不会进入信息兼容模式进行渲染，所以我想看看添加标题是否会改善我的页面负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T02:49:50.220

我不相信这会对 IE 的渲染引擎 Trident 的性能产生任何影响。即使是这样，我们可能甚至都没有意识到。如您所知，响应标头和/或页面标记中的几个额外字节可能最终会成为更大的开销！

请注意，指定`chrome=1`将导致从 IE6 开始并安装了 Google Chrome Frame 的任何版本的 IE 切换到插件，从而使 Trident 在大多数情况下无关紧要。

# javascript - 获取对象树中给定节点的子节点

> ID：10168115
> 
> 赞同：0
> 
> 时间：2012-04-16T02:37:06.967
> 
> 标签：javascript, object, tree, children, traversal

如何在深度 = 1 的对象树中返回给定节点（键名）的子节点，仅表示第一个子节点。

具体问题：

所以这是一个示例数据对象......

```
{
    "1753": {
        "1755": {
            "1758": {
                "1762": "1753_1755_1758_1762",
                "1760": "1753_1755_1758_1760",
                "1764": "1753_1755_1758_1764",
                "1761": "1753_1755_1758_1761"
            },
            "1759": {
                "1762": "1753_1755_1759_1762",
                "1760": "1753_1755_1759_1760",
                "1764": "1753_1755_1759_1764",
                "1761": "1753_1755_1759_1761"
            }
        },
        "1756": {
            "1758": {
                "1762": "1753_1756_1758_1762",
                "1760": "1753_1756_1758_1760",
                "1764": "1753_1756_1758_1764",
                "1761": "1753_1756_1758_1761"
            },
            "1759": {
                "1762": "1753_1756_1759_1762",
                "1760": "1753_1756_1759_1760",
                "1764": "1753_1756_1759_1764",
                "1761": "1753_1756_1759_1761"
            }
        },
        "1757": {
            "1758": {
                "1762": "1753_1757_1758_1762",
                "1760": "1753_1757_1758_1760",
                "1764": "1753_1757_1758_1764",
                "1761": "1753_1757_1758_1761"
            },
            "1759": {
                "1762": "1753_1757_1759_1762",
                "1760": "1753_1757_1759_1760",
                "1764": "1753_1757_1759_1764",
                "1761": "1753_1757_1759_1761"
            }
        }
    },
    "1754": {
        "1755": {
            "1758": {
                "1763": "1754_1755_1758_1763"
            }
        },
        "1756": {
            "1758": {
                "1763": "1754_1756_1758_1763"
            }
        },
        "1757": {
            "1758": {
                "1763": "1754_1757_1758_1763"
            }
        }
    }
}; 
```

对象的每一级代表页面上的一个下拉菜单。

我需要做的是，当有人从下拉菜单之一中选择某些内容时，我需要返回所有剩余菜单的可能性..

例如，假设我从下拉列表 3 中选择值“1758”（因为它是对象中的第三级），请执行以下操作：

```
I would need to return info stating that because I selected "1758" from dropwdown-3... 
    -dropdown-1 can be 1753, 1754.
    -dropdown-2 can be 1755,1756,1757
    -dropdown-3 can remain unchanged
    -dropdown-4 can be 1762,1760,1764,1761,1763 
```

到目前为止，我已经能够实现这么多......当这种情况发生某种组合时，问题就出现了：

```
I have selected option "1758" from dropdown-3, AND THEN SELECTED "1754" from dropdown-1...
    -dropdown-1 has the most recent selected value, it can remain unchanged
    -dropdown-2 can be 1755,1756,1757
    -dropdown-3 is set, but can still have its possible values modified & checked for accuracy
        -dropdown-3 can be only 1758
    -dropdown-4 can be only 1753 
```

这是一个示例对象，我所有的对象都将具有不同的深度和复杂性......我已经做了很多尝试，希望有人可以向我展示光线:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:41:03.130

想一想，你想要基于选择（节点名称）它的孩子，所以你不需要完整的对象树（虽然你可以使用它），你可以更容易地使用邻接表作为查找表（哈希表） ：

```
adj["1753"] = ["1755"];

adj["1755"] = ["1758"]

adj["1758"] = ["1762", "1760", "1764", "1761"]

adj["1762"] = "1753_1755_1758_1762"    
... 
```

所以现在有人选择“1753”，你查找 adj[“1753”] 并得到可能的孩子的数组，与其他人一样。

但是如果你想使用你不知道深度的当前数据结构，那么你应该使用 for(var key in tree) + recursion 来遍历树，但这几乎没有意义，因为你需要一个给定的（父) 节点名称遍历整个树以“知道”父节点所在的位置（假设唯一键！）。

所以最好使用邻接列表。

# python - Python 类设计

> ID：10168117
> 
> 赞同：0
> 
> 时间：2012-04-16T02:37:19.623
> 
> 标签：python, class, oop, methods

需要一些帮助。

我目前的代码骨架如下所示：

```
import math
epsilon = 0.000001

class Point:
    def __init__(self, x, y):
        self._x = x
        self._y = y 
```

需要添加一个名为 dist_to_point 的方法，该方法将另一个点对象 p 作为参数并返回两点之间的欧几里德距离。我可以使用 math.sqrt。

测试用例：

```
abc = Point(1,2)
def = Point(3,4)
abc.dist_to_point(def) ===> 2.8284271 
```

我该怎么做呢？很困惑。谢谢。

编辑：不是作业。我了解添加方法，但我不知道如何结合 self._x 等进行欧几里德距离计算。我在那里感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:48:05.180

您将需要添加一个带有签名的方法`dist_to_point(self, p)`。在该方法中，您将需要实现两个空间中两点之间的距离公式（可从 Wikipedia 以及其他来源获得）。

在您的方法中，您可以将调用点的*坐标*称为`self._x`和`self._y`。*参数*点的坐标将是`p._x`和`p._y`。

这足以让你开始吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:15:09.600

如果您说这不是家庭作业，则需要直接回答。这是一些工作代码：

```
import math
epsilon = 0.000001

class Point:
    def __init__(self, x, y):
        self._x = x
        self._y = y
    def dist_to_point(self, other):
        'Compute the Euclidean distance between two Point objects'
        delta_x = self._x - other._x
        delta_y = self._y - other._y
        return (delta_x ** 2 + delta_y ** 2) ** 0.5 
```

示例会话：

```
>>> point_abc = Point(1,2)
>>> point_def = Point(3,4)
>>> point_abc.dist_to_point(point_def)
2.8284271247461903 
```

# objective-c - 在拆分视图控制器中调整主视图控制器和详细视图控制器的大小？

> ID：10168124
> 
> 赞同：7
> 
> 时间：2012-04-16T02:38:57.870
> 
> 标签：objective-c, xcode4.2, uisplitviewcontroller

我正在使用 Xcode 4.2 并正在开发一个应用程序，我希望菜单屏幕使用拆分视图。真的，我只需要拆分视图控制器将一些菜单选项拆分为左窗格和右窗格。我希望能够为主视图控制器和详细视图控制器设置自定义大小，但似乎没有什么对我有用。我尝试使用以下代码更新每个视图控制器的帧大小：

```
[self.view setFrame:CGRectMake(0, 0, 768, 502)]; 
```

在 viewDidLoad 函数中，但这似乎没有任何影响。

有没有办法为拆分视图控制器的主视图控制器和详细视图控制器设置自定义大小，而无需在 AppDelegate.m 文件中实例化视图控制器？我希望能够编辑情节提要中的每个视图控制器，因为它们是带有很多按钮等的菜单屏幕。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T04:10:48.977

编辑：在 iOS 8+ 中，可以通过指定 minimum/maximumPrimaryColumnWidth 属性或 preferredPrimaryColumnFraction 来更改相对宽度。

对于 iOS < 8，以下答案仍然适用：

* * *

您不能更改拆分视图控制器的大小。

见这里：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)

“UISplitViewController 类是管理两个信息窗格的容器视图控制器。第一个窗格具有 320 点的固定宽度和与可见窗口高度匹配的高度。第二个窗格填充剩余空间。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-12T17:13:09.607

使用[`MGSplitViewController`](https://github.com/mattgemmell/MGSplitViewController/). 它提供了与 UIViewController 类似的 API，但提供了额外的功能，例如拆分位置，这是您所需要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-19T10:54:06.913

```
- (CGFloat)splitView:(NSSplitView *)splitView constrainMinCoordinate:(CGFloat)proposedMinimumPosition ofSubviewAt:(NSInteger)dividerIndex;
{

    return proposedMinimumPosition + 238;
}

- (CGFloat)splitView:(NSSplitView *)splitView constrainMaxCoordinate:(CGFloat)proposedMaximumPosition ofSubviewAt:(NSInteger)dividerIndex;
{
    return proposedMaximumPosition - 200;
} 
```

在上述委托方法之前添加`[splitView addDelegate:self];`

# delphi - 下载没有防病毒检测的文件

> ID：10168125
> 
> 赞同：-1
> 
> 时间：2012-04-16T02:39:05.043
> 
> 标签：delphi, dll, delphi-7, antivirus, virus

我正在编写一个从我的服务器下载文件（dll）并使用该文件的程序。但是，下载完成后，我的防病毒软件 (Kaspersky) 会使用**Constructor.Win32.Downldr.xr**检测到我的文件。我该如何解决这个问题？

但是，我将我的 2 个文件放在[www.virustotal.com](http://www.virustotal.com)中，并且都没有病毒。

注意：这两个文件（进行下载的程序和文件，即 dll）是在 Delphi 7 中制作的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:22:27.170

您不能指望绕过防病毒软件，从而留下两个选择：

1.  说服 AV 供应商您的 DLL 是干净的，并让他们更新他们的签名。
2.  充分更改您的 DLL，使其不会与扫描仪发生冲突。我猜这需要反复试验。

在上一个问题中，您询问了如何将 DLL 文件下载到内存，然后从内存而不是文件中加载它。我希望大多数优秀的防病毒软件都会将任何这样做的软件视为恶意软件。

如果我是你，我会下载到一个临时文件并使用官方支持的 LoadLibrary 来加载代码。AV 软件可能对此更宽容。如果您不准备这样做，那么您的软件在我眼中可能是恶意软件，即使您不是故意伤害。即使您这样做，在任何人眼中，未经用户明确同意从 Internet 下载和执行 DLL 也接近于恶意软件。

让我们换一种说法。我永远不会让你的这个程序在我的机器上运行，当我的 AV 软件标记它时我会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:10:29.547

下载文件时，您也可以尝试使用 HTTPS 或任何安全连接。一些防病毒软件无法查看加密连接。

# c# - C# 代码无法“看到”我的 C++ dll 中的方法

> ID：10168128
> 
> 赞同：1
> 
> 时间：2012-04-16T02:39:52.197
> 
> 标签：c#, c++, visual-studio-2010, dll

我有一个用 C++ 编写的代码（我没有编写）并且想在 C# 中使用它，所以我决定制作一个 dll 并从那里使用这个类。

我对 C++ 知之甚少，并且在我的 C# 项目中引用此类的方法时遇到问题。

C++ 代码是这样的：

```
#ifndef BeamAn_class
#define BeamAn_class
#define DllExport   __declspec( dllexport ) 
#include <vector>
#include <cmath>

using namespace std;

public class  DllExport BeamAn
{
  public:
    BeamAn();
    ~BeamAn();  
    bool SetGeometry(vector<double>); //I didn't put the DllExport here because I already did it for the whole class. It's okay to do this, right?
    //other public methods an stuff
  private:
    //private methods an stuff
}
#endif 
```

在我的 C# 项目中，我通常添加了对 C++ dll 的引用（右键单击项目，添加引用。.lib 和 .h 文件位于 dll 的同一文件夹中）。

但看起来 Visual Studio 无法“看到”我班级的方法。我可以创建一个 BeamAn 类型的对象，但不能使用它的任何方法。例如，我可以这样做： BeamAn contBeam = new BeamAn(); 但不能使用类内部的任何方法或属性，例如：contBeam.SetLoadFactors(1.0,1.2);

Visual Studio 说“BeamAn 不包含‘SetLoadFactors’的定义，并且找不到接受第一个参数类型‘BeamAn’的扩展方法‘SetLoadFactors’（您是否缺少 using 指令或程序集引用？）

我应该在 C++ 代码中编写更多内容以使 dll 正常工作，还是在引用它时我做错了什么？我知道如果我是显式链接，我必须在我的 C# 代码中使用“DllImport”，但这不是我想要做的。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:10:21.707

有几种方法可以使 C++ 库在 C# 中可用。

1.  使用 PInvoke - 直接调用您的 C++ 代码。有关更多信息，请参阅[本文](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)。另请参阅[pinvoke.net](http://pinvoke.net/)以获取一般参考。
2.  使用互操作语言围绕非托管代码创建托管包装器。如果您在 Microsoft 世界中，我建议您使用 C++/CLI 创建混合模式库（包含托管和非托管代码的 dll）。[这](http://msdn.microsoft.com/en-us/magazine/cc163852.aspx)是一篇介绍 C++/CLI 的简短（和旧）文章。
3.  使您的 C++ COM 可访问。由于代码不是你的，所以这个代码可能对你没有用。有关 C++ 和 COM 的更多信息，请参阅[这篇文章](https://stackoverflow.com/questions/2938435/comc-programming-tutorials)。

对于简单的场景，PInvoke 可能是最简单的。对于托管和非托管代码的更复杂的交互，我建议使用互操作语言编写混合模式 dll。如果这些对您不起作用，请使用 COM。

要解决您收到的错误：您无法从 C# 项目添加对 C++ 库的引用 - 它们是完全不同的语言，具有不同的内存管理系统、不同的类型系统、不同的一切（嗯，很多东西）。此外，您不能将数据结构（如向量、映射或集合）从非托管代码传递到托管代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:44:16.760

要在 ac# 项目中使用 c++ 代码，您有 2 个选项：

1.  将您的 c++ 类包装在托管 c++ 类中
2.  使用一个名为 swig 的库

您可能感兴趣的链接：[Wrapping Visual C++ in C#](https://stackoverflow.com/questions/292450/wrapping-visual-c-in-c-sharp)

# objective-c - 从 NSMutableArray 中删除图像

> ID：10168135
> 
> 赞同：0
> 
> 时间：2012-04-16T02:40:43.190
> 
> 标签：objective-c, ios, uiimageview, nsmutablearray

因此，我正在编写的应用程序允许用户从他们的相机胶卷上传照片，并显示在 UIImageView 中。我有一个“保存”按钮，可以在按下时保存图像。我还有一个“编辑”按钮，当点击它时，它允许用户点击照片，它将被删除。这是我遇到问题的地方，图像从视图中删除，但似乎没有从数组中删除。当我关闭并重新启动应用程序时，照片再次出现。我对 Objective-C 很陌生，我很惊讶我能做到这一点，所以我在弄清楚如何从数组中删除它时遇到了问题。

另外，作为旁注，如果我从相机胶卷中抓取 3 张图像，删除中间的一张，然后按保存按钮，在关闭并重新启动应用程序后，它只会显示应有的 2 张照片。只有当我先按保存，然后尝试删除它们时，才会出现有关重新启动后再次出现图像的问题。

这就是我删除它们的方式。我在每个 UIImageView 上都有一个不可见的按钮，当按下 Edit 按钮时，它会取消隐藏它们。我已经标记了按钮和 UIImageViews，当按下其中一个按钮时，会触发：

```
- (IBAction)deleteButtonPressed:(id)sender {
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];

    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;
}

- (UIImageView *)viewForTag:(NSInteger)tag {
    UIImageView *found = nil;
    for (UIImageView *view in self.array) {
        if (tag == view.tag) {
            found = view;
            break;
        }
    }
    return found;
}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {

        UIImageView *view = [self viewForTag:alertView.tag];
        if (view) {
            [self.array removeObject:view];
        }

        ((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil;
    }

    [self.user setObject:self.array forKey:@"images"];
} 
```

仅供参考，这就是我保存图像的方式：

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
        if (imageView.image == nil) {
            imageView.image = img;

            [self.array addObject:imageView];

            [picker dismissModalViewControllerAnimated:YES];
            [self.popover dismissPopoverAnimated:YES];

            return;

        }

        if (imageView2.image == nil) {
            imageView2.image = img;
            NSLog(@"The image is a %@", imageView);
            [self.array addObject:imageView2];

            [picker dismissModalViewControllerAnimated:YES];
            [self.popover dismissPopoverAnimated:YES];

            return;
        }
        ...
        ...
        }

    -(IBAction)saveButtonPressed:(id)sender {
        NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES) objectAtIndex:0];

        for (UIImageView *imageViewToSave in self.array) {

            NSInteger tag = imageViewToSave.tag;
            UIImage *image = imageViewToSave.image;
            NSString *imageName = [NSString stringWithFormat:@"Image%i.png",tag];

            NSString *imagePath = [docsDir stringByAppendingPathComponent:imageName];

            [UIImagePNGRepresentation(image) writeToFile:imagePath atomically:NO];
        }

    } 
```

这就是我加载它们的方式：

```
 -(void)viewDidLoad {

        self.array = [NSMutableArray array];
        NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES) objectAtIndex:0];

        NSArray *docFiles = [[NSFileManager defaultManager]contentsOfDirectoryAtPath:docsDir error:NULL];

        for (NSString *fileName in docFiles) {

            if ([fileName hasSuffix:@".png"]) {
                NSString *fullPath = [docsDir stringByAppendingPathComponent:fileName];
                UIImage *loadedImage = [UIImage imageWithContentsOfFile:fullPath];

                if (!imageView.image) {
                    imageView.image = loadedImage;
                } 
                else if (!imageView2.image) {
                    imageView2.image = loadedImage;
                  }
                else if (!imageView3.image) {
                    imageView3.image = loadedImage;

                }

            }
        }
    } 
```

**更新：**这是我当前的代码：

```
- (IBAction)deleteButtonPressed:(id)sender {
    NSLog(@"Sender is %@", sender);
    UIAlertView *deleteAlertView = [[UIAlertView alloc] initWithTitle:@"Delete"
                                                              message:@"Are you sure you want to delete this photo?"
                                                             delegate:self
                                                    cancelButtonTitle:@"No"
                                                    otherButtonTitles:@"Yes", nil];
    [deleteAlertView show];

    int imageIndex = ((UIButton *)sender).tag;
    deleteAlertView.tag = imageIndex;
}

- (UIImageView *)viewForTag:(NSInteger)tag {
    UIImageView *found = nil;
    for (UIImageView *view in self.array) {
        if (tag == view.tag) {
            found = view;
            break;
        }
    }
    return found;
}

- (void)alertView: (UIAlertView *) alertView 
clickedButtonAtIndex: (NSInteger) buttonIndex
{

    if (buttonIndex != [alertView cancelButtonIndex]) {

        UIImageView *view = [self viewForTag:alertView.tag];
        if (view) {
            [self.array removeObject:view];

            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
            NSString *documentsPath = [paths objectAtIndex:0];
            NSString *filePath = [documentsPath stringByAppendingPathComponent:[NSString stringWithFormat:@"Image%i.png",view.tag]];
            NSFileManager *fileManager = [NSFileManager defaultManager];
            [fileManager removeItemAtPath:filePath error:NULL];
        }

        ((UIImageView *)[self.view viewWithTag:alertView.tag]).image =nil;
    }

    [self.user setObject:self.array forKey:@"images"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:56:05.573

您的数组与此无关。无论如何，它会在下次启动时被覆盖。我认为您从未从文件夹中删除图像，因此下次启动时会在 viewDidLoad 方法中再次读取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T02:57:12.437

当您从数组中删除图像时`[self.array removeObject:view];`，您还没有从目录中删除图像本身。

从以下位置删除对象后，您可能希望执行以下操作`array`：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
NSString *documentsPath = [paths objectAtIndex:0];
NSString *filePath = [documentsPath stringByAppendingPathComponent:@"THE_IMAGE_NAME_HERE.png"];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
[fileManager removeItemAtPath:filePath error:&error];

if (error)
NSLog(@"Error: %@",error); 
```

# javascript - HTML5 文件上传 - 卡在非常大的文件上 - 仅限 Firefox

> ID：10168137
> 
> 赞同：13
> 
> 时间：2012-04-16T02:41:01.037
> 
> 标签：javascript, html, firefox, file-upload

我正在尝试让 HTML5 上传正常工作。到目前为止，我的工作正常，完全没有问题。我遇到的唯一问题是这样的（仅限 Firefox 浏览器 - Chrome 运行良好）：

1.  加载页面
2.  尝试上传一个非常大的文件（超过 1GB）
3.  上传需要很长时间才能开始，然后进度全部搞砸了，似乎两次上传文件

如果在第 1 步和第 2 步之间我上传了一个较小的文件，则大文件开始正确上传，并有良好的进度指示。

要体验这一点，您只需在以下演示页面上尝试上述步骤：http: [//exposureroom.biz/upload.aspx](http://exposureroom.biz/upload.aspx)。演示页面来自一个众所周知的 HTML5 上传示例：http: [//www.matlus.com/html5-file-upload-with-progress/](http://www.matlus.com/html5-file-upload-with-progress/)。我不是自己写的，但它的行为与我的脚本相同，并且可以访问。

这是浏览器错误吗？有没有人遇到过这个？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T07:00:45.820

I don't think this is a browser bug, but rather a bug in the upload program. I tested with uploading a 1GB and 2GB file and the upload started right away without waiting at all.

Make sure your test is valid but I found the following unexpected behavior.

case 1:
1\. begin upload 1G file
2\. upload started normally and progress is normal
3\. before completing upload, click on Browse and upload a 2G file
4\. upload started normally and progress is messed up. showing negative speed and stuff.

case 2:
1\. begin upload 2G file
2\. upload started normally and progress is normal
3\. before completing upload, click on Browse and upload a 1G file
4\. upload started normally and progress is messed up. showing negative speed and stuff.

case 3:
1\. begin upload a 1G file
2\. upload started normally and progress is normal.
3\. start a new tab and begin upload a 2G file
4\. upload started normally and progress is normal.

looks like your program is not handling the first two test cases, it doesn't look like a browser bug.

before disabling the upload button once file begins, try to find out why "cancel" upload is not working (if you have implemented it). it looks like there are some [success](http://www.codeproject.com/Questions/303340/Abort-file-upload-on-click-of-cancel-button-in-htm) to cancel file upload wtih html5 on client side.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T04:56:06.153

这不是 Firefox 中的错误，这是您的程序中的错误。在 Mac 上重现了 @Ray Cheng 在 FF 11.0 和 Chrome 18.0.1025.151 中的行为。没有在任一浏览器中重现 OP 的问题，但我怀疑这是由于程序中的反馈中断导致对正在发生的事情的误解。

Ray 的测试显然失败了，因为第二个文件的上传不会取消第一个文件的上传，并且两次上传正在更新相同的进度条并使用一些相同的值（例如，最后一个上传文件的文件大小）和一些唯一值（例如，此特定上传完成的字节数）。或类似的东西。我没有深入研究代码，但我确实发现了这一点（注意这些变量在**全局**`XMLHttpRequest`范围内，但由执行上传的对象生成的事件更新）：

```
 var bytesUploaded = 0;
  var bytesTotal = 0;
  var previousBytesLoaded = 0;
  var intervalTimer = 0; 
```

当前系统的一个明显问题是，如果您开始上传大文件，然后开始上传小文件，则在小文件上传完成后，您会得到如下所示的荒谬反馈，更不用说第一个文件上传失败了。（注意上传文件的大小和百分比与上传文件的大小相比。）

![截屏](../Images/5ae83b8203ea11eabd87a8f6cb73dad4.png)

首先，我建议在上传过程中禁用浏览/文件选择按钮，直到您解决这些其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T11:04:19.267

我为你的问题找到了解决方案。要上传大文件，您必须使用 file api slice 调用来处理文件并处理请求，您必须使用 webworkers 以获得更高的计算性能。

# ios - Cocos2D坐标被裁剪？

> ID：10168138
> 
> 赞同：0
> 
> 时间：2012-04-16T02:41:19.003
> 
> 标签：ios, graphics, cocos2d-iphone, cocos2d-x

我对 Cocos2D 有一些奇怪的经历。我似乎无法在 x=0 或 y = 0 处绘制/绘制一个点。我必须将它在屏幕内移动一个坐标才能可见。好像被切断了什么的，我不太明白。我想做一些像素绘图，所以这很重要，我想我可能需要使用 coregraphics 来代替......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:46:40.353

Cocos2D 在 0,0 点渲染 1 个像素就好了。可能有一两件事导致您出现此问题：

1.  您可能正在查看 Retina 显示屏。对于 Retina 显示器，Cocos2D 默认将内容缩放 2 倍，因此“一个像素”实际上是 4 个微小的视网膜像素。告诉 cocos2d 在 Retina 上的 0,0 处绘制单个像素实际上是在 0,0、-1,0、-1,-1 和 0,-1 处绘制像素。（最后三个将在屏幕外。）
2.  您可能已经`CCNode`以某种方式移动或缩放了您的父级，以至于 0,0 实际上被视为屏幕外。

我猜它的#1。视网膜中的单个像素很难看到，因此您可能希望坚持使用 2 倍缩放。只需将您的父级偏移`CCNode`一个点即可用于 Retina 显示器，这样您就可以在该局部坐标系中的 0,0 处开始绘图，而无需担心绘图时的任何偏移。

# spring - Spring MVC Hibernate - 构建路径不完整

> ID：10168139
> 
> 赞同：1
> 
> 时间：2012-04-16T02:41:24.730
> 
> 标签：spring, hibernate, maven, buildpath

我正在开发一个 spring mvc maven 项目，在初始阶段我可以解决这个错误。在我的 servlet-context.xml 中，我试图生成“HibernateTransactionManager”bean，它会抛出这个错误：

```
error: "Build path is incomplete. Cannot find class file for org/hibernate/HibernateException" 
```

由于这是一个 Maven 项目，我在 pom.xml 中添加了以下依赖项

```
<!--  Dependency added for spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>               

    <!-- Dependency added for Spring Security -->
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.0.5.RELEASE</version>
    </dependency>

    <!-- Dependency added for AOP -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>

    <!-- Dependency for Hibernate -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${org.hibernate-version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>${com.mysql-version}</version>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>20030825.184428</version>
    </dependency>
    <dependency>
        <groupId>commons-pool</groupId>
        <artifactId>commons-pool</artifactId>
        <version>20030825.183949</version>
    </dependency>
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>

    <!-- Dependency for Http Client -->
    <dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpclient</artifactId>
    <version>4.1.1</version>
    </dependency>
    <dependency>
        <groupId>jdom</groupId>
        <artifactId>jdom</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
    <groupId>rome</groupId>
    <artifactId>rome</artifactId>
    <version>0.5</version>
    </dependency> 
```

我什至可以在我的 Maven 依赖树中找到我所有的类。

我还尝试在外部为 spring-orm 添加一个新的 .jar，但这也不起作用。我曾多次尝试清理构建并重新编译，但没有成功。

我非常感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:04:02.710

这是我的第一个 SO 答案，所以请多多包涵。生成的错误是“找不到 org/hibernate/HibernateException 的类文件”。您提供的 POM 列出了您的项目的所有依赖项，并包括对 hibernate-validator jar 的引用。

```
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-validator</artifactId>
<version>4.2.0.Final</version>
</dependency> 
```

如果您提取此 jar 文件并搜索其内容，则找不到名为 HibernateException 的类文件。这是错误的根本原因，您是一个包含 HibernateException 类文件的存储库。

当您使用 maven 时，您可以在此处查看与 Hibernate 相关的所有存储库 [http://mvnrepository.com/artifact/org.hibernate](http://mvnrepository.com/artifact/org.hibernate)

我选择了 hibernate-core-4.2.0.Final 作为核心，这表明它具有 hibernate 所需的大部分主要类文件。下载并解压 jar 显示 HibernateException 类文件存在于此。

因此，如果您使用以下条目更新您的 POM.xml

```
<dependency>
<groupId>org.hibernate</groupId>
<artifactId>hibernate-core</artifactId>
<version>4.2.0.Final</version>
</dependency> 
```

现在您必须让 Maven 将存储库下载到您的本地计算机（如果它不存在）并将其用于您的项目。如果您从 Elcipse 运行项目，请通过右键单击项目-> 运行方式-> Maven Clean 来执行此操作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:14:36.137

如果您确定 maven 已经下载了 hibernate jar，并且可以在构建生成的 jar/war 文件中使用，那么问题可能如下。

有时 Maven 无法从服务器下载完整的 JAR 文件，在这些情况下也会发生类未找到异常。

要在您的主目录中修复此 goto .m2 文件夹，请删除休眠 jar 并制作一个`clean install`. 这将下载新的文件集，并且应该开始工作。

您可以通过将文件作为 zip 文件打开来检查文件是否已正确下载`jar tf jar-file.jar`

# multithreading - Hadoop的Mapper对象是否跨多个线程共享？

> ID：10168143
> 
> 赞同：5
> 
> 时间：2012-04-16T02:42:05.603
> 
> 标签：multithreading, hadoop

我想知道是否可以添加一个可以在多个 map() 调用中使用的成员对象。例如，一个 StringBuilder：

```
private StringBuilder builder;

public void map(...){
    ...

    builder.setLength(0);
    builder.append(a);
    builder.append(b);
    builder.append(c);
    d = builder.toString();

    ...
} 
```

显然，如果 mapper 对象在多个线程之间共享，由于来自多个线程的并发访问，上面的 builder 对象将不会像预期的那样运行。

所以我的问题是：是否保证 hadoop 中的每个线程都会为自己使用一个专用的映射器对象？或者它是一种可配置的行为？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:46:27.967

只要你使用的不是`MultithreadedMapper`类，而是你自己的，就没有问题。`map()`称为顺序而不是并行。

通常使用 a`StringBuilder`或其他数据结构在调用之间缓冲一些对象。但是请确保从输入对象中克隆对象，只有一个对象，并且会一遍又一遍地填充以防止大量 GC。

因此无需同步或处理竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:58:54.563

我不认为这是可能的。原因是每个映射器都在自己的 JVM 中运行（它们将分布在不同的机器上），因此您无法轻松地在多个映射器或化简器之间共享变量或对象。

现在，如果您所有的映射器都在同一个节点上运行，我相信在某处有一个 JVM 重用配置，但老实说，我不会为此烦恼，特别是如果您只需要一个`StringBuilder`:)

这个问题我以前见过一次，通过改变应用程序的设计可以很容易地解决这个问题。也许您可以更多地了解您正在尝试使用它来完成什么，以查看是否真的需要这样做。如果你真的需要它，你仍然可以序列化你的对象，把它放在 HDFS 中，然后用每个映射器读取它，反序列化它，但这似乎是倒退的。

# mongodb - 为什么 Meteor v0.4.x (MongoDB?) 曾经为一个非常简单的应用程序占用约 3GiB 的磁盘空间？

> ID：10168147
> 
> 赞同：6
> 
> 时间：2012-04-16T02:43:16.500
> 
> 标签：mongodb, meteor

**更新**：这是在 Meteor v0.4 (2012) 之后修复的。出于历史目的：

* * *

我正在微型 EC2 Ubuntu 11.10 实例 (8GiB) 上测试 Meteor，安装并登录后，我运行`df`命令查看核心文件消耗了多少内存（大约 10%）：

```
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/xvda1             8256952    782068   7055456  10% /
udev                    295276         4    295272   1% /dev
tmpfs                   121248       148    121100   1% /run
none                      5120         0      5120   0% /run/lock
none                    303112         0    303112   0% /run/shm 
```

在安装 NodeJS 和 NPM 后，我再次运行`df`以确定消耗了多少空间并且看起来并不多（额外的 2%）：

```
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/xvda1             8256952    919444   6918080  12% /
udev                    295276         4    295272   1% /dev
tmpfs                   121248       148    121100   1% /run
none                      5120         0      5120   0% /run/lock
none                    303112         0    303112   0% /run/shm 
```

然后我开始安装 MongoDB，正如预期的那样，这占用了更多的内存（59% 的磁盘空间在使用中）：

```
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/xvda1             8256952   4585884   3251640  59% /
udev                    295276         4    295272   1% /dev
tmpfs                   121248       148    121100   1% /run
none                      5120         0      5120   0% /run/lock
none                    303112         0    303112   0% /run/shm 
```

但是，在安装 Meteor 后，`curl install.meteor.com | /bin/sh`从他们的站点创建示例 myapp`meteor create myapp`并运行 myapp `cd myapp`&`meteor`我成功地在浏览器中看到该应用程序显示“Hello World”（等），在终端端我看到了这个：

```
[[[[[ ~/myapp ]]]]]

Initializing mongo database... this may take a moment.
Running on: http://localhost:3000/
^C 
```

关闭服务器后，我`df`最后一次检查了一次，惊讶地发现磁盘已满！？

```
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/xvda1             8256952   7778748     58776 100% /
udev                    295276         4    295272   1% /dev
tmpfs                   121248       148    121100   1% /run
none                      5120         0      5120   0% /run/lock
none                    303112         0    303112   0% /run/shm 
```

我的问题是：为什么 Meteor（MongoDB？）为一个非常简单的应用程序占用约 3GiB 磁盘空间？

有没有办法减少这种磁盘空间的消耗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T05:22:49.487

这是在流星的开发分支上修复的，将在下一个版本中。

[https://github.com/meteor/meteor/commit/6042b91a9ca75fc47b2477e613da093f1c9b943e](https://github.com/meteor/meteor/commit/6042b91a9ca75fc47b2477e613da093f1c9b943e)

似乎 mongo 默认使用大文件，必须被告知不要这样做。我猜对于 mongo 的正常用例是可以理解的。通过预分配大文件，它们可以在某些情况下提高性能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T05:16:01.507

MongoDB在第一次启动时[为其日志预分配 3GB 。](http://www.mongodb.org/display/DOCS/Journaling+Administration+Notes#JournalingAdministrationNotes-PreallocFiles%28e.g.journal/prealloc.0%29)Meteor 应该默认在开发模式下关闭它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:44:42.980

[此](https://stackoverflow.com/questions/10119289/why-is-the-database-of-a-meteor-app-that-has-been-run-once-and-never-loaded-ta)线程中已经讨论了这种大分配的原因和解决方法。已检查 --noprealloc 选项，它工作正常。

# iphone - iPhone：如何通过 Web 服务获取值数组？

> ID：10168151
> 
> 赞同：1
> 
> 时间：2012-04-16T02:44:05.443
> 
> 标签：iphone, ios, web-services, ipad, nsxmlparser

我在 iPhone 中使用 web 服务并通过`NSXMLParser`. 我的服务返回对象数组，但是当我从 Web 服务获取它并连接相同类型的值时。Web 服务生成以下响应。

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetClientTripsResponse xmlns="http://tempori.net/">
      <GetClientTripsResult>
        <TripNumbers>
          <ConfirmationsNumber>string</ConfirmationsNumber>
          <TripState>string</TripState>
        </TripNumbers>
        <TripNumbers>
          <ConfirmationsNumber>string</ConfirmationsNumber>
          <TripState>string</TripState>
        </TripNumbers>
      </GetClientTripsResult>
    </GetClientTripsResponse>
  </soap:Body>
</soap:Envelope> 
```

对于 ConfirmationsNumber 是 6 位数字，并且 TripState 是字符串值 NONE 或 ONWAY

但是当我解析它时

ConfirmationsNumber = 234589455623784523 和

TripState = NONENONEONWAY

意味着它解析三个对象并将它们连接起来。我希望有独立的值或至少用逗号分隔。像 234589,455623,784523 或其他任何东西，但应该可以拆分。

下面是代码

```
@interface TrackTripStatus : UITableViewController <NSXMLParserDelegate> {
    NSMutableArray *tripList;
    UILabel *noTripsLabel;
    int indexCount;
    BOOL elementFound;

    // for Web service
    NSMutableData *webData;
    NSMutableString *soapResults;
    NSURLConnection *conn;
    NSXMLParser * xmlParser;
    NSString * qelementName;
    NSString * RequestStep;
}

- (void) getClientTrips;
-(void) setControls;
@end

- (void) getClientTrips
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *CLIENTPHONENUMBER = [defaults stringForKey:@"CLIENTPHONENUMBER"];
    if(CLIENTPHONENUMBER == nil)
        CLIENTPHONENUMBER = @"";

    NSString *soapMsg = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
                         "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
                         "<soap:Body>"
                         "<GetClientTrips xmlns=\"http://tempori.net/\">"
                         "<HomePhone>%@</HomePhone>"
                         "</GetClientTrips>"
                         "</soap:Body>"
                         "</soap:Envelope>",CLIENTPHONENUMBER]; 

    NSURL *url = [NSURL URLWithString: WebServiceURL];
    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];

    NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];
    [req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [req addValue:@"http://Itcurves.net/GetClientTrips" forHTTPHeaderField:@"SOAPAction"];
    [req addValue:msgLength forHTTPHeaderField:@"Content-Length"]; //---set the HTTP method and body--- 
    [req setHTTPMethod:@"POST"]; 
    [req setHTTPBody:[soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

    NSLog(@"%@\n", soapMsg); 
    RequestStep = @"GetClientTripsResult";
    if (conn) {
        [conn release];
    }

    conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];

    if (conn) 
    { 
        webData = [[NSMutableData data] retain];
    }
}

-(void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response {

    [webData setLength: 0];
}

-(void) connection:(NSURLConnection *) connection didReceiveData:(NSData *) data 
{ 
    [webData appendData:data];
}

-(void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error {
    NSLog(@"Test: %@", error);
    [webData release]; 
    [connection release];
}

-(void) connectionDidFinishLoading:(NSURLConnection *) connection 
{ 
    NSLog(@".........DONE. Received Bytes: %d", [webData length]); 
    NSString *theXML = [[NSString alloc]    //---shows the XML---
                        initWithBytes:[webData mutableBytes] length:[webData length]
                        encoding:NSUTF8StringEncoding];
    NSLog(@"\n\n %@",theXML);
    if([theXML length] < 120)
    {
        if(indexCount < 3)
        {
            if([RequestStep isEqualToString:@"GetClientTripsResult"])
                [self SendClientInfo];
            indexCount = indexCount +1;
        }
        else {
            RequestStep = @"end";
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Result" message:@"Server was unable to process request" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [alert show]; 
            [alert release];
        }

    }   

    [theXML release];                                                                                       

    /*  CODE TO RELEASE XML start  */
    if (xmlParser) 
    { 
        [xmlParser release];
    }
    [soapResults setString:@""]; 

    xmlParser = [[NSXMLParser alloc] initWithData: webData]; 
    [xmlParser setDelegate:self]; 
    [xmlParser setShouldResolveExternalEntities:YES]; 

    /*  CODE TO RELEASE XML end  */
    NSLog(@"Step: %@, %@",RequestStep, soapResults);
    if([RequestStep isEqualToString:@"GetClientTripsResult"])
    {
        qelementName = @"ConfirmationsNumber";
        [xmlParser parse];
        if ([soapResults length]> 0) 
        {
            NSString * ConformNo = soapResults;
            qelementName = @"TripState";
            [soapResults setString:@""];
            [xmlParser parse];
            if ([soapResults length] > 1) {
                NSLog(@"Step2: %@, %@",RequestStep, soapResults);
                indexCount =0;
                RequestStep = @"end";

            }
            else{               
                qelementName = @"DeclineReason";
                [soapResults setString:@""];
                [xmlParser parse];
                RequestStep = @"end";               
            }
        }
    }   
    if([RequestStep isEqualToString: @"end"])
    {
        //  [connection release];                                                                                                                                    
        //  [webData release];      
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:46:14.200

每当我使用 NSXMLParser 时，我都会使用回调来解析它。这是我用于此的代码：

首先设置委托和一个类变量

```
@interface FooBarClass : UIViewController <NSXMLParserDelegate>
{
    NSMutableString *currentElementValue;
} 
```

然后无论您需要获取 url 并设置 xmlparser

```
NSString *address = [[NSString alloc] initWithString:@"http://somewebservice"];
NSURL *url = [[NSURL alloc] initWithString:address];

NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];

[url release];

[xmlParser setDelegate:self];

[xmlParser parse];
[xmlParser release]; 
```

然后是回调：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict
{

if([elementName isEqualToString:@"Foo"]) {  //start of main element to save
    if (Bar) 
    {
        [Bar release];
        Bar = nil;
    }
    Bar = [BarType alloc];
}

//finding characters in an element. could be multiple calls so append here
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string 
{

if(!currentElementValue)
    currentElementValue = [[NSMutableString alloc] initWithString:string];
else
    [currentElementValue appendString:string];
}

//ending elements
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName 
{

NSString *trimmedValue = [currentElementValue stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

if([elementName isEqualToString:@"Foo"])   //this is the end of the top level object so add it to our array
{
    [fooArray addObject:Bar];

}
else if([elementName isEqualToString:@"Foo2"])  //this is one of the features so we set it in our object
{
    Bar.fooBarString = trimmedValue;
}

[currentElementValue release];  //release this to make room for the next element
currentElementValue = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:54:21.697

我使用名为 sudzc 的库，它生成 Web 服务的所有方法，因此您不必解析服务器响应并直接获取可供使用的数组。

# ruby-on-rails - Nginx代理https到非标准端口上的http？

> ID：10168155
> 
> 赞同：12
> 
> 时间：2012-04-16T02:44:27.290
> 
> 标签：ruby-on-rails, http, nginx

我已将 nginx 配置为将 https 流量代理到在同一台机器上运行的 http 服务器。

当我将 nginx 配置为从 https 端口 443 侦听/代理时，一切正常。但我真的想在非标准端口上侦听。当我配置一个非标准端口时，nginx 收到请求并将其发送到我的 http 服务器，正如它应该的那样，但服务器正在响应一个 HTTP 重定向回浏览器，告诉它重定向到'https://server. com/someurl”。我的意思是重定向 url 看起来不错，只是它缺少正确的端口。我是否缺少需要在代理中设置的 HTTP 标头？

具体来说，我正在运行 Tracks 的 http 实例；[http://getontracks.org](http://getontracks.org)。如果重要的话。

我的（在标准端口上工作）nginx 服务器配置：

```
location /{
    proxy_pass http://localhost:50000;
    proxy_next_upstream error timeout invalid_header http_500 http_502 http_503;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto https;
    proxy_redirect off;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-14T15:21:59.747

问题源于这条线 -

```
proxy_set_header Host $host; 
```

在发出重定向响应时，您的 Web 服务器（WEBrick）又包含此内容。

您可以将其更改为包含非标准端口 -

```
proxy_set_header Host $host:$server_port; 
```

这应该解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:44:32.263

这更多是在上游主机（Tracks）上运行的应用程序的问题，而不是 Web 服务器配置的问题（当然，除非您的上游 Web 服务器配置包含重写规则）。不同的应用程序以不同的方式处理这些情况：有些需要显式配置参数，告诉他们应用程序可以访问的实际 URL，有些使用某些 HTTP 标头，有些使用其他 HTTP 标头。

由于 Tracks 是一个 Rails 应用程序，如果您在问题中添加相应的标签[ruby​​-on-rails](/questions/tagged/ruby-on-rails "显示标记为“ruby-on-rails”的问题")，您最终可能会获得更多知识渊博的答案。

# comparison - 比较防火墙后的两个 HTML 页面

> ID：10168157
> 
> 赞同：0
> 
> 时间：2012-04-16T02:45:05.720
> 
> 标签：comparison

我有两个 HTML 页面，页面的内容是第 1 列和第 2 列。Column1 在两页中具有相同的数据，而列 2 不同（将列 2 视为计数器值）。我如何比较这两个页面

我有的选择：

1）使用我使用的工具（可能是 SoapUI）编写脚本并解析每个 html 页面 2）使用一些可用于 Java/Perl/Python 的内置库

我正在寻找类似[quickdiff.com](http://quickdiff.com)的方式。

注意： html 页面有防火墙，公众无法访问，这意味着互联网上可用的差异工具不起作用。这两个 html 页面是来自同一网站的实例。

有关如何解决此问题的任何指示？

谢谢

**编辑**：正如我所提到的，html页面包含两列，其中第1列在两个页面中相同，而column2是一个计数器值。如果column1的值为“a”，column2在第1页中为1，那么column1也是“a”并且 column2 在第 2 页中为 2，这些将被 diff 命令视为不同。我想将它们视为相同。换句话说，忽略 column2，只看到 column1 的差异

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T02:54:38.623

您可以使用`wget`and`diff`来显示差异：

```
diff <(wget -q -O - http://www.site1.com/) <(wget -q -O - http://www.site2.com/) 
```

# python - 如何使用 Python 从终端使用默认 Web 浏览器打开 url？

> ID：10168158
> 
> 赞同：1
> 
> 时间：2012-04-16T02:45:12.530
> 
> 标签：python, windows, linux, macos, terminal

> **可能重复：**
> [是否可以使用带有 python 的默认 Internet 浏览器打开某些网址？](https://stackoverflow.com/questions/4039924/is-it-possible-to-open-up-certain-web-addresses-using-the-default-internet-brows)

我知道 OS X 有一个`open`命令，您可以在其中传入一个 URL，它会打开默认浏览器并将其指向给定的域。

但是我将如何为其他基于 unix 和基于 windows 的机器执行此操作？基本上，我想制作一个 CLI（用 python 编写），并有一种跨操作系统的方式从终端打开浏览器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T02:47:27.927

[`webbrowser`](http://docs.python.org/library/webbrowser.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T02:48:00.373

“Unix”没有；OS X 可以。Linux 和 *BSD，如果他们安装了 freedesktop.org 的东西，应该有`xdg-open`（如果你幸运的话，它甚至会做一些明智的事情）；Windows 有`start`（如，`start http://some.url`应该可以工作）。有[更好的方法](http://docs.python.org/library/webbrowser.html)可以便携地做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:15:03.390

```
import os

if os.name == 'posix':
    os.system("open "+str(website))
elif os.name == 'nt':
    os.system("start "+str(website)) 
```

# postgresql - 使用 psql 命令行终端程序更新数据库

> ID：10168159
> 
> 赞同：1
> 
> 时间：2012-04-16T02:45:42.407
> 
> 标签：postgresql, command-line, psql

有人可以给出使用 psql 命令行终端程序更新我的数据库的步骤吗？

我在 pgAdmin 中创建了一个 PostgreSQL 数据库，并将其作为 PLAIN 文件（纯文本脚本）支持。我无法在 pgAdmin 中恢复该文件。在这个[这个网站上](http://www.enterprisedb.com/resources-community/tutorials-quickstarts/windows/how-use-pgdump-and-pgrestore-postgres-plus-tutoria)，它说您可以使用“psql命令行终端程序”执行纯文本脚本文件，以重新创建数据库并加载数据。

所以我只是想知道是否有人可以提供执行此操作的步骤，以便我可以更新我当前的数据库（在 pgAdmin 之外）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T03:00:04.253

以用户 postgres（或任何其他具有必要权限的用户）的身份在数据库服务器的 shell 中运行：

```
postgres@db:~$psql 
  CREATE DATABASE mydb;
  \c mydb
  \i /path/to/backup.sql 
```

因此，您创建了一个数据库，连接到它并从文件中运行纯文本 SQL 脚本以恢复内容。

[手册中有关 psql 的详细信息。](http://www.postgresql.org/docs/current/interactive/app-psql.html)

# javascript - 创建字符串中所有图像的数组的最佳方法是什么？

> ID：10168163
> 
> 赞同：0
> 
> 时间：2012-04-16T02:46:32.683
> 
> 标签：javascript, jquery

我希望在 HTML 字符串中创建所有图像的数组。

我尝试使用以下内容，但如果 src 中不存在完整的 URL 路径，则会生成错误。

```
var found = $(html).find('img'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:16:33.983

您可以通过创建“即时” html 元素来使用简单而纯正的 JavaScript 来做到这一点：

1.  创建一个元素
2.  将字符串插入为 innerHTML
3.  查询节点

例子：

```
var html = "<html><body><img src='/img1.png' /><br /><img src='/img2.png' /></body></html>";

var node = document.createElement("div");
node.innerHTML = html;

for(var i=0; i < node.children.length; i += 1) {
    if (node.children[i].tagName === 'IMG') {
        alert(node.children[i].src)
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:04:48.200

```
$("img").each(
      function(index) {
         theArray.push( $(this).attr("src") );
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:08:15.840

试试这个：

```
var imgArray = $('img'),
    srcArray = [];

console.log(imgArray);  // array of imgs

$.each(imgArray, function() {
   srcArray.push(this.src));
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T03:09:08.837

快速了解如何实现这一目标：

使用 jQuery 的 DOM Ready 功能打开 ->

```
$(function(){ 
```

`found`创建包含元素集合的变量。

```
 var found = $('p > img'); 
```

创建一个空数组来保存我们的结果。

```
 var results = new Array(); 
```

遍历我们创建的每个元素`found`

```
 $.each(found, function(index,value){ 
```

对于我们找到的每个“值”（项目），我们想要获取 src，并将该 src 推送到数组中。

```
 results.push($(value).attr('src')); 
```

错误关闭

```
 }); 
```

提醒数组中的项目总数；

```
 alert('There is a total of '+results.length+' results in the Array.'); 
```

只提醒我们添加到数组中的第三项的 src。

```
 alert('The src of the 3rd item is: '+results[2]); //3nd item in array, indexes are 0 based 
```

错误关闭

```
}); 
```

希望这有助于澄清一些事情。

# php - MYSQL 查询突然不再工作

> ID：10168167
> 
> 赞同：0
> 
> 时间：2012-04-16T02:47:32.183
> 
> 标签：php, mysql, wordpress

我有以下 MySQL 从几个表中获取数据：

```
SELECT * FROM $wpdb->posts
    LEFT JOIN taxi ON ($wpdb->posts.ID = taxi.taxiID)
    LEFT JOIN $wpdb->term_relationships ON ($wpdb->posts.ID = $wpdb->term_relationships.object_id)
    LEFT JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
    WHERE $wpdb->posts.post_status = 'publish' 
    AND $wpdb->posts.post_type = 'post' 
    AND $wpdb->posts.post_date < NOW()+INTERVAL 1 DAY 
    AND $wpdb->term_taxonomy.taxonomy = 'category' 
    AND $wpdb->term_taxonomy.term_id IN(3)
    AND taxi.taxiID IS NULL
    AND ($wpdb->postmeta.meta_key = 'EndDate' AND $wpdb->postmeta.meta_value > DATE_ADD(NOW(), INTERVAL 3 HOUR)) 
```

到昨天为止，查询没有返回任何结果，但问题是：它过去两周一直返回结果！

经过大量的试验和错误，我将问题缩小到这一行：

```
AND taxi.taxiID IS NULL 
```

该行应该使结果过滤以仅显示出租车表中没有记录的那些帖子。

谁能帮我弄清楚如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:47:50.943

会不会是您的 PHP 脚本超时了？请记住，只是 b/c SQL 查询不会改变，并不意味着数据也不会改变。如果查询太复杂或数据太多，它肯定会导致超时。这可以解释为什么它在 phpmyadmin 中有效，但在您的 PHP 脚本中无效。phpmyadmin 添加了一个 LIMIT 子句，允许 mysql 服务器只返回一小部分结果，因此很少超时。

尝试将 max_execution_time 设置为更高的值。

```
ini_set('max_execution_time', 300); //300 seconds = 5 minutes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:57:45.500

如果此查询在 heredoc 中，请明确您的插值。[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
$query = <<<HERE
SELECT * FROM {$wpdb->posts}
    LEFT JOIN userContests ON ({$wpdb->posts}.ID = taxi.taxiID)
    LEFT JOIN {$wpdb->term_relationships} ON ({$wpdb->posts}.ID = {$wpdb->term_relationships}.object_id)
    LEFT JOIN {$wpdb->term_taxonomy} ON ({$wpdb->term_relationships}.term_taxonomy_id = {$wpdb->term_taxonomy}.term_taxonomy_id)
    WHERE {$wpdb->posts}.post_status = 'publish' 
    AND {$wpdb->posts}.post_type = 'post' 
    AND {$wpdb->posts}.post_date < NOW()+INTERVAL 1 DAY 
    AND {$wpdb->term_taxonomy}.taxonomy = 'category' 
    AND {$wpdb->term_taxonomy}.term_id IN(3)
    AND ({$wpdb->postmeta}.meta_key = 'EndDate' AND {$wpdb->postmeta}.meta_value > DATE_ADD(NOW(), INTERVAL 3 HOUR))
HERE 
```

# jquery - jQuery - Ruby Rails - fadeTo 淡化所有 div

> ID：10168168
> 
> 赞同：0
> 
> 时间：2012-04-16T02:47:39.190
> 
> 标签：jquery, ruby-on-rails-3

我正在尝试 jQuery fadeTo 淡化 div （错误类）的背景颜色，同时保持内部 div 不变。但是在 Chrome 和 firefox 中，“错误”div 和内部 div 中的任何文本都会褪色。在 IE 中它可以工作，只是错误 div 褪色，但里面没有任何 div。如何为所有浏览器工作？

简而言之，我根本不希望任何内部 div 褪色。

看法 -

```
<div class="error" style="display: inline-block;z-index:1;">
<div style="position:relative;z-index:2;">Error: <%= @a[:error] %>
</div>
</div> 
```

html -

```
<div class="error" style="z-index:1;height=300px;width=500px;">
<div style="position:relative; z-index:2;">Error: some error</div>
</div> 
```

javascript -

```
$(document).ready(function(){
$(".error").fadeTo("slow",0.20);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:14:34.157

发生这种情况是因为所有元素的默认背景实际上是透明的。内层 div 的透明背景显示了外层 div 不断变化的背景。

为了防止这种情况，只需给错误 div 中的 div 一个明确的背景，例如使用这个 css：

```
.error div { background: white; } 
```

即'给类“错误”的 div 中的任何 div 一个白色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T21:52:25.640

[在这里](https://stackoverflow.com/questions/39067919/fade-out-all-objects-except-one/39068239#39068239)查看我 关于使用 fadeTo 的回答。简单的答案是 fadeTo 不会让你这样做，因为 opacity 应用于所有子子项。使用动画并将背景颜色设置为 0 的 alpha。

# android - 从 AsyncTaskLoader 更新 UI

> ID：10168171
> 
> 赞同：5
> 
> 时间：2012-04-16T02:48:21.000
> 
> 标签：android, android-asynctask, android-ui, asynctaskloader

我已经将我的转换`AsyncTask`为`AsyncTaskLoader`（主要是为了处理配置更改）。我有一个`TextView`我正在使用的进度状态，并正在使用`onProgressUpdate`它`AsyncTask`来更新它。它看起来没有`AsyncTaskLoader`等价物，所以在`loadInBackground`（在`AsyncTaskLoader`）期间我正在使用这个：

```
getActivity().runOnUiThread(new Runnable() {
    public void run() {
        ((TextView)getActivity().findViewById(R.id.status)).setText("Updating...");
    }
}); 
```

我在 a 中使用它`Fragment`，这就是我使用`getActivity()`. 这工作得很好，除非发生配置更改，例如更改屏幕方向。我`AsyncTaskLoader`一直在运行（这就是我使用 的原因`AsyncTaskLoader`），但`runOnUiThread`似乎被跳过了。

不知道为什么会跳过它，或者这是否是从 `AsyncTaskLoader`.

更新：

我最终恢复到一个`AsyncTask`，因为它似乎更适合 UI 更新。希望他们可以将与 an`AsyncTask`与`AsyncTaskLoader`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-31T10:12:58.363

嗯……你不应该这样做。

因为匿名类如何访问父类方法或字段是通过存储对父类的不可见引用。

例如你有一个`Activity`：

```
public class MyActivity
    extends Activity
{
    public void someFunction() { /* do some work over here */ }

    public void someOtherFunction() {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                while (true)
                    someFunction();
            }
        };
        new Thread(r).start(); // use it, for example here just make a thread to run it.
    }
} 
```

编译器实际上会生成如下内容：

```
private static class AnonymousRunnable {
    private MyActivity parent;
    public AnonymousRunnable(MyActivity parent) {
        this.parent = parent;
    }

    @Override
    public void run() {
        while (true)
            parent.someFunction();
    }
} 
```

因此，当您的父`Activity`级销毁（例如，由于配置更改）并且您的匿名类仍然存在时，整个活动不能被 gc-ed。（因为有人仍然持有参考资料。）

**这成为内存泄漏，让您的应用程序陷入困境！！！**

如果是我，我会为这样的加载器实现“onProgressUpdate()”：

```
public class MyLoader extends AsyncTaskLoader<Something> {
    private Observable mObservable = new Observable();
    synchronized void addObserver(Observer observer) {
        mObservable.addObserver(observer);
    }
    synchronized void deleteObserver(Observer observer) {
        mObservable.deleteObserver(observer);
    }

    @Override
    public void loadInBackground(CancellationSignal signal)
    {
        for (int i = 0;i < 100;++i)
            mObservable.notifyObservers(new Integer(i));
    }
} 
```

在你的`Activity`课堂上

```
public class MyActivity extends Activity {
    private Observer mObserver = new Observer() {
        @Override
        public void update(Observable observable, Object data) {
            final Integer progress = (Integer) data;
            mTextView.post(new Runnable() {
                mTextView.setText(data.toString()); // update your progress....
            });
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreated(savedInstanceState);

        MyLoader loader = (MyLoader) getLoaderManager().initLoader(0, null, this);
        loader.addObserver(mObserver);
    }

    @Override
    public void onDestroy() {
        MyLoader loader = (MyLoader) getLoaderManager().getLoader(0);
        if (loader != null)
            loader.deleteObserver(mObserver);
        super.onDestroy();
    }
} 
```

记住`deleteObserver()`期间`onDestroy()`很重要，这样加载器就不会永远持有对您的活动的引用。（加载器可能会在您的`Application`生命周期中保持活动状态......）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T09:07:30.823

这实际上是可能的。您基本上需要子类化`AsyncTaskloader`并实现一个`publishMessage()`方法，该方法将使用 a`Handler`将进度消息传递给任何实现`ProgressListener`（或任何您想调用的）接口的类。

下载此示例：[http](http://www.2shared.com/file/VW68yhZ1/SampleTaskProgressDialogFragme.html) ://www.2shared.com/file/VW68yhZ1/SampleTaskProgressDialogFragme.html （如果离线，请告诉我） - 这是基于[http://habrahabr.ru/post/131560/](http://habrahabr.ru/post/131560/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:34:06.240

回答我自己的问题，但据我所知，`AsyncTaskLoader`如果您需要更新 UI，这并不是最好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T03:40:38.160

在您实现的类`LoaderManager.LoaderCallback`（大概是您的活动）中，有一个`onLoadFinished()`您必须重写的方法。这是`AsyncTaskLoader`完成加载后返回的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-01T22:15:37.720

**最好的方法是使用 LiveData，100% Working**

第 1 步：在项目创建期间添加生命周期依赖项或使用 androidx 工件为 yes

```
implementation "androidx.lifecycle:lifecycle-livedata:2.1.0" 
```

步骤2：如下创建loader类，在loader create in public方法中设置可以从activity或fragment中观察到的livedata。请参阅我的加载程序类中的**setLiveCount**方法。

```
package com.androidcodeshop.asynctaskloaderdemo;

import android.content.Context;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.lifecycle.MutableLiveData;
import androidx.loader.content.AsyncTaskLoader;

import java.util.ArrayList;

public class ContactLoader extends AsyncTaskLoader<ArrayList<String>> {

private MutableLiveData<Integer> countLive = new MutableLiveData<>();

synchronized public void setLiveCount(MutableLiveData<Integer> observer) {
    countLive = (observer);
}

public ContactLoader(@NonNull Context context) {
    super(context);
}

@Nullable
@Override
public ArrayList<String> loadInBackground() {
    return loadNamesFromDB();
}

private ArrayList<String> loadNamesFromDB() {

    ArrayList<String> names = new ArrayList<>();
    for (int i = 0; i < 10; i++) {
        try {
            Thread.sleep(1000);
            names.add("Name" + i);
            countLive.postValue(i);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    return names;
}

@Override
protected void onStartLoading() {
    super.onStartLoading();
    forceLoad(); // forcing the loading operation everytime it starts loading
}
} 
```

步骤 3：从活动中设置实时数据并观察变化如下

```
package com.androidcodeshop.asynctaskloaderdemo;

import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import androidx.lifecycle.MutableLiveData;
import androidx.loader.app.LoaderManager;
import androidx.loader.content.Loader;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity implements 
LoaderManager.LoaderCallbacks<ArrayList> {

private ContactAdapter mAdapter;
private ArrayList<String> mNames;
private MutableLiveData<Integer> countLiveData;
private static final String TAG = "MainActivity";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mNames = new ArrayList<>();
    mAdapter = new ContactAdapter(this, mNames);
    RecyclerView mRecyclerView = findViewById(R.id.recycler_view);
    mRecyclerView.setLayoutManager(new LinearLayoutManager(this));
    mRecyclerView.setAdapter(mAdapter);
    countLiveData = new MutableLiveData<>();
    countLiveData.observe(this, new androidx.lifecycle.Observer<Integer>() {
        @Override
        public void onChanged(Integer integer) {
            Log.d(TAG, "onChanged: " + integer);
            Toast.makeText(MainActivity.this, "" + 
    integer,Toast.LENGTH_SHORT).show();
        }
    });

    // initialize the loader in onCreate of activity
    getSupportLoaderManager().initLoader(0, null, this);
    // it's deprecated the best way is to use viewmodel and livedata while loading data
}

@NonNull
@Override
public Loader onCreateLoader(int id, @Nullable Bundle args) {

    ContactLoader loader = new ContactLoader(this);
    loader.setLiveCount(countLiveData);
    return loader;
}

@Override
public void onLoadFinished(@NonNull Loader<ArrayList> load, ArrayList data) {
    mNames.clear();
    mNames.addAll(data);
    mAdapter.notifyDataSetChanged();
}

@Override
public void onLoaderReset(@NonNull Loader loader) {
    mNames.clear();
}

@Override
protected void onDestroy() {
    super.onDestroy();
}

} 
```

希望这会对您有所帮助:) 快乐编码

# google-app-engine - GAE 中的全文搜索

> ID：10168172
> 
> 赞同：2
> 
> 时间：2012-04-16T02:48:25.397
> 
> 标签：google-app-engine, gql, gae-eclipse-plugin

我正在使用 GAE/J + Objectify 开发一个测试应用程序，现在尝试使用全文搜索查询我的数据（假设全文搜索与使用 GQL 查询我的数据相同）。当我去[http://localhost:8888/_ah/admin/search](http://localhost:8888/_ah/admin/search)它显示我以下错误：

> Empty 命名空间中没有全文搜索索引。您需要先以编程方式添加数据，然后才能使用此工具查看和编辑数据。

我的数据库中确实有一些数据来测试搜索。

我应该怎么做才能使用 GQL 搜索我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:23:18.423

我相信 FTS 仍处于受信任的测试程序计划下（即使是开发环境，我也没有看到任何官方文档）

您可能想尝试在这里注册：

[https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dEdWcnRJUXZ2VGR3YmVsT1Q1WVB2Smc6MQ](https://docs.google.com/a/google.com/spreadsheet/viewform?formkey=dEdWcnRJUXZ2VGR3YmVsT1Q1WVB2Smc6MQ)

# c++ - 使用递归的霍纳规则 C/C++

> ID：10168176
> 
> 赞同：3
> 
> 时间：2012-04-16T02:49:02.480
> 
> 标签：c++, recursion

我在这里第一次了解了霍纳规则： [C++中的霍纳规则](https://stackoverflow.com/questions/1697683/horners-rule-c) 由于我正在学习递归ATM，我想知道是否可以使用递归来实现这个算法？

```
int HornerR( int a[], int n, int x, int index )
{
    if (index==n) return a[n];
    else  
        return x*HornerR(a,n ,x,index+1) + a[index];
} 
```

我认为只有第四个参数才有可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:46:37.340

你可以用指针算术来做到这一点：

1.  数组末尾的基本情况（检查 n）返回常量参数
2.  递归案例返回当前单元格添加到变量乘递归调用
3.  递归调用将数组移动到下一个单元格并更新计数器 (n)

基本上，这使您可以通过将数组移动到下一个位置并发送它（并始终使用第一个单元格）来计算索引变量，而不是每次都发送整个数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-24T17:40:36.500

您可以在函数中使用 3 个参数按如下方式实现该函数，前提是数组 pi 包含从索引 0 到度+1 的从最高度到 0 的系数。例如 3x^2 + 2x^1 + 1 => pi[3] = { 3,2,1}

```
int compute_by_horner(int *pi, int degree, int x)
{
int i, j;

if (degree == 0)
{
    return pi[0];
}

return compute_by_horner(pi, degree-1, x) * x + pi[degree];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:31:36.237

与其传递索引，不如将其`a`视为指针（因为它是）。除此之外，您还需要减少`n`，并跟踪它是否已经减少到零，而不是跟踪是否`index==n`.

# grails - 构建战争时删除插件视图（gsp）

> ID：10168179
> 
> 赞同：1
> 
> 时间：2012-04-16T02:49:44.603
> 
> 标签：grails, war, custom-build

我们在 grails 应用程序中使用了各种插件（如日志记录、spring security core、ui、acl 和许多其他插件）。现在这些插件带有默认 gsps（在每个插件的 views 文件夹中）。

我想构建一个不包含任何插件视图的 WAR。因此，当现在构建战争时，它会创建插件文件夹，其中包含插件默认附带的视图文件夹，这些视图引入了很多漏洞，所以我想排除插件视图。

我现在正在 BuildConfig.groovy 中尝试这个，如下所示：

```
grails.project.dependency.resolution = {
grails.war.resources = { stagingDir ->
   println "Customized delete started..."
   delete{fileset dir: "${stagingDir}/WEB-INF/plugins/logging-0.1/grails-app/views/"}
   delete{fileset dir: "${stagingDir}/WEB-INF/plugins/spring-security-ui-0.1.2/grails-app/views/"}
    }
   } 
```

但问题是代码试图在战争构建过程尚未创建视图时删除它们。因此，对于那些插件视图，我得到了一个找不到文件的错误。

我应该在哪里编写代码来删除插件视图，以便在构建 WAR 时它们已经创建并可删除，或者我如何不将插件视图包含在 WAR 中？

在此先感谢.. Priyank

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T07:03:10.273

我在 Grails 邮件列表中回答了这个问题。 [http://grails.1312388.n4.nabble.com/deleting-plugins-views-gsp-when-building-the-war-td4560517.html](http://grails.1312388.n4.nabble.com/deleting-plugins-views-gsp-when-building-the-war-td4560517.html) （答案还没有出现在nabble中）

您可以在 scripts/_Events.groovy 文件中指定的 eventCreateWarStart 事件中从/向 war 文件中删除/添加文件。

这可能有效：

文件名：脚本/_Events.groovy

```
eventCreateWarStart = { warName, stagingDir ->
   Ant.delete(dir: "${stagingDir}/WEB-INF/plugins/logging-0.1/grails-app/views")
   Ant.delete(dir: "${stagingDir}/WEB-INF/classes", includes:"gsp_logging*.*")
   Ant.delete(dir: "${stagingDir}/WEB-INF/plugins/spring-security-ui-0.1.2/grails-app/views")
   Ant.delete(dir: "${stagingDir}/WEB-INF/classes", includes:"gsp_springSecurityUi*.*")
} 
```

我不确定您是否也可以毫无问题地删除插件控制器类。我们使用过滤器类来“禁用”插件提供的控制器。

作为旁注，您可以使用尚未记录的“grails.plugins.excludes”功能在生产环境中禁用“仅开发”插件：

示例：在 Config.groovy 中：

```
import grails.util.Environment

if(Environment.current == Environment.PRODUCTION) {
    grails.plugin.excludes = ['somePluginName']
} 
```

# c++ - 犰狳安装

> ID：10168181
> 
> 赞同：3
> 
> 时间：2012-04-16T02:50:03.930
> 
> 标签：c++, g++, installation, armadillo

嗨，正如 README.txt 所说，我在自己的工作目录 /home/me/package/armadillo3.0.1/ 中安装了 Armadillo3.0.1。但是当我尝试一个例子时：

> g++ -I /home/me/package/armadillo3.0.1/usr/include/example.cpp -o example -O1

它总是显示错误：

> /tmp/ccZAE9pj.o: In function `void arma::gemm<false, false, false, false>::apply_blas_type<double>(arma::Mat<double>&, arma::Mat<double> const&, arma::Mat<double> const&, double, double)': example.cpp:(.text._ZN4arma4gemmILb0ELb0ELb0ELb0EE15apply_blas_typeIdEEvRNS_3MatIT_EERKS5_S8_S4_S4_[void arma::gemm<false, false, false, false>::apply_blas_type<double>(arma::Mat<double>&, arma::Mat<double> const&, arma::Mat<double> const&, double, double)]+0x75e): undefined reference to`wrapper_dgemm_' /tmp/ccZAE9pj.o: In function `void arma::glue_times_redirect2_helper<true>::apply<arma::Mat<double>, arma::Mat<double> >(arma::Mat<arma::Mat<double>::elem_type>&, arma::Glue<arma::Mat<double>, arma::Mat<double>, arma::glue_times> const&)': example.cpp:(.text._ZN4arma27glue_times_redirect2_helperILb1EE5applyINS_3MatIdEES4_EEvRNS3_INT_9elem_typeEEERKNS_4GlueIS5_T0_NS_10glue_timesEEE[void arma::glue_times_redirect2_helper<true>::apply<arma::Mat<double>, arma::Mat<double> >(arma::Mat<arma::Mat<double>::elem_type>&, arma::Glue<arma::Mat<double>, arma::Mat<double>, arma::glue_times> const&)]+0xe69): undefined reference to`wrapper_dgemv_' example.cpp:(.text._ZN4arma27glue_times_redirect2_helperILb1EE5applyINS_3MatIdEES4_EEvRNS3_INT_9elem_typeEEERKNS_4GlueIS5_T0_NS_10glue_timesEEE[void arma::glue_times_redirect2_helper::apply, arma::Mat >(arma:: Mat::elem_type>&, arma::Glue, arma::Mat, arma::glue_times> const&)]+0x1175): undefined reference to `wrapper_dgemv_' collect2: ld 返回 1 exit status

但是，如果我添加 -larmadillo 选项，例如：

> g++ example.cpp -o 示例 -O1 -larmadillo

它通过调用旧版本来工作。如果我想使用 Mat.t() 等 3.0.1 中的新功能，它也会显示错误：

> example.cpp: In function 'int main(int, char**)': example.cpp:20: error: 'struct arma::mat' has no member named 't'</p>

这表明通过添加 -larmadillo，它从 /usr/include/armadillo_bits/ 调用旧版本的犰狳。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:43:07.203

在第一个命令中，您没有与*libarmadillo*链接。您是否考虑过使用*-L* gcc 选项来添加链接目录？例如：

> g++ -I/home/me/package/armadillo3.0.1/usr/include/ -L/home/me/package/armadillo3.0.1/usr/lib example.cpp -o example -O1 -larmadillo

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T11:58:24.420

我也遇到过这个问题。我已经通过卸载任何以前版本的犰狳来修复它，因为它们可能会干扰新版本。

卸载可以通过你的包管理器来完成。您还可以通过以下命令（在终端窗口中）手动删除旧版本：

```
 rm /usr/include/armadillo
   rm -rf /usr/include/armadillo_bits 
```

您需要以超级用户 (root) 身份运行上述命令。在 Ubuntu 上，在它们前面加上“sudo”就足够了。

您可能还需要删除旧的库文件，这些文件可能位于 /usr/lib/ 或 /usr/lib64/ 中，或类似这些行的东西。

删除旧版本后，您可以通过基于 cmake 的安装重新安装新的犰狳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T20:24:45.390

我删除了旧的并在默认目录中重新安装了新的。有效！所以似乎当我安装旧版本时：

> 安装 DESTDIR=my/own/dir/

它安装不正确。

因此对于像我这样的新手来说，默认安装更有意义。

# javascript - 当任何谷歌地图事件被触发时如何触发动作

> ID：10168183
> 
> 赞同：0
> 
> 时间：2012-04-16T02:50:52.790
> 
> 标签：javascript, google-maps-api-3

我正在使用 Google Maps API 3 实现一个应用程序。我想知道处理这个问题的最佳实现是什么。一旦 Google Map 中的任何事件被触发，我想执行一个动作。目前，我正在做的是每次调用特定事件时调用该函数。我发现这是多余的，我必须为所有事件创建一个监听器。那么，有没有一种方法可以概括这一点，我可以执行以下操作：

```
google.maps.addListener(everything_on_the_map_canvas, 'ANY_EVENT', function(event) {
  foo();
})

function foo(){
 //do something here
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:42:37.720

如果用户决定继续地图操作，他们必须将鼠标移到地图上才能做任何事情。所以你可以简单地捕获一个`mousemove`.

```
google.maps.event.addListener(map, 'mousemove', function(event) {foo();}) 
```

如果用户无需在地图上移动鼠标即可操作地图，那么您将需要监听其他事件。

*   `bounds_changed`将通过缩放和平移、标题等涵盖大多数可能性
*   `maptype_id_changed`

但这只是三个，而不是全部。如果倾斜时边界没有改变（并且您可以从地图外部更改倾斜），您可能还需要倾听`tilt_changed`。

# c# - 在特定书签处用 c# 打开 pdf

> ID：10168185
> 
> 赞同：1
> 
> 时间：2012-04-16T02:51:00.683
> 
> 标签：c#, pdf, bookmarks

我有一个现有的 pdf，我想在 c# 中的特定书签处打开它。下面是我正在使用的代码片段

```
string filepath = Common.executivePath.ToString() + @"\helpfile.pdf";
myProcess.StartInfo.FileName = "C:\\ProgramFiles\\Adobe\\Reader10.0\\Reader\\AcroRd32.exe";
myProcess.StartInfo.Arguments = "/A \"nameddest=Flexible Pavement Design\"  " + filepath;
myProcess.Start(); 
```

如果书签是一个单词（即没有空格，它可以正常工作），它可以正常工作。

```
myProcess.StartInfo.Arguments = "/A \"nameddest=Preface\"  " + filepath; 
```

这里书签的名称是“前言”。此外，如果书签嵌套在另一个内部，那也不起作用（我不确定这里的语法）。

```
myProcess.StartInfo.Arguments = "/A \"nameddest=Preface/Disclaimer"  " + filepath; 
```

除了我应该用来使其工作的参数之外，还有其他属性吗？

# css - CSS：使用列表项目符号和浮动避免折叠边距

> ID：10168186
> 
> 赞同：1
> 
> 时间：2012-04-16T02:51:38.270
> 
> 标签：css

```
<h3><img src="image.png" width="124" height="124" alt="" style="float: left;"/>This is a heading</h3>
This is text.
<ol>
<li>A list Item</a>
</li><li>Another list item</a>
</li><li><a href="http://www.facebook.com/TVN.cl">Another list item with a link</a>
</li>
</ol> 
```

我有一个图像我想漂浮在一些文本内容的左侧。我注意到有序和无序列表上的项目符号随浮动而折叠，并且向图像添加边距或填充不会添加任何效果。是否有任何干净的方法来保持列表边距，同时保留默认编号和项目符号？

![例子](../Images/fa8f98522afe3f68ff3a113d1239fccc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:03:44.860

嗨，您可以像这样定义 ol 浮点属性

**CSS**

```
ol{
float:left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T02:57:25.463

在你的 ol 标签上留出一个边距，让它向右移动

```
<h3><img src="image.png" width="124" height="124" alt="" style="float: left;"/>This is a heading</h3>
This is text.
<ol style="margin:0px 0px 0px 10px;">
<li>A list Item</a>
</li><li>Another list item</a>
</li><li><a href="http://www.facebook.com/TVN.cl">Another list item with a link</a>
</li>
</ol> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:11:40.977

给你的**OL**浮动，或者你可以使用这个**CSS** :-

```
 ol {
margin:0 0 0 10px;
padding:0px;
float:left;

}

ol li a {
color:#000;
text-decoration:none;
} 
```

# c++ - QThread内的睡眠功能

> ID：10168187
> 
> 赞同：0
> 
> 时间：2012-04-16T02:51:41.233
> 
> 标签：c++, multithreading, qt

做了很多研究，但找不到答案。我有一个应用程序，它是通过创建从 QObject 派生的实例构建的，我将这些实例移动到不同的线程。在这些“线程”中，我有一个 QNetworkAccessManager，我在其中请求天蓝色。我现在的问题是我有一些重试逻辑正在快速发生。例如，如果容器不存在，则需要创建它以重试请求（放置 blob）。问题是如果在容器创建后 put blob 请求发生得太快，它将无法上传任何内容。另外，我想增加重发之间的时间，这样它们就不会很快发生在彼此之后。强制线程从自身内部休眠的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:18:32.563

我可能最终会使用 QTimer 和信号/插槽的某种组合。例如：

```
// Slot
void retry() { ... }

...

// Execute retry code in 1 second:
QTimer::singleShot( 1000, this, SLOT(retry()) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:24:49.980

采用[`QThread::wait()`](http://doc.qt.nokia.com/4.7/qthread.html#wait)

# events - 搜索我使用 FQL 创建的事件

> ID：10168188
> 
> 赞同：0
> 
> 时间：2012-04-16T02:52:08.110
> 
> 标签：events, facebook-fql

```
SELECT pic_big, name, venue, location, start_time, eid 
FROM event WHERE eid IN (SELECT eid 
                         FROM event_member 
                         WHERE uid = me()) 
```

我觉得不仅我创建的事件，而且我加入的事件都可以通过这个查询找到。我不能参加与考试无关的活动。任何意见将是有益的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:56:01.527

我认为您只需要向该外部查询添加一个创建者过滤器。

```
SELECT pic_big, name, venue, location, start_time, eid 
FROM event 
WHERE eid IN (SELECT eid 
              FROM event_member 
              WHERE uid = me())
AND creator = me() 
```

# windows - 如何在 PE32 文件中找到导入部分的偏移量？

> ID：10168189
> 
> 赞同：0
> 
> 时间：2012-04-16T02:52:20.600
> 
> 标签：windows, assembly, executable, portable-executable

我一直试图解决这个问题好几个小时，但我似乎无法理解。我一直试图在 Microsoft 文档中查找信息，但信息量让我不知所措。我的问题是：应该如何在 PE32 文件中找到**导入部分的偏移量？**我不是指文件何时加载到内存中，而是指文件何时在磁盘上。我应该查看**对象表**的内部吗？另一个问题，对象表是否概述了紧随其后的部分？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:30:15.393

自从我在 PE 文件中四处挖掘以来已经有一段时间了，但是 . . .

如果我正确阅读了[文档](http://msdn.microsoft.com/en-us/windows/hardware/gg463119.aspx)，则节表紧跟在标题后面。您可以通过计算标题的大小直接定位到节表。

每个节表条目的长度为 40 个字节（参见文档的第 25 页）。第一个字段是一个 8 字节的名称。我假设您可以从中获取导入部分的名称。在记录中的偏移量 20 处是指向原始数据的指针。这被描述为“指向 COFF 文件中该部分的第一页的文件指针”。偏移 16 处的字段给出了大小。

所以你应该可以定位到段表，然后依次读取每个段头找到导入地址表，然后得到指向原始数据的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:06:28.860

看看[PeDump](http://www.wheaty.net/downloads.htm)。使用这个工具（提供源代码），您可以看到它是如何工作的。

# uiviewcontroller - Cocos2D 游戏中的设置画面

> ID：10168190
> 
> 赞同：0
> 
> 时间：2012-04-16T02:52:45.883
> 
> 标签：uiviewcontroller, cocos2d-iphone, settings, cclayer

**Cocos2D 游戏中的设置画面是如何创建的？**

我考虑过使用一个`UIViewController`子类，但是在 Cocos2D 中推动它似乎很笨拙。我还考虑过使用`CCLayer`带有按钮等的子节点。然后我可以在适当的时候为这个层设置动画。这是常见的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:47:04.447

如果您在游戏中使用 Cocos2D，您可能应该养成将设置屏幕构建为 Cocos2D 场景或图层的习惯，这样可以在游戏期间轻松地将它们设置为动画进出帧。添加视图控制器不是必需的，而且当创建 CCScene 或 CCLayer 如此容易时，实际上会使事情复杂化。

我更喜欢 CCLayer 方法，然后当用户按下设置按钮时，我可以为图层设置动画效果。底层的游戏玩法不会被删除，因为它是相同的场景。

另一种方法是将设置场景弹出到当前场景中。

# windows - Haxe 和 Windows API

> ID：10168193
> 
> 赞同：0
> 
> 时间：2012-04-16T02:53:47.113
> 
> 标签：windows, haxe

我试图在 Haxe 中使用 Windows API 来创建一个 Windows 应用程序。我已经使用 ndlls 和 Haxe/Neko 完成了这项工作。我尝试使用 cpp 目标执行此操作，其中我使用 Haxe 2.09 中的新宏功能将 C++ 代码嵌入到 Haxe 文件中。但是，一旦我包含`windows.h`它就会出现错误

```
./src/Main.cpp(79) : error C2039: 'RegisterClassA' : is not a member of 'hx'
./src/Main.cpp(81) : error C2660: 'RegisterClassA' : function does not take 9 arguments
Called from ? line 1
Called from BuildTool.hx line 1246
Called from BuildTool.hx line 554
Called from BuildTool.hx line 591
Called from BuildTool.hx line 710
Called from BuildTool.hx line 785
Uncaught exception - Error in building thread
Error : Build failed
Build halted with errors (haxe.exe). 
```

这是我的代码 -

```
import cpp.Lib;

@:headerCode("#include <windows.h>")// if i comment this line or replace windows.h with another standard header file like iostream, the error goes

class Main 
{
     static function main() 
     {
           //no code here   
     }
} 
```

事实上，如果我用`windows.h`Windows 或 DirectX SDK 中的任何头文件替换，我在使用 Haxe 2.09 和 FlashDevelop 时会遇到同样的错误。我使用的是 Windows 7。我也在使用最新版本的 hxcpp（2.09 版）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:03:14.360

看起来像是`<windows.h>`#defining `RegisterClass`to `RegisterClassA`（自动魔术Unicode支持的一部分）。

因为这是通过 text-prepropcessor 宏完成的，所以任何具有名为符号的代码`RegisterClass`（就像 BuildTool 的情况一样）都会自动将其替换`RegisterClassA`为.

试试这个：

```
@:headerCode("#include <windows.h>")
@:headerCode("#undef RegisterClass") 
```

您可能需要对其他冲突执行类似的操作。另请参阅[此问题](https://stackoverflow.com/q/1080635/21475)。

# mysql - 获取 SELECT 语句中的最后 3 行并将其设为 ASC 顺序

> ID：10168194
> 
> 赞同：1
> 
> 时间：2012-04-16T02:53:47.537
> 
> 标签：mysql, sql, sql-order-by

我有这个 mysql 查询，我只想查询我的 SELECT 语句的最后 3 行，并且我想再次将我的查询重新排序为 ASC 顺序，因为子查询在 DESC 中。

```
 SELECT * FROM( 
      SELECT * 
      FROM post_replies 
      WHERE post_replies.post_hash=:posthash 
      ORDER BY post_replies.reply_id DESC 
      LIMIT 3)
    ORDER BY reply_id ASC 
```

这是出现的错误

> CDbCommand 未能执行 SQL 语句：SQLSTATE[42000]：语法错误或访问冲突：1248 每个派生表都必须有自己的别名。执行的 SQL 语句是：SELECT * FROM( SELECT * FROM post_replies WHERE post_replies.post_hash=:posthash ORDER BY post_replies.reply_id DESC LIMIT 3) ORDER BY reply_id ASC

我不明白如何按照此处定义的方式将 mysql Alias 放在[这里](http://www.w3schools.com/sql/sql_alias.asp)

如何让我的查询只获取我的选择语句的最后 3 行并按 ASC 顺序生成结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T02:56:59.993

该错误只是告诉您需要*调用*您的子选择。您将别名放在子选择之后的右括号之后。这应该有效：

```
 SELECT a.* FROM( 
      SELECT * 
      FROM post_replies 
      WHERE post_replies.post_hash=:posthash 
      ORDER BY post_replies.reply_id DESC 
      LIMIT 3) a
    ORDER BY a.reply_id ASC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T02:56:27.560

我不是 MySQL 专家，但别名会放在派生表之后，如下所示：

```
SELECT * FROM( 
  SELECT * 
  FROM post_replies 
  WHERE post_replies.post_hash=:posthash 
  ORDER BY post_replies.reply_id DESC 
  LIMIT 3) ---> AS MyDerivedTable <---
ORDER BY reply_id ASC 
```

# android - 从 oAuth 认证的应用程序通过 SMTP 发送邮件所需的 Android 示例

> ID：10168201
> 
> 赞同：2
> 
> 时间：2012-04-16T02:55:10.743
> 
> 标签：android, oauth, smtp, gmail

我正在关注检索用户 Gmail 联系人的 oAuth 演示。我可以通过 oAuth 进行身份验证，并且让联系人工作得很好。

现在我想修改它以便能够通过 SMTP 发送电子邮件。我可以得到 oAuth 授权来做到这一点。

我的问题是我无法弄清楚下一步。通过身份验证后，如何格式化发送电子邮件的请求。

我不希望任何人为我编写代码，只需一个简单的链接到涵盖此内容的 google api 文档即可。我只是似乎找不到他们。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:52:59.740

我其实也一直在研究这个。如果您可以通过 OAuth 进行身份验证，那么您只需要通过 OAuth 为 Gmail 提供的 Google API 即可使其正常工作。我让 Gmail 使用 OAuth 作为 java 应用程序。不过，对于 Android，有趣的是 Google 提供的相同代码仅适用于 SMTP（不适用于 IMAP）。但我想它仍然会有所帮助。

以下链接将带您访问 Google 的 Gmail OAuth 协议： [https](https://developers.google.com/google-apps/gmail/oauth_overview) ://developers.google.com/google-apps/gmail/oauth_overview 他们已经准备好使用示例。确保您已准备好 JavaMail 和 OAuth 访问令牌。不过，您不需要 Apache Ant 来运行他们的示例代码。我刚刚使用了eclipse并运行了主类。

还知道 Gmail 的 OAuth 略有不同。我不确定您是如何进行身份验证的，但对于 Gmail，**范围**会有所不同：[https](https://mail.google.com/) ://mail.google.com/如果您不知道，**Scribe**将是一种非常方便的方式让 OAuth 在 Java 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T09:55:05.213

```
btnPreviewEmails.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) 
    {
        // TODO Auto-generated method stub
          String host="your smtp";
          final String user="from email address";//change accordingly
          final String password="frm email password";//change accordingly

          String to="to email";//change accordingly

           //Get the session object
           Properties props = new Properties();
           props.put("mail.smtp.host",host);
           props.put("mail.smtp.auth", "true");

           javax.mail.Session session = javax.mail.Session.getDefaultInstance(props,new javax.mail.Authenticator() {
                      protected javax.mail.PasswordAuthentication getPasswordAuthentication() {
                    return new javax.mail.PasswordAuthentication(user,password);
                      }
                    });

                   //Compose the message
                    try {
                     MimeMessage message = new MimeMessage(session);
                     message.setFrom(new InternetAddress(user));
                     message.addRecipient(javax.mail.Message.RecipientType.TO,new InternetAddress(to));
                     message.setSubject("javatpoint");
                     message.setText("This is simple program of sending email using JavaMail API");

                    //send the message
                     javax.mail.Transport.send(message);

                     System.out.println("message sent successfully...");

                     } 
                    catch (MessagingException e) 
                    {
                        e.printStackTrace();
                        }
    }}); 
```

# firebreath - FBLOG_TRACE() 没有记录到日志文件——FBLOG_INFO() 记录正常——有什么区别

> ID：10168202
> 
> 赞同：1
> 
> 时间：2012-04-16T02:55:15.027
> 
> 标签：firebreath

FIREBREATH 1.6 -- VC2010 -- 没有使用 FBLOG_TRACE("StaticInitialize()", "INIT-trace") 进行日志记录；

设置

outMethods.push_back(std::make_pair(FB::Log::LogMethod_File, "U:/logs/PT.log")); ... FB::Log::LogLevel getLogLevel(){ return FB::Log::LogLevel_Trace; ...

* * *

将“FBLOG_TRACE”更改为“FBLOG_INFO”记录到日志文件有效。我不明白原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T19:05:25.467

功能未插入其各自的区域

```
FB::Log::LogLevel getLogLevel(){
    return FB::Log::LogLevel_Trace; // Now Trace and above is logged.
} 
```

* * *

描述日志[在这里](http://www.firebreath.org/display/documentation/Logging)。

**启用日志记录** ...

1.  使用 prep* 脚本重新生成您的项目

2.  在您的项目中打开 Factory.cpp。您需要在PluginFactory**的类定义中定义以下函数：**

...

**关于日志级别**

...

如果要更改日志级别，则需要在 Factory.cpp 中定义以下内容：

参考上述内容，这意味着“Factory.cpp”中的**某处**。这是不正确的。描述应该说-->

如果要更改日志级别，则需要在PluginFactory**的类定义中定义以下函数：**

我将它从“Factory.cpp”的底部拖到 Class PluginFactory 内部。 **现在它按预期工作！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:31:27.480

具有不同日志级别（FBLOG_FATAL、FBLOG_ERROR、FBLOG_WARN、FBLOG_INFO、FBLOG_DEBUG、FBLOG_TRACE）的全部目的是为了让您可以配置要使用的级别，并且隐藏低于该级别的任何内容。FireBreath 中的默认日志级别是 FB::Log::LogLevel_Info，这意味着 INFO 之下的任何内容（例如 DEBUG 或 TRACE）都将不可见。

您可以通过在 Factory 类中覆盖 FB::FactoryBase::getLogLevel() 来更改此设置以返回 FB::Log::LogLevel_Trace。

您要覆盖的方法是：[https ://github.com/firebreath/FireBreath/blob/master/src/PluginCore/FactoryBase.cpp#L78](https://github.com/firebreath/FireBreath/blob/master/src/PluginCore/FactoryBase.cpp#L78)

LogLevel 枚举的定义： [https ://github.com/firebreath/FireBreath/blob/master/src/ScriptingCore/logging.h#L69](https://github.com/firebreath/FireBreath/blob/master/src/ScriptingCore/logging.h#L69)

有一个版本的 FireBreath 不起作用。我认为它是由 1.6.0 修复的，但我不记得了。如果这不起作用，请尝试在 1.6 分支上更新到最新版本（在撰写本文时，它目前是 1.6.1，但我还没有时间发布）

# tinymce - 使用 tinymce 编辑器插件正确格式化布尔标记属性

> ID：10168207
> 
> 赞同：7
> 
> 时间：2012-04-16T02:56:13.757
> 
> 标签：tinymce, microdata

我正在为 tinymce 编辑器构建一个插件，它将一些微数据添加到选定的文本中，我想确保最终的标记是有效的。根据微数据规范草案的[规定](http://www.w3.org/TR/microdata/#attr-itemscope)，通过将属性添加`itemscope`到元素来指示新项目，例如：

```
<section itemscope itemtype="http://example.com/vocab/someobject" itemid="someid" >
<meta itemprop="topic" content="something very interesting" />
  ....
  other microdata stuff
</section> 
```

我已经[扩展](http://www.tinymce.com/wiki.php/Configuration:extended_valid_elements)了 tinymce 的配置参数来识别这些微数据属性：

```
tinyMCE.init({
    ...
    schema: "html5",
    extended_valid_elements:"@[itemscope|itemtype|itemid|itemprop|content],div,span,time[datetime]"
    ...
}); 
```

一切正常。但是，当我使用该插件时，tiny mce 仍在通过向 itemscope 属性添加一个空值来“纠正”我的标记，如下所示`itemscope=""`：但是 itemscope 属性是一个**布尔**元素，AFAIU 表示它应该*没有*值。

所以问题是，a) 如果 itemscope 属性有值，它仍然是有效的标记吗？b）如果不是，（如何）我可以配置 tinymce 以将 itemscope 保留为适当的布尔属性，而不是附加`=""`位？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T07:20:36.287

布尔属性的值[必须是空字符串或属性本身的名称](http://www.w3.org/TR/html5/common-microsyntaxes.html#boolean-attributes)。所以, `<div itemscope>`, `<div itemscope="">`, 和`<div itemscope="itemscope">`都是等价的。

# android - 我在android中的应用程序文件夹在哪里？

> ID：10168211
> 
> 赞同：7
> 
> 时间：2012-04-16T02:56:57.513
> 
> 标签：android, file, filesystems

我的应用程序从手机的传感器记录了一些数据，并将数据存储到应用程序目录中的文件中。

我在调试模式下运行我的应用程序。我试图找到应用程序的文件夹并使用保存的数据打开文件。但是，我什至找不到应用程序的文件夹。在日志信息中，它说应用程序的位置是

```
" '/data/app/myAppPackage.apk' (success) ---" 
```

但我无法通过浏览手机的磁盘在任何地方找到它。

有什么提示吗？

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T03:00:52.563

据我了解，您将无法在移动设备上查看此数据。当你在 Eclipse 中测试应用程序时，你将能够在应用程序文件夹中看到新的数据集，但在你的手机上，它是由 APK 封装的。

尝试将值保存到 SD 卡？

# javascript - underscore.js _.memoize() 的例子？

> ID：10168219
> 
> 赞同：4
> 
> 时间：2012-04-16T02:58:57.310
> 
> 标签：javascript, coffeescript, underscore.js, sicp, memoization

谁能给我一个 underscore.js _.memoize() 的例子吗？

最好使用hashFunction，甚至更喜欢在coffeescript中？

这是来自咖啡脚本中 SICP 的可爱变化计数函数的略微修改版本：

```
countChange = (amount)->

  cc = (amount, kindsOfCoins)->

    firstDenomination = (kindsOfCoins)->
      switch kindsOfCoins
        when 1 then 1
        when 2 then 5
        when 3 then 10
        when 4 then 25

    if amount is 0 then 1
    else if amount < 0 or kindsOfCoins is 0 then 0
    else 
      (cc amount, (kindsOfCoins - 1)) + 
      (cc (amount - firstDenomination(kindsOfCoins)), kindsOfCoins)

  cc amount*100, 4

console.log "Ways to make change for $0.85: " + countChange(.85) 
```

例如，我如何使用下划线的 _.memoize() ？

提前谢谢了！

ps ..另外，请不要犹豫，在该函数的编码方式上留下漏洞。我对coffeescript很陌生，也欢迎任何关于使该代码更惯用的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T03:31:26.280

这里的一种用途`memoize`是减少对内部`cc`函数的调用次数：

```
n = 0
countChange = (amount)->
  firstDenomination = (kindsOfCoins) ->
    [1, 5, 10, 25][kindsOfCoins - 1]

  cc = (amount, kindsOfCoins)->
    ++n # This is just a simple counter for demonstration purposes
    return 1 if amount is 0
    return 0 if amount < 0 or kindsOfCoins is 0
    (cc amount, (kindsOfCoins - 1)) +
      (cc (amount - firstDenomination(kindsOfCoins)), kindsOfCoins)

  cc = _.memoize cc, (a,k) -> "#{a},#{k}"

  cc amount*100, 4

console.log "Ways to make change for $0.85: #{countChange(.85)}"
​console.log "#{n} iterations of cc" 
```

为了紧凑，我也重新安排了一些东西，当我在那里时，我搬到`firstDenomination`外面`cc`来简化；`cc`我的​​​​​​​​​​​​​​​​​​​​<code>firstDenomination是否比你的更好是一个品味问题，我对使用a `switch`to有偏见实现一个简单的查找表，但 YMMV。

记忆的版本说“cc的211次迭代”，演示：http: [//jsfiddle.net/ambiguous/FZsJU/](http://jsfiddle.net/ambiguous/FZsJU/)

非记忆版本说“cc 的 8141 次迭代”，演示：http: [//jsfiddle.net/ambiguous/Xn944/](http://jsfiddle.net/ambiguous/Xn944/)

所以非记忆版本调用的频率`cc`大约是 40 倍。根据散列函数的计算开销（我的足以用于演示目的，但没有完全优化）和缓存查找的开销，记忆可能值得也可能不值得。这是记忆时要问的标准问题：缓存比缓存计算快吗？

如果我们看一下的实现[`_.memoize`](https://github.com/jashkenas/underscore/blob/1.6.0/underscore.js#L652)：

```
// Memoize an expensive function by storing its results.
_.memoize = function(func, hasher) {
  var memo = {};
  hasher || (hasher = _.identity);
  return function() {
    var key = hasher.apply(this, arguments);
    return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));
  };
}; 
```

然后你可以看到它是如何工作的以及它`hasher`是如何使用的。该`memo`对象用作缓存，`hasher`用于将 memoized 函数的参数转换为 key in `memo`；如果我们找到键，那么我们可以立即返回缓存的值，否则我们会以（可能）慢的方式计算它，缓存它，然后返回它。

# mongodb - 在MongoDB中获取数组的第一个和最后一个元素

> ID：10168224
> 
> 赞同：4
> 
> 时间：2012-04-16T02:59:36.030
> 
> 标签：mongodb

Mongo DB：我正在寻找一个查询来返回数组的第一个和最后一个元素。我意识到我可以做多个查询，但我真的很想用一个来做。

假设一个集合“test”，其中每个对象都有一个数字数组“arr”：

```
 db.test.find({},{arr:{$slice: -1},arr:{$slice: 1}}); 
```

这将导致以下结果：

```
 { "_id" : ObjectId("xxx"), "arr" : [ 1 ] }    <-- 1 is the first element 
```

有没有办法给结果取别名？类似于 mysql`AS`关键字在查询中允许的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:09:48.190

目前这是不可能的，但如果我正确理解您的功能需求，现在正在开发中的聚合框架。

如果您首先有此要求，您必须想知道您的架构。您确定没有更优雅的方法可以通过相应地更改架构来使其工作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-30T13:21:49.673

这可以通过聚合框架使用运算符来完成，[`$first`](https://docs.mongodb.com/manual/reference/operator/aggregation/first-array-element/)如下[`$last`](https://docs.mongodb.com/manual/reference/operator/aggregation/last-array-element/)所示：

```
db.test.aggregate([
    { '$addFields': {
        'firstElem': { '$first': '$arr' },
        'lastElem': { '$last': '$arr' }
    } }
]) 
```

或[`$slice`](https://docs.mongodb.com/manual/reference/operator/aggregation/slice/)用作

```
db.test.aggregate([
    { '$addFields': {
        'firstElem': { '$slice': [ '$arr', 1 ] },
        'lastElem': { '$slice': [ '$arr', -1 ] }
    } }
]) 
```

# ruby - 如何将 xml 文件响应写入到文件中？

> ID：10168233
> 
> 赞同：1
> 
> 时间：2012-04-16T03:01:02.223
> 
> 标签：ruby, xml, marshalling, rest-client

我通过 rest-client 访问的应用程序（SAS for Azure blob）有一个 REST API。

当我做：

```
response = RestClient.get "RESTURL" 
```

我得到了 XML。

但是，当我尝试使用以下方法编写响应对象的内容时：

```
marshal_dump = Marshal.dump(response)
file = File.new(file_name,'w')
file.write marshal_dump
file.close 
```

我没有得到一个干净的 XML 文件。

如何从 RestClient.get 调用获取 XML 输出并将其写入 .xml 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:46:20.020

我相信这是 response.to_str：

```
File.open(file_name, 'w'){|f| f << response.to_str} 
```

# php - 解析错误：语法错误，意外 $end - 第 91 行

> ID：10168236
> 
> 赞同：0
> 
> 时间：2012-04-16T03:02:03.800
> 
> 标签：php, wordpress

我搜索了答案，发现缺少引号或括号会导致该错误。我检查了几次并添加了缺少的报价，但第 91 行在底部，所以我无法弄清楚，除非它是“ `else:`”我从上到下查看但我不确定哪个可能导致错误。请借给我你的眼睛找出问题所在。谢谢

```
<?php

if( ereg( '/[a-z-]+/[a-z]/$', $_SERVER['REQUEST_URI'])) {

$url_array = explode('/', $_SERVER['REQUEST_URI']); 
$alpha = $url_array[sizeof($url_array)-2];

$postids = $wpdb->get_col("
    SELECT p.ID
    FROM $wpdb->posts p
    WHERE p.post_title REGEXP '^" . $wpdb->escape($alpha) . "'
    AND p.post_status = 'publish' 
    AND p.post_type = 'book'
    AND p.post_date < NOW()
    ORDER BY p.post_title ASC"
);

if ($postids) {
  $args=array(
    'post__in' => $postids,
    'post_type' => 'list', 
    'post_status' => 'publish',
    'posts_per_page' => -1,
    'caller_get_posts'=> 1
  );
  $my_query = null;
  $my_query = new WP_Query($args);
  if( $my_query->have_posts() ) {

    while ($my_query->have_posts()) : $my_query->the_post(); ?>

    <div class="listing">

       <h3><a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a></h3>
        <?php the_excerpt(); ?>             
    </div>

      <?php
    endwhile;
    }

  }

}
 else {
    query_posts(array('post_type'=>'list')); 

    if (have_posts()) : while (have_posts()) : the_post(); 

     ?>          

    <div class="listing">
     <h3><a href="<?php the_permalink(); ?>" rel="bookmark"><?php the_title(); ?></a> </h3>
    <?php the_excerpt(); ?>             
    </div>

    <?php endwhile; else:?>

    <p>Sorry, no profiles matched your criteria.</p>

   <?php  endif; ?>
</div>

<?php get_sidebar(); ?>

</div>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:18:37.840

```
 ...
  else {
    query_posts(array('post_type'=>'list')); 

    if (have_posts()) : while (have_posts()) : the_post(); 

     ?> 
```

您还没有结束 else { 这将引发该错误。

将其更改为喜欢：

```
else {
    query_posts(array('post_type'=>'list')); 

    if (have_posts()) : while (have_posts()) : the_post(); 

 ?>          

<div class="listing">
 <h3><a href="<?php the_permalink(); ?>" rel="bookmark"><?php the_title(); ?></a> </h3>
<?php the_excerpt(); ?>             
</div>

<?php endwhile; else:?>

<p>Sorry, no profiles matched your criteria.</p> 
```

# c# - 选择并提交值后如何清除下拉列表

> ID：10168239
> 
> 赞同：0
> 
> 时间：2012-04-16T03:02:10.393
> 
> 标签：c#, asp.net, asp.net-mvc-3

大家好，我认为我有以下代码：

```
@model Test.tblReview

@{
    ViewBag.Title = "Create";
}

<div class = "under">
Add a New Review
</div>

<br />

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" type="text/css" media="all" />
<link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js" type="text/javascript"></script>
<script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script>
<link href="../../Content/themes/base/jquery.ui.slider.css" rel="stylesheet" type="text/css" />

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

        <div class="editor-label">
            @Html.HiddenFor(model => model.ReviewID)
        </div>

        <div class="editor-field">
            @Html.HiddenFor(model => model.ReviewID)
            @Html.HiddenFor(model => model.ReviewID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Recomendation)
        </div>

        <div class="editor-field">
            @Html.TextAreaFor(model => model.Recomendation, new { style = "max-width: 200px; max-height: 150px;" })
            @Html.ValidationMessageFor(model => model.Recomendation)
        </div>

    <br />

        <div class="editor-label">
            @Html.LabelFor(model => model.AvoidOrBuy)
        </div>

        <div class="editor-field">
            @Html.TextAreaFor(model => model.AvoidOrBuy, new { style = "max-width: 200px; max-height: 150px;" })
            @Html.ValidationMessageFor(model => model.AvoidOrBuy)
        </div>

        <br />

         <div class="editor-label">
          @*@Html.LabelFor(model => model.Posted)*@
        </div>

        <div class="editor-field">
            @Html.HiddenFor(m => m.Posted)
            @Html.ValidationMessageFor(model => model.Posted)
        </div>

        <br />

          <div class="editor-label">
            @Html.LabelFor(model => model.Score)
        </div>

     <br />

        <div class="demo" style="width: 185px">
        <div id="slider-range-max"></div>
        </div>

    <br />

       <p>Score Added From Scroll Bar</p>

        <div class="editor-field">
            @Html.EditorFor(model => model.Score)
            @Html.ValidationMessageFor(model => model.Score)
        </div>

     <br />
        <div class="editor-label">
            @Html.LabelFor(model => model.GameIDFK, "tblGame")
        </div>

        <div class="editor-field">
            @Html.DropDownList("GameIDFK", String.Empty)
            @Html.ValidationMessageFor(model => model.GameIDFK)
        </div>

        <div class="editor-label">
            @Html.HiddenFor(model => model.UserName)
        </div>

        <div class="editor-field">
            @Html.HiddenFor(model => model.UserName)
            @Html.HiddenFor(model => model.UserName)
        </div>

     <br />

        <p>
            <input type="submit" value="Create" />
        </p>

}

<div>
    @Html.ActionLink("Go To Reviews", "Index") |  @Html.ActionLink("Go Back To Games", "Index", "Game")
</div>

 <script type="text/javascript">
     $(function () {
         $("#slider-range-max").slider({
             range: "max",
             min: 1,
             max: 10,
             value: 1,
             slide: function (event, ui) {
                 $("#Score").val(ui.value);
             }
         });
         $("#Score").val($("#slider-range-max").slider("value"));
     });
    </script> 
```

一切正常，但我希望在下拉列表中的值被选中并按下提交按钮后清除，如果您需要其他信息，请询问我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:11:36.793

> 下拉列表中的值在被选中并按下提交按钮后清除

**为什么需要这样做？**我坚信，如果您要将其提交到您要读取它以进行进一步处理的操作方法，则不应更改该值。因为你不会在那里获得选定的值。如果您不担心所选值，那么您可以像这样通过 jQuery 清除它

```
$(function(){
 $("form").submit(function(){
   $("#GameIDFK").empty();
   return true;
 });
}); 
```

我想到的另一件事是，如果你真的想清除下拉菜单，但仍然在你的操作方法中使用，你可能需要在你的表单中有一个隐藏的输入元素并使用 java 脚本，你可以设置选择的值下降到那个。然后你可以清除你的下拉菜单，然后在你的操作方法中，你可以从隐藏的输入而不是实际的下拉菜单中读取。

# c# - 在 C# 中加密和解密字符串

> ID：10168240
> 
> 赞同：404
> 
> 时间：2012-04-16T03:02:20.427
> 
> 标签：c#, encryption

在 C# 中满足以下要求的最现代（最佳）方式是什么？

```
string encryptedString = SomeStaticClass.Encrypt(sourceString);

string decryptedString = SomeStaticClass.Decrypt(encryptedString); 
```

但是，在涉及盐、密钥、处理 byte[] 等方面的小题大做。

一直在谷歌上搜索并对我的发现感到困惑（您可以查看类似 SO Q 的列表，以了解这是一个具有欺骗性的问题）。

* * *

## 回答 #1

> 赞同：878
> 
> 时间：2012-04-16T15:24:55.087

**2015 年 12 月 23 日更新：由于这个答案似乎得到了很多人的支持，我对其进行了更新以修复愚蠢的错误，并根据评论和反馈总体改进代码。有关具体改进的列表，请参阅帖子末尾。**

正如其他人所说，密码学并不简单，所以最好避免“滚动你自己的”加密算法。

但是，您可以围绕内置[`RijndaelManaged`](https://docs.microsoft.com/dotnet/api/system.security.cryptography.rijndaelmanaged)加密类之类的东西“滚动您自己的”包装类。

Rijndael 是当前[Advanced Encryption Standard](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)的算法名称，因此您肯定使用的算法可以被视为“最佳实践”。

该类[`RijndaelManaged`](https://docs.microsoft.com/dotnet/api/system.security.cryptography.rijndaelmanaged)通常确实需要您“搞砸”字节数组、盐、键、初始化向量等，但这正是可以在“包装”类中抽象出来的那种细节。

下面的类是我前段时间写的，用来执行你所追求的那种事情，一个简单的单一方法调用，允许使用基于字符串的密码加密一些基于字符串的纯文本，得到的加密字符串也被表示为一个字符串。当然，有一种等效的方法可以用相同的密码解密加密的字符串。

与此代码的第一个版本每次都使用完全相同的 salt 和 IV 值不同，这个新版本每次都会生成随机的 salt 和 IV 值。由于在给定字符串的加密和解密之间盐和 IV 必须相同，因此盐和 IV 在加密时被添加到密文中，并再次从中提取以执行解密。这样做的结果是，用完全相同的密码加密完全相同的明文每次都会得到完全不同的密文结果。

使用它的“强度”来自于使用[`RijndaelManaged`](https://docs.microsoft.com/dotnet/api/system.security.cryptography.rijndaelmanaged)类为您执行加密，以及使用命名空间的[Rfc2898DeriveBytes](https://docs.microsoft.com/dotnet/api/system.security.cryptography.rfc2898derivebytes)函数，该函数将使用基于字符串的标准和安全算法（特别是[PBKDF2](https://en.wikipedia.org/wiki/PBKDF2)`System.Security.Cryptography` ）生成您的加密密钥-基于您提供的密码。（注意这是对第一个版本使用旧 PBKDF1 算法的改进）。

最后，需要注意的是，这仍然是*未经*身份验证的加密。单独的加密仅提供隐私（即消息不为第三方所知），而经过身份验证的加密旨在提供隐私和真实性（即接收者知道消息是由发送者发送的）。

在不知道您的确切要求的情况下，很难说这里的代码是否足够安全以满足您的需求，但是，它的产生是为了在实现的相对简单性与“质量”之间提供良好的平衡。例如，如果加密字符串的“接收者”直接从受信任的“发送者”接收字符串，则[可能甚至不需要](https://crypto.stackexchange.com/a/12192/698)身份验证。

如果您需要更复杂的东西，并且提供经过身份验证的加密，请查看[这篇文章](https://stackoverflow.com/questions/202011/encrypt-and-decrypt-a-string/10366194#10366194)以获取实现。

这是代码：

```
using System;
using System.Text;
using System.Security.Cryptography;
using System.IO;
using System.Linq;

namespace EncryptStringSample
{
    public static class StringCipher
    {
        // This constant is used to determine the keysize of the encryption algorithm in bits.
        // We divide this by 8 within the code below to get the equivalent number of bytes.
        private const int Keysize = 256;

        // This constant determines the number of iterations for the password bytes generation function.
        private const int DerivationIterations = 1000;

        public static string Encrypt(string plainText, string passPhrase)
        {
            // Salt and IV is randomly generated each time, but is preprended to encrypted cipher text
            // so that the same Salt and IV values can be used when decrypting.  
            var saltStringBytes = Generate256BitsOfRandomEntropy();
            var ivStringBytes = Generate256BitsOfRandomEntropy();
            var plainTextBytes = Encoding.UTF8.GetBytes(plainText);
            using (var password = new Rfc2898DeriveBytes(passPhrase, saltStringBytes, DerivationIterations))
            {
                var keyBytes = password.GetBytes(Keysize / 8);
                using (var symmetricKey = new RijndaelManaged())
                {
                    symmetricKey.BlockSize = 256;
                    symmetricKey.Mode = CipherMode.CBC;
                    symmetricKey.Padding = PaddingMode.PKCS7;
                    using (var encryptor = symmetricKey.CreateEncryptor(keyBytes, ivStringBytes))
                    {
                        using (var memoryStream = new MemoryStream())
                        {
                            using (var cryptoStream = new CryptoStream(memoryStream, encryptor, CryptoStreamMode.Write))
                            {
                                cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);
                                cryptoStream.FlushFinalBlock();
                                // Create the final bytes as a concatenation of the random salt bytes, the random iv bytes and the cipher bytes.
                                var cipherTextBytes = saltStringBytes;
                                cipherTextBytes = cipherTextBytes.Concat(ivStringBytes).ToArray();
                                cipherTextBytes = cipherTextBytes.Concat(memoryStream.ToArray()).ToArray();
                                memoryStream.Close();
                                cryptoStream.Close();
                                return Convert.ToBase64String(cipherTextBytes);
                            }
                        }
                    }
                }
            }
        }

        public static string Decrypt(string cipherText, string passPhrase)
        {
            // Get the complete stream of bytes that represent:
            // [32 bytes of Salt] + [32 bytes of IV] + [n bytes of CipherText]
            var cipherTextBytesWithSaltAndIv = Convert.FromBase64String(cipherText);
            // Get the saltbytes by extracting the first 32 bytes from the supplied cipherText bytes.
            var saltStringBytes = cipherTextBytesWithSaltAndIv.Take(Keysize / 8).ToArray();
            // Get the IV bytes by extracting the next 32 bytes from the supplied cipherText bytes.
            var ivStringBytes = cipherTextBytesWithSaltAndIv.Skip(Keysize / 8).Take(Keysize / 8).ToArray();
            // Get the actual cipher text bytes by removing the first 64 bytes from the cipherText string.
            var cipherTextBytes = cipherTextBytesWithSaltAndIv.Skip((Keysize / 8) * 2).Take(cipherTextBytesWithSaltAndIv.Length - ((Keysize / 8) * 2)).ToArray();

            using (var password = new Rfc2898DeriveBytes(passPhrase, saltStringBytes, DerivationIterations))
            {
                var keyBytes = password.GetBytes(Keysize / 8);
                using (var symmetricKey = new RijndaelManaged())
                {
                    symmetricKey.BlockSize = 256;
                    symmetricKey.Mode = CipherMode.CBC;
                    symmetricKey.Padding = PaddingMode.PKCS7;
                    using (var decryptor = symmetricKey.CreateDecryptor(keyBytes, ivStringBytes))
                    {
                        using (var memoryStream = new MemoryStream(cipherTextBytes))
                        {
                            using (var cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read))
                            {
                                var plainTextBytes = new byte[cipherTextBytes.Length];
                                var decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);
                                memoryStream.Close();
                                cryptoStream.Close();
                                return Encoding.UTF8.GetString(plainTextBytes, 0, decryptedByteCount);
                            }
                        }
                    }
                }
            }
        }

        private static byte[] Generate256BitsOfRandomEntropy()
        {
            var randomBytes = new byte[32]; // 32 Bytes will give us 256 bits.
            using (var rngCsp = new RNGCryptoServiceProvider())
            {
                // Fill the array with cryptographically secure random bytes.
                rngCsp.GetBytes(randomBytes);
            }
            return randomBytes;
        }
    }
} 
```

上面的类可以非常简单地使用类似于以下的代码：

```
using System;

namespace EncryptStringSample
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Please enter a password to use:");
            string password = Console.ReadLine();
            Console.WriteLine("Please enter a string to encrypt:");
            string plaintext = Console.ReadLine();
            Console.WriteLine("");

            Console.WriteLine("Your encrypted string is:");
            string encryptedstring = StringCipher.Encrypt(plaintext, password);
            Console.WriteLine(encryptedstring);
            Console.WriteLine("");

            Console.WriteLine("Your decrypted string is:");
            string decryptedstring = StringCipher.Decrypt(encryptedstring, password);
            Console.WriteLine(decryptedstring);
            Console.WriteLine("");

            Console.WriteLine("Press any key to exit...");
            Console.ReadLine();
        }
    }
} 
```

[（您可以在此处](https://www.dropbox.com/s/avh5zvspe9pp12s/EncryptStringSample.zip?dl=0)下载一个简单的 VS2013 示例解决方案（包括一些单元测试））。

**2015 年 12 月 23 日更新：** 代码的具体改进列表如下：

*   修复了加密和解密之间的编码不同的愚蠢错误。由于生成 salt 和 IV 值的机制发生了变化，因此不再需要编码。
*   由于 salt/IV 更改，先前错误地指出 UTF8 编码 16 个字符的字符串产生 32 个字节的代码注释不再适用（因为不再需要编码）。
*   被取代的 PBKDF1 算法的使用已被更现代的 PBKDF2 算法的使用所取代。
*   密码派生现在已正确加盐，而以前根本没有加盐（另一个愚蠢的错误被压扁）。

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2014-12-15T12:44:56.257

```
using System.IO;
using System.Text;
using System.Security.Cryptography;

public static class EncryptionHelper
{
    public static string Encrypt(string clearText)
    {
        string EncryptionKey = "abc123";
        byte[] clearBytes = Encoding.Unicode.GetBytes(clearText);
        using (Aes encryptor = Aes.Create())
        {
            Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(EncryptionKey, new byte[] { 0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76 });
            encryptor.Key = pdb.GetBytes(32);
            encryptor.IV = pdb.GetBytes(16);
            using (MemoryStream ms = new MemoryStream())
            {
                using (CryptoStream cs = new CryptoStream(ms, encryptor.CreateEncryptor(), CryptoStreamMode.Write))
                {
                    cs.Write(clearBytes, 0, clearBytes.Length);
                    cs.Close();
                }
                clearText = Convert.ToBase64String(ms.ToArray());
            }
        }
        return clearText;
    }
    public static string Decrypt(string cipherText)
    {
        string EncryptionKey = "abc123";
        cipherText = cipherText.Replace(" ", "+");
        byte[] cipherBytes = Convert.FromBase64String(cipherText);
        using (Aes encryptor = Aes.Create())
        {
            Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(EncryptionKey, new byte[] { 0x49, 0x76, 0x61, 0x6e, 0x20, 0x4d, 0x65, 0x64, 0x76, 0x65, 0x64, 0x65, 0x76 });
            encryptor.Key = pdb.GetBytes(32);
            encryptor.IV = pdb.GetBytes(16);
            using (MemoryStream ms = new MemoryStream())
            {
                using (CryptoStream cs = new CryptoStream(ms, encryptor.CreateDecryptor(), CryptoStreamMode.Write))
                {
                    cs.Write(cipherBytes, 0, cipherBytes.Length);
                    cs.Close();
                }
                cipherText = Encoding.Unicode.GetString(ms.ToArray());
            }
        }
        return cipherText;
    }
} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-03-21T17:41:03.603

如果您的目标是尚不支持的 ASP.NET Core，则`RijndaelManaged`可以使用`IDataProtectionProvider`.

首先，配置您的应用程序以使用数据保护：

```
public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        services.AddDataProtection();
    }
    // ...
} 
```

然后您将能够注入`IDataProtectionProvider`实例并使用它来加密/解密数据：

```
public class MyService : IService
{
    private const string Purpose = "my protection purpose";
    private readonly IDataProtectionProvider _provider;

    public MyService(IDataProtectionProvider provider)
    {
        _provider = provider;
    }

    public string Encrypt(string plainText)
    {
        var protector = _provider.CreateProtector(Purpose);
        return protector.Protect(plainText);
    }

    public string Decrypt(string cipherText)
    {
        var protector = _provider.CreateProtector(Purpose);
        return protector.Unprotect(cipherText);
    }
} 
```

有关更多详细信息，请参阅[本文](http://www.mikesdotnetting.com/article/295/encryption-and-decryption-in-asp-net-core)。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-04-16T15:22:35.460

试试这个类：

```
public class DataEncryptor
{
    TripleDESCryptoServiceProvider symm;

    #region Factory
    public DataEncryptor()
    {
        this.symm = new TripleDESCryptoServiceProvider();
        this.symm.Padding = PaddingMode.PKCS7;
    }
    public DataEncryptor(TripleDESCryptoServiceProvider keys)
    {
        this.symm = keys;
    }

    public DataEncryptor(byte[] key, byte[] iv)
    {
        this.symm = new TripleDESCryptoServiceProvider();
        this.symm.Padding = PaddingMode.PKCS7;
        this.symm.Key = key;
        this.symm.IV = iv;
    }

    #endregion

    #region Properties
    public TripleDESCryptoServiceProvider Algorithm
    {
        get { return symm; }
        set { symm = value; }
    }
    public byte[] Key
    {
        get { return symm.Key; }
        set { symm.Key = value; }
    }
    public byte[] IV
    {
        get { return symm.IV; }
        set { symm.IV = value; }
    }

    #endregion

    #region Crypto

    public byte[] Encrypt(byte[] data) { return Encrypt(data, data.Length); }
    public byte[] Encrypt(byte[] data, int length)
    {
        try
        {
            // Create a MemoryStream.
            var ms = new MemoryStream();

            // Create a CryptoStream using the MemoryStream 
            // and the passed key and initialization vector (IV).
            var cs = new CryptoStream(ms,
                symm.CreateEncryptor(symm.Key, symm.IV),
                CryptoStreamMode.Write);

            // Write the byte array to the crypto stream and flush it.
            cs.Write(data, 0, length);
            cs.FlushFinalBlock();

            // Get an array of bytes from the 
            // MemoryStream that holds the 
            // encrypted data.
            byte[] ret = ms.ToArray();

            // Close the streams.
            cs.Close();
            ms.Close();

            // Return the encrypted buffer.
            return ret;
        }
        catch (CryptographicException ex)
        {
            Console.WriteLine("A cryptographic error occured: {0}", ex.Message);
        }
        return null;
    }

    public string EncryptString(string text)
    {
        return Convert.ToBase64String(Encrypt(Encoding.UTF8.GetBytes(text)));
    }

    public byte[] Decrypt(byte[] data) { return Decrypt(data, data.Length); }
    public byte[] Decrypt(byte[] data, int length)
    {
        try
        {
            // Create a new MemoryStream using the passed 
            // array of encrypted data.
            MemoryStream ms = new MemoryStream(data);

            // Create a CryptoStream using the MemoryStream 
            // and the passed key and initialization vector (IV).
            CryptoStream cs = new CryptoStream(ms,
                symm.CreateDecryptor(symm.Key, symm.IV),
                CryptoStreamMode.Read);

            // Create buffer to hold the decrypted data.
            byte[] result = new byte[length];

            // Read the decrypted data out of the crypto stream
            // and place it into the temporary buffer.
            cs.Read(result, 0, result.Length);
            return result;
        }
        catch (CryptographicException ex)
        {
            Console.WriteLine("A cryptographic error occured: {0}", ex.Message);
        }
        return null;
    }

    public string DecryptString(string data)
    {
        return Encoding.UTF8.GetString(Decrypt(Convert.FromBase64String(data))).TrimEnd('\0');
    }

    #endregion

} 
```

并像这样使用它：

```
string message="A very secret message here.";
DataEncryptor keys=new DataEncryptor();
string encr=keys.EncryptString(message);

// later
string actual=keys.DecryptString(encr); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-04-16T03:11:18.957

如果您需要将密码存储在内存中并希望对其进行加密，您应该使用**SecureString**：

[http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)

对于更一般的用途，我会使用 FIPS 批准的算法，例如高级加密标准，以前称为 Rijndael。有关实现示例，请参见此页面：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rijndael.aspx)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-04-16T03:04:29.053

您可能正在寻找`ProtectedData`使用用户登录凭据加密数据的类。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-16T03:06:06.823

我见过的最简单的加密方法是通过 RSA

查看上面的 MSDN：http: [//msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.aspx)

它确实涉及使用字节，但是归根结底，您确实希望加密和解密很难弄清楚，否则很容易被破解。

# c++ - C++，客户端如何发送列表 值一一服务器？

> ID：10168241
> 
> 赞同：-7
> 
> 时间：2012-04-16T03:02:32.003
> 
> 标签：c++, list, tcp, int

基本上，我有一个包含许多不同整数的列表，我想将这些数据从客户端发送到服务器一个值一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:36:25.687

首先，除非将它们逐个发送*绝对*至关重要，否则一次发送整个列表几乎总是会更好。

至于如何发送，一般是把`int`s 放到一个缓冲区中，将每个转换为网络顺序，然后将整个缓冲区发送给接收者。虽然我没有测试过这段代码，但这个一般顺序的东西应该可以工作：

```
void send_ints(socket dest, std::list<int> const &in) { 
    std::vector<int> netdata;

    std::transform(in.begin(), in.end(), std::back_inserter(netdata), ::ntohl);
    send(dest, (char *)&netdata[0], net_data.size() * sizeof(netdata[0]), 0);
} 
```

根据您的喜好，您可能更喜欢使用`static_cast`而不是我上面使用的 C 样式案例。

# php - jQuery 变量选择器

> ID：10168244
> 
> 赞同：0
> 
> 时间：2012-04-16T03:03:13.563
> 
> 标签：php, javascript, jquery, html, ajax

我正在尝试实现一个 jQuery AJAX 脚本来打开一个 div 中的链接。唯一的问题是链接是使用 PHP while 循环动态创建的，如下所示：

```
<a id="topic<? echo $rows['id']; ?>" href="viewTopic.php?id=<? echo $rows['id']; ?>"><? echo $rows['topic']; ?></a> 
```

以下代码是我试图用来创建 ajax 函数的 jQuery。如何创建一个动态选择器，就像我在 jQuery 中用 PHP 说明的那样？

```
<script type="text/javascript" language="javascript">
$(document).ready(function(){
$("#topic<?php echo $rows['id']; ?>").click(function(){

        $("#subConList").html(loadAni).load('viewTopic.php?id=<?php echo $rows['id']; ?>');     
    });
});
</script> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:08:30.053

`class`将and添加`data-id`到您的行中：

```
<a id="topic<? echo $rows['id']; ?>" class="topic" href="viewTopic.php?id=<? echo $rows['id']; ?>" data-id="<? echo $rows['id']; ?>"><? echo $rows['topic']; ?></a> 
```

然后按 选择`class`并使用 获取 ID `data`：

```
$('.topic').click(function() {
    var topicID = $(this).data('id');
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:14:06.093

试试这个：

`$('a[id^="topic"]').data('id')`;

# dns - 允许使用哪些域名？是否可以获得“.df”域？

> ID：10168247
> 
> 赞同：0
> 
> 时间：2012-04-16T03:03:47.040
> 
> 标签：dns

我不太了解域名业务，但我看到了一些罕见的域名，例如这些网页：

*   [http://c9.io/](http://c9.io/)
*   [http://repl.it/](http://repl.it/)

我想知道是否可以获得我想要的任何域，比如说 .rf 域或 .kj 域。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:06:40.920

不，似乎不可能获得 .df 域。以下是可能的域扩展列表： [http://www.idcwebs.com/Understanding_Web_Extensions.htm](http://www.idcwebs.com/Understanding_Web_Extensions.htm) http://www.webopedia.com/quick_ref/topleveldomains/countrycodeA-E.asp

您可能可以获得 df.someavailabledomainextension，例如：df.com 或 df.me，然后创建子域，例如 mysite.df.com，如果这对您有用

# javascript - 如何选择不包含某个子元素的元素？

> ID：10168248
> 
> 赞同：26
> 
> 时间：2012-04-16T03:03:53.697
> 
> 标签：javascript, jquery

```
<div class="test">
 <div class="example"></div>
</div>

<div class="test">
</div> 
```

`test`仅当它不包含带有类的子元素时，如何将 jQuery 应用于带有类的元素`example`？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-16T03:24:31.033

```
$('.test:not(:has(.example))') 
```

-或者-

```
$('.test').not(':has(.example)') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T03:09:25.577

可能

```
$('.test').filter(function() { return !$(this).children('.example').length; }); 
```

这会过滤掉任何具有匹配的子元素的元素`.example`。`.find`如果您想根据可以替换的后代（而不仅仅是孩子）进行过滤`.children`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-16T03:19:33.753

```
$(':not(.test:has(.example))').css('color', 'red');​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/9fkz7y1g/](http://jsfiddle.net/9fkz7y1g/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T03:08:50.320

jQuery `contains()`:

```
jQuery.contains(document.documentElement, document.body); // true
jQuery.contains(document.body, document.documentElement); // false 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T04:35:25.933

This problem seems ready-made for the `filter` function where you find all the `.test` objects and then when filtering retain only the ones that don't have `.example` in them:

```
$(".test").filter(function() {
    return($(this).find(".example").length == 0);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T03:07:17.740

您可以将方法[children](http://api.jquery.com/children/)与“.example”一起使用并测试它是否为空

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-16T03:17:07.723

```
 $('.test').each(function() {
    if(!$(this).children().hasClass("example")){
       //your code
    }
}); 
```

也许像这样？这个我没测试过...

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-10-10T14:11:31.020

```
if (!$('#yourDiv').children().hasClass("className")) {
    //i.e. yourDivID' has no any children whose class name =>'className'
} 
```

# sql - sql server 2005 评估版 - 无法使用 localhost 连接到默认实例

> ID：10168249
> 
> 赞同：0
> 
> 时间：2012-04-16T03:04:22.113
> 
> 标签：sql, sql-server

我使用默认实例和本地主机连接选项安装了 SQL Server 2005 评估版。我无法连接到数据库引擎。下拉窗口显示数据库没有服务器。当我输入本地主机并单击连接时 - 我得到“用户 gary 登录失败 - pc gary”，即使我正在使用 Windows 身份验证并且用户名和密码是灰色的。

# jsf - JSF 单选按钮自定义标签和取出表格布局

> ID：10168255
> 
> 赞同：2
> 
> 时间：2012-04-16T03:05:47.543
> 
> 标签：jsf, html-table, selectoneradio

我不是 JSF 专业人士，我做 HTML/CSS/JS 布局。但是我的Java开发人员遇到了一个问题，特别是单选按钮。这是我们最后想要的布局： ![在此处输入图像描述](../Images/35ab5a77a3bcaf99170356364dcdb1f3.png)

如您所见，几乎所有内容都是自定义的，单选按钮、输入选择框......

现在我们面临的主要问题是 JSF 框架会自动将所有这些内容输出到一个表格中（作为设计师，我一开始不喜欢这个表格）。然后我们还需要一个非常自定义的单选按钮标签。

我尝试了很多不同的东西，但我会在这里给你一个基本的代码示例：

```
 <h:selectOneRadio value="#{user.favColor1}">
        <f:selectItem itemValue="Red" itemLabel="Color1 - Red" />
        <f:selectItem itemValue="Green" itemLabel="Color1 - Green" />
        <f:selectItem itemValue="Blue">A really custom label is here with <select><option>1</option></select></f:selectItem>
    </h:selectOneRadio> 
```

还有另一种方法吗？我们做错了吗？你知道我怎么能做这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:45:19.543

PrimeFaces 得到了您正在寻找的确切组件

看看[SelectOneRadio - 自定义布局](http://www.primefaces.org/showcase/ui/input/oneRadio.xhtml)

```
<h3>Custom Layout</h3>
<p:outputPanel id="customPanel" style="margin-bottom:10px">
    <p:selectOneRadio id="customRadio" value="#{radioView.color}" layout="custom">
        <f:selectItem itemLabel="Red" itemValue="Red" />
        <f:selectItem itemLabel="Green" itemValue="Green" />
        <f:selectItem itemLabel="Blue" itemValue="Blue" />
    </p:selectOneRadio>

    <h:panelGrid columns="3" cellpadding="5">
        <p:radioButton id="opt1" for="customRadio" itemIndex="0" />
        <h:outputLabel for="opt1" value="Red" />
        <p:spinner />

        <p:radioButton id="opt2" for="customRadio" itemIndex="1" />
        <h:outputLabel for="opt2" value="Green" />
        <p:inputText />

        <p:radioButton id="opt3" for="customRadio" itemIndex="2" />
        <h:outputLabel for="opt3" value="Blue" />
        <p:calendar />
    </h:panelGrid>
</p:outputPanel> 
```

他们的例子甚至看起来像你的（收音机旁边的微调器）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T05:30:14.497

在 JSF 中，您可以像这样设置无线电组的样式：

```
.myRadioGroup input {
  float: left;
  margin-left: -13px;
  margin-top: 3px;
}

.myRadioGroup label {
  margin-left: 12px;
  display: block;
}

<h:selectOneRadio value="#{user.favColor1}" styleClass="myRadioGroup">
        <f:selectItem itemValue="Red" itemLabel="Color1 - Red" />
        <f:selectItem itemValue="Green" itemLabel="Color1 - Green" />
        <f:selectItem itemValue="Blue">A really custom label is here with <select><option>1</option></select></f:selectItem>
</h:selectOneRadio> 
```

# facebook - 致命错误：未捕获的 OAuthException：（#803）您请求的某些别名不存在

> ID：10168258
> 
> 赞同：3
> 
> 时间：2012-04-16T03:06:00.323
> 
> 标签：facebook, facebook-graph-api

致命错误：未捕获的 OAuthException：（#803）您请求的某些别名不存在：0_309479102458745 在第 1039 行的 /base_facebook.php 中抛出

我的应用程序运行良好，然后突然许多用户收到此错误（0_309479102458745 有所不同）。

我将其更改为将它们视为 varchar 并遵循此处列出的所有建议[Facebook PHP throwing exception "(#803) Some of the aliases you request do not exist"](https://stackoverflow.com/questions/5892897/facebook-php-throwing-exception-803-some-of-the-aliases-you-requested-do-not)。

这是导致它的代码： $result = $facebook->api('/me/feed/', array('access_token' => $facebook->access_token,'limit'=>50)); //获取帖子 foreach($result['data'] as $posts)

我不确定我应该从哪里开始解决这个问题，因为它是从无处开始的。

我感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T03:53:56.837

0_309479102458745 不起作用，因为 0 不是有效的用户 ID。

该 ID 格式是用户或页面 ID，后跟帖子 ID；您永远不会看到 0_{post ID} 从提要中返回：

*   如果你是它可能是 API 中的一个错误 - 你可以在这里归档：[https ://developers.facebook.com/bug](https://developers.facebook.com/bug)
*   如果您手动构建该值，则您可能做错了。

# emacs - Emacs / Elisp / 关闭 / 切换

> ID：10168261
> 
> 赞同：1
> 
> 时间：2012-04-16T03:06:22.760
> 
> 标签：emacs, closures, elisp

我目前有以下内容：

```
(defun my-hide-code ()                                                                                                                         
  (interactive)                                                                                                                                
  (set-selective-display 2))                                                                                                                   

(defvar my-keys-minor-mode-map (make-keymap) "my-keys-minor-mode keymap.")                                                                     
(define-key my-keys-minor-mode-map (kbd "<f2>") 'my-hide-code)                                                                                 
(define-minor-mode my-keys-minor-mode                                                                                                          
  "use"                                                                                                                                        
  t " my-keys" 'my-keys-minor-mode-map)                                                                                                        
(my-keys-minor-mode 1) 
```

现在，我想在 (set-selective-display 2) 和 (set-selective-display 'nil) 之间切换

现在，如果我在方案中，我将创建为闭包，并且闭包将存储一个状态变量，这将让我知道我处于哪个状态，以及如何切换。

然而，Elisp 显然是一个 lisp-2，其中变量和函数具有不同的范围。鉴于此，我如何创建闭包/成为切换键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:10:43.057

Emacs 24 支持词法绑定，因此可以编写真正的闭包。

请参阅： [Emacs 24 中变量作用域的新规则是什么？](https://stackoverflow.com/questions/7654848/what-are-the-new-rules-for-variable-scoping-in-emacs-24)

请注意，动态绑定是使 Emacs 如此可定制的*很大*一部分，因此，如果您正在编写可能对其他人有用的东西，请谨慎使用词法绑定——确保您使用`defvar`任何*可能*对您有用的变量覆盖的人（当然，确保您想到所有不适用于您的潜在用例！:)

对于 Emacs < 24，请参阅：

*   [http://www.emacswiki.org/emacs/FakeClosures](http://www.emacswiki.org/emacs/FakeClosures)
*   [其他堆栈溢出问答](https://stackoverflow.com/search?q=[emacs]+FakeClosures)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T03:24:57.027

`selective-display`本身就是包含你需要检查的状态的变量，所以你可以写

```
(defun my-toggle-selective-display ()
  (interactive)
  (if selective-display
      (set-selective-display nil)
    (set-selective-display 2))) 
```

至于一般的闭包，我很久以前就需要它们用于一个项目，并使用反引号替换将非内部符号插入到函数定义中以避免全局变量。例如

```
(fset 'toggler
      (let ((toggle-var (make-symbol "toggle")))
        (set toggle-var nil)
        `(lambda () (interactive)
           (cond (,toggle-var
                  (setq ,toggle-var nil))
                 (t
                  (setq ,toggle-var t)))
           (message "toggle is %s" ,toggle-var)))) 
```

运行时会产生

```
M-x toggler
toggle is t
M-x toggler
toggle is nil
M-x toggler
toggle is t
M-: (boundp 'toggle)
nil 
```

我想这算得上是一个杂牌，但我知道没有其他方法可以在 Emacs-Lisp 中获得像闭包这样的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T04:01:43.983

这是我在其他地方给出的关于如何在 Elisp 中创建真实（非假）闭包的答案的链接：

[https://stackoverflow.com/a/14088107/1857114](https://stackoverflow.com/a/14088107/1857114)

我使用一个我称之为**defun**** 的宏。它适用于 Emacs 24.2.1，但我不确定它适用于哪些早期版本。估计 **defun**特殊形式将来会升级，宏将不再需要。

# php - 通过 AJAX 获取 Cookie

> ID：10168266
> 
> 赞同：1
> 
> 时间：2012-04-16T03:08:11.087
> 
> 标签：php, ajax, cookies, setcookie

我正在尝试通过 AJAX 直接使用 PHP 设置 cookie。下面的代码在 Firefox、Opera 和 Safari 中设置了 cookie，但在 Chrome 和 IE8 中却不行。

```
`setcookie( "user" , $_REQUEST[ 'login' ] , time() + 60 * 60 * 60 , "/graduate/" , "localhost" );` 
```

我错过了什么，还是唯一的方法是通过 JavaScript？

PS 使用 JavaScript 在所有浏览器中设置 cookie。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T03:21:27.683

所以我猜你在本地主机上这样做？如果是这样，那是因为 google chrome 与 localhost 站点存在问题，而是使用 IP 地址来设置 cookie，更多信息在这里：[http ://groups.google.com/a/googleproductforums.com/forum/#!category-topic /chrome/report-a-problem-and-get-troubleshooting-help/iow88FsnNhQ](http://groups.google.com/a/googleproductforums.com/forum/#!category-topic/chrome/report-a-problem-and-get-troubleshooting-help/iow88FsnNhQ)

对于 Internet Explorer，以下是 php 站点的摘录，应该可以解决您的问题：“Internet Explorer 8 和 Internet Explorer 9（IE8 和 IE9）仍然不接受来自 localhost 的 cookie。

解决这个问题的最简单方法是在您的主机文件中添加一个条目，例如 127.0.0.1 www.mytestsite.com"

这是链接： http: [//php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

另一个问题是有些浏览器不能正常工作，除非你指定setcookie的所有参数，你也试试

其他一些可能有帮助的链接： [Internet Explorer 忽略某些域上的 cookie（无法读取或设置 cookie）](https://stackoverflow.com/questions/794243/internet-explorer-ignores-cookies-on-some-domains-cannot-read-or-set-cookies)

# jquery - jQuery 选择器 [name=value] 不起作用

> ID：10168268
> 
> 赞同：2
> 
> 时间：2012-04-16T03:08:16.000
> 
> 标签：jquery, internet-explorer, google-chrome, jquery-selectors

我是 jQuery 的新手。我在使用 [name=value] 选择器时遇到了问题。这是HTML：

```
<input type="number"/> 
```

很简单，对吧？这是JS：

```
$("input").val(100);
$("input[value='100']").val(200)​ 
```

结果是：脚本的第一行有效，但第二行无效。（Chrome、FF、IE9）这两行都在 IE8 中有效。这是怎么发生的？顺便说一句，我正在使用 jQuery1.7.2。[或者您可以在http://jsfiddle.net/wzKNV/](http://jsfiddle.net/wzKNV/)上测试上述代码

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T03:12:34.060

*attribute-equals*选择器检查*属性*，但`.val()`仅更改属性，因此选择器看不到更新。

jQuery/Sizzle 默认的本地`querySelectorAll`方法强制执行这种“仅属性”行为。

如果你破坏了 的选择器`querySelectorAll`，所以必须使用 Sizzle，它会起作用......

```
// v------made it a non-standard Sizzle selector
$(":input[value='100']").val(200); 
```

这是因为 Sizzle 选择器不一定与`qSA`选择器兼容。当然，这会稍微改变选择器的含义，但对说明很有用。

***演示：http:*** [//jsfiddle.net/wzKNV/3/](http://jsfiddle.net/wzKNV/3/)

* * *

要使用标准选择器*（IMO 是个好主意）*保持它，您可以`filter()`改用...

```
$("input").filter(function() { return this.value === '100'; })
          .val(200); 
```

***演示：http:*** [//jsfiddle.net/wzKNV/4/](http://jsfiddle.net/wzKNV/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:18:52.927

如果

```
<input type="nubmer" disabled="disabled" value="100" />​ // your fiddle have no `value` 
```

然后

```
$("input[value='100']").val(200)​​​​​​​ 
```

将工作

# jsf - 如何将树添加到bean中的选项卡

> ID：10168270
> 
> 赞同：0
> 
> 时间：2012-04-16T03:08:25.250
> 
> 标签：jsf, tabs, tree, primefaces

我尝试将树添加到 1 个选项卡：

```
Tab tmp = new Tab();
TreeNode root = new  DefaultTreeNode("root",null);
TreeNode test = new DefaultTreeNode("test",root);
tmp.getChildren().add((UIComponent)root); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:26:54.987

我建议你使用[Accordion Panel - Model](http://www.primefaces.org/showcase/ui/accordionPanelModel.jsf)

> Accordion 可以显示模型支持的动态选项卡数量。由于选项卡是即时生成的，因此也很容易实现添加/删除选项卡。

看一下这个例子...... INMO 它是你应该实现任务的方式......（要容易得多，它是 primefaces 在展示中实现它的方式）

扩展给定的示例尝试

添加到选项卡中

```
<p:tree value="#{player.root}" var="node" id="tree">  
    <p:treeNode id="treeNode">  
        <h:outputText value="#{node}" id="lblNode"/>  
    </p:treeNode>  
</p:tree> 
```

并添加到播放器类...

```
private TreeNode root;  

public initTree() {  
    root = new DefaultTreeNode("Root", null);  
    TreeNode node0 = new DefaultTreeNode("Node 0", root);  
    TreeNode node1 = new DefaultTreeNode("Node 1", root);  
    TreeNode node2 = new DefaultTreeNode("Node 2", root);  

    TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);  
    TreeNode node01 = new DefaultTreeNode("Node 0.1", node0);  

    TreeNode node10 = new DefaultTreeNode("Node 1.0", node1);  
    TreeNode node11 = new DefaultTreeNode("Node 1.1", node1);  

    TreeNode node000 = new DefaultTreeNode("Node 0.0.0", node00);  
    TreeNode node001 = new DefaultTreeNode("Node 0.0.1", node00);  
    TreeNode node010 = new DefaultTreeNode("Node 0.1.0", node01);  

    TreeNode node100 = new DefaultTreeNode("Node 1.0.0", node10);  
}  

public TreeNode getRoot() {  
    return root;  
} 
```

这是 player.java 的来源

[播放器.java](http://code.google.com/p/primefaces/source/browse/examples/trunk/showcase/src/main/java/org/primefaces/examples/domain/Player.java?r=3692)

**编辑**

在查看了 [循环内 p:tree 的问题 (ui:repeat, p:dataTable, ...)](http://forum.primefaces.org/viewtopic.php?f=3&t=17460)

和

[问题 3640：在使用 p:tree 循环内保存状态期间出现 NullPointerException（ui:repeat、p:tabView、...）](http://code.google.com/p/primefaces/issues/detail?id=3640)

似乎有一个关于这个功能的开放错误......

# android - 从 onCheckedChanged() 中访问适配器

> ID：10168271
> 
> 赞同：0
> 
> 时间：2012-04-16T03:08:27.463
> 
> 标签：android, android-viewpager

我为 ViewPager 创建了一个适配器。创建它时，我还必须在布局上动态创建单选按钮。但是，通过单击其中一个单选按钮，我需要将其内部的适配器通知DataSetChanged。如何访问该适配器？例如，如果我想这样做：

```
radioButton.setOnCheckedChangeListener(new OnCheckedChangeListener() {

@Override
public void onCheckedChanged(CompoundButton buttonView,
        boolean isChecked) {

              viewPagerLength++;
             // need to call notifyDataSetChanged();     
    }
}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:49:12.377

这可以通过像这样设置 radioButton 来完成：

final RadioButton radioButton = (RadioButton) findViewById(R.id.rb);

然后您可以从内部访问radioButton。

# python - 在python和scrapy中命名多个文件

> ID：10168275
> 
> 赞同：1
> 
> 时间：2012-04-16T03:08:50.740
> 
> 标签：python, scrapy

在使用scrapy从网络上抓取文件后，我正在尝试将文件保存到目录中。我正在从文件中提取日期并将其用作文件名。然而，我遇到的问题是某些文件具有相同的日期，即有两个文件的名称为“2009 年 6 月 2 日”。所以，我想做的是以某种方式检查是否已经有一个同名的文件，如果有，请将其命名为“June 2, 2009.1”之类的名称。

我正在使用的代码如下：

```
def parse_item(self, response):
    self.log('Hi, this is an item page! %s' % response.url) 

    response = response.replace(body=response.body.replace('<br />', '\n'))

    hxs = HtmlXPathSelector(response)

    date = hxs.select("//div[@id='content']").extract()[0]
    dateStrip = re.search(r"([A-Z]*|[A-z][a-z]+)\s\d*\d,\s[0-9]+", date) 
    newDate = dateStrip.group()

    content = hxs.select("//div[@id='content']") 
    content = content.select('string()').extract()[0]

    filename = ("/path/to/a/folder/ %s.txt") % (newDate) 

    with codecs.open(filename, 'w', encoding='utf-8') as output:
        output.write(content) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:01:04.780

您可以使用 os.listdir 获取现有文件的列表并分配不会导致冲突的文件名。

```
import os
def get_file_store_name(path, fname):
    count = 0
    for f in os.listdir(path):
        if fname in f:
            count += 1
    return os.path.join(path, fname+str(count))

# This is example to use 
print get_file_store_name(".", "README")+".txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:13:41.370

在 C 库中检查文件是否存在的常用方法是使用名为`stat()`. Python 以`os.stat()`. 我建议你用那个。

[http://docs.python.org/library/stat.html](http://docs.python.org/library/stat.html)

```
def file_exists(fname):
    try:
        stat_info = os.stat(fname)
        if os.S_ISREG(stat_info): # true for regular file
            return True
    except Exception:
        pass
    return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T13:30:27.690

另一个答案通过检查python中的os工具为我指明了正确的方向，但我认为我找到的方式可能更直接。参考这里[如何使用 Python 检查文件是否存在？](https://stackoverflow.com/questions/82831/how-do-i-check-if-a-file-exists-using-python)更多。

以下是我想出的代码：

```
 existence = os.path.isfile(filename)

    if existence == False:
        with codecs.open(filename, 'w', encoding='utf-8') as output:
            output.write(content)
    else:
        newFilename = ("/path/.../.../- " + '%s' ".1.txt") % (newDate)
        with codecs.open(newFilename, 'w', encoding='utf-8') as output:
            output.write(content) 
```

编辑添加：

我不太喜欢这个解决方案，并认为另一个答案的解决方案可能更好，但效果不佳。我不喜欢我的解决方案的主要部分是它只适用于 2 个同名文件；如果三个或四个文件具有相同的名称，则会出现最初的问题。以下是我想出的：

```
filename = ("/Users/path/" + " " + "title " + '%s' + " " + "-1.txt") % (date) 
filename = str(filename)

    while True:
        os.path.isfile(filename)
        newName = filename.replace(".txt", "", filename)
        newName = str.split(newName)
        newName[-1] = str(int(newName[-1]) + 1)
        filename = " ".join(newName) + ".txt"
        if os.path.isfile(filename) == False:
            with codecs.open(filename, 'w', encoding='utf-8') as output:
                output.write(texts)
            break 
```

它可能不是最优雅的，并且可能是一种骇人听闻的方法，但到目前为止它已经奏效并且似乎已经解决了我的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:55:34.113

另一种解决方案是您可以在日期后附加时间，用于命名文件，例如

```
from datetime import datetime

filename = ("/path/to/a/folder/ %s_%s.txt") % (newDate,datetime.now().strftime("%H%M%S")) 
```

# java - javamail电子邮件不发送

> ID：10168280
> 
> 赞同：1
> 
> 时间：2012-04-16T03:09:28.790
> 
> 标签：java, email, smtp, jakarta-mail, send

我尝试使用 javamail 发送电子邮件，但我是这个主题的新手。到目前为止，我没有收到编译错误或运行错误，但电子邮件从未发送过。我使用一个帮助类来发送带有本地 SMTP 服务器（MailUtilLocal.java）的电子邮件和一个发送电子邮件的 servlet（EmailServlet）。这是代码：

` //EmailServlet.java:

```
import Beans.Usuario;
import IOBD.InputOutputBD;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.mail.MessagingException;
import Servlets.MailUtilLocal;
import java.util.*;

public class EmailServlet extends HttpServlet {

protected void doPost(HttpServletRequest request,
        HttpServletResponse response)
        throws ServletException, IOException {
    // get parameters from the request
    String userId = request.getParameter("userId");
    String password = request.getParameter("password");
    String nombre = request.getParameter("nombre");
    String tipo = request.getParameter("tipo");
    String emailAddress = request.getParameter("emailAddress");
 // create the User object and write it to a file
    Usuario user = new Usuario(userId, password, nombre, tipo, emailAddress);
    ServletContext sc = getServletContext();

 // store the User object in the session
    HttpSession session = request.getSession();
    session.setAttribute("user", user);

 // send email to user
    String to = emailAddress;
    String from = "email_list@murach.com";
    String subject = "Welcome to our email list";
    String body = "Dear " + nombre + ",\n\n"
            + "Thanks for joining our email list. "
            + "We'll make sure to send you announcements "
            + "about new products and promotions.\n"
            + "Have a great day and thanks again!\n\n"
            + "Kelly Slivkoff\n" + "Mike Murach & Associates";
    boolean isBodyHTML = false;
    try {
        MailUtilLocal.sendMail(to, from, subject, body, isBodyHTML);
    } catch (MessagingException e) {
        String errorMessage =
                "ERROR: Unable to send email. "
                + "Check Tomcat logs for details.<br>"
                + "NOTE: You may need to configure your "
                + "system as described in chapter 15.<br>"
                + "ERROR MESSAGE: " + e.getMessage();
        request.setAttribute("errorMessage", errorMessage);
        this.log("Unable to send email. \n"
                + "Here is the email you tried to send: \n"
                + "=====================================\n"
                + "TO: " + emailAddress + "\n"
                + "FROM: " + from + "\n"
                + "SUBJECT: " + subject + "\n"
                + "\n"
                + body + "\n\n");

    }
    // forward request and response to JSP page
    String url = "/index.jsp";
    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
    dispatcher.forward(request, response);
}
} 
```

//MailUtilLocal.java:

```
import java.util.Properties;
import javax.mail.*;
import javax.mail.internet.*;

public class MailUtilLocal {

public static void sendMail(String to, String from, String subject, String body,   boolean bodyIsHTML)
        throws MessagingException {
    // 1 - get a mail session
    Properties props = new Properties();
    props.put("mail.transport.protocol", "smtp");
    props.put("mail.smtp.host", "localhost");
    props.put("mail.smtp.port", 25);
    Session session = Session.getDefaultInstance(props);
    session.setDebug(true);
    // 2 - create a message
    Message message = new MimeMessage(session);
    message.setSubject(subject);
    if (bodyIsHTML) {
        message.setContent(body, "text/html");
    } else {
        message.setText(body);
    }
    // 3 - address the message
    Address fromAddress = new InternetAddress(from);
    Address toAddress = new InternetAddress(to);
    message.setFrom(fromAddress);
    message.setRecipient(Message.RecipientType.TO, toAddress);
    // 4 - send the message
    Transport.send(message);
}
} 
```

我删除了这两行，因为在 UserIO 上没有方法 addRecord 时出现错误，而且我不知道其中应该包含什么

```
String path = sc.getRealPath("/WEB-INF/EmailList.txt");
UserIO.addRecord(user, path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:07:32.460

当您使用本地 smtp 服务器时，有时会发生您的 ISP 将阻止端口 25，因此您的 SMTP 服务器无法与远程服务器通信。

在这种情况下，您可以做的是使用不同的端口从您的 smtp 服务器发送电子邮件，或者使用接受来自 25 以外的端口（通常是 587 和 465）的连接的第三方服务。

看看[Sendgrid](http://sendgrid.com)、[mailjet](http://mailjet.com)和[postmarkapp](http://postmarkapp.com)，因为它们是一些最知名的供应商

# javascript - Markdown 将双星号转换为 javascript 中的粗体文本

> ID：10168285
> 
> 赞同：12
> 
> 时间：2012-04-16T03:10:38.483
> 
> 标签：javascript, jquery, markdown, wysiwym

我正在尝试像 Stackoverflow 一样制作自己的可降价文本区域。目标是允许人们输入`**blah blah**`textarea 并在 div be 中输出`<span style="font-weight:bold;">blah blah</span>`。

我在使用 javascript 查找并用 HTML 替换为**星号时遇到问题。

这是一个让派对开始的jsfiddle：http: [//jsfiddle.net/trpeters1/2LAL4/14/](http://jsfiddle.net/trpeters1/2LAL4/14/)

这是上面的 JS，只是为了向您展示我在哪里：

```
$(document.body).on('click', 'button', function() {

var val=$('textarea').val();

var bolded=val.replace(/\**[A-z][0-9]**/gi, '<span style="font-weight:bold;">"'+val+'" </span>');

$('div').html(bolded);
}); 
```

和HTML...

```
<textarea></textarea>
<div></div><button type="button">Markdownify</button> 
```

任何想法将不胜感激！

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-08-11T04:16:00.200

当字符紧接在星号之前或之后时，其他答案会失败。

这就像降价应该：

```
function bold(text){
    var bold = /\*\*(.*?)\*\*/gm;
    var html = text.replace(bold, '<strong>$1</strong>');            
    return html;
}

var result = bold('normal**bold**normal **b** n.');
document.getElementById("output").innerHTML = result;
```

```
div { color: #aaa; }
strong { color: #000; }
```

```
<div id="output"></div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-25T21:59:10.160

所提供的答案都不适用于所有情况。例如，如果我们在双星旁边有一个空格，其他解决方案将不起作用，即：

```
This will ** not ** be bold 
```

所以我写了这个：

```
function markuptext(text,identifier,htmltag)
{
    var array = text.split(identifier);
    var previous = "";
    var previous_i;
    for (i = 0; i < array.length; i++) {
        if (i % 2)
        {
            //odd number
        }
        else if (i!=0)
        {
            previous_i = eval(i-1);
            array[previous_i] = "<"+htmltag+">"+previous+"</"+htmltag+">";
        }
        previous = array[i];
    }
    var newtext = "";
    for (i = 0; i < array.length; i++) {
        newtext += array[i];
    }
    return newtext;
} 
```

就这样称呼它：

```
thetext = markuptext(thetext,"**","strong"); 
```

它适用于所有情况。当然，您也可以根据需要将它与其他标识符/html-tags 一起使用（stackoverflow 预览也应该有这个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T03:52:43.240

为什么要从头开始创建？有这么多开源编辑器，你应该选择一个你喜欢的代码库并从那里开始。 [http://oscargodson.github.com/EpicEditor/](http://oscargodson.github.com/EpicEditor/) [http://markitup.jaysalvat.com/home/](http://markitup.jaysalvat.com/home/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-25T17:09:52.130

反应中的自定义组件接收粗体，如布尔值

```
{(() => {
  const splitText = theText.split('**');
  return (
    <TextByScale>
      {splitText.map((text, i) => (
        <TextByScale bold={!!(i % 2)}>{text}</TextByScale>
      ))}
    </TextByScale>
  );
})()} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-02T13:58:42.793

选择适合您需求的完美正则表达式。如果您不希望样式跨越新行并且还使用`([^*<\n]+)`确保样式之间至少有一个字符，否则中间`**`没有字符将导致不可见。

```
function format_text(text){
return text.replace(/(?:\*)([^*<\n]+)(?:\*)/g, "<strong>$1</strong>")
     .replace(/(?:_)([^_<\n]+)(?:_)/g, "<i>$1</i>")
      .replace(/(?:~)([^~<\n]+)(?:~)/g, "<s>$1</s>")
      .replace(/(?:```)([^```<\n]+)(?:```)/g, "<tt>$1</tt>")
} 
```

• 上述代码的缺点是，您不能嵌套样式，即 `*_Bold and italic_*`

要允许嵌套样式，请使用此

```
format_text(text){
return text.replace(/(?:\*)(?:(?!\s))((?:(?!\*|\n).)+)(?:\*)/g,'<b>$1</b>')
   .replace(/(?:_)(?:(?!\s))((?:(?!\n|_).)+)(?:_)/g,'<i>$1</i>')
   .replace(/(?:~)(?:(?!\s))((?:(?!\n|~).)+)(?:~)/g,'<s>$1</s>')
   .replace(/(?:--)(?:(?!\s))((?:(?!\n|--).)+)(?:--)/g,'<u>$1</u>')
   .replace(/(?:```)(?:(?!\s))((?:(?!\n|```).)+)(?:```)/g,'<tt>$1</tt>');

// extra:
// --For underlined text--
// ```Monospace font```
} 
```

如果您希望您的样式跨越新行，请`\n` 从正则表达式中删除。此外，如果您的新行是 html 中断标记，您可以替换`\n`为`<br>`

晚点再谢我！

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-16T03:17:40.430

如果您使用的是 jQuery，请将其替换为：

```
$(document.body).on('click', 'button', function() { 
```

有了这个：

```
$("button").click(function () { 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-16T03:29:07.170

以下正则表达式将找到您的星号包装文本：

`/\x2a\x2a[A-z0-9]+\x2a\x2a/`

我更新了你的小提琴作为一个例子：http: [//jsfiddle.net/2LAL4/30/](http://jsfiddle.net/2LAL4/30/)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-16T03:23:06.690

一方面，您的正则表达式已损坏。您可能想要更多类似的东西：

```
/\*\*[A-z0-9]+\*\*/gi 
```

`*`是正则表达式中的特殊字符。如果你想匹配一个文字`*`，那么你需要用`\`.

例如：http: [//jsfiddle.net/2LAL4/22/](http://jsfiddle.net/2LAL4/22/)

然而，即使有了这种变化，在你到达你真正想去的地方之前，还有很长的路要走。例如，如果文本区域包含粗体和非粗体文本，则您的示例将不起作用。

# javascript - 在不创建空选项的情况下自动对焦保管箱中的空白区域？

> ID：10168288
> 
> 赞同：0
> 
> 时间：2012-04-16T03:11:36.340
> 
> 标签：javascript, html, select, option

如果我想选择第一个选项，我有一个`select`动态创建的`option`选项 [0] 总是会自动对焦，这使我无法工作。`onchange`选项的索引很重要，因此创建`" "`选项将不起作用。有任何想法吗？

* * *

编辑：用户创建一个对象。当用户保存对象时，它会在 select 标记中创建一个新选项。用户从选择标签中选择一些东西以返回到该对象。

自动对焦始终处于开启状态，`option[0]`直到他们选择了其他东西，即使他们创建了一个新的对象/选项，所以如果他们想选择第一个东西，但在第二个或第三个，用户必须先点击另一个选项，然后点击他们想要的。我想要的是它不关注任何选项，以便他们可以从一开始就点击 option[0]，无论他们是否从下拉列表中选择了任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:10:56.297

似乎需要做很多工作才能解决此问题，而不是更改您的要求之一。您说索引对应于对象数组的索引。为什么不能将第一个选项留空或“选择...”，然后简单地减去一个以查找数组？

或者，值是否与数组索引对应，或者使用自定义数据属性来存储数组索引？似乎其中任何一个都比尝试在多个浏览器中为不受支持的功能强制一致的行为更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:14:53.710

选择框始终选择其中一个选项（除非它没有任何选项）。您可能需要使用不同的事件（可能是 onclick）并测试该值以查看它是否已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T12:20:09.203

您可以使用以下命令添加默认的空选定选项：

```
<option selected="selected" disabled="disabled" hidden="hidden" value=""></option> 
```

选择默认为空，选项列表中的 void 选项不可选择。

# r - R 在循环中创建变量时显示错误消息

> ID：10168297
> 
> 赞同：0
> 
> 时间：2012-04-16T03:13:32.457
> 
> 标签：r, loops

我用 Tinn-R 编写了我的程序。当我使用 source() 在 R 中运行它时，显示了一条错误消息。以下示例仅包括部分循环。

```
 for (nn in 1:length(nSim))  ##whether the right loop???
              {
              r.all <- c()
              p.final <- array(0, c(15,5))  #1-5 a, b1, b2, b3, b4; 6 group id
              r.reference <- cbind(GRM_sim(t(p.sample[,1]), t(p.sample[,2:5]),sample.all[iS],0,rep(1,sample.all[iS]))

            DIF_ID <-c()
            DIF_index <- rep(0,15)
            for (iC in 1:length(CDIF))
            {
              if (CDIF[iC]==1)
              {
                DIF_ID <- sample(1:15,DIF.all[iDIF.all])   ##consistent DIF 
              }
               for (id in 1:length(DIF_ID))
               {
                  DIF_index[DIF_ID[id]] <-1
               }
              ... 
```

源错误（“120413consistentMH.R”）：120413consistentMH.R:107:17：意外符号 106：
107：DIF_ID

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:42:27.597

该错误是缺少括号的典型错误。给自己找一个匹配括号的编辑器，或者学习更自由地使用空格和回车。滚动到此网页末尾的第五行缺少结束括号：

```
r.reference <- cbind(GRM_sim( t( p.sample[,1]  ), 
                              t( p.sample[,2:5]), 
                               sample.all[iS],0, 
                              rep(1, sample.all[iS])
                               )
                      ^
            missing paren here 
```

# objective-c - UIAlertView cancelButtonTitle

> ID：10168300
> 
> 赞同：5
> 
> 时间：2012-04-16T03:14:05.270
> 
> 标签：objective-c, ios, uialertview

`UIAlertView`除了其构造函数之外， 有没有办法将标题设置为取消按钮`initWithTitle:message:delegate:cancelButtonTitle:otherButtonTitles:`。如果我已经初始化了`UIAlertView`之前和之后的时间，我想更改取消按钮的标题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T03:32:41.017

我不知道稍后更改取消按钮文本（我没有看到任何删除/编辑按钮方法），但如果您没有预先指定取消按钮，您可以稍后添加它，无论你想要的标签，例如

```
[action setCancelButtonIndex:[action addButtonWithTitle:@"Cancel"]]; 
```

# google-app-engine - 查询谷歌数据存储

> ID：10168302
> 
> 赞同：1
> 
> 时间：2012-04-16T03:14:24.697
> 
> 标签：google-app-engine, google-cloud-datastore, gql

我有以下 Objectify 实体将数据存储在 Google DataStore 中。

```
public class Record implements Serializable {

    private static final long serialVersionUID = 201203171843L;
    @Id  
    private Long id;                
    private String name;            // John Smith
    private Integer age;            // 43
    private String gender;          // Male/Female
    private String eventName;       // Name of the marathon/event
    private String eventCityName;   // City of the event
    private String eventStateName;  // State of the event
    private Date eventDate;         // event date

    //Getters & Setters
} 
```

现在，我的问题是如何查询我的数据库以获取给定 eventName 或事件 City+State 的记录数？或获取所有城市+名称的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:16:36.023

在 App Engine 上计数[非常昂贵](https://developers.google.com/appengine/docs/billing)：您基本上需要以特定条件（eventName = something）进行查询，然后计算所有结果。成本是仅键查询（1 次读取 + 1 次小型操作），并随着计算的实体数量而增加。例如，计算 100 万个实体将花费 0.8 美元。

通常所做的是将事物计数作为专用实体内的属性：当计数增加时增加属性值（添加实体）并在计数减少时减少（删除实体）。

如果您打算更大规模地执行此操作，那么请了解每个实体（实际上是实体组）的写入/更新限制约为 5 次写入/秒。请参阅[分片计数器](https://developers.google.com/appengine/articles/sharding_counters)了解如何解决此问题。

# android - 使用 Cursor 中的字符串来绘制到 ImageView

> ID：10168303
> 
> 赞同：0
> 
> 时间：2012-04-16T03:14:24.840
> 
> 标签：android, resources, decode, identifier

我有一个包含字符串名称和字符串文件名的数据库，用于动态创建页面。在上一页根据选中的按钮光标返回需要的具体条目，然后即用于查找和显示相应的图像。我一直在尝试从不同的地方混搭代码，但似乎没有任何效果。它目前看起来像这样：

```
ImageView iv = (ImageView) findViewById(R.id.iv1);
Bitmap bmap = (Bitmap) BitmapFactory.decodeResource(this.getResources(),
getResources().getIdentifier(c.getString(4), "drawable", getPackageName()));
iv.setImageBitmap(bmap); 
```

出于调试目的，我已将光标 getString(4) 烘烤，它正确显示为“al_0”或应该是什么，并且 res 中的“drawable”文件夹中有一个名为“al_0.jpg”的文件。

我尝试了将包名和可绘制文件夹位置直接与图像名称连接起来的各种组合，并将 null 放在其他变量位置。每次我引用 decodeResource 行或“获取资源编号 0x00000000 的值时无包标识符”时都会崩溃。

任何帮助将不胜感激，如果需要更多细节，我可以尝试提供。

更新：所以似乎还有其他问题，即使使用以下内容我也会崩溃：

```
ImageView iv = (ImageView) findViewById(R.id.iv1);
iv.setImageResource(R.drawable.al_0); 
```

并且 R.drawable.al_0 绝对是 drawable-mdpi 中的正确资源（我根据 Lint 的建议移动了它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:38:01.877

所以事实证明一切都很好，我的图像太大了。使用`BitmapFactory.Options.inSampleSize`我能够让一切正常。感谢您提供有用的调试提示，对于此次事故，我深表歉意。

更新：我还需要 bmap.recycle() 因为这些视图是动态创建的，并且在打开一些视图后它们会导致内存错误。两者都被认为是问题的最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:28:57.030

这就是我所做的。

以格式存储文件名`com.example.appname:drawable/filename`注意 appname 和 drawable 之间的冒号。

然后在我从数据库中提取该字符串后，我使用它，`imageString`光标中的字符串在哪里。

```
imageResource = ClassName.this.getResources().getIdentifier(imageString, null, null);
imageView.setImageResource(imageResource); 
```

# python - python中的两个窗口，吓到我了

> ID：10168307
> 
> 赞同：0
> 
> 时间：2012-04-16T03:15:02.377
> 
> 标签：python, windows, tkinter

*+* +_+ *+* +_+ *+* +_+ *+* +_+ *+* +_+ *+* +_+ *++*

** 没关系！** 这个问题已经回答了！它只需要在底部而不是根蜂蜡...

对。这是底部。它只需要一点代码清理:)....没关系。不管怎么说，还是要谢谢你！

```
#omit root
app = App()
app.mainloop() 
```

*+* +_+ *+* +_+ *+* +_+ *+* +_+ *+* +_+ *+* +_+ *+* ++

我已经努力了两个小时来摆脱第二个窗口。在我实现了询问文件夹名称的弹出窗口后，程序运行时我突然打开了两个窗口。我只想要一个，真的很烦人。我希望这个程序用四个按钮打开一个窗口，并在它们上方有一个标题。其中一个按钮要求输入，然后它就消失了。有人可以帮我回到一个窗口吗？谢谢你。我为凌乱的代码道歉，这是我第一个这种风格的脚本。

```
#!/usr/bin/python
            #from Tkinter import *
            import Tkinter as tk

            import os
            import tkFileDialog

            class App(tk.Tk):
            #class App:

                #def __init__(self, master):
                def __init__(self):
                tk.Tk.__init__(self)

                frame = tk.Frame(self)
                frame.pack()

                self.button = tk.Button(frame, text="leave", fg="red", command=frame.quit)
                self.button.pack(side=tk.LEFT)

                self.fetch = tk.Button(frame,text="Choose Folder for Pictures",fg="salmon",command=self.choose)
                self.fetch.pack(side=tk.LEFT)

                self.fetch = tk.Button(frame,text="Name folder on site (public)",command=self.on_click)
                self.fetch.pack(side=tk.LEFT)

                self.hi_there = tk.Button(frame, text="Create code for images", fg="brown", command=self.generate)
                self.hi_there.pack(side=tk.LEFT)
                #oroville dam is the highest in the country
                w = tk.Label(text="MSP Art File Fetcher")
                w.pack()
             # Toplevel window

                top = self.top = tk.Toplevel(self)
                myLabel = tk.Label(top, text='Name of image directory:')
                myLabel.pack()

                self.myEntryBox = tk.Entry(top)
                self.myEntryBox.pack()

                mySubmitButton = tk.Button(top, text='Done', command=self.submit_name)
                mySubmitButton.pack()

                top.protocol("WM_DELETE_WINDOW", self.save_top)

                top.withdraw()

                def save_top(self):
                self.top.withdraw()

                def choose(self):
                self.foldername=tkFileDialog.askdirectory()
                print self.foldername

                def name(self):
                print self.foldername

                def generate(self): 
                print self.foldername  
                    self.path=self.foldername  # failing, works
                self.dirlist=os.listdir(self.path)
                yoz = file('demcode.txt','wt')#totally works
                f=open('demcode.txt', 'r+')
                f.write(self.foldername)
                f.write('\ndo not be a crack addic\n')
                f.write('\n')
                print self.dirlist
                print self.dirlist[0]
                self.y=len(self.dirlist)
                print self.y
                for x in range(0,self.y): #works great
                #for x in range(0,4):#self.y: #failing
                    print 'We\'re on image %d' % (x)
                #print in self.dirlist
                f.write('\n'.join(self.dirlist[0]))#returns a vertical word!?
                f.write('\n')   
                f.write(self.dirlist[0])
                f.write('\n')
                f.write('\n')
                f.write('\n')   
                f.write(', '.join(self.dirlist))#CAUTION, will write over existing data

                def say_hi(self):
                print "don't be a crack addic"

                def submit_name(self):
                if self.myEntryBox.get() != "":
                    self.username = self.myEntryBox.get()
                    self.myEntryBox.delete(0, 'end')
                    self.top.withdraw()

                def on_click(self):
                self.top.deiconify()
            """
                def show_name(self):
                self.mainText.delete('1.0', 'end')
                self.mainText.insert('end', 'Welcome ' + self.username + '!')
            """
            root = tk.Tk()

            app = App()

            root.mainloop()
            """
            """
            achieve this format of html.  python program will loop every file in the directory, placing the name of the file in the set path (asked directory name), and write the approiate code for lightbox
            """
            <h1>MSP (Acorns) Gallery</h1>
            #http://www.mspart.com/lightbox.html
            <div id="page">
            <div id="images">
            <ul class="gallery">
              <a href="images/Pastels/alpha_farm.jpg" rel="lightbox"> </a>
              <li><a href="images/Pastels/alpha_farm.jpg" rel="lightbox"><img src="images/Pastels/alpha_farm.jpg" alt="description"></a></li>
              <a href="images/Pastels/_day_island.jpg" rel="lightbox"> </a>
              <li><a href="images/Pastels/_day_island.jpg" rel="lightbox"><img src="images/Pastels/_day_island.jpg" alt="description"></a>
            </li></ul>
            </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-26T15:08:18.160

在您的`app`班级中，您已经定义了一个`Tk`. 因此，当您定义 an`app`和 another时`Tk`，您正在创建两个窗口。删除一个或另一个应该只创建一个窗口。

# regex - 经纬度数组的正则表达式

> ID：10168311
> 
> 赞同：0
> 
> 时间：2012-04-16T03:15:23.083
> 
> 标签：regex, ruby-on-rails-3

我需要从可以采用以下两种格式的字符串中提取经纬度：

```
[-1.23,1.23]
(-1.23,1.23) 
```

现在这就是我正在做的，但只适用于 [] no ()：

```
Location.new(coordinates: [string.gsub(/\[|,(.*)\]/,'').to_f, string.gsub(/\[(.*),\s|\]/,'').to_f]) 
```

我需要很长的纬度订单，因为我使用的是 mongodb。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:33:51.977

您可以使用以下正则表达式`/([\[\(])([^,]*),(.*?)([\]\)])/`。

我在节点上测试：

```
> var re = /([\[\(])([^,]*),(.*?)([\]\)])/;
> var s  = "[-1.23,1.23]";
> var t  = "(-1.23,1.23)";
> s.match(re)
[ '[-1.23,1.23]',
  '[',
  '-1.23',
  '1.23',
  ']',
  index: 0,
  input: '[-1.23,1.23]' ]
> t.match(re)
[ '(-1.23,1.23)',
  '(',
  '-1.23',
  '1.23',
  ')',
  index: 0,
  input: '(-1.23,1.23)' ] 
```

# html - 将 SWF 影片放在 HTML 内容后面

> ID：10168315
> 
> 赞同：0
> 
> 时间：2012-04-16T03:15:45.247
> 
> 标签：html, flash, z-index

我正在尝试创建一个网站，其中包含必须放在导航后面的电影 (SWF)，但它不起作用。即使我使用 z-index 属性播放，电影也没有出现在后面。

为了解释我正在尝试创建的内容，请看一下描述我网站主要元素的这张图片：

![在此处输入图像描述](../Images/b9a13e3e380cb1ff32b0b65a483c0e66.png)

有人可以分享一段代码来解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:04:57.467

您需要将参数与 z-index 参数一起添加到 object/ embed 标签：

对于对象：

```
<param name="wmode" value="transparent"> 
```

对于嵌入：

`wmode="transparent"`

这是一个很好的例子：[http ://www.flashdesignerzone.com/tutorials/t1026.php](http://www.flashdesignerzone.com/tutorials/t1026.php)

# codeigniter - 如何在 CodeIgniter 中编辑您的域的索引页面？

> ID：10168322
> 
> 赞同：0
> 
> 时间：2012-04-16T03:17:15.640
> 
> 标签：codeigniter, url

所以现在我的 .htaccess 页面中有这个：

```
RewriteEngine On
RewriteCond $1 !^(index\.php|images|js|fonts|css|robots\.txt)
RewriteRule ^(.+)$ index.php?$1 [L] 
```

这使得我可以通过访问[http://www.yourdomain.com/page](http://www.yourdomain.com/index.php/page)来访问[http://www.yourdomain.com/index.php/page](http://www.yourdomain.com/page)。但是我不知道如何编辑显示在[http://www.yourdomain.com](http://www.yourdomain.com)的页面。

我尝试创建一个名为 index 的控制器，但除非您访问[http://www.yourdomain.com/index ，否则它不会做任何事情](http://www.yourdomain.com/index)

有人能帮忙吗？谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:30:27.387

没有 url 段时加载的默认控制器定义在
`application/config/routes.php`：

来自：[http ://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

> ### 预留路线
> 
> `$route['default_controller'] = 'welcome';`
> 
> 如果 URI 不包含数据，则此路由指示应加载哪个控制器类，当人们加载您的根 URL 时就是这种情况。在上面的示例中，将加载“欢迎”类。鼓励您始终使用默认路由，否则默认情况下会出现 404 页面。

如果除了控制器本身之外没有 url 段，默认情况下`index()`会调用该控制器的方法（这种情况总是如此，而不仅仅是在路由方面）。因此，在这个示例中，您将查看`welcome`控制器和`index`方法，并查看正在加载哪些视图文件等。

# matlab - matlab代码说明

> ID：10168325
> 
> 赞同：0
> 
> 时间：2012-04-16T03:17:54.860
> 
> 标签：matlab

我是matlab新手。
有人可以向我解释以下代码。此代码用于训练神经网络

```
N = xlsread('data.xls','Sheet1');
N = N(1:150,:);
UN = xlsread('data.xls','Sheet2');
UN = UN(1:150,:);
traindata = [N ; UN];
save('traindata.mat','traindata');
label = [];
for i = 1 : size(N,1)*2
if( i <= size(N,1))
%        label = [label ;sum(traindata(i,:))/size(traindata(i,:),2)];
     label = [label ;sum(traindata(i,:))/10];
else
%        label = [label ;sum(traindata(i,:))/size(traindata(i,:),2)];
     label = [label ;sum(traindata(i,:))/10];
end
end
weightMat = BpTrainingProcess(4,0.0001,0.1,0.9,15,[size(traindata,1) 1],traindata,label); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:56:46.130

我找不到与 对应的内置神经网络工具箱`BpTrainingProcess()`，因此这必须是您可以在本地访问的文件（或者您需要从给您此代码的人那里获取）。它可能将几个对神经网络工具箱函数的函数调用串在一起，或者可能是反向传播训练方法的原始实现。

否则，代码有一些缺点。一方面，内部 if-else 语句似乎并没有做任何事情。即使是被注释掉的行也会留下一个完全无用的 if-else 设置。看起来 if-else 旨在让您对从 Excel 文件的 Sheet1 加载的数据与从 Sheet2 加载的数据进行不同的标签规范化。也许这对您很重要，但目前还没有在程序中发生。

最后，代码使用一个空数组，`label`然后将行追加到空数组。这是不需要的，因为您已经知道将有多少行（总计`size(N,1)*2 = 150*2 = 300`行。您可以轻松设置`label=zeros(300,1)`然后在 for 循环的每次迭代中使用通常的索引：`label(i) = ...`。这可以节省时间和空间，但可以说对于 300 行的数据集来说并不重要（假设每行的长度不太大）。

我将文档放在下面的代码旁边。

```
% The functionn 'xlsread()' reads data from an Excel file.
% Here it is storing the values from Sheet 1 of the file 'data.xls'
% into the variable N, and then using the syntax N = N(1:150,:) to
% change N from being all of the data into being only the first
% 150 rows of the data
N = xlsread('data.xls','Sheet1');
N = N(1:150,:);

% Now do the same thing for Sheet 2 from the Excel file.
UN = xlsread('data.xls','Sheet2');
UN = UN(1:150,:);

% This concatenates the two different data arrays together, making
% one large array where N is the top half and UN is the bottom half.
% This is basically just stacking N on top of UN into one array.
traindata = [N ; UN];

% This saves a copy of the newly stacked array into the Matlab data file
% 'traindata.mat'. From now on, you should be able to load the data from
% this file, without needing to read it from the Excel sheet above.
save('traindata.mat','traindata');

% This makes an empty array which will have new things appended to it below.
label = [];

% Because UN and N have the same number of rows, then the training data
% has twice as many rows. So this sets up a for loop that will traverse
% all of these rows of the training data. The 'size()' function can be
% used to get the different dimensions of an array.
for i = 1 : size(N,1)*2

    % Here, an if statement is used to check if the current row number, i,
    % is less than or equal to than the number of rows in N. This implies
    % that this part of the if-statement is only for handling the top half
    % of 'trainingdata', that is, the stuff coming from the variable N.

    if( i <= size(N,1))
       % The line below was already commented out. Maybe it had an old use
       % but is no longer needed?
       % label = [label ;sum(traindata(i,:))/size(traindata(i,:),2)];

       % This syntax will append new rows to the variable 'label', which
       % started out as an empty array. This is usually bad practice, memory-wise
       % and also for readability.

       % Here, the sum of the training data is being computed, and divided by 10
       % in every case, and then appended as a new row in 'label'. Hopefully,
       % if you are familiar with the data, you will know why the data in 'N'
       % always needs to be divided by 10.
       label = [label ;sum(traindata(i,:))/10];

    % Otherwise, if i > # of rows then handle the data differently.
    % Really this means the code below treats only data from the variable UN.
    else
       % The line below was already commented out. Maybe it had an old use
       % but is no longer needed?
       % label = [label ;sum(traindata(i,:))/size(traindata(i,:),2)];

       % Just like above, the data is being divided by 10\. Given that there
       % is nothing different about the code here, and how it modifies 'label'
       % there is no need for the if-else statements, and they only waste time.
       label = [label ;sum(traindata(i,:))/10];

    % This is needed to show the end of the if-else block.
    end

% This is needed to show the end of the for-loop.
end

% This appears to be a Back-Propagation Neural Network training function.
% This doesn't match any built-in Matlab function I can find, but you might
% check in the Neural Network toolbox to see if the local function
% BpTrainingProcess is a wrapper for a collection of built-in training functions.

weightMat = BpTrainingProcess(4, 0.0001, 0.1, 0.9, 15,
                              [size(traindata,1) 1], traindata,label); 
```

这是用于反向传播训练的示例 Matlab 神经网络工具箱函数的[链接。](http://www.mathworks.com/help/toolbox/nnet/ref/trainbr.html)您可能想查看那里的文档，看看是否有任何类似于`BpTrainingProcess()`.

# java - java系统找不到指定的文件

> ID：10168327
> 
> 赞同：3
> 
> 时间：2012-04-16T03:17:57.537
> 
> 标签：java

我使用Java复制文件但出现异常（系统找不到指定的文件）。

代码是

```
public static void copyFile(String sourceFile, String destFile){
    try {       
        InputStream in = new FileInputStream(sourceFile);
        OutputStream os = new FileOutputStream(destFile);
        byte[] buffer = new byte[1024];
        int count;
        while ((count = in.read(buffer)) > 0) {
            os.write(buffer, 0, count);
        }
        in.close();
        os.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

测试代码

```
public static void main(String[] args) {
    String name = getFileName("D:/z/temp.txt");
    String target = "D:/tem.txt";
    copyFile(name, target);
} 
```

例外是`java.io.FileNotFoundException: temp.txt(the system can not find the file specified)`

1.  文件“temp.txt”是存在的。
2.  路径是对的没问题。

我想这是权限的问题。谁能给出答案谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T03:23:28.740

我们需要看方法`getFileName()`才能确定，但​​是根据错误信息和方法名，我怀疑问题只是这个方法只返回了文件名，去掉了路径信息，所以文件确实是， 未找到。

# android - android从xml文件中获取nodelist属性

> ID：10168328
> 
> 赞同：0
> 
> 时间：2012-04-16T03:18:05.960
> 
> 标签：android, xml-parsing, android-listview

我从 xml 文件[http://view-source:http://www.macetlagi.com/maps/st/canvaser/3/tb/tb123](http://view-source%3ahttp://www.macetlagi.com/maps/st/canvaser/3/tb/tb123)制作列表视图。我将从“段”标签中获取元素。当我运行时调试我的代码，我收到此错误`java.lang.NullPointerException`。如果我进行愚蠢的编码，请更正我的代码。这是我在 android 中的 java 代码：

```
public class ListSegment extends ListActivity {

String URL_XML = "http://www.macetlagi.com/maps/st/canvaser/3/tb/tb123";

static final String KEY_SEGMENT = "segment";
static final String KEY_SEGMENT_ID = "segment_id";
static final String KEY_MAIN_SEGMENT = "main_segment_name"; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listsegment_main);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL_XML); 
    Document doc = parser.getDomElement(xml);       

            NodeList nL = doc.getElementsByTagName(KEY_SEGMENT);
            for (int i = 0; i < nL.getLength(); i++) {
                Node node = nL.item(i);
                    if(node.hasAttributes()) {
                        NamedNodeMap attr_id = node.getAttributes();
                        attr_id.getNamedItem(KEY_SEGMENT);
                    }
                HashMap<String, String> map =  new HashMap<String, String>();
                Element e = (Element) nL.item(i);
                map.put(KEY_SEGMENT_ID, parser.getValue(e, KEY_SEGMENT_ID));
                map.put(KEY_MAIN_SEGMENT, parser.getValue(e, KEY_MAIN_SEGMENT));

            menuItems.add(map);
            }

            ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.list_item,
                    new String[] {KEY_SEGMENT_ID, KEY_MAIN_SEGMENT}, new int[] {
                    R.id.segmentid, R.id.segmentname
            });
            setListAdapter(adapter);
  }
 } 
```

# android - 由于内存不足，无法在模拟器中加载 Android 图像（ImageView）？

> ID：10168330
> 
> 赞同：0
> 
> 时间：2012-04-16T03:18:19.243
> 
> 标签：android, imageview

我是 Android 开发新手，在将图像加载到活动时遇到错误。

以下是我在eclipse中看到的日志：

```
04-15 19:55:36.316: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed 41K, 53% free 2551K/5379K, external 1625K/2137K, paused 180ms
04-15 19:55:36.756: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed 1K, 53% free 2550K/5379K, external 4025K/5027K, paused 42ms
04-15 19:55:37.296: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed 2K, 53% free 2560K/5379K, external 5570K/5597K, paused 52ms
04-15 19:55:41.306: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed 10K, 53% free 2579K/5379K, external 6677K/7260K, paused 43ms
04-15 19:55:41.685: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed 1K, 53% free 2578K/5379K, external 9077K/11125K, paused 51ms
04-15 19:55:41.986: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed <1K, 53% free 2580K/5379K, external 9377K/11777K, paused 41ms
04-15 19:55:42.695: D/dalvikvm(3317): GC_EXTERNAL_ALLOC freed 1K, 53% free 2578K/5379K, external 13794K/15842K, paused 51ms
04-15 19:55:42.725: E/dalvikvm-heap(3317): 10181472-byte external allocation too large for this process.
04-15 19:55:42.766: E/GraphicsJNI(3317): VM won't let us allocate 10181472 bytes
04-15 19:55:42.766: D/dalvikvm(3317): GC_FOR_MALLOC freed 0K, 53% free 2578K/5379K, external 13794K/15842K, paused 33ms
04-15 19:55:42.775: D/AndroidRuntime(3317): Shutting down VM
04-15 19:55:42.775: W/dalvikvm(3317): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-15 19:55:42.815: E/AndroidRuntime(3317): FATAL EXCEPTION: main
04-15 19:55:42.815: E/AndroidRuntime(3317): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.digitest.sample/com.digitest.sample.SafetyActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class android.widget.ImageView
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.os.Looper.loop(Looper.java:123)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at java.lang.reflect.Method.invoke(Method.java:507)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at dalvik.system.NativeStart.main(Native Method)
04-15 19:55:42.815: E/AndroidRuntime(3317): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class android.widget.ImageView
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.Activity.setContentView(Activity.java:1657)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at com.digitest.sample.SafetyActivity.onCreate(SafetyActivity.java:14)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-15 19:55:42.815: E/AndroidRuntime(3317):     ... 11 more
04-15 19:55:42.815: E/AndroidRuntime(3317): Caused by: java.lang.reflect.InvocationTargetException
04-15 19:55:42.815: E/AndroidRuntime(3317):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
04-15 19:55:42.815: E/AndroidRuntime(3317):     ... 22 more
04-15 19:55:42.815: E/AndroidRuntime(3317): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.Bitmap.nativeCreate(Native Method)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.widget.ImageView.<init>(ImageView.java:118)
04-15 19:55:42.815: E/AndroidRuntime(3317):     at android.widget.ImageView.<init>(ImageView.java:108)
04-15 19:55:42.815: E/AndroidRuntime(3317):     ... 25 more 
```

我的图像是 png 图像，大小仅为 130KB，尽管尺寸为 741x1526px。但我无法想象为什么模拟器无法处理这样的图像大小。我加载了这张图片的较小版本，大小约为 120KB，尺寸为 370 × 762px，加载得很好。

这是我实现 imageview 活动的方式：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/safety_base" >

     <ImageView
        android:id="@+id/imgSafety"
        android:contentDescription="@string/imgSafety_desc"  
        android:layout_width="1000dp"
        android:layout_height="wrap_content"   
        android:maxHeight="180dp"  
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true"
        android:background="@android:color/transparent"
        android:src="@drawable/safety_info_large" />

</RelativeLayout> 
```

知道为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:25:04.340

你给了宽度 1000dp 和高度 180dp。减小宽度或将其设为“fill_parent”或“wrap_content”。之间，您尝试过哪个模拟器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:00:04.270

就像 Seshu 说的，保持你的尺寸切合实际。拥有一个 1000dp 宽的图像和一个远不及 1k dp 的屏幕是愚蠢的。查看开发指南中的以下内容以获取更多信息。

[显示位图资源](http://developer.android.com/training/displaying-bitmaps/index.html)

[显示大位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

**编辑**

另一种选择是将图像加载到 WebView 以实现滚动和缩放功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:36:04.047

您可以覆盖 Activity 的[onLowMemory()](http://developer.android.com/reference/android/app/Activity.html#onLowMemory%28%29)方法来自定义处理此类场景。

# c# - b/w Hashtable、Dictionary 和 KeyValuePair 有什么区别？

> ID：10168333
> 
> 赞同：28
> 
> 时间：2012-04-16T03:18:44.767
> 
> 标签：c#, .net, dictionary, hashtable, key-value

我在我的代码中使用 Dictionary，但我的同事使用 Hashtable。MSDN 说他们在键值对上工作，Hashtable 和字典的示例在 MSDN 上是相同的。

那么它们彼此之间有多大不同？哪一个是最好的，或者它们适合不同的场合？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-16T03:23:58.950

`Hashtable`是一个无类型关联容器，它使用`DictionaryEntry`类通过其键值对返回枚举结果。

`Dictionary<K,T>``Hashtable`是C# 2.0 中引入的通用替换。它使用`KeyValuePair<K,T>`通用对象来表示其键值对。

如今，您应该看到的唯一地方`Hashtable`是在引入泛型之前必须在 .NET 1.1 上运行的遗留代码。出于兼容性原因，它一直存在，但您应该尽可能选择`Dictionary<K,T>`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-16T03:20:26.657

`KeyValuePair`是存储在 a `Hashtable`(or `Dictionary`) 中的数据单位。它们彼此不等价。

键值对包含一个键和一个值。字典或哈希表包含许多键与其关联值的映射。

`KeyValuePair`当您想将两个相关的信息作为一个单元存储时很有用，尤其是当一个以识别方式与另一个相关时（例如 1234 => "David Smith"）。它们也是您在迭代字典时得到的。在 .NET 4.0 中，这些实际上仅用于在 Dictionary 内部使用 - Tuple 类已被引入用于一般用途。

`Hashtable`和之间的区别在于`Dictionary`它`Hashtable`不是一个通用类——它的键和值都是 type `Object`。 `Dictionary`是通用的，通常应该用于`Hashtable`任何新的开发。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T03:23:59.747

字典是一个类型化的哈希表。如果您知道键和值的数据类型，请出于性能原因使用字典（避免强制转换）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-26T05:28:53.927

`KeyValuePair<TKey, TValue>`是 使用的类型`Dictionary<TKey, TValue>`。当您遍历 Dictionary 中的项目时，您会得到一系列`KeyValuePair`对象。

以下是一些示例用法：

```
var dict = new Dictionary<string, int>();

dict.Add("Hello", 1);

foreach (KeyValuePair<string, int> entry in dict)
{
    string s = entry.Key;
    int i = entry.Value;

    // More logic here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T03:33:00.480

一个主要区别是它`Hashtable`是线程安全的，而`Dictionary`不是。

[文档](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)说：

> `Hashtable`是线程安全的，可供多个读取线程和单个写入线程使用。当只有一个线程执行写入（更新）操作时，多线程使用是线程安全的，这允许无锁读取，前提是写入器序列化为`Hashtable`. `Hashtable`为了支持多个写入器，必须通过方法返回的包装器完成所有操作`Synchronized`，前提是没有线程读取 Hashtable 对象。

将此与[`Dictionary`文档](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)进行对比：

> A`Dictionary(Of TKey, TValue)`可以同时支持多个读取器，只要不修改集合即可。

# c++ - 用qt下载大量文件

> ID：10168336
> 
> 赞同：2
> 
> 时间：2012-04-16T03:20:04.507
> 
> 标签：c++, qt

我需要用 qt 下载大量文件（通常不小）（也计算速度和显示进度），目前我为此使用 QnetworkAccessManager，但是在大量快速下载时它会随机崩溃，最常见的是 ntdll.dll！tan on堆栈，谷歌说它来自win api的堆分配，我在这个代码部分没有做任何手动内存管理，所以我认为我的代码不能做内存损坏，我也试图不删除 qnetworkreply 对象，这也是不解决崩溃，这里是代码部分：

请求：

```
QNetworkReply *r =  qnm.get(req);
connect(r, SIGNAL(downloadProgress(qint64,qint64)), SLOT(game_s_file_download_progress(qint64,qint64)), Qt::QueuedConnection);
connect(r, SIGNAL(finished()), &conn_timer, SLOT(stop()), Qt::QueuedConnection);
connect(r, SIGNAL(finished()), SLOT(game_sz_file_request_finished()), Qt::QueuedConnection);
connect(r, SIGNAL(downloadProgress(qint64,qint64)), &conn_timer, SLOT(start()), Qt::QueuedConnection);
connect(r, SIGNAL(downloadProgress(qint64,qint64)), spd_calc_obj, SLOT(handle_new_data(qint64,qint64)), Qt::QueuedConnection);
conn_timer_obj *ct = new conn_timer_obj(0, r);
connect(r, SIGNAL(finished()), ct, SLOT(deleteLater()), Qt::QueuedConnection);
connect(&conn_timer, SIGNAL(timeout()), ct, SLOT(abort()), Qt::QueuedConnection);
connect(&conn_timer, SIGNAL(timeout()), &conn_timer, SLOT(stop()));
conn_timer.start(); 
```

（qnm 是 QnetworkAccessManager）

处理数据：

```
lists_mutex.lock();
QNetworkReply *current_file = qobject_cast<QNetworkReply*>(sender());
assert(current_file != NULL);
#ifdef DEBUG
try{
#endif

if(current_file->error() == QNetworkReply::NoError)
{
    if(!updated_size_c_f)
        updated_size_c_f = updated_size_c_f_completed + bytesTotal;

    QString filename = cfg->game_path();
    if(!updated_g_s_list_http.empty())
    {
        filename += QString::fromUtf8(updated_g_s_list_http.begin()->name.c_str());
        if(filename.indexOf("/l10n/") != -1)
        {
            int p1 = 0, p2 = 0;
            p1 = filename.indexOf("/l10n/");
            p1+= strlen("/l10n/");
            p2 = filename.indexOf("/", p1+1);
            filename.remove(p1, p2-p1);
        }
    }
    else
        filename += QString("/upd/" + QString::fromUtf8(updated_g_f_list.begin()->path.c_str()));

    updated_size_completed_mutex.lock();
    updated_size_completed += current_file->bytesAvailable();
    updated_size_c_f_completed += current_file->bytesAvailable();
    emit set_progress2(((double)updated_size_completed/(double)updated_size)*100.0);
    QFile file(filename + ".upd_part");
    if(file.open(QIODevice::WriteOnly | QIODevice::Append))
    {
        file.write(current_file->readAll());
        file.close();
    }
    else
        current_file->abort();
    if(!partial_pak_downloading)
        emit set_progress(((double)updated_size_c_f_completed/(double)updated_size_c_f)*100.0);
    updated_size_completed_mutex.unlock();

}
else
{
#ifdef DEBUG
    cfg->log()<<current_file->errorString();
#endif
    current_file->abort();
}
#ifdef DEBUG
}
catch(...)
{
    cfg->log()<<"exception in game_s_file_download_progres: ";
    lists_mutex.unlock();
}
#endif
lists_mutex.unlock();
} 
```

和完成的信号：

```
QNetworkReply *current_file = qobject_cast<QNetworkReply*>(sender());
assert(current_file != NULL);
lists_mutex.lock();
current_file->disconnect();
conn_timer.disconnect();
QString filename = cfg->game_path();
#ifdef DEBUG
try{
#endif
if(!updated_g_s_list_http.empty())
{
#ifdef DEBUG
    upd_stats.incr_d_h();
#endif
    filename += QString::fromUtf8(updated_g_s_list_http.begin()->name.c_str());
    if(filename.indexOf("/l10n/") != -1)
    {
        int p1 = 0, p2 = 0;
        p1 = filename.indexOf("/l10n/");
        p1+= strlen("/l10n/");
        p2 = filename.indexOf("/", p1+1);
        filename.remove(p1, p2-p1);
    }
}
else
{
    assert(!updated_g_f_list.empty());
    filename += QString("/upd/" + QString::fromUtf8(updated_g_f_list.begin()->path.c_str()));
}
#ifdef DEBUG
}
catch(...)
{
    cfg->log()<<"exception in game_sz_file_request_finished part 1: ";
}
#endif
if(current_file->error() == QNetworkReply::NoError)
{
#ifdef DEBUG
    try{
#endif
        fail_dl_count = 0;
    int have_bytes = current_file->bytesAvailable();
    if(have_bytes)
    {
        updated_size_completed_mutex.lock();
        updated_size_completed += have_bytes;
        emit set_progress2(((double)updated_size_completed/(double)updated_size)*100.0);
        updated_size_completed_mutex.unlock();
        QFile file(filename + ".upd_part");
        if(file.open(QIODevice::WriteOnly | QIODevice::Append))
        {
            file.write(current_file->readAll());
            file.close();
        }
        else
            ;//TODO: handle error
    } 
```

**更新1：**

我在 qt bugtracker 上发布了错误，它也链接了具有相同问题的错误：

[https://bugreports.qt-project.org/browse/QTBUG-25​​514](https://bugreports.qt-project.org/browse/QTBUG-25514)

# sonarqube - 如何使用声纳连接到远程数据库

> ID：10168338
> 
> 赞同：-1
> 
> 时间：2012-04-16T03:20:08.013
> 
> 标签：sonarqube

如果我在 solaris 机器上安装了声纳。可以远程连接到其他solaris box中的数据库吗？谢谢

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:38:27.800

请去阅读 Sonar 网站上的文档，那里的一切都清楚地解释了（http://docs.codehaus.org/display/SONAR/Installation+in+4+steps）。

# android - 接听电话后如何恢复之前的活动？

> ID：10168348
> 
> 赞同：-1
> 
> 时间：2012-04-16T03:22:10.057
> 
> 标签：android, call

我的应用程序具有主要活动，并且仅将另一个活动显示为单例。所以我的应用程序有一个主要活动和另一个在主要活动上运行的活动。当我接到电话时，激活的屏幕会变为 Android 的通话屏幕。但是当我返回我的应用程序时，我只能看到主要活动。激活的活动不会回来。在这种情况下，我是否必须将激活的活动保存在我的应用程序中并在接到电话后重新启动它？如果是这样，请让我知道解决这个问题的好方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:31:32.953

只需覆盖`onSaveInstanceState`以保存状态并`onRestoreInstanceState`恢复到保存的状态。

# python - 在 Python 中将大文件（25k 条目）加载到 dict 中很慢？

> ID：10168349
> 
> 赞同：5
> 
> 时间：2012-04-16T03:22:18.007
> 
> 标签：python, performance, dictionary, io

我有一个大约 25000 行的文件，它是一个 s19 格式的文件。

每行就像：S214 **780010** ***00802000000010000000000A508CC78C*** 7A

实际文件中没有空格，第一部分`780010`是这一行的地址，我希望它是一个dict的键值，我希望数据部分***00802000000010000000000A508CC78C***是这个键的值。我这样写我的代码：

```
def __init__(self,filename):
    infile = file(filename,'r')
    self.all_lines = infile.readlines()
    self.dict_by_address = {}

    for i in range(0, self.get_line_number()):
        self.dict_by_address[self.get_address_of_line(i)] = self.get_data_of_line(i)

    infile.close() 
```

get_address_of_line() 和 get_data_of_line() 都是简单的字符串切片函数。get_line_number() 遍历 self.all_lines 并返回一个 int

问题是，初始化过程需要我超过 1 分钟，是我构造 dict 的方式错误还是 python 只需要这么长时间才能做到这一点？

顺便说一句，我是 python 新手 :) 也许代码看起来更像 C/C++，任何关于如何像 python 一样编程的建议都值得赞赏:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T03:29:57.307

这样的事情怎么样？（我只用一行做了一个测试文件，`S21478001000802000000010000000000A508CC78C7A`所以你可能需要调整切片。）

```
>>> with open('test.test') as f:
...     dict_by_address = {line[4:10]:line[10:-3] for line in f}
... 
>>> dict_by_address
{'780010': '00802000000010000000000A508CC78C'} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T03:28:53.390

这段代码应该比你现在拥有的要快得多。编辑：正如@sth 指出的那样，这不起作用，因为实际文件中没有空格。我会在最后添加一个更正的版本。

```
def __init__(self,filename):
    self.dict_by_address = {}

    with open(filename, 'r') as infile:
        for line in infile:
            _, key, value, _ = line.split()
            self.dict_by_address[key] = value 
```

一些评论：

*   Python 中的最佳实践是使用`with`语句，除非您使用的是没有它的旧 Python。

*   最佳做法是使用`open()`而不是`file()`; 我认为 Python 3.x 甚至没有`file()`.

*   您可以将打开的文件对象用作迭代器，当您对其进行迭代时，您会从输入中得到一行。这比调用`.readlines()`方法要好，后者将所有数据放入一个列表中；然后您使用数据一次并删除列表。由于输入文件很大，这意味着您可能会导致交换到虚拟内存，这总是很慢。此版本避免构建和删除巨型列表。

*   然后，在创建了一个巨大的输入行列表之后，您`range()`可以创建一个很大的整数列表。再次浪费时间和内存来构建一个列表，使用它一次，然后删除该列表。您可以通过使用来避免这种开销，`xrange()`但更好的方法是随时构建字典，作为从文件中读取行的同一循环的一部分。

*   使用您的特殊切片函数提取“地址”和“数据”字段可能会更好，但如果输入是常规的（始终遵循您示例的模式），您可以按照我在此处显示的内容进行操作。 `line.split()`在空白处分割行，给出四个字符串的列表。然后我们使用“解构赋值”将它解压成四个变量。由于我们只想保存其中两个值，因此我`_`为其他两个使用了变量名（一个下划线）。这不是一个真正的语言特性，但它是 Python 社区的一个习惯用法：当你有你不关心的数据时，你可以将它分配给`_`. 如果有任何数量的值不是 4，此行将引发异常，因此如果可能有空行或注释行或其他任何内容，您应该添加检查并处理错误（至少将该行包装在`try:`/ `except`）。

编辑：更正版本：

```
def __init__(self,filename):
    self.dict_by_address = {}

    with open(filename, 'r') as infile:
        for line in infile:
            key = extract_address(line) 
            value = extract_data(line)
            self.dict_by_address[key] = value 
```

# javascript - 使 Mootools Wall 插件中的图像可点击

> ID：10168350
> 
> 赞同：0
> 
> 时间：2012-04-16T03:22:45.347
> 
> 标签：javascript, jquery, jquery-plugins, mootools

我正在使用 Mootools “The Wall”插件创建图像墙。它的创建在 initWall() 上没有任何问题，但是如果我将图像包装在“a”标签中，则在拖动完成后，单击链接并将我传送到 href，即使我没有单击它. 这是我的代码

```
window.addEvent("domready", function() {
new Wall("wall", {
width: 260,
height: 180,
rangex: [-10,10],
rangey: [-10,10],
inertia: true,
callOnUpdate: function(items) {
  items.each(function(item) {
    var a=new Element("a",{
        href:"post.php",
        styles: {
            opacity: 0
            }
        });
    var img=new Element("img",{
        src:"img/260x180.gif"
        });
    img.inject(a);
    a.inject(item.node).fade(1);
  });
}
}).initWall();  
}); 
```

生成的 HTML 是这样的

```
<div class="tile" col="-1" row="-1" rel="-1x-1" style="position: absolute; left: -260px; top: -180px; width: 260px; height: 180px; ">
    <a href="post.php" style="visibility: visible; zoom: 1; opacity: 1; ">
        <img src="img/260x180.gif">
    </a>
</div> 
```

我怎样才能使项目本身作为最外层的类，所以项目看起来像

```
<a href="post.php" class="tile" col="-1" row="-1" rel="-1x-1" style="position: absolute; left: -260px; top: -180px; width: 260px; height: 180px; ">
    <img src="img/260x180.gif">
</a> 
```

**更新：回答** OK。我自己想通了。需要添加“点击”事件处理程序并使用 getMovement 函数。

```
a.addEvent("click",function(e){
if( wall.getMovement() ){
    e.stop();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:54:17.003

好的。我自己想通了。需要添加“点击”事件处理程序并使用 getMovement 函数。

```
a.addEvent("click",function(e){
if( wall.getMovement() ){
    e.stop();
    }
}); 
```

# scala - Scala HashMap 的不同表示

> ID：10168351
> 
> 赞同：0
> 
> 时间：2012-04-16T03:22:51.583
> 
> 标签：scala, hashmap

我一直在玩 Scala HashMap，我注意到 HashMap 有两种不同的表示形式。我想知道是否有人可以解释以下区别：

```
Map(123 -> 1) 
```

和

```
{123=1} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T03:24:45.007

你在哪里见过`{123=1}`？它不是 Scala 中的标准表示，但它*是*Java`toString`为其 Map 定义的方式。

```
val sm = Map(1->1, 2->2) // Map(1 -> 1, 2 -> 2)

val jm = new java.util.HashMap[Int,Int]()
jm.put(1,1)
jm.put(2,2)
jm   
// java.util.HashMap[Int,Int] = {1=1, 2=2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:14:22.087

`->`是一种创建元组的方法。它本身与地图没有直接关系。因此，例如`123 -> 1`返回一个 tuple `(123, 1)`。你可以在 REPL 中试试这个：

```
scala> 123 -> 1
res1: (Int, Int) = (123,1) 
```

`object Map`您可以通过向的方法提供元组来创建地图`apply`，这就是您执行此操作时所做的事情：

```
val m = Map(123 -> 1, 456 -> 2) 
```

是相同的

```
val m = Map.apply(123 -> 1, 456 -> 2) 
```

是相同的

```
val m = Map.apply((123, 1), (456, 2)) 
```

它创建了一个`Map`包含两个条目的条目，一个带有 key`123`和 value `1`，另一个带有 key`456`和 value `2`。

# sql - Yii 框架、登录、SQL 注入

> ID：10168354
> 
> 赞同：0
> 
> 时间：2012-04-16T03:23:20.343
> 
> 标签：sql, login, yii, code-injection

最近我收到一封电子邮件，声称他可以通过 sql 注入更改我的管理员密码。这是我的代码。它是使用 Yii php 框架开发的。任何人都可以看到缺陷吗？

```
 public function actionLogin()
{

    $model=new LoginForm;

    // if it is ajax validation request
    if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
    {
        echo CActiveForm::validate($model);
        Yii::app()->end();
    }

    // collect user input data
    if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        // validate user input and redirect to the previous page if valid
        if($model->validate() && $model->login())
            $this->redirect(Yii::app()->user->returnUrl);
    }
    // display the login form
    $this->render('login',array('model'=>$model));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:19:09.620

在创建 sql 查询的每个地方，都必须将所有外部变量与 sql 变量绑定，这将消除 sql 注入的可能性。

# r - 在哪些情况下，人们更喜欢从 reshape 熔化而不是 plyr 的 ddply？我正在尝试学习它们，它们看起来很相似

> ID：10168357
> 
> 赞同：3
> 
> 时间：2012-04-16T03:23:50.340
> 
> 标签：r, plyr, reshape

似乎 melt 会使用 id 列和堆叠的测量变量重塑您的数据框，之后演员可以让您执行聚合。ddply，来自 plyr 包似乎非常相似..你给它一个数据框，几个用于分组的列变量和一个聚合函数，然后你得到一个数据框......那么它们有什么不同和那里除了文档之外，任何用于学习这些工具的好资源/参考资料（尤其是对于重塑，有点难以理解）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:40:33.780

一个区别是 stats::reshape 具有处理“宽”数据的内置方法，而 reshape2 (cast/melt) 没有。看这个问题的例子：[Reshape in the middle](https://stackoverflow.com/questions/10161807/reshape-in-the-middle)

也就是说，stats::reshape 有令人沮丧的论点，并且只专注于一种类型的数据转换（尽管是常见的一种）。

plyr 倾向于代替 apply 函数，而 reshape2 倾向于代替 reshape。尽管功能重叠，但它们都适用于特定的任务。

Hadley Wickham 是 reshape2 和 plyr 软件包的作者，有一个关于整洁数据的不错的 pdf，值得一读。他在这里也有一篇关于 plyr 的文章：http: [//www.jstatsoft.org/v40/i01](http://www.jstatsoft.org/v40/i01)

# php - 在 JQPLOT 中显示 JSON 数组（初学者）

> ID：10168360
> 
> 赞同：0
> 
> 时间：2012-04-16T03:24:15.340
> 
> 标签：php, mysql, ajax, json, jqplot

我只是一个初学者，我想显示来自我的数据库（MySQL）的数据并使用 JQPLOT 将其显示在折线图中。我有一个 PHP 文件，它从数据库中获取数据并将其转换为 JSON 数组，据我所知，这是 JQPLOT 正确显示它所需要的。我遇到的问题是我以前从未使用过 AJAX。

JQPLOT 网站给了我这个代码：

```
$(document).ready(function(){

  var ajaxDataRenderer = function(url, plot, options) {
  var ret = null;
  $.ajax({

    async: false,
    url: url,
    dataType:"json",
    success: function(data) {
      ret = data;
    }
  });
  return ret;
 };

// The url for our json data
var jsonurl = "./jsondata.txt";

var plot2 = $.jqplot('chart2', jsonurl,{
  title: "AJAX JSON Data Renderer",
  dataRenderer: ajaxDataRenderer,
  dataRendererOptions: {
    unusedOptionalUrl: jsonurl
  }
});
}); 
```

我不明白这段代码的后半部分，但我想知道如何将我的 PHP 文件（包含 json 数组）合并到这段代码中并显示折线图。或者，如果有人有更简单的代码，我可以在其中实现 PHP 文件并且仍然能够显示折线图？我对此很陌生，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:51:29.417

第一部分加载数据，第二部分显示数据。

现在进一步解释一下，如果您下载了 jQPlot，您将看到一个名为 jSonData.txt 的文件，其中包含一个数组，在第二部分中，您使用该数组来显示图表。

你可以做不同的事情，比如在你的 PHP 代码中，你从数据库（MYSQL）加载数据并将其作为 JSON 发送回来，只需将检索到的这个 JSON 传递给 jQPlot

在这种情况下，上面的代码将如下所示：

```
var plot2 = $.jqplot('chart2', myJsonDataRetrievedFromDB,{ 
```

# javascript - 尝试使用 HTML 表单向 jQuery 插件添加文本

> ID：10168363
> 
> 赞同：0
> 
> 时间：2012-04-16T03:24:33.013
> 
> 标签：javascript, jquery, html

我使用一个名为 Textualizer 的 jQuery 插件，我想通过 HTML 表单向它添加数据。

继承人的代码：

```
<html>
 <head>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="textualizer.min.js"></script>
</head>

<style type="text/css">

#txtlzr{color:#585856; font-size:50px; width:1200px; height:100px;
margin-left:10%;
margin-top:80px;
font-family:"futura";
position: fixed;
}
</style>

<body>

<div id="txtlzr"></div>
<form action="#" method="post"/>

            <input class="kwote" type="text" maxlength="40" id="kwote" placeholder="Enter a something here."/>
            <input class="name"  type="text" maxlength="17" id="name" placeholder="Enter your name."/>
            <input class="post" type="submit" value="Post"/>

 </form>

 </body>

<script>

 var stuff1 = ['"random comment-person1', '"random comment"- person2'];  // list of blurbs

 var txt = $('#txtlzr');  // The container in which to render the list

 var options = {
 duration: 5,          // Time (ms) each blurb will remain on screen
rearrangeDuration: 5, // Time (ms) a character takes to reach its position
effect: 'random',        // Animation effect the characters use to appear
centered: true           // Centers the text relative to its container
 }

   txt.textualizer(stuff1); // textualize it!
   txt.textualizer('start'); // start

  </script>

 </html> 
```

这是完整的代码，只要您链接了 jquery 和 textualizer 文件或在包含 html 的目录中，它就可以工作。

文本化器：http: [//kiro.me/textualizer/javascript/textualizer.min.js](http://kiro.me/textualizer/javascript/textualizer.min.js)

jquery：[http ://code.jquery.com/jquery-1.7.2.min.js](http://code.jquery.com/jquery-1.7.2.min.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:54:24.810

以下 HTML 代码允许更新以注释`Array`命名的 JavaScript `COMMENTS_FOR_DISPLAY`，来自 <form> 的名称对。

下面的代码还允许在 a 中持久存储注释`cookie`（前提是用户允许）。

如果使用`jquery-cookie`可以从这里获得：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

玩得开心 ：）

```
<html>
  <head>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="https://raw.github.com/carhartl/jquery-cookie/master/jquery.cookie.js"></script>
    <script type="text/javascript"
      src="http://kiro.me/textualizer/javascript/textualizer.js"></script>
    <style type="text/css">
    #txtlzr {
      color:#585856; font-size:50px; width:1200px; height:100px;
      margin-left:10%; margin-top:20px; font-family:"futura";
      position: fixed;
    }
    </style>
  </head>
  <body>
    <form action="#" method="post"/>
      <fieldset>
       <label for="kwote">Comment:</label>
       <input class="kwote" type="text" maxlength="40" id="kwote"
         placeholder="Enter a something here."/>
       <lable for="name">Name:</label>
       <input class="name" type="text" maxlength="17" id="name"
         placeholder="Enter your name."/>
       <input class="post" type="button" value="Add comment"
         onclick="add_comment();" />
     </fieldset>
   </form>

    <div id="bodMain"><div id="txtlzr">foo</div></div>

    <script language="javascript">
    // Adds a new comment, name pair to the Array feeding textualizer.
    function add_comment() {
      // Retrieve values and add them to Array.
      var new_comment = $('#kwote').val();
      var new_name = $('#name').val();
      var new_value = new_comment + ': ' + new_name;
      COMMENTS_FOR_DISPLAY.push(new_value);

      // Update cookie with current data in COMMENTS_FOR_DISPLAY.
      $.cookie("COMMENTS_FOR_DISPLAY", COMMENTS_FOR_DISPLAY.join(";"));

      // Reset <input> fields.
      $('#kwote').val('');
      $('#name').val('');
    }

    $(document).ready(function() {
      var txt = $('#txtlzr');  // The container in which to render the list

      var options = {
        duration: 5,          // Time (ms) each blurb will remain on screen
        rearrangeDuration: 5, // Time a character takes to reach its position
        effect: 'random',     // Animation effect the characters use to appear
        centered: true        // Centers the text relative to its container
      }

      var _cookie = $.cookie("COMMENTS_FOR_DISPLAY");
      if (_cookie != null) {
        // Load data from cookie.
        var COMMENTS_FOR_DISPLAY = _cookie.split(";");
      }
      else {
        // If no cookie exists, fallback to default value...
        var COMMENTS_FOR_DISPLAY = new Array('Have fun again: Chris');
      }

      txt.textualizer(COMMENTS_FOR_DISPLAY); // textualize it!
      txt.textualizer('start'); // start
    });
    </script>
  </body>
</html> 
```

# php - 将语句分配给下拉列表 PHP

> ID：10168374
> 
> 赞同：0
> 
> 时间：2012-04-16T03:26:00.267
> 
> 标签：php, mysql

我之前问过这个问题，但我认为我让它太复杂了，如果选择了列表中的值，我想分配一个查询。

```
<form id="filter" name="filter" method="post" action="">
<select>
  <option value="petrol">Petrol</option>
  <option value="diesel">Diesel</option>
</select>
<p><input name="filter" type="button" value="Filter" /></p>
</form> 
```

![下拉式菜单](../Images/1cdc82211fa16baacfd465fa0ce3e2f9.png)

我想要实现的是如果用户选择汽油运行以下查询

```
$query = mysql_query("SELECT fuel_type from car WHERE fuel_type = 'petrol'"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:59:16.743

```
<form id="filter" name="filter" method="post" action="">
<select id="college" name="fuel" onchange="changeValue();">
  <option value="petrol">Petrol</option>
  <option value="diesel">Diesel</option>
</select>
<p><input name="filter" type="button" value="Filter" /></p>
</form> 
```

如果您想在表单提交中发布值，请像这样使用

```
$ctext = $_POST['fuel']; 
$list = mysql_query("SELECT fuel_type from car WHERE fuel_type ='$ctext'");
$row = mysql_fetch_array($list);
//process $row 
```

如果不想提交表单，可以在onchange事件中使用jquery... js代码

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
function changeValue() {
    var ctext = $("#college option:selected").val();
    $.ajax({ url: "yourfile.php", 
    data: {"ctext":ctext},
    type: 'post',
    success: function(output) {
        //display output here
      }
    });
} 
```

你的文件.php

```
<?php
//connect to db
$ctext = $_POST['ctext'];
$list = mysql_query("SELECT fuel_type from car WHERE fuel_type ='$ctext'");
$row = mysql_fetch_array($list);
echo $row['fuel_type'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T06:03:34.720

虽然我也建议使用 AJAX 方法，但我只是想明确一点，您不必使用 AJAX 来完成此操作。

如果您的过滤器选项不是太复杂或太多，那么您只需在加载时为任何级别的过滤器树拉取所有可用选项并最初隐藏它们。然后，当用户深入到每个部分时，您会相应地向他们显示下一个部分（通过 javscript）。最后，您可以通过 GET 或 POST 提交包含所有选定表单字段的常规表单。

这也可以通过减少对服务器的调用来有效地节省带宽:)

但是，如果您的选择树变得太复杂，最好只在用户交互时运行 AJAX 请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:27:08.363

为您的选择标签命名：

```
<select name="fuel">
  <option value="petrol">Petrol</option>
  <option value="diesel">Diesel</option>
</select> 
```

然后在你的 PHP 中你可以做一些简单的事情，比如：

```
<?php
if(isset($_POST['cmdFilter']))
{
  echo "You selected the fuel type: " . $_POST['fuel'];
}
?> 
```

您还可以将选择设置为有一个 id，并使用 JQuery 发送一个 ajax 请求，通过选择它来传递它的值`$("#myIdforSelect").val()`

附言

一定要清理你的输入；）

# python - 使用选定的对象集合更新 Django 模型

> ID：10168381
> 
> 赞同：0
> 
> 时间：2012-04-16T03:27:37.203
> 
> 标签：python, django, model-view-controller, web-applications, model

我正在学习`Django`，我参考`djangobook.com`。

我有一个这样的模型：

```
class Publisher(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=50)
    city = models.CharField(max_length=60)
    state_province = models.CharField(max_length=30)
    country = models.CharField(max_length=50)
    website = models.URLField()

    def __unicode__(self):
        return self.name 
```

我已经填充了一些数据（如演示中所述）并尝试更新记录的特定字段的值（如解释），这非常好：

```
>>> publisher_list = Publisher.objects.all()
>>> p = publisher_list[0]
>>> p.name = u'Apress'
>>> p.save() 
```

但是当我尝试下面的（我假设它等同于上面的）时，它不起作用。该名称未在数据库中更新。我在这里做错了什么？

```
>>> publisher_list = Publisher.objects.all()
>>> publisher_list[0].name = 'Apress'
>>> publisher_list[0].save() 
```

参考：`http://djangobook.com/en/2.0/chapter05/`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:29:54.117

您的索引正在多次从数据库中检索模型。在变异和保存之前将模型绑定到名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:19:21.447

根据[`QuerySet.__getitem__()`](https://github.com/django/django/blob/master/django/db/models/query.py#L166)，按项目检索，例如按`qs[0]`，不会缓存，每次访问都会命中数据库，**除非**查询集已被评估并因此缓存已被填充：

```
>>> qs = User.objects.all()[:10]
>>> qs[0] is qs[0] # Similar with your issue, you modified the attribute of the first and tried to save the latter.
False
>>> len(qs) # evaluate and fill cache
10
>>> qs[0] is qs[0]
True 
```

所以你可以

*   按照伊格纳西奥的回答，或者只是`p = Publisher.objects.all()[0]`
*   或者，在索引之前评估查询集。这是否更容易取决于您的代码逻辑。

# html - 创建无需重新加载即可更新的页面

> ID：10168383
> 
> 赞同：1
> 
> 时间：2012-04-16T03:28:09.153
> 
> 标签：html, xml, ajax, dom

我正在讨论我应该学习什么来实现这一目标。主要是如果我从数据库中获取一堆信息以加载到页面上，那么操作页面而不需要重新加载的最佳方法是什么。使用 XML 之类的东西是最好的，还是我应该使用其他东西。我知道其中很多都使用 HTML Dom 和 XML Dom，但我不想开始学习一个我不需要的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T03:30:49.640

您正在寻找的技术名称是 AJAX，它代表异步 Javascript 和 XML（尽管现在大多数 AJAX 使用 JSON [JavaScript Object Notation] 而不是 XML）。

AJAX 需要 JS 和 DOM 的工作知识。[将 jQuery](http://jquery.com)视为一个使 AJAX 和 DOM 操作变得容易的库。

**它如何组合在一起：**

Javascript 向您的服务器发出异步请求（不刷新页面），返回所需的数据。当请求完成时，JS 将该数据插入 DOM

使用 jQuery 简化了这个过程：

```
$('#data-container-id').load("my-data.html",{get:"data"}) 
```

将获取“my-data.html?get=data”并将返回的 html 放入 id 为“data-container-id”的 div

# drupal - Drupal 7 上下文链接不适用于新用户组

> ID：10168387
> 
> 赞同：0
> 
> 时间：2012-04-16T03:28:24.630
> 
> 标签：drupal, drupal-7

我安装了一个 drupal 7，我希望他们能够编辑主页上的所有块区域。齿轮没有出现在任何块上。

我在用户权限中检查了“使用上下文链接”，但这仍然不起作用。

很抱歉再次发布这个问题，但我没有得到答案。

问候，

雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:15:50.860

在这种情况下，您需要授予他们编辑块的必要权限，以便他们可以编辑块的内容，然后他们将能够使用上下文链接。

# jquery - Highcharts - 三个系列使用左 Y 轴，第四个系列使用右 Y 轴

> ID：10168388
> 
> 赞同：1
> 
> 时间：2012-04-16T03:28:36.927
> 
> 标签：jquery, highcharts, series

我有一个图表，其中使用左侧 Y 轴显示三个体积系列（油、气和水）。我需要使用沿右轴的不同比例在此图表上显示另一个系列的井数。代码如下所示：

```
 $(document).ready(function() {
    $("#tabs").tabs();
    new Highcharts.Chart({
      chart: {
        renderTo: 'volume_chart',
        type: 'line'
      },
      title: {
        text: "#{title_text}"
      },
      xAxis: {
        title: { text: 'Time Period' },
        tickInterval: #{tick_interval},
        categories: #{x_array},
        showLastLabel: true,
        labels: {
          rotation: -45,
          align: 'right',
          style: {
              font: 'normal 13px Verdana, sans-serif'
          }
        }        
      },
      yAxis: {
        title: { text: 'Volume' },
        type: 'logarithmic'
      },
      tooltip: {
        headerFormat: '<b>{series.name}</b><br />',
        pointFormat: 'Period = {point.x}, Volume = {point.y}'
      },
      legend: {
          layout: 'vertical',
          align: 'right',
          verticalAlign: 'top',
          x: -20,
          y: 100,
          borderWidth: 0
      },
      plotOptions: {
          series: {
              marker: {
                  enabled: false,
                  states: {
                      hover: {
                          enabled: true
                      }
                  }
              }
          }
      },
      series: [{
        name: 'Oil, bbl',
        color: 'green',
        data: #{oil_vol_array},
        pointStart: 1
      },{
        name: "Gas, Mcf",
        color: 'red',
        data: #{gas_vol_array},
        pointStart: 1
      },{
        name: 'Water, bbl',
        color: 'blue',
        data: #{water_vol_array},
        pointStart: 1
      }]
    });
  }); 
```

分别参见石油、天然气和水量的三个系列。我需要输入另一个系列的井数，它使用右侧的 Y 轴来显示井数。这也需要是对数类型。

我还想抑制 x 轴上的最后一个 tickValue（请参见附图：

![图表显示](../Images/f0efe9e05164ca134f2c038248e739e6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:00:35.350

要在右侧 Y 轴上显示孔的数量，您需要设置第二个 Y 轴。您需要将 yAxis 更改为数组，如下所示：

```
yAxis: [{
    title: { text: 'Volume' },
    type: 'logarithmic'
},{
    title: { text: 'Count' },
    type: 'logarithmic'
}] 
```

然后，您需要为每个系列指定您使用的轴......否则它将默认为第一个系列。0 是音量轴，1 是计数轴

```
series: [{
    name: 'Oil, bbl',
    color: 'green',
    data: #{oil_vol_array},
    pointStart: 1
},{
    name: "Gas, Mcf",
    color: 'red',
    data: #{gas_vol_array},
    pointStart: 1
},{
    name: 'Water, bbl',
    color: 'blue',
    data: #{water_vol_array},
    pointStart: 1
},{
    name: 'Wells',
    color: 'yellow',
    data: #{wells_vol_array},
    pointStart: 1,
    yAxis: 1
}] 
```

[多轴](http://www.highcharts.com/demo/combo-multi-axes)的Highcharts 演示有更多可能有用的选项/信息。

您可以很容易地抑制最终类别的显示，但不确定如何抑制实际的刻度。可能最简单的方法是定义一个您不想显示 tickValue 的类别列表，然后将格式化程序添加到 xAxis 标签选项：

```
var lastCategory = 'Jan 2040';

labels: {
    rotation: -45,
    align: 'right',
    style: {
        font: 'normal 13px Verdana, sans-serif'
    },
    formatter: function() 
    {
        return (this.value != lastCategory) ? this.value : '';
    }
} 
```

**编辑：添加工具提示信息**

您可以在这里做几件事，您可以简单地将工具提示选项更改为（根据此[Highcharts JSFiddle](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/shared-true-mixed-types/)）：

```
tooltip: {
    shared: true
}, 
```

或者您可以更花哨并指定一个格式化程序，如[其他 Highcharts JSFiddle](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/tooltip/formatter-shared/)中所示。

我强烈推荐[Highcharts Reference](http://www.highcharts.com/ref/)，它的布局很好，有很多很好的演示

# php - 蜘蛛和刮板架构

> ID：10168389
> 
> 赞同：2
> 
> 时间：2012-04-16T03:28:47.207
> 
> 标签：php, architecture, parallel-processing, web-crawler, web-scraping

当我遇到这个设计问题时，我一直在用 php 构建一个刮板和蜘蛛。我想知道在制作一个分离爬行和抓取任务的系统（就像大多数专业系统似乎做的那样）和一个在蜘蛛爬行时抓取的系统之间的权衡。我唯一能想到的是，通过将其拆分并使用队列，您可以通过多个只需要询问队列要抓取的下一页的抓取器来更好地并行化任务。谁能想到其他权衡并向我解释这些通常分为两个程序的主要原因？

注意：两种情况下的爬取顺序是一样的，唯一的区别是页面被拉取的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T06:15:34.147

爬虫检索页面，蜘蛛处理它们。如果您将这些任务分开，您可以更改一项任务的实现而不更改另一项。这就是他们分开的原因：这只是好的软件设计。

您给出的示例是一个很好的示例：如果您将检索与单个类/模块/程序/函数/任何内容中的处理结合起来，那么检索页面方式的任何更改（例如，并行检索、通过代理检索等）都需要重写整个程序。

这是另一个问题：如果您想处理不同类型的数据（例如 rss 提要而不是 html 页面），您需要从头开始编写整个抓取工具，并且您不能重用您在页面检索方面所做的任何工作。

# ruby-on-rails - 使用 Rails.cache.stats 不输出 Memcache 统计信息... Rails/Heroku

> ID：10168399
> 
> 赞同：2
> 
> 时间：2012-04-16T03:30:10.820
> 
> 标签：ruby-on-rails, heroku, memcached

晚上好，

我正在尝试在 Heroku 上对我的 Rails 应用程序的缓存进行一些测试，但 Memcachier 似乎表现不佳......

我可以从缓存中提取值没问题，但统计数据并没有给我任何爱......

```
=> "42:Quotes:2012-04-16"
irb(main):016:0> Rails.cache.exist?(str)
=> true
irb(main):017:0> Rails.cache.read(str)
=> {"VCE.TO"=>24.76, "XIU.TO"=>17.19, "EWC"=>27.44}
irb(main):018:0> Rails.cache.stats
=> {"mc1.ec2.memcachier.com:11211"=>{}} 
```

如果我可以从缓存中提取信息，统计信息中是否应该没有一些数据？我的 gemfile 中有以下内容：

```
gem 'dalli'
gem 'memcachier' 
```

以及 production.rb 中的以下内容：

```
config.action_controller.perform_caching = true
config.cache_store = :dalli_store 
```

任何帮助将不胜感激 - 我可以根据需要发布更多详细信息！

# iphone - 无法弄清楚如何发布在 iPhone 上生成的公钥

> ID：10168401
> 
> 赞同：6
> 
> 时间：2012-04-16T03:30:49.013
> 
> 标签：iphone, python, objective-c, security, rsa

我正在使用`commoncrypto`iPhone 上的库来创建一对 RSA 密钥，并且我正在尝试将公钥发送到服务器（Python），以便我可以使用它来验证从手机发送的签名。

我正在使用 CommonCrypto 示例中的确切代码，使用如下所示的方法`getPublicKeyBits()`：

`- (NSData *)getPublicKeyBits { OSStatus sanityCheck = noErr; NSData* publicKeyBits = nil; NSData* publicTag = [[NSData alloc] initWithBytes:publicKeyIdentifier 长度:sizeof(publicKeyIdentifier)]; CFDataRef cfresult = NULL;

```
NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

// Set the public key query dictionary.
[queryPublicKey setObject:(__bridge id)kSecClassKey forKey:(__bridge id)kSecClass];
[queryPublicKey setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];
[queryPublicKey setObject:(__bridge id)kSecAttrKeyTypeRSA forKey:(__bridge id)kSecAttrKeyType];
[queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnData];

// Get the key bits.
sanityCheck = SecItemCopyMatching((__bridge CFDictionaryRef)queryPublicKey, (CFTypeRef*)&cfresult); 

if (sanityCheck != noErr)
{
    publicKeyBits = nil;
}
else 
{
    publicKeyBits = (__bridge_transfer NSData *)cfresult;
}

return publicKeyBits; 
```

}`

问题是我不知道如何确切地存储密钥或如何传递它。我正在使用它`getPublicKeyBits()`来获取它的`NSData`结构，并且我已经导入了一个库来将其编码为`base64`. 我得到了一个密钥（SHA1，我想转移到 SHA256，但这对于让它工作是次要的）并且该`base64`版本看起来像我在这里找到的其他密钥以及其他人解决 RSA 问题的密钥。

我一直在尝试`M2Crypto`在 Python 中使用该库，当我尝试验证时出现错误`"RSA Error: No Start Line"`。这是我用来接收公钥的代码：

```
pubKey = request.form['publickey']

uid = uuid4().hex
while not unique(uid, User):
    uid = uuid.uuid4().hex
user = User(uid, email, secret, pubKey) 
```

我用来检查签名的代码：

```
def validate(sessionKey, sig, pem):
    bio = BIO.MemoryBuffer(pem.encode('ascii'))
    rsa = RSA.load_pub_key_bio(bio)
    pubkey = EVP.PKey()
    pubkey.assign_rsa(rsa)

    pubkey.reset_context(md='sha1')
    pubkey.verify_init()
    pubkey.verify_update(sessionKey)

    return pubkey.verify_final(sig) 
```

我真的很困惑我做错了什么，但我觉得我已经接近了。如果我的整个方法不是你想要的方式，我很想听听任何其他方式在手机上生成 RSA 密钥，将公钥发布到服务器，然后在该服务器上验证来自手机的签名.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:15:48.463

您可以在 Apple CryptoExercise 代码中使用来自 SecKeyWrapper的*getPublicKeyBits方法*

[https://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_h.html](https://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_h.html)

这将为您提供 DER 编码的二进制数据。然后使用以下方法将其加载到 Python 中的 M2Crypto 中：（基本上，只需 base64 并调用一种方法。）

[https://stackoverflow.com/a/5765576/584616](https://stackoverflow.com/a/5765576/584616)

我有这个*getPublicKeyBits*方法的 ARC 启用版本，但我还没有开始发布它。

**更新**- 在重新阅读您的问题时，答案实际上就在这里：

[如何在 iPhone/Objective C 上找出 RSA 公钥的模数和指数](https://stackoverflow.com/questions/3840005/how-to-find-out-the-modulus-and-exponent-of-rsa-public-key-on-iphone-objective-c)

您可以使用它来获取模数和指数作为 NSData，您应该能够轻松地将其转换为 base64 或您选择的表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:00:49.287

M2Crypto 的底层实现是 OpenSSL。OpenSSL 不会在您导出纯公钥时导入它，但前提是它“嵌入”在可能的自签名证书中。查看如何使用 Common Crypto 或 Security 框架创建自签名证书，嵌入您的公钥并使用您的私钥对其进行签名，提取其数据并将其发送到您的服务器：它应该可以工作。

另请参见[openssl_pkey_get_public 未打开公钥，“无起始行”错误](https://stackoverflow.com/questions/3617293/openssl-pkey-get-public-not-open-public-key-no-start-line-error)（第二个答案）

# windows-ce - 如何在 .NET Compact Framework 3.5 中检索 Windows CE 设备的 OEM 版本？

> ID：10168404
> 
> 赞同：1
> 
> 时间：2012-04-16T03:31:25.253
> 
> 标签：windows-ce, .net-cf-3.5, smart-device-framework

我正在使用 .NET Compact Framework 3.5 为运行 Windows CE 6.0 的手持终端开发应用程序。

是否有通用方法来检索 OEM 版本（即“系统信息”控制面板小程序中看到的“OEM 版本”字符串），使用 .NET CF 类库或智能设备框架，而不管设备供应商如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T02:47:39.243

没有“通用”的方式，因为没有任何内容说 OEM 必须提供一个版本，或者如果他们提供了，也没有任何内容说明他们必须如何做。有一些提供的接口，鼓励 OEM 使用（[SystemParametersInfo](http://msdn.microsoft.com/en-us/library/ee499131.aspx)和 SPI_GETOEMINFO （这是 luskan 的建议返回的）或 SPI_GETPLATFORMVERSION （这可能也在 SDF 的某个地方）将是我开始调查的地方，但是预先警告说，仅仅因为它可以在一个设备上工作，并不意味着它可以在另一个设备上工作。在你的代码中做大量的验证和回退。

# java - 构建 dmg 文件时出现 BUILD FAILED 错误

> ID：10168405
> 
> 赞同：0
> 
> 时间：2012-04-16T03:31:26.347
> 
> 标签：java, macos, deployment, ant, dmg

我正在使用 ant 工具构建 dmg 文件，但在构建时出现错误。

build.xml 的提取：

```
 ...
            <copy todir="${mac.build.dir}/.background">
                    <fileset file="${basedir}/build/installer/images/mac/dmgBackground.png"/>
            </copy>

            <symlink link="${mac.build.dir}/Applications" overwrite="true" resource="/Applications" />
            <echo message="Create tmp.dmg"/>
            <exec executable="hdiutil" failonerror="true">
                    <arg line="create -srcfolder '${mac.build.dir}' -volname '${mac.volname}' -fs HFS+ -fsargs '-c c=64,a=16,e=16' -format UDRW '${target}/tmp.dmg'"/>
            </exec>
            .... 
```

错误：

```
**BUILD FAILED
D:\DevProjects\spark\build\build.xml:761: Could not launch ln: java.io.IOException: Cannot run program "ln": CreateProcess error=2, The system cannot find the file specified** 
```

我使用脚本来调用 dmg 文件创建是`ant installer.mac`

我是在调用正确的目标还是错误的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:07:17.733

Ant 的`symlink`任务不适用于 Windows 变体。

请参阅 SO：[Windows 上的 Ant 符号链接任务 (NTFS)](https://stackoverflow.com/questions/6962089/ant-symlink-task-on-windows-ntfs)

来自[Ant 文档](http://ant.apache.org/manual/Tasks/symlink.html)：

> *在基于 Unix 的平台*上管理符号链接。可用于创建单个链接、删除链接、从属性文件创建多个链接，或创建描述指定目录中链接的属性文件。默认情况下不会覆盖现有链接。

... 和 ...

> 限制：因为 Java 没有直接支持处理符号链接，所以这个任务通过比较规范路径和绝对路径来判断它们。在非 Unix 系统上，这可能会导致误报。**此外，命令 ln -s 在命令行上不是有效命令的任何操作系统将无法使用 action="single" 或 action="recreate"。**Action="record" 和 action=delete 应该仍然有效。最后，Java 中不支持符号链接意味着所有链接都被记录为指向规范资源名称的链接。因此链接：link --> subdir/dir/../foo.bar 将被记录为 link=subdir/foo.bar 并恢复为链接 --> subdir/foo.bar

* * *

至于如何修复它，我现在已经超出了我的深度，因为我以前从未制作过 DMG。但是，符号链接是指向 Applications 文件夹的链接，并且*可能*只是在那里，以便用户有一个方便的链接来将应用程序拖到以便复制到 Applications 中。因此，该链接可能不是绝对必要的。如果有人可以对此有所了解，请这样做。

# mysql - 使用触发器停止插入或更新

> ID：10168408
> 
> 赞同：19
> 
> 时间：2012-04-16T03:31:36.900
> 
> 标签：mysql, triggers

由于 MySQL 忽略了检查约束，如何使用触发器来阻止插入或更新的发生？

例如：

表foo有一个属性叫做agent，agent属性只能是1、2、3、4、5。

```
delimiter $$
create trigger agency_check
before insert on foo
for each row
begin
if (new.agency < 1 or new.agency > 5) then

#Do nothing?

end if;
end
$$
delimiter ; 
```

或者有没有更好的方法在 MySQL 中进行检查约束？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-16T05:09:09.350

尝试信号语法 - [https://dev.mysql.com/doc/refman/5.5/en/signal.html](https://dev.mysql.com/doc/refman/5.5/en/signal.html)

```
create trigger agency_check
before insert on foo
for each row
begin
  if (new.agency < 1 or new.agency >5) then
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'your error message';
  end if 
end 
```

**编辑**

根据 Bill Karwin 下面的热门评论进行了更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T05:31:42.587

如果您的 MySQL 版本早于 5.5，请尝试将表的非空字段设置为 NULL。这是一个 hack，但它确实阻止了更新或插入的完成。

Naveen 建议的 SIGNAL 命令看起来很棒，我期待在我们升级后使用它。

# paypal - PayPal 即时付款通知 (IPN) 问题：PayPal 发送 VERIFIED 响应，但在 IPN 历史记录中有 FAILED 状态。404 错误

> ID：10168409
> 
> 赞同：1
> 
> 时间：2012-04-16T03:31:38.577
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

PayPal 正在向我的 IPN 侦听器发送 VERIFIED 消息，但我的 IPN 历史记录显示 FAILED 状态。IPN 历史记录也显示 404 错误。我为我的听众使用的代码可以在这里找到：[https](https://cms.paypal.com/cms_content/US/en_US/files/developer/IPN_PHP_41.txt) ://cms.paypal.com/cms_content/US/en_US/files/developer/IPN_PHP_41.txt 。我正在用沙盒测试这个。我怎样才能收到来自 Paypal 的已验证响应，但 IPN 历史记录显示失败的状态并出现 404 错误？由于 IPN 历史状态失败，PayPal 不应该发送无效响应吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:07:44.117

已验证与交易在您的 ipn 历史记录中的显示方式无关。您对原始 ipn 帖子的响应方式决定了您的 ipn 历史记录中显示的内容。

如果您的 ipn 历史记录显示它正在接收 404 响应，那么您需要检查您的 ipn 脚本并停止发送 404 响应。

如果是任何其他错误，因为您使用的是 PayPal 的脚本，我敢打赌您没有更改环境变量/URL 以匹配您的环境。但是，使用 404，您是在告诉客户（在这种情况下为 paypal）他们想要的页面不存在，即使您仍在读取数据

# php - 为什么这个 get 参数不等于字符串？

> ID：10168410
> 
> 赞同：0
> 
> 时间：2012-04-16T03:32:01.510
> 
> 标签：php

给定一个网址：

scrape.php?u=http%3A%2F%2Fwww.coldwellbanker.com%2Fagent%3 ...等

```
$url = $_GET['u'];
$url2 = 'http://www.coldwellbanker.com/agent?action=detail&agentId=121759&mode=detail';
var_dump($url==$url2);

//This prints out bool(false) 
```

为什么 $_GET 参数与单引号中的等效字符串不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:55:16.237

这是我所做的：

给定一个 URL：

```
http://localhost/gettest.php?u=http%3A%2F%2Fgoogle.com%3Ftest%3Dtest 
```

这个脚本：

```
$url = $_GET['u'];
var_dump($url);
$url2 = "http://google.com?test=test&test1=test1";
var_dump($url2);
var_dump($url == $url2); 
```

输出是：

```
string 'http://google.com?test=test' (length=27)
string 'http://google.com?test=test&test1=test1' (length=39) 
boolean false 
```

这使我相信与符号被 $_GET 评估为一个单独的参数。也许您应该对您的 URL 进行 base64 编码以确保它能够正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:35:41.273

问题是因为您传递它的 URL 认为 & 实际上是原始脚本的参数：

所以如果你这样做：

```
<?php echo $_GET['u'];?> 
```

您将返回：[http ://www.coldwellbanker.com/agent?action=detail49](http://www.coldwellbanker.com/agent?action=detail49)

```
<?php
print_r($_GET);
?>

Array ( [u] => http://www.coldwellbanker.com/agent?action=detail [agentId] => 121759 [mode] => detail ) 
```

解决它的一种方法可能是执行以下操作：

```
<?php
$url = end(explode('u=', $_SERVER['argv'][0]));
$url2 = 'http://www.coldwellbanker.com/agent?action=detail&agentId=121759&mode=detail';
echo var_dump( $url==$url2 );
?> 
```

返回：

```
bool(true) 
```

# java - 通用 XML 实用程序——在 java jdom 中

> ID：10168416
> 
> 赞同：0
> 
> 时间：2012-04-16T03:32:42.660
> 
> 标签：java, xml, jdom, xml-generation

请建议我如何在java中执行以下实用程序，

1.  想要创建通用 java 类以使用 JDOM 生成 XML。
2.  类有足够的能力在运行时生成任何 xml 结构，这取决于参数传递——如何？
3.  例如，在我的模块中，我需要创建一个具有 3 个不同子节点的 XML，即

    ```
    <Child>

      <A>  This is normal text   </A>

      <B>  This is normal text  </B>

      <C>  This is normal text  </C>

    </Child> 
    ```

4.  但是在另一个模块中，我们需要另一个 XML 文件，其中包含具有某些属性的 10 个子项。

5.  所以我们决定使用通用 XML 实用程序，它在运行时在特定文件夹中生成 XML 文件。
6.  实用程序将帮助我们避免应用程序中的冗余代码并且易于管理......

请帮助你的朋友...

感谢角斗士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:29:35.920

您可以像这样通过 XStream 进行操作：

```
public static String getXMLFromObject(Object toBeConverted, String classNameAlias, Map<String, String> fieldAlias,
            List<String> fieldsToBeOmitted) {
        StringBuilder objectAsXML = new StringBuilder();
        if(toBeConverted != null){
            XStream xStream = new XStream(new DomDriver());
            if(classNameAlias != null && classNameAlias != "" && classNameAlias.trim().length() > 0) {
                xStream.alias(classNameAlias, toBeConverted.getClass());
            }
            if(fieldAlias != null && !fieldAlias.isEmpty()){
                for (Entry<String, String> entry : fieldAlias.entrySet()) {
                    xStream.aliasField(entry.getKey(), toBeConverted.getClass(), entry.getValue());
                }
            }
            if(fieldsToBeOmitted != null && fieldsToBeOmitted.size() > 0){
                for (String fieldToBeOmitted : fieldsToBeOmitted) {
                    xStream.omitField(toBeConverted.getClass(), fieldToBeOmitted);
                }
            }
            objectAsXML.append(xStream.toXML(toBeConverted));
        }
        return objectAsXML.toString();
    } 
```

如果您可以控制要转换为 XML 的类，那么我建议您有一个类似`XMLConvertable`结构的接口

```
public interface XMLConvertable {
    public String getClassAlias();

    public List<String> getFieldToBeOmitted();

    public Map<String, String> getFieldAliases();
} 
```

在这种情况下，您不需要在上述方法中发送最后三个参数，只需从 获取它，`objectToBeConverted`而且它更有意义，因为系统中的每个对象都可以声明自己是否可以转换为 XML。

# android - 除非其中有链接，否则 TextView 不会垂直滚动

> ID：10168429
> 
> 赞同：1
> 
> 时间：2012-04-16T03:35:09.383
> 
> 标签：android, android-layout

我在 ScrollView 内的 TextView 中启用了垂直滚动（为了在水平滚动时将其他内容留在顶部） - 但是垂直滚动仅在 TextView 的数据中有链接时才有效。如果没有 url/email/etc，则垂直滚动不起作用。

当它起作用时，垂直滚动条也会报告错误的滚动位置——在视图中滚动 100% 后，它将达到屏幕的最大 5%。

这是有问题的 xml 布局，它给出了这种奇怪的行为，而**newsreader_message**是我希望能够正确滚动的那个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/newsreader_subjectdate"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:marqueeRepeatLimit="1"
    android:scrollHorizontally="true"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/newsreader_fromto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:marqueeRepeatLimit="1"
    android:scrollHorizontally="true"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceSmall" />

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/newsreader_message"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:autoLink="web|email"
        android:contentDescription="News post content"
        android:keepScreenOn="true"
        android:paddingRight="10dp"
        android:paddingTop="6dp"
        android:scrollHorizontally="true"
        android:scrollbars="horizontal|vertical"
        android:text=""
        android:textSize="11.5sp"
        android:typeface="monospace" />
</ScrollView> 
```

作为一个额外的细节，当垂直滚动被破坏时，选取框也不会滚动（并且选取框需要滚动）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:39:44.360

将 textview 的 layout_width 更改为“fill_parent”并尝试一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:58:58.210

ScrollViews 布局应该是 wrap_content 。另一种选择是让滚动视图进行滚动，文本视图填充空间，如下所示

```
<ScrollView     android:id="@+id/scrollView1"    
 android:layout_width="wrap_content"    
 android:layout_height="wrap_content" 
android:scrollHorizontally="true"         
android:scrollbars="horizontal|vertical" 
android:fillViewport="true" >      
    <TextView         
android:id="@+id/newsreader_message"         
android:layout_width=""fill_parent"        
 android:layout_height="fill_parent"         
android:autoLink="web|email"         
android:contentDesciption="News post content"        
 android:keepScreenOn="true"         
android:paddingRight="10dp"         
android:paddingTop="6dp"                
  android:text=""        
 android:textSize="11.5sp"        
 android:typeface="monospace"  
android:layout_weight="1.0" /> 
</ScrollView> 
```

# java - Java Inventory - ADT 类和文件输入问题

> ID：10168430
> 
> 赞同：0
> 
> 时间：2012-04-16T03:35:16.700
> 
> 标签：java, filereader

我遇到了这个程序的障碍。

我有一个程序涉及创建一个涉及凯迪拉克“库存”的程序，除此之外，我找不到我的问题的答案。

我只是不知道该怎么办。我将提供方向，然后发布我到目前为止的语法。

这是我必须做的：

*   一个虚构的凯迪拉克经销商的库存，并允许搜索库存以显示满足特定条件的汽车列表。

*   创建一个名为 Cadillac 的 ADT 类，其中包含四个实例数据字段：型号名称、库存编号和颜色的字符串，以及价格的整数。该类包含一个构造函数，它接收所有四个实例字段的值，并将参数值分配给实例变量。该类还为实例数据的每个字段包含一个简单的访问器方法和修改器方法。

*   当程序运行时，它从文件“inventory.dat”中加载库存。

*   以下是文件内容示例： DTS 11210 Glacier White 42706 Escalade 66502 Crimson Pearl 65547 XLR 58362 Radiant Bronze 78840 SRX 16218 Radiant Bronze 44522
*   每行（每条记录）包含 4 个数据字段：型号名称字符串、5 位库存编号和颜色，以及价格整数。字段之间的分隔符是制表符（“\t”）。

*   在 main() 中，创建一个 Cadillac 对象数组，从文件中读取一条记录，将其拆分为 4 个字段，创建一个 Cadillac 对象并将其添加到数组中。

*   库存文件发生变化，无论文件中有多少记录，您的程序都需要工作。您可以保证文件中的记录永远不会超过 100 条（它们只能容纳 100 辆汽车），并且每条记录将包含 4 个有效数据字段。
*   用户可以通过两种方式搜索库存：按型号名称和按价格。加载库存后，询问用户他们想要进行的搜索。如果他们指示“按型号名称”，请让他们输入要搜索的名称。有效的型号名称为：DTS、Escalade、ESV、EXT、SRX、STS 和 XLR。搜索具有该名称的所有汽车的库存，并在控制台屏幕上显示结果表。

-当用户表示要按价格搜索时，让他们输入要搜索的价格，然后执行搜索，显示所有价格在搜索价格3000美元以内的汽车。- 程序应该循环执行用户想要的尽可能多的搜索。当被问及他们想要执行的搜索类型时，让用户通过单击“取消”按钮来结束程序。第二个问题（要搜索的型号或价格）上的“取消”按钮不应结束程序，但您的代码应将其识别为无效条目，并且不会引发异常。除了列表输出之外，程序中的所有输入和输出都应该带有 JOptionPane 对话框。

这是我到目前为止所拥有的：

```
import java.util.Scanner;
import java.io.*;

public class Inventory {

    public static void main ( String[] args )
    {
    String line;
    String[] fields;
    String[] items;
    int count = 0;
    int recCount;
    Cadillac[] list = new Cadillac[100];

    try
    {
      BufferedReader br = new BufferedReader( new FileReader( "inventory.dat" ) );
      line = br.readLine();
      while( line != null )
      {
        fields = line.split( "\t" );
        items[count++] = new Cadillac( fields[0], fields[1], fields[2],
                                                fields[3] );
        line = br.readLine();
      }
      br.close();
    }
    catch( IOException e )
    {
      System.out.println( "Can't open input file. Program terminating." );
      System.exit( 1 );
    }

    }
    public static int loadArray(Cadillac[] items)
    {

    }

}

class Cadillac {
                    //Instance data
    private String model;
    private String stockNum;
    private String color;
    private int price;
                    //Constructor
    public Cadillac(String mdl, String stckNum, String clr, int prc)
    {
        model = mdl;
        stockNum = stckNum;
        color = clr;
        price = prc;
    }
                    //Set of Accessor and Mutator Methods
    public String getModel(){
        return model;
    }
    public void setModel(String newModel){
        model = newModel;
    }
    public String getStockNum(){
        return stockNum;
    }
    public void setStockNum(String newStockNum){
        stockNum = newStockNum;
    }
    public String getColor(){
        return color;
    }
    public void setColor(String newColor){
        color = newColor;
    }
    public int getPrice(){
        return price;
    }
    public void setPrice(int newPrice){
        price = newPrice;
    }
} 
```

请帮忙！我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:31:47.563

关于您的评论：

> 这是说它找不到符号构造函数凯迪拉克

您为凯迪拉克定义的唯一构造函数具有参数`(String, String, String, int)`，但是当您尝试在 main 中实例化对象时，您向它传递了四个字符串。Java 抛出错误，因为它找不到正确的构造函数。

要么将最后一个参数作为 int 传递，要么为您的参数创建一个新的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T04:34:15.410

您最直接的问题是您的数据对象构造函数的签名与您调用它的方式不兼容。你已经这样声明了你的构造函数：

```
public Cadillac(String mdl, String stckNum, String clr, int prc) 
```

它需要三个字符串参数和一个 int，但您使用四个字符串调用它：

```
new Cadillac( fields[0], fields[1], fields[2], fields[3] ); 
```

这就是您报告看到的编译错误的来源。您应该将最后一个 String 转换为 int。

```
new Cadillac( fields[0], fields[1], fields[2], Integer.parseInt(fields[3]).intValue() ); 
```

除此之外，您的代码中还有另一个明显的错误。您声明了一个字符串数组，但正试图将“凯迪拉克”的实例存储到其中：

```
String[] items;
// ...
items[count++] = new Cadillac( ... ); 
```

我不会为你编写整个作业，但我的建议是首先用简单的英语句子写下完成整个程序所需完成的每项任务。然后开始将每个单独的句子翻译成代码，理想情况下是在你的类上可以调用的方法的形式。当您遇到问题时，请回来提出***具体***问题，我相信这里会有人愿意为您提供更多帮助。

祝你好运。

# delphi - DBDateTimePicker 验证

> ID：10168431
> 
> 赞同：3
> 
> 时间：2012-04-16T03:35:17.527
> 
> 标签：delphi, delphi-7, ado

我下载了一个 DBDateTimePicker，我用它来编辑表格中的日期、开始日期和完成日期。在普通编辑框中附加到表格时，我在附加和发布之前使用以下代码，以防止在开始日期之前设置完成日期。

```
if  (DTPAddStartDate.Date) > (DTPAddCompletionDate.Date) then
begin

      raise Exception.Create ('The Completion date of a Job can not be before a Start Date');
      abort;
end; 
```

问题是我希望能够在通过 DBDateTimePickers 编辑日期时实现相同的目的，如果我在 BeforePost 事件或其他东西上有类似的代码，那么我会收到过早的错误消息，因为用户可能没有机会编辑其他相关的 DBDateTimePicker。我不知道如何将这两个字段联系起来，以便我可以以某种方式验证它们或提出另一个解决问题的方法，有什么建议吗？（我使用一个连接到访问的 adotable，该组件是从以下链接下载的，[http:](http://apollosoft.net/jms/) //apollosoft.net/jms/ ）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:52:35.143

我猜您正在使用[`TDBDateTimePicker`](http://apollosoft.net/jms/DBDateTimePicker.zip)from[`this page`](http://apollosoft.net/jms/)但很难说，此时您的问题中缺少它。

但是，您可以使用在[`OnValidate`](http://docwiki.embarcadero.com/Libraries/en/Data.DB.TField.OnValidate)值更改时触发的字段事件，但这是将数据写入数据库的阶段，因此恕我直言，这是不必要的浪费时间。

您可以在它们尝试更新记录之前验证值，
当您尝试退出控件时（几乎？）每个 DB 感知控件的情况是什么，因此您可以很容易地添加一些验证事件，例如`OnCanUpdate`您的日期时间选择器。

由于缺少指向您从哪里获得组件的源的链接，我假设您正在使用 this [`TDBDateTimePicker`](http://apollosoft.net/jms/DBDateTimePicker.zip)。如果您将以下行添加到`DBDateTimePicker.pas`文件中并在安装位置重建您的包，则新`OnCanUpdate`事件将出现在组件的对象检查器中。如果您使用此事件，它有一个重要参数`Allowed`，如果您将其设置为 True，您将允许组件更新记录，如果您将其设置为 False（默认值），则不会更新数据集中的数据。所以这是您可以进行验证并决定是否要更新记录的地方。

```
type
  TDBDateTimePicker = class;
  TOnCanUpdate = procedure(Sender: TDBDateTimePicker; 
    var Allowed: Boolean) of object;
  TDBDateTimePicker = class(TDateTimePicker)
  private
    FOnCanUpdate: TOnCanUpdate;
    procedure CMExit(var Message: TCMExit); message CM_EXIT;
  published
    property OnCanUpdate: TOnCanUpdate read FOnCanUpdate write FOnCanUpdate;
  end;

procedure TDBDateTimePicker.CMExit(var Message: TCMExit);
var
  Allowed: Boolean;
begin      
  if Assigned(FOnCanUpdate) then
  begin
    Allowed := False;
    FOnCanUpdate(Self, Allowed);    
    if not Allowed then
    begin
      SetFocused(True);
      Exit;
    end;
  end;

  try
    FDataLink.UpdateRecord;
  except
    SetFocus;
    raise;
  end;
  SetFocused(False);
  inherited;
end; 
```

所以`OnCanUpdate`事件中的代码可能看起来像这样（请注意，您可以将此事件用作两个日期时间选择器的通用事件）。

```
procedure TForm1.DTPAddStartDateCanUpdate(Sender: TDBDateTimePicker; 
  var Allowed: Boolean);
begin
  if (DTPAddStartDate.Date) > (DTPAddCompletionDate.Date) then
  begin
    // the Allowed parameter is in current code initialized to False
    // when it comes into this event, so the following line has no
    // sense here
    Allowed := False;
    // here you can display the error message or raise exception or just
    // whatever you want, the record won't be modified in any way
    Application.MessageBox('The completion date of a job cannot be before a ' +
      'start date. The record won''t be modified ;-)', 'Date Input Error...',
      MB_YESNO + MB_ICONSTOP + MB_TOPMOST);
  end
  else
    // only setting the Allowed to True will actually allows the record to be
    // updated, so if your validation passes, set the Allowed to True
    Allowed := True;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:05:00.970

Caviate：这里在黑暗中拍摄，因为组件不熟悉。如果表单中有组件，那么对象就是表单的成员变量。假设它们是在初始化表单时创建的（您正在使用它们），当它们失去焦点时简单地检查一个事件。

```
//Pseudo Code--I'm sure it is using a standard event model
myForm.DTPAddCompletionDate.OnChange(...)
begin
  //do your check if it is successful something like... 
  if not (DTPAddStartDate.Date > DTPAddCompletionDate.Date) then
    return;
  else
    someSubmitButton.enabled = true;
end; 
```

我面前没有 Delphi，而且已经有好几年了，所以代码可能不会完美匹配。但是，这个想法应该可行。只需检查参考。

# ruby - 如何关闭 Rack 应用程序中的异常？

> ID：10168436
> 
> 赞同：5
> 
> 时间：2012-04-16T03:35:44.940
> 
> 标签：ruby, rack

我已准备好部署 RackServerPages 应用程序，但似乎找不到禁用异常的方法，即由 Rack::ShowExceptions 呈现的异常。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-08T08:12:31.827

将`RACK_ENV`环境变量设置为`deployment`.

从技术上讲，设置`ENV['RACK_ENV']`为除此之外`development`的任何内容都会禁用异常。当 rack 在[默认](https://github.com/rack/rack/blob/1.6.0/lib/rack/server.rb#L194)[环境中运行时，默认](https://github.com/rack/rack/blob/1.6.0/lib/rack/server.rb#L194)[包含](https://github.com/rack/rack/blob/1.6.0/lib/rack/server.rb#L157-L162)`Rack::ShowExceptions`中间件。[`development`](https://github.com/rack/rack/blob/1.6.0/lib/rack/server.rb#L194)

对于 Rails 应用程序，设置`ENV['RACK_ENV']`为`deployment`，确保您还设置`ENV['RAILS_ENV']`了适合您的环境的正确值（`production`、`development`等）。如果`ENV['RAILS_ENV']`未设置，Rails 应用程序将回退到`ENV['RACK_ENV']`并且 Rails 将抱怨未知`deployment`环境。

如果使用`unicorn`，也可以[使用`-E deployment`](https://github.com/defunkt/unicorn/blob/544167c5c3aec5993928634c084ae9dd8650be38/bin/unicorn#L56-L59)to 设置`ENV['RACK_ENV']`为`deployment`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-11T13:41:33.973

我有几个小时尝试禁用失败的不愉快经历，`Rack::ShowExceptions`但最后我发现我不需要这样做。

在生产中，它被关闭（当你尝试它时`curl -XINVALID -k https://my-production-app.com`它只会返回空白屏幕）。

但是如果您需要在自定义（例如“暂存”）环境中禁用它（仍然显示机架跟踪代码），这不会解决问题。

在 Rails 上测试`3.2.21`

在 Rails 上，`4.0.12` 这适用于我的生产和自定义“登台”环境

# php - 创建 filezilla ftp 帐户所需的 PHP 脚本

> ID：10168437
> 
> 赞同：1
> 
> 时间：2012-04-16T03:35:58.060
> 
> 标签：php, ftp, filezilla

好的，所以我有 filezilla 服务器软件设置，但我想要一个 php 脚本，它将一个新用户添加到包含用户名、密码和文件夹的 xml 文件中。我希望它将其添加到现有的 xml 文件中，而不删除其中的当前信息。如果您知道执行此操作的可用方法或脚本，请将其发送给我或分享您的知识。否则，如果有另一个 ftp 服务器程序为每个用户提供单独的 xml 或文件，请告诉我。在此先感谢，马特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:46:53.990

最好的办法是使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)来操作 XML 文件。

1.  使用[simplexml_load_file](http://www.php.net/manual/en/function.simplexml-load-file.php)打开文件。确保您对该文件具有读/写权限。
2.  使用[SimpleXMLElement](http://www.php.net/manual/en/class.simplexmlelement.php)类添加和删除节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:29:27.997

```
 $user = $xml->Users->addChild('User');
 $user->addAttribute('Name', $user_name);

 add_option($user,'Pass',md5($password));
 add_option($user,'Group',null);
 add_option($user,'Bypass server userlimit','0');
 add_option($user,'User Limit','0');
 add_option($user,'IP Limit','0');
 add_option($user,'Enabled','1');
 add_option($user,'Comments','none');
 add_option($user,'ForceSsl','0');

 $filter = $user->addChild('IpFilter');
 $filter->addChild('Disallowed');
 $filter->addChild('Allowed');

 $permissions = $user->addChild('Permissions');
 $permission = $permissions->addChild('Permission');

 $permission->addAttribute('Dir', str_replace("/","\\",$ftpUserFolder));

 add_option($permission,'FileRead','1');
 add_option($permission,'FileWrite','1');
 add_option($permission,'FileDelete','1');
 add_option($permission,'FileAppend','1');
 add_option($permission,'DirCreate','1');
 add_option($permission,'DirDelete','1');
 add_option($permission,'DirList','1');
 add_option($permission,'DirSubdirs','1');
 add_option($permission,'IsHome','1');
 add_option($permission,'AutoCreate','1');

 $speed = $user->addChild('SpeedLimits');
 $speed->addAttribute('DlType', '1');
 $speed->addAttribute('DlLimit', '10');
 $speed->addAttribute('ServerDlLimitBypass', '0');
 $speed->addAttribute('UlType', '1');
 $speed->addAttribute('UlLimit', '10');
 $speed->addAttribute('ServerUlLimitBypass', '0');
 $speed->addChild('Download');
 $speed->addChild('Upload');

 if(!$rv = $xml->asXML($xmlfile)){
  echo ('SimpleXML could not write file');
  return false;
 }

 //Change file encoding from UTF8 to ISO-8859-1
 $dom = new DOMDocument("1.0","ISO-8859-1");
 $dom->preserveWhiteSpace = false;
 $dom->formatOutput = true;
 if(!$dom->load($xmlfile) || !$dom->save($xmlfile)){
  echo ('DOMDocument could not change file enconding from UTF8 to ISO-8859-1'); 
```

我博客中的完整脚本：[http://moshez.blogspot.co.il/2013/02/php-filezilla-ftp-server-auto-create.html](http://moshez.blogspot.co.il/2013/02/php-filezilla-ftp-server-auto-create.html)

# java - 来自 /etc/rc.local 的 Java

> ID：10168439
> 
> 赞同：0
> 
> 时间：2012-04-16T03:36:12.863
> 
> 标签：java

是否可以（安全地）从 /etc/rc.local 启动 java 程序？我正在使用 2011 年 11 月的 Ubuntu（我为什么要了解 #s 月份是什么？）。

如果它有帮助（并且可以提高特异性），我正在运行 Minecraft 1.2.5 Bukkit 服务器，是的，我已经准备好一个脚本来设置启动服务器的所有东西（RAM、nogui、设置工作目录等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:54:09.963

是的，您可以尝试查看通用 Java 进程的答案：

[在 Linux 上守护 Java 应用程序的最佳方法](https://stackoverflow.com/questions/2724725/best-way-to-daemonize-java-application-on-linux)

然后专门针对 Minecraft，您可以阅读本[教程](http://www.minecraftwiki.net/wiki/Tutorials/Setting_up_a_server#Startup_and_maintenance_script)，尤其是[本章](http://www.minecraftwiki.net/wiki/Tutorials/Setting_up_a_server#Startup_and_maintenance_script)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:44:12.237

是的你可以。

另一种方法是在`/etc/init.d/`. 看一看，`/etc/init.d/skeleton`如果它确实有意义，请复制并修改以适合您的需要。

# c - C中初始化数组的方法

> ID：10168443
> 
> 赞同：0
> 
> 时间：2012-04-16T03:37:05.467
> 
> 标签：c, arrays, initializing

我想知道在 C 中初始化数组的不同方法，因为我在尝试做某事时遇到了一个小问题......

我在大学开始用 C 编程，它是第一语言，我们正在查看指针和一些函数。

也就是说，我正在尝试以下操作：

```
#include <stdio.h>
int main () {
    char a[][10] = {"Hola","Chau"};
    char b[][10] = {*a[0],*a[1]};
    printf("Contenido de &a es: %s \n",&a);
    printf("Contenido de &b es: %s \n",&b);
    system("pause");
} 
```

这是在复制 a[0][0 ... 10] 中的内容，但不会起作用……至少在我们在大学使用的 MS VS 2010 中。

所以我想知道初始化数组的不同方法的参考链接。

在堆栈中搜索，我发现了 memcpy 函数，并且以这种方式工作。

```
#include <stdio.h>
int main () {
    char a[5] = {"Hola"};
    char b[5];
    memcpy(b,a,3); /* testing */
    b[3] = '\0'; /* testing */
    printf("Contenido de &a es: %s \n",&a);
    printf("Contenido de &b es: %s \n",&b);
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:46:47.937

您应该区分数组分配（例如，memcpy，或使用 while/for 循环来一一分配数组中的元素，无论如何）与数组初始化。数组只能在其定义行中初始化。

在此处查看为数组指定初始化程序的两种方法：[初始化数组](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/aryin.htm)。

# python - 如何在 python/pygame 中制作按钮？

> ID：10168447
> 
> 赞同：9
> 
> 时间：2012-04-16T03:38:23.703
> 
> 标签：python, button, pygame

我正在 pygame 中制作游戏，在第一个屏幕上我希望有一些按钮，您可以按下这些按钮来 (i) 开始游戏，(ii) 加载带有说明的新屏幕，以及 (iii) 退出程序。

我在网上找到了这个用于制作按钮的代码，但我不太明白（我不太擅长面向对象的编程）。如果我能得到一些关于它在做什么的解释，那就太好了。此外，当我使用它并尝试使用文件路径在我的计算机上打开文件时，我收到错误 sh: filepath :Permission denied，我不知道如何解决。

```
#load_image is used in most pygame programs for loading images
def load_image(name, colorkey=None):
    fullname = os.path.join('data', name)
    try:
        image = pygame.image.load(fullname)
    except pygame.error, message:
        print 'Cannot load image:', fullname
        raise SystemExit, message
    image = image.convert()
    if colorkey is not None:
        if colorkey is -1:
            colorkey = image.get_at((0,0))
        image.set_colorkey(colorkey, RLEACCEL)
    return image, image.get_rect()
class Button(pygame.sprite.Sprite):
    """Class used to create a button, use setCords to set 
        position of topleft corner. Method pressed() returns
        a boolean and should be called inside the input loop."""
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image, self.rect = load_image('button.png', -1)

    def setCords(self,x,y):
        self.rect.topleft = x,y

    def pressed(self,mouse):
        if mouse[0] > self.rect.topleft[0]:
            if mouse[1] > self.rect.topleft[1]:
                if mouse[0] < self.rect.bottomright[0]:
                    if mouse[1] < self.rect.bottomright[1]:
                        return True
                    else: return False
                else: return False
            else: return False
        else: return False
def main():
    button = Button() #Button class is created
    button.setCords(200,200) #Button is displayed at 200,200
    while 1:
        for event in pygame.event.get():
            if event.type == MOUSEBUTTONDOWN:
                mouse = pygame.mouse.get_pos()
                if button.pressed(mouse):   #Button's pressed method is called
                    print ('button hit')
if __name__ == '__main__': main() 
```

感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T05:26:51.140

我没有适合您的代码示例，但我会怎么做：

1.  创建一个 Button 类，将按钮上的文本作为构造函数参数
    1.  创建一个 PyGame 表面，可以是图像或填充的 Rect
    2.  使用 Pygame 中的 Font.Render 内容在其上渲染文本
2.  Blit到游戏屏幕，保存那个矩形。
3.  在鼠标单击时检查，以查看 mouse.get_pos() 与矩形中的坐标匹配，该坐标由按钮的 blit 返回到主表面。

这与您的示例所做的类似，尽管仍然不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-16T17:03:35.103

在 pygame（在 Python 中）上创建按钮的另一种好方法是安装名为*pygame_widgets* ( `pip3 install pygame_widgets`) 的包。

```
# Importing modules
import pygame as pg
import pygame_widgets as pw

# Creating screen
pg.init()
screen = pg.display.set_mode((800, 600))
running = True
button = pw.Button(
    screen, 100, 100, 300, 150, text='Hello',
    fontSize=50, margin=20,
    inactiveColour=(255, 0, 0),
    pressedColour=(0, 255, 0), radius=20,
    onClick=lambda: print('Click')
) 
```

在跑步的时候：

```
events = pg.event.get()
for event in events:
    if event.type == pg.QUIT:
        running = False
button.listen(events)
button.draw()
pg.display.update() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-31T05:13:25.080

您在网上找到的“代码”不是那么好。您只需要制作一个按钮就是这个。将其放在代码的开头附近：

```
def Buttonify(Picture, coords, surface):
    image = pygame.image.load(Picture)
    imagerect = image.get_rect()
    imagerect.topright = coords
    surface.blit(image,imagerect)
    return (image,imagerect) 
```

将以下内容放入您的游戏循环中。同样在你的游戏循环中的某个地方：

```
Image = Buttonify('YOUR_PICTURE.png',THE_COORDS_OF_THE_BUTTON'S_TOP_RIGHT_CORNER, THE_NAME_OF_THE_SURFACE) 
```

也把它放在你的游戏循环中，无论你做了什么`for event in pygame.event.get`

```
if event.type == MOUSEBUTTONDOWN and event.button == 1:
     mouse = pygame.mouse.getpos
     if Image[1].collidrect(mouse):
        #code if button is pressed goes here 
```

因此， buttonify 加载将在按钮上的图像。此图像必须是 .jpg 文件或与代码位于同一目录中的任何其他 PICTURE 文件。图片就是它的名字。名称后面必须有 .jpg 或其他任何内容，并且名称必须用引号引起来。Buttonify 中的 coords 参数是从 pygame 打开的屏幕或窗口的右上角坐标。表面是这个东西：

```
blahblahblah = pygame.surface.set_mode((WindowSize))
 /|\
  |
  Surface's Name 
```

因此，该函数创建了一个名为“image”的东西，它是一个 pygame 表面，它在其周围放置了一个名为“imagerect”的矩形（将其设置在一个位置并在 blitting 时设置第二个参数），然后设置它的位置，然后将它放在倒数第二行。

下一段代码使“Image”成为“image”和“imagerect”的元组。

最后一个代码`if event.type == MOUSEBUTTONDOWN and event.button == 1:`基本上意味着如果按下鼠标左键。此代码必须在`for event in pygame.event.get`. 下一行使鼠标成为鼠标位置的元组。最后一行检查鼠标是否与 Image[1] 碰撞，我们知道它是“imagerect”。代码如下。

告诉我是否需要进一步解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T09:46:48.143

这是我多年前制作的按钮类： [https](https://www.dropbox.com/s/iq5djllnz0tncc1/button.py?dl=0) ://www.dropbox.com/s/iq5djllnz0tncc1/button.py?dl= 0 据我所知，该按钮是 Windows 7 风格，但我没有去过最近能够测试它，因为我正在使用的计算机上没有 pygame。希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-17T18:40:08.403

这是由其他人发布的课程的修改版本，该课程对我来说非常相似（但已关闭）的问题。

```
class Button():
    def __init__(self, color, x,y,width,height, text=''):
        self.color = color
        self.ogcol = color
        self.x = x
        self.y = y
        self.width = width
        self.height = height
        self.text = text

    def draw(self,win,outline=None):
        #Call this method to draw the button on the screen
        if outline:
            pygame.draw.rect(win, outline, (self.x-2,self.y-2,self.width+4,self.height+4),0)

        pygame.draw.rect(win, self.color, (self.x,self.y,self.width,self.height),0)

        if self.text != '':
            font = pygame.font.SysFont('Consolas', 24)
            text = font.render(self.text, 1, (0,0,0))
            win.blit(text, (self.x + (self.width/2 - text.get_width()/2), self.y + (self.height/2 - text.get_height()/2)))

    def isOver(self, pos):
        global STATE
        #Pos is the mouse position or a tuple of (x,y) coordinates
        if pos[0] > self.x and pos[0] < self.x + self.width:
            if pos[1] > self.y and pos[1] < self.y + self.height:
                self.color = (128,128,128)
            else:
                self.color = self.ogcol
        else:
            self.color = self.ogcol
        global ev
        for event in ev:
            if event.type == pygame.MOUSEBUTTONDOWN:
                if pos[0] > self.x and pos[0] < self.x + self.width:
                    if pos[1] > self.y and pos[1] < self.y + self.height:
                        return True 
```

变量`ev`将是事件列表 ( `pygame.event.get()`)。它的一些示例语法是

```
#class up here
btn = Button((255,0,0),100,100,200,50,text="print hi")
#do above before you start the loop
#all of the pygame init and loop
#Define screen as the window

btn.draw(screen)
if btn.isOver(pygame.mouse.get_pos()) == True:
    print("hi")
pygame.display.update() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-20T00:42:37.120

所以你必须创建一个名为 button 的函数，它接收 8 个参数。1）按钮的消息 2）按钮左上角的X位置 3）按钮左上角的Y位置 4）按钮的宽度 5）按钮的高度 6）非活动颜色（背景色） 7）活动颜色（悬停时的颜色） 8）您要执行的操作的名称

```
def button (msg, x, y, w, h, ic, ac, action=None ):
    mouse = pygame.mouse.get_pos()
    click = pygame.mouse.get_pressed()

    if (x+w > mouse[0] > x) and (y+h > mouse[1] > y):
        pygame.draw.rect(watercycle, CYAN, (x, y, w, h))
        if (click[0] == 1 and action != None):
            if  (action == "Start"):
                game_loop()
            elif  (action == "Load"):
                 ##Function that makes the loading of the saved file##
            elif  (action == "Exit"):
                pygame.quit()

    else:
        pygame.draw.rect(watercycle, BLUE, (x, y, w, h))
        smallText = pygame.font.Font("freesansbold.ttf", 20)
        textSurf, textRect = text_objects(msg, smallText)
        textRect.center = ( (x+(w/2)), (y+(h/2)) )
        watercycle.blit(textSurf, textRect) 
```

因此，当您创建游戏循环并调用按钮功能时：

按钮（“开始”、600、120、120、25、蓝色、青色、“开始”）

# c# - 如何将文件名列表存储到一个列表中并通过电子邮件发送？

> ID：10168448
> 
> 赞同：0
> 
> 时间：2012-04-16T03:38:36.800
> 
> 标签：c#, winforms

我有一个应用程序可以扫描某些目录以查找任何超过特定大小的文件。检测到它后，它会发送一封警告电子邮件，说明某些文件已达到一定的大小限制。我的问题是我当前的程序将为每个文件发送一封电子邮件。这意味着如果有 10 个文件超出限制，那么它将发送 10 封电子邮件。如何使它编译所有文件并在一封电子邮件中发送这些文件的列表？如果需要，这是我的代码：

```
private void Form1_Load(object sender, EventArgs e)
    {
        count = 0;
        timer = new Timer();
        timer.Interval = 1000;
        timer.Tick += new EventHandler(timer1_Tick);
        timer.Start();

        List<string> s1 = System.IO.Directory.GetFiles(@"F:\gdimaging\data", "*.*", SearchOption.AllDirectories).ToList<string>();
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\hios\DATA", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\imgviewer\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\newcnas\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\newpod\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\OMS\data", "*.*", SearchOption.AllDirectories).ToList<string>());
        s1.AddRange(System.IO.Directory.GetFiles(@"F:\WEBIMG", "*.*", SearchOption.AllDirectories).ToList<string>());

        dt.Columns.Add("File_Name");
        dt.Columns.Add("File_Type");
        dt.Columns.Add("File_Size");
        dt.Columns.Add("Create_Date");
        ArrayList fileList = new ArrayList();      
        foreach(string s in s1)
        {   
            try
            {   
                FileInfo info = new FileInfo(s);
                FileSystemInfo sysInfo = new FileInfo(s);
                dr = dt.NewRow();
                //System.Collections.Generic.List<string> nameList;
                dr["File_Name"] = sysInfo.Name;
                dr["File_Type"] = sysInfo.Extension;
                dr["File_Size"] = (info.Length / 1024).ToString();
                dr["Create_Date"] = sysInfo.CreationTime.Date.ToString("dd/MM/yyyy");
                dt.Rows.Add(dr);

                if ((info.Length / 1024) > 1500000)
                {
                    fileList.Add(sysInfo.Name);
                }

                if (dt.Rows.Count > 0)
                {
                    dataGridView1.DataSource = dt;
                }
            }
            catch (UnauthorizedAccessException ex)
            {
                MessageBox.Show("Error : " + ex.Message);
                continue;
            }

        }

        MessageBox.Show(fileList + "overlimit!!"); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:41:14.137

使用公共方法/属性将 Mail 选项封装在一个类中，如果其中一个文件满足条件，则返回布尔值，并且仅在满足条件时才执行邮件操作：

像这样的东西 - 没有检查，因为它是在文本编辑器中的 mac 上完成的

```
private void Form1_Load(object sender, EventArgs e)
{
    count = 0;
    timer = new Timer();
    timer.Interval = 1000;
    timer.Tick += new EventHandler(timer1_Tick);
    timer.Start();

    List<string> s1 = System.IO.Directory.GetFiles(@"F:\gdimaging\data", "*.*", SearchOption.AllDirectories).ToList<string>();
    s1.AddRange(System.IO.Directory.GetFiles(@"F:\hios\DATA", "*.*", SearchOption.AllDirectories).ToList<string>());
    s1.AddRange(System.IO.Directory.GetFiles(@"F:\imgviewer\data", "*.*", SearchOption.AllDirectories).ToList<string>());
    s1.AddRange(System.IO.Directory.GetFiles(@"F:\newcnas\data", "*.*", SearchOption.AllDirectories).ToList<string>());
    s1.AddRange(System.IO.Directory.GetFiles(@"F:\newpod\data", "*.*", SearchOption.AllDirectories).ToList<string>());
    s1.AddRange(System.IO.Directory.GetFiles(@"F:\OMS\data", "*.*", SearchOption.AllDirectories).ToList<string>());
    s1.AddRange(System.IO.Directory.GetFiles(@"F:\WEBIMG", "*.*", SearchOption.AllDirectories).ToList<string>());

    //s1 = Directory.GetFiles(@"F:\gdimaging\data", "*.*");
    dt.Columns.Add("File_Name");
    dt.Columns.Add("File_Type");
    dt.Columns.Add("File_Size");
    dt.Columns.Add("Create_Date");
    // new mail list class
    class mailList {
    public bool isEmpty = true;
    MailMessage mailMessage;
    // do all the onceonly stuff in the constructor
        public mailList(){
            mailMessage = new MailMessage();
            mailMessage.To.Add(new MailAddress("shahrul1509@yahoo.com"));
            mailMessage.To.Add(new MailAddress("shahrul_kakashi90@hotmail.com"));
    // set subject
            mailMessage.Subject = "FILE SIZE WARNING MESSAGE";
            // Identify the credentials to login to the gmail account  
            string sendEmailsFrom = "shahrul1509@gmail.com";
                    // password below is written in * to encrypt it

            string sendEmailsFromPassword = "***4556**";
            NetworkCredential cred = new NetworkCredential(sendEmailsFrom, sendEmailsFromPassword);
            SmtpClient mailClient = new SmtpClient("smtp.gmail.com", 587);
            mailClient.EnableSsl = true;
            mailClient.DeliveryMethod = SmtpDeliveryMethod.Network;
            mailClient.UseDefaultCredentials = false;
            mailClient.Timeout = 20000;
            mailClient.Credentials = cred;
            mailMessage.IsBodyHtml = true;
            mailMessage.From = new MailAddress("shahrul1509@gmail.com", "Shahrul Nizam");

        }
        public addFile(String fileName){
            mailMessage.Body = mailMessage.Body + sysInfo.Name+ "HAS REACH ITS SIZE LIMIT.";
            isEmpty = false;
        }
        public send(){
            mailClient.Send(mailMessage);
            MessageBox.Show("Email Notification Sent!");
        }
    }

    }
    try
        {
        mailList ml = new mailList();
        foreach(string s in s1)
            {
                FileInfo info = new FileInfo(s);
                FileSystemInfo sysInfo = new FileInfo(s);
                dr = dt.NewRow();
            //System.Collections.Generic.List<string> nameList;
                dr["File_Name"] = sysInfo.Name;
                dr["File_Type"] = sysInfo.Extension;
                dr["File_Size"] = (info.Length / 1024).ToString();
                dr["Create_Date"] = sysInfo.CreationTime.Date.ToString("dd/MM/yyyy");
                dt.Rows.Add(dr);

                if ((info.Length / 1024) > 1500000)
                {
                    ml.addFile(sysInfo.Name);

                    if (dt.Rows.Count > 0)
                    {
                    dataGridView1.DataSource = dt;
                    }

                }
                if(ml.isEmpty==false){
                    ml.Send();
                }
            }
    catch (UnauthorizedAccessException ex)
    {
        MessageBox.Show("Error : " + ex.Message);
        continue;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:52:36.647

在 foreach 循环中检查文件大小后，然后将这些超出特定限制的文件添加到另一个数组中，并将数组元素加入到位于 for 循环之外的消息正文中。

# git - Git递归更新子模块

> ID：10168449
> 
> 赞同：352
> 
> 时间：2012-04-16T03:38:57.153
> 
> 标签：git, git-submodules

我的项目结构

```
ProjectA
-FrameworkA (submodule)
--Twig (submodule of FrameworkA) 
```

如何递归更新子模块？我已经尝试了一些 git 命令（在 ProjectA 根目录上）

```
git submodule foreach git pull origin master 
```

或者

```
git submodule foreach --recursive git pull origin master 
```

但无法提取 Twig 的文件。

* * *

## 回答 #1

> 赞同：767
> 
> 时间：2012-04-16T04:24:10.280

```
git submodule update --recursive 
```

您可能还想使用 --init 选项，这将使它初始化任何未初始化的子模块：

```
git submodule update --init --recursive 
```

*注意：**在某些旧版本的 Git**中，如果您使用该`--init`选项，可能不会更新已经初始化的子模块。在这种情况下，您还应该运行不带`--init`选项的命令。*

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-09-26T13:28:34.017

我使用的方式是：

```
git submodule update --init --recursive
git submodule foreach --recursive git fetch
git submodule foreach git merge origin master 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-12-03T23:17:29.750

由于您的子模块的默认分支可能**不是** `master`（在我的情况下经常发生），这就是我自动化完整的 Git 子模块升级的方式：

```
git submodule init
git submodule update
git submodule foreach 'git fetch origin; git checkout $(git rev-parse --abbrev-ref HEAD); git reset --hard origin/$(git rev-parse --abbrev-ref HEAD); git submodule update --recursive; git clean -dfx' 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-01-22T13:56:09.427

在最近的 Git（我使用的是 v2.15.1）中，以下内容将递归地将上游子模块更改合并到子模块中：

```
git submodule update --recursive --remote --merge 
```

您可以添加`--init`以初始化任何未初始化的子模块，并`--rebase`在您想要变基而不是合并时使用。

您需要在之后提交更改：

```
git add . && git commit -m 'Update submodules to latest revisions' 
```

# c++ - 秒到天、小时和分钟（可自定义的日长）

> ID：10168454
> 
> 赞同：0
> 
> 时间：2012-04-16T03:39:55.537
> 
> 标签：c++

我有一个循环，在每个循环中，我得到应用程序运行的当前秒数，然后我想将这个时间转换为秒计算到的天数、小时和秒数，但不是我需要的“实时”能够自定义一天中有多少秒，我已经在 SO 和网络上尝试过示例，但似乎没有任何内容。我有一些定义

```
#define DAY             1200
#define HOUR            DAY / 24
#define MINUTE          HOUR / 60
#define SECOND          MINUTE / 60 
```

所以在我的定义中，一天将持续 1200 秒。然后我一直在尝试将经过的秒数转换为“我的”秒数

```
seconds_passed = fmodf(SECOND, (float)(GetTicks() / 1000)); 
```

它返回 SECOND 等于 (0.013889) 但是每个循环都是相同的，它永远不会改变我想我只能转换例如：1real 秒到 1.25fake 秒然后

```
Minute = (seconds_passed / MINUTE);
seconds_passed = fmodf(seconds_passed, MINUTE); 
```

计算自应用程序启动以来已经过去了多少（假）分钟、（假）小时和（假）天。

希望这是有道理的，谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:47:51.863

由于您想自定义一天中有多少秒，您真正要做的就是更改 1 秒：1 秒的比例。

例如，如果您一天中有 1200 秒，那么您的比率是：
`1:72`
也就是说，您一天中每过 1 秒，它等于 72 实际秒。

所以是的，基本上你在程序中需要做的就是找到 1 秒与 1 秒的比率，乘以你经过的秒数以获得“假”秒，然后使用该值......代码可能看起来像这个：

```
// get the ratio second:fake_second
#define REAL_DAY_SECONDS 86400
int ratio = REAL_DAY_SECONDS / DAY;

fake_to_real = fake_second*ratio;
real_to_fake = real_second/ratio; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T08:33:19.597

您可以使用 chrono 中的一行来制作自己的持续时间：

```
using fake_seconds = std::chrono::duration<float, std::ratio<72,1>>; 
```

一些示例代码

```
#include <iostream>
#include <chrono>
using namespace std::chrono_literals;

using fake_seconds = std::chrono::duration<float, std::ratio<72,1>>;

int main()
{
    auto f_x = fake_seconds(350s);
    std::cout << "350 real seconds are:\n" << f_x.count() << " fake_seconds\n";
} 
```

[https://godbolt.org/z/f5G86avxr](https://godbolt.org/z/f5G86avxr)

# javascript - 我怎样才能让这两个 javascript 文件都工作？

> ID：10168455
> 
> 赞同：0
> 
> 时间：2012-04-16T03:40:08.610
> 
> 标签：javascript, jquery, ajax

我的 index.html 文件的结尾包含两个脚本文件。其中一个文件处理使用 jquery 加载页面内容。另一个文件处理我主页上的选项卡式内容区域，也是 jquery。如果我将选项卡式内容区域的文件放在 ajax 页面加载文件的文件之后，则选项卡可以工作，但用于页面加载的 ajax 不起作用。如果我颠倒这些文件的顺序，那么页面加载 ajax 可以工作，但选项卡不能工作。这可能是什么原因造成的？

这是选项卡式内容的文件：

```
$(document).ready(function (){
initialize();
});

function initialize() {
//Click on nav to load external content through AJAX
// $('#topnav a').click(function(e){
//  e.preventDefault();
//  $('#pages').load( e.target.href + ' #loadcontent'); //pages finished loading
// }); //clicked on nav

    $(function() {

    $("#tabedarea").organicTabs();

    $("tabedarea").organicTabs({
        "speed": 200
    });
});
}

(function($) {

$.organicTabs = function(el, options) {

    var base = this;
    base.$el = $(el);
    base.$navtabs = base.$el.find(".navtabs");

    base.init = function() {

        base.options = $.extend({},$.organicTabs.defaultOptions, options);

        // Accessible hiding fix
        $(".hidetabs").css({
            "position": "relative",
            "top": 0,
            "left": 0,
            "display": "none"
        }); 

        base.$navtabs.delegate("li > a", "click", function() {

            // Figure out current list via CSS class
            var curList = base.$el.find("a.current").attr("href").substring(1),

            // List moving to
                $newList = $(this),

            // Figure out ID of new list
                listID = $newList.attr("href").substring(1),

            // Set outer wrapper height to (static) height of current inner list
                $allListWrap = base.$el.find(".list-wrap"),
                curListHeight = $allListWrap.height();
            $allListWrap.height(curListHeight);

            if ((listID != curList) && ( base.$el.find(":animated").length == 0)) {

                // Fade out current list
                base.$el.find("#"+curList).fadeOut(base.options.speed, function() {

                    // Fade in new list on callback
                    base.$el.find("#"+listID).fadeIn(base.options.speed);

                    // Adjust outer wrapper to fit new list snuggly
                    //var newHeight = base.$el.find("#"+listID).height();
                    //$allListWrap.animate({
                    //    height: newHeight
                    //});

                    // Remove highlighting - Add to just-clicked tab
                    base.$el.find(".navtabs li a").removeClass("current");
                    $newList.addClass("current");

                });

            }   

            // Don't behave like a regular link
            // Stop propegation and bubbling
            return false;
        });

    };
    base.init();
};

$.organicTabs.defaultOptions = {
    "speed": 300
};

$.fn.organicTabs = function(options) {
    return this.each(function() {
        (new $.organicTabs(this, options));
    });
};

})(jQuery); 
```

这是页面加载ajax的文件：

```
// remap jQuery to $
(function($){})(window.jQuery);

/* trigger when page is ready */
$(document).ready(function (){
    initialize();

});

function initialize() {
    //Click on nav to load external content through AJAX
    $('#topnav a, #bottomnav a').not('#bottomnav #fbcallus a').click(function(e){
        e.preventDefault();
        $('#pages').load( e.target.href + ' #loadcontent'); //pages finished loading
    }); //clicked on nav
    //handle AJAX for left nav

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:44:38.317

您正在创建具有相同名称的全局函数，`initialize`更改它们的名称或仅更改一个名称。之后加载的会覆盖第一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:46:52.553

问题在于这两个函数的名称相同。为函数使用两个不同的名称。然后您不需要添加两个页面加载处理程序。在后一个脚本中添加一个页面加载处理程序并调用其中的两个方法。假设您的两个函数是 initialize() 和 init2() 然后在后一个 js 文件中使用

```
$(document).ready(function () {
   initialize();
   init2();
}); 
```

# iphone - 当页面被添加到桌面时，如何在 Mobile Safari 中管理通话结束行为？

> ID：10168456
> 
> 赞同：3
> 
> 时间：2012-04-16T03:40:23.433
> 
> 标签：iphone, ios, html, mobile-safari, tel

我有一个 HTML5 移动网络应用程序需要提供链接，以便用户可以拨打电话。添加链接以拨打电话很容易：

```
<a href="tel:+15556345789">Call me</a> 
```

但是，管理呼叫后行为并非如此。

如果我在 Mobile Safari 中查看应用程序，然后单击链接，我会被带到电话应用程序以拨打电话。当通话结束时，iPhone 将返回到 Mobile Safari，在我之前所在的页面（即发起通话的页面）上。

但是，如果我将同一页面添加到桌面上（因此用户体验更接近“应用程序”），然后单击同一链接，我会在通话完成时被定向到手机桌面。这意味着我需要重新加载移动“应用程序”，然后导航回我拨打电话时的位置。

为什么两者的行为不同？有没有办法让书签应用程序返回到发起呼叫的同一上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:41:56.957

你试过`target = _blank`吗？只是一个盲目的猜测。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:49:51.063

Just a complete guess, but what if the link is to a page that redirects to the "tel:" URL?

# c++ - while循环中的分段错误

> ID：10168459
> 
> 赞同：-1
> 
> 时间：2012-04-16T03:40:44.093
> 
> 标签：c++

我有一个程序从 C++ 中的 2 个文件中获取输入。那么确定第二个输入文件是不是拓扑排序呢？但不知何故，如果我在 while 循环语句中使用 list.empty()，它会给我一个分段错误，但 for 循环不会给我任何错误；但是，for 循环只循环一次，因为我可能需要经历两次。

```
#include <list>
#include <iostream>
#include <vector>

using namespace std ;

list<unsigned> output;

list<unsigned> &
testSort ( istream & idata , istream & sdata )
{
 unsigned n,x1,x2;
 vector< list<unsigned> > successor(n);
 vector<unsigned> count(n,0);
 vector<bool> marks(n,false);

 idata >>n;

 for(int i=0;i<n;i++) {
idata>>x1>>x2;
count[x2]++;
successor[x1].push_back(x2);
if(idata.eof()) break;
 }

 for(int i=0;i<n;i++) {
 sdata>>x1;
  if(count[x1]==0) {
   marks[x1]=true;

   //for(int j=0;j<successor[x1].size();++j) {
    while(!successor[x1].empty()) { 
count[successor[x1].front()]--; 
successor[x1].pop_front();      
  }
 }
  else {
    for(int i=0;i<n;i++)
    {
     if(marks[i]==false)
     output.push_back(i);
    }
   break;
  }  

 }
  return output;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:02:58.277

```
unsigned n,x1,x2;
vector< list<unsigned> > successor(n); 
```

这是一个明显的错误——您`n`用于指定 的大小`successor`，但`n`尚未初始化，因此它包含垃圾（同样如此，`count`因为`marks`您也指定了它们的大小`n`）。换句话说，在这一点上，我们对 的大小一无所知`successor`。

你有几个选择。你可以移动你的`idata >> n`; *在*定义`successor`、`count`和之前`marks`，或者您可以在没有大小的情况下定义它们，然后`resize`在`n`从`idata`.

`std::list`除了指出我很少发现它是最佳选择之外，我将停止我通常的咆哮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:50:02.793

读入`x1`和的值是什么`x2`？如果值大于`n`，则对向量元素的访问无效：`count[x2]`，`marks[x1]`并`successor[x1]`引用无效元素。

使用函数代替下标符号 ( `[]`)，该`at()`函数执行边界检查以捕获第一个无效访问。

# ruby-on-rails - 创建多个 Rails 服务器共享同一个数据库

> ID：10168464
> 
> 赞同：1
> 
> 时间：2012-04-16T03:41:21.013
> 
> 标签：ruby-on-rails, backend

我有一个托管在 Heroku 上的 Rails 应用程序。我必须对 mySQL 数据库进行长时间的后端计算和查询。

我的理解是使用DelayedJob 或Whenever gems 调用后端进程仍然会对Rails（前端）服务器性能产生影响。因此，我想设置两个不同的 Rails 服务器。

第一个服务器用于前端（响应用户的请求），就像在常规 Rails 应用程序中一样。第二台服务器（也是 Rails 服务器）仅用于后端查询和计算。它只会从 mySQL 中读取，进行计算，然后将结果写入另一个 Redis 服务器。

我的感觉是，没有很多 Rails 开发人员这样做。他们更喜欢在 Rails 服务器上运行后台作业并根据需要添加更多工作人员。我的服务器结构是一个好的设计，还是矫枉过正？有什么我应该注意的陷阱吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:08:39.393

我看不出有任何理由说明为什么像 DelayedJob 这样的后台作业会比另一台服务器对您的主应用程序造成更多的开销。DelayedJob 在它自己的进程中运行，因此您的主应用程序的测功机不会受到影响。唯一的影响可能是对数据库查询的影响，但无论是来自后台作业还是访问同一数据库的另一个应用程序，这都是相同的。

我建议在您的主要应用程序上使用 DelayedJob 和工作人员。它使事情变得简单，并且在性能方面不应该变得更糟。

如果您真的担心性能，要考虑的另一件事是拥有一个数据库“追随者”，这实际上是第二个数据库，可以使自己与主数据库保持同步，但只能用于读取（而不是写入）。可能有更好的文档，但你可以在这里[https://devcenter.heroku.com/articles/fast-database-changeovers#create_a_follower](https://devcenter.heroku.com/articles/fast-database-changeovers#create_a_follower)得到这个想法。然后，您可以让这些冗长的后台作业从此处读取数据，而使您的主数据库完全不受影响。

# php - 如何在 SMTP 中从客户端更改最大邮件大小

> ID：10168466
> 
> 赞同：0
> 
> 时间：2012-04-16T03:41:53.313
> 
> 标签：php, email, smtp

在我的应用程序中，我使用 SMTP 发送电子邮件。我将电子邮件作为 html 电子邮件发送。

如果 html 内容很小，那么我可以使用 SMTP 正确发送电子邮件，但是当电子邮件消息包含冗长的 html 内容时，邮件不会最终出现在帐户中。

这是什么原因？

是否有任何命令或代码可以更改从客户端传递到 smtp 服务器的消息大小？

下面是我用来发送电子邮件的 SMTP 代码：

```
function smtp_mail($from, $to, $subject, $message, $headers="", $params=array()) {
    $errno = "";
    $errstr = "";
    $smtpConnect = fsockopen("mail2.allramhosting.com", "25", $errno, $errstr, 20);

    if (!empty($smtpConnect)) {

        if ($params['use_html']) {
            $extra_headers .= "MIME-Version: 1.0\nContent-Type: text/html; charset=\"utf-8\"\nContent-Transfer-Encoding: 7bit\n";
        }
        $headers = "To: " . $to . "\nFrom: " . $from . "\nSubject: " . $subject . "\nDate: " . date('r') . "\n" . $extra_headers . $headers;

        if (substr($headers, -1) == "\n") $headers = substr($headers, 0, -1); // Our last character should not be newline

        fputs($smtpConnect, "HELO networkssms.com\r\n");
        fputs($smtpConnect, "MAIL FROM: " . $from . " SIZE=1000000\r\n");
        fputs($smtpConnect, "RCPT TO: " . $to . "\r\n");
        fputs($smtpConnect, "DATA\r\n");
        fputs($smtpConnect, $headers . "\r\n\r\n");
        fputs($smtpConnect, $message . "\r\n.\r\n"); // send message and finish
        fputs($smtpConnect,"QUIT" . $newLine);
        fclose($smtpConnect);
        return true;
    }
    return false;
} 
```

这是调用函数：

```
<?php
$subject = "UnTouched Ticket Notification";
$to = "example@gmail.com";
$from = "test@domain.com";
$part = "<html><body>\n";
$part .= "<div style='background-color: #EEEEEE;;padding: 10px 10px 20px;width: 650px; float:left;font-size:18px;'>\n";
$part1 = "<div style='width:500px;'>\n";

$part1 .= "<div style='width:450px;background-color:#eeeeee;padding: 30px 0 20px; height:auto; float:left;font-size:15px;margin-left:50px;'>\n";
$part3 = "</div></div></div>\n";
$part3 .= "</body></html>\n";

$center_part1 = 'Dear Admin ,';
$center_part = "You have opened 25 tickets . But the following tickets are not updated yet ,\n";
$center_part2="<div style='width:345px;color:#000000;font-size:12px;margin-left:25px; font-weight:bold; height:auto; margin-top:30px;'>\n";

$new = '<table height="92" style="border:2px solid #DCDCDC; width:565px;" cellspacing="0" cellpadding="0">
  <tr style="background-color:#E5E5E5;">
    <th height="35">Ticket #</th>
    <th>Customer</th>
    <th>Type</th>
    <th>Untouched Days</th>
    <th>Untouched Hours</th>
    <th>Last Updated Date</th>
  </tr>';
for($i=0;$i<100;$i++){
$new.= "<tr>
    <td align = 'center' height='30'>".$i."</td>
    <td align = 'center'>test</td>
    <td align = 'center'>terst</td>
    <td align = 'center'>".$i." Days</td>
    <td align = 'center'>".$i." Hours</td>
    <td align = 'center'>".$i."</td>
  </tr>";
}
$center_part2.=$new."</table></div>\n";
$message = $part.$center_part1.$part1.$center_part.$center_part2.$part3;
        if($to){
            smtp_mail($from, $to ,$subject, $message,"MIME-Version: 1.0\nContent-Type: text/html; charset=\"utf-8\"\nContent-Transfer-Encoding: 7bit\n");
        }

?> 
```

你能确定这是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:44:49.553

> 这是什么原因？

服务器就是这样配置的。

> 如果有任何命令或代码可以更改从客户端传递到 smtp 服务器的消息大小？

不。

# c - 捕捉 WM_DEVICECHANGE

> ID：10168467
> 
> 赞同：4
> 
> 时间：2012-04-16T03:42:03.513
> 
> 标签：c, windows, winapi, gcc, mingw

如何意识到`WM_DEVICECHANGE`到来？

`WndProc`的覆盖。我抓住了一大堆消息，但没有一个是 type 的`WM_DEVICECHANGE`。`RegisterDeviceNotification`让链接器抱怨它找不到函数！所以我被这个巫毒魔法困住了。请帮忙。

PS：当然，我已经用谷歌搜索和stackoverflowing（lol）所有这些东西大约8个小时了。

```
int CALLBACK WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
        LPSTR lpCmdLine, int nCmdShow)
{
        LPTSTR lolclassname = "lolclass";
    WNDCLASS lolclass;
    HWND lolwindow;
    MSG lolmsg;
    UINT msgstatus;

    lolclass.style = CS_VREDRAW;
    lolclass.lpfnWndProc = &lol_wnd_proc;
    lolclass.cbClsExtra = 0;
    lolclass.cbWndExtra = 0;
    lolclass.hInstance = hInstance;
    lolclass.hIcon = NULL;
    lolclass.hCursor = NULL;
    lolclass.hbrBackground = (HBRUSH)(COLOR_BACKGROUND + 1);
    lolclass.lpszMenuName = NULL;
    lolclass.lpszClassName = lolclassname;
    if(!RegisterClass(&lolclass)) fail("RegisterClassEx");

    lolwindow = CreateWindow("lolclass", NULL, WS_MINIMIZE, CW_USEDEFAULT,
            CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
            HWND_MESSAGE, NULL, hInstance, NULL);

    if(lolwindow == NULL) fail("CreateWindowEx");

    /*ShowWindow(lolwindow, nCmdShow);
    UpdateWindow(lolwindow);*/

    do {
/*      if(!SetWindowPos(lolwindow, HWND_TOPMOST, 1, 1, 1, 1,
                    SWP_HIDEWINDOW))
            fail("SetWindowPos");*/
        msgstatus = GetMessage(&lolmsg, lolwindow, 0, 0);
        if(!msgstatus) break;
        if(msgstatus == - 1) fail("GetMessage");
        TranslateMessage(&lolmsg);
        DispatchMessage(&lolmsg);
        Sleep(1000);
    } while(1);

    return lolmsg.wParam;
} 
```

`lol_wnd_pro`c 被执行但从未在它应该执行的时候执行（当然是在设备更改时，我清楚吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:16:19.957

问题是您正在创建一个不接收广播[的仅消息窗口：](http://msdn.microsoft.com/en-us/library/ms632599.aspx#message_only)

> 仅消息窗口使您能够发送和接收消息。它不可见，没有 z 顺序，无法枚举，并且**不接收广播消息**。窗口只是发送消息。

因此，您不能使用仅消息窗口，而是需要创建一个从不显示的顶级窗口。这很容易实现——停止传递`HWND_MESSAGE`并`CreateWindow`确保你永远不会调用`ShowWindow`.

* * *

顺便说一句，`Sleep(1000)`在消息循环的中间将是一场灾难。您需要及时发送消息，而不是在工作中睡着了。你必须摆脱它`Sleep`。请注意，`GetMessage`如果队列为空，它将阻塞，因此您无需担心应用程序会过热。

您的消息循环应如下所示：

```
while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
    }
} 
```

# asp.net-mvc - ASP.NET MVC 3 中的部分视图成员登录和管理员登录

> ID：10168468
> 
> 赞同：1
> 
> 时间：2012-04-16T03:42:06.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-partialview

我基本上是尝试创建两个部分视图，一个用于管理员，一个用于成员。

```
 @Html.Partial("_LogOnPartial1")  |
                @Html.Partial("_LogOnPartial") 
```

这就是 _LogOnPartial1 的代码。

```
@if(Request.IsAuthenticated) {
<text>Welcome <strong>User</strong>!||
@Html.ActionLink("Account", "Index", "") ||
 @Html.ActionLink("Log Off", "LogOff", "Account") </text>}else {
@: @Html.ActionLink("Members", "Index", "Members") } 
```

这就是 _LogOnPartial 的代码。

```
@if(Request.IsAuthenticated) {
<text>Welcome <strong>Administrator</strong>!||
@Html.ActionLink("Account", "Index", "AdminDVD") ||
 @Html.ActionLink("Log Off", "LogOff", "Account") </text>}else {
@: @Html.ActionLink("Admin", "Index", "Admin") } 
```

但是当管理员登录时，他可以看到两个部分视图。我明白了。

**欢迎用户！|| 帐号 || 注销 | 欢迎管理员！|| 帐号 || 注销 |**

任何方式我都可以将管理部分视图与成员部分视图分开

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T06:09:37.387

You could test the roles of the user:

```
@if (User.IsInRole("Administrator"))
{
    @Html.Partial("_LogOnPartial1")
}
else
{
    @Html.Partial("_LogOnPartial")
} 
```

or do this test directly into the partial and thus you could have only one partial.

# asp.net-mvc - 为什么不带参数的POST不返回JSON

> ID：10168469
> 
> 赞同：4
> 
> 时间：2012-04-16T03:42:18.087
> 
> 标签：asp.net-mvc, jquery

我有一个控制器方法

```
[HttpPost]
public ActionResult GetUserData()
{
    return Json(GetCurrentUser());
} 
```

我通过这样的方法调用它 $.ajax() ：

```
ServerCall: function (method, args, callback) {
        $.ajax({
            type: 'POST',
            url: method,
            data: JSON.stringify(args),
            contentType: 'application/json;charset=utf8',
            dataType: 'json',
            success: function (result) {
                if (callback) {
                    callback(result);
                }
            },
            error: function (err) {
            }
        });
    } 
```

电话是：

```
ServerCall('GetUserData', null, function(data){
}); 
```

实际上，当我进行此调用时，$.ajax 成功返回，但“数据”为空。调试，responseText 为空。在服务器端，调用 GetUserData，它返回一个格式正确的 Json 对象（我已经创建了自己的 JSON ActionResult 并验证了数据确实正在写入响应流。

如果我向服务器端方法添加一个虚拟参数：

```
[HttpPost]
public ActionResult GetUserData(string temp)
{
    return Json(GetCurrentUser));
} 
```

一切正常。浏览器是IE8。我的问题是，谁能解释为什么会这样？

更新：

请注意以下解决方法：我仍然有兴趣了解根本原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:18:53.900

我能够在 IE8 中使用 Darin 的代码进行重现。虽然我不知道根本原因，但我认为这与 IE8 JSON.stringify 处理 null 的方式有关。改变

```
data: JSON.stringify(args) 
```

至

```
data: args ? JSON.stringify(args) : null 
```

解决了这个问题。

请注意，问题是间歇性的——我看到每十个电话中就有一个失败。随着变化，超过100次测试，失败率为零。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T06:16:25.027

没有复制。

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult GetUserData()
    {
        return Json(new { foo = "bar" });
    }
} 
```

`Index.cshtml`看法：

```
<script type="text/javascript">
    var serverCall = function (method, args, callback) {
        $.ajax({
            type: 'POST',
            url: method,
            data: JSON.stringify(args),
            contentType: 'application/json;charset=utf8',
            dataType: 'json',
            success: function (result) {
                if (callback) {
                    callback(result);
                }
            },
            error: function (err) {
            }
        });
    };

    serverCall('@Url.Action("GetUserData")', null, function (data) {
        alert(data.foo);
    });
</script> 
```

结果：`'bar'`被警告（如预期的那样）。

# c - 如何使用 malloc 读取 .pgm 文件并分配内存？

> ID：10168474
> 
> 赞同：0
> 
> 时间：2012-04-16T03:43:32.560
> 
> 标签：c, image, malloc, pgm

我是在 linux 环境中编译的新手。无论如何，我有一个 C 源代码，它假设读取一系列 .pgm 图像文件，压缩它们并将压缩文件写入新的 .pgm 文件。但是，当我编译时，我收到以下错误消息

```
*** glibc detected *** ./a.out: free(): invalid pointer: 0x00007fefc6176010 ***  
======= Backtrace: =========  
/lib/x86_64-linux-gnu/libc.so.6(+0x7a6e6)[0x7fefda73b6e6]  
/lib/x86_64-linux-gnu/libc.so.6(cfree+0x6c)[0x7fefda73f9cc]  
./a.out[0x408491]  
./a.out[0x408565]  
./a.out[0x401048]  
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fefda6e230d]  
./a.out[0x400a59]  
======= Memory map: ========    
00400000-0040b000 r-xp 00000000 07:00 299109                             /home/skyjuice/PROJECT3/a.out  
0060a000-0060b000 r--p 0000a000 07:00 299109                             /home/skyjuice/PROJECT3/a.out  
0060b000-0060c000 rw-p 0000b000 07:00 299109                             /home/skyjuice/PROJECT3/a.out  
0060c000-059f8000 rw-p 00000000 00:00 0   
05ebb000-05ee3000 rw-p 00000000 00:00 0                                  [heap]  
7fefc0000000-7fefc0021000 rw-p 00000000 00:00 0   
7fefc0021000-7fefc4000000 ---p 00000000 00:00 0   
7fefc59d3000-7fefc59d4000 rw-p 00000000 00:00 0   
7fefc5f60000-7fefc5f75000 r-xp 00000000 07:00 2117                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fefc5f75000-7fefc6174000 ---p 00015000 07:00 2117                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fefc6174000-7fefc6175000 r--p 00014000 07:00 2117                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fefc6175000-7fefc6176000 rw-p 00015000 07:00 2117                       /lib/x86_64-linux-gnu/libgcc_s.so.1  
7fefc6176000-7fefda6c1000 rw-p 00000000 00:00 0   
7fefda6c1000-7fefda858000 r-xp 00000000 07:00 904195                     /lib/x86_64-linux-gnu/libc-2.13.so  
7fefda858000-7fefdaa57000 ---p 00197000 07:00 904195                     /lib/x86_64-linux-gnu/libc-2.13.so  
7fefdaa57000-7fefdaa5b000 r--p 00196000 07:00 904195                     /lib/x86_64-linux-gnu/libc-2.13.so  
7fefdaa5b000-7fefdaa5c000 rw-p 0019a000 07:00 904195                     /lib/x86_64-linux-gnu/libc-2.13.so  
7fefdaa5c000-7fefdaa62000 rw-p 00000000 00:00 0   
7fefdaa62000-7fefdaae5000 r-xp 00000000 07:00 904199                     /lib/x86_64-linux-gnu/libm-2.13.so  
7fefdaae5000-7fefdace4000 ---p 00083000 07:00 904199                     /lib/x86_64-linux-gnu/libm-2.13.so  
7fefdace4000-7fefdace5000 r--p 00082000 07:00 904199                     /lib/x86_64-linux-gnu/libm-2.13.so  
7fefdace5000-7fefdace6000 rw-p 00083000 07:00 904199                     /lib/x86_64-linux-gnu/libm-2.13.so  
7fefdace6000-7fefdad07000 r-xp 00000000 07:00 644102                     /lib/x86_64-linux-gnu/ld-2.13.so  
7fefdaeeb000-7fefdaeee000 rw-p 00000000 00:00 0   
7fefdaf04000-7fefdaf06000 rw-p 00000000 00:00 0   
7fefdaf06000-7fefdaf07000 r--p 00020000 07:00 644102                     /lib/x86_64-linux-gnu/ld-2.13.so  
7fefdaf07000-7fefdaf09000 rw-p 00021000 07:00 644102                     /lib/x86_64-linux-gnu/ld-2.13.so  
7fff1b020000-7fff1b0ca000 rw-p 00000000 00:00 0                          [stack]  
7fff1b148000-7fff1b149000 r-xp 00000000 00:00 0                          [vdso]  
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]  
Aborted 
```

下面是源代码的片段

#define START_FRAME 141 #define END_FRAME 143 #define SKIP_FRAME 1 #define INPUT_STRING "/home/image%03d.pgm"

```
int main(int argv, char *argc[])
{

  unsigned char *frm1, *frm2, *predict, *predictDb, *frm1E;    
  unsigned char *rcnDiff, *diff, *rcnFrm1, *rcnFrm2, *wave;  
  int           *xVct, *yVct, *pxE, *pyE, *code;  
  int   nx  = 1920, ny = 1080, nxy;  
  int   bSize  = 16, nbx, nby, nbxy;
  int   frameNo = START_FRAME;  
  int   nxy  = nx * ny;

  frm1       = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  frm2       = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  rcnFrm1    = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  rcnFrm2    = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  predict    = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  predictDb  = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  diff       = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  rcnDiff    = (unsigned char *) malloc(sizeof(unsigned char) * nxy);  
  wave       = (unsigned char *) malloc(sizeof(unsigned char) * nxy);    
  xVct       = (int *) malloc(sizeof(int) * nbxy);  
  yVct       = (int *) malloc(sizeof(int) * nbxy);  

  code       = (int *) malloc(sizeof(int) * tgtBits1);    
  frm1d      = (double *) malloc(sizeof(double) * nxy);  
  frm2d      = (double *) malloc(sizeof(double) * nxy);  
  predictd   = (double *) malloc(sizeof(double) * nxy);  
  predictDbd = (double *) malloc(sizeof(double) * nxy);  
  rcnFrm1d   = (double *) malloc(sizeof(double) * nxy);  
  rcnFrm2d   = (double *) malloc(sizeof(double) * nxy);  
  wavFrm1    = (double *) malloc(sizeof(double) * nxy);  
  wavDiff    = (double *) malloc(sizeof(double) * nxy);  
  wavRcnFrm1 = (double *) malloc(sizeof(double) * nxy);  
  wavRcnDiff = (double *) malloc(sizeof(double) * nxy);  
  diffd      = (double *) malloc(sizeof(double) * nxy);  
  rcnDiffd   = (double *) malloc(sizeof(double) * nxy);  

  frm1Ed     = (double *) malloc(sizeof(double) * nxE * nyE);  
  frm1E      = (unsigned char *) malloc(sizeof(unsigned char) * nxE * nyE);

  //read file from PGM and store into frm1  
  frameNo = START_FRAME;  
  sprintf(fileName, INPUT_STRING, frameNo);  
  readPgm(frm1, fileName, nx, ny);  

  //after some operations

  //write into a new PGM file  
   sprintf(fileName, "predictDb%03d.pgm", frameNo);  
   writePgm(predictDb, fileName, nx, ny);  

  return 0; //end of main function   
}  

//read original frame  
void readPgm(unsigned char *frame, char * fileName, int nx, int ny) {  
  int i, j;  
  FILE *file;  
  char str[128];  

  file = fopen(fileName,"r");  
  if (file == 0) {  
    printf("Open error in File read \n");  
      }  
  fgets(str, 100, file);  
  for(j = 0; j < ny; j++) {  
      for(i = 0; i < nx; i++) {  
    fscanf(file,"%d", (int *)&frame[i + nx * j]);  
      }  
  }  
  fclose(file);  
}  

//create frame  
void writePgm(unsigned char *frame, char *fileName, int nx, int ny){  
  int i, j;  
  FILE *file;  

  file = fopen(fileName, "w");  
  fprintf(file, "P2 %d %d 255\n", nx, ny);  
  for(j = 0; j < ny; j++) {  
    for(i = 0; i < nx; i++) {  
      fprintf(file,"%d ", frame[i + nx * j]);  
    }  
    fprintf(file, "\n");  
  }  
  fclose(file);  
} 
```

任何人都可以帮助确定问题所在吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:58:23.150

您永远不会初始化`nxy`您在调用中使用的大多数其他变量`malloc()`。然后这些变量可以包含随机值，您将不会分配正确的内存量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:59:28.107

这段代码

```
int   /* ... */, nxy;   
frm1  = (unsigned char *) malloc(sizeof(unsigned char) * nxy); 
```

意味着您根据未初始化的值 ( `nxy`) 分配内存，它可以是任何东西（无论内存中`nxy`分配的垃圾是什么。

然后你将这个未知长度的缓冲区传递给

```
readPgm(frm1, fileName, nx, ny); 
```

并尝试访问`frame[i + nx * j]`

如果`nxy`小于`nx*ny`，则通过写入分配的空间来破坏内存。

要修复，请确保正确初始化所有变量。例如：

```
int nxy = nx*ny; 
```

另外，请参阅[this SO question](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc) on why you should not cast the return value of `malloc`-- `void *`（的返回类型`malloc`）将隐式转换为正确的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:54:23.527

这似乎不是特定于 Linux 的——C 代码应该可以在任何环境中工作，甚至是 Windows。

`gcc -g`使用（或什至）编译`gcc -ggdb`以获取该错误回溯中的行号（并使用 gdb 进行更轻松的调试）。

我看不到你在哪里调用 free() 来释放你使用 malloc() 分配的内存。如果不这样做，则在进程退出时释放内存。我怀疑你有一个错误的溢出到包含指针的内存中，并用垃圾覆盖指针中的地址。然后，当您尝试释放从该“地址”开始的一块内存时，操作将失败。使用调试信息进行编译，在 gdb ( `gdb --args ./myprogram arg1 arg2`, `start`, `next`, `step`, `continue`) 中运行程序并查看问题出现在哪里。为了帮助调试内存问题（如缓冲区外的写入），请使用 valgrind。

# java - javac：不是目录：src\com\example\web\BeerSelect.java

> ID：10168475
> 
> 赞同：2
> 
> 时间：2012-04-16T03:43:46.773
> 
> 标签：java

我在 Headfirst Servlets and JSP 的第 3 章。

这是我对 Windows 7 命令行的输入：

> D:\Workspaces\ServletsJSP\MyProjects\beerV1>javac -classpath C:\Tomcat\tomcat\lib\servlet-api.jar;classes;。-d src\com\example\web\BeerSelect.java

这是错误消息：

```
javac: not a directory: src\com\example\web\BeerSelect.java
Usage: javac <options> <source files>
use -help for a list of possible options 
```

我`BeerSelect.java`在这个目录中有：`D:\Workspaces\ServletsJSP\MyProjects\beerV1\src\com\example\web`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T03:47:25.603

该`-d`标志用于指定输出到哪个目录。你似乎省略了它的参数，所以它认为你想输出到一个名为 的目录`src\com\example\web\BeerSelect.java`，这当然不是一个目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T04:29:40.890

您尚未指定`-d`标志的目录。这个标志用于指定类文件应该放在哪里。您可能希望将命令更改为以下内容：

`D:\Workspaces\ServletsJSP\MyProjects\beerV1>javac -classpath C:\Tomcat\tomcat\lib\servlet-api.jar;classes;. -d bin src\com\example\web\BeerSelect.java`

假设 bin 是你想要你的类文件的地方。

# javascript - Node.js 在 new 上附加事件处理程序

> ID：10168477
> 
> 赞同：0
> 
> 时间：2012-04-16T03:44:10.767
> 
> 标签：javascript, node.js, events, event-handling, eventemitter

在基于 Node.js 的项目中，我有几个对象：

*   `EmitterA`
*   `EmitterB`
*   `Consumer`

在`Consumer`的构造函数中，我有以下内容：

```
var a = new EmitterA();
a.on('someEvent', someEventHandler); 
```

在`EmitterA`的构造函数中，我有以下内容：

```
var self = this;
var b = new EmitterB();
b.on('someEventFromB', function() {
    self.emit('someEvent');
}); 
```

最后，在`EmitterB`的构造函数中，我有这样的东西：

```
this.emit('someEventFromB'); 
```

问题是`Consumer`'s`someEventHandler()`在初始`.emit()`from`EmitterB`被触发时不会被触发。原因之一是时机。 直到事件被触发**后才**`Consumer`订阅`someEvent`。`EmitterA`

 ****有没有办法在构建时附加事件处理程序？** 我已经考虑过使用[`newListener`event](http://nodejs.org/api/events.html#events_event_newlistener)，但是在以后使用多个侦听器以及将触发许多不同类型的事件的情况下，这将是一个问题。如果可能，我想避免这条路线，并正在寻找您可能建议的替代方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:53:20.883

尝试类似：

```
var a = new EmitterA({
    events : {
        someEvent : someEventHandler
    }
});

function EmitterA( props ){
    props || ( props = {} );

    if( props.events ){
        for( var n in props.events ){
            this.on( n, props.events[n] );
        }
    }

    // the rest of the constructor code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:55:56.380

我只是想到了一种适用于我的具体情况的替代方法，但对其他人来说可能会有问题。请与一粒盐一起使用。

在`EmitterB`的构造函数中，我改为`this.emit('someEventFromB');`：

```
process.nextTick(function() {
    this.emit('someEventFromB');
} 
```

另见： [http ://howtonode.org/understanding-process-next-tick](http://howtonode.org/understanding-process-next-tick)**

# java - 如何在不将其作为字段包含的情况下使项目中的所有类都可以使用对象？

> ID：10168483
> 
> 赞同：4
> 
> 时间：2012-04-16T03:44:46.073
> 
> 标签：java, design-patterns

我正在用 Java 制作一个文本冒险引擎，为了节省内存，我有一个数据库对象，它保存所有当前从 XML 文档中抓取的项目。我想从几个不同的类中使用它。我怎样才能将它提供给我的班级？目前，我正在使用带有适当 mutator 方法的空静态字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T03:45:45.947

[为此使用单例](http://en.wikipedia.org/wiki/Singleton_pattern)可能很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T04:14:23.337

您可以使用枚举类型。Joshua Bloch 在他的 Efective Java 一书中说：*单元素枚举类型是实现单例的最佳方式*。

```
public enum Elvis {
    INSTANCE;
    public void leaveTheBuilding() { ... }
} 
```

# sql - 有效查询包含子字符串的列

> ID：10168486
> 
> 赞同：2
> 
> 时间：2012-04-16T03:45:45.493
> 
> 标签：sql, postgresql, indexing

给定一个值类似于 的字符串列`/123/12/34/56/5/`，查询**包含给定数字**（`12`例如）的所有记录的最佳方法是什么？

我头脑中的解决方案是：

`SELECT id FROM things WHERE things.path LIKE '%/12/%'`

但是 AFAIK 由于前导，此查询不能在列上使用索引`%`。

一定有更好的东西。它是什么？

使用 PostgreSQL，但*更喜欢*适用于其他数据库的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:59:42.047

如果您愿意将该列转换为整数数组，例如：

```
'/123/12/34/56/5/' becomes ARRAY[123,12,34,56,5] 
```

这`path_arr`是一个 type 的列`INTEGER[]`，那么您可以在该列上创建一个 GIN 索引：

```
CREATE INDEX ON things USING gin(path_arr); 
```

包含 12 的所有项目的查询然后变为：

```
SELECT * FROM things WHERE ARRAY[12] <@ path_arr; 
```

这将使用索引。在我的测试中（有一百万行），我得到如下计划：

```
EXPLAIN SELECT * FROM things WHERE ARRAY[12]  <@ path_arr;
                                      QUERY PLAN
----------------------------------------------------------------------------------------
 Bitmap Heap Scan on things  (cost=5915.75..9216.99 rows=1000 width=92)
   Recheck Cond: (path_arr <@ '{12}'::integer[])
   ->  Bitmap Index Scan on things_path_arr_idx  (cost=0.00..5915.50 rows=1000 width=0)
         Index Cond: ('{12}'::integer[] <@ path_arr)
(4 rows) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T03:57:39.397

在 PostgreSQL 9.1 中，您可以使用该[`pg_trgm`模块](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)并使用它构建 GIN 索引。

```
CREATE EXTENSION pg_trgm; -- once per database

CREATE INDEX things_path_trgm_gin_idx ON things USING gin (path gin_trgm_ops); 
```

`LIKE`即使不是左锚，您的表达式也可以使用此索引。

[请在此处查看 depesz](http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/)的详细演示。

但是，如果*可以*，请对其进行规范化。

# r - 求解未知的积分上限

> ID：10168490
> 
> 赞同：3
> 
> 时间：2012-04-16T03:46:15.540
> 
> 标签：r, integral, equation-solving

我正在尝试实现一种算法，`R`其中涉及求解积分的边界限制。例如，我想找到`a`以下积分：

`integral_0^a exp(x) = 1/2`

我有一个粗略的想法如何做到这一点`matlab`。但是如何解决这个问题`R`呢？

感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T03:59:06.267

您可以使用`integrate`计算积分（数值）和`uniroot`求解方程（数值）。

```
f <- function(a) integrate( exp, 0, a )$value - 1/2
uniroot( f, c(-1, 1) ) # Look for a solution in [-1,1]
log(3/2) # Compare with the exact solution 
```

# jquery - ajax'脚本'数据类型不起作用？

> ID：10168498
> 
> 赞同：0
> 
> 时间：2012-04-16T03:47:06.100
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, ruby-on-rails-3

我正在尝试将此功能用于无限滚动：

```
<script type="text/javascript" charset="utf-8">
(function() {
  var page = 1,
      loading = false;

  function nearBottomOfPage() {
    return $(window).scrollTop() > $(document).height() - $(window).height() - 200;
  }

  $(window).scroll(function(){
    if (loading) {
      return;
    }

    if(nearBottomOfPage()) {
      loading = true;
      page++;
      $.ajax({
        url: '/paginate?page=' + page,
        type: 'get',
        dataType: 'script',
        success: function(data) {
          $(".res-list").append(data.responseText);
          $(window).sausage('draw');
          loading = false;
        }
      });
    }
  });

  $(window).sausage();
}());
</script> 
```

问题是它没有将数据附加到无序列表中，即使`http://localhost:3000/paginate?format=js&page=2`效果很好。

如果我将 console.log 放在下面写着：`if(nearBottomOfPage()) {`它会触发，所以我知道该功能工作正常。但是，如果我将 console.log 放入成功：对于 ajax 函数，它永远不会触发....更进一步，如果我通过控制台运行 ajax 命令，它会返回我在“responseText”中需要的内容，成功代码为 200 ...所以我不知道为什么它会在我手动执行时成功返回 200 时在控制台日志中触发成功消息。

这是控制器

```
 def paginate
    @resources = Resource.order(:created_at).page(params[:page]).per(20)

    respond_to do |format|
      format.js
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:07:13.270

我使用了以下代码：

```
$.ajax({ 
  url: '/paginate?format=js&page=' + page, 
  type: 'get', 
  dataType: 'text', 
  success: function(data) { 
    $(".res-list").append(data); 
    loading = false; 
  } 
}); 
```

# python - 在 Python 中计算日期

> ID：10168501
> 
> 赞同：3
> 
> 时间：2012-04-16T03:48:09.090
> 
> 标签：python, date, calendar

我正在尝试使用 Python 计算从 1950 年到 2050 年每年 13 日星期五的数量（我知道，有点晚了）。我不熟悉要使用的任何日期/日历包。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T04:19:30.083

这有一个直接的解决方案。使用*sum*计算每月 13 日是星期五的次数：

```
>>> from datetime import datetime # the function datetime from module datetime
>>> sum(datetime(year, month, 13).weekday() == 4 
        for year in range(1950, 2051) for month in range(1,13))
174 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T03:59:13.823

datetime.date 类有一个`weekday()`函数，可以将星期几（从 0 开始索引）作为整数提供，所以 Friday 是 4。还有`isoweekday()`从 1 开始的索引天数，这取决于你喜欢哪个。

无论如何，一个简单的解决方案是：

```
friday13 = 0
months = range(1,13)
for year in xrange(1950, 2051):
    for month in months:
        if date(year, month, 13).weekday() == 4:
            friday13 += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:54:40.787

是某种运动还是家庭作业？我隐约记得我已经解决了它。可以给个提示，我好像用过[Calendar.itermonthdays2](http://docs.python.org/library/calendar.html#calendar.Calendar.itermonthdays2)当然应该还有其他的方法可以解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T03:58:59.380

听起来像家庭作业。提示（工作日 4 是星期五）：

```
import datetime
print(datetime.datetime(1950,1,13).weekday()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T05:09:34.990

虽然其他解决方案清晰简单，但以下解决方案更“日历主义”。您将需要该`dateutil`软件包，该软件包可作为软件包安装：

```
from datetime import datetime
from dateutil import rrule

fr13s = list(rrule.rrule(rrule.DAILY,
                         dtstart=datetime(1950,1,13),
                         until=datetime(2050,12,13),
                         bymonthday=[13],
                         byweekday=[rrule.FR]))
# this returns a list of 174 datetime objects 
```

您会看到以下五个参数：取13 和（星期五）之间的`rrule.rrule`每一`rrule.DAILY`（天）。`dtstart``until``bymonthday``byweekday``rrule.FR`

# windows-runtime - 获取当前用户的 WinRT 唯一 ID

> ID：10168502
> 
> 赞同：4
> 
> 时间：2012-04-16T03:48:14.287
> 
> 标签：windows-runtime

我知道用于检索名字和姓氏的[Windows.System.UserProfile.UserInformation类。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.userprofile.userinformation.aspx)是否有 API 可以检索当前登录用户的持久 ID？我想漫游某些用户设置，但我不希望用户在他们已经登录到他们的操作系统后登录到我的应用程序。

我所需要的只是用户的 Windows Live 帐户唯一的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:19:24.080

这真的取决于你想做什么。如果您不希望用户得分漫游，那么为什么不在第一次加载时添加一个 guid 来识别用户/设备组合并将其返回给服务器呢？

这也意味着您没有在服务器上存储用户可能不期望的个人身份信息。

# php - jquery ajax文件上传

> ID：10168505
> 
> 赞同：2
> 
> 时间：2012-04-16T03:48:37.923
> 
> 标签：php, ajax, jquery, jquery-plugins

嘿伙计们，我正在尝试在我的网站上实现文件上传而不刷新页面。**我不想要像 iFrame 这样**的东西在 ajax 中有没有其他方法可以做到这一点？我试过了（使用 Codeigniter & ajax 但它输出“你没有上传任何东西”）。我已经阅读了类似**[这样](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)**的某些页面，但我似乎无法正确实施它。有什么建议吗？我阅读了使用 jquery ajax 发布的几乎所有建议，但它们都不好。我只想要纯 jquery ajax 没有别的。

如果不可能，iframe 可以，请分享一些示例。:)

注意：这仅适用于一次上传一个。没有倍数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T03:54:16.917

我不会从头开始重新发明整个事物，而是使用其中一个文件上传组件。

1.  [Plupload](http://www.plupload.com/) - 具有 UI，与 jQuery 很好地集成。根据浏览器可以使用 HTML5、Flash、Silverlight 或 HTML4
2.  [上传](http://swfupload.org/)
3.  [上传](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:50:47.833

没有 AJAX 文件上传。在文件上传方面，它的所有 iFrame 都在幕后。您提供的示例链接没有任何魔力，但它使用隐藏的 iFrame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T03:54:44.500

可以在这里找到很多答案：[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)

这个问题可能与上述重复

参考：“在 jquery 上进行文件上传有各种现成的插件。

进行这种上传技巧并不是一种愉快的体验，因此人们喜欢使用现成的解决方案。

这里有几个： [http ://www.phpletter.com/Demo/AjaxFileUpload-Demo](http://www.phpletter.com/Demo/AjaxFileUpload-Demo)

[http://www.fyneworks.com/jquery/multiple-file-upload](http://www.fyneworks.com/jquery/multiple-file-upload)

Ajax 文件上传插件 多文件上传插件 您可以从 jquery 的插件站点中搜索更多。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T04:16:16.370

从纯 ajax 是不可能的，您可以使用这个[ajax 表单](http://jquery.malsup.com/form/)插件，它将处理所有事情（为输入类型文件自动创建 iframe）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T06:23:33.213

过去我为一个项目尝试了很多很多插件，我得出的结论是我不喜欢它们。好吧，除了这个：[jQuery-file-upload](https://github.com/blueimp/jQuery-File-Upload) 根据我的经验，这很容易成为处理文件上传的最佳插件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-16T03:53:46.030

据我所知，必须有一种服务器端编程语言，例如 php。试试这个。 [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

# php - 在js上调用php

> ID：10168507
> 
> 赞同：1
> 
> 时间：2012-04-16T03:49:26.663
> 
> 标签：php, javascript

> **可能重复：**
> [从 javascript 调用 php 函数](https://stackoverflow.com/questions/7165395/call-php-function-from-javascript)

谁能帮助我如何在 JS 函数上调用 php 函数？

这是事件：

在项目选择框上选择时，我有 2 个选择框（例如项目和任务），任务选择框将被填充。填充在任务选择框中的值在我的 PHP DAO 中。

这是我的javascript，但它不起作用，但我的想法是这样的

```
function getProjTask()
{
    var taskList = <?php $projTask->getProjectTask("ProjectName");  ?>

    //values for task selection box has been populated here

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T03:53:58.043

为此，您需要使用[AJAX](http://en.wikipedia.org/wiki/AJAX)。这可以使用普通的旧 javascript 或您最喜欢的库来完成。使用库会容易得多。我自己倾向于使用[YUI](http://yuilibrary.com/)。

你需要做的很简单：

1.  听取项目选择框的更改。
2.  发生更改时，使用 AJAX 向您的 PHP 端点发送请求。
3.  然后，您的端点会返回一个 JSON 响应，其中包含任务选择框的值。
4.  使用 javascript 解码 JSON 响应并`<option>`为您的任务选择框创建元素。

一个简单的例子：

PHP端：

```
<?php

$list = array('list' => array('task1' => 1, 'task2' => 2));

header('Content-Type: application/json; charset=utf-8');
echo json_encode($list);

exit(); 
```

JS 端（我使用的是 YUI，这仅适用于 AJAX，您仍然需要编写代码来监听选择框的变化）：

```
<script>
// Create a YUI instance using io-base module.
YUI().use("io-base", function(Y) {
    var uri = "get.php?foo=bar";

    // Define a function to handle the response data.
    function complete(id, o) {
        var data = Y.JSON.parse(o.responseText);

        //Parse the JSON, loop and insert the options here.
    };

    // Subscribe to event "io:complete"
    Y.on('io:complete', complete);

    // Make the request
    Y.io('http://mysite.com/myendpoint.php');
});
<script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T03:55:37.573

要么使用 ajax 动态地发出请求。如果您只是希望名称的值出现在该函数中，那么错误将是因为您没有引号（并且它是一个字符串）

```
function getProjTask()
{
    var taskList = '<?php $projTask->getProjectTask("ProjectName");  ?>';

    //values for task selection box has been populated here

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T04:04:58.053

也许你会发现这很有用。为此，您需要 AJAX。jQuery 对我来说是最简单的方法，但如果你想通过 php 使用 ajax，请尝试[http://www.xajaxproject.org/](http://www.xajaxproject.org/)

我的一个朋友一直在使用它，对他来说效果很好。我更喜欢 js 和 jquery

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-16T05:13:40.097

如果您不介意学习一门新语言，您可以使用[haxe](http://haxe.org "网站")。它是一种跨平台语言。您可以使用 haxe 为 js 和 php 开发，并使用 haxe 本身（haxe remoting）将它们链接在一起。

# wcf - Silverlight wcf 连接错误

> ID：10168516
> 
> 赞同：1
> 
> 时间：2012-04-16T03:52:00.830
> 
> 标签：wcf, silverlight, cross-domain, clientaccesspolicy.xml

我还有大约一个月的时间来开发我的 Silverlight 应用程序（这是我的第一个）。直到今天，一切都很顺利，当我突然收到这条消息时：

> 尝试向 URI 'http://localhost:2682/Services/Authentication/LoginService.svc' 发出请求时出错。这可能是由于在没有适当的跨域策略或不适合 SOAP 服务的策略的情况下尝试以跨域方式访问服务。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。此错误也可能是由于在 Web 服务代理中使用内部类型而不使用 InternalsVisibleToAttribute 属性造成的。有关更多详细信息，请参阅内部异常。

我正在使用 WCF 服务，直到现在这个问题才出现。我在我的 [projectname].web 文件夹中添加了一个 clientdomain.xml 和 clientaccesspolicy.xml 文件，并以 1000 种不同的方式重新编写了它们。我也使用过 Fiddler，它告诉我这两个文件都有错误，错误是

> [Fiddler] 到 localhost 的套接字连接失败。
> 错误代码：10061
> 。无法建立连接，因为目标机器主动拒绝它 127.0.0.1:2682

我搜索了错误“10061”，它与套接字定义有关。但我找不到任何解决方案。

不知道和它有没有关系，但是我的“ASP.net开发服务器”端口是6939。

请记住，该应用程序尚未部署，因此这只发生在本地。我正在使用 MS VS 2010 和 MS SQL Server 2008。

我做错了什么还是这是一个silverlight问题？

最后一点，我没有更改端口、套接字或服务配置的任何内容。我做的最后一件事是在客户端编辑一个 XAML 文件，然后应用程序开始向我抛出这个错误。

需要帮助，在解决之前不能做任何事情！！！！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:51:41.217

我认为您正在本地主机上使用您的应用程序，并且分配了一个动态端口，并且该端口不是固定的，每次运行都会导致拒绝问题。如果你想解决这个问题，例如创建一个可靠的 url，

`http://localhost/apps/Services/Authentication/LoginService.svc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:14:45.407

好吧，昨晚，就在我上床睡觉之前，我注意到了一些奇怪的事情。在我的“ServiceReferences.ClientConfig”文件中，我的每个服务的端点端口都与 silverlight 机器使用的不同，所以我有预感（并且因为我达到了我的理智断点）我决定消除我的所有服务引用并重新添加它们。

我工作了……去想想。仍然不知道为什么会发生这种情况，如果有人能对这个问题有所了解，我将不胜感激。不得不重新添加我所有的服务引用有点烦人。现在我只有6个，但在不久的将来可能会超过20个，如果再次发生这种情况......好吧，这将是一个真正的痛苦......

谢谢

# asp.net - 果园 CMS 高级主题

> ID：10168517
> 
> 赞同：7
> 
> 时间：2012-04-16T03:52:32.740
> 
> 标签：asp.net, orchardcms

我计划使用 Orchard CMS 作为几个网站的基础，并希望有广泛的主题选择。画廊里的那些还不错，但我想要一些不同的东西。你能告诉我有什么地方可以买到任何主题和小部件/模块吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T21:52:42.517

[我认为Bind.pt](http://bind.pt)有一些非常好的模板。它们还允许您设计/更改页面上的模板，然后简单地订购它 - 价格非常有竞争力。

将包发送给您，您可以上传它，或者如果您选择解压缩并进一步自定义它。

希望这可以帮助

# android - 如何为 Spinner 实现 MatrixCursor？

> ID：10168530
> 
> 赞同：1
> 
> 时间：2012-04-16T03:54:28.137
> 
> 标签：android, spinner, matrixcursor

我有一个`SQLite`返回`Cursor`. 我想`Cursor`通过实现 a来添加一些额外的行`MatrixCursor`（以尝试在单击时自动选择第一项真实数据）。然后我想将它们映射到`SimpleCursorAdapter`. 我一直在阅读帖子（和代码），但我仍然不清楚如何将其编码为下面列出的现有代码。

```
 Cursor cursor = myDB.query(DATABASE_TABLE_NAME, resultColumns, whereClause,
            whereArgs, null, null, null, null);

    // Create Spinner View object from layout resource
    Spinner spinner = (Spinner) findViewById(R.id.spinner);

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, // Use a template
                                                  // that displays a
                                                  // text view
            cursor, // Give the cursor to the adapter
            new String[] {"ename"}, // Map the NAME column in the
                                                 // people database to...
            new int[] {android.R.id.text1}); 

    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T07:55:52.583

如果你想`MatrixCursor`从一个简单的构建一个`Cursor`你必须解析整个初始`Cursor`并附加你想要的行：

```
//...
    MatrixCursor mc = new MatrixCursor(resultColumns);
    // add extra rows, this will probably not work if you want to insert them
    // between the initial cursor rows because of the _id column that need autoincrement values
    mc.addRow(new Object[] { new Long(-2), "Extra name1" }); 
    mc.addRow(new Object[] { new Long(-1), "Extra name2" });
    // I don't know what your cursor holds, I assumed you have the _id column(long value)
    // and a name(String value)
    int size = cursor.getCount();
    for (int i = 0; i < size; i++) {
        cursor.moveToPosition(i);
            mc.addRow(new Object[] {
            cursor.getLong(cursor.getColumnIndex(/*the _id column*/)),
            cursor.getString(cursor.getColumnIndex(/* the name column(ename?!?)*/)) });
    }
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, mc, new String[] {"ename"}, new int[] {android.R.id.text1}); 
//... 
```

如果您这样做只是为了避免在显示`OnItemSelectedListener`时触发`Spinner`，也许您可​​以采用另一种方法。例如在你的听众中：

```
 //boolean status = true; flag in MyOnItemSelectedListener

    @Override
    public void onItemSelected(AdapterView<?> parent, View view,
            int position, long id) {
        if (status) {
            status = false;// this is the first listener trigger so you probably want to ignore it
            return;
        }
        // do stuff here
    } 
```

Note: I don't know how good is the above solution. If you look there are probably much better solution to this `Spinner` related issue.

# jquery-mobile - jQueryMobile页面更改时如何调用数据

> ID：10168533
> 
> 赞同：1
> 
> 时间：2012-04-16T03:54:54.320
> 
> 标签：jquery-mobile

我通过 jQueryMobile 构建了一个基于浏览器的应用程序并面临一个问题：现在我有一个包含多个“data-role=page”部分的 HTML，一旦激活，每个部分都会调用后端来抓取内容。

```
$('body').bind('pagechange',function(event){
    //grab content base on page id here, working!!!
}); 
```

但是，如果用户通过按浏览器上的“刷新”按钮重新加载页面，我如何检测和调用后端页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:18:50.170

使用 pageshow 事件。像这样的东西：

```
$("[data-role=page]").live('pageshow',function(event, ui){
    var myId = $.mobile.activePage.attr('id');
    // do something
}); 
```

# ruby-on-rails - Rails RABL respond_with 错误模板

> ID：10168536
> 
> 赞同：2
> 
> 时间：2012-04-16T03:55:19.500
> 
> 标签：ruby-on-rails, rabl

在 Rails 3.2.x 中使用 RABL，给定以下控制器操作：

```
respond_to :html, :json

def create
  @foo = Foo.create(params[:foo])
  respond_with @foo
end 
```

假设验证失败，您如何让 respond_with 使用 RABL 模板而不是标准 JSON 错误散列 - IE。除了与请求一起发回的验证错误消息之外，我还想要其他模型属性。

建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-14T21:03:11.447

我很难找到这个。您应该为您的应用程序控制器创建一个自定义响应器，或者至少为您的个人响应创建一个自定义响应器。有关更多详细信息，请参阅[喜欢 ActionController::Responder](http://weblog.rubyonrails.org/2009/8/31/three-reasons-love-responder/)的三个理由。

我的解决方案：

```
# app/responders/api_responder.rb
class ApiResponder < ActionController::Responder
  def to_format
    case
    when has_errors?
      controller.response.status = :unprocessable_entity
    when post?
      controller.response.status = :created
    end

    default_render
  rescue ActionView::MissingTemplate => e
    api_behavior(e)
  end
end

# app/controllers/application_controller.rb
class ApplicationController < ActionController::Base
  #...
  self.responder = ApiResponder
  #...
end 
```

你也可以`respond_with @foo, responder: ApiResponder`改用。

感谢[haxney](https://github.com/haxney)让我朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T11:12:59.013

我想，您需要删除控制器顶部的 respond_to 调用，并删除 action 中的 respond_with 调用以获取 rabl 渲染您的 rabl 模板。

只需在不需要 RABL 的每个操作的末尾添加一个 respond_to 块。

# ruby-on-rails - Hartl Rails 教程的 Rspec 失败

> ID：10168538
> 
> 赞同：1
> 
> 时间：2012-04-16T03:55:46.340
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

我今天早些时候正在处理这个问题，一切似乎都很好，但是我有一段时间没有运行 rspec，现在我遇到了很多失败。

RSpec 结果（我擦掉了我的真实姓名和电子邮件）：

```
Failures:

*deleted, see update below*

7) UsersController GET 'index' for signed-in users should paginate users
 Failure/Error: response.should have_selector("a", :href => "/users?escape=false&amp;poge=2", :content => "2")
   expected following output to contain a <a href='/users?escape=false&amp;poge=2'>2</a> tag:
   <!DOCTYPE html>
   <html>
   <head>
   <title>Ruby on Rails Tutorial Sample App | All users</title>
   <!--[if lt IE 9]>
   <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
   <![endif]--><link href="/stylesheets/blueprint/screen.css" media="screen" rel="stylesheet" type="text/css">
   <link href="/stylesheets/blueprint/print.css" media="print" rel="stylesheet" type="text/css">
   <!--[if lt IE 8]><link href="/stylesheets/blueprint/ie.css" media="screen" rel="stylesheet" type="text/css" /><![endif]--><link href="/stylesheets/custom.css?1334507400" media="screen" rel="stylesheet" type="text/css">
   </head>
   <body>
        <div class="container">
            <header><a href="/"><img alt="Sample App" class="round" src="/images/logo.png?1333923366"></a>
                <nav class="round"><ul>
   <li><a href="/">Home</a></li>
                            <li><a href="/users">Users</a></li>
                            <li><a href="/users/1">Profile</a></li>
                            <li><a href="/users/1/edit">Settings</a></li>
                        <li><a href="/help">Help</a></li>
                            <li><a href="/signout" data-method="delete" rel="nofollow">Sign out</a></li>
                    </ul></nav></header><section class="round"><h1>All users</h1>
   <div class="pagination">
   <span class="previous_page disabled">&larr; Previous</span> <em>1</em> <a rel="next" href="/users?escape=false&amp;page=2">2</a> <a class="next_page" rel="next" href="/users?escape=false&amp;page=2">Next &rarr;</a>
   </div>
   <ul class="users">
   <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/85fb99e31535fbc371865ca9468eae1c?size=30"><a href="/users/1">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/86a7c65390f83bdee8c4455af823b7cb?size=30"><a href="/users/2">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/dd5bff939e78bbc5051efa1a3ff1dcb0?size=30"><a href="/users/3">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/e44c38aa36bffeebb9f59e50de846fb4?size=30"><a href="/users/4">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/125d2f777f0f266ff3fc5e9f79b9b8b7?size=30"><a href="/users/5">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/95a3c1df8f70d065d5f6fe9c799840a9?size=30"><a href="/users/6">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/f41b2a4e646e19853a4396c2d166a078?size=30"><a href="/users/7">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/d31f91433afe441f0cf6ebc9a22aef8d?size=30"><a href="/users/8">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/bb03861fb1123b3afd7e1bb29e9d0b05?size=30"><a href="/users/9">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/c8267a1927445fe261d40a47f53b2ea6?size=30"><a href="/users/10">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/2348e595e0b2331a9d06ed74b309f152?size=30"><a href="/users/11">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/860b2e5e342f55faf0b414f36ab0c948?size=30"><a href="/users/12">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/f4fc0e00abd378811cfa8140be1e1158?size=30"><a href="/users/13">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/fbaf3882d8b938d6e492b7c62a18d3d0?size=30"><a href="/users/14">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/e8c8e9d0376915d55a57fac08ba6e326?size=30"><a href="/users/15">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/65bbf2cc13ab660f9cc879a1308c8a5b?size=30"><a href="/users/16">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/dc892e842ff1fcc90f2e12e111905c70?size=30"><a href="/users/17">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/350c624f4c471c0ea94fe24b3d02fded?size=30"><a href="/users/18">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/4fac89057e3505e044fb8447ab49b0f0?size=30"><a href="/users/19">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/4847c604feadda0992a7be0ed8e000c1?size=30"><a href="/users/20">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/6063db6f5c1108362c76c5a8cd26f046?size=30"><a href="/users/21">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/e4ea822898dad699a636c7efa0418be8?size=30"><a href="/users/22">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/b0be0aebe8cd5972efda62e20e3921ea?size=30"><a href="/users/23">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/3c51b46ac624056903eeae03e52b0c26?size=30"><a href="/users/24">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/40dcd4dfe68e90cf43e34d3f07e5abd0?size=30"><a href="/users/25">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/577e997028169041902deacb43614df2?size=30"><a href="/users/26">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/811db3fdda06d362216f68a0980ee11d?size=30"><a href="/users/27">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/b4c3b9d853242df89ab17ec671c4afe2?size=30"><a href="/users/28">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/49a89d651bd578d6f3646d344c6ad096?size=30"><a href="/users/29">myname</a>
        </li>
        <li>
            <img alt="myname" class="gravatar" src="http://gravatar.com/avatar/044d71640c5ed3504e65bb8f3bb2576c?size=30"><a href="/users/30">myname</a>
        </li>
   </ul>
   <div class="pagination">
   <span class="previous_page disabled">&larr; Previous</span> <em>1</em> <a rel="next" href="/users?escape=false&amp;page=2">2</a> <a class="next_page" rel="next" href="/users?escape=false&amp;page=2">Next &rarr;</a>
   </div>

            </section><footer><nav class="round"><ul>
   <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="http://news.railstutorial.org/">News</a></li>
            <li><a href="http://www.railstutorial.org/">Rails Tutorial</a></li>
        </ul></nav></footer>
   </div>
    </body>
   </html>
 # ./spec/controllers/users_controller_spec.rb:161

 *deleted, see update below* 
```

这是 users_controller.rb - 如果对我有帮助，我会回来发布其他文件的内容。

```
class UsersController < ApplicationController
before_filter :authenticate, :only => [:show,  :edit, :update]
before_filter :correct_user, :only => [:edit, :update]
def new
@user = User.new
@title = "Sign up"
end

def show
@user = User.find(params[:id])
@title = @user.name
end

def create
@user = User.new(params[:user])
if @user.save
    sign_in @user
    flash[:success] = "Welcome to the Sample App!"
    redirect_to @user
else
    @title = "Sign up"
    render 'new'
end
end

def edit
@title = "Edit user"
end

def index
@title = "All users"
@users = User.paginate(:page => params[:page])
end

def show
@title = User.find(params[:id])
@title = @user.name
end

def update
@user = User.find(params[:id])
if @user.update_attributes(params[:user])
    flash[:success] = "Profile updated."
    redirect_to @user
else
    @title = "Edit user"
    render 'edit'
end
end
private
def authenticate
    deny_access unless signed_in?
end

def correct_user
    @user = User.find(params[:id])
    redirect_to(root_path) unless current_user?(@user)
end
end 
```

**更新**：我在 users_controller.rb 中进行了更正并修复了我的大部分问题：

```
def show
    @user = User.find(params[:id]) # this was incorrectly written as @title = User.find(params[:id])
    @title = @user.name
end 
```

但是，我仍然有那个大的 HTML 错误（#7）。我试图将规范中的行从更改为`response.should have_selector("a", :href => "/users?page=2", :content => "2")`，`response.should have_selector("a", :href => "/users?escape=false&poge=2", :content => "2")`但我仍然遇到同样的问题。

这是 users_controller_spec.rb 文件：

```
require 'spec_helper'

describe UsersController do
render_views

describe "GET 'new'" do
    it "should be successful" do
        get :new
        response.should be_success
    end

    it "should have the right title" do
        get 'new'
        response.should have_selector("title", :content => "Sign up")
    end

    it "should have a name field" do
        get :new
        response.should have_selector("input[name='user[name]'][type='text']")
    end

    it "should have an email field" do
        get :new
        response.should have_selector("input [name='user[email]'][type='text']")
    end

    it "should have a password field" do
        get :new
        response.should have_selector("input [name='user[password]'][type='password']")
    end

    it "should have a password confirmation field" do
        get :new
        response.should have_selector("input [name='user[password_confirmation]'][type='password']")
    end
end

describe "GET 'show'" do
    before(:each) do
        @user = Factory(:user)
    end

    it "should be successful" do
        get :show, :id => @user
        response.should be_success
    end

    it "should find the right user" do
        get :show, :id => @user
        puts @user.inspect
        puts assigns(:user).inspect
        assigns(:user).should == @user
    end

    it "should have the right title" do
        get :show, :id => @user
        response.should have_selector("title", :content => @user.name)
    end

    it "should include the user's name" do
        get :show, :id => @user
        response.should have_selector("h1", :content => @user.name)
    end

    it "should have a profile image" do
        get :show, :id => @user
        response.should have_selector("h1 > img", :class => "gravatar")
    end
end

describe "POST 'create'" do
    describe "failure" do
        before(:each) do
            @attr = { :name => "", :email => "", :password => "", :password_confirmation => ""}
        end

        it "should not create a user" do
            lambda do
                post :create, :user => @attr
            end.should_not change (User, :count)
        end

        it "should have the right title" do
            post :create, :user => @attr
            response.should have_selector("title", :content => "Sign up")
        end

        it "should render the 'new' page" do
            post :create, :user => @attr
            response.should render_template('new')
        end
    end

    describe "success" do
        before(:each) do
            @attr = {:name => "New User", :email => "user@example.com", :password => "foobar", :password_confirmation => "foobar"}
        end

        it "should create a user" do
            lambda do
                post :create, :user => @attr
            end.should change(User, :count).by(1)
        end

        it "should redirect to the user show page" do
            post :create, :user => @attr
            response.should redirect_to(user_path(assigns(:user)))
        end

        it "should have a welcome message" do
            post :create, :user => @attr
            flash[:success].should =~ /welcome to the sample app/i
        end

        it "should sign the user in" do
            post :create, :user => @attr
            controller.should be_signed_in
        end
    end
end

describe "GET 'index'" do
    describe "for non-signed-in users" do
        it "should deny access" do
            get :index
            response.should redirect_to(signin_path)
            flash[:notice].should =~ /sign in/i
        end
    end

    describe "for signed-in users" do
        before(:each) do
            @user = test_sign_in(Factory(:user))
            second = Factory(:user, :email => "another@example.com")
            third = Factory(:user, :email => "another@example.net")
            @users = [@user, second, third]
            30.times do
                @users << Factory(:user, :email => Factory.next(:email))
            end
        end

        it "should be successful" do
            get :index
            response.should be_success
        end

        it "should have the right title" do
            get :index
            response.should have_selector("title", :content => "All users")
        end

        it "should have an element for each user" do
            get :index
            @users[0..2].each do |user|
                response.should have_selector("li", :content => user.name)
            end
        end

        it "should paginate users" do
            get :index
            response.should have_selector("div.pagination")
            response.should have_selector("span.disabled", :content => "Previous")
            response.should have_selector("a", :href => "/users?escape=false&poge=2", :content => "2")
            response.should have_selector("a", :href => "/users?escape=false&page=2", :content => "Next")
        end
    end
describe "GET 'edit'" do
    before(:each) do
        @user = Factory(:user)
        test_sign_in(@user)
    end

    it "should be successful" do
        get :edit, :id => @user
        response.should be_success
    end

    it "should have the right title" do
        get :edit, :id => @user
        response.should have_selector("title", :content => "Edit user")
    end

    it "should have a link to change the Gravatar" do
        get :edit, :id => @user
        gravatar_url = "http://gravatar.com/emails"
        response.should have_selector("a", :href => gravatar_url, :content => "change")
    end
end

describe "PUT 'update'" do
    before(:each) do
        @user = Factory(:user)
        test_sign_in(@user)
    end

    describe "failure" do
        before(:each) do
            @attr = {:email => "", :name => "", :password => "", :password_confirmation => ""}
        end

        it "should render the 'edit' page" do
            put :update, :id => @user, :user => @attr
            response.should render_template('edit')
        end

        it "should have the right title" do
            put :update, :id => @user, :user => @attr
            response.should have_selector("title", :content => "Edit user")
        end
    end

    describe "success" do
        before(:each) do
            @attr = {:name => "New Name", :email => "user@example.org", :password => "barbaz", :password_confirmation => "barbaz"}
        end

        it "should change the user's attributes" do
            put :update, :id => @user, :user => @attr
            @user.reload
            @user.name.should == @attr[:name]
            @user.email.should == @attr[:email]
        end

        it "should redirect to the user show page" do
            put :update, :id => @user, :user => @attr
            response.should redirect_to(user_path(@user))
        end

        it "should have a flash message" do
            put :update, :id => @user, :user => @attr
            flash[:success].should =~ /updated/
        end
    end
end

describe "authentication of edit/update pages" do
    before(:each) do
        @user = Factory(:user)
    end

    describe "for non-signed-in users" do
        it "should deny access to 'edit'" do
            get :edit, :id => @user
            response.should redirect_to(signin_path)
        end

        it "should deny access to 'update'" do
            put :update, :id => @user, :user => {}
            :response.should redirect_to(signin_path)
        end
    end

    describe "for signed-in users" do
        before(:each) do
            wrong_user = Factory(:user, :email => "user@example.net")
            test_sign_in(wrong_user)
        end

        it "should require matching users for 'edit'" do
            get :edit, :id => @user
            response.should redirect_to(root_path)
        end

        it "should require matching users for 'update'" do
            put :update, :id => @user, :user => {}
            response.should redirect_to(root_path)
        end
    end
end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:08:46.277

我猜您可能没有在您的 rspec 测试中包含 test_sign in 方法来验证您的测试用户，然后再进行显示操作等。有关详细信息，请参阅本节 [http://ruby.railstutorial.org/chapters/更新显示和删除用户#sec:requiring_signed_in_users](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#sec:requiring_signed_in_users)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T17:48:44.030

poge 应该是页面

```
response.should have_selector("a", :href => "/users?escape=false&poge=2", :content => "2") 
```

加入我们其他人的愚蠢错误帮派。

# string - 是否可以在 ActionScript 3.0 中取变量名并将其转换为字符串？

> ID：10168540
> 
> 赞同：3
> 
> 时间：2012-04-16T03:56:26.460
> 
> 标签：string, flash, variables, text

我正在为自己在 ActionScript 中创建一个简单的调试器窗口，我可以在其中添加和删除我想要跟踪的变量。我能够通过执行类似的操作将变量添加到列表中

```
DebuggerMonitor.trackVar(variable). 
```

我的问题是，有什么方法可以将“变量”本身（名称，而不是值）转换为要添加到文本字段中的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:28:20.830

根据调试器的“智能”程度，您可以传递名称：

```
DebuggerMonitor.trackVar( variable, "variable" ); 
```

因为很明显，当在这样的上下文中使用时，在编写程序时应该知道名称。

您还可以做一些反射魔术来获取实例变量名称，但它不适用于临时变量（它们的名称在编译时被删除）：

```
public function getVariableName( instance:*, match:* ):String {
    var typeDescription:XML = describeType( instance );
    var variables:XMLList = typeDescription..variable;
    var accessors:XMLList = typeDescription..accessor;
    for each(var variable:XML in variables) 
        if(matchesXMLName( instance, variable, match )) 
            return variable.@name;
    for each(var accessor:XML in accessors) 
        if(matchesXMLName( instance, accessor, match )) 
            return accessor.@name;
    return "No name found.";
}

private function matchesXMLName( instance:*, xml:XML, match:* ):Boolean {
    return match == instance[xml.@name.toString()];
}

var varName:String = getVariableName ( myObject, variable ); 
```

如果经常使用，使用这样的反射也会非常昂贵——你必须想办法缓存类型描述。

我建议你查看[as3commons 反射包](http://www.as3commons.org/as3-commons-reflect/)——里面有很多有用的功能......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:33:06.997

简短的回答 - 不:(

您可以访问类型名称，但不能访问单个实例名称，因为这些名称在运行时会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:18:37.740

关键字“var”会引起混淆，因为它用于创建多种类型的绑定。

*   词法绑定（在函数内部使用了关键字“var”）。

*   动态绑定（关键字“var”用于声明类字段）。

编译器在编译时将词法绑定解释为函数占用的寄存器空间的寄存器地址。赋予词法绑定的名称此时会消失，并且无法在运行时恢复它们 - 因此您无法获得变量的“名称”。

动态绑定是声明它们的对象的一种“公共 API”，它们可以从未与创建它们的代码一起编译的代码中访问，这就是为什么为了反映这些绑定的名称的目的存储在编译后的代码中。但是，ActionScript 无法引用 LHS 值，因此即使您知道变量的名称和声明它的对象，也无法将其传递给另一个函数。`describeType`但是您可以在调试器中或通过调用声明变量的对象来查找它。请注意，`describeType`即使您从相关对象的范围内调用它，它也不会显示有关私有变量的信息。

# android - 如何使用粗略位置与数据库中保存的位置进行比较

> ID：10168545
> 
> 赞同：0
> 
> 时间：2012-04-16T03:57:32.400
> 
> 标签：android, location

我正在编写一个 android 应用程序，用户将使用网络位置使用粗略的位置进行地理定位。我希望用户能够将特定时间的位置保存到数据库（savedLocation）中，然后如果用户返回到savedLocation，（或者在该位置的粗略范围内，因为我正在起诉网络位置）我想要发射到广播接收器。我非常清楚如何将用户的位置保存到数据库中，并将其与当前位置等进行比较等。

然而，鉴于网络位置是一种相对不准确的确定位置的方法，确定用户何时接近该已保存位置的距离 X 内时，什么是一种好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:58:14.990

从您的问题中了解到，您正在跟踪用户的位置并将该位置保存到数据库中。现在您想在用户到达之前的位置时提示用户，但应该有一个特定的区域。如果是这样，那么您可以使用以下代码从纬度和经度了解用户所在的区域。

```
String latitude1, latitude2, longitude1, longitude2;
//Now Suppose you have some values in this variables. 
//In your case latitude1 and longitude1 is from database and latitude2 and longitude2 is from current Location.
float radius = 500; //Distance in meters

Location location1 = new Location("GPS");
location1.setLatitude(latitude1);
location1.setLongitude(longitude1);

Location location2 = new Location("GPS");
location2.setLatitude(latitude2);
location2.setLongitude(longitude2);

Float distance = location1.distanceTo(location2);
distance = Math.abs(distance);

//Here you can compare two distances 1\. distance and 2\. radius
if(distance <= radius) {
//Use is in a 500 meters radius. You can notify user by notification
} 
```

# perl - perl 搜索和替换目录中所有文件的脚本

> ID：10168547
> 
> 赞同：2
> 
> 时间：2012-04-16T03:57:56.170
> 
> 标签：perl, replace

我有一个包含近 1,200 个文件的目录。我需要依次遍历 perl 脚本中的每个文件来搜索和替换任何出现的 66 个字符串。因此，对于每个文件，我需要运行所有 66 个 s&r。**我的替换字符串是泰语的，所以我不能使用 shell。它必须是 .pl 文件或类似文件，以便我可以使用 .pl 文件** `use::utf8`。我只是不熟悉如何一一打开目录中的所有文件以对其执行操作。这是我的 s&r 的示例：

```
s/psa0*(\d+)/เพลงสดุดี\1/g; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:00:16.237

```
use utf8;
use strict;
use warnings;

use File::Glob qw( bsd_glob );

@ARGV = map bsd_glob($_), @ARGV;

while (<>) {    
   s/psa0*(?=\d)/เพลงสดุดี/g;
   print;
} 
```

```
perl -i.bak script.pl * 
```

我使用[File::Glob](http://search.cpan.org/perldoc?File%3a%3aGlob)的`bsd_glob`因为`glob`不会“正确”处理空格。它们实际上是同一个函数，但是函数的行为会根据它的调用方式而有所不同。

* * *

顺便说一句，`\1`在替换表达式中使用（即在正则表达式之外）是没有意义的。`\1`是一个正则表达式模式，意思是“匹配第一次捕获的内容”。所以

```
s/psa0*(\d+)/เพลงสดุดี\1/g; 
```

应该

```
s/psa0*(\d+)/เพลงสดุดี$1/g; 
```

以下是更快的替代方案：

```
s/psa0*(?=\d)/เพลงสดุดี/g; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T14:18:27.493

以防万一将来有人可以使用它。这就是我实际所做的。

```
use warnings;
use strict;

use utf8;

my @files = glob ("*.html");

foreach $a (@files) {
   open IN, "$a" or die $!;
   open OUT, ">$a-" or die $!;
   binmode(IN, ":utf8");
   binmode(OUT, ":utf8");
   select (OUT);
   foreach (<IN>) {
      s/gen0*(\d+)/ปฐมกาล $1/;
      s/exo0*(\d+)/อพยพ $1/;
      s/lev0*(\d+)/เลวีนิติ $1/;
      s/num0*(\d+)/กันดารวิถี $1/;
      ...etc...
      print "$_";
   }
   close IN;
   close OUT;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T04:05:28.497

有关可以遍历目录中所有文件名的函数，请参见[`opendir`](http://search.cpan.org/perldoc?perlfunc#opendir)// [`readdir`](http://search.cpan.org/perldoc?perlfunc#readdir)（就像您使用//遍历文件中的所有行一样）。[`closedir`](http://search.cpan.org/perldoc?perlfunc#closedir)`open``readline``close`

另请参阅该[`glob`](http://search.cpan.org/perldoc?perlfunc#glob)函数，该函数返回与某些模式匹配的文件名列表。

# iphone - 解码任意的 NSData 块？

> ID：10168550
> 
> 赞同：6
> 
> 时间：2012-04-16T03:58:31.477
> 
> 标签：iphone, objective-c, ios, nsdata, archiving

如果我有一个任意的 NSData 块作为十六进制值，有没有办法确定对象在存档或序列化之前可能是什么？我不介意一些猜测和检查方法，但我需要一些正确方向的指针。

我有一个 NSData 对象，里面有一些十六进制。我应该看哪些 NSData 方法？还有其他课程可以尝试吗

不想吓跑人们回答，但我有一个游戏数据文件，它可能是使用 Cocoa Touch 类编码的。在十六进制编辑器中查看数据时，会显示乱码和用户名，这让我怀疑它是某种存档或编码对象。我已将十六进制编辑器中的十六进制复制到一个示例项目中，我正在使用该示例项目来尝试取消归档数据。

我不相信这与 3d 格式有关，文件扩展名是任意的。

这是数据。我希望它不会在翻译中丢失：

```
'µköXN[ÎÀü÷h/F9ó9Vìñ°ceE¸z¶=Hmoshbermú«ó¼Ppù#ÝVÔ=4â®L,K;Êç;ASÀ&Ë÷ëÓ%È;Úf¬G}tmQ;µéüø_87´y©ã©!ß¶óQòAçÛl©âSG4S½3ýJ×ª9Ã¤ô¡wxiD²M¼ÏB]39øþ:óñ7ª¾÷èº£È3Ï¢ÍEFÍ¢ª»r]BmÁ'Ò+åygÞÅQ?luó>÷ú¼è6¸|}[¼[¶Ñ¦g!\OÎÒJSE..pSß&_ÈEäø)6òëó¨¼2¶ð°æà`ï7Ë=Ã¥:cÆ§=L4qG-"µ(ÐÝïß ÓãXkÀ4fzæ·p\ññT<tu¥Æ©;Ìn4£³Ï¢ÌFåG´ 
```

以及相应的十六进制：

```
27 B5 6B F6 01 00 00 00 58 4E 5B CE C0 FC F7 68 2F 46 86 87 83 39 F3 39 9E 56 EC F1 B0 63 9E 65 45 B8 7A B6 3D 07 99 48 6D 6F 73 68 62 65 72 6D 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 90 86 FA 03 0E AB F3 BC 0B 50 70 F9 23 DD 87 56 03 D4 3D 34 90 E2 AE 4C 2C 94 9E 8E 15 4B 0C 83 8C 3B 03 CA E7 3B 1B 41 53 C0 26 04 CB F7 EB D3 25 C8 3B DA 66 8A AC 47 7D 8A 7F 74 6D 51 3B B5 19 E9 FC F8 5F 38 37 B4 11 0C 79 A9 12 E3 A9 21 DF B6 F3 51 F2 41 E7 DB 85 02 9F 6C A9 E2 53 47 1F 34 86 53 BD 33 FD 4A D7 AA 39 C3 A4 F4 A1 77 78 69 44 B2 4D BC CF 42 5D 33 39 F8 FE 97 3A 81 F3 F1 10 37 AA BE 86 91 F7 1F E8 83 BA A3 C8 33 CF 1D A2 CD 45 7F 46 1F CD A2 AA BB 1A 72 5D 42 02 6D C1 0F 27 D2 2B E5 0B 79 67 DE C5 1A 51 3F 14 6C 75 F3 3E F7 FA BC E8 36 8E B8 7C 02 1C 7D 01 00 92 8C 19 5B BC 5B B6 D1 A6 67 7F 21 5C 84 13 4F CE 0C D2 4A 53 19 82 45 1B 2E 2E 96 70 53 DF 26 5F C8 1C 45 8F E4 F8 29 36 F2 EB 9D 95 F3 A8 BC 32 B6 F0 B0 E6 91 98 1A E0 99 60 EF 37 CB 3D C3 A5 3A 63 0C C6 A7 3D 4C 34 71 47 2D 22 B5 28 D0 DD EF DF 09 D3 E3 58 6B C0 17 34 66 7A E6 B7 70 5C F1 F1 54 3C 74 94 75 A5 C6 15 A9 9E 14 3B CC 15 10 83 6E 34 A3 B3 CF 0F A2 9C CC 8E 46 8C E5 00 00 47 B4 17 05 00 00 00 00 
```

如果有人愿意帮助解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:32:16.377

> 如果我有一个任意的 NSData 块作为十六进制值，有没有办法确定对象在存档或序列化之前可能是什么？

并不真地。这与在不使用 UTI、扩展名、MIME 类型的情况下正确读取任意文件一样“微不足道”。当然，您的程序还需要支持读取所有这些文件/格式。

> 我不介意一些猜测和检查方法，但我需要一些正确方向的指针。

如果您不想要一个不可能完成的任务，您需要缩小您的问题/输入范围。

> 我有一个 NSData 对象，里面有一些十六进制。我应该看哪些 NSData 方法？

它只是一个`length`字节的数据块。它可以代表任何东西——如果你不知道它来自哪里。

> 还有其他课程可以尝试吗？

也许您会首先通过 NSCoder 或另一个序列化器/归档器保存所有数据，这些序列化器/归档器提供一些内省并支持您输入自己的信息（类似于 UTI 或 MIME 类型）。

> **编辑：**
> 
> 不想吓跑人们回答，但我有一个游戏数据文件，它可能是使用 Cocoa Touch 类编码的。在十六进制编辑器中查看数据时，会显示乱码和用户名，这让我怀疑它是某种存档或编码对象。我已将十六进制编辑器中的十六进制复制到一个示例项目中，我正在使用该示例项目来尝试取消归档数据。

使用这些 API，数据可以以多种方式表示。您可能在 1) 专有文件格式到 2) 密钥存档的领域内面临一些问题。

后者对于非平凡的数据表示更容易。您需要定义未归档时不可用的任何 objc 类。在这种情况下，一些示例表示将提供您将需要的数据结构的粗略轮廓（在传统实现下）。如果 unarchiver 能够打开它，它也可以是类似于 NSDictionary 的存档。这是一个比其他语言更容易的问题，因为归档通常依赖于映射到 Cocoa 中的成员的键和值。

> **编辑2：**
> 
> 该文件来自 Draw Something 目录。它被称为gamedata.i3d

*（耸肩）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:24:53.253

尝试使用`NSKeyedUnarchiver`来阅读它。仅使用 NSArray、NSDictionary 和 NSString 等标准 Foundation 容器来存储数据的情况并不少见，因此您可能会很幸运。如果涉及自定义类，这显然不起作用，但可能值得您花 15 分钟的时间来尝试。

# ruby - 活动管理员过滤时间显示

> ID：10168552
> 
> 赞同：1
> 
> 时间：2012-04-16T03:58:42.330
> 
> 标签：ruby, ruby-on-rails-3, activeadmin

在活动管理员的一个索引中，我有一个时间开始字段，我使用了一个 :time 的数据库格式，目前（2012-04-05 16:59:00.000000）在我的数据库中，所以我的索引显示（1 月 1 日, 2000 02:02) 我只想显示我的索引的时间是

```
index do 
    column "Guest Name", :name
    column "Service Type", :service
    column "Booked Date", :date
    column "Time Start", :timeStart
    column "Time End",:timeEnd
    column "Number of guest", :numGuest
    default_actions
  end 
```

我想这样做，但显然它不会起作用

`column "Time Start", :timeStart.strftime('%H:%M:%S:%p')`

非常感谢您的帮助提前感谢您为所有人提供更多权力

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:20:34.130

这样的事情应该这样做：

```
index do
  column :timeStart, :sortable => :timeStart do |r|
    r.timeStart.strftime('%H:%M:%S:%p')
  end
end 
```

为了不失去对该列的排序能力，您可以`:sortable`在列上使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T18:52:29.593

您可以为此使用块：

```
index do |model|
    column "Time Start" do
        model.timeStart.strftime('%H:%M:%S:%p')
    end
end 
```

# mysql - 添加一个字段作为同一个表的主键存在的 MySQL 约束

> ID：10168554
> 
> 赞同：0
> 
> 时间：2012-04-16T03:58:58.020
> 
> 标签：mysql, primary-key

我正在创建一个以`basisId`字段作为主键的表。还有另一个字段`parentBasis`是对另一个`that.basisId`等于的元组的引用`this.parentBasis`。我想要做的是在创建表时表达这个约束。

类似于：（`ADD CONSTRAINT CHECK EXISTS this.parentBasis AS somewhere.basisId`显然不是真正的 MySQL）。

快速浏览[MySQL 开发页面](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)并没有多大用处。任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:47:39.677

如果您使用的是 InnoDB，那么您可以创建一个从表到自身的[外键。](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)例如：

```
create table t (
    id int not null primary key,
    parent int null
);
alter table t add constraint foreign key (parent) references t(id); 
```

那么`t.parent`要么必须是 NULL 要么是一个`t.id`值。

# ruby - 如何构建自己的 gem 并在另一个项目中使用它？

> ID：10168561
> 
> 赞同：1
> 
> 时间：2012-04-16T03:59:26.323
> 
> 标签：ruby, gem, bundler

我正在尝试构建我的第一个 ruby​​ gem，其中包含一些我想跨项目使用的类——为了这个问题，它被称为 test_service_api。

我已经使用“gem build test_service_api.spec”编写并构建了 gem。然后我做了一个“gem install test_service_api-0.0.2.gem”。

规格文件是：

```
# -*- encoding: utf-8 -*-
require File.expand_path('../lib/test_service_api/version', __FILE__)

Gem::Specification.new do |gem|
  gem.authors       = ["Tyler Power"]
  gem.email         = ["tyler@xxx.com"]
  gem.description   = %q{}
  gem.summary       = %q{}
  gem.homepage      = ""

  gem.files         = `git ls-files`.split($\)
  gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
  gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
  gem.name          = "test_service_api"
  gem.require_paths = ["lib"]
  gem.version       = TestServiceApi::VERSION
end 
```

我现在正在尝试在一个小测试项目中使用 gem，在测试项目 Gemfile 中我指定了对我构建的 gem 的依赖项：

```
source 'https://rubygems.org'

gem 'sinatra'
gem 'test_service_api' 
```

然后我可以进行“捆绑安装”，捆绑器会正确找到我的所有依赖项并将它们放入供应商/缓存中：

```
Tylers-MacBook-Pro:Test tyler$ bundle install
Using rack (1.4.1) 
Using rack-protection (1.2.0) 
Using test_service_api (0.0.2) 
Using tilt (1.3.3) 
Using sinatra (1.3.2) 
Using bundler (1.1.3) 
Updating .gem files in vendor/cache
Your bundle is complete! It was installed into ./vendor/bundle 
```

所以到目前为止对我来说一切都很好，我遇到的问题是，当我尝试在测试项目的源文件中要求 gem 时，它找不到它：

```
require 'rubygems'
require 'sinatra'
require 'test_service_api'

get '/' do
  res = ''
  ENV.each do |k, v|
    res << "#{k}: #{v}<br/>"
  end
  res
end 
```

我的 IDE 抱怨“没有要加载的文件”，如果我尝试运行应用程序，我会得到：

```
./app.rb:3:in `require': no such file to load -- test_service_api (LoadError)
    from ./app.rb:3 
```

我快把头发拉出来了......有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T07:04:33.580

试试这个怎么样：

```
require "rubygems"
require "bundler/setup" 
```

而不仅仅是红宝石？

# xcode - 如何在 Lion 中开发 iOS 3.1.3 应用程序？

> ID：10168563
> 
> 赞同：1
> 
> 时间：2012-04-16T03:59:39.397
> 
> 标签：xcode, osx-lion, ios-3.x

我想在 Lion OS (10.7.3) 中为 iOS 3.1.3 开发应用程序。我可以开发吗？我必须使用什么 Xcode 来开发 iOS 3.1.3 应用程序？现在我使用 Xcode 4.2.1，我可以创建 iOS 3.1.3 项目，因为 iOS 5.0 与 3.1.3 有不同的类型。

之前谢谢。问候。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:09:11.557

您可以从 XCode->Preferences->Downloads 下载其他 SDK。从这里安装旧的 iOS SDK 和模拟器，以及调试工具。下载 iOS 3.x 和 4.x SDKS 后，您可以构建将在旧 iOS 版本上运行的应用程序。然后，您需要将项目设置中的构建版本设置为您要构建的任何 SDK。但是，您必须知道，虽然为旧版本开发是一种很好的做法，但由于不支持不同的功能（即 ARC 内存管理），最终可能会产生很多额外的工作。最后，在这一点上为 iOS 3.x 构建可能不太有用，因为 iOS 3 将在未来几个月内被弃用。只需考虑几件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:09:45.170

更改您的 IOS SDK 设置。只需创建您的新项目并单击您的项目选项卡（左窗格）。

之后在下一个 LEFT PANE 中选择 PROJECT 。

在这个新的标签栏出现后，有 2 个标签 INFO/BUILD SETTING 。

选择构建设置。在那里你可以找到 ARCHITECTURE>BASE SDK。

在 Base SDK 菜单中，您可以选择所需的 SDK 来开发您的应用程序。

希望这会帮助你。

# sql - SQL Server PIVOT 函数

> ID：10168566
> 
> 赞同：2
> 
> 时间：2012-04-16T03:59:59.237
> 
> 标签：sql, sql-server-2008, pivot

我有一个检索所有代理及其模块的查询，结果集将返回每个模块 1 行。

```
SELECT
   am.agentID          AS agentid,
   pa.agentDisplayName agentdisplayname,
   m.ModuleName        ModuleName
FROM
   AgentModule AS am
   JOIN primaryagent AS pa
      ON am.agentID = pa.AgentID
   JOIN Module AS m
      ON am.ModuleID = m.ModuleID
WHERE
   m. Active = 1
   AND pa.groupID = 75 
```

数据集返回如下

```
代理ID | 代理显示名称 | 模块名
94 | 代理1 | 模块 1
94 | 代理1 | 模块 2
94 | 代理1 | 模块 3
23 | 代理1 | 模块 2
23 | 代理1 | 模块 3

```

我正在尝试使用 PIVOT 函数返回一个看起来更像的表

```
代理ID | 代理显示名称 | 模块 1 | 模块 2 | 模块 3 |.. .. ..
94 | 代理1 | 1 | 1 | 1
23 | 代理2 | 0 | 1 | 1

```

有一个动态的模块列表，所以我不能在查询中对它们进行硬编码。我已经尝试过 PICOT，但它似乎期待一个聚合函数，并且不太确定这是我在这种情况下需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:53:15.397

您可以在结果中添加一个额外的列并在该列上使用 min() 。结果将是`1`或`null`。用于`isnull`获取 a`0`而不是`null`.

```
select agentid,
       agentdisplayname,
       isnull([Module 1], 0) as [Module 1],
       isnull([Module 2], 0) as [Module 2],
       isnull([Module 3], 0) as [Module 3]
from
  (
    select agentid, agentdisplayname, modulename, 1 as dummy
    from YourResultset
  ) as T
pivot
  (min(dummy) for modulename in ([Module 1],[Module 2],[Module 3])) as P 
```

如果您想动态构建它，您需要首先执行一个查询，返回结果中的模块，然后您需要使用它来构建动态语句。最好将查询的结果存储在临时表中，然后在构建动态查询时使用该表。

```
SELECT
   am.agentID          AS agentid,
   pa.agentDisplayName agentdisplayname,
   m.ModuleName        ModuleName
INTO #Tmp
FROM
   AgentModule AS am
   JOIN primaryagent AS pa
      ON am.agentID = pa.AgentID
   JOIN Module AS m
      ON am.ModuleID = m.ModuleID
WHERE
   m. Active = 1
   AND pa.groupID = 75 
```

使用 构建并运行动态查询`#Tmp`。

```
declare @FieldList1 nvarchar(max)
declare @FieldList2 nvarchar(max)
declare @SQL nvarchar(max)

set @FieldList1 =
  (select ',isnull('+quotename(modulename)+', 0) as '+quotename(modulename)
   from #Tmp
   group by modulename
   order by modulename
   for xml path(''), type).value('.', 'nvarchar(max)')

set @FieldList2 = stuff(
  (select ','+quotename(modulename)
   from #Tmp
   group by modulename
   order by modulename
   for xml path(''), type).value('.', 'nvarchar(max)') , 1, 1, '')

set @SQL = 
  'select agentid, agentdisplayname'+@FieldList1+
  'from (select agentid, agentdisplayname, modulename, 1 as dummy 
         from YourTable) as T 
   pivot (min(dummy) for modulename in ('+@FieldList2+')) as P'

exec sp_executesql @SQL

drop table #Tmp 
```

# compiler-construction - 编译器如何处理符号表中的默认值

> ID：10168567
> 
> 赞同：2
> 
> 时间：2012-04-16T04:00:19.857
> 
> 标签：compiler-construction, programming-languages, default-value, symbol-table

一些编程语言允许参数在函数调用中具有默认值或结构中的属性具有默认值。像 python 或 javascript 一样，当我们在函数调用中省略一些参数时，函数中的默认值将被替换（就像 struct 也可以在属性中具有默认值一样）。那么编译器实际上是如何处理这个问题的呢？特别是在符号表中？我想为指向默认值的指针添加一个额外的属性我猜默认值在运行时推送到堆栈上？请让我知道我是否正确。谢谢。

**更新：** 这里的默认值我的意思是在 Python 中说，以下程序参数`b`具有默认值`0`。

```
def foo(a, b=0):
    return a+b
print foo(1)
print foo(1, 1) 
```

我们会得到结果`0`和`1`。那么编译器在运行时或编译时是如何处理的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:44:37.393

不管你怎么做，你都必须把默认值和具体的标识符关联起来。

参数列表和结构成员形成小的命名空间，编译器通常通过为这些命名空间构建符号表和跟踪命名空间如何相关的更大符号表来跟踪它们。

由于编译器通常已经在这些将其他信息与符号（例如，任何类型信息）相关联的小名称空间中具有符号表条目，因此这是一个非常自然的记录它的地方。

有一个问题是要为初始值记录什么。一件简单的事情就是简单地记录一个指向 AST 的指针，该指针表示初始/默认值。除此之外，还必须记录应该在其中评估该表达式的上下文（例如，“环境”）。该上下文通常可以隐含，因为它通常与定义结构/参数的上下文相同，并且该信息存储在将所有内容粘合在一起的更大的符号表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T18:44:23.190

当评估函数调用的参数列表时，代码生成器可以通过将列表与存储在符号表中的函数签名进行比较来判断缺少哪些参数。一旦您辨别出需要替换哪个参数，只需将默认值放入参数寄存器（或堆栈帧）即可。如果您正在处理一种 OO 语言并且形式参数是一个对象，您可能会将 0 (NULL) 压入堆栈的下一个单词。如果参数是内置原语，您将推送语言指定的任何默认值。

当然编译器可能会有所不同，但在一个简单的编译器中，在符号表中关联一个默认值并不是绝对必要的。首先，让我们明确一点，符号表记录了所有的变量声明。您必须存储有关这些声明的信息（例如类、方法、类型、行、字符等），但是当只有少数类型时，当然没有必要为每个变量记录默认值，因此只有少数可能的默认值。

某些语言 (Java/C++) 指定具有未初始化对象属性的类的默认值为 NULL。在实现类似的东西时，当代码生成器创建类构造函数时，它一定会生成将 0 放置在映射到该属性的对象内存中的代码（假设一切都是基于指针的）。当您去生成构造函数，并且您正在迭代类属性列表（一个 AST 节点）时，如果该属性没有初始化表达式，则调用一个方法来执行默认值。

```
private void genConstructor(int classId) {

     //allocate new object

     codeGen.write("li $a0, "+classId); 
     codeGen.write("jal Runtime.newObject");

     //call parent constructor

     codeGen.write("move $a0, $v0"); 
     codeGen.write("jal ParentInit");

     //initialize the attributes this class has declared

     for(Attributes a: getAttributes(classId)) {

        //provide default value
        if(a.getInitExpr() == null)
            doDefault(a.getType(), a.getNum());
        else
            doInit(a.getInitExpr(), a.getNum());
     }
}

// An 'Int' default value is 1, everything else is 0 (Objects included)
// $t0 has the object address
// attributes start at the 5th word of each object 
private void doDefault(String type, int attrNum) {
     switch(type) {
          case "Int": {
                codeGen.write("sw $one, "+(5+attrNum)+"($t0)");
          }
          default: {
                codeGen.write("sw $zero, "+(5+attrNum)+"($t0)");
          }
     }
} 
```

**更新：**

> 我想知道编译器如何处理程序员设置的默认值，而不是“类”或“类型”的“默认”。

我假设您说的是类似于 C++ 构造函数中的默认参数的东西。在这种情况下，正如 Ira 所提到的，在符号表记录中创建一个字段听起来是最简单的方法。为缺少的参数生成代码时，请在表中查找默认值。

# c++ - 使用 copyFile 功能时“拒绝访问”，但是，“moveFile”在相同目录上工作正常

> ID：10168574
> 
> 赞同：1
> 
> 时间：2012-04-16T04:00:58.960
> 
> 标签：c++, winapi

我将目录 A\B 复制到目录 A\C 中。

由于显而易见的原因，目录 A\B 已经存在，而目录 A\C 尚不存在。

当使用 copyFile 函数将目录 A\B 复制到 A\C 时，我收到“拒绝访问”错误，并且该目录没有被复制。

但是，当我尝试将单个文件（例如 A\B\hello.txt）复制到 A\C\hello.txt 时，该函数运行正常。

此外，当使用“moveFile”函数将目录 A\B 复制到目录 A\C 时，它似乎工作正常。有没有人有任何想法？谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:13:14.180

copyFile 不会为您创建目录。

[在复制文件或使用CreateDirectory](http://msdn.microsoft.com/en-us/library/aa363855%28v=vs.85%29.aspx)创建文件之前，您必须确保该目录存在

关于 CreateDirectory 的注意事项 1) 它只会在目标路径中创建最终目录。2) 如果目录存在则返回错误，因此您需要处理错误。

# c# - Parallel.Invoke vs Task 为什么执行时间不同？

> ID：10168578
> 
> 赞同：2
> 
> 时间：2012-04-16T04:01:41.880
> 
> 标签：c#, parallel-processing, task-parallel-library

我有一个队列，里面有 144 个项目。每个队列元素都是一个请求。我试图通过尝试并行运行代码来提高处理性能。我调用 performaction(request) 方法。它实例化一个对象并将请求传递给它并执行一个操作。我可以并行运行此操作，因为这些请求是独立的，并且请求的操作结果也彼此独立。首先我试过

```
foreach(var request in queue.Values)
    Parallel.Invoke(() =>PerformAction(request); 
```

然后我尝试了相同的 foreach。

```
var task = new Task(() => PerformAction(request));
task.Start(); 
```

在我拥有的 foreach 之外

```
Task.WaitAll(); 
```

当运行程序时，parallel.invoke 需要将近 3 秒才能完成，而 Task 需要将近 0.005 秒才能完成。

我有以下问题：

1.  为什么并行调用比任务花费更多时间？似乎并行调用没有像我想要的那样以并行模式运行。
2.  当我使用任务时，对于每个请求我都创建一个新任务，如果我有 1000 个请求的请求，我最终会创建 1000 个线程还是 CPU 会根据需要处理创建线程？
3.  Task.WaitAll() 在程序终止之前它会等待所有任务完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T04:15:35.287

您的代码中的问题是`Task.WaitAll()`它不能按您的预期工作。您已保存并开始了一项任务：

```
var task = new Task(() => PerformAction(request));
task.Start(); 
```

但是您没有保留对要传递给的每个任务的引用`WaitAll`。您的目的是将所有任务保存在一个数组中，然后将该数组传递给`WaitAll`. 因此，您的程序使用任务“快速”执行，因为它没有等待完成。

你的问题：

1.  请参阅上文了解为什么`Parallel.Invoke`需要更多时间 - 因为它实际运行。但是，您也没有正确使用它。Parallel.Invoke 采用一系列动作 ( `Actions[]`) 并尝试并行运行它们。您每次都用一个动作多次调用它。我什至不确定你的代码是如何编译的。我相信你想要的是：

    ```
    Parallel.ForEach(queue.Values, request => PerformAction(request)) 
    ```

2.  您正在为每个请求创建一个新任务，但这不会与线程一一对应。默认情况下，任务使用[线程池](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)。

3.  `Task.WaitAll(tasks)`确实等待所有`tasks`完成。但如果你什么都不通过，它就不会。同样，这不应该像你拥有的那样编译。

# java - 分离的实体传递给坚持

> ID：10168579
> 
> 赞同：5
> 
> 时间：2012-04-16T04:01:46.437
> 
> 标签：java, spring, hibernate, entitymanager, detach

使用过：hibernate 3.6.10，maven 2，postgres 9。我有必须工作的代码，但它没有。在我使用 hibernate 3.6.2 并得到非常沮丧的错误之前：java.lang.ClassCastException: org.hibernate.action.DelayedPostInsertIdentifier cannot be cast to java.lang.Long

但更新到 3.6.10 后错误变得更加明智：javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passing to persist

代码是一个标准的领域模型：

实体：

```
@Cache(usage = CacheConcurrencyStrategy.TRANSACTIONAL)
@Entity
@Table(schema = "simulators", name = "mySimulator_card")
public class MySimulatorCard {

    @Id
    @Column(name = "id")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "account_number", unique = true, nullable = false)
    private String accountNumber; 
```

ETC...

道：

```
public abstract class AbstractDao<E, PK extends Serializable> implements Dao<E, PK> {

    private EntityManager entityManager;

    public EntityManager getEntityManager() {
        return entityManager;
    }

    @PersistenceContext(unitName = "MySimulator")
    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }

    public abstract Class<E> getEntityClass();

    @Override
    public void persist(E e) {
        getEntityManager().persist(e);//<-- some thing wroooong
    } 
```

ETC...

并根据表：

```
CREATE TABLE simulators.mySimulator_card
(
  id bigserial NOT NULL,
  account_number character varying(255) NOT NULL,

etc...

  CONSTRAINT mySimulator_card_pk PRIMARY KEY (id),
  CONSTRAINT mySimulator_card_account_fk FOREIGN KEY (account_id)
      REFERENCES simulators.mySimulator_account (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT mySimulator_card_currency_fk FOREIGN KEY (currency_id)
      REFERENCES simulators.mySimulator_currency ("name") MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT mySimulator_card_product_fk FOREIGN KEY (product_id)
      REFERENCES simulators.mySimulator_product (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT mySimulator_account_account_number_uq UNIQUE (account_number),
  CONSTRAINT mySimulator_card_san_uq UNIQUE (san)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE simulators.mySimulator_card OWNER TO functional; 
```

我认为功能测试中的上下文有问题，因为生产工作正常。此外，当我尝试使用此技巧从 entityManager 获取会话时：

```
 EntityManager em = getEntityManager();
    HibernateEntityManager hem = em.unwrap(HibernateEntityManager.class);
    Session session = hem.getSession();
    session.persist(e); 
```

我有错误：

java.lang.IllegalStateException：没有可用的事务性 EntityManager

现在确定发布所有测试配置是个好主意，因为有很多解决方法。任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-19T14:25:40.327

当您尝试在自动生成的列中保留值时，会引发此错误。

检查您是否正在传递一个值以保留列 id，您已将其标记为：

> @GeneratedValue（策略 = GenerationType.IDENTITY）

问候。

# php - mysql在文本字段中搜索catid

> ID：10168583
> 
> 赞同：2
> 
> 时间：2012-04-16T04:02:16.797
> 
> 标签：php, mysql, sql-like

我正在尝试对文本字段中的 catid 号进行 mysql 搜索（在 php 中）。我目前正在使用 LIKE，但我需要更具体。这是我的代码：

```
SELECT * FROM articlepix 
WHERE published = 1 AND catid LIKE '%86%' 
ORDER BY RAND() LIMIT 1 
```

^^ 我在 catid 字段中寻找数字 86，但我希望它只寻找 86，目前它也在提取数字 186 的数据。

上面的示例抓取了 catid 为“91,107,36,139,146,168,186”的字段。

是否可以只搜索“86”而不是包含 %86% 的所有内容？如果这有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:08:02.333

MySQL 可以通过函数帮助您解决这个巨大的数据库设计错误[`FIND_IN_SET`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)。试试这个：

```
SELECT * FROM articlepix 
WHERE published = 1 AND FIND_IN_SET('86', catid) > 0
ORDER BY RAND() LIMIT 1 
```

当然可以简化为：

```
WHERE published = 1 AND FIND_IN_SET('86', catid) 
```

由于该函数仅`0`在不匹配时返回，但可能更难理解它的作用:)

# sorting - 使用 Unix 命令对文件进行排序/编辑？

> ID：10168584
> 
> 赞同：1
> 
> 时间：2012-04-16T04:02:17.623
> 
> 标签：sorting, unix, filter

我有一个 300MB 的文件，看起来像这样：

> 项目 项目
> 项目 项目
> 2 东西
> ……

它基本上是两列一直向下。所以每一行都有两个条目。列由[这个字符](http://www.fileformat.info/info/unicode/cfgfghhhh%09har/0009/index.htm)（Alt + 0009）分隔，我认为它是“制表符”字符。这些行按第一列条目的字母数字顺序排序。

基本上我需要对这个文件做的是用它生成一个新文件，如下所示：

*   首先，按*第二*列条目按字母数字顺序对行进行排序。
*   其次，删除第二列条目从未作为第一列条目之一出现在文件中的所有行。

例如：

> AB
> AC
> AE
> CA
> EF

前往

> CA
> AB
> AC
> AE
> EF

然后终于到

> CA
> AC
> AE

（请注意，在此示例中，我使用空格字符而不是制表符分隔列，在我尝试排序的文件中，列由制表符分隔（Alt +0009））

那么我将如何使用 Unix 命令来执行此操作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:09:36.887

可以使用`sort`实用程序处理第一个操作（`-k`适当设置标志）。第二个操作更复杂，可能需要实现某种自定义脚本。

# haskell - 输入“=”时解析错误 - Haskell

> ID：10168589
> 
> 赞同：-1
> 
> 时间：2012-04-16T04:03:14.103
> 
> 标签：haskell, functional-programming

当我运行这个 Haskell 代码时，我遇到了这个非常烦人的错误。由于某种原因，它不喜欢拳头线`delLast :: (Ord a) => [a] -> [a]`

```
delLast :: (Ord a) => [a] -> [a]
delLast [] = []
delLast (x:[]) = []
delLast (x:xs) = [x] ++ delLast xs 
```

有谁知道我为什么会收到这个错误？谢谢。

这是我得到的错误：

```
parse error on input `='
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T06:26:12.970

在该行之前是否有未终止的定义？

```
x = do

delLast :: (Ord a) => [a] -> [a]
delLast [] = []
delLast (x:[]) = []
delLast (x:xs) = [x] ++ delLast xs 
```

编译给了我：

```
test.hs:5:12: parse error on input `=' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T09:29:32.677

关于什么

```
delLast [] = []
delLast xs = init xs 
```

或者如果你想按照自己的方式做，但更好

```
delLast :: (Ord a) => [a] -> [a]
delLast [] = []  
delLast [x] = []                  -- Looks better IMO
delLast (x:xs) = x : delLast xs   -- : instead of ++ gives a performance boost 
```

# vb.net - VB.net 循环遍历 if-then 语句？

> ID：10168591
> 
> 赞同：0
> 
> 时间：2012-04-16T04:03:39.000
> 
> 标签：vb.net, loops, timespan

我编写了一个私有子程序，它获取当前时间并计算出当前时间属于哪个时间范围（来自时间跨度数组）。鉴于我正在测试十个时间括号，代码是重复的，只有数组的整数索引和每个 if 语句之间的结果整数发生变化。

```
If DateTime.Now.TimeOfDay >= tmeToday(0) AndAlso DateTime.Now.TimeOfDay <= tmeToday(1) Then
    intPeriodFrid = 0 'ext morning; 8am - 9am
    intNextBell = 1
ElseIf DateTime.Now.TimeOfDay >= tmeToday(1) AndAlso DateTime.Now.TimeOfDay <= tmeToday(2) Then
    intPeriodFrid = 1 'morning break; 9am - 9:05am
    intNextBell = 2 
```

......以后重复的荒谬数量

```
ElseIf DateTime.Now.TimeOfDay >= tmeToday(10) AndAlso DateTime.Now.TimeOfDay <= tmeToday(11) Then
    intPeriodFrid = 10 'ext afternoon; 3:10pm - 4:10pm
    intNextBell = 11
End If 
```

然后它击中了我，我可能可以这样做：

```
For value As Integer = 0 To 10
    If DateTime.Now.TimeOfDay >= tmeToday(value) AndAlso DateTime.Now.TimeOfDay <= tmeToday(value + 1) Then
        intPeriodFrid = value
        intNextBell = (value + 1)
        Exit For
    End If
Next 
```

这将/将是我第一次使用循环（我在基于 VB.NET 的课程中​​学习了十周），所以我对这个作为解决方案缺乏信心，它会起作用吗？如果我实施这个，我需要注意什么弱点/问题？

# ruby - 以最简单的方式使用自动测试

> ID：10168594
> 
> 赞同：4
> 
> 时间：2012-04-16T04:04:25.320
> 
> 标签：ruby, autotest, continuous-testing

我是使用 Autotest 连续运行 rspec 规范的新手。我想简单地使用 Autotest 来处理两个文件：`[filename].rb`和`[filename]_spec.rb`，但是当我在这些文件所在的目录中运行 Autotest 时，它不会接受更改。我究竟做错了什么？我用谷歌搜索，找不到这个非常简单的场景的答案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T09:26:35.280

我建议您一起跳过自动测试，而是使用 Guard、[https://github.com/guard/guard](https://github.com/guard/guard)和 guard-rspec 插件。 [https://github.com/guard/guard-rspec](https://github.com/guard/guard-rspec)

Ryan Bates 也有关于守卫的截屏视频，值得一看。 [http://railscasts.com/episodes/264-guard](http://railscasts.com/episodes/264-guard)

# c# - Google Adwords AdGroupCriterionService

> ID：10168596
> 
> 赞同：0
> 
> 时间：2012-04-16T04:04:56.857
> 
> 标签：c#, .net, google-ads-api

我正在使用 Google Adwords Api“AdGroupCriterionService”服务来检索所有关键字，我有一个相关的问题。

如何按“点击”过滤结果（关键字列表）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T14:05:01.650

您可以使用谓词来过滤结果。此处的示例演示了如何创建谓词：

[http://code.google.com/p/google-api-adwords-dotnet/source/browse/trunk/examples/adwords/csharp/v201109/BasicOperations/GetKeywords.cs#85](http://code.google.com/p/google-api-adwords-dotnet/source/browse/trunk/examples/adwords/csharp/v201109/BasicOperations/GetKeywords.cs#85)

在您的情况下，您可以使用 Clicks GREATER_THAN 10 等谓词。

# opengl-es - OpenGL ES - 使用 glDrawArrays()

> ID：10168599
> 
> 赞同：4
> 
> 时间：2012-04-16T04:05:10.790
> 
> 标签：opengl-es

我正在将一些代码从 OpenGL 移植到 ES 版本。我正在使用 glDrawArrays() 来绘制一个与`glVertexPointer()`. 但是，它不会在屏幕上绘制。完整的代码是：

```
void init(void) 
{
    glClearColor (0.0, 0.0, 0.0, 0.0);
    glShadeModel (GL_FLAT);
}

void display(void)
{
    glEnableClientState (GL_COLOR_ARRAY);
    glClear (GL_COLOR_BUFFER_BIT);
    glColor4f (0.0, 0.0, 1.0, 1.0);
    glLoadIdentity ();           

    glTranslatef(0, 0, -20);

    const GLfloat triVertices[] = { 
        0.0f, 1.0f, 0.0f, 
        -1.0f, -1.0f, 0.0f, 
        1.0f, -1.0f, 0.0f 
    };

    glVertexPointer(3, GL_FLOAT, 0, triVertices);
    glDrawArrays(GL_TRIANGLES, 0, 3);
    glDisableClientState(GL_VERTEX_ARRAY);
    glFlush ();
}

void reshape (int w, int h)
{
    glViewport (0, 0, (GLsizei) w, (GLsizei) h); 
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    glFrustum (-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);
    glMatrixMode (GL_MODELVIEW);
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
    glutInitWindowSize (400, 400); 
    glutInitWindowPosition (100, 100);
    glutCreateWindow (argv[0]);
    init ();
    glutDisplayFunc(display); 
    glutReshapeFunc(reshape);
    glutMainLoop();
    return 0;
} 
```

GLUT 打开窗口，它以黑色清除，但不绘制任何内容。有人可以发现我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T04:24:08.687

我看不到对`glEnableClientState(GL_VERTEX_ARRAY);`. 我也看到`glEnableClientState (GL_COLOR_ARRAY);`了，但没有调用`glColorPointer()`。也许你写了一个，而你的意思是另一个？

# firefox - 我如何附加位置：绝对；DIV 进入 firefox xul：浏览器？

> ID：10168600
> 
> 赞同：0
> 
> 时间：2012-04-16T04:05:11.083
> 
> 标签：firefox, firefox-addon, xul

我需要将一个 DIV 元素附加到 xul:browser 并设置 position: absolute; 并在 Firefox 窗口中移动这个 DIV。可能吗？我如何在 Firefox 扩展中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-12T15:29:48.807

如果将元素放置在 a 内[`<stack>`](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XUL/stack)，则可以使用 top、right、bottom 和 left 属性进行定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T07:42:13.687

在搜索网络并解决样式后，我发现我可以使用`position: fixed;`样式

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://helloworld/skin/overlay.css" type="text/css"?>
<!DOCTYPE overlay SYSTEM "chrome://helloworld/locale/overlay.dtd">
<overlay id="helloworld-overlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
         xmlns:html="http://www.w3.org/1999/xhtml">

    <vbox id="browser-panel">
        <html:div style="position: fixed; top: 20px; left: 50px;">
                  <html:img src="https://static.addons.mozilla.net/en-US/developers/docs/sdk/1.1/media/firefox-logo.png" width="32" height="32" />
        </html:div>
    </vbox>

</overlay> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:52:57.920

XUL 使用灵活的盒子模型，在那里绝对定位不会走得太远。最好的解决方案是使用旨在显示在其他内容之上的[`<xul:panel>`元素（类似于上下文菜单或工具提示）。](https://developer.mozilla.org/en/XUL/panel)有一种`moveTo()`方法可以让面板在打开后移动。

# javascript - Safari 扩展启动脚本中的访问设置

> ID：10168601
> 
> 赞同：4
> 
> 时间：2012-04-16T04:05:18.620
> 
> 标签：javascript, safari, safari-extension

我现在正在开发一个 Safari 扩展，但我无法找到从启动脚本中访问任何扩展设置的方法。通过将它们从消息中获取到 global.html 文件，我可以从最终脚本中很好地访问它们。但是，当我在启动脚本中尝试这样做时，我似乎从未从 global.html 得到响应。有谁知道解决这个问题？还是我只是忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T01:08:31.130

当您使用启动脚本时，您将注入它并访问该页面的 DOM。与其对类进行调用，不如对`SafariExtension`类进行调用`SafariContentExtension`。这是一个相对较小的差异，但是*当*您从注入的脚本而不是全局页面访问扩展功能时，它会产生很大的不同。

编辑：自从几天前回答这个问题以来，我已经开始着手将自定义设置页面添加到我自己的 Safari 扩展程序中。看来您只能使用该类访问`baseURI`扩展的变量。`SafariContentExtension`显然，Apple 不会为该课程提供与完整课程相同的访问权限`SafariExtension`。

# jquery - 如何让这个灯箱脚本在 jQuery.noconflict 模式下运行？

> ID：10168604
> 
> 赞同：0
> 
> 时间：2012-04-16T04:06:42.910
> 
> 标签：jquery, lightbox2

我假设[这个脚本](https://github.com/lokesh/lightbox2/blob/master/js/lightbox.js)每次都使用`.call(this)`函数调用自身，这解释了为什么我不必从页面 HTML 显式调用它。这个对吗？

可以修改为在`noconflict`模式下运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:31:47.190

本质上`.noConflict()`未定义`$`. 这意味着像

```
$.ajax(...);
$("a").some_func(...); 
```

必须改为：

```
jQuery.ajax(...);
jQuery("a").some_func(...); 
```

等等。像这样修改脚本，它应该可以正常工作。

# sql - SQL - 按不同大小写在一列上排序

> ID：10168607
> 
> 赞同：1
> 
> 时间：2012-04-16T04:06:55.173
> 
> 标签：sql, oracle

我有这样的数据：
![数据](../Images/f047292bca5cd0391a98df4a2f492f23.png)

我想对数据进行排序，结果是这样的：
`CHECKING_ACCT_MONTHS`
`--------------------`
`11-2011`
`10-2011`
`09-2011`
`AVERAGE`
换句话说，数据会降序排列，但`AVERAGE`数据会在底部。我怎样才能做到这一点，。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T04:16:37.073

查询应该是...

```
SELECT * 
  FROM TableName
 ORDER BY 
    CASE 
      WHEN CHECKING_ACCT_MONTHS = 'AVERAGE' 
      THEN 1 ELSE 0 
   END, 
   CHECKING_ACCT_MONTHS DESC 
```

# iphone - RestKit/RestKit.h 文件未找到错误 - 版本 0.10.0

> ID：10168610
> 
> 赞同：24
> 
> 时间：2012-04-16T04:07:17.903
> 
> 标签：iphone, ios, header, clang, restkit

在尝试让 RestKit 构建和工作时，我失去了头发。我收到可怕的“词汇或预处理器问题：未找到 RestKit/RestKit.h 文件”消息。我使用 Xcode 4.2，我的项目适用于 iOS。

早些时候，我的调试模式与 RestKit 0.9.0 完美配合。然后我在尝试存档时遇到了问题。在阅读了这个论坛并尝试了一些解决方案后，我决定升级到 0.10.0，希望它能解决问题。

现在，我的项目甚至没有在调试模式下构建，并且我得到了相同的 RestKit/RestKit.h file not found 错误。

我在标题搜索路径下有这个：“$（BUILT_PRODUCTS_DIR）/../../Headers”。您能否建议（对于 0.10.0 版本）： 1）RestKit 的物理位置应该在哪里？（这可能无关紧要，但哪一个对你有用 - 希望我可以反映你的设置）2）我试图将我的标题搜索路径指向“/Developer/Library/RestKit-RestKit-69adee9/”，然后指向“ /开发人员/库/RestKit-RestKit-69adee9/Build"

彻底的迷茫和沮丧。。

**EDIT1：**几个小时后，我放弃了。核爆了我的项目。创建了一个新项目。重新创建文件（从上一个项目复制粘贴）。现在“未找到 RestKit”错误消失了！但是现在，我收到了另一个错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_RKObjectMapping", referenced from:
objc-class-ref in myclassname1.o
"_OBJC_CLASS_$_RKObjectManager", referenced from:
objc-class-ref in myclassname2.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我检查并确保我没有添加 RestKit.framework ...我不知道为什么现在会发生 clang 错误

**EDIT2：** libRestKit.a 是红色的。根据[https://github.com/RestKit/RestKit/wiki/Installation-Troubleshooting](https://github.com/RestKit/RestKit/wiki/Installation-Troubleshooting)没问题 只是为了它，我删除了所有链接的依赖项。删除了“其他链接器标志”。关闭并重新打开 Xcode。把它们都放回去。那个错误消失了。也许我错过了一个导致 clang 错误的框架。但我检查并仔细检查的可能性很小。现在可以了。

它在调试模式下构建和归档。我还没有尝试过分发模式。

**EDIT3：** Apple 在第一时间批准了我的应用程序并且它已经上线了！我仍然不知道是什么导致了这里的问题。核对现有项目并创建新项目并复制旧文件（并定期检查构建是否通过）不是解决方案。所以我把这个问题悬而未决。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-28T00:28:35.067

我想我可以对此有所了解。

当您升级到 0.10.0 时，您将标题搜索路径更改为`"$(BUILT_PRODUCTS_DIR)/../../Headers"`，对吗？

安装指南只说为*项目设置*执行此操作。但是**，在许多情况下**，包括我的在内，您还需要为*目标设置*更新它们。

目标设置仍将具有旧的标头搜索路径，并且无论出于何种原因决定不从项目设置继承。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T18:44:59.410

请注意 - 它完全是 hack - 但它让我的项目运行起来。

*假设您已经按照 RestKit Github* [https://github.com/RestKit/RestKit/blob/master/README.md#quick-start-aka-tldr中的安装步骤进行操作](https://github.com/RestKit/RestKit/blob/master/README.md#quick-start-aka-tldr)

在 RestKit 目标中，转到**Build Phases**。在**Copy Headers**下拉菜单下，将所有头文件从“Project”移动到“Public”。

清洁、构建、运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T03:44:42.273

我发现的解决方案不是将“$(BUILT_PRODUCTS_DIR)/../../Headers”复制并粘贴到目标的标题搜索路径中。

五小时后，我删除了副本并粘贴了“并手动输入它们并且它起作用了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T11:11:56.963

我最近尝试从 RestKit 0.9.3 升级到 0.10.0 并且有同样的事情。您是否删除了 RestKit/build 目录？这包含 .h 文件的副本，并在构建 0.9.x 时作为构建过程的一部分创建。执行 Product -> Clean 似乎不会删除这些文件。0.10.0 似乎没有创建这个构建目录。我怀疑您的构建错误是由于这些文件仍在被拾取。

另外，为了完全回答您的问题，我将 RestKit 文件保存在：
**(project dir)/Frameworks/RestKit**
这是一个 git 子模块，因此它包含特定修订版的 RestKit git repo 的克隆。

并且头部搜索路径是：
**$(BUILT_PRODUCTS_DIR)/../../Headers**

0.9.3 的标头搜索路径是：
**$(SOURCE_ROOT)/RestKit/Build**

我发现本指南很有帮助（也许这是您已经在关注的内容）：[https](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x) ://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x 并注意有关仅使用**libRestKit 的部分。 a**在项目中用于最新的 RestKit 版本，其中早期版本具有：

*   libRestKitNetwork.a
*   libRestKitObjectMapping.a
*   libRestKitSupport.a
*   libRestKitJSONParserJSONKit.a
*   libRestKitXMLParserLibxml.a
*   libRestKitCoreData.a

如果您拥有所有这些，请将它们从您的项目中删除。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T12:49:21.390

在过去的几个小时里一直在与同样的问题作斗争。最终对我有用的东西（我并不是说这是一个明确的解决方案，但至少它是可以尝试的）。

*   从你的项目中删除 RestKit
*   关闭您的项目
*   将 RestKit 文件夹移动到主 xcodeproject 旁边
*   打开 RestKit 项目并构建它
*   关闭 RestKit 项目
*   打开您的项目，并将 RestKit 项目重新导入您的 xcodeproject
*   修复目标设置中的依赖关系和链接
*   将“$(BUILT_PRODUCTS_DIR)/../../Headers”搜索路径添加到项目设置和目标设置中。（它只在它们都被列出时才对我有用）。

最后一步可能是修复它所必需的，但由于我也为此烦恼，我尝试了很多不同的解决方案，并且不想假设这最后一步是它自行修复的唯一原因。

（我的设置是 XCode 4.3.2 和 OS X 10.7.3）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T19:55:15.750

在同样的错误上花费了 2 天并导航到每个可能的谷歌结果后，我终于明白了！

这不是由于派生数据设置，这些在 XCode 4.3.2 中已经很好了。

问题是你正在做一个`#import "RKObjectMapping.h"`或其他一些包含。

而是使用 `@class RKObjectMapping`，或者如果你真的需要 .h 使用`<RestKit/RKObjectMapping.h>`

我去了，`@class`因为我只需要编译......

希望这有帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-27T04:23:09.247

也有这个问题。它会在模拟器上构建和运行得很好，但不会存档。这就是我出错的地方......

我这样做了：

```
#import "RestKit.h" 
```

而不是正确的方法：

```
#import <RestKit/RestKit.h> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-10T04:11:38.530

有一个非常相似的问题。原来是我不小心将构建设置添加到“**用户**标题搜索路径”而不是“标题搜索路径”。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-16T05:16:59.307

我今天有完全相同的错误。我们所有的代码都在一个 github repo 中，restkit 文件夹被忽略了，所以没有 restkit 文件在里面。现在，当 xcode 打开项目并发现缺少的东西时，它假定一切都乱套了。所以，删除文件夹，重新克隆它，然后抓起一个新的 restkit 副本并将它扔在那里，瞧，一切正常。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-31T09:51:55.597

我的解决方案：

添加`"$(BUILT_PRODUCTS_DIR)/../../Headers"`到目标 -> 构建设置 -> 搜索路径 -> 标题搜索路径时，未设置该值。

相反，该值已设置为用户标题搜索路径。因此，您双击标题搜索路径，出现一些带有线条的窗格，您单击左下角，将该字符串粘贴到那里，单击其他地方以关闭窗口，然后......什么也没有。标头搜索路径没有更新，但用户标头搜索路径更新了。

?!!!

因此，您单击标题搜索路径上的披露按钮。单击属性右侧的 + 号并添加值...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-02T21:21:07.457

我发现我需要手动构建RestKit目标才能将头文件复制到构建目录中。显然主项目构建不能可靠地运行子项目构建？

所以，我解决这个问题的步骤：

*   选择 RestKit 运行目标
*   建造
*   确保在所有目标上设置了标题搜索路径（显然在项目本身上是不够的）
*   构建主项目

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-09T01:55:38.553

这是一个我认为没有足够答案的问题，因为如果你有这个问题，感觉就像没有什么可做的！在尝试了所有建议的解决方案之后（都没有奏效）。我终于找到了问题

问题是我的一个文件夹中有一个空间。不要在源文件夹名称中使用空格！

```
Used to be : (/Xcode projects/basicRestkit etc...)  -- lots of pain and suffering  
changed to : (/projects/basicRestkit) -- lots of rejoicing 
```

这导致标题搜索路径不起作用，因此找不到文件。很可能有一种方法可以使用更改标题搜索路径来查找您的文件，即使有空格也是如此。

这可能对你没有帮助，但它很好。祝你好运。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-02-26T05:55:31.487

对我来说，只有这些步骤有效。检查[这里](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)希望这会有所帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-11-07T22:49:55.650

这是一个常见的错误，会让你在修复它后想扇自己一巴掌。

是的，您肯定想添加`"$(BUILT_PRODUCTS_DIR)/../../Headers"`到您的目标中`Header Search Paths`，但**不要忘记包含引号！**

我说的是之前`$(BUILT`和之后的报价`_DIR)/../../Headers`

如果您的构建配置名称中有空格（例如我的是“Ad Hoc”）并且您刚刚添加`$(BUILT_PRODUCTS_DIR)/../../Headers` **时没有**前导和尾随引号，您最终可能会收到“词汇或预处理器问题：RestKit/RestKit.h 文件未找到”的问题。

# javascript - 单击所有兄弟元素后，如何计算兄弟元素的点击次数并更改 CSS？

> ID：10168611
> 
> 赞同：0
> 
> 时间：2012-04-16T04:07:24.253
> 
> 标签：javascript, jquery, css, jquery-traversing

我的代码是：

```
 <div class='container'>
   <label>Label 1</label>
   <div>1</div>
   <div>2</div>
   <div>3</div>
   <div>4</div>
   <div>5</div>
   <label>Label 2 </label>
   <div>1</div>
   <div>2</div>
   <div>3</div>
   <div>4</div>
  </div> 
```

如果用户单击容器内的 div，我将像这样添加“单击”类

```
$(".container>div").click(function(){
  $(this).addClass("clicked");
}); 
```

我想知道每个标签旁边点击了多少个 div，当所有 div 都被点击后，我想为该标签添加一个 CSS 类

例如，当访问者单击标签 1 旁边的所有 5 个 div 时，更改其类别，
标签 2 旁边的 4 个 div 同上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:25:37.493

[演示](http://jsfiddle.net/mplungjan/bKYQ3/)

```
$(function() {
  var counter = {};
  $(".container>label").each(function(idx) {
    var labelItem = "label"+idx;
    counter[labelItem]={max:$(this).nextUntil("label").size(), cnt:0, idx:idx};

    $(this).nextUntil("label").on("click",function() {
        if (this.className!="clicked") {
          $(this).addClass("clicked");
          counter[labelItem].cnt++;
          if (counter[labelItem].cnt >= counter[labelItem].max) {
              $(this).parent().find('label').eq(idx).addClass("full").append(" full");
          }
          $(this).append(" - clicked and added to "+labelItem+": "+counter[labelItem]);

        }
    });
  });
}); 
```

# java - 在 JSF 中水平显示动态内容

> ID：10168612
> 
> 赞同：0
> 
> 时间：2012-04-16T04:07:33.737
> 
> 标签：java, jsf-2, facelets, icefaces, uirepeat

看起来很简单，但我做不到。我需要显示一系列图像，每行 3 个。例如，如果我的集合中有 9 个元素，它应该在 3 x 3 的表格中显示 9 个图像。我正在尝试使用此代码：

```
 <h:form>
        <ice:panelGrid columns="3">
            <ui:repeat var="user" value="#{indexBean.users}" >
                <ice:panelGrid columns="1">
                    <ice:graphicImage value="#{user.picture}"/>
                    <ice:outputText value="#{user.name}"/>
                </ice:panelGrid>
            </ui:repeat>
        </ice:panelGrid>
    </h:form> 
```

但是，我得到的不是一张 3 列的有序表，而是一张图片。我可以让所有项目水平排列，`css: display:inline`但线不是从 3 个元素切割到 3 个元素。我得到一个包含所有元素的“无限”行。

请帮忙？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:16:52.133

代替

```
<ice:panelGrid columns="1"> 
```

尝试使用

```
ice:panelGroup 
```

编辑：根据评论

[正在讨论](http://jforum.icesoft.org/JForum/posts/list/4535.page)几乎类似的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T13:23:03.757

我找到了解决方案。使用 DIV 作为生成 trugth ui:repeat 的数据的容器。这是示例：

```
.panel_users {
    width:600px;
    height:400px;
    background-color:lightskyblue;
    margin:10px;
    overflow: auto;
    float:left;
}

 <h:form>
    <div class="panel_users">
        <ui:repeat var="user" value="#{indexBean.users}" >
            <ice:panelGrid columns="1" style="float: left;">
                <ice:graphicImage value="#{user.picture}"/>
                <ice:outputText value="#{user.name}"/>
            </ice:panelGrid>
        </ui:repeat>
    </div>
</h:form> 
```

`style="float: left;"`在 panelGrid 中使它们水平对齐很重要。对不起我的英语不好 ：-）

# json - 将 node.js 应用程序部署到 Heroku

> ID：10168614
> 
> 赞同：1
> 
> 时间：2012-04-16T04:07:40.440
> 
> 标签：json, node.js, heroku

使用[Heroku 网站上的简单教程](https://devcenter.heroku.com/articles/nodejs)，当我运行时，`git push heroku master`我收到以下错误：

```
 Using Node.js version: 0.4.7
       Using npm version: 1.0.106
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       npm ERR! Couldn't read dependencies.
       npm ERR! Failed to parse json
       npm ERR! Unexpected token }
       npm ERR! File: /tmp/build_17bicinzz6vv0/package.json
       npm ERR! JSON.parse Failed to parse package.json data.
       npm ERR! JSON.parse package.json must be actual JSON, not just JavaScript.
       npm ERR! JSON.parse 
       npm ERR! JSON.parse This is not a bug in npm.
       npm ERR! JSON.parse Tell the package author to fix their package.json file.
       npm ERR! 
       npm ERR! System Linux 2.6.32-343-ec2
       npm ERR! command "/tmp/node-node-c3iD/bin/node" "/tmp/node-npm-E95q/cli.js" "install" "--production"
       npm ERR! cwd /tmp/build_17bicinzz6vv0
       npm ERR! node -v v0.4.7
       npm ERR! npm -v 1.0.106
       npm ERR! file /tmp/build_17bicinzz6vv0/package.json
       npm ERR! code EJSONPARSE
       npm ERR! 
       npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_17bicinzz6vv0/npm-debug.log
       npm not ok
 !     Failed to install --production dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app 
```

我的 package.json 是：

```
{
  "name": "node-example",
  "version": "0.0.1",
  "dependencies": {
    "express": "2.2.0"
  }
} 
```

我从他们的教程中获得的 JSON 绝对没有问题，因为当我在本地运行它时，它运行良好。为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:11:48.570

我觉得这会有答案

```
 npm ERR! Additional logging details can be found in:
       npm ERR!     /tmp/build_17bicinzz6vv0/npm-debug.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:55:08.957

尝试按照 Heroku 教程提供的方式在 package.json 中添加全部内容......我也遇到了同样的错误，它是通过添加引擎删除的。

```
`{
    "name": "app-name",
    "version": "0.0.1",
    "private": true,
    "dependencies": {
      "express": "~2.5.8",
      "ejs": "~0.7.1",
      "socket.io": "~0.9.6"
  },
  "engines": {
    "node": "0.6.x"
  }
}`
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T00:10:18.877

尝试更新版本的 Node.js

# android - Android HttpResponse - 内容已被使用

> ID：10168617
> 
> 赞同：6
> 
> 时间：2012-04-16T04:08:21.380
> 
> 标签：android, httpresponse

当读取带有错误的 HttpResponse 时，下面的方法会失败：“内容已被消耗”。我知道内容只能被使用一次，但我在第一次尝试时就收到了这个错误，而且我没有在代码中看到我可能会使用它两次的任何地方。

```
 private static String getData(String url, HttpParams params) {
    StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);
        if (params != null) {
            httpGet.setParams(params);
        }
        String result = "";
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
                content.close();
                result = builder.toString();
            } 
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    return result;  
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-14T13:51:39.783

确保在 Eclipse 观察视图中没有类似 **http_response.getEntity()**的东西 如果有，那么这就是消耗你的流的原因......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:05:08.217

这是在模拟器还是在你的手机上？这可能是模拟器特定的问题。我已经在我的设备上对其进行了测试，并且效果很好。

您是否有可能正在使用内容的调试器手表？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-08T11:13:09.653

如果您不止一次地使用该实体，则可能会发生这种情况，对此类似的调用：

```
EntityUtils.toString(entity, HTTP.UTF_8)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T04:58:12.630

您的 get Data() 方法非常完美，并且运行良好我已经使用此代码进行了检查，并且它对我来说运行良好。

所以有可能你调用了这个方法两次。如果你想检查我使用下面的代码检查我得到的结果完美。

```
package com.sandeeppatel.httpget;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException; 
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.os.Bundle;

public class HttpGetActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://www.vogella.com");
    /*if (params != null) {
        httpGet.setParams(params);
    }*/
    String result = "";
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
            content.close();
            result = builder.toString();
        } 
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
 // return result;  
}
} 
```

只是我只给予互联网许可。如果你没有得到这个给我你的网址和参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T10:40:10.897

我认为您的代码是正确的。但尝试这个从 HttpEntity 访问字符串： String response_str =EntityUtils.toString(responseEntity, HTTP.UTF_8);

就像我在我的方法中使用的那样：

```
 public String SetObjectSecurity(String username, String password,
        String clientName,String docRid,String ObjectRidsForCheckSum) throws JSONException, ClientProtocolException, IOException
{
    String SetObjectSecurityURL = "url";
    StringEntity str_request_entity = null;
    HttpResponse http_response = null;

    HttpGet getrequest = new HttpGet(SetObjectSecurityURL);
    postrequest.setHeader("Accept", "application/json");
    postrequest.setHeader("Content-type", "application/json");
//set param here

    HttpClient httpClient = new DefaultHttpClient();

    http_response = httpClient.execute(getrequest);

    //Log.e("Status code ",http_response);
    HttpEntity responseEntity = http_response.getEntity();

    String response_str =EntityUtils.toString(responseEntity, HTTP.UTF_8);
    Log.e("output",response_str);
    int i = http_response.getStatusLine().getStatusCode();
    Log.e("status","code "+i);

if(i==this){

do this}
else
{
this
}       
        return response_str;
        } 
```

# sql - 使用 QT Designer 创建 TableView 到 Postgres 数据库

> ID：10168621
> 
> 赞同：1
> 
> 时间：2012-04-16T04:08:48.810
> 
> 标签：sql, postgresql, tableview, qt-designer

我正在使用 Postgres 作为后端和 QT Designer 来制作 GUI 的 Quantum GIS 中创建一个插件。我正在使用 psycopg2 在数据库中运行脚本，甚至获取查询结果以在 GUI 中设置标签的值。这东西对我来说很好用。

在通过单击“计算”按钮运行一些查询之后，我现在想做的是将结果表作为 TableView 显示在插件中。我知道有小部件专门用于查看表格，但我不太清楚如何去做。我不确定我应该使用 psycopg2 还是 PySide，因为我在网上看到的大多数示例都使用后者。

我想知道是否有人可以告诉我应该使用 psycopg2 和 PySide 之间的哪个来创建 TableView。其次，我想知道 TableView 小部件的“信号”应该是什么，以在 Postgres 中显示查询结果。最后，是否有人可以提供一些关于如何设置代码的说明，将不胜感激！

干杯，

罗马

我已经继续尝试遵循 PyQt 文档，但由于它是用 C++ 提供的，而且我只是使用 Python 的初学者程序员，我不确定我是否已经掌握了对代码语法的所有必要修改。无论如何，这就是我到目前为止所拥有的：

```
db = QSqlDatabase.addDatabase("database")
  db.setHostName("localhost")
  db.setUserName("postgres")
  db.setPassword("password")
  #Not sure what to do to set the connection. The C++ documentation says to put "bool ok = db.open();"

  model = QSqlQueryModel()
  model.setQuery("SELECT name, density, deveff FROM public." +str(filename)+ "_rezoning ORDER BY gid;")
  model.setHeaderData(0, Qt.Horizontal, "Name")
  model.setHeaderData(1, Qt.Horizontal, "Density")
  model.setHeaderData(2, Qt.Horizontal, "DevEff")

  view = QTableView()
  view.setModel(model)
  view.show() 
```

当我单击 GUI 中的按钮运行计算时会发生什么，一个小的空白 QGIS 窗口短暂闪烁并消失。至少我没有收到错误，但它显然不完整。我认为部分问题是与数据库的连接丢失并且我不知道如何设置。另一个问题是我希望它显示在 GUI 的 tableView 小部件中，但我不确定如何指定它......

任何进一步的提示？对此，我真的非常感激。

罗马

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:49:35.857

If you're planning to use Qt widgets and models, PySide (PyQt, or plain Qt/C++) is the way to go.

With bare `psycopg2` you'll have a lot more work to do, and you'll need to implement your own model in order to leverage Qt's model/view classes. This is simply not the Qt way of doing things. PySide (and PyQt) has it own means to connect to a supported database, there's no need for pure Python database adapters like `psycopg2`. It uses the underlying libqt4-sql library (C++) and the installed plugins (QPSQL, QMYSQL, QSQLITE, etc).

Essentially you need to:

1.  Connect to a database.
2.  Instantiate a model (QSqlQueryModel, QSqlTableModel or a custom QAbstractTableModel derived class)
3.  Attach that model to a view (ie. QTableView).

Take a look at the [PySide QtSql Documentation](http://www.pyside.org/docs/pyside/PySide/QtSql/) and the [PyQt documentation](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtsql.html) to get an idea. They're mostly compatible/interchangeable, but at a glance I see that the PyQt documentation looks more complete.

**EDIT (after your edit):** A Qt GUI application requires an event loop to run, and that's provided by a `QApplication` instance. Before going any further with the specifics of your app, take the time to understand a few basic concepts first. Here's a nice [Getting Started with PyQt Guide](http://www.devshed.com/c/a/Python/PyQT-Getting-Started/).

# javascript - coffeescript 存在函数运算符 else 语句？

> ID：10168623
> 
> 赞同：2
> 
> 时间：2012-04-16T04:09:12.090
> 
> 标签：javascript, coffeescript

在咖啡脚本中，在函数上使用存在运算符，如下所示：

```
myFunc?() 
```

编译为

```
typeof myFunc === "function" ? myFunc() : void 0; 
```

有没有办法优雅地定义代替“void 0”的内容？还是我必须全部写出来而不是使用原始符号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T04:37:21.023

您可以添加另一个存在运算符：

```
x = f?() ? 'pancakes' 
```

如果返回，那将不起作用，或者如果`f()`返回，它将做正确的事情。例如：`null``undefined``f()``false`

```
f = 'not a function'
console.log f?() ? 'pancakes'
# pancakes

f = -> 'is a function'
console.log f?() ? 'pancakes'
# is a function

f = -> null
console.log f?() ? 'pancakes'
# pancakes

f = ->
console.log f?() ? 'pancakes'
# pancakes

f = -> false
console.log f?() ? 'pancakes'
# false 
```

演示：http: [//jsfiddle.net/ambiguous/f6yvN/1/](http://jsfiddle.net/ambiguous/f6yvN/1/)

所以你可以接近你想要的，这可能足够接近，这取决于你期望函数返回什么样的东西。

# javascript - 在列表框中禁用多选而不转换为 DropDownList

> ID：10168638
> 
> 赞同：0
> 
> 时间：2012-04-16T04:12:26.660
> 
> 标签：javascript, asp.net-mvc, razor

我试图在我的列表框中禁用多选，但是当我调用 removeAttr('multiple') 时，它会将我的列表框变成一个下拉列表。我不想要下拉列表，我想保留列表框。我该如何调整才能做到这一点？谢谢。

```
 @Html.ListBox("ListBoxName", new SelectList((IEnumerable<Epic>)ViewData["selectedestimate"], "Id", "Name", "EstimatedTime"), new {@class = "ListBoxClass", @style = "height: 325px;", @id = "epiclistbox"})

  <script type="text/javascript">
$(document).ready(function () {
    $('select').removeAttr('multiple');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:27:56.013

您需要将`size`属性设置为`SELECT`元素，如下所示：

```
$(document).ready(function () {
    $('select').removeAttr('multiple');
    $("select").attr("size", 5);
}); 
```

# c# - 如何过滤 ObjectDataSource 返回的对象？

> ID：10168639
> 
> 赞同：1
> 
> 时间：2012-04-16T04:12:28.653
> 
> 标签：c#, asp.net, datasource, objectdatasource

我有一个`DropDownList`，它从`ObjectDataSource`返回的一个加载数据`ArrayList<MyObject>`。我想知道，如何过滤返回的`ArrayList`.

例如，`MyObject`类的属性之一是“IsCompulsory”。一旦 ODS 加载`ArrayList<MyObject>`并在将其数据绑定到 之前`DropDownList`，我想删除所有对象`IsCompulsory = false`。

我怎么做？我认为`ObjectDataSource`'s`OnSelected`事件是一个好地方，但我如何过滤值以及我应该如何返回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:58:08.347

我相信 OnSelected 方法可能来不及过滤数据。另一种方法是`Parameters`在 ObjectDataSource 上使用，以便仅查询您需要的数据。这实际上可以提高性能。您可以以声明方式或以编程方式设置它们。

这是一个示例（有关完整示例，请参见下面的链接）：

```
<asp:objectdatasource
  ID="ObjectDataSource1"
  runat="server"
  SelectMethod="GetMyObject"
  TypeName="MyNamespace.MyClass" >
  <SelectParameters>
    <asp:ControlParameter ControlID="CheckBox1" DefaultValue="false" Name="myCondition" />
  </SelectParameters>
</asp:objectdatasource> 
```

完整示例：

[http://msdn.microsoft.com/en-us/library/57hkzhy5.aspx](http://msdn.microsoft.com/en-us/library/57hkzhy5.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T04:45:26.903

您可以使用它`LINQ`来执行此操作，如下所示：

```
 List<MyObject> filteredObjects = (from MyObject obj in sourceObjects
                                          where obj.IsCompulsory == false
                                          select obj).ToList<MyObject>(); 
```

假设您的列表（要过滤）在`sourceObjects`.

PS不要忘记添加`using System.Linq;`上面的正常工作。

**编辑：**您现在需要使用`filteredObjects`as 。`DataSource``DropDownList`

# php - 从 Javascript OnClick 调用 PHP 页面时 AJAX 返回错误

> ID：10168642
> 
> 赞同：2
> 
> 时间：2012-04-16T04:12:45.570
> 
> 标签：php, javascript, html, ajax, json

我的解决方案是使用 onClick 事件调用 PHP 页面、发布参数并使用 AJAX 返回结果。我在使用指定 URL 调用 PHP 页面时插入参数。这是我的Javascript：

```
function uploadContact() {
        var name, email, phone, badgeid;
        if(window.localStorage.length > 0)
        {
            name = window.localStorage.getItem('name');
            email = window.localStorage.getItem('email');
            phone = window.localStorage.getItem('phone');
        }
        else
        {
            name = $('input[name=fullname]').val();
            email = $('input[name=email]').val();
            phone = $('input[name=phone]').val();
        }
        $.ajax({
             url: 'UpdateContactList.php?name=' + name + '&email=' + email + '&phone=' + phone,
             type: $form.attr('method'),
             dataType: 'json',
             success: function(responseJson) {
             $form.before("<p>"+responseJson.message+"</p>");
        },
        error: function() {
            $form.before("<p>There was an error processing your request.</p>");
        }});
    } 
```

我获取参数的 PHP 代码：

```
<?php

$response = array();

if($_SERVER['REQUEST_METHOD'] == 'POST')
{
  // if form has been posted process data

  // you dont need the addContact function you jsut need to put it in a new array
  // and it doesnt make sense in this context so jsut do it here
  // then used json_decode and json_decode to read/save your json in
  // saveContact()
   $data = array( 'fullname' => $_POST['name'], 'email' => $_POST['email'], 'phone' => $_POST['phone']);
      //These line is for testing only, remove it when done testing
   $test = $_POST['name'] . ' ' . $_POST['email'];
   echo "<script>alert('$test');</script>";
  // always return true if you save the contact data ok or false if it fails
   $response['status'] = updateContact($data) ? 'success' : 'error';
   $response['message'] = $response['status']
          ? 'Your submission has been saved!'
          : 'There was a problem saving your submission.';

   header("Content-type: application/json");
   echo json_encode($response);
   exit;
}
...
 function updateCacheFile($filename)
{
    $filename = "contact";
    $filename =  $filename . ".appcache";
    $cachefile = fopen ($filename, "a+");
    ....
    file_put_contents($filename, $cache_content);
} 
```

请注意2个问题：

1.  我可以使用浏览地址链接中的参数直接调用 PHP 页面，这样做不会返回任何内容。正常吗？

2.  从 JavaScript 调用。测试线（调用警告消息框）不起作用，没有消息出现。但是缓存文件仍然更新，这意味着 PHP 页面被调用并执行诸如写入文件之类的操作。

此 PHP 页面中有 2 个文件要写入。两者都正确写入，但参数不会显示，也不会显示消息框。

请告诉我这里出了什么问题。

P/S：小细节，带空格的参数可以正确传递吗？因为我希望用户输入他们的全名，例如“Bill Jobs”。

感谢 Stackoverflow 社区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:17:34.120

```
 echo "<script>alert('$test');</script>";
  // always return true if you save the contact data ok or false if it fails
   $response['status'] = updateContact($data) ? 'success' : 'error';
   $response['message'] = $response['status']
          ? 'Your submission has been saved!'
          : 'There was a problem saving your submission.';

   header("Content-type: application/json");
   echo json_encode($response); 
```

所有`header`s 必须在开始`echo`或以其他方式刷新输出之前执行。

```
 header("Content-type: application/json");
   echo "<script>alert('$test');</script>";
  // always return true if you save the contact data ok or false if it fails
   $response['status'] = updateContact($data) ? 'success' : 'error';
   $response['message'] = $response['status']
          ? 'Your submission has been saved!'
          : 'There was a problem saving your submission.';

   echo json_encode($response); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T04:18:15.533

```
$.ajax({
         url: 'UpdateContactList.php',
         data:{'name':name,'email': email,'phone':phone,'badgeid ':badgeid },
         type: $form.attr('method'),
         dataType: 'json',
         success: function(responseJson) {
         $form.before("<p>"+responseJson.message+"</p>");
    },
    error: function() {
        $form.before("<p>There was an error processing your request.</p>");
    }}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T04:29:11.560

尝试在 ajax 的数据参数中发送您的信息并将类型设置为发布。像这样...

```
$.ajax({
         url: 'UpdateContactList.php',
         type: 'post',
         dataType: 'json',
         data: {'key1': value1, 'key2':value2},
         success: function(responseJson) {
         $form.before("<p>"+responseJson.message+"</p>");
    }, 
```

# ios - iPad 模拟器 5.1 在 Xcode 4.3 中显示空白屏幕

> ID：10168647
> 
> 赞同：2
> 
> 时间：2012-04-16T04:14:40.383
> 
> 标签：ios, ios5, xcode4, ios-simulator

伙计们。请帮助我..我到处搜索，但找不到解决方案。

我正在使用 Xcode 4.3.2 并安装了 IOS 5.1 模拟器。

问题是 iPad 模拟器不显示 iPad 的框架，只显示内容。因此，主页按钮不可见，因此无法按下。

但是，与 iPad 模拟器不同的是，iPhone 模拟器可以正常工作。

请帮助，伙计们..

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:24:06.077

利用`⇧</kbd> + `⌘` + `h` in place of the home button.`

如果您需要使屏幕更小，请使用`⌘</kbd>+`3` or `⌘</kbd>+`2` for the smallest and smaller screen sizes respectively.``

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:46:46.687

Actually, I (and a colleague) have been seeing intermittent behavior, with the bezel sometimes showing up, and sometimes not, for the very same project (same version of iOS - 5.1, same build settings, etc). This happens even when simulator is set to show a normal (non-retina) iPad... sometimes it has the bezel, sometimes not.

So I doubt this is intentional design.... seems like a bug to us.......

# iphone - 在 Xcode 4.3 中添加 UIViewController 子类

> ID：10168649
> 
> 赞同：6
> 
> 时间：2012-04-16T04:15:25.060
> 
> 标签：iphone, objective-c, xcode, xcode4, uiviewcontroller

我最近从 4.2 升级到 Xcode 4.3，似乎他们已经摆脱了添加 UIViewController 子类的 New File 选项。我曾经能够做到以下几点：

File => New File... => Cocoa Touch => UIViewController 子类。

但现在新文件的选项似乎已经改变，我找不到这个选项。能以某种方式指出我正确的方向吗？

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-16T04:17:41.800

在 Xcode 7 下，这个特性有点不同：

File => New => File... => iOS (Source) => **Cocoa Touch Class** =>选择UIViewController**的“子类” 。**

**编辑：**为 Xcode 7.3 更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:17:32.337

使用`File->New->Objective-C Class`，选择`UIViewController`作为类。

# plone - 如何为不同的语言配置单独的站点标题和描述字段？

> ID：10168652
> 
> 赞同：1
> 
> 时间：2012-04-16T04:15:46.383
> 
> 标签：plone

对于多语言站点，我想为每种支持的语言分别定义站点标题和描述字段以用于 SEO 目的。

这可以通过 Plone 或插件实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:01:15.650

使用 Products.LinguaPlone；它是用于多语言网站的事实上的扩展。

首先，您的站点将配置有顶级的、每种语言的根文件夹。任何访问者都将被重定向到这些文件夹之一（例如[http://example.com/en/](http://example.com/en/)、[http://example.com/fr/](http://example.com/fr/)等），为您提供包括标题和描述在内的每种语言的元数据。

# php - 在 PHP 中，如何获取基于变量的 XML 属性？

> ID：10168653
> 
> 赞同：1
> 
> 时间：2012-04-16T04:15:49.880
> 
> 标签：php, xml, variables

我正在检索这样的文件（来自 Internet 档案）：

```
<files>
  <file name="Checkmate-theHumanTouch.gif" source="derivative">
    <format>Animated GIF</format>
    <original>Checkmate-theHumanTouch.mp4</original>
    <md5>72ec7fcf240969921e58eabfb3b9d9df</md5>
    <mtime>1274063536</mtime>
    <size>377534</size>
    <crc32>b2df3fc1</crc32>
    <sha1>211a61068db844c44e79a9f71aa9f9d13ff68f1f</sha1>
  </file>
  <file name="CheckmateTheHumanTouch1961.thumbs/Checkmate-theHumanTouch_000001.jpg" source="derivative">
    <format>Thumbnail</format>
    <original>Checkmate-theHumanTouch.mp4</original>
    <md5>6f6b3f8a779ff09f24ee4cd15d4bacd6</md5>
    <mtime>1274063133</mtime>
    <size>1169</size>
    <crc32>657dc153</crc32>
    <sha1>2242516f2dd9fe15c24b86d67f734e5236b05901</sha1>
  </file>
</files> 
```

它们可以有任意数量的`<file>`s，而我只是在寻找那些缩略图。当我找到它们时，我想增加一个计数器。当我浏览完整个文件后，我想找到中间的缩略图并返回`name`属性。

这是我到目前为止所得到的：

```
//pop previously retrieved XML file into a variable
$elem = new SimpleXMLElement($xml_file);
//establish variable
$i = 0;

// Look through each parent element in the file
foreach ($elem as $file) {
    if ($file->format == "Thumbnail"){$i++;}
}
    //find the middle thumbnail.
$chosenThumb = ceil(($i/2)-1);
    //Gloriously announce the name of the chosen thumbnail.
echo($elem->file[$chosenThumb]['name']);` 
```

最后的回显不起作用，因为它不喜欢有一个变量来选择 XML 元素。当我硬编码它时它工作正常。你能猜到我是处理 XML 文件的新手吗？

编辑：弗朗西斯·阿维拉（Francis Avila）从下面的回答让我很清楚！：

```
$sxe = simplexml_load_file($url);
$thumbs = $sxe->xpath('/files/file[format="Thumbnail"]');
$n_thumbs = count($thumbs);
$middlethumb = $thumbs[(int) ($n_thumbs/2)];
$happy_string = (string)$middlethumb[name];
echo $happy_string; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T04:32:46.147

使用 XPath。

```
$sxe = simplexml_load_file($url);
$thumbs = $sxe->xpath('/files/file[format="Thumbnail"]');
$n_thumbs = count($thumbs);
$middlethumb = $thumbs[(int) ($n_thumbs/2)];
$middlethumbname = (string) $middlethumb['name']; 
```

如果您不需要总数，也可以使用单个 XPath 表达式完成此操作：

```
$thumbs = $sxe->xpath('/files/file[format="Thumbnail"][position() = floor(count(*) div 2)]/@name');
$middlethumbname = (count($thumbs)) ? $thumbs[0]['name'] : ''; 
```

SimpleXML 的 xpath 方法的一个限制是它只能返回节点而不能返回简单类型。这就是为什么您需要使用`$thumbs[0]['name']`. 如果你使用[`DOMXPath::evaluate()`](http://php.net/manual/en/domxpath.evaluate.php)，你可以这样做：

```
$doc = new DOMDocument();
$doc->loadXMLFile($url);
$xp = new DOMXPath($doc);
$middlethumbname = $xp->evaluate('string(/files/file[format="Thumbnail"][position() = floor(count(*) div 2)]/@name)'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:28:02.590

`$elem->file[$chosenThumb]`将给出`$chosenThumb`主文件中的第 'th 元素 [] 而不是过滤后的（用于缩略图）文件 []，对吗？

```
foreach ($elem as $file) {
    if ($file->format == "Thumbnail"){
    $i++;
    //add this item to a new array($filteredFiles)
    }
}

$chosenThumb = ceil(($i/2)-1);

//echo($elem->file[$chosenThumb]['name']);
  echo($filteredFiles[$chosenThumb]['name']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:37:50.663

一些问题：

*   中间缩略图计算不正确。您必须为这些拇指保留一个单独的数组，并使用`count`.
*   `file`可能需要`{'file'}`，我不确定 PHP 是如何看待这个的。
*   您没有默认缩略图
*   您应该使用的代码是这个：

    ```
    $files = new SimpleXMLElement($xml_file);
    $thumbs = array();

    foreach($files as $file)
        if($file->format == "Thumbnail")
            $thumbs[] = $file;

    $chosenThumb = ceil((count($thumbs)/2)-1);
    echo (count($thumbs)===0) ? 'default-thumbnail.png' : $thumbs[$chosenThumb]['name']; 
    ```

**/edit：**但我推荐那个人的解决方案，使用 XPath。容易多了。

# matlab - 如何使用 Matlab 展平矩阵中的每 n 行？

> ID：10168654
> 
> 赞同：2
> 
> 时间：2012-04-16T04:16:00.763
> 
> 标签：matlab

我可以使用`reshape(M,1,[])`. 但是，这次我想将每 n 行扁平化为一行。因此，如果我们从 100 行开始并且 n=10，我们将得到 10 行。

例如

```
1 2 3
4 5 6
7 8 9
10 11 12 
```

n=2 变为

```
1 2 3 4 5 6
7 8 9 10 11 12 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:05:05.767

假设你的原始矩阵是`m`，那么：

```
reshape(m',[6 2])' 
```

产生所需的输出。我将把它留给你来推广到其他情况；如果这给您带来问题，请再次发表评论或发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:00:01.787

这应该有效。

```
reshape(M',l/n,n)' 
```

其中 n 是您定义的内容，l 是 M 中的总元素。

编辑：使它成为单线

# c - 为什么我的 .c 编码不能在 GCC 中编译？

> ID：10168659
> 
> 赞同：3
> 
> 时间：2012-04-16T04:17:31.067
> 
> 标签：c, gcc

我在 c 中有一个简单的代码：

```
#include <stdio.h>

main()
{
   printf(“Hello, world! /n”);
} 
```

但我无法在 GCC 中编译它。当我尝试编译它时的警告：

```
 1\. gcc hello.c -o hello
 2\. hello.c: In function 'main:
 3\. hello.c:4:1: error: stray '\342' in program
 4\. hello.c:4:1: error: stray '\200' in program
 5\. hello.c:4:1: error: stray '\234' in program
 6\. hello.c:4:11: error: 'Hello' undeclared (first use in this function)
 7\. hello.c:4:11: note: each undeclared identifier is reported only once for each function
    it appears in
 8\. hello.c:4:18: error: 'world' undeclared (first use in this function)
 9\. hello.c:4:23: error: expected ')' before '!' token
 10\. hello.c:4:23: error: stray '\342' in program
 11\. hello.c:4:23: error: stray '\200' in program
 12\. hello.c:4:23: error: stray '\235' in program 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T04:19:38.800

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T04:22:48.253

您可能还想将 /n 更改为 \n

# workflow-foundation-4 - 乱序竞争条件

> ID：10168662
> 
> 赞同：0
> 
> 时间：2012-04-16T04:17:43.490
> 
> 标签：workflow-foundation-4

当工作流具有在另一个接收活动之后发生的接收活动并且首先调用第二个接收活动时，工作流会在超时前阻塞调用者 1 分钟。

我希望工作流在没有匹配的工作流实例时立即返回。

我不想更改客户端的超时时间，因为某些调用可能需要一段时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:24:02.970

这是 WF4 中的一个已知问题，至少我不知道它尚未修复。

# linux - snmpd 没有监听 Ubuntu 服务器上的 161 端口

> ID：10168665
> 
> 赞同：1
> 
> 时间：2012-04-16T04:19:08.243
> 
> 标签：linux, ubuntu, snmp

*我已经通过apt-get install snmpd snmp*在我的 Ubuntu 服务器上安装了 snmpd 。然后我更改了 /etc/default/snmpd 中的行

```
SNMPDOPTS='-Lsd -Lf /dev/null -u snmp -g snmp -I -smux -p /var/run/snmpd.pid 0.0.0.0' 
```

之后，我重新启动了 snmpd 服务器（*/etc/init.d/snmpd restart*）。但是，当我运行*netstat -an | grep "LISTEN"*，我没有看到 snmpd 正在侦听端口 161。

我没有阻止该端口的任何防火墙。

```
$ sudo iptables -L
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-07T05:35:02.270

用户“nos”是正确的；UDP 绑定不会在“netstat”下显示为“LISTEN”。相反，您会看到如下一两行，表明“snmpd”确实已准备好在 UDP 端口 161 上接收数据：

```
Proto Recv-Q Send-Q Local Address  Foreign Address  State  PID/Program name
udp        0      0 0.0.0.0:161    0.0.0.0:*               1785/snmpd      
udp6       0      0 ::1:161        :::*                    1785/snmpd 
```

“netstat”手册页对“状态”列有这样的说法：

> 套接字的状态。由于在原始模式中没有状态并且在 UDP 中通常没有使用状态，因此该列可以留空。

因此，您不会期望在这里看到“LISTEN”一词。

* * *

然而，从实际的角度来看，我还想指出一件事。通常，默认的 Net-SNMP“snmpd.conf”配置文件将传入连接限制为仅本地进程。

**默认 /etc/snmp/snmpd.conf**

```
#  Listen for connections from the local system only
agentAddress  udp:127.0.0.1:161
#  Listen for connections on all interfaces (both IPv4 *and* IPv6)
#agentAddress udp:161,udp6:[::1]:161,tcp:161,tcp6:[::1]:161 
```

通常，设置“snmpd”的目的是为了让*另一*台机器可以监控它。为此，请确保注释掉第一行并启用第二行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T07:25:02.787

看起来它*正在*监听 161/UDP。从[手册页](http://linux.die.net/man/8/snmpd)：

> 默认情况下，snmpd 在所有 IPv4 接口上的 UDP 端口 161 上侦听传入的 SNMP 请求。但是，可以通过将一个或多个侦听地址指定为 snmpd 的参数来修改此行为。监听地址采用以下形式： `[<transport-specifier>:]<transport-address>`

阅读手册页以获取更多详细信息

# c# - 为 IIS 7.0 注册 HttpHandler

> ID：10168666
> 
> 赞同：1
> 
> 时间：2012-04-16T04:19:21.133
> 
> 标签：c#, asp.net, ado.net, webforms, ihttphandler

非常简单的问题，但仍然令人困惑。根据 Microsoft 文档，有必要在 Web.Config 文件的 <handlers> 部分注册一个 HttpHandler（用于从 DB 动态提供图像）：

[如何：注册 HTTP 处理程序](http://msdn.microsoft.com/en-us/library/46c5ddfy%28v=vs.100%29.aspx)

这也在关于此主题的先前答案中指定：

[HttpHandler 在 IIS 7 中不起作用](https://stackoverflow.com/questions/1465859/httphandler-not-working-in-iis-7)

混淆源于我目前在 ASP.NET Web Forms 项目中工作，而配置文件中没有任何条目。有人可以对此有所了解吗？它是否会影响处理程序对该特定任务的性能？

```
public class ImageHandler : IHttpHandler
{
    ....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:52:34.310

您的问题并不完全清楚，但在我们已经确定的评论中，您在问为什么不需要映射通过 ASP.NET .ashx 文件公开的处理程序。答案很简单：安装 ASP.NET 后，它会为 IIS7 添加一个全局处理程序，用于 *.ashx 扩展名，名称为 SimplerHandlerFactory-Integrated 和 SimpleHandlerFactory-Integrated-4.0。这个处理程序就像一个包装器一样简单地执行由 ASHX 指向的底层 IHttpHandler 实现。

# sql-server - 执行存储过程时 SQL Server 超时

> ID：10168668
> 
> 赞同：0
> 
> 时间：2012-04-16T04:19:25.177
> 
> 标签：sql-server, ado.net, timeout, command-timeout

我遇到了一个问题，即执行存储过程来更新表中的记录会导致超时错误。我最初从 MVC3 应用程序中调用我的存储过程，这是我第一次注意到错误的地方。

但是，使用 SQL Server Profiler，我能够复制由 ADO.NET 生成的代码并直接在数据库上运行。我让这个查询运行了大约 5 分钟，但它仍然没有返回任何东西。

**以下是一些事实：**

1.  存储过程有大约 100 个参数传递给它。

2.  我的 MVC 应用程序、SSMS 和 Sql Server 2008 都安装在同一台机器上。

3.  存储过程尝试更新包含大约 5000 个条目的表中的单行。

4.  有一个触发器会更新`LastModifiedDate`and `CreatedDate`，但我删除了这些触发器，并更新了 EDMX 以确定这些触发器是否导致了无限循环。

5.  我们的实时服务器运行与我尝试运行的存储过程完全相同的存储过程（使用经典 asp）并获得正确的结果。此外，实时服务器无法在 .NET 下运行相同的存储过程

6.  我的机器无法运行经典 ASP 和 ASP.NET 的存储过程

7.  存储过程似乎只对少数几行失败，而其他行则完全正常。

8.  我尝试更改传递给存储过程的参数的值

9.  其他存储过程工作正常

10.  存储过程试图更新的特定表上似乎有一个锁，因为执行其他查询工作正常，即使在等待这个查询执行时也是如此。

如果有人对我可以执行的任何其他测试有任何想法，或者我可以使用任何工具来确定超时错误的根本原因。

谢谢。

PS不要告诉我更改命令超时属性，我已尝试将其设置为零！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:34:00.967

我能想到两件事：

1.  我假设您已经在存储过程中实现了异常处理。如果没有，请这样做，并尝试先掌握问题陈述。当您说**某些**行发生这种情况时，可能是由于数据**不正确**？阅读[本文](http://msdn.microsoft.com/en-us/library/ms175976%28v=sql.100%29.aspx)以获取有关如何在`SQL Server 2008`

2.  你试过找出是否有死锁吗？请阅读[此](http://msdn.microsoft.com/en-us/library/ms178104.aspx)内容以获得详细的程序和理解。

# c# - C#：加入两个列表，不包括重复项

> ID：10168671
> 
> 赞同：3
> 
> 时间：2012-04-16T04:19:35.140
> 
> 标签：c#, list, join, concat

*什么是获取List2*并将其添加到*List1*末尾的一种简单有效的方法 - 但只有那些在连接之前尚未在 List1 中的项目**才会**被*添加*到其中？

**编辑：** 我一直在尝试这里的答案中建议的方法，但我仍然把骗子添加到 List1 中！
这是一个代码示例：

```
// Assume the existence of a class definition for 'TheObject' which contains some 
// strings and some numbers.

string[] keywords = {"another", "another", "another"};
List<TheObject> tempList = new List<TheObject>();
List<TheObject> globalList = new List<TheObject>();

foreach (string keyword in keywords)
{
    tempList = // code that returns a list of relevant TheObject(s) according to
               // this iteration's keyword.
    globalList = globalList.Union<TheObject>(tempList).ToList();
} 
```

调试时 - 在第二次迭代之后 - globalList 包含完全相同的 TheObject 对象的两个副本。当我尝试实施 Edward Brey 的解决方案时，也会发生同样的事情......

**EDIT2：**
我已经修改了返回新 tempList 的代码，以检查返回的项目是否已经在 globalList 中（通过执行！globalList.contains()） - 它现在可以工作了。
虽然，这是一种解决方法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:25:49.743

List1.Union(list2)。更多示例请访问[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T04:26:01.193

您可以使用 List 的 Union 方法，例如

```
List1.Union(list2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T04:41:52.877

`Union`如果 List1 的所有项目都不同，则LINQ将起作用。否则，为了更准确地满足既定目标，而不需要 O(m*n) 搜索时间，您可以使用哈希集（替换`T`为列表的类型）：

```
var intersection = new HashSet<T>(List1.Intersect(List2));
List1.AddRange(List2.Where(item => !intersection.Contains(item))); 
```

# php - 用于解析类似 stackoverflow 的标记的脚本/类

> ID：10168675
> 
> 赞同：0
> 
> 时间：2012-04-16T04:20:47.163
> 
> 标签：php, markup, wiki-markup

我正在寻找一个解析标记的脚本，就像在 wikis 和 stackoverflow 中使用的那样......

我更喜欢可以轻松自定义附加标记的东西

我正在使用 PHP，我正在寻找一个独立的类，它不需要来自某些框架、lib 等的外部依赖项。

我说的是一个转换这个的类/脚本：

```
**bold** 
- aaa
- bbb
- ccc 
```

进入：

**胆大**

*   啊啊啊
*   bbb
*   ccc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:40:40.923

StackOverflow 使用的特定标记语言称为 Markdown。谷歌搜索`PHP Markdown`出现了几个图书馆；我没有用过任何一个，所以我不能推荐一个。

# c - multi dim array in C

> ID：10168676
> 
> 赞同：0
> 
> 时间：2012-04-16T04:21:05.800
> 
> 标签：c, arrays

Can somebody please tell me what is wrong here?

```
int arr[15][1];
int main()
{
  int x;
  for(x=0; x<15; x++)
  {
    arr[x][0] = x;   
    arr[x][1] = x;    
  }  
  int y;
  for(y=0; y<15; y++)
  {
    printf("[%d][0]=%u\t", y, arr[y][0]);
    printf("[%d][1]=%u\n", y, arr[y][1]);
  }
} 
```

it gives me the below output, I can't figure out what's wrong, while the output for [0][0] and [0][1] should be 0, 0 and so on for the rest?

```
[0][0]=0                [0][1]=1
[1][0]=1                [1][1]=2
[2][0]=2                [2][1]=3
[3][0]=3                [3][1]=4
[4][0]=4                [4][1]=5
[5][0]=5                [5][1]=6
[6][0]=6                [6][1]=7
[7][0]=7                [7][1]=8
[8][0]=8                [8][1]=9
[9][0]=9                [9][1]=10
[10][0]=10              [10][1]=11
[11][0]=11              [11][1]=12
[12][0]=12              [12][1]=13
[13][0]=13              [13][1]=14
[14][0]=14              [14][1]=14 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T04:25:41.403

这里

```
int  arr[15][1]; 
```

您声明一个 15x1 元素的数组（因此第一个维度的索引为 0-14，第二个维度的索引为 0-0），然后设置第二个维度的 0 和 1 元素。由于没有第二维的元素 1，`arr[x][1] = x;`因此与`arr[x+1][0] = x;`

基本上，数组是存储元素的连续内存。多维数组可以看作是数组的数组：第二维是第一维时间的大小。因此，当您过度索引第二个维度时，您正在访问第一个维度的下一个元素

这也意味着`arr[x][1] = x`访问未为数组分配的内存时`x==14`

您很可能打算在第二维中有两个元素，因此将数组声明为：

```
int arr[15][2]; 
```

# android - 如何在我的安卓手机中接收 GPRS 数据包？

> ID：10168681
> 
> 赞同：1
> 
> 时间：2012-04-16T04:22:15.583
> 
> 标签：android, android-intent, gsm, gprs

我需要使用我的android手机通过GPRS接收从GSM调制解调器发送的数据包......谁能帮我发送和接收......必须使用什么协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T10:55:52.107

**在服务器启动中创建一个线程并执行以下操作**

```
ServerSocket serverSocket = new ServerSocket(8000); //8000 - port number
Socket client = serverSocket.accept();  // thread will wait here till a client connects

BufferedReader inFromClient = new BufferedReader(
                        new InputStreamReader(client.getInputStream()));
                DataOutputStream outToClient = new DataOutputStream(
                        client.getOutputStream());
while ((inputLine = inFromClient.readLine()) != null) {   
                    System.out.println("Server: " + inputLine);

                    if(inputLine.equals("END"))
                    {
                        outToClient.writeBytes("END\n");
                    }
                    else
                    {
                        outToClient.writeBytes("Received\n");
                    }
                }
                inFromClient.close();
                outToClient.close(); 
```

**它是您需要处理的 TCP 连接**

# php - PHP 和 SMTP 不能一起工作

> ID：10168684
> 
> 赞同：0
> 
> 时间：2012-04-16T04:22:41.653
> 
> 标签：php, mysql, smtp

> **可能重复：**
> [从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

我正在关注如何通过电子邮件授权注册用户的教程。我在 SMTP 上遇到了一些麻烦。我不知道为什么，但脚本不会发送电子邮件。我不知道这是 SMTP 的问题还是什么。该教程来自 2009 年，因此它可能与最新版本的 php 不完全兼容。有没有人看到导致问题的任何东西？

```
 <?php
 echo "<h1>Register</h1>";

 $submit = filter_input(INPUT_POST, 'submit');
 //form data
 $fullname = strip_tags (filter_input(INPUT_POST, 'fullname'));
 $username = strtolower(strip_tags (filter_input(INPUT_POST, 'username')));
 $password = strip_tags(filter_input(INPUT_POST, 'password'));
  $repeatpassword = strip_tags(filter_input(INPUT_POST, 'repeatpassword'));
 $date = date("Y-m-d");
 $email = strtolower(strip_tags (filter_input(INPUT_POST, 'email')));

 if ($submit)
 {
 //open database
 $connect=mysql_connect("localhost","root","myrealpasswordwouldgohere");
 mysql_select_db("phplogin");

 $namecheck = mysql_query("SELECT username FROM users WHERE username='$username'" );
 $count = mysql_num_rows($namecheck);

 if($count!=0)
 {
 die("Username already taken, please choose another");
 }

 //check for existence
if($fullname&&$username&&$password&&$repeatpassword)
{
    if ($password==$repeatpassword)
    {
    //check char length of username and fullname
        if (strlen($username)>25||strlen($fullname)>25)
        {
        echo "Length of username or full name is too long!";
        }
        else
        {
        //check password length 
            if (strlen ($password)>25 || strlen ($password)<6)
            {
            echo "Password must be between 6 and 25 characters";
            }
            else
            {
             $password = md5($password);
             //register user    

            //generate random number
            $random = rand(23456789,98765432);

            $queryreg = mysql_query("INSERT INTO users VALUES ('','$fullname','$username','$password','$email','$date','$random','0')");
            die ("You have been registered! Check your email to activate your account to activate your account.");

            $lastid = mysql_insert_id();

            //send activation email
            $to = $email;
            $subject = "Activate your Account";
            $headers = "From: ryansinclair14@gmail.com";
            $server = "smtp.gmail.com";

            ini_set("SMTP","smtp.gmail.com");

            $body = "
            Hello $fullname,\n\n
            You need to activate you account with the link below:
            http://localhost/academy/loginsession/activate.php?id=$lastid&code=$random \n\n

            Thanks!
            ";

            //function to send email
            mail($to, $subject, $body, $headers);
            die("You have been registered! Check your email to activate your account.");

            }

        }

    }
    else echo "Your passwords do not match";

}
else echo "Please fill in <b>all</b> fields!";

 }

 ?>
 <p>
 <html>

      <form action='register.php' method='POST'>
<table>
    <tr>
        <td>
        Your full name:
        </td>
        <td>
        <input type='text' name='fullname' value='<?php echo $fullname;?>'>
        </td>

    </tr>

    <tr>
        <td>
        choose a username:
        </td>
        <td>
        <input type='text' name='username' value='<?php echo $username;?>'>
        </td>

    </tr>

    <tr>
        <td>
        Choose a password:
        </td> 
        <td>
        <input type='password' name='password'>
        </td>

    </tr>

    <tr>
        <td>
        Repeat your password:
        </td> 
        <td>
        <input type='password' name='repeatpassword'>
        </td>
    </tr>
    <tr>
        <td>
        Email:
        </td> 
        <td>
        <input type='text' name='email'>
        </td>

    </tr>

     <table>
     <p>
     <input type='submit' name='submit' value='Register'>

 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:33:28.483

您可以将 phpmailer 用于 smtp 邮件

[http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/UsefulTutorial](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/UsefulTutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:01:49.073

```
<?php

    require_once "Mail.php";

    $from = "ryansinclair14@gmail.com";
    $to = "ryansinclair14@gmail.com";
    $subject = "Test";
    $body = "Hello World";

    $host = "ssl://smtp.gmail.com";
    $port = "465";
    $username = "ryansinclair14";
    $password = "PASSWORD";

    $headers = array ('From' => $from,
      'To' => $to,
      'Subject' => $subject);
    $smtp = Mail::factory('smtp',
      array ('host' => $host,
        'port' => $port,
        'auth' => true,
        'username' => $username,
        'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) {
      echo("<p>" . $mail->getMessage() . "</p>");
     } else {
      echo("<p>Message successfully sent!</p>");
     }

?> 
```

尝试这个。可能需要包含`Mail.php`安装位置的完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:33:24.430

您必须正确配置 smtp。您必须提供密码和用户名。

您可以通过以下链接。

[http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T04:33:50.037

我敢肯定，如果您使用的是 gmail 服务器，则需要正确进行身份验证。

谷歌弹出了一些看起来可能有用的东西[How to Send Email from a PHP Script Using SMTP Authentication](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

# c++ - 图像处理：“可口可乐罐”识别的算法改进

> ID：10168686
> 
> 赞同：1803
> 
> 时间：2012-04-16T04:23:16.380
> 
> 标签：c++, algorithm, image-processing, opencv

在过去几年中，我从事的最有趣的项目之一是关于[图像处理](https://en.wikipedia.org/wiki/Image_processing)的项目。目标是开发一个能够识别可口可乐**“罐头”的**系统（请注意，我强调的是“罐头”这个词，你马上就会明白为什么）。您可以在下面看到一个示例，在带有缩放和旋转的*绿色矩形中识别出罐头。*

![模板匹配](../Images/9fe469ebd2c98b8c6e76d92ec8ff657d.png)

项目的一些限制：

*   背景可能非常嘈杂。
*   *罐头*可以有任何*比例*或*旋转*甚至方向（在合理的范围内）。
*   图像可能有一定程度的模糊（轮廓可能不完全笔直）。
*   图像中可能有可口可乐瓶，算法应该只检测*罐头*！
*   图像的亮度可能会有很大差异（因此您不能“过多地”依赖颜色检测）。
*   罐子*可以*部分隐藏在侧面或中间，也可能部分隐藏在瓶子后面。
*   图像中可能根本没有*罐子*，在这种情况下，您必须什么也没找到并写一条消息说。

所以你最终可能会遇到这样棘手的事情（在这种情况下，我的算法完全失败了）：

![完全失败](../Images/c6c8d8891c8c74f05ad10695834bf749.png)

不久前我做了这个项目，做起来很有趣，而且我有一个不错的实现。以下是有关我的实现的一些细节：

**语言：使用**[OpenCV](http://opencv.org)库在 C++ 中完成。

**预处理**：对于图像预处理，即将图像转换为更原始的形式以提供给算法，我使用了两种方法：

1.  将色域从 RGB 更改为[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)并基于“红色”色调进行过滤，饱和度高于某个阈值以避免类似橙色的颜色，并过滤低值以避免暗色调。最终结果是二值黑白图像，其中所有白色像素都表示与此阈值匹配的像素。显然，图像中仍然有很多废话，但这减少了您必须处理的维度数量。 ![二值化图像](../Images/b4e785364f248c14fb9ce963ec188c4b.png)
2.  噪声过滤使用中值滤波（取所有邻居的中值像素值并以此值替换像素）来降低噪声。
3.  使用[Canny 边缘检测过滤器](http://en.wikipedia.org/wiki/Canny_edge_detector)在 2 个先例步骤后获取所有项目的轮廓。 ![轮廓检测](../Images/20edd8e528f1a0b5b20abfd20b7a5d4d.png)

**算法**：我为这项任务选择的算法本身取自[这本](https://rads.stackoverflow.com/amzn/click/com/0123725380)很棒的关于特征提取的书，称为[广义霍夫变换](http://en.wikipedia.org/wiki/Generalised_Hough_transform)（与常规霍夫变换完全不同）。它基本上说了几件事：

*   您可以在不知道其解析方程的情况下描述空间中的物体（这里就是这种情况）。
*   它可以抵抗缩放和旋转等图像变形，因为它基本上会针对缩放因子和旋转因子的每种组合测试您的图像。
*   它使用算法将“学习”的基本模型（模板）。
*   根据从模型中学到的知识，轮廓图像中剩余的每个像素都会投票给另一个像素，该像素应该是对象的中心（就重力而言）。

最后，你会得到一张投票的热图，例如这里的罐子轮廓的所有像素都会投票给它的重心，所以你会在对应的同一个像素中有很多票中心，并将在热图中看到一个峰值，如下所示：

![GHT](../Images/94bab319d957a98e6b401b3a82771333.png)

一旦你有了这个，一个简单的基于阈值的启发式可以给你中心像素的位置，你可以从中得出比例和旋转，然后在它周围绘制你的小矩形（最终的比例和旋转因子显然是相对于你的原始模板）。至少理论上...

**结果**：现在，虽然这种方法在基本情况下有效，但在某些领域严重缺乏：

*   它**非常慢**！我没有足够强调这一点。处理这 30 张测试图像几乎需要一整天，显然是因为我有一个非常高的旋转和平移比例因子，因为有些罐子非常小。
*   当瓶子出现在图像中时它完全丢失了，并且由于某种原因几乎总是找到瓶子而不是罐子（也许是因为瓶子更大，因此有更多的像素，因此有更多的选票）
*   模糊图像也不好，因为投票最终以像素形式出现在中心周围的随机位置，因此以非常嘈杂的热图结束。
*   实现了平移和旋转的不变性，但没有实现方向性，这意味着无法识别未直接面向相机目标的罐头。

你能帮我改进我的**特定**算法，使用**专门的 OpenCV**功能来解决提到的**四个特定问题吗？**

我希望有些人也能从中学到一些东西，毕竟我认为不只是提问的人应该学习。:)

* * *

## 回答 #1

> 赞同：734
> 
> 时间：2012-04-16T05:17:39.570

另一种方法是使用[尺度不变特征变换](https://en.wikipedia.org/wiki/Scale-invariant_feature_transform)(SIFT) 或[加速鲁棒特征](https://en.wikipedia.org/wiki/Speeded_up_robust_features)(SURF) 来提取特征（关键点）。

您可以在、和此页面上找到一个很好的`OpenCV`代码示例： *[Features2D + Homography to find a known object](https://docs.opencv.org/3.4/d7/dff/tutorial_feature_homography.html)*`Java``C++``Python`

两种算法对缩放和旋转都是不变的。由于它们与特征一起使用，您还可以处理[遮挡](http://en.wikipedia.org/wiki/Ambient_occlusion)（只要有足够多的关键点可见）。

![在此处输入图像描述](../Images/4cd8e8b6f3598169c4bd1f4eb17cdf52.png)

图片来源：教程示例

SIFT的处理需要几百毫秒，SURF有点快，但不适合实时应用。ORB 使用 FAST，它在旋转不变性方面较弱。

### 原始论文

*   [SURF：加速强大的功能](http://www.vision.ee.ethz.ch/%7Esurf/eccv06.pdf)
*   [来自尺度不变关键点的独特图像特征](http://www.cs.ubc.ca/%7Elowe/papers/ijcv04.pdf)
*   [ORB：SIFT 或 SURF 的有效替代品](http://www.willowgarage.com/sites/default/files/orb_final.pdf)

* * *

## 回答 #2

> 赞同：422
> 
> 时间：2012-04-17T21:06:00.240

为了加快速度，我会利用这样一个事实，即不要求您查找任意图像/对象，而是专门查找带有可口可乐徽标的图像/对象。这很重要，因为这个标志非常独特，它应该在频域中具有特征性的、尺度不变的特征，特别是在 RGB 的红色通道中。也就是说，水平扫描线（在水平对齐的标志上训练）遇到的红到白到红的交替模式在穿过标志的中心轴时将具有独特的“节奏”。这种节奏会在不同的尺度和方向上“加速”或“减速”，但会保持比例相等。您可以识别/定义几十条这样的扫描线，水平和垂直通过徽标，以及更多对角线，以星爆模式。将这些称为“签名扫描线”。

![签名扫描线](../Images/fec4bef297b91a0640e18042c0291c59.png)

在目标图像中搜索此签名很简单，只需在水平条中扫描图像即可。在红色通道中寻找高频（表示从红色区域移动到白色区域），一旦找到，看看它后面是否跟着训练课程中确定的频率节奏之一。一旦找到匹配项，您将立即知道扫描线在徽标中的方向和位置（如果您在训练期间跟踪这些内容），因此从那里识别徽标的边界是微不足道的。

如果这不是一个线性有效的算法，或者几乎是这样，我会感到惊讶。它显然不能解决你对罐头的歧视，但至少你会有你的标志。

（更新：为了识别瓶子，我会寻找与标志相邻的可乐（棕色液体）——也就是说，在瓶子*里面。或者，如果是空**瓶子*，我会寻找一个总是有相同的基本形状、大小和与徽标的距离，通常都是白色或红色。相对于徽标，在*应有*帽子的位置搜索纯色椭圆形。当然不是万无一失，但您的目标应该是*快速*找到*容易*的。）

 *（距离我的图像处理时代已经有几年了，所以我把这个建议保持在高层次和概念性上。我认为它可能稍微接近人眼的运作方式——或者至少是我的大脑的运作方式！）

* * *

## 回答 #3

> 赞同：174
> 
> 时间：2012-04-16T05:03:20.650

有趣的问题：当我看你的瓶子图片时，我还以为它也是一个罐头。但是，作为一个人类，我所做的就是区分这件事，然后我注意到它也是一个瓶子......

那么，要区分罐头和瓶子，先简单地扫描瓶子怎么样？如果你找到一个，在寻找罐头之前遮住标签。

如果你已经在做罐头，实施起来并不难。真正的缺点是它会使您的处理时间加倍。（但是考虑到现实世界的应用，你最终还是会想做瓶子；-）

* * *

## 回答 #4

> 赞同：142
> 
> 时间：2012-04-18T23:02:32.137

在第二张图像中，即使是人类也很难区分瓶子和罐子（假设瓶子的透明区域被隐藏了）？

除了很小的区域外，它们几乎相同（也就是说，罐头顶部的宽度有点小，而瓶子的包装纸的宽度始终相同，但有细微的变化，对吧？）

我首先想到的是检查瓶子的红色顶部。但这仍然是一个问题，如果瓶子没有顶部，或者它被部分隐藏（如上所述）。

我想到的第二件事是关于瓶子的透明度。OpenCV 有一些在图像中查找透明对象的工作。检查以下链接。

*   [OpenCV 会议纪要 2012-03-19](https://github.com/opencv/opencv/wiki/2012#2012-03-19)

*   [OpenCV 会议纪要 2012-02-28](https://github.com/opencv/opencv/wiki/2012#2012-02-28)

特别看看这个，看看他们检测玻璃的准确度：

*   [OpenCV 会议纪要 2012-04-24](https://github.com/opencv/opencv/wiki/2012#2012-04-24)

查看他们的实现结果：

![在此处输入图像描述](../Images/994284c2ef36b1a9814ba8bb53cd186f.png)

他们说这是[K. McHenry 和 J. Ponce，CVPR 2006 的论文“A Geodesic Active Contour Framework for Finding Glass”的](http://www-cvr.ai.uiuc.edu/ponce_grp/publication/paper/cvpr06a.pdf)实现。

这可能对您的情况有一点帮助，*但是如果瓶子被装满，问题就会再次出现。*

所以我想在这里，你可以先搜索瓶子的透明体，也可以搜索横向连接两个透明物体的红色区域，这显然是瓶子。（理想情况下，图像如下。）

![在此处输入图像描述](../Images/34b621bb097fb0c826f6bb9f89dccf42.png)

现在您可以移除黄色区域，即瓶子的标签，然后运行您的算法来找到罐头。

无论如何，这个解决方案也有与其他解决方案不同的问题。

1.  只有当你的瓶子是空的时它才有效。在这种情况下，您将不得不搜索两种黑色之间的红色区域（如果可口可乐液体是黑色的）。
2.  如果透明部分被覆盖，另一个问题。

但无论如何，如果图片中没有上述问题，这似乎是一个更好的方法。

* * *

## 回答 #5

> 赞同：54
> 
> 时间：2012-04-22T22:56:27.607

我真的很喜欢[Darren Cook](https://stackoverflow.com/a/10168923/517815)和[stacker](https://stackoverflow.com/a/10169025/517815)对这个问题的回答。我正在将我的想法投入到对这些的评论中，但我相信我的方法太像答案了，不能离开这里。

简而言之，您已经确定了一种算法来确定可口可乐徽标是否出现在空间中的特定位置。您现在正尝试针对任意方向和任意比例因子确定适用于将可口可乐*罐*与其他对象区分开来的启发式方法，包括：*瓶子*、*广告牌*、*广告*和*可口可乐用具*，所有这些都与此标志性徽标相关联。你没有在你的问题陈述中提到很多这些额外的案例，但我觉得它们对你的算法的成功至关重要。

这里的秘密是确定一个罐子包含哪些视觉特征*，*或者通过负空间确定其他可乐产品存在哪些罐头不存在的特征。为此，[当前的最佳答案](https://stackoverflow.com/a/10168923/517815)勾勒出一种选择“罐头”的基本方法，当且仅当“瓶子”未被识别时，无论是通过瓶盖、液体或其他类似的视觉启发法。

问题是这坏了。例如，一个瓶子可能是空的并且没有盖子，从而导致误报。或者，它可能是*一个带有附加功能的部分瓶子*，再次导致错误检测。不用说，这并不优雅，也对我们的目的无效。

为此，最正确的罐头选择标准似乎如下：

*   [正如您在问题中勾勒的那样，](https://stackoverflow.com/q/10168686/517815)物体轮廓的形状是否正确？如果是这样，+1。
*   如果我们假设存在自然光或人造光，我们是否检测到瓶子的镀铬轮廓表明它是否由铝制成？如果是这样，+1。
*   我们是否确定对象的[镜面反射属性](http://en.wikipedia.org/wiki/Specular_reflection)相对于我们的光源是正确的（关于[光源检测的](http://ieeexplore.ieee.org/iel5/34/28314/01265865.pdf?arnumber=1265865)[说明性视频链接](http://www.youtube.com/watch?v=oQhtzQ-UVbc)）？如果是这样，+1。
*   我们能否确定对象的任何其他将其识别为罐头的属性，包括但不限于徽标的拓扑图像倾斜、对象的方向、对象的并置（例如，在平面上像桌子或在其他罐头的情况下），以及拉片的存在？如果是这样，对于每个，+1。

您的分类可能如下所示：

*   对于每个候选匹配，如果检测到可口可乐徽标的存在，则绘制灰色边框。
*   对于超过+2的每场比赛，绘制一个红色边框。

这在视觉上向用户突出了检测到的内容，强调了可能被正确检测为破损罐头的弱阳性。

每个属性的检测都具有非常不同的时间和空间复杂度，对于每种方法，快速通过[http://dsp.stackexchange.com](http://dsp.stackexchange.com)对于确定最正确和最有效的算法是非常合理的。我的意图纯粹是强调*通过使候选检测空间的一小部分无效来检测某物是否是罐头*并不是解决此问题的最可靠或最有效的解决方案，理想情况下，您应该采取适当的措施因此。

嘿，祝贺[黑客新闻发布！](http://news.ycombinator.com/item?id=3846063)总的来说，这是一个非常棒的问题，值得它受到宣传。:)

* * *

## 回答 #6

> 赞同：42
> 
> 时间：2012-04-16T08:31:29.263

**看形状**

看看罐头/瓶子的红色部分的形状。注意罐子顶部是如何逐渐变细的，而瓶子标签是直的。您可以通过比较红色部分在其长度上的宽度来区分这两者。

**看亮点**

区分瓶子和罐头的一种方法是材料。瓶子由塑料制成，而罐头由铝金属制成。在光线充足的情况下，观察镜面反射是区分瓶子标签和罐头标签的一种方式。

据我所知，这就是人类如何区分这两种标签的方式。如果光照条件不好，无论如何区分两者肯定会有一些不确定性。在这种情况下，您必须能够检测到透明/半透明瓶子本身的存在。

* * *

## 回答 #7

> 赞同：38
> 
> 时间：2012-04-17T20:56:15.107

请查看 Zdenek Kalal 的[Predator 追踪器](https://web.archive.org/web/20121025151628/http://info.ee.surrey.ac.uk/Personal/Z.Kalal/tld.html)。它需要一些训练，但它可以主动学习跟踪对象在不同方向和比例下的外观，并实时进行！

源代码可在他的网站上找到。它在[MATLAB](http://en.wikipedia.org/wiki/MATLAB)中，但社区成员可能已经完成了 Java 实现。我已经成功地在 C# 中重新实现了 TLD 的跟踪器部分。如果我没记错的话，TLD 使用蕨类植物作为关键点检测器。如果对象被跟踪器丢失，我会使用 SURF 或 SIFT（@stacker 已经建议）来重新获取对象。跟踪器的反馈使得随着时间的推移轻松构建筛选/冲浪模板的动态列表，随着时间的推移能够以非常高的精度重新获取对象。

如果您对我的跟踪器的 C# 实现感兴趣，请随时提问。

* * *

## 回答 #8

> 赞同：36
> 
> 时间：2012-04-16T04:54:25.920

如果您不仅限于一台不受您的限制的相机，也许您可​​以转而使用诸如 Xbox [Kinect](http://en.wikipedia.org/wiki/Kinect)之类的距离传感器。有了这个，您可以对图像执行基于深度和颜色的匹配分割。这允许更快地分离图像中的对象。然后，您可以使用 ICP 匹配或类似技术来匹配罐的形状，而不仅仅是其轮廓或颜色，并且鉴于它是圆柱形的，如果您之前对目标进行了 3D 扫描，这可能是任何方向的有效选项。这些技术通常非常快，特别是当用于应该解决您的速度问题的特定目的时。

我还可以建议，不一定是为了准确性或速度，而是为了好玩，你可以在你的色调分割图像上使用一个训练有素的神经网络来识别罐子的形状。这些速度非常快，通常可以达到 80/90% 的准确率。培训将是一个漫长的过程，因为您必须手动识别每张图像中的罐头。

* * *

## 回答 #9

> 赞同：25
> 
> 时间：2012-04-16T05:13:11.850

这可能是一个非常幼稚的想法（或者可能根本行不通），但所有可乐罐的尺寸都是固定的。如果同一张图片同时包含罐头和瓶子，那么您可以根据尺寸考虑将它们区分开来（瓶子会更大）。现在由于缺少深度（即 3D 映射到 2D 映射），瓶子可能看起来缩小并且没有尺寸差异。[您可以使用立体成像](http://www.cs.cf.ac.uk/Dave/Vision_lecture/node11.html)恢复一些深度信息，然后恢复原始大小。

* * *

## 回答 #10

> 赞同：25
> 
> 时间：2012-04-16T06:34:38.113

我会检测红色矩形：RGB -> HSV，过滤红色 -> 二值图像，[关闭](http://undergraduate.csse.uwa.edu.au/units/CITS4240/Lectures/morphology.pdf)`imclose`（先扩张然后腐蚀，在 matlab中称为）

然后从大到小查看矩形。在已知位置/比例中具有较小矩形的矩形都可以被删除（假设瓶子比例恒定，较小的矩形将是瓶盖）。

这会给您留下红色矩形，然后您需要以某种方式检测徽标以判断它们是红色矩形还是可乐罐。像 OCR，但有一个已知的标志？

* * *

## 回答 #11

> 赞同：23
> 
> 时间：2014-07-12T16:12:27.487

嗯，我实际上认为我正在*做某事*（这就像有史以来最有趣的问题——所以即使找到了一个可以接受的答案，如果不继续尝试找到“完美”的答案，那将是一种耻辱）.. .

一旦你找到标志，你的麻烦就完成了一半。然后你只需要弄清楚标志**周围的区别。**此外，我们希望尽可能少做额外的事情。我认为这实际上是这个简单的部分......

标志周围是*什么*？对于罐子，我们可以看到金属，尽管有灯光的影响，但它的基本颜色并没有发生任何变化。只要我们知道标签的角度，我们就可以知道它正上方是什么，所以我们正在研究它们之间的区别：

![](../Images/53b35cb44c3b38d9817d4c221c7eb270.png)

在这里，标志上方和下方是完全黑暗的，颜色一致。在这方面相对容易。

![](../Images/b0e22f1ba49d0de64c6fb490253f580f.png)

在这里，上面和下面的东西很轻，但颜色仍然一致。它是全银的，而且全银金属实际上看起来非常罕见，一般来说也是银色。此外，它在一个薄薄的滑行中，并且与已经识别的红色足够接近，因此您可以追踪其整个长度的形状，以计算可以被认为是罐头金属环的百分比。真的，你只需要在罐子上的任何地方占一小部分就可以看出它是其中的一部分，但你仍然需要找到一个平衡点，以确保它不仅仅是一个空瓶子，后面有金属东西。

![](../Images/8d351bb4a29f47e619d4e20e141ad6db.png)

最后，棘手的一个。但不是那么棘手，一旦我们只通过我们可以直接在红色包装上面（和下面）看到的内容。它是透明的，这意味着它将显示其背后的任何内容。这很好，因为它背后的东西不太可能像罐头的银色圆形金属一样颜色一致。它后面可能有很多不同的东西，这会告诉我们它是一个空的（或装满透明液体）的瓶子，或者是一致的颜色，这可能意味着它装满了液体，或者瓶子只是在一个纯色。我们正在使用最接近顶部和底部的东西，正确颜色出现在正确位置的可能性相对较小。我们知道它是一个瓶子，因为它没有罐子的关键视觉元素，

**（最后一个是我能找到的最好的一个空的大可口可乐瓶——有趣的是，盖子和环是黄色的，这表明可能不应该依赖盖子的发红）**

在罕见的情况下，瓶子后面有类似的银色阴影，即使在塑料被提取之后，或者瓶子以某种方式充满了相同的银色液体，我们可以回归到我们可以粗略估计为银的形状——正如我提到的，它是圆形的，遵循罐头的形状。但即使我缺乏图像处理方面的任何知识，这听起来也很慢。更好的是，为什么不通过检查标志的**两侧**来推断出这一点，以确保那里没有相同的银色？啊，但是如果罐子后面有同样的银色呢？然后，我们确实需要更多地关注形状，再看看罐头的顶部和底部。

取决于这一切需要多么完美，它可能会很慢，但我想我的基本概念是首先检查最简单和最接近的东西。在努力计算其他元素的形状之前，先检查已经匹配的形状周围的颜色差异（无论如何这似乎是最微不足道的部分）。列出它，它是：

*   找到主要的吸引力（红色标志背景，可能还有标志本身的方向，但如果罐子被转开，你需要只专注于红色）
*   再次通过非常独特的红色验证形状和方向
*   检查形状周围的颜色（因为它快速且无痛）
*   最后，如果需要，验证主要景点周围的颜色形状是否正确。

如果您无法做到这一点，则可能意味着罐子的顶部和底部都被覆盖了，人类可以用来可靠地区分罐子和瓶子的唯一可能的东西是遮挡和反射罐头，这将是一场**更难**处理的战斗。但是，更进一步，您可以使用其他答案中提到的半透明扫描技术，按照罐子/瓶子的角度检查更多类似瓶子的特征。

有趣的额外噩梦可能包括一个罐子，它方便地坐在瓶子后面，距离很远，以至于它的金属恰好显示在标签的上方和下方，只要你沿着红色的整个长度扫描，它仍然会失败标签 - 这实际上是一个更大的问题，因为您没有检测到您可以拥有的罐子，而不是考虑到您实际上正在检测一个瓶子，包括偶然发现的罐子。在那种情况下，杯子是半空的！

* * *

作为免责声明，我在这个问题之外没有经验，也从未考虑过图像处理，但这很有趣，让我对此进行了深入思考，在阅读了所有其他答案之后，我认为这可能是完成它的最简单**和**最有效的方法。就个人而言，我很高兴我*实际上*不必考虑编程！

**编辑**

![用 MS 油漆画的罐子不好](../Images/a602ba9b1605503c45a2592488dc6f8a.png) 此外，看看我在 MS Paint 中绘制的这幅图……它非常糟糕而且非常不完整，但仅根据形状和颜色，你就可以猜出它可能会是什么。从本质上讲，这些是唯一需要费心扫描的东西。当您如此近距离地观察那非常独特的形状和颜色组合时，它还能是什么？我没有画的那一点，白色背景，应该被认为是“任何不一致的东西”。如果它有一个透明的背景，它几乎可以覆盖任何其他图像，你仍然可以看到它。

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2012-04-19T07:15:46.100

我不知道 OpenCV，但从逻辑上看问题，我认为您可以通过更改您正在寻找的图像（即可口可乐）来区分瓶子和罐头。你应该加入直到罐头的顶部，因为在罐头的情况下，可口可乐顶部有银色衬里，如果是瓶子，则没有这样的银色衬里。

但显然这个算法在罐头被隐藏的情况下会失败，但在这种情况下，即使是人类也无法区分两者（如果只有瓶/罐的可口可乐部分是可见的）

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2018-03-16T04:18:02.800

回答这个问题迟了几年。在过去 5 年中，随着 CNN 将最先进的技术推向极限，我现在不会使用 OpenCV 来完成这项任务！（**我知道你特别想要问题中的 OpenCv 功能**）我觉得对象检测算法，如 Faster-RCNN、YOLO、SSD 等，与 OpenCV 功能相比，会以显着的优势解决这个问题。如果我现在要解决这个问题（6 年后！！）我肯定会使用**Faster-RCNN**。

* * *

## 回答 #14

> 赞同：16
> 
> 时间：2013-09-24T14:14:11.817

我喜欢这个挑战，并想给出一个答案，这解决了这个问题，我想。

1.  提取标志的特征（关键点、SIFT、SURF等描述符）
2.  将点与徽标的模型图像匹配（使用匹配器，例如 Brute Force ）
3.  估计刚体的坐标（PnP 问题 - SolvePnP）
4.  根据刚体估计帽的位置
5.  进行反投影并计算瓶盖的图像像素位置（ROI）（我假设你有相机的内在参数）
6.  用方法检查帽子是否在那里。如果有，那么这就是瓶子

帽的检测是另一个问题。它可以是复杂的，也可以是简单的。如果我是你，我会简单地检查 ROI 中的颜色直方图来做一个简单的决定。

如果我错了，请提供反馈。谢谢。

* * *

## 回答 #15

> 赞同：13
> 
> 时间：2013-01-04T06:10:22.317

我喜欢你的问题，不管它是否离题：P

一个有趣的旁白；我刚刚完成了我的学位课程，其中涵盖了机器人技术和计算机视觉。我们本学期的项目与您描述的项目非常相似。

我们必须开发一个机器人，它使用 Xbox Kinect 在各种照明和环境条件下检测任何方向的可乐瓶和易拉罐。我们的解决方案包括在 Hue 通道上使用带通滤波器并结合霍夫圆变换。我们能够稍微限制环境（我们可以选择机器人和 Kinect 传感器的位置和方式），否则我们将使用 SIFT 或 SURF 变换。

[您可以在我关于该主题的博客文章中](http://elucidatedbinary.com/blog/2012/12/03/kinect/)了解我们的方法:)

* * *

## 回答 #16

> 赞同：12
> 
> 时间：2017-05-08T19:27:00.340

**深度学习**

收集至少几百张包含可乐罐的图像，将它们周围的边界框注释为正类，包括可乐瓶和其他可乐产品，将它们标记为负类以及随机对象。

除非您收集非常大的数据集，否则请对小数据集执行使用深度学习功能的技巧。理想情况下使用支持向量机 (SVM) 与深度神经网络的组合。

一旦您将图像输入到先前训练的深度学习模型（例如 GoogleNet），而不是使用神经网络的决策（最终）层进行分类，而是使用先前层的数据作为特征来训练您的分类器。

OpenCV 和谷歌网络： [http ://docs.opencv.org/trunk/d5/de7/tutorial_dnn_googlenet.html](http://docs.opencv.org/trunk/d5/de7/tutorial_dnn_googlenet.html)

OpenCV 和 SVM： [http ://docs.opencv.org/2.4/doc/tutorials/ml/introduction_to_svm/introduction_to_svm.html](http://docs.opencv.org/2.4/doc/tutorials/ml/introduction_to_svm/introduction_to_svm.html)

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2013-01-03T15:26:41.543

有一堆用于识别物体的颜色描述符，下面的论文比较了很多。当与 SIFT 或 SURF 结合使用时，它们特别强大。单独的 SURF 或 SIFT 在可口可乐罐图像中不是很有用，因为它们不能识别很多兴趣点，您需要颜色信息来提供帮助。我在一个项目中使用 BIC（边界/内部像素分类）和 SURF，它在识别物体方面效果很好。

[用于 Web 图像检索的颜色描述符：一项比较研究](http://sibgrapi.sid.inpe.br/col/sid.inpe.br/sibgrapi@80/2008/07.23.23.58/doc/penatti-ColorDescriptorsWeb.pdf)

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2017-09-08T17:46:46.887

您需要一个从经验中有机地学习和提高分类准确性的程序。

我会建议深度学习，随着深度学习这成为一个微不足道的问题。

您可以在 Tensorflow 上重新训练 inception v3 模型：

[如何为新类别重新训练 Inception 的最后一层](https://www.tensorflow.org/tutorials/image_retraining)。

在这种情况下，您将训练一个卷积神经网络来将对象分类为可口可乐罐或不可口可乐罐。

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2014-12-04T06:39:28.270

作为所有这些不错的解决方案的替代方案，您可以训练自己的分类器并使您的应用程序对错误具有鲁棒性。例如，您可以使用[Haar Training](http://note.sonots.com/SciSoftware/haartraining.html)，提供大量目标的正面和负面图像。

仅提取罐头可能很有用，并且可以与透明物体的检测相结合。

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2014-04-09T23:40:43.773

[MVTec](http://www.mvtec.com)有一个名为 HALCON 的计算机视觉包，它的演示可以为您提供很好的算法思路。有很多与您的问题类似的示例，您可以在演示模式下运行，然后查看代码中的运算符，看看如何从现有的 OpenCV 运算符中实现它们。

我已经使用这个包为此类问题快速构建了复杂算法的原型，然后找到了如何使用现有的 OpenCV 特性来实现它们。特别是对于您的情况，您可以尝试在 OpenCV 中实现嵌入在运算符[find_scaled_shape_model](http://www.halcon.com/download/reference/find_scaled_shape_model.html)中的功能。一些运营商指出有关算法实现的科学论文可以帮助找出如何在 OpenCV 中做类似的事情。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-02-05T19:33:18.830

Maybe too many years late, but nevertheless a theory to try.

The ratio of bounding rectangle of red logo region to the overall dimension of the bottle/can is different. In the case of Can, should be 1:1, whereas will be different in that of bottle (with or without cap). This should make it easy to distinguish between the two.

Update: The horizontal curvature of the logo region will be different between the Can and Bottle due their respective size difference. This could be specifically useful if your robot needs to pick up can/bottle, and you decide the grip accordingly.

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-05-12T22:07:26.340

如果您对它是实时的感兴趣，那么您需要添加一个预处理过滤器以确定使用重型材料扫描的内容。一个很好的快速、非常实时的预处理过滤器，可以让您扫描更可能是可口可乐罐的东西，而不是在移动到更多不确定的东西之前：搜索图像以查找最大的补丁与`sqrt(pow(red,2) + pow(blue,2) + pow(green,2))`可口可乐罐有一定公差的颜色。从非常严格的颜色容差开始，然后逐步降低到更宽松的颜色容差。然后，当您的机器人用完分配的时间来处理当前帧时，它会将当前找到的瓶子用于您的目的。请注意，您必须调整 RGB 颜色`sqrt(pow(red,2) + pow(blue,2) + pow(green,2))`以使它们恰到好处。

此外，这看起来真的很愚蠢，但是您是否确保在`-oFast`编译 C 代码时打开编译器优化？

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2017-09-04T11:40:21.690

我要寻找的第一件事是颜色 - 类似 RED ，在图像中进行红眼检测时 - 有一定的颜色范围要检测，考虑到周围区域的一些特征，例如与另一只眼睛的距离，如果它在图像中确实可见。

1：第一个特征是颜色，红色非常占优势。检测到可口可乐红后，有几个感兴趣的项目 1A：这个红色区域有多大（它的数量是否足以确定真罐 - 10 个像素可能不够），1B：它是否包含标签的颜色 - “可口可乐”或波浪。1B1：是否足以考虑它是标签的高概率。

第 1 项是一种捷径——如果图像中不存在这种情况，则进行预处理——继续前进。

因此，如果是这种情况，我可以利用我的图像的那部分并开始查看更多缩小问题区域 - 基本上查看周围区域/边缘......

2: Given the above image area ID'd in 1 - verify the surrounding points [edges] of the item in question. A: Is there what appears to be a can top or bottom - silver? B: A bottle might appear transparent , but so might a glass table - so is there a glass table/shelf or a transparent area - if so there are multiple possible out comes. A Bottle MIGHT have a red cap, it might not, but it should have either the shape of the bottle top / thread screws, or a cap. C: Even if this fails A and B it still can be a can - partial.. This is more complex when it is partial because a partial bottle / partial can might look the same , so some more processing of measurement of the Red region edge to edge.. small bottle might be similar in size ..

3：经过上述分析后，我会查看字母和波浪徽标 - 因为我可以定向搜索单词中的一些字母因为您可能没有所有文本，因为没有所有的可以，波浪会在某些点与文本对齐（距离方面），所以我可以搜索那个概率并知道在距离 x 的那个点处应该存在哪些字母。*

# ipad - ipad 1 视频镜像全屏

> ID：10168687
> 
> 赞同：0
> 
> 时间：2012-04-16T04:23:36.833
> 
> 标签：ipad, video, mirroring

我在电视上镜像我的应用程序，使用[这篇关于 iPad 视频镜像的帖子](http://www.touchcentric.com/blog/)，在 iPad1 中

问题是图像不是全屏，

我怎样才能使图像全屏？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:25:23.280

图像很可能没有正确缩放，因为您的 iPad 的纵横比是 4:3，而您的电视（如果是高清）很可能是 16:9。

# java - Java 正则表达式仅用于大写字母和数字

> ID：10168694
> 
> 赞同：3
> 
> 时间：2012-04-16T04:24:12.303
> 
> 标签：java, regex, string

我正在尝试在 Java 中做一个简单的正则表达式，但由于某种原因它失败了。我想做的就是验证一个字符串是否包含大写字母和/或数字。所以 ABC1、111 和 ABC 是有效的，但 abC1 不是。

所以我试着这样做：

```
 if (!e.getId().matches("[A-Z0-9]")) {
        throw new ValidationException(validationMessage);
    } 
```

我确保 e.getId() 有 ABC1 但它仍然抛出异常。我知道这是一件非常小而愚蠢的事情，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T04:30:02.383

用作`^[A-Z0-9]+$`匹配模式。但是`matches`方法匹配整个字符串，`[A-Z0-9]+`就足够了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T04:30:40.367

您可以尝试以下正则表达式：

```
[\p{Digit}\p{Lu}]+ 
```

IE：

```
if (!e.getId().matches("[\\p{Digit}\\p{Lu}]+")) {
    throw new ValidationException(validationMessage);
} 
```

# ruby-on-rails - Omniauth 停止工作：会发生什么变化？

> ID：10168697
> 
> 赞同：0
> 
> 时间：2012-04-16T04:24:55.240
> 
> 标签：ruby-on-rails, ruby, devise, omniauth

我正在使用设计和omniauth“使用谷歌/雅虎登录”到我正在构建的网站。它工作得很好，但现在我几天后回来了，它不再工作了，它在日志中抛出这个：警告：无法验证 CSRF 令牌的真实性

“用 facebook 登录”工作正常。

有什么可以改变的？我不记得碰过任何东西。也许我运行 bundle install 并且发生了一些变化。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T06:12:56.450

CSRF 令牌是 Rails 在 HTML 页面上呈现为表单的东西。然后，当提交表单时，会根据您的会话检查令牌。Yahoo 没有要检查的会话，您可能需要让 Yahoo 回调提供一个可以显式检查的键，在它调用的回调中，然后`skip_before_filter :verify_authenticity_token`为它。

# iphone - iOS 中的 SQLite 行为异常

> ID：10168700
> 
> 赞同：0
> 
> 时间：2012-04-16T04:25:39.077
> 
> 标签：iphone, ios, sqlite

我是 iOS 开发的新手，最近我在 iOS SQLite 上遇到了一些奇怪的行为。我有一个允许用户将记录插入 SQLite DB 的应用程序。该应用程序工作正常，但一段时间后，用户创建的记录不知何故自行消失。发生这种情况时，随后当我尝试创建新记录时，它不会将记录存储在数据库中。插入语句执行没有错误，但数据没有插入。下面是执行记录插入逻辑的函数。请帮忙，谢谢。

```
+ (BOOL)insertAutoRecord:(AutoRecord *)record{
  BOOL ret = NO;

  NSString *query = [NSString stringWithFormat:@"insert into %@ (%@, %@, %@, %@, %@, %@, %@) values ('%@', %d, %d, '%@', %d, %d, %d)",
                   TABLE_NAME_AUTOMATIC_RECORDS,
                   COL_NAME_AUTO_RECORD_SENSOR_ID,
                   COL_NAME_AUTO_RECORD_MONITOR_START_DATE,
                   COL_NAME_AUTO_RECORD_MONITOR_END_DATE, 
                   COL_NAME_AUTO_RECORD_FREE_TEXT,
                   COL_NAME_AUTO_RECORD_CREATE_DATE,
                   COL_NAME_AUTO_RECORD_KID_ID,
                   COL_NAME_AUTO_RECORD_LAST_SYNC_DATE,
                   record.sensorId,
                   record.startDate,
                   record.endDate,
                   [record.freeText stringByReplacingOccurrencesOfString:@"'" withString:@"''"],
                   record.createDate,
                   record.kidId,
                   0];

 KSDelegate *appDelegate = (KSDelegate *)[[UIApplication sharedApplication] delegate];
 sqlite3 *dbHandler = appDelegate.dbHandler;

 sqlite3_stmt *stmt;
 const char *insert_stmt = [query UTF8String];

 sqlite3_prepare_v2(dbHandler, insert_stmt, -1, &stmt, NULL);
 if (sqlite3_step(stmt) == SQLITE_DONE)
 {
    ret = YES;
 }
 else
 {
    ret = NO;
 }
 sqlite3_finalize(stmt);

 if(ret == NO)
    return NO;

 query = [NSString stringWithFormat:@"select last_insert_rowid()"];

 if(sqlite3_prepare(dbHandler, [query UTF8String], -1, &stmt, nil) != SQLITE_OK)
    return NO;

 if(sqlite3_step(stmt) == SQLITE_ROW)
 {
    int recordId = (int)sqlite3_column_int(stmt, 0);
    record.recordId = recordId;
 }
 else
    ret = NO;

 sqlite3_finalize(stmt);

 return ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:34:36.577

这里是 SQlite 的完美示例和示例代码..我建议你通过它...

[适用于 iOS 开发人员的 SQlite 教程](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)

# google-app-engine - App Engine 的 Blobstore 对 API 调用是免费的吗？

> ID：10168702
> 
> 赞同：0
> 
> 时间：2012-04-16T04:25:39.997
> 
> 标签：google-app-engine, blobstore, datastore

由于读/写操作价格（不是存储价格），数据存储非常昂贵。但我没有看到 Memcache 和 Blobstore API 调用价格的任何价格。它是免费的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T06:01:46.140

正如[计费文档](https://developers.google.com/appengine/docs/billing)所说：使用 Blobstore，没有每次 API 调用成本，但您需要为存储付费（每月 0.026 美元）。除此之外，还有标准的 0.12 美元/Gb 流量成本，您需要为所有流量付费。

# scala - 如何使用 ScalaQuery 仅选择一个符合 where 子句的第一条或最后一条记录？

> ID：10168707
> 
> 赞同：4
> 
> 时间：2012-04-16T04:26:11.983
> 
> 标签：scala, scalaquery

具有以下查询模板以选择全部：

```
val q = for {
  a <- Parameters[Int]
  b <- Parameters[Int]
  t <- T if t.a == a && t.b == b
  _ <- Query.orderBy(t.c, t.d)
} yield t 
```

我需要修改它以选择匹配条件的第一个（具有最小值`c`和`d`最小值`c`）或最后一个（具有最大值`c`和`d`最大值）的记录。我通常强烈不希望选择其他（除了最后/第一个）记录，因为它们有数十万条......`c``where`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T04:52:55.090

Invoker trait 上定义了一个方法`firstOption`，并且通过某种魔法，它可以在 Query 类上使用。所以也许你可以这样尝试：

```
val q = for {
  a <- Parameters[Int]
  b <- Parameters[Int]
  t <- T if t.a == a && t.b == b
  _ <- Query.orderBy(t.c, t.d)
} yield t
q.firstOption 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T12:24:55.873

当前构建 OP 查询的方式存在潜在危险。按原样运行，获取 100K 结果集的第一个或最后一个结果效率不是很高（不太可能，是的，但重点是，查询对返回的行数没有限制）

使用直接 SQL，您永远不会做这样的事情；相反，您会添加一个`LIMIT 1`

在 ScalaQuery 中，LIMIT = take(n)，因此添加`take(1)`以获取*从查询本身返回的单个记录*

```
val q = (for {
  a <- Parameters[Int]
  b <- Parameters[Int]
  t <- T if t.a == a && t.b == b
  _ <- Query.orderBy(t.c, t.d)
} yield t) take(1)
q.firstOption 
```

# xcode - Lion OSX 中的多个 xcode 版本

> ID：10168709
> 
> 赞同：0
> 
> 时间：2012-04-16T04:27:19.513
> 
> 标签：xcode, osx-lion, multiple-versions

我想在我的 iMac OSX Lion 中安装 xcode 4.1。但在我的 iMac 中，我有 Xcode 4.2.1。如何安装 iOS 4.1 但不覆盖 Xcode 4.2.1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:37:14.973

首先下载并安装 Xcode 4.1，然后去 Mac App Store 下载 4.3.2 版本。安装 4.3.2 时会提示删除旧版本，选择否。您将能够这样做，因为旧版本的 Xcode (4.1) 安装到 /Developer，而这个最新版本 (4.3.2) 是一个安装到 /Applications 的 .app 包。

# .htaccess - 使用 htaccess 转发域但保留 url 结构

> ID：10168711
> 
> 赞同：-1
> 
> 时间：2012-04-16T04:27:29.967
> 
> 标签：.htaccess, dns

我有一个停放的域 www.my-domain.com
我也有一个托管的活动域 sub.active-domain.com
我想将 www.my-domain.com 转发到 sub.active-domain.com 但保持 url 开启浏览器中来自 sub.active-domain.com 的结构

示例：
sub.active-domain.com/content/market.html
将在 url 上显示为
www.my-domain.com/content/market.html

如何通过 htaccess 文件进行操作？还是我应该通过 DNS 或 CNAME 来做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:37:27.397

最好的方法是使用**.htaccess**。但是，只要将 URL 重定向到某个地方，就无法保留该 URL。或者其他明智的使用**iframe**。

# c - 传递声明为指向函数的指针的变量是否与传递未声明为指针的变量的地址相同？

> ID：10168717
> 
> 赞同：0
> 
> 时间：2012-04-16T04:28:41.357
> 
> 标签：c, pointers, pass-by-reference, pass-by-value

即使经过多年的 C，指针仍然让我感到困惑。

这两个是一样的吗：

```
int *num;
someFunc(num) 
```

和

```
int num;
someFunc(&num); 
```

声明一个变量`*`使其成为一个指针，`&`将一个变量（暂时）变成一个指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:32:03.320

不，它们不一样。在第一种情况下，您有一个指向某个随机内存位置的指针（因为您尚未初始化它）。在第二种情况下，获得的指针`someFunc`将指向一个有效的位置（变量的地址`num`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T04:33:17.180

它们在函数调用方面是相同的。然而

不同的是......

`int num` 是一个实际的整数，您获取它的地址。然后可以将其放入指针中

`int *num` 是指向 int 的指针，但是，对于您的代码，它并不指向可以保存值的实际 int。

所以只有第二个例子是工作代码。

如果...，第一个将起作用

```
int x;
int *num = &x;
someFunc(num) 
```

someFunc 看起来像

```
void someFunc(int *blah)
{
} 
```

所以基本上`int* num = &x` 是当你进行函数调用时发生的事情，`someFunc(&num)` 即它实际上只是在做 `int* blah = &num`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T04:31:48.983

第二个传递整数的地址，这`num`是一件非常合理的事情。第一个传递存储在指针中的任何内容`num`。那*应该*是 a 的地址`int`，但在您的示例`num`中未初始化，并且该地址可能指向垃圾（充其量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T04:31:56.173

`&`不会“将变量转换为指针”，它是一个返回变量地址的运算符。根据定义，它是一个指针。因此，没有区别，函数`someFunc`以任何一种方式接收指针值（在第一种情况下，它接收指针变量的值的副本，在第二种情况下，它接收 的返回值的副本`operator &`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T04:36:35.090

在第一种情况下，您声明`num`是指向整数的指针。在第二种情况下`num`是一个整数。

对于`someFunc`函数，在这两种情况下，传递的参数都是指向整数的指针。因此，要打印您需要取消引用的值`printf("%d\n", *num)`。

在这两种情况下，由于您尚未初始化，因此该值将是一些垃圾。

希望有帮助。

**在 FreeBSD 上更新**我第一个出现分段错误，因为未初始化的指针可能指向了它不应该指向的地方。

# directshow - 编解码器是如何注册的？

> ID：10168719
> 
> 赞同：0
> 
> 时间：2012-04-16T04:29:13.133
> 
> 标签：directshow, codec, wmp

我正在尝试更深入地了解编解码器区域以及它是如何工作的。

主要驱动因素是安装编解码器包以处理某些无法播放的视频的不确定性，这最终导致无论如何都不允许播放这些文件。通过在顶部安装其他编解码器包，这通常会变得复杂。我还注意到，有时简单地重新安装编解码器包可能会导致以前可以播放的视频在重新安装编解码器包后无法播放。

我最好奇的是安装编解码器包（Shark007、CCCP、K-Lite）时在后台发生了什么——编解码器如何注册到不同的播放器，特别是 Windows 媒体播放器？WMP 内部是否有已知编解码器列表，其中添加了新编解码器？如何确定我是否有特定编码类型的特定编解码器？DirectShow 及其过滤器如何与新的编解码器协同工作？

我发现的大多数信息都是非常顶级的，大多数建议是使用编解码器包设置和/或安装其他编解码器包.. :(

任何关于该领域（书籍、链接等）的进一步信息的建议或建议将不胜感激！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:07:55.577

在 Windows 中，使用最广泛的多媒体 API 是 DirectShow，正如您在问题标签中指出的那样，您可能正是针对它的。还有其他 API。重要说明是 DirectShow**不是**Windows Media Player 的主要 API：WMP 将尝试通过 Media Foundation 播放文件，如果失败，第二次尝试将利用旧版 DirectShow。尽管如此，DirectShow 仍然是应用程序中最常用的。

在 DirectShow 中，多媒体管道是由过滤器构建的，过滤器通过它们的引脚连接成一个图形。连接的结构具有流过的数据，例如从文件到解码的视频/音频传送到设备。编解码器是此管道中经常使用的组件。

编解码器的注册是[Filter Mapper](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375788%28v=vs.85%29.aspx)子系统的权限范围。它负责所有注册并为[Intelligent Connect](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390342%28v=vs.85%29.aspx)提供连接选项- 将东西连接在一起的子系统，包括在需要时提供编解码器以及应用程序请求自动提供编解码器。

您可以在 MSDN 上的[DirectShow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)下找到有关内部结构的最佳文档。

# matlab - 在MATLAB中制作两个相同尺寸的图像

> ID：10168723
> 
> 赞同：-1
> 
> 时间：2012-04-16T04:30:01.700
> 
> 标签：matlab

我正在尝试应用 SURF 算法，该算法是找到关键点并匹配相应的两个图像的算法，但问题是在我的情况下，我想将该算法应用于两个图像，但它们的尺寸不同，所以它无法正常工作，请您告诉我该怎么做才能使两个图像的尺寸相等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:57:50.123

这取决于你的问题。如果图像具有相同的分辨率，我建议您裁剪一张图像或扩展一张图像（用零？）以匹配像素数。

否则，我建议您对图像进行插值，以便在相同的点定义它们，例如使用[interp2](http://www.mathworks.de/help/techdoc/ref/interp2.html)。

你能给出一个你正在尝试做的最小工作代码示例吗？

编辑：

您提供的[代码示例](http://www.mathworks.com/matlabcentral/fileexchange/28300)从加载到图像开始。

```
% Example 2, Corresponding points
% Load images
I1=imread('TestImages/lena1.png');
I2=imread('TestImages/testc2.png'); 
```

以下是一些如何使图像匹配的示例。您必须决定其中哪一个对您的情况有意义。

方法一：裁剪两张图片

```
nrows = min(size(I1,1), size(I2,1));
ncols = min(size(I1,2), size(I2,2));

% The + floor( ... ) is only for centering the bounding box
croppedI1 = I1( (1:nrows) + floor((size(I1,1)-nrows)/2), ...
  (1:ncols)+floor((size(I1,2)-ncols)/2), ...
  :);

croppedI2 = I2( (1:nrows) + floor((size(I2,1)-nrows)/2, ...
  (1:ncols) + floor((size(I2,2)-ncols)/2), ...
  :);

I1=croppedI1;
I2=croppedI2; 
```

方法2：用零扩展图像直到它们匹配

```
nrows = max(size(I1,1), size(I2,1));
ncols = max(size(I1,2), size(I2,2));
nchannels = size(I1,3);

extendedI1 = [ I1, zeros(size(I1,1), ncols-size(I1,2), nchannels); ...
  zeros(nrows-size(I1,1), ncols, nchannels)];

extendedI2 = [ I2, zeros(size(I2,1), ncols-size(I2,2), nchannels); ...
  zeros(nrows-size(I2,1), ncols, nchannels)];

I1=extendedI1;
I2=extendedI2; 
```

方法3：将第二张图片缩放到第一张的大小（这会破坏纵横比）

```
% Scale the coordinates so that they range from 0 to 1 each.
[X1, Y1]=meshgrid( linspace(0, 1, size(I1,2)), linspace(0, 1, size(I1,1)));
[X2, Y2]=meshgrid( linspace(0, 1, size(I2,2)), linspace(0, 1, size(I2,1)));
nchannels = size(I1,3);

% interpolate each color plane separately
for k=1:nchannels
  scaledI2(:,:,k)=interp2(X2, Y2, double(I2(:,:,k)), X1, Y1); 
end

%I1=I1;
I2=scaledI2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T17:21:42.020

```
% code for to play the images or to take same size images into array

r=0;c=0;

a1=imread(filename1);    

[r c]=size(a1);

b=imread(filename2);

a2= imresize(b, [r c/3]); 

% re-sized second image according to 1st one if u have specific   
 row col number then you can give like that 

a=cat(4,a1,a2);       % "a" array having a1 a2 images       

implay(a,framerate );   % to play images 
```

# amazon-ec2 - 官网的 Amazon EC2 Spot Instance 价格属于哪个可用区？

> ID：10168729
> 
> 赞同：1
> 
> 时间：2012-04-16T04:30:27.957
> 
> 标签：amazon-ec2

我们可以在 EC2 Web 控制台中查看特定区域中不同可用区的现货价格。但是，对于特定区域的特定实例类型，官方网站上只显示一个价格。官网显示的现货价格与网页控制台（不同区域）显示的现货价格有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:33:21.883

如果您指的是此页面：[http ://aws.amazon.com/ec2/spot-instances/](http://aws.amazon.com/ec2/spot-instances/)

亚马逊声明：'下表显示了每个区域和实例类型的 Spot 价格（每 5 分钟更新一次）。除了 Linux/Unix 和 Windows，我们还为运行 SUSE Linux Enterprise Server 的 Amazon EC2 提供 Spot 实例。AWS GovCloud 区域目前不支持 Spot 实例。

您可以使用下拉选择器选择区域。价格每 5 分钟更新一次。

# variables - x86 程序集使用哪个变量大小（db、dw、dd）？

> ID：10168743
> 
> 赞同：79
> 
> 时间：2012-04-16T04:32:57.790
> 
> 标签：variables, assembly, x86

我是一个组装初学者，我不知道所有的 db、dw、dd 是什么意思。我试图编写这个执行 1+1 的小脚本，将其存储在一个变量中，然后显示结果。到目前为止，这是我的代码：

```
.386
.model flat, stdcall 
option casemap :none
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib
.data
num db ? ; set variable . Here is where I don't know what data type to use.
.code
start:
mov eax, 1               ; add 1 to eax register
mov ebx, 1               ; add 1 to ebx register
add eax, ebx             ; add registers eax and ebx
push eax                 ; push eax into the stack
pop num                  ; pop eax into the variable num (when I tried it, it gave me an error, i think  thats because of the data type)
invoke StdOut, addr num  ; display num on the console.
invoke ExitProcess       ; exit
end start 
```

我需要了解 db、dw、dd 的含义以及它们如何影响变量设置和组合以及诸如此类的事情。

在此先感谢，

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-16T04:39:58.370

快速复审，

*   **DB** - 定义字节。8 位
*   **DW** - 定义字。在典型的 x86 32 位系统上通常为 2 个字节
*   **DD** - 定义双字。在典型的 x86 32 位系统上通常为 4 个字节

来自[x86 汇编教程](http://www.cs.virginia.edu/~evans/cs216/guides/x86.html)，

> pop 指令**将 4 字节数据元素从硬件支持的堆栈顶部**移到指定的操作数（即寄存器或内存位置）中。它首先将位于内存位置 [SP] 的 4 个字节移动到指定的寄存器或内存位置，然后将 SP 加 4。

你的 num 是 1 个字节。尝试将其声明为`DD`4 个字节并与`pop`语义匹配。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-03-21T09:27:47.950

完整名单是：

DB、DW、DD、DQ、DT、DDQ 和 DO（用于在输出文件中声明初始化数据。）

见：[http ://www.tortall.net/projects/yasm/manual/html/nasm-pseudop.html](http://www.tortall.net/projects/yasm/manual/html/nasm-pseudop.html)

它们可以通过多种方式调用：（注意：对于 Visual-Studio - 使用“h”而不是“0x”语法 - 例如：不是 0x55 而是 55h）：

```
 db      0x55                ; just the byte 0x55
    db      0x55,0x56,0x57      ; three bytes in succession
    db      'a',0x55            ; character constants are OK
    db      'hello',13,10,'$'   ; so are string constants
    dw      0x1234              ; 0x34 0x12
    dw      'A'                 ; 0x41 0x00 (it's just a number)
    dw      'AB'                ; 0x41 0x42 (character constant)
    dw      'ABC'               ; 0x41 0x42 0x43 0x00 (string)
    dd      0x12345678          ; 0x78 0x56 0x34 0x12
    dq      0x1122334455667788  ; 0x88 0x77 0x66 0x55 0x44 0x33 0x22 0x11
    ddq     0x112233445566778899aabbccddeeff00
    ; 0x00 0xff 0xee 0xdd 0xcc 0xbb 0xaa 0x99
    ; 0x88 0x77 0x66 0x55 0x44 0x33 0x22 0x11
    do      0x112233445566778899aabbccddeeff00 ; same as previous
    dd      1.234567e20         ; floating-point constant
    dq      1.234567e20         ; double-precision float
    dt      1.234567e20         ; extended-precision float 
```

DT 不接受数字常量作为操作数，DDQ 也不接受浮点常量作为操作数。任何大于 DD 的大小都不接受字符串作为操作数。

# ios - initWithCVPixelBuffer 失败，因为 CVPixelBufferRef 不是非 IOSurface 支持的

> ID：10168746
> 
> 赞同：0
> 
> 时间：2012-04-16T04:33:12.123
> 
> 标签：ios, core-image

我收到 YUV 帧（kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange），当从 CVPixelBufferRef 创建 CIImage 时，我得到：

> initWithCVPixelBuffer 失败，因为 CVPixelBufferRef 不是非 IOSurface 支持的。

```
CVPixelBufferRef pixelBuffer;

size_t planeWidth[] = { width, width / 2 };
size_t planeHeight[] = { height, height / 2};
size_t planeBytesPerRow[] = { width, width / 2 };

CVReturn ret = CVPixelBufferCreateWithBytes(
kCFAllocatorDefault, width, height, kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange,
data, bytesPerRow, 0, 0, 0, &pixelBuffer
);

if (ret != kCVReturnSuccess)
{
    NSLog(@"FAILED");

    CVPixelBufferRelease(pixelBuffer);

    return;
}

CVPixelBufferLockBaseAddress(pixelBuffer, 0);

// fails
CIImage * image = [[CIImage alloc] initWithCVPixelBuffer:pixelBuffer];

CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);

CVPixelBufferRelease(pixelBuffer);

[image release]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T15:41:16.350

我假设问题是：“为什么会出现这个错误？”

要支持 CVPixelBuffer IOSurface，您需要在创建 CVPixelBuffer 时设置属性。现在，您将“0”作为 CVPixelBufferCreateWithBytes 中的倒数第二个参数传递。

在 CVPixelBufferCreate（因为您不能将 kCVPixelBufferIOSurfacePropertiesKey 与 CVPixelBufferCreateWithBytes 一起使用）传递一个带有 kCVPixelBufferIOSurfacePropertiesKey 键的字典和一个空字典的值（使用默认 IOSurface 选项，其他未记录），复制正确的字节到创建的 CVPixelBuffer（不要'不要忘记字节对齐）。这就是你如何让它支持 IOSurface。

虽然我不确定它是否会因为像素格式而为您消除所有错误。我的理解是，GPU 必须能够以该像素格式保存纹理才能用作 IOSurface，尽管我不确定 100%。

注意：可以在[这个 SO answer](https://stackoverflow.com/a/31839916/1735276)中找到正确复制 kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange 的像素字节。

# android - 在 API-8 之前等效的 Environment.DIRECTORY_PICTURES

> ID：10168751
> 
> 赞同：2
> 
> 时间：2012-04-16T04:33:46.127
> 
> 标签：android, api, camera

该`Environment.DIRECTORY_PICTURES`变量存储 Android 2.2 (API 8) 中图像目录的路径。

在 8 之前的版本中获取此路径的最合理方法是什么？

它可能（总是在 8 之前的版本中？）相当于 sdcard 挂载点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:02:42.957

真正的答案：你不能确定。

最可能的答案：`Environment.getExternalStorageDirectory().getAbsolutePath() + "/DCIM"`

如果您知道添加到设备的最后一张图片来自相机，您可以在此处使用解决方案：[获取相机的当前图片文件夹](https://stackoverflow.com/questions/8092691/get-current-picture-folder-of-camera)

# javascript - Sencha Touch2 - 卡片布局的面板不起作用

> ID：10168753
> 
> 赞同：1
> 
> 时间：2012-04-16T04:33:52.730
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我有 tabpanel，其中包含一些选项卡。我将专注于此处的第 6 个选项卡 - navigatingPanels.js 文件。在这个文件中，我有一个卡片布局，以便用户可以填写 form1 并在提交时移动到 form2（滑动到 form2）。我还有一个带有后退按钮的停靠工具栏，以便用户可以返回到 form1（如果需要）。它给出了一个错误 -

```
Uncaught Error: [ERROR][Ext.Base#callParent] Invalid item given: undefined, must be either the config object to factory a new item, or an existing component instance. 
```

该应用程序可以在这里看到 - [http://maalguru.in/touch/Raxa-70/MyApp/](http://maalguru.in/touch/Raxa-70/MyApp/)

更新 - 如果我在相关面板中添加一张额外的卡片，并删除 form1 和 form2（必需的面板/卡片），那么它工作正常。在这种情况下，我必须将 ActiveItem 设置为所需的卡片（form1 和 form2）。更改了视口 - [http://pastebin.com/P4k04dBQ](http://pastebin.com/P4k04dBQ) 是否有任何解决方案可以仅使用 2 个面板/卡来实现？

**视口.js**

```
Ext.define('MyApp.view.Viewport', {
    extend: 'Ext.TabPanel',
    xtype: 'my-viewport',

    config: {
        fullscreen: true,
        tabBarPosition: 'bottom',

        items: [{
            xclass: 'MyApp.view.navigatingPanels'
        }]
    }
}); 
```

**导航面板.js**

```
Ext.define('MyApp.view.navigatingPanels', {
    extend: 'Ext.Panel',
    id: 'navigatingPanels',
    xtype: 'navigatingPanels',
    config: {
        iconCls: 'user',
        title: 'Navigating Panels',
        layout: 'card',
        animation: {
            type: 'slide',
            direction: 'left'
        },
        defaults: {
            styleHtmlContent: 'true'
        },
        items: [{
                docked: 'top',
                xtype: 'toolbar',
                title: 'Registeration Form',
                items: [{
                    text: 'Back',
                    ui: 'back',
                    align: 'centre',
                    //back button to take the user back from form2 to form1
                    handler: function() {
                        Ext.getCmp('navigatingPanels').setActiveItem(form1);

                    }
                }]
            },
            form1,
            form2
        ]
    }

});

var form1 = new Ext.Panel({
    scrollable: 'vertical',
    items: [{
        xtype: 'fieldset',
        title: 'Form 1',
        items: [{
                xtype: 'textfield',
                label: 'Name',
                name: 'name',
            },
            {
                xtype: 'button',
                text: 'Save Data & move to form2',
                ui: 'confirm',
                //TODO add some action: to store data
                //save data & move to form2
                handler: function() {
                    Ext.getCmp('navigatingPanels').setActiveItem(form2, {
                        type: 'slide',
                        direction: 'right'
                    });
                    console.log("Form1");
                }
            }
        ]
    }]
});
var form2 = new Ext.Panel({
    scrollable: 'vertical',
    items: [{
        xtype: 'fieldset',
        title: 'Form 2',
        items: [{
                xtype: 'textareafield',
                label: 'Message',
                name: 'message'
            },
            {
                xtype: 'button',
                text: 'Submit Data',
                ui: 'confirm',
                //TODO add some action: to store data
                //action: 'Submit Data'
            }
        ]
    }]
}); 
```

**应用程序.js**

```
Ext.Loader.setConfig({
    enabled: true
});
Ext.application({
    name: 'MyApp',

    controllers: ['Main'],

    launch: function() {
        Ext.create('MyApp.view.Viewport', {
            fullscreen: true
        });

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T23:27:19.567

最后我得到了答案。组件实例不应作为 中的项目给出`Ext.define`，而应给出它们的配置。setActiveItem 可以正常调用 -

> Ext.getCmp('navigatingPanels').setActiveItem(0);

**代码片段**

```
Ext.define('MyApp.view.navigatingPanels', {
    extend: 'Ext.Panel',
    id: 'navigatingPanels',
    xtype: 'navigatingPanels',
    config: {
        iconCls: 'user',
        title: 'Navigating Panels',
        layout: 'card',
        animation: {
            type: 'slide',
            direction: 'left',
            duration: 300
        },
        defaults: {
            styleHtmlContent: 'true'
        },
        items: [{
                docked: 'top',
                xtype: 'toolbar',
                title: 'Registeration Form',
                items: [{
                    text: 'Back',
                    ui: 'back',
                    align: 'centre',
                    //back button to take the user back from form2 to form1
                    handler: function() {
                        Ext.getCmp('navigatingPanels').setActiveItem(0, {
                            type: 'slide',
                            reverse: 'true',
                            duration: '300'
                        });
                        console.log(Ext.getCmp('navigatingPanels'));

                    }
                }]
            },
            {
                xtype: 'fieldset',
                title: 'Form 1',
                scrollable: 'vertical',
                items: [{
                        xtype: 'textfield',
                        label: 'Name',
                        name: 'name',
                    },
                    {
                        xtype: 'button',
                        text: 'Save Data & move to form2',
                        ui: 'confirm',
                        //TODO add some action: to store data
                        //save data & move to form2
                        handler: function() {
                            Ext.getCmp('navigatingPanels').setActiveItem(1, {
                                type: 'slide',
                                direction: 'right'
                            });
                            console.log("Form1");
                        }
                    }
                ]
            },
            {
                scrollable: 'vertical',
                items: [{
                    xtype: 'fieldset',
                    title: 'Form 2',
                    items: [{
                            xtype: 'textareafield',
                            label: 'Message',
                            name: 'message'
                        },
                        {
                            xtype: 'button',
                            text: 'Submit Data',
                            ui: 'confirm',
                            //TODO add some action: to store data
                            //action: 'Submit Data'
                        }
                    ]
                }]
            }
        ]
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:56:43.920

尝试这个...

```
myNavigationPanel = Ext.create('MyApp.view.navigatingPanels');
myNavigationPanel.setActiveItem(0);

Ext.define('MyApp.view.Viewport', {
    extend: 'Ext.TabPanel',
    xtype: 'my-viewport',

    config: {
        fullscreen: true,
        tabBarPosition: 'bottom',

        items: [{
                xclass: 'MyApp.view.Home'
            },
            {
                xclass: 'MyApp.view.Contact'
            },
            {
                xclass: 'MyApp.view.Products'
            },
            {
                xclass: 'MyApp.view.Forms'
            },
            {
                xclass: 'MyApp.view.NestedTabPanels'
            },
            myNavigationPanel
        ]
    }
}); 
```

# haskell - 在haskell中解析字符串

> ID：10168756
> 
> 赞同：1
> 
> 时间：2012-04-16T04:34:24.087
> 
> 标签：haskell

我有一些字符串要解析为“块”列表。我的字符串看起来像这样

```
"some text [[anchor]] some more text, [[another anchor]]. An isolated [" 
```

我希望得到这样的东西

```
[
   TextChunk "some text ",
   Anchor "anchor",
   TextChunk " some more text, "
   Anchor "another anchor",
   TextChunk ". An isolated ["
] 
```

我已经设法编写了一个函数和类型来满足我的需要，但它们看起来过于丑陋。有没有更好的方法来做到这一点？

```
data Token = TextChunk String | Anchor String deriving (Show)
data TokenizerMode = EatString | EatAnchor deriving (Show)

tokenize::[String] -> [Token]
tokenize xs =  
  let (_,_,tokens) = tokenize' (EatString, unlines xs, [TextChunk ""])
  in reverse tokens

tokenize' :: (TokenizerMode, String, [Token]) -> (TokenizerMode, String,[Token])
-- If we're starting an anchor, add a new anchor and switch modes
tokenize' (EatString, '[':'[':xs, tokens) = tokenize' (EatIdentifier, xs, (Identifier ""):tokens )
-- If we're ending an anchor ass a new text chunk and switch modes
tokenize' (EatAnchor, ']':']':xs, tokens) = tokenize' (EatString, xs, (TextChunk ""):tokens )
-- Otherwise if we've got stuff to consume append it
tokenize' (EatString, x:xs, (TextChunk t):tokens) = tokenize'( EatString, xs, (TextChunk (t++[x])):tokens)
tokenize' (EatAnchor, x:xs, (Identifier t):tokens) = tokenize'( EatAnchor, xs, (Identifier (t++[x])):tokens)
--If we've got nothing more to consume we're done.
tokenize' (EatString, [], tokens) = ( EatString, [], tokens)
--We'll only get here if we're given an invalid string
tokenize' xx = error ("Error parsing .. so far " ++ (show xx)) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T08:57:47.897

这应该有效，包括单独的括号：

```
import Control.Applicative ((<$>), (<*), (*>))
import Text.Parsec

data Text = TextChunk String
          | Anchor String
          deriving Show

chunkChar = noneOf "[" <|> try (char '[' <* notFollowedBy (char '[')) 
chunk     = TextChunk <$> many1 chunkChar
anchor    = Anchor <$> (string "[[" *> many (noneOf "]") <* string "]]")
content   = many (chunk <|> anchor)

parseS :: String -> Either ParseError [Text]
parseS input = parse content "" input 
```

注意当解析器匹配两个左括号`try`时允许回溯的使用。`chunkChar`没有`try`，第一个括号将在那时被消耗掉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T08:08:41.000

这是一个使用两个相互递归函数的简单版本。

```
module Tokens where

data Token = TextChunk String | Anchor String deriving (Show)

tokenize :: String -> [Token]
tokenize = textChunk emptyAcc

textChunk :: Acc -> String -> [Token]
textChunk acc []           = [TextChunk $ getAcc acc]
textChunk acc ('[':'[':ss) = TextChunk (getAcc acc) : anchor emptyAcc ss 
textChunk acc (s:ss)       = textChunk (snocAcc acc s) ss

anchor :: Acc -> String -> [Token]
anchor acc []              = error $ "Anchor not terminated" 
anchor acc (']':']':ss)    = Anchor (getAcc acc) : textChunk emptyAcc ss
anchor acc (s:ss)          = anchor (snocAcc acc s) ss

-- This is a Hughes list (also called DList) which allows 
-- efficient 'Snoc' (adding to the right end).
--
type Acc = String -> String

emptyAcc :: Acc
emptyAcc = id

snocAcc :: Acc -> Char -> Acc
snocAcc acc c = acc . (c:)

getAcc :: Acc -> String
getAcc acc = acc [] 
```

这个版本有一个问题，如果输入以 Anchor 开始或结束，或者文本中有两个连续的锚点，它将生成空的 TextChunks。

如果累加器为空，则添加检查以不生成 TextChunk 是直截了当的，但它使代码的长度增加了大约两倍 - 也许我毕竟会达到 Parsec ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:20:11.480

使用 monadic Parsec 的解决方案。

```
import Text.ParserCombinators.Parsec

data Text = TextChunk String
          | Anchor String
          deriving Show

inputString = "some text [[anchor]] some more text, [[another anchor]]."  

content :: GenParser Char st [Text]
content = do
    s1 <- many (noneOf "[")
    string "[["
    s2 <- many (noneOf "]")
    string "]]"
    s3 <- many (noneOf "[")
    string "[["
    s4 <- many (noneOf "]")
    string "]]."
    return $ [TextChunk s1, Anchor s2, TextChunk s3, Anchor s4]

parseS :: String -> Either ParseError [Text]
parseS input = parse content "" input 
```

这个怎么运作：

```
> parseS inputString 
Right [TextChunk "some text ",Anchor "anchor",TextChunk " some more text, ",Anchor "another anchor"]
it :: Either ParseError [Text] 
```

# javascript - 如何在页面加载时加载此 jquery 通知栏而不是单击按钮？

> ID：10168757
> 
> 赞同：2
> 
> 时间：2012-04-16T04:34:25.777
> 
> 标签：javascript, jquery, html, notifications, popup

我需要一些调整建议，因为我不熟悉 javascript 和 jquery。我想在页面加载时在页面顶部添加通知。例如，当我加载我的主页（index.html）时，我希望出现通知。

当前示例仅在我单击按钮时弹出通知。我希望它在我加载页面时出现。有人可以帮我吗？我对这个通知栏有点兴趣。

我从[http://tympanus.net/Development/jbar/得到它](http://tympanus.net/Development/jbar/)

我当前的代码是这样的（index.html）：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
    <head>
        <title>jQuery Plugin jBar</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <link rel="stylesheet" type="text/css" href="css/style.css" media="screen"/>
    </head>
    <body>
        <div class="content">           
                <a id="msgup" class="button">Demo Top</a>
        </div>

    <script src="jquery-1.3.2.js" type="text/javascript"></script>
    <script src="jquery.bar.js" type="text/javascript"></script>
    <script>
        $("#msgup").bar({
            color            : '#1E90FF',
            background_color : '#FFFFFF',
            removebutton     : false,
            message          : 'Your profile customization has been saved!',
            time             : 4000
        });
    </script>   
    </body>
</html> 
```

和 jquery.bar.js 文件：

```
 (function($) {

    $.fn.bar = function(options) {
        var opts = $.extend({}, $.fn.bar.defaults, options);
        return this.each(function() {
            $this = $(this);
            var o = $.meta ? $.extend({}, opts, $this.data()) : opts;

            $this.click(function(e){
                if(!$('.jbar').length){
                    timeout = setTimeout('$.fn.bar.removebar()',o.time);
                    var _message_span = $(document.createElement('span')).addClass('jbar-content').html(o.message);
                    _message_span.css({"color" : o.color});
                    var _wrap_bar;
                    (o.position == 'bottom') ? 
                    _wrap_bar     = $(document.createElement('div')).addClass('jbar jbar-bottom'):
                    _wrap_bar     = $(document.createElement('div')).addClass('jbar jbar-top') ;

                    _wrap_bar.css({"background-color"   : o.background_color});
                    if(o.removebutton){
                        var _remove_cross = $(document.createElement('a')).addClass('jbar-cross');
                        _remove_cross.click(function(e){$.fn.bar.removebar();})
                    }
                    else{               
                        _wrap_bar.css({"cursor" : "pointer"});
                        _wrap_bar.click(function(e){$.fn.bar.removebar();})
                    }   
                    _wrap_bar.append(_message_span).append(_remove_cross).hide().insertBefore($('.content')).fadeIn('fast');
                }
            })

        });
    };
    var timeout;
    $.fn.bar.removebar  = function(txt) {
        if($('.jbar').length){
            clearTimeout(timeout);
            $('.jbar').fadeOut('fast',function(){
                $(this).remove();
            });
        }   
    };
    $.fn.bar.defaults = {
        background_color    : '#FFFFFF',
        color               : '#000',
        position            : 'top',
        removebutton        : true,
        time                : 5000  
    };

})(jQuery); 
```

我确定 index.html 需要更改它如何加载通知。但我不知道要编辑什么。请帮忙，因为我想学习这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T04:59:53.430

快速而肮脏的方法是打电话

```
$("#msgup").click(); 
```

在你做完你所有的事情之后

```
$("#msgup").bar({
  ...
}); 
```

东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T04:55:08.470

我看到插件只添加了一个`click`事件监听器。所以你可以假装点击，在`index.html`之前添加这段代码`</head>`：

```
 <script> $(document).ready(function(){ $("#msgup").trigger('click') }); </script> 
```

它会起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T04:50:39.280

```
$(document).ready(function(){
    $("#msgup").bar({
        color            : '#1E90FF',
        background_color : '#FFFFFF',
        removebutton     : false,
        message          : 'Your profile customization has been saved!',
        time             : 4000
    });
}); 
```

# jenkins-plugins - 出现错误原因：不是 v4.0.0 POM。对于项目 org.kohsuke.stapler:maven-stapler-plugin 试图构建幻灯片插件

> ID：10168758
> 
> 赞同：3
> 
> 时间：2012-04-16T04:34:33.853
> 
> 标签：jenkins-plugins

当我尝试构建（mvn）幻灯片插件时，出现错误：（请参阅下面的详细标准输出）

mvn -e

```
+ Error stacktraces are turned on.
[INFO] Scanning for projects...
[WARNING] POM for 'org.kohsuke.stapler:maven-stapler-plugin:pom:1.15:runtime' is invalid.

Its dependencies (if any) will NOT be available to the current build.
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: org.kohsuke.stapler:maven-stapler-plugin
POM Location: /home/kahmed/.m2/repository/org/kohsuke/stapler/maven-stapler-plugin/1.15/maven-stapler-plugin-1.15.pom

Reason: Not a v4.0.0 POM. for project org.kohsuke.stapler:maven-stapler-plugin at /home/kahmed/.m2/repository/org/kohsuke/stapler/maven-stapler-plugin/1.15/maven-stapler-plugin-1.15.pom

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Unable to build project for plugin 'org.kohsuke.stapler:maven-stapler-plugin': Not a v4.0.0 POM. for project org.kohsuke.stapler:maven-stapler-plugin at /home/kahmed/.m2/repository/org/kohsuke/stapler/maven-stapler-plugin/1.15/maven-stapler-plugin-1.15.pom
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.loadPluginFully(DefaultLifecycleExecutor.java:1599)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.findArtifactTypeHandlersInPlugins(DefaultLifecycleExecutor.java:1468)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.findExtensions(DefaultLifecycleExecutor.java:222)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:178)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.InvalidPluginException: Unable to build project for plugin 'org.kohsuke.stapler:maven-stapler-plugin': Not a v4.0.0 POM. for project org.kohsuke.stapler:maven-stapler-plugin at /home/kahmed/.m2/repository/org/kohsuke/stapler/maven-stapler-plugin/1.15/maven-stapler-plugin-1.15.pom
    at org.apache.maven.plugin.DefaultPluginManager.checkRequiredMavenVersion(DefaultPluginManager.java:293)
    at org.apache.maven.plugin.DefaultPluginManager.verifyVersionedPlugin(DefaultPluginManager.java:205)
    at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginManager.java:184)
    at org.apache.maven.plugin.DefaultPluginManager.loadPluginFully(DefaultPluginManager.java:1626)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.loadPluginFully(DefaultLifecycleExecutor.java:1582)
    ... 15 more
Caused by: org.apache.maven.project.InvalidProjectModelException: Not a v4.0.0 POM. for project org.kohsuke.stapler:maven-stapler-plugin at /home/kahmed/.m2/repository/org/kohsuke/stapler/maven-stapler-plugin/1.15/maven-stapler-plugin-1.15.pom
    at org.apache.maven.project.DefaultMavenProjectBuilder.readModel(DefaultMavenProjectBuilder.java:1599)
    at org.apache.maven.project.DefaultMavenProjectBuilder.readModel(DefaultMavenProjectBuilder.java:1571)
    at org.apache.maven.project.DefaultMavenProjectBuilder.findModelFromRepository(DefaultMavenProjectBuilder.java:562)
    at org.apache.maven.project.DefaultMavenProjectBuilder.buildFromRepository(DefaultMavenProjectBuilder.java:251)
    at org.apache.maven.plugin.DefaultPluginManager.checkRequiredMavenVersion(DefaultPluginManager.java:277)
    ... 19 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 second
[INFO] Finished at: Mon Apr 16 00:32:26 EDT 2012
[INFO] Final Memory: 15M/182M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:42:41.650

我也得到了这个（虽然它用于 akuma 神器）并且可以解释原因，但还没有找到一个好的解决方案。两者都定义了一个父 POM 和一个新的 repo：

```
<parent>
  <groupId>org.kohsuke</groupId>
  <artifactId>pom</artifactId>
  <version>2</version>
</parent>

<repositories>
  <repository>
    <id>m.g.o-public</id>
    <url>http://maven.glassfish.org/content/groups/public/</url>
  </repository>
</repositories> 
```

这个 glassfish maven repo 的 URL 给出了 301 `https://maven.glass...`，出于某种原因，maven 决定将该响应的主体下载为 POM。如果您查看您的`~/.m2/repository/org/kohsuke/pom/2/pom-2.pom`，您应该会看到如下内容：

```
<html>
<head><title>301 Moved Permanently</title></head>
<body bgcolor="white">
<center><h1>301 Moved Permanently</h1></center>
<hr><center>nginx/0.6.39</center>
</body>
</html> 
```

手动查看 glassfish 存储库，我什至看不到所需的父 POM（此时）。

我希望这有帮助。如果你能弄清楚，请回帖，因为这是我到目前为止所获得的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T17:14:27.030

我也有这个问题，与另一个项目不同的 POM，我试图用 Maven 3.X 构建。简单的解决方案是安装最新的 2.X 版本的 Maven。在那之后，它建立得很好。作为 Maven 新手，REPOS 的 URI 格式似乎在两个版本之间有所不同。

只需安装 Maven 2.X（我使用的是 2.2.1），然后将它的“bin”目录放在 PATH 环境变量的第一个位置，就可以了。

# php - PHP 或 Jquery 用于解释和格式化 polymaps 的 json 数据？

> ID：10168760
> 
> 赞同：0
> 
> 时间：2012-04-16T04:34:43.847
> 
> 标签：php, javascript, json, maps, instagram

我正在从 Instagram API 中提取数据并使用 php 将其缓存以与 Polymaps 应用程序一起使用。我的问题很简单（但可能并不简单）——我一直在处理这个问题，我应该在 php 中格式化我的数据，然后制作一个我可以直接与 polymaps 一起使用的 json 文件。

只缓存 json 文件并使用 javascript 从中提取我需要的信息会更好吗？

或者这主要是个人喜好问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:47:25.777

在这些情况下，您应该始终支持客户端处理。服务器端处理往往会增加服务器负载。它真的取决于：

*   JS 是否对您的应用程序来说是必须的（在这种情况下，它是；因为没有 javascript，这些地图无论如何都已经死了，所以它将是处理）
*   处理机制是否不难复制并且不是公司机密（这取决于您）

# python - Django 1.4 中的静态文件夹结构？

> ID：10168761
> 
> 赞同：7
> 
> 时间：2012-04-16T04:34:46.890
> 
> 标签：python, django, convention, directory-structure, django-1.4

这是新的项目结构（来自 Django 1.4 发行说明）。

```
我的项目
|-- 管理.py
|-- 我的项目
| |-- __init__.py
| |-- 设置.py
| |-- urls.py
| `--wsgi.py
`-- 民意调查
    |-- __init__.py
    |-- 模型.py
    |-- 测试.py
    `--views.py

```

我不确定是否应该将 STATIC_ROOT 指向

`myproject/myproject/static/`（连同settings.py、urls.py...）

**或者**

顶级目录`myproject/static`（myproject、myapp1、myapp2 旁边）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T05:44:04.313

`STATIC_ROOT`与 Python 导入无关，所以它完全取决于你。通常，`myproject/static/`，因此`os.path.join(PROJECT_ROOT, 'static/')`在设置中，更容易。

*按照 San4ez 的建议进行*更新，并在 settings.py 中添加注释**

 *```
# Absolute path to the directory static files should be collected to.  
# Don't put anything in this directory yourself; store your static files  
# in apps' "static/" subdirectories and in STATICFILES_DIRS.  
# Example: "/home/media/media.lawrence.com/static/" 
```

根据您的结构，最好将`poll`应用程序的静态文件放入.`poll/static/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T06:04:39.207

我同意@okm，这`myproject/static/`是一个静态的好地方，但你也可以在你的应用程序中存储图像、css 和 js `myproject/polls/media`。比你必须配置`django.contrib.staticfiles`应用程序并使用命令将静态复制`media`到 STATIC_ROOT

```
python manage.py collectstatic 
```

这种方法的优点是允许您使用静态传播您的应用程序，并且您的应用程序可以在其他项目中自由使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:17:38.067

`STATIC_ROOT`只是`staticfiles`contrib 应用程序将收集和存放所有静态文件的文件路径。这是一个收集物品的地方，仅此而已。关键是这个位置是**临时存储**，主要用于打包你的应用程序以进行部署。

该`staticfiles`应用程序搜索要从任何`static`应用程序中列出的任何目录中收集的项目，`INSTALLED_APPS`以及`STATICFILES_DIRS`.

对于我的项目，我创建了一个`deploy`目录，在该目录中创建了一个`www`用于存放静态文件的文件夹，以及仅在部署时使用的各种其他文件。该目录位于项目的顶层。

您可以将变量指向您的用户具有写入权限的任何位置，它不需要位于项目目录中。*

# c# - 由于系统缺少足够的缓冲区空间或队列已满，因此无法对套接字执行操作

> ID：10168767
> 
> 赞同：2
> 
> 时间：2012-04-16T04:36:07.360
> 
> 标签：c#, asp.net, .net, wcf, windows-server-2008

有一个讨厌的问题让我睡不着觉。我们有一个 ASP.NET 网站和为该网站提供服务的 WCF 服务器。一段时间后，出现错误提示

> 无法对套接字执行操作，因为系统缺少足够的缓冲区空间或队列已满 xxxx:8731 in
> 
> System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) System.Net.Sockets.Socket.Connect(EndPoint remoteEP) System.ServiceModel.Channels.SocketConnectionInitiator.Connect(Uri uri, TimeSpan 超时)

之后我们的网站无法连接到服务。

此捆绑包（站点+服务）在 Windows Server 2003 上运行良好，但随后我们将其移至新的 Windows Server 2008 标准，一段时间后它会失败。

我们的服务中有一些 tcp 检查。服务只是打开与另一台主机的连接，如果连接成功，服务认为一切正常并继续执行其他业务逻辑。当我们切断此检查时，似乎服务器开始很少下降，但这个错误仍然让我们感到沮丧。

我曾经遇到过`MaxUserPort`在注册表中安排选项的可能建议，但似乎Win2008中的此参数与Win2003中的含义不同，并且可以。

# c# - 在命令行参数中传递应用程序的路径

> ID：10168770
> 
> 赞同：1
> 
> 时间：2012-04-16T04:36:33.770
> 
> 标签：c#, command-line-arguments

在我的应用程序中，我传递了一些命令行参数来安排任务。
str 是一个字符串，经过一些操作后变为

```
/create /tn StartIE /tr "C:\Program Files\Internet Explorer\iexplore.exe http://abc.com" /sc onlogon 
```

然后我开始一个过程：

```
ProcessStartInfo ps = ProcessStartInfo("schtasks");
ps.Arguments = str;
Process.Start(ps); 
```

当我查看计划任务的任务调度程序时，我得到计划任务的操作为：

```
C:\Program
and the Arguments as: Files\Internet Explorer\iexplore.exe http://abc.com 
```

所以，问题是因为程序文件中的空间。我应该如何纠正事情，以便实际程序保持
`C:\Program Files\Internet Explorer\iexplore.exe http://abc.com`
不变`Arguments = http://abc.com` ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:50:17.167

I believe you need to pass your quotes in escaped so they can be 'extracted' by the `schtasks` process. Your string should end up containing:

`/create /tn StartIE /tr "C:\Program Files\Internet Explorer\iexplore.exe http://abc.com" /sc onlogon`

But I suspect it actually contains:

`/create /tn StartIE /tr C:\Program Files\Internet Explorer\iexplore.exe http://abc.com /sc onlogon`

Which means when you create it you should be targetting:

`/create /tn StartIE /tr \""C:\Program Files\Internet Explorer\iexplore.exe http://abc.com\"" /sc onlogon`

A similar question and answer: [Why "schtasks" does not run my job?](https://stackoverflow.com/questions/3845030/why-schtasks-does-not-run-my-job)

# c# - Authentication in mongodb

> ID：10168772
> 
> 赞同：7
> 
> 时间：2012-04-16T04:37:09.953
> 
> 标签：c#, mongodb

The connection string for mongodb C# is as follows:

```
mongodb://[username:password@]hostname[:port][/[database][?options]] 
```

Does the connection string itself implements the authentication?

I have seen the API of C# driver . It has the 4 methods for authentication:`check authentication, canAuthenticate,isAuthenticated and Authenticate , but they are internal . Please let me know about it? I am in great need of it.Thanks in advance..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T04:49:09.760

Yes, you can.

```
mongodb://[username:password@]hostname[:port][/[database][?options]] 
```

And the official documentation for [CSharp Driver](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Connectionstrings) says:

> The username and password should only be present if you are using authentication on the MongoDB server. These credentials will be the default credentials for all databases. To authenticate against the admin database append "(admin)" to the username. If you are using different credentials with different databases pass the appropriate credentials to the GetDatabase method.

You can read the full documentation for connection strings on this [page](http://www.mongodb.org/display/DOCS/Connections).

Then if you want authenticate when you get a MongoDB database instance you can use

```
MongoServer.GetDatabase(String, MongoCredentials) 
```

The documentation for that is [here](http://api.mongodb.org/csharp/1.1/).

# magento - Magento custom fields on checkout

> ID：10168777
> 
> 赞同：2
> 
> 时间：2012-04-16T04:38:05.207
> 
> 标签：magento, checkout

Is there any tutorial available for how do i add custom fields on front end check out step like PO number,Job name , customer comments etc as well as in admin->create->order.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T23:51:08.320

我通常的座右铭是找到（并在需要时购买）一个已经具有您想要的功能的模块。尤其是当该项目的生命周期涉及版本升级时，因为您可以从提供商处寻求预打包的解决方案。

我对添加到我们的 Magento 安装中的每一点自定义代码感到遗憾。因为现在除了找出我的黑客之外，我还必须维护网站才能继续工作。是时候花更多时间用现成的扩展替换 hack，这本来会更快。

我知道这种态度在某种程度上违背了堆栈溢出的想法，即我可以做任何事情，但实际上，Magento 的工作是让某人做更少的工作。

* * *

**两年后，更新：**在轻轻一票否决之后（可能是因为似乎对这个问题不屑一顾），我回来重新审视并分享我学到的一些东西。附加字段的编程方面是数据持久性的概念。

如果您对[仅出现在](https://stackoverflow.com/questions/23030550/magento-add-custom-field-in-one-page-checkout-shipping-and-billing-address)订单后的交易电子邮件中的自定义字段感到满意，那么任务就像将字段添加到表单中的某处然后更新控制器以捕获并将发布数据插入到电子邮件。您可以在后端使用自定义变量来轻松地将其公开给[电子邮件模板](https://stackoverflow.com/questions/20786080/pass-custom-variable-parameter-from-email-template-to-phtml-file)。还有一个[Magento SE 以编程方式创建自定义变量](https://magento.stackexchange.com/questions/13730/programmatically-create-a-custom-variable)。

将持久性引入后端需要通过模块中的安装程序添加数据库字段。iCoreThink[博客](http://blog.icorethink.com/add-custom-fields-checkout-page-magento/)清楚地列出了这些步骤并解释了原因、如何确认您的工作，然后提供了真实世界的实施，例如在客户的帐户中显示。下面提到的“[其他博客”有一个很好的例子，尽管他的例子专门与计费和运输有关。](http://indiestechtips.wordpress.com/2011/07/30/how-to-add-custom-field-in-the-billing-and-shipping-address-of-onepage-checkout-in-magento/)

* * *

**来自我的点赞和书签的资源：**
» 这篇[iCoreThink 博客文章](http://blog.icorethink.com/add-custom-fields-checkout-page-magento/)是迄今为止我最喜欢的参考资料，也是我现在关注的内容。

» 我使用的是 Templates Master 的*FireCheckout*，其中包括他们自己的*checkoutfields*模块，但我已经放弃了他们的单视图结帐，而是使用 Magento 的一页结帐流程。我现在正在尝试将他们的结帐字段（并使用他们的控制器）调整到我的结帐模板中。

» 我确信[Alan Storm](http://alanstorm.com/category/magento)写了一篇关于 Checkout 自定义字段的文章，但我没有看到。

»[这个 Magento SE](https://magento.stackexchange.com/questions/8828/add-new-field-in-checkout)列出了几个博客和一个[付费扩展](http://www.magentocommerce.com/magento-connect/additional-checkout-attributes-custom-fields-manager.html)。卓越博客还可以，但他的风格对我来说太死板了，我什么都学不到。[另一个博客](http://indiestechtips.wordpress.com/2011/07/30/how-to-add-custom-field-in-the-billing-and-shipping-address-of-onepage-checkout-in-magento/)讨论了构建模块和安装数据库字段的过程。

»[意外的 IT 博客](http://www.unexpectedit.com/magento/add-new-customer-attribute-onepage-magento-checkout)演示了将代码添加到核心文件的非正式 hack（但遗憾的是没有显示如何通过将这些文件复制到应用程序/代码/本地来覆盖这些文件）以及手动执行以获取列和数据库中添加的字段。显然对于 1.4 及以下版本是完美的，但评论似乎解释了为 1.5 及以上版本做什么。

*最后一个 hack-ish 更改是我个人最喜欢的，因为它无缝地将额外的位添加到现有的 Magento 管理页面中，并且“感觉”更少的工作。警告：如果不使用版本控制，我不会这样做，如果在版本升级之间发生任何核心代码更改，它绝对会崩溃。*

# facebook-graph-api - Facebook 网站上的一些朋友没有出现在 Graph API 中

> ID：10168778
> 
> 赞同：0
> 
> 时间：2012-04-16T04:38:17.083
> 
> 标签：facebook-graph-api

我最近在玩 Graph API，我做了以下简单的调用：

`https://graph.facebook.com/me/friends`

对我来说，这将返回 461 个条目。在我的 Facebook 网站上的个人资料页面上，我有 465 个朋友。在下一页上，我有 477 个朋友：

`https://www.facebook.com/me/friends`

我发现我的 12 位朋友已停用他们的个人资料，这将解释 477 和 465 之间的差异。但是，这仍然不能解释 Graph API 调用与我个人资料上显示的数字之间的差异。

这引出了我的问题：

1.  有没有办法通过 Facebook API 检索不活跃的朋友列表？
2.  除了用户不活动之外，还有哪些其他原因导致好友连接不会出现在 Graph API 上？是否有用于此类控制的用户隐私设置？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T04:42:43.260

这是绝对正常的行为。Facebook 中有一个选项可以让您禁用所有应用程序。参考：[Facebook：禁用所有应用程序](http://www.facebook.com/help/?faq=211829542181913)如果他们打开了，您的应用程序将无法访问它们。

至于寻找不活跃的朋友，答案是否定的，你不能不。它们不是 Facebook 公共平台的一部分，因此您无权访问它们。

# php - Web programming Python

> ID：10168779
> 
> 赞同：11
> 
> 时间：2012-04-16T04:38:28.340
> 
> 标签：php, python

I'm a amateur developer with a little experience in PHP.

I recently learnt Python, I've to admit that it is awesome as a programming language and its great libraries, but using that for web development seems to be a big pain in the ass. As far as what i read, I've to use CGI, mod_wsgi, etc. to deploy (http://docs.python.org/howto/webservers.html), Restart the server to see the changes (http://stackoverflow.com/questions/581038/python-web-programming)

My question is, Python being used so widely for web development, Why cant it be as simple as PHP?

ie i would love to write index.py:

```
print """
<html>
<head>
<title>Hello world</title>
</head>
<body>
Hello world
</body>
</html>""" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T04:44:57.543

首先是关于为什么 Python 不像 PHP 那样容易进行 Web 开发的问题：它不是为它设计的。PHP 在使其成为编写 HTML 页面的好语言方面做了大量工作，包括用于 apache 的 mod_php。Python，虽然它是一种非常强大的网络语言，但它的能力也远远超过 PHP。例如，Dropbox 的大多数软件，无论是桌面客户端还是服务器端代码都是 Python。我在日常工作中使用 Python，并使用它通过 Cython 将遗留的 C 代码集成到新的 Python 代码中。

继续。有许多 Python 框架可以让您的 Web 开发体验变得不那么复杂。专业人士和爱好者广泛使用的 2 个值得注意的是 Django 和 Pyramid（以前称为 Pylons）。作为一个新用户，我建议您从 Django 开始，这是一种很好的入门方式，并且可以随着您的经验增长而用于大型和复杂的站点（以及更多）。

您会发现 Django 和 Pyramid 包含“开发服务器”。这些是用 Python 编写的 Web 服务器，它们与框架打包在一起以实现更快的开发。使用这些开发服务器，您可以快速启动并运行。

还有一些纯 Python Web 服务器，它们实际上非常快速、健壮且非常适合生产。要在非常好的 Python 服务器 Gunicorn 上部署 Pyramid 应用程序，只需在 Pyramid 配置中添加几行额外的代码。通常，您会通过 Apache 或 Nginx 对这些纯 Python 服务器进行反向代理。

如果你想走 Apache 服务器路线，你只需要 mod_wsgi。使用 mod_python 或作为 CGI 服务 Python 站点是一种有点过时的方式。WSGI 定义了 Python 处理 Web 请求的标准，因此 mod_wsgi 使 apache 能够以预期的格式将请求传递给 Python 应用程序。

在将 Python 部署到托管服务提供商时，您必须比 PHP 托管更进一步，但官方 Python wiki 上维护了一个[很好的列表。](http://wiki.python.org/moin/PythonHosting)底部的 4 个链接提供了不同的列表以满足您的要求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T05:13:22.140

> [如果] Python 被广泛用于 Web 开发，为什么不能像 PHP 一样简单？即我很想写 index.py ......

根据您的示例， Python*可以*像 PHP 一样简单。完成上述工作的最简单方法是使用 CGI（并调用您的文件`index.cgi`而不是`index.py`.

```
print 'Content-type: text/html' 
```

这在 PHP 和 Python 中同样适用。 [Python 的 CGI 模块](http://docs.python.org/library/cgi.html)将使您快速启动并运行。

> 就我阅读的内容而言，我必须使用 CGI、mod_wsgi 等来部署

您通常会选择其中一个，实际上您很可能会选择一个基于更现代的 WSGI 的框架，而不用担心低级的东西。但如果您不想这样做，则无需为这些低级接口而烦恼。

> 重新启动服务器以查看更改

可能不是。必须重新启动服务器是框架和部署配置的限制，通常不需要。如果你使用`mod_python`这可能适用，但通常不适用（例如，许多框架支持自动重新加载）。

Python 拥有丰富的 Web 开发资源。有准系统（例如 CGI、mod_wsgi）、轻量级系统（例如 CherryPy）和整个框架（例如 Zope）。您可以选择最适合您需求的一种。

能够创建一个简单的文件并产生一些输出可能有助于快速完成某些事情，但这并不是一个丰富、成熟、功能强大的框架的真正标志。当然，您可以立即开始显示某些内容，但是然后呢？突然之间，您将需要导入或编写 Web 框架提供的所有相同类型的功能。对于一个非平凡的网络应用程序，您需要非平凡的框架。

例如，像[Django](http://www.djangoproject.com/)这样的东西会给你一个持久性框架、自动生成的管理界面、一种诱人的语言、URL 调度系统等等。您可以专注于您的应用程序逻辑，而不必担心较低级别的细节。Django 是一个很好的起点，因为它有很好的文档，而且本教程会让你快速上手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T06:50:17.580

正如其他人所说，谷歌“python web framework”。有很多，它们都完全不同。为了让您以最快的速度（数小时）开始，我会看一下[bottle.py](http://bottlepy.org)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T01:44:43.147

> Python被广泛用于Web开发，为什么不能像PHP一样简单？

因为 Hello World 无法扩展。因为 Python 不是 PHP。来自维基百科^([[1]](http://en.wikipedia.org/wiki/Python_%28programming_language%29) [[2]](http://en.wikipedia.org/wiki/PHP))：

> *   Python 是一种通用的高级编程语言
>     
> *   PHP 是最初为 Web 开发而设计的通用服务器端脚本语言

Python 很棒，Python 对[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)友好。不幸的是，当谈到 Web 开发时，DRY 是不够的。如果您真的想（有效地）完成工作：[不要重新发明轮子](http://www.codinghorror.com/blog/2009/02/dont-reinvent-the-wheel-unless-you-plan-on-learning-more-about-wheels.html)。[这里](http://randomfoo.net/2009/01/28/infrastructure-for-modern-web-sites)总结得很好：

> 对我来说最大的耻辱似乎是，每个人目前都在一遍又一遍地重建这些东西，并将其合理化为某种秘密酱汁竞争优势，而实际上它是基础设施——真正应该标准化的东西，这样你就可以真正开始做新的和有趣的东西。

因此，如果您采用 python 方式，请使用正确的工具来完成正确的工作：

*   使用 python*和*
*   使用 web 框架，[Django](https://www.djangoproject.com/)很棒（或[另一个](http://wiki.python.org/moin/WebFrameworks)）
*   重用包，在[django-packages浏览它们](http://djangopackages.com/)
*   也许使用像[Pinax](http://pinaxproject.com/)这样的“元框架”来开始
*   使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)作为 UI 框架
*   使用像[Heroku这样的](http://www.heroku.com)[PaaS](http://en.wikipedia.org/wiki/Platform_as_a_service)来部署（或[另一个](https://stackoverflow.com/q/4064029/343834)）

是的，它比一个 hello world 更复杂，但请记住[没有免费的午餐](http://en.wikipedia.org/wiki/There_ain%27t_no_such_thing_as_a_free_lunch)。你是一个业余的开发者，你不是一个专业的程序员*、*系统管理员*、*数据库管理员*、*设计师*和*系统架构师等等。不要害羞地[站在巨人的肩膀上，](http://en.wikipedia.org/wiki/Standing_on_the_shoulders_of_giants)因为现在它是免费的。请不要构建[一个现代网络应用程序](http://www.12factor.net/)。

此外，PHP 不再像^([[1]](https://twitter.com/#!/codinghorror/statuses/189590702097838081) [[2]](https://twitter.com/#!/codinghorror/status/190943243511406592))那样流行，参见。[PHP的分形坏设计](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)，[PHP锤子](http://www.flickr.com/photos/raindrift/sets/72157629492908038/)等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T04:47:16.567

PHP 仅用于 Web 应用程序开发，更准确地说是用于构建个人主页（这就是 P、H 和 P 的来源）。另一方面，Python 是一种通用编程语言。它适用于很多事情（并且必须包括用于各种任务的各种电池）。因此，请不要期望 Python 的行为方式与 PHP 相同。

独立的 python 脚本将需要相当多的努力才能运行。我建议拿起一个网络框架。您可能想先学习 django (https://www.djangoproject.com/)。您可能还想尝试一下 Google App Engine。除了 heroku、dotcloud、nuagehq 和其他云主机，python（和 django）的部署非常简单和容易。

希望您喜欢使用 Python 开发 Web 应用程序！:)

# xcode4.3 - 如何在 iOS 5.1 的 uiSplitViewController 中设置 barButtonItems？

> ID：10168786
> 
> 赞同：1
> 
> 时间：2012-04-16T04:39:31.907
> 
> 标签：xcode4.3, ios5.1

我正在使用 XCode 4.3.1 中的 Master-Detail 模板，并希望访问 detailView 控件上的工具栏。

> [self navigationItem] setTitle:

设置标题，但我不知道如何通过 xib 或以编程方式添加 barButtonItems。过去，使用较早的 SplitView 模板（当主视图称为根视图时），我可以通过 MainWindow.xib 中的拆分视图控制器访问 rootView 工具栏，并且我在 detailView.xib 文件中拥有 detailView 工具栏。

我在 detailView 工具栏上设置这些项目（我有 4 个）的最佳方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T02:22:37.800

所以我有一个答案 - 如果你有更好的答案，请告诉我！

在我的 masterViewController 的 viewDidLoad 方法中，我用

> [_detailViewController.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects: _detailViewController.firstButton, _detailViewController.secondButton, _detailViewController.thirdButton, nil]];

我创建了这些按钮

> _detailViewController.firstButton = [[UIBarButtonItem alloc] initWithTitle:@"First" style:UIBarButtonItemStylePlain target:self action:@selector(firstButtonAction:)];

我已经在 detailViewController.h 文件中声明了这些按钮中的每一个，以便我以后可以引用它们，但可能不需要使用这些名称——它只是使这里的代码更长。我还有一个无法添加到按钮数组中的 uiButton，因此我创建了一个按钮，将其放在 View 中，然后将其设置为导航项的 titleView：

> ```
>  _detailViewController.biggerButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 230, 35)];
>     [[_detailViewController biggerButton] addTarget:self action:@selector(biggerButtonTap:) forControlEvents:UIControlEventTouchUpInside]; 
> ```

```
 UIView *biggerButtonView = [[UIView alloc] initWithFrame:CGRectMake(80, 3, 230, 35)];

    [biggerButtonView addSubview:_detailViewController.biggerButton];

    _detailViewController.navigationItem.titleView = biggerButtonView; 
```

# sql - 使用参数创建 SQL 视图

> ID：10168790
> 
> 赞同：2
> 
> 时间：2012-04-16T04:40:07.167
> 
> 标签：sql, view, parameters

```
declare @Date DateTime
set @Date='2012-04-16'
select s.sid,'Status'=case a.sid when isnull(a.sid,null)   
then 'absent' else 'present' end from
student s left outer join (select * from absent where date=@Date) as a
on s.sid=a.sid 
```

我有一个这样的 sql 查询，我需要用这个创建一个视图.....有可能吗..

我为此创建了一个函数

```
CREATE FUNCTION dbo.Attendance (@Date DateTime)
RETURNS TABLE
AS
RETURN
(
    select s.sid,'Status'=case a.sid when isnull(a.sid,null)   
    then 'absent' else 'present' end from
    student s left outer join (select * from absent where date=@Date) as a
    on s.sid=a.sid

) 
```

视图创建成功....但是当我调用视图时

```
 select * from dbo.Attendance('2012-04-11') 
```

它报告错误，例如“从字符串转换日期和/或时间时转换失败。”......我该如何调用这个函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:50:54.810

MS Access 中允许参数化视图，但没有严肃的数据库服务器允许您构建需要强制参数的视图。

您的示例描述了一个存储过程，它应该是您要求的选择实现。

满足您要求的另一种方法是将您的 @Date 参数保留在另一个表中，只要它在那里，视图可以引用它，并且如果满足条件将返回一行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T04:55:42.407

您不能至少在 SQL Server 中创建参数化视图，而是使用表函数。

有关详细信息，请参阅[在 SQL Server 2008 中创建参数化视图。](https://stackoverflow.com/questions/4498364/create-parameterized-view-in-sql-server-2008)

希望它会给你一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-04T11:07:22.030

可以根据以下信息查看带参数的视图。请访问以下链接：

[https://msdn.microsoft.com/library/c11kd98s(v=vs.80).aspx](https://msdn.microsoft.com/library/c11kd98s(v=vs.80).aspx)

```
CREATE SQL VIEW Customer_Remote_View ;
   AS SELECT * FROM Customers WHERE Customers.Country = ?cCountry 
```

# c++ - 图像在 OSG 中随着旋转而消失

> ID：10168792
> 
> 赞同：1
> 
> 时间：2012-04-16T04:40:27.803
> 
> 标签：c++, opengl, openscenegraph

我有一个简单的 OSG 程序，它制作一个 x、y 轴并随机化该轴内的点。目的是这将导致为激光扫描数据制作 3d 查看器。（我知道它以前做过，但我们需要它是超轻的）。这是代码：

```
#include <osg/Node>
#include <osg/Group>
#include <osg/Geode>
#include <osg/Geometry>
#include <osg/Texture2D>
#include <osgDB/ReadFile> 
#include <osgViewer/Viewer>
#include <osg/PositionAttitudeTransform>
#include <osgGA/TrackballManipulator>
#include <time.h>
#include <cstdlib>

void addAxis(osg::ref_ptr<osg::Group> root) {

//ADD Y-Axis
osg::ref_ptr<osg::Geode> lineGeode = new osg::Geode();
osg::ref_ptr<osg::Geometry> yAxis = new osg::Geometry(), xAxis = new osg::Geometry();

lineGeode->addDrawable(yAxis);
lineGeode->addDrawable(xAxis);
root->addChild(lineGeode);

osg::ref_ptr<osg::Vec3Array> lineVertices = new osg::Vec3Array;
lineVertices->push_back( osg::Vec3( 0, 0, 0) );
lineVertices->push_back( osg::Vec3(0, 10, 0) );

yAxis->setVertexArray( lineVertices );

osg::ref_ptr<osg::DrawElementsUInt> lineBase =
    new osg::DrawElementsUInt(osg::PrimitiveSet::LINES, 0);
lineBase->push_back(1);
lineBase->push_back(0);
yAxis->addPrimitiveSet(lineBase);

osg::ref_ptr<osg::Vec4Array> colors = new osg::Vec4Array;
colors->push_back(osg::Vec4(1.0f, 0.0f, 0.0f, 1.0f) ); //index 0 red
yAxis->setColorArray(colors);
yAxis->setColorBinding(osg::Geometry::BIND_PER_PRIMITIVE);

//ADD X Axis
lineVertices = new osg::Vec3Array;
lineVertices->push_back( osg::Vec3( 0, 0, 0) );
lineVertices->push_back( osg::Vec3(10, 0, 0) );

xAxis->setVertexArray( lineVertices );

lineBase =
    new osg::DrawElementsUInt(osg::PrimitiveSet::LINES, 0);
lineBase->push_back(1);
lineBase->push_back(0);
xAxis->addPrimitiveSet(lineBase);

colors = new osg::Vec4Array;
colors->push_back(osg::Vec4(0.0f, 0.0f, 0.0f, 1.0f) ); //index 0 red
xAxis->setColorArray(colors);
xAxis->setColorBinding(osg::Geometry::BIND_PER_PRIMITIVE);

}

void addPoint(osg::ref_ptr<osg::Group> root, std::vector<double> pointIn) {
 osg::ref_ptr<osg::Geode> pointGeode = new osg::Geode();
osg::ref_ptr<osg::Geometry> pointGeometry = new osg::Geometry();

pointGeode->addDrawable(pointGeometry);
root->addChild(pointGeode);

osg::ref_ptr<osg::Vec3Array> point = new osg::Vec3Array;
point->push_back( osg::Vec3( pointIn[0], pointIn[1], pointIn[2]) );

pointGeometry->setVertexArray( point );

osg::ref_ptr<osg::DrawElementsUInt> points =
    new osg::DrawElementsUInt(osg::PrimitiveSet::POINTS, 0);

points->push_back(0);
points->push_back(2);
points->push_back(1);
pointGeometry->addPrimitiveSet(points);

osg::ref_ptr<osg::Vec4Array> colors = new osg::Vec4Array;
colors->push_back(osg::Vec4(1.0f, 1.0f, 1.0f, 1.0f) ); 

 pointGeometry->setColorArray(colors);
    pointGeometry->setColorBinding(osg::Geometry::BIND_PER_PRIMITIVE);
}

int main()
{
osgViewer::Viewer viewer;
osg::ref_ptr<osg::Group> root = new osg::Group();

addAxis(root);

std::vector<double> point;
for (int i = 0; i < 3; i++)
   point.push_back(0);
srand(time(NULL));

root->getOrCreateStateSet()->setMode(GL_LIGHTING, osg::StateAttribute::OFF);
viewer.setSceneData( root );

viewer.setCameraManipulator(new osgGA::TrackballManipulator());
viewer.realize();
int count = 0;
while( !viewer.done() )
{
    if (count == 200) {
    point[0] = (double)rand()*10.0/(double)INT_MAX;
    point[1] = (double)rand()*10.0/(double)INT_MAX;
    count = 0;
    }
    count++;
    addPoint(root, point);

    viewer.frame();

}

return 0;
} 
```

此代码有效，它将生成一个 10 单位长的 x/y 轴并开始在该轴内生成随机点。然而问题是当我在 OSG 查看器中旋转图像时，整个图像通常会消失。有时它可以通过旋转回到你开始的地方来恢复，但更多的时候它会永远消失。

有没有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:31:24.950

我想通了，这种情况的原因是积分更新得太快了。这导致可视化器在渲染图像时遇到极大的困难，因为这些点正在快速进入。

# jfreechart - 使用 sproutcore 工作的条形图/表格

> ID：10168794
> 
> 赞同：1
> 
> 时间：2012-04-16T04:41:13.623
> 
> 标签：jfreechart, google-visualization, sproutcore, bar-chart

我目前正在处理一项想要在网站上显示条形图/表格的任务。

该应用程序使用：sproutcore (1.6) 作为前端，Java Restful 作为后端。

但是，我在 sproutcore 中找不到一些有用的图表库。有什么想法吗？

我在网站上搜索，感觉 google 图表工具相当不错，另外 jFreechart 作为后端也是一个不错的选择。

我不确定如何将其集成到sproutcore。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:54:57.970

我正在使用 Flot 在我的 Sproutcore 应用程序上显示图表。

要使用它，您需要在 frameworks 文件夹中创建一个 flot 目录，其中将包含 jquery.flot.js 文件（我还包含 jquery.flot.pie.js 文件）和一个包含以下内容的 core.js 文件：

```
sc_require('jquery.flot.js');
sc_require('jquery.flot.pie.js');

Flot = SC.Object.create({
  plot: $.plot
}) ; 
```

然后，您需要将此新库添加到您的 buildfile 中：

```
config :yourapp,  
  :required => ['flot'] 
```

要在您的应用程序中显示您的图表，您可以使用我为使用 Flot 而制作的这个自定义视图：

```
GX.FlotView = SC.View.extend({
  classNames: ['flot'],

  //ex: [{ data: [[1326366000000, 1500], [1326452400000, 600]], label: 'title of the serie' }, ...]
  data: [],

  /* 
  ex: {
    legend: { show: true },
    series: line, points,
    xaxis: { mode: "time", timeformat: "%d/%m/%y", }
    grid: { backgroundColor: { colors: ["#FFF", "#fefefe"]}},
  } 
  */
  options: [],

  render: function(context, firstTime) { 
    var frame = this.get('frame'),
        data = this.get('data'), 
        options = this.get('options');

    // To avoid an error with flot, we check if width and height > 0
    if(frame.width > 0 && frame.height > 0 && data && data.length) {  
      var layer = this.get('layer'),
          plot = Flot.plot(layer, data, options);
    }
  },

  viewDidResize: function() {
    this.invokeLast(function() {
      if (this.get('isVisibleInWindow')) this.set('layerNeedsUpdate', YES);
    });
  }.observes('data', 'data.[]'),

}); 
```

然后，您只需将数据和选项属性与您的数据绑定即可。

# delphi - 未找到 rtl90.bpl，如何将其包含在我的 Delphi 2005 win 32 位应用程序中？

> ID：10168797
> 
> 赞同：1
> 
> 时间：2012-04-16T04:42:24.627
> 
> 标签：delphi, delphi-2005

我发现自己支持的软件有时无法在不同的 PC 上运行。通常它们是新的 Win7 安装。

错误消息是“此应用程序无法启动，因为未找到 rtl90.bpl...”

为了纠正这个问题，我有 PC 支持将 rtl90.bpl 文件复制到用户的 system32 目录，但是我想确保这个错误不再发生。

我用谷歌搜索并发现以下链接[rtl90.bpl 问题](http://www.delphipages.com/forum/showthread.php?t=154469)

我的问题是：“使用运行时包构建”选项已在该程序的项目选项下选择，并且似乎对遇到问题的用户没有任何影响。

我是否必须专门将缺少的 rtl90.bpl 文件添加到项目中？

请注意，我对 delphi 编程知之甚少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T06:23:18.797

由于您在项目中被标记为选项`Build with runtime packages`，因此最终的 exe 将需要与一些额外的 bpl 文件一起部署。为避免这种依赖关系，您必须取消选中该选项以构建您的项目。现在你的 exe 会更大但没有依赖关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T06:36:28.003

该包是包含 VCL 的运行时包。您可能还需要为 RTL 和可能的其他一些部署 rtl90.bpl。通过启用运行时包，您承诺将这些包部署到可执行文件可以找到它们的位置。

您有 3 个主要选项：

1.  将包部署到 PATH 变量中包含的位置。通常这意味着修改 PATH。您永远不应该写入系统目录。它归系统所有，您应该尊重这一点。
2.  将包部署到与可执行文件相同的目录。
3.  禁用运行时包，从而构建一个独立的可执行文件。RTL/VCL 代码将静态链接到您的可执行文件中。

在我看来，选项 1 很差。依赖 PATH 变量和修改它的能力是脆弱的。选项 2 有效，但与选项 3 相比似乎毫无意义。当您选择 2 时，您部署的文件和文件更大，所以为什么要选择它。

总之，我推荐选项 3。将所有 RTL/VCL 代码静态链接到您的可执行文件中。

在我看来，选项 2 获胜的唯一情况是当您有多个相关的可执行文件都部署到同一个目录时。在这种情况下，共享 RTL/VCL 代码是有意义的。

# c# - 事件顺序背后的SqlDataSource代码

> ID：10168801
> 
> 赞同：9
> 
> 时间：2012-04-16T04:43:03.110
> 
> 标签：c#, asp.net, c#-4.0

我在同一页面上有一个 SqlDataSource、一个 Gridview 和一个 DropDownList。DropDownList 选择与一组`SelectCommands`、`UpdateCommands`和 DeleteCommand 相关联，因此我可以利用 GridView AutoGenerateEditButton="true" 和 AutoGenerateUpdateButton="true" 机制。

```
Page_Load
{
  switch(ddl.SelectedItem.Text)
  {
     case "A":
       sqlDS.SelectCommand = "Select * From A";
       sqlDS.UpdateCommand = "Update A Set Name = @Name WHERE ID = @ID";
       sqlDS.DeleteCommand = "Delete A WHERE ID = @ID";
       break;
     ...
  }

  sqlDS.DataBind();
  grd.DataSourceID = sqlDS.ID;
  grd.DataBind();
} 
```

我需要如何或在什么时候添加参数？是自动的吗？我基本上只是想要从表中更新和删除列的能力。我想在实际的 .cs 文件中完成所有这些操作，而不是在 .aspx 文件中，因为我希望最终使其更具动态性；但现在我只想了解基础知识。我怀疑我可能在不适当的事件中有 DataBind() 逻辑，因为我不完全理解与数据绑定相关的事件的顺序。

查询并不复杂，不涉及连接或视图；它们是对单个表的简单 SELECT。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T02:23:49.413

**编辑**：确实，如果您在 GridView 上使用 AutoGenerateColumns="true" 并通过 SqlDataSource 填充，它会自动将控件的值按名称绑定到 SQL 查询中的适当参数，而无需任何额外代码。但是，我们必须使用`GetInsertCommand(true)`，等等，以便命令使用列名（请参见下面的代码，其中我展示了如何使用`SqlCommandBuilder`。有一些陷阱，但是正如我在测试中发现的那样：

*   您需要设置`DataKeyNames`GridView
*   您需要`OldValuesParameterFormatString="Original_{0}"`在 sqlDS 上进行设置。
*   如果您只想更新而不比较旧值，则需要`scb.ConflictOption = System.Data.ConflictOption.OverwriteChanges;`您的。`SqlCommandBuilder`
*   看来，如果您以编程方式在 SqlDataSource 上填充 Select/Update/DeleteCommand，则必须在每次回发时执行此操作。

但是，如果您需要自定义，`SqlDataSource`控件会提供事件`Inserting`, `Updating`，`Deleting`您可以在对数据库执行 SQL 操作之前使用这些事件来填充参数：

```
sqlDS.Updating += new SqlDataSourceCommandEventHandler(sqlDS_Updating);

protected void sqlDS_Updating(object sender, SqlDataSourceCommandEventArgs e)
{
    e.Command.Parameters["@Name"].Value = // retrieve value from user entry
} 
```

同样的事情可以通过访问在`Inserting`和`Deleting`事件中完成`e.Command.Parameters[...]`。

* * *

请注意，您还可以使用`SqlCommandBuilder`该类自动生成适当的删除/插入/更新命令，这样您就不必构建包含所有表的巨大 switch 语句。这是一个例子：

```
string tableName = ddl.SelectedValue;
string connectionString = ConfigurationManager
    .ConnectionStrings["MyConnectionString"].ConnectionString;
string select = "SELECT * FROM [" + tableName + "]";
SqlDataAdapter sda = new SqlDataAdapter(select, connection);
SqlCommandBuilder scb = new SqlCommandBuilder(sda);

sqlDS.SelectCommand = select;
sqlDS.InsertCommand = scb.GetInsertCommand(true).CommandText;
sqlDS.UpdateCommand = scb.GetUpdateCommand(true).CommandText;
sqlDS.DeleteCommand = scb.GetDeleteCommand(true).CommandText; 
```

这当然需要您的所有表都具有可用于生成相关更新和删除语句的主键。如果没有，您将收到有关动态 SQL 生成的异常。即使由于在数据库引擎上查找模式的运行时成本而您不喜欢这种方法，您也可以始终使用 T4 模板预先生成它们，而不是手动输入它们。

# weblogic-10.x - WebLogic10.3 OutOfMemoryError

> ID：10168803
> 
> 赞同：0
> 
> 时间：2012-04-16T04:43:08.477
> 
> 标签：weblogic-10.x, out-of-memory

Weblogic 10.3 内存不足

以下是我做过的事情

1.  增加了-Xms512m

2.  增加了-Xmx1024m

3.  增加了 setdomainenv.bat 中的最大 perm 大小

有没有其他方法可以解决这个问题我有一个 2 GB 的系统？

它是一台生产机器，日志大小约为 4 GB。分析日志时，我发现许多连接被拒绝错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:49:44.883

您需要分析您的应用程序以查找内存泄漏。可能是打开的数据库连接或其他资源未正确处理

只是增加 Xms 和 Xmx 不会超过一个点

将[堆转储到 HPROF 文件中](http://visualvm.java.net/heapdump.html)并使用 Eclipse 内存分析器工具或[VisualVM运行它或使用](http://visualvm.java.net/)[JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html) 监控它

# ruby - ruby+odbc+freetds MSSQL错误负字符串大小

> ID：10168804
> 
> 赞同：1
> 
> 时间：2012-04-16T04:43:25.340
> 
> 标签：ruby, sql-server, odbc, dbi, freetds

所以我在 Ruby 中对 MS SQL 数据库执行查询，一切都很好。我有 FreeTDS/ODBC 设置，我在笑。不知从何而来，我在我的一个查询中得到了这个错误：

```
/home/jarrett/.rvm/gems/ruby-1.9.2-p318/gems/dbd-odbc-0.2.5/lib/dbd/odbc/statement.rb:41:in `fetch': negative string size (or size too big) (ArgumentError)
            from /home/jarrett/.rvm/gems/ruby-1.9.2-p318/gems/dbd-odbc-0.2.5/lib/dbd/odbc/statement.rb:41:in `fetch'
            from /home/jarrett/.rvm/gems/ruby-1.9.2-p318/gems/dbi-0.4.5/lib/dbi/handles/statement.rb:220:in `fetch' 
```

什么？好的，所以其他查询很好，但由于某种原因，这个问题很糟糕。查询是“从 [Provider] 中选择 *”。很直接。查询在 MS SQL Server 上运行得很好。这个查询曾经在我用 Ruby + FreeTDS + ODBC 设置的另一台机器上运行。唔..

然后我用这个快速制作一个 ruby​​ 文件：

```
#!/usr/bin/env ruby

require 'dbi'

db = DBI.connect('dbi:ODBC:MYDB', 'blahblah', 'blahblah')

select = db.prepare('select * from [Provider]')
select.execute
while rec = select.fetch do
puts rec.to_s
end
db.disconnect 
```

它疯了。然后我只选择几列（而不是 *），如下所示：

```
#!/usr/bin/env ruby

require 'dbi'

db = DBI.connect('dbi:ODBC:MYDB', 'blahblah', 'blahblah')

select = db.prepare('select Address1, Address2 from [Provider]')
select.execute
while rec = select.fetch do
puts rec.to_s
end
db.disconnect 
```

它工作正常！因此，我将查询更改为仅选择单个列（在我的查询中仅使用大约 13 列），它工作正常。我数了一下表中的总列数，有 103 个。

所以，我想我很好奇：为什么这会对我产生影响？103 列是否太多而无法处理？

我在 64 位 Debian 机器上运行，通过 VPN 连接到办公室（MS SQL Server 机器在办公室局域网上）。我第一次看到这样的错误。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T18:31:09.253

dbi + dbd-odbc 很旧，似乎不是“最新的”。

你应该试试 TinyTDS，它直接为 ruby​​ 实现了 TDS 协议：

[https://github.com/rails-sqlserver/tiny_tds](https://github.com/rails-sqlserver/tiny_tds)

# android - 使用 android ndk 编译 C 文件时出现未定义的引用错误

> ID：10168805
> 
> 赞同：0
> 
> 时间：2012-04-16T04:43:48.693
> 
> 标签：android, android-ndk

我有一堆`C`带有扩展名`.c`和`.h`. 我想用`Android NDK`. 当我尝试仅使用一个文件时，`NDK`效果很好，但是当我尝试使用包含在此主`C`文件中包含其他文件时，出现错误。我错过了什么？这是我的`Android.mk`文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_LDLIBS := -llog

LOCAL_MODULE    := ndksetupdemo
LOCAL_SRC_FILES := mymain_c_file.c
 LOCAL_C_INCLUDES := includes 
include $(BUILD_SHARED_LIBRARY) 
```

我应该包括更多吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:48:46.930

It appears that you only link against the log library (`LOCAL_LDLIBS := -llog`). If you are referencing functions that are not defined in any of the included headers and in your `mymain_c_file.c`, you will get the undefined reference error. You will need to find out what other libraries you need to link against and list them in `LOCAL_LDLIBS`.

If the functions are defined in the other .c files, you need to add them to the `LOCAL_SRC_FILES` variable.

# eclipse - 启动 Eclipse 时 Java Android 项目的构建路径问题

> ID：10168811
> 
> 赞同：1
> 
> 时间：2012-04-16T04:45:11.447
> 
> 标签：eclipse

我启动了 eclipse 来开始一个项目，并且没有输入一个单词，我已经有几个错误。

```
 package department.namespace;

import android.app.Activity;
import android.os.Bundle;

public class DepartmentActivity extends Activity {
    /** Called when the activity is first created. */   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

在包 department.namespace 中，它说：

*   此行有多个标记，`java.lang.Object`无法解析类型。它是从所需的 .class 文件中间接引用的

*   导入 android.os 无法解析。

*   无法将覆盖解析为类型

*   Activity 类型的方法 OnCreate(Bundle) 未定义

*   R. 不能被解析为变量。

由于这只是在我启动 Eclipse 时出现的，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T04:54:51.363

首先，您应该从清理和构建项目开始。这可以通过选择感兴趣的项目，然后从项目菜单中选择适当的选项来完成。

如果这不能解决问题，那么我建议检查项目构建路径，以确保您预期的依赖关系存在并得到考虑。如果我没有记错过去何时遇到此问题，那么删除并重新添加所选的 JRE 会有所帮助。

要进一步研究此问题，您可以查看以下一些链接：

*   Android 开发特定 - [http://kyleclegg.com/eclipse-android-error-type-cannot-be-resolved/](http://kyleclegg.com/eclipse-android-error-type-cannot-be-resolved/)
*   [http://dev-answers.blogspot.com/2009/06/eclipse-build-errors-javalangobject.html](http://dev-answers.blogspot.com/2009/06/eclipse-build-errors-javalangobject.html)
*   [http://www.adriancourreges.com/articles/the-type-java-lang-object-cannot-be-resolved-with-eclipse/](http://www.adriancourreges.com/articles/the-type-java-lang-object-cannot-be-resolved-with-eclipse/)

# javascript - jquery添加元素，需要调用javascript函数

> ID：10168812
> 
> 赞同：0
> 
> 时间：2012-04-16T04:45:17.093
> 
> 标签：javascript, jquery

我有以下 jquery，它在调用函数时添加了一个文本框。在我使用提交按钮提交此文本框之前，我想在提交 onclick 中调用一个 javascript 函数，以确保在提交之前文本框不为空。我该怎么做我不确定如何使用该元素，因为它是动态添加的。

```
 $("<center><div><input type = \'submit\' onclick=\'\'  name = \'upload\' maxlength = 30/></div></center>").insertAfter("#"+innerid);

  $("<center><div><input type = \'text\' id = \'newteam\' name = \'newteam\' maxlength = 30/></div></center>").insertAfter("#"+innerid); 
```

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:57:06.030

```
$('body').on('click', ':submit[name="upload"]', function(e) {
  if(!$.trim($(':input[name="newteam"]').val()).length) {
    alert('empty');
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T04:49:33.000

包装文本框的表单有一个`onsubmit`带有函数的属性。如果此函数返回 false，则取消提交过程。

看看[http://www.w3schools.com/jsref/event_form_onsubmit.asp](http://www.w3schools.com/jsref/event_form_onsubmit.asp)和[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

# html - 在“li”标签中对齐图像

> ID：10168815
> 
> 赞同：0
> 
> 时间：2012-04-16T04:45:37.493
> 
> 标签：html, css

我的网站上有图像的缩略图。这是它的外观：
![在此处输入图像描述](../Images/412e695928cebd5571d03819bd13d178.png)

让我们考虑第二行。有两张图片（总是两张图片），我想让第二张图片向右对齐。
我怎样才能做到这一点？

这是我想要的示例：
![在此处输入图像描述](../Images/eb2dc4705d9052aeec4e9519a341d929.png)

这是html代码：

```
<div class="navigation_container">
            <div id="dpthumbs0" class="navigation">
                <a href="#" class="pageLink prev"></a>
                <ul style="opacity: 1;" class="thumbs">
                        <li class="selected" style="opacity: 1;"><a rel="history" title="image" class="thumb" href="#1">
                            <img height="60px" style="height: 58px; max-width: 79px;" src="/Image/GetImage?imageName=571437e8-ecfc-46f4-a14f-a645428fae46-pic_172.jpg">
                        </a></li>   
                        <li class="" style="opacity: 1;"><a rel="history" title="image" class="thumb" href="#2">
                            <img height="60px" style="height: 58px; max-width: 79px;" src="/Image/GetImage?imageName=5ef5e802-916a-4ede-af11-c90274c63218-pic_176.jpg">
                        </a></li>   
                        <li class="" style="opacity: 1;"><a rel="history" title="image" class="thumb" href="#3">
                            <img height="60px" style="height: 58px; max-width: 79px;" src="/Image/GetImage?imageName=fa6f5671-b9f6-48e6-a822-cea83424643c-pic_178.jpg">
                        </a></li>   
                        <li class="" style="opacity: 1;"><a rel="history" title="image" class="thumb" href="#4">
                            <img height="60px" style="height: 58px; max-width: 79px;" src="/Image/GetImage?imageName=10b628ed-387e-43b5-908b-80b92efb7d2b-pic_180.jpg">
                        </a></li>   
                </ul>
                <!-- .thumbs-->
                <a href="#" class="pageLink next"></a>
            </div>
            <!-- .navigation-->
        </div> 
```

这都是CSS：

```
.navigation_container {
    float: right;
    margin: 15px 0;
    padding: 30px 0;
    position: relative;
}
.navigation {
    height: 275px;
    overflow: hidden;
    width: 175px;
}
.slider .thumbs {
    width: 175px;
}
.thumbs li {
    float: left;
    padding: 4px 0 4px 8px;
}
.thumbs li img {
    border: 1px solid #424D55;
    height: 58px;
    max-width: 79px;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T04:55:01.437

您必须创建**两个类**并像这样定义：

**CSS**

```
.left{
 float:left;
 clear:left;
}
.right{
 float:right;
 clear:right;
} 
```

**HTML**

```
<li class="left"></li>
<li class="right"></li>
<li class="left"></li>
<li class="right"></li> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:01:18.630

将此添加到您的 CSS 代码中

```
.thumbs li.alt {
    float: right;
    padding: 4px 8px 4px 0px;
} 
```

将 .alt 类添加到每 2 个 li，使用模板引擎的 for 循环或类似的东西:)。这样，将来如果您决定关闭正确的对齐方式，您只需修改 1 个 css 类。

```
<li class="">...</li>   
<li class="alt">...</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T06:08:26.847

这些 css 规则都没有改变 html 嵌入图片的对齐方式，使其落在内部的右侧

```
<ul> 
```

标签...

# android - 从应用程序的galary中选择图像有时会返回位图-Android中的nulll？

> ID：10168817
> 
> 赞同：1
> 
> 时间：2012-04-16T04:46:27.533
> 
> 标签：android, bitmap

在应用程序中，我打开图库并选择图像我必须在对话框中显示该图像..但有时它会返回位图值 =null.. 有时它具有位图值不显示对话框..它通过异常即

```
 java.lang.NullPointerException
04-16 10:11:52.310: WARN/System.err(1395):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:432)
04-16 10:11:52.310: WARN/System.err(1395):     at myclassname.onActivityResult 
```

对于 iopen 画廊，我使用了下面的代码

```
 Intent intent = new Intent();
         intent.setType("image/*");
         intent.setAction(Intent.ACTION_GET_CONTENT);
         ((Activity) context).startActivityForResult(Intent.createChooser(intent,"Select Picture"), PICK_FROM_FILE); 
```

敌人从画廊获取数据我使用了这个代码

```
@Override 
              public  void onActivityResult(int requestCode, int resultCode, Intent data) 
              {
                   super.onActivityResult(requestCode, resultCode, data);

                  if(resultCode == Activity.RESULT_OK)
                  { 
                      Uri selectedImage = data.getData();
                       try {

 Bitmap bitmap =   BitmapFactory.decodeStream(getContentResolver().openInputStream(selectedImage));

                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                  }
                 } 
```

请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:17:33.153

在您`onActivityResult`将接收图像的代码更改为此代码时，

```
 if (resultCode == RESULT_OK && requestCode == PICK_FROM_FILE) {

        Uri contentUri = data.getData();
        String[] proj = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(contentUri, proj, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        String tmppath = cursor.getString(column_index); // get path of image
        Bitmap mBitmap = BitmapFactory.decodeFile(tmppath); // decode path into bitmap
        iv.setImageBitmap(mBitmap); // set image to imageview
    } 
```

# facebook-like - Facebook Like 按钮 - 带有简短描述和图像的评论框

> ID：10168818
> 
> 赞同：2
> 
> 时间：2012-04-16T04:46:36.987
> 
> 标签：facebook-like

在我的网站上，当用户选择 Facebook 喜欢按钮时，他们可以选择输入评论。这个输入评论的弹窗只包含用户的头像和输入评论的地方。我怎样才能在评论下方直接包含我的图片和网站的简短描述？？？起初我以为它来自 HTML 标题属性或元属性 =“og:title” ...但填充这些没有影响

我有另一个网站，其中包含图片和评论下方的描述，但图片似乎是随机抓取的 - 但总是相同 - 从网站和我从 -title- 属性想到的简短描述，但它不是 - 我改变了-title- 它仍然显示相同的 desc，就像它的缓存一样？？？

任何想法如何控制或填充喜欢按钮的评论部分中的简短描述和图像？？？

# java - 声音管理器播放随机文件的问题

> ID：10168826
> 
> 赞同：0
> 
> 时间：2012-04-16T04:48:00.770
> 
> 标签：java, android, touch-event

我正在尝试使用 SoundManager 随机播放 30 秒的声音片段，同时启动由 onTouch 事件触发的动画序列（闪烁图形）。无论出于何种原因，在播放大约 5 秒后，声音片段就会被剪掉，我不知道为什么。有什么想法吗？

同样经过测试，似乎直到最初的 onTouch 事件后一分钟左右才会播放。

```
public class Soundboard extends Activity {
    private SoundManager mSoundManager;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        mSoundManager = new SoundManager();
        mSoundManager.initSounds(getBaseContext());
        mSoundManager.addSound(0, R.raw.sound0);
        mSoundManager.addSound(1, R.raw.sound1);
        mSoundManager.addSound(2, R.raw.sound2);
        mSoundManager.addSound(3, R.raw.sound3);
    };

    public boolean onTouchEvent(MotionEvent evt){

        Random r = new Random();
        int x = r.nextInt(3);

        switch (evt.getAction()) 
        {
            case MotionEvent.ACTION_DOWN:
            mSoundManager.playSound(x);
            startAnimating();
            return super.onTouchEvent(evt);

            case MotionEvent.ACTION_UP:
            break;
            default:
            break;
        }
        return true;
    }

    private void startAnimating() {

        ImageView wiub_screen01 = (ImageView) findViewById(R.id.wiub_screen01);
        Animation fadein01 = AnimationUtils.loadAnimation(this, R.anim.fade_in01);
        wiub_screen01.startAnimation(fadein01);

        ImageView wiub_screen00 = (ImageView) findViewById(R.id.wiub_screen00);
        Animation fadein00 = AnimationUtils.loadAnimation(this, R.anim.fade_in00);
        wiub_screen00.startAnimation(fadein00);
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:11:03.190

很有可能没有加载音频。如果你真的想播放一些短片，一定要看看 SoundPool。（改编自 Google SoundPool 示例）

试试这个：

```
public class Soundboard extends Activity {
    private SoundPool mSoundPool;
    boolean loaded = false;
    private int[] soundIDs;
    private int[] resIDs;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        mSoundPool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
        mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
            @Override
            public void onLoadComplete(SoundPool soundPool, int sampleId,
                            int status) {
                    loaded = true;
            }
        });
        resIDs = new int[]{R.raw.sound0,R.raw.sound1,R.raw.sound2.R.raw.sound3 };

        for(int i=0; i<resIDs.length; i++){
            soundIDs[i] = mSoundPool.load(this, resIDs[i], 1);              
        }
    };

    public boolean onTouchEvent(MotionEvent evt){

        Random r = new Random();
        int x = r.nextInt(resIDs.length);

        switch (evt.getAction()) 
        {
            case MotionEvent.ACTION_DOWN:
                AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
                float actualVolume = (float) audioManager
                                .getStreamVolume(AudioManager.STREAM_MUSIC);
                float maxVolume = (float) audioManager
                                .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
                float volume = actualVolume / maxVolume;
                // Is the sound loaded already?
                if (loaded) {
                        mSoundPool.play(soundIDs[x], volume, volume, 1, 0, 1f);
                        Log.i("Test", "Played sound");
                }
            startAnimating();
            return super.onTouchEvent(evt);

            case MotionEvent.ACTION_UP:
            break;
            default:
            break;
        }
        return true;
    }

    private void startAnimating() {

        ImageView wiub_screen01 = (ImageView) findViewById(R.id.wiub_screen01);
        Animation fadein01 = AnimationUtils.loadAnimation(this, R.anim.fade_in01);
        wiub_screen01.startAnimation(fadein01);

        ImageView wiub_screen00 = (ImageView) findViewById(R.id.wiub_screen00);
        Animation fadein00 = AnimationUtils.loadAnimation(this, R.anim.fade_in00);
        wiub_screen00.startAnimation(fadein00);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:44:36.290

尝试将 raw 文件夹中的文件转换为 ogg 格式。

# ajax - Django 1.4 中的异步更新/AJAX

> ID：10168827
> 
> 赞同：1
> 
> 时间：2012-04-16T04:48:33.950
> 
> 标签：ajax, django, jquery

嗨，我还是 Django 的新手，之前没有使用过 Ajax。

我正在构建一个应用程序，两个玩家可以聊天，所以它基本上是一个聊天框，我希望当另一个玩家在他们的页面上输入文本时，为一个玩家更新页面。我想知道是否有人对这种功能有任何好的资源？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T04:52:47.157

您可能想尝试 html5 websocket。

对于 JavaScript 和 ajax，定期刷新页面。或者更好地通过 ajax 调用获取新消息并附加到 DOM。

# vb6 - How to Detect the Currently Opened Files in VB6 for Media Centre

> ID：10168837
> 
> 赞同：1
> 
> 时间：2012-04-16T04:49:29.990
> 
> 标签：vb6, wmi, windows-media-center

I am writing a Media Centre Addin in Vb6 and it was all going good until i got to the point where i want to find the "Currently Playing song FilePath or URl"

I have spend a number of hours racking my brain to figure out a way of seeing what the "Currently Opened Files" are on a machine at any point of time.

My idea is to get all the currently opened files, and then filter the Extensions from these and find the media item that is currently playing, and get the filepath..

Does anyone know how i can do this? and what methods or classes or Librarys i should be looking at or importing In.. This one has really got me thinking.

I was looking at the WMI Windows Management controls, but cant seem to find what i am looking for.. any help would be great..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:41:40.573

我不确定您是否可以在 VB6 中执行此操作。

Media Center SDK 表明 Microsoft.MediaCenter 命名空间将公开 MediaCollection 类。此类有一个 AddItem 方法，可用于在打开歌曲（文件）时构建集合。有一个名为 IsActive 的属性，指示该特定集合是否处于活动状态（正在播放）

您将能够枚举组成集合的文件（歌曲）以查看正在播放的内容。然后在它们被释放时将它们移除。

不确定这是否有帮助。

谢谢，--博士

# actionscript-3 - How to replace PureMVC Standard with PureMVC MultiCore

> ID：10168840
> 
> 赞同：1
> 
> 时间：2012-04-16T04:49:37.387
> 
> 标签：actionscript-3, module, migration, flash-builder, puremvc

I am working on a project, which uses PureMVC Standard. Now I need to add a new module SWF, which also uses Standard. I know the solution is to replace Standard MVC with MultiCore MVC, but there are two problems:

*   Standard's package structure is different from MultiCore's - do I have to correct this manually?
*   Under standard mvc framework, some code in the constructor of `Mediator` is allowed, while in MultiCore, this seems to be absolutely forbidden - so do I have to change so many constructors to get rid of this?

And finally: Other than replacing Standard with MultiCore, is there any better way to resolve the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:48:02.343

除了跨项目的全局搜索和替换之外，我不知道有任何其他更改包结构的好方法。我这样做也没有问题。

对于中介，我在构造函数中初始化简单变量（整数、布尔值、数组等）从来没有遇到过问题，但其他任何东西都会被推迟到 onRegister （尤其是任何涉及舞台的东西），看起来像：

```
public class MyMediator extends Mediator implements IMediator {
    public static const NAME : String = "MyMediator";

    // internal states
    private var foo : int;

    public function MyMediator (viewComponent : Object) {
        super(NAME, viewComponent);

        foo = 0;

        trace("MyMediator()", main_mc);
    }

    override public function onRegister () : void {
        main_mc.addEventListener(...);
    }

    protected function get main_mc () : Main {
        return viewComponent as Main;
    }
} 
```

无论如何，在 AS3 中使用稀疏构造函数是个好主意，因为[构造函数代码总是被解释而不是编译](https://stackoverflow.com/questions/1650714/actionscript-3-init)。

现在出于习惯，我对所有项目都使用多核，即使我有一个单核。这使得在新项目中重用调解器和代理变得更加容易。

# macos - equal power crossfade in Audio Unit?

> ID：10168842
> 
> 赞同：10
> 
> 时间：2012-04-16T04:49:45.153
> 
> 标签：macos, audio, core-audio, audiounit

This is actually more of a theoretical question, but here it goes:

I'm developing an effect audio unit and it needs an equal power crossfade between dry and wet signals.

But I'm confused about the right way to do the mapping function from the linear fader to the scaling factor (gain) for the signal amplitudes of dry and wet streams.

Basically, I'ev seen it done with cos / sin functions or square roots... essentially approximating logarithmic curves. But if our perception of amplitude is logarithmic to start with, shouldn't these curves mapping the fader position to an amplitude actually be exponential?

This is what I mean:

Assumptions:

*   `signal[i]` means the ith sample in a signal.
*   each sample is a float ranging [-1, 1] for amplitudes between [0,1].
*   our GUI control is an NSSlider ranging from [0,1], so it is in principle linear.
*   `fader` is a variable with the value of the NSSlider.

**First Observation:** We perceive amplitude in a logarithmic way. So if we have a linear fader and merely adjust a signal's amplitude by doing: `signal[i] * fader` what we are perceiving (hearing, regardless of the math) is something along the lines of:

![enter image description here](../Images/54f0361fa3be3c05a03468f19cae37a0.png)

This is the so-called crappy fader-effect: we go from silence to a drastic volume increase across the leftmost segment in the slider and past the middle the volume doesn't seem to get that louder.

So to do the fader "right", we instead either express it in a dB scale and then, as far as the signal is concerned, do: `signal[i] * 10^(fader/20)` or, if we were to keep or fader units in [0,1], we can do :`signal[i] * (.001*10^(3*fader))`

Either way, our new mapping from the NSSlider to the fader variable which we'll use for multiplying in our code, looks like this now:

![enter image description here](../Images/2d1e6cfa28b31f66d911bc6049846393.png)

Which is what we actually want, because since we perceive amplitude logarithmically, we are essentially mapping from **linear** (NSSLider range 0-1) to **exponential** and feeding this exponential output to our logarithmic perception. And it turns out that : `log(10^x)=x` so we end up perceiving the amplitude change in a linear (aka correct) way.

Great.

Now, my thought is that an equal-power crossfade between two signals (in this case a dry / wet horizontal NSSlider to mix together the input to the AU and the processed output from it) is essentially the same only that with one slider acting on both hypothetical signals dry[i] and wet[i].

So If my slider ranges from 0 to 100 and dry is full-left and wet is full-right), I'd end up with code along the lines of:

```
Float32 outputSample, wetSample, drySample = <assume proper initialization>
Float32 mixLevel = .01 * GetParameter(kParameterTypeMixLevel);
Float32 wetPowerLevel = .001 * pow(10, (mixLevel*3)); 
Float32 dryPowerLevel = .001 * pow(10, ((-3*mixLevel)+1));
outputSample = (wetSample * wetPowerLevel) + (drySample * dryPowerLevel); 
```

The graph of which would be:

![enter image description here](../Images/a1a874319db9bd44107eed4c6e339f56.png)

And same as before, because we perceive amplitude logarithmically, this exponential mapping should actually make it where we hear the crossfade as linear.

However, I've seen implementations of the crossfade using approximations to log curves. Meaning, instead:

![enter image description here](../Images/b63cbb6f56ffa3262b84d6d5c43faaef.png)

But wouldn't these curves actually emphasize our logarithmic perception of amplitude?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-01T06:42:42.583

您正在考虑的“等功率”交叉渐变与在您从湿渐变到干时保持混音的总输出功率恒定有关。保持总功率恒定作为保持总感知响度恒定的合理近似值（实际上这可能相当复杂）。

如果您在两个功率相等的不相关信号之间进行交叉淡入淡出，您可以通过使用平方值总和为 1 的任意两个函数在交叉淡入淡出期间保持恒定的输出功率。这方面的一个常见示例是函数集

g1(k) = ( 0.5 + 0.5*cos(pi*k) )^.5

g2(k) = ( 0.5 - 0.5*cos(pi*k) )^.5,

其中 0 <= k <= 1（请注意，如前所述，满足 g1(k)^2 + g2(k)^2 = 1）。这是一个证明，这会导致不相关信号的恒定功率交叉淡入淡出：

假设我们有两个信号 x1(t) 和 x2(t) 具有相等的幂 E[ x1(t)^2 ] = E[ x2(t)^2 ] = Px，它们也是不相关的 ( E[ x1(t) *x2(t)] = 0)。请注意，满足先前条件的任何一组增益函数都将具有 g2(k) = (1 - g1(k)^2)^.5。现在，形成总和 y(t) = g1(k)*x1(t) + g2(k)*x2(t)，我们有：

```
E[ y(t)^2 ] = E[ (g1(k) * x1(t))^2  +  2*g1(k)*(1 - g1(k)^2)^.5 * x1(t) * x2(t)  +  (1 - g1(k)^2) * x2(t)^2 ] 
= g1(k)^2 * E[ x1(t)^2 ] + 2*g1(k)*(1 - g1(k)^2)^.5 * E[ x1(t)*x2(t) ] + (1 - g1(k)^2) * E[ x2(t)^2 ]
= g1(k)^2 * Px + 0 + (1 - g1(k)^2) * Px = Px, 
```

其中我们使用了 g1(k) 和 g2(k) 是确定性的，因此可以被拉到期望算子 E[ ] 之外，并且根据定义， E[ x1(t)*x2(t) ] = 0 因为 x1( t) 和 x2(t) 被假定为不相关。这意味着无论我们在淡入淡出的哪个位置（无论我们选择什么 k），我们的输出都将具有相同的功率 Px，因此希望与感知响度相同。

请注意，对于完全相关的信号，您可以通过执行“线性”衰落来实现恒定的输出功率 - 使用和两个函数之和为一个（ g1(k) + g2(k) = 1 ）。当混合有些相关的信号时，这两者之间的增益函数在理论上是合适的。

你说的时候在想什么

> 和以前一样，因为我们以对数方式感知幅度，所以这个指数映射实际上应该使它在我们听到交叉淡入淡出的地方成为线性的。

是一个信号的响度应该在感知上作为滑块位置 (k) 的线性函数而降低，而另一个信号应该作为滑块位置的线性函数在感知上响度增加，当应用您导出的交叉淡入淡出时。虽然您的推导似乎很准确，但不幸的是，这可能不是混合干湿信号一致性的最佳方式 - 通常，无论滑块位置如何，保持相同的输出响度是更好的选择。无论如何，可能值得尝试几个不同的功能，看看什么是最有用和最一致的。

# comments - antlr v3 上下文感知条件注释包含

> ID：10168844
> 
> 赞同：2
> 
> 时间：2012-04-16T04:49:55.687
> 
> 标签：comments, antlr, channel

我正在为公共使用的产品修改 DSL 语法。目前，所有`/*...*/`评论都被默默地忽略，但我需要对其进行修改，以便将某些关键元素之前的评论解析为 AST。我需要保持向后兼容性，用户仍然可以在整个 DSL 中任意添加评论，并且只包含那些关键评论。

解析器语法目前看起来有点像这样：

```
grammar StateGraph;
graph: 'graph' ID '{' graph_body '}';
graph_body: state+;
state: 'state' ID '{' state_body '}';
state_body: transition* ...etc...; 
transition: 'transition' (transition_condition) ID ';';
COMMENT: '/*' ( options {greedy=false;} : . )* '*/' {skip();} 
```

放在“graph”和“state”元素之前的注释包含有意义的描述和注释，需要包含在解析的 AST 中。所以我修改了这两条规则，不再跳过评论：

```
graph: comment* 'graph' ID '{' graph_body '}';
state: comment* 'state' ID '{' state_body '}';
COMMENT: '/*' ( options {greedy=false;} : . )* '*/' 
```

如果我天真地使用上述内容，则其他注释在随后执行树解析器时会导致不匹配的令牌错误。如何忽略所有未放在“图表”或“状态”前面的 COMMENT 实例？

一个示例 DSL 将是：

```
/* Some description
 * @some.meta.info
 */
graph myGraph {
  /* Some description of the state.
   * @some.meta.info about the state
   */
  state first {
    transition if (true) second; /* this comment ignored */
  }

  state second {
  }

  /* this comment ignored */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:07:30.557

这是我实际工作的解决方案。我很想得到反馈。

基本思路是将评论发送到 HIDDEN 频道，在我想要的地方手动提取，并使用重写规则在需要的地方重新插入评论。提取步骤的灵感来自此处的信息：[http](http://www.antlr.org/wiki/pages/viewpage.action?pageId=557063) ://www.antlr.org/wiki/pages/viewpage.action?pageId=557063 。

现在的语法是：

```
grammar StateGraph;

@tokens { COMMENTS; }

@members {
// matches comments immediately preceding specified token on any channel -> ^(COMMENTS COMMENT*)
CommonTree treeOfCommentsBefore(Token token) {
    List<Token> comments = new ArrayList<Token>();
    for (int i=token.getTokenIndex()-1; i >= 0; i--) {
       Token t = input.get(i);
       if (t.getType() == COMMENT) {
          comments.add(t);
       }
       else if (t.getType() != WS) {
          break;
       }
    }
    java.util.Collections.reverse(comments);

    CommonTree commentsTree = new CommonTree(new CommonToken(COMMENTS, "COMMENTS"));
    for (Token t: comments) {
       commentsTree.addChild(new CommonTree(t));
    }
    return commentsTree;
}
}

graph
    : 'graph' ID '{' graph_body '}'
      -> ^(ID {treeOfCommentsBefore($start)} graph_body);
graph_body: state+;
state
    : 'state' ID '{' state_body '}'
      -> ^(ID {treeOfCommentsBefore($start)} staty_body);
state_body: transition* ...etc...; 
transition: 'transition' (transition_condition) ID ';';
COMMENT: '/*' .* '*/' {$channel=HIDDEN;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:56:50.413

这对你有用吗？

```
grammar StateGraph;
graph: 'graph' ID '{' graph_body '}';
graph_body: state+;
state: .COMMENT 'state' ID '{' state_body '}';
state_body: .COMMENT transition* ...etc...; 
transition: 'transition' (transition_condition) ID ';';
COMMENT: '/*' ( options {greedy=false;} : . )* '*/' {skip();} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T15:23:44.377

> 如何忽略所有未放在“图表”或“状态”前面的 COMMENT 实例？

您可以通过在评论关闭*后*`"*/"`检查是否有任何一个`'graph'`或`'state'`前面，中间有一些可选空格来做到这一点。如果是这种情况，不要做任何事情，如果不是这种情况，谓词就会失败，你*就会通过*规则和简单`skip()`的注释标记。

在 ANTLR 语法中，看起来像：

```
COMMENT
 : '/*' .* '*/' ( (SPACE* (GRAPH | STATE))=> /* do nothing, so keep this token */ 
                | {skip();}                  /* or else, skip it               */ 
                )
 ;

GRAPH  : 'graph';
STATE  : 'state';
SPACES : SPACE+ {skip();};

fragment SPACE : ' ' | '\t' | '\r' | '\n'; 
```

请注意`.*`和`.+`默认情况下是不贪婪的：不需要设置`options{greedy=false;}`.

另外，请注意，您不要`SPACES`在`COMMENT`规则中使用，因为在调用时`SPACES`执行该`skip()`方法！

# validation - 验证 - 前端和提要文件 - 使用相同的框架是否有效？

> ID：10168849
> 
> 赞同：1
> 
> 时间：2012-04-16T04:50:36.323
> 
> 标签：validation, struts, drools

我有一个基于 Java 的 Web 应用程序，它大约有 7 年的历史，并且随着时间的推移而有机地增长。从历史上看，它一直是基于 mvc 的应用程序。用户过去常常使用基于标准 mvc 的验证（即 Struts）来输入数据。在某个地方，我们不得不使用 Drools 对来自其他来源的提要文件进行一些验证。基于 Drools 的验证运行良好。

然而，现在我们遇到了一个问题。MVC 中有一些验证，即 Struts。Drools 中有一些验证。虽然它们都在各自的领域工作得很好，但我们有重复的验证。此外，正如预期的那样，我们在一种情况下存在验证问题，而在另一种情况下则没有。当然，战术上的解决方法是我们很好地掌握所有验证，并确保任何传入的数据（无论是通过前端还是来自提要文件）都经过所有验证。它应该可以工作，但这是劳动密集型的并且容易出错。

我正在对该小组进行民意调查，以了解是否有一些战略解决方案。无论如何我可以将验证移动到单个存储库中，并让前端数据和提要数据都经过相同的验证？最简单的答案似乎是我将所有验证移至 Drools，并确保前端与 Drools 交互以执行所有验证。当然 Drools 正在处理 - 并将继续处理 - 所有基于提要的数据。我也知道 Drools - 也许 - 不打算以这种方式使用，因此不会成为我对来自基于 Web 的前端的数据进行任何验证的首选。

还有其他方法吗？你遇到过这个问题吗？如果是这样，您是否设法解决了这个问题？如果是这样，怎么做？

谢谢阅读。非常感谢您的任何回复。

# java - 用于 spring 和 hibernate 应用程序的逆向工程工具

> ID：10168852
> 
> 赞同：0
> 
> 时间：2012-04-16T04:51:44.297
> 
> 标签：java, spring, spring-mvc, maven-2, reverse-engineering

我的 java web 应用程序代码主要是注释库。应用程序使用 Spring core、Spring MVC、Spring security、hibernate 和 jsp。它使用 maven 构建项目，由多个 maven 项目组成。代码根本没有文档。你能给我推荐任何开源或商业工具来分析应用程序流和数据流吗？

它也很好，如果可以从 JBoss 中部署的应用程序创建流。我的意思是从耳朵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:40:41.093

你可以看看像[JavaMelody](http://code.google.com/p/javamelody/)这样的东西。它通常用于性能检测，但由于它还构建调用层次结构，因此您也应该能够将其用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:42:26.873

以调试模式启动，在开始时设置断点并逐步执行。顺便说一句，分析程序流程不是逆向工程。

# sqlite - sql lite vs 隔离存储（Windows Phone）

> ID：10168860
> 
> 赞同：2
> 
> 时间：2012-04-16T04:53:43.280
> 
> 标签：sqlite, windows-phone-7, isolatedstorage

我正在构建一个应用程序，它将从一些 CMS 中获取内容，并将其保存在手机中。

通常我使用独立存储设置来做到这一点。我有什么理由要改用 SQLlite 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T06:14:18.210

为什么需要使用 SQLite；MS 没有对 SQLite 的直接支持。您可以将 SQLCE 用于您的应用程序。如果您使用大量结构化数据，那么隔离存储的使用是不明显的。您仍然决定使用 ISO 进行存储，我相信您将来肯定会遇到问题。可能是墓碑、FAS 等领域，您可能需要花费大量时间将数据保存到文件中

# r - 绘图表达式中的指数

> ID：10168863
> 
> 赞同：6
> 
> 时间：2012-04-16T04:53:56.320
> 
> 标签：r, plot, plotmath

我想要以下内容，例如在 ggplot2 标签中：

```
ylab(expression((hat(beta)^(2))(x))) 
```

但 . 周围没有括号`hat(beta)^(2)`。但是，如果我删除括号，则`(x)`上升到指数。

这些表达式中有分组吗？还是看不见的括号？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T05:54:34.203

这是你想要的吗？

```
ylab(expression(hat(beta)^(2)*(x))) 
```

# php - 上传 4 种不同尺寸图像的最佳 MySQL 模型

> ID：10168870
> 
> 赞同：0
> 
> 时间：2012-04-16T04:54:58.183
> 
> 标签：php, image

我正在做一个主要关注照片的项目。我想上传同一张图片的 4 个不同版本。

由于项目的性质，图像需要是最佳的，因此以最佳质量（最佳质量/尺寸比）上传。我将使用 Photoshop 创建 4 张图像的最佳质量/尺寸版本。换句话说，我不会在上传时使用 PHP 来调整图像大小。

对于所有 4 张图片，**标题**和**描述**与上传图片的**日期**相同。每个图像都会有自己的**宽度**和**高度**属性（以便在以 html 格式输出图像时帮助浏览器）...

我想出了以下模型：

```
image (image_id, title, desc, filename_s, filename_s_width, filename_s_height, filename_m, filename_m_width, filename_m_height, filename_l, filename_l_width, filename_l_height, filename_xl, filename_xl_width, filename_xl_height, uploaded) 
```

然后，考虑到上述模型将来不会有很大的扩展性，我想到了以下模型：

```
image (image_id, title, desc, uploaded)
imagesize (size_id, size)
image_version (id, image_id, filename, width, height, size_id) 
```

还有3个模型，包括上传主图像并在数据库中记录。对于该主图像的版本，将单词“_small”、“_medium”、“_large”、“_xlarge”附加到文件名。但是，我将无法记录版本图像的宽度和高度（只是主要图像）（我真的想要）。所以，也许那个模型不是最好的……或者它是……

我想在我开始这个项目之前我会问。我想从一个好的开始，并有一个坚实的基础。

我在正确的道路上吗？您会使用第二种型号吗？**有没有更好的模型我应该知道？**

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:04:01.193

我肯定会选择第二个。它允许在不限制*数量的情况下**提供*可用尺寸的灵活性。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:07:20.513

请也考虑存储*一张*图像，然后使用 ImageMagick 等工具即时调整其大小：

[http://php.net/manual/en/book.imagick.php](http://php.net/manual/en/book.imagick.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T07:13:07.207

你的第二个模型更好。

我可能对这个模型做的唯一调整是将`filename`属性分成基本名称和后缀，并去掉不必要的 id on `image_version`：

```
CREATE TABLE imagesizes (
    id TINYINT UNSIGNED NOT NULL PRIMARY KEY,
    size VARCHAR NOT NULL COMMENT 'e.g. small, large, thumbnail, original, etc',
    suffix VARCHAR NOT NULL COMMENT 'e.g. _s, _l, _t, or nothing for no suffix',
    UNIQUE KEY suffix (suffix),
    UNIQUE KEY size (size)
);

CREATE TABLE images (
    id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    basename VARCHAR NOT NULL COMMENT 'the base name of the image. Add suffixes to get a filename',
    title VARCHAR NOT NULL,
    desc VARCHAR NOT NULL,
    uploaded_on DATETIME NOT NULL,
    UNIQUE KEY basename (basename)
);

CREATE TABLE imagefiles (
    image_id INTEGER UNSIGNED NOT NULL,
    imagesize_id TINYINT UNSIGNED NOT NULL,
    width INTEGER UNSIGNED NOT NULL,
    height INTEGER UNSIGNED NOT NULL,
    PRIMARY KEY (image_id, imagesize_id),
    KEY imagesize_idx (imagesize_id),
    CONSTRAINT image FOREIGN KEY (image_id) REFERENCES images (id) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT imagesize FOREIGN KEY (imagesize_id) REFERENCES imagesizes (id) ON DELETE NO ACTION ON UPDATE CASCADE
); 
```

然后，您可以像这样获得文件名：

```
SELECT CONCAT(image.basename, imagesizes.suffix) AS filename
FROM images INNER JOIN imagefiles ON images.id=imagefiles.id
INNER JOIN imagesizes ON imagefiles.imagesize_id=imagesizes.id; 
```

对于普通情况，您可能应该将其包装在视图中并改为查询视图：

```
CREATE VIEW imagelist AS 
SELECT images.id AS id, images.basename AS basename, images.title AS title, images.desc AS desc, 
images.uploaded_on AS uploaded_on, imagefiles.width AS width, imagefiles.height AS height, imagesizes.id AS size_id, 
imagesizes.size AS size, imagesizes.suffix AS suffix, 
CONCAT(imagefiles.basename, imagesizes.suffix) AS filename; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T05:28:29.160

上传图片后，您可以使用以下`getimagesize`函数获取图片尺寸：

[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

猜猜这将是最简单的，并为您提供所需的所有灵活性。*

# deadlock - Reusable Barrier 解决方案有死锁？

> ID：10168874
> 
> 赞同：3
> 
> 时间：2012-04-16T04:55:08.913
> 
> 标签：deadlock, semaphore, reusability, barrier

我一直在阅读“信号量小书”，在第 41 页有一个解决可重用障碍问题的方法。我遇到的问题是为什么它不会产生死锁情况。

```
1 # rendezvous
2
3 mutex.wait()
4     count += 1
5     if count == n:
6         turnstile2.wait() # lock the second
7         turnstile.signal() # unlock the first
8 mutex.signal()
9
10 turnstile.wait() # first turnstile
11 turnstile.signal()
12
13 # critical point
14
15 mutex.wait()
16     count -= 1
17     if count == 0:
18         turnstile.wait() # lock the first
19         turnstile2.signal() # unlock the second
20 mutex.signal()
21
22 turnstile2.wait() # second turnstile
23 turnstile2.signal() 
```

在这个解决方案中，在第 15 行和第 20 行之间，在持有会导致死锁的互斥体时在信号量（第 18 行）上调用 wait() 不是一个坏习惯吗？请解释。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:11:10.867

`mutex`保护`count`变量。第一个互斥锁涉及增加计数器以考虑每个线程，最后一个进入的线程 ( `if count == n`) 锁定第二个 tunstile 以准备离开（见下文）并释放等待的 (n-1) 个线程在第 10 行）。然后每个信号都向下一个发出信号。

第二个互斥锁的工作方式与第一个类似，但递减`count`（相同的互斥锁保护它）。最后一个进入互斥锁块的线程`turnstile`为下一批进入做准备（见上文）并释放在第 22 行等待的 (n-1) 个线程。然后每个线程向下一个发出信号。

因此`turnstile`将入口协调到临界点，同时`turnstile2`协调从临界点的出口。

不可能有死锁：当（最后一个）线程到达第 18 行时，`turnstile`保证不会被任何其他线程持有（它们都在第 22 行等待）。同样与`turnstile2`

# php - 客户端图像调整大小并保存

> ID：10168877
> 
> 赞同：0
> 
> 时间：2012-04-16T04:55:26.413
> 
> 标签：php, javascript, jquery

有没有办法通过网络浏览器客户端调整图像大小并将其保存到临时文件？

我想要完成的是将图像大小调整为最大 1024px 宽/高，将其保存在本地，然后将调整大小的图像上传到服务器。

原因是我正在构建一个在线应用程序，允许用户上传最多 6 张高分辨率图像，每张最大 4mb。然后在服务器上我将大小调整为 1024px 宽/高，实际上只有 200kb 左右。上传 4mb 只是为了调整为更小的文件大小有点浪费，所以我希望有一种方法可以调整大小，在上传之前保存一个临时文件客户端。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:12:45.690

您需要的第一个是在上传之前获取上传图像 - 这可以通过 input[type=file] 元素的 HTML5 files 属性来实现。

如果这样做了，您将需要修改图像数据以使用 JS/HTML5 调整大小 - 不知道它是如何工作的。

您可以使用 XHR 上传修改后的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:05:33.613

你可以使用 HTML5，我想... 在这里[转转 HTML5 画布（裁剪图像）](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-crop/)

# c++ - C++ 使用最少的代码将字符串转换为 wstring 并返回

> ID：10168883
> 
> 赞同：0
> 
> 时间：2012-04-16T04:56:59.247
> 
> 标签：c++, string, type-conversion, wstring

以下代码将 a 转换为`string`我`wstring`需要调用我正在使用的词干提取方法的 a。但是，`map`我存储词干的地方充满了`strings`. 我查看了一些关于 SO 的解决方案，许多从`wstring`to的转换`string`是大约十几行代码。**有什么方法可以快速（最好是内联或类似）从 a`string`转换为 a`wstring`并返回？**

```
string ANSIWord("documentation");
wchar_t* UnicodeTextBuffer = new wchar_t[ANSIWord.length()+1];
wmemset(UnicodeTextBuffer, 0, ANSIWord.length()+1);
mbstowcs(UnicodeTextBuffer, ANSIWord.c_str(), ANSIWord.length());
wWord = UnicodeTextBuffer; 
```

否则，我会考虑将我的`map`和其他方法转换为使用`wstring`.

**编辑：**

Epiphany：我决定将整个转换方法转换放在它自己的方法中，从而将其减少到所需的一行。但是，出于好奇/将来参考，我仍然想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:59:28.680

为什么不编写一个包含大约 12 行代码的函数来进行转换，然后调用该函数？

# protocols - 什么是 SMPP 协议？

> ID：10168887
> 
> 赞同：12
> 
> 时间：2012-04-16T04:57:58.167
> 
> 标签：protocols, smpp

什么是 SMPP 协议，它是如何工作的？

我什至还没有看到它，必须从介绍开始。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-26T09:34:03.617

**SMPP 是一种低级二进制 Internet 协议。**

SMPP 的主要用途是发送和接收中到大量的 SMS 文本。

SMPP 使用标准 Internet 连接来连接到 SMPP 提供商，从而取消或补充购买 GSM 调制解调器或 SIM 卡。

与 GSM 调制解调器相比，SMPP 具有以下优势：

*   通过有意义的名称发送，例如公司名称而不是电话号码。
*   通过短代码发送；3、4 或 5 位电话号码，而不是正常长度。
*   更快的处理

软件：

*   [Kannel](http://www.kannel.org/)是一个用于试验的开源客户端。
*   ActiveXperts [Mobile Messaging Toolkit](http://www.activexperts.com/mobile-messaging-component/)是一个带有 SMPP 模拟器的商业解决方案。

郑重声明：我是 ActiveXperts 的一名程序员，积极参与 SMPP 和 SMS 相关的开发。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T07:15:04.027

从根本上说，它是 SMS 聚合器公司（主要是！）在与不同类型的网关 (GW) 通信时使用的主要协议。

请检查这些链接...它们肯定会帮助您更彻底地了解 SMPP。 [http://www.simpleteam.com/downloads/SMPP_v3_4_Issue1_2.pdf](http://www.simpleteam.com/downloads/SMPP_v3_4_Issue1_2.pdf)

[http://www.ehow.com/facts_7344160_smpp-protocol_.html](http://www.ehow.com/facts_7344160_smpp-protocol_.html)

**维基百科定义：** “SMPP 是一种电信行业协议，用于在 SMS 对等实体（例如短消息服务中心和/或外部短消息实体）之间交换 SMS 消息。它通常用于允许第三方（例如新闻机构等增值服务提供商） ) 提交消息，通常是批量提交。”

# lwuit - Lwuit 1.5 GUI Builder 生成 cod 文件

> ID：10168894
> 
> 赞同：0
> 
> 时间：2012-04-16T04:58:49.407
> 
> 标签：lwuit, gui-builder

使用 GUI BUILDER 完成 Blackberry 项目后，谁能告诉我如何使用 lwuit1.5 资源编辑器签署和获取 cod 文件。

注意：我只使用 Lwuit1.5 而不是 CodenameOne 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:13:11.110

我不知道如何使用资源编辑器对 cod 文件进行签名。我不认为这是可能的。我从 Netbeans 生成我的 cod 文件。当我运行一个 BB 项目时，它会编译并生成 cod 和 alx 文件。在 Netbeans 中使用 BB 插件和 BB 模拟器[http://plugins.netbeans.org/plugin/11194/rim-blackberry-plugin](http://plugins.netbeans.org/plugin/11194/rim-blackberry-plugin)

# iphone - 自定义部分标题 uilabel 背景和文本

> ID：10168896
> 
> 赞同：0
> 
> 时间：2012-04-16T04:59:14.117
> 
> 标签：iphone, ios, uitableview

我目前正在创建自己的自定义部分标题，但我从来没有通过代码编辑任何文本。我用来填充自定义标题的新方法正在做一些奇怪的事情，如下![在此处输入图像描述](../Images/a9fd7ec7e727f35e3be9de5e07d28bce.png)所示

我想将文本更改为白色并稍微加粗，并使白色背景透明..

这是我用来执行此操作的代码

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
{
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)];
    [headerView setBackgroundColor:[UIColor grayColor]];

    // Add the label
    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, 0.5, 20, 20)];

    // do whatever headerLabel configuration you want here

    headerLabel.text = [self tableView:tableView titleForHeaderInSection:section];
    [headerView addSubview:headerLabel];

    // Return the headerView
    return headerView;
} 
```

我试过这个

```
[headerLabel.backgroundColor:[UIColor clearColor]]; 
```

等，但它不工作:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T05:05:58.290

> 我想把文字改成白色...

UILabel 的 textColor 属性是你的朋友。

> 并且稍微大胆一点...

没问题！ `headerLabel.font = [UIFont boldSystemFontOfSize:mySize];`

> 并制作白色透明背景。

哇，哇，这是我见过的最糟糕的二传手语法！！！我的主， myLabel.backgroundColor 是一个***getter***，更改：

```
[headerLabel.backgroundColor:[UIColor clearColor]]; 
```

到：

```
[headerLabel setBackgroundColor:[UIColor clearColor]]; 
```

幸运的是，使用您的语法只会向 nil 发送一条消息，这会将标签的背景颜色默认为白色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:09:18.090

使用以下代码...

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

UILabel *headername = [[UILabel alloc]initWithFrame:CGRectMake(20, 5, 270, 34)];
headername.backgroundColor = [UIColor clearColor];
headername.textColor = [UIColor blackColor];
if(section == 0)
{
    headername.text = @"Name that u wish";
}

else
{
    headername.text = @"Name that u wish";
}
UIView *headerView = [[UIView alloc] init];
UIImageView *tempimage = [[UIImageView alloc]initWithFrame:CGRectMake(10, 5, 300,34)];
tempimage.image = [UIImage imageNamed:@"whitebackground.png"];

[headerView addSubview:tempimage];
[headerView addSubview:headername];

return  headerView;
} 
```

希望，这会帮助你......冷静

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:10:29.577

我为在表中获取自定义标题所做的一切如下，它对我来说工作正常

```
UIView *containerView =
    [[[UIView alloc]
        initWithFrame:CGRectMake(0, 0, 300, 60)]
    autorelease];
UILabel *headerLabel =
    [[[UILabel alloc]
        initWithFrame:CGRectMake(10, 20, 300, 40)]
    autorelease];
headerLabel.text = NSLocalizedString(@"Header for the table", @"");
headerLabel.textColor = [UIColor whiteColor];
headerLabel.shadowColor = [UIColor blackColor];
headerLabel.shadowOffset = CGSizeMake(0, 1);
headerLabel.font = [UIFont boldSystemFontOfSize:22];
headerLabel.backgroundColor = [UIColor clearColor];
[containerView addSubview:headerLabel];
self.tableView.tableHeaderView = containerView; 
```

我只是把它放在`viewDidLoad:`方法中

# iphone - 访问 ASIHTTP 的实例

> ID：10168897
> 
> 赞同：0
> 
> 时间：2012-04-16T04:59:24.867
> 
> 标签：iphone

我希望访问 ASIHTTPRequest 的实例

```
{
ASIHTTPRequest *myRequest;

}
@property (nonatomic, retain) ASIHTTPRequest *myRequest;

//-----------------------------------

 ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:requestURL]];
 [request setTag:selectTag];

 myRequest=request;

 [request startAsynchronous]; 
```

如果我强制要求停止工作

我使用了代码

```
 if (myRequest!=nil)
    {
        [myRequest cancel];

    } 
```

但 myRequest 总是返回 0x00000000

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:52:02.950

我认为您需要测试请求是否已经完成或取消。

```
if (myRequest && ![myRequest isCancelled] && ![_request isFinished])
{
     [myRequest cancel];
     myRequest = nil;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T05:08:09.637

试试这个它对我的工作

```
 NSURL *url = [NSURL URLWithString:@"Your Url"]; 

    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

    [request setRequestMethod:@"POST"];

    [request setPostValue:email forKey:@"email_id"];

    [request setPostValue:pasw forKey:@"user_password"];

    [request setDelegate:self];

    [request startAsynchronous]; 
```

# jquery - 停止为 jpg 制作动画

> ID：10168898
> 
> 赞同：0
> 
> 时间：2012-04-16T04:59:39.520
> 
> 标签：jquery

我有一个生成动画 jpg 的 url。它附加了一个使用 top 和 left 属性的 js 文件。随机值分配给顶部和左侧。整个脚本是纯javascript。[No `jQuery`is used or `jQuery animate`]

## 我想要的是

停止动画，直到我做鼠标悬停。

## 我的代码

```
$('#s0').live('mouseover',function(){
     var top = $(this).css("top");
     var left = $(this).css("left");
     $(this).css({top:top, left:left}).animate({top:top, left:left}); 
     console.log(top);
     console.log(left);
}) 
```

这只会停止大约一秒钟，因为`animate`需要一个参数来显示`ms`保持动画活跃的时间。

我尝试添加`setinterval`和`hover`.

## 约束

我无法对主 js 文件进行任何更改。我有一个额外的代码来完成这项工作。[这是一个搞砸的系统，我必须遵守规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:08:25.033

尝试这个：

```
$("#s0").on("mouseover", function(){
       $(this).stop();

}).mouseout(function(){
       $(this).animate(  ...  );  // animation continues...
}) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T05:05:55.527

jQuery 现在建议使用[.on()](http://api.jquery.com/on/)代替，`live()`这样您就可以交换它们，然后“该`off()`方法删除使用 .on() 附加的事件处理程序”（[来自文档](http://api.jquery.com/off/)）

# silverlight - 在 Windows Phone 7.5 中扫描文本 (OCR)

> ID：10168901
> 
> 赞同：4
> 
> 时间：2012-04-16T04:59:56.083
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1, ocr, zxing

有没有办法强制[Zxing 库](http://silverlightzxing.codeplex.com/)只扫描文本？我正在寻找离线（非云）解决方案来扫描 Windows 手机中的文本。

或者

集成的 Bing 视觉成功地从图像中扫描文本。有没有办法在我们的应用程序中调用相同的任务（比如 Microsoft.Phone.Tasks）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:11:54.543

如果您正在寻找 OCR 解决方案，您可以使用这个 so [post](https://stackoverflow.com/questions/8742339/gesture-to-text-recognition-ocr-or-gesture-based-native-net-library)。

关于 bing 视觉 - 尚不支持第三方开发人员。尽管有一个名为夏威夷的项目（是的，它是基于云的），但它可能会成为 bing vision ocr 的门户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:26:20.083

据我所知，没有原生的 .NET OCR 引擎。理论上，您可以使用任何适用于 Win CE 的 OCR SDK（只要 WP7 基于它），但在实践中 - 我还没有看到任何可行的解决方案，并且我见过的所有适用于 WP7 的 OCR 应用程序都是基于云服务。如果您改变对 Web API 的看法，我可以为您指出一些准备就绪的云解决方案。

# java - XmlPullParser.END_DOCUMENT 的模糊解释

> ID：10168902
> 
> 赞同：0
> 
> 时间：2012-04-16T05:00:01.703
> 
> 标签：java, android, xml, sax

我`XmlPullParser.END_DOCUMENT`在 Android 的内置 SAX 解析器中发现了对标签的双重处理。代码很简单：

```
 String s; //actually contains XML
    //blah-blah
    factory = XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(false);
    xpp = factory.newPullParser();
    StringReader sw=new StringReader(s);
    xpp.setInput(sw);
    int eventType = xpp.getEventType();
    while (eventType != XmlPullParser.END_DOCUMENT)
    {
        if (eventType == XmlPullParser.START_TAG)
        {
               //blah-blah
        }
        else if(eventType==XmlPullParser.TEXT)
        {
               //blah-blah
        }
        else if (eventType == XmlPullParser.END_TAG)
        {
               //blah-blah
        }
        eventType=xpp.next();
    } 
```

如果 XML 文档基本上看起来像（String s）：

```
<?xml version="1.0" encoding="utf-8"?>
<templates>
    <template key="Person" name="Person">
        <field key="Photo" name="Photo" type="image" hint="Press to select image"/>
    </template>
</templates> 
```

有了这个一切正常。但是如果在最终标签之后有一些额外的字符`</templates>`- 这里有奇怪的一面（我的 XML 的性质是有时会在最终标签之后出现一些垃圾符号）。

对于几乎所有的 Android 设备（大约 90%），SAX 解析器会忽略额外的字符，但在某些设备中——主要是带有 ICS 的设备——SAX 解析器会尝试解析额外的字符并导致崩溃。

所以问题是：什么是 XML 标准？SAX 解析器是否应该在最终标记之后尝试解析额外的符号？无论如何`XmlPullParser.END_DOCUMENT`- 它是数据的结尾还是最终标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:59:45.907

如果根元素的结束标记后有非空白字符，则文件不是格式良好的 XML，解析器需要将此事实报告给应用程序。

# php - 来自具有相同列名的两个表的数据

> ID：10168906
> 
> 赞同：5
> 
> 时间：2012-04-16T05:00:39.040
> 
> 标签：php, mysql, sql, join

我有一张供用户使用的桌子。但是当用户对其个人资料进行任何更改时，我会将它们存储在临时表中，直到我批准它们为止。然后将数据复制到实时表并从临时表中删除。

我想要实现的是，当在管理面板中查看数据时，或者在用户可以在提交前仔细检查的页面中，我想编写一个查询，允许我从两个表中获取数据，其中 id两者都等于 $userid。然后我想向他们显示一个表格，其中旧值出现在左列中，新值出现在右列中。

我找到了一些 sql 解决方案，但我不确定如何在 php 中使用它们来回显结果，因为两者中的列具有相同的名称。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T05:05:35.907

添加`AS`到列名将允许您将其别名为不同的名称。

```
SELECT table1.name AS name1, table2.name AS name2, ...
  FROM table1
  INNER JOIN table2
    ON ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:05:25.173

这是您需要的查询。假设您在两个表中有例如名称字段。表一登录和表二信息。现在

```
SELECT login.name as LoginName , information.name InofName 
FROM login left join information on information.user_id = login.id 
```

现在您可以在任何需要`LoginName`的`InofName`地方使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T05:10:07.973

如果您使用 AS SQL 关键字，则可以仅为该查询的结果重命名列。

```
SELECT
    `member.uid`,
    `member.column` AS `oldvalue`,
    `edit.column` AS `newvalue`
FROM member, edit
WHERE
    `member.uid` = $userId AND
    `edit.uid` = $userId; 
```

这些方面的东西应该适合你。虽然 SQL 不是我的强项，但我很确定这个查询不会按原样工作，即使在具有正确字段和值的表上也是如此。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-16T05:06:29.417

使用 MySQL `JOIN`。您可以在一个 mysql 查询中从 2 个表中获取所有数据。

```
SELECT * FROM `table1`
JOIN `table2` ON `table1`.`userid` = `table2`.`userid`
WHERE `table1`.`userid` = 1 
```

# pingfederate - PingFederate - 你为 SP 使用什么？

> ID：10168909
> 
> 赞同：0
> 
> 时间：2012-04-16T05:01:11.453
> 
> 标签：pingfederate

我们正在考虑将 PingFederate 作为 IdP 实施。

PingFederate 也可以充当 SP - 是否建议 PingFederate 在充当 SP 时托管在与充当 IdP 的 PingFederate 实例不同的服务器上。

我们是一家教育机构，我们的一些集成应用程序，对于 PingFederate IdP，可能没有预算为 SP 购买 PingFederate 许可证。你使用 Internet2 的开源 SP 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:39:17.457

您可以在具有相同 PF 服务器实例的同一台服务器上以IDP*和*SP 角色轻松运行 PingFed 。不需要将它们分开。我建议与 Ping Identity 的区域解决方案架构师交谈，以帮助确定最适合您机构的设置。

——伊恩

# wordpress - 设置 301 重定向以进行后期更改

> ID：10168910
> 
> 赞同：0
> 
> 时间：2012-04-16T05:01:12.637
> 
> 标签：wordpress, url-rewriting, http-status-code-301

我正在考虑从[Wordpress 迁移到 Octopress](http://mattgemmell.com/2011/09/12/blogging-with-octopress/)，但我对整个 post-slug url 管理非常怀疑。我当前的博客以这种方式处理 url：

```
myblog.com/post-id/post-slug
e.g.:
journal.kaush.co/283/recommended-mac-os-x-software-2011-2012 
```

我了解 Octopress 的 url 方案如下：

```
myblog.com/YYYY/MM/DD/post-slug 
```

因此，如果我必须设置 301 重定向，是否必须为每个页面手动完成，还是有更智能的方法来解决这个问题？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:10:41.037

首先更新永久链接结构（[检查这个](http://codex.wordpress.org/Using_Permalinks)）并使用[这个](http://wordpress.org/extend/plugins/simple-301-redirects/)插件使用 301 重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T05:24:05.080

从 Virtual Vagabond 中得到启发，我选择了 .htaccess 路线。幸运的是，互联网上的另一个好人为此写了一个脚本。您可以在[此处找到用于生成 .htaccess 文件的 ruby​​ 脚本](https://gist.github.com/2782304)。

# .net - 当我有表单事件时，为什么要使用 WndProc？

> ID：10168913
> 
> 赞同：5
> 
> 时间：2012-04-16T05:01:40.480
> 
> 标签：.net, winforms, wndproc

`WndProc`我有一个关于在我的表单应用程序中使用的基本问题。`WndProc`当我有可用的表单事件时，我想知道该方法的用途。在哪些情况下我需要创建自定义消息？[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc%28v=vs.71%29.aspx)告诉它仅用于处理 Windows 消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T05:20:43.030

WndProc 是 WinForms 如何通过更易于使用和理解的 .NET 层围绕 Win32 Windows 消息提供包装器。

通常它以下列方式工作。以 WM_LBUTTONDOWN 窗口消息为例。Windows.Forms.Control.WndProc 会拦截这个消息，并从消息的 WPARAM 和 LPARAM 中提取相关信息。然后它调用受保护的虚拟方法 OnMouseDown，并将相关信息很好地打包到 MouseEventArgs 中。然后，实现将在其自己的处理结束时触发 MouseDown 事件。

所以处理一组 OnXXXX 方法/XXXX 事件比直接拦截 windows 消息要容易得多。

但是如果你感兴趣的windows消息没有被WinForms处理呢？在这种情况下，您可以覆盖 WndProc 并直接自己处理。另一种用途是截获消息，然后在控件本身有机会处理它之前将其丢弃。或者，您可以创建自定义消息以在应用程序内的控件之间发送。当您想查看控件收到的每条消息时，这对于调试也很有用，您只需在一个地方添加日志记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T05:08:08.107

.NET 是 Win32 的包装器。它不会 100% 公开 Windows 中所有内容的方法、事件和属性。

所以有时你需要躲在被窝里。

但是，这不是您要寻找的东西 - 当您的问题需要它时，一个好的 ol' Stack Exchange 搜索通常会让您知道。

# asp.net-mvc - 从用户控件将值传递给母版页中的 renderpartial

> ID：10168920
> 
> 赞同：0
> 
> 时间：2012-04-16T05:02:47.607
> 
> 标签：asp.net-mvc, master-pages

是否有可能拥有一个包含渲染部分的母版页，并在渲染之前提供一个要传递给该部分的值。

例如，我们的网站有一个通用的菜单结构，我想把它作为一个部分放在母版页中，问题在于，根据您在页面中的哪个区域，我们需要为选定的选项卡设置一个值所以它会突出显示，你可以看到你在哪里。

目前，渲染部分在任何页面上并为所选选项卡传递一个值，我希望它位于母版页中，并且只是有一些方法可以将值传递给母版页。

我觉得这可能与 razor 引入的更改有关，但我不确定，无论如何我们使用的是 asp.net mvc 2（尽管我仍然对适用于更新版本的东西感兴趣）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:19:37.397

您可以使用 RouteData 属性来获取当前调用的页面，方法如下：

```
ViewContext.ParentActionViewContext.RouteData.Values["controller"]
ViewContext.ParentActionViewContext.RouteData.Values["action"]

// OR

ViewContext.RouteData.Values["controller"]
ViewContext.RouteData.Values["action"] 
```

在与菜单关联的控制器或视图本身中（如果它是部分的）。然后您可以根据当前路由过滤输出。

# ios - Xcode 4.3.2，在模拟器上运行的问题

> ID：10168922
> 
> 赞同：35
> 
> 时间：2012-04-16T05:02:52.280
> 
> 标签：ios, xcode

我在 Xcode 4.3.2 上遇到了这个奇怪的问题，当然是在最近的更新之后。

在模拟器上成功构建并运行了几次后，xcode似乎无法连接模拟器，甚至无法停止项目；就像模拟器不存在一样。我努力了：

1.  停止项目 - 不起作用。
2.  退出模拟器 - 不起作用，即使我退出模拟器，xcode 仍然显示它正在模拟器上运行。
3.  清理项目——不起作用。

我必须强制退出 xcode 才能使其与模拟器通信。没有其他工作。每半小时做一次会很令人沮丧。这仅从 4.3.2 开始。

我总是在构建和运行之前停下来，所以这不是模拟器/xcode 被我打败的问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-23T08:29:29.000

我偶然发现，这无论如何都不是解决方案-

当 xcode 挂起时，说它正在运行应用程序，但模拟器上什么都没有，通过单击停靠栏图标（不使用命令 + 选项卡）从停靠栏打开模拟器似乎有效。

这很奇怪，但它有效；atlast 直到 xcode 修复它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T05:21:50.987

我在 XCode 4.5.1 上遇到了同样的问题，但我刚刚解决了。当程序运行时，它会被编译，但不会在模拟器上显示任何内容。只需单击 Dock 中的 iOS Simulator 图标即可将其置于前面。单击左上角的**iOS 模拟器-> 重置内容和设置 -> 然后强制退出 iOS 模拟器并再次运行程序。**！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T05:17:41.793

除了重新启动之外，我还设法解决了另一种方法：

假设您的应用程序挂起，转到 Xcode 窗口顶部的目标选择器并将您的 sim 目标更改为新的 SDK（或者如果您没有其他 SDK，请将其更改为通用应用程序并在对面的设备上运行模拟器）。

然后，当您的应用程序在新设备/操作系统上完全加载时，退出 sim，将目标更改回来，等等！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T17:19:29.823

从模拟器中卸载应用程序并再次运行。然后它会正常工作:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T14:28:28.513

Xcode 4.6.3 更新（2013 年 6 月 13 日）解决了以下问题：

*   在 OS X 10.8.4 上的 iOS 模拟器中调试时挂起。13722320

[https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/)

您可以尝试更新您的 Xcode 以查看是否适合您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-01T19:25:12.047

多年来，这让我感到沮丧，但偶然发现了似乎让我重新开始的事情：

隐藏模拟器（iOS Simulator -> Hide iOS Simulator）或 Cmd-H，然后重新打开模拟器。

当我的旧 2 核 MacBook 上的后台发生 CPU 密集型的事情（如 Time Machine 备份）时，问题似乎发生了。

# android - 推送通知是否需要实时互联网连接？

> ID：10168924
> 
> 赞同：6
> 
> 时间：2012-04-16T05:03:40.760
> 
> 标签：android, tcp, push-notification

这可能是一个愚蠢的问题，但我需要确认，我没有其他人可以问。

我试图了解为 android 移动设备实现自己的推送通知的含义。这需要到服务器的持续 TCP 连接，尽管大部分时间它是空闲的。

我的假设是，即使在空闲时，为了使服务器能够通过 TCP 连接将数据推送到客户端，始终需要活动的 Internet 连接，并且如果连接中断（即用户关闭连接）这种推动将不再可能。

这个假设正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T05:08:50.770

我会说是的，这确实是正确的。如果没有实时互联网连接，您将如何进行通信？

Afaik，Android C2DM 通过在用户没有实时网络连接时排队推送请求并在连接恢复时将它们发送给用户来处理此问题。您可以在解决方案的服务器端实现类似的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T05:24:08.567

答案是**YES**

要了解有关 C2DM 的最佳方法，您只需阅读此**[Google Project C2DM](http://code.google.com/android/c2dm/)**

他们提供了理解 C2DM 的工作和机制所需的完整文档，并提供了完整的示例。

我还有另一个最喜欢的教程是：**[Vogella's](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)**

你只需要给一个很好的时间来阅读这个东西并实施..

快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:24:11.747

你说的对。C2DM 维护一个开放的套接字（使用 Market 或 Gmail 应用程序），用于识别您的设备。当然，您将需要 Wifi 或蜂窝网络来接收推送通知。

# python - 使用 pyparsing 解析嵌套函数调用

> ID：10168935
> 
> 赞同：12
> 
> 时间：2012-04-16T05:05:44.597
> 
> 标签：python, parsing, pyparsing

我正在尝试使用`pyparsing`以下形式解析函数调用：

```
f(x, y) 
```

这很容易。但由于它是一个递归下降解析器，它也应该很容易解析：

```
f(g(x), y) 
```

那是我得不到的。这是一个简化的示例：

```
from pyparsing import Forward, Word, alphas, alphanums, nums, ZeroOrMore, Literal

lparen = Literal("(")
rparen = Literal(")")

identifier = Word(alphas, alphanums + "_")
integer  = Word( nums )

functor = identifier

# allow expression to be used recursively
expression = Forward()

arg = identifier | integer | expression
args = arg + ZeroOrMore("," + arg)

expression << functor + lparen + args + rparen

print expression.parseString("f(x, y)")
print expression.parseString("f(g(x), y)") 
```

这是输出：

```
['f', '(', 'x', ',', 'y', ')']
Traceback (most recent call last):
  File "tmp.py", line 14, in <module>
    print expression.parseString("f(g(x), y)")
  File "/usr/local/lib/python2.6/dist-packages/pyparsing-1.5.6-py2.6.egg/pyparsing.py", line 1032, in parseString
    raise exc
pyparsing.ParseException: Expected ")" (at char 3), (line:1, col:4) 
```

为什么我的解析器将内部表达式的函子解释为独立标识符？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T09:19:46.323

很好地发现在您的定义中`identifier`掩盖了. 以下是解析器的其他一些技巧：`expression``arg`

`x + ZeroOrMore(',' + x)`是 pyparsing 解析器中非常常见的模式，因此 pyparsing 包含一个帮助方法`delimitedList`，它允许您将该表达式替换为`delimitedList(x)`. 实际上，`delimitedList`做另一件事 - 它`delim`基于分隔符在解析时有用的概念，但在尝试筛选解析的数据时只是杂乱的标记，它抑制分隔逗号（或其他分隔符，如果使用可选参数给出）然后。因此，您可以将 args 重写为`args = delimitedList(arg)`，并且您将仅获得列表中的 args，无需“跳过”逗号。

您可以使用`Group`该类在已解析的标记中创建实际结构。这将为您构建嵌套层次结构，而无需遍历此列表以查找 '(' 和 ')' 来告诉您何时在函数嵌套中下降了一个级别：

```
 arg = Group(expression) | identifier | integer
 expression << functor + Group(lparen + args + rparen) 
```

由于您的 args 正在`Group`为您编辑，因此您可以进一步抑制括号，因为就像分隔逗号一样，它们在解析过程中完成了它们的工作，但是通过对您的标记进行分组，它们不再是必需的：

```
lparen = Literal("(").suppress()
rparen = Literal(")").suppress() 
```

我假设 'h()' 是一个有效的函数调用，只是没有参数。您可以使用以下方法允许 args 是可选的`Optional`：

```
expression << functor + Group(lparen + Optional(args) + rparen) 
```

现在您可以解析“f(g(x), y, h())”。

欢迎来到 pyparsing！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T05:28:11.097

的定义`arg`应该与左边以另一个开头的项目排列，所以优先匹配：

```
arg = expression | identifier | integer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T22:06:32.597

[保罗的回答](https://stackoverflow.com/a/10188486/1959808)很有帮助。对于后人，同样可以用来定义`for loops`，如下（这里是简化的伪解析器，展示结构）：

```
from pyparsing import (
    Forward, Group, Keyword, Literal, OneOrMore)

sep = Literal(';')
if_ = Keyword('if')
then_ = Keyword('then')
elif_ = Keyword('elif')
end_ = Keyword('end')

if_block = Forward()
do_block = Forward()

stmt = other | if_block
stmts = OneOrMore(stmt + sep)

case = Group(guard + then_ + stmts)
cases = case + OneOrMore(elif_ + case)

if_block << if_ + cases + end_ 
```

# javascript - 将两个点击事件添加到同一个按钮只能工作一次

> ID：10168937
> 
> 赞同：0
> 
> 时间：2012-04-16T05:05:48.300
> 
> 标签：javascript, javascript-events, jquery

基本上我试图让一个按钮能够处理元素的编辑。我想要它，以便当我单击`Edit`按钮时，它将文本更改为`Save Changes`并添加一个类，然后将按钮绑定到另一个单击事件，以便当他们单击时`Save Changes`，它会发出警报`Saved`并将文本更改回`Edit`. 它完美地完成了一次。如果您继续尝试这样做，它就不会再添加类或更改文本了。

[这是关于 jsfiddle 的演示](http://jsfiddle.net/bpD8B/1/)

编码：

```
$(function() {
$button = $('button[name="edit"]');
$button.on('click', $button, function() {
    var $that = $(this);
    $that.text('Save Changes');
    $that.addClass('js-editing');
    if ($that.hasClass('js-editing')) {
        $that.off('click').on('click', $that, function() {
            alert('Saved!');
            $that.text('Edit');
            $that.removeClass('js-editing');
        });
    }
}); 
```

});​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:10:59.193

试试这个[http://jsfiddle.net/bpD8B/4/](http://jsfiddle.net/bpD8B/4/)

```
$(function() {
    $button = $('button[name="edit"]');
    $button.on('click', $button, function() {
        var $that = $(this);
        if($that.text()=='Edit'){
          $that.text('Save Changes');
          $that.addClass('js-editing');
        }
        else{
                alert('Saved!');
                $that.text('Edit');
                $that.removeClass('js-editing');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:08:02.817

在调用 off() 后，您永远不会添加回原始处理程序，这会将其删除。

话虽如此，拥有两个按钮和适当的单击处理程序可能更容易，然后使用 hide() 和 show() 来交替使用哪个按钮。对最终用户来说，它的外观和行为应该完全相同，对你来说，编写代码就不会那么令人头疼了。

示例：http: [//jsfiddle.net/VgsLA/](http://jsfiddle.net/VgsLA/)

我认为最后，这段代码更加健壮和易于管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T05:28:23.223

这只是一个逻辑问题。和`$that.off('click').on('click', $that, function() {`你一起委托给它自己，这不是你应该这样做的。

这是使用您的代码的解决方案：

```
$(function() {

    $button = $('button[name="edit"]');
    $button.on('click', $button, function() {
        var $that = $(this);
        if ($that.hasClass('js-editing')) {
            alert('Saved!');
            $that.text('Edit');
            $that.removeClass('js-editing');        
        } else {      
            $that.text('Save Changes'); 
            $that.addClass('js-editing');
        }
    });

});​ 
```

[演示](http://jsfiddle.net/bpD8B/10/)

# iphone - 端点调度程序 wcf 中的 Contractfilter 不匹配

> ID：10168938
> 
> 赞同：1
> 
> 时间：2012-04-16T05:05:49.760
> 
> 标签：iphone, wcf

我正在从我的 iphone 应用程序中请求 WCF 方法。但我总是得到一个 falutString 作为回应。

```
NSString *soapMessage = [NSString stringWithFormat:

                                 @"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
                                 "<soapenv:Envelope \n"
                                 "xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \n"
                                 "xmlns:tem=\"http://tempuri.org/\" \n"
                                 "xmlns=\"http://WssMobileService.Model/2012/ServiceContractDslModel\">\n"
                                 "<soapenv:Header/>\n"
                                 "<soapenv:Body>\n"
                                 "<tem:GetCompanies>\n"

                                 "<tem:ReqLogin>\n"

                                 "<UserName>%@</UserName>\n"

                                 "<Password>%@</Password> \n"

                                 "</tem:ReqLogin>\n"

                                 "</tem:GetCompanies>\n"

                                 "</soapenv:Body>\n"

                                 "</soapenv:Envelope>\n",username,password];

        NSURL *url = [NSURL URLWithString:kMainURL];
        NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];             
        NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];          
        [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];       
        [theRequest addValue: @"http://tempuri.org/WssServiceContract/GetCompanies" forHTTPHeaderField:@"Soapaction"];
        [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
        [theRequest setHTTPMethod:@"POST"];     
        [theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
        theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

**网址**出来是

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope 
xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:tem="http://tempuri.org/" 
xmlns="http://WssMobileService.Model/2012/ServiceContractDslModel">
<soapenv:Header/>
<soapenv:Body>
<tem:GetCompanies>
<tem:ReqLogin>
<UserName>something</UserName>
<Password>something</Password> 
</tem:ReqLogin>
</tem:GetCompanies>
</soapenv:Body>
</soapenv:Envelope> 
```

这是我收到的请求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><s:Fault><faultcode xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">a:ActionNotSupported</faultcode><faultstring xml:lang="en-US">The message with Action 'http://tempuri.org/WssServiceContract/GetCompanies' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).</faultstring></s:Fault></s:Body></s:Envelope> 
```

我看到了一些 StackOverflow 解决方案，但似乎没有任何帮助。

# haskell - 惰性和多态值

> ID：10168939
> 
> 赞同：7
> 
> 时间：2012-04-16T05:05:51.960
> 
> 标签：haskell, polymorphism, lazy-evaluation, memoization

（对于以下，简化`Show`和`Read`

```
class Show a where show :: a -> String
class Read a where read :: String -> a 
```

并假设`read`永远不会失败。）

众所周知，可以制作一种存在类型的形式

```
data ShowVal where
    ShowVal :: forall a. Show a => a -> ShowVal 
```

然后构造一个“异构列表” `:: [ShowVal]`，比如

```
l = [ShowVal 4, ShowVal 'Q', ShowVal True] 
```

这也是众所周知的，这是相对无用的，因为相反，可以只构造一个 list `:: [String]`，例如

```
l = [show 4, show 'Q', show True] 
```

这完全是同构的（毕竟，唯一可以用 a 做的 `ShowVal`就是`show`它）。

懒惰使这特别好，因为对于列表中的每个值，结果`show`都会自动记忆，因此 no`String`被计算多次（并且`String`根本不计算未使用的 s ）。

A`ShowVal`等价于存在元组`exists a. (a -> String, a)`，其中函数是`Show`字典。

可以为 进行类似的构造`Read`：

```
data ReadVal where
    ReadVal :: (forall a. Read a => a) -> ReadVal 
```

请注意，因为`read`它的返回值是多态的，所以`ReadVal`是通用的而不是存在的（这意味着我们根本不需要它，因为 Haskell 具有一流的通用性；但我们将在这里使用它来强调与`Show`）。

我们也可以列一个清单`:: [ReadVal]`：

```
l = [ReadVal (read "4"), ReadVal (read "'Q'"), ReadVal (read "True")] 
```

与 一样`Show`，列表与列表`:: [ReadVal]`同构`:: [String]`，例如

```
l = ["4", "'Q'", "True"] 
```

（我们总是可以`String`用

```
newtype Foo = Foo String
instance Read Foo where read = Foo 
```

因为`Read`类型类是开放的。）

A`ReadVal`等价于通用函数`forall a. (String -> a) -> a` （CPS 风格的表示）。这里`Read`字典是由用户`ReadVal`而不是生产者提供的，因为返回值是多态的而不是参数。

`String`然而，在这些表示中，我们都没有得到我们在表示中得到的自动记忆`Show`。假设 `read`我们的类型是一个昂贵的操作，所以我们不想对同`String`一个类型多次计算它。

如果我们有一个封闭的类型，我们可以这样做：

```
data ReadVal = ReadVal { asInt :: Int, asChar :: Char, asBool :: Bool } 
```

然后使用一个值

```
ReadVal { asInt = read s, asChar = read s, asBool = read s } 
```

或类似的规定。

但在这种情况下——即使我们只使用`ReadVal`作为一种类型—— `String`每次使用值时都会解析 。有没有一种简单的方法可以在保持`ReadVal`多态性的同时获得记忆？

（如果可能的话，让 GHC 自动完成它，类似于这种`Show`情况，将是理想的。更明确的记忆方法 - 也许通过添加`Typeable`约束？ - 也可以。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T13:06:07.090

> 懒惰使这特别好，因为对于列表中的每个值，显示的结果都会自动记忆，因此不会多次计算字符串（并且根本不会计算未使用的字符串）。

这个前提是不正确的。引擎盖下没有神奇的备忘录表。

懒惰意味着不需要的东西，不计算。这并不意味着所有计算值都是共享的。您仍然必须引入显式共享（通过您自己的表）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T21:17:10.737

这是更明确方法的实现；它需要`Typeable`，因为否则将没有任何东西可以键入备忘录表。我将记忆代码基于[丑陋](http://hackage.haskell.org/package/uglymemo)的备忘录；可能有一种方法可以让它与纯记忆一起工作，但我不确定。这很棘手，因为您必须在任何创建的隐式函数*之外*`forall a. (Read a, Typeable a) => ...`构建表，否则您最终每次调用都构建一个表，这是无用的。

```
{-# LANGUAGE GADTs, RankNTypes #-}

import Data.Dynamic
import Control.Concurrent.MVar
import Data.HashMap.Strict (HashMap)
import qualified Data.HashMap.Strict as HM
import System.IO.Unsafe

data ReadVal where
    ReadVal :: { useReadVal :: forall a. (Read a, Typeable a) => a } -> ReadVal

mkReadVal :: String -> ReadVal
mkReadVal s = unsafePerformIO $ do
    v <- newMVar HM.empty
    return $ ReadVal (readVal v)
  where
    readVal :: (Read a, Typeable a) => MVar (HashMap TypeRep Dynamic) -> a
    readVal v = unsafePerformIO $ do
        m <- readMVar v
        let r = read s  -- not evaluated
        let typeRep = typeOf r
        case HM.lookup typeRep m of
            Nothing -> do
                modifyMVar_ v (return . HM.insert typeRep (toDyn r))
                return r
            Just r' -> return $ fromDyn r' (error "impossible") 
```

# python - 如何递归替换 dict 中的值，这些值也是键，直到值中没有键？

> ID：10168944
> 
> 赞同：2
> 
> 时间：2012-04-16T05:06:36.597
> 
> 标签：python, recursion, dictionary

我有一个`dict`这样的：

```
d = {'a':'b+c', 'b':'f+g', 'f':'y+u'} 
```

我想递归地替换也是键的值中的字母，所以我最终得到：

```
d = {'a':'y+u+g+c', 'b':'y+u+g', 'f':'y+u'} 
```

我尝试使用此代码：

```
def getval(key,d):
    if d.has_key(key):
    temp=re.findall('\w+',d[key])
    for i in range(len(temp)):
        if d.has_key(temp[i]):
            getval(temp[i],d)
        else:
            continue

for k,v in d.iteritems():
    temp=re.findall('\w+',d[k])
    for i in range(len(temp)):
        if d.has_key(temp[i]):
            getval(temp[i],d) 
```

但它不起作用。我该怎么做？我真正的字典要大得多，但绝对不包含任何循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:48:21.733

我实际上不确定递归是这里最合适的方法，这是一个在循环中进行替换的解决方案，直到没有替换更改当前值：

```
import re

def make_replacements(d):
    r = d.copy()
    regex = dict((k, re.compile(r'\b' + re.escape(k) + r'\b')) for k in r)
    for k in r:
        done = False
        while not done:
            done = True
            for k2 in r:
                n = regex[k2].sub(r[k2], r[k])
                if n != r[k]:
                    r[k] = n
                    done = False
    return r

print make_replacements({'a': 'b+c', 'b': 'f+g', 'f': 'y+u'})
# {'a': 'y+u+g+c', 'b': 'y+u+g', 'f': 'y+u'} 
```

请注意，这不会检测到输入中的任何循环，所以如果你给它类似的东西，`{'a':'b+c','b':'c+a','c':'a+b'}`它会进入一个无限循环（尽管这听起来不应该从你的评论中发生）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:18:41.327

您需要将该代码放入函数中。然后，您的注释行应该在您要替换的任何内容上调用该函数，将其放入字符串中，并将结果分配给字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:53:55.250

*   这是一个**带有保险丝的迭代过程，该过程因太多迭代**而熔断，无法检查相互无限替换。
*   使用正则表达式拆分带有多个分隔符的字符串
*   规范化字符串以删除空格。
*   转义标记，因此您不需要转义分隔符

尝试以下实现。

```
>>> def replace(d,delims,limit=5):
    #Remove any whitespace characters
    d=dict((k,v.translate(None,string.whitespace)) for k,v in d.iteritems())
    #Escape the regex tokens
    delims=re.escape(delims)
    for i in range(limit): #Loop Limit, to prevent infinite Loop
        changed=False
        for k,v in d.iteritems():
            #Its best to use regex if multiple tokens is involved
            r="+".join(d.get(e,e) for e in re.split(delims,v))
            if r!=v:
                #Break if no change in any iteration
                changed=True
            d[k]=r
        if not changed:
            break
    return d

>>> replace(d,"+")
{'a': 'y+u+g+c', 'b': 'y+u+g', 'f': 'y+u'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T06:07:12.727

像这样的迭代方法的问题在于它们的运行时对嵌套的深度和`dict`. 这个递归版本以线性时间运行，结果中的“段”总数`dict`，其中段是来自原始值之一的表达式的每一段。

它也不依赖于使用什么符号，只要用作键的字符串不用于其他任何东西。

```
import re

# this function both returns and mutates
# so that each list only has to be flattened once
def flatten(lst):
    new_lst = []
    for i, item in enumerate(lst):
        if isinstance(item, list):
            new_lst.extend(flatten(item))
        else:
            new_lst.append(item)
    lst[:] = new_lst
    return lst

def flatten_symbols(d):
    # split the values using the keys as delimiters
    delims = re.compile('({})'.format('|'.join(d)))
    d = dict((key, delims.split(value)) for key, value in d.iteritems())
    # turn the value lists into recursive lists
    # replacing each occurence of a key with the corresponding value
    for key, value in d.iteritems():
        for i, item in enumerate(value):
            if item in d:
                d[key][i] = d[item]
    # flatten the recursive lists
    return dict((key, ''.join(flatten(value))) for key, value in d.iteritems())

d={'s1':{'a':'b+c','b':'f+g', 'f': 'd+e', 'e': 'h+i'},'s2':{'a':'b+c','b':'f+g'}}

new_d = dict((key, flatten_symbols(subdict)) for key, subdict in d.iteritems())
print new_d 
```

# ruby-on-rails-3 - 在 Rails 3 中预编译资产时出错。获取 `rake 中止！意外标记：关键字（返回）`

> ID：10168955
> 
> 赞同：0
> 
> 时间：2012-04-16T05:08:48.593
> 
> 标签：ruby-on-rails-3, asset-pipeline

我正在尝试预编译资产：

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '~> 3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier',     '>= 1.0.3'
  gem 'less'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug'

# Bundle the extra gems:
gem 'haml'
gem 'devise'
gem 'hpricot'
gem 'ruby_parser'
gem 'haml-rails'
gem 'simple_form'
gem 'paperclip', "~> 2.0"
gem 'mini_magick'
gem "geocoder", :require => "geocoder"
gem 'kaminari'
gem 'aws-s3'
gem 'cancan'
gem "friendly_id", "~> 4.0.1"
gem 'thin'
gem "twitter-bootstrap-rails"

group :development do
  gem 'sqlite3'
  gem 'pry'
  gem 'rails-pry'
end

group :production do
  # gem 'mysql2'
  # gem 'ruby-mysql', '~> 2.9.3'
  gem 'exception_notification', :require => 'exception_notifier'
  gem 'pg', '~> 0.11'
end

group :test do
  # gem 'rspec'
  # gem 'rspec-rails'
  # gem 'cucumber'
  # gem 'cucumber-rails'
  # gem 'capybara'
  # gem 'database_cleaner'
  # gem 'webrat'
  # gem 'pickle'
  # gem 'jasmine'
  # gem 'factory_girl'
  # gem 'builder', '~> 2.1.2'
  # gem 'launchy'
  # gem "mocha"
end
# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
# group :development, :test do
#   gem 'webrat'
# end 
```

堆栈跟踪：

```
Tasks: TOP => assets:precompile
(See full trace by running task with --trace)
/Users/victorstan/Sites/pop_bottles ∴ RAILS_ENV=production bundle exec rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/victorstan/.rvm/rubies/ruby-1.9.3-p125/bin/ruby /Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke environment (first_time)
** Execute environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
Unexpected token: keyword (return)
  (in /Users/victorstan/Sites/pop_bottles/app/assets/javascripts/application.js)
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/execjs-1.3.0/lib/execjs/ruby_racer_runtime.rb:32:in `rescue in block in eval'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/execjs-1.3.0/lib/execjs/ruby_racer_runtime.rb:26:in `block in eval'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/execjs-1.3.0/lib/execjs/ruby_racer_runtime.rb:78:in `block in lock'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/therubyracer-0.10.1/lib/v8/c/locker.rb:13:in `Locker'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/execjs-1.3.0/lib/execjs/ruby_racer_runtime.rb:76:in `lock'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/execjs-1.3.0/lib/execjs/ruby_racer_runtime.rb:25:in `eval'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/execjs-1.3.0/lib/execjs/ruby_racer_runtime.rb:17:in `exec'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/uglifier-1.2.4/lib/uglifier.rb:101:in `compile'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/compressors.rb:74:in `compress'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/processing.rb:265:in `block in js_compressor='
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/processor.rb:29:in `call'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/processor.rb:29:in `evaluate'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/context.rb:177:in `block in evaluate'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/context.rb:174:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/context.rb:174:in `evaluate'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/bundled_asset.rb:26:in `initialize'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:244:in `new'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:244:in `build_asset'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/index.rb:89:in `block in build_asset'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/caching.rb:19:in `cache_asset'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/index.rb:88:in `build_asset'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:163:in `find_asset'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/index.rb:56:in `find_asset'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:20:in `block in compile'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:212:in `block in each_logical_path'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:190:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:190:in `each_entry'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:198:in `block in each_file'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:197:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:197:in `each_file'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/sprockets-2.1.2/lib/sprockets/base.rb:210:in `each_logical_path'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:18:in `compile'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/assets.rake:56:in `internal_precompile'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/victorstan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/victorstan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/bin/rake:19:in `load'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary
rake aborted!
Command failed with status (1): [/Users/victorstan/.rvm/rubies/ruby-1.9.3-p...]
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_runner'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/assets.rake:12:in `ruby_rake_task'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/assets.rake:21:in `invoke_or_reboot_rake_task'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@popbottles/gems/actionpack-3.2.3/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/victorstan/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/app`enter code here`lication.rb:63:in `run'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/bin/rake:19:in `load'
/Users/victorstan/.rvm/gems/ruby-1.9.3-p125@global/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile
/Users/victorstan/Sites/pop_bottles ∴ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:26:07.480

您的`pop_bottles/app/assets/javascripts/application.js`. 这不是 Heroku 问题。

# c# - 基于 C# 形式的事件的帮助文件位置

> ID：10168960
> 
> 赞同：0
> 
> 时间：2012-04-16T05:09:16.140
> 
> 标签：c#, forms, events, helpfile

我有帮助文件 pdf .. 我想根据用户以特定形式选择的内容转到帮助文件中的特定位置。基本上问题是我如何检测 C# 表单中突出显示（选定）的字段是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:19:15.427

假设是 Winform 应用程序，在窗体上注册每个控件的 HelpRequested 事件。此事件具有参数“sender”，其中包含请求帮助的控制。请参阅MSDN 上的[此示例代码。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.helprequested.aspx?queryresult=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:49:16.400

如果我正确理解这一点，您只想知道在表单中选择了哪些控件或在该选定控件中选择了哪些文本？

例如，如果您想知道在文本框中选择了什么，您可以使用：

```
this.txt_MyTextBox.SelectedText; 
```

或者，如果您想知道当前正在关注哪个控件：

[this.ActiveControl](http://msdn.microsoft.com/en-us/library/system.windows.forms.containercontrol.activecontrol.aspx) ; 可能是你想要的。

您还可以根据控件的类型以不同的方式处理每个控件。

# linux - 如何在vfs层检查linux内核文件对象是目录还是文件

> ID：10168966
> 
> 赞同：0
> 
> 时间：2012-04-16T05:09:58.417
> 
> 标签：linux, filesystems, kernel, vfs

如何在vfs层检查linux内核文件对象是目录还是文件？

我发现有一个函数调用`is_dx(dir)`它检查这个，但它存在`namei.c`于`ext3`或中`ext4`。我需要在独立于文件系统的**vfs 层执行此操作。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:29:32.237

`S_ISDIR()`中定义的宏怎么样`include/linux/stat.h`？它需要`inode->i_mode`字段来检查有问题的 inode 是否属于目录或文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:47:17.763

有了初始目录的inode，代码

检查与名字匹配的条目以获取

对应的inode。

q 然后从磁盘读取具有该节点的目录文件并

检查匹配第二个名称的条目以导出

对应的inode。

q 对路径中包含的每个名称重复此过程。

dentry 缓存大大加快了进程

文件系统操作大多在 dcache 级别完成，所以

它们都处于内核锁定状态。

# database-design - 学费处理数据库设计

> ID：10168967
> 
> 赞同：4
> 
> 时间：2012-04-16T05:10:06.270
> 
> 标签：database-design, relational-database, rdbms, database-schema

我需要有关数据库设计的建议。

我目前正在为一所学校设计一个 DBMS。在设计课程和考试表之后，现在我来到了费用模块。

这是我到目前为止所做的。我创建了 4 个表，如下所述：

```
fee_type
-------------
fee_type_id PRIMARY KEY

fee_type    TYPE OF FEE (MONTHLY, WEEKLY,ANNUAL,ONE TIME)

fees
-------------
fees_id PRIMARY KEY

fee_heading  (eg. TUITION FEE,LAB FEE, HOSTEL FEE,SPORTS FEE)

amount       (CURRENT CHARGE OF THE FEE, could change with time)   

class_id     (GRADE ID, GARDE 4, GARDE 5, GRADE 6)

fee_type    TYPE OF FEE (MONTHLY, WEEKLY,ANNUAL,ONE TIME)

archived     (FEE HEADING ARCHIVED FOR USE)

fee_student
-------------
fee_id     (RELATED fee_id (FK))

student_id (RELATED student_id(FK))

effective_from (DATE FROM WHEN THE FEE APPLIES TO THE STUDENT)

amount  (CHARGE AT THE TIME OF FEE ASSIGNMENT (applicable to particular student))

discount (DISCOUNT HONORED TO STUDENT IF ANY)

status (ACTIVE OR INACTIVE)

transaction
---------------
id PRIMARY KEY

date (date and time when transaction takes place)

fee_id (PAYMENT FOR)

student_id ({TO BE} PAID BY)

amount ( AMOUNT PAID/APPLIED)

description

cr ( yes or no)

dr (yes or no)

remarks 
```

交易表将存储学生的所有付款以及为该学生收取的所有金额。

我正在考虑根据费用类型在交易表中存储向学生收取的金额。这意味着，如果费用是 WEEKLY 类型，每周一条记录将自动添加到交易表中，并且金额标记为借方（或贷方，等等）。

希望这是有道理的。

我在设计数据库的正确道路上吗？

您的意见和建议将不胜感激。

谢谢

比什努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:35:49.050

你的设计是在正确的轨道上。一些评论：

*   `fees.fee_type`可能应该是`fees.fee_type_id`- 假设您想使用自然连接命名法。

*   而不是，`transaction.cr`您`transaction.dr`应该为金额的符号建立一个约定，并且只有一个金额字段，该字段根据金额在零的哪一侧被解释为贷方或借方。您当前的设计允许金额既是贷方又是借方（除非您有禁止这样做的约束）。

*   你的设计不能容纳的一件事是**“未使用的现金”**。在您当前的设计中，学生的付款必须针对特定的`fee_student`. 如果学生预付押金、获得奖学金或只是为多种费用（学费、实验室、体育）写一张支票怎么办？在您当前的模型中，您不会跟踪单笔（或未应用的）付款。您应该有一个接受学生付款的交易表，然后使用交叉表（您当前的`transaction`表）将付款应用于特定费用。这允许您拥有未付余额和未应用金额——这两者在现实世界的应付账款应用程序中都很常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T15:05:21.800

我认为您还应该在 fee_student 中添加费用到期日栏。

如果学校有 10,000 名学生，您将如何为所有学生添加付费信息？？？？

# ajax - AJAX：拒绝访问 iframe 中的属性的权限

> ID：10168969
> 
> 赞同：0
> 
> 时间：2012-04-16T05:10:16.813
> 
> 标签：ajax

嗨，我创建了一个用于 AJAX 帖子的 php 网站，并在[http://sprook.com.au/](http://sprook.com.au/)上直播，但我的客户从他的服务提供商 Godaddy将其域更改为[http://www.sprookit.net/](http://www.sprookit.net/) ，现在萤火虫 说：

> 访问属性“stopAjax”的权限被拒绝

这里**stopAjax**是我的方法名称。

脚本在那里：

```
<div class="post_area">
            <form action="post.php" method="post" id="addVideo" enctype="multipart/form-data" target="post" onsubmit="return startAjax(this);">
                <iframe id="post" name="post" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe>
                <table width="860" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td width="435">POST YOUR AD FREE<br />
                            <em>Paste embed code from YouTube</em></td>
                        <td width="322"><input type="text" id="videoLink" name="videoLink" class="input_textbox" />
                        </td>
                        <td width="95"><input type="submit" name="set_video_link" id="set_video_link" value="" class="submt_post" />
                        </td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td><div id="process"> Connecting please wait <img src="images/loading.gif" /><br/>
                            </div></td>
                    </tr>
                </table>
            </form>
        </div> 
```

并且所有内容都来自旧域我删除了索引文件并且它停止工作，因此清除脚本从旧域运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:16:11.057

由于脚本和 iframe 域必须匹配，因此您很可能在这里遇到了[同源策略问题。](http://en.wikipedia.org/wiki/Same_origin_policy)您需要验证所有内容确实来自新域而不是旧域。

# asp.net - 如何在VS2008中安装水晶报表运行时？

> ID：10168971
> 
> 赞同：0
> 
> 时间：2012-04-16T05:10:48.890
> 
> 标签：asp.net, crystal-reports, crystal-reports-2008, crystal-reports-server

我正在使用 VS2008，并且正在使用水晶报表构建 Web 应用程序。正如我们所知，与 VS2008 一起，我们提供了 Crystal Report 基本版本，即 10.5.0.0 和 Crystal Report Runtime 版本 10.5.0.0。当我尝试在服务器上部署我的网站时，它给了我一个错误“不支持水晶报告”。我得到了支持部门的回复，他们的服务器支持 Crystal Report 版本 12.3.3.812，即 CR VS2008 SP3。当我从 SAP 网站下载版本时，我无法升级我的 CR 版本，请告诉我如何升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-07T21:20:35.553

您需要升级水晶报表版本。您可以从 [SAP 官方 Wiki 站点](https://wiki.scn.sap.com/wiki/display/BOBJ/Crystal+Reports%2C+Developer+for+Visual+Studio+Downloads)下载或[安装适用于 Visual Studio 的 Crystal 报表开发人员版本](https://www.parthpatel.net/install-crystal-report-runtime/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T02:22:42.183

要升级您的机器，您只需在其上安装较新版本的 Crystal Reports。

要升级您的项目，您需要删除对 Crystal Reports 的旧捆绑免费副本的引用，并添加您现在应该看到的较新的 12.x 引用。（只有在这台计算机上成功安装了较新的 Crystal Reports 后才能看到它们。）

# php - 如何使用 php 创建 CMS，最终用户无需了解任何有关数据库的信息。那可能吗

> ID：10168972
> 
> 赞同：0
> 
> 时间：2012-04-16T05:10:50.790
> 
> 标签：php, mysql, database, content-management-system, mysqli

一般来说，如果我使用 php 创建 CMS。我在本地主机中创建并命名了数据库。现在，如果我或我的客户在任何服务器上上传 CMS，它将如何工作。因为该服务器中没有数据库。

在我的 php 代码中，我编写了创建数据库。现在我如何创建一个 CMS，它可以自动创建数据库和表，除了上传 CMS 之外，客户端不需要知道任何事情。

示例：在 CMS 中有一条查询语句 (SELECT * FROM users)。我将包含用户信息的表命名为 users。

但是如果客户将我的 CMS 上传到他的服务器中，它将如何工作。他是否必须去 phpmyadmin 并创建一个相同的数据库，就像我在开发 CMS 时创建和命名的一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:25:14.050

您可以创建一个 php 页面，该页面将执行一些查询来创建数据库和表。

*   [http://www.w3schools.com/sql/sql_create_db.asp](http://www.w3schools.com/sql/sql_create_db.asp)
*   [http://www.w3schools.com/sql/sql_create_table.asp](http://www.w3schools.com/sql/sql_create_table.asp)

但我认为，要求您的用户创建一个数据库（空白数据库）并向您的 CMS 系统提供、 和的`hostname`详细`database name`信息是一个不错的选择。因此，您可以使用它来执行创建表的查询。我认为，这就是大多数论坛和 CMS 软件的做法。`database username``database password`

# php - 关于 PHP 的客观问题

> ID：10168978
> 
> 赞同：0
> 
> 时间：2012-04-16T05:11:19.173
> 
> 标签：php

这将是什么输出？

```
ob_flush();
session_start();
ob_start();
echo ('hi');
PRINT ' there';
ob_end_clean();
{
      ' Programmer';
} 
```

我正在研究一些PHP问题，我来了。这个问题的解决方案是什么？任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T05:27:49.830

它不会打印任何内容。由于使用 开启了输出缓冲`ob_start()`，[`ob_end_clean()`](http://php.net/manual/en/function.ob-end-clean.php)将“清理（擦除）输出缓冲区并关闭输出缓冲”。

和

```
{
      ' Programmer';
} 
```

除了将字符串声明为文字外，什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:27:07.977

好吧，这是我运行它时得到的输出......

```
PHP Notice:  ob_flush(): failed to flush buffer. No buffer to flush in /Users/foo/source/test.php on line 2
PHP Stack trace:
PHP   1\. {main}() /Users/foo/source/test.php:0
PHP   2\. ob_flush() /Users/foo/source/test.php:2

Notice: ob_flush(): failed to flush buffer. No buffer to flush in /Users/foo/source/test.php on line 2

Call Stack:
    0.0009     624552   1\. {main}() /Users/foo/source/test.php:0
    0.0027     624600   2\. ob_flush() /Users/foo/source/test.php:2 
```

这是所有代码还是有关于如何运行的说明？正如 Jonathon 指出的那样，这是在命令行上运行的。通过 Apache 或其他一些 Web 服务器运行，我希望它不会为他的回答中提到的 Reason 的 Jonathon 输出任何内容。了解 CLI 的行为仍然很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T05:32:57.560

*   `ob_flush();`不起作用，没有什么可以冲洗的，也许是警告
*   `session_start();`由于先前的函数调用，将无法正常工作并且肯定会发出警告
*   `ob_start();`打开输出缓冲
*   `echo ('hi');`回显到输出缓冲区
*   `PRINT ' there';`也进入输出缓冲区
*   `ob_end_clean();`将缓冲区内容发送到遗忘，因为没有变量得到它的返回
*   `{`花括号，没什么花哨的
*   `' Programmer';`不会做任何事。所以确定我可以在这里隐藏我的信用卡号码
*   `}`像之前一样

所以，充其量：没有输出。在最坏的情况下：屏幕上可能会出现 3-4 个警告。取决于`display_errors`php 配置。

# .net - 好的 MEF 教程和动手实验室？

> ID：10168979
> 
> 赞同：1
> 
> 时间：2012-04-16T05:11:25.063
> 
> 标签：.net, mef

我需要一些好的 MEF 教程和动手实验，你知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:43:02.050

从 CodePlex 中查看：

[MEF 动手实验室](http://msdn.microsoft.com/en-us/VS2010TrainingCourse_IntroToMEF)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:14:41.317

这是一个很好的： [MEF 教程和动手实验室](http://coolthingoftheday.blogspot.com/2009/06/fan-ie-someone-not-on-team-mef-tutorial.html)

# c#-4.0 - 如何为 Teechart 轴标题添加后缀？

> ID：10168987
> 
> 赞同：0
> 
> 时间：2012-04-16T05:12:13.813
> 
> 标签：c#-4.0, .net-4.0, teechart

我想为 Teechart 轴标题添加后缀。例如。πc 我想在后缀处显示 c。我希望 Ψ 和 μ 也一样。Techart 4.1 .NET 有这个功能吗？

谢谢和问候， Abhijit Shelar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:24:45.493

是的，使用 GetAxisLabel 事件来自定义您的标签。您将在教程 4 和功能演示中找到示例。TeeChart 的程序组中提供了教程和演示。

# java - JNI中的二维数组

> ID：10168989
> 
> 赞同：2
> 
> 时间：2012-04-16T05:12:49.900
> 
> 标签：java, c++, multidimensional-array, java-native-interface

我已经开始使用 JNI。我想从 cpp 方法返回二维数组并在 java 中检索。我得到的一维数组的信息如下：

```
JNIExport jint JNICALL Java_IntArray_sumArray(JNIEnv *env, jobject obj) 
```

**任何人都可以指定如何从 cpp 返回二维数组并在 java jni 中检索吗？**

**编辑** 我试过以下

```
JNIEXPORT jobjectArray JNICALL
 Java_ObjectArrayTest_initDouble2DArray(JNIEnv *env,
                                    jclass cls,
                                    )
 {
     jobjectArray result;
     int i;
     jclass doubleArrCls = **(*env)**->FindClass(env, "[D");
...
 } 
```

但它给出了一个错误，即错误 C2819：类型“JNIEnv_”没有重载成员“操作员 ->”

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-04-16T05:30:36.993

请阅读这篇文章以了解如何从 C++ 返回二维数组

[C++-二维数组](https://electrofriends.com/articles/jni/jni-part-5-jni-arrays/)

# jquery-mobile - jQuery Mobile - 在标题栏上滑入 CSS

> ID：10168990
> 
> 赞同：1
> 
> 时间：2012-04-16T05:12:52.180
> 
> 标签：jquery-mobile, alert

我正在尝试在 jQuery mobile 中的标题栏上滑入警报栏。到目前为止，我已经把幻灯片放了下来，但是我在使用 CSS 时遇到了问题。我最初尝试使用 position: absolute; 制作最外层的 div；top 0px：这使它从顶部滑过标题，但是在 iPhone 上的 Safari 内部，关闭按钮被切断，您必须向右滚动。我该如何解决？

下面是警告栏的 HTML 代码：

```
 <div class="ui-bar ui-bar-b error" style="position: absolute; top: 0px;">   
                <h3>
                    Form Validation Errors 
                </h3>
                <div style="display:inline-block; width:8%; margin-top:0px; float: right;">
                    <a href="#" data-role="button" data-icon="delete" data-iconpos="notext" class="dismiss_error">Dismiss</a>
                </div>
                <ul class="validation_errors_list"></ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:39:09.853

我最终最终使用了这个 CSS。警告栏直接滑过标题。

```
//you only really need this just to get it to slide over the header nicely and make sure you use top:0 if you always want it to be at the top. The plugin I made shows in/out the error message at position you are scrolled to in the document
 .alert{
    position: absolute; 
    z-index: 9998; 
    width: 100%; 
    height: 30px; 
    display: none;
    color: #ffffff;
    text-shadow: none;
    font-family: Helvetica,Arial,sans-serif;
}

//This CSS is only used if you have an X button to close the alert. See the plugin below.
.alert-button-container{
     display:inline-block; 
     margin-top:-10px;
     margin-right: 15px;
     float: right;
  } 
```

这是我的 HTML 代码（注意 ui-bar 类是一个 jQuery 移动类，您需要添加它，这样您就不必弄乱一些宽度和大小调整的东西）。

```
<div class="ui-bar alert">
    <div class="alert-message"></div>
</div> 
```

这是我用 jQuery 制作的一个自定义插件来执行此警报栏。

功能 + 用例

特点：淡入/淡出，可以注入自定义 HTML 错误消息，可以呈现消息列表，在标题上滑动，有一个关闭 X 按钮用于错误消息，适用于我迄今为止测试过的所有浏览器（IE、iOS、 Firefox），错误消息出现在您在文档中滚动到的位置。无需再向上滚动即可查看错误:)

1.  表单验证错误。您可以传入一个错误消息数组，它会将其解析为一个列表。

    ```
     var messages = new Array();
        messages[0] = 'My Message';

        //prevent from showing accidentally
        if(messages.length > 0)
        {
            $(".alert").alertBar('error', "<h2>Form Validation Errors</h2>", {
                'errorMessages':  messages
            });
        } 
    ```

2.  成功或操作消息：

    ```
     $(".alert").alertBar('success', 'Removed From Your Itinerary'); 
    ```

////////////插件代码

```
 (
    function($) {
                 $.fn.alertBar = function(alertType, alertMessage, userOptions) {  //Add the function
            var options = $.extend({}, $.fn.alertBar.defaultOptions, userOptions);
             var $this = $(this);
    $this.addClass(options.cssClass)
    .empty()
    .html(alertMessage)
    .css('top', $(document).scrollTop());

    if(alertType == 'success')
    {
        $this
        .fadeIn()
        .addClass('alert-success')
        .delay(options.animationDelay)
        .fadeOut();
    }

    if(alertType == 'error')
    {
        var button = $('<div>')
        .addClass('alert-button-container')
        .append(
            $('<a>').attr({
                'href': '#',
                'data-role': 'button',
                'data-icon': 'delete',
                'data-iconpos': 'notext',
                'class': 'dismiss-error'
            })
            .append('Dismiss')
            );

         //build error container
         $this
        .addClass('alert-error')
        .append(button);

       //add optional items to error container
       if(options.errorMessages)
        {

            var $messageList = $('<ul>').addClass('error-message-list');
            for ( var i=0, len=options.errorMessages.length; i<len; ++i ){
                $messageList.append(
                                    $('<li>')
                                    .append(options.errorMessages[i])
                                   );
            }

            $this.append($messageList);

        }

        //show alert bar
        $this
        .trigger('create')
        .fadeIn();

        $(".dismiss-error").live('click', function(){
            $this.fadeOut();
        });
    }

    if(alertType == 'informational')
    {
        $this
        .addClass('alert-informational')
        .fadeIn()
        .delay(options.animationDelay)
        .fadeOut();
    }

    return $this;
};

$.fn.alertBar.defaultOptions = {
    cssClass : 'alert',
    alertBarType: '',
    animationDelay: 1500
};
})(jQuery); 
```

如果你使用这个，额外的 CSS 类。它只是改变了栏的颜色。

```
.alert-success{
background-color: #8cc63f; 
```

}

```
 .alert-error{
 background-color: #ed1c24;
 height: auto; 
```

}

```
 .alert-informational{
 background-color: #0071bc; 
```

}

示例图片：

![警报栏示例](../Images/e30d650441d7bbaad6e5034cc849bc90.png)

# jquery - 自动完成 JqueryUI COMBOBOX + 选择所有文本

> ID：10168991
> 
> 赞同：4
> 
> 时间：2012-04-16T05:12:53.273
> 
> 标签：jquery, combobox, jquery-autocomplete

我正在使用 jquery autocomplete combobox ，它的一切都很好。

访问[http://jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)。

问题是，我想制作这个组合框，以便在单击框中​​的文本时选中其中的文本，以便用户可以开始搜索下一个而不清除旧文本。

我尝试在 $(document).ready 上进行测试的解决方案...

```
 //clear each option if its selected
        $('#<%=combobox.ClientID  %> option').each(function () {
            $(this).removeAttr('selected')
        });

        //set the first option as selected
        $('#<%=combobox.ClientID  %> option:first').attr('selected', 'selected');

        //set the text of the input field to the text of the first option
        $('#<%=combobox.ClientID %> ').parent().children('input.ui-autocomplete-input').val(' '); 
```

努力工作...

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T05:21:50.553

[$.select()](http://api.jquery.com/select/)是你需要的。在您的特定情况下，在构建自动完成框时执行此操作：

```
 $('#autocompletebox').autocomplete({...blablabla... }).focus(function() { $(this).find('input').select(); $(this).select(); }); 
```

# wordpress - 带有元数据的wordpress自定义查询

> ID：10168992
> 
> 赞同：0
> 
> 时间：2012-04-16T05:12:59.857
> 
> 标签：wordpress, wordpress-theming

我正在尝试获取带有标题元值的最新帖子，但它给了我最新的帖子。这是我的查询，我做错了什么？

```
$querydetails = "
        SELECT $wpdb->posts.* 
        FROM $wpdb->posts, $wpdb->postmeta
        WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id  
        AND $wpdb->postmeta.meta_value = 'headline'
        AND $wpdb->postmeta.meta_key = 'custom_select'
        AND $wpdb->posts.post_status = 'publish'
        AND $wpdb->posts.post_type = 'post'
        ORDER BY $wpdb->posts.post_date DESC
        LIMIT 1
    ";

    $headline = $wpdb->get_results($querydetails, OBJECT); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:51:32.817

您应该在[wp_query](http://codex.wordpress.org/Class_Reference/WP_Query)中执行此操作，
下面的代码应该执行此操作。

```
<?php
$args = array(
    'post_type' => 'post',
    'post_status' => 'publish',
    'meta_key' => 'custom_select',
    'meta_value' => 'headline',
    'posts_per_page' => '1', //limit
    'paged' => get_query_var( 'page' ),
    'order' => 'DESC',
    'orderby' => 'date'
);
$query = new WP_Query($args);
?> 
```

这样您就可以像`the_content()`在[循环中一样使用默认的 wordpress 标签](http://codex.wordpress.org/The_Loop)

# php - 创建一个按钮，在同一页面上显示来自文本文件的信息

> ID：10168993
> 
> 赞同：0
> 
> 时间：2012-04-16T05:13:09.190
> 
> 标签：php, html

我的代码已经显示来自文本文件的信息：

```
$myFile = "file.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo $theData; 
```

但是我想不出一种方法来使上面的内容在单击按钮之前不显示。我试着让它成为一个函数，但我想我做得不对。我还尝试使用设置 cookie 的提交按钮，一旦设置了 cookie，它就会显示上面的内容，但它也不起作用。有没有其他方法可以做到这一点？这似乎很容易，我只是不能让它正常工作。

编辑：我想在一个页面上完成这一切，而不是重定向到另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:50:39.567

似乎您不一定需要在单击按钮的触发操作时读取文件。如果您已经在阅读该文件，请将其加载到隐藏的 HTML 元素中，例如 a `<div>`，然后使用 Javascript 在单击按钮时显示该元素。

PHP：

```
 $myFile = "file.txt";
    $fh = fopen($myFile, 'r');
    $theData = fread($fh, filesize($myFile));
    fclose($fh);
    echo '<div id="hidden_content" style="display:none">'.$theData.'</div>'; 
```

HTML 链接：

`<a href="#" onclick="show_content()">Show it!</a>`

Javascript：

```
function show_content(){
    document.getElementByID('hidden_content').style.display = 'block';
} 
```

尽管如果您尝试根据单击的内容动态读取数据，则必须通过 AJAX 完成，如前所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:17:04.493

将您的代码放在一个 PHP 文件中，然后（在一个单独的 html 文件中）有一个指向该 PHP 文件的链接，如下所示：

```
<a href="your_file.php">file.txt</php> 
```

编辑：或者，正如 safarov 建议的那样，使用 AJAX。无论哪种方式，您的 PHP 都应该在它自己的文件中，因为它本质上是一个远程函数。

# meteor - 流星模板事件，如何获取导致事件的对象？

> ID：10168996
> 
> 赞同：10
> 
> 时间：2012-04-16T05:13:18.740
> 
> 标签：meteor

我有一些类似于以下的代码：

在 myapp.html

```
<template name="problems">
    <div class="problems">
        {{#each problems}}
            {{> problem}}
    {{/each}}
    </div>
</template

<template name="problem">
    <div class="problem">
        <div class="problem-text" id={{_id}}>{{text}}</div>
    </div>
</template> 
```

在 myapp.js 中

```
Template.problem.events = {
'click .problem-text' : function () {

        var user_id = Session.get('user_id');

        // how to get problem_id of clicked item?
        Router.gotoProblem(user_id, problem_id);    
    }
}; 
```

在这种情况下，我想获取匹配的 .problem-text 并被点击的 id。

我想知道产生事件的“对象”？我该怎么做呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-23T19:38:24.253

此问题的选定答案只会得到`_id`, 如果`_id`在模板中使用，也会得到。

所以更好地使用, `event.target`, 这将给出 COMPLETE 对象。这样就可以与 jQuery 或 MooTools 一起使用。

```
Template.top_nav.events({
'mousedown, .nav li a': function(evt){
  console.log('the class of object that was clicked is ' + $(evt.target).attr("class"));
 }
}) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T06:34:42.827

尝试这个：

```
Template.problem.events = {
'click .problem-text' : function () {

        var user_id = Session.get('user_id');

        // how to get problem_id of clicked item?
        Router.gotoProblem(user_id, this._id);    
    }
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T22:00:37.620

*您可以使用此*引用访问问题对象：

```
Template.problem.events = {
    /**
     * Handles problem text click.
     * @param {jQuery.Event} event
     */
    'click .problem-text' : function (event) {
      /*
      Here this is a reference to the problem object
      and you have jQuery.Event object as the event argument.
       */
      console.log(this, arguments);

      var user_id = Session.get('user_id');
      var problem = this;

      // how to get problem_id of clicked item?
      Router.gotoProblem(user_id, /** problem_id */problem._id);
    }
  }; 
```