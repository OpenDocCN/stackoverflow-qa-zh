# StackOverflow 问答 11417000-11417999

# c# - 用于 Excel 数据的 WPF 编辑器和查看器

> ID：11417002
> 
> 赞同：0
> 
> 时间：2012-07-10T15:43:44.067
> 
> 标签：c#, .net, wpf, excel, wpf-controls

我正在开发一个 WPF 应用程序，我们正在尝试为当前作为 Excel 电子表格存在的数十个“表单”构建一个编辑器（和查看器）。这些电子表格由我们的客户开发，包括公式、受保护的单元格、选择列表等特征。这些特征必须保留在新编辑器中。

编辑器会将表格呈现给用户，然后他们将填写这些表格。填写的表格将保存到 SQL Server。还有一个查看器组件也需要实现，它允许用户在填写表格后查看表格。

首先想到的是投资第三方 Excel 引擎，例如 Infragistics、Syncfusion、ComponentOne 提供的引擎。它们看起来都很有前途，但我相信它们的价格也不错。

我正在尝试就如何实现这一点集思广益。我在想“excel-in/excel-out”可能是保留表单结构和设置的唯一方法。还有其他选择吗？是否可以在保持这些设置的同时将电子表格导出为另一种格式？

我很好奇是否有其他人面临过同样类型的任务。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:33:40.587

最终使用了 ComponentOne 的 WPF SpreadSheet 控件： http: [//www.componentone.com/SuperProducts/SpreadNET/](http://www.componentone.com/SuperProducts/SpreadNET/)

# javascript - Visual Studio 中的 JavaScript - 闭包样式注释

> ID：11417004
> 
> 赞同：2
> 
> 时间：2012-07-10T15:43:47.613
> 
> 标签：javascript, visual-studio, comments, google-closure-compiler, xml-comments

有谁知道任何支持在 Visual Studio 中使用闭包样式注释的项目？

Microsoft 有他们的 XML 注释，但据我所知，他们的 Ajax Minifier 不使用它们作为类型信息来优化代码。理想情况下，在编写闭包注释时能够获得智能完成，并在将鼠标悬停在函数和变量上时解析它们以提供 Intellisense 会很好。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:08:06.683

不确定您是否已经知道这一点，但我刚刚发现：http: [//jasongoemaat.blogspot.ca/2011/07/intellisense-for-google-closure-library.html](http://jasongoemaat.blogspot.ca/2011/07/intellisense-for-google-closure-library.html) 如果您已经在使用 Google Closure，请添加上述文件将在 VS 中添加智能感知。

此外，MS 还发布了 TypeScript，它可以很好地集成到 VS 本身，但如果它与 Closure 一样可靠，目前还没有定论。

# svn - git svn 错误发生在 dcommit 上，但不在 fetch 或 rebase 上

> ID：11417005
> 
> 赞同：0
> 
> 时间：2012-07-10T15:43:50.987
> 
> 标签：svn, git-svn

当我在存储库的分支上运行“git svn dcommit”时收到以下错误：

```
HTTP Path Not Found: PROPFIND request failed on '/svn/Project/branches/3.34': '/svn/Project/branches/3.34' path not found at C:\Program Files (x86)\Git/libexec/git-core\git-svn line 4970 
```

但是，“git svn fetch”和“git svn rebase”可以正常工作。主干 dcommits 也很好。有什么建议么？

哦，值得注意的是，svn的实际路径应该是/svn/Project/branches/v3.34，而不仅仅是3.34。但如上所述，我经常使用的其他命令仍然可以很好地处理破坏 dcommit 的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:25:18.503

此解决方案可能无法正常工作，具体取决于您为 dcommit 挂起的提交数，但由于我有一个，因此我删除了本地分支并使用 v3.34 名称而不是 3.34 重新创建了本地分支，并且 dcommit 神奇地开始工作。

# javascript - 当用户访问网站并且在第一次访问时什么都不做，并在第一次访问后做其他事情时，我如何创建一个 javascript 来创建一个 cookie

> ID：11417006
> 
> 赞同：0
> 
> 时间：2012-07-10T15:43:53.773
> 
> 标签：javascript

我想在用户访问网站时使用 javascript 创建一个 cookie，并且视频只会在第一次访问时播放。我正在使用 quicktime 播放 mp4 视频

做这个的最好方式是什么 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:54:08.297

播放视频后，您可以在 cookie 中存储一个值，例如“videoPlayed=1”。然后直到 cookie 无效或被禁止，用户将不会再看到视频。

然后在您的代码中，您必须提取 cookie，并且仅在缺少特殊 videoPlayed 值时才播放视频。

[您可以在此处](http://www.quirksmode.org/js/cookies.html)找到有关 cookie 操作的信息。

# windows - 无论 windows/linux 上的屏幕分辨率如何，都有机会访问原始像素

> ID：11417007
> 
> 赞同：1
> 
> 时间：2012-07-10T15:43:54.300
> 
> 标签：windows, graphic

如果 LCD 显示为 1920*1200（原始分辨率），则屏幕分辨率设置为 1024*768。

我有没有机会创建一个大小为 1920*1200 的缓冲区，并且 blt 在 Windows 或 Linux 上逐像素显示在屏幕上，而无需先将其缩小到 1024*768？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:43:21.923

不。

一些[新颖](http://en.wikipedia.org/wiki/Electronic_paper)的显示器保留图像并逐像素更新，但传统的计算机显示器不能这样工作。

计算机每秒将整个图像发送到显示器五十次（或更多次）。如果您的计算机配置为 1024x768 分辨率，那么这就是发送到显示器的像素数。如果显示器实际上有更多像素，那么它将对图像进行信箱化或将其放大到原始分辨率。

要在分辨率设置为 1024x768 时显示 1920x1200 图像，您需要将其缩小。

# php - 在 PHP 中复制或不复制额外的变量？

> ID：11417010
> 
> 赞同：8
> 
> 时间：2012-07-10T15:43:58.627
> 
> 标签：php, performance, optimization

阅读[Google Developers PHP 性能提示](https://developers.google.com/speed/articles/optimizing-php)时，我发现不建议额外复制一个变量。

而不是这个：

```
$description = strip_tags($_POST['description']);
echo $description; 
```

它建议这样做：

```
echo strip_tags($_POST['description']); 
```

原因是可能不必要的内存消耗。

但是在进行一些搜索时，我看到了一些反驳说 PHP 实现了“写时复制”内存管理。这基本上意味着我们可以为任意数量的变量赋值，而不必担心实际复制的数据。

因此，我想知道是否在更复杂的情况下，例如`$_POST`或`$_GET`变量将在代码的许多地方使用，考虑到这些标准，使用或不使用额外变量是否是更好的做法：

1) 安全

2) 维护/可读性

3) 性能

**编辑 1**

我将使用下面的示例来更好地说明这个问题。

这种代码更好吗（考虑到上面的标准）：

```
$user = anti_injection($_POST['user']);
$pass = anti_injection($_POST['pass']);

// Continue the code using $user and $pass 
```

或这个？

```
$_POST['user'] = anti_injection($_POST['user']);
$_POST['pass'] = anti_injection($_POST['pass']);

// Continue the code using $_POST['user'] and $_POST['pass'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:51:03.213

PHP 的“惰性复制”仅适用于数组。只有当数组的一个副本被更改时，数组的数据才会被复制，这就是为什么`foreach`循环可以在原始数组的副本上工作的原因，例如。

对象是通过引用传递的，即使没有被告知这样做`&`。例子：

```
$a = new StdClass();
$b = $a;
$b->derp = "foo";
var_dump($a->derp); // "foo" 
```

资源是对特定扩展要使用的资源的引用，因此它们不能被有意义地复制。

其他所有内容都直接复制。

* * *

无论如何都应该避免不必要的变量。例如，而不是：

```
$step1 = 123;
$step2 = $step1 * 4;
$step3 = $step2 + 99;
$step4 = $step3 / 3;
echo $step4; 
```

你可以写：

```
echo (123*4+99)/3; 
```

（或者，在这种情况下，只是`echo 197;`）

关键是，不必要的变量确实会造成混乱，并可能与您在其他地方定义的变量发生冲突。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:48:36.077

如果您不需要 $description 的“副本”，那么更清晰的方法肯定是：

```
echo strip_tags($_POST['description']); 
```

关于性能，正如您所说，PHP 仍将在内存中创建结果值并将其分配给 Z_Data 结构，因此仍会消耗内存。因此，使用第一种或第二种方法并不会更快或占用更少的内存。

最后，安全性与内存消耗无关，但您需要记住如何正确清理输出。使用条形标签很好，添加斜线是防止黑客使用 XSS 注入的另一种好方法。

另请注意，关于您的写时复制，如果您这样做：

```
$description = 'Hello-world';
$trimmed_description = str_replace('-', ' ', $description);
$escaped = htmlentities($trimmed_description);
echo $escaped; 
```

代替

```
echo htmlentities(str_replace('-', ' ', 'Hello-world')); 
```

后者显然会节省你的记忆......在这种情况下很少，但你仍然会节省一些......

# c# - 模拟 AppDomain 回收

> ID：11417013
> 
> 赞同：7
> 
> 时间：2012-07-10T15:44:02.313
> 
> 标签：c#, asp.net

我阅读了 Phil Haack 关于使用`IRegisteredObject`接口确保后台线程在 AppDomain 关闭时完成的文章，并将其实现到我的代码中。但是，我不完全确定如何模拟 AppDomain 崩溃以对其进行测试。如何模拟 AppDomain 崩溃？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T16:33:42.093

让 AppDomain 关闭的最简单方法是让父进程停止。在 ASP.NET 中，您可以通过回收或停止运行代码的应用程序池来实现此目的。我们有一些代码可以确保日志记录被刷新，这就是我过去测试它的方式。

至于完全崩溃，我不太确定你该怎么做......托管环境会捕获异常，因此它可能不可行。您可以尝试`Environment.Exit`或者`Environment.FailFast`哪个会强制父进程立即退出？

编辑：我在这里忘记了最简单的选项......只需保存 Web.config - 这将触发 AppDomain 回收！

一些替补...

如果您使用 IIS 运行，则可以启动 IIS 管理器并按照以下步骤回收应用程序池...

1.  在“站点”下方找到您的应用程序。它可能位于其中一个网站的下方——可能是一个虚拟目录。
2.  右键单击应用程序并选择“管理应用程序”，然后选择“高级设置”。
3.  记下“应用程序池”。
4.  在“应用程序池”下方找到应用程序池。
5.  右键单击它并点击回收。

对于 IIS Express，您只需右键单击托盘中的图标，在 UI 中您应该能够在此处停止应用程序。

对于 Visual Studio Development Server (Cassini)，您还可以使用托盘停止应用程序。

# apache-flex - 检测数据服务连接超时的简单方法

> ID：11417016
> 
> 赞同：0
> 
> 时间：2012-07-10T15:44:19.170
> 
> 标签：apache-flex, busyindicator, dataservice

我正在开发一个移动项目，它通过数据服务获取一些简单的数据。当应用程序获取数据时，我有一个繁忙的指示器在旋转，但我不希望它永远旋转（因为连接不良或根本没有连接）。有没有办法设置一个限制，比如 30 秒，然后显示一个 SkinnablePopUpContainer？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:02:12.227

根据您使用的连接类型，您可能会捕获“丢失连接”、“入站数据”等事件。您还可以在打开连接之前启动一个计时器，并在连接断开时检查您是否收到任何内容.

# excel-2003 - 在 MS Excel 2003 中输入单元格时直接显示引用单元格的彩色边框

> ID：11417022
> 
> 赞同：1
> 
> 时间：2012-07-10T15:44:36.130
> 
> 标签：excel-2003, excel-2010

在 MS Excel 2003 (2010?) 中输入单元格时，是否可以直接显示引用单元格的显示彩色边框？我的意思是在单元格上按“F2”或单击工作表上方的单元格编辑框时获得的边框。我希望每次选择单元格时都显示它们，而不是在进入编辑模式后显示。

在此先感谢，布拉玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:34:08.163

作为替代方案，您可以执行以下操作：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

' hide existing arrows
ActiveSheet.ClearArrows
' show precedents for selected range
Target.ShowPrecedents

End Sub 
```

这将显示给定单元格的先例，无论何时选择它。

选择一个包含公式的单元格：

![显示先例](../Images/4e26ee3c583b804751511bf903c54193.png)

然后选择另一个带有公式的单元格：

![显示先例](../Images/763a30a9cbd9ffb2faa11698b309bc86.png)

# objective-c - iOS - 向 NotificationCenter/MessageCenter 添加消息

> ID：11417025
> 
> 赞同：0
> 
> 时间：2012-07-10T15:44:40.963
> 
> 标签：objective-c, notifications, notificationcenter

我在访问通知/消息中心（带有天气小部件的那个）时遇到了真正的问题。

我唯一想做的就是在那里收到通知文本，但我真的找不到教程或其他任何东西......

有人可以给我一个提示吗？

非常感谢和问候，马蒂亚斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:46:48.797

[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:47:09.997

您希望它成为远程消息吗？

ios 5 有一个本地通知的想法，它让您的应用程序只需从设备发布通知。

[http://www.iostipsandtricks.com/ios-local-notifications-tutorial/](http://www.iostipsandtricks.com/ios-local-notifications-tutorial/)

# materialized-views - RefrMaterialized 视图

> ID：11417028
> 
> 赞同：0
> 
> 时间：2012-07-10T15:44:52.273
> 
> 标签：materialized-views

我试图让我的物化视图在每天早上 8:00 自动刷新。我已经编写了以下代码，但没有得到想要的输出：

```
CREATE MATERIALIZED VIEW empl_M_V
  ORGANIZATION HEAP PCTFREE 10 PCTUSED 0 INITRANS 2 MAXTRANS 255 NOCOMPRESS 
  NOLOGGING STORAGE(INITIAL 524288 NEXT 524288 MINEXTENTS 1 
                    MAXEXTENTS 2147483645 PCTINCREASE 0 FREELISTS 1 
                    FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "MITG_DATA"
  USING INDEX
  REFRESH START WITH TO_DATE('10-jul-2012 20:09:00', 'DD-Mon-YYYY HH24:MI:SS')
  NEXT ROUND(SYSDATE+1 )+ 8/24 + 30/1440
  AS
  SELECT * from support 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:34:28.817

如果您在下午 12 点之后，您正在使用 ROUND 功能，它会在第二天为您提供。所以，因为你的时间是，我想，20:03，你的 MV 不是明天，而是后天。

只是为了确定你做了什么，运行：

```
select ROUND(SYSDATE+1 )+ 8/24 + 30/1440 from dual; 
```

但是，解决方案是使用`trunc`而不是`round`.

# windows - 移动鼠标时停止接收触摸事件

> ID：11417032
> 
> 赞同：2
> 
> 时间：2012-07-10T15:45:04.027
> 
> 标签：windows, windows-7, touch, mouse, hook

我正在尝试通过 WM_TOUCH 事件挂钩应用程序并驱动鼠标。为了做到这一点，我已经挂钩 WH_GETMESSAGE 并且能够成功接收 WM_TOUCH 事件。收到触摸事件后，我调用 sendInput() 以产生所需的鼠标功能；但是，当我通过 sendInput() 进行鼠标调用时，我停止接收 WM_TOUCH 事件。

我认为这是由于我的 sendinput() 调用的放置；但是，在对 sendInput() 进行所有调用之后，我能够使用 Spy++ 确认来自鼠标的任何输入——也就是说，我在物理上移动鼠标，导致 WM_TOUCH 事件中断。

最后，我创建了一个 WPF 应用程序，其中包含对所有触摸事件的简单回调。我可以将手指放在表单上并接收事件；但是，当我移动物理鼠标时，WPF 程序会收到一个 TouchUp 事件，然后是 TouchLeave 事件，即使我的手指仍在触摸屏上移动。

我希望有人能够解释为什么会发生这种情况，以及我是否有可能产生我想要的功能。

谢谢您的帮助。

# scala - 使用选项值构造 Map

> ID：11417039
> 
> 赞同：3
> 
> 时间：2012-07-10T15:45:30.280
> 
> 标签：scala

我想建立一个这样的地图：

```
 def one = "one"
  def two = "two"
  def three = Some("three")

  Map[String, String]("one" -> one, "two" -> two, "three" -> three) 
```

这不会编译，因为方法三返回一个选项而不是字符串。我可以这样工作：

```
Map[String, String]("one" -> one, "two" -> two) ++ three.map(t => Map("three" -> t)).getOrElse(Map.empty[String, String]) 
```

现在它只会在选项为 Some 时将选项添加到列表中。

但一定有更优雅的方式。（例如，lift-json 知道如何在构造 JValue 时过滤掉 Options）。

有什么建议么？（PS我在这里简化了问题）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:57:48.050

`Map("one" -> one, "two" -> two) ++ three.map("three" -> _)`也会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T16:37:53.893

您有两种地图，例如：

```
val map1 = Map("one" -> 1, "two" -> 2)
val map2 = Map("three" -> Some(3), "four" -> None) 
```

你可以解压后者：

```
map2.collect { case (k,Some(v)) => (k,v) } 
```

并合并地图：

```
map1 ++ map2.collect{ case (k,Some(v)) => (k,v) } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T15:59:10.980

如果您知道哪些值是选项，哪些不是，您可以简单地`getOrElse`在方法调用之后直接调用：

```
Map[String, String]("one" -> one, "two" -> two, "three" -> three.getOrElse("empty")) 
```

如果您不知道哪些方法将返回选项，则可以使用隐式转换从选项中提取值，或者将其设置为默认值（如果是）`None`：

```
implicit def optToStr(a : Option[String]) : String = a.getOrElse("empty")
Map[String, String]("one" -> one, "two" -> two, "three" -> three) 
```

您也可以在之后通过在地图上使用过滤器来删除默认的键值对，尽管这不是很优雅（在这种情况下，也许其他人知道更好的解决方案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:13:37.000

为了为您的客户提供一个很好的界面，您可以扩展其中一个`Map`'s 来执行解包：

```
class MyMap[A, B](private val tuples: (A, Option[B])*)
    extends collection.DefaultMap[A, B] {

  private val container =
    new collection.mutable.HashMap[A, B]()

  container ++= tuples collect {case (k, Some(v)) => (k, v)}

  def iterator = container.iterator
  def get(id: A) = container.get(id)
  override def size = container.size
} 
```

将此与将 pair`(A, B)`转换为 pairs的隐式结合起来`(A, Option[B])`：

```
implicit def pairToPairWithSomeValue[A, B](t: (A, B)): (A, Option[B]) =
  (t._1, Some(t._2)) 
```

并将其用作：

```
def one = "one"
def two = "two"
def three = Some("three")
def four = None

val mm = new MyMap("one" -> one, "two" -> two, "three" -> three,
                   "four" -> four)

mm foreach println
  /* (two,two), (one,one), (three,three) */ 
```

# php - CSS PHP 错误 div 容器

> ID：11417040
> 
> 赞同：0
> 
> 时间：2012-07-10T15:45:33.653
> 
> 标签：php, html, css, position

我想知道如何实现以下想法：

我有一个注册表。如果出现 PHP 错误消息，我想在发生特定错误消息的每个输入字段旁边显示一个 div。所以目前我有 CSS 问题，将那个 div 设置在所有其他 div 的前面。所以我开始查看 Z-index，但由于某种原因，它不起作用。

我的CSS中有：

```
#form-error{
  background-color: #f23;
  z-index:1;
  width: 200px;
  height: 50px;
} 
```

在 HTML 中：

```
<?php if(isset($errors)):?>
  <?php foreach($errors as $error):?>
    <div id="form-error">
    <?php echo $error;?>
    </div>
  <?php endforeach;?>
<?php endif;?> 
```

所以我对如何解决这个问题的想法非常感兴趣。

非常感谢。

更新

在用户偏转的帮助下，我认识到我应该添加一个立场声明。我这样做了。现在我列出了所有错误消息。

该用户提到，最好重新组织我的 php 逻辑以具有一个特定的错误消息，我只需将其添加到输入字段旁边的类表单错误框中。这不是问题。我可以从数组中获取每个错误消息。我的问题是，如何意识到我在输入字段旁边有这些框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:48:52.970

为了使 z-index 工作，您需要在您的 css 中添加`position:relative;`、`position:absolute;`或`position:fixed;`.

我不知道还有什么问题，但我会首先将它添加到您的 CSS 中，如下所示：

```
#form-error{ 
    position: relative;
    background-color: #f23; 
    z-index:1;  
    width: 200px; 
    height: 50px; 
} 
```

# jsp - 如何在jsp中使用带有源代码的错误页面

> ID：11417042
> 
> 赞同：1
> 
> 时间：2012-07-10T15:45:40.407
> 
> 标签：jsp

在jsp页面中`"a.jsp"`，如果我在中使用`<%@ page errorpage="b.jsp" %>`指令`"a.jsp"`，我的问题是如何在jsp中使用errorpage？要保留的源代码是什么`"b.jsp"`，请详细说明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:56:34.227

您的`b.jsp`哪个错误页面应如下所示：

```
<%@ page isErrorPage="true" import="java.io.*"%>

............
............
<!--Write your custom error message>
............
<!--Print your exception if required>
<%exception.printStackTrace(new java.io.PrintWriter(out));%> 
```

**参考**

*   [如何在 JSP 错误页面中打印异常](https://stackoverflow.com/questions/8135980/how-can-i-print-error-stack-trace-in-jsp-page/8136065#8136065)

# xcode - willTransitionToState 没有被调用（UITableview）

> ID：11417043
> 
> 赞同：1
> 
> 时间：2012-07-10T15:45:41.107
> 
> 标签：xcode, uitableview

我试图在 UITableview 处于编辑模式时显示和隐藏子视图*，同时它显示删除按钮（整个编辑和删除过程，而不仅仅是编辑），然后在它返回**正常*模式时使其消失。

我真的很接近按照我想要的方式获得它，但是每次您单击单元格中的“删除”按钮时，它都会使我的视图消失，当我不希望它消失时，直到用户完全退出编辑模式.

我正在尝试使用委托方法`- (void)willTransitionToState:(UITableViewCellStateMask)state`，但在调用时出现错误`super`：

```
- (void)willTransitionToState:(UITableViewCellStateMask)state {

    [super willTransitionToState:state];

    if ((state & UITableViewCellStateShowingEditControlMask)) {
        clear.alpha = 1.0;
    }
} 
```

该错误很常见，但我似乎找不到解决方案：

> 'UITableViewController' 没有可见的@interface 声明选择器'willTransitionToState:'

如果我不调用 super，我不会收到错误，但该方法也永远不会被调用。

我也尝试过使用`setEditing`，但是当点击删除按钮时，我希望在整个编辑/删除过程中保持可见的视图消失了，删除了单元格，但仍处于编辑模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T23:57:30.120

`willTransitionToState`是一种方法 on `UITableViewCell`not on `UITableViewController`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:24:39.547

You need to call that method (willTransitionToState:) in your custom tableview **cell**. it isn't a method that is recognized in a UITableViewController class. if you call willTransitionToState: in the .m file if your custom tableview cell class, it should work. Just make sure that cell class has the ivar 'clear' defined (which you seem to have, based on the code you provided). Also check out the layoutSubviews method if you'd like to do things like prevent the cells from indenting content while editing.

# php - PHP 实时通知（推送器？）

> ID：11417046
> 
> 赞同：2
> 
> 时间：2012-07-10T15:45:51.370
> 
> 标签：php, codeigniter, real-time, pusher

假设我有一个应用程序，客户可以在其中进行某种类型的预订，然后我有一个管理界面来管理这些传入的客户预订。

我如何允许将新预订推送到管理界面而不刷新。类似于 Facebook 如何向您推送新通知。

然而，我查看了 AJAX，据我了解，这只能通过调用数据来工作，这可以通过设置一个间隔来完成，比如每 5 秒。这似乎并不理想，因为即使没有可用的新数据，该功能也会运行，浪费带宽并危及性能。

我正在寻找的是一种让服务器每次都将预订数据传递到管理界面的方法，客户进行新的预订。

我看过一个名为 pusher 的应用程序，但我真的不知道这将如何与 PHP -codeinigter 之类的东西一起使用，以及如何实现它？

有没有人有关于我正在谈论的这种系统的任何信息

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:35:16.003

查看[http://pusher.com/](http://pusher.com/)，我最近也在研究实时更新，一个明显的解决方案是“反向 Ajax”。

这涉及到另一位用户提到的一种长轮询形式，保持与服务器的连接打开并直接传递数据。

Pusher 提供了多种语言的多个后端库和一个用于将 json 字符串传递给用户的 javascript 接口。

如果您有兴趣在不使用推送器等服务的情况下在内部运行它，请查看[http://www.ape-project.org/](http://www.ape-project.org/)以设置您自己的推送服务器（基于 Comet Server）

我不会多说，因为上面的链接解释得更优雅！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:53:01.083

您可能想查看 html5“Websockets”或“Long polling”（适用于旧浏览器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T15:58:53.167

我不会因为想在这里变得花哨而伤脑筋。

我建议如果带宽是一个问题，有一个发送回时间戳的辅助页面。并且您的管理界面每 5 秒检查一次时间戳，如果时间戳已更改，则它会再次使用 ajax 请求更改或要替换的新数据。如此微小的请求，带宽并不明显。顺便说一句，fb 每隔几秒钟也会进行一次简单的 ajax 轮询。

# c# - C# 动态编译和“Microsoft.CSharp.dll”错误

> ID：11417047
> 
> 赞同：6
> 
> 时间：2012-07-10T15:45:51.700
> 
> 标签：c#, dynamic, ironpython, .net-assembly

我正在做可以在[这里](http://urda.cc/blog/2010/09/24/ironpython-and-csharp/)找到的例子。所以我试图在 C# 脚本中运行 IronPython：

Python：

```
def hello(name):
    print "Hello " + name + "! Welcome to IronPython!"
    return

def add(x, y):
    print "%i + %i = %i" % (x, y, (x + y))
    return

def multiply(x, y):
    print "%i * %i = %i" % (x, y, (x * y))
    return 
```

C＃：

```
using IronPython.Hosting;
using IronPython.Runtime;
using Microsoft.Scripting.Hosting;
using System;

namespace IntroIronPython
{
    class IronPythonMain
    {
        static void Main(string[] args)
        {
            // Create a new ScriptRuntime for IronPython
            Console.WriteLine("Loading IronPython Runtime...");
            ScriptRuntime python = Python.CreateRuntime();

            try
            {
                // Attempt to load the python file
                Console.WriteLine("Loading Python File...");
                // Create a Dynamic Type for our Python File
                dynamic pyfile = python.UseFile("PythonFunctions.py");
                Console.WriteLine("Python File Loaded!");

                Console.WriteLine("Running Python Commands...\n");

                // Call the hello(name) function
                pyfile.hello("Urda");
                … 
```

从这里我有这个错误：“没有“Microsoft.CSharp.dll”程序集引用，无法编译动态操作。” 而且我真的不明白那是什么，我忘了添加什么？

在我的参考文献中，我有： ![我的项目参考](../Images/edab22b54caa96964e7f16097719c3e6.png)

谢谢你的帮助。

Ps：我在 MonoDevelop 上。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-03-30T01:08:02.647

这对我有帮助。我正在使用 Xamarian Studio v5.8.1 (build 8) 编写 C# 程序。我只需右键单击“参考”->“编辑参考”-> 开始在搜索栏中输入“Microsoft”-> 选中“Microsoft.CSharp”旁边的框-> 并单击“确定”。

之后我刚刚保存并运行了程序 - 一切都按预期工作！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T22:09:17.513

好的。基本上，我的错误与我从错误的平台添加 IronPython 程序集有关。验证：

*   目标框架：4.0

*   在 [IronPython-2.7.3]->[Platforms]->[Net40] 中添加 IronPython 提供的所有程序集。

感谢所有给我建议的人。

Ps：现在，当然，还有另一个问题……但不再是那个话题了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T19:54:33.353

`Microsoft.CSharp.dll`包含 C# 编译器的动态部分。每当您`dynamic`在代码中使用时，都需要对其进行引用。我不熟悉 MonoDevelop，但您可能必须将目标框架设置为 4.0，并添加`Microsoft.CSharp.dll`对项目的引用（可能右键单击项目，“添加引用”，找到 Microsoft.CSharp）。

我的猜测是您使用的项目是使用 VS 的预发布版本创建的，并且缺少正确的引用。

# apache - Apache ServerName 指令

> ID：11417048
> 
> 赞同：0
> 
> 时间：2012-07-10T15:45:55.603
> 
> 标签：apache

我有一个使用 SSL 配置的 apache 实例。VirtualHost 使用 ServerName 指令 - 我已经指向`local~host:port`. 我了解 ServerName “需要” DNS 条目。我没有将 ServerName 值作为 DNS 条目（它只是`local~host:port`）。

本地主机被称为`server~1`

我也有一个 proxypass 和 proxypassreverse 设置为

```
`proxypass /junk/ https://local~host/junk`
`proxypassreverse /junk/ https://local~host/junk` 
```

因此，我输入 Apache Web 服务器的地址 `https://appache_web/junk`以访问我的应用程序。这行得通。监听端口与 ServerName 一致`<Localhost:port>`。

在浏览“垃圾”网站时，我的网址更改为`https://server~1/junk/....`

所以，问题是 URL 正在改变，我相信 ServerName 指令在内部为`server~l`.

所以，在不创建 DNS 条目的情况下 - 有没有办法保留我的原始 URL， `https://appache_web/junk` 而不是在导航到`https://server~1/junk/....`

谢谢吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:05:02.860

最好在 serverfault.com 上询问，但是...您可能需要添加：UseCanonicalName Off

# viewport - 为什么 iPhone 的视口宽于 320 像素？

> ID：11417051
> 
> 赞同：0
> 
> 时间：2012-07-10T15:46:01.647
> 
> 标签：viewport

根据文档，iOS 中 Safari 的视口应为 320px 宽。但是，我们的内容显示在两侧大约 30 像素，因此视口整体约为 380 像素。我们尝试使用以下两个标签，但结果没有变化：

即使我使用 Firefox 的 Web Developer 扩展并将视口的大小调整为 320 像素宽，它的大小也不是 320 像素。它更像是 380 像素。

我已经研究过删除所有额外的边距、填充和定义的宽度，但视口的大小仍然没有缩小到 320 像素。关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T06:26:49.237

检查您是否在 css 代码中设置了最小宽度。

# asp.net-web-api - 如何检查 ASP.Net Web API 中的请求内容类型？

> ID：11417057
> 
> 赞同：19
> 
> 时间：2012-07-10T15:46:36.723
> 
> 标签：asp.net-web-api

我很难找到在 ASP.NET Web Api 中检查请求内容类型的方法。有没有办法在控制器级别检查请求内容类型是 application/xml 还是 application/json？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-03-20T13:31:13.993

接受的答案具有误导性，因为它回答了 MVC 范式而不是 Web API 的问题，@ataravati 也指出。以下是如何访问 Web API 控制器操作中的 ContentType 的示例。

```
[HttpPost]
[Route("api/post")]
public void Post()
{
    var contentType = this.Request.Content.Headers.ContentType;
    //other stuff
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T15:54:56.277

每个控制器都有一个上下文：http: [//msdn.microsoft.com/en-us/library/system.web.mvc.controller.httpcontext.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.httpcontext.aspx)

所以你应该可以打电话`HttpContext.Request.ContentType`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T04:32:09.050

就我而言，我尝试通过以下代码从标题中获取 ContentType。

`var x = this.Request.Content.Headers.GetValues("Content-Type").First();` 希望其他人能从中得到解决方案。

# ios - iOS - 应用程序中的文件夹动画

> ID：11417065
> 
> 赞同：1
> 
> 时间：2012-07-10T15:46:50.757
> 
> 标签：ios, cocoa-touch, cocoa, animation, directory

如何在我的应用程序中创建类似文件夹的动画？我想在动画方面做一些类似于 any.do 列表的事情。我点击一个标题，下面的所有信息都会向下滚动，并出现一个新信息（如文件夹或手风琴）。

做这个的最好方式是什么？

例子：

```
Title
text 1
text 2
text 3

tap on title ->

Title
new text below title
text 1
text 2
text 3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T15:51:57.393

Github 上有一个很棒的库，叫做[JWFolder，](https://github.com/jwilling/JWFolders)它完美地模仿了文件夹动画。

这是它的作用：

![在此处输入图像描述](../Images/5394b2b6b4332e844402d287eee68404.png)

希望这可以帮助！

# jquery - Jquery数据表不显示列标题

> ID：11417072
> 
> 赞同：10
> 
> 时间：2012-07-10T15:47:12.540
> 
> 标签：jquery, datatables

我在[这里按照示例](http://datatables.net/release-datatables/examples/ajax/objects.html)进行操作。使用包含对象的数组。

我在这样的 for 循环中创建我的数组

```
historyArray[i] = {
    "User": strUserName, 
    "Timestamp" : date.toString(), 
    "Latitude" : point.lat, 
    "Longitude" : point.lng
}; 
```

我的数据表实现：

```
$(document).ready(function() {
    $('#dynamic').html('<table cellpadding="0" cellspacing="0" border="0" class="display" id="report"></table>');
    $('#report').dataTable({
        "aaData": historyArray,
        "aoColumns": [
            { "mDataProp": "User" },
            { "mDataProp": "Timestamp" },
            { "mDataProp": "Latitude" },
            { "mDataProp": "Longitude" }
        ],
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "sDom": '<"H"Tfr>t<"F"ip>',
        "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
            "aButtons": ["copy", "csv", "xls", "pdf"]
        }
    }); 
}); 
```

我得到了正确的数据，但没有列标题，我错过了什么吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-03-18T17:09:22.417

如果您以对象数组的形式传入数据，则需要手动指定每列的标题：

```
data = this.SearchController.resultSet;
this.$tableContainer.dataTable({
    data:    data,
    columns: [
    {
        data: "H",
        title: "Thickness"
    },
    {
        data: "InstanceId",
        title: "Instance ID"
    }]
}); 
```

**注意：这*不需要*您在`table`element**中指定标题。您所需要的只是一个空的`<table>`，这将起作用。文档[在这里](https://datatables.net/reference/option/columns.title)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-10T16:04:02.137

尝试`<table>`像这样更改您的元素：

```
<table id=report>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
        </tr>
    </thead>
</table> 
```

这样就创建了标题。如果您单击示例页面上的查看源代码，您将看到相同的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-20T12:39:52.837

如果您在初始化数据表时传入了一个数据数组并且您的表格元素是隐藏的，那么所有的 thead/tfoot 元素以及每个子元素都会添加一个 height:0px 内联样式。

确保在初始化数据表之前显示（）表格元素，除非您想返回并更改所有元素的所有高度样式。

```
// unhide your table
$('#dtableid').show();

// initialize your datatable
$('#dtableid').DataTable({ 
   data: data,
   // .. other init options
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-17T07:11:11.677

下面将动态创建标题

```
$('#dtableid').DataTable({
  "aaData": [
    {
      "abc": "123",
      "xyz": 456
    },
     {
      "abc": "123",
      "xyz": 456
    }
  ],
  "aoColumns": [
    {
      "mData": "abc",
      "title": "ABC",
      "bSortable": true
    },
    {
      "mData": "xyz",
      "title": "XYZ",
      "bSortable": true
    }
  ]
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-29T07:08:02.407

我们还可以像这样打印数据表列标题：

```
"columns": [
    {
        "data": "Sno", "name": "Sno", "autoWidth": true,"title":"S.No"
    }
    ,
    {
        "data": "Result", "name": "Result", "autoWidth": true, "title": "Result",  render: function (data1, type, full, meta) {
            if (full.Count > 0) {
                return '<a style="color:blue" href="#" class="point"  onclick="ApprovalBreakUp(this)" value="' + data1 + '">' + data1 + '</a>'
            }
            else {
                return '<label>' + data1 + '</label>'
            }
        }

    }
    ,
    {
        "data": "Count", "name": "Count", "autoWidth": true, "title": "Count"
    } 
```

# esb - ESB 中的本机策略交集

> ID：11417076
> 
> 赞同：0
> 
> 时间：2012-07-10T15:47:30.217
> 
> 标签：esb, intersection, wso2, policy, wso2esb

我试图找到一个支持来自请求（客户端）和可用 Web 服务（提供者）的策略交集的 ESB。

理想的配置将包括一个服务注册中心，查询可以从 ESB 发送到该服务注册中心。ESB 可以验证功能性和非功能性（策略）需求。

我尝试使用 WSO2 的产品创建设置但失败了，因为没有通用的策略交叉模块。当我查看其他一些供应商时，我意识到我只发现了 WS-Policy 的特定用途，例如 SecurityPolicy、RM ...。但我没有找到可以检查请求者和提供者之间的域独立兼容性的通用策略交叉模块（如此处建议：[http](http://wiki.apache.org/general/ManojPushpakumara/GSoC/proposal) ://wiki.apache.org/general/ManojPushpakumara/GSoC/proposal ）。

是否有任何可用的 ESB（首选开源）支持这样的东西？如果不是，如何将这样的功能集成到 WSO2 ESB 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:57:53.427

我认为这是一个非常困难的要求。我不确定是否可以从 xml 派生策略。因为它可能不是一对一的。

我们在这里使用的常规技术是使用具有不同策略的不同绑定，并要求用户将消息发送到正确的绑定。

# objective-c - 更改 UIButton 文本

> ID：11417077
> 
> 赞同：103
> 
> 时间：2012-07-10T15:47:31.060
> 
> 标签：objective-c, ios, xcode, event-handling, uibutton

因此，当我单击它时，我试图更新 UIButton 上的文本。我正在使用以下行来更改文本：

```
calibrationButton.titleLabel.text = @"Calibration"; 
```

我已经验证文本正在更改，但是当我运行应用程序并单击按钮时，它会在一瞬间更改为“校准”，然后立即返回其默认值。任何想法为什么会发生这种情况？我需要调用某种刷新功能吗？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2012-07-10T15:50:34.680

在布置子视图时，UIButton 将使用其自己的标题值设置其 titleLabel 的文本值，以便您可以为四种状态（正常、突出显示、选中、禁用）设置最多四个不同的字符串。

因为这个特性，直接设置titleLabel的文本不会持久化，在布局子视图时会被按钮重置。

这是更改按钮状态的标题文本所必须执行的操作。

```
[calibrationButton setTitle:@"Calibration" forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-10T15:50:38.617

要设置按钮文本，请使用以下方法：

```
[calibrationButton setTitle: @"Calibration" forState: UIControlStateNormal]; 
```

有关更多详细信息，请参阅`UIButton`类参考... [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

或者在 Swift 3 中：

```
calibrationButton.setTitle("Calibration", for: .normal) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-11T17:45:18.533

以编程方式，您可以设置按钮标题，如下所示：

```
[myButton setTitle:@"buttonTitle" forState:UIControlStateNormal]; 
```

您还可以从情节提要中设置按钮标题属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-05T18:35:22.820

没什么大不了的，而且可能很明显，但是按钮有几种状态可用。如果您提供“错误”的内容，您将不会看到所需的文本更改。

我注意到我的按钮没有显示我添加的文本，使用这里显示的方法。检查此链接以确保您提供了您想要的 UIControlState。

[UIControlStateHighlighted 和 UIControlStateSelected 有什么区别？](https://stackoverflow.com/questions/15152900/whats-the-difference-between-uicontrolstatehighlighted-and-uicontrolstateselect)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-21T08:46:06.130

对于 Swift 3.0

```
let button = UIButton(type: .system)
button.frame = CGRect(x: 100, y: 100, width: 100, height: 100)
button.setTitle("set here", for: .normal)
button.addTarget(self, action: #selector(TableViewController.actionButtonTocuh), for: .touchUpInside)
button.titleLabel?.textColor  = #colorLiteral(red: 0.1019607857, green: 0.2784313858, blue: 0.400000006, alpha: 1)
view.addSubview(button) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-28T09:34:45.780

如果您不想为所有状态设置标题，只需将其设置为正常状态，因为未设置状态的标题将默认为正常状态的标题。

```
btn.setTitle("Some text", for:.normal) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-02T12:42:01.360

对于 Swift 2.0：

```
let btnObject : UIButton  = UIButton() 
btnObject.frame = CGRect(x: 8, y: 89, width: 70, height: 22)
btnObject.setTitle("Button Title", forState: UIControlState.Normal)
btnObject.titleLabel?.font = UIFont(name: "Helvetica Neue", size: 13)
btnObject.titleLabel?.textColor = UIColor.whiteColor()
btnObject.backgroundColor = UIColor(red: 189/255, green: 176/255, blue: 0/255, alpha: 1)
btnObject.titleLabel?.textAlignment = NSTextAlignment.Center
btnObject.addTarget(self, action: "btnbtnObjectClick:", forControlEvents: UIControlEvents.TouchUpInside)
subView.addSubview(btnObject) 
```

# asp.net-mvc - 如何将值传递给 MediaTypeFormatter 方法？

> ID：11417079
> 
> 赞同：0
> 
> 时间：2012-07-10T15:47:31.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下 MVC TypeFormatter 代码，我需要帮助：

*   将值传递给该对象或从控制器的 get 方法中引用它们

    ```
     public class ObjectSomeTypeOfFormatter : MediaTypeFormatter
     {
         public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, TransportContext transportContext)
        {    
         // Method that I'm overriding where I need to access some variables defined from controller.
        }
     } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:06:52.580

> 访问 Request 对象以获取完整/相对路径，但它不可用。

您可以从中获取它`HttpContext.Curent.Request`，为此您需要参考`System.Web`asembly。

# ruby-on-rails-3 - 如何在 Rails 单元测试期间使用 rake 测试测试键/值列

> ID：11417088
> 
> 赞同：1
> 
> 时间：2012-07-10T15:48:10.657
> 
> 标签：ruby-on-rails-3, unit-testing, rake, key-value

我有一个表 ( `Dishes`)，其中有一列 ( `nutrition_facts`)，用于存储键/值数据（类似于[`hstore`PostgreSQL](http://www.postgresql.org/docs/9.1/static/hstore.html)数据库）。

我在我的fixtures文件夹中定义了一个新的Dish实例：

```
nutrition_facts:
  id: 6
  name: Dish 6
  category: Cat 1
  description: Something about Dish 6
  price: 15.32
  menu_id: 1
  nutrition_facts:
    serving_size:
    calories: 392 
```

但是当我运行时，我似乎无法使以下断言起作用`rake test:units`——它在第一次失败`assert_not_nil`

```
 test "no serving size with calories" do
    dish = dishes(:nutrition_facts)

    assert_not_nil(dish.calories)
    assert_nil(dish.serving_size)
    assert !dish.save, "Saved dish when serving size wasn't defined while calories was"
  end 
```

如何在不测试整个字段的情况下测试个人`calories`和价值观？`serving_size``nutrition_facts`

简而言之，我正在尝试测试以下验证（来自我的`dish.rb`文件），当我在浏览器中运行应用程序时该验证有效：

```
 # Check 'serving size' isn't blank only if 'calories' is defined
  validates_presence_of :serving_size, :if => Proc.new { |val| !val.calories.blank? } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:51:31.513

我能够通过定义我的 Nutrition_facts 列的键/值来使其工作：

```
nutrition_facts: <%= {:serving_size => nil, :calories => 33}.to_yaml.inspect %> 
```

所以在我的装置中，它看起来像这样：

```
nutrition_facts:
  id: 6
  name: Dish 6
  category: Cat 1
  description: Something about Dish 6
  price: 15.32
  menu_id: 1
  nutrition_facts: <%= {:serving_size => nil, :calories => 33}.to_yaml.inspect %> 
```

我的单元测试现在看起来像这样：

```
 test "no serving size with calories" do
    dish = dishes(:nutrition_facts)

    assert_not_nil(dish.calories)
    assert_nil(dish.serving_size)
    assert !dish.save, "Saved dish when serving size wasn't defined while calories was"
  end 
```

[来源：Ruby on Rails 中的固定装置和序列化属性](http://thinkingeek.com/2011/06/16/fixtures-and-serialized-attributes-in-ruby-on-rails/)

# php - SEO 排除特定文件夹/页面

> ID：11417090
> 
> 赞同：1
> 
> 时间：2012-07-10T15:48:15.290
> 
> 标签：php, javascript, apache, seo, robots.txt

我正在构建这个网站，其中包含许多无法在移动设备上正常运行的效果，因此我们构建了一个简单的 html 版本，并在设备不支持所有效果时在其上重定向设备。

```
Normal version URL: www.mysite.com/#some_page_name

Simple version URL:www.mysite.com/static.php?p=some_page_name 
```

问题是我们不希望谷歌、必应和雅虎在搜索结果中提供简单版本的 URL，我们总是希望人们登陆网站的普通版本。

是否可以使用 Apache、PHP 或 JS 告诉搜索引擎机器人忽略所有以 static.php 开头的 URL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:51:44.743

把它放在你的 robots.txt 文件中：

```
User-agent: *
Disallow: /static.php 
```

这不仅可以将页面排除在机器人索引之外，还可以防止它们一起抓取它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T15:51:36.443

使用 robots.txt 文件，在您的情况下，它看起来像

```
# www.robotstxt.org/

User-agent: *
Disallow: /static.php 
```

[您可以在此处](http://www.robotstxt.org/)阅读有关 robots.txt的更多信息

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T15:51:36.880

机器人.txt

`Disallow: /static.php`

[robots.txt 上的 Google 文档](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T15:52:59.300

您可以使用[robots.txt](http://www.robotstxt.org/)执行此操作：

```
User-agent: *
Disallow: *static.php 
```

这`*`是一个通配符，因此这将影响*所有*称为 static.php 的页面。因此，如果您在子目录中遵循类似的范例，这也会影响它们。

# mysql - 自动转储 information_schema

> ID：11417097
> 
> 赞同：0
> 
> 时间：2012-07-10T15:48:34.087
> 
> 标签：mysql, mysqldump, information-schema

我正在寻找一种方法来备份 MySQL 上的所有数据库。我编写了一个运行 mysqldump 的批处理文件，它工作正常。不幸的是，我使用的是 MySQL 5.0，无法升级到包含 mysqldump 中的 information_schema 的较新版本。

谁能让我知道我应该如何转储这个数据库？在过去的 8 个小时里，我一直在尝试，但无法让它发挥作用！

希望有人可以提供帮助。

干杯

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T15:10:40.237

无需备份 MySQL 的`information_schema`数据库。MySQL 自己操作和维护这个数据库，它会在导入转储时自动重新填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T06:39:01.330

当然会！敲头告诉它记住。

# exception-handling - 企业库滚动平面文件跟踪侦听器的问题

> ID：11417098
> 
> 赞同：1
> 
> 时间：2012-07-10T15:48:34.493
> 
> 标签：exception-handling, enterprise-library

我正在使用企业库滚动平面文件跟踪侦听器将我的应用程序错误记录在单个文本文件中。但是，我观察到它会创建多个文件，并附加一些数字系列，而不是登录到一个文件中。

请查看我的配置设置，让我知道是否需要任何更改

```
<listeners>
  <add name="Rolling Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=1234abccc"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=1234abccc"
    fileName="AppError.log" formatter="Text Formatter" filter="Error" />
</listeners>

<formatters>
  <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=1234abccc"
    template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}"
    name="Text Formatter" />
</formatters>

<categorySources>
  <add switchValue="All" name="General">
    <listeners>
      <add name="Rolling Flat File Trace Listener" />
    </listeners>
  </add>
</categorySources>
<specialSources>
  <allEvents switchValue="All" name="All Events" />
  <notProcessed switchValue="All" name="Unprocessed Category" />
  <errors switchValue="All" name="Logging Errors &amp; Warnings">
    <listeners>
      <add name="Rolling Flat File Trace Listener" />
    </listeners>
  </errors>
</specialSources>
<exceptionHandling>
<exceptionPolicies>
  <add name="Application Policy">
    <exceptionTypes>
      <add name="All Exceptions" type="System.Exception, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=1234abccc"
        postHandlingAction="NotifyRethrow">
        <exceptionHandlers>
          <add name="Logging Exception Handler" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging.LoggingExceptionHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=1234abccc"
            logCategory="General" eventId="100" severity="Error" title="Enterprise Library Exception Handling"
            formatterType="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.TextExceptionFormatter, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling"
            priority="0" />
        </exceptionHandlers>
      </add>
    </exceptionTypes>
  </add>
</exceptionPolicies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:03:42.117

将数字附加到日志文件的原因是因为它检测到文件已经存在并且滚动平面文件跟踪侦听器会增加文件编号。**将rollFileExistsBehavior**设置更改为**Overwrite**以确保您指定的文件被覆盖。

# java - 序列化 - 如何保护序列化的 JAVA 对象？

> ID：11417103
> 
> 赞同：3
> 
> 时间：2012-07-10T15:48:39.087
> 
> 标签：java, serialization

如果我通过网络发送序列化对象，如何保护序列化对象？我怀疑黑客可能会中断/破解我的数据。

谁能详细说明如何实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T14:50:13.043

本演示文稿提供了有关攻击者如何有效地篡改 Java 序列化流的想法：

1.  [https://www.owasp.org/images/e/eb/OWASP_IL_2008_Shai_Chen_PT_to_Java_Client_Server_Apps.ppt](https://www.owasp.org/images/e/eb/OWASP_IL_2008_Shai_Chen_PT_to_Java_Client_Server_Apps.ppt)

    如果服务器的类路径中存在易受攻击的类，还存在注入意外行为和注入代码的风险。见这篇文章：

[前瞻Java反序列化][3]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T23:51:41.060

[`java.crypto.SealedObject`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/SealedObject.html)就是你要找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T15:53:07.137

您可以对其进行加密或散列，但 java 序列化格式是通过网络发送的最佳选择 - 更好的解决方案是 JSON / XML（加密或使用某些加密算法签名）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T15:55:13.260

如前所述查看加密，但更具体地查看用于 java 中网络通信的 hte SSL/TLS 库。

[http://juliusdavies.ca/commons-ssl/ssl.html](http://juliusdavies.ca/commons-ssl/ssl.html)

当 Java 内置了一个非常强大的库时，无需尝试实现安全加密通信。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-07T20:56:26.330

在我看来，您可以使用 use`SSLSocket`或`SealedObject`. 但是，它会让你的事情变得有点沉重。但是，本文也描述了其中一个选项。[http://www.ibm.com/developerworks/library/j-5things1/](http://www.ibm.com/developerworks/library/j-5things1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-02T09:00:55.193

您可以使用签名对象和密封对象来保护序列化对象

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-19T16:09:42.753

我在这里的线程中添加了一个有用的资源，Oracle 的*Java SE 安全编码指南*（特别是在这种情况下，指南中的第 8 节，“*序列化和反序列化*”）：

[https://www.oracle.com/java/technologies/javase/seccodeguide.html#8](https://www.oracle.com/java/technologies/javase/seccodeguide.html#8)

# xsd - 在 xsd 模式中定义元素列表

> ID：11417104
> 
> 赞同：4
> 
> 时间：2012-07-10T15:48:40.437
> 
> 标签：xsd

我的架构的这一部分给我带来了麻烦：

```
 <xs:element name="newrecipients">
            <xs:complexType>
                <xs:choice>
                    <xs:element name="csv" type="xs:string" />
                    <!-- List of recipients -->
                </xs:choice>
            </xs:complexType>
        </xs:element> 
```

收件人列表是以下内容的列表：

```
<recipient>
    <field1>...</field1>
    ...
    <fieldN>...</field>
</recipient> 
```

其中标签接收者可以包含模式未知的随机标签序列。所以我用了类似的东西

```
 <xs:element name="recipient">
    <xs:complexType>
      <xs:sequence>
        <xs:any minOccurs="1"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

问题是我不知道如何定义收件人列表。我知道`<xs:list>`，但我不明白在这种情况下如何使用它，因为通常我会看到类似

```
<xs:element name="intvalues" type="valuelist">

<xs:simpleType name="valuelist">
  <xs:list itemType="xs:integer"/>
</xs:simpleType>

</xs:schema> 
```

您必须在其中定义一个包含列表的元素。我想要直接`csv`或直接的`list`.

我错过了什么？谢谢。

编辑：输出示例

这：

```
<newrecipients>
    <csv>myrecipients.csv</csv>
</newrecipients> 
```

或这个：

```
<newrecipients>
    <recipient>
        <field1>...</field1>
        ...
        <fieldN>...</field>
    </recipient>
    ...
    <recipient>
        <field1>...</field1>
        ...
        <fieldN>...</field>
    </recipient>
</newrecipients> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T07:42:07.503

我不确定它在`xsd:choice`元素内是否有效：

```
<xs:element name="newrecipients">
    <xs:complexType>
        <xs:choice>
            <xs:element name="csv" type="xs:string" />
            <!-- List of recipients -->
            <xs:element name="recipient" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:any minOccurs="1"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:choice>
    </xs:complexType>
</xs:element> 
```

当然，您可以使用此解决方案将元素声明包装在`xsd:sequence`标签内，但我不知道当且仅当缺少 csv 元素时您是否希望列表存在。

# jquery - 在 wordpress 主题上修复 Jquery 垂直手风琴中奇怪的跳跃故障

> ID：11417109
> 
> 赞同：0
> 
> 时间：2012-07-10T15:48:54.453
> 
> 标签：jquery, wordpress, accordion

我对 JQuery 完全陌生，我一直在基于模板构建一个 wordpress 站点，并且手风琴菜单会跳动，有时会在您滚下后继续跳动一段时间，这很烦人。我想要做的是阻止它作为悬停工作，而是将其更改为仅在单击时打开/关闭。

这是我的代码

```
/* 
```

主菜单

*/

功能主菜单（）{

```
jQuery("nav ul li").hover(function () 
{

    jQuery(this).find("ul").fadeIn(0).slideUp(0).slideDown(800);

}, function () 
{

    jQuery(this).find("ul").slideUp(800);       

});

jQuery("nav ul li").each(function () 
{

    if (jQuery(this).find("ul").size() > 0) jQuery(this).find("a").filter(":first").append(" +");

}); 
```

}

注意：此故障仅在您向导航添加第三级时发生。这是这个模板的一个常见问题，这里也是这个问题的视频 [http://youtu.be/lgbxWbmzbaw](http://youtu.be/lgbxWbmzbaw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:51:30.920

给你滑动的元素一个固定的宽度来防止这个问题。没有固定宽度，jQuery 无法准确计算目标高度。

此外，替换`.size()`为`.length`,`.size()`已贬值，是一种不好的做法。

在不需要固定宽度的情况下防止此问题的唯一其他方法是将高度直接设置为设置高度。

# linux - 如何检查进程是否仍在 c 内核中运行？

> ID：11417112
> 
> 赞同：1
> 
> 时间：2012-07-10T15:49:00.133
> 
> 标签：linux, process, kernel, driver

到目前为止，我看到的所有答案似乎都只是在用户空间内进行检查。我需要一种方法来检查内核空间，特别是在设备驱动程序中。我通过进程的 ioctl 调用获取与进程关联的 task_struct，因此我可以使用其中包含的所有信息。

注意：我正在寻找的进程正在用户空间中运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:00:54.570

这有帮助吗：

```
struct task_struct { 
   volatile long state;    /* -1 unrunnable, 0 runnable, >0 stopped */
   ...
} 
```

# linq - 编写 LINQ 查询。加入 VS 导航属性

> ID：11417114
> 
> 赞同：9
> 
> 时间：2012-07-10T15:49:08.527
> 
> 标签：linq, optimization, entity-framework-4.1, navigational-properties

我正在尝试更多地了解 Linq 查询和实体框架（4.1）。请查看以下两个查询。两个查询都返回汽车类型名称 (CarType.Name)

在第一个查询中，我使用了 join 并忽略了导航属性 CarType

```
from c in Cars.AsEnumerable().
Where(e => e.CarId == Guid.Parse("0501cc96-5610-465d-bafc-16b30890c224"))
join ct in CarTypes on c.CarTypeId equals ct.CarTypeId
select new CarType {
    Name = ct.Name
} 
```

其次，我使用了导航属性 CarType

```
from c in Cars.AsEnumerable()
where c.CarId == Guid.Parse("0501cc96-5610-465d-bafc-16b30890c224")
select new CarType {
    Name = c.CarType.Name
} 
```

我在 LinqPad 中运行了两个，因此有 Guid.Parse 函数。

当我运行这些时，第一个语句运行得更快。LinqPad 报告 00:00:036。第二条语句运行速度较慢，LinqPad 报告 00:00:103

**从结果来看，使用连接而不是导航属性的 Linq 查询似乎更快。真的是这样吗？请有人对此有所了解。在编写 Linq 查询时，是否有任何一般性指导和最佳实践？**

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T15:50:23.447

由于您正在调用`.AsEnumerable()`，因此不会使用 LINQ to Entities 评估查询，而是使用 LINQ to Objects 评估查询。

这意味着第一个可能会进行两次往返：一次拉出所有 Cars，一次拉出所有 CarTypes。然后它使用 LINQ to Objects 用于此类操作的任何算法在本地执行连接。

第二个可能是进行 N + 1 次往返，其中 N 是 CarType 的数量。您进行一次往返以获取所有汽车，然后每次其中一辆汽车具有实体框架尚未加载的 CarTypeId，它会返回数据库以选择该 CarType。

如果您使用 LINQPad 中的 SQL 选项卡，您可以看到您的程序正在执行的所有 LINQ 查询。

在这种情况下，您应该应用的最佳实践是不调用`.AsEnumerable()`实体框架对象集。相反，编写整个查询，然后`.ToList()`在最后调用以捕获结果。您可能将调用`.AsEnumerable()`作为一种解决方法，因为`Guid.Parse()`它在 LINQ to Entities 查询中不起作用，但您可以轻松地从查询中删除该部分。在 LINQPad 中，按`Ctrl`-`2`切换到 C# 语句模式，然后运行如下查询：

```
var guid = Guid.Parse("0501cc96-5610-465d-bafc-16b30890c224");
var carTypeNames = 
    (from c in Cars
    where c.CarId == guid
    select new CarType {
        Name = c.CarType.Name
    }).ToList();
carTypeNames.Dump(); 
```

如果正确完成，给出的两个查询应该具有大致相同的性能，因此您应该更喜欢导航属性，因为它们更简洁且更易于阅读。或者，根据您的偏好，您可以翻转查询并使其基于 CarType 集合：

```
var guid = Guid.Parse("0501cc96-5610-465d-bafc-16b30890c224");
var carTypeNames = 
    (from ct in CarTypes
    where ct.Cars.Any(c => c.CarId == guid)
    select new CarType {
        Name = c.CarType.Name
    }).ToList();
carTypeNames.Dump(); 
```

### 更新

避免像这样创建实体对象：

```
public class CarTypeSummary
{
    public string Name{get;set;}
}

void Main()
{
    var guid = Guid.Parse("0501cc96-5610-465d-bafc-16b30890c224");
    var carTypeNames = 
        (from ct in CarTypes
        where ct.Cars.Any(c => c.CarId == guid)
        select new CarTypeSummary {
            Name = c.CarType.Name
        }).ToList();
    carTypeNames.Dump();
} 
```

在生产代码中，将 API 与底层数据类型分离通常是一个好主意，这样您就可以更灵活地更改内容，而无需在任何地方修改代码。

```
public interface ICarTypeSummary{string Name{get;}}
public class CarTypeSummary : ICarTypeSummary
{
    public string Name{get;set;}
}
public ICarTypeSummary GetCarTypeSummaryForCar(Guid guid) 
{
    return (from ct in CarTypes
            where ct.Cars.Any(c => c.CarId == guid)
            select new CarTypeSummary {
                Name = c.CarType.Name
            }).FirstOrDefault();
} 
```

这样，如果您将来决定只返回一个实际的 CarType，以利用 Entity Framework 的缓存机制，您可以更改您的实现而不会弄乱 API：

```
// Make the Entity class implement the role interface
public partial class CarType : ICarTypeSummary {}

public ICarTypeSummary GetCarTypeSummaryForCar(Guid guid) 
{
    return CarTypes.FirstOrDefault(
        ct => ct.Cars.Any(c => c.CarId == guid));
} 
```

# regex - awk：仅在 2 个或更多空格上拆分

> ID：11417115
> 
> 赞同：12
> 
> 时间：2012-07-10T15:49:10.903
> 
> 标签：regex, unix, awk

我正在尝试重新格式化`last`命令的输出，例如`last -adn 10 | head -n -2 | awk -F' {2,}' '{ print "USER:",$1,"IP:",$5 }'`.

```
>> last -adn 10 | head -n -2
root     pts/0        Tue Jul 10 13:51   still logged in    10.102.11.34
reboot   system boot  Fri Jun 22 09:37         (18+04:19)   0.0.0.0 
```

我希望我的输出是这样的：

```
>>last -adn 10 | head -n -2 | awk -F' {2,}' '{ print "USER:",$1,"IP:",$5 }'
USER: root IP: 10.102.11.34 TIME: Tue Jul 10 13:51 
```

我已经尝试了[这里](http://jamesmcdonald.id.au/it-tips/splitting-records-by-multiple-spaces-but-not-single-spaces-using-awk)描述的所有方法，但我不知道为什么这对我不起作用。执行该命令时，它只是将整行存储在 $1 中，其他为空白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:56:08.843

默认情况下，gawk 不启用区间表达式。`--re-interval`您可以使用标志启用它们。其他版本的 awk 可能完全支持也可能不支持。

如果您无法启用该标志，则可以使用更明确的匹配。例如：

```
$ echo 'foo  bar baz' |
    awk -F'[[:space:]][[:space:]][[:space:]]*' '{print $2}'
bar baz 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:04:02.980

**基于@WilliamPursell 评论/建议的**更新：****

 **而不是这个：

```
awk -F' {2,}' '{ print "USER:",$1,"IP:",$5 }' 
```

试试这个：

```
awk 'BEGIN{FS="   *"}{ print "USER:",$1,"IP:",$5 }' 
```

似乎对我有用，并解决了我之前使用的解决方案的缺点，`'BEGIN{FS=" "}...`该解决方案仅在 2 个空格上拆分。

*注意*:`FS`设置为**3 个空格**和一个`*`，表示最后一个空格可以出现零次或多次。**

# ssh - 多个用户编辑授权密钥

> ID：11417116
> 
> 赞同：0
> 
> 时间：2012-07-10T15:49:11.520
> 
> 标签：ssh, openssh, authorized-keys

我希望有两个用户能够编辑我的 authorised_keys 文件。这可能吗？

我试图将用户添加到原始用户等/组，但这不起作用。

例如 user1:xx:user2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:56:35.090

`/etc/group`列出组 ID，而不是用户 ID。如果您在一个系统上，每个用户都有自己的组 (user1:user1)，这没关系，否则创建一个新组并将两个用户都放入其中。

在任何情况下，您还需要确保`authorized_keys`文件属于相关组（`chown`必要时使用），它是组可写的（`chmod g+w authorized_keys`），并且 user2 对通向的路径上的所有目录具有执行权限`authorized_keys`.

PS。完成后，您的 ssh 可能会认为文件不安全并拒绝读取它。在这种情况下，您的工作将是徒劳的，但您始终可以设置一个 setuid 程序来编辑文件。

# mysql - Mysql查询从其当前值的2列更新

> ID：11417118
> 
> 赞同：0
> 
> 时间：2012-07-10T15:49:18.097
> 
> 标签：mysql

MySQL 5.1.63-cll 版本使用phpmyadmin 编辑

所以我有这张表 ps_layered_price_index 我想编辑/更新列：-

```
price_min AND
price_max 
(updating the current value+10)

where column(id_product) = ALL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:57:29.350

如果你想更新你的表的每一行，那么你可以尝试这样的事情：

```
UPDATE 
 ps_layered_price_index
SET 
 price_min = price_min + 10,
 price_max = price_max + 10 
```

对于单行：

```
UPDATE 
 ps_layered_price_index
SET 
 price_min = price_min + 10,
 price_max = price_max + 10
WHERE 
 id_product = 87 
```

# c++ - 在 C++ 中存储大量短期游戏对象

> ID：11417119
> 
> 赞同：3
> 
> 时间：2012-07-10T15:49:31.420
> 
> 标签：c++, data-structures

我将如何存储大量对象（例如子弹或不断变化的此类对象），然后通过它们的索引将它们删除？我听说 vector::erase 效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:51:07.670

使用`std::map`（或 C++11s `std::unordered_map`），这些容器对于插入和擦除操作具有更好的分摊运行时复杂性。`std::list`也是一个选项（这是显而易见的选项，但我首先提到了其他选项，因为它们还允许快速查找/搜索，这在许多游戏场景中更为重要）。

在更高的层次上，您绝对应该阅读 C++ 容器以及一般的运行时复杂性。容器结构的明智选择对于良好的性能至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:53:52.843

`unordered_set<Bullet*>`会做得很好。然后，您可以简单地在`Bullet*`任何地方使用 a 并忘记索引。最好从对象池或类似的东西中分配。

或者，由于标准友好地搞砸了界面，您可能需要`std::unordered_map<Bullet*, std::unique_ptr<Bullet>>`更好的异常安全性等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:28:22.970

(in)著名的 Alexandrescu 考虑了短期动态小对象缓慢的 new/free 运算符的主要问题，并建议使用自定义分配器。std::map 将使用很多这样的对象（它在内部使用红黑树），因此最好使用预分配对象池或带有自定义分配器的 std::map（可能取自 Alexandresu 的 Loki 库） )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:39:44.640

`vector::erase`效率不是很高，因为它需要移动所有以下元素以填充空间以保持顺序。但是，听起来您不需要保留顺序，在这种情况下，您可以通过将元素替换为末尾的元素来更快地删除元素，然后删除最后一个元素：

```
std::swap(bullets[index_to_remove], bullets.back());
bullets.pop_back(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T16:08:42.900

根据我对游戏引擎编程的极其有限的二手知识，尽可能避免动态内存分配。因此，对于频繁删除的“大量”，`unordered_set`或将是一个主要的否决。`list`

编辑：阅读@James Kanze 的回答后，我意识到@Cameron 建议将已删除的子弹与最后一​​个元素交换是行不通的，因为它会改变实弹的索引。我想你必须使用詹姆斯的建议，或者可能是一个位向量来标记死子弹。

将子弹压缩在一个数组中对缓存性能也很有好处。哈希表的缓存比`std::map`的红黑树更好，但是如果您已经按索引引用了项目符号，为什么还要产生哈希开销呢？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T16:23:58.840

如果您通过它们在向量中的索引来识别子弹，那么`erase`这不是一个好主意；它将更改以下所有元素的索引。项目符号由其索引标识这一事实在一定程度上限制了您的选择。在这种情况下，最好的解决方案可能是简单地将条目标记为无效，并在以后重用它，或者通过保留无效索引列表（很容易在`std::vector`一个子弹。如果您有不同类型的子弹（随着游戏的发展，您可能会这样做），无论如何您都需要动态分配子弹，并在向量中保留一个指针；空指针是无效的一个不错的选择。

# iphone - 接受传入请求时出现 Gamekit API 错误

> ID：11417121
> 
> 赞同：3
> 
> 时间：2012-07-10T15:49:37.333
> 
> 标签：iphone, xcode, ipad, gamekit, gkpeerpickercontroller

我做了一个蓝牙模式的iPhone游戏，你可以通过蓝牙玩1对1。我对选择器的实现如下：

```
picker = [[GKPeerPickerController alloc] init];
picker.delegate = self;
picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby;
[picker show]; 
```

我不知道哪个代码给出了错误，所以我还将为所有其他与选择器有关的方法粘贴我的代码：

```
- (void) receiveData:(NSData *)data fromPeer:(NSString *)peer inSession: (GKSession *)session context:(void *)context {
  NSString *dataString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
  NSDictionary *dataDictionary = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects:dataString, peer, session, nil] forKeys:[NSArray arrayWithObjects:@"data", @"peer", @"session", nil]];
  [dataString release];
  [self performSelectorOnMainThread:@selector(receivedData:) withObject:dataDictionary waitUntilDone:YES];
}
- (GKSession *)peerPickerController:(GKPeerPickerController *)picker
    sessionForConnectionType:(GKPeerPickerConnectionType)type {
  // Create a new session if one does not already exist
    if (!self.currentSession) {
      self.currentSession = [[[GKSession alloc] initWithSessionID:@"Session" displayName:nil sessionMode:GKSessionModePeer] autorelease];
      self.currentSession.delegate = self;
    }
    return self.currentSession;
  }
  -(void)peerPickerController:(GKPeerPickerController *)pk didConnectPeer:(NSString *)peerID toSession:(GKSession *)session {
    self.currentSession = session;
    session.delegate = self;
    [session setDataReceiveHandler:self withContext:nil];
    picker.delegate = nil;
    [picker dismiss];
    [picker autorelease];
  }
  -(void)peerPickerControllerDidCancel:(GKPeerPickerController *)pk {
    picker.delegate = nil;
    [picker autorelease];
    [self.navigationController popViewControllerAnimated:YES];
  }
  // FAIL
  - (void)session:(GKSession *)session didFailWithError:(NSError *)error {
    NSLog(@"error : %@", [error description]);
  }
  // SESSION VIND ANDERE SESSION -> CONNECT
  -(void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state {
    switch (state) {
      case GKPeerStateConnected:
        NSLog(@"connect met peer %@", [currentSession displayNameForPeer:peerID]);
        [self generateRandomNumberAndSendIt];
        break;
      case GKPeerStateDisconnected:
        NSLog(@"disconnected");
        [self.currentSession disconnectFromAllPeers];
        currentSession = nil;
        [self.navigationController popViewControllerAnimated:YES];
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Whoopsie" message:@"The connection failed" delegate:nil cancelButtonTitle:@"Okido" otherButtonTitles:nil];
        [alert show];
        [alert release];
        [super viewDidDisappear:YES];
        break;
      }
    } 
```

有时，当我接受传入请求时，选择器会在一台设备上自行删除，而在另一台设备上我会收到错误消息：`wait_fences: failed to receive reply: 10004003`. 我认为这与警报视图本身有关。我在此视图中设置了其他警报视图。

我希望你们能帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:29:59.027

您需要设置一些断点并调试代码崩溃的位置，任何人都无法确定您的代码崩溃的位置，我们能做的最好的就是通过指出代码中的异常来猜测。该错误甚至可能不在您提供的代码中。

正如其他人提到的那样，您绝对不应该`[super viewDidDisappear:YES];`在非`viewDidAppear:`方法中使用该语句。

我还猜测，如果您正在调试，那么控制台中的错误消息会比`wait_fences: failed to receive reply: 10004003`. 确保您已对所有异常启用断点。如果您不知道该怎么做，[这里有一些说明](http://ijoshsmith.com/2011/11/28/debugging-exceptions-in-xcode-4-2/)。逐步检查异常，找出它在哪一行，并找出抛出了什么错误。

你的`[picker autorelease];`电话也有点奇怪。如果您想自动释放选择器，只需执行`picker = [[[GKPeerPickerController alloc] init] autorelease];`. 将 autorelease 语句放在 GameKit 委托方法中是很奇怪的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:34:25.273

尝试将您的`UIAlertView`调用包装在块中以在主线程上调用，例如

```
dispatch_async(dispatch_get_main_queue(), ^{
   // Show UIAlertView
} 
```

虽然我以前没有像这样使用过 GK，但我猜它（就像许多基于网络的库一样）可以触发来自除主 GUI 线程之外的其他线程的回调。在大多数 GUI 库中，从主 GUI 线程之外呈现甚至操作用户界面是一个很大的禁忌，Cocoa 也不例外（尽管它通常令人惊讶地宽容）。

# css - 如何在导航中居中对齐文本 元素？

> ID：11417123
> 
> 赞同：0
> 
> 时间：2012-07-10T15:49:50.350
> 
> 标签：css

我正在为学校做一个 PHP 项目，我希望我的标题导航列表文本居中，但既不工作`text-align: center;`也不`vertical-align: middle;`工作。有什么建议么？

[http://ectweb.cs.depaul.edu/AHARDEN2/project/index.php](http://ectweb.cs.depaul.edu/AHARDEN2/project/index.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:59:17.143

在第 241 行的 style.css 中添加 width 和 margin:auto。删除所有引用你的 nav 和 ul 的浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:54:40.937

```
body > nav {
    text-align: center;
}

body > nav > ul {
    display: inline-block;
    float: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:30:58.207

在 CSS 中，最好的方法通常是：

对于文本：

```
.centredText {
  margin-left: auto;
  margin-right: auto;
  width: 4em; /* This is whatever size you need each margin to be. */
} 
```

对于 div 或图像（这听起来像什么）：

```
.centredItem {
  display: table;
  margin-left: auto;
  margin-right: auto;
} 
```

然后在你的 HTML 中，`<div class="centredItem">Stuff</div>`

# c - 返回类型在 C 代码中默认为“int”

> ID：11417124
> 
> 赞同：0
> 
> 时间：2012-07-10T15:49:51.527
> 
> 标签：c

somefile.h 的内容

```
#ifndef __SOMEFILE_H
#define __SOMEFILE_H

#ifdef __cplusplus
extern "C" {
#endif

typedef struct _table_t table_t;

struct _table_t
{
     void (*somefunction1)();
     void (*somefunction2)(int a);
     void (*somefunction3)(int a, int *b);
};

#ifdef __cplusplus
} 
#endif
#endif <-- I am getting the error here 
```

* * *

somefile.h 包含在 .cpp 和 .c 文件中。当这个项目在 Linux 上构建时，我收到以下错误：

> 错误：返回类型默认为“int”

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:07:29.427

您有一个未定义返回类型的函数。寻找类似的东西

```
Foo(void); 
```

或者

```
Foo(void) {
  printf("foo you too");
} 
```

# jquery - asp.net 中的 jquery 和 page.isvalid

> ID：11417126
> 
> 赞同：0
> 
> 时间：2012-07-10T15:50:08.560
> 
> 标签：jquery, asp.net

经过几天的努力，我能够使用 jquery 表单向导/验证插件和 asp.net 实现一个多步骤向导。我在测试时注意到了一个问题。（与 jquery 插件无关）当用户第一次单击最终提交按钮时，jquery 验证器会启动并且所有验证消息都被正确吐出。但是，提交按钮仍然处于活动状态，用户仍然可以单击它，这显然是不好的。

我应该只检查背后代码的 Page.IsValid 方法吗？有没有更好的解决方案，比如在 javascript 中禁用/启用提交按钮？处理这个问题的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:34:56.690

无论您使用什么方法在客户端验证表单，您都应该*始终*在服务器端再次验证它。绕过客户端验证非常非常容易，因此您应该养成验证双方数据的习惯。

话虽如此，我更喜欢保持启用提交按钮。验证方法应该防止表单被提交，并且验证/错误消息应该足够清晰，让用户知道在提交表单之前需要修复什么。

# java - 如何为 H2 数据库用户定义函数和存储过程指定 java 类版本？

> ID：11417133
> 
> 赞同：4
> 
> 时间：2012-07-10T15:50:31.270
> 
> 标签：java, stored-procedures, javac, h2, java-stored-procedures

这里：[create_alias](http://www.h2database.com/html/grammar.html#create_alias) & [user_defined_functions](http://www.h2database.com/html/features.html#user_defined_functions)它是这样写的：

> 如果文件 tools.jar 在类路径中，则使用 Sun javac is 编译器。如果没有，javac 将作为单独的进程运行。

如何为 H2 数据库用户定义函数和存储过程指定 java 类版本 - 即外部 javac 的 javac 调用选项？你能总是强制外部javac（即使找到jdk/tool.jar）？

例如，H2 是针对 java 1.5 构建的；我在 java 1.7 上运行：

```
org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: org.h2.jdbc.JdbcSQLException: 
General error: 
"java.lang.UnsupportedClassVersionError: org/h2/dynamic/NEXT_PRIME : 
Unsupported major.minor version 51.0"; SQL statement:
CREATE ALIAS NEXT_PRIME AS $$
        String nextPrime(String value) {
            return new BigInteger(value).nextProbablePrime().toString();
        }
    $$; [50000-167]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:158)
    at org.h2.message.DbException.convert(DbException.java:277)
    at org.h2.command.Command.executeUpdate(Command.java:234)
    at org.h2.server.TcpServerThread.process(TcpServerThread.java:328)
    at org.h2.server.TcpServerThread.run(TcpServerThread.java:149)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.UnsupportedClassVersionError: org/h2/dynamic/NEXT_PRIME : 
Unsupported major.minor version 51.0 
```

谢谢;

安德烈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:10:06.270

该错误消息`"Unsupported major.minor version 51.0"`表明您的系统中有在某些情况下使用的 JDK 或 JRE 1.6。另请参阅问题[unsupported-major-minor-version-51-0](https://stackoverflow.com/questions/10382929/unsupported-major-minor-version-51-0)。

# javascript - 如何以正确（完美）的方式处理 jquery 插件中的变量？

> ID：11417138
> 
> 赞同：0
> 
> 时间：2012-07-10T15:50:49.433
> 
> 标签：javascript, jquery, variables, jquery-plugins

我搜索了很多，但我仍然不确定，这是做我想做的最好的方法。我正在编写一个 jQuery 插件，它已经工作了，但现在我想改进我的代码，因为我在编写这个插件时了解了更多的功能。

作为基础，我从官方 jQuery 页面[http://docs.jquery.com/Plugins/Authoring 获取](http://docs.jquery.com/Plugins/Authoring)代码（插件选项）

我不会在这里使用我自己的代码，因为来自 jQuery 的代码已经足够我的问题了

```
(function( $ ){

  var methods = {
    init : function( options ) { 
      var defaults = {
        value1: '',
        value2: ''
       };
       var options = $.extend(defaults, options);
       return this.each(function(){
         value3 = $(this).parent();
       });
    },
    log : function( ) {
      console.log(value3);
      console.log(defaults.value1);
    }
  };

  $.fn.my_plugin = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery ); 
```

这就是我的插件的结构。它现在非常剥离；）现在我想做这样的事情：

```
$('#element1').my_plugin({value1 : 1, value2 : 2});
$('#element2').my_plugin({value1 : 3, value2 : 4}); 
```

现在我想在控制台中记录值（不完全是我真正想要做的，但对于我的问题，这又足够了）

此外，我想使用这样的功能

```
$('#element1').my_plugin('log');
$('#element2').my_plugin('log'); 
```

这是我的第一个问题。当我在日志函数中时，如何从初始化函数中获取变量？最好的方法是什么？

我试图像这样设置全局值：

```
(function( $ ){
  var defaults = {
    value1: '',
    value2: ''
  };
  var methods = {
    init : function( options ) { 
       return this.each(function(){
         value3 = $(this).parent();
       });
    },
    log : function( ) {
      console.log(value3);
      console.log(defaults.value1);
    }
  }; 
```

但是如果我这样做并使用`$('#element1').my_plugin('log');`，我只能从第二个初始化中获得默认值`$('#element2').my_plugin({value1 : 3, value2 : 4});`

所以这是我的第二个问题：如何为每个初始化使用特定变量？

我希望很清楚，我想知道什么。我仍在学习 jQuery 并尽我所能，并搜索了很多如何解决我的这个结构的问题。我想使用这种结构，因为它是 jquery 的官方结构，我喜欢做正确的事情：P

也想很快在这里看到一些答案:)
谢谢你的帮助，
朱利安

如果有人对基本插件结构感兴趣 - 这是我现在用于插件的内容：)

```
(function( $ ){

  var methods = {
    init : function( options ) {
        console.log('init');
      var defaults = {
        value1: '',
        value2: ''
      };
      var options = $.extend(defaults, options);        
      return this.each(function(){
                var $this = $(this);
        var data = $this.data('test');
        var parent = $this.parent();
        var element = $this;

        if (!data) {
            var data = {};
            $.each(options, function(key, value) {
                data[key] = value;
            });
            data["parent"] = parent;
            data["element"] = element;
                    $this.data('test', data);
        }

        $this.test('log');

       });
    },

    log : function() {
        console.log('log');
        return this.each(function(){
            var $this = $(this);
        var data = $this.data('test');
        console.log(data);
      });
    }
  };

  $.fn.test = function( method ) {
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.test' );
    }    
  };
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:54:03.183

如果你想保持“这个”干净，请使用 $.data。

# vim - vim中更改句点“。”的最快方法是什么？到箭头“->”？

> ID：11417140
> 
> 赞同：2
> 
> 时间：2012-07-10T15:50:59.937
> 
> 标签：vim

我知道这听起来像是一个不太重要的挑剔问题，但它实际上证明是我感到沮丧的根源。

偶尔我会使用点运算符“。” 当我打算使用箭头“->”时，在指针类型上。要修复它，我通常只需要将 2-3 个点更改为箭头，但我似乎无法在 vim 中找到一种不需要相对大量击键的方法来处理我的文本量变化。

例如，我可以这样做：

```
:lineNum,lineNum s/\<objectName\>\./->/g 
```

但是，如果只有 2-3 个实例，那就是相当多的输入。

或者，我可以使用`jkhl`导航到每个时期，并执行以下操作：

```
r-a><ESC> 
```

但是在使用找到所有三个之后，每个击键五次似乎是一种折磨`jkhl`，以及如此快速地进入和退出插入模式所带来的心理上下文切换。

你如何将你的点变成箭头？你找到更快的方法了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:59:47.720

```
/\.<CR>
s-><ESC>
n.
n. 
```

... ETC ...

each`n`没有您搜索的下一个表达式，并且 each`.`重复用箭头替换点。根据需要混合和匹配 ns 和点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T15:58:11.463

您可以映射一个键，例如：

```
:map v :s/\./->/g^M 
```

然后只需按该行上的键 v 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T15:59:14.910

如果您使用的是 vim，您可以将键盘映射添加到 ~/.vimrc 文件中，例如：

```
map <F2> :lineNum,lineNum s/\<objectName\>\./->/g 
```

然后当您在 vim 中键入“F2”时，会出现映射命令，您可以在触发它之前编辑参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T15:58:07.863

首先搜索点的初始实例：`/\.`.

在第一个实例上进行替换，将光标放在需要更改的点上，使用`s`，这会杀死当前字符并开始插入：`s->`。

现在用于`n`查找下一个匹配项，并使用句点重复上一个命令：`.`

如果您需要更具体地了解这些点，那么您的搜索可能是: `/objectName\./e`，将光标留在搜索的末尾，但这需要更多的输入。也许`/ob/e+9`？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T16:16:36.307

用光标在指针名称上命中`*`。这将找到指针的所有实例。
然后`/<M-UP>\./e`将检索先前的搜索，追加`.`并将光标放在`.`.
现在我们的搜索词只会找到问题`.`s。
在第一个上用请求`s-><ESC>`替换并修复所有其他事件`.``->``n.`

因为`n.`经常使用，所以我发现映射它很有帮助，我使用`F3`

```
map <F3> n. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T15:59:33.167

您可以在可视模式下选择 ->`"ky`并将其保存到寄存器 k 中，然后遍历 . 做`x"kP`

# php - dompdf中的页面编号问题

> ID：11417145
> 
> 赞同：1
> 
> 时间：2012-07-10T15:51:09.340
> 
> 标签：php, pdf, dompdf

在这种情况下，我必须出示一份文件：

第 1 页 <- 在页脚中：“第 1 页，共 3 页”

第 2 页 <- 在页脚中：“第 2 页，共 3 页”

第 3 页 <- 在页脚中：“第 3 页，共 3 页”

第 5 页 <- 无页码

第 6 页 <- 无页码

这是一个示例，总页数可能会有所不同，并且编号页的第一部分也是如此。我已经尝试过 dompdf FAQ [链接的内联 php 代码](http://code.google.com/p/dompdf/wiki/FAQ)

我没能做到。出于安全原因，我想避免使用内联 php 代码。如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:08:38.720

您可以使用`page_script()`方法来执行此操作，该方法是在文档完全呈现后按页面运行脚本的方法。它使您可以访问生成所需输出所需的所有变量。

当然，您必须编写一些逻辑来确定有多少页获得页脚。如果您事先不知道有多少页需要页脚，您可以使用全局变量来存储一个值，该值指示要在哪个页面上停止。

可能这方面的困难方面是编写编写代码的代码。我已经模拟了一个样本，我认为它可以捕捉到你想要的东西。你可以在这里找到它： [http ://eclecticgeek.com/dompdf/debug.php?identifier=ed03c2020546641d3e830a7c0115c8ae](http://eclecticgeek.com/dompdf/debug.php?identifier=ed03c2020546641d3e830a7c0115c8ae)

不幸的是，现在不编写脚本就不可能生成你想要的东西。您可以通过 $dompdf 对象添加脚本，而不是作为内联脚本 ( `$dompdf->get_canvas()->page_script()`)。然后您可以从用户文档中过滤掉任何内联脚本/PHP。

（也在支持组上回答：[https](https://groups.google.com/d/topic/dompdf/3x_8YHctCp0/discussion) ://groups.google.com/d/topic/dompdf/3x_8YHctCp0/discussion ）

# sql-server - ASP / SQL Server - If 语句不起作用

> ID：11417146
> 
> 赞同：0
> 
> 时间：2012-07-10T15:51:24.320
> 
> 标签：sql-server, asp-classic, vbscript, conditional

努力将 RS 的输出显示为水平表。

我有一个基于以下 SQL 的 RS

```
SQL = "SELECT INTRAY.TEAM, Count(INTRAY.DOC_GUID) AS NumDocs " & _
"FROM INTRAY INNER JOIN DOCUMENT ON INTRAY.DOC_GUID = DOCUMENT.GUID " & _
"WHERE DOCUMENT.DOC_TYPE = 'PNEW' " & _
"AND DOCUMENT.DATE_RECEIVED > '"& Year(FromDate) &"-"& Month(FromDate) &"-"& Day(FromDate) &"' " & _
"GROUP BY INTRAY.TEAM, INTRAY.MAIL_STATUS, INTRAY.FILE_SYSTEM " & _
"HAVING INTRAY.MAIL_STATUS = 'NT' AND INTRAY.FILE_SYSTEM ='B' " & _
"ORDER BY INTRAY.TEAM ;" 
```

我在普通表格中显示结果，如下所示

```
<table border=1>
    <tr>
        <th>Team</th>
        <th>Records</th>
    </tr>
<%Do While Not RS.EOF %>
    <tr>
        <td><%=RS("TEAM")%></td>
        <td><%=RS("NumDocs")%></td>
    </tr>
<% RS.MoveNext
Loop%>
</table> 
```

结果通常显示在垂直表中。返回 10 条记录，按 Team 排序。OPS1、OPS10、OPS2 等

请注意，由于 alpha 排序，10 在 1 之后，不知道如何修改。

只有 10 支球队可以在输出中，但有时并非所有球队都会有结果，所以表格只能返回 2 或 3 支球队。

我想创建一个表，其中包含每个可能的团队（1-10）的硬编码列标题，然后下一行是 NumDocs 的输出值

团队 1 10 2 3 4 5 6 7 8 9

结果 8 4 7 17 4 87 20 19 1 7

所以，然后我关闭记录集，然后重新打开它；

```
<%RS.Close%>
<br>

<%
RS.cursortype=adOpenKeyset
RS.Open SQL, IConn, 3, 3
RS.MoveFirst
%> 
```

并写表；

```
<table border=1>
<th>Report</th>
<th>OPS1</th>
<th>OPS10</th>
<th>OPS2</th>
<th>OPS3</th>
<th>OPS4</th>
<th>OPS5</th>
<th>OPS6</th>
<th>OPS7</th>
<th>OPS8</th>
<th>OPS9</th>
<tr>
<td>Untouched New Records (total)</td>
<td>
<%If RS("Team") = "OPS1" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS1")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS10" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS1")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS2" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS2")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS3" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS3")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS4" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS4")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS5" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS5")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS6" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS6")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS7 " Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS7")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS8" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS8")
RS.MoveNext
End If %>
</td>
<td>
<%If RS("Team") = "OPS9" Then %>
<% Response.Write(RS("NumDocs")) 
Else Response.Write("Not OPS9")
RS.MoveNext
End If %>
</td>
</tr>
</table> 
```

它不起作用，我在输出中得到的只是“不是 OPSx”。

If 测试不起作用。

如果我将每个单元格修改为

```
<% Response.Write(RS("NumDocs")) 
RS.MoveNext  %> 
```

然后它将写入值，但我需要测试 RS 中该行中 TEAM 的值，如果我将其修改为

```
<% If RS("Team") = "OPS1" Then
Response.Write(RS("NumDocs")) 
End If
RS.MoveNext  %> 
```

它不起作用，什么也不写。

任何想法为什么 mty IF 不起作用？当我写出 TEAM 的值时，它们看起来没问题并且没有尾随空格。SQL Server 不接受 TRIM 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:06:34.520

SQL Server 可能不接受`TRIM`，但它**应该**接受`RTRIM`and `LTRIM`，例如：

```
SELECT INTRAY. RTRIM(TEAM), Count(INTRAY.DOC_GUID) AS NumDocs 
```

如果您不想修剪 SQL 语句（我建议您这样做），您可以随时尝试修剪您的`IF`语句，如下所示：

```
<%If Trim(RS("Team")) = "OPS1" Then %> 
```

如果您现在`<% Response.Write "!" & RS("Team") & "!") %>`处理您的数据，我怀疑您会看到如下内容：

```
!OPS1 ! 
```

# php - 如果让 crypt() 生成盐，PHP 中的 crypt() 函数会返回盐吗？

> ID：11417149
> 
> 赞同：-7
> 
> 时间：2012-07-10T15:51:36.880
> 
> 标签：php

如果您不插入自己的盐，我想知道 crypt() 函数是否返回盐。

**例如：**

```
<?php
  $password = $_POST['input'];
  $encpw = crypt($password /* no salt */);
  print $encpw;
?> 
```

我知道这会输出带有随机盐的加密密码，但是有没有办法输出随机生成的盐？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:53:11.340

就在[PHP Doc](http://php.net/manual/en/function.crypt.php)中（强调我的）：

> 参数：
> 
> ***str***
> 要散列的字符串。
> 
> ***salt***
> 一个可选的盐字符串，作为散列的基础。如果未提供，则行为由算法实现定义，并**可能导致意外结果**。

# objective-c - 调用 setNeedsDisplayInRect 时，Antialias 正在绘制一条额外的线

> ID：11417156
> 
> 赞同：1
> 
> 时间：2012-07-10T15:51:57.940
> 
> 标签：objective-c, cocoa, quartz-graphics

当鼠标在视图上按下时，以下代码绘制了一条额外的线。这似乎是由抗锯齿引起的。有没有人见过这个？

[示例图像](https://www.dropbox.com/sh/1silfcjqn5rvx6d/YMKqfQc1F-/Sample.jpg)

```
- (void) drawRect:(NSRect)dirtyRect
{
    [[NSColor whiteColor] setFill];
    NSRectFill(dirtyRect);

    [[NSColor blueColor] setStroke];

    NSBezierPath *path1 = [NSBezierPath bezierPath];
    [path1 moveToPoint:NSMakePoint(0.00, 9.00)];
    [path1 lineToPoint:NSMakePoint(300.00, 8.00)];
    [path1 stroke];

    [[NSColor redColor] setStroke];

    NSBezierPath *path2 = [NSBezierPath bezierPath];
    [path2 moveToPoint:NSMakePoint(184.00, 15.00)];
    [path2 lineToPoint:NSMakePoint(8.00, 159.00)];
    [path2 stroke];
}

- (void) mouseDown:(NSEvent *)theEvent
{
    [super mouseDown:theEvent];

    [self setNeedsDisplayInRect:CGRectMake(0, 0, 369, 15)];
} 
```

# ios - 使用选项卡创建下拉菜单

> ID：11417161
> 
> 赞同：-1
> 
> 时间：2012-07-10T15:52:15.777
> 
> 标签：ios, cocoa-touch

我想创建一个带有选项卡的菜单，用户可以下拉以显示菜单。在某些情况下，如果有紧急数据，菜单会自动打开。在其他情况下，菜单将关闭，只有选项卡可见，用户可以触摸/拉动选项卡以显示菜单。

我不清楚如何执行以下操作：

1.  显示选项卡（类似于 Google Chrome 选项卡）。
2.  隐藏菜单并仅显示选项卡。
3.  提供滑出动画以显示选项卡连接到的视图/视图控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:28:38.087

您的提问中隐含的假设是 iOS 中有一些内置控件具有出现和消失的菜单。没有。我确信有第三方代码可以为您执行此操作（如果您愿意，可以通过 Google 搜索），但我们大多数人只是自己做，因为这并不难。因此，在回答您的问题时：

> 1) 显示标签（类似于 Google Chrome 标签）。

要显示标签，只需制作您希望标签看起来像的图像，然后将其添加到您的视图中。没什么好看的。要么在 Interface Builder 中添加它，要么以编程方式将它放在视图中。

> 2）隐藏菜单，只显示选项卡。

然后只显示选项卡，甚至不将菜单添加到视图中。

> 3）提供滑出动画以显示选项卡连接到的视图/视图控制器。

要显示菜单，有几种方法。一个模型是（a）创建我称之为*剪辑视图*的内容（只是一个简单的 UIView，您的最终下拉菜单的确切大小和位置，并确保此视图已打开剪辑）；(b) 将菜单视图（包含最终菜单的所有图形元素和控件的视图）放在剪辑视图上，但只是在其上方的屏幕外（例如，使用 (0,-height,宽度，高度））；然后 (c) 将菜单设置为动画（例如，使用 (0,0,width,height) 的框架）。

如果其中任何一个没有意义，那么我建议您一次迈出这一步，也许在继续之前获得一些关于如何做这类事情的良好培训材料。如果您不熟悉以编程方式添加控件，请在开始制作动画之前关注这一点。还要仔细阅读[查看编程指南](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW1)。只需弄清楚如何让一些 IBAction 菜单出现在屏幕上。在知道如何让要动画的东西出现之前，继续进行光滑的动画是没有意义的。一旦你掌握了这一点，继续动画。如果您不熟悉动画，请阅读以下有关[动画](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)的章节。

# jquery - MVC 3比较属性不起作用

> ID：11417164
> 
> 赞同：0
> 
> 时间：2012-07-10T15:52:20.327
> 
> 标签：jquery, asp.net-mvc, validation

我正在开发一个 MVC 应用程序，它有一个注册表单，我想在其中使用 Compare、Required 和 Regex 属性进行电子邮件验证。用户必须输入他们的电子邮件地址，然后确认电子邮件地址，我想使用比较属性来确保他们输入相同的内容。这是我的模型；

```
[RegularExpression(@"<REGEX IS HERE>", ErrorMessage = "Please enter a valid e-mail address")]
[Required]
[DataType(DataType.EmailAddress)]
[Display(Name = "Email")]
public string EmailAddress { get; set; }

[Compare("EmailAddress", ErrorMessage = "The email and confirmation email do not match.")]
[RegularExpression(@"<REGEX IS HERE>", ErrorMessage = "Please enter a valid e-mail address")]        
[Required]        
[DataType(DataType.EmailAddress)]        
[Display(Name = "Confirm Email")]        
public string ConfirmEmailAddress { get; set; } 
```

所有其他验证（即必需的/正则表达式）工作正常，但它不适用于比较客户端，它在表单发布时返回并出现错误。

我读过很多文章说 jquery.validate.unobtrusive 和 jquery1.5.1 中存在错误，但无论我做什么都不能解决问题。

我在这里拉头发，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:01:08.550

如果您无论如何都要进行花哨的验证，您可能会考虑从 NuGet 中获取[MVC Foolproof Validation 。](http://foolproof.codeplex.com/)它有自己的“EqualTo”属性，您可能会更幸运。

（附带说明，您可能不需要正则表达式检查确认地址。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:14:36.260

可能是其他属性在干扰..您真正需要的只是比较和显示属性。必填、Regex、DataType 都是多余的，因为您已经在主节点上拥有这些字段，如果与主节点不匹配，比较将失败。

另一个想法是下载 MvcContrib 包，并使用自动进行电子邮件验证的电子邮件属性，而不是使用正则表达式。

# java - 我可以将 Web 服务称为 HTTP 请求吗？

> ID：11417166
> 
> 赞同：2
> 
> 时间：2012-07-10T15:52:24.437
> 
> 标签：java, web-services

我在将生成的存根与 3rd 方软件一起使用时有一些限制。所以，我正在寻找其他选项，例如简单的 HTTP 请求和响应来获得结果。我可能需要将 5 或 6 个参数传递给一个操作并从 Web 服务获取一个输出。

我可以创建一个简单的 JSP 文件，它在内部调用 web 服务。我可以通过 HTTP 请求调用这个 JSP。我想检查是否还有其他选择。

我正在使用 JDK1.6、JBoss 5.1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T15:55:20.127

SOAP Web 服务请求是普通的 POST HTTP 请求，您可以使用任何客户端（包括简单客户端`URLConnection`甚至`curl`. 请参阅：[*通过 URLConnection 向 Web 服务发送 SOAP 请求*](http://theholyjava.wordpress.com/2006/05/25/sending-a-soap-request-to-a-web-se/)。

您不需要 JSP（事实上，从维护的角度来看，从 JSP 调用外部 Web 服务是一个糟糕的想法）。您可以从任何 Java 代码调用 Web 服务，甚至可以直接从`main`方法调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:01:25.923

试试这个...

```
public void postData() throws Exception {

 HttpClient client = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("https://www.xyz.com");

 List<NameValuePair> list = new ArrayList<NameValuePair>(1);

 list.add(new BasicNameValuePair("name","ABC");

 httppost.setEntity(new UrlEncodedFormEntity(list));

 HttpResponse r = client.execute(httppost);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:39:04.070

我同意 Tomasz Nurkiewicz 的观点。不要使用 JSP 调用 Web 服务。

相反，创建一个调用您需要的其他 Web 服务的 Web 服务。这样，您可以在发回响应之前轻松处理结果。

使用注释可以在 JBoss 上轻松创建 Web 服务。

# sql-server - 按插入时间对记录进行排序

> ID：11417168
> 
> 赞同：0
> 
> 时间：2012-07-10T15:52:30.920
> 
> 标签：sql-server, sql-server-2005

如何按创建顺序查询数据？

我在此表中没有***创建日期的字段。***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T15:56:00.810

如果您没有存储插入时间或任何其他有关插入顺序的元数据的字段，**则没有可靠的方法来获取此信息。**

您可能依赖于聚集索引键，但不能保证这些。`IDENTITY`字段或其他自动生成的字段都不是。

澄清一下，一个`IDENTITY`字段会自动递增，但是......

*   您可以插入显式值`IDENTITY_INSERT`
*   您可以重新设定种子并开始重用值
*   身份字段没有内置的唯一性强制执行

如果 ID 字段是您的 PK，您可能可以使用它来大致了解一下：

```
SELECT *
FROM MyTable
ORDER BY IdField ASC 
```

根据您的评论，该字段是`GUID`. `GUID`在这种情况下，由于s 本质上是随机且非顺序的，因此无法返回任何可靠的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:48:56.597

您可以使用 NEWSEQUENTIALID()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-20T12:27:49.860

我遇到了这个问题，因为我面临同样的问题，这是对我有用的解决方案。

更改表并添加一`IDENTITY(1,1)`列，当您添加它时，该标识列将自动填充现有行。它将按照插入记录的顺序排列。

它适用于我的情况，但不确定它是否适用于所有情况。

# matlab - 最大递归限制 - 属性值设置回 NaN

> ID：11417174
> 
> 赞同：0
> 
> 时间：2012-07-10T15:52:54.417
> 
> 标签：matlab

我正在尝试 matlab 面向对象的编程。我有一个带有属性的类。如果属性为 NaN，则计算属性，否则返回属性。

所以我有这个部分：

```
properties 
 some_property = NaN;
end 
```

并且一个属性是这样计算的：

```
function some_property = get_some_property(obj)

if(isnan(obj.some_property))

    % do some expensive computation
    obj.some_property = ...;

end

some_property = obj.some_property; 
```

另一个 get_some_property 方法可以使用 get_some_property 方法。问题是方法调用之间的属性被设置回 NaN。这会导致错误：

最大递归限制...

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:05:35.797

您的问题是您的类不是从 派生的`handle`，因此它作为值传递。这意味着当您调用时`get_some_property`，Matlab 会忠实地复制`obj`，为函数提供一个副本，并将其`get_some_property`与调用的代码的副本分开`get_some_property`。因此，当您更改`some_property`函数`get_some_property`时，它会更改函数中值的`obj`属性，但不会更改`obj`调用它的代码中的属性。

您的问题有两种解决方案。最好的解决方案（IMO）是从`handle`. 派生自`handle`的类作为引用传递，因此当您更改 on 的属性时`obj`，它会随处更改该属性。

但是，如果您不愿意这样做，那么您可以`obj`从以下位置返回`get_some_property`：

```
function [some_property,obj] = get_some_property(obj) 
```

然后这样调用`get_some_property`：

```
[property,obj] = get_some_property(obj); 
```

这会更新`obj`调用命名空间中的值。它既尴尬又笨拙。`handle`除非有充分的理由避免它，否则我会从中派生您的课程。

# javascript - IE9 不接受此代码

> ID：11417175
> 
> 赞同：-4
> 
> 时间：2012-07-10T15:52:56.817
> 
> 标签：javascript, function, cross-browser, internet-explorer-9

我找到了这段代码，它是我问题的完美解决方案，但我发现它在 ie9 中不起作用。有谁知道如何重新编写此代码以在 IE9 中工作？这是它的javascript代码。

```
function showonlyonev2(thechosenone) {
    var newboxes = document.getElementsByTagName("div");
    for (var x = 0; x < newboxes.length; x++) {
        name = newboxes[x].getAttribute("class");
        if (name == 'newboxes-2') {
            if (newboxes[x].id == thechosenone) {
                if (newboxes[x].style.display == 'block') {
                    newboxes[x].style.display = 'none';
                }
                else {
                    newboxes[x].style.display = 'block';
                }
            } else {
                newboxes[x].style.display = 'none';
            }
        }
    }
} 
```

我在 jsFiddle 中运行它并收到此错误：第 4 行字符 9 处的问题：只读。

name = newboxes[x].getAttribute("class");

这里也是 HTML 部分（短版删除了 head 和 body 标签）：

```
<table>
   <tr>
      <td>
         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
            <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
         </div>
         <div class="newboxes" id="newboxes1" style="border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px; width: 150px;">Div #1</div>
      </td>
      <td>
         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
            <a id="myHeader2" href="javascript:showonlyone('newboxes2');" >show this one only</a>
         </div>
         <div class="newboxes" id="newboxes2" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #2</div>
      </td>
      <td>
         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
            <a id="myHeader3" href="javascript:showonlyone('newboxes3');" >show this one only</a>
         </div>
         <div class="newboxes" id="newboxes3" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #3</div>
      </td>
   </tr>
</table> 
```

这是我的 jsFiddle 视图 [http://jsfiddle.net/Nuker_Viper/JvLDx/13/](http://jsfiddle.net/Nuker_Viper/JvLDx/13/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:55:13.447

您的编辑使问题更清楚：

> 我在 jsFiddle 中运行它并收到此错误：第 4 行字符 9 处的问题：只读。
> 
> `name = newboxes[x].getAttribute("class");`

你没有`name`在任何地方声明，所以你`name`在一些包含范围内使用（可能是全局范围，例如，`window.name`）。显然 IE9 认为这是一个只读属性，尽管我找不到任何文档来支持它。

在任何情况下，您都不想与别人的变量混在一起。放在`var name;`函数的顶部，以便您使用*自己的*变量。:-)

* * *

*当我们不得不猜测出了什么问题时的原始答案：*

IE 有一个长期存在的错误，它认为该`class`属性被调用`className`，即使在`getAttribute`. IE9 在命名错误的“兼容性”模式中继续存在此错误。在标准模式下，它是正确的。

最好的办法是完全避免这个问题，因为不需要使用`getAttribute`属性`class`；改用反射属性：

```
name = newboxes[x].className; 
```

# python - 使用python进行数据包欺骗

> ID：11417180
> 
> 赞同：-1
> 
> 时间：2012-07-10T15:53:07.487
> 
> 标签：python, windows, network-programming

我正在尝试编写概念验证代码，它会自动将数据包欺骗到胖客户端应用程序。

我选择 python 作为首选语言。我找到了一些资源来帮助我使用 scapy 或其他类似的库来监控数据包。

我该如何去欺骗数据包。

例如。场景：客户端 C，服务器 S

C 向 S 发送 get 请求 R(HTTP) Proxy_python 拦截请求 R Proxy_python 制作一个 HTTP 响应 (r) Proxy_python 向 C 发送 r

本质上是 C 上的 MiTm。这可能吗？需要注意的一个条件是，我正在编写的代理不需要任何配置即可重定向到。它应该无处不在地监听所有数据包。

这让我又问了一个问题：我可以让 python 代理监听特定的 PID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:53:54.003

至少要回答有关是否可以将 PID 绑定到正在发送的数据包的问题，​​这不是数据包数据中明确包含的内容。但是，您可以确定进程在哪个端口上发送流量，并将该端口上的数据包与进程相关联。我会参考[这个问题](https://stackoverflow.com/questions/2987168/how-to-obtain-ports-that-a-process-in-listening-on)以获取有关如何获取该端口信息的一些信息。希望这会有所帮助，不确定您目前正在寻找什么。

# java - JDBC MySQL 不读取最新的插入

> ID：11417184
> 
> 赞同：1
> 
> 时间：2012-07-10T15:53:13.813
> 
> 标签：java, mysql, jdbc, prepared-statement

我编写了一个示例程序来给出这个问题的一个例子，它会导致一个旧的结果集返回。

[http://pastebin.com/QbyqUuRR](http://pastebin.com/QbyqUuRR) **（更新！）**

我正在做的工作流程是这样的：

*   在空表中执行 SELECT
*   插入一行
*   再次从该表中选择（如第一个选择） -**它仍然给我零行**

My.cnf：[http://pastebin.com/FVAjdUiM](http://pastebin.com/FVAjdUiM)使用 Percona Server 5.5（conf.d 目录为空）

来自 freenode ##java 的 ojacobson 帮助我弄清楚，这适用于他的环境，但我的实际上没有。

什么可能导致第二次选择失败？

当我在第二次 SELECT 之前重新连接到服务器时，我的测试成功了。它返回一行。

# php - 使数字范围适应最小和最大数字

> ID：11417186
> 
> 赞同：1
> 
> 时间：2012-07-10T15:53:17.270
> 
> 标签：php, logic

我有两个数字（对于这个例子，假设 695 是最小的，36000 是最大的）。目前，一旦我知道了最小值和最大值，我将差值除以 10，然后将其循环通过一个循环来创建范围。它看起来像这样：

```
$min = (int)$min-1;
$max = (int)$max;
$diff = ($max - $min) / 10;
$range = array();
for ( $i=1; $i<10; $i++){
  $range[] = array(
    "low"=>($i==1? $min: ($i*$diff) + $min),
    "high"=>($i+1)*$diff + $min
  );
}
```

当数字为 695-36000 时，这很有效。当数字接近时，有 10 个范围会变得有点麻烦。例如，最小值为 34000，最大值为 36000，范围为 34000-34200、34200-34400 等。

理想情况下，如果 695-36000 是 10 个不同的范围，那么 34000-36000 将是一个范围。

计算应该显示多少范围以及这些范围应该是什么的简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:02:10.037

这里有一点需要考虑：

```
$diff = ($max - $min) / 10;
$range_max = 2000;
if($diff>$range_max) $range_size = $range_max;
else $range_size = $diff;
$creep = ($max-$min-$range_size)/9-$diff;

$range = array();
for($i=0; $i<10; $i++) {
  $range[] = array (
    'low'  => (int)(($diff+$creep)*$i+$min),
    'high' => (int)(($diff+$creep)*$i+$min+$range_size)
  );  
} 
```

# c++ - getsockopt(...,SO_ORIGINAL_DST,...) 偶尔返回客户端地址

> ID：11417187
> 
> 赞同：4
> 
> 时间：2012-07-10T15:53:22.930
> 
> 标签：c++, linux, getsockopt

我正在开发一个接受 HTTP 请求并将它们转发到目的地的项目。我们使用 Linux (2.6.35.14-106.fc14.x86_64) 和 TPROXY。我将在下面详细介绍。

我看到的问题是偶尔（1000 次中有 1 次，有时 100 万次中有 1 次），Linux 正在返回对等地址作为目标地址。

有没有人看到这种情况发生？我在网上看到了 2007 年的一篇笔记，所以我认为这可能有点过时了。

我有以下代码（请原谅此处显示的方法不一致）：

```
struct sockaddr clientaddr;
socklen_t clientlen = sizeof(clientaddr);
int status = getpeername(acceptedSocket, &clientaddr, &clientlen);

char clientName[256];
clientName[0] = '\0';
int clientport = 0;
if (status == 0) {
    inet_ntop(AF_INET, (void *) &((struct sockaddr_in *)&clientaddr)->sin_addr, clientName, 256);
    clientport = ntohs(((struct sockaddr_in *)& clientaddr)->sin_port);
    **printf("Socket::acceptConnection: getpeername :  %s:%d\n", clientName, clientport); fflush(stdout);**
}
else
{
    LOGINFO(WARNING(352), "Socket::acceptConnection: Could not get client from accepted socket.\n");
}

status = getsockopt(acceptedSocket, SOL_IP, SO_ORIGINAL_DST, (struct sockaddr *) &destaddr, &destlen);

if (status == 0) {
    inet_ntop(AF_INET, (void *) &destaddr.sin_addr, destinationName, 256);
    int portnumber = ntohs(destaddr.sin_port);
    ssize_t dl = strlen(destinationName);
    sprintf(&destinationName[dl], ":%d", portnumber);
    **printf("Socket::acceptConnection: getsockopt :  %s\n", destinationName); fflush(stdout);**
}
else
{
    LOGINFO(WARNING(352), "Socket::acceptConnection: Could not get destination from accepted socket.\n");
} 
```

发生的情况是*大多数*时候 getpeername 和 getsockopt 报告正确（请参阅下面的 IPTABLE 配置）。

不幸的是，*偶尔*getsockopt 报告与getpeername 相同，即目的地与peer 相同。

IPTABLE 配置：

```
-A PREROUTING -p tcp -m socket -j DIVERT 
-A PREROUTING -s 10.2.0.203/32 -p tcp -m tcp --dport 80 -j TPROXY --on-port 8080 --on-ip 10.2.0.204 --tproxy-mark 0x1/0xffffffff 
-A DIVERT -j MARK --set-xmark 0x1/0xffffffff 
-A DIVERT -j ACCEPT 
```

我们已经记录了活动，它看起来不错。例如，我们得到以下输出：

```
Socket::acceptConnection: getpeername :  10.2.0.203:48517
Socket::acceptConnection: getsockopt :  10.2.0.203:48517 
```

然而，来自 IPTables 的日志显示 IP 地址是正确的：

```
Jul  9 17:37:06 2U-204 kernel: [258876.105481] IN=eth3 OUT= MAC=00:1b:21:61:03:99:00:1b:21:61:c0:70:08:00 **SRC=10.2.0.203 DST=192.168.200.206** LEN=60 TOS=0x00 PREC=0x00 TTL=64 ID=56054 DF PROTO=TCP **SPT=48517 DPT=80** WINDOW=17896 RES=0x00 SYN URGP=0
Jul  9 17:37:06 2U-204 kernel: [258876.105697] IN=eth3 OUT= MAC=00:1b:21:61:03:99:00:1b:21:61:c0:70:08:00 **SRC=10.2.0.203 DST=192.168.200.206** LEN=52 TOS=0x00 PREC=0x00 TTL=64 ID=56055 DF PROTO=TCP **SPT=48517 DPT=80** WINDOW=35 RES=0x00 ACK URGP=0 
```

我真的很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:21:14.120

你为什么用`getsockopt( ... SOL_IP, SO_ORIGINAL_DST ... )`？AFAIK`SO_ORIGINAL_DST`旨在与 NAT`REDIRECT`目标不一起使用`TPROXY`。

尝试一个简单的`getsockname()`代替。

# c - C到brainfuck编译器？

> ID：11417189
> 
> 赞同：20
> 
> 时间：2012-07-10T15:53:47.083
> 
> 标签：c, brainfuck

我有一个 C 中的基本程序，我希望将其转换为语言 Brainfsck，但找不到关于该主题的任何内容。我发现了许多“脑筋急转弯”的转换器，但反之则不然。我找到了 C2BF，但不明白如何使用它，或者这是否是我需要的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T23:20:45.367

[C2BF](http://esolangs.org/wiki/C2BF)是作为 C 源代码分发的 C 程序。

要构建 C2BF，您需要安装[svn](http://subversion.tigris.org/)、[Gnu Make](http://www.gnu.org/software/make/)和 yacc 和 flex。在您自己编译 C2BF 之后，它应该完全按照您的期望进行。

如果您使用某种 Linux 风格：

```
cd ${HOME}
svn co https://c2bf.svn.sourceforge.net/svnroot/brainfuck/c2bf/trunk c2bf
cd c2bf
sudo apt-get install bison flex # or yum install bison flex
YACC=bison make 
```

应该给你编译器`${HOME}/c2bf/cc/c2bf-cc`。

如果您使用的是 Windows，则必须安装诸如[MinGW](http://www.mingw.org/)或 cygwin 之类的东西来编译这些东西。

# android - 在 Google Play 上更新应用

> ID：11417191
> 
> 赞同：0
> 
> 时间：2012-07-10T15:53:50.647
> 
> 标签：android, upload, apk

我最近在 Android Market 中上传了一个应用程序。我已经修复了一些问题，现在尝试上传最新版本。我确定我使用`same keystore`的是相同的软件包，更高版本的代码。上传时显示如下错误：

```
The apk must be signed with the same certificates as the previous version. 
```

编辑：我已经用相同的密钥库重新生成了 apk，这次错误改变了：

```
The server could not process your apk. Try again. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:10:11.110

谷歌的服务器出了点问题。我更改了我的包名称并将其作为新的应用程序上传。

# r - 使用 R 的条件时间图？

> ID：11417194
> 
> 赞同：1
> 
> 时间：2012-07-10T15:30:41.760
> 
> 标签：r, plot

我已经使用 Grass 计算了多个区域的环境指数的一些统计值，并将它们保存为 csv 文件，目的是使用 R 根据这些值创建时间图。

我成功创建了具有以下格式的数据集：

```
> head(Dataset) 
  year month zone       min       max      mean     stddev coeff_var
1 2000     5    1 0.2735742 0.4776645 0.4300383 0.02908890  6.764259
2 2000     5    2 0.2325166 0.4304893 0.3759373 0.02497549  6.643526
3 2000     5    3 0.2747173 0.4729956 0.4295689 0.02320233  5.401307
4 2000     5    4 0.2891487 0.4878779 0.4350567 0.02775799  6.380316
5 2000     5    5 0.2757515 0.4625435 0.4201794 0.02054300  4.889103
6 2000     5    6 0.2338618 0.4670695 0.4003526 0.02451026  6.122170
.    .     .    .         .         .         .          .         .
3025 2010     9   55 0.2901262 0.5364349 0.4868686 0.03559649  7.311314 
```

如何在 R 中创建时间图，以显示特定区域的“平均值”值随时间（年、月）的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:20:34.913

如果您的数据定义如下：

```
Dataset <- data.frame(year=numeric(6), month = numeric(6), 
                      mean = numeric(6), zone = numeric(6))
Dataset$month <- c(10, 11, 12, 1, 2, 3)
Dataset$mean <- c(.43, .37, .43, .44, .42, .40)
Dataset$zone <- c(1, 1, 1, 1, 1, 1) 
```

您可以使用该函数定义具有日期对象的新列，并使用`paste`转换为日期`as.Date`。

```
Dataset$date <- as.Date(paste(Dataset$year, 
                              Dataset$month, 
                              rep("01", nrow(Dataset)), sep="-"), 
                        format="%Y-%m-%d") 
```

`plot`然后使用函数绘图

```
plot(Dataset$mean, Dataset$date) 
```

如果您只想显示一个区域，您可以在绘图时对数据集进行子集化

```
plot(Dataset$mean[Dataset$zone == 1], Dataset$date[Dataset$zone == 1]) 
```

# android - 如何从 adb 在 Android 模拟器上启动和执行 Vending.apk

> ID：11417195
> 
> 赞同：4
> 
> 时间：2012-07-10T15:53:57.753
> 
> 标签：android, shell, adb, aapt

我一直在尝试将 Vending.apk 安装到我的模拟器中，但没有成功。它说它已经存在并且当我使用 adb install -r 时无法替换它。该图标未显示在屏幕上，因此我无法点击它来启动 Google Play 市场。

因此，我认为我可以像这样使用 adb 从我的 PC (MacOSX) 运行它：

```
adb shell am start -a android.intent.action.MAIN -n com.android.vending/.Vending 
```

我根据本文中的示例构建了上述内容： [如何使用 .apk 文件运行（不仅是安装）一个 android 应用程序？](https://stackoverflow.com/questions/6109234/how-to-runnot-only-install-an-android-application-using-apk-file)

我使用此方法中的信息解压缩了 AndroidManifest.xml 文件，以查看是否可以发现活动名称，但没有运气：

```
aapt dump xmltree <apk-file> AndroidManifest.xml 
```

我想我需要知道执行自动售货 apk 的确切命令，因为我似乎找不到正确的 Activity 类。adb shell am start 不断给我错误类型 3，Activity 类不存在。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-10T15:05:59.687

你可以试试这个：

```
adb shell am start -n com.android.vending/com.google.android.finsky.activities.MainActivity 
```

# php - 从 fopen php 解析 JSON 数组

> ID：11417204
> 
> 赞同：1
> 
> 时间：2012-07-10T15:54:35.040
> 
> 标签：php, json, fopen

我在 php 中使用 fopen 来获取 JSON 响应。那么我该如何在返回的内容上使用 json decode() 呢？这是我用来获取 JSON 的代码，但 URL 被屏蔽了。这给了我一个 JSON。

```
<?php

//$cmd = "ADSFQDS";

$file_handle = fopen("xxurlxx", "r");

while (!feof($file_handle)) {

$line_of_text = fgets($file_handle);
$parts = explode('=', $line_of_text);

print $parts[0] . $parts[1]. "<BR>";
}

fclose($file_handle);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:57:34.770

只需将读取的数据传递给`json_decode()`函数。假设这`$line_of_text`是有效的**JSON**（所以它不会分成多行）：

```
$file_handle = fopen("__URL__", "r");

while(!feof($file_handle)){
    $line_of_text = fgets($file_handle);
    $json = json_decode($line_of_text, true);

    print $json["__KEY__"]. "<br>";
}

fclose($file_handle); 
```

# java - 有人将信息从 byteArray 解析为整数和字符串吗？

> ID：11417208
> 
> 赞同：2
> 
> 时间：2012-07-10T15:54:50.380
> 
> 标签：java

我正在开发一个接收带有字节数组的数据报包的应用程序，我需要获取它的信息并将其转换为对象。

我已经阅读了文档，它说存储了每个信息在字节数组上的位置，但我似乎无法将其正确解析为对象。最近有人做过类似的工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:58:45.990

我建议您查看[ByteBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html)。它允许您轻松包装一个字节数组并提取您需要的任何内容：

```
byte[] arr = ...;
ByteBuffer buff = ByteBuffer.wrap(arr);
int i = buff.getInt(); // interprets the next 4 bytes into an int 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:01:49.143

这是经常发生的事情。

如果您有职位，则每个部分都有字节数组。

因此，您可以使用[String 的构造函数将字节和字符集作为参数](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.lang.String%29)

并构造一个 int，只需执行以下操作：

```
int l = 0;
for(int i =0; i < 4; i++){      
   l <<= 8;  
   l ^= (long)b[i] & 0xFF;      
} 
```

（假设您在 Big Endian 中收到 int）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:00:06.227

您没有提供太多信息，但我建议您查看以下链接：

[如何将字节数组转换为其数值（Java）？](https://stackoverflow.com/questions/1026761/how-to-convert-a-byte-array-to-its-numeric-value-java)

对于字符串，您应该能够在构造函数中创建一个传递字节数组的新字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:00:20.750

如果您正在发送一个对象并希望在另一端接收该对象，只需使用 ObjectOutputStream 和 ObjectInputStream 进行处理。这样它就可以保持它的格式。

```
int I;
ObjectOutputStream.write(I)

int j;
J = (int)ObjectInputStream.read() 
```

# xml - XSLT 文档($variable) 从不同的服务器加载文件

> ID：11417211
> 
> 赞同：0
> 
> 时间：2012-07-10T15:55:05.027
> 
> 标签：xml, xslt, subdomain

我在使用 XML document() 调用时遇到了一个非常奇怪的问题。

我的代码很简单，但结果很奇怪。我创建了一系列变量来描述特定文件的路径。然后我使用 document($varname) 来引入文件。它可以工作，但会从我们的子域之一而不是我想要的子域中引入文件。

这是代码：

```
<xsl:variable name="serverSecure" >https://www.mywebsite.com</xsl:variable>
<xsl:variable name="dirCorrected"><xsl:value-of select="normalize-space(translate($dir, '\', '/'))" /></xsl:variable>
<xsl:variable name="form" ><xsl:value-of select="$serverSecure" /><xsl:value-of select="$dirCorrected" />html/<xsl:value-of select="/page/@name" />.html</xsl:variable> 
```

页面加载时，它不会显示位于[https://www.mywebsite.com/somedir/form/html/](https://www.mywebsite.com/somedir/form/html/)的文件，而是显示来自 https:// **wwwtest** .mywebsite.com/somedir/form的页面/html/。

在我们将其启用之前，该服务器作为测试服务器运行，但我们在各处更改了配置。我再也找不到任何指向测试域的东西了。

非常感谢任何和所有帮助！

编辑：有人告诉我，我在原始帖子中没有 document() 函数，对此感到抱歉。稍后在 XSL 中调用它：

```
<xsl:copy-of select="document($form)"/> 
```

为了测试它，我调用了 $form 变量的 value-of：

```
<xsl:value-of select="$form" /> 
```

输出是我所期望的，它显示了正确通向 www 服务器的路径。但实际显示的 HTML 文件是来自 wwwtest 子域服务器的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:55:42.300

好吧，所有人都可以肯定地说，问题不在于您向我们展示的那段代码。某处的东西正在拦截请求并重定向它。跟踪问题将是一个逐步消除的过程——我要做的第一件事是尝试在不涉及任何 XSLT 代码的情况下重现问题：当您在浏览器中或从 curl 中使用相同的 URI 时会发生什么？

# java - DbUnit NoSuchTableException - Oracle 中长表名的解决方法

> ID：11417213
> 
> 赞同：2
> 
> 时间：2012-07-10T15:55:06.193
> 
> 标签：java, sql, oracle, dbunit

我正在使用 dbunit xml 创建一个在多个数据库上运行的测试套件。不幸的是，昨天我发现我们架构中的一些表名超过 30 个字符，并且被截断以供 Oracle 使用。例如，`unusually_long_table_name_error`在 mysql 中命名的表`unusually_long_table_name_erro`在 Oracle 中命名。这意味着我的 dbunit 文件包含类似`<unusually_long_table_name_error col1="value1" col2="value2 />`. `NoSuchTableException`在 Oracle 中运行测试时，这些行会抛出一个错误。

是否有针对此的程序化解决方法？我真的很想避免为 Oracle 生成特殊的 xml 文件。我研究了一个自定义`MetadataHandler`，但它返回了很多`java.sql`我不知道如何拦截/欺骗的数据类型。我可以自己读取 xml，将每个表名截断为 30 个字符，将其写入临时文件，或者`StringBufferInputStream`然后将其用作 DataSetBuilder 的输入，但这似乎需要很多步骤才能完成的很少。也许有一些具有同义词或存储过程的忍者 Oracle 技巧或天知道还有什么可以帮助我。这些想法之一明显优于其他想法吗？有没有其他的方法会因其简单和优雅而让我大吃一惊？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:02:34.590

鉴于缺乏答案，我最终采用了我自己建议的方法，即

1.  读取 .xml 文件
2.  正则表达式的表名
3.  如果超过 30 个字符，则截断表名
4.  将（可能修改的）行附加到 StringBuilder
5.  将 StringBuilder 提供给 ByteArrayInputStream，适合传递给 DataSetBuilder

* * *

```
public InputStream oracleWorkaroundStream(String fileName) throws IOException
{
  String ls = System.getProperty("line.separator");

  // This pattern isolates the table name from the rest of the line
  Pattern pattern = Pattern.compile("(\\s*<)(\\w+)(.*/>)");

  FileInputStream fis = new FileInputStream(fileName);
  // Use a StringBuidler for better performance over repeated concatenation
  StringBuilder sb = new StringBuilder(fis.available()*2);

  InputStreamReader isr = new InputStreamReader(fis, "UTF-8");
  BufferedReader buff = new BufferedReader(isr);
  while (buff.ready())
  {
    // Read a line from the source xml file
    String line = buff.readLine();
    Matcher matcher = pattern.matcher(line);

    // See if the line contains a table name
    if (matcher.matches())
    {
      String tableName = matcher.group(2);
      if (tableName.length() > 30)
      {
        tableName = tableName.substring(0, 30);
      }

      // Append the (potentially modified) line
      sb.append(matcher.group(1));
      sb.append(tableName);
      sb.append(matcher.group(3));
    }
    else
    {
      // Some lines don't have tables names (<dataset>, <?xml?>, etc.)
      sb.append(line);
    }
    sb.append(ls);
  }

  return new ByteArrayInputStream(sb.toString().getBytes("UTF-8"));
} 
```

编辑：从重复的字符串连接切换到 StringBuilder，这提供了巨大的性能提升

# c# - 了解调度程序队列

> ID：11417216
> 
> 赞同：18
> 
> 时间：2012-07-10T15:55:13.807
> 
> 标签：c#, wpf, asynchronous, dispatcher, method-invocation

我想我需要一些帮助来理解**Dispatcher Queue**。

当新工作到达时，它会被添加到调度程序队列的开头，而当调度程序想要处理一个工作项时，它会从开头删除。

更一般地说：如果有工作，它会以先进先出的方式存储在队列中，只要没有工作就处理。

[此处](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)的 MSDN 文档指的是 a`loop`和 a `frame`：

`The Dispatcher processes the work item queue in a loop. The loop is referred to as a frame.`

但是在这种情况下，循环在哪里？对我来说，循环是对某些东西进行迭代的东西，当它到达终点时，它会重新开始。

a 的概念是`frame`什么？根据 MSDN 文档，一个框架是队列中工作项的一拳？如果这是真的，应该如何使用静态方法`Disptatcher.PushFrame()`？

最有趣的问题是是否有任何方法可以获取队列的当前状态，尤其是队列中有多少项。

如果之前调用的方法（并因此放入 Dispatcher 队列）被执行，然后立即从队列中删除，或者它是否持续在另一个时间段内，它是否成立？

我知道，有很多问题:-)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-10T18:40:13.917

周围的文档很少`Dispatcher`，因此您必须拆解一下才能了解内部工作原理。

调度程序基本上是围绕应用程序的 [消息泵](http://en.wikipedia.org/wiki/Event_loop)执行工作的东西。有问题的那个位于[windows 消息循环](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)的顶部。

因此，只能有一个应用程序 Dispatcher - 可访问的全局 Dispatcher 对象`Application.Current.Dispatcher`。其他调度程序可以通过访问`Dispatcher.CurrentDispatcher`，根据文档

> 获取当前正在执行的线程的 Dispatcher，如果尚未与线程关联，则创建一个新的 Dispatcher。

但是，调用`Run`这个新的调度程序将被阻塞。

当您执行 a`Dispatcher.PushFrame`时，它会将内部执行循环推入 Dispatcher - 这是[frame](https://docs.microsoft.com/en-us/dotnet/api/system.windows.threading.dispatcherframe?view=netframework-4.8#remarks)的一般概念。`DispatcherObject`从诸如继承的任何东西`DispatcherFrame`都将其调度程序设置为当前调度程序。我们可以通过查看它的构造函数来验证这一点。

```
private Dispatcher _dispatcher;

protected DispatcherObject()
{
    this._dispatcher = Dispatcher.CurrentDispatcher;
} 
```

当然，只有一个简单的事件循环是不够的——有时你需要颠覆当前的事件循环来强制完成其他工作。这就是为什么你有一个`DispatcherFrame`. 这实际上构成了事件循环。当您将帧推入 Dispatcher 时，会发生以下情况：

```
while (frame.Continue)
        {
            if (!this.GetMessage(ref msg, IntPtr.Zero, 0, 0))
            {
                break;
            }
            this.TranslateAndDispatchMessage(ref msg);
        } 
```

在`TranslateAndDispatchMessage`取出消息后，对 Dispatcher 中的优先队列进行评估。

如果一个操作在调度程序上运行需要很长时间，它会暂时停止事件循环，并且由于它不响应信号，应用程序似乎停止响应。

[这是一篇文章](http://www.codeproject.com/Articles/152137/DispatcherFrame-Look-in-Depth)，它使用框架通过允许事件循环快速运行来强制 UI 响应。

至于访问队列，照原样，在Dispatcher之外没有办法知道队列的状态。这是内部细节，不暴露在情理之中。

# python - Sphinx autodoc 给出警告：py:class reference target not found: type warning

> ID：11417221
> 
> 赞同：20
> 
> 时间：2012-07-10T15:55:29.287
> 
> 标签：python, python-sphinx, metaclass, autodoc

我有一些在 python 中使用元类的代码。但是当 sphinx autodoc 运行时，它会给出错误：

`WARNING: py:class reference target not found: type`

错误发生在自动生成的 .rst 文件的一行中：

```
.. automodule:: API.list.blockList
    :members: # this is the line in error
    :show-inheritance: 
```

并且 blockList 扩展了已`\__metaclass__`设置为我的元类的 API.list.list。

据我所知，sphinx 认为内置类型类不存在。我尝试导入内置类型以使 sphinx 意识到它的存在，但没有奏效。

如果我从 API.list.list 中删除元类分配，并从代码中删除元类，那么 sphinx 就可以正常工作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-06-03T15:10:12.740

这只是 Python 文档本身中的一个错误——对某些 Python 内置函数（包括`type`）的引用无法正确解析（例如，参见[https://bugs.python.org/issue11975](https://bugs.python.org/issue11975)）。

要使警告消失，您可以将该[`nitpick_ignore`](http://sphinx-doc.org/config.html#confval-nitpick_ignore)选项添加到您的 Sphinx 配置中。例如在 Astropy 项目中，我们有：

```
nitpick_ignore = [('py:class', 'type')] 
```

事实上，有足够多的例外，我们只是将它们全部放在一个单独的文件中，然后再从中读出。看：

[https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/conf.py#L195](https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/conf.py#L195)

对于异常文件本身：

[https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/nitpick-exceptions](https://github.com/astropy/astropy/blob/35501fcba6811705fcd53669742db8346727672d/docs/nitpick-exceptions)

上述文件中的许多异常是特定于 Astropy 的，但其他一些异常解决了 Python 和 Numpy 中的一些损坏的引用，并且可能通常很有用。

# php - Feed 对话框直接 URL 在 IE 中不起作用

> ID：11417226
> 
> 赞同：0
> 
> 时间：2012-07-10T15:55:53.510
> 
> 标签：php, facebook, internet-explorer, header

此 PHP 标头函数适用于除 IE 以外的所有浏览器。它将 Facebook 提要对话框加载到 Facebook (iframe) 内的画布页面中。

在 IE 中：

标题在 Facebook 中加载，但不是实际的提要对话框，只是一个蓝色框，说明“发生错误”，没有该错误的具体细节。

所有其他浏览器的标题都按预期工作，并在画布框架内加载页面。

该脚本将表单的结果插入 MySQL 数据库，如果成功，则标头会将用户重定向到提要对话框。

因此，我担心问题在于 IE 处理变量`$feeddialogurl`，或者 IE 是否存在一些阻止它加载的安全限制。

*更新 - 经过更多测试后，标头按预期工作，直接粘贴到 IE 时 URL 工作。

请问您还有什么建议吗？

```
$feeddialogurl = "https://www.facebook.com/dialog/feed?
app_id=254705324634259&".$applink."&
picture=".$apppicture."&
name=".$appname."&
caption=".$appcaption."&
description=".$appdescription."&
redirect_uri=".$redirecturi;

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
else
{
header("Location: $feeddialogurl");
exit;
}
mysql_close($con);
ob_end_flush(); 
```

请参阅下面 IE 中的错误消息。提要对话框被加载到应用程序框架中（因此复制了 Facebook 顶部菜单栏）这适用于所有其他浏览器栏 IE。

![IE 中的错误](../Images/4b15c524852293f87aef3f9e44d270bc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:44:39.023

我已经通过使用 Fb.UI Javascript 方法解决了这个问题。

在此处阅读更多信息：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# php - 在它旁边按下一个相同的数组键

> ID：11417230
> 
> 赞同：2
> 
> 时间：2012-07-10T15:56:20.720
> 
> 标签：php, arrays

问题是这样的...

现有数组：

```
Array(
    [0] => array('sample 1', 'sample 2')
    [1] => array('cat', 'dog')
) 
```

另一个数组：

```
Array(
    [0] => array('sample 3', 'sample 4')
) 
```

我想要将它添加到 0 键旁边，所以它变成了：

```
Array(
    [0] => array('sample 1', 'sample 2')
    [1] => array('sample 3', 'sample 4')
    [2] => array('cat', 'dog')
) 
```

你怎么做到这一点？

@maxhud 我试过了，结果是这样的：

```
Array(
[0] => sample 1
[1] => sample 2
[2] => sample 3
[3] => sample 4
[4] => cat
[6] => dog
) 
```

这是我当前的代码片段

```
$new_post_order = array();
foreach($the_query['posts'] as $the_post) {
$portfolio_reorder = '';
$portfolio_reorder = get_post_meta($the_post['ID'], 'portfolio_reorder', true); // Get the order on the db
if(empty($portfolio_reorder)) { // If its empty...
 $portfolio_reorder = 0; // Add default order                           
}
 array_splice($new_post_order, $portfolio_reorder, 0, $the_post);
}

echo '<pre>';
print_r( $new_post_order );
echo '</pre>'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T15:57:35.533

您可以通过以下方式完成此操作`array_splice`：

[http://php.net/manual/en/function.array-splice.php](http://php.net/manual/en/function.array-splice.php)

例子：

```
$input = array("red", "green", "blue", "yellow");
array_splice($input, 3, 0, "purple");
// $input is now array("red", "green",
//          "blue", "purple", "yellow"); 
```

自己尝试一下，如果您无法弄清楚，请发表评论，我们会为您提供帮助。

```
array_splice($new_post_order, $portfolio_reorder, 0, array($the_post)); 
```

# c# - 将任何 Excel 电子表格导入 DataGridView - C#

> ID：11417231
> 
> 赞同：3
> 
> 时间：2012-07-10T15:56:23.030
> 
> 标签：c#, excel, datagridview, dataset

我有一个将 excel 电子表格导入 datagridview 的程序。我编写的代码如下：

```
try
                {
                    OleDbConnectionStringBuilder connStringBuilder = new OleDbConnectionStringBuilder();
                    connStringBuilder.DataSource = file;
                    connStringBuilder.Provider = "Microsoft.Jet.OLEDB.4.0";
                    connStringBuilder.Add("Extended Properties", "Excel 8.0;HDR=NO;IMEX1");

                    DbProviderFactory factory = DbProviderFactories.GetFactory("System.Data.OleDb");

                    DbDataAdapter adapter = factory.CreateDataAdapter();

                    DbCommand selectCommand = factory.CreateCommand();
                    selectCommand.CommandText = "SELECT * FROM [All Carpets to Excel$]";

                    DbConnection connection = factory.CreateConnection();
                    connection.ConnectionString = connStringBuilder.ConnectionString;

                    selectCommand.Connection = connection;

                    adapter.SelectCommand = selectCommand;

                    data = new DataSet();

                    adapter.Fill(data);

                    dataGridView1.DataSource = data.Tables[0].DefaultView;

                }
                catch (IOException)
                {

                } 
```

行 "selectCommand.CommandText = "SELECT * FROM [All Carpets to Excel$]";" 从具有该名称的工作表中获取数据。我想知道如何让这个程序打开一个带有任何工作表名称的 excel 文档。一个我可能不知道的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:09:30.590

您可以像这样获取所有工作表的名称..

```
public string[] GetExcelSheetNames(string excelFileName)
{
        OleDbConnection con = null;
        DataTable dt = null;
        String conStr = "Provider=Microsoft.Jet.OLEDB.4.0;" + "Data Source=" + excelFileName + ";Extended Properties=Excel 8.0;";
        con= new OleDbConnection(conStr);
        con.Open();
        dt = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

        if (dt == null)
        {
            return null;
        }

        String[] excelSheetNames = new String[dt.Rows.Count];
        int i = 0;

        foreach (DataRow row in dt.Rows)
        {
            excelSheetNames[i] = row["TABLE_NAME"].ToString();
            i++;
        }

        return excelSheetNames;
} 
```

# javascript - 类似按钮的沙盒应用的应用 ID

> ID：11417234
> 
> 赞同：1
> 
> 时间：2012-07-10T15:56:35.473
> 
> 标签：javascript, facebook

我想在页面上添加一个赞按钮。我设置了一个应用程序，但它是沙盒的。如果我使用沙盒应用 ID 初始化 api，点赞按钮是否仍然有效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:59:56.267

在您的案例中，Facebook Like 功能与感兴趣的应用程序是分开的。

Like 按钮可以链接到 URL 或页面，而不需要 Facebook 应用程序。然后，所有引用的喜欢都被传递到相应的链接内容，而不是通过应用程序来这样做。

祝你好运！

# mysql - 根据来自另一个表的连接更新 MySQL NULL 值

> ID：11417237
> 
> 赞同：0
> 
> 时间：2012-07-10T15:56:42.293
> 
> 标签：mysql

我有两张表，一张 Master 和一张 ExtraData。两个表共享列`FirstName, LastName, Gender and A_Id`。

我正在处理的查询应该比较两个表和Master 中使用Extra的`UPDATE`任何 NULL 值。`A_Id``A_Id`

做这个的最好方式是什么？我可以比较`CONCAT(FirstName, LastName, Gender)`，但我坚持如何根据`JOIN`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:59:26.117

您可以在连接中使用许多条件，然后只需将一个源表中的列设置为另一个表中列的值：

```
UPDATE Master 
JOIN ExtraData 
  ON Master.FirstName = ExtraData.FirstName
  AND Master.LastName = ExtraData.LastName
  AND Master.Gender = ExtraData.Gender
SET Master.A_Id = ExtraData.A_Id 
WHERE Master.A_Id IS NULL 
```

请注意，可以使 JOIN 条件更简洁（因为列的名称相同）：`JOIN ExtraData USING (FirstName, LastName, Gender)`

# list - Prolog - 元素索引

> ID：11417238
> 
> 赞同：2
> 
> 时间：2012-07-10T15:56:45.443
> 
> 标签：list, indexing, prolog, element

我必须在列表中找到给定元素的所有索引并将其作为列表返回。例如：

```
?- indexList(a,[a,b,c,a,b],Rs).
Rs = [0,3] 
```

我的想法是：

```
positions( E, L, P ) :- positions( E, L, 0, Rs ).
positions( E, [], _, [] ).
positions( E, [E|Xs], P, [P|PT] ) :- P1 is P + 1, positions( E, Xs, P1, PT ).
positions( E, [X|Xs], P, PT ) :-  P1 is P+1, positions( E, Xs, P1, PT ). 
```

当我跟踪这个时，我得到一个列表，其中每个位置都在其中（在最后一步之前的步骤中）。但是在最后的步骤中，他以某种方式对其进行了更改并返回了真值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:10:00.960

你在第一行犯了一个小错误。您正在调用`positions(E, L, 0, Rs)`，但最后一个参数应该是`P`, 以便与从子句开头同名的最后一个参数进行绑定。所以第一行应该是这样的：

```
positions(E, L, P) :- positions(E, L, 0, P). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:10:26.457

您的问题是，而不是使用`Rs`来返回您正在使用的职位列表`P`。您应该已经看到了一个 lint 警告（单例变量 P 和 Rs），`positions/3`其中应该警告过您这一点。

此外，在您的第三个子句中，`positions/4`您应该检查 E 是否不同于 X：

```
positions( E, L, Rs ) :- positions( E, L, 0, Rs ).
positions( E, [], _, [] ).
positions( E, [E|Xs], P, [P|PT] ) :- P1 is P + 1, positions( E, Xs, P1, PT ).
positions( E, [X|Xs], P, PT ) :-  E\=X, P1 is P+1, positions( E, Xs, P1, PT ). 
```

# c# - LINQ 等于 - 它在幕后调用了什么？

> ID：11417245
> 
> 赞同：2
> 
> 时间：2012-07-10T15:57:04.803
> 
> 标签：c#, .net, linq, .net-3.5

我在几个地方读到 LINQ 等于（在连接语法中）调用 IEquatable 来比较它的类型，但我没有看到它在我的连接中发生：

```
List<ILData> list1 = new List<ILData> { /* Initialized with items */ };
List<ILData> list2 = new List<ILData> { /* Initialized with items */ };

var joinItems = (
    from d1 in list1
        join d2 in list2
        on d1 equals d2
    where d1.SomeValue == "7"
    select d1).Distinct().ToList<ILData>(); 
```

假设我提供了一个满足的接口定义：

```
ILData : IEquatable<ILData> 
```

要求，为什么在这种情况下我不会看到 ILData::Equals 被调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:07:21.970

它使用`EqualityComparer<T>.Default`. 由于您的类型 implements `IEquatable<T>`，实际使用的比较器将是一个名为 的内部类 `System.Collections.Generic.GenericEqualityComparer<T>`，它将分别委托`GetHashCode`和`Equals`请求您的`object.GetHashCode`方法和`IEquatable<ILData>.Equals`方法（引用除外`null`，它返回零哈希码/不调用您方法）。

有很多原因可以解释你的`Equals`方法没有被击中：

1.  这里有一个空序列。
2.  你的断点在`object.Equals`而不是`IEquatable<ILData>.Equals`
3.  第二个序列只包含`null`引用（这是由框架比较器检查的，所以它不会进入你的）。
4.  没有哈希匹配（来自`GetHashCode`），因此连接操作永远不需要进行完全相等检查。可能发生这种情况的一个原因是您忘记覆盖此方法，因此坚持使用默认的 from `object`（它是为引用相等而设计的，并且与您对相等的定义不一致）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:11:12.620

[Join 函数](http://msdn.microsoft.com/en-us/library/bb534675.aspx)说它使用[默认的相等比较](http://msdn.microsoft.com/en-us/library/ms224763.aspx)器。除了实现 IEquatable 之外，您还需要覆盖 object.GetHashCode（并且应该覆盖 object.Equals）。

一般来说，查询

```
from AA in AAAA
join BB in BBBB
on C(AA) equals D(BB)
select E(AA,BB) 
```

翻译成

```
AAAA.Join(BBBB, AA => C(AA), BB => D(BB), (AA, BB) => E(AA, BB)) 
```

# django - 如何在所有产品的管理员中显示列表，以便启用和禁用对实时站点的查看？

> ID：11417247
> 
> 赞同：0
> 
> 时间：2012-07-10T15:57:19.483
> 
> 标签：django, filter, django-admin, admin

我需要添加一种方法来查看输入到该站点的所有产品。现在，它们通过启用=True 进行过滤，这仅显示启用的产品。我希望能够列出所有产品并在管理员中启用和禁用它们。提前致谢！

模型：

```
class ProductManager(models.Manager):
    """
    Filters enabled product
    """

    def get_query_set(self):
        return super(ProductManager, self).get_query_set().filter(is_enabled=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:33:52.143

Django 文档对此非常明确。特别是如果您是 Django 世界的新手，您应该像温暖的毯子一样将自己包裹在文档中。如果您有时间（尽量腾出时间），请通读它们，但如果您不能，只需使用“django”搜索 Google 以及您遇到的任何问题。99% 的情况下，第一个结果是来自 Django 文档的页面，其中包含您需要的信息。

也就是说，[文档在这个问题上说](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)：

> 如果您使用自定义 Manager 对象，请注意 Django 遇到的第一个 Manager （按照它们在模型中定义的顺序）具有特殊状态。Django 将类中定义的第一个管理器解释为“默认”管理器，并且 Django 的几个部分（包括转储数据）将专门为该模型使用该管理器。**因此，最好谨慎选择默认管理器，以避免覆盖 get_query_set() 导致无法检索您想要使用的对象的情况。**（强调我的）

这正是你正在经历的。再看上面引文的第一句话。Django 使用它遇到的第一个管理器作为其机器各个部分的“默认”管理器，包括管理员。*因此解决方案是在您的自定义管理器之前*简单地添加一个非过滤管理器。最好的方法是简单地使用 Django 自动添加的标准管理器，如果您不提供自己的。

```
objects = models.Manager()
product_manager = ProductManager() 
```

完毕。管理员现在将列出所有产品，因为它将使用第一个标准管理器作为默认值。

# java - Android - HTML Parsing vs JavaScript - 什么是有效的方法？

> ID：11417252
> 
> 赞同：0
> 
> 时间：2012-07-10T15:57:30.793
> 
> 标签：java, javascript, android, html, parsing

我正在从站点的页面（生成并且我无法控制）中获取数据我最关心的页面部分是头部，如下所示

```
<script type="text/javascript">  
Item.id       = '11457';
Item.comments = [{"score":9,"comment_id":291622,"comment":"For RDM this offers the most haste for the feet, beating the haste+3 from dusk+1.","date_posted":"2011-09-22 08:37:19","char_id":724996,"deleted":0,"type":"item","user_char_id":91314,"avatar":"724996_N9Bdg4hpuP.jpg","user_id":54878,"char_name":"Moogleking","server_name":"Shiva","rating":null,"ident_id":96474,"reports":null,"dismiss":null}, ...] 
```

和其他杂项。由他们的跨度 ID 标识的信息。

我只是想知道在 Android 编程中收集数据的正确/有效方法是什么？是在 DOM 中解析 html 吗？它是否坚持使用 WebView/JavaScript 界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:58:48.820

[http://htmlcleaner.sourceforge.net/](http://htmlcleaner.sourceforge.net/)

它解析所有具有 xml 表单（HTML、XML、XSLT）、开源、快速且非常轻量级的内容。它可能没有文档，但网络支持非常详细。

根据我的经验，WebView 加载速度非常慢，所以我不建议这样做。

# .htaccess - htaccess 规则 - 代替符号链接文件

> ID：11417253
> 
> 赞同：1
> 
> 时间：2012-07-10T15:57:32.763
> 
> 标签：.htaccess

我正在处理这个遗留项目，它有一个相当奇怪的设置，我希望摆脱它，但我的 htaccess 技能在这个部门有点缺乏。

这是目录结构。

```
/index.php
/www
  page1.php -> symlink to index.php
  page2.php -> symlink to index.php
  page3.php -> symlink to index.php 
```

/www 是公共目录，人们访问`http://site/page1.php`。但是，每个带有 * 的文件实际上都是指向 /index.php 的符号链接。

我觉得这种安排很愚蠢，想摆脱符号链接，只需简单地让任何 /www/*.php 请求指向 index.php，而页面实际上不会重定向到 index.php。

有关可以解决此问题的 htaccess 规则的任何想法？在其最基本的核心，我想保留相同的功能，而不必拥有一千个符号链接文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:28:40.730

看起来该`index.php`文件*不在*您的文档根目录中（我假设是`www`），因此，我认为您无法从 .htaccess 文件中执行此操作。为了访问文档根目录之外的内容，您需要在服务器配置或虚拟主机配置中设置别名：

```
# Somewhere in vhost/server config
Alias /index.php /var/www/path/to/index.php

# We need to make sure this path is allowed to be served by apache, otherwise
# you will always get "403 Forbidden" if you try to access "/index.php"
<Directory "/var/www/path/to">
        Options None
        Order allow,deny
        Allow from all
</Directory> 
```

现在您应该可以访问`/var/www/path/to/index.php`. 请注意，/var/www/path/to 目录中的其他文件是安全的，只要您不创建指向它们的`Alias`（或`AliasMatch`或）。`ScriptAlias`现在您可以通过URI 访问**index.php**`/index.php`，您可以在文档根目录 (www) 的 .htaccess 文件中设置一些 mod_rewrite 规则，以将内容指向 index.php：

```
# Turn on the rewrite engine
RewriteEngine On

# Only apply the rule to URI's that don't map to an existing file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all requests ending with ".php" to "/index.php"
RewriteRule ^(.*)\.php$ /index.php [L] 
```

这将使得当您请求**http://site/page1.php**`/index.php`时，浏览器的地址栏不变，但服务器实际提供`/var/www/path/to/index.php`.

如果需要，您可以将正则表达式调整为`^(.*)\.php$`更合适的内容。这仅匹配以 a 结尾的任何内容`.php`，包括`/blah/bleh/foo/bar/somethingsomething.php`. 如果要限制目录深度，可以将正则表达式调整为`^([^/]+)\.php$`等。

# php - 将 LESS 用于 WordPress 主题选项

> ID：11417264
> 
> 赞同：3
> 
> 时间：2012-07-10T15:58:03.193
> 
> 标签：php, css, wordpress, wordpress-theming, less

好奇是否有人尝试过这样的事情/是否可行：

许多高级 WordPress 主题允许管理员更改主题设置，如颜色和版式，然后（通常）将 CSS 直接注入标题以覆盖默认值或在多个预设样式表之间切换。

是否可以允许管理员改为使用主题选项来设置基色、排版规则等，然后使用这些设置 LESS/SASS 变量并运行编译器以生成一个全新的 style.css 文件，该文件将是使用这些变量代替默认值进行重建（显然我们还想要一种恢复默认值的方法）。

我认为这应该是可能的（并且实际上可能是一种很棒的轻量级方法，可以进行一些非常高级的自定义），但我很好奇是否有人尝试过类似的东西以及我可能遇到的潜在缺点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:11:47.240

这当然是可能的，尽管我从未亲自做过。我会从一个少 PHP 的编译器开始，比如[LESS PHP](https://github.com/leafo/lessphp)，并使用它来编译主题样式表并根据 WordPress 管理菜单中设置的选项重新编译。

# javascript - 我可以将文件传递到浏览器然后用 javascript 操作它吗？

> ID：11417266
> 
> 赞同：1
> 
> 时间：2012-07-10T15:58:08.210
> 
> 标签：javascript, browser

我知道不允许在浏览器中运行的 javascript 直接访问本地文件系统，这是有道理的，我不是在寻找违反它的方法。

但是，是否有任何安全和洁净的方法可以从本地系统中获取文件供浏览器使用？这些方法会特定于平台吗？我是否会受到限制，哪些类型的文件必须根据每个文件授予访问权限？

我在想的是，当您上传照片时，它会打开一个系统级对话框，然后最终将该文件呈现给浏览器，以便浏览器通过 http 发送到远程服务器。那么是否可以将文件传递到浏览器本地内存/授予浏览器读取它的权限，因为它是要上传的，而不是上传它以某种方式传递给 java 脚本并允许它在客户端大量操作它您可以使用服务器端 javascript 操作文件的方式？

我问的原因是因为我最近对基于浏览器的文件操作程序、它们的可行性以及在 Chrome OS 类型环境中可以用它们做什么感兴趣。只是出于好奇，然后任何想法很快就会变得实用。

编辑：试图澄清并使我的问题更直接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:00:50.047

使用[File API](http://www.w3.org/TR/FileAPI/)（MDN 有[一个教程](https://developer.mozilla.org/en/Using_files_from_web_applications)），但要注意它是一个新规范，并且对[浏览器的支持有限](http://caniuse.com/#search=file+api)。

它允许`<input type="file">`使用客户端 JS 访问在 an 中选择的文件。

# r - 在R中的绘图区域之外绘制点

> ID：11417269
> 
> 赞同：2
> 
> 时间：2012-07-10T15:58:12.060
> 
> 标签：r, plot

我想在 R 中绘图的绘图区域之外添加点（星号）。但是，以下代码只允许在绘图区域内添加点：

```
x = c(1:10)
y = c(1:10)
plot(x,y)
points(11, 7, pch = 8) 
```

如何调整代码以允许在绘图区域之外绘制点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:01:34.213

[这篇](https://stackoverflow.com/questions/3932038/plot-a-legend-outside-of-the-plotting-area-in-base-graphics)SO 帖子可能会有所帮助！这是关于传说的，但您可能可以将相同的方法应用于您想要的。

这对我有用：

```
> par(xpd=TRUE)
> x = c(1:10)
> y = c(1:10)
> plot(x,y)
> points(11, 7, pch = 8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:03:18.363

单程：

```
plot(1:10, 1:10)
par(new = TRUE, mar = c(0,0,0,0))
plot(1:10, 1:10, xaxt = 'n',yaxt='n') 
```

# .net - 将数据网格绑定到表并显示父表中的字段

> ID：11417270
> 
> 赞同：0
> 
> 时间：2012-07-10T15:58:25.760
> 
> 标签：.net, vb.net, winforms, data-binding, dataset

在 WinForms 应用程序的以下场景中绑定数据网格的最佳策略是什么。假设，我有一个带有表的强类型数据集：

```
Table1 (T1_ID, T1_VALUE) <--* Table2 (T2_ID, T1_ID, T2_VALUE) <--* Table3(T3_ID, T2_ID, T3_VALUE) 
```

我想将一个数据网格绑定到 Table3，并显示 Table2 和 Table1 中的字段，并能够过滤、按所有列排序：

```
T3_VALUE | T2_VALUE | T1_VALUE 
```

在这种情况下，常见的绑定方法是什么？

我看到以下替代方案：

1.  添加计算列：
    `Table2.T1_VALUE = PARENT(T2_T1).T1_VALUE`
    `Table3.T2_VALUE = PARENT(T3_T2).T2_VALUE`
    `Table3.T1_VALUE = PARENT(T3_T2).T1_VALUE`
    其中 T2_T1、T3_T2 - 关系名称。
    这似乎是正确的方法，但我担心使用仅用于 UI 目的的冗余计算列污染干净的数据模型（在代码中的其他地方我仍然会使用`Table3Row.Table2Row.Table1Row.T1_VALUE`

2.  使用Linq查询数据集并从不同的表中获取列但是在这种情况下，网格将无法将数据写入table3并进行排序。

3.  将网格绑定到 Table3 并处理呈现单元格的事件，并从那里的父表输出值。网格可以写入Table3，但不能排序（我使用的是syncfusion网格，但我认为它没有任何区别）

4.  实现一个可以显示来自多个表的数据的视图，并更新主表。我没有朝这个方向挖掘，它似乎太复杂了。可能吗？

正如我所指出的，使用计算列可以解决所有问题，并且似乎是解决问题的最简单方法。但也许有更优雅和正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:35:21.690

我经常从面向对象的角度来处理这些事情。我将创建一个对象，它具有您想要的所有属性并绑定到这些对象的集合。如果您想要两种方式的数据绑定，您可以使用 ObservableCollection 来允许网格获取对集合的更改并在对象的属性上实现 IPropertyChanged。通常，表 1 和表 2 中的属性只能在对象上读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:56:00.533

使用 Syncfusion GridGroupingControl，**UnboundFields**集合将帮助您轻松实现此要求。Table3 可以绑定到网格，需要从其他 2 个表引用的字段可以作为 UnboundFields 添加到 GridGroupingControl。可以通过处理**QueryValue**事件来填充这些值。

```
//On Load of Windows Form
DataSet ds = new DataSet();
ds.Tables.AddRange(new DataTable[] { dt1, dt2, dt3 }); //dt1, dt2 and dt3 are Table1, Table2 and Table3 respectively
this.gridGroupingControl1.DataSource = ds.Tables[2]; // Table3 bounded
this.gridGroupingControl1.TableDescriptor.UnboundFields.Add("T1_VALUE"); // column from Table1
this.gridGroupingControl1.TableDescriptor.UnboundFields.Add("T2_VALUE"); // column from Table2
this.gridGroupingControl1.QueryValue += new Syncfusion.Grouping.FieldValueEventHandler(gridGroupingControl1_QueryValue); 
```

如果您希望在运行时允许将修改后的数据保存在这些字段中，可以另外处理**SaveValue**事件，并且可以使用更新的值设置基础数据行（QueryValue 事件代码的反向）。

```
//Method Invoked to populate unbound fields with respective values
void gridGroupingControl1_QueryValue(object sender, Syncfusion.Grouping.FieldValueEventArgs e)
{
   if (e.Field.Name == "T1_VALUE")
      e.Value = dt1.Rows[e.Record.GetSourceIndex()][e.Field.Name];
   else if (e.Field.Name == "T2_VALUE")
      e.Value = dt2.Rows[e.Record.GetSourceIndex()][e.Field.Name];
} 
```

这些未绑定的字段还支持排序和过滤。

# html - 较大可点击区域内的链接（仅限 CSS）

> ID：11417272
> 
> 赞同：9
> 
> 时间：2012-07-10T15:58:33.230
> 
> 标签：html, css, nested, hyperlink

这是一篇关于在较大的可点击区域内创建链接的好文章：

[http://css-tricks.com/links-inside-of-larger-clickable-areas/](http://css-tricks.com/links-inside-of-larger-clickable-areas/)

此解决方案需要 JavaScript。在文章的最后，有一个指向纯 CSS 解决方案的断开链接（显然它可以完成），但我无法弄清楚如何仅使用 CSS 来完成。有任何想法吗？

![更大的可点击区域内的链接](../Images/99a9bc110a80ee75277d06391969c592.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T16:55:22.333

对我来说似乎不太难（[JSFiddle](http://jsfiddle.net/ztZun/1/)）。

HTML：

```
<header>
    <a href="#1">Clickable</a>
    <nav>
        <ul>
            <li>
                <a href="#2">Clickable</a>
            </li>
            <li>
                <a href="#3">Clickable</a>
            </li>
            <li>
                <a href="#4">Clickable</a>
            </li>
            <li>
                <a href="#5">Clickable</a>
            </li>
        </ul>
    </nav>
</header>
​ 
```

CSS：

```
a { color: #f4ebd4; font-family: sans-serif; text-decoration: none; text-transform: uppercase; font-size: 0.8em; }

header { text-align: center; }

header > a { display: block;  line-height: 100px; }

header > a, header > a + nav { background: #4b885c; }
a:hover, a:hover + nav { background: blue; }

nav ul { display: table; width: 100%; }
nav li { display: table-cell; }
nav a { display: block; background: #a51d2c; padding: 10px 20px; margin: 10px; }
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:32:12.030

试试这个[http://jsfiddle.net/5MkVW/](http://jsfiddle.net/5MkVW/)我在工作的最后 5 分钟里很快把它放在一起，可能有点乱，但试试看。

# html - CSS 定位 - 垂直居中，不会在较小窗口中丢失图像顶部

> ID：11417275
> 
> 赞同：3
> 
> 时间：2012-07-10T15:58:42.917
> 
> 标签：html, css

我正在使用这个 CSS 来垂直居中一个精灵：

```
#content {
    width:750px;
    height:950px;
    position:absolute;
    left:50%;
    top:50%;
    margin:-475px 0 0 -375px;
} 
```

...当浏览器窗口的高度小于 950 像素时，我会丢失图像的顶部。当浏览器高度大于 950 像素时，如何将图像设置为垂直居中，但当它小于 950 像素时，图像的顶部保持固定，我只丢失了底部？

我已经在源代码中使用链接来根据屏幕大小在 css 样式表之间切换，例如：

```
<link rel="stylesheet" media="screen and (min-width:481px) and (max-width:800px)"
href="tablet.css" /> 
```

但据我了解，您不能根据浏览器高度切换样式表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:31:08.270

将图像垂直居中（在示例中也是水平居中）的最简单方法可能是这种方法：

*   只要屏幕大于图像，图像就会居中
*   一旦图像变得比屏幕小，它就会放在顶部

希望这是您所期望的行为

### 演示

[http://jsfiddle.net/uB3pW/](http://jsfiddle.net/uB3pW/)

### HTML

```
<div class="wrapper">
    <img class="sprite" src="http://lorempixel.com/output/nightlife-q-c-750-500-4.jpg" alt="">
</div> 
```

### CSS

```
* {
    margin:     0;
    padding:    0;
}

body, html {
    display:    table;
    width:      100%;
    height:     100%;
}

div.wrapper {
    display:    table-cell;
    position:   relative;
    top:        0px;
    left:       0px;
    width:      100%;
    height:     100%;
    background: #ccc;
    text-align: center;
    vertical-align: middle;
} 
```

**笔记**

在 IE7 中不起作用。

# objective-c - AudioUnit，配置图形转换帧并将其发送到回调？

> ID：11417277
> 
> 赞同：1
> 
> 时间：2012-07-10T15:58:48.063
> 
> 标签：objective-c, core-audio, audiounit

在 Mac OS X 上，我尝试从用户选择的声卡中获取音频流，并使用 PCM 缓冲区来做一些事情。

这时候，我可以访问好设备并使用a`AudioDeviceIOProc`来获取硬件本机流描述处的缓冲区。

现在我想使用`AUGraph`我选择的设备将我的缓冲区转换为自定义 ASBD 并在`AURenderCallback`.

这是我的设置代码`(NSString* deviceUID and AudioStreamBasicDescription streamDescription`在参数中传递给我的设置函数）：

```
 // get the AudioDeviceID
    AudioValueTranslation avt = {&deviceUID,
        sizeof(deviceUID),
        &_inDevice,
        sizeof(_inDevice)};
    UInt32 avt_len = sizeof(avt);
    osstat = AudioHardwareGetProperty(kAudioHardwarePropertyDeviceForUID, &avt_len, &avt);

    osstat = NewAUGraph(&_inputGraph);

    AudioComponentDescription streamConverterDesc;
    streamConverterDesc.componentType = kAudioUnitType_FormatConverter;
    streamConverterDesc.componentSubType = kAudioUnitSubType_AUConverter;
    streamConverterDesc.componentManufacturer = kAudioUnitManufacturer_Apple;
    streamConverterDesc.componentFlags = streamConverterDesc.componentFlagsMask = 0;

    AUNode streamConverterNode;
    osstat = AUGraphAddNode(_inputGraph, &streamConverterDesc, &streamConverterNode);

    AudioUnit streamConverterUnit;
    osstat = AUGraphNodeInfo(_inputGraph, streamConverterNode, NULL, &streamConverterUnit);

    osstat = AudioUnitSetProperty(streamConverterUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &streamDescription, sizeof(streamDescription));

    osstat = AudioUnitSetProperty(streamConverterUnit, kAudioOutputUnitProperty_CurrentDevice, kAudioUnitScope_Global, 0, &_inDevice, sizeof(_inDevice));

    AudioComponentDescription streamReaderDesc;
    streamReaderDesc.componentType = kAudioUnitType_Output;
    streamReaderDesc.componentSubType = kAudioUnitSubType_GenericOutput;
    streamReaderDesc.componentManufacturer = kAudioUnitManufacturer_Apple;
    streamReaderDesc.componentFlags = streamReaderDesc.componentFlagsMask = 0;

    AUNode streamReaderNode;
    osstat = AUGraphAddNode(_inputGraph, &streamReaderDesc, &streamReaderNode);

    AudioUnit streamReaderUnit;
    osstat = AUGraphNodeInfo(_inputGraph, streamReaderNode, NULL, &streamReaderUnit);

    AURenderCallbackStruct callback;
    callback.inputProc = EIRenderCallback;
    callback.inputProcRefCon = self;
    osstat = AudioUnitSetProperty(streamReaderUnit, kAudioOutputUnitProperty_SetInputCallback, kAudioUnitScope_Output, 0, &callback, sizeof(callback));
    osstat = AudioUnitSetProperty(streamReaderUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &streamDescription, sizeof(streamDescription));

    osstat = AUGraphConnectNodeInput(_inputGraph, streamConverterNode, 1, streamReaderNode, 0);

    osstat = AUGraphOpen(_inputGraph);
    osstat = AUGraphInitialize(_inputGraph); 
```

我开始我的`AUGraph`晚点。

实际上我得到了一个错误`AudioUnitSetProperty`-50 `streamConverterUnit`。

我想从习惯的人那里得到反馈`CoreAudio`，这个设置流程好吗？为什么会出现此错误 -50，我应该怎么做才能完成工作设置？

最好的问候， 约安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:51:51.890

在为图中的单位调用 AudioUnitSetProperty() 之前尝试调用 AUGraphOpen()。

# orchardcms - Orchard CMS 1.4.2 - 我的自定义内容类型的编辑视图不显示内容部分数据

> ID：11417280
> 
> 赞同：0
> 
> 时间：2012-07-10T15:58:58.397
> 
> 标签：orchardcms

## 设置：

我正在创建一个模块，以便我的客户可以将他们自己的公司电子邮件作为内容进行管理。

这个想法是避免将人们的真实电子邮件地址放在公共网站上，因此对于网站用户发送电子邮件，我让 Orchard 显示一个表单。没问题。我的问题（见下文）与 Orchard 如何在**仪表板**中显示内容项有关，而不是与网站面向公众的部分有关。

继续：

我创建了（参见下面的 migration.cs）一个名为 EmailAddress 的内容类型。它基本上只是围绕名为 CorporateEmailPart 的内容部分的内容类型包装器。

我设置的另一个相关部分是驱动程序（请参阅下面的 CorporateEmailPartDriver.cs）。我在 PluralSight.com 上关注 Kevin Kuebler 的视频来编写驱动程序。调试显示它工作正常。

使用我模块中的 Placement.info 文件放置形状。

所以，如果不是因为……一切都会好起来的。

## 问题：

驱动程序正确地允许我为我的内容类型的编辑器创建形状，显示效果很好。

或者更确切地说，显示很好，可以让我创建一个新的电子邮件地址。我可以很好地将 CorporateEmailPart 保存到数据库中。

但是，当我保存新的 EmailAddress 内容类型或尝试编辑现有内容类型时，CorporateEmailPart 的字段根本不会显示在我的 EmailAddress 编辑器上。

即，当在我的 POST DriverResult Editor 方法中返回 GET Editor ContentShape 时，仅显示我的 Content Type 的 CommonPart（即 ContentItem 的所有者字段）。不显示 CorporateEmailPart 数据。甚至没有空文本框。

我一定错过了一些简单的东西，因为其他一切都有效。

但我就是看不到什么……！

## 代码：

## 迁移.cs：

```
using Orchard.ContentManagement.MetaData;
using Orchard.Core.Contents.Extensions;
using Orchard.Data;
using Orchard.Data.Migration;
using Wingspan.CorporateEmails.Models;

namespace Wingspan.CorporateEmails {
    public class Migrations : DataMigrationImpl {

        public int Create() {
            ContentDefinitionManager.AlterTypeDefinition("EmailAddress", builder =>
                builder
                .WithPart("CommonPart")
                .Creatable());

            SchemaBuilder.CreateTable("CorporateEmailPartRecord", table =>
                table.ContentPartRecord()
                .Column<string>("Alias")
                .Column<string>("EmailAddress")
                .Column<int>("DisplayOrder")
                .Column<string>("DisplayTitle")
                .Column<bool>("IsDefault"));

            ContentDefinitionManager.AlterPartDefinition(typeof(CorporateEmailPart).Name, p => p.Attachable());

            ContentDefinitionManager.AlterTypeDefinition("EmailAddress", builder =>
                builder
                .WithPart(typeof(CorporateEmailPart).Name));

            SchemaBuilder.CreateTable("EmailMessageRecord", table =>
                table
                .Column<int>("Id", col => col.PrimaryKey().Identity())
                .Column<int>("CorporateEmailPartRecord_Id")
                .Column<string>("Sender")
                .Column<string>("Recipient")
                .Column<string>("Subject")
                .Column<string>("Body")
                .Column<string>("TitleAndName")
                .Column<string>("Address")
                .Column<string>("Telephones"));

            return 1;
        }
    }
} 
```

## CorporateEmailDriver.cs

```
using System.Collections.Generic;
using System.Web.Routing;
using Orchard;
using Orchard.ContentManagement;
using Orchard.ContentManagement.Drivers;
using Orchard.Data;
using Orchard.Services;
using Wingspan.CorporateEmails.Models;
using Wingspan.CorporateEmails.ViewModels;
using System.Linq;

namespace Wingspan.CorporateEmails.Drivers {
    public class CorporateEmailPartDriver : ContentPartDriver<CorporateEmailPart>{
        private readonly IRepository<EmailMessageRecord> _repositoryEmailMessage;
        private readonly IEnumerable<IHtmlFilter> _htmlFilters;
        private readonly RequestContext _requestContext;

        private const string TemplateName = "Parts/CorporateEmail";
        protected override string Prefix
        {
            get
            {
                { return "CorporateEmail"; }
            }
        }

        public IOrchardServices Services { get; set; }

        public CorporateEmailPartDriver(IRepository<EmailMessageRecord> repositoryEmailMessage)
        {
            _repositoryEmailMessage = repositoryEmailMessage;
        }

        public CorporateEmailPartDriver(IOrchardServices services, IEnumerable<IHtmlFilter> htmlFilters, RequestContext requestContext) {
            _htmlFilters = htmlFilters;
            Services = services;
            _requestContext = requestContext;
        }

        protected override DriverResult Display(CorporateEmailPart part, string displayType, dynamic shapeHelper)
        {
            return ContentShape(TemplateName, () => shapeHelper.Parts_CorporateEmail(CorporateEmailPart: part));
        }

        //GET
        protected override DriverResult Editor(CorporateEmailPart part, dynamic shapeHelper)
        {
            var model = BuildEditorViewModel(part);
            return ContentShape("Parts_CorporateEmail_Edit", () =>
                shapeHelper.EditorTemplate(TemplateName: TemplateName, Model: model, Prefix: Prefix));
        }

        //POST
        protected override DriverResult Editor(CorporateEmailPart part, IUpdateModel updater, dynamic shapeHelper)
        {
            updater.TryUpdateModel(part, Prefix, null, null);
            var model = BuildEditorViewModel(part);
            return ContentShape("Parts_CorporateEmail_Edit",
                                () => shapeHelper.EditorTemplate(TemplateName: TemplateName, Model: model, Prefix: Prefix));
        }

        #region Private Utilities

        private CorporateEmailEditorViewModel BuildEditorViewModel(CorporateEmailPart part)
        {
            return new CorporateEmailEditorViewModel
            {
                Alias = part.Alias,
                EmailAddress = part.EmailAddress,
                DisplayOrder = part.DisplayOrder,
                DisplayTitle = part.DisplayTitle,
                IsDefault = part.IsDefault,
                EmailMessageSummaries = part.EmailMessages.Select(ue => ue.Summary).ToList()
            };
        }

        #endregion
    }
} 
```

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:46:41.920

好的，头脑清晰的更仔细的调试会话，我发现了问题：

在我的驱动程序中构建视图模型时出现错误：

```
private CorporateEmailEditorViewModel BuildEditorViewModel(CorporateEmailPart part)
        {
            return new CorporateEmailEditorViewModel
            {
                Alias = part.Alias,
                EmailAddress = part.EmailAddress,
                DisplayOrder = part.DisplayOrder,
                DisplayTitle = part.DisplayTitle,
                IsDefault = part.IsDefault,
                EmailMessageSummaries = part.EmailMessages.Select(ue => ue.Summary).ToList()
            };
        } 
```

违规行是：

```
EmailMessageSummaries = part.EmailMessages.Select(ue => ue.Summary).ToList() 
```

原因是使用 CorporateEmailPartRecord_Id 外键从 EmailMessageRecord 表中检索数据存在一些问题。我仍然没有弄清楚是什么（从未使用过 nHibernate，这是果园使用的），但是这个错误的存在回答了当前的问题。

## 忠告：

果园运作良好。

事实上，它运作良好。

不起作用的是模块中的代码。

因此，在调试时要更加小心。

Kevin Kuebler 的视频是一个很好的果园学习资源。

当您重构某些东西的名称时，请仔细检查以确保它们已全部更改。

## 附录：

我找到了导致 hHibernate 错误的原因：伪劣重构。

我最初将项目称为 CompanyEmails，但后来将所有内容都重构为 CorporateEmails。唯一的问题是，我没有重构所有东西，是吗？EmailMessageRecord 模型类上还有一个 CompanyEmailPartRecord_Id 字段，而在数据库中，我已将其更改为 CorporateEmailRecordPart_Id。所以，只是另一个错误，只是未能正确重构。

# c# - Mono 上奇怪的弱引用行为

> ID：11417283
> 
> 赞同：15
> 
> 时间：2012-07-10T15:59:01.523
> 
> 标签：c#, mono, weak-references

使用 Mono 2.11.3 (SGen) 以及稳定的 2.10.8 版本测试使用 Wea​​kReference 的代码对我来说失败了。在这样的简单代码中

```
object obj = new object();
WeakReference wr = new WeakReference(obj);

Assert.IsTrue(wr.IsAlive);

obj = null;
GC.Collect();

Assert.IsFalse(wr.IsAlive); 
```

第二个断言将失败。添加 GC.WaitForPendingFinalizers 没有帮助。这是 Mono 中的错误还是我脑海中的错误？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T07:09:00.073

这不是错误，而是 Mono GC 的行为与 MS GC 不同的实现细节。在这种情况下，由于您在同一个堆栈帧中创建了对象 obj，因此它恰好被保守的堆栈扫描代码保持活动状态。在实际代码中（与这样的琐碎测试用例相反），这不是问题。如果对于您的特定情况，我建议在单独的方法中分配对象及其 WeakReference：

```
static WeakReference Alloc ()
{
    return new WeakReference (new object ());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-24T09:23:50.070

```
[MethodImpl((MethodImplOptions.NoInlining)]
static WeakReference Alloc ()
{
    return new WeakReference (new object ());
} 
```

编译时必须确保`Alloc()`方法不是内联的

# javascript - .NET 日期和 JSON

> ID：11417284
> 
> 赞同：2
> 
> 时间：2012-07-10T15:59:05.630
> 
> 标签：javascript, .net, json

我想使用这个[要点](https://gist.github.com/1868478)来覆盖 JQuery 的 parseJSON 以考虑 .NET 的日期。

问题是它不会替换这种格式的日期：

```
"ReviewDate":"\/Date(1404946800000+0100)\/" 
```

这个正则表达式似乎没有考虑时区：

```
var replaceNet = /"\\\/Date\((\d+)(?:-\d+)?\)\\\/"/i; 
```

其他人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:21:47.600

您可以使用以下函数作为格式化程序：

```
function date(s) { return new Date(parseFloat(/Date\(([^)]+)\)/.exec(s)[1])); } 
```

希望能帮助到你。

# sql - Rails 中具有多个连接的高级查询

> ID：11417287
> 
> 赞同：3
> 
> 时间：2012-07-10T15:59:13.653
> 
> 标签：sql, ruby-on-rails, activerecord, join

我有一桌人。我还有一张活动表；每个活动都有多个节目（，每个节目有多个门票，每张门票可能有也可能没有买家（一个人）。但是，每个人都可以拥有多张不同活动的门票。

我目前的尝试如下所示：

```
Person.joins(tickets: {shows: :events}).where("events.id" => 1) 
```

它会生成以下 SQL：

```
SELECT *
  FROM "people"
  INNER JOIN "tickets"
    ON "tickets"."buyer_id" = "people"."id"
  INNER JOIN "shows"
    ON "shows"."id" = "tickets"."show_id"
  INNER JOIN "events"
    ON "events"."id" = "shows"."event_id"
WHERE
  "events"."id" = 1; 
```

但我的理解是，查询只会为每个人返回一张票。我不太了解我的加入，但可以安全地假设我需要人和票之间的正确外部加入，以便显示每张票（因此代表每个事件）。这个对吗？以及如何在 ActiveRecord/Arel 中实现它？

**如何找到所有持有特定活动门票的人？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:12:13.363

我也不是数据库专家，但据我所知，这是它的工作方式：

1.  **people inner join ticket**将为一个人拥有的每张票提供一行（如果一个人拥有多张票，它将包含重复的人员条目）
2.  **inner join show**只会将节目添加到行中（假设每张票只属于一个节目）
3.  **inner join event**只会添加事件信息（假设每个节目只属于一个事件）
4.  **其中 event.id=1**将仅在表中保留事件 id 为 1 的行

我想这就是你要找的。

顺便说一句，上面代码中的命名约定表明您可能对关系的定义有问题。我希望它是：

`Person.joins(tickets: {show: :event})`并不是

`Person.joins(tickets: {shows: :events})`因为门票属于_单个节目和节目属于_单个事件。我错过了什么吗？

# perl - 使用 WWW::Mechanize 从多个链接下载文本

> ID：11417299
> 
> 赞同：0
> 
> 时间：2012-07-10T16:00:03.723
> 
> 标签：perl, hyperlink, web-scraping, www-mechanize

整整一周，我一直在尝试编写一个代码，该代码将从网页下载链接，然后遍历每个链接以转储每个链接页面上写入的内容。我下载的原始网页有 500 个链接，这些链接指向不同的网页，每个网页都包含对我来说很重要的信息。我只想降一级。但是我有几个问题。

回顾：我想从网页下载链接并自动让我的程序打印出这些链接中包含的文本。我希望将它们打印在文件中。

1）当我从原网站下载链接时，有用的没有写完整。（即他们说“/festevents.nsf/all?openform”这不是一个可用的网页）

2) 我一直无法打印页面的文字内容。我已经能够打印字体详细信息，但这没用。

```
 #Download all the modules I used#
     use LWP::UserAgent;
use HTML::TreeBuilder;
use HTML::FormatText;
use WWW::Mechanize;
use Data::Dumper;

#Download original webpage and acquire 500+ Links#

$url = "http://wx.toronto.ca/festevents.nsf/all?openform";

my $mechanize = WWW::Mechanize->new(autocheck => 1);

$mechanize->get($url);

my $title = $mechanize->title;

print "<b>$title</b><br />";

my @links = $mechanize->links;

foreach my $link (@links) {

   # Retrieve the link URL
   my $href = $link->url_abs;

  #
  # $URL1= get("$link");
  #
  my $ua = LWP::UserAgent->new;
  my $response = $ua->get($href);
  unless($response->is_success) {
    die $response->status_line;
  }
  my $URL1 = $response->decoded_content;
  die Dumper($URL1);

#This part of the code is just to "clean up" the text
$Format=HTML::FormatText->new;
$TreeBuilder=HTML::TreeBuilder->new;
$TreeBuilder->parse($URL1);
$Parsed=$Format->format($TreeBuilder);

open(FILE, ">TorontoParties.txt");
print FILE "$Parsed";
close (FILE);

 } 
```

请帮我！生无可恋！如果可能，请向我解释每个步骤背后的逻辑？我已经为此苦恼了一个星期，我希望看到其他人在问题背后的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:47:10.603

太多的工作。研究[WWW::Mechanize](http://p3rl.org/WWW%3a%3aMechanize) API，了解几乎所有这些功能都已内置。未经测试：

```
use strictures;
use WWW::Mechanize qw();
use autodie qw(:all);

open my $h, '>:encoding(UTF-8)', 'TorontoParties.txt';
my $mechanize = WWW::Mechanize->new;
$mechanize->get('http://wx.toronto.ca/festevents.nsf/all?openform');
foreach my $link (
    $mechanize->find_all_links(url_regex => qr'/festevents[.]nsf/[0-9a-f]{32}/[0-9a-f]{32}[?]OpenDocument')
) {
    $mechanize->get($link->url_abs);
    print {$h} $mechanize->content(format => 'text');
}
close $h; 
```

# ruby-on-rails - 多租户，这个过程添加用户安全吗？

> ID：11417301
> 
> 赞同：2
> 
> 时间：2012-07-10T16:00:09.207
> 
> 标签：ruby-on-rails, authentication, registration

我正在构建一个多租户应用程序。当用户创建帐户时，他们需要输入电子邮件 + 密码。登录后，该用户（“管理员”）可以将其他用户添加到他们的帐户中。我希望能够简单地添加用户 - 只需要一个电子邮件地址。以下过程对于添加用户是否安全？

1.  管理员转到添加用户表单
2.  管理员输入用户的电子邮件地址并点击提交
3.  电子邮件 + 唯一的registration_key + registration_expiration 被输入到用户模型中
4.  新用户会收到一封包含注册链接的电子邮件（例如：[http](http://account.myapp.com/registration/o4iwerl23msl424keree) ://account.myapp.com/registration/o4iwerl23msl424keree ）
5.  新用户打开注册表并输入必填密码+密码确认字段
6.  如果 URL 中的 registration_key 与 DB 中的匹配，并且在注册到期之前，则用户可以注册

你会推荐一个替代品吗？如果这是安全的，我如何绕过此过程的第 2 步和第 3 步中所需的密码 + 密码确认字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:54:29.133

对我来说似乎足够合理。

我会在用户模型中添加一个状态列。当您邀请某人时，他们的陈述将被邀请，直到他们单击注册链接并完成所有这些事情。

然后，您可以将密码验证（或在此阶段不相关的任何其他内容）设置为在这种情况下不适用

```
validates_presence_of :blah, :if => confirmed?

def confirmed?
  state == 'confirmed'
end 
```

如果用户想查看哪些受邀用户成功注册，这也可能会派上用场。如果您的用户将有很多状态，您可能希望查看 aasm gem，但这将是矫枉过正。

# ant - ivy，主配置是什么，为什么不拉jvyaml？

> ID：11417304
> 
> 赞同：6
> 
> 时间：2012-07-10T16:00:27.130
> 
> 标签：ant, ivy

我有以下常春藤文件：

```
<configurations defaultconfmapping="buildtime">
    <conf name="buildtime" visibility="private" description="Libraries needed only for compilation" />
    <conf name="runtime" description="Libraries only needed at runtime" />
    <conf name="test" description="Libraries only needed for testing" />
</configurations>

<dependencies>
  <dependency org="net.java.dev" name="jvyaml" rev="0.2.1" conf="runtime" />
  <dependency org="org.apache.solr" name="solr-core" rev="3.6.0" conf="runtime" />

</dependencies> 
```

我有一个看起来像这样的蚂蚁检索任务：

```
<target name="retrieve-all" depends="resolve">
    <ivy:retrieve pattern="lib/[conf]/[artifact]-[revision].[ext]" conf="*" />
</target> 
```

奇怪的是，所有的 solr 依赖项都像我所期望的那样下载到 lib/runtime 中，但 jvyaml 模块却没有！它“解决”，但不会下载到 lib/runtime 目录，除非我将依赖项声明更改为：

```
<dependency org="net.java.dev" name="jvyaml" rev="0.2.1" conf="runtime->master" /> 
```

这个主配置是什么，为什么需要拉 jvyaml jar，而不是 solr？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-10T19:13:55.183

我建议重组你的配置如下：

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Libraries needed only for compilation" />
        <conf name="runtime" description="Libraries only needed at runtime" extends="compile" />
        <conf name="test" description="Libraries only needed for testing" extends="runtime" />
    </configurations>

    <dependencies>
        <dependency org="net.java.dev" name="jvyaml" rev="0.2.1" conf="runtime->default" />
        <dependency org="org.apache.solr" name="solr-core" rev="3.6.0" conf="runtime->default" />
    </dependencies>

</ivy-module> 
```

引入的重要更改：

1.  **使用更标准的“编译”配置**
2.  **使用“扩展”属性的**配置继承。**然后，编译依赖项可以自动包含在运行时和测试配置中。**
***   **使用配置映射**，例如：conf="runtime->default"。这使得哪个本地配置与哪个远程配置相关联变得一目了然。**

 **# 配置映射解释

配置是一个强大的 ivy 功能​​。当常春藤下载 Maven 模块时，它会执行内部翻译并分配一组标准配置，如以下答案所示：

*   [Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)

在声明依赖项时，最好始终使用配置映射，以便毫无疑问地分配依赖项工件的位置。

例如：

```
<dependency org="??" name="??" rev="??" conf="runtime->default" /> 
```

这里我们说我们希望远程模块的默认依赖项与我们的本地运行时配置相关联。

实际上，您实际上只需要两个远程配置映射：

*   **default**：远程模块的工件及其所有运行时传递依赖项
*   **master**：仅远程模块的工件（无传递依赖）

总之，我认为您的问题是由于远程 Maven 模块的“运行时”范围不包括 Maven 模块的工件，而是您获得了模块 jvyaml 不存在的传递依赖关系:-(

# 一些额外的建议

我还建议生成一个常春藤依赖管理报告，如下所示：

```
<target name="init" description="Resolve dependencies and populate lib dir">
    <ivy:resolve/>
    <ivy:report todir="${build.dir}/ivy-report" graph="false"/>
    <ivy:retrieve pattern="lib/[conf]/[artifact]-[revision].[ext]"/>
</target> 
```

该报告将帮助解释每个依赖项如何最终以不同的配置结束。对于确定如何管理传递依赖关系也非常有用。

最后，这里是配置继承得到回报的地方，创建了 ivy 托管的 ANT 类路径：

```
<target name="init" description="Resolve dependencies and set classpaths">
    <ivy:resolve/>
    <ivy:report todir="${build.dir}/ivy-report" graph="false"/>

    <ivy:cachepath pathid="compile.path" conf="compile"/>
    <ivy:cachepath pathid="runtime.path" conf="runtime"/>
    <ivy:cachepath pathid="test.path"    conf="test"/>
</target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:14:19.853

请注意，原始的 solr-core 也没有被检索到。解决后，转到缓存并检查两个模块的 ivy.xml 文件。

您将看到他们仅在 conf=master 中发布其工件

```
<artifact name="jvyaml" type="jar" ext="jar" conf="master"/>

<artifact name="solr-core" type="jar" ext="jar" conf="master"/> 
```

这意味着，您必须进行显式配置映射以表示您的内置配置应该唤起您的依赖项的“主”配置。（检查配置映射）。

但是，solr-core 的依赖项具有配置映射，如您在 ivy.xml 文件中所见：

```
<dependency org="org.apache.solr" name="solr-solrj" rev="3.6.0" force="true" conf="compile->compile(*),master(*);runtime->runtime(*)"/> 
```

我认为这是主人（*）的事情。

我通常做的是在我自己的 ivy.xml 文件中声明依赖项时进行映射：

```
 <dependency org="net.java.dev" name="jvyaml" rev="0.2.1" conf="runtime->master" /> 
```

这表示运行时正在调用指定依赖项中的主配置。

你可以做

```
conf="runtime,test->master" 
```

以及**

# php - 在 php 数组中查找模式

> ID：11417306
> 
> 赞同：0
> 
> 时间：2012-07-10T16:00:38.083
> 
> 标签：php, arrays, search, find

例如：

主数组是：`array(0 => 'A', 1 => 'A', 2 => 'B', 3 => 'B', 4 => 'B');`

模式是：`array('A', 'B');`

预期答案：`array( array(0, 2), array(1, 3) )`

***再举一个例子：***

主阵列`array(0 => 'F', 5 => 'G', 78 => 'R', 2 => 'D');`

图案`array('G', 'R', 'F');`

预期答案：`array(array(5, 78, 0))`

如何在数组中找到所有出现的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:23:37.953

这是一个使用递归的函数。

```
function array_pattern($array, $pattern){
    $ret = array(array());
    $found = true;
    foreach($pattern as $val){
        $x = array_search($val, $array);
        if($x === FALSE){
            $found = FALSE;
            break;
        }
        unset($array[$x]);
        $ret[0][] = $x;
    }
    return $found ? array_merge($ret, array_pattern($array, $pattern)) : array();
} 
```

像这样称呼它：

```
$a = array_pattern(array(0 => 'A', 1 => 'A', 2 => 'B', 3 => 'B', 4 => 'B'), array('A', 'B'));
$b = array_pattern(array(0 => 'F', 5 => 'G', 78 => 'R', 2 => 'D'), array('G', 'R', 'F')); 
```

演示：[http ://codepad.org/JCdsAMGk](http://codepad.org/JCdsAMGk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:25:25.077

我没有测试以下代码，但它可能会给你一些想法。

```
$arr = array(0 => 'A', 1 => 'A', 2 => 'B', 3 => 'B', 4 => 'B');
$test = array('G', 'R', 'F');

$count = 0;
$count2 = 0; 
for($i=0;$i<count($arr);$++){
    $pass= true;
    if(count($test)+$count <= count($arr)){
        for($k=0;$k<count($test);$k++){
            if($arr[k+i]!=$test[k]){
                  $pass = false;
            }
        }
    }else{
       $pass = false;
    }

     if($pass){
       $output[$count2] = $i;
       $count2++;
     }

} 
```

# iphone - “全网”移动浏览器和基于屏幕大小的媒体查询

> ID：11417307
> 
> 赞同：3
> 
> 时间：2012-07-10T16:00:42.670
> 
> 标签：iphone, css, media, screen-resolution

我被要求用移动布局改造现有网站。该网站是基于 Wordpress Twenty11 框架构建的，因此我决定使用该框架中现有的媒体查询来构建移动布局。

现在，我的移动布局在任何桌面浏览器上看起来都很棒，被拖到宽度小于 420 像素，但在 iPhone 和 Android 移动浏览器上它无论如何都只是加载全宽网页。完整的网络体验，哇！

客户不满意。希望移动设计出现在所有 iPhone 浏览器上。所以现在我需要弄清楚为什么移动浏览器坚持以整个桌面宽度显示页面，完全忽略移动 CSS。

这是我的媒体查询，位于 style.css 主文档的底部：

```
@media (max-width: 800px) {
/* Design starts to get a little more fluid */
}

@media (max-width: 650px) {
/* Design gets quite a lot more fluid, and columns start dropping off the edge to below     main content */
}

@media (max-width: 450px) {
/* Totally changed navigation for small viewports, main content takes up whole viewport */
} 
```

当我在台式机上手动调整浏览器窗口的大小时，所有这些都可以满足我的需求。当我在几乎没用的基于 iFrame 的“iPhone 模拟器”中测试它们时，它们也会做我想做的事。但迄今为止测试的所有移动设备都顽固地显示全角布局，放大得非常远且难以阅读。

有什么我应该添加到这些媒体查询中以使移动浏览器显示移动 CSS 吗？还是我应该完全采用不同的策略，例如用户代理检测或类似的策略？

编辑添加：header.php 中的这一行，我猜：

```
<meta name="viewport" content="width=960,
                           maximum-scale=1.0"> 
```

实际上应该是

```
<meta name="viewport" content="width=device-width,
                           maximum-scale=1.0"> 
```

正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:21:50.040

您应该将`min-width`参数添加到您的媒体查询，因为目前小屏幕的人将从您的所有三个媒体查询中获取规则，因为它的最大宽度将小于 800 像素。

```
@media (min-width: 651px AND max-width: 800px) {
    ...
}

@media (min-width: 451px AND max-width: 650px) {
    ...
}

@media (max-width: 450px) {
    ...
} 
```

如果你试图让媒体查询变得过于复杂，你会遇到很多问题。不同的浏览器处理它们的方式不同，这使得它们对于生产环境来说不太理想。

我喜欢使用的一种方法是为事件创建一个简单的 JS 事件处理程序`window.resize`，它只向元素添加一个类来`<html>`指定用户所在的屏幕断点。然后在您的 CSS 中，您只需在规则前面加上断点类：

```
$(window).on('resize', function () {
    var w = $(this).width();
    if (w > 1400) {
        $('html').addClass('widescreen-viewport');
    } else if (w > 1024) {
        $('html').addClass('desktop-viewport');
    } else if (w > 767) {
        $('html').addClass('tablet-viewport');
    } else {
        $('html').addClass('mobile-viewport');
    }
}); 
```

对 jQuery 感到抱歉，但我知道这是一种肯定有效的方法。

然后你的 CSS 会是这样的：

```
#some-element {
    /*default styles*/
}
.widescreen-viewport #some-element {
    /*widescreen styles*/
}
.desktop-viewport #some-element {
    /*desktop styles*/
}
.tablet-viewport #some-element {
    /*tablet styles*/
}
.mobile-viewport #some-element {
    /*mobile styles*/
} 
```

此方法将获得更好的浏览器支持，因为它需要启用 JS，但除此之外，它会从那时起返回到 IE6/5.5 和其他浏览器。

# jquery - 使用 Jquery 在画布 HTML5 中绘制多行

> ID：11417309
> 
> 赞同：0
> 
> 时间：2012-07-10T16:00:44.697
> 
> 标签：jquery, html, canvas, drawing, line

我想在鼠标点击时绘制一条多线（我的意思是一些连续的线与前一行共享一个坐标，与下一行共享一个坐标）。我目前通过`mousemove`jQuery 中的事件实现了这一点：

```
var worksheetCanvas = $('#worksheet-canvas');

var context = worksheetCanvas.get(0).getContext("2d");

var mouse = {
     x: -1,
     y: -1
}

var parentOffset = $('#canvas-holder').parent().offset();
worksheetCanvas.click(function(e) {

    mouse.x = e.pageX - parentOffset.left;
    mouse.y = e.pageY - parentOffset.top;

    context.beginPath();
    context.moveTo(mouse.x, mouse.y);

    $(this).mousemove(function(k) {

        context.strokeStyle = "rgb(180,800,95)";

        context.lineTo(k.pageX - parentOffset.left, k.pageY - parentOffset.top);
        context.closePath();
        context.stroke();

    })

})​ 
```

但正如我可以在[这个例子](http://jsfiddle.net/z6uFz/)中向你展示的那样，当我移动鼠标光标时，它会留下一连串线条，我需要以某种方式删除这些线条，以创建一条需要定义另一个点的可移动线条的印象。我试图清除不需要的行，但 2d 上下文只有一个`clearRect()`方法，而我正在寻找类似`clearPath()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:42:30.593

没有`clearPath`根据[画布参考的方法](http://www.w3schools.com/html5/html5_ref_canvas.asp)

但是，无论如何您都不需要它。如果我的假设是正确的，那么您需要做的就是将先前笔画的值存储到一个数组中：

我在**[这里做了一个 jsfiddle，](http://jsfiddle.net/hLFg5/)**这样你就可以看到它的工作和使用它。

每次移动都清除画布非常有效，并且没有性能问题。

**带说明的源代码**

```
$(function() {

var worksheetCanvas = $('#worksheet-canvas');

var context = worksheetCanvas.get(0).getContext("2d");
var clicked = false;

// maximum number of consecutive lines to be drawn
var maxLines = 5;

// The array of stored lines
var storedLines = [];

// The object for the last stored line
var storedLine = {};
var mouse = {
    x: -1,
    y: -1
}

var parentOffset = $('#canvas-holder').parent().offset();
worksheetCanvas.click(function(e) {
    clicked = true;

    mouse.x = e.pageX - parentOffset.left;
    mouse.y = e.pageY - parentOffset.top;

    context.moveTo(mouse.x, mouse.y);

    // Push last line to the stored lines

    if (clicked) {
        storedLines.push({
            startX: storedLine.startX,
            startY: storedLine.startY,
            endX: mouse.x,
            endY: mouse.y
        });

    }

    // set last line coordinates

    storedLine.startX = mouse.x;
    storedLine.startY = mouse.y;

    $(this).mousemove(function(k) {
        if (storedLines.length > maxLines) {
            storedLines.shift();
        }

        // clear the canvas

        context.clearRect(0, 0, 960, 500);
        context.beginPath();
        context.strokeStyle = "rgb(180,800,95)";

        // draw the stored lines

        for (var i = 0; i < storedLines.length; i++) {
            var v = storedLines[i];
            context.moveTo(v.startX, v.startY);
            context.lineTo(v.endX, v.endY);
            context.stroke();
        }
        context.moveTo(mouse.x, mouse.y);
        context.lineTo(k.pageX - parentOffset.left, k.pageY - parentOffset.top);
        context.stroke();

        context.closePath();

    })

})

})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:24:55.640

我想你会想要使用两个堆叠的画布。顶层将有动态线（因此可以在每次鼠标移动时 clearRect 整个东西），然后单击，您在下部画布上描边

# android - Android 在 for 循环中添加视图

> ID：11417319
> 
> 赞同：0
> 
> 时间：2012-07-10T16:01:07.093
> 
> 标签：android, for-loop

嗨，我正在尝试从 json 提要创建一个列表，该列表具有每个日期的标题，然后是下面的内容。但是，我进来的 json 提要没有按日期顺序组织，我创建了一个 for 循环，获取所有日期，然后检查重复项，这为我提供了提要中的日期数组。然后我想为每个日期向我的适配器添加一个标题视图，然后我假设我需要添加另一个 for 循环来获取每个日期下的内容？问题是目前我的标题视图

所以我的问题是如何创建一个基于 for 循环添加标题视图的列表，然后在每个标题下添加其他视图？

这是我在 AsyncTask 之后运行的函数

```
public void FillData() throws JSONException{    

      ListView list = getListView();
        list.scrollTo(0, 0);
        list.setVerticalFadingEdgeEnabled(false);

           list.setTextFilterEnabled(true);

           LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE );
            View header = inflater.inflate( R.layout.homeheader, list, false);

       fixturesView = LayoutInflater.from(getBaseContext()).inflate(R.layout.fixturescell,
                 null);

       //Log.v("MyFix", "fixturesArray = " + fixturesArray);
       if(fixturesArray.length() < 1){

             TextView emptytext = (TextView) fixturesView.findViewById(R.id.TextView02);
             emptytext.setText("No Upcoming Fixtures Available");

       }else{
        try{   

            for(int t = 0; t < fixturesArray.length(); t++){
               JSONObject matchDateDict = fixturesArray.getJSONObject(t);
               String matchDate = matchDateDict.getString("matchdate");

               if(matchDatesArray.length() != 0){

                   int lm = t - 1;
                   JSONObject lastDateDict = fixturesArray.getJSONObject(lm);
                   String lastMatchDate = lastDateDict.getString("matchdate");

                   Log.v("MyFix", "lastMatchDate " + lastMatchDate);

                   if(matchDate.equals(lastMatchDate)){
                       Log.v("MyFix", "2 are the same");                        
                   } else {
                       Log.v("MyFix", "add new matchdate to array");   
                       matchDatesArray.put(matchDate);
                   }

               } else {
                   Log.v("MyFix", "add new matchdate to array (first time only)");                      
                   matchDatesArray.put(matchDate);    
               }
            }

            Log.v("MyFix", "matchDatesArray = " + matchDatesArray);

        }catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

         DateHeader = LayoutInflater.from(getBaseContext()).inflate(R.layout.redcell,
                 null);

         adapter = new MergeAdapter();

        for(int t = 0; t < matchDatesArray.length(); t++){      

          JSONObject mdheaderdict = matchDatesArray.getJSONObject(t);
           String matchheader = mdheaderdict.getString("matchdate");

               TextView matchdayheader = (TextView) DateHeader.findViewById(R.id.redheadertext);
               matchdayheader.setText(matchheader);
               adapter.addView(DateHeader);
        }               
     }     
       setListAdapter(adapter);  

} 
```

这是 json 提要的示例

```
fixturesdata{"code":200,"error":null,"data":{"fixtures":[{"kickoff":"15:00:00","matchdate":"2012-07-14","homescore":null,"awayscore":null,"attendance":null,"homepens":null,"awaypens":null,"division_id":"5059","division":"Testing 1","comp":"LGE","location":null,"fixture_note":null,"hometeam_id":"64930","hometeam":"Team 1","awayteam_id":"64933","awayteam":"Team 4"},{"kickoff":"15:00:00","matchdate":"2012-07-14","homescore":null,"awayscore":null,"attendance":null,"homepens":null,"awaypens":null,"division_id":"5059","division":"Testing 1","comp":"LGE","location":null,"fixture_note":null,"hometeam_id":"64935","hometeam":"Team 6","awayteam_id":"64937","awayteam":"Team 8"},{"kickoff":"15:00:00","matchdate":"2012-07-28","homescore":null,"awayscore":null,"attendance":null,"homepens":null,"awaypens":null,"division_id":"5059","division":"Testing 1","comp":"LGE","location":null,"fixture_note":null,"hometeam_id":"64930","hometeam":"Team 1","awayteam_id":"64931","awayteam":"Team 2"},{"kickoff":"15:00:00","matchdate":"2012-07-28","homescore":null,"awayscore":null,"attendance":null,"homepens":null,"awaypens":null,"division_id":"5059","division":"Testing 1","comp":"LGE","location":null,"fixture_note":null,"hometeam_id":"64930","hometeam":"Team 1","awayteam_id":"64931","awayteam":"Team 2"}]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:34:04.523

您想要的不是在循环中添加视图，而是使用 Sections 制作适当的 ListView。我建议您阅读本教程，其中包含示例代码。

[分割你的 ListView](http://android.cyrilmottier.com/?p=440)

# php - 代码点火器动态复选框

> ID：11417322
> 
> 赞同：1
> 
> 时间：2012-07-10T16:01:15.600
> 
> 标签：php, html, codeigniter

嗨，我正在尝试回显复选框，然后确定它们是否在我的控制器中被选中，如果是，则将它们添加到数组中。我遵循了 SO 的指南，但仍有问题。任何见解都非常感谢！

控制器代码：

```
 foreach ($content['options'] as $option) {
            $id = $option['id'];
            $checked = (isset($_POST[$id])) ? true : false;
            if ($checked == TRUE) {
                 array_push($recipientGroups, $id);
            }
       } 
```

查看代码：

```
foreach ($options as $option) {
     echo br(1);
     echo $option['name'];

     $checkboxattr = array(
          'name' => $option['name'],
          'value' => $option['name'],
          'id' => $option['id']
    );  //'checkbox_'.

     echo form_checkbox($checkboxattr);
     echo "<span id='total_".strtolower($option['name'])."'></span>";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T02:10:53.137

你的意思是空白数组来自这个变量**$checkboxattr**？

在您看来，您是否从控制器中获取了数组变量 ( **$options** ) 的值？

如果是这样，您是否从控制器传递了它？因为我在您的控制器中看不到任何将数组传递给您的视图的代码。

# java - 如何在 Java 中记录对存储对象/记录的更改

> ID：11417332
> 
> 赞同：2
> 
> 时间：2012-07-10T16:01:38.830
> 
> 标签：java, pojo

在解决操作问题时，我发现有时很难在没有更多细节的情况下诊断问题。例如，我从时间戳中看到商户记录在特定日期发生了变化，并且前一天的交易处理受到质疑。记录变化可以帮助快速排除可能性。

是否有任何实用程序可以自动进行这种比较？我希望它能够执行以下操作：

```
String logDelta=SomeLibrary.describeChanges(bean1, bean2); 
```

我希望有一个类似的单线：

```
"lastName{'Onassis','Kennedy Onassis'}, favoriteNumber{16,50}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:23:55.237

这称为审计跟踪或审计日志，通常使用触发器或存储过程在数据库中完成，以复制数据库中正在更改的行，其中包含用户名和时间戳。出于合规性原因，这样做很常见。我还没有看到任何为您管理它的软件包，因为它通常与数据库设计非常紧密地耦合。您不一定想要每一行或每个字段的副本，这样做会变得非常昂贵高度交易的环境。

尝试谷歌搜索“审计跟踪”

# php - PHP如何检查fsockopen是否仍然好？

> ID：11417339
> 
> 赞同：1
> 
> 时间：2012-07-10T16:01:56.897
> 
> 标签：php, fsockopen

当我的脚本在 PHP 中打开一个连接`fsockopen`并进入无限循环时，如果连接仍然良好`while`，我如何检查*循环内部？*

例如，如果我的互联网断了，循环仍然会继续，这很糟糕。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:08:57.137

fgets() fwrite() 等等可能会失败。你试过[feof](http://php.net/feof) ()吗？

# ruby-on-rails-3 - Rails URL 访问

> ID：11417340
> 
> 赞同：0
> 
> 时间：2012-07-10T16:01:59.473
> 
> 标签：ruby-on-rails-3

我是 Ruby on Rails 的新手，所以请原谅我的无知。我的问题是我无法从浏览器访问 Rails 项目。我认为它与 Rails 配置有关，但到目前为止我还没有运气。

**项目状态**

*   我有现有的逻辑（控制器、模型、迁移......）。
*   如果我保留 index.html，我会看到 Rails 欢迎页面，因为它显然是在 Rails 尝试解析 URL 之前呈现的。
*   如果我禁用 index.html，我会收到 Rails 生成的“出现问题”消息。
*   如果我将 httpd.conf 文档根设置为“my.domain.com/public”，则会收到 Rails 错误，但如果将其设置为“my.domain.com/”，则会收到 Apache 提供的错误反而。（所以这似乎是正确配置的。）
*   错误日志显示此错误：`File does not exist: /var/www/html/my.domain.com/zombies`当我点击 URL 时。

**我的环境**

*   导轨 3.2.6
*   红宝石 1.9.3
*   阿帕奇 2.2.3
*   中央操作系统

*如果这很重要，我只是按照 Rails for Zombies 2 上的教程进行操作。*

提前致谢！

**参考**

**僵尸控制器.rb**

```
class ZombiesController < ApplicationController
  # GET /zombies
  # GET /zombies.json
  def index
    @zombies = Zombie.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @zombies }
    end
  end

  # GET /zombies/1
  # GET /zombies/1.json
  def show
    @zombie = Zombie.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @zombie }
    end
  end

  # GET /zombies/new
  # GET /zombies/new.json
  def new
    @zombie = Zombie.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @zombie }
    end
  end

  # GET /zombies/1/edit
  def edit
    @zombie = Zombie.find(params[:id])
  end

  # POST /zombies
  # POST /zombies.json
  def create
    @zombie = Zombie.new(params[:zombie])

    respond_to do |format|
      if @zombie.save
        format.html { redirect_to @zombie, notice: 'Zombie was successfully created.' }
        format.json { render json: @zombie, status: :created, location: @zombie }
      else
        format.html { render action: "new" }
        format.json { render json: @zombie.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /zombies/1
  # PUT /zombies/1.json
  def update
    @zombie = Zombie.find(params[:id])

    respond_to do |format|
      if @zombie.update_attributes(params[:zombie])
        format.html { redirect_to @zombie, notice: 'Zombie was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @zombie.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /zombies/1
  # DELETE /zombies/1.json
  def destroy
    @zombie = Zombie.find(params[:id])
    @zombie.destroy

    respond_to do |format|
      format.html { redirect_to zombies_url }
      format.json { head :no_content }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:16:14.580

跑步`rake assets:precompile`似乎解决了我的问题。谢谢大家。

# asp.net - 如何使用 SMTP 通过 Exchange Server 发送邮件

> ID：11417344
> 
> 赞同：4
> 
> 时间：2012-07-10T16:02:20.607
> 
> 标签：asp.net, exchange-server, smtpclient

我想在没有代码的情况下运行

```
NetworkCredential nc = new Net.NetworkCredential("USERNAME", "PASSWORD"). 
```

通过仅使用 Exchange 主机（服务器名称）和端口

我收到此代码错误：邮箱不可用。服务器响应为：5.7.1 客户端无权作为此发件人发送

```
protected void SendEmail(object sender, EventArgs e)
{
    SmtpClient smtpClient = new SmtpClient("ExchangeServerName",25);
    MailMessage message = new MailMessage();
    try
    {
        MailAddress fromAddress = new MailAddress("bala@OfficeName.com", "From Me");
        MailAddress toAddress = new MailAddress("bala@OfficeName.com", "To You");
        message.From = fromAddress;
        message.To.Add(toAddress);
        message.Subject = "Testing!";
        message.Body = "This is the body of a sample message";
        smtpClient.UseDefaultCredentials = true;
        System.Net.NetworkCredential nc = CredentialCache.DefaultNetworkCredentials;
        smtpClient.Credentials = (System.Net.ICredentialsByHost)nc.GetCredential("ExchangeServerName", 25, "Basic");
        smtpClient.Send(message);
        lblText.Text ="Email sent.";
    }
    catch (Exception ex)
    {
        lblText.Text = "Coudn't send the message!\n  " + ex.Message;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:16:15.037

我已经做了。有关我的代码的更多详细信息，请使用[此链接](http://forums.asp.net/t/1822636.aspx/1?How%20Can%20i%20Send%20Mail%20sending%20Through%20Exchange%20Server%20by%20using%20SMTP%20)。

下面的代码可以正常工作

服务器：Windows Server 2003、Windows Server 2008、Windows Server 2008 R2

IIS：6.0、7.0

.Net Frame Wotk : 2.0,3.5,4.0

```
string sMessage;
SmtpClient smtpClient = new SmtpClient();
MailMessage message = new MailMessage();
try
{

 //you can provide invalid from address. but to address Should be valil
MailAddress fromAddress = new MailAddress("bala@technospine.com", "BALA");

smtpClient.Host = "Exchange Server Name";
smtpClient.Port = 25;
//smtpClient.Port = 587;

smtpClient.UseDefaultCredentials = true; 

message.From = fromAddress;
message.To.Add(bala@technospine.com); //Recipent email 
message.Subject = _subject;
message.Body = _details;
message.IsBodyHtml = true;

//smtpClient.EnableSsl = true; 

smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;

smtpClient.Send(message); 

sMessage = "Email sent.";
}
catch (Exception ex)
{
sMessage = "Coudn't send the message!\n " + ex.Message;
}

lblMailStatus.Text = sMessage; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T16:36:48.310

您正在尝试使用 Exchange 发送邮件。为此，发件人（或发送进程）必须对其登录的帐户具有权限，才能代表您指定为发件人的用户进行发送。这与通过 Exchange 的 SMTP 邮件传输代理 (MTA) 以使 Exchange 接收和路由电子邮件不同。因此，您知道应该使用 SMTP 执行此操作是正确的，但您只是尝试使用错误的 API 来完成此操作。您想查看 CDOSYS 以通过 SMTP MTA 发送它，而无需进行用户身份验证。在 System.Web.Mail.MailMessage 上搜索更具体的示例 - 那里有很多。如果 Exchange 服务器似乎不接受/传递以这种方式传递给它的 SMTP 邮件，您可能只需要稍微打开它的配置。在这种情况下，Exchange 服务器可能对通过其 SMTP MTA 接收的邮件的路由进行了严格的安全配置，并且只需要配置您发送这些邮件的机器的 IP 地址以允许邮件转发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:21:12.633

尝试 NetworkCredential nc = new Net.NetworkCredential("USERNAME", "PASSWORD","DOMAIN")

# php - 我需要在不使用 JavaScript 的情况下验证我的表单

> ID：11417345
> 
> 赞同：1
> 
> 时间：2012-07-10T16:02:24.010
> 
> 标签：php, javascript, html, internet-explorer

如何在不使用 JavaScript 的情况下验证我的表单？我已经使用了所需的 HTML 5 属性，但由于 IE 不支持 IE (ANNOYING)，有没有办法使用 PHP 来解决这个问题，这需要时间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:04:52.660

您可以使用 PHP 来验证使用服务器：

[http://thinkvitamin.com/code/php-form-validation/](http://thinkvitamin.com/code/php-form-validation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:05:47.327

仅服务器端验证（即在 PHP 中）或使用 javascript。虽然，我会选择服务器端部分 - 这是最安全的，因为坏用户可能会从客户端伪造坏数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:05:47.860

您应该*始终*在服务器端进行验证（例如，使用 PHP）。可能有很多库可以使这更容易并节省您一些时间，但原理非常简单：

```
if (isset($_POST['submit'])) {
   $name = isset($_POST['name']) ? $_POST['name'] : null;
}
$errors = '';
if (!$name or strlen($name) < 5) {
   $errors .= 'Name must not be empty and at least five characters';
}
if ($errors) {
   echo $errors;
}
else {
   //Store data from the form or whatever you want to do.
} 
```

我还建议使用 Post/Redirect/Get

# html - 推荐包装哪些标签 ?

> ID：11417346
> 
> 赞同：1
> 
> 时间：2012-07-10T16:02:24.040
> 
> 标签：html, xhtml, markup, validation

使用`<p>`元素肯定是错误的，因为`<p>`只能包含内联元素[。W3 验证器](http://validator.w3.org)会抛出错误：

> **文档类型不允许在此处使用元素“p”；...**

*推荐*哪些标签包含`<p>`元素？

换句话说，推荐哪些标签包含块级元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:11:50.647

在 HTML5 中，可以包含的元素`<p>`有：

那些可以有“流动”孩子的人；

**地址，文章，旁边，块引用，正文，标题，dd，详细信息，对话框，div，dt，字段集，figcaption，图，页脚，表单，标题，li，菜单，导航，部分，td，th**

那些拥有“透明”内容模型的人，*他们的*父母可以拥有“流动”的孩子；

**a、音频、画布、del、ins、地图、对象、视频**

来源：[http](http://dev.w3.org/html5/spec/section-index.html#elements-1) ://dev.w3.org/html5/spec/section-index.html#elements-1 ，“元素”和“儿童”列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:06:50.957

更好的方法是`<div>`尽可能多地使用：

```
html > body > div > p > span 
```

`<p>`用于段落，那么你不应该在里面有任何块元素。

当您拥有所见即所得的编辑器时，通常会出现一个问题，用户可以在其中添加自己的`<p>`标签。然后`<div>`很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:10:46.487

一般来说，`<div>`会使用元素，但可以使用更多语义标签。如果内容是引用，您可能想要使用`<blockquote>`.

如果您使用的是 HTML5，还有更多可供选择，例如`<header>`、`<section>`和`<article>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:10:59.500

根据**[W3](http://www.w3.org/TR/html-markup/p.html)**，段落的父级可以是任何可以包含[流元素的元素](http://www.w3.org/TR/html-markup/common-models.html#common.elem.flow)。流元素是：

> [短语元素](http://www.w3.org/TR/html-markup/common-models.html#common.elem.phrasing)，a，p，hr，pre，ul，ol，dl，div，h1，h2，h3，h4，h5，h6，hgroup，地址，blockquote，ins，del object，map，noscript，section，nav，文章、旁边、页眉、页脚、视频、音频、图形、表格、表单、字段集、菜单、画布或详细信息

# visual-studio-2010 - cmake Visual Studio 按库使用不同的配置

> ID：11417350
> 
> 赞同：1
> 
> 时间：2012-07-10T16:02:46.780
> 
> 标签：visual-studio-2010, cmake, configurationmanager

我正在尝试将不同的配置用于多库使用。

我解释：我必须为一个解决方案使用多个库，但我需要更改每个库目标的配置，为了调试使用我的解决方案，一些库将处于“调试”模式，但其他一些库需要“渲染”配置. （这是 3rdParty 项目，我无法编辑它们）

我想知道它是否可能。谢谢 ！

这是我想要的结果示例：

[http://i48.tinypic.com/mtugqf.png](http://i48.tinypic.com/mtugqf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:54:20.990

你几乎可以做到这一点。CMake 允许通过设置进行额外的配置[`CMAKE_CONFIGURATION_TYPES`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#variable%3aCMAKE_CONFIGURATION_TYPES)，所以在你的情况下，这将是

```
set(CMAKE_CONFIGURATION_TYPES "${CMAKE_CONFIGURATION_TYPES};Render" CACHE STRING "" FORCE) 
```

这需要在`project`命令之后。

*但是，这会为所有*目标添加新的配置类型。我认为 CMake 没有能力为各个目标混合不同的配置。一旦 CMake 创建了 .sln，您仍然需要通过配置管理器手动修改特定库的配置。

# c++ - 如何为 IOCP 构建工作线程逻辑

> ID：11417351
> 
> 赞同：0
> 
> 时间：2012-07-10T16:02:52.030
> 
> 标签：c++, oop, winsock2, iocp

我正在创建一个客户端程序，该程序与通过 LAN 连接到我的 PC 的设备进行通信。

我的程序和设备之间的典型通信如下：

```
Program -> Device   1616000D  08 02 00 00 00 21 11 A1 00 01 22 08 00 // Sender sends data (a specific command to the device) to Receiver
Program <- Device   16160002  80 00 // Receiver sends ACK to sender
Program <- Device   16160005  08 20 00 00 00 // Receiver sends command response to sender
Program -> Device   16160002  80 00 // Sender sends ACK to receiver 
```

第一个字节序列的最后一个十六进制数字表示后面的数据大小（D = 13 字节）。

我的发送例程如下所示：

```
bool TcpConnection::SendCommand(const Command& rCommand, const std::vector<BYTE>& rvecCommandOptions)
{
    std::vector<BYTE> vecCommandData;
    m_commandBuilder.BuildCommand(rCommand, rvecCommandOptions, vecCommandData);

    if (vecCommandData.empty())
        return false;

    PerIoData *pPerIoData = new PerIoData;
    if (!pPerIoData)
        return false;

    SecureZeroMemory(&(pPerIoData->m_overlapped), sizeof(WSAOVERLAPPED));

    pPerIoData->m_socket = m_socket.Get();
    pPerIoData->m_overlapped.hEvent = WSACreateEvent();
    pPerIoData->m_vecBuffer.assign(vecCommandData.begin(), vecCommandData.end());
    pPerIoData->m_wsaBuf.buf = (CHAR*)(&(pPerIoData->m_vecBuffer[0]));
    pPerIoData->m_wsaBuf.len = pPerIoData->m_vecBuffer.size();
    pPerIoData->m_dwFlags = 0;
    pPerIoData->m_dwNumberOfBytesSent = 0;
    pPerIoData->m_dwNumberOfBytesToSend = pPerIoData->m_wsaBuf.len;
    pPerIoData->m_operationType = OP_TYPE_SEND;

    if (!m_socket.Send(pPerIoData))
        return false;

    return true;
} 
```

我的工作线程例程看起来像：

```
DWORD WINAPI TcpConnection::WorkerThread(LPVOID lpParameter)
{
    HANDLE hCompletionPort = (HANDLE)lpParameter;
    DWORD dwNumberOfBytesTransferred;
    ULONG ulCompletionKey;
    PerIoData *pPerIoData;

    DWORD dwNumberOfBytesReceived;
    DWORD dwNumberOfBytesSent;
    DWORD dwFlags;

    while (GetQueuedCompletionStatus(hCompletionPort, &dwNumberOfBytesTransferred, &ulCompletionKey, (LPOVERLAPPED*)&pPerIoData, INFINITE)) 
    {
        if (!pPerIoData)
            continue;

        if ((dwNumberOfBytesTransferred == 0) && ((pPerIoData->m_operationType  == OP_TYPE_SEND) || (pPerIoData->m_operationType  == OP_TYPE_RECEIVE)))
        {
            closesocket(pPerIoData->m_socket);
            delete pPerIoData;
            continue;
        }

        if (pPerIoData->m_operationType == OP_TYPE_SEND)
        {
            pPerIoData->m_dwNumberOfBytesSent += dwNumberOfBytesTransferred;
            if (pPerIoData->m_dwNumberOfBytesSent < pPerIoData->m_dwNumberOfBytesToSend)
            {
                pPerIoData->m_wsaBuf.buf = (CHAR*)(&(pPerIoData->m_vecBuffer[pPerIoData->m_dwNumberOfBytesSent]));
                pPerIoData->m_wsaBuf.len = (pPerIoData->m_dwNumberOfBytesToSend - pPerIoData->m_dwNumberOfBytesSent);

                if (WSASend(pPerIoData->m_socket, &(pPerIoData->m_wsaBuf), 1, &dwNumberOfBytesTransferred, 0, &(pPerIoData->m_overlapped), NULL) == 0)
                    continue;

                if (WSAGetLastError() == WSA_IO_PENDING)
                    continue;
            }
            else if (pPerIoData->m_dwNumberOfBytesSent == pPerIoData->m_dwNumberOfBytesToSend)
            {
                delete pPerIoData;
            }

            // Q1\. Do I create a new instance of PerIoData here before calling WSARecv() or reuse pPerIoData?

            // QA. If I did do "PerIoData pPerIoData = new PerIoData" here, how do I handle if this momory allocation request has failed?  Should I simply "continue" or "return -1"?

            // QB. Or is this a wrong place to do this memory allocation to achive the typical communication between my program and the device?

            SecureZeroMemory(&(pPerIoData->m_overlapped), sizeof(WSAOVERLAPPED));

            pPerIoData->m_overlapped.hEvent = WSACreateEvent();
            pPerIoData->m_wsaBuf.buf = (CHAR*)(&(pPerIoData->m_vecBuffer[0]));
            pPerIoData->m_wsaBuf.len = pPerIoData->m_vecBuffer.size();
            pPerIoData->m_operationType = OP_TYPE_RECEIVE;

            if (WSARecv(pPerIoData->m_socket, &(pPerIoData->m_wsaBuf), 1, &dwNumberOfBytesReceived, &(pPerIoData->m_dwFlags), &(pPerIoData->m_overlapped), NULL) == 0)
                continue;

            if (WSAGetLastError() == WSA_IO_PENDING)
                continue;
        }
        else if (pPerIoData->m_operationType == OP_TYPE_RECEIVE)
        {
            if ((pPerIoData->m_vecBuffer[0] == 0x16) && (pPerIoData->m_vecBuffer[1] == 0x16))
            {
                // Q2\. Do I need to do SecureZeroMemory(&(pPerIoData->m_overlapped), sizeof(WSAOVERLAPPED)); here?

                // Q3\. Or do I new PerIoData?

                pPerIoData->m_wsaBuf.buf = (CHAR*)(&(pPerIoData->m_vecBuffer[0]));
                pPerIoData->m_wsaBuf.len = pPerIoData->m_vecBuffer.size();
                pPerIoData->m_operationType = OP_TYPE_RECEIVE;

                // QC. At this point two syn bytes (0x16) are received.  I now need to receive two more bytes of data (000D = 13 bytes) to find out the size of the actual command response data.
                // If I clear my m_vecBuffer here and try to resize its size to two, I get this debug assertion: "vector iterators incompatible" at runtime.  Do you know how I can fix this problem?

                if (WSARecv(pPerIoData->m_socket, &(pPerIoData->m_wsaBuf), 1, &dwNumberOfBytesReceived, &(pPerIoData->m_dwFlags), &(pPerIoData->m_overlapped), NULL) == 0)
                    continue;

                if (WSAGetLastError() == WSA_IO_PENDING)
                    continue;
            }

            // QD. I'm not sure how to structure this if clause for when m_operationType is OP_TYPE_RECEIVE.  I mean how do I distinguish one receive operation for getting two syn bytes from another for getting data size?
            // One way I can think of doing is to create more receive operation types such as OP_TYPE_RECEIVE_DATA_SIZE or OP_TYPE_RECEIVE_DATA?  So you can have something like below.
            // Is this how you would do it?
        }
        //else if (pPerIoData->m_operationType == OP_TYPE_RECEIVE_DATA_SIZE)
        //{
            // Call WSARecv() again to get command response data
        //}
    }

    return 0;
} 
```

请在上面的代码中查看我的问题。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:22:46.660

1.  正如您的`PerIoData`类型名称所指的那样，*每个不完整的 I/O 请求*都需要一个数据结构。从`PerIoData`您使用 启动异步 I/O`WSASend`或`WSARecv`直到您使用`GetQueuedCompletionStatus`.
2.  `OVERLAPPED`当你要开始一个新的请求时，你应该总是重新初始化你的结构。
3.  `PerIoData`只要 I/O 请求完成，您就可以重新使用该结构。鉴于您已从`pPerIoData`I/O 完成端口检索，您可以将其重用于后续请求。只需确保您已重置该结构中的所有适用字段，使其处于适合新 I/O 请求的状态。

编辑回答后续问题：

A. 我愿意`continue`，因为您想继续处理 I/O 事件，即使您无法发起附加请求。如果你不这样做，`continue`那么你将无法处理更多的 I/O 完成。在`continue`您可能想要调用某种错误处理程序之前。

B. 我认为没有必要分配“正确”或“错误”的位置，但请记住，当您在`PerIoData`那里分配时，您实际上最终要做的是重复分配和删除相同的数据结构在一个循环中。当我使用 I/O 完成端口编写代码时，我会预先分配一个`PerIoData`等效池并重新使用它们。

C. 我没有足够的上下文来知道答案。显示执行此操作的代码以及断言命中的行，我可能会提供帮助。

D. 您可以按照您的建议将您的操作类型分解为更细粒度的组件，例如`OP_TYPE_RECEIVE_DATA_SIZE`操作。作为警告，在每次`WSARecv`调用时读取几个字节不会像您希望的那样执行。Winsock 调用很昂贵；请求几个字节的开销很大。我建议您将更大的数据块读入`PerIoData`一个缓冲区`WSARecv`。然后将您的尺寸信息从该缓冲区中提取出来，然后开始将您的数据从该缓冲区中复制出来。如果到达的数据多于缓冲区无法容纳的数据，那么您可以进行额外`WSARecv`的调用，直到您读完其余数据。

# android - Android：将广播接收器变成服务

> ID：11417352
> 
> 赞同：0
> 
> 时间：2012-07-10T16:03:08.473
> 
> 标签：android, service

感谢我在上一个问题中从某人那里得到了很多帮助，我比以前更领先了。现在我需要弄清楚如何将此广播变成服务。还是我需要制作第三个文件并从该课程中提供服务？

任何帮助都会很酷！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:12:22.237

创建一个扩展服务的类。

```
public class myService extends Service{ 
```

并使用传递给 BroadcastReceiver 的 Application Context 对象来启动服务。

```
context.startService(intent); 
```

如果您需要从 Intent 对象中携带数据，请将一组附加内容放入您在调用时创建的 Intent 对象中

```
sendBroadcast(Intent intent); 
```

# c# - 如何在 Asp.Net 中的 Server.Transfer 之前设置响应头？

> ID：11417355
> 
> 赞同：4
> 
> 时间：2012-07-10T16:03:25.890
> 
> 标签：c#, asp.net, http-headers, response.redirect, server.transfer

我有一个页面，根据某些条件，我正在执行 Response.Redirect 或 Server.Transfer。现在我想为这两种情况添加一个标题。所以我正在做以下事情

```
 Response.AddHeader("Vary", "User-Agent");

    if (condition) 
    {
        Server.Transfer(redirectUrl);
    }
    else
    {
        Response.Redirect(redirectUrl);
    } 
```

现在，当代码通过 Server.Transfer 代码路径时，Vary 标头设置为 *，而当它通过 Response.Redirect 时，标头正确设置为 User-Agent。

为什么会发生这种情况，如何将两种情况的响应标头设置为相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T16:07:59.617

当你调用 时`Server.Transfer`，当前页面的 Response 对象将被目标页面的 Response 对象**替换**（也就是实际发送给用户的 Response）。所以，如果你想设置这个特定的标题属性，你必须在目标页面上进行。

如果它是有条件的，也许您可​​以使用`HttpContext.Items`在第一页设置并在第二页读取的属性。

问候

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T16:24:45.873

Andre 正确地将 Response 对象替换为`Server.Transfer`. 如果您想使您正在传输的页面与父级无关，您可能可以将信息输入`HttpContext.Items`其中，然后使用 an`IHttpModule`来提取信息并适当地配置标题。像这样的东西可能会完成这项工作......

```
Items.Add(VaryHttpModule.Key, "User-Agent");

if (condition) 
{
    Server.Transfer(redirectUrl);
}
else
{
    Response.Redirect(redirectUrl);
}

public class VaryHttpModule : IHttpModule
{
    public const string Key = "Vary";

    public void Init(HttpApplication context)
    {
        context.PostRequestHandlerExecute +=
            (sender, args) =>
                {
                    HttpContext httpContext = ((HttpApplication)sender).Context;
                    IDictionary items = httpContext.Items;
                    if (!items.Contains(Key))
                    {
                        return;
                    }

                    object vary = items[Key];
                    if (vary == null)
                    {
                        return;
                    }

                    httpContext.Response.Headers.Add("Vary", vary.ToString());
                };
    }

    public void Dispose()
    {
    }
} 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-24T07:21:29.770

在中添加标题`Source.aspx`并且不要更改中的标题`Destination.aspx page`。

如果要将结果页面显示为 html，则应将标题添加`content-type`为`text/html`

# python - Python ldif注入和csv读取脚本

> ID：11417356
> 
> 赞同：0
> 
> 时间：2012-07-10T16:03:30.233
> 
> 标签：python, csv

有人可以帮我弄清楚我做错了什么吗？我正在编写一个 python shell 脚本，它接受一个 ldif 文件和一个 csv 文件，然后将 csv 文件中的内容附加到 ldif 中每条记录的末尾。就像是：

CSV 样本：

```
    “核心价值”
    "abc","def"
    “富”、“酒吧”
    “qwop”，“翻牌”

```

示例 .ldif：

```
    dn：阿齐兹
    cn: Aziz_09

    dn：卡尔
    cn: 卡尔_04

```

python myscript.py "sample.ldif" "sample.csv" 之后

```
    dn：阿齐兹
    cn: Aziz_09
    核心价值
    abc：定义
    富：酒吧
    qwop：翻牌

    dn：卡尔
    cn: 卡尔_04
    核心价值
    abc：定义
    富：酒吧
    qwop：翻牌

```

到目前为止，我的代码可以编译，但是它没有正确修改文件。我正在创建一个对象，该对象在创建时采用 csv 文件路径名字符串，然后将键存储到列表字段中，并将值存储到列表字段中。然后我打开 ldif 文件，解析记录之间的转义字符，并在每条记录的末尾插入列表字段（KEY 和 VALUE）：

```
    导入系统，csv

    # 创建可以打开 csv 并在其数组中设置 csv 数据的新对象
    类容器（对象）：
      def __init__(self, filename=None, keys=None, values=None):
        self.filename = 文件名
        self.keys = []
        自我价值 = []

      # 打开 self.filename 并将第 0 行和第 1 行分别放入键和值中  
      def csv_to_list():
        使用 open(self.filename, 'rb') 作为 f：
          阅读器 = csv.reader(f)
          对于阅读器中的行：
            self.keys = 行[0]
            self.values = 行[1]

    haruhi = Container("./content/test_pairs.txt")
    haruhi.csv_to_list

    # 打开命令行调用 ldif_record_a.py 的第一个参数进行读/写
    使用 open(sys.argv[1],'r+') 作为 f1：
      lines=[x.strip() for x in f1] # 创建列表，每行作为一个元素
      f1.truncate(0)
      f1.seek(0)
      计数 = 0
      对于 x 行：
         如果 x：
           f1.write(x+'\n')
         别的：
           f1.write("{0}: {1}\n\n".format(haruhi.keys[count] , haruhi.values[count]))
           计数 = 计数 + 1
      f1.write("{0}: {1}\n\n".format(haruhi.keys[count] , haruhi.values[count]))

```

我是 Python 新手！任何帮助、建议和/或资源方向将不胜感激！谢谢你这么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:52:15.987

好的，我特设了这个，所以它需要工作，但这里是：

```
import csv
import re

csv_data = list(csv.reader(open('/home/jon/tmp/data.csv'))) # (1)
csv_text = '\n' + '\n'.join('{0} : {1}'.format(*row) for row in csv_data) # (2)

with open('/home/jon/tmp/other.ldif') as f:
    contents = f.read() # (3)
    print re.sub(r'(\n\n)|(\n$)', csv_text + '\n\n', contents) # (4) 
```

*   (1) 将 CSV 文件读入列表列表

    csv_data == [['KEY', 'VALUE'], ['abc', 'def'], ['foo', 'bar'], ['qwop', 'flop']]

*   (2) 创建要附加到每个 ldif 的文本表示

    键：值 abc：def foo：bar qwop：翻牌

*   （3）打开并将整个内容读入内存（不是很有效率请注意）

*   (4)使用正则表达式查找ldif后面的“下一位”并放入文本

**印刷：**

```
dn: Aziz
cn: Aziz_09
KEY : VALUE
abc : def
foo : bar
qwop : flop

dn: Carl
cn: Carl_04
KEY : VALUE
abc : def
foo : bar
qwop : flop 
```

您需要调整它以将数据写回或任何您想要的......，但这是一个可能的起点 - 但强烈建议您使用它作为基础来完成 Python 手册。随时要求任何澄清。

# objective-c - 如何使用 QTKit 垂直反射捕获的视频？

> ID：11417366
> 
> 赞同：0
> 
> 时间：2012-07-10T16:04:11.990
> 
> 标签：objective-c, cocoa, qtkit

我有一个 QTCaptureSession 设置，它的输入是 QTCaptureDeviceInput （使用与网络摄像头对应的 QTCaptureDevice 初始化）；QTCaptureLayer 已将其会话设置为此 QTCaptureSession。这一切都很顺利。

但是，我想垂直反射（即“镜像”）捕获的视频。除了使用 QTCaptureVideoPreviewOutput、CAOpenGLLayer 和自定义内核之外，有没有内置于 QTKit 的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:15:35.707

由于 QTCaptureLayer 是 CALayer 的子类，我们只需在 QTCaptureLayer 上设置仿射变换即可达到此效果。

# iphone - 不要传递对 UISlider 的触摸

> ID：11417369
> 
> 赞同：1
> 
> 时间：2012-07-10T16:04:19.267
> 
> 标签：iphone, ios, uigesturerecognizer, uislider

我有一个 iPad 界面，可以用一根手指左右移动不同的视图（例如 Twitter iPad 界面）。

我有一个问题，因为我在一个视图上有一个滑块，当我开始滑动时，主（底层）视图上的 UIGestureRecogniser 也开始作用于移动。

有没有办法防止这种情况？只有 UISlider 采取触摸动作，而底层视图不动作？我的意思是要记住 UIGestureRecognisers 有一个变量，但无法为视图/滑块找到它。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:06:16.307

设置专属触摸属性：

```
[view setExclusiveTouch:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T17:46:53.380

我搜索了几个小时，并为我完成了诡计工作。

**视图控制器.h**

```
@property (weak, nonatomic) IBOutlet UIScrollView *yourScrollView; 
```

**视图控制器.m**

```
- (void)viewDidLoad
{
yourScrollView.delaysContentTouches = NO;
} 
```

# cordova - 不要使用 Phonegap 1.9.0 的插件 ChildBrowser

> ID：11417374
> 
> 赞同：1
> 
> 时间：2012-07-10T16:04:28.657
> 
> 标签：cordova, phonegap-plugins, childbrowser

不要使用Phonegap 1.9.0（使用android版本）的插件ChildBrowser（https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser）。ChildBrowser.java 中有一些错误。javascript 写道 window.plugins 已弃用。

有人有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T20:43:27.593

我已经在我的 Dropbox 帐户中发布了一个升级的[ChildBrowser.java](https://dl.dropbox.com/u/887989/ChildBrowser.java)，它适用于 1.9.0。我没有将更改推送到 github，因为我想这样做，以便在 2.0.0 中您无需更新插件 src 代码即可让它们在最新版本的 PG 中工作。我希望在 2.0.0 发布之前检查该更改，以便我们都可以通过有关如何升级插件的良好说明继续前进。

作为跟进，这是我关于 kerfuffle 的博客文章。

[http://simonmacdonald.blogspot.ca/2012/07/phonegap-android-plugins-sometimes-we.html](http://simonmacdonald.blogspot.ca/2012/07/phonegap-android-plugins-sometimes-we.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:57:32.473

我确实设法使它与 Cordova 1.9.0 一起工作，`ChildBrowser.java`文件中几乎没有更改。

我所做的更改：

*   `ctx.getContext()`替换为`ctx.getActivity().getApplicationContext()`
*   `ctx.startActivity()`替换为`ctx.getActivity().startActivity()`
*   `ctx.getSystemService()`替换为`ctx.getActivity().getSystemService()`
*   `ctx.getAssets()`替换为`ctx.getActivity().getAssets()`
*   `ctx.runOnUiThread()`替换为`ctx.getActivity().runOnUiThread()`
*   `new Dialog(ctx.getContext(), android.R.style.Theme_NoTitleBar)`替换为`new Dialog(ctx.getActivity(), android.R.style.Theme_NoTitleBar)`

我没有积极测试，但它确实适用于基本测试。我可能更换了错误的东西或遗漏了任何东西，但上述更改工作正常。

完整来源 - [https://gist.github.com/3085079](https://gist.github.com/3085079)

我已经在 Android 2.2 上使用 Cordova 1.9 进行了测试

# backbone.js - 在 Backbone 视图中的 model.set 后无法引用 Backbone 模型

> ID：11417376
> 
> 赞同：0
> 
> 时间：2012-07-10T16:04:33.290
> 
> 标签：backbone.js, backbone-events, backbone-views

我试图通过将更改事件绑定到视图模型来让视图自我呈现。我在 PageView 上创建了一个自定义函数，它将 Pages 集合中的模型作为参数，并使用 this.model.set(data) 来触发模型更改事件。当我通过 this.page.load(Pages.at(index)) 将 AppView 中的 Pages 集合中的 Page 模型传递给它时，就会触发这种情况。我遇到了一些问题。

1.  change 事件仅在 2 个不同模型之间来回切换时触发一次，我可以通过运行 this.model.clear({silent:true}) 来解决这个问题，但这并不理想。
2.  this.model 在除 PageView 中的 load() 函数之外的任何函数中始终未定义，这确实是主要问题，因为如果模型未定义，我显然无法触发 this.render。因此测试：函数（）。

无论如何，这是我的 AppView 和 PageView 函数的代码。提前感谢您的帮助。

```
 define([
      // These are path alias that we configured in our bootstrap
      'jquery',
      'underscore',
      'backbone',
      'handlebars',
      'views/pageView',
      'views/menuView',
       'collections/pages'
    ], function($, _, Backbone, Handlebars,PageView,MenuView,Pages){
        var AppView = Backbone.View.extend({

            //Stores a reference to our main menu
            mainMenu:{},

            //Stores reference to current page
            page:{},

            //The parent div
            el:'#app',

            //Events that are being listened to on #app
            events:{"click"     : "active"},

            //Process to run when this view is initialized
            initialize:function(){

                //Load our Pages Collection
                Pages.reset(this.model.pages);

                //Load the main menu
                this.mainMenu = new MenuView;
                this.mainMenu.model = this.model.main_menu;
                this.mainMenu.render();

                //Loads the page view
                this.page = new PageView({model:Pages.at(0)});
            },

            //Currently just renders a page view with a designated model from the Pages collection
            render:function(index){
                this.page.load(Pages.at(index));
            },

            active:function(event){
              $('.menu a').removeClass('active');
              $('.menu a[href="' + event.target.hash + '"]').addClass('active');
            }

        });
      return AppView;
      // What we return here will be used by other modules
    });

            define([
          // These are path alias that we configured in our bootstrap
          'jquery',
          'underscore',
          'backbone',
          'handlebars',
          'text!templates/page.html',
        ], function($, _, Backbone, Handlebars, pageViewTemplate){
            var PageView = Backbone.View.extend({

                //Define the default template
                template: Handlebars.compile(pageViewTemplate),

                //The parent div for this element
                el:'#content',

                initialize:function(){
                    this.model.bind('change',this.test);
                },
                load:function(data){
                    this.model.set(data);       
                },
                //Render function
                render:function(){
                    this.$el.html(this.template(this.model.toJSON()));
                    return this;
                },
                test:function(){
                    console.log(this.model);
                    console.log('change');
                }
            });
          return PageView;
          // What we return here will be used by other modules
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:25:49.967

在绑定调用中设置上下文是否会为您解决问题？

```
initialize:function(){
    this.model.bind('change',this.test, this);
}, 
```

# c# - opentk / C# 键盘状态

> ID：11417378
> 
> 赞同：0
> 
> 时间：2012-07-10T16:04:43.793
> 
> 标签：c#, keyboard, opentk

使用[OpenTK](http://www.opentk.com/)时，我遇到了键盘状态问题。我正在尝试使用 Keyboard.GetState() 但它失败了。

基本上我想要实现的是一次“点击”。因为状态检查在 UpdateFrames 中，所以检查相隔几毫秒，这意味着单个按键将多次触发事件。

我不想使用 KeyRepeat.False，因为我仍然希望像 W、S、A 和 D 这样的键在每帧更新。我只想对一些键进行单次检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:35:45.507

现在我切换到 XNA 来处理输入，因为我认为 OpenTK 输入还没有完全开发。在那方面要容易得多，只需设置一个 KeyboardState 并使用当前的状态测试最后一个的状态。如果它们不相同，则只是按下按钮。

# php - usort array of values putting indexes with no value at the bottom

> ID：11417381
> 
> 赞同：0
> 
> 时间：2012-07-10T16:04:48.893
> 
> 标签：php, date, sorting, usort

I am using usort to sort my arrays. I have an array that contains warranty dates. And a sort function that sorts it. However the problem I am having is that not all of the items in the array have a warranty. I want to sort the array but always placing the ones with no date at the bottom.

```
function warrantyA($a, $b){
    if($a->Warranty == "Available" and $b->Warranty == "Available"){
        $a = explode('/', $a->WarrantyDescription);
        $b = explode('/', $b->WarrantyDescription);

        $today = date("d-m-Y");

        $diffa = abs(strtotime($a[0]) - strtotime($today));
        $diffb = abs(strtotime($b[0]) - strtotime($today));

        $a = floor($diffa / 86400 / 30 );
        $b =  floor($diffb / 86400 / 30 );
        return $a - $b;
    }
} 
```

The above is the code I have now.It does not work the way I want it to. Each object has warranty and warranty description. If there is a warranty then it will say "Avaiable".

The code take the warranty and compares it to today's date to determine the amount of months left on the warranty and I want to sort it by that number.

How can I make this functional so that any item that has no warranty is placed at the bottom of the array?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:11:30.630

Here is a bit of a trick: Turn the results of `$a->Warranty=="Available"` and `$b->Warranty == "Available"` into ints ( will be zero or one), then do a similar subtraction to what you have. If a has a warranty and b doesn't, this will be 1 - 0, or a is greater. If a does not but b does, it will return -1, and 0 if they both don't.

```
$a_has = (int) $a->Warranty == "Available";
$b_has = (int) $b->Warranty == "Available";
if($a_has and $b_has){
    // keep your code here
}

return $a_has - $b_has; 
```

# jquery-plugins - Ember 数据日期绑定

> ID：11417383
> 
> 赞同：6
> 
> 时间：2012-07-10T16:04:50.790
> 
> 标签：jquery-plugins, twitter-bootstrap, ember.js, handlebars.js

我正在使用 ember-data 并且有一个内置的日期类型对象。我将它连接到日期选择器（基于 Twitter 引导组件）。问题是我在输入标签中创建了一个日期属性来存储日期对象。日期对象存储为长字符串。这必须以某种方式解析为日期对象，然后存储到 App.store 中。我在哪里做这个转换。这是我到目前为止所做的。

```
App.DatePicker = Ember.View.extend({
    classNames: ['ember-text-field','input-small'],
    tagName: "input",
    attributeBindings: ['data','value','format','readonly','type','size'],
    size:"16",
    type: "text",
    format:'mm/dd/yyyy',
    value:function(){
        var date = this.get('data');
        if(date)
            return date.format(this.get('format'));
        else
            return "";
    }.property('data'),
    data:null,
    didInsertElement:function(){
        this.$().datepicker({
            format:this.get(this.get('format'))
        }).on('changeDate', function(ev){
            console.log(ev.date);
            console.log(ev.target);
            ev.target.setAttribute('data',ev.date);
         });
    }
}); 
```

我在这样的视图模板中使用它

```
{{view App.DatePicker dataBinding="staff.emp_edate" format="mm/dd/yyyy"}} 
```

当日期更改时设置日期属性时，日期属性正在更改，该属性绑定到staff.emp_edate。不幸的是，staff.emp_edata 没有改变。

任何指针都会有很大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T17:24:08.090

尝试以下操作：

**小提琴**：http: [//jsfiddle.net/ppanagi/9rCBL/](http://jsfiddle.net/ppanagi/9rCBL/)

```
App.DatePicker = Ember.View.extend({

  // ... leave the rest as is

  didInsertElement: function(){
     var self = this;

     var onChangeDate = function(ev) {
        self.set('data', ev.date);
     };
     var format = this.get('format');

     this.$().datepicker({ format: format })
         .on('changeDate', onChangeDate);
  }
}); 
```

# css - 显示：内联表等效跨浏览器

> ID：11417387
> 
> 赞同：3
> 
> 时间：2012-07-10T16:05:02.603
> 
> 标签：css, html, cross-browser

我`<td>`在 HTML 表的属性中有 2 个单选按钮。他们都有一个`<label>`标签。正如我们所知，表格标签没有属性宽度，我正在尝试找到一个跨浏览器解决方案来在每个单选按钮的标签之间设置一个空格。

我有这个代码：

```
<td class="changeUnitsSetLabelWidth">
  <?php echo $form->radio("changeUnitsMode",UnitsTabComponent::SET_ALL_METRIC)->set("id","changeUnitsMode_metric") . $form->label("changeUnitsMode", "Metric")->set("for","changeUnitsMode_metric");
        echo $form->radio("changeUnitsMode", UnitsTabComponent::SET_ALL_IMPERIAL)->set("id","changeUnitsMode_imperial") . $form->label("changeUnitsMode", "Imperial")->set("for","changeUnitsMode_imperial");
  ?>
</td> 
```

我在我的 CSS 中添加了以下行：

```
.changeUnitsSetLabelWidth label{ display: inline-table; width: 80px;} 
```

在互联网上搜索后，我发现它不适用于 IE7（什么新闻！？！）所以我希望你帮我找到另一种显示方式：inline-table，以我可以设置的方式标签中的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:22:47.113

using`display:inline-table`在这里没有任何意义。只需`display:inline-block`为两者之间的空间设置和设置宽度和边距，就可以了。

表现得像 inline-block 的 IE7 hack 是：

```
 zoom: 1;
 *display: inline; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:15:16.307

试试这个：

```
.changeUnitsSetLabelWidth input,
.changeUnitsSetLabelWidth label {
    float: left;
}
.changeUnitsSetLabelWidth label {
    padding-left: 10px;
    padding-right: 10px;
    width: 80px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T07:58:11.880

我找到的解决方案是全部更改，而不是在属性中使用，而是在`<td>`属性中使用它`<div> <span>`并且效果很好。谢谢您的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T15:01:45.360

我的问题已解决

```
.my-class{
    *display: inline; 
    zoom: 1; 
    vertical-align: top;` 
} 
```

它使所有元素保持顶部对齐。

# actionscript-3 - Flex Spark VideoObject 为空

> ID：11417391
> 
> 赞同：0
> 
> 时间：2012-07-10T16:05:09.040
> 
> 标签：actionscript-3, apache-flex, flex-spark

我正在使用火花视频组件，但是火花视频对象为空，当使用动态视频源对象时它仍然为空。相机被正确检测，但是当使用变量时它为空，当直接使用相机对象时检测到usb相机并且videoobject仍然为空......有什么想法吗？？？

现在，当使用 Camera.names 时，所有“相机”都为空，当从 apache 虚拟主机播放视频时，它播放得很好，这太奇怪了......！

根据要求，更新的代码：

```
import mx.controls.Alert;
            import mx.events.FlexEvent;
            import spark.components.VideoPlayer;

            private var vidPlyr:VideoPlayer = null;

            protected function winAppCreated(event:FlexEvent):void {
                // Video Player
                vidPlyr = new VideoPlayer();
                vidPlyr.width = 320;
                vidPlyr.height = 240;

                // Video from apache virtualhost:
                vidPlyr.source = "http://flex.test.capimg/JormaKaukonenCracksInTheFinish.flv";
                addElement(vidPlyr);

                var cameraTV:Camera = Camera.getCamera(Camera.names[0]);
                var cameraUSB:Camera = Camera.getCamera(Camera.names[1]);

                if (cameraTV) {
                    vidPlyr.videoDisplay.videoObject.attachCamera(cameraTV);
                } else {
                    Alert.show("no TV card - " + Camera.names[0]);
                    // Alert shows: "no TV card - SAA7130 Analog TV Card" 
                }

                if (cameraUSB) {
                    vidPlyr.videoDisplay.videoObject.attachCamera(cameraUSB);
                } else {
                    Alert.show("no USB camera - " + Camera.names[1]);
                    // Alert shows: "no USB camera - USB2.0 Grabber"
                }
            } 
```

这是正在运行的应用程序的屏幕截图。

![在此处输入图像描述](../Images/695edd45c4eaab54d01806e0ea941c97.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:45:08.790

我看了一下`VideoPlayer`代码，这个类的很多属性都有这样的设置器：

```
public function set source(value:Object):void
{
    if (videoDisplay)
    {
        // do the real work
    }
    else
    {
        // store the value so we can use it later
     }
} 
```

`VideoDisplay`是视频播放器类的皮肤部分。设置源时，皮肤一定没有初始化`videoObject`属性。我会设置源，然后在尝试连接相机之前等待。

Flex 有一种`callLater()`方法*可以*解决这个问题。`callLater()`将在下一个 Flex 更新周期执行您指定的函数：

```
// after setting the source
callLater(attachCamera);

// define a new function 'attachCamera' to call later
private function attachCamera():void
{
    // if the videoObject property is not null
    if (vidPlyr.videoDisplay.videoOjbect != null)
    {
       // attach the camera here
    }
    else
    {
       trace("cannot attach the camera, videoObject is still null");
    }
} 
```

**[编辑]**

获取相机的API很奇怪，签名是：

```
public static function getCamera(name:String = null):Camera 
```

但该`name`参数并不是相机的实际名称。它应该是数组`String`中相机索引的表示。`Camera.names`引用文档：

> name:String (default = null) — 指定要获取的相机，由 names 属性返回的数组确定。对于大多数应用程序，通过省略此参数来获取默认摄像头。要指定此参数的值，请使用 Camera.names 数组中从零开始的索引位置的字符串表示形式。例如，要指定数组中的第三个摄像头，请使用 Camera.getCamera("2")。

当您使用以下方式连接相机时，请尝试做一些更通用的事情`callLater(attachCamera)`：

```
private function attachCamera():void
{
    var cameras:Array = Camera.names;
    var length:int = cameras.length;
    var cameraObjects:Array = [];
    for (var i:int = 0; i < length; i++)
    {
        cameraObjects.push( Camera.getCamera( i.toString() );
    }

    // use your own logic to select a camera, if there's more than one
    if (cameraObjects.length > 0 && vidPlyr.videoDisplay.videoOjbect != null)
    {
        vidPlyr.videoDisplay.videoOjbect.attachCamera( cameraObjects[0] );
    }
} 
```

# javascript - 完整代码的 jQuery 简写

> ID：11417392
> 
> 赞同：0
> 
> 时间：2012-07-10T16:05:09.417
> 
> 标签：javascript, jquery, shorthand

任何人都可以帮我阅读这个速记代码吗？

```
datain = $this.hasClass('up')?+1:($this.hasClass('down')?-1:null); 
```

很抱歉这个明显的问题，但我自己无法解决。

我希望数据输入返回“+1”，如果它有 up 类，但它只返回“1”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:09:22.520

这相当于：

```
// This variable $this looks strange, some php naming involved in JS ?
if ($this.hasClass('up')) {
    //I hope datain is meant to be global or correctly declared with the var keyword above
    datain = 1;
} else if ($this.hasClass('down')) {
    datain = -1
} else {
    datain = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:09:01.860

该代码使用[条件运算符。](http://en.wikipedia.org/wiki/Conditional_%28programming%29#If_expressions)

```
if($this.hasClass("up")) {
   datain = 1;
} else {
   if($this.hasClass("down"))
      datain = -1;
   else
      datain = null;
} 
```

如果您希望 datain 返回 +1，那么您可能需要为其分配一个字符串而不是整数。只需将值括在引号中。( `"+1"`, `"-1"`)

# iphone - iOS 应用可以没有图标吗？

> ID：11417394
> 
> 赞同：1
> 
> 时间：2012-07-10T16:05:16.973
> 
> 标签：iphone, ios, ipad, ipod-touch

是否可以创建一个不出现在主屏幕中的应用程序，并允许另一个应用程序获取其资源（声音、图像等）？

我想创建一个轻量级应用程序（应用程序＃1）并将其上传到应用程序商店。然后，如果用户想要包含更多图像和声音，我希望能够指导用户下载附加组件（应用程序#2）。然后应用#1 将从应用#2 中读取这些资源。

我试图避免让我自己的服务器来提供这些图像，而让 App Store 为我处理这个。我知道我可以在 Android 上做到这一点，并且想知道在 iOS 上是否也可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T16:15:14.243

> 是否可以创建一个不出现在主屏幕中的应用程序，并允许另一个应用程序获取其资源（声音、图像等）？

您不仅不能创建对用户隐藏的应用程序，而且您*也*无法从另一个应用程序访问一个应用程序的资源。每个应用程序都存在于自己的沙箱中，无法读取（或写入）另一个应用程序的沙箱。

> 我想创建一个轻量级应用程序（应用程序＃1）并将其上传到应用程序商店。然后，如果用户想要包含更多图像和声音，我希望能够指导用户下载附加组件（应用程序#2）。然后应用#1 将从应用#2 中读取这些资源。

执行此类操作的正常方法是将您需要的资源托管在服务器上，或者将它们存储在您的应用程序中。

> 我试图避免让我自己的服务器来提供这些图像，而让 App Store 为我处理这个。我知道我可以在 Android 上做到这一点，并且想知道在 iOS 上是否也可以。

不，不可能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T16:21:56.553

如果您能够使用应用内购买系统，那么 Apple 将为您提供此服务。从文档中，我不清楚这是仅 iOS 6 还是可用于旧版本（我没有看到任何原因它不适用于旧版本，但我没有尝试过）。

请注意，大多数 iOS 6 细节都在 NDA 之下，所以在 iOS 6 发布之前请不要在这里讨论它们。然而，这一特定事实是公开的：

*   [https://developer.apple.com/technologies/ios6/](https://developer.apple.com/technologies/ios6/)
*   [https://developer.apple.com/appstore/in-app-purchase/index.html](https://developer.apple.com/appstore/in-app-purchase/index.html)
*   [https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:08:04.643

不，这是不可能的。您必须设置一个图标，它将显示在 iPhone 跳板上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:07:19.600

不，它不能，你为什么需要一个？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-06T07:41:29.243

可悲的是，在 IOS 中没有，但在 android 中这是可能的。

可以存在没有图标的应用程序。但它仍然可以在设置下的“管理应用程序”中进行管理或删除。

这在场景中是必需的，比如我希望这个应用程序在用户离开区域时提醒用户，在后台使用 GPS。我不想要任何图标或任何用户界面。

# java - SWT DND 想要将文本从表格（代表一个虚拟文件）拖到资源管理器上。想要目标路径为字符串

> ID：11417396
> 
> 赞同：1
> 
> 时间：2012-07-10T16:05:31.093
> 
> 标签：java, swt, drag-and-drop

我有一个应用程序，用户将文件拖到桌子上。应用程序将文件拆分为多个部分并将它们保存到不同的位置，并且带有文件名的字符串在表格中显示为文本。到目前为止，一切都很好。

然后我希望能够将文件名的文本字符串拖回资源管理器窗口，并将目标路径作为字符串获取。我可以处理其余的（将这些部分重新组合在一起并保存到目的地）。

不确定我是否应该使用`TextTransfer`，因为我的源是一个字符串，或者`FileTransfer`因为我想要一个绝对路径

我可以发布代码，但现在它非常意大利面。此外，我真的不知道自己在做什么，所以我更希望被指出正确的方向，而不是让任何人为我修复我的代码:)

# c# - C# Arraylist 删除成对的重复值

> ID：11417398
> 
> 赞同：-4
> 
> 时间：2012-07-10T16:05:38.003
> 
> 标签：c#, arraylist

基于配对从 Arraylist 中删除副本：

如果你开始：

```
"Rock" "is" "WWE" "Superstar" "How" "is" "pet" "Rock" "is" "WWE" "Superstar" "How" "is" "pet" 
```

那么输出应该是：

```
"Rock" "is" "WWE" "Superstar" "How" "is" "pet" 
```

只有一个副本删除其他匹配对重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:09:32.640

使用 linq`Linq.Distinct().ToArray()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:18:06.133

从本质上讲，这将删除每个字符串的第二次出现（我相信这是您需要的）：

```
string[] input = new string[]
{
    "Rock", "is", "WWE", "Superstar", "Rock", "is", "WWE", "Superstar", "How", "is", "pet", "How", "is", "pet" 
};

input.GroupBy(x => x)
     .SelectMany(x => x.Skip(x.Count() / 2))
     .ToList().ForEach(Console.WriteLine); 
```

# jquery-ui - Jquery 如何在 jquery 中维护回发之间的状态？

> ID：11417404
> 
> 赞同：1
> 
> 时间：2012-07-10T16:05:49.720
> 
> 标签：jquery-ui

我正在使用 jquery 选项卡并遵循 js 方法，我如何以及如何修改它以维护回发之间的选项卡状态？（这会将选项卡重置为 page_load 之后的第一个选项卡）

//淡入活动ID内容 return false; });

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:07:30.407

当我第一次开始使用 jQuery 时，我遇到了这个问题。我的解决方案是使用 an`<asp:HiddenField />`将活动选项卡索引存储在 tabselect 上。

ASP.Net 允许客户端代码修改 an `<asp:HiddenField />`，以便在回发时保留其值。

On ，只需在初始化期间`document.ready`通过设置选项卡来恢复活动选项卡：`selected`

例子：

```
$('div#divMyTabs').tabs({
    selected: function () {
        var tabFromPostback = $('input#<%=hfActiveTab.ClientID %>').val();
        return tabFromPostback === '' ? 0 : tabFromPostback;   //Default to first.
    },
    select:   function (e, ui) {
        $('input#<%=hfActiveTab.ClientID %>').val(ui.index);
    }
}); 
```

# javascript - jQuery 对话框的同位素问题

> ID：11417406
> 
> 赞同：5
> 
> 时间：2012-07-10T16:05:51.713
> 
> 标签：javascript, jquery, jquery-ui, jquery-isotope

解释我的问题有点困难，但我会尝试使用图像。

演示：http: [//jsfiddle.net/H8Qbn/13/](http://jsfiddle.net/H8Qbn/13/)

我尝试使用同位素自动排列 jQuery 对话框。

*   第一张图片显示一切正常。

![在此处输入图像描述](../Images/09dcc1d452a64dcd3a9238e4892c61f4.png)

*   第二张图片显示了尝试调整第一个 jQuery 对话框的大小时发生的情况。它可以很好地调整大小，并且所有其他对话框都会自动排列。

![在此处输入图像描述](../Images/01a3d97ed88cd874d8e09f3565e474f3.png)

*   当我尝试排列第二个对话框时，它首先根据其位置（顶部，左侧）移动，然后调整大小，并且所有其他对话框都不会自动排列。

![在此处输入图像描述](../Images/a6cafcaaefecff05162464138250b554.png)

*   第三个对话框的行为与 2 完全相同。它根据其位置（顶部、左侧）移动，并且不会自动排列。

![在此处输入图像描述](../Images/99c6922cd255e3e2edde89bd1660ccf5.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:11:42.740

同位素不是为可拖动的对话框制作的；看看[插件作者](http://metafizzy.co/blog/mythical-drag-drop-multi-column-grid-plugin/)对这种功能的看法。

**编辑** [摆弄了更多的东西](http://jsfiddle.net/H8Qbn/21/)，并在使用 .remove() 关闭对话框时重新排列布局；但是，不支持拖动（见上文），手动调整大小也不起作用。为什么需要手动调整对话框大小？不能以编程方式完成吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T00:19:49.900

在调整对话框大小或添加或删除项目后，当您使用周围容器上的 masonry("reload") 函数调用它时，jquery masonry 插件可以计算新位置。当我向周围的容器添加或删除图像时，我在我的 Javascript 中使用了它。[您可以在我的主页http://www.chihoang.de](http://www.chihoang.de)上看到正在运行的 Masonry 插件。

这是我的 prepend 和 append 函数，最后带有 masonry("reload")：

```
 if (ele.Additem == "Append") {
          container.append($j("#brickTemplate").tmpl(ele).css({
            "display": "block"
          })).masonry('reload');
         } else if (ele.Additem == "Prepend") {
          container.prepend($j("#brickTemplate").tmpl(ele).css({
            "display": "block"
          })).masonry('reload');
        } 
```

这是我的删除功能：

```
 $j('.brick').remove(":contains('" + ele.Headline + "')");
        container.masonry('reload'); 
```

# android - android：重力 center_horizo ntal linearlayot 不起作用

> ID：11417407
> 
> 赞同：2
> 
> 时间：2012-07-10T16:05:55.040
> 
> 标签：android, android-linearlayout, layout-gravity

我的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
         >

    <LinearLayout 
        android:id="@+id/foo"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="vertical"
        android:layout_gravity="center_horizontal"
        android:onClick="newItemOnclick">

        <ImageView
                        android:id="@+id/id_new_big_list_item_image"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:adjustViewBounds="true"
                        android:src="@drawable/dom_logo_new"

                   /> 

        </LinearLayout>

</LinearLayout> 
```

但 linearlayout foo 左对齐，它不在中心。怎么了？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:20:13.380

试试这个

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:gravity="center_horizontal" >

<LinearLayout
    android:id="@+id/foo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="newItemOnclick"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/id_new_big_list_item_image"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:adjustViewBounds="true"
        android:src="@drawable/photo1" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:16:59.223

将第二个`LinearLayout`宽度属性更改为此`android:layout_width="fill_parent"`它将起作用...

# silverlight - 复选框不能在 xaml 中设置初始值？

> ID：11417408
> 
> 赞同：2
> 
> 时间：2012-07-10T16:06:08.157
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

在 xaml 中将代码设置为：

```
<CheckBox x:Name="cbxNew" Content="New" IsChecked="true"  Checked="cbxNew_Checked"  />

private void cbxNew_Checked(object sender, RoutedEventArgs e)
        {
            this.txtTest.Text = "";
        } 
```

然后运行应用程序并得到错误：

```
Set Property
System.Windows.Controls.Primitives.ToggleButton.IsChecked threw an exception 
```

好惊讶。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T17:43:53.283

出现此问题的原因是 Checked 事件在对话框/页面的 InitializeComponent() 期间但在 txtTest 被分配值之前触发。

只需将代码更改为

```
private void cbxNew_Checked( object sender, RoutedEventArgs e )
{
  if ( this.txtTest != null )
    this.txtTest.Text = "";
} 
```

# python - 检查Python文件中一行最后一项的有效方法

> ID：11417413
> 
> 赞同：2
> 
> 时间：2012-07-10T16:06:27.737
> 
> 标签：python, libsvm

我正在编写一个接受（可能很大）文件的 Python 脚本。以下是可以格式化输入文件的方式的示例：

```
class1 1:v1 2:v2 3:v3 4:v4 5:v5
class2 1:v6 4:v7 5:v8 6:v9
class1 3:v10 4:v11 5:v12 6:v13 8:v14
class2 1:v15 2:v16 3:v17 5:v18 7:v19 
```

其中class1 和class2 是一些数字，例如1 和-1。（好奇的用户可能会注意到这是一个与 LIBSVM 相关的文件，但在这种情况下不需要了解软件。）值 v1、v2、...、v19 表示任何整数或浮点值。显然，就总行数和每行长度而言，我的文件会比这大得多，这就是我在这里关心效率的原因。

我正在尝试检查冒号*左侧的最大值是什么。*在 LIBSVM 中，这些被称为“特征”并且在这里总是整数。例如，在我上面概述的示例中，第 1 行的最大特征是 5。第 2 行的最大特征为 6，第 3 行的最大特征为 8，最后，第 4 行的最大特征为 7。因为 8 是这些值中的最大值，所以这是我想要的值。我正在查看一个文件，*每*行可能包含数千个特征，并且有数十万*行*。

该文件满足以下属性：

1.  特征必须严格增加。即允许“3:v1 4:v2”，但不允许“3:v1 3:v2”。
2.  这些特征不一定是连续的，可以跳过。在我给出的第一个示例中，第一行具有连续顺序 (1,2,3,4,5) 的特征并跳过特征 6、7 和 8。其他 3 行没有连续顺序的特征。没关系，只要这些功能严格增加。

现在，我的方法是检查每一行，用空格分隔每一行，用冒号分隔最后一项，*然后*检查特征值。之后，我会执行一个程序来检查此类 featureNum 的最大值。

```
file1 = open(...)
max = 0
for line in file1:
    linesplit = line.rstrip('\n').split(' ')
    val = linesplit[len(linesplit) - 1]
    valsplit = val.split(':')
    featureNum = valsplit[0]
    if (featureNum > max):
        max = featureNum
 print max
 file1.close() 
```

但我希望有一种**更好或更有效的方法来做到这一点**，例如通过仅获取直接在换行符之前的那些术语来分析文件的某种方法（也许是为了避免阅读所有行？）。我是 Python 新手，所以如果我错过了一些明显的东西，我不会感到惊讶。

可能的参考：[http ://docs.python.org/library/stdtypes.html](http://docs.python.org/library/stdtypes.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:45:44.710

由于您不关心一行中的*所有*功能，而只关心最后一个，因此您不需要拆分整行。我不知道这是否真的更快，你需要计时看看。它绝对不像分割整条线那样 Pythonic。

```
def last_feature(line):
    start = line.rfind(' ') + 1
    end = line.rfind(':')
    return int(line[start:end])

with open(...) as file1:
    largest = max(last_feature(line) for line in file1) 
```

# javascript - 如何在文本框中显示数字以跟踪打开的按钮数量

> ID：11417414
> 
> 赞同：0
> 
> 时间：2012-07-10T16:06:28.067
> 
> 标签：javascript, jquery

以下是只读文本框的代码：

```
<td>
<input type="text" name="numberAnswer" class="numberAnswerTxt answertxt" id="mainNumberAnswerTxt" onChange="getButtons()" readonly="readonly" >
</td> 
```

下面是显示按钮 AG 的代码：

```
<?php
    $a = range("A","G");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr>
</table> 
```

最后下面是打开和关闭字母按钮的功能：

```
function btnclick(btn)
{
    var context = $(btn).parents('#optionAndAnswer');
    if (context.length == 0) {
        context = $(btn).parents('tr');
    }

    if ($(btn).hasClass("answerBtnsOn")) {
        $(btn).removeClass("answerBtnsOn").addClass("answerBtnsOff");
        return false;
    }

    if ($(btn).hasClass("answerBtnsOff")) {
        $(btn).removeClass("answerBtnsOff").addClass("answerBtnsOn");
        return false;
    }

    $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');

} 
```

我一直试图在这个函数中做的是，如果用户打开了一个按钮，它应该在 texbox 中添加数字。例如，假设所有按钮都关闭，如果我打开按钮“B”，那么文本框应该在打开一个按钮时在文本框中显示数字 1，如果我然后打开按钮“E”，它应该显示“ 2”在文本框中，因为现在打开了两个按钮等等。此外，如果我关闭按钮“E”，它应该回到在文本框中显示“1”，因为只有按钮“B”被打开。换句话说，我想跟踪打开了多少按钮。

我怎样才能做到这一点，因为当我打开按钮时，文本框中没有显示任何内容。

这是应用程序的[演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text14.php)：

当您打开应用程序时，只需单击“打开网格”链接并选择一个网格按钮，当出现字母按钮时，然后单击按钮打开和关闭，您可以看到文本框中没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:22:37.403

计算已打开或关闭的按钮数量的行永远不会被击中，因为您`return false;`在设置按钮类之后就拥有了。试试这个：

```
function btnclick(btn)
{
    var context = $(btn).parents('#optionAndAnswer');
    if (context.length == 0) {
        context = $(btn).parents('tr');
    }

    if ($(btn).hasClass("answerBtnsOn")) {
        $(btn).removeClass("answerBtnsOn").addClass("answerBtnsOff");
    }

    if ($(btn).hasClass("answerBtnsOff")) {
        $(btn).removeClass("answerBtnsOff").addClass("answerBtnsOn");
    }

    $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');

    return false;
} 
```

您可能还想尝试使用 jQuery 的[`.toggleClass()`](http://api.jquery.com/toggleClass/)方法。它就是为这种事情而制作的。

# android - Kivy - 制作以 URL 图像为背景的按钮/缩略图

> ID：11417416
> 
> 赞同：1
> 
> 时间：2012-07-10T16:06:46.673
> 
> 标签：android, python, ios, kivy

我最近开始使用 Kivy，遇到了一个问题。我需要制作一个以 URL 图像作为背景的按钮/缩略图。我在[这里](https://groups.google.com/forum/?fromgroups#!topic/kivy-users/qbNh4XrEnqg)的 Kivy 用户论坛上得到了一些帮助，但仍然有点卡住。这是我的那部分代码：

```
for image_set, image_type in zip(categorized_images, image_types):
    layout = GridLayout(cols=2, size_hint=(None, None))
    layout.bind(minimum_height=layout.setter('height'))
    scroll_view = ScrollView(size_hint=(None, None), size=(320, 200))
    section = AccordionItem(title='%s' % image_type)
    layout.add_widget(back_button1)

    for image_path in image_set:
        layout.add_widget(AsyncImage(source="http://www.example/"'%s' % image_path,\
                                  size_hint=(None, None), size=(160, 160)))

    scroll_view.add_widget(layout)
    section.add_widget(scroll_view)
    accordion.add_widget(section) 
```

我现在所拥有的只是一堆正在创建的图像，但我需要创建缩略图以生成完整大小的图像。除此之外，我还有 Kivy 链接中提到的 builder.load_string 部分和 ButtonBehavior 类部分。我只是不知道如何在那个“for循环”中实现。是否可以将 UrlBut 实例视为小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:12:20.857

# 缩略图到完整图像

使 UrlBut 在实例化时创建并存储缩略图。你可以这样做[`PIL`](http://www.pythonware.com/products/pil/)，按照本教程[http://andrius.miasnikovas.lt/2010/04/creating-thumbnails-from-photos-with-python-pil/](http://andrius.miasnikovas.lt/2010/04/creating-thumbnails-from-photos-with-python-pil/)

然后，让`on_press`方法（或等效方法）创建一个包含完整尺寸图像的弹出窗口或叠加层。

# 将 UrlBut 视为小部件

阅读： http: [//kivy.org/docs/api-kivy.lang.html#syntax-of-template](http://kivy.org/docs/api-kivy.lang.html#syntax-of-template)

Kivy 文档说，在 kv 文件中定义的模板可以像这样在您的 Python 代码中实例化（我正在修改该链接中给出的示例）：

您的 kv 语言模板：

```
[UrlBut@ButtonBehavior+AsyncImage]:
    source: ctx.source
    button_grab: True
    on_press: eval(ctx.on_press) 
```

然后在 Python 中，您可以使用以下命令实例化模板：

```
from kivy.lang import Builder

urlbut1 = Builder.template('UrlBut',source='http://lorempixel.com/400/200')

# create a second template with a different image
urlbut2 = Builder.template('UrlBut', source='http://lorempixel.com/400/200')
# and use urlbut1 and urlbut2 as other widgets. 
```

然后，您可以使用 for 循环自动执行此操作：

```
for image_path in image_set:
        layout.add_widget(Builder.template('UrlBut',source="http://www.example/"'%s' % image_path) 
```

# javascript - 如何使用 javascript 对音频标签执行操作？

> ID：11417418
> 
> 赞同：0
> 
> 时间：2012-07-10T16:06:51.020
> 
> 标签：javascript, html5-audio

我想使用 javascript 与我网页上的`<audio>`标签 ( [http://www.w3schools.com/html5/tag_audio.asp ) 进行交互。](http://www.w3schools.com/html5/tag_audio.asp)

如何`<audio>`使用 javascript 重新启动音频、暂停音频、更改音量或以其他方式与标签交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:53:05.697

这里有一些有用的链接，

[http://www.html5rocks.com/en/tutorials/audio/quick/](http://www.html5rocks.com/en/tutorials/audio/quick/)

[http://www.position-absolute.com/articles/introduction-to-the-html5-audio-tag-javascript-manipulation/](http://www.position-absolute.com/articles/introduction-to-the-html5-audio-tag-javascript-manipulation/)

# javascript - 从逗号分隔的字符串中删除重复项

> ID：11417421
> 
> 赞同：2
> 
> 时间：2012-07-10T16:06:58.807
> 
> 标签：javascript, jquery, csv, unique, comma

如何使用 jquery/javascript 从逗号分隔的整数字符串中删除重复项？

我的字符串是：1,2,2,4,2,4,3,2,3,1,5,5,5,1,1,2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-04T20:53:39.350

```
function spit(){
           var answer = ("1,2,2,4,2,4,3,2,3,1,5,5,5,1,1,2").split(',').filter(function(item, pos,self) {
              return self.indexOf(item) == pos;
           });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:12:59.533

对于一种不需要从头开始编写功能或使用*其他*js 库的方法，请查看[duck-punching-with-jquery](http://paulirish.com/2010/duck-punching-with-jquery/)。（查找“示例 2：$.unique() 增强”）

如果您愿意尝试其他一些库，那么出色的[underscorejs](http://underscorejs.org)包含一个“ [uniq](http://underscorejs.org/#uniq) ”方法，它可以满足您的需要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:14:41.497

这是一个简单的例子。

```
var str1 = "a,b,c,a,d,e,b";
var characters = str1.split(",");
var distinctCharacters = [];
jQuery.each(characters, function(index, c) {
if (jQuery.inArray(c, distinctCharacters) > -1) {
        // do nothing
        alert("already exists " + c);
    } else {
        distinctCharacters.push(c);
    }
});
alert(distinctCharacters);​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:14:45.793

从这篇文章 [中删除 JavaScript 数组中的重复项](https://stackoverflow.com/questions/9229645/remove-duplicates-from-javascript-array)

```
var names = ["Mike","Matt","Nancy","Adam","Jenny","Nancy","Carl"];
var uniqueNames = [];
$.each(names, function(i, el){
 if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
  }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T16:16:17.113

很好的答案，`_.uniq()`图书馆也有[underscore.js](http://underscorejs.org/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T16:13:51.360

```
var numbersString = "1,2,3,4,5,6";
var numbersArray = numbers.split(','); 
```

现在只需在另一个数组中插入检查的内容`numbersArray`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T16:14:24.417

如果它们只是整数，你可以有这样的东西：

```
var array = "1,2,2,4,2,4,3,2,3,1,5,5,5,1,1,2".split(",");

array.sort(function(a, b) { return a - b });

var uniqueArray = [array[0]];

for (var i = 1; i < array.length; i++) {
    if (array[i - 1] !== array[i])
        uniqueArray.push(array[i]);
}

console.log(uniqueArray); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-25T22:22:31.243

您可以在 javascript 中创建一个函数，如下所示：

```
Array.prototype.removeDuplicates = function () {
                return this.filter(function (item, index, self) {
                    return self.indexOf(item) == index;
                });
            }; 
```

然后添加`.removeDuplicates()`到您希望在使用分隔符拆分后删除重复项的字段，例如：

```
var item = $("#inInputTextbox").val().split(",").removeDuplicates(); 
```

在你的情况下，如果我理解正确，它可能只是：

```
var item = [a,b,c,d,d,d,c,b,a].split(",").removeDuplicates(); 
```

希望这可以帮助。

# vagrant - 如何将 Windows 7 文件夹共享到在 vagrant 中运行的 lucid32

> ID：11417422
> 
> 赞同：12
> 
> 时间：2012-07-10T16:06:59.720
> 
> 标签：vagrant

我正在使用 vagrant 运行 lucid32 安装。我已经安装了 LAMP 并且可以正常工作。为了在 lucid32 安装内的主机上安装 Windows 共享，我需要做什么？

我尝试向 vagrant 文件添加 Windows 路径，但得到：

C:/Users/myuser/Sites/Vagrantfile:37: 无效的 Unicode 转义 config.vm.share_folder "vagwin","/windows","c:\users\lukem\Sites"

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T07:15:19.537

你需要双重转义斜线，至少我必须在 Windows 7 上，即每个 \ 应该是 \\

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-02T01:41:30.923

您还可以使用正斜杠来避免转义反斜杠。

```
 config.vm.synced_folder "c:/Users/david", "/home/david" 
```

会将您的 Windows 主目录映射到 VM 上的主目录（假设您的名字是 david）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-01T18:58:53.230

这确实是一个 ruby​​ 问题，因为您的 Vagrantfile 实际上是 ruby​​。双引号字符串在 ruby​​ 中插入，在某些情况下反斜杠是元字符。改变你的

```
"c:\users\lukem\Sites" 
```

到

```
'c:\users\lukem\Sites' 
```

如果你在 irb（ruby repl）中尝试这样的事情，它看起来像这样：

```
> x = "c:\users\lukem\Sites"
=> "c:\users\lukemSites"
> x = 'c:\users\lukem\Sites'
=> "c:\\users\\lukem\\Sites" 
```

至少，这是它在我的 mac 上的 irb 中的工作方式。我没有一个 windows 盒子来测试它。

半有趣的侧边栏...如果您切换到 vagrant 2 并使用 synched_folder，则主机到访客的顺序是相反的：

[http://docs.vagrantup.com/v2/synced-folders/basic_usage.html](http://docs.vagrantup.com/v2/synced-folders/basic_usage.html)

[http://docs-v1.vagrantup.com/v1/docs/config/vm/share_folder.html](http://docs-v1.vagrantup.com/v1/docs/config/vm/share_folder.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:15:45.627

你需要像这样逃跑`C:\\users\\lukem\\Sites`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-20T09:06:27.030

如果您使用双引号，则需要此语法来转义它

```
"C:\\users\\lukem\\Sites" 
```

或者

```
"C:/users/lukem/Sites" 
```

如果您使用单引号，则不需要转义它。

`vagrant reload`更新**Vagrantfile**后记得运行

# python - 尝试：和异常：错误

> ID：11417426
> 
> 赞同：-1
> 
> 时间：2012-07-10T16:07:22.423
> 
> 标签：python, exception, try-catch

所以我正在处理下面的代码。当我的 Reff.txt 有不止一行时，它符合要求。但是当我的 Reff.txt 文件只有一行时它不起作用。这是为什么？我还想知道为什么我的代码不运行我的代码的“尝试”部分，但它总是只运行“异常”部分。

*   所以我有一个参考文件，其中有一个 id 列表（每行一个 id）
*   我使用参考文件（Reff.txt）作为参考来搜索网站中的数据库和网络中服务器中的数据库。
*   我应该得到的结果是应该有一个输出文件和包含该id信息的文件；对于每个参考 ID

但是，这段代码对我的“try:”部分根本没有做任何事情

```
import sys

import urllib2

from lxml import etree

import os

getReference = open('Reff.txt','r') #open the file that contains list of reference ids

global tID 

for tID in getReference:    

    tID = tID.strip()

    try:
        with open(''+tID.strip()+'.txt') as f: pass
        fileInput = open(''+tID+'.txt','r')
        readAA = fileInput.read()
        store_value = (readAA.partition('\n'))
        aaSequence = store_value[2].replace('\n', '') #concatenate lines
        makeList = list(aaSequence)#print makeList
        inRange = ''
        fileAddress = '/database/int/data/'+tID+'.txt'
        filename = open(fileAddress,'r')#name of the working file
        print fileAddress
        with open(fileAddress,'rb') as f:
            root = etree.parse(f)
            for lcn in root.xpath("/protein/match[@dbname='PFAM']/lcn"):#find dbname =PFAM

                start = int(lcn.get("start"))#if it is PFAM then look for start value
                end = int(lcn.get("end"))#if it is PFAM then also look for end value
                while start <= end:
                    inRange = makeList[start]
                    start += 1
                    print outputFile.write(inRange) 
                    outputFile.close()
                break
            break
        break

    except IOError as e:

        newURL ='http://www.uniprot.org/uniprot/'+tID+'.fasta'
        print newURL
        response = urllib2.urlopen(''+newURL) #go to the website and grab the information 
        creatNew = open(''+uniprotID+'.txt','w')
        html = response.read() #read file
        creatNew.write(html) 
        creatNew.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:24:59.310

所以，当你做 Try/Except - 如果 try 失败，Except 运行。except 总是在运行，因为 Try 总是失败。

最可能的原因是你有这个 - “print outputFile.write(inRange)”，但你之前没有声明 outputFile。

ETA：另外，您似乎只对测试 for 循环的第一遍感兴趣？你在那个时候打破。在这种情况下，您的其他休息时间是无关紧要的，因为当那个休息时间在那里时，它们将永远无法到达。

# jquery - 如何在动态创建的 DOM 元素上使用 addClass / removeClass

> ID：11417430
> 
> 赞同：3
> 
> 时间：2012-07-10T16:07:45.900
> 
> 标签：jquery, jquery-selectors

我有一个在 document.ready() 中调用的函数，它创建跨度。

```
function configureContentSelector() {
  for (j=0; j<centerContent.length; j++)
    {
        var content = "<span class='contentSelector' onclick='changeContent(" + j + ")' id='span'" + j + ">" + j  + "</span>";
        $("#contentSelectorArea").html($("#contentSelectorArea").html() + content); 

   } 
```

请注意，跨度被标识为 span0、span1 等。

在触发与跨度无关的事件时调用的单独函数中，我想操作跨度类（addClass（）removeClass（））

```
$("#" + "span" + i).removeClass("contentSelector");
$("#" + "span" + i).addClass("contentSelectorSelected"); 
```

但是，这不起作用。我相信这个问题与跨度是动态创建的事实有关，但我不知道如何解决这个问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:13:44.933

您创建了错误`id`的 s（它们都有 id=span）：

```
var content = "<span class='contentSelector' onclick='changeContent(" + j + ")' id='span'" + j + ">" + j  + "</span>"; 
```

尝试这个：

```
var content = "<span class='contentSelector' onclick='changeContent(" + j + ")' id='span" + j + "'>" + j  + "</span>"; 
```

顺便说一句，您的报价应该*颠倒*：

```
var content = '<span class="contentSelector" onclick="changeContent(' + j + ')" id="span' + j + '">' + j  + '</span>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:14:56.197

我认为这里有错误

```
id='span'" + j + ">" 
```

改成

```
id='span" + j + "'>" 
```

并使用

```
$("#contentSelectorArea").append(content); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:13:48.560

我会删除 ID 并使用`data-*`属性（无论如何，您的 ID 声明存在语法错误）。

```
var content = "<span class='contentSelector' onclick='changeContent(" + j + ")' data-spanid='" + j + "'>" + j  + "</span>"; 
```

然后您可以使用`data-*`属性进行选择：

```
$("span[data-spanid='" + i + "']"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:15:36.847

您在创建控件时遇到了一个简单的错误。检查创建的 id 属性中的引号。

使用它，它会正常工作。

```
var content = "<span class='contentSelector' onclick='changeContent(" + j + ")' id='span" + j + "'>" + j  + "</span>"; 
```

# c# - DataContractSerializer 中缺失数据成员的默认值

> ID：11417436
> 
> 赞同：4
> 
> 时间：2012-07-10T16:08:08.750
> 
> 标签：c#, .net, datacontractserializer

使用 DataContract 中的以下两个数据成员，然后使用 DataContractSerializer，只有 Name 按预期序列化。我的问题是当我反序列化文件时。“名称”已正确读取和加载，但由于“超时”不存在，我希望它保持默认的“TimeSpan.FromHours(12)”。事实上发生的事情是 DataContractSerializer 分配了一个值，但由于它没有分配值，所以它使用时间跨度默认值 0。无论如何，这种行为是否存在？

```
private string _name;
    [DataMember(Name = "Name")]
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            _name= value;
        }
    }

    private TimeSpan _timeout = TimeSpan.FromHours(12);
    public TimeSpan Timeout
    {
        get
        {
            return _timeout ;
        }
        set
        {
            _timeout = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:57:59.867

这是你的答案吗

使用 OnDeserialized

```
[OnDeserialized]
void OnDeserialized(StreamingContext context)
{
    this._timeout = TimeSpan.FromHours(12);
} 
```

从这里[使用 DataContractSerializer 时设置属性的初始值](https://stackoverflow.com/questions/2725988/setting-the-initial-value-of-a-property-when-using-datacontractserializer)

# c# - 尝试使用 c# 理解 LINQ 代码

> ID：11417443
> 
> 赞同：3
> 
> 时间：2012-07-10T16:08:35.153
> 
> 标签：c#, linq

我不确定这是不是问这个问题的正确地方，如果不是，我很抱歉。

使用与以下相同的代码：

[C# LINQ 表达式问题](https://stackoverflow.com/questions/6423801/c-sharp-linq-expression-question)

```
string[] digits = { "zero", "one", "two", "three", "four", "five", 
                    "six", "seven", "eight", "nine" };
var shortDigits = digits.Where((digit, index) => digit.Length < index);
foreach (var sD in shortDigits)
{
    Console.WriteLine(sD);
}
// Output:
// five
// six
// seven
// eight
// nine 
```

系统是如何知道的，`digit`是数字中的项目，以及`index`数组中的位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T16:11:19.810

扩展方法的特定重载`Where`被定义为接受 a`Func`其中第一个参数是元素，第二个参数是该元素的索引。这在[文档](http://msdn.microsoft.com/en-us/library/bb549418)中明确提到：

> 谓词
> 
> 类型：`System.Func<TSource, Int32, Boolean>`
> 
> 测试每个源元素的条件的函数；**函数的第二个参数表示源元素的索引**。

强调我的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:11:32.767

这只是一个命名的东西，你可以命名任何东西，并索引任何东西。这只是一个匿名函数的 lambda 表达式......它可以重写：

```
(string digit, int index) => digit.Length < index 
```

因此，名称与您通常在方法中设置的任何参数相同。C# 引擎识别的名称并没有什么特别之处。

```
(string index, int digit) => index.Length < digit 
```

上面的方法也可以......这会令人困惑，但它会奏效。只是为了表明名称可以是您想要的任何名称

**如果您指的是如何引用签名本身，**那么这是由于[Where 函数的重载](http://msdn.microsoft.com/en-us/library/bb549418)

```
public static IEnumerable<TSource> Where<TSource>(
    this IEnumerable<TSource> source,
    Func<TSource, int, bool> predicate
) 
```

因此，本例中的 TSource 是`string`，使 Func 变为`Func<string, int, bool>`。这意味着 lambda 必须接受一个`string`参数后跟一个`int`参数，并返回一个`bool`值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:22:51.460

`Where`您正在使用的重载是这样实现的：

```
public static IEnumerable<T> Where<T>(
      this IEnumerable<T> list, Func<T,int,bool> predicate)
{
   int num = -1;
   foreach (T current in list)
   {
      num++;
      if (predicate(current, num))
      {
         yield return current;
      }
   }
   yield break;
} 
```

如您所见，在每次迭代中，都会调用谓词（即传递的 lambda 表达式）并传递列表的当前元素和当前索引。

这样，lambda 表达式中的代码就知道元素及其索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:12:55.730

`where`因为将这样的函数作为谓词存在过载：

```
Func<TSource, int, bool> 
```

这个谓词的语义 ios 定义了所以第二个参数是索引。因此，如果您传递带有两个参数的 lambda，则调用 where 的版本。

# android - 有没有办法在 google play 上检测 android 应用页面视图的来源？

> ID：11417446
> 
> 赞同：3
> 
> 时间：2012-07-10T16:08:47.633
> 
> 标签：android, google-play, referrals, pageviews

我基本上想检测用户从哪里进入我的 android 应用市场页面的路径。

1.  用户正在搜索并因此查看（如果不一定下载）我的 android 应用程序的不同关键字是什么。
2.  如果他们从顶级免费/顶级新免费/顶级免费游戏中点击我的应用程序

我可以看到，当我通过某个路径（如搜索、精选、顶部免费等）单击应用程序图标时，上述信息正在浏览器中传递。

我想捕捉这些信息，如果可能的话，进行分析，以便我可以更好地优化我在 google play 上的应用程序性能。

请注意：我不是在谈论在点击推荐链接并通过 google play 应用程序下载该应用程序时提供的推荐跟踪。我只想分析用户在浏览器上浏览 google play 并最终到达我的应用显示页面时的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:06:32.080

一般来说，没有。据我所知，谷歌大部分情况下都不会公开这些信息。至于您发现的由早期版本的 Market 应用程序传递给您的应用程序的信息，这是特定于 Market 应用程序的并且*是*推荐跟踪。碰巧你在谈论有机推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T17:53:25.397

最近 Google play 和 Google Analytics 宣布他们将开始通过简单的集成共享数据，如果您已经在您的应用程序中集成了 sdk，只需按照流程启用共享数据即可。根据此链接，您将开始看到来自两个平台的数据，包括关键字和安装源。[http://analytics.blogspot.com/2013/10/google-play-integration.html](http://analytics.blogspot.com/2013/10/google-play-integration.html)

# javascript - 引用外部 JavaScript 模板

> ID：11417449
> 
> 赞同：1
> 
> 时间：2012-07-10T16:08:57.213
> 
> 标签：javascript, html

我使用[jsrender](https://github.com/BorisMoore/jsrender/)作为 JavaScript 模板引擎。用法非常简单：

在 HTML 页面中，定义一个带有模板化 HTML 内容的脚本标签：

```
<script id="myTemplate" type="text/x-jsrender">
    <div>{{:name}} ({{:year}})</div>
</script>
...
<body>
<div id="content"></div>
</body> 
```

在 JavaScript 中，定义一个变量，然后针对模板调用 render 函数：

```
var model = {
    name: "Findekano",
    year: 2012
};

$('#content').html($('#myTemplate').render(model)); 
```

**问题是：**

我不想将模板定义保留在主机 HTML 页面中，我想将它与 JavaScript 文件一起保存在一个单独的文件中，这样它就可以更加模块化。

我想要一些工作如下：

```
<script id="myTemplate" 
        type="text/x-jsrender" 
        src="template/myTemplate.html">
</script> 
```

其中 myTemplate.html 定义了必要的 HTML 模板片段。我尝试了上面的代码，但它不起作用。任何人都可以提出解决问题的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:03:11.973

如果您不想使用 AJAX 调用并且不关心使用更多内存，那么我至少可以想到一种替代解决方案。AJAX 可能更干净，但我想我还是把它放在那里。

```
document.write('<script id="myTemplate" type="text/x-jsrender"><div>{{:name}} ({{:year}})</div></script>'); 
```

如果您将其放入外部文件并通过链接

```
<script type="text/javascript" 
    src="template/myTemplate.js">
</script> 
```

然后脚本会将字符串的有效脚本标签副本附加到 jsrender 实际可以访问的 DOM 中。当然，这最终会在客户端上使用大约两倍的内存，但是......如果文件不是太大，那应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:07:24.253

浏览器不会下载它们（内部）不支持的语言（基于`type`属性）的脚本。

从`src`属性中获取 URI，然后使用 XHR 请求资源。

# asp.net-mvc - 使用 Asp.Net MVC 的学校/大学的自动搜索功能

> ID：11417459
> 
> 赞同：1
> 
> 时间：2012-07-10T16:09:39.117
> 
> 标签：asp.net-mvc

我正在建立一个网站，用户应该能够添加他们的学校/大学。我在 LinkedIn 中注意到，当我尝试输入我的学校名称时，它会显示一个包含所有学校的自动搜索框，以我输入的字母开头。我怎样才能实现相同的功能？

他们是否将所有大学都保存在他们的数据库中？或者是否有任何我可以使用的开放网络服务来显示所有学校/大学？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:18:53.067

此功能称为“自动完成”，并且启用了文本框。这些允许您根据输入的字符过滤所需的数据。

请参阅这篇文章了解使用 jQuery 实现的自动完成功能。

[Razor：jqGrid 内的自动完成文本框，如何绑定值？](https://stackoverflow.com/questions/8961325/razor-auto-complete-text-box-inside-jqgrid-how-to-bind-values)

该页面中显示的示例列出了数据库中的所有内容。但是，作为下一个阶段，您还可以扩展此功能以查找适用于学校/学院的 WCF 公开服务。

FYI" "GetSkillNameAutocomplete" 是控制器中的一种方法，它将字符串参数作为输入（搜索字符串）并获取值。

希望这可以帮助！

# java - jh.jar (JavaHelp) 上的 bnd 换行不起作用

> ID：11417465
> 
> 赞同：0
> 
> 时间：2012-07-10T16:10:03.373
> 
> 标签：java, jar, osgi, javahelp, bnd

我正在使用 bnd wrap，这是我之前使用过多次将普通 jar 文件转换为 OSGI 包的工具。我在使用 JavaHelp 的 jh.jar 时遇到问题。我只收到一条警告，“1：多余的导出包说明：[com, com.sun, com.sun.java.help, com.sun.java, javax]”。我希望警告不会终止该进程，但之后我没有看到 OSGI 包，我的 jh.jar 文件大小没有变化，清单看起来也没有变化。有人知道发生了什么吗？其他人应该很容易尝试自己 bnd 包装 jh.jar。

我正在运行这个命令：

```
bnd-wrap ./jh.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:59:07.247

我发现整个时间都在创建正确的 jar，它只是被重命名为 jh.bar，所以它不会覆盖原始文件。

# spring - 为什么我的@autowired 不起作用

> ID：11417466
> 
> 赞同：0
> 
> 时间：2012-07-10T16:10:15.333
> 
> 标签：spring

最近我在尝试启动现有服务器时遇到了问题。似乎 ABCManager 字段之一没有被 spring bean factory 自动装配。这已被添加到配置文件中 - “context:annotation-config”。我检查了代码更改版本，ABCManager 只有一个私有构造方法（在它有一个 getInstance 方法之前）。这有关系吗？Spring 是否会使用私有构造函数为我获取实例，或者这就是我得到 NPE 的原因？如果不是这样，我还应该检查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T08:50:45.817

As this been uses a static method to get an instance, Spring doesn't know it by default. You will have to specify your static method in the bean deceleration.

```
<bean id="exampleBean" class="examples.ExampleBean2" factory-method="createInstance"/> 
```

Your factory-method will be your static method used to instantiate this bean.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:20:17.533

你类注释了吗？你的类必须用`@Component`or`@Service`或 or注释`@Repository`

# objective-c - 如何在 ios 版本中设置 Aviary 裁剪预设？

> ID：11417470
> 
> 赞同：1
> 
> 时间：2012-07-10T16:10:28.063
> 
> 标签：objective-c, ios, xamarin.ios, aviary

我可以在 Aviary 的网络版本（和 android 中的 feather_crop_values）中找到设置[cropPresets](http://www.aviary.com/web-documentation#constructor-config-croppresets)的提及，但在 ios sdk 中没有。无论如何要在 ios 版本中设置裁剪预设/值，还是这是 web 和 android 版本独有的？

有一个传递 NSDictionary 选项的选项，但工具集顺序是唯一给出的示例。我尝试使用键“cropPresets”和一个值为“48x48”作为 NSString 的 NSArray 来创建字典，但它似乎忽略了它并显示了默认的裁剪预设。我想我可以继续在黑暗中拍摄，除非有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T00:49:45.370

为遇到同样问题的人跟进：Aviary for iOS 现在支持自定义裁剪预设，因此请继续使用它，如文档所述。我刚刚编写了一个测试代码，它运行良好。

[http://www.aviary.com/ios/documentation#customization](http://www.aviary.com/ios/documentation#customization)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:35:05.787

只需要解决同样的问题，所以我想我可能会分享代码（它包含在他们的示例代码中：[https ://github.com/AviaryInc/Aviary-iOS-Sample-App/blob/master/AviaryDemo-iOS/ AFSDKDemoViewController.m](https://github.com/AviaryInc/Aviary-iOS-Sample-App/blob/master/AviaryDemo-iOS/AFSDKDemoViewController.m)）：

```
// Set Custom Crop Sizes
[AFPhotoEditorCustomization setOptionValue:@NO forKey:@"editor.tool.crop.enableOriginal"];
[AFPhotoEditorCustomization setOptionValue:@YES forKey:@"editor.tool.crop.enableCustom"];
NSDictionary * fourBySix = @{kAFCropPresetHeight : @(4.0f), kAFCropPresetWidth : @(6.0f)};
NSDictionary * fiveBySeven = @{kAFCropPresetHeight : @(5.0f), kAFCropPresetWidth : @(7.0f)};
NSDictionary * square = @{kAFCropPresetName: @"Square", kAFCropPresetHeight : @(1.0f), kAFCropPresetWidth : @(1.0f)};
[AFPhotoEditorCustomization setOptionValue:@[square, fourBySix, fiveBySeven] forKey:@"editor.tool.crop.presets"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:18:18.133

几天前我遇到了同样的问题。

所以我给他们写了一封电子邮件。他们回答我如下：

> 这个平台实际上还没有正式支持自定义裁剪选项（尽管我们确实支持 web 和 Android，这可能会导致这里的混乱）。也就是说，我们的路线图中很快就会出现这种情况，一旦更新可用，您应该没有问题，只包括一种裁剪尺寸。

所以请留意新的更新！

# javascript - Javascript：自动完成时对象预期错误

> ID：11417471
> 
> 赞同：0
> 
> 时间：2012-07-10T16:10:32.680
> 
> 标签：javascript

我在生产服务器上收到对象预期错误，但不是我的预览服务器。唯一的区别（据我所知）是我的预览服务器使用的是旧版本的 IIS。但是我不知道为什么会导致这个错误？

错误在我的 HTML 中的这一行：

```
<input type="text" id="txt1" onkeyup="showHint(this.value)" name="txtprjName" tabindex="1" size="100" maxlength="50" />
<span id="txtHint"></span> 
```

showHint 是指与 HTML 文件位于同一目录中的外部 javascript 文件。

```
<script language="javascript" type="text/javascript" src="clienthint.js"></script> 
```

clienthint.js 的内容是这样的：

```
var xmlHttp
function showHint(str){
    if (str.length==0){ 
        document.getElementById("txtHint").innerHTML="";
        return;
    }
    xmlHttp=GetXmlHttpObject()
    if (xmlHttp==null){
        alert ("Your browser does not support AJAX!");
        return;
    } 
    var url="gethint.asp";
    url=url+"?q="+str;
    url=url+"&sid="+Math.random();
    xmlHttp.onreadystatechange=stateChanged;
    xmlHttp.open("GET",url,true);
    xmlHttp.send(null);
} 
function stateChanged() { 
    if (xmlHttp.readyState==4){ 
        document.getElementById("txtHint").innerHTML=xmlHttp.responseText;
    }
}
function GetXmlHttpObject(){
    var xmlHttp=null    
    try{
        // Internet Explorer
        xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
    }catch (e){
        try{
            // Internet Explorer
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }catch (e){
            // Firefox, Opera 8.0+, Safari
            xmlHttp=new XMLHttpRequest();
        }
    }
    return xmlHttp;
} 
```

不知道为什么这不起作用？有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:45:26.803

我将 javascript 移动到主网页，而不是将其包含在外部，并且代码现在可以工作。

# php - Twitter Bootstrap 简单隐藏（）不起作用

> ID：11417476
> 
> 赞同：0
> 
> 时间：2012-07-10T16:11:14.303
> 
> 标签：php, html, forms, twitter-bootstrap

我有一个简单的表单，如果其中一个表单使用 Twitter 的 Bootstrap 系统为空，则会弹出错误消息。

错误消息弹出，我设置了一个简单的 JQuery 函数来在单击“X”时隐藏错误框，但它会消失然后再次弹出。真的很奇怪，有人遇到过吗？

代码是：

Javascript

```
<script type="text/javascript">
$(document).ready(function() {
$(".close").click(function() {
    $(".alert").hide();
});
});
</script> 
```

HTML

```
<div class="alert alert-error"><button class="close">&times;</button>
Uh oh, you forgot your name! Dont worry we do it all the time...</div> 
```

就像我说的，PHP 可以很好地呈现代码，而 Javascript 显然可以正常工作，因为它开始褪色然后又重新出现。才刚刚开始使用 Bootstrap，如果这是一个菜鸟问题，我们深表歉意......

提前致谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:16:31.773

引导文档声明使用此属性：

```
data-dismiss="alert" 
```

如果您添加它，这是否有效？

# javascript - 以错误的方式计数器递减

> ID：11417479
> 
> 赞同：1
> 
> 时间：2012-07-10T16:11:20.537
> 
> 标签：javascript, jquery, jquery-mobile, local-storage

我在 localStorage 中存储了一些数据，我想动态输出这些数据（单击“之前”和“之后”箭头时）。我将页面重定向到自身并在文档准备好时显示当天的名称。

当我单击下一步时，天数会正确递增，但是当我之前单击时，天数不会正确递减，我尝试处理 (if counter =-1, counter= maxcounter) 的情况，但它不起作用.. .这是我试过的：

Javascript：

```
 function GetCurrentDay() {
     if (localStorage["CurrentDay"] == null || localStorage["CurrentDay"] == 'NaN' || localStorage["CurrentDay"]=="undefined") {
         localStorage["Counter"]= 0;
         i = localStorage["Counter"];
         localStorage["CurrentDay"] = localStorage["Day" + i];
    }
    return localStorage["CurrentDay"];
}
function GoToNextDay() {
    var d = GetCurrentDay();
    i = localStorage["Counter"];
    i = i*1 + 1;
    localStorage["Counter"] = i;
    if(i!= localStorage["SchoolDays"]+1){
        localStorage["CurrentDay"] = localStorage["Day" + i];
    }else{
        localStorage["CurrentDay"] = localStorage["Day" + 0];    
    }
    return true;
}
function GoToPrevDay() {
    var d = GetCurrentDay();
    i = localStorage["Counter"];
    i = i*1 - 1;
    localStorage["Counter"]=i;
    if(i>0){  
        localStorage["CurrentDay"] = localStorage["Day" + i];
    }else{
        i=localStorage["SchoolDays"];
        localStorage["Counter"]=i; 
        localStorage["CurrentDay"] = localStorage["Day" + i];    
    }
    return true;
} 
```

您对我该如何解决有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:13:57.187

我不太确定我理解为什么需要本地存储来显示和增加一天。如果没有关于您期望的行为的更多信息，就很难给出完全知情的答案。首先，正如 Bergi 在评论中所建议的那样，您正在滥用本地存储。

例如，而不是：

```
function GetCurrentDay() {
     if (localStorage["CurrentDay"] == null || localStorage["CurrentDay"] == 'NaN' || localStorage["CurrentDay"]=="undefined") {
         localStorage["Counter"]= 0;
         i = localStorage["Counter"];
         localStorage["CurrentDay"] = localStorage["Day" + i];
    }
    return localStorage["CurrentDay"];
} 
```

你可以这样做：

```
function GetCurrentDay() {
    var currentDay = localStorage.CurrentDay;
    if (!currentDay) {
        var counter = 0;
        currentDay = localStorage["Day" + counter];
    }
    localStorage.Counter = counter;
    localStorage.CurrentDay = currentDay;

    return currentDay;
} 
```

上述方法要好得多，因为您仅在需要获取或设置某些值时才访问 localStorage。两者之间的一切都发生在局部变量上，这将更快。此外，在可能的情况下，您应该使用点符号来访问 javascript 对象。它更具可读性。

现在，回到根本问题。你确定你需要localStorage吗？听起来您正在重新加载页面并使用 localStorage 来跟踪某些值。如果您避免这种情况并动态更新这一天字段，对您和您的访问者来说会容易得多。例如，假设您在页面某处有这样的 html 结构：

```
<div id="day">0</div>
<span id="next">Next</span>
<span id="previous">Previous</span> 
```

您可以收听点击事件并相应地更新它。

```
var day = 0,
    dayEl = document.getElementById('day');

document.getElementById('next').onclick = function() {
    dayEl.firstChild.nodeValue = ++day;
}

document.getElementById('previous').onclick = function() {
    dayEl.firstChild.nodeValue = --day;
} 
```

不需要 localStorage 也不需要重新加载页面。上面的例子是高度简化的，但我希望它能够理解并帮助你重新考虑你的方法。

# ruby-on-rails - Rails 迁移：设置语言环境？

> ID：11417485
> 
> 赞同：0
> 
> 时间：2012-07-10T16:11:35.497
> 
> 标签：ruby-on-rails, internationalization

我有一些将 CSV 导入现有模型的迁移（使用`create!(..)`）。由于我添加了更多验证，因此迁移在执行时中断：

```
Validation failed: Address translation missing: en.activerecord.errors.messages.is_invalid 
```

我们使用德语作为默认语言，所以我有点不确定 Rails 为什么要寻找英文翻译。我们正在使用 rails-i18n gem。

```
# application.rb
config.i18n.default_locale = :de
config.i18n.available_locales = [:de, :en] 
```

任何人都可以告诉我：

1) 为什么 Rails 需要英文翻译？2) 为什么Rails 还是找不到英文翻译？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:34:32.243

要回答数字 1，您需要先设置语言环境，设置默认语言环境不会这样做：

```
config.i18n.locale = :de 
```

数字 2 似乎有点陌生，但请注意 rails-i18n 最近才包含基本的“en”语言环境，之前它有“en-US”和“en-GB”等等。看起来您需要将 rails-i18n 版本提升到 0.6.5 或更高版本。

# android - 在 ListActivity 中设置内容视图崩溃

> ID：11417493
> 
> 赞同：1
> 
> 时间：2012-07-10T16:12:10.713
> 
> 标签：android, android-layout, android-listview

我从调试器收到此错误：

> 错误/AndroidRuntime(10540)：原因：java.lang.RuntimeException：您的内容必须有一个 ID 属性为“android.R.id.list”的 ListView

我的布局文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#004D79"
    >
        <RelativeLayout android:id="@+id/relativeLayout1" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content">
        <ListView
            android:id="@+id/list"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
        />
        <EditText 
            android:layout_alignParentLeft="true" 
            android:text="EditText"
            android:layout_marginTop="10dp" 
            android:id="@+id/editText" 
            android:layout_height="wrap_content" 
            android:layout_width="fill_parent"
            android:layout_toLeftOf="@+id/skipButton">
        </EditText>
        <Button android:text="Skip"
         android:id="@+id/skipButton" 
         android:textSize="18dp"
         android:layout_marginTop="10dp" 
         android:layout_alignParentRight="true" 
         android:layout_height="wrap_content" 
         android:layout_width="80dp">
         </Button>
    </RelativeLayout> 
</LinearLayout> 
```

我究竟做错了什么？

编辑：

所以对于我的列表视图，我仍然使用 listView = getListView();

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:14:41.720

将 ListView id 声明为：

```
<ListView android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/> 
```

代替

```
<ListView
            android:id="@+id/list"
            android:layout_height="fill_parent"
            android:layout_width="fill_parent"
        /> 
```

# c++ - tictactoe game 没有运算符 "==" 匹配这些操作数

> ID：11417494
> 
> 赞同：0
> 
> 时间：2012-07-10T16:12:14.407
> 
> 标签：c++, string, printf, iostream, tic-tac-toe

它可能非常低效和混乱，但这是我的问题 - 它说诸如“zz == defo && zo == defo”之类的东西等于用红色下划线表示错误：没有运算符“==”匹配这些操作数，当我运行我收到一个太长的错误，无法在此处发布 - [http://pastebin.com/KTEM0MZK](http://pastebin.com/KTEM0MZK)

我究竟做错了什么？提前致谢

这是我的代码-

```
#include <iostream>
#include <cstdlib> // for rand() and srand()
#include <ctime> // for time()
using namespace std;

string random1(){
    srand(((time(0) - 23) * time(0)) - (9*time(0)));
  if (rand() % 2 == 0){
    return "1";
        } else {
            return "0";
        }
}
string random2(){
    srand((((time(0) - 89) * time(0)) - (9*time(0)) / 3) - 99);
  if (rand() % 2 == 0){
    return "1";
        } else {
            return "0";
        }
}
int main(){
    string zz = "-";
    string zo = "-";
    string zt = "-";
    string oz = "-";
    string oo = "-";
    string ot = "-";
    string tz = "-";
    string to = "-";
    string tt = "-";
    for(int a = 1;a<=9;a++){
        srand ( time(NULL) - 8 );
        int ran1 = rand() % 3;  
        srand ( time(NULL) * 2);
        int ran2 = rand() % 3;
        int tote = (ran1 * 10) + ran2;
        cout << endl << "format- 0 = zero, 1 = one, 2 = two" << endl;
        int input;
        cin >> input;
        if(input == 00){
            zz = "X";
        } else if(input == 01){
            zo = "X";
        } else if(input == 02){
            zt = "X";
        } else if(input == 10){
            oz = "X";
        } else if(input == 11){
            oo = "X";
        } else if(input == 12){
            ot = "X";
        } else if(input == 20){
            tz = "X";
        } else if(input == 21){
            to = "X";
        } else if(input == 22){
            tt = "X";
        }
        // now for the computers part
        if(tote == 00){
            zz = "O";
        } else if(tote == 01){
            zo = "O";
        } else if(tote == 02){
            zt = "O";
        } else if(tote == 10){
            oz = "O";
        } else if(tote == 11){
            oo = "O";
        } else if(tote == 12){
            ot = "O";
        } else if(tote == 20){
            tz = "O";
        } else if(tote == 21){
            to = "O";
        } else if(tote == 22){
            tt = "O";
        }
        printf ("|%d|%d|%d", zz, zo, zt);
        cout << endl;
        printf ("|%d|%d|%d", oz, oo, ot);
        cout << endl;
        printf ("|%d|%d|%d", tz, to, tt);

        if(zz == "X" && zo == "X" && zt == "X" || oz == "X" && oo == "X" && ot == "X" || tz == "X" && to == "X" && tt == "X" || zz == "X" && oz == "X" && tz == "X" || zo == "X" && oo == "X" && to == "X" || zt == "X" && ot == "X" && tt == "X" || zz == "X" && oo == "X" && tt == "X"){
            cout << endl << "X WINNER";
        break;
        }
        if(zz == "O" && zo == "O" && zt == "O" || oz == "O" && oo == "O" && ot == "O" || tz == "O" && to == "O" && tt == "O" || zz == "O" && oz == "O" && tz == "O" || zo == "O" && oo == "O" && to == "O" || zt == "O" && ot == "O" && tt == "O" || zz == "O" && oo == "O" && tt == "O"){
            cout << endl << "O WINNER";
            break;
        }
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:15:09.490

您需要`#include <string>`，在哪里[`operator==`](http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp)定义。

而且，正如[jrok](https://stackoverflow.com/users/947836/jrok)已经说过的那样，您正在传递 a `std::string`to `printf()`: use`cout`代替（正如您已经使用的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:16:26.540

您正在尝试将`std::string`s 传递给`printf`C 库函数。此外，格式字符串表示您将传递整数 ( `"|%d|%d|%d"`)。

`printf`只会采用 c 风格的字符串，所以如果这是你想要的，你可以这样说：

```
printf("|%s|%s|%s", ot.c_str(), zz.c_str(), ...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:17:25.487

也与您的代码有关

```
if(zz == "X" && zo == "X" && zt == "X" || oz == "X" && oo == "X" && ot == "X" || tz == "X" && to == "X" && tt == "X" || zz == "X" && oz == "X" && tz == "X" || zo == "X" && oo == "X" && to == "X" || zt == "X" && ot == "X" && tt == "X" || zz == "X" && oo == "X" && tt == "X"){
        cout << endl << "X WINNER"; 
```

应该

```
if((zz == "X" && zo == "X" && zt == "X") || (oz == "X" && oo == "X" && ot == "X") || (tz == "X" && to == "X" && tt == "X") || (zz == "X" && oz == "X" && tz == "X") || (zo == "X" && oo == "X" && to == "X") || (zt == "X" && ot == "X" && tt == "X") || (zz == "X" && oo == "X" && tt == "X")){
        cout << endl << "X WINNER"; 
```

您的比较正在查看每个单独的标记，而不是寻找标记的组合。每组 3 个周围的 () 将为您提供所需的结果。

# android - 为所有屏幕提供图像？

> ID：11417496
> 
> 赞同：1
> 
> 时间：2012-07-10T16:12:20.787
> 
> 标签：android, android-layout, screen-size

我想针对所有屏幕尺寸优化我的应用程序。现在我想知道我是否真的必须将它们全部放入一个 apk 中。这些是我想要支持的屏幕尺寸：

320x480 400x800 400x852 540x960 720x1280

我认为具有 240x320 分辨率的设备太少了，以至于支持它们的努力也太高了。所以我的问题是，我是否必须在每个密度文件夹中放入所有图像？

另一个问题：我想提供我的应用程序从 2.1 开始，但是 2.1 不支持 xhdpi 屏幕，例如 720x1280，分别 2.1 无法与这些大图像相处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:00:50.853

我会从我非常喜欢的 android 开发策略中陈述另一个解决方案。

> 另一种方法是从具有最大屏幕尺寸的设备开始，然后按比例缩小并找出您需要在较小屏幕上做出的 UI 折衷。

来自[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

因此，请创建一个`drawable`包含为最大密度设计的图像的文件夹。目前是 10 英寸平板电脑并按比例缩小。

优点：不需要设计技能来创建一些漂亮的图像，并且您的应用程序（可能）较小。

缺点：为了缩小它并在每个图像的 dps 上更加小心，需要进行更多编码。

编辑评论：

是的。我会向您简要介绍我正在做的事情。

1）首先创建一个`drawable`文件夹，不需要创建另一个（虽然总是有例外）。2）正如我所提到的，所有图像都应该是根据您要支持的屏幕（可能是 10 英寸超高密度平板电脑）的最高分辨率。3）这是棘手的部分，我倾向于在 X*X 尺寸或 2X*X 尺寸（4X*X，8X*X ...）中创建所有可绘制对象，以便比例准确（除2）尽可能。

然后，在代码中。假设我们有一个 72x72 像素的图像，我们想为我们的应用程序制作一个小的导航图标。这对于 10 英寸平板电脑来说几乎是正确的，但对于 3.2 英寸手机来说却非常大。所以我在布局中创建 ImageView，如下所示：

```
<ImageView
        android:id="@+id/previousPage"
        android:layout_width="@dimen/small_icon"
        android:layout_height="@dimen/small_icon"
        android:src="@drawable/prev"
        android:layout_marginRight="10dp" /> //...etc 
```

如您所见，我使用特定的宽度和高度，而不是包装内容，因此像这样具有 72x72 像素到`30dp*30dp`ImageView 的图像具有完美的分辨率。这就是我对开发人员来说不那么花哨的“设计师的事情”的方式。

如果您想要每个版本的不同尺寸或类似的东西，您还可以创建不同的`values`文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:18:11.530

这解释了如何优雅地处理多个 DPI：http: [//developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

本质上，每个 DPI 都有不同的目录：

```
MyProject/
    res/
        drawable-xhdpi/
            awesomeimage.png
        drawable-hdpi/
            awesomeimage.png
        drawable-mdpi/
            awesomeimage.png
        drawable-ldpi/
            awesomeimage.png 
```

如果 API（在您的示例中为 xhpdi）不支持它，或者如果您没有图像，那么它应该默认为下的基本`/drawable/`文件夹`/res/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:16:35.330

不同屏幕尺寸的手机需要不同的文件夹，如 mdp、ldp、hdp、

查看android官方[文档](http://developer.android.com/guide/practices/screens_support.html)

谢谢。

# java - eclipse java.lang.NoClassDefFoundError 不存在的类

> ID：11417500
> 
> 赞同：0
> 
> 时间：2012-07-10T16:12:33.157
> 
> 标签：java, eclipse

当我尝试编译我的项目时，我收到了这个错误：

```
 java.lang.NoClassDefFoundError: me/hansolox1/tetris/test
Caused by: java.lang.ClassNotFoundException: me.hansolox1.tetris.test
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" 
```

但是在向项目添加真实代码之前，我删除了 me.hansolox1.tetris.test 类。这是我第一次看到这样的错误......请帮助！

编辑：

我已经删除了测试类，但是使用方法“main”的新类：

```
package me.hansolox1.tetris;

import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.StateBasedGame;

public class tetris extends StateBasedGame {
    public static final int MAINMENU = 0;
    public static final int TETRIS = 1;

    public tetris(){
        super("Tetris!");
    }

    @Override
    public void initStatesList(GameContainer arg0) throws SlickException {
        this.addState(new MainMenu(MAINMENU));
        this.addState(new MainState(TETRIS));
    }
    public static void main(String[] args) throws SlickException{
        AppGameContainer app = new AppGameContainer(new tetris());

        app.setDisplayMode(800, 600, false);
        app.start();
    }
} 
```

我正在使用 slick2d 引擎...

EDIT2：我也尝试过清理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:19:48.677

1.  进入项目的属性页面
2.  转到运行/调试设置
3.  如果您在那里找到已删除的课程，请再次将其删除。

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:13:45.787

我的工作解决方案：

1.  做了新项目
2.  将所有文件从原始项目复制到新项目
3.  测试新项目后删除旧项目

我知道这可能是最糟糕的解决方案，但它确实有效......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T20:32:44.030

或者，您可以尝试 eclipse 命令行上的 -clean 选项。这会清理存储的项目信息，包括哪些类受到对另一个类的更改的影响。

# git - 使用多个存储库进行的重要工作

> ID：11417501
> 
> 赞同：0
> 
> 时间：2012-07-10T16:12:41.550
> 
> 标签：git, gitorious

我是 gitorious 开发团队的成员。但是为了处理更大的功能，我克隆了存储库（在 gitorious 上而不是在本地）。所以现在有两个gitorious项目，“project”（原始存储库）和“my-project”（我的服务器端克隆）。

现在我的问题是：使用这两个存储库的最佳方式是什么？当然，我可以在两个不同的目录中本地克隆它们，然后在另一个目录中工作。但是他们合并我的更改可能非常复杂。可能我必须在一侧发起合并请求并在另一侧接受它。

我想要的东西，不知道这是否可能：创建主项目的本地克隆并将“my-project”本地集成为分支或类似的东西，以便我可以轻松地在两个存储库之间切换，cherry-pick从一个到另一个，等等。

这样的事情可能吗？或者使用多个（服务器端）克隆的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:13:42.967

用于`git remote add`将第二个远程添加到本地存储库。这些命令会将您的服务器端 gitorious 克隆添加为称为“个人”的远程，并从中获取分支引用：

```
git remote add personal <path_to_server_side_clone>
git fetch personal 
```

你甚至不使用不同的分支。在实践中，您的历史记录在工作日将如下所示（仅针对单个分支进行了简化）：

```
 origin/master
        |
A-B-C-D-E-F-G master
      |
personal/master 
```

在上图中，`origin`的 master 分支指向 commit `E`，`personal`' 指向`D`， 而你本地`master`的分支提示是`G`. 假设`origin`的稳定性非常重要，即只有在它通过您机器上的测试套件后才推送它。你仍然想保存你的日常工作，是吗？这正是您的`personal`存储库的目的。`git push personal master`像这样更改图表：

```
 origin/master
        |
A-B-C-D-E-F-G master
            |
     personal/master 
```

`personal`遥控器和您的`master`本地副本`master`现在已同步。运行测试套件后，然后发出`git push origin master`，产生以下状态：

```
 origin/master
            |
A-B-C-D-E-F-G master
            |
     personal/master 
```

在实践中，您可以将任何一组分支推送到远程，在它们之间共享，或者选择保持一个干净而一个充满半成品的主题分支。由你决定。我确实建议使用像`tig`or之类的历史可视化软件`gitk`，这两者都可以让您轻松地可视化远程状态的位置。

你可以随心所欲地采用这个想法。在工作中，我的每个同事（我们也使用 gitorious）都有一个遥控器，他们都有个人服务器端克隆。这是一种非常简单的共享代码的方法，同时仍然维护了一个[有福的生产存储库。](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows#Integration-Manager-Workflow)几乎任何工作流程都可以从个人远程克隆中受益。

# sql - 必须分组聚合？

> ID：11417503
> 
> 赞同：2
> 
> 时间：2012-07-10T16:12:45.067
> 
> 标签：sql, sql-server, tsql, aggregate-functions

如果聚合（例如使用 SUM），是否需要按您选择的内容进行分组？你必须有一个group by子句？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T16:28:22.237

不，这不是要求。

没有 a`GROUP BY`的聚合是标量聚合，并且总是只返回一行。

**例子**

```
SELECT SUM(high)
FROM master..spt_values
WHERE 1 = 0 
```

带有 a 的聚合`GROUP BY`是 Vector 聚合，每组返回零或一行。

**例子**

```
SELECT [type], SUM(high)
FROM master..spt_values
WHERE 1 = 0
GROUP BY [type] 
```

# ruby-on-rails - 在多服务器环境中，如果站点超过 1500 万不活动，服务器将失去与 PostgreSQL 数据库的连接

> ID：11417504
> 
> 赞同：1
> 
> 时间：2012-07-10T16:12:51.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, webserver, postgresql-9.1

如果我的登台（2 台服务器）或生产（4 台服务器）服务器在大约 15 分钟内没有任何活动，我会在 airbrake 中收到以下错误。以下是错误消息：

> ActiveRecord::StatementInvalid: PG::Error: 无法从服务器接收数据：连接超时

或者

> PG::Error: could not connect to server: Connection timed out 服务器是否在主机“tci-db4.dev.prod”上运行并接受端口 5432 上的 TCP/IP 连接？

我使用 PostgreSQL 作为我的数据库。其中一台服务器还充当数据库服务器。

环境：

**Ruby 1.9.3**（这也发生在 Ruby 1.8.7 下，但升级后情况更糟，因为服务器上的 ruby​​ 进程将达到 100% 并保持在 100%，直到服务器失去数据库连接时被终止。

**导轨 3.1.6**

**PG 创业板 0.13.2**

**Postgres 9.1**

**Phusion乘客**

这个问题已经发生了一年多，所以我希望有人对如何解决它有一些见解。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T19:46:42.030

检查应用程序服务器和数据库服务器之间所有路由器/交换机上的 TCP/IP 套接字超时设置。还要打开数据库端的日志记录，观察连接的完整生命周期，并将时间与应用程序中的错误进行比较。我建议在 postgresql.conf 中打开以下设置，直到您了解要查找的内容：

```
log_connections = on
log_disconnections = on
log_statement = all 
```

这些可以通过 postgres 进程的 SIGHUP 激活（或以数据库超级用户身份运行“SELECT pg_reload_conf();”。

我会是你有一个“连接被远程主机关闭”或类似于在实际断开记录之前的最后一条消息。

我以前见过这种情况，这是中间交换机上的超时设置导致的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T00:02:59.147

您可能在客户端和服务器之间有一个 NAT 路由器、连接跟踪防火墙或一个傲慢的“第 3 层交换机”。这些设备在超时后从它们的表中清除记住的连接。您将需要[启用 keepalives](http://www.postgresql.org/docs/9.1/static/runtime-config-connection.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T07:25:12.923

维护来自 4 个应用程序服务器的大量 keepalived 连接可能很难做到（它可能代表非常多的连接。您可以检查[PgPool-II](http://pgpool.projects.postgresql.org/pgpool-II/doc/pgpool-en.html)以在 pgpool 和您的 postgres 服务器之间保持合理数量的 keepalived 连接。pgPool 将当有太多进程请求连接时，还要排队连接。然后检查在您的应用程序中如何管理连接。在应用服务器中是否管理连接池？您还需要它吗？您是否需要 long-长期连接还是可以简单地使用短会话连接？

如果 PgPool 和 postgreSQl 服务器之间的会话仍然断开，则必须检查 TCP/IP 问题。此类问题可能来自操作系统 TCP/IP 设置，但也可以在 postgreSQl 配置中进行调整。检查该[运行时配置手册页上的](http://www.postgresql.org/docs/9.0/static/runtime-config-connection.html)**tcp_keepalive 设置**。如果您使用 pgpool，请检查[health_check](http://pgpool.projects.postgresql.org/pgpool-II/doc/pgpool-en.html#config)设置。

# c++ - C++ HTTP GET 请求问题？

> ID：11417505
> 
> 赞同：2
> 
> 时间：2012-07-10T16:12:54.980
> 
> 标签：c++, http, tcp, winsock, get-request

我编写了一个程序，将 tcp 请求发送到命令行中指定的网址并打印响应。当我将此获取请求发送到 www.google.co.uk（或任何网站）时，我什么也得不到:(

有人可以告诉我我做错了什么以及对谷歌的正确 GET 请求应该是什么样子。这是代码...

```
#include <WinSock2.h>
#include <WS2tcpip.h>
#include <stdio.h>

#pragma comment(lib, "Ws2_32.lib")

int main(int argc, char *argv[]){

WSADATA wsaData;
int iResult;

//Initialize Winsock
iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
if(iResult != 0){
    printf("WSAStartup failed: %d\n", iResult);
    return 1;
}

struct addrinfo *result = NULL,
                *ptr = NULL,
                hints;

ZeroMemory(&hints, sizeof(hints));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;

#define DEFAULT_PORT "80"

//Resolve the server address and port
iResult = getaddrinfo(argv[1], DEFAULT_PORT, &hints, &result);
if(iResult != 0){
    printf("getaddrinfo failed: %d\n", iResult);
    WSACleanup();
    return 1;
}

SOCKET ConnectSocket = INVALID_SOCKET;

//Attempt to connect to the first address returned by
//the call to getaddrinfo
ptr = result;

//Create a SOCKET for connecting to server
ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype,
    ptr->ai_protocol);

if(ConnectSocket == INVALID_SOCKET){
    printf("Error at socket(): %ld\n", WSAGetLastError());
    freeaddrinfo(result);
    WSACleanup();
    return 1;
}

//Connect to server
iResult = connect(ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
if(iResult == SOCKET_ERROR){
    closesocket(ConnectSocket);
    ConnectSocket = INVALID_SOCKET;
}

//Should really try the next address returned by getaddrinfo
//if the connect call failed
//But for this simple example we just free the resources
//returned by getaddrinfo and print an error message

freeaddrinfo(result);

if(ConnectSocket == INVALID_SOCKET){
    printf("Unable to connect to server!\n");
    WSACleanup();
    return 1;
}

#define DEFAULT_BUFLEN 512

int recvbuflen = DEFAULT_BUFLEN;

char *sendbuf = "GET /index.html HTTP/1.1\r\n";
char recvbuf[DEFAULT_BUFLEN];

//Send an initial buffer
iResult = send(ConnectSocket, sendbuf, (int)strlen(sendbuf), 0);
if(iResult == SOCKET_ERROR){
    printf("send failed: %d\n", WSAGetLastError());
    closesocket(ConnectSocket);
    WSACleanup();
    return 1;
}

printf("Bytes Sent: %ld\n", iResult);

//shutdown the connection for sending since no more data will be sent
//the client can still use the ConenctSocket for receiving data
iResult = shutdown(ConnectSocket, SD_SEND);
if(iResult == SOCKET_ERROR){
    printf("shutdown failed: %d\n", WSAGetLastError());
    closesocket(ConnectSocket);
    WSACleanup();
    return 1;
}

do {
    iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);
    if(iResult > 0){
        printf("Bytes received: %d\n", iResult);
        printf(recvbuf);
        printf("\n\n");
    } else if(iResult == 0){
        printf("Connection closed\n");
    } else {
        printf("recv failed: %d\n", WSAGetLastError());
    }
} while(iResult > 0);

//cleanup
closesocket(ConnectSocket);
WSACleanup();

return 0;
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T16:19:32.133

一个可能的原因是服务器在发送响应之前期望更多数据。

```
char *sendbuf = "GET /index.html HTTP/1.1\r\n"; 
```

这应该是

```
char *sendbuf = "GET /index.html HTTP/1.1\r\n\r\n"; 
```

这样您就可以告诉服务器不要期望更多的 HTTP 标头（每个标头后跟一个，`\r\n`然后添加一个额外`\r\n`的以结束请求）。

基本上，您的 HTTP 请求是不完整的。至少还有一个`Host`必须提供的标头 ( )。请注意，服务器可能（错误地）接受和不完整的请求。如果您想从简单的开始，复制您的浏览器发送的请求（例如，打开 Web 调试器并查看传出的网络请求）。

# jdbc - 如何修改 JBoss AS 7.1 上内置的 h2 数据库？

> ID：11417509
> 
> 赞同：0
> 
> 时间：2012-07-10T16:13:03.237
> 
> 标签：jdbc, jboss, h2

我有一些信息存储在 JBoss 7.1 附带的 h2 数据库中（可以通过修改 JBoss 配置中的standalone.xml 文件来激活），我想在我的 Web 应用程序客户端上操作这些信息。我该怎么做呢？

还是我需要在应用程序中创建内置实例并自己设置所有驱动程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:20:35.123

结果是微不足道的答案！

像任何普通的 MySQL 数据库一样使用 jdbc 连接器对其进行修改。请记住将 h2 连接驱动程序添加到您的 lib 或 maven 文件夹中。

# symfony - Symfony 2，Twig：如何不转义字段值（与bonejs 和 symfony 2 一起使用）

> ID：11417510
> 
> 赞同：3
> 
> 时间：2012-07-10T16:13:07.380
> 
> 标签：symfony, backbone.js, twig

我正在使用以下代码渲染原型：

```
{{form_widget(form.get('prototype').myField, {'attr': {'value': '<%= myModelProperty %>'} }) }} 
```

*BackboneJS*应该读取这个 twig 块生成的代码，并将 <%= myModelProperty %> 替换为一些模型属性值。

这不会发生，因为该值在 twig 中被转义，因此被替换为：

```
&lt;%= viewport %&gt; 
```

我试图在 *form_div_layout.html* 文件中将值强制为 RAW：

```
> {% block field_widget %} {% spaceless %}
>     {% set type = type|default('text') %}
>     <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value|raw }}" {% endif %}/> {%
> endspaceless %} {% endblock field_widget %} 
```

但没有成功。

**所以我的问题是如何不逃避树枝中的字段值。**

谢谢！

编辑

解决方案：所以实际上方法是正确的，我必须使用“原始”过滤器来使我的变量不被转义。我有一个自动转义块集，可以包含这个特定的输出，这就是为什么它必须“未转义”的原因。

Symfony 2 的 Twig 包提供了几个块来渲染表单数据，这些块使用一个特定的块来进行属性渲染，称为“{% block widget_attributes %}”。

我所做的是编辑这个块（我有一个包含所有自定义块的单独模板文件），所以我可以添加一层“是否应该转义这个值”：

```
{% block widget_attributes %}
{% spaceless %}
    id="{{ id }}" name="{{ full_name }}"{% if read_only %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}

    {% for attrname,attrvalue in attr %}
        {# Attribute value can be defined as an array. ['data']: contains the actual value, ['escape']: boolean (true if the value HAS to be escaped)#}
        {% if attrvalue.data is defined %}
            {% if not attrvalue.escape %}
                {{attrname}}="{{ attrvalue.data|raw }}"
            {% else %}
                {{attrname}}="{{ attrvalue.data|e }}"
            {% endif %}
        {% else %}
            {{attrname}}="{{attrvalue}}"
        {% endif %} 
    {% endfor %}

{% endspaceless %}
{% endblock widget_attributes %} 
```

从我的树枝文件中调用：

```
{{ form_widget(form.displays.get('prototype').myField, {'attr': {'value': { 'data': myvalue, 'escape': false } } }) }} 
```

转义是在 {{ }} twig 标签中打印值时完成的，所以我之前所做的是将未转义的值发送到实际调用 print 并且值因此被转义的块。

这对我有用！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:37:44.337

Solution: So in fact the method was right, I have to use the `raw` filter to get my variable not escaped. I've an `autoescape` block set that englobe this particular output which is why the reason it has to be "un-escaped".

Twig bundle of Symfony 2 provided several block to render form data, and those uses a specific block for attribute rendering called `{% block widget_attributes %}`.

What I did is edit this block (I've a separated template file with all my customized blocks) so I can add a layer of "should this value be escaped or not":

```
{% block widget_attributes %}
  {% spaceless %}
      id="{{ id }}" name="{{ full_name }}"{% if read_only %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{ pattern }}"{% endif %}

      {% for attrname,attrvalue in attr %}
        {# Attribute value can be defined as an array. ['data']: contains the actual value, ['escape']: boolean (true if the value HAS to be escaped)#}
        {% if attrvalue.data is defined %}
          {% if not attrvalue.escape %}
            {{ attrname }}="{{ attrvalue.data|raw }}"
          {% else %}
            {{ attrname }}="{{ attrvalue.data|e }}"
          {% endif %}
        {% else %}
          {{ attrname }}="{{ attrvalue }}"
        {% endif %} 
      {% endfor %}

  {% endspaceless %}
{% endblock widget_attributes %} 
```

Called from my twig file:

```
{{ form_widget(form.displays.get('prototype').myField, {'attr': {'value': { 'data': myvalue, 'escape': false } } }) }} 
```

The escape is done when printing the value so in the `{{ }}` twig tag, so what I was doing earlier was sending an unescaped value to a block where the print is actually called and where the value was thus escaped.

This works for me! thanks!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:34:31.540

使用[原始](http://twig.sensiolabs.org/doc/filters/raw.html)过滤器是执行此操作的正确方法。如果你没有成功，那么还有其他问题。尝试在 app/config/config.yml 中清除缓存或禁用树枝缓存

```
twig:
    cache: ~ 
```

如果这不是缓存问题，那么我不确定下一步该往哪里看。

# python - 可以通过字典在 Pytables 中查找组吗？

> ID：11417511
> 
> 赞同：0
> 
> 时间：2012-07-10T16:13:07.963
> 
> 标签：python, dictionary, hdf5, pytables

我想知道是否可以在 pytables 中存储某种可以将 id 映射到组实例的字典？目前，我正在尝试将我的数据分组；但是，查找这些组的查找时间（通过 getNode 方法）需要很长时间。

我希望能够在文件中打开一个允许我查找组/表实例的字典，而不是在打开要读取的文件时调用 getNode 来搜索树以查找组。这是一种可能吗？

# html - 定位不同长度的列表项

> ID：11417512
> 
> 赞同：0
> 
> 时间：2012-07-10T16:13:14.170
> 
> 标签：html, css

我有一个包含数千个 li 项目的 ul 列表。发生的情况是我有一个固定的宽度，但高度可变的 li 取决于它们内部的内容，例如评论、图像等。

现在我的列表水平流过用户的屏幕并转到新行。但是，问题是下一行的第一个 li 不位于前一行的第一个 li 旁边，而是占据上一行的最长 li 并停留在其下方。

例如， http: [//oi47.tinypic.com/21kgqkw.jpg](http://oi47.tinypic.com/21kgqkw.jpg)

这可以做到吗？

根据克里斯的要求更新 1：请看我的照片，你会明白的。基本上，所有的 lis 都需要从一行到另一行垂直保持靠近

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:18:38.957

根据您提供的有限信息，该`li`标签**可能不适用于**此处。相反，您可以使用`article`or `div`。如果您确实使用列表项，则评论列表作为 . 更有意义`ol`，因为评论具有自然顺序（它们离开的日期/时间）。

标签不是这里的问题，只是一个注释。

对于手头的问题：根据您的示例图像，[砌体](http://vanilla-masonry.desandro.com/)可能是您最好的路线：

> Masonry 是一个动态网格布局脚本。将其视为 CSS 浮动的另一面。浮动将元素水平排列然后垂直排列，而砌体垂直排列元素，将每个元素定位在网格中的下一个开放点。结果使不同高度的元素之间的垂直间隙最小化，就像石匠在墙上安装石头一样。

这个插件有一个[香草](http://vanilla-masonry.desandro.com/docs/intro.html)或[jQuery](http://masonry.desandro.com/)版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:17:48.447

没有简单的方法可以像在纯 html/css 中那样实现垂直流，但是有一个 jquery 插件可以做类似的事情。你应该看看[砌体](http://masonry.desandro.com/)

查看[基本单列演示](http://masonry.desandro.com/demos/basic-single-column.html)

# c# - 当前上下文中不存在名称“消息”

> ID：11417516
> 
> 赞同：1
> 
> 时间：2012-07-10T16:13:21.973
> 
> 标签：c#, asp.net

我在编译时不断收到以下错误消息：“名称'消息'在当前上下文中不存在”。我要做的就是弹出一个消息框。这是在我的代码隐藏页面顶部声明的命名空间：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail; 
```

这是我在单击按钮时显示消息的代码：

```
 protected void EmailAbout_Click(object sender, EventArgs e)
    {
        MailMessage myMessage = new MailMessage();
        myMessage.Subject = "Exception Handling Test";
        myMessage.Body = "Test message body";
        myMessage.From = new MailAddress("me@yourprovider.com");
        myMessage.To.Add(new MailAddress("you@yourprovider.com"));

        SmtpClient mySmtpClient = new SmtpClient();
        mySmtpClient.Send(myMessage);
        Message.Text = "Message sent";
    } 
```

这是缺少命名空间的情况吗？它看起来很基础，但我无法弄清楚？提前致谢！

这是标记页面：

```
<%@ Page Title="About SalesPro" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeBehind="About.aspx.cs" Inherits="WebApplication2.About" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        About, Inc.
    </h2>

    <p>
        Some Stuff here... 
    </p>

    <p>
        <asp:Button ID="EmailAbout" runat="server" Text="Email Information" 
            onclick="EmailAbout_Click" />
    </p>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:18:49.893

我认为标签 Message 在运行时不可用或不存在

更新答案：

```
Response.Write("<script>alert('Message Sent');</script>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T19:11:45.313

**首先右键单击引用添加`System.Windows.Forms`然后替换。**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail; 
```

**和**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net.Mail;
using System.Windows.Forms; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:36:43.443

您需要 javaScript 函数“alert()”:-)

试试这个：

```
RegisterStartupScript("alertBox1", "<script type='text/javascript'>alert('Message sent');</script>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T07:14:33.573

就我而言，我通过将命名空间直接放入需要它的 c# (.cs) 文件中解决了这个问题。出于某种原因，将其添加到 app_code 中不起作用，即使我已经能够使用智能感知获取命名空间。

IE

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Configuration;
using System.Text;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class SmartFutures_Default : System.Web.UI.Page
{
...
...
     webMessageBox.Show("THANK YOU. YOUR REGISTRATION HAS BEEN SUBMITTED");
...
}

/// <summary>
/// A JavaScript alert class
/// </summary>
public static class webMessageBox
{

    /// <summary>
    /// Shows a client-side JavaScript alert in the browser.
    /// </summary>
    /// <param name="message">The message to appear in the alert.</param>
    public static void Show(string message)
    {
        // Cleans the message to allow single quotation marks
        string cleanMessage = message.Replace("'", "\\'");
        string wsScript = "<script type=\"text/javascript\">alert('" + cleanMessage + "');</script>";

        // Gets the executing web page
        Page page = HttpContext.Current.CurrentHandler as Page;

        // Checks if the handler is a Page and that the script isn't allready on the Page
        if (page != null && !page.ClientScript.IsClientScriptBlockRegistered("alert"))
        {
            //ClientScript.RegisterStartupScript(this.GetType(), "MessageBox", wsScript, true);
            page.ClientScript.RegisterClientScriptBlock(typeof(webMessageBox), "alert", wsScript, false);
        }
    }
} 
```

# r - 从 ggplot2 图例中删除“点”元素

> ID：11417517
> 
> 赞同：9
> 
> 时间：2012-07-10T16:13:26.793
> 
> 标签：r, ggplot2

示例代码：

```
EmigProb<-c(rep(seq(0.1,0.8,length=5),4),rep(seq(0.1,0.8,length=5),4))
RemainEmigProb<-c(rep(0.2,5),rep(0.4,5),rep(0.6,5),rep(0.8,5),rep(0.2,5),rep(0.4,5),rep(0.6,5),rep(0.8,5))
Value<-rnorm(40,5,3)
Parameter<-c(rep("Survival",20),rep("Resight",20))
fakedata<-data.frame(EmigProb=EmigProb,RemainEmigProb=RemainEmigProb,Value=Value,Parameter=Parameter)

q <-ggplot(fakedata,aes(EmigProb,Value,shape=factor(RemainEmigProb),colour=factor(Parameter),linetype=factor(RemainEmigProb)))+scale_colour_discrete("Parameter")+scale_linetype_discrete("Remain Emigrant Probability")+scale_shape_manual("Remain Emigrant Probability",values=c(0,5,6,15))
q <- q + layer(geom="point")
q <- q + layer(geom="line")
q 
```

![示例图](../Images/8e9377dca81b76b68de89657d3c01d66.png)

在这个例子中，有没有办法从“Resight”和“Survival”的“参数”图例中删除“点”？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T17:14:36.747

将此添加到您的绘图命令中：

```
guides(colour = guide_legend(override.aes = list(shape = NA))) 
```

可以在此处找到有关自定义图例以及更多精彩 ggplot2 0.9 智慧的详细信息：http: [//cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf](http://cloud.github.com/downloads/hadley/ggplot2/guide-col.pdf)

# c# - 选中复选框列表时显示数据列表中的项目

> ID：11417519
> 
> 赞同：0
> 
> 时间：2012-07-10T16:13:41.707
> 
> 标签：c#, asp.net

我将数据绑定复选框列表到 SQL Server，它在我的数据库的“名称”（以电影为例：喜剧、动作、恐怖）列中显示项目。复选框列表充当过滤器，因此当用户选中复选框时，相关电影就会出现。

我设法对复选框列表进行了数据绑定。复选框的值具有绑定到数据库的“CategoryId”的值。但我不知道如何进一步进行，即在选中复选框时显示电影海报（图像）的数据列表。

例如，当我选中“喜剧”复选框时，会出现属于该类型的电影海报（数据列表）。

这是我到目前为止所做的代码，default.aspx：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:DVDShopConnectionString %>" 
            SelectCommand="SELECT [ProductID], [Title], [Image1FileName] FROM [Product]"></asp:SqlDataSource>

        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:DVDShopConnectionString %>" 
            SelectCommand="SELECT * FROM [Category]"></asp:SqlDataSource>
        <br />

        <asp:CheckBoxList ID="CheckBoxList1" runat="server" AutoPostBack="True" 
            DataSourceID="SqlDataSource2" DataTextField="Name" DataValueField="CategoryID" 
            onselectedindexchanged="CheckBoxList1_SelectedIndexChanged">
        </asp:CheckBoxList>

<asp:datalist runat="server" DataKeyField="ProductID" DataSourceID="SqlDataSource1" 
            RepeatColumns="4" ID="DataList1" >
    <ItemTemplate>

        <asp:Image ID="Image1" runat="server" 
         ImageUrl='<%# Eval("Image1FileName", "~/ProductImages/{0}") %>'  />
         <br /> 

        <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
        <br />

        <br />
<br />
    </ItemTemplate>
        </asp:datalist> 
```

后面的代码：

```
private SqlDataReader getReader()
{
    //get connection string from web.config
    string strConnectionString = ConfigurationManager.ConnectionStrings["DVDShopConnectionString"].ConnectionString;
    SqlConnection myConnect = new SqlConnection(strConnectionString);

    string strCommandText = "SELECT CategoryID, Name  from Category";

    SqlCommand cmd = new SqlCommand(strCommandText, myConnect);
    myConnect.Open();

     //DataList1.DataSource = reader; 
     DataList1.DataBind();
    // CommandBehavior.CloseConnection will automatically close connection
    SqlDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
    return reader;
}

protected void CheckBoxList1_SelectedIndexChanged(object sender, EventArgs e)
{

    for (int i = 0; i < CheckBoxList1.Items.Count; i++)
    {
        if (CheckBoxList1.Items[i].Selected == true)
        {
            //items should be filter here.. 

        }
    }
} 
```

非常感谢任何建议或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:37:43.570

我会建议一个我*没有测试过*的答案，所以请给我任何反馈。让我们来看看：

1.  摆脱那个`getReader()`方法，你不需要所有的数据，只要你使用的是SqlDataSource。只需在`Page_Load`

    `if(!this.IsPostBack) { this.CheckBoxList1.DataBind(); }`

2.  在`CheckBoxList1_SelectedIndexChanged`，获取所有检查值并将它们连接到电影查询中，例如`SELECT [ProductID], [Title], [Image1FileName] FROM [Product] WHERE CategoryId IN (` *将 ID 放在这里* `)`

3.  将此查询设置为`SqlDataSource1`

4.  称呼`DataList1.DataBind();`

请测试它并给我任何反馈。

问候

# svn - SVN 签出修订号

> ID：11417540
> 
> 赞同：0
> 
> 时间：2012-07-10T16:14:59.123
> 
> 标签：svn

我想知道是否有人知道一种方法来查找您从 SVN 存储库中签出代码的修订号。换句话说，我想知道是否有任何功能组合或 svn 命令，您可以在其中键入有关工作副本的内容，然后您可以取回从存储库中检出的修订版本。这样做的目的是当多个人提交到存储库时，您想要检查从原始副本到工作副本的更改。谢谢你，所有的帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:11:15.370

多亏了 Ic，才弄明白。你弄清楚的方法是你对 BASE 副本和你当前的工作副本做一个 svn diff。在 perl 中，这可以通过`my @output = svn diff $workingcopy;`它获取 BASE 修订版，或者换句话说，您上次提交到 SVN 存储库或进行 svn 更新，并将该修订版与您在工作目录中所做的更改进行比较。

# animation - 如何在 SVG 中反转动画线

> ID：11417541
> 
> 赞同：4
> 
> 时间：2012-07-10T16:15:00.863
> 
> 标签：animation, canvas, svg

我对 SVG 文件几乎一无所知，但必须使用一个来画一条线来指示路线（我对画布的了解不够多，无法选择）。

我找到了一些例子并设法实现了我所追求的，但事实证明这条线需要从右向左移动。

我从 Illustrator 导出了路径，但不知道如何反转它们。有没有办法可以反转动画？

这是文件：http: [//jdfv.nl/route.svg](http://jdfv.nl/route.svg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T14:17:26.847

这是一种方法：http: [//jsfiddle.net/VTp4D/](http://jsfiddle.net/VTp4D/)

SVG文件的相关部分：

```
<path id="busTrack2" ...>
  <animate id="dashAnim2" attributeName="stroke-dashoffset" from="0" 
   to="0" dur="10s" begin="0" fill="freeze" keySplines="0 0.5 0.5 1" 
   calcMode="spline"/>
</path> 
```

Javascript代码：

```
var busTrack = document.getElementById('busTrack2');
var busTrackAnim = document.getElementById('dashAnim2');
var trackLength = busTrack.getTotalLength().toString();
busTrack.setAttribute('stroke-dasharray',trackLength+','+trackLength);
// forward: 
// busTrackAnim.setAttribute('values',trackLength+';0');
// backward:
busTrackAnim.setAttribute('values','-'+trackLength+';0'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-11T01:25:37.653

要反转路径方向，您需要在 Illustrator 中编辑路径文件。SVG 路径是定向的。路径标记描述了它们从哪里开始，以及它们移动到哪里。（它非常冗长，但也非常强大。）

在 Illustrator 中，使用直接选择工具选择路径，然后选择钢笔工具，然后单击一次您希望成为动画路径端点（巴士“停止”的位置）的位置。它在屏幕上看起来完全一样，但方向会颠倒。重新保存文件并将其换出。然后动画的 stroke-dashoffset 将走另一条路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:34:53.500

这绝对是可能的，只是您需要一种方法来确定“笔”在一系列操作之后的位置，因为您需要确定它完成绘图的位置以向后追溯其步骤。向后动画 SVG 涉及以下内容：

1.  将 SVG 分解为由绝对运动分隔的分量曲线，并找出它们的端点。至少，您有一条具有单个端点的连续线。您需要向前播放曲线以计算其最终位置。

2.  向后播放命令。在大多数情况下，这是微不足道的。需要回溯 (-x, -y) 的行 (+x, +y)。具有端点 (x1, y1) 和控制点 (x2, y2) 的曲线需要回溯为具有端点 (y1, x1) 和控制点 (y2, x2) 的曲线。每个命令都有它的反面。

一旦你得到了它，这只是一个向后播放每个组件的问题。困难的部分只是弄清楚每个组件的最终位置。基本上，您需要在不绘制的情况下向前播放每个组件。有很多可用的开源图形库可以帮助您解决这个问题。如果您发现自己编写代码来计算贝塞尔曲线的端点，那么您还不够努力。

# java - 什么正则表达式模式描述了一个有效的 Unix/Linux 目录？

> ID：11417543
> 
> 赞同：1
> 
> 时间：2012-07-10T16:15:03.163
> 
> 标签：java, regex

当用户将目录名称传递给我的程序时，我会检查它

```
private static final Pattern    DIRECTORY_PATTERN   
            = Pattern.compile("/*?([a-zA-Z_0-9]+)/*?",
                    Pattern.CASE_INSENSITIVE); 
```

到目前为止我们所看到的，这是可行的，但我怀疑这个正则表达式是不完整的。

你知道，或者你能建议一个更完整的正则表达式来验证目录名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:21:34.917

实际上，您可以在文件名中使用更多字符，甚至是退格和换行符等令人发指的字符。实际上，您*可能会*发现它依赖于底层文件系统。我隐约记得某处的规则允许除实际路径分隔符之外的所有内容。

在决定某件事是否有效时，我总是考虑的一件事是使用它。例如，您可以使用（复杂）正则表达式验证电子邮件地址的*格式*，但确定它完全有效的唯一方法是向其发送超链接邮件以验证它是否已收到。

在您的特定情况下，如果您想创建一个具有该名称的文件，您可以尝试在您实际允许在其中创建文件的目录中创建一个临时文件。如果文件创建成功，您可以确定这是一个有效的名称 :-) 当然，如果您正在创建一个文件，您可能只想创建*真正的*文件。如果您正在打开现有文件，请忘记正则表达式，只需尝试打开文件 -正则表达式中的*任何*复杂性都不会告诉您该文件是否存在或您是否可以读取。

不过，坦率地说，我会考虑对允许的字符设置您*自己的*限制 - 过去，我曾诅咒那些愚蠢到在其中创建包含 CTRL 字符的文件名的人，或者有人称`-rf`该`rm`命令有问题with（直到你弄清楚如何解决这个问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:18:04.423

这是特定于文件系统的。查看您希望使用的 FS 的文档以获取可接受的符号列表和目录名称限制。对于几乎所有存在的现代 FS，您已经遗漏了许多标点符号和数千个非拉丁符号。

# javascript - 截断段落前 100 个字符并隐藏段落的其余内容以显示/隐藏带有更多/更少链接的其余内容

> ID：11417544
> 
> 赞同：18
> 
> 时间：2012-07-10T16:15:03.463
> 
> 标签：javascript, jquery, xhtml

我有超过 500 个字符的段落。我只想获得最初的 100 个字符并隐藏其余部分。我还想在 100 个字符旁边插入“更多”链接。单击更多链接时，整个段落应显示并将文本“更多”编辑为“更少”，单击“更少”时应切换行为。段落是动态生成的，我无法使用 .wrap() 包装它的内容。这是我拥有的和想要的示例。

这就是我所拥有的：

```
 <p>It is a long established fact that a reader will be distracted by the readable 
   content of a page when looking at its layout. The point of using Lorem Ipsum is that
   it has a more-or-less normal distribution of letters, as opposed to using 'Content 
  content here', making it look like readable English. Many desktop publishing packages 
   and web page editors now use Lorem Ipsum as their default model text.</p> 
```

这就是我在加载 DOM 时想要的

```
 <p>It is a long established fact that a reader will be distracted by ..More</p> 
```

当用户单击“更多”时，这就是我想要的

```
 <p>It is a long established fact that a reader will be distracted by the readable 
   content of a page when looking at its layout. The point of using Lorem Ipsum is that
   it has a more-or-less normal distribution of letters, as opposed to using 'Content 
  content here', making it look like readable English. Many desktop publishing packages 
   and web page editors now use Lorem Ipsum as their default model text. ..Less</p> 
```

当我们点击“更少”时，它应该恢复点击“更多”所做的事情。

我正在使用 jQuery 将子字符串拆分、切片和包装到我想隐藏的 span 中，但这不起作用。

```
var title = $("p").text();
var shortText = jQuery.trim(title).substring(100, 1000).split(" ")
    .slice(0, -1).join(" ") + "...More >>";
shortText.wrap('</span>'); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-10T16:36:50.603

小提琴：http: [//jsfiddle.net/iambriansreed/bjdSF/](http://jsfiddle.net/iambriansreed/bjdSF/)

jQuery：

```
jQuery(function(){

    var minimized_elements = $('p.minimize');
    var minimize_character_count = 100;    

    minimized_elements.each(function(){    
        var t = $(this).text();        
        if(t.length < minimize_character_count ) return;

        $(this).html(
            t.slice(0,minimize_character_count )+'<span>... </span><a href="#" class="more">More</a>'+
            '<span style="display:none;">'+ t.slice(minimize_character_count ,t.length)+' <a href="#" class="less">Less</a></span>'
        );

    }); 

    $('a.more', minimized_elements).click(function(event){
        event.preventDefault();
        $(this).hide().prev().hide();
        $(this).next().show();        
    });

    $('a.less', minimized_elements).click(function(event){
        event.preventDefault();
        $(this).parent().hide().prev().show().prev().show();    
    });

});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T16:21:26.180

这不是谷歌的顶级搜索结果，但我使用[jQuery Expander 插件](https://kswedberg.github.io/jquery-expander/ "jQuery 扩展器")取得了巨大成功。这很好，因为它不会对搜索引擎机器人隐藏任何东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-11T11:52:21.453

感谢@iambriansreed 的出色功能，这里**对换行符截断段落进行**了细微修改：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script>
jQuery(function(){

var minimized_elements = $('p.minimize');
var maxLines = 20;

minimized_elements.each(function(){    
    // var textArr = $(this).text().split(/\n/); // Not supported in IE < 9
    var textArr = $(this).html().replace(/\n?<br>/gi,"<br>").split(/<br>/);
    var countLines = textArr.length;

    if (countLines > maxLines) {
        text_less = textArr.slice(0, maxLines).join("<br>");
        text_more = textArr.slice(maxLines, countLines).join("<br>");
    }
    else return;

    $(this).html(
        text_less + '<span>... </span><a href="#" class="more">More</a>'+
        '<span style="display:none;">'+ text_more +' <a href="#" class="less">Less</a></span>'
    );
}); 

$('a.more', minimized_elements).click(function(event){
    event.preventDefault();
    $(this).hide().prev().hide();
    $(this).next().show();        
});

$('a.less', minimized_elements).click(function(event){
    event.preventDefault();
    $(this).parent().hide().prev().show().prev().show();    
});

});

</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T16:17:23.580

你看过[jQuery Truncator](https://github.com/henrik/jquery.truncator.js/)插件吗？

它几乎完全符合您的描述。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-10T16:55:45.623

看起来其他几个人打败了我，但这就是我想出的。

```
var MORE = "... More...",
    LESS = " Less...";

$(function(){
    $("p").each(function(){
        var $ths = $(this),
            txt = $ths.text();

        //Clear the text
        $ths.text("");

        //First 100 chars
        $ths.append($("<span>").text(txt.substr(0,100)));

        //The rest
        $ths.append($("<span>").text(txt.substr(100, txt.length)).hide());

        //More link
        $ths.append(
            $("<a>").text(MORE).click(function(){
                var $ths = $(this);

                if($ths.text() == MORE){
                    $ths.prev().show();
                    $ths.text(LESS);
                }
                else{
                    $ths.prev().hide();
                    $ths.text(MORE);
                }
            })
        );
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-07T15:16:37.637

对于所有来这里寻找更多节目的人......这是另一个插件[http://viralpatel.net/blogs/dynamically-shortened-text-show-more-link-jquery/](http://viralpatel.net/blogs/dynamically-shortened-text-show-more-link-jquery/)

# javascript - 取消绑定某些链接，但不是全部

> ID：11417551
> 
> 赞同：-1
> 
> 时间：2012-07-10T16:15:19.687
> 
> 标签：javascript, jquery

我正在尝试取消绑定所有功能的链接。当我做：

```
$('a').unbind(); 
```

它完美地工作。但显然这不是我想要的——我只希望一个特定的链接不被任何函数操纵。所以我尝试选择特定链接：

```
$('.page1->index').unbind(); 
```

但这不起作用，该功能仍在操纵链接。我也试过

```
 $('a.page1->index').unbind(); 
```

但这也不起作用。我觉得我的第二种方法应该有效。有什么我想念的吗？

HTML：

```
<a id ="page1->index" href="#play1" data-role="button" data-icon="back" data-iconpos="notext" data-transition="fade" data-direction="reverse"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:20:22.987

如果你的类名是`page1->index`，那么你需要转义 ' ' 符号，因为它在选择器`>`中有[特殊的含义](http://www.w3.org/TR/css3-selectors/#child-combinators)`CSS`：

```
$('.page1-\\>index').unbind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:17:31.437

使用链接的 ID。ID 将是唯一的，因此您将在 jQuery 选择器中仅获得一个元素

```
$('#yourLinkId').unbind(); 
```

假设您的 HTML 是这样的（带有 ID）

```
<a href="somepage.aspx" id="yourLinkId">Wonderful Link</a>
<a href="somepage3.aspx" id="yourMagicLink">Magic Link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:19:23.680

使用 not 选择器或 not 方法排除您不需要操作的所有锚点。

例如

```
$('a').not('#DontUnbindThisAnchor').unbind() 
```

上面的代码选择所有没有 id 'DontUnbindThisAnchor' 的锚点并解除绑定

# ios - 仅显示 Apple 推送通知的启动按钮

> ID：11417565
> 
> 赞同：-1
> 
> 时间：2012-07-10T16:15:57.077
> 
> 标签：ios, apple-push-notifications

有没有办法制作推送通知有效负载，因此当设备上弹出警报对话框时，只有一个“启动”按钮启动应用程序，因此用户无法关闭通知？

我们的目标是通过删除关闭这些关键消息通知的选项来强制用户确认关键消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:39:55.930

不，这从根本上违反了 Apple 的用户体验原则。无论用户在做什么，它都可以让应用程序有效地控制设备。

# ruby - Ruby 关于循环和字符串相等

> ID：11417575
> 
> 赞同：1
> 
> 时间：2012-07-10T16:16:28.290
> 
> 标签：ruby, loops, string-evaluation

***为什么这不起作用？***

```
puts "Hi"

x = "stop"

loop do
  a = STDIN.gets
  break if a.to_s.downcase.equal?x.to_s
end

puts "bye" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:22:24.313

因为`gets`将包括在您输入的任何内容末尾使用的 Enter 键。

```
a = gets # I type in "stop"
a == "stop\n" #=> true 
```

为了解决这个问题，[`chop`](http://ruby-doc.org/core-1.9.3/String.html#method-i-chop)换行

```
puts "Hi"

x = "stop"

loop do
  a = STDIN.gets.chop
  break if a.to_s.downcase == x.to_s
end

puts "bye" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:24:40.210

有两个原因。

首先`equal?`是一种非常强的相等形式：默认情况下，它等同于比较对象 id，因此具有相同内容但不是同一个对象的两个字符串将不相等。您可能想`==`改用

其次`gets`将包括您输入的换行符，您可以使用`chop`或删除该换行符`chomp`

# mysql - MYSQL 根据上次更新从表中选择所有行

> ID：11417580
> 
> 赞同：1
> 
> 时间：2012-07-10T16:16:43.973
> 
> 标签：mysql

我在远程服务器上有一张大表，想在本地机器上的平面磁盘文件中保留一份副本。如果我保留从表的第一行本地读取的序列号的记录，那么如果行 id=0 <> 我本地存储的列的内容，我可以发出 SELECT 命令以返回表中的所有行序列号？

就像是

```
SELECT * FROM 1_makes WHERE IF id@0<> local_serial 
```

希望这是有道理的

```
delimiter $$

CREATE TABLE `1_makes` (
  `id` int(11) NOT NULL,
  `make` varchar(20) DEFAULT NULL,
  `allow_global_disc` tinyint(4) DEFAULT NULL,
  `home_text` text,
  `pack_home_text` text,
  `update_ref` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$ 
```

所以我想要的是只有当 id=0 和 update_ref 的行的内容与本地存储的值不同时才返回整个表。

如果我得到结果，那么我知道数据已更改，因此我可以将其保存到本地磁盘文件并更新读取的 update_ref

看起来这就是我需要的

我已删除列 update_ref 并将更新值放入 make 列 @ id=0

SELECT * FROM 1_makes WHERE (SELECT IF(make <> 'my update number', 1, 0) FROM 1_makes WHERE id = 0)

这行得通，只是想问一下 IF(make <> 'my update number', 1, 0) 中的数字 1, 0 与什么相关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:42:38.103

通过发出单独的查询，您的情况可能会更好。应用程序将首先查询 id=0 的行的值，然后根据该值继续。

但是，您可以使用子查询来完成此操作：

```
SELECT *
FROM 1_make
WHERE (SELECT IF(update_ref <> :my_number, 1, 0) FROM 1_make WHERE id = 0) 
```

或内部联接：

```
SELECT t1.*
FROM 1_make t1
INNER JOIN 1_make t2
  ON t2.id = 0 AND t2.update_ref <> :my_number 
```

但是，如果您只是测试是否有结果，最好只返回计数而不是返回未使用的值：

```
SELECT COUNT(*)
FROM 1_make
WHERE (SELECT IF(update_ref <> :my_number, 1, 0) FROM 1_make WHERE id = 0) 
```

或者甚至更好，使用 LIMIT 在第一行之后停止：

```
SELECT id
FROM 1_make
WHERE (SELECT IF(update_ref <> :my_number, 1, 0) FROM 1_make WHERE id = 0)
LIMIT 1 
```

甚至更好，只需使用 IF 的返回值：

```
SELECT IF(update_ref <> :my_number, 1, 0)
FROM 1_make
WHERE id = 0 
```

更好的是，为什么要为每一行存储一个 update_ref 的值？为什么不把它移到自己的桌子上：

```
SELECT IF(update_ref <> :my_number, 1, 0)
FROM my_settings 
```

IF 语句返回 0 表示假，或 1 表示真。

最后，如果 id 是一个增量值，为什么不直接搜索 id 大于存储的最后一个值的行呢：

```
SELECT id
FROM 1_make
WHERE id > :my_number
LIMIT 1 
```

此外，这不考虑更新。只有，插入。

考虑添加从主服务器复制的从服务器。然后，简单地自动备份从服务器。这是大多数备份的完成方式。

# c# - 在应用程序启动时清除所有会话

> ID：11417587
> 
> 赞同：4
> 
> 时间：2012-07-10T16:17:21.837
> 
> 标签：c#, asp.net, session, session-variables

我注意到，当我重新启动我的 ASP.Net 应用程序时，已登录用户的凭据会被记住，并且他们可能会发现他们已自动登录。
只要不携带在登录时设置的用户会话变量，这种行为是不受欢迎的。那么，我怎样才能“忘记”应用程序启动时的所有会话呢？

我看到我不能`Session.Abandon()`在`Application_Start`活动中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:52:55.033

启动新会话时使用此代码，即将其添加到 Global.asax

```
 #region remove all cookies

    string[] myCookies = Request.Cookies.AllKeys;
    foreach (string cookie in myCookies)
    {
        Response.Cookies[cookie].Expires = DateTime.Now.AddDays(-1);
    }

    #endregion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:36:58.800

重启后Session是否存在？怎么可能？可能您正在使用会话状态服务器或 Sql 服务器。您不能在 Application_Start 事件中使用 Session.Abandon() ，因为当应用程序启动时，那时不存在会话。在 Application_End 事件中调用 Session.Clear() 或 Session.Abandon() 方法，因此当应用程序重新启动时，它必须清除所有会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:14:29.920

假设您正在使用表单身份验证，这是预期的行为：即使您的应用程序已重新启动，用户仍然拥有有效的 FormsAuthentication cookie。

如果你真的想注销它们，你只需要调用`FormsAuthentication.SignOut`.

但我会质疑这样做的必要性——为什么要强迫用户再次输入他的凭据？如果您丢失了存储在 Session 中的状态，您可能需要重定向到主页或其他内容，但无需让用户再次登录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:25:15.107

您必须像这样清除 cookie：

```
foreach (string key in Request.Cookies.AllKeys)
{
    HttpCookie cookie = new HttpCookie(key);
    cookie.Expires = DateTime.UtcNow.AddDays(-7);
    Response.Cookies.Add(cookie);
} 
```

**EDTI：** 这样做您的所有 cookie 都将过期。浏览器将尝试删除您的所有 cookie。这将导致不记住用户的登录状态。

希望这可以帮助。

# backbone.js - Backbone - 正确使用模型和视图

> ID：11417588
> 
> 赞同：1
> 
> 时间：2012-07-10T16:17:22.863
> 
> 标签：backbone.js

我想弄清楚在主干中使用模型和视图的正确方法。如果可能，应该首先使用什么以及为什么。

例如：如果我有一个应用程序在页面上显示一系列不同的图像，一旦单击它就会移动页面，该页面仅显示带有名称、描述、颜色等的图像。

什么是更好的使用方法；

1.  单击图像并更改触发路由器的 URL，从而显示正确的视图。从该视图加载模型。

2.  将点击事件附加到每个图像，这会更改模型中的细节，然后触发事件以更改视图。

3.  再次使用路由器，调用模型然后触发视图。但是，我仍然可以使用该模型获取详细信息。

4.  在路由器中调用它们并将模型传递给视图？这又是怎么做到的？

5.  不同的方法

我正在使用主干样板，我认为这可能会让我有点困惑。但是任何文章或解释都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:37:39.410

我通常设置的方式是大量使用[Backbone.Events](http://backbonejs.org/#Events)；我倾向于通过将这些事件绑定到视图中的方法来拦截视图中的点击事件。反过来，该绑定事件将执行一些特定于视图的工作，然后将执行类似的操作`this.trigger("Router_SomeEvent")`- 指定该事件的绑定，通常是在路由器中创建视图的位置，如下所示：

```
// Begin router snippet...
someRouteMethod: function() {
   this.views.SomeViewInstance = new MyViews.SomeViewClass();
   this.views.SomeViewInstance.bind("Router_SomeEvent", this.onSomeEvent);
},

onSomeEvent: function() {
   this.navigate("NewLocation", { trigger: true });
}
// End router snippet 
```

使用这种**发布/订阅 (pub/sub)**模式，您的代码变得更加解耦，并且更易于处理和扩展。一开始有点混乱，但是一旦你掌握了它，就会越来越清楚它为什么有用。我倾向于让我的路由器处理所有......好吧......路由，而我的视图只包含渲染逻辑、事件绑定到 UI 以及必要时将事件冒泡到路由器。您还可以将事件绑定到您的模型；我倾向于使用与视图类似的模型，因为它们会通知我的路由器一些更改，并且路由器将继续通过更改视图状态、更改其他模型或集合等来处理该事件。

Backbone 非常强大，但是需要相当长的时间来学习。我推荐 Addy Osmani 的[Backbone Fundamentals](http://addyosmani.com/blog/backbone-fundamentals/)；他还有一本关于 O'Reilly 的书，非常值得一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:45:43.030

> 单击图像并更改触发路由器的 URL，从而显示正确的视图。从该视图加载模型。

您不一定需要路由器。例如，如果您打算将此 URL 用作永久链接，并且一旦用户转到此链接就打开图像详细信息视图，您只想使用它。

> 将点击事件附加到每个图像，这会更改模型中的细节，然后触发事件以更改视图。

为什么要在点击时更改模型？据我了解，您有 3 个视图：包含图像缩略图的容器、缩略图图像视图和图像详细信息视图（例如，在灯箱中打开更大的图像）。现在，当您构建容器时，您将带有图像的集合作为参数传递。Container 为集合中的每个项目呈现缩略图视图。请记住，现在每个拇指视图都有图像模型。现在单击调用图像详细信息视图并传递您已经作为参数的模型。此时实际上不涉及模型更改、路由或事件。

# canvas - 如何将从画布生成的 300 x 150 的图像调整为 640 像素 X 480 像素的大小

> ID：11417598
> 
> 赞同：0
> 
> 时间：2012-07-10T16:17:57.210
> 
> 标签：canvas, image-resizing

如何将从画布生成的 300 x 150 的图像调整为 640 x 480 像素的大小，然后以 64 为基数发送新的 640 x 480 图像。

因为他已经完成了，但我丢失了图像，因为它出现在黑色背景上。

请帮忙！

这是我的 JavaScript 代码：

```
 var context = document.getElementById(idCanvas); // Canvas with image in 300 x 150

    var canvasNew = document.getElementById("canvasToResize"); // Canvas to re-draw with new sizes
    canvasNew.width= 640;
    canvasNew.height = 480;

    var context2 = canvasNew.getContext("2d");
    var image = document.getElementById("newIMG"); // IMG tag for new image with new sizes
    image.onload = function() {
        context2.drawImage(image, 0, 0, 640, 480);
    };

    image.src = context.toDataURL();

   return canvasNew.toDataURL().split(',')[1]; // send base 64 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:52:40.267

```
function canvasPreparedToShipping(canvasSource, canvasDestiny) {

        var canvasS = document.getElementById(canvasSource); // Canvas with image 300 x 150
        var finalImageResize  = "";

        var canvasIMG = document.getElementById(canvasDestiny); // Canvas to resize image
        canvasIMG.width= 640;
        canvasIMG.height = 480;

        var context2 = canvasIMG.getContext("2d");
        var image = document.getElementById("encodeIMG"); // hidden tag for new image   
        image.onload = function() {
             context2.drawImage(image, 0, 0, 640, 480);
             finalImageResize = canvasIMG.toDataURL().split(',')[1];
        };

        image.src = canvasS.toDataURL();

       return finalImageResize;  // Image in base64, ready to send the server 

} 
```

# jquery - 有没有办法让这个 jquery 悬停动画更流畅？

> ID：11417608
> 
> 赞同：2
> 
> 时间：2012-07-10T16:18:29.653
> 
> 标签：jquery, css, position, jquery-animate

我目前正在为我公司的网站制作一个简单的交互式地图。我们正试图完全摆脱闪存。

我正在做的是，将地图上的点设置为 css 圆圈（与背景颜色和 css3 圆角链接），将鼠标悬停在其上时，其尺寸会略微扩大。

我遇到的问题是悬停动画不是很流畅。由于圆圈的性质，为了让它们在悬停时向外扩展而不向下移动，我必须使圆圈的位置稍微移动（悬停动画结束时顶部和左侧的 -5 个像素）。当我取下鼠标时，它会回到原来的大小和位置，但是它会跳跃一个像素并且有时看起来很乱。

这是我当前原型的链接： http: [//clients.taylordesign.com/td/map_v02/interactive-map.html](http://clients.taylordesign.com/td/map_v02/interactive-map.html)

那么有没有办法让动画完美流畅呢？

我在 Mac、sno​​w leopard、chrome、firefox 上看这个。

```
$(document).ready(function(e) {

$('a.location').each(function() {

    var pos = $(this).find('span').position();
    var posLeftHover = (pos.left - 5);
    var posTopHover = (pos.top - 5);

    $(this).hover(function() {
        $(this).find('span').stop(true, false).animate({
            height: '25px',
            width: '25px',
            left: posLeftHover,
            top: posTopHover
        }, 200);
    }, function() {
        $(this).find('span').stop(true, false).animate({
            height: '15px',
            width: '15px',
            left: pos.left,
            top: pos.top
        }, 200);
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:37:34.427

我会尝试将跨度放在一个 25x25 的框中，并使用 CSS 将其垂直和水平对齐到该框内的中心。然后你不需要动画位置，只需要大小。我认为这会让你看起来更流畅。

[http://jsfiddle.net/9LXSv/](http://jsfiddle.net/9LXSv/)

CSS：

```
.box {width:25px; height:25px; text-align:center; position:absolute;}
.dot {width:15px; height:15px; vertical-align:middle; background:red; display:inline-block;}​ 
```

HTML：

```
<div class="box" style="left:100px; top:100px;">
  <span class="dot"></span>
</div>

<div class="box" style="left:200px; top:100px;">
  <span class="dot"></span>
</div>
​ 
```

JS：

```
$(document).ready(function(e) {

  $('.box').hover(function() {
    $(this).find('span').animate({
      height: '25px',
      width: '25px'
    }, 200);
  }, function() {
    $(this).find('span').animate({
      height: '15px',
      width: '15px'
    }, 200);
  });
});

​ 
```

# svn - SVN want to merge from trunk to branch indefinitely

> ID：11417615
> 
> 赞同：0
> 
> 时间：2012-07-10T16:18:49.130
> 
> 标签：svn, merge, branch

My SVN repo is like this:

```
/trunk
/branches/project1/trunk
/branches/project1/branches 
```

My directory /branches/project1/trunk is a branch of /trunk. I have made a lot of modifications to this branch (new code, new files added, files deleted, etc...). I sometime merge from branch to trunk, and from trunk to branch. But my mistake was to always use "Merge a range of revisions" in all cases. I just understand recently that "Merge a range of revisions" should be used for the merge from trunk to the branch, and "Reintergrate a branch" is for the merge from the branch back to the trunk.

So today, I try to merge the diffs from the branch to the trunk with the right method, and fix a lot of conflicts. But since then, when I merge from branch to trunk and from trunk to branch, SVN wants to "update" some files that had been added one day in the branch. And the update does nothing except increasing the rev number. If I try to merge 2 or 3 times, the same files are "updated" each time (e.g. increasing the rev number only).

Is there a way to fix this? Or should I delete my branch and create a new one, at the same path?

The SVN version is:

```
TortoiseSVN 1.6.16, Build 21511 - 32 Bit , 2011/06/01 19:00:35
Subversion 1.6.17 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:30:48.547

Your problem here is your workflow. Branches are not designed to be used in the way that you are using them. You can merge changes into a branch from the branch's source (in your example, `/trunk`), but once you merge the branch changes back into the source you should stop using the branch and delete it. (Side note: technically there is an 'official' way to [keep a branch alive after reintegrating it](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice) but since it's equivalent to deleting and re-creating the branch and more difficult to do, it's usually not the best route to take)

The problem here is metadata. When you merge changes between branches, Subversion records metadata indicating which revisions were merged in. Merging from branch back to trunk attaches metadata to the trunk indicating that certain revisions from the branch were merged in. The next time that you merge changes from trunk->branch, one of the revisions that gets merged in is the trunk revision representing the branch->trunk merge. At this point the metadata is rather confusing and almost circular, and you can actually end up corrupting your branch by merging in older bits of code that you have modified in the branch since the last merge. Even if the merge finishes successfully, you are increasing the likelihood of conflicts on future merges. In general, it's extremely error-prone and not a use case that Subversion was designed around. For a better explanation of why this causes problems, see the link above.

In general, branches are designed for temporary, short-term development work. What you are doing sounds more like a longer-term *fork* than a branch, and that's definitely not one of Subversion's typical use cases. You have a couple of options here.

1) When you merge from the branch to the trunk, don't record any metadata about the merge. Either hand-merge the changes (instead of letting Subversion do it), or merge the changes and then revert the metadata changes before committing. This is not a very good solution and introduces opportunities for copy/paste errors, but it might result in fewer problems. You're still operating outside of the standard Subversion workflows, so I expect that you'll still run into issues.

2) Avoid partially merging a branch back into the trunk. If you merge *all* of the branch's changes, do a `--reintegrate` merge and then delete the branch (you can always create a new one, even one with the same name). If only a subset of the changes need to be merged, do the initial development in the trunk (not the branch) and then merge the changes from trunk to branch. That way, all of your merges are still going in the same direction, and the end result is the changes are present in both trunk and branch.

3) Consider using [git](http://git-scm.com/). The workflow that you are describing is more easily done with git and doesn't involve jumping through as many hoops to get it running. You can also run git on top of Subversion, so you can use a git repository on your local machine that pulls from and pushes changes to a Subversion repository.

4) Eliminate the need for the fork by refactoring your code so that a separate branch isn't necessary. Break out the common functionality into a shared module, and hide the differences behind a common interface. If you'd like, you can use compile-time flags to choose which version to build. This would eliminate the need to do merges entirely.

#4 is obviously the best solution. I understand that it may not be possible to do that sort of thing in all cases, especially when the code base is large and the branch makes major architectural changes. When that's not possible, I recommend option #3\. I use this method personally. My team uses a Subversion repository, but several developers on the team - including myself - run git on our local machines in order to do some more-advanced things that Subversion doesn't do (or doesn't do easily). We don't maintain any long-term branches like you are doing, but we often use multiple short-term branches and merge changes between them.

For a more detailed description of Subversion's typical use cases regarding branches and merges, see [the Subversion book](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.html).

# rets - RETS 与否 RETS

> ID：11417616
> 
> 赞同：2
> 
> 时间：2012-07-10T16:18:49.590
> 
> 标签：rets

我们要构建一个 MLS 应用程序。我们想使用真正的 MLS 服务作为数据源。什么是更好的解决方案：直接使用 RETS 或使用 3rd 方数据服务为我们提取 MLS 数据然后查询它们的数据？PS：如果我们想直接使用RETS，有没有类似沙盒服务可以测试我们的客户端应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:26:14.830

大多数第三方都不允许您查询他们的数据。他们只是提供小部件和其他方式将列表插入您的网站。我知道你想要做什么，而 MLS 对我们来说并不容易。

如果你能负担得起 MLS 对 RETS 访问的费用，我会同意的。您将需要更多的开发资源，并且您仍然必须遵循 MLS 的规则，但您将能够创建一个更加健壮和定制的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:26:12.947

我创建了一个包含 MLS 列表和 PointtoAgent 列表的网站，我们创建了一个每天晚上运行的 Cronjob，从 MLS 列表和 P2A 中获取一些 XML 文件，将它们从 XML 转换为 MySQL，保存它，删除重复项并更新状态。我认为 cronjob 是一个很好的解决方案，因为您可以不断更新您的网站。请注意创建一个好的设计，因为您的数据库会不断变化。联系 MLS 支持，他们有文档可以从您的列表中连接和提取 XML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-12T23:46:33.920

您在这件事上没有太多选择，因为 MLS 将决定您如何获取数据。他们通常提供 RETS 提要，但通常提供 FTP 提要或链接解决方案。

FTP 可能是最容易使用的，因为它基本上每天将所有列表数据下载为 CSV 文件。

RETS 更灵活，但也更复杂。[RETSConnector 之](http://retsconnector.com/Home/ConnectorDownload)类的应用程序对于安排日常任务非常有用且简单，可以或多或少地为您提供 FTP 提要的功能。问题是配置 RETS 查询以获得您需要的内容。

如果可以编写内部 RETS 客户端，请使用[librets](https://github.com/NationalAssociationOfRealtors/libRETS)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T00:00:36.377

我们管理超过 100 种不同的 MLS 费用。我可以明确地说您不想管理自己的 RETS 数据。在 3 年多的时间里，MLS 没有一个星期在不通知我们的情况下更改其某些元数据字段。当这种情况发生时，事情就会破裂。更重要的是，每个 MLS 都有不同的显示要求，您必须跟踪这些要求，如果您的客户对数据做出任何违反规则的行为，您可能会被追究责任。

此外，与普遍看法相反，您需要下载所有数据的本地副本。这非常昂贵，因为您需要存储所有数据（通常每 15 分钟更新一次）并存储所有照片。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-09T15:19:48.673

大约 2 年以来，我一直在使用几十个 RETS 连接。这是我了解到的关于直接拉取与 3rd 方服务的知识......

这实际上取决于您有多少时间，以及您与多少供应商合作。如果您只需要担心少数供应商并且有时间定期监控和更新这些连接和数据映射，那么直接使用 RETS 是可行的，NAoR 甚至有一个您可以使用的框架，称为 libRETS。在任何其他情况下，我强烈建议外包或使用第三方服务。

如果您喜欢像我一样使用 NoSQL 环境（例如 Mongo），我推荐的第 3 方服务是 SimplyRETS。他们将提供一个以 JSON 格式提供数据的 API。您可以设置一个简单的 cron 任务来提取此数据并更新您的本地数据库。您甚至可以直接复制每条记录。它不是免费的，但他们有很好的支持，这让管理不断变化的字段名称和类型变得非常头疼。

祝你好运！

# perl - Perl 工具在通过 WGET 下载之前读取位于远程的文件

> ID：11417618
> 
> 赞同：0
> 
> 时间：2012-07-10T16:19:00.933
> 
> 标签：perl, wget

假设网页中有一个文本文件链接。现在我可以使用 HTML builder 来解析页面，提取该链接，然后通过 WGET 将该文件下载到我选择的目录中。但是是否可以在下载文件之前对其进行检查？我的意思是，就像检查前 6 个字母以查找它是否与序列匹配`cooler`，如果匹配，则仅下载它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:52:46.757

在下载之前阅读*一些文件？*

您可以使用 curl 及其 --range 选项来下载文件的一部分。但是您需要对该文件有足够的了解才能跳过我假设的任何元/标题数据。

`man curl`

请注意，根据手册页：

> 您还应该知道，许多 HTTP/1.1 服务器没有启用此功能，因此当您尝试获取范围时，您将获取整个文档。

# c# - 使用带有自定义子类的实体框架

> ID：11417619
> 
> 赞同：4
> 
> 时间：2012-07-10T16:19:12.837
> 
> 标签：c#, database, entity-framework

我正在使用 C# 实体框架将数据映射到项目的 sql server。我试图想出一种方法来使用实体框架根据鉴别器字段自动生成自定义子类，而不要求子类实体具有表。

例子：

在实体框架中，我有一个`A`具有字段的对象`type`。我也有以下

```
public class B : A {
}

public class C : A {
} 
```

我正在寻找一种方法让实体框架识别该`type`字段`B`，然后创建`B`该类的实例。这些类没有需要持久保存到数据库的数据。它们只是不同表中行的包装器。

例子：

我有一个项目对象表。每个项目对象都有一个项目设置集合和一个项目类型字段。

有不同类型的项目（文本、单选、复选框），它们都使用抽象`render()`方法以不同方式呈现。这些子类型中的每一个还具有该对象所需的一组特定项目设置。

如果我可以创建实体子类而不必将它们映射到数据库，我可以让 TextItem 成为 Item 的子类，实现我的`render()`方法和添加属性，这些属性映射到我的项目设置表中的每个值。然后，当我从数据库中提取一个新项目时，它会根据类型字段根据鉴别器自动创建我的特定类。

我已经使用 DBML 完成了这类事情。我想使用实体框架，因为它更强大，但可能没有办法做我正在寻找的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:55:14.933

这称为逐层表映射，[EDMX](http://www.robbagby.com/entity-framework/entity-framework-modeling-table-per-hierarchy-inheritance)和[代码优先](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)都可以。要真正使其工作，必须映射您的子类，因为 EF 必须知道它们的存在才能正确地将鉴别器值转换为正确的类型。整个类层次结构映射到单个数据库表。

# java - 使用 XStream 读取元素属性值

> ID：11417620
> 
> 赞同：2
> 
> 时间：2012-07-10T16:19:15.110
> 
> 标签：java, xml, xstream

我无法查找元素的属性值。我的 XML 是

```
<Person>
          <BirthDate>2008-01-04</BirthDate>
          <FirstName>Affo</FirstName>
          <Gender tc="200">Male</Gender>
          <LastName></LastName>
          <Occupation>false</Occupation>
          <Age>4</Age>
</Person> 
```

我感兴趣`<Gender tc="200">Male</Gender>`。我的 POJO 看起来像这样：

```
 private String FirstName;
    private String LastName;
    private String Occupation;
    @XStreamAsAttribute
    @XStreamAlias("tc")
    private String genderTC;
    private String Gender;
    private String birthDate;
    private int age; 
```

从 XML 是

```
 XStream stream = new XStream(new DomDriver());
        stream.processAnnotations(PersonType.class);
        PersonType person = (PersonType) stream.fromXML(file);

        System.out.println(person.getFirstName());
        System.out.println(person.getGenderTC());
        System.out.println(person.getGender()); 
```

在这里，`person.getGenderTC()`我得到了空值。有趣的部分是当我反转过程并使用相同的 PersonType pojo 生成 xml 时，我得到了以下 XML：

```
<Person tc="111">
  <FirstName>Himanshu</FirstName>
  <Gender>M</Gender>
  <Age>28</Age>
</Person> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:13:14.423

> @BlaiseDoughan 太好了，感谢您的支持。您能否告诉我如何在不使用 jaxb.properties 的情况下将 EclipseLink MOXy 与我的项目集成？要包括哪些库/JAR？在这两者之间，我知道 EclipseLink JAXB (MOXy) 实现来获取属性。我唯一的预感是 jaxb.properties 文件。

**人**

以下是您如何使用 MOXy 的`@XmlPath`注释来进行您正在寻找的映射：

```
package forum11417620;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="Person")
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {

    @XmlElement(name="FirstName")
    private String firstName;

    @XmlElement(name="LastName")
    private String lastName;

    @XmlElement(name="Occupation")
    private String occupation;

    @XmlPath("Gender/@tc")
    private String genderTC;

    @XmlPath("Gender/text()")
    private String gender;

    @XmlElement(name="BirthDate")
    private String birthDate;

    @XmlElement(name="Age")
    private int age;

} 
```

**演示**

下面是一个示例，说明如何在`JAXBContext`没有`jaxb.properties`文件的情况下引导 MOXy。

```
package forum11417620;

import java.io.File;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContextFactory.createContext(new Class[] {Person.class}, null);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum11417620/input.xml");
        Person person = (Person) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(person, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<Person>
   <FirstName>Affo</FirstName>
   <LastName></LastName>
   <Occupation>false</Occupation>
   <Gender tc="200">Male</Gender>
   <BirthDate>2008-01-04</BirthDate>
   <Age>4</Age>
</Person> 
```

**所需的二进制文件**（来自[http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)）

***选项 #1 - EclipseLink JAR（来自安装程序 Zip）***

*   eclipselink.jar

***选项 #2 - MOXy 包（来自 OSGi Bundles Zip）***

*   org.eclipse.persistence.moxy.jar
*   org.eclipse.persistence.core.jar
*   org.eclipse.persistence.asm.jar

***马文***

`pom.xml`作为我博客中一些示例的一部分，我在 Git Hub 上有示例文件：

*   [https://github.com/bdoughan](https://github.com/bdoughan)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:40:24.113

正如你所拥有的，这段代码：

```
@XStreamAsAttribute 
@XStreamAlias("tc") 
private String genderTC; 
```

期望属性位于 XML`tc`的封闭节点上。`Person`

我认为您需要定义第二个 pojo 类型来反序列化 Gender 数据，包括 genderTC 属性以及 Gender 元素。

# iphone - 在快速对话框中调用 setQuickDialogTableView 时

> ID：11417622
> 
> 赞同：0
> 
> 时间：2012-07-10T16:19:20.150
> 
> 标签：iphone, xcode, quickdialog

我正在[这里](https://github.com/escoz/QuickDialog/blob/master/sample/LoginController.m)处理示例代码，我的目标是自定义登录单元格的字体和颜色

下面的这些方法正在为表格视图设置适当的委托类

```
- (void)setQuickDialogTableView:(QuickDialogTableView *)aQuickDialogTableView {
    [super setQuickDialogTableView:aQuickDialogTableView];

    self.quickDialogTableView.backgroundView = nil;
    self.quickDialogTableView.backgroundColor = [UIColor colorWithHue:0.1174 saturation:0.7131 brightness:0.8618 alpha:1.0000];
    self.quickDialogTableView.bounces = NO;
    self.quickDialogTableView.styleProvider = self;

    ((QEntryElement *)[self.root elementWithKey:@"login"]).delegate = self;
} 
```

**我的问题是**：

```
how this method being called during the running time.
I did pull the sample project and took a look inside but still have had no clues how it is being triggered at all 
```

请就这个问题给我建议，欢迎所有评论在这里

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:29:41.140

QuickDialog 开发人员在这里。

当 QuickDialogController 将其`quickDialogTableView`属性设置为新`QuickDialogTableView`实例时，将调用此方法，在`loadView`方法中：

```
- (void)loadView {
    [super loadView];
    self.quickDialogTableView = [[QuickDialogTableView alloc] initWithController:self];
    self.view = self.quickDialogTableView;
} 
```

在上面的方法中，我使用点符号来设置`self.quickDialogTableView`对象，但这也可以写成`[self setQuickDialogTableView:...]`. 他们的意思是一样的。

当 ViewController 出现时，iOS 会自动调用 loadView 方法。

# vector - 如何获得两个向量之间的向量？

> ID：11417626
> 
> 赞同：7
> 
> 时间：2012-07-10T16:19:34.773
> 
> 标签：vector, position

我从三个点开始， x 和 y 值。我真正想要的是实际矢量的位置（查看提供的图像）。你能帮助我吗 ？我尝试了一下 atan2 和平行四边形，但不幸的是没有成功。

![图片](../Images/b24da3a233a6ee083c2566aef488edfd.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T16:32:21.447

再一次，我会提醒我可能会遗漏一些东西，但我*认为*这是非常简单的向量相加：

```
let point A be (700, 500)
let point B be (400, 400)
let point C be (650, 100)
let point D be (???, ???)

the vector from A to B is: (-300, -100) // i.e. x = B-A, 400 - 700, etc
the vector from A to C is: (-50, -400)
Adding these together yields the vector from A to D: (-350, -500).
Adding that vector to point A yields the coordinates of the point D: (350, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:27:47.777

一般来说，求直线夹角平分线的方程

a1x + b1y + c1 = 0 和 a2x + b2y + c2 = 0。

平分线是一个点的轨迹，它移动使得从它到两条给定线的垂线相等。

平分线方程是

a1x+b1y+c1/√a12+b12 = + a2x+b2y+c2/√a22+b22。

只需根据您的具体情况调整这些方程即可。

# php - 根据另一列值的顺序对表中的所有行进行编号

> ID：11417635
> 
> 赞同：0
> 
> 时间：2012-07-10T16:20:16.873
> 
> 标签：php, mysql

我目前有一张有 497k 字的表。每个单词及其在英语中的相对频率都是一行。我想创建另一列，根据它们的频率将它们从 1 排序到 497k（此列表中的单词数），最高频率为 1，依此类推。我怎样才能做到这一点？我正在使用 MySQL 5.1.54

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:01:38.927

我想出了这个（复杂，但可能很快）的单语句解决方案：

```
update vocabulary SET rank = 

(
SELECT ranking.rank FROM (
  SELECT @rownum:=@rownum + 1 as rank, voca.word
  FROM 
      (
        SELECT v.word, v.frequency
        FROM vocabulary v
        ORDER BY v.frequency DESC
      ) voca,
     (SELECT @rownum := 0) r
) ranking
WHERE ranking.word = vocabulary.word
); 
```

我相信这可以进一步优化，但为此提供一个单一语句的解决方案可能是一个很好的起点。

此外，这可能仍然存在对具有不同单词但相同频率的行进行排名的问题。

这是一个 SQL Fiddle： [http ://sqlfiddle.com/#!2/a00e2/1](http://sqlfiddle.com/#!2/a00e2/1)

# asp.net - ASP.NET 部分回发的页面更新会发生什么？

> ID：11417639
> 
> 赞同：1
> 
> 时间：2012-07-10T16:20:31.887
> 
> 标签：asp.net, jquery-ui, updatepanel, partial-postback

`UpdatePanel`当客户端接收到 ' 的响应并将其呈现在页面上时，究竟会发生什么？

[这个问题的动机是为这个问题](https://stackoverflow.com/q/9470736/412107)和[这个 jQueryUI 票](http://bugs.jqueryui.com/ticket/8434)中提出的问题找到一个合适的解决方案。本质上，当 jQueryUI 日期选择器附加到 a 并在更新时打开时，会发生奇怪`TextBox`的事情`UpdatePanel`。`UpdatePanel`

[这个问题](https://stackoverflow.com/a/1238686/412107)及其[链接的文章](http://www.codeproject.com/Articles/35370/How-to-write-your-own-partial-postback-in-ASP-NET)表明它只不过是这样：

```
document.getElementById('updatePanelContainer').innerHTML = responseHtml; 
```

但是我已经在[这个 jsfiddle](http://jsfiddle.net/tzDnZ/)中尝试过，并且 datepicker 完全停止工作，除了 Done 按钮；我在部分回发中看到的行为是 datepicker 仍然有效，但它的状态是从它下面取出的。当我使用 jQueryUI 非缩小代码对其进行调试时，我看到`drawYear`和`drawMonth`属性丢失了它们的值（变为 0）。

在使用 Firebug 并观察部分回发时，我注意到页面中有以下变化：

*   Firebug 的 DOM 选项卡中的一些输入属性消失了，例如：
    *   访问密钥标签
    *   父元素
    *   客户身高
    *   客户左
    *   客户顶部
    *   客户端宽度
    *   形式
    *   下一个兄弟姐妹
    *   偏移高度
    *   左偏移
    *   偏移父
    *   偏移顶部
    *   偏移宽度
    *   父节点
    *   上一个元素兄弟
    *   以前的兄弟姐妹
    *   滚动高度
    *   滚动宽度
*   一堆隐藏`span`元素被添加到页面底部，其中包含带有 ASP.NET 信息的隐藏字段（似乎类似于 __VIEWSTATE）
*   元素的内容`update`以微小的方式变化（可能是空格与制表符）

**更新**：我设法让重现工作；他们的关键是在重新创建绑定的输入后重新初始化日期选择器。请参阅上面提到的 jsfiddle 的[最新版本](http://jsfiddle.net/tzDnZ/2/)。不过，我仍然想知道部分回发是否有什么特别之处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:31:23.647

部分回发只是为 UpdatePanel 中的 div 发回适当的 HTML，并且该 html 被替换为响应。完整的回发生命周期仍然发生在服务器上，因此在更新 UpdatePanel 之外的控件时必须小心，因为这些更改不会反映在客户端上，但可能会产生意想不到的副作用。

# c# - 如何在 c# 和 asp.net 中获取客户端主机名、本地计算机名和用户名

> ID：11417640
> 
> 赞同：5
> 
> 时间：2012-07-10T16:20:32.987
> 
> 标签：c#, asp.net

我有 IP 地址，但由于某种原因，我可以正确解析名称以显示本地计算机名称。我尝试了几件事，所有这些都显示服务器主机名？

```
 ipadd = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
    IPAddress myIP = IPAddress.Parse(ipadd);
    IPHostEntry GetIPHost = Dns.GetHostEntry(myIP);

    //userhostname = System.Environment.MachineName;
    //userhostname = Dns.GetHostName(); //Resolve ServerHostName not computer
    //userhostname = HttpContext.Current.Request.UserHostName;
    //userhostname = HttpContext.Current.Request.UserAgent;
    userhostname = GetIPHost.HostName; 
```

对于我想使用的用户名

```
nametext = WindowsIdentity.GetCurrent().Name;
//Shows server name when deployed on server 
//when debuging and running localy shows correctly current user logged in

//nametext = HttpContext.Current.Request.ServerVariables["LOGON_USER"]; 
// not returning anything 
```

我切换了身份验证，但没有结果

```
<authentication mode="Forms">
<authentication mode="Windows"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T16:25:02.637

使用[`HttpRequest.UserHostAddress`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)and[`HttpRequest.UserHostName`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostname.aspx)作为客户端 IP 和机器名称。

假设您已正确配置身份验证，您可以从[`IIdentity.Name`](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx).

在 a 的上下文中[`Page`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)，您可以使用`Request.UserHostAddress`,`Request.UserHostName`和`User.Identity.Name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T13:06:39.540

我用它在我的 Intranet 上显示客户端区域设置机器（使用 System.Net）：

```
Dns.GetHostEntry(Request.UserHostAddress).HostName.ToString() 
```

# asp.net-mvc - MVC DropDownListFor 和 StringLength 属性不能很好地结合在一起

> ID：11417643
> 
> 赞同：5
> 
> 时间：2012-07-10T16:20:51.540
> 
> 标签：asp.net-mvc, unobtrusive-validation, html.dropdownlistfor

我的字符串长度验证总是在带有字符串值的下拉列表中失败。

这是我的模型：

```
[Required(ErrorMessage = "Required")]
[StringLength(2, MinimumLength = 2)]
[Display(Name = "Home Address State")]
public string HomeAddressState { get; set; } 
```

这是我的看法：

```
@Html.DropDownListFor(model => model.HomeAddressState, new SelectList(ViewBag.States, "Value", "Text"), string.Empty)
@Html.ValidationMessageFor(model => model.HomeAddressState) 
```

这是html输出：

```
<select data-val="true" data-val-length="The field Home Address State must be a string with a minimum length of 2 and a maximum length of 2." data-val-length-max="2" data-val-length-min="2" data-val-required="Required" id="HomeAddressState" name="HomeAddressState"><option value=""></option>
<option value="CA">California</option>
<option value="IL">Illinois</option>
<option value="IN">Indiana</option>
<option value="OH">Ohio</option>
</select> 
```

无论选择什么选项，StringLength 验证都会在客户端失败。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T16:40:10.997

这是相关的 jquery 验证代码。如您所见，它将长度验证应用于所选选项的数量，而不是选项的长度。似乎只适用于多选列表框。老实说，有点奇怪。

```
maxlength: function(value, element, param) {
    return this.optional(element) || this.getLength($.trim(value), element) <= param;
}

getLength: function(value, element) {
    switch( element.nodeName.toLowerCase() ) {
        case 'select':
            return $("option:selected", element).length;
        case 'input':
            if( this.checkable( element) )
                return this.findByName(element.name).filter(':checked').length;
    }
    return value.length;
} 
```

您可以做的是`getLength`自己覆盖该函数以直接返回`value.length`。

```
$.validator.prototype.getLength = function (value, element) {
    return value.length;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T14:09:56.160

为避免破坏复选框和多个选择框的逻辑，您可以使用：

```
$.validator.prototype.getLength = function (value, element) {
    switch (element.nodeName.toLowerCase()) {
        case 'select':
            {
                var attr = $(this).attr('multiple');
                // For some browsers, `attr` is undefined; for others,
                // `attr` is false.  Check for both.
                if (typeof attr !== 'undefined' && attr !== false) {
                    return $("option:selected", element).length;
                }
            }
        case 'input':
            if (this.checkable(element))
                return this.findByName(element.name).filter(':checked').length;
    }
    return value.length;
} 
```

警告：我仅在 DropDownFor 上对此进行了测试，因此使用风险自负......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:39:01.497

因为`StringLength`匹配[rangelength](http://docs.jquery.com/Plugins/Validation/Methods/rangelength)规则`jquery.validate`。在选择列表的情况下，它将检查所选项目的数量而不是所选值的长度，因此如果您编写最小长度为 1 的规则，它将起作用

# php - cakephp 完整查找/读取深度

> ID：11417644
> 
> 赞同：-2
> 
> 时间：2012-07-10T16:20:56.250
> 
> 标签：php, cakephp, cakephp-model

我基本上试图通过返回我的项目和更新表的用户和评论来扩展我的查询的深度。

站点访问者可以查看一个项目，该项目下面列出了许多更新。

用户可以对下面的初始项目和更新发表评论，并且每个更新和项目都由任何用户提交。

我建立了以下关系，但这些关系可能是错误的：

```
Project.php (Model)
    belongsTo           - User
    hasMany             - Update, Comment

Update.php (Model)
    belongsTo           - Project, User
    hasMany             - Comment

Comment.php (Model)
    belongsTo           - Project, Update
    hasAndBelongsToMany - User

User.php (Model)
    hasMany             - Project, Update, Comment 
```

我的 ProjectController.php 中的视图如下：

```
public function view($id = null, $slug = null) {
    $this->Project->id = $id;
    $this->set('Projects', $this->Project->read());
} 
```

但这只会导出一个包含以下内容的数组：

```
Project
    User        (belonging to Project)
    Comments    (belonging to Project)
    Updates     (belonging to Project) 
```

但我想要这个完整的结果，包含对所有内容的评论以及这些评论的用户：

```
Project
    User        (belonging to Project)
    Comments    (belonging to Project)
        User        (belonging to each Comment)
    Updates     (belonging to Project)
        User        (belonging to Update)
        Comments    (belonging to Update)
            User        (belonging to each Update Comment) 
```

在数据库中，评论通过一个 ID (user_id) 与用户相关联，并且不包含关于用户的更多详细信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:24:41.997

你有没有试过`$this->Project->recursive`在打电话之前切换`read()`？

```
Depth   Description
-1      Cake fetches Group data only, no joins.
0       Cake fetches Group data and its domain
1       Cake fetches a Group, its domain and its associated Users
2       Cake fetches a Group, its domain, its associated Users, and the Users' associated Articles 
```

[http://book.cakephp.org/1.3/view/1063/recursive](http://book.cakephp.org/1.3/view/1063/recursive)

# php - 简单的 PHP 到 MYsql 过滤

> ID：11417647
> 
> 赞同：-5
> 
> 时间：2012-07-10T16:21:18.467
> 
> 标签：php, mysql, text

我需要将作为电子邮件文本文件接收的数据粘贴到 html 表单中，该表单通过 php 文件将数据发送到 mysql 数据库，该文件将数据过滤到 mysql 表中的相关单元格中。

数据到达并被复制到这样的输入框中：

```
First name: John
Last name: Smith
telephone: 01234 56789 
```

什么php会从字符串中删除“名字：”并将“约翰”发布到数据库的名字列中，同样使用“姓氏”和“电话”

构建html表单和数据库不是问题；我的 php 虽然还没有跟上速度！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:46:38.327

据我了解，您会收到带有数据的纯文本电子邮件。

然后你想解析它。如果你的“标签”是自动生成的并且是一致的，那么你可以很容易地解析它......这样说：

假设您将电子邮件文本加载到变量 $email_content 中。

```
$lines = explode("\n",$email_content);
$array_of_values = array();
foreach ($lines as $line) {
    if (str_pos(":",$line)!==false) {
        $temp_array = explode(":",$line);
        $array_of_values[trim($temp_array[0])] = trim($temp_array[1]);
    }
} 
```

最后你会得到一个这样的数组：

```
array(
    'First Name'=> 'John',
    'Last name' => 'Smith',
    'telephone' => '01234 56789'
) 
```

然后，您将能够轻松地通过键访问您喜欢的任何值，然后根据需要将其保存到数据库中。

但是有一些假设 - 你只有 : 在包含标签：值对的行中。此外，行尾字符始终为 /n。但这只是一个指针，而不是现成的解决方案。

# iphone - 单击其他 UIButton 时更改 UIButton 的 UIImage

> ID：11417648
> 
> 赞同：0
> 
> 时间：2012-07-10T16:21:20.357
> 
> 标签：iphone

当用户点击`UIButton1(rewind button)`要求是改变`UIImage`其他的`UIButton2(playbutton)`。我怎样才能做到这一点。

```
UIButton *rewindButton = [UIButton buttonWithType:UIButtonTypeCustom];
[rewindButton addTarget:self action:@selector(rewind:) forControlEvents:UIControlEventTouchUpInside];
rewindButton.frame = CGRectMake(0, 0, 38, 38);
UIImage *imge = [UIImage imageNamed:@"Rewind Icon .png"];
[rewindButton setImage:imge forState:UIControlStateNormal];
UIBarButtonItem *rewind = [[UIBarButtonItem alloc] initWithCustomView:rewindButton];

-(void)rewind:(id)sender{
audioPlayer.currentTime = 0;
[timer invalidate];
ContainerViewController *viewController = [[[ContainerViewController alloc] init]autorelease];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view]; 
[self.view addSubview:toolbar];
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                    target:self
                                    selector:@selector(displayviewsAction:)
                                    userInfo:nil
                                    repeats:NO];
}

//Add Play Button

_playButton = [UIButton buttonWithType:UIButtonTypeCustom];
[_playButton addTarget:self action:@selector(playpauseAction:) forControlEvents:UIControlEventTouchUpInside];
_playButton.frame = CGRectMake(0, 0, 38, 38);
[_playButton setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateNormal];
[_playButton setImage:[UIImage imageNamed:@"52.png"] forState:UIControlStateSelected];
 UIBarButtonItem *play = [[UIBarButtonItem alloc] initWithCustomView:self.playButton];

-(void)playpauseAction:(id)sender {
 if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];

}else{
    [sender setImage:[UIImage imageNamed:@"pause icon.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];
   if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                            target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                            repeats:NO];
        isFirstTime  = NO;
    }
    } 
    } 
```

当用户点击时，`UIButton1(rewind button)`要求将`UIImage`其他的`UIButton2(play button)`从 play icon.png 更改为 pauseicon.png。

我怎样才能做到这一点。

有任何想法吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:26:57.093

直接设置按钮的图像不起作用吗？

```
-(void)rewind:(id)sender{
    [_playButton setImage:[UIImage imageNamed:@"pause icon.png"] forState:UIControlStateNormal];
    //...
} 
```

# mysql - 在 MySQL 中更改表名时如何更新多个外键引用

> ID：11417651
> 
> 赞同：0
> 
> 时间：2012-07-10T16:21:29.340
> 
> 标签：mysql

我有一张需要更改名称的表，但有很多对该表的引用。当我运行以下查询时

> 使用信息模式；SELECT * FROM KEY_COLUMN_USAGE WHERE REFERENCED_TABLE_NAME = 'TABLE_NAME' 和 CONSTRAINT_SCHEMA = 'TEST_SCHEMA'

有50多个结果。有没有办法一次更新这些，或者我需要为每个引用编写一个修改脚本？我正在使用mysql，表是innodb。它必须能够通过 db deploy 运行，因此我将无法使用管理员登录（尝试更新 KEY_COLUMN_USAGE 失败）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:29:37.767

要更新 FK 必须存在 PK，这是不可协商的。

*   您可以删除 FK 并重新创建它。
*   或者您可以尝试设置`auto_commit=0;`执行所有查询（首先是 PK，然后是 FK）并提交。

看看[这里](http://dev.mysql.com/doc/refman/5.0/es/commit.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:24:34.793

我开始像旧表一样创建新表，以保留团队其他成员的休眠引用，而我的更改没有，然后当我的外键导致我的测试失败时，我认为这将是我想要的必须手动完成。alter table 命令会按应有的方式更新它，一切都很好！

# c# - 在 Windows 中监视应用程序文件访问

> ID：11417658
> 
> 赞同：0
> 
> 时间：2012-07-10T16:22:15.517
> 
> 标签：c#, windows, windows-services, monitoring, filesystemwatcher

我需要在 win 7 操作系统中监控应用程序文件访问。我想监控哪个软件在哪个地方读取、写入或创建文件。我认为，使用 File System Watcher 和审计是不可能完成这项工作的。如何使用 C# 完成这项工作？有没有合适的API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:00:42.620

您需要一个文件系统过滤器驱动程序来进行细粒度监控和跟踪哪些应用程序访问文件。开发内核模式驱动程序需要 C 编程和特殊知识。您可以自己编写驱动程序（[阅读 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/hardware/gg462968.aspx)）或使用我们的[CallbackFilter](http://www.eldos.com/cbflt/)产品（它提供了预创建的驱动程序和 .NET API 用于与您的软件集成）。

# macos - 如何在Mac或PC中实现cheatsheet或keycue等功能

> ID：11417661
> 
> 赞同：2
> 
> 时间：2012-07-10T16:22:30.943
> 
> 标签：macos, shortcuts

Mac 应用程序备忘单 ( [http://www.cheatsheetapp.com/CheatSheet/](http://www.cheatsheetapp.com/CheatSheet/) ) 或 keycue ( [http://www.ergonis.com/products/keycue/](http://www.ergonis.com/products/keycue/) ) 具有收集活动应用程序的所有键盘快捷键的功能。我想知道我怎样才能实现这个功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:16:36.343

在 Mac 上，有几种不同的方法可以做到这一点，包括：

*   枚举菜单和菜单项并从中读取击键。这又可以通过三种不同的方式完成：
    *   用户界面脚本。您可以通过 AppleScript、ScriptingBridge、appscript、F-Script 等与应用程序“系统事件”（在 AppleScript 编辑器中查看其字典，特别是 Processes Suite）进行对话。这样做的缺点是用户必须启用辅助功能访问这个工作。
    *   将您自己的代码插入每个应用程序并使用 NSMenu API。
    *   可以通过多种不同的方式将代码插入每个应用程序，但最好只编写一个[SIMBL](http://www.culater.net/software/SIMBL/SIMBL.php)插件，这样您就不必自己弄清楚如何去做。
    *   从任何应用程序内部，如果它有一个 ObjC 运行时，您可以访问所有运行菜单栏的 Cocoa 类。在某些情况下，这甚至可以让您动态生成当前不存在但可能存在的菜单项。
    *   缺点是它不适用于 Carbon 应用程序，但每天剩下的应用程序更少。
    *   如果您对此感兴趣，[请将 fscript](http://www.fscript.org/)注入应用程序并开始使用对象浏览器和脚本界面，您应该能够从那里弄清楚。然后，您可以将所学内容翻译成您选择的语言。
    *   将您自己的代码插入每个应用程序并使用 HIToolbox 中的 Carbon Menu Manager API。
    *   这些可以在 Carbon/Menus.h 中找到；它们更繁琐，未来也更渺茫，但目前它们将适用于 Carbon 和 Cocoa 应用程序。
*   查看应用程序中嵌入的 NIB 文件。这很简单，但只处理从 NIB 创建的菜单。
*   查看应用程序向操作系统注册的快捷方式。这也很简单，但在现代 OS X 中几乎没用，因为通常只有全局快捷方式会被注册。（如果您打开系统偏好设置的键盘面板，您可以看到那里有什么。）

在 Windows 上，我相信这涉及发送某种类型的 WM_* 消息，但您可能希望将其作为一个单独的问题（未标记 osx）而不是将其附加到这个问题上。

# sql-server - 尝试安排作业时出现 SQL Server SSIS 0x80040E4D 错误

> ID：11417662
> 
> 赞同：2
> 
> 时间：2012-07-10T16:22:34.320
> 
> 标签：sql-server, tsql, ssis

尝试在 SQL Server 上安排作业时出现以下错误。使用省略号按钮查找包时：

```
An OLE DB error 0x80040E4D (Login failed for user 'TL\sa_sql'.) occured while enumerating packages. A SQL statement as issued and failed. 
```

如果我使用 Windows 身份验证，我可以正常使用该列表。但是，我无法在服务器代理登录下运行该程序包，因为该程序包需要访问已保存的第 3 方程序 (WinSCP) 会话。所以我在上面创建了系统管理员帐户，并赋予它所有我认为合理的权限，包括 MSDB 上的 SQL Server 代理权限。该包使用此登录名从 Visual Studio 运行良好，并且此登录名可以连接到数据库和集成服务存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:51:58.583

MSSQL 上的计划作业始终以用于启动 SQL Server 代理的用户身份运行。设置对服务器系统具有适当权限的服务帐户，然后使用该服务帐户启动 SQL Server 代理服务。

# javascript - 哪里是最好的地方 所以，div 和对 fb js 的调用：Fb 说把它放在 (body) 标记之后。任何使用它的 wp 插件都会将其放在页脚中（wp_footer()，因为没有 wp_just_after_body()）。我曾经遇到过这样一种情况，我需要的 fb 功能只有在这些东西位于 body 标签之后时才能工作。我对 js 的了解还不够，无法知道有什么区别，以及 body 或 问问题 问问题 2012-07-10T16:22:44.167 11793 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 所以，div 和对 fb js 的调用：Fb 说把它放在 (body) 标记之后。任何使用它的 wp 插件都会将其放在页脚中（wp_footer()，因为没有 wp_just_after_body()）。我曾经遇到过这样一种情况，我需要的 fb 功能只有在这些东西位于 body 标签之后时才能工作。我对 js 的了解还不够，无法知道有什么区别，以及 body 或 footer 是否是最好的地方。 尝试 print_r(unserialize($_SESSION['__vm']['vmcart'])); javascriptfacebookasynchronousfacebook-javascript-sdk 4 2 回答 2 This answer is useful 3 就在您要加载的每个页面上的开始正文标记之后。 更多来自 facebook SDK 文档： 不得使用 display: none 或 visibility: hidden 隐藏 fb-root 元素，否则 SDK 的某些部分将无法在 Internet Explorer 中正常工作。 SDK 将元素插入到 fb-root 中，这些元素期望相对于 body 或相对于靠近页面顶部的元素定位。最好 fb-root 元素不在具有 position: absolute 或 position: relative 的元素内。如果您必须将 fb-root 元素放置在定位元素内，那么您还应该将其放置在靠近主体顶部的位置，否则 SDK 的某些部分可能无法正常工作。 于 2014-07-01T07:08:11.637 回答 This answer is useful 0 如果您需要在文档页脚附近使用 js sdk，最好使用 async 并且仅在 sdk 加载和初始化后才进行 api 调用。 我用。示例： 假设我已将所有 api 调用包装在函数中。 于 2012-07-10T16:45:14.677 回答 Related 3 c++ - 在 Qt Creator 中使用定位器查找成员变量 1 java - 变更传播规则和影响分析 3 sql-server - MSSQL nvarchar IF PROCEDURE exec with nvarchar input 1 android - 使用 google/glm/mmap 不稳定的 cellid 坐标 2 css - css sprite图像在ie9中不可点击 0 wso2 - 无法在 wso2 BPS 中传递数组值 2 php - 从数据库中选择超过 6 个月的项目？ 1 android - Android- 聊天应用程序 - 将编辑框表情转换为字符串；）格式以保存在数据库中 1 ios - AVExportSession 在后台继续 1 c# - 从 C++ 方法接收 char*，转换为托管字符串，然后释放内存 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11417664
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, facebook, asynchronous, facebook-javascript-sdk

所以，div 和对 fb js 的调用：Fb 说把它放在 (body) 标记之后。任何使用它的 wp 插件都会将其放在页脚中（wp_footer()，因为没有 wp_just_after_body()）。我曾经遇到过这样一种情况，我需要的 fb 功能只有在这些东西位于 body 标签之后时才能工作。我对 js 的了解还不够，无法知道有什么区别，以及 body 或 footer 是否是最好的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-01T07:08:11.637

就在您要加载的每个页面上的开始正文标记之后。

更多来自 facebook SDK 文档：

> 不得使用 display: none 或 visibility: hidden 隐藏 fb-root 元素，否则 SDK 的某些部分将无法在 Internet Explorer 中正常工作。
> 
> SDK 将元素插入到 fb-root 中，这些元素期望相对于 body 或相对于靠近页面顶部的元素定位。最好 fb-root 元素不在具有 position: absolute 或 position: relative 的元素内。如果您必须将 fb-root 元素放置在定位元素内，那么您还应该将其放置在靠近主体顶部的位置，否则 SDK 的某些部分可能无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:45:14.677

如果您需要在文档页脚附近使用 js sdk，最好使用 async 并且仅在 sdk 加载和初始化后才进行 api 调用。

我用。**示例：** *假设我已将所有 api 调用包装在函数中。*

```
 <div id="fb-root"></div>
<script>
      window.fbAsyncInit = function() {
        FB.init({
    appId  : '135669679827333',
    status : true, // check login status
    cookie : true, // enable cookies to allow the server to access the session
    xfbml  : true, // parse XFBML
    channelUrl : 'https://anotherfeed.com/emo/channel.html', // channel.html file
    oauth  : true // enable OAuth 2.0
        });

// facebook has been loaded and init, you can call your api functions from here.
if (window!=window.top) {
FB.Canvas.EarlyFlush.addResource("https://anotherfeed.com/");
setTimeout("FB.Canvas.setAutoGrow(250);", 2000);
toggle('connections');  // my api call
FB.XFBML.parse(loginb); // my api call
}else {
}
// !facebook load and init.
      };
  // Load the SDK Asynchronously
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

</script>
</body>
</html> 
```

# django - Django：values_list() 连接多个字段

> ID：11417673
> 
> 赞同：18
> 
> 时间：2012-07-10T16:23:28.883
> 
> 标签：django, concatenation

我有一个`Person`模型，我正在使用 django 表单来编辑另一个带有外键的对象`Person`。person 模型有`first_name`和`last_name`字段。我想运行一种方法来过滤外部参考下拉框的结果。

我正在尝试使用`values_list()`覆盖表单字段选项（选择属性），如下所示：

```
data.form.fields['person'].choices = GetPersons().values_list('id', 'first_name') 
```

`GetPersons()`只过滤 Person 类

```
return Person.objects.filter(id__gt=1000)` 
```

例如，所以我只让我想出现的人出现。我如何使用`values_list()`返回连接`first_name`和`last_name`而不必返回字典并手动拆分所有内容？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T16:34:04.243

我有两个建议给你：

*   第一个是将数据库中的字段与[extra](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)连接起来。对我来说是一个肮脏的解决方案，但可以运行。

样本：

```
persons =  GetPersons().extra(select={'full_name': "concatenate( first, last) "} )
choices = persons.values_list('id', 'full_name') 
```

和 ...

*   第二个使用列表理解：

样本：

```
choices = [ ( p.id, '{0} {1}'.format( p.first, p.last ),) for p in GetPersons() ] 
```

**2018 年编辑**

[Concat](https://docs.djangoproject.com/en/2.1/ref/models/database-functions/#concat)现在可用作数据库功能：

```
>>> from django.db.models import CharField, Value as V
>>> from django.db.models.functions import Concat
>>> persons = GetPersons().annotate(
...     full_name=Concat(
...         'last', V(', '), 'first', V('.'),
...         output_field=CharField()
...     )
... ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-04-15T17:23:58.433

听起来该[`annotate()`功能](https://docs.djangoproject.com/en/1.9/ref/models/querysets/#annotate)在 Django 1.8 中变得更加灵活。您可以将两个字段与一个[`Concat`表达式](https://docs.djangoproject.com/en/1.9/ref/models/database-functions/#concat)组合，然后用该表达式注释查询集。

```
# Tested with Django 1.9.2
import sys

import django
from django.apps import apps
from django.apps.config import AppConfig
from django.conf import settings
from django.db import connections, models, DEFAULT_DB_ALIAS
from django.db.models.base import ModelBase
from django.db.models.functions import Concat, Value

NAME = 'udjango'

def main():
    setup()

    class Person(models.Model):
        first_name = models.CharField(max_length=30)
        last_name = models.CharField(max_length=30)

    syncdb(Person)

    Person.objects.create(first_name='Jimmy', last_name='Jones')
    Person.objects.create(first_name='Bob', last_name='Brown')

    print(Person.objects.annotate(
        full_name=Concat('first_name',
                         Value(' '),
                         'last_name')).values_list('id', 'full_name'))
    # >>> [(1, u'Jimmy Jones'), (2, u'Bob Brown')]

def setup():
    DB_FILE = NAME + '.db'
    with open(DB_FILE, 'w'):
        pass  # wipe the database
    settings.configure(
        DEBUG=True,
        DATABASES={
            DEFAULT_DB_ALIAS: {
                'ENGINE': 'django.db.backends.sqlite3',
                'NAME': DB_FILE}},
        LOGGING={'version': 1,
                 'disable_existing_loggers': False,
                 'formatters': {
                    'debug': {
                        'format': '%(asctime)s[%(levelname)s]'
                                  '%(name)s.%(funcName)s(): %(message)s',
                        'datefmt': '%Y-%m-%d %H:%M:%S'}},
                 'handlers': {
                    'console': {
                        'level': 'DEBUG',
                        'class': 'logging.StreamHandler',
                        'formatter': 'debug'}},
                 'root': {
                    'handlers': ['console'],
                    'level': 'WARN'},
                 'loggers': {
                    "django.db": {"level": "WARN"}}})
    app_config = AppConfig(NAME, sys.modules['__main__'])
    apps.populate([app_config])
    django.setup()
    original_new_func = ModelBase.__new__

    @staticmethod
    def patched_new(cls, name, bases, attrs):
        if 'Meta' not in attrs:
            class Meta:
                app_label = NAME
            attrs['Meta'] = Meta
        return original_new_func(cls, name, bases, attrs)
    ModelBase.__new__ = patched_new

def syncdb(model):
    """ Standard syncdb expects models to be in reliable locations.

    Based on https://github.com/django/django/blob/1.9.3
    /django/core/management/commands/migrate.py#L285
    """
    connection = connections[DEFAULT_DB_ALIAS]
    with connection.schema_editor() as editor:
        editor.create_model(model)

main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:31:52.327

Per：[是否可以使用 Django 的 QuerySet.values_list 来引用属性？](https://stackoverflow.com/questions/2143438/is-it-possible-to-reference-a-property-using-djangos-queryset-values-list)，在不适用时避免使用 values_list，而是使用理解。

```
models.py:
class Person(models.Model):
    first_name = models.CharField(max_length=32)
    last_name = models.CharField(max_length=64)
    def getPrintName(self):
        return self.last_name + ", " + self.first_name

views.py:
data.form.fields['person'].choices = [(person.id, person.getPrintName()) for person in GetPersons()] 
```

# javascript - IE8第一次执行后不运行javascript

> ID：11417676
> 
> 赞同：1
> 
> 时间：2012-07-10T16:23:57.730
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-8

所以我有以下它在大多数浏览器中都可以正常工作，除了在 IE8 和更旧版本中它只会在您第一次访问页面或当您 ctrl + f5（清除缓存）并查看页面时运行。发生的事情是这个影响的项目在我的页面主布局/模板中，所以当我遍历网站时它不会加载。

例如，我在主页上，单击个人部分希望该项目加载到下一页，但它甚至没有出现。

```
$(document).ready(function () {

    if (window.document.domain == "developer10.machine") {

        var oScript = document.createElement('script');
        oScript.type = 'text/javascript';
        oScript.src = '/js/uk_converter.js';

        // most browsers
        oScript.onload = function () {
            renderCurrencyConverter('GBP', 'EUR', 1.00);
        }

        // IE
        oScript.onreadystatechange = function () {
            if (this.readyState == 'loaded' && ($.browser.msie && parseInt($.browser.version, 10)))
            {
                renderCurrencyConverter('GBP', 'EUR', 1.00);
            }
        }
        document.body.appendChild(oScript);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:40:32.603

一旦你设置了已经在缓存中的脚本的 src，它就会完成加载。由于您在设置 src 后添加了 onload 处理程序，因此永远不会调用 onload 处理程序。设置处理程序后尝试设置 src。

```
$(document).ready(function () {

    if (window.document.domain == "developer10.machine") {

        var oScript = document.createElement('script');
        oScript.type = 'text/javascript';

        // most browsers
        oScript.onload = function () {
            renderCurrencyConverter('GBP', 'EUR', 1.00);
        }

        // IE
        oScript.onreadystatechange = function () {
            if (this.readyState == 'loaded' && ($.browser.msie && parseInt($.browser.version, 10)))
            {
                renderCurrencyConverter('GBP', 'EUR', 1.00);
            }
        }

        oScript.src = '/js/uk_converter.js';
        document.body.appendChild(oScript);
    }
}); 
```

或尝试 jquery 脚本加载器：

```
$(document).ready(function () {
    $.getScript("/js/uk_converter.js", function () {
        renderCurrencyConverter('GBP', 'EUR', 1.00);

    });
}); 
```

# android - 允许用户仅访问我的内容提供程序中的某些表

> ID：11417680
> 
> 赞同：1
> 
> 时间：2012-07-10T16:24:15.343
> 
> 标签：android, android-contentprovider, android-sqlite

我正在为我的应用程序规划数据库。

我想允许其他人使用我的数据。但是，我只希望他们访问几个表。是否可以只允许其他应用访问某些表？

将我所有的数据库代码放在一个地方（内容提供者）似乎是个好主意，而不必将其拆分。

什么被认为是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:37:54.350

在你的 Android Manifest 文件中，你应该为你的内容提供者标签设置一个属性`grandUriPermissions`为`false`. 因此，您将保护您的内容提供商的所有数据不被访问。在那之后`<provider> </provider>`你应该添加标签`<grant-uri-permission>`。关于它的属性，你可以[在这里](http://developer.android.com/guide/topics/manifest/grant-uri-permission-element.html)阅读。（我猜你的情况是 pathPrefix 属性）

# php - 基类和继承的静态属性

> ID：11417681
> 
> 赞同：2
> 
> 时间：2012-07-10T16:24:19.513
> 
> 标签：php, oop, inheritance

我最近在处理继承时遇到了静态变量/方法的问题。代码如下所示：

```
<?php
Class TestBase
{
    public static $values;

    public static function addValue($value)
    {
        static::$values[] = $value;
    }
}

Class TestOne extends TestBase
{

}
Class TestTwo extends TestBase
{

}

TestOne::addvalue('one');
TestOne::addvalue('two');
TestOne::addvalue('three');
var_dump(TestOne::$values);
echo "<br /><br />";

TestTwo::addvalue('four');
TestTwo::addvalue('five');
TestTwo::addvalue('six');
var_dump(TestTwo::$values);
echo "<br /><br />";

var_dump(TestOne::$values);
?> 
```

这将产生输出：

> 数组（3）{[0]=>字符串（3）“一”[1]=>字符串（3）“二”[2]=>字符串（5）“三”}
> 
> 数组（6）{[0]=>字符串（3）“一”[1]=>字符串（3）“二”[2]=>字符串（5）“三”[3]=>字符串（4） "四" [4]=> 字符串(4) "五" [5]=> 字符串(3) "六" }
> 
> 数组（6）{[0]=>字符串（3）“一”[1]=>字符串（3）“二”[2]=>字符串（5）“三”[3]=>字符串（4） "四" [4]=> 字符串(4) "五" [5]=> 字符串(3) "六" }

如您所见，任何添加到其中的任何值都会添加到两者中。我的理解是方法中的 static:: 关键字绑定到继承的类，而不是父类，所以我认为这源于这样一个事实，即只有一个 static::$values 将被创建并且两者都假设我正在引用那个价值。这可以通过在从基础扩展的每个类上重新声明 public static $values 来解决，但是有没有更简单的方法来做到这一点，这样每个类都可以获得自己的静态副本？是否有任何关键字或技巧可以防止在每个继承的类上重新声明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:23:29.037

> 我认为这源于这样一个事实，即只有一个 static::$values 将被创建并且两者都假设我正在引用该值。

正确的。

> 这可以通过在从基础扩展的每个类上重新声明 public static $values 来解决，但是有没有更简单的方法来做到这一点，这样每个类都可以获得自己的静态副本？是否有任何关键字或技巧可以防止在每个继承的类上重新声明？

不，没有那样的东西。然而，诀窍是尽可能避免静态的东西。当您遇到这样的情况时，大多数情况下这是一个很好的指标，表明您的代码设计需要一些优化。

# c# - 与 XElement 的 ComboBox 双向绑定

> ID：11417684
> 
> 赞同：1
> 
> 时间：2012-07-10T16:24:26.800
> 
> 标签：c#, wpf, xml, binding, combobox

我想将 ComboBox 绑定到 XDocument 中的 XElement。双向绑定适用于文本框，但不适用于组合框：

xml:

```
<Window x:Class="ComboBoxBindingTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ComboBox Height="23" HorizontalAlignment="Left" Margin="31,38,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" SelectedValue="{Binding Path=Element[step].Element[schema].Value}" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="31,117,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=Element[step].Element[schema].Value}"/>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="31,214,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" />
    </Grid>
</Window> 
```

CS：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        comboBox1.Items.Add(new Tuple<string, string>("1", "Wert 1"));
        comboBox1.Items.Add(new Tuple<string, string>("2", "Wert 2"));
        comboBox1.Items.Add(new Tuple<string, string>("3", "Wert 3"));
        comboBox1.Items.Add(new Tuple<string, string>("4", "Wert 4"));
        comboBox1.Items.Add(new Tuple<string, string>("5", "Wert 5"));
        comboBox1.Items.Add(new Tuple<string, string>("6", "Wert 6"));
        comboBox1.Items.Add(new Tuple<string, string>("7", "Wert 7"));

        comboBox1.SelectedValuePath = "Item1";
        comboBox1.DisplayMemberPath = "Item2";

        XDocument doc = XDocument.Parse("<dir><step><schema>2</schema></step></dir>");
        DataContext = doc.Element("dir");
    }
} 
```

将文本框中的文本更改为从 1 到 7 的另一个数字会导致组合框更新，但反之则不然。更改组合框选择时，XML 中的值不会更改。

ComboBox 绑定有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:33:12.553

试试这个

```
<Window x:Class="ComboBoxBindingTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ComboBox Height="23" HorizontalAlignment="Left" Margin="31,38,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120"  />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="31,117,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding ElementName=textBox2, Path=Text}" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="31,214,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" Text="{Binding ElementName=textBox1, Path=Text}" />
    </Grid>
</Window>

public MainWindow()
{
    InitializeComponent();
    comboBox1.Items.Add(new Tuple<string, string>("1", "Wert 1"));
    comboBox1.Items.Add(new Tuple<string, string>("2", "Wert 2"));
    comboBox1.Items.Add(new Tuple<string, string>("3", "Wert 3"));
    comboBox1.Items.Add(new Tuple<string, string>("4", "Wert 4"));
    comboBox1.Items.Add(new Tuple<string, string>("5", "Wert 5"));
    comboBox1.Items.Add(new Tuple<string, string>("6", "Wert 6"));
    comboBox1.Items.Add(new Tuple<string, string>("7", "Wert 7"));

    comboBox1.SelectedValuePath = "Item1";
    comboBox1.DisplayMemberPath = "Item2";

    Binding binding = new Binding("Text");
    binding.Mode = BindingMode.TwoWay;
    binding.Source = textBox1;
   comboBox1.SetBinding(ComboBox.SelectedValueProperty, binding);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:25:15.920

这是 Microsoft 已知的 Bug，提供了 Hotfix：http: [//support.microsoft.com/kb/2328886](http://support.microsoft.com/kb/2328886)

此错误发生在 .NET 4.0 下将 Selector.SelectedValue（以及 SelectedItem 和 SelectedIndex；Selector 是 ComboBox 和 ListBox 的基类）与 XElement 或 XAttribute 结合使用时。

# java - .pde 文件作为 Eclipse 中的 Java 类文件？

> ID：11417685
> 
> 赞同：0
> 
> 时间：2012-07-10T16:24:27.593
> 
> 标签：java, eclipse, processing

我根据这篇文章将 Eclipse 设置为处理 IDE：http: [//processing.org/learning/eclipse/](http://processing.org/learning/eclipse/) 我还将 .pde 文件与 Java 编辑器相关联。但是，.pde 文件不会被视为类文件，即使它们位于 Java 构建路径中，并且格式为：

`class MyNewSketch extends SomeClass {
...
}`

如何让 Eclipse 的 Java IDE 将 .pde 文件视为 .java 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:15:04.783

请删除您创建的 PDE 文件的文件关联。而是在*General -> Content Types*首选项页面上展开*Text/Java Source File*节点。将您的内容类型添加到现有的内容类型中，它可以正常工作。*`*.pde``*.java (locked)`*

# java - out.println 说 out 无法解决

> ID：11417686
> 
> 赞同：2
> 
> 时间：2012-07-10T16:24:27.777
> 
> 标签：java, servlets

当我写的时候`out.println()`，eclipse 抱怨 out 无法解决。

我已经导入`java.io.*`和其他 servlet 包。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T16:28:35.190

只是在黑暗中拍摄，我认为这就是`out`您正在寻找的：

```
public class OutServlet extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        out.println("foo");
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-21T19:14:05.467

`System.out.println();`您应该在函数内部编写。

如果您直接将其写入类中，那么它可能会显示您现在遇到的错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T16:25:59.030

利用：

```
import static java.lang.System.out; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T16:25:24.270

使用导入导入它`static`：

```
 import static java.lang.System.out; 
```

但是，我建议您不要这样做。

*   使用全名可以使引用`System.out`脱颖而出，如果您需要核对跟踪打印，则可以更轻松地“grep”它们。

*   如果你需要向控制台写很多东西，你应该做`out`一个变量或一个方法参数。这将有助于使您的代码更具可重用性；例如，以便它可以写入 . 以外的其他地方`System.out`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-12T16:59:14.040

我有这个问题。我发现我没有主要方法（ public static void main(string[]args) 这就是它给我这个错误的原因。希望这会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-14T13:38:17.987

如果您希望放置一些调试输出，您可以这样做：

```
System.out.println("foo"); 
```

如果您正在寻找将输出添加到不在调试控制台上打印的 HTML，您可以执行以下操作：首先，您应该将“servlet-api.jar”添加到您的项目中。然后，如果您想将输出添加到 HTML，您可以使用它：

```
response.getWriter().println("foo"); 
```

我希望它有所帮助。

# php - 在 Codeigniter 中调用控制器需要什么？

> ID：11417699
> 
> 赞同：0
> 
> 时间：2012-07-10T16:25:05.957
> 
> 标签：php, codeigniter, http-status-code-404

我正在使用 Codeigniter 创建一个简单的博客。但是我在调​​用默认控制器之外的另一个控制器时遇到了麻烦。

以下 URL 将我带到我的 config/routes.php 中指定的默认控制器。

```
blog/index.php 
```

根据文档，只需附加保存在 controllers/ 中的另一个控制器的名称即可：

```
blog/index.php/blog_login 
```

这是我的控制器类，名为 blog_login.php：

```
class Blog_login extends CI_Controller {

    public function index()
    {
        echo 'It works!';
    }
} 
```

但是这样做会引发 404 错误，这让我觉得我错过了一些东西。在尝试访问不同的控制器之前，我还应该配置其他东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:57:31.117

当你打电话时：

```
blog/index.php/blog_login 
```

你真的在你的“博客​​”控制器中调用了一个名为“blog_login”的方法。如果要调用另一个控制器，它必须具有以下结构：

```
controller_name/controller_method 
```

所以，如果你想调用你的 blog_login 控制器，就这样调用它：

```
blog_login/ 
```

注意：有时需要将 base_url() 添加到您的 URL 以使 CI 正确理解 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:15:16.347

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)正确阅读此内容，再清楚不过了。

> 根据文档，只需附加保存在 controllers/ 中的另一个控制器的名称即可

这不是真的。如果你想调用另一个控制器'Blog_login'，你只需将控制器的名称作为 url 的第一段：

```
domain.com/index.php/blog_login 
```

这永远不会奏效：

```
blog/index.php/blog_login 
```

Index.php（除非您通过 .htaccess 将其删除）始终紧跟在您的 domain.com 之后

最后，您不需要指定路线，除非您正在做一些非标准的事情。所以

`domain.com/index.php/blog_login`- 在 Blog_login 控制器中 `domain.com/index.php/blog`调用 index() 函数 - 在博客控制器中调用 index() 函数`domain.com/index.php/blog/search`- 在博客控制器中调用 search() 函数。

以上示例都不需要在 routes.php 中添加条目

# soap - WSS4J 不解析 SOAP 消息

> ID：11417700
> 
> 赞同：2
> 
> 时间：2012-07-10T16:25:10.983
> 
> 标签：soap, ws-security, wss4j

我有这样的代码：

```
private WSSecurityEngine engine = new WSSecurityEngine();
private CallbackHandler callbackHandler = new UsernamePasswordCallbackHandler();

@Test
public void testWss4jEngine() {

    InputStream in = getClass().getClassLoader().getResourceAsStream("soap/soapWithUsernameTokenRequest.xml");

    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder;
    Document doc = null;
    try {
        docBuilder = builderFactory.newDocumentBuilder();

        doc = docBuilder.parse(in);

    } catch (Exception e) {
        LOG.error("Error parsing incoming request. Probably it is not a valid XML/SOAP message.", e);

        return;
    }

    List<WSSecurityEngineResult> results = null;

    try {
        results = engine.processSecurityHeader(doc, null, callbackHandler, null);
    } catch (WSSecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // the following line raises a NullPointerException
    WSSecurityEngineResult actionResult = WSSecurityUtil.fetchActionResult(results, WSConstants.UT);
    UsernameToken receivedToken = (UsernameToken) actionResult.get(WSSecurityEngineResult.TAG_USERNAME_TOKEN);
    Assert.assertTrue(receivedToken != null);
} 
```

传递给 WSS4j 引擎的文件中的 SOAP 消息是：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<SOAP-ENV:Header>
    <wsse:Security
        xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
        xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
        SOAP-ENV:mustUnderstand="1">
        <wsse:UsernameToken wsu:Id="UsernameToken-2">
            <wsse:Username>wernerd</wsse:Username>
            <wsse:Password
                Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">+dCtKLCG5+uDxNM8tLh8BSQSqgY=</wsse:Password>
            <wsse:Nonce
                EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">lZlpivFFQ3nhpp2Wf6pu+g==</wsse:Nonce>
            <wsu:Created>2012-07-10T15:25:46.627Z</wsu:Created>
        </wsse:UsernameToken>
    </wsse:Security>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
    <tem:Add xmlns:tem="http://tempuri.org/">
        <tem:a>1</tem:a>
        <tem:b>2</tem:b>
    </tem:Add>
</SOAP-ENV:Body> 
```

在我看来，这是一个完全符合 WS-Security UsernameToken 的消息！

但是，engine.processSecurityHeader() 不返回任何安全结果。结果变量保持为空，然后在下一行引发 NPE。这是堆栈跟踪：

```
java.lang.NullPointerException
at org.apache.ws.security.util.WSSecurityUtil.fetchActionResult(WSSecurityUtil.java:845)
at de.justworks.wssproxy.servlet.test.WssProxyServletTestIT.testWss4jEngine(WssProxyServletTestIT.java:121)
at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:76) 
```

任何人都知道我做错了什么？

谢谢弗兰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:44:11.270

万岁！

发现了问题。

这是设定

```
builderFactory.setNamespaceAware(true) 
```

您必须为文档生成器工厂设置！

干杯! 坦率

# c# - C# Task 没有性能提升？

> ID：11417702
> 
> 赞同：0
> 
> 时间：2012-07-10T16:25:13.897
> 
> 标签：c#, .net, c#-4.0

我使用了如下所示的任务，但没有性能提升。我检查了我的方法，该方法在 0-1 秒内执行，但使用 Task(30 个任务)，它需要 5-12 秒。如果我犯了任何错误，任何人都可以指导。我想并行运行 30 个并期望在最多 2 秒内完成 30 个。

这是我的代码：

```
Task[] tasks = new Task[30];
for (int p = 0; p <= dstable.Tables[0].Rows.Count - 1; p++)
{
    MethodParameters newParameter = new MethodParameters();
    newParameter.Name = dstable.Tables[0].Rows[p]["Name"].ToString();

    tasks[p] = Task.Factory.StartNew(() => ParseUri(newParameter));
    Application.DoEvents();
}
try
{
    Task.WaitAll(tasks);
    //Console.Write("task completed");
}
catch (AggregateException ae)
{
    throw ae.Flatten();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T16:35:49.183

您的思想存在一些重大问题。

1.  您的 PC 是否有 30 个核心，因此每个核心都可以执行一项任务？我不这么认为
2.  启动一个单独的线程也需要一些时间。
3.  每个并发线程都会产生更多开销。
4.  通过启动更多线程可以更快地解决您的问题吗？只有当所有线程都执行不同的任务时，例如从磁盘读取、查询数据库、计算某些东西等时，才会出现这种情况。在 CPU 上执行所有“高性能”任务的 10 个线程不会带来任何提升，恰恰相反，因为每个线程都需要清理他的烂摊子，然后他才能给下一个线程一些 cpu 时间，而那个线程也需要清理他的烂摊子。

检查此链接 [http://msdn.microsoft.com/en-us/library/ms810437.aspx](http://msdn.microsoft.com/en-us/library/ms810437.aspx)

您可以使用 TPL [http://msdn.microsoft.com/en-us/library/dd460717.aspx](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

他们试图保证并行线程的最大效果。我也推荐这本书 [http://www.amazon.com/The-Multiprocessor-Programming-Maurice-Herlihy/dp/0123705916](https://rads.stackoverflow.com/amzn/click/com/0123705916)

当您真的想在 2 秒内解决您的问题时，请购买更多 CPU 电源；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:01:45.707

我认为您可能错过了使用线程的要点。

*   通过增加操作系统开销，创建许多线程可能会导致更复杂的情况。（上下文切换）
*   此外，管理代码的执行会更加困难，如果有任何错误，也更难找到和修复错误。

线程的使用可能会给你带来优势

*   任务需要同时执行
*   构建响应式 UI

# opencv - 获取两个 3D 点的旋转和平移矩阵

> ID：11417703
> 
> 赞同：1
> 
> 时间：2012-07-10T16:25:14.050
> 
> 标签：opencv, 3d, rotation, translation, kinect

我正在使用两个 Microsoft Kinects RGB-D 相机，除了 x 和 y 坐标之外，它们还给出了深度（z 坐标）。

Left Kinect 在其坐标系的 P1 = (25, 43, 19) 处检测到书的角。

Right Kinect 在其坐标系中检测到 P2 = (63, 22, 10) 处的相同角点。

如何找到这两点之间的旋转和平移矩阵？我需要先将这些点转换为世界坐标吗？如果是这样，怎么做？

或者我可以只做一个刚体变换，其中 P2 = R*P1 + T 并求解 R 和 T（旋转和平移矩阵）？

非常感谢。

# ruby-on-rails - 在rails应用程序中全局分隔数字？

> ID：11417705
> 
> 赞同：1
> 
> 时间：2012-07-10T16:25:17.790
> 
> 标签：ruby-on-rails, internationalization

是否可以格式化rails应用程序中的所有数字以进行分隔？

我真的不认为这是一个 i18n 问题，因为我对默认的分隔符/分隔符很好。我只是想避免将 number_with_delimiter(value) 放在我的视图中。

我总是希望数字显示为分隔符。总是。

到目前为止，我已经尝试使用从 number_with_delimiter 方法中复制的代码来扩展 Fixnum 类：

```
class Fixnum

  def delimit(delimiter=",", separator=".")
    begin
      parts = self.to_s.split('.')
      parts[0].gsub!(/(\d)(?=(\d\d\d)+(?!\d))/, "\\1#{delimiter}")
      parts.join separator
    rescue
      self
    end
  end 
end 
```

`> 98734578.delimit => "98,734,578"`

`> 223.delimit => "223"`

所以这是朝着正确方向迈出的一步——我喜欢点符号以及略短的方法名称。但我想将此应用于视图内的所有 Fixnum 实例，而无需调用`.delimit`.

这是一个坏主意吗？我是否应该担心这会对视图上下文之外的数字产生影响？有没有更好的方法来实现这个目标？

# android - 适用于所有移动设备的最佳视频格式是什么

> ID：11417710
> 
> 赞同：0
> 
> 时间：2012-07-10T16:25:26.543
> 
> 标签：android, ios, video

我需要将视频转换为放在我的网站上，但我需要能够获得正确的格式，以便可以在所有移动设备上查看它们，我遇到的问题是我无法让它们在 android 上工作。android是否需要不同的编码器？有没有可以在手机上使用的格式

*   黑莓
*   安卓
*   iOS (iPhone/iPad)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:29:08.077

根据[Android Media Fortmats](http://developer.android.com/guide/appendix/media-formats.html#recommendations)文档，您需要 MPEG-4 容器和 H.264 Baseline Profile 编解码器，分辨率为 480 x 360 px，30 fps，视频比特率 500 Kbps，音频编解码器 AAC-LC，比特率 128 Kbps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T14:33:49.460

.m4v 列在 Squeeze 的 iphone 和 android 编码列表下，但它也适用于 desktop/chrome/safari/firefox。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:28:28.087

mp4 cointainer,15 fps, 640x480 分辨率相当通用 虽然帧率低，质量不是很好，但它可能会被大多数设备支持。

# list - Sharepoint 部署新列以列出

> ID：11417711
> 
> 赞同：0
> 
> 时间：2012-07-10T16:25:27.067
> 
> 标签：list, deployment, sharepoint-2010

我对 SharePoint 2010 还很陌生，我对 2007 有一些经验，但只是调试和修复了一些小错误。

假设我在 VS2010 中为 SP 2010 创建了一个新的解决方案，并且我添加了一个功能来创建一些列表定义以及这些列表定义模板的一些列表实例。这些都是通过 Schema.xml 声明的 =>

我成功部署并将一些项目添加到我的新列表中。

现在我想在我的列表中添加一些额外的列（字段），我将如何部署它们？

我不想在代码中创建它们，我希望有一个最新的解决方案，每个新开发人员都可以通过简单的部署创建一个正常运行的开发环境。

在这种情况下进行部署的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:27:24.293

如果您为列表定义了 schema.xml 文件，那么您确实希望使用列表定义中的集合来添加新列。您还希望确保您的列表由内容类型定义，允许重用。因此，在您的 schema.xml 文件中，它看起来像这样：

```
<List xmlns:ows="Microsoft SharePoint" Title="Test List" FolderCreation="FALSE" Direction="$Resources:Direction;" Url="Lists/Test-List" BaseType="0" xmlns="http://schemas.microsoft.com/sharepoint/">
  <MetaData>
    <ContentTypes>
      <ContentType ID="0x010068a2e063a1a74913a37ecdb61ab2c721" Name="Test" Group="Custom Content Types" Description="Test Description" Inherits="TRUE" Version="0">
        <FieldRefs>
          <FieldRef ID="{c2f80e7d-666e-4273-8b58-d5c8a13a9d6a}" Name="Col1" ShowInNewForm="TRUE" Required="TRUE" ShowInEditForm="TRUE"/>
          <FieldRef ID="{a84d620a-d42d-455c-8ef8-7e9f1d443250}" Name="Col2" Required="TRUE" ShowInNewForm="TRUE" ShowInEditForm="TRUE"/>
          <!-- Your new field refs here here -->
        </FieldRefs>
      </ContentType>
    </ContentTypes>
    <Fields>
      <Field ID="{c2f80e7d-666e-4273-8b58-d5c8a13a9d6a}" Type="Text" AllowDeletion="FALSE" Description="Key" AllowDuplicateValues="FALSE" EnforceUniqueValues="TRUE" Indexed="TRUE" Name="Col1" DisplayName="Col1" Group="Custom Columns" />
      <Field ID="{a84d620a-d42d-455c-8ef8-7e9f1d443250}" Type="Text" AllowDeletion="FALSE" Name="Col2" DisplayName="Col2" Group="Custom Columns" />
      <!-- Your new fields here -->
    </Fields>
    ...
  </MetaData>
</List> 
```

不要忘记更改您的视图！

# c# - Revit：在链接模型中设置类型参数

> ID：11417713
> 
> 赞同：1
> 
> 时间：2012-07-10T16:25:43.143
> 
> 标签：c#, .net, revit, revit-api

我们的 Revit 插件允许用户浏览和设置类型参数，包括链接模型中的参数。它在 Revit 2011 及更早版本中运行良好，但在 Revit 2012 和 2013 中，我们无法再设置这些。在链接文档上构建事务时，我得到：“Autodesk.Revit.Exceptions.ArguementException：文档是链接文件。事务只能在主要文档（项目或族）中使用。”

好的，所以我们不能在链接模型上使用事务。所以我尝试在没有事务的情况下设置参数，但后来我得到一个异常，说我们不能在事务之外修改模型。

无法在链接模型上创建事务，也无法在事务之外修改模型 - 那么如何在 Revit 2012/2013 中修改链接模型？它在 2011 年使用相同的代码运行良好。在网上进行了大量搜索，包括 The Building Coder 博客，但没有发现有关此重大更改或如何解决此问题的信息。任何人都可以伸出援助之手吗？

我们的代码很简单——我们在模型中获取一个参数，启动一个事务并尝试设置一个参数值。同样的代码在 Revit 2011 中也可以正常工作。

```
// elementType is an ElementType in document doc 
// for which we want to set a type parameter.
Parameter typeParameter = elementType.get_Parameter(pararmeterName);
Transaction transaction = new Transaction(doc, "Update Revit Type"); // Exception thrown here if doc is a linked model
transaction.Start();

typeParameter.Set("FooValue");

transaction.Commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T13:49:26.690

从 Revit 2014 开始，您可以卸载链接的文件。因此，只需在开始事务之前卸载您的文件，然后在事务结束后重新加载它们。

```
// Unload all links
var loadedExternalFilesRef = new List<RevitLinkType>();
var collector = new FilteredElementCollector(document);
foreach (Element element in collector.OfClass(typeof(RevitLinkType)))
{
    ExternalFileReference extFileRef = element.GetExternalFileReference();
    if (null == extFileRef || extFileRef.GetLinkedFileStatus() != LinkedFileStatus.Loaded) 
        continue;
    var revitLinkType = (RevitLinkType)element;
    loadedExternalFilesRef.Add(revitLinkType);
    revitLinkType.Unload(null);
}

// Do your stuff in a transaction

// Reload links
foreach (RevitLinkType revitLinkType in loadedExternalFilesRef)
    revitLinkType.Load(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T13:44:36.430

2 年后...我认为您必须打开有问题的文档，使其成为活动文档，然后尝试在其中应用您想要的代码。如果您需要代码示例，请告诉我，我会尝试做一些事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T02:49:24.133

我开始使用 Revit 2012，但不知道链接文件中事务的行为。但我还需要为链接文件设置参数，但没有找到正确执行此操作的方法。RevitAPI 帮助告诉*Transactions 只能在主要文档（项目或族）中使用。*

我可以猜测在 Revit 2011 的链接文件中设置参数是一个错误，而不是一个功能，因为它可能不安全。

# c# - 为默认格式提供程序添加自定义日期时间格式说明符

> ID：11417717
> 
> 赞同：1
> 
> 时间：2012-07-10T16:26:02.120
> 
> 标签：c#, datetime, format, datetime-format

我需要定义一个自定义格式说明符而不使用`IFormatProvider`.

```
var str = DateTime.Now.ToString("myCustomSpecifier"); 
```

为什么不使用格式提供程序？因为我在代码生成环境中工作并且`ToString`不可能指定第二个参数。

同时我们不想保留该方法`.ToString()`，因此使用扩展方法创建另一个方法是不可接受的。

我尝试搜索`Thread.CurrentThread.CurrentUICulture`成员以查看是否可以为此设置任何可配置的东西。或者，如果我可以设置默认格式提供程序。我什么也找不到。

有人认为可能吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-21T07:48:01.890

```
internal const string DATETIME_FORMAT = "dd MMM yyyy";

public void Method()
{
    var str = DateTime.Now.ToString(DATETIME_FORMAT);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T07:52:25.853

您可以直接在当前线程的文化上执行此操作

```
var cultureInfo = (CultureInfo)CultureInfo.GetCultureInfo("fr-FR").Clone();
cultureInfo.DateTimeFormat.ShortDatePattern = "dd.MM.yyyy";
Thread.CurrentThread.CurrentCulture = cultureInfo;
Thread.CurrentThread.CurrentUICulture = cultureInfo; 
```

将此代码放入 App.xaml.cs 的构造函数中。

该`ToString("d")`方法将显示您的自定义伙伴。

# python - 在 python 中使用 BeautifulSoup 时出错：ValueError：int() 的无效文字，基数为 10：'xBB'

> ID：11417718
> 
> 赞同：1
> 
> 时间：2012-07-10T16:26:12.600
> 
> 标签：python, beautifulsoup

以下代码在我的机器上运行良好，但它在该行抛出错误

```
soup = BeautifulSoup(html) 
```

当它在另一台机器上运行时。它从雅虎体育中解析出一份活跃的 NBA 球员名单，并将他们的姓名和位置存储到一个文本文件中。

```
from bs4 import BeautifulSoup
import urllib2

'''
scraping the labeled data from yahoo sports
'''
def scrape(filename):
    base_url = "http://sports.yahoo.com/nba/players?type=position&c=NBA&pos="
    positions = ['G', 'F', 'C']
    players = 0

    with open(filename, 'w') as names:
        for p in positions:
            html = urllib2.urlopen(base_url + p).read()
            soup = BeautifulSoup(html) #throws the error!
            table = soup.find_all('table')[9]
            cells = table.find_all('td')

            for i in xrange(4, len(cells) - 1, 3):
                names.write(cells[i].find('a').string + '\t' + p + '\n')
                players += 1

    print "...success! %r players downloaded." % players 
```

它抛出的错误是：

```
Traceback (most recent call last):
  File "run_me.py", line 9, in <module>
    scrapenames.scrape('namelist.txt')
  File "/Users/brapse/Downloads/bball/scrapenames.py", line 15, in scrape
    soup = BeautifulSoup(html)
  File "/usr/local/Cellar/python/2.6.5/lib/python2.6/site-packages/bs4/__init__.py", line 100, in __init__
    self._feed()
  File "/usr/local/Cellar/python/2.6.5/lib/python2.6/site-packages/bs4/__init__.py", line 113, in _feed
    self.builder.feed(self.markup)
  File "/usr/local/Cellar/python/2.6.5/lib/python2.6/site-packages/bs4/builder/_htmlparser.py", line 46, in feed
    super(HTMLParserTreeBuilder, self).feed(markup)
  File "/usr/local/Cellar/python/2.6.5/lib/python2.6/HTMLParser.py", line 108, in feed
    self.goahead(0)
  File "/usr/local/Cellar/python/2.6.5/lib/python2.6/HTMLParser.py", line 171, in goahead
    self.handle_charref(name)
  File "/usr/local/Cellar/python/2.6.5/lib/python2.6/site-packages/bs4/builder/_htmlparser.py", line 58, in handle_charref
    self.handle_data(unichr(int(name)))
ValueError: invalid literal for int() with base 10: 'xBB' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:46:49.190

我相信这是 BS4 htmlparser 代码中的一个错误，它会在`&#xBB;`实体上崩溃（代表`»`），认为它应该是十进制的。我建议你在那台机器上更新 BeautifulSoup。

# api - 检查用户上个月是否有 flattr 的最佳方法是什么？

> ID：11417720
> 
> 赞同：0
> 
> 时间：2012-07-10T16:26:14.253
> 
> 标签：api, flattr

我有一个小的数据库 fu*k-up，现在我必须检查用户是否在上个月奉承了某些东西，而不是把这些东西加倍。使用 API 的最佳方法是什么？有什么比简单地获取经过身份验证的用户 flattrs 的列表，然后检查给定的东西是否在该列表中更优雅的方法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:59:00.910

您需要检查用户 flattrs 以查找日期和事物的 ID，以了解用户上个月是否有事物。

如果您想知道用户在当前期间是否对某件事进行了讨价还价，则有一个名为`flattred`with 的参数是一个布尔值。

# java - 为什么这段代码会冻结我的电脑？

> ID：11417723
> 
> 赞同：1
> 
> 时间：2012-07-10T16:26:32.113
> 
> 标签：java, io, client-server, server-side

太糟糕了，我不得不硬重启（按住电源按钮），它甚至没有给我调试的时间，所以如果我在这里没有得到答案，我基本上就完蛋了。我知道它是服务器端的（当我不运行客户端时会发生这种情况，但如果我这样做也会发生）。

这是服务器代码：

```
package cypri.games.cybatarserver;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class CybatarServer extends JFrame implements Runnable{
    String verNum = "0.0.0";
    JScrollPane jsp;
    JTextArea mainText;
    boolean stopServer = false;
    boolean waitForPlayers = true;
    Vector<Player> playersConnected;
    byte playerID = -1;

    public CybatarServer(){
        playersConnected = new Vector<Player>();

        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setBounds(100, 100, 400, 100);

        this.setTitle("Cybatar Server " + verNum);

        mainText = new JTextArea(50, 10);
        mainText.setText("Welcome to CybatarServer "+ verNum + "!\n");
        mainText.setEditable(false);

        jsp = new JScrollPane(mainText);
        this.add(jsp);

        this.setVisible(true);
    }

    public static void main(String[] args){
        CybatarServer cyserv = new CybatarServer();
        cyserv.run();
    }

    @Override
    public void run() {

        try { 
            final ServerSocket serverSocket = new ServerSocket(44444);

            while(!stopServer){
                if(waitForPlayers){
                    new Thread(new Runnable() {
                        public void run() {

                            Socket clientSocket = null;
                                try {
                                    clientSocket = serverSocket.accept();
                                } catch (IOException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }
                                playerID++;
                                new PlayerThread(playerID, playersConnected, mainText, playerID, clientSocket).start();
                                mainText.append("Player " + playerID + " connected!");

                        }
                    }).start();
                }

                else{
                    for(int i = 0; i < playersConnected.size(); i++){
                        playersConnected.get(i).update();
                    }
                }

                Thread.yield();
            }
        } catch (Exception e) { e.printStackTrace(); }
    }
} 
```

这里有什么东西会导致我的电脑完全死机吗？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T16:29:00.787

我猜测

```
while(!stopServer){
   if(waitForPlayers){
       new Thread(new Runnable() {
         .... 
```

正在生成和调用大量线程。这将在 CPU（运行这些线程）和内存（每个线程分配自己的堆栈空间）方面严重影响您的机器。

我怀疑你想接受传入的连接，*然后才*分配/启动一个线程。请注意，这仍然会让您面临 DOS 攻击（想象一下，如果有无限数量的玩家加入），但这对您来说可能不是一个实际问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:30:22.867

旁注：[在 UI 线程中运行 UI 内容](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

这部分：

```
while(!stopServer){
    if(waitForPlayers){
         new Thread(...).start();
     }
} 
```

除非 stopServer 或 waitForPlayers 标志被快速更改，否则将创建大量线程。挂了也就不奇怪了...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:29:36.487

看来您永远不会设置`waitForPlayers`为`false`. 因此，每次`while(!stopServer)`循环时，都会产生一个新线程，从而冻结您的计算机。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:29:57.657

显然没有尝试过运行它，但是这个结构让我觉得是一个潜在的分叉炸弹：

```
 new Thread(new Runnable() {
                    public void run() {
                            ...
                            new PlayerThread(playerID, playersConnected, mainText, playerID, clientSocket).start();
                            ...
              } 
```

# javascript - javascript画布为空

> ID：11417724
> 
> 赞同：2
> 
> 时间：2012-07-10T16:26:54.443
> 
> 标签：javascript

刚从 JavaScript 开始，我收到错误“canvas is null”

```
function draw() {  

    var canvas = document.getElementById("canvas");  
    var ctx = canvas.getContext("2d"); 
    var width,height;

    width = canvas.width;
    height = canvas.height;

    ctx.fillStyle = "rgb(0,0,0)";  
    ctx.fillRect (10, 10, width, height); 
    ctx.fillStyle = "rgb(200,0,0)";  
    ctx.fillRect (posx, posy, 30, 30); 

}
var posx;
var posy;
function getMouse(e){
    posx=0;posy=0;
    var ev=(!e)?window.event:e;//Moz:IE
    if (ev.pageX){
        posx=ev.pageX;posy=ev.pageY//Mozilla or compatible
    }
    else if(ev.clientX){
        posx=ev.clientX;posy=ev.clientY//IE or compatible
    }
    else{
        return false//old browsers
    }
        document.getElementById('mydiv').firstChild.data='X='+posx+' Y='+posy;
}
setInterval(draw(),1000); 
```

该代码基本上在鼠标位置绘制了一个框（至少这是它应该做的......）

顺便说一句，“画布”是画布的 id。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:28:27.220

最后一行应该是：

```
setInterval(draw,1000); 
```

没有括号。否则，您正在调用该函数，而不是通过它。

# php - PHP - 变量定义错误

> ID：11417730
> 
> 赞同：0
> 
> 时间：2012-07-10T16:27:21.503
> 
> 标签：php, cakephp

我无法弄清楚以下代码有什么问题：

```
class ArticlesController extends AppController{
    var $name = 'Articles';
    // Variable $today is defined here so it can be used
    // in other functions in this same class 
    var $today = date('Y-m-d H:i:s',strtotime('now'));
    var $helpers = array('Video');

    function frontpageArticles(){
        $articles = $this->Article->find(
            'all',
            array(
                'conditions' => array(
                    'Article.published' => 1,
                    'Article.publish_date <=' => $today // USED HERE
                )
            )
       )
    );
    return $articles;
    }

    // ...
} 
```

我收到以下错误消息：

```
Parse error: syntax error, unexpected '(', expecting ',' or ';' in /home/XXXXXXXX/public_html/app/controllers/articles_controller.php on line 10 
```

这是在第 10 行`var $today = date('Y-m-d H:i:s',strtotime('now'));`

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:34:20.963

为了进一步详细说明 Julien 的回答，您不能在*类声明*的变量赋值中使用函数，当然可以在定义普通变量时使用。

解决此问题的一种方法是在构造函数中分配您的值，如下所示：

```
class ArticlesController extends AppController
{
    public $name = 'Articles';
    // Variable $today is defined here so it can be used
    // in other functions in this same class 
    public $today;
    public $helpers = array('Video');

    public function __construct()
    {
        parent::__construct();

        $this->today = date('Y-m-d H:i:s'); // You also don't need strtotime('now');
    }

    public function frontpageArticles()
    {
        $articles = $this->Article->find(
            'all',
            'conditions' => array(
                'Article.published' => 1,
                'Article.publish_date <=' => $this->today // USED HERE
            )
        );
        return $articles;
    }

    // ...
} 
```

附带说明一下，`var`是 PHP4 语法，所以如果您使用 PHP5，我强烈建议您使用访问修饰符，即。`public`//根据使用方式定义字段`private`和`protected`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:29:28.983

您不能使用功能，例如。date() 在类变量声明中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:06:01.110

为什么不使用 SQL？我使用 CakePHP 2，我就是这样做的，效果很好。另外我认为你缺少一个数组：

```
$this->Article->find('all', array(
     'conditions'=>array(
           'Article.published_date<=NOW()'
     )
)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:35:41.197

你不能在类属性定义中调用函数，定义你的 var 像：

```
var $today; 
```

然后在你的函数中设置它：

```
$today = date('Y-m-d H:i:s',strtotime('now')); 
```

如果您想设置一次 - 创建一个`__construct`函数

```
function __construct(){
    $today = date('Y-m-d H:i:s',strtotime('now'));
} 
```

# .net - 后台工作人员调用的 ComponentOne RibbonButton

> ID：11417731
> 
> 赞同：1
> 
> 时间：2012-07-10T16:27:33.993
> 
> 标签：.net, backgroundworker, componentone

当后台工作人员完成时，我正在尝试更改 C1 功能区按钮的 SmallImage 属性。

问题是我得到“跨线程操作无效：控制'MyControl'从创建它的线程以外的线程访问。”

我通过检查 Windows 控件上的 InvokeRequired 解决了其他跨线程问题，但是 ComponenetOne 控件没有 InvokeRequired 属性。

通过研究，我认为在 progresschanged 事件中访问 Controls 图像属性可以解决该问题。下面是相关代码。doWork 和 progresschanged 事件都在 Worker 线程上运行，但是我仍然遇到跨线程问题。谁能看到我可能做错了什么，或者有其他方法可以解决问题吗？

```
 private void InitializeBackgroundWorker1()
    {
        BackgroundWorker1 = new BackgroundWorker();
        BackgroundWorker1.DoWork +=
            new DoWorkEventHandler(BackgroundWorker1_DoWork);

        BackgroundWorker1.RunWorkerCompleted +=
            new RunWorkerCompletedEventHandler(BackgroundWorker1_RunWorkerCompleted);

        BackgroundWorker1.ProgressChanged +=
            new ProgressChangedEventHandler(BackgroundWorker1_ProgressChanged);

        BackgroundWorker1.WorkerReportsProgress = true;
    }

    private void BackgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        e.Result = sResult;
        (sender as BackgroundWorker).ReportProgress(25);
    }

    private void BackgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e) 
    {            
        MyControl1.ribbonButtonStatus.SmallImage = Properties.Resources.trafficlight_green;            
    }

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        MyControl1 = new TimeGridControl();
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T20:59:33.250

您没有从启动后台工作程序的位置发布代码，但是如果您的 progresschanged 事件正在编组到工作线程。这意味着您正在从另一个线程开始工作，然后是主线程。后台工作人员捕获`SynchronizationContext`它开始编组progresschanged 和runworkercompleted 事件中的调用的位置。

# django - Django - urls.py 中的一个目录

> ID：11417735
> 
> 赞同：-4
> 
> 时间：2012-07-10T16:27:56.330
> 
> 标签：django, django-models, django-admin

对不起这个愚蠢的问题，但我添加了`/home/alex/Desktop/project/media/proforma/`目录`urls.py`：

```
url(r'^/home/alex/Desktop/project/media/proforma/', "home.views.index") 
```

`/home/...` 是照片和 pdf 文件的目录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:18:22.157

我建议先阅读 Django 网站上的“[使用 Django 编写你的第一个应用程序](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)”教程，然后再尝试做其他事情。

具体来说，[本教程的第 3 部分介绍了 urls.py](https://docs.djangoproject.com/en/1.4/intro/tutorial03/#design-your-urls)，并解释了这是一种将应用程序 URL（如`http://localhost/foo/bar`）链接到视图函数的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:06:33.170

你可能看起来像这样[https://docs.djangoproject.com/en/dev/ref/settings/](https://docs.djangoproject.com/en/dev/ref/settings/)

见 MEDIA_ROOT 和 STATIC_ROOT

```
MEDIA_ROOT
Default: '' (Empty string) 
```

保存此安装的媒体的目录的绝对路径，用于管理存储的文件。

示例：“/var/www/example.com/media/”

另请参阅 MEDIA_URL。

```
MEDIA_URL
Default: '' (Empty string) 
```

处理从 MEDIA_ROOT 提供的媒体的 URL，用于管理存储的文件。

```
Example: "http://media.example.com/" 
```

# dll - 发布 DLL 天蓝色

> ID：11417736
> 
> 赞同：1
> 
> 时间：2012-07-10T16:27:56.657
> 
> 标签：dll, azure

我已将我的第一个 asp.net 项目发布到 azure can。该项目使用 MySql DLL。在本地，我添加了参考资料和现场工作。发布时，我得到一个异常，这意味着这些 DLL 没有与站点一起发布，因此丢失了。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:32:09.993

右键单击 DLL，转到属性，并确保“复制到输出目录”设置为“如果较新则复制/始终复制”。

还要确保 dll 编译为 64 位，否则会出现格式错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:51:16.043

如果您的应用在本地运行，但在部署到 Azure 后出现未找到程序集的异常，请确保您的 MySql DLL 存在于 Azure 项目生成的 .cspkg 文件中。[我以前的回答](https://stackoverflow.com/a/9571600/546483)解释了如何检查 .cspkg 文件的内容。

# django - 从 elasticsearch 返回的嵌套对象中检索特定字段

> ID：11417739
> 
> 赞同：2
> 
> 时间：2012-07-10T16:28:02.507
> 
> 标签：django, elasticsearch, pyes

我是弹性搜索的新手。我正在尝试从 elasticsearch 返回的嵌套对象中检索选定的字段。下面是存储在 elasticsearch 索引中的对象：

```
{
  "_index": "xxx",
  "_type": "user",
  "_id": "2",
  "_version": 1,
  "exists": true,
  "_source": {
    "user": {
      "user_auth": {
        "username": "nickcoolster@gmail.com",
        "first_name": "",
        "last_name": "",
        "is_active": false,
        "_state": {
          "adding": false,
          "db": "default"
        },
        "id": 2,
        "is_superuser": false,
        "is_staff": false,
        "last_login": "2012-07-10 21:11:53",
        "password": "sha1$a6caa$cba2f821678ccddc4d70c8bf0c8e0655ab5c279b",
        "email": "nickcoolster@gmail.com",
        "date_joined": "2012-07-10 21:11:53"
      },
      "user_account": {},
      "user_profile": {
        "username": null,
        "user_id": 2,
        "following_count": 0,
        "sqwag_count": 0,
        "pwd_reset_key": null,
        "_state": {
          "adding": false,
          "db": "default"
        },
        "personal_message": null,
        "followed_by_count": 0,
        "displayname": "nikhil11",
        "fullname": "nikhil11",
        "sqwag_image_url": null,
        "id": 27,
        "sqwag_cover_image_url": null
      }
    }
  }
} 
```

现在我只想从 user.user_auth 返回某些字段（不应该返回密码、超级用户等）。我正在使用 django PyES，下面是我尝试过的代码：

```
fields = ["user.user_auth.username","user.user_auth.first_name","user.user_auth.last_name","user.user_auth.email"]
result = con.search(query=q,indices="xxx",doc_types="user",fields=fields) 
```

但我得到的结果是只检索电子邮件（即只返回最后一个字段）：

```
{
  "user.user_auth.email": "nikhiltyagi.eng@gmail.com"
} 
```

我想要嵌套对象的这种抽象（即：user_auth，user_profile）

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:38:00.420

使用最新[的 django-haystack](http://django-haystack.readthedocs.org/en/latest/toc.html)怎么样？它还涵盖了作为后端的 ElasticSearch，因此您可以将 ElasticSearch FTS 很好地绑定到您的项目中。

# modal-dialog - Fancyapp 模态框关闭 iFrame

> ID：11417740
> 
> 赞同：0
> 
> 时间：2012-07-10T16:28:03.393
> 
> 标签：modal-dialog

我正在使用以下模态弹出脚本： http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

我有一个带有 IFrame 的模式弹出窗口。在 iFrame 中有一个注册表单。当用户注册时，他们将被重定向到仅限会员的页面。目前，它们在同一个模式窗口中被重定向。我希望它关闭模态窗口，并且他们单击模态窗口的页面重定向到仅成员链接。

这是javascript：

```
 $(document).ready(function() {
    $(".various").fancybox({
         'width' : '85%',
         'height' : '86%',
         'paddingTop' : '40',
         'autoScale' : false,
         'transitionIn' : 'none',
         'transitionOut' : 'none',
         'type' : 'iframe'
    });
}); 
```

这是调用模态框的 HTML：

```
<a class="various button" data-fancybox-type="iframe" href="/signup-test"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:31:52.547

由于您只想重定向已成功注册的成员，因此您需要插入代码以将用户重定向到您的注册和/或验证代码的成功功能。

如果没有您的其余代码，我无法解决您的具体示例，但有两种方法是：

**选项 1 - 创建一个 Javascript 函数**

您可以创建一个 Javascript 函数来关闭 iframe 并重定向用户。这样做的诀窍是将脚本放在父文档中，以便在 iframe 关闭后脚本继续执行。

此函数位于父文档中：

```
function closeiframe_redirect(url){
    $.fancybox.close();
    window.location = url;
} 
```

当您要调用该函数时插入此代码：

```
parent.closeiframe_redirect('members_page.html'); 
```

**选项 2 - 在 AJAX 成功函数中**

```
submitHandler: function (form){
    $.ajax({
    type: 'POST',
    url: 'registration-exec.php',
    data: $("#loginForm").serialize(),
    success: function(data) {   
        if(data == "true") {
            // This closes the Registration Form
            $("#registrationForm").fadeOut("fast");
            window.location = 'members_page.html'
        }
   });
} 
```

# java - Java 编译错误（Java 中的 Amazon Mechanical Turk 和 REST 示例）

> ID：11417743
> 
> 赞同：1
> 
> 时间：2012-07-10T16:28:21.010
> 
> 标签：java, mechanicalturk

我正在努力用 Java 启动 Amazon Mechanical Turk。

这是该项目的链接。（mturk-rest-java-1.0.zip可以在网站底部下载） [http://aws.amazon.com/code/Amazon-Mechanical-Turk/581](http://aws.amazon.com/code/Amazon-Mechanical-Turk/581)

当我解压缩并尝试使用以下步骤运行示例时：

1.  更新 MTGettingStarted.java 文件以包含您的访问标识符。

2.  通过输入以下命令编译示例：javac *.java

3.  通过输入以下命令运行示例：
    java MTGettingStarted

编译会报以下错误：

```
./src/com/amazon/mturk/requester/RESTResponse.java:23: package org.apache.xpath does not exist
import org.apache.xpath.*;
^
./src/com/amazon/mturk/requester/RESTResponse.java:108: cannot find symbol
symbol  : variable XPathAPI
location: class src.com.amazon.mturk.requester.RESTResponse
            str = XPathAPI.eval(doc, xpathString).toString();
                  ^
./src/com/amazon/mturk/requester/RESTResponse.java:125: cannot find symbol
symbol  : variable XPathAPI
location: class src.com.amazon.mturk.requester.RESTResponse
            NodeList nl = XPathAPI.selectNodeList(doc, xpathString);
                          ^
./src/com/amazon/mturk/requester/Utils.java:3: package org.apache.commons.codec.binary does not exist
import org.apache.commons.codec.binary.*;
^
./src/com/amazon/mturk/requester/Utils.java:58: cannot find symbol
symbol  : variable Base64
location: class src.com.amazon.mturk.requester.Utils
            signature = new String(Base64.encodeBase64(rawHmac));
                                   ^
Note: ./src/com/amazon/mturk/requester/RESTResponse.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
5 errors 
```

另外，我无法运行提供的 MTGettingStarted.java

```
Exception in thread "main" java.lang.NoClassDefFoundError: MTGettingStarted/java
Caused by: java.lang.ClassNotFoundException: MTGettingStarted.java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

我该如何解决这个问题？抱歉，我是 Java 的初学者。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:47:25.433

命令缺少类路径规范。尝试编译它：

```
javac -cp bin -d bin MTGettingStarted.java 
```

然后，运行：

```
java -cp bin:lib/commons-codec-1.3.jar:lib/serializer.jar:lib/xalan.jar:lib/xercesImpl.jar:lib/xml-apis.jar MTGettingStarted 
```

# php - Facebook 类似按钮回调不起作用

> ID：11417746
> 
> 赞同：0
> 
> 时间：2012-07-10T16:28:27.310
> 
> 标签：php, javascript, facebook

谁能告诉我为什么回调不适用于下面给出的类似按钮代码？据我所知，该代码是 JavaScript 中设置的标准。初始化第一个按钮，然后异步加载API，并提供回调函数。

```
<div id="fb-root"></div>
<script>

window.fbAsyncInit=function(){
    FB.init({
        appId:'',//App ID
        status:false,// check login status
        cookie:true,// enable cookies to allow the server to access the session
        xfbml:true// parse XFBML
    });
    // Additional initialization code here

    FB.Event.subscribe('edge.create', function(response) {
        //alert("user_id1:<?php echo $user_id1; ?>, user_id2:<?php echo $user_id2; ?>");
        /*var data={
            action:"ap_buttons_give_points",
            author_id:<?php echo $author_id; ?>,
            post_id:<?php echo $post_id; ?>,
            type:"like"
        }

        jQuery.post("<?php echo $ajax_url; ?>",data,function(resp){

        });*/
    alert('You just liked the page!');
});

    FB.Event.subscribe('edge.remove', function(response) {
        /*var data={
            action:"ap_buttons_take_points",
            author_id:<?php echo $author_id; ?>,
            post_id:<?php echo $post_id; ?>,
            type:"like"
        }

        jQuery.post("<?php echo $ajax_url; ?>",data,function(resp){
            //alert("fb remove:"+resp);
        });*/
    alert('You just unliked the page!');
});
};

// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:58:27.470

我唯一一次发生这种情况是在我使用 iframe 版本的 Like 按钮时。我发现回调根本不适用于该版本。如果是这种情况，您需要使用[此处](http://developers.facebook.com/docs/reference/plugins/like/)找到的 Javascript SDK 版本，使用 XFBML 或 HTML5：

```
<fb:like send="true" width="450" show_faces="true"></fb:like> 
```

或者

```
<div class="fb-like" data-send="true" data-width="450" data-show-faces="true"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:59:00.270

是的，代码看起来不错。我有点遇到同样的问题，但只有像 fb 这样的按钮，iframe 版本。我在您的示例中没有看到 fb 按钮，所以我不知道您使用的是哪一个...所以，根据我的经验，请使用标准的 fb 之类的。

# google-apps-script - getHistoricalStockInfo 只返回 stockInfo - 所有其他字段都是空白的？

> ID：11417751
> 
> 赞同：1
> 
> 时间：2012-07-10T16:28:39.027
> 
> 标签：google-apps-script, google-finance-api

我希望 FinanceApp.getHistoricalStockInfo 函数返回所有填充的字段，以及我请求的日期范围的历史数据。

但是在下面的示例中，我只填充了 stockInfo 数组，而其余所有字段都是空白的！？

```
function finTest() {
  var a = FinanceApp.getStockInfo("TSE:MKP");
  var b = FinanceApp.getHistoricalStockInfo("TSE:MKP", new Date(2012, 5, 29), new Date(2012, 5, 30), 1);
  Logger.log("name = " + a.name + " has_stock_data = " + a.has_stock_data);
  Logger.log("name = " + b.name + " has_stock_data = " + b.has_stock_data + " stockInfo = " + b.stockInfo.length);
  for (var i=0; i<b.stockInfo.length; i++)
    Logger.log("Time = " + b.stockInfo[i].time + " close = " + b.stockInfo[i].close);
} 
```

结果是：

> name = MCAN Mortgage Corporation has_stock_data = true name = has_stock_data = undefined stockInfo = 1 时间 = Fri Jun 29 2012 16:00:00 GMT-0400 (EDT) close = 14.1

这是正常的吗？这不是我所期望的。我尝试了各种符号（主要是加拿大的，但也有几个美国的），这总是我得到的。

仍然，不是我所期望的。那么，这正常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:48:15.670

使用时似乎只返回了一些通用字段`getHistoricalStockInfo()`。这应该有更好的文档记录，您可以在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上为此提交错误。

# c# - 如何在头上测试 WebSocket？

> ID：11417753
> 
> 赞同：1
> 
> 时间：2012-07-10T16:28:41.720
> 
> 标签：c#, testing, websocket, overhead, measure

我需要测试我的 WebSocket 应用程序的开销。如何测试它并查看结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:32:46.900

如果您使用[Fiddler](http://fiddler2.com/fiddler2/)，您可以使用 WebSockets 跟踪浏览器和服务器之间的所有通信。（查看日志部分）。

这应该可以让您准确了解通信的样子，包括您定义为“开销”的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T22:59:18.927

我发现[Google Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/network)中的 WebSocket 窗格非常适合测量和调试 WebSocket 流量。

# ios - IOS：在哪里下载uikit和基础框架

> ID：11417757
> 
> 赞同：1
> 
> 时间：2012-07-10T16:28:51.447
> 
> 标签：ios, xcode

我不小心删除了我的 uikit 和基础框架。它在 Xcode 中不存在。我知道我可以通过构建阶段添加它，但是我在哪里可以得到这些框架？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:18:59.460

我建议您使用App Store 上提供的新版[Xcode 4.3.x。](http://itunes.apple.com/ch/app/xcode/id497799835?l=en&mt=12)这将直接安装到您的`/Applications`文件夹中。所以重新安装比以前基于安装程序的版本要容易得多：

1.  删除`/Applications/Xcode.app`
2.  从 AppStore 再次[安装 Xcode 。](http://itunes.apple.com/ch/app/xcode/id497799835?l=en&mt=12)

这应该可以解决您的问题，因为上述框架驻留在此处（在 App 包内）：

```
 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:48:00.440

只需重新安装 Xcode。应该以正确的方式和正确的位置嵌入 uikit 和基础框架。

只是做了一些研究，如果你卸载/重新安装它会更好。谷歌上有多个版本的基础框架，你不想通过开发者工具添加它们

~/行尾

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-27T10:56:21.003

烦人的是，每次 Xcode 升级时，那些系统框架都会移动到一个新文件夹中。

实际上，我们可以在 lldb 中使用 image 命令来告诉你框架在哪里：

```
(lldb) image lookup -name "removeFromSuperview"
....
....
22 matches found in /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/iOS.simruntime/Contents/Resources/RuntimeRoot/System/Library/PrivateFrameworks/UIKitCore.framework/UIKitCore:
        Address: UIKitCore[0x00000000004a6b73] (UIKitCore.__TEXT.__text + 4866259)
        Summary: UIKitCore`-[UISegment removeFromSuperview]        Address: UIKitCore[0x00000000006267d9] (UIKitCore.__TEXT.__text + 6438201)
        Summary: UIKitCore`-[UICalloutBarButton removeFromSuperview]        Address: UIKitCore[0x000000000062924a] (UIKitCore.__TEXT.__text + 6449066)
..... 
```

现在我们可以看到，UIKit.framework 位于`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/iOS.simruntime/Contents/Resources/RuntimeRoot/System/Library/PrivateFrameworks/UIKitCore.framework/UIKitCore`

# c# - 重置密码恢复状态

> ID：11417759
> 
> 赞同：8
> 
> 时间：2012-07-10T16:28:54.723
> 
> 标签：c#, asp.net, asp.net-membership

情况如下：

我的登录页面上使用了 ASP.NET PasswordRecovery ( [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.passwordrecovery.aspx ) 控件。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.passwordrecovery.aspx)

当我点击“恢复链接”时，它询问我的用户名，我输入它，点击“发送我的密码”按钮，它通知我一封电子邮件已发送，然后我可以点击“返回”链接返回登录控件并继续。

我的问题是：如果我再次单击“恢复链接”，控件会卡在最后一个状态，即成功状态或失败状态。如果卡在成功状态，用户将无法输入任何用户名。只会显示最后一条成功的消息，不能像以前一样重复相同的过程。

我想将 PasswordRecovery 控件重置为其初始状态，这样用户就可以执行另一个密码恢复操作而无需刷新当前页面（按 F5）。

我玩了一下视图状态+销毁/重新创建控件，但没有任何成功。

以前有人遇到过这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T18:01:01.103

我确认没有干净的方法可以做到这一点（通过 ILSpy），请参阅下面的示例以了解稍微肮脏的方式。基本上我们使用反射来获取`CurrentView`属性，这是一个内部属性，然后我们将 PasswordReset 控件的当前视图设置为三种可能的状态之一：用户名 (0)、问题 (1) 或成功 (2)。

***设计师***

```
<form id="form1" runat="server">
<div>
    <asp:PasswordRecovery ID="pwr" runat="server"></asp:PasswordRecovery>
</div>
<span>Set Recover State: </span>
<asp:RadioButtonList ID="rblChangeState" runat="server" AutoPostBack="True" 
    onselectedindexchanged="rblChangeState_SelectedIndexChanged">
    <asp:ListItem Text="Username" Value="0" />
    <asp:ListItem Text="Question" Value="1" />
    <asp:ListItem Text="Success" Value="2" />
</asp:RadioButtonList>
</form> 
```

***代码背后***

```
protected void rblChangeState_SelectedIndexChanged(object sender, EventArgs e)
{
    Type t = pwr.GetType();
    PropertyInfo viewSetter = t.GetProperty("CurrentView", BindingFlags.Default | BindingFlags.NonPublic | BindingFlags.Instance);
    viewSetter.SetValue(pwr, Convert.ToInt32(rblChangeState.SelectedValue), null);
} 
```

# php - 处理 PHP SoapServer 标头时没有数据传入标头函数

> ID：11417761
> 
> 赞同：0
> 
> 时间：2012-07-10T16:29:04.083
> 
> 标签：php, soap

我的标头方法 (AuthHeader) 在服务器端被调用，但参数值是一个对象并打印为“1”。我期待下面的 wsdl 中定义的 'ticket' 字符串（如 $header->ticket 中的）。

```
public function AuthHeader($header)
{
    try {
        error_log(print_r($header));
        ... 
```

wsdl定义...

```
 <element name="AuthHeader">
            <complexType>
                <sequence>
                    <element name="ticket" type="xsd:string"/>
                </sequence>
            </complexType>
        </element> 
```

我认为我已经正确设置了所有内容，并且转储传入的请求表明标头是正确的。

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.example.com/SOAP/"><SOAP-ENV:Header><ns1:AuthHeader><ns1:ticket>myticketval</ns1:ticket></ns1:AuthHeader></SOAP-ENV:Header><SOAP-ENV:Body>... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:43:23.813

尝试将对象转换为字符串。过去我不得不使用 SimpleXML 对象来做这件事，在你的情况下可能是一样的。

```
print (string)$header; 
```

# php - 以这种方式指定访问修饰符有什么不同吗？

> ID：11417769
> 
> 赞同：0
> 
> 时间：2012-07-10T16:29:41.907
> 
> 标签：php, oop

我看到很多人这样指定它们。

```
protected $myVar;
protected $mySecondVar;
protected $myThirdVar; 
```

但最近我发现你可以像这样指定它们：

```
 protected $myVar, 
              $mySecondVar, 
              $myThirdVar; 
```

这样做有什么区别，还是只是个人喜好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:44:50.950

两种代码的功能完全相同，无论哪种方式，您都无法获得任何可衡量的性能改进。这是一个选择问题。

当您开始使用一些 API 文档工具（如 Apigen 或 Docblox）时，第一种方法允许您分别记录每个变量，第二种方法允许同时为所有三个添加一个注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:32:20.823

+1 到*@user1031794*，如果您使用修订控制系统并且有人更改了其中一个变量，通常更容易合并第一个版本。（例如，如果有人添加了一个新变量，`$myFourthVar`而另一个开发人员`$myFifthVar`同时添加了一个新变量。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:31:25.783

我相信个人喜好，但如果你选择第二种方式，你可以节省一些字节

# c++ - 用派生类填充基类类型的二维向量

> ID：11417772
> 
> 赞同：0
> 
> 时间：2012-07-10T16:29:54.963
> 
> 标签：c++, vector, derived-class

我有一个基类 Organism，它有 2 个派生类 Ant 和 Doodlebug。这是针对捕食者 - 猎物问题。我想要一个基类类型的二维向量，但能够分配派生类的元素。这个想法是这将在 20 X 20 字符映射中表示世界的状态，其中如果元素是基础，则 char 是 ' '，而如果元素是派生的，它将是不同的 char。

如果它是一维向量，我读到了如何做到这一点，但我找不到声明指向二维向量的指针的正确语法。这就是我所拥有的，如果我尝试输入会出错：

```
vector < vector<Organism*> > state(20, vector<Organism*>(20)); 
```

但这是编译但打印出数字字段而不是字符的内容：

```
vector < vector<Organism> > state(20, vector<Organism>(20));
string line;
int stateline = 0;

while(getline(ini_state_file, line))
{
    for(int i = 0; i < line.size(); i++)
    {
        if(line[i] == 'o')
            state[stateline][i] = Ant();
        else if(line[i] == 'X')
            state[stateline][i] = Doodlebug();
    }
    stateline++;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:32:39.533

```
// or some smart_ptr instead native pointer.
vector<vector<Organism*> > state(20, vector<Organism*>(20));
string line;
int stateline = 0;

while(getline(ini_state_file, line))
{
    for(int i = 0; i < line.size(); i++)
    {
        if(line[i] == 'o')
            state[stateline][i] = new Ant();
        else if(line[i] == 'X')
            state[stateline][i] = new Doodlebug();
    }
    stateline++;
} 
```

不要忘记释放内存。例如，当您使用此向量的工作结束时，您必须释放内存。

```
for (int i = 0; i < state.size(); ++i)
{
    for (int j = 0; j < state[i].size(); ++j)
    {
        delete state[i][j];
    }
} 
```

或者使用迭代器或算法作为 for_each 代替索引。
如果你想使用智能指针，你不应该释放内存。

# apache-flex - 如何计算 Flex 中的重叠周？

> ID：11417779
> 
> 赞同：0
> 
> 时间：2012-07-10T16:30:24.047
> 
> 标签：apache-flex, actionscript, flex4

通过使用日期对象，我们如何计算重叠周数？

例如：

7 月 31 日（星期二）是第 38 周的结束，但是第 38 周在星期日结束，即 8 月 4 日。

但是月份不同

对此有任何想法

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:43:52.867

在我们的日历组件中，我们使用此代码计算一周中的第一个日期；我敢打赌它可以被修改以找到一周的最后一个日期。IT 利用[DateUtils 库](http://flexdateutils.riaforge.org/)

```
 public static const DAY_OF_MONTH:String = "date";

    /**
     * This method gets the first date of the week which the given date is in.
     * 
     * @param date  This is the date for which we want to process.
     * @param firstDayOfWeek    The first day of the week, 0 (Sunday) - 6 (Saturday); 0 is the default.  It will probably be used primarily for localization purposes.
     * 
     * @return      This returns a date representing the first day of the week.
     */
    public static function firstDateOfWeek( date:Date, firstDayOfWeek : int = 0 ):Date {
        var dayIncrement : int = dayOfWeekLocalized(date, firstDayOfWeek);

        var returnDate : Date = DateUtils.dateAdd(DateUtils.DAY_OF_MONTH,-dayIncrement,date);
        return returnDate; 

    }

    /**
     * This method returns the position of the day in a week, with respect to the firstDayOfWeek localization variable. 
     * 
     * If firstDayOfWeek is 0; then the week is display 0 (Sunday), 1 (Monday), 2 (Tuesday), 3 (Wednesday), 4 (Thursday), 5 (Friday), 6 (Saturday).  
     * So, a Sunday would return 0, a Saturday would return 6, and so on.  
     * 
     * If firstDayOfWeek is 1; then the week is displayed as 0 (Monday), 1 (Tuesday), 2 (Wednesday), 3 (Thursday), 4 (Friday), 5 (Saturday), 6 (Sunday). 
     * However, this situation will not change the date.day value.  For display purposes we need a Sunday to return 6, a Saturday to return 5, and so on.
     * 
     * This will presumably be used for display purposes.
     * 
     * @param date  This is the date to process.
     * @param firstDayOfWeek    The first day of the week, 0 (Sunday) - 6 (Saturday); 0 is the default.  It will probably be used primarily for localization purposes.
     * 
     * @return      This returns a date representing the day’s location on the localized week display.
     */
    public static function dayOfWeekLocalized( date:Date, firstDayOfWeek : int = 0 ):int {
        var result : int = date.day - firstDayOfWeek;
        if(result < 0){
            result += 7;
        }

        return result;

    } 
```

要查找一周的最后一天，我怀疑您可以调用 firstDateOfWeek 并添加 6 天：

```
 public static function lastDateOfWeek( date:Date, firstDayOfWeek : int = 0 ):Date {
        var firstDateOfWeek : Date = firstDateOfWeek(date, firstDayOfWeek);

        var returnDate : Date = DateUtils.dateAdd(DateUtils.DAY_OF_MONTH,6,firstDateOfWeek );
        return returnDate; 
    } 
```

注意：第二批代码是在浏览器中编写的，完全未经测试。

* * *

更新：给定特定日期，您可以使用[DateUtils 库](http://flexdateutils.riaforge.org/)中的 weekOfYear 方法找出 weekOfYear 数字。使用上述方法查找相关一周的第一个和最后一个日期

概念上是这样的：

```
var weekOfYear : Number = DateUtils.weekOfYear(myDate);
var firstDayOfWeek : Date = firstDateOfWeek(myDate);
var lastDayOfWeek : Date = lastDateOfWeek(myDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:06:36.523

[我在这篇博文](http://flexdiary.blogspot.com/2008/05/working-with-dates-in-as3.html)中处理了这个问题。这很简单，真的。任何给定月份的最后一天比下个月的第一天少一天。如果最后一天不是星期六，则存在重叠。

# mongodb - 带有 mgo 的 Go (golang) 中的 MongoDB：如何更新记录、确定更新是否成功并在单个原子操作中获取数据？

> ID：11417784
> 
> 赞同：10
> 
> 时间：2012-07-10T16:30:43.040
> 
> 标签：mongodb, go, mgo

我在 Go 下为 MongoDB 使用 mgo 驱动程序。

我的应用程序请求一个任务（仅在 Mongo 中从名为“jobs”的集合中选择一个记录），然后将自己注册为受让人以完成该任务（对同一“工作”记录的更新，将自己设置为受让人）。

该程序将在多台机器上运行，都与同一个 Mongo 通信。当我的程序列出可用任务然后选择一个时，其他实例可能已经获得了该分配，并且当前分配将失败。

如何确定我读取然后更新的记录在更新时是否具有特定值（在本例中为受让人）？

我正在尝试获得一项任务，无论是哪一项，所以我认为我应该首先选择一个待处理的任务并尝试分配它，以防万一更新成功。

所以，我的查询应该是这样的：

“从集合 'jobs' 的所有记录中，**仅更新一个**assignee=null 的记录，将我的 ID 设置为受让人。 **然后，给我该记录**，以便我可以运行该作业。”

我怎么能用 Go 的 mgo 驱动程序来表达呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-08-20T23:24:55.860

这是一个老问题，但万一有人还在家里看，[Query.Apply](http://godoc.org/labix.org/v2/mgo#Query.Apply)方法很好地支持了这一点。它确实运行了`findAndModify`另一个答案中指示的命令，但它方便地隐藏在 Go goodness 后面。

文档中的示例与此处的问题几乎完全匹配：

```
change := mgo.Change{
        Update: bson.M{"$inc": bson.M{"n": 1}},
        ReturnNew: true,
}
info, err = col.Find(M{"_id": id}).Apply(change, &doc)
fmt.Println(doc.N) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:41:47.350

MongoDB 的家伙在官方文档中描述了类似的场景：[http ://www.mongodb.org/display/DOCS/Atomic+Operations](http://www.mongodb.org/display/DOCS/Atomic+Operations)

基本上，您所要做的就是使用`assignee=null`. 假设你得到了`_id=42`背部的工作。然后，您可以继续在本地修改文档，方法是使用选择器和更新的文档设置`assignee="worker1.example.com"`和调用[Collection.Update() 。](http://go.pkgdoc.org/labix.org/v2/mgo#Collection.Update)`{_id=42, assignee=null}`如果数据库仍然能够找到与此选择器匹配的文档，它将自动替换该文档。否则你会得到一个 ErrNotFound，表明另一个线程已经认领了这个任务。如果是这种情况，请再试一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T15:35:27.833

我希望您看到对您选择的答案的评论，但这种方法是不正确的。进行选择然后更新将导致往返和两台机器，并且在其中一台可以更新`assignee`. 您需要改用该`findAndModify`方法：[http ://www.mongodb.org/display/DOCS/findAndModify+Command](http://www.mongodb.org/display/DOCS/findAndModify+Command)

# java - 如何在java中将孟加拉语文本转换为语音？

> ID：11417786
> 
> 赞同：3
> 
> 时间：2012-07-10T16:30:56.907
> 
> 标签：java, javax.speech

我可以在java中将英文文本转换为语音。源代码：

```
 import java.beans.PropertyVetoException;
 import java.util.Locale;
 import javax.speech.AudioException;
 import javax.speech.Central;
 import javax.speech.EngineException;
 import javax.speech.EngineStateError;
 import javax.speech.synthesis.Synthesizer;
 import javax.speech.synthesis.SynthesizerModeDesc;
 import javax.speech.synthesis.Voice;

 public class Speech {

   SynthesizerModeDesc desc;
   Synthesizer synthesizer;
   Voice voice;

  public void test(String voiceName)
    throws EngineException, AudioException, EngineStateError,
          PropertyVetoException
  {
    if (desc == null) {

     System.setProperty("freetts.voices",
       "com.sun.speech.freetts.en.us.cmu_us_kal.KevinVoiceDirectory");

     desc = new SynthesizerModeDesc(Locale.ENGLISH);
    Central.registerEngineCentral
    ("com.sun.speech.freetts.jsapi.FreeTTSEngineCentral");
  synthesizer = Central.createSynthesizer(desc);
  synthesizer.allocate();
  //synthesizer.resume();
 // SynthesizerModeDesc smd =
   desc = (SynthesizerModeDesc)synthesizer.getEngineModeDesc();
  Voice[] voices = desc.getVoices();
  Voice voice = null;
  for(int i = 0; i < voices.length; i++) {
    if(voices[i].getName().equals(voiceName)) {
      voice = voices[i];
      break;
    }
  }
  synthesizer.getSynthesizerProperties().setVoice(voice);
   }

  }

 public void doSpeak(String speakText)
throws EngineException, AudioException, IllegalArgumentException,
        InterruptedException
{
    synthesizer.speakPlainText(speakText,null);
   synthesizer.waitEngineState(Synthesizer.QUEUE_NOT_EMPTY);
} 
```

但我不明白如何`Bangla`在java中将文本转换为语音。前任：
`TEXT: "আমি একজন ছাএ ।"`

谁能告诉我如何在 java 中做到这一点？

# r - 数据框中列之间的计算：每周“趋势”销售检测

> ID：11417788
> 
> 赞同：0
> 
> 时间：2012-07-10T16:31:05.580
> 
> 标签：r, calculated-columns, trending

我有一个 data.frame 代表一组作者超过 25 周的频率书销售：

```
author       week_1 week_2 week_3 week_4 ...
author1      7      4      5          2
author2      3      6      18         5
author3      1      0      2          4
author4      0      1      1          2
author5      0      1      0          0 
```

首先，我想用这些数据构建一个新的数据框，它显示了 [currentWeek / previousWeek] 的分数。可能是这样的：

```
author       week_1 week_2  week_3 week_4 ...
author1      NA      0.57   1.25   0.2
author2      NA      2      3      0.28
author3      NA      0      2      2
author4      NA      1      1      2   
author5      NA      1      0      0 
```

（我想用 1 代替零以避免除以零。）

其次，我想对所有行进行快速迭代，检查相邻周的任何三元组，其中该作者的销售额在连续两个周对中两次增加了 100%，并在某种输出表中报告这一点。或许是这样的：

```
author  startTrendWeek endTrendWeek
author2 1              3
author3 2              4 
```

关于如何在 R 中解决这些问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:56:16.280

重新创建您的数据：

```
x <- read.table(text=
"author       week_1 week_2 week_3 week_4 
author1      7      4      5          2
author2      3      6      18         5
author3      1      0      2          4
author4      0      1      1          2
author5      0      1      0          0
                ", header=TRUE) 
```

一行代码：

```
cbind(x[1], t(apply(x[, -1], 1, function(xx)xx[-1]/xx[-length(xx)])))

   author    week_2 week_3    week_4
1 author1 0.5714286   1.25 0.4000000
2 author2 2.0000000   3.00 0.2777778
3 author3 0.0000000    Inf 2.0000000
4 author4       Inf   1.00 2.0000000
5 author5       Inf   0.00       NaN 
```

# html - 在 HTML 页面中捕获 POST 响应

> ID：11417790
> 
> 赞同：0
> 
> 时间：2012-07-10T16:31:22.750
> 
> 标签：html, forms, jsp, post

我正在向第三方发送表单帖子，如果操作完成，它将返回一个成功的页面。获得成功页面后，我需要将用户重定向到感谢页面。有人能告诉我如何查看成功页面是否返回并重定向到另一个页面吗？

```
<form name="abc"  method="POST" action="third party url" >
    <input />
    <input />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:58:08.477

...如何提交表单并在 iframe 中接收响应？如果您可以使用 iframe，那么您将能够检测到更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T06:05:53.500

您将无法使用纯 javascript 轻松做到这一点。当您发布表单时，表单输入被发送到服务器并刷新您的页面 - 数据在服务器端处理。也就是说，submit() 函数实际上并没有返回任何内容，它只是将表单数据发送到服务器。

如果您真的想在 Javascript 中获得响应（不刷新页面），那么您需要使用 AJAX，当您开始谈论使用 AJAX 时，您需要使用库。jQuery 是迄今为止最受欢迎的，也是我个人的最爱。有一个很棒的 jQuery 插件，叫做 Form，它会完全按照你想要的那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:50:25.060

代码是这样的：

```
<form name="abc"  method="POST" action="third party url" >
<input/>
<input/>
</form> 
```

但我不确定如何捕获响应

# html - 使用任何浏览器（Firefox、Chrome 和 IE）在 Windows 下 Html 表未对齐，但在 Linux 下工作正常

> ID：11417793
> 
> 赞同：-1
> 
> 时间：2012-07-10T16:31:41.923
> 
> 标签：html, css

一张图片值 1024 个字，对吧？所以我尝试发布一些图片但我没有足够的声誉，所以用文字来描述会有点困难，但我希望有人能帮助我。

问题是我有一个表格，它只在 Windows 下显示未对齐，无论是使用 IE8、Firefox 还是 Chrome。在 Linux 下，该表在 Firefox 和 Chrome 中显示良好。所以，我使用了 IE8 的开发工具，发现边距设置为 0，如果我禁用边距，表格显示几乎很好（上边距得到一些值）但右边距现在显示对齐。然后，如果我再次应用边距，则上边距设置为 0 并且右边距保持正常，并且表格按预期显示。

最奇怪的部分是它在 Windows 和 Linux 下对于应用程序的其他客户端运行良好，但对于一个特定的客户端它就不行了。代码不依赖于客户端。

编辑：

代码不是我在写的东西，它已经写好了，就像很久以前一样，我必须修复一些部分。这是一个非常庞大且复杂的应用程序，具有合理的数据，所以我不得不隐藏一些代码和图像，对此感到抱歉，但现在我已经隔离了这个问题。

您可以下载代码并在本地进行测试。您会发现该表格仅在 Windows 下的任何浏览器中显示错位。

为了让您了解究竟是什么问题，我发布了 2 个链接。其中一个是显示良好的代码，另一个有问题。它们都应该可以正常工作，因为它是同一个应用程序。我希望这更清楚。查看未对齐的表格，转到 IE 中的开发工具并观察边距值，然后观察当边距被禁用和再次启用时会发生什么。

[https://docs.google.com/file/d/0Bxz1pQbINNQKbDRHYXFxUFk1aFU/edit](https://docs.google.com/file/d/0Bxz1pQbINNQKbDRHYXFxUFk1aFU/edit)

[https://docs.google.com/open?id=0Bxz1pQbINNQKYi1icEM4dFlGeW8](https://docs.google.com/open?id=0Bxz1pQbINNQKYi1icEM4dFlGeW8)

我不得不删除之前的图片链接，因为由于我的权限，我只能上传 2 个链接，但现在你有了代码，所以无论如何它不会那么有用。也许你可能想看照片：

![http://imgur.com/a/uvzkR#3](../Images/75812c7c7d03785338b371b66f8c4736.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:40:08.777

嗯...问题只是一些ip号码中的点！

很难发现，因为并非所有数据都有 IP 号码。

解决方案可能是将 xxx.xxx.xxx.xxx 更改为 xxx-xxx-xxx-xxx 或类似的东西。

我希望它对其他人有用。

# android - 设备在android中没有响应

> ID：11417797
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:00.213
> 
> 标签：android

我的应用程序在模拟器中正确运行但是当我尝试在设备中运行时。我不会给我错误

请尝试解决这个问题

```
07-10 02:56:34.022: D/AndroidRuntime(28052): Shutting down VM
07-10 02:56:34.022: W/dalvikvm(28052): threadid=1: thread exiting with uncaught exception (group=0x40a551f8)
07-10 02:56:34.022: E/AndroidRuntime(28052): FATAL EXCEPTION: main
07-10 02:56:34.022: E/AndroidRuntime(28052): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.mobileTimerClock/com.android.mobileTimerClock.TimeClockDashBoard}: java.lang.NullPointerException: println needs a message
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.os.Looper.loop(Looper.java:137)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at java.lang.reflect.Method.invokeNative(Native Method)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at java.lang.reflect.Method.invoke(Method.java:511)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at dalvik.system.NativeStart.main(Native Method)
07-10 02:56:34.022: E/AndroidRuntime(28052): Caused by: java.lang.NullPointerException: println needs a message
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.util.Log.println_native(Native Method)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.util.Log.i(Log.java:159)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at com.android.mobileTimerClock.TimeClockDashBoard.onCreate(TimeClockDashBoard.java:394)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.Activity.performCreate(Activity.java:4465)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-10 02:56:34.022: E/AndroidRuntime(28052):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-10 02:56:34.022: E/AndroidRuntime(28052):    ... 11 more
07-10 02:56:34.022: W/ActivityManager(177):   Force finishing activity com.android.mobileTimerClock/.TimeClockDashBoard
07-10 02:56:34.030: W/ActivityManager(177):   Force finishing activity com.android.mobileTimerClock/.DashBoard
07-10 02:56:34.530: W/ActivityManager(177): Activity pause timeout for ActivityRecord{41d0a690 com.android.mobileTimerClock/.TimeClockDashBoard} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:34:08.863

我的猜测是您将 null 作为第二个参数传递给`Log.i(String, String)`调用（或类似`Log.*()`方法）：

```
java.lang.NullPointerException: println needs a message 
```

# asp.net - 自定义验证 javascript 函数始终将下拉列表的选定值返回为 0

> ID：11417798
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:03.630
> 
> 标签：asp.net

在我的页面上，我有一个使用自定义验证器的文本框：

```
<asp:CustomValidator ID="cv_Question" ControlToValidate="tb_Question" runat="server" ErrorMessage="*" OnServerValidate="ValidateQuestion" ClientValidationFunction="CheckQuestion" ForeColor="#FF0000" ValidationGroup="CreateUser"></asp:CustomValidator> 
```

我想使用的客户端验证脚本始终为下拉列表 SelectedValue 返回 0，即使下拉列表索引已更改也是如此。

我使用 !Page.IsPostBack 将下拉列表默认索引设置为 0

这是下拉列表：

```
<asp:DropDownList ID="ddl_Question" runat="server" EnableViewState="true" AutoPostBack="true" onselectedindexchanged="ddl_Question_SelectedIndexChanged">
        <asp:ListItem Selected="False" Text="Select a question" Value="0"></asp:ListItem>
        <asp:ListItem Selected="False" Text="What was the first movie I ever saw?" Value="1"></asp:ListItem>        
        <asp:ListItem Selected="False" Text="What is the middle name of my oldest child?" Value="2"></asp:ListItem>
        <asp:ListItem Selected="False" Text="In what city was my father born?" Value="3"></asp:ListItem>
        <asp:ListItem Selected="False" Text="Who was my favourite cartoon character as a child?" Value="4"></asp:ListItem>
        <asp:ListItem Selected="False" Text="What is my mother's middle name?" Value="5"></asp:ListItem>
        <asp:ListItem Selected="False" Text="In what year did I meet my significant other?" Value="6"></asp:ListItem>
        <asp:ListItem Selected="False" Text="What was my first pet's name?" Value="7"></asp:ListItem>
        <asp:ListItem Selected="False" Text="First name of the maid of honour at my wedding?" Value="8"></asp:ListItem>
        <asp:ListItem Selected="False" Text="First name of my best friend in elementary school?" Value="9"></asp:ListItem>
        <asp:ListItem Selected="False" Text="Name of my all-time favourite movie character?" Value="10"></asp:ListItem>
        <asp:ListItem Selected="False" Text="Create a question" Value="11"></asp:ListItem>
    </asp:DropDownList> 
```

这是客户端验证：

```
 <script type="text/javascript" language="javascript">
        function CheckQuestion(sender, args) 
        {        
            var Question =  args.Value.toString();

            <% if(Convert.ToInt32(ddl_Question.SelectedValue) == 11) 
            { %>
                if (Question != "" && Question != null) 
                {
                    args.IsValid = true;
                    return;
                }
                else
                {
                    args.IsValid = false;
                    return;
                }
            <% } 
            else
            { %>
                alert(<%= Convert.ToInt32(ddl_Question.SelectedValue)%>);
                args.IsValid = true;
                return;
            <% } %>
        }
    </script> 
```

如果用户从 ddl_Question 中选择了“创建问题”，我只想验证 tb_Question。

编辑：

这是我的 SelectedIndexChanged 方法。当用户选择“创建问题”时，tb_Question 可见。这发生在任何验证发生之前。

```
protected void ddl_Question_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (Convert.ToInt32(ddl_Question.SelectedValue) == 11)
        {
            Question.Visible = true;
        }
        else
        {
            Question.Visible = false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:50:10.323

好吧，我的建议是使用简单的 JavaScript

因此，不要这样做，而是使用 JavaScript 或者像这样的 jQuery

jQuery Nuget：[https ://nuget.org/packages/jQuery](https://nuget.org/packages/jQuery)

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript" language="javascript">
    function CheckQuestion(sender, args) 
    {        
        var Question =  args.Value.toString();
        var questionID = '<%= this.ddl_Question.ClientID %>';
        var currentQuestion = $("#" + questionID).val();

        if (currentQuestion == '11')
        { 
            if (Question != "" && Question != null) 
            {
                args.IsValid = true;
                return;
            }
            else
            {
                args.IsValid = false;
                return;
            }
        } 
        else
        {
            alert(currentQuestion);
            args.IsValid = true;
            return;
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:39:27.327

这个问题更可能出现在 Convert.ToInt32 调用中，因为当传递给它的值为 null 时，此实用程序方法返回零（您可以检查 MSDN 来验证这一点。http: [//msdn.microsoft.com/en-us/library/ sf1aw27b.aspx](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx) ) SelectedValue 属性此时很可能为 null，即使所选索引为零。尝试以编程方式设置 SelectedValue，看看我有什么不同。

# mysql - Web 服务器与应用程序服务器，开源数据库安全与企业数据库安全

> ID：11417800
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:08.547
> 
> 标签：mysql, oracle

我正在为一家初创公司创建一个规范，以创建一个金融经纪人检查网站。它涉及存储有关财务顾问的信息和用户的付款详细信息（因此显然需要很多安全性）。什么样的数据库最适合应用程序。MySQL 或其开源变体是否足够，或者与 Oracle Enterprise 等一起使用是否更好。还有关于在这种情况下应用程序服务器相对于传统 Web 服务器（基于云或普通）的有用性以及首选脚本语言（PHP、Ruby）的任何信息, Python) 用于安全的 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:08:06.913

您选择的语言、数据库等对您的应用程序的安全性影响相对较小。开发人员对如何编写安全代码的理解以及开发人员对其工具提供的功能的理解要重要得多。在开源 LAMP 堆栈上编写安全应用程序是完全可能的。在完全封闭的源代码栈上编写安全应用程序是完全可能的。在任何堆栈上编写不安全的应用程序也很容易。

像 Oracle 这样的企业数据库将（取决于版本、许可的选项和购买的附加组件）提供许多可能有用的安全功能。您可以对静态数据进行透明加密，可以在数据通过网络流向应用服务器时对其进行加密，可以防止 DBA 查看敏感数据，可以审计 DBA 和其他用户的操作等。但是这些事情只有在您开始编写一个相当安全的应用程序时才会真正发挥作用。例如，如果您的应用程序容易受到 SQL 注入攻击并且很容易被黑客入侵以将所有解密的数据呈现给攻击者，那么加密所有数据对您没有什么好处。

# php - php用户表单注册

> ID：11417802
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:12.093
> 
> 标签：php, html, registration

我设计了一个网页。一页包含一个 html 用户注册表单：

```
 <form action="internal/signup.php" method="post" name="signupform" id="signupform">
        <table width="444" border="0" cellspacing="6">
          <tr>
            <th width="98"align="right" scope="col"><label id="fnamelabel" for="fnam">First Name :</label></th>
            <th width="286" align="center" scope="col"><input type="text" name="fnam" id="fnam" tabindex="1" /></th>
            <td width="34" align="center" scope="col"><div id="ll"></div></td>
          </tr>
          <tr>
            <th align="right" scope="row"> <label id="lnamelabel"  for="lnam"> Last Name :</label></th>
            <td align="center"><input type="text" name="lnam" id="lnam" tabindex="2" /></td>
            <td align="center"><div id="lj"></div></td>
          </tr>
          <tr>
            <th align="right" scope="row"><label id="youremail" for="email">Your Email :</label></th>
            <td align="center"><input type="text" name="email" id="email" tabindex="3" /></td>
            <td align="center"><div id="lk"></div></td>
          </tr>
          <tr>
            <th align="right" scope="row"><label id="reemail" for="remail"> Password :</label></th>
            <td align="center"><input type="password" name="password" id="password" tabindex="4" /></td>
            <td align="center"><div id="ll2"></div></td>
          </tr>
          <tr>
            <th align="right" scope="row"><label id="npass" for="password">Re-Password:</label></th>
            <td align="center"><input type="password" name="repassword" id="repassword" tabindex="5" /></td>
            <td align="center"><div id="lm"></div></td>
          </tr>
          <tr>
            <th align="right" scope="row"><label id="skill" for="bskill">Skilled Area :</label></th>
            <td align="center"><select name="bskill" id="bskill" tabindex="6">
                <option>Graphics and multimedia</option>
                <option>Art Works</option>
                <option>IT &amp; programming</option>
              </select></td>
            <td align="center">&nbsp;</td>
          </tr>
          <tr>
            <th colspan="3" align="left" scope="row" id="terms">By clicking &quot;Sign up&quot;, you are indicating that you have read and agreed our <a href="index.html">Terms &amp; conditions.</a></label></th>
          </tr>
        </table>
<td align="center"><div id="signupbutton"></div></td>
        <td align="center">&nbsp; 
    </form> 
```

当我单击注册按钮时，它会转到 signup.php 并完成注册，但我需要在注册完成后重定向到用户页面。（类似于 Facebook 或 Twitter 在注册完成后自动定向到用户页面的方式）

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:34:09.657

[`header()`](http://us3.php.net/manual/en/function.header.php)注册完成后使用：

```
<?php
header('Location: users.php');
exit;
?> 
```

请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。

```
<?php
header("Location: http://www.example.com/"); /* Redirect browser */

/* Make sure that code below does not get executed when we redirect. */
exit;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:35:06.003

```
<?php
// Redirect the user to wherever you want to go
header("Location: /users.php");

// Make sure none of the code beneath here is executed
die();
?> 
```

此代码必须在任何内容之前发送。

更多文档可以在这里找到：[http ://es.php.net/manual/en/function.header.php](http://es.php.net/manual/en/function.header.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:38:19.030

使用[`header()`](http://www.php.net/manual/en/function.header.php).

Remember to use [`die()`](http://www.php.net/manual/en/function.die.php) or [`exit()`](http://www.php.net/manual/en/function.exit.php) after `header()`. If you don't use one of them, your code will continue executing after redirection.

`header()` must be used before [any output](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php).

# java - 在 Java 中检测 URL 的编码

> ID：11417803
> 
> 赞同：2
> 
> 时间：2012-07-10T16:32:17.040
> 
> 标签：java, utf-8, character-encoding, urldecode

我有一个数据库中混合数据的案例，我想看看这是否是一个可以解决的问题。我拥有的是以下三种格式之一的部分 URL：

```
/some/path?ugly=häßlich // case 1, Encoding: UTF-8 (plain)
/some/path?ugly=h%C3%A4%C3%9Flich // case 2, Encoding: UTF-8 (URL-encoded)
/some/path?ugly=h%E4%DFlich // case 3: Encoding: ISO-8859-1 (URL-encoded) 
```

我的应用程序中需要的是 URL 编码的 UTF8 版本

```
/some/path?ugly=h%C3%A4%C3%9Flich // Encoding: UTF-8 (URL-encoded) 
```

数据库中的字符串都是 UTF-8，但 URL 编码可能存在也可能不存在，并且可能是任何一种格式。

我有一个`a`将纯 UTF-8 编码为 URL 编码的 UTF-8 的方法`b`，我有一个将 URL 编码的 ISO-8859-1 解码为纯 UTF-8 的方法，所以基本上我打算做的是：

情况1：

```
String output = a(input); 
```

案例2：

```
String output = input; 
```

案例3：

```
String output = a(b(input)); 
```

如果我知道哪个是哪个，所有这些情况都可以正常工作，但是我有没有一种安全的方法来检测这样的 String 是 case 2 还是 case 3？（我可以将参数中使用的语言限制为欧洲语言：德语、英语、法语、荷兰、波兰语、俄语、丹麦语、挪威语、瑞典语和土耳其语，如果有帮助的话）。

我知道显而易见的解决方案是清理数据，但不幸的是，数据不是我自己创建的，也没有必要的技术理解的人（并且有大量遗留数据需要处理）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:33:34.760

如果您可以假设仅对字母数字进行编码，则以下工作适用于：

*   “häßlich”
*   “h%C3%A4%C3%9Flich”
*   “h%E4%DFlich”

// 首先检查：

```
public static boolean isUtf8Encoded(String url) {
    return isAlphaNumeric(url);
}

public static boolean isUrlUtf8Encoded(String url)
        throws UnsupportedEncodingException {
    return isAlphaNumeric(URLDecoder.decode(url, "UTF-8"));
}

public static boolean isUrlIsoEncoded(String url)
        throws UnsupportedEncodingException {
    return isAlphaNumeric(URLDecoder.decode(url, "ISO-8859-1"));
}

private static boolean isAlphaNumeric(String decode) {
    for (char c : decode.toCharArray()) {
        if (!Character.isLetterOrDigit(c)) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T12:27:46.373

您可以在第一次解码然后编码时解决问题，如果您有未编码的 url 它不受解码的影响

```
 String url = "your url";
    url=URIUtil.decode(url, "UTF-8");
    url=URIUtil.encodeQuery(url, "UTF-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T05:09:18.483

感谢接受的答案，但它不适用于 URL，因为 URL 还包含控制字符，这是我的解决方案：

```
/**
 * List of valid characters in URL.
 */
private static final List VALID_CHARACTERS = Arrays.asList(
        '-', '.', '_', '~', ':', '/', '?', '#', '[', ']', '@', '!',
        '$', '&', '\'', '(', ')', '*', '+', ',', ';', '='
);

/**
 * Check that decoding was successful or not.
 * @param url URL to check
 * @return True if it's valid.
 */
private static boolean isMalformed(final String url) {
    for (char c : url.toCharArray()) {
        if (VALID_CHARACTERS.indexOf(c) == -1 && !Character.isLetterOrDigit(c)) {
            return false;
        }
    }
    return true;
}

/**
 * Try to decode URL with specific encoding.
 * @param url URL
 * @param encoding Valid encoding
 * @return Decoded URL or null of encoding is not write
 * @throws java.io.UnsupportedEncodingException Throw if encoding does not support on your system.
 */
private static String _decodeUrl(final String url, final String encoding) {
    try {
        final String decoded = URLDecoder.decode(url, encoding);
        if(isMalformed(decoded)) {
            return decoded;
        }
    }
    catch (UnsupportedEncodingException ex) {
        throw new IllegalArgumentException("Illegal encoding: " + encoding);
    }
    return null;
}

/**
 * Decode URL with most popular encodings for URL.
 * @param url URL
 * @return Decoded URL or original one if encoding does not support.
 */
public static String decodeUrl(final String url) {
    final String[] mostPopularEncodings = new String[] {"iso-8859-1", "utf-8", "GB2312"};
    return decodeUrl(url, mostPopularEncodings);
}

/**
 * Decode URL with most popular encodings for URL.
 * @param url URL
 * @param encoding Encoding
 * @return Decoded URL or original one if encoding does not support.
 */
public static String decodeUrl(final String url, final String... encoding) {
    for(String e:encoding) {
        final String decoded;
        if((decoded = _decodeUrl(url, e)) != null) {
            return decoded;
        }
    }
    return url;
} 
```

# c# - 正则表达式替换，在 C# 中向后看并忽略

> ID：11417804
> 
> 赞同：1
> 
> 时间：2012-07-10T16:32:17.273
> 
> 标签：c#, regex

我需要从文本中删除所有“'s”，除了单词“let's”。

例如：“jerry's let's cake's”>>“jerry let's cake”。

```
strText = Regex.Replace(strText, @"\b(?!let's)([a-z-]+)'s\b", @"$1"); 
```

- 这行得通，但在大文本上需要很长时间。

```
strText = Regex.Replace(strText, @"\b(?!let's)(?<=[a-z-]+)'s\b", ""); 
```

*   这个并没有忽略“让我们”

我在第二个陈述中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:37:14.563

如果这*确实*是您所需要的，那么[明智的做法是不要使用 Regex](http://www.codinghorror.com/blog/2008/06/regular-expressions-now-you-have-two-problems.html)并执行以下操作：

```
strText = strText.Replace(" let's ", " let''s ")
                 .Replace("'s", "")
                 .Replace(" let'", " let's"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:18:07.513

我也认为您可以编写自己的代码。

```
private string myReplace(string text)
    {
        if (!text.Contains(' '))
        {
            return text.ToLower().Equals("let's") ? text : text.Replace("'s", string.Empty);
        }
        else
        {
            int index = text.IndexOf(' ');
            return myReplace(text.Substring(0, index)) + " " + myReplace(text.Substring(index + 1));
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T17:02:21.820

您错过的简单技巧是`\b`在消极的lookbehind 中使用：

```
(?<!\blet)'s 
```

工作示例：[http ://regexr.com?31g9c](http://regexr.com?31g9c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:56:47.797

老实说，在这种情况下，最好采用老式的方式走线，跟踪你在“让我们”这个词中的位置并特别处理它。

代码（未经测试，但希望你明白）：

```
StringBuilder stripped = new StringBuilder();
int letsPos = -1;

for(int i = 0; i < strText.Length; i++)
{
     char thisChar = strText[i];

     switch(letsPos)
     {    
         case -1:
             if(i == 0 || thisChar == ' ')
                 letsPos = 0;
             break;
         case 0:
             letsPos = (thisChar == 'l') ? 1 : -1;
             break;
         case 1:
             letsPos = (thisChar == 'e') ? 2 : -1;
             break;
         case 2:
             letsPos = (thisChar == 't') ? 3 : -1;
             break;
         case 3:
             letsPos = (thisChar == '\'') ? 4 : -1;
             break;
         case 4:
             letsPos = (thisChar == 's') ? 5 : -1;
             break;
         case 5:
             letsPos = (thisChar == ' ') ? 0 : -1;
             break;
     }

     if(thisChar == '\'' && 
         i+1 < strText.Length && 
         strText[i+1] == 's' && 
         (letsPos < 4 || (i+2 < strText.Length && strText[i+2] != ' '))
     {
         //skip the "'s"
         i += 2;
         letsPos = -1;
     }
     else
     {
         //not "'s" or we have a whole-word "let's"
         stripped.Append(thisChar);
     }
}

return stripped.ToString(); 
```

# php - 构建轻量级和大量数据库驱动的网站的解决方案？

> ID：11417805
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:20.690
> 
> 标签：php, mysql, database, frameworks, content-management-system

我正在寻找某种 CMS 或框架 + ORM（我真的不知道我在寻找什么）。我的目标是构建一个 Web 应用程序来查看和管理数据库记录。为了帮助理解，我想要某种最终用户 phpmyadmin/CMS 混合体，只需最少的编程工作。实际上，就是建立一个特定类型产品的数据库，这些产品由最终用户提交和咨询，并由我自己验证。

我首先认为 wordpress + 插件、mediawiki + 语义或 drupal 可能是快速的解决方案，但

1.  这些对于目的来说是相当沉重的。
2.  玩大量的插件并不能让我放心，因为它们可能会变得无人维护、冲突......
3.  像[mediawiki](http://www.mediawiki.org/)这样的解决方案需要大量时间来编写模板等。

然后我考虑使用框架（比如说[symfony](http://symfony.com/)），但它也非常耗时（与几乎开箱即用的解决方案相比）。最后，我认为最快的解决方案可能是使用简单的 ORM（如[RedBean](http://redbeanphp.com/)）自己开发它，但我希望我能找到更快的解决方案。

任何想法 ？

*注意：我打算使用**php/mysql**解决方案。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:05:37.650

有很多 PHP 的“微框架”可以很好地与 RedBean（我喜欢它）一起工作。这是从头开始编写所有内容和使用完整框架之间的折衷方案。我发现他们使用这些小型（ish）工具包具有很好的灵活性。

我用过的一个是[**Slim**](http://www.slimframework.com/)，它为您提供路由和其他一些控制器可以做的小事情。

其他类似的“微框架”，如 Slim：

*   [硅橡胶](http://silex.sensiolabs.org/)
*   [柠檬水](http://limonade-php.github.com/)
*   [GluePHP](http://gluephp.com/)（大约 30 行代码）

这些都为您提供了路由和其他一些简洁的工具。关于 MVC，他们给了你 C.

如果 RedBean 是您的模型或 M，那么您所缺少的只是 V，如果您想要整个 MVC 组织。

为此，您可以使用[Smarty](http://www.smarty.net/)、[Twig](http://twig.sensiolabs.org/)或[Mustache](http://mustache.github.com/)或任何其他模板工具。

我个人喜欢单独使用这些组件，因为我发现它们都是高度专业化的，可以很好地集成，并且允许我控制它们负责的程度。缺点是它们之间可能存在兼容性问题，并且您必须维护三个，而不是一个第三方库来更新并依赖于它们的开发。

这是[一篇](http://net.tutsplus.com/tutorials/php/rapid-application-prototyping-in-php-using-a-micro-framework/)关于将 Slim 与[Idiorm](https://github.com/j4mie/idiorm)（一个 ORM）和 Twig 结合使用的好文章，尽管我发现 Idiorm 使用起来相当讨厌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:34:28.703

听起来你可以使用：asp.net + mvc 或 django

抱歉，这是两个不同的可比较环境，应该有助于减少学习开销，并且可以很好地与 mysql 一起使用

# jquery-ui - 无法将模糊事件附加到 jQuery 组合框

> ID：11417807
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:24.957
> 
> 标签：jquery-ui, combobox, blur

我正在尝试使用下面的代码向 jQuery 组合框添加一个“模糊”事件，但它总是不会触发。将“模糊”事件附加到 jQuery 组合框的正确方法是什么？

```
$(document).ready(function() {
    $("#dropdown_sel").combobox();
    $($('.ui-combobox-input')[0]).css('width', '500px');
    $("#toggle").click(function() {
        $("#dropdown_sel").toggle();
    });
    $("#dropdown_sel").blur(function() {
        alert('on blur of combo');
    });
});​ 
```

我什至尝试了下面的代码，但它无法触发，我使用的是 focusout 事件而不是 blur 事件。我正在使用 IE 8.x。

```
$("#dropdown_sel").focusout(function () { alert('on blur of combo'); }); 
```

您可以在此链接测试代码，我已经为 focusout 事件设置了组合框代码：http: [//jsfiddle.net/vZwRk/79/](http://jsfiddle.net/vZwRk/79/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:42:03.640

尝试使用[`event-change`](http://jqueryui.com/demos/autocomplete/#event-change)：

```
$( "#dropdown_sel" ).bind( "autocompletechange", function(event, ui) {
    alert('on blur of combo');
}); 
```

# .net - iOS 应用程序的 WCF 或 Web 服务 (.asmx)？

> ID：11417808
> 
> 赞同：2
> 
> 时间：2012-07-10T16:32:28.297
> 
> 标签：.net, ios, wcf, web-services, asmx

我对网络开发和网络服务相当陌生。我一直在使用 C# 在 .NET 中使用传统的 Web 服务 (.asmx)。有人建议现在很多服务都使用 WCF，我想知道我是否应该学习 WCF 并使用它与我的 iOS 应用程序进行通信。

看起来 WCF 会有点学习曲线，因为我在 .NET 框架方面没有任何经验（C# 经验很少）。我不确定是否值得花时间在 WCF 上，或者我是否应该只使用传统的 Web 服务编写方式。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:34:54.180

我建议避开 WCF，并使用[Microsoft Web API](http://www.asp.net/web-api)或[ServiceStack](http://servicestack.net/)。两者都可以为您提供简单的 RESTful 服务并支持内容协商 - 即服务应该易于在 iPhone 上使用。

Web API 和 ServiceStack 都试图用更简单、更强大的东西来代替 WCF。今天我永远不会考虑将 WCF 用于任何未开发的代码。旧式 .asmx (SOAP) 服务完全不可能。

您可以让 SOAP 服务在 iPhone 上工作，但它的工作量远不止针对 URL 的 GET 或 POST'ing。

请务必查看[这个很好的答案](https://stackoverflow.com/questions/9699083/servicestack-vs-asp-net-web-api/9709236#9709236)以进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:04:33.610

ServiceStack 具有**MonoTouch**和**MonoDroid** [客户端发布版本](https://github.com/ServiceStack/ServiceStack/tree/master/release/latest)。

作为其核心目标之一，ServiceStack**支持并在 Mono 上运行**。它也是唯一一个无需任何代码生成即可提供类型化端到端客户端的 .NET Web 服务框架，其[基于消息的方法](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)对于 Web 服务来说是最佳选择。

有关两者之间的更多比较，这里有一个关于[ServiceStack vs WebApi](https://stackoverflow.com/questions/9699083/servicestack-vs-asp-net-web-api/9709236#9709236)的现有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:34:40.323

我相信许多用于 iOS 等应用程序的 RESTful 服务都是通过 ASP.net MVC4“web API”提供的。

# java - 用 (\") 替换 (") 的正则表达式？

> ID：11417811
> 
> 赞同：2
> 
> 时间：2012-07-10T16:32:46.320
> 
> 标签：java, regex

为什么以下不起作用：

```
 String test = "hello\"world".replaceAll("\"", "\\\"");
      System.out.println(test); 
```

我想要做的是`"`用`\"`.

所以我想得到输出：

```
hello\"world 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T16:37:16.487

为此，正则表达式是矫枉过正的。

```
myString.replace("\"", "\\\"") 
```

应该做得很好，并且对于熟悉核心库的人来说更具可读性。

该[`replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)方法只是用另一个子字符串替换一个子字符串。

> 用指定的文字替换序列替换此字符串中与文字目标序列匹配的每个子字符串。替换从字符串的开头到结尾进行，例如，在字符串中`"aa"`替换将导致而不是。`"b"``"aaa"``"ba"``"ab"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:37:11.587

```
String test = "hello\"world".replaceAll("\"", "\\\\\"");
System.out.println(test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:37:52.023

您还需要两个`\\`来转义转义字符，总共需要 5`\`秒。

`\\`- 转义转义字符

`\\`- 显示字符

`\`- 逃避报价。

尝试：

```
String test = "hello\"world".replaceAll("\"", "\\\\\""); 
```

# ajax - 我怎样才能让我的互联网变慢？

> ID：11417813
> 
> 赞同：0
> 
> 时间：2012-07-10T16:32:49.293
> 
> 标签：ajax

不完全是。

我的网络应用程序中有很多 AJAX 请求，我想在响应缓慢时包含适当的反馈机制、微调器等。但是在开发时，所有的调用几乎都是即时的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:45:15.457

在成功处理程序中使用 setTimeout 可能是一种方法。假设您的 ajax 完成回调是说 function `doneFn(..)`，然后，将该回调更改为类似的内容，并在延迟后`delayedDone(..)`从那里调用您的原始回调：`doneFn`

```
function delayedDone(){
    setTimeout(function(){doneFn(responseParams);}, 3000);
} 
```

当然，另一种方法是在服务器端引入一些微小的毫秒睡眠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:50:50.860

速率限制代理可能是您正在寻找的。 [http://blog.nella.org/?p=833](http://blog.nella.org/?p=833)显示了一个示例，我不确定它有多完整。但是这个概念可以很容易地扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:54:46.663

这是我发现的两种软件解决方案 - 一种用于 Mac，一种用于 Windows： [http :](http://wanem.sourceforge.net/)
[//wanem.sourceforge.net/ http://mschrag.github.com/](http://mschrag.github.com/)

# .net - 如何在加密字符串中添加和检索 TDES IV（初始化向量）

> ID：11417816
> 
> 赞同：1
> 
> 时间：2012-07-10T16:33:09.127
> 
> 标签：.net, encryption, 3des, tripledes

我正在通过.Net开发一个mvc应用程序，以保护我的敏感信息，例如web.config中的信息我有两个使用Triple DES加密和解密信息的函数，但是我对此并不陌生并成功达到在朋友的帮助下直到这里，在这里问了几个问题。

我目前陷入困境的一点是如何`IV (Initialization Vector)`在加密字符串的末尾添加 TDES 以及如何在解密时再次检索它？我的意思是你如何在加密信息中识别来自这里的`IV (Initialization Vector)`星星？

请帮忙。

```
public static string Encrypt(string Message)
    {
        byte[] iv;
        byte[] Results;
        System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
        MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
        byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String()));
        TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
        TDESAlgorithm.Key = TDESKey;
        TDESAlgorithm.Mode = CipherMode.ECB;
        TDESAlgorithm.Padding = PaddingMode.PKCS7;
        // Capture the randomly generated IV
        iv = TDESAlgorithm.IV;
        byte[] DataToEncrypt = UTF8.GetBytes(Message);
        try
        {
            ICryptoTransform Encryptor = TDESAlgorithm.CreateEncryptor();
            Results = Encryptor.TransformFinalBlock(DataToEncrypt, 0, DataToEncrypt.Length);
            //var lnght=Results.GetLength(0);
            //System.Buffer.BlockCopy(iv, 0, Results, lnght + 1, iv.Length()); //HOW?
        }
        finally
        {
            TDESAlgorithm.Clear();
            HashProvider.Clear();
        }
        return Convert.ToBase64String(Results);
        //return Encoding.UTF8.GetString(Results);
    }

    public static string Decrypt(string Message)
    {
        byte[] Results;
        System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();
        MD5CryptoServiceProvider HashProvider = new MD5CryptoServiceProvider();
        byte[] TDESKey = HashProvider.ComputeHash(UTF8.GetBytes(GetSHA256String()));
        TripleDESCryptoServiceProvider TDESAlgorithm = new TripleDESCryptoServiceProvider();
        TDESAlgorithm.Key = TDESKey;
        // Apply the same IV used during encryption
        //TDESAlgorithm.IV = iv;  // HOW?
        TDESAlgorithm.Mode = CipherMode.ECB;
        TDESAlgorithm.Padding = PaddingMode.PKCS7;
        try
        {
            byte[] DataToDecrypt = Convert.FromBase64String(Message);
            //byte[] DataToDecrypt = UTF8.GetBytes(Message);
            //byte[] DataToDecrypt = Encoding.UTF8.GetBytes(Message);
            ICryptoTransform Decryptor = TDESAlgorithm.CreateDecryptor();
            Results = Decryptor.TransformFinalBlock(DataToDecrypt, 0, DataToDecrypt.Length); // << ERROR is here.
        }
        finally
        {
            TDESAlgorithm.Clear();
            HashProvider.Clear();
        }
        return UTF8.GetString(Results);
    }

…
…
… 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:11:26.317

您的问题是您使用的是 ECB 模式。ECB 不支持 IV，并且具有许多不良属性。你可以改用CBC。

通常，您将 IV 放在加密数据之前而不是之后。GameScripting 的回答显示了一种方法。

最后，您的密钥派生看起来很可疑，但是由于它不完整，我无法告诉您应该在那里做什么。

# javascript - 在javascript中解析粘在一起的json

> ID：11417817
> 
> 赞同：3
> 
> 时间：2012-07-10T16:33:12.607
> 
> 标签：javascript, jquery, ajax, json, comet

我正在看一个看起来像这样的 json

```
{
    "key": "cow",
    "value": "woof"
}
{   
    "key": "dog",
    "value": "moo"
} 
```

我想解析它，但 JSON.parse 不起作用，因为整个事情并不是*真正*的json。实际上也没有任何换行符，所以看起来像

```
{"key": "cow","value": "woof"}{"key": "dog","value": "moo"} 
```

至于*为什么*，这是来自 Comet 端点的流。理想情况下，它应该一个接一个地出现，但有时会有中断，在它回来后，我会收到自中断发生以来发生的所有更改的列表，串在一起。因此，如果三个 dicts 本来是在连接中断时掉下来的，我会在最后一次得到它们：

```
{"key": "cow","value": "woof"}{"key": "dog","value": "moo"}{"key":"cat","value":"baaa"} 
```

有什么方便的方法可以在浏览器中解析这种 json 吗？

编辑：对不起，伙计们，我没有提到对象可以任意嵌套，并且可以包含各种东西，Unicode 字符、数组、对象、带有对象的数组、各种形状和大小的括号等等等等。所以大多数 hacky在这些情况下，字符串拆分或正则表达式解决方案将失败。我没有把这些放在例子中，因为我很懒，但一个更有代表性的例子可能是

```
{
    "key": "cow",
    "value": {
        "body": "big",
        "name": "sally",
        "children": [
            "bob",
            "daisy"
        ]
    },
    "alt-key": "牛"
}
{   
    "key": "dog",
    "value": "moo{}{}{}}}} i love brackets[[[]] ]]]]      }{}",
    "array": [
        "豆沙包",
        "叉烧包"
    ]
} 
```

尽管 regex/stringsplit 的事情在 95% 的时间里都可以工作，但我正在寻找一个严格正确的解决方案，当输入正确的 json 时它总是可以工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:36:28.187

如果值和键不包含`}{`，您可以简单地添加逗号以使其有效 JSON（并添加方括号使其成为数组）：

```
var json = '[' + json.replace(/}{/g, '},{') + ']'; 
```

如果您只获得一个对象作为响应，这甚至会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:37:09.253

试试这样：

```
var arrayOfObjects = flowstring.match(/{.*?}/g).map(function(value){
    return JSON.parse(value);
}); 
```

你将拥有这个对象数组：

```
[{"key": "cow","value": "woof"},{"key": "dog","value": "moo"}.......] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:37:38.580

尝试将其转换为数组，然后对其进行解析。像这样的东西：

```
var json = '{"key": "cow","value": "woof"}{"key": "dog","value": "moo"}';
var newjson = '[' + json.replace(/\}\{/g, '},{') + ']';
var obj = JSON.parse(newjson); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T18:09:26.240

如果是我，我只会编写一个能够理解 JSON 表达式流的 JSON 解析器。JSON 与语法一样容易解析，并且制作能够为新句子“重置”自身的解析器很简单（一旦解析器存在）。

哎呀，你可以从 json.org 解析器本身开始。

可靠地“修复”您当前的数据是一个非常接近于编写解析器的项目。

# bash - 如何从嵌套的子目录中仅移动具有特定扩展名的文件？

> ID：11417825
> 
> 赞同：4
> 
> 时间：2012-07-10T16:33:58.920
> 
> 标签：bash

在一个目录中，我有许多子目录，每个子目录都有许多不同类型的文件。我想从每个子目录中提取具有特定扩展名的所有文件并将其放在不同的文件夹中。是否可以编写一个 bash 脚本来执行此操作？如果有怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T16:37:55.660

```
$ find <directory> -name '*.foo' -exec mv '{}' <other_directory> \; 
```

`find`通过目录结构进行递归搜索，并对它找到的与搜索条件匹配的任何文件执行给定的操作。

在这种情况下，`-name '*.foo'`是搜索条件，并`-exec mv '{}' <other_directory> \;`告诉在它找到的任何文件`find`上*执行* ，其中转换为文件名并表示命令的结尾。`mv``'{}'``\;`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T17:00:53.140

如果你有 bash v4 并且有

```
shopt -s globstar 
```

在您的 .profile 中，您可以使用：

```
mv ./sourcedir/**/*.ext ./targetdir 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:35:23.087

使用 find 和一个简单的 while 循环就可以了：

```
find directory -name '*.foo'|while read file; do
    mv $file other_directory/
done 
```

在这里它将所有带有`.foo`后缀的文件移动到 other_directory/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:42:17.370

您可以使用*find*和*xargs*来减少循环或多次调用*mv*的需要。

```
find /path/to/files -type f -iname \*foo -print0 |
    xargs -0 -I{} mv {} /path/to/other/dir 
```

# java - 文件操作：Java（找不到文件）

> ID：11417826
> 
> 赞同：-5
> 
> 时间：2012-07-10T16:34:01.823
> 
> 标签：java, eclipse

```
try {
     File makefile = new File("jk.txt");
     FileWriter fwrite = new FileWriter(makefile);
     fwrite.write(temp);
     fwrite.flush();

} catch (IOException e) {
     e.printStackTrace();
} 
```

该文件在此代码段中的何处创建？我在我的电脑中找不到我的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:41:59.260

要打印出创建文件的路径：

```
File f = new File(".");
System.out.println(f.getCanonicalPath()); 
```

或者

```
System.out.println(makefile.getCanonicalPath()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:36:29.543

如果您在 Eclipse 上运行此文件，则该文件应位于项目根目录中。

如果您正在独立运行此文件，则应在当前目录中创建该文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:37:22.273

它是在当前路径（可能是项目根目录）中创建的，因为您在创建文件时没有为文件设置路径。

# shell - Bourne Shell 试图 cd 进入 $variable 路径？

> ID：11417828
> 
> 赞同：0
> 
> 时间：2012-07-10T16:34:04.087
> 
> 标签：shell, scripting, sh

我正在尝试一些非常简单的事情：

```
MYPATH=/path/I/want/to/go/to/
...
cd $MYPATH 
```

不好。我已经尝试了围绕事物的各种引号排列，但似乎没有帮助。那么这是怎么做到的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:36:35.353

那是您可以阅读的现有目录吗？

`cd`如果目录可能不存在，您可能需要在此之前添加：

```
 mkdir -p $MYPATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T17:02:01.097

您的 shellscript 在单独的 shell 中运行，您从中启动的 shell 通常不受脚本操作的影响（除了会影响它的事情，例如文件系统更改）。如果你想让一段代码“就像”一个脚本但影响调用外壳，请使用带有花括号主体的函数：

*~/.mystuff/dostuff.func*：

```
dostuff()
{
  cd /some/where
} 
```

你的*.profile*：

```
. ~/.mystuff/dostuff.func 
```

启动登录外壳，然后执行

```
dostuff 
```

您应该在`/some/where`（如果它存在于您的计算机上）。

# php - PHP - preg_match 关联数组中的整个单词，使用 stristr 但不是 preg_match

> ID：11417833
> 
> 赞同：1
> 
> 时间：2012-07-10T16:34:21.033
> 
> 标签：php, regex, arrays, foreach, preg-match

我正在遍历一个关联数组，并尝试将针数组中的整个单词匹配到 haystack 数组中。以下代码完美运行，但返回太多结果，因为它匹配任何出现的字符串：

```
$result = array();
$name1 = array();
$name2 = array();
foreach($object->organizations as $o) {
    foreach($objectCrunch as $o2) {
        $name1 = $o->name;
        $name2 = $o2->name;

        if(stristr($name2, $name1)) {
            $result[] = $o2->permalink;
        }
    }
} 
```

当我尝试以下代码时：

```
$result = array();
$name1 = array();
$name2 = array();
foreach($object->organizations as $o) {
    foreach($objectCrunch as $o2) {
        $name1 = $o->name;
        $name2 = $o2->name;

        $pattern = "'/\b" . $name2 . "\b/i'";

        if(preg_match($pattern, $name1)) {
            $result[] = $o2->permalink;
        }
    }
} 
```

我得到一个空数组。让最后一段代码工作的任何帮助都会很棒。

谢谢，格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:45:10.760

您在这里使用了两对[分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)：

```
$pattern = "'/\b" . $name2 . "\b/i'";
            ||      
            1|
             2 
```

使用`/`或`'`。
我会说单引号是多余的，是匆忙复制和粘贴的结果。

此外，[`preg_quote`](http://php.net/preg_quote)对于内容/单词，如果它可能包含其中任何一个。

* * *

正如埃利亚斯指出的那样；下一个陷阱可能是尝试使用长内容变量作为搜索参数。如果您没有给变量提供无意义的枚举名称，这将是一个明显的错误。

其中只有一个可能是实际的单词或名称。另一个应该称为内容或其他东西：

```
 $word = $o->name;
    $textcontent = $o2->name; 
```

以后使用这些。
同时，也相应地修复对象属性命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:45:38.187

这非常简单，真的。由于 php 中的一些怪癖，`stristr`语法如下：

```
stristr($haystack,$needle); 
```

while`preg_match`的第一个论点就像一根针。例子：

```
$name1 = 'name of chief object';
$name2 = 'I am a child of name of chief object';
stristr($name2,$name1);//looks for 'name of chief object' in $name2

preg_match('/\b'.$name2.'\b/i',$name1);//does the exact oposite 
```

# java - 通过 shell 脚本启动的重复进程

> ID：11417834
> 
> 赞同：1
> 
> 时间：2012-07-10T16:34:21.633
> 
> 标签：java, bash, shell

我正在使用以下 shell 脚本来启动 java 守护进程（该命令是通过 root 用户启动的）：

```
 #!/bin/sh
 sudo -u postfix CONFIG_LOCATION=/mnt/custom java -Dcom.sun.management.jmxremote.port=10020 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.util.logging.config.file=${PresentWorkingDirectory}/logging.properties -cp "${ExecutableJar}:${PresentWorkingDirectory}${ClassPath}" com.x.y.filter <&- 1>/dev/null 2>&1 & 
```

这导致两个正在运行的进程启动，我在“ps -f -All”输出中看到以下记录：

```
4 S root     24250     1  0  82   0 - 26247 -      20:33 pts/1    00:00:00 sudo -u postfix CONFIG_LOCATION=/mnt/custom java -Dcom.sun.management.jmxremote.port=10020 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.util.logging.config.file=${PresentWorkingDirectory}/logging.properties -cp "${ExecutableJar}:${PresentWorkingDirectory}${ClassPath}" com.x.y.filter <&- 1>/dev/null 2>&1 &
4 S postfix  24252 24250 47  82   0 - 364460 184466 20:33 pts/1   00:00:31 java -Dcom.sun.management.jmxremote.port=10020 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.util.logging.config.file=${PresentWorkingDirectory}/logging.properties -cp "${ExecutableJar}:${PresentWorkingDirectory}${ClassPath}" com.x.y.filter <&- 1>/dev/null 2>&1 & 
```

我无法理解为什么要启动两个进程？

虽然我打算只运行一个进程，而我的 shell 脚本也只启动一个进程。

有人可以解释上述观察吗？

需要做什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:36:32.023

这是预期的行为。您正在调用`sudo`，这是一个过程。此过程会将其用户更改为`postfix`，然后调用`java`- 另一个过程。

如果`sudo`使用`exec`（以便该命令只使用一个进程），那么`java`将能够运行它不应该运行的东西（因为`java`二进制文件将替换`sudo`内存中的那个，因此拥有该文件所拥有的所有权限`sudo`），这可能是个坏主意。

请注意，`sudo`二进制文件不会做任何事情：它只会`java`在进行自己的清理之前等待终止。

要理解的关键之一是它`sudo`不是一个神奇的系统实用程序，它只是一个普通的应用程序`setuid`。这意味着，`sudo`允许二进制文件更改其运行时用户 uid。一旦你看到这一点，你就会开始理解它是如何`sudo`工作的，以及为什么你会得到两个进程。

# objective-c - 在 iOS 中运行后台服务

> ID：11417837
> 
> 赞同：14
> 
> 时间：2012-07-10T16:34:30.033
> 
> 标签：objective-c, ios, background-process

我需要编写一个 iOS 应用程序，每 30 分钟向服务器发送一次数据。当应用程序在后台时，这可以工作吗？它有多可靠？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T17:24:29.163

无法在您请求的时间间隔内永久地在后台执行任务。您可以通过开发人员连接请求特定许可，但我必须警告您，您需要一个非常有说服力的论据。我在下面包含了文档，也许您的请求属于可以永久运行的分组之一。或者，也许您可​​以使用其中一个长时间运行的后台线程并对其进行调整，使其能够完成您正在尝试的任务。

直接来自 Apple 的文档：

## 实现长时间运行的后台任务

对于需要更多执行时间来实现的任务，您必须请求特定权限才能在后台运行它们而不会被挂起。在 iOS 中，只允许特定类型的应用程序在后台运行：

*   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
*   让用户随时了解其位置的应用程序，例如导航应用程序
*   支持互联网协议语音 (VoIP) 的应用程序 需要下载和处理新内容的报亭应用程序
*   从外部附件接收定期更新的应用程序

实现这些服务的应用程序必须声明它们支持的服务并使用系统框架来实现这些服务的相关方面。声明服务让系统知道您使用了哪些服务，但在某些情况下，实际上是系统框架阻止了您的应用程序被挂起。

~/行尾

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-19T12:06:31.370

在 iOS7 中引入了新的多任务 API，因此可以无限期运行后台任务。Apple 鼓励使用[NSURLSession](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLSession_class/Introduction/Introduction.html) API，它创建一个后台会话并将传输排入队列

iOS7中还引入了新的[UIBackgroundModes](https://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)，包括“Background Fetch”和“remote-notifications”，有助于运行后台服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T17:18:58.513

[正如https://stackoverflow.com/users/1515108/im-lp](https://stackoverflow.com/users/1515108/im-lp)所说，除了 ios 提供的一些特殊情况外，没有办法将其作为服务。但是你可以模拟它。这篇文章回答了如何：

[https://stackoverflow.com/a/19121250/2835520](https://stackoverflow.com/a/19121250/2835520)

我希望它会有所帮助！

# asp.net - OnClick 列表

> ID：11417838
> 
> 赞同：2
> 
> 时间：2012-07-10T16:34:38.113
> 
> 标签：asp.net, list

我不想在我的列表中使用 ImageButton。我想使用标签调用 OnClick 事件（来自后面的代码）。我怎样才能做到这一点？

```
<li><a href="#" class="nav-start">Partner</a>
        <ul>
            <li>
                <asp:ImageButton ID="NewPartnerFormBtn" OnClick="NewPartnerFormBtn_Click" runat="server"
                    Text="New" ImageUrl="./Images/new-btn.png" CausesValidation="false" /><br />
            </li>
            <li>
                <asp:ImageButton ID="ViewPartnerFormBtn" runat="server" Text="View" OnClick="ViewPartnerFormBtn_Click"
                    ImageUrl="./Images/view-btn.png" CssClass="cancel" CausesValidation="false" /><br />
            </li>
            <li>
                <asp:ImageButton ID="EditPartnerFormBtn" runat="server" Text="Edit" OnClick="EditPartnerFormBtn_Click"
                    ImageUrl="./Images/edit-btn.png" CssClass="cancel" CausesValidation="false" />
            </li>
        </ul>
    </li> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:55:39.143

如果您需要代码隐藏支持的点击，您可以使用 LinkBut​​tons

```
<ul>
   <li>
      <asp:LinkButton runat="server" CssClass="MyStyleClass" OnClick="MyClickEvent" Text="Link Text If Necessary"> Any tags to link </asp:LinkButton>
   </li>
</ul> 
```

LinkBut​​ton 将呈现为带有服务器端事件的简单锚标记。

# c# - 以 windows 形式显示 Solidworks 工程图

> ID：11417839
> 
> 赞同：2
> 
> 时间：2012-07-10T16:34:40.167
> 
> 标签：c#, api, solidworks

我需要将 Solidworks .slddrw 绘图加载到 Windows 窗体上的 Visual Studio (C#) 中。然后我需要使用俯仰/滚动数据来旋转这个图像。我首先只想显示图纸。有谁知道如何使用 SolidWorks API 做到这一点？

这是代码

```
public SolidWorksDrawing() 
{ 
   InitializeComponent(); 
   myGraphic = groupBox1.CreateGraphics(); 
   drawingFile = "C:\\BrendaDocs\\trunk_July10\\foodprocessor.slddrw"; 

   //ModelDoc2 swModel = default(ModelDoc2); 
   ModelDoc2 swModel = new ModelDoc2(); //class not registered 
} 
```

我在这一行得到“obj ref not set to an instance of an obj”

```
swModel = default(ModelDoc2) 
```

我在这一行得到“班级未注册”

```
swModel = new ModelDoc2() 
```

我在 windows 窗体上有一个组框，我现在只是想加载和显示solidworks 绘图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T23:56:08.300

几年来我没有做过这些东西，但是有一个你可以使用的 edrawings 控件（activex？）​​。Edrawings 是由solidworks 制作的免费solidworks 查看器，然后您可以使用api 告诉它要做什么。不过会很丑。

# sharepoint - SharePoint 2010 - 遍历所有文档库，创建视图并将其设置为默认值

> ID：11417841
> 
> 赞同：2
> 
> 时间：2012-07-10T16:34:43.320
> 
> 标签：sharepoint, powershell

我在调试这个脚本时遇到了麻烦。它基于关于 SO 的较早问题，并且几乎可以正常工作。

要求：脚本循环浏览 Web 应用程序上的每个文档库，创建一个名为“详细”的视图并将其设置为默认视图。

问题：似乎无法循环浏览网站集。它将在第一个网站集及其库上成功创建视图，但在后续网站集上失败。

希望这只是简单的事情。任何帮助深表感谢。

谢谢，

阿什利

```
Add-PSSnapin Microsoft.SharePoint.PowerShell -erroraction SilentlyContinue

$siteURL = "http://dev1share"
$site = Get-SPSite($siteURL)

foreach($web in $site.AllWebs) {

$listCounter = $web.Lists.Count
for($i=0;$i -le $listCounter;$i++) {

    $list = $web.Lists[$i]
    if($list.BaseType -eq "DocumentLibrary") {
    $newList = $web.Lists.item($list.ID);

  $viewfields = New-Object System.Collections.Specialized.StringCollection 
  $viewfields.Add("DocIcon") 
  $viewfields.Add("LinkFilename") 
  $viewfields.Add("_UIVersionString") 
  $viewfields.Add("Modified") 
  $viewfields.Add("Created") 
  $viewfields.Add("Editor") 
  $viewfields.Add("FileSizeDisplay") 

  [void]$newList.Views.Add("Detailed", $viewfields, "", 100, $true, $true)
  $newList.Update();

  $view=$newList.Views["Detailed"]
  $view.DefaultView = $true
  $view.Update()
}
}

$web.Dispose();
}
$site.Dispose(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:01:50.343

您的脚本仅在 1 个称为`[http://dev1share][1]`

如果要循环所有站点集合，则必须获取 webapplication 对象，而不是在 Sharepoint 层次结构模型中较低的 SP-Site。

要获取 webapplication 对象并进行迭代 - 使用如下代码：

```
$webapplication = Get-SPWebApplication "Webapplication Name"
foreach($site in $webapp.Sites){
    foreach($web in $site.AllWebs){
        // Your script with creating views
    }
} 
```

# php - 如何避免在codeigniter中创建自动会话？

> ID：11417843
> 
> 赞同：1
> 
> 时间：2012-07-10T16:34:49.077
> 
> 标签：php, codeigniter, session

我一直在尝试使用 Codeigniter 处理会话，但我仍然发现每次刷新浏览器都会创建一个新会话......这没有任何意义。我尝试删除所有会话，然后我得到一个新会话，有人看到这个错误吗？

这是我的代码：

```
$this->load->library('session');
print_r  ($this->session->all_userdata());
$this->session->sess_destroy(); 
```

因此，使用 sess_destroy 我删除了会话，但是当我刷新站点时，会出现一个新会话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:46:21.083

嗯，很确定 sess_destroy 会破坏旧的会话，所以你当然会在刷新时得到一个新的会话！

编辑：

在 Session.php 快速达到峰值后确认

```
/**
 * Destroy the current session
 *
 * @access  public
 * @return  void
 */
function sess_destroy() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T19:22:28.857

您描述的是默认和正常行为。请参阅“会话如何工作？” CodeIgniter 用户指南的[会话类章节中的部分。](http://codeigniter.com/user_guide/libraries/sessions.html)它说：

> 如果会话数据不**存在**（或已过期），则会创建一个新会话并将其保存在 cookie 中。

前提是之前已经启动了 Session 类，使用

```
$this->load->library('session'); 
```

这里到底是什么情况。

如果您担心安全性，请不要担心。新会话不会继承前一个会话的数据。

最后，如果由于某种原因您想销毁会话并有条件地启动它，请检查它是否存在：

```
if($this->session->userdata('username') === FALSE ) 
```

如手册所述：

> **注意**：如果您尝试访问的项目不存在，该函数将返回 FALSE（布尔值）。

# iphone - iPhone iOS如何在应用程序从后台恢复时添加密码/密码锁定屏幕？

> ID：11417848
> 
> 赞同：5
> 
> 时间：2012-07-10T16:35:17.720
> 
> 标签：iphone, ios, security, uiview

我需要**添加一个 4 位数的 pin 视图控制器，它将“悬停”在我的应用程序的主窗口上**，并防止不知道 pin 的用户浏览应用程序内的数据。

如果有任何演示项目或开源项目可以实现此功能（按键点击、自动更改焦点、显示静态光泽键盘、x 秒后锁定），我很感兴趣。

谢谢您的意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T16:44:18.023

不确定是否有任何演示应用程序，但是您可以使用钩子来执行此操作，例如...

应用程序代表“applicationWillEnterForeground”和“applicationDidBecomeActive”

如果您的应用程序能够在后台运行，或者您如何实现它，也可能很重要。

在我的应用程序中，我将其设置为在应用程序激活/进入前台时将用户导航到主屏幕。然后主屏幕控制器确定用户是否仍然登录/活动，如果不是，它会在堆栈上推送登录视图控制器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:07:09.320

制作我自己的自定义警报视图，在某种程度上遵循[本](http://iphonedevelopment.blogspot.com/2010/05/custom-alert-views.html)教程，我能够制作一个覆盖整个窗口的 PIN 输入视图，从而吸收所有输入。然后我输入代码`applicationWillResignActive`并`applicationDidBecomeActive`确定应用程序最小化的时间，以便根据用户的偏好设置显示 PIN 输入窗口。别忘了，您想以安全的方式存储 PIN，我建议使用内置钥匙串。

# asp.net - System.Web.UI.Control 如何在页面上使用

> ID：11417851
> 
> 赞同：0
> 
> 时间：2012-07-10T16:35:26.203
> 
> 标签：asp.net, parsing, controls

我创建了一个自定义 ASP.Net 控件：

```
namespace Chart2GoWeb.WebUI.UserControls
{
    public class NavigationBarControl : Control
    {
        protected override void Render(HtmlTextWriter output)
        {
            ...
        }
    }
} 
```

现在是时候在 aspx 页面上使用它了。我试过添加：

```
<%@ Register Namespace='Chart2GoWeb.WebUI.UserControls' TagPrefix='c2gwwc'%> 
```

到页面，然后使用该控件：

```
<c2gwwc:NavigationBarControl runat=server></c2gwwc:NavigationBarControl> 
```

我收到错误消息：

解析器错误消息：未知的服务器标记“c2gwwc:NavigationBarControl”。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:37:24.673

`c2gwwc`应该匹配标签前缀`TagPrefix="asp"`

你不应该扩展 WebControl 而不是 Control 吗？我不是专业人士，但它看起来不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:49:30.443

哇，我所要做的就是将 'Assembly="Chart2GoWeb.WebUI"' 添加到寄存器中，它就可以工作了。它似乎不假定当前的程序集。活到老，学到老。感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:41:25.707

用这个替换你的自定义 asp 控件标记

```
<asp:NavigationBarControl runat=server></asp:NavigationBarControl> 
```

**更新答案：** 如果您创建了自定义服务器控件，则必须将自定义服务器控件的 dll 添加到项目中。您还可以将自定义服务器控件添加到您的工具箱，右键单击工具箱，选择控件或类似的东西，将打开一个新的弹出窗口，选择您的 dll，然后控件将出现在工具箱中。

# c# - 分发 c# 数据驱动的应用程序

> ID：11417852
> 
> 赞同：1
> 
> 时间：2012-07-10T16:35:30.217
> 
> 标签：c#, sql, sql-server, installation, .net

我正在为使用数据库的 SQL 后端的客户端编写专业级 c# 应用程序，我希望将这个应用程序商业化，供其他能够自行安装的人使用。

我的主要问题是，我是否可以添加 SQL 服务器实例、用户名、密码等选项，以及从安装程序中自动生成数据库和表并保存这些设置以供在运行时使用？

任何援助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:43:36.637

是的，您可以在安装过程中使用对话获取 SQL 信息。

将数据库脚本包含在安装程序中，并在从用户那里获取 SQL 实例和凭据信息后运行它。

[请参阅此链接以获取工作示例](http://www.devproconnections.com/article/aspnet2/deploy-apps-with-ease)

创建数据库后，根据需要将信息保存在文件系统（配置文件）、用户应用程序数据或安装目录中的某个位置。如果需要，对其进行加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:38:08.003

您可以将它们加载到向量（或 ArrayList）中，然后将其存储在他们机器上某处的文件中。然后在启动时，从文件中提取信息并将其加载到您的程序中。

编辑：您必须指示他们不要触摸该文件，因为它会破坏他们的安装。我建议将其作为驱动器上某个隐藏文件夹中的文件，他们不会倾向于将其弄乱。如果可以（我个人不确定如何）将其设置为只读，除了程序本身之外，这不是一个坏主意。

# javascript - JavaScript 对象数据和数组

> ID：11417855
> 
> 赞同：1
> 
> 时间：2012-07-10T16:35:37.757
> 
> 标签：javascript

我有一个 JavaScript 对象，如下所示。

```
var sampleData = {
    "studentsList": {
        "Student1": {
            "marks": "123",
            "grade": "B"
        },
        "Student2": {
            "marks": "144",
            "grade": "A"
        }
    }
};​ 
```

现在用户输入学生的姓名，比如说`Student1`我需要获取该对象的详细信息。

**我有两个问题。**

**[1]**如何使用 JavaScript 获取录入学生的详细信息？

当我使用`sampleData.studendsList.valueOf("Student1")`返回给我完整的对象。我只需要“Student1”的详细信息。

**[2]**这是正确的做法吗？或者我们应该创建一个学生数组，其中包含一个名为“name”的属性，其值为 say `Student1`？如果我采用这种方法，那么我需要遍历整个数组列表以获取学生的详细信息。

哪种方法更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:38:30.837

`sampleData.studentsList.Student1`或者`sampleData.studentsList["Student1"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:39:36.343

**[1]** 使用访问通过 访问属性`[]`。这样你就可以在那里插入一个变量，而不仅仅是一个硬编码的标识符。

```
var studentDetails = sampleData.studendsList[ "Student1" ]; 
```

**[2]**为了快速访问特定学生，这是 imo 更好的方法。任何数组都将涉及某种数组扫描以访问特定的详细信息对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:41:18.767

数组通常是存储项目列表（如学生）的更自然的方式。但也有取舍。作为结构化（使用对象），您可以在恒定时间内按姓名访问任何学生：

```
sampleData.studentsList.Student1 
```

使用数组进行结构化如下所示：

```
var sampleData = {
    "studentsList": [
        {
            "marks": "123",
            "grade": "B"
        },
        {
            "marks": "144",
            "grade": "A"
        }
    ]
};​ 
```

像这样访问`nth`学生：

```
sampleData.studentsList[n] 
```

如果所需学生的索引未知，则访问特定学生（基于其详细信息）是`O(n)`（因为您需要迭代整个数组以在最坏的情况下找到正确的项目）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T17:13:56.637

**[1]**给定一个存储在 javascript 变量中的学生姓名，我们称之为它`studentName`，您可以像这样访问该学生的详细信息：

```
var studentData = sampleData.studentsList[studentName]; 
```

**[2]**在数组或对象之间进行选择时，最重要的决定因素是：key 是什么意思？如果键不相关或只是数字，它应该是一个数组。在这种情况下，关键是学生的名字，所以有一个对象绝对是更好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T16:37:57.060

编辑...我刚刚意识到您只是在适当地构建对象（而不是将其作为字符串）...所以实际上您可以跳过解析并直接通过..

```
sampleData.studentsList.Student1 
```

但是，如果您拥有该对象的确切形状，但作为字符串，您需要先 JSON.parse 它像这样......

```
 myObj = JSON.parse(yourString);

    myObj.studentsList.Student1 
```

# node.js - 为什么通过 pdftk 将多页 PDF 重复突发到单个页面会更改这些页面的 md5 校验和？

> ID：11417869
> 
> 赞同：3
> 
> 时间：2012-07-10T16:36:20.650
> 
> 标签：node.js, pdf, md5, checksum, pdftk

我正在使用[pdftk](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)并进行一些测试，发现将多页 PDF 文件分解为单独的单页 PDF 文件，然后为每个单页 PDF 生成一个 md5 哈希校验和（数字指纹），每次我都会产生不同的哈希做爆发。这就是结果，即使它是完全相同的文件而没有任何更改。

我的测试过程是：

1.  解压 test.pdf（包含 10 页的简单纯文本 PDF）
2.  使用 pdftk，将 test.pdf 爆裂（拆分）成 10 个单独的 PDF 文件（每个文件 1 页）
3.  为 10 个单页 PDF 文件中的每一个生成 md5 哈希校验和
4.  记录 10 个哈希校验和
5.  重复步骤 1-4
6.  请注意，所有哈希值都不同

*旁注：*解压缩后在 PDF 上生成校验和会在重复时产生完全相同的校验和。

我在这个练习中使用了[node.js](http://nodejs.org/)及其[加密](http://nodejs.org/api/crypto.html)模块。

我的问题是：为什么校验和在重复时会有所不同？我认为生成的 10 个单页文件与上次创建它们时完全相同。他们的父文档（以及各个页面本身）根本没有改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:13:29.933

根据 PDF 规范，每当 PDF 创建者写出修改后的 PDF 时，它应该更新元数据条目数组中命名`/ModDate`的键。`/Info`

此外，它（可能）会将 PDF 的 XMP 元数据结构中的文档 UUID 更改为新 ID。

* * *

因此，当您想使用 MD5（或任何类似方法）检查​​ PDF 生成过程中的“稳定结果”（考虑单元测试或其他）时，您应该在应用 MD5 求和之前执行以下两件事之一：

*   要么“规范化”您的 PDF 输出以始终将相同的 ModDate 和 UUID 写入文件（如果您的 PDF 生成工具允许您以这种方式进行调整），
*   或对文件运行编辑（您可以使用`sed`）来规范化文件的`/ModDate`（并且可能还有`/CreationDate`）和 UUID 条目。

* * *

**更新：**由于您似乎`pdftk`已经熟悉，您应该能够转储元数据文本文件（如 Ezra 所示）：

```
pdftk in.pdf dump_data output data.txt 
```

或（如果您需要）：

```
pdftk in.pdf dump_data_utf8 output data.utf8.txt 
```

然后编辑 data*.txt 文件以使其适合您的需求：将 PDF UUID（`pdftk`调用它们`PdfID0`/ `PdfID1`）更改为易于识别的值（`00000...`和`fffff...`），将日期更改为另一个易于识别的日期。然后使用这些元数据值更新您的文件：

```
pdftk in.pdf update_info data.txt output in-updated.pdf \
      &&  mv in-updated.pdf in.pdf 
```

或者

```
pdftk in.pdf update_info data.utf8.txt output in-updated.utf8.pdf \
      &&  mv in-updated.utf8.pdf in.pdf 
```

**然后才**运行您的 Md5 校验和，看看它是否有效（或需要更多微调）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T17:15:05.967

glib 的答案是校验和，因为数据不同。

我证实了这一点的实验：

首先，我爆破一个pdf并移动文件：

```
$pdftk Michael-Jordan-I-Cant-Accept-Not-Trying.pdf burst
$md5sum pg_0001.pdf 
150ef33eec73cd13c957194ebead0e93  pg_0001.pdf
$mv pg_0001.pdf 150ef33eec73cd13c957194ebead0e93 
```

接下来，我再次爆破相同的 pdf，再次移动文件：

```
$pdftk Michael-Jordan-I-Cant-Accept-Not-Trying.pdf burst
$md5sum pg_0001.pdf
49c7c885bc516856f4316452029e0626  pg_0001.pdf
$mv pg_0001.pdf 49c7c885bc516856f4316452029e0626 
```

这证实了您的发现；总和是不同的。经检查，字节 91411-92163 有所不同。

我的直觉告诉我这是日期元数据，因此我确认了这一点：

```
$pdftk 150ef33eec73cd13c957194ebead0e93 dump_data output 150.txt
$pdftk 49c7c885bc516856f4316452029e0626 dump_data output 49c.txt
$diff -u 150.txt 49c.txt 
--- 150.txt 2012-07-10 11:08:02.371119999 -0600
+++ 49c.txt 2012-07-10 11:08:18.891201910 -0600
@@ -3,9 +3,9 @@
 InfoKey: Producer
 InfoValue: itext-paulo-155 (itextpdf.sf.net-lowagie.com)
 InfoKey: ModDate
-InfoValue: D:20120710105934-06'00'
+InfoValue: D:20120710110010-06'00'
 InfoKey: CreationDate
-InfoValue: D:20120710105934-06'00'
-PdfID0: 51671a1a6c4f5e6bb81b88fc7efd14d0
-PdfID1: 82fd646061863972216ccf8a32cf3c7b
+InfoValue: D:20120710110010-06'00'
+PdfID0: 844f34f87275b9184ebe10b82d3397c9
+PdfID1: 8f555a30216e37d77abaf03a4217b2a
 NumberOfPages: 1 
```

* * *

我不确定你的问题是什么，但如果你真的需要匹配总和，两种明显的方法是：

1.  将日期设置为相同。
2.  仅使用前 N 个字节来计算总和；省略有问题的元数据。

# java - 如何从 Android 向 Web 服务发布参数？

> ID：11417888
> 
> 赞同：1
> 
> 时间：2012-07-10T16:37:21.150
> 
> 标签：java, android, xml, web-services

我可以使用 HTTP 发布和响应来检索 xml 文件。但是，现在我需要发布一个`String`参数以及 URL。以下代码告诉我 HTTP 状态代码不正确（即 500），因此它返回`null`，然后我得到一个`NullPointerException`.

```
package com.JobsWebService;
import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.protocol.HTTP;
import org.apache.http.util.EntityUtils;
import org.simpleframework.xml.Serializer;
import org.simpleframework.xml.core.Persister;
import android.util.Log;

public class XmlConnection {

private static final String url =         "http://www.accuservlite.com/AccumobileWS/TestService.asmx/RyanMB_GetJobs";
private DefaultHttpClient client = new DefaultHttpClient();
String param= "Johnny";

public List<NewJob> RyanMB_GetJobs() {
    try {
        String xmlData = retrieve(url);
        Serializer serializer = new Persister();
        Reader reader = new StringReader(xmlData);
        ArrayOfNewJob testService = serializer.read(ArrayOfNewJob.class,
                reader, false);
        Log.i("gary", "Worked");
        return testService.NewJob;

    } catch (Exception e) {
        Log.i("gary", e.toString());
    }
    return null;
}

// method retrieve
public String retrieve(String url) throws UnsupportedEncodingException {

    List<NameValuePair> qparams = new ArrayList<NameValuePair>();
    qparams.add(new BasicNameValuePair("Johnny", "Johhny"));

    UrlEncodedFormEntity postEntity = new UrlEncodedFormEntity(qparams,
            HTTP.UTF_8);

    HttpPost getRequest = new HttpPost(url);

    getRequest.setEntity(postEntity);

    try {

        HttpResponse getResponse = client.execute(getRequest);

        final int statusCode = getResponse.getStatusLine().getStatusCode();

        if (statusCode != HttpStatus.SC_OK) {

            return null;
        }

        HttpEntity getResponseEntity = getResponse.getEntity();

        if (getResponseEntity != null) {
            return EntityUtils.toString(getResponseEntity);
        }

    } catch (IOException e) {
        Log.i("gary", "Error for URL " + url, e);
        getRequest.abort();
    }
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:26:37.633

要在您的 HttpPost 对象中添加 POST 参数，您将使用 NameValuPair 列表：

```
List<NameValuePair> parameters = new ArrayList<NameValuePair>();
parameters.add(new BasicNameValuePair("name_param1", "value_param1")); 
```

并将此参数添加到您的 HttpPost ：

```
UrlEncodedFormEntity formEntity  = new UrlEncodedFormEntity(parameters);
httpPost.setEntity(formEntity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:23:15.657

500 是一个服务器错误，我觉得这段代码没有明显错误。您是否针对发布请求测试了服务器？当您给它一个名称值对时，服务器是否需要一个字符串？

您可以尝试使用[Wfetch](http://www.microsoft.com/en-us/download/details.aspx?id=21625 "取回")进行测试。

# c++ - 使用 Linux、C++、Kdevelop、gcc、64 位应用程序升级问题

> ID：11417901
> 
> 赞同：0
> 
> 时间：2012-07-10T16:37:57.610
> 
> 标签：c++, linux, gcc, casting

在工作中，我一直在尝试在计算机上安装新版本的 Red Hat Linux，更重要的是，运行一段自定义代码。当我进行此升级时，我注意到以下错误：

> 从 'void*' 转换为 'int' 失去精度

此外，我注意到基于库的一系列其他错误，这些错误强制使用 32 位地址。它们似乎是从本质上将类型转换为自定义库 32 位值的结果。

底线是这样的。我相信编译器已将 int 的默认大小从 32 位更改为 64 位。我试图弄清楚是否是这种情况，而无需编写一个简单的程序来确定整数的大小。另外，有没有办法强制大小回到 32 位，至少作为概念证明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:49:22.803

如果你在 x86_64 盒子上，`int`仍然是 4 个字节。如果是 8，编译器不会告诉你

```
cast from 'void*' to 'int' loses precision 
```

因为不会丢失任何精度。它告诉你的是，你试图将一个 8 字节的指针塞进一个 4 字节的 int，这显然会丢失一些信息。

还有，这只是一个旁注，写这个有多难？

```
#include <ostream>
#include <iostream>

#define sz(t) std::cout << sizeof(t) << '\n'
int
main(void)
{
  sz(char);
  sz(int);
  sz(long);
  sz(void*);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:39:41.107

使用`-m32` [`gcc`](http://linux.die.net/man/1/gcc)开关。

尝试编译这个：

```
#include <stdio.h>
int main(){
    long z;
    printf("size is %ld\n", sizeof(z));
    return 0;
} 
```

有了`-m32`你应该得到`4`，有了`-m64`你应该得到`8`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T16:22:14.663

经过大量的努力，我能够弄清楚以下内容。

1.  由于寻址空间的技巧，我之前的代码需要从内存中的指针获取 32 位自定义整数。底线是，Redhat 4 中的编译器允许这样做，但 Redhat 5 中不允许。解决方案是先将其转换为 64 位标准整数，然后再转换为 32 位，就像这样`(int32)(int64)some_pointer_value`。我找不到更好的解决方案，但这似乎有效。
2.  有一些带有长案例的 switch 语句。新的编译器似乎不喜欢那样。快速重新排列代码似乎可以解决它。
3.  intptr_t 技巧效果很好。
4.  有一些类函数被声明为`class_name::function1(){...}`. 我想我一定是从另一种编程语言中养成了这个习惯。`class_name::`不得不去，但一旦去了，代码就编译了。

一旦我完成了所有这些事情，那么代码就编译好了。此外，它在 Redhat 4 中的工作原理也是一样的。唷！

# .net - VB6 互操作性和 VB.NET

> ID：11417902
> 
> 赞同：0
> 
> 时间：2012-07-10T16:38:07.563
> 
> 标签：.net, vb.net, gac

我已经使用 REGASM 在服务器（服务器 1）上注册了一个类型库。类型库允许我在 VB6 应用程序中使用 VB.NET DLL 中的代码。

理想情况下，VB.NET DLL 需要访问另一个服务器（服务器 2）上另一个 VB.NET 项目中的代码。我在 Visual Studio 中添加了 VB.NET 项目 2 的 DLL 作为参考，该项目 1 已打开。这工作正常。

如果 VB6 引用了类型库以使用 VB.NET 代码，那么 VB.NET 项目是否可以使用在同一台 PC 上注册的全局程序集缓存中注册的另一个 VB.NET 应用程序中的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:40:47.417

> 如果 VB6 引用了类型库以使用 VB.NET 代码，那么 VB.NET 项目是否可以使用在同一台 PC 上注册的全局程序集缓存中注册的另一个 VB.NET 应用程序中的代码？

是的，这应该就像在任何其他程序中使用 VB.Net 程序集一样工作。通过 COM 使用的 .NET 程序集使用其他程序集是完全可以接受的——事实上，它们总是这样做，因为框架本身就是系统上的其他程序集。

# iphone - UI 何时准备好开始为 UIActivityIndi catorView 设置动画？

> ID：11417904
> 
> 赞同：2
> 
> 时间：2012-07-10T16:38:10.670
> 
> 标签：iphone, cocoa-touch

我尝试在我的应用程序的开头启动一个 UIActivityIndi​​catorView，但它没有动画！

我的根视图控制器中的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIActivityIndicatorView *v = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

    [self.view addSubview:v];
    [v startAnimating];
} 
```

不旋转。我试过`viewWillAppear`/ `viewDidAppear`，不是更好。

如果我这样做`performSelector:withObject:afterDelay:`，当我达到 4 或 5 秒的延迟时，它现在可以工作了......就像 UIKit 中没有初始化的东西一样。

有人有想法吗？

**更新：** 我想等多久就等多久——>它永远不会开始旋转（所以没有什么会在 MainThread 上花费时间并阻止这种旋转）。我实际上从我的 AppDelegate`didFinishLaunchingWithOptions`方法中删除了几乎所有内容。不再需要 RestKit 初始化，不再需要 PushNotification 注册。只有 ViewController 初始化。而那些 ViewController 什么也不做。

但我能做的是：在界面上添加一个什么都不做的虚拟按钮（没有 IBAction 没有 IBOutlet 什么都没有），然后在 iPhone 上触摸它。它转到突出显示，然后正常。但只要我触摸它（甚至在我离开屏幕表面之前），纺车就开始旋转！

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:45:47.483

刚刚尝试了您的代码，它立即为我制作动画。您是否在应用程序打开后立即同步加载任何内容？这可能会导致延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:46:07.497

我认为您正在使用此代码，因为当您的应用程序加载时，它会执行一些需要一段时间的操作。如果它在主线程上执行此操作（除非您另有指定），那么您的用户界面在执行该任务时将变得无响应，包括冻结所有动画。要将任务推送到另一个线程，您必须使用 Apple 的 Grand Central Dispatch (GCD)。为此，请使用以下内容：

```
dispatch_queue_t myLongTaskQueue = dispatch_queue_create("AnyIdentifyingText", NULL);
dispatch_async(myLongTaskQueue, ^{

     //perform the long task

}); 
```

然后，如果在长任务中的某个地方您必须更新 UI，请确保您在主线程中执行此操作，方法是使用：

```
dispatch_async(dispatch_get_main_queue(), ^{

    //perform UI update

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:07:42.607

找到了！跟踪此问题 1.5 天后...

我的 MainViewController 嵌入在 NavigationController 中，在其`viewDidLoad`.

碰巧`viewDidLoad`我在 NavigationController 上推送了一些启动画面，它以某种方式与视图混淆。

我在我的 SplashViewController`doFlip`方法中使用（经过一些延迟后自动调用，~2 秒）：

```
[UIView transitionWithView:navController.view
                  duration:0.75
                   options:UIViewAnimationOptionCurveEaseInOut|UIViewAnimationOptionTransitionFlipFromLeft
                animations:^{ [nc popViewControllerAnimated:NO]; }
                completion:nil]; 
```

现在使用

```
[UIView transitionFromView:splashVC.view
                    toView:mainVC.view
                  duration:0.75 
                   options:UIViewAnimationOptionCurveEaseInOut|UIViewAnimationOptionTransitionFlipFromLeft
                completion:nil];

[navController popViewControllerAnimated:NO]; 
```

抱歉“太具体”了，感谢大家的帮助。

# c# - C# MySQLDataReader 替换结果

> ID：11417908
> 
> 赞同：1
> 
> 时间：2012-07-10T16:38:38.080
> 
> 标签：c#, mysql, select, replace

我需要在我的 MySQL 结果“，”中替换“。”

```
string.Replace(",", "."); 
```

当前代码：

```
mysql.Connection.Open();

        mysql.Command.CommandText = query;
        mysql.Reader = mysql.Command.ExecuteReader();

        string new_ = String.Empty;

        while (mysql.Reader.Read())
        {
            /*
            foreach(var field in mysql.Reader)
            {
               // what i do here?
            }
            */

            // here i have code to add to TextBox value
        } 
```

我不知道如何替换...我尝试了一些类似 field = string 的替换，但 Visual Studio 无法使用此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:43:39.997

尝试

```
result = mystring.Replace(',', '.'); 
```

其中 mystring 是您要编辑的任何字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:45:10.607

你可能想把所有被替换的字符串存储在某个地方，

所以你可以列出一个清单：

```
List<string> replacedStrings = new List<string>();
string replace = "";

     while (mysql.Reader.Read())
    {

        foreach(var field in mysql.Reader)
        {
          replace = field.replace(',','.');
          replacedStrings.add(replace); //<-- add each replaced string to the list
        }
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:49:42.217

您可以在 select 语句中直接进行替换，如下所示：

```
 Select REPLACE('first.second.third', '.', ',') 
```

上面的选择将产生“第一，第二，第三”。另一个例子是：

```
 Select REPLACE(MyColumnWithCommasInIt, '.', ',') From MyTable 
```

上面的选择将产生来自 MyTable.MyColumnWithCommasInIt 的值，其中句点替换为逗号。

[有关REPLACE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_replace)的 MySQL 参考资料中的更多信息。

# printing - awk 从匹配的段落中有效地打印匹配的行

> ID：11417909
> 
> 赞同：2
> 
> 时间：2012-07-10T16:38:50.280
> 
> 标签：printing, awk, line, match, paragraph

我想编写一个高效的 awk 脚本，该脚本将采用类似于下面显示的摘录的文件并从每个匹配的记录中打印某一行（例如，以“时间（UTC）：”开头的行）。我相信有比我过去所做的更好的方法来做到这一点。

示例文件（对不起，我不知道如何在代码框中放置空行。它们由“BLANK LINE”表示）：

```
Processor: Some_Proc
Capsule abortion no 32
Time (UTC): Fri Jun 15 06:25:10 2012
CapsuleId: 1704167
CapsuleName: SomeAppProc
Reason: Assertion "Reason1"  
BLANK LINE
Processor: Some_Proc
Capsule abortion no 33
Time (UTC): Fri Jun 15 06:25:10 2012
CapsuleId: 1704168
CapsuleName: SomeAppProc
Reason: Assertion "Reason2"  
BLANK LINE
Processor: Some_Proc
Capsule abortion no 34
Time (UTC): Fri Jun 15 06:25:10 2012
CapsuleId: 1704168
CapsuleName: SomeAppProc
Reason: Assertion "Reason1" 
```

以前的代码示例（对不起，我不知道如何在这个论坛中保留缩进我尝试了 8 个空格，但是没有用）

```
BEGIN {
    RS=""  #Each record is a "paragraph"
    FS="\n" #Each field is a line
}

/Reason1/ {
    # print $3  would work if it always shows up on the third line
    # but the following for loop should find it if it's on a different line
    for (i=1;i<=NF;i++) {
        if ($i ~ /^Time.*/) {
            print $i
            next
        }
    }
} 
```

如果它并不总是以相同的顺序出现，是否有更有效的方法来打印该行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:38:12.080

这对我来说似乎是一个很好的解决方案。我会使用相同的方法来解决这个问题。我会使用`break`而不是`next`因为您想在找到该行后停止循环。该`next`指令没有什么意义，因为它执行循环的下一个周期，如果它不存在则相同。

```
for (i=1;i<=NF;i++) {
    if ($i ~ /^Time.*/) {
        print $i
        break
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T22:51:29.150

像这样的东西怎么样？：

```
BEGIN { reset(); }
END { reset(); }
$0 == "" { reset(); }
/^Reason:/ && $3 == "\"Reason1\"" { found = 1; }
/^Time \(UTC\):/ { time = $0; }

function reset() {
  if (found) { print time; }
  found = 0;
  time = "(unknown)";
} 
```

然后只需使用换行符的默认记录分隔符。这样做是在读取时间和原因字段时记下它们，然后在每个匹配记录的末尾打印出时间。

# jquery - 使用地理编码地址更新 jQuery 数据表单元格

> ID：11417912
> 
> 赞同：1
> 
> 时间：2012-07-10T16:39:18.343
> 
> 标签：jquery, datatables

我有一个显示我的数据的 jquery 数据表（见下文）。您会注意到最后一列是地址，而行数据只是表示正在加载。

![桌子](../Images/cccbef4ff8e5c30a2e838f4f7259b2cf.png)

我想使用数据中的经度和纬度从谷歌地图 api 获取地址。

我知道获取地址可能需要一些时间，如果返回 3000 个结果将需要很长时间，这就是为什么我没有通过数据中的预地理编码地址。

显示表格数据后，我可以开始对每一行的纬度/经度进行地理编码，并在每一行完成时更新地址列吗？

我也在使用谷歌地图的 GMAP3 jQuery 插件，所以我可以得到这样的地址：

```
 // get address
        $("#map").gmap3({
          action: 'getAddress',
          latLng: [lati, longi],
          callback: function (results) {
            content = results && results[1] ? results && results[1].formatted_address : 'No Address';
          } // end callback

        }); 
```

**更新**

几乎完成了 :) 这些类被添加到 lat、long 和地址 ok，我正在将地理编码地址接收到控制台中。我需要做的就是将地址放入表中的正确行。我将如何做到这一点？

我的代码 var historyArray = window.opener.historyArray;

```
 $(document).ready(function() {
            //$('#dynamic').html( '<table cellpadding="0" cellspacing="0" border="0" class="display" id="report"></table>' );
            $('#report').dataTable( {
                "aaData": historyArray,
                "aoColumns": [
                    { "mDataProp": "User" },
                    { "mDataProp": "Timestamp" },
                    { "mDataProp": "Latitude" },
                    { "mDataProp": "Longitude" },
                    { "mDataProp": "Address" }
                ],
                "iDisplayLength": 25,
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "sDom": '<"H"Tfr>t<"F"ip>',
                "oTableTools": {
                            "sSwfPath": "swf/copy_csv_xls_pdf.swf",
                            "aButtons": ["copy", "csv", "xls", "pdf"]
                                      },
                "fnInitComplete": function () {
                    getAdresses();
                }
            } );    

$("#report td:nth-child(3)").addClass("lat");
$("#report td:nth-child(4)").addClass("lng");
$("#report td:nth-child(5)").addClass("addi");
} );

 function getAdresses() {
   $.each(historyArray, function (index,data) {
    // get address
    var map = window.opener.document.getElementById('dispatcher');
    $(map).gmap3({
      action: 'getAddress',
      latLng: [data.Latitude, data.Longitude],
      callback: function (results) {
        content = results && results[1] ? results && results[1].formatted_address : 'No Address';
        console.log(content);
      } // end callback

    });
   });
 } 
```

**更新 2**

嗨，更新的代码。因为我添加了 $(this).html(content); 在 gmap3 的回调中，它没有更新“addi”单元格，我该如何解决？

```
 function getAdresses() {
   $(".addi").each(function () {
     var lat = $(this).siblings(".lat").html().toString();
     var lng = $(this).siblings(".lng").html().toString();
      // get address
      $(map).gmap3({
        action: 'getAddress',
        latLng: [lat, lng],
        callback: function (results) {
          content = results && results[1] ? results && results[1].formatted_address : 'No Address';
          $(this).html(content);
        } // end callback

      });
   });
 } 
```

**最终更新** 添加到善意给出的解决方案。我发现当我将数据导出到 CSV、Excel 等时，地址数据没有更新。

我将代码修改为此。

```
 myTable = $('#report').dataTable({
     "aaData": historyArray,
     "aoColumns": [{
       "mDataProp": "User"
     }, {
       "mDataProp": "Timestamp"
     }, {
       "mDataProp": "Latitude"
     }, {
       "mDataProp": "Longitude"
     }, {
       "mDataProp": "Address"
     }],
     "bPaginate": false,
     "bJQueryUI": true,
     "sPaginationType": "full_numbers",
     "sDom": '<"H"Tfr>t<"F"ip>',
     "oTableTools": {
       "sSwfPath": "swf/copy_csv_xls_pdf.swf",
       "aButtons": ["copy", "csv", "xls", "pdf"]
     },
     "fnInitComplete": function () {
       addClasses();
     }
   });
   window.setTimeout(function () {
     getAdresses();
   }, 1000);
 });

 function addClasses() {
   $("#report td:nth-child(3)").addClass("lat");
   $("#report td:nth-child(4)").addClass("lng");
   $("#report td:nth-child(5)").addClass("addi");
 }

 function getAdresses() {
   $(".addi").each(function () {
     var lat = $(this).siblings(".lat").html().toString();
     var lng = $(this).siblings(".lng").html().toString();
     var addi = $(this);
     $(addi).html("Reverse geocoding..");
     var aPos = myTable.fnGetPosition(this);

     // get address
     $('#hidden').gmap3({
       action: 'getAddress',
       latLng: [lat, lng],
       callback: function (results) {
         content = results && results[1] ? results && results[1].formatted_address : 'No Address';
         myTable.fnUpdate(content, aPos[0], 4);
       } // end callback

     });
   });
 } 
```

现在数据真正更新了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:26:04.813

如果我理解正确：

您可以通过 jQuery 向最后一列添加一个类，如下所示：

`$("#table td:nth-child(5)").addClass("someClass");`

然后您可以创建一个在表初始化*后运行的函数：*

```
//Part of the datatable initialization
"fnInitComplete": function () {
    myAwesomeFunction();
} 
```

在该函数中，您可以`.each()`基于类执行并获取兄弟姐妹（纬度和经度）将它们传递给 api 并`.html()`处理结果以替换加载文本。我希望这是有道理的。如果不让我知道:)

//编辑//

抢兄弟姐妹：先给他们上课

`$("#table td:nth-child(3)").addClass("lat");`

`$("#table td:nth-child(4)").addClass("long");`

请记住，您必须在初始化数据表后应用所有这些样式。

那么你就可以：

```
var lat = $(this).siblings(".lat").html().toString();
var long = $(this).siblings(".long").html().toString(); 
```

//////////////编辑2 //////////////

首先移动这段代码：

```
$("#report td:nth-child(3)").addClass("lat");
$("#report td:nth-child(4)").addClass("lng");
$("#report td:nth-child(5)").addClass("addi"); 
```

对于这样的功能：

```
$("#report").on("draw", function() {
   addClasses();
});

function addClasses() {
    $("#report td:nth-child(3)").addClass("lat");
    $("#report td:nth-child(4)").addClass("lng");
    $("#report td:nth-child(5)").addClass("addi");
} 
```

并将`addClasses()`功能添加到`fnInitcomplete` *之前* `getAddresses()`

这样，如果您更改页面或排序或对表格进行其他更改，则将应用/重新应用这些类。

我不确定地理数据的 API 是如何工作的，但为了抓住长拉特我会做这样的事情：

```
 $(".addi").each(function () {
        var lat = $(this).siblings(".lat").html().toString();
        var lng = $(this).siblings(".lng").html().toString();
        // Now pass these parameters to the geocode function and store the result in some var
        //In this case lets call it result
        //Now just replace the loading with the result:
        $(this).html(result);
    }); 
```

将上面的代码放入`getAddresses()`函数中，它应该会给你结果。

让我知道这是否足够以及是否可以正常工作；）

# jquery - 如何在最后一个 li 标签之前选择 li 标签

> ID：11417913
> 
> 赞同：0
> 
> 时间：2012-07-10T16:39:22.503
> 
> 标签：jquery, list

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
    </head>

<body>

    <ul>
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>

    <script>$("ul li:nth-child(3)").append("<span> - Selected!</span>");</script>

</body>

</html> 
```

我想选择 li 数字 3 和 with`:nth-child(3)`但问题是 li 标签是随机的，有时它可以是 6 或 9 或 20 .. 那么如何获得最后一个，然后使用 prev() ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T16:41:43.073

`.eq`接受从末尾开始计数的负索引。请注意，这`.eq`取决于*set*，而不是实际的子索引。但是，在您的情况下，该集合仅包含 one 的孩子`ul`，因此没有什么区别。

```
$("ul li").eq(-2);  // -1 is last, -2 is one before last 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:41:51.230

使用`:nth-last-child`选择器：

```
$("ul li:nth-last-child(2)") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:41:02.073

试试这个：

```
$("ul li:last").prev("li").append("<span> - Selected!</span>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:41:04.750

使用`.last()`方法或`:last`选择器：

```
$('ul li:last').append("whatever"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T16:40:56.420

请试试这个：

```
$('ul li:last').prev(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T16:46:09.310

不是最优雅的方式，但有时拥有选定元素的列表很有用：

```
var liList = $('#testUl li');
var value = $(liList[liList.length-2]).text(); 
```

这里的例子：http: [//jsfiddle.net/sx6sQ/](http://jsfiddle.net/sx6sQ/)

# android - Eclipse 中的 Android 开发 - 按钮不显示引用的文本

> ID：11417920
> 
> 赞同：0
> 
> 时间：2012-07-10T16:39:44.830
> 
> 标签：android

我创建了两个按钮和一个文本框。文本框显示我引用的文本，但按钮不显示引用的文本。相反，它们显示“按钮”。此外，当我在模拟器上运行应用程序时，应用程序会停止。请帮忙！

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtDisplay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/Disp"
        tools:context=".myMain"
        android:textSize= "45dp"
         />

    <button
        android:id="@+id/bAdd"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="@string/hello_world"
        android:textSize="45dp" />

    <button
        android:layout_gravity="center"
        android:layout_width = "wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world"
        android:id="@+id/bSub"
        android:textSize = "45dp"/>

</LinearLayout> 
```

这是 Strings.xml

```
<resources> 
<string name="app_name">Basictut</string> 
<string name="hello_world">Hello world!</string>
 <string name="menu_settings">Settings</string>
 <string name="title_activity_my_main">myMain</string>
 <string name="Disp">Your Total Is 0</string>
 <string name="add">Add one</string>
 <string name="sub">Subtract one</string>
 </resources> 
```

Java代码是：

```
package com.example.basictut;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class myMain extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_my_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
         getMenuInflater().inflate(R.menu.activity_my_main, menu);
         return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:04:20.757

xml 区分大小写，我认为您应该编写`Button`而不是`button`.

# python - PyCharm 无法解析 PyGObject 3.0，但代码运行良好

> ID：11417921
> 
> 赞同：28
> 
> 时间：2012-07-10T16:39:58.300
> 
> 标签：python, ubuntu, python-3.x, pycharm, pygobject

我在 Ubuntu 11.10 上使用 PyCharm 2.5，尝试在 Python 3.2.2 上使用 PyGObject 3.0 开发应用程序。我已经安装了 Ubuntu 包 python3-gobject，并且当我运行我的代码时，它完全按预期工作。

但是，PyCharm 似乎找不到任何 PyGObject 模块。它说`Unresolved refrence: 'Gtk'`当我在导入语句中将鼠标悬停在 Gtk 上时，当然自动完成功能都不起作用。

这是我的代码：

```
#!/usr/bin/env python3

from gi.repository import Gtk

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

我什至尝试过创建一个 python 虚拟环境，然后将 PyGObject 从源代码安装到其中，然后甚至尝试将所有 .py 文件的符号链接放入`site-packages/gi/overrides`to 中`site-packages/gi/repository`，但都没有成功。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2015-11-11T08:17:05.787

将文本光标定位在红线`Gtk`内：

```
from gi.repository import Gtk 
```

点击`Alt`+`Enter`并选择“为二进制模块生成存根”

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-10T17:37:43.467

在 Gtk+ 3 中，Python 与二进制模块的绑定是使用`*.typelib`数据库动态生成的。用于访问所有模块的动态导入器位于`gi.repository`. PyCharm 无法使用其代码洞察力检测这些模块，因为它们需要特殊处理。

我已经为此问题提交了功能请求：[PY-6932](http://youtrack.jetbrains.com/issue/PY-6932)。随意投票。

# afnetworking - 如何执行一批相互依赖的 AFNetworking 请求

> ID：11417924
> 
> 赞同：3
> 
> 时间：2012-07-10T16:40:22.740
> 
> 标签：afnetworking

我需要执行一系列按顺序运行的服务器调用，并且只有在所有先前的请求都成功的情况下才能执行一个请求。

`AFHTTPRequestOperation`所以，我的想法是为每个请求创建一个并`[myAFHTTPClient enqueueBatchOfHTTPRequestOperations:]`用来触发它们。

我可以通过调用使它们按顺序运行
`[myAFHTTPClient.operationQueue setMaxConcurrentOperationCount:1]`

但是我怎样才能确保只有在先前的操作成功时才​​能运行剩余的操作？

我尝试`completionBlock`为每个调用`[myAFHTTPClient cancelAllOperations]`的操作创建一个，以防操作失败，但是队列中的完成块和下一个操作同时运行，因此下一个请求在被取消之前可能已经发送到服务器。我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-04T12:37:50.237

由于`AFHTTPRequestOperations`只是标准`NSOperations`，编写了一个示例项目并想出了如何解决这个问题：

如果`NSOperationQueue`'s设置`maxConcurrentOperationCount`为 1，则队列中的an和下一个会同时运行。`NSOperation``completionBlock``NSOperation`

但是，如果 every`NSOperation`通过调用 链接到其前一个操作`addDependency:`，则操作的执行将等待前一个操作`completionBlock`完成。

因此，`NSOperations`通过将所有操作链接在一起`addDependency:`，如果操作失败，请取消当前操作的完成块中的剩余操作。

（另请参阅[NSOperations 和它们的 completionBlocks 是否同时运行？](https://stackoverflow.com/questions/11413156/do-nsoperations-and-their-completionblocks-run-concurrently)）

# c# - 在 ssd 上创建 trie。如何管理对象移动到其他位置？

> ID：11417927
> 
> 赞同：1
> 
> 时间：2012-07-10T16:40:25.130
> 
> 标签：c#, .net, trie

我需要在 ssd 上创建一个[trie 。](http://en.wikipedia.org/wiki/Trie)我不能使用太多 RAM，因为 trie 很大，但 4 GB RAM 没问题。

目前我考虑通过以下方式进行操作：

*   使用一个内存映射文件
*   使用 protobuf 序列化对象，使用文件位置和长度更改指向其他对象的指针

现在我正在寻找可以提供帮助的工具。当对象（节点）变大时我会遇到问题。我需要在文件中为该对象找到一个新位置，更改指向该对象的所有链接。然后我的文件中留下了一个空白。然后我需要压缩我的树并更改所有对象的所有位置以缩小一些差距。在每个对象之后留出一些空间会导致非常大的空间需求。

你知道图书馆或者有一些提示来解决这个问题或者可以帮助编程这一切吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:15:40.397

**编辑**：这是用于内存映射文件的方法，我真的很喜欢你的直觉。

**Edit2**：每次我说“点”或“指针”时，我实际上是指从文件开头开始的从零开始的偏移量。由于写入的数据永远不会移动，因此节点的位置充当它们的全局标识符。

一个节点不应该真的变大。我这样做的方式是让节点像：

*   节点持有的字符（如果需要，UTF-8 编码）
*   一个包含 8 个项的数组，其中包含指向其子项的指针。这是静态尺寸的`NULL`（或 0），指定不再有子级。这个列表永远不会变短，只会变大。
*   指向一块内存的指针，该内存包含另一个子指针数组，也是静态尺寸的。即使您实际上并不需要额外的空间，您也总是拥有这个，您可以在`NULL`其中写入。
    *   如果指向实际有效内存，则在列表之后，如果需要，您将有另一个指向额外列表的指针，因此您可以走多远。或者，第二个列表可以大到足以容纳所有字符。

作为替代方案，从一开始就为所有字符静态分配足够的内存。但是，这可能会变得太大太快，具体取决于树的稀疏程度。

无论哪种方式，请注意，通过这种方式，您的实际节点大小*永远不会增加*，它具有静态长度。您可以根据需要在文件末尾添加额外的节点或额外的列表块，并在开头保留一个根以指向其所有子节点，这样您就不必弄乱头部了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:15:42.507

我试图在这里为这个问题提供一个新的角度：你为什么不将 trie 节点存储在 SQLite 之类的数据库中？SQLite 速度快、测试良好且功能丰富。它可能比你做得更好。

关系数据库并不是真正用来存储树的，但它们可以。我想不出任何特定的查询问题可以通过编写自定义的磁盘数据结构来更好地解决。

# f# - 在 F# 中使用管道操作时出现意外的类型编译问题

> ID：11417929
> 
> 赞同：2
> 
> 时间：2012-07-10T16:40:46.343
> 
> 标签：f#, linqpad, seq

我正在尝试解析 XML 文件的目录，然后在存在给定节点的情况下选择特定属性的值。我无法理解以下 F# 导致的编译错误的原因。

```
open System
open System.IO
open System.Xml
open System.Xml.XPath
open System.Xml.Linq

let configRootDirectory = @"C:\dir"
let relativeProductDir = @"relDir"

let ExtractConfiguredCalculator (productConfigFile:string) = 
    let xmlNavigator = XPathDocument(productConfigFile).CreateNavigator()
    let node = xmlNavigator.SelectSingleNode(@"Product/SupportedRisk/Risk[@type='PV']") 
    node.GetAttribute("methodology", "")

let configFile = Directory.GetFiles(Path.Combine(configRootDirectory, relativeProductDir), @"*.xml")
                    |> Seq.cast<string>
                    |> Seq.iter(fun configFileName -> ExtractConfiguredCalculator(configFileName))                  
                    |> Seq.filter(fun configuredCalculatorNode -> configuredCalculatorNode != null)
                    |> Seq.iter(fun calculator -> Console.WriteLine(calculator)) 
```

上面的代码片段来自我在 LinqPad 中试验的代码。看到的错误信息如下。

```
This expression was expected to have type     unit     but here has type     string 
```

**更新** 试图获得更多 f#-ish。请建议是否可以改进。

```
let configFile = 
        Directory.GetFiles(Path.Combine(configRootDirectory, relativeProductDir), @"*.xml")    
        |> Seq.map(fun configFileName -> 
                    let xmlNavigator = XPathDocument(configFileName).CreateNavigator()
                    let node = xmlNavigator.SelectSingleNode(@"Product/SupportedRisk/Risk[@type='PV']")
                    match node with
                    | null -> "PV not configured"
                    | _ -> 
                        let attributeValue = node.GetAttribute("methodology", "")
                        match attributeValue with 
                        | null -> "Calculator not configured"
                        | _ -> attributeValue)
        |> Seq.iter (printfn "%s") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T16:52:47.497

您必须将第一个更改`Seq.iter`为`Seq.map`返回后续所需的序列`Seq.filter`。

不过我有几条评论：

*   `Seq.cast`是多余的，因为`Directory.GetFiles`返回`string []`。
*   当你有`Seq.map`和`Seq.filter`在一起时，你总是可以用`Seq.choose`.
*   `printfn`是一种比`Console.WriteLine`.

这是一个改进的版本：

```
let configFile = 
        Directory.GetFiles(Path.Combine(configRootDirectory, relativeProductDir), @"*.xml")    
        |> Seq.choose (fun configFileName -> 
                            let config = ExtractConfiguredCalculator(configFileName)
                            if config <> null then Some config else None)
        |> Seq.iter (printfn "%s") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T16:52:20.297

你的第一个电话`Seq.iter`应该是 to `Seq.map`。`ExtractConfiguredCalculator`返回`string`但`Seq.iter`期望函数返回`unit`.

# php - 如何在php中将值添加到父类中

> ID：11417932
> 
> 赞同：1
> 
> 时间：2012-07-10T16:40:51.913
> 
> 标签：php, oop, class, login

我有 2 个班级*，*`profile`还有`loginUser`一个`extends`-class 。 当用户登录并且一切都通过验证时，我会： `profile`

 *```
$login = new loginUser();
$login->set_status(true);
$login->set_accessClearance($get['access']);  //  integer fetched from database
$login->set_userName($get['user_name']);  //  string fetched from database 
```

**类 loginUser 扩展个人资料：**

```
class loginUser extends profile
{   
#   update status in profile
    public function set_status($bool){
        $this->loggedIn = $bool;
    }
//
#   set users access clearance into profile
    public function set_accessClearance($int){
        $this->accessClearance = $int;
    }
//
#   set username into profile
    public function set_userName($str){
    $this->userName = $str;
    }
//
} 
```

`loggedIn`,`accessClarance`和`userName`是-*类*`protected`中的变量。 `profile`

 *什么都不会写到我`profile`的*班级*。
我知道值是从数据库中获取的；当我`var_dump()`直接对其进行操作时，`$login`它会保存预期的数据……我做错了什么？

**班级简介**

```
class profile
{
    protected $loggedIn = false;
    protected $accessClearance = 0;  //  0 = denied
    protected $userName;

    public function get_status(){
        return $this->loggedIn;
    }   
    public function get_accessClearance(){
        return $this->accessClearance;
    }
    public function get_userName(){
        return $this->userName;
    }
} 
```

如果有帮助，我已经用我的班级完成了`profile`这个*：*

```
session_start();
    $_SESSION['profile'] = new profile(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:46:51.357

问题是实例和类之间的区别。您的 $_SESSION['profile'] 设置为配置文件的*实例*。profile 可以有很多实例（您的用户登录是另一个），并且一个中的数据不要修改其他中的数据。这是面向对象编程的基本范式。

您的问题的解决方案可以采用多种形式。您可以将 $_SESSION['profile'] 重新分配给新创建的用户，这可能是最简洁的方式。或者，您可以探索在 Profile 类上使用静态访问器和静态属性，这将保证范围内只有一个配置文件。

其他方法变得更高级，例如对象组合（也许配置文件*包含*用户等）、单例（`Profile::getProfile()`和`Profile::setProfile($logged_in_user)`）等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:46:13.780

您通过将[扩展](http://en.wikipedia.org/wiki/Single_responsibility_principle)`user object`为`authentication object`.

您应该通过使用[对象组合](http://en.wikipedia.org/wiki/Object_composition)来使用更好的会话和身份验证机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:45:55.480

也许我误解了你，但你可能不理解扩展类是如何工作的。当您声明`loginUser`为 的扩展时`profile`，这意味着 的任何实例都`loginUser`将具有配置文件的属性。但是，这并不意味着所有`loginUser`对象都会影响所有配置文件对象。类只是抽象定义，它们不是您可以在程序中使用的实际事物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:47:30.917

我认为，您误解了面向对象编程的目的。这些变量只写入子类，因为您创建了类 loginUser 的对象，而不是配置文件 - 继承起作用，而不是向上 + 如果您希望将这些变量写入配置文件类，您应该将它们写入配置文件类:)。或者只是在配置文件类中设置静态:)**

# node.js - Dust 与 Express 集成时遇到错误

> ID：11417934
> 
> 赞同：0
> 
> 时间：2012-07-10T16:40:55.833
> 
> 标签：node.js, express, integration, dust.js

我正在尝试将 Dust 与 node.js 集成。我使用 Express 作为 node.js 框架。我使用以下命令创建了一个快速项目。

```
 express test  
    npm install -d 
```

然后我使用命令安装了灰尘

```
 npm install dust 
```

然后我在 app.js 文件中将视图引擎从“jade”更改为“dust”。我在包含以下代码的视图文件夹中创建了两个名为 index.dust 的视图：

```
 {<title}Homepage{/title}
    {<page_id}index{/page_id}
    {<main}
        Homepage content goes here
    {/main} 
```

现在，当我在以下命令中使用节点监视器运行我的项目时：

```
 nodemon app.js 
```

它向我抛出以下错误：

500 错误：require.paths 已删除。请改用 node_modules 文件夹或 NODE_PATH 环境变量。

```
at Function.Module._compile.Object.defineProperty.get (module.js:386:11)
at Object. (C:\testExpress\node_modules\dust\lib\server.js:6:8)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.require (module.js:362:17)
at require (module.js:378:17)
at Object. (C:\testExpress\node_modules\dust\lib\dust.js:511:7)
at Module._compile (module.js:449:26) 
```

请帮我解决它。我是 node.js 的新手，快递和灰尘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:16:04.127

dustjs 似乎不再被维护。使用linkedin fork。[https://github.com/linkedin/dustjs](https://github.com/linkedin/dustjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:38:16.797

这是一个[已知](https://github.com/akdubya/dustjs/issues/43)的灰尘问题；它是为使用节点模块系统的现已废弃版本而编写的。问题页面显示了一些人的解决方法。

# html - 在不同的 DIV 中显示子无序列表

> ID：11417937
> 
> 赞同：0
> 
> 时间：2012-07-10T16:40:58.400
> 
> 标签：html, css

我有一个无序列表：

```
<ul>
    <li>Home</li>
    <li>Products</li>
    <ul>
        <li>Fruit</li>
        <li>Veg</li>
        <li>Frozen</li>
    </ul>
    <li>Services</li>
    <ul>
        <li>Deliver</li>
        <li>Butchers Shop</li>
    </ul>
    <li>Support</li>
</ul> 
```

哪个输出：

> *   家
> *   产品
> 
> *   水果
> *   蔬菜
> *   冷冻
> 
> *   服务
> 
> *   递送
> *   肉店
> 
> *   支持

我正在尝试在单独的 div 中显示子列表。例如，假设我在产品页面上，我想要这样的东西：

```
<div class="main-links"><ul><li>Home</li><li>Products</li><li>Services</li><li>Support</li></ul></div>

<?php
if ($_POST['page']=='products') {
    echo "<div class="side-links"><ul><li>Fruit</li><li>Veg</li><li>Frozen</li></ul></div>"
}
?> 
```

是否可以在 CSS/HTML 中执行此操作，这样我就不必手动从主列表中拆分子列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:57:49.400

如果您想要做的只是阻止某些子列表出现，那么 CSS 中有一个优雅的解决方案。

您可以使用 display: none 隐藏所有子列表，然后将类应用于您的 body 标签。这样，您可以有选择地隐藏/显示网站某些部分中的特定子列表。

例如：

```
<body class="services">
...
<ul class="services-child">
    <li>Deliver</li>
    <li>Butcher's Shop</li>
</ul> 
```

然后在 CSS 中：

```
.services-child {
display: none;
}
.services .services-child {
display: block;
} 
```

这将在除“服务”部分之外的所有页面中隐藏该子列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:47:48.583

您可以通过使用 CSS 绝对定位来实现这一点，始终将活动子菜单指向左侧

```
/*Make the sub-nav top/left position, relative to the position of this menu*/
#nav{
    position:relative;
}
#nav li{
    float:left;
}
/*The active sub menu*/
#nav li.active ul{
    position:absolute;
    left:0px;
    top:300px;
} 
```

我确信 jQuery 也可以用来从活动菜单创建一个新菜单。我的 jQuery 不是很好，但可能是这样的：

```
var menuhtml= $("#nav li.active ul").html();
$("#sidebarmenu").html(menuhtml); 
```

# powershell - 通过按位运算将大整数转换为有意义的值

> ID：11417944
> 
> 赞同：4
> 
> 时间：2012-07-10T16:41:24.553
> 
> 标签：powershell, integer, bit-manipulation

我在 PowerShell 中进行操作系统调用以获取特定进程的工作集。

当工作集<2GB 时，正确返回值。

当工作集在 2GB 和 4GB 之间时，该值作为负数返回。我可以用 4294967295 异或，乘以 -1，得到正确的值。

世界上一切都很好……直到工作集超过 4GB。现在返回的值似乎从 4GB 开始计数... IOW，我需要将结果添加到 4294967296。

我的按位运算有点生疏，我不确定是否有办法根据操作系统返回的内容准确计算正确的值。理想情况下，我希望有一个可以完成这项工作的表达式，或者至少是一系列“if”语句。

这是 PS 代码，以防它澄清情况。它仅准确计算值 < 4GB 的工作集。

```
$ServerName = "MyServer"

# get a collection containing all process objects on the system
$Procs = (Get-Process -ComputerName $ServerName) | Sort-Object -Descending WS

# Output each process and its working set
foreach($Proc in $Procs)
{
     $WorkingSet = [int64]($Proc.WorkingSet64)

     #for values greater than 2^32, a negative value will be returned... need to convert to 64 bit:
     if($WorkingSet -lt 0) {
        $WorkingSet = 4294967295 -bxor $WorkingSet * -1
     }

     $Process = $Proc.ProcessName

     Write-Host "Process:     $process"
     Write-Host "Working Set: $WorkingSet"
     Write-Host "------------------------------"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:53:12.767

这是[.NET Framework 中的一个错误](http://connect.microsoft.com/VisualStudio/feedback/details/551419/process-virtualmemorysize64-can-return-negative-numbers)。它只抓取结果的底部 32 位并将其转换为 64 位数字。

问题是一旦高位被截断，您就没有足够的信息来确定实际值。您是否有任何可以确定该值的范围？例如，如果您知道它将在 2 GB 和 6 GB 之间，则映射该方法返回的值会很容易。

我能想到的唯一通用解决方案是查看其他可用属性，看看它们中的任何一个是否可以为您提供足够的提示来确定返回值的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T15:29:15.193

使用 WorkingSet64 代替 WS

例如：

```
Get-Process -Name notepad | Select-Object -ExpandProperty WorkingSet64 
```

/安德烈

# php - jQuery AJAX 脚本在 Firefox 中不起作用

> ID：11417946
> 
> 赞同：0
> 
> 时间：2012-07-10T16:41:33.893
> 
> 标签：php, jquery

我不明白为什么这个脚本在 Firefox 中不起作用。而且，即使我的`ajax_loadmore.php` 输出为 FALSE，它仍然会进行 AJAX 调用（在 Chrome 中）。

```
var request;
$(window).scroll(function () {
   if ($(window).scrollTop() == $(document).height() - $(window).height() ) {
      var ID = $('.stbody:last').attr('id').match(/stbody(\d+)/)[1];
      $('#loader').show();

      if(request) {
        return
      }
      request = $.ajax({
        type: 'GET',
        url: "ajax_loadmore.php?lCom="+ID,
        success: function(result) {
            if(result!='FALSE') {
                $('#loader').hide();
                $('#moreComments').append(result);
                $(".oembed").oembed(null, {
                    embedMethod: "fill",
                    maxWidth: 700,
                    maxHeight: 600
                });
                request = null;
            } else {
                $('#loader').hide();
                $('#moreComments').html('<center><p>Slut på inlägg</p></center>');
                request = null;
            }
        }
      }); 
   }
}); 
```

`ajax_loadmore.php`代码：

```
<?php
if($_GET['lCom']) {
  include_once 'core/init.php';
  protect_page();
  include_once 'includes/db.php';
  include_once 'includes/functions.php';
  include_once 'includes/tolink.php';
  include_once 'includes/time_stamp.php';
  include_once 'session.php';

  $lCom = $_GET['lCom'];
  $Wall = new Wall_Updates();
  $updatesarray=$Wall->Updates_more($uid,$lCom);
  if(!empty($updatesarray)) {

    foreach($updatesarray as $data) {
      $msg_id=$data['msg_id'];
      $orimessage=$data['message'];
      $message=tolink(htmlspecialchars(nl2br($data['message'])));
      $time=$data['created'];
      $username=$data['username'];
      $uid=$data['uid_fk'];
      $face=get_profile_pic($uid,'small');
      $face2=get_profile_pic($session_user_id,'mini'); 
      $commentsarray=$Wall->Comments($msg_id);
      ?>

        //HTMLSTUFF HERE.. 

      <?php
      }
  } else { echo 'FALSE'; }
} else { die('du ska inte vara här..'); }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:56:57.310

它现在似乎起作用了。当它到达顶部时，我使用 jQuery 在我的菜单中添加一个粘性类。并且那个菜单有 position: relative 可能与窗口的高度或其他东西混淆，因此 Firefox 没有执行脚本，因为它没有到达底部。

当我将菜单容器上的 position: relative 更改为 position: absolute 时，它​​就起作用了。

如果有人可以更详细地解释为什么这样做，我会很高兴！（因为它在 Chrome 和 IE 中工作，我猜它在 Firefox 中存在渲染问题）

感谢您的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:03:31.470

我也遇到了同样的问题，我使用了以下链接中的脚本：

[http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html](http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html)

# blackberry - 在哪里为黑莓应用做广告？

> ID：11417950
> 
> 赞同：0
> 
> 时间：2012-07-10T16:41:46.107
> 
> 标签：blackberry, ads, appworld

Android 和 iOS 有几个正在兴起的广告平台，Admob、Mobfox 和其他我可以用来宣传我的应用程序的广告平台。但是我对黑莓应用程序的选择是什么，提到的网络似乎不支持黑莓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:19:12.067

您可以使用黑莓广告服务：[https ://developer.blackberry.com/develop/platform_services/advertising.html](https://developer.blackberry.com/develop/platform_services/advertising.html)

# android - Android：如何在 Google 地图中设置车辆的方向？

> ID：11417951
> 
> 赞同：1
> 
> 时间：2012-07-10T16:41:48.843
> 
> 标签：android, google-maps, tracking

我正在开发一个由 GPS 监控公共汽车的 Android 应用程序。车辆的位置和要行驶的路线显示在谷歌地图上。在这条路线上，还显示了巴士站。

点击公交车站，系统会显示公交车到公交车站的预计到达时间。

问题是：我如何检查（或者我怎么知道）公共汽车是否经过了所选的公共汽车站，即，我如何知道公共汽车站不再是路线的一部分，因为公共汽车是旅行？

注意：目前该系统是一个原型，只需要 1 (ONE) BUS！

我希望你能给我一些想法！

# c# - 无法在 ASP .NET MVC3 下创建 EVENT LOG

> ID：11417952
> 
> 赞同：0
> 
> 时间：2012-07-10T16:41:49.263
> 
> 标签：c#, .net, asp.net-mvc-3

我尝试创建简单的日志并使用此方法，但我收到有关 Admin 的错误。权利。这怎么可能？我看到了应用程序。拥有所有管理员权限。

```
public static void WriteToEventLog(string message)
        {
            try
            {
                string cs = "WebReports";
                EventLog elog = new EventLog();

                if (!EventLog.SourceExists(cs))
                {
                    EventLog.CreateEventSource(cs + "Source", cs + "Log");
                }

                elog.Source = cs;
                elog.EnableRaisingEvents = true;
                elog.WriteEntry(message);
            }
            catch
            {
                  // ERROR OCCURES
            }
        } 
```

任何线索谢谢！

# java - ldap 插入异常

> ID：11417960
> 
> 赞同：2
> 
> 时间：2012-07-10T16:42:18.573
> 
> 标签：java, ldap

我正在尝试向目录服务器数据库添加一个条目。这些是我要插入的值：

```
userName=[ben@gmail.com]
driverEmail=[ben@gmail.com]
driverPassword=[ben]
firstName=[Ben]
lastName=[Hur]
newsletter=[false] 
```

我得到了这个例外：

```
SEVERE: Cannot create new LDAP entry
LDAPException(resultCode=object class violation, errorMessage='Entry mwUniqueIdentifier=5f9e7597-8a5f-42b0-985b-7d196040689e,ou=People,dc=mobilewarrio
r,dc=com violates the Directory Server schema configuration because it includes     multiple conflicting structural objectclasses inetOrgPerson and mwUser
Account.  Only a single structural objectclass is allowed in an entry') 
```

谁能告诉我它有什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T17:04:09.053

您没有确切显示您将如何插入这些值，因此很难过于具体。但是，例外情况非常明显。

您尝试将`inetOrgPerson`对象类和`mwUser`对象类都分配给条目，这不起作用，因为它们都被定义为结构对象类并且都没有从另一个继承（很可能`mwUser`被定义为结构对象类，因为您的架构没有将其指定为一个`AUXILIARY`或`ABSTRACT`对象类）。

根据[RFC 4512](https://www.rfc-editor.org/rfc/rfc4512#section-2.4.2)：

> 对象或别名条目的特征在于恰好有一个结构对象类超类链，该链具有单个结构对象类作为最从属的对象类。

有两个可能的修复应该涉及对 LDAP 模式的简单更改：

1.  如果您希望所有`mwUser`对象都是`inetOrgPerson`对象，只需声明`mwUser`一个类似的子对象类`inetOrgPerson`（取自[OpenLDAP 文档](http://www.openldap.org/doc/admin22/schema.html)）：

    objectclass ( 1.1.2.2.2 NAME 'myPerson' DESC 'my person' SUP inetOrgPerson MUST (myUniqueName $ givenName) MAY myPhoto)

在这种情况下，您只需将`mwUser`对象类分配给您的条目。

2.  如果您不希望所有`mwUser`对象都是`inetOrgPerson`对象，那么通过指定它是一个辅助对象类来声明它是一个 mixin，如下所示：

    objectclass ( 1.1.2.2.1 NAME 'myPhotoObject' DESC 'mixin myPhoto' AUXILIARY MAY myPhoto )

在这种情况下，您必须将`inetOrgPerson`（或另一个结构对象类）以及`mwUser`对象类都分配给对象。

# android - android自定义视图中的DrawPath

> ID：11417962
> 
> 赞同：1
> 
> 时间：2012-07-10T16:42:32.600
> 
> 标签：android, canvas

我有一个封闭的路径，我想用一种颜色（白色）填充它，并在它周围放置另一种颜色（红色）的边缘。我认为自定义视图类可以让我达到这个目的：

```
public class StrokeFill extends View{
private Path shapePath;
private Paint strokePaint;
private Paint fillPaint;

public StrokeFill(Context context, Path path) {
    super(context);
    shapePath = path;
    fillPaint.setColor(android.graphics.Color.WHITE);
    fillPaint.setStyle(Paint.Style.FILL);
    fillPaint.setStrokeWidth(0);
    strokePaint.setColor(android.graphics.Color.RED);
    strokePaint.setStyle(Paint.Style.STROKE);
    strokePaint.setStrokeWidth(3);
    // TODO Auto-generated constructor stub
}

protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    //canvas.drawColor(Color.BLACK);
    super.onDraw(canvas);
    canvas.drawPath(shapePath, fillPaint);
    canvas.drawPath(shapePath, strokePaint);
}
} 
```

在我的主要活动中，我只是这样做了（没有 XML 布局文件）：

```
setContentView(new StrokeFill(this, testpath)); 
```

testpath 是我在Activity中定义的路径。这是有效的，因为当我使用它定义 PathShape 时，我能够绘制它。但在这种情况下，Eclipse 给了我错误 java.lang.NullPointerException。我尝试在 XML 布局中定义自定义视图，但这也不起作用。到目前为止，在 android 中使用形状非常令人沮丧，所以如果有人能提供帮助，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:03:33.383

你的初始化问题看看这个

```
public class StrokeFill extends View{
    private Path shapePath;
    private Paint strokePaint;
    private Paint fillPaint;

    public StrokeFill(Context context, Path path) {
       super(context);
       shapePath = new Path();        
       shapePath = path;
       fillPaint = new Paint();
       fillPaint.setColor(android.graphics.Color.WHITE);
       fillPaint.setStyle(Paint.Style.FILL);
       fillPaint.setStrokeWidth(0);
       strokePaint = new Paint();
       strokePaint.setColor(android.graphics.Color.RED);
       strokePaint.setStyle(Paint.Style.STROKE);
       strokePaint.setStrokeWidth(3);
       // TODO Auto-generated constructor stub
    }

   protected void onDraw(Canvas canvas) {
      // TODO Auto-generated method stub
      //canvas.drawColor(Color.BLACK);
      super.onDraw(canvas);
      canvas.drawPath(shapePath, fillPaint);
      canvas.drawPath(shapePath, strokePaint);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:44:47.773

strokePaint 从未在您的代码中初始化......那是您的 nullPointer 吗？

欢迎加入堆栈...如果您发现有用的答案，请点赞...如果您认为它们是正确的，请给他们绿色的复选标记！

# java - 数组中的螺旋数

> ID：11417966
> 
> 赞同：0
> 
> 时间：2012-07-10T16:42:58.923
> 
> 标签：java, arrays, matrix, stack, overflow

我需要在螺旋阵列中添加枢轴点，如下所示：

```
 21 22 23 24 25 
 20   7   8   9 10
 19 6   1   2 11
 18   5   4   3 12
  17 16 15 14 13

```

我有 java 代码可以做到这一点，它适用于如上所示的小型 5x5 数组......但是当我用大型 1001x1001 数组测试它时，它给了我很多堆栈溢出。我不知道如何跟踪它，我已经使用 try and catch 没有成功。代码如下。有没有人有什么建议？

```
public class Spiral {
    int[][] arr = new int[1001][1001];
    int counter = 1;
    public int total = 1;
    String direction = "SOUTH";
    public Spiral(){
        for (int i = 0; i < arr.length; i++) {
            for (int j = 0; j < arr.length; j++) {
                arr[i][j] = 0;
            }
        }
        try {
        arr[500][500] = 1;
        spiral(500, 501);
        total += arr[0][arr.length - 1];
        System.out.println(total);
        } catch (Exception e) {
            e.printStackTrace();
            //System.out.println(x + ", " + y);
        }
    }

    public void spiral(int x, int y) {

            counter++;
            arr[x][y] = counter;

            if(x==900&&y==900)
                System.out.println("here");
            if (direction == "SOUTH") {
                if (arr[x][y - 1] != 0) {
                    if (x + 1 < arr.length)
                    spiral(x + 1, y);
                } else {
                    total += arr[x][y];
                    direction = "WEST";
                    spiral(x, y - 1);
                }
            } else if (direction == "WEST") {
                if (arr[x - 1][y] != 0) {
                    if (y - 1 >= 0) {
                        spiral(x, y - 1);
                    }
                } else {
                    total += arr[x][y];
                    direction = "NORTH";
                    spiral(x - 1, y);
                }
            } else if (direction == "NORTH") {
                if (arr[x][y + 1] != 0) {
                    if (x - 1 >= 0) {
                        spiral(x - 1, y);
                    }
                } else {
                    total += arr[x][y];
                    direction = "EAST";
                    spiral(x, y + 1);
                }
            } else if (direction == "EAST") {
                if (arr[x + 1][y] != 0) {
                    if (y + 1 < arr.length) {
                        spiral(x, y + 1);
                    }
                } else {
                    total += arr[x][y - 1];
                    direction = "SOUTH";
                    spiral(x + 1, y);
                }
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:58:57.647

螺旋（int，int）是递归的，并且多次调用自身以至于溢出堆栈。你有两个选择：

1.  重构你的算法以循环而不是递归
2.  使用 vm arg -Xss 增加堆栈大小。默认情况下，vm 使用 512 KB 作为堆栈，因此您可以尝试使用 -Xss1m 将该大小加倍（或您可能需要的任何其他值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:58:03.733

您的算法针对数组中的每个单元格重复出现。你的筹码真的足够大到可以重复 1,002,001 次吗？如果没有，那么您将不得不使您的堆栈更大或尝试不同的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:58:08.833

我会假设你看到这个问题是因为你的递归是如何工作的。您正在`spiral`递归调用以打印出您的数据，但是当使用 1001x1001 数据集调用它时，您正在创建一个同样大的堆栈跟踪，导致您的 JVM 崩溃并最终给您带来 Stack Overflow 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T17:05:06.433

由于您使用的是 recursion ，很明显您将获得大输入的 StackOverFlow 异常。

尝试使用 -Xss 开关调整 vm。

# azure - Azure 是否支持 Microsoft 数据服务？

> ID：11417967
> 
> 赞同：0
> 
> 时间：2012-07-10T16:42:59.873
> 
> 标签：azure

我有兴趣使用 Azure 和 MDS 部署云 MDM 实例。Azure 提供什么版本的 SQL Server？是否有支持 Microsoft 数据服务的版本？如果没有，那么这是否在路线图上？这什么时候可以使用？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:43:21.167

如果您谈论的是 SQL 数据库（以前称为 SQL Azure），它基于 SQL Server 2008 Core 和最近发布的 SQL Server 2012 中的许多新组件，但是 MDS 部分在 Windows Azure SQL 数据库中并不完全可用。[在此处](http://msdn.microsoft.com/en-us/library/windowsazure/ee336256)了解有关 Windows Azure SQL 数据库的更多信息。

但是，您可以选择[Windows Azure 虚拟机（预览版）](https://www.windowsazure.com/en-us/manage/windows/)，您可以在其中构建自己的基于 Windows Server 2008 的虚拟机并在其上运行 SQL Server 2012，这样您就可以毫无问题地使用 MDS。如果您想使用 MDS，这将是一个理想的解决方案。不仅如此，您可以在大约 5 分钟内获得运行 SQL Server 2012 (eval) 的 Windows Azure 虚拟机。

# c# - 使用 asp.net 开始使用 Extjs.Net

> ID：11417968
> 
> 赞同：2
> 
> 时间：2012-07-10T16:43:02.020
> 
> 标签：c#, asp.net, ext.net

我是 Windows 窗体开发人员，但突然使用 extjs.Net 转移到 asp.net。我参考了仅显示 UI 的[EXT.NET](http://www.ext.net/)示例，但我无法找到隐藏代码和 UI 之间的数据交换，例如数据绑定。请建议一些示例、链接或任何其他我可以开始开发的材料形式。

我使用的是简单的 asp.net 而不是 MVC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:45:26.500

> 请提出一些我可以开始开发的示例、链接或任何其他材料形式。

这里有一些你可以阅读：

*   [http://extaspnet.codeplex.com/](http://extaspnet.codeplex.com/)
*   [http://examples.extjs.eu/](http://examples.extjs.eu/)
*   [http://www.codeproject.com/Questions/286794/Using-ExtJs-in-asp-net](http://www.codeproject.com/Questions/286794/Using-ExtJs-in-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:10:07.473

开始使用 Ext.NET 的最佳位置可能是浏览[Ext.NET 示例资源管理器](http://examples.ext.net)。提供了数百个完整的场景和数十个直接处理连接到各种数据源的场景，包括标准的**ASP.NET** `DataSource`控件。

这是一个相对基本的示例，演示连接到`<asp:SqlDataSource>`

[http://examples.ext.net/#/GridPanel/DataSource_Controls/SqlDataSource/](http://examples.ext.net/#/GridPanel/DataSource_Controls/SqlDataSource/)

许多选项可用于连接到几乎任何形式的数据端点。如果您有更多关于您的要求的细节，我很乐意为您提供帮助，或为您指明正确的方向。

希望这可以帮助。

# facebook-graph-api - 阅读 Facebook 应用在用户墙上/新闻提要上发布的帖子

> ID：11417969
> 
> 赞同：1
> 
> 时间：2012-07-10T16:43:03.010
> 
> 标签：facebook-graph-api, facebook-fql

有没有办法通过 facebook api 调用或 FQL 来获取 facebook 应用程序在用户墙上发布的帖子。

**例如**，用户阅读了一篇关于“华盛顿邮报社交阅读器”应用程序的文章，该文章出现在用户墙上的“近期活动”下。

这不会出现在*me/feed*或*me/posts*或*me/home 中*。
我阅读了有关订阅实时更新的文档，但没有提供有关此问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T21:24:27.473

要获得类似于“Social Reader”的活动，您需要使用以下端点

`/me/news.reads`经`user_actions.news`许可

示例响应

```
{
  "data": [
    {
      "id": "10100213573074777", 
      "from": {
        "name": "Philippe Harewood", 
        "id": "13608786"
      }, 
      "start_time": "2011-11-22T22:24:40+0000", 
      "end_time": "2011-11-22T22:24:40+0000", 
      "publish_time": "2011-11-22T22:24:40+0000", 
      "application": {
        "name": "Washington Post Social Reader", 
        "namespace": "wpsocialreader", 
        "id": "225771117449558"
      }, 
      "data": {
        "article": {
          "id": "10150354603148014", 
          "url": "https://fb.trove.com/fbwapolabs/me/channels/67284/content/hLt5k", 
          "type": "article", 
          "title": "Tom Brady May Have Gone Blind"
        }
      }, 
      "type": "news.reads", 
      "no_feed_story": false, 
      "likes": {
        "count": 0, 
        "can_like": true, 
        "user_likes": false
      }, 
      "comments": {
        "count": 0, 
        "can_comment": true, 
        "comment_order": "chronological"
      }
    }, 
```

# java - 如何确定文件是否从 svn 补丁文件中添加/删除/修改

> ID：11417970
> 
> 赞同：1
> 
> 时间：2012-07-10T16:43:10.823
> 
> 标签：java, eclipse, svn, subclipse

如何确定文件是从 svn 补丁文件中添加、删除或修改的？

我的补丁看起来像这样：

我想知道test.js和PageCacheCommand.java，这两个文件是新的吗？修改的？删除？

```
### Eclipse Workspace Patch 1.0
#P feilong-sitemanager
Index: src/main/webapp/scripts/test.js
===================================================================
Index: src/main/java/com/jumbo/shop/web/command/PageCacheCommand.java
===================================================================
--- src/main/java/com/jumbo/shop/web/command/PageCacheCommand.java  (revision 47766)
+++ src/main/java/com/jumbo/shop/web/command/PageCacheCommand.java  (working copy)
@@ -1,34 +0,0 @@
-package com.jumbo.shop.web.command;
-
-import java.io.Serializable;
-import java.util.List;
-
-public class PageCacheCommand implements Serializable{
-
-   private static final long   serialVersionUID    = 59168831084794622L;
-
-   private List<Object[]>      skus                = null;
-
-   public PageCacheCommand(List<Object[]> skus, Long count){
-       this.skus = skus;
-       this.count = count;
-   }
-
-   public List<Object[]> getPagination(){
-       return this.skus;
-   }
-
-   private Long    count   = 0L;
-
-   public Long getCount(){
-       return count;
-   }
-
-   public void setCount(Long count){
-       this.count = count;
-   }
-
-   public List<Object[]> getSkus(){
-       return this.skus;
-   }
-} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:32:46.357

如果你有能力使用命令行，你可以使用：

```
svn diff --summarize 
```

输出将为您提供工作副本当前目录中更改的概览。

它将指示文件是否被添加、删除、修改等...

要在特定文件上运行它，请添加文件的路径。

例如：

```
svn diff --summarize src/main/java/com/jumbo/shop/web/command/PageCacheCommand.java 
```

* * *

要回答你的另一个问题...

`@@ -1,34 +0,0 @@`基本上意味着：*第 1 到 34 行变成了第 0 到 0 行。*

# formatting - 如何写入行尾（或制表符到变量）？

> ID：11417973
> 
> 赞同：2
> 
> 时间：2012-07-10T16:43:16.843
> 
> 标签：formatting, fortran

我正在编写一个代码，我想在行尾附加一个文件名。有两种合乎逻辑的方法可以做到这一点，但我不知道 Fortran 中是否存在这些方法。

1.  只需将一个字符变量附加到我正在阅读的行的末尾。

2.  [PREFERRED] 使用`T`带有数字变量的 (tab) 描述符，告诉它要跳到哪一列，然后从该列开始写入字符变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T21:58:21.143

将每一行作为字符串读取，然后在字符串末尾修剪空格并在末尾附加文件名。确保您的字符变量足够大。下面是一个简单的程序来说明这个想法。

```
program append_to_rows

implicit none

integer :: j
character(len=10) :: fname = 'mydata.txt'
character(len=100) :: row

open(1,file=fname, status='old')
open(2,file='processed.txt', status='unknown')

do j=1,6
    read(1,'(a)') row
    row = trim(row)//fname
    write(2,'(a)') trim(row)
end do

close(1)
close(2)

end program 
```

我的数据.txt：

```
1,2,3,4,dfkldf
1,2,3fdfkj
1

123
  3434j,43,5 
```

处理的.txt：

```
1,2,3,4,dfkldfmydata.txt
1,2,3fdfkjmydata.txt
1mydata.txt
mydata.txt
123mydata.txt
  3434j,43,5mydata.txt 
```

# objective-c - SKPSMTP 消息错误“未定义的符号”

> ID：11417974
> 
> 赞同：0
> 
> 时间：2012-07-10T16:43:17.190
> 
> 标签：objective-c, sendmail

我做错了什么？

```
Undefined symbols for architecture i386:
    "_OBJC_CLASS_$_SKPSMTPMessage", referenced from:
  objc-class-ref in MailSend.o
    "_kSKPSMTPPartContentTransferEncodingKey", referenced from:
  -[MailSend sendEmail] in MailSend.o
    "_kSKPSMTPPartContentTypeKey", referenced from:
  -[MailSend sendEmail] in MailSend.o
    "_kSKPSMTPPartMessageKey", referenced from:
  -[MailSend sendEmail] in MailSend.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

[我使用来自http://skpsmtpmessage.googlecode.com/svn/trunk/SMTPSender/](http://skpsmtpmessage.googlecode.com/svn/trunk/SMTPSender/)的 SKPSMTPMessage

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:51:16.533

我在 Project Navigator 中单击 MailSend.m 文件，并在 File Inspector 的 Target members 中的目标名称附近设置复选框。

我从下面的链接中找到了这个答案，并几乎一字不差地复制了它。有了这个，我能够继续在我原来的项目中工作。

[架构 i386“_OBJC_CLASS_$_Appirater”的未定义符号](https://stackoverflow.com/questions/8953966/undefined-symbols-for-architecture-i386-objc-class-appirater?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:44:22.943

您正在为错误的平台构建。看起来您正在使用适用于 iphone 的库，然后尝试在模拟器中运行。如果您直接在 iOS 设备上运行此代码，它应该可以工作。

您尝试使用的库中的自述文件告诉您如何链接库。[http://skpsmtpmessage.googlecode.com/svn/trunk/SMTPSender/README.txt](http://skpsmtpmessage.googlecode.com/svn/trunk/SMTPSender/README.txt)

需要告诉编译器您正在构建什么 - i386/simulator 或 armv7/iOS 设备。如果您正确链接库，它将使用它应该使用的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:48:57.360

SKPSMTP 的一个常见问题是忘记`CFNetwork.framework`在项目中添加对 的引用。你加了这个吗？

# sql - 使用 PostgreSQL 进行字母数字排序

> ID：11417975
> 
> 赞同：29
> 
> 时间：2012-07-10T16:43:19.193
> 
> 标签：sql, postgresql, sorting, sql-order-by, natural-sort

在数据库中，我有以下格式的各种字母数字字符串：

```
10_asdaasda
100_inkskabsjd
11_kancaascjas
45_aksndsialcn
22_dsdaskjca
100_skdnascbka 
```

我希望它们基本上按字符串前面的数字排序，然后按字符串名称本身排序，但是当然，字符会被一一比较，因此按名称排序的结果会产生：

```
10_asdaasda
100_inkskabsjd
100_skdnascbka
11_kancaascjas
22_dsdaskjca
45_aksndsialcn 
```

而不是我更喜欢的顺序：

```
10_asdaasda
11_kancaascjas
22_dsdaskjca
45_aksndsialcn
100_inkskabsjd
100_skdnascbka 
```

老实说，如果字符串只是按前面的数字排序，我会很好。我对 PostgreSQL 不太熟悉，所以我不确定最好的方法是什么。我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-10T16:58:46.120

理想的方法是[*标准化*](https://en.wikipedia.org/wiki/Database_normalization)您的设计并将列的两个组件拆分为两个单独的列。一种类型`integer`，一种`text`。

使用当前表，您可以：

```
SELECT col
FROM   tbl
ORDER  BY (substring(col, '^[0-9]+'))::int  -- cast to integer
         , substring(col, '[^0-9_].*$');    -- works as text 
```

可以使用相同的[`substring()`表达式来拆分列。](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-SQL)

这些正则表达式有些容错：
第一个正则表达式从左边挑选最长的数字字符串，`NULL`如果没有找到数字，那么转换`integer`不会出错。
第二个正则表达式从不是数字或“_”的第一个字符中挑选字符串的其余部分。

如果下划线 ( `_`) 是明确的分隔符，[`split_part()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)则速度更快：

```
SELECT col
FROM   tbl
ORDER  BY split_part(col, '_', 1)::int
        , split_part(col, '_', 2); 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_14&fiddle=cfecf3777bdefd846856ca4119b7b3e2)*

看：

*   [将逗号分隔的列数据拆分为其他列](https://stackoverflow.com/questions/8584967/split-comma-separated-column-data-into-additional-columns/8612456#8612456)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-21T18:33:40.943

您可以将正则表达式与子字符串一起使用

```
 order by substring(column, '^[0-9]+')::int, substring(column, '[^0-9]*$') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-10T17:03:31.760

有一种方法可以在表达式上使用索引。这不是我首选的解决方案（我会选择 Brad 的），但您可以在以下表达式上创建索引（有更多方法可以做到）：

```
CREATE INDEX idx_name ON table (CAST(SPLIT_PART(columname, '_', 1) AS integer)); 
```

然后你可以在`CAST(SPLIT_PART(columname, '_', 1) AS integer)`每次需要下划线字符前的数字时进行搜索和排序，例如：

```
SELECT * FROM table ORDER BY CAST(SPLIT_PART(columname, '_', 1) AS integer); 
```

您可以通过在 上创建索引来对字符串部分执行相同的操作`SPLIT_PART(columname, '_', 2)`，然后也进行相应的排序。
然而，正如我所说，我发现这个解决方案非常难看。我肯定会使用另外两列（一列用于数字，一列用于字符串），然后甚至可能删除您在此处提到的列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:53:26.513

您应该向具有数字数据类型的数据库添加一个新列，并在持久化新记录时将其设置为与您拥有的字符串值的前缀相同的值。

然后，您可以在正确键入的数字列上创建索引以进行排序。

# ruby-on-rails - Phusion 乘客 - Gemfile.lock 权限被拒绝

> ID：11417977
> 
> 赞同：0
> 
> 时间：2012-07-10T16:43:36.310
> 
> 标签：ruby-on-rails, ruby, passenger, gemfile

我正在 Phusion 乘客上运行 Rails 应用程序，并且`Permission denied - Gemfile.lock`经常收到错误消息。我通过运行来修复它，`bundle update`但它每隔几天就会不断弹出相同的错误（我没有对应用程序进行任何更改）。可能是什么原因造成的？

# msbuild - 在 MSBuild 中使用注册表属性时引用属性？

> ID：11417979
> 
> 赞同：4
> 
> 时间：2012-07-10T16:43:37.527
> 
> 标签：msbuild

我正在尝试使用 MSBuild 来确定 SQL 服务器实例是否启用了 SQL 身份验证。我正在尝试以下操作：

```
<Target Name="VerifySQLLoginMode">
  <PropertyGroup>
    <SqlInstanceName>SQL08X64</SqlInstanceName>
    <SqlInstanceKey>$(registry:HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL@$(SqlInstanceName))</SqlInstanceKey>
    <SqlLoginMode>$(registry:HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\$(SqlInstanceKey)\MSSQLServer@LoginMode)</SqlLoginMode>
  </PropertyGroup>

  <Message Text="SqlInstanceName = $(SqlInstanceName)" />
  <Message Text="SqlInstanceKey = $(SqlInstanceKey)" />
  <Message Text="SqlLoginMode = $(SqlLoginMode)" />

  <Error Condition="'$(SqlLoginMode)' != '2'" Text="Error: SQL Authentication is disabled. Please enable it." />
</Target> 
```

不幸的是，MSBuild 似乎不允许`$(SqlInstanceName)`在属性中引用属性 () `$(registry:...)`。

或者有什么方法可以使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:12:10.163

实际上，它可能归结为使用 32 位 MSBuild。使用 MSBuild 4.0[属性函数](http://msdn.microsoft.com/en-us/library/dd633440.aspx)给了我这个：

```
<Target Name="VerifySQLLoginMode">
  <!-- Note that this can't deal with the default instance. -->

  <PropertyGroup>
    <SqlInstanceName>SQL08X64</SqlInstanceName>
    <SqlInstanceKey>$([MSBuild]::GetRegistryValueFromView('HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\Instance Names\SQL', '$(SqlInstanceName)', null, RegistryView.Registry64, RegistryView.Registry32))</SqlInstanceKey>
    <SqlLoginMode>$([MSBuild]::GetRegistryValueFromView('HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\$(SqlInstanceKey)\MSSQLServer', 'LoginMode', null, RegistryView.Registry64, RegistryView.Registry32))</SqlLoginMode>
  </PropertyGroup>

  <Message Text="SqlInstanceName: $(SqlInstanceName)" />
  <Message Text="SqlInstanceKey: $(SqlInstanceKey)" />
  <Message Text="SqlLoginMode: $(SqlLoginMode)" />

  <Error Condition="'$(SqlLoginMode)' != '2'" Text="Error: SQL Authentication is disabled. Please enable it." />
</Target> 
```

...效果很好。

# php - 是否有一个程序可以让我查看网站中包含的 PHP 的层次结构？

> ID：11417981
> 
> 赞同：0
> 
> 时间：2012-07-10T16:43:43.383
> 
> 标签：php, include

我发现自己在我可以访问并需要编辑的大型包含丰富的网站中查找内容时遇到问题。

我查看了我希望找到的 php 文件，却发现它是由几个包含文件组成的，并且没有任何迹象表明我在寻找什么。没关系，我会查看包含 - 直到我去查看那些包含并发现​​它们也由几个包含组成，然后再往下走。

是否有一个程序可以用来生成构成页面的包含的某种树结构？

此外，我希望能够以某种方式查看 PHP 页面的输出，该页面已拉入包含中的任何内容，但尚未处理 PHP 本身。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T16:47:30.080

不确定包含树（无需编写代码来扫描源文件），但您可以使用[get_included_files](http://php.net/manual/en/function.get-included-files.php)函数获取所有包含文件的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T17:02:47.357

使用[xdebug](http://xdebug.org/docs/)（php 扩展）的高级功能，您可以实现这一目标，甚至更多

更具体地说`Function Traces`，它显示每个函数调用以及函数所在的文件，因此，您可以从中获得所有包含文件的列表。

一种旧链接，但大多数仍然适用[http://devzone.zend.com/1139/profiling-php-applications-with-xdebug/](http://devzone.zend.com/1139/profiling-php-applications-with-xdebug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T16:53:25.353

PHP 不像 Java，所有的包含都与执行分开完成。'include' 本身就是一个在代码执行期间调用的函数，这使得这不可能。

老实说，即使你能做到这一点，我也不相信它会帮助你找到你要找的东西。一般来说，查找内容的最佳方法是了解站点的目录结构或使用 IDE（Eclipse、Netbeans 等）或文本编辑器（NotePad++ 等）来搜索目录中的所有文件及其子目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T16:53:32.123

也许是这样的。

[http://www.php.net/manual/en/function.debug-print-backtrace.php](http://www.php.net/manual/en/function.debug-print-backtrace.php)

# android - 方向平板电脑与手机

> ID：11417993
> 
> 赞同：0
> 
> 时间：2012-07-10T16:44:43.157
> 
> 标签：android, android-orientation

所以我刚刚在三星平板电脑上测试了我一直在手机设备上测试的应用程序。

该应用程序根据加速器数据更新图形，我注意到在平板电脑上它将横向视为纵向......它在自然纵向模式设备上很好......

任何想法我可以如何调整它以便它适用于两者：

```
public class ARLaunch extends Activity {

/** Open Camera View **/    
private CamLayer camPreview;
/** Open Camera View **/ 
private GLLayer glView;

private WakeLock mWakeLock;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // requesting to turn the title OFF
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);

    //Set Screen Orientation
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    try{
        final PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        this.mWakeLock = pm.newWakeLock(
                PowerManager.SCREEN_BRIGHT_WAKE_LOCK, "My Tag");

        //Create Intance of Camera
        camPreview = new CamLayer(this.getApplicationContext());

        //Create Instance of OpenGL
        glView = new GLLayer(this);

        //FrameLayOut for holding everything
        FrameLayout frame = new FrameLayout(this);
        // set as main view
        setContentView(frame);

        // add Camera to view 
        frame.addView(camPreview, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        frame.addView(glView);

    } catch(Exception e){}
}
/** Remember to resume the glSurface  */
@Override
protected void onResume() {
    super.onResume();
    try{
    this.mWakeLock.acquire();
    } catch (Exception ex){}
    glView.onResume();
    glView.setZOrderOnTop(true);
}
/** Also pause the glSurface  */
@Override
protected void onPause() {
    super.onPause();
    try{
        this.mWakeLock.release();
    } catch (Exception ex){}

    glView.onPause();

}

public void displayOri(float acc, float ori){

} 
```

}

```
public class PhoneOrientation {
private SensorManager sensorMan;
private Sensor sensorAcce;
private Sensor sensorMagn;
private SensorEventListener listener;
private float matrix[]=new float[16];
private Context ctx;

public PhoneOrientation(Context context) {
    ctx = context;
}

public void start(Context context) {
    listener = new SensorEventListener() {
        private float orientation[]=new float[3];
        private float acceleration[]=new float[3];

        public void onAccuracyChanged(Sensor arg0, int arg1){}

        public void onSensorChanged(SensorEvent evt) {
            int type=evt.sensor.getType();

            //Smoothing the sensor data a bit seems like a good idea.
            if (type == Sensor.TYPE_MAGNETIC_FIELD) {
                orientation[0]=(orientation[0]*1+evt.values[0])*0.5f;
                orientation[1]=(orientation[1]*1+evt.values[1])*0.5f;
                orientation[2]=(orientation[2]*1+evt.values[2])*0.5f;
            } else if (type == Sensor.TYPE_ACCELEROMETER) {
                acceleration[0]=(acceleration[0]*2+evt.values[0])*0.33334f;
                acceleration[1]=(acceleration[1]*2+evt.values[1])*0.33334f;
                acceleration[2]=(acceleration[2]*2+evt.values[2])*0.33334f;
            }
            if ((type==Sensor.TYPE_MAGNETIC_FIELD) || (type==Sensor.TYPE_ACCELEROMETER)) {
                float newMat[]=new float[16];
                //Toast toast = Toast.makeText(ctx.getApplicationContext(), "accel", Toast.LENGTH_SHORT);
                //toast.show();
                SensorManager.getRotationMatrix(newMat, null, acceleration, orientation);
                SensorManager.remapCoordinateSystem(newMat,
                        SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X,
                        newMat);
                matrix=newMat;
            }
        }
    };

    sensorMan = (SensorManager)context.getSystemService(Context.SENSOR_SERVICE);
    sensorAcce = sensorMan.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
    sensorMagn = sensorMan.getSensorList(Sensor.TYPE_MAGNETIC_FIELD).get(0);

    sensorMan.registerListener(listener, sensorAcce, SensorManager.SENSOR_DELAY_GAME);
    sensorMan.registerListener(listener, sensorMagn, SensorManager.SENSOR_DELAY_GAME);      
}

public float[] getMatrix() {
    return matrix;
}

public void finish() {
    sensorMan.unregisterListener(listener);
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:47:13.047

阅读这篇文章：[http ://android-developers.blogspot.com/2010/09/one-screen-turn-deserves-another.html](http://android-developers.blogspot.com/2010/09/one-screen-turn-deserves-another.html)

此外，不要使用唤醒锁来在您的活动可见时保持屏幕打开。改为在视图上使用 KEEP_SCREEN_ON 标志，您可以删除唤醒锁定权限。

# iphone - 添加 MKPolyLine NSInvalidArgumentException

> ID：11417994
> 
> 赞同：0
> 
> 时间：2012-07-10T16:44:44.937
> 
> 标签：iphone, objective-c, ios, mkmapview

我正在尝试将 MKPolyLine 添加到我的 mapView 中。但出现错误：`NSInvalidArgumentException', reason: '-[MKPolylineView boundingMapRect]` 我的代码：

```
- (void)addRoad {
    [self loadRoude];
    [self.mapView addOverlay:self.routeLine];
}

- (void)loadRoude{
    MKMapPoint northEastPoint = MKMapPointForCoordinate(self.mapView.userLocation.coordinate);
MKMapPoint southWestPoint = MKMapPointMake(52.142391, 21.055641);

    MKMapPoint* pointArr = malloc(sizeof(CLLocationCoordinate2D) * 2);
    pointArr[0] = northEastPoint;
    pointArr[1] = southWestPoint;

    self.routeLine = [MKPolyline polylineWithPoints:pointArr count:2];
    _routeRect = MKMapRectMake(southWestPoint.x, southWestPoint.y, northEastPoint.x - southWestPoint.x, northEastPoint.y - southWestPoint.y);
    free(pointArr);
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
MKOverlayView* overlayView = nil;

if(overlay == self.routeLine)
{
        if(nil == self.routeLineView)
    {
        self.routeLineView = [[MKPolylineView alloc] initWithPolyline:self.routeLine];
        self.routeLineView.fillColor = [UIColor redColor];
        self.routeLineView.strokeColor = [UIColor redColor];
        self.routeLineView.lineWidth = 3;
    }
    overlayView = self.routeLineView;
}
return overlayView; 
} 
```

有我的问题吗？

**编辑**

self.routeLineView 的 NSLog 显示：`outeLiveView = <MKPolylineView: 0x7c956d0; frame = (0 0; 0 0); opaque = NO; layer = <MKOverlayClusterProxyLayer: 0x7c97eb0>>`这正常吗？

**编辑2**

```
NSLog(@"pointArr[0]x = %f",pointArr[0].x);
NSLog(@"pointArr[0]y = %f",pointArr[0].y);
NSLog(@"pointArr[1]x = %f",pointArr[1].x);
NSLog(@"pointArr[1]y = %f",pointArr[1].y); 
```

节目：

```
pointArr[0]x = 149891376.014222
pointArr[0]y = 88510604.996837
pointArr[1]x = 149917951.870020
pointArr[1]y = 88495551.883086 
```

这意味着我的指针数组没有 nil 对象。我真的很震惊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:53:56.530

来自 Apple 的文档：

> NSInvalidArgumentException：当您将无效参数传递给方法时发生的异常名称，例如需要非 nil 对象的 nil 指针。在 Mac OS X v10.0 及更高版本中可用。

检查您用于初始化的值`routeLineView`或任何其他`MKPolylineView`对象。一是大概`nil`。

# php - 如何判断当前结果是否是 PHP 中的最后一个结果

> ID：11417997
> 
> 赞同：1
> 
> 时间：2012-07-10T16:44:49.047
> 
> 标签：php, mysql, while-loop

我有一个用 PHP 和 MySQL 编写的新在线商店。

```
<div class="content-area">
<div class="page-heading">
<h1>Store</h1>
</div>
<p style="padding-top: 5px;"><strong>You are here:</strong> <a href="<?php echo $cls->root(); ?>/">Home</a> &raquo; Store</p>
<table border="0" cellpadding="0" cellspacing="0" width="500">
<?php
$categories=mysql_query("SELECT * FROM categories WHERE parent='0' ORDER by owner ASC, title ASC");
while($categoriesRow=mysql_fetch_array($categories)) {
$categoriesSub=mysql_query("SELECT * FROM categories WHERE parent='$categoriesRow[id]'");
?>
<tr>
<td valign="top">
<div class="product_list">
<div class="image_product">
<img alt="<?php echo $categoriesRow['title']; ?>" src="<?php echo $cls->truska(true); ?>/theme_section_image.gif" border="0" style="vertical-align: middle;" />
</div>
<div>
<h3 class="product"><a href="<?php echo $cls->root(); ?>/category/<?php echo $categoriesRow['permalink']; ?>/" target="_self"><?php echo $categoriesRow['title']; ?></a> <?php if(mysql_num_rows($categoriesSub) > 0) { ?>(<?php while($categoriesSubRow=mysql_fetch_array($categoriesSub)) {  }?>)<?php } ?></h3>
</div>
</div>
</td>
</tr>
<tr>
<td class="dotted_line_blue" colspan="1">
<img src="<?php echo $cls->truska(true); ?>/theme_shim.gif" height="1" width="1" alt=" " />
</td>
</tr>
<?php
}
?>
</table>
</div> 
```

我的第二个 While 循环在哪里，我需要计算出最后一个结果是什么，所以我可以在我的 while 循环中省略一个逗号。

它将显示为“乐高（乐高城市，乐高星球大战）”，但我希望它显示为“乐高（乐高城市，乐高星球大战）”。

如果当前结果是最后一个，我怎么能得到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T16:47:36.633

如果它是第一个结果，则不要添加逗号，并在所有下一个结果之前添加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T16:47:50.550

你可以通过从另一个方向来解决这个问题。

除了最后一个结果之外，不要在每个结果之后附加逗号，而是尝试在除第一个结果之外的每个结果之前添加一个逗号。

在循环外部设置一个名为的变量`$first`，并将其设置为 1。在循环内部：

```
if ($first == 0) {
   echo ",";
} else {
    $first = 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T16:49:28.903

只需构建您的结果数组并将其内[爆](http://php.net/manual/en/function.implode.php)。这会自动处理任何计数：

```
$comma_separated = implode(",", $array); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T16:51:03.403

你不应该使用普通的 mysql 访问，看看[PDO](http://es.php.net/manual/en/intro.pdo.php)。

回答你的问题，尝试这样的事情：

```
$items = array();
while ($row = mysql_fetch_assoc($result)) {
  $items[] = $row['foo'];
}
echo implode(', ', $items); 
```