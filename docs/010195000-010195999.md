# StackOverflow 问答 10195000-10195999

# mfc - 当鼠标靠近 MFC 中的视图边界时如何自动滚动

> ID：10195006
> 
> 赞同：0
> 
> 时间：2012-04-17T16:15:04.443
> 
> 标签：mfc, scroll

在我的 MFC 应用程序视图中，我可以通过单击和拖动来选择某些矩形区域。但是当用户想要选择比当前屏幕更大的区域时，他不能这样做，因为当鼠标指针靠近客户区域的边界时，视图不会自动滚动。

我该如何解决这个问题？任何参考都足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:34:15.423

通常，您仅在用户按住鼠标按钮时才执行此操作。既然如此，您通常希望在单击时捕获鼠标。然后，您将处理`WM_MOUSEMOVE`消息。在您的情况下，您会将鼠标的当前位置与窗口的边框进行比较，当它足够接近时（例如，在 10 像素内），您开始在该位置滚动。

我觉得有必要补充一点，当你这样做时，我会非常小心地控制滚动速度——一些程序滚动得太快以至于几乎无法使用，因为当你接近窗口边缘的那一刻，你已经滚动到您想要的位置*。*其他人则倾向于相反：无论您做什么，它们滚动的速度都非常慢，以至于即使移动很短的距离也似乎需要永远。

我怀疑有一个简单的答案来获得“正确”的速度。您通常确实需要渐变，因此当它们接近边界时，它会缓慢滚动，而当它们靠近时，滚动会变得更快。不过，您仍然需要对它的上限和下限相当小心，这样它们才能获得合理的速度范围，而不仅仅是从“哦，我能到达那里吗”，直接跳到“哇，备份，这*已经*太远了！”。

# scala - 如何从类列表中仅获取确切的属性

> ID：10195007
> 
> 赞同：1
> 
> 时间：2012-04-17T16:15:08.100
> 
> 标签：scala

如何从类列表中仅获取确切的属性，例如

```
case class Person(name: String, age: Int)

val a = Person("a", 1)
val b = Person("b", 1)
val persons = List(a, b)

val names = ???

assertEquals(List("a", "b"), names) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:16:03.960

试试这个：

```
scala> val names = persons.map(_.name)
names: List[String] = List(a, b) 
```

或者，如果您想同时访问多个字段：

```
scala> val names = persons.map{ case Person(name, age) => name }
names: List[String] = List(a, b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:14:25.420

你也可以做 `for { person <- persons } yield person.name` 这与地图基本相同的事情

# iphone - 如何从 iPhone POST 请求转换服务器上的音频二进制文件？

> ID：10195013
> 
> 赞同：1
> 
> 时间：2012-04-17T16:15:24.243
> 
> 标签：iphone, ios, audio

我有一个有效的 POST 请求，它将发送一个 CAF 音频文件（使用 AVAudioRecorder 在 iPhone 上录制）到 Web 服务器——请求本身的结构类似于[Send an audio FILE and JSON string in iOS](https://stackoverflow.com/questions/9549219/send-an-audio-file-and-json-string-in-ios)。

服务器正确接收文件，但我无法将其转换为可直接在浏览器中播放的格式。除了我可以在堆栈溢出中找到的每个音频/iPhone/服务器帖子之外，我还研究了 ffmpeg 和 HTML5 音频，但找不到关于如何将接收到的音频二进制文件转换为浏览器可播放格式的明确说明. 本质上，我需要了解如何在[此处](https://stackoverflow.com/questions/7750329/how-to-send-audio-file-through-http-post-to-a-server-from-ios)完成 Arun 的服务器端建议。

我知道 Audacity、Soundbooth 等将允许您使用原始数据并将其保存为另一种格式，但我需要在服务器上以编程方式完成此操作。如果有任何建议，他们将不胜感激！谢谢你。

# java - 需要 JRules 规则集路径语法解释

> ID：10195016
> 
> 赞同：0
> 
> 时间：2012-04-17T16:15:27.023
> 
> 标签：java, jrules

我正在使用 JRules 6 并尝试使用 JRules API 执行规则。

我创建了一个新的 IlrSessionRequest 对象，将规则集路径传递给它的构造函数。当它执行时，它会失败，说**规则集路径中的语法错误**和错误代码**XU.ERROR.10048**。谷歌没有提供太多帮助..

规则集路径指的是什么？Niaevely，我刚刚输入了包含我的 XOM 的 jar 文件的路径，但它似乎不喜欢那样。

知道如何找出规则集路径是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:26:13.367

路径必须以与 Rule Execution Server 上显示的方式相同的方式指定：/ruleApp/ruleSet 没有任何路径信息。这是 JRules 7.1 中的使用示例。这在 JRules 6 上可能会有所不同：

```
String rulesetPath= "/" + "your_ruleApp" + "/" + "your_ruleset";
IlrSessionFactory factory = new IlrPOJOSessionFactory();
IlrSessionRequest request = factory.createRequest();
request.setRulesetPath(rulesetPath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:45:27.447

XU = 执行单元，因此根据您的解释，我会说“JRules”正在抱怨，因为它无法在您的规则应用程序中找到您的规则集，因此崩溃。
打开里面的 jar 文件（ruleapp），您应该会看到至少一个文件夹，名为：“your ruleapp name”
，其中一个文件夹名为：“your ruleapp version”（可能是“1.0”）
：“your ruleset name”
： “您的规则集版本”
，其中包含您的规则 atrifacts。
说得通？

可能的规则集路径：
1/ ruleappName/ruleappVersion/rulesetName/rulesetVersion
2/ ruleappName/rulesetName/rulesetVersion
3/ ruleappName/ruleappVersion/rulesetName
4/ ruleappName/rulesetName

注意：版本是可选的，如果未指定，则将使用最新部署的版本。

我为 JRules（7.01 和 7.1）编写了一整套 oh Helpers and Factories - 版本 6 可能需要一些调整 如果您有兴趣，请告诉我。

基本上有 RTSHelper 和 RESHelper 库
，其中包含创建查询、业务规则、提取器、规则集、规则应用程序、部署、基于查询创建规则集等的静态方法......
执行后从 RES 中删除规则应用程序等等......

# c# - 清除和重绘时 PowerPack 控件和图形问题

> ID：10195017
> 
> 赞同：0
> 
> 时间：2012-04-17T16:15:31.957
> 
> 标签：c#, graphics, powerpack

简要说明：

*   我有一个用 C# 编写的包含一个面板的 win 表单。
*   该面板包含一个形状容器，通过它我以编程方式将 VisualBasic.PowerPacks 中的一些椭圆形和线条形状控件添加到面板中。
*   使用这种形状的原因是我需要对它们的 MouseHover 和 MouseClick 事件执行一些操作。
*   我还在面板的 Paint(object sender, PaintEventArgs e) 方法中使用 Graphics 在面板上绘制了一些图形，例如字符串和椭圆。
*   该应用程序具有放大和缩小按钮，每当用户单击它们时，形状和图形的大小都应该根据比例进行更改。
*   要在缩放后重绘图形，我需要在以新比例绘制新图形之前清除旧图形，否则它们会保留在面板上。所以，我使用了图形的 Clear(Color color) 方法来做到这一点。

现在，我遇到的问题是在使用 Clear(Color color) 时，包括形状控件在内的所有内容都消失了。根据我的看法，我不希望形状会消失，因为它们应该被视为控件，除非我在这里遗漏了一些东西。我怎样才能避免这个问题？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T15:15:39.613

通过使“shape.Invalidate()”形状控件无效来解决问题。

# asp.net-mvc - MVC 中用于构建 DateTime 的月、日、年下拉菜单

> ID：10195019
> 
> 赞同：1
> 
> 时间：2012-04-17T16:15:37.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我必须在我的视图中从三个下拉列表中构建一个 DateTime 对象。对于我现在的 MVC 知识水平而言，构建模型绑定有点过于复杂（我阅读了几篇文章）。同样，我不必绑定到 DateTime 属性，而是可以从 ViewModel 属性构建我的对象：

```
public IEnumerable<SelectListItem> Months
public IEnumerable<SelectListItem> Days
public IEnumerable<SelectListItem> Years 
```

有可能这样做吗？我也可以使用 Ajax 根据月份和年份设置正确的天数（注意闰年）。任何要参考的示例代码或文章都值得赞赏，因为我在这方面还很初级。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:24:51.637

模型绑定很容易。不要害怕。强类型视图使您的代码保持干净，以便将来的可读性和可维护性。微软发布了这些新功能供我们这样的人使用。我们不应该害怕那些！

为什么不使用属性来保存 DateTime 值并使用其他一些库为**最终用户提供良好的日期选择体验**？jQuery UI 日历是您能想到的一种选择。

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

将 DateTime 类型属性添加到您的 ViewModel

```
public class AlbumViewModel
{
  public int ID { set;get;}
  public DateTime CreatedDate { set;get;}
} 
```

并且在您的 get 操作方法中，您可以将此视图模型的对象返回给视图。

```
public ActionResult AddAlbum()
{
  AlbumViewModel objItem=new AlbumViewModel();
  return View(objItem);
} 
```

使用此视图模型的强类型视图并使用 jQuery UI 日历获取日历。

```
 @model AlbumViewModel
 //include jQuery and jQuery UI 
 @using (Html.BeginForm())
 {
    <p>Select Date
     @Html.TextBoxFor(m=>m.CreatedDate)
     <input type="submit" value="Save" /> 
    </p>
 }
 <script type="text/javascript">
    $(function() {
      $( "#CreatedDate").datepicker();
    });
  </script> 
```

并在您的帖子中

```
[HttpPost]
public ActionResult AddAlbum(AlbumViewModel objItem)
{
  //Check the objItem.CreatedDate here. Save it or do whatever you want 
  return View(objItem);
} 
```

# python - 为什么 django-lint 告诉我 `auto_now_add` 已弃用？

> ID：10195020
> 
> 赞同：8
> 
> 时间：2012-04-17T16:15:42.170
> 
> 标签：python, django, datetime, last-modified, pylint

嗨，Djangonauts 伙伴们：

[我用django-lint](https://chris-lamb.co.uk/projects/django-lint/)检查了我的项目，它产生了：

```
W:211,16:MyModel: timestamp: Uses superceded auto_now or auto_now_add 
```

[提交](https://github.com/lamby/django-lint/commit/131d6cdaa83e7e196246387471c321991ef59696)消息：

```
auto_now/auto_now_add not technically deprecated, but they still suck. 
```

为什么他们说 auto_now/auto_now_add “suck”？使用这两个字段参数实现 created/last-updated 模式没有问题。

这种模式有更好的方法吗？自定义字段类？为什么（如果这种方法更好）它没有被集成到 Django 中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T16:18:06.367

正确的解决方法是将可调用对象作为`default`返回适当日期时间的字段传递，例如`datetime.datetime.now`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:25:16.957

`auto_now`并且`auto_now_add`被认为是有害的，因为您绝对无法通过 django 更改值（例如，在管理界面中）。

这与其他标志不一致，django 人通常不喜欢这种魔法。

# java - 通过按钮单击 i GWT 从 servlet 下载图像？

> ID：10195021
> 
> 赞同：0
> 
> 时间：2012-04-17T16:15:43.293
> 
> 标签：java, gwt, servlets

我使用该代码创建了 servlet：[How to get image with servlet and display it using GWT Image class?](https://stackoverflow.com/questions/6491025/how-to-get-image-with-servlet-and-display-it-using-gwt-image-class)
我使用该代码创建按钮：[How to download a file via a button click i GWT?](https://stackoverflow.com/questions/3684666/how-to-download-a-file-via-a-button-click-i-gwt)
我的 web.xml 文件中到 servlet 的映射是这样的：
`<servlet-mapping>`
`<servlet-name>MyImageServlet</servlet-name>`
`<url-pattern>*.images</url-pattern>`
`</servlet-mapping>`

我用获取参数“name”给出文件的名称。
问题是，当我单击按钮时，文件名始终是“servlet.images”。

当用户想要下载图像时，如何使用正确的名称重命名图像？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:30:58.393

在小服务程序中。

```
response.setHeader("Content-Disposition",
                     "attachment;filename=downloadname.txt"); 
```

# validation - 是否有一种 RESTful 方式来确定 POST 是否会成功？

> ID：10195024
> 
> 赞同：5
> 
> 时间：2012-04-17T16:16:04.683
> 
> 标签：validation, rest, transactions, rollback

是否有一种 RESTful 方法来确定 POST（或任何其他非幂等动词）是否会成功？在您基本上需要针对不同服务执行多个幂等请求的情况下，这似乎很有用，其中任何一个都可能失败。如果这些请求可以在“事务”中完成（即支持回滚）会很好，但由于这是不可能的，另一种方法是在实际执行之前检查每个请求是否会成功。

例如，假设我正在构建一个电子商务系统，允许人们购买印有自定义文本的 T 恤，并且该系统需要集成两种不同的服务：T 恤打印服务和支付服务。它们中的每一个都有一个 RESTful API，任何一个都可能失败。（例如，印刷公司可能会拒绝在 T 恤上打印某些文字，如果信用卡过期，银行可能会抱怨。）有没有办法推测性地执行这两个请求，所以我的系统只会继续如果这两个请求看起来都有效？

如果不是，这个问题可以用不同的方式解决吗？`POST`通过with创建资源`status = pending`，并将其更改为`status = complete`是否所有请求都成功？（`DELETE`更棘手...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:04:25.337

HTTP 为您的场景定义了 202 状态代码：

> 202 接受
> 
> 请求已被接受处理，但处理尚未完成。该请求最终可能会或可能不会被执行，因为在实际进行处理时它可能会被禁止。无法从诸如此类的异步操作中重新发送状态代码。
> 
> 202 响应是故意不置可否的。它的目的是允许服务器接受对其他进程的请求（可能是一个每天只运行一次的面向批处理的进程），而不需要用户代理与服务器的连接持续到进程完成。与此响应一起返回的实体应该包括请求当前状态的指示以及指向状态监视器的指针或用户可以期望何时完成请求的一些估计。

来源：[HTTP 1.1 状态码定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

这与 201 Created 类似，只是您表示请求尚未完成且实体尚未创建。您的响应将包含代表“订单请求”的资源的 URL，因此客户可以通过此 URL 检查订单的状态。

* * *

更直接地回答您的问题：在您提出请求之前，无法“测试”请求是否会成功，因为**您要求的是千里眼。**

当您将来尝试提出请求时，无法预见可能发生的技术问题的范围。网络可能不可用，服务器可能无法访问它的数据库或它所依赖的外部系统，可能会断电并且服务器处于离线状态，流浪的中微子可能会进入你的记忆并撞到 0为 1 导致灾难性内核故障。

为了使用远程服务，您需要将任何请求的可能失败与任何其他进程隔离开来。

对于您的具体问题，如果服务没有交易安全性，您就不能在其中烘烤任何东西，您必须以更真实的方式处理这个问题。我想到了几个选项：

1.  让 T 恤公司给你一个“测试”机制，这样你就可以看到他们是否会在没有实际下达的情况下处理任何给定的订单。与他们下订单可能是一个两阶段操作，您在第一阶段构建订单（此时他们验证其创建），然后您随后要求处理订单（在您付款后成功地）。

2.  先用信用卡付款，然后将您的订单转为“已付款”状态。然后尝试使用 T-Shirt 服务作为异步流程完成订单。如果履行失败并且您可以确定客户试图打印公司不准备生产的东西，您将不得不联系他们以更改他们的订单或退款。

大多数组织将采用第二种方法，因为它技术简单并且降低了业务风险。它还有一个好处是能够应付不可用的 T-Shirt 服务；异步过程只是等待服务可用并在那时完成订单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:39:17.583

确切地。这可以按照你在最后一句话中的建议来完成。这个想法是分离代表“订单接受”的“持续请求”的资源创建（除非网络故障，否则将始终有效），这可以稍后决定。由于 POST 返回“位置”标头，因此您可以随时检索请求的“状态”。

在某些时候，它可能会被接受或拒绝。这可能是瞬时的，也可能需要一些时间，因此您必须设计具有这些限制的服务（即允许客户检查他/她的订单是否被接受，或运行某种每小时/每日服务来收集接受的请求） .

# c# - 消息框显示没有空格？

> ID：10195027
> 
> 赞同：2
> 
> 时间：2012-04-17T16:16:24.850
> 
> 标签：c#, visual-studio-2010, message

当我单击一个按钮时，我希望弹出一个消息框，显示工资最低的员工。这些员工通过文本框输入并存储在数组中。该类称为“员工”。

我已经让它工作了，但是例如，如果我输入 ID：1234，名字：Bob，姓氏：Styles，Salary：24，消息框会显示：“1234BobStyles24”，没有空格。我怎样才能解决这个问题？这是我的代码：

```
 private void lowestSalaryButton_Click(object sender, EventArgs e)
    {
        decimal minSalary = employees.Min(em => em.YearSalary);
        IEnumerable<Employee> poors = employees.Where(em => em.YearSalary == minSalary);
        poors.Count();
        foreach (var poor in poors)
        MessageBox.Show(minSalary.ToString("C") + poor.FirstName + poor.LastName +   
        poor.EmployeeId, "Min salary");

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T16:17:47.193

只需将其更改为：

```
MessageBox.Show(minSalary.ToString("C") + " " + poor.FirstName  + " " + poor.LastName  + " " + poor.EmployeeId, "Min salary"); 
```

或者更好的方法是：

```
string message = string.Format("{0} {1} {2} {3}", minSalary, poor.FirstName, poor.LastName, poor.EmployeeId);

MessageBox.Show(message, "Min salary"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:18:43.010

像这样的东西：

```
 string spaceInBetween  =new string(' ', 2);
      MessageBox.Show(minSalary.ToString("C") + 
                  spaceInBetween   +  poor.FirstName + 
                  spaceInBetween   + poor.LastName +  
                  spaceInBetween + poor.EmployeeId, "Min salary"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T16:19:21.030

在您的代码中：

```
 MessageBox.Show(minSalary.ToString("C") + poor.FirstName + poor.LastName +   
        poor.EmployeeId, "Min salary"); 
```

你就是这样做的

您可以使用

```
String.Format(" {0} {1} [2} {3}, Min salary",minSalary.ToString("C"), poor.FirstName , poor.LastName ,  poor.EmployeeId ) 
```

或者，您添加自己的空间

```
poor.Firstname + " " + poor.Lastname 
```

# mysql - 如何在MYSQL中只获得一次时间

> ID：10195028
> 
> 赞同：2
> 
> 时间：2012-04-17T16:16:35.157
> 
> 标签：mysql

我想节省用户注册的时间。这是我的表格数据

```
nic    name    age   time
190    ali      27   2012-04-13 17:31:19
217    bilal    32   2012-04-15 02:00:40
382    hamza    21   2012-04-17 20:59:29 
```

我在 MYSQL 中手动创建了时间属性

```
Column : time
Type TIMESTAMP
Default : CURRENT_TIMESTAMP
attributes: on update CURRENT_TIME 
```

现在我想永久保存这个时间。。当注册用户更新他的个人资料时，时间会自动更新。

有什么方法可以不更改更新时间，我只想在用户注册时永久保存时间，而不是在任何更新时更改它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:18:25.253

不要指定`ON UPDATE CURRENT_TIMESTAMP`. 相反，仅依赖于并从您的语句中`DEFAULT CURRENT_TIMESTAMP`省略该列。`INSERT`

通过包含`ON UPDATE`规范，您将强制时间戳列在行更改时更改。你不需要那个。

```
/* Omit the time column on insert: time will get the default value. */ 
INSERT INTO user (nic, name, age) VALUES ('newuser', 'New user Name', 33); 
```

# sql - “标签”搜索/排除查询设计问题

> ID：10195029
> 
> 赞同：2
> 
> 时间：2012-04-17T16:16:37.377
> 
> 标签：sql, photo-tagging

背景：我正在做一个自制项目来管理我自己的图像集合，并且一直在尝试实现基于标签的搜索，以便我可以轻松地筛选它们。

现在，我正在使用 RedBean 的标记 API 将标记应用于每个图像的数据库条目，但是我被困在我的实现的特定细节上；目前，允许搜索多个标签将优化搜索的标签（搜索“ABC XYZ”时，标记的图像必须具有标签“ABC”*和*“XYZ”），

我必须使用服务器端语言而不是 SQL 来处理一些处理，然后运行（可选）第二个查询以验证任何返回的图像都没有明确从结果中排除的标签。（搜索“ABC -XYZ”时，标记的图像必须有标签“ABC”而**不是**“XYZ”）。

这里的问题是我当前的方法要求我通过我的服务器端代码运行所有结果，并且对合理分页/结果偏移的任何尝试都不准确。

我的目标是通过一个查询仅获取`post`包含请求标签（并且不包含任何排除标签）的表行，并且仍然能够为我的查询使用 LIMIT/OFFSET 参数以获得合理的分页结果。

表模式如下：

```
Table "post"
Columns:
  id (PRIMARY KEY for post table)
  (image metadata, not relevant to tag search)

Table "tag"
Columns:
  id (PRIMARY KEY for tag table)
  title (string of varying length - assume varchar(255))

Table "post_tag"
Columns:
  id (PRIMARY KEY for post_tag table)
  post_id (associated with column "post.id")
  tag_id (associated with column "tag.id") 
```

如果可能的话，我还希望能够拥有特定于`post`表列的 WHERE 条件。

我应该使用什么查询结构？我一直在玩左连接，但无法获得解决此问题所需的确切结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:27:36.670

这是基本思想：

这`LEFT OUTER JOIN`是与您要排除的标签匹配的帖子集。查询中的最后一个`WHERE`子句确保这些帖子都不匹配第一个`post`表中的条目。

这`INNER JOIN`是与所有标签匹配的帖子集。请注意，第二个必须与您在`IN`子句中提供的唯一标签名称的数量相匹配。

```
select p.*
from post p
left outer join (
    select pt.post_id    
    from post_tag pt
    inner join tag t on pt.tag_id = t.id
    where t.title in ('UVW', 'XYZ')
) notag on p.id = notag.post_id 
inner join (
    select pt.post_id    
    from post_tag pt
    inner join tag t on pt.tag_id = t.id
    where t.title in ('ABC', 'DEF')
    group by pt.post_id
    having count(distinct t.title) = 2
) yestag on p.id = yestag.post_id 
where notag.post_id is null
--add additional WHERE filters here as needed 
```

# java - 在大图上计算 SCC 时的 Java 堆栈溢出

> ID：10195034
> 
> 赞同：0
> 
> 时间：2012-04-17T16:16:55.350
> 
> 标签：java, graph, stack, stack-overflow

我有一个包含近 1 百万个节点的图，我在其上计算强连通分量。我已将 vm 的堆大小增加到 10240 mb，但它仍然抛出此异常：

```
Error: 875714
Exception in thread "main" java.lang.StackOverflowError
    at java.util.Stack.push(Stack.java:67) 
```

我绝对确定代码不是问题，而是大小。我还可以做些什么？

更新：无论我设置 vm 的堆大小如何，都会在 6 秒后抛出 StackOverflowError。

如果我无法解决 StackOverflow.com 上的 StackOverflowError，我不知道还能去哪里 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:23:55.860

请记住，这`StackOverflowError`与以下无关`java.util.Stack`：当调用堆栈没有更多空间（即递归太深）时引发错误，而不是在`Stack`对象中没有空间时引发错误。

我建议的第一件事是修改算法。我的盲目猜测是您正在使用递归来访问邻居节点，这会导致溢出。尝试使用循环代替递归。

出于短期目的，您还可以尝试使用`-Xss`. 顺便说一句，请记住每个线程都有自己的堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:25:15.190

不要将 a`StackOverflowError`与混淆`OutOfMemoryError`。A`StackOverflowError`发生在“[应用程序递归太深](http://docs.oracle.com/javase/7/docs/api/java/lang/StackOverflowError.html)时”，而 an`OutOfMemoryError`发生在“[垃圾收集器无法提供更多可用内存](http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html)”时。

由于您得到`StackOverflowError`s，因此请尝试找到可以将某些递归转换为循环的位置。那应该有帮助。

# java - 如何知道另一个应用程序何时开始启动？

> ID：10195036
> 
> 赞同：2
> 
> 时间：2012-04-17T16:16:59.477
> 
> 标签：java, android

> **可能重复：**
> [Android：应用程序保护器应用程序如何工作？](https://stackoverflow.com/questions/4838546/androidhow-does-application-protector-app-works)

新应用程序开始启动时如何通知我？明确地说，我单击应用程序图标，然后应用程序开始启动，我想将我的服务设置为该事件的观察者（如果有的话）。在应用程序启动之前是否有任何事件或某种方式知道这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:14:40.257

如果我是你，我会打电话给[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)

```
getSystemService(Context.ACTIVITY_SERVICE) 
```

然后使用以下代码设置我的程序：

```
private final static Handler updateHandler = new Handler();
private static long WAKEUP_INTERVAL = 10000;    // 10secs?

private Runnable periodicUpdate = new Runnable() {
    @Override
    public void run() {
        checkRunningProcesses();
        updateHandler.postDelayed(this, WAKEUP_INTERVAL);
    }
}; 
```

定期检查以下两件事：

1.  检查[getRecentTasks()](http://developer.android.com/reference/android/app/ActivityManager.html#getRecentTasks%28int,%20int%29)以了解用户最近启动了什么（需要[GET_TASKS](http://developer.android.com/reference/android/Manifest.permission.html#GET_TASKS)权限）
2.  从[getRunningAppProcesses()](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)获取并在某处保留正在运行的进程列表，以防万一选择了太长的定期检查间隔并且添加/删除了某些进程但未在 getRecentTasks() 中显示

这样，我无法立即收到有关程序启动的通知，但可以很快（可能是几秒钟后）找到有关它的信息，以便对其进行处理。

还有一件事，当屏幕变暗时停止检查以节省电池可能是一个明智的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:29:35.960

[android监听应用程序启动](https://stackoverflow.com/questions/7596488/android-listen-for-app-launch)

你不能真的用意图或类似的东西来做这件事。看看这家伙的蛮横。不是一个很好的解决方案，但你会得到最接近的解决方案。

# visual-studio-2010 - 如何使用 Resharper 将插入符号移动到 VS2010 中的行尾？

> ID：10195039
> 
> 赞同：2
> 
> 时间：2012-04-17T16:17:12.160
> 
> 标签：visual-studio-2010, resharper, coderush

我正在使用 Vs2010 和 ReSharper 6。

当我输入带引号的字符串时，然后按 ENTER。

“+”显示在行尾，新的引用已经出现。

我希望没有“+”和一对引号出现。你可以帮帮我吗？

哦，我在VS2010中安装了CodeRush。CodeRush和ReSharper冲突？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:19:44.093

您可以使用智能完成 Ctrl-Shift-Enter。然后 R# 将添加一个分号并移动到下一行。

# asp.net-mvc-3 - Unity.Mvc 的依赖注入替代方案

> ID：10195044
> 
> 赞同：0
> 
> 时间：2012-04-17T16:17:29.767
> 
> 标签：asp.net-mvc-3, dependency-injection, asp.net-mvc-4

我一直在使用 Unity.Mvc3 作为我的依赖注入机制。

有哪些可用的替代方案？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:41:10.530

我目前正在使用[autofac](http://code.google.com/p/autofac/)。但是我知道很多人都在使用 StructureMap，而且很多人更喜欢 Ninject。Afaik，虽然 autofac 的性能最好（其次是 StructureMap）

# python - 从 Ruby 客户端访问 Python XML-RPC 服务

> ID：10195049
> 
> 赞同：1
> 
> 时间：2012-04-17T16:17:39.750
> 
> 标签：python, ruby, xml-rpc

我有一个 XMLRPC 服务器正在运行：

```
#!/usr/bin/env python

from SimpleXMLRPCServer import SimpleXMLRPCServer
import subprocess
import os

def testls():
    retcode=subprocess.call(["ls", "/etc"])
    return retcode

server = SimpleXMLRPCServer(('192.168.15.20',8888),logRequests=True)

server.register_function(testls)

server.register_introspection_functions()
try:
    server.serve_forever()
finally:
    server.server_close() 
```

我需要能够从 ruby​​ 客户端调用它。根据我的发现。似乎应该是这样的：

```
require xmlrpc/client
server = XMLRPC::Client.new2("http://192.168.15.20:8888/") 
```

但它返回以下内容，这表明它无法访问该服务。

```
=> #<XMLRPC::Client:0x2ab0f5caacf8 @parser=nil, @timeout=30, @path="/", @password=nil, @http_header_extra=nil, @use_ssl=false, @host="192.168.15.20", @user=nil, @proxy_port=nil, @auth=nil, @cookie=nil, @create=nil, @port=8888, @http=#<Net::HTTP 192.168.15.20:8888 open=false>, @proxy_host=nil, @http_last_response=nil> 
```

我在以下方面取得了更好的成功，但我无法调用该方法：

```
irb(main):069:0> server = XMLRPC::Client::Proxy.new("http://192.168.15.20","8888")
=> #<XMLRPC::Client::Proxy:0x2ab0f5c4ef48 @args=[], @server="http://192.168.15.20", @meth=:call, @prefix="8888.">
irb(main):070:0> s = server.call('system.listMethods')
NoMethodError: undefined method `call' for "http://192.168.15.20":String
        from /usr/lib/ruby/1.8/xmlrpc/client.rb:608:in `send'
        from /usr/lib/ruby/1.8/xmlrpc/client.rb:608:in `method_missing'
        from (irb):70
        from :0 
```

调用从 Ruby 到 Python XML-RPC 服务器的调用的适当代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T23:28:14.457

我知道这是一个相当古老的问题，但由于它没有选定的答案，我想我会分享我的见解：

在 ruby​​ 中，类`XMLRPC::Client`代表服务器的一个较低级别的接口：

```
server = XMLRPC::Client.new( "192.168.15.20", 8888 )
server.call 'system.listMethods' 
```

该类`XMLRPC::Client::Proxy`是服务器（部分）的更高级别接口，允许更自然的服务器方法调用：

```
system = server.proxy('system')
system.listMethods 
```

同样，要访问服务器的“根”方法（如那些`register_function`在 Python 中注册的方法）：

```
main = server.proxy
main.testls 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:12:07.107

我不熟悉 Ruby 中的 xmlrpc，但我认为您必须将 XMLRPC::Client 对象传递给 XMLRPC::Client::Proxy。试试这样的东西：

```
client = XMLRPC::Client.new( "http://192.168.15.20", 8888 )
server = XMLRPC::Client::Proxy.new( client, 8888 )
server.call "system.listMethods" 
```

也许它是这样工作的。

# java - 同步对象设置为空

> ID：10195054
> 
> 赞同：28
> 
> 时间：2012-04-17T16:17:46.970
> 
> 标签：java, multithreading, synchronization

我有两个线程`Thread1`和`Thread2`

```
//Within Thread1     
synchronized(obj1)  
{  
    obj1 = null;  
}  

//Within Thread2  
synchronized(obj1)  
{  
    do something  
} 
```

如果 jvm 首先执行 thread1 并将 obj1 设置为 null，那么 thread2 会立即看到该更改，还是需要时间并且 jvm 仍然可以运行 thread2 同步块，因为 obj1 尚未为 null？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-17T16:20:06.973

这几乎肯定会破坏同步抽象——我不相信`thread2`会立即看到变化。您永远不应该更改您正在同步的对象的引用，更不用说将其设置为`null`，这将导致`NullPointerException`任何进一步尝试对其进行同步。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-17T16:22:25.033

首先让我强调，修改用于同步的变量是一件**非常糟糕的事情**。如果将其用作监视器，则`obj1`应该并且永远不要触摸。`final`

话虽如此，回到你的问题：

如果 JVM 首先执行 Thread1，它会同步 on `obj1`，将其设置为`null`，然后线程退出。第二个线程想要同步`obj1`，`NullPointerException`将被抛出。因为修改`obj1`是在同步块中进行的，所以保证 Thread2 会看到更新的值（所以：`NullPointerException`保证）。

如果 Thread1 在获得锁后`obj1`但在清除引用之前被中断，则 Thread2 将锁定`obj1`并等待直到 Thread1 完成。然后它将成功进入监视器，因为之前引用的对象`obj1`仍然存在。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-17T17:43:16.977

`synchronized` synchronizes on the object, and not the reference. By setting `obj1` (a reference) to null, thread2 can't synchronize on the object formerly pointed to by `obj1`, you'll get a `NullPointerException` instead.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-28T14:41:59.900

A quick fix is to make the object a simple array of 1 element and refer to the array for synchronization, e.g.,

Object[] obj1 = {null};

The element can be null without impacting the existence of the array. Granted, this still breaks the "rule" of not using the object itself in synchronization, but unless your code complicates matters elsewhere, this quick fix should work as expected.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T17:47:39.790

The change is immediate. When Thread 1 "owns" the lock, it can change the value of obj1 at will. Thread 2 has to wait until Thread 1 releases the lock. It will definitely see obj1 == null

# java - Wicket 和多线程业务对象

> ID：10195056
> 
> 赞同：1
> 
> 时间：2012-04-17T16:17:50.770
> 
> 标签：java, multithreading, timer, wicket

所以我在序列化、Wicket 和多线程项目方面的经验有些有限，所以请多多包涵。

本质上，我的 Web 应用程序类正在实例化一个 POJ（parentObject），它创建一个新的计时器并实例化几个其中也有计时器的 POJ（childObjects）。这些子对象存储在 parentObject 类的列表中。我的 wicket 应用程序中的页面需要访问 parentObject，因此我将其设置为可访问：

```
public Object getParentObject
{
   return this.parentObject;
} 
```

它在每个页面中被检索，如下所示：

```
((MyApplication)Application.get()).getParentObject() 
```

当前的问题是 parentObject 和 childObjects 的 timertask 不再像应有的那样每分钟都被调用。我的日志记录了父对象的第一次启动，但是日志消息永远不会再次输出，表明父对象的 timertask 的 run() 方法不是每分钟都在执行。子对象也是如此。似乎计时器只执行一次。下面是我所拥有的一些伪代码

```
public class childObject implements Serializable
{
    private transient NamedParameterJdbcTemplate njt;
    private transient Timer timer;

    public childObject(DataSource ds)
    {
        this.njt = new NamedParamterJdbcTemplate(ds);
    }

    public void start()
    {
        timer = new Timer();

        timer.schedule(new TimerTask(){

            public void run()
            {
                //do some stuff that is never happening
            }

        }, 0, 60000);
    }
}

public class ParentObject implements Serializable
{
    private DataSource ds;
    private List<ChildObject> childObjects;
    private transient Timer;

    public ParentObject(DataSource ds)
    {
        this.ds = ds;
        //add some stuff to childObjects

        timer = new Timer();

        timer.schedule(new TimerTask(){

            public void run()
            {
                for(some condition)
                {
                    //Do some stuff

                    if(/*condition is met*/)
                    {
                             //starts the child's timer to do stuff
                        childObjects.get(i).start();
                    }
                }
            }

        }, 0, 60000);
    }
}

public MyApplication extends WebApplication
{
    private ParentObject object;
    private DataSource ds;

    public void init()
    {
        super.init();

        ApplicationContext context = new ClassPathXmlApplicationContext("/applicationContext.xml");
        ds = (DataSource) context.getBean("dataSource");

        parentObject = new ParentObject(ds);
    }
} 
```

我什至需要使这些对象可序列化吗？对象本身永远不会附加到检票口组件，尽管作为其类成员的字符串、整数、日期类型的变量是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:20:04.890

Wicket 基本上是单线程的（由于难以正确使用多线程，大多数优秀的 GUI 框架也是如此），您应该避免实例化任务。（将计时器标记为瞬态将意味着它在反序列化时丢失，这可能是您的问题的原因）

您应该重新架构您的应用程序，使其拥有一个服务层，该服务层可由 Wicket 组件按需访问，可能使用 LoadableDetachableModels。服务层可以有任务等，因为它将由 Spring 而不是 Wicket 管理。

# maven - Jenkins - MavenBuild.getMavenArtifacts() 返回 Null

> ID：10195057
> 
> 赞同：0
> 
> 时间：2012-04-17T16:17:59.597
> 
> 标签：maven, groovy, hudson, jenkins

从 Jenkins 1.460 开始，调用`getMavenArtifacts()`的实例`MavenBuild`返回 null，而以前可以正常工作。

Jenkins API 是否发生了重大变化，或者这是一个 Jenkins 错误？

我正在执行的代码是构建后的 System Groovy 脚本，它将构建的 Maven 版本公开为环境变量，供 Jenkins 构建过程中的后续步骤使用：

```
import hudson.model.*;
import hudson.util.*;

def thr = Thread.currentThread();
def currentBuild = thr?.executable;
def mavenVer = currentBuild.getMavenArtifacts().getModuleRecords()[0].mainArtifact.version;
def newParamAction = new hudson.model.ParametersAction(new hudson.model.StringParameterValue("MAVEN_VERSION", mavenVer));
currentBuild.addAction(newParamAction); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T08:33:37.330

我找到了一种解决方法，尽管我不知道为什么对 API 进行了未经宣布的重大更改 - 希望这是一个可以修复的错误。

代替：

```
def mavenVer = currentBuild.getMavenArtifacts().getModuleRecords()[0].mainArtifact.version; 
```

为了

```
def mavenVer = currentBuild.getParent().getModules().toArray()[0].getVersion(); 
```

# jquery - 使用 Font-Awesome - 在 Chrome 中，图标显示通过标记不显示任何样式，也不触发任何事件

> ID：10195069
> 
> 赞同：5
> 
> 时间：2012-04-17T16:18:49.137
> 
> 标签：jquery, css, twitter-bootstrap, font-awesome, jquery-events

我正在使用 Font-Awesome，它是用于 Twitter Bootstrap 的标志性字体。

标记 -

```
<i class="icon-remove reset-preference-button"></i> 
```

CSS -

```
.reset-preference-button {
cursor: pointer;
} 
```

JavaScript -

```
$(".reset-preference-button").on("click", function() {
// ... do something
}); 
```

当我呈现页面时，光标悬停在元素上时不会变为指针。当我单击图标时也没有任何反应。在绑定事件之前，我确保该图标存在。

请注意，我使用的是元素而不是其他任何东西。好像当我明确设置这个元素的样式时`"display: inline-block;"`它工作正常。

根据我的测试，这仅发生在 Chrome 上。在 Firefox 和 IE 中运行良好。我当前的 Chrome 版本是 18，但它也会影响其他版本。

我已经在[https://github.com/FortAwesome/Font-Awesome/issues/157提交了一个错误](https://github.com/FortAwesome/Font-Awesome/issues/157)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:45:14.317

发生这种情况是因为元素中没有任何内容`<i>`- font awesome 使用 css 伪元素 :before 用 css 呈现图标。

您可以将高度和宽度设置为 1em 并将显示设置为 :block

```
i {
  width: 1em;
  height: 1em;
  display:block;
  cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-15T12:36:53.347

更简洁的方法是简单地将样式添加到`:before`元素（因此您不必担心对象的高度或宽度）。

这是我的 CSS 示例代码：

```
i:before {
  cursor: pointer;
} 
```

# java - 使用其他类的方法“覆盖”变量

> ID：10195071
> 
> 赞同：1
> 
> 时间：2012-04-17T16:18:53.907
> 
> 标签：java

我对 java 比较陌生，并且对 javafx 进行了一些实验

我想在使用 B 类的方法时更改 A 类的变量

Main：这是主类，它包含所有需要的东西（显示primaryStage等）它确实有一个构造函数，所以它**没有**创建一个实际的“主对象”

```
public class Main extends Application {
Sub sub = new Sub();
int a;

// stuff

public void aMethod() {
sub.subMethod();
}

} 
```

sub：这个类唯一的目的是改变变量a，它不包含一个构造函数来创建一个“子对象”

```
public class Sub {
//stuff

subMethod(){
int a = 5;
} 
```

如果我把这条线`Main main;`放在 Sub 类中，如果我正在调用 subMethod()，程序会给我一个空指针异常。好的...我猜是因为我实际上并没有创建主要对象...到目前为止一切都很好。

但是...如果我输入该行`Main main = new Main();`，程序甚至不会开始给我一个“运行应用程序时出现异常”错误

奇怪的是，如果我把这条线`Main main = new Main();`放在子方法中......

```
subMethod(){
Main main = new Main();
int a = 5;
} 
```

...该死的东西实际上有效...（它很慢，猜测是因为每次调用该方法都会创建一个新对象）

为什么呢？

它是如何正确完成的？:) （使用其他类的方法“覆盖”变量）

问候红

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:23:56.810

您不应在程序中创建多个实例`Main`。可能`Main`不是存储可变状态（类成员）的最佳位置，但如果需要，您需要传递 to 的实例`Main`（`subMethod`并`a`公开，或提供公共 setter 方法）：

```
public class Main extends Application {
Sub sub = new Sub();
public int a;

// stuff

public void aMethod() {
sub.subMethod(this);
}

}

public class Sub {
//stuff

subMethod(Main main){
main.a = 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:28:39.053

因此，您需要一种方法来更改另一个类的字段的值。有几种方法可以做到这一点。如果你有这门课

```
public Class A {
   private int a;
   ...

   public void setA(int a) {
      this.a = a;
   }
} 
```

你可以做这样的事情

```
public Class B {
   private static A instance;

   ....

   public static void setA(int a) {
      instance.setA(a);
   }
} 
```

或者您可以将 A in 作为 set 方法的参数

```
 public Class B {
  ...

   public static void setA(A a, int val) {
       a.setA(val);
   }
} 
```

如果您想直接访问上的字段，`A`则必须将它们公开（这通常不是您想要做的，因为它提供了完全访问权限，而不仅仅是提供其他类所需的访问权限）

```
Public Class A {
  public int a;
  ...
} 
```

然后你可以做

```
Public Class B {
    ...
    public static void setVal(A a, int val) {
         a.a = val;
     }
} 
```

此外，如果您没有该方法`setA`，`B`因为`static`您必须在类似的情况下`instance`调用`B`它

```
B b = new B();
b.setA(a, val); 
```

好像它是静态的，你在哪里调用它`class B`

```
B.setA(a, val); 
```

# css - 无法确定正在应用/继承哪个 CSS 属性

> ID：10195073
> 
> 赞同：0
> 
> 时间：2012-04-17T16:19:02.207
> 
> 标签：css, twitter-bootstrap

我正在使用来自 twitter bootstrap css 的一些组件，并已组合成一个自定义 css 文件。

我主要使用与工具栏相关的组件并设置了工具栏。

我应用了以下额外的 css，但是对于 .signinbox_left: hover 由于某种原因，悬停框比周围的 li 大得多。我已经尝试了边距、填充和高度的组合来让它工作，但似乎有一些我无法理解的 css 属性正在应用。此外，我不知道如何覆盖此属性。

这是托管示例：[http ://dl.dropbox.com/u/3417415/Toolbar/toolbar.html](http://dl.dropbox.com/u/3417415/Toolbar/toolbar.html)

这是未按预期方式工作的 css。将鼠标悬停在“创建帐户”上以了解我的意思。

```
.signinbox_left :hover{

    background-color: red;
    float:right;
    position:relative;
    -moz-border-radius: 8px 0px 0px 8px;
    -webkit-border-radius: 8px 0px 0px 8px;
    -khtml-border-radius: 8px 0px 0px 8px;
    border-radius: 8px 0px 0px 8px;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:35:42.010

尝试这个。移除浮子和位置。

```
.signinbox_left:hover{

  background-color: red;
  -moz-border-radius: 8px 0px 0px 8px;
  -webkit-border-radius: 8px 0px 0px 8px;
  -khtml-border-radius: 8px 0px 0px 8px;
  border-radius: 8px 0px 0px 8px;

} 
```

请注意，类和 :hover 之间没有空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:35:40.930

使用 SRWare Iron (Chrome，真的) 检查器，我看到该元素具有 Dimension metrics `padding: 10 10 11 4`。

在 css 中有一个`.topbar div > ul a, .nav a`带有实际定义的定义`padding: 10px 10px 11px;`（toolbar.css 第 14 行）。禁用该行会使元素适当地缩小。

我将从那个 .topbar 定义开始。

# java - Collection 类有一个私有构造函数，为什么不把它抽象化呢？

> ID：10195080
> 
> 赞同：2
> 
> 时间：2012-04-17T16:19:29.530
> 
> 标签：java, collections

```
public class Collections {
    // Suppresses default constructor, ensuring non-instantiability.
    private Collections() {
    }
... 
```

所有包含的方法都是静态的，如果我编写类似的代码，我会将 Collections.class 设为抽象，但仍然有一个私有构造函数 - 为什么该类未定义为抽象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T16:21:35.893

一个类`abstract`意味着它可以（并且*打算*）被扩展，而`Collections`类不是这种情况。这是我的猜测。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T16:21:45.680

该类`Collections`并不意味着扩展*或子类*化——它只是作为静态实用程序方法的提供者。如果它是抽象的，用户可以将其子类化，而 JDK 设计者不希望这样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T16:21:59.237

你可以做到

*   一个`abstract`班级
*   或`enum`没有实例的
*   或一`final`堂课

恕我直言，这取决于第一次编写课程时的风格，因为以后有一点理由改变它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T16:22:16.807

除了它的“技术”方面（即无法实例化）之外，`abstract`还有一个面向库用户的语义方面：它传达了其他人扩展类的*意图*。这不是你应该做的事情`Collections`，因此标记它`abstract`是一个错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T16:24:29.707

这是一种常见的做法，用于只有静态方法的实用程序类。使类抽象没有意义，因为没有定义实例方法。这是为了防止有人在不需要的地方创建实例。

```
List<String> myList = Arrays.asList("b", "c", "a");
new Collections().sort(myList); 
```

在哪里

```
List<String> myList = Arrays.asList("b", "c", "a");
Collections.sort(myList); 
```

是使用实用程序类的“正确”方式。

# c# - 您必须完成编辑当前行的gridview 验证吗？

> ID：10195092
> 
> 赞同：1
> 
> 时间：2012-04-17T16:20:20.343
> 
> 标签：c#, asp.net, visual-studio-2010, gridview

我对 asp.net gridviews 的美妙世界很陌生。到目前为止，我的 gridview 将有几行，每行都有一个编辑和更新按钮。当我单击编辑时，可编辑单元格变成文本框并且可以成功更新。但是，如果我在一行中处于编辑模式，并且单击另一行中的更新按钮，则会触发错误。

所以我的问题是，我如何验证当前行是否完成了编辑？我一直在搜索谷歌，我了解如何制作字段模板、分配控件以及验证某个单元格。但我不确定是否有办法强制某人在导致该错误之前完成编辑。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:30:35.223

[来自评论：]

为什么当行不处于编辑模式时提供更新按钮？

你可以设置[`AutoGenerateEditButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogenerateeditbutton.aspx)为`true`. 然后在单击编辑时显示更新 + 取消按钮。

# geometry - 查找 2 条光线法线的交点

> ID：10195097
> 
> 赞同：0
> 
> 时间：2012-04-17T16:20:30.470
> 
> 标签：geometry

我有 2 条射线，由一个公共点和一个方向矢量定义，我想找到 2 条射线的法线在沿法线的给定距离处相交的点，以及沿这些法线开始的射线的距离。

![在此处输入图像描述](../Images/936acc3e6615dad32ba95cea62dd2a5e.png)

所以在这个系统中，A是两条射线的公共点，B和C是方向向量，D和E是法向量的长度。

我想找到三个？点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:51:40.507

这是我的想法

首先，定义一条与现有线平行的线，即通过沿向量 B 定向的 A，但被向量 E 偏移。

定义与现有线平行的第二条线，即通过面向 A 的单独矢量 C，但被矢量 D 偏移。

找到这两条新线的交点，这应该给你最上面的吗？你正在寻找。

# java - 具有内部类和最终变量的线程化 Java 服务器

> ID：10195098
> 
> 赞同：2
> 
> 时间：2012-04-17T16:20:35.733
> 
> 标签：java, sockets, final, anonymous-inner-class

我编写了以下代码来实现线程服务器：

```
ServerSocket passiveSocket = new ServerSocket(port, maxConnections);  
while(true){
  final Socket socket = passiveSocket.accept();                       
  new Thread(new Runnable() {
      public void run() {
          //access socket as needed to communicate. E.g.:
          PrintWriter writer = new PrintWriter(socket.getOutputStream());
          //Finally close socket.
          socket.close();
      }
  }).start();
} 
```

现在这似乎可行，但经过反思，我并不真正了解下一个连接到达时最终套接字变量*套接字发生了什么。*每个线程如何与启动线程时当前的套接字实例相关联？- *final*关键字对此负责吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:23:58.050

可以这样想：`socket`作为参数秘密传递给`new Runnable`构造函数，并作为变量保存在匿名`Runnable`类中。（这实际上是它的工作原理，在字节码级别。）

创建的`Runnable`对象在其创建时包含对一个特定`Socket`值的引用，因此它可以在完成后关闭该特定套接字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:24:06.890

将`final`变量传递给匿名内部类时，该变量有效地存储在匿名类中，就好像它是一个实例变量一样。

上面的代码可以有效地翻译成：

```
private static final class RunnableAnonSubclass implements Runnable {
    private final Socket socket; 
    private RunnableAnonSubclass (Object socket) {
        this.socket = socket;
    }

    public void run() {
        //access socket as needed to communicate. E.g.:
        PrintWriter writer = new PrintWriter(socket.getOutputStream());
        //Finally close socket.
        socket.close();
    }
}

// ... 
{ 
    ServerSocket passiveSocket = new ServerSocket(port, maxConnections);  
    while(true){
        Socket socket = passiveSocket.accept();               
        new Thread(new RunnableAnonSubclass(socket)).start();
    }
} 
```

请注意，创建局部变量`final`是在匿名内部类中访问它的唯一方法。有关原因的详细信息，请参阅[Jon](https://stackoverflow.com/a/4732617/851811)关于“[为什么在匿名类中只能访问最终变量？](https://stackoverflow.com/q/4732544/851811) ”的回答。

# opengl - 仅渲染大于一个深度缓冲区但小于另一个深度缓冲区的顶点

> ID：10195099
> 
> 赞同：2
> 
> 时间：2012-04-17T16:20:36.490
> 
> 标签：opengl

我想产生一种效果，其中某些对象仅在它们落在某个空间内时才会被渲染。想想一个“神奇的解码器卷”，当它们在里面时，它会揭示秘密物体。

让我们假设秘密对象和揭示体积都是球体。我首先渲染非秘密对象。然后我将显示体积的背面渲染到深度和模板缓冲区中。如果我只渲染通过深度和模板测试的秘密对象，它们也会被绘制在显示体积的前面。我希望能够创建第二个深度缓冲区来保持显示体积的前面。有没有标准的方法来做到这一点？

我想我可能可以将近剪裁平面设置为穿过显示球体的中心。然后我可以将近剪裁平面拉回更靠近眼睛的位置，渲染显示体积的正面并将远剪裁平面设置为其中心，仅渲染大于深度测试并通过模板测试的秘密对象顶点.

这种两遍方法感觉有点难看，如果体积中有一个非秘密物体应该在一个秘密物体的前面，它可能会因为反向深度测试而被压扁。我对着色器没有太多经验，但我猜这就是要走的路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:37:58.170

文森特删除的关于着色器的答案并不是一个坏主意——每个片段计算出与显示球体中心的距离；如果距离太大的话`discard`。

否则，阴影体积会起作用，因为它们从不显示任何额外的几何体。虽然在我打字时思考，但我想你可以做的是：

*   禁用对颜色缓冲区的写入，以便您仅影响深度；
*   使用标准深度测试渲染您的场景`GL_LESS`，以建立深度值；
*   使用相同的深度测试渲染剪裁球体的背面部分；
*   启用启用渲染剪裁球体的正面部分`GL_GREATER`，因此只有当事物在它们前面时才会绘制这些面的部分；
*   启用颜色缓冲，切换到深度功能`GL_EQUAL`；
*   再次渲染场景几何体。

最终效果应该是，在前四个步骤之后，您的深度缓冲区的值仅在与剪裁几何相交的地方才等于真实值。因此，当您切换到`GL_EQUAL`颜色时，只会通过该几何图形。

具体来说，第 3 步清除了裁剪几何体后面的所有内容，第 4 步清除了前面的所有内容。隐含的假设是您的剪裁几何完全适合视锥体。

# java - springmvc 使用 json 响应

> ID：10195101
> 
> 赞同：1
> 
> 时间：2012-04-17T16:20:47.977
> 
> 标签：java, json, spring-mvc

抱歉，如果这是重复的，但我找不到任何具体的例子。

我在springmvc中有以下控制器。

```
import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        logger.info("Welcome home! the client locale is "+ locale.toString());

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate );

        return "main";
    }

} 
```

这意味着我可以访问 ${serverTime}，我的问题是，有没有一种方法可以让这个响应成为 JSON 响应，而不必在这个控制器中硬编码所有 JSON 转换代码。有没有办法我可以将一些 XML 放入配置中，这样它就会知道将响应转换为说...

{ "serverTime" : "12 12 2012" } （忽略这张脸，这可能不是正确的日期格式）

我应该提一下，“main”是视图的名称（main.jsp），所以我想让它以同样的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:39:47.603

用 注释您的方法`@ResponseBody`。

然后只需退回您的物品，`formattedDate`。

```
 @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        logger.info("Welcome home! the client locale is "+ locale.toString());

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate );

        return "main";
    }

    @RequestMapping(value = "/serverTime", method = RequestMethod.GET)
    @ResponseBody
    public String serverTime(Locale locale, Model model) {
        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        return dateFormat.format(date);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:39:34.753

有一个库用于将 Java 对象转换为 JSON，称为 gson：

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

顺便说一句，如果您想发送 Ajax 响应而不是刷新页面，请将 @ResponseBody 添加到您的方法声明中：

```
public @ResponseBody String home(Locale locale, Model model) { .. } 
```

并返回您的 JSON 字符串（假设在这种情况下您没有更新模型）。

# javascript - 如何将模型插入到特定索引中的主干.js 集合中？

> ID：10195102
> 
> 赞同：18
> 
> 时间：2012-04-17T16:20:50.177
> 
> 标签：javascript, jquery, backbone.js

我需要将模型插入到 Collection.length-2 位置的集合中。集合中的最后一个模型应始终保留在集合中的最后一个模型。

到目前为止我尝试了什么：

我向集合“页面”添加了一个“页面”模型，然后尝试通过更改它们的顺序来交换它们：

```
var insertedpage = Pages.at(Pages.length-1);
var lastpage = Pages.at(Pages.length-2);
insertedpage.set({sequence: Pages.length-1});
lastpage.set({sequence: Pages.length}); 
```

我还尝试删除最后一页，然后添加一个新页面，然后重新添加最后一页。

```
var lastpage =  Pages.pop();
Pages.add({example1: example2});
Pages.push(lastpage); 
```

这些都不起作用。新添加的页面仍然显示为集合中的最后一个模型。在此之后我需要调用某种订单函数吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-17T16:24:29.763

[`Backbone.Collection.add()`](http://backbonejs.org/#Collection-add)接受一个支持指定索引`options`的键的对象。`at`

> 通过`{at: index}`将模型拼接到指定的集合中`index`。

例子：

```
Pages.add({ foo: bar }, { at: Pages.length - 2 }) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T06:07:43.450

按照与 Rob Hruska 相同的建议，在对象中使用[`Backbone.Collection.add()`](http://backbonejs.org/#Collection-add)with 。`at``options`

```
Pages = new Backbone.Collection([
  {id:1, foo:'bar'},
  {id:2, foo:'barista'}  /* Last model should remain last */
]);

/* Insert new "page" not at the end (default) but length minus 1 */
Pages.add({id:3, foo:'bartender'}, { at: Pages.length - 1 });

Pages.at(0).id === 1; // true
Pages.at(Pages.length - 2).id === 3; // true
Pages.at(Pages.length - 1).id === 2; // true 
```

您提到这`Pages`似乎是按属性排序的`sequence`；你碰巧`comparator`在 Pages 集合上定义了一个函数吗？

另一个问题，当新页面添加到第二个到最后一个位置时，您是否要更新`sequence`集合中当前所有现有页面模型的此属性？还是该属性是为了完成您最初的问题？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T18:18:17.900

很抱歉简短的回答（没有时间回复），但看看定义一个比较器函数。

[http://backbonejs.org/#Collection-comparator](http://backbonejs.org/#Collection-comparator)

# resque - 让 resque 作业安排自己在未来运行有什么缺点？

> ID：10195108
> 
> 赞同：1
> 
> 时间：2012-04-17T16:21:15.867
> 
> 标签：resque

让 resque 工作安排自己而不是一项工作产生工人认为合适有什么缺点吗？

这是一个例子

方法一：

```
class WorkerJob

  self.peform(model_id)
    do_heavy_stuff(model_id)
    Resque.enqueue_in(3.days, WorkerJob, model_id)
  end
end 
```

或者像这样

方法二：

```
class WorkerJob1

   self.perform(model_id)
     do_heavy_stuff(model_id)
   end
end

class WorkerScheduler
   self.perform
     find_appropriate_ids_for_this_job.each |model_id|
       Resque.enqueue(Resque::WorkerJob1, model_id)
     end
   end
end 
```

WorkerScheduler 计划每天运行。我看到了优点，所以想知道接近 1 是否有任何重大缺点。

我确实看到了确保正确备份和复制 redis 的一个大问题，但无论如何都不需要这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:41:16.497

作为补充，您可以使用 redis_failover：[https ://github.com/ryanlecompte/redis_failover](https://github.com/ryanlecompte/redis_failover)

# java - 将 MEMBER OF 与由复合键标识的实体集合一起使用

> ID：10195109
> 
> 赞同：0
> 
> 时间：2012-04-17T16:21:18.660
> 
> 标签：java, jpa, persistence, jpql

我正在尝试返回一组不属于这样的集合的对象：

```
 TypedQuery<Extra> q = em
            .createQuery(
                    "SELECT e FROM Extra e, Arrangement a WHERE "
                        + "a.id = :arrid AND e NOT MEMBER OF a.extras",
                    Extra.class);
    q.setParameter("arrid", a.getId());
    return q.getResultList(); 
```

但我从中得到了一个糟糕的 SQL：

```
Caused by: org.h2.jdbc.JdbcSQLException: Subquery is not a single column query; SQL statement:
select extra0_.code as code427_, extra0_.edition_number as edition5_427_,
extra0_.totalCost as totalCost427_, extra0_.unitCost as unitCost427_,
extra0_.units as units427_ from extra_arrangements extra0_
cross join arrangements arrangemen1_
where arrangemen1_.id=? and
((extra0_.code, extra0_.edition_number) not in
  (select extra3_.code, extra3_.edition_number
   from arrangements_extra_arrangements extras2_, extra_arrangements extra3_
   where arrangemen1_.id=extras2_.arrangements_id and
   extras2_.extras_code=extra3_.code and
   extras2_.extras_edition_number=extra3_.edition_number)) [90052-161] 
```

问题是这个其他查询按预期工作：

```
 TypedQuery<Exhibitor> q = em.createQuery(
        "SELECT e FROM Exhibitor e, Edition ed WHERE ed.number = :ednum AND "
        + "e NOT MEMBER OF ed.exhibitors",
        Exhibitor.class);
    q.setParameter("ednum", e.getNumber());
    return q.getResultList(); 
```

唯一的区别是 Exhibitor 有一个列 id，而 Extra 有一个复合键：

```
@Entity
@Table(name = "exhibitors")
public class Exhibitor implements Serializable, Comparable<Exhibitor> {

    @Id
    private int id;
    @Column(length = 100)
    private String code;
    @ManyToMany
    private List<Edition> edition;
    ...
} 
```

额外的：

```
@Entity
@Table(name="extra_arrangements")

public class Extra implements Serializable {

    @EmbeddedId
    private ExtraCode id;
    private double unitCost;
    private double units;
    ...
}

@Embeddable
public class ExtraCode implements Serializable {

    private String code;
    @ManyToOne
    private Edition edition;

    //Getters and setters omitted
} 
```

知道我可能做错了什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:37:45.460

[我认为这与此](https://groups.google.com/forum/?fromgroups#!topic/h2-database/dBeNlTTXz-U)问题相同。
`H2 does not currently support that style of IN query.`

sql-query 中有问题的地方：

```
  和 （
    (
      extra0_.code,
      extra0_.edition_number
    ) 不在
    （选择 ...）
  )

```

# c# - 如果图片框为空，如何返回空，否则返回图片字节

> ID：10195110
> 
> 赞同：0
> 
> 时间：2012-04-17T16:21:24.393
> 
> 标签：c#

在我的以下代码中，如果我的 PictureBox(pbspic) 为 null，则我想返回数据 null 否则如果 PictureBox(pbspic) 包含图片我希望数据返回图片字节，以便我可以在我的数据库中保存 null 或图片

```
using (MemoryStream stream = new MemoryStream())
        {
            Bitmap bmp = new Bitmap(pbspic.Image);
            bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
            stream.Position = 0;
            byte[] data = new byte[stream.Length];
            stream.Read(data, 0, data.Length);
            return data;
        }
cmd.Parameters.Add("@Photo", SqlDbType.VarChar).Value = data;
dm2.ExecActQuery("StudentsInsert", cmd); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:23:33.103

您是否尝试过类似以下的方法？：

```
else if(pbspic == null) /* Or it could be pbspic.Image == null, depends on which is null */ 
{
   ep.SetError(tbmonfee, "Image is missing.");
   return;
}
else
{
using (MemoryStream stream = new MemoryStream())
            {
                Bitmap bmp = new Bitmap(pbspic.Image);
                bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
                stream.Position = 0;
                byte[] data = new byte[stream.Length];
                stream.Read(data, 0, data.Length);
            }

if(data == null) /* Or check data length if it's never null */ 
{
   ep.SetError(tbmonfee, "Image is missing.");
   return;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:40:15.230

尝试创建您的流的方法，然后将其调用为这样的图片

```
private byte[] GetPic(Image img)
    {
        using (MemoryStream stream = new MemoryStream())
        {
            Bitmap bmp = new Bitmap(pbspic.Image);
            bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
            stream.Position = 0;
            byte[] data = new byte[stream.Length];
            stream.Read(data, 0, data.Length);
            return data;
        }
    } 
```

用法：

```
if (pbspic.Image == null)
        {
            cmd.Parameters.Add("@Photo", SqlDbType.VarChar).Value = "NULL";
        }
        else
        {
            cmd.Parameters.Add("@Photo", SqlDbType.Image).Value = GetPic(pbspic.Image);
        }
        dm2.ExecActQuery("StudentsInsert", cmd); 
```

# python - Eclipse、PyDev 和 Python 配置错误

> ID：10195111
> 
> 赞同：4
> 
> 时间：2012-04-17T16:21:29.883
> 
> 标签：python, eclipse, configuration, pydev

我决定尝试使用 Eclipse 和 PyDev 而不是 IDLE。我成功“安装”了 Eclipse SDK 3.7。之后，我按照 PyDev 网站上显示的步骤，成功安装了插件。但是，在尝试配置我的解释器（Python 3.2.3）时，我总是收到错误，并且不知道如何解决这个问题。我既不能自动也不能手动配置它，而且 PyDev 网站上也没有提到这个错误。

尝试自动配置时，显示的消息是：

```
Unable to gather the needed info from the system.

This usually means that your interpreter is not in the system PATH.
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence. 
```

当我尝试手动配置时，显示的消息是相同的，并补充说导致此问题的一些常见原因可能是版本不兼容。我有最新的 Java（这是要求之一，Eclipse 是昨天从他们的网站下载的，是 3.7 版本（Indigo），Python 是 3.2.3 版本。

我什至尝试添加一个包含库的文件夹，因为据我了解，这也可以解决问题。但是，每当我单击`New Folder`按钮时，它什么也不做...

我在 Windows 7 32 位上运行所有这些。

如果有人能在这件事上帮助我，我将不胜感激。

谢谢

```
> **@Fabio Zadrozny:** 
>
> 1: The path to the Python interpreter is C:\Python32\python.exe 
>
> 2: The message displayed when I ran the
> interpreterInfo.py was: 
>
> C:\Windows\system32>python
> C:\eclipse-SDK-3.7-win32\eclipse\plugins\org.python.p
> ydev_2.6.0.2012041219\PySrc\interpreterInfo.py 
> 
> <xml>
> <version>3.2</version> <executable>C:\Python32\python.exe</executable>
> <lib
> path="out">C:\eclipse-SDK-3.7-win32\eclipse\plugins\org.python.pydev_2.6.0.
> 2012041219\PySrc</lib> <lib path="ins">C:\Python32\MÓDULOS</lib> <lib
> path="out">C:\Windows\system32\python32.zip</lib> <lib
> path="ins">C:\Python32\DLLs</lib> <lib
> path="ins">C:\Python32\lib</lib> <lib path="ins">C:\Python32</lib>
> <lib path="ins">C:\Python32\lib\site-packages</lib>
> <forced_lib>__main__</forced_lib> <forced_lib>_ast</forced_lib>
> <forced_lib>_bisect</forced_lib> <forced_lib>_codecs</forced_lib>
> <forced_lib>_codecs_cn</forced_lib>
> <forced_lib>_codecs_hk</forced_lib>
> <forced_lib>_codecs_iso2022</forced_lib>
> <forced_lib>_codecs_jp</forced_lib>
> <forced_lib>_codecs_kr</forced_lib>
> <forced_lib>_codecs_tw</forced_lib>
> <forced_lib>_collections</forced_lib> <forced_lib>_csv</forced_lib>
> <forced_lib>_datetime</forced_lib> <forced_lib>_functools</forced_lib>
> <forced_lib>_heapq</forced_lib> <forced_lib>_io</forced_lib>
> <forced_lib>_json</forced_lib> <forced_lib>_locale</forced_lib>
> <forced_lib>_lsprof</forced_lib> <forced_lib>_md5</forced_lib>
> <forced_lib>_multibytecodec</forced_lib>
> <forced_lib>_pickle</forced_lib> <forced_lib>_random</forced_lib>
> <forced_lib>_sha1</forced_lib> <forced_lib>_sha256</forced_lib>
> <forced_lib>_sha512</forced_lib> <forced_lib>_sre</forced_lib>
> <forced_lib>_string</forced_lib> <forced_lib>_struct</forced_lib>
> <forced_lib>_subprocess</forced_lib>
> <forced_lib>_symtable</forced_lib> <forced_lib>_thread</forced_lib>
> <forced_lib>_warnings</forced_lib> <forced_lib>_weakref</forced_lib>
> <forced_lib>array</forced_lib> <forced_lib>atexit</forced_lib>
> <forced_lib>audioop</forced_lib> <forced_lib>binascii</forced_lib>
> <forced_lib>builtins</forced_lib> <forced_lib>cmath</forced_lib>
> <forced_lib>errno</forced_lib> <forced_lib>gc</forced_lib>
> <forced_lib>imp</forced_lib> <forced_lib>itertools</forced_lib>
> <forced_lib>marshal</forced_lib> <forced_lib>math</forced_lib>
> <forced_lib>mmap</forced_lib> <forced_lib>msvcrt</forced_lib>
> <forced_lib>nt</forced_lib> <forced_lib>operator</forced_lib>
> <forced_lib>parser</forced_lib> <forced_lib>signal</forced_lib>
> <forced_lib>sys</forced_lib> <forced_lib>time</forced_lib>
> <forced_lib>winreg</forced_lib> <forced_lib>xxsubtype</forced_lib>
> <forced_lib>zipimport</forced_lib> <forced_lib>zlib</forced_lib>
> </xml>Traceback (most recent call last):   File
> "C:\eclipse-SDK-3.7-win32\eclipse\plugins\org.python.pydev_2.6.0.20120412
> 19\PySrc\interpreterInfo.py", line 142, in <module>
>     raise RuntimeError('Ok, this is so that it shows the output (ugly hack for s ome platforms, so that it releases the output).')
> RuntimeError: Ok, this is so that it shows the output (ugly hack for
> some platfo rms, so that it releases the output). 
```

> 谢谢您的帮助！并对格式感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:52:03.487

编辑2：

这个问题刚刚被修复（并且已经部署了一个每晚构建的修复程序）。这将在 PyDev 2.6.0 上可用

* * *

编辑：

由于 C:\Python32\MÓDULOS，这个问题似乎是一个 unicode 问题。明天我会尝试解决这个问题，与此同时，您可以从 PYTHONPATH 中删除 unicode 字符以使事情正常进行...

* * *

要正确诊断它，请执行以下操作：

转到窗口 > 首选项 > pydev > 解释器 - python 并选择“新”选项以指向实际的 python 可执行文件（我认为你已经这样做了，但只是为了确保它不仅仅是自动配置中的问题）。

如果上面的问题没有解决，我相信它可能是 unicode 问题，所以，为了能够帮助你，请按照以下步骤操作：

1.  将您的路径发布到您正在配置的 Python 解释器。

2.  运行： python c:\eclipse\plugins\org.python.pydev_XXX\pysrc\interpreterInfo.py 并粘贴您的输出。

    （确保“python”是您正在配置的 python，并且插件的路径指向正确的位置）。

3.  如果您的 python 解释器的路径中有一些 unicode 字符，请尝试将 python 安装到您没有 unicode 字符的某个地方（如果这解决了您的问题，我将负责使其与您的配置一起使用，但我' 可能只能在星期四解决这个问题——但它在我的待办事项列表中将是非常重要的）。

# c - 我需要一个“so”文件还是出了什么问题？

> ID：10195112
> 
> 赞同：1
> 
> 时间：2012-04-17T16:21:32.050
> 
> 标签：c, build, mingw, ld

（我在 Windows 上。）

我尝试构建[pysox](http://pypi.python.org/pypi/pysox)。因此，我构建了 libsox（SoX 的一部分[）](http://sox.sourceforge.net/)。据说，pysox 需要“链接路径中的 libsox.so 和 libsox.a”。在构建 libsox 时，我得到了“libsox.a”、“libsox-1.dll”、“libsox.dll.a”、“libsox.la”、“libsox.lai”和许多其他奇怪的文件。当我在链接路径中放置“libsox.a”时，之前显示的错误消失了。但是现在构建脚本在调用 mingw32-gcc 时出现错误，它说：

```
C:\Programme\MinGW\bin\mingw32-gcc.exe -shared -s build\temp.win32-2.7\Release\pysox\sox.o build\temp.win32-2.7\Release\pysox\sox.def -LC:\Programme\Python\libs -LC:\Programme\Python\PCbuild -lsox -lpython27 -lmsvcr90 -o build\lib.win32-2.7\pysox\sox.pyd
build\temp.win32-2.7\Release\pysox\sox.o:sox.c:(.text+0x3a96): undefined reference to `sox_get_encodings_info'
build\temp.win32-2.7\Release\pysox\sox.o:sox.c:(.text+0x5035): undefined reference to `sox_get_encodings_info'
build\temp.win32-2.7\Release\pysox\sox.o:sox.c:(.text+0x795d): undefined reference to `bcopy'
build\temp.win32-2.7\Release\pysox\sox.o:sox.c:(.text+0xa8b3): undefined reference to `bcopy'
collect2: ld returned 1 exit status
error: command 'mingw32-gcc' failed with exit status 1 
```

以下尝试无效：

*   将“libsox-1.dll”放在链接路径中
*   将其重命名为“libsox.dll”
*   将其重命名为“libsox.so”
*   将与“libsox.a”一起生成的所有文件放在链接路径中

我真的需要 Windows 上的“so”文件吗（我如何获得它）？或者必须改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:30:57.087

MinGW 为每个动态链接库 (DLL) 使用一个静态接口库。libsox.dll.a 库是您在链接时需要的库，即需要将其复制到链接路径中。libsox-1.dll 在运行时在 PATH 中是必需的，但在链接时不需要。

在 Windows 平台上不需要 .so 文件。静态库 libsox.a 中似乎缺少某些符号，或者链接行中缺少库。与类 UNIX 的 .so 平台相反，Windows 平台不允许 DLL 中存在未解析的符号。您可能必须`sox_get_encodings_info`在命令行上显式地提供包含和朋友的库，记住链接器行上的优先级。

# c# - 如果我在不同的线程上同步运行，它是否会使其总体异步？

> ID：10195117
> 
> 赞同：2
> 
> 时间：2012-04-17T16:21:51.507
> 
> 标签：c#, sockets, asynchronous, .net

我想知道如果我在其他线程上同步运行我的应用程序是否异步获取字符串？

我实际上不知道如何使用 BeginSend/BeginReceive，所以我在不同的线程上使用了 socket.Send(...)、socket.Receive(...)，这是否使我的应用程序模拟异步连接。

顺便说一句，如果字符串大于缓冲区的大小会发生什么？对于客户端，我使用了 telnet，但是 telnet 实际上会在字符串从键盘获取时立即发送，所以我实际上不能超过缓冲区的大小，但是如果我使用另一个发送完整字符串的客户端呢？有没有办法告诉程序我发送的比缓冲区允许的多（通过我的变量`recv`是socketReceive的结果）？

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Runtime.Remoting.Messaging;

namespace CSharp_Console_Application
{
    class Program
    {
        delegate Socket GetClients();
        static GetClients newClients;
        static List<Socket> clients;

        static ManualResetEvent allDone = new ManualResetEvent(false);

        static void Main(string[] args)
        {
            IPEndPoint serverIPEP = new IPEndPoint(IPAddress.Any, 9080);
            Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            serverSocket.Bind(serverIPEP);
            serverSocket.Listen(10);

            Console.WriteLine("Waiting for connections...");

            clients = new List<Socket>();

            newClients = () =>
                {
                    Socket clientSocket = serverSocket.Accept();
                    IPEndPoint clientIPEP = (IPEndPoint)clientSocket.RemoteEndPoint;

                    Console.WriteLine("Connected to {0}.", clientIPEP);

                    clients.Add(clientSocket);

                    SendString("Welcome to my server!", clientSocket);
                    return clientSocket;
                };

            while (true)
            {
                allDone.Reset();

                newClients.BeginInvoke((itfAR) =>
                    {
                        allDone.Set();

                        AsyncResult ar = (AsyncResult)itfAR;
                        GetClients invokedDelegate = (GetClients) ar.AsyncDelegate;

                        Socket clientSocket = invokedDelegate.EndInvoke(itfAR);
                        IPEndPoint clientIPEP = (IPEndPoint)clientSocket.RemoteEndPoint;

                        Console.WriteLine("Sent 'Welcome!' to {0}.", clientIPEP);

                        string currentString = "";
                        while (true)
                        {
                            currentString += ReceiveString(clientSocket);
                            if (currentString.Contains('\n'))
                            {
                                Console.Write(clientIPEP + " said: " + currentString);

                                List<Socket> clientsWithoutThis = new List<Socket>();
                                clientsWithoutThis.AddRange(clients);
                                clientsWithoutThis.Remove(clientSocket);
                                SendToAll(clientsWithoutThis, currentString);

                                currentString = "";
                            }
                        }
                    },
                    null);

                allDone.WaitOne();
            }
        }

        static void SendToAll(List<Socket> clients, string message)
        {
            byte[] data = new byte[1024];
            clients.ForEach(clientSocket =>
                {
                    IPEndPoint clientIPEP = (IPEndPoint)clientSocket.RemoteEndPoint;
                    data = Encoding.ASCII.GetBytes(clientIPEP + " said: " + message + "\r");
                    clientSocket.Send(data, data.Length, SocketFlags.None);
                });
        }

        static void SendString(string message, Socket clientSocket)
        {
            byte[] data = new byte[1024];
            data = Encoding.ASCII.GetBytes(message + "\n\r");
            clientSocket.Send(data, data.Length, SocketFlags.None);
        }

        static string ReceiveString(Socket clientSocket)
        {
            byte[] data = new byte[1024];
            int recv = clientSocket.Receive(data, data.Length, SocketFlags.None);

            if (recv < 1)
                return null;

            string receivedString = Encoding.ASCII.GetString(data, 0, recv);
            return receivedString;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T10:57:19.723

这样你`ManualResetEvent`的往往是无用的。一旦你阻塞了主线程，你就会在`BeginInvoke`调用的第一行释放`set()`. 然后您再次将其重置为等待状态，但另一个`BeginInvoke`调用将解除对代码的阻塞，而另一个调用`BeginInvoke`可能仍在运行。因此，最终您将有多个 BeginInvoke 线程，最终您将遇到多个异常或内存不足错误。

# css - 如何将 webkit-mask-box-image 与 Retina 质量的图像一起使用？

> ID：10195118
> 
> 赞同：1
> 
> 时间：2012-04-17T16:21:52.660
> 
> 标签：css, webkit, media-queries, retina-display, masking

是否可以使用 实现 Retina 质量的 CSS 遮罩`-webkit-mask-box-image`？在这种特殊情况下，我试图绕过元素的角落（`border-radius`性能不够）：

```
.element {
    -webkit-mask-box-image: url('mask.png') 12 12 12 12 stretch stretch;
} 
```

蒙版图像是它需要的大小的两倍（`6`用于代替`12`非视网膜屏幕）。

面罩定位正确，但圆角不是 Retina 平滑的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:47:46.903

我在这里看到三个解决方案：

*   接受它并处理边界半径，因为你不能在现代机器上得到*那么*大的滞后。此外，只有 Safari 和 Chrome（以及基于 webkit 的小型浏览器，如 RockMelt、Yandex 等）使用`-webkit-mask`.，所以除非您正在制作 Chrome 应用程序，否则您将失去很多浏览器的受众（目前约为 54.25%）不兼容，更不用说它要求用户下载图像只是为了看到圆角。
*   Webkit 在其缩放算法中使用图像平滑，因此只需提供一个巨大的蒙版图像并让它在加载时进行一次性缩放。这具有固有的缺点，即下载时间更长，并且需要一段时间才能扩展，但是，在缓存清除之前，这是一次性的事情。
*   不要使用 PNG，而是使用 SVG。**S** ‍calable **V** ‍ector **G** ‍raphics的全部意义在于它们具有无限的可扩展性，并且在任何分辨率或尺寸下都不会损失质量。有关如何制作 SVG 文件的更多信息，请参阅[http://www.w3.org/Graphics/SVG/](http://www.w3.org/Graphics/SVG/)

# python - 在 Python 中从 sqlite3 中查询和提取 Unicode 值

> ID：10195123
> 
> 赞同：2
> 
> 时间：2012-04-17T16:22:14.523
> 
> 标签：python, unicode, sqlite, indic

我在尝试提取存储在 python 中的 sqlite3 数据库中的 utf-8 编码值时遇到问题。

```
>> import sqlite3
>> connection=sqlite3.connect('mySQLite3DB.db')
>> cursor=connection.cursor()
>> word = unichr(2675)+unichr(37) # ੳ%
>> cursor.execute('select distinct col1 from table1 where col1 like ? limit 3', word)
---------------------------------------------------------------------------
ProgrammingError                          Traceback (most recent call last)
/Users/punjcoder/code/<ipython-input-10-358f7ffe8df0> in <module>()
----> 1 cursor.execute('select distinct col1 from table1 where col1 like ? limit 3', word)

ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 2 supplied. 
```

现在，如果我通过手动插入 unicode 来运行查询，它就会运行。但是我无法检索文本，而是缓冲 ptr 。

```
>> cursor.execute('select distinct col1 from table1 where col1 like "ੳ%" limit 3')
<sqlite3.Cursor at 0x10dab8500>
>> for row in cursor.fetchall():
>>      print row
(<read-write buffer ptr 0x10dabf898, size 3 at 0x10dabf858>,) 
```

我已经看过下面的链接，但似乎找不到让它工作的方法。我正在研究 Python 2.7.2 和 SQLite 3.7.10。提前感谢您的帮助。

*   [在 Python 中从 SQLite 数据库中提取值](https://stackoverflow.com/questions/9162701/extracting-values-from-sqlite-database-in-python)
*   [SQLite、python、unicode 和非 utf 数据](https://stackoverflow.com/questions/2392732/sqlite-python-unicode-and-non-utf-data)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:35:02.380

尝试：

```
 cursor.execute('select distinct col1 from table1 where col1 like ? limit 3', [word]) 
```

我希望您将 unicode 字符串`word`视为可迭代并分别查看每个字符。

# android - SQLite 子查询不起作用

> ID：10195124
> 
> 赞同：1
> 
> 时间：2012-04-17T16:22:16.310
> 
> 标签：android, sql, select, sqlite, scheduling

表名：`MRM_BOOKING_DETAILS`
样本数据：

```
Booking_id USER_ID ROOM_ID CHECKIN             CHECKOUT
1          hary    1       2012-04-16 09:00:00 2012-04-16 09:30:00
2          jenny   2       2012-04-17 13:00:00 2012-04-17 13:30:00
3          steve   1       2012-04-16 15:00:00 2012-04-16 15:30:00 
```

等等...

`Booking_id`是主键。`Room_Id`是作为PK`Room_Details_Table`的外键。`Room_Id`

我的目标是获取特定日期可用的记录列表，用户输入的特定时间。为此，我提出了以下查询：

```
SELECT ROOMNO,BUILDINGNO 
FROM MRM_ROOM_DETAILS 
WHERE ROOMID IN (SELECT distinct roomid 
                FROM MRM_BOOKING_DETAILS 
                WHERE (CHECKIN NOT BETWEEN '2012-04-13 09:50:00' AND '2012-04-13 10:20:00')
                  and (CHECKOUT NOT BETWEEN '2012-04-13 09:50:00' AND '2012-04-13 10:20:00'))
  AND CAPACITY > 15 AND PROJECTIONSTATUS = 'NO'; 
```

`Capacity`和`ProjectionStatus`是房间详细信息表中的列，现在请忽略该部分。

`CHECKIN`并且`CHECKOUT`是用户在搜索屏幕中提供的值。

但不幸的是，子查询不正确，因此我没有得到想要的结果。

```
SELECT distinct roomid 
FROM MRM_BOOKING_DETAILS 
WHERE (CHECKIN NOT BETWEEN '2012-04-13 09:50:00' AND '2012-04-13 10:20:00') and
      (CHECKOUT NOT BETWEEN '2012-04-13 09:50:00' AND '2012-04-13 10:20:00'); 
```

这就是我说子查询不正确的原因。假设用户提供的值为：

```
CHECKIN : 2012-04-16 09:00:00 and CHECKOUT: 2012-04-16 09:30:00 
```

有了表中的上述数据，`ROOM_ID`将返回 1 和 2。对于第一行，它将失败，但对于第二行和第三行它将成功，因此它将返回 1 和 2，这是不正确的。正确的结果应该只有 2。

请帮助我获得正确的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:18:24.577

当日期是字符串时，Sqlite 不支持日期比较。为此，您需要将所有数据库端日期转换为数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T21:38:54.357

将您的逻辑从“在 x 时间以外的时间预订的房间”更改为“在 x 时间未预订的房间”。

此外，您可能应该使用该`DATETIME`功能。

**更新**

我添加了对所有交叉路口的检查，并且没有使用包容性`BETWEEN`，以便可以在 8:30 至 9:00 和 9:00 至 9:30 预订房间。

```
SELECT ROOMNO, BUILDINGNO 
FROM MRM_ROOM_DETAILS 
WHERE ROOMID NOT IN (
    SELECT DISTINCT ROOM_ID as ROOMID
    FROM MRM_BOOKING_DETAILS 
    WHERE (DATETIME(CHECKIN) > DATETIME('2012-04-16 08:30:00') AND DATETIME(CHECKIN) < DATETIME('2012-04-16 09:31:00'))
        OR (DATETIME(CHECKOUT) > DATETIME('2012-04-16 08:30:00') AND DATETIME(CHECKOUT) < DATETIME('2012-04-16 09:31:00'))
        OR (DATETIME('2012-04-16 08:30:00') > DATETIME(CHECKIN) AND DATETIME('2012-04-16 08:30:00') < DATETIME(CHECKOUT))
        OR (DATETIME('2012-04-16 09:31:00') > DATETIME(CHECKIN) AND DATETIME('2012-04-16 09:31:00') < DATETIME(CHECKOUT))
)
    AND CAPACITY > 15
    AND PROJECTIONSTATUS = 'NO'; 
```

# iphone - 带有文本的可滚动视图，并且能够在点击特定短语时执行某些操作

> ID：10195126
> 
> 赞同：1
> 
> 时间：2012-04-17T16:22:20.977
> 
> 标签：iphone, objective-c, ios

我正在尝试实现一个视图，该视图将从 sqlite 数据库中加载文本（文本中的每个句子在数据库中都有唯一的标签）并允许在单击句子时执行一些代码（单击执行的方法应该然后滚动单击的句子到屏幕中心并更改它的颜色/背景颜色/字体大小以强调它）

是否可以不使用 webview 和 js/js-native 桥接器？应该采取哪种方法来实施这种观点？任何帮助和评论都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:01:39.937

嗯，您还可以考虑将 NSAttributedString 与核心文本框架一起使用，并为每个句子赋予属性并附加一些额外的信息。接下来查找视图点击位置下方的属性。一旦你有了它，你可以再次检索额外的信息，然后用水龙头做任何你想做的事情。

点击后，您可以更改该部分文本的属性。例如不同的字体颜色等。

互联网上的这个教程看起来很有趣： [http ://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text](http://www.raywenderlich.com/4147/how-to-create-a-simple-magazine-app-with-core-text)

# java - JUnit Rule TemporaryFolder 任意抛出 IOException

> ID：10195128
> 
> 赞同：9
> 
> 时间：2012-04-17T16:22:24.087
> 
> 标签：java, junit, junit4, ioexception

我在这里遇到了一个奇怪的问题......

我有一个执行一些测试的 JUnit。这个类如下所示：

```
public class MyTest {

    @Rule
    public TemporaryFolder folder = new TemporaryFolder();

    @Test
    public void myTest1() throws IOException {
        String destinationPath = folder.newFile("destination1.txt").getPath();
        // Do things
    }

    @Test
    public void myTest2() throws IOException {
        String destinationPath = folder.newFile("destination2.txt").getPath();
        // Do things
    }

    @Test
    public void myTest3() throws IOException {
        String destinationPath = folder.newFile("destination.txt").getPath();
        // Do things
    }
} 
```

这个测试类曾经在我以前的环境中工作，现在仍然在 Continuum 中工作。

然而，当从 Eclipse 启动时，没有、某些或所有测试会任意抛出`IOException`诸如：

```
java.io.IOException: The system cannot find the path specified
    at java.io.WinNTFileSystem.createFileExclusively(Native Method)
    at java.io.File.createNewFile(File.java:883)
    at org.junit.rules.TemporaryFolder.newFile(TemporaryFolder.java:53)
    at MyTest.myTest2(MyTest.java:50) 
```

我在运行 JUnit 4.9 或 JUnit 4.10 时遇到了完全相同的问题......

我该如何解决它才能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:27:43.753

您应该尝试禁用防病毒保护。

我遇到了同样的问题，禁用卡巴斯基后一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:30:28.167

从表面上看，这可能更像是一个与 Windows 相关的问题，而不是 JUnit 问题。不知何故，您在以“受限权限用户”身份登录时可能会失去创建文件夹/文件的权利。

我想您可以尝试自己创建一个临时文件夹，就像 JUnit 所做的那样：

```
 File folder= File.createTempFile("junit", ""); 
```

如果上面的语句抛出同样的错误，你应该调查你的 windows 用户权限，也许尝试在“完全权限”用户下运行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-27T08:09:56.787

对我来说似乎有帮助的是明确创建根文件夹。在您的情况下，将`folder.create()`某个地方放入您的代码中。

丑陋，我知道。

# javascript - Jquery机场无限期运行

> ID：10195132
> 
> 赞同：0
> 
> 时间：2012-04-17T16:22:41.997
> 
> 标签：javascript, jquery, loops, settimeout

我以下列方式使用 Jquery Airport：

```
$('#basketTotal').airport([s]);
$('#basketTotal').html(s); 
```

这是机场功能：

```
(function($){ 
    $.fn.extend({  
        airport: function(array) {
        var self = $(this);
        var chars = ['1','2','3','4','5','6','7','8','9','0','.','£'];
        var longest = 0;
        var items = items2 = array.length;
        function pad(a,b) { return a + new Array(b - a.length + 1).join(' '); }
        $(this).empty();
        while(items--)
            if(array[items].length > longest) longest = array[items].length;
        while(items2--)
            array[items2] = pad(array[items2],longest);
        spans = longest;
        while(spans--) {
            $(this).prepend("<span class='c" + spans + "'></span>");
        }

            function testChar(a,b,c,d){
            $(self).find('.c'+a).html((chars[b]==" ")?"&nbsp;":chars[b]);
            setTimeout(function() {
                if(b > chars.length)
                    testChar(a+1,0,c,d+1);
                else if(chars[b] != array[c].substring(d,d+1).toLowerCase())
                    testChar(a,b+1,c,d);
                else
                    testChar(a+1,0,c,d+1);
            }, 15);

        }
        testChar(0,0,0,0);
    } 

    }); 
})(jQuery); 
```

我只会将一个字符串传递给机场函数（而不是字符串数组）。机场无限期地运行并且不会停止，但我需要让它停止并`$('#basketTotal').html(s);`在它完成时执行。

如何在完成动画的一次迭代时使函数停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:33:26.787

在开始时`testChar()`，您可以添加一个测试以查看您是否完成了您想要执行的迭代次数，如果是，则返回。

如果您从`testChar()`没有执行 a 的情况下返回`setTimeout()`，则动画将停止。

我不太明白您希望它何时停止，所以我不确定要推荐什么测试条件，但它会在这里：

```
 function testChar(a,b,c,d){

           // if (done now) return;

           $(self).find('.c'+a).html((chars[b]==" ")?"&nbsp;":chars[b]);
           setTimeout(function() {
               if(b > chars.length)
                   testChar(a+1,0,c,d+1);
               else if(chars[b] != array[c].substring(d,d+1).toLowerCase())
                   testChar(a,b+1,c,d);
               else
                   testChar(a+1,0,c,d+1);
           }, 15);
        } 
```

如果它只是特定迭代次数的简单计数器，那么您可以在`testChar(), increment it inside of`testChar()` 之前初始化该计数器并检查是否已完成所需的迭代次数。如果是这样，只需返回而不设置计时器。

好的，在稍微研究了你的代码之后（这是一种晦涩的算法，没有任何关于它应该如何工作的描述），看起来你可以像这样终止动画：

```
 function testChar(a,b,c,d){
        // if we're beyond the number of spans we have, we must be done
        if (a > longest) return;

        $(self).find('.c'+a).html((chars[b]==" ")?"&nbsp;":chars[b]);
        setTimeout(function() {
            if(b > chars.length)
                testChar(a+1,0,c,d+1);
            else if(chars[b] != array[c].substring(d,d+1).toLowerCase())
                testChar(a,b+1,c,d);
            else
                testChar(a+1,0,c,d+1);
        }, 15);
    } 
```

# extjs - 加载时的网格面板键导航

> ID：10195134
> 
> 赞同：3
> 
> 时间：2012-04-17T16:22:44.440
> 
> 标签：extjs, grid, extjs4, keyboard-shortcuts

我有一个用于搜索项目的网格面板。它一开始是空的，但只要用户触发附近的搜索字段，它就会配置存储加载。

我`grid.getSelectionModel().select(0)`用来在加载时选择第一行。但这不会在之后使用箭头键启用键导航。如果我在一行上执行 mousedown， *则*箭头键导航将起作用。

我只想自动选择第一条记录*并*启用箭头键导航。

我尝试关注网格、gridview 以及第一行，`grid.view.focusRow(0)`并且在调用`select(0)`. 这些都没有给我关键的导航。有任何想法吗？

这是使用 4.1b2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:48:26.520

ExtJs4 有用于焦点管理的特殊单例类。它调用：

```
Ext.FocusManager.enable({focusFrame: true}); 
```

只需将它放在 Ext 加载之后，您就会看到当前具有焦点的突出显示的组件。所以，你非常接近让它工作，我测试过，它在我的应用程序中工作

```
grid.getView().focus();
grid.getSelectionModel().select(0); 
```

ps 请确保您的商店中有超过 0 条记录。

# ios - 使用地图识别用户区域 - 初学者

> ID：10195135
> 
> 赞同：0
> 
> 时间：2012-04-17T16:23:01.987
> 
> 标签：ios, mapkit

我最近遇到了一些麻烦。我的应用程序是为在英国使用而创建的。我已经将地图集成到我的应用程序中，并且我也显示了用户的当前位置。

如果特定用户正在使用来自美国的这个应用程序，那么我需要警告用户这个应用程序是在英国使用的。我怎么能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:28:18.077

1.  简单的方法：不要规定您的用户需要在哪个国家/地区才能使用您的应用程序。我在卡尔加里市开发了一个本地应用程序，但在全球范围内发布了它，因为如果你是一名游客，我的应用程序可能是相关的。

2.  不太容易的方法：跳上谷歌地图，抓住英国左上角的纬度/经度，抓住英国右下角的纬度/经度，如果用户在边界框外，向他们显示一条消息。

3.  比“不太容易”的方法容易：查找用户的经纬度以获取他们当前的国家/地区。如果不在英国国家/地区列表中，请向他们发送消息。

# unix - 通过 SFTP 获取文件时出现“权限被拒绝”错误

> ID：10195136
> 
> 赞同：4
> 
> 时间：2012-04-17T16:23:26.390
> 
> 标签：unix, sftp, chmod

在 unix 主机上，我以“userA”身份登录，并拥有一个具有以下权限的目录“test”

> drwxrwxrwx

我可以在“测试”目录中创建一个文件。

然后我用 'userB' (sftp userB@remotebox) sftp 到一个远程盒子，并成功地 Cd'ed 到该盒子上的一个远程目录，并且可以看到该远程目录中的文件。然后我从那个远程目录“get myFile”，我得到这个消息：

> 将 /remoteDir/myFile 提取到 myFile 无法处理：权限被拒绝

我需要检查什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-09T20:59:20.263

```
Couldn't get handle: Permission denied 
```

“无法获取句柄”表示 sftp 客户端无法获取远程资源的句柄。在这种情况下，资源是您要获取的文件。“权限被拒绝”是一条标准消息，表示您的远程用户 ID 没有访问相关文件的权限。

正如您在评论中指出的那样：

> 我试图在远程框中获取的文件是：-rwxrwx--- 并且“userB”不属于该文件所有者的组。

所以“userB”实际上没有读取远程文件的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T18:23:03.240

尝试在用户的主目录上将权限设置为 755 (-rwxr-xr-x)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-02T04:52:12.653

同样的问题，缺少读取权限，我正在尝试下载证书。我所做的是将要下载的文件cp到用户目录并将权限设置为777（如上所述，755可以）`chmod 777 filepath`，然后我可以下载它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-10T06:54:22.807

问题在于对远程目录的上传权限。检查您是否具有远程目录的适当写入权限。

# python - 如何在 Python 中使用列名检索 SQL 结果列值？

> ID：10195139
> 
> 赞同：56
> 
> 时间：2012-04-17T16:23:43.883
> 
> 标签：python, mysql

有没有办法使用列名而不是 Python 中的列索引来检索 SQL 结果列值？我将 Python 3 与 mySQL 一起使用。我正在寻找的语法非常类似于 Java 构造：

```
Object id = rs.get("CUSTOMER_ID"); 
```

我有一个包含很多列的表，不断为我需要访问的每一列计算索引真的很痛苦。此外，索引使我的代码难以阅读。

谢谢！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-17T16:38:38.013

MySQLdb模块有[一个](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/public/MySQLdb.cursors.DictCursor-class.html)[DictCursor](http://sourceforge.net/projects/mysql-python/)：

像这样使用它（取自[用 Python DB-API 编写 MySQL 脚本](http://www.kitebird.com/articles/pydbapi.html)）：

```
cursor = conn.cursor(MySQLdb.cursors.DictCursor)
cursor.execute("SELECT name, category FROM animal")
result_set = cursor.fetchall()
for row in result_set:
    print "%s, %s" % (row["name"], row["category"]) 
```

**编辑：**根据 user1305650 这也适用[`pymysql`](https://github.com/petehunt/PyMySQL)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-11-14T21:59:27.960

这篇文章很旧，但可以通过搜索找到。

现在您可以使用 mysql.connector 检索字典，如下所示： [https ://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursordict.html](https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursordict.html)

这是mysql站点上的示例：

```
cnx = mysql.connector.connect(database='world')
cursor = cnx.cursor(dictionary=True)
cursor.execute("SELECT * FROM country WHERE Continent = 'Europe'")

print("Countries in Europe:")
for row in cursor:
    print("* {Name}".format(Name=row['Name'])) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2019-05-19T16:35:36.973

你必须寻找一个叫做“光标中的字典”的东西

我正在使用 mysql 连接器，我必须将此参数添加到我的光标，所以我可以使用我的列名而不是索引

```
db = mysql.connector.connect(
    host=db_info['mysql_host'],
    user=db_info['mysql_user'],
    passwd=db_info['mysql_password'],
    database=db_info['mysql_db'])

cur = db.cursor()

cur = db.cursor( buffered=True , dictionary=True) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-12-23T19:06:24.583

导入 pymysql

```
# Open database connection
db = pymysql.connect("localhost","root","","gkdemo1")

# prepare a cursor object using cursor() method
cursor = db.cursor()

# execute SQL query using execute() method.
cursor.execute("SELECT * from user")

# Get the fields name (only once!)
field_name = [field[0] for field in cursor.description]

# Fetch a single row using fetchone() method.
values = cursor.fetchone()

# create the row dictionary to be able to call row['login']
**row = dict(zip(field_name, values))**

# print the dictionary
print(row)

# print specific field
print(**row['login']**)

# print all field
for key in row:
    print(**key," = ",row[key]**)

# close database connection
db.close() 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-08-02T12:31:44.133

```
import mysql
import mysql.connector

db = mysql.connector.connect(
   host = "localhost",
    user = "root",
    passwd = "P@ssword1",
    database = "appbase"
)

cursor = db.cursor(dictionary=True)

sql = "select Id, Email from appuser limit 0,1"
cursor.execute(sql)
result = cursor.fetchone()

print(result)
# output =>  {'Id': 1, 'Email': 'me@gmail.com'}

print(result["Id"])
# output => 1

print(result["Email"])
# output => me@gmail.com 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-05-05T12:17:16.333

蟒蛇2.7

```
import pymysql

conn = pymysql.connect(host='localhost', port=3306, user='root', passwd='password', db='sakila')

cur = conn.cursor()

n = cur.execute('select * from actor')
c = cur.fetchall()

for i in c:
    print i[1] 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-17T16:29:12.570

当然有。在 Python 2.7.2+...

```
import MySQLdb as mdb
con =  mdb.connect('localhost', 'user', 'password', 'db');
cur = con.cursor()
cur.execute('SELECT Foo, Bar FROM Table')
for i in range(int(cur.numrows)):
    foo, bar = cur.fetchone()
    print 'foo = %s' % foo
    print 'bar = %s' % bar 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-01-09T07:04:51.723

从特定列中选择值：

```
import pymysql
db = pymysql.connect("localhost","root","root","school")
cursor=db.cursor()
sql="""select Total from student"""
l=[]
try:
    #query execution
    cursor.execute(sql)
    #fetch all rows 
    rs = cursor.fetchall()
    #iterate through rows
    for i in rs:
        #converting set to list
        k=list(i)
        #taking the first element from the list and append it to the list
        l.append(k[0])
    db.commit()
except:
    db.rollback()
db.close()
print(l) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-17T16:31:22.757

你没有提供很多细节，但你可以尝试这样的事情：

```
# conn is an ODBC connection to the DB
dbCursor = conn.cursor()
sql = ('select field1, field2 from table') 
dbCursor = conn.cursor()
dbCursor.execute(sql)
for row in dbCursor:
    # Now you should be able to access the fields as properties of "row"
    myVar1 = row.field1
    myVar2 = row.field2
conn.close() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-25T20:53:55.960

```
import mysql.connector as mysql
...
cursor = mysql.cnx.cursor()
cursor.execute('select max(id) max_id from ids')
(id) = [ id for id in cursor ] 
```

# ajax - Jquery UI 选项卡和数据表

> ID：10195140
> 
> 赞同：2
> 
> 时间：2012-04-17T16:23:44.087
> 
> 标签：ajax, jquery-ui, tabs, datatables

我试图在通过 AJAX 加载的 Jquery 选项卡中显示一个 DataTable。当我在浏览器中打开页面时，它显示正常，但在 AJAX 情况下，它只是作为纯表格显示在选项卡内。有什么我做错了还是没有可能这样做？感谢您的回复。

根据要求，这是代码。加载库和 CSS，将无序列表转换为选项卡

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="js/jquery-ui-1.8.18.custom.min.js"></script>
<link rel="stylesheet" type="text/css" href="js/ui-lightness/jquery-ui-1.8.18.custom.css" />
        <script>
        $(function() {
            $( "#tabs" ).tabs({
                ajaxOptions: {
                    error: function( xhr, status, index, anchor ) {
                        $( anchor.hash ).html(
                            "Some problem occured." +
                            "Probably the server is overloaded" );
                    }
                }
            });
        });
        </script> 
```

实际标签

```
<div id="tabs">
        <ul>
             <li><a href="picklists.php?id=1"><span>Ready to be Picked</span></a></li>
             <li><a href="picklists.php?id=2"><span>Shipping Ready</span></a></li>
             <li><a href="picklists.php?id=3"><span>Picklists in Proforma</span></a></li>
             <li><a href="picklists.php?id=4"><span>Picklists in Invoice</span></a></li>
             <li><a href="picklists.php?id=5"><span>Picklists Shipped</span></a></li>
        </ul>
</div> 
```

然后，通过 AJAX 加载的 picklist.php 文件。我将跳过代码，只需 w=show 实际输出

> > > ```
> > > <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
> > >       <script src="js/jquery-ui-1.8.18.custom.min.js"></script>
> > >       <link rel="stylesheet" type="text/css" href="js/ui-lightness/jquery-ui-1.8.18.custom.css" />
> > > <table id="rows">
> > >           <thead>
> > >               <tr>
> > >                   <td>
> > >                   Invoice no.
> > >                   </td>
> > >                   <td>
> > >                   Company
> > >                   </td>
> > >                   <td>
> > >                   Items
> > >                   </td>
> > >                   <td>
> > >                   Payment
> > >                   </td>
> > >               </tr>
> > >           </thead>
> > >           <tbody>
> > > <tr>HERE COMES SOME INFORMATION</tr>
> > >           </tbody>
> > >       </table> <script language="JavaScript"> $(document).ready(function(){
> > >  $('#rows').dataTable(); });
> > > </script> 
> > > ```

如果我直接导​​航到该页面 - 很好。如果我将它加载到选项卡中，那么它只是普通表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:52:21.823

我找到了解决方案，它真的很简单。这是我在选项卡初始化中必须更改的内容

```
$(function() {
            $( "#tabs" ).tabs({
                ajaxOptions: {
                    error: function( xhr, status, index, anchor ) {
                        $( anchor.hash ).html(
                            "Some problem occured." +
                            "Probably the server is slow again." );
                    }
                },
                load: function(event, ui) {

                },
                select: function(event, ui)  {
                      $('#rows').remove();
                }
            });
        }); 
```

所以基本上两个数据表不能存在并在不同的选项卡上运行，所以为了使一切正常，旧的数据表实例应该被销毁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:30:31.253

问题是当你开火时 `$('#rows').dataTable();`

您尝试在其中执行此操作，`$(document).ready`但是当您的 ajax 启动时，这已经消失了。您可能需要做的是`$('#rows').dataTable();`在 ajax 之后重新绘制选项卡时的回调。

如果它在负载中不起作用，则使用 setTimeout 在一秒钟后调用它，看看会发生什么。如果它仍然不起作用，则将其放入 ajax 选项的成功回调中并再次使用 setTimeout 技巧。

# multithreading - 消费者和生产者之间的Qt线程释放？互斥量？QSemaphore？什么？

> ID：10195149
> 
> 赞同：1
> 
> 时间：2012-04-17T16:24:11.287
> 
> 标签：multithreading, qt, producer-consumer

我有一个相当简单的情况：我在一个线程中有一个高速数据生产者，它生成一个包含[可变长度]元素的缓冲区。一旦这个缓冲区被填满，我就有一个消费者将它写入磁盘。

现在，如果缓冲区尚未被消费者线程写入，则需要尽快恢复生产的生产者线程会旋转到位：

```
int volatile datatogo=0; // global with starting condition

while(datatogo != 0) // spin, buffer not yet written out
{
    if (recflag == 0) return; // recording is terminated
}
// clipped code fills buffer, then:
datatogo = lengthoffill; 
```

...在另一个线程中，缓冲区写入器执行以下操作：

```
 while(recflag)
    {
        if (datatogo)
        {
            if (m_File.write(sbuffer,datatogo) == -1)
            {
                recflag=0; // bail NOW
            }
            datatogo = 0; // buffer transferred
        }
        usleep(100); // 100 uS
    } 
```

这样做的最终结果是，写入磁盘的消费者在完成写入后放弃了 CPU，因为它知道生产者将需要一些时间来实际填充缓冲区。当消费者在没有数据时处于休眠状态，CPU 可供生产者使用。消费者睡眠 100 uS，检查数据，如果没有数据则返回睡眠，因此它在该状态下除了睡眠之外并没有做太多事情。

然而，由于睡眠时间是任意的，这不太可能是最佳的。即使我仔细调整它以在我的机器上工作（8 核，3 GHz），它在另一台机器上的作用也会不同。有时数据已经准备好写入，而消费者刚刚入睡，可以这么说，将整个 100 uS 扔出窗外。我也对如此小的时间窗口的分辨率和可靠性感到不安——而更大的窗口将无法工作。

所以。Qt中有多种机制可以控制对事物的访问，这本质上是我想要做的。但我不明白哪一个（如果有的话）会做我想做的事，那就是：

1）让消费者睡眠直到缓冲区已满，然后写入并重新进入睡眠状态，或者直到作业停止以便它可以关闭文件（它可以在唤醒时检查哪个）

2) 当生产者睡眠时，仅当缓冲区被写出时，否则填充缓冲区并返回生产其内容。

我需要尽可能多的可用 CPU ——这是一个软件定义的无线电应用程序，到处都有数据飞来飞去，多个 FFT 正在运行，各种图形 hoo-ha 发生等等。旋转时间很糟糕，很糟糕。

有什么好心人能指点我使用的理想 Qt 机制吗？我发现 QMutex、QWaitCondition、QSemaphore 上的 Qt 文档...有点不透明。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:43:44.380

将整数变量标记为 volatile 不足以保证您在多线程程序中需要：

[为什么 volatile 在多线程 C 或 C++ 编程中没有用？](https://stackoverflow.com/questions/2484980/why-is-volatile-not-considered-useful-in-multithreaded-c-or-c-programming)

如果您喜欢深入了解具体细节，实际上可以使用原子整数和指针：

[http://doc.qt.io/archives/qt-4.7/qatomicint.html](http://doc.qt.io/archives/qt-4.7/qatomicint.html)

[http://doc.qt.io/archives/qt-4.7/qatomicpointer.html](http://doc.qt.io/archives/qt-4.7/qatomicpointer.html)

但是您确实想使用 Qt 的线程原语。与使用互斥锁、信号量和等待条件相比，旋转/休眠是一种浪费。这些是您可以在任何线程库中找到的相当普遍的概念，因此我会四处寻找对它们的良好解释。一开始并不容易让人头晕目眩，但你需要知道它！

QWaitCondition 的生产者/消费者示例应该能说明您的场景：

[http://doc.qt.io/qt-4.8/qt-threads-waitconditions-example.html](http://doc.qt.io/qt-4.8/qt-threads-waitconditions-example.html)

# android - 如何在 HTTP 中发布 XML

> ID：10195154
> 
> 赞同：0
> 
> 时间：2012-04-17T16:24:36.270
> 
> 标签：android

我需要通过 http 发送一个 xml 内容。我已经尝试了一些方法，但没有成功。参数应如下所示 {"action"=>"login", "controller"=>"session", "user"=>{"username"=>"123@gmail.com", "password"=>" [FILTERED]"}} 虽然该操作和控制器参数是在服务器（即）用户标签内预定义的，但用户名和密码都应该出现......

XML 代码块将是

```
 <?xml version=\"1.0\" encoding=\"UTF-8\"?>
             <user>
             <username>xxx</username>
             <password>yyyy</password>
             </user> 
```

我的代码是

```
String param1 = null;
param1 = URLEncoder.encode(charset);

String param2 = null;
try {
    param2 = URLEncoder.encode("x@yyy.com", charset);
} catch (UnsupportedEncodingException e3) {
    // TODO Auto-generated catch block
    e3.printStackTrace();
} 
String param3 = null;
try {
    param2 = URLEncoder.encode("xxx", charset);
} catch (UnsupportedEncodingException e4) {
    // TODO Auto-generated catch block
    e4.printStackTrace();
}

String query = String.format("user=&username=%s&password=%s", param1, param2,param3);*/

URLConnection urlConnection = null;
try {
    urlConnection = new URL(url).openConnection();
} catch (MalformedURLException e2) {
    // TODO Auto-generated catch block
    e2.printStackTrace();
} catch (IOException e2) {
    // TODO Auto-generated catch block
    e2.printStackTrace();
}
urlConnection.setUseCaches(false);
urlConnection.setDoOutput(true); // Triggers POST.
//urlConnection.setRequestProperty("accept-charset", charset);
urlConnection.setRequestProperty("content-type", "application/xml");

OutputStreamWriter writer = null;
try {
    writer = new OutputStreamWriter(urlConnection.getOutputStream());
    writer.write(query); // Write POST query string (if any needed).
} catch (UnsupportedEncodingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} finally {
    if (writer != null) try { writer.close(); } catch (IOException logOrIgnore) {}
}

try {
    InputStream result = urlConnection.getInputStream();
} catch (IOException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
} 
```

# ruby-on-rails - Rails - Sass - 1p*x 不是有效的 CSS 值

> ID：10195157
> 
> 赞同：2
> 
> 时间：2012-04-17T16:24:40.093
> 
> 标签：ruby-on-rails, sass

我在使用 Sass/Css 的 Rails 中遇到了一个奇怪的错误：

**“1p*x 不是有效的 CSS 值。”**

应用程序跟踪说它来自：

应用程序/资产/样式表/共享/form.css.scss:19

但在我的文件中，这一行是：

**“输入{@include all_borders(1px,solid,red);}”**

这就像在 p 和 x 之间添加一个“*”。而且，它对许多其他行也有同样的问题。而且...错误刚刚出现，我以前从未遇到过，我没有更改配置文件中的任何内容，我唯一做的就是使用捆绑更新更新我的宝石。

**[编辑] Mixin 代码：**

```
@mixin all_borders($strength: 1px, $type: solid, $color: black){
  border: $strength $type $color;
} 
```

**[结束编辑]**

我也有一些“参数数量错误（4 比 1）”的问题......但是，昨天一切正常......这就像我的 scss 文件的预编译有问题......我有同样的问题试图预编译。

有人有线索吗？我不知道该怎么办...

如果它可能有帮助：我正在使用 Ruby 1.9.3、Rails 3.2.3、sass 3.1.15 和 sass-rails 3.2.5，我还发布了我的 application.rb 和 development.rb 文件：

**development.rb** config.cache_classes = false

```
config.whiny_nils = true

config.consider_all_requests_local       = true
config.action_controller.perform_caching = false

config.action_mailer.raise_delivery_errors = true

config.active_support.deprecation = :log

config.action_dispatch.best_standards_support = :builtin

config.active_record.mass_assignment_sanitizer = :strict

config.active_record.auto_explain_threshold_in_seconds = 0.5

config.assets.compress = false
config.serve_static_assets = false

config.assets.debug = true 
```

**应用程序.rb**

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  Bundler.require(*Rails.groups(:assets => %w(development test)))
end

module MySite
  class Application < Rails::Application
    config.autoload_paths += %W(#{config.root}/lib)

    config.encoding = "utf-8"

    config.assets.enabled = true
    config.assets.initialize_on_precompile = false

    config.assets.version = '1.0'

  end
end 
```

提前感谢您花时间帮助我。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:55:22.010

**好的，我发现问题出在哪里了...** Pfiew，这很难找到...

由于 Rails 服务器，我不得不创建一个全新的项目，逐个文件添加我损坏的项目的代码并跟踪问题的发生。

所以我发现删除这个文件： */config/initializers/custom_libraries.rb*

正在解决问题。这个文件只有一行：**require 'ext/string'**

所以问题必须来自我的自定义字符串方法。

是的，确实如此。我在字符串类中添加了一个“to_a”（to_array）方法，因为原生 Ruby 字符串类没有这个方法。方法是：

```
def to_a
  return self.chars.to_a
end 
```

所以评论这个方法解决了我的 CSS 问题。我想 sass-rails gem 或与 CSS 相关的那些已经在创建此方法并将其用于编译或其他 CSS 内容，而我的“to_a”字符串方法肯定搞砸了。但我只是猜测...

Surely the Rails errors weren't helpful at all to find this out. Does anyone know how I may have found the issue faster? Maybe a specific debug tool to recommend?

I will learn from this misadventure: never ever create your own method for a specific Ruby class with a name that is too similar with other Ruby class methods.

# javascript - 为什么这会导致浏览器锁定（我认为是无限循环）

> ID：10195160
> 
> 赞同：1
> 
> 时间：2012-04-17T16:24:46.317
> 
> 标签：javascript, regex

为什么这个声明挂了？

```
while ((matched = rx.exec(text)) != null) {
  while((m = rx.exec(matched[0])) != null) {

  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:41:02.727

如果没有看到 text 和 rx 的实际值，很难确定，并且在这个循环中实际发生的事情取决于它们的内容，但一种理论是，`.exec()`带有“g”标志的方法从一个调用到下一个调用保持状态正是为了让您可以在一个循环中重复调用它。为了使您的外循环正常工作，必须从外循环的一次迭代到下一次迭代保持该状态。

但是，当您使用相同的正则表达式对象并使用它来搜索内部循环中的不同内容时，该状态将不会被正确保留 -`rx`对象中的外部状态将受到内部循环的干扰，该内部循环也在使用同一个`rx`对象。

如果您为每个循环使用单独的正则表达式对象，您的双循环可能会工作，如下所示：

```
while ((matched = rx1.exec(text)) != null) {
  while((m = rx2.exec(matched[0])) != null) {

  }
} 
```

它们需要是真正独立的正则表达式对象，而不是对同一个正则表达式对象的引用。

此外，`matched[0]`包含来自外部搜索的整个匹配项，因此您刚刚`matched[0]`在外部循环中与您的正则表达式匹配，然后您要求再次匹配您刚刚与相同正则表达式匹配的完全相同的内容。为什么？你想达到什么目的？内部循环似乎不会做任何有用的事情。

与 SO 上的许多问题一样，如果您支持并告诉我们您真正想要完成的工作，我们可能会提供更多有用的信息来实际解决您的实际问题。

无论如何，我的前三段解释了为什么这很容易成为一个无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:26:40.077

`matched[0]`始终包含整个匹配项，因此内部循环可能永远不会终止。

# c++ - 您使用哪个命令在 Visual Studio 2010 (c++) 中调用 .exe

> ID：10195162
> 
> 赞同：0
> 
> 时间：2012-04-17T16:24:51.707
> 
> 标签：c++, winapi

我正在尝试构建一个在按下“完成”按钮时仅安装某些软件的表单。我想在 Visual Studio 2010 中调用 .exe 文件，以便在按下按钮时运行 .exe。我已经尝试了该`start "";`命令以及该`CreateProcess ();`命令和常规 c++`System();`命令。到目前为止，没有任何事情发生。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T16:27:59.100

`CreateProcess`是通常的方式。如果它不起作用，那么你做错了什么。

如果失败，您可以致电`GetLastError`了解失败原因的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:27:47.000

尝试使用 ShellExecute Windows 的 API 调用可执行文件。

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)

# php - PHP 中 strtotime() 的其他用途

> ID：10195166
> 
> 赞同：0
> 
> 时间：2012-04-17T16:25:11.953
> 
> 标签：php, strtotime

我正在尝试让 strtotime 制作日期范围，我已经弄清楚了一些基本的。

这是我想弄清楚的一些内容，但我找不到您应该在网上任何地方为这些内容键入的格式：

```
$startDate = strtotime('first day of last month');
$endDate = strtotime('last day of last month');
$startDate = strtotime('first of last week');
$startDate = strtotime('first of this week'); 
```

这些是我唯一找不到参考的，它们可能需要特殊的编程并且没有`strtotime`参考。

编辑：看起来我的代码应该可以工作，但 PHP 5.2 中有一个错误

我使用了一种解决方法来到达上个月的第一天。

这有效： $firstDayOfLastMonth = strtotime(date('Ym', strtotime('last month')))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:39:40.973

对于你可以使用的一周

```
strtotime('this week midnight'); // returns Monday midnight of this week
strtotime('last week midnight'); // returns Monday midnight of last week 
```

如果您想要从星期一开始的一周，则此方法有效。上周似乎假设星期一是第一天。如果您想要从星期日开始的一周的时间戳，请使用以下命令：

```
strtotime('last week Sunday midnight'); // returns Sunday midnight of this week
strtotime('-2 weeks Sunday midnight'); // returns Sunday midnight of last week 
```

# asp.net-mvc-3 - 除非通过 URL 调用，否则 MVC3 输出缓存不会缓存。正确的？

> ID：10195170
> 
> 赞同：1
> 
> 时间：2012-04-17T16:25:17.567
> 
> 标签：asp.net-mvc-3, model-view-controller, controller, outputcache

我有一个控制器，它调用控制器中名为 GetTypes() 的方法

```
[OutputCache(Duration = 6000)]
public List<SelectListItem> GetTypes()
{
   return Datetime.Now();
} 
```

如果我从控制器内部从另一个操作方法调用此方法，为什么它不缓存？只有当我使用 URL 或 @Render 直接调用它时，它似乎才会缓存。

“本地主机/家庭/GetTypes”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:31:33.210

是的，这就是它的工作方式，也是它应该工作的方式。

原因是属性不会神奇地起作用。有些东西必须检查它们并根据它们做事。在处理请求时，该代码是 MVC 正常管道的一部分。

当您直接调用该方法时，您绕过了正常的管道，因此属性不会被评估和/或运行。

除此之外，只是简单的常识应该告诉您缓存仅适用于响应。如果没有响应（因为您直接调用它），它将不适用。

你应该做的是执行一个子动作。您将如何做到这一点取决于您调用该方法的位置和方式。因此，除非您向我们展示调用该方法的代码（及其周围的上下文），否则我无法进一步帮助您。

# javascript - 为 iPad 设计网站

> ID：10195179
> 
> 赞同：0
> 
> 时间：2012-04-17T16:25:46.150
> 
> 标签：javascript, css, ipad, safari

我需要一些关于如何为 Apple iPad 设计网站的建议。

**首先是事实，以及我的计划： 事实：** - iPad 有 1024x768 屏幕 - 可视区域（折叠）是纵向 916 和陆地 660。我不确定这些信息，因为有很多页面包含不同的信息。（在某处也读到 952，所以如果您有 Ipad，请使用标准 SAFARI 设置确认正确的数字）

**我的计划：**

我的设计计划是一个很长的一页网站。例如 - 一个五个菜单页面（这意味着我在另一个下面有 5 个 div） - 每个菜单都是一个电影库 - 访问者总是看到一个菜单，所以一个电影库

**我的问题：**

*   iPad 上哪个尺寸正确？
*   如何使我的 DIV 尺寸（高度）始终适合屏幕？如果这是可能的，那么： - 导致在 PC 上查看有什么问题吗？（所以只有当浏览器代理是 iPad 时我才需要使用此设置？）

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:28:42.190

如果您无法使用 iPad 进行测试，那么您最好看看模拟器。类似于：http : [//ipad-emulator.org/](http://ipad-emulator.org/)

请记住，尽管 Safari 并不是唯一可用于 iPad 的浏览器，因此您基于此做出的任何大小估计可能不适用于其他浏览器。

否则，谷歌是你的朋友： [如何让你的网站适合 Apple iPad](http://x7.fi/2010/02/12/how-to-fit-your-website-for-the-apple-ipad/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:00:14.880

如果您试图让网站在桌面浏览器和 iPad 上都可以访问，我建议您使用 CSS 媒体查询来构建您的网站。它允许您根据浏览器大小更改站点。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

语法很简单，举个例子：

```
@media screen and (max-width:443px) and (min-width:250px){
    .class{}
    #id{}
} 
```

它的工作方式是当屏幕在 250px 和 443px 之间时，它会应用其中的样式。只要您将媒体查询保留在 CSS 文档的底部，您就会覆盖其他属性。这样做的好处是您可以通过调整浏览器窗口的大小来测试它。

# c# - WPF - 在选定行的第一列中获取数据

> ID：10195186
> 
> 赞同：0
> 
> 时间：2012-04-17T16:26:07.563
> 
> 标签：c#, wpf, datagrid

我有一个用于搜索结果的 DataGrid，我希望用户能够单击一行，并加载该客户的详细信息。该行的第一个索引（索引位置 0）具有 ID，因此一旦我获得选定的行，它将非常简单，但是，我无法提取此信息。有没有办法做类似的事情：

```
string ID = myGrid.selectedRow[0].ToString(); 
```

我已经对 selectionChanged 事件进行了编程和触发，我似乎无法将数据输出..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:29:15.183

我看到这个标签`WPF`，那意味着你正在使用`DataBinding`，那意味着你有一个`ModelView`或至少`Model`。拥有这种架构，尤其是在 WPF 中，永远*不会**从*读取数据`UI`，**从绑定的数据模型读取数据**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:21:59.463

使用 SelectedIndex 确实有一种非常简单的方法可以做到这一点。

```
int i = yourgrid.SelectedIndex;
DataRowView v = (DataRowView)yourgrid.Items[i];  // this give you access to the row
string s = (string)v[0];  // this gives you the value in column 0. 
```

你也可以这样做： string s = (string)v["columnname"];
这可以保护您免受用户移动列的影响

# php - 对 zf 操作的 ajax 调用返回 404 错误，但也返回视图作为响应

> ID：10195187
> 
> 赞同：0
> 
> 时间：2012-04-17T16:26:11.367
> 
> 标签：php, ajax, zend-framework

在开始之前，我查看了所有标题相似的推荐问题，即使是这个[jQuery Ajax 返回 404 错误，但正确的响应，](https://stackoverflow.com/questions/3445270/jquery-ajax-returning-404-error-but-correct-response)但那个恰好是 wordpress 问题，而且我没有使用 wordpress，所以它没有用。

这是这里的基本内容，但我无法让它遵守。

**javascript调用**

```
 $.ajax({
            type: 'POST',
            url: '/commentCenter/index/comment-ajax',
            dataType: "text",
            data: formData,
            success: function(result){
                console.log(result);
            }
        }); 
```

**控制器/动作**

```
 public function commentAjaxAction() {

      $this->_helper->layout()->disableLayout();
      $this->view->output = "testData";
    } 
```

**评论Ajax.phtml**

```
<?php 
header('HTTP/1.1 200 OK');
echo $this->output;
?> 
```

所以，我一直在尝试这里的一切。在 Chrome 检查器中，我可以看到 404 状态代码，但我也可以在响应中看到我的视图的输出。所以，我知道它有效。我试图将状态代码标题添加到视图中（我还将它添加到控制器中以用于 s&g，但还没有骰子。正如我所提到的，我已经看到了类似问题的其他解决方案，但它们都与 wordpress 相关。我知道我我在看东西。

提前致谢。

# validation - 将 zend 过滤器和验证链附加到模型/学说实体

> ID：10195188
> 
> 赞同：2
> 
> 时间：2012-04-17T16:26:13.880
> 
> 标签：validation, filter, zend-form, models, entities

[这一集来自 ElePHPant 的声音，在](http://voicesoftheelephpant.com/?s=Matthew+Weier+#podPressPlayerSpace_1)`Zend_Form`22:00左右开始讨论`Zend\Form`Zend Framework 2 中的内容。

过滤和验证附加到模型而不是绑定到表单，这允许在模型级别拥有业务规则（验证和过滤）。

我正在使用 Zend Framework 1.11 进行开发，并且我的模型是 Doctrine 2.2 实体：如何将过滤器和验证链附加到我的实体？我想验证实体`@LifecycleCallbacks`或将过滤和验证附加到实体本身。这样，无论数据来自何处（来自 Web 表单上下文或来自 Web 服务甚至命令行上下文），我都可以在将数据刷新到数据库之前对其进行验证。

任何帮助和代码示例将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T11:04:40.843

根据我对 ZF2 Forms RFC [http://framework.zend.com/wiki/display/ZFDEV2/RFC++-+Forms](http://framework.zend.com/wiki/display/ZFDEV2/RFC+-+Forms)的了解，您可以通过在属性上声明过滤器/验证注释来注释模型/实体。

然后，您必须将模型绑定到表单对象，表单将读取并将任何相关注释应用于自身。我在这个实现中看到的一个问题是，仍然没有真正分离验证/过滤逻辑，因为这些定义被封装在您的表单对象中。

什么会更好（我不知道这是否在管道中）是表单对象调用模型上的验证例程。当然，它可能是模拟 Form 组件在您的模型中所做的事情（通过阅读注释）并在本地应用它（在 ZF2 中）。这个组件目前正在开发中，所以我肯定有兴趣在它接近完成时播放。

无论如何，对于 ZF 1.11（我自己也使用过这个实现），您可以在模型中定义验证例程，并且 $model->validate() 生成的任何错误消息都可以注入到 Zend Form 错误堆栈中。

```
// element
$form->getElement('my_element')->addErrors($model->getErrorMessages());

// form
$form->addErrors($model->getErrorMessages()); 
```

所以你最终会得到一个类似的实现；

```
$form = new My_Form();
if ($this->_request->_isPost())
{
   $data = $this->_request->getPost();
   $model = new \Entities\MyModel();
   $model->populate($data);
   if (!$model->isValid())
   {
      $form->addErrors($model->getErrorMessages());
   }
   if ($form->isValid())
   {
      // continue to save the model etc...
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:55:57.453

首先，我要感谢大家的回答，我保证我会尝试你们的解决方案，看看什么适合我。其次，我发现这个：[http](http://www.spiffyjr.me/2011/07/15/more-doctrine-2-and-zend-framework-integration-goodies/) ://www.spiffyjr.me/2011/07/15/more-doctrine-2-and-zend-framework-integration-goodies/当然还有那篇文章中的公司github，[https：/ /github.com/SpiffyJr/Spiffy](https://github.com/SpiffyJr/Spiffy)这看起来像是我的问题的解决方案，但我不知道它在生产中是否稳定，或者是否会进一步改进/开发，但下次我也会尝试。而且我想我的问题的另一个答案可能是在 zend 框架 1.X 中使用 symfony 验证器和教义 2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:30:29.063

这很棘手，但如果您想使用 Zend Framework 1.X 构建类似的东西，您可能必须扩展`Zend_Form`.

您可以通过这种方式构建一个接受`EntityManager`（或泛型`Doctrine\Common\Persistence\ObjectManager`作为依赖项以及实体的类）。

然后，您可以分析与您的实体关联的元数据，或者定义一组必须针对该实体进行检查的字段。通常，您所做的是与`Doctrine\Common\Persistence\Mapping\ClassMetadata`构造函数中的以下实例进行交互：

```
// in class Your\Form\EntityDriven
// $this->em is the EntityManager passed in
// $this->entity is the Entity object passed to the constructor
$class = $this->em->getClassMetadata(get_class($this->entity));
foreach ($class->getFieldNames() as $fieldName) {
    // Add fieldst to the form based by their eventual @Column(type="...")
    // Eventually, you could use your own AnnotationDriver to get more 
    // constraints as Symfony 2 does
} 
```

那应该确实有效。验证器将附加到表单实例。要保留表单，您可以覆盖`persistData`公共方法，如下所示：

```
public function persistData()
{
    $this->em->persist($this->entity);
    $this->em->flush($this->entity);
} 
```

我不会在`@postPersist`or之类的生命周期事件中进行验证`@preUpdate`，因为在这些情况下防止持久性的唯一方法是抛出异常（除非您使用外部侦听器，但这更加复杂）。你最终会得到一个封闭的`EntityManager`.

如果您对 Zend Framework 2 中应用的概念感兴趣，[新`Zend\Form`](https://github.com/weierophinney/zf2/blob/feature/forms)的（[参见 diff](https://github.com/weierophinney/zf2/compare/master...feature/forms#files_bucket)）组件使用[hydrator](https://github.com/weierophinney/zf2/blob/feature/forms/library/Zend/Form/Hydrator/HydratorInterface.php)将值分配给模型，因此它不会直接与它们交互，而是可以使用逻辑来发现 setter/getter 或公共属性（仅作为示例）。输入过滤已`Zend\InputFilter`作为一个新组件移至，因为它也应该在没有表单的情况下使用（您想要做什么）。验证已经解耦，但一般来说，当数据无效时不应执行 hydrator。所以现在你应该可以写一个`EntityHydrator`and了`EntityValidator`。如果你愿意贡献，请在[DoctrineModule](https://github.com/doctrine/DoctrineModule)上做一个 Pull Request :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T09:35:17.110

1.  我的方法如下：

a) 具有验证客户端（Web 表单）和模型，以便在 Web 客户端验证失败或添加其他客户端类型时。

b) 模型中的验证规则也可以进行单元测试，这对于确保规则工作验证以及模式非常有用

1.  我没有使用 Zend_Form，因为我手动开发所有表单并使用 JQuery 验证插件添加客户端验证 (http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

2.  在客户端进行所有验证，我还在 Doctrine 2 模型中使用生命周期回调实现了 preInsert 和 preUpdate 方法。

3.  但是我没有使用 Zend_Validate 类，因为我发现它们太冗长了，所以我选择了 Symfony Validation 类，它可以使用我的 Doctrine 2 模型映射等注释进行配置。更多细节在这里[http://ssmusoke.wordpress.com/2012/03/04/doctrine-2-day-2-model-validation-using-symfony-validator-service-in-zend-framework/](http://ssmusoke.wordpress.com/2012/03/04/doctrine-2-day-2-model-validation-using-symfony-validator-service-in-zend-framework/)

# android - ConcurrentModificationException even with the use of Iterator in android ArrayList

> ID：10195189
> 
> 赞同：2
> 
> 时间：2012-04-17T16:26:24.463
> 
> 标签：android, arraylist

I got a ConcurrentModificationExeption in what I thought to be a single thread case. I also know that if you iterate through a List and try to modify it in the loop, you would have an exception. Hence I actually iterate and modify it using an iterator. However, I still have the exception.

Basically, I am implementing some animation manager, and I store all my IAnimation objects in an ArrayList. There is one public method that changes the list, which is addAnimation. THere is another method that loops through the list, which is calculateTick. Since both methods are synchronized, I dont think I have a threading problem. And as mentioned earlier, I iterate thruogh the loop using the iterator. Do you guys have any ideas why I have this exception?

Here is my code:

```
 private List<IAnimation> animations = new ArrayList<IAnimation>();
    public synchronized void addAnimation(IAnimation animation) {
    animations.add(animation);
    mLooper.update();
    inAnimation = true;
}

public synchronized void calculateTick(float tpf) {     
    for (Iterator<IAnimation> iterator = animations.iterator(); iterator.hasNext();) {
        IAnimation animation= iterator.next();
                    boolean animateMore = animation.calculateTick(tpf);
        if (!animateMore ) {{
            iterator.remove();
        }
    }

} 
```

And here is my exception:

```
 E/AndroidHarness(9546): Exception thrown in Thread[GLThread 1260,5,main] 
```

04-17 11:55:38.001: E/AndroidHarness(9546): java.util.ConcurrentModificationException 04-17 11:55:38.001: E/AndroidHarness(9546): at java.util.ArrayList$ArrayListIterator.remove(ArrayList.java:582) 04-17 11:55:38.001: E/AndroidHarness(9546): at com.avaya.mco.gui.animation.AnimationManager.calculateTick(AnimationManager.java:50) 04-17 11:55:38.001: E/AndroidHarness(9546): at com.avaya.mco.gui.jmonkey.android.MyApplication.simpleUpdate(MyApplication.java:60) 04-17 11:55:38.001: E/AndroidHarness(9546): at ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:14:01.057

are you sure there is no other function missing here that iterates over the list ? maybe something that plays the animation?

also, if that doesn't help , try using "ConcurrentLinkedQueue" : [http://developer.android.com/reference/java/util/concurrent/ConcurrentLinkedQueue.html](http://developer.android.com/reference/java/util/concurrent/ConcurrentLinkedQueue.html) it's available to all versions , and it says that for the iterator : "...The returned iterator is a "weakly consistent" iterator that will never throw ConcurrentModificationException, and guarantees to traverse elements as they existed upon construction of the iterator, and may (but is not guaranteed to) reflect any modifications subsequent to construction."

# javascript - 我可以使用来自 JavaScript 的内容预填充 iframe 吗？

> ID：10195193
> 
> 赞同：1
> 
> 时间：2012-04-17T16:26:46.063
> 
> 标签：javascript, jquery, html, iframe

我有一个 JavaScript 函数，它结合了 AJAX 和字符串操作来生成一个完整的 HTML 页面作为字符串。IE：

```
var markup='<html><body>Hello world!</body></html>'; 
```

这是非常简化的，我不能保证 HTML 结构是可预测的。如何在页面上显示该内容？我认为 an`iframe`最有意义，因为字符串包含完整的 HTML 页面，但我不知道如何将标记注入 iframe。

我不想创建另一个物理文件只是用作“代理”，所以我希望有一个可以完全包含在一个 HTML 页面中的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:48:05.977

```
var iframe = document.createElement("iframe");
var doc = iframe.contentDocument; // a about:blank
doc.open();
doc.write(htmlstring);
doc.close(); 
```

为我工作。我还在`<object>`其属性中使用了带有 data-uri 的 s `data`，例如显示 xml 文档：

```
var object = document.createElement("object");
object.setAttribute('data', "data:text/xml, "+xmlstring); 
```

您还可以使用 a`<object data="about:blank">`而不是 iframe 来获取要覆盖的 contentDocument。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:08:09.837

您可以像这样从 jQuery 更改 iframe 的 html

```
function get_me_html(){
    return '<html><body>Hello world!</body></html>'
}

$('iframe').contents().find('html').html(get_me_html()) 
```

在此处查看此操作[http://jsfiddle.net/anuraguniyal/Kegc3/7/](http://jsfiddle.net/anuraguniyal/Kegc3/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:31:38.077

忘记 iframe，查找[jQuery.html()](http://api.jquery.com/html/)并修剪头部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:32:14.917

我认为您应该尝试类似 jQuery Thickbox 之类的东西，它可以在您的 HTML 文档中创建一个模态子窗口，并做一些类似于您正在寻找的事情，但是是的，您必须将您的内容转储到您可以创建的 DIV 中苍蝇。

看看下面的帖子是否有帮助：http: [//blogs.digitss.com/technology/hacking-jquery-thickbox/](http://blogs.digitss.com/technology/hacking-jquery-thickbox/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-17T16:32:54.207

使用 jQuery 你可以这样做：

```
var markup='<html><body>Hello world!</body></html>';
$('#iframe').contents().find('body').html(markup); 
```

或者，如果您可以去掉不需要的标签：

```
markup = markup.replace(/(</?html>|</?body>)/gi, "");
$('#divId').html(markup); 
```

***注意：我不知道输入的 HTML 是什么样子的，因此请确保在运行此代码之前您可以实际删除 HTML。这是一个帮助您入门的示例。***

这是使用这样的DIV：

```
<div id="divId">Content will go here</div> 
```

# snmp - 如何根据 GETBULK 请求更新我的 snmp 代理表？

> ID：10195194
> 
> 赞同：2
> 
> 时间：2012-04-17T16:26:46.277
> 
> 标签：snmp, net-snmp

我想根据 GETBULK 请求更新子代理的表，而不必为每个内部 GETNEXT 请求进行更新。

mib2c 为 GET 请求生成了以下处理程序 - 我如何在子代理中设置处理程序以专门对 GETBULK 执行更新？

```
int
table_handler(netsnmp_mib_handler *handler,
                           netsnmp_handler_registration *reginfo,
                           netsnmp_agent_request_info *reqinfo,
                           netsnmp_request_info *requests)
{

netsnmp_request_info *request;
netsnmp_table_request_info *table_info;
netsnmp_tdata  *table_data;
netsnmp_tdata_row *table_row;
struct table_entry *table_entry;
int             ret;
switch (reqinfo->mode) {
    /*                                                                                                                                                                                                          
     * Read-support (also covers GetNext requests)                                                                                                                                                              
     */
case MODE_GET:
  for (request = requests; request; request = request->next) {
        table_entry = (struct table_entry *)
            netsnmp_tdata_extract_entry(request);
        table_info = netsnmp_extract_table_info(request);

        switch (table_info->colnum) {
        case COLUMN_NAMESERVER:
            .
            .
            .
       case COLUMN_NAMESERVERPORT:
            .
            .
            .
        default:
            .
            .
            .
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:46:13.893

我根据时间而不是`getbulk`data_access.h 中的事件更新我的 Net-SNMP 缓存：

```
#define LINKTABLE_CACHE_TIMEOUT   10 //waits 10 seconds to load data 
```

我认为您想要做的是访问相同的功能，但在`getbulk`事件中调用它们。阅读 cache_handler 函数，看看你是否可以使用这些函数：[SNMP Dev API](http://www.net-snmp.org/dev/agent/group__cache__handler.html)

# mysql - 具有复数/变位的英语单词数据库

> ID：10195197
> 
> 赞同：1
> 
> 时间：2012-04-17T16:27:06.827
> 
> 标签：mysql, database, nlp

> **可能重复：**
> [动词变位数据库](https://stackoverflow.com/questions/8424806/verb-conjugations-database)

我在 MySQL 中寻找一个英文单词数据库，或者很容易转换为 MySQL，它包含动词变位和复数/单数形式。我查看了几个选项：WordNet、GCIDE 等。

然而，GCIDE 似乎并不全面，WordNet 似乎也没有按时态标记共轭（如果我错了，请纠正我）。

我的问题类似于这个： [动词共轭数据库](https://stackoverflow.com/questions/8424806/verb-conjugations-database/10192400)

但似乎没有共享令人满意的免费解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:32:23.477

也许您正在寻找的是形态分析仪。尝试[使用 WebJspell](http://natura.di.uminho.pt/webjspell/jsol.pl?ling=en)来检查 JSpell 是否对您有帮助。

您可以使用来自 Perl 的 Jspell 使用[Lingua::Jspell](http://search.cpan.org/~ambs/Lingua-Jspell-1.84/lib/Lingua/Jspell.pm)。它的文档包含大量示例。

如果你真的需要一个单词列表来添加到你的数据库中，你可以从 JSpell 字典中提取它。看一下[foreach_word](http://search.cpan.org/~ambs/Lingua-Jspell-1.84/lib/Lingua/Jspell/DictManager.pm#foreach_word)方法。下面的示例代码应该可以指导您，但我无法尝试，所以我不确定它是否会起作用。

```
$dic = jspell::dict::init("../en/en.dic") or die "could not open en.dic";
$en_dict = jspell::new("en") or die "could not load en

$dic->foreach_word(
    sub {
        # gets each word from dictionary

        my @der = $en_dict->der($word);

        foreach $dword (@der) {
            # gets the features
        my @fea = $pt_dict->fea($dword);
            # do something with the $dword and the array of features @fea
        }
    }); 
```

# parsing - 这是有效的 Genbank 功能描述还是 Biopython 错误？

> ID：10195198
> 
> 赞同：2
> 
> 时间：2012-04-17T16:27:08.520
> 
> 标签：parsing, biopython

我偶然发现了一个 Genbank 格式的文件（此处显示为一个最小的虚拟示例），其中包含如下嵌套功能：

```
FEATURES             Location/Qualifiers
     xxxx_domain     complement(complement(1..145)) 
```

这样的功能使当前的 Biopython Genbank 解析器（1.59 版本）崩溃，但在以前的版本（例如 1.55）中显然没有。显然这种行为已经在 1.57 中（见下面的评论）。

从 Biopython bugtracker 看来，旧的 locationparser 代码似乎在 1.56 中被删除：

从我可以从[ftp://ftp.ncbi.nih.gov/genbank/gbrel.txt](ftp://ftp.ncbi.nih.gov/genbank/gbrel.txt)和[http://www.insdc.org/documents/feature_table.html#3.4.2](http://www.insdc.org/documents/feature_table.html#3.4.2)上的格式描述中推断出，这是最可能无效。（但请参阅下面的评论）。

有人可以对此发表评论。即这是 Biopython 中的故障还是 Genbank 文件的格式？

完整的演示文件：

```
LOCUS       XXXXXXXXXXXXXX         240 bp    DNA     circular     17-JAN-2012
DEFINITION  xxxxxx.
KEYWORDS    xx.
SOURCE      
  ORGANISM  
FEATURES             Location/Qualifiers
     xxxx_domain     complement(complement(1..145))
                     /vntifkey="1"
                     /label=A label
                     /note="A note"
BASE COUNT       75 a        57 c        42 g        66 t 
ORIGIN
        1 tttacaaaac gcattttcaa accttgggta ctaccccctt ttaaatatcc gaatacacta 
       61 ataaacgctc tttcctttta ggtaaacccg ccaatatata ctgatacaca ctgatagttt 
      121 aaactagatg cagtggccga ccatcagatc tagtaggaaa cagctatgac catgattacg 
      181 cattacttat ttaagatcaa ccgtaccagt ataccctgcc agcatgatgg aaacctccct 
// 
```

显示错误的最小演示程序（假设安装了 Biopython 1.59 和 Python 2.7，并且上述文件以“test.gb”的形式提供：

```
#!/usr/bin/env python
from Bio import SeqIO
s = SeqIO.read(open("test.gb")), "r"), "genbank") 
```

这崩溃了

```
 raise LocationParserError(location_line)
Bio.GenBank.LocationParserError: complement(1..145) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T21:32:23.917

我认为这是一个无效的位置。这是来自 NCBI 文件还是其他地方？

请注意，对于 Biopython 1.60（下一个版本），我们计划将错误位置视为警告，而不是停止解析的错误。

# html - 如何在 Wordpress 中以正确的方式分配嵌套评论样式？

> ID：10195199
> 
> 赞同：0
> 
> 时间：2012-04-17T16:27:15.810
> 
> 标签：html, css, wordpress

这里遇到了一个大问题，这让我一整天都丧命……我想我无法自己解决它，因为我缺乏 CSS 技能。我用谷歌搜索了很多，做了很多试验+错误，但没有任何结果......

我正在构建我的第一个 Wordpress 模板，并想给我的嵌套评论一些“风格”。我的问题是，我不知道如何分配“嵌套评论”特定的 css 细节，因为评论本身只使用基本的评论 css 代码，而不是“嵌套”的！

所以这是我的 HTML 代码

```
<ol class="commentlist">
        <li class="comments" id="comment-<?php comment_ID(); ?>">
            <div class="commentAvatar"><?php echo $avatarurl["url"]; ?></div>
            <div class="comment" id="comment-<?php comment_ID() ?>">
                <div class="commentmetadata"><span><a href="#"><?php comment_author() ?></a></span> am <?php comment_date('j. F Y') ?> um <?php comment_time('H:i') ?> Uhr</div>
                    <?php comment_text() ?>
                    <?php if ( $comment->comment_approved == '0' ) : ?>
                        <em class="comment-awaiting-moderation">Achtung: Dein Kommentar muss erst noch freigegeben werden.</em>
                        <br />
                    <?php endif; ?>
                    <div class="reply">
                        <?php comment_reply_link( array_merge( $args, array( 'reply_text' => __( 'Reply <span>&darr;</span>', 'xxx' ), 'depth' => $depth, 'max_depth' => $args['max_depth'] ) ) ); ?>
                    </div><!-- .reply -->
                </div>
            <div style="clear:both"></div>
        </li>
</ol> 
```

这是我的 CSS 代码

```
.commentlist{
    list-style:none;
    padding:0;
    margin:0;
    width:547px;
}
.comments{
    margin:0 0 15px;
    padding:0 0 15px;
    border-bottom:1px solid #333
}
    .commentAvatar{
        float:left;
    }
        .commentAvatar img{
            border:5px solid #339cdf; 
            border-radius:5px;
            max-width:75px;
            max-height:75px;
        }
    .comment{
        float:left;
        width:527px;
        padding:0 0 0 10px;
    }
    .commentmetadata{font-size:11px;}
    .commentmetadata a {font-size:18px; color:#f7941d; text-decoration:none}
    .commentlist ul.children{
        list-style:none;
        padding:0 0 0 35px;
        margin:0;
    }
        .commentlist ul.children li.comments .comment{
            float:left;
            width:492x;
            padding:0 0 0 10px;
        }
        .commentlist ul.children ul.children{
            list-style:none;
            padding:0 0 0 65px;
            margin:0;
        } 
```

奇怪的是，ul.children ul.children for 确实有效，但 ul.children li.comments .comment 不...

嵌套评论区已激活；）

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:44:37.080

要将样式分配给嵌套注释，您应该可以使用此选择器来完成：

```
.commentlist li li {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T04:49:18.403

如果你想覆盖 wordpress 的默认样式，可以在 Css 中试试这个。

.anyclass

```
{
    color:#F00 !important;
} 
```

尝试在任何类中实现它

!important 将覆盖之前定义的所有 Css 样式

或者你可以试试这个

找出您要更改的标签的附近班级

例如。

你好

所以你也可以这样改变

.主跨度

```
{
   color:#F00 !important;
} 
```

希望它能解决你的问题

# c# - Facebook登录，无法获得弹出窗口

> ID：10195202
> 
> 赞同：0
> 
> 时间：2012-04-17T16:27:31.023
> 
> 标签：c#, facebook, login

我在 SOF 上搜索了很多，但没有找到我的问题的答案，所以我创建了一个新线程。我正在开发 Facebook 应用程序，并且想要测试用户是否已连接。如果他不是，我想拥有用于登录的 facebook Popup，但我不可能获得我想要的东西。

这是代码：

我尝试了很多东西：

```
String AppID = System.Configuration.ConfigurationManager.AppSettings["FB_appId"];
String redirect_uri = Controller.GetCurrentPageFacebookPublishedPath(this.Request);
Response.Redirect("https://www.facebook.com/login.php?client_id=" + AppID + 
"&redirect_uri=" + redirect_uri + "&display=popup"); 
```

或这个 ：

```
FacebookClient client = new FacebookClient();
Dictionary<string, object> PostParameters = new Dictionary<string, object>();
PostParameters.Add("client_id", AppID);
PostParameters.Add("display", "popup");
PostParameters.Add("redirect_uri", redirect_uri);
//object res = client.Post("https://www.facebook.com/dialog/oauth", PostParameters);
object res = client.Get("https://www.facebook.com/login.php", PostParameters); 
```

但是没有任何效果...

我做错了什么吗？我应该在 javascript 中执行此操作吗？

编辑 ：

我终于在c#中没有找到解决方案，所以我使用了这样的javascript：

```
FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;
            } else if (response.status === 'not_authorized') {
            } else {
                $(".myBouton").click(function () {
                    FB.login(function (response) {
                    if (response.authResponse) {
                    console.log('Welcome!  Fetching your information.... ');
                    FB.api('/me', function (response) {
                    console.log('Good to see you, ' + response.name + '.');
                    });
                    } else {
                    console.log('User cancelled login or did not fully authorize.');
                    }
                    });
                });
            }
        }); 
```

但是我不知道在那之后如何调用一个函数，因为我有很多不同的按钮，我希望在用户登录和重定向之后完成我的操作。

# c# - Try-Catch 不捕获异常

> ID：10195204
> 
> 赞同：-1
> 
> 时间：2012-04-17T16:27:35.800
> 
> 标签：c#, visual-studio, visual-studio-2010, c#-4.0, try-catch

我在 Windows 7 32 位机器上使用所有托管代码在 Visual Studio 10 中编写了一个简单的控制台应用程序。它在调试模式下工作正常，但是当我将它部署到另一台机器并运行它时，我收到消息，

```
[my assembly] has encountered a problem and needs to close.  We are sorry for the inconvenience. 
```

...然后它会生成一个我无法想象会发现有用的神秘错误报告。事情是这样的：异常发生在一个旨在优雅地处理错误的 try-catch 语句中；但是，似乎没有发现异常。

怎么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:30:03.553

异常是从代码中的不同位置引发的，或者您没有在 catch 分支中列出异常的特定类型（或其父类型之一）

“神秘”的错误消息实际上是为了帮助您找出：出了什么问题（异常的类型），它发生在哪里（堆栈跟踪）。你应该学会阅读/“解密”它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:32:13.363

就像阿提拉说的那样，它可能是从另一个地方扔过来的。您应该将类​​型设置`Exception`为一般类型，如果错误被抛出您认为的位置，那么它肯定会在那个捕获中结束。了解问题后，您可以将类型调整为更具体的内容。

另外，不要优雅地处理它，而是首先尝试将错误消息打印到控制台以查看问题可能是什么。

如果它没有被捕获，它不会被从里面抛出`try`，请确保所有有问题的代码都被包装。

# delphi - 防范资源黑客

> ID：10195206
> 
> 赞同：4
> 
> 时间：2012-04-17T16:27:41.043
> 
> 标签：delphi, delphi-7

有什么办法可以保护 Delphi 程序免受资源黑客的攻击。我不想使用一些复杂的保护，我只是不希望有资源黑客的孩子改变工具中的某些东西。我使用了 exe 压缩器、UPX、Petite 和 mpress，但在病毒总扫描后我得到 9/42，如果我在其他工具上看到该检测率，我就不会下载它。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T17:12:22.800

[PE 文件](http://msdn.microsoft.com/en-us/library/ms809762.aspx)的资源是可执行文件内部结构（标头）的一部分。所以你不能隐藏它们或只读。只有您可以检查资源是否被修改，因此为了保护您的资源免受修改，您可以

1.) 使用您的 exe 资源的哈希值存储资源或外部文件（加密），并在初始化应用程序时将存储的哈希值与当前的哈希值进行比较。

2.) 您可以加密存储您的资源，这可以使用构建后事件或执行外部工具在编译您的 exe 后加密您的资源，然后在初始化应用程序时，您可以解密内存中的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T18:32:27.697

如果您不想使用代码签名，则可以在某处嵌入 MD5 总和（在资源之外，或使用取消技巧），然后通过与 MD5 比较来检查资源是否被篡改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T12:19:56.033

还使用[OnGuard](http://sourceforge.net/projects/tponguard/)来保护 exe 文件。 [使用 tponguard 的 OgProtectExe](https://stackoverflow.com/questions/10261227/using-ogprotectexe-from-tponguard)

# objective-c - 从其他类调用方法什么都不做？

> ID：10195211
> 
> 赞同：0
> 
> 时间：2012-04-17T16:27:50.163
> 
> 标签：objective-c, cocoa

我有一个名为 MainMenu 的类，它有一个名为 switchViews 的方法，有 2 个参数，一个 NSWindow 和一个 NSView。

然后我有 AppDelegate，我想在“applicationDidFinishLaunching”中使用这个方法。

所以在 AppDelegate.hi 中导入了 MainMenu.h，在 AppDelegate.m 中我使用如下：

```
MainMenu *theMainMenu = [[MainMenu alloc]] init];
[theMainMenu switchViews:param1:param2; 
```

没有警告或错误，它只是不调用该方法。

如果我复制并粘贴该方法而不是调用它，它可以正常工作，因此变量不是问题，如果它在不同的类中，似乎只是运行该方法时出错？

任何帮助将不胜感激。

提前致谢

切换视图方法：

```
- (void)switchViews:(NSWindow*)mainWindow:(NSView*)newView {
    NSView *dummyView;
    [theMainWindow setContentView:dummyView];
    [theMainWindow setContentSize:newView.frame.size];
    [theMainWindow setContentView:newView];
} 
```

编辑：对不起，这只是一个错字。

解决方案：我在方法调用中使用了错误的参数。下面是工作代码：

```
- (void)switchViews:(NSWindow*)mainWindow:(NSView*)newView {
    NSView *dummyView;
    [mainWindow setContentView:dummyView];
    [mainWindow setContentSize:newView.frame.size];
    [mainWindow setContentView:newView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:32:52.133

> ```
> MainMenu *theMainMenu = [MainMenu alloc[ init]]; 
> ```

如果那是您的代码，那么它甚至没有运行，因为构建失败，因为该代码无效。

假设您的*实际*代码不包含语法错误，通常没有发生任何事情意味着您向`nil`. 要么`-[MainMenu init]`返回`nil`，要么实现`switchViews::`试图向它没有的对象发送消息。

假设您没有任何语句`-[MainMenu init]`to return `nil`，后一种情况更有可能。确保它创建了它需要的任何对象，或者，如果你的意思是它是基于 nib 的，请确保你已经连接了所有 MainMenu 对象的出口，并且你没有忘记加载 nib。

编辑：

> ```
> - (void)switchViews:(NSWindow*)mainWindow:(NSView*)newView {
>     NSView *dummyView;
>     [theMainWindow setContentView:dummyView];
>     [theMainWindow setContentSize:newView.frame.size];
>     [theMainWindow setContentView:newView];
> } 
> ```

您将方法的第一个参数变量命名为`mainWindow`，然后将消息发送到`theMainWindow`.

如果 MainMenu 对象有一个名为 的插座`theMainWindow`，请确保它已连接，并删除多余的第一个参数。或者，关闭插座（或其他插座`theMainWindow`）并使用`mainWindow`.

此外，由于 AppDelegate（出于某种原因）正在将窗口传递给 MainMenu 对象，因此请确保 AppDelegate 实际上具有窗口。首先检查 AppDelegate 代码中“<code>param1”的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:32:03.683

该代码无法编译（或者，如果可以编译，则它根本没有按照您的意愿进行操作）。

这没有语法意义：

```
MainMenu *theMainMenu = [MainMenu alloc[ init]]; 
```

不过，一般来说，您可能不希望分配和初始化最有可能*已经实例化并显示在屏幕上*的东西的*新实例*。

 *在字里行间，我怀疑你会受益于复习面向对象编程的基础和 Cocoa 设计模式。*

# haskell - 如何在 Haskell 中无限读取和处理用户输入

> ID：10195215
> 
> 赞同：6
> 
> 时间：2012-04-17T16:28:05.547
> 
> 标签：haskell

我希望我的命令行 Haskell 程序能够像这样运行：程序等待用户输入，

1.  用户输入一些东西，按“输入”
2.  Haskell 处理输入，在标准输出上显示结果
3.  Haskell 等待下一个用户输入
4.  如果没有更多输入，用户通过 Ctrl+D 终止程序

我试过getContents。但是 getContents 在处理它们之前等待用户输入所有行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T17:53:26.237

这里有很多混乱。让我们试着把事情弄清楚。

> 我试过getContents。但是 getContents 在处理它们之前等待用户输入所有行。

这里最有可能的是你已经编译了你的程序，并且没有注意到输出的默认缓冲是块缓冲。这很容易解决：

```
f line = putStrLn ("Hi, " ++ line ++ "!")

main = do
    hSetBuffering stdout LineBuffering -- or use NoBuffering
    putStrLn "Enter some names."
    input <- getContents
    mapM_ f (lines input) 
```

`NoBuffering`如果您不打算在每行用户输入后打印整行（包括换行符），则应该使用。

要获得更准确的答案，我们需要查看您尝试过的无效代码。

> 问：但是在我的第一次尝试中，我使用：“interact show”，但它不起作用。你知道为什么吗？
> 答：因为 show 在其全部输入耗尽之前不会返回任何输出。

这个答案并不完全正确。真正的答案是`show`生成一个没有换行符的字符串！（虽然如果输入的长度超过一行，字符序列有时`['\\','\n']` *会*`interact show`显示出来。）所以，对于，你真的必须使用`NoBuffering`on `stdout`。例如，如果你使用这个：

```
main = do
    hSetBuffering stdout NoBuffering
    interact show 
```

...程序将在每一行之后打印更多输出。您可能还想将`stdin`' 缓冲设置为`NoBuffering`（而不是默认的`LineBuffering`），因为`show`它的效率足够高，它确实可以在每次击键后产生更多的输出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T16:36:04.740

您可以尝试使用该`interact`功能。它接受一个类型的函数`String -> String`并将其转换为读取 stdin 的操作，将其连续传递给函数，并将函数返回的字符串写入 stdout。如果您注意不要过度使用输入字符串，您将获得您请求的行为。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T16:33:56.500

使用[`isEOF`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/System-IO.html#v%3aisEOF)和[`getLine`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v%3agetLine)读取输入。

这避免了您使用`interact`.

（如果我们不使用`isEOF`，当我们按下 Ctrl+D 时会抛出异常。）

```
import Control.Monad (unless)
import System.IO (isEOF)

processEachLine :: (String -> IO a) -> IO ()
processEachLine k = do
        finished <- isEOF
        unless finished $ do
                k =<< getLine
                processEachLine k 
```

在这里，我假设该`k`函数本身打印所需的输出。很容易修改`processEachLine`以打印输出，以便`k`可以是纯的。

# java - 通过 HttpClient 连接 Tomcat 管理器

> ID：10195217
> 
> 赞同：1
> 
> 时间：2012-04-17T16:28:16.073
> 
> 标签：java, tomcat, basic-authentication

有谁知道我在这里可能做错了什么？我在 tomcat-user.xml 中添加了用户名和密码，但仍然收到“401 Unauthorized”错误。

```
String url = "http://localhost:9080/manager/list";
HttpPost httppost = new HttpPost(url);
httppost.setHeader("Authorization", "Basic " + userPass);

log.debug("executing request {}", httppost.getRequestLine());
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();

BufferedReader rd = new BufferedReader(new InputStreamReader(entity.getContent()));
String line;
StringBuffer buffer = new StringBuffer();
while ((line = rd.readLine()) != null) {
buffer.append(line);
buffer.append('\n');
}
rd.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:40:33.407

答案取决于您使用的是 Tomcat 5.5/6 还是 Tomcat 7。

## 雄猫 7

您需要使用以下 URL 访问列表：

```
http://localhost:9080/manager/text/list 
```

*   [http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#List_Currently_Deployed_Applications](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#List_Currently_Deployed_Applications)

您需要使用具有该`manager-script`角色的用户配置 tomcat-user.xml。

*   [http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Configuring_Manager_Application_Access)

## 雄猫 5.5/6

您需要使用以下 URL 访问列表：

```
http://localhost:9080/manager/list 
```

*   [http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html#List_Currently_Deployed_Applications](http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html#List_Currently_Deployed_Applications)（Tomcat 5.5 文档被引用，因为出于某种原因 Tomcat 6 文档包含 Tomcat 7 特定说明）

您需要使用具有该`manager`角色的用户配置 tomcat-user.xml。

*   [http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html#Configuring_Manager_Application_Access](http://tomcat.apache.org/tomcat-5.5-doc/manager-howto.html#Configuring_Manager_Application_Access)

## 更新

您可能未正确执行基本身份验证步骤。用户名/密码可能需要进行 base64 编码。请参阅此问题中投票最高的答案：[Java 中的 Http Basic Authentication using HttpClient?](https://stackoverflow.com/questions/3283234/http-basic-authentication-in-java-using-httpclient)

# actionscript-3 - mx：按钮填充颜色不起作用

> ID：10195221
> 
> 赞同：0
> 
> 时间：2012-04-17T16:28:38.163
> 
> 标签：actionscript-3, apache-flex, flash-builder

我使用 FB4.6 并尝试在我的按钮上应用填充颜色。

```
package fr.int.component.customNavTab
{
    import mx.controls.Button;
    import mx.controls.ToggleButtonBar;
    import mx.core.IFlexDisplayObject;
    import mx.states.OverrideBase;

    public class IconToggleButtonBar extends ToggleButtonBar

    {

        public function IconToggleButtonBar()
        {
            super();

        }

        [Inspectable (enumeration='left,right,top,bottom', defaultValue='left')]  
        public var labelPlacement:String = 'left';  
        public var color:uint;

        override protected function createNavItem(label:String, icon:Class=null):IFlexDisplayObject
        {
            var b:Button = Button (super.createNavItem(label,icon));
            b.labelPlacement = labelPlacement;

            b.setStyle('fillColors', [0x86C543, 0xE6E6E6]);
            return b;
        }

    }
} 
```

但这对我的按钮没有影响。

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:46:17.980

你传入一个字符串**'[0x86C543, 0xE6E6E6]'**你需要一个数组。[] 括号表示一个数组，但通过将其放在引号中，它会作为字符串读入。

将此更改为

```
b.setStyle('fillColors', [0x86C543, 0xE6E6E6]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T13:15:16.027

`fillColors``mx:Button`仅适用于 Halo 主题的作品。所以你需要使用 Flex 3 SDK 或在 Flex 4 [http://blog.flexexamples.com/2009/07/14/using-the-halo-theme-in-flex-4/中尝试类似的东西](http://blog.flexexamples.com/2009/07/14/using-the-halo-theme-in-flex-4/)

**编辑**：这是一个例子。尝试使用 Flex 4 SDK 创建项目并将此代码放入应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";
        mx|Button{
            fillColors: #FF0000, #00FF00
        }
    </fx:Style>
    <mx:Button />
</s:Application> 
```

会有一个警告`The style 'fillColors' is only supported by type 'mx.controls.Button' with the theme(s) 'halo'.`而且你正在使用它并不重要，`mx:Button`你需要使用光环主题的事实很重要。所以如果你想改变 fillColors`mx:Button`你有我之前发布过的 2 个选择

# java - 对UDP客户端服务器为什么这样做感到困惑

> ID：10195230
> 
> 赞同：0
> 
> 时间：2012-04-17T16:29:02.093
> 
> 标签：java, udp, udpclient

我正在使用 UDP 创建客户端-服务器应用程序。在有人问我为什么使用 UDP 而不是 TCP 之前，让我通过说明它的分配来告诉答案。好的，继续这个问题！

我创建了一个客户端类，它产生一个线程以便将数据包发送到 UDP 服务器。主线程监听传入的数据包。服务器类充当欢迎消息推送服务以及将客户端消息传递给每个人的中间人。

当我创建两个客户端时，第一个客户端输出如下所示：

```
Please enter your name for the server: 
James
Welcome to the server James
Hi all // User james types this
James: Hi all // Outputs his message to him once - that's fine
Hi mate // Output from another user 
```

这就是我希望所有客户端发送和接收消息的方式。但是当第二个客户端做同样的事情时，我得到以下输出：

```
Please enter your name for the server: 
Owen
Welcome to the server Owen
Hi all         // Client one (James wrote this)
Hi mate
Owen: Hi mate
Hi mate 
```

请注意，我在这里收到了两次相同的消息，但在第一个客户端上我只收到一次。这是我在服务器类中向客户端发送消息的逻辑：

```
// Get the response
                String response = new String(packet.getData());

                // Test - send a message from the server to each user
                if( ports.size() > 1 )
                {
                    for( int i = 0; i < ports.size(); i++ )
                    {
                        System.out.println( "Values in port arraylist: "+ports );

                        if( packet.getPort() == ports.get(i) )
                        {

                        } else 
                        {
                            // String toSend = names.get(i).concat( ": "+response );
                            // System.out.println( toSend );
                            buf = response.getBytes();

                            System.out.println( "Packet Receieved from Port: "+packet.getPort()+"\nPorts.get: "+ports.get(i) );

                            // Could store all address in own arraylist for outside local host networking
                            int thisPort = ports.get(i);
                            packet = new DatagramPacket( buf, buf.length,packet.getAddress(),thisPort );
                            socket.send(packet);
                            System.out.println( "Sending message to port "+ports.get(i) );
                        }
                    }
                    System.out.println( "\n" );
                    packet = null;
                } 
```

为了测试这一点，我添加了一些输出行来查看这里发生了什么并得到了这个：

```
Values in port arraylist: [61493, 61494]
Values in port arraylist: [61493, 61494]
Packet Receieved from Port: 61493
Ports.get: 61494
Sending message to port 61494

Values in port arraylist: [61493, 61494]
Packet Receieved from Port: 61494
Ports.get: 61493
Sending message to port 61493
Values in port arraylist: [61493, 61494]
Packet Receieved from Port: 61493
Ports.get: 61494
Sending message to port 61494 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:54:19.107

我不知道它为什么这样做，但我通过在代码中放置一个全局变量来保存端口的临时值以进行比较来修复它：/

# c# - 缺少格式字符串参数不应该是编译时错误吗？

> ID：10195236
> 
> 赞同：6
> 
> 时间：2012-04-17T16:29:23.397
> 
> 标签：c#, string-formatting

在格式字符串的全文是静态的并且在编译时已知的情况下，丢失的格式字符串参数不应该是编译时错误，或者至少是警告吗？

ReSharper 捕捉到了这一点，但它只是一个带下划线的曲线。我的印象是这会触发一般的编译时错误：

```
string x = string.Format("soeuotnh {0}"); 
```

有什么方法可以触发此类错误的警告，而无需通过 FxCop 或其他方式运行我的代码？即使是 C/C++ 编译器也会针对如此明显的错误触发警告/错误（尽管它们通常不会检查类型安全）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:36:47.843

这*可能*是一个警告，但它*应该*是吗？好吧，我想这取决于编译器团队，它不像`String.Format`是 C#*语言*的一部分。

这不是 C；你没有调用未定义的行为或任何东西，该方法可以简单地处理丢失的参数，并且假设（我假设......）当它抛出异常时你会很快捕获它。没有什么“危险”的，这只是一个逻辑错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:37:13.513

除了您提到的自动检测这种情况之外，我认为没有其他方法。至于为什么会发生这种情况，Format 方法与重载相匹配`(String, params Object[])`，其参数[在文档中定义](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)如下：

```
public static string Format(
    string format,
    params Object[] args
) 
```

> format 类型：System.String
> 复合格式字符串（请参阅备注）。
> 
> args 类型：System.Object[] 包含**零**个或多个要格式化的对象的对象数组。

由于`params`定义了可变数量的参数（包括零个参数），这就是为什么没有抛出**编译时**异常的原因。

**编辑：**

由于编译器可以选择有效的重载，因此您不会收到编译时错误。所以这不再是编译器问题，最好的办法是使用代码质量工具 Resharper 来检测这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:48:55.823

一些 C 编译器会解析格式字符串，因为格式字符串与参数不匹配会导致严重的崩溃错误——甚至更糟糕的是，安全错误。但是，在 C# 中，您只会在调用站点遇到异常，因此这并不重要。

编译器可以做到这一点，但这需要将代码识别`string.Format`为特殊情况，并且（更糟糕的是）需要有人在 C# 编译器中编写格式字符串解析器。所有这些都是为了警告您每次执行时都会崩溃的代码。

这样做的一个大问题是，许多人在编译时将所有警告都打开并将警告作为错误，这意味着添加此警告将破坏他们的构建。任何人在其代码的黑暗角落中的一些错误格式字符串从未执行过，将突然无法构建他们的产品。这些人会抱怨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:50:43.357

正如已经说过的，这不是编译器要做或应该担心的事情。

在执行以下操作时，您希望编译器如何表现：

```
string format = "{0}";
List<string> parms = new List<string> { "Hello" };

if (DateTime.Now.Second % 2 == 0)
{
    format += " {1}";
    parms.Add("World");
}

Console.WriteLine(format, parms.ToArray()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T16:55:47.733

[Resharper](http://www.jetbrains.com/resharper/)针对这种情况显示警告：“格式化字符串中不存在参数”。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-17T16:45:13.953

该方法的“格式”参数不是常数。所有不是常量的东西都不能在编译时检查。

它可以通过各种方法在运行时组合，甚至可以是用户输入...（恐怖！）

这就是为什么它不是编译时错误。

**编辑：**好的，如果它是一个常量表达式，*可以*对其进行分析并生成警告。但这里是[Eric Lipert 对另一个](https://stackoverflow.com/questions/4909156/why-arent-c-sharp-static-class-extension-methods-supported)有点适用的问题的回答：收益高于成本。

这是否是值得为 String.Format （可能还有其他字符串格式函数）花费特殊情况场景的真正好处……这是一个艰难的决定。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-18T18:16:46.760

我已在 Microsoft Connect 上提交[了考虑](http://connect.microsoft.com/VisualStudio/feedback/details/737343/c-compiler-should-make-greater-effort-to-catch-format-string-exceptions-at-compile-time)此功能的请求，因为我认为

*   回答说“如果代码路径不是很热，人们宁愿他们的代码在运行时编译并失败”只是荒谬的，并且在非解释语言中没有位置，尤其是在没有明确定义的强类型语言中放置这样一个与 C# 一样，类型安全的重要性。
*   说编译器在编译时实际上无法（永远）推导出格式字符串和参数数组的答案也是不正确的。是的，有时编译器无法在编译时推断出一个或另一个（或两者），并且对此无能为力，但在许多其他时候，它拥有完整的信息可供使用。
*   说这完全不是编译器的工作只是因为规范没有提到对这种行为发出警告的答案错过了这样一个事实，即规范是编译器应该实现的最低要求，并且编译器是免费的（并且确实确实在很大程度上）超越和超越，只要它不与规范冲突。
*   说 C 编译器也不这样做的答案是完全错误的 - 我已经[发布了其他示例](https://gist.github.com/2407405)。
*   说我发布的代码示例在运行时不会引发异常的答案是公然错误的（尽管从那时起大多数都已被编辑）。

归根结底，这是一种“可以，不可以，也许应该”的情况。我试图确保我无法在*编译器*（不是第三方软件）中设置任何东西以使其警告更具侵略性，或者如果有某种方式我可以更改我的代码以使其抛出异常（例如，将所有内容声明为 const），但事实证明（到目前为止）这是不可能的。无论 Visual Studio 团队对我在 MS Connect 上打开的问题的反应如何，事实仍然是编译器肯定*可以*在编译时捕获大量字符串格式异常，这*将*是一个好处......但它仍然存在VS 团队来确定它是否值得实施。

# android - Android：如何清除自定义列表视图中的所有项目

> ID：10195237
> 
> 赞同：2
> 
> 时间：2012-04-17T16:29:35.917
> 
> 标签：android, listview

我知道可以通过调用 'clear' 到 arrayadapter 等来清除正常的列表视图。但是如果它是自定义列表视图，我们如何清除项目？

这是我的代码：

活动：

```
public class GroupList extends Activity{
    TextView v_no_groups;
    Cursor grouplist_cur;
    Context context = GroupList.this;
    SQLiteDatabase mydb=null;
    ListView v_grouplist;
    ArrayList<String> grpname_arr = new ArrayList<String>();
    ArrayList<String> grpid_arr = new ArrayList<String>();
    ArrayList<Integer> memcount_arr = new ArrayList<Integer>();
    ArrayList<Integer> totaltrans_arr = new ArrayList<Integer>();
    M_grplist_adapter mga;
    Button v_creategrp;
    List<M_grplist_class> glist;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.grouplist);
    }

    @Override
    protected void onResume() {

        super.onResume();

        //mga.clearlistview();

        v_creategrp = (Button)findViewById(R.id.x_creategrp);
        v_grouplist = (ListView)findViewById(android.R.id.list);
        registerForContextMenu(v_grouplist);
        v_no_groups = (TextView)findViewById(R.id.x_no_groups);

        mydb = this.openOrCreateDatabase("moneydb", 0, null);
        mydb.execSQL("CREATE TABLE IF NOT EXISTS grouptable(grpname varchar(30),grpid varchar(10),memcount number(3),totaltrans number(3))");   
        grouplist_cur = mydb.rawQuery("SELECT * from grouptable", null);

        if(grouplist_cur.getCount()>0)
        {

            grouplist_cur.moveToFirst();
            do{
                grpname_arr.add(grouplist_cur.getString(0));
                memcount_arr.add(grouplist_cur.getInt(2));
                totaltrans_arr.add(grouplist_cur.getInt(3));
            }while(grouplist_cur.moveToNext());

            glist = new ArrayList<M_grplist_class>();
            for(int i=grpname_arr.size()-1;i>=0;i--){
                glist.add(new M_grplist_class(grpname_arr.get(i),memcount_arr.get(i),totaltrans_arr.get(i)));
            }

            mga = new M_grplist_adapter(context,glist);
            v_grouplist.setAdapter(mga);

            grouplist_cur.close();
            mydb.close();
        }
        else
        {
            grouplist_cur.close();
            mydb.close();
        }

        v_creategrp.setOnClickListener(new OnClickListener(){
            public void onClick(View v){
                Intent int_newgrp = new Intent(context,NewGroup.class);
                startActivity(int_newgrp);
            }
        });
    } 
```

grplist_adapter 类：

```
public class M_grplist_adapter extends BaseAdapter{
    private List<M_grplist_class> items = null;
    private Context context;
    private int index;

    public M_grplist_adapter(Context context,List<M_grplist_class> items){
        items.clear();
        notifyDataSetChanged();
        this.items = items;
        this.context = context;
        //notifyDataSetChanged();
        Log.i("Dillu", "you are here M_grplist_adapter");
    }

    @Override
    public int getCount() {
        Log.i("Dillu", "you are here getcount");
        return items.size();

    }

    @Override
    public Object getItem(int position) {
        index = position;
        Log.i("Dillu", "you are here getitem");
        return items.get(position);
    }

    @Override
    public long getItemId(int position) {
        Log.i("Dillu", "you are here getitemid");
        return position;
    }

    public String clear()
    {
        String name = items.get(index).getgrpname();
        items.remove(index);
        notifyDataSetChanged();
        return name;
    }

    @Override
    public View getView(int index, View convertView, ViewGroup parent) {
        Log.i("Dillu", "you are here getview");
        LinearLayout rowLayout=null;
        if(convertView==null) 
            rowLayout = (LinearLayout)LayoutInflater.from(context).inflate(R.layout.m_grplist_item,parent,false);
        else
            rowLayout = (LinearLayout)convertView;  

        TextView gname = (TextView)rowLayout.findViewById(R.id.grpname);
        gname.setText(items.get(index).getgrpname());

        TextView gmems = (TextView)rowLayout.findViewById(R.id.noofmems);
        int int_temp = items.get(index).getmemcount();
        String str_temp = Integer.toString(int_temp);
        gmems.setText(str_temp);

        TextView gtrans = (TextView)rowLayout.findViewById(R.id.nooftrans);
        int int_temp_1 = items.get(index).gettotaltrans();
        String str_temp_1 = Integer.toString(int_temp_1);
        gtrans.setText(str_temp_1);

        return rowLayout;
    }

} 
```

M_grplist_class ：

```
public class M_grplist_class {
    String loc_grpname;
    int loc_memcount;
    int loc_totaltrans;

     public M_grplist_class(String grpname,int memcount,int totaltrans){
         loc_grpname = grpname;
         loc_memcount = memcount;
         loc_totaltrans = totaltrans; 
     }

     public String getgrpname(){
         return loc_grpname;
     }

     public int getmemcount(){
         return loc_memcount;
     }

     public int gettotaltrans(){
         return loc_totaltrans;
     }

} 
```

请为此提供解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T16:36:22.057

清除基础列表后，您需要在适配器上调用[notifyDataSetChanged() 。](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)您`ListView`将自己注册为观察者并对该调用作出反应。

```
public void clearlistview()
{
    items.clear();
    this.notifyDataSetChanged();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-16T18:49:39.850

只需使用 listView.setAdapter(null);

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T02:47:08.693

据我所知，无需清除适配器并将 notifyDataSetChanged() 设置为适配器。你已经使用 List,ArrayList 为项目或数组 1 st 清除它并重新初始化它，并将数据传递给服装适配器后清除使用的数组/列表。它会正常工作！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:37:21.167

在您的代码中，您必须清除“glist”，即 glist.clear 但您不应调用 mga.clearlistview();

glist 是项目的原始数组列表，其中“项目”只是 glist 的副本。

有关自定义适配器的更多详细信息，请参阅此链接。

[链接1](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)

# zend-framework - Zend Framework 文档根设置

> ID：10195238
> 
> 赞同：1
> 
> 时间：2012-04-17T16:29:37.540
> 
> 标签：zend-framework

我的问题可能很容易解决，但我真的想不通。

我按照“Beginning Zend framework”一书中的说明创建了一个新项目。该项目有 2 个控制器“帐户”和“艺术家”。这是 /application 的树视图：

```
.
├── application
│   ├── Bootstrap.php
│   ├── configs
│   │   └── application.ini
│   ├── controllers
│   │   ├── AccountController.php
│   │   ├── ArtistController.php
│   │   ├── ErrorController.php
│   │   └── IndexController.php
│   ├── models
│   └── views
│       ├── helpers
│       └── scripts
│           ├── account
│           │   ├── activate.phtml
│           │   ├── index.phtml
│           │   ├── new.phtml
│           │   └── success.phtml
│           ├── artist
│           │   ├── index.phtml
│           │   └── list-all-artists.phtml
│           ├── error
│           │   └── error.phtml
│           └── index
│               └── index.phtml 
```

例如，如何设置文档根目录以访问 /account/new.phtml？（输入 127.0.0.1 时，可以看到默认的索引页面“Welcome to the Zend Framework！”，但不知道如何访问其他页面）。

更多信息：+) 文档根目录是 /.../public/ (其中包含 .htacess 和 index.php) +) 127.0.0.1/index 也返回该页面，但 127.0.0.1/index/index.phtml 没有工作。 [http://127.0.0.1/account](http://127.0.0.1/account) , [http://127.0.0.1/artist](http://127.0.0.1/artist)返回 404 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:35:27.690

欢迎来到采埃孚！我做的个人事情总是设置一个虚拟主机，而不是仅仅使用标准的“ `localhost`”。这确实有助于管理单独的项目，并允许您将其存储在更容易的位置。

如果你尝试做 localhost/account，会发生什么？如果您遇到任何类型的错误，则说明您没有正确设置 Apache。这是我使用的示例`Vhost`：

```
<VirtualHost *:80>
   ServerName project.local
   DocumentRoot "C:\xampp\htdocs\project\public"

   # This should be omitted in the production environment
   SetEnv APPLICATION_ENV development

   <Directory "C:\xampp\htdocs\project\public">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
   </Directory>

</VirtualHost> 
```

继续尝试做类似的事情，在你的`HOSTS`文件中创建相应的行，清除缓存，你应该设置好了！

另外，在您的结构中，我注意到您缺少一个`public`文件夹。确保你有一个，以及一个`.htaccess`要重写为`index.php`. 编辑：刚刚看到你的编辑，你应该已经处理好了。

# iphone - 保存和加载 NSMutableArray 失败

> ID：10195239
> 
> 赞同：0
> 
> 时间：2012-04-17T16:29:41.253
> 
> 标签：iphone, nsmutablearray, nsuserdefaults

我对保存`NSMutableArray`到有点陌生`NSUerdefaults`。

这是 iVar 的声明：.h 文件

```
@interface GameData : NSObject {

NSMutableArray *PPLayers; 
```

}

```
@property (nonatomic,retain) NSMutableArray *PPLayers; 
```

.m 文件

@synthesize PPLayers；

这是我如何将对象添加到数组并将其保存为默认值：

```
-(void)AddObject:(NSString *) object ToArray:(NSMutableArray*)array{
if (array == PShoes) {
    [PShoes addObject:object];
    NSLog(@"Object : %@",object);
    [[NSUserDefaults standardUserDefaults]setValue:PPLayers forKey:@"pplayers"];
    [[NSUserDefaults standardUserDefaults]synchronize];
    NSLog(@"%@",PPLayers);
} 
```

有时它可以工作，有时应用程序崩溃。

这是我尝试加载数组的方式：

```
 PPLayers = [[NSUserDefaults standardUserDefaults]mutableArrayValueForKey:@"pplayers"]; 
```

这里出了点问题，但我不知道是什么。有时当我加载它时它会给我`null`。该应用程序仅在我从模拟器运行时才保存。我想得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:00:15.010

尝试这个

```
 [[NSUserDefaults standardUserDefaults]setValue:PPLayers forKey:@"pplayers"];

         NSArray *NewPPLayers =[[NSArray alloc]initwithArray:[[NSUserDefaults standardUserDefaults]mutableArrayValueForKey:@"pplayers"]]; 
```

# vb.net - for ...下一个计算在VB中不能正常工作——家庭作业

> ID：10195240
> 
> 赞同：0
> 
> 时间：2012-04-17T16:29:53.803
> 
> 标签：vb.net, loops

我无法弄清楚为什么我的计算不起作用。我正在做 1 到 12，它给了我 12 个输入，但我的输入计为 13？我错过了什么。

如果我将其更改为 0 到 11 相同的东西。我不确定问题是什么，但我看不到它，也不知道在哪里看。

我需要以 12 个周期结束，intEntries 为 12...帮助！谢谢！

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

        'initialize accumulator
        Dim decEntries As Decimal
        ' For loop to ask for input.
        For decEntries = 1 To 12 Or strMonthlyAvg = " "
            strMonthlyAvg = InputBox("Please Enter the Average for Month # " & decEntries & ":")

            lstTemps.Items.Add(strMonthlyAvg)
            decMontlyAvg = Convert.ToDecimal(strMonthlyAvg)
            ' This will add the montly average to the total Average Temperature for 
            ' calculations
            decTotalTemp += decMontlyAvg

        Next
        ' Calculation to provide the average temp for all entered values
        decAnnualAvg = decTotalTemp / decEntries
        ' convert annual average to string
        strAnnualAvg = Convert.ToString(decAnnualAvg)
        ' Display the results for the user
        lblResults.Text = "The average annual temperature " & vbCrLf &
                            "based on your entries is: " & strAnnualAvg & "."

    End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:38:09.743

根据我对[您关于此主题的最后一个问题](https://stackoverflow.com/questions/10193511/my-accumulator-for-my-for-next-loop-is-skipping-numbers-in-vb-visual-studio)的回答，每当循环到达该行时：

```
Next 
```

...它增加了 counter `decEntries`。

因此，当它第 12 次循环循环时，它最终会`Next`增加 1 以使变量的 value `13`。然后它退出循环，因为它已超过 12。

您可以使用`While`循环重写它，我会让您进行调查 - 或者更改您的逻辑以考虑最终结果`Next`。

# eclipse - 无法将maven添加到eclipse

> ID：10195241
> 
> 赞同：0
> 
> 时间：2012-04-17T16:29:57.040
> 
> 标签：eclipse, maven, eclipse-plugin

我通过安装软件功能为 Eclipse 添加了 Maven 插件。在查看有关如何将其设置为实际工作的一些文档时，我必须创建一个指向 mvn.bat 的字符串替换。然后我必须创建一个使用此字符串替换的外部工具。问题是我在我的机器上找不到 mvn.bat。如果我右键单击我的项目文件夹并转到 `Run As--> Run Configurations --> Maven Build`现在是一个选项，但我找不到 maven.bat ...我的方向是旧的还是我需要下载其他东西？

* * *

所以看起来我已经安装了 Maven，但我缺少设置步骤。我在 Eclipse（靛蓝）中的应用程序中找不到 .bat 文件并出现错误。我刚刚发现我可以在spring源工具套件中使用该项目。所以我就用那个。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:43:46.700

您需要使用安装 maven 的目录更新 PATH 环境变量。

[http://www.mkyong.com/maven/how-to-install-maven-in-windows/](http://www.mkyong.com/maven/how-to-install-maven-in-windows/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:57:21.967

你安装了哪个插件？您应该从以下位置安装[m2e](http://www.eclipse.org/m2e/download/) ：http : [//download.eclipse.org/technology/m2e/releases](http://download.eclipse.org/technology/m2e/releases)。它带有一个嵌入式 maven，因此您无需进行任何配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T20:23:16.740

正如 Fabricio 所说，您应该在 Eclipse 中安装[m2e](http://download.eclipse.org/technology/m2e/releases)插件（如果尚未安装）。这安装了对管理 Maven 项目的支持，并在您的 Eclipse 插件中安装了一个 Maven 实例。

如果你去 Eclipse / Preferences 你会看到一个 Maven 选项。在那里您将看到安装部分，您可以在其中使用插件附带的 Maven 版本或您自己的安装，甚至可以配置您要使用的 settings.xml 文件。

# iphone - 使用自定义证书建立 HTTPS 连接

> ID：10195243
> 
> 赞同：0
> 
> 时间：2012-04-17T16:30:01.197
> 
> 标签：iphone, objective-c, ios, https

如何使用 ASIHTTPRequest 或简单的 NSHTTPRequest 建立 HTTPS 连接，使用手机上的自定义证书来建立该连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:14:44.617

使用 NSURLConnection / NSURLRequest

在您的 NSURLConnection 委托中实现该方法`-(BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)space`，检查证书（空格）是否正常，然后返回 YES。

对于 ASIHTTPRequest，您可以查看[此页面](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。

# neural-network - 从 OCR 图像中识别关键数据

> ID：10195245
> 
> 赞同：2
> 
> 时间：2012-04-17T16:30:12.303
> 
> 标签：neural-network, ocr

是否有人知道任何产品、库或解决方案商业或开源，甚至可以帮助以下方面的方法；

我正在使用 Nuance 的 Omnipage 进行 OCR 处理。效果很好。但我想根据各种模式找到各种形式的数据。这可能是会计凭证，但关键是即使原始数据的类型是异构的并且存在共同因素，但它们很难以基于规则的方式定义。我发现了一个较早的问题，它部分解决了我的问题（但它假设我有结构化的 PDF，但我没有）

有几个共同因素 * 文档的类型相似 * 在我要查找的内容之前或之上会有关键词，但这些关键词可能有同义词 * 有一些数据，如日期，可能基于不同的格式国家；例如 DD/MM/YYYY、MM/DD/YYYY、YYYY-MM-DD、DD'th MMM、YYYY 等（我假设我们会知道国家） * 金额可以用小数点或小数点逗号书写（我假设我们会知道这个国家）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:18:12.933

据我了解，您需要为半结构化表单构建数据捕获解决方案：它们都包含基本相同的数据集，但布局可能因文档来源而异。没有灵丹妙药，您需要定义一些规则，如何在文档上找到正确的字段，什么是关键字及其可能的同义词，关键字与数据本身之间的几何关系是什么。

但是，有一种产品可以使这个过程变得更容易，而不是在 C++ 中编程，您需要在专门为此设计的可视化工具中描述这种关系，并且已经内置了很多东西。

[ABBYY FlexiCapture](http://www.abbyy.com/data_capture_software/)

该产品功能强大，简化了文档布局描述、测试和数据提取本身的开发。

它还有一个 SDK 版本：

[ABBYY FlexiCapture 引擎](http://www.abbyy.com/flexicapture_engine/)

免责声明：我为 ABBYY 工作

# c# - 多线程文件访问（锁定控制）

> ID：10195246
> 
> 赞同：1
> 
> 时间：2012-04-17T16:30:32.043
> 
> 标签：c#, file, deadlock, locks

我有两个程序在同一个文件上工作我希望第一个程序定期检查文件，如果有任何更改对文件进行操作并将其清空。另一个程序写入文件。当第二个程序尝试在文件上写入时会出现问题，因为它是从第一个程序开始使用的，是否有（如果有任何实现的 C# 程序会更好）算法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:41:13.033

要检查文件是否已更改，您可能首先检查其时间戳。在伪代码中，您可以在监控程序中尝试这样的操作：

```
try {
  if(FileTimeStampHasChanged(FileName)) {
    //Attempt to do something with the file
  }
}
catch {
  // Handle or ignore the exception if you can't open the file (maybe the other application hasn't finished writing). You can always retry later.
} 
```

但是，我强烈推荐完全不同的方法。这是我建议的选项。

1.  如果你可以改变写入程序，让它写入一个临时文件（例如*output.$$$*）并让它在写入完成后立即重命名。重命名是即时的，不会导致任何锁定。根据我的经验，这是并发访问的最佳简单解决方案之一。
2.  如果你**不能**改变写作程序，那就修改阅读程序。使用我在第 1 点中描述的逻辑，让它尝试重命名文件以读取并处理重命名的副本。如果重命名失败，则意味着编写器没有完成，稍后可以尝试。
3.  如果您无法更改任何程序，那么您可以制作自己的“交通管理员”应用程序来实现第 1 点。这需要更多的工作，但仍然可行。就是这样：
    *   将 Writer 配置为写入文件夹，例如“Output”。
    *   将阅读器配置为从另一个文件夹读取，例如“输入”。
    *   编写您的 Traffic Warden 以监控输出文件夹，并在文件更改时将其移动到输入文件夹。移动也是即时的（实际上与重命名操作相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:41:54.720

您正在使用[FileStream 构造函数使用](http://msdn.microsoft.com/en-us/library/7db28s3c.aspx)[FileShare.Write 或 ReadWrite](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)在两个程序中寻找打开文件。

如果您以这种方式打开文件，则两者都可以写入。请注意，您必须在 2 个程序之间手动实现一些同步机制，这样它们就不会覆盖彼此的数据。

每次写入后关闭文件并等待文件在打开时解锁可能是更容易的选项，具体取决于访问模式。

请注意，如果您无法控制其中一个程序，您唯一的选择就是等到程序中的文件完成（您可以强制其他程序关闭文件句柄，但您只是不想这样做因为它可能会损坏数据）。

# javascript - xcode 解析来自 webview 的 html id 数据

> ID：10195247
> 
> 赞同：0
> 
> 时间：2012-04-17T16:30:34.807
> 
> 标签：javascript, iphone, objective-c, ios, xcode

一个 html 文件被加载到 webview 中，并且该 html 包含一个 div，如：

```
<div id="test">hello</div> 
```

和iOS代码如下。但是我总是收到一个空值。我错过了什么？谢谢

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {

    NSString *body = [self.webView stringByEvaluatingJavaScriptFromString:
                      @"document.getElementById('test').value"];

    NSLog(@"received data: %@", body);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:54:52.137

这有点笨拙，但是您可以使用以下命令获取文本值（这是文本节点和您当前正在使用的元素节点的子节点）...

```
document.getElementById('test').firstChild.data 
```

希望有帮助

# .net - 我使用的是实体框架 v4.0 吗？

> ID：10195249
> 
> 赞同：0
> 
> 时间：2012-04-17T16:30:35.433
> 
> 标签：.net, entity-framework-4

我在网上找到的实体框架的 Evey 示例代码告诉我必须有一个方法“ApplyChanges”，我可以使用它来持久化 SelfTracking 对象。但我的 ObjectContext 和 EntitySets 只有这些方法：

1.  应用当前值
2.  应用原始值

我在使用 EF4 吗？是否有任何 EF4 的次要版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:38:40.860

此处的[MSDN 条目](http://msdn.microsoft.com/en-us/library/ff407090.aspx)说明 ApplyChanges 是由 Visual Studio 2010 及更高版本中的 ADO.NET 自跟踪实体生成器生成的扩展方法。如果您不生成这些方法，即使您使用的是 EF 4/.NET 4.0，也不会看到它们。

# c - 在 O(log n) 中计算 x ^ y

> ID：10195252
> 
> 赞同：7
> 
> 时间：2012-04-17T16:30:54.847
> 
> 标签：c, algorithm, big-o

面试题：

> 在 O(log n) 中计算 x ^ y

有不同的答案，例如“使用印度幂算法”或

```
double power(double x, int y) 
{
    if(y == 0) return 1;

    double d = power(x, y/2);

    if(y%2 == 0) return d*d;
    else return x*d*d;
} 
```

1.  这是一个正确的答案吗？

2.  有没有更好的方法来为这个问题编写代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T16:38:00.653

这称为[平方求幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)。就实施而言，这是一个品味问题。您的递归实现很好，但是对于不喜欢递归或错误地认为它在某种程度上“浪费”或“缓慢”的人来说，非递归实现（来自上面的链接）可能看起来更干净一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T16:38:29.633

有关基本数学运算的问题和有关计算复杂性的问题，通常由 Wikipedia 快速回答。

[求幂](http://en.wikipedia.org/wiki/Exponentiation)：[积分幂的有效计算](http://en.wikipedia.org/wiki/Exponentiation#Efficient_computation_of_integer_powers)

> 一般来说，计算 bn 所需的乘法运算的数量可以通过使用平方取幂或（更一般地）加法链取幂来减少到 Θ(log n)。找到乘法的最小序列（指数的最小长度加法链）是一个困难的问题，目前还没有有效的算法（参见子集和问题），但有许多相当有效的启发式算法可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T16:37:41.417

我们来分析一下：

`power`被调用（通过递归）的次数与原始`y`可被 2 整除的次数一样多（即最大数，`k`，使得`2^k < y`）。这意味着计算的次数大致为`k=log_2(2^k)=log_2(y)~=log(y)`，所以它是一个正确的答案。

“更好的方式”的答案取决于什么才是“更好”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T16:37:51.850

这是执行此操作的方法：

假设你想要 2^1024，那将需要......等待它...... 11 次乘法

你这样做

```
2*2 = 2^2
2^2 * 2^2 = 2^4
2^4 * 2^4 = 2^8
2^8 * 2^8 = 2^16
....
2^512 * 2^512 = 2^1024 
```

所以基本上，你只需要以 2 为底写你的指数并得到所有相关的乘法

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-17T22:18:26.443

这里要快得多：`%`是一个非常昂贵的操作，用按位操作代替它是一个巨大的节省；也替换`y/2`为`y>>1`：

```
double power(double x, int y) {
    if(y == 0) return 1;

    double d = power(x, y>>1);

    if((y&1) == 0) return d*d;
    else return x*d*d;
} 
```

# javascript - 使用 Jquery（不是 AJAX）的跨域请求

> ID：10195255
> 
> 赞同：1
> 
> 时间：2012-04-17T16:31:06.507
> 
> 标签：javascript, jquery

我不知道这是否可能，但我想要的是创建一些脚本，扫描到不在我服务器上的网页并获取它的源代码，这样我就可以使用一些数据，如 PERL 或 Rails 脚本，但使用 Jquery/Javascript

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:37:13.013

在一般情况下，不，由于[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)无法从客户端执行，这会阻止您加载和查看从不同来源加载的内容的 HTML 和脚本源。（当然，您可以在*服务器*上使用 JavaScript 执行此操作 ——NodeJS、Rhino 等。）

但是，如果其他域支持[跨域资源共享](http://www.w3.org/TR/access-control/)并且您使用的浏览器[也支持它](http://caniuse.com/#search=cors)，则可以允许另一端（其他网站）允许来自您的源（或所有源）的代码访问它。不过，另一端必须允许它。

您还将在此上下文中听到有关[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)的信息，但这仅允许您从另一端获取数据（不是 HTML 源等），并要求另一端明确支持它。

所以你可能必须有一个服务器参与。但是，它不一定是**您的**服务器：您可以出于某些目的将[YQL](http://developer.yahoo.com/yql/)用作[跨域代理](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:37:12.427

不，它不可能从客户端从另一个网页中获取 HTML 代码。除非您能够配置其他服务器。

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)更多阅读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:39:07.283

同源政策

同源策略是对 JavaScript 代码可以与之交互的 Web 内容的全面安全限制。它通常在网页包含元素或打开其他浏览器窗口时发挥作用。在这种情况下，同源策略管理一个窗口或框架中的 JavaScript 代码与其他窗口和框架的内容的交互。具体来说，脚本只能读取与包含该脚本的文档具有相同来源的窗口和文档的属性。

文档的来源定义为加载文档的 URL 的协议、主机和端口。从不同 Web 服务器加载的文档具有不同的来源。通过同一主机的不同端口加载的文档具有不同的来源。使用 http: 协议加载的文档与使用 https: 协议加载的文档具有不同的来源，即使它们来自同一个 Web 服务器。

重要的是要了解脚本本身的来源与同源策略无关：重要的是嵌入脚本的文档的来源。例如，假设主机 A 托管的脚本包含在主机 B 提供的网页中（使用元素的 src 属性）。该脚本的来源是主机 B，并且该脚本可以完全访问包含它的文档。如果脚本打开一个新窗口并从主机 B 加载第二个文档，则该脚本还可以完全访问该第二个文档的内容。但是，如果脚本打开第三个窗口并从主机 C（甚至是主机 A）加载一个文档到其中，同源策略就会生效并阻止脚本访问该文档。

*作者：David Flangan：Javascript；权威指南*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:39:17.220

就您的问题而言，是的，这是可能的，但我觉得您误解了这些技术的工作原理。即使 x 域请求是可能的，javascript 也无法从外部源收集数据，除非在浏览器中使用时通过 AJAX。我之所以说答案是肯定的，是因为这些限制仅适用于在浏览器中执行 javascript 时。例如，如果您将 javascript 与说 node.js 结合使用，则规则完全不同，因为 javascript 能够创建套接字并且 x-domain 限制不再适用。

也许您应该澄清您的问题，以便提供更合适的答案。

# .net - WPF：如何注册其他隐式值转换器？

> ID：10195257
> 
> 赞同：8
> 
> 时间：2012-04-17T16:31:13.803
> 
> 标签：.net, wpf, ivalueconverter

我发现了一个问题，询问如何避免将自定义值转换器添加到应用程序资源中：

[在 WPF 中使用值转换器，而不必先将它们定义为资源](https://stackoverflow.com/q/2304269/26414)

但是，我想更进一步，然后注册隐含的转换器，如本例所示：

```
<SolidColorBrush Color="Blue" /> 
```

在这里，我假设一些隐含的“StringToSolidColorBrushConverter”正在启动，使示例工作。

此示例**不起作用**：

```
<Window.Resources>
    <Color x:Key="ForegroundFontColor">Blue</Color>
</Window.Resources>

<TextBlock Foreground={StaticResource ForegroundFontColor}>Hello</TextBlock> 
```

我相信这是因为 WPF 没有任何暗示`ColorToSolidColorBrushConverter`可以直接使用。我知道如何创建一个，但我将如何“注册”它以便 WPF 自动使用它而不在绑定表达式中指定转换器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:29:46.793

如果你查看源代码，你会发现这个

```
public sealed class SolidColorBrush : Brush
{
  public Color Color
  { ... }
  ...
}

[TypeConverter(typeof (ColorConverter))]
public struct Color : IFormattable, IEquatable<Color>
{
    ...
} 
```

转换由 ColorConverter 完成。

并且

```
[TypeConverter(typeof (BrushConverter))]
public abstract class Brush : Animatable, IFormattable, DUCE.IResource
{ ... }

public class TextBlock : ...
{  
   public Brush Foreground
   { ... }
} 
```

由 BrushConverter 完成转换的地方。

没有可以注册的“隐式”转换。这一切都是通过将具有适当值转换器类型的 TypeConverter 属性应用于相关属性或类来完成的。

在您的示例中，您需要使用

```
<Window.Resources>
    <SolidColorBrush x:Key="ForegroundFontColor" Color="Blue"/>
</Window.Resources>

<TextBlock Foreground={StaticResource ForegroundFontColor}>Hello</TextBlock> 
```

# python - 对多维索引（任意维度）的列表表示进行高效迭代

> ID：10195260
> 
> 赞同：0
> 
> 时间：2012-04-17T16:31:48.140
> 
> 标签：python, algorithm, recursion, multidimensional-array, tree

我使用任意维度的多维结构。我有一个 Python 迭代器列表`xrange`，每个迭代器代表一个多维数组的索引：

```
indices = [ i, j, k ] 
```

在哪里

```
i = xrange(1,3)
j = xrange(3,5)
k = xrange(5,7) 
```

为了生成所有可能的值，我使用以下简单的递归代码：

```
def travtree(index,depth):
    "Recursion through index list"
    if depth >= len(indices):
        # Stopping Condition
        print index
    else:
        # Recursion
        currindexrange = indices[depth]
        for currindex in xrange(len(currindexrange)):
            newindex = list(index) # list copy
            newindex.append(currindexrange[currindex])
            travtree(newindex,depth+1)

travtree([],0) 
```

这很好用，但我想知道，有没有更有效的 Pythonic 方式来做到这一点？我尝试查看`itertools`模块，但没有任何反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:36:13.240

```
>>> from itertools import product
>>> i = xrange(1,3)
>>> j = xrange(3,5)
>>> k = xrange(5,7)
>>> indices = [ i, j, k ]
>>> for item in product(*indices):
        print item

(1, 3, 5)
(1, 3, 6)
(1, 4, 5)
(1, 4, 6)
(2, 3, 5)
(2, 3, 6)
(2, 4, 5)
(2, 4, 6) 
```

# jquery - 缩放 31 天的 jqPlot 图形

> ID：10195263
> 
> 赞同：1
> 
> 时间：2012-04-17T16:31:58.030
> 
> 标签：jquery, jqplot

我想创建一个包含 31 天数据的图表，然后放大我希望能够放大这些天，例如 7 天，如果我要突出显示 7 天。

我遇到的问题是我希望 x 轴上的标签从第一天开始，最后一个是最后一天，但 jqPlot 似乎出于某种原因增加了天数。

例如，在下面的数据中，x 轴从 21 开始，最后一个是 26，但我希望它每天显示从 22 到 23。我尝试使用最小值和最大值，但只有一个有效。

我还希望它每天显示 1、2、3、4 等，而不是像目前那样显示 1、5、12、19 等。

我还注意到，当您放大时，有时它有 3、4、4、4、5、5、5、6 等，我每天都想要它。

这是我当前的代码：

```
$(document).ready(function(){
        s1 = [["6/22/2012",425.32], ["6/23/2012",424.84], ["6/24/2012",417.23], ["6/25/2012",390],
            ["6/26/2012",393.69], ["6/27/2012",392.24], ["6/28/2012",369.78], ["6/29/2012",330.16], ["6/30/2012",308.57],
            ["7/1/2012",346.45], ["7/2/2012",371.28], ["7/3/2012",324.7], ["7/4/2012",315.07], ["7/5/2012",300.36],
            ["7/6/2012",315.76], ["7/7/2012",292.96], ["7/8/2012",310.02], ["7/9/2012",359.36], ["7/10/2012",372.54],
            ["7/11/2012",386.91], ["7/12/2012",449.15], ["7/13/2012",444.25], ["7/14/2012",463.29],  ["7/15/2012",510.15],
            ["7/16/2012",467.86],["7/17/2012",467.86], ["7/18/2012",481.32], ["7/19/2012",537], ["7/20/2012",546.43], ["7/21/2012",567],
            ["7/22/2012",544.62], ["7/23/2012",573.2]];

        var plot1 = $.jqplot('chart1', [s1], {
            title: 'test',
            series: [{
                label: 'test',
                renderer:$.jqplot.BarRenderer
            }],
            axes: {
                xaxis: {
                    renderer:$.jqplot.DateAxisRenderer,

                    tickOptions:{formatString:"%#d"}
                },
                yaxis: {
                    // renderer: $.jqplot.LogAxisRenderer,
                    tickOptions:{
                        formatString:'$%.2f'
                    }
                }
            },
            cursor:{
                show: true,
                zoom: true,
                constrainZoomTo: 'x'
            }
        });
    }); 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:02:16.610

通过添加 numberTicks 以及最小值和最大值来计算：

```
xaxis: {
                    renderer:$.jqplot.DateAxisRenderer,
                    min: '6/22/2012',
                    max:   '7/23/2012',
                    numberTicks: 31,
                    tickOptions:{formatString:"%#d"}
                }, 
```

它解决了额外天数的问题，并且缩放现在可以正常工作

# c# - 如何在 Silverlight 中访问 WCF API？

> ID：10195267
> 
> 赞同：1
> 
> 时间：2012-04-17T16:32:10.470
> 
> 标签：c#, wcf, silverlight

我使用名为 API 的启用 Silverlight 的 WCF 服务在我的 silverlight Web 项目中创建了一个 WCF API。

我在此添加了操作合约逻辑：

```
[OperationContract]
 public int AddNums(int a, int b)
 {
    return (a + b);
 } 
```

现在我在 SilverLight 客户端项目中添加了一个名为“APIRef”的服务参考。

现在我知道一种使用[http://localhost:2250/API.svc](http://localhost:2250/API.svc)访问它的方法 ，它显示了一些有关 API 等的信息

但我希望远程设备可以访问**AddNums(a,b)**方法

我怎样才能访问这个....请指导

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:43:39.460

添加服务引用后，您应该在客户端有一个存根类。您需要包含它并调用该方法，例如

```
APIRefClient.AddNums(x,y); 
```

重要的是，参加 ***Client 课程

# php - 为什么 PDO 在不应该返回 Result 时返回？

> ID：10195273
> 
> 赞同：0
> 
> 时间：2012-04-17T16:32:16.880
> 
> 标签：php, mysqli, pdo, resultset

我只有一个文本字段，用户可以在其中输入用户名或电子邮件地址以重置密码。

首先是代码：（我只包含了我知道问题所在的代码）。

```
try {

    // connect to database
    $dbh = sql_con();

    // prepare query
    $stmt = $dbh->prepare("
                     SELECT COUNT(*)
                     FROM
                         users
                     WHERE
                         user_login = :username
                     OR
                         user_email = :email
                     ");

    // execute query
    $stmt->execute(array(':username' => $username_email, ':email' => $username_email));

    if ($stmt->fetchAll() > 0) {

        // something was found
        // just echoing at the moment until i figure out what i am doing wrong
        echo 'i found something';
        exit;

    } else {
        // nothing found
        echo 'i found nothing';
        exit;
    }

}
catch (PDOException $e) {

    ExceptionErrorHandler($e);
    require_once($footer_inc);
    exit;
} 
```

不知道我做错了什么，可能是非常愚蠢的事情，但是当我输入一个我知道不在数据库中的用户名或电子邮件地址时，我仍然`echo`发现**了一些东西**。

我做错了什么？

我打算使用`rowCount`，但正如 PHP 手册所建议的那样：

> `PDOStatement::rowCount()`返回受相应 PDOStatement 对象执行的最后一个、、或语句`DELETE`影响`INSERT`的行数。 如果关联执行的最后一条 SQL 语句是. 语句，某些数据库可能会返回该语句返回的行数。 但是，不能保证所有数据库都具有此行为，并且不应依赖于可移植应用程序。`UPDATE`
> `PDOStatement``SELECT`

所以基本上PHP手册是说我应该`Count(*)`在执行我的真正查询之前做一个然后处理结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:34:05.550

你也许是说`if (count($stmt->fetchAll()) > 0) {`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T16:34:42.290

那是因为`fetchAll()`返回一个数组。即使查询结果没有行，您仍然至少会得到一个空数组，并且...

```
php > var_dump(array() > 0);
bool(true) 
```

你需要做

```
if ($stmt->rowCount > 0) { ... } 
```

反而。此外，您正在执行 a `COUNT(*)`，因此无论匹配什么，您都会得到一个包含匹配计数的单行结果。您需要获取那一行，并检查该计数字段的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:36:12.463

$statement -> fetchAll () 将返回一个数组。将其与 0 进行比较是没有意义的。您可能打算 count() 从 $statement -> fetchAll () 返回的结果集中的元素数

# symfony1 - 如何添加导致 action_page.xml 的 object_action？

> ID：10195277
> 
> 赞同：1
> 
> 时间：2012-04-17T16:32:28.583
> 
> 标签：symfony1, symfony-1.4, config, admin-generator

我想添加一个操作，该操作将从对象的字段中输出 xml 文件。

这是一个例子：

```
object_actions:
  _edit: ~
  _delete: ~
  export_xliff: {label : Export Xliff, action: exportXliff} 
```

这会创建一个指向 的按钮/链接`../exportXliff`，但我想要`../exportXliff.xml`.

如何从管理生成器配置文件中添加格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:58:24.033

我不认为你可以在这里添加格式，[根据代码](http://trac.symfony-project.org/browser/branches/1.4/lib/routing/sfObjectRouteCollection.class.php#L95)，它似乎只有 html ..

你需要有不同的格式作为输出还是只有 xml？

如果您只使用 xml，则可以从操作中更改格式。

```
$request->setRequestFormat('xml'); 
```

首先，我想在 routing.yml 中使用定义的路由，但似乎你不能。

# c++ - 在 Qt C++ 中连接用户特定的 DBus 会话

> ID：10195278
> 
> 赞同：1
> 
> 时间：2012-04-17T16:32:35.580
> 
> 标签：c++, qt, dbus

在 Python-dbus 中，可以连接用户特定的 dbus，例如 ..

```
import dbus
bus1 = dbus.bus.BusConnection("tcp:host=192.168.1.1,port=1234") 
```

如何在 C++ 中的 QtDbus 中实现相同的目标？我能找到的只是静态函数，如 QDBusConnection::SessionBus 或 QDBusConnection::SystemBus ...并且在 QtDbus/C++ 中似乎缺少连接其他用户特定总线的可能性？

欢迎任何示例代码或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:38:49.537

您应该可以使用`QDBusConnection::connectToBus(QString&,QString&)`. 就像是：

```
bus = QDBusConnection::connectToBus("tcp:host=192.168.1.1,port=1234", "mybus"); 
```

# java - Java 应用程序状态不一致

> ID：10195293
> 
> 赞同：0
> 
> 时间：2012-04-17T16:34:25.020
> 
> 标签：java, multithreading, jvm

我发现我的整个应用程序都搞砸了。第一个日志[混在一起了](https://stackoverflow.com/questions/10194791/logging-mingled-log4j)。应用程序似乎每隔一段时间就会冻结，每隔一分钟左右就冻结几乎半分钟。执行大部分任务的常规线程似乎丢失了，它们没有任何痕迹。所有这些都是从记录。根据用户的报告，套接字似乎已挂断。

仍然很少有线索，是什么引发了这一切。CPU 使用记录显示当时一切正常。正如我所猜测的，你能指出一个起点或任何逃离我脑海的特定实例，我可以解密所有这些混乱的可能原因。

谢谢， 玛维亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:41:50.447

在内存有限的虚拟机上运行非常密集地使用 GC 的 Java 应用程序时，我遇到了这种行为。来宾操作系统没有足够的“物理”内存，因此它使用交换内存。但是交换位于映射到主机操作系统物理磁盘的“虚拟”磁盘上。

当在来宾操作系统上运行的 java GC 开始工作时，它必须从实际上位于主机操作系统物理磁盘上的堆中删除垃圾。

我不想说你的情况是相同的，但可能是相似的。所以，试着检查你有多少物理内存，你的 GC 运行的频率以及它试图清除多少内存。你给了你的 JVM 1GB。你有足够的物理内存吗？可能您的 JVM 堆实际上位于操作系统交换内存中，即磁盘上？

尝试调查您的应用程序。它是否有可能分配大量内存并经常清理它？是否可以使用缓存等？检查 perm gen 使用了多少内存以及短期对象使用了多少内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:54:22.433

您为什么不尝试使用基于示例的监控工具附加到您的程序并查看线程和 JVM 子系统在做什么？ [JVisualVM](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)附带 JDK，并且易于使用。

# ruby - Ironfan 设置问题

> ID：10195301
> 
> 赞同：0
> 
> 时间：2012-04-17T16:35:21.497
> 
> 标签：ruby, gem, chef-infra

我正在尝试（但失败了！）设置 Ironfan

我正在到达安装它的位置，但是当我执行“刀簇列表”时，出现以下错误：

> 错误：Gem::LoadError：无法激活 ironfan-3.1.5，因为雾 0.8.2 与雾冲突 (~> 1.2.0)

我安装了雾 1.2.0 和 0.8.2。我尝试了卸载 0.8.2 的明显方法，但随后出现以下错误，即找不到雾 0.8.2：

> /usr/local/lib/ruby/gems/1.9.1/gems/ironfan-3.1.5/lib/ironfan.rb:34:in cluster_path': undefined methodmap' for "/home/steve/poc/chef/chef -repo/cookbooks”：字符串（NoMethodError）

如果我只安装 0.8.2，我会收到原始消息：

> ```
> ERROR: Gem::LoadError: Unable to activate ironfan-3.1.5, because fog-0.8.2 conflicts with fog (~> 1.2.0) 
> ```

我在 Centos 上运行 ruby​​ 1.9.3p125 和 gem 1.8.11。任何帮助，将不胜感激。Knife-ec2 需要雾 0.8.2，我需要同时运行两者。

编辑：我找到了答案。我需要编辑 gemspec 以允许更大版本的雾。见[https://github.com/infochimps-labs/ironfan/issues/130](https://github.com/infochimps-labs/ironfan/issues/130)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:53:59.397

您最好的想法是安装[rvm](http://beginrescueend.com/)并创建一个 gemset 来安装 Ironfan：

```
$ rvm gemset create knife-ironfan
$ rvm gemset use knife-ironfan
$ gem install ironfan
$ [do your thing] 
```

创建 gemset 会限制已安装 gem 的范围，因此您可以处理相互冲突的依赖项。我在一个阶段遇到了雾的问题，而且效果很好。在实践中，进出不同的 gemset 有点棘手/烦人，但是如果你有一个可以解决的目录，你可以创建一个 {.rvmrc} 以在你切换到该目录时自动切换到 gemset .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T10:36:56.157

我找到了答案。我需要编辑 gemspec 以允许更大版本的雾。见[https://github.com/infochimps-labs/ironfan/issues/130](https://github.com/infochimps-labs/ironfan/issues/130)

# facebook-apps - 如何将我的 facebook 应用程序链接到应用程序的 facebook 页面（单独创建）

> ID：10195303
> 
> 赞同：3
> 
> 时间：2012-04-17T16:35:38.873
> 
> 标签：facebook-apps, facebook-page

Facebook 不允许我从应用程序开发人员的“联系人”部分创建应用程序，因为它的名称存在一些问题（显然是一个已知问题）。因此，我通过页面生成器为应用程序创建了一个页面 - 首字母为大写字母。我现在如何将两者链接在一起，使页面指向应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:59:26.537

你有没有看过[Like Box 社交插件](https://developers.facebook.com/docs/reference/plugins/like-box/)

如果不是您想要的，请查看类似的插件

# drupal - Drupal Views - 更改内容的访问控制块

> ID：10195309
> 
> 赞同：0
> 
> 时间：2012-04-17T16:35:55.567
> 
> 标签：drupal, drupal-views

Drupal 中的视图（v7，如果它很重要）有没有办法根据访问控制更改块的内容？

本质上，我想要做的是始终显示该块，但如果是匿名用户访问该页面，则显示一些自定义的“拒绝访问”内容。我认为这将是一件相当普遍的事情，但我无法找到任何东西。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:44:40.493

可能最简单的方法是制作两个块。每个块可以限制为仅显示单个角色。所以匿名会看到“访问被拒绝消息”，而“经过身份验证的用户”可以看到您的正常视图块。这是内置的，不需要插件。

只需转到结构-> 块并添加您的自定义“拒绝访问块”，然后将其限制为匿名角色。然后将视图块上的设置更改为仅显示所需角色。

# ios - 防止“定义”显示在编辑菜单中

> ID：10195311
> 
> 赞同：2
> 
> 时间：2012-04-17T16:36:02.243
> 
> 标签：ios

为了防止在点击文本字段时显示“定义”以及其他菜单项，我基本上为每个操作的 canPerformAction:withSender 方法返回 NO。这完全可以解决阻止“定义”菜单项出现的一个问题。我必须使用 _define: 这在规则中是不允许的，因为它有一个下划线，因此被视为私有 api 引用，因此 IOS 应用程序将被拒绝。它有效，但我不能使用它。其他菜单项，如复制、选择等，不需要下划线。该怎么办？下面是一个包含“define”的代码片段，它工作得很好，但我不能使用它。

...

```
 else if (action == @selector(paste:)) {
     retValue = NO;
 }
 else if (action == @selector(_define:)) {
     retValue = NO;
 }
 else {
     retValue = [super canPerformAction:action withSender:sender];
 } 
```

...

# c# - 服务器可以处理的 FileSystemWatcher 实例数量的实际限制是什么？

> ID：10195317
> 
> 赞同：28
> 
> 时间：2012-04-17T16:36:28.840
> 
> 标签：c#, .net, .net-4.0, windows-server-2008, filesystemwatcher

我有一个 Windows 服务，它目前正在实例化大约十几个`FileSystemWatcher`实例，以监视整个公司网络中的共享文件夹，以便处理要处理的文件。

我正在考虑添加更多实例，所以我想知道这里是否有人有经验（使用生产系统）关于`FileSystemWatcher`生产系统可以可靠处理的实例数量的实际限制是什么？

编辑：在我的例子中，InternalBufferSize 属性没有被修改，所以 InternalBufferSize 是默认的 8 KB ......我假设 InternalBufferSize 的增加会影响`FileSystemWatcher`系统可以同时运行的实例数量，所以这也是等式的一部分。 ..

编辑：如果您认为这完全是一个资源问题，并且仅取决于可用内存量或系统的其他一些硬件方面，请分享您的经验或指向证实您观点的文档或文章的链接......我会真的很想听听那些无论硬件规格如何都达到生产极限的人的意见，所以请在投票结束之前考虑到在不到 20 分钟内有 7 个人表示有兴趣听取那些突破极限的人的意见......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T19:16:54.987

`FileSystemWatcher`在封面下使用`ReadDirectoryChangesW` [http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465(v=vs.85).aspx)。这是一个相当便宜的操作，它只是从完成更改的目录中读取。

结果存储在内核缓冲区中，然后再复制到您自己的内存缓冲区中`FileSystemWatcher`。

这是要考虑的两个操作系统资源，调用`CreateFile`by创建的句柄`FileSystemWatcher`，以及内核中每个`FileSystemWatcher`对象的 8KB（默认）缓冲区大小，这些缓冲区从系统的内核分页和无分页池中带走。

你`FileSystemWatcher`的 s 本质上是在争夺这三种资源。

1.  **处理更改的**CPU时间****
***   **系统上的**句柄*******   **页面池******

 ****您不太可能遇到 (2) 的问题。在运行 x86 的电源系统（CPU 负载）上可能会遇到 (3) 的问题。否则（1）将是你的极限。

**把手**

句柄是用尽的（特别是在 x86 上），更多关于这个，[http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx](http://blogs.technet.com/b/markrussinovich/archive/2009/09/29/3283844.aspx)

但是在你用完之前有超过 1600 万个句柄（即使在 x86 上），出于你的意图，我认为它是一个无限的资源。在达到任何操作系统限制之前，您将耗尽 CPU 处理更改。

**页面/非页面池**

页面/非分页池可以在任务管理器中看到。在 x86 上，它们*非常*有限。更多在这里， http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366778 (v=vs.85).aspx#memory_limits](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778(v=vs.85).aspx#memory_limits)

**中央处理器**

您会看到大量轶事证据表明，当这用尽时，就会`FileSystemWatcher`停止工作。有些目录更改会被报告，有些则不会，并且在`FileSystemWatcher`您的大型实现中不可避免地最终不得不检测这些情况并自己列出目录，或者在轮询基础上进行。

**笔记**

如果您正在实施`FileSystemWatcher`s 的负载，请注意；

1.  缓冲区溢出
2.  网络路径上的缓冲区大小大于 64KB。

更多关于此对象的良好编码实践，[http://bytes.com/topic/visual-basic-net/answers/536125-filesystemwatcher-across-network#post2092018](http://bytes.com/topic/visual-basic-net/answers/536125-filesystemwatcher-across-network#post2092018)****

# iphone - iOS 5：addSubview 的奇怪行为

> ID：10195322
> 
> 赞同：1
> 
> 时间：2012-04-17T16:37:00.090
> 
> 标签：iphone, objective-c, ios5, uiview, xcode4.3

我正在尝试在我的应用程序中创建一个活动指示器。我正在使用情节提要，并且创建了一个按钮，该按钮正在推动另一个视图。

这是我打开另一个视图的方法：

```
- (IBAction)openView {  
    NSLog(@"View is loading");
    @try {
        UINavigationController *nav = [storyboard instantiateViewControllerWithIdentifier:@"viewOpenSegue"];
        [nav setModalPresentationStyle:UIModalPresentationFullScreen];
        [self presentModalViewController:nav animated:YES];
    }
    @catch (NSException *exception) {
        NSLog(@"Error");
    }
    @finally {
        NSLog(@"View loaded");
    }
} 
```

到目前为止一切都很好。我在视图打开之前得到了日志，在它完全加载后得到了第二个日志。

但是当我想使用 addSubview 方法时，我的行为很奇怪。

```
NSArray *subviewArray2 = [[NSBundle mainBundle] loadNibNamed:@"View" owner:self options:nil];
loadingView = [subviewArray2 objectAtIndex:0]; 
```

这就是我加载视图的方式。我像这样添加/删除：

```
[self.view addSubview:loadingView];
//@try block
//@catch block
//@finally
{  
[loadingView removeFromSuperview];  
} 
```

我希望视图在屏幕上出现和消失。但它在推送视图出现之前出现了 1 毫秒，然后突然消失。

如果我在 viewDidLoad 下添加这种方式，它就会出现。

我见过类似的问题，但他们没有帮助我。有人有线索吗？我应该尝试别的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:48:12.517

这个 nib 文件 View.xib 有文件所有者吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:12:13.147

它发生是因为第一个 viewdidload 比 viewdidapper 方法执行。每次您推送或弹出视图时，viewdidappear 都会加载，因此如果您想在视图加载的第一个执行它，请在 viewdidload 中编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:49:08.713

这是因为我没有使用`selector`. 请参考[这个问题](https://stackoverflow.com/questions/2919879/uiactivityindicator-not-working-properly/2919983#comment13232027_2919983)。

这是优化后的代码：

```
[self.view addSubview:loadingView];  
[self performSelector:@selector(openView) withObject:nil afterDelay:0]; 
```

# java - 将 JMenuItem 添加到多个菜单

> ID：10195323
> 
> 赞同：0
> 
> 时间：2012-04-17T16:37:05.733
> 
> 标签：java, swing, jmenu, jmenuitem

我希望将相同的 JMenuItems 添加到多个 JMenu，但它只显示最后一个 JMenu。这是我编写的代码。我希望为所有 JMenu 状态显示三个 JMenu 项目。使用此代码，前两个状态没有 JMenuItem，所有三个都只有最后一个。

```
import javax.swing.*;
import java.awt.event.*;  
public class Menu extends JFrame{
  public Menu()
  {
    super("Funky Menu");
JMenu [] states = new JMenu [3];
JMenuItem [] items = new JMenuItem [3];
//Initializing the items
items[0] = new JMenuItem("Industries");
items[0].setMnemonic('I');
items[1] = new JMenuItem("Hill Stations");
items[1].setMnemonic('H');
items[2] = new JMenuItem("Top Institutions");
items[2].setMnemonic('T');
//Initializing the states
//I've set the adjacent keys as the Mnemonics for easy user interaction
//though it is less intuitive, it can vary on the user preference.
states[0] =  new JMenu("Tamil Nadu"); states[0].setMnemonic('Q');
states[1] = new JMenu("West Bengal"); states[1].setMnemonic('W');
states[2] = new JMenu("Haryana"); states[2].setMnemonic('E');
//Adding all the items to each of the states
for(int i=0; i<3; ++i)
{
  for(int j=0; j<3; ++j)
  {
    states[i].add(items[j]);
  }
}
//adding action listener to menu items
for(int j=0; j<3; ++j)
{
  items[j].addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent evt)
  {
    //The next few lines could be clubbed together in one but for
    //clarity sake I write them seperately
    JMenuItem currentItem = (JMenuItem) evt.getSource();
    String textToDisplay = currentItem.getText();
    System.out.println(textToDisplay + " : located in ...");
    //one liner : System.out.println(((JMenuItem) evt.getSource()).getText() + " : located in ...");
  }
  });
}
//finally to fix up the MenuBar
JMenuBar bar = new JMenuBar();
setJMenuBar(bar);
for(int i=0; i<3; ++i)
{
  bar.add(states[i]);
}
getContentPane();
//TODO Create a JLabel add it to the contents
//Instead of writing to the console, update the frames text
setSize(500, 500);
setVisible(true);
 }

  public static void main(String[] args)
  {
    Menu app = new Menu();
    app.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:42:03.507

我没有检查你的代码，但一个组件只能有一个父级。您需要创建单独的菜单项（可能使用相同的 Action 对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T19:45:59.043

@Puce 是正确的。相反，使用[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)来封装共享功能，并使用`Action`. [`FileMenu`](https://stackoverflow.com/a/4039359/230513)是一个简单的例子。

# c++ - Is the constructor of a class called if you declare a object of that class as an instance variable of another class?

> ID：10195338
> 
> 赞同：-3
> 
> 时间：2012-04-17T16:38:07.640
> 
> 标签：c++

For example, if i have a class like this;

```
#import "B.h"
class A
{
    B object;
}; 
```

would B's constructor get called when I created a A object?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:40:08.120

Yes, the default constructor will be called (if present) or a compiler error will be triggered if there is no default constructor for `B`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:39:45.257

Yes. One way to test this is to put some simple cout calls in the constructors to watch the constructor calls happen.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:49:47.630

Yes, member constructor is called in order of declaration for the containing class.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:30:08.173

One should mention that this rule apply both ways, calling class 'A's destructor calls its members default destructor's.

# php - 用ajax、php js 和html 动态填写页面？

> ID：10195340
> 
> 赞同：0
> 
> 时间：2012-04-17T16:38:16.413
> 
> 标签：php, javascript, html, ajax

假设您有类似这样的 HTML 文件：

```
<head></head>
<body>
  <div id="my_personal_div">
  </div>
</body> 
```

Javascript文件：

```
 $.(document).ready(){
    $.ajax({
       url:/any_php.php,
       ...
       ...
       if (msg){
         $("#my_personal_div").html(msg);
       }
    }); 
```

我的 any_php.php 文件：

```
echo "<img src=any_image.jpg />" 
```

所以想法是将一个动态 div 放入一个 html 中，用我创建的一些 php 内容填充它，这样我就可以一次用该 div 提供多个 html。这一切会是什么问题？？？？有什么缺点？？？任何巨大的安全问题？，有什么更好的方式来进行完整的个人喂食，我的意思是，因为我可以从 php 文件中获取任何我想要的图像、输入、文本、图像等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:41:56.097

缺点是它每次都会**多发出一个**http请求，这需要时间……还有资源。

因此，如果您只需要更改页面上的某些内容而不重新加载所有页面，这是一个好方法。

实践这一点的一个好方法是当用户想要更改页面而不是重新加载所有页面时，只需加载已更改的内容并使用浏览器上的推送状态来指示它是一个新页面。例如网站[http://gizmodo.com/](http://gizmodo.com/)使用这个。

顺便说一句，安全方面没有问题，就像加载新页面一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:50:31.463

**您必须确保**请求（GET 和 POST）被您访问的 php 文件过滤。如果您不这样做，任何人都可以通过修改请求来运行可能损害您的站点的代码（例如 SQL 注入）。任何其他 php 脚本也是如此，所以它并不是真正特定于 ajax 的。

无论如何，你想创造什么？每次访问随机显示一些内容的 div？即使用户没有重新加载页面，它会在几秒钟后改变并显示其他内容吗？

如果您只是想随机显示一些内容，您可以在不使用 ajax 的情况下做到这一点。如果您只想在 div 中显示一些文本，也是如此。

使用 ajax 会导致更多的连接，这可能会给您的服务器带来更多压力，具体取决于您使用它的程度。

# c++ - 以理智、安全和有效的方式复制文件

> ID：10195343
> 
> 赞同：326
> 
> 时间：2012-04-17T16:38:33.720
> 
> 标签：c++, file-io

我寻找一种复制文件（二进制或文本）的好方法。我写了几个样本，每个人都工作。但我想听听经验丰富的程序员的意见。

我错过了很好的例子并搜索了一种适用于 C++ 的方法。

**ANSI-C-WAY**

```
#include <iostream>
#include <cstdio>    // fopen, fclose, fread, fwrite, BUFSIZ
#include <ctime>
using namespace std;

int main() {
    clock_t start, end;
    start = clock();

    // BUFSIZE default is 8192 bytes
    // BUFSIZE of 1 means one chareter at time
    // good values should fit to blocksize, like 1024 or 4096
    // higher values reduce number of system calls
    // size_t BUFFER_SIZE = 4096;

    char buf[BUFSIZ];
    size_t size;

    FILE* source = fopen("from.ogv", "rb");
    FILE* dest = fopen("to.ogv", "wb");

    // clean and more secure
    // feof(FILE* stream) returns non-zero if the end of file indicator for stream is set

    while (size = fread(buf, 1, BUFSIZ, source)) {
        fwrite(buf, 1, size, dest);
    }

    fclose(source);
    fclose(dest);

    end = clock();

    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " << end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

**POSIX-WAY**（K&R 在“C 编程语言”中使用它，更底层）

```
#include <iostream>
#include <fcntl.h>   // open
#include <unistd.h>  // read, write, close
#include <cstdio>    // BUFSIZ
#include <ctime>
using namespace std;

int main() {
    clock_t start, end;
    start = clock();

    // BUFSIZE defaults to 8192
    // BUFSIZE of 1 means one chareter at time
    // good values should fit to blocksize, like 1024 or 4096
    // higher values reduce number of system calls
    // size_t BUFFER_SIZE = 4096;

    char buf[BUFSIZ];
    size_t size;

    int source = open("from.ogv", O_RDONLY, 0);
    int dest = open("to.ogv", O_WRONLY | O_CREAT /*| O_TRUNC/**/, 0644);

    while ((size = read(source, buf, BUFSIZ)) > 0) {
        write(dest, buf, size);
    }

    close(source);
    close(dest);

    end = clock();

    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " << end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

**KISS-C++-Streambuffer-WAY**

```
#include <iostream>
#include <fstream>
#include <ctime>
using namespace std;

int main() {
    clock_t start, end;
    start = clock();

    ifstream source("from.ogv", ios::binary);
    ofstream dest("to.ogv", ios::binary);

    dest << source.rdbuf();

    source.close();
    dest.close();

    end = clock();

    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " <<  end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

**复制算法-C++-WAY**

```
#include <iostream>
#include <fstream>
#include <ctime>
#include <algorithm>
#include <iterator>
using namespace std;

int main() {
    clock_t start, end;
    start = clock();

    ifstream source("from.ogv", ios::binary);
    ofstream dest("to.ogv", ios::binary);

    istreambuf_iterator<char> begin_source(source);
    istreambuf_iterator<char> end_source;
    ostreambuf_iterator<char> begin_dest(dest); 
    copy(begin_source, end_source, begin_dest);

    source.close();
    dest.close();

    end = clock();

    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " <<  end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

**OWN-BUFFER-C++-WAY**

```
#include <iostream>
#include <fstream>
#include <ctime>
using namespace std;

int main() {
    clock_t start, end;
    start = clock();

    ifstream source("from.ogv", ios::binary);
    ofstream dest("to.ogv", ios::binary);

    // file size
    source.seekg(0, ios::end);
    ifstream::pos_type size = source.tellg();
    source.seekg(0);
    // allocate memory for buffer
    char* buffer = new char[size];

    // copy file    
    source.read(buffer, size);
    dest.write(buffer, size);

    // clean up
    delete[] buffer;
    source.close();
    dest.close();

    end = clock();

    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " <<  end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

**LINUX-WAY** // 需要内核 >= 2.6.33

```
#include <iostream>
#include <sys/sendfile.h>  // sendfile
#include <fcntl.h>         // open
#include <unistd.h>        // close
#include <sys/stat.h>      // fstat
#include <sys/types.h>     // fstat
#include <ctime>
using namespace std;

int main() {
    clock_t start, end;
    start = clock();

    int source = open("from.ogv", O_RDONLY, 0);
    int dest = open("to.ogv", O_WRONLY | O_CREAT /*| O_TRUNC/**/, 0644);

    // struct required, rationale: function stat() exists also
    struct stat stat_source;
    fstat(source, &stat_source);

    sendfile(dest, source, 0, stat_source.st_size);

    close(source);
    close(dest);

    end = clock();

    cout << "CLOCKS_PER_SEC " << CLOCKS_PER_SEC << "\n";
    cout << "CPU-TIME START " << start << "\n";
    cout << "CPU-TIME END " << end << "\n";
    cout << "CPU-TIME END - START " <<  end - start << "\n";
    cout << "TIME(SEC) " << static_cast<double>(end - start) / CLOCKS_PER_SEC << "\n";

    return 0;
} 
```

**环境**

*   GNU/LINUX (Archlinux)
*   内核 3.3
*   GLIBC-2.15、LIBSTDC++ 4.7 (GCC-LIBS)、GCC 4.7、Coreutils 8.16
*   使用 RUNLEVEL 3（多用户、网络、终端、无 GUI）
*   INTEL SSD-Postville 80 GB，最多填充 50%
*   复制 270 MB OGG-VIDEO-FILE

**重现步骤**

```
 1\. $ rm from.ogg
 2\. $ reboot                           # kernel and filesystem buffers are in regular
 3\. $ (time ./program) &>> report.txt  # executes program, redirects output of program and append to file
 4\. $ sha256sum *.ogv                  # checksum
 5\. $ rm to.ogg                        # remove copy, but no sync, kernel and fileystem buffers are used
 6\. $ (time ./program) &>> report.txt  # executes program, redirects output of program and append to file 
```

**结果（使用的 CPU 时间）**

```
Program  Description                 UNBUFFERED|BUFFERED
ANSI C   (fread/frwite)                 490,000|260,000  
POSIX    (K&R, read/write)              450,000|230,000  
FSTREAM  (KISS, Streambuffer)           500,000|270,000 
FSTREAM  (Algorithm, copy)              500,000|270,000
FSTREAM  (OWN-BUFFER)                   500,000|340,000  
SENDFILE (native LINUX, sendfile)       410,000|200,000 
```

文件大小不会改变。
sha256sum 打印相同的结果。
视频文件仍然可以播放。

**问题**

*   你更喜欢什么方法？
*   你知道更好的解决方案吗？
*   您在我的代码中看到任何错误吗？
*   您知道避免解决方案的原因吗？

*   FSTREAM (KISS, Streambuffer)
    我真的很喜欢这个，因为它真的很短很简单。据我所知，运算符 << 为 rdbuf() 重载并且不转换任何内容。正确的？

谢谢

**更新 1**
我以这种方式更改了所有样本中的源，文件描述符的打开和关闭包含在*clock()*的测量中。它们在源代码中没有其他重大变化。结果没变！我还花*时间*仔细检查了我的结果。

**更新 2**
ANSI C 示例更改：*while 循环*的条件不再调用*feof()*而是我将*fread()*移到条件中。看起来，代码现在运行速度快了 10,000 个时钟。

测量改变：以前的结果总是被缓冲，因为我对每个程序重复了几次旧的命令行*rm to.ogv && sync && time ./program*。现在我为每个程序重新启动系统。无缓冲的结果是新的，并不令人惊讶。无缓冲的结果并没有真正改变。

如果我不删除旧副本，程序的反应会有所不同。使用 POSIX 和 SENDFILE覆盖*缓冲*的现有文件更快，所有其他程序都更慢。也许选项*truncate*或*create*对此行为有影响。但是用相同的副本覆盖现有文件并不是现实世界的用例。

*使用cp*执行复制需要 0.44 秒无缓冲和 0.30 秒缓冲。所以*cp*比 POSIX 样本慢一点。对我来说看起来不错。

也许我还添加了*mmap()*和*`copy_file()`*boost::filesystem 的示例和结果。

**更新 3**
我也把它放在了一个博客页面上，并对其进行了一些扩展。包括*splice()*，它是来自 Linux 内核的低级函数。也许会有更多的 Java 示例。 [http://www.ttyhoney.com/blog/?page_id=69](http://www.ttyhoney.com/blog/?page_id=69)

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2012-04-17T16:49:38.940

以理智的方式复制文件：

```
#include <fstream>

int main()
{
    std::ifstream  src("from.ogv", std::ios::binary);
    std::ofstream  dst("to.ogv",   std::ios::binary);

    dst << src.rdbuf();
} 
```

阅读起来非常简单直观，值得额外付费。如果我们经常这样做，最好依靠操作系统对文件系统的调用。我确信`boost`它的文件系统类中有一个复制文件方法。

有一种与文件系统交互的 C 方法：

```
#include <copyfile.h>

int
copyfile(const char *from, const char *to, copyfile_state_t state, copyfile_flags_t flags); 
```

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2016-07-27T15:00:09.740

使用 C++17 复制文件的标准方法是包含[`<filesystem>`](http://en.cppreference.com/w/cpp/filesystem)标题并使用：

```
bool copy_file( const std::filesystem::path& from,
                const std::filesystem::path& to);

bool copy_file( const std::filesystem::path& from,
                const std::filesystem::path& to,
                std::filesystem::copy_options options); 
```

第一种形式与`copy_options::none`用作选项的第二种形式等价（另请参见 参考资料[`copy_file`](http://en.cppreference.com/w/cpp/filesystem/copy_file)）。

该`filesystem`库最初是作为 ISO C++ 开发的，`boost.filesystem`并最终从 C++17 合并到 ISO C++。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-04-17T16:52:09.113

太多！

“ANSI C”方式的缓冲区是多余的，因为 a`FILE`已经被缓冲了。（这个内部缓冲区的大小是`BUFSIZ`实际定义的。）

“OWN-BUFFER-C++-WAY”在通过时会很慢，它会进行`fstream`大量虚拟调度，并再次维护内部缓冲区或每个流对象。（“COPY-ALGORITHM-C++-WAY”不受此影响，因为`streambuf_iterator`该类绕过了流层。）

我更喜欢“COPY-ALGORITHM-C++-WAY”，但不构造，只需在不需要实际格式化时`fstream`创建裸实例。`std::filebuf`

对于原始性能，您无法击败 POSIX 文件描述符。它在任何平台上都很丑陋但便携且快速。

Linux 的方式似乎非常快——也许操作系统让函数在 I/O 完成之前返回？无论如何，这对于许多应用程序来说都不够便携。

**编辑**：啊，“本机 Linux”可能通过将读写与异步 I/O 交错来提高性能。让命令堆积起来可以帮助磁盘驱动程序决定何时最好寻找。您可以尝试 Boost Asio 或 pthreads 进行比较。至于“无法击败 POSIX 文件描述符”……如果您对数据做任何事情，而不仅仅是盲目地复制，那是真的。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-02-29T12:33:40.743

我要*特别*指出，使用 sendfile() 的 LINUX 方法的一个主要问题是它不能复制超过 2GB 的文件！我在这个问题之后实现了它并且遇到了问题，因为我正在使用它来复制许多 GB 大小的 HDF5 文件。

[http://man7.org/linux/man-pages/man2/sendfile.2.html](http://man7.org/linux/man-pages/man2/sendfile.2.html)

> sendfile() 将最多传输 0x7ffff000 (2,147,479,552) 个字节，返回实际传输的字节数。（在 32 位和 64 位系统上都是如此。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-23T12:43:41.813

Qt 有一个复制文件的方法：

```
#include <QFile>
QFile::copy("originalFile.example","copiedFile.example"); 
```

请注意，要使用它，您必须[安装 Qt](https://www.qt.io/download-open-source/)（[此处](http://doc.qt.io/qt-4.8/installation.html)的说明）并将其包含在您的项目中（如果您使用的是 Windows 并且您不是管理员，则可以[在此处](https://drive.google.com/uc?id=0B24iO8dojZRPZzFZdkhxbG1jTm8&export=download)下载 Qt ）。另请参阅[此答案](https://stackoverflow.com/questions/19928216/qt-copy-a-file-from-one-directory-to-another/19928312#19928312)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-29T15:19:36.647

对于那些喜欢提升的人：

```
boost::filesystem::path mySourcePath("foo.bar");
boost::filesystem::path myTargetPath("bar.foo");

// Variant 1: Overwrite existing
boost::filesystem::copy_file(mySourcePath, myTargetPath, boost::filesystem::copy_option::overwrite_if_exists);

// Variant 2: Fail if exists
boost::filesystem::copy_file(mySourcePath, myTargetPath, boost::filesystem::copy_option::fail_if_exists); 
```

请注意**boost::filesystem::path**也可用作Unicode 的**wpath**。你也可以使用

```
using namespace boost::filesystem 
```

如果您不喜欢那些长类型名称

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-08T16:06:08.333

我不太确定复制文件的“好方法”是什么，但假设“好”意味着“快”，我可以稍微扩大一下主题。

当前的操作系统早已被优化以处理磨机文件副本的运行。没有任何聪明的代码可以打败它。您的复制技术的某些变体可能会在某些测试场景中被证明更快，但在其他情况下它们很可能会变得更糟。

通常，该`sendfile`函数可能会在写入提交之前返回，因此给人的印象是比其他函数更快。我没有读过代码，但肯定是因为它分配了自己的专用缓冲区，用内存换取时间。以及它不适用于大于 2Gb 的文件的原因。

只要您处理少量文件，一切都发生在各种缓冲区内（如果您使用 C++ 运行时`iostream`，则首先是操作系统内部的，在 的情况下显然是文件大小的额外缓冲区`sendfile`）。只有在移动了足够多的数据以值得旋转硬盘的麻烦时，才能访问实际的存储介质。

我想你可以在特定情况下稍微提高性能。在我的头顶上：

*   如果你在同一个磁盘上复制一个大文件，使用比操作系统更大的缓冲区可能会改善一些事情（但我们可能在这里谈论千兆字节）。
*   如果您想在两个不同的物理目标上复制同一个文件，您可能会比一次打开三个文件更快，而不是`copy_file`顺序调用两个文件（尽管只要文件适合操作系统缓存，您几乎不会注意到差异）
*   如果您正在处理 HDD 上的大量小文件，您可能希望分批读取它们以最大限度地减少查找时间（尽管操作系统已经缓存了目录条目以避免疯狂查找，并且小文件可能会显着降低磁盘带宽）。

但所有这些都超出了通用文件复制功能的范围。

因此，在我可以说是经验丰富的程序员看来，C++ 文件复制应该只使用 C++17`file_copy`专用函数，除非对文件复制发生的上下文有更多了解，并且可以设计一些聪明的策略来超越操作系统。

# c# - monodevelop 中的 asp.net mvc 应用程序出错

> ID：10195349
> 
> 赞同：0
> 
> 时间：2012-04-17T16:39:03.117
> 
> 标签：c#, asp.net, asp.net-mvc, mono, monodevelop

我刚刚安装了monodevelop。
我想从使用单声道的 asp.net mvc 开始，但我不能让它工作。我启动了一个新的 ASP.NET mvc 项目，我想编译默认生成的代码，但是我得到了一个错误：

```
using System.Web.Mvc; 
```

说

```
The type or namespace name 'Mvc' does not exist in the namespace 'System.Web' 
```

笔记：

我有西班牙语的 Monodevelop，我得到的实际错误是

```
El tipo o el nombre del espacio de nombres 'Mvc' no existe en el espacio de nombres 'System.Web' (;falta una referencia de ensamblado?) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:54:13.860

除了`using`指令之外，您还必须添加对包含您要使用的代码的实际 .dll 的引用。

要在 monodevelop 中实现这一点，您必须转到Solution 窗格中的*References并选择**Edit References*。将弹出一个新对话框，您应该可以在其中添加对`System.Web.Mvc`.

# maven - maven 包装不包括依赖 jars

> ID：10195360
> 
> 赞同：-1
> 
> 时间：2012-04-17T16:39:31.903
> 
> 标签：maven

我的应用程序结构：我的项目（让我们说 AAA）包装为 JAR。项目 AAA 添加依赖于 Web 项目 BBB 和 CCC 的 BBB 反过来模块，这是一个 EAR。

在进行 AAA 项目 maven 构建时，maven 不包括依赖 jar 作为打包的一部分，当我部署 ear 包时，部署最终会失败。

问题

1）如何使公共库在父项目和子项目之间共享以避免重复 2）如何在 maven 构建期间包含单个项目库（这不常见）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:45:03.630

maven 中的默认设置是只打包实际模块中的类文件，而不是依赖的 jar。如果您想创建一种 ueber-jar，这可以通过使用[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)来实现，但这不是通常的用例。如果您尝试创建一个耳朵，那么所有 jar 都将被打包，否则您的配置不正确，或者您没有使用 maven-ear-plugin，或者您的包装未定义为“ear”。

如果您想共享一个库，我们在多模块构建中将其称为 common，最简单的解决方案是创建如下结构：

```
 +-- root (pom.xml)
       +-- module-1 (pom.xml)
       +-- module-2 (pom.xml)
       +-- common (pom.xml) 
```

例如，您在 module-1 或任何其他将使用 common 模块作为依赖项的模块中将 common 定义为依赖项。你可以看看这个[例子](https://github.com/khmarbaise/javaee)。

# ubuntu - Gerrit 缺少所有项目

> ID：10195362
> 
> 赞同：1
> 
> 时间：2012-04-17T16:39:39.933
> 
> 标签：ubuntu, gerrit

我不小心删除了服务器上的 allprojects.git 文件，现在当我尝试通过 Web UI 访问 Projects 时出现 Missing All-Projects 错误，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:17:12.487

All-Projects 非常关键。它保存有关权限和组成员身份的信息。如果您在某处没有备份副本，最好的办法是重新安装 gerrit 并导入现有项目。

# c# - NHibernate 自定义 MsSql2008Dialect 驱动

> ID：10195364
> 
> 赞同：-2
> 
> 时间：2012-04-17T16:39:42.930
> 
> 标签：c#, nhibernate

我的最后一个问题已关闭，因为它被解释为“广泛而模糊”，因此我将尝试澄清问题。

我需要为 NHibernate 创建一个自定义驱动程序来做一些事情（对帖子来说并不重要），但我不知道从哪里开始。我有一个我在互联网上看到的代码，但我不知道如何完成它：

```
public class teste : NHibernate.Driver.ReflectionBasedDriver
{
    public teste()
        :base()
    {

    } 
```

我的问题出在 :base() 部分，我不知道我需要放什么！

谢谢

**PS->看在上帝的份上，自从上一个帖子被关闭以来，这不是重复的帖子！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:27:34.373

这个问题注定了，因为“我想做点什么”并没有真正帮助我们。如果 NHibernate 需要一个程序集但您需要使用另一个程序集，您将使用 ReflectionBasedDriver。

例如，如果我想使用 mono sqlite（因为 NHibernate 期望使用 SQLite.NET），那么我会使用：-

```
 public MyClass() : base("Mono.Data.Sqlite", 
        "Mono.Data.Sqlite.SqliteConnection", "Mono.Data.Sqlite.SqliteCommand")
    {

    public override bool UseNamedPrefixInSql
    {
        get { return true; }
    }

    public override bool UseNamedPrefixInParameter
    {
        get { return true; }
    }

    public override string NamedPrefix
    {
        get { return "@"; }
    }
} 
```

在此之后，我高度怀疑您实际上是：

```
public class MyDialect : NHibernate.Dialect.MsSql2008Dialect
{
} 
```

作为自定义方言，您可以指定自己的配置。

# javascript - Perl 和 HTML/JavaScript 中的特殊字符（非英语）

> ID：10195367
> 
> 赞同：0
> 
> 时间：2012-04-17T16:39:52.557
> 
> 标签：javascript, html, perl, character-encoding

我想显示从 Perl 发送到我的网页的文本。在 Perl 我有这个集合

```
print "Content-Type: text/plain; charset=UTF-8\n\n"; 
```

而且我很确定我需要更改字符集设置。我的第一个问题是如何更改设置以包含更多语言而不仅仅是更改语言。

我的第二个问题是，如果我直接在 Perl 中设置字符集，我是否还需要在我的 HTML/JavaScript 上更改它，以便显示信息的网页正确显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:47:50.187

## 不要忘记根据源编码对文本进行解码和编码！

```
#!/usr/bin/perl

use strict;
use warnings;
use CGI ":all";
use Encode;

my $cgi = new CGI;
binmode STDOUT, ':utf8';

print $cgi->header(-type    => 'text/html',
                   -charset => 'utf-8');

print $cgi->start_html(-title => 'Test',
                       -charset  => 'utf-8',
                       -encoding => 'utf-8',
                       -head => meta({-http_equiv => 'Content-Type',
                                      -content => 'text/html; charset=utf-8'}));

my $text = ...

Encode::from_to($text, 'latin1', 'utf8');

print $cgi->p($text);
print $cgi->end_html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:51:54.687

> 我的第一个问题是如何更改设置以包含更多语言

UTF-8 包括（几乎）所有语言。也许您的意思是“不同的编码”？在这种情况下，你需要知道你的源代码是什么编码的。它在通过 perl**之前**是从哪里来的？

UTF-8 也是在线的主要编码，您可能最好坚持使用它。这意味着如果你有一个不在 utf8 中的源，你应该首先使用 perl 的 decode() 和 encode()。但同样：您确实需要知道源编码是什么。

# netty - 从 netty 3.2.x 升级到 3.3x 和 Unsafe

> ID：10195370
> 
> 赞同：0
> 
> 时间：2012-04-17T16:39:57.467
> 
> 标签：netty

实际上我在自定义流服务器项目中使用 netty 3.2.7。我正在尝试升级到 netty 3.3.x，但遇到了与“不安全”相关的问题。

我有一个子类“ChunkedWriteHandler”的处理程序和另一个子类“ChunkedInput”的类，以便实现向客户端的分块http数据传输。

升级到 3.3.x 后，我的代码中断并显示以下消息：

```
Invalid memory access of location 0x15e47da eip=0x708666 
```

查看源代码，我可以看到现在 ChunkedWriteHandler 中使用的缓冲区使用 Unsafe 来优化一些操作，但我不明白我做错了什么（导致无效的内存访问）以及如何解决这个问题。

一些网络大师可以帮助我理解和解决我的问题吗？

谢谢，罗科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:22:14.027

在 netty 3.4.1.Final 中，现在可以通过“-Dorg.jboss.netty.tryUnsafe=false”禁用不安全

# c# - 序列化引用的类对象

> ID：10195372
> 
> 赞同：0
> 
> 时间：2012-04-17T16:40:00.313
> 
> 标签：c#, .net, serialization, xml-serialization, asmx

```
// Reference.cs
// Conveintly serializable
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="urn:schemas-sc-jp:mfp:osa-1-1")]
public partial class CREDENTIALS_TYPE : CREDENTIALS_BASE_TYPE {

    private string datatypeField;

    private OPAQUE_DATA_TYPE metadataField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("data-type")]
    public string datatype {
        get {
            return this.datatypeField;
        }
        set {
            this.datatypeField = value;
        }
    }

    /// <remarks/>
    public OPAQUE_DATA_TYPE metadata {
        get {
            return this.metadataField;
        }
        set {
            this.metadataField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="urn:schemas-sc-jp:mfp:osa-1-1")]
public partial class OPAQUE_DATA_TYPE {

    private System.Xml.XmlElement[] anyField;

    private System.Xml.XmlAttribute[] anyAttrField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAnyElementAttribute()]
    public System.Xml.XmlElement[] Any {
        get {
            return this.anyField;
        }
        set {
            this.anyField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAnyAttributeAttribute()]
    public System.Xml.XmlAttribute[] AnyAttr {
        get {
            return this.anyAttrField;
        }
        set {
            this.anyAttrField = value;
        }
    }
} 
```

我有一个从网络上的设备获取数据的网络方法，其中一部分数据是用于授权设备的凭据。

我们正在使用 API，因此要接收此数据，我必须将 CREDENTIALS_TYPE 作为 webmethod 中的参数类型。我需要做的是保存这些数据，这样就可以在没有 webmethod 的情况下获取它。

现在我之前已经将类序列化为 XML 文件，所以我选择了熟悉的选项，但只使用我自己创建的类。**我想知道是否真的可以用不是我的引用类做同样的事情？**

我必须创建一个与 CREDENTIALS_TYPE 匹配的类并复制数据，但我无法找到在不同类型之间进行转换的方法。

The "CREDENTAILS_TYPE" is coming from an MFP, so reflecting and changing the code is no good in my situation because I couldn't update it anyway.

Any suggestions/advice?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:40:34.217

Since you can't modify a class you don't own the source code to, create your own DTO with the serialization attributes you require and then use [Automapper](http://automapper.codeplex.com/) to transfer the field data back and forth between the two.

# reporting-services - 从 SSRS 图表中的列传递参数

> ID：10195376
> 
> 赞同：1
> 
> 时间：2012-04-17T16:40:27.017
> 
> 标签：reporting-services

在 SSRS 中，我有一个按月按列显示数据的图表。我希望能够单击图表中的一列并以该月作为新报告的参数转到另一个报告。那可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:30:50.913

有可能的。这称为“钻取”。您只需右键单击该列，打开“属性”，转到“操作”部分并选中“转到报告”。选择您的报告并将该字段作为参数添加到此新报告中。

如果标签有误，请原谅我，我的客户使用的是外国版本的 SSRS，我无法记住所有标签。

希望这有帮助！

# java - 关于排序地图

> ID：10195377
> 
> 赞同：-2
> 
> 时间：2012-04-17T16:40:29.810
> 
> 标签：java

我有一个查询，我开发了一张我想排序的地图，请告知..

```
 HashMap map=new HashMap();//HashMap key random order.
     map.put("Amit","Java");
     map.put("Saral","J2EE");
     map.put("ty","Spring");
     map.put("Anupam","Hibernate");
     map.put("Ravi",".Net");
     map.put("Saral","Andriod");//same key but different value 
     map.put("Nitin","PHP");
     map.put("hj","Spring1");
     System.out.println("There are "+map.size()+" elements in the map.");
     System.out.println("Content of Map are...");
     Set s=map.entrySet();
     Iterator itr=s.iterator();
     while(itr.hasNext())
     {
         Map.Entry m=(Map.Entry)itr.next();
         System.out.println(m.getKey()+"\t"+m.getValue()+"\t"+ m.hashCode());
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:41:44.483

如果您希望它按（字符串）键排序，那么只需使用`java.util.TreeMap`而不是`HashMap`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:52:23.760

有一些事情需要考虑，它们会影响您真正想要的解决方案。

您正在使用 a ，这意味着您需要 a -type`HashMap<K, V>`的关联和键查找行为。`Map`

`HashMap`它本身并不关心排序 - 每当您插入键值对时，`hashCode()`都会调用键的方法，并且映射使用该哈希码存储配对。`String`对象已经有了正确的`hashCode()`实现，因此您可以毫无问题地将它们用作键。

当然，在检索或迭代您`HashMap`的 .

由于您想“排序”您的数据，我假设您的意思是您希望您的配对返回，按键排序（按您输入的名称排序）。

### 现在这里是需要考虑的地方：

## 保持数据始终排序

如果您希望始终对数据进行排序，即每次插入新的键值对时，都希望保持元素的自然顺序，那么您可以使用 Java API 中的一些方便的数据结构：

### 使用`TreeMap`

正如 Dilum 已经提到的，您可以使用[`java.util.TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)实现[`java.util.SortedMap`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedMap.html)接口的 ，这将保证对映射中的键进行排序。

例子：

```
import java.util.Map;
import java.util.SortedMap;
import java.util.TreeMap;

public class SortedMapExample {
    public static void main(String[] args) {
        SortedMap<String, String> map = new TreeMap<String, String>();
        map.put("Amit","Java");
        map.put("Saral","J2EE");
        map.put("ty","Spring");
        map.put("Anupam","Hibernate");
        map.put("Ravi",".Net");
        map.put("Saral","Andriod");//same key but different value 
        map.put("Nitin","PHP");
        map.put("hj","Spring1");

        for (Map.Entry<String, String> e : map) {
            System.out.println(String.format("%s - %s", e.getKey(), e.getValue()));
        }
    }
} 
```

如果您运行此代码，您将得到它：

```
λ > java SortedMapExample
Amit - Java
Anupam - Hibernate
Nitin - PHP
Ravi - .Net
Saral - Andriod
hj - Spring1
ty - Spring 
```

### 使用`ConcurrentSkipListMap`

[ConcurrentSkipListMap](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)是一种较新的数据结构，首先在 Java 6 中可用。它还实现了`SortedMap`接口，底层实现涉及[跳过列表](http://en.wikipedia.org/wiki/Skip_list)。

它也是一个并发集合，您可以在[Brian Goetz 的这篇文章中](http://www.ibm.com/developerworks/java/library/j-jtp07233/index.html)了解更多信息。简而言之， Java 并发集合`java.util.concurrent`是高性能的线程安全集合。

将前面的示例更改为使用`ConcurrentSkipListMap`.

```
import java.util.Map;
import java.util.SortedMap;
import java.util.concurrent.ConcurrentSkipListMap; // this changed

public class SortedMapExample {
    public static void main(String[] args) {
        // the following line changed - now you know the power of programming to interfaces
        SortedMap<String, String> map = new ConcurrentSkipListMap<String, String>();
        map.put("Amit","Java");
        map.put("Saral","J2EE");
        map.put("ty","Spring");
        map.put("Anupam","Hibernate");
        map.put("Ravi",".Net");
        map.put("Saral","Andriod");//same key but different value 
        map.put("Nitin","PHP");
        map.put("hj","Spring1");

        for (Map.Entry<String, String> e : map) {
            System.out.println(String.format("%s - %s", e.getKey(), e.getValue()));
        }
    }
} 
```

运行此代码，您将获得完全相同的输出：

```
λ > java SortedMapExample
Amit - Java
Anupam - Hibernate
Nitin - PHP
Ravi - .Net
Saral - Andriod
hj - Spring1
ty - Spring 
```

## 按需排序

也许在您的用例中，您不希望始终保持数据排序。也许这是一个性能问题（如果这是您关心的问题，请进行基准测试），并且您实际上只需要在请求时对数据进行排序。

在您的情况下，您可以在[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List))数据键上使用。

坚持你的`HashMap`例子：

```
import java.util.Collections;
import java.util.Map;
import java.util.HashMap;
import java.util.List;
import java.util.ArrayList;

public class UnsortedExample {
   public static void main(String[] args) {
      Map<String, String> map = new HashMap<String, String>();
      map.put("Amit", "Java");
      map.put("Saral","J2EE");
      map.put("ty","Spring");
      map.put("Anupam","Hibernate");
      map.put("Ravi",".Net");
      map.put("Saral","Andriod");//same key but different value
      map.put("Nitin","PHP");
      map.put("hj","Spring1");

      List<String> keys = new ArrayList<String>(map.keySet());
      Collections.sort(keys);

      for (String key : keys) {
          System.out.println(String.format("%s - %s", key, map.get(key)));
      }
   }
} 
```

在这里，我`keySet()`从地图中提取了 ，它返回了一个`Set`包含地图中所有键的对象。然后我把它变成一个`ArrayList`并排序列表，然后遍历列表并将值从地图中提取出来。

`java.util.TreeSet`拔出来的时候也可以用`keySet()`，和和`TreeSet`自然一样是有序`TreeMap`的`ConcurrentSkipListMap`。

使用示例`SortedSet`：

`java.util.SortedSet<String> keys = new java.util.TreeSet<String>(map.keySet());`

顺便说一句，还有一个`java.util.concurrent.ConcurrentHashMap`类，它是 Java Concurrency 版本，`java.util.HashMap`并且在将发生并发访问的多线程环境中运行良好。

## 哇哇，为什么排序很奇怪？

此示例使用英语（我对“排序”的非英语语言了解不多），但您可以看到排序有些奇怪。

例如，在前面示例的输出中，`"hj"`出现在 之后`"Saral"`，而人类可能会真正按字母顺序排列列表，例如`"hj"`介于`"Anupam"`和之间`"Nitin"`。

默认情况下，`java.lang.String`实现`Comparable`接口，定义[自然排序](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)。Java 与几乎所有其他正在使用的编程语言一样，将大写英文字母排在小写字母之前。

简单的解释是，在 ASCII/UTF-8 中，英文大写字母排在英文小写字母之前。

但是，您可能需要忽略大小写的不同字母排序。为此，您必须编写自己的实现类`Comparator`，并将其传递给 or 的构造函数，`TreeMap`或传递`ConcurrentSkipListMap`给`Collections.sort`采用比较器对象的方法。

如果你想实现这样的排序，我会把它作为练习留给你。

## 结论

从表面上看，您的问题只是对您的`Map`-like 对象中的数据进行排序。

您可以选择使用：

*   `java.util.TreeMap`- 按自然顺序保持元素排序
*   `java.util.concurrent.ConcurrentSkipListMap`- 与上面相同，但具有良好的线程安全性
*   使用按需排序`Collections.sort()`

我不知道你对这个数据结构有什么用，或者它在什么环境中使用。例如，如果你的 有多线程访问`HashMap`，那么你需要同步机制，而同步机制`HashMap`本身没有。为此，它更容易使用`java.util.concurrent.ConcurrentSkipListMap`or `java.util.concurrent.ConcurrentHashmap`。

因此，根据您使用数据的方式，有不同的方法可以对数据进行排序。如果您想要始终排序，那么我建议您使用`ConcurrentSkipListMap`(for multithreaded) 或`TreeMap`. 如果您需要`HashMap`分期 O(1) 的插入性能，那么您可能需要使用`HashMap`和排序“按需”方式，或者保留一个单独的数据结构来排序您的键。如果您对特定用途有性能问题，请进行分析。

还有一些额外的细节：

*   我正在使用[每个循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)来遍历我上面的数据结构。如果您只需要元素访问（而不是突变/删除），那么 for-each 是显式迭代器的非常好的语法糖。
*   在我的示例中，我使用接口作为变量的类型，而不是具体的类（在您的代码中，[您](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)有`HashMap<...> map = new HashMap<...>();`.

# servlets - 使用 java servlet 上传到 temp 时出现 java.io.FileNotFoundException

> ID：10195380
> 
> 赞同：2
> 
> 时间：2012-04-17T16:40:34.807
> 
> 标签：servlets, file-upload

我有一个上传 java servlet，它在 windows 上运行代码时将文件写入临时目录，它工作正常，但是当我在 CentOS 上运行它时，我得到下面的 java.io.FileNotFoundException 错误。servlet 没有将文件写入 /usr/local/jakarta/apache-tomcat-7.0.26/temp 。我尝试将每个目录权限设置为 rwxrwxrwx 但仍然无效。知道可能是什么问题吗？

```
9:51:07,555 ERROR DataUploadServlet:335 - /usr/local/jakarta/apache-tomcat-7.0.26/temp/upload_7ac89b2c_136bc0fe17f__8000_00000003.tmp (No such file or directory)
java.io.FileNotFoundException: /usr/local/jakarta/apache-tomcat-7.0.26/temp/upload_7ac89b2c_136bc0fe17f__8000_00000003.tmp (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:120)
    at org.apache.commons.fileupload.disk.DiskFileItem.getInputStream(DiskFileItem.java:236)
    at com.brate.admin.server.service.util.dataimport.DataUploadServlet.digestFile(DataUploadServlet.java:135)
    at com.brate.admin.server.service.util.dataimport.DataUploadServlet.executeAction(DataUploadServlet.java:101)
    at gwtupload.server.UploadAction.doPost(UploadAction.java:180)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:146)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:54:44.340

您的 System.getProperty("java.io.tmpdir") 位置不存在。它只发生在超过 10 KB 的文件上，因为只有当文件大小超过 10 KB 时，tomcat 才会尝试写入磁盘。

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:36:56.740

我正在使用由 GWT gwtupload servlet 创建的 FileItem 导致错误。我创建了一个临时文件并将 FileItem 的内容复制到我的新临时文件中。

```
File file = File.createTempFile("upload-", ".xls");
item.write(file); 
```

# django - 如何要求 IIS 站点等待服务？

> ID：10195381
> 
> 赞同：0
> 
> 时间：2012-04-17T16:40:36.503
> 
> 标签：django, iis, iis-7.5, celery

我有一个通过 IIS（7.5，Windows Server 2008 R2）托管的站点。该站点本身基于 Django (Python)，并使用 Celery 进行异步任务处理。Celery 需要在任务处理之前启动几件事（celeryd、celerycam、celerybeat），我创建了一个启动这些的服务。它设置为在服务控制面板中自动启动。

我发现，在服务器重新启动（自动更新等）后，我的 Celery 服务要么没有启动，要么时间有问题，并且依赖于它的我的网站无法使用它们。由于没有这些工作，该站点基本上是无用的，因此我需要找到一种方法来确保它们在站点可用之前运行。

我想避免让所有 IIS 都依赖于这个服务；只是一个有问题的站点（我有几个其他站点通过那里托管在不需要服务的不同端口上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T11:27:38.010

我认为最好的解决方案是更改您的应用程序并在无法连接到 Celery 服务时使其软失败。即向用户显示一条信息性错误消息，并为其提供重试选项。

让它依赖于服务的启动顺序是不好的设计。如果 Celery 服务因任何原因失败怎么办？顺便说一下，数据库连接/查询也是如此。您的代码应始终优雅地处理故障/错误。

# sql - 如何为 SELECT 返回值赋值？

> ID：10195383
> 
> 赞同：1
> 
> 时间：2012-04-17T16:40:37.593
> 
> 标签：sql

例如，查询可以返回“是”或“否”。如果是，我怎样才能让它返回 1，如果不是，我怎样才能让它返回 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:41:14.927

如果您只想要 a`yes`如果它是 1，并且每个其他值都会导致 a `no`，您可以这样做：

```
select case 
        when MyColumn = 'yes' then 1 
        else 0 
    end as MyDerivedValue
from MyTable 
```

或者，您可以更具体：

```
select case MyColumn 
        when 'yes' then 1 
        when 'no' then 0
        when 'maybe' then 2
        else -1
    end as MyDerivedValue
from MyTable 
```

# git - 使用 Netbeans IDE 设置 GitHub 存储库

> ID：10195384
> 
> 赞同：2
> 
> 时间：2012-04-17T16:40:37.683
> 
> 标签：git, netbeans, github, versioning

我希望能够设置我的 GitHub 存储库以与我的 Netbeans 项目集成。一般来说，我是版本控制的超级菜鸟，所以这可能是一个非常简单的问题。任何帮助，将不胜感激！

*我的问题是*：我要插入什么作为我的存储库 URL？

以下是我尝试推送到远程时给出的选项：

![Netbeans 选项](../Images/d6cb042e30916a4cac250287920b7daf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:53:33.700

您首先需要在现有项目中初始化一个 git 存储库，然后您可以使用 ssh 协议和 git@github.com:Username/repositoryname.git 推送它应该要求您提供您的私钥文件，从您的用户文件夹中的 .ssh 中选择它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:51:09.783

远程存储库位置是指您想要推送到的本地存储库之外的某个位置。这可以是列出的任何协议（即，您可以“推送”到磁盘上的本地存储库或互联网上的某个地方）。一个流行的 git 远程存储库服务是[Github](http://github.com)。创建一个 Github 帐户并将其用作远程帐户，您可以将更改推送到他们的服务器，并使用他们与 git 关联的服务。

但是，不需要使用遥控器。如果您只想在本地计算机上拥有源代码，则无需添加遥控器。在这种情况下，请使用第一个单选选项。如果您还没有，您可能需要初始化 git 存储库。为此，请访问您的项目目录并运行`git init`（假设您已安装 git）。

# c# - BindingSource 过滤器不起作用

> ID：10195385
> 
> 赞同：0
> 
> 时间：2012-04-17T16:40:44.040
> 
> 标签：c#, database, winforms, binding

过滤器适用于 myTicketsSubmitButton，但不适用于 allTicketsSubmitButton。代码是相同的，但我不明白为什么它适用于一种方法而不适用于另一种方法。

我在 Visual Studio 2010 中使用 WinForms 和 C#

```
 private void myTicketsSubmitButton_Click(object sender, EventArgs e)
    {
        String sqlQuery = "SELECT u.CallerName, t.* FROM users u INNER JOIN tickets t ON u.id = t.user WHERE u.CallerName = '" + Environment.UserName.ToLower() + "'";
        GetData(sqlQuery);

        if (myTicketsAllRadioButton.Checked)
        {
            //GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus LIKE '%'";
        }

        if (myTicketsClosedRadioButton.Checked)
        {
            //GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus = 'Closed'";
        }

        if (myTicketsOpenRadioButton.Checked)
        {
            //GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus = 'Open'";                
        }
    }

    private void allTicketsSubmitButton_Click(object sender, EventArgs e)
    {
        String sqlQuery = "SELECT u.CallerName, t.* FROM users u INNER JOIN tickets t ON u.id = t.user";
        GetData(sqlQuery);

        if (myTicketsAllRadioButton.Checked)
        {
            //GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus LIKE '%'";
        }

        if (myTicketsClosedRadioButton.Checked)
        {
            //GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus = 'Closed'";
        }

        if (myTicketsOpenRadioButton.Checked)
        {
            //GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus = 'Open'";               
        }
    }

    private void GetData(string selectCommand) 
    {
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter();
        BindingSource bindingSource1 = new BindingSource();
        try 
        {
            // Specify a connection string. Replace the given value with a  
            // valid connection string for a Northwind SQL Server sample 
            // database accessible to your system.
            String connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\testdb.accdb";

            // Create a new data adapter based on the specified query. 
            dataAdapter = new OleDbDataAdapter(selectCommand, connectionString);

            // Create a command builder to generate SQL update, insert, and 
            // delete commands based on selectCommand. These are used to 
            // update the database. 
            OleDbCommandBuilder commandBuilder = new OleDbCommandBuilder(dataAdapter);

            // Populate a new data table and bind it to the BindingSource. 
            DataTable table = new DataTable(); 
            table.Locale = System.Globalization.CultureInfo.InvariantCulture; 
            dataAdapter.Fill(table); 
            bindingSource1.DataSource = table;
            ticketsBindingSource = bindingSource1;

            // Resize the DataGridView columns to fit the newly loaded content. 
            //ticketsDataGridView.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCellsExceptHeader);                

            ticketsDataGridView.DataSource = bindingSource1;
        }
        catch(OleDbException)
        {
            MessageBox.Show("To run this example, replace the value of the connectionString variable with a connection string that is valid for your system.");
        }
    } 
```

我有 6 个单选按钮。

其中 3 个用于 myTickets --Open --Closed --All

其中 3 个用于 allTickets --Open --Closed --All

当我单击 myTickets 组的单选按钮时，一切正常

我对代码做了一些小改动，但 allTicketsSubmitButton 没有显示 Open 或 All 票的所有票。

数据库相对较小，因此我可以随时快速测试。

我有 5 个条目 2 打开 2 已关闭 1 正在进行中

2 个条目分配给另一个用户（因此其中 3 个是 myTickets）。

我注意到了一些奇怪的事情

仅当我将 myTickets 和 allTickets 的单选按钮设置为相同的东西时，结果才能正确显示

（两个打开都会显示打开的票）如果一个是打开的，另一个是关闭的，那么什么都不会发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:48:56.110

如果您有 6 个单选按钮，3 个用于 myTickets，3 个用于 allTickets，那么为什么要在 allTickets 按钮单击事件下检查您的 myTickets？

我认为您需要将代码从以下位置更改：

```
private void allTicketsSubmitButton_Click(object sender, EventArgs e)
    {
        String sqlQuery = "SELECT u.CallerName, t.* FROM users u INNER JOIN tickets t ON u.id = t.user";

        if (myTicketsAllRadioButton.Checked)
        {
            GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus LIKE '%'";
        }

        if (myTicketsClosedRadioButton.Checked)
        {
            GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus = 'Closed'";
        }

        if (myTicketsOpenRadioButton.Checked)
        {
            GetData(sqlQuery);
            ticketsBindingSource.Filter = "ProblemStatus = 'Open'";               
        }
    } 
```

至：

```
private void allTicketsSubmitButton_Click(object sender, EventArgs e)
    {
        String sqlQuery = "SELECT u.CallerName, t.* FROM users u INNER JOIN tickets t ON u.id = t.user";
        GetData(sqlQuery); // move this here, you only need this in one place

        if (allTicketsAllRadioButton.Checked)
        {
            ticketsBindingSource.Filter = "ProblemStatus LIKE '%'";
        }

        if (allTicketsClosedRadioButton.Checked)
        {
            ticketsBindingSource.Filter = "ProblemStatus = 'Closed'";
        }

        if (allTicketsOpenRadioButton.Checked)
        {
            ticketsBindingSource.Filter = "ProblemStatus = 'Open'";               
        }
    } 
```

# vbscript - ADOB.RecordSet Select Distinct 命令在没有空值的情况下返回空值

> ID：10195391
> 
> 赞同：0
> 
> 时间：2012-04-17T16:41:07.653
> 
> 标签：vbscript, distinct, adodb, recordset

Stack Overflow，我整个上午都在这个问题上搞砸了。我正在尝试用脚本帮助同事。他不是程序员，他只是从网上复制了一些代码，并让我修改它以获得他想要的结果。我仔细研究了它，废弃了所有不必要的部分并重写了它，所以它以我理解的方式做我想做的事。老实说，我只在这些情况下处理 VBscript，当同事有一个需要修复的时候。我在 VB6 中拥有我所有的 VB 经验。

该脚本的目的是获取一个以换行符分隔并可能填充重复条目的文本文件，并在删除所有重复项的情况下输出它。

```
Set objConnection = CreateObject("ADODB.Connection")
Set objRecordSet = CreateObject("ADODB.Recordset")

strPathToTextFile = "C:\Scripts\"
strFile = "Test.txt"
strOutputFile = "C:\this_is_the_output_changeme.txt"

Dim objFSO, objFile
Set objFSO = CreateObject("Scripting.FileSystemObject")
set objFile = objFSO.CreateTextFile(strOutputFile)

sql = "Select DISTINCT * FROM " & strFile

objConnection.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
      "Data Source=" & strPathtoTextFile & ";" & _
          "Extended Properties=""text;HDR=NO;FMT=Delimited"""

objRecordSet.Open sql, objConnection

Do Until objRecordSet.EOF
    objFile.Write(objRecordSet.Fields.Item(0).Value)
    objFile.Write(vbCrLf)
    objRecordSet.MoveNext
Loop

objFile.Close 
```

看起来很结实对吧？它工作正常....取决于输入文件。所以这就是问题所在，有时它就像一个魅力，有时它会感到困惑并将所有非数字条目报告为单个不同的空值。

以下是两个可以正常工作的示例输入：

```
0
1
1
2
3
4
5
3
5
6
7
8
9
9
9 
```

将输出：

```
0
1
2
3
4
5
6
7
8
9 
```

这个输入

```
gray
grey
gray
graey
greay
grey
gray
greasy
greay 
```

输出：

```
graey
gray
greasy
greay
grey 
```

但是许多其他输入会导致此特定脚本因类型不匹配错误而崩溃。如果我用 Wscript.echo 替换 objFile.Write，我可以看到 objRecordSet 返回空值。

重新创建此错误的最简单输入是：

```
1
1
a
a 
```

如果我回显这个输入，我会得到：

```
null
1 
```

**基本上任何字母和数字的组合都会产生这个错误。所有字母都作为一个空值返回，并且数字很好。**

这对我来说似乎是非常奇怪的行为。似乎 RecordSet 得出结论，如果有一些数字值，它只会接收数字值，并将所有字母作为空数字抛出。据我所知，**在任何输入的数字条目是字母条目的一半的情况下，它都会遇到此错误**

我一直无法确定一种方法来指定以字符串形式接收所有返回的项目。我应该如何寻求解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:51:54.367

该问题是由驱动程序对（唯一的）列的数据类型造成的。通过将 schema.ini 文件放入数据源文件夹来帮助驱动程序。

我用于此演示的 schema.ini：

```
[numbers.txt]
Format=TabDelimited
ColNameHeader=False
Col1=F1 FLOAT

[texts.txt]
Format=TabDelimited
ColNameHeader=False
Col1=F1 TEXT

[mixed.txt]
Format=TabDelimited
ColNameHeader=False
Col1=F1 TEXT 
```

演示代码：

```
 Const adClipString = 2

  Dim oCN     : Set oCN = CreateObject("ADODB.Connection")
  Dim sTDir   : sTDir   = goFS.GetAbsolutePathName("..\data")
  Dim aTables : aTables = Array("numbers.txt", "texts.txt", "mixed.txt")

  oCN.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & _
      "Data Source=" & sTDir & ";" & _
          "Extended Properties=""text;HDR=NO;FMT=TabDelimited"""

  Dim sTable
  For Each sTable In aTables
      Dim sFSpec : sFSpec = goFS.BuildPath(sTDir, sTable)
      WScript.Echo "  In:", Replace(goFS.OpenTextFile(sFSpec).ReadAll(), vbCrLf, " ")
      WScript.Echo "Seen:", oCN.Execute("SELECT * FROM [" & sTable & "]").GetString(adClipString, , "", " ", "NULL")
      WScript.Echo " Out:", oCN.Execute("SELECT DISTINCT * FROM [" & sTable & "]").GetString(adClipString, , "", " ", "NULL")
  Next
  oCN.Close 
```

QED 输出：

```
Unique00 - unique via ADO Text Driver
=================================================
  In: 2,05 2 1 2,5 3 2,05 2
Seen: 2,05 2 1 2,5 3 2,05 2
 Out: 1 2 2,05 2,5 3
  In: grey gray gray
Seen: grey gray gray
 Out: gray grey
  In: 1000 grey 10 gray 9 gray 9 1 gray
Seen: 1000 grey 10 gray 9 gray 9 1 gray
 Out: 1 10 1000 9 gray grey
=================================================
xpl.vbs: Erfolgreich beendet. (0) [0.67188 secs] 
```

# python - Python 文档，IDE 指导

> ID：10195392
> 
> 赞同：-1
> 
> 时间：2012-04-17T16:41:07.603
> 
> 标签：python, ide, pycharm

假设我有这样的功能：

```
def render(someobject):
 someobject. #here i expect IDE to know which class it is and autocompletion and other IDE functional will be available
 dorender() 
```

就我而言，IDE 无法知道里面有什么。我如何通过使用评论来告诉它？

在 PHP 的情况下，我使用过类似的东西

```
/**
 * @param MyClass myobject
**/
function render($myobject){
  //by typing $myobject-> IDE already knows, that it should use $myobject as MyClass objec
  dorender()
} 
```

另一个用例是当我知道在某些情况下某些代理将返回某些对象 IDE 没有机会知道，但我确定并希望通过评论指定这一点，以帮助自己将来帮助 IDE。

在 PHP 中使用 PhpStorm 时，我会执行以下操作：

```
$myobject=some_proxy()
/**
 * @var $my_object MyClass
**/
// in following code IDE will use $myobject as MyClass 
```

如何使用 PyCharm 和 python 文档实现相同的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:42:21.723

使用`docstring`：

```
def render(someobject):
    """ This methods renders some object. """
    dorender() 
```

更多信息可以在这里找到[http://en.wikipedia.org/wiki/Docstring#Python](http://en.wikipedia.org/wiki/Docstring#Python)

您可以使用*自省*来了解对象的方法、属性等：

```
dir(object)
help(object) 
```

基于自省的自动完成和 IDE 集成是可能的，在 Python.org 网站上有更详细的信息：[http ://wiki.python.org/moin/IntegratedDevelopmentEnvironments](http://wiki.python.org/moin/IntegratedDevelopmentEnvironments)

要找出是什么`someobject`，您可以使用`type`or `isinstance`，请参阅以下伪代码：

```
type(someobject)
if isinstance(someobject, ClassA):
    print "someobject is a ClassA variable" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:49:17.920

我不确定它是否可以在 PyCharm 中工作（我不使用它） - 但是为 Python 3添加了[函数注释](http://www.python.org/dev/peps/pep-3107/)。

您可以将它们放入函数的定义中：

```
def render(someobject :ObjectClass):
    dorender() 
```

也许 PyCharm 将使用它来定义某些对象上可用的方法。

**编辑：**

经过一个小测试，我想这应该可以工作（这非常棒）。

# grails - 创建表失败

> ID：10195397
> 
> 赞同：5
> 
> 时间：2012-04-17T16:41:22.863
> 
> 标签：grails, grails-orm, h2

我正在使用 H2 数据库来测试我的 Grails 应用程序。我有一些简单的域类，例如：

```
package mypackage

class UserSession {
    User user
    String sessionTokenHash

    // last seen info
    String lastSeenIP
    Date lastSeenTime
    String lastSeenUserAgent
    String lastSeenURL
} 
```

但是，该表似乎没有正确创建。

```
hbm2ddl.SchemaExport 不成功：创建表 user_session（id bigint 不为空 auto_increment，版本 bigint 不为空，last_seenip varchar(255) 不为空，last_seen_time 日期时间不为空，last_seenurl varchar(255) 不为空，last_seen_user_agent varchar(255) 不为空，session_token_hash varchar(255) 不为空，user_id bigint 不为空，主键 (id)) ENGINE=InnoDB
hbm2ddl.SchemaExport SQL 语句中的语法错误“CREATE TABLE USER_SESSION (ID BIGINT NOT NULL AUTO_INCREMENT, VERSION BIGINT NOT NULL, LAST_SEENIP VARCHAR(255) NOT NULL, LAST_SEEN_TIME DATETIME NOT NULL, LAST_SEENURL VARCHAR(255) NOT NULL, LAST_SEEN_USER_AGENT VARCHAR(255) NOT NULL, SESSION_TOKEN_HASH VARCHAR(255) NOT NULL, USER_ID BIGINT NOT NULL, PRIMARY KEY (ID)) ENGINE=[*]INNODB "; 预期的“标识符”；SQL 语句：
创建表 user_session（id bigint 不为空 auto_increment，版本 bigint 不为空，last_seenip varchar(255) 不为空，last_seen_time 日期时间不为空，last_seenurl varchar(255) 不为空，last_seen_user_agent varchar(255) 不为空，session_token_hash varchar(255) 不null，user_id bigint 不为 null，主键 (id)) ENGINE=InnoDB [42001-147]
```

`create-drop`它设置为在模式下使用临时内存 H2 数据库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T16:54:00.280

我使用了错误的方言；我的 DataSource.groovy 在 dataSource 块中设置了以下方言：

```
dialect = "org.hibernate.dialect.MySQL5InnoDBDialect" 
```

我为开发数据源添加了以下行：

```
dialect = "org.hibernate.dialect.H2Dialect" 
```

这解决了这个问题。

# xml - 使用 XSLT 转换 XML（以前称为 KML）

> ID：10195399
> 
> 赞同：6
> 
> 时间：2012-04-17T16:41:29.150
> 
> 标签：xml, xslt, kml

您好我正在尝试使用 w3schools XSLT Tryit 编辑器来转换 KML 文件（另存为 XML 文件），但我似乎无法让它工作。这是我的 XML 文件的片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
 <Document>
  <name>Bnsf RR cut</name>
  <open>1</open>
  <Style>
   <ListStyle>
    <ItemIcon>
     <href>kmzicon.png</href>
    </ItemIcon>
   </ListStyle>
  </Style>
  <Folder>
   <name>11/10/11 8:17:20 AM</name>
   <Placemark>
    <name>Track</name>
   </Placemark>
  </Folder>
  <Placemark>
   <name>Gray Mesa</name>
   <description><![CDATA[<img width="800" src="1.jpg"/>]]></description>
   <Point>
    <coordinates>-106.493097,34.446357,1692.000000</coordinates>
   </Point>
  </Placemark>
 </Document>
</kml> 
```

还有我的 XSLT：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
      <xsl:for-each select="Document/Placemark">
        <xsl:value-of select="name"/>
        <xsl:value-of select="description"/>
      </xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

如果我删除 XML 代码中的 kml 标记，它可以正常工作，但我宁愿尝试自动执行此操作，而不必从众多 XML 中删除代码。我尝试将“kml”添加到我的 XSLT 代码“/kml/Document/Placemark"> 但这不起作用。谢谢！

我希望转换后的 XML 看起来像：

```
 <Document> 
  <Placemark>
   <name>Gray Mesa</name>
   <description><![CDATA[<img width="800" src="1.jpg"/>]]></description>
   <Point>
    <coordinates>-106.493097,34.446357,1692.000000</coordinates>
   </Point>
  </Placemark>
 </Document> 
```

我认为这将适用于我的目的。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:kml="http://www.opengis.net/kml/2.2">
   <xsl:template match="/">
  <xsl:for-each select="kml:kml/kml:Document/kml:Placemark">
     <name><xsl:value-of disable-output-escaping="yes" select="kml:name"/></name>
     <description><xsl:value-of disable-output-escaping="yes" select="kml:description"/></description>
  </xsl:for-each>
 </xsl:template> 
```

但是，每个名称和描述标记都包含以下内容： xmlns:kml="http://www.opengis.net/kml/2.2" 不过，我可以将其与 Access 查询连接起来。但是，当我尝试导入 Access 时，我确实遇到了错误。它说我需要一个根文件夹，因为我只有许多名称和描述标签。有没有办法使用 XSL 添加标签。非常感谢你。抱歉，我一直在编辑这个凌乱的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:43:43.210

Tim C 关于命名空间是正确的，但我想补充一点，XSLT 是声明性语言，所以通常当我在样式表中看到 for-each 时，它可以被更适合该语言的东西替换。所以我会使用下面的代码。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:kml="http://www.opengis.net/kml/2.2">
  <xsl:output method="text"/>

   <xsl:template match="/">
      <xsl:apply-templates select="kml:kml/kml:Document/kml:Placemark"/>
   </xsl:template>

   <xsl:template match="kml:Placemark">
         <xsl:value-of select="kml:name"/>
         <xsl:value-of select="kml:description"/>
   </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:17:10.613

这是因为在您的 XML 中有一个默认命名空间

```
<kml xmlns="http://www.opengis.net/kml/2.2" ... 
```

在 XPath 1.0 中，您必须为要使用的每个名称空间指定一个前缀。像**Document/Placemark**这样的路径只会选择没有命名空间中的**Placemark**元素。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:kml="http://www.opengis.net/kml/2.2">
   <xsl:template match="/">
      <xsl:for-each select="kml:kml/kml:Document/kml:Placemark">
         <xsl:value-of select="kml:name"/>
         <xsl:value-of select="kml:description"/>
      </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```

也不是这样做`<xsl:template match="/">`与文档元素匹配，这与文档**kml**的根元素不同。

这是一篇关于默认命名空间的好文章：http: [//www.jenitennison.com/blog/node/36](http://www.jenitennison.com/blog/node/36)

请注意，您可能想要这样做，以输出描述的 CDATA

```
<xsl:value-of select="kml:description" disable-output-escaping="yes"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T15:38:33.110

如果它**只是**您处理的 Kml 中的地标，我会推荐**KMLCSV Converter**。(http://sourceforge.net/projects/kmlcsv/)

**但它不适用于线条或多边形。**

谢谢

谢恩

# android - Android 4.0.3 上的 NetworkOnMainThreadException

> ID：10195402
> 
> 赞同：1
> 
> 时间：2012-04-17T16:41:45.613
> 
> 标签：android, android-4.0-ice-cream-sandwich, intentservice, worker-thread

我有一个意图服务，可以将数据从手机上传到我的服务器。只要网络连接可用，我就从广播接收器启动它。一切正常，但是当我通过 Android 4.0.3 模拟器对其进行测试时，它给出了严格模式错误 android.os.NetworkOnMainThreadException。就像这个网络作业在主线程上一样，但据我所知，intentservice 已经创建了一个工作线程。我也发现了这个链接[http://code.google.com/p/android/issues/detail?id=23495](http://code.google.com/p/android/issues/detail?id=23495)说将网络作业移动到后台线程。工作线程不是后台线程吗？

编辑：这是我的广播接收器。

```
public void onReceive(Context context, Intent intent) {
    final String UploadingItems = "paUploadingItems";
    final String preferencesFileName = "paSettings";

    SharedPreferences sharedPref;   
    String fileQueque;

    if(isNetworkAvailable(context)){        

        sharedPref = context.getSharedPreferences(preferencesFileName,0);
        fileQueque = sharedPref.getString(UploadingItems, "");
        Log.d(TAG, "quque"+fileQueque);
        if(fileQueque.length() > 0){

                Intent intentUpdater = new Intent(context, updaterService.class);               
                intentUpdater.putExtra("processMode", 6);
                intentUpdater.putExtra("fileq", fileQueque.toString());
                context.startService(intentUpdater);

            }
    }       

}

private boolean isNetworkAvailable(Context context){
    ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();     
    Log.d(TAG, activeNetworkInfo.getTypeName());
    return (activeNetworkInfo != null && activeNetworkInfo.isAvailable() && activeNetworkInfo.isConnected());       

} 
```

这是我在 LogCat 中看到的错误：

```
04-17 15:28:58.114: E/AndroidRuntime(574): FATAL EXCEPTION: main
04-17 15:28:58.114: E/AndroidRuntime(574): java.lang.RuntimeException: Unable to start     receiver org.test.dairy.OnNetworkReceiver: android.os.NetworkOnMainThreadException
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2126)
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.os.Looper.loop(Looper.java:137)
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-17 15:28:58.114: E/AndroidRuntime(574):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 15:28:58.114: E/AndroidRuntime(574):  at java.lang.reflect.Method.invoke(Method.java:511)
04-17 15:28:58.114: E/AndroidRuntime(574):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-17 15:28:58.114: E/AndroidRuntime(574):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-17 15:28:58.114: E/AndroidRuntime(574):  at dalvik.system.NativeStart.main(Native Method)
04-17 15:28:58.114: E/AndroidRuntime(574): Caused by: android.os.NetworkOnMainThreadException
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
04-17 15:28:58.114: E/AndroidRuntime(574):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
04-17 15:28:58.114: E/AndroidRuntime(574):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
04-17 15:28:58.114: E/AndroidRuntime(574):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
04-17 15:28:58.114: E/AndroidRuntime(574):  at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
04-17 15:28:58.114: E/AndroidRuntime(574):  at org.test.dairy.OnNetworkReceiver.transferData(OnNetworkReceiver.java:101)
04-17 15:28:58.114: E/AndroidRuntime(574):  at   org.test.dairy.OnNetworkReceiver.onReceive(OnNetworkReceiver.java:57)
04-17 15:28:58.114: E/AndroidRuntime(574):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2119)
04-17 15:28:58.114: E/AndroidRuntime(574):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:17:42.990

您的 isNetworkAvailable() 方法检查主 UI 线程上的网络 I/O，并且 Android 认为该阻塞。我只会触发对 IntentService 的请求，而不检查 Activity 中的连接性，让 IntentService 抛出异常并在无法建立连接时向 Activity 报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:21:42.990

将代码移动到 IntentService。广播接收器的 onReceive 方法在 UI 线程上运行，网络代码导致它崩溃。只需将意图重定向到 IntentService 就可以了。

这也使代码更简单。接收器并不真正意味着执行复杂的逻辑，它们将消息从系统重定向到您的应用程序。服务意味着在后台做繁重的工作。

# excel - Excel-在列中添加数字，因为它们是正数，并且它们与一行中的值相关联

> ID：10195404
> 
> 赞同：4
> 
> 时间：2012-04-17T16:41:55.053
> 
> 标签：excel, vba

可能很复杂，所以让我给你一些背景：

我有一个包含以下数据的电子表格：

1.  H 列包含从 1794 年到 2011 年的日期（在“H”内，该日期的每个立法者的每个日期都有多个副本）
2.  Q 列包含范围从 -1 到 1 的分数 我想计算 H 列中每个日期在 Q 列中的平均“正”值，然后打印出来。

例如：

```
1794: Average Positive Value : .65, Average Negative:  -.20
1795: Average Positive Value: .75, Average Negative: -.11 
```

我试图四处搜索以弄清楚如何做到这一点，但我不知道相关的搜索词。将不胜感激一些帮助。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:57:43.383

这里我们使用 ARRAY 公式的简单方法。请看快照

```
=IFERROR(AVERAGE(IF(($H$1:$H$7=K10)*($Q$1:$Q$7>0),$Q$1:$Q$7)),"") 
```

您必须使用 CTL + SHIFT + ENTER 输入

![在此处输入图像描述](../Images/f72f49426a183c8d11a379c3a06b87ba.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T18:53:22.873

没有数组公式的解决方案是使用`SUMPRODUCT`.

```
=SUMPRODUCT(--(H1:H7=K10),--(Q1:Q7>0),Q1:Q7)/SUMPRODUCT(--(H1:H7=K10),--(Q1:Q7>0)) 
```

我用 SUMPRODUCT 撕掉了下面显示的 Siddharth 的示例。

![在此处输入图像描述](../Images/f637763bd9d1fb3f0c1322af14e12b4b.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T17:58:36.537

您应该可以为此使用 SUMIFS/COUNTIFS。

对于正值：

```
=sumifs(Q:Q,H:H,1794,Q:Q,">0")/countifs(H:H,1794,Q:Q,">0") 
```

对于负值：

```
=sumifs(Q:Q,H:H,1794,Q:Q,"<0")/countifs(H:H,1794,Q:Q,"<0") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:47:31.643

这可能被认为是一种 hack，但您可以只使用一些隐藏列，每个数据点都有一个复制的 IF 公式。为了显示：

添加另一个具有 IF(Q > 0, Q, 0) 的列 A 添加另一个具有 IF(Q > 0, 1, 0) 的列 B 添加另一个具有 IF(Q < 0, Q, 0) 的列 C 添加另一个具有 IF(Q < 0, 1, 0) 的 D 列

然后，要确定平均值，您可以分别简单地执行 SUM(A) / SUM(B) 和 SUM(C) / SUM(D)，因为它是总值除以真实出现的次数。

# c# - 使用应用程序属性将文本框字符串传递给自定义控件

> ID：10195405
> 
> 赞同：1
> 
> 时间：2012-04-17T16:41:55.070
> 
> 标签：c#, wpf, custom-controls

如果我使用它从我的主窗口传递一个字符串**到**我的自定义控件，那么我将如何在我的自定义控件中捕获它？

```
 private void btnGeneral_Click(object sender, RoutedEventArgs e)
    {
        string myText = (string)Application.Current.Properties[textBox1.Text];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:44:15.350

你就是这样做的：

```
//To Set:    
App.Current.Properties["TextBoxString"] = textBox1.Text;
//To Get:
string myProperty = (string) App.Current.Properties["TextBoxString"]; 
```

查看这篇文章，了解[在 WPF 应用程序中访问 Application 对象](http://robrelyea.wordpress.com/2006/09/07/accessing-the-application-object-in-a-wpf-application/)

# php - PHP rand() 建议

> ID：10195408
> 
> 赞同：0
> 
> 时间：2012-04-17T16:42:07.890
> 
> 标签：php

我正在使用以下代码

```
$wID=rand(2, 4); 
```

要生成从 2 到 4 的数字，如何生成从 2 开始但没有最大值的数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:44:40.277

使用[mt_rand](http://us.php.net/manual/en/function.mt-rand.php)（更好）。

> 如何生成从 2 开始但没有最大值的数字？

没有计算机可以产生无限的数字集。

如果您`mt_rand`不带参数调用，它将返回一个介于`0`和[mt_getrandmax()](http://us.php.net/manual/en/function.mt-getrandmax.php)值之间的数字。所以，如果你愿意，你可以这样做：

```
$wID = mt_rand() + 2; 
```

或者：

```
$wID = mt_rand(2, mt_getrandmax()); 
```

或者只是输入您选择的非常高的最大值。

# iphone - iOS - 尝试播放 mp3 文件失败

> ID：10195410
> 
> 赞同：2
> 
> 时间：2012-04-17T16:42:20.263
> 
> 标签：iphone, ios, ipad, audio, avaudioplayer

我正在尝试从我的应用程序中从我的服务器检索播放和 mp3 文件，执行以下操作：

```
- (IBAction)play:(UIButton *)sender {
    dispatch_queue_t downloadQueue = dispatch_queue_create("audio data downloader", NULL);
    dispatch_async(downloadQueue, ^{
        NSURL *audioURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@/%@.mp3", FONYK_FILES_URL, [self.voicenote valueForKeyPath:@"Fonyker.fonykid"], [self.voicenote valueForKeyPath:@"Voicenote.vnid"]]];
        NSData *audioData = [NSData dataWithContentsOfURL:audioURL];

        dispatch_async(dispatch_get_main_queue(), ^{
            NSError *error = nil;
            AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:audioData error:&error];
            NSLog(@"%@", error);
            audioPlayer.delegate = self;
            [audioPlayer play]; 
        });
    });
} 
```

播放失败，这意味着没有声音发出，我在逐步调试我的应用程序时得到这个输出：

```
Catchpoint 2 (exception thrown).Single stepping until exit from function __cxa_throw, which has no line number information. 
```

当我在模拟器中对错误进行 NSLog 记录时，就会出现这种情况：

```
Error Domain=NSOSStatusErrorDomain Code=-50 "The operation couldn’t be completed. (OSStatus error -50.)" 
```

没有其他任何迹象表明它只是失败了，有什么想法吗？

**更新：**根据 J_D 的回答修改了我的代码，并在模拟器中得到了这个：

```
Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-04-17 15:03:43.054 Fonyk[8238:15307] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

**更新：**我遇到的真正问题不是在我的代码中创建和 AVAudioSession 实例设置为播放，这样做与我接受的更正答案一起使它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:47:57.903

我发现您的代码至少有一个问题，如下所示

```
NSURL *fileURL = [NSURL URLWithString:filePath]; 
```

它尝试使用本地文件路径创建 URL。它可能会返回零。您应该改用：

```
NSURL *fileURL = [NSURL fileURLWithPath:filePath]; 
```

现在，即使这样，您的代码也无法运行（我尝试过并得到与您相同的错误）。我自己并没有经常使用 AVAudioPlayer，所以我不知道为什么会发生您的特定错误。

但是，我确实使用您的代码尝试了一个非常小的示例，并且能够正确播放 MP3。您可以使用 AVAudioPlayer 的 initWithData 构造函数，而不是将数据下载到文件并从文件加载 AVAudioPlayer：

```
AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:[NSData dataWithContentsOfURL:audioURL] error:&error]; 
```

假设 audioURL 有效，这对我来说效果很好。我指着我的服务器上的一个 mp4 进行测试。

所以用这个 initWithData 重写你的代码会给出：

```
- (IBAction)play:(UIButton *)sender {
    dispatch_queue_t downloadQueue = dispatch_queue_create("audio data downloader", NULL);
    dispatch_async(downloadQueue, ^{
        NSURL *audioURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@/%@.mp3", FONYK_FILES_URL, [self.voicenote valueForKeyPath:@"Fonyker.fonykid"], [self.voicenote valueForKeyPath:@"Voicenote.vnid"]]];
        NSData *audioData = [NSData dataWithContentsOfURL:audioURL];

        dispatch_async(dispatch_get_main_queue(), ^{
            NSError *error = nil;
            AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithData:audioData error:&error];
            NSLog(@"%@", error);
            audioPlayer.delegate = self;
            [audioPlayer play]; 
        });
    });
} 
```

最后一点：您在开始播放之前下载整个文件，这可能需要一段时间并消耗大量堆（如果您要将其保存在文件中，则可能会占用存储空间）

如果要流式传输，可以使用 MPMoviePlayerController，但不要将视图附加到视图层次结构。这样，您将只有音频，不会更改应用程序的任何视觉效果。

一个例子是：

```
NSURL *audioURL = [NSURL URLWithString:@"MY_MP3_URL"];
MPMoviePlayerController* player = [[MPMoviePlayerController alloc] initWithContentURL:audioURL];
[player play]; 
```

同样，在我这边，在模拟器中，它工作正常。

不要忘记释放播放器。您还可以为重要通知注册代表。

此处的详细信息：http: [//developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:51:15.243

您在某处收到 EXC_BAD_ACCESS。我建议删除所有异步代码并看看会发生什么。实际上，就异步调用而言，我对您的思考过程有些困惑。

请注意，AVAudioPlayer 仅适用于 LOCAL 文件。似乎您可能正在将其设置为播放来自服务器的音频文件，但这是行不通的。

另外，你为什么不尝试 NSLog 错误变量？

# jsf - Facelets标签用于隐藏输入？

> ID：10195413
> 
> 赞同：0
> 
> 时间：2012-04-17T16:42:38.683
> 
> 标签：jsf, input, tags, hidden

有一个 Facelets 标签用于`<input type="text">`：

```
<h:inputText /> 
```

是否有 Facelets 标签`<input type="hidden">`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:51:10.720

有[`<h:inputHidden>`](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/inputHidden.html)（请为[标签文档添加](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)书签，它显示了所有可用的标签）。

```
<h:inputHidden value="#{bean.input}" /> 
```

根据具体的功能要求，这可能不是您想要的。例如，这不允许您添加额外的请求参数或其他内容。为此，您应该`<f:param>`在命令组件中使用。或者，如果您只想在后续的 POST 请求中保留 bean 属性，而是将 bean 放在视图范围内。

# c++ - 通过为每个字母分配（新）值，在简单加密中使用数组

> ID：10195414
> 
> 赞同：0
> 
> 时间：2012-04-17T16:42:51.290
> 
> 标签：c++, arrays, character-arrays

所以或多或少我正在尝试用 C++ 编写一个简单的加密/解密程序。现在我已经编写了大部分其他基本功能。虽然，我不确定如何将数组完全集成到我想要它做的事情中。

这是我在 C++ 中的第一个程序，所以请多多包涵。

基本上，我希望用户输入一组字符 a 到 z 和 A 到 Z 我想使用一个数组来为每个字母分配一个值，IE referenceArray[] = {'a', 'b', 'c', 。 .. 'A', 'B', 'C'} 其中每个字符都保存它们在数组中的位置值 a = 0, b = 1 等。所以当用户输入短语 entArray[] 时，它回显该短语以进行验证，然后使用公式 51 - (theValueOf_enteredArray[0]) 其中 51 是最大值，即 theValueOf_entArray[0] 基于在 referenceArray[] 中分配的值，然后我希望它循环并重复此操作enterArray 中下一个字符的操作。

所以基本上只是为了澄清我想要的输出是什么，如果 a = 0 和 Z = 51

用户输入：abcdeA 输出为：ZYXWVz

如果有人能帮忙，我可以把我现在拥有的东西发给你，但就像我说的那样，这是我必须拥有的程序的所有其他部分，这是最后一部分，真的让我难过，真的只是所涉及的数学语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:00:57.727

您可以遍历条目数组，一旦知道当前字母的索引，就对其应用转换：

```
for (int i=0; i<SIZE && entArray[i] != '\0'; ++i) {
  char letter = entArray[i];
  char transformedChar = letter;
  int entIdx = getIndex(letter);
  if (entIdx >= 0) {
    int transformedIdx = 51 - entIdx;
    transformedChar = referenceArray[transformedIdx];
  }
  cout << transformedChar;
} 
```

`SIZE`的大小在哪里`entArray`。您可能还想对 51 使用命名常量。

这里我们首先假设当前字母不能被变换（entIdx < 0），如果这个假设不成立，应用变换并得到变换位置处的字母

要获取参考数组中字母的索引：

```
int getIndex(char letter) {
  for (int i=0; i < 51; ++i) {
    if (referenceArray[i] == letter) {
      return i;
    }
  }
  // could not find the letter (e.g. space):
  return -1;
} 
```

注意：您可能还想创建和填充从字母到索引的映射，以使查找更容易——`map<char, int>`例如，您可以使用

# android - 是否可以在静态上下文块中获取资源？

> ID：10195417
> 
> 赞同：14
> 
> 时间：2012-04-17T16:43:08.027
> 
> 标签：android, resources, static

我想创建一个**静态**哈希表来将*字符串*转换为*整数*。这里需要注意的是，我想在**XML 文件**的几个列表中使用我定义为**资源的***字符串*。

 ****我可以写这个，只使用资源 ID：

```
public class MyActivity extends Activity {

private static Map<Integer, Integer> views = new HashMap<Integer, Integer>();
static {
    views.put(R.string.full_text, MessageTable.VIEW_FULL);
    views.put(R.string.only_text, MessageTable.VIEW_MSG);
    views.put(R.string.tag_text, MessageTable.VIEW_TAGMSG);
} 
```

我没有收到任何错误，但我真正需要做的是这样的事情：

```
public class MyActivity extends Activity {

private static Map<String, Integer> views = new HashMap<String, Integer>();
static {
    views.put(getResources().getString(R.string.full_text), MessageTable.VIEW_FULL);
    views.put(getResources().getString(R.string.only_text), MessageTable.VIEW_MSG);
    views.put(getResources().getString(R.string.tag_text), MessageTable.VIEW_TAGMSG);
} 
```

这给了我在 Eclipse 中的以下错误：

```
Cannot make a static reference to the non-static method getResources() from the type ContextWrapper 
```

该消息是有道理的，但没有意义的是静态块无法访问资源，人们会认为静态变量是自定义创建的以利用资源。
我想我可以在对象构造函数期间填充哈希表，但这意味着在错误的地方进行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T16:55:14.073

`getResources()`（简称 ~ `MyActivity.this.getResources()`）需要一个当时未初始化的上下文对象。由于上下文仅在您点击后才可用，您`onCreate`甚至无法在`MyActivity`.

原因是实例化您的`MyActivity`类的活动管理器必须在知道必须从 xml 中提取哪些资源之前确定配置（方向、屏幕大小、语言……）。-> 资源不是静态的，不能从静态上下文中访问。

`onCreate`所以我想在以后或以后做这些操作是没有办法的。

编辑：虽然您当然可以更新静态 HashMap （或 static `Context`），`onCreate`但我不建议这样做，因为您可以拥有相同 Activity 的多个实例，但配置可能不同/更改。存储静态`Context`也是创建[内存泄漏的好方法](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-07T10:32:10.793

```
public Static Resources mResources;
public MyApplication extends Application
{
     @Override
     public void onCreate()
     {
           mResources = getResources();
     }

} 
```

一旦获得对资源的静态引用，就可以在整个应用程序的任何位置引用它。但是我不确定这是否会引入内存泄漏；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:09:39.377

您可以做的一件事是创建一个[`Application`](http://developer.android.com/reference/android/app/Application.html)类并将其注册到您的 AndroidManifest.xml 中。然后重写 onCreate 方法并将 Application 类设置为静态引用，然后触摸 Activity 类以运行静态初始化程序。该类`Application`将在 apk 加载到内存时运行，因此它将始终在任何`Activity`.

这有一些明显的缺点。我想到的最明显的一个是系统语言是否发生了变化，并且您已经为这些资源添加了翻译；那么您将有不一致的字符串，因为应用程序将使用默认/启动应用程序时的任何语言。字符串资源受 Android 资源管理系统的影响，因此方向、系统语言、屏幕尺寸等内容的更改会影响这些值。这就是活动在何时重置的原因

*简而言之，你最好使用常量字符串键值对来完成这项工作。如果您需要使用字符串资源，以便更好地处理翻译。每次活动开始时我都会加载它们。否则，您将面临内存泄漏和不一致的字符串翻译的风险。*

```
public MyApplication extends Application {

  public static Context GlobalContext = null;

  @Override
  protected void onCreate() {
    MyApplication.GlobalContext = this;

    // Touch the activity class.
    MyActivity activity = new MyActivity();
    // Throw it away by not using it.

    // invalidate handle to prevent GC leaks.
    GlobalContext = null;
  }
}

public class MyActivity extends Activity {
  private static Map<String, Integer> views = new HashMap<String, Integer>();

  static {
    Context context = MyApplication.GlobalContext;
    Resources res = context.getResources();
    views.put(res.getString(R.string.full_text), MessageTable.VIEW_FULL);
    views.put(res.getString(R.string.only_text), MessageTable.VIEW_MSG);
    views.put(res.getString(R.string.tag_text), MessageTable.VIEW_TAGMSG);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:57:52.837

您始终可以保留对 ApplicationContext 的静态引用。此处描述了一种可能的方法：[Static way to get 'Context' on Android?](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T16:58:01.340

我不知道最好的方法是什么，但是，例如，在我的应用程序中，我有一个 Singleton（称为 GuiaUtil），它可以保留我当前的 Activity 和 Context。

```
private static Map<String, Integer> views = new HashMap<String, Integer>();
static {
views.put(GuiaUtil.instance().getAppContext().getResources().getString(R.string.full_text), MessageTable.VIEW_FULL);
views.put(GuiaUtil.instance().getAppContext().getResources().getString(R.string.only_text), MessageTable.VIEW_MSG);
views.put(GuiaUtil.instance().getAppContext().getResources().getString(R.string.tag_text), MessageTable.VIEW_TAGMSG);
} 
```****

# java - 如何将 JColorChooser 添加到内容窗格/Jpanel？

> ID：10195419
> 
> 赞同：1
> 
> 时间：2012-04-17T16:43:15.037
> 
> 标签：java, swing

对于我正在制作的简单绘图程序（作为作业的一部分），我正在尝试将 JColorChooser 添加到面板或直接添加到主内容窗格中。

我试图找到使用 JColorChooser 的代码示例（例如[http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)），但我似乎无法让它工作。

相关代码：

```
import java.awt.BorderLayout;
import javax.swing.JColorChooser;
import javax.swing.JFrame;
import javax.swing.colorchooser.ColorSelectionModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class test extends JFrame 
{

JColorChooser jcc;
ColorSelectionModel model = jcc.getSelectionModel();

public test()
{
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setLocation(100,100);
    this.setSize(900,600);

    getContentPane().add(jcc, BorderLayout.CENTER);

    model.addChangeListener(new ChangeListener() 
    {
    public void stateChanged(ChangeEvent e) {
      System.out.println("Color: " + jcc.getColor());
    }

  });

}

public static void main(String[] args) 
{

    test m=new test();

}

} 
```

我正在使用 eclipse，它不会在我的代码中返回任何错误（红线），但是一旦我尝试运行它，我就会明白这一点：

```
Exception in thread "main" java.lang.NullPointerException
at test.<init>(test.java:14) --> this is "ColorSelectionModel model = jcc.getSelectionModel();"
at test.main(test.java:38) --> this is "test m=new test();" 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:04:26.917

看起来`jcc`从未初始化过。

```
JColorChooser jcc = new JColorChooser(); 
```

和几个指针。Java 类名应按约定大写，根据教授的挑剔程度，您需要在摆动线程（事件调度线程）上显示 JFrame。无论如何，您都应该[这样做](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)以获得良好的 GUI 线程处理。

```
public static void main(String[] args) 
{
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            Test test = new Test();
            test.setVisible(true);
        }
}); 
```

# php - Doctrine2 两个实体的多重关系

> ID：10195420
> 
> 赞同：1
> 
> 时间：2012-04-17T16:43:25.123
> 
> 标签：php, orm, doctrine-orm

我们正在使用 Doctrine v2.2.1。使用 YML 定义的实体。

在这里，我有 2 个实体通过给定的关联相互引用；

```
entities\User:
  type: entity
  table: user
  oneToMany:
    subjectNews:
      targetEntity: entities\News
      mappedBy: subjectUser
      cascade: ["all"]
    actionNews:
      targetEntity: entities\News
      mappedBy: actionUser
      cascade: ["all"]

entities\News:
  type: entity
  table: news
  manyToOne:
    subjectUser:
      targetEntity: entities\User
      cascade: ["all"]
      nullable: true
    actionUser:
      targetEntity: entities\User
      cascade: ["all"]
      nullable: true 
```

当我根据这些定义生成实体类时，我在我的实体\用户 php 类中得到了一个意想不到的结果。这就像;

```
 /**
  * Add subjectNews
  *
  * @param entities\News $subjectNews
  * @return User
  */
 public function addNews(\entities\News $subjectNews)
 {
     $this->subjectNews[] = $subjectNews;
     return $this;
 } 
```

我的实体中的 setter 方法按预期生成。但是实体\用户的添加方法没有按预期生成。

难道我做错了什么？或者有什么解决方法吗？还是与[Doctrine2 的限制和已知问题文档中提到的问题有关](http://readthedocs.org/docs/doctrine-orm/en/latest/reference/limitations-and-known-issues.html#mapping-many-tables-to-one-entity)？

和平

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:03:56.070

这也是我在使用 Doctrine ORM 时遇到的问题之一。尽管我不知道一个优雅的解决方案，但我知道您可以使用 get 方法来获取 ORM 集合并添加您想要的实体。一个例子是，

```
$actionNews = $user->getActionNews();
$actionNews[] = new entities\News(); 
```

或者对于`subjectNews`

```
$subjectNews = $user->getSubjectNews();
$subjectNews[] = new entities\News(); 
```

希望这可以帮助..

# instantiationexception - 无法实例化活动：android

> ID：10195421
> 
> 赞同：0
> 
> 时间：2012-04-17T16:43:37.547
> 
> 标签：instantiationexception

> 谁能告诉我发生了什么，我一直收到这个错误。
> 返回 (349)：java.lang.RuntimeException：无法实例化活动 ComponentInfo{uk.ac.surrey.ms00367/uk.ac.surrey.ms00367.Panel}：java.lang.InstantiationException：uk.ac.surrey.ms00367。面板返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:45:33.063

当程序尝试访问无法从进行引用的位置访问的构造函数时，将引发此错误。

# java - Integer.class 和 Integer.TYPE 的区别

> ID：10195424
> 
> 赞同：1
> 
> 时间：2012-04-17T16:43:46.707
> 
> 标签：java

这两者有什么区别？原始类型不能有“类”，可以吗 - 它是原始的。没有对象可以拥有一个类。

这两者有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:45:30.473

我不肯定你的意思，但是 -`Class`对象是一种类型的运行时代表。也就是说，即使不是一个类，也有一个与`int.class`不同的东西。这有点复杂，但有必要让反射在接受原始参数或返回原始值的方法上工作，或者区分接受 an的方法和接受.`Integer.class``int``Integer``int`

`Integer.TYPE`，我相信，等价于`int.class`。

# mysql - 如何在使用 Rails find 语句计数时按唯一属性排序？

> ID：10195426
> 
> 赞同：0
> 
> 时间：2012-04-17T16:44:06.107
> 
> 标签：mysql, sql, ruby-on-rails, ruby-on-rails-3, activerecord

我创建了一个可以在 Rails 中销售音乐的网站。我想根据他们的音乐销量返回本周最受欢迎的艺术家。下面是模型关系的简要概述。

# 楷模

```
# Artist
attr_accessible :name, :website etc.

has_many :songs, :through => :artist_song
has_many :artist_song

# Cart

attr_accessible :purchased_at, :user_id, :id, :songs, :cart_song

has_many :songs, :through => :cart_song
has_many :cart_song

# Song

has_many :carts, :through => :cart_song
has_many :cart_song

has_many :artists, :through => :artist_song
has_many :artist_song 
```

我可以使用下面的代码检索过去“x”天所有售出的歌曲，但不确定如何在这些结果中实现分组或计数。

```
Song.find(:all, :conditions => ['carts.purchased_at IS NOT NULL AND carts.purchased_at >= ?', 7.days.ago.at_midnight], :include => :carts) 
```

我猜你会通过一个独特的属性进行某种形式的分组或计数，但我有点卡在这里，所以任何帮助都会非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:07:25.137

```
Song.select('?').where(
  'carts.purchased_at IS NOT NULL AND carts.purchased_at >= ?',
  7.days.ago.at_midnight
  ).includes(:carts).group('?') 
```

在哪里 ？是您要分组的一些属性。您最终会为每个组返回一条记录。

# mysql - mysql如何确定删除时要做什么？级联，限制？

> ID：10195428
> 
> 赞同：0
> 
> 时间：2012-04-17T16:44:08.057
> 
> 标签：mysql, innodb, foreign-key-relationship

我知道如何检测外部表、外部字段、引用。但我不知道该怎么办，`CASCADE`或者`SET TO NULL`。描述表也不会返回此信息`information_schema`。那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:47:35.167

您应该能够使用该`SHOW CREATE TABLE`命令查看所有内容（所有字段、它们的类型、外键等）

如果您以编程方式使用数据，则可以使用和列从`INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS`表中查询它`UPDATE_RULE``DELETE_RULE`

# javascript - 无法读取 null 的属性“nodeValue”

> ID：10195429
> 
> 赞同：2
> 
> 时间：2012-04-17T16:44:08.070
> 
> 标签：javascript, xml, nodes

我有 XML：

```
<street></street> 
```

或者

```
<street>2813 Bla ave</street> 
```

Javascript：

```
if ((xmldoc.getElementsByTagName('street')[i].firstChild.nodeValue != null)) {
                 alert(1);
                 }
                 alert(2); 
```

但脚本不起作用 - 无法读取 null 的属性“nodeValue”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:46:35.090

`nodeValue`永远不会，`null`因为没有值，节点就不会存在。

`.nodeValue`从您的代码中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:47:16.250

你的选择器失败了，

```
 xmldoc.getElementsByTagName('street')[i].firstChild 
```

似乎返回 null。您是否尝试过记录并检查以确保您想要的选择器确实存在？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:48:43.340

街道节点没有任何子节点。你需要删除`.firstChild`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:50:28.193

使用 xmldoc.getElementsByTagName('street')[i].innerHTML 因为你想要的文本在标签之间。我相信这支持 XML。当然，您也可以始终使用 nodeValue 属性。

# c# - 如何调用代码以在线程中使用

> ID：10195433
> 
> 赞同：1
> 
> 时间：2012-04-17T16:44:19.760
> 
> 标签：c#, multithreading, combobox, invoke

嗨，我想将下面的代码用于线程。我有一些用于调用的示例代码，但是当涉及到我的组合框选定项将变为字符串时，我不知道该怎么做。

这就是我所拥有的：

```
//My code
string cb1 = comboBox1.Items[comboBox1.SelectedIndex].ToString();

//Example 1
textBox2.Invoke((Action)(() => textBox2.Text = ""));

//Example 2
textbox2.Invoke((MethodInvoker)(delegate()
{
    //do something
})); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:38:49.040

如果你想`Example 1`使用这个（使用`Func<string>`委托而不是`Action`委托），请尝试这个：

```
string cb1 = comboBox1.Invoke((Func<string>) (() => comboBox1.Items[comboBox1.SelectedIndex].ToString())) as string; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:49:17.227

```
string newValue = "hi there";

if (textBox.InvokeRequired)
    textBox.Invoke((MethodInvoker)delegate { textBox.Text = newValue; });
else
    textBox.Text = newValue; 
```

对于有问题的特定代码，我们可以这样做

```
MethodInvoker mi = delegate
{
     string cb1 = comboBox1.Items[comboBox1.SelectedIndex].ToString();
};
if (InvokeRequired)
   this.BeginInvoke(mi);
else
   mi.Invoke(); 
```

# ruby - 在 ActiveRecord Ruby 中使用带有序列化数组的数组函数

> ID：10195434
> 
> 赞同：0
> 
> 时间：2012-04-17T16:44:23.207
> 
> 标签：ruby, activerecord

我有一个序列化数组

```
class Enviroment < ActiveRecord::Base
serialize :roles, Array

...
t.column :roles, :string, :default=> Array.new 
```

我想做这样的事情

```
Enviroment.find(1).roles.push 'thing' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:10:43.453

提供这样的默认值会将其 YAML 表示形式作为字符串保存到数据库中，Rails 会将其反序列化回字符串。这就是为什么它不起作用。

此外，也许您想`text`用作列类型，这样您的数组就不会在它变长时被截断。在最近的 Rails 语法中，这将是：

```
t.text :roles 
```

当您想将新角色存储到数据库中时，您必须在之后保存对象（与`has_many`自动保存 b/c 的关联相反，它的键在*另一个*表中）：

```
e = Environment.find(1)
e.roles.push 'thing'
e.save 
```

或者，如果它绝对需要是 oneliner：

```
Environment.find(1).tap{|e| e.roles.push 'things'}.save 
```

# php - 如何使用 PHP 获取 XML 文件根节点的挂钩？

> ID：10195443
> 
> 赞同：1
> 
> 时间：2012-04-17T16:44:46.683
> 
> 标签：php, xml

我有以下 XML 文件（如下），我想获取根节点名称的挂钩。

我尝试了以下方法：

```
$config = simplexml_load_string($xml_data);
echo $config->getName(); 
```

哪个回声不算什么。我也迭代了结果，但它从根节点的子节点开始

```
foreach($config as $key => $value)
{
    echo $key;
}
// echo's ReturnStatus, SearchURL and PropertyResults 
```

我只想要根节点“SearchResponse”的名称。我似乎在 SimpleXMLElement 类文档中找不到任何可以帮助[http://www.php.net/manual/en/class.simplexmlelement.php](http://www.php.net/manual/en/class.simplexmlelement.php)

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<SearchResponse>
  <ReturnStatus>
    <Success>
        <data>true</data>
        <data2>true</data2>
    </Success>
    <Success>
        <data>false</data>
        <data2>true</data2>
    </Success>
    <Exception />
  </ReturnStatus>
  <SearchURL />
  <PropertyResults>
    <PropertyResult>
      <PropertyID>1468830</PropertyID>
      <PropertyName>Sands Acapulco</PropertyName>
    </PropertyResult>
    <PropertyResult>
      <PropertyID>1353302</PropertyID>
      <PropertyName>Acapulco Turquesa</PropertyName>
    </PropertyResult>
    <PropertyResult>
      <PropertyID>4521565</PropertyID>
      <PropertyName>Almaria Delsonto</PropertyName>
    </PropertyResult>   
  </PropertyResults>
</SearchResponse> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:49:04.217

这确实有效：

```
$config = simplexml_load_string($xml);
echo $config->getName(); 
```

使用您提供的 XML 进行测试，输出：

```
SearchResponse 
```

你写它是行不通的，所以问题可能不在于 API。

# android - dalvik VM VFY 代码的含义

> ID：10195445
> 
> 赞同：6
> 
> 时间：2012-04-17T16:45:05.477
> 
> 标签：android, dalvik

运行我的Android应用程序时，有人可以向我解释以下警告的含义（警告按给定的顺序输出）：

```
04-17 15:29:11.693: I/dalvikvm(4442): DexOpt: access denied from Lcom/kirona/iclient/db/core/services/impl/MiscDatabaseModuleDaoImpl; to field Lcom/kirona/iclient/database/common/impl/AbstractDatabaseModuleDao;.logger
04-17 15:29:11.653: W/dalvikvm(4442): VFY: unable to resolve static field 30 (logger) in Lcom/kirona/iclient/db/core/services/impl/MiscDatabaseModuleDaoImpl;
04-17 15:29:11.653: D/dalvikvm(4442): VFY: replacing opcode 0x62 at 0x0001    
04-17 15:29:11.693: D/dalvikvm(4442): VFY: dead code 0x0046-006e in Lcom/kirona/iclient/db/core/services/impl/MiscDatabaseModuleDaoImpl;.getSequenceNextVal (Ljava/lang/String;)J 
```

该应用程序似乎运行良好，但我需要了解这个问题，因为我们有更复杂的应用程序具有类似的错误，导致 dalvikvm 崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:17:38.760

问题似乎是`MiscDatabaseModuleDaoImpl`该类正在尝试访问该`AbstractDatabaseModuleDao.logger`字段，但由于访问限制（即私有、受保护等）而无法访问。在这种情况下，正在访问该字段的 sget-object 操作码（操作码 0x62）被替换为引发验证异常的操作码，如果执行这可能会导致运行时崩溃。

此外，最后一条消息指的是`MiscDatabaseModuleDaoImpl.getSequenceNextVal`方法中的死代码。这是无害的——它不会在运行时引起任何问题。但是，找出死代码是什么并删除它并不是一个坏主意。您可以使用带有 --code-offsets 选项的 baksmali 反汇编您的应用程序，然后查看该方法的反汇编。--code-offsets 选项将在每条包含偏移量的指令之前添加注释。根据错误消息，从 0x46 到 0x6e 的偏移量是死代码。附近还应该有`.line`指令，这些指令将是原始 java 文件中的相应行号。

# sql - 带有 3 个表的 SQL 内连接？

> ID：10195451
> 
> 赞同：373
> 
> 时间：2012-04-17T16:45:29.507
> 
> 标签：sql, join, inner-join

我正在尝试在一个视图中加入 3 个表；情况如下：

我有一张表格，其中包含申请住在这所大学校园的学生的信息。我有另一个表格，列出了每个学生的 Hall Preferences（其中 3 个）。但是这些偏好中的每一个都只是一个ID号，并且ID号在第三张表中有对应的Hall Name（不是设计这个数据库......）。

几乎，我有`INNER JOIN`他们的偏好和他们的信息，结果就像......

```
 John Doe | 923423 | Incoming Student | 005 
```

`005`会在哪里`HallID`。所以现在我想将它`HallID`与第三个表匹配，该表包含一个`HallID`和`HallName`。

非常多，我希望我的结果像......

```
 John Doe | 923423 | Incoming Student | Foley Hall <---(INSTEAD OF 005) 
```

这是我目前拥有的：

```
SELECT
  s.StudentID, s.FName, 
  s.LName, s.Gender, s.BirthDate, s.Email, 
  r.HallPref1, r.HallPref2, r.HallPref3
FROM
  dbo.StudentSignUp AS s 
  INNER JOIN RoomSignUp.dbo.Incoming_Applications_Current AS r 
    ON s.StudentID = r.StudentID 
  INNER JOIN HallData.dbo.Halls AS h 
    ON r.HallPref1 = h.HallID 
```

* * *

## 回答 #1

> 赞同：551
> 
> 时间：2012-04-17T16:59:23.410

您可以执行以下操作（我猜是表格字段等）

```
SELECT s.studentname
    , s.studentid
    , s.studentdesc
    , h.hallname
FROM students s
INNER JOIN hallprefs hp
    on s.studentid = hp.studentid
INNER JOIN halls h
    on hp.hallid = h.hallid 
```

根据您对多个大厅的要求，您可以这样做。您只需为每个房间 pref id 多次加入 Hall 表：

```
SELECT     s.StudentID
    , s.FName
    , s.LName
    , s.Gender
    , s.BirthDate
    , s.Email
    , r.HallPref1
    , h1.hallName as Pref1HallName
    , r.HallPref2 
    , h2.hallName as Pref2HallName
    , r.HallPref3
    , h3.hallName as Pref3HallName
FROM  dbo.StudentSignUp AS s 
INNER JOIN RoomSignUp.dbo.Incoming_Applications_Current AS r 
    ON s.StudentID = r.StudentID 
INNER JOIN HallData.dbo.Halls AS h1 
    ON r.HallPref1 = h1.HallID
INNER JOIN HallData.dbo.Halls AS h2
    ON r.HallPref2 = h2.HallID
INNER JOIN HallData.dbo.Halls AS h3
    ON r.HallPref3 = h3.HallID 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-04-17T16:50:08.120

如果你有 3 个相同的表`ID`要加入，我认为它会是这样的：

```
SELECT * FROM table1 a
JOIN table2 b ON a.ID = b.ID
JOIN table3 c ON a.ID = c.ID 
```

只需替换`*`为您想从表格中获得的内容即可。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-04-02T01:46:22.077

```
SELECT column_Name1,column_name2,......
  From tbl_name1,tbl_name2,tbl_name3
  where tbl_name1.column_name = tbl_name2.column_name 
  and tbl_name2.column_name = tbl_name3.column_name 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-12-29T11:33:53.940

```
SELECT table1.col,table2.col,table3.col 
FROM table1 
INNER JOIN 
(table2 INNER JOIN table3 
ON table3.id=table2.id) 
ON table1.id(f-key)=table2.id
AND //add any additional filters HERE 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-17T16:50:52.170

您只需要第二个内部连接，将`ID Number`您现在拥有`ID Number`的连接到第三个表的连接。之后，用`ID Number`和`Hall Name`替换 :)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-12T06:59:04.663

```
SELECT * 
FROM 
    PersonAddress a, 
    Person b,
    PersonAdmin c
WHERE a.addressid LIKE '97%' 
    AND b.lastname LIKE 'test%'
    AND b.genderid IS NOT NULL
    AND a.partyid = c.partyid 
    AND b.partyid = c.partyid; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-05T22:14:18.680

有很多回应，但总的教训似乎是您可以在 where 子句中使用多个 JOINS；techonthenet.com（我的老板向我推荐了它，我就是这样找到它的）也有很好的 SQL 教程，如果你还有其他问题，你只是想试着弄清楚。

```
SELECT table1.column1
FROM table1
WHERE table1 > 0 (or whatever you want to specify)
INNER JOIN table1 
ON table1.column1 = table2.column1 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-03T10:33:05.003

这是对具有相同 ID 的连接 3 表的正确查询**

```
select a.empname,a.empsalary,b.workstatus,b.bonus,c.dateofbirth from employee a, Report b,birth c where a.empid=b.empid and a.empid=c.empid and b.empid='103'; 
```

员工第一张桌子。报告第二张表。出生第三张表

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-22T10:35:02.700

```
select products.product_id, product_name, price, created_at, image_name, categories.category_id, category_name,brands.brand_id, brand_name 
FROM products INNER JOIN categories USING (category_id) INNER JOIN brands USING(brand_id) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-05T01:02:36.607

此查询将为您工作

```
Select b.id as 'id', u.id as 'freelancer_id', u.name as 
'free_lancer_name', p.user_id as 'project_owner', b.price as 
'bid_price', b.number_of_days as 'days' from User u, Project p, Bid b 
where b.user_id = u.id and b.project_id = p.id 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-02-18T03:57:53.800

```
SELECT 
A.P_NAME AS [INDIVIDUAL NAME],B.F_DETAIL AS [INDIVIDUAL FEATURE],C.PL_PLACE AS [INDIVIDUAL LOCATION]
FROM 
[dbo].[PEOPLE] A
INNER JOIN 
[dbo].[FEATURE] B ON A.P_FEATURE = B.F_ID
INNER JOIN 
[dbo].[PEOPLE_LOCATION] C ON A.P_LOCATION = C.PL_ID 
```

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2015-03-25T22:10:06.380

```
select empid,empname,managename,[Management ],cityname  
from employees inner join Managment  
on employees.manageid = Managment.ManageId     
inner join CITY on employees.Cityid=CITY.CityId

id name  managename  managment  cityname
----------------------------------------
1  islam   hamza       it        cairo 
```

# layout - Sitecore 重置项目布局

> ID：10195454
> 
> 赞同：1
> 
> 时间：2012-04-17T16:45:45.713
> 
> 标签：layout, sitecore, reset

如何以编程方式“重置”项目的布局？这可以通过“演示”选项卡中的 Sitecore 客户端实现。我无法在任何地方找到这样的例子。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T16:52:00.827

这是一个非常基本的方法来做你所要求的。

```
Item item; // your item here... Sitecore.Context.Item perhaps?

using (new Sitecore.SecurityModel.SecurityDisabler())
{
    if (!string.IsNullOrEmpty(item["__renderings"]))
    {
        using (new Sitecore.Data.Items.EditContext(item))
        {
            item.Fields["__renderings"].Reset();
        }        
    }
} 
```

# matlab - MATLAB 中的自定义特征值

> ID：10195456
> 
> 赞同：1
> 
> 时间：2012-04-17T16:45:51.850
> 
> 标签：matlab, eigenvalue

有什么方法可以使用其函数在 MATLAB 中解决像 (A*l^2+B*l+C)x=0 这样的自定义特征值问题？（A、B 和 C 是矩阵，l 是我的特征值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:50:58.883

不知道你是否正在尝试解决`I`，但如果你是，我建议你看看

[多棱镜](http://www.mathworks.com/help/techdoc/ref/polyeig.html)

# ios - iOS Safari 因大型帖子数据表单提交而崩溃

> ID：10195459
> 
> 赞同：5
> 
> 时间：2012-04-17T16:46:08.443
> 
> 标签：ios, html, canvas, safari, kineticjs

我有一个 HTML5 Canvas 元素。我需要将画布图像提交到我的服务器。它在我尝试过的所有 PC 浏览器中都能正常工作，但 iOS Safari 崩溃并在日志文件中出现内存不足错误。画布图像几乎是 500 KB，因为它是 950x323 PNG。这是我提交代码的简化版本：

```
$('#imageJSON').val(JSON.stringify(myCanvas)); //I wrote other JSON stringify code. It works
var d = myCanvas.toDataURL();
$('#imageData').val(d);
$('#myForm').submit(); 
```

Safari 开始提交，但在提交几秒钟后崩溃。服务器通过请求获取其他数据，但 imageData 不完整。我尝试将表单 enctype 更改为“multipart/form-data”，但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T17:34:06.497

事实证明，WebKit for Mac 中存在内存错误。我将错误提交给 webkit.org [https://bugs.webkit.org/show_bug.cgi?id=84168](https://bugs.webkit.org/show_bug.cgi?id=84168)。我发现另一种解决方案是通过 AJAX 而不是标准表单提交来发送数据。

```
$('#imageJSON').val(JSON.stringify(myCanvas)); 
var d = myCanvas.toDataURL();
$('#imageData').val(d);
var data = $(form).serialize();
$.post(ajaxurl, data, function(r) {
    // done. handle response. remove loading overlay.
}); 
```

效果很好，但有点痛苦。我在提交表单后使用 javascript（代码未显示）将浏览器定向到适当的页面，它有点模拟标准表单提交，但对用户来说并不那么流畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:37:47.667

您是否尝试过编写算法将画布图像分解成块？例如，与其在整个画布上调用 toDataURL()，不如将画布分成 10-20 个不同的部分。将每件作品另存为单独的图像。当你加载画布时，只需将每一块组装到画布上。这是一个类似于数据包或视频缓冲的概念。

# c++ - 使用擦除（开始（））从 unordered_set 中“删除一个元素”在 gcc 中很慢

> ID：10195460
> 
> 赞同：2
> 
> 时间：2012-04-17T16:46:21.360
> 
> 标签：c++, erase, unordered-set

我想要一个从 unordered_set 中“删除一个元素”的功能。

但是，当它使用erase(begin()) 实现时，它变得非常慢。（这是在 g++-4.5.3 中；也许 begin() 必须遍历更多的空哈希桶？）

请参阅下面的示例代码，其中包含令人惊讶的时间。

是否有其他方法可以实现效率更高的“删除一个元素”？（我确实希望允许其他使迭代器无效的干预集合操作。）

```
#include <unordered_set>
#include <iostream>
#include <chrono>
using namespace std;

struct Timer {
    Timer(string s) : _s(s), _start(Clock::now()) { }
    ~Timer() {
        auto t=chrono::duration_cast<chrono::milliseconds>(Clock::now()-_start).count();
        cerr << "Timer(" << _s << ") = " << t << "ms\n";
    }
 private:
    typedef chrono::high_resolution_clock Clock;
    string _s;
    Clock::time_point _start;
};

int main()
{
    unordered_set<int> s;
    const int num=200000;
    { Timer t("insert"); for (int i=0;i<num;i++) { s.insert(i); } }
    { Timer t("remove half"); for (int i=0;i<num/2;i++) { s.erase(s.begin()); } }
    long long s1=0, s2=0;
    { Timer t("access begin()"); for (int i=0;i<num/2;i++) { s1+=*s.begin(); } }
    { Timer t("access all"); for (auto it=s.begin();it!=s.end();++it) { s2+=*it; } }
    cerr << s1 << " " << s2 << "\n";
    return 0;
}

// Timer(insert) = 36ms
// Timer(remove half) = 3039ms
// Timer(access begin()) = 5958ms
// Timer(access all) = 1ms 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T17:03:38.740

该版本的 GNU 库似乎存在问题，已在更新的版本中修复。这是我的测试结果，使用我碰巧安装的两个版本：

```
mikes@seymour-desktop:~$ g++-4.4.5 -std=c++0x -O3 test.cpp
mikes@seymour-desktop:~$ ./a.out 
Timer(insert) = 15ms
Timer(remove half) = 3815ms
Timer(access begin()) = 7722ms
Timer(access all) = 0ms
10000000000 14999950000

mikes@seymour-desktop:~$ g++-4.6.1 -std=c++0x -O3 test.cpp
mikes@seymour-desktop:~$ ./a.out 
Timer(insert) = 16ms
Timer(remove half) = 2ms
Timer(access begin()) = 0ms
Timer(access all) = 1ms
10000000000 14999950000 
```

通过使用，我也获得了类似的快速结果`boost::unordered_set`，因此如果您无法更新编译器，这是一个选项。

# zend-framework - 使用视图助手渲染表单

> ID：10195463
> 
> 赞同：-1
> 
> 时间：2012-04-17T16:46:52.353
> 
> 标签：zend-framework, zend-form, zend-view

我有一个主页，我想要一个注册表单，为此我使用 Zend_View_Helper。但是什么都没有发生..我看不到我试图在该页面上获取的表格。

这是助手“Register.php”：

```
<?php

class Zend_View_Helper_Register extends Zend_View_Helper_Abstract {

    public function register(){

    $request = Zend_Controller_Front::getInstance()->getRequest();
        $controller = $request->getControllerName();
        $action = $request->getActionName();
        if ($controller == 'register' && $action == 'index') {
            return '';
        }
    }    
} 
```

这是Register.php的表格：

```
<?php

class Application_Form_Register extends Zend_Form
{

    public function init() {
        $this->setName('register');
        $id = new Zend_Form_Element_Hidden('id');
  $id->addFilter('Int');
    $first_name = new Zend_Form_Element_Text('first_name');
    $first_name->setLabel('Firstname')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $surname = new Zend_Form_Element_Text('surname');
    $surname->setLabel('Surname')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $email = new Zend_Form_Element_Text('email');
    $email->setLabel('Email')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $username = new Zend_Form_Element_Text('username');
    $username->setLabel('Username')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $password = new Zend_Form_Element_Text('password');
    $password->setLabel('Password')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $age = new Zend_Form_Element_Text('age');
    $age->setLabel('Age')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $gender = new Zend_Form_Element_Text('gender');
    $gender->setLabel('Gender')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $uni = new Zend_Form_Element_Text('pic_2');
    $uni->setLabel('Uni')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $submit = new Zend_Form_Element_Submit('submit');
    $submit->setAttrib('id', 'submitbutton');
    $this->addElements(array($id, $firstname, $surname, $email, $username, $password, $age, $gender, $uni, $submit));
}

} 
```

这是模型'Users.php'

```
<?php

class Application_Model_DbTable_Users extends Zend_Db_Table_Abstract
{

    protected $_name = 'users';

    public function addUser($first_name, $surname, $email, $username, $password, $age, $gender, $uni) {
        $data = array(
        'first_name' => $first_name,
        'surname' => $surname,
        'email' => $email,
        'username' => $username,
        'password' => $password,
        'age' => $age,
        'gender' => $uni,
    );
    $this->insert($data);
}   
} 
```

控制器“RegisterController.php”

```
<?php

class RegisterController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

public function indexAction()
{
    $form = new Application_Form_Register();
    $form->submit->setLabel('Register');
    $this->view->form = $form;
    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
            $first_name = $form->getValue('first_name');
            $surname = $form->getValue('surname');
            $email = $form->getValue('email');
            $username = $form->getValue('username');
            $password = $form->getValue('password');
            $age = $form->getValue('age');
            $gender = $form->getValue('gender');
            $uni = $form->getValue('uni');
            $register = new Application_Model_DbTable_Users();
            $register->addUser($first_name, $surname, $email, $username, $password, $age, $gender, $uni);
            $this->_helper->redirector('index');
        } else {
            $form->populate($formData);
        }

    }
}

} 
```

最后是视图：

```
<div id="register">
    <h2>Register</h2>
    <?php echo $this->register(); ?>
</div> 
```

我知道我永远不应该以纯文本形式传递密码，我的下一个问题是如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:18:07.680

您的视图助手似乎没有做任何有用的事情。我假设您希望它呈现表单。如果是这样，它应该如下所示：-

```
class Zend_View_Helper_Register extends Zend_View_Helper_Abstract {

    public function register()
    {
        $request = Zend_Controller_Front::getInstance()->getRequest();
        $controller = $request->getControllerName();
        $action = $request->getActionName();
        if ($controller == 'register' && $action == 'index') {
            return $this->view->form;
        }
    }    
} 
```

话虽如此，您真的不需要帮助者。在你看来，只是说： -

```
echo $this->form 
```

您的表单将呈现。

如果您想在站点的每个页面上使用表单（例如注销表单），您将使用视图助手。

终于在[聊天](https://chat.stackoverflow.com/rooms/10188/rendering-a-form-with-a-view-helper)中解决了。

# c# - Web 应用程序项目与网站项目

> ID：10195465
> 
> 赞同：0
> 
> 时间：2012-04-17T16:47:07.493
> 
> 标签：c#, asp.net, vb.net

> **可能重复：**
> [ASP.NET：网站还是 Web 应用程序？](https://stackoverflow.com/questions/398037/asp-net-web-site-or-web-application)

我只是想获得关于我应该使用哪一个以及为什么的建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:52:32.677

MSDN 库中有一个关于此的主题： [MSDN Web 应用程序项目与网站项目](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

# javascript - 具有智能定位信息框的 Google 地图混搭

> ID：10195469
> 
> 赞同：1
> 
> 时间：2012-04-17T16:47:27.897
> 
> 标签：javascript, google-maps, google-maps-markers

我正在寻求有关 Google 地图实施的帮助。我必须编写（JS）一个“智能信息框/气泡”，它可以智能地相对于标记定位自身，以及该标记相对于地图视图边缘的位置。

大众在他们的定位器中这样做：http: [//goo.gl/hiyfk](http://goo.gl/hiyfk)

示例屏幕截图：（气泡在左上方打开） [http://screencast.com/t/OAqehpfNf8](http://screencast.com/t/OAqehpfNf8)

示例屏幕截图：（气泡在右上角打开） [http://screencast.com/t/aqKM2nGZyR](http://screencast.com/t/aqKM2nGZyR)

我基本上是在寻找我应该针对哪些对象来运行计算，但我并不理想地了解 GoogleMaps API 的速度。我心目中的基本功能应该是获取标记位置，然后决定它在哪个 MapView 象限中，然后将 InfoBox 朝最有意义的方向弹出。例如。NW 象限中的标记 = SE 的 InfoBox。

非常感谢任何为我指明正确方向的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:07:27.260

Google Maps [Demo Gallery](https://developers.google.com/maps/documentation/javascript/demogallery)包含一个[SmartInfoWindow](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html)演示，它的功能几乎与您所描述的完全一样。如果您检查一下并在代码中四处寻找，您应该会很顺利

# jquery - 我正在尝试在无法执行的 divtag 中添加和删除类

> ID：10195471
> 
> 赞同：0
> 
> 时间：2012-04-17T16:47:35.210
> 
> 标签：jquery

我想添加类或更改现有的类名..但我做不到。

```
<div id="vote2" style='.'"background:url(images/btn_active.gif)no-repeat">

$("#vote2").addClass("vtbtn"); 
```

而且我正在尝试删除我也无法完成的 jte 现有类名。

```
<div id="vote2" class="vtbtn" style='.'"background:url(images/btn_active.gif)no-repeat">

$("#vote2").removeClass("vtbtn"); 
```

我得到了我的CSS

```
.vtbtn{ cursor:pointer;} 
```

但是每当我单击按钮时，它都不会添加类名..并且它也不会删除现有的类名

这是我的完整脚本

```
 $("#vote2").click( function() {
        $(this).addClass("vtbtn");  //or $("vtbtn").....               
        $("#vote1").css("background","url(images/btn_inactive.gif) no-repeat 0 0")
                ;}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:49:51.500

您的样式属性中有一些语法错误。尝试这个：

```
<div id="vote2" style="background: url(images/btn_active.gif) no-repeat;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:58:01.190

如果你想改变类，你可以使用切换功能。

$("#vote2").toggleClass("vtbtn");

这会将任何类切换为仅 vtbtn。

链接： [http ://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

# ios - 单身人士或单独班级 - 优点和缺点

> ID：10195475
> 
> 赞同：3
> 
> 时间：2012-04-17T16:47:45.887
> 
> 标签：ios, singleton

开始四处寻找全局静态，在一个地方设置颜色，以便在整个应用程序中使用。我无法理解关于 SO 上的单例的一些非常好的答案（较旧），所以我创建了一个类来非常简单地处理这个问题。基于一些（其他线程），我决定避免使用应用程序委托。

似乎有几种方法可以处理这个问题。作为一个经验不高的ios/objective-c开发者，下面的方法漏掉了什么？（顺便说一句，它很有效，而且看起来很简单。）

```
// Global.h
@interface Global : NSObject

@property (strong, nonatomic) UIColor *myColor;

- (id)initWithColor:(NSString *)color;

// Global.m
@implementation Global

@synthesize myColor;

- (id)initWithColor:(NSString *)color
{
    if (!self) {
        self = [super init];
    }

    if ([color isEqualToString:@"greenbackground"])
        myColor = [[UIColor alloc] initWithRed:0.0 / 255 green:204.0 / 255 blue:51.0 / 204 alpha:1.0];
    ... and so on with other colors
    return self;
}
@end 
```

稍后使用颜色：

```
cell.backgroundColor = [[[Global alloc] initWithColor:@"greenbackground"] myColor]; 
```

编辑以获得更好的解决方案：

```
// Global.h

#import <foundation/Foundation.h>

@interface Global : NSObject {
    UIColor *myGreen;
    UIColor *myRed;
}

@property (nonatomic, retain) UIColor *myGreen;
@property (nonatomic, retain) UIColor *myRed;

+ (id)sharedGlobal;

@end

// Global.m
#import "Global.h"

static Global *sharedMyGlobal = nil;

@implementation Global

@synthesize myGreen;
@synthesize myRed;

#pragma mark Singleton Methods
+ (id)sharedGlobal {
    @synchronized(self) {
        if (sharedMyGlobal == nil)
            sharedMyGlobal = [[self alloc] init];
    }
    return sharedMyGlobal;
}

- (id)init {
    if (self = [super init]) {
        myGreen = [[UIColor alloc] initWithRed:0.0 / 255 green:204.0 / 255 blue:51.0 / 204 alpha:1.0];
        myRed = [[UIColor alloc] initWithRed:204.0 / 255 green:51.0 / 255 blue:51.0 / 204 alpha:1.0];
    }
    return self;
}

@end 
```

和用法：

```
cell.comboLabel.textColor = [[Global sharedGlobal] myGreen]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:57:10.550

好吧，如果你想在全局范围内使用你的颜色属性，那么调用`alloc`and一直都是浪费的。`init`这就是单例提供帮助的地方，因为您只创建一次 ( `alloc`+ `init`)，而不是在代码中的任何位置使用它。

在您的情况下`alloc`，每次您想阅读时都会调用`myColor`它，考虑到您将在整个代码中使用它，这很浪费。

这看起来更干净：

```
cell.backgroundColor = [[Global sharedInstance] myColor]; 
```

# c++ - 避免数据损坏的文件结构

> ID：10195476
> 
> 赞同：4
> 
> 时间：2012-04-17T16:47:55.183
> 
> 标签：c++, delphi, data-integrity, integrity

我目前正在为监控系统开发我们当前的媒体存储（用于存储视频/音频/元数据）的升级，并且我正在重新设计记录结构以提供更强大的解决方案。

我需要为存储在数据文件中的数据创建一些索引数据，所以我正在创建一个索引文件结构，但我担心硬盘故障（想象一下如果在写入索引文件期间断电，它将变得腐败，因为数据很可能会被写入一半）。我已经设计了索引的存储方式，但我担心的是电源故障或磁盘故障时的数据损坏

那么，有人知道在写入时避免数据损坏的技术吗？

我已经搜索了一下，没有找到好的解决方案，一个解决方案是创建一个写入文件的所有内容的日志，但是我每秒会有更多的 I/O（我关心 I/O 的数量） Os 每秒也是如此，系统应该尽可能少地执行）。

我想出的是在索引文件中复制敏感数据以及时间戳和校验和字段。例如：

Field1 Field2 Field3 时间戳校验和

Field1 Field2 Field3 时间戳校验和

所以，我将数据写入了两次，如果当我读取文件时，第一组字段已损坏（校验和不匹配），我有第二组字段应该没问题。我相信如果在中间停止写入时会发生损坏，因此，例如，当软件正在写入第一组字段并且电源故障时，第二组仍然完好无损......如果电源故障而第二set 正在编写中，第一个已经完好无损。

大家觉得这个解决方案怎么样？它是否避免数据损坏？

顺便说一句，由于部署具有事务性 NTFS 的系统的限制，我不能将任何类型的数据库用于这种存储或事务性 NTFS

欢迎任何想法，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:01:51.663

忽略您关于无法使用数据库的部分问题:)

您可能会对 SQL Server 2012 的 FileTables 感兴趣。您可以将文件存储在数据库之外的文件夹中，但仍可以像访问数据库一样访问文件。您可以使用数据库将新文件插入该目录，或简单地将文件复制到文件夹中。您的数据库不会因视频文件而变得很胖。如果数据库服务器软件出现故障，它们也将无法访问。您的帧索引可以是单个 .jpg 文件（或其他文件），并且这些文件也可以由 FileTable 引用，并通过外键索引到主视频文件。帧索引表非常简单。

因此，您消除了写入文件和维护日志以查看是否出现故障的数据库开销。如果操作系统由于电源故障而无法写入文件，那么数据库将没有机会。您可以进行目录比较并使用强大的实用程序来移动文件，而不是在写入的任何部分失败时删除源文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T18:46:21.227

它不能避免数据损坏，因为损坏可能发生在任何一组或两组字段上。

我认为您最好不要复制“敏感数据”，而是分两步写入该数据，第一步写入“校验和”字段为空的数据，然后使用与数据匹配的校验和更新校验和。该校验和将用作“事务已提交”标志并确保数据完整性。

当您读取数据时，您会忽略所有未提交的索引集，我的意思是校验和不匹配的位置。

然后进行大量的测试和微调，在过程的每一步强制数据损坏，并保存随机数据。我个人认为测试需要做很多工作，因为失败是随机的，这就是为什么人们建议你使用经过多年测试的数据库。

请注意，虽然它增加了对某些数据损坏的保护，但它并不完美，您可以添加其他安全层来保护您的数据，包括数据复制、完整性检查和外部配置，包括不间断、raid 系统、定期备份。

关于“交易”的理论太多了。

搜索“原子事务算法”以获取更多详细信息。

重新考虑使用数据库，重新考虑使用日志，甚至重新考虑使用文件系统来存储您的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:50:38.193

You can use some sort of transaction logic. Create the index in small chunks and first using a temporary file. When you finish one chunk (file), check for integrity and copy it as an actual index file if it passes the test. At this point you can distribute a few copies of the verified chunk.

# tinymce - tinymce 切换问题

> ID：10195477
> 
> 赞同：6
> 
> 时间：2012-04-17T16:47:55.823
> 
> 标签：tinymce, toggle, wysiwyg, formatter

我遇到了以下问题 - 我目前有一个自定义工具栏/一组用于粗体/斜体/下划线的按​​钮，当单击每个按钮时，我正在调用相应的 js 函数。目前，当单击粗体按钮时，我正在调用

```
tinymce.activeEditor.formatter.toggle('bold'); 
```

后者成功地将当前选择加粗，但是当我再次按下粗体按钮时，粗体**不会**被删除。我试图调试它并`formatter.remove()`调用该方法；然后，当我检查其正文中的当前选择是什么时，结果是正确的（有一个选择，它是加粗的那个）。

如果我重新选择文本并按下粗体按钮，粗体格式将被删除。我想知道问题可能是什么？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-08T05:15:55.453

这应该在最新版本中得到修复。

# image-stitching - 如何拼接多个图像

> ID：10195483
> 
> 赞同：2
> 
> 时间：2012-04-17T16:48:16.757
> 
> 标签：image-stitching

我试图学习图像拼接背后的理论，并找到了关于如何只拼接两个图像的文章。我阅读了许多关于拼接的论文，例如 Lowe，他代表了一篇关于图像拼接的出色论文。但是总是缺少一件事，多张图像如何匹配？它是与所有其他图像一起的第一张图像，将它们缝合，然后与剩余的一组图像一起得到结果吗？如果有人可以清除我的疑问，那就太好了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T13:58:56.027

根据我在使用 opencv 时所学到的知识，我收集到的方法是：

**匹配**和**拼接**是在两个不同的步骤中完成的-

**匹配**

1.  获取每张图像并与其余图像一一比较。这里的比较是通过查看两幅图像之间特征点的相似性来完成的。
2.  对图像之间的相似度进行排序
3.  相似度低的对将被丢弃，相似度足够高的对将被保留。

**拼接**

1.  放置全景图中的第一张图像
2.  根据两者之间的单应性，下一个图像相对于第一个图像放置。单应性只是一个 3x3 矩阵，描述了如何从一个图像移动到下一个图像。
3.  如果关于图像一个有更多匹配，则相对于第一图像放置另一个图像，如果没有，则相对于第二图像放置另一个图像。
4.  重复此过程，直到全景中剩余的图像不再匹配为止。

* * *

在匹配和拼接之间还有一些其他步骤，包括使用束估计改进单应性，找到图像连接的位置 - 这被称为接缝估计 - 以及一些变形过程。但是，我希望这些信息足以回答您提出的问题。

# css - 有没有办法使用链接的 CSS 覆盖链接中“h6”标签的 CSS？

> ID：10195484
> 
> 赞同：1
> 
> 时间：2012-04-17T16:48:28.210
> 
> 标签：css, overriding, hyperlink, nested

在给定的容器中，我有一堆链接，其中包含另一个元素，如下所示：

```
<div class="container">
     <a href="whatever.com">
          <h6>Link Text Here</h6>
     </a>
</div> 
```

我有 CSS，我想用它来格式化“容器”类中的所有链接：

```
.container a {
    color: #00f;
} 
```

但是，还有其他外部样式表将“h6”的颜色设置为其他颜色。有没有办法让“容器”中的链接的 CSS 覆盖其他人为“h6”放置的任何内容？我不想覆盖“容器”中的所有“h6”，因为有些“h6”标签*不是*链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:50:51.250

我想你可以使用 !important 来提供覆盖。

```
 .container a h6
    {
       color: red !important;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:50:39.457

```
.container a,
.container a h6 {
    color: #00f;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T16:53:31.997

如果您一直在链接中使用 h6，我会为嵌套在 A 标记中的 h6 元素设置样式。CSS 看起来像这样：

```
.container a h6 {color:666;} 
```

这是告诉 CSS 去查看容器类，找到链接，并且只设置 a 标签内的 h6 样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:59:26.317

我认为，我可能是错的，你正在寻找这样的东西：

```
.container a h6 {
    color: inherit;
} 
```

这样做的好处是，你给包含的任何颜色都`<a>`将向下级联到 h6，而无需显式设置它。这样，您只需声明一次颜色。更易于维护和可读性。耶！

（这将适用于 IE8+）

# sql - 使用 django 的 Postgres DB 查询检索效率

> ID：10195485
> 
> 赞同：0
> 
> 时间：2012-04-17T16:48:43.230
> 
> 标签：sql, database, django, postgresql, large-data-volumes

我在 PostgreSql 中有 7 个表，它们与 Django 1.3 应用程序集成。在这 7 个表中，我们将根据具有不同列数据的所有表中存在的名称访问。某些特定名称包含 1,00,000 行。所以，我的问题我需要检索表中属于特定名称数据的所有行吗？

因此，我为检索操作实现了 django 模型 orm 查询集。但似乎没有效果。即使我进行了分页，也需要花费大量时间来加载页面，并且还为所有表的所有列创建了索引。

我仍然收到**nginx-504 网关超时**

因此，我还需要优化应该从所有表中检索到 1,00,000 行的查询。

改进查询优化的方法有哪些？

我如何在 django 中进行这种具有挑战性的操作？

在这里我粘贴了我的代码[http://pastebin.com/yNy5pxGG](http://pastebin.com/yNy5pxGG)

请建议我正确的方向！

**编辑1：**

我的查询： http: [//pastebin.com/A9B2ExVk](http://pastebin.com/A9B2ExVk)

**表格：**

```
 fda_sheet1 = 208778 unique rows
 fda_sheet2 = 291958 unique rows
 fda_sheet3 = 191958 unique rows
 fda_sheet4 = 676363 uniq rows
 fda_sheet5 = 262651
 fda_sheet6 = 742707
 fda_sheet7 = 300000 
```

这些是我的个人表格和行数。在这里，我将全部进行 LEFT JOIN 以制作一张表格以提高性能。

这也不好，因为该表占用了超过 700GB 的大小。

处理查询的方法是什么？

**注意事项**：

这些表包含不同级别的数据。主要是我们有药物名称和 ISR 编号。此外，所有其他表中都将存在 ISR 编号。根据药物，我们将获取 ISR 编号，并使用 ISR 编号，我们将查询其他数据在其他表中。希望你了解瓶颈

所以， 1\. 合并表也是问题 既然穿越了700GB

2.跨多个表查询也是问题由于每个表中的多行具有相同的isr号。

你认为还有其他最好的方法吗？

如果您有任何疑问，请告诉我

请建议我们解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:03:26.693

在评估所有查询（将它们转换为*）*`list`并创建`total_data`. 因此，在任何分页工作之前，您需要检索所有数据并将其放入内存。你应该避免这种情况。

此外，正如我所见，您将一个对象的数据分成 7 个不同的表 - 这对 Django 的 ORM 不利。如果您无法修改数据库模式，您可以尝试在数据库中创建一个视图，通过将所有表连接在一起来模拟一个大表。

因此，所有加入和检查空字段都将在 DB 中完成，您将拥有更清晰的 Py​​thon 代码，并且运行速度会更快。

# jquery - 如何制作流畅的幻灯片导航？

> ID：10195491
> 
> 赞同：2
> 
> 时间：2012-04-17T16:49:10.800
> 
> 标签：jquery, html, navigation, slide

我刚刚注意到[https://www.bankofamerica.com/](https://www.bankofamerica.com/)我真的很喜欢他们的主导航平滑地上下滑动的方式..

谁能告诉我如何获得类似的？它是一个插件还是只是“slideup”/“slidedown” jQuery 的一些混合物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:51:02.793

jq 插头-> [http://speckyboy.com/2011/07/04/15-fresh-jquery-menu-plugins-and-tutorials/](http://speckyboy.com/2011/07/04/15-fresh-jquery-menu-plugins-and-tutorials/)

此外，有很多方法可以做到这一点，包括通过 PURE CSS！

真的一点都不难，随心所欲。

另外，这里有几个纯 CSS 菜单生成器：

*   [http://www.cssmenumaker.com/](http://www.cssmenumaker.com/)
*   [http://css3menu.com/](http://css3menu.com/)
*   [http://www.cssmenubuilder.com/home](http://www.cssmenubuilder.com/home)

仅供参考，以下是 BoA 用于其菜单的自定义 jQuery 插件

```
(function($){
    $.fn.mainmenu=function(){
        var $powerMenu=$(this);
        var $lastMenuCloseListener=null;
        var isIE6=($.browser.msie&&$.browser.version.substr(0,1)<7);
        var config={sensitivity:1,interval:0,over:menuOnHandler,timeout:0,out:menuOffHandler};
        $("li",$(this)).data("hasFocus",false);$("li",$(this)).hoverIntent(config);
        $("li > a",$(this)).focus(function(event){
            if(event.keyCode==13) {
                var $liElement=$(this).parent();
                if(!$liElement.data("hasFocus")){
                    $liElement.trigger("liFocusInEvent");
                    $liElement.data("hasFocus",true);
                    if($liElement.find("div.submenu-last").length!=0){
                        handleLastSubmenuClose($liElement)
                    }
                }
            }
            else{
                $("li",$powerMenu).each(function(){
                    if($(this).data("hasFocus")&&($(this).get(0)!=$(this).parent().get(0))){
                        $(this).trigger("liFocusOutEvent")
                    }
                })
            }
        });
        addLastMenuCloseListener($("div.submenu-last:last",$powerMenu).closest("li"));
        $("li > a",$(this)).click(function(event){
            event.preventDefault();
            var $liElement=$(this).parent();
            if(!$liElement.data("hasFocus")){
                $liElement.trigger("liFocusInEvent");
                $liElement.data("hasFocus",true)}});
                $("li > a",$(this)).keydown(function(event){
                    if(event.shiftKey&&event.keyCode==9){
                        var $prevLIElement=$(this).parent().prev();
                        $(this).parent().trigger("liFocusOutEvent");
                        if($prevLIElement.length>0){
                            event.preventDefault();
                            $prevLIElement.children("a:first-child").focus()
                        }
                    }
                    else{
                        if(event.keyCode==9){
                            $(this).parent().trigger("liFocusOutEvent");
                            if($(this).parent().next().length>0){
                                event.preventDefault();
                                $(this).parent().next().children("a:first-child").focus()
                            }
                        }
                    }
                    if(event.keyCode==40){
                        ($(this).next().children("a:first-child").length!=0)?$(this).next().children("a:first-child").focus():$(this).next().children(".submenu-left").children("a:first-child").focus()
                    }
                });
                $("li",$(this)).bind("liFocusInEvent",menuOnHandler);
                $("li",$(this)).bind("liFocusOutEvent",menuOffHandler);
                $("div.submenu a, div.submenu-last a",$(this)).keydown(function(event){
                    if(event.keyCode==38){
                        var $prevItem=($(this).prev().length!=0)?$(this).prev():$(this).parent().prev().children("a:last-child");
                        if($prevItem.length!=0&&!$prevItem.is("div.dash-border")){
                            $prevItem.focus()
                        }
                        else{
                            if($prevItem.is("div.dash-border")){
                                $prevItem.prev().focus()
                            }
                        }
                    }
                    else{
                        if(event.keyCode==40){
                            var $nextItem=($(this).next("a, div.dash-border").length!=0)?$(this).next("a, div.dash-border"):$(this).parent().next().children("a:first-child");
                            if($nextItem.length!=0&&!$nextItem.is("div.dash-border")){
                                $nextItem.focus()
                            }
                            else{
                                if($nextItem.is("div.dash-border")){
                                    $nextItem.next().focus()}}}}});
                                    if(isIE6){
                                        $("li > div.submenu, li > div.submenu-last",$(this)).each(function(){
                                            if(!(($(this).width()%2)==0)){
                                                var submenu_width=$(this).width();
                                                submenu_width+=1;$(this).css({"width":submenu_width})
                                            }
                                            var submenu_bottom_width=$(this).width()-10;
                                            $(this).find("div.submenu-bottom").css({"width":submenu_bottom_width})
                                        })
                                    }
                                    function menuOnHandler(event){
                                        var $submenu=$(this).find("div.submenu,div.submenu-last");
                                        var $submenuLeft=$(this).find(".submenu-left");
                                        var $submenuRight=$(this).find(".submenu-right");
                                        $submenu.addClass("off-screen");
                                        var current_submenu_width=$submenuRight.length!=0?$submenuLeft.width()+$submenuRight.width()+40+6:
                                        $submenu.width();
                                        $submenu.removeClass("off-screen");
                                        $submenu.css({"visibility":"visible","display":"none","width":current_submenu_width}).slideDown("fast");
                                        $submenu.prev("a").addClass("select")
                                    }
                                    function menuOffHandler(){
                                        $(this).find("div.submenu,div.submenu-last").css({visibility:"hidden"});
                                        $(this).find("div.submenu,div.submenu-last").prev("a").removeClass("select");
                                        $(this).data("hasFocus",false)}
                                        function addLastMenuCloseListener($liElement){
                                            var $nextTabbable=findNextTabbable($liElement);if($nextTabbable!=null){
                                                $nextTabbable.focus(function(event){
                                                    $liElement.trigger("liFocusOutEvent")
                                                })
                                            }
                                        }
                                        function findNextTabbable($element){
                                            var $nextElement;
                                            var $nextTabbable;
                                            if($element.is("body")){
                                                return null
                                            }
                                            $nextElement=$element.next();
                                            if($nextElement.is(":tabbable")){
                                                return $nextElement
                                            }
                                            $nextTabbable=$element.next().find(":tabbable:first");
                                            if($nextElement.length==0){
                                                $nextTabbable=findNextTabbable($element.parent())
                                            }
                                            else{
                                                if($nextTabbable.length==0){
                                                    $nextTabbable=findNextTabbable($nextElement)
                                                }
                                            }
                                            return $nextTabbable
                                        }
    }
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:59:46.270

我相信美国银行正在使用 Drupal 和 Power Menu 模块。

正如 SpYk3HH 所说，有很多方法可以做到这一点。这里有一些其他的检查：

*   [jQuery 下拉菜单](http://codecanyon.net/item/drop-menu/81289?ref=1stwebdesigner)
*   [mb菜单](http://pupunzi.open-lab.com/2009/01/18/mbmenu/)
*   [您构建的直接 jQuery](http://buildinternet.com/2009/01/how-to-make-a-smooth-animated-menu-with-jquery/)

# c# - 无法更改强类型泛型列表中的对象

> ID：10195495
> 
> 赞同：0
> 
> 时间：2012-04-17T16:49:23.583
> 
> 标签：c#, list

我正在尝试遍历`List`数组订阅运算符中的所有对象并更改其中的字段，然后将它们的引用存储在另一个列表中。这是我写的代码：

```
private List<JavaScriptEventM> getSubset(List<JavaScriptEventM> domEvents)
    {
        List<JavaScriptEventM> retVal = new List<JavaScriptEventM>();

        for (int i = 0; i < domEvents.Count; i++)
        {
            JavaScriptEventM e = domEvents[i];
            e.xpath = getXPathToNode(e.source , false);
            retVal.Add(e);
        }

        return retVal;
    } 
```

此代码应该访问名为列表的所有成员`domEvents`并更改其`xpath`公共字段并将引用也存储在另一个列表中（称为`retVal`）

我调用这个函数并传递一个其字段设置为空`List`的对象。奇怪的是，函数返回后，返回的对象的字段发生了变化，但作为参数传递给该函数的原始列表保持不变。即原始列表中的对象仍将其字段设置为空。`JavaScriptEventM``xpath``retVal``xpath``domEvents``xpath`

当您通过数组订阅运算符访问对象时，C# 是否实际上获得了对象的克隆`List`？我怎样才能一个`List`一个地访问所有元素并更改它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:04:11.660

`struct`除非您确切知道它在做什么，否则不要在 C# 中使用。即 struct 的值语义会导致像您的问题一样，原始数据不会被更改。

`struct`与 C++ 不同，C#和C#之间存在巨大差异`class`。

[类和结构](http://msdn.microsoft.com/en-us/library/ms173109.aspx)

[.NET 中的结构和类有什么区别？](https://stackoverflow.com/questions/13049/whats-the-difference-between-struct-and-class-in-net).

# css - 适用于 firefox 或 chrome 的 css inline hack

> ID：10195496
> 
> 赞同：0
> 
> 时间：2012-04-17T16:49:37.653
> 
> 标签：css, firefox, google-chrome

我需要一个用于 chrome 或 firefox 的内联 css hack。内联是指以下内容：

style="*margin-top:这是 IE7 hack;margin-top:这是 IE 8&9 hack\9;">

我知道这是一种真正令人难以置信的做事方式（更不用说非标准），但我们使用的当前设置迫使我这样做。我无法实现 javascript 解决方案，因为我已经尝试过它并且它与影响数百个网页的全局 javascript 文件冲突。所以我被迫使用如上所述的内联样式。

我已经在使用上面提到的 IE7 IE8 和 IE9 hacks。

这是关于 Firefox 和 chrome 在浮动元素上的定位问题。

在此先感谢您的帮助。

严重fubar'd umbre gachoong

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:29:09.280

所以我能够通过以下方式解决它：

```
 <style type="text/css">

   ul li.container a.tooltip2{
  z-index:600;
   }

   ul li.container a.tooltip2 span{
  display:none;

  }

  ul li.container a.tooltip2:hover span{
  display:inline-block;
  position:absolute;
  border:1px solid #999;
  background-color:#ffffe5;
  z-index:99999;
  height:auto;
  width:auto;
  color:#000; 
    }

  </style> 
```

将上述内容与内联样式一起使用，（呃，脖子上的痛苦！）现在有效。所以设计师明天会去看看。我们会看看他说什么。

感谢您的输入！

问候，umbre

# mysql - 如何将窗口参数存储到 MySQL 数据库中？

> ID：10195500
> 
> 赞同：0
> 
> 时间：2012-04-17T16:49:47.583
> 
> 标签：mysql, dimensions, sqldatatypes

我目前正在开发一个程序，它可以扫描桌面上打开的窗口，并将相关的窗口信息存储到数据库中以供以后检索。

我需要将桌面上的窗口大小和位置（以像素为单位）存储到数据库中相关的“大小”和“位置”字段中。

大小可以由左上角和右下角 X&Y 坐标组成，也可以包含窗口的宽度和高度。哪个更简单。

Position 可以只包含窗口左上角的 X、Y 和 Z 坐标，这将允许我们在桌面上正确定位窗口。

完成此任务的最佳数据类型是什么？我见过有人提到使用 POLYGON 数据类型，但这是我以前从未见过的，我见过的例子都是用于存储纬度和经度以及使用“GetFromText”，这是我正在使用的一个函数也很难理解。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:40:54.510

从我的角度来看，将这些参数存储在注册表或 ini 文件中更可靠（也更传统）。在应用程序启动的那一刻，数据库服务器可能不可用。此外，为了恢复窗口坐标和大小，连接数据库、执行选择等看起来非常昂贵。启动过程可能需要很长时间。是的。Windows 具有整数屏幕坐标，因此使用 Integer 数据类型分别存储 x、y、w、h 值是有意义的

# javascript - 有关此 Caja（安全 JavaScript）代码的说明？

> ID：10195504
> 
> 赞同：1
> 
> 时间：2012-04-17T16:50:07.450
> 
> 标签：javascript, code-analysis, google-caja

我正在研究 Caja，但在理解它的工作原理时遇到了一些麻烦：

```
function Brand() {
  var flag = false, payload = null; 

  return caja.freeze({
    seal: function(payloadToSeal) {
      function box() {
        flag = true;
        payload = payloadToSeal;
      }
      box.toString = function() {
        return "(box)";
      };
      unseal: function(box) {
        flag = false;
        payload = null; 
        try {
          box();
          if (!flag)  { throw ...; }
          return payload;
        } finally {
          flag = false;
          payload = null; 
        }
      }
   });
} 
```

这有一个标题，内容如下：

> 图 10：权利放大。每个品牌都有一个封印和解封​​功能，就像一个匹配的加密和解密密钥。密封一个对象会返回一个密封的盒子，这个盒子只能通过相应的开封功能来开封。这里展示的实现技术归功于 M. Stiegler。

这是伪代码吗？我对正在发生的事情感到困惑，例如 at`box()`和`throw ...;`。我感谢任何提示或建议。

[这是我得到这个的规范PDF。](http://google-caja.googlecode.com/files/caja-spec-2008-06-07.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:57:48.870

该`throw`位是伪代码。真正的代码可以通过[svn](http://code.google.com/p/google-caja/source/browse/trunk/src/com/google/caja/Brand-cajita.js)获得。

[Marc Stiegler 在http://www.youtube.com/watch?v=eL5o4PFuxTY](http://www.youtube.com/watch?v=eL5o4PFuxTY)上描述了 sealer/unsealer 模式和其他安全分解模式

# c++ - Win32 应用程序在对话框关闭时立即退出

> ID：10195510
> 
> 赞同：4
> 
> 时间：2012-04-17T16:50:38.097
> 
> 标签：c++, c

[编辑补充：原来答案很无聊，与Win32、对话框等无关。我只是在我的代码中有一个愚蠢的错误。感谢 Hans Passant 发现它。]

（这有点长。执行摘要：我有一个简单的 Win32 应用程序，它在通知区域中创建一个图标，从不显示其主窗口，并且有一个“关于”框，可以通过右键单击通知来显示 -区域图标。我无法理解，当“关于”框显示然后关闭时，应用程序的主消息循环会收到一条退出消息并退出。我做错了什么导致这种情况？）

* * *

我正在编写一个位于通知区域（“系统托盘”）的小程序，并在后台执行各种不相关的处理。它的用户界面几乎是微不足道的：您可以右键单击通知区域图标以获取菜单，其中包含“退出”和“关于”选项；前者退出，后者弹出一个关于这个程序的模式对话框。

该应用程序是用 C++ 编写的，并直接使用 Win32（没有 MFC 或任何东西）。我很抱歉被困在石器时代。

唯一的问题是：*当“关于”对话框关闭时，程序退出！* **这可能是什么原因造成的？**

我不确定哪些进一步的信息对弄清楚这一点最有用。这里有一些观察。

*   在单击对话框的“确定”按钮后，应用程序生命周期结束时的 Windows 消息顺序如下。
    *   对话框的 proc 获取 WM_CTLCOLORBTN
    *   应用程序的（不可见）主窗口获取 WM_ENABLE(TRUE)。
    *   对话框获取 WM_CTLCOLORBTN、WM_IMESETCONTEXT、WM_SETFOCUS、WM_WINDOWPOSCHANGING、WM_WINDOWPOSCHANGED、3xWM_GETICON、WM_NCACTIVATE、2xWM_GETICON、WM_ACTIVATE、WM_WINDOWPOSCHANGING。
    *   应用程序的窗口 ges WM_WINDOWPOSCHANGING、WM_NCACTIVATE、消息 0x93、0x93、0x91、0x92、0x92（这些是什么？）、WM_ACTIVATE。
    *   对话框获取 WM_KILLFOCUS、WM_IME_SETCONTEXT。
    *   应用程序的窗口获取 WM_IME_SETCONTEXT。
    *   对话框获取 WM_IME_NOTIFY；应用程序的主窗口也是如此。
    *   应用程序的窗口获取 WM_SETFOCUS。
    *   对话框获取消息 0x90、WM_DESTROY、WM_NCDESTROY。
*   在这些之后没有进一步的消息到对话窗口的 proc 或主应用程序窗口的。
*   然后GetMessage在主消息循环中返回0（消息为WM_QUIT）就结束了。
*   我的代码中对 PostQuitMessage 的唯一调用是在主窗口的 WndProc 中，它发生在主窗口获取 WM_DESTROY 时，实际上在这种情况下没有调用它。

* * *

也许我的代码中有一些疯狂的东西，或者缺少一些东西。以下是一些摘录（有一些细节，可能不相关，为简洁起见省略）。

我的WinMain的大致结构如下：

```
WNDCLASSEX wc;
// fill in fields of wc
RegisterClassEx(&wc);

HWND w = CreateWindow(...);

NOTIFYICONDATA nid;
memset(&nid, 0, sizeof(nid));
// fill in fields of nid
Shell_NotifyIcon(NIM_ADD, &nid);

// (start a background thread to do the real work,
// which is of no interest here)

MSG msg;
while (GetMessage(&msg, NULL, 0, 0)) {
  if (TranslateAccelerator(msg,hwnd, accel, &msg)) continue;
  TranslateMesage(&msg);
  DispatchMessage(&msg);
}

Shell_NotifyIcon(NUM_DELETE, &nid);
return (int)msg.wParam; 
```

主窗口的 WndProc 如下所示：

```
switch (message) {
  case WM_USER_SHELLICON: // my own, attached to the icon's menu
    if (LOWORD(lParam) == WM_RBUTTONDOWN) // ... create menu and return TRUE
    break;
  case WM_COMMAND:
    // menu item
    switch (LOWORD(wParam)) {
      case IDM_ABOUT:
        DialogBox(the_instance, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, AboutProc);
        break;
      case IDM_EXIT:
        DestroyWindow(hWnd);
        break;
      default: return DefWindowProc(hWnd, message, wParam, lParam);
    }
  case WM_DESTROY:
    PostQuitMessage(0);
    break;
  default: return DefWindowProc(hWnd, message, wParam, lParam);
}
return 0; 
```

对话框的过程如下所示：

```
switch (message) {
  case WM_INITDIALOG:
    // fill in a version string
    return (INT_PTR)TRUE;
  case WM_COMMAND:
    if (LOWORD(wParam)==IDOK || LOWORD(wParam)==IDCANCEL) {
      EndDialog(hDlg, LOWORD(wParam));
      return (INT_PTR)TRUE;
    }
    break;
}
return (INT_PTR)FALSE; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:33:21.760

您的 WndProc() 函数中有一个错误。WM_COMMAND 案例缺少休息。所以当它执行时，比如说，IDM_ABOUT 然后它落入 WM_DESTROY 情况。萨约娜拉。

我推荐PC-lint。

# jquery - 你如何在 Wordpress 上使用 PhotoSwipe？

> ID：10195511
> 
> 赞同：1
> 
> 时间：2012-04-17T16:50:38.753
> 
> 标签：jquery, wordpress, photo, photoswipe

我正在尝试在 Wordpress（不是插件）上使用 Photoswipe。在过去的 12 个小时里，我一直在工作，但无法让它工作。我可以详细说明，但我认为在这一点上，我只需要一个全新的解决方案。所以，重申我的问题，你如何在 Wordpress 上使用 Photoswipe？

如果有人有过这方面的经验，或者知道教程，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:49:15.750

应该很简单...

把它放在你`<head>`的主题 header.php 中

```
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/klass.min.js"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/code.photoswipe-3.0.4.min.js"></script> 
```

...也将其添加到您的`<head>`下方

```
<script type="text/javascript">
    $(document).ready(function(){
        var myPhotoSwipe = $("#gallery a").photoSwipe({
            enableMouseWheel: false,
            enableKeyboard: false

            // add configuration options here

        });
    });
</script> 
```

确保不要忘记将这些 javascript 文件放在主题文件夹中。如您所见，我在您的主题中放置了一个名为“js”的子文件夹

只需在您的帖子中以 html 模式构建您的图库，使用您的帖子图像和链接，包裹在如下无序列表中。

确保无序列表的 id 与`myPhotoSwipe = $("#gallery a").photoSwipe({`脚本的 var 部分匹配。

```
<ul id="gallery">
    <li><a href="images/full/01.jpg"><img src="images/thumb/01.jpg" alt="Image 01" /></a></li>
    <li><a href="images/full/02.jpg"><img src="images/thumb/02.jpg" alt="Image 02" /></a></li>
    <li><a href="images/full/03.jpg"><img src="images/thumb/03.jpg" alt="Image 03" /></a></li>
    <li><a href="images/full/04.jpg"><img src="images/thumb/04.jpg" alt="Image 04" /></a></li>
    <li><a href="images/full/05.jpg"><img src="images/thumb/05.jpg" alt="Image 05" /></a></li>
    <li><a href="images/full/06.jpg"><img src="images/thumb/06.jpg" alt="Image 06" /></a></li>
</ul> 
```

脚本不必进入您的脑海，但可以在结束`</body>`标记之前。

从理论上讲，这应该做一些事情。然后你可以在其他地方设置样式或构建它。

# php - 使用表单发布到数据库时遇到问题

> ID：10195514
> 
> 赞同：1
> 
> 时间：2012-04-17T16:50:49.283
> 
> 标签：php, mysql, database, post

我有一个带有一些 PHP 代码的简单表单，可以将一些简单的信息发布到数据库中。

与数据库的连接很好，因为它显示了我手动输入的项目，这正是我想要的方式；然而。我无法将其从表单发布到数据库中。我已经修改了很多代码，但没有运气。有人看到我缺少的东西吗？这是代码：

```
<center>
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="POST">

    <strong><h2><br><br>Enter in my guestbook!</h2></strong><br>
    <h3>Nickname:</h3><input type="text" name="guestbook_name" maxlength="25"><br>
    <h3>Write About Your Day:</h3><textarea name="guesbook_message" rows="6" cols="60"       maxlength="255"></textarea><br>
    <input type ="submit" value="POST">

</form>

<br>
<hr>
<br>

<?php

    if (mysql_connect('localhost', 'root', 'root') && mysql_select_db('mydb')) {

    //echo 'Connected to the database!';

    $time = gmdate("l dS \of F Y h:i:s A");
    $errors = array();

    if (isset($_POST['guestbook_name'], $_POST['guestbook_message'])) {

        echo 'Set data!';

        $guestbook_name = mysql_real_escape_string(htmlentities(     $_POST['guestbook_name'])); 
        $guestbook_message = mysql_real_escape_string(htmlentities(     $_POST['guestbook_message'])); 

        if (empty($guestbook_name) || empty($guestbook_message)) {
        $errors[] = 'All fields are required.';
        }

        if (strlen($guestbook_name)>25 || strlen($guestbook_message)>250){
        $errors[] = 'One or more fields exceeded the character limit!'; 
        }

        if (empty($erros)) {
            $insert = "INSERT INTO guestbook VALUES     ('','$time','$guestbook_name','$guestbook_message')";
            if (mysql_query($insert)){
                 header ('Location: '.$_SERVER['PHP_SELF']);
            } else {
                $errors[] = 'Something went wrong. Try again.';
            }

        } else {
            foreach($errors as $error) {
                echo'<p><strong>'.$error.'</strong></p>'; 
            }

        }

    }

    // display entries 
    $entries = mysql_query("SELECT timestamp, name, message FROM guestbook ORDER BY timestamp DESC");

    if (mysql_num_rows($entries)==0){
        echo 'No entries, yet.';
        } else { 
            //echo 'Entries found.'; 

            while ($entries_row = mysql_fetch_assoc($entries)){
                $entries_timestamp = $entries_row['timestamp'];
                $entries_name = $entries_row['name'];
                $entries_message = $entries_row['message'];
                echo '<p><strong>Posted by '.$entries_name.' on     '.$entries_timestamp.'</strong>:<br><br>'.$entries_message.'</p><br><br>';

            }
        }

} else {
    echo 'Could not connect at this time.';
} 

?>

</center> 
```

我的主要问题是提交数据库，任何帮助都会很棒，谢谢！

凯尔 B。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:54:58.080

我们将需要查看您的数据库表结构与您的插入 sql 语句，以查看您是否正确插入。

插入失败的最可能原因是未设置设置为 NOT NULL 的字段值（通过未插入值或具有空/错误类型的变量）。

但更常见的问题是：

```
wrong table or field names
not having the enough privelages on your database user account 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:56:28.777

可能是错字？

```
if (empty($erros)) { 
```

我相信正确的名称是 $errors（注意 R）

# php - 查找“a”行是否与 ORM 中的“b”行有关系的最有效方法？

> ID：10195525
> 
> 赞同：2
> 
> 时间：2012-04-17T16:51:33.257
> 
> 标签：php, mysql, orm, doctrine, symfony-1.4

这是我的问题：

*   SomeTable 和 SomeOtherTable 之间存在 1-N 关系。
*   用户想修改b行，但是只有a行和b行有关系才可以修改
*   因此，我需要查找 SomeTable 中的 a 行与 SomeOtherTable 中的 b 行是否有关系

如果可以，请提供一般性答案，然后提供 symfony 1.4 和学说的具体答案。这对更多的人和我在多个框架中工作的人来说很有用。

我需要它来处理某些表的 CRUD 的权限。

我发现这是一个非常经常出现的问题

也许有解决这个问题的模式或插件？

*   您如何充分利用 symfony 缓存系统？

目前我只是想出了这个：

```
$someRow = Doctrine_Query::create()->from('SomeTable')->
  where('id = ?', $id_someTable)->
  andWhere('id_relation = ?',$id_someOtherTable)->execute();
return $someRow->count() > 0; 
```

出于某种原因，我觉得这很难看...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:09:48.880

无论如何，您的标题比您的文字更明确。

您有一个[在 Table.php 中](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Table.php#L1009)[调用`getRelations`](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Table.php#L1009)的函数。所以你可以检索到一个对象的所有关系，然后用结果做你想要的。

```
/**
 * Retrieves all relation objects defined on this table.
 *
 * @return array
 */
public function getRelations()
{
    return $this->_parser->getRelations();
} 
```

所以 ：

```
$relations = Doctrine_Core::getTable('SomeTable')->getRelations(); 
```

更多细节，[这里是解析器 getRelations 方法](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Relation/Parser.php#L241)。

**编辑：**

如果你想尝试给定的关系，你可以使用[`hasRelation`](https://github.com/doctrine/doctrine1/blob/master/lib/Doctrine/Relation/Parser.php#L106).

# c# - ASP.NET 将 ContentPlaceHolderID_ 添加到 DIV 标记

> ID：10195527
> 
> 赞同：2
> 
> 时间：2012-04-17T16:51:47.130
> 
> 标签：c#, asp.net

我试图`C# / ASP.NET`从一个日期中提取日期`Oracle Database`，如果日期晚于某一天，则隐藏表格的一部分。问题是，通常当我使用 div`runat=server`从内部调用时，`ASP.NET`我只能说它`CONTROLID.Visible=true`有效。

由于某种原因，此表单在运行时会在服务器上运行的任何 DIV 前面加上“mainContent_”，`ContentPlaceHolderID`即表单的加下划线。这意味着我的 CONTROLID 然后被重命名为`mainContent_CONTROLID`并且不显示。

你如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:53:51.997

这是因为`PlaceHolder`是一个[`INamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.inamingcontainer.aspx). 默认情况下，ASP.NET 基于命名容器层次结构构建唯一的客户端 ID。

在您的客户端脚本中使用`control.ClientID`或更改[`ClientIDMode`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)为`Static`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T16:55:24.257

```
<div id="yourControlId" runat="server" ClientIDMode="Static"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T16:56:31.387

[**来自 MSDN**](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

设置`ClientIDMode="Static"`为 div。

![在此处输入图像描述](../Images/ab0d4cfec489b21e3c88b94c76bfedd6.png)

# svn - svn“未找到元素”错误

> ID：10195532
> 
> 赞同：12
> 
> 时间：2012-04-17T16:51:57.167
> 
> 标签：svn, tortoisesvn

我是颠覆的新手。我想检查我系统中已经存在的项目。但是，当我在控制台中这样做时：

```
svn checkout urlname 
```

它要求我输入密码，但我错误地输入了错误的密码。当我第二次尝试时，它没有要求我输入密码，而是给出了错误消息：

```
unable to connect to a repository at URL
The OPTIONS request returned invalid XML in the response: XML parse error at    
line1: no element found (urlname) 
```

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T19:12:50.600

问题是 URL 不正确。当您通过 http/https 浏览到 SVN 代表时，记下您要浏览到的存储库的完整 URL。

```
e.g. httpx://192.168.0.xxx/svn 
```

会给我同样的错误（无法连接到 URL 上的存储库 OPTIONS 请求在响应中返回了无效的 XML：第 1 行的 XML 解析错误
：找不到元素（urlname）

但是，当我浏览到`httpx://192.168.0.xxx/svn/NAMEOFREPO`

回购结构的样子

```
e.g. httpx://192.168.0.xxx/svn/NAMEOFREPO/trunk 
```

你现在可以下载代码了：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T19:53:26.690

开始菜单 > Tortoise SVN > 设置以显示设置对话框。在 Saved Data 对话框中，单击 Authentication Data 旁边的“clear”按钮，使 Tortoise Subversion 忘记保存的密码。

但是，没有找到元素错误消息表明您的 URL 错误。您可能需要重新检查它。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T21:05:50.210

您使用的是 TortoiseSVN 还是 SVN 命令行客户端？

如果您使用的是命令行客户端，请查看`.subversion\auth`您的主目录中的目录。这是存储所有身份验证信息的地方。登录信息很可能存储在`.subversion\auth\svn.simple`.

在那里查找身份验证信息。删除其中存储了您的身份验证信息的文件。其实你可以删除这个目录下的所有文件。一旦您尝试再次登录，Subversion 将简单地重新创建它们。

在 TortoiseSVN 中，有一个地方可以在设置下清除我们的身份验证信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T17:00:21.207

尝试使用以下命令指定正确的密码：

svn --password (你的密码在这里) checkout urlname

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-11T10:19:34.477

就我而言，我已使用选项`Steal lock`（`checkbox`在为存储库文件设置锁定时在表单的左下区域）修复了此问题，因为某些文件似乎已解锁但实际上并非如此（验证从资源管理器窗口中单击文件的属性，然后单击 SVN 属性...。然后您可以看到文件的真实状态）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-18T13:01:43.303

我看到大多数答案都在猜测问题可能是什么，但要进行精确诊断，您最好跟踪/检查 SVN 网络流量，如[https://subversion.apache.org/docs/community-guide/debugging.html中所示#网络跟踪](https://subversion.apache.org/docs/community-guide/debugging.html#net-trace)：

*   使用 Wireshark
*   带socat
*   等等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-03T11:16:50.867

1.  在浏览器中导航 URL（例如 chrome）

2.  点击结帐按钮[![在此处输入图像描述](../Images/2fa3834609030b9248cf565ea9db5a3a.png)](https://i.stack.imgur.com/Iemmo.png)

[![在此处输入图像描述](../Images/54d19a5c7eae968c5731a33228141685.png)](https://i.stack.imgur.com/v4DTX.png)

3.  从结帐按钮复制链接

4.  粘贴到svn的url

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-18T11:11:31.747

假设您使用 VisualSVN Server 并`svn: E130003: Malformed XML: no element found`在寻址存储库时收到错误，很可能问题出在您输入的 URL 上。

如果使用的 URL 指向 Web 界面，Subversion 客户端会显示此错误。该 URL 必须指向 Subversion 存储库。要消除错误，只需单击 Web 界面中的**Checkout**按钮并将正确的 URL 复制粘贴到 Subversion 客户端。

阅读文章[KB102：不适当的存储库 URL 导致的 Subversion 客户端错误](https://www.visualsvn.com/support/topic/00102/)，了解详细步骤。

# jquery - 向左滑动选项卡，暂停然后向右滑动

> ID：10195538
> 
> 赞同：0
> 
> 时间：2012-04-17T16:52:12.293
> 
> 标签：jquery, jquery-ui

我是 jQuery 新手，老实说，我不确定这是否是编写脚本的正确方法！我一直在这里和网络上查看脚本，并将其拼凑在一起。无论如何，我试图让我的形象如下......

1.  向左滑出。
2.  暂停（延迟？） 3 秒。
3.  滑回右侧。
4.  完成动画，然后才能再次将鼠标悬停在它上面。

我做了一个小提琴来帮助更好地解释。
[http://jsfiddle.net/brandonesc/wvezk/179/](http://jsfiddle.net/brandonesc/wvezk/179/)

现在，如果你将鼠标悬停在标签上多次，很快，它就会有这个“紧张？” 对它的影响，我不确定这是怎么引起的。

谢谢你的时间，我真的很感激。在过去的 3 天里，我一直对此感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:40:58.680

这个其实挺复杂的。

[http://jsfiddle.net/wvezk/180/](http://jsfiddle.net/wvezk/180/)

您需要利用回调来获得所需的操作顺序。我还利用该`data`属性来跟踪何时应该触发/不触发事件。我还必须更改您的 CSS 并将其`animate`从`show`. Show 通过将元素包装在容器中来工作。这导致了爆裂效应。

```
$('#slider').mouseover(function() {
    //if we are animating then punt
    if ($(this).data('animating') == true) {
        return;
    }
    $(this).data('animating', true);

    //animate the move
    $(this).animate({
        left: '-25px'
    }, 500, function() {
        //in callback return to original state
        setTimeout(function() {
            animationCallback();
        }, 1000);
    });
});

function animationCallback() {
    //move back
    $('#slider').animate({
        left: '0px'
    }, 500, function() {
        //in callback trun off animation
        $(this).data('animating', false);
    });
}​ 
```

# xml - 使用 ParaView 进行文件转换

> ID：10195541
> 
> 赞同：3
> 
> 时间：2012-04-17T16:52:24.230
> 
> 标签：xml, json, vtk, collada, paraview

我在转换一些 VTK 医疗数据文件时遇到问题：我安装了 ParaView，但无法将这些 VTK 文件转换为正确的格式。如何使用 ParaView 将这些文件转换为 XML、JSON 或 COLLADA 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T15:58:37.603

VTK 确实有 XML 输出编写器。当您转到 ParaView 中的保存文件时，您可以选择它们，但它们取决于您拥有的数据集。它们也有不同的文件扩展名。从 vtkDataSet 派生的网格的串行 XML 编写器列表是：

*   vtkPolyData -- 扩展名为 .vtp 的 vtkXMLPolyDataWriter
*   vtkUnstructuredGrid -- vtkXMLUnstructuredGridWriter 扩展名为 .vtu
*   vtkStructuredGrid -- 扩展名为 .vts 的 vtkXMLStructuredGridWriter
*   vtkRectilinearGrid -- 扩展名为 .vtr 的 vtkXMLRectilinearGridWriter
*   vtkImageData -- 扩展名为 .vti 的 vtkXMLImageDataWriter

# c# - Linq To Entities 中的左外连接（无法在 LINQ to Entities 查询中构造实体或复杂类型。）

> ID：10195544
> 
> 赞同：0
> 
> 时间：2012-04-17T16:52:41.407
> 
> 标签：c#, linq, linq-to-entities, outer-join

我有两个类映射我的数据库的两个表：

```
public class Product
{
    public int Id { get; set; }
    public string Token { get; set; }
    public string Name { get; set; }
    public decimal Value { get; set; }
}

public class Ticket
{
    public int Id { get; set; }
    public string SerialNumber { get; set; }
    public string ProductToken { get; set; }
    public Product Product { get; set; }
} 
```

由于某些领域的原因，Product 和 Ticket 在逻辑上是链接的，换句话说，它们没有在可以由 EF 映射的数据库关系中链接，它们将在我的应用程序中通过 linq 查询链接到“必须”翻译为SQL 外左连接。由此，我做了以下查询：

```
IQueryble<Ticket> query = from ts in context.Tickets
                          join ps in context.Products 
                               on ts.ProductToken equals ps.Token into p
                          select new Ticket
                          {
                              Id = t.Id,  
                              SerialNumber = t.SerialNumber,
                              ProductToken = t.ProductToken,
                  Goal -----> Product = p.FirstOrDefault()
                          }; 
```

查询保留为 IQueryble，因为在那之后，查询将继续使用过滤器进行细化。

问题是当我运行以下代码时：

```
var tickets = query.OrderBy(t => t.SerialNumber).ToList(); 
```

我收到以下错误：

```
"The entity or complex type 'Model.Ticket' cannot be constructed in a LINQ to Entities query." 
```

那么，我怎样才能达到我的目标呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T16:59:29.753

您不能将结果投影到映射实体，您可以将其投影到匿名类型或创建自己的 Ticket 类型，例如：

```
public class myTicket
{
    public int Id { get; set; }
    public string SerialNumber { get; set; }
    public string ProductToken { get; set; }
    public Product Product { get; set; }
} 
```

接着：

```
IQueryble<myTicket> query = from ts in context.Tickets
                          join ps in context.Products 
                               on t.ProductToken equals p.Token into p
                          select new myTicket
                          {
                              Id = t.Id,  
                              SerialNumber = t.SerialNumber,
                              ProductToken = t.ProductToken,
                              Product = p.FirstOrDefault()
                          }; 
```

您还需要使用[DefaultIfEmpty()](http://msdn.microsoft.com/en-us/library/bb397895.aspx)进行左外连接

# php - 使用 FRAPI 从 API 操作中检索文件

> ID：10195545
> 
> 赞同：1
> 
> 时间：2012-04-17T16:52:47.787
> 
> 标签：php, rest, download, frapi

我正在使用 frapi 作为我的 API 框架，并且正在寻找一个 Action 来向发出请求的客户端发送一个文件。例如[https://api.domain.com/list/today](https://api.domain.com/list/today)将返回一个 .csv 文件给客户端。我对此进行了一些思考，并提出了两种可能的解决方案。

一种是通过 JSON 发送资源的 URL，并让应用程序处理在该端下载它。

另一种是将带有“application/zip”或类似内容的标题推送到浏览器。

我通常在寻找解决此问题的最佳方法，而不仅限于上述解决方案。

# javascript - 骨干网/Javascript 范围。如何在 .each 中访问 this.el

> ID：10195548
> 
> 赞同：0
> 
> 时间：2012-04-17T16:52:57.513
> 
> 标签：javascript, backbone.js

我想在集合的迭代器中访问`View`'s`el`方法。`each`这是我的问题的模拟：http: [//jsfiddle.net/ASdWU/](http://jsfiddle.net/ASdWU/)。是否可以？

我需要它是因为我想迭代集合模型，创建它们的视图并将其附加到`.el`元素（我不能使用 jQuery `$()`，因为`has_many`每个模型都有自己的集合的关系，所以它们的 css-id 是重复的，我不能选择特定的 id）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T16:59:52.277

只需将视图 ( `this`) 作为第三个（上下文）参数传递给[`.each()`](http://documentcloud.github.com/underscore/#each)：

```
_.each([1], function() {
         alert(this.el);
}, this); 
```

[分叉的小提琴。](http://jsfiddle.net/LHMAq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T16:56:15.383

`.each()`在函数可以访问的范围内创建一个变量：http: [//jsfiddle.net/ASdWU/1/](http://jsfiddle.net/ASdWU/1/)

# c# - 在 X 轴缩放上自动缩放 Y 轴

> ID：10195550
> 
> 赞同：4
> 
> 时间：2012-04-17T16:53:05.570
> 
> 标签：c#, mschart

是的，我知道（[这篇文章](https://stackoverflow.com/questions/2061136/mschart-auto-zoom-y-axis-on-x-axis-zoom)），如果你搜索你会注意到事件[AxisValueChanged](http://duckduckgo.com/?q=AxisValueChanged)似乎只存在于这个线程中。

我的目标只是在用户在 X 轴上进行选择时自动缩放 Y 轴，但我一直无法弄清楚如何。

我也尝试使用 SelectionRangeChanged 事件，但这个事件似乎有点破碎，因为我无法弄清楚选择的实际范围是什么？（IE所以我可以找到最大/最小范围）。

我使用 MS 图表（微软图表）

最终目标是当我缩放 X 轴（这是一个快速线图）时，它应该在 Y 轴上看到新的“最大”可见值并相应地调整/缩放它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:44:41.460

如果我理解正确，给定 X 轴上的缩放范围，您也想在 Y 轴上缩放相同的范围。如果是这样，您可以这样做：

```
void chart1_SelectionRangeChanged(object sender, CursorEventArgs e)
{
    // Given the visible (zoomed) range on X, 
    // it zooms the same relative range on Y:
    // i.e. if on the X axis, the range 5% - 30% is zoomed, 
    // it zooms the same range on Y.
    var axisY = this.chart1.ChartAreas[0].AxisY;

    var totalXRange = e.Axis.Maximum - e.Axis.Minimum;
    var totalYRange = axisY.Maximum - axisY.Minimum;

    var ySelectionStart = (e.Axis.ScaleView.ViewMinimum - e.Axis.Minimum) *
                          totalYRange / totalXRange;
    var ySelectionEnd = (e.Axis.ScaleView.ViewMaximum - e.Axis.Minimum) * 
                         totalYRange / totalXRange;

    axisY.ScaleView.Zoom(ySelectionStart,ySelectionEnd);
} 
```

正如您所说，该事件`AxisValueChanged`不存在；您链接的帖子可能意味着（现有）事件[AxisViewChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chart.axisviewchanged.aspx)。

显然，您也可以将`AxisViewChanged`其用于您的目的，并且调整我的代码以利用该事件不应该那么难。

随时询问您是否需要帮助；）

**编辑 ：**

我修改了我的代码以说明您的目标。以下代码计算与缩放后的 X 范围内的点的最大值和最小值对应的 Y 范围：

```
void chart1_SelectionRangeChanged(object sender, CursorEventArgs e)
{
    var axisY = this.chart1.ChartAreas[0].AxisY;

    var xRangeStart = e.Axis.ScaleView.ViewMinimum;
    var xRangeEnd = e.Axis.ScaleView.ViewMaximum;

    // compute the Y values for the points crossing the range edges
    double? yRangeStart = null;
    var pointBeforeRangeStart = this.chart1.Series[0].Points.FirstOrDefault(x => x.XValue <= xRangeStart);
    var pointAfterRangeStart = this.chart1.Series[0].Points.FirstOrDefault(x => x.XValue > xRangeStart);
    if (pointBeforeRangeStart != null && pointAfterRangeStart != null)
        yRangeStart = Interpolate2Points(pointBeforeRangeStart, pointAfterRangeStart, xRangeStart);

    double? yRangeEnd = null;
    var pointBeforeRangeEnd = this.chart1.Series[0].Points.FirstOrDefault(x => x.XValue <= xRangeEnd);
    var pointAfterRangeEnd = this.chart1.Series[0].Points.FirstOrDefault(x => x.XValue > xRangeEnd);
    if (pointBeforeRangeEnd != null && pointAfterRangeEnd != null)
        yRangeEnd = Interpolate2Points(pointBeforeRangeEnd, pointAfterRangeEnd, xRangeEnd);

    var edgeValues = new[] { yRangeStart, yRangeEnd }.Where(x => x.HasValue).Select(x => x.Value);

    // find the points inside the range
    var valuesInRange = this.chart1.Series[0].Points
    .Where(p => p.XValue >= xRangeStart && p.XValue <= xRangeEnd)
    .Select(x => x.YValues[0]);

    // find the minimum and maximum Y values
    var values = valuesInRange.Concat(edgeValues);
    double yMin;
    double yMax;
    if (values.Any())
    {
        yMin = values.Min();
        yMax = values.Max();
    }
    else
    {
        yMin = this.chart1.Series[0].Points.Min(x => x.YValues[0]);
        yMax = this.chart1.Series[0].Points.Max(x => x.YValues[0]);
    }

    // zoom Y-axis to [yMin - yMax]
    axisY.ScaleView.Zoom(yMin, yMax);
}

// see: http://en.wikipedia.org/wiki/Linear_interpolation#Linear_interpolation_between_two_known_points
public static double Interpolate2Points(DataPoint p1, DataPoint p2, double x)
{
    var x0 = p1.XValue;
    var y0 = p1.YValues[0];
    var x1 = p2.XValue;
    var y1 = p2.YValues[0];
    return y0 + ((x - x0) * y1 - (x - x0) * y0) / (x1 - x0);
} 
```

# c++ - 如何使用 C++ 中的函数更新结构的值？

> ID：10195552
> 
> 赞同：2
> 
> 时间：2012-04-17T16:53:24.170
> 
> 标签：c++

我在这里定义了一个结构

```
struct Owner{

char* ownerName;char* fatherName;char* address;};

void registerV(Owner *);

main(){ 
```

我在这里初始化所有者

```
struct Owner owner;

  owner.ownerName="Imran Ali";
  owner.fatherName="Ali Khokhar";
  owner.adress="KhushalPura";
  registerV(&owner);

} 
```

在此功能中，我从用户那里获取输入，我必须使用另一个功能在主要部分中显示这些输入。但是当我尝试这样做时，我会得到垃圾值

```
void registerV(struct Owner *ownerPtr)
{

 char buyersName[50];
 char fatherName[50];
 char adress[100];

 cin.getline(buyersName, 50);
 cout << " Enter Buyers Name : " ;
 cin.getline(buyersName, 50);
 (*ownerPtr).ownerName=buyersName;

 cout << " Enter Fathers Name : " ;
 cin.getline(fatherName, 50);
 (*ownerPtr).fatherName=fatherName;

 cout << " Enter Adress : " ;
 cin.getline(adress, 100);
 (*ownerPtr).adress=adress;
} 
```

当我尝试从主函数查看值时，我得到垃圾值。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T16:58:02.197

`fatherName`您的所有者变量的字段使用退出后超出范围的数据（局部变量，例如 ）进行初始化`registerV`。

在这里查看使用`std::string`，但您还需要更好地理解内存管理和变量范围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:02:22.207

让我解决两个一般性问题，而不是解决程序中的每个单独问题：

1.  不要使用指针。相反，按值传递和返回对象。
2.  不要使用`char`数组。相反，使用`std::string`.

试试这个：

```
// Untested code

#include <iostream>
#include <string>

struct Owner{
  std::string owner;
  std::string father;
  std::string address;
};

Owner registerV();

main(){
  struct Owner owner;

  owner = registerV();
}

Owner registerV() {
  Owner result;

  std::cout << " Enter Buyers Name : ";
  std::getline(std::cin, result.ownerName;

  std::cout << " Enter Fathers Name : " ;
  std::getline(std::cin, result.fatherName);

  std::cout << " Enter Adress : " ;
  std::getline(std::cin, result.address);

  return result;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T17:09:02.497

Owner 所有者之前的 struct 关键字；是不必要的。

您可以使用 pStruct->member 直接访问它们，而不是取消引用指针并使用 (*pStruct).member 访问它们的成员。

如果您想坚持使用 char 指针，我个人会将您的“注册”函数的主体放在 main 中。

如果你仍然需要这个函数，你应该使用[std::strcpy](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)从你的临时成员复制值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T16:58:19.427

变量`buyersName`和其他变量对于它们所在的函数是局部的，这意味着指向它们的指针在函数返回后无效。

最好的解决方案是使结构成员变量成为正确的 C++ 字符串。

# perl - 使用 Net::SFTP::Foreign 的 Perl SFTP 问题

> ID：10195554
> 
> 赞同：1
> 
> 时间：2012-04-17T16:53:28.987
> 
> 标签：perl

我正在使用 Net::FTP::Foreign 并且我不断收到关于找不到文件的错误，我不确定我的语法是否错误或者我误解了如何使用它。

```
$LOGFILE = 'data_log' . $YYYYMMDD . '.log';

$sftp->setcwd('/tmp') 
    or die 'Unable to change working directory to /tmp: ' . $sftp->error;
print "CWD set\n";
my $ls = $sftp->ls('/tmp', names_only => 1, ordered => 1);

foreach my $file (@$ls) {
    print $file . "\n";
}

print 'Getting file: ' . $LOGFILE . "\n";
$sftp->get('/tmp/data_log*', 'data_log' . $YYYYMMDD . 'log') 
        or die 'Could not get remote file: ' . $sftp->error; 
```

我得到的错误是远程端不存在这样的文件，但我已经确认当我执行 LS cmd 时它们确实存在。

我的脚本有什么明显的错误导致它无法工作吗？

我也在使用 Net::SFTP::Foreign 因为 Net::SFTP 不会建立在我运行 10.7 的 MBP 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:02:56.677

而不是`get`使用`mget`它将传输与给定模式匹配的所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:46:38.177

你有：

```
$sftp->get('/tmp/data_log*', 'data_log' . $YYYYMMDD . 'log') 
```

是否有一个名为 的文件`/tmp/data_log*`？或者你想得到以`/tmp`开头的所有文件`data_log`？

`get`使用该方法一次只能获取一个文件。球不起作用。为什么不将你的`get`进入你的`foreach`循环？当你看到你想要的文件时，抓住它。

```
foreach my $file ( @{$ls} ) {
    print qq(Found file "$file" in directory\n);

    # Is this the file we want to fetch?

    if ( $file eq $LOGFILE ) {
          print qq(Attempting to fetch "$file"\n);
          $sftp->get( "$LOGFILE" )   #I think you're only interested in this file
              or die qq(Could not fetch file "$LOGFILE" from directory: ) . $sftp->error;
          print qq(Fetched file "$file"\n);
    }
} 
```

# android - 如何将文本放在图像视图下

> ID：10195557
> 
> 赞同：4
> 
> 时间：2012-04-17T16:53:34.077
> 
> 标签：android, xml, textview

我写了一些 xml，但仍然无法将文本作为图像放在屏幕中央。我想把文字放在我的图片后面。在我的 xml 中，只是试图将文本放在图像下方的中心。我的xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#ffffffff"
    android:gravity="fill" >

    <ViewFlipper
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/flipper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:flipInterval="2000" >

        <LinearLayout
            android:id="@+id/Linear"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:baselineAligned="false"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/imageLabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:src="@drawable/logonews" />

            <TextView
                android:id="@+id/textLabel"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/imageLabel"
                android:layout_gravity="center"
                android:singleLine="true"
                android:text="Israel News"
                android:textSize="18sp"
                android:textStyle="bold" />
        </LinearLayout>
    </ViewFlipper>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T17:55:50.310

如果[`CompoundDrawable`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableTop)不满足您的需求，您可以使用 a`RelativeLayout`而不是`LinearLayout`这样的：

```
 <RelativeLayout
        android:id="@+id/relative"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/imageLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:src="@drawable/logonews" />

        <TextView
            android:id="@+id/textLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/imageLabel"
            android:layout_centerInParent="true"
            android:singleLine="true"
            android:text="Israel News"
            android:textSize="18sp"
            android:textStyle="bold" />
    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T17:06:13.250

考虑使用顶部可绘制的 textview 吗？[http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawableTop](http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawableTop)

在 xml 中：`android:drawableTop`

# nsis - 国家安全情报局。特殊（带图像）部分页面

> ID：10195561
> 
> 赞同：0
> 
> 时间：2012-04-17T16:53:45.870
> 
> 标签：nsis

我正在使用 NSIS 创建准备好的游戏服务器。

首先我需要用户选择服务器的类型（公共/僵尸/其他游戏模式）

然后他们将显示插件列表，每个插件的图片和描述。

像这样的东西：

![](../Images/3e67abec9910ded7ea17f7873142d5f6.png)

公共插件**将是其他**.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:17:15.353

我不太清楚你是否也想要普通部分，有两个组件页面会使事情变得有点复杂，但我认为这就是你想要的，所以这个例子就是这样做的：

```
outfile "$%temp%\sotest.exe"
RequestExecutionLevel user
!include MUI2.nsh
!include nsDialogs.nsh
!define MUI_COMPONENTSPAGE_NODESC
!define MUI_CUSTOMFUNCTION_GUIINIT onguiinit
!insertmacro MUI_PAGE_WELCOME
!define MUI_PAGE_CUSTOMFUNCTION_PRE pagecbcmpnorm
!insertmacro MUI_PAGE_COMPONENTS
!define MUI_PAGE_CUSTOMFUNCTION_PRE pagecbcmpplugin
!define MUI_PAGE_CUSTOMFUNCTION_SHOW pagecbcmppluginshow
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE pagecbcmppluginleave
!insertmacro MUI_PAGE_COMPONENTS 
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE "English"

Section "Program Files (Required)" NSEC_BASE
SectionIn RO
SectionEnd

Section "Help" NSEC_HELP
SectionEnd

Section "Zombie base" PSEC_BASE
SectionIn RO
SectionEnd

Section "Super Gun" PSEC_SGUN
SectionEnd

Section "Zombie Invade" PSEC_INVADE
SectionEnd

Function onguiinit
InitPluginsDir
StrCpy $0 0
ClearErrors
loop:
    SectionGetFlags $0 $1
    IfErrors done
    SectionGetText $0 $1
    WriteIniStr "$pluginsdir\cmpnt.ini" "S" $0 $1
    IntOp $0 $0 + 1
    goto loop
done:
;Init dummy plugin descriptions and images
WriteIniStr "$pluginsdir\cmpnt.ini" "PData" "${PSEC_BASE}:txt" "Blah Blah"
WriteIniStr "$pluginsdir\cmpnt.ini" "PData" "${PSEC_SGUN}:txt" "Bang!"
WriteIniStr "$pluginsdir\cmpnt.ini" "PData" "${PSEC_INVADE}:txt" "Charge!!!"
File "/oname=$pluginsdir\cmpnt_p${PSEC_BASE}.bmp" "${NSISDIR}\contrib\Graphics\Header\nsis.bmp"
File "/oname=$pluginsdir\cmpnt_p${PSEC_SGUN}.bmp" "${NSISDIR}\contrib\Graphics\Header\orange-uninstall.bmp"
File "/oname=$pluginsdir\cmpnt_p${PSEC_INVADE}.bmp" "${NSISDIR}\contrib\Graphics\Header\win.bmp"
FunctionEnd

!define FIRSTPLUGINSECIDX ${PSEC_BASE}
!define /math LASTPLUGINSECIDX ${PSEC_INVADE} + 1

Function ToggleSections
StrCpy $0 0
ClearErrors
loop:
    SectionGetFlags $0 $1
    IfErrors done
    SectionSetText $0 ""
    IntOp $0 $0 + 1
    goto loop
done:
Pop $0
Pop $2
loopset:
    ReadIniStr $1 "$pluginsdir\cmpnt.ini" "S" $0
    SectionSetText $0 $1
    IntOp $0 $0 + 1
    IntCmp $0 $2 0 loopset
FunctionEnd

Function pagecbcmpnorm
Push ${FIRSTPLUGINSECIDX}
Push 0
call ToggleSections
FunctionEnd

Function pagecbcmpplugin
Push ${LASTPLUGINSECIDX}
Push ${FIRSTPLUGINSECIDX}
call ToggleSections
FunctionEnd

!define ID_TOP 0x3FF
!define ID_TXT 0x3FE
!define ID_IMG 0x3EE
!define ID_LST 0x408
Function pagecbcmppluginshow
FindWindow $R0 "#32770" "" $HWNDPARENT
GetDlgItem $2 $R0 ${ID_TOP}
ShowWindow $2 0

System::Call '*(i,i,i,i)i.r1'
System::Call 'user32::GetClientRect(i $R0,ir1)'
System::Call '*$1(i,i,i.r8,i.r7)'
System::Free $1

IntOp $8 $8 - 16 ;margin
GetDlgItem $2 $R0 ${ID_LST}
IntOp $6 $8 / 2
System::Call 'user32::SetWindowPos(i$2,i0,i0,i0,ir6,ir7,i0x14)'

IntOp $6 $6 + 8 ;half of margin
GetDlgItem $2 $R0 ${ID_IMG}
${NSD_AddStyle} $2 ${SS_BITMAP}
IntOp $7 $7 - 38
System::Call 'user32::SetWindowPos(i$2,i0,ir6,i0,ir6,ir7,i0x14)'

GetDlgItem $2 $R0 ${ID_TXT}
IntOp $7 $7 + 8
System::Call 'user32::SetWindowPos(i$2,i0,ir6,ir7,ir6,i 50,i0x14)'

StrCpy $9 0 ;make sure bitmap variable is null
StrCpy $0 ${FIRSTPLUGINSECIDX}
call .onMouseOverSection ;force update
FunctionEnd

Function pagecbcmppluginleave
${NSD_FreeBitmap} $9
StrCpy $9 0
FunctionEnd

Function .onMouseOverSection
ReadIniStr $1 "$pluginsdir\cmpnt.ini" "PData" "$0:txt"
FindWindow $R0 "#32770" "" $HWNDPARENT
GetDlgItem $2 $R0 ${ID_TXT}
SendMessage $2 ${WM_SETTEXT} 0 "STR:$1"
GetDlgItem $2 $R0 ${ID_IMG}
call pagecbcmppluginleave
${NSD_SetBitmap} $2 "$pluginsdir\cmpnt_p$0.bmp" $9
FunctionEnd 
```

# fabricjs - fabricjs 交互式绘图绘制第一个形状后是否需要重置事件系统？

> ID：10195562
> 
> 赞同：0
> 
> 时间：2012-04-17T16:53:47.293
> 
> 标签：fabricjs

使用 Fabric.js 绘制交互式形状，除非我创建多个形状，否则我无法编辑形状。

一个清楚地显示问题的演示在这里[http://jsfiddle.net/pingcrosby/brZ2N/](http://jsfiddle.net/pingcrosby/brZ2N/)

```
 Click the box tool and draw 3 boxes NOT overlapping and try selecting them.
  Click the arrow (selection) tool - now selecting the box does not work as expected.

    (once you click enough and it works..everything from then on works as expected)

    Now try a 3 boxes and select the bounding group
    Now suddenly selecting all works as expected. 
```

绘制初始形状后是否需要重置内部事件系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-01T10:21:13.307

晚了 4 年，但我正在尝试使用 Fabric 并修复了 @PingCrosby 的小提琴。

我`shape.setCoords()`在鼠标向上提交形状时调用了，这将设置`object.oCoords`，否则它会停留在小的初始矩形，而不是调整大小的矩形。 [https://jsbin.com/rujete/edit?html,js,输出](https://jsbin.com/rujete/edit?html,js,output)

这被列为[Fabric 陷阱](https://github.com/kangax/fabric.js/wiki/Fabric-gotchas)之一。
我也更新[了 https://github.com/kangax/fabric.js/wiki/FAQ](https://github.com/kangax/fabric.js/wiki/FAQ)

# database - 比较两种产品的算法？

> ID：10195565
> 
> 赞同：1
> 
> 时间：2012-04-17T16:53:59.033
> 
> 标签：database, algorithm

我想开发一个网站，可以根据它们的功能比较两种产品。

我想将特征作为属性存储在数据库中。例如，手机是一种产品，因此“屏幕类型”和“屏幕分辨率”是属性，它们的值可以是 LED/AMOLED 和 800x400/340x230。

数据库可以是手机/笔记本电脑/电视，但数据库只能用于一种产品类型。

我想知道是否有**任何算法可以根据它们的属性找出两者中最好的？**

任何建议/指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:56:48.093

这是一个可能的算法，但它不适用于多个用户/客户，除非他们共享相同的偏好（和可支配收入！）。我在找公寓的时候大致做了这样的事情：

*第 1 步*：对于每个特征，将不同的选项映射到一个数值。我对手机屏幕了解不多，但假设您认为 AMOLED 屏幕比 LED 屏幕值 20%。已经是数字的值可以离散映射或使用方程映射。

*第 2 步*：给每个特征一个权重。

*第三步*：对每个特征，将权重乘以值；把这些加起来，你就有了每个产品的分数。得分最高的产品获胜。

* * *

例如，假设每部手机都有以下参数：

*   屏幕类型：LED 或 AMOLED
*   克重
*   屏幕尺寸（英寸），长*宽
*   以像素为单位的屏幕分辨率，X*Y
*   电池寿命（小时）

将每个参数映射到一个值，使得两倍有价值的东西高两倍：

```
Screen type: LED => 1.0, AMOLED => 1.2
Weight: w => 50/(w+3)
Screen size: (L,W) => sqrt(L^2 + W^2) / 3
Screen DPI: (L,W,X,Y) => sqrt((X*Y)/(L*W)) / 100
Battery life: T => T / 20 
```

你的相对权重是：

```
Screen type: 3
Weight: 1
Screen size: 4
Screen DPI: 2
Battery life: 2 
```

使用 800x400 像素、3x4 英寸、LED 屏幕、重 40 克、电池续航时间为 48 小时的手机 #1 计算得分：

```
3*1.0 + 1*50/(40+3) + 4*sqrt(3^2*4^2)/3 + 2*sqrt(800*400/(3*4))/100 + 2*48/20
= 28.23 
```

使用 100x100 像素、2x1.5 英寸、AMOLED 屏幕、重 8 克、电池续航时间为 200 小时的手机 #2 的计算得分为：

```
3*1.2 + 1*50/(8+3) + 4*sqrt(2^2*1.5^2)/3 + 2*sqrt(100*100/(2*1.5))/100 + 2*200/20
= 33.3 
```

所以第二部手机是“最好的”。其他参数，尤其是成本，可能应该包含在分数中。

* * *

准确的结果需要准确地映射到数字尺度和准确的相对权重——*这不是*一件容易的事，即使是自己决定也是如此。您可以允许用户设置自己的相对权重，也许......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:13:13.697

如果您想为每个产品找到一个分数，您需要找到不好或不适合该类别的产品。wilson-score 区间计算出 5% 的错误率，您可以对产品进行排序。

# windows-phone-7 - 在 wp7 上使用证书建立 HTTPS 连接

> ID：10195567
> 
> 赞同：1
> 
> 时间：2012-04-17T16:54:00.360
> 
> 标签：windows-phone-7

如何使用 Windows Phone 上的自定义证书建立 HTTPS 连接以建立该连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:10:46.990

Windows Phone 仅接受由有限数量的公认提供商根签名的证书；如果您拥有的是自签名证书，您将无法在 Windows Phone 上使用它...

# java - Java-&& 评估

> ID：10195568
> 
> 赞同：5
> 
> 时间：2012-04-17T16:54:04.510
> 
> 标签：java

任何人都可以帮助我解决以下问题：

我有如下代码：

```
if(cond1 && cond2 && .. && cond10) 
```

在这里，cond1 是昂贵的操作，其输出是布尔值。

现在我的问题是当 cond2 输出为假时 JAVAC 会做什么。具体来说，是评估 cond3 的输出还是停止评估？

更形象地说，

```
if(cond1 && cond2 && .. && cond10)
  //do this 
```

和

```
if(cond1){
  if(cond2){
         .
         .
         .
        if(cond10){
             //do this
                   } 
```

在java中是否相同（在执行方式的情况下）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T16:55:30.420

操作员`&&`总是短路。`false`仅当条件 1 和 2 为 时，才会评估条件 3 `true`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T16:56:00.963

如果整个表达式是`&&`or`||`那么 Java 将使用短路评估。这意味着如果一切正常`&&`，它将在第一个 false 之后停止，如果一切正常`||`，它将在第一个 true 之后停止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T16:55:24.150

是的，您的代码片段是等效的。逻辑 AND 运算符处于 Java 短路状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T16:56:23.877

一旦发现其中一个值为假，Java 将立即退出该检查。

同样，一旦发现其中一个值为真，它就会使用 OR 执行您所期望的操作。

不需要评价其他的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T17:01:58.703

一旦遇到错误，它将立即停止（这称为短路逻辑）。在您的情况下， cond3 将永远不会被评估。此外，条件是从左到右评估的，因此将最便宜的条件放在左侧总是一个好主意。这将避免不必要地评估昂贵的条件。

示例（伪代码）

```
if(JohnIsMale && IsJohnsCholesterolTooHigh())
   {
   //Tell John to take it easy on the ice cream cause he could develop a heart condition
   } 
```

不要先检查第二个条件，因为它需要计算。如果他不是男性（简单的真或假），您将永远不必检查第二个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-17T16:56:00.257

直接回答：是的，它们本质上是一样的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-17T17:03:33.173

它像....

```
if(cond1){ //if its true then check con2 ,else exit
  if(cond2){//if its true then check con 3, else exit
       if(cond3){.....

and Both code snippets  are same 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-17T17:07:51.377

&& 如果任何单个条件为假，则从左到右执行，条件将中断，整个条件为假。假设 cond2 为 false 则 cond3.. 其他将不会执行。另一方面，如果您使用 single & ，它将从左到右执行，直到处理的所有条件都不管是假还是真。这就是区别 && 将在第一个 false 时停止执行，并且 & 将继续到最后一个条件。

# ios - 向 Facebook Graph API 发送 GET 请求，其中包含 iOS 用户的纬度和经度

> ID：10195569
> 
> 赞同：0
> 
> 时间：2012-04-17T16:54:05.210
> 
> 标签：ios, facebook-graph-api, core-location

有谁知道我如何向包含用户纬度和经度的 Facebook Graph API 发送 GET 请求。

这是适用于 iOS 的

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:47:06.170

您的意思是使用 Facebook Graph Api 获取用户当前位置吗？

这是我从 Facebook (Hackbook for ios) 提供的示例应用程序中借用的示例代码链接：[https ://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)

```
- (void)apiGraphSearchPlace:(CLLocation *)location {

    currentAPICall = kAPIGraphSearchPlace;
    NSString *centerLocation = [[NSString alloc] initWithFormat:@"%f,%f",
                                location.coordinate.latitude,
                                location.coordinate.longitude];
    HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"place",  @"type",
                                   centerLocation, @"center",
                                   @"1000",  @"distance",
                                   nil];
    [centerLocation release];
    [[delegate facebook] requestWithGraphPath:@"search" andParams:params andDelegate:self];
} 
```

# php - php 什么是有效的数组形式？斜线和刻度线

> ID：10195574
> 
> 赞同：0
> 
> 时间：2012-04-17T16:54:23.353
> 
> 标签：php, arrays

这让我发疯了，所以非常感谢任何帮助。

我正在发布带有 name=opc[1] cat[2] 等的记录。理想情况下，这将创建一个数组。当我 print_r 发布的数据时，它会打印出看起来像数组的东西，尽管键周围有刻度和斜线。

但是，当我设置一个变量 $array 或任何等于数组的值时，print_r($array) 返回 0。Echo 返回 Array。

可能与此相关，当我尝试对数组执行 foreach 时，它给出了一个无效的参数错误。我需要对发布的数据做些什么，以便我可以将其设置为变量并将其用作有效数组。我尝试了 implode、explode 和 stripslashes 的各种组合以将其转换为更好的形式，但只有 $_POST 在 print_r 中打印出来。内爆会产生错误。Explode 创建一个只有 1 个项目的数组。

这是 print_r($_POST['opc']);

```
Array ( [\'0\'] => dog [\'1\'] => cat [\'2\'] => mouse [\'3\'] => chicken [\'4\'] => runner [\'5\'] => ) 
```

我需要做什么才能使用它？

表单代码（前两条记录）：

```
<tr><form action="editcats.php" method="post"><td align="right">Existing:</td><td align="left"><input type="text" size="12" name="ocp[0]" value="dog"><input type="hidden" name="id[0]" value="1"></tr>
<tr><td align="right"></td><td align="left"><input type="text" size="12" name="ocp[1]" value="cat"><input type="hidden" name="id[1]" value="2"><input type="submit" value="submit"></form></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:09:10.210

查看您的 HTML 源代码后，您似乎混淆了如何将数组变量传递给`$_POST`. 即使您希望它们发布到同一个数组，也不应该有两个具有相同“名称”的元素。纠正将数据输入数组变量的方法，或者以不同的方式命名元素。

从您的`name`属性中删除索引并尝试再次运行您的表单。

请参阅[此相关问题](https://stackoverflow.com/questions/10180810/php-pass-and-receive-two-dimensional-array-from-form)以获得一些帮助。

```
<input type="text" size="12" name="ocp[]" value="cat"><input type="hidden" name="id[]" value="2"><input type="submit" value="submit"></form></tr> 
```

# r - 如何抑制函数在 R 中返回“Null”？

> ID：10195586
> 
> 赞同：4
> 
> 时间：2012-04-17T16:55:31.257
> 
> 标签：r, return

我写了一个 R 函数来返回满足特定要求的行，但是我遇到了输出格式的问题。

例如，返回具有特定值的行：

```
xx.1 <- data.frame(aa= 1:5, bb = c("AA","BB","CC","DD","EE"))
xx.2 <- c("AA","DD")
ff_in <- function(x,y){
  if (toupper(x[2]) %in% y) {return(x)}
}
apply(xx.1,1,ff_in,xx.2) 
```

但是，输出看起来像：

```
[[1]]
aa   bb 
"1" "AA" 

[[2]]
NULL

[[3]]
NULL

[[4]]
aa   bb 
"4" "DD" 

[[5]]
NULL 
```

如何抑制 R 返回 null，并返回类似的东西？

```
aa bb
"1" "AA" 
"4" "DD" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T16:59:00.093

怎么样

```
do.call(rbind,apply(xx.1,1,ff_in,xx.2)) 
```

? 将所有结果逐行组合在一起；`rbind`输入`NULL`向量没有效果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T17:55:05.463

这样做会不会更容易：

```
xx.1[ toupper(xx.1[[2]]) %in% xx.2 , ] 
```

如果您在函数中需要它，我相信这会更快，并且不会产生将数据帧强制转换为字符矩阵的不良副作用。

```
exncol <- function(df, coln, choices) df[ toupper(df[[coln]]) %in% choices , ]
exncol(xx.1, 2, xx.2)
  aa bb
1  1 AA
4  4 DD 
```

# android - 如何添加旋转动画来翻译动画？

> ID：10195587
> 
> 赞同：0
> 
> 时间：2012-04-17T16:55:36.113
> 
> 标签：android, android-animation, android-imageview

我需要在 xml 中而不是在代码中定义 Animation.RELATIVE_TO_SELF 吗？我正在尝试添加一个旋转动画来配合我的翻译动画（在 xml 中定义）但是下面的代码不起作用，我可以在 xml 中找到参数 pivotXType。请帮忙...

```
anim = new RotateAnimation(0, 10,
                    Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF,
                                    0);
                anim.setInterpolator(interpolator);
                anim.setDuration(mDuration);
                anim.setFillEnabled(true);
                anim.setFillAfter(true);
                ((AnimationSet)view_1_anim_c).addAnimation(anim);
                apa1.startAnimation(view_1_anim_c); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:26:35.683

签出[`AnimationSet`](http://developer.android.com/reference/android/view/animation/AnimationSet.html)或在动画 XML 中[`<set>`](http://developer.android.com/guide/topics/resources/animation-resource.html#set-element)标记。

# php - Ajax - Php Call 方法安全吗？

> ID：10195593
> 
> 赞同：0
> 
> 时间：2012-04-17T16:56:00.810
> 
> 标签：php, ajax

我希望第一次启动 ajax。我将使用它对表单中的字段进行服务器端验证。基本上，ajax 传递用户提供的输入，一些 php 代码执行 if else 规则并相应地发送回响应。在我的 php 代码中，一些字符串将包含敏感数据，用户是否能够阅读或看到这些字符串？

感谢所有有用的答案，现在非常清楚:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T16:58:46.977

Ajax 使用 HTTP 就像整个页面刷新一样。如果您要发送和/或接收敏感数据，则需要确保将 SSL 用于 Ajax 调用，就像您使用安全表单提交一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:04:38.420

Ajax 使用 HTTP，AJAX 请求的响应仅包含 PHP 脚本生成的数据。如果您不回显包含敏感数据的字符串，那么响应将无法包含它们。

如果要传输敏感数据，则必须使用 HTTPS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:06:39.453

如果敏感数据在服务器端的 php 中应该没问题。只是不要返回 ajax 任何敏感信息。

PHP 在服务器端处理，任何来自 ajax 的 php 请求都会在服务器上执行 php 脚本并返回处理结果。客户端看不到 php 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T17:09:01.847

## 回答

> 在我的 php 代码中，一些字符串会包含敏感数据

是的，如果用户尝试，他们可以看到服务器的响应。但是，如果您的敏感数据在 PHP 代码中并且永远不是响应的一部分，他们将无法看到它。

尽管如此，**也永远不要将敏感信息放在源**代码中，因为任何有权访问您的 PHP 源代码的人都将能够获得该信息。如果他们愿意，一个令人毛骨悚然的网络托管公司理论上可以做到这一点。

### 提示

既然你刚开始，我想提一下你应该[使用 jQuery 来做你的 Ajax](http://api.jquery.com/jQuery.ajax/)东西。

## 尝试解释 Ajax

当您进行 Ajax 调用时，您会在页面加载后使用 HTTP 协议发送请求。JavaScript 发出请求、接收响应并对加载到浏览器中的 HTML DOM 进行更改，而无需刷新。

```
Requests: Ajax function --(HTTP(S))--> SERVER --(HTTP(S))--> Ajax function

Action: Ajax function --> interpret response and manipulate DOM accordingly 
```

所以换句话说，它就像浏览器在协议方面发出的请求，只是它是一个 Ajax 函数在做这件事。因此，适用于浏览器的这些请求的任何内容也适用于此处。

通常响应是 JSON 字符串，因为 Ajax 函数很容易将其解释为 JavaScript。

# ruby-on-rails - Heroku 上的 Rails MongoDb 项目无法启动

> ID：10195596
> 
> 赞同：0
> 
> 时间：2012-04-17T16:56:06.927
> 
> 标签：ruby-on-rails, mongodb, heroku

嗨，伙计们，我最近从 git hub git://github.com/barmstrong/ribbot.git 下载了一个开源代码“ribbot”，在设置我的本地环境后，我能够让代码在我的本地机器上运行。我决定将 heroku 用于我的 web 基础解决方案并安装了 herokulabs。运行该站点时，我收到以下 heroku 日志错误：

```
 2012-04-17T16:51:34+00:00 heroku[web.1]: Unidling
    2012-04-17T16:51:34+00:00 heroku[web.1]: State changed from down to created
    2012-04-17T16:51:35+00:00 heroku[web.1]: State changed from created to starting
    2012-04-17T16:51:46+00:00 heroku[web.1]: Starting process with command `bundle exec 2012-04-17T16:51:58+00:00 app[web.1]: [2012-04-17 16:51:58] INFO  WEBrick::HTTPServer#start: pid=1 port=5078
2012-04-17T16:51:58+00:00 app[web.1]: [2012-04-17 16:51:58] INFO  WEBrick 1.3.1
2012-04-17T16:51:58+00:00 app[web.1]: [2012-04-17 16:51:58] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-04-17T16:51:59+00:00 heroku[web.1]: State changed from starting to up
2012-04-17T16:52:01+00:00 app[web.1]: => Call with -d to detach
2012-04-17T16:52:01+00:00 app[web.1]: => Rails 3.1.1 application starting in production on http://0.0.0.0:5078
2012-04-17T16:52:01+00:00 app[web.1]: => Booting WEBrick
2012-04-17T16:52:01+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-04-17T16:52:01+00:00 app[web.1]: localhost:11211 failed (count: 0)
2012-04-17T16:52:01+00:00 app[web.1]: 
2012-04-17T16:52:01+00:00 app[web.1]: 
2012-04-17T16:52:01+00:00 app[web.1]: Started GET "/" for 208.124.140.154 at 2012-04-17 16:52:01 +0000
2012-04-17T16:52:01+00:00 app[web.1]: cache: [GET /] miss
2012-04-17T16:52:01+00:00 app[web.1]: Redirected to http://herokuapp.com/forums
2012-04-17T16:52:01+00:00 app[web.1]:   Processing by PostsController#index as HTML
2012-04-17T16:52:01+00:00 app[web.1]: Completed 302 Found in 9ms
2012-04-17T16:52:01+00:00 heroku[router]: GET quiet-stream-2681.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=703ms status=302 bytes=93 
```

我的 mongoid.yml 看起来像这样：

```
development:
  host: localhost
  database: ribbot_development

test:
  host: localhost
  database: ribbot_test

production:
  uri: <%= ENV['MONGOLAB_URI'] %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:31:14.167

端口 11211 是 memcached（可能）...所以也许您在本地使用 memcached，需要为 memcached 添加 heroku 插件。

# ruby-on-rails - 如何更改 HAML 中所选布局的文档类型？

> ID：10195597
> 
> 赞同：0
> 
> 时间：2012-04-17T16:56:09.783
> 
> 标签：ruby-on-rails, ruby, haml

**您如何为一种特定的视图布局更改 HAML 中的文档类型？** 系统的所有其他页面都需要保持 HTML5，但是对于一个特殊的例外，我需要一种特定的类型。

在 Rails 3.1.x 上，我尝试了几种不同的方法将我的文档类型从 5 更改为 4.01，但无济于事。我查看了以下指导：[http ://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#doctype_](http://haml-lang.com/docs/yardoc/file.HAML_REFERENCE.html#doctype_)

好像我无法`:format`在模板中强制使用该选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:20:36.667

以下解决方法怎么样？

```
# in the top of application.html.haml
- if @use_4_01
  <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
- else
  !!! 
```

在控制器中的某个地方设置`@use_4_01`，你会得到这个旧的文档类型。

# actionscript-3 - 如何使用 HierarchicalData 阻止 AdvancedDataGrid 将具有多个父级的子元素移动到不同级别？

> ID：10195603
> 
> 赞同：0
> 
> 时间：2012-04-17T16:56:42.430
> 
> 标签：actionscript-3, apache-flex, advanceddatagrid

我遇到了一个问题，我的子元素在图表中与其自身一起移动，其中它有多个不同级别的父元素。这有点奇怪，我认为这可能是为了说明它是同一个元素，但它在我的数据网格中看起来很奇怪，有时它会从网格中分离出来！

**编辑：**我知道这是因为我使用的是同一个对象，但我想在两个位置使用同一个对象，这样当我单击任何一个时，我都会得到相同的 dg.selectedItem。我正在寻找一种方法来防止在两个对象而不是一个对象上发生树内移动（如果可能），而不是使用不同的对象。

我已将其简化为这段代码以说明问题：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init()">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            [Bindable] var ac:ArrayCollection;

            public function init():void
            {
                ac = new ArrayCollection();
                var objWithMultipleParents:Object = {name:"Awkward family tree"};
                ac.addItem({
                    name:"Parent 1",
                    children:[
                        objWithMultipleParents,
                        {name:"Child of Parent 1"}  
                    ]
                });
                ac.addItem({
                    name:"Parent 2",
                    children:[
                        {name:"Child of Parent 2",children:[objWithMultipleParents]},
                        {name:"Child #2 of Parent 2"}
                    ]
                });
            }

        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="dg" width="100%" height="100%">
        <mx:dataProvider>
            <mx:HierarchicalData source="{ac}" />
        </mx:dataProvider>
        <mx:columns>
            <mx:AdvancedDataGridColumn dataField="name" headerText="Groups"/>
        </mx:columns>
    </mx:AdvancedDataGrid>
</s:Application> 
```

在扩展父 2 的子 1 之前：

![在扩展父 2 的子 1 之前](../Images/c02ae903d4d3ba30ac7cdf7bffda7500.png)

扩展父 2 的子 1 后：

![扩展父 2 的子 1 后](../Images/d93e3ffba6863820750d9d34b684db83.png)

有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:33:22.770

答案是不。您不能根据需要在多个地方显示相同的项目。您将遇到像您上面所说的那样的小 UI 怪癖。但是，您可以显示该项目的平面副本，然后使用某种形式的唯一标识符访问该项目。

```
//store item reference in accessible object
obj = new Object();
obj[itemRef.uid] = itemRef;

//copy enough information to display and re-access correctly
copy1.name = itemRef.name;
copy1.uid = itemRef.uid;
parent1.add(copy1);

copy2.name = itemRef.name;
copy2.uid = itemRef.uid;
parent2.add(copy2);

//on item selection, access it through uid
itemRef = obj[dg.selectedItem.uid]; 
```

如果您没有任何类型的 UID，并且不想创建一个，您也可以使用平面副本作为项目键。

```
//make copies
copy1.name = itemRef.name;
copy2.name = itemRef.name;
parent1.add(copy1);
parent2.add(copy2);

//map references
obj[copy1] = itemRef;
obj[copy2] = itemRef;

//re-access
itemRef = obj[dg.selectedItem]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-29T13:43:52.847

树中的任何节点在树中只能出现一次。时期。节点的引用（对象 ID）标识它在树中的位置。多次添加它会破坏所有需要知道节点在树中位置的机制。只有相反的方式才会起作用（知道哪个节点在某个位置）。副作用之一是错误的缩进。当显示节点的子节点时，将计算所需的缩进并将其应用于其外观 - 在树中的所有出现处，无论它们是否处于完全不同的缩进级别。

如果你需要在不同的地方展示相同的数据，让你的树节点只是包装到一个保存数据的对象。树 ndo 是独立的对象，但从它们引用的对象中获取它们的名称、图标、工具提示、whoateever。并且这个“数据对象”可以被任意数量的树节点引用。即使需要知道单击了哪些数据，您也可以从消息中获取对树节点的引用，并从中获取对数据对象的引用以进行进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:03:45.967

好的，这是你的问题。

```
var objWithMultipleParents:Object = {name:"Problem"}; 
```

您正在创建一个对象并在多个位置使用。
在 AS3 中，对象是通过引用传递的。
话虽如此，如果您在一个元素中更改对象，您将在“所有”元素中更改它。
请注意，在我的示例中，我使用一个函数来创建一个新对象，而不是一遍又一遍地引用同一个对象。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"
    minWidth="955" minHeight="600"
               creationComplete="init()">
<mx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]
        public var ac:ArrayCollection;

        public function init():void
        {
            ac = new ArrayCollection();
            var objWithMultipleParents:Object = createObject( );
            ac.addItem({
                name:"Parent 1",
                children:[
                    objWithMultipleParents,
                    {name:"Child of Parent 1"}  
                ]
            });
            ac.addItem({
                name:"Parent 2",
                children:[
                    {name:"Child of Parent 2",children:[createObject( )]},
                    {name:"Child #2 of Parent 2"}
                ]
            });
        }
        public function createObject( ):Object{
            return {name:"Problem"}
        }

    ]]>
</mx:Script>

<mx:AdvancedDataGrid id="dg" width="100%" height="100%">
    <mx:dataProvider>
        <mx:HierarchicalData source="{ac}" />
    </mx:dataProvider>
    <mx:columns>
        <mx:AdvancedDataGridColumn dataField="name" headerText="Groups"/>
    </mx:columns>
</mx:AdvancedDataGrid> 
```

您也可能想查看[HierarchicalData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/HierarchicalData.html)

# java - 组布局 Java

> ID：10195604
> 
> 赞同：1
> 
> 时间：2012-04-17T16:56:48.303
> 
> 标签：java, swing

使用 grouplayout 如何使一个字段扩展三个父母的长度？这是我目前拥有的。我想要做的是添加一个文本框，它将在这三个项目下拉伸框的长度。我该怎么做？

```
layout.setHorizontalGroup(layout.createSequentialGroup()
        .addComponent(puzzleNumber)
        .addComponent(newPuzzleButton)
        .addComponent(newPuzzleNumber));            

layout.linkSize(SwingConstants.HORIZONTAL, newPuzzleButton, newPuzzleNumber);

layout.setVerticalGroup(layout.createSequentialGroup()
        .addGroup(layout.createParallelGroup(BASELINE)
            .addComponent(puzzleNumber)
            .addComponent(newPuzzleButton)
            .addComponent(newPuzzleNumber)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:08:59.550

使用 Box 并设置面板中其他两个组件的 preferredSize。

```
Box box = Box.createHorizontalBox(); 
```

# regex - 任何不以 .asp 结尾的字符串的正则表达式

> ID：10195605
> 
> 赞同：0
> 
> 时间：2012-04-17T16:56:52.917
> 
> 标签：regex, iis, asp-classic

我（不幸的是）正在使用 IIS，并且我正在重写以创建友好的配置文件 URL。我想出了一个可行的解决方案，但想在用户名中允许句点。因此，重写的 URL 格式是`profile/username`，但我显然不想重定向任何包含**.asp**的路径，因此脚本不会被重新路由。他们屏蔽的实际 URL 是`profile/iviator.asp?p=username`. 很简单，对吧？是的，好吧，IIS 的重写模块所依赖的正则表达式引擎是假的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:35:09.057

**编辑：**经过一番研究，我现在发现 IIS 不使用 .NET 正则表达式引擎，而是使用 VC++ 运行时中的引擎，这似乎不允许负面的后视。

但是，您可以为您的模式添加适合您的问题的条件（从[这篇文章](http://forums.iis.net/t/1175965.aspx)中学习）。像这样的东西可能会奏效：

```
<rule name="RewriteNonAsp" stopProcessing="true">
  <match url="^(.*)$" />
  <conditions>
    <add input="{URL}" pattern="^.*?\.asp(?:\?|$)" negate="true" />
  </conditions>
  <action type="Rewrite" url="<path>" appendQueryString="false" />
</rule> 
```

# ruby-on-rails - 如何删除部署在heroku上的rails应用程序中的缓存页面

> ID：10195609
> 
> 赞同：2
> 
> 时间：2012-04-17T16:57:20.977
> 
> 标签：ruby-on-rails, caching, heroku

我有一个部署到 heroku 的应用程序运行正常。我上传了一些关于页面缓存的更改（只是测试！）现在它总是为这些页面提供服务，忽略我清除缓存的请求（`Rails.cache.clear`）

缓存的页面不是创建的，所以我`public`不`tmp`知道如何删除它们或它们在哪里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:16:36.153

我知道这听起来可能微不足道，但是您是否进行了 heroku 重启并简单地重启了您的应用程序？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T10:50:04.677

最终通过等待它们到期所需的时间来解决......

# javascript - 如何使用 Javascript 或 jQuery 从 URL 获取查询字符串以填充选择值？

> ID：10195610
> 
> 赞同：0
> 
> 时间：2012-04-17T16:57:32.080
> 
> 标签：javascript, jquery

我有 3 个选择或选项下拉列表，根据用户选择的内容需要填充或根据查询字符串选择下拉列表的选择值。所以我想我需要帮助来获取 URL 和查询字符串，并找出它是否包含用户选择来填充选择值的任何内容。

现在，当用户选择它们然后提交搜索时，我的选择值不是持久的。我将如何使用 Javascript 或 jQuery 保持它们的持久性？我的另一个问题是用户可以搜索所有选项，我可以使用，但是有一个复选框可以放置一个值，并且读取该值以搜索所有内容。在第一个页面加载时，我将如何选中该复选框并使用查询字符串 '?search=%20%20%200' 填充 URL 查询字符串。提前致谢。

这是我当前的 JS：

```
var resourceGradeId;
var resourceContentId;
var resourceProgramTypeId;
var resourceSearchAll;

$(document).ready(function() {

var searchAll = '<strong>' + "All" + '</strong>';
$('#xsltsearch_summary .dmnsSearchResultNumber:contains("0")').replaceWith(searchAll); 

$("#resourceSelect").click(function (event) { 
resourceGradeId = $('#teachersResourceSearchGrade').val();
 resourceContentId = $('#teachersResourceSearchContent').val();
 resourceProgramTypeId = $('#teachersResourceSearchProgramType').val(); 
resourceSearchAll = $('#teachersResourceSearchAll').val();
window.location.href = '/teachers/classroom-resources?search=' + resourceGradeId + ' ' + resourceContentId + ' ' + resourceProgramTypeId + ' ' + resourceSearchAll;
    });

$("select option").attr('disabled', false);

    $(":checkbox").click(function(event) { 
    //reset values
    if($(":checkbox").is(":checked")){
          $("#teachersResourceSearchGrade").val('');
          $("#teachersResourceSearchContent").val('');
          $("#teachersresourceProgramTypeId").val('');
          $("#teachersResourceSearchAll").val('0');
          $("select").attr('disabled', true);
        }
    else
        { 
          $("#teachersResourceSearchAll").val('');
          $("select").attr('disabled', false);
          $("select option").attr('disabled', false);
          }
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T17:01:33.917

检查 url 中的变量

```
getUrlVars()["search"]; 
```

这将获得 example.com/page 的值？**搜索=yolo%20no**

并把搜索的价值只是一种形式

```
<form method="get"><input type="text" name="search"/></form> 
```

这与选择菜单相同

```
<form method="get"><select name="dropdown"><option>Option 1</option></select></form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:08:28.370

刚用这个

```
var myQuery = window.location.search.substring(1);

// alert(myQuery);

if(myQuery == ''){

  window.location.href = document.URL + '?search=%20%20%200';

$(":checkbox").attr('checked', 'checked');

//alert('no query');

}else if(myQuery == 'search=%20%20%200'){

  $(":checkbox").attr('checked', 'checked');

} 

else{

} 
```

# jquery - 让 div 填充其父级的响应式方法

> ID：10195618
> 
> 赞同：2
> 
> 时间：2012-04-17T16:58:13.160
> 
> 标签：jquery, css

我有两个 div 包含在一个包装器中，其大小与主体的高度相关。其中一个 div 具有固定的高度，另一个应该填满包装 div 并让溢出的内容滚动（仅内部 div）。

小提琴：http: [//jsfiddle.net/HvC7K/](http://jsfiddle.net/HvC7K/)

通常我通过 jQuery 计算“#contactlist”的高度，但这次我需要页面响应。当我调整浏览器窗口的大小时，“#contactlist”停留在其定义的高度。每次身体大小发生变化时我是否必须重新计算高度，或者有没有办法在 CSS 中完成它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:15:04.407

我不积极，但我认为你想使用一些绝对定位。

[JSFiddle 演示](http://jsfiddle.net/kPeyB/)

您也可以设置`overflow: auto;`，除非必要，否则滚动条不会显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:52:03.500

这是 jQuery 解决方案

`#contactlist` **CSS**高度调整：

```
#wrapper { width: 200px; height: 400px; border: 4px solid black; }
#header { height: 50px; border: 2px solid red; }
#contactlist { overflow: scroll; height: 344px; border: 2px solid blue; } 
```

（只修改了联系人列表的高度）

**jQuery**代码（替换你的）：

```
h = $('#wrapper').height() ;

windowh = $(window).height();

$(window).resize(function(){

  var newh = h + ($(this).height() - windowh);
  $('#wrapper').height(newh);
  $("#contactlist").height(newh-56); //56 = 50 for header + 6 for border

}); 
```

使用此代码，在调整窗口大小的同时，您可以增加或减少两者的高度`#wrapper`以及`#contactlist`滚动。

小提琴演示：http: [//jsfiddle.net/ajp9h/](http://jsfiddle.net/ajp9h/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:06:44.247

```
#wrapper { width: 200px;border: 4px solid black; }
#header { height: 50px; border: 2px solid red; }
#contactlist { overflow: visible; border: 2px solid blue; } 
```

删除包装高度并使用`overflow:visible;`

我不确定这是否是你想要的

Jsfiddle[演示](http://jsfiddle.net/Ghokun/gDgvz/)

# emacs - 检查当前帧是否不是 X 窗口的函数

> ID：10195621
> 
> 赞同：2
> 
> 时间：2012-04-17T16:58:22.293
> 
> 标签：emacs, elisp

如果当前的 emacs 框架是 X 窗口还是终端，是否可以从 elisp 函数中检查？

我有一个最大化窗口的功能，它设置为在创建新框架时运行。但是，当我打开仅限终端的会话时，每当创建新框架时都会收到错误消息。

我希望该函数检查它是否是 X 窗口，否则什么也不做。那可能吗？

*作为记录，这里是当前函数：*

```
(defun fullscreen (&optional f)     
  (interactive)                      ;if called interactively, use current frame
  (if f (select-frame f))            ;if called as hook, use new frame
  (x-send-client-message nil 0 nil "_NET_WM_STATE" 32
                    '(2 "_NET_WM_STATE_MAXIMIZED_VERT" 0))
  (x-send-client-message nil 0 nil "_NET_WM_STATE" 32
                    '(2 "_NET_WM_STATE_MAXIMIZED_HORZ" 0))
  ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:01:17.353

你可以看看`window-system`函数。它接受一个帧可选参数（默认为当前帧）。或者，`display-graphic-p`更新（根据文档）并允许检查包含多个帧的整个显示。在您的示例中，您可以只写：

```
(if (display-graphic-p) ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:00:52.390

您还可以将`framep' since its return value is defined (according to`Ch f framep`) 用作：

```
Return non-nil if OBJECT is a frame.
Value is:
  t for a termcap frame (a character-only terminal),
 'x' for an Emacs frame that is really an X window,
 'w32' for an Emacs frame that is a window on MS-Windows display,
 'ns' for an Emacs frame on a GNUstep or Macintosh Cocoa display,
 'pc' for a direct-write MS-DOS frame.
See also `frame-live-p'. 
```

# objective-c - 从子视图调用父视图方法

> ID：10195624
> 
> 赞同：1
> 
> 时间：2012-04-17T16:58:39.643
> 
> 标签：objective-c

我有一个实现 refreshData 方法的 ViewController

在这个 ViewController 中，我添加了一个子视图，如下所示：

```
/* MainPageViewController.m
    //===============================================================================
    */

     #import "MainPageViewController.h"
     #import "SubViewController1.h"
     @implementation Drink4UMainPageViewController

    SubViewController1 *subViewController1;
    ......

     -(void)currentChatButtonMethod;
    {

        subViewController1 = [[SubViewController1 alloc]
                             initWithNibName:@"SubViewController1"
                             bundle:nil];

        UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:subViewController1];
      [self.view addSubview:navController.view];
        // viewController.

        CGRect rect = navController.view.frame;
        CGPoint origin = CGPointMake(320, -10);
        rect.origin = origin;
        navController.view.frame = rect;

        //----------------------------------------------------------------------
        // Use a transform to slide it on.
        //----------------------------------------------------------------------
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.5];
        navController.view.transform = CGAffineTransformMakeTranslation(-320, -10);
        [UIView commitAnimations];

}

     -(void) refreshData
     {
     // CODE

    } 
```

从这里我如何在“MainPageViewController”中调用“refreshData”方法？

```
 /*
    // SubViewController1.m
    =========================================================================================
    */

     #import "SubViewController1.h"
     #import <UIKit/UIKit.h>
     #import "MainPageViewController.h"

     @interface SubViewController1 : UIViewController <UITableViewDelegate, UITableViewDataSource, UINavigationControllerDelegate, UIAlertViewDelegate>
    {

    From here how can i call "refreshData" method in "MainPageViewController " ?

    }
    @end; 
```

我正在将 Mainviewcontroller 中的子视图添加到 UINavigationController 现在我想从 Subviewcontroller1 调用 Mainviewcontroller 中的方法（refreshData）

请帮助我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:28:35.273

您的子视图需要对其父视图的引用。为此，请在您的子视图控制器上创建一个属性，并在创建它时让父视图控制器将对自身的引用传递给您创建的属性。

```
 @interface SubViewController1 : UIViewController <UITableViewDelegate, UITableViewDataSource, UINavigationControllerDelegate, UIAlertViewDelegate>
{    }

//Add this section <--------------------------------------
@property (nonatomic, retain) Drink4UMainPageViewController* parent;

-(void)DoStuff
{
    [parent refreshData];
}
@end;

-(void)currentChatButtonMethod;
{

    subViewController1 = [[SubViewController1 alloc]
                         initWithNibName:@"SubViewController1"
                         bundle:nil];

    subViewController1.parent = self;                     // Add this line<--------------

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:subViewController1];
    [self.view addSubview:navController.view]; 
```

# mysql - 如何将 Coldfusion 连接到 MySQL 数据库

> ID：10195627
> 
> 赞同：0
> 
> 时间：2012-04-17T16:58:53.973
> 
> 标签：mysql, database, coldfusion, connect, coldfusion-8

完全是新手，完全迷路了...

我正在尝试在运行 Windows XP 的本地 (apache 2.2) 网络服务器上使用 mysql(5.5) 数据库设置coldfusion(8)。

Coldfusion 和 Apache 正在运行，但我不知道如何使用 MySQL 来解决这个问题。

我正在执行以下操作：
- 通过逆向工程将 file1.sql 和 file2.sql 导入 MySql 工作台（5.2）
- 将此新模型作为 base.mwb 保存到我的 Apache htdocs 文件夹
中 - 打开 Coldfusion 管理员数据源
- 添加新源"myName", 数据库 "base", localhost, 3306, root, 密码

当我尝试添加时，我总是得到*未知数据库“基础”*错误。

我还尝试在 MySQL 中建立连接或在 MySQL 工作台中设置新的服务器实例，但这些也因*没有数据库 "base"*而失败。

我想我错过了一些东西（可能是一个数据库:-)...感谢一些指针或一个虚拟教程。我渴望一些东西出现在[http://localhost](http://localhost) ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:18:28.650

我不得不猜测您来自使用 Access DB 的背景。MySQL 和 ColdFusion 不能通过在 CF 应用程序中有一个 DB 文件一起工作。CF 使用 JDBC 连接连接到网络上某处（甚至在同一台机器上）正在运行的 MySQL 服务器。它不查看数据库文件并使用它。因此，您需要安装 MySQL 服务器，然后将数据库导入其中。然后使用 CF 的数据源与之连接。

# android - 动作栏：不管房间如何，在溢出中休息时可见 1 个项目

> ID：10195630
> 
> 赞同：2
> 
> 时间：2012-04-17T16:59:09.113
> 
> 标签：android

我玩过所有的 showAsAction 值都无济于事。

我基本上只是希望删除按钮可见，而退出将进入溢出（3个点）。我将在溢出中添加更多内容，但我想知道如何强制退出。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_delete"
      android:icon="@drawable/ic_action_delete"
      android:showAsAction="ifRoom" />
<item android:id="@+id/menu_exit"
      android:title="Exit"
      android:showAsAction="collapseActionView" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:11:12.177

用于`android:showAsAction="never"`强制操作项进入溢出。

# java - Bonjour java：查找属于特定网络接口的服务的地址

> ID：10195631
> 
> 赞同：3
> 
> 时间：2012-04-17T16:59:13.157
> 
> 标签：java, dns-sd

我正在尝试查找与注册到特定网络接口的已解析 Bonjour 服务匹配的地址。

DNSSD 为我提供`hostname`了服务的 和 网络接口索引：`ifIndex`. 如果主机有多个网络接口，我必须找出哪个网络接口属于`ifIndex`该服务注册到的（假设服务`ifIndex`不是 0 或 -1）。

```
public void serviceResolved(DNSSDService resolver, int flags, int ifIndex, String fullName, String hostName, int port, TXTRecord txtRecord) {
    InetAddress[] addresses = null;
    try {
        addresses = InetAddress.getAllByName(hostName);
    } catch (UnknownHostException e) {}

    for (InetAddress address : addresses) {
        //How do I know what the appropriate address is?
    }
} 
```

有谁知道如何找出已解决的IP地址`hostname`属于已解决的`ifIndex`？

非常感谢， 马蒂斯

# c# - 在列表框中的消息框中显示多个信息

> ID：10195636
> 
> 赞同：0
> 
> 时间：2012-04-17T16:59:30.113
> 
> 标签：c#, winforms

我正在开发一个程序，该程序让我输入有关船的信息并将该信息添加到列表框中。唯一会出现在列表框中的是船的名称。我需要知道如何在消息框中显示来自其他文本框的所有信息，例如长度、帆尺寸和引擎。任何帮助表示赞赏。

```
public partial class Form1 : Form
{
    ArrayList Home;
    public Form1()
    {
        InitializeComponent();
        Home = new ArrayList();

    }

    private void btnAddApartment_Click(object sender, EventArgs e)
    {
        //instantiate appartment and add it to arraylist
        try
        {
            Apartment anApartment = new Apartment(txtID.Text, txtAddress.Text, int.Parse(txtYearBuilt.Text), int.Parse(txtBedrooms.Text),
                double.Parse(txtSquareFootage.Text), double.Parse(txtPrice.Text), txtFurnished.Text);
            Home.Add(anApartment);
            ClearText(this);
        }
        catch (Exception)
        {
            MessageBox.Show("Make sure you entered everything correctly!", "Error", MessageBoxButtons.OK);
        }            

    }

    private void btnAddHouse_Click(object sender, EventArgs e)
    {
        try 
        {
            House aHouse=new House(txtID.Text, txtAddress.Text, int.Parse(txtYearBuilt.Text), int.Parse(txtBedrooms.Text),
                double.Parse(txtSquareFootage.Text), double.Parse(txtPrice.Text),int.Parse(txtGarageCapacity.Text));
            Home.Add(aHouse);
            AddHouseToListBox();
            ClearText(this);
        }
        catch (Exception)
        {
            MessageBox.Show("Make sure you entered everything correctly!", "Error", MessageBoxButtons.OK);
        }
    }

    private void ClearText(Control controls)
    {
        foreach (Control control in controls.Controls)
        {
            if (control is TextBox)
            {
                ((TextBox)control).Clear();
            }
        }
    }

    private void AddHouseToListBox()
    {
        lstHouse.Items.Clear();
        foreach (House person in Home)
        {
            lstHouse.Items.Add(person.GetAddress());
        }
    }

    private void AddApartmentToListBox()
    {
        lstApartment.Items.Clear();
        foreach (Apartment persons in Home)
        {
            lstApartment.Items.Add(persons.GetAddress());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:11:03.410

如果您说要在 ListBox 中显示多列数据，那么您应该考虑切换到[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview%28v=vs.100%29.aspx)。

然后，您将使用与此类似的代码添加其他列值：

将**ListView**控件添加到您的窗体。

我假设您有 4 个名为**txtBoatName**、**txtLength**、**txtSailSize**、**txtEngines的文本框**

```
// You can either set the columns and view in code like below, or use
// the Form designer in Visual Studio to set them.  If you set them in code,
// place the following in Form.Load

listView1.View = View.Details;

listView1.Columns.Add("Boat Name", -2, HorizontalAlignment.Left);
listView1.Columns.Add("Length", -2, HorizontalAlignment.Left);
listView1.Columns.Add("Sail Size", -2, HorizontalAlignment.Left);
listView1.Columns.Add("Engines", -2, HorizontalAlignment.Center);

// When you want to add a boat to the ListView, use code like the following:

ListViewItem item1 = new ListViewItem(txtBoatName.Text,0);
item1.SubItems.Add(txtLength.Text);
item1.SubItems.Add(txtSailSize.Text);
item1.SubItems.Add(txtEngines.Text);

listView1.Items.Add(item1); 
```

# magento - Magmi 多店导入

> ID：10195637
> 
> 赞同：1
> 
> 时间：2012-04-17T16:59:33.653
> 
> 标签：magento, magmi

首先，感谢您提供 Magmi，它确实帮助我们每天更新我们的产品。

我想问你一个问题 - 我们想在匈牙利销售我们的产品，我想问你，我们应该如何配置 .csv 文件以使用不同语言的产品名称？到目前为止，我们还没有做任何特别的事情，我只是设置了一些商店管理设置，所以我们的 .hu 版本可以使用 url 访问。

附加信息：

Magento 商店管理设置：

网站名称
商店名称
商店视图名称

ourshop.hu
胡
马扎尔

ourshop.sk
Sk
斯洛文尼亚

我们在 mamgi csv 文件中填写这些属性：sku、_attribute_set、_type、magmi:delete、_product_websites、status、visibility、name、url_key、description、short_description、enable_googlecheckout、category_ids、weight、price、special_price、special_from_date、tax_class_id、manage_stock、 use_config_manage_stock, VeÄľkost:drop_down:1, size, brand, spinview, labeldiscount, thumbnail, small_image, image, media_gallery, media_gallery_reset

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:28:30.047

您是否查看过使用“商店”列？

文档还不错： http: [//sourceforge.net/apps/mediawiki/magmi/index.php ?title=Magmi_Behaviour__-_store_column](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_Behaviour_-_store_column)

> magmi 中的商店栏接受**商店查看代码**，一个或多个。

还有一个例子：

```
store,sku,attribute1,attribute2
"admin","0001","value1","value2" <= sets default values for attributes attribute1 & attribute2 for sku 0001
"sv1","0001","value1","value2"  <= sets values for attributes attribute1 & attribute2 for store view sv1 for sku 0001
"sv1,sv2","0002","value1","value2" <= sets values for attributes attribute1 & attribute2 for store view sv1 & sv2 for sku 0002 
```

那是你要找的吗？

# perl - 如何使用 Win32::Console::Input 捕捉 `shift`-`key` 组合？

> ID：10195641
> 
> 赞同：0
> 
> 时间：2012-04-17T16:59:46.453
> 
> 标签：perl, winapi, input, console

我怎样才能捕捉到`shift`-`some-key`与这个脚本的组合？
当我按下箭头键时，我得到了我期望的结果，但是当我按下`shift`-`tab`它不会返回`KEY_BTAB`值。

```
use warnings;
use 5.12.0;
use Win32::Console qw(STD_INPUT_HANDLE ENABLE_MOUSE_INPUT);
use constant {
    RIGHT_ALT_PRESSED  => 0x0001,
    LEFT_ALT_PRESSED   => 0x0002,
    RIGHT_CTRL_PRESSED => 0x0004,
    LEFT_CTRL_PRESSED  => 0x0008,
    SHIFT_PRESSED      => 0x0010,

    VK_LEFT     => 0x25,
    VK_UP       => 0x26,    
    VK_RIGHT    => 0x27,    
    VK_DOWN     => 0x28,    
    VK_TAB      => 0x09,    
};
use constant SHIFTED_MASK =>
    RIGHT_ALT_PRESSED |
    LEFT_ALT_PRESSED |
    RIGHT_CTRL_PRESSED |
    LEFT_CTRL_PRESSED |
    SHIFT_PRESSED;

my %d = (
    KEY_DOWN            => 258,
    KEY_UP              => 259,
    KEY_LEFT            => 260,
    KEY_RIGHT           => 261,
    KEY_BTAB            => 353,
);

my $con_in = Win32::Console->new(STD_INPUT_HANDLE);
$con_in->Mode(ENABLE_MOUSE_INPUT);

while ( 1 ) {
        my $key = getch();
        say "<$key>";
        last if $key == 113;
}

sub getch {
    my @event = $con_in->Input();
    my $event_type = shift( @event );
    if ( defined $event_type and $event_type == 1 ) { 
        my ( $key_down, $repeat_c, $vkcode, $vsccode, $char, $ctrl_ks ) = @event;
        if ( $char ) {
            return $char;
        }
        else {
            if ( $vkcode == VK_UP and ( $ctrl_ks & SHIFTED_MASK ) == 0 ) {
                return $d{KEY_UP};
            }
            elsif ( $vkcode == VK_DOWN and ( $ctrl_ks & SHIFTED_MASK ) == 0 ) {
                return $d{KEY_DOWN};
            }  
            elsif ( $vkcode == VK_RIGHT and ( $ctrl_ks & SHIFTED_MASK ) == 0 ) {
                return $d{KEY_RIGHT};
            }        
            elsif ( $vkcode == VK_LEFT and ( $ctrl_ks & SHIFTED_MASK ) == 0 ) {
                return $d{KEY_LEFT};
            } 
            elsif ( $vkcode == VK_TAB and $ctrl_ks == SHIFT_PRESSED ) {
                return $d{KEY_BTAB};    # <--
            }
            else {
                say "beep";
            }
        }
    }
} 
```

当我按下`shift`和时输出`tab`：
哔
<1>
<9>
<9>
哔
<1>

以这种方式编辑`getch`例程后

```
sub getch {
    my @event = $con_in->Input();
    my $event_type = shift( @event );
    if ( defined $event_type and $event_type == 1 ) { 
        my ( $key_down, $repeat_count, $virtual_keycode, $virtual_scancode, $char, $ctrl_key_state ) = @event;
        if ( $char ) {
            if ( $key_down ) {
                return $char for $repeat_count;
            }
        }
        else {
            if ( $virtual_keycode == VK_UP and ( $ctrl_key_state & SHIFTED_MASK ) == 0 ) {
                if ( $key_down ) {
                    return $d{KEY_UP} for $repeat_count;
                } 
            }
            elsif ( $virtual_keycode == VK_DOWN and ( $ctrl_key_state & SHIFTED_MASK ) == 0 ) {
                if ( $key_down ) {          
                    return $d{KEY_DOWN} for $repeat_count;
                }
            }  
            elsif ( $virtual_keycode == VK_RIGHT and ( $ctrl_key_state & SHIFTED_MASK ) == 0 ) {
                if ( $key_down ) {
                    return $d{KEY_RIGHT} for $repeat_count;
                }
            }        
            elsif ( $virtual_keycode == VK_LEFT and ( $ctrl_key_state & SHIFTED_MASK ) == 0 ) {
                if ( $key_down ) {
                    return $d{KEY_LEFT} for $repeat_count;
                }
            } 
            elsif ( $virtual_keycode == VK_TAB and ( $ctrl_key_state & SHIFTED_MASK ) == SHIFT_PRESSED ) {
                if ( $key_down ) {
                    return $d{KEY_BTAB} for $repeat_count;
                }
            }
            else {
                say "beep";
            }
        }
    }
} 
```

我得到这个输出：
beep
<1>
<9>
<0>
beep
<1>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:27:35.070

当我运行您的代码时，当我点击+时，`$ctrl_ks`其值为 48 (0x0030) ，释放时为 32 (0x0020) 。我认为您要进行的检查是`Shift``Tab``Shift`

```
elsif ($vkcode==VK_TAB and ($ctrl_ks & SHIFT_PRESSED)==SHIFT_PRESSED) {
    return $d{KEY_BTAB}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:36:05.267

首先，`$char`设置为 9，所以你永远不会得到你的支票。将`if ($char)`支票移到更合适的地方。

* * *

其次，你的检查是错误的。如果 Caps Lock 处于打开状态，则以下操作将不起作用。

```
elsif ( $vkcode == VK_TAB and $ctrl_ks == SHIFT_PRESSED ) 
```

您应该只检查您感兴趣的标志。

```
elsif ($vkcode==VK_TAB and ( $ctrl_ks & SHIFTED_MASK ) == SHIFT_PRESSED) 
```

* * *

最后，有时您只会收到一次多次按下的通知。这是由 发出的信号`$repeat_count`。您忽略了这一点，因此您可能会忽略键。

您尝试`$repeat_count`在第二个片段中处理，但惨遭失败。部分问题是您`for $repeat_count`应该从我的其他答案中复制`for 1..$repeat_count`，另一个问题是即使`$repeat_count`大于一个值，您也只返回一个值。

* * *

```
my @kbd_queue;
sub getch {
    my @event;
    if (@kbd_queue) {
       @event = ( 1, @{ pop @kbd_queue } );
    } else {
       @event = $con_in->Input();
    }

    my $event_type = shift( @event );
    if ( defined $event_type and $event_type == 1 ) { 
        my ( $key_down, $repeat_count, $virtual_keycode, $virtual_scancode, $char, $ctrl_key_state ) = @event;
        return -1 if !$key_down;

        if ( $virtual_keycode == VK_UP and ( $ctrl_key_state & SHIFTED_MASK ) == 0 ) {
            push @kbd_queue, \@event for 2..$repeat_count;
            return $d{KEY_UP};
        } 
        ...
        elsif ( $virtual_keycode == VK_TAB and ( $ctrl_key_state & SHIFTED_MASK ) == SHIFT_PRESSED ) {
            push @kbd_queue, \@event for 2..$repeat_count;
            return $d{KEY_BTAB};
        }
        elsif ( $char ) {
            push @kbd_queue, \@event for 2..$repeat_count;
            return $char;
        }
        else {
            say "beep";
        }
    }
} 
```

你应该把它转换成表格驱动的东西。

# java - 我们如何从动作中获得 JSON 响应

> ID：10195642
> 
> 赞同：0
> 
> 时间：2012-04-17T16:59:50.637
> 
> 标签：java, javascript, json, jsp

我对 Java EE 很陌生。我面临一个问题。

在这里，我对 Test.jsp 有要求，它应该具有以下功能

1）jsp会有一个输入区，可以放置json字符串输入请求。

2) 下拉列表显示以下列表

```
https://localhost:9443/my.do

https://localhost:9443/my2.do 
```

3) 提交按钮：在提交 Javascript 时，将输入的 json 请求发送到下拉列表中选择的相应操作。

4）输出区域：显示动作的Json响应。

您可以在 jsp 中保留任何工具来解析 json，例如 Jquery

> 对象 { “结果代码” : “OK” “resultMessage” : “ ” }

请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:03:03.850

将响应的内容类型设置为“application/json”，并将 JSON 编码的对象写入响应流。

# facebook - 使用 WP7 进行 Facebook 身份验证

> ID：10195646
> 
> 赞同：1
> 
> 时间：2012-04-17T17:00:02.087
> 
> 标签：facebook, windows-phone-7, authentication, oauth

我在我的 wp7 应用程序中有点卡住了 facebook 身份验证。

我现在拥有的：

1.  带有 WebBrowser 控件的登录页面
2.  我可以从 facebook 获取 access_token
3.  将其保存到电话 IsolatedStorage

如果用户已经通过身份验证，我想要做的是跳过登录页面，但我不太了解流程，我应该检查什么条件。

在服务器端我有 REST api，当用户通过身份验证时，我从 facebook 获取他的个人信息并调用我的 api 以将此信息存储在数据库 + access_token 中。然后我将它与所有请求一起使用以保护我的 api。这是好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:19:43.353

您并没有真正检查条件。您尝试使用访问令牌（发布状态，上传图片或其他）做任何您想做的事情，然后，如果您遇到 oauth 异常，您会再次打开浏览器以获取新的访问令牌（浏览器只会闪烁 - 它不需要任何用户输入，除非他们实际更改了密码或其他东西）

# jquery - 如果某些东西与 jQuery 有焦点，如何防止切换动作

> ID：10195647
> 
> 赞同：0
> 
> 时间：2012-04-17T17:00:12.390
> 
> 标签：jquery, html, css, toggle, jsfiddle

见这里：http: [//jsfiddle.net/kbkPL/](http://jsfiddle.net/kbkPL/)

现在在 mouseenter 和 mouseleave 上，隐藏的滑动面板滑入和滑出。

如果用户将注意力集中在该输入框上，我想保持面板打开（并防止它滑出）直到焦点丢失或用户按下提交。我将如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:07:58.777

这是一种可能：

```
$(document).ready(function(){
$("#promoContentTrigger").mouseenter(function(){
    $("#promoContentPanel").toggle("fast");
    $(this).toggleClass("hideTrigger");
});
$("#promoContentPanel").mouseleave(function(){
    if ($(".textBox").is(":focus")) {return;}
    $("#promoContentPanel").toggle("fast");
    $("#promoContentTrigger").removeClass("hideTrigger");
}); 
```

});​</p>

# java - Java - 使用静态方法中的实例类？

> ID：10195648
> 
> 赞同：1
> 
> 时间：2012-04-17T17:00:12.307
> 
> 标签：java, static, instance, inner-classes

多年来我一直在使用 .NET 进行编程，并且我正在通过一些简单的入门程序投入到 Java 中。

不过我有点麻烦...

当我用 . 创建我的启动类时`public void main`，编译器不会让我实例化我编写的任何类？

我得到的错误是“非静态变量 _processor 不能从静态上下文中引用”，其中 _processor 是我试图从我编写的 Processor 类中实例化的对象。

当我将处理器更改为静态类时，程序将编译并运行得很好，但我不想让我的所有类都是静态的。

有什么办法吗？

提前致谢！

这是我写的所有内容。它不会在当前状态下编译：

```
class Lab
{
    public static void main(String[] args)
    {
        Processor proc = new Processor();

        proc.Go();
    }

    private class Processor
    {
        private Random _rand = new Random();

        public void Processor() {}

        public void Go()
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:03:46.400

是不是`Processor`一个内部类`Lab`？（是的，既然您发布了代码，我的怀疑得到了证实）。

在 Java 中，[非静态内部类包含对外部类的包含对象的隐式引用](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)，因此它们不能从静态上下文（从您的`main`方法）中实例化。

所以

*   要么创建`Lab`(eg `myLab`) 的实例，然后调用`myLab.new Processor()`，要么
*   声明`Processor`static （就像你做的那样），或者
*   变成`Processor`顶级班。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:06:59.087

这是你的问题吗？

```
public class DemoClass{

  String field;

  public static void main(String[] args){
    field = "Hey"; //forbidden - can't access instance field from static context
    DemoClass dc = new DemoClass();
    dc.field = "Hey"; //this is ok
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:04:02.970

您应该从 main 调用构造函数：

```
public static void main(String[] args){
new MyClass();
} 
```

并将您的实例化放在构造函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:10:07.503

> 但我不想让我的所有课程都是静态的。

根据我的经验，Java 中的大多数内部类都是静态的。如果您可以在单独的文件中编写内部类（它不直接使用包含类的成员），则应将其定义为静态。Java 允许您在其他类中编写内部静态类实际上只是为了方便。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T17:10:54.203

您的流程类是您的实验室类的内部类，除非您实例化您的实验室类的实例，否则您无法创建流程类的实例，除非该内部类是静态的或其他东西。

Main 将在您的实验室类中运行，因为它是静态的，但是当您尝试创建私有内部类的实例时，您不能，因为该类是 Lab 的“私有内部”类，而您没有一个实验室实例，所以你不能直接引用它。

您可以尝试使您的处理器类成为静态的，或者至少是公共的，或者更好的是，您可以先实例化您的实验室类的实例，并通过您的实例化实验室类来引用处理器类的创建。

# c# - 在 RavenDB LINQ 查询中使用日期字段比较

> ID：10195649
> 
> 赞同：2
> 
> 时间：2012-04-17T17:00:14.813
> 
> 标签：c#, linq, nosql, ravendb

在 RavenDB 中，我想使用日期字段查询数据库。如何编写 LINQ 查询来查询涉及日期比较的 RavenDB..

```
Session.Query<Movie>()
.Where(x => x.Status == "New" && x.ReleaseDate > DateTime.Parse("04/03/2012 00:00:00"))
.Dump(); 
```

在 LINQ 垫中返回零记录。我写查询的方式不对。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:00:00.920

而不是 DateTime.Parse() 尝试实例化一个新的 DateTime。

```
Session.Query<Movie>()
.Where(x => x.Status == "New" && x.ReleaseDate > new DateTime(2012, 4, 3))
.Dump(); 
```

# jquery - Salesforce：创建有条件的 Apex 表单字段

> ID：10195652
> 
> 赞同：0
> 
> 时间：2012-04-17T17:00:15.940
> 
> 标签：jquery, salesforce, visualforce

我正在使用 Salesforce 中的自定义表单，如果选中某个复选框，则在使可选字段动态变为必填字段时遇到了一个绊脚石。

例如，如果用户选中*电子转帐*选项进行付款，则所有与*EFT*相关的字段都应启用，Apex 应将它们显示为必填字段（如非​​可选字段）。

我目前正在使用 jQuery 启用字段，但很难找到如何将字段更改为 Apex 必需字段的示例。

感谢您提供解决此问题的任何帮助或线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:32:54.403

[验证规则](https://login.salesforce.com/help/doc/en/fields_useful_field_validation_formulas.htm)对您有用吗？您可以为每个将复选框考虑在内的动态必填字段都有一个验证规则。这将处理服务器端验证，但如果您使用 Apex 类和扩展（如 JavaScript 或 jQuery）以外的任何东西来提交数据，则需要单独处理客户端。

为了利用 Visualforce 提供的默认 CSS 样式，如果用户尝试保存而不输入值，请向输入元素添加“错误”类。

这是我将如何处理客户端验证的代码片段（在 noConflict 模式下使用 jQuery as `j$`）：

```
// check required fields
j$(RequiredFields).each(function(index,field)
{
    if(!(field.val() && field.val() != "" && field.val() != "--None--")) { field.addClass("error"); RequiredFieldsInError.push(field); } 
    else { field.removeClass("error"); }
});

if(RequiredFieldsInError.length > 0)
{
    var RequiredFieldLabels = [];

    j$(RequiredFieldsInError).each(function(index,field){
        var RequiredFieldLabel = j$("label[for$="+j$(field).attr('id')+"]").html().trim(); RequiredFieldLabels.push(RequiredFieldLabel);
        field.after("<div id='"+field.attr("id")+"_error' class='errorMsg' >"+RequiredFieldLabel+" is Required.</div>");
    });

    if (RequiredFieldLabels.length > 1) {
        RequiredFieldLabels[RequiredFieldLabels.length - 1] = "and " + RequiredFieldLabels[RequiredFieldLabels.length - 1];
    }

    j$("#ErrorSummary")
        .html(RequiredFieldLabels.join(", ")+" "+(RequiredFieldLabels.length > 1 ? "are" : "is a")+" required field(s). ")
        .css("color","#CC0000");

    return;
} 
```

# dictionary - Groovy - 在对象实例化期间忽略地图中的额外属性

> ID：10195653
> 
> 赞同：23
> 
> 时间：2012-04-17T17:00:16.027
> 
> 标签：dictionary, groovy, constructor, attributes

有没有办法让 groovy 在对象实例化期间忽略地图中的额外属性？例子：

```
class Banana{
    String name
}
def params = [name:'someGuy', age:13]
new Banana(params) 
```

在这个例子中，groovy 抛出一个 No such property: age 异常（显然是因为年龄没有在 Banana 类中定义。不求助于手动将地图中的所需属性映射到 Banana 类的构造函数，有没有办法告诉香蕉忽略额外的属性？

我注意到 Grails 域类不会遇到这个问题，我希望这里有同样的行为！

感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-09T08:18:06.717

有一种更简单的方法来处理这种情况。

在你的bean中，只需实现一个特征

```
trait IgnoreUnknownProperties {
    def propertyMissing(String name, value){
        // do nothing
    }
}

class Person implements IgnoreUnknownProperties {
    String name
}

map = ["name": "haha", "extra": "test"]
Person p = new Person(map)

println p.name 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-17T17:18:44.313

不幸的是，在 groovy 中没有内置的方法可以做到这一点。Grails 通过为领域对象生成自己的构造函数来实现这一点。一个简单的解决方法是使用这样的构造函数：

```
Banana(Map map) {
    metaClass.setProperties(this, map.findAll { key, value -> this.hasProperty(key) })
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T09:51:34.480

如果所有属性都存在，另一种不会影响性能的方法：

```
public static Banana valueOf(Map<String, Object> params) {
    try {
        return new Banana(source)
    } catch (MissingPropertyException e) {
        log.info(e.getMessage())
        source.remove(e.property)
        return valueOf(source)
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-26T10:34:22.170

类似于@JiankuanXing 的答案（这是一个完美的答案`:)`），但不是使用[`trait`](http://docs.groovy-lang.org/next/html/documentation/core-traits.html)你的类可以扩展[`Expando`](http://docs.groovy-lang.org/latest/html/api/groovy/util/Expando.html)和添加`propertyMissing`方法：

```
class Banana extends Expando {
    String name

    def propertyMissing(name, value) {
        // nothing
    }
}
def params = [name:'someGuy', age:13]
new Banana(params) 
```

在这种情况下使用`trait`fit 可能会更好，因为它允许行为组合，并且您可以将它添加`trait`到所有需要它的类对象中。我只添加了这个替代方案，因为`Expando`可以使用`groovy 1.5`版本 while`traits`在[`groovy 2.3`](http://groovy-lang.org/releasenotes/groovy-2.3.html).

希望能帮助到你，

# python - 如何正确使用反斜杠在 if 语句中继续一行？

> ID：10195656
> 
> 赞同：1
> 
> 时间：2012-04-17T17:00:24.200
> 
> 标签：python

例如 D，如果 sum_p 不为零。

```
D = 1/sum_p if sum_p \
    else 0 
```

如果我想返回值怎么办？我应该这样做：

```
return 1/sum_p if sum_p \
else 0 
```

或者只是写

```
if...
else: return 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:04:35.713

如果要执行单个语句条件返回，请使用：

```
return 1 / sum_p if sum_p else 0 
```

这**不是一个`if`声明**。这是一个[条件表达式](http://docs.python.org/reference/expressions.html#conditional-expressions)。把它想象成

```
return (this_value if this_condition_is_true else that_value) 
```

`return`本身在条件*之外*。

如果行足够长，则必须将其拆分，从风格上讲，我建议使用普通`if`语句和两个`return`语句。

一般来说，*不要`\`用作行终止符*。[PEP-8](http://www.python.org/dev/peps/pep-0008/#maximum-line-length)建议您始终使用括号：

> 包装长行的首选方法是在括号、方括号和大括号内使用 Python 的隐含行继续。通过将表达式括在括号中，可以将长行分成多行。这些应该优先使用反斜杠来继续行。确保适当缩进续行。打破二元运算符的首选位置是在运算符之后，而不是在它之前。一些例子：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:02:02.923

如果您将其分配给变量，则第一种方法很好。

如果要返回值，请将赋值替换为`return`语句。

例子：

```
return 1/sum_p if sum_p \
else 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:03:28.920

就我个人而言，我更喜欢远离转义换行符。很多时候，您可以使用括号来实现相同的目标。使用转义换行符作为 \ 后的空格可能会出错，这可能会破坏您的代码。要使用您的示例：

```
return (1.0 / sum_p if sum_p
    else 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:04:45.347

`\`除非绝对必要，否则请勿使用。

采用

```
D = 0 if not sum_p else 1.0/sum_p 
```

或者

```
return 0 if not sum_p else 1.0/sum_p 
```

如果行变得太长或太复杂，只需使用：

```
if cond: ...
else : .... 
```

# javascript - 如何同步检查应用程序是否仍被 javascript sdk 授权？

> ID：10195657
> 
> 赞同：1
> 
> 时间：2012-04-17T17:00:35.893
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我试过了：

```
var auth_response = FB.getAuthResponse(); 
```

但是，即使应用程序已被取消授权，它也总是会返回带有访问令牌的 authResponse。我期待一个不同的结果。

我也尝试订阅 authResponseChange。

```
FB.Event.subscribe('auth.authResponseChange', checkFbAuthorization);

function checkFbAuthorization(response) {
    if (response.status === 'connected') {
        fb_authorized = true;
    } else if (response.status === 'not_authorized') {
        fb_authorized = false;
    } 
```

但是，当我从 facebook 帐户设置页面取消对应用程序的授权时，没有调用 checkFbAuthorization。

我也尝试使用 fb.login，但如果应用程序被取消授权，它不会打开弹出窗口。

一个可能的解释是我应该等待更长的时间，我尝试了几次等待更长时间但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:32:44.043

看看这个演示页：

[http://www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609](http://www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609)

有一个按钮用于检查您是否已连接！请记住，从应用程序列表中删除身份验证后，您必须重新访问该应用程序，因为每次访问都会通过 JS 保存身份验证！

编辑：这个按钮只是测试您是否已连接。您可以链接请求和事件以获取您的应用程序的身份验证工作流:)

# php - cURL - 在浏览器中工作，而不是在 cURL

> ID：10195658
> 
> 赞同：9
> 
> 时间：2012-04-17T17:00:36.450
> 
> 标签：php, debugging, curl

我已经为这项任务苦苦挣扎了将近三天，我想我缺少一些基本的 cURL 技能。

我开始：

在 IE 的 F12 中，我在第一页看到 2 个 POST：（我注意到第一个得到 302 应该是重定向，而使用 cURL 我只得到 200）

填写验证码：

在第二页（验证码之后）：

交通：

这是我的代码（我无法继续使用它，因为它不适用于早期阶段）：

我构建了一个特殊的表单，该表单使用（使用 cURL）提交到我自己的页面，而该页面`GET`又访问了该网站：

```
$id=$_GET['id']; // getting the biznumber
$humanCode=$_GET['nobot'];

$curl = curl_init();
curl_setopt ($curl, CURLOPT_URL, "https://www.*******.******.***");

// setting some https to be able to access the website from my local computer.
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($curl, CURLOPT_CAINFO, "c:/xampp/htdocs/CAcerts/curl-ca-bundle.crt");

// I know the values for the ASPX vars like __EVENTTARGET, __EVENTARGUMENT, __VIEWSTATE are arbitrary now. I need to take care of that but I don't yet know how.

$postarr= array (
                "__EVENTTARGET"=>"",
                "__VIEWSTATE=" =>"%2FwEPDwULLTEzMzI2OTg4NDYPZBYCZg9kFgQCBA8PZBYCHgdvbmNsaWNrBQxnb1RvTWl2emFrKClkAgYPD2QWAh8ABQxnb1RvTWl2emFrKClkZM6iZZ0Qaf2CpfXoJJdZ0IqaWsDO",
                "__EVENTARGUMENT=" =>"",
                "__EVENTVALIDATION" =>"%2FwEWBQKgysLGCwL2r7SGDQLh4ri%2BAwLWws7NDwLWwpLPD%2F1HuCAFYzs2seaziWbYEXjDfigP",
                "hidUrlFileIshurim"=>"https%3A%2F,
"cod"=>"3322"
                    );

$fields_string='';
foreach($postarr as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

curl_setopt($curl, CURLOPT_POST      ,1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $fields_string);

curl_setopt($curl, CURLOPT_TIMEOUT, 10);

curl_setopt ($curl, CURLOPT_USERAGENT, "User-Agent  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; MAAU)");

// I made a cookie file and it seems to work
$cookiefile = "d:/cookie.txt";
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookiefile); 
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookiefile);

curl_setopt($curl, CURLOPT_FRESH_CONNECT , 1);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION  ,1);

curl_setopt($curl, CURLOPT_HEADER      ,1);  // DO NOT RETURN HTTP HEADERS
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$temp=curl_exec($curl);
$info = curl_getinfo($curl);

$html = mb_convert_encoding($temp, 'HTML-ENTITIES', 'utf-8'); 
echo "ERRCODE: ".curl_error($curl);
echo '<br /><br />';
echo "INFO : ";
print_r($info);
echo '<br /><br />';
$httpcode = curl_getinfo($curl, CURLINFO_HTTP_CODE);
echo "CODE: ".$httpcode;
echo '<br /><br />';
echo "CODE: ".$httpcode;
echo '<br /><br />';
echo "VARS: ".$vars;
echo '<br /><br />';
//echo $html;

curl_setopt ($curl, CURLOPT_URL, "https://www.*******.******.***");
curl_setopt($curl, CURLOPT_FRESH_CONNECT , 0);

echo "<br /><br /><b>2nd</b><br /><br />";
$temp=curl_exec($curl);
$info = curl_getinfo($curl);

$html = mb_convert_encoding($temp, 'HTML-ENTITIES', 'utf-8'); 
echo "ERRCODE: ".curl_error($curl);
echo '<br /><br />';
echo "INFO : ";
print_r($info);
echo '<br /><br />';
echo $html; 
```

甚至无法开始工作。它从返回 200 OK 而不是 302 开始，有时我也会得到 500。

我知道 ASPX 变量实际上可能至关重要，但如果我的浏览器可以制作这些变量并将它们发送到服务器，cURL 不能做同样的事情吗？

谢谢你的帮助 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:37:44.727

问题解决了。
这是使用正确标题的问题。根据浏览器的报告，我完成了所有步骤，结果出现了。

我通过使用以下方法完成了每个步骤：

```
curl_init
curl_setopt()
..
curl_setopt()
curl_exec()
curl_close() 
```

这样我必须手动设置每个请求并完成设置。它使代码更长，但更容易理解。

我曾想过该站点使用一些 javascript 特殊代码来使站点工作，所以我对所有额外的 javascript 代码感到很困扰，结果证明这是不必要的。

这一切都是为了更有条理并遵循正确的标题设置。

此外，由于这是一个`ASPX`站点，我必须在每次迭代中阅读并记住最后一页的`VIEWSTATE`和`VALIDATION`。这是我一直收到的 500 内部错误服务器消息的第一个也是非常原因的。

我使用 Firebug 和 LiveHttpHeaders 来总结每个步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T02:51:34.217

“甚至不能让它开始工作。它开始给我一个 200 OK，而不是 302，有时我也会得到一个 500。”

```
curl_setopt($curl, CURLOPT_FOLLOWLOCATION  ,1); 
```

您已将 Curl 设置为遵循任何 302 重定向。这些将在 Curl 内部被跟踪，并且不会被 PHP 看到。

还：

```
curl_setopt($curl, CURLOPT_HEADER      ,1);  // DO NOT RETURN HTTP HEADERS 
```

注释的作用与代码的作用完全相反……这似乎是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T00:37:02.823

在您制作 cURL 之前，您需要查看使用的 requeste 字段。通常找不到来自 aspx 的 HTTP 500 字段发送..

```
foreach($postarr as $key=>$value) { 
  $fields_string .= $key.'='.$value.'&'; 
  echo" $fields_string <br> ";
} 
```

确保，当您发送请求时，该字段不是动态的..希望这有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-06T19:51:03.170

我用这个：

```
curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"]); 
```

它有点模拟卷曲，就像它有浏览器名称和版本一样。

# javascript - 在选项卡而不是窗口中打开

> ID：10195662
> 
> 赞同：3
> 
> 时间：2012-04-17T17:00:44.077
> 
> 标签：javascript

> **可能重复：**
> [使用 javascript 在新选项卡中打开 url](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)

我正在尝试使它在选项卡中打开，而不是在窗口中打开。据我所知，这是由浏览器偏好设置的。没有真正的方法可以覆盖它吗？我知道您可以使用 window.open，但这取决于浏览器的偏好吗？我目前正在使用 target="_blank"。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:05:39.263

您可以使用以下 CSS 执行此操作：

```
a {
    target-name: new;
    target-new: tab;
}​​​​​​​​​​​​​ 
```

[请参阅此示例](http://jsfiddle.net/jackdent/aSYZB/)（请不要因为 jsFiddle 不支持选项卡而不起作用。它仅用于演示目的）

作为简单的一条线解决方案：

```
<a href="http://www.bbc.com" target="new" style="target-name:new;target-new:tab">
    Text
</a>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:11:35.320

目前，您确实无法在新选项卡而不是新窗口中打开它。正如您所说，它是浏览器首选项。

至于jacktheripper的回应。似乎任何主要浏览器*都不支持 target-name 属性。

* [CSS3 目标名称属性](http://www.w3schools.com/cssref/css3_pr_target-name.asp)

# netty - Netty 3.4.1-最终的 Maven 可用性

> ID：10195664
> 
> 赞同：0
> 
> 时间：2012-04-17T17:00:46.783
> 
> 标签：netty

我从 Netty 提交的电子邮件中看到有一个 3.4.1-Final 待定。什么时候会进入 Maven 存储库有什么意义吗？谢谢！大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:06:17.003

它还没有出来……我希望我们明天能把它剪掉。

# ajax - 使用jquery收集数据，使用数据从控制器获取一个Partial View，并将传递的信息追加到页面末尾

> ID：10195666
> 
> 赞同：0
> 
> 时间：2012-04-17T17:00:54.210
> 
> 标签：ajax, asp.net-mvc, jquery, partial-views

当从下拉菜单中进行选择时，我正在尝试将部分视图附加到“当前显示的页面”的末尾。

这是我认为的下拉列表：

```
<div>
        @Html.DropDownListFor(x => x.DropDownInfo, Model.Info, "DefaultSelection")
        @Html.ValidationMessageFor(model => model.Courses)
</div> 
```

我在我的 Jquery 中最需要。我需要做什么才能附加控制器返回的 PartialView（粘贴在下面）？我当前的 Jquery：

```
$(document).ready(function() {
    $("#DropDownInfo").change(function() {
        var strSelected = "";
        $("#DropDownInfo option:selected").each(function() {
            strSelected += $(this)[0].value;
        });
        var url = "/Controller/PreFillMethod/?MethodString=" + strSelected;

        $.post(url, function(data) {
            //*****
            // Assuming everything else is correct,
            // what do I do here to have my partial view returned 
            // at the end of the currently displayed page?
            //*****
        });
    });
}); 
```

这是我的控制器中回复 PartialView 的部分（我希望将下拉选择中的字符串传递到此控制器中，最终用于填写 PartialView 表单中的字段）：

```
public PartialViewResult PreFillCourse(string selectedFromDropDown)
{
    ViewBag.selectedString = selectedFromDropDown;
    MyViewModel preFill = new MyViewModel
    {
        Title = selectedFromDropDown, // I am using this to pre-fill a field in a form
    };
    return PartialView("_PartialViewForm", preFill);
} 
```

部分观点（在重要的情况下）：

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>CourseTemplates</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

如果我完全错误地处理这种情况，我愿意接受建议。

我的目标是让用户从下拉菜单中选择一个“模板”，并让该模板的数据自动填充到下拉菜单下方的表单中。

我的 Jquery 非常粗糙 - 我使用[这篇文章](https://stackoverflow.com/a/2238870/1026898)作为指南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:09:07.293

你的视图中应该有一个 div

```
<div id ="divToAppend">
</div> 
```

然后将部分视图附加到您的 div

```
$(document).ready(function() {
    $("#DropDownInfo").change(function() {
        var strSelected = "";
        $("#DropDownInfo option:selected").each(function() {
            strSelected += $(this)[0].value;
        });
        var url = "/Controller/PreFillMethod/?MethodString=" + strSelected;

        $.post(url, function(data) {
             $('#divToAppend').html(data);

            //*****
            // Assuming everything else is correct,
            // what do I do here to have my partial view returned 
            // at the end of the currently displayed page?
            //*****

          });
    });
}); 
```

# arrays - Flash actionscript 2.0 数组播放

> ID：10195670
> 
> 赞同：0
> 
> 时间：2012-04-17T17:01:27.947
> 
> 标签：arrays, actionscript-2

我有一个字符串数组，每个字符串都由一系列带有声音的彩色按钮输入。当按下播放按钮时，对应于不同颜色声音的琴弦应该一个接一个地播放。取而代之的是，它们都在杂乱无章的噪音中同时播放，我已经尽一切努力让它发挥作用。跟踪显示通过数组的 for 循环似乎在做正确的事情，这就是为什么我不明白为什么它不会一个接一个地播放。

这是播放按钮的代码

`enter code here`PlayBTN.onRelease = 函数（）{

```
trace("PlayButton Pressed");

for(var i:Number =0; i<songArray.length; ++i){

    trace("Inside Loop");
    trace(i);

    if(songArray[i]=="Orange"){

        OrangeSound.start(0,1);
        trace("Playing ORANGE Sound");
        //var interval = setInterval(wait,5000);
        //clearInterval(interval);
    }
    else if(songArray[i]=="Pink"){

        PinkSound.start(0,1);
        trace("Playing PINK sound");
    }
    else if(songArray[i]=="Yellow"){
        YellowSound.start(0,1);
        trace("Playing YELLOW Sound");
    }
    else if(songArray[i]=="Blue"){
        BlueSound.start(0,1);
        trace("Playing BLUE Sound");

    }
    else if(songArray[i]=="Green"){
        GreenSound.start(0,1);
        trace("Playing GREEN Sound");

    }
    else if(songArray[i]=="Red"){
        RedSound.start(0,1);
        trace("Playing RED Sound");

    }

} 
```

这就是声音（对应于声音的单词）被放入数组的方式：

OrangeButton.onRelease = function(){ if(FreeIndex<10){ OrangeSound = new Sound();//按下彩色按钮时，它们会发出库中对应的声音 OrangeSound.attachSound("OrangeSound");//库中声音的名称 OrangeSound.start(0,1);//它们只为一个循环发出声音 songArray[FreeIndex] ="Orange";

（每种颜色都有自己的类似于此的代码块。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:28:38.200

在播放下一个声音之前，您必须检查声音是否已完成。

```
function play(i){
    switch(songArray[i])){
        case Orange:
            OrangeSound.start(0,1);
            OrangeSound.onSoundComplete= function(){
                play(i+1);
            }
            break;
        case Pink:
            PinkSound.start(0,1);
            PinkSound.onSoundComplete= function(){
                play(i+1);
            }
            break;
...
        default:
            if(i+1 < songArray.length) play(i+1);
            break;
    }
} 
```

Sound.onSoundComplete 用于检查声音是否完成。上面，当使用 play(0) 调用时，将尝试根据 songArray[i] 的值播放声音。歌曲播放后，它将调用 play(1) 等等，直到 i 到达 songArray 的末尾。不过，play() 不是 for 循环，而是简单地重新调用自身，直到它到达 songArray 的末尾。

# python - 一个基本的石头、纸或剪刀程序

> ID：10195671
> 
> 赞同：0
> 
> 时间：2012-04-17T17:01:31.657
> 
> 标签：python

更新代码：

```
 #RockPS
import random

Choices=['R','P','S']
UserScore=0
CpuScore=0
Games=0

while Games<6:
    UserChoice=input('Rock, paper or scissors? (Type R, P or S respectively)')
    if UserChoice in Choices:
        Games+=1
CpuChoice = random.choice(Choices)   

if UserChoice == 'S' and CpuChoice == 'P':
    UserScore+=1
if UserChoice == 'P' and CpuChoice == 'R':
    UserScore+=1
if UserChoice == 'R' and CpuChoice == 'S':
    UserScore+=1
if UserChoice == 'S' and CpuChoice == 'R':
    CpuScore+=1
if UserChoice == 'P' and CpuChoice == 'S':
    CpuScore+=1
if UserChoice == 'R' and CpuChoice == 'P':
    CpuScore+=1

else:
    print('Only R, P or S are allowed')

print(UserScore, CpuScore)
if UserScore>CpuScore:
    print('Well done, you won!')
if UserScore==CpuScore:
    print('You tied!')
if UserScore<CpuScore:
    ('Unlucky, you lost.') 
```

还有一个问题。当分数被打印出来时，无论哪种方式，它都只会说 1 0，假设是获胜最多的玩家。它应该计算每场比赛，例如 3 2 或 4 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:05:16.283

可能不是唯一的问题，但我马上跳出来的问题：这条线

```
random.choice(CpuChoice) 
```

不会将 CpuChoice 设置为计算机的随机选择。random.choice() 返回一个随机选择，但您不会将它存储在任何地方。你要

```
CpuChoice = random.choice(['Rock', 'Paper', 'Scissors']) 
```

...并且您想在循环中这样做（并收集用户输入，并可能输出每一轮的结果），除非 CPU 每次都做出相同的选择，这将很容易击败:)

此外，您永远不会在任何地方增加 Games —— 实际上，您可能需要一个 for 循环，而不是那里的 while 循环，因为您只想运行主体 6 次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:24:00.807

你的代码有很多问题：

1.  你没有`random.choice`正确使用。
2.  您应该每次在用户播放之前调用该函数。如果你调用它一次，它每次都会保持不变。
3.  要求用户输入一次值，因为该`input(...)`函数在循环**外被调用一次。**
4.  这不是命名变量的方法（至少在 Python 中）
5.  多次使用 if/elif 来做同样的事情不是使用方式`or`

因此，您的代码应如下所示：

```
#RockPS
import random

game_choices = ['R','P','S']
user_score = 0
cpu_score = 0
games = 0

while games<6:
    user_choice = input('Rock, paper or scissors? (Type R, P or S respectively)')
    if user_choice in game_choices:
        games += 1
        cpu_choice = random.choice(cpu_choices)
        if (user_choice == 'S' and cpu_choice == 'P') or \
           (user_choice == 'P' and cpu_choice == 'R') or \
           (user_choice == 'R' and cpu_choice == 'S'):
            user_score += 1
        elif (user_choice == 'S' and cpu_choice == 'R') or \
             (user_choice == 'P' and cpu_choice == 'S') or \
             (user_choice == 'R' and cpu_choice == 'P'):
            cpu_score += 1
    else:
        print('Only R, P or S are allowed')

print(user_score, cpu_score)
if user_score>cpu_score:
    print('Well done, you won!')
elif user_score == cpu_score:
    print('You tied!')
elif user_score<cpu_score:
    print('Unlucky, you lost.') 
```

你仍然可以改进它。我添加了一张支票以确保这些字母是 RPS。而这一大块条件，您可以通过使用返回获胜者的函数来缩短它们（例如，如果 cpu 获胜，则为 1，如果玩家获胜，则为 0），等等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:03:17.280

您需要在循环*内输入。*不要忘记增加所玩游戏的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:33:16.673

在这里，我为你修好了。

我试图模仿你的风格，并尽可能保持原状，以便让你看到 werde 做出了哪些改变。也就是说：通常不鼓励这种风格，请参阅 jadkik94 的答案以获得更好的风格。也许我稍后会在编辑中重写这个程序。如果我有时间。

```
import random
CpuChoices=['Rock','Paper','Scissors']
PlayerChoices = dict(zip("RPS", CpuChoices))
UserScore=0
CpuScore=0
Games=0
while Games<6:
    UserChoice=input('Rock, paper or scissors? (Type R, P or S respectively)')
    if UserChoice not in PlayerChoices: continue
    CpuChoice = random.choice(CpuChoices)

    if UserChoice=='S' and CpuChoice=='Paper':
        UserScore+=1
    elif UserChoice=='P' and CpuChoice=='Rock':
        UserScore+=1
    elif UserChoice=='R' and CpuChoice=='Scissors':
        UserScore+=1

    if UserChoice=='S' and CpuChoice=='Rock':
        CpuScore+=1 
    elif UserChoice=='P' and CpuChoice=='Scissors':
        CpuScore+=1
    elif UserChoice=='R' and CpuChoice=='Paper':
        CpuScore+=1
    print("CPU chose %s against your %s" % (CpuChoice, PlayerChoices[UserChoice]))
    print("User: %s - CPU: %s" % (UserScore, CpuScore))
    Games += 1

if UserScore > CpuScore:
    print('Well done, you won!')
if UserScore == CpuScore:
    print('You tied!')
if UserScore < CpuScore:
    print('Unlucky, you lost.')

print("the only winning move it not to play") 
```

正如所承诺的，这是我编写它的代码（嗯，不是真的，但是......你明白了）：

```
import random

class RSPHand(object):
    names = ('Rock', 'Paper', 'Scissors')
    beats = {
            'Rock': 'Scissors',
            'Scissors': 'Paper',
            'Paper': 'Rock',
            }
    def __init__(self, name):
        if name not in self.__class__.names:
            try:
                name = [n for n in self.__class__.names if n[0] == name.upper()][0]
            except IndexError:
                raise ValueError ("Name not valid")
        self.name = name
        self.shortname = self.name[0]
    def __repr__(self):
        return "%s(%s)" % (self.__class__.__name__, self.name)
    def __str__(self):
        return self.name
    def __gt__(self, other):
        return other.name == self.__class__.beats[self.name]
    def __lt__(self, other):
        return self.name == self.__class__.beats[other.name]

choices=[]
for name in RSPHand.names:
    choices.append(RSPHand(name))

playerscore = cpuscore = 0

while True:
    rounds = input("Best out of how many rounds? ")
    try:
        rounds = int(rounds)
    except ValueError:
        continue
    break

while rounds:
    playerchoice = input("%s? (Type first letter, lowercase or not, or full name) " % [choice.name for choice in choices])
    try:
        playerchoice = RSPHand(playerchoice)
    except ValueError:
        continue
    cpuchoice = random.choice(choices)
    print ("CPU chose %s against your %s" % (cpuchoice, playerchoice))
    if playerchoice < cpuchoice:
        cpuscore += 1
        print("too bad for you")
    elif playerchoice > cpuchoice:
        playerscore += 1
        print("too bad for CPU")
    else:
        print("that's a tie for this round")
    print ("CPU: %s - Player: %s" % (cpuscore, playerscore))
    rounds -= 1

if playerscore > cpuscore:
    print('Well done, you won!')
elif playerscore == cpuscore:
    print('You tied!')
elif playerscore < cpuscore:
    print('Unlucky, you lost.') 
```

# php - 查询过去 30 天内点击次数最多的 16 个帖子，没有重复的类别

> ID：10195672
> 
> 赞同：3
> 
> 时间：2012-04-17T17:01:46.450
> 
> 标签：php, mysql

我有一个看似简单的任务，但我似乎无法使用 1 个查询找到一个优雅的解决方案......

**问题：** 我有一个记录“帖子”的“点击”表，其中每个帖子都是“类别”的一部分。我想找到*最近 30 天内点击率最高的 16 个帖子*——但我想*避免重复的类别*。

实际上看起来很简单，但我似乎被卡住了。

我知道如何在最近 30 次中获得最多点击，但我不知道如何避免重复的猫。

```
SELECT cat_id,
       post_id,
       COUNT(post_id) AS click_counter
FROM   cs_coupon_clicks
WHERE  time_of_click > DATE_SUB(NOW(), INTERVAL 30 DAY)
GROUP  BY post_id
ORDER  BY click_counter DESC 
```

我试图用它来获得创意/hacky......它很接近但不正确：

```
SELECT cat_id,
       Max(sort) AS sortid
FROM   (SELECT cat_id,
               post_id,
               COUNT(post_id)                       AS click_counter,
               CONCAT(COUNT(post_id), '-', post_id) AS sort
               FROM   cs_coupon_clicks
               WHERE  time_of_click > DATE_SUB(NOW(), INTERVAL 30 DAY)
               GROUP  BY cat_id, post_id) t1
GROUP  BY cat_id
ORDER  BY cat_id ASC 
```

任何帮助将不胜感激，因为我不是真正的 MySQL 专家。我最终可能只是做了一些 PHP 逻辑，但我很好奇解决此类问题的正确方法。

多谢你们。

**编辑（结构）：**

```
CREATE TABLE `cs_coupon_clicks` (
`id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`src` varchar(255) NOT NULL DEFAULT '',
`cat_id` int(20) NOT NULL,
`post_id` int(20) NOT NULL,
`tag_id` int(20) NOT NULL,
`user_id` int(20) DEFAULT NULL,
`ip_address` char(30) DEFAULT NULL,
`referer` varchar(255) NOT NULL,
`browser` varchar(10) DEFAULT NULL,
`server_var` text NOT NULL,
`time_of_click` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`),
KEY `cat_id` (`cat_id`),
KEY `post_id` (`post_id`),
KEY `user_id` (`user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

**临时工作解决方案（HACKY）：**

```
SELECT
  cat_id,
  MAX(sort) AS sortid
FROM (
  SELECT
    cat_id,
    post_id,
    COUNT(post_id) AS click_counter,
    RIGHT(Concat('00000000', COUNT(post_id), '-', post_id), 16) AS SORT
  FROM   cs_coupon_clicks
  WHERE  time_of_click > DATE_SUB(NOW(), INTERVAL 30 DAY)
  GROUP  BY cat_id, post_id
) AS t1
GROUP  BY cat_id
ORDER  BY sortid DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:06:36.677

这个问题没有简单的单一查询解决方案，它是基于需要自联接的临时表（具有计数的表）的分组最大问题。假设您的数据库足够大（否则只使用您的 php 逻辑），我会使用统计表，其中包含有关类别、帖子和点击次数的信息：

```
CREATE TABLE `click_cnts` (
 `cat_id` int(20) NOT NULL,
 `post_id` int(20) NOT NULL,
 `clicks` int(20) NOT NULL,
 PRIMARY KEY (`cat_id`,`post_id`),
 KEY `cat_id` (`cat_id`,`clicks`)
) 
```

并使用与问题中第一个相同的查询填充它：

```
INSERT INTO click_cnts(cat_id, post_id, clicks)
SELECT cat_id, post_id, COUNT(post_id) AS click_counter
      FROM   cs_coupon_clicks
      WHERE  time_of_click > NOW() - INTERVAL 30 DAY
      GROUP  BY cat_id,post_id 
```

您可以使用触发器或定期运行更新查询来更新此表（用户真的需要直到最后一秒的信息吗？可能不需要...）并节省大量处理，因为在索引表上查找每个类别的大多数点击需要很多使用经典的 group-wise max 方法的时间更少：

```
SELECT cg.cat_id, cu.post_id, cg.most_clicks 
FROM
( SELECT cat_id, max(clicks) as most_clicks FROM click_cnts
  GROUP BY cat_id ) cg
JOIN click_cnts cu 
ON cg.cat_id = cu.cat_id
AND cu.post_id = ( SELECT cc.post_id FROM click_cnts cc
                   WHERE cc.cat_id = cg.cat_id
                   AND cc.clicks = cg.most_clicks
                   LIMIT 1 )
ORDER BY cg.most_clicks DESC
LIMIT 16 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:09:11.983

在这里暗中拍摄。您是否尝试过选择 DISTINCT cat_id

# javascript - jQuery $.post() (AJAX) 导致内存泄漏

> ID：10195676
> 
> 赞同：0
> 
> 时间：2012-04-17T17:02:01.667
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 内存泄漏怀疑](https://stackoverflow.com/questions/8348182/jquery-memory-leak-suspicion)

我注意到标签打开的时间越长，我们的网站就越慢。使用 Chrome 的任务管理器，我缩小了问题范围：

每次调用以下代码行时，内存使用量都会增加：

```
$jquery.post(url, params); 
```

我在 1 秒计时器上实现了这段代码，几分钟内内存使用量从 30MB 变为 250MB。仅注释掉这一行代码即可解决问题。请注意，我只注释掉这一行；我仍然让 URL 和参数生成。所以问题肯定和这行代码有关。每次运行大约会消耗 2MB 更多的内存。

显然存在某种内存泄漏。我希望它与结果的缓存或 JSON 反序列化有关（JSON 结果可能相当大）。

任何人都可以提供解决方法或解决方案吗？即使只是强制进行一些垃圾收集也是可以接受的。FWIW，内存使用量偶尔会减少，但幅度不大（垃圾收集？）。我刚刚看到它从 300MB 下降到 250MB，但现在又开始缓慢上升。

更具体地说，代码看起来像这样......

```
...

    init: function()
    {
        setInterval(function(){ SManager.updateAll(); }, 1000);
    },

    updateAll: function() 
    {
        var url = SManager.SERVER_URL;
        var params = new Object();
        params.version = 1;
        params.platform = 'web';

        $jquery.post(url, params);
    }, 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:25:14.987

使用分析工具查找未进行垃圾收集的大型对象。例如在 Chrome F12 / Profiling / Heap trace 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:21:04.537

与stackoverflow上的解决方案类似的问题我相信您的解决方案`problem`可以在这里找到：

[jQuery 内存泄漏疑点](https://stackoverflow.com/questions/8348182/jquery-memory-leak-suspicion)

# iphone - 切换视图 iphone - 切换到空视图

> ID：10195678
> 
> 赞同：0
> 
> 时间：2012-04-17T17:02:14.700
> 
> 标签：iphone, ios, uisegmentedcontrol

我有一个 3 视图控制器 - 注册、登录、配置文件，我有一个 UISegmentedControl，我可以通过从注册到主以及从登录到主切换视图。但是当我在注册视图中时，我想在完成注册后将用户切换到个人资料视图。

![在此处输入图像描述](../Images/c6ed58e91b32c9723524c253d9a1ccdc.png)

![在此处输入图像描述](../Images/3b19f569854728ef2cc8500e931f0a9e.png)

这是代码..

```
-(IBAction) switchView :(id)sender{

switch (segControl.selectedSegmentIndex) {
    case 0:
    {
        HangmanViewController * main =[[HangmanViewController alloc]initWithNibName:nil bundle:nil];
        main.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self presentModalViewController:main animated:YES];
        [main release];
    }
        break;
        case 1:

            break;
        case 2:
    {
        Profile *profile2 = [[Profile alloc]initWithNibName:nil bundle:nil];
        [self presentModalViewController:profile2 animated:YES];
        [profile2 release];

    }break;

    default:
        break;
} 
```

}

我已经导入了 Profile Class 的 .h 文件。所以怎么了！！！！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:05:05.307

您是否只想在成功完成注册/登录后才将用户切换到个人资料视图，否则显示警报？

那么你可以试试这个：

在你的 .h 文件中

```
NSString *count; 
```

在你的 .m 文件中

```
 @Synthesize count; 
```

在你的 ViewdidLoad

```
count=@"1"; 
```

//所以这里count的默认值为1

// 成功完成注册/登录后 make count =2

```
 count=@"2"; 
```

在您的 SegmentControl Action 中设置此条件：

```
- (IBAction)SegmentControll:(id)sender 

           {

             if (SegmentControll.selectedSegmentIndex==0) 

                   {

                 if (count isEqualToString:@"2") {
                 //your main view 
                     }
              else
                 // alert for login/Register
                }

             if (SegmentControll.selectedSegmentIndex==1) {

                  //your Profile view  

               }

      if (SegmentControll.selectedSegmentIndex==2) {

                  //your Register view  

               }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:19:54.783

我完全不明白你的问题希望这会对你有所帮助。

```
 - (IBAction)SegmentControll:(id)sender {

                 if (SegmentControll.selectedSegmentIndex==0) {

                      //your main view  

                   }

                 if (SegmentControll.selectedSegmentIndex==1) {

                      //your Profile view  

                   }
         } 
```

# c# - 通过 HTTPS 增量处理大型 XML 文件？

> ID：10195680
> 
> 赞同：3
> 
> 时间：2012-04-17T17:02:28.467
> 
> 标签：c#, .net, xml, http, azure

我必须从安全的 Web 服务器下载、处理和存储一个 8GB 的​​ XML 文件。我可以使用`WebRequest`类下载文件，但这需要很长时间。另外，我知道该文件的结构使其适合离散块的处理。

我怎样才能“流式传输”这个文件，以便我只获得可以处理的小块，而不必一次获得整个流？

**编辑**

我忘了提 - 我们托管在 Azure 上。想到的一个想法是提供一个工作角色，它只下载大文件并且可以根据需要花费任意时间。这有多可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:11:30.890

8 GB 是一个很大的工作负载。为了保护自己免于返工并有效扩展，我会将 XML 文件下载与其处理分离。

在作为流下载时，我会将某种流标识符写入持久存储，并通过将带有相关数据的消息放在队列中来安排每个原子工作单元完成。这将允许由于任何原因或工作单元不成功和/或干扰下载而从南下的下载中恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:12:37.323

我正在使用 HttpWebRequest、BeginGetResponse 然后 GetResponseStream

然后可以通过stream.BeginRead逐块读取流

这是一个太复杂的例子： [http ://stuff.seans.com/2009/01/05/using-httpwebrequest-for-asynchronous-downloads/](http://stuff.seans.com/2009/01/05/using-httpwebrequest-for-asynchronous-downloads/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:13:02.930

如果您需要按顺序处理文件，只需在响应流上打开一个 XMLReader 并根据需要读取数据。

如果您需要随机访问文件（即在中间读取），您可能需要做更多的工作来创建可搜索的流（如果服务器在请求中支持 RANGE 选项）或者像现在一样简单地下载整个文件。

请注意，8GB 是大量数据，无论阅读方式如何，完全下载都会花费大量时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T20:38:20.767

您可以将 xml 文件上传到块 blob 并从那里下载。这篇博文可能对[http://blogs.msdn.com/b/kwill/archive/2011/05/30/asynchronous-parallel-block-blob有所帮助-transfers-with-progress-change-notification.aspx](http://blogs.msdn.com/b/kwill/archive/2011/05/30/asynchronous-parallel-block-blob-transfers-with-progress-change-notification.aspx)

希望这可以帮助。

# .net - 动态资源颜色不起作用

> ID：10195683
> 
> 赞同：3
> 
> 时间：2012-04-17T17:02:39.757
> 
> 标签：.net, wpf, styles, dynamicresource

我有以下代码：

```
<Color x:Key="SelectedColor">Gold</Color> 
```

和一个包含颜色的 TabItem Style

```
<VisualState x:Name="Selected">
    <Storyboard>
        <ColorAnimationUsingKeyFrames 
            Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[0].(GradientStop.Color)"
            Storyboard.TargetName="InnerRectangle2">
            <EasingColorKeyFrame KeyTime="0" Value="{DynamicResource SelectedColor}"/>
        </ColorAnimationUsingKeyFrames> 
```

事实证明我不能`DynamicResource`在`EasingColorKeyFrame`.
我该怎么做才能达到我的效果？

我需要动态设置颜色，因此只需交换`"{DynamicResource SelectedColor}"`即可`"{StaticResource SelectedColor}"`。

我创建了一个小解决方案来演示这个问题 - 选定的选项卡应该是金色的，但它实际上是透明的，因为我猜 VSM 无法解析名为“ `SelectedColor`”的颜色

[http://dl.dropbox.com/u/10557283/DynamicBug.zip](http://dl.dropbox.com/u/10557283/DynamicBug.zip)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T17:09:36.843

动画（VSM）是`freezable objects`。一旦对 Freezable 的依赖属性设置绑定，就可以防止 Freezable 被冻结。因此，您的 Value 属性上的绑定`EasingColorKeyFrame objects are preventing the storyboards from being frozen.`

**作为一种出路，您可以尝试这三种最适合您的方法 -**

*   尝试将资源声明为`StaticResource`并在您的 VSM 中使用它。[VSM的StaticResource解释](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/9336022f-badb-4b40-a86c-a50ab1a64ba5/ "VSM的StaticResource解释")

*   我从您的代码中了解到，您希望选定的 tabItem 为金色。因此，作为一种解决方法，您可以做的是让`two borders`面板中包含一个网格，一个网格，金色边框默认`visibility`为折叠，正常一个可见。现在，在tabItem 的`selected event`（在 IsSelected 或任何方法的属性更改时）上，您可以`swap the visibility`使用两个边框来产生相同的效果。当然，这种解决方法是针对这种情况的，例如，只有 EasingColorKeyFrame 关键时间为 0 时才有意义，否则不会产生相同的视觉效果。

*   最后，如果你想坚持通过动画来做到这一点，你可以在`code behind`. 这些帖子可能对您有帮助 - [Woakaround for dynamicResource in Animation](https://stackoverflow.com/questions/4284672/dynamic-resource-access-fails-in-storyboard "动画中动态资源的解决方法") , [Animation in code behind](https://stackoverflow.com/questions/3415094/why-storyboard-value-wouldnt-get-from-a-resource-or-binding "代码中的动画")和[Setting forforeground with VSM](https://stackoverflow.com/questions/3644969/problem-setting-foreground-with-visual-state-manager "使用 VSM 设置前景")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:09:52.223

这是因为 VSM 类型不是逻辑树的一部分，因此无法解析动态资源查找。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T21:13:07.867

我想出了一种方法来使用图层。制作对象的多个副本，然后像这样修改透明胶片：

```
<VisualState x:Name="Selected">
    <Storyboard>
        <DoubleAnimation Storyboard.TargetName="InnerRectangleBorder"
                         Storyboard.TargetProperty="Opacity"
                         To="0"
                         Duration="0:0:0" />

        <DoubleAnimation Storyboard.TargetName="InnerRectangleBorderMouseOver"
                         Storyboard.TargetProperty="Opacity"
                         To="0"
                         Duration="0:0:0.5" />

        <DoubleAnimation Storyboard.TargetName="InnerRectangleBorderSelected"
                         Storyboard.TargetProperty="Opacity"
                         To="1"
                         Duration="0:0:1" />
    </Storyboard>
</VisualState> 
```

# matlab - 数组添加错误

> ID：10195688
> 
> 赞同：1
> 
> 时间：2012-04-17T17:03:14.543
> 
> 标签：matlab

我在 Matlab 中为卷积编写了以下代码，但它在通知行出现错误。我是 Matlab 的初学者，所以请耐心等待我回答这个问题。

```
function [y] = UmerConv(x,h)

xlen=length(x);
hlen=length(h);

p=1;
for j=1:xlen
    for k=1:hlen
        uinput{p}=x(j)*h(k);
        p=p+1;
    end
end

for i=1:hlen
    if(i==1 || i==hlen)
        y{i}=uinput(i);   // error
    else
        y{i}=uinput(i)+uinput(i+2); // error
    end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:07:40.267

您使用元胞数组语法将值分配给 uinput `{}`，但随后您使用常规数组语法使用`uinput(i)`. 你必须保持一致。使用花括号`{}`使数组成为元胞数组，其索引方式与常规数组（仅使用括号）不同。

然后，您还可以使用元胞数组语法对变量进行相同的分配选择，`y`如果您可能只需要常规数组语法。

更正后的代码应该是：

```
function [y] = UmerConv(x,h)

xlen=length(x);
hlen=length(h);

p=1;
for j=1:xlen
    for k=1:hlen
        uinput(p) = x(j)*h(k); % <-- Changed the {} syntax
        p=p+1;
    end
end

for i=1:hlen
    if(i==1 || i==hlen)
        y(i) = uinput(i);  % <-- Now you access both with () instead of {}
    else
        y(i) = uinput(i) + uinput(i+2); % <-- Same here.
    end
end 
```

在我在评论中指出更正的每个地方，您可以交替地只使用`{}`语法，然后一切都会正常工作，但数组将是元胞数组。通常这对于这样的数值计算是不希望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:05:36.877

您应该使用`y(i)`它 `y{i}`来访问向量的第 i 个位置。

# caching - 按页面控制服务器端缓存（Tomcat）？

> ID：10195690
> 
> 赞同：0
> 
> 时间：2012-04-17T17:03:17.157
> 
> 标签：caching, tomcat, grails, tomcat6

我正在使用部署在 tomcat6 中的 grails 应用程序，我希望能够在“逐页”的基础上启用或禁用服务器端页面缓存。换句话说，我希望能够指定“缓存页面 A，但不缓存页面 B 和 C”。

这样的事情可能吗？如果是这样，最好的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:02:05.423

Spring Cache 插件允许您缓存控制器操作和服务方法调用，因此您可以注释可缓存的页面/操作并将不应缓存的页面/操作保留为未注释： http: [//grails.org/plugin/springcache](http://grails.org/plugin/springcache)

# java - 使用 HttpClient 获取请求属性

> ID：10195700
> 
> 赞同：0
> 
> 时间：2012-04-17T17:04:05.907
> 
> 标签：java, servlets, httpclient

我发现了一些与此相关的问题：

[httpclient-request-set-attribute-question](https://stackoverflow.com/questions/1185102/httpclient-request-set-attribute-question)
[commons-httpclient-adding-query-string-parameters-to-get-post-request](https://stackoverflow.com/questions/9907161/commons-httpclient-adding-query-string-parameters-to-get-post-request)

但我想我在这里尝试做一些不同的事情：我有一个 servlet，它将在请求中设置一个属性。在我的 Java 客户端中，我正在使用 HTTP 组件库，并且我想在我的客户端中读取属性。

1.  这是 HTTP 组件库的无效用例吗？
2.  如果不是，一种方法是在 servlet 中序列化对象并在客户端中将其反序列化，但我不确定这是否是最佳实践。
3.  我在这里缺少一个 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:27:39.090

1.  客户端无法访问请求属性。

2.  您应该以某种方式将它们作为响应发送（将它们写为键值对，使用 JSON 序列化对象图等）。所以是的，这是公认的做法

# linux - 在 Linux 中编译 Pro*C 代码时生成的 .lis 文件

> ID：10195707
> 
> 赞同：1
> 
> 时间：2012-04-17T17:04:31.807
> 
> 标签：linux

当我在 Linux 中编译 Pro*C 代码时，除了 .c 和 .o 文件之外，还会生成 .lis 文件。但是当我在 Unix 中编译相同的代码集时，并没有生成 .lis 文件。知道为什么 .lis 文件是在 Linux 中生成而不是在 Unix 中生成的吗？

我在 LINUX 中使用的编译器是 gcc 4.1.2

# java - 如何在不提供-storepass 的情况下使用jarsign 对jar 进行签名？

> ID：10195708
> 
> 赞同：2
> 
> 时间：2012-04-17T17:04:32.107
> 
> 标签：java, jar, sign, jar-signing, jarsigner

使用不带 -storepass 的 jarsign 会提示输入密钥库密码，这会破坏我们的自动构建（无需人工干预）

如果我们将 jarsign 与 -storepass 一起使用，那么这将有效地将密码以明文形式记录在构建日志中。

是否有另一种方法可以在不使用命令行的情况下传递 storepass？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T17:35:46.120

我写了一个脚本来调用jarsign。

所以在构建日志中，我们只看到了包装脚本。

Storepass 通过管道传输到 jarsign，因此它在命令行上不可见（正如@Perception 建议的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:51:31.017

如果您使用 Maven，您可以尝试使用[Jarsigner Plugin](http://maven.apache.org/plugins/maven-jarsigner-plugin/index.html)。在那里，您可以从 settings.xml 中定义的属性加载 storepass

# javascript - 无法通过 JS 加载所有声音

> ID：10195709
> 
> 赞同：1
> 
> 时间：2012-04-17T17:04:32.243
> 
> 标签：javascript, html

我正在使用 css3 和 html5 在 javascript 中开发一种游戏。游戏使用多种声音（目前为 156）。它们中的大多数都非常短 - 长达 3 秒。我在开始时加载它们，将它们存储在数组中，然后根据用户操作播放它们。这是它的代码：

```
var Sounds=[];
var SoundsLoaded = 0;

function AddSound( filename )
{
    var sound = new Audio();          //creating  a new sound for the game
    sound.src = filename;
    sound.loop = false;
    sound.autoplay=false;
    sound.autobuffer=true;
    sound.preload="auto";

    Sounds.push( sound );            //add it to the container
}

function LoadSounds()
{
    for( i = 0; < src.length; i++)   //altogether about 150 files
       AddSound( src[i] );

    for( i = 0; i < Sounds.length; i++ )
    {
        Sounds[i].addEventListener( "loadeddata", function()
        { 
            SoundsLoaded++;

            if( SoundsLoaded == Sounds.length )
            {
                 AllSoundsLoaded();     //continue when all sounds are ready to use
            }
        });

        Sounds[i].addEventListener( "error", function()
        {
             alert(this.error.code);          //alerts with code 4
             alert(this.networkState);        //alerts with state 3
        });

        Sounds[i].load();
    } 
 } 
```

在 Chrome 和 Firefox 中一切正常，但在 Opera 和 IE 中存在问题：加载少量声音后，出现错误：MEDIA_ERR_SRC_NOT_SUPPORTED (4) 和 NETWORK_NO_SOURCE (3)

为什么会有错误对我来说很奇怪，因为：

1.  我确定有音频文件
2.  chrome 和 firefox 正确加载所有文件
3.  所有音频文件都在同一个目录中
4.  所有音频文件使用相同的编解码器 (audio/x-vorbis+ogg) 或 (audio/mpeg)。我使用的 src 是在之前设置的 - 用于 IE ogg 的 mp3 用于所有其他人
5.  有几次，Opera 加载的文件少于 32 个，但在 9/10 的情况下，Opera 加载了！！！完全正确！！！156 个声音中的 32 个，这些文件并不完全相同 6.有什么解决方法吗？我想避免将更多声音合并到一个中并只播放适当的部分

测试浏览器：opera 11.62, ff 11, chromium 18, ie (9),

有没有人遇到过这种行为？我忘记了还是应该设置一些音频元素属性？Opera（和 IE）是否对加载的声音数量有缓存限制？是否可以使用 JS 更改它？

# asp.net-mvc - MVC3 401 POST 请求后重定向时未经授权的响应

> ID：10195716
> 
> 赞同：2
> 
> 时间：2012-04-17T17:05:04.197
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, http, rest

我正在使用 ASP.NET MVC 3 编写一个 RESTful Web 服务。我分别使用基本的 GET/POST/PUT 映射进行检索/创建/更新操作。它适用于我的一种域类型，但我正在为另一种类型实现完全相同的一组操作，并且我从本地 ASP.NET 开发服务器收到 401 Unauthorized 响应。

首先，这里是创建路由的 MyApiAreaRegistration.cs 中 RegisterArea 方法的相关部分（为简洁起见，我删除了 Update 方法）：

```
// student detail
context.MapRoute(
    "StudentDetailV1",
    "MyApi/v1/family/{email}/student/{id}",
    new { controller = "Student", action = "StudentDetail" },
    new { httpMethod = new HttpMethodConstraint("GET") }
);

// create student
context.MapRoute(
    "CreateStudentV1",
    "MyApi/v1/family/{email}/student",
    new { controller = "Student", action = "CreateStudent" },
    new { httpMethod = new HttpMethodConstraint("POST") }
);

// family detail
context.MapRoute(
    "FamilyDetailV1",
    "MyApi/v1/family/{email}",
    new { controller = "Student", action = "FamilyDetail" },
    new { httpMethod = new HttpMethodConstraint("GET") }
);

// create family
context.MapRoute(
    "CreateFamilyV1",
    "MyApi/v1/family",
    new { controller = "Student", action = "CreateFamily" },
    new { httpMethod = new HttpMethodConstraint("POST") }
); 
```

在 StudentController 中：

```
/// <summary>
/// return json representation of FamilyDto
/// </summary>
/// <param name="email"></param>
/// <returns></returns>
[HttpGet]
public ActionResult FamilyDetail(string email)
{
    Family f = _studentDataAccess.GetFamilyByEmail(email.Trim());
    if (f == null)
    {
        return HttpNotFound();
    }

    FamilyDto familyDto = FamilyDtoAssembler.GetDtoFromFamily(f);

    return Json(familyDto, JsonRequestBehavior.AllowGet);
}

[HttpPost]
public ActionResult CreateFamily(FamilyDto familyDto)
{
    if (string.IsNullOrWhiteSpace(familyDto.Email))
    {
        return new HttpStatusCodeResult(409, "Email address is required.");
    }

    // check for already existing family with that email.
    Family f = _studentDataAccess.GetFamilyByEmail(familyDto.Email.Trim());
    if (f != null)
    {
        return new HttpStatusCodeResult(409, "Email address must be unique.");
    }

    // turn family into a Family object with Parents
    Family family = FamilyDtoAssembler.GetFamilyFromDto(familyDto);

    // save family via dal (username = family email)
    _studentDataAccess.CreateFamily(family, family.Email);

    // return redirect to family detail
    return RedirectToRoute("FamilyDetailV1", new { email = family.Email });
}

[HttpPost]
public ActionResult CreateStudent(string email, StudentDto studentDto)
{
    if (string.IsNullOrWhiteSpace(email))
    {
        return HttpNotFound();
    }

    Family family = _studentDataAccess.GetFamilyByEmail(email.Trim());

    if (family == null)
    {
        return HttpNotFound();
    }

    Student s = StudentDtoAssembler.GetStudentFromDto(_repository, studentDto);

    s.Family = family;
    _studentDataAccess.CreateStudent(s, email);

    return RedirectToRoute("StudentDetailV1", new { email = email, id = s.Id });
}

[HttpGet]
public ActionResult StudentDetail(string email, int id)
{
    Student s = _studentDataAccess.GetStudent(id);
    if (s == null || s.Family.Email != email)
    {
        return HttpNotFound();
    }

    StudentDto studentDto = GeneralDtoAssembler.GetSingleStudentDto(s, s.MatsRegistrations);

    return Json(studentDto, JsonRequestBehavior.AllowGet);
} 
```

现在，当我使用 Fiddler 为“创建家庭”操作制作 POST 请求时，使用正确的 JSON 请求正文以匹配家庭 DTO 的定义，该操作返回一个 302 响应，该响应重定向到新创建的家庭详细信息操作家庭。这正是我想要的。然而问题是“创建学生”动作。当我在调试器中单步执行它时，它可以正常工作并返回 RedirectToRoute 结果，但是我在 Fiddler 中看到的只是以下响应：

```
HTTP/1.1 401 Unauthorized
Server: ASP.NET Development Server/10.0.0.0
Date: Tue, 17 Apr 2012 16:42:10 GMT
X-AspNet-Version: 4.0.30319
jsonerror: true
Cache-Control: private
Content-Type: application/json; charset=utf-8
Content-Length: 105
Connection: Close

{"Message":"Authentication failed.","StackTrace":null,"ExceptionType":"System.InvalidOperationException"} 
```

我已经尝试了我能想到的一切，从在 web.config 中将身份验证模式从“Windows”更改为“None”，到重新排序路由，再到返回 RedirectToAction 而不是 RedirectToRoute，但没有任何效果。请注意，如果我只是从 CreateStudent 返回一个直接的 Json 结果而不是 RedirectToRoute 结果，那么它可以正常工作（200 状态，我看到结果很好）。但是我不明白为什么 CreateStudent 和 CreateFamily 的行为不同，这已经让我发疯了 2 天。哈；lp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:47:35.990

问题是学生路线中的静态 URL 段。我改为`StudentDetailV1`现在`"MyApi/v1/family/{email}/{id}"`它可以正常工作。

# c# - 亚马逊产品广告 API ItemSearchRequest

> ID：10195723
> 
> 赞同：2
> 
> 时间：2012-04-17T17:05:22.437
> 
> 标签：c#, amazon, amazon-product-api

我正在使用亚马逊的产品广告 API 来搜索产品，效果很好。我得到了我需要的结果。但是，当我搜索“Bishoujo Catwomen”时，它不会获取标题包含 (Bishoujo && Catwomen) 的记录，而是执行 (Bishoujo || Catwomen) 并将结果交给我。

这是我的代码：

```
ItemSearchRequest request = new ItemSearchRequest();                    
request.SearchIndex = "All";
request.Keywords = "Bishoujo Catwomen"; 
```

我希望我的 SearchIndex 为 All，我只需要名称同时包含 Bishoujo 和 Catwomen 的标题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:58:33.720

[您可以在](http://docs.amazonwebservices.com/AWSECommerceService/2011-08-01/DG/PowerSearchSyntax.html)Amazon API Docs的参考资料中找到您需要的内容。

它被称为 Power Search Syntax 并且确实描述了除了分类搜索之外如何处理布尔值。我不认为文档非常清楚，但它应该可以帮助你。

# java - 如何在 Netbeans 的运行配置中设置 MONGOHQ_URL 环境变量？

> ID：10195728
> 
> 赞同：0
> 
> 时间：2012-04-17T17:05:48.710
> 
> 标签：java, mongodb, heroku, netbeans-7

我们正在努力将一个 Java 项目部署到使用 MongoDB 的 Heroku。根据[Heroku 文档](https://devcenter.heroku.com/articles/mongohq)，数据库连接参数是从环境变量中读取的，`MONGOHQ_URL`. 当我在笔记本电脑上运行 Netbeans 项目时，如何设置此变量？

`-DMONGOHQ_URL=...`我尝试在 Run -> Set Project Configuration -> Customize -> Run 以及 Actions -> Run project and Run file via main()中将其添加为 VM 选项，但无济于事。当程序`System.getvar`在未设置的情况下读取它时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:30:20.757

您可以在*netbeans.conf*文件中设置它。添加行：

```
export MONGOHQ_URL=... 
```

这里有一个例子：http: [//sunng.info/blog/2009/12/setting-environment-variables-for-netbeans/](http://sunng.info/blog/2009/12/setting-environment-variables-for-netbeans/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:11:56.867

好的，我想通了。这对 Java 编码人员来说可能很明显，但我不是其中之一，所以这是我拼凑起来的。

```
 String mongo_url = System.getenv("MONGOHQ_URL");
    // If env var not set, try reading from Java "system properties"
    if (mongo_url == null) {
        mongo_url = System.getProperty("MONGOHQ_URL");
    }

    MongoURI mongoURI = new MongoURI(mongo_url);
    this.db = mongoURI.connectDB();

    // Only authenticate if username or password provided
    if (!"".equals(mongoURI.getUsername()) || mongoURI.getPassword().length > 0) {
        Boolean success = this.db.authenticate(mongoURI.getUsername(), mongoURI.getPassword());  

        if (!success) {
            System.out.println("MongoDB Authentication failed");
            return;
        }
    }
    this.my_collection = db.getCollection("my_collection"); 
```

# php - jquery ajax 在没有萤火虫断点的情况下无法工作

> ID：10195730
> 
> 赞同：4
> 
> 时间：2012-04-17T17:05:57.313
> 
> 标签：php, jquery, mysql, ajax, firebug

我正在使用以下方法调用 php：

```
function validateEmaiAjax(email){
    val = null;
    $("#warning").load("https://localhost/Continental%20Tourism/register_ajax.php",{email: email}, function(rspns, stat, xml){
        val = rspns;
    });

    if(val == ".")
        return true;
    else {
        return false;
    }
} 
```

我的PHP代码是：

```
<?php
    $dbc = mysqli_connect("localhost","root","pass","continental_tourism") OR die(mysqli_connect_error());

    $email = $_REQUEST['email'];

    $query = "SELECT email FROM customer_info WHERE email = '$email' ";

    $r = mysqli_query($dbc, $query) OR die(mysqli_error($dbc));

    if(mysqli_num_rows($r) > 0)
        echo "Email address exists!";
    else
        echo ".";   
?> 
```

基本上这确实会检查数据库，如果电子邮件存在则显示“电子邮件地址存在！” 如果不是我想`return true`（所以我回显“。”并比较它）。奇怪的是，如果我在程序附近使用 firebug 设置断点`if(val == ".")`可以正常工作并返回 true。如果我删除那个断点函数总是返回 false。我不明白为什么会这样。请帮忙！谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T17:20:11.727

您遇到此问题的原因是您执行了**异步**请求。这意味着`if(rspns == ".")`将在从服务器收到响应之前到达，结果将始终为`false`.

为了将此代码包装在一个函数中，返回一个布尔值并且不需要回调函数（阻塞过程），您将需要使用同步请求：

```
function validateEmaiAjax(email) {

  // This is the correct way to initialise a variable with no value in a function
  var val;

  // Make a synchronous HTTP request
  $.ajax({
    url: "https://localhost/Continental%20Tourism/register_ajax.php",
    async: false,
    data: {
      email: email
    },
    success: function(response) {
      // Update the DOM and send response data back to parent function
      $("#warning").html(response);
      val = response;
    }
  });

  // Now this will work
  if(val == ".") {
    return true;
  } else {
    $("#warning").show();
    return false;
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:07:20.103

为什么这个

```
else {
    return false;
    $("#warning").show();
} 
```

`$("#warning").show();`永远不会被执行。

编辑：你去：

```
function validateEmaiAjax(email){
    var URL     = 'https://localhost/Continental%20Tourism/register_ajax.php';
    var Args    = {email: email}

    $('#warning').load(URL, Args, function(html){
        if(html == '.'){
            return true;
        } else {
            $('#warning').show();
            return false;
        }
    });

    return false;
} 
```

或者你也可以试试这个：

```
function validateEmaiAjax(email){
    var URL     = 'https://localhost/Continental%20Tourism/register_ajax.php';
    var Args    = {email: email}

    $.ajax({
        url:     URL,
        type:    'GET'
        data:    Args,
        success: function(html){
            if(html == '.'){
                return true;
            } else {
                $('#warning').show();
                return false;
            }
        }
    });

    return false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T17:16:05.053

如果您想让该代码工作，您应该使用 $.ajax 方法而不是 load 并将 async 设置为 false 以使其等待响应。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
 url:"https://localhost/Continental%20Tourism/register_ajax.php",
 async: false,
 data: {email: email}, 
 success: function(rspns, stat, xml){ 
   val = rspns; 
  }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:08:24.173

`if(val == ".")`这是因为您的函数一直在运行并在它得到 ajax 响应之前命中。您需要在 ajax 回调函数中使用整个 if 语句。

```
function validateEmaiAjax(email){
    var success;
    $("#warning").load("https://localhost/Continental%20Tourism/register_ajax.php",{email: email}, function(rspns, stat, xml){
        if(rspns == ".")
            success = true;
        else {
            $("#warning").show();
            success = false;
        }
    });
    return success;
} 
```

还交换了警告显示并返回，以便执行

# jquery - JQuery mobile按钮内的两列网格不填充宽度

> ID：10195733
> 
> 赞同：1
> 
> 时间：2012-04-17T17:06:14.293
> 
> 标签：jquery, css, jquery-mobile, pug

我正在尝试创建 2 列网格并让按钮填充列宽，但按钮不会填充列的所有宽度。这是我的 Jade 模板代码：

```
fieldset.ui-grid-a
          div.button.ui-block-a
             input.button(type='submit',data-inline='true',value='Sign In',data-transition='fade',data-theme='a',style='width: 100%;')
          div.ui-block-b   
             a.button(href='/signup',data-inline='true', data-role='button',data-theme='b')
               label Sign Up 
```

这有什么问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:17:25.267

从您的代码中删除该`data-inline='true'`位。内联按钮适用于您不希望按钮为全角的情况。

这是使用内联按钮与常规按钮的示例：http: [//jsfiddle.net/Bh8SE/1/](http://jsfiddle.net/Bh8SE/1/)（以及使用网格的示例）

# c++ - 从 boost::bind 移动到 std::bind：编译错误

> ID：10195734
> 
> 赞同：6
> 
> 时间：2012-04-17T17:06:20.137
> 
> 标签：c++, visual-c++, c++11, boost, stdbind

我有这个代码构建和运行完美：

```
boost::function<void(string)> bar = boost::bind(&Bar::BarHandler, this, _1);

//Somewhere else in Bar.cpp
void Bar::BarHandler( std::string message ){
    //Do stuff
} 
```

当我在上面的代码中愉快地更改`boost`时`std`，我开始收到此错误（我的编译器是 Visual Studio 2010 SP1）：

```
c:\program files\microsoft visual studio 10.0\vc\include\xxpmfcaller(42): error C2664: 

'void (std::string)' : cannot convert parameter 1 from 'boost::arg<I>' to 'std::string'
1>          with
1>          [
1>              I=1
1>          ]
1>          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxpmfcaller(52) : see reference to function template instantiation '_Ret std::tr1::_Pmf_caller2<_Ret,_Arg0>::_Call_pmf<_Pmf,_Ty,_Farg1>(volatile const void *,_Pmf,_Farg0 &,_Farg1 &)' being compiled
1>          with
1>          [
1>              _Ret=_Rx,
1>              _Arg0=BarLib::Bar,
1>              _Pmf=void (__thiscall BarLib::Bar::* const )(std::string),
1>              _Ty=BarLib::Bar *,
1>              _Farg1=boost::arg<1>,
1>              _Farg0=BarLib::Bar *
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxcallpmf(9) : see reference to function template instantiation '_Ret std::tr1::_Pmf_caller2<_Ret,_Arg0>::_Apply_pmf<const _Ty,_Arg,boost::arg<I>>(_Pmf,_Farg0 &,_Farg1 &)' being compiled
1>          with
1>          [
1>              _Ret=_Rx,
1>              _Arg0=BarLib::Bar,
1>              _Ty=void (__thiscall BarLib::Bar::* const )(std::string),
1>              _Arg=BarLib::Bar *,
1>              I=1,
1>              _Pmf=void (__thiscall BarLib::Bar::* const )(std::string),
1>              _Farg0=BarLib::Bar *,
1>              _Farg1=boost::arg<1>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxbind1(292) : see reference to function template instantiation '_Ret std::tr1::_Callable_pmf<_Ty,_Memty,_Indirect>::_ApplyX<_Ret,_Arg&,boost::arg<I>&>(_Arg0,_Arg1) const' being compiled
1>          with
1>          [
1>              _Ret=_Rx,
1>              _Ty=void (__thiscall BarLib::Bar::* const )(std::string),
1>              _Memty=BarLib::Bar,
1>              _Indirect=false,
1>              _Arg=BarLib::Bar *,
1>              I=1,
1>              _Arg0=BarLib::Bar *&,
1>              _Arg1=boost::arg<1> &
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxbind0(31) : see reference to function template instantiation '_Ret std::tr1::_Bind2<_Callable,_Arg0,_Arg1>::_ApplyX<_Rx,std::basic_string<_Elem,_Traits,_Ax>&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&>(_Barg0,_Barg1,_Barg2,_Barg3,_Barg4,_Barg5,_Barg6,_Barg7,_Barg8,_Barg9)' being compiled
1>          with
1>          [
1>              _Ret=_Rx,
1>              _Callable=std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,
1>              _Arg0=BarLib::Bar *,
1>              _Arg1=boost::arg<1>,
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>,
1>              _Barg0=std::string &,
1>              _Barg1=std::tr1::_Nil &,
1>              _Barg2=std::tr1::_Nil &,
1>              _Barg3=std::tr1::_Nil &,
1>              _Barg4=std::tr1::_Nil &,
1>              _Barg5=std::tr1::_Nil &,
1>              _Barg6=std::tr1::_Nil &,
1>              _Barg7=std::tr1::_Nil &,
1>              _Barg8=std::tr1::_Nil &,
1>              _Barg9=std::tr1::_Nil &
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxcallobj(13) : see reference to function template instantiation 'void std::tr1::_Bind_base<_Ret,_BindN>::operator ()<_Arg0&>(_Carg0)' being compiled
1>          with
1>          [
1>              _Ret=void,
1>              _BindN=std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>,
1>              _Arg0=std::string,
1>              _Carg0=std::string &
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxfunction(65) : see reference to function template instantiation '_Ret std::tr1::_Callable_obj<_Ty>::_ApplyX<_Rx,_Arg0&>(std::basic_string<_Elem,_Traits,_Ax>)' being compiled
1>          with
1>          [
1>              _Ret=void,
1>              _Ty=std::tr1::_Bind<void,void,std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>>,
1>              _Rx=void,
1>              _Arg0=std::string,
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxfunction(64) : while compiling class template member function 'void std::tr1::_Impl_no_alloc1<_Callable,_Rx,_Arg0>::_Do_call(_Arg0)'
1>          with
1>          [
1>              _Callable=_MyWrapper,
1>              _Rx=void,
1>              _Arg0=std::string
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxfunction(386) : see reference to class template instantiation 'std::tr1::_Impl_no_alloc1<_Callable,_Rx,_Arg0>' being compiled
1>          with
1>          [
1>              _Callable=_MyWrapper,
1>              _Rx=void,
1>              _Arg0=std::string
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\xxfunction(369) : see reference to function template instantiation 'void std::tr1::_Function_impl1<_Ret,_Arg0>::_Reset0o<_Myimpl,_Fty,std::allocator<_Ty>>(_Fty,_Alloc)' being compiled
1>          with
1>          [
1>              _Ret=void,
1>              _Arg0=std::string,
1>              _Fty=std::tr1::_Bind<void,void,std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>>,
1>              _Ty=std::tr1::_Function_impl1<void,std::string>,
1>              _Alloc=std::allocator<std::tr1::_Function_impl1<void,std::string>>
1>          ]
1>          c:\program files\microsoft visual studio 10.0\vc\include\functional(113) : see reference to function template instantiation 'void std::tr1::_Function_impl1<_Ret,_Arg0>::_Reset<_Fx>(_Fty)' being compiled
1>          with
1>          [
1>              _Ret=void,
1>              _Arg0=std::string,
1>              _Fx=std::tr1::_Bind<void,void,std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>>,
1>              _Fty=std::tr1::_Bind<void,void,std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>>
1>          ]
1>          d:\svn.dra.workingcopy\acquisition\native\xraygenerator\gemammogenerator.cpp(101) : see reference to function template instantiation 'std::tr1::function<_Fty>::function<std::tr1::_Bind<_Result_type,_Ret,_BindN>>(_Fx)' being compiled
1>          with
1>          [
1>              _Fty=void (std::string),
1>              _Result_type=void,
1>              _Ret=void,
1>              _BindN=std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>,
1>              _Fx=std::tr1::_Bind<void,void,std::tr1::_Bind2<std::tr1::_Callable_pmf<void (__thiscall BarLib::Bar::* const )(std::string),BarLib::Bar,false>,BarLib::Bar *,boost::arg<1>>>
1>          ]
1>
1>Build FAILED. 
```

这是怎么回事？也许我应该删除对 Boost 标头的引用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T17:08:53.340

您可能需要包含`<functional>`并显式使用占位符命名空间`_1`

```
using namespace std::placeholders; 
```

**编辑：**正如评论中所指出的，您还需要删除将占位符引入全局命名空间的 boost 标头。

# sql-server - Powershell 运行 SQL 作业，延迟，然后运行下一个

> ID：10195735
> 
> 赞同：2
> 
> 时间：2012-04-17T17:06:20.557
> 
> 标签：sql-server, powershell

我正在编写一个 Powershell 脚本，它对本地 SQL Server 数据库执行几项操作。

我正在做的一件事是一个接一个地运行多个 SQL 作业。我像这样运行它们：

```
 sqlcmd -S .\ -Q "EXECUTE msdb.dbo.sp_start_job @job_name = 'Rebuild Content Asset Relationship Data'" 
```

有没有办法让 Powershell 延迟运行下一个作业，直到第一个作业完成？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T19:33:14.470

要从 PowerShell 访问 SQL 代理作业，您可以使用 SMO：

**编辑**：*如果您要将此功能添加到您的脚本中，考虑到效率，我会将 SMO 加载出来并将其放置在您的脚本顶部附近（在此功能之前）。如果每次调用该函数时它都会重新加载程序集，它可能会减慢您的脚本速度。*

```
 Function Get-SQLJobStatus
{
    param ([string]$server, [string]$JobName)
    # Load SMO assembly, and if we're running SQL 2008 DLLs load the SMOExtended and SQLWMIManagement libraries
    [System.Reflection.Assembly]::LoadWithPartialName('Microsoft.SqlServer.SMO') | out-null

    # Create object to connect to SQL Instance
    $srv = New-Object "Microsoft.SqlServer.Management.Smo.Server" $server

    # used to allow piping of more than one job name to function
    if($JobName)
    {
        foreach($j in $jobName)
        {
            $srv.JobServer.Jobs | where {$_.Name -match $JobName} | Select Name, CurrentRunStatus
        }
    }
    else #display all jobs for the instance
    {
        $srv.JobServer.Jobs | Select Name, CurrentRunStatus
} #end of Get-SQLJobStatus
}
```

您可以使用此功能的方式示例：

```
 #will display all jobs on the instance
Get-SQLJobStatus MyServer

#pipe in more than one job to get status
"myJob","myJob2" | foreach {Get-SQLJobStatus -Server MyServer -JobName $_}

#get status of one job
Get-SQLJobStatus -Server MyServer -JobName "MyJob" 
```

你可以在你的脚本中使用这个函数，然后在一个while循环或其他东西中重复调用它，直到你的工作状态显示“空闲”。至少在我看来这是我认为可行的:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:18:50.757

当然，`Start-Sleep -seconds <nn>`在 sqlcmd.exe 的调用之间执行一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T18:00:33.763

我的建议是将您的工作包装在一个新的存储过程中，该存储过程启动该工作，然后通过不断轮询其状态来等待它完成。从[随附的文章中](http://www.interworks.com/blogs/bbickell/2010/01/15/how-execute-and-monitor-agent-job-using-t-sql-sql-server-20052008)，您可以执行以下操作：

```
DECLARE @JobStatus INT
SET @JobStatus = 0
EXEC MSDB.dbo.sp_start_job @Job_Name = 'JobName'
SELECT @JobStatus = current_execution_status  FROM OPENROWSET('SQLNCLI', 'Server=localhost;Trusted_Connection=yes;', 
                          'EXEC MSDB.dbo.sp_help_job @job_name = ''JobName'', @job_aspect = ''JOB'' ')     
WHILE @JobStatus <> 4
BEGIN   
    SELECT @JobStatus = current_execution_status  FROM OPENROWSET('SQLNCLI', 'Server=localhost;Trusted_Connection=yes;', 
                                'EXEC MSDB.dbo.sp_help_job @job_name = ''JobName'', @job_aspect = ''JOB'' ')    
END 
```

然后，不是从命令行调用，而是`sp_start_job`从命令行调用您的 sproc，PowerShell 将被阻止，直到该 sproc 完成。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T18:03:50.370

您的作业由 SQL Server 代理执行。您可以直接从您的 PowerShell 脚本调用相应的存储过程（或 SQL 语句），或者您在[此处解释的行中实现某些内容。](http://www.interworks.com/blogs/bbickell/2010/01/15/how-execute-and-monitor-agent-job-using-t-sql-sql-server-20052008)

# postgresql - 带有双引号的 postgresql COPY 和 CSV 数据

> ID：10195749
> 
> 赞同：23
> 
> 时间：2012-04-17T17:07:41.423
> 
> 标签：postgresql

CSV 行示例：

```
"2012","Test User","ABC","First","71.0","","","0","0","3","3","0","0","","0","","","","","0.1","","4.0","0.1","4.2","80.8","847" 
```

“First”之后的所有值都是数字列。很多 NULL 值就是这样引用的，对。

尝试复制：

```
copy mytable from 'myfile.csv' with csv header quote '"'; 
```

不：`ERROR: invalid input syntax for type numeric: ""`

嗯，是的。这是一个空值。在复制时尝试 2：

```
copy mytable from 'myfile.csv' with csv header quote '"' null '""'; 
```

不：`ERROR: CSV quote character must not appear in the NULL specification`

帅哥要做什么？在运行之前从文件中删除所有双引号`COPY`？可以做到这一点，但我认为对于必须是一个非常普遍的问题有一个适当的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T17:58:33.343

虽然一些数据库产品将空字符串视为 NULL 值，但标准规定它们是不同的，而 PostgreSQL 将它们视为不同的。

如果您可以生成具有明确表示的 CSV 文件，那将是最好的。虽然您*可以*使用 sed 或其他工具将文件过滤为良好的格式，但另一个选项是将`COPY`数据放入表中，其中`text`列可以接受空字符串，然后填充目标表。该`NULLIF`函数可能对此有所帮助：[http](http://www.postgresql.org/docs/9.1/interactive/functions-conditional.html#FUNCTIONS-NULLIF) ://www.postgresql.org/docs/9.1/interactive/functions-conditional.html#FUNCTIONS-NULLIF - 如果两个参数匹配，它将返回 NULL，如果它们不匹配，则返回第一个值'吨。所以，类似的东西`NULLIF(txtcol, '')::numeric`可能对你有用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T18:24:30.777

作为替代方案，使用

```
sed 's/""//g' myfile.csv > myfile-formatted.csv
psql 
# copy mytable from 'myfile-formatted.csv' with csv header; 
```

也可以。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-11T15:17:03.367

我认为您在这里需要做的就是以下几点：

```
COPY mytable from '/dir/myfile.csv' DELIMITER ',' NULL '' WITH CSV HEADER QUOTE ; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-22T17:47:26.653

```
COPY mytable from '/dir/myfile.csv' DELIMITER ',' NULL '' 
WITH CSV HEADER FORCE QUOTE *; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-23T14:14:05.990

这在 Python 3.8.X 中对我有用

```
import psycopg2
import csv
from io import StringIO
db_conn = psycopg2.connect(host=t_host, port=t_port,
                           dbname=t_dbname, user=t_user, password=t_pw)
cur = db_conn.cursor()

csv.register_dialect('myDialect',
                     delimiter=',',
                     skipinitialspace=True,
                     quoting=csv.QUOTE_MINIMAL)

with open('files/emp.csv') as f:
    next(f) 
    reader = csv.reader(f, dialect='myDialect') 
    buffer = StringIO()
    writer = csv.writer(buffer, dialect='myDialect') 
    writer.writerows(reader) 
    buffer.seek(0)
    cur.copy_from(buffer, 'personnes', sep=',', columns=('nom', 'prenom', 'telephone', 'email'))
    db_conn.commit() 
```

# javascript - 之间的区别： if((typeof OA != 'undefined') && OA ) 和 if(OA)

> ID：10195750
> 
> 赞同：3
> 
> 时间：2012-04-17T17:07:42.880
> 
> 标签：javascript

`if((typeof OA != 'undefined') && OA )`和有什么区别`if(OA)`？

前一种说法有效；后者悄悄地停止当前功能的执行。

（可能是菜鸟问题）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:12:16.020

`if(OA)``OA`如果从未定义， 将失败。`typeof OA != 'undefined'`检查是否`OA`已定义。

```
var OA;
if(OA){
} 
```

这行得通。

```
if(OA){
} 
```

这不起作用：`OA is not defined`.

`typeof OA != 'undefined' && OA`在尝试访问变量之前检查它是否已定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:12:33.690

编译器不会尝试在 typeof 的情况下评估 OA，因为它会尝试在 if(OA) 中进行评估

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:20:34.543

```
if ((typeof OA != 'undefined') && OA) 
```

这将首先检查变量`OA`是否已定义。如果是，则将其转换为布尔值并进行评估。

```
if(OA) 
```

这假设`OA`存在并立即将其转换为布尔值并对其进行评估。

`OA`如果变量从未被声明过，第二个例子将抛出一个 javascript 异常——第一个例子避免了这种情况。

有关javascript中多重含义的更多解释，请参见[我的答案。](https://stackoverflow.com/questions/10098816/is-variable-set-defined-issue/10099267#10099267)`undefined`

# xml - Scala：解析连接的 XML 文档

> ID：10195752
> 
> 赞同：0
> 
> 时间：2012-04-17T17:07:51.200
> 
> 标签：xml, scala

[所以我的问题与之前的 StackOverflow 问题](https://stackoverflow.com/questions/1322010/how-to-efficiently-parse-concatenated-xml-documents-from-a-file)几乎相同，但我重新提出这个问题是因为我不喜欢接受的答案。

我有一个串联的 XML 文档文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<someData>...</someData>
<?xml version="1.0" encoding="UTF-8"?>
<someData>...</someData>
...
<?xml version="1.0" encoding="UTF-8"?>
<someData>...</someData> 
```

我想解析出每一个。

据我所知，我不能使用[`scala.xml.XML`](http://www.scala-lang.org/api/current/index.html#scala.xml.XML$)，因为这取决于每个文件/字符串模型的一个文档。

是否有[`Parser`](http://www.scala-lang.org/api/current/scala/util/parsing/combinator/Parsers$Parser.html)可用于从输入源解析 XML 文档的子类？因为那时我可以做类似`many1 xmldoc`或类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:32:35.937

如果你关心的是安全，你可以用独特的标签包装你的块：

```
def mkTag = "block"+util.Random.alphanumeric.take(20).mkString
val reader = io.Source.fromFile("my.xml")
def mkChunk(it: Iterator[String], chunks: Vector[String] = Vector.empty): Vector[String] = {
  val (chunk,extra) = it.span(s => !(s.startsWith("<?xml") && s.endsWith("?>"))
  val tag = mkTag
  def tagMe = "<"+tag+">"+chunk.mkString+"</"+tag+">"
  if (!extra.hasNext) chunks :+ tagMe
  else if (!chunk.hasNext) mkChunk(extra, chunks)
  else mkChunk(extra, chunks :+ tagMe)
}
val chunks = mkChunk(reader.getLines())
reader.close
val answers = xml.XML.fromString("<everything>"+chunks.mkString+"</everything>")
// Now take apart the resulting parse 
```

由于您提供了唯一的封闭标记，因此如果有人在中间某处嵌入了文字 XML 标记，您可能会遇到解析错误，但您*不会*意外得到错误的解析次数。

（警告：输入了代码但根本没有检查——这是为了给出想法，而不是完全正确的行为。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:44:58.143

好的，我想出了一个我更满意的答案。

基本上我尝试使用 a 来解析 XML `SAXParser`，就像这样`scala.xml.XML.load`做一样，但要注意`SAXParseException`s 表明解析器`<?xml`在错误的地方遇到了 a 。

然后，我抓取已经解析过的任何根元素，将输入倒回，然后从那里重新开始解析。

```
// An input stream that can recover from a SAXParseException 
object ConcatenatedXML {
  // A reader that can be rolled back to the location of an exception
  class Relocator(val re : java.io.Reader)  extends java.io.Reader {
    var marked = 0
    var firstLine : Int = 1
    var lineStarts : IndexedSeq[Int] = Vector(0)
    override def read(arr : Array[Char], off : Int, len : Int) = { 
      // forget everything but the start of the last line in the
      // previously marked area
      val pos = lineStarts(lineStarts.length - 1) - marked
      firstLine += lineStarts.length - 1

      // read the next chunk of data into the given array
      re.mark(len)
      marked = re.read(arr,off,len)

      // find the line starts for the lines in the array
      lineStarts = pos +: (for (i <- 0 until marked if arr(i+off) == '\n') yield (i+1))

      marked
    }
    override def close { re.close }
    override def markSupported = false
    def relocate(line : Int, col : Int , off : Int) {
      re.reset
      val skip = lineStarts( line - firstLine ) + col + off
      re.skip(skip)
      marked = 0
      firstLine = 1
      lineStarts = Vector(0)
    }
  }

  def parse( str : String ) : List[scala.xml.Node] = parse(new java.io.StringReader(str))
  def parse( re : java.io.Reader ) : List[scala.xml.Node] = parse(new Relocator(re))

  // parse all the concatenated XML docs out of a file
  def parse( src : Relocator ) : List[scala.xml.Node] = {
    val parser = javax.xml.parsers.SAXParserFactory.newInstance.newSAXParser
    val adapter = new scala.xml.parsing.NoBindingFactoryAdapter

    adapter.scopeStack.push(scala.xml.TopScope)
    try {

      // parse this, assuming it's the last XML doc in the string
      parser.parse( new org.xml.sax.InputSource(src), adapter )
      adapter.scopeStack.pop
      adapter.rootElem.asInstanceOf[scala.xml.Node] :: Nil

    } catch {
      case (e : org.xml.sax.SAXParseException) => {
        // we found the start of another xmldoc
        if (e.getMessage != """The processing instruction target matching "[xX][mM][lL]" is not allowed."""
            || adapter.hStack.length != 1 || adapter.hStack(0) == null){
          throw(e)
        }

        // tell the adapter we reached the end of a document
        adapter.endDocument

        // grab the current root node
        adapter.scopeStack.pop
        val node = adapter.rootElem.asInstanceOf[scala.xml.Node]

        // reset to the start of this doc
        src.relocate(e.getLineNumber, e.getColumnNumber, -6)

        // and parse the next doc
        node :: parse( src )
      }
    }
  }
}

println(ConcatenatedXML.parse(new java.io.BufferedReader(
  new java.io.FileReader("temp.xml")
)))
println(ConcatenatedXML.parse(
  """|<?xml version="1.0" encoding="UTF-8"?>
     |<firstDoc><inner><innerer><innermost></innermost></innerer></inner></firstDoc>
     |<?xml version="1.0" encoding="UTF-8"?>
     |<secondDoc></secondDoc>
     |<?xml version="1.0" encoding="UTF-8"?>
     |<thirdDoc>...</thirdDoc>
     |<?xml version="1.0" encoding="UTF-8"?>
     |<lastDoc>...</lastDoc>""".stripMargin
))
try {
  ConcatenatedXML.parse(
    """|<?xml version="1.0" encoding="UTF-8"?>
       |<firstDoc>
       |<?xml version="1.0" encoding="UTF-8"?>
       |</firstDoc>""".stripMargin
  )
  throw(new Exception("That should have failed"))
} catch {
  case _ => println("catches really incomplete docs")
} 
```

# mysql - 是否可以在 MySQL 中搜索和替换字符串数组？

> ID：10195755
> 
> 赞同：0
> 
> 时间：2012-04-17T17:08:04.887
> 
> 标签：mysql, sql

考虑以下数组：

```
"Bank of America"    => "BOA",
"Microsoft"          => "MSFT",
"Berkshire Hathaway" => "BRK" 
```

实际上，该阵列有 100 对长。如果我有一个带有文本记录的 MySQL 表“字符串”：

```
str_id  str_text
-------------------------------------------------------------
1       I wish I had bought Berkshire Hathaway in the 1980's!
2       Microsoft to release Windows 8 in 4 flavours 
```

有没有办法 - 在 SQL 中！- 遍历所有数百万条记录并用他们的股票代码替换所有公司名称？这样当查询完成时，字符串表看起来像这样？

```
str_id  str_text
-------------------------------------------------------------
1       I wish I had bought BRK in the 1980's!
2       MSFT to release Windows 8 in 4 flavours 
```

我在问，因为它可以使用 PHP，但这本质上会更慢，因为我必须检索几千条记录，循环它们，更新它们，使用 crontab 检索数千条记录，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:42:02.647

没有 PHP 的替代方案（仅限 MySQL）：

创建 MySQL 过程：

```
 DELIMITER // 
    DROP PROCEDURE IF EXISTS replace_strings// 
    CREATE PROCEDURE replace_strings(IN table_name VARCHAR(100), IN field_name VARCHAR(100))

    BEGIN

    DECLARE done INT DEFAULT FALSE;
    DECLARE str_from VARCHAR(255);
    DECLARE str_to VARCHAR(255);
    DECLARE cur1 CURSOR FOR SELECT string_from, string_to FROM replacements;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
    OPEN cur1;

    read_loop: LOOP
        FETCH cur1 INTO str_from, str_to;
        IF done THEN
            LEAVE read_loop;
        END IF;

    SET @sql_command = CONCAT("UPDATE ",table_name," SET ",field_name," = REPLACE(",field_name,", '",str_from,"', '",str_to,"')");
    PREPARE stmt FROM @sql_command;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;

    END LOOP;

    CLOSE cur1;

    END // 
    DELIMITER ; 
```

创建`replacements`带有字段`string_from`和的表`string_to`。向此表添加可能的自动更改。

在您的代码中使用过程调用：

```
 CALL replace_strings('strings','str_text'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:12:38.110

为什么不使用 REPLACE 功能？

```
update 
  mytable 
set 
  str_text=replace(str_text, 'Bank of America', 'BOA'); 
```

所以你应该遍历你的数组并执行那个 sql 请求：

```
foreach ($myarr as $key=>$val) {
//exec sql
} 
```

# mysql - 即使在 EXPLAIN 上“使用索引”，SQL 查询也太慢了

> ID：10195756
> 
> 赞同：0
> 
> 时间：2012-04-17T17:08:09.277
> 
> 标签：mysql, sql, performance

我正在尝试获取用户的所有订阅者

我的查询：

```
SELECT
    COUNT(sub.id) as ids
FROM
    subscribers as sub
WHERE
    suid=541839243781 
```

解释打印：

```
╔════╦═════════════╦═══════╦══════╦═══════════════ ╦═════╦═════════╦═══════╦═══════╦══════════════════════
║ id ║ select_type ║ table ║ type ║ possible_keys ║ key ║ key_len ║ ref ║ rows ║ Extra ║
╠════╬═════════════╬═══════╬══════╬═══════════════ ╬═════╬═════════╬═══════╬═══════╬══════════════════
║ 1 ║ SIMPLE ║ sub ║ ref ║ i3 ║ i3 ║ 8 ║ const ║ 47890 ║ 使用索引 ║
╚════╩═════════════╩═══════╩══════╩═══════════════ ╩═════╩═════════╩═══════╩═══════╩══════════════════

```

所以目前我得到的总数大约是`48k`并且需要`0.0333`加载......如果这上升到`1m`或`5m`？然后可能需要很长时间才能加载...

我在订阅者表上的索引是：

```
╔═════════════╦════════════╦═══════════════════╦══ ════════════╦═════════════╦═══════════╦═══════════ ══╦══════════╦════════╦══════╦════════════╦═══════ ══╗
║ Table ║ Non_unique ║ Key_name ║ Seq_in_index ║ Column_name ║ Collat​​ion ║ Cardinality ║ Sub_part ║ Packed ║ Null ║ Index_type ║ Comment ║
╠═════════════╬════════════╬═══════════════════╬══ ════════════╬═════════════╬═══════════╬═══════════ ══╬══════════╬════════╬══════╬════════════╬═══════ ══╣
║ 订阅者 ║ 0 ║ PRIMARY ║ 1 ║ id ║ A ║ 60251 ║ NULL ║ NULL ║ ║ BTREE ║ ║
║ 订阅者 ║ 1 ║ total_subscribers ║ 1 ║ id ║ A ║ 60251 ║ NULL ║ NULL ║ ║ BTREE ║ ║
║ 订阅者 ║ 1 ║ total_subscribers ║ 2 ║ suid ║ A ║ 60251 ║ NULL ║ NULL ║ ║ BTREE ║ ║
║ 订阅者 ║ 1 ║ i3 ║ 1 ║ suid ║ A ║ 6025 ║ NULL ║ NULL ║ ║ BTREE ║ ║
║ 订阅者 ║ 1 ║ i3 ║ 2 ║ uid ║ A ║ 60251 ║ NULL ║ NULL ║ ║ BTREE ║ ║
║ 订阅者 ║ 1 ║ i3 ║ 3 ║ id ║ A ║ 60251 ║ NULL ║ NULL ║ ║ BTREE ║ ║
╚═════════════╩════════════╩═══════════════════╩══ ════════════╩═════════════╩═══════════╩═══════════ ══╩══════════╩════════╩══════╩════════════╩═══════ ══╝

```

那么我怎样才能使这个查询更有效率呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:42:37.373

该列是否`id`允许 NULL 值？如果没有，则更改为`SELECT COUNT(*)`，引擎将能够仅从索引回答查询，而无需参考表数据。这应该会加快速度，并且根据 MySQL 存储和检索基数统计信息的方式，可以使查询即时进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:13:04.530

你可能做不到。

也就是说，我希望 COUNT 操作必然与行数成线性关系。您可能会发现使用 100 万行需要 0.12 秒而不是 0.0333 秒。

如果它真的成为问题，您也许可以使用预计算和缓存来解决这个问题。例如，您可能有一个每小时计算计数并将它们存储在表中的工作。您的计数可能会过期一个小时，但检索它们会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:26:21.390

您可以将 sys.tables 加入到 sys.partitions。表的行统计信息存储在那里。

错误：这适用于 MS SQL Server，抱歉应该提到这一点。

# javascript - 创建 DOM 元素后平滑向上/向下滑动

> ID：10195758
> 
> 赞同：0
> 
> 时间：2012-04-17T17:08:15.477
> 
> 标签：javascript, jquery, xml

我在 $(db) 中有大量的 xml 数据。单击某个元素时，一个函数会遍历 $(db) 并在隐藏的 div 中创建新的 DOM 元素。我怎样才能顺利滑下div？

```
$('li').live('click', function(){
    // many $('div.content').append(....
    $('div.content').slideDown();
}); 
```

在上面的例子中， div.content 变得可见，但是没有幻灯片效果。如果我不是创建 DOM 元素而是加载具有不同内容的 html 文档，则幻灯片效果可以正常工作。我认为当创建大量新的 DOM 元素时，浏览器会卡住，然后无法执行流畅的动画。我该如何解决这个问题？是否可以在变量中创建所有 DOM 元素，然后像使用 .load() 时那样显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:16:25.437

如果您可以从 DOM 中选择新创建的元素，则此方法将很好地工作（需要 jQuery）。您将简单地显示您创建的元素，然后将浏览器滚动到视图中。

```
function scrollTo(element){
    $("html, body").animate({
         scrollTop: $(element).position().top
    });
} 
```

# postgresql - 在 SQL 中创建查询时需要一些帮助吗？

> ID：10195759
> 
> 赞同：1
> 
> 时间：2012-04-17T17:08:15.417
> 
> 标签：postgresql

```
ID|message| UpdateTime| TicketID| StaffID

10008;"Yes, it is!";"2012-04-15 16:15:00";1008;660
10013;"Thanks for swift reply!";"2012-04-15 17:15:00";1008;660 
```

当我写这两个查询时，你能告诉我：

```
Select MAX(UpdateTime) from TicketUpdate where ticketUpdate.id = 10008;    
Select MIN(UpdateTime) from TicketUpdate where ticketUpdate.id = 10008; 
```

如果有 2 个不同的时间，即使在我的数据库中输出也相同。你能告诉我这里可能是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:11:38.160

`ID`似乎是该表的唯一标识符。相反，您似乎想使用它`TicketID`来查找每张票的最大值和最小值。

例如，要找到它们`TicketID = 1008`：

```
SELECT MAX(UpdateTime) FROM TicketUpdate WHERE TicketUpdate.TicketID = 1008;    
SELECT MIN(UpdateTime) FROM TicketUpdate WHERE TicketUpdate.TicketID = 1008; 
```

或者在一个查询中：

```
SELECT 
  MAX(UpdateTime) AS newest,
  MIN(UpdateTime) AS oldest
FROM TicketUpdate
WHERE TicketID = 1008; 
```

要获取每个 TicketID 的最新和最旧，请使用 a`GROUP BY`并省略该`WHERE`子句。：

```
SELECT 
  TicketID,
  MAX(UpdateTime) AS newest,
  MIN(UpdateTime) AS oldest,
FROM TicketUpdate
GROUP BY TicketID 
```

如果您使用 查询`ID`，您将始终获得相同的行，因为每个似乎只有一个值`ID`唯一标识其行。

# matlab - 在 Matlab 中参考 3d 矩阵的坐标

> ID：10195761
> 
> 赞同：1
> 
> 时间：2012-04-17T17:08:31.087
> 
> 标签：matlab, matrix, 3d, coordinate

在 Matlab 中，我试图在 3d 矩阵中找到坐标小于某个函数的点。如果这些坐标等于某些函数，我可以写：

```
A(some_function1,some_function2,some_function3)=2; 
```

但是，如果我想做类似的事情怎么办：

```
A(<some_function1,<some_function2,<some_function3)=2; 
```

这是行不通的——那么在不使用“for”循环的情况下找到这些点的另一种方法是什么？不幸的是，使用“for”循环我的代码需要花费大量时间来计算。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:50:57.483

You can just use regular indexing to achieve this:

```
A(1:floor(some_function1),1:floor(some_function2),1:floor(some_function3)) = 2; 
```

assuming you check / ensure that `floor(some_function*)` is smaller than the dimensions of `A`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T18:49:58.663

怎么样？

```
A(  ceil(min(some_function1,size(A,1))),...
    ceil(min(some_function2,size(A,2))),...
    ceil(min(some_function3,size(A,3)))   ); 
```

这会将索引限制在每个数组维度的末尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T18:49:33.787

尝试：

```
A(1:size(A,1)<some_function1, 1:size(A,2)<some_function2, 1:size(A,3)<some_function3) = 2 
```

我希望我正确地回答了你的问题。

# c++ - QBoxLayout 的所有者是否成为所有布局小部件的所有者？

> ID：10195762
> 
> 赞同：20
> 
> 时间：2012-04-17T17:08:32.940
> 
> 标签：c++, qt

我在[这里](http://doc.trolltech.com/4.5/tools-customtypesending-window-cpp.html)查看示例，想知道是否没有内存泄漏。我有一篇关于 delete 上的 subjet [mem 泄漏](https://stackoverflow.com/questions/1651616/qt-does-new-without-delete-cause-memory-leaks-with-controls)的文章。然而，虽然 QWidgets 确实保留了添加到的小部件的所有权，但布局却没有。

从 QT 代码看来，具有布局的父级获得了该布局的所有小部件的所有权。但是我在文档中看不到任何关于此的参考。

```
Window::Window()
{
 editor = new QTextEdit();
 QPushButton *sendButton = new QPushButton(tr("&Send message"));

 connect(sendButton, SIGNAL(clicked()), this, SLOT(sendMessage()));

 QHBoxLayout *buttonLayout = new QHBoxLayout();
 buttonLayout->addStretch();
 buttonLayout->addWidget(sendButton);
 buttonLayout->addStretch();

 QVBoxLayout *layout = new QVBoxLayout(this);
 layout->addWidget(editor);
 layout->addLayout(buttonLayout);

 setWindowTitle(tr("Custom Type Sending"));
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-17T17:14:08.970

从[布局管理](http://qt-project.org/doc/qt-4.8/layout.html)：

> **使用布局的提示**
> 
> 使用布局时，在构造子小部件时不需要传递父级。*布局将自动重新设置小部件的父级*（使用 QWidget::setParent()），以便它们是安装了布局的小部件的子级。
> 
> 注意：布局中的小部件是安装了布局的小部件的子级，而不是布局本身的子级。小部件只能有其他小部件作为父级，而不是布局。
> 
> 您可以在布局上使用 addLayout() 嵌套布局；然后内部布局成为它插入的布局的子级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-23T23:18:43.253

不，QLayouts 不拥有托管 QWidgets 的所有权。

这里是实现`addWidget()`：

```
void QLayout::addWidget(QWidget *w)
{
    addChildWidget(w);
    addItem(QLayoutPrivate::createWidgetItem(this, w));
} 
```

解释：

1.  `addChildWidget()`只是确保将托管小部件 w 从其他布局中删除。

2.  `createWidgetItem(this, w)`分配一个新的 QWidgetItem。这个 QWidgetItem 存储了一个指向 w 的指针，但*不拥有 w 的所有权*。

3.  `addItem()`将项目添加到布局中，并获得 QWidgetItem 的所有权（*不是 QWidgetItem 观察到的 QWidget*）。这意味着当 QLayout 被销毁时 QWidgetItem 将被销毁。但是，QWidget w 仍然不会被销毁。

QWidget 将在其父 QWidget 被销毁时被销毁。当调用 parent->setLayout(layout) 时，QLayout 会自动分配这样的父级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T09:54:36.767

不知道 2016 年的情况如何 - 但今天（Qt 5.15 ...）布局肯定设置了父级...

# c# - WCF 客户端返回空数组 - XML 响应似乎正常

> ID：10195765
> 
> 赞同：6
> 
> 时间：2012-04-17T17:08:36.417
> 
> 标签：c#, wcf, web-services

我正在尝试为托管在我们 Intranet 上的 Web 服务创建一个简单的 WCF 客户端 (C#)。使用 Fiddler 和 SoapUI，我可以看到请求和响应似乎没问题，但是当我运行代码时，会返回一个空数组。

我会尝试只粘贴相关的行（但会是很多东西），但随时问我是否遗漏了什么：

**WSDL**：

```
<s0:definitions name="Workforce_2_1_0" targetNamespace="ld:Logical/Workforce_2_1_0_ws" xmlns:s0="http://schemas.xmlsoap.org/wsdl/" xmlns:s1="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:s2="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:s3="ld:Logical/Workforce_2_1_0_ws" xmlns:s4="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
   <s0:documentation>Oracle Data Service Integrator Web Service</s0:documentation>
   <s1:Policy s2:Id="Mtom.xml">
      <wsoma:OptimizedMimeSerialization xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization"/>
   </s1:Policy>
   <wsp:UsingPolicy s0:Required="true"/>
   <s0:types>
      <xs:schema elementFormDefault="qualified" targetNamespace="ld:Logical/Workforce_2_1_0_ws" xmlns:dsns0="http://schemata.enterprise.biz/hr/2.1" xmlns:s1="ld:Logical/Workforce_2_1_0_ws" xmlns:s2="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:stns="ld:Logical/Workforce_2_1_0_ws" xmlns:tns="ld:Logical/Workforce_2_1_0_ws" xmlns:xs="http://www.w3.org/2001/XMLSchema">
         <xs:import namespace="http://schemata.enterprise.biz/hr/2.1" schemaLocation="http://server123.enterprise.com:31900/MyService/Services/Workforce_2-1-0?SCHEMA%2FMyService%2FResources%2FSchemas%2FWorkForce_2.1"/>
         <xs:element name="getByKey">
            <xs:complexType>
               <xs:sequence>
                  <xs:element name="key" type="xs:string"/>
               </xs:sequence>
            </xs:complexType>
         </xs:element>
      </xs:schema>
   </s0:types>
   <s0:message name="getByKeyIn">
      <s0:part element="s3:getByKey" name="parameters"/>
   </s0:message>
   <s0:message name="getByKeyOut">
      <s0:part element="s3:getByKeyResponse" name="parameters"/>
   </s0:message>
   <s0:portType name="Workforce_2_1_0PT">
      <s0:operation name="getByKey">
         <s0:input message="s3:getByKeyIn"/>
         <s0:output message="s3:getByKeyOut"/>
      </s0:operation>
   </s0:portType>
   <s0:binding name="Workforce_2_1_0SoapBinding" type="s3:Workforce_2_1_0PT">
      <s4:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
      <wsp:Policy>
         <wsp:PolicyReference URI="#Mtom.xml"/>
      </wsp:Policy>
      <s0:operation name="getByKey">
         <s4:operation soapAction="ld:Logical/Workforce_2_1_0_ws/getByKey" style="document"/>
         <s0:input>
            <s4:body use="literal"/>
         </s0:input>
         <s0:output>
            <s4:body use="literal"/>
         </s0:output>
      </s0:operation>
   </s0:binding>
   <s0:service name="Workforce_2_1_0SoapService">
      <s0:port binding="s3:Workforce_2_1_0SoapBinding" name="Workforce_2_1_0SoapPort">
         <s4:address location="http://server123.enterprise.com:31900/MyService/Services/Workforce_2-1-0"/>
      </s0:port>
   </s0:service>
</s0:definitions> 
```

**绑定配置**：

```
<basicHttpBinding>
  <binding name="Workforce_2_1_0SoapBinding" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
      messageEncoding="Mtom" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
    <security mode="TransportCredentialOnly">
      <transport clientCredentialType="Basic" proxyCredentialType="None"
          realm="" />
      <message clientCredentialType="UserName" algorithmSuite="Default" />
    </security>
  </binding>
</basicHttpBinding> 
```

**端点**：

```
<endpoint address="http://server123.enterprise.com:31900/MyService/Services/Workforce_2-1-0"
    binding="basicHttpBinding" bindingConfiguration="Workforce_2_1_0SoapBinding"
    contract="Workforce.Workforce_2_1_0PT" name="Workforce_2_1_0SoapPort" /> 
```

**请求**（通过 Fiddler）：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <getByKey xmlns="ld:Logical/Workforce_2_1_0_ws">
            <key>ABCDEFGH</key>
        </getByKey>
    </s:Body>
</s:Envelope> 
```

**响应**（通过提琴手）：

```
<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'>
    <soapenv:Header></soapenv:Header>
    <soapenv:Body>
        <ns:getByKeyResponse xmlns:ns='ld:Logical/Workforce_2_1_0_ws'>
            <ns0:basicWorkforce xmlns:ns0="http://schemata.enterprise.biz/hr/2.1">
                <ns0:key>ABCDEFGH</ns0:key>
                <ns0:name>JUAN PABLO MONTOYA</ns0:name>
            </ns0:basicWorkforce>
        </ns:getByKeyResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

**客户端代码**：

```
Workforce_2_1_0PTClient client = new Workforce_2_1_0PTClient();

client.ClientCredentials.UserName.UserName = "MyUsername";
client.ClientCredentials.UserName.Password = "MyPassword";

var result = client.getByKey("ABCDEFGH"); 
```

**编辑：**包括代理代码，由 Visual Studio 生成

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(WrapperName="getByKey", WrapperNamespace="ld:Logical/Workforce_2_1_0_ws", IsWrapped=true)]
public partial class getByKeyRequest {

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="ld:Logical/Workforce_2_1_0_ws", Order=0)]
    public string key;

    public getByKeyRequest() {
    }

    public getByKeyRequest(string key) {
        this.key = key;
    }
}

[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(WrapperName="getByKeyResponse", WrapperNamespace="ld:Logical/Workforce_2_1_0_ws", IsWrapped=true)]
public partial class getByKeyResponse {
[System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://schemata.enterprise.biz/hr/2.1", Order=0)]
    [System.Xml.Serialization.XmlElementAttribute("basicWorkforce")]
    public basicWorkforce[] basicWorkforce;

    public getByKeyResponse() {
    }

    public getByKeyResponse(basicWorkforce[] basicWorkforce) {
        this.basicWorkforce = basicWorkforce;
    }
}

[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.225")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://schemata.enterprise.biz/hr/2.1")]
public partial class basicWorkforce : object, System.ComponentModel.INotifyPropertyChanged {

    private string keyField;

    private string nameField;

    [System.Xml.Serialization.XmlElementAttribute(Order=0)]
    public string key {
        get {
            return this.keyField;
        }
        set {
            this.keyField = value;
            this.RaisePropertyChanged("key");
        }
    }

    [System.Xml.Serialization.XmlElementAttribute(Order=1)]
    public string name {
        get {
            return this.nameField;
        }
        set {
            this.nameField = value;
            this.RaisePropertyChanged("name");
        }
    }
} 
```

即使响应包含一个`basicWorkforce`元素，该`result`变量也是一个空数组`basicWorkforce`。

对不起，很长的帖子，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T13:36:53.430

终于做到了！对于任何面临同样问题的人来说，它都存在于命名空间中。在这种情况下，在由 . 返回的数组上`getByKeyResponse`。

所以，我只是替换了这个：

```
 [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://schemata.enterprise.biz/hr/2.1", Order=0)]
    [System.Xml.Serialization.XmlElementAttribute("basicWorkforce")]
    public basicWorkforce[] basicWorkforce; 
```

有了这个：

```
 [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://schemata.enterprise.biz/hr/2.1", Order=0)]
    [System.Xml.Serialization.XmlElementAttribute("basicWorkforce", Namespace = "http://schemata.enterprise.biz/hr/2.1")]
    public basicWorkforce[] basicWorkforce; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:44:10.763

您是否
在“添加服务引用”->“高级”
或
“服务引用”->“配置服务引用”下将集合类型设置为 System.Array。

# sql - 使用 VARCHAR 作为“ORPHAN”表的主键

> ID：10195767
> 
> 赞同：1
> 
> 时间：2012-04-17T17:08:44.880
> 
> 标签：sql, database, varchar, sql-types

我要创建一个包含 3 列的孤立表（与任何其他表没有关系）。

*   Col1 - 字符串字段 - VARCHAR(32) - 包含不超过 32 个字符的唯一数据
*   Col2 - 字符串字段 - TEXT - 包含较大的非唯一字符数据
*   Col3 - 数字 (Bool) - INT(1) - 0/1 用于标记

我正在考虑使用 Col1 作为我的主键。我做了一些研究，看到人们认为使用无意义的 INT 列作为 PRIMARY KEY 来避免外键/存储问题是可行的方法。

但是，IMO，因为这是一个孤儿表，所以没关系。此外，无论如何我都需要在 Col1 上放置一个索引。

作为旁注，我预计此表中的行数不会超过 ~1000 行。

请思想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:16:17.140

我仍然会使用 INT PK 并在 COL1 上放置一个索引。我想你可以使用 COL1 作为索引，如果你能确保没有任何东西被加入到那个表中，但是如果没有别的，索引会让你知道从表中添加/删除项目的顺序。我还想添加一个 IsActive 布尔值，这样您就永远不会删除任何内容，并且几乎每个表都添加一个 DateCreated 日期时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:26:19.767

如果 col1 是您*真正的*主键，则没有理由不使用它。特别是如果桌子那么小。

无论如何，您都需要在该列上维护一个唯一索引，因此通过添加人工主键，您只需添加更多的插入和删除操作开销（因为必须维护两个索引）。

除非您从非常非常多的其他行（和其他表）中引用该 PK，否则您应该使用业务规则的自然主要内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:58:27.833

我仍然不清楚问题是什么。从答案来看，我将其推断为两个似是而非的问题：

1.  **可以使用 VARCHAR 而不是 INTEGER 作为主键吗？**
    *   是的，可以使用 VARCHAR 代替。
        在许多情况下，它是首选，特别是如果您的表预计将超过 2,147,483,647 条记录（是的，这种情况会发生）。在性能方面，即使 INT 具有最小的速度优势，在约 1000 条记录表上，您也不会看到它。默认情况下对指定的 PK 进行索引。一个问题是您将丢失数据库可以为您执行的任何自动生成序列。
2.  **可以使用您唯一的 COL1 字段作为主键，而不是其他一些唯一的 ID 字段吗？**
    *   是的，没关系。
        拥有主键的整个概念是建立一个唯一的字段。然而，你失去的可能是一些内在的理解。当其他用户想要加入该表时，更容易理解这`id`是一个唯一字段，而`col1`（某些 varchar）可能是唯一的，也可能不是唯一的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T17:14:47.593

我知道你来自哪里，但无论如何索引第一列是有意义的。这可能是因为我习惯了 excel，但是主键的初始列的用处也有其顺序以及调试或捕获数据时的可读性。如果您使用更随机生成的数字，您仍然会在数百行中搜索难以区分的键。最后，我强烈推荐额外的整数列。这是非常值得的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T17:14:51.757

每当我做任何数据库表时，我都会保留我的 INT 列。我相信比较数字比比较字符串要快。

因此，这完全取决于您查询数据库以获取信息并比较其中的字符串的频率。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T17:12:42.520

在您给定的情况下，应该没问题。如果范围确实变大了，那么您总是可以引入一个 auto_increment PK 列。只需确保您的字段既已编入索引又是唯一的。

# algorithm - 当启发式总是低估时 A* 算法的最优性的证明

> ID：10195780
> 
> 赞同：10
> 
> 时间：2012-04-17T17:09:55.687
> 
> 标签：algorithm, search, artificial-intelligence, a-star

我理解为什么当启发式总是低估时，A* 算法总是给出通往目标状态的最佳路径，但我无法为它创建正式的证明。

据我了解，对于每条考虑的路径，随着它越来越深，精度会`f(n)`增加，直到达到 100% 准确的目标状态。此外，不会忽略不正确的路径，因为估计小于实际成本；从而导致最优路径。但是我应该如何为它创建一个证明呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T17:22:00.620

证明的主要思想是，当 A* 找到一条路径时，它找到了一条估计值低于任何其他可能路径的估计值的路径。由于估计是乐观的，因此可以安全地忽略其他路径。

此外，仅当满足两个条件时，A* 才是最优的：

1.  启发式是*可以接受*的，因为它永远不会高估成本。

2.  启发式是*单调*的，即如果*h(n [i] ) < h(n [i + 1] )*，则*real-cost(n [i] ) < real-cost(n [i + 1] )*。

* * *

您可以通过假设相反并扩展含义来证明最优性是正确的。

假设 A* 给出的路径在可接受的单调启发式中*不是*最优的，并考虑这意味着什么（你很快就会发现自己遇到矛盾），因此，你的原始假设被简化为荒谬.

由此您可以得出结论，您最初的假设是错误的，即 A* 在上述条件下是最优的。量子点

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:17:56.953

考虑最后一步，即完成最佳路径的那一步。

为什么 A* 必须选择那条路径？或者，换一种说法，为什么 A* 必须避免选择达到目标的次优路径？

***提示***：这就是启发式需要被*接受*的原因。请注意，可以选择次优路径，只要它没有完成路径（为什么？）。

这应该让您对如何制作证明有所了解。

# c# - 删除 WCFTestClient 的缓存 - 适用于 Visual Studio 2010

> ID：10195782
> 
> 赞同：1
> 
> 时间：2012-04-17T17:10:26.310
> 
> 标签：c#, windows, wcf, visual-studio-2010, caching

我们正在通过 Visual Studio 2010 创建 WCF 服务 (.NET 3.5)。当我对 .svc.cs 文件进行更改时，保存、清理、重建并复制到 GAC（使用 WSPBuilder，它回收各种 IIS 进程）我仍然得到缓存的数据。只有像签入我的所有文件并运行门控签入构建或重新启动计算机这样的极端事情才能清除此“缓存”。

这样做的结果是开发->测试周期非常缓慢。但它不必！这是我的问题。VS2010 或 Windows 为 WCFTestClient 保留的缓存在哪里？我可以添加调试断点，并且符号会显示在调试中（这意味着在某种程度上我正在使用新程序集），但是像手表这样的关键事物会显示旧的缓存变量值。

这些数据是否有缓存？查看我运行 debug(F5) 时 WCFTestClient 正在使用的输出中的 .dll 文件列表表明它使用了正确的 .dll（我在调试期间的观察证实了这一点。）

我只需要能够在我的程序集重建之间删除（如果需要，手动删除）这个缓存。否则，我实际上无法纠正代码中的问题。

如果我在这里遗漏了一些明显的东西，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:44:42.387

尝试删除您的解决方案 .suo 文件。

# php - 在 mySQL 准备语句中使用变量

> ID：10195783
> 
> 赞同：1
> 
> 时间：2012-04-17T17:10:28.253
> 
> 标签：php, mysql, prepared-statement

是否可以在准备好的 mySQL 查询中使用 PHP 变量，例如：

```
$stmt = $mysqli->prepare("UPDATE table SET $variable_field = ? WHERE field = ?"); 
```

它正在订购系统中使用 - 这样我就有一个存储购物车内容的会话。直到最后我才知道订购的商品总数。假设客户订购了 10 件商品 - 我需要将这些值插入 item_1、item_2、item_3 等。

我想达到的目标：

```
<<connect to DB>>
$x = 0;
while($x < count($order_contents)) {
    $stmt = $mysqli->prepare("UPDATE table SET item_$x = ? WHERE field = ?");
    $stmt->bind_param("ss", $order_contents[$x], $order_number);
    $stmt->execute();
    $x++;
}
<<close DB connection>> 
```

差不多就是这样。问题是，我看不到它允许我直接在查询中指定 PHP 变量。有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:13:27.870

```
$x = 0;
while($x < count($order_contents)) {
    $x++;
    $stmt = $mysqli->prepare('UPDATE table SET item_'.$x.' = ? WHERE field = ?');
    $stmt->bind_param("ss", $order_contents[$x], $order_number);
    $stmt->execute();
} 
```

我也将 移到`$x++`循环的开头，因为您想从`item_1`.

# msbuild - VS 和导入的 msbuild 项目文件

> ID：10195784
> 
> 赞同：1
> 
> 时间：2012-04-17T17:10:39.063
> 
> 标签：msbuild, fxcop, itemgroup

我的一个 msbuild 项目文件中有一个 import 语句：

```
<Import Project="$(ProjectDir)..\CommonProjectProperties\OurCommon.targets" Condition="Exists('$(ProjectDir)..\CommonProjectProperties\OurCommon.targets" /> 
```

导入的 msbuild 项目具有以下属性组：

```
<PropertyGroup Condition="'$(Configuration)' == 'Debug' And '$(SolutionName)' == 'Ourwork' And Exists('$(ProjectDir)..\..\FXCopSettings\OurGlobal.ruleset')">
    <CodeAnalysisRuleSet>$(ProjectDir)..\..\FXCopSettings\OurGlobal.ruleset</CodeAnalysisRuleSet>
    <RunCodeAnalysis>true</RunCodeAnalysis>
    <CodeAnalysisIgnoreGeneratedCode>True</CodeAnalysisIgnoreGeneratedCode>
    <DefineConstants>$(DefineConstants);CODE_ANALYSIS</DefineConstants>
</PropertyGroup> 
```

以及以下项目组：

```
<When Condition="Exists('$(ProjectDir)\..\..\Solutions\FXCopSettings\GlobalSuppressions.cs') And Exists('$(ProjectDir)$(ProjectName).csproj')">
        <ItemGroup>
            <Compile Include="$(ProjectDir)\..\..\Solutions\FXCopSettings\GlobalSuppressions.cs" />
        </ItemGroup>
    </When> 
```

基本上我要做的是在我的所有项目文件中都有上述导入语句，然后通过调整导入的项目文件来操纵 FXCop 是否运行。

问题是，从命令行，所有这些都可以正常工作（除了常量 CODE_ANALYSIS，我必须使用 msbuild /t:build proj.sln /p:DefineConstants="CODE_ANALYSIS=true" 之类的东西来设置它。没关系。

从 VS 2010 IDE 来看，它只是......地狱！它“看起来”像 VS 尊重导入的 msbuild 项目文件中的所有内容......除了
1）包含的文件是灰色的，这意味着只有在“显示所有文件”时才会在 IDE 中显示。这意味着它没有编译。我可以将完全相同的 ItemGroup 复制到父 msbuild 项目文件中，并且该文件在解决方案资源管理器中显示为非灰色，这意味着它已被编译。
2) 抑制文件用于告诉 FXCop 在进行代码分析时忽略哪些对象。当我将抑制文件正确编译为项目的一部分时，FXCop 似乎忽略了它。阅读此内容，显然需要打开 CODE_ANALYSIS 常量。我以为我是从导入的项目文件中做的，但没有得到尊重。即使 VS IDE 中的项目属性窗口显示它是一个已定义的常量。同样，当我将 DefinedConstansts 声明移动到父项目文件之一时，IDE 会尊重该常量。

所以......我不确定我是否需要将它分成两个帖子，但这是我的问题：
1）我如何让 IDE 尊重和编译导入的项目文件中列出的文件？
2）如何让 IDE 在导入的项目文件中尊重 DefineConstants

# symfony1 - sfGuardPlugin 4.0.2 与 sfPropelORMPlugin 中断

> ID：10195788
> 
> 赞同：1
> 
> 时间：2012-04-17T17:11:01.457
> 
> 标签：symfony1, propel

最近的拉取请求需要“isCrossRef：true”，以便在表单中生成多对多列表小部件。拉取请求：[https ://github.com/propelorm/sfPropelORMPlugin/pull/90](https://github.com/propelorm/sfPropelORMPlugin/pull/90)

当他们尝试为这些列表设置标签时，默认表单将抛出一个致命错误，这些列表不再存在于基类中。

将其发布在 SO 上，以防其他人遇到此问题，因为我花了一段时间才弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:12:26.740

这是一个星期以来固定的，请参阅：[https ://github.com/propelorm/sfPropelORMPlugin/pull/136](https://github.com/propelorm/sfPropelORMPlugin/pull/136)

# java - 使用多个实例同步两个计时器（Java）

> ID：10195789
> 
> 赞同：4
> 
> 时间：2012-04-17T17:11:01.413
> 
> 标签：java, multithreading, sync

我是 Java 的新手，过去我没有使用过线程。现在，我的知识水平遇到了一个非常棘手的问题。

我开发了“发送邮件”和“检查邮件”两个功能。每个用户注册他的偏好，系统创建两个目录，其中包含许多用于定期工作的指令，例如

A) 每 1500 毫秒发送一次消息

B) 每 1800 毫秒发送一次消息

C) 每 3000 毫秒发送一次消息

A) 每 2000 毫秒检查一次消息

B) 每 6000 毫秒检查一次消息

C) 每 8000 毫秒检查一次消息

我用线程尝试了很多方法，但我没能做到。我的问题是同步它们的最佳方式是什么？下面是我最后一次使用线程的代码。

```
public class MailCreatorThread extends Thread {
    @Override
    public void run() {
        CreateMail(_date); //creates a mail with _date as subject
    }
}

public class GPSThread extends Thread {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (!_isTimeToStop) {
            try {
                while (_servicesToUpdate.size() == 0) {
                    Thread.sleep(500);
                }
                _currentService = (MyService) _servicesToUpdate.get(0)
                        .clone();
                _servicesToUpdate.remove(0);

                        MailCreatorThread mailCreatorThread = new MailCreatorThread();
                        mailCreatorThread.start();

            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
}

public class CheckServicesThread extends Thread {
    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (!_isTimeToStop) {
            try {
                Thread.sleep(1000);
                    for (int j = 0; j < _servicesList.length; j++) {
                        MyService currentService = ((MyService) _servicesList[j]);
                        if (myService.getTimeToNextUpdate() - 1000 <= 0) {
                            _servicesToUpdate
                                    .add((MyService) currentService
                                            .clone());
                            currentService
                                    .setTimeToNextUpdate(currentService
                                            .getUpdatePeriod());
                        } else {
                            currentService
                                    .setTimeToNextUpdate(currentService
                                            .getTimeToNextUpdate() - 1000);
                        }
                }

            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        stopSelf();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:58:36.450

您可以使用 a`ScheduledExecutorService`来运行这些定期任务。语法相当简单：

```
Runnable check = new Runnable() {
    public void run() {
        checkMessage();
    }
}
Runnable send = new Runnable() {
    public void run() {
        sendMessage();
    }
}

//since what you are doing is mostly I/O you probably want to have 
//more than one thread available so that if one operation blocks,
//the other ones can be launched in parallel

ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(10);
scheduler.scheduleAtFixedRate(check, 0, 1500, MILLISECONDS);
scheduler.scheduleAtFixedRate(send, 0, 6000, MILLISECONDS); 
```

注意：不应再使用[Ozzy 的答案](https://stackoverflow.com/a/10196234/829571)`Timer`中提到的，因为它已在 Java 1.5 中由 改进，如[Timer 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)中所述：`ScheduledThreadPoolExecutor`

> Java 5.0 引入了 java.util.concurrent 包，其中的并发实用程序之一是 ScheduledThreadPoolExecutor，它是一个线程池，用于以给定的速率或延迟重复执行任务。它实际上是 Timer/TimerTask 组合的更通用替代品，因为它允许多个服务线程，接受各种时间单位，并且不需要子类化 TimerTask（只需实现 Runnable）。使用一个线程配置 ScheduledThreadPoolExecutor 使其等效于 Timer。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:42:45.860

在 java 中，你有内置的 Timer 和 TimerTask 类来帮助你在一个单独的线程中重复一个任务。

这将创建一个 Timer，它将创建自己的后台线程：

```
Timer t = new Timer(); 
```

然后，您可以为该计时器安排任意数量的任务，它们将共享计时器自己的线程。

在 2000 毫秒 = 2 秒的延迟之后，您可以通过以下方式在计时器线程上安排单个任务：

```
t.schedule(new TimerTask() {
    @Override
    public void run() {
        //task to perform
    }
}, 2000); 
```

这是您如何在计时器线程上安排**重复**任务，延迟 1 秒后，并以 1.5 秒的间隔重复任务：

```
t.scheduleAtFixedRate(new TimerTask() {
    @Override
    public void run() {
        //task to perform every 1.5 seconds
    }
}, 1000, 1500); 
```

现在您可以选择将两个任务（checkMail、sendMail）安排到同一个 Timer（同一个线程）或给它们各自的 Timer（单独的线程）。

有关详细信息，请参阅 java 文档 (http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)

希望这可以帮助。

# asp.net - Application_AcquireRequestState 中的 Context.Session 对象为空

> ID：10195791
> 
> 赞同：4
> 
> 时间：2012-04-17T17:11:07.307
> 
> 标签：asp.net, iis-7, iis-6

我将我的网站从 .NET 1.1 升级到了 .NET 4.0。在我的`Global.asax.vb`文件中，我试图访问该方法`Context.Session`中的对象，`Application_AcquireRequestState` 当我第一次尝试访问该网站时，我得到了一个空引用异常。

我使用 IIS 7.5 在另一台测试服务器上安装了网站的 .NET 4.0 版本，一切似乎都正常。但是，当我在使用 IIS 6 的原始服务器上安装网站的 .NET 4.0 版本时，我遇到了异常。

知道为什么我会收到此异常吗？不同版本的 IIS 是否以不同方式处理 HTTP 管道事件？或者我使用的两个 .NET 版本之间的 Session 对象可用时有区别吗？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:57:38.717

你应该使用`Application_PreRequestHandlerExecute`而不是`Application_AcquireRequestState`

我刚刚解决了同样的问题，但是对于 c#，翻译代码它必须是这样的：

```
Private Sub Application_PreRequestHandlerExecute(sender As Object, e As EventArgs)
If TypeOf Context.Handler Is IRequiresSessionState OrElse TypeOf Context.Handler Is IReadOnlySessionState Then
    ' HttpContext.Current.Session should be available
End If
End Sub 
```

# php - 在mysql表中添加链接

> ID：10195793
> 
> 赞同：-2
> 
> 时间：2012-04-17T17:11:12.880
> 
> 标签：php, mysql

我正在用 php 和 mysql 设计一个网站。我有一个用 mysql 创建的表，它有一个产品名称、一个数字和一个描述，我想知道是否可以在表中添加一个可以作为不同网站链接的列。例如，显示“从亚马逊购买”的列，该链接转到包含该产品的 amazon.com 页面。我知道我可以用一个 php 表来做到这一点，但我宁愿有一个 mysql 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:13:37.777

只需添加一个值为 varchar 或 text 的列。你不应该有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:20:37.383

首先，您需要修改数据库表架构以包含一个用于保存商品 ASIN（亚马逊产品编号）的新列。然后，在您的显示代码中，您循环遍历表格，并且对于每个项目，您将输出一个格式正确的链接，该链接链接到亚马逊产品页面。

如果您是初学者，则需要学习几件事：

1.  如何修改 MySQL 表模式。至少三个选项——使用 PHP 代码、使用 mysql 命令行、使用 phpmyadmin

2.  如何修改当前显示数据表的 PHP 代码以考虑新列

3.  亚马逊产品 URL 的结构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T13:26:43.567

我也实现了类似的概念。

首先，我在我的表中添加了 2 列，`link`它们`link_name`的`varchar()`大小都合适。`link`存储`href`地址或实际地址，同时`link_name`存储要为链接显示的文本。

我`XMLHttpRequest()`从我的`.js`文件中做了一个，它返回了一个`json`解析的数据。

然后我在我的`.js`文件中添加了以下内容

```
for ( var k in jsonData )
{
 var my_row = '<td><a href="' + "http://" + jsonData[k].link + '"' + ">" + jsonData[k].link_name + "</a></td>";
// other code
} 
```

它对我有用！

# javascript - CSS/javascript 类和图像颜色高亮

> ID：10195795
> 
> 赞同：1
> 
> 时间：2012-04-17T17:11:18.197
> 
> 标签：javascript, css, hover, onmouseover, html-table

我正在尝试在课程中突出显示图像。我有一个 td 框，其中为 CSS 分配了一个类，其中包含三个图像，我想要实现的是让图像对鼠标悬停事件做出反应。当没有鼠标悬停事件时，我希望所有图像都褪色并变灰。然后当 td 框悬停时，灰色被删除，因此图像是彩色但褪色。然后，当图像悬停时，颜色会恢复。

我已经设法使用简单的悬停设置单独使用 CSS 完成每个操作，但无法让两者一起工作。我认为这可能需要javascript。

欢迎任何反馈。谢谢你。

到目前为止，我所拥有的只是：

```
.buttons .action img{
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50);
    -moz-opacity: 0.5;
    opacity: 0.5;
}

.buttons .action:hover img{
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=100);
    -moz-opacity: 1;
    opacity: 1;
 }

.buttons .action:hover{
    background-color: #f0f0f0;
}

<table class="buttons">
    <tr>
        <td class="action"><img src="/layout/icons/icon-40x40.jpg" /><img src="/layout/icons/icon2-40x40.jpg" /><img src="/layout/icons/icon3-40x40.jpg" /></td>
    </tr>
</table> 
```

虽然这会改变 td 的背景颜色并且不会使图像变灰，但我认为 javascript 将不得不出现在这里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:12:00.563

使用 css3 -webkit-filter: grayscale(100%); 为灰度图像创建一个名为“grayed”的 css 类 和一个名为'faded'的类，用于不透明度：0.5；在 html 中，将这 2 个新的 css 类添加到每个图像中

```
<img class="faded grayed" src="/layout/icons/icon-40x40.jpg" />
//add these 2 classes for the rest of the img tags as well 
```

然后确保你在你的 head 元素中拉动 jQuery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

然后，在 document.ready 中传递 js 以添加所需的操作

```
$(document).ready(function(){
    //mouse over td to remove gray scale of inner images
    $("td.action").mouseover(function(){
        $(this).find("img").each(function(){
            $(this).removeClass("grayed");
        });
    });

    $("td.action").mouseout(function(){
        $(this).find("img").each(function(){
            $(this).addClass("grayed");
            $(this).addClass("faded");
        });
    });

    //js to remove grayscale from images on mouseover
    $("td.action>img").mouseover(function(){
        $(this).removeClass("faded");
    });
    $("td.action>img").mouseout(function(){
        $(this).addClass("faded");
    });

}); 
```

这也可以使用 jquery .hover() 函数来完成。为了清楚起见，我将其分为鼠标悬停和鼠标悬停。

# java - Java - 为什么使用 i,j

> ID：10195797
> 
> 赞同：4
> 
> 时间：2012-04-17T17:11:22.520
> 
> 标签：java, for-loop

> **可能重复：**
> [为什么我们在循环中使用 i 作为计数器？](https://stackoverflow.com/questions/454303/why-are-we-using-i-as-a-counter-in-loops)
> [为什么变量“i”和“j”用于计数器？](https://stackoverflow.com/questions/4137785/why-are-variables-i-and-j-used-for-counters)

这可能看起来很愚蠢，但是为什么每个人都在 for 循环检查中使用 i（如果 i 已经在使用，那么 j）？

方法：

```
for(int i = 1;i <= 5;i++){
 for(int j = 1;j <= i;j++){
 System.out.print(i);
} 
```

为什么 i 和 j ？我们也可以使用第一个和第二个？[检查一下，所有（10 个中有 9 个）都使用 i、j。](http://www.google.it/#hl=it&output=search&sclient=psy-ab&q=java+for+loop+example&oq=java+for+loop+example&aq=f&aqi=g-L2g-mL1g-vL1&aql=&gs_l=hp.3..0i19l2j0i5i19j0i15i19.7297l7297l0l7760l1l1l0l0l0l0l116l116l0j1l1l0.&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=1f7024af05027f02&biw=1366&bih=643)为什么 ？有什么理由还是只是因为每个人都这样做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T17:12:11.537

这种编程约定已经存在了很长时间，并且可能一直追溯到 Fortran。在 Fortran 77 中，以字母 I、J、K、L、M 或 N 开头的变量被视为类型`INTEGER`（除非另有明确声明）。这使得它们非常适合作为循环变量。

当然`i`，`j`等在数学中用于表示矩阵/向量/求和索引的时间比计算机存在的时间要长得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:22:51.860

i 代表**索引** j 出现在 i.. 之后

所以它很容易记住和处理

这就是为什么我们按顺序使用**i,j,k,l .....**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T17:12:52.877

易于阅读的简单变量名称。它也可以追溯到 K+R 的 C 天

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-17T17:12:59.943

我认为这是一种习惯，它发现它的简单起源是and`i`的第一个字母。`integer``index`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-17T17:15:43.240

`i`并且`j`在进行矩阵乘法和求和时通常用于线性代数。`i`方便地缩写为`index`. 并且`j`在字典上与`i`.

既然已经这么成立了，我不会再用别的了，免得编程大神给你们带来痛苦。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-17T17:16:55.373

i 和 j 也用于数学和物理。i 通常是笛卡尔 x 轴基单位向量的表示法，而 j 用于笛卡尔 y 轴基单位向量。

# java - 试图在 actionPerformed 上获取 textField 数据

> ID：10195800
> 
> 赞同：0
> 
> 时间：2012-04-17T17:11:40.163
> 
> 标签：java, swing, jdialog, joptionpane

```
JOptionPane.showConfirmDialog(null, instructorEditorPanel,
              "Edit Player JOptionPane", JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE); 
```

coachEditorPanel 是一个具有 3 个文本字段的 Jpanel。我正在尝试获取 textFields 中的数据并将它们分配给父类中的实例变量。我知道如何使用 getText() 方法获取数据。我的问题是操纵处理程序以在选择“确定”按钮时执行操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:20:48.463

在这种情况下，当单击 OK 按钮时，showConfirmDialog() 将返回 0。你可以这样做：

```
if(JOptionPane.showConfirmDialog(null, instructorEditorPanel, "Edit Player JOptionPane", OptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE) == JOptionPane.OK_OPTION){
    //do something with value
    fieldOnPanel.getText();
} 
```

显然，您需要能够访问 JPanel 或 JTextField 实例。

# .net - .NET 创建损坏的文件

> ID：10195801
> 
> 赞同：0
> 
> 时间：2012-04-17T17:11:41.567
> 
> 标签：.net, file, stream

我正在尝试使用 .NET 创建图像。下面是我正在使用的代码。这在大多数情况下都可以正常工作，但有时我猜想流被切断并且我有一个损坏的文件。我通过它的 URL 获取图像。

我真的在找人来纠正我的代码或让我了解我还能做什么。

谢谢

```
// Function will return the number of bytes processed
        // to the caller. Initialize to 0 here.
        int bytesProcessed = 0;

        // Assign values to these objects here so that they can
        // be referenced in the finally block
        Stream remoteStream = null;
        Stream localStream = null;
        WebResponse response = null;

        // Use a try/catch/finally block as both the WebRequest and Stream
        // classes throw exceptions upon error
        try
        {
            // Create a request for the specified remote file name
            WebRequest request = WebRequest.Create(remoteFilename);
            if (request != null)
            {
                // Send the request to the server and retrieve the
                // WebResponse object 
                response = request.GetResponse();
                if (response != null)
                {
                    // Once the WebResponse object has been retrieved,
                    // get the stream object associated with the response's data
                    remoteStream = response.GetResponseStream();

                    // Create the local file
                    localStream = File.Create(localFilename);

                    // Allocate a 1k buffer
                    byte[] buffer = new byte[1024];
                    int bytesRead;

                    // Simple do/while loop to read from stream until
                    // no bytes are returned
                    do
                    {
                        // Read data (up to 1k) from the stream
                        bytesRead = remoteStream.Read(buffer, 0, buffer.Length);

                        // Write the data to the local file
                        localStream.Write(buffer, 0, bytesRead);

                        // Increment total bytes processed
                        bytesProcessed += bytesRead;
                    } while (bytesRead > 0);
                }
            }
        }
        catch (Exception e)
        {
            throw e;
        }
        finally
        {
            // Close the response and streams objects here 
            // to make sure they're closed even if an exception
            // is thrown at some point
            if (response != null) response.Close();
            if (remoteStream != null) remoteStream.Close();
            if (localStream != null) localStream.Close();
        } 
```

我收到以下错误：

```
Main Exception
MESSAGE: Parameter is not valid.
SOURCE: System.Drawing
TARGETSITE: System.Drawing.Image FromStream(System.IO.Stream, Boolean, Boolean)
STACKTRACE: at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData)
            at Sitecore.Resources.Media.ImageMedia.GetImage() at Sitecore.Resources.Media.ImageMedia.UpdateMetaData(MediaStream mediaStream)
            at Sitecore.Resources.Media.JpegMedia.UpdateMetaData(MediaStream mediaStream) at Sitecore.Resources.Media.MediaCreator.AttachStreamToMediaItem(Stream stream, String itemPath, String fileName, MediaCreatorOptions options)
            at Sitecore.Resources.Media.MediaCreator.CreateFromStream(Stream stream, String filePath, MediaCreatorOptions options)
            at Sitecore.Resources.Media.MediaCreator.CreateFromFile(String filePath, MediaCreatorOptions options) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T19:37:02.213

问题在于文件被 Windows 锁定。基本上，有两台服务器。将文件保存在另一台服务器上它应该在的位置，并且一切正常。

# c# - 如何将已解析的实例从控制反转传递到应用程序中的类？

> ID：10195802
> 
> 赞同：5
> 
> 时间：2012-04-17T17:11:44.600
> 
> 标签：c#, c#-4.0, inversion-of-control, castle-windsor

我在我的应用程序中使用 Castle Windsor 的控制反转。当应用程序首次加载时，`IWindsorContainer.Resolve`将组件（特别是工厂）解析为实例。

例如，`ILoggerFactory`被解析为`MyCustomLoggerFactory`（或任何实现`ILoggerFactory`），其方法`CreateLogger()`创建一个记录器。我想让每个班级都打电话`ILoggerFactory.CreateLogger()`。但是，我不想将 an 传递给`ILoggerFactory`每个类的构造函数。

每个类如何访问特定的`ILoggerFactory`工厂来使用而不必`IWindsorContainer.Resolve`每次都调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:58:14.227

据我所知，有三种方法可以从 windsor 容器中获取依赖项（顺便说一下，除了可能是一些底层类之外，您不需要显式解析任何内容，只需确保它都已在容器中注册并且为您连接了依赖项）：

1.  添加构造函数参数（这被认为是必需的依赖项）
2.  向类添加属性（这被认为是可选依赖项）
3.  获取 IWindsorContainer 实例并调用 Resolve（这通常是个坏主意）

通常，对于专门进行日志记录，您会将其设为可选依赖项，因此请选择选项 2 并执行类似操作（我使用了您的 ILoggerFactory 想法，实际上我不会为此定义自己的工厂 - 见下文）：

```
private ILoggerFactory _loggerFactory = LoggerFactory.NullLoggerFactory;

public ILoggerFactory LoggerFactory
{
    get { return _loggerFactory; }
    set { _loggerFactory = value; }
} 
```

这样，在您的代码中，您可以使用 LoggerFactory 属性，如果尚未将一个属性添加到容器中，您将获得“null”版本（这只是 ILoggerFactory 的一个实例，它创建一个什么都不做的记录器），如果它有你得到了真正的版本（你可以在使用它时检查null，或者如果你知道会有一个就使用它）。您在需要记录器的类上定义此属性，然后就完成了。

**旁白**

顺便说一句，您可以使用 Windsor 中的[日志记录工具](http://www.castleproject.org/container/facilities/trunk/logging/index.html)之类的东西- 我对此有一个小问题，因为我真的不希望在我的代码库中使用 Windsor 接口，所以我过去所做的事情已经定义我自己的 ILogger 接口（以及它的空实现），然后创建了一个“城堡记录器代理”，它实现了我的 ILogger 接口，但依赖于城堡 ILogger，这是它调用来执行实际日志记录的方法。这样，我可以将其分离到它自己的程序集中，并且我的应用程序不知道 Windsor 正在注入依赖项。

也许你不在乎，只是想我会提到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:11:11.257

如果您不想污染您的 API，可以在此处使用[环境上下文](http://blogs.msdn.com/b/ploeh/archive/2007/07/23/ambientcontext.aspx)模式，如下所示：

```
public abstract class Logger
{
    static Logger()
    {
        Current = new DefaultLogger();
    }

    public static Logger Current { get; set; }

    // your Logger members
    public abstract void Log();
}

public class DefaultLogger : Logger
{
    public override void Log()
    {
        //do something
    }
} 
```

# android - ORMlite 创建多个表 ANDROID

> ID：10195805
> 
> 赞同：2
> 
> 时间：2012-04-17T17:11:54.953
> 
> 标签：android, ormlite

我了解[ORMLite Android 示例](http://ormlite.com/android/examples/)。但是，我想用 ORMlite 映射不止一个类。

在创建与“SimpleData”类匹配的表的示例中，我们使用了这个：

```
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) {
    try {
        Log.i(DatabaseHelper.class.getName(), "onCreate");
        TableUtils.createTable(connectionSource, SimpleData.class);
    } 

    catch (SQLException e) {
        Log.e(DatabaseHelper.class.getName(), "Can't create database", e);
        throw new RuntimeException(e);
    } 
```

如何创建所有表（与我的类匹配）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:25:01.973

所以也许我不明白你在做什么。在上面的`SimpleData`示例中，您引用了`DatabaseHelper`. 在该`onCreate`方法中，您可以创建任意数量的类：

```
public void onCreate(SQLiteDatabase db, ConnectionSource connectionSource) {
    try {
        Log.i(DatabaseHelper.class.getName(), "onCreate");
        TableUtils.createTable(connectionSource, SimpleData.class);
        TableUtils.createTable(connectionSource, AnotherData.class);
        TableUtils.createTable(connectionSource, AndAnotherData.class);
        ...
    } catch (SQLException e) {
        ... 
```

对于一个工作程序。如果您看一下[ClickCounter 示例](http://ormlite.com/docs/android-examples)，它会在其`onCreate`方法中创建两个实体：

```
public void onCreate(SQLiteDatabase sqliteDatabase, ConnectionSource connectionSource) {
    try {
        TableUtils.createTable(connectionSource, ClickGroup.class);
        TableUtils.createTable(connectionSource, ClickCount.class);
    } catch (SQLException e) {
        Log.e(DatabaseHelper.class.getName(), "Unable to create datbases", e);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:21:46.583

与创建第一个方法相同：多次调用 TableUtils.createTable 方法，您将向其传递表示数据库中表的类

# jquery - 带有分页的 Jquery 图像滑块

> ID：10195806
> 
> 赞同：1
> 
> 时间：2012-04-17T17:11:57.833
> 
> 标签：jquery, css

我是 jquery 的新手。我必须像[ebay一样制作幻灯片](http://www.ebay.com/)

但我做了类似[这里的东西](http://kaidul.web44.net/slider/)

代码在[这里](http://www.kaidul.web44.net/slider/code.php)

请帮我做一个像 ebay.com 这样的分页

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:23:03.080

有很多 jquree 滑块，您可以通过一些搜索轻松找到分页示例。这里有一些免费的容易 silders .. [http://www.noupe.com/jquery/cool-and-useful-jquery-image-and-content-sliders-and-slideshows.html](http://www.noupe.com/jquery/cool-and-useful-jquery-image-and-content-sliders-and-slideshows.html)或者这里也有一些分页[http： //www.jquery4u.com/plugins/10-jquery-pagination-plugins/](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/)祝你好运......！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:15:21.050

你不是第一个做幻灯片的人。
我建议您使用[Nivo ，而不是重新发明轮子](http://nivo.dev7studios.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:14:23.767

[您可以使用像http://nivo.dev7studios.com/](http://nivo.dev7studios.com/)这样的预制 jQuery 插件，它们可以做到这一点，甚至更多。

# ios - 如何计算标签的大小而不将其添加到视图中？

> ID：10195807
> 
> 赞同：1
> 
> 时间：2012-04-17T17:11:58.910
> 
> 标签：ios, label, titanium, uilabel, appcelerator

在 2.0 之前的 Titanium SDK 中，下面的代码片段在 iOS 应用程序上就像一个魅力：

```
var label = Titanium.UI.createLabel({
    text: 'Sample Text',
    width: 'auto'
});
alert(label.width); // shows the pixel width of the label 
```

随着 2.0+ SDK 的新版本，这似乎不再受支持。

是否有不涉及后期布局等事件的不同方法？事件将需要异步。处理这给视图的创建增加了太多的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:01:49.923

该解决方案很脏，或多或少是一种解决方法：

```
label.toImage().width 
```

...通过首先创建标签的图像来表示宽度。

# google-app-engine - Google App Engine：本地测试一个简单的 hello world

> ID：10195808
> 
> 赞同：5
> 
> 时间：2012-04-17T17:12:03.970
> 
> 标签：google-app-engine

我正在尝试通过 Eclipse Helios 的 Google App Engine 插件在本地创建一个简单的 Hello World。当想要使用 eclipse 工具启动服务器时出现问题（在我的项目上右键单击 -> 运行方式 -> Web 应用程序），控制台总是显示这些日志：

```
2012-04-17 19:01:09.126 java[4019:407] [Java CocoaComponent compatibility mode]: Enabled
2012-04-17 19:01:09.127 java[4019:407] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000
Usage: <dev-appserver> [options] <war directory>

Options:
 --help, -h                 Show this help message and exit.
 --server=SERVER            The server to use to determine the latest
  -s SERVER                   SDK version.
 --address=ADDRESS          The address of the interface on the local machine
  -a ADDRESS                  to bind to (or 0.0.0.0 for all interfaces).
 --port=PORT                The port number to bind to on the local machine.
  -p PORT
 --sdk_root=root            Overrides where the SDK is located.
 --disable_update_check     Disable the check for newer SDK versions.
 --generated_dir=dir        Set the directory where generated files are created. 
```

当我使用下面的命令时，本地服务器工作：

```
./appengine-java-sdk/bin/dev_appserver.sh appengine-java-sdk/demos/guestbook/war 
```

有没有人有一些让它工作的想法？

谢谢你的建议，对不起我的英语不好......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T11:11:22.753

我也遇到了同样的问题。但我的解决方案是删除现有的启动配置（在运行 > 运行配置中），关闭对话框，然后尝试右键单击您的项目 > 运行方式 > Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T12:47:05.640

对我来说，它是项目名称中的空格，它与工作区中的文件夹名称一致。调用开发服务器启动器的人没有在战争目录周围使用引号。

# c# - 在特定表中添加新行时刷新客户端浏览器

> ID：10195810
> 
> 赞同：3
> 
> 时间：2012-04-17T17:12:06.770
> 
> 标签：c#, asp.net, browser

我的场景：

客户端登录后，我的用户将被重定向到 index.aspx 页面。在此页面中，我将在其中放置一个带有 gridview 的 div。此网格视图将显示一个表中的数据。

> 我的问题是：如何始终刷新此网格视图，以便在此表上保存一条记录？

Ps.：我见过很多使用“服务器推送”技术、comet、ajax 等的例子。不知道最好的方法，也找不到一个真正简单的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:29:07.560

当向表中添加新记录时，真正的挑战是将这些更改实时传达给客户端，而不需要间隔轮询或需要某种用户交互。

你有几个选择：

1.  最好的办法是使用[WebSocket](http://en.wikipedia.org/wiki/WebSocket)，它可以实现客户端和服务器之间的双向通信。这是我会选择的解决方案。

    以下是一些使用示例`WebSockets`：

    *   [使用 IIS、ASP.NET 和 WCF 使用 WebSocket 构建实时 Web 应用程序](http://channel9.msdn.com/Events/BUILD/BUILD2011/SAC-807T)
    *   [HTML5 C# WebSockets 服务器和 ASP.NET 客户端实现](http://www.undisciplinedbytes.com/2010/06/html-5-c-web-sockets-server-and-asp-net-client-implementation/)
    *   [C# WebSocket 服务器](https://stackoverflow.com/questions/2211898/c-sharp-web-socket-server)
    *   [ASP.NET 4.5 中的 WebSocket](http://www.techbubbles.com/aspnet/websockets-in-asp-net-4-5/)
    *   [ASP.NET 中的 WebHooks 和 WebSockets](http://www.entechsolutions.com/hooks-and-sockets-for-web-apps)

    周围也有一些很好的库可以处理大部分的腿部工作。要检查的一对是[WebSync](http://www.frozenmountain.com/websync/downloads#server)和[PokeIn](http://www.pokein.com/Products/Downloads.aspx)。这两种产品都提供了不错的文档和社区版本，您可以免费下载。

    以下是一些要检查的教程：

    *   [WebSync 教程](http://www.frozenmountain.com/websync/support/tutorials/v3)
    *   [PokeIn 基础教程](http://www.pokein.com/Help/BasicTutorial.aspx)/ [PokeIn 高级教程](http://www.pokein.com/Help/AdvancedTutorial.aspx)

2.  `X`使用 AJAX 每隔几秒轮询一次更改。如果检测到更改重新加载页面，否则什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:25:35.150

您可以使用 setinterval javascript 方法。我充当计时器并使用提交表单来刷新页面。其他方法可能是 asp.net ajax toolkit timer control [here](http://www.asp.net/AJAX/Documentation/Live/tutorials/IntroToTimerControl.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:30:06.957

您也可以使用普通的旧 html

```
<META HTTP-EQUIV="REFRESH"
CONTENT="15;URL=http://www.I18nGuy.com/index.html"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:15:03.853

将您的网格放在更新面板中并将“更新模式”设置为始终

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T17:21:00.923

您可以使用在底层使用 AJAX 的更新面板。请参阅此[链接](http://msdn.microsoft.com/en-us/library/bb399001.aspx)以获取简短的演示。

# c - MPI_Finalize() 没有完成

> ID：10195812
> 
> 赞同：4
> 
> 时间：2012-04-17T17:12:10.897
> 
> 标签：c, linux, mpi

```
#include <stdio.h>
#include <math.h>
#include <mpi.h>

int main(int argc, char *argv[])
{
    int i, done = 0, n;
    double PI25DT = 3.141592653589793238462643;
    double pi, tmp, h, sum, x;

    int numprocs, rank;
    MPI_Status status;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &numprocs);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (numprocs < 1)
         printf("numprocs = %d, should be run with numprocs > 1\n", numprocs);
    else {
        while (!done)
        {
            if (rank == 0) {
                printf("Enter the number of intervals: (0 quits) \n");
                scanf("%d",&n);
            }
            if (n == 0) break;

            MPI_Bcast(&n, 1, MPI_INT, 0, MPI_COMM_WORLD);

            h   = 1.0 / (double) n;
            sum = 0.0;
            for (i = 1 + rank; i <= n; i+=numprocs) {
                x = h * ((double)i - 0.5);
                sum += 4.0 / (1.0 + x*x);
            }

            MPI_Reduce(&sum, &tmp, 1, MPI_DOUBLE, MPI_SUM, 0, MPI_COMM_WORLD);
            if (rank == 0) {
                pi = h * tmp;
                printf("pi is approximately %.16f, Error is %.16f\n", pi, fabs(pi - PI25DT));
            }
        }
    }
    MPI_Finalize();
} 
```

我以进程数 = 10 并在 scanf("%d", &n); 中键入 0 后运行该程序 该程序似乎没有完成，我必须用 Ctrl+C 关闭它。

> 总共有 10 个进程被杀死（有些可能是在清理过程中被 mpirun 杀死的） mpirun：完成了干净的终止

杀死进程后出现在控制台中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T17:23:15.353

嗯，当然。看看这里发生了什么：

```
 if (rank == 0) {
            printf("Enter the number of intervals: (0 quits) \n");
            scanf("%d",&n);
        }
        if (n == 0) break;

        MPI_Bcast(&n, 1, MPI_INT, 0, MPI_COMM_WORLD); 
```

如果您在等级 0 上输入“0”，则等级 0 会中断，但所有其他等级都具有上次在 n 中的任何内容（或者，在第一次迭代的情况下，该内存位置中的任何随机内容）。所以排名 1-(N-1) 进入`MPI_Bcast`，耐心地等待参与广播以找出是什么`n`，同时排名 0 已经退出循环并正坐在`MPI_Finalize`想知道其他人在哪里。

你只需要翻转这些行：

```
 MPI_Bcast(&n, 1, MPI_INT, 0, MPI_COMM_WORLD);
        if (n == 0) break; 
```

现在每个人都在同时决定是否跳出循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:35:27.250

你有一个无限循环，所以 MPI_Finalize() 不能执行。

# c++ - deque.resize() 从 *front*?

> ID：10195815
> 
> 赞同：4
> 
> 时间：2012-04-17T17:12:13.943
> 
> 标签：c++, deque

你怎么`resize`从`std::deque`前面而不是*后面*？

（是的，当然我可以`push_front`使用数千次虚拟值，但是有没有更好/更有效的方法？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T17:14:32.913

插入 N 个元素的重载`insert`：

```
std::deque<int> c;

std::size_t new_size = get_new_desired_size();

c.insert(c.begin(), new_size - c.size(), int()); 
```

（此示例要求`new_size >= c.size()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:52:27.810

更完整的解决方案：

```
std::deque<T> deque;
std::size_t new_size = /* ... */;
if (new_size >= deque.size())
    deque.insert(deque.begin(), new_size - deque.size(), T());
else
    deque.erase(deque.begin(), deque.begin() + deque.size() - new_size); 
```

由于 的性质`std::deque`，所有*剩余的*迭代器在任何一种情况下都应该保持有效。

# php - PHP 关联数组 - 替换 --> 为 "as"

> ID：10195821
> 
> 赞同：0
> 
> 时间：2012-04-17T17:12:23.213
> 
> 标签：php, sql, arrays, key, associative

我知道必须有一种简单有效的方法来做到这一点。

我有一个这样的数组：

```
 $fields = array( "EVENT_ID" => "Event Id" ,
            "EVENT_NAME"           => "Name",
            "EVENT_CLASSIFICATION" => "Classification",
            "DESCRIPTION"          => "Description",
            "START_TIME"           => "Start Time",
            "END_TIME"             => "End Time"
           ); 
```

我想将其转换为以下查询：

```
 Select 
                   "EVENT_ID" as "Event ID",
                   "EVENT_NAME" as "Name", 
                   ...
              from
                   ... 
```

不想把它放在循环中。PHP 有很多数组处理函数，这一定很容易。我是 php 新手。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:14:36.637

我强烈建议循环！

```
$sel = array();
foreach($fields as $key => $val) {
  $sel[] = '`'.$key.'` AS `'.$val.'`';
}
$sel = implode(',', $sel); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T17:20:40.070

循环是（可能）到这里的方式，但没有循环也可以做到。使用[`array_map`](http://php.net/array_map).

```
$sql = implode(',', array_map(function($v, $k){
    return "`$k` AS `$v`";
}, $fields, array_keys($fields))); 
```

注意你只能在 PHP 5.3+ 中传递这样的函数。如果您使用的是 5.2，则可以使用[`create_function`](http://php.net/create_function).

```
$sql = implode(',', array_map(create_function('$v, $k', 'return "`$k` AS `$v`";'), $fields, array_keys($fields))); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T17:29:13.790

如果您使用的是 5.3，则可以使用[`array_reduce`](http://php.net/array_reduce)闭包（普通的旧函数也可以使用，但`foreach`会更短）：

```
$sql = array_reduce(array_keys($fields), function(&$result, $key) use ($fields) {
  if (!is_null($result)) $result .= ",\n";
  return "{$result}'{$key}' AS '{$fields[$key]}'";
}); 
```

[在线尝试](http://codepad.viper-7.com/OMA1Wq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:21:38.460

您可以通过遍历您的值来简单地构建您的查询字符串。

```
$query = '';
foreach($fields as $k => $v)
    $query .= '"' . $k . '" as "' . $v . '",';
echo $query; 
```

请注意，这将留下一个尾随逗号。如果要删除它，可以使用

```
$query = rtrim($query, ','); 
```

[**活生生的例子**](http://codepad.viper-7.com/IVzn3L)

# android - Android AsyncLoader：在fragmentactivity/fragment之间共享对象

> ID：10195822
> 
> 赞同：1
> 
> 时间：2012-04-17T17:12:23.807
> 
> 标签：android, android-asynctask, android-viewpager

我对 ViewPager 中的 FragmentActivity 和多个 Fragments 有疑问。

在 FragmentActivity 中加载了一个对象，其中一个 AsyncTask 用于所有其他片段。我使用了 android:configChanges="orientation|keyboardHidden|keyboard" "hack" 来确保对象只加载一次，即使在屏幕旋转期间也是如此。

但是，现在我想在其中一个片段中以横向方式显示更多信息，因此现在该 hack 不起作用。

我尝试从 Android 示例中实现 AsyncLoader 和[FragmentRetainInstanceSupport 。](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentRetainInstanceSupport.html)但这些都不起作用：

1 - 我无法让 FragmentRetainInstanceSupport 在 ViewPager 中工作，当我按照示例代码操作时，工作片段中未调用 onCreate() 方法 2 - AsyncLoader 在屏幕旋转期间崩溃...

这是我（试图）实现 AsyncLoader 的代码：

```
public class TeamActivity extends SherlockFragmentActivity implements LoaderManager.LoaderCallbacks<Response<Team>> {
    ViewPager mPager;
    PageIndicator mIndicator;
    FragmentPagerAdapter mAdapter;
    private final int MENU_FOLLOW = Menu.FIRST;
    private final int MENU_UNFOLLOW = Menu.FIRST + 1;
    Team team = null;
    static int team_id;

    public Team getTeam(){
            return team;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
            team_id = this.getIntent().getIntExtra("index", 0);
            Log.d("Teamid",""+team_id);
            getSupportLoaderManager().initLoader(0, null, this);//.forceLoad();

            //getSupportLoaderManager().getLoader(0).startLoading();
            //new getTeam().execute();
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
            if(team != null) {
                    team.getNaam();
                    SharedPreferences keyValues = this.getSharedPreferences("teams_follow", Context.MODE_PRIVATE);
                    MenuItem menuItem_volg = menu.findItem(MENU_FOLLOW);
                    MenuItem menuItem_delete = menu.findItem(MENU_UNFOLLOW);
                    if(keyValues.contains(String.valueOf(team.getStartnummer()))) {
                            menuItem_volg.setVisible(false);
                            menuItem_delete.setVisible(true);
                    } else {
                            menuItem_volg.setVisible(true);
                            menuItem_delete.setVisible(false);
                    }
            }
            return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
            menu.add(0,MENU_UNFOLLOW,Menu.NONE, R.string.ab_verwijderen)
            .setIcon(R.drawable.ic_action_delete)
            .setVisible(false)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

            menu.add(0,MENU_FOLLOW,Menu.NONE, R.string.ab_volgen)
            .setIcon(R.drawable.ic_action_star)
            .setVisible(false)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

            return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case android.R.id.home:
                    Utils.goHome(getApplicationContext());
                    break;
            case MENU_FOLLOW:
                    Utils.addFavoTeam(getApplicationContext(), team);
                    invalidateOptionsMenu();

                    break;
            case MENU_UNFOLLOW:
                    Utils.removeFavoteam(getApplicationContext(), team.getID());
                    invalidateOptionsMenu();
                    break;
            }

            return super.onOptionsItemSelected(item);
    }

    class TeamFragmentAdapter extends FragmentPagerAdapter implements TitleProvider {

            ArrayList<Fragment> fragments = new ArrayList<Fragment>();
            ArrayList<String> titels = new ArrayList<String>();

            public TeamFragmentAdapter(FragmentManager fm) {
                    super(fm);
                    fragments.add(new TeamInformatieFragment());
                    titels.add("Informatie");
                    fragments.add(new TeamLooptijdenFragment());
                    titels.add("Routetijden");
            }

            @Override
            public Fragment getItem(int position) {
                    return fragments.get(position);
            }

            @Override
            public int getCount() {
                    return fragments.size();
            }

            @Override
            public String getTitle(int position) {
                    return titels.get(position);
            }
    }

    private class getTeam extends AsyncTask<Void, Void, Void> {  

            private ProgressDialog progressDialog;
            Response<Team> response;

            protected void onPreExecute() {  
                    progressDialog = ProgressDialog.show(TeamActivity.this,  
                                    "Bezig met laden", "Team wordt opgehaald...", true);
                    progressDialog.setCancelable(true);
                    progressDialog.setOnCancelListener(new OnCancelListener() {
                            public void onCancel(DialogInterface dialog) {
                                    cancel(true);
                                    Utils.goHome(TeamActivity.this);
                            }
                    });
            }

            @Override
            protected Void doInBackground(Void... arg0) {
                    if(!isCancelled())
                            response = api.getTeamByID(team_id);
                    return null;
            }

            @Override  
            protected void onPostExecute(Void result) {
                    if(Utils.checkResponse(TeamActivity.this, response)) {
                            setContentView(R.layout.simple_tabs);
                            team = response.getResponse();
                            mAdapter = new TeamFragmentAdapter(getSupportFragmentManager());

                            mPager = (ViewPager)findViewById(R.id.pager);
                            mPager.setAdapter(mAdapter);

                            mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
                            mIndicator.setViewPager(mPager);
                            invalidateOptionsMenu();
                            progressDialog.dismiss();
                    }

            }
    }

    public static class AppListLoader extends AsyncTaskLoader<Response<Team>> {
            Response<Team> response;
            public AppListLoader(Context context) {
                    super(context);
            }

            @Override public Response<Team> loadInBackground() {
                    response = api.getTeamByID(team_id);
                    return response;
            }

            @Override public void deliverResult(Response<Team> response) {
                    if (isReset()) {
                            return;
                    }

                    this.response = response;
                    super.deliverResult(response);
            }

            @Override protected void onStartLoading() {
                    if (response != null) {
                            deliverResult(response);
                    }
                    if (takeContentChanged() || response == null) {
                            forceLoad();
                    }
            }

            @Override
            protected void onStopLoading() {
                    // Attempt to cancel the current load task if possible.
                    cancelLoad();
            }

            @Override
            protected void onReset() {
                    super.onReset();
                    // Ensure the loader is stopped
                    onStopLoading();
                    response = null;
            }
    }

    private ProgressDialog progressDialog;

    @Override
    public Loader<Response<Team>> onCreateLoader(int arg0, Bundle arg1) {
            progressDialog = ProgressDialog.show(TeamActivity.this,  
                            "Bezig met laden", "Team wordt opgehaald...", true);
            progressDialog.setCancelable(true);
            progressDialog.setOnCancelListener(new OnCancelListener() {
                    public void onCancel(DialogInterface dialog) {
                            finish();
                    }
            });
            return new AppListLoader(this);
    }

    @Override
    public void onLoadFinished(Loader<Response<Team>> loader, Response<Team> response) {
            //Log.d("Loader", "Klaar");
            if(Utils.checkResponse(TeamActivity.this, response)) {
                    team = response.getResponse();
                    setContentView(R.layout.simple_tabs);
                    mAdapter = new TeamFragmentAdapter(getSupportFragmentManager());

                    mPager = (ViewPager)findViewById(R.id.pager);
                    mPager.setAdapter(mAdapter);

                    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
                    mIndicator.setViewPager(mPager);
                    invalidateOptionsMenu();
                    progressDialog.dismiss();
            }
    }

    @Override
    public void onLoaderReset(Loader<Response<Team>> arg0) {                
            //Utils.goHome(this);
    }

} 
```

片段（示例）：

```
public class TeamInformatieFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Team team = ((TeamActivity)this.getActivity()).getTeam();
//ERROR ON NEXT LINE AFTER SCREEN ROTATION:
getSherlockActivity().getSupportActionBar().setTitle(team.getNaam());     
            View view = inflater.inflate(R.layout.team_informatie, container, false);
    return view;
        }

    } 
```

该方法从片段中调用（使用 getActivity().getTeam()），但在屏幕旋转后 getTeam() 返回 null；我认为片段调用 getTeam() 太快了，在变量 team 被初始化之前（？）

你能帮我么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:14:56.483

这可能不是你想听到的，但我建议摆脱

```
 android:configChanges="orientation|keyboardHidden|keyboard" 
```

这是一个丑陋的 hack，如果您不正确处理配置更改，许多新的 SDK 元素（如 Loaders）将会损坏。让 Android 处理配置更改，并围绕它设计您的代码。

# mysql - MySQL INSERT-SELECT 版本表中的多行

> ID：10195827
> 
> 赞同：0
> 
> 时间：2012-04-17T17:12:33.830
> 
> 标签：mysql, versioning, insert-select

我有 2 个这样的版本表：

项目：

*   ID
*   rev_id
*   姓名
*   已删除

分项：

*   ID
*   rev_id
*   姓名
*   parent_id
*   已删除

我从[http://kristiannielsen.livejournal.com/6745.html](http://kristiannielsen.livejournal.com/6745.html)了解到，从我的表格中获取所有最新版本的对象非常容易和快速，如下所示：

```
SELECT a.name, a.id, a.rev_id, a.deleted FROM Items a
INNER JOIN (SELECT id, MAX(rev_id) AS rev_id FROM Items GROUP BY id) b
ON (a.id= b.id AND a.rev_id b.rev_id) 
```

但是当用户删除一条记录时，如果我可以插入一条删除为 1 的新记录作为新记录，那就太酷了。我在这里找到：[https](https://stackoverflow.com/a/4039781/672989) ://stackoverflow.com/a/4039781/672989我可以插入这样的东西：

```
INSERT INTO table (id, rev_id, name, deleted)
SELECT id, rev_id, name, 1 FROM Items WHERE id = 1 ORDER BY rev_id DESC LIMIT 1 
```

但是，如果 Items 表中的一个项目被删除 = 1，我想为子项目表中 parent_id == items.id 的所有子项目添加删除 = 1 的新记录。有什么简单的方法可以做到这一点，是否可以通过一个查询？如果我什至还有另一个 subsubitems 表，我怎么能在那里实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T23:59:21.720

您需要创建一个“插入时”触发器来覆盖`deleted`父级是否已被标记的值：

```
DELIMITER ;;

CREATE TRIGGER foo BEFORE INSERT ON Items FOR EACH ROW
  IF (SELECT deleted FROM Items WHERE id = NEW.parent_id) THEN
    SET NEW.deleted := 1;
  END IF;;

DELIMITER ; 
```

# ruby-on-rails - Rails 设计 - 如果用户未登录，如何显示登录表单

> ID：10195843
> 
> 赞同：1
> 
> 时间：2012-04-17T17:13:54.750
> 
> 标签：ruby-on-rails, ruby, devise, haml

我是 RoR 的新手......只是警告你:)

我在 routes.rb 中制作了这条路线：

```
 scope :module => :mobile, :as => :mobile do
    constraints(:subdomain => /m/) do
      resources :home
         devise_for :users, :path => "", :path_names => { :sign_in => "login", :sign_out => "logout", :sign_up => "signup" }, :controllers => {:sessions => "sidebar/sessions"}

      resources :disclosures # Will have new, get, look up a disclosure

      devise_for :users, :path => "", :path_names =>
          { :sign_in => "login", :sign_out => "logout", :sign_up => "signup" }
          # How do I tell is to also take care of the confirm account screen?
    end
  end 
```

我制作了这个 HAML 页面：

```
-content_for :primary_content do
  .content_container
    %strong{:class => "code", :id => "message"} Hello Alex!

  -content_for :primary_content do
    -if signed_in?
      =render "sidebar/common/primary_navigation"
    -else
      =render "devise/sessions/form" 
```

当用户未登录时，它给了我这个错误：

```
undefined local variable or method `resource' for #<#<Class:0x147fe1990>:0x147fdab40> 
```

和

```
1: = form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:id => "login-form"}) do |f| 
2:   %fieldset.field-container
3:     = f.label(t :label_login) 
4:     .input 
```

这个堆栈跟踪：

```
app/views/devise/sessions/_form.html.haml:1:in `_app_views_devise_sessions__form_html_haml__2025707780_2630401320'
app/views/mobile/home/index.html.haml:26:in `_app_views_mobile_home_index_html_haml__2141491110_2759485880'
app/views/mobile/home/index.html.haml:22:in `_app_views_mobile_home_index_html_haml__2141491110_2759485880'
app/views/mobile/home/index.html.haml:1:in `_app_views_mobile_home_index_html_haml__2141491110_2759485880'
app/controllers/mobile/home_controller.rb:6:in `index' 
```

因此，如果我理解正确，它不知道如何处理代码的表单部分。那是对的吗？我做错了什么导致这个问题？我如何解决它？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:25:00.593

您不需要呈现设计表单。

所以删除这个：

```
-else
      =render "devise/sessions/form" 
```

您需要将此添加到要验证的控制器的顶部：

```
before_filter :authenticate_user!, :only => [:edit, :update, :destroy] 
```

如果用户未通过身份验证，这将导致设计重定向到登录表单。如果他已经通过身份验证，则将呈现您的正常视图。

# java - 使用 JAXB 的多个 XML 文件

> ID：10195846
> 
> 赞同：0
> 
> 时间：2012-04-17T17:14:18.327
> 
> 标签：java, jaxb

这是一个使用类中的 JAXB 的示例 XML

```
<Nodes>
    <Node>
        ...
    </Node>
    <Node>
        ...
    </Node>
    ...
</Nodes> 
```

我想将这些节点中的每一个保存在单独的 xml 中。那么如何在java中设计Bean呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:24:07.073

我将创建一个 XSD 文档来捕获您的所有需求，然后让 JAXB 为您创建 bean。

关于如何做到这一点的一个很好的例子可以在以下位置找到：

[http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html](http://blog.bdoughan.com/2011/04/xml-schema-to-java-xsd-choice.html)

# javascript - MakeRequest 不起作用

> ID：10195848
> 
> 赞同：0
> 
> 时间：2012-04-17T17:14:28.337
> 
> 标签：javascript, xmlhttprequest

我确实要求：

我收到 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<search>
<location id="18171" client_id="511">
<site>3</site>
..... 
```

刷新浏览器后，我收到：

```
<?xml version="1.0" encoding="UTF-8"?>
    </search> 
```

只有当我关闭并打开浏览器时，我才会收到

```
<?xml version="1.0" encoding="UTF-8"?>
    <search>
    <location id="18171" client_id="511">
    <site>3</site> 
```

为什么？我不想每次都关闭和打开浏览器

谢谢

我的代码：

```
function makeRequestXML(url) {
    http_request = false;

    if (window.XMLHttpRequest) { // Mozilla, Safari,...
        http_request = new XMLHttpRequest();
        if (http_request.overrideMimeType) {
            http_request.overrideMimeType('text/xml');
        }
    } else if (window.ActiveXObject) { // IE
        try {
            http_request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                http_request = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {}
        }
    }

    if (!http_request) {
        alert('Giving up :( Cannot create an XMLHTTP instance');
        return false;
    }
    http_request.onreadystatechange = ContentsXML;
    http_request.open('GET', url, true);
    http_request.send(null);
}

function ContentsXML() {
    if (http_request.readyState == 4) {
        if (http_request.status == 200) {
            number_checkbox = 0;
            var xmldoc = http_request.responseXML; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:38:55.737

这是您要连接的服务器的问题。我不知道它在做什么，或者你期望它在做什么，但你的 JS 显然在访问该服务器并在所有情况下都返回数据。如果你取回了坏数据，那不是你的 JS 的错。

似乎服务器可能会根据浏览器会话发送不同的数据，并且重新启动浏览器可能会重置该会话。

# android - 安卓多点触控模拟器

> ID：10195850
> 
> 赞同：0
> 
> 时间：2012-04-17T17:14:32.830
> 
> 标签：android, android-emulator, multi-touch

好的，所以在他们发布 android 工具 r18 之后，谷歌表示他们在模拟器中添加了对多点触控以及传感器的支持。但是我还没有让多点触控工作，尽管我让传感器工作并且很好.. 一样但是在另一个端口转发中，此外，传感器的东西只工作了一次，因为我试图让它再次工作，但它根本没有工作。这里是网站： [http](http://tools.android.com/tips/hardware-emulation) ://tools.android.com/tips/hardware-emulation 不过，他们说他们正在修复 R19 中的端口转发东西，我已经安装了 R19.. 所以我的问题是，有人做过这个工作？如果是这样，我该怎么做？（如果可能，请一步一步）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:29:08.897

文档（在您发布的链接上）说传感器和多点触控具有实验性支持，所以我认为您不能依赖它工作。

# html - 灵活的居中页面

> ID：10195852
> 
> 赞同：1
> 
> 时间：2012-04-17T17:14:39.077
> 
> 标签：html, css

> **可能重复：**
> [灵活或居中的页面 HTML CSS](https://stackoverflow.com/questions/10203738/flexible-or-centered-page-html-css)

我需要一种灵活或居中的页面设计，即使对于屏幕分辨率为 800*600 的用户也能正常工作。（CSS + HTML）

我应该使用 % 还是 px 作为宽度和高度？

您能否提供任何示例链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:16:05.127

```
<div id="content">
</div>

#content {
  width:800px; (or width: 80%;)
  margin:0 auto;
} 
```

示例：http: [//jsfiddle.net/UyUFa/](http://jsfiddle.net/UyUFa/)

# javascript - requireJS - 使用 ajax 请求

> ID：10195853
> 
> 赞同：2
> 
> 时间：2012-04-17T17:14:39.807
> 
> 标签：javascript, jquery, requirejs

**索引.html**

```
<link href="Styles/bootstrap.css" rel="stylesheet" />
<script data-main="Scripts/app" src="Scripts/require.js"></script>

<a class="btn0">button 0</a>
<div class="target"></div> 
```

**应用程序.js**

```
require({
    paths : {
        jQuery : 'http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min',
        tooltip : 'bootstrap-tooltip'
    }
});

require([ 'jQuery' ], function() {
    require(['tooltip' ], function() {
        $(".btn0").click(function() {
            $(".target").load('btn0.html');
        });

        $('[rel=tooltip]').tooltip();
    });
}); 
```

**btn0.html**

```
 Wouldn't it be nice to see a Tooltip <a href="#" rel="tooltip" title="Oh yeah!">here</a>? 
```

* * *

在这种情况下，工具提示不起作用。仅当我剪切`$('[rel=tooltip]').tooltip();`并粘贴到 btn0.html 时才有效，例如：

```
<script>
$('[rel=tooltip]').tooltip();
</script> 
```

我的问题是。如何组织 btn0.html 中需要的 javascript 代码？可以把btn0.html的JS内容放到app.js里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:23:01.500

`tooltip()`加载 btn0.html 时必须调用函数。`rel="tooltip"`初始化该页面时不存在的元素。

```
require([ 'jQuery' ], function() {
  require(['tooltip' ], function() {
    $(".btn0").click(function() {
      $(".target").load('btn0.html', function ()
      {
        $('[rel=tooltip]').tooltip();
      })
    });
  });
}); 
```

# firefox-addon - 如何在 Firefox 扩展中使用 parseFragment 保留属性

> ID：10195857
> 
> 赞同：0
> 
> 时间：2012-04-17T17:14:59.827
> 
> 标签：firefox-addon

在 Firefox 扩展中，我们使用`parseFragment`（[文档](https://developer.mozilla.org/en/nsIScriptableUnescapeHTML)）将 HTML 字符串（从 3rd 方服务器接收）解析为`DocumentFragment`Mozilla 要求的经过清理的字符串。唯一的问题是，解析器删除了我们需要的所有属性，例如`class`属性。

是否有可能`class`在解析 HTML 时以某种方式保留属性`parseFragment`？

PS 我知道在 Gecko 14.0 中，他们用另一个支持清理参数的函数[替换了这个函数。](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIParserUtils)但是 Gecko < 14.0 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:00:17.433

不，白名单是[硬编码](http://hg.mozilla.org/mozilla-central/file/40455cbb1ad3/content/base/src/nsTreeSanitizer.cpp#l187)的，无法调整。但是，该`class`属性在白名单中，应该保留，您可能是指该`style`属性？如果您需要自定义行为，则必须使用不同的解决方案（例如可以在 Firefox 12 中解析 HTML 文档的[DOMParser ）。](https://developer.mozilla.org/en/DOMParser)

对于较旧的 Firefox 版本，您可以在`DOMParser`那里解析 XHTML 数据。如果你真的有 HTML，那么我只知道一种解析它的方法，而不立即将它插入到文档中（这可能会导致各种安全问题）：[range.createContextualFragment()](https://developer.mozilla.org/en/DOM/range.createContextualFragment)。你需要一个 HTML 文档，如果你没有的话——隐藏`<iframe>`加载`about:blank`也可以。下面是它的工作原理：

```
// Get the HTML document
var doc = document.getElementById("dummyFrame").contentDocument;

// Parse data
var fragment = doc.createRange().createContextualFragment(htmlData);

// Sanitize it
sanitizeData(fragment); 
```

在这里清理数据是您自己的责任。您可能希望根据我上面链接到的 Mozilla 白名单进行清理 - 删除不在该列表中的所有标签和属性，还要确保检查链接。该`style`属性是一种特殊情况：它曾经是不安全的，但恕我直言，不再提供`-moz-binding`网络不再支持。

# jquery - jQuery 停止 HTML 编码 cookie

> ID：10195865
> 
> 赞同：6
> 
> 时间：2012-04-17T17:15:23.500
> 
> 标签：jquery, cookies, escaping, html-encode

我正在使用这个简短的代码片段：

```
var d = itemID + "," + quantity;
var CookieData = $.cookie("storebasket");

if(CookieData == null || CookieData == "") {
    $.cookie("storebasket", d, { path: '/', expires: 60 });
} else {
    $.cookie("storebasket", CookieData + "|" + d, { path: '/', expires: 60 });
} 
```

然而，值 ALWAYS 变为 HTML 编码。例如：

```
5%2C1 
```

[使用此工具](http://www.silisoftware.com/tools/entitydecode.php)解码时为：

```
5,1 
```

我试过使用`unescape`但没有运气：

```
$.cookie("storebasket", unescape(d), { path: '/', expires: 60 }); 
```

还有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-03T17:57:34.593

jquery.cookie 默认情况下对逗号进行编码。要覆盖它，只需执行以下操作：

```
$.cookie.raw = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:39:41.367

这个答案非常有用：

[cookie 中允许的字符](https://stackoverflow.com/questions/1969232/allowed-characters-in-cookies)

但我真的看不出问题所在。当您想在文档中使用它们时，您可以取消转义它们。如果您想将它们存储在 cookie 中，它们将被转义。

# php - 使用键值将值插入数组

> ID：10195868
> 
> 赞同：0
> 
> 时间：2012-04-17T17:15:37.573
> 
> 标签：php, arrays

我已经在数组中获取了键和值。如何使用该获取的键值将该值插入到同一键位置的另一个数组中。

这是我的编码

```
$key=array_search($s_str,$opis_split);
//key value
$value=a;
//array value
$push=array_push($value,$key);
var_dump($push); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:18:39.650

```
$push[$key] = $value; 
```

**例子**

```
<?php 
  $push = array('a', 'b', 'c'); 
  $key = 10;
  $value = 'z';
  $push[$key] = $value;
  var_dump($push);
?> 
```

会输出：

```
array
  0 => string 'a' (length=1)
  1 => string 'b' (length=1)
  2 => string 'c' (length=1)
  10 => string 'z' (length=1) 
```

这不是你想要做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T02:03:48.933

要在第 n 个键处插入，请使用`array_splice($push, $n, 0, $value)`

# php - PHP / MySQL 独立安装程序/更新程序脚本？

> ID：10195869
> 
> 赞同：0
> 
> 时间：2012-04-17T17:15:38.683
> 
> 标签：php, mysql, installation, auto-update, utility

我正在寻找一个能够为我的框架快速实现包安装/更新功能的脚本。它应该能够做以下事情：

*   必须与 PHP 5 兼容。
*   应该能够安装和更新组件的文件和数据库表。
*   应该允许定义包依赖关系并具有解决冲突的形式。
*   当包的开发者提供它时，应该允许 UPDATE SQL 语句。（在不丢失数据的情况下进行数据库更改）。
*   应该能够将更新包“监禁”到目标文件夹。
*   应该能够定义和检测不同的包类型以应用提到的“监狱”。
*   应提供一个 API 将其集成到自定义后端。
*   应该允许下载包，最好是通过 HTTP（而不是 FTP 或其他）。

我计划将其用作独立实用程序，以便轻松地为模块化框架提供更新以及为我们的客户提供自定义代码。

如果您有类似或在开源框架中使用的工具的建议作为其基础，那也很好。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:33:36.393

我不知道有什么神奇的工具可以做到这一点，但可以帮助你完成这些任务的一对是 Phrake 和 Composer。

[Phake](https://github.com/jaz303/phake)是 Ruby 的 Rake 实用程序的 PHP 版本。您可以使用这些脚本来设置数据库、更新文件和运行单元测试。

对于包管理，您可以使用[Composer](https://github.com/composer/composer)来管理您的依赖项（如果您依赖这些系统的包，它也可以从 PEAR 下载），当然这可以合并到您的构建脚本中。

# algorithm - 在不同的区间内找到共同点

> ID：10195872
> 
> 赞同：0
> 
> 时间：2012-04-17T17:15:45.700
> 
> 标签：algorithm, optimization

给定一个“线程”列表，其中包含 2 个变量 - 开始时间和结束时间 - 实现一个函数，该函数将在某个时间 t 返回所有正在运行的线程。优化它。（比 O(n) 快）

* * *

我的解决方案是遍历列表——即 O(n)。有谁知道如何在这里实现比 O(n) 更快的速度？

```
class MyThread{
Thread thread;
long start;
long end;
}//the object in the list

//function to find "threads"
public List<Thread> matchingInterval(List<MyThread> list) {
    List<Thread> found = new ArrayList<Thread>();
    Set<Thread> runningThreads = Thread.getAllStackTraces().keySet();
    long instant = System.currentTimeMillis();
    for(MyThread el: list)
        if(el.start <= instant && el.end >= instant && runningThreads.contains(el.thread))
            found.add(el.thread);
    return found;
} 
```

编辑：

目标是`return all running threads at some time t.`我的解决方案假定`time t`是调用我的函数的时间（加/减错误），因此我`long instant = System.currentTimeMillis();`的调用者是否有可能指定一些任意时间？如果是，那么我观察到这个问题实际上与线程本身无关，所以我不需要抓住实际的`runningThreads`.

还有一点：仅仅因为一个线程是活着的，它就在运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:25:04.973

如果您的列表已排序，您可以使用任何搜索算法（例如分而治之）实现比 O(n) 更快的速度。对于未排序的列表，不能比 O(n) 更快，因为您必须查看每个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:38:32.387

如果他们说“优化它”，这意味着（对我来说）您可以预处理列表顺序以加快未来的查询。在这种情况下，我会使用[区间树](http://en.wikipedia.org/wiki/Interval_tree)（实际上只是二叉搜索树的一个应用程序）。

# javascript - ajax 到 PHP 服务时获取未定义的数据

> ID：10195873
> 
> 赞同：0
> 
> 时间：2012-04-17T17:15:52.010
> 
> 标签：javascript, ajax, cross-domain

它只是一个简单的注册/登录网络应用程序。我在 Web 服务器上部署我的 PHP 服务，并在本地部署我的 Web 应用程序。所以这是一个跨领域的问题。这是客户端代码：

```
$.ajax(usersUrl, {
     crossDomain:true,
     data: params,
     dataType: 'jsonp',
     jsonp : "callback",

    jsonpCallback: function(data) {
        alert(data);
        responseObject = $.parseJSON(data);
        if (responseObject['success']) {
           authToken = responseObject['data']['authToken'];
           $.mobile.changePage('lists.html');
        } else if (responseObject['error']) {
           alert(responseObject['message']);
        }
     }
  }); 
```

当我注册时，将返回一个未定义的数据。谁能帮我一把？

非常感谢。

[编辑] 服务器代码：

```
$response = array();

$username = $_POST['username'];
$password = $_POST['password'];

try {
    $responseData = $userAuth->login($username, $password);
    if (!$responseData) {
        $response['error'] = true;
        $response['message'] = 'Invalid username/password combination specified. Please try again.';
    } else {
        $response['success'] = true;
        $response['data'] = $responseData;
        Logger::log('Login complete');
    }
} catch (DbException $e) {
    $response['error'] = true;
    $response['message'] = 'An error occurred while trying to process the login request. Please try again.';
}

return $response; 
```

在全球范围内， echo json_encode($response); 希望有帮助。谢谢你们。

# php - facebook 聊天 api - php

> ID：10195875
> 
> 赞同：9
> 
> 时间：2012-04-17T17:15:58.353
> 
> 标签：php, facebook

我已经成功地通过 xmpp 协议登录到 facebook。

我使用了此处找到的 facebook 文档中提供的 PHP 代码：

```
<?php
// Copyright 2004-present Facebook. All Rights Reserved.

$STREAM_XML = '<stream:stream '.
  'xmlns:stream="http://etherx.jabber.org/streams" '.
  'version="1.0" xmlns="jabber:client" to="chat.facebook.com" '.
  'xml:lang="en" xmlns:xml="http://www.w3.org/XML/1998/namespace">';

$AUTH_XML = '<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" '.
  'mechanism="X-FACEBOOK-PLATFORM"></auth>';

$CLOSE_XML = '</stream:stream>';

$RESOURCE_XML = '<iq type="set" id="3">'.
  '<bind xmlns="urn:ietf:params:xml:ns:xmpp-bind">'.
  '<resource>fb_xmpp_script</resource></bind></iq>';

$SESSION_XML = '<iq type="set" id="4" to="chat.facebook.com">'.
  '<session xmlns="urn:ietf:params:xml:ns:xmpp-session"/></iq>';

$START_TLS = '<starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>';

function open_connection($server) {
  print "[INFO] Opening connection... ";

  $fp = fsockopen($server, 5222, $errno, $errstr);
  if (!$fp) {
    print "$errstr ($errno)<br>";
  } else {
    print "connnection open<br>";
  }

  return $fp;
}

function send_xml($fp, $xml) {
  fwrite($fp, $xml);
}

function recv_xml($fp,  $size=4096) {
  $xml = fread($fp, $size);
  if ($xml === "") {
     return null;
  }

  // parses xml
  $xml_parser = xml_parser_create();
  xml_parse_into_struct($xml_parser, $xml, $val, $index);
  xml_parser_free($xml_parser);

  return array($val, $index);
}

function find_xmpp($fp,  $tag, $value=null, &$ret=null) {
  static $val = null, $index = null;

  do {
    if ($val === null && $index === null) {
      list($val, $index) = recv_xml($fp);
      if ($val === null || $index === null) {
        return false;
      }
    }

    foreach ($index as $tag_key => $tag_array) {
      if ($tag_key === $tag) {
        if ($value === null) {
          if (isset($val[$tag_array[0]]['value'])) {
            $ret = $val[$tag_array[0]]['value'];
          }
          return true;
        }
        foreach ($tag_array as $i => $pos) {
          if ($val[$pos]['tag'] === $tag && isset($val[$pos]['value']) &&
            $val[$pos]['value'] === $value) {
              $ret = $val[$pos]['value'];
              return true;
          }
        }
      }
    }
    $val = $index = null;
  } while (!feof($fp));

  return false;
}

function xmpp_connect($options, $access_token) {
  global $STREAM_XML, $AUTH_XML, $RESOURCE_XML, $SESSION_XML, $CLOSE_XML, $START_TLS;

  $fp = open_connection($options['server']);
  if (!$fp) {
    return false;
  }

  // initiates auth process (using X-FACEBOOK_PLATFORM)
  send_xml($fp,  $STREAM_XML);
  if (!find_xmpp($fp, 'STREAM:STREAM')) {
  echo "falss";
    return false;
  }
  if (!find_xmpp($fp,  'MECHANISM', 'X-FACEBOOK-PLATFORM')) {
  echo "f4ls";
    return false;
  }

  // starting tls - MANDATORY TO USE OAUTH TOKEN!!!!
  send_xml($fp,  $START_TLS);
  if (!find_xmpp($fp, 'PROCEED', null, $proceed)) {
    return false;
  }
  stream_socket_enable_crypto($fp, true, STREAM_CRYPTO_METHOD_TLS_CLIENT);

  send_xml($fp, $STREAM_XML);
  if (!find_xmpp($fp, 'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp, 'MECHANISM', 'X-FACEBOOK-PLATFORM')) {
    return false;
  }

  // gets challenge from server and decode it
  send_xml($fp, $AUTH_XML);
  if (!find_xmpp($fp,  'CHALLENGE', null, $challenge)) {
    return false;
  }
  $challenge = base64_decode($challenge);
  $challenge = urldecode($challenge);
  parse_str($challenge, $challenge_array);

  // creates the response array
  $resp_array = array(
    'method' => $challenge_array['method'],
    'nonce' => $challenge_array['nonce'],
    'access_token' => $access_token,
    'api_key' => $options['app_id'],
    'call_id' => 0,
    'v' => '1.0',
  );
  // creates signature
  $response = http_build_query($resp_array);

  // sends the response and waits for success
  $xml = '<response xmlns="urn:ietf:params:xml:ns:xmpp-sasl">'.
    base64_encode($response).'</response>';
  send_xml($fp, $xml);
  if (!find_xmpp($fp, 'SUCCESS')) {
    return false;
  }

  // finishes auth process
  send_xml($fp, $STREAM_XML);
  if (!find_xmpp($fp,'STREAM:STREAM')) {
    return false;
  }
  if (!find_xmpp($fp, 'STREAM:FEATURES')) {
    return false;
  }
 send_xml($fp, $RESOURCE_XML);
  if (!find_xmpp($fp, 'JID')) {
    return false;
  }
  send_xml($fp, $SESSION_XML);
  if (!find_xmpp($fp, 'SESSION')) {
    return false;
  }

  // we made it!
  send_xml($fp, $CLOSE_XML);
  print ("Authentication complete<br>");
  fclose($fp);

  return true;
}

//Gets access_token with xmpp_login permission
function get_access_token($app_id, $app_secret, $my_url){ 

  $code = $_REQUEST["code"];

  if(empty($code)) {
    $dialog_url = "http://www.facebook.com/dialog/oauth?scope=xmpp_login".
     "&client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url) ;
    echo("<script>top.location.href='" . $dialog_url . "'</script>");
  }
   $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url) 
    . "&client_secret=" . $app_secret 
    . "&code=" . $code;
   $access_token = file_get_contents($token_url);
    parse_str($access_token, $output);

    return($output['access_token']);
}

function _main() {
  print "Test platform connect for XMPP<br>";
  $app_id='YOUR_APP_ID';
  $app_secret='YOUR-APP_SECRET';
  $my_url = "YOUR_APP_URL";
  $uid = 'USER_ID';
  $access_token = get_access_token($app_id,$app_secret,$my_url);
  print "access_token: ".$access_token."<br>";

  $options = array(
    'uid' => $uid,
    'app_id' => $app_id,
    'server' => 'chat.facebook.com',
   );

  // prints options used
  print "server: ".$options['server']."<br>";
  print "uid: ".$options['uid']."<br>";
  print "app id: ".$options['app_id']."<br>";

  if (xmpp_connect($options, $access_token)) {
    print "Done<br>";
  } else {
    print "An error ocurred<br>";
  }

}

_main(); 
```

我几乎了解所有内容，但我没有看到任何用于检索在线列表、发送/接收消息的文档。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T09:19:30.987

Send `<presence />` to go online.
The server will then send you several `<presence from='friend1@chat.facebook.com/deviceID' />` indicating online friends.

Send a message like this:

```
<message from='juliet@example.com' to='romeo@example.net'>
    <body>Art thou not Romeo, and a Montague?</body>
</message> 
```

# python - 加速 Redis 服务器输入

> ID：10195879
> 
> 赞同：1
> 
> 时间：2012-04-17T17:16:12.267
> 
> 标签：python, multithreading, redis, multiprocessing

如何使用 python 2.7 将 python 中的这个测试代码加速到 Winxp 上的 Redis？多处理会更好吗？6000/s 的加载速率与 100,000/s 的速率。我选择了 100,000，但在测试中可能会更低。该过程需要 15 秒。

更改服务器上的设置会有帮助吗？？？

```
import time
from time import strftime
import redis
import threading, Queue

start_time = time.time()
cxn = redis.StrictRedis('127.0.0.1',6379,1)

class WorkerMain(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        while 1:
            try: # take a job from the queue            
                row  = self.queue.get_nowait()           
            except Queue.Empty: raise SystemExit

            try:
                cxn.set(row, "Row")
                #print (row, "Row")
            except: print 'Setup Error'

if __name__ == '__main__':
    connections =  5

    sml = range(1,100000)    
    queue = Queue.Queue() 
    for row in sml:
        queue.put(str(row))

    threads = []
    for dummy in range(connections):
        t = WorkerMain(queue)
        t.start()
        threads.append(t)

    # wait for all threads to finish
    for thread in threads:
        thread.join()

print 
end_time = time.time()
duration = end_time - start_time
print "Duration: %s" % duration 
```

使用下面的代码进行多重处理并使用 CLI“监控”数据……并非所有数据都进入服务器。

```
from multiprocessing import Pool
import time
import redis

start_time = time.time()
cxn = redis.Redis('127.0.0.1',6379,1)

def rset(var):
    cxn.set(var,"value")

if __name__ =='__main__':   
    sml = range(1,10000)
    #for x in sml:print x

    pool = Pool(processes=5)
    for row in sml:
        pool.apply_async(rset, [(row,)])
        #print result.get(), 

end_time = time.time()
duration = end_time - start_time
print "Duration: %s" % duration 
```

这是流水线代码……我只是注释掉了线程的东西。

```
from time import strftime
import redis
import threading, Queue

start_time = time.time()
cxn = redis.StrictRedis('127.0.0.1',6379,0)
pipe = cxn.pipeline(transaction=False)

class WorkerMain(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        while 1:
            try: # take a job from the queue            
                row  = self.queue.get_nowait()           
            except Queue.Empty: raise SystemExit

            try:
                cxn.set(row, "Row")
                #print (row, "ROw")
            except: print 'Setup Error'

if __name__ == '__main__':
    #connections =  5

    sml = range(1,100000)    
    #queue = Queue.Queue() 
    for row in sml:
        #queue.put(str(row))
        pipe.set(str(row),"value").execute()# key, value

   # threads = []
   # for dummy in range(connections):
   #     t = WorkerMain(queue)
   #     t.start()
   #     threads.append(t)
   #     
   # # wait for all threads to finish
   # for thread in threads:
   #    thread.join()

print 
end_time = time.time()
duration = end_time - start_time
print "Duration: %s" % duration 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:37:05.620

使用管道。管道批处理命令，因此您无需支付网络开销。

看 ：

1.  关于管道的部分在这里[https://github.com/andymccurdy/redis-py](https://github.com/andymccurdy/redis-py)
2.  Redis.io 上的流水线 - [http://redis.io/topics/pipelining](http://redis.io/topics/pipelining)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:21:03.853

如果因为 gil 而使用 cpython（标准 python 解释器），那么使用线程来获得更好的性能并不是一个好主意。

[http://wiki.python.org/moin/GlobalInterpreterLock](http://wiki.python.org/moin/GlobalInterpreterLock)

多处理应该更好

# visual-studio - 部署混合代码 Visual Studio 应用程序

> ID：10195883
> 
> 赞同：1
> 
> 时间：2012-04-17T17:16:44.253
> 
> 标签：visual-studio, deployment, mixed-code

我在其他机器上运行我的应用程序时遇到问题。

我在 Win7 x64 机器上使用 Visual Studio 2008 进行开发。该解决方案包含几个 C# 项目（主应用程序是用 C# 编写的，所有其他都是库项目）和两个 c++/CLI 库。C++ 库是 Win32，所有 C# 项目都设置为 x86 目标处理器。没有使用第三方库。使用的框架是 v3.5。
该应用程序在我的机器上构建并运行良好。
我将整个“bin\release”文件夹复制到 Win7 x86 机器上，它也运行良好。但是当我在 XP x86 系统上尝试时，它并没有启动。没有错误消息，甚至没有很快出现在任务管理器中。XP 系统已安装所有更新、所有可用的 .NET 框架和所有 Visual Studio 运行时。
我检查了 DependencyWalker，唯一缺少的 dll 是“IEShim.dll”和“wer.dll”，它们仅适用于 Vista 或更高版本。
我尝试了另一个不使用 C++ 库的应用程序，它们运行良好。所以我想我在部署 C++ dll 时做错了。
使用“regsvr32”注册 C++ dll 失败，并显示“DllEntryPoint”未找到消息。使用“regasm”注册成功，但没有效果。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:51:14.050

好吧，似乎我有点仓促地说“没有第三方组件”。
实际上，缺少运行时的是 SQL Server Compact。

# mysql - JOIN 或 INNER SELECT with IN，哪个更快？

> ID：10195887
> 
> 赞同：0
> 
> 时间：2012-04-17T17:16:57.747
> 
> 标签：mysql, sql

我想知道 INNER JOIN 或 INNER SELECT 哪个更快？

```
select t1.* from test1 t1
inner join test2 t2 on t1.id = t2.id
where t2.id = 'blah' 
```

或者

```
select t1.* from test1 t1
where t1.id IN (select t2.id from test2 t2 where t2.id = 'blah') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:35:53.210

假设`id`是关键，这些查询意味着同样的事情，一个体面的 DBMS 将以完全相同的方式执行它们。不幸的是 MySQL 没有，正如在这个[SQL Fiddle](http://sqlfiddle.com/#!2/c2e96/3)中展开“查看执行计划”链接可以看出的那样。哪个更快可能取决于表的大小 - 如果`TABLE1`行数很少，那么 IN 有可能更快，而 JOIN 在所有其他情况下可能会更快。

这是 MySQL 查询优化器的一个特性。我从未见过[Oracle](http://sqlfiddle.com/#!4/c2e96/1)、[PostgreSQL](http://sqlfiddle.com/#!1/c2e96/1)或[MS SQL Server](http://sqlfiddle.com/#!3/c2e96/1)以不同的方式执行如此简单的等效查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:26:16.583

如果您必须猜测，`INNER JOIN`它可能比 更有效`IN (SELECT ...)`，但这可能因一个查询而异。

`EXPLAIN`关键字是您最好的朋友之一。`EXPLAIN`在您的完整查询前面键入， `SELECT`MySQL 将为您提供一些有关它将如何执行查询的基本信息。它会告诉你它在哪里使用文件排序，它在哪里使用你创建的索引（以及它在哪里忽略它们），以及它可能需要检查多少行才能满足请求。

如果其他一切都相同，请使用`INNER JOIN`主要是因为它更容易预测，因此对新开发人员来说更容易理解。当然，如果您看到`IN (SELECT ...)`表单的真正优势，请使用它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:25:42.560

尽管您必须检查您要查询的任何 RDBS 的执行计划，但我想这`inner join`会更快或至少相同。如果我错了，也许有人会纠正我。

无论如何，嵌套选择很可能会运行整个内部查询，并从`test2`. 如果该查询返回一百万行，那么无论如何您都已经承担了将该数据加载到内存中的成本。

使用内部连接，如果`test1`只有 2 行，它可能只会对每行`test2`的`id`值进行 2 次索引扫描，而不必将一百万行加载到内存中。

更现代的数据库系统也有可能优化第一个场景，因为它对每个表都有统计信息，但是在最好的情况下，内部连接是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:26:25.970

在大多数情况下，JOIN 比子查询快得多，但子查询比 JOIN 更具可读性。

RDBMS 针对 JOIN 创建一个执行计划，因此可以预测应该加载哪些数据以进行处理。这绝对可以节省时间。另一方面，对于子查询，它运行所有查询并加载所有数据以进行处理。

[有关更多详细信息，请查看此链接。](http://www.codersrevolution.com/index.cfm/2008/7/31/MySQL-performance-INNER-JOIN-vs-subselect)

# data-structures - 用于过滤和聚合关系数据的最节省时间/空间的数据结构

> ID：10195888
> 
> 赞同：1
> 
> 时间：2012-04-17T17:16:57.820
> 
> 标签：data-structures, reporting, aggregate-functions

对具有以下模型和关系的应试应用程序进行成像：

```
Test -< Categories -< Questions -< Answers
Question >-< Domain 
```

所以一个测试有很多类别，每个类别都有几个问题。一个问题也可以有多个域，一个域可以有多个问题（类似于“标签”）。使用该应用程序，用户进行测试，创建特定类别的答案。

如果我们想问：

*   测试 X 的测试均值是多少（类别均值的均值）
*   类别均值是什么（类别中问题的均值）
*   问题的意思是什么（问题的答案值的平均值）
*   什么是域均值（域的问题均值）

...问这些问题的空间/时间效率最高的数据结构或数据库布局是什么？

基于矩阵的解决方案或其他内存数据结构，或标准化的 NoSQL 解决方案，比涉及持久化数据然后通过连接将其拉出的解决方案更可取。

# svn - svn转储测试数据？

> ID：10195891
> 
> 赞同：0
> 
> 时间：2012-04-17T17:17:03.677
> 
> 标签：svn, repository

我正在开发一些分析工具来查看 svn 转储文件，但我没有一个好的测试数据集。有什么方法可以“克隆”公共 svn 存储库，以便我可以创建测试数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T11:35:40.447

subversion 1.7 引入的[svnrdump 工具](http://svnbook.red-bean.com/en/1.7/svn.ref.svnrdump.c.dump.html)可以从远程仓库创建转储文件。

# nxt - 如何使用 NXT 超声波传感器读取厘米值？

> ID：10195892
> 
> 赞同：0
> 
> 时间：2012-04-17T17:17:09.817
> 
> 标签：nxt, lego

我正在尝试使用 NBC（下一个字节码）在 NXT 上创建一个简单版本的 VFH（矢量场直方图）。为此，我需要准确测量机器人与物体之间的距离。既然NXT可以以厘米为单位显示距离，我想在我的程序中编程以厘米为单位的距离？由于没有默认的厘米读数（或者有吗？），可以这样做还是我必须使用默认的传感器值？如果可以，我该怎么做？如果不是，我如何将超声波传感器读数转换为厘米读数？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T10:31:14.187

默认输出是一个字节值，给你厘米。

```
task main(){
   int DistanceInCm;

   SetSensorLowspeed(IN_4);
   while(true){
     DistanceInCm = SensorUS(IN_4);
     //do something with the value here.
     Wait(800); //or just wait.
   }
} 
```

就这么简单。传感器读数是一个字节（0-255 厘米）。但是 NXC 编译器会即时将其转换为 int。

请注意，虽然传感器不是很准确！特别是如果您在移动时阅读它。因此，预计读数中会有很多错误和噪音。

# castle-windsor - 结合 TypedFactoryFacility 在 Windsor 中使用 BoundTo Lifestyle

> ID：10195895
> 
> 赞同：2
> 
> 时间：2012-04-17T17:17:13.113
> 
> 标签：castle-windsor, typed-factory-facility

我想将 Windsor 中的 BoundTo Lifestyle 与 TypedFactoryFacility 一起使用，工厂在其中维护其范围上下文。但是我注意到目前不支持此功能（[https://groups.google.com/forum/?fromgroups#!topic/castle-project-users/txDi3dZ8veQ](https://groups.google.com/forum/?fromgroups#!topic/castle-project-users/txDi3dZ8veQ)）。有人可以解释我如何实现这一点，也许在温莎有不同的方法可以做同样的事情？

我有一个类似于以下的场景。在其中我使用命令将新面板添加到工作区，我希望将相同的 ISomeScopedViewModel 实例注入到我添加的每个面板中（由工厂 IWorkspacePanelViewModelFactory 创建）。

设想：

```
 _container = new WindsorContainer();

        _container.Kernel.AddFacility<TypedFactoryFacility>();

        _container.Register(
           Component.For<IWorkspaceViewModel>().ImplementedBy<WorkspaceViewModel>().LifeStyle.Is(LifestyleType.Transient),
           Component.For<ISomeScopedViewModel>().ImplementedBy<SomeScopedViewModel>().LifeStyle.BoundTo<IWorkspaceViewModel>(),
           Component.For<IWorkspacePanelViewModel>().ImplementedBy<WorkspacePanelViewModel>().LifeStyle.Is(LifestyleType.Transient),
           Component.For<IWorkspacePanelViewModelFactory>().AsFactory()
        ...
        ); 
```

# javascript - 使用 Javascript 设置图像的背景位置

> ID：10195896
> 
> 赞同：0
> 
> 时间：2012-04-17T17:17:17.060
> 
> 标签：javascript, html, css

当用户单击具有图像作为背景的链接时，我需要一个 onClick 事件来更改它的背景位置。这是链接：

```
<a href="#" id="favorite_1" class="favorite" onClick="favoriteBusiness(1);">Favorite</a> 
```

它已经在 css 中设置，并且有两种状态，常规和悬停，悬停移动了 12px。

```
a.favorite {
    width: 15px;
    height: 12px;
    background: url(img/icon-fav.png) no-repeat;
    overflow: hidden;
    position: absolute;
    top: 0;
    right: 0;
    text-indent: -300px;
}

a.favorite:hover {
    background-position: 0 -12px
} 
```

当我单击一次图像时，我需要将背景位置设置为与悬停状态相同。

我正在这样做，它有效：

```
document.getElementById("favorite_1").style.backgroundPosition = "0 -12px"; 
```

但是当再次点击链接时，我需要它切换回正常的背景位置，我无法让它工作。这是我正在尝试的功能，但它仅适用于将背景移动到“0 -12px”，而不是将其移回原来的位置。

```
function favoriteBusiness(id){

   if(document.getElementById("favorite_1").style.backgroundPosition == "0 -12px")
    document.getElementById("favorite_1").style.backgroundPosition = "";
   else
    document.getElementById("favorite_1").style.backgroundPosition = "0 -12px";

} 
```

有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:21:29.290

除非您进行计算，否则最好添加和删除包含新位置的类。这通常是用于操作 CSS sprites 的方法。

# c++ - 成员初始化列表？合成方法？结构/数组编译问题

> ID：10195897
> 
> 赞同：2
> 
> 时间：2012-04-17T17:17:22.470
> 
> 标签：c++, arrays, data-structures

我已经完成了一个程序，您可以在其中输入 20 个学生的成绩并计算他们的平均成绩以及总考试平均成绩。但是，尽管它确实编译并运行，但我收到以下警告：

```
In constructor 'student::student()':
warning: 'student::name' should be initialized in the member initialization list
note: synthesized method 'student::student()' first required here 
```

这是什么原因造成的？我假设它值得注意和修复，那么我将如何修复它？我已经包含了我认为是代码的相关部分以供审查：

```
#include <iostream>
#include <string>

using namespace std;

struct student
{ // The first warning is for this line
    string name;
    double testGrade[5];
};

student theStudent[20]; // The second warning is for this line 
```

我很感激你能提供给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:20:22.173

您可以将该警告视为无稽之谈。您使用的是什么编译器/版本/标志？

# git - Jenkins Git 插件：如何构建特定标签？

> ID：10195900
> 
> 赞同：131
> 
> 时间：2012-04-17T17:17:37.467
> 
> 标签：git, jenkins

我在让 Jenkins 构建指定标签时遇到问题。该标签是参数化构建的一部分，但我不知道如何将其传递给 git 插件来构建该标签。这已经花了我一天 3 个小时的时间，我已经在 Stack Overflow 向大师们承认了失败。

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2013-10-28T10:58:03.777

我可以通过使用“要构建的分支”参数来做到这一点：

```
Branch Specifier (blank for default): tags/[tag-name] 
```

将 [tag-name] 替换为您的标签名称。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2014-03-30T17:18:44.270

使用 Jenkins CI v.1.555、Git Client 插件 v.1.6.4 和 Git 插件 2.0.4，这些答案对我来说都不够。

我想要一份为一个特定的、固定的（即非参数化的）标签构建一个 Git 存储库的工作。[我不得不从各种答案以及Thilo 引用的](https://stackoverflow.com/a/17826112/38140)[“构建 Git 标签”博客文章](http://erics-notes.blogspot.be/2013/05/jenkins-build-latest-git-tag.html) 中拼凑出一个解决方案。

1.  确保将标签推送到远程存储库`git push --tags`
2.  在作业的“Git 存储库”部分中，在“源代码管理”标题下，单击“高级”。
3.  在 Refspec 字段中，添加以下文本：`+refs/tags/*:refs/remotes/origin/tags/*`
4.  在“要构建的分支”、“分支说明符”下，放置`*/tags/<TAG_TO_BUILD>`（替换`<TAG_TO_BUILD>`为您的实际标签名称）。

事实证明，为我添加 Refspec 至关重要。尽管当我将其留空时，似乎 git 存储库默认获取所有远程信息，但 Git 插件仍然无法找到我的标签。只有当我在 Refspec 字段中明确指定“获取远程标签”时，Git 插件才能识别并从我的标签构建。

**2014 年 5 月 7 日更新**：不幸的是，此解决方案确实对 Jenkins CI (v.1.555) 和 Git 存储库推送通知机制 à la [Stash Webhook to Jenkins](https://marketplace.atlassian.com/plugins/com.nerdwin15.stash-stash-webhook-jenkins)带来了不良副作用：任何时候更新存储库上的*任何*分支在一次推送中，标签构建作业也将再次触发。这会导致很多不必要的重复构建相同的标签作业。我尝试使用和不使用“使用工作区强制轮询”选项来配置作业，它似乎没有效果。我可以阻止 Jenkins 为标记作业进行不必要的构建的唯一方法是清除 Refspec 字段（即删除`+refs/tags/*:refs/remotes/origin/tags/*`）。

如果有人找到更优雅的解决方案，请使用更新编辑此答案。例如，我怀疑，如果 refspec 具体是`+refs/tags/<TAG TO BUILD>:refs/remotes/origin/tags/<TAG TO BUILD>`而不是星号包罗万象，那么这可能不会发生。然而，目前这个解决方案对我们有用，我们只是在工作成功后删除额外的 Refspec。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-17T17:34:07.627

你不能告诉 Jenkins 从 Ref 名称构建吗？如果是这样，那就是

```
refs/tags/tag-name 
```

从我看到的关于 Jenkins 和 Hudson 的所有问题来看，我建议切换到 TeamCity。我无需编辑任何配置文件即可让 TeamCity 正常工作。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-08-31T08:56:09.783

如果您正在使用 Jenkins 管道并想要签出特定标签（例如：`TAG`构建的参数），您可以执行以下操作：

```
stage('Checkout') {
  steps {
    checkout scm: [$class: 'GitSCM', userRemoteConfigs: [[url: 'YOUR_GIT_REPO_URL.git', credentialsId: 'YOUR_GIT_CREDENTIALS_ID' ]], branches: [[name: 'refs/tags/${TAG}']]], poll: false
  }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-10-09T09:55:16.343

我做了这样的事情并且它起作用了：

```
Source Code Management

 Git    
    Repositories    

 Advance

Name: ref
Refspec : +refs/tags/*:refs/remotes/origin/tags/* 

 Branches to build  
 Branch Specifier (blank for 'any') : v0.9.5.2 
```

![在此处输入图像描述](../Images/af028a9e82082d1df1374cf46f0c802e.png)

Jenkins 日志确认它正在从标签中获取源代码

签出修订版`0b4d6e810546663e931cccb45640583b596c24b9`(v0.9.5.2)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-07-16T22:42:07.087

我将 Advanced->Refspec 字段设置为`refs/tags/[your tag name]`. 这似乎比 Refspec 的其他各种建议更简单，但对我来说效果很好。

**更新 23/7/2014** - 实际上，经过进一步测试，事实证明这并没有按预期工作。看来 HEAD 版本仍在检查中。请将此作为已接受的答案撤消。通过关注此[线程](https://stackoverflow.com/a/22747145/251745)（3 月 30 日）中**[gotgenes](https://stackoverflow.com/users/38140/gotgenes)**的帖子，我最终得到了一个可行的解决方案。那篇文章中提到的不必要触发构建的问题对我来说不是问题，因为我的工作是从上游工作触发的，而不是轮询 SCM。

**更新 2018 年 4 月**- 请注意，这确实适用于一个人，并同意 Jenkins 文档。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-12-02T08:27:01.610

在最新的 Jenkins（1.639 及更高版本）中，您可以：

1.  只需在“要构建的分支”字段中指定标签名称。
2.  在参数化构建中，您可以在同一字段“要构建的分支”（即 ${Branch_to_build}）中使用参数作为变量。
3.  你可以安装[Git 参数插件](https://wiki.jenkins-ci.org/display/JENKINS/Git+Parameter+Plugin "Git 参数插件")，它会通过列出所有可用的分支和标签来为你提供功能。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-07-24T05:46:57.613

我可以通过设置 Refspec 和 Branch Specifier 来让 Jenkins 构建标签，如[本文](http://erics-notes.blogspot.be/2013/05/jenkins-build-latest-git-tag.html)所述。

我还必须设置存储库名称（在我的情况下为“来源”），以便我可以在 Refspec 中引用它（否则它显然会使用随机生成的名称）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-04-18T09:28:12.197

我最后做的是：

*   创建了一个新分支`jenkins-target`，并让詹金斯跟踪它
*   从我想要构建的任何分支或标签合并到`jenkins-target`
*   一旦构建工作，测试通过等，只需从`jenkins-target`分支创建一个标签

我不确定这是否适合每个人，我的项目很小，没有太多标签和东西，但它很容易做到，不必乱用 refspecs 和参数和东西 :-)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-07-25T16:08:56.460

您甚至可以构建标签类型，例如`1.2.3-alpha43`，使用通配符：

**参考规格：** `+refs/tags/*:refs/remotes/origin/tags/*`

**分支说明符：** `origin/tags/1.2.3-alpha*`

您也可以勾选“*将更改推送到 GitHub 时构建*”以触发推送，但您必须在 webhook中添加**“创建”操作**

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-02T19:45:36.693

在这里添加我的两分钱，因为我没有看到在 Jenkins 中使用“使用参数构建”选项的答案。

在这里，我将 Jenkins CI 浏览器控制台用于项目 starwars_api，并且我能够直接使用“带参数构建”和值 *refs/tags/tag-name进行构建*

1.  选择“使用参数构建”选项。
2.  在框中添加值作为“refs/tags/tag_142”（对于我的示例，tag_name = tag_142）

[使用 ref 标签名称构建](https://i.stack.imgur.com/sTHoj.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-09T10:14:49.367

我找到了解决这个问题的最佳方法，你应该使用 GitSCM 类而不是 git 类：

```
stages {
        stage('SCM') {
            steps {
                script {
                    wrap([$class: 'BuildUser']) {
                        currentBuild.displayName = "#${BUILD_NUMBER} - ${env.BUILD_USER} --> Build from branch ${BRANCH}"
                        slackSend channel: "#jenkins-build", color: "#02fe21", message: "${JOB_NAME} started by ${env.BUILD_USER} : #${BUILD_NUMBER} --> Build from ${BRANCH} branch with ${TAG} TAG"
                    }
                }
                checkout(
                        changelog: false, poll: false, scm: [
                        $class           : 'GitSCM',
                        branches         : [
                                [name: "$BRANCH"],
                        ],
                        userRemoteConfigs: [
                                [
                                        url: "<YOUR-GIT-URL>/${REPOSITORY}.git", credentialsId: '<YOUR-CREDENTIAL>'
                                ],
                        ],
                ])
            }
        } 
```

# asp.net-mvc - 使用存储库模式时测试域

> ID：10195903
> 
> 赞同：0
> 
> 时间：2012-04-17T17:17:53.877
> 
> 标签：asp.net-mvc, unit-testing, tdd

我对单元测试 (TDD) 感到很困惑。我有一个要测试的基本存储库模式，但我不确定我是否正确地做事。在这个阶段，我正在测试我的域，而不是担心控制器和视图。为了简单起见，这里有一个演示项目。

班级

```
public class Person
{
    public int PersonID { get; set; }
    public string Name{ get; set; }
} 
```

界面

```
public interface IPersonRepository
{
    int Add(Person person);
} 
```

具体的

```
public class PersonnRepository : IPersonRepository
{

    DBContext ctx = new DBContext();

    public int Add(Person person)
    {
        // New entity
        ctx.People.Add(person);
        ctx.SaveChanges();
        return person.id;

    }
} 
```

我已将 NUnit 和 MOQ 添加到我的测试项目中，并想知道如何正确测试功能。

我不确定它是否正确，但是在阅读了一些博客之后，我最终创建了一个 FakeRepository，但是如果我基于此进行测试，那如何验证我的实际界面？

```
public class FakePersonRepository
{

    Dictionary<int, Person> People = new Dictionary<int, Person>();

    public int Add(Person person)
    {
        int id = People.Count + 1;
        People.Add(id, person);
        return id;
    }
} 
```

然后用

```
 [Test]
    public void Creating_A_Person_Should_Return_The_ID ()
    {

        FakePersonRepository repository = new FakePersonRepository();

        int id = repository.Add(new Person { Name = "Some Name" });

        Assert.IsNotNull(id);

    } 
```

我是否接近在正确的庄园进行测试？

我想在将来测试诸如不传递名称会导致错误等的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:34:05.147

> 我是否接近在正确的庄园进行测试？

恐怕你不是。拥有接口的想法是，它允许您解耦使用存储库（例如您的控制器）的其他代码，并能够单独对其进行单元测试。因此，假设您有以下要进行单元测试的控制器：

```
public class PersonController : Controller
{
    private readonly IPersonRepository _repo;
    public PersonController(IPersonRepository repo)
    {
        _repo = repo;
    }

    [HttpPost]
    public ActionResult Create(Person p)
    {
        if (!ModelState.IsValid)
        {
            return View(p);
        }

        var id = _repo.Add(p);
        return Json(new { id = id });
    }
} 
```

请注意控制器如何不依赖于特定的存储库实现。所有需要的是这个存储库实现给定的合同。现在我们可以在单元测试中使用 Moq 之类的模拟框架来提供一个虚假的存储库，并让它按照我们喜欢的方式运行，以便测试`Create`操作中的 2 个可能路径：

```
[TestMethod]
public void PersonsController_Create_Action_Should_Return_View_And_Not_Call_Repository_If_ModelState_Is_Invalid()
{
    // arrange
    var fakeRepo = new Mock<IPersonRepository>();
    var sut = new PersonController(fakeRepo.Object);
    var p = new Person();
    sut.ModelState.AddModelError("Name", "The name cannot be empty");
    fakeRepo.Setup(x => x.Add(p)).Throws(new Exception("Shouldn't be called."));

    // act
    var actual = sut.Create(p);

    // assert
    Assert.IsInstanceOfType(actual, typeof(ViewResult));
}

[TestMethod]
public void PersonsController_Create_Action_Call_Repository()
{
    // arrange
    var fakeRepo = new Mock<IPersonRepository>();
    var sut = new PersonController(fakeRepo.Object);
    var p = new Person();
    fakeRepo.Setup(x => x.Add(p)).Returns(5).Verifiable();

    // act
    var actual = sut.Create(p);

    // assert
    Assert.IsInstanceOfType(actual, typeof(JsonResult));
    var jsonResult = (JsonResult)actual;
    var data = new RouteValueDictionary(jsonResult.Data);
    Assert.AreEqual(5, data["id"]);
    fakeRepo.Verify();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:27:00.517

您需要通过为其提取接口来使 DBContext 可注入：

```
public interface IDBContext{
   IList<Person> People {get;}  // I'm guessing at the types
   void SaveChanges();
   //      etc.
} 
```

然后将其注入您的具体类：

```
public class PersonRepository : IPersonRepository
{

    IDBContext ctx;

    public PersonRepository(IDBContext db) {
       ctx = db;
    }

    public int Add(Person person)
    {
        // New entity
        ctx.People.Add(person);
        ctx.SaveChanges();
        return person.id;

    }
} 
```

您的测试将如下所示：

```
[Test]
public void Creating_A_Person_Should_Return_The_ID ()
{

    Mock<IDBContext> mockDbContext = new Mock<IDBContext>();
    // Setup whatever mock values/callbacks you need

    PersonRepository repository = new PersonRepository(mockDbContext.Object);

    int id = repository.Add(new Person { Name = "Some Name" });

    Assert.IsNotNull(id);

    // verify that expected calls are made against your mock
    mockDbContext.Verify( db => db.SaveChanges(), Times.Once());
   //... 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T12:24:58.203

我个人会考虑为此编写一个“集成测试”，即一个命中真实（ish）数据库的测试，因为您的数据访问层不应包含任何使隔离测试值得的逻辑。

在这种情况下，您将需要一个数据库启动并运行。这可能是已经在某处设置的开发人员数据库，或者是作为测试安排的一部分启动的内存数据库。

这样做的原因是我发现 DAL 的（纯）单元测试通常最终证明您可以使用模拟框架等等，并且最终不会让您对您的代码充满信心。

如果您对单元测试完全陌生，并且手头没有大学来帮助您设置 DAL 测试所需的环境，那么我建议您暂时离开测试 DAL 并专注于业务逻辑，因为这是您需要的地方将为您带来最大的收益，并使您更容易了解测试将如何帮助您。

# xcode - Xcode 项目通过云服务同步

> ID：10195905
> 
> 赞同：2
> 
> 时间：2012-04-17T17:17:57.607
> 
> 标签：xcode, git

我正在两台不同的 Mac 上开发 iOS 应用程序。我在 xcode 中有一个本地 git repo 设置。每次切换 Mac 时，我都会从备份云服务 SugarSync 下载最新的 xcode 项目文件夹。SugarSync 会自动将我对项目所做的任何更改上传到云端。

这是不稳定的，还是只是一种不好的做法？有没有更好的方法来为一个开发人员在多台计算机上构建项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:22:16.233

我建议使用 github 来做这样的事情。您可以从一台机器上推动并从另一台机器上拉动将完成您现在正在做的同样的事情。

但是做你现在正在做的事情应该仍然有效，我过去对 Dropbox 做过同样的事情。

# regex - VB.NET 使用正则表达式验证电子邮件

> ID：10195914
> 
> 赞同：4
> 
> 时间：2012-04-17T17:18:24.653
> 
> 标签：regex, vb.net, validation

我尝试实现一个相当简单的电子邮件验证功能，即使输入是有效的电子邮件，它似乎也会返回错误匹配。我已经搜索了现有正则表达式的任何问题，但它似乎是正确的。

即使匹配返回错误值，程序也会进入下一个验证级别（它不应该这样做）。

这是电子邮件验证功能。

```
Function EmailAddressChecker(ByVal emailAddress As String) As Boolean
        Dim regExPattern As String = "^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$"
        Dim emailAddressMatch As Match = Regex.Match(emailAddress, regExPattern)
        If emailAddressMatch.Success Then
            Return True
        Else
            Return False
        End If
End Function 
```

对于调用电子邮件验证功能的表单验证。

```
If (String.IsNullOrEmpty(EmailTextBox.Text) OrElse EmailAddressChecker(EmailTextBox.ToString)) Then
            MessageBox.Show("Please enter a valid email addresss")
            Return False
End If 
```

对所有这些的调用发生在单击事件上，该事件触发级联的 If 语句检查是否所有字段都已设置。

跳过一大块代码，点击事件询问“AreFieldsSet <> True”是否。“AreFieldsSet”函数内部包含多个输入的所有验证；其中之一是电子邮件验证 if 语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:23:05.670

电子邮件是大写的吗？如果他们不是，他们将不匹配。

如果要修改 Regex 使其不区分大小写，请使用以下命令：

```
"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:26:10.693

要验证您需要使用 Regex 对象的 IsMatch 函数的电子邮件地址，它会评估条目电子邮件地址是否有效。

```
Function EmailAddressChecker(ByVal emailAddress As String) As Boolean
   Dim r As System.Text.RegularExpressions.Regex = Nothing
    Dim regExPattern As String = "^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$"

    If r.IsMatch(emailAddress ,regExPattern ) Then
        Return True
    Else
        Return False
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T10:22:05.840

您可以尝试使用此代码进行表单验证`If (String.IsNullOrEmpty(EmailTextBox.Text) OrElse EmailAddressChecker(EmailTextBox.ToString)<>true) Then MessageBox.Show("Please enter a valid email addresss") Return False End If`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T13:03:39.800

```
Public Shared Function ValidEmailAddress(ByVal emailAddress As String, ByRef errorMessage As String) As Boolean    

       If emailAddress.IndexOf("@") > -1 Then
        If (emailAddress.IndexOf(".", emailAddress.IndexOf("@")) > emailAddress.IndexOf("@")) AndAlso emailAddress.Split(".").Length > 0 AndAlso emailAddress.Split(".")(1) <> "" Then
            errorMessage = ""
            Return True
        End If
    End If      
    Return False
End Function 
```

# python - Python：urllib2.HTTPError：HTTP 错误 401：未经授权

> ID：10195915
> 
> 赞同：10
> 
> 时间：2012-04-17T17:18:28.463
> 
> 标签：python, authentication

我试图加载一个网页，但我遇到了这个问题。我确实有用户名和密码，但我不知道如何在 python 代码中使用它们。我查了python教程，这就是我写的：

```
import urllib2

password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
username = 'user'
password = 'pass'
top_level_url = "www.something.com:80"
password_mgr.add_password(None, top_level_url, username, password)
handler = urllib2.HTTPBasicAuthHandler(password_mgr)
opener = urllib2.build_opener(handler)
opener.open('http://www.something.com/h/h.html')
urllib2.install_opener(opener)
response = urllib2.urlopen()
page = response.read()
print page 
```

哪里不对了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-22T18:48:07.157

这是工作代码

```
import urllib2

url = 'http://www.abc.com/index.html'
username = 'user'
password = 'pass'
p = urllib2.HTTPPasswordMgrWithDefaultRealm()

p.add_password(None, url, username, password)

handler = urllib2.HTTPBasicAuthHandler(p)
opener = urllib2.build_opener(handler)
urllib2.install_opener(opener)

page = urllib2.urlopen(url).read() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-18T00:19:06.700

我认为你可以使用 requests 模块，这会让你更容易。

```
import requests
username = 'user'
password = 'pass'
url = 'http://www.example.com/index.html'
r = requests.get(url, auth=(username, password))  
page = r.content
print page 
```

# java - Apache Velocity：转义字符不起作用

> ID：10195919
> 
> 赞同：2
> 
> 时间：2012-04-17T17:18:39.383
> 
> 标签：java, templates, velocity

我正在使用 Velocity 生成 java 代码，但我在模板中遇到了以下行的问题：

```
return Marshal$sdo.getName().dynamicSize(this); 
```

所需的输出是：

```
return MarshalSomeClass.dynamicSize(this); 
```

在这种情况下，VLT 仅限于“$sdo.getName()”，但尾随的“.” 导致它不评估 VLT 部分。

当我试图逃避“。” （例如`$sdo.getName()\.dynamicSize`）我得到以下输出：

```
return MarshalTestTypesFile\.dynamicSize(this); 
```

我试过分配“。” 到 VLT 变量并用花括号将其包裹起来，然后打印花括号。我已经尝试过`{$sdo.getName()}`并且遇到了同样的问题。我已经尝试了所有其他的逃跑技巧，但都无济于事。看起来应该很简单，但我很难过。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:27:02.727

只需使用带有大括号的正式 VTL 表示法：

```
return Marshal${sdo.getName()}.dynamicSize(this); 
```

# c# - 检查数组中的双重预订

> ID：10195924
> 
> 赞同：0
> 
> 时间：2012-04-17T17:19:03.560
> 
> 标签：c#, arrays

好的，我的项目是为音乐比赛创建活动组织者。基本上，我获取输入数据，例如大约 400 个条目的列表，然后按房间号和类型输出到几个单独的 Excel 表中。问题是，当将事件分配给一个数组时，（我为每个房间都有一个单独的数组，所有数组都包含在一个列表中）我需要检查并修复伴奏是否在同一个时间段被双重预订。或者本质上，如果两个不同的数组对数组 [i] 具有相同的伴奏值

想法？请尽量解释清楚，我是自学的，只有一点经验

```
 private void assignEvents()
    {
    // assign every event in order
    // check accompanists for no double-books
        foreach (Event[] room in roomList)
        {
            int i = 0;
            foreach (Event ev in eventList)
            {
                if (ev.Type == room[0].Type)
                {
                    room[i] = ev;
                    i++;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:36:43.597

你可以像 Tejs 建议的那样用 LINQ 来做，但我会走另一条路，因为你正在设计一个组织者，你可能需要额外的信息（例如，显示伴奏者的日程安排）。我会有一份所有伴奏者的列表，其中包含他们所有预订的排序数组（基本上是他们的日程安排）。然后，您可以使用一个功能来检查每个新预订是否与预订中的每个伴奏者存在冲突（在预订数组中），如果没有，则继续将预订添加到伴奏者的日程表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:52:56.513

如果我理解正确，您必须比较每列的值。我建议通过从您的实际集合类型派生来创建您自己的`RoomList`集合类，并为其添加迭代列的可能性

```
public class RoomList : List<Event[]>
{
    public IEnumerable<Event> TimeSlot(int columnIndex)
    {
        foreach (Event[] events in this) {
            if (events != null && columnIndex < events.Length) {
                yield return events[columnIndex];
            }
        }
    }
} 
```

然后您可以使用 LINQ 获得双重预订

```
RoomList roomList = new RoomList();
// ...
for (int slot = 0; slot < roomList[0].Length; slot++) {
    var doubleBooked = roomList.TimeSlot(slot)
        .GroupBy(e => e.Type)
        .Where(g => g.Count() > 1);
    if (doubleBooked.Any()) {
        Console.WriteLine("Doubly booked accompanists in slot {0}", slot);
        foreach (var accompanistGroup in doubleBooked) {
            Console.WriteLine("    {0}", accompanistGroup.Key);
        }
    }
} 
```

# nhibernate - nhibernate 和 transactionscope 事务自发中止

> ID：10195925
> 
> 赞同：1
> 
> 时间：2012-04-17T17:19:04.423
> 
> 标签：nhibernate, transactionscope, msdtc, distributed-transactions

我正在一个大型应用程序中使用 Nhibernate 和 TransactionScope。该应用程序应该修改 3 个数据库并支持它们之间的分布式事务。这是我每次想在分布式事务中查询或执行数据库上的某些 sql 时调用的代码：

```
IDbConnection connection = new SqlConnection(connectionString);
connection.Open();
 ISession session = SessionFactory.OpenSession(connection); 
```

这是执行必要操作后调用的代码

```
IDbConnection sqlConnection = session.Connection;
if (sqlConnection != null && sqlConnection.State == ConnectionState.Open)
   sqlConnection.Close();
session.Dispose(); 
```

当我执行 update-insert-delete 语句时，我还将代码包装在其中：

```
using (var transaction = session.BeginTransaction())
{  //code here

transaction.Commit();} 
```

我认为这是非常标准的东西。现在......我在这个 using 块内执行这些操作：

```
using (TransactionScope scope = new TransactionScope())
{
//code here
scope.Complete();
} 
```

我的问题是我的事务在启动后大约 6 秒偶尔被中止（Transaction.Current.TransactionInformation.Status 变为中止）。

这是来自我的分布式事务协调器的跟踪：

```
pid=6296       ;tid=13300      ;time=04/17/2012-19:34:29.430   ;seq=1          ;eventid=TRANSACTION_MANAGER_STARTED_2            ;;"TM Identifier='(null)                                            '" ;"MS DTC started with the following settings: Security Configuration (OFF = 0 and ON = 1): Network Administration of Transactions = 0, Network Clients = 1, Inbound Transactions = 1, Outbound Transactions = 1, Transaction Internet Protocol (TIP) = 0, XA Transactions = 0, MSDTC RPC Security = Mutual Authentication Required, Account = NT AUTHORITY\NetworkService, Firewall Exclusion = 0, Transaction Bridge Installed = 0, Filtering duplicate events = 1."
pid=6296       ;tid=13300      ;time=04/17/2012-19:34:29.430   ;seq=2          ;eventid=TRACE_SETTINGS                           ;;"TM Identifier='(null)                                            '" ;"Trace Configuration (OFF = 0 and ON = 1): Tracing Of DTC = 1, Tracing Of Transactions = 1, Tracing Of Aborted Transactions = 1, Tracing Of Long-Lived Transactions = 1, Tracing Of All Transactions = 0, Max Limit on Memory Buffers = 0."
pid=6296       ;tid=11372      ;time=04/17/2012-19:35:19.496   ;seq=3          ;eventid=CHECKPOINTING_STOPPED                    ;;"TM Identifier='(null)                                            '" ;"MSDTC is suspending the checkpointing of transactions due to lack of activity"
pid=6296       ;tid=11372      ;time=04/17/2012-19:35:19.496   ;seq=4          ;eventid=TRACING_STOPPED                          ;;"TM Identifier='(null)                                            '" ;"MSDTC is suspending the tracing of long - lived transactions due to lack of activity"
pid=6296       ;tid=10520      ;time=04/17/2012-19:36:31.191   ;seq=5          ;eventid=TRACING_STARTED                          ;;"TM Identifier='(null)                                            '" ;"MSDTC is resuming the tracing of long - lived transactions"
pid=6296       ;tid=10520      ;time=04/17/2012-19:36:31.212   ;seq=6          ;eventid=TRANSACTION_BEGUN                        ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"transaction has begun, description :'user_transaction'"
pid=6296       ;tid=10520      ;time=04/17/2012-19:36:31.212   ;seq=7          ;eventid=RM_ENLISTED_IN_TRANSACTION               ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"resource manager #1001 enlisted as transaction enlistment #1\. RM guid = 'b9290b2d-9e1d-43ed-a5f3-e417f9b17906'"
pid=6296       ;tid=8016       ;time=04/17/2012-19:36:36.141   ;seq=8          ;eventid=RECEIVED_ABORT_REQUEST_FROM_BEGINNER     ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"received request to abort the transaction from beginner"
pid=6296       ;tid=8016       ;time=04/17/2012-19:36:36.141   ;seq=9          ;eventid=TRANSACTION_ABORTING                     ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"transaction is aborting"
pid=6296       ;tid=8016       ;time=04/17/2012-19:36:36.141   ;seq=10         ;eventid=RM_ISSUED_ABORT                          ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"abort request issued to resource manager #1001 for transaction enlistment #1"
pid=6296       ;tid=8016       ;time=04/17/2012-19:36:36.219   ;seq=11         ;eventid=RM_ACKNOWLEDGED_ABORT                    ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"received acknowledgement of abort request from the resource manager #1001 for transaction enlistment #1"
pid=6296       ;tid=8016       ;time=04/17/2012-19:36:36.219   ;seq=12         ;eventid=TRANSACTION_ABORTED                      ;tx_guid=5c61419a-eec2-49c1-aaa1-007645a72e32     ;"TM Identifier='(null)                                            '" ;"transaction has been aborted" 
```

有谁知道我做错了什么以及如何防止我的交易被中止？先感谢您。

**更新 1：** 如果我在实例化 transactionscope 对象后立即打开 2 个会话和 2 个数据库，那么我会收到上述错误。如果我只是打开一个数据库的会话，然后我打开一个会话对其他数据库之一，我会收到以下错误：

```
The PROMOTE TRANSACTION request failed because there is no local transaction active. 
```

当达到 connection.Open() 并且正在向第二个数据库打开连接时，就会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:31:05.170

不知道这是否有助于跨多个数据库我没有在那种情况下测试过这段代码。这是我如何处理事务的示例。

```
 public interface ISessionManager : IDisposable
{
    ISession Session { get; set; }
    ISession GetSession();
}

public class SessionManager : ISessionManager
{
    private readonly ISessionFactory _sessionFactory;
    private TransactionScope _scope;
    public SessionManager(ISessionFactory sessionFactory)
    {
        _sessionFactory = sessionFactory;
    }

    #region ISessionManager Members

    public ISession Session { get; set; }

    public ISession GetSession()
    {
        if (Session == null)
        {
            Session = _sessionFactory.OpenSession();
            if (!CurrentSessionContext.HasBind(_sessionFactory))
            {
                _scope = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions {IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted});
                Session.BeginTransaction(IsolationLevel.ReadCommitted);
                CurrentSessionContext.Bind(Session);
            }
        }

        Session = _sessionFactory.GetCurrentSession();
        Session.FlushMode = FlushMode.Never;
        return Session;
    }

    public void Dispose()
    {
        if (CurrentSessionContext.HasBind(_sessionFactory))
        {
            CurrentSessionContext.Unbind(_sessionFactory);
        }
        try
        {
            Session.Transaction.Commit();
            _scope.Complete();
            _scope.Dispose();
            Session.Flush();
        }
        catch (Exception)
        {
            Session.Transaction.Rollback();
            throw;
        }
        finally
        {
            Session.Close();
            Session.Dispose();
        }
    }

    #endregion
} 
```

# android - Android 动画视图进入屏幕，将当前全屏视图推出

> ID：10195926
> 
> 赞同：2
> 
> 时间：2012-04-17T17:19:05.780
> 
> 标签：android, animation, layout

我需要这个用于 API11 之前的项目。

我正在寻找一种从右侧添加视图的方法，这将导致当前的全屏视图向左移动，以允许新视图在屏幕中可见。

新视图大约是屏幕宽度的 1/3，因此这是当前全屏幕视图应该移出屏幕的距离。

我已经厌倦了 TranslateAnimation() 的各种解决方案，虽然我对动画很满意，但我对原始视图中的所有可点击区域都不是应该在的地方有问题。

所以我开始使用布局以正确定位它并使用负边距，但几秒钟后，当一个新的布局请求出现时，视图会弹回原位。在动画结束侦听器上移动视图时，此解决方案也会产生断断续续的效果。

什么是最简单的解决方案，在新视图进入或退出时具有良好的动画效果，并且在布局方面将视图放置在正确的位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T19:02:42.193

由于您使用的是 API11，因此请使用[Animator API](http://developer.android.com/reference/android/animation/Animator.html)。所有视图现在都有相应的设置器和获取器的属性。要将视图向左移到范围之外，请获取屏幕的宽度，然后执行以下操作：

```
View viewToShiftOut = getOutView();
ObjectAnimator outAnim = ObjectAnimator.ofFloat(viewToShiftOut, "x", 0, -widthOfScreen);
outAnim.setDuration(1000);
outAnim.start(); 
```

这会将视图及其内容完全移出屏幕，持续时间为 1 秒（1000 毫秒）。要在它的位置移动一个，请执行以下操作：

```
View viewToShiftIn = getInView();
ObjectAnimator inAnim = ObjectAnimator.ofFloat(viewToShiftIn, "x", widthOfScreen, 0);
inAnim.setDuration(1000);
inAnim.start(); 
```

所有属性、可点击区域等都将跟随视图，因此您将在动画完成时完成。您可以像这样为它们设置动画：

```
View viewToShiftOut = getOutView();
View viewToShiftIn = getInView();
ObjectAnimator outAnim = ObjectAnimator.ofFloat(viewToShiftOut, "x", 0, -widthOfScreen);
ObjectAnimator inAnim = ObjectAnimator.ofFloat(viewToShiftOut, "x", widthOfScreen, 0);
outAnim.setDuration(1000);
inAnim.setDuration(1000);
outAnim.start();
inAnim.start(); 
```

[博文](http://android-developers.blogspot.com/2011/05/introducing-viewpropertyanimator.html)

编辑：我注意到您只想将视图移动 1/3，因此您可以获得每个移动`widthOfScreen/3`.

编辑 2：另一个优点是您可以将它与硬件加速一起使用，而不会出现大多数 3.0+ 平板电脑所具有的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T18:28:55.517

而不是使用 fillAfter 和 fillEnabled，就像您可能正在做的那样，您需要以编程方式更改 AnimationListener 的 onAnimationEnd 中的布局以匹配您所需的最终定位。

要消除闪烁，请在您正在制作动画的 View 上调用 clearAnimation()，也在 onAnimationEnd 中。

# c# - 当我尝试导出到 excel 时，下拉选择页面内的项目

> ID：10195928
> 
> 赞同：1
> 
> 时间：2012-04-17T17:19:08.427
> 
> 标签：c#, asp.net, export-to-excel

我在中继器中有一个 GridView，我正在毫无问题地导出到 Excel。当我尝试使用 DropDown.SelectedValue 使用 RowCreated 事件将其放入 GridView 的标题中时，我总是得到第一项而不是 SelectedValue。有人可以帮我吗？

我有 2 个下拉列表 ddlType 和 ddlYear 并且它总是给我返回第一个项目的值：

```
if (e.Row.RowType == DataControlRowType.Header)
{
    if (ddlType.SelectedValue != "0")
        contador = int.Parse(ddlType.SelectedValue)-1;

    GridViewRow rowHeader = new GridViewRow(0, 0, DataControlRowType.Header, DataControlRowState.Normal);
    string HeaderBackColor = "#EDEDED";
    rowHeader.BackColor = System.Drawing.ColorTranslator.FromHtml(HeaderBackColor);

    Literal newCells = new Literal();
    newCells.Text = ddlYear.SelectedValue+@"</th>" +
     "</tr>" +
     "<tr bgcolor='" + HeaderBackColor + "'>";

    newCells.Text += @"<th colspan='8' style='width:100px' >" + typeA + "</th>" +

     "</tr>" +
     "<tr bgcolor='" + HeaderBackColor + "'>";

    switch (Nav)
    {
        case "0":
            newCells.Text += @"<th colspan='2' style='width:80px' >item1</th>
                               <th colspan='2' style='width:80px'>item2</th> 
                               <th colspan='2' style='width:80px'>item3</th>
                               <th colspan='2' style='width:80px'>tem4</th>";
            break;
        case "1":
            newCells.Text += @"<th colspan='2' style='width:80px' >item1</th>";
            break;
        case "2":
            newCells.Text += @"<th colspan='2' style='width:80px'>item2</th>";
            break;
        case "3":
            newCells.Text += @"<th colspan='2' style='width:80px'>item3</th>";
            break;
        case "4":
            newCells.Text += @"<th colspan='2' style='width:80px'>item4</th>";
            break;

    }

    newCells.Text += @"</tr><tr bgcolor='" + HeaderBackColor + "'>";

    if(Nav=="0")
        newCells.Text += @"<th>N</th>
                          <th>E</th>

                          <th>N</th>
                          <th>E</th>

                          <th>N</th>
                          <th>E</th>

                          <th>N</th>
                          <th>E";
    else
        newCells.Text += @"<th>N</th>
                           <th>E";

    TableCellCollection cells = e.Row.Cells;
    TableHeaderCell headerCell = new TableHeaderCell();

    headerCell.RowSpan = 4;
    headerCell.Controls.Add(newCells);

    headerCell.BackColor = System.Drawing.ColorTranslator.FromHtml("#6495ED");
    headerCell.ForeColor = System.Drawing.ColorTranslator.FromHtml("#FFF");

    rowHeader.Cells.Add(headerCell);
    rowHeader.Visible = true;

    ((GridView)sender).Controls[0].Controls.AddAt(0, rowHeader);
} 
```

我正在使用以下方法导出到 Excel：

```
string attachment = "attachment; filename=Contacts.xls";
Response.ClearContent();
Response.AddHeader("content-disposition", attachment);
Response.ContentType = "application/ms-excel";
StringWriter sw = new StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);
MyRepeater.RenderControl(htw);

Response.Write(sw.ToString());
Response.End(); 
```

# templates - 如何遍历scala模板中的flash元素？

> ID：10195929
> 
> 赞同：4
> 
> 时间：2012-04-17T17:19:11.393
> 
> 标签：templates, scala, playframework-2.0

我很难将一些模板从 1.2.4 转换为 2.0。

到目前为止，我设法遍历了所有 flash 元素，但我想分别获取 Key 和 Message （@msgKey 包含一个列表，我不知道如何拆分它:/) => `(success, Your data has been updated)`。

一点帮助将不胜感激！:)

这是原始代码：

```
#{if flash.data.size() > 0}
    #{list items:flash.data, as:'msg'}
        #{if msg.key.substring(0, 4).equals('info')}#{set msg_type:'info' /}#{/if}
        #{if msg.key.substring(0, 4).equals('succ')}#{set msg_type:'success' /}#{/if}
        #{if msg.key.substring(0, 4).equals('warn')}#{set msg_type:'warning' /}#{/if}
        #{if msg.key.substring(0, 4).equals('erro')}#{set msg_type:'error' /}#{/if}
        <div class="alert alert-${msg_type}" data-dismiss="alert">  
            <a title="Close that message" class="close">×</a>
            ${msg.value.raw()}
        </div>
    #{/list}
#{/if} 
```

这是新的：

```
@if(!flash.isEmpty()) {
    @for(msgKey <- flash) { 
        <div class="alert alert-@msgKey" data-dismiss="alert">      
            <a title="@Messages("misc.message.close")" class="close">×</a>
            @msgKey
        </div>
    }
} 
```

感谢您的帮助，我很感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T21:41:02.967

除了[Marius](https://stackoverflow.com/users/772743/marius) [解决方案](https://stackoverflow.com/a/10196899/53013)，您还可以这样写：

```
@if(!flash.isEmpty()) {
    @for((msgKey, msgValue) <- flash) { 
        <div class="alert alert-@msgKey" data-dismiss="alert">      
            <a title="@Messages("misc.message.close")" class="close">×</a>
            @msgKey
        </div>
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T18:29:40.740

闪存中的数据是一个[Map](http://www.scala-lang.org/api/current/index.html#scala.collection.Map)，对其进行迭代会产生一个[由两个元素组成的元组](http://www.scala-lang.org/api/current/index.html#scala.Tuple2)，即键和值。您可以使用 访问键，使用 访问`@msgKey._1`值`@msgKey._2`。

# deployment - 为什么调试时我的项目的程序集从包中丢失？

> ID：10195931
> 
> 赞同：8
> 
> 时间：2012-04-17T17:19:16.540
> 
> 标签：deployment, sharepoint-2010, assembly-resolution, wsp, feature-receivers

我有一个 SharePoint 项目，我已经调试了一段时间，没有出现任何问题。

今天我在项目的唯一功能中添加了一个功能接收器。我还没有更改 Visual Studio 默认添加的空接收器类的任何内容。

“Package”命令现在生成一个包含我项目的 DLL 文件的包（如您所料——添加功能接收器不应该对此有任何改变）。

但是，当我调试时，生成的包不*包含*我的项目的 DLL 文件，并且部署工作失败并出现以下错误：

> 部署步骤“添加解决方案”中发生错误：无法为功能“ABC_XYZ 功能”（ID：dca34989-a2f2-413b-b5c4-958e0bbb84ef ).: System.IO.FileNotFoundException: 无法加载文件或程序集 'ABC, Version=1.0.0.0, Culture=neutral, PublicKeyToken=2377fad544a7c307' 或其依赖项之一。该系统找不到指定的文件。文件名：System.Reflection.Assembly._nLoad 中的“ABC，版本 = 1.0.0.0，文化 = 中性，PublicKeyToken = 2377fad544a7c307”（AssemblyName 文件名，字符串代码库，证据 assemblySecurity，程序集 locationHint，StackCrawlMark 和 stackMark，布尔 throwOnFileNotFound，布尔 forIntrospection）在 System.Reflection.Assembly。
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。

删除功能接收器允许我再次调试而不会出现问题，但是一旦我重新添加功能接收器，问题就会再次出现。

我试过清理和重建，然后调试，但除非/直到我删除功能接收器，否则错误不会消失。

为什么当我使用“Package”命令时，我的项目的程序集包含在包中，而当我使用“Start Debugging”命令时没有，添加功能接收器会导致这种情况发生吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-23T14:18:16.270

这个问题的公认答案对我不起作用。

以下确实有效：

> ...在这种特殊情况下，只需更改项目的强键组件即可。如果您之前不必更改它，它位于项目的属性 -> 签名下。在“选择强名称密钥文件”下，选择新建。密码是可选的。

感谢这篇博文：[农场解决方案部署问题](http://thesharepointfarm.com/2013/03/farm-solution-deployment-problems-could-not-load-file-or-assembly/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-17T17:19:43.450

我不知道是什么导致它发生，但是当我手动清除我的 obj 和 bin 目录时问题就消失了。以下是我从问题中引用的状态到使用功能接收器成功调试所遵循的步骤：

1.  移除特征接收器
2.  清洁溶液
3.  关闭 Visual Studio
4.  在 Windows 资源管理器中删除 SharePoint 项目的 obj 文件夹
5.  在 Windows 资源管理器中删除 SharePoint 项目的 bin 文件夹
6.  打开 Visual Studio 并重新添加功能接收器
7.  开始调试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-21T07:38:49.947

我试图在 Visual Studio 中右键单击解决方案 - 属性。在应用程序、程序集信息下，然后我将程序集和文件版本提高了“最小 1”（从 1.0.0.0 到 1.0.0.1）。然后可以将解决方案部署（并主要激活功能）“到 WebApplication”中

# xml - 如何使用 XSLT 或 Xquery 基于 XML 中的属性删除某些节点？

> ID：10195932
> 
> 赞同：0
> 
> 时间：2012-04-17T17:19:22.677
> 
> 标签：xml, xslt, xquery

我需要删除我的 xml 文件中的一些节点，其中包含某些方法以及它出现的顺序，例如这里是输入：

```
<root> 
<node id="a">
    <section id="a_1">
        <item id="0">
            <attribute>
                <color>Red</color>
            </attribute>
        </item>
    </section>

    <section id="a_2">
        <item id="0">
            <attribute>
                <color>Red</color>
            </attribute>
        </item>
    </section>            
</node>

<node id="b">
    <section id="b_1">         
        <user id="b_1b" method="pause">
            <attribute>a</attribute>
        </user>      
        <user id="b_1b" method="run">
            <attribute>a</attribute>
        </user>             
        <user id="b_1a" method="run">
            <attribute>
                <name>John</name>
            </attribute>
        </user>

        <user id="b_1a" method="pause">
            <attribute>a</attribute>
        </user>
    </section>

    <section id="b_1" method="create">   

        <user id="b_1b" method="stop">
            <attribute>a</attribute>
        </user>            
        <user id="b_1a" method="stop">
            <attribute>a</attribute>
        </user>

        <user id="b_1b" method="run">
            <attribute>a</attribute>
        </user>
        <user id="b_1b" method="pause">
            <attribute>a</attribute>
        </user>
    </section>

    <section id="b_2">                
        <user id="b_1a" method="run">
            <attribute>
                <name>John</name>
            </attribute>
        </user>
    </section>
</node> 
```

如果我使用这种方法：

```
<xsl:transform version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:my="http://localhost"
  exclude-result-prefixes="my">

  <!-- Copy everything by default -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match=" user[not(@method eq 'stop' )][not(. is my:last(.))]
  | user[    @method eq 'stop' ][not(. is my:last(.))]
                     | user[not(@method eq 'stop')][my:last(.)/@method eq 'stop']"/>

          <!-- Get the last user for this section & user id -->
          <xsl:function name="my:last">
            <xsl:param name="user"/>
            <xsl:sequence select="($user/../../section[@id eq $user/../@id]
                                              /user   [@id eq $user/@id]
                                  )
                                  [last()]"/>
          </xsl:function>
</xsl:transform> 
```

结果将是：

```
<root>
    <node id="a">
        <section id="a_1">
            <item id="0">
                <attribute>
                    <color>
Red
                    </color>
                </attribute>
            </item>
        </section>
        <section id="a_2">
            <item id="0">
                <attribute>
                    <color>
Red
                    </color>
                </attribute>
            </item>
        </section>
    </node>
    <node id="b">
        <section id="b_1">
        </section>
        <section id="b_1" method="create">
            <user id="b_1a" method="stop">
                <attribute>
a
                </attribute>
            </user>
            <user id="b_1b" method="pause">
                <attribute>
a
                </attribute>
            </user>
        </section>
        <section id="b_2">
            <user id="b_1a" method="run">
                <attribute>
                    <name>
John
                    </name>
                </attribute>
            </user>
        </section>
    </node>
</root> 
```

而预期的输出是：

```
<root>
    <node id="a">
        <section id="a_1">
            <item id="0">
                <attribute>
                    <color>Red</color>
                </attribute>
            </item>
        </section>

        <section id="a_2">
            <item id="0">
                <attribute>
                    <color>Red</color>
                </attribute>
            </item>
        </section>            
    </node>

    <node id="b">
        <section id="b_1">                                           
        </section>

        <section id="b_1" method="create">               
            <user id="b_1a" method="stop">
                <attribute>a</attribute>
            </user>

            **<user id="b_1b" method="run">
                <attribute>a</attribute>
            </user>**
            <user id="b_1b" method="pause">
                <attribute>a</attribute>
            </user>
        </section>

        <section id="b_2">                
            <user id="b_1a" method="run">
                <attribute>
                    <name>John</name>
                </attribute>
            </user>
        </section>
    </node>
</root> 
```

所以这就是订单的运作方式。如果“停止”最后出现，那么任何其他具有相同用户 ID 的其他方法（例如暂停和运行）的节点都将被删除。但如果不是，则将删除本身具有“停止”的节点和“停止”***之前的所有节点。***

这必须发生在相同的部分 id 中，它只会删除用户节点（即使在删除用户节点后部分 id 为空，也要保留部分 id）。希望解释不会令人困惑。

这可以通过仅使用 XSLT 来完成吗？还是我必须使用 xQuery 来遍历每个节点？有人可以启发我吗？非常感谢你。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T02:26:08.233

这是使用 XSLT 2.0 的解决方案。第一条规则是规范恒等变换。第二条规则删除您想要删除的节点（如果我理解正确的话）。每个用户列表（据我现在的理解）由部分 id 和用户 id 的组合标识。

```
<xsl:transform version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:my="http://localhost"
  exclude-result-prefixes="my">

  <!-- Copy everything by default -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- But remove the "stop" method if it's not last for the user/section;
       also, remove other methods where the last one is "stop" -->
  <xsl:template match="user[    @method eq 'stop' ][not(. is my:last(.))]
                     | user[not(@method eq 'stop')][my:last(.)/@method eq 'stop']"/>

          <!-- Get the last user for this section & user id -->
          <xsl:function name="my:last">
            <xsl:param name="user"/>
            <xsl:sequence select="($user/../../section[@id eq $user/../@id]
                                              /user   [@id eq $user/@id]
                                  )
                                  [last()]"/>
          </xsl:function>

</xsl:transform> 
```

如果您对上述工作方式有任何疑问，请告诉我。

# iphone - Testflight 无法识别新设备

> ID：10195933
> 
> 赞同：4
> 
> 时间：2012-04-17T17:19:38.523
> 
> 标签：iphone, ios, provisioning, testflight

我正在尝试将用户添加到 Testflight 构建中。所以我去开发者门户并添加他们的信息（UDID 和设备名称）并将他们的设备添加到配置文件中，重新下载它，并将其应用到项目中。然后我存档到一个 .ipa 文件。但是，当我将 ipa 上传到 Testflight 时，我只看到以前可用的用户，我会要求新 ID 显示在“匿名”或其他内容下。我打开了 .ipa 文件（转换为 zip、解压缩、检查 Payload/embeddedprofile.mobileprovision）并且我添加的设备的 UDID 在那里，所以只是 Testflight 拒绝添加我的设备。Testflight 服务有什么问题，还是我遗漏了什么？我在任何步骤都没有收到任何错误，只是在“邀请测试人员”页面中没有看到新的 UDID（并且用户可以

-Esa

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T03:27:05.633

我完全删除了我的帐户并使用新的电子邮件地址重新开始，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:31:31.683

我敢打赌，当您归档项目以供分发时，您没有应用它。我做了同样的事情，花了我一个小时左右才弄清楚！您需要仔细检查您的 Ad Hoc 配置文件是否在此对话框中被选中。

![在此处输入图像描述](../Images/8f4d72bca8d2b69edb89bcaf5fa86503.png)

# android - 增加路径中的接触点数量

> ID：10195936
> 
> 赞同：0
> 
> 时间：2012-04-17T17:19:49.053
> 
> 标签：android

`path`当用户在屏幕上拖动手指时，我正在绘制一个。但是，如果他做得太快，我的分数就会太低`path`。有什么办法可以在用户绘制`path` *后*增加点数吗？我需要这个，因为我将每个点`path1`与所有点进行比较，`path2`以查看这两个点何时`paths`相交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:28:11.450

如果用户已经完成了路径的绘制，那么您能做的最好的事情就是使用您拥有的点并猜测它们之间的关系。两种流行的猜测方法是在点之间插入线段，看起来非常锯齿，或者您可以使用样条插值，看起来非常平滑，但涉及更复杂的计算。

有关样条插值的更多信息：[http ://en.wikipedia.org/wiki/Spline_interpolation](http://en.wikipedia.org/wiki/Spline_interpolation)

无论您使用线段还是样条线，您都需要通过使用路径 1 线段/样条线和路径 2 线段/样条线的方程式在数学上找到交点。您将有两个方程，两个变量，因此您应该能够求解系统以找到满足两个方程的 x 和 y 的值，从而使该点成为交点。

[http://en.wikipedia.org/wiki/Line-line_intersection](http://en.wikipedia.org/wiki/Line-line_intersection)

# javascript - javascript输入字段到数字

> ID：10195938
> 
> 赞同：0
> 
> 时间：2012-04-17T17:19:58.980
> 
> 标签：javascript, input, numbers

我需要将输入字段转换为数字。因此，如果输入字段为空或包含字母，则数字将为 0。

这不起作用：

```
var trade_gold = document.getElementById('trade_gold').value;
if (trade_gold < 1) { 
```

我也尝试过 parseInt ，似乎无法正常工作。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T17:25:06.443

```
var val = document.getElementById('trade_gold').value,
    trade_gold = parseFloat(val) || 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:25:24.867

```
var value = document.getElementById('trade_gold').value;

value = parseInt(value, 10);

// parseInt will return NaN if the conversion failed
if (isNaN(value)) {
    value = 0;
} 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T17:25:36.013

```
var trade_gold = 0;
try{
    trade_gold = parseInt(document.getElementById('trade_gold').value, 10);
}catch(e){} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T17:30:10.707

这将检查它是否是一个数字，如果不是，则将值更改为 0。

```
var trade_gold = document.getElementById('trade_gold').value;
if (trade_gold.search(/[^0-9]/)>=0)
{
       // not a number
       trade_gold = 0;
} 
```

# iphone - iPhone：持久开发日志模块并用于上传

> ID：10195940
> 
> 赞同：0
> 
> 时间：2012-04-17T17:20:01.897
> 
> 标签：iphone

是否有在任何 iPhone 项目中开发的日志示例？我正在开发一个 iPhone 应用程序，我们希望在某处持久地逐行存储日志字符串，并将其用于上传到我们的服务器等。当我的应用程序在线程下同步时，它应该继续在后台记录。我不知道如何有效地开发它。有人可以分享我的链接或样本吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T02:52:03.207

[NSLogger](https://github.com/fpillet/NSLogger)

NSLogger 是一个高性能的日志记录实用程序，它显示运行在 Mac OS X 或 iOS (iPhone OS) 上的客户端应用程序发出的跟踪。它取代了您通常的基于 NSLog() 的跟踪，并提供了强大的附加功能，如显示过滤、图像和二进制日志记录、跟踪缓冲、时间信息等。

NSLogger 功能总结：

*   使用 Mac OS X 桌面查看器查看日志，接受来自本地网络客户端（使用 Bonjour）或直接通过 Internet 连接的远程客户端的连接
*   在线（应用程序运行并连接到 NSLogger）和离线（保存的日志）日志查看
*   缓冲内存或文件中的所有跟踪，在获取连接时将它们发送到查看器
*   安全日志记录（默认情况下连接使用 SSL）
*   高级日志过滤选项
*   保存查看器日志以共享它们和/或稍后查看它们
*   将日志导出到文本文件
*   打开未直接连接到日志查看器的客户端应用程序带回的原始缓冲跟踪文件

# css - VS2010 不断删除 CSS 中的非 IE 样式并将版本从 3.0 降级到 2.1

> ID：10195951
> 
> 赞同：1
> 
> 时间：2012-04-17T17:20:37.263
> 
> 标签：css, visual-studio-2010

我在 VS2010 中有一个 webApp 项目，它使用 3.0 版的单独 CSS 集。某些类中的某些样式与 IE 无关，以实现 VS 不断删除的跨浏览器兼容性。在我处理项目或 CSS 文件（不是那些类）的某个时候，它似乎在格式化文件并更改类并删除这些样式。这种情况一直在发生，我无法确定是什么原因造成的。

例如，下面的类：

```
.label
{
    font-family: Arial;
    font-size: 10pt;
    text-align: right;
    color: black;
    vertical-align: top;
    padding-left: .5em;

    background-color: #EBEBEB; /* Fallback background color for non supported browsers */  
    background-image: -webkit-gradient(linear, left top, right top, from(#FFFFFF), to(#DAD6E7));  
    background-image: -webkit-linear-gradient(left, #FFFFFF, #DAD6E7);  
    background-image: -moz-linear-gradient(left, #FFFFFF, #DAD6E7);  
    background-image: -ms-linear-gradient(left, #FFFFFF, #DAD6E7);  
    background-image: -o-linear-gradient(left, #FFFFFF, #DAD6E7);  
    background-image: linear-gradient(left, #FFFFFF, #DAD6E7);  
    filter: progid:DXImageTransform.Microsoft.gradient(startColorStr='#FFFFFF', EndColorStr='#DAD6E7', gradientType='1'); /* IE6 - IE9 */
} 
```

变成这样：

```
.label
{
    font-family: Arial;
    font-size: 10pt;
    text-align: right;
    color: black;
    vertical-align: top;
    padding-left: .5em;

    background-color: #EBEBEB; /* Fallback background color for non supported browsers */  
    background-image: linear-gradient(left, #FFFFFF, #DAD6E7);  
} 
```

并剥离我的风格。此外，在我不久前明确设置为 3.0 后，样式表工具栏中的 CSS 版本显示为 2.1。

知道为什么 VS2010 不断将我的 CSS 版本降级到 2.1 并删除非 IE 样式吗？

# python - 可以验证/lint/bleach 由 Google Analytics 或 Piwik 等分析/跟踪网站提供的一段代码

> ID：10195955
> 
> 赞同：0
> 
> 时间：2012-04-17T17:20:56.010
> 
> 标签：python, django, validation, analytics, tracking

我在网站的管理界面中提供了一个区域，供网站管理员放置来自外部分析工具的跟踪代码。本质上，这些代码必须“按原样”包含，但我担心任何拼写错误都可能导致页面无用、破坏 HTML 等......

有可能（在某种程度上）清理/验证这些代码，所以我至少可以确保 HTML 不会被破坏？

我正在使用 Python/Django，但我猜 Django 部分与这个主题有些无关。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:32:44.023

最简单的方法是从跟踪站点获取代码并对除唯一部分（通常是用户 ID 号）之外的所有内容进行硬编码，为用户提供批准的跟踪器选择（带有单选按钮），然后将它们粘贴到他们的ID，然后在呈现页面时插入该值。如果我没记错的话，博主在通过谷歌账户直接与分析相关联之前就是这样工作的。

# iphone - 强制网络使用

> ID：10195957
> 
> 赞同：9
> 
> 时间：2012-04-17T17:20:59.790
> 
> 标签：iphone, objective-c, ios, wifi

我正在研究以找到在 iOS 上使用强制网络的最佳方式。如果我错了，请纠正我，这似乎是允许用户输入不同的 ssid 和密码，当该网络可用时，这些密码可用于自动登录。如果是这样，完成以下操作的最佳方法是什么，从用户那里读取 ssid 和密码并将他连接到该 wifi 网络，或者甚至可能。

到目前为止，我所做的只是用这个拉出当前连接的网络：

```
NSArray *ifs = (__bridge_transfer id)CNCopySupportedInterfaces();
id info = nil;

for (NSString *ifnam in ifs) {

    NSLog(@"ifnam = %@", ifnam);

    info = (__bridge_transfer id)CNCopyCurrentNetworkInfo((__bridge_retained CFStringRef)ifnam);

    if (info && [info count]) {
        break;
    }
}

NSLog (@"SSID: %@", [ info objectForKey"@"SSID" ]); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T20:45:33.747

“强制网络”就像您在酒店或星巴克中找到的那样，其中 WiFi 连接是开放的，但您需要通过登录或“我接受条件”页面才能连接到任何网站。

通常，当您连接到这样的网络时，IOS 设置应用程序会放置一个 Web 表单来完成登录。CN API 的目的是允许您的应用程序进行身份验证，而不是建立一个 Web 表单。

您的问题是关于从用户那里读取 SSID：这似乎不太有用，因为“设置”应用程序已经允许用户指定任意 SSID，然后使用密码登录。Captive Network API 仅在您的应用程序确切知道如何登录网络时才有用，在这种情况下，它也可以知道 SSID。您可以使用通常的 NSTextField 从用户那里获取密码。

另请注意，只要网络连接，IOS 就不会启动您的应用程序：此 API 仅在您的应用程序已经运行时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T21:34:24.690

我一般用两步过程来处理这个问题。第一个测试是一般的可达性测试，如果没有网络存在则失败。失败时，我会提醒用户需要网络。如果网络存在，作为第二步，我向我的服务器发送请求。如果超时，我会提醒用户检查需要注意的网络连接。

# asp.net - 如何从这个字符串 '01/25/1955' 中获取日期时间？

> ID：10195962
> 
> 赞同：0
> 
> 时间：2012-04-17T17:21:04.143
> 
> 标签：asp.net, datetime, type-conversion

我有以下代码：

```
Dim dtDoM As Nullable(Of DateTime)
If (txtMarriageDate.Text.Trim = "") Then
            dtDoM = Nothing
        Else

            dtDoM = DateTime.ParseExact(txtMarriageDate.Text.Trim + " 00:00:00", "dd/MM/yyyy hh:mm:ss", System.Globalization.CultureInfo.InvariantCulture)
            'dtDoM = Convert.ToDateTime(txtMarriageDate.Text)
        End If 
```

在注释掉的部分，我得到了 FormatException 'String not Recognized as datetime'，而在新代码中，我得到了“System.FormatException = {“日历 System.Globalization.GregorianCalendar 不支持字符串表示的 DateTime。” }"

编辑：回答。不敢相信我忽略了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:24:05.353

您的日期（01/25/1955）是`MM/dd/yyyy`格式，您`dd/MM/yyyy`在格式字符串中使用。

尝试使用这个：`"MM/dd/yyyy hh:mm:ss"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:24:42.507

我认为您的格式字符串错误。`"MM/dd/yyyy hh:mm:ss"`从你的例子来看，你想要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:30:58.890

你把日期和月份颠倒了。这将起作用：

```
dtDoM = DateTime.ParseExact(txtMarriageDate.Text.Trim + " 00:00:00", "MM/dd/yyyy hh:mm:ss", System.Globalization.CultureInfo.InvariantCulture) 
```

# java - Java 中的 Oracle 连接池

> ID：10195967
> 
> 赞同：2
> 
> 时间：2012-04-17T17:21:29.990
> 
> 标签：java, oracle, connection-pooling

我对使用 java 和 oracle db 进行连接池有一些疑问。来自 refreshCache 方法的 oracle 文档

> 当使用 REFRESH_ALL_CONNECTIONS 调用时，缓存中的所有可用连接都将关闭并替换为新的有效物理连接。

短语“缓存中的所有可用连接”是否仅指非活动连接或所有连接（无论活动与否）？

其次，清除了缓存，因此缓存中没有连接，下次我调用 getConnection 方法时，我得到了一个关闭的连接。清除方法可能缺少一些东西吗？

[http://docs.oracle.com/cd/B14117_01/java.101/b10979/conncache.htm](http://docs.oracle.com/cd/B14117_01/java.101/b10979/conncache.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T16:32:05.060

1）Oracle将缓存称为实际的连接池。Oracle 驱动程序还有一些其他的缓存特性，但这不是他们在这里所指的。

2) 每当我设置连接池时，我总是启用从池中借用连接时验证连接的能力。它增加了一点额外的延迟，但它确保我从池中获得有效的连接。

# python - Pyqt 高亮表格行

> ID：10195969
> 
> 赞同：3
> 
> 时间：2012-04-17T17:21:33.233
> 
> 标签：python, pyqt

如何在 pyqt 表格小部件中突出显示一行。我不知道确切的词，但我想在点击行时手动突出显示该行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:38:25.707

在 PyQt 中，要选择并突出显示 QTableWidget 的一行，您需要知道行索引。

使用：

```
tableWidget.selectRow(rowID) 
```

应该为您实现这一目标。但是，如果您的意思是在鼠标悬停/悬停时突出显示一行，您将需要捕捉一个信号（我相信它是`itemActivated`）并操纵 QTableView 项目的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:31:48.057

您的模型（派生）类应为方法中的、等角色`QAbstractTableModel`返回正确的值`Qt::BackgroundColorRole``Qt::ForegroundRole`

```
QVariant data(const QModelIndex & index, int role = Qt::DisplayRole) const = 0 
```

根据您要突出显示的模型行的实际内容。

# facebook - javascript sdk 中的 fql 查询，用于获取特定城市的 facebook 用户

> ID：10195973
> 
> 赞同：1
> 
> 时间：2012-04-17T17:21:41.537
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

我应该选择居住在特定位置或城市的 facebook 用户的用户 ID。我怎么能在 javascript sdk 的 fql 查询中做到这一点？

# cocoa - 如何更改出现 NSWindow 的 NSScreen

> ID：10195977
> 
> 赞同：4
> 
> 时间：2012-04-17T17:21:50.197
> 
> 标签：cocoa, nswindow, nswindowcontroller

我有一个应用程序，它将根据按下的按钮加载几个窗口。除了其中一个之外，所有这些都在 mainScreen（打开主窗口的屏幕）上打开。其中一个（首选项窗口）在第一个屏幕（带有菜单栏的屏幕）上打开。我无法理解它这样做的方式，有没有办法改变 NSWindow 打开的屏幕？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T17:20:03.120

我无法得到 toohtik 的工作答案。我最终做的是继承 NSWindow，然后覆盖 constrainFrameRect:toScreen:。这将自动在应用程序的“主屏幕”上打开新窗口。

```
- (NSRect)constrainFrameRect:(NSRect)frameRect toScreen:(NSScreen *)screen
{
    AppDelegate *delegate = [[NSApplication sharedApplication] delegate];
    return [super constrainFrameRect:frameRect toScreen:delegate.window.screen];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T20:25:41.840

我不知道你为什么会有这种行为，但你可以通过采用 NSScreen 参数的 initWithFrame 方法来改变它。

# qt - 无法投射 qgraphicsitem

> ID：10195980
> 
> 赞同：1
> 
> 时间：2012-04-17T17:22:04.673
> 
> 标签：qt, casting, qgraphicsview, qgraphicsitem

好的，我认为错误可能很明显，但此时我找不到它。

我有：

```
class GraphViewCustom : public QGraphicsView
{
...
protected:
  void wheelEvent(QWheelEvent *event);
} 
```

以及类似的类 GraphSceneCustom（来自 QGraphicsScene）和 GraphPixmapItemCustom（来自 QGraphicsPixmapItem）。在上面的 wheelEvent() 中，我有这样一行：

```
qgraphicsitem_cast(items().first()); 
```

我删除了替换的左侧以提高可读性和减少复杂性。在这条线上我得到

> 没有匹配函数调用 'qgraphicsitem_cast(QGraphicsItem*&)'

我究竟做错了什么？我想这个错误很明显（我最常见的错误是什么——我很少犯难的。但是当我这样做时，它们真的很难）。

是的，我添加了 QGraphicsItem 类的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:30:10.397

qgraphicsitem_cast 定义在`#include <QGraphicsItem>`. 您是否将其包含在相关文件中？

# jquery - Phonegap iphone应用程序

> ID：10195984
> 
> 赞同：0
> 
> 时间：2012-04-17T17:22:24.937
> 
> 标签：jquery, iphone, sql, html, cordova

我目前正在用 HTML 5 和 jquery 构建一个 iPhone 应用程序。获取最新足球赛程和结果的最简单方法是什么，并且最好是免费的？

我想也许是一个 rss 提要然后将它们放入数据库？

以便我以后可以使用它们？

我知道的很模糊，但只是在考虑不同的选择。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T18:45:35.897

我认为 RSS Feeds + Database 是一个不错的选择。

> 您还可以搜索一些为您提供实时数据的 api，以便您可以直接获取它并在您的应用程序中显示它。

# iphone - 如何纠正移动 Safari 中的字体渲染问题？

> ID：10195985
> 
> 赞同：5
> 
> 时间：2012-04-17T17:22:27.793
> 
> 标签：iphone, ipad, mobile-safari, font-face

我一直在移动 Safari 中遇到字体渲染问题（我的 Mac 上的 Safari 渲染良好）。我正在使用 OpenType 字体和 @font-face 选择器，并且一些字符（主要是 's' 和 'c'）看起来比其他字符更薄（非常明显 - 相对于彼此看起来'light' 和其他看起来'bold'。最奇怪的是它只在横向模式下发生。有没有人见过这个？唯一让这个消失的是设置 -webkit-transform: translate3d(0 ,0,0); 在似乎完全错误的主体选择器上，但可能会对问题有所了解。我在另一个网站上遇到过：http: [//openradar.appspot.com/11097956](http://openradar.appspot.com/11097956)。

提前感谢您的帮助，布兰登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:41:42.420

这看起来像您需要的： [修复 Mobile Safari (iPhone) 上的字体大小问题，其中文本呈现不一致且某些字体比其他字体大？](https://stackoverflow.com/questions/5303263/fix-font-size-issue-on-mobile-safari-iphone-where-text-is-rendered-inconsisten) 他们使用此代码来修复它：

```
/* Mobile browsers only */
@media only screen and (max-device-width: 480px) {      
        td#main_box { -webkit-text-size-adjust:100% }               
} 
```

# sql - 前几年和今年的 SQL YTD

> ID：10195990
> 
> 赞同：1
> 
> 时间：2012-04-17T17:22:45.310
> 
> 标签：sql, sql-server

想知道是否有人可以为此提供代码帮助。我想查询数据并获得 2 个条目，一个用于 YTD 上一年，一个用于今年 YTD。

我知道如何做到这一点的唯一方法是使用 where 子句进行 2 个单独的查询。我宁愿不必运行两次查询。

一列名为 DatePeriod 并填充了 2011 YTD 和 2012YTD，如果我可以让它执行 2011YTD、2012YTD、2011Total、2012Total 会更好......尽管猜测这是 4 个查询。

谢谢

编辑：为了帮助清除一些事情：这是在 MS SQL 中编码的。

数据看起来像这样：（非常基本的例子）

```
Date       |   Call_Volume
1/1/2012   |   4 
```

我想要`Call_Volume`总结一下，我有按周分组的查询，还有按月分组的查询。我可以将所有样片都拉入并在 Excel 中执行此操作，但该表有数百万行，所以总是最好减少我的输出大小。

我目前按周/月和年分组，并联合所有所以它的 1 个输出。但这意味着我有 3 个查询访问同一个表，非常痛苦，非常慢，效率不高，这很好，但现在我还需要一个 YTD，所以它要么再多 1 个查询，要么我能找到一种方法将其添加到年度查询中这将是理想的：

所以

```
DatePeriod   |   Sum_Calls
2011 Total   |   40
2011 YTD     |   12
2012 Total   |   45
2012 YTD     |   15 
```

希望这有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:32:30.420

SQL 旨在对***行***进行操作，而不是对***列***进行操作（当然，您选择列，但聚合操作都在行上）。

最标准的方法是这样的：

```
SELECT SUM(your_table.sales), YEAR(your_table.sale_date)
FROM your_table
GROUP BY YEAR(your_table.sale_date) 
```

现在，您将获得记录在案的每一年的一行，您可以处理的年限没有限制。如果您已经按另一个字段分组，那很好；然后，您将在每个组中获得每一年的一行。

然后，您的程序可以遍历行并按照您的喜好组织/渲染它们。

如果您绝对肯定必须有列，那么您将遇到以下问题：

```
SELECT SUM(IF(YEAR(date) = 2011, sales, 0)) AS total_2011,
  SUM(IF(YEAR(date) = 2012, total_2012, 0)) AS total_2012
FROM your_table 
```

如果您以编程方式构建查询，您可以根据需要添加尽可能多的列条件，但我不会指望这种运行非常有效。

（这些示例是使用一些 MySQL 特定的函数编写的。其他引擎也存在相应的函数，但语法会有所不同。）

# android - sequoyah 的编译器错误，但从命令行构建良好

> ID：10195993
> 
> 赞同：1
> 
> 时间：2012-04-17T17:23:01.267
> 
> 标签：android, android-ndk

这真的令人沮丧 - 我可以从命令行构建我的本机代码，但是当我从 eclipse（启用 Sequoyah 插件）构建时，它只是通过简单的编译错误（如找不到标头）......即使当我从命令行构建库时每次我尝试从 Eclipse 运行时，它都会重新构建并再次出现错误 - 我很沮丧，因为我没有找到问题的选择，有人能对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T13:41:50.273

您看到的错误是在 Eclipse 的编辑器找不到的每个标头中带有错误标记的*未解决包含。*当您看到它时会感到困惑，因为预计在安装 Sequoyah 和 ADT 后，将 Sequoyah 配置指向您的 NDK，您将拥有开始编码所需的一切。

有两件事要观察。在您单击 jni 目录中的 C/C++ 文件之一之前，ADT“Android Perspective”中的构建过程将一直有效。打开其中之一后，您将看到错误标记，并且该项目将被标记为包含错误。

第二个观察，当您将项目转换为 C/C++ 透视图或 Sequoyah 的 Android Native 透视图时（显然有两种方法可以给这只猫蒙皮），您将能够围绕 NDK 工具链、包含路径和构建器设置配置项目设置. 您可以在此处将 ndk-build 设置为在每次更改时自动触发。有趣的是，在您单击其中一个 C/C++ 源之前，ndk-build 将正常工作。

所以解决方案，点击[这里] [http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm)你会得到配置的说明CDT 包含路径。您想为 C/C++（或两者之一）设置包含路径，以便访问平台文件夹包含。

例如，我的项目 hello-jni-to-the-world 项目设置为 android-9。所以配置包含路径： android-ndk-r6b/platforms/android-9/arch-arm/usr/include 。现在魔法不会出现，直到您单击应用/保存并且系统会提示您重建索引。

Stackoverflow 上有两到三个其他线程在问同样的问题，我必须找到它们并将它们添加到评论中。基本上，没有明确的答案，而且有很多通常用一个问题来回答一个问题：你有哪个版本的 NDK，你可以发布你的代码，你是否安装了 java，你的计算机是否开启？