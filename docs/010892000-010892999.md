# StackOverflow 问答 10892000-10892999

# gmail - 是否有任何关于只读访问 Google Contacts API 的文档？

> ID：10892000
> 
> 赞同：2
> 
> 时间：2012-06-05T05:22:43.733
> 
> 标签：gmail, google-api, contacts

我想获得对用户 Google 通讯录的只读访问权限。

有另一个 Stackoverflow 成员想要这样做，并收到以下[答案](https://stackoverflow.com/a/10741382/1334875)：

> 是的，有，只需使用[https://www.googleapis.com/auth/contacts.readonly](https://www.googleapis.com/auth/contacts.readonly)作为范围，它会说“查看您的联系人”。

此交流是我可以使用 Google 找到的对 Google 通讯录的只读访问的唯一参考。

简单地使用从中获得的访问令牌尝试从通常的 Google Contacts API（即`https://www.google.com/m8/feeds`）读取失败，权限不足。

同样，在这个新目标上简单地使用 Google Contacts API 会失败并出现 404 错误（例如`https://www.googleapis.com/auth/contacts.readonly/default/full`）。

是否有任何关于如何实际使用此 API 的文档，或者是访问具有完全读写权限的 Google Contacts API 的唯一允许方式？

# java - 让我的程序单独读取 3 行

> ID：10892004
> 
> 赞同：1
> 
> 时间：2012-06-05T05:23:13.777
> 
> 标签：java, java-io, filereader

这是我从文件中读取的程序，但我正在为文件阅读器的讲座而离开，所以我正在准备它。该程序当前读取一行并从中打印出前 3 个值，但它仅适用于文件中的一行。

```
import java.util.*;
import java.io.*;
public class ProcessdatdereFile
{
    public static void main (String[] args)throws IOException{
        List namenum=readM("data/raw.txt");
        dataProcess(namenum);
    }

    public static List readM(String filename)throws IOException{
        Scanner fr=new Scanner(new FileReader(filename));
        List<String>namenum=new ArrayList<String>();
        while(fr.hasNext()){
            namenum.add(fr.next());
        }
        fr.close();
        Collections.sort(namenum,Collections.reverseOrder());
        return namenum;
    }

    public static void dataProcess(List namenum)throws IOException{
        for(int i=0;i<4;i++){
            System.out.printf("%s ",namenum.get(i));
        }
        System.out.println("");
    }
} 
```

raw.txt 包含

```
Mary 45 87 23 76
Joe 34 76 12 78 34 87
Anne 90 5 99 
```

该程序需要在单独的行上打印每个名称和前 3 个分数。欢迎长篇大论。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:46:39.417

你想在这里排序什么。

```
 Collections.sort(namenum,Collections.reverseOrder()); 
```

namenum 是文件中所有单个项目的列表。

```
 Mary 45 87 23 76 
```

此列表中的每个项目都是列表中的单独项目。

您需要使用 nextLine()。对于每一行，您需要跳过第一个标记，即名称并将其余数据转换为整数数组中的行，并对其进行反向排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:55:19.597

```
public static void main (String[] args)throws IOException{
    String filename = "data/raw.txt";
    Scanner fr=new Scanner(new FileReader(filename));
    //reads the line and passes it to another method where it is put into a list
    String line;
    while(fr.hasNextLine()){
        line=fr.nextLine();
        List namenum=readM(line);
        dataProcess(namenum);
    }
    fr.close();        
}

public static List readM(String line)throws IOException{
    Scanner scn=new Scanner(line);
    List<String>namenum=new ArrayList<String>();
    while(scn.hasNext()){
        namenum.add(scn.next());
    }
    Collections.sort(namenum,Collections.reverseOrder());
    return namenum;
} 
```

我更改了这两种方法，以便将它们作为一行处理，而不是文件中的每个字符串。它现在获取每条线并打印出名称和 3 个最高分。

# javascript - 当我将鼠标悬停在图像内的文本上时如何禁用悬停事件？

> ID：10892006
> 
> 赞同：0
> 
> 时间：2012-06-05T05:23:33.777
> 
> 标签：javascript, jquery

我的代码有问题，当我将鼠标悬停在图像上时，图像会变大 50%，并且会在图像上显示文本，但是当我将鼠标悬停在文本上时，图像会进入 mouseout、mouseover 状态，鼠标悬停，鼠标悬停。所以会闪烁很多。当鼠标悬停在图像文本上时，如何禁用此悬停事件？我在文本中尝试过`event.stopPropagation`，但它不起作用。

这是[jsFiddle](http://jsfiddle.net/Z7C4b/)。尝试将鼠标悬停在图像上，然后尝试将鼠标悬停在文本上。这就是我说的效果。我想禁用文本悬停事件。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:08:31.410

我找到了解决方案，

> 我会做这样的事情。不要在 img 元素上使用悬停效果，而是在父元素 $('.imgwall') 上执行此操作，然后仅增加图像执行 $(this).find('img')。和 $(this).find('h2').show()/hide() 显示悬停事件中的文本。

感谢您的关注！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:38:50.233

如果您在文本框内阻止悬停事件，则图像将恢复为小尺寸，因为它仅在悬停时显示较大。

最好将鼠标悬停在 1 个单个元素上，将带有非常大透明边框的文本框置于其中心。

如果可以，请考虑使用[jQuery Zoom](http://www.tripwiremagazine.com/2011/10/jquery-zoom.html)插件。配置插件，这样一旦你在图像上，在放大镜之前添加文本框。

# uiviewcontroller - 如何使用代码更改由 UITabbar 控制器管理的已选择视图控制器？

> ID：10892011
> 
> 赞同：0
> 
> 时间：2012-06-05T05:24:10.237
> 
> 标签：uiviewcontroller, uitabbar

我想通过使用代码更改已删除的视图控制器，而无需点击标签栏。有谁知道如何实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:13:45.437

我只是意识到通过设置选定的索引很容易更改选项卡栏的选定索引。

# git - 勇气：如何区分两个提交之间哪个更新？

> ID：10892014
> 
> 赞同：0
> 
> 时间：2012-06-05T05:24:28.970
> 
> 标签：git, grit

我希望能够区分两个`Grit::Commit`较新的对象。我所说的较新的意思是，如果`commit_A`是 的父母（或父母的父母等）`commit_B`，则`commit_B`较新。这假设`commit_A`和`commit_B`在同一个分支上。

我考虑过使用`Grit::Commit#date()`，但我认为这将是不准确的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:18:46.223

这是我最终实施的。解释见评论。

性能很慢，但使用 repo.git.rev_list（通过 method_missing）时更糟。

```
require 'grit'

module Grit

    class Commit

        # Returns true if any commits in +commits+ are decendants of calling commit. True
        # means that one or more commits in +commits+ are newer.
        def has_decendant_in? *commits 
            total_commits = commits.flatten
            raise ArgumentError "at least one commit required." if total_commits.empty?
            total_commits.each do |commit|
                return true if repo.commits_between(commit.id, id).empty?
            end
            return false
        end

        # Returns an Array of commits which tie for being the newest commits. Ties can
        # occur when commits are in different branches.
        def self.newest *commits
            oldest_commits = []
            total_commits = commits.flatten
            raise ArgumentError "at least one commit required." if total_commits.empty?
            (total_commits).each do |commit|
                if commit.has_decendant_in?(total_commits - [commit])
                    oldest_commits << commit 
                end
            end
            return total_commits - oldest_commits
        end

    end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:21:35.837

以下将对您有所帮助... git log --graph 或者您可以使用 gitk

# javascript - 从产品的 xml 文件中读取特定产品

> ID：10892019
> 
> 赞同：0
> 
> 时间：2012-06-05T05:24:48.350
> 
> 标签：javascript, html, xml

我有一个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<products>
    <product>
        <id>246</id>
        <code>Ash07-001</code>
        <image>C:\BowlPhotos\Thumbs\Ash07-001tmb.jpg</image>
    </product>
    <product>
        <id>247</id>
        <code>Ash07-004</code>
        <image>C:\BowlPhotos\Thumbs\NoBowltmb.jpg</image>
    </product>
    <product>
        <id>248</id>
        <code>Ash07-005</code>
        <image>C:\BowlPhotos\Thumbs\Ash07-005tmb.jpg</image>
    </product>
</products> 
```

并使用以下代码阅读：

```
document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("product");
for (i=0;i<x.length;i++)
{ 
          document.write("<tr><td>");
          document.write(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue);
          document.write("</td><td>");
          document.write(x[i].getElementsByTagName("code")[0].childNodes[0].nodeValue);
          document.write("</td><td>");
          document.write(x[i].getElementsByTagName("image")[0].childNodes[0].nodeValue);
          document.write("</td></tr>");
}
document.write("</table>"); 
```

这可以获取所有文件。

如果我只想要 id 为 247 的产品怎么办？如何将整个产品拉出并仅打印该产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:29:16.280

```
document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("product");
for (i=0;i<x.length;i++)
  { 
          if(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue != 247) continue;
          document.write("<tr><td>");
          document.write(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue);
          document.write("</td><td>");
          document.write(x[i].getElementsByTagName("code")[0].childNodes[0].nodeValue);
          document.write("</td><td>");
          document.write(x[i].getElementsByTagName("image")[0].childNodes[0].nodeValue);
          document.write("</td></tr>");
  }
document.write("</table>"); 
```

您可以编写这样的代码。如果 id 不是 247，它将不会执行显示内容的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:29:33.287

```
var x=xmlDoc.getElementsByTagName("product");
for (i=0;i<x.length;i++)
{ 
  var id= x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue;
  if id="247"
   {
       // print what ever u want
   }
} 
```

# javascript - 如何仅更改博主第一篇文章的 CSS？

> ID：10892025
> 
> 赞同：1
> 
> 时间：2012-06-05T05:25:21.593
> 
> 标签：javascript, html, css, blogs

我只想更改我博客的第一篇文章的 CSS（[digitalsorify](http://www.aakashstore.in)），使它看起来像[赫芬顿邮报](http://www.huffingtonpost.com)而不使用 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:36:25.650

回答标题（使用 CSS）：

```
.wrapfullpost:first-child {
    /* put first post style here */
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T05:46:19.277

你可以这样做：

```
#content-wrapper { padding-top: 400px;}
.wrapfullpost:first-child { position: absolute;margin-top: -400px;} 
```

经过我的操作，这看起来像这个[http://i.stack.imgur.com/lFWQA.png 。](http://i.stack.imgur.com/lFWQA.png)

# objective-c - 如何从多个数组中提取唯一对象

> ID：10892026
> 
> 赞同：4
> 
> 时间：2012-06-05T05:25:22.250
> 
> 标签：objective-c, ios5, nsarray

**编辑：**
我有两个不同的数组，其中包含一些重复的字符串，我想创建一个只有唯一字符串的新数组。

例如，取这两个数组：

```
NSArray *array1 = [[NSArray alloc] initWithObjects:@"a",@"b",@"c",nil]; 
NSArray *array2 = [[NSArray alloc] initWithObjects:@"a",@"d",@"c",nil];

// Result should be an array with objects "b", and "d" 
// since they are the only two that are not repeated in the other array. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T05:54:58.190

**编辑：**

```
// Your starting arrays
NSArray *array1 = [[NSArray alloc] initWithObjects:@"a",@"b",@"c",nil]; 
NSArray *array2 = [[NSArray alloc] initWithObjects:@"a",@"d",@"c",nil];

// Create two new arrays that only contain the objects 
// which are not in the other array:
NSMutableArray *uniqueElementsInArray1 = [array1 mutableCopy];
[uniqueElementsInArray1 removeObjectsInArray:array2];

NSMutableArray *uniqueElementsInArray2 = [array2 mutableCopy];
[uniqueElementsInArray2 removeObjectsInArray:array1];

// Combine the two arrays.
// Result contains objects @"b" and @"d":
NSArray *result = [uniqueElementsInArray1 arrayByAddingObjectsFromArray:uniqueElementsInArray2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:25:16.763

为此，您只需声明另一个临时 NSMutableArray 。从原始数组中检索您拥有的任何数据，例如 objectArray。检查临时数组是否有，并将其放入临时数组。只需参考以下代码：

```
 for(NSString *str in objectArray)
    {

        if(![tempArray containsObject:str])
        {

            [tempArray addObject:str];

        }
    } 
```

在此之后，如果您想进一步使用 objectArray，您可以继续使用 tempArray 或将 tempArray 放入 objectArray。我认为这应该适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T20:14:58.990

### 你可以使用 NSSet 作为过滤器（想想你脑海中的维恩图）：

```
NSArray *array1 = @[@1,@2,@3,@4,@2,@3];
NSArray *array2 = @[@3,@4,@5,@6,@4,@6];

NSSet *set1 = [NSSet setWithArray:array1]; // [1,2,3,4]
NSSet *set2 = [NSSet setWithArray:array2]; // [3,4,5,6] 
```

方法1（我最喜欢的）：

```
NSMutableSet *mSet1 = [set1 mutableCopy];
NSMutableSet *mSet2 = [set2 mutableCopy];

[mSet1 minusSet:set2]; // mSet1 = [1,2]
[mSet2 minusSet:set1]; // mSet2 =  [5,6]

[mSet1 unionSet:mSet2]; // mSet1 = [1,2,5,6], only the unique elements.

// Now just put it in an immutable collections with a self-docu name...
NSArray *arrayOfUniqueness = [setOfUniqueElementsOnly allObjects]; 
```

方法2（更明确的测试，不需要维恩图）：

```
NSSet *setOfObjsUniqueTo1 = [set1 objectsPassingTest:^BOOL(id  _Nonnull obj, BOOL * _Nonnull stop) {
    return ![set2 containsObject:obj];
}]; // [1,2]

NSSet *setOfObjsUniqueTo2 = [set2 objectsPassingTest:^BOOL(id  _Nonnull obj, BOOL * _Nonnull stop) {
    return ![set1 containsObject:obj];
}]; // [5,6]

NSMutableSet *oneSetToRuleThemAll = [NSMutableSet setWithSet:setOfObjsUniqueTo1];
// [1,2]
[oneSetToRuleThemAll unionSet:setOfObjsUniqueTo2]; // [1,2,5,6]

// Or as an array:
NSArray *anotherArrayOfUniqueness = [oneSetToRuleThemAll allObjects]; 
```

方法 3（避开`NSSet`，但我不会在正式晚宴上把这个代码放在英国女王对面——这很不雅）：

```
NSMutableArray *mArray1 = [NSMutableArray new];
NSMutableArray *mArray2 = [NSMutableArray new];

NSIndexSet *uniqueIndexes1 = [array1 indexesOfObjectsPassingTest:^BOOL(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    return ![array2 containsObject:obj];
}]; // [0,1,4] (b/c @1 and @2 are unique to array1)

[uniqueIndexes1 enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL * _Nonnull stop) {
    [mArray1 addObject:array1[idx]];
}]; // @[@1,@2,@2]

NSIndexSet *uniqueIndexes2 = [array2 indexesOfObjectsPassingTest:^BOOL(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
    return ![array1 containsObject:obj];
}]; // [2,3,5] (b/c @5 and @6 are unique to array2)

[uniqueIndexes2 enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL * _Nonnull stop) {
    [mArray2 addObject:array2[idx]];
}]; // @[@5,@6,@6]

NSArray *unionArray = [array1 arrayByAddingObjectsFromArray:array2];
    // @[@1,@2,@2,@5,@6,@6]

NSArray *yetAnotherArrayOfUniqueness = [[NSSet setWithArray:unionArray] allObjects];
    // @[@1,@2,@5,@6] 
```

不是提问者的问题，而是要获得一个删除重复项的数组（即，每个元素都是*唯一的*），可以完成类似的魔法：

```
//given...
NSArray *arr1 = @[@"a", @"b", @"c"];
NSArray *arr2 = @[@"b", @"c", @"d"];

//...make a single array to rule them all:
NSArray *temp = [arr1 arrayByAddingObjectsFromArray:arr2];
//[a,b,c,b,c,d]

//Make an NSSet from the two:
NSSet *filterSet = [NSSet setWithArray:temp]; // Set has: a,b,c,d

//Finally, transmogrify that NSSet into an NSArray:
NSArray *arrayOfUniqueness = [filterSet allObjects]; // [a,b,c,d] 
```

根据[Apple Docs](https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/index.html#//apple_ref/occ/clm/NSSet/setWithArray:)（强调添加）：

> **+ setWithArray**：创建并返回一个集合，其中包含给定数组中包含的对象的唯一集合。

更新：并在此处查看类似的问题：[删除所有在 NSArray 中具有重复项的字符串](https://stackoverflow.com/questions/6375409/remove-all-strings-with-duplicates-in-an-nsarray)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-05T05:41:42.363

使用 Set 作为过滤器，例如：

```
String[] arr = {"a","a","b"};
Object[] uniqueArr = (Object[])new HashSet<String>(Arrays.asList(arr)).toArray(); 
```

# ios5 - 使用 ViewDeck 调整 UITableView 的大小

> ID：10892031
> 
> 赞同：0
> 
> 时间：2012-06-05T05:25:57.373
> 
> 标签：ios5, uitableview, resize, uistoryboard

我正在尝试模仿 Facebook 等应用程序中的滑动表视图功能。我目前正在使用[Inferis/ViewDeck](https://github.com/Inferis/ViewDeck)库。这作为一个滑块效果很好，但我不知道如何调整表格视图的大小以正确适应滑块留下的较小空间而不进行裁剪。

例子：

![例子](../Images/5e298195ca5e0401685492222dc90c29.png)

我看过其他几个类似问题的 SO 帖子，但没有一个能简明扼要地回答如何调整表格视图的大小。任何例子或解释都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:05:56.090

对于向左的滑块（即向左显示视图的滑块）：

```
- (BOOL)viewDeckControllerWillOpenLeftView:(IIViewDeckController*)viewDeckController animated:(BOOL)animated 
{
    self.tableView.frame = (CGRect) { self.tableView.frame.origin.x,
                                      self.tableView.frame.origin.y, 
                                      320 - self.viewDeckController.leftLedge,
                                      self.tableView.frame.size.height };
    return YES;
} 
```

对于向右的滑块：

```
- (BOOL)viewDeckControllerWillOpenRightView:(IIViewDeckController*)viewDeckController animated:(BOOL)animated 
{
    self.tableView.frame = (CGRect) { self.viewDeckController.rightLedge,
                                      self.tableView.frame.origin.y, 
                                      320 - self.viewDeckController.rightLedge,
                                      self.tableView.frame.size.height };
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T02:53:25.740

无法调整 a 的大小，但您可以在内部`UITableViewController`创建一个，然后调整.`UITableView``UIViewController``UITableView`

# javascript - 如何使用 facebook JS SDK 检查用户是否喜欢我的页面？

> ID：10892036
> 
> 赞同：0
> 
> 时间：2012-06-05T05:26:37.003
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我目前正在使用一个 facebook 应用程序，该应用程序将在一个具有类似页面功能的网页中在 facebook 之外运行，但基于类似我必须在不同页面上重定向页面，

我尝试了很多代码来检查用户是否已经喜欢页面但失败了。

因此，如果有人知道如何检查这一点，请帮助我。

提前致谢。

注意：只想使用 JS SDK 而不是 PHP SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:32:41.407

要访问来自 facebook 的类似数据，您需要`user_likes`获得许可。

```
<div id="fb-root">
</div> 
```

```
var page_id = 'YOUR PAGE / URL ID';
(function() {
    var e = document.createElement('script');
    e.type = 'text/javascript';
    e.src = document.location.protocol +
                    '//connect.facebook.net/en_US/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
} ());

window.fbAsyncInit = function() {
    FB.init({ appId: 'YOUR APP ID', status: true, cookie: true, xfbml: true, oauth: true }); 

    FB.login(function(response) {
        if (response.authResponse) {
            FB.api('/me/likes/' + page_id, function(api_response) {
                try {
                    if ((api_response.data[0].name) != undefined)
                        alert(api_response.data[0].name);
                    else
                        alert('you are not like this page');
                }
                catch (e) {
                    alert('you are not like this page');
                }
            });
        }
    }, { scope: 'email,user_likes' });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:49:30.963

您必须获得`user_likes`许可，然后调用 Graph API 请求`/me/likes/{facebook_id_of_your_URL}`

该调用返回一个包含您的 URL 对象数据的数据数组，或者如果用户还不喜欢它，则返回一个空数据数组。

# javascript - 将 AJAX 响应作为文档处理？

> ID：10892037
> 
> 赞同：0
> 
> 时间：2012-06-05T05:26:43.713
> 
> 标签：javascript, ajax, hashbang

我正在尝试使用 shebang 实现 AJAX - 这意味着它`example.com/#!/somepage.php`只是`example.com/somepage.php`加载到 AJAX 站点的内容区域中。

这样做的明显方法是请求`somepage.php`然后用`documentElement`新文档替换整个内容。然而，这似乎有点违背 AJAX 的目的。

相反，我正在考虑尝试加载`somepage.php`，然后提取`content`页面的一部分并将其简单地放在内容区域中。

为此，我*可以*使用正则表达式来查找，`/<div id="content">.*</div>/`但这将是一个非常糟糕的主意（最简单的问题是“`</div>`结束内容？）。相反，我希望能够做类似的事情`ajaxresponse.getElementById('content')`，但是如何我会去转换`ajaxresponse`为`document`（或`documentFragment`）对象吗？

或者这只是实现这种 AJAX 设置的错误方法？`X-Requested-With: XMLHttpRequest`让服务器端检查并只发回内容区域会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:58:50.620

与其`#!`逐字请求 'd 页面，不如请求与您的处理程序兼容的变体`#!`。

这种方法需要两个步骤。

1.  通过 JSON 公开您的内容页面。使该服务可用于满足特定条件的请求，例如特殊的 get 参数、扩展名、标头等。例如，`/somepage.php?json`可能提供`/somepage.php`JSON 中的内容。

2.  编写您的`#!`处理程序，以便在处理请求时调用您在上面为该页面定义的服务。例如，当`example.com/#!/somepage.php`被加载并且您处理`somepage.php`，请求`somepage.php?json`，并酌情传播该请求的内容。

这种方法为您提供了许多好处。

*   减少 AJAX 请求的响应大小
*   减少服务器端负载，因为不需要呈现 HTML
*   避免 HTML 解析和一些昂贵的 DOM 操作
*   不依赖浏览器发送适当的 AJAX 相关标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:32:49.993

请注意，您实际上不需要使用正则表达式来从返回的数据中获取内容。例如，使用 jQuery，只需使用`context`$ 选择器的参数（[live fiddle](http://jsfiddle.net/raffaele181188/fBfas/#base)）

```
$.get("/", {}, function(data){
    $("#text").append($("#login", data));
});​ 
```

另请注意，shebang 导航通常与一些 Javascript 框架相关联

# c# - 我可以在未安装 MS Office 的情况下使用 C# 创建 Excel 工作表吗？

> ID：10892045
> 
> 赞同：0
> 
> 时间：2012-06-05T05:27:25.360
> 
> 标签：c#, excel

我可以在没有在主机上安装 MS Office 的情况下使用 C# 创建 Excel 工作表吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:03:21.460

如果您的目标是 Office 2007+ - 您可以查看[Office Open XML](http://en.wikipedia.org/wiki/Office_Open_XML)。您的 .xlsm 基本上是一个压缩的 XML 文件，只要您不做任何花哨的事情 - 它应该很容易生成。

但是，如果 - 您的目标是 Office 2003 或更早版本 - .xls 是二进制格式。您可能需要查看 abiword 或 star office，看看您是否可以使用他们的任何代码将您的数据序列化到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T04:07:05.633

我已经使用 EPPlus 库实现了这一点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T05:34:06.040

过去，我创建了一个简单的 HTML 表格并保存为 .xls，并且在 Excel 中打开得很好。

# android - 使用 ColorMatrixColorFilter 时画布不绘制位图

> ID：10892046
> 
> 赞同：0
> 
> 时间：2012-06-05T05:27:37.043
> 
> 标签：android, bitmap, android-canvas, colormatrix, colormatrixfilter

我在使用 ColorMatrixColorFilter 修改位图中的颜色像素时遇到了困难。如果我使用本地文件系统中的位图（jpg），它可以工作。但是，如果我使用从缓冲区创建的位图，则画布上不会绘制任何内容。

特别是，我使用以下代码来创建 ColorMatrix：

```
 float matrix[] = new float[] {
            0, 0, 1, 0, 0,
            0, 1, 0, 0, 0,
            1, 0, 0, 0, 0,
            0, 0, 0, 1, 0
    };
    rbSwap = new ColorMatrix(matrix);
    paint = new Paint(Paint.FILTER_BITMAP_FLAG);
    paint.setColorFilter(new ColorMatrixColorFilter(rbSwap)); 
```

以上用于创建用于交换红色和蓝色的 ColorMatrixColorFilter。

如果我使用以下代码创建位图，它可以工作：

```
bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.picture); 
```

如果我使用以下代码创建位图，则不会在画布上绘制任何内容：

```
bitmap = Bitmap.createBitmap((int) width, (int) height,
            Bitmap.Config.ARGB_8888);

srcBuffer = ByteBuffer.wrap(data);
    srcBuffer.rewind();
    bitmap.copyPixelsFromBuffer(srcBuffer); 
```

我的 onDraw() 如下所示：

```
public void onDraw(Canvas canvas) {
    canvas.drawBitmap(spicebmp, offsetX, offsetY, paint);
} 
```

如果我不设置颜色过滤器，位图会在我的画布上呈现。如果我设置了颜色过滤器，它只是一个黑屏 - 没有任何东西可以渲染。如果我使用 jpg 位图而不是我通过缓冲区创建的位图，它会用红色/蓝色交换来绘制。

我将矩阵更改为与单位矩阵相同，并且正确渲染了位图。如果我更改矩阵中的任何单个浮点数（如 1s 到 .5s 或 0），则不会绘制任何内容。

我还检查了确保位图有足够的“字节”来表示位图。bitmap.byteCount() == srcBuffer.limit() 是真的 - 所以我缓冲区中的字节与我传入的宽度/高度应该存在的字节相同。

我在 onDraw 期间对任何异常进行了尝试/捕获，并通过 logcat 输出倾倒，但在那里没有看到任何东西。我在 Android 位图绘制代码中翻了一下，看到了以下内容：

```
// nothing to draw
if (fClip->isEmpty() ||
        bitmap.width() == 0 || bitmap.height() == 0 ||
        bitmap.getConfig() == SkBitmap::kNo_Config ||
        (origPaint.getAlpha() == 0 && origPaint.getXfermode() == NULL)) {
    return;
} 
```

我无法追踪核心中的 C++ 代码，所以我无法判断这是否正在触发。但我确实知道我的位图的宽度和高度都不为零（它们是 800 和 600），并且我知道我的位图在创建时设置为 ARGV_8888 类型，并且完全相同的绘制对象用于加载的 jpg从磁盘（有效的那个）和我使用 copyPixelsFromBuffer() 创建的那个。

所以我不确定我做错了什么。我认为它是位图中的某些标志或属性与 colorFiltering 不兼容，但它只是 ARGB_8888 类型的适当大小的简单 ByteBuffer。当然，完全相同的代码（绘制对象等）用于设置过滤器。

那么我还需要对位图做些什么吗？使用 ColorMatrix/Filter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:41:50.247

事实证明，我的 minsdkversion 设置为版本 10。当我添加 14 的 targetsdkversion 时，现在一切正常。显然，ColorMatrixColorFilter 对于旧版本的 Android（Honeycomb 之前）具有不同的行为/界面。

在每个旧版本中，如果 Alpha 通道字节为 0，则应用于 Alpha 通道的矩阵值始终为 0。矩阵中的第五个值未添加到公式中。

# ios - 如何打开邮件应用程序？只打开不发送电子邮件

> ID：10892052
> 
> 赞同：1
> 
> 时间：2012-06-05T05:28:20.513
> 
> 标签：ios

要求是打开邮件应用程序，就像自定义 url 方案打开应用程序一样，但什么也不做。

使用@"mailto://" url 将在编辑中打开带有新电子邮件的邮件应用程序，这不是我想要的。

有任何想法吗？

对不起我糟糕的英语。

# jquery - jQuery覆盖关闭

> ID：10892057
> 
> 赞同：2
> 
> 时间：2012-06-05T05:28:40.390
> 
> 标签：jquery, overlay

嗨，我有以下代码，我想在保存完成后关闭此覆盖弹出窗口。HTML 部分显示了我拥有的 html 代码块，而 Javascript 块解释了我如何尝试调用此覆盖。

```
<javascript>

$(document).ready(function() {

    var triggers = $(".modalInput").overlay({
        closeOnClick: false
    });

var weightedTemplateButtons = $("#addWeightsPopup button").click(function(e) {

        var save = weightedTemplateButtons.index(this) === 0;

        if (save) {
            if (validateWeightedTemplate()) {
                completeWeightedTemplate();
                addNewWeightedTemplate();

                                   /*this doesn't work*/
                weightedTemplateButtons.overlay().close();

            }
        }

        return e.preventDefault();
    });

</javascript>

<html>

<button id="addButton" rel="#addWeightsPopup" onclick="addButton_onClick();" class="modalInput StdButton">Add</button>

<div id="addWeightsPopup" class="modal addWeights">
  <span>Sample Text</span>
    <div class="addWeightsButton">
       <button class="StdButton stdButton" type="submit"  id="weightedTemplateAddButton">Save</button>
       <button class="close StdButton stdButton">Cancel</button>
    </div>
</div>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:37:20.687

您可以使用该 div 的 ID 隐藏弹出窗口，例如

```
$("#addWeightsPopup").hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:02:04.477

居然找到了答案......

triggers.eq(0).overlay().close()

0 - 按钮的索引

所以如果你有两个按钮，那么 triggers.eq(1).overlay().close()

# gwt - 在 PlayN 中，如何从命令行构建我的项目的 HTML 版本？

> ID：10892062
> 
> 赞同：0
> 
> 时间：2012-06-05T05:29:02.050
> 
> 标签：gwt, maven, playn

目前我正在使用 GWT 插件在 Eclipse 中构建它。我想使用从命令行执行 GWT 编译的脚本自动部署到我的开发网络服务器。

我已按照“[入门”页面](http://code.google.com/p/playn/wiki/GettingStarted#Running_via_Maven)的“通过 Maven 运行”部分中的说明进行操作：

```
mvn -Phtml integration-test 
```

但它会尝试构建所有版本，在 Android 构建（我现在更愿意跳过）上出错，并抛出一个警告，指出 html 配置文件不存在：

```
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] MyPlaynGame Metaproject .......................... SUCCESS [0.375s]
[INFO] MyPlaynGame Core ................................. SUCCESS [1.638s]
[INFO] MyPlaynGame Java ................................. SUCCESS [0.319s]
[INFO] MyPlaynGame HTML ................................. SUCCESS [4.019s]
[INFO] MyPlaynGame Android .............................. FAILURE [0.308s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7.903s
[INFO] Finished at: Mon Jun 04 22:17:33 PDT 2012
[INFO] Final Memory: 15M/255M
[INFO] ------------------------------------------------------------------------
[WARNING] The requested profile "html" could not be activated because it does not exist. 
```

我怎样才能得到它只是为了构建 html 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:06:50.853

mvn clean package -pl core,html

这只会编译 core 和 html 包。如果你只想要html，你仍然需要核心包。

默认情况下，输出将在目标文件夹中。

# android - Android 在通话完成/结束后显示设备通话记录屏幕

> ID：10892066
> 
> 赞同：1
> 
> 时间：2012-06-05T05:29:31.240
> 
> 标签：android, calllog

> **可能重复：**
> [如何在 android 中拨打电话并在通话完成后返回我的活动？](https://stackoverflow.com/questions/1556987/how-to-make-a-phone-call-in-android-and-come-back-to-my-activity-when-the-call-i)

我正在尝试在 Nexus-S 上的 Android 中使用以下代码 (Uri with Intent) 拨打/发起呼叫：

```
 Intent callIntent = new Intent(Intent.ACTION_CALL);
 callIntent.setData(Uri.parse("tel:"+phoneNo));
 startActivity(callIntent); 
```

通话结束后在 Nexus-S 上显示设备通话记录屏幕，而不是返回我的活动。

通话结束后，设备本机通话记录屏幕是否不应该出现，并返回到我的活动或我想显示的其他活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:53:56.940

昨天我做了一个简单的应用程序，它拨打电话，结束通话后返回基本活动

这是我的代码可以帮助你

## MakePhoneCallActivity.java

```
package com.rdc;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MakePhoneCallActivity extends Activity { 
    private Button button; 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 
        button = (Button) findViewById(R.id.buttonCall); 
        // add button listener
        button.setOnClickListener(new OnClickListener() { 
            @Override
            public void onClick(View arg0) {

                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:9741817902"));
                startActivity(callIntent); 
            } 
        });         
        // add PhoneStateListener
        PhoneCallListener phoneListener = new PhoneCallListener();
        TelephonyManager telephonyManager = (TelephonyManager) this
                    .getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener,
                PhoneStateListener.LISTEN_CALL_STATE);
    }

    //monitor phone call activities
    private class PhoneCallListener extends PhoneStateListener {     
        private boolean isPhoneCalling = false;  
        String TAG = "DEBUG";    
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

            if (TelephonyManager.CALL_STATE_RINGING == state) {
                    // phone ringing
                Log.i(TAG, "RINGING, number: " + incomingNumber);
            }    
            if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
                    // active
                Log.i(TAG, "OFFHOOK");   
                isPhoneCalling = true;
            }    
            if (TelephonyManager.CALL_STATE_IDLE == state) {
                // run when class initial and phone call ended, 
                // need detect flag from CALL_STATE_OFFHOOK
                Log.i(TAG, "IDLE");  
                if (isPhoneCalling) {

                    Log.i(TAG, "restart app");   
                    // restart app
                    Intent i = getBaseContext().getPackageManager()
                        .getLaunchIntentForPackage(
                            getBaseContext().getPackageName());
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);    
                    isPhoneCalling = false;
                }    
            }
        }
    }   
} 
```

* * *

## 主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/buttonCall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Make a call" />

</LinearLayout> 
```

* * *

## 我的清单是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.rdc"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MakePhoneCallActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

让我知道是否还有任何问题。

# maven - mvn clean install, mvn install:install-file 命令？

> ID：10892068
> 
> 赞同：0
> 
> 时间：2012-06-05T05:29:52.057
> 
> 标签：maven

我正在学习 Maven 并试图理解事物的顺序。据我了解，`mvn clean install`使用默认 jar 构建存储库，其中`install`生成我稍后需要的 .zip。

我想使用我调用的自定义 jar `mvn install:install-file`，但是当我之前运行它时`install`，我得到了一些`cannot find symbol`错误。我假设我的自定义罐子（不包含这些类）覆盖了一些默认罐子？我在文件系统的任何地方都找不到这些类，所以我假设它们已经打包在 1 个默认 jar 中。我怎样才能解决这个问题？

另外，我应该按什么顺序做事？我想要的只是最终的 .zip，其中包括自定义 jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:40:00.627

1.  `mvn install`-- 构建和打包源代码并将*工件*复制（安装）到您的本地存储库，该存储库是`$USER_HOME/.m2/repository`

2.  如果不查看您输入的命令和收到的错误跟踪，很难说出那里发生了什么。也就是说，`install-file`是将*工件*以适当的层次结构复制到您的本地存储库。仅此而已。正确的语法是：

    ```
    mvn install:install-file -Dfile=<path-to-file> -DgroupId=<group-id> \
        -DartifactId=<artifact-id> -Dversion=<version> -Dpackaging=<packaging> 
    ```

3.  通常，您只需`install:install-file`为所有**自定义**依赖项运行一次，然后再执行`mvn install`.

4.  如果您的自定义 jar 具有相同的坐标 - artifactid、groupid 和版本，因为您`pom.xml`和您的自定义 jar 中的某些依赖项没有您的源代码使用的类 - 那么，您会收到错误。

参考：[http ://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html](http://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:50:02.947

关于[maven-install-plugin 网站](http://maven.apache.org/plugins/maven-install-plugin/)，他们提到如下： -

> **install:install-file:** ***主要用于将外部创建的工件***及其 POM 安装到本地存储库中。在这种情况下，项目信息可以从可选指定的 pomFile 中获取，但也可以使用命令行参数给出。

这意味着应该在使用此命令之前创建工件。如果您想将新编译的代码部署到本地存储库，请使用***mvn clean install***。

有关序列和生命周期的更多信息，请查看[构建生命周期简介。](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)我希望这可能会有所帮助。

问候，

查理·Ch。

# iphone - UIButton 的双边框

> ID：10892071
> 
> 赞同：1
> 
> 时间：2012-06-05T05:30:10.663
> 
> 标签：iphone, ios

我必须显示如下图所示的 UIButton。按钮大小可以变化。我怎样才能做到这一点？请提出一种方法。

![在此处输入图像描述](../Images/a4fae34bbb19e0efefd01d425556c5ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:32:53.113

制作一个视图并将其颜色设置为比您想要的按钮颜色深一点，然后使一个按钮比视图尺寸短一点并将其放置在您的合适位置，检查n告诉我它是否对您有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:42:36.187

如果您只想要一个简单的轮廓（从您的图像中很难分辨出按钮是什么），请创建按钮`UIButtonTypeCustom`（这样您会得到一个空白的石板），然后将其背景颜色设置为黑色。接下来，获取按钮的[CALayer](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)（通过[layer](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/layer)方法），并根据需要设置[borderColor](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/borderColor)和[borderWidth](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/borderWidth)属性。

# sql-server-2008 - 我需要对恢复的数据库进行哪些更改以及如何更改？

> ID：10892072
> 
> 赞同：0
> 
> 时间：2012-06-05T05:30:20.250
> 
> 标签：sql-server-2008, hp-quality-center

我已将数据库从“混合身份验证”MS SQL Server 恢复为“仅 Windows 身份验证”SQL Server。

我的应用程序配置为使用“dbo”访问数据库的 Windows 身份验证。

但是在恢复的 DB 中，所有的表、视图都不属于 'dbo'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:58:50.023

我不确定我是否理解这个问题，但我猜当您访问数据库时，您正在/正在创建表。你的陈述很可能是这样的：

```
Create Table TableName (...) 
```

要在特定架构中创建表，您应该添加架构前缀（或[更改您正在使用的用户的默认架构](http://msdn.microsoft.com/en-us/library/ms176060.aspx)）：

```
Create Table dbo.TableName (...) 
```

要将表移动到其他模式，请参阅[Alter Schema](http://msdn.microsoft.com/en-us/library/ms173423.aspx)。

# android - 在android中跳过索引文件thumbs.db错误

> ID：10892074
> 
> 赞同：0
> 
> 时间：2012-06-05T05:30:38.337
> 
> 标签：android

我试图将一个android项目导入eclips。但是我收到错误，例如在 thumbs.db 文件（在可绘制文件夹中）中跳过索引文件 thumbs.db。许多人建议删除 thumbs.db 文件。如何解决这个问题？如果我删除这个文件有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:58:41.603

Microsoft Windows 创建此 Thumbs.db 文件以帮助它加载图像的缩略图。该文件的名称中包含大写字母“T”，android 不支持其可绘制对象的大写字母。那就是它显示这样的错误。您可以毫无问题地删除该文件，当您再次访问项目的drawable文件夹时，将再次创建该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:40:00.477

它是一种窗口特定文件。

它不会影响项目，你可以`delete without any Worries`。

基本原因是当您将任何图像粘贴到`Drawable`文件夹中时，将生成这样的文件。

# objective-c - 如何在基于视图的应用程序中从 RSS 提要中的网站获取文本？

> ID：10892075
> 
> 赞同：-1
> 
> 时间：2012-06-05T05:30:43.657
> 
> 标签：objective-c, xcode, rss, feed

嗨，我是 iphone 编程新手，我正在开发一个应用程序，它是基于视图的应用程序中的测验应用程序。开始测验时，我需要从测验中的 rss 提要中的特定站点（URL）获取问题。所以任何帮助都会对我有用。建议将被接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:15:52.747

向站点发送`NSURLConnection`请求并使用`NSXMLParser`. 以下是一些链接： [NSURLConnection](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

[NSXML解析器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

# database - R - Windows 中的 Microsoft Access mdb 数据库

> ID：10892079
> 
> 赞同：1
> 
> 时间：2012-06-05T05:31:28.773
> 
> 标签：database, r, odbc

我已按照以下步骤安装 Access 数据库引擎、配置 ODBC 数据源并创建链接到 abc.mdb 的用户 DSN abc：[https ://stackoverflow.com/questions/6721702/windows-7-64-bit-odbc- drivers-for-ms-access-missing](https://stackoverflow.com/questions/6721702/windows-7-64-bit-odbc-drivers-for-ms-access-missing)和[如何将 Microsoft Access .accdb 数据库文件中的数据读入 R？](https://stackoverflow.com/questions/7109844/how-to-read-data-from-microsoft-access-accdb-database-files-into-r)

没有问题。

但是，odbcConnect("abc") 给了我这个错误：指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:52:26.050

我认为这个问题与 32 位和 64 位有关。你的 R 是 32 位还是 64 位。您很可能创建了 32 位 DSN。`c:\windows\sysWOW64\odbcad32.exe`将创建一个 64 位版本。默认情况下，控制面板指向`%windir%\system32\odbcad32.exe`哪个是 32 位版本

# selenium - 我应该能够使用 htmlUnitDriver 加载整个 html 页面吗

> ID：10892080
> 
> 赞同：0
> 
> 时间：2012-06-05T05:31:31.747
> 
> 标签：selenium, webdriver, htmlunit

我正在为我的 Selenium 测试用例使用 Chrome 驱动程序。它工作正常。我的项目中存在性能问题，因此我想将测试用例`ChromeDriver`从`HtmlUnitDriver`. 当我尝试`HtmlUnitDriver`在我的测试用例中使用时，只需用 更改驱动程序名称`HtmlUnitDriver`，硒测试用例就不起作用。

在使用此驱动程序后，我认为这`HtmlUnitDriver`不会加载整个页面。

为什么我这么说是因为`HtmlUnitDriver`可以找到`div`页面开头的一些 id。

此驱动程序未找到其他`div`s。我正在获取`NoSuchElementException`这个 div id。

所以请帮助我在我的项目中解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:17:18.190

您正在寻找的元素不是由 JavaScript/AJAX 调用创建的吗？[您可能需要首先在 HtmlUnitDriver 中启用 JavaScript 支持。](http://code.google.com/p/selenium/wiki/HtmlUnitDriver)

但请注意，它可能运行良好，但它的行为可能与您在真实浏览器中看到的不同。

否则，您是否使用[隐式/显式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits)进行搜索？即使启用了 JS，有时也需要一段时间才能处理所有异步请求。

# silverlight - 在 Silverlight 中覆盖成员时违反继承安全规则

> ID：10892082
> 
> 赞同：2
> 
> 时间：2012-06-05T05:31:38.370
> 
> 标签：silverlight, code-access-security

我正在silverlight 中开发一个Web 应用程序。我已经重载了 WebClient.GetWebRequest 方法，如下所示：-

```
public class WebClientWithCookies : WebClient
    {
        [SecurityCritical]
        protected override WebRequest GetWebRequest(Uri address)
        {
            string cookieContent = HtmlPage.Document.Cookies;

            WebRequest request = base.GetWebRequest(address);
            HttpWebRequest webRequest = request as HttpWebRequest;
            if (webRequest != null && cookieContent != null && cookieContent != string.Empty)
            {
                CookieContainer cookieContainer = new CookieContainer();
                cookieContainer.Add(address, new Cookie() { Value = HtmlPage.Document.Cookies });
                webRequest.CookieContainer = cookieContainer;
            }
            return request;
        }
    } 
```

但我收到以下异常：

> System.TypeInitializationException 未被用户代码处理
> Message='SigmaWC.Utility.RestCommunicator' 的类型初始化程序引发了异常。TypeName=SigmaWC.Utility.RestCommunicator
> StackTrace：在 SigmaWC.Utility.RestCommunicator..ctor() 在 SigmaWC.App..ctor() InnerException：System.TypeLoadException 消息=在覆盖成员时违反了继承安全规则：'SigmaWC.Utility.WebClientWithCookies ..ctor()'。重写方法的安全可访问性必须与被重写方法的安全可访问性相匹配。StackTrace：在 SigmaWC.Utility.RestCommunicator..cctor() InnerException：

任何人都可以帮助如何提升 Silverlight 中的安全设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:13:36.263

至少可以说有关这方面的文档很少。但是，有几个有用的资源：

[MSDN](http://msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute%28v=vs.95%29.aspx)表示您不能将框架成员与`SecurityCriticalAttribute`.

> Silverlight 应用程序代码不能使用具有 SecurityCriticalAttribute 的类型和成员。安全关键类型和成员只能由 .NET Framework for Silverlight 类库中的受信任代码使用。

在 的情况下`WebClient`，`GetWebRequest`方法没有这个属性，但是构造函数有。

[这个 MSDN 安全博客](http://blogs.msdn.com/b/shawnfa/archive/2007/05/11/silverlight-security-iii-inheritance.aspx)暗示`if the default constructor has any Security attribute, the class cannot be used for inheritance in a Silverlight client.`

此外，前面提到的 MSDN 博客暗示在 Silverlight 程序集中忽略了安全属性，这些程序不是核心框架的一部分。然而，这可能仅适用于程序集级别的属性。

无论如何，长话短说。`You cannot derive from WebClient because of the SecuritySafeAttribute on the constructor.` 为了说明这一点，这也会在运行时导致异常：

```
public class MyWebClient : WebClient
{

} 
```

另一种方法是滚动您自己的 WebClient。这需要一些工作，但以下示例确实适用于以下处理程序：

```
public class MyHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/plain";
        context.Response.Write("Hello World");
        foreach (Cookie cookie in context.Response.Cookies)
        {
            //Cookies from the client - there will be 1 in this case
        }
    } 
```

...

```
public class MyWebClient
{
    public MyWebClient()
    {

    }

    public void InvokeWebRequest(Uri address)
    {
        //Set the cookie you want to use.
        string cookieContent = "I like cookies";

        // Register a http client - without this the following webRequest.CookieContainer setter will throw an exception
        WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);

        //This bit you know, but dont forget to set Name on your new Cookie.
        HttpWebRequest webRequest = WebRequest.Create(address.AbsoluteUri) as HttpWebRequest;
        if (webRequest != null && !String.IsNullOrWhiteSpace(cookieContent))
        {
            webRequest.CookieContainer = new CookieContainer();
            webRequest.CookieContainer.Add(address, new Cookie() { Value = cookieContent, Name = "MyCookie" });
        }

        //Invoke the async GetResponse method.
        webRequest.BeginGetResponse(o =>
            {
                HttpWebResponse response = (HttpWebResponse)webRequest.EndGetResponse(o);
                using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                {
                    //Read the result
                    string result = reader.ReadToEnd();
                }

                foreach (Cookie cookie in response.Cookies)
                {
                    //The cookies returned from the server.
                }
            }, null);

    }
} 
```

# php - 如何通过 browser.php 获取操作系统版本

> ID：10892083
> 
> 赞同：1
> 
> 时间：2012-06-05T05:31:46.787
> 
> 标签：php

我使用[browser.php](http://chrisschuld.com/projects/browser-php-detecting-a-users-browser-from-php/)来检测用户使用它的操作系统名称。但我的问题是我们如何获得用户使用的操作系统版本。该脚本没有为此提供任何方法或属性。例如，我想展示用户使用它的 Windows 版本，包括 7、XP 等。

什么是解决方案？如果可以，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:09:54.560

请改用[Browsercap 类](https://github.com/garetjax/phpbrowscap)，因为（从上面的评论中）您当前使用的工具似乎不支持此功能。Browsercap 类是 PHP 本地`get_browser()`方法的一个分支，尽管该类不需要本地函数所需的 ini 配置类型。该类也是一个完全独立的解决方案。

设置很简单：

```
// Loads the class
require 'path/to/Browscap.php';

// The Browscap class is in the phpbrowscap namespace, so import it
use phpbrowscap\Browscap;

// Create a new Browscap object (loads or creates the cache)
$bc = new Browscap('path/to/the/cache/dir');

// Get information about the current browser's user agent
$current_browser = $bc->getBrowser();

// Output the result
print_r($current_browser); 
```

输出将是您生成的对象，其中包含相关数据（包括平台/操作系统）：

```
stdClass Object
(
    /* ... */
    [Parent] => Safari 3.1
    [Platform] => MacOSX
    [Browser] => Safari
    [Version] => 3.1
    /* ... */
) 
```

# c++ - C++11 May 2012 状态？

> ID：10892084
> 
> 赞同：-1
> 
> 时间：2012-06-05T05:31:46.873
> 
> 标签：c++, c++11

我正在查看一些关于 C++11（最初是 C++0x）的帖子。关于编译器兼容性、资源可用性和 IDE 支持的所有答案似乎都很模糊。大多数帖子都是一年前的。

我想学习 C++11，但似乎找不到任何资源。没有书籍，没有编译器，没有 IDE 插件，什么都没有。

有人可以告诉我 C++11 的最新状态吗？我对 C++0x 感到焦虑，因为我阅读了一些规范，它看起来非常有趣。我认为 C++11 更像 Python，内置了对元组和字典等更多奇特容器的支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:42:54.487

> 我想学习 C++11，但似乎找不到任何资源。没有书籍，没有编译器，没有 IDE 插件，什么都没有。

这很奇怪，因为如果你只是在文档站点上[搜索“C++0x”](http://social.msdn.microsoft.com/Search/en-US?query=C%2B%2B0x&ac=8)来查找最流行的编译器 Visual Studio，你会得到一堆结果，不仅包括它们支持的功能，还有关于如何使用的基本教程他们。

[Clang 功能图表](http://clang.llvm.org/cxx_status.html)为 Clang 3.1 更新，今年 5 月 22 日，2 周前是什么？

[GCC 特征图](http://gcc.gnu.org/projects/cxx0x.html)是今年4 月。

GCC 和 Clang 都支持绝大多数（如果不是几乎全部）C++11 功能，尽管还有一些库，特别是要添加的并发性。

许多书籍作者仍在为 C++11 更新，因为有很多要说的，而且我承认我知道除了 MSDN 上显示的那些新特性的教程很少。但是，总体而言，编译器前端正在*极快*地推进其对 C++11 的支持。

此外，您提到的一些库功能，如元组和哈希映射，实际上已经存在了很长时间——甚至可能在 C++03 之前的伪标准 Boost 库中，然后在 TR1 中。

当然，值得注意的是，Clang 和 GCC 都没有特别好的 Windows 支持——要慷慨——而且 Visual Studio 明显落后（尽管仍然可以在那里找到一些非常重要的 C++11 功能，以及 PPL 和安培）。这意味着在 Windows 上几乎没有可用于可变参数模板的选项。

# c++ - 检查字符串是否包含另一个字符串算法？

> ID：10892088
> 
> 赞同：2
> 
> 时间：2012-06-05T05:32:07.663
> 
> 标签：c++, string, algorithm, parsing

如果我有字符串 A 并且我有许多其他字符串，我想看看是否有任何其他字符串在 A 中。

什么算法可以在尽可能少的迭代中做到这一点？

前任：

'你好，我的名字是鲍勃。'

我想看看是否包含'name is b'，它从[11]开始。

我不想使用正则表达式库。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T05:35:11.423

最有效的算法是[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，它给定一个长度为 n 的字符串和一组总长度为 m 的字符串，可以在 O(n + m + z) 时间内找到所有匹配项，其中 z 是比赛报道。它基于有限自动机，是[KMP 字符串匹配算法](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)的推广。

该算法的一个很酷的方面是，如果您有一组固定的关键字和一堆要搜索的文本字符串，则可以通过执行 O(m) 预处理来构建匹配器来加速算法。然后，您可以在 O(n + z) 时间内找到长度为 n 的字符串中的所有匹配项。

另一方面，如果您有一个固定的字符串，然后想要匹配一组不同的模式字符串，请考虑查看[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)，它提供相同的运行时保证，但如果文本是固定的，则速度更快。

希望这可以帮助！

# maven - 如何在 ubuntu 12.04 中安装 maven-site-plugin 3.0

> ID：10892094
> 
> 赞同：0
> 
> 时间：2012-06-05T05:33:00.800
> 
> 标签：maven, plugins

我通过使用安装了maven 3.0.4 `apt-get install maven`，但是如何安装`maven-site-plugin 3.0`，突触包管理器显示只有`libmaven-site-plugin-java 2.1-2`和`libjavacc-maven-site-plugin-java 2.6-2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:14:02.657

您永远不会通过操作系统（或在 ubuntu 中）安装 maven-site-plugin，您将通过 pom 使用它，如下定义：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-site-plugin</artifactId>
        <version>3.1</version>
        <configuration>
          ...
   ... 
```

另请参阅[有关 maven-site-plugin 的文档](http://maven.apache.org/plugins/maven-site-plugin/maven-3.html)。

# android - 为什么片段不起作用

> ID：10892100
> 
> 赞同：0
> 
> 时间：2012-06-05T05:34:10.080
> 
> 标签：android

我想在片段中的 textview 中更改文本，我可以在 instantiateItem 中轻松做到这一点，但是在 instantiateItem 之后，textView 为空，我无法调用

MyPagerAdapter.textView.SetText();

```
private class MyPagerAdapter extends PagerAdapter {

        TextView textView;

        public int getCount() {
            return 5;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.farleft;
                 View view = inflater.inflate(resId, null);
                ((ViewPager) collection).addView(view, 0);
                 textView = (TextView)view.findviewById(R.id.textvvvv);
                 return view;

            case 1:
                resId = R.layout.left;
                break;
            case 2:
                resId = R.layout.middle;
                break;
            case 3:
                resId = R.layout.right;
                break;
            case 4:
                resId = R.layout.farright;
                break;
            }

        }

        @Override
        public void destroyItem(View arg0, int arg1, Object arg2) {
            ((ViewPager) arg0).removeView((View) arg2);

        }

        @Override
        public boolean isViewFromObject(View arg0, Object arg1) {
            return arg0 == ((View) arg1);

        }

        @Override
        public Parcelable saveState() {
            return null;
        }
} 
```

但是，当我用

```
textView.SetText("EEE"); 
```

它运行良好，但我无法更改 MyPageAdapter 之外的文本，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:47:49.097

`MyPagerAdapter`不是`static`，您的访问方法将用于静态类。尝试实例化`PagerAdapter`并使用该引用来调用该`getAdapter()`方法并尝试使用`findViewById(....)`

**编辑：**

当您`PagerAdapter`在活动中声明时，尝试从中获取适配器的引用，如下所示

`PagerAdapter viewer = (PagerAdapter) findViewById(R.id.pageradapter);`-->

```
viewer.getAdapter().findViewById(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:12:55.377

ViewPager 从 View 继承 findViewById()，所以你不能这样做：

```
TextView textView = (TextView) viewPager.findViewById(...); 
```

# c# - Windows 8 上的文件历史记录

> ID：10892105
> 
> 赞同：5
> 
> 时间：2012-06-05T05:35:14.607
> 
> 标签：c#, .net, winapi, windows-8

我有一个关于[使用 C# 获取/设置“文件历史记录”（Windows 8）设置的问题](https://stackoverflow.com/questions/10160999/get-set-file-history-windows-8-settings-using-c-sharp)

Windows 提供了一个 API [File History API](http://msdn.microsoft.com/en-us/library/hh829789%28v=vs.85%29.aspx)，*“允许应用程序读取和修改文件历史配置”*

1.  这个 API 有 C# 版本吗？
2.  它需要 .NET 4.5 吗？
3.  是否有关于如何使用此 API 的代码示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:18:52.993

我找到了一个演示如何使用文件历史记录的 cpp 示例

[文件历史示例](http://code.msdn.microsoft.com/windowshardware/FileHistory-e1d403aa)

这很好用:)

我只需要找到一种方法将其从 cpp 移动到 c#

# javascript - 页面上的jquery函数调用onload和onclick？

> ID：10892106
> 
> 赞同：2
> 
> 时间：2012-06-05T05:35:23.897
> 
> 标签：javascript, jquery

我正在使用 jquery 日历，但我需要在页面加载和点击时调用一个函数。当页面第一次加载时，它应该自动调用并执行该函数，第二次及以后它应该通过点击调用。可能吗？？如果是，请帮助我。

```
 <script type="text/javascript">

   $(document).ready(function(){
      $("#fullDate").datepicker({

        showOn: "button",
        buttonImage: "images/calender.jpg",
        buttonImageOnly: true,

        onClose: function(dateText, inst) {
        $('#year').val(dateText.split('/')[2]);
        $('#month').val(dateText.split('/')[0]);
        $('#day').val(dateText.split('/')[1]);
    }

    });

});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T05:39:18.237

尝试编写一个命名函数并在两个事件上调用它：

```
function doSomething() {
    // ...
}
$(document).ready(function() { doSomething() });
$(yourElem).on("click", function() { doSomething() }); 
```

除了将匿名函数编写为回调之外，`doSomething`您还可以将函数名称作为参数传递，通过不使用不必要的匿名函数使内存混乱来获得一点性能：

```
$(document).ready(doSomething);
$(yourElem).on("click", doSomething); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:37:38.870

在加载期间，您可以使用

```
//when window loads
$(window).load(function(){
    functionCallHere();
});

//or when DOM is ready
$(document).ready(function(){
    functionCallHere();
}); 
```

然后点击

```
$(element).click(function(){
    functionCallHere();  //call the function again
}); 
```

`functionCallHere`在这些事件上调用的公共函数的名称在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T05:39:15.623

```
$(document).ready(function(){
  $("#fullDate").datepicker({
    showOn: "button",
    buttonImage: "images/calender.jpg",
    buttonImageOnly: true,

    onClose: function(dateText, inst) {
        $('#year').val(dateText.split('/')[2]);
        $('#month').val(dateText.split('/')[0]);
        $('#day').val(dateText.split('/')[1]);
    }
  });
  $("#fullDate").datepicker("show"); // this will run once.
}); 
```

# javascript - Javascript 在 Chrome 和 IE 中不工作，但在 Firefox 中工作

> ID：10892110
> 
> 赞同：1
> 
> 时间：2012-06-05T05:36:11.020
> 
> 标签：javascript

这是在 Mozilla 中完美运行但在 IE 和 chrome 中无法完美运行的 javacript 代码。

```
function updateTable(tableID) 
{ 
    alert('inside the update'); 
    var arrayTemp=new Array();
    var str='';
    var arraycount=0;
    try {
        var table = document.getElementById(tableID);
        var rowCount = table.rows.length;

        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[4].childNodes[0];                
            if(null != chkbox && true == chkbox.checked) {

           str+=  document.getElementById("flag"+i).value;
           str+=',';
           str+=  document.getElementById("Selected"+i).value;
           str+='`';

            } 

        }
        document.forms[0].updatearray.value=str;
        alert(' value is '+document.forms[0].updatearray.value);
        document.forms[0].submit();

        alert('Checkingdddddd');
    }catch(e) {
        alert(e);
    }
} 
```

此处表格未在 IE 和 Chrome 中提交。请告知是否有任何补救措施。

我已经测试过，发现 document.forms("formname").submit() 仅适用于 chrome 和 IE，但如果我使用 document.forms["formname"].submit 它在 chrome 和 IE 中不起作用很奇怪，需要一位伟大的 javascript 魔术师的好建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:11:47.787

我发现补救措施使用 document.forms[0].submit 因为它在 Mozilla 、 IE 和 Google chrome 中支持。

答案是：

```
 Replace:

          document.forms[0].submit();

          To:

          document.forms[0].submit; 
```

# redirect - 识别 Struts2 拦截器中的重定向/转发动作

> ID：10892111
> 
> 赞同：0
> 
> 时间：2012-06-05T05:36:18.447
> 
> 标签：redirect, struts2, action, interceptor

我一直在寻找一种方法来识别拦截器中类型为“重定向/转发”的 Struts 2 操作，以便我可以为该特定类型的操作添加一些通用代码。

在 Struts2 中有什么方法可以找到它是什么类型的 Action 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:36:21.427

没有什么叫做 RedirectAction 或 ForwardAction，你需要的是 Redirect Result Type。

在您的拦截器中，您有一个`ActionInvocation`传递给您的`intercept`方法的实例，您可以从`ActionInvocation`对象获取结果，然后根据您的用例进行检查。[此处](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/Result.html)列出了不同的结果

```
public String intercept(ActionInvocation actionInvocation) {
   //After invoking the action you can get the result of from ActionInvocation.
   Result result = actionInvocation.getResult();
   //As per your use case you can check against different types.
} 
```

# mysql - 在左连接表中创建缺失的行

> ID：10892112
> 
> 赞同：2
> 
> 时间：2012-06-05T05:36:20.020
> 
> 标签：mysql, database, insert

我有两个共享主键的表。我设计的不好，结果发现需要保证a1中的每条记录在a4中都有对应的记录

询问：

```
SELECT a1.id1, a4.id4
FROM  `a1` 
LEFT JOIN  `a4` ON a1.id1 = a4.id4 
```

结果：

```
a1.id1.............a4.id4  
00000001    ......NULL  
00000002    ......NULL  
00001001    ......00001001  
00001002    ......00001002 
```

在 a4 中插入与 a1 对应的键的行的最佳方法是什么？在上面的示例中，我需要将记录 00000001 和 00000002 插入到 a4 中。00001001 和 00001002 应该单独留下，因为它们已经存在于 a1 和 a4 中

数据库架构：

```
CREATE TABLE `a1` (
  `id1` int(8) unsigned zerofill NOT NULL auto_increment,
  `Shrt_Desc` varchar(200) default NULL,
  `ptype` int(5) NOT NULL,
  `userid` tinyint(5) NOT NULL,
  `submit_id` int(11) NOT NULL,
  `submit_time` int(11) NOT NULL,
  `update_id` int(11) NOT NULL,
  `update_time` int(11) NOT NULL,
  `pub` tinyint(1) default '1',
  `plate` tinyint(1) NOT NULL,
  `item` varchar(11) default NULL,
  PRIMARY KEY  (`id1`),
  KEY `fb_groupbyorder_Shrt_Desc_INDEX` (`Shrt_Desc`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=124106 ;

CREATE TABLE `a4` (
  `id4` int(8) unsigned zerofill NOT NULL,
  `Water` decimal(10,2) default NULL,
  PRIMARY KEY  (`id4`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T05:48:14.740

```
INSERT INTO a4 (id4)
SELECT a1.id1
FROM  `a1` 
LEFT JOIN  `a4` ON a1.id1 = a4.id4
WHERE a4.id4 IS NULL 
```

[http://sqlfiddle.com/#!2/91dc1/8](http://sqlfiddle.com/#!2/91dc1/8)

# c++ - 如何在 C++ 中的 System() Shell 脚本中使用逗号？

> ID：10892114
> 
> 赞同：0
> 
> 时间：2012-06-05T05:36:31.487
> 
> 标签：c++

我正在尝试创建一个应用程序，让用户可以找到占用大量内存的进程。我正在使用以下代码执行此操作：

system("tasklist /fi "status eq 没有​​响应"");

我的编译器不喜欢我把逗号放在哪里。

这是我试图执行的 cmd 命令（或 shell 脚本，等等）：tasklist /fi “status eq notresponsive”。

我应该把逗号放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:41:21.197

您需要在`system`调用中正确引用命令行，例如：

```
system("/bin/echo \"a, b, c\""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:42:27.303

这称为“引号”而不是逗号。如果要在字符串中插入引号，则需要使用转义字符对其进行转义，`\` 如下所示：

```
system("tasklist /fi \"status eq not responding\""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T05:45:16.793

在 " 之前使用 \ 作为转义字符，例如

system("tasklist /fi \"status eq 没有​​响应\"");

# javascript - 表单字段选择的css更改

> ID：10892118
> 
> 赞同：1
> 
> 时间：2012-06-05T05:36:54.750
> 
> 标签：javascript, css

我正在尝试像kickstarer（https://www.kickstarter.com/login）这样的登录和注册表单

谁能建议我应该在哪里看？当一个人点击登录或注册字段时，我试图让灰色边框效果移动。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:46:13.683

```
input[type="text"]:focus, input[type="password"]:focus, textarea:focus, select:focus{
  border: 1px solid #ccc;
  box-shadow: 0 0 5px #b4d7f9;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:41:27.897

使用 CSS

```
input:focus,select:focus,textarea:focus{border:solid 1px #ccc;} 
```

# mercurial - 我在 mercurial 源代码中找不到 diff 二进制的代码

> ID：10892125
> 
> 赞同：0
> 
> 时间：2012-06-05T05:37:53.573
> 
> 标签：mercurial, diff, binary-diff

我正在阅读 mercurial 的源代码，但是我在 bdiff.c 和 mdiff.py 中看到的是处理文本，而不是二进制文件。但是他们说 mercurial 将所有文件都视为二进制文件。我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:23:27.657

`bdiff.c`并且`mdiff.py`两者在二进制文件上都可以正常工作。它们不会为您提供最佳差异，因为它们依赖于换行符的存在，但它们可以正常工作（您不会丢失任何数据）。

# javascript - javascript 语法调用对象属性

> ID：10892127
> 
> 赞同：0
> 
> 时间：2012-06-05T05:38:12.597
> 
> 标签：javascript, jquery, html, object, javascript-objects

我正在尝试调用 msgs.loginUsername 属性，方法是使用 jQuery 从 html 中动态获取“loginUsername”。但是，我无法弄清楚如何构造语法以使其正常工作。

物体：

```
msgs = {
    loginUsername : "Username is required.",
    loginPassword : "Password is required."
}; 
```

电话：

```
function validateElements(_class) {
var errors = 0;
jQuery(_class).each(function() {
    if (!validate.required(this)) {
        var name = jQuery(this).attr('name'); //TROUBLE
        alert(msgs.name);                     //TROUBLE
        errors += 1;
    }
});
return errors > 0 ? false : true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:40:16.347

尝试使用`msgs[name]`where name = "loginUsername" 或 "loginPassword"

```
function validateElements(_class) {
var errors = 0;
jQuery(_class).each(function() {
    if (!validate.required(this)) {
        var name = jQuery(this).attr('name'); //TROUBLE
        alert(msgs[name]);                     //TROUBLE
        errors += 1;
    }
});
return errors > 0 ? false : true;
} 
```

# vb.net - vb.net 中的一个或多个必需参数没有给出值

> ID：10892128
> 
> 赞同：0
> 
> 时间：2012-06-05T05:38:13.660
> 
> 标签：vb.net

我收到了这个错误

> 没有为一个或多个必需参数指定值

在我的代码的这一部分

```
Private Sub RefreshData()
    con.Open()

    cmd.CommandText = ("SELECT pCode as [ID], lampname as [NAME],  costumer, proddate, line/shift, watts, volts, filam, base, basepos,lumen, life, atm, fuse, exp, type,testCode, textVolt, samplesize, dateStart, timeStart, LNWatts1, LNWatts2, LNWatts3, LNWatts4, LNWatts5, LNLumen1, LNLumen2, LNLumen3, LNLumen4, LNLumen5, LPW1, LPW2, LPW3, LPW4, LPW5, RLWatts1, RLWatts2, RLWatts3, RLWatts4, RLWatts5, RLLumen1, RLLumen2, RLLumen3, RLLumen4, RLLumen5, LPWF1, LPWF2, LPWF3, LPWF4, LPWF5, InspectionTime1, InspectionTime2, InspectionTime3, InspectionTime4, InspectionTime5, InspectionDate1, InspectionDate2, InspectionDate3, InspectionDate4, InspectionDate5, TH1, TH2, TH3, TH4, TH5, EL1, EL2, EL3, EL4, EL5, Dispo1, Dispo2, Dispo3, Dispo4, Dispo5, CF1, CF2, CF3, CF4, CF5, Reason1, Reason2, Reason3, Reason4, Reason5, LNAve1, LNAve2, LNAve3, LNAve4, LNAve5, LNAve6, LNAve7, LNAve8, LNAve9, LNAve10, LNAve11, LNAve12, LNAve13, LNsd1, LNsd2, LNsd3, LNsd4, LNsd5, LNsd6, LNsd7, LNsd8, LNsd9, LNsd10, LNsd11, LNsd12, LNsd13, TorqueTest, zeroHour, EndOfLife, PFCPTime1, PFCPTime2, PFCPTime3, PFCPTime4, PFCPTime5, PFCPDate1, PFCPDate2, PFCPDate3, PFCPDate4, PFCPDate5, BatchNumber FROM records ORDER by ID")

    Dim da As New OleDbDataAdapter
    Dim dt As New DataTable

    da.SelectCommand = cmd
    da.Fill(dt)   -- I get the error right here

    con.Close()
End Sub 
```

那会有什么问题？希望有人帮忙，我只是vb.net的新手..

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:23:14.550

`/`尝试在带有字符的字段周围加上括号

```
proddate, [line/shift], watts, etc... 
```

否则，您必须痛苦地确保您在 SQL 字符串中键入的每个字段都确实存在于`[records]`表中。

鉴于您查询中的字段数量，我认为只要做`SELECT * FROM [records] ORDER BY pCode`就足够了。

此外，请确保在 order 子句中使用真实的字段名称：

```
ORDER BY pCode 
```

# php - MongoDB PHP插入子数组

> ID：10892129
> 
> 赞同：1
> 
> 时间：2012-06-05T05:38:21.503
> 
> 标签：php, mongodb, insert, sub-array

好的，不确定 mongodb 是否可以做到这一点，但我需要将以下 JSON 插入到我的货币数据库中。

我们要更新的部分是exchangehistory，我们需要保留当天的所有汇率历史。第二天，例如

例如

```
{"from":"USD","currentexchange":[{"to":"NZD","rate":"1.3194","updated":"6\/5\/20121:38am"},{"to":"KWD","rate":"0.2807","updated":"6\/5\/20121:38am"},{"to":"GBP","rate":"0.6495","updated":"6\/5\/20121:38am"},{"to":"AUD","rate":"1.0228","updated":"6\/5\/20121:38am"}],"exchangehistory":{"6\/5\/2012":[{"1:38am":[{"to":"NZD","rate":"1.3194","updated":"1:38am"}]},{"1:38am":[{"to":"KWD","rate":"0.2807","updated":"1:38am"}]},{"1:38am":[{"to":"GBP","rate":"0.6495","updated":"1:38am"}]},{"1:38am":[{"to":"AUD","rate":"1.0228","updated":"1:38am"}]}]}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:47:46.323

我很可能不会将它存储在这样的数组中。我将创建一个平面数据结构，它具有：

```
{
    from: "USD",
    to: "EUR",
    updated: new DateTime("2012-05-04 13:43"),
    rate: 1.235,
},
{
    from: "USD",
    to: "EUR",
    updated: new DateTime("2012-05-06 13:43"),
    rate: 1.24,
},
{
    from: "USD",
    to: "AUD",
    updated: new DateTime("2012-05-06 13:43"),
    rate: 1.43,
} 
```

这在数据库上要轻得多，因为文档永远不会增长。如果文档增长，它们必须被移动。您还可以非常轻松地查询当前汇率：

```
$collection->find( array( 'from' => 'USD', 'to' => 'EUR' ) )
           ->sort( 'updated' => -1 )->limit( 1 ); 
```

并访问所有历史信息：

```
$collection->find( array( 'from' => 'USD', 'to' => 'EUR' ) )
           ->sort( 'updated' => -1 )->skip( 1 ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T05:56:37.373

这不适用于 PHP，但它可能有用。您必须从您的 json 字符串中创建一个 BSON 对象才能存储在数据库中。 [从 JSON 创建 BSON](https://stackoverflow.com/questions/3117167/creating-bson-object-from-json-string) 您也可以使用 MongoDB PHP 驱动程序教程和文档。它们可以在这里找到：[MongoDB PHP 驱动程序教程](http://www.php.net/manual/en/mongo.tutorial.php)

# visual-c++ - 在对话框中单击确定在 SDI 中显示输出文本

> ID：10892130
> 
> 赞同：0
> 
> 时间：2012-06-05T05:38:31.753
> 
> 标签：visual-c++, visual-c++-2010

当我在 SDI 窗口中按下菜单项时，会显示一个对话框。在对话框中，当我按下 OK 按钮时，它应该在 SDI 窗口中显示“SUCESS”...在 ONVIEW() 中，我必须使用`pDC->TEXTOUT()`但如何在按下 OK 按钮时执行该语句.. 我正在使用 Visual C++ 6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:58:50.883

您应该定义一个用户定义的消息并使用 PostMessage 在 SDI 窗口中调用您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T23:45:40.417

我正在假设您的对话框是模态的。

您不必定义或发送任何消息。从对话框中检索数据。

假设您将 2D 矢量数据存储在某种声明为对话框成员变量的数组中。

当按下 OK 按钮并将数据复制到视图的相同类型的成员变量中。用它来画你想要的任何东西。

```
void CSDIPopupSampleView::OnViewDialog() 
{
    CSimpleDlg dlg;

    int iResponse = dlg.DoModal();
    if(IDOK == iResponse)
    {
        //Copy data from a dialog here.
    }

    Invalidate(); // this will cause redraw
} 
```

# c# - TypeConverter 将 byte[] 转换为 Bitmap

> ID：10892131
> 
> 赞同：3
> 
> 时间：2012-06-05T05:38:31.950
> 
> 标签：c#, .net-4.0, bitmap, typeconverter

我有这个：

```
byte[] ar = new byte[ArrayAnsammlung[DurchLaeufer].Length];
ArrayAnsammlung[DurchLaeufer].CopyTo(ar, 0);
TypeConverter tc = TypeDescriptor.GetConverter(typeof(Bitmap));
try
{
    bild = (Bitmap)tc.ConvertFrom(ar);
}
catch (Exception ddd)
{
    Console.WriteLine(ddd.ToString());
} 
```

ar 包含位图数据，即 Blue-Green-Red-Alpha-Blue....

我正在尝试将其转换为位图图片。这是控制台显示的内容：

```
A first chance exception of type 'System.ArgumentException' occurred in System.Drawing.dll
System.ArgumentException: Invalid Parameter.
   at System.Drawing.Image.FromStream(Stream stream, Boolean useEmbeddedColorManagement, Boolean validateImageData)
   at System.Drawing.ImageConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value)
   at System.ComponentModel.TypeConverter.ConvertFrom(Object value)
   at SK.MainWindow.thread() in MainWindow.xaml.cs:Zeile 523. 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:50:24.220

尝试这个 ：

```
public static Bitmap BytesToBitmap(byte[] byteArray)
{
    using (MemoryStream ms = new MemoryStream(byteArray))
    {
        Bitmap img = (Bitmap)Image.FromStream(ms);
        return img;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:51:14.913

我不确定为什么`TypeConverter`不起作用，但您可以使用`Bitmap`类的 Stream 构造函数轻松实现这一点：

```
var memoryStream = new MemoryStream(ar)
var bild = new Bitmap(memoryStream); 
```

请注意，根据[MSDN](http://msdn.microsoft.com/en-us/library/z7ha67kw.aspx)，`memoryStream`必须在对象的生命周期内保持活动状态。

# php - 如何从类中的数组中调用函数

> ID：10892133
> 
> 赞同：1
> 
> 时间：2012-06-05T05:38:39.437
> 
> 标签：php, arrays, class, function

我的问题是，我有一个函数存储在一个数组中，该数组是类的一部分。我想从这个数组中调用一个函数，`call_user_func()`但是我似乎不知道如何写这个。

从不在类中的数组中调用函数可以这样完成。

```
 $thearray = array( 0 => 'funcone', 1 => 'functwo');
 call_user_func($thearray[0]); 
```

但是，当我尝试对类中的数组执行此操作时，它确实发送了工作，我想是因为我需要以某种方式引用该类。我知道你可以从这样的类中调用一个函数：

```
 call_user_func(array($myclass, 'funcone')); 
```

`call_user_func()`但我的问题是如何使用;从类中的数组中调用函数 我希望有人可以帮助我，我有一种感觉，这只是它的写作方式的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:46:28.463

假设类中的数组是公共的，您可以执行以下操作：

```
call_user_func(array($myclass, $myclass->thearray[0])); 
```

这回答了你的问题吗？

*更新*：

我尝试了以下方法并且成功了：

```
<?php
class Foo {
    public function bar() {
        echo "quux\n";
    }

    public $baz = array('bar');
}

$foo = new Foo();
call_user_func(array($foo, $foo->baz[0]));

shell$ php userfunc.php 
quux 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:50:42.183

试试这个？

```
call_user_func(array($this, $thearray[0])); 
```

[http://codepad.org/lCCUJYLK](http://codepad.org/lCCUJYLK)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:12:19.787

请耐心等待，因为它会有点长。:)

好吧，我认为我们可以通过 PHP 的`overloading`概念来实现这一点，正如你们大多数人所知，它与其他面向对象的语言完全不同。

从 PHP 手册的重载页面 - `Overloading in PHP provides means to dynamically "create" properties and methods. These dynamic entities are processed via magic methods one can establish in a class for various action types.`( [http://www.php.net/manual/en/language.oop5.overloading.php](http://www.php.net/manual/en/language.oop5.overloading.php) )

这种重载魔法大部分依赖于 PHP 的[魔法方法](http://www.php.net/manual/en/language.oop5.magic.php)

如果你看到魔法方法的列表，这里可以帮助我们的是[__call()](http://www.php.net/manual/en/language.oop5.overloading.php#object.call)

**每次调用不存在的类方法时都会调用魔术方法 __call。**

这将帮助我们防止抛出任何错误/设置任何自定义消息。因此，这是一个我们可以用来解决上述问题的示例。

```
<?php
class Test
{
    private $arr = array( 'funcone', 'functwo' );

    public function __call( $func_name, $func_args ) {
        echo "Method called: " . $func_name . "\n";
        echo "Arguments passed: " . $func_args . "\n";

        // this will call the desired function.
        call_user_func( array( $this, $this->arr[ $func_args ] ) );
    }
}

$obj = new Test;
// run the first function in the array
$obj->runTest(0);
?> 
```

希望有帮助。如果这不起作用，我相信它可以通过一些试验和错误进行调整。（现在，我说的是 PHP，对吗？调整...；））

# android - 样式化无操作栏选项卡

> ID：10892134
> 
> 赞同：2
> 
> 时间：2012-06-05T05:38:44.363
> 
> 标签：android, tabs, styles

在我的应用程序中，我混合使用了操作栏选项卡和“旧”TabWidget。使用自定义样式主题对操作栏选项卡进行样式设置没有问题。

```
<style name="MyTheme" parent="@android:style/Theme.Holo">
    <item name="android:logo">@drawable/logo</item>
    <item name="android:actionBarTabStyle">@style/MyActionBarStyle</item>
    <item name="android:tabWidgetStyle">@style/MyTabStyle</item>
</style> 
```

不过，TabWidgetStyle 似乎对“旧”TabWidget 没有相同的效果。我一直在尝试将蓝色底部选项卡指示器颜色更改为红色，但没有成功。有没有人有关于如何做到这一点的任何提示？我是否必须创建一个单独的选项卡类并将其用作选项卡指示器？

谢谢。

# user-interface - 如何在 wxpython 中禁用工具栏 LabelTool

> ID：10892137
> 
> 赞同：2
> 
> 时间：2012-06-05T05:39:09.233
> 
> 标签：user-interface, wxpython

我`LabelTool`在工具栏中创建了一个项目。我想知道如何禁用这个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:21:59.393

为什么要禁用标签？标签仅供查看。无论如何，用户都无法与它们交互。

编辑：看起来 Robin Dunn 今天在 wxPython 邮件列表上回答了一个类似的问题（也许是你的？）：[https ://groups.google.com/forum/?fromgroups#!topic/wxpython-users/eO9GXO8R6eM](https://groups.google.com/forum/?fromgroups#!topic/wxpython-users/eO9GXO8R6eM)

他举了以下例子：

```
toolbar.EnableTool(toolId, True)  # or False to disable 
```

您将使用哪个代码启用/禁用任何工具栏小部件

# javascript - 进度条元素破坏 Chrome 渲染（除非开发工具打开）

> ID：10892142
> 
> 赞同：2
> 
> 时间：2012-06-05T05:39:31.700
> 
> 标签：javascript, html, google-chrome, progress

**更新添加小提琴：http: [//jsfiddle.net/wvUqy/6/](http://jsfiddle.net/wvUqy/6/)**

我在 Chrome 中有一个 page_action，它解析来自 XHR 的响应以制作供下载的视频剪辑菜单。每个剪辑都有一个`<span class="status">`默认为空白，排队时显示“待处理”，并根据下载停止的方式更改为“中断”（红色）或“完成”。这些行为，以及`<span class="status">`随着下载完成百分比的更新都可以正常工作。

我尝试将显示百分比字符串换成`<progress>`条形，但是一旦我将该元素引入文档中，**只有**在我不使用 Chrome 开发工具时，我才会开始出现渲染问题。

这是一个 2 分钟的奇怪行为视频： [http ://www.youtube.com/watch?v=M50F5ly93MM](http://www.youtube.com/watch?v=M50F5ly93MM)

顶部的小提琴链接将输出到控制台，因为它会定期（每 5 秒）更改`<span>`and`<progress>`元素的显示属性，但它们永远不会出现。如果您注释掉该行`subDiv.appendChild('progressBar')`并且不更改任何其他内容，则 的行为`<span class="Status">`会神奇地固定。

`<progress>`当文档中没有元素时，一切都按预期工作；如果`setInterval`var 是在按钮的`onclick`函数中创建的，它会按预期工作；如果您在开发工具中“检查元素”结果窗格，它会按预期工作。

在所有情况下，它都可以在 Firefox 中按预期工作，但我正在尝试专门构建一个 Chrome 扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:09:06.843

您很可能遇到了[https://bugs.webkit.org/show_bug.cgi?id=84242](https://bugs.webkit.org/show_bug.cgi?id=84242)的表现- 一分为二给了我[http://trac.webkit.org/changeset/83065](http://trac.webkit.org/changeset/83065)处理重大重写的`<progress>`元素实现。我会将那个错误与这个问题联系起来——也许前者会得到更多的关注。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T10:20:29.810

我最近调查了一个进度条错误。我将错误提交给 webkit，您可能会发现它相关：[https](https://bugs.webkit.org/show_bug.cgi?id=100507) ://bugs.webkit.org/show_bug.cgi?id=100507 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T01:57:12.583

所以显然有一种解决这个问题的方法：http: [//jsfiddle.net/wvUqy/9/](http://jsfiddle.net/wvUqy/9/)

由于我不太明白的原因，在更新and元素时对包含`<div>`（例如`ChildContainer.style.display = ChildContainer.style.display;`）进行微不足道的更新将更正呈现行为。`<progress>``<span>`

我已经在我的 page_action 脚本中实现了这一点，它工作正常。如果在 Chrome 中解决了这个错误会很好，但这是一个很好的临时解决方案。

# android - 如何获得与垂直方向或水平方向相同的 GUI？

> ID：10892151
> 
> 赞同：-2
> 
> 时间：2012-06-05T05:40:13.707
> 
> 标签：android, screen-orientation

我开发了一个应用程序。在那里我得到了完美的图形用户界面，但是当我运行我的模拟器（按 Ctrl+F11）时，一些文本和按钮将被遗漏。我搜索了很多网站，但我没有得到解决方案。

请任何人提供解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:45:09.340

为了解决这些问题，您应该为不同的不同 1- 创建两个布局：在资源侧创建一个新文件夹是**layout-land**然后将您的横向布局放在此文件夹中。2-：另一个是用于纵向模式的，它放在布局文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T05:56:16.397

您可以通过创建不同的布局来创建您的应用程序以支持横向模式。只需您可以像这样在 res 文件夹中创建一个文件夹 -> /res/layout-land 并复制您的布局并对其进行必要的更改（对于横向）。

请阅读[文档](http://developer.android.com/guide/practices/screens_support.html)以获取更多详细信息

[教程](http://www.tekkie.ro/quick-n-dirty/how-to-change-your-layout-in-android-landscape-portrait-mode/)

# javascript - 新日期（）格式

> ID：10892154
> 
> 赞同：3
> 
> 时间：2012-06-05T05:40:26.923
> 
> 标签：javascript, date

我已经坚持了一段时间，需要一些帮助。
我有一个使用显示的日期/时间`"new date()"`。
除了需要它来显示 yyyy MMM dd hh:mm:ss 之外，它工作得很好。
当前显示“ `Thu May 31 2012 13:04:29 GMT-0500 (CDT)`”。
我需要它看起来像“ `2012 May 31 13:04:29`”。

任何帮助都是极好的！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T05:43:50.633

当我进行大量复杂且不同的日期格式设置时，我喜欢使用[moment.js ，但这也应该适用于您：](http://momentjs.com/)

```
var m_names = new Array("January", "February", "March", 
"April", "May", "June", "July", "August", "September", 
"October", "November", "December");

var mydate = new Date();
var curr_date = mydate.getDate();
var curr_month = mydate.getMonth();
var curr_year = mydate.getFullYear();

var mydatestr = '' + curr_year  + ' ' +
curr_month + ' ' + 
curr_date+ ' ' +
mydate.getHours() + ':' +
mydate.getMinutes() + ':' + 
mydate.getSeconds() 
```

..edit.. 如果您使用 moment.js，这将是多么简单

```
var day = new Date()
var dayWrapper = moment(day); 
var dayString = dayWrapper.format("YYYY MMM D H:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T05:52:48.793

使用标准 JavaScript，您必须依赖[Date 对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)为您提供的内容：

```
var months = ['Jan', 'Feb', 'Mar', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
now = new Date(),
formatted = now.getFullYear() + ' ' + months[now.getMonth()] + ' ' + 
    now.getDate() + ' ' + now.getHours() + ':' + now.getMinutes() + ':' + 
    now.getSeconds(); 
```

您可能需要填充您的个位数，但这是读者的练习:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T05:55:03.467

```
DateTime visitDate = DateTime.Parse("Thu May 31 2012 13:04:29");
        Label1.Text = visitDate.ToString("yyyy MMM dd HH:mm:ss"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T05:46:34.017

这里有几个链接可以帮助你

[http://blog.stevenlevithan.com/archives/date-time-format](http://blog.stevenlevithan.com/archives/date-time-format)

[http://www.webdevelopersnotes.com/tips/html/javascript_date_and_time.php3](http://www.webdevelopersnotes.com/tips/html/javascript_date_and_time.php3)

或使用纯 javascript 你可以做到这一点

```
var month=new Array();
month[0]="January";
month[1]="February";
month[2]="March";
month[3]="April";
month[4]="May";
month[5]="June";
month[6]="July";
month[7]="August";
month[8]="September";
month[9]="October";
month[10]="November";
month[11]="December";

var d = new Date();
var x = document.getElementById("demo");
var nmonth=month[d.getMonth()];
var nyear = d.getFullYear(); 
var nday = d.getDate();
var nhours = d.getHours()
var nminutes = d.getMinutes();
var nseconds=d.getSeconds();

var wholesyting=nyear+" "+nmonth+" "+nday+" "+nhours+":"+nminutes+":"+nseconds; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T05:57:37.933

您可以对日期的字符串表示执行以下操作：

```
varname.replace(/^\S+\s(\S+\s\S+\s)(\S+\s)(\S+)\s.*$/, "$2$1$3"); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-05T05:47:57.623

```
SimpleDateFormat format = new SimpleDateFormat("yyyy MMM dd hh:mm:ss");
Date dated = format.parse(format.format(new Date())); 
```

# iphone - 有没有办法在 cocos2d 中找到图像的确切边界，而不是制作该图像的矩形？

> ID：10892156
> 
> 赞同：1
> 
> 时间：2012-06-05T05:40:28.250
> 
> 标签：iphone, objective-c, cocos2d-iphone

我想用小图像的形状切割大图像的一部分。有没有办法找到小图像的确切形状，而不是使用boundingBox制作该图像的矩形？请回复..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T08:26:18.230

您可以通过用较小的精灵掩盖较大的精灵来做到这一点。

在这里，您有一个很棒的教程：

[http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0](http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0)

这是他们用来玩混合功能的工具

[http://www.andersriggelsen.dk/glblendfunc.php](http://www.andersriggelsen.dk/glblendfunc.php)

# database - 代理键作为外键

> ID：10892160
> 
> 赞同：1
> 
> 时间：2012-06-05T05:41:01.027
> 
> 标签：database, database-design

是否将外键设置为父表费用的代理？

因为我必须加入那个父/引用表来显示自然键。

但是为什么最好将外键设置为引用表的代理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:45:29.787

从某种意义上说，在某些不需要使用自然键的情况下需要 JOIN （正如您已经指出的那样），这是昂贵的。此外，自然键通常更适合[聚类](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)，并且有时对于[正确建模菱形依赖关系](https://stackoverflow.com/a/9082972/533120)是必需的。

另一方面，使用“更瘦”的代理键可以节省一些空间并简化更新（尤其是当有多个 FK 级别时）。

这两种方法都不是绝对“更好”的——这是一个妥协的问题。

# c# - 以编程方式将输出写入 Microsoft Excel 时出错

> ID：10892161
> 
> 赞同：1
> 
> 时间：2012-06-05T05:41:01.830
> 
> 标签：c#, .net, excel, export-to-excel

我在 .NET 4.0 中使用 C# 开发了一个 winforms 应用程序，最终用户在其中选择一个输入 Excel 文件。然后，该程序会根据我的应用程序的业务逻辑生成一个带有额外单元格的输出 Excel 文件。

选择输入文件并运行我的应用程序后，如果我在我的机器上打开任何其他 excel 表，那么我看到输出 excel 文件仍以只读模式写入，如果我关闭打开的 excel 文件，那么我的应用程序会抛出错误.

如何在整个输出完全写入之前停止打开只读 excel 工作表？

# c++ - 正确执行全局配置

> ID：10892167
> 
> 赞同：20
> 
> 时间：2012-06-05T05:41:38.417
> 
> 标签：c++, global-variables, constants, configuration-files

我的目标是在我正在开发的 C++ 游戏中拥有全局常量（以表示一些图形信息等）。我目前的实现是将它们全部扔到一个 .h 中并将它们包含在任何地方。这行得通，除了每次我更改设置时，都必须重新编译整个代码库。

所以，我的下一个想法是将它们扔到一些配置 txt 文件中并解析它们，这样当设置更改时实际上不会更改任何代码。解析器很简单，我可以将值放入常量中，但是因为解析器是一个代码块，所以常量不再是全局的。

有没有解决这个问题的好方法？也许某种方式可以使它们成为全局，尽管它们处于一个块中，或者某种方式可以避免在更改设置时重新编译所有内容？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-05T06:17:22.390

我用来解决这个问题的方法是将变量放在一个单独的全局命名空间中，该命名空间位于一个名为的头文件中`config.h`，然后在任何地方都包含该文件。

```
// In config.h

#ifndef CONFIG_H
#define CONFIG_H

namespace config
{
    extern int some_config_int;
    extern std::string some_config_string;

    bool load_config_file();
}

#endif 
```

在源文件中，您*定义*变量并将它们设置为默认值。此源文件还包含从配置文件加载变量的代码。

```
// In config.cpp

namespace config
{
    int some_config_int = 123;
    std::string some_config_string = "foo";
}

bool config::load_config_file()
{
    // Code to load and set the configuration variables
} 
```

现在在每个源文件中，您都需要配置变量，包括`config.h`并访问它们，如`config::some_config_int`.

但是，没有解决这个问题的“正确”方法，所有可行的方法在我看来都是正确的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-05T08:11:06.593

另一种方法是创建一个单例类。

```
#include <fstream>
#include <map>
#include <string>

class ConfigStore
{
public:
    static ConfigStore& get()
    {
        static ConfigStore instance;
        return instance;
    }
    void parseFile(std::ifstream& inStream);
    template<typename _T>
    _T getValue(std::string key);
private:
    ConfigStore(){};
    ConfigStore(const ConfigStore&);
    ConfigStore& operator=(const ConfigStore&);
    std::map<std::string,std::string> storedConfig;
}; 
```

这里配置保存在一个map中，也就是说只要parseFile可以读取文件，getValue可以解析类型，添加新key就不需要重新编译config类。

用法：

```
std::ifstream input("somefile.txt");
ConfigStore::get().parseFile(input);
std::cout<<ConfigStore::get().getValue<std::string>(std::string("thing"))<<std::endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T06:03:39.280

如何创建返回可以在 .cxx 文件中指定的常量的函数？例如：

```
// foo.h
const int BAR();

// foo.cxx
const int BAR() {
    return 10;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T06:00:04.787

仅将声明放在头文件中，并将定义放在 cpp 文件中。那么您更改 cpp 文件中的定义不会导致所有代码重新编译

# javascript - 在javascript中使用数组？

> ID：10892171
> 
> 赞同：0
> 
> 时间：2012-06-05T05:42:13.660
> 
> 标签：javascript, arrays

jsp 页面无法识别我`array aa[]`的行中`document.dd.aa[i].value`....具体来说 dd 是我的表单名称....

```
<script type="text/javascript">
function chk()
{
    var errmsg = new String("");
    var aa = new Array("t1","t2");
    for(var i=0;i<=1;i++)
        {
           var ddd = document.dd.aa[i].value;
           if(ddd=="")
               {
                  errmsg += "Empty field:" +"\n";
               }
        }
        alert(errmsg);
}
</script> 
```

提前谢谢:DD...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T05:43:12.317

要访问数组，很简单：

```
var ddd = aa[i]; 
```

此外，最好使用文字创建数组：

```
var aa = ['t1','t2']; 
```

如果`dd`是表单，则`document.dd`返回名为 的 DOM 表单元素`dd`。要访问元素，您需要使用 DOM 遍历方法来遍历元素，例如`getElementById`等`getElementsByTagName`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T05:46:49.513

```
var aa = new Array("t1","t2"); 
```

以上不是表格的一部分。所以`var ddd = document.dd.aa[i].value;`是错误的。

您可以直接访问一个数组。所以就这样做吧。

```
var ddd = aa[i]; 
```

# python - 信号已配置但仍返回 UserProfile 匹配查询不存在

> ID：10892180
> 
> 赞同：0
> 
> 时间：2012-06-05T05:43:15.697
> 
> 标签：python, django

以下表单始终返回**UserProfile 匹配查询不存在。**虽然我配置了信号。

它的工作方式与 inetrpreter 的预期一样。

```
In [1]: from core.models import User

In [2]: u = User.objects.get(id = 1)

In [3]: user_address = u.get_profile().home_address

In [4]: user_address = '20 St.' 
```

**模型**

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

class UserProfile(models.Model):
    url = models.URLField()
    home_address = models.TextField()
    user = models.ForeignKey(User, unique=True)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

**看法**

```
from django.contrib.auth.forms import UserCreationForm
from django.contrib.auth.models import User, Group
from django import forms
from django.shortcuts import render_to_response
from django.http import HttpResponse
from django.template.context import RequestContext
from django.views.decorators.csrf import csrf_protect

class RegisterForm(UserCreationForm):
    """
    Hacking the UserCreationForm class by creating a child class,
    and overriding the save mthod .save().
    Now it should provide email, first_name and last_name fields.
    """
    permission_choices = (
            ('1', 'test1'),
            ('2', 'test2'),
            )
    email      = forms.EmailField(required=False)
    first_name = forms.CharField(required=False)
    last_name  = forms.CharField(required=False)
    url        = forms.URLField()
    permission = forms.ChoiceField(choices=permission_choices)

    class Meta(UserCreationForm.Meta):
        model = User
        fields = ('first_name', 'last_name', 'url', 'username', 'email', 'password1', 'password2', 'permission')

    def save(self, commit=True):
        user = super(RegisterForm, self).save(commit=False)
        user_profile    = user.get_profile()
        user.email      = self.cleaned_data['email']
        user.first_name = self.cleaned_data['first_name']
        user.last_name  = self.cleaned_data['last_name']
        user.permission = self.cleaned_data['permission']
        user_profile.url = self.cleaned_data['url']
        if commit:
            user.save()
            user_profile.save()
        return user

@csrf_protect
def register(request):
    if request.method == 'POST':
        form = RegisterForm(request.POST)
        if form.is_valid():
            new_user = form.save()
            if new_user.permission == '1':
                try:
                    new_user.groups.add(Group.objects.get(name='test1'))
                except Group.DoesNotExist:
                    u = User.objects.get(pk=new_user.pk)
                    u.delete()
                    return HttpResponse('The Organisation you\'ve just choosed doesn\' exist')
            return HttpResponse('OK')
    else:
        form = RegisterForm()

    return render_to_response('registration/user.html', {'form': form}, context_instance=RequestContext(request)) 
```

就像 cberner 所说的那样，我认为这是因为：

> 我相信您会收到该错误，因为您调用了 super(RegisterForm, self).save(commit=False)。如果你使用 commit=False Django 不会发出 post_save 信号，因为模型实际上并没有提交到数据库。

**这是解决方案：**

```
def save(self, commit=True):
    user = super(RegisterForm, self).save(commit=False)
    user.email      = self.cleaned_data['email']
    user.first_name = self.cleaned_data['first_name']
    user.last_name  = self.cleaned_data['last_name']
    user.permission = self.cleaned_data['permission']
    user.save()

    user_profile    = UserProfile(user=user, url=self.cleaned_data['url'])
    if commit:
        user_profile.save()
    return user 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:13:11.453

我相信您会收到该错误，因为您致电`super(RegisterForm, self).save(commit=False)`. 如果您使用`commit=False`Django，则不会发出 post_save 信号，因为模型实际上并未提交给数据库。

# ios5 - RestKit 和 iCloud 目录备份策略

> ID：10892184
> 
> 赞同：2
> 
> 时间：2012-06-05T05:43:23.957
> 
> 标签：ios5, restkit, icloud

我正在开发一个 IOS 5.0+ 项目，该项目使用最新的 RestKit 来下载、映射和保存核心数据。我正在寻找有关使用 RestKit 的 Apple iCloud 存储指南的明确答案。我是否需要采取任何额外的步骤来确保下载用于应用程序的数据不会自动备份到 iCloud 帐户。我是否需要更改所用目录的默认位置。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T07:31:18.880

如果您的 Core Data 存储没有保存在 ubiquity 容器中（请参阅：[URLForUbiquityContainerIdentifier:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)），它将永远不会被同步。

同样在他们声明的文档的“[将 iCloud 与核心数据结合使用](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html)”部分中：

> 设置您的 Core Data 存储以处理 iCloud 只需要您付出一点额外的努力。您必须遵循的步骤取决于您是使用单个 Core Data 存储作为应用程序的中央库，还是为单个文档创建单独的存储。

您必须对同步进行一些显式更改。如果您进一步阅读文档，它们会提到一些键，例如`NSPersistentStoreUbiquitousContentNameKey`. 如果您在 RestKit 源中搜索它，您将找不到它 - 这是因为 RestKit 不会自动与 iCloud 同步（而且它们不能自动同步，因为 iCloud 是一个应用程序级别的同步框架）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:17:56.777

我们的应用程序因将数据库存储在 Documents 文件夹中而被拒绝。数据库中的种子文件或应用程序内容有 3.3MB。当然，我们还将用户创建的内容存储在数据库中。官方声明是：**2.23 应用程序必须遵循 iOS 数据存储指南，否则将被拒绝**

所以现在我们正在检查[技术问答 QA1719](https://developer.apple.com/library/ios/#qa/qa1719/_index.html#//apple_ref/doc/uid/DTS40011342)，以防止数据库同步到 iCloud。

# emacs - Emacs 显示模态快捷键

> ID：10892185
> 
> 赞同：1
> 
> 时间：2012-06-05T05:43:31.290
> 
> 标签：emacs

有没有办法显示模式定义的所有快捷键，例如 dired 和 slime？

假设我处于 dired 模式，是否可以按下一个键来获取命令列表和与之配套的快捷键列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:56:58.963

`C-h``m`显示当前缓冲区的主要模式和次要模式的帮助。

大多数模式帮助都包含一个键绑定列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:26:06.257

`C-h` `b`还给出了所有当前活动的键绑定的列表。

# linux - 无法从目录中删除文件

> ID：10892188
> 
> 赞同：3
> 
> 时间：2012-06-05T05:43:52.240
> 
> 标签：linux, perl

我正在使用**rm**通过 Perl 脚本从目录中删除一些文件，但它会引发错误
`can't exec "rm" no such file or directory`。

命令是这样的：

```
system("rm $directory$files"); $directory$files = /var/spool/mqueue/qf* 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T05:52:45.253

Perl 有一个用于删除文件的内置函数，[`unlink`](http://perldoc.perl.org/functions/unlink.html). 第三个示例显示了如何结合使用它[`glob`](http://perldoc.perl.org/functions/glob.html)来删除文件列表：

```
unlink glob "*.bak"; 
```

或者在你的情况下，

```
unlink glob($directory.$files); 
```

# c# - 将浮点数转换为十六进制会导致比 C# 中预期的位数更多？

> ID：10892191
> 
> 赞同：0
> 
> 时间：2012-06-05T05:44:08.183
> 
> 标签：c#, floating-point, hex

我要将 C# 浮点数转换为 2 个字节，例如我有数字 12.4544，它应该是 0x4147 或 0x41474539，我使用了 bitconverter.doubletoInt64，但它给了我一些奇怪的东西，我怎样才能得到 0x4147 ?

我正在创建一个 MODBUS 从站，我应该将每个浮点数仅发送 2 个字节

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T05:52:11.243

编辑：哦，天哪，天哪，我完全错过了这个，这是简短的回答：

使用`BitConverter.GetBytes`并传递一个浮点数，如此处所示[。](http://msdn.microsoft.com/en-us/library/yhwsaf3w.aspx)

长答案：

BitConverter 不支持单精度浮点数，仅支持`double`s。您必须创建一个 C#“联合”，如下所示：

```
[StructLayout(LayoutKind.Explicit)]
class Floater
{
    [FieldOffset(0)]
    public float theFloat;
    [FieldOffset(0)]
    public int theInt;
} 
```

把你的花车放进去`theFloat`看看`theInt`

# c# - 在实体框架中查找或创建对象

> ID：10892198
> 
> 赞同：4
> 
> 时间：2012-06-05T05:45:02.927
> 
> 标签：c#, entity-framework

我的域模型及其关联如下：

*   `Customer`有很多`Region`s
*   `Region`有很多`Location`s

我们的客户向我们提供了一个包含以下列的 CSV 文件：

*   顾客姓名
*   地区名称
*   地点名称
    *   纬度
    *   经度
    *   ...

基于这些信息，我必须按名称查找或创建客户，按名称查找或创建区域，最后按名称查找或更新位置。

我尝试了以下方法：

```
var customer = from c in _data.Customer
               where c.Name == cells[0]
               select c;

if (customer == null)
    customer = new Customer(...); 
```

我将遵循相同的模式来查找或创建/更新区域和位置，但是，我遇到的问题是 LINQ 查询的类型无法在线转换为`Customer`-object `customer = new customers();`。我需要`customer`稍后引用这个对象，所以我不能有两个单独的变量。

我将如何在实体框架中实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T05:49:27.327

这段代码

```
var customer = from c in _data.Customer
               where c.Name == cells[0]
               select c; 
```

返回所有具有`Name`equals的客户，`cells[0]`因此返回类型将`IQueryable<Customer>`不是单一`Customer`的（这就是`customer = new Customer(...)`不起作用的原因）。

`FirstOrDefault`如果您`SingleOrDefault`想找回一个`Customer`.

所以这应该有效

```
var customer = (from c in _data.Customer
               where c.Name == cells[0]
               select c).SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T05:48:54.107

试试这个

```
var customer = (from c in _data.Customer
               where c.Name == cells[0]
               select c).FirstOrDefault();

if (customer == null)
    customer = new Customer(...); 
```

# php - 动态html选择框需要更新mysql

> ID：10892202
> 
> 赞同：0
> 
> 时间：2012-06-05T05:45:19.947
> 
> 标签：php, mysql, html

好的，所以这个有点令人困惑。我有选择由 PHP 生成的下拉列表。它可以是 4 个选择，也可以是 30 个选择下拉菜单。然后是选项值。这是我到目前为止所拥有的

```
<?php while($row = mysql_fetch_assoc($notes)){ ?>
<select name="milestone" id="milestone[<?php echo $row['id']; ?>]">
<option value="Enrollment Date">Enrollment Date</option>
<option value="Discharge Date">Discharge Date</option>
<option value="A/C Start">A/C Start</option>
<option value="Completion Date">Completion Date</option>
</select>
<?php } ?> 
```

如果我有 4 个选择框，我可能有如下数组：里程碑 [2134]、里程碑 [2222]、里程碑 [225] 和里程碑 [1022]

数组编号是我需要使用该特定选择下拉列表的值更新的 mysql 表条目的 ID。我在想也许可以使用里程碑[][id] 并循环遍历它？

由于可能有 20 个选择下拉菜单，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:08:29.033

您想从数据库中获取您的选项值以及 id 吗？那么你应该使用`mysql_fetch_array`or`mysql_fetch_object`代替`mysql_fetch_assoc`. 这个函数只返回结果的数量，而上面的两个返回数字和值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:06:56.883

知道了！

首先，我必须像这样将数组应用于选择的名称并设置 id 值：

```
<select name="milestone[]" class="mstones" id="<?php echo $row['session_id']; ?>"> 
```

然后，使用 jquery，遍历类并创建了一个数组，其值是我可以在 php 中“爆炸”的东西：

```
var milestoneVal = [];
$("select.mstones").each(function(i, selected){
milestoneVal[i] = this.getAttribute('id') + ':' + $(selected).val();
}); 
```

然后，简单的 PHP

```
foreach($_POST['milestone'] as $v){
$m=explode(':',$v);
    //db insert
} 
```

这很棘手，我确信有一个更清洁的解决方案，但它对我有用！很抱歉最初的解释很糟糕，希望这对其他人有帮助。

# java - 使用 POI 应用特定的单元格数据格式

> ID：10892204
> 
> 赞同：4
> 
> 时间：2012-06-05T05:45:42.473
> 
> 标签：java, excel-2007, apache-poi

我需要将特定的数据格式应用于单元格。

```
XSSFCellStyle cellStyle  = workBook.createCellStyle();          
XSSFDataFormat format = workBook.createDataFormat();
cellStyle.setDataFormat(format.getFormat("m/d/yy h:mm"));
dataCell.setCellType(1); //String
dataCell.setCellStyle(cellStyle); 
```

正在写入数据，但问题是格式**仅** 在我打开 excel 表（在 Excel 应用程序中）时应用，在单元格内单击我的数据。
然后按 Enter 键。只有这样才会应用格式。

如何在不单击每个单元格的情况下应用格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:51:28.797

您的问题是您将单元格设置为字符串。在大多数情况下，单元格格式规则仅适用于数字单元格。它们不适用于字符串单元格，那些没有格式化（因为它们已经格式化为字符串！）

```
XSSFCellStyle cellStyle  = workBook.createCellStyle();          
XSSFDataFormat format = workBook.createDataFormat();
cellStyle.setDataFormat(format.getFormat("m/d/yy h:mm"));
dataCell.setCellStyle(cellStyle);

// Set Cell Type not really needed, the setCellValue does it
dataCell.setCellType(Cell.CELL_TYPE_NUMERIC);
// Set a date value (2012-06-05 08:50)
dataCell.setCellValue(new Date(1338878999635)); 
```

当您在 Excel 中打开它时，它应该符合预期

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-21T20:52:03.900

这就是您将单元格格式更改为`Date`.

```
 var workBook = new XSSFWorkbook();

 var sheet = workBook.CreateSheet("Sheet1");

 var dateStyle = workBook.CreateCellStyle();

 var dataFormat = workBook.CreateDataFormat();

 dateStyle.DataFormat = dataFormat.GetFormat("M/D/YYYY");

 row.CreateCell(0).SetCellValue(item.ModifiedDate.HasValue ?  
           item.ModifiedDate.Value.ToShortDateString(): "");
 row.Cells[0].CellStyle = dateStyle; // This will change your cell to date 
format. 
```

# objective-c - 如何解决加载“DetailViewController”笔尖但未设置视图出口的运行时错误。

> ID：10892216
> 
> 赞同：0
> 
> 时间：2012-06-05T05:46:35.933
> 
> 标签：objective-c

我是 iPhone 的初学者，这里出现运行时错误

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“DetailViewController”笔尖，但未设置视图出口。

给出适用于我的代码的任何建议和源代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:26:00.823

如果您可以发布您的 uiviewcontroller 的代码，它会更容易帮助您。我猜你有一些 IBOutlets 在你的 UIViewController 类和 Storyboard 上的相应控制器之间没有正确连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:26:03.350

您必须将 nib 文件的根视图连接到`view`文件所有者（您的 DetailViewController）的属性。

# php - 给定日期的预定数据库更新 - MySQL 和 PHP

> ID：10892217
> 
> 赞同：0
> 
> 时间：2012-06-05T05:46:37.907
> 
> 标签：php, mysql, cron, scheduled-tasks

我有一个要求，我需要每月更新数据库中的一些字段，我知道我可以使用 Cron Jobs，但我无权使用 Cron，那么在 PHP、MySQL、JQuery 中还有其他方法吗或任何其他？

我只需要在预定时间自动更新和插入数据库表中的一些行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:23:56.980

如果您有网站或其他定期访问的站点，您可以在每次访问时检查是否该运行您的工作。如果我没记错的话，wordpress 的工作就是这样工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:24:37.307

你听说过 MySQL 事件调度器吗？

[信息](http://dev.mysql.com/doc/refman/5.1/en/events.html)

[创建事件](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

你可以访问它吗？如果您想检查 event_scheduler 是否正在运行，您可以键入`show processlist`- 用户“event_scheduler”应该运行一个进程。如果没有，您可以随时运行它。

当然最好的方法是添加`event_scheduler = ON`mysql 配置文件（`mysqld`部分）。

# regex - 来自 SMTP mail.log 的 grep 电子邮件

> ID：10892220
> 
> 赞同：1
> 
> 时间：2012-06-05T05:47:07.010
> 
> 标签：regex, grep

假设我有一个来自 smtp 日志的文本文件（如下所示）， grep 提取此日志文件中的电子邮件的正则表达式是什么？

```
Jun  4 17:19:12 username postfix/pickup[22643]: C92866601: uid=33 from=<www-data>
Jun  4 17:19:12 username postfix/cleanup[23012]: C92866601: message-id=<20120604151912.C92866601@username.website.com>
Jun  4 17:19:12 username postfix/qmgr[2591]: C92866601: from=<www-data@email.com>, size=1314, nrcpt=2 (queue active)
Jun  4 17:19:13 username postfix/smtp[23014]: C92866601: to=<foobar@gmail.com>, relay=smtp.domain.com[134.96.7.25]:25, delay=0.5, delays=0.132, delays=11/0.01/0.09/0.21, dsn=2.0.0, status=sent (250 2.0.0 q53M4Dg6001057 Message accepted for delivery)
Jun  4 17:19:13 username postfix/smtp[23014]: C92866601: to=<mail-user@domain.com>, relay=smtp.domain.com[134.96.7.25]:25, delay=0.5, delays=0.132, delays=11/0.01/0.09/0.21, dsn=2.0.0, status=sent (250 2.0.0 q53M4Dg6001057 Message accepted for delivery)
Jun  4 17:19:13 username postfix/qmgr[2591]: C92866601: removed
Jun  4 17:19:13 username postfix/pickup[22643]: E146B6601: uid=33 from=<www-data>
Jun  4 17:19:13 username postfix/cleanup[23012]: E146B6601: message-id=<20120604151913.E146B6601@username.website.com>
Jun  4 17:19:13 username postfix/qmgr[2591]: E146B6601: from=<www-data@email.com>, size=1327, nrcpt=2 (queue active)
Jun  4 17:19:14 username postfix/smtp[23014]: E146B6601: to=<mail-user@domain.com>, relay=smtp.domain.com[134.96.7.31]:25, delay=0.43, delays=0.132, delays=11/0.01/0.09/0.21, dsn=2.0.0, status=sent (250 2.0.0 q53M4Dg6001057 Message accepted for delivery)
Jun  4 17:19:14 username postfix/smtp[23014]: E146B6601: to=<barbar@gmail.com>, relay=smtp.domain.com[134.96.7.31]:25, delay=0.43, delays=0.132, delays=11/0.01/0.09/0.21, dsn=2.0.0, status=sent (250 2.0.0 q53M4Dg6001057 Message accepted for delivery)
Jun  4 17:19:14 username postfix/qmgr[2591]: E146B6601: removed
Jun  4 17:19:14 username postfix/pickup[22643]: EF1606601: uid=33 from=<www-data>
Jun  4 17:19:14 username postfix/cleanup[23012]: EF1606601: message-id=<20120604151914.EF1606601@username.website.com>
Jun  4 17:19:15 username postfix/qmgr[2591]: EF1606601: from=<www-data@email.com>, size=1329, nrcpt=2 (queue active)
Jun  4 17:19:15 username postfix/smtp[23014]: EF1606601: to=<mail-user@domain.com>, relay=smtp.domain.com[134.96.7.31]:25, delay=0.42, delays=0.132, delays=11/0.01/0.09/0.21, dsn=2.0.0, status=sent (250 2.0.0 q53M4Dg6001057 Message accepted for delivery)
Jun  4 17:19:15 username postfix/smtp[23014]: EF1606601: to=<foofoo@gmail.com>, relay=smtp.domain.com[134.96.7.31]:25, delay=0.42, delays=0.132, delays=11/0.01/0.09/0.21, dsn=2.0.0, status=sent (250 2.0.0 q53M4Dg6001057 Message accepted for delivery)
Jun  4 17:19:15 username postfix/qmgr[2591]: EF1606601: removed 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T06:11:41.483

```
 grep -o '[-a-zA-Z0-9.]*@.[^>]*' filename 
```

我认为字母、数字、连字符和点是有效的电子邮件名称。

如果您不确定日志文件中使用的电子邮件名称约定，请尝试以下操作：

```
grep -o '<[^@]*@.[^>]*' filename 
```

上面的命令给出了以 . 开头的电子邮件`<`。

# javascript - 有没有正确的方法来 $.extend jQuery 中的嵌套属性？

> ID：10892222
> 
> 赞同：13
> 
> 时间：2012-06-05T05:47:30.070
> 
> 标签：javascript, jquery

我有什么，我需要什么。这简单。

默认选项（有嵌套属性）：

```
{
  sDom: 'frt<"tfoot"lp>',
  bInfo: false,
  sPaginationType: "full_numbers",
  oLanguage: {
    sSearch: "",
    sLengthMenu: "Show _MENU_",
    oPaginate: {
      sFirst:     "|<<",
      sLast:      ">>|",
      sNext:      ">>",
      sPrevious:  "<<"
    }
  }
} 
```

实际选项：

```
{
  oLanguage: {
    oPaginate: {
      sNext:      "MODIFIED"
    }
  }
} 
```

$.extend 的结果：

```
{
  sDom: 'frt<"tfoot"lp>',
  bInfo: false,
  sPaginationType: "full_numbers",
  oLanguage: {
    oPaginate: {
      sNext:      "MODIFIED"
    }
  }
} 
```

我需要的是使用实际选项正确扩展默认选项并获得以下结果（一个属性已被修改）：

```
{
  sDom: 'frt<"tfoot"lp>',
  bInfo: false,
  sPaginationType: "full_numbers",
  oLanguage: {
    sSearch: "",
    sLengthMenu: "Show _MENU_",
    oPaginate: {
      sFirst:     "|<<",
      sLast:      ">>|",
      sNext:      "MODIFIED"
      sPrevious:  "<<"
    }
  }
} 
```

问题是 $.extend 函数忽略了嵌套属性并且只操作第一级属性。现在我已经手动 $.extend 每个嵌套属性，但我想这不是一个解决方案。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-05T05:53:49.097

您需要通过作为第一个参数传递[的递归副本：](http://jsfiddle.net/nz2DF/)`true`

```
var defaults = {...}
var actual = {...}

//recursively merge to a blank object
console.log($.extend(true,{}, defaults, actual))​ 
```

# aptana - 尝试打开多个 .php 文件时出现“正在使用的工作区”错误

> ID：10892225
> 
> 赞同：2
> 
> 时间：2012-06-05T05:47:53.473
> 
> 标签：aptana, workspace

在过去的一年里，我一直使用 Aptana 作为我的 IDE。我最近购买了一台新计算机并重新安装了 Aptana，但遇到了一个我以前从未见过的 Aptana 问题。通常将 Aptana 设置为我的默认编辑器时，我可以单击一个 .php 文件，它将加载到编辑器中，如果我随后单击另一个 .php 文件，它将加载到一个新选项卡中。

现在，当我单击第二个 .php 文件时，另一个 Aptana 实例启动，我收到工作区正在使用的错误消息。关于可能发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:47:59.977

这是程序中的一个错误 -[错误讨论](https://aptanastudio.tenderapp.com/discussions/problems/2084-opening-new-file-opens-new-aptana)。显然有一个修复，但要获得它，您必须在 Aptana 注册以查看解决方法。对我来说有太多的麻烦和错误，所以我要卸载 Aptana 并从现在开始使用 Netbeans。

# objective-c - 无法从 connectionDidFinishLoading 中的数据解析 JSON – 可能是数据太多？

> ID：10892229
> 
> 赞同：1
> 
> 时间：2012-06-05T05:48:38.243
> 
> 标签：objective-c, ios, json, nsurlconnection, sbjson

我正在向外部 API 发送请求并使用[SBJson parser](http://stig.github.com/json-framework/)解析响应。但是，我怀疑响应太长了，以某种方式变得混乱。

在我的 mainviewcontroller.h 文件中，我进行了设置 `NSMutableData *receivedData;`，以便可以在 mainviewcontroller.m 文件的连接方法中使用它。

但是，在连接完成加载后，我执行以下操作：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *dataString = [[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding];
    NSArray *allData = [dataString JSONValue];
} 
```

但是，我收到一堆错误，说 JSON 格式不正确。所以，当我查看 JSON 时，它很长——但到处都有问题……例如，下面的“updated_at”。

```
 {
            "id": 7844333,
            "position": 3,
            "content": "Cell height is off by 5 pixels",
            "created_at": "2012-06-04T20:31:30-05:00",
            "updated_at": "2ator": {
                "id": 98258,
                "name": "Brian"
            } 
```

我认为上面发生的事情是 updated at 的值为“2012-06...etc”，下一个键值项将是 creator : { id, name } 但它不知何故被混杂在了 updated at 中。

有人有类似的问题吗？我不认为问题出在 JSONValue 上，因为我在解析 dataString 之前将其注销，这就是我发现 JSON 错误的地方。

我的意思是这`NSString *dataString = [[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding];`只是一个长字符串，但其中包含错误的 JSON，因为它是混乱的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:02:09.407

Are you using receivedData by more than one connection at once?

:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T07:16:22.650

我认为你的 json 是错误的。检查只是将 json 文件放入：http: [//jsonlint.com/](http://jsonlint.com/)

如果有效，则：

将 SBJSON 框架类导入您的项目。然后尝试以下代码：

```
 SBJSON *parser=[[SBJSON alloc]init];

NSDictionary * dictionary = [parser objectWithString:responseString]; 
```

这会将您的数据输入字典，然后使用：

```
NSString *firstParseData=[dictionary objectForKey:@"your key"]; 
```

您可以检索数据。希望这将适用于您的情况。

# mysql - 是否可以在不安装的情况下使用mysql数据库？

> ID：10892232
> 
> 赞同：1
> 
> 时间：2012-06-05T05:48:56.480
> 
> 标签：mysql

我已经为 java/j2ee 安装了 eclipse。出于学习目的，我希望在我的系统中可以使用一些数据库。我没有管理员权限。所以没有安装我想使用数据库。在这种情况下可以使用mysql吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:59:39.453

它与 MySQL 不完全相同，但您*可以*设置一个[sqlite](http://www.sqlite.org/)数据库。sqlite 将允许您创建和维护一个本地数据库，该数据库位于单个文件中，而无需特殊的 SQL 权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T14:39:53.740

您可以使用 noinstall Zip 存档。

[http://dev.mysql.com/doc/refman/5.0/en/windows-install-archive.html](http://dev.mysql.com/doc/refman/5.0/en/windows-install-archive.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:00:00.523

它必须是MySQL吗？您可以改用嵌入式 SQL 数据库，例如 derby/javaDB。我认为 MySQL 不可能。

# .net - 为数据网格中的每一行添加删除按钮

> ID：10892233
> 
> 赞同：9
> 
> 时间：2012-06-05T05:48:58.720
> 
> 标签：.net, wpf, datagrid

如何在 WPF 中为数据网格（包含两个字段）中的每一行添加删除按钮。而 datagrid itemsource 是

```
ObservableCollection<Result> 
```

和

```
 public class Result : INotifyPropertyChanged
{
    public string FriendlyName { get; set; }
    public string Id { get; set; }

    public Result(string name, string id)
    {
        this.FriendlyName = name;
        this.Id = id;
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    void OnPropertyChanged(string property)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }

    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-05T06:29:32.437

您可以添加 a`DataGridTemplateColumn`并将 a 添加`Button`到其`CellTemplate`. 然后使用内置`ApplicationCommands.Delete`或您自己`ICommand`的`Button`

```
<DataGrid ItemsSource="{Binding Results}"
          AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="FriendlyName"
                            Binding="{Binding FriendlyName}"/>
        <DataGridTextColumn Header="Id"
                            Binding="{Binding Id}"/>
        <DataGridTemplateColumn Header="Delete">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button Content="Delete"
                            Command="Delete"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

**更新**
如果您不想使用内置的，`Delete`您可以使用自己的`ICommand`. 这是一个简短的示例`RelayCommand`，可在以下链接中找到：http: [//msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。另外，我在这里上传了它：[RelayCommand.cs](https://www.dropbox.com/s/q1xa115pcd68rcx/RelayCommand.cs?dl=0)

```
<DataGrid ItemsSource="{Binding Results}"
          SelectedItem="{Binding SelectedResult}"
          AutoGenerateColumns="False">
    <DataGrid.Columns>
        <!-- ... -->
        <DataGridTemplateColumn Header="Delete">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button Content="Delete"
                            Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}},
                                              Path=DataContext.DeleteCommand}"
                            CommandParameter="{Binding}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

在您的视图模型或代码中

```
private Result m_selectedResult;
public Result SelectedResult
{
    get { return m_selectedResult;}
    set
    {
        m_selectedResult = value;                
        OnPropertyChanged("SelectedResult");
    }
}

private bool CanDelete
{
    get { return SelectedResult != null; }
}

private ICommand m_deleteCommand;
public ICommand DeleteCommand
{
    get
    {
        if (m_deleteCommand == null)
        {
            m_deleteCommand = new RelayCommand(param => Delete((Result)param), param => CanDelete);
        }
        return m_deleteCommand;
    }
}

private void Delete(Result result)
{
    Results.Remove(result);
} 
```

# process - Are processes executed on operating system

> ID：10892241
> 
> 赞同：1
> 
> 时间：2012-06-05T05:49:48.983
> 
> 标签：process, operating-system

I saw this question somewhere

Four processes p1, p2, p3, p4 - each have sizes 1GB, 1.2GB, 2GB, 1GB. And each processes is executed as a time sharing fashion. Will they be executed on an operating system.

I think the answer should be No,they are not executed on operating system because OS is itself a process and it will be running in parallel to these processes.There will be switching between processes from time to time with the help of dispatcher.

but i am getting the doubt that answer can also be yes because it uses every process uses memory which is managed by theb operating system .

please help me figure out the right answer for the question..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:01:18.173

This depends *entirely* on the OS in question.

As well as starting processes (and possibly consisting *of* processes), an operating system generally provides services to the processes that run on it, such as memory management, file systems, communications and so on.

In that context, these processes can be said to be running on top of the OS. In other words, processes generally are of little use unless they communicate outside of themselves.

In any event, the dispatcher (or scheduler) tends to be an integral part of the OS so having your processes scheduled means that you're running on top of that OS.

Modern operating systems also provide paging of memory as well which means that you can use a lot more virtual memory than there is physical memory - the OS is then responsible for handling requests for memory that has been paged out.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:02:53.337

If two processes co exist, they have their own share of memory. What we assume operating system does is scheduling. Operating system may ask one of the process to stop and another to begin

# perl - Perl：GD：SecurityImage，角度属性不起作用

> ID：10892243
> 
> 赞同：3
> 
> 时间：2012-06-05T05:50:14.817
> 
> 标签：perl, captcha

我正在尝试使用带有以下对象的 perl 模块 GD:SecurityImage 从文本创建安全图像：

```
my $image = GD::SecurityImage->new(
              width   => 220,
              height  => 60,
              lines   => 5,
              scramble => 1,
              angle   => 45,
              gd_font => 'giant',
           );

$image->create( normal => 'circle' );
$image->particle(30, 70); 
```

但是结果图像中的文本没有 45 度角的文本，而是随机的。此外，如果我设置 scramble = 0 并且角度 = 45，则文本不会以该角度旋转，文本只是图像中的默认值，如![在此处输入图像描述](../Images/e2e57665279a0488b52c296d63a4d538.png)附加屏幕中所示。

请帮帮我，我在这里做错了什么？

注意：图像是加扰 = 0；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T01:07:19.870

请注意，您必须拥有 Math::Trig 才能与 GD 一起旋转，否则您将无法旋转。你不需要 ImageMagick 后端 - 试试看。（并使用TTF :)）

# sql-server-2005 - 通过查询将列插入另一个表

> ID：10892244
> 
> 赞同：0
> 
> 时间：2012-06-05T05:50:18.663
> 
> 标签：sql-server-2005

如何更新下表的范围字段

![在此处输入图像描述](../Images/b2b49f6bfc3d811f45472323a44b1cd3.png)

（不要介意上述范围内的 '1' 值，它应该是*NULL*）

下表的范围值

![在此处输入图像描述](../Images/e9885854a88dcf3888c968eead837f79.png)

当我在他们的 EquipmentCode 上将表与另一个表内部连接时，值会翻倍，如下所示： ![在此处输入图像描述](../Images/b088b4d547590a75d987e1fc425a809f.png)

这是我使用的查询：

```
SELECT 
  C.*, 
  R.Range AS RangeFromOtherTable 
FROM 
  EquipmentCalibrationRef AS C
INNER JOIN 
  Range AS R 
ON 
  R.EquipmentCode = C.EquipmentCode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:24:05.633

首先，您可以使用以下语句来获得伪 1 对 1 匹配

```
SELECT  ecr.*, r.[Range]
FROM    EquipmentCalibrationRef ecr
        INNER JOIN (
          SELECT  RefNo = ROW_NUMBER() OVER (PARTITION BY EquipmentCode ORDER BY [Range]), *          
          FROM    [Range] r
        ) r ON r.RefNo = ecr.RefNo AND r.EquipmentCode = c.EquipmentCode 
```

# php - php 重定向不会改变 url

> ID：10892251
> 
> 赞同：7
> 
> 时间：2012-06-05T05:51:04.357
> 
> 标签：php, redirect, header

我知道这是一个很常见的问题，但我找不到答案

我有一个 post.php，它向 controller.php 提交一个 post 表单当它正确时，在控制器中它会：

```
header("Location: ./post?ok=1"); 
```

帖子实际上是插入的，它通过上面的行，但是浏览器中的 url 似乎从未改变，最后没有 ok 参数，

我可以使用会话变量来存储这样的成功/失败参数，但这种方式应该可以工作

post.php：

```
<form action="controller" method="post">
    <input name="test" value='test' type="text" />
    <input type="submit" value="post"  />
</form> 
```

控制器.php：

```
<?php
    header("Location: ./post?ok=1");
?> 
```

编辑1：

```
header("Refresh:1;url=http://localhost/test/post?ok=1"); //doesn't work better 
```

编辑2：

在 post.php 顶部我放了

```
debug("post l ".count($_POST));
debug("get l ".count($_GET)); 
```

他们在提交之前显示 0，在提交之后也显示 0

编辑3：它有效

被阻止：

```
if ($success){
    header("Location: ./post?ok=1");
}
header("Location: ./post"); 
```

那应该是：

```
if ($success){
    header("Location: ./post?ok=1");
} else {
    header("Location: ./post");
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T05:56:44.913

尝试使用 HTTP 状态代码 303 请参阅 Oter：

```
header("Location: your/location", true, 303); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T06:15:02.607

首先你不应该使用`$_SERVER['HTTP_REFERER']`这是不安全的。此外，客户端也可能不会发送此标头。现在我不知道怎么做，但我确信这可以用来劫持您的网站以获得邪恶的东西。

更好的是，您应该知道表单数据来自哪里并将用户重定向回那里。

顺便说一句，您的重定向可能不像预期的那样工作，因为 url 已经包含一个问号。所以你必须添加更多带有`&`符号的参数。

对于重定向，我建议使用 HTTP`302 Found`响应状态。但是你必须确保之前没有其他任何东西被发送出去。在以下行之前不能有 HTML 输出或空`header`行：

```
header("Location: http://".$_SERVER['HTTP_HOST']."/your/source.form", true, 302); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:08:04.927

服务器端可能存在一些问题（例如，您的代码在设置标题之前会打印出一些内容）。为了调试它，你需要`display_errors = On`在你的 php.ini 中设置或在你的代码中临时启用它`ini_set('display_errors', 1)`。

在大多数情况下，错误是`"Cannot modify header information - headers already sent."`。确保 PHP 结束标记 ( )`print`之后没有`echo`或任何空格和多余的行`?>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T06:29:02.460

这可能是服务器进行第二次重定向的问题。

```
header('Location: post.php?ok=1', true, 303);
exit; 
```

尝试将扩展名**.php**添加到 url，以确保**post?ok=1**不会被服务器重定向到**post.php**（例如 htaccess）。在额外的重定向中，您可能会丢失 get 参数。然后不要忘记在标头重定向后添加退出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T21:10:17.643

实际上...看来您没有使用“exit”来关注 header() 调用。例子：

```
header( 'location: ' . $location ); exit;

header( 'location: ' . $location, true, 301 ); exit; 
```

当您在调用后“退出”时，浏览器地址栏中的 URL 会发生变化，因为代码被阻止继续执行。否则，代码将继续执行，导致 URL 保持不变。

# pdf - 如何计算PDF文档中的前导

> ID：10892254
> 
> 赞同：1
> 
> 时间：2012-06-05T05:51:23.013
> 
> 标签：pdf, spacing, leading-zero

如何计算 PDF 文档中的前导？

例如：

```
48 0 0 48 72 677.28 Tm
(Hello World) Tj
0 -1.1075 TD 
```

这会以 48pt/57.6pt（120% 行高）**在**`Times-Roman`.

根据[PDF 参考](http://partners.adobe.com/public/developer/en/pdf/PDFReference13.pdf)手册，“前导参数以未缩放的文本空间单位测量。它指定相邻文本行的基线之间的垂直距离......该数字以文本空间单位的千分之一表示。”

有人可以解释一下如何`1.1075`相关`57.6`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-15T13:13:03.577

您的 pdf 命令不正确。我想你的意思是：

```
48 0 0 48 72 677.28 Tm
0 -1.1075 TD    
(Hello World) Tj 
```

此代码将文本坐标系设置为（Tm 命令）：

```
Scale x48 on x and x48 on y 
Start position (72, 677.28) 
```

然后将位置移动到下一行。1.1075“**文本**”像素中的下一行。然后在 y 坐标上将起始位置移动 -1.1075“**文本”像素。**本例中的文本像素是 pdf 像素乘以 48。它由 Tm 命令设置。

我可以简化你的 PDF 代码。一样的：

```
48 0 0 48 72 570.096 Tm
(Hello World) Tj 
```

解释：677.28 - (1.1075*48) - (1.1075*48)

您应该永远记住 PDF 它是一种语言。要计算真实坐标，您应该解析所有先前的命令。在你命令之前可能会有这样的事情：

```
10 0 0 10 0 0 cm 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T14:38:59.327

前导通常通过命令 TL 在 PDF 中设置，就像这样：

```
12 TL
(El ingenioso hidalgo don Quijote de la Mancha)' 
```

12 表示领先 12 个点，直到找到另一个 TL。

我希望它对你有帮助。我认为这是最简单的方法:)

# foreign-keys - SQLAlchemy-migrate 在具有关系的新表上？

> ID：10892255
> 
> 赞同：3
> 
> 时间：2012-06-05T05:51:28.393
> 
> 标签：foreign-keys, sqlalchemy, database-migration

假设我创建了这个新的 SQLAlchemy 类：

```
class C(Base):
    id = Column(Int, primary_key=True)
    tags = relationship("B") 
```

我想为 SQLAlchemy-migrate 创建这个表。但是，我不知道如何从声明式风格转换“关系”，或者`tags`应该有什么模式。

如何为将创建或删除此表的 SQLAlchemy-migrate 编写代码？

# c# - 如何使用多个线程管理从集合中添加和删除特定项目？

> ID：10892257
> 
> 赞同：4
> 
> 时间：2012-06-05T05:51:37.000
> 
> 标签：c#, .net, multithreading, c#-4.0, locking

我有许多线程可以将项目添加到集合中，并在某些条件下从该集合中删除特定项目。在第一个项目中，读者多于作者。在第二个项目中，读者可能多于作者，也可能相等或更少。

1.  我应该如何管理对该集合的添加/删除？
2.  使用什么收藏？简单`List`地阻止添加/删除？
3.  使用哪种阻塞机制（`lock`，，`ReaderWriterLockSlim`...）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:57:40.243

您可以使用命名空间中的数据结构`System.Collections.Concurrent`。它们封装了您提到的所有三个方面，并且可以从并发线程中使用而无需显式锁定。

请参阅：[MSDN 上的 System.Collections.Concurrent 命名空间](http://msdn.microsoft.com/de-de/library/system.collections.concurrent.aspx)

例如`ConcurrentBag<T>`，具有`ICollection`接口并且是线程安全的实现，针对同一线程将同时生产和使用存储在包中的数据的场景进行了优化。

如果您需要快速对象查找，您也可以使用`ConcurrentDictionary<TKey, TValue>`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-03T09:45:01.723

ConcurrentBag 无法删除特定项目，因为它是对象集合无序的错误。

但是 BlockingCollection 可以使用 TryTake 方法来做到这一点。只需将要删除的项目作为参数传递。请参阅：http: [//msdn.microsoft.com/en-us/library/dd287184 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/dd287184%28v=vs.110%29.aspx)

# python - Windows 上的资源限制？

> ID：10892258
> 
> 赞同：10
> 
> 时间：2012-06-05T05:51:51.720
> 
> 标签：python, windows, posix, ulimit, setrlimit

[`resource`](http://docs.python.org/library/resource.html)Python 的模块和 POSIX在 Unix 系统上公开的资源限制机制的 Windows 等价物是什么[`setrlimit`](http://linux.die.net/man/2/setrlimit)？

具体来说，我将子进程的处理器时间限制为几秒钟。如果它没有在约束内完成，它就会被终止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T22:32:47.033

AFAIK，没有可移植的方法来获取有关 Python 中子进程使用的处理器时间量的信息。但是，什么`subprocess`模块（假设您`subprocess.Popen`以`Popen.pid`. 您可以在 Windows 上执行的操作是重复运行`tasklist`（参见[手册](http://technet.microsoft.com/en-us/library/bb491010.aspx)）`subprocess.check_output`，并使用 PID 作为过滤器从其输出中提取有关子进程的信息。

一旦子进程有足够的 CPU 时间，并且如果您曾经`subprocess.Popen()`启动子进程，您可以使用该`Popen.kill`方法将其杀死。

但我认为在指定的挂墙时间秒数后使用计时器杀死子进程会更容易。因为如果子进程在不使用 CPU 时间的情况下挂起（无论出于何种原因），那么等待它消耗 CPU 时间的 Python 程序也会挂起。

# iphone - 如何解决这个问题（null）：错误：CFBundleIdentifier 'com.abcd.efg.*' 包含非法字符'*'？

> ID：10892261
> 
> 赞同：2
> 
> 时间：2012-06-05T05:52:15.887
> 
> 标签：iphone, ios, xcode4, cfbundleidentifier

我有一个像“com.abcd.efg.*”这样的应用程序 ID。我已经从我的项目的 .plist 文件中的 Bundle Identifier 中输入了正确的应用程序 ID。当我在下面构建我的项目时显示错误消息。

```
(null): error: CFBundleIdentifier 'com.abcd.efg.*' contains illegal character '*' 
```

如何使用此应用程序 ID 运行项目？谁能指导我？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T05:56:02.587

酯 * 不是捆绑标识符的有效字符，我认为您在制作这样的配置文件时给出了这个。但请记住，制作像“*”这样的配置文件意味着它将对所有包含 com.xxxx.xxx.. 的应用程序有效。所以在这里你必须选择一个像 com.xxxx.xxx.myTestApp 或 com.xxxx 这样的名称。 xxxx.theNewApp 等

# blackberry - 试图读取传入的短信内容，但在黑莓中出现错误

> ID：10892265
> 
> 赞同：0
> 
> 时间：2012-06-05T05:52:33.123
> 
> 标签：blackberry, sms

嗨朋友们，我正在尝试阅读传入的短信，但收到这样的警告。调用有问题的方法：java.lang.String.(String) 发现于：mypackage.MyApp$ListeningThread.run()

这是我的代码是

```
public class MyApp extends UiApplication {
//private ListeningThread listener;

public static void main(String[] args) {
    MyApp theApp = new MyApp();
    theApp.enterEventDispatcher();
}

public MyApp() {
    invokeAndWait(new Runnable() {

        public void run() {             

        ListeningThread listener = new ListeningThread();
        listener.start();

        }
    });
    pushScreen(new MyScreen());
}

private static class ListeningThread extends Thread {
    private boolean _stop = false;
    private DatagramConnection _dc;

    public synchronized void stop() {
        _stop = true;
        try {
            _dc.close(); // Close the connection so the thread returns.
        } catch (IOException e) {
            System.err.println(e.toString());
        }
    }

    public void run() {
        try {
            _dc = (DatagramConnection) Connector.open("sms://");
            for (;;) {
                if (_stop) {
                    return;
                }
                Datagram d = _dc.newDatagram(_dc.getMaximumLength());
                _dc.receive(d);
                String address = new String(d.getAddress());
                String msg = new String(d.getData());
                if(msg.startsWith("START")){
                    Dialog.alert("hello");
                }
                System.out.println("Message received: " + msg);
                System.out.println("From: " + address);
                System.exit(0);
            }
        } catch (IOException e) {
            System.err.println(e.toString());
        }
    }
} 
```

}

请纠正我的错误。是否可以给我一些代码来读取黑莓中传入的短信内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:25:04.707

您引用的错误是抱怨使用带有字符串参数的 String 构造函数。由于字符串在 Java-ME 中是不可变的，这只是一种浪费。您可以直接使用参数字符串：

> 调用有问题的方法：java.lang.String.(String) 发现于：mypackage.MyApp$ListeningThread.run()

```
//String address = new String(d.getAddress());
String address = d.getAddress();
// getData() returns a byte[], so this is a different constructor
// However, this leaves the character encoding unspecified, so it
// will default to cp1252, which may not be what you want
String msg = new String(d.getData()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:39:43.587

关于您的代码的几点：

*   启动线程`invokeAndWait`的调用没有意义。没坏处，就是有点浪费。仅使用该方法执行 UI 相关操作。
*   您应该尝试使用“sms://:0”作为`Connector.open`. 根据[文档](http://www.blackberry.com/developers/docs/5.0.0api/index.html)，带有表单的参数`{protocol}://[{host}]:[{port}]`将以客户端模式打开连接（这是有道理的，因为您在接收部分），而不包括主机部分将以服务器模式打开它。
*   最后，如果你不能让它工作，你可以使用[本教程](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-listen-for-SMS-messages/ta-p/445062)中指定的第三种方法，你可能已经阅读过。

# javascript - Html5 Canvas 变换算法 - 应用变换后查找对象坐标

> ID：10892267
> 
> 赞同：2
> 
> 时间：2012-06-05T05:52:37.387
> 
> 标签：javascript, math, graphics, html5-canvas, coordinate-transformation

在 html5 画布上，我正在绘制对象（矩形、圆形等），这些对象具有缩放、倾斜、旋转等变换属性...这些对象可以嵌套。

当我在应用转换后出现问题时，我想找到给定对象的确切 x、y 坐标，但它超出了我的想象。

致所有从事交互式计算机图形学的专家；请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T11:59:48.173

二维中的所有仿射变换都可以表示为以下形式的矩阵：

```
 [ a  c  dx ]
T = [ b  d  dy ]
    [ 0  0   1 ] 
```

这可以用方法来表示`context.transform(a, b, c, d, dx, dy);`。

当应用于某个坐标时`(x,y)`，您首先必须添加第三个坐标，它始终是`1`: `<x, y, 1>`。然后你可以乘以变换矩阵得到结果：

```
[ a*x + c*y + dx ]
[ b*x + d*y + dy ]
[       1        ] 
```

如果在最后一个坐标中得到除 '1' 以外的任何值，则必须将向量除以它。

* * *

反过来，你必须反转矩阵：

```
[ d/M  -c/M  (c*dy - d*dx)/M ]
[ b/M   a/M  (b*dx - a*dy)/M ]
[  0     0          1        ] 
```

`M`在哪里`(a*d - b*c)`。

* * *

通过将它们的矩阵相乘，可以按顺序应用多个变换。乘法的顺序很重要。

* * *

```
context.translate(dx,dy) <==> context.transform( 1,  0,  0,  1, dx, dy)
context.rotate(θ)        <==> context.transform( c,  s, -s,  c,  0,  0)
context.scale(sx,sy)     <==> context.transform(sx,  0,  0, sy,  0,  0) 
```

在哪里`c = Math.cos(θ)`和`s = Math.sin(θ)`

* * *

如果您`(x,y)`在对象空间中获得了一些坐标，并且您想知道它最终会在屏幕上的哪个位置，您可以对其应用变换。

如果你`(x,y)`在屏幕上得到了一些坐标，并且你想知道对象上的哪个点，你乘以变换的倒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T18:19:10.020

Tom Larkworthy 的回答是完美的，但有一个小错误。矩阵求逆的正确公式是：

```
[  d/M  -c/M  (c*dy - d*dx)/M ]
[ -b/M   a/M  (b*dx - a*dy)/M ]
[   0     0          1        ] 
```

# sqlite - 构建日期介于 SQLite 中的开始日期和结束日期之间的查询的方法？

> ID：10892269
> 
> 赞同：1
> 
> 时间：2012-06-05T05:52:46.897
> 
> 标签：sqlite, date

到目前为止，我的方式是：

```
select * from time where date('now') > date(start_date) and date('now') < date(end_date); 
```

我只是希望有一种简短的方法来构建相同的查询。我检查了 SQLite 的日期函数的文档，但它很难理解，并且没有一个明显的函数可以做到这一点。如果没有办法，那很好，但我想以 SQLites 的方式与专家用户核实。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:22:36.487

```
SELECT *
FROM TIME_TABLE 
WHERE DATE_COLUMN 
BETWEEN '01-01-2012' 
AND '12-31-2012' 
```

# python - 具有碰撞功能的联合 python 字典

> ID：10892272
> 
> 赞同：2
> 
> 时间：2012-06-05T05:52:59.067
> 
> 标签：python, dictionary

在 Python 中，有没有办法合并字典并在碰撞时做些什么？我正在寻找与 Haskell 中的 unionWith 函数等效的成语：http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-Map-Lazy.html#v: [unionWith](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-Map-Lazy.html#v:unionWith)

```
>>> unionWith(lambda x,y: x + y, {'a' : [42], 'b' : [12], c : [4]}, {'a' : [3], 'b' : [2], 'd' : [0]})
{'a' : [42,3], 'b' : [12,2], 'c' : [4], 'd': [0]} 
```

基于@monkut的解决方案实现：[https ://github.com/cheecheeo/useful/commit/109885a27288ef53a3de2fa2b3a6e50075c5aecf#L1R18](https://github.com/cheecheeo/useful/commit/109885a27288ef53a3de2fa2b3a6e50075c5aecf#L1R18)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T05:56:03.437

```
def union_with(merge_func, x, y):
    result = dict(x)
    for key in y:
        if key in result:
              result[key] = merge_func(result[key], y[key])
        else:
              result[key] = y[key]
    return result 
```

* * *

```
>>> union_with(lambda x,y: x + y, {'a' : [42], 'b' : [12], 'c' : [4]}, {'a' : [3], 'b' : [2], 'd' : [0]})
{'a': [42, 3], 'c': [4], 'b': [12, 2], 'd': [0]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:10:00.717

用字典理解。

```
>>> def merge_func(x,y):
...    return x + y
...
>>>
>>> d1 = {'a' : [42], 'b' : [12], 'c' : [4]}
>>> d2 = {'a' : [3], 'b' : [2], 'd' : [0]}
>>> { key: merge_func(d1.get(key, []), d2.get(key, [])) for key in set( d1.keys() + d2.keys())}
{'a': [42, 3], 'c': [4], 'b': [12, 2], 'd': [0]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T07:58:32.810

我的 5 美分

```
 dict = {'a' : [42], 'b' : [12], 'c' : [4]}, {'a' : [3], 'b' : [2], 'd' : [0]}
 keyset = set([k for d in dict for k in d.keys()])
 union = {}
 for d in dict:
     for k in d.keys():
         if k in union:
             union[k].append(d[k])
         else:
             union[k]=[s[k]] 
```

# c - 多维数组：不兼容的类型赋值

> ID：10892273
> 
> 赞同：1
> 
> 时间：2012-06-05T05:53:34.403
> 
> 标签：c, multidimensional-array, variable-assignment

我已经声明了已知大小的数组，

```
typedef struct{
  ......
  char * buffer[height+1];    //height is a constant int
  ......} args;

int main{
 args * info;
 info = malloc (sizeof(args));
 char* output_buffer[width][height+1];    //width is also a constant int >= 4
 output_buffer[2] = malloc (sizeof(char)*char_per_line*(height+1)); // error same as below
 info->buffer = output_buffer[2];    // I know it's wrong. incompatible types in assignment
....} 
```

数字是任意的，仅用于说明。

我正在做的是分配 to 的地址`output_buffer[width]`，`info->buffer`然后`info`作为参数传递给一个线程，该线程生成一个大小为数组的数据`height+1`；每个插槽中都有一个长度为 cstring 的字符串`char_per_line`。这些 cstrings 存储在`output_buffer[2]`.

我在这里感到困惑，这不是`output_buffer[2]`类型的指针`char*[height+1]`吗？那为什么我不能`malloc`给它分配内存地址呢？

另外，我知道我不能将数组分配给数组，但我怎样才能让代码以所需的方式工作？如果解决方案是使用`char**`as `char*[height+1]`，那么我该如何访问`info->buffer[height]`？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:18:17.783

根据您指定的要求，这是您需要做的

```
/* This is a 2D array of pointers. */
char* output_buffer[width][height+1]; 

for ( int i =0; i< width; i++ )
    for ( int j=0; j <height+1; j++ )
        output_buffer[i][j] = malloc (sizeof(char)*char_per_line*(height+1)); 
```

进而，

```
info->buffer[SOME_VALUE] =  output_buffer[SOME_WIDTH][SOME_HEIGHT]; 
```

> 我在这里很困惑 output_buffer[2] 不是 char*[height+1] 类型的指针吗？那为什么我不能从 malloc 分配内存地址呢？

`malloc`返回一维指针`void*`，但正如您所指出的， output_buffer[2] 不是一维指针。它是类型`char*[height+1]`。 `[]`除了 . 之外又增加了一个维度`*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:41:11.880

> output_buffer[2] 不是 char*[height+1] 类型的指针吗？

No.`output_buffer[2]`是一个 size 的数组`height+1`。它的元素类型是`char*`。

> 那为什么我不能从 malloc 分配内存地址呢？

如您所知，您不能分配给数组。

> 大小高度+1的数组；每个插槽中都有一个长度为 char_per_line 的 cstring。
> 
> 我怎样才能让代码以所需的方式工作？

如果您需要一个 C 字符串数组`(height+1)`，每个大小为`char_per_line`，则需要分配`(height+1)`C 字符串大小为`char_per_line`。也就是说，调用`malloc` `(height+1)`时间并传递`char_per_line`给每个。（有一种方法可以在一次调用中完成，`malloc`但您现在可能不想这样做）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:31:04.393

```
typedef struct{
  ......
  char * buffer[height+1];    //height is a constant int
  ......} args 
```

这必须是

```
typedef struct{
  ......
  char ** buffer;    //height is a constant int
  ......} args

output_buffer[2] = malloc (sizeof(char)*char_per_line*(height+1)); 
```

您必须在 for 循环中执行此操作，并且对于所有 output_buffer[i][j]，（现在它是 char ** = char *）。

# java - 正则表达式替换为匹配的计数

> ID：10892276
> 
> 赞同：21
> 
> 时间：2012-06-05T05:54:01.330
> 
> 标签：java, regex

我想用匹配的编号/索引替换匹配。

java regex 风格有没有办法知道当前匹配是哪个匹配号，所以我可以使用`String.replaceAll(regex, replacement)`？

示例：替换`[A-Z]`为自身及其索引：

```
Input:  fooXbarYfooZ
Output: fooX1barY2fooZ3 
```

即，这个电话：

```
"fooXbarXfooX".replaceAll("[A-Z]", "$0<some reference to the match count>"); 
```

应该返回`"fooX1barY2fooZ3"`

注意：我正在寻找可以执行此操作的*替换*字符串（如果存在）。

**请不要提供涉及循环或类似代码的答案。**

### 编辑：

我会接受最优雅的有效答案（即使它使用循环）。当前的答案没有
真正起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T06:06:16.723

需要对输入字符串进行迭代，因此以一种或另一种方式循环是不可避免的。标准 API 没有实现实现该循环的方法，因此该循环要么必须在客户端代码中，要么在第三方库中。

* * *

顺便说一句，代码如下所示：

```
public abstract class MatchReplacer {

    private final Pattern pattern;

    public MatchReplacer(Pattern pattern) {
        this.pattern = pattern;
    }

    public abstract String replacement(MatchResult matchResult);

    public String replace(String input) {

        Matcher m = pattern.matcher(input);

        StringBuffer sb = new StringBuffer();

        while (m.find())
            m.appendReplacement(sb, replacement(m.toMatchResult()));

        m.appendTail(sb);

        return sb.toString();
    }
} 
```

* * *

用法：

```
public static void main(String... args) {
    MatchReplacer replacer = new MatchReplacer(Pattern.compile("[A-Z]")) {
        int i = 1;
        @Override public String replacement(MatchResult m) { 
            return "$0" + i++;
        }
    };
    System.out.println(replacer.replace("fooXbarXfooX"));
} 
```

输出：

```
fooX1barX2fooX3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T18:45:42.423

Java regex 不支持对匹配计数的引用，所以这是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T06:14:10.760

**没有Java中的循环是不可能的......**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-05T06:16:20.410

好吧，我认为在 Java 中没有任何循环是不可能的。

```
String x = "fooXbarXfooX";
        int count = 0;
        while(x.contains("X"))
        x = x.replaceFirst("X", Integer.toString(count++));
        System.out.println(x); 
```

# php - 在jquery select中使用json对象数据

> ID：10892277
> 
> 赞同：0
> 
> 时间：2012-06-05T05:54:11.670
> 
> 标签：php, json, jquery

```
{"names": [
    {"patientName": "Ratna"},
    {"patientName": "raju" },
    {"patientName": "krishna"},
    {"patientName": "kishore"},
    {"patientName": "Kishore1"},
    {"patientName": "mahesh"}
]} 
```

这是我从 Ajax 调用中获得的 JSON 对象，所以现在我想`patientName`通过 jquery 将所有值添加到选择框

谁能告诉我如何做到这一点？

这里我使用 $.ajax() 函数进行 ajax 调用

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:03:49.380

```
var select = $('#selectid');
$.each(data.names, function(i, v){
    select.append('<option value="'+v.patientName+'">'+v.patientName+'</option>');
} 
```

文档 - [$.each()](http://api.jquery.com/jQuery.each/) , [.append()](http://api.jquery.com/append/)

[小提琴](http://jsfiddle.net/mowglisanu/FkKhQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:00:12.727

尝试类似：

```
var selectbox = '';
var options = '';

for (var i = 0; i < YourJsonObject.names.length; i++) {
options += '<option value="' + YourJsonObject.names[i] + '">' + YourJsonObject.names[i] + '</option>';
}

$("select#yourSelectBoxID").html(selectbox); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:16:09.840

试试这个，

```
var data = {
    "names": [
        {"patientName": "Ratna"},
        {"patientName": "raju" },
        {"patientName": "krishna"},
        {"patientName": "kishore"},
        {"patientName": "Kishore1"},
        {"patientName": "mahesh"}
    ]
}
var names = data.names;
var options = [];
for(i=0,len=data.names.length;i<len;i++){
    options[i] = '<option>' + names[i].patientName + '</option>';
}
$('<select></select>').append(options.join('')).appendTo('body'); 
```

# c# - 为什么C#中不能共存相同类型的隐式和显式运算符？

> ID：10892278
> 
> 赞同：5
> 
> 时间：2012-06-05T05:54:15.347
> 
> 标签：c#, operator-overloading, implicit-conversion, explicit-conversion

为什么不能在同一类中共存同一类型的两个运算符（显式和隐式）？假设我有以下内容：

```
public class Fahrenheit
{
    public float Degrees { get; set; }

    public Fahrenheit(float degrees) 
    {
        Degrees = degrees;
    }

    public static explicit operator Celsius(Fahrenheit f)
    {
        return new Celsius(ToCelsius(f.Degrees));
    }

    public static implicit operator Celsius(Fahrenheit f)
    {
        return new Celsius(ToCelsius(f.Degrees));
    }
}

public class Celsius {
    public float Degrees { get; set; }
    public Celsius(float degrees) 
    {
        Degrees = degrees;
    }

} 
```

所以我可以给客户使用两种方式之一的可能性，例如：

```
Fahrenheit f = new Fahrenheit(20);
Celsius c1 = (Celsius)f;
Celsius c2 = f; 
```

是否有任何特殊原因不允许这样做，或者这只是避免滥用程序员的约定？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-05T05:59:45.380

根据[重载隐式和显式运算符](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/a457cee8-834b-4cfd-b357-16dda3ba40c9)页面：

> 这是正确的。定义隐式运算符还允许显式转换。定义显式运算符仅允许显式转换。
> 
> 因此，如果您定义显式运算符，则可以执行以下操作：
> 
> `Thing thing = (Thing)"value";`
> 
> 如果你定义了一个隐式操作符，你仍然可以做上面的事情，但你也可以利用隐式转换：
> 
> `Thing thing = "value";`
> 
> 所以简而言之，显式只允许显式转换，而隐式允许显式和隐式转换......因此你只能定义一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:05:08.260

The reason it's not allowed is that it's pointless. The Explicit forces you to cast, the implicit allows you to forget about casting, but still allows you to cast. Implicit extends on the functionality of Explicit. So comment out your Explicit operator and smile :)

# sql-server-2008-r2 - 在 SSAS 数据源视图中，DimDate 和 FactInternetSales 与 AdventureWorks 数据库中的表之间没有关系

> ID：10892279
> 
> 赞同：0
> 
> 时间：2012-06-05T05:54:27.827
> 
> 标签：sql-server-2008-r2

我是 SSIS 的 SQL Server 开发人员。但这是我第一次从事 SSAS 工作。我正在尝试从 Microsoft 提供的免费视频教程中学习它。在教程中，当他们尝试使用 AdventureWorks 数据库中的表创建数据源视图时，架构在 DimDate 和 FactInternetSales 之间存在关系（具有 3 个连接列/行），而其他表具有一个连接列/行。

```
But when i tried to do the same, the schema shows no relationship between DimDate and FactInternetSales. Note: Other tables had one connectivity ..same as the video tutorial. 
```

请指教。

谢谢，瓦努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T23:55:27.700

Fact 日期键和 DimDate 维度之间必须存在一对一的关系。因此，在您的示例中，架构视图中有三个连接指针，这意味着事实表必须包含三个不同的日期键。
这可能类似于 Start_Date_Key、End_Date_Key、As_of_Date_Key，它们都可以指向 DimDate.Date_Key 键字段。考虑到这一点，您的行将如下所示

Start_Date_Key = 20120101
As_of_Date_Key = 20120605
End_Date_Key = 20150101 SomeotherKey
= 10
Sales_Product_Key = 5

希望这可以帮助。

# function - Matlab 中的分区函数 - 我的代码中是否缺少某些内容？

> ID：10892283
> 
> 赞同：0
> 
> 时间：2012-06-05T05:55:12.700
> 
> 标签：function, matlab

谁能看看我的matlab代码是否有问题？我的目标是复制这个公式：![在此处输入图像描述](../Images/cfc5ed0c05ec3820390798a278762b07.png)

q 可以取值 1、2、3 和 5。我构造了我的向量 Xt，其中每个元素是每次 (t) 的 log(1+return) 的累积和 - 对于股票收益 - 第一个元素被标准化为 log(1 ）。

然后为 q 的四个值计算每个元素 Sq(T,delta t)，这是我的 matlab 代码：

```
for j=1:length(dt);
E=Xt(1:dt(j):end);
EE=diff(E(2:end));
EEE=diff(E(1:end-1));
Sqone(j)=sum(abs(EE-EEE).^1);
Sqtwo(j)=sum(abs(EE-EEE).^2);
Sqthree(j)=sum(abs(EE-EEE).^3);
Sqfive(j)=sum(abs(EE-EEE).^5); end; 
```

上面的代码有问题吗？我问这个是因为我知道有问题，因为我没有得到预期的结果。我确信这是由于我在上面发布的代码。

向量 dt 是一个从 1 到大数的向量 - 取决于 Xt 的大小。但我的向量 dt 不是问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:10:28.777

你拿差价两次。一次使用`diff`，一次使用`EE-EEE`。正确的代码是：

```
for j=1:length(dt);
E=Xt(1:dt(j):end);
EE=abs(diff(E));
Sqone(j)=sum(EE.^1);
Sqtwo(j)=sum(EE.^2);
Sqthree(j)=sum(EE.^3);
Sqfive(j)=sum(EE.^5); end; 
```

# php - 图像未从数据库和文件中显示

> ID：10892286
> 
> 赞同：2
> 
> 时间：2012-06-05T05:55:41.540
> 
> 标签：php, mysql, database

我已经建立了一个网站，允许用户上传图像，然后这些图像会显示在主屏幕上。但是我刚刚碰壁了，所以我过去让用户上传图像，然后图像被保存到文件夹和数据库中，但是我该怎么做才能让图像显示在主屏幕上。

```
 <?php

 // Connect to database

 $errmsg = "";
 if (! @mysql_connect("localhost","alfred1000351","*******")) {
 $errmsg = "Cannot connect to database";
     }
 @mysql_select_db("drp_2cgih5o233");

 $q = <<<CREATE
 create table pix (
 pid int primary key not null auto_increment,
 title text,
 imgdata longblob)
 CREATE;
 @mysql_query($q);

 // Insert any new image into database

  if ($_REQUEST[completed] == 1) {
  // Need to add - check for large upload. Otherwise the code
  // will just duplicate old file ;-)
 // ALSO - note that latest.img must be public write and in a
 // live appliaction should be in another (safe!) directory.
 move_uploaded_file($_FILES['imagefile']['tmp_name'],"latest.img");
 $instr = fopen("latest.img","rb");
 $image = addslashes(fread($instr,filesize("latest.img")));
 if (strlen($instr) < 149000) {
 mysql_query ("insert into pix (title, imgdata) values (\"".
 $_REQUEST[whatsit].
 "\", \"".
 $image.
 "\")");
 } else {
 $errmsg = "Too large!";
 }
 }

 // Find out about latest image

  $gotten = @mysql_query("select * from pix order by pid desc limit 1");
  if ($row = @mysql_fetch_assoc($gotten)) {
  $title = htmlspecialchars($row[title]);
  $bytes = $row[imgdata];
  } else {
  $errmsg = "There is no image in the database yet";
  $title = "no database image available";
  // Put up a picture of our training centre
  $instr = fopen("../wellimg/ctco.jpg","rb");
   $bytes = fread($instr,filesize("../wellimg/ctco.jpg"));
  }

 // If this is the image request, send out the image

if ($_REQUEST[gim] == 1) {
 header("Content-type: image/jpeg");
print $bytes;
exit ();
}
?>

<html><head>
<title>Upload an image to a database</title>
<body bgcolor=white><h2>Here's the latest picture</h2>
<font color=red><?= $errmsg ?></font>
<center><img src=?gim=1 width=144><br>
<b><?= $title ?></center>
<hr>
<h2>Please upload a new picture and title</h2>
<form enctype=multipart/form-data method=post>
<input type=hidden name=MAX_FILE_SIZE value=150000>
<input type=hidden name=completed value=1>
Please choose an image to upload: <input type=file name=imagefile><br>
Please enter the title of that picture: <input name=whatsit><br>
then: <input type=submit></form><br>
<hr>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:45:06.680

这是我的坚持：

1.  不要抑制从 DB 获得的警告。它们是真实的，也是需要的。从 DB 调用前面删除所有 @ 字符。**如果您收到任何通知、警告、错误，请不要压制它们，请更正它们。**

2.  如果您正在编写新代码，请考虑使用 PDO 作为 DB API，而不是旧的、已弃用的 PHP MySQL API。它就像 MySQL API 一样简单易用。

3.  **您只想尝试只创建一次表**，将其从多次执行的代码中删除。

4.  **您应该检查 $_REQUEST 参数是否存在**，如果不存在则不要比较它们。您还需要**将参数名称放在引号中**，否则 PHP 会认为您使用的是常量，而您不是。所以线`if ($_REQUEST[completed] == 1) {`必须固定为`if(isset($_REQUEST['completed']) && $_REQUEST['completed'] == 1) {`。同样适用于`whatisit`和`gim`-params。

5.  该代码`if (strlen($instr) < 149000) {`无法按预期工作，您无法获得资源长度。您可能正在寻找此功能：`if (strlen($_FILES['imagefile']['size']) < 149000) {`.

6.  与 s 相同（与步骤 4 中相同），`$row`您需要**将 literas 放在引号中**，因此将这些行修复为：`$title = htmlspecialchars($row['title']); $bytes = $row['imgdata'];`

7.  否则**它应该可以工作**。但是，它包含数据库安全漏洞，这可能会导致您的网站受到威胁，因此我建议您不要将其放到任何真实网站上。只是为了你自己/朋友的乐趣。

# objective-c - 如果在块中使用 self 的类方法

> ID：10892287
> 
> 赞同：7
> 
> 时间：2012-06-05T05:55:55.537
> 
> 标签：objective-c, cocoa, automatic-ref-counting, objective-c-blocks, weak-references

我有一个`dispatch_once`用于创建静态对象的类方法。在`dispatch_once`我使用的块内`[self class]`，想知道是否需要使用弱引用`self`来避免保留循环？

```
+ (NSArray *)accountNames{
    static NSArray *names = nil;
    static dispatch_once_t predicate;
    dispatch_once(&predicate, ^{
        names = [[[self class] accounts] allKeys];
        names = [names sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    });
    return names;
} 
```

如果我使用弱引用，`self`我会收到警告：

```
+ (NSArray *)accountNames{
    static NSArray *names = nil;
    static dispatch_once_t predicate;
    __weak TUAccount *wself = self;
    dispatch_once(&predicate, ^{
        names = [[[wself class] accounts] allKeys];
        names = [names sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
    });
    return names;
} 
```

**使用“const Class”类型的表达式初始化“TUAccount *__weak”的不兼容指针类型**

因为我收到一个警告，所以我认为在这种情况下我不需要使用弱引用，`self`但我想看看你们的想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T06:29:47.893

这里没有理由担心保留周期，因为保留或释放类对象是没有意义的——保留和释放根本没有效果。

您尝试进行弱引用是错误的，因为您正在获取一个类对象`self`并尝试将其*强制*转换为`TUAccount`. 两者是完全不同的东西。

此外，您可以简化：

```
names = [[[self class] accounts] allKeys]; 
```

由于 self 已经是一个类，[self class] == self，所以改为：

```
names = [[self accounts] allKeys]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:24:56.043

我又检查了一次 iOS SDK Docs 并找到了下一个：

> Objective-C 对象
> 
> 在手动引用计数的环境中，复制块时保留块内使用的局部变量。在块中使用实例变量将导致对象本身被保留。如果您希望为特定对象变量覆盖此行为，您可以使用 __block 存储类型修饰符对其进行标记。
> 
> 如果您使用 ARC，对象变量会在复制块并稍后释放时自动保留和释放。
> 
> *   注意：在垃圾收集环境中，如果将 __weak 和 __block 修饰符都应用于变量，则该块将无法确保它保持活动状态。
> 
> 如果在方法的实现中使用块，对象实例变量的内存管理规则会更加微妙：
> 
> *   如果通过引用访问实例变量，则保留 self；
> *   如果您按值访问实例变量，则会保留该变量。

以下示例说明了两种不同的情况：

```
dispatch_async(queue, ^{
    // instanceVariable is used by reference, self is retained
    doSomethingWithObject(instanceVariable);
});

id localVariable = instanceVariable;
dispatch_async(queue, ^{
    // localVariable is used by value, localVariable is retained (not self)
    doSomethingWithObject(localVariable);
}); 
```

结论：我假设`self`在块中使用没有问题。它将被保留并在执行后释放。

此外，您不会将块存储在内存中并直接使用它。所以它被复制到堆中，执行并从中推送。我没有看到任何保留周期。

希望我是对的！

# c# - 如何更改表单中默认标题栏的样式（颜色、形状和字体格式）

> ID：10892294
> 
> 赞同：1
> 
> 时间：2012-06-05T05:56:47.267
> 
> 标签：c#, .net, winforms

我想使用图形编程更改 Windows 窗体应用程序中标题栏和窗体的样式。例如，窗体的默认颜色是蓝色，我想将其更改为黑色。有人有任何代码或教程吗？实施。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:05:27.823

我建议查看此链接

[http://www.codeplex.com/wikipage?ProjectName=CustomerBorderForm&title=Painting%20NonClient%20Area](http://www.codeplex.com/wikipage?ProjectName=CustomerBorderForm&title=Painting%20NonClient%20Area)

[http://www.codeplex.com/wikipage?ProjectName=CustomerBorderForm](http://www.codeplex.com/wikipage?ProjectName=CustomerBorderForm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T21:02:51.810

将表单边框样式设置为 'None' FormBorderStyle = None

添加一个标题栏“面板”，左上角有一个图标按钮，右上角有三个控制按钮并将其停靠在顶部

您可以“借用”windows 控制菜单，但这超出了范围

# objective-c - startAccessingSecurityScopedResource 永远不会返回成功

> ID：10892295
> 
> 赞同：7
> 
> 时间：2012-06-05T05:56:47.920
> 
> 标签：objective-c, macos, cocoa, appstore-sandbox

我正在开发一个沙盒化的 Mac App Store 应用程序，它会询问用户从其他地方下载的文件保存在哪里。我有这段代码可以从用户那里获取文件夹（去掉一些错误检查）：

```
NSOpenPanel* openPanel = [NSOpenPanel openPanel];
[openPanel setAllowsMultipleSelection:NO];
[openPanel setCanChooseDirectories:YES];
[openPanel setResolvesAliases:YES];
NSInteger result = [openPanel runModal];
NSArray* urls = [openPanel URLs];
NSURL* folderURL = [urls objectAtIndex:0];
NSError* error;
NSData* bookmakeData = [folderURL bookmarkDataWithOptions:NSURLBookmarkCreationWithSecurityScope
                           includingResourceValuesForKeys:nil
                                            relativeToURL:nil
                                                    error:&error];
_saveFolderBookmark = bookmakeData; 
```

当需要将文件移动到此文件夹时，我有以下代码：

```
BOOL isStale;
NSError* error;
NSURL* saveFolder = [NSURL URLByResolvingBookmarkData:_saveFolderBookmark
                                              options:NSURLBookmarkCreationWithSecurityScope
                                        relativeToURL:nil
                                  bookmarkDataIsStale:&isStale
                                                error:&error];
BOOL success = [saveFolder startAccessingSecurityScopedResource];

// Move the file somewhere else
NSWorkspace* workspace = [NSWorkspace sharedWorkspace];
NSInteger operationTag;
BOOL copied = [workspace performFileOperation:NSWorkspaceMoveOperation
                                       source:[[self getDocumentsFolder] path]
                                  destination:[saveFolder path]
                                        files:[NSArray arrayWithObject:filename]
                                          tag:&operationTag];
[saveFolder stopAccessingSecurityScopedResource]; 
```

有很多代码要列出来说明 startAccessingSecurityScopedResource 永远不会为我返回成功，无论是在从 NSOpenPanel 获取 ULR 后立即还是在以后运行时，书签数据都保存在 NSUserDefaults 中。

在权利文件中，除其他项目外，我有：

```
<key>com.apple.security.files.bookmarks.app-scope</key>
<true/> 
```

这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T18:37:58.337

这很容易。您正在使用 NSURLBookmarkCreationWithSecurityScope 而不是 NSURLBookmarkResolutionWithSecurityScope 进行解析。只需更改该行，它应该可以工作。

（在您创建书签的同一会话期间，当您已经可以访问该 URL 时，它可能不起作用，因为在这种情况下您不应该调用它。但是在以后的运行中，它当然应该，因为那是整点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T18:10:28.707

上面已经给出了正确的解决方案，但我想我会为那些有相同症状（`startAccessingSecurityScopedResource`永不返回`YES`）的人添加另一种可能性。确保您使用的是 Powerbox 返回的实际 URL，它可能（可能）与您尝试访问的实际资源的 URL 不同。例如，Powerbox 将返回一个指向路径的 URL，您可以使用它`startAccessingSecurityScopedResource`来访问该目录下的特定文件。

# asp.net - 使用 asp.net 中的存储过程自定义动态分页

> ID：10892297
> 
> 赞同：0
> 
> 时间：2012-06-05T05:57:14.650
> 
> 标签：asp.net, sql-server, paging

```
CREATE PROCEDURE [dbo].[sp_GetPageWiseData]
(
    @tableName sysname,
    @orderColumn nvarchar(100),
    @PageIndex INT = 1,
    @PageSize INT = 10,
    @RecordCount varchar(10) OUTPUT
)
AS
BEGIN
SET NOCOUNT ON;
DECLARE @query varchar(2000),
        @minimumIndex varchar(5),
        @maximumIndex varchar(5)

SET @minimumIndex=convert(varchar,(@PageIndex - 1) * @PageSize + 1)
SET @maximumIndex=convert(varchar,@PageIndex * @PageSize)

SET @query='SELECT ROW_NUMBER() OVER(ORDER BY ' + @orderColumn + ' ASC)AS RowNumber,* INTO #Results FROM ' + @tableName + ';
            SELECT ' + @RecordCount + '=COUNT(*) FROM #Results;
            SELECT * FROM #Results WHERE RowNumber BETWEEN ' + @minimumIndex + ' AND ' + @maximumIndex + ';
            DROP TABLE #Results'
Exec (@query)   
END 
```

这里的问题是当程序执行时，输出参数`@RecordCount`显示 NULL 值。

为什么？

请解释。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:14:44.853

Your query must be like this:

```
SET @query='SELECT ROW_NUMBER() OVER(ORDER BY ' + @orderColumn + ' ASC)AS RowNumber,* INTO #Results FROM ' + @tableName + ';
        SELECT  @RecordCount =COUNT(*) FROM #Results;
        SELECT * FROM #Results WHERE RowNumber BETWEEN ' + @minimumIndex + ' AND ' + @maximumIndex + ';
        DROP TABLE #Results'; 
```

But here system will ask you to declare the variable, @RecordCount

so you can do it like this by returning 2 datasets from the query;

```
SET @query='DECLARE @RecordCount varchar(10); SELECT ROW_NUMBER() OVER(ORDER BY ' + @orderColumn + ' ASC)AS RowNumber,* INTO #Results FROM ' + @tableName + ';
        SELECT  @RecordCount =COUNT(*) FROM #Results;
        SELECT * FROM #Results WHERE RowNumber BETWEEN ' + @minimumIndex + ' AND ' + @maximumIndex + ';
        SELECT @RecordCount AS TOTALRECORDS;
        DROP TABLE #Results'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:24:22.890

我认为您不能以这种方式使用它。这就像连接而不是值分配方法。我认为您应该分两步处理它，如下所示：

```
SET @query='SELECT ROW_NUMBER() OVER(ORDER BY ' + @orderColumn + ' ASC)AS RowNumber,* INTO #Results FROM ' + @tableName + ';'

Exec (@query)

SELECT @RecordCount =COUNT(*) FROM #Results

SET @query='SELECT * FROM #Results WHERE RowNumber BETWEEN ' + @minimumIndex + ' AND ' + @maximumIndex + ';
DROP TABLE #Results'

Exec (@query) 
```

# django - 有限权限用户的 Django 管理站点

> ID：10892298
> 
> 赞同：1
> 
> 时间：2012-06-05T05:57:18.507
> 
> 标签：django, django-admin

我有一个 Django 应用程序，并且项目中有两个应用程序：帐户和商店。在我的商店应用程序中，我有产品、类别模型和其他模型。

我有管理网站，我可以从那里注册产品。在帐户中，我允许普通人注册和登录。

现在，我也希望用户能够注册产品，这样他们就可以销售自己的产品。但是，我不想让他们完全访问管理站点。

如何向一般用户授予对管理站点的有限访问权限？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:50:17.510

`ModelAdmin`正如您可能已经知道的那样，管理员使用一个类来呈现页面。正如 sharafjaffri 所建议的那样，该类有一个`queryset`方法，您可以根据谁正在访问该站点，使用新过滤器覆盖该方法。

但仅靠过滤是不够的。您还需要将下拉列表中显示的值过滤为仅由用户创建的值。然后在保存时，您应该将新对象与添加它的用户的门户相关联。

这是我未经测试的快速实现：

```
class PortalAdmin(admin.ModelAdmin):

    exclude = ('portal',)

    def queryset(self, request):
        """
        Filter the objects displayed in the change_list to only
        display those for the currently signed in user.
        """
        qs = super(UserAdmin, self).queryset(request)
        if request.user.is_superuser:
            return qs
        else:
            return qs.filter(portal=request.user.profile.portal) 

    def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
        the_model = db_field.related.parent_model

        if hasattr(the_model,'portal'):
            kwargs['queryset'] = the_model.objects.filter(portal=request.portal)
        return super(PortalAdmin,self).formfield_for_foreignkey(db_field, request, **kwargs)

    def save_model(self, request, obj, form, change):
        if not change:
            obj.portal = request.portal
        obj.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:59:15.750

在管理员中，您可以创建组并分配对您想要的模型的访问权限，并且可以将相同的权限应用于用户，但您可能对对登录用户自己添加的模型记录的有限访问感兴趣。为了实现这一点，您必须将模型中的一列定义为用户的外键，如下所示我为公司定义了模型并将每个公司分配给用户：

类公司（模型。模型）：

```
name = models.CharField(max_length=64, primary_key=True)
kam = models.ForeignKey(User, verbose_name='KAM', blank=True, null=True)
address = models.TextField(blank=True, null=True)
city = models.CharField(max_length=32, blank=True, null=True)
country = models.CharField(max_length=32, blank=True, null=True)
phone  = models.CharField(max_length=32, blank=True, null=True)
fax  = models.CharField(max_length=32, blank=True, null=True)
url = models.URLField(blank=True, null=True)

class Meta:
    verbose_name_plural = 'Companies'
    #unique_together = (('name', 'kam'),).

def __unicode__(self):
    return self.name 
```

现在您的模型将与用户相关联，现在您可以在 modeladmin 定义中使用 admin.py 限制要根据登录用户加载的记录，如下所示：

```
def queryset(self, request):
    qs = super(CompanyAdmin, self).queryset(request)
    # If super-user, show all comments
    if request.user.is_superuser:
        return qs
    return qs.filter(kam=request.user) 
```

这很简单让我知道这是否是你想要的？

您也可以分配只读权限。在模型管理中

# ffmpeg - 如何使用 ffmpeg 将视频的前几秒转换为多种输出格式

> ID：10892301
> 
> 赞同：4
> 
> 时间：2012-06-05T05:57:30.523
> 
> 标签：ffmpeg, video-conversion

我想使用 ffmpeg 将视频的前几秒（比如 5 秒）转换为多种输出格式。

当我使用此语法转换整个视频时，一切正常：（
为简单起见，我将所有选项保留为默认值）

```
ffmpeg -i input.flv output1.mp4 output2.avi 
```

但是当使用这种语法尝试前 5 秒时：

```
ffmpeg -t 5 -i input.flv output1.mp4 output2.avi 
```

第一个输出文件（即 ouptput1.mp4）没问题，长度为 5 秒，但第二个（以及下一个输出，如果存在）具有原始文件的大小。

这就是 ffmpeg 在屏幕上打印的内容。

```
D:\ffmpeg\bin>ffmpeg -t 5 -i input.flv output1.mp4 output2.avi
ffmpeg version N-40301-gc1fe2db Copyright (c) 2000-2012 the FFmpeg developers
  built on May  3 2012 11:40:38 with gcc 4.6.3
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-ru
ntime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass
 --enable-libcelt --enable-libopencore-amrnb --enable-libopencore-amrwb --enable
-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut --enable-libope
njpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libth
eora --enable-libutvideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-
libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --e
nable-zlib
  libavutil      51\. 49.100 / 51\. 49.100
  libavcodec     54\. 17.101 / 54\. 17.101
  libavformat    54\.  3.100 / 54\.  3.100
  libavdevice    53\.  4.100 / 53\.  4.100
  libavfilter     2\. 72.104 /  2\. 72.104
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 11.100 /  0\. 11.100
  libpostproc    52\.  0.100 / 52\.  0.100
Input #0, flv, from 'input.flv':
  Duration: 00:00:37.00, start: 0.000000, bitrate: 366 kb/s
    Stream #0:0: Video: flv1, yuv420p, 320x240, 300 kb/s, 29.97 tbr, 1k tbn, 1k
tbc
    Stream #0:1: Audio: mp3, 22050 Hz, mono, s16, 56 kb/s
[buffer @ 01de98c0] w:320 h:240 pixfmt:yuv420p tb:1/1000000 sar:0/1 sws_param:fl
ags=2
[buffer @ 01dea4e0] w:320 h:240 pixfmt:yuv420p tb:1/1000000 sar:0/1 sws_param:fl
ags=2
[libx264 @ 02b067a0] using cpu capabilities: MMX2 Cache64
[libx264 @ 02b067a0] profile High, level 1.3
[libx264 @ 02b067a0] 264 - core 120 r2164 da19765 - H.264/MPEG-4 AVC codec - Cop
yleft 2003-2012 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deb
lock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 m
e_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chro
ma_qp_offset=-2 threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_c
ompat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 we
ightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=25 scenecut=40 intra_refresh=
0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4
ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'output1.mp4':
  Metadata:
    encoder         : Lavf54.3.100
    Stream #0:0: Video: h264 (![0][0][0] / 0x0021), yuv420p, 320x240, q=-1--1, 3
0k tbn, 29.97 tbc
    Stream #0:1: Audio: aac (@[0][0][0] / 0x0040), 22050 Hz, mono, s16, 128 kb/s

Output #1, avi, to 'output2.avi':
  Metadata:
    ISFT            : Lavf54.3.100
    Stream #1:0: Video: mpeg4 (FMP4 / 0x34504D46), yuv420p, 320x240, q=2-31, 200
 kb/s, 29.97 tbn, 29.97 tbc
    Stream #1:1: Audio: mp3 (U[0][0][0] / 0x0055), 22050 Hz, mono, s16
Stream mapping:
  Stream #0:0 -> #0:0 (flv -> libx264)
  Stream #0:1 -> #0:1 (mp3 -> libvo_aacenc)
  Stream #0:0 -> #1:0 (flv -> mpeg4)
  Stream #0:1 -> #1:1 (mp3 -> libmp3lame)
Press [q] to stop, [?] for help
frame=   48 fps=0.0 q=29.0 q=2.4 size=       8kB time=00:00:00.16 bitrate= 399.6
frame=   62 fps= 59 q=29.0 q=2.4 size=      32kB time=00:00:00.63 bitrate= 408.8
frame=   73 fps= 46 q=29.0 q=3.5 size=      57kB time=00:00:01.00 bitrate= 466.1
frame=  104 fps= 50 q=29.0 q=3.5 size=      87kB time=00:00:02.03 bitrate= 349.7
frame=  134 fps= 52 q=29.0 q=3.6 size=     113kB time=00:00:03.03 bitrate= 303.9
***frame=  150 fps= 49 q=29.0 q=2.4 size=     126kB time=00:00:03.57 bitrate= 289.3
frame=  150 fps= 42 q=29.0 q=8.8 size=     126kB time=00:00:03.57 bitrate= 289.3
frame=  150 fps= 37 q=29.0 q=6.9 size=     126kB time=00:00:03.57 bitrate= 289.3
frame=  150 fps= 33 q=29.0 q=9.7 size=     126kB time=00:00:03.57 bitrate= 289.3
frame=  150 fps= 29 q=29.0 q=6.0 size=     126kB time=00:00:03.57 bitrate= 289.3
frame=  150 fps= 27 q=29.0 q=11.2 size=     126kB time=00:00:03.57 bitrate= 289.***
frame=  150 fps= 24 q=29.0 Lq=11.0 size=     171kB time=00:00:04.93 bitrate= 283
.7kbits/s
video:1282kB audio:225kB global headers:0kB muxing overhead -88.650217%
[libx264 @ 02b067a0] frame I:1     Avg QP:10.27  size:    74
[libx264 @ 02b067a0] frame P:114   Avg QP:23.49  size:   727
[libx264 @ 02b067a0] frame B:35    Avg QP:29.30  size:   124
[libx264 @ 02b067a0] consecutive B-frames: 68.0%  2.7%  0.0% 29.3%
[libx264 @ 02b067a0] mb I  I16..4: 100.0%  0.0%  0.0%
[libx264 @ 02b067a0] mb P  I16..4:  2.1%  3.2%  0.1%  P16..4: 19.2%  5.1%  3.6%
 0.0%  0.0%    skip:66.6%
[libx264 @ 02b067a0] mb B  I16..4:  0.2%  0.5%  0.0%  B16..8:  9.6%  1.2%  0.4%
 direct: 0.6%  skip:87.4%  L0:46.1% L1:42.5% BI:11.4%
[libx264 @ 02b067a0] 8x8 transform intra:51.7% inter:78.4%
[libx264 @ 02b067a0] coded y,uvDC,uvAC intra: 29.8% 44.5% 10.3% inter: 8.9% 10.3
% 2.2%
[libx264 @ 02b067a0] i16 v,h,dc,p: 52% 31% 16%  1%
[libx264 @ 02b067a0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 24% 25% 45%  1%  0%  1%  0%
 1%  3%
[libx264 @ 02b067a0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 17% 48% 23%  2%  1%  2%  3%
 2%  1%
[libx264 @ 02b067a0] i8c dc,h,v,p: 54% 26% 16%  3%
[libx264 @ 02b067a0] Weighted P-Frames: Y:2.6% UV:0.9%
[libx264 @ 02b067a0] ref P L0: 79.8%  7.0%  9.6%  3.6%  0.0%
[libx264 @ 02b067a0] ref B L0: 92.5%  6.7%  0.8%
[libx264 @ 02b067a0] ref B L1: 96.8%  3.2%
[libx264 @ 02b067a0] kb/s:139.51

D:\ffmpeg\bin> 
```

使所有输出文件大小相同的正确语法如何？

这不是ffmpeg的错误吗？（注意转换进度的最后几行，所有时间戳看起来都一样）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T18:29:35.033

您需要为每个输出添加输出选项：

```
ffmpeg -i input.flv -t 5 output1.mp4 -t 5 output2.avi 
```

考虑为输出质量添加一个附加选项——特别是对于 avi，因为 libx264（如果可用）是 mp4 的默认值，而 libx264 的默认选项是正常的。

```
ffmpeg -i input.flv -t 5 output1.mp4 -t 5 -qscale 3 output2.avi 
```

有关（也称为）的更多信息，请参阅[FFmpeg：终极视频和音频操作工具。](http://blog.superuser.com/2012/02/24/ffmpeg-the-ultimate-video-and-audio-manipulation-tool/)`-qscale``-q:v`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-21T11:55:25.297

为了省去指定每个文件名的麻烦，您可以使用 FOR 循环。这会将所有 flv 和 mp4 文件保存为 avi 文件，并将其原始文件名保存到“NEW”文件夹中。在 bat/cmd 文件中使用：

```
md NEW
FOR /F "tokens=*" %%G IN ('dir /b *.flv') DO ffmpeg -y -i "%%G" -t 5 "NEW\%%~nG.avi"
FOR /F "tokens=*" %%G IN ('dir /b *.mp4') DO ffmpeg -y -i "%%G" -t 5 "NEW\%%~nG.avi" 
```

# jquery - 如何使用 iPhone 电话间隙应用程序中的查询将数据从一个页面传递到另一个页面

> ID：10892306
> 
> 赞同：0
> 
> 时间：2012-06-05T05:57:48.297
> 
> 标签：jquery, iphone, cordova

在我的应用程序中，我有 2 页，page1 和 page2。在 page1 中，我有一个文本字段和一个标签。我想将这两个值从 page1 传递到 page2 并在单击提交按钮时分别将它们作为 2 个标签的文本插入。我是 Phonegap 和 jQuery 的新手。我如何使用 jQuery 和 Javascript 来实现这一点？

```
{
    var name = document.getElementById("usernameTextField").value;   //TextField
    var fullname = document.getElementById("nameLabel").innerHTML;  //label
    localstorage.setItem("userName", name);
    localstorage.setItem("fullname1", fullname); 
    var getusername = localstorage.getItem("userName");
    var getname = localstorage.getItem("fullname1");
    fullnameLabel.innerHTML = getname.value;  //label
    userNameLabel.innerHTML = getusername.value;  //label
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:03:14.897

You can use `localStorage` to achieve this. New in HTML5, it allows for persistent storage client-side.

`localStorage` uses key/value pairs.

`localStorage.setItem("Key-name", itemData);`

`localStorage.getItem("Key-name");`

`localStorage.removeItem("Key-name");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:31:35.033

如果您只想传递简单的文本数据，您还可以使用查询参数 (home.html?text=test)。

这里有一个链接如何在 javascript 中获取参数： [如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

这种方式可能会快一点，因为您不必在设备上使用 js 桥和文件 IO ......但这并不重要=）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:02:48.500

利用localStorage。它是在页面之间传输数据的最佳选择

在这里阅读[http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/1.7.0/cordova_storage_storage.md.html#localStorage)

# php - Ajax 使用 jquery 加载内容（URL 触发器）

> ID：10892309
> 
> 赞同：1
> 
> 时间：2012-06-05T05:58:01.213
> 
> 标签：php, jquery, ajax, load

我正在尝试像 wordpress 主题公司一样创建一个演示栏。到目前为止，我能够通过

```
$('#window').load('index.php?action=theme&themeID=5'); 
```

现在我希望能够创建触发特定代码的特定 URL。例如，如果我去上面提到的代码运行

```
http://mysite.com/theme.php?id=5 
```

我怎么做？有没有办法用php做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:03:10.447

Easily done with PHP, you just have to echo the `$_GET['id']` value inside your script:

```
echo "<script type='text/javascript'>$('#window').load('index.php?action=theme&themeID=".$_GET['id']."');</script>"; 
```

**or**

```
<script type='text/javascript'>
    $('#window').load('index.php?action=theme&themeID=<?php echo $_GET['id'] ?>');
</script> 
```

[**Reference**](http://www.php.net/manual/en/reserved.variables.get.php)

And yes, `GET` parameters are unsafe, just as `POST` parameters may also be manipulated. You should valid to check if the parameter being passed is valid in your `PHP` page beforing echoing it directly to your script.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:03:30.693

From what I gather you are trying to dynamically change javascript based on the url of the page?

```
<script type='text/javascript'>
    $('#window').load('index.php?action=theme&themeID=<?php echo $_GET['id']; ?>');
</script> 
```

You might want to cast the value to an int or something though in order to secure things a bit.

# javascript - Canvas - 用于预加载器的圆形饼形

> ID：10892319
> 
> 赞同：0
> 
> 时间：2012-06-05T05:59:01.063
> 
> 标签：javascript, html5-canvas

在下面显示的示例中，我试图完成的是预加载脚本的饼状形状。与它的交易是它从 0% 开始并以 100% 结束。根据给定的百分比，灰色圆圈后面的圆圈应自行填充。

目前我在 2 个不同的画布中有形状，因为我必须使用剪辑来实际隐藏圆圈的一部分。但是当这适用于我的灰色圆圈覆盖时，我将它们拼接起来。顺便说一句，它们都是图像。

![预加载器](../Images/093afe194df8cda1d987dd07b4e38f5b.png)

我非常感谢你们为帮助我所做的任何努力。多年来一直试图解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:15:37.513

找到了解决方案。似乎我必须使用 moveTo 函数才能正确绘制形状。

使用

```
function degreesToRadians(degrees) {
    return (degrees * Math.PI)/180;
} 
```

函数使用度数而不是弧度。

-

希望这对其他人有帮助:)

# .htaccess - 使用 htaccess 在 codeigniter 中重定向配置文件页面

> ID：10892320
> 
> 赞同：0
> 
> 时间：2012-06-05T05:59:08.207
> 
> 标签：.htaccess, codeigniter

我目前有这样的用户个人资料页面

www.mysite.com/profile/sohailanwarpk 和 htaccess 规则是

```
RewriteRule  ^profile/([_0-9a-zA-Z-]+)$  /user/profile/ 
```

sohailanwarpk 是用户名

我想做这样的链接

```
www.mysite.com/sohailanwarpk 
```

但我面临的问题是我也有其他网站页面.. 喜欢

```
www.mysite.com/page1

www.mysite.com/page2 
```

所以我可以区分这个或最好的方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:02:38.153

最好通过 routes.php

喜欢

```
 $route['^(?!page1|page2).*'] = "user/profile"; 
```

# python - Mac OS Lion 上的 pylibmc 错误

> ID：10892321
> 
> 赞同：0
> 
> 时间：2012-06-05T05:59:16.520
> 
> 标签：python, memcached, osx-lion

我在 Mac OS Lion 上遇到了 pylibmc 问题。

libmemcached — 1.0.4

pylibmc — 1.2.3

```
$ python
Python 2.7.1 (r271:86832, Jun 25 2011, 05:09:01) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pylibmc
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.7/site-packages/pylibmc/__init__.py", line 70, in <module>
    import _pylibmc
ImportError: dlopen(/Library/Python/2.7/site-packages/_pylibmc.so, 2): Symbol not found: _memcached_add
  Referenced from: /Library/Python/2.7/site-packages/_pylibmc.so
  Expected in: flat namespace
 in /Library/Python/2.7/site-packages/_pylibmc.so 
```

但它适用于 sudo！

```
$ sudo python
Password:
Python 2.7.1 (r271:86832, Jun 25 2011, 05:09:01) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pylibmc
>>> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:30:49.837

在 32 位模式下安装解决了这个问题。

1.  您需要在 32 位模式下安装 libevent

    ```
    brew install --universal libevent 
    ```

2.  接下来下载 libmemcached 源（1.0.8 版本适用于我）并为 32 位拱配置 force：

    ```
    ./configure --build=i386-apple-darwin11.4.2 "CFLAGS=-m32" "CXXFLAGS=-m32" "LDFLAGS=-m32"
    make
    sudo make install 
    ```

    其中 11.4.2 是内核版本

3.  重新安装 pylibmc

    ```
    sudo pip uninstall pylibmc
    sudo pip install pylibmc 
    ```

4.  现在它可以工作了

    ```
    $ python -c 'import pylibmc'
    $ 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T18:31:56.980

看起来像是 libmemcached 的构建和/或安装问题。也许您可以查看问题 #101？[https://github.com/lericson/pylibmc/issues/101](https://github.com/lericson/pylibmc/issues/101)

# javascript - Javascript HashTable 使用 Object 键

> ID：10892322
> 
> 赞同：45
> 
> 时间：2012-06-05T05:59:18.327
> 
> 标签：javascript, object, hash, key

我想创建一个带有`Object`未转换为字符串的键的哈希表。

像这样的一些事情：

```
var object1 = new Object();
var object2 = new Object();

var myHash = new HashTable();

myHash.put(object1, "value1");
myHash.put(object2, "value2");

alert(myHash.get(object1), myHash.get(object2)); // I wish that it will print value1 value2 
```

**编辑：**查看[我](https://stackoverflow.com/a/10908885/1129332)的完整解决方案的答案

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-11T09:55:20.747

这是一个简单的`Map`实现，可以使用任何类型的键，包括对象引用，并且不会以任何方式改变键：

```
function Map() {
    var keys = [], values = [];

    return {
        put: function (key, value) {
            var index = keys.indexOf(key);
            if(index == -1) {
                keys.push(key);
                values.push(value);
            }
            else {
                values[index] = value;
            }
        },
        get: function (key) {
            return values[keys.indexOf(key)];
        }
    };
} 
```

虽然这产生了与哈希表相同的功能，但它实际上并未使用哈希函数实现，因为它遍历数组并且具有 O(n) 的最坏情况性能。但是，对于绝大多数合理的用例来说，这根本不应该是一个问题。该`indexOf`功能由 JavaScript 引擎实现，并经过高度优化。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-05T07:39:35.983

这是一个建议：

```
function HashTable() {
    this.hashes = {};
}

HashTable.prototype = {
    constructor: HashTable,

    put: function( key, value ) {
        this.hashes[ JSON.stringify( key ) ] = value;
    },

    get: function( key ) {
        return this.hashes[ JSON.stringify( key ) ];
    }
}; 
```

API 与您的问题中显示的完全一样。

但是，您不能在 js 中使用引用（因此两个空对象在哈希表中看起来是一样的），因为您无法获取它。有关更多详细信息，请参阅此答案：[如何获取 javascript 对象引用或引用计数？](https://stackoverflow.com/questions/2937120/how-to-get-javascript-object-references-or-reference-count)

Jsfiddle 演示：http: [//jsfiddle.net/HKz3e/](http://jsfiddle.net/HKz3e/)

但是，对于事物的独特之处，您可以使用原始对象，如下所示：

```
function HashTable() {
    this.hashes = {},
    this.id = 0;
}

HashTable.prototype = {
    constructor: HashTable,

    put: function( obj, value ) {
        obj.id = this.id;
        this.hashes[ this.id ] = value;
        this.id++;
    },

    get: function( obj ) {
        return this.hashes[ obj.id ];
    }
}; 
```

Jsfiddle 演示：http: [//jsfiddle.net/HKz3e/2/](http://jsfiddle.net/HKz3e/2/)

这意味着您的对象需要有一个`id`您不会在其他地方使用的名为的属性。如果您想将此属性设置为不可枚举，我建议您看一下[`defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)（但是它不是跨浏览器，即使使用 ES5-Shim，它在 IE7 中也不起作用）。

这也意味着您可以在此哈希表中存储的项目数量受到限制。限于[2 ^(53)](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)，即。

而现在，“它不会在任何地方工作”的解决方案：使用 ES6 WeakMaps。它们正是为此目的而完成的：将对象作为键。我建议您阅读 MDN 了解更多信息：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/WeakMap](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/WeakMap)

不过，它与您的 API 略有不同（它是`set`而不是`put`）：

```
var myMap = new WeakMap(),
    object1 = {},
    object2 = {};

myMap.set( object1, 'value1' );
myMap.set( object2, 'value2' );

console.log( myMap.get( object1 ) ); // "value1"
console.log( myMap.get( object2 ) ); // "value2" 
```

带有弱映射垫片的 Jsfiddle 演示：http: [//jsfiddle.net/Ralt/HKz3e/9/](http://jsfiddle.net/Ralt/HKz3e/9/)

但是，弱映射是在 FF 和 Chrome 中实现的（**仅**当您在 chrome 中启用“Experimental javascript features”标志时）。有可用的垫片，例如：[https](https://gist.github.com/1269991) ://gist.github.com/1269991 。使用风险自负。

您也可以使用`Maps`，它们可能更适合您的需求，因为您还需要将原始值（字符串）存储为键。[医生](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Map)，[希姆](https://github.com/Benvie/ES6-Harmony-Collections-Shim)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-06T05:59:52.483

我将@Florian Margaine 的建议提升到了更高的水平，并提出了这个建议：

```
function HashTable(){
    var hash = new Object();
    this.put = function(key, value){
        if(typeof key === "string"){
            hash[key] = value;
        }
        else{
            if(key._hashtableUniqueId == undefined){
                key._hashtableUniqueId = UniqueId.prototype.generateId();
            }
            hash[key._hashtableUniqueId] = value;
        }

    };

    this.get = function(key){
        if(typeof key === "string"){
            return hash[key];
        }
        if(key._hashtableUniqueId == undefined){
            return undefined;
        }
        return hash[key._hashtableUniqueId];
    };
}

function UniqueId(){

}

UniqueId.prototype._id = 0;
UniqueId.prototype.generateId = function(){
    return (++UniqueId.prototype._id).toString();
}; 
```

**用法**

```
var map = new HashTable();
var object1 = new Object();
map.put(object1, "Cocakola");
alert(map.get(object1)); // Cocakola

//Overriding
map.put(object1, "Cocakola 2");
alert(map.get(object1)); // Cocakola 2

// String key is used as String     
map.put("myKey", "MyValue");
alert(map.get("myKey")); // MyValue
alert(map.get("my".concat("Key"))); // MyValue

// Invalid keys 
alert(map.get("unknownKey")); // undefined
alert(map.get(new Object())); // undefined 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-11T09:58:27.833

这是一个提议，将@Florian 的解决方案与@Laurent 的解决方案结合起来。

```
function HashTable() {
    this.hashes = [];
}

HashTable.prototype = {
    constructor: HashTable,

    put: function( key, value ) {
        this.hashes.push({
            key: key,
            value: value
        });
    },

    get: function( key ) {
        for( var i = 0; i < this.hashes.length; i++ ){
            if(this.hashes[i].key == key){
                return this.hashes[i].value;
            }
        }
    }
}; 
```

它不会以任何方式更改您的对象，也不依赖 JSON.stringify。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-03T22:58:35.593

我知道我迟到了一年，但对于所有其他偶然发现这个线程的人，我已经将有序对象 stringify 编写为 JSON，这解决了上述困境：[http ://stamat.wordpress.com/javascript-object -ordered-property-stringify/](http://stamat.wordpress.com/javascript-object-ordered-property-stringify/)

我也在玩与主题相关的自定义哈希表实现：http: [//stamat.wordpress.com/javascript-quickly-find-very-large-objects-in-a-large-array/](http://stamat.wordpress.com/javascript-quickly-find-very-large-objects-in-a-large-array/)

```
//SORT WITH STRINGIFICATION

var orderedStringify = function(o, fn) {
    var props = [];
    var res = '{';
    for(var i in o) {
        props.push(i);
    }
    props = props.sort(fn);

    for(var i = 0; i < props.length; i++) {
        var val = o[props[i]];
        var type = types[whatis(val)];
        if(type === 3) {
            val = orderedStringify(val, fn);
        } else if(type === 2) {
            val = arrayStringify(val, fn);
        } else if(type === 1) {
            val = '"'+val+'"';
        }

        if(type !== 4)
            res += '"'+props[i]+'":'+ val+',';
    }

    return res.substring(res, res.lastIndexOf(','))+'}';
};

//orderedStringify for array containing objects
var arrayStringify = function(a, fn) {
    var res = '[';
    for(var i = 0; i < a.length; i++) {
        var val = a[i];
        var type = types[whatis(val)];
        if(type === 3) {
            val = orderedStringify(val, fn);
        } else if(type === 2) {
            val = arrayStringify(val);
        } else if(type === 1) {
            val = '"'+val+'"';
        }

        if(type !== 4)
            res += ''+ val+',';
    }

    return res.substring(res, res.lastIndexOf(','))+']';
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-12T18:16:45.400

基于 Peters 的回答，但具有适当的类设计（不滥用闭包），因此这些值是可调试的。重命名为`Map`to `ObjectMap`，因为`Map`是一个内置函数。还添加了`exists`方法：

```
ObjectMap = function() {
    this.keys = [];
    this.values = [];
}

ObjectMap.prototype.set = function(key, value) {
    var index = this.keys.indexOf(key);
    if (index == -1) {
        this.keys.push(key);
        this.values.push(value);
    } else {
        this.values[index] = value;
    }
}

ObjectMap.prototype.get = function(key) {
    return this.values[ this.keys.indexOf(key) ];
}

ObjectMap.prototype.exists = function(key) {
    return this.keys.indexOf(key) != -1;
}

/*
    TestObject = function() {}

    testA = new TestObject()
    testB = new TestObject()

    om = new ObjectMap()
    om.set(testA, true)
    om.get(testB)
    om.exists(testB)
    om.exists(testA)
    om.exists(testB)
*/ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-17T19:26:54.560

使用`JSON.stringify()`对我来说完全是尴尬的，并且让客户无法真正控制他们的密钥是如何唯一标识的。用作键的对象应该有一个散列函数，但我的猜测是，在大多数情况下重写该`toString()`方法，以便它们返回唯一的字符串，会正常工作：

```
var myMap = {};

var myKey = { toString: function(){ return '12345' }};
var myValue = 6;

// same as myMap['12345']
myMap[myKey] = myValue; 
```

显然，`toString()`应该对对象的属性做一些有意义的事情来创建一个唯一的字符串。如果您想强制您的密钥有效，您可以创建一个包装器并在`get()`and`put()`方法中添加一个检查，例如：

```
if(!key.hasOwnProperty('toString')){
   throw(new Error('keys must override toString()'));
} 
```

但是，如果您要完成那么多工作，则不妨使用`toString()`;以外的其他东西。让你的意图更清晰的东西。所以一个非常简单的建议是：

```
function HashTable() {
    this.hashes = {};
}

HashTable.prototype = {
    constructor: HashTable,

    put: function( key, value ) {
        // check that the key is meaningful, 
        // also will cause an error if primitive type
        if( !key.hasOwnProperty( 'hashString' ) ){
           throw( new Error( 'keys must implement hashString()' ) );
        }
        // use .hashString() because it makes the intent of the code clear
        this.hashes[ key.hashString() ] = value;
    },

    get: function( key ) {
        // check that the key is meaningful, 
        // also will cause an error if primitive type
        if( !key.hasOwnProperty( 'hashString' ) ){
           throw( new Error( 'keys must implement hashString()' ) );
        }
        // use .hashString() because it make the intent of the code clear
        return this.hashes[ key.hashString()  ];
    }
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-30T15:38:30.167

受@florian 启发，这里有一种不需要 id 的方法`JSON.stringify`：

```
'use strict';

module.exports = HashTable;

function HashTable () {
  this.index = [];
  this.table = [];
}

HashTable.prototype = {

  constructor: HashTable,

  set: function (id, key, value) {
    var index = this.index.indexOf(id);
    if (index === -1) {
      index = this.index.length;
      this.index.push(id);
      this.table[index] = {};
    }
    this.table[index][key] = value;
  },

  get: function (id, key) {
    var index = this.index.indexOf(id);
    if (index === -1) {
      return undefined;
    }
    return this.table[index][key];
  }

}; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-31T18:20:01.153

我采用@Ilya_Gazman 解决方案并通过将'_hashtableUniqueId' 设置为不可枚举的属性来改进它（它不会出现在JSON 请求中，也不会在for 循环中列出）。还删除了 UniqueId 对象，因为仅使用 HastTable 函数闭包就足够了。有关使用详情，请参阅 Ilya_Gazman 帖子

```
function HashTable() {
   var hash = new Object();

   return {
       put: function (key, value) {
           if(!HashTable.uid){
               HashTable.uid = 0;
           }
           if (typeof key === "string") {
               hash[key] = value;
           } else {
               if (key._hashtableUniqueId === undefined) {
                   Object.defineProperty(key, '_hashtableUniqueId', {
                       enumerable: false,
                       value: HashTable.uid++
                   });
               }
               hash[key._hashtableUniqueId] = value;
           }
       },
       get: function (key) {
           if (typeof key === "string") {
               return hash[key];
           }
           if (key._hashtableUniqueId === undefined) {
               return undefined;
           }
           return hash[key._hashtableUniqueId];
       }
   };
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-23T13:22:47.930

最好的解决方案是尽可能使用[Wea​​kMap](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/WeakMap)（即当您的目标浏览器支持它时）

否则，您可以使用以下解决方法（Typescript 编写且碰撞安全）：

```
// Run this in the beginning of your app (or put it into a file you just import)
(enableObjectID)();

const uniqueId: symbol = Symbol('The unique id of an object');

function enableObjectID(): void {
    if (typeof Object['id'] !== 'undefined') {
        return;
    }

    let id: number = 0;

    Object['id'] = (object: any) => {
        const hasUniqueId: boolean = !!object[uniqueId];
        if (!hasUniqueId) {
            object[uniqueId] = ++id;
        }

        return object[uniqueId];
    };
} 
```

然后，您可以简单地为代码中的任何对象获取一个唯一编号（就像指针地址一样）

```
let objectA = {};
let objectB = {};
let dico = {};

dico[(<any>Object).id(objectA)] = "value1";

// or 

dico[Object['id'](objectA);] = "value1";

// If you are not using typescript you don't need the casting

dico[Object.id(objectA)] = "value1" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-19T04:26:41.427

我知道我迟到了，但这里有一个简单的`HashMap`实现：

```
Function.prototype.toJSON = Function.prototype.toString;
//taken from https://stackoverflow.com/questions/1249531/how-to-get-a-javascript-objects-class
function getNativeClass(obj) {
    if (typeof obj === "undefined") return "undefined";
    if (obj === null) return "null";
    return Object.prototype.toString.call(obj).match(/^\[object\s(.*)\]$/)[1];
}
function globals() {
    if (typeof global === "object") //node
        return global;
    return this;
}

function lookup(x) {
    return globals()[x];
}

function getAnyClass(obj) {
    if (typeof obj === "undefined") return "undefined";
    if (obj === null) return "null";
    return obj.constructor.name;
}

//taken from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value#examples
var getCircularReplacer = () => {
    const seen = new WeakSet();
    return (key, value) => {
        if (typeof value === "object" && value !== null) {
            if (seen.has(value)) {
                return "[Circular]";
            }
            seen.add(value);
        }
        return value;
    };
};

function encode(x) {
    if (typeof x === "object" && x !== null) {
        var y = myClone(x);
        x = Object.getPrototypeOf(x);
        for (var i = 0; i < Object.getOwnPropertyNames(y).length; i++) { //Make enumerable
            x[Object.getOwnPropertyNames(y)[i]] = y[Object.getOwnPropertyNames(y)[i]];
        }
    }

    return getAnyClass(x) + " " + JSON.stringify(x, getCircularReplacer());
}

function decode(x) {
    var a = x.split(" ").slice(1).join(" "); //OBJECT
    if (typeof lookup(x.split(" ")[0])) {
        return new (lookup(x.split(" ")[0]))(JSON.parse(a))
    } else {
        return JSON.parse(a);
    }
}

//taken from https://github.com/feross/fromentries/blob/master/index.js
/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
function fromEntries(iterable) {
    return [...iterable].reduce((obj, [key, val]) => {
        obj[key] = val
        return obj
    }, {})
}

var toEnumerable = (obj) => {
    return fromEntries(
        Object.getOwnPropertyNames(obj).map(prop => [prop, obj[prop]])
    );
};

//taken from https://stackoverflow.com/questions/41474986/how-to-clone-a-javascript-es6-class-instance
function myClone(instanceOfBlah) {
    if (typeof instanceOfBlah !== "object" || !instanceOfBlah) { return instanceOfBlah; }
    const clone = Object.assign({}, toEnumerable(instanceOfBlah));
    const Blah = instanceOfBlah.constructor;
    Object.setPrototypeOf(clone, Blah.prototype);
    return clone;
}

function HashMap(a) {
    if (typeof a === "undefined") {
        a = [];
    }

    a = Array.from(a);

    a = a.map((e) => [encode(e[0]), e[1]]);

    this.a = a;
}

HashMap.from = function (a) {
    var temp = myClone(a);
    //convert to array
    a = [];
    for (var i = 0; i < Object.getOwnPropertyNames(temp).length; i++) {
        a.push([Object.getOwnPropertyNames(temp)[i], temp[Object.getOwnPropertyNames(temp)[i]]]);
    }
    return new HashMap(a);
}

HashMap.prototype.put = function (x, y) {
    this.a.push([encode(x), y]);
}

HashMap.prototype.get = function (x) {
    var t1 = this.a.map((e) => e[0]);
    return this.a[t1.indexOf(encode(x))][1];
}

HashMap.prototype.length = function () {
    return this.a.length;
}

HashMap.prototype.toString = function () {
    var result = [];
    for (var i = 0; i < this.length(); i++) {
        result.push(JSON.stringify(decode(this.a[i][0]), getCircularReplacer()) + " => " + this.a[i][1]);
    }

    return "HashMap {" + result + "}";
}

var foo = new HashMap();
foo.put("SQRT3", Math.sqrt(3));
foo.put({}, "bar");

console.log(foo.get({}));
console.log(foo.toString());
```

请注意，它是有序的。方法：

*   `put`：添加一个项目
*   `get`: 访问一个项目
*   `from`（静态）：从 JavaScript 对象转换
*   `toString`: 转换为字符串

缩小且未经测试：

```
function getNativeClass(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]}function globals(){return"object"==typeof global?global:this}function lookup(t){return globals()[t]}function getAnyClass(t){return void 0===t?"undefined":null===t?"null":t.constructor.name}Function.prototype.toJSON=Function.prototype.toString;var getCircularReplacer=()=>{const t=new WeakSet;return(e,r)=>{if("object"==typeof r&&null!==r){if(t.has(r))return"[Circular]";t.add(r)}return r}};function encode(t){if("object"==typeof t&&null!==t){var e=myClone(t);t=Object.getPrototypeOf(t);for(var r=0;r<Object.getOwnPropertyNames(e).length;r++)t[Object.getOwnPropertyNames(e)[r]]=e[Object.getOwnPropertyNames(e)[r]]}return getAnyClass(t)+" "+JSON.stringify(t,getCircularReplacer())}function decode(t){var e=t.split(" ").slice(1).join(" ");return lookup(t.split(" ")[0]),new(lookup(t.split(" ")[0]))(JSON.parse(e))}function fromEntries(t){return[...t].reduce((t,[e,r])=>(t[e]=r,t),{})}var toEnumerable=t=>fromEntries(Object.getOwnPropertyNames(t).map(e=>[e,t[e]]));function myClone(t){if("object"!=typeof t||!t)return t;const e=Object.assign({},toEnumerable(t)),r=t.constructor;return Object.setPrototypeOf(e,r.prototype),e}function HashMap(t){void 0===t&&(t=[]),t=(t=Array.from(t)).map(t=>[encode(t[0]),t[1]]),this.a=t}HashMap.from=function(t){var e=myClone(t);t=[];for(var r=0;r<Object.getOwnPropertyNames(e).length;r++)t.push([Object.getOwnPropertyNames(e)[r],e[Object.getOwnPropertyNames(e)[r]]]);return new HashMap(t)},HashMap.prototype.put=function(t,e){this.a.push([encode(t),e])},HashMap.prototype.get=function(t){var e=this.a.map(t=>t[0]);return this.a[e.indexOf(encode(t))][1]},HashMap.prototype.length=function(){return this.a.length},HashMap.prototype.toString=function(){for(var t=[],e=0;e<this.length();e++)t.push(JSON.stringify(decode(this.a[e][0]),getCircularReplacer())+" => "+this.a[e][1]);return"HashMap {"+t+"}"}; 
```

此外，您可以通过更改`encode`和`decode`功能自定义编码器和解码器。

正如弗洛里安的回答一样，您不能使用 js 中的引用（因此两个空对象看起来与哈希表相同）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-17T04:09:54.417

```
class Dict{
    constructor(){
        this.keys = [];
        this.values = [];
        this.set = this.set.bind(this);
    }

    set(key, value){
        this.keys.push(key);
        this.values.push(value);
    }

    get(key){
        return this.values[this.keys.indexOf(key)];
    }

    all(){
        return this.keys.map((kk, ii)=>[kk, this.values[ii]]);
    }
}

let d1 = new Dict();

let k1 = {1: 'a'};
d1.set(k1, 2);
console.log(d1.get(k1));  // 2
let k2 = {2: 'b'};
d1.set(k2, 3);

console.log(d1.all());
// [ [ { '1': 'a' }, 2 ], [ { '2': 'b' }, 3 ] ] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2022-01-22T20:48:24.550

当您说您不希望将您的对象键转换为字符串时，我会假设这是因为您只是不希望将对象的整个代码内容用作键。当然，这完全有道理。

虽然 Javascript 本身没有“哈希表”，但您可以通过简单地覆盖 Object 的 prototype.toString 并返回每个实例唯一的有效键值来完成您要查找的内容。一种方法是使用[Symbol()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol)：

```
function Obj () {
    this.symbol = Symbol() // Guaranteed to be unique to each instance
}

Obj.prototype.toString = function () {
    return this.symbol // Return the unique Symbol, instead of Obj's stringified code
}

let a = new Obj()
let b = new Obj()

let table = {}

table[a] = 'A'
table[b] = 'B'

console.log(table)      // {Symbol(): 'A', Symbol(): 'B'}
console.log(table[a])   // A
console.log(table[b])   // B 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-06-05T06:01:56.823

查找对象时只需使用严格相等运算符：`===`

```
var objects = [];
objects.push(object1);
objects.push(object2);

objects[0] === object1; // true
objects[1] === object1; // false 
```

实现将取决于您如何在`HashTable`类中存储对象。

# android - 如何在 Android 中使用 Google Places API？

> ID：10892325
> 
> 赞同：0
> 
> 时间：2012-06-05T05:59:29.640
> 
> 标签：android, xml, parsing, google-places-api

我知道访问 google 地方的 URL。[在这里检查](https://maps.googleapis.com/maps/api/place/search/xml?&location=17.739290150000002,83.3071201&radius=6000&names=hospital&sensor=true&key=yourkeyhere)

但我无法解析来自 XML 格式的 URL 的数据。所以，告诉我以 xml 格式显示来自 google 地方 API 的数据的机制。

请告诉我一些示例代码或任何教程。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:07:58.747

您可以通过 Json 解析它。

如果您看到您的网址包含`xml` [此处](https://maps.googleapis.com/maps/api/place/search/xml?&location=17.739290150000002,83.3071201&radius=6000&names=hospital&sensor=true&key=yourkeyhere)。 *这将在 xml 中给出响应。*

用xml输出：

```
<PlaceSearchResponse>
<status>REQUEST_DENIED</status>
</PlaceSearchResponse> 
```

[只需将其](https://maps.googleapis.com/maps/api/place/search/json?&location=17.739290150000002,83.3071201&radius=6000&names=hospital&sensor=true&key=yourkeyhere)替换为`json`这样。 *这将在 Json 中给出响应。*

 *使用 Json 输出：

```
{
   "html_attributions" : [],
   "results" : [],
   "status" : "REQUEST_DENIED"
} 
```

请参阅[此博客](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)以获取更多帮助

用于解析

```
try
{
    HttpPost httppost = new HttpPost("https://maps.googleapis.com/maps/api/place/search/json?&location=17.739290150000002,83.3071201&radius=6000&names=hospital&sensor=true&key=yourkeyhere");
    HttpClient httpclient = new DefaultHttpClient();
    response = httpclient.execute(httppost);
    String data = EntityUtils.toString(response.getEntity());
    System.out.println(data);
    //parse with Json, Gson, Jackson

} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:11:48.523

首先去这个。[然后链接](https://maps.googleapis.com/maps/api/place/search/json?&location=17.739290150000002,83.3071201&radius=6000&names=hospital&sensor=true&key=yourkeyhere)有关谷歌地方的其他信息。

Google Places API 是一项服务，它使用 HTTP 请求返回有关 Places 的信息（在此 API 中定义为场所、地理位置或显着的兴趣点）。地点请求将位置指定为纬度/经度坐标。

有四个基本的地方请求可用：

*   [**地点搜索**](https://developers.google.com/maps/documentation/places/#PlaceSearches) 会根据用户的位置返回附近地点的列表。
*   [**地点详细信息请求**](https://developers.google.com/maps/documentation/places/#PlaceDetails) 返回有关特定地点的更多详细信息。
*   [**地点**](https://developers.google.com/maps/documentation/places/#PlaceCheckins) 签到允许您报告用户已签到地点。签到用于衡量某个地方的受欢迎程度；频繁签到将提高地方在您应用程序的地方搜索结果中的排名。
*   [**地点报告**](https://developers.google.com/maps/documentation/places/#PlaceReports) 允许您将新地点添加到地点服务，并删除您的应用程序添加的地点。

Places API 还提供对事件的支持，这些事件被定义为在 Places 服务中列出的位置发生的任何类型的公共或私人聚会、表演或促销活动。有关更多信息，请参阅 [Places API 中的事件](/maps/documentation/places/events)。

（[更多](https://developers.google.com/maps/documentation/places/)）。[这是关于如何在 android 中使用 google 地方的](http://ddewaele.blogspot.com/2011/05/introducing-google-places-api.html)最佳教程 。

并转到此链接还有[Google 的 Places API 以开发引人注目的基于位置的移动应用程序](http://blog.brianbuikema.com/2010/08/android-development-part-1-using-googles-places-api-to-develop-compelling-location-based-mobile-applications/)另一个 google 地图示例（[此处](http://mobiforge.com/developing/story/using-google-maps-android)）。[谷歌地方的谷歌开发者的视频](http://www.youtube.com/watch?v=CPO-6e8ijY8)。

我想这可能对你有帮助。*

# javascript - 如何在 Chrome 中调试 RequreJS 检索到的脚本

> ID：10892328
> 
> 赞同：2
> 
> 时间：2012-06-05T05:59:47.780
> 
> 标签：javascript, debugging, requirejs

我正在使用第三方插件，它使用 RequireJS 调用脚本。我想调试例如在这些脚本中设置断点，但它们没有出现在 Chrome 开发人员工具的脚本选项卡中。

无论如何我可以在chrome中执行调试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T02:36:59.443

调试使用 RequireJS 加载的模块的唯一困难是，如果仅在条件 X 发生时才加载模块，并且在首次加载应用程序时该条件不存在，则必须等到条件发生才能在模块上设置断点代码。

例如，如果您想调试`bar`模块中的函数`foo`并`foo`像这样加载：

```
if (X) {
    require(["foo"], function (foo) {
        foo.bar();
    });
} 
```

您必须先触发条件`X`，然后才能开始在`foo.bar`. 最有可能的是，您希望在`foo.bar()`调用的位置放置一个断点，以便您有机会在`foo.bar`.

在 Chrome 和 Firefox 中确实如此，并且可能在其他提供调试工具的浏览器中也是如此。

# sencha-touch - 如何在sencha touch中更改列表项的字体大小和颜色

> ID：10892331
> 
> 赞同：2
> 
> 时间：2012-06-05T06:00:09.697
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我有一个示例应用程序，我在其中使用 itemtpl 将商店数据绑定到列表，当我将数据动态绑定到商店中的列表时，我对如何更改**前两个列表项的颜色和大小几乎没有混淆。**

这是我的示例代码：

```
Ext.define('Sample.view.SearchResultView', {
    extend: 'Ext.Panel',
    requires: [
        'Ext.List',
        'Ext.form.FieldSet',
        'Ext.field.Text',
       'Ext.Toolbar',
       'Ext.TitleBar'
    ],

    alias: "widget.searchresultpage",

    config: {
        scrollable: true,
        items: [

              {
                  xtype: 'list',
                  layout:'fit',
                  height:500,
                  title: 'Search Results',
                  store: 'MySearchStore',
                 itemTpl: '<table><td><tr height=10%>{BlockNo}</tr><tr height=90%><p>{ShortDescription}</p></tr></td></table>'

                                               )
              }
        ]
    },

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T08:08:22.320

您需要在`cls`列表中添加一个属性，例如：

```
cls:'myList' 
```

然后将其添加到您的 CSS 文件中：

```
.myList .x-list-item:nth-child(1),
.myList .x-list-item:nth-child(2) {
  color: #CCC;
  font-size:14px;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T06:11:41.743

您可以自行设置字体和颜色`itemTpl`。

```
itemTpl: '<table><td><tr height=10%><font size="12" color="#990000">{BlockNo}</font></tr>           
<tr height=90%><p><font size="8" color="#990000">{ShortDescription}</font></p></tr></td>  
</table>' 
```

# javascript - 事件未在 iframe 内执行

> ID：10892335
> 
> 赞同：0
> 
> 时间：2012-06-05T06:00:39.110
> 
> 标签：javascript, jquery

我正在添加内容，`iframe dynamically`并且该内容使用以下事件与事件绑定`.live() function`：

```
 <body>
            <div id="container">
               <iframe id="if" src="something"></iframe>
            </div>

            <script>
             /* binding event */
             $(document).ready(function() {
               $("p").live("mouseover", function() { /* do something */ });
             });

             /* appending content */
              $("#if").contents().find("#someid").append("<p></p>");                  
            </script>
           </body> 
```

添加成功，`p tag`但鼠标悬停时未执行事件。有什么问题？

**注意**：我无法在 iframe 中添加绑定事件脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:05:03.713

您的实时绑定仅适用于主文档，不适用于 iframe。你试过跟随吗？

使用 jQuery 1.4 及更高版本使用[jQuery 委托](http://api.jquery.com/delegate/)：

```
$("#if").ready(function() {
    $("#if").contents().delegate("p", "mouseover", function() {
        // do something
    });
}); 
```

对于 jQuery 1.7 及更高版本，请在[jQuery 上](http://api.jquery.com/on/)使用：

```
$("#if").ready(function() {
    $("#if").contents().on("mouseover", "p", function() {
        // do something
    });
}); 
```

另请参阅[delegate()](http://jsfiddle.net/JVwFQ/2/)的示例或[on()](http://jsfiddle.net/JVwFQ/1/)的示例：在“鼠标事件加载”警报悬停云图像之后。

Ps：这将针对`<p>`iframe内的所有内容。但是 iframe 只有在不违反浏览器跨站策略的情况下才会被解析。

# tomcat - tomcat (web.xml) 中的领域名称

> ID：10892336
> 
> 赞同：15
> 
> 时间：2012-06-05T06:00:42.280
> 
> 标签：tomcat, security, web.xml

Tomcat中的领域名称是什么。

```
<login-config> 
     <auth-method>BASIC</auth-method> 
     <realm-name></realm-name> 
</login-config> 
```

在上面的代码中，我必须填写领域名称元素。我在 server.xml 文件中看到了以下代码：

```
<Realm className="org.apache.catalina.realm.UserDatabaseRealm" 
            resourceName="UserDatabase"/> 
```

领域名称在哪里指定？是用户名吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T06:12:32.383

领域名称不是用户名。它是身份验证领域，“通常是对正在访问的计算机或系统的描述” - 请参阅[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。这应该是对您要保护的资源有意义的名称。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-06T13:42:20.920

value`<realm-name>`元素用于计算明文密码的摘要值，如此处所述[http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#Digested_Passwords](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#Digested_Passwords)

如果`<realm-name>`web.xml 中未指定元素，则使用默认值“ `Authentication required`”。

# java - Eclipse Helios 3.6.1 调试视图评估表达式不可用

> ID：10892338
> 
> 赞同：2
> 
> 时间：2012-06-05T06:00:49.610
> 
> 标签：java, eclipse, debugging, ide

我正在调试 JUnit 测试，在某些时候表达式评估（**CTRL+Shift+I**）变得不可用。

我正在使用 Java 透视图 -> 包资源管理器视图 r 开始调试会话。单击项目根目录并选择“Debug -> as Junit”。在调试视图中，当我尝试对某个变量或表达式使用 CTRL+Shift+I 时，我收到以下消息：

![在此处输入图像描述](../Images/b4f48b4b2e021052724f354f930c2842.png)

变量视图正确显示值。但是 CTRL+Shift+I 和显示视图会出现相同的错误。工作区元数据目录中的日志文件未显示任何相关错误（相对于我当前的调试会话，所有消息都已过时）。

我正在使用 Eclipse Helios 3.6.1。重新启动 IDE 对这种情况没有帮助。

知道如何解决这个烦人的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:58:42.417

我不知道哪一个确实有助于解决我的问题，但我在下面发布了我为解决问题所做的所有伏都教事情。希望有人会发现其中一个有用。

1.  “清理”您的 Eclipse 项目：转到项目 > 在 Eclipse 中清理
2.  刷新您的项目文件夹（右键单击您的项目>刷新）
3.  重新构建您的项目
4.  清理你的构建（如果使用 Ant 或 Maven——清理你的构建）
5.  “切换”工作区——然后切换回（例如更改为调试，然后切换回 Java）
6.  “切换”工作区——然后切换回（例如更改为调试，然后切换回 Java）
7.  删除并重新添加您的 JRE：

    7.1。右键单击您的项目 > 属性
    7.2。单击库选项卡
    7.3。单击 JRE
    7.4。单击删除，然后单击确定
    7.5。再次重复 1-3，但再次添加 JRE

[从这里](http://blog.sherifmansour.com/?p=207)偷来的小贴士

# geometry - 如何使用 C# 在用户控件上绘制 shapefile 的几何图形？

> ID：10892344
> 
> 赞同：0
> 
> 时间：2012-06-05T06:01:38.157
> 
> 标签：geometry, draw, shapefile

我正在尝试编写一个应用程序来在.net 表单上可视化 shapefile，而不使用任何外部 SDK。我已经成功编写了读取 shapefile 的代码。现在我无法使用 GDI+ 技巧将几何图形有效地绘制到用户控件。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:10:24.863

您应该使用 UserControl（通常是 Control）的 Graphics 对象在其上绘制点、线等。如果您可以从 shapefile 获取点信息，这将很有用。使用以下链接使其工作。 [在 UserControl 上使用画笔](https://stackoverflow.com/questions/8150079/drawing-with-brush-on-usercontrol)绘制并在自定义 UserControl上 [绘制一个点](http://social.msdn.microsoft.com/Forums/en/winforms/thread/f681eef0-645d-48a0-bfb9-8c0473ebf974)

这是一个例子：

```
Graphics g = this.CreateGraphics();
g.DrawPolygon( ... ) ; 
```

# iphone - 第一次 STAssert 失败后 SenTesting 停止测试

> ID：10892347
> 
> 赞同：5
> 
> 时间：2012-06-05T06:01:58.497
> 
> 标签：iphone, ios, unit-testing, sentestingkit

一旦第一个 STAssert 失败，有没有办法停止执行 iOS 单元测试？

例如，如果我有多个 STAssert：

```
STAssertTrue([myobject succeeded], @"failed");
STAssertNotNil(foo,@"bar"); 
```

如果 Xcode 在第一个测试失败后简单地停止执行测试，我会喜欢它。有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T09:36:30.240

如果您为所有异常设置了异常断点，Xcode 将在第一次失败的测试时向调试器抛出异常。如果您在 Xcode 中手动运行测试，这可能是可以接受的。

在 Xcode 4+ 中设置异常断点

1.  视图 > 导航器 > 显示断点导航器
2.  单击 Breakpoint Navigator 窗口左下方的 + 按钮，选择“Add Exception Breakpoint”
3.  在出现的弹出窗口中单击“完成”。

Xcode 将在应用程序运行时遇到任何异常时中断调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T18:11:06.817

如果将以下方法添加到测试类中，任何失败的 STAssert 语句都将停止测试方法的执行。

```
- (void)failWithException:(NSException *)anException{
  [super failWithException:anException];
  NSAssert(false, @"An assertion has failed");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T16:59:34.797

`SenTestCase`有一个方法`-[SenTestCase raiseAfterFailure]`会导致`STAssert...`在完成时引发异常，从而阻止测试中的下一行执行。

您可以逐个测试地执行此操作：

```
- (void)testSomeStuff
{
    [self raiseAfterFailure];
    STAssertTrue([myobject succeeded], @"failed");
    STAssertNotNil(foo,@"bar");
} 
```

或在班级级别：

```
- (void)setUp
{
    [super setUp];
    [self raiseAfterFailure];
} 
```

# iphone - How to send JSON data over NSURLConnection

> ID：10892355
> 
> 赞同：0
> 
> 时间：2012-06-05T06:03:03.087
> 
> 标签：iphone, objective-c, json, nsurlconnection, nsjsonserialization

I have successfully created a method which connects to my web service and POSTS a string and receives a string response. However, I am now trying to POST a JSON dictionary created using NSJSONSerialization. However, Xcode is giving me an error. I have tried to convert my initial code. Relevant lines below...

```
NSData* loginDataJSON = [NSJSONSerialization dataWithJSONObject:loginDataDictionary options:NSJSONWritingPrettyPrinted error:&error];
[request setValue:loginDataJSON forHTTPHeaderField:@"loginDataJSON"];
[request setHTTPBody:[loginDataJSON dataUsingEncoding:NSUTF8StringEncoding]]; 
```

The second line heres complains that I am using NSData where an NSString is required. The third line complains that `loginDataJSON` may not respond to `dataUsingEnconding`

I seem to be forcing an NSData object (because that what NSJSONSerialization gives me) where it cannot be used. Am I best trying to convert the JSON into a string to use with my existing request code, or should/can I change my request code to accept NSData as opposed to an NSString?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-24T21:35:19.623

试试这个代码：

```
let body = NSMutableDictionary()
body.setValue("myString" forKey: "stringType")
body.setValue(data?.base64EncodedString(options: .lineLength64Characters) forKey: "dataType") 
```

通过这种方式，您可以在字典中同时拥有数据和字符串。这里`'data?.base64EncodedString(options: .lineLength64Characters)'`返回一个带有 base64 编码的字符串。因此，您的字典仅包含字符串，并且在服务器端您必须将其转换回数据。

希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:08:43.047

提出一个可变的请求并

```
 [request setHTTPBodyWithString:myMessageJSON]; 
```

其中方法如下：

```
- (void)setHTTPBodyWithString:(NSString *)body {
    NSData *bodyData = [body dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    [self setValue:[NSString stringWithFormat:@"%d", [bodyData length]] forHTTPHeaderField:@"Content-Length"];
    [self setHTTPBody:bodyData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:07:41.560

您是否尝试过使用 JSONKit 或 RESTKit 等框架？RESTKit 专门用于与 JSON 的 web 服务通信，内部使用 JSONKit 和另一个解析器。我认为这将解决您的问题，也许是未来的问题；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:14:30.367

您需要将 JSON 作为请求的主体发送，并且可能设置内容类型和内容长度：

```
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:nil];
[request setValue:@"application/json" forHTTPHeaderField:@"content-type"];
[request setValue:[NSString stringWithFormat:@"%d", [loginDataJSON length]] forHTTPHeaderField:@"content-length"];
[request setHTTPBody:loginDataJSON]; 
```

# android - Read the status of GPS on pressing home button in oncreate()

> ID：10892358
> 
> 赞同：0
> 
> 时间：2012-06-05T06:03:15.040
> 
> 标签：android, gps, status

In my application on button click I'm maKing the Gps "ON" or "OFF"

If GPS is ON then If we press home button, application will go to background then when the application comes to foreground once again the GPS should be in enabled(ON) position

something like this

```
 final LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

    boolean statusOfGPS = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

    if(statusOfGPS == true){
              keep the GPS in "ON" position

    }
     else if(statusOfGPS == false){
        keep the GPS in "OFF" position
    } 
```

How can we implement in oncreate() , so that when the application starts we can set the gps on or off by reading the state

Help is always appreciated! Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:07:40.437

您可以创建一个新线程，定期检查（例如每 5 秒一次）状态并相应地更新 GPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:10:18.803

> 我们如何在 oncreate() 中实现，以便在应用程序启动时，我们可以通过读取状态来设置 gps 的开启或关闭

因此，您可以`onResume()`在活动从后台运行时调用的方法中设置 GPS，例如在方法中`onPause()`设置 GPS 关闭，当活动进入后台时调用。

当您想检查 GPS 的状态时，您可以使用`onGpsStatusChanged()`并调用 getGpsStatu( 获取 GPS 的状态或使用`GpsStatusListener()`

```
public void onGpsStatusChanged(int event) {
        if (event == GpsStatus.GPS_EVENT_STARTED) {
          // something to do

        } else if (event == GpsStatus.GPS_EVENT_STOPPED) {
            // something to do

        } else if (event == GpsStatus.GPS_EVENT_FIRST_FIX) {
           // something to do
        } 
```

还请查看[如何检查 GPS 接收器的当前状态？](https://stackoverflow.com/questions/2021176/how-can-i-check-the-current-status-of-the-gps-receiver)

# c# - 如何使用 Outlook 显示新电子邮件并同时在 Outlook Mailn 窗口上工作？

> ID：10892359
> 
> 赞同：0
> 
> 时间：2012-06-05T06:03:17.853
> 
> 标签：c#, visual-studio-2010

我使用 MailItem.Display(true) 来显示我在 Outlook 的新电子邮件窗口中创建的电子邮件。但问题是，当应用程序在新窗口中打开该新电子邮件时，我无法在 Outlook 主窗口上工作，直到我发送生成的新电子邮件。我怎样才能克服这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:59:01.347

用于`MailItem.Display(false)`以非模态方式打开窗口，这意味着在子窗口打开时可以访问父窗口。

[http://msdn.microsoft.com/en-us/library/ff861853.aspx](http://msdn.microsoft.com/en-us/library/ff861853.aspx)

# windows-phone-7 - Twitter OAuth 验证令牌密钥：返回未知字符

> ID：10892360
> 
> 赞同：2
> 
> 时间：2012-06-05T06:03:22.193
> 
> 标签：windows-phone-7, twitter, twitter-oauth

我正在使用 Hammock Library DLL 在 Windows Phone 中构建 Twitter 客户端 当我在输入用户名和密码后尝试获取 twitter 访问令牌密钥时，我得到了一个非常奇怪的字符形式的返回访问令牌密钥。

这是我从 Twitter API 得到的：

"�\b\0\0\0\0\0�D�K�0@��03�������#�\0���b��k���Hpϝ�E�V͜\ noo-[����#�༑,W]��eDz�#�p���,�\t��?k�?o%%@�w��¬��)�Q��\ a�^a�>9TNi�8Y��H\n�x��5�%��z�(!�\0\0��\0_��Ԡ\0\0\0"

所以在那之后它将不成功并且不会将我重定向回我的应用程序。

知道会发生什么吗？

谢谢你。

![奇怪的字体](../Images/2b64bcb491b52c46dc1a5cd945006360.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:36:32.647

OAuth 令牌可能以 GZip 编码。

这是处理这种情况的代码片段：

```
if (webResponse.Headers["Content-Encoding"] == "gzip")
{
  stream = new GZipInputStream(stream);
} 
```

# objective-c - 弱自引用的泛型 typeof

> ID：10892361
> 
> 赞同：34
> 
> 时间：2012-06-05T06:03:29.493
> 
> 标签：objective-c, cocoa, automatic-ref-counting, objective-c-blocks, weak-references

我试图找出一种方法来`typeof`创建`self`用于块的弱引用以避免保留周期。

当我第一次读到这个时，似乎约定是使用`__block typeof(self) bself = self;`，它编译但使用`__block`以避免保留循环不再起作用，`__weak`应该改用。

但是`__weak typeof(self) bself = self;`会导致错误：

**类型 'typeof (self)' (aka 'TUAccountsViewController *const __strong') 已经设置了保留属性**

有没有办法使用`typeof`或另一个调用来一般地创建一个弱引用`self`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-27T12:59:09.997

在最新的 clang 版本*Apple clang 版本 4.0 (tags/Apple/clang-421.1.48) (基于 LLVM 3.1svn)*，即**Xcode 4.4+**`__typeof__((__typeof__(self))self)`中，不再需要这个技巧了。该`__weak typeof(self) bself = self;`行将编译得很好。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-06T19:53:43.943

这行得通！

```
__typeof__(o) __weak 
```

我在我的 BBlock 项目中定义的`BBlockWeakSelf`可以像这样使用：

```
BBlockWeakSelf wself = self; 
```

[https://github.com/kgn/BBlock/blob/master/BBlock.h](https://github.com/kgn/BBlock/blob/master/BBlock.h)

*根据 Aleph7 的回复进行编辑。*

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-12T15:17:21.680

正确的方法是

```
__weak ActualClassName* weakSelf = self; 
```

除了在代码中添加不可移植的元语言之外，宏只会让人不清楚变量实际上是什么，以及您实际上在用它做什么。

如果你需要一个比 ActualClassName 提供的更通用的类版本，你就不用再处理`self`了，因为定义了 where `self`，所以定义了类`self`。

在这些情况下，您应该在继承树中使用最接近的基类名称，`NSObject`或者更好的是 never `id`，例如

```
__weak MyBaseClassName* weakObject = object; 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-10-03T20:20:43.640

## 通用弱自身参考（无需导入 + 片段）

* * *

以我的经验，要走的路是使用：

`__typeof__(self) __weak weakSelf = self;`

[请注意所有权限定符如何位于实际变量的前面。](https://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW4)

使用它时发生的事情非常明显，并且可以在 Xcode 中制作成一个方便的代码片段，这使得在任何需要它的项目或类中使用它变得更加容易。（我使用“ws”作为片段的完成快捷方式）

嗯..我在这里需要一个弱参考..

`ws{return}`

完毕。无需为此在未来的项目中包含标题，只需使用代码段即可。

* * *

## Xcode 片段

* * *

标题：`Generic Weak Self Reference`
平台：`All`
语言：`Objective-C`
完成快捷方式：`ws`
完成范围：`Function or Method`
代码：`__typeof__(self) __weak weakSelf = self;`

* * *

***编辑：添加了关于基于评论的所有权限定符位置的[注释](https://stackoverflow.com/questions/10892361/generic-typeof-for-weak-self-references/19168549#comment33150508_19168549)，以及 Xcode Snippet Info***

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-05T06:07:21.720

为什么不直接使用

```
__weak id bself = self; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-22T16:51:22.900

我认为使用它就可以了：

__weak __typeof(&*self)weakSelf = self;

它引用了 AFNetworking 的 AFURLConnectionOperation.m 代码。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-11T17:53:19.113

您是否尝试检查 C 语言方言？

转到项目导航器 -> 项目 -> 目标 -> 构建设置

那里寻找 C 语言方言。将其从 c11 更改为 GNU99。

我希望它有帮助:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-26T21:24:25.633

declareBlockSafe( self ) 然后 blk( self ) 在块内。Self 可以是任何变量或实例变量。对属性和方法返回使用 declareBlockSafeAs。

如果您导入 Mike Ash 出色的 MAZeroingWeakRef，也适用于非 ARC。 [https://github.com/mikeash/MAZeroingWeakRef](https://github.com/mikeash/MAZeroingWeakRef)

`#if __has_feature(objc_arc)`

 ````
#define declareBlockSafe(__obj__) __weak typeof(__obj__) __tmpblk##__obj__ = __obj__
#define blockSafe(__obj__) __tmpblk##__obj__
#define blk(__obj__) blockSafe(__obj__)

#define declareBlockSafeAs(__obj__, __name__) \
__weak typeof((__obj__)) __tmpblk##__name__ = (__obj__)

#else

#define declareBlockSafe(__obj__) MAZeroingWeakRef *__tmpblk##__obj__ = [MAZeroingWeakRef refWithTarget:__obj__]
#define blockSafe(__obj__) ((typeof(__obj__))__tmpblk##__obj__##.target)
#define blk(__obj__) blockSafe(__obj__)

#define declareBlockSafeAs(__obj__, __name__) \
MAZeroingWeakRef *__tmpblk##__name__ = (__obj__)
#endif 
````  `对于 ARC，您真的不需要 blk()，只是这样宏可以以与非 ARC 相同的方式使用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-12T09:20:06.417

我有这个宏

```
#define weaken(object) __typeof__(self) __weak weakSelf = object 
```

我像这样使用它

```
weaken(self);
//The block referencing weakSelf goes here 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-05T10:56:35.197

__unsafe_unretained 呢？这不如 __weak 安全，但这是我唯一能想到的。另外，为什么要使用 typeof()？`

# visual-c++ - 如何在 C++/CLI 中混合混合类型（托管和非托管）？

> ID：10892365
> 
> 赞同：0
> 
> 时间：2012-06-05T06:03:39.557
> 
> 标签：visual-c++, c++-cli

我有 C++ 代码（在属性中支持 CLR） - 我创建了一些非托管类。现在，我想在代码的入口点（暴露的接口）中创建这个类的对象。

但我收到消息“不支持混合类型”

那么 - 我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:34:17.217

没有一些代码，这是一个非常广泛的问题。我希望你能[在这里找到一些答案](http://blogs.msdn.com/b/branbray/archive/2005/07/20/441099.aspx)

# bash - Problems using subl command in terminal: "Command not found" & "No such file or directory"

> ID：10892368
> 
> 赞同：58
> 
> 时间：2012-06-05T06:03:56.847
> 
> 标签：bash, terminal, sublimetext2

I want to apologize in advance that this is a newbie question! I've spent the last 2 hours trying to find a solution.

I have two problems (I'm sure related).

**Background:**

This is what my $PATH looks like:

/Users/Sponsi/.rvm/gems/ruby-1.9.3-p194/bin:/Users/Sponsi/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/Sponsi/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/Sponsi/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11/bin

**Problem #1**

I am trying to use the command-line command "subl" to launch Sublime Text 2 on OSX.

I entered the following command: "`ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/bin/subl`

It only halfway worked - when I enter "subl" I get "Command not found". But when I re-enter the command above it says "Already exists."

I searched online and found a (somewhat) fix. I added the following to my .bashrc:

```
echo 'export PATH="./bin:$PATH"' >> ~/.bashrc 
source ~/.bashrc 
```

Using the command "subl" does work but only temporarily. If I exit terminal or switch to another directory it stops working (bringing me into problem #2, see below.)

**Problem # 2:**

When I try to pull up a file under another directory using the command "subl" I get "-bash: ./bin/subl: No such file or directory" I confirmed the file I want to edit does exist.

BTW, I am following the Ruby tutorial found @ [http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

Thank you so much for your time!

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-11-07T17:30:13.477

在终端中运行每个命令（按此顺序）：

```
$ sudo rm -rf /usr/local/bin/subl
$ sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin
$ subl . 
```

这应该工作！

**注意：**首先您应该检查您的 sublime 的应用程序是否在 Applications 文件夹中，并且它的名称是 Sublime Text 2，如果没有，您应该在第二个命令中更改名称并输入 sublime 的应用程序的名称。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2012-07-02T01:43:04.660

如果您使用的是 RVM，请执行以下操作：

```
ln -s "/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl" ~/.rvm/bin/subl 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2017-01-23T14:05:10.727

**对于 El Captain 或更高版本的操作系统：**

在**El Capitan**中，您不能写入 /usr/bin，但写入 /usr/local/bin 是可以的。默认情况下，/usr/local/bin 也应该在您的路径变量中。

对于**崇高的文字 3**

```
sudo rm /usr/local/bin/subl
sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
```

对于**崇高的文字 2**

```
sudo rm /usr/local/bin/subl
sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-08-13T01:51:38.993

我把我的卡在 /usr/bin

`sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/bin`

或用于 Sublime 3 或更高版本

`sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/bin`

它已经在 $PATH

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-07-11T01:23:38.707

如果您使用的是**Sublime Text 3**，则需要调整 isanjosgon 答案中的命令：

```
$ sudo rm -rf /usr/local/bin/subl
$ sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/
$ subl . 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-02-04T21:59:41.983

我在最近配置的新 Mac 上遇到了同样的问题。我在 oh-my-zsh 和 sublime text 之前安装了 RVM，我遇到了同样的问题。我尝试了路径上的不同位置

```
/usr/bin
/usr/local/bin 
```

他们都在路上。对我有用的是摆脱命令行上运行的引号

```
sudo ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl /usr/bin/subl 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-19T18:06:49.350

如果您愿意，也可以创建新别名

> 别名 subl="/Applications/Sublime\Text.app/Contents/SharedSupport/bin/subl"

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-01-15T06:45:44.307

```
$ alias subl="/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl" 
```

`$ subl .` 这行得通！:D

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-07T03:08:01.950

关于您的第一个问题，可能是您的主目录（即〜/ bin）下没有设置bin目录吗？要检查这一点，请键入以下内容：

```
cd ~/
ls -l 
```

如果没有 bin 目录，请键入以下内容：

```
mkdir bin 
```

创建目录后，重新键入以下内容：

```
subl --help 
```

希望能解决这个问题

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-05T06:21:19.793

编辑您的`~/.bashrc`文件以在其末尾包含此行：

```
export PATH="$HOME/bin:$PATH 
```

请注意`~`is there 而不是`.`您的示例中的 the？表示您的`~`主目录，这是您的`.bashrc`文件所在的位置。点表示终端窗口的*当前*目录。

完成更改后，关闭终端窗口并重新打开它。然后`subl`应该在 PATH 上可用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-22T03:52:19.190

在更新 Sublime Text 之后，接受的答案中的路径略有变化。

`ln -s "/Applications/Sublime Text.app/Contents/SharedSupport/bin/subl" ~/.rvm/bin/subl`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-07T14:52:22.467

当您更改目录或重新打开终端时，PATH 不起作用的原因是 .bashrc 是一个非登录交互式文件。

只需在终端中使用此行：

```
echo 'export PATH=$PATH:~/bin' >> ~/.bash_profile 
```

可能会解决问题，因为每次登录时都会加载 .bash_profile 。

如果您没有 .bash_profile，请在使用上述命令之前，在终端中键入：

```
cd ~
touch .bash_profile 
```

然后使用正式命令。

我通常不会碰 usr/local/bin，因为它是一个系统级文件夹。听说最近在 OS X El Capitan 中，Apple 做了一些权限限制。因此，只需将克隆放在 /bin 文件夹下的主目录中，然后在 .bash_profile 中添加 PATH，一切都应该正常工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-10T07:08:31.373

在 linux sublime 3 中，在终端粘贴

```
sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/bin 
```

然后

```
subl3 [filename] 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-13T15:56:43.697

我首先检查了`which subl` 返回的任何内容。这意味着必须将 subl 的路径添加到所需的 PATH 变量中。

所以添加到 subl 的 PATH 变量路径有帮助

```
PATH=$PATH:/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/ 
```

您可能首先要找到 subl 的正确路径并将其添加到 PATH 变量

如果可行，请通过将以下命令添加到您的 .bash_profile 来永久添加路径

导出 PATH=$PATH:/Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/

注意：您的系统中 subl 的路径可能不同。

# actionscript-3 - use as3 swf inside as2 project

> ID：10892370
> 
> 赞同：0
> 
> 时间：2012-06-05T06:04:11.187
> 
> 标签：actionscript-3, actionscript-2

I need to load as3 swf file into an as2 swf file, but as I can see in [adobe live doc](http://bit.ly/L7MeBT) I can't do it.

Is there any solution to this problem?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:09:06.677

从您的链接：

> *   用 ActionScript 1.0 或 2.0 编写的 SWF 文件无法加载用 ActionScript 3.0 编写的 SWF 文件。

不幸的是，您的问题没有神奇的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:22:56.563

as2项目无法加载AS3 swf，会出现兼容性问题。

# windows-services - Windows service Timer works only twice

> ID：10892372
> 
> 赞同：1
> 
> 时间：2012-06-05T06:04:43.243
> 
> 标签：windows-services

I want to write windows service which is works every day at 7.00 a clock. But blow code works only two day. I can not find the reason.

TIA!

```
 logger.Info("OnStart started");
                System.Threading.TimerCallback callback = new System.Threading.TimerCallback(change_wpa);
                var dt = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 7, 0, 0);
                var dt2 = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day + 1, 0, 0, 0);
                var dt3 = new TimeSpan(24, 0, 0);

                if (DateTime.Now < dt)
                {
                    logger.Info("DateTime.Now < dt");
                    var timer = new System.Threading.Timer(callback, null, dt - DateTime.Now, TimeSpan.FromHours(24));
                }
                else
                {
                    logger.Info("DateTime.Now > dt");
                    var timer = new System.Threading.Timer(callback, null, dt3 - (DateTime.Now - dt), TimeSpan.FromHours(24));
                } 
```

# ruby-on-rails-3 - First and last objects in rails collection

> ID：10892373
> 
> 赞同：0
> 
> 时间：2012-06-05T06:04:43.717
> 
> 标签：ruby-on-rails-3

In my application I have a "Students" partial, that passes a collection of @students to a "student" partial. These are eventually displayed on my index page as images of students. When a user clicks on an image, I'm poping up a box with the student's photo and some text. Now, I have a previous/next button that allows users to cycle through the students. I implemented the cycling w/out a plugin...just a simple ajax call to load the next/previous object. My problem is that I cannot detect when I'm at the last (or first) record. I need a way to probably set a url parameter on the first and last objects. So It would look like this: www.mysite.com/students/15?last=true

I couldn't find a clean way to do this. I'm also not sure if I'm thinking about this the right way. Should I be attaching url parameters? Or should I somehow modify the object to add additional attributes after retrieving them from the model?

Thank you.

[EDIT]

Just wanted to make this a little clearer. When I pop up the students lightbox, I have 2 links: *previous* (linking to the previous record) and *next* linking to the next record. I'm using the jquery $.load method to make an ajax request and load in the data I want, into a div in my lightbox, whenever I click previous or next.

$('previous').click( $('mydiv').load('url of previous student'); );

I get the 'url of previous/next student' by walking the dom tree on initial pop up. I store these so I can refer to them again.

My problem is that I cannot tell when I'm at the first student in the list or the last. I need to know this so I can disable the prev/next button. I'm thinking I can either do this through rails/ruby or through javascript. Initially, I thought that by adding a url parameter on the link or the previous/next student (to indicate whether they were first or last), then I could detect this in rails and do a simple if/else to disable the links. But I got stuck at trying to do this with the way I'm referring to the partials.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:22:54.627

嗯，我这样做是为了获得灵感，也许对你有帮助：Student/index Classic index file with ajax loading list, will_paginate 和我上面写的代码。每个学生都有带链接的图片，链接有类似 /student/4 的 href 和 remote: true。

学生表演控制器

```
@student = Student.find(params[:id]) 
```

学生展示js文件经典js渲染“学生”

student _student.html.erb 你的视图和两个视图助手：prev_help(params[:id]) 和 next_help(params[:id])

帮手：

```
def prev_help(id)
    @student = Student.find(id - 1)
    link_to("Prev". @student )  if @student.nil?        
end

def next_help(id)
    @student = Student.find(id + 1)
    link_to("Prev". @student )  if @student.nil?        
end 
```

我现在没有时间，但是如果此解决方案对您没有帮助，您可以明天给我写信，我将创建示例应用程序来测试我的解决方案并与您合作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:56:43.743

您需要来自@students 的最后一页还是最后一个学生？我使用 gem will_paginate 来列出页面，使用简单的 JS “ajax”来刷新下一页。您可以使用此 gem 并将每页的对象设置为 1，例如：

```
@students = Student.order(sort_column + " " + sort_direction).paginate(:per_page => 1, :page => params[:page]) 
```

示例“ajax”学生/index.js：

```
$('tbody').append('<%= j render(@students) %>');
<% if @students.next_page %>
  $('.pagination').replaceWith('<%= j will_paginate(@students) %>');
<% else %>
  $('.pagination').remove();
<% end %> 
```

激活它的咖啡脚本：

```
if $('.pagination').length
        $(window).scroll ->
          url = $('.pagination .next_page').attr('href')
          if url && $(window).scrollTop() > $(document).height() - $(window).height() - 230
            $('.pagination').text("Načítavam...")
            $.getScript(url)
        $(window).scroll() 
```

我从我的圣经中学到的 ;-) [RailsCasts - Ryan Bates](http://railscasts.com)

# vhdl - VHDL state machine

> ID：10892375
> 
> 赞同：2
> 
> 时间：2012-06-05T06:04:45.140
> 
> 标签：vhdl

I wrote some code in VHDL that is expected to look at a rotory switch and feed back to me what position it is in.

When it gets turned it will read in the greycode from the rotor dial and switch states to the corresponding greycode state.

The act of changing states tells me which way the rotor is being twisted so I can indicate either an up or down state on a counter module later in the circuit.

If the state changes it should trigger a pulse on `Mag` and triger either a 1 or 0 on `up_dwn`.

It doesn't work when I simulate it. I get an occassional blip on `Mag` but no `up_dwn` change.

I suspect it's stuck in the`START`state.

Anyone care to look and tell me what I've done wrong?

[Ed: Using Quartus II Version 9 ]

```
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;

ENTITY EncoderV2    IS
PORT(
    CH_AB           :   IN  STD_LOGIC_VECTOR (1 downto 0);
    clk             :   IN  STD_LOGIC;
    nReset          :   IN  STD_LOGIC;
    up_dwn, Mag     :   OUT STD_LOGIC);

    END EncoderV2;

ARCHITECTURE a OF EncoderV2 IS  --  
TYPE STATE_TYPE IS ( START, s00, s01, s11, s10);
SIGNAL state:   STATE_TYPE;

BEGIN
PROCESS (clk, nReset)
BEGIN
    IF nReset = '0' THEN                        --    asynch Reset to zero
        state   <=  START;
    ELSIF clk'EVENT AND clk = '1' THEN          --  triggers on PGT
        CASE state IS 
            WHEN START =>
                    IF CH_AB ="00" THEN
                                state   <= s00;
                                Mag <='0';
                    ELSIF CH_AB="01" THEN
                                state   <= s01;
                                Mag <='0';
                    ELSIF CH_AB= "11" THEN
                                state   <= s11;
                                Mag <='0';
                    ELSIF CH_AB= "10" THEN
                                state   <= s10;
                                Mag <='0';
                    ELSE  state <= START;
                    END IF;

            WHEN s00 =>                 --  S10 <- S00 -> S01
                    IF CH_AB= "00" THEN
                                state   <= s00;
                                Mag <='0';
                    ELSIF CH_AB= "10" THEN
                                state   <= s10;
                                up_dwn  <= '0';
                                Mag <='1';
                    ELSIF CH_AB= "01" THEN
                                state   <= s01;
                                up_dwn  <='1';
                                Mag <='1';
                    ELSE  state <= START;
                    END IF;

            WHEN s01 =>                 --  S00 <- S01 -> S11
                    IF CH_AB= "01" THEN
                                state   <= s01;
                                Mag <='0';
                    ELSIF CH_AB= "00" THEN
                                state   <= s00;
                                up_dwn  <= '0';
                                Mag <='1';
                    ELSIF CH_AB= "11" THEN
                                state   <= s11;
                                up_dwn  <='1';
                                Mag <='1';
                    ELSE state <= START;
                    END IF;

            WHEN s11 =>                 --  S01 <- S11 ->S10
                    IF CH_AB= "11" THEN
                                state   <= s11;
                                Mag <='0';
                    ELSIF CH_AB= "01" THEN
                                state   <= s01;
                                up_dwn  <= '0';
                                Mag <='1';
                    ELSIF CH_AB= "10" THEN
                                state   <= s10;
                                up_dwn  <='1';
                                Mag <='1';
                    ELSE state <= START;
                    END IF;

            WHEN s10 =>                 --  S11 <- S10 -> S00
                    IF CH_AB= "10" THEN
                                state   <= s10;
                                Mag <='0';
                    ELSIF CH_AB= "11" THEN
                                state   <= s11;
                                up_dwn  <= '0';
                                Mag <='1';
                    ELSIF CH_AB= "00" THEN
                                state   <= s00;
                                up_dwn  <='1';
                                Mag <='1';
                    ELSE state <= START;
                    END IF;

            END CASE;
        END IF;
    END PROCESS;
END a; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:39:58.703

对我来说很好用……用 Modelsim 模拟

我用 50、100 和 200 MHz 模拟了它。我唯一想知道的是你使用“IF .. nReset = '0' THEN” .. 你确定吗？我花了大约 20 分钟才看到它并在我的刺激文件中更改它。

# c++ - or'ing enums that are in namespaces

> ID：10892377
> 
> 赞同：0
> 
> 时间：2012-06-05T06:04:59.313
> 
> 标签：c++, enums

I've learned that putting enums in namespaces avoids compiling errors when two enums share one equaly named item.

```
namespace Feeling
{
    enum e
    {
        Happy = 1,
        Sad = 2,
        Blue = 4,
        Angry = 8,
        Mad = 16
    };
} 
```

So you can pass it to functions that are declared like

```
void HowDoYouFeel(Feeling::e feeling); 
```

But when trying to OR it like this:

```
HowDoYouFeel(Feeling::Happy | Feeling::Blue); 
```

I get an error. What is the best way to handle this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T06:12:00.540

在详细说明问题时，您应该指定：

*   显示问题的最小代码示例；
*   预期的行为；和
*   实际行为。

在这种情况下，您错过了您得到的错误。例如，下面的代码：

```
namespace Feeling {
    enum e { Happy = 1, Sad = 2, Blue = 4, Angry = 8, Mad = 16 };
}

int main() {
    Feeling::e ff1;
    ff1 = Feeling::Happy | Feeling::Sad;
    // ff1 = (Feeling::e)(Feeling::Happy | Feeling::Sad);
    return 0;
} 
```

给出错误：

```
error: invalid conversion from ‘int’ to ‘Feeling::e’ 
```

因为`|`运算符的结果是`int`.

但是，注释掉第一个赋值并使用第二个（带有显式转换）编译没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:30:31.807

该问题要求“最佳方法”，这有点主观。我为这些案例写作`e operator|(e left, e right) { return e(int(left)|int(right)); }`，以明确表示`Feeling::e`具有正交编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:11:39.067

正如在别处所指出的那样，问题与命名空间无关，而是与使用`|`创建一个 int 并试图将该值传递给期望一个`enum`. 即使你“抛弃”了这个问题，你最终会在一个声称是 type 的变量中得到一个不协调的值`Feeling::e`。

让`enum`成员获得其自然有序的序列值通常更有帮助。这使得成员可以很容易地用作索引值，并且编译器通常能够更好地优化将它们用于计算 goto 的 switch 语句。但是，通常`enum`需要像集合一样传递成员集合。

这是我用来将`enum`'s 转换为标志值的助手的简化版本。它对于已经定义了一个`enum`顺序的代码特别有用，但现在希望将它们的集合表示为一个集合。首先，一个如何使用它的示例（并注意将您的位操作结果转换为您的`enum`类型的解决方案如何必须做一些奇怪的事情才能获得类似的结果）。

```
namespace Feeling {
    enum e { Happy, Sad, Blue, Angry, Mad, MAX_e };
    std::string estr[] = { "Happy", "Sad", "Blue", "Angry", "Mad" };
}

void HowDoYouFeel (const Flags<Feeling::e> &feelings)
{
    for (int i = 0; i < Feeling::Max_e; ++i) {
        if (feelings.has(i)) std::cout << Feeling::estr[i] << std::endl;
    }
    if (feelings.has(Feeling::Angry)) {
        std::cout << "The Hulk is in the house." << std::endl;
    }
}

HowDoYouFeel(Feeling::Happy | Feeling::Blue | Feeling::Mad); 
```

这是通过运算符重载、模板和帮助模板来完成的。启用优化的实际运行时开销很低，因为代码是内联的，所以对`enum`常量的移位操作是在编译时计算的。

```
template <typename E>
class Flags
{
    unsigned long long m_opts;
public:
    Flags () : m_opts(0) {}
    Flags (E e) : m_opts(1ULL << e) {}
    Flags (const FlagsTmp<E> &ot) : m_opts(ot.m_opts) {}

    bool has (unsigned i) const { return m_opts & (1ULL << i); }
    bool has (E e) const { return m_opts & (1ULL << e); }
}; 
```

`Flags`模板将类型`enum`作为模板参数，并提供了一些简单的初始化方法。该`has`方法用于查看 an`enum`是否是设置标志之一。

```
template <typename E>
class FlagsTmp
{
    friend class Flags<E>;
    mutable unsigned long long m_opts;
public:
    FlagsTmp (E e) : m_opts(1ULL << e) {}
    const FlagsTmp & operator | (E e) const {
        m_opts |= (1ULL << e);
        return *this;
    }
}; 
```

`FlagsTmp`用作收集所有标志的中介。它允许将标志与`|`操作连接到一个`FlagsTmp`实例中。

```
template <typename E>
FlagsTmp<E> operator | (E e, E f) { return FlagsTmp<E>(e) | f; } 
```

此运算符重载`|`运算符以将两个`enum`标志 or-d 一起转换为`FlagsTmp`.

有几种方法可以扩展它以更好地满足您的需求，例如调整解决方案以使用`bitset`，或添加额外的测试方法和运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:46:46.503

对您的问题的简单回答：

1.  与命名空间无关。
2.  您的通话中有隐式转换：Feeling::Happy | Feeling::Blue 会导致从枚举到整数的转换。HowDoYouFeel(Feeling::Happy | Feeling::Blue) 将导致编译器不允许从整数转换为枚举，因此出现错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T06:15:12.077

An enum is nothing but an integer. You could modify the function to use integer (or unsigned integer) as input, instead of the enum.

```
void HowDoYouFeel (int feelingMask); 
```

Then a call like following would give no error :-

```
HowDoYouFeel(Feeling::e::Happy | Feeling::e::Blue) 
```

# http - Timeout for Multipart HTTP post

> ID：10892382
> 
> 赞同：0
> 
> 时间：2012-06-05T06:05:19.087
> 
> 标签：http, timeout, connection, multifile-uploader, android-internet

How to set the timeout for HTTP multipart file post. I want to upload image to the server at the time internet connection is not there how to handle that situation?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:31:45.407

最后我找到了解决方案，这里是为 HTTPClient 设置超时的代码

HttpParams httpParameters = new BasicHttpParams();

int timeoutConnection = 30000; HttpConnectionParams.setConnectionTimeout(httpParameters,timeoutConnection);

int timeoutSocket = 30000;

HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

HttpClient httpClient = new DefaultHttpClient(httpParameters);

# vim - Vim：根据缩进/控制流深度改变颜色？

> ID：10892384
> 
> 赞同：3
> 
> 时间：2012-06-05T06:05:22.887
> 
> 标签：vim, syntax-highlighting, background-color, indentation, control-flow

在 vim 中，是否可以根据控制流的深度或缩进（哪个更容易）来更改线条的背景颜色？我似乎记得在我以前使用的编辑器中看到过这样的功能，但我找不到哪个。

我使用明暗方案，并希望在每个缩进步骤中更改背景以稍微变亮，然后随着代码退回到更高级别，显然又会变暗。

理想情况下，可以只更改行号列的背景，或者只更改缩进（我只使用空格）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T10:15:26.343

[Vim 缩进指南](https://github.com/nathanaelkane/vim-indent-guides)应该足够了。

# iphone - Memory Leak issue in UIPage Control

> ID：10892388
> 
> 赞同：1
> 
> 时间：2012-06-05T06:06:03.163
> 
> 标签：iphone, image, ipad, pagecontrol

```
- (void)loadScrollViewWithPage:(int)page
{
    if (page < 0)
    return;
    if (page > kNumberOfPages)
    return;

if([searchResultArray count]>6)
{
    if([searchResultArray count]%6==0)
    {
        kNumberOfPages = [searchResultArray count]/6;
    }
    else {
        kNumberOfPages = [searchResultArray count]/6;
        kNumberOfPages = kNumberOfPages +1;
    }

    pageControl.numberOfPages = kNumberOfPages;
    ScrollView.contentSize = CGSizeMake(ScrollView.frame.size.width *kNumberOfPages, ScrollView.frame.size.height);
}
else {
    kNumberOfPages = 1;
    pageControl.numberOfPages = kNumberOfPages;
}

int z=-1;
int a = 0;

for(UIView *subview in [ScrollView subviews]) 
{
    [subview removeFromSuperview];
}

for(int x = 0; x < [searchResultArray count];x++)
{   
    if(x>=6 && x%6==0)
    {
        z=0;
        a = a+320;
    }
    else {
        z++;
        //a++;
    }

    UIButton *ProfileImageButton = [[UIButton alloc] initWithFrame:CGRectMake(a+8+(100*(x%3))+(x%3)*3,15+(110*(z/3))+(z/3)*10, 100, 85)];
    [ProfileImageButton setBackgroundColor:[UIColor clearColor]];
    [ProfileImageButton setClearsContextBeforeDrawing:YES];
    [ProfileImageButton setTag:x];
    [ProfileImageButton setUserInteractionEnabled:YES];
    NSString *ImagePath =[NSString stringWithFormat:@"%@",[[searchResultArray objectAtIndex:x]valueForKey:@"Photo"]];
    [ProfileImageButton setImageWithURL:[NSURL URLWithString:ImagePath]
                           placeholderImage:[UIImage imageNamed:@"Transparent@2x.png"]];
    [ProfileImageButton addTarget:self action:@selector(profileImageClicked:) forControlEvents:UIControlEventTouchUpInside];
    [ScrollView addSubview:ProfileImageButton];
    [ProfileImageButton release];
    ProfileImageButton = nil; 

    UILabel *groupNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(a+8+(100*(x%3))+(x%3)*3,100+(110*(z/3))+(z/3)*10, 100, 25)];
    [groupNameLabel setBackgroundColor:[UIColor clearColor]];
    [groupNameLabel setText:[NSString stringWithFormat:@"%@,%@,%@",[[searchResultArray objectAtIndex:x] valueForKey:@"Username"],[[searchResultArray objectAtIndex:x] valueForKey:@"Age"],[[searchResultArray objectAtIndex:x] valueForKey:@"Gender"]]];
    [groupNameLabel setUserInteractionEnabled:YES];
    [groupNameLabel setFont:[UIFont systemFontOfSize:15.0f]];
    [groupNameLabel setTextColor:[UIColor whiteColor]];
    [ScrollView addSubview:groupNameLabel];
    [groupNameLabel release];
    groupNameLabel = nil;
} 
```

}

```
- (void)scrollViewDidScroll:(UIScrollView *)sender
{
 if (pageControlUsed)
    {
    return;
}

CGFloat pageWidth = ScrollView.frame.size.width;
int page = floor((ScrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
pageControl.currentPage = page;

[self loadScrollViewWithPage:page - 1];
[self loadScrollViewWithPage:page];
[self loadScrollViewWithPage:page + 1];
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
pageControlUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
pageControlUsed = NO;
}

- (void)changePage:(id)sender
{
int page = pageControl.currentPage;

[self loadScrollViewWithPage:page - 1];
[self loadScrollViewWithPage:page];
[self loadScrollViewWithPage:page + 1];

// update the scroll view to the appropriate page
CGRect frame = ScrollView.frame;
frame.origin.x = frame.size.width * page;
frame.origin.y = 0;
[ScrollView scrollRectToVisible:frame animated:YES];

pageControlUsed = YES;
} 
```

I am working on an app in which I am retrieving images from server and those images are to be shown on UIPageControl, though I have done this.BUT on on scrolling pagecontrol many times it shows memory leak warning and app exits

**ON CONSOLE**

> Received memory warning. Program received signal: “0”. Data Formatters temporarily unavailable, will re-try after a 'continue'. (Unknown error loading shared library "/Developer/usr/lib/libXcodeDebuggerSupport.dylib")

# html - 如何更改元素的 css 但保留其子元素的默认值

> ID：10892390
> 
> 赞同：1
> 
> 时间：2012-06-05T06:06:07.930
> 
> 标签：html, css

我想为一个 div 设置一个特定的字体系列，但我希望它的孩子保持默认属性。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:19:45.690

您不能，因为如果内部元素本身没有为特定属性设置任何值，那么如果该属性在 CSS 规范中使用“Inherited: yes”定义，它将不可避免地从其父级继承。从本质上讲，这就是继承的概念。

在很多情况下，作者确实希望保留属性的*默认*值，因为默认值取决于浏览器并且通常不合适（例如，最常见的默认值`font-family`is `Times New Roman`）。

有可能您实际上的意思是其他东西，例如保留在样式表中其他地方设置的属性值。那将是一个完全不同的问题，答案是这会自动发生。如果事情似乎不是这样，原因可能是对级联的误解。如果您有一个设置了某些属性的元素，那么无论您为封闭元素`span`设置什么值，都会应用该值。`div`但是`span`元素不会从`body`元素继承属性，例如，除非可能是间接的（通过`div`元素）。

假设您真的想保留元素内部元素的*默认*值，`div`下面是我在一个小的动手练习页面（用于玩 CSS）上的操作方式。有一个`div`包含一些示例内容，要设置样式，并且在开始时，它必须显示为无样式（外部尺寸和边框除外`div`）。我这样做只是为了将页面上的所有其他内容分组到具有特定`class`属性的容器内。然后我简单地设置页面的*所有*CSS 设置，以便所有选择器都包含该类的类选择器。这有点笨拙，但很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:08:21.437

设置元素的样式并为所有子元素重置它：

```
#div {
  font-family: 'Inconsolata';
}

#div > * {
  font-family: sans-serif;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:08:51.657

我认为如果不为内部元素定义样式，CSS 中就没有这种可能性

# maya - Are maya referenes the same as namespaces?

> ID：10892391
> 
> 赞同：0
> 
> 时间：2012-06-05T06:06:12.720
> 
> 标签：maya

How do I deal with references in maya? I have several scripts that I need to update to handle file referenced objects.

Are they they same as namspace?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:05:53.733

引用是指向其他场景的指针，用于创建场景层次结构（父场景、子场景、孙场景）。您可以在关卡创建过程中使用它们作为辅助，这样每次更新（或创建）资产时，关卡设计人员不必手动加载它们并将它们放置在场景中（参考是目标和场景被引用的是来源）。

另一方面，命名空间有点像前缀。它们被分配给资产组、网格，等等……它们实际上只是一个命名容器，它们允许您在场景中拥有多个具有相同名称的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T20:18:54.670

在启用“使用命名空间”选项的情况下引用场景时，Maya 会创建一个包含导入或引用数据的新命名空间。

命名空间是给定名称下的一组对象。命名空间中的每个项目都由其自己的名称及其所属的命名空间标识。

默认情况下，导入或引用文件的基本名称添加到导入或引用对象名称的开头，用冒号分隔。

例如，如果您正在导入一个名为 foo.ma 的场景，其中包含一个名为 ball 的对象，则在导入后，该球将被命名为 foo:ball。

您可以通过选择 Resolve all nodes with this string 并输入前缀来更改前缀。

您可以使用命名空间命令创建、命名、父命名和删除命名空间。

命名空间不会影响选择、DAG、依赖关系图或 Maya 的任何其他方面。

# android - 如何模拟安卓多屏？

> ID：10892394
> 
> 赞同：0
> 
> 时间：2012-06-05T06:06:19.753
> 
> 标签：android, screen, emulation

如何处理Android多屏？令人困惑...

我[在这里](http://developer.android.com/guide/practices/screens_support.html#testing)和[这里](http://developer.android.com/resources/dashboard/screens.html)阅读现在我对这个范围小，正常，大和超大感到困惑。我在 Galaxy Note 上试用了我的应用程序，它在真实设备上运行良好。但奇怪的是它不在模拟器上。我什至尝试使用真正具体定义 Galaxy Note 的自定义 AVD，例如 800 x 1280 和 285 密度。但结果在模拟器上看起来很难看。

我也有其他设备的问题。SGS 2、HD 设备和其他设备......[这里](http://developer.android.com/guide/practices/screens_support.html#testing)的所有参考资料似乎都是无效和不准确的。

如何完美模仿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:26:39.693

[您可以从此](https://github.com/downloads/rayesh/android-emulator-skins/Galaxy%20Note.zip)链接下载 Galaxy Note AVD 皮肤，也请参阅[本文](http://heikobehrens.net/2011/03/15/android-skins/)以获取帮助和参考。

# opengl-es - GLSL 多纹理两个图像

> ID：10892396
> 
> 赞同：-2
> 
> 时间：2012-06-05T06:06:22.163
> 
> 标签：opengl-es, glsl

我写了这段代码：

```
"    vec3 col1 = texture2D(uDiffuseTexture, vec2(vTextureCoord.x, vTextureCoord.y + time)).rgb;\n" +
"    float a1=1.0;\n"+  
"    vec3 col2 = texture2D(uNormalTexture, vec2(vTextureCoord.x + time, vTextureCoord.y)).rgb;\n" +
"    float a2=uAlpha;\n"+ 
```

顺便一提：

和：`gl_FragColor = vec4(col1+col2, a1+a2);`

阿尔法不工作......为什么？总是一样，为什么？

我的`uAlpha`变量是一个`uniform`，从 0.1 变为 1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:24:57.420

> id 喜欢用 100% 绘制 image1，用 0-100% 绘制 image2

目前，您正在使用加法混合 (col1+col2) 混合您的两个图像，而没有考虑`uAlpha`混合两个图像的均匀性。

我想你想要实现的是在 image1 上混合 image2，使用 uAlpha 作为不透明度。

```
vec3 col1 = texture2D(uDiffuseTexture, vec2(vTextureCoord.x, vTextureCoord.y + time)).rgb;
vec3 col2 = texture2D(uNormalTexture, vec2(vTextureCoord.x + time, vTextureCoord.y)).rgb;
float a2=uAlpha;
vec3 result = mix(col1, col2, a2);   // this combines the two texture colors
gl_FragColor = vec4(result, 1.0); 
```

# java - Android app force closes while going on another activity

> ID：10892398
> 
> 赞同：1
> 
> 时间：2012-06-05T06:06:32.997
> 
> 标签：java, android, android-intent, android-activity, forceclose

I am making an android app using android 2.2 and eclipse.

There are two workflows of the app:

**WF1:** `CoverPageApp -> LoginActivity -> Dashboard.`

**WF2:** `CoverPageApp -> RegisterActivity -> Dashboard.`

But as I click on the Start Button in CoverPageApp to go on another activity, i.e LoginActivity, the app force closes. I have also included the LogCat which shows error of Null Exception and in the LoginActivity Java File it points on the line 51: `btnLinkToRegistrScrn = (Button) findViewById(R.id.LinkToRegisterScreen);`

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.app.android"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:targetSdkVersion="15" android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:enabled="true"
            android:name=".PageApp"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity 
            android:enabled="true"
            android:name=".LoginActivity1"
            android:label="Login Activity" >
        </activity>

        <activity
            android:enabled="true"
            android:name=".CAActivity"
            android:label="Register Activity" >
        </activity>

        <activity
            android:enabled="true"
            android:name=".DashboardActivity"
            android:label="Dashboard Activity" >
        </activity>

    </application>

  </manifest> 
```

**PageApp.java**

```
import android.app.Activity;
import android.os.Bundle;
//import android.content.Context;
import android.content.Intent;
import android.widget.Button;
import android.view.View;

public class PageApp extends Activity {

    Button startbutton;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.coverpage);
        addListenerOnButton();
   }

    public void addListenerOnButton() {

        //final Context context1 = this;

        startbutton = (Button) findViewById(R.id.button1);

        startbutton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                Intent intent1 = new Intent(arg0.getContext(), LoginActivity1.class); 
            //    intent1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent1); 
                finish();
                }
            });

    }

} 
```

**Log.java**

```
import android.app.Activity;
//import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
//import android.view.View.OnClickListener;
import android.widget.Button;
//import android.widget.TextView;

public class Log extends Activity {

    Button btnLinkToRegistrScrn;
    Button loginbtn1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
     setContentView(R.layout.login);
     addListenerOnButton();
//     btnLinkToRegistrScrn = (Button) findViewById(R.id.LinkToRegisterScreen); 

   }

    public void addListenerOnButton() {

        //final Context context2 = this;

            loginbtn1 = (Button) findViewById(R.id.btnLogin);

            loginbtn1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(arg0.getContext(), DashboardActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                         startActivity(intent);   
            }

        });
    }

    { 
        // Link to Register Screen 
        btnLinkToRegistrScrn = (Button) findViewById(R.id.LinkToRegisterScreen); 
        btnLinkToRegistrScrn.setOnClickListener(new View.OnClickListener() { 
           @Override
            public void onClick(View v) { 
                Intent i = new Intent(v.getContext(), CAaactivity.class); 
              //  i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
                } 
       }); 

    }   

   } 
```

**LOGCAT**

```
05-31 17:53:19.691: D/AndroidRuntime(1958): Shutting down VM
05-31 17:53:19.710: W/dalvikvm(1958): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-31 17:53:19.730: E/AndroidRuntime(1958): FATAL EXCEPTION: main
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.os.Looper.loop(Looper.java:123)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at java.lang.reflect.Method.invokeNative(Native Method)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at java.lang.reflect.Method.invoke(Method.java:521)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at dalvik.system.NativeStart.main(Native Method)
05-31 17:53:19.730: E/AndroidRuntime(1958): Caused by: java.lang.NullPointerException
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.Activity.findViewById\untime(1958):  at java.lang.Class.newInstanceImpl(Native Method)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at java.lang.Class.newInstance(Class.java:1429)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-31 17:53:19.730: E/AndroidRuntime(1958):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-31 17:53:19.730: E/AndroidRuntime(1958):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:14:21.380

在您声明的 Login.xml 中

```
<TextView
    android:id="@+id/LinkToRegisterScreen"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

并同时映射 LoginActivity1.java

```
 btnLinkToRegistrScrn = (Button) findViewById(R.id.LinkToRegisterScreen); 
```

所以只需更改`TextView`为`Button`

```
<Button
    android:id="@+id/LinkToRegisterScreen"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:14:23.323

Change Your **LoginActivity1** Activity as:

```
public class LoginActivity1 extends Activity {

    Button btnLinkToRegistrScrn;
    Button loginbtn1;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
     setContentView(R.layout.login);
     addListenerOnButton();
        // Link to Register Screen 
        btnLinkToRegistrScrn = (Button) findViewById(R.id.LinkToRegisterScreen); 
        btnLinkToRegistrScrn.setOnClickListener(new View.OnClickListener() { 
           @Override
            public void onClick(View v) { 
                Intent i = new Intent(v.getContext(), TrekEyesAndroidActivity.class); 
              //  i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
                } 
       }); 
   }
    public void addListenerOnButton() {

        //final Context context2 = this;

            loginbtn1 = (Button) findViewById(R.id.btnLogin);

            loginbtn1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(arg0.getContext(), DashboardActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                         startActivity(intent);   
            }

        });
    }
   } 
```

and in xml change **TextView** to **Button** as

```
<Button
         android:id="@+id/LinkToRegisterScreen"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="25dip"

            android:textColor="#21dbd4"
            android:textStyle="bold" 
            android:text="@string/noAccountRegisterME" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:16:09.930

在你的 login.xml

```
<TextView
            android:id="@+id/LinkToRegisterScreen"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="25dip"

            android:textColor="#21dbd4"
            android:textStyle="bold" 
            android:text="@string/noAccountRegisterME" /> 
```

`android:id="@+id/LinkToRegisterScreen"`它是 EditText 并且你正在这样做 `btnLinkToLoginScrn = (Button) findViewById(R.id.LinkToLoginScreen);`它将是空指针..

所以只需在 login.xml 中更改 Button 而不是 TextView

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T06:18:16.770

我认为你应该集中大括号。你给代码添加 listeneraddListenerOnButton()

# r - R: ESS fails to deal with Thai script variable, but RGui is fine?

> ID：10892399
> 
> 赞同：3
> 
> 时间：2012-06-05T06:06:46.990
> 
> 标签：r, emacs, ess

I have some code that scrapes some data from a website that happens to be in Thai script. As part of the project I need to replace some of the Thai text. A small example follows:

```
thaidf <- data.frame(thdate = c("31 พฤษภาคม 2555","30 เมษายน 2555"), 
                     value = c(100,110))
english_months <- seq(1:12)
thai_months <- c('มกราคม','กุมภาพันธ์','มีนาคม','เมษายน','พฤษภาคม','มิถุนายน',
                 'กรกฎาคม','สิงหาคม','กันยายน','ตุลาคม','พฤศจิกายน','ธันวาคม')

print(thaidf)
for (ii in seq_along(thai_months)) { 
     ## convert months in Thai script to numerical
     thaidf$thdate <- (sapply(thaidf$thdate, 
                      function(x) {gsub(thai_months[ii], 
                                   english_months[ii], x, useBytes = TRUE)}))
}
print(thaidf) 
```

When I run this code from inside Emacs/ESS it does not work. Note how in the screenshot below the console cannot print the Thai characters to screen when the code is excecuted, nor can it apparently recognise the variables in `thaidf$thdate`, so the `gsub()` call does not succeed. Instead of producing '31 5 2555' where 31 is the day, 5 is the month and 2555 is the Buddhist year, it outputs '311 2555'

![enter image description here](../Images/1f9ec8c630aafa92ef8971c89ddae2a2.png)

However, when I copy and paste this same code into the RGui front-end, it works fine. It both prints the characters, as shown below, and the `gsub()` correctly replaces the Thai script with Latin numbers, as one would expect. As you can see from the screengrab below, the Thai script for 'May' becomes '5' and the Thai script for 'April' becomes '4'.

![enter image description here](../Images/590233ec49cd2b272eb4f477fd93bcca.png)

My first thought was that it might be a font issue, but the Thai fonts do seem to be displayed in the Emacs buffer, they are just not recognised when the code is run with C-c M-b. Why does this happen? How can I prevent it?

sessionInfo() R version 2.15.0 Patched (2012-06-03 r59501) Platform: i386-pc-mingw32/i386 (32-bit)

locale: [1](https://i.stack.imgur.com/JjlSv.png) LC_COLLATE=English_United Kingdom.1252 [2](https://i.stack.imgur.com/Vi2YD.png) LC_CTYPE=English_United Kingdom.1252
[3] LC_MONETARY=English_United Kingdom.1252 [4] LC_NUMERIC=C
[5] LC_TIME=English_United Kingdom.1252

attached base packages: [1](https://i.stack.imgur.com/JjlSv.png) stats graphics grDevices utils datasets methods base

# android - Android viewpager animation

> ID：10892403
> 
> 赞同：7
> 
> 时间：2012-06-05T06:07:00.663
> 
> 标签：android, animation, android-viewpager

I would like to be informed when the animation ends after this function call:

```
viewPager.setCurrentItem(2, true); 
```

Does anyone know how to accomplish this?

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-15T03:51:09.640

我遇到了同样的问题。以下是我的结论：

当页面实际改变时 onPageSelected 将被调用。但它是在动画之前调用的。

当动画停止时，onPageScrollStateChanged 将被调用，状态为 SCROLL_STATE_IDLE。

所以你必须结合这两个函数调用来调用你的函数。

祝你好运。

```
private class PageChangeListener implements OnPageChangeListener {

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
   }

    @Override
    public void onPageSelected(int position) {
        isPageChanged = true;
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        switch (state) {
        case ViewPager.SCROLL_STATE_IDLE:
            if (isPageChanged) {
                updateCurrentPage();//this will be called when animation ends
                isPageChanged = false;
            }
            break;
        case ViewPager.SCROLL_STATE_DRAGGING:
            break;
        case ViewPager.SCROLL_STATE_SETTLING:
            break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T08:50:09.803

您可以使用 OnPageChangeListener..

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int arg0) {
        // The code you want to run when scrolling is complete              
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {}

    @Override
    public void onPageScrollStateChanged(int arg0) {}
}); 
```

选择新页面时，将调用 onPageSelected()。

# java - Exception in integration of banking api

> ID：10892405
> 
> 赞同：0
> 
> 时间：2012-06-05T06:07:14.127
> 
> 标签：java, php, exception

This is an exception referred to me for checking. This exception was raised when doing an API integration of ICICI bank.

> java.lang.Exception: CreateInstance failed: new com.opus.epg.sfa.java.BillToAddress

reference URL: [http://kndexim.com/java/SFAClient/TestPages/TestSsl.php](http://kndexim.com/java/SFAClient/TestPages/TestSsl.php)

I am basically a J2EE developer, i do know only a little bit about php and . I know this is related to some class path problems. can i get a solution for this. If my question is not clear, please ask i will provide more details.

content of web.xml file is given below

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <!-- support for Java EE cluster, remove this line if you want to put non-serializable objects into the java_session() -->
    <distributable/>

    <!-- Your system PHP executable. Default is /usr/bin/php-cgi or c:/Program Files/PHP/php-cgi.exe -->  
    <!--<context-param><param-name>php_exec</param-name><param-value>php-cgi</param-value></context-param>-->
    <!-- Prefer a system PHP executable, if available. Otherwise use the PHP from the .war file. Default is Off -->
    <context-param><param-name>prefer_system_php_exec</param-name><param-value>On</param-value></context-param>

    <!-- Handle PHP urls which cannot be expressed using a standard servlet spec 2.2 url-pattern, 
         e.g.: *.php/delete/from?what=that You may remove this and the filter-mapping below -->
    <filter><filter-name>PhpCGIFilter</filter-name><filter-class>php.java.servlet.PhpCGIFilter</filter-class></filter>
    <filter-mapping><filter-name>PhpCGIFilter</filter-name><url-pattern>/*</url-pattern></filter-mapping>

    <!-- Attach the JSR223 script factory to the servlet context -->
    <listener><listener-class>php.java.servlet.ContextLoaderListener</listener-class></listener>

    <!-- PHP Servlet: back-end for Apache or IIS -->
    <servlet><servlet-name>PhpJavaServlet</servlet-name><servlet-class>php.java.servlet.PhpJavaServlet</servlet-class></servlet>

    <!-- PHP CGI servlet: when IIS or Apache are not available -->
    <servlet><servlet-name>PhpCGIServlet</servlet-name><servlet-class>php.java.servlet.fastcgi.FastCGIServlet</servlet-class></servlet>

    <!-- PHP Servlet Mapping -->
    <servlet-mapping><servlet-name>PhpJavaServlet</servlet-name><url-pattern>*.phpjavabridge</url-pattern></servlet-mapping>

    <!-- PHP CGI Servlet Mapping -->
    <servlet-mapping><servlet-name>PhpCGIServlet</servlet-name><url-pattern>*.php</url-pattern></servlet-mapping>

    <!-- Welcome files -->
    <welcome-file-list>
        <welcome-file>index.php</welcome-file>
    </welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:17:29.297

有一个 ClassNotFoundException。典型的原因是 jar 丢失。

尝试查找此类 com.opus.epg.sfa.java.BillToAddress 并将类/jar 包含在类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:18:09.973

WebappClassLoader 没有在其中`com.opus.epg.sfa.java.BillToAddress`定义的类。

您应该确保包含该类的 jar 包含在类路径中，并且一旦这样做，使用`java_require('someJar.jar')`将其包含到您的类路径中。

# php - validate email with password in php

> ID：10892407
> 
> 赞同：1
> 
> 时间：2012-06-05T06:07:36.247
> 
> 标签：php, email, sendmail

I'm involved in a product development, where the user register his company. once he becomes user of our product, we need to send announcements,newsletters etc. to their users on behalf his company.

for this purpose we get his company email and password, i need to validate this email is valid and he's given correct password for the email id or not. I'am thinking about two methods to validate this email and password,

*   Send a test mail with smtp authetication
*   Try to open the inbox.

I feel the first one is better than the later. because if the user given wrong passwords, there are chances it will be considered as an attack.

Any one can tell me is there any better way to validate the given email with its password.

Answers appreciated, Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T00:00:39.353

只需连接[imap_open()](https://www.php.net/manual/en/function.imap-open.php)并测试连接是否成功。

```
$resource = sprintf("{%s:%s/imap/ssl/novalidate-cert/notls/norsh}INBOX","imap.host",993);
$imap = imap_open($resource, "user", "password", OP_READONLY, 1);
if($imap) echo "it works"; 
```

# c# - 错误 1155。没有关联的应用程序

> ID：10892410
> 
> 赞同：0
> 
> 时间：2012-06-05T06:07:54.040
> 
> 标签：c#, installation, windows-installer, setup-project

每个人。我在 VS 2010 中为我的应用程序创建了一个安装项目。在 XP 和 WinServer 2008 中，应用程序安装得很好，但在 Windows 7 中，它在安装开始时失败，并显示消息：“ShellExecuteEx 失败；代码 1155。没有应用程序与此操作的特定文件相关联”

机器上安装了正确的 MS Installer，Windows 中的 hh.exe 存在，因此 .msi 和 .chm 文件可以正确打开。我认为正确的问题是安装包中与任何应用程序无关的文件类型是什么。

有什么建议么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:48:56.500

谢谢大家。我找到了解决方案。那是一个网络项目的安装程序。当然，我打开 IIS 来运行它。但对于 Win 7，这还不够 - IIS 6 管理兼容性也必须处于活动状态。我希望这篇文章能帮助某人避免这个错误。

# javascript - Javascript区间和iframe

> ID：10892424
> 
> 赞同：0
> 
> 时间：2012-06-05T06:08:42.423
> 
> 标签：javascript

我有一个 asp.net 页面，它在 jqueryWindow (iframe) 中打开一个页面，该页面加载了一些内容和一个按钮。当用户单击按钮时，我调用一个函数来做一些工作，并在单击函数结束时调用一个 setInterval 函数。间隔函数工作正常，当窗口（iFrame）打开时，当我关闭窗口时，间隔在 Firefox 中停止，此错误将显示在控制台中：

```
attempt to run compile-and-go script on a cleared scope 
```

但是它适用于IE。

有任何想法吗？

后来的 desc ：间隔是函数在父级中。但是我使用了萤火虫，它令人惊讶地看到该函数将在其间隔内被调用，但它返回错误并且有时可以正常工作。:O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:11:17.577

由于 iframe 不再存在，Firefox 已经对 iframe 的范围进行了垃圾收集。其他浏览器可能不会以同样的方式做事。

尝试调用`top.setInterval(...)`而不是仅仅调用`setInterval(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:13:55.103

如果从 iframe 调用该函数，则在 iframe 关闭后它根本不应该运行，因为它的全局上下文已被破坏。我希望该函数根本不会在任一浏览器中运行，也不会引发错误。

也许这是一个错误？无论如何，正如 Kolink 所说，尝试从父级（顶部）调用它，但如果它试图引用弹出窗口范围内的对象或变量，你会（应该？）得到错误。

# ios - 创建一个 iOS 应用，但分发给多个客户端

> ID：10892431
> 
> 赞同：1
> 
> 时间：2012-06-05T06:09:21.890
> 
> 标签：ios

我是一名 NET 开发人员，一周前开始着手 iOS / iPhone 开发。我有两个问题：

1）我需要制作一个将分发给多个客户的应用程序。所以像 Logo、title 等等……需要对它们中的每一个都不同。

（这个想法是创建一个应用程序，但分发给多个客户端）

你推荐什么方法？

2) 如何提高我在 iOS 上的学习速度，有什么好的资源推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:13:04.280

对于徽标，在服务器上以及登录或加载时放置图像，根据客户端类型下载该图像，并存储在 NSUserDefaults 中，以便下次无需下载它，以及学习，从此[链接](http://www.raywenderlich.com/tutorials)阅读教程，一次，你有掌握基础知识，您将能够轻松解决复杂问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:48:38.327

1.  Apple 提供了两种解决方案。

    1.  第一个解决方案是让客户注册 iOS Developer Enterprise Program。借助 iOS 开发者企业计划，他们将能够在其设备上开发/分发多个自定义应用程序。
    2.  第二种解决方案是在 iTunes Connect 门户上将您的定制应用程序作为 B2B 应用程序提供。使用 B2B 应用程序，您可以指定客户和商定的每份价格。然后，您的客户注册批量购买，然后就可以购买该应用程序。根据应用程序，应用程序的最低价格为 9.99 美元，并且只有您指定的客户才能购买该应用程序。
2.  为了学习，我从以下资源开始：

    *   Cocoa Programming for Mac OS X 2nd Edition”，Aaron Hillegass（书籍）
    *   面向对象编程和 Objective-C 语言 (PDF)
    *   Objective-C 2.0 编程语言 (PDF)

一旦我了解了 Objective-C、Xcode 和 Interface builder 的基础知识，我发现最好的学习资源是开发人员门户上的示例应用程序和开发人员库。

对于具体问题，我在 stackoverflow.com 上获得了最好的运气

# c# - 打开关联文件

> ID：10892433
> 
> 赞同：5
> 
> 时间：2012-06-05T06:09:29.397
> 
> 标签：c#, file, associations, file-extension

我用 C# 制作了一个文件编辑器，我可以使用工具栏中的“打开”按钮打开文件，我还将正确的文件类型与程序相关联，因此当我单击扩展名为 *.nlp 的文件时，程序会正确打开，但不打开文件本身（这很合乎逻辑，因为我还没有实现它）

现在是我的问题，我该如何实现这样的事情？我希望在单击文件时打开并加载文件。

（顺便说一句，该文件只是纯文本，所以没什么特别的，如果重要的话，它适用于 Windows）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T06:22:03.040

在 windows 中，文件关联在注册表中存储和管理`HKEY_CLASSES_ROOT`

您可以手动执行以下操作，或者最终编写一个小的安装程序来将正确的条目写入注册表。

您需要注册您的扩展程序，然后将其与[本文档](http://msdn.microsoft.com/en-us/library/windows/desktop/hh127445%28v=vs.85%29.aspx)描述的程序相关联。另请参阅[此文档](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144148%28v=vs.85%29.aspx)您的注册表应如下所示：

```
HKEY_CLASSES_ROOT
   .nlp
      (Default) = YourProgID//can by anything you want
   YourProgID
      shell
         open
            command
               (Default) = yourapp.exe %1 
```

**现在**，他们回答你的关键是`%1`命令键。它是打开的**文件名**，它作为参数传递给您的应用程序。

所以 ：

```
static void Main(string[] args)
{
   // args will contain your filename
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:14:44.757

似乎没有用于直接管理文件关联的 .Net API，但您可以使用 Registry 类来读取和写入所需的密钥。

您需要在 HKEY_CLASSES_ROOT 下创建一个密钥，并将名称设置为您的文件扩展名（例如：“.txt”）。将此键的默认值设置为文件类型的唯一名称，例如“Acme.TextFile”。然后在 HKEY_CLASSES_ROOT 下创建另一个键，名称设置为“Acme.TextFile”。添加一个名为“DefaultIcon”的子项，并将该项的默认值设置为包含您希望用于此文件类型的图标的文件。添加另一个名为“shell”的兄弟。在“shell”键下，为您希望通过资源管理器上下文菜单提供的每个操作添加一个键，将每个键的默认值设置为可执行文件的路径，后跟空格和“%1”表示路径到选定的文件。

例如，这是一个示例注册表文件，用于在 .txt 文件和 EmEditor 之间创建关联：

Windows 注册表编辑器版本 5.00

```
[HKEY_CLASSES_ROOT\.txt]
@="emeditor.txt"

[HKEY_CLASSES_ROOT\emeditor.txt]
@="Text Document"

[HKEY_CLASSES_ROOT\emeditor.txt\DefaultIcon]
@="%SystemRoot%\\SysWow64\\imageres.dll,-102"

[HKEY_CLASSES_ROOT\emeditor.txt\shell]

[HKEY_CLASSES_ROOT\emeditor.txt\shell\open]

[HKEY_CLASSES_ROOT\emeditor.txt\shell\open\command]
@="\"C:\\Program Files\\EmEditor\\EMEDITOR.EXE\" \"%1\""

[HKEY_CLASSES_ROOT\emeditor.txt\shell\print]

[HKEY_CLASSES_ROOT\emeditor.txt\shell\print\command]
@="\"C:\\Program Files\\EmEditor\\EMEDITOR.EXE\" /p \"%1\"" 
```

感谢@X-Cubed

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T06:19:12.313

文件名将作为参数传递给您的应用程序：

```
public static void Main(string[] args)
{
  if ( args != null && args.Length > 0 )
  {
    string filename = args[0];
    if ( File.Exists ( filename ) )
    {
      //Open file 
    }
  }
} 
```

# c++ - 是否可以生成参数包？

> ID：10892436
> 
> 赞同：5
> 
> 时间：2012-06-05T06:09:43.340
> 
> 标签：c++, c++11, variadic-templates, variadic

考虑以下伪代码：

```
template<class... T>
struct worker : unique<T...>::type...{};
struct x{};
struct y{};
struct z{}; 
```

是否可以编写一个模板`unique`，使其生成一个仅由 s 中唯一类型组成的参数包`T`，以便`worker<x,y,x,z>`直接从`x`、`y`、 、`z`、 、 、 、 、 、 、 按顺序派生，给定`T`的 s 是非最终类？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T07:20:16.107

阿法克：不。

问题是这`type`是`typedef`指令的结果，`typedef`不能给包起别名。这实际上很麻烦，而且通常对包的计算需要引入包装类型（例如`template <typename...> struct pack {};`），以便能够传递它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T07:56:11.997

[参数包不能轻易存储](https://stackoverflow.com/q/4691657/20984)，所以我不认为你想要的可以做到。但是，由于您似乎需要此功能才能从一组基中继承，因此您可以使用一些模板元编程来创建一个基类型，该基类型从您的集合中的所有基中线性继承。在此之前，您可以轻松地从参数包中过滤重复项。

下面是使用[Boost.MPL](http://www.boost.org/libs/mpl)实现这种方法：

```
#include <boost/mpl/fold.hpp>
#include <boost/mpl/inherit.hpp>
#include <boost/mpl/inherit_linearly.hpp>
#include <boost/mpl/insert.hpp>
#include <boost/mpl/placeholders.hpp>
#include <boost/mpl/set.hpp>
#include <boost/mpl/vector.hpp>

namespace mpl = boost::mpl;

template < typename ...Args >
struct inherit_uniquely
{
    // filter out duplicates
    typedef typename
        mpl::fold<
            mpl::vector< Args... >,
            mpl::set0<>,
            mpl::insert< mpl::_1, mpl::_2 >
        >::type unique_bases;

    // create base type
    typedef typename
        mpl::inherit_linearly<
            unique_bases,
            mpl::inherit< mpl::_1, mpl::_2 >
        >::type type;
};

template < typename ...Bases >
struct Derived : inherit_uniquely< Bases... >::type
{};

struct X { int x;};
struct Y { int y;};
struct Z { int z;};

int main()
{
    Derived< X, Y, Z > d;
    d.x = 1;
    d.y = 2;
    d.z = 3;

    X& d_as_x = d;
    Y& d_as_y = d;
    Z& d_as_z = d;
} 
```

# hibernate - hibernate 'org.hibernate.exception.JDBCConnectionException：无法执行查询'

> ID：10892438
> 
> 赞同：1
> 
> 时间：2012-06-05T06:09:49.213
> 
> 标签：hibernate, jsf-2, primefaces

我正在使用带有休眠功能的 jsf 2.0。当我晚上退出时，我的应用程序运行良好，但每天早上我都会遇到这个异常，我必须重新启动应用程序才能使其工作。

什么会导致这个

```
 org.hibernate.exception.JDBCConnectionException: could not execute query
org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:97)
org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
org.hibernate.loader.Loader.doList(Loader.java:2231)
org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2125)
org.hibernate.loader.Loader.list(Loader.java:2120)
org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:401)
org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:361)
org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
org.hibernate.impl.SessionImpl.list(SessionImpl.java:1148)
org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
chennaivolunteer.common.ViewActivityBean.getFirstngo(ViewActivityBean.java:156)
sun.reflect.GeneratedMethodAccessor257.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
org.apache.el.parser.AstValue.getValue(AstValue.java:169)
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
org.apache.myfaces.view.facelets.el.TagValueExpression.getValue(TagValueExpression.java:85)
org.apache.myfaces.view.facelets.component.UIRepeat.getValue(UIRepeat.java:246)
org.apache.myfaces.view.facelets.component.UIRepeat.getDataModel(UIRepeat.java:209)
org.apache.myfaces.view.facelets.component.UIRepeat._validateAttributes(UIRepeat.java:528)
org.apache.myfaces.view.facelets.component.UIRepeat.process(UIRepeat.java:578)
org.apache.myfaces.view.facelets.component.UIRepeat.encodeChildren(UIRepeat.java:1137)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:609)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
javax.faces.component.UIComponent.encodeAll(UIComponent.java:614)
org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.renderView(FaceletViewDeclarationLanguage.java:1159)
org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263)
org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85)
org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
root cause

 com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: No operations    allowed    
 after connection closed.Connection was implicitly closed due to underlying exception/error: 
```

这是我的 hibernate.cfg.xml

```
 <hibernate-configuration>
  <session-factory name="">
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://192.168.1.200:3306            
  /chennai_volunteers</property>
       <!-- <property name="connection.url">jdbc:mysql://localhost:330          
      /chennai_volunteers</property> -->
    <property name="connection.username">root</property>
        <property name="connection.password">root</property>
  <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
  <property name="current_session_context_class">thread</property>
     <property name="hibernate.connection.pool_size">100</property>
   <!-- start c3p0 connection properties -->
      <property name="c3p0.min_size">20</property>
    <property name="c3p0.max_size">500</property>
      <property name="c3p0.timeout">25200</property>
    <property name="c3p0.acquireRetryAttempts">30</property>
    <property name="c3p0.acquireIncrement">5</property>
   <property name="c3p0.idleConnectionTestPeriod">14400</property>
   <property name="c3p0.initialPoolSize">20</property>
 <property name="c3p0.maxPoolSize">300</property>
  <property name="c3p0.maxIdleTime">300</property>
 <property name="c3p0.maxStatements">200</property>
  <property name="c3p0.minPoolSize">10</property>
   </session-factory>
  </hibernate-configuration> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:22:42.453

`maxIdleTime`在 c3p0 中查看[MaxIdleTime](http://www.mchange.com/projects/c3p0/#maxIdleTime)的设置

如果您希望连接永远持续，您需要设置为`0`（默认为`0`）。由于您`300`在第二天早上将其设置为秒，因此所有空闲连接都已被剔除。

# javascript - 滑块标题问题（轨道滑块）

> ID：10892439
> 
> 赞同：0
> 
> 时间：2012-06-05T06:09:54.137
> 
> 标签：javascript, jquery, html, css

有谁知道制作像这样的标题的最佳方法[http://i.imgur.com/NOSF0.png](http://i.imgur.com/NOSF0.png)？我已经尝试过使用 Firebug 并实现了这个[http://i.imgur.com/cMB3Y.png](http://i.imgur.com/cMB3Y.png)但是当我实际上将代码放入 html 页面时它不起作用。有谁知道如何在图片中制作类似的东西？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:22:27.630

嘿，我检查了你的页面，它很好。这是滑块标题的链接。

试试这个：http: [//jsfiddle.net/CFtEe/3/](http://jsfiddle.net/CFtEe/3/)

问我是否有任何问题。

# sharepoint - 性能点声明

> ID：10892445
> 
> 赞同：2
> 
> 时间：2012-06-05T06:10:18.313
> 
> 标签：sharepoint, ssas, performancepoint, proclarity

我的公司想使用 Microsoft ProClarity，因为我是 BI 新手，我不知道如何回答这些问题：

1.  ProClarity 是否仍可通过独立许可证获得？
2.  ProClarity 在 PerformacePoint Server 2010 (Sharepoint 2010) 上是否可用？

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:07:33.987

1.  由于 MS 在 2006 年收购了 ProClarity，它在 MS Performance Point Server 下获得许可。我不认为你可以把它作为一个独立的了。
2.  检查[此](http://social.technet.microsoft.com/Forums/en-US/proclarity/thread/52e4eee3-2679-4917-9c76-5870029cd9b0/#8f2035f9-25ab-48a6-9201-1a0dbdd3ba39)链接

# php - PHP：在多个数组中提取最低值

> ID：10892446
> 
> 赞同：0
> 
> 时间：2012-06-05T06:10:18.720
> 
> 标签：php, arrays

我有一个项目阻碍了我，我可能无法让它发挥作用。有人可以帮助我吗 - 我相信我只是对这一切感到困惑，并且有一个简单的答案。我有 3 个多维数组（来自不同公司的 3 个不同的定价数据），每个都持有这种数据：

```
[0] => Array
(
    [itemcode] => 27663
    [buy] => 50000
    [perquantity] => 5
)

[1] => Array
(
    [itemcode] => 38663
    [buy] => 41000
    [perquantity] => 4
) 
```

相同的项目代码出现在所有 3 家公司的数据中。我要创建一个 html 表，其中包含来自这些数据的以下列：

```
ItemCode  | Supplier1  | Supplier2  | Supplier3  | Difference (2nd lowest minus lowest)
38663   | 12500  | 12425  |  16440  |  75 
```

我的问题：是否有这样做的捷径，比如通过创建另一个数组来临时存储数据？或者您认为需要一个概念来轻松完成此任务？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:19:34.787

我不知道您的 HTML 表中的数字来自哪里，但我认为创建一个临时数组将是可行的方法。

```
$items=array();
foreach ($supplier1 as $data) {
  $items[$data['itemcode']]['Supplier1buy']  = $data['buy'];
  $items[$data['itemcode']]['Supplier1perq'] = $data['perquantity'];
}
foreach ($supplier2 as $data) {
  $items[$data['itemcode']]['Supplier2buy']  = $data['buy'];
  $items[$data['itemcode']]['Supplier2perq'] = $data['perquantity'];
}
// etc. 
```

为了制作更漂亮的代码，我想我需要更多地了解数据是如何工作的。例如，我不知道你是否真的需要“perquantity”。您的 HTML 表格中的数字是购买和数量的函数吗？

一旦你有了你的大`$items`数组，你可以遍历它来创建你的 HTML 表的行。

# android - 如何在android中显示最后从相机捕获的图像？

> ID：10892451
> 
> 赞同：1
> 
> 时间：2012-06-05T06:10:54.353
> 
> 标签：android, android-camera, android-imageview

我在 onActivityResult 中使用以下代码，但它不起作用

```
File file1 = new File( Environment.getExternalStorageDirectory().getAbsolutePath(),imagecapture);

            if (file1.exists()) {
              //Do action
                image=(ImageView)findViewById(R.id.image);
             Bitmap myBitmap = BitmapFactory.decodeFile(file1.getAbsolutePath());
          image.setImageBitmap(myBitmap);
       image.invalidate();

            } 
```

但我无法理解为什么它不起作用我也使用 [了 Android Camera Intent: how to get full-sized photo？](https://stackoverflow.com/questions/6448856/android-camera-intent-how-to-get-full-sized-photo) 但它在线上给出错误`mImageUri = Uri.fromFile(photo);` 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:40:26.047

```
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    Button btnTakePhoto;
    ImageView imgTakenPhoto;
    private static final int CAM_REQUREST = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnTakePhoto = (Button) findViewById(R.id.button1);
        imgTakenPhoto = (ImageView) findViewById(R.id.imageView1);

        btnTakePhoto.setOnClickListener(new btnTakePhotoClicker());
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

          if (requestCode == CAMERA_PIC_REQUEST) {
              Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
              imgTakenPhoto.setImageBitmap(thumbnail);
          }
    }

    class btnTakePhotoClicker implements Button.OnClickListener
    {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:36:31.240

```
File root=new File(Environment.getExternalStorageDirectory()
                + File.separator + "MYPICS" + File.separator);
File sdImageMainDirectory ;
if (!root.exists()) {
            root.mkdirs();
        }
ImageButton cam =(ImageButton)findViewById(R.id.ImageButton1);
cam.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                imageName = "MyPic" + i + ".png";
                sdImageMainDirectory = new File(root, imageName);

                Uri imgUri = Uri.fromFile(sdImageMainDirectory);

                Intent intent = new Intent(
                        android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, imgUri);

                startActivityForResult(intent, 0);

            }
        });

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (resultCode) {
        case 0:
            // finish();
            break;

        case -1:
            files = root.listFiles();
            count = files.length;

            try {
                               BitmapFactory.Options option = new BitmapFactory.Options();
                    option.inSampleSize = 2;
            bm = BitmapFactory.decodeFile(root.getPath()+"/"+imageName,option); 

                   ImageView imageview =(ImageView)findViewById(R.id.imageView1);
                    imageview .setImageBitmap(bm);
    }

            } catch (Exception e) {
                e.printStackTrace();
            }
} 
```

# inno-setup - Inno Setup Exec() function 等待有限的时间

> ID：10892452
> 
> 赞同：6
> 
> 时间：2012-06-05T06:11:06.910
> 
> 标签：inno-setup

在我的 Inno Setup 脚本中，我正在执行第 3 方可执行文件。我正在使用如下`Exec()`功能：

```
Exec(ExpandConstant('{app}\SomeExe.exe'), '', '', SW_HIDE, ewWaitUntilTerminated, ErrorCode); 
```

通过提及`ewWaitUntilTerminated`它等到`SomeExe.exe`不退出。我只想等待 10 秒。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-06T08:34:49.110

假设您要执行外部应用程序，等待其终止指定的时间，如果它没有自行终止，则从安装程序中杀死它，请尝试以下代码。对于这里使用的神奇常数，函数中用作参数的 3000[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)是设置等待进程终止的时间（以毫秒为单位）。如果它没有在那个时候自行终止，它会被[`TerminateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714%28v=vs.85%29.aspx)函数杀死，其中 666 值是进程退出代码（在这种情况下非常邪恶:-)

```
[Code]
#IFDEF UNICODE
  #DEFINE AW "W"
#ELSE
  #DEFINE AW "A"
#ENDIF

const
  WAIT_TIMEOUT = $00000102;
  SEE_MASK_NOCLOSEPROCESS = $00000040;

type
  TShellExecuteInfo = record
    cbSize: DWORD;
    fMask: Cardinal;
    Wnd: HWND;
    lpVerb: string;
    lpFile: string;
    lpParameters: string;
    lpDirectory: string;
    nShow: Integer;
    hInstApp: THandle;    
    lpIDList: DWORD;
    lpClass: string;
    hkeyClass: THandle;
    dwHotKey: DWORD;
    hMonitor: THandle;
    hProcess: THandle;
  end;

function ShellExecuteEx(var lpExecInfo: TShellExecuteInfo): BOOL; 
  external 'ShellExecuteEx{#AW}@shell32.dll stdcall';
function WaitForSingleObject(hHandle: THandle; dwMilliseconds: DWORD): DWORD; 
  external 'WaitForSingleObject@kernel32.dll stdcall';
function TerminateProcess(hProcess: THandle; uExitCode: UINT): BOOL;
  external 'TerminateProcess@kernel32.dll stdcall';

function NextButtonClick(CurPageID: Integer): Boolean;
var
  ExecInfo: TShellExecuteInfo;
begin
  Result := True;

  if CurPageID = wpWelcome then
  begin
    ExecInfo.cbSize := SizeOf(ExecInfo);
    ExecInfo.fMask := SEE_MASK_NOCLOSEPROCESS;
    ExecInfo.Wnd := 0;
    ExecInfo.lpFile := 'calc.exe';
    ExecInfo.nShow := SW_HIDE;

    if ShellExecuteEx(ExecInfo) then
    begin
      if WaitForSingleObject(ExecInfo.hProcess, 3000) = WAIT_TIMEOUT then
      begin
        TerminateProcess(ExecInfo.hProcess, 666);
        MsgBox('You just killed a little kitty!', mbError, MB_OK);
      end
      else
        MsgBox('The process was terminated in time!', mbInformation, MB_OK);
    end;
  end;
end; 
```

我在 Windows 7 上使用 Inno Setup 5.4.3 Unicode 和 ANSI 版本测试过的代码（感谢 kobik 提出的使用条件定义的 Windows API 函数声明的想法[`this post`](https://stackoverflow.com/a/9670505/960757)）

# avfoundation - 使用 MacRuby 时无法使用 replaceCurrentItemWithPlayerItem

> ID：10892454
> 
> 赞同：0
> 
> 时间：2012-06-05T06:11:18.193
> 
> 标签：avfoundation, macruby

我正在使用 AVFoundation 和 MacRuby 来处理视频播放。最初使用以下代码在我的 AVPlayer 中播放视频没有问题：

```
 videoWindow.setFrame(@frame, display:true, animate:true)
    @content_view = self.videoWindow.contentView
    @content_view.wantsLayer = true
    asset = AVAsset.assetWithURL(url)       
    item = AVPlayerItem.new
    item.initWithAsset(asset)
    $video = AVPlayer.alloc.initWithPlayerItem(item)
    @player_layer = AVPlayerLayer.playerLayerWithPlayer($video)
    @player_layer.Frame = @frame
    @content_view.layer.addSublayer(@player_layer)
    @player_layer.videoGravity = AVLayerVideoGravityResize
    $video.seekToTime(CMTimeMake(4, 1))
    $video.play 
```

当我试图将播放更改为新视频时，我遇到了麻烦。为此，我尝试使用相同的 AVPlayer 对象并使用 replaceCurrentItemWithPlayerItem 命令。当我尝试运行它时，应用程序停止响应。

```
 asset2 = AVAsset.assetWithURL(@url2)
    item2 = AVPlayerItem.new
    item2.initWithAsset(asset2)
    $video.pause
    $video.replaceCurrentItemWithPlayerItem(item2) 
```

我也尝试过 performSelectorOnMainThread 但我得到了相同的结果。

```
 $video.performSelectorOnMainThread('replaceCurrentItemWithPlayerItem:', withObject:item2, waitUntilDone:true) 
```

我想知道是否有办法重用我的 AVPlayer 对象来播放新项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:26:07.577

这就是最终的工作：

```
item = AVPlayerItem.playerItemWithURL(@url)
$video.replaceCurrentItemWithPlayerItem(item) 
```

我创建资产的方式似乎存在一些问题。我只是跳过了资产并直接创建了该项目。

# ios - iOS：GLPaint 无法在大框架上绘制

> ID：10892455
> 
> 赞同：1
> 
> 时间：2012-06-05T06:11:23.203
> 
> 标签：ios, opengl-es

Apple 徒手画[GLPaint](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)的例子，使用 OpenGL ES 绘画不能用大框架绘制。我需要在大画布上绘制超过 {2410, 1808} 的内容。但是当我尝试绘图时，控制台上会显示一条消息，

```
2012-06-05 14:29:40.780 GLPaint [3390:707] 绘图视图框架：{{-827.222, -567.004}, {2410, 1808}}
2012-06-05 14:29:40.884 GLPaint [3390:707] 无法制作完整的帧缓冲区对象 8cd6

```

在我的代码中，我将框架设置为-

```
//PaintingViewGL performing the freehand drawing of OpenGL ES
//drawingView is a UIView with dynamic frame size

paintingViewGL = [[PaintingViewGL alloc] initWithFrame:drawingView.frame];
paintingViewGL.backgroundColor = [UIColor clearColor];

[drawingView addSubview:paintingViewGL];
paintingViewGL.center = drawingView.center;
paintingViewGL.hidden = NO; 
```

我在帧大小 {1435, 1076} 和稍大一点的帧（如 {1600, 1200}）上得到了不错的结果，画笔像波浪一样消失并开始在屏幕上跳舞。有时我会收到 Received memory 警告。在这种情况下，Level=1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:28:42.903

对于 iPad 2 之前的设备，最大纹理大小为 2048 x 2048，因此您不能绘制大于该大小的纹理或帧缓冲区对象。您只会看到错误和黑屏。在较新的设备（iPad 2、Retina iPad、iPhone 4S）上，此纹理大小限制已增加到 4096 x 4096。

在更大的画布上绘图的唯一解决方案是在 OpenGL ES 中创建平铺机制，就像 CATiledLayer 在 Core Animation 中所做的那样。不过，祝您好运，因为如果您对 OpenGL ES 渲染不太熟悉，这将是一项重大任务。

此外，您将在 OpenGL ES 中遇到非常大的场景的内存问题，尤其是在较旧的 iOS 设备上。对于您提到看到警告的 1600x1200 图像，每个未压缩的帧本身占用约 7.7 MB 的内存。如果您有多个图层或纹理，如果您不小心，可能会很快加起来并耗尽设备上的可用内存。对于 2410x1808 图像，您现在看到的是每帧 17.4 MB，因此这是您希望平铺它以仅使用您当时需要的平铺的另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:34:07.700

这件事的大小上限与纹理相同。当前上限为 1<<11 (2048)，您不能创建宽度或高度大于 2048 像素的缓冲区。我看到达到您想要的效果的唯一方法是创建超过 1 个视图或超过 1 个帧缓冲区。如果您真的想要/需要经历所有这些麻烦，请阅读有关 FBO（帧缓冲区对象）的内容。

# iphone - 如何在 ipad 中单击时更改单元格背景颜色或图像

> ID：10892456
> 
> 赞同：0
> 
> 时间：2012-06-05T06:11:23.980
> 
> 标签：iphone, objective-c

我想试试，当我点击单元格时，颜色应该会改变，颜色应该留在我被点击的那个单元格上。直到这里我成功了。但是当表格刷新时，单元格背景颜色消失，我错了请帮助我，我从苹果文档中得到代码我使用这个。我错过了代码中的一些行

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

      //here i create view with color for cell when cell is click this view should display as background i am write or wrong by doing this please help me here why my view is disappear when my tableview is refresh then this view is disapper from cell i want to stay that place till user not click other cell&mt tableview is grouped tableview.
       UIView *v = [[[UIView alloc] init] autorelease];
       v.layer.cornerRadius =6.0f;
       v.backgroundColor = [UIColor darkGrayColor];
       cell.selectedBackgroundView = v;
       }
     return cell;
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 0 || indexPath.row%1 == 0) {
        UIColor *altCellColor = [UIColor colorWithWhite:0.2 alpha:0.1];
        cell.backgroundColor = altCellColor;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:23:57.993

如果要在刷新时保留所选行，则可以保存所选 indexPath 并使用以下方法：

```
NSIndexPath *rowToSelect; //save your selected indexPath

[myTableView selectRowAtIndexPath:rowToSelect animated:YES scrollPosition:UITableViewScrollPositionNone;
[myTableView scrollToRowAtIndexPath:rowToSelect atScrollPosition:UITableViewScrollPositionNon animate:YES]; 
```

# c++ - SHA-2 算法的字节序乐趣

> ID：10892457
> 
> 赞同：2
> 
> 时间：2012-06-05T06:11:41.313
> 
> 标签：c++

我正在尝试编写一个 SHA-2 实现，但结果总是不正确——我已经对空字符串等内容进行了测试。我分两个步骤实现它，预处理和主体。

```
template<typename T> struct Output {
    std::array<T, 8> h;
};
template<typename T> struct Input {
    std::array<T, 16> c;
};
template<typename T> Output<T> sha2(Input<T> in) {
    T w[64];
    for(int i = 0; i < 16; i++)
        w[i] = in.c[i];

    for(int i = 16; i < 64; i++) {
        auto s0 = _rotr(w[i - 15], 7) ^ _rotr(w[i - 15], 18) ^ (w[i - 15] >> 3);

        auto s1 = _rotr(w[i - 2], 17) ^ _rotr(w[i - 2], 19) ^ (w[i - 2] >> 10);
        w[i] = w[i - 16] + s0 + w[i - 7] + s1;        
    }

    static const T k[] = {    
        0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 
        0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,
        0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 
        0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,
        0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 
        0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,
        0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 
        0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,
        0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 
        0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,
        0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 
        0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,
        0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 
        0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
        0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 
        0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2
    };

    static const T h[] = {
        0x6a09e667,
        0xbb67ae85,
        0x3c6ef372,
        0xa54ff53a,
        0x510e527f,
        0x9b05688c,
        0x1f83d9ab,
        0x5be0cd19
    };

    T loopvars[8];
    for(int i = 0; i < 8; i++)
        loopvars[i] = h[i];

    for(int i = 0; i < 64; i++) {
        auto&& la = loopvars[0];
        auto&& lb = loopvars[1];
        auto&& lc = loopvars[2];
        auto&& ld = loopvars[3];
        auto&& le = loopvars[4];
        auto&& lf = loopvars[5];
        auto&& lg = loopvars[6];
        auto&& lh = loopvars[7];

        auto s0 = _rotr(la, 2) ^ _rotr(la, 13) ^ _rotr(la, 22);
        auto maj = (la & lb) ^ (la & lc) ^ (lb & lc);
        auto t2 = s0 + maj;

        auto s1 = _rotr(le, 6) ^ _rotr(le, 11) ^ _rotr(le, 25);
        auto ch = (le & lf) ^ ((~le) & lg);
        auto t1 = lh + s1 + ch + k[i] + w[i];

        lh = lg;
        lg = lf;
        lf = le;
        le = ld + t1;
        ld = lc;
        lc = lb;
        lb = la;
        la = t1 + t2;
    }
    Output<T> output;
    for(int i = 0; i < 8; i++) {
        output.h[i] = h[i] + loopvars[i];
    }
    return output;
}
Output<unsigned int> SHA2(std::vector<char> bytes) {
    auto bitlen = bytes.size() * 8;
    auto big_endian_bitlen = ::_byteswap_uint64(bitlen);
    if (bitlen > 440)
        throw std::runtime_error("Epic fail!");
    Input<unsigned int> in;
    for(int i = 0; i < 16; i++) {
        in.c[i] = 0;
    }
    memcpy(&in.c[0], &bytes.front(), bytes.size());
    in.c[bitlen / 32] |= (1 << (bitlen % 32));
    // all zero by default, so no need to append the extra bits
    in.c[14] = (big_endian_bitlen >> 32);
    in.c[15] = big_endian_bitlen;
    return sha2(in);
} 
```

我怀疑字节顺序错误。例如，当我列出主体的输入时，它返回为`1 .. (511x)0`，我很确定这是正确的。但是当我尝试交换值以尊重字节顺序时，我仍然没有得到正确的输出。

据我所知，我*相当*确定错误出在预处理步骤中，因为主体是与字节序无关的。

关于实施不正确的地方有什么建议吗？

编辑：哦，是的，`_byteswap_uint64`是用于 64 位无符号整数字节序转换的 MSVC 内在函数，并且`_rotr`可以向右旋转 32 位无符号整数。对于 GCC，您只需使用宏或将它们定义为等效 GCC 内在函数的函数。

仅供参考，不正确的输出是

```
de5c4195
c21e7e70
e6a365c2
77f6bc03
f651e23a
6fb9b88a
1decb688
d6fddf1f 
```

而正确的输出是

```
e3b0c442
98fc1c14
9afbf4c8
996fb924
27ae41e4
649b934c
a495991b
7852b855 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T04:22:04.660

也许从工作实现中提取的一些摘录会有所帮助——尤其是因为它强调非常密切地遵循 FIPS 描述，而不是像效率这样的任何世俗考虑。:-) 最大的偏差可能是使用 temp[0]...temp[7] 来表示 FIPS 所称的`a`, `b`, ...`h`和 temp[8] 以及 temp[9] 来表示 T [1]和 T [2]。

```
namespace {
    uint32_t word(int a, int b, int c, int d) {
        a &= 0xff;
        b &= 0xff;
        c &= 0xff;
        d &= 0xff;
        int val =  a << 24 | b << 16 | c << 8 | d;
        return val;
    }

    uint32_t ROTR(uint32_t number, unsigned bits) { 
        return (number >> bits) | (number << (32-bits));
    }

    uint32_t f1(uint32_t x, uint32_t y, uint32_t z) { 
        return (x & y) ^ (~x & z);
    }
    uint32_t f2(uint32_t x, uint32_t y, uint32_t z) { 
        return (x & y) ^ (x&z) ^ (y&z);
    }
    uint32_t f3(uint32_t x) { 
        return ROTR(x, 2) ^ ROTR(x, 13) ^ ROTR(x, 22);  
    }
    uint32_t f4(uint32_t x) { 
        return ROTR(x, 6) ^ ROTR(x, 11) ^ ROTR(x, 25);
    }
    uint32_t f5(uint32_t x) { 
        return ROTR(x, 7) ^ ROTR(x, 18) ^ (x >> 3);
    }
    uint32_t f6(uint32_t x) { 
        return ROTR(x, 17) ^ ROTR(x, 19) ^ (x >> 10);
    }

    uint32_t add(uint32_t a, uint32_t b) {
        return a+b;
    }
}

sha256::sha256() : H(hash_size), W(64), temp(10) { 
    static const uint32_t H0[hash_size] = {
        0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 
        0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19
    };

    std::copy(H0, H0+hash_size, H.begin());
}

void sha256::hash_block(std::vector<uint32_t> const &block) {
    static const uint32_t K[] = {
        0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,
        0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5, 
        0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,
        0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,
        0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,
        0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,
        0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,
        0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,
        0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,
        0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,
        0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,
        0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, 
        0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,
        0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
        0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,
        0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2
    };

    assert(block.size() == 16);

    std::copy(block.begin(), block.end(), W.begin());
    for (int t=16; t<64; ++t) 
        W[t] = f6(W[t-2]) + W[t-7] + f5(W[t-15]) + W[t-16];
    std::copy(H.begin(), H.end(), temp.begin());

    for (int t=0; t<64; ++t) {
        temp[8] = temp[7]+f4(temp[4]) + f1(temp[4],temp[5],temp[6])+K[t]+W[t];
        temp[9] = f3(temp[0]) + f2(temp[0], temp[1], temp[2]);
        temp[7] = temp[6];
        temp[6] = temp[5];
        temp[5] = temp[4];
        temp[4] = temp[3] + temp[8];
        temp[3] = temp[2];
        temp[2] = temp[1];
        temp[1] = temp[0];
        temp[0] = temp[8] + temp[9];
    }
    std::transform(H.begin(), H.end(), temp.begin(), H.begin(), add);
} 
```

不过，我倾向于同意您的猜测：我怀疑填充例程。至少根据我的经验，填充比哈希例程本身更难正确（部分原因是没有仔细描述它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:09:09.437

```
in.c[i / 32] |= ((bytes[i / 8] >> (i % 8))) << (i % 32)); 
```

bytes 是一个“char”数组。char 通常是有符号的。（这是 Visual Studio 的默认设置，我猜是 gcc）。所以当你右移“bytes[i/8]”时，它会携带符号扩展。也就是说，如果 bytes[0] 是 0xf0。那么 (bytes[0] >> 4) 将是 0xff，而不是 0x0f。

# html - 元视口标签是如何使用的，它有什么作用？

> ID：10892463
> 
> 赞同：28
> 
> 时间：2012-06-05T06:12:23.797
> 
> 标签：html, meta-tags, viewport

1.  哪些浏览器支持此元标记？
2.  我如何使用它？
3.  这是否意味着它将解决我所有的移动调整问题？

如果有人能回答这个问题，对新手学习会有很大帮助

```
<meta="viewport"> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T06:33:04.843

1.  视口浏览器支持有点全面。我会将您指向[Quirksmode 页面以获取视口浏览器支持](http://www.quirksmode.org/mobile/tableViewport.html)的完整详细信息。
2.  您可以像使用任何其他元标记一样使用视口元标记。将代码块直接放在`<head>`.
3.  差不多，但在这里要说一点。我建议[阅读一些文章](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)，[阅读 W3 移动网页设计最佳实践](http://www.w3.org/TR/mwabp/#bp-viewport)，或当前 W3 关于[标签](http://dev.w3.org/csswg/css-device-adapt/#viewport-meta)[视口属性的草案规范`<meta>`](http://dev.w3.org/csswg/css-device-adapt/#viewport-meta)。

简而言之，将这一行添加到应该实现视口缩放的网站应该可以解决大多数问题。（复制自[WebDesignTuts+ 的“快速提示：不要忘记视口元标记”文章](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)）

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
```

* * *

PS Quirksmode 也有[一篇相当精彩的文章描述了](http://www.quirksmode.org/mobile/viewports.html)值得一读的问题，以了解为什么这可能会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T22:41:57.443

关于元视口、它的各种属性以及如何在您的设计中使用它的另一篇文章是[http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)

还有一个[幻灯片](http://www.slideshare.net/andreasbovens/optimizing-your-layout-for-phones-and-tablets-using-viewport-and-media-queries)可以详细解释事情，还有一个[Github repo](http://github.com/andreasbovens/understanding-viewport)来配合它。

*免责声明：我是这些资源的作者。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T06:38:23.927

您可以从 Mozilla 博客查看所有详细信息

[https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-10T09:51:26.120

元视口标签用于根据查看屏幕的大小调整网站的大小和可见性。它可以帮助网页自动适应安卓、平板电脑或 iPhone。

# iphone - iCarousel 的索引

> ID：10892465
> 
> 赞同：0
> 
> 时间：2012-06-05T06:12:43.107
> 
> 标签：iphone, ios, xcode

如何确定轮播的索引？还是加载了数组的索引？我已经从 NSDocumentDirectory 加载了我的图像。

```
self.myImages = [NSMutableArray new];  
for(int i = 1; i <= 30; i++) 
{ 
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"myImages%d.png", i]]; 
       if([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]){ 
            [images addObject:[UIImage imageWithContentsOfFile:savedImagePath]]; 
            NSLog(@"file exists");
        } 

} 
```

并将它们添加到 iCarousel 视图中：

```
- (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    view = [[UIImageView alloc] initWithImage:[myImages objectAtIndex:index]];
    return view;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:30:22.303

如果我没有误解您的问题，您可以尝试使用`tag`UIView 的属性进行比较。例如：

在`viewForItemAtIndex:`

```
- (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index  reusingView:(UIView *)view
{
    view = [[UIImageView alloc] initWithImage:[myImages objectAtIndex:index]];
    view.tag = index;
    return view;
} 
```

`currentItemView`与另一张图片比较

```
If (int == [(UIImageView*)[self.carousel currentItemView] tag]) { 
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:23:36.200

您在哪里（在代码中）需要轮播索引？当您将图像添加到轮播时（在 中`viewForItemAtIndex:`）以及当您点击轮播时（在 中），您就会知道这一点`didSelectItemAtIndex:`。

此外，您可以使用轮播的`currentItemIndex`属性。

# wpf - 加载 HttpWebRequest 时的等待指示器

> ID：10892466
> 
> 赞同：0
> 
> 时间：2012-06-05T06:12:44.630
> 
> 标签：wpf, httpwebresponse

这是我的部分代码

```
public MainWindow()
        {
            InitializeComponent();
try
                {       
                    HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.site.my/install.php?data=" + uniqueID + "&pass=" + pass);
                    request.BeginGetResponse(new AsyncCallback(FinishWebRequest), request);                   
                }
                catch (Exception)
                {
                }
}
private void FinishWebRequest(IAsyncResult result)
        {
            HttpWebResponse response = (result.AsyncState as HttpWebRequest).EndGetResponse(result) as HttpWebResponse;
            Stream dataStream = response.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader(dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd();
            // Display the content.
            Console.WriteLine(responseFromServer);
            // Cleanup the streams and the response.
            reader.Close();
            dataStream.Close();
            response.Close();

            if (responseFromServer == "1")
            {
                MessageBox.show("ok")
            }else{
                MessageBox.show("no")
            }

        } 
```

虽然我使用异步，但似乎窗口会“挂起”一段时间......所以我认为放入加载指示器会很好，对吧？我应该在哪里以及如何放置它？我想的只是一个简单的加载指示器，而不是进度条..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:04:27.593

首先，将所有这些代码放在构造函数中是不好的做法。加载事件是这个逻辑更合适的地方。其次，您的问题很模糊：您想到的是哪种加载指示器？你想自己写，还是找第三方写的？您到底想完成什么，您的 GUI 设计是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T07:24:06.293

我使用此处提供的代码[http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/](http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/)做一个后台工作者和该应用程序将不再挂起

# asp.net - 将所有程序集：WebResource 放在同一个 cs 文件中是个好主意吗？

> ID：10892467
> 
> 赞同：1
> 
> 时间：2012-06-05T06:12:56.897
> 
> 标签：asp.net, c#-3.0

我有一个带有一些 WebControls 的 .NET 库。

这些 webControls 具有嵌入资源。我们在每个 cs 文件的所有 web 控件中声明它们：

像这样的东西：

```
[assembly: WebResource("IO.Css.MyCSS.css", "text/css")]
namespace MyNamespace.MyClass
{
    [ParseChildren(true)]
    [PersistChildren(false)]
    [Designer(typeof(MyNamespace.MyClassDesigner))]
    public class QuickTip : Control, INamingContainer
    {
        //My code...
    }
} 
```

创建一个cs文件并在其中包含所有WebResource声明是个好主意吗？

一个cs文件的例子：

```
[assembly: WebResource("IO.Css.MyCSS.css", "text/css")]
[assembly: WebResource("IO.Image.MyImage.png", "image/png")]
//And many other WebResources of all WebControls of the Assembly 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:15:12.513

This is a very general question. It depends on the project characteristics.

# jquery - 页面加载后 Jquery Datepicker 不工作

> ID：10892474
> 
> 赞同：1
> 
> 时间：2012-06-05T06:13:35.057
> 
> 标签：jquery, asp.net, jquery-plugins

我在 aspx 页面上使用带有两个文本框的 datepicker 插件。当我点击提交时，数据会保存在数据库中，但现在如果我再次尝试更新日期，日期选择器在页面加载后不起作用。我为此使用以下代码。

```
<asp:TextBox ID="txtMovingDate" runat="server"
 CssClass="TextBox datepicker" TabIndex="19"></asp:TextBox>

jQuery(function() {
jQuery(".datepicker").datepicker(
{ dateFormat: 'mm/dd/yy', timeFormat: ' hh:ii:ss', 
changeMonth: true, changeYear: true }); 
```

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:04:04.193

> var prm = Sys.WebForms.PageRequestManager.getInstance();
> 
> prm.add_endRequest（函数（）{
> 
> //您需要在此处复制您的 jquery datapicker 函数 //以便在回发后使用它
> 
> });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T20:13:55.497

如果您在 Updatepanel 中有一个文本框，为了让事情更清楚，这里是我拥有的工作代码示例（在阅读了一些不同的答案后推断）。

在您的 <head> 标签中放置以下内容：

```
<script type="text/javascript">
    $(document).ready(function () {

        $(".startDatepicker").datepicker({
            dateFormat: 'dd/mm/yy',
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 2,
            onClose: function (selectedDate) {
                $(".endDatepicker").datepicker  "option", "minDate", selectedDate);
            }
        });

    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

        function EndRequestHandler(sender, args) {
            $(".startDatepicker").datepicker({
                dateFormat: 'dd/mm/yy',
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 2,
                onClose: function (selectedDate) {
                    $(".endDatepicker").datepicker("option", "minDate", selectedDate);
                }
            });
        }
    });  
</script> 
```

然后在你的 <body> 代码中输入：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <div class="floatLeft"><asp:TextBox ID="dateFromTxtBox" CssClass="startDatepicker"
        runat="server" Text="02/12/2013" ToolTip="enter a time either in 12 hour clock or 24 hour clock"
        Width="74px" DataFormatString="{0:d}" BorderStyle="Inset"></asp:TextBox>
    </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

要添加结束日期或时间选择器，只需复制并粘贴每个 Jquery 语句的新实例（但不是 $(doc).ready(){}.. 或函数 EndRequestHandler(sender, args){}，您在脚本中只需要其中一个）加上 < asp:textbox... 语句。

希望这可以帮助

# blackberry - 如何实现这个 UI？

> ID：10892475
> 
> 赞同：0
> 
> 时间：2012-06-05T06:13:38.187
> 
> 标签：blackberry

这就是我要的：

![所需的用户界面](../Images/a74f5841d997d7ce1ada22a727f7b877.png)

我通过这个创建了顶部的红色布局

```
public class Custom_TopField extends VerticalFieldManager {
private static final int FIELD_HEIGHT = 70;

private String _text;

Custom_TopField(int color, String text) {
    super(Manager.NO_VERTICAL_SCROLL);
    _text = text;

    Background background = BackgroundFactory.createSolidBackground(color);
    setBackground(background);
}

protected void sublayout(int width, int height) {
    width = Math.min(width, getPreferredWidth());
    height = Math.min(height, getPreferredHeight());
    setExtent(width, height);
}

public int getPreferredHeight() {
    return FIELD_HEIGHT;
}

public int getPreferredWidth() {
    return Display.getWidth();
}

public void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();

    Font font = Font.getDefault().derive(Font.BOLD, 35);
    graphics.setFont(font);
    graphics.setColor(Color.WHITE);
    graphics.drawRect(0, 0, rectWidth, rectHeight);
    graphics.drawText(_text, rectWidth * 4 / 9, 10);
    super.paint(graphics);
} 
```

}

黑莓中的textview有什么相似之处？是标签文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:29:56.810

使用三个布局管理器，一个用于顶部红色部分的标题，使用第二个布局管理器并在其中添加一个列表字段覆盖行的 ListField 绘制方法 ....并将 ToolbarManager 用于下面的选项卡栏

# css - 在 CSS 中对齐图像旁边的文本

> ID：10892476
> 
> 赞同：0
> 
> 时间：2012-06-05T06:13:42.443
> 
> 标签：css, alignment

如何对齐此文本，使其在图像旁边垂直居中。

[http://jsfiddle.net/frwC2/](http://jsfiddle.net/frwC2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:19:28.213

添加`vertical-align: middle`到包含`<div>`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:20:07.087

[http://jsfiddle.net/frwC2/10/](http://jsfiddle.net/frwC2/10/)

你在寻找这样的东西吗？

# arrays - 整数数组的校验和？

> ID：10892477
> 
> 赞同：7
> 
> 时间：2012-06-05T06:13:55.707
> 
> 标签：arrays, algorithm, compare, checksum

我有一个大小为 4、9、16 或 25 的数组（根据输入），数组中的数字相同但减一（如果数组大小为 9，则数组中的最大元素为8）*数字以0开头，* 我想做一些算法来为数组生成某种校验和，这样我就可以比较两个数组是否相等，而无需遍历整个数组并逐个检查每个元素。

我在哪里可以得到这样的信息？我需要一些尽可能简单的东西。谢谢你。

编辑：只是为了清楚我想要什么：

-数组中的所有数字都是不同的，因此[0,1,1,2]无效，因为存在重复元素（1）

- 数字的位置很重要，因此 [0,1,2,3] 与 [3,2,1,0] 不同

- 数组将包含数字 0，因此也应考虑到这一点。

编辑：

好的，我尝试在这里实现弗莱彻的算法： [http ://en.wikipedia.org/wiki/Fletcher%27s_checksum#Straightforward](http://en.wikipedia.org/wiki/Fletcher%27s_checksum#Straightforward)

```
int fletcher(int array[], int size){
  int i;
  int sum1=0;
  int sum2=0;
  for(i=0;i<size;i++){
    sum1=(sum1+array[i])%255;
    sum2=(sum2+sum1)%255;
  }
  return (sum2 << 8) | sum1;
} 
```

老实说，我不知道返回线是做什么的，但不幸的是，该算法不起作用。对于数组 [2,1,3,0] 和 [1,3,2,0] 我得到相同的校验和。

编辑2：

好的，这是另一个，阿德勒校验和 [http://en.wikipedia.org/wiki/Adler-32#Example_implementation](http://en.wikipedia.org/wiki/Adler-32#Example_implementation)

```
#define MOD 65521;

unsigned long adler(int array[], int size){
  int i;
  unsigned long a=1;
  unsigned long b=0;
  for(i=0;i<size;i++){
    a=(a+array[i])%MOD;
    b=(b+a)%MOD;
  }
  return (b <<16) | a;
} 
```

这也行不通。数组 [2,0,3,1] 和 [1,3,0,2] 生成相同的校验和。我在这里失去了希望，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T10:17:15.783

让我们以您的 25 个整数数组为例。你解释说它可以包含唯一整数 0 到 24 的任何排列。根据[这个页面](http://en.wikipedia.org/wiki/Permutation)，有 25！（25 个阶乘）可能的排列，即 15511210043330985984000000。远远超过 32 位整数可以包含的内容。

结论是，无论你怎么努力，都会发生碰撞。

现在，这是一个解释位置的简单算法：

```
int checksum(int[] array, int size) {
  int c = 0;
  for(int i = 0; i < size; i++) {
    c += array[i];
    c = c << 3 | c >> (32 - 3); // rotate a little
    c ^= 0xFFFFFFFF; // invert just for fun
  }
  return c;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:10:36.130

我认为您想要的是以下线程的答案：

[快速排列 -> 数字 -> 排列映射算法](https://stackoverflow.com/questions/1506078/fast-permutation-number-permutation-mapping-algorithms)

您只需将排列映射到的数字作为校验和。由于每个排列只有一个校验和，因此不可能有更小的无冲突校验和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-15T08:21:43.100

加权和的校验和怎么样？让我们以 [0,1,2,3] 为例。首先选择种子和限制，我们选择种子为 7，限制为 10000007。

```
a[4] = {0, 1, 2, 3}
limit = 10000007, seed = 7
result = 0
result = ((result + a[0]) * seed) % limit = ((0 + 0) * 7)) % 10000007 = 0
result = ((result + a[1]) * seed) % limit = ((0 + 1) * 7)) % 10000007 = 7
result = ((result + a[2]) * seed) % limit = ((7 + 2) * 7)) % 10000007 = 63
result = ((result + a[3]) * seed) % limit = ((63 + 3) * 7)) % 10000007 = 462 
```

对于 [0, 1, 2, 3]，您的校验和为 462。参考是[http://www.codeabbey.com/index/wiki/checksum](http://www.codeabbey.com/index/wiki/checksum)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T08:47:55.803

据我了解，您的数组包含从 0 到`N-1`. 一种有用的校验和是数组在其字典顺序中的排名。这是什么意思 ？鉴于`0, 1, 2` 您有可能的排列

```
 1: 0, 1, 2
  2: 0, 2, 1
  3: 1, 0, 2
  4: 1, 2, 0
  5: 2, 0, 1
  6: 2, 1, 0 
```

校验和将是第一个数字，并在您创建数组时计算。中提出了解决方案

[按字典顺序在排列列表中查找给定排列的索引](https://stackoverflow.com/questions/5921860/find-the-index-of-a-given-permutation-in-the-list-of-permutations-in-lexicograph)

这可能会有所帮助，尽管最好的算法似乎具有二次复杂度。要将其提高到线性复杂度，您应该事先缓存阶乘的值。

优势？零碰撞。

***编辑：计算*** 该值就像多项式的评估，其中阶乘用于单项式而不是幂。所以函数是

```
f(x0,....,xn-1) = X0 * (0!) + X1 * (1!) + X2 * (2!) +...+ Xn-1 * (n-1!) 
```

这个想法是使用每个值来获得排列的子范围，并使用足够的值来确定唯一的排列。

现在用于实现（如多项式之一）：

1.  预计算 0!.... 到 n-1！在程序开始时
2.  每次设置数组时，您都使用 f(elements) 来计算其校验和
3.  您使用此校验和在 O(1) 中进行比较

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T06:39:01.773

对于从 1 到 N 的 N 个唯一整数的数组，只需将元素相加将始终为 N*(N+1)/2。因此，唯一的区别在于排序。如果通过“校验和”暗示您可以容忍一些冲突，那么一种方法是将连续数字之间的差异相加。例如，{1,2,3,4} 的 delta 校验和为 1+1+1=3，但 {4,3,2,1} 的 delta 校验和为 -1+-1+-1= -3。

没有对碰撞率或计算复杂性给出要求，但如果上述不适合，那么我建议使用与[位置相关的校验和](http://en.wikipedia.org/wiki/Checksum#Position-dependent_checksums)

# asp.net - 如何为文本框设置默认文本并使其仅在用户键入内容时消失

> ID：10892478
> 
> 赞同：1
> 
> 时间：2012-06-05T06:13:57.977
> 
> 标签：asp.net, textbox

我的联系表单有 Asp.Net 文本框。如何为我的文本框设置默认文本，并在用户键入内容而不是焦点时使文本消失，就像 SO 搜索框一样。我认为它是不同于文本框水印。欢迎提出任何建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:25:45.917

我建议 为此使用[AJAXTOOLKIT](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)

特别是[TextBoxWatermark](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:25:53.920

您可以使用 Ajax Toolkit [TextBoxWatermark Extender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:26:06.753

这并不能回答您的问题，但可以纠正您的部分问题。

> 就像 SO 搜索框一样

SO 搜索框使用[HTML 5 占位符属性](http://dev.w3.org/html5/spec/common-input-element-attributes.html#the-placeholder-attribute)，您看到的功能是特定于 Chrome 的。

> **当元素的值为空字符串和/或控件未聚焦**时（例如，通过在空白的未聚焦控件中显示它并以其他方式隐藏它），用户代理应在从中剥离换行符后向用户呈现此提示。

粗体部分表示如果值为空和/或未聚焦，则该功能应删除占位符文本。

Chrome 已决定将其实现为“当它不为空时，删除占位符”，但如果文本框聚焦且为空，则占位符仍然存在。

其他浏览器 (IE/Firefox/Opera) 会删除焦点占位符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T06:30:18.487

[您可以在 ajax 控件工具包中使用 TextBoxWatermark 来实现](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)

# java - 如何识别 ObjectInputStream 是否有可用对象？

> ID：10892481
> 
> 赞同：4
> 
> 时间：2012-06-05T06:14:14.993
> 
> 标签：java, sockets, serialization

`NullPointerException`尝试识别序列化对象是否可用并使用套接字接收它时出错。如何识别是否`ObjectInputStream`有可用对象？首先，我尝试阅读文本，然后尝试从可能不存在的同一个套接字 Lot 对象（）中读取。

```
 public class ThreadIn extends Thread{
        BufferedReader in;
            PrintStream outConsole;
            Socket socket;
            ObjectInputStream ois;
            String str;
            Lot lot;
ThreadIn(BufferedReader input, PrintStream inOutput, Socket s){
        str = "";
        in= input;
        socket= s;
        try {
            ois = new ObjectInputStream(socket.getInputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }

        outConsole = inOutput;

    }
    public void run() {

            while(!EXIT_THREAD){
            try {
        if(in.ready()){
            try {
                str= in.readLine();
                    Thread.sleep(100);
                } catch (IOException e) {
                EXIT_THREAD= true;
                break;
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                outConsole.println("Received:"+str);

                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
            try {
                if((Lot)ois.readObject() != null){      
                    lot = (Lot)ois.readObject(); 
                    if (lot!=null){outConsole.println(lot.toString());} 
                    outConsole.println((String)ois.readObject());
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:29:57.210

```
if((Lot)ois.readObject() != null) 
```

这部分本身从 Socket 读取对象。因此，您在代码中从 Socket 读取对象的 3 倍。如果您只有一个或多个对象进入套接字，您可以读取该对象并捕获异常！。就像下面一样

```
 //..loop start
         try {
                lot = (Lot)ois.readObject(); 
             }
         catch (Exception e) 
           { 
//      do some handling, skip the object! put a continue: or something

            }
    //do what ever you want to do with `lot`

    //..loop end 
```

现在，根据您的代码，您还没有初始化您的`ObjectInputStream`对象。

做一个`ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());`

如果您在这里省略了代码，那是我的错误，否则请也初始化套接字！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:00:19.710

根据其他答案，包括已删除的答案，您调用`readObject()`了两次并丢弃了第一个结果。您应该重新组织您的代码，以便它可以阻止`readObject()`.

你还有其他问题。您正在测试`readObject()`for的结果`null?`，但仅当您在发件人处`null`写了 a时才会返回。`null`我怀疑您将其用作 EOS 测试，但它是无效的。`readObject()`向 EOS投掷`EOFException`。您应该重新组织您的代码，以便它可以阻止`readObject()`.

# javascript - 使用 JQuery 仅选择具有特定 CSS 属性的元素

> ID：10892482
> 
> 赞同：1
> 
> 时间：2012-06-05T06:14:16.103
> 
> 标签：javascript, jquery, html

好的，我有这个代码

```
 $("#search-results-all").children(".search-result-item").length; 
```

现在，我只想选择仅`.search-result-item`通过使用 css 属性可见的元素`visibility:visible`。现在我怎样才能做到这一点？

PS对不起，我不知道在谷歌中输入什么，所以我可以开始搜索。

更新...

好吧，它通过做这样的事情起作用

```
$("#search-results-all").children(".search-result-item:visible").length; 
```

谢谢你的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:17:01.033

以下？

```
$("#search-results-all > .search-result-item").filter(function() {
   return $(this).css('visibility') == 'visible';
}).length; 
```

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:17:14.823

试试这个：

```
$("#search-results-all .search-result-item").filter(function() {
  return $(this).css('visibility') == 'visible';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:16:58.673

[**`:visible Selector`**](http://api.jquery.com/visible-selector/)- 选择所有可见的元素。

```
$("#search-results-all").children(".search-result-item:visible").length; 
```

或者

```
$("#search-results-all").children(".search-result-item")).is(':visible'); 
```

# android - 保存到 sqlite 数据库时出错

> ID：10892483
> 
> 赞同：0
> 
> 时间：2012-06-05T06:14:17.303
> 
> 标签：android, database, sqlite

我的错误日志

```
 06-05 05:56:04.502: D/HealthlyLifestyleAppMain(278): Opened DB in onCreate
    06-05 05:56:04.522: D/HealthlyLifestyleAppMain(278): Loading DB contents: 29 items
    06-05 05:56:04.541: D/HealthlyLifestyleAppMain(278): Loading DB contents: 0 items
    06-05 05:56:04.541: D/HealthlyLifestyleAppMain(278): Closed DB in onCreate        
    06-05 05:56:06.451: D/HealthlyLifestyleAppMain(278): Opened DB in onPause
    06-05 05:56:06.532: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2888
    06-05 05:56:06.551: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2948
    06-05 05:56:06.571: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef29c0
    06-05 05:56:06.591: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2a38
    06-05 05:56:06.611: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2ab0
    06-05 05:56:06.621: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2b28
    06-05 05:56:06.641: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2ba0
    06-05 05:56:06.661: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2c18
    06-05 05:56:06.681: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2c90
    06-05 05:56:06.701: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2d08
    06-05 05:56:06.721: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2d80
    06-05 05:56:06.751: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2df8
    06-05 05:56:06.761: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2e70
    06-05 05:56:06.771: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2f48
    06-05 05:56:06.822: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef2fc0
    06-05 05:56:06.831: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3038
    06-05 05:56:06.875: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef30b0
    06-05 05:56:06.892: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3128
    06-05 05:56:06.901: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef31a0
    06-05 05:56:06.912: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3298
    06-05 05:56:06.931: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3310
    06-05 05:56:06.961: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3388
    06-05 05:56:06.971: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3400
    06-05 05:56:06.981: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3478
    06-05 05:56:06.991: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef34f0
    06-05 05:56:07.021: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3568
    06-05 05:56:07.051: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef35e0
    06-05 05:56:07.062: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3658
    06-05 05:56:07.071: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44ef3788
    06-05 05:56:07.081: D/HealthyLifestyleAppMain(278): Saved item: sg.edu.tp.iit.mns.LogItem@44f1ee10
    06-05 05:56:07.111: D/HealthlyLifestyleAppMain(278): Closed DB in onPause
    06-05 05:56:15.462: D/dalvikvm(278): GC_FOR_MALLOC freed 4966 objects / 257248 bytes in 118ms
    06-05 05:56:59.081: W/KeyCharacterMap(278): No keyboard for id 0
    06-05 05:56:59.081: W/KeyCharacterMap(278): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
    06-05 05:57:38.452: I/Database(278): sqlite returned: error code = 1, msg = table fruitTable has no column named _fruitcalorie
    06-05 05:57:38.552: E/Database(278): Error inserting _fruitname=Apple _fruitnum=2 _fruitcalorie=160
    06-05 05:57:38.552: E/Database(278): android.database.sqlite.SQLiteException: table fruitTable has no column named _fruitcalorie: , while compiling: INSERT INTO fruitTable(_fruitname, _fruitnum, _fruitcalorie) VALUES(?, ?, ?);
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
    06-05 05:57:38.552: E/Database(278):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
    06-05 05:57:38.552: E/Database(278):    at sg.edu.tp.iit.mns.FruitDB.createEntry(FruitDB.java:74)
    06-05 05:57:38.552: E/Database(278):    at sg.edu.tp.iit.mns.Fruit$3$1.launchIntent2(Fruit.java:133)
    06-05 05:57:38.552: E/Database(278):    at sg.edu.tp.iit.mns.Fruit$3$1.onClick(Fruit.java:120)
    06-05 05:57:38.552: E/Database(278):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:158)
    06-05 05:57:38.552: E/Database(278):    at android.os.Handler.dispatchMessage(Handler.java:99)
    06-05 05:57:38.552: E/Database(278):    at android.os.Looper.loop(Looper.java:123)
    06-05 05:57:38.552: E/Database(278):    at android.app.ActivityThread.main(ActivityThread.java:4627)
    06-05 05:57:38.552: E/Database(278):    at java.lang.reflect.Method.invokeNative(Native Method)
    06-05 05:57:38.552: E/Database(278):    at java.lang.reflect.Method.invoke(Method.java:521)
    06-05 05:57:38.552: E/Database(278):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    06-05 05:57:38.552: E/Database(278):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    06-05 05:57:38.552: E/Database(278):    at dalvik.system.NativeStart.main(Native Method) 
```

我的java文件

```
 public class Fruit extends Activity implements OnClickListener, OnItemSelectedListener {
private TextView tvFruit, tvNo,tvtotal;
Context context=this;   
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //for fullscreen view
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.fruit);

    tvFruit = (TextView) findViewById(R.id.tvfruit);
    tvNo = (TextView) findViewById(R.id.tvno);
    tvtotal = (TextView)findViewById(R.id.tvtotal);

    final Spinner fruits = (Spinner)findViewById(R.id.spin_fruit);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this,R.array.fruits,android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    fruits.setAdapter(adapter);
    fruits.setOnItemSelectedListener(this);

    fruits.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
    long arg3) {
            // TODO Auto-generated method stub
            String selectedItem = fruits.getSelectedItem().toString();
            tvFruit.setText(selectedItem);

        }

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    });

    final Spinner num = (Spinner)findViewById(R.id.spin_no);
    ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(
            this,R.array.total,android.R.layout.simple_spinner_item);
    adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    num.setAdapter(adapter1);
    num.setOnItemSelectedListener(this);

    num.setOnItemSelectedListener(new OnItemSelectedListener(){
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
                // TODO Auto-generated method stub
                String selectedItem = num.getSelectedItem().toString();
                tvNo.setText(selectedItem);
                tvtotal.setText(String.valueOf(calculateCalories()));
            }

        public int calculateCalories() {
            int[] calorie = getResources().getIntArray(R.array.calorie);
            return Integer.parseInt((String) num.getSelectedItem()) * calorie[fruits.getSelectedItemPosition()];
        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

        });

    Button save = (Button) findViewById(R.id.bsave);
    save.setTextColor(Color.BLUE);
    save.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                // Get the subject details and show it in an alertdialog
                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                builder.setMessage("Success");
                builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        launchIntent2();
                    }

                    private void launchIntent2() {
                        // TODO Auto-generated method stub

                        try{
                        String fruit =tvFruit.getText().toString();
                        String number =tvNo.getText().toString();
                        String calorie =tvtotal.getText().toString();

                        FruitDB entry = new FruitDB(Fruit.this);
                        entry.open();
                        entry.createEntry(fruit, number, calorie);
                        entry.close();
                        }
                        catch(Exception e){

                        }
                    }
                });

                builder.setNegativeButton("View Log", new DialogInterface.OnClickListener(){

                    public void onClick(DialogInterface dialog, int which) { // this part is done for the negative button 
                                                                             // if we want it to link to new intent
                        launchIntent();
                    }

                });
                builder.create().show();
            }

            //making the "View Log" button in dialog box to go to new intent FruitLog.class
            private void launchIntent(){
                Intent i = new Intent(Fruit.this, FruitLog.class);
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }

        });

    } 
```

我的数据库文件：

```
 public class FruitDB extends Activity{

public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "_fruitname";
public static final String KEY_NUMBER = "_fruitnum";
public static final String KEY_CALORIE = "_fruitcalorie";

private static final String DATABASE_NAME = "Fruitdb";
private static final String DATABASE_TABLE = "fruitTable";
private static final int DATABASE_VERSION = 1;

private DbHelper newHelper;
private final Context ourContext1;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }   

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                    KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_NAME + " TEXT NOT NULL, " +
                    KEY_NUMBER + " TEXT NOT NULL, " +
                    KEY_CALORIE + " TEXT NOT NULL);" 
                );
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }   
}

public FruitDB(Context c){
    ourContext1 = c;
}

public FruitDB open()throws SQLException{
    newHelper = new DbHelper(ourContext1);
    ourDatabase = newHelper.getWritableDatabase();
    return this;
}

public void close(){
    newHelper.close();
}

public long createEntry(String fruit, String number, String calorie) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_NAME, fruit);
    cv.put(KEY_NUMBER, number);
    cv.put(KEY_CALORIE, calorie);
    return ourDatabase.insert(DATABASE_TABLE, null, cv);

}

public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_NUMBER, KEY_CALORIE};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iRow = c.getColumnIndex(KEY_ROWID);
    int iName = c.getColumnIndex(KEY_NAME);
    int iRating = c.getColumnIndex(KEY_NUMBER);
    int iCalorie = c.getColumnIndex(KEY_CALORIE);

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        //result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iRating) + " \n";
        result = result + c.getString(iRow) + " " + c.getString(iName) + " " + c.getString(iRating) + " " + c.getString(iCalorie) + " \n";
                }
    return result;
}   
} 
```

当我尝试将总卡路里插入我的数据库时出现错误。在获得总卡路里之前，它是有效的。我不确定错误。有人请在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:22:37.777

如果您更新了表结构并添加了新列，那么您需要卸载应用程序并重新安装以使更改生效。

要卸载转到设置->应用程序->管理应用程序->选择您的应用程序->卸载/ClearData

# vb.net - 为什么我在表单中找不到上下文菜单条？

> ID：10892486
> 
> 赞同：0
> 
> 时间：2012-06-05T06:14:25.490
> 
> 标签：vb.net, object, controls

我试图在我的表单中找到我的上下文菜单条，但我的代码似乎没有显示我想要的输出......这是我的代码：

```
Dim omnuStrip() As Object = oCollection.controls.find("mnuStrip", True)
Dim mnuStrip_ as ContextMenuStrip = DirectCast(omnuStrip,ContextMenuStrip)
mnuStrip_.Tag = "My Control" 
```

它总是返回一个空的对象数组......我在这里做错了吗？请帮忙..谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:37:06.123

ContextMenuStrips 被添加到组件，而不是控件，这就是你得到一个空数组的原因。

```
Dim strip As ContextMenuStrip = Nothing

For Each component As Object In components.Components
    strip = TryCast(component, ContextMenuStrip)
    If strip IsNot Nothing Then Exit For
Next 
```

# iphone - Combining ARC and non-ARC files not working

> ID：10892487
> 
> 赞同：3
> 
> 时间：2012-06-05T06:14:39.953
> 
> 标签：iphone, ios, xcode, automatic-ref-counting

Once I add the -fno-objc-arc flag to one or more individual files in Build Phases, my MyProject-Prefix.pch file is thrown into non-ARC mode, causing 150 warnings like "warning: no 'assign', 'retain', or 'copy' attribute is specified - 'assign' is assumed" to be thrown.

Here's the clang log output from compiling MyProject-Prefix.pch. As you can see, the -fobjc-arc flag appears, but later on, -no-fobjc-arc is added, which I'm assuming overrides ARC. This only happens if I add -fno-objc-arc to a single .m source file in Build Phases (the standard advice that everyone gets to mix ARC and non-ARC files).

Any ideas?

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -fexceptions -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.6 -g -Wno-conversion -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -iquote /Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/MyProject.build/Debug-iphonesimulator/MyProject.build/MyProject-generated-files.hmap -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/MyProject.build/Debug-iphonesimulator/MyProject.build/MyProject-own-target-headers.hmap -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/MyProject.build/Debug-iphonesimulator/MyProject.build/MyProject-all-target-headers.hmap -iquote /Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/MyProject.build/Debug-iphonesimulator/MyProject.build/MyProject-project-headers.hmap -iquoteOAuth2Client -iquoteOAuth2Client/Sources -iquoteOAuth2Client/Sources/OAuth2Client -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Products/Debug-iphonesimulator/include -I../../Source/facebook-ios-sdk/src -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Products/Debug-iphonesimulator/../three20 -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Products/Debug-iphonesimulator/../../three20 -I../../Source/three20/Build/Products/three20 -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/MyProject.build/Debug-iphonesimulator/MyProject.build/DerivedSources/i386 -I/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/MyProject.build/Debug-iphonesimulator/MyProject.build/DerivedSources -F/Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Products/Debug-iphonesimulator -F/Users/steve/Desktop/MyProject/YelpAPI/Frameworks -fno-objc-arc --serialize-diagnostics /Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/PrecompiledHeaders/MyProject-Prefix-eouuweehlrhtjxdsrgwseamnhnna/MyProject-Prefix.pch.dia -c /Users/steve/Desktop/MyProject/MyProject/MyProject-Prefix.pch -o /Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/PrecompiledHeaders/MyProject-Prefix-eouuweehlrhtjxdsrgwseamnhnna/MyProject-Prefix.pch.pth -MMD -MT dependencies -MF /Users/steve/Library/Developer/Xcode/DerivedData/MyProject-ajtusdfivjqtabgvzfuzqifdjuis/Build/Intermediates/PrecompiledHeaders/MyProject-Prefix-eouuweehlrhtjxdsrgwseamnhnna/MyProject-Prefix.pch.d 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T14:42:53.057

这只是可以预料的。您的`.pch`文件很有可能包含一些在非 ARC 模式下编译时会导致警告的定义。很可能非 arc 编译的文件也会使用预编译的头文件，因此文件中的头`.pch`文件应该在 ARC 和非 ARC 模式下都可以编译（毕竟，PCH 机制在语义上等同于将`#imports`文件`.pch`的每个`.m`文件）。

我会说这是 XCode 的一个错误，如果它在所有非 ARC 编译文件都明确排除 PCH 编译模型时仍然给出这些警告。显然你不能关闭 XCode 下单个文件的预编译头文件的使用（就像你可以用 MS 的 VisualC++ 做的那样），所以我能给你的唯一建议是让你的`.pch`文件中的类同时兼容 ARC 和非ARC编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T15:56:37.547

我在尝试标记我的两个 .m 文件时遇到了同样的错误

```
-fno-objc-arc 
```

，并且找不到解决方案，所以我只是将“Objective-C Automatic Reference Counting”变量设置为“No”并添加了

```
-fobjc-arc 
```

所有使用 ARC 的 .m 文件的编译器标志。这对我有用。

# php - How to write regular expression for this kind of a string?

> ID：10892489
> 
> 赞同：0
> 
> 时间：2012-06-05T06:14:41.983
> 
> 标签：php, regex

I will get this kind of string from the `$_POST` array:

```
$string = "\"Search Text\""; 
```

OR

```
$string = '\'Search Text\''; 
```

How I will check whether the Search Text included in double quotes or single quotes using regular expression.

* * *

Base on Kolink Answer I did like this

```
echo $subject = "'Search Text'";
$pattern = "/['\"](?=;$)/";
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE, 3);
print_r($matches); 
```

Its not giving any result. :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:17:36.450

因此，为了澄清，您的用户将`$string = "Search Text";`在文本框中发送类似的内容？或者这只是您的服务器端代码的一部分？

如果是第一个，您只需搜索`/['"](?=;$)/`，它就会告诉您使用的是单引号还是双引号。

如果是第二个，那么您的问题毫无意义，因为引号不是字符串的一部分。

# django - Django url dispatcher page not found

> ID：10892490
> 
> 赞同：1
> 
> 时间：2012-06-05T06:14:42.183
> 
> 标签：django, django-urls

i am trying to define a url pattern in django urls.py like

```
 url(r'^networking$','mysite1.networking.views.networking'), 
```

when i am typing [http://myhost.com/networking](http://myhost.com/networking) in my address bar to go to networking page

i am getting 404 error and a slash '/' automatically added to the address bar like

[http://myhost.com/networking/](http://myhost.com/networking/)

help me out what i am doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:20:12.807

您可能没有正确包含您的 urlconf。您看到的行为是因为 [APPEND_SLASH](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash)在 Django 无法解析 url 时默认设置为 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:20:08.507

似乎您的 Apache 服务器或某些 Django 中间件正在添加斜杠。您可以更正这一点，或者更好的方法是您可以使用以下 url 模式：

```
url(r'^networking/?$','mysite1.networking.views.networking'), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:47:39.813

要么将 Append_Slash 设置为 false，默认情况下为 true，要么使用下面给出的 url 描述，将带有斜杠的 url 重定向到所需的视图。

url(r'^networking/$','mysite1.networking.views.networking'),

# git - Download files from git remote repository

> ID：10892497
> 
> 赞同：2
> 
> 时间：2012-06-05T06:15:04.977
> 
> 标签：git

So this is the thing: I've got a process that should download files from git remote repository and deploy them onto destination server which does not have a git installed on.

In addition, I should be able to download the files based on a given git tag and only the HEAD.

What is the best way to such thing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:35:50.773

为了实现 git 远程 repo 内容和目标之间的简单复制，您可以考虑使用**[`git archive`](http://schacon.github.com/git/git-archive.html)**.
请参阅“[本周 Git 提示：Git 存档](http://alblue.bandlem.com/2011/09/git-tip-of-week-git-archive.html)”

> 使用 Git 而不是命令行工具执行存档的一个关键优势是避免意外捕获（大）.git 目录或任何正在进行的内容。例如，如果您刚刚运行了构建，那么 zip (tar) 也将包含构建输出的内容。
> 
> 另一个优点是您可以在**任意版本**中提取存储库的内容。

另外，通过网络复制一个文件比 rsync 大量文件更不容易出错。

# performance - Query taking hell lot of time

> ID：10892505
> 
> 赞同：0
> 
> 时间：2012-06-05T06:15:58.257
> 
> 标签：performance, oracle, stored-procedures, timeout

our system is quite big having around 100+ tables in schema. There was one business requirement for which we decided to handle it in stored procedures. In our application we have java as well but we chosen to use Stored Procedure. IN order to fulfill requirement created 3 functions. These functions are part of SQL query which get fired to fetch count and display records. Now we have SQL timeout set in connection which is set to 60 seconds. when we run this query for records of 40K, the operation gets timed out and we don't get any result. I am pasting here actual implementation of all these 3 functions and below them is query who makes use of all these created function.

In query below have marked function calling in Bold letter.

I am looking at your expert advice by which i can tune this implementation to work on 100K of data. we have oracle 11gR1.. Even this implementation is access from web in Ajax call.

Do let me know if you need anything else.

```
CREATE INDEX IDX_SNM_ENTITY_NAME
  ON SML_NOTIFICATION_MAIN(ENTITY_NAME)
  TABLESPACE CM_INDEX;

CREATE OR REPLACE FUNCTION is_Users_In_Same_Business_Unit
    (UserMasterId varchar2,
     CtoCode varchar2)       
  RETURN boolean
IS 
  v_count number(4);       
BEGIN
  if CtoCode is not null then       
    select count(*) into v_count
      from sml_user u,
           sml_team_member tm,
           sml_usrprof_cto_map ctomap,
           code_value cv
      where u.status = 'ACTIVE'
        and u.master_id is null
        and u.id = tm.user_id
        and tm.profile_id = ctomap.user_profile_id
        and ctomap.cto_code_id = cv.id
        and cv.code_value = CtoCode
        and tm.team_id in
              (select child_id
                 from vw_team_relation_master a
                 connect by prior a.child_id = a.parent_id
                 start with a.child_id =
                   (select child_id
                      from vw_team_relation_master c
                      where parent_id is null
                      start with c.child_id =
                        (select t.id
                           from sml_team t,
                                sml_team_member tm
                           where t.id = tm.team_id
                             and t.status = 'ACTIVE'
                             and t.master_id is null
                             and tm.user_id = UserMasterId) 
                      connect by prior c.parent_id = c.child_id));

    if v_count is not null and v_count > 0 then
      return TRUE;
    else
      return FALSE;
    end if;       
  end if;        

  return FALSE;           
END;

CREATE OR REPLACE FUNCTION Can_User_Access_Customer(
      NotificationDesc            VARCHAR2,
      UserId                      VARCHAR2,
      NotificationType            VARCHAR2,
      UserRoleCode                VARCHAR2,
      UserMasterId                VARCHAR2,
      CtoCode                     VARCHAR2,
      SecCtoCode                  VARCHAR2,
      UserProfTempIdCommercialInd VARCHAR2,
      UserProfTempIdCorporateInd  VARCHAR2,
      UserProfTempStcfInd         VARCHAR2,
      UserProfTempIdGsamInd       VARCHAR2)
    RETURN BOOLEAN
IS
  -- function to test is user can access customer
  regSearchCount                number(2);
  in_same_unit                  boolean;
  count_v                       number(2);
BEGIN
  in_same_unit := is_Users_In_Same_Business_Unit(UserMasterId, CtoCode);

  -- Commercial    

  select count(*)
    into regSearchCount
    from dual
    where regexp_like (CtoCode,'200[3-9]|20[1-4][0-9]|2[1-6][0-6][0-9]|29[0-6][0-9]|300[1-9]|30[1-6][0-9]|3[1-9][0-6][0-9]');        

  IF regSearchCount > 0 then -- user is commercial
    -- check secondary cto code holder
    select count(*)
      into count_v
      from dual
      where SecCtoCode IN
        (SELECT DISTINCT code_value
           FROM sml_user,
                sml_team_member,
                sml_user_profile,
                sml_usrprof_cto_map,
                code_value
           WHERE sml_user.id = sml_team_member.user_id
             AND sml_team_member.profile_id = sml_user_profile.id
             AND sml_user_profile.id = sml_usrprof_cto_map.user_profile_id
             AND sml_usrprof_cto_map.cto_code_id = code_value.id
             AND sml_user.login_id = UserId);

    IF count_v is not null AND
       count_v > 0
    then
      return TRUE;
    END IF;

    IF NotificationType='Collateral' AND
       UserRoleCode is not null AND
       UserRoleCode='RLOC'
    then -- user is rloc
      RETURN TRUE;
    END IF;

    IF in_same_unit AND
       UserRoleCode is not null AND
       UserRoleCode IN ('RMTL','GRPHD','SECHD')
    then -- user belongs to GH, SH etc          
      RETURN TRUE;
    END IF;
  END IF;     

  -- corporate

  select count(*)
    into regSearchCount
    from dual
    where regexp_like (CtoCode,'1[0-9][0-6][0-9]');

  IF regSearchCount > 0 then
    IF in_same_unit and UserRoleCode is not null AND
       UserRoleCode='GRPHD' AND
       NotificationDesc!='0 days Due for expiry of Collateral'
     THEN -- user belongs to GH          
        RETURN TRUE;                    
    END IF;

    IF in_same_unit AND
       UserRoleCode is not null AND
       UserRoleCode='RMTL' AND
       NotificationDesc='0 days Due for expiry of Collateral'
    THEN
        RETURN TRUE;                    
    END IF;
  END IF;    

  -- STCF     

  select count(*)
    into regSearchCount
    from dual
    where regexp_like (CtoCode, '20[5-6][0-9]');

  IF regSearchCount > 0 then      
    IF in_same_unit AND
       UserRoleCode is not null AND
       UserRoleCode = 'RMTL'
    then
      RETURN TRUE;          
    END IF;
  END IF;    

  RETURN FALSE ;
END;

create or replace FUNCTION IS_NOTIFICATION_ACCESS_PASSED(
      NotificationDesc            VARCHAR2,
      UserId                      VARCHAR2,
      NotificationType            VARCHAR2,
      UserMasterId                VARCHAR2,
      UserRoleCode                VARCHAR2,
      CtoCode                     VARCHAR2,
      SecCtoCode                  VARCHAR2,
      UserProfTempIdCommercialInd VARCHAR2,
      UserProfTempIdCorporateInd  VARCHAR2,
      UserProfTempStcfInd         VARCHAR2,
      UserProfTempIdGsamInd       VARCHAR2)
    RETURN VARCHAR2 DETERMINISTIC
IS
  -- functions to test, is instance of notification viewable for the logged in user, on the basis of notification type
  -- and other user details etc, currently defined for only type 'Collateral' and 'Implementation Instruction'

  regSearchCount NUMBER(2);
  count_v NUMBER(2);       
BEGIN
  IF NotificationType = 'Implementation Instruction' THEN
    IF Can_User_Access_Customer(NotificationDesc,UserId,
                                NotificationType
                                UserRoleCode,UserMasterId
                                CtoCode,SecCtoCode,
                                UserProfTempIdCommercialInd,
                                UserProfTempIdCorporateInd,
                                UserProfTempStcfInd,
                                UserProfTempIdGsamInd)
    THEN
      IF UserRoleCode = 'LDU' THEN
        SELECT COUNT(*)
          INTO regSearchCount
          FROM dual
          WHERE regexp_like (CtoCode,'1[0-9][0-6][0-9]');

        IF regSearchCount >0 THEN
          RETURN 'TRUE';
        ELSE
          RETURN 'FALSE';
        END IF;
      ELSE
        RETURN 'TRUE';
      END IF;
    END IF;
  END IF;

  IF NotificationType = 'Collateral' THEN
    IF UserRoleCode   ='WLOC' THEN
      RETURN 'TRUE';
    END IF;

    -- check primary cto code holder

    select count(*)
      into count_v
      from dual
      where CtoCode IN
        (SELECT DISTINCT code_value
           FROM sml_user,
                sml_team_member,
                sml_user_profile,
                sml_usrprof_cto_map,
                code_value
           WHERE sml_user.id = sml_team_member.user_id
             AND sml_team_member.profile_id = sml_user_profile.id
             AND sml_user_profile.id = sml_usrprof_cto_map.user_profile_id
             AND sml_usrprof_cto_map.cto_code_id = code_value.id
             AND sml_user.login_id = UserId);

    IF count_v is not null and count_v > 0 then
      return 'TRUE';
    END IF;

    -- check all other conditions

    IF Can_User_Access_Customer(NotificationDesc,UserId,NotificationType,
                                UserRoleCode,UserMasterId,CtoCode,
                                SecCtoCode,UserProfTempIdCommercialInd,
                                UserProfTempIdCorporateInd,
                                UserProfTempStcfInd,
                                UserProfTempIdGsamInd) THEN
      RETURN 'TRUE';
    END IF;
  ELSE
    RETURN 'TRUE';
  END IF;

  RETURN 'FALSE';
END; 
```

The query:

```
select *
  FROM SML_NOTIFICATION_MAIN notification
  where notification.DEPRECATED='N'  and
        (MAKER_ID = 'see_rm'  OR
         TO_CHAR(CTO_CODE) IN
           (SELECT DISTINCT code_value
              FROM sml_user, 
                   sml_team_member,
                   sml_user_profile,
                   sml_usrprof_cto_map,
                   code_value
              WHERE sml_user.id = sml_team_member.user_id AND
                    sml_team_member.profile_id = sml_user_profile.id AND
                    sml_user_profile.id = sml_usrprof_cto_map.user_profile_id AND
                    sml_usrprof_cto_map.cto_code_id = code_value.id AND
                    sml_user.login_id = 'see_rm' AND
                    Entity_Name != 'Collateral') OR
        TO_CHAR(SEC_CTO_CODE) IN
          (SELECT DISTINCT code_value
             FROM sml_user, 
                  sml_team_member,
                  sml_user_profile,
                  sml_usrprof_cto_map,
                  code_value 
             WHERE sml_user.id = sml_team_member.user_id AND 
                   sml_team_member.profile_id = sml_user_profile.id AND
                   sml_user_profile.id = sml_usrprof_cto_map.user_profile_id AND
                   sml_usrprof_cto_map.cto_code_id = code_value.id AND
                   Entity_Name != 'Collateral' AND
                   sml_user.login_id ='see_rm') OR
        ROLE_CODE in (select distinct CODE
                        from sml_user a,
                             code_value b
                        where a.role_id = b.id AND
                              login_id = 'see_rm') OR
        SUBSTR(ROLE_CODE, 1, 4) in (select distinct CODE
                                    from sml_user a,
                                         code_value b
                                    where a.role_id = b.id AND
                                          login_id = 'see_rm') OR
        SUBSTR(ROLE_CODE, 6, 4) IN (select distinct CODE
                                      from sml_user a,
                                           code_value b
                                      where ENTITY_NAME = 'Insurance' OR
                                            ENTITY_NAME = 'Collateral' AND
                                            a.role_id = b.id AND
                                            login_id = 'see_rm') OR
        SUBSTR(ROLE_CODE, 11, 2) IN (select distinct CODE
                                       from sml_user a,
                                            code_value b
                                       where a.role_id = b.id AND
                                             login_id = 'see_rm') OR 
        TEAM_LEAD in (select to_char(a.id)
                        from sml_user a
                        where Entity_Name != 'Collateral' AND
                              a.login_id = 'see_rm') OR
        RM_ID in (select to_char(a.id)
                    from sml_user a
                    where Entity_Name != 'Collateral' AND
                          ENTITY_NAME = 'PostApproval CP/Covnent' AND
                          DESCRIPTION != '30 days before due date' AND
                          a.login_id = 'see_rm') OR
        (Entity_Name != 'Collateral' AND
         RM_ID in (Select Rm_Id
                     From Vw_Sm_Rm_Team_Lead
                     Where Vw_Sm_Rm_Team_Lead.Rmtl_Id IN
                       (Select To_Char(A.Id)
                          From Sml_User A
                          Where A.Login_Id = 'see_rm'))) OR
        (Entity_Name = 'Enquiry' AND
         RM_ID IN (SELECT BCA_ID
                     FROM VW_SM_BCA_TEAM_LEAD
                     WHERE VW_SM_BCA_TEAM_LEAD.BCATL_ID IN
                       (SELECT TO_CHAR(A.Id)
                          FROM Sml_User A 
                          WHERE A.Login_Id = 'see_rm'))) OR
         GROUP_HEAD in (select to_char(a.id)
                          from sml_user a
                          where a.login_id = 'see_rm' AND
                                Entity_Name != 'Collateral') OR
        (Entity_name != 'Collateral' AND
         SECTOR_HEAD like ('%,'|| (select to_char(a.id) || ',' as ID
                                     from sml_user a
                                     where a.login_id = 'see_rm' AND
                                           status='ACTIVE' AND
                                           master_id is null) || '%')) OR
        (Entity_Name = 'Collateral' AND
         IS_NOTIFICATION_ACCESS_PASSED(DESCRIPTION,
                                       'see_rm',
                                       Entity_Name,
                                       '1176',
                                       'RM',
                                       TO_CHAR(CTO_CODE),
                                       TO_CHAR(SEC_CTO_CODE),
                                       'N','N','N','N') = 'TRUE') OR
        (RM_ID in (select rm_id
                     from VW_SM_RM_TEAM_LEAD
                     where rmtl_id IN (Select Distinct Su.Id As Rmtl_Id
                                         FROM sml_user su
                                         INNER JOIN sml_team_member MEMBER
                                           ON su.id=member.user_id
                                         Inner Join Sml_Team Team
                                           On Member.Team_Id=Team.Id AND
                                              Team.Team_Role_Id =
                                                (SELECT ID
                                                   FROM code_value
                                                   WHERE code='RMTL' AND
                                                         status='ACTIVE' AND
                                                         master_id IS NOT NULL AND
                                                         code_set_value_id =
                                                           (SELECT ID
                                                              FROM code_set
                                                              WHERE CODE = 'TEAM_ROLE' AND
                                                                    master_id IS NOT NULL))
                                         Inner Join Sml_Team_Child PARENT
                                           On Team.Id=Parent.Child_Id
                                         INNER JOIN sml_team_member grop
                                           ON grop.team_id=parent.parent_id
                                         INNER JOIN sml_team st
                                           ON st.id=grop.team_id
                                         Where Su.Status = 'ACTIVE' AND
                                               St.Status='ACTIVE' AND
                                               grop.user_id =
                                                 (select to_char(a.id)
                                                    from sml_user a
                                                    where a.master_id is null AND
                                                          a.status='ACTIVE' AND
                                                          a.login_id = 'see_rm'))) AND
         Entity_Name != 'Collateral' AND
         ((Entity_Name = 'Implementation Instruction' AND
           IS_NOTIFICATION_ACCESS_PASSED(DESCRIPTION,
                                         'see_rm',
                                         Entity_Name,
                                         '1176',
                                         'RM',
                                         TO_CHAR(CTO_CODE),
                                         TO_CHAR(SEC_CTO_CODE),
                                         'N','N','N','N') = 'TRUE') OR 
          (Entity_Name = 'Post Disbursement') OR
          (ENTITY_NAME = 'PostApproval CP/Covnent' AND
           DESCRIPTION = '7 days before due date') OR
          (ENTITY_NAME = 'Facility' AND
           DESCRIPTION != '2 Days Due for expiry of Facility') OR
          (ENTITY_NAME = 'Insurance') OR
          (ENTITY_NAME = 'Call Report' AND
           DESCRIPTION = '2 days before exceeded by 11 months'))))

****************************************Execution plan of above query *****************

Execution Plan
----------------------------------------------------------
   0       SELECT STATEMENT Optimizer Mode=ALL_ROWS (Cost=294 Card=17 K Bytes=3 M)
   1    0    FILTER
   2    1      TABLE ACCESS FULL UOBCM.SML_NOTIFICATION_MAIN (Cost=294 Card=37 K Bytes=6 M)
   3    1      FILTER
   4    3        NESTED LOOPS
   5    4          NESTED LOOPS (Cost=47 Card=1 Bytes=80)
   6    5            HASH JOIN (Cost=23 Card=24 Bytes=1 K)
   7    6              NESTED LOOPS (Cost=8 Card=12 Bytes=432)
   8    7                HASH JOIN (Cost=8 Card=12 Bytes=384)
   9    8                  TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=3 Bytes=72)
  10    9                    INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  11    8                  INDEX FAST FULL SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=3 Card=1 K Bytes=8 K)
  12    7                INDEX UNIQUE SCAN UOBCM.PK_SML_USER_PROFILE (Cost=0 Card=1 Bytes=4)
  13    6              VIEW UOBCM.index$_join$_005 (Cost=15 Card=1 K Bytes=14 K)
  14   13                HASH JOIN
  15   14                  INDEX FAST FULL SCAN UOBCM.IDX_USRPROFCTO_USRPROF (Cost=6 Card=1 K Bytes=14 K)
  16   14                  INDEX FAST FULL SCAN UOBCM.IDX_USRPROFCTO_CTO (Cost=11 Card=1 K Bytes=14 K)
  17    5            INDEX UNIQUE SCAN UOBCM.PK_CODE_VALUE (Cost=0 Card=1)
  18    4          TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=1 Card=1 Bytes=36)
  19    1      FILTER
  20   19        NESTED LOOPS
  21   20          NESTED LOOPS (Cost=47 Card=1 Bytes=80)
  22   21            HASH JOIN (Cost=23 Card=24 Bytes=1 K)
  23   22              NESTED LOOPS (Cost=8 Card=12 Bytes=432)
  24   23                HASH JOIN (Cost=8 Card=12 Bytes=384)
  25   24                  TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=3 Bytes=72)
  26   25                    INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  27   24                  INDEX FAST FULL SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=3 Card=1 K Bytes=8 K)
  28   23                INDEX UNIQUE SCAN UOBCM.PK_SML_USER_PROFILE (Cost=0 Card=1 Bytes=4)
  29   22              VIEW UOBCM.index$_join$_010 (Cost=15 Card=1 K Bytes=14 K)
  30   29                HASH JOIN
  31   30                  INDEX FAST FULL SCAN UOBCM.IDX_USRPROFCTO_USRPROF (Cost=6 Card=1 K Bytes=14 K)
  32   30                  INDEX FAST FULL SCAN UOBCM.IDX_USRPROFCTO_CTO (Cost=11 Card=1 K Bytes=14 K)
  33   21            INDEX UNIQUE SCAN UOBCM.PK_CODE_VALUE (Cost=0 Card=1)
  34   20          TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=1 Card=1 Bytes=36)
  35    1      NESTED LOOPS
  36   35        NESTED LOOPS (Cost=5 Card=1 Bytes=39)
  37   36          TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=3 Card=3 Bytes=75)
  38   37            INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  39   36          INDEX UNIQUE SCAN UOBCM.PK_CODE_VALUE (Cost=0 Card=1)
  40   35        TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=1 Card=1 Bytes=14)
  41    1      NESTED LOOPS
  42   41        NESTED LOOPS (Cost=5 Card=1 Bytes=39)
  43   42          TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=3 Card=3 Bytes=75)
  44   43            INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  45   42          INDEX UNIQUE SCAN UOBCM.PK_CODE_VALUE (Cost=0 Card=1)
  46   41        TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=1 Card=1 Bytes=14)
  47    1      NESTED LOOPS (Cost=9 Card=3 Bytes=117)
  48   47        TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=4 Card=4 Bytes=56)
  49   48          INDEX RANGE SCAN UOBCM.IDX_CV_CDSTATUSID (Cost=2 Card=4)
  50   47        TABLE ACCESS FULL UOBCM.SML_USER (Cost=5 Card=2 Bytes=50)
  51    1      NESTED LOOPS
  52   51        NESTED LOOPS (Cost=5 Card=1 Bytes=39)
  53   52          TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=3 Card=3 Bytes=75)
  54   53            INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  55   52          INDEX UNIQUE SCAN UOBCM.PK_CODE_VALUE (Cost=0 Card=1)
  56   51        TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=1 Card=1 Bytes=14)
  57    1      FILTER
  58   57        TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=1 Bytes=24)
  59   58          INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  60    1      FILTER
  61   60        TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=1 Bytes=24)
  62   61          INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  63    1      FILTER
  64   63        TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=1 Bytes=24)
  65   64          INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  66    1      NESTED LOOPS
  67   66        NESTED LOOPS (Cost=28 Card=1 Bytes=95)
  68   67          HASH JOIN (Cost=27 Card=1 Bytes=76)
  69   68            NESTED LOOPS
  70   69              NESTED LOOPS (Cost=24 Card=7 Bytes=476)
  71   70                NESTED LOOPS (Cost=16 Card=8 Bytes=472)
  72   71                  HASH JOIN (Cost=10 Card=12 Bytes=612)
  73   72                    NESTED LOOPS (Cost=6 Card=3 Bytes=129)
  74   73                      TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=2 Card=1 Bytes=19)
  75   74                        INDEX UNIQUE SCAN UOBCM.PK_SML_USER (Cost=1 Card=1)
  76   73                      TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=3 Bytes=72)
  77   76                        INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  78   72                    INDEX FAST FULL SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=3 Card=1 K Bytes=8 K)
  79   71                  TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM_CHILD (Cost=1 Card=1 Bytes=8)
  80   79                    INDEX RANGE SCAN UOBCM.IDX_TCHILD_TEAM (Cost=0 Card=1)
  81   70                INDEX UNIQUE SCAN UOBCM.PK_SML_TEAM (Cost=0 Card=1)
  82   69              TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM (Cost=1 Card=1 Bytes=9)
  83   82                TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=3 Card=1 Bytes=35)
  84   83                  INDEX RANGE SCAN UOBCM.IDX_CV_CS (Cost=1 Card=19)
  85   84                    TABLE ACCESS FULL UOBCM.CODE_SET (Cost=18 Card=1 Bytes=38)
  86   68            INDEX FAST FULL SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=3 Card=4 Bytes=32)
  87   67          INDEX UNIQUE SCAN UOBCM.PK_SML_TEAM (Cost=0 Card=1)
  88   66        TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM (Cost=1 Card=1 Bytes=19)
  89    1      TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=1 Bytes=43)
  90   89        INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
  91    1      NESTED LOOPS
  92   91        NESTED LOOPS (Cost=31 Card=1 Bytes=142)
  93   92          NESTED LOOPS (Cost=30 Card=1 Bytes=123)
  94   93            NESTED LOOPS (Cost=29 Card=1 Bytes=104)
  95   94              NESTED LOOPS (Cost=26 Card=3 Bytes=288)
  96   95                NESTED LOOPS (Cost=22 Card=4 Bytes=348)
  97   96                  HASH JOIN (Cost=20 Card=5 Bytes=395)
  98   97                    NESTED LOOPS
  99   98                      NESTED LOOPS (Cost=16 Card=4 Bytes=284)
 100   99                        NESTED LOOPS (Cost=12 Card=4 Bytes=208)
 101  100                          NESTED LOOPS (Cost=10 Card=2 Bytes=88)
 102  101                            NESTED LOOPS (Cost=7 Card=3 Bytes=105)
 103  102                              NESTED LOOPS (Cost=5 Card=4 Bytes=108)
 104  103                                TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=2 Card=1 Bytes=19)
 105  104                                  INDEX UNIQUE SCAN UOBCM.PK_SML_USER (Cost=1 Card=1)
 106  103                                INDEX FAST FULL SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=3 Card=4 Bytes=32)
 107  106                                  TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=4 Card=1 Bytes=43)
 108  107                                    INDEX RANGE SCAN UOBCM.IDX_USR_LOGINID (Cost=1 Card=3)
 109  102                              TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM_CHILD (Cost=1 Card=1 Bytes=8)
 110  109                                INDEX RANGE SCAN UOBCM.IDX_TCHILD_TEAM (Cost=0 Card=1)
 111  101                            TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM (Cost=1 Card=1 Bytes=9)
 112  111                              INDEX UNIQUE SCAN UOBCM.PK_SML_TEAM (Cost=0 Card=1)
 113  111                              TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=3 Card=1 Bytes=35)
 114  113                                INDEX RANGE SCAN UOBCM.IDX_CV_CS (Cost=1 Card=19)
 115  114                                  TABLE ACCESS FULL UOBCM.CODE_SET (Cost=18 Card=1 Bytes=38)
 116  100                          INDEX RANGE SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=1 Card=2 Bytes=16)
 117   99                        INDEX UNIQUE SCAN UOBCM.PK_SML_USER (Cost=0 Card=1)
 118   98                      TABLE ACCESS BY INDEX ROWID UOBCM.SML_USER (Cost=1 Card=1 Bytes=19)
 119   97                    INDEX FAST FULL SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=3 Card=1 K Bytes=8 K)
 120   96                  TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM_CHILD (Cost=1 Card=1 Bytes=8)
 121  120                    INDEX RANGE SCAN UOBCM.IDX_TCHILD_TEAM (Cost=0 Card=1)
 122   95                TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM (Cost=1 Card=1 Bytes=9)
 123  122                  INDEX UNIQUE SCAN UOBCM.PK_SML_TEAM (Cost=0 Card=1)
 124  122                  TABLE ACCESS BY INDEX ROWID UOBCM.CODE_VALUE (Cost=3 Card=1 Bytes=35)
 125  124                    INDEX RANGE SCAN UOBCM.IDX_CV_CS (Cost=1 Card=19)
 126  125                      TABLE ACCESS FULL UOBCM.CODE_SET (Cost=18 Card=1 Bytes=38)
 127   94              INDEX RANGE SCAN UOBCM.IDX_TMBR_TMUSERPF (Cost=1 Card=1 Bytes=8)
 128   93            TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM (Cost=1 Card=1 Bytes=19)
 129  128              INDEX UNIQUE SCAN UOBCM.PK_SML_TEAM (Cost=0 Card=1)
 130   92          INDEX UNIQUE SCAN UOBCM.PK_SML_TEAM (Cost=0 Card=1)
 131   91        TABLE ACCESS BY INDEX ROWID UOBCM.SML_TEAM (Cost=1 Card=1 Bytes=19)
 132    1      NESTED LOOPS
 133  132        NESTED LOOPS (Cost=28 Card=1 Bytes=95)
 134  133          HASH JOIN (Cost=27 Card=1 Bytes=76)
 135  134            NESTED LOOPS
 136  135              NESTED LOOPS (Cost=24 Card=7 Bytes=476)
 137  136                NESTED LOOPS ( 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:23:32.803

这是一个包含大量子查询的相当大的查询，您需要对其进行解释计划，然后开始消除“慢”位。从存储过程中提取逻辑并将其嵌入到查询中可能是查询。100,000 行并不多，你应该可以调整很多。

# ruby-on-rails-3 - 从 Rails 设计身份验证到主干和 API？

> ID：10892506
> 
> 赞同：4
> 
> 时间：2012-06-05T06:15:59.107
> 
> 标签：ruby-on-rails-3, backbone.js, devise

我想仅将一个典型的 rails 3.2 mvc 应用程序重建为 API + 前端（主干）。因为我没有在rails中构建API的经验，包括authenticatin：

*   使用主干对设计进行身份验证的最佳方法是什么？使用 auth_tokens？
*   我应该如何制作他的 API？只是打印出 JSON 或使用像 Grape 这样的宝石？

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T08:29:05.700

我可以向您解释我这样做的方式：

首先，我使用 devise 安装了一个标准的 rails 应用程序。之后，我创建了自己的会话控制器：

```
class SessionsController < ApplicationController

  def authenticate
    # this method logs you in and returns you a single_access_token token for authentication.
    @user = User.find_for_authentication(:email => params[:user][:email])

    if @user && @user.valid_password?(params[:user][:password])
      render :json => {:user => {:email => @user.email, :id => @user.id, :firsname => @user.firstname, :lastname => @user.lastname, :team_id => @user.team_id, :singleAccessToken => @user.generate_access_token}}
    else
      render :json => {:errors => ["Nom d'utilisateur ou mot de passe invalide"]}, :status => 401
    end
  end
end 
```

如您所见，我向这个 url 发送了一个请求，json 看起来像：

```
{ 
   user => {
      email => "myemail@toto.com",
      password => "monpass"
   }
} 
```

如果一切正常或出错，我的控制器会返回带有用户数据的 json。在带有用户的 json 上，我返回用于下一个请求的 access_token 以检查是否允许用户请求。我在我的应用程序控制器中制作了这个过滤器：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  protected
  def user_access_token
    request.headers["HTTP_X_USER_ACCESS_TOKEN"] || request.headers["HTTP_USER_ACCESS_TOKEN"]
  end

  def current_user
    if token = user_access_token
      @user ||= User.find_by_access_token(token)
    end
  end

  def require_user
    unless current_user
      render :json => {:error => "Invalid Access Token"}, :status => 401
    end
  end

  def require_owner
    unless current_user && current_user == object.user
      render :json => {:error => "Unauthorized"}
    end
  end

end 
```

如您所见，在每个下一个请求中，我将在 html 标头中添加 access_token 键：HTTP_USER_ACCESS_TOKEN

所以，我可以检查是否允许用户提出请求。

要制作 API，您可以使用 Rails API gem，如下所示：

[http://railscasts.com/episodes/348-the-rails-api-gem](http://railscasts.com/episodes/348-the-rails-api-gem)

祝你好运。

# jquery - IE 9 jQuery 错误：“对象不支持...'on'”？

> ID：10892509
> 
> 赞同：5
> 
> 时间：2012-06-05T06:16:06.337
> 
> 标签：jquery, internet-explorer, internet-explorer-9

我需要帮助。我在 IE9 中收到以下错误。该代码在 FireFox 中运行：

```
SCRIPT438: Object doesn't support property or method 'on' 
```

这是在以下代码中提出的：

```
$(function() {
    $(document).on('change', '#dropdownval select', function(event) {
        //logic function
    });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T16:42:43.750

### 适用于 Firefox，而不是 IE？

我会确保两个浏览器都加载相同的源。老实说，`.on`在使用 jQuery 1.6 时，Firefox 有点无法使用，因为该方法不存在。

在您的控制台（IE 中的 F12 开发人员工具和 Firefox 中的 Firebug）中键入以下内容：

```
jQuery.fn.jquery 
```

这应该返回该特定页面上加载的当前版本的 jQuery。例如，截至今天，在 StackOverflow 上运行该命令会导致`"1.7.1"`. 其次，要测试`.on`方法是否存在，您可以在不使用括号的情况下访问它，使用双重否定将其转换为真正的布尔值：

```
!!jQuery.fn.on // True if .on is present, False otherwise 
```

### 对于 jQuery 1.6，使用 .delegate 而不是 .on

由于您使用的是 jQuery 1.6，因此您无法访问[`.on`](http://api.jquery.com/on/)jQuery 1.7 中引入的方法。适当的后备方法是改用该[`.delegate`](http://api.jquery.com/delegate/)方法，或者您可以升级到最新版本的 jQuery（[Microsoft CDN](http://www.asp.net/ajaxlibrary/cdn.ashx#jQuery_Releases_on_the_CDN_0)、[Google CDN](https://developers.google.com/speed/libraries/devguide)、[jQuery CDN](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)）。

for 的语法非常接近[`.delegate`](http://api.jquery.com/delegate/)：[`.on`](http://api.jquery.com/on/)

```
$("#dropdownval").delegate("select", "change", function(event){
    alert( $(this).val() );
}); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/rMBn4/](http://jsfiddle.net/jonathansampson/rMBn4/)

### 如果您决定升级...

您已经接近您的[`.on`](http://api.jquery.com/on/)代码，但您不想将事件绑定到`document`对象的下方 - 这意味着事件在被处理之前可能需要传播很长的距离。相反，正如我们对示例所做的那样[`.delegate`](http://api.jquery.com/delegate/)，我们将绑定到更接近 select 元素的东西：

```
$("#dropdownval").on("change", "select", function(event){
    alert( $(this).val() );
}); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/rMBn4/1/](http://jsfiddle.net/jonathansampson/rMBn4/1/)

您会注意到，两者之间的主要区别在于链式方法的前两个参数的顺序。使用[`.delegate`](http://api.jquery.com/delegate/)，选择器在事件之前。随着[`.on`](http://api.jquery.com/on/)，顺序颠倒。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T06:19:19.883

正在发生两件事之一：

1.  `$`is not `jQuery`，而是在别处定义的函数；或者，

2.  `$`不是 jQuery 的正确版本。[`on`](http://api.jquery.com/on/)在 1.7 中引入。

* * *

对于 jQuery 1.6 如下`on`：

```
$(document).on('change', '#dropdownval select', ...) 
```

可以使用[`delegate`](http://api.jquery.com/delegate/)（自 1.4 起，弃用 1.7）编写：

```
$(document).delegate('#dropdownval select', 'change', ...) 
```

可以使用[`live`](http://api.jquery.com/live/)（从 1.3 开始，已弃用）编写：

```
$('#dropdownval select').live('change', ...) 
```

有关更多选项和注意事项，请参阅文档。

使用`delegate` *可以*附加在身体“下方”（如`on`），`live`一如既往地附加在身体水平。因此，上述内容可能会更有效地编写，具体取决于目标所在的位置。

快乐编码。

# facebook - Facebook 图形 API 组文件

> ID：10892513
> 
> 赞同：28
> 
> 时间：2012-06-05T06:16:25.040
> 
> 标签：facebook, facebook-graph-api

Facebook 为群组提供了一项新功能。现在可以在组内发布文件。（[http://mashable.com/2012/05/10/facebook-groups-3/](http://mashable.com/2012/05/10/facebook-groups-3/)）

我现在正在尝试使用 Graph API 查询文件，但在文档站点上只描述了 4 个 url。“文档”、“成员”、“提要”、“图片”。当我阅读“提要”路径时，我不会收到文件发布。

有没有隐藏的路径？我也没有发现新的许可。

有人有什么想法吗？

我在几个互联网页面上搜索了解决方案，但只有关于如何阅读和发布照片的描述，文档中对此进行了描述。

没有人编写可以将文件上传到组的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T11:14:10.307

试试这个，这可能对你有帮助试试{

```
 $facebook->api('/'.$groups[$id].'/feed', 'POST',
               array( 
                 'access_token' => $access_token,
                 'message' => stripslashes(stripslashes($mapp_message)),
                 'name' => stripslashes($name),
                 'link' => $link,
                 'description' => stripslashes(stripslashes($description)),
                 'picture' => "images/send_imges/".$image
                    )
            );
    } catch(FacebookApiException $e) {
        echo $e;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T21:59:03.807

Groups的[Graph API 文档](https://developers.facebook.com/docs/reference/api/group/)提到了一种从组中检索文档的方法。如果您单击文档中的**docs**连接，它将带您进入[Graph API Explorer](https://developers.facebook.com/tools/explorer/?method=GET&path=195466193802264/docs)，您可以在其中测试您的示例查询。因此，基本上，要获取上传到组的文档，您需要做的就是使用有效的访问令牌（没有特殊权限）向以下 url 执行请求：

```
https://graph.facebook.com/groupId/docs 
```

或者，如果您想访问特定文档，则需要该特定文档的 document_id。因此，您可以使用有效的访问令牌简单地请求以下 URL：

```
https://graph.facebook.com/docsId 
```

[此答案](https://stackoverflow.com/a/8527174/1382832)中讨论了有关发布文档及其相关权限的说明。我不太确定它是否有效，因为我没有测试过这个方法。但我很确定您可以通过对上述网址进行 API 调用来阅读详细信息。

# c# - 如何使用 Directshow 和 C# 使用文本覆盖进行视频录制？

> ID：10892514
> 
> 赞同：0
> 
> 时间：2012-06-05T06:16:31.033
> 
> 标签：c#, directshow, directshow.net

根据我[之前的帖子](https://stackoverflow.com/questions/10847477/text-overlay-when-video-is-recording-using-directshow-and-c-sharp)，我尝试使用 sampleGrabber 从视频文件中抓取帧，然后调用回调函数：

```
Type comType = Type.GetTypeFromCLSID(new Guid("e436ebb3-524f-11ce-9f53-0020af0ba770"));
IGraphBuilder graphBuilder = (IGraphBuilder)Activator.CreateInstance(comType);

comType = Type.GetTypeFromCLSID(new Guid("C1F400A0-3F08-11d3-9F0B-006008039E37"));
ISampleGrabber sampleGrabber = (ISampleGrabber)Activator.CreateInstance(comType);

graphBuilder.AddFilter((IBaseFilter)sampleGrabber, "samplegrabber");

AMMediaType mediaType = new AMMediaType();
mediaType.majorType = MediaType.Video;
mediaType.subType = MediaSubType.RGB24;
mediaType.formatType = FormatType.VideoInfo;
sampleGrabber.SetMediaType(mediaType);

int hr = graphBuilder.RenderFile(@"D:\test.wmv", null);

IMediaEventEx mediaEvent = (IMediaEventEx)graphBuilder;
IMediaControl mediaControl = (IMediaControl)graphBuilder;
IVideoWindow videoWindow = (IVideoWindow)graphBuilder;
IBasicAudio basicAudio = (IBasicAudio)graphBuilder;

videoWindow.put_AutoShow(OABool.False);
basicAudio.put_Volume(-10000);

sampleGrabber.SetOneShot(false);
sampleGrabber.SetBufferSamples(true);

//the same object has implemented the ISampleGrabberCB interface.
//0 sets the callback to the ISampleGrabberCB::SampleCB() method.
sampleGrabber.SetCallback(this, 0);

mediaControl.Run();

EventCode eventCode;
mediaEvent.WaitForCompletion(-1, out eventCode);

Marshal.ReleaseComObject(sampleGrabber);
Marshal.ReleaseComObject(graphBuilder); 
```

回调函数

```
 public int SampleCB ( double sampleTime, IMediaSample mediaSample )
   {
    //WHAT TO DO HERE.
   } 
```

1.  我在回调函数中做什么以在每一帧上添加叠加层，然后整个视频将与叠加文本一起存储？

2.  录制视频时有没有办法添加覆盖文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:17:54.790

在录制期间添加文本覆盖的最佳方法是实现[DMO](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391006%28v=vs.85%29.aspx)或[DirectShow Transform-Filter](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391015%28v=vs.85%29.aspx)。我更喜欢 DMO，因为它更简单，您可以稍后在 MediaFoundation 中重用它。

您将 RGB24 或 RGB32 设置为 DMO/Filter 的输入类型，然后您可以使用 GDI 在每一帧上绘制您想要的内容。

在图中，它看起来是这样的：`VideoSource -> DMO -> ASF Writer`.

# android - 在 Facebook 集成上发布多张图片

> ID：10892515
> 
> 赞同：1
> 
> 时间：2012-06-05T06:16:36.240
> 
> 标签：android, facebook

我正在处理 Android 上的 Facebook 集成。我在 Facebook 墙上贴了简单的文字和一张图片。是否可以发布多张图片？任何人都可以提出一个可以解释这一点的链接吗？我使用[http://androidcodeexamples.blogspot.in/2011/12/how-to-update-facebook-status-via.html](http://androidcodeexamples.blogspot.in/2011/12/how-to-update-facebook-status-via.html)来发布文字和图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:27:47.000

您不能为一个帖子发布多个图片。所以一个帖子最多可以有一张图片。

如果我们真的想为一个帖子发布多个图像，您可以将这些图像组合成一张图像并将其张贴在墙上。

# tfsbuild - TFS 构建：内部包含 100 个项目的单一解决方案的优缺点

> ID：10892520
> 
> 赞同：0
> 
> 时间：2012-06-05T06:17:02.037
> 
> 标签：tfsbuild

您认为拥有一个 TFS 构建将使用的大型解决方案的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:34:49.547

应该没有什么大的缺点，因为 Visual Studio 和 TFS 旨在处理这种规模。只有您的构建时间和您的构建丢弃大小受您在 TFS 中构建的项目数量的影响，因此您的 TFS 构建机器规格应经过验证以处理您的任务。

我在解决方案中遇到这么多项目的主要烦恼更多是在开发方面。如果多人添加/删除项目或修改项目设置，我会经常与 .sln 文件发生冲突。

# ibm-mq - 在 WMQ-FTE 中成功传输后是否可以传输文件列表？

> ID：10892528
> 
> 赞同：2
> 
> 时间：2012-06-05T06:17:40.747
> 
> 标签：ibm-mq, file-transfer, websphere-mq-fte

在使用 WMQ-FTE 传输文件后，我想将一些文件移动到带时间戳的目录中。我正在运行 v7.0.4.1。

我的问题是总是有新文件被写入我要转出的目录，所以只是盲目地转移所有内容不是办法。我还批量处理传输触发器，因为它们以大约 1000 个批次发生，因此每 1000 个要传输的文件只发生一次传输。

我希望有一些元数据包含传输文件的路径列表，这样我就可以在传输发生之前或之后将它们移动到目录中。目录创建将是前或后源调用的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T11:57:49.957

查看[`DestinationTransferEndExit.java`API 文档](http://publib.boulder.ibm.com/infocenter/wmqfte/v7r0/topic/com.ibm.wmqfte.doc/destination_transfer_end_exit.htm)。特别是看`fileResults`参数。ANT 任务可以使用此参数对特定文件执行操作。

```
/**
 * Invoked immediately after the completion of a transfer on the agent acting as
 * the destination of the transfer.
 * 
 * @param transferExitResult
 *            a result object reflecting whether or not the transfer completed
 *            successfully.
 * 
 * @param sourceAgentName
 *            the name of the agent acting as the source of the transfer.
 * 
 * @param destinationAgentName
 *            the name of the agent acting as the destination of the
 *            transfer.  This is the name of the agent that the 
 *            implementation of this method will be invoked from.
 * 
 * @param environmentMetaData
 *            meta data about the environment in which the implementation
 *            of this method is running.  This information can only be read,
 *            it cannot be updated by the implementation.  The constants
 *            defined in <code>EnvironmentMetaDataConstants</code> class can 
 *            be used to access the data held by this map.
 * 
 * @param transferMetaData
 *            meta data to associate with the transfer.  The information can
 *            only be read, it cannot be updated by the implementation.  This 
 *            map may also contain keys with IBM reserved names.  These 
 *            entries are defined in the <code>TransferMetaDataConstants</code> 
 *            class and have special semantics.
 * 
 * @param fileResults
 *            a list of file transfer result objects that describe the source
 *            file name, destination file name and result of each file transfer
 *            operation attempted.
 * 
 * @return    an optional description to enter into the log message describing
 *            transfer completion.  A value of <code>null</code> can be used
 *            when no description is required.
 */
String onDestinationTransferEnd(TransferExitResult transferExitResult,
                String sourceAgentName,
                String destinationAgentName,
                Map<String, String>environmentMetaData,
                Map<String, String>transferMetaData, 
                List<FileTransferResult>fileResults); 
```

# iphone - 不使用 superview alpha 值更新子视图

> ID：10892535
> 
> 赞同：18
> 
> 时间：2012-06-05T06:18:21.440
> 
> 标签：iphone, ios, ios4

我的问题是当我将视图作为子视图添加到根视图时。当我更改根视图的 alpha 值时，子视图中也会发生同样的情况。实际上我不需要在子视图中进行更新。有什么解决方案可以做到这一点。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-05T06:23:05.277

这只会改变根视图的 alpha，而不是其他的

```
 self.view.backgroundColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.5]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-05T07:35:30.787

基于@shabbirv 的答案，还可以使用 IB 的颜色选择器

![选色器](../Images/90459a758654d776a073ad3a300fc8b8.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T06:24:18.150

您需要更改视图的结构。与其将子视图放在根视图上，不如在根视图上创建一个图层，但仍将子视图添加到根视图。更改图层的 alpha 时不会影响子视图。下面的示例结构。

您当前的结构：

```
RootView->Subviews //Changing RootView alpha effects Subviews. 
```

所需结构：

```
RootView->View->Subviews(Still Added to RootView) //Changing alpha of Layer doesn't effect subviews. 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-02T05:26:56.433

这也将通过以下方式更改根视图颜色来解决此问题，这不会影响子视图。

```
[rootView setBackgroundColor:[[UIColor blackColor] colorWithAlphaComponent:0.7]]; 
```

# android - Android ServiceConnection - EBADF（错误的文件号）

> ID：10892538
> 
> 赞同：2
> 
> 时间：2012-06-05T06:18:47.757
> 
> 标签：android, serviceconnection

无法清理输出流：java.net.SocketException：关闭失败：EBADF（错误文件号）

有没有人得到这个，有什么办法可以摆脱这个异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:52:49.647

这可能意味着您没有写入文件的权限或者它是只读的。

# ravendb - RavenDB build 701：System.InvalidOperationException：没有名为：动态/的索引

> ID：10892539
> 
> 赞同：1
> 
> 时间：2012-06-05T06:18:51.393
> 
> 标签：ravendb

我搬到了最新的稳定版本 701 ，我收到了这个错误。

请注意，我正在从以前的稳定版本升级并且尚未导入数据库。

任何想法为什么？

# php - 从给定的数组 lat long 获取最近的 lat long 大约 25 公里

> ID：10892542
> 
> 赞同：1
> 
> 时间：2012-06-05T06:19:00.100
> 
> 标签：php, google-maps, map

我有`array`很长的时间喜欢：

```
var locationList = new Array( '23.2531803, 72.4774396', '22.808782, 70.823863', '24.3310019, 72.8516531', '22.3073095, 73.1810976', '22.3038945, 70.8021599', '23.850809, 72.114838' ); 
```

我想从第一个给定的数组中获得最近的 25 公里 lat long`23.2531803, 72.4774396`

是否有任何计算给定数组中最近的 25 km 的 lat long。

```
NOTE: for some reason i can not use sql query, because i get lat long from given address 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:09:39.143

第 1 步：计算起始坐标与每个子坐标之间的距离 第 2 步：选择最小距离 第 3 步：是否小于 25 公里？成功！

如何计算两个坐标之间的距离：

```
function distance($lat1, $lon1, $lat2, $lon2) {

$D = 6371; // Earth Radius
$dLat = $lat2-$lat1;
$dLon = $lon2-$lon1;

$a = sin($dLat/2) * sin($dLat/2) +
     sin($dLon/2) * sin($dLon/2) * cos($lat1) * cos($lat2); 

$b = 2 * atan2(sqrt($a), sqrt(1-$a)); 
$c = 2 * atan2(sqrt($a), sqrt(1-$a)); 

return $D * $c;

} 
```

此函数将地球视为一个完美的球，但事实并非如此 - 确实存在细微的变化，但在您想要的 25 公里直径处可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:18:46.337

首先，您的数据数组很糟糕。您需要使您的数据更具计算机可读性。然后您可以使用[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)来计算与每个位置的距离。您可以将第一个距离和索引保存在变量中，然后用新的距离和索引替换它（如果它更短）。

```
var closest = {id:0,dist:-1};
var myloc = [23.2531303, 72.4774398]
for(var i = 0; i < locationList.length; i++)
{
  var long_lat = locationList[i].match(/([0-9.]+)+/)
  long_lat[0] = parseFloat(long_lat[0]);
  long_lat[1] = parseFloat(long_lat[1]);
  var dist = Math.sqrt(Math.pow(long_lat[0] - myloc[0], 2)+Math.pow(long_lat[1] - myloc[1], 2)));
  if((closest.dist == -1) || (closest.dist > dist))
  {
    closest.dist = dist;
    closest.id = i;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:33:47.153

当你喜欢在 JS 中计算时，你可以使用[google.maps.geometry.spherical.computeDistanceBetween()](https://developers.google.com/maps/documentation/javascript/reference?hl=en#spherical)来计算单点之间的距离。

将结果存储在一个数组中，对数组进行排序，当最小的条目小于 25 公里时，你就得到了你想要的。

# asp.net - 响应重定向 URL 返回 HTTP 错误 400 - 错误请求

> ID：10892543
> 
> 赞同：1
> 
> 时间：2012-06-05T06:19:04.060
> 
> 标签：asp.net, http, iis, response.redirect, http-error

当谈到 ASP.NET 时，我是个菜鸟。我知道一些基本命令，例如 Response.Redirect("URL") 将我的应用程序网页重定向到不同的位置。

但是，每当我尝试使用下面显示的代码时，我都会收到 HTTP 错误 400 - 错误请求

```
Response.Redirect(Server.UrlEncode(this.Downloadlink)); 
```

其中**this.Downloadlink**是一个用户定义的属性，它返回类似这样的内容

```
 http://mdn.vatsag.net/fp;files/DOWNLOAD/VTSetup.exe 
```

如果我在浏览器中发布此链接，会弹出 .exe 文件（表示链接良好）

但是，当我使用 ASP.NET 代码时会出现此错误。

对此问题/原因的任何形式的回应都深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:28:43.937

见这里：[http ://www.kirit.com/Response.Redirect%20and%20encoded%20URIs](http://www.kirit.com/Response.Redirect%20and%20encoded%20URIs)

简而言之：如果您想快速解决问题，请删除代码中 UrlEncoding URL 的部分！

# ruby - 发送和定义方法有问题

> ID：10892544
> 
> 赞同：0
> 
> 时间：2012-06-05T06:19:04.917
> 
> 标签：ruby, metaprogramming

我正在尝试创建一个自定义 attr_accessor，但似乎无法使其正常工作。它不是返回分配给编写器的值，而是返回实例变量。有任何想法吗？

```
class Object
  def custom_attr_accessor(klass, attribute)
    ivar = "@#{attribute}".to_sym
    writer_body = lambda { |arg| instance_variable_set(ivar, arg) }
    reader_body = lambda { ivar }
    klass.send(:define_method, "#{attribute}=".to_sym, &writer_body) 
    klass.send(:define_method, "#{attribute}".to_sym, &reader_body)
  end
end

class Person
end

custom_attr_accessor(Person, :age)

me = Person.new
me.age = 100
puts me.age 
```

=> @年龄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:41:55.450

就像你做的一样`instance_variable_set`，你需要`instance_variable_get`：

```
 reader_body = lambda { instance_variable_get(ivar) } 
```

顺便说一句，扩展`Object`和传递一个类不是很漂亮。尝试实现它`Persion. custom_attr_accessor(:age)`，那将是更多的 OOP。

# c# - JSON请求使用JQUERY返回对象错误

> ID：10892549
> 
> 赞同：0
> 
> 时间：2012-06-05T06:19:23.530
> 
> 标签：c#, jquery, json

我有一个返回有效 JSON 的 aspx 页面 - 但是当通过 JQUERY 调用时，我可以在 Fiddler 中看到返回了 JSON 但引发了错误 [对象错误]。

```
 protected void Page_Load(object sender, EventArgs e)
   {
    string json = "{\"name\":\"Joe\"}";
    Response.ClearHeaders();
    Response.ClearContent();
    Response.Clear();
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/json";
    Response.ContentEncoding = Encoding.UTF8;
    Response.Write(json);
    Response.End();
   } 
```

使用此页面的 html 页面位于不同的域中，我使用的是 jsonp。

```
function jsonpCallback(response){
    alert(response.data);
}

$(document).ready(function(){ 

            $.ajax({
                url: 'http://localhost:30413/getprice.aspx',
                dataType: 'jsonp',
                error: function(xhr, status, error) {
                    alert(error);
                },
                success: jsonpCallback
            });

}); 
```

当请求 aspx 页面时，将有效 JSON 返回给浏览器，当进行 JQUERY 调用时，返回 JSON 但未调用回调函数并且预期的“;” JS 错误，然后显示 [Object error] 消息。以下是提出的请求和响应。

我已经尝试了请求的所有变体，结果相同。我正在使用下面的请求 JQUERY 示例，因为它适用于下面显示的最后一个示例。

```
GET http://localhost:30413/price.aspx?callback=jQuery17105556924406763212_1338876162569&_=1338876162581 HTTP/1.1
Accept: application/javascript, */*;q=0.8
Referer: http://alpha.tigerdirect.com/applications/b2b/varinfo.asp
Accept-Language: en-US
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Host: localhost:30413
Connection: Keep-Alive
Pragma: no-cache
Cookie: ASP.NET_SessionId=d4pje2hgm2beznslfpp4pii5

HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Tue, 05 Jun 2012 06:02:42 GMT
X-AspNet-Version: 4.0.30319
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Type: application/json; charset=utf-8
Content-Length: 14
Connection: Close

{"name":"Joe"} 
```

此示例有效

```
function jsonpCallback(response){
    alert(response.data);
}
$(document).ready(function(){ 
        $.ajax({
            url: 'http://api.bitbucket.org/1.0/repositories/retroviz/webformsthemeswitcher/src/tip/.hgignore',
            dataType: 'jsonp',
            error: function(xhr, status, error) {
                alert(error);
            },
            success: jsonpCallback
        });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:37:25.150

将ajax中的url更改为`url: http://localhost:30413/getprice.aspx?callback=?`

和

```
if(Request.QueryString['callback']!=null){
    string callback = Request.QueryString['callback'];
    string json = "{\"name\":\"Joe\"}";
    Response.ClearHeaders();
    Response.ClearContent();
    Response.Clear();
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.ContentType = "application/json";
    Response.ContentEncoding = Encoding.UTF8;
    Response.Write(callback + "(" + json + ")");
    Response.End();
} 
```

在 jsop 中，我们将响应包装在`callback`函数调用中。就像我们在 javascript 中调用函数一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:23:00.700

JSONP 响应必须包装在带有回调的请求中指定的函数调用中。

就像是

```
callback({"name":"Joe"}); 
```

这通常应该在过滤器上加以注意。

# php - 根据另一个查询对 MySQL 查询进行排序？

> ID：10892553
> 
> 赞同：1
> 
> 时间：2012-06-05T06:19:41.573
> 
> 标签：php, mysql, sorting

我正在构建一些非常简单的论坛软件，作为我的 PHP 和 MySQL 技能的一种自我测试，但我不太确定如何完成这项任务。我有一个名为的表`Threads`，其中包含所有线程的列表。我还有一个名为 的表`Posts`，其中包含所有帖子。每个表的主键都是一个自增 ID。中的每一行`Posts`还包含其所属线程的 ID。

虽然我可以使用如下查询轻松检索某个子论坛中的所有线程：

```
SELECT * FROM Threads WHERE ForumID='$forumid' 
```

...我不确定如何根据每个线程的最新帖子对其进行排序。我可以得到任何给定线程的帖子，如下所示：

```
SELECT * FROM Posts WHERE ThreadID='$threadid' 
```

...但我不知道如何将该数据合并到我的初始查询中以对其进行排序。由于每个帖子都有一个唯一的 ID，因此 ID 较高的帖子总是更新的，因此无需比较日期或类似的东西。我只是不清楚如何实际进行查询。

我很确定这仅在 MySQL 中是可能的，但如果不是，那么最有效的 PHP 解决方案是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:14:52.507

试试这个`INNER JOIN`

```
SELECT p.*,t.*
FROM Threads t 
INNER JOIN Posts p ON t.id = p.ThreadID
ORDER BY
//whatever column you want like this p.date
p.date
DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:27:31.080

像这样的东西可以帮助你

```
SELECT DISTINCT t.* FROM Posts p LEFT JOIN Threads t ON p.ThreadID = t.id ORDER BY p.last_modified_time DESC 
```

或者

```
SELECT DISTINCT t.* FROM Posts p LEFT JOIN Threads t ON p.ThreadID = t.id ORDER BY p.id DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:35:48.690

一个简单的 JOIN 语句就是解决方案：

```
SELECT *
FROM Threads t
JOIN Posts p ON t.ThreadID = p.ThreadID
ORDER BY t.ModificationDate DESC -- or whatever column you want 
```

这为您提供了所有线程的最新帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T23:20:18.107

所有给定的答案都非常接近，但我最终使用了以下查询：

```
SELECT t.*
FROM Threads t
INNER JOIN Posts p ON t.id = p.threadId
GROUP BY t.id
ORDER BY MAX(p.id) DESC 
```

这是由于`DUPLICATE`它的自动分组引起的问题。有关该主题的更多信息，请参阅[此答案](https://stackoverflow.com/a/10905511/465378)。

# c# - 在 Python 中加载 DLL 文件和调用函数

> ID：10892567
> 
> 赞同：4
> 
> 时间：2012-06-05T06:21:15.340
> 
> 标签：c#, python, dll, ctypes

我在加载 DLL 文件并在 Python 中调用函数时遇到问题。我已经尝试了很多教程，但仍然无法弄清楚它是如何工作的。这是我要导出为 DLL 文件的类。我使用简单的 C# 代码。

```
namespace DemoClassLib
{
    public class cLib
    {
        public int increment(int x)
        {
            return x + 1;
        }
    }
} 
```

构建 C# 代码后，我得到名为“DemoClassLib.dll”的 DLL 文件。我使用 ctypes 加载 DLL 文件。直到现在一切都很好。

```
from ctypes import *
myDll = WinDLL('D:\\Resources\\DemoClassLib\\bin\\Debug\\DemoClassLib.dll') 
```

从那一刻开始，我无法继续。我尝试过的所有命令都失败了。

```
n = c_int(1)
myDll.increment(n) 
```

它不断向我显示错误。如何在 Python 中调用方法“increment()”？以及如何传递输入并从中检索输出？我对 Python 很陌生。有人能帮助我吗？如果您能给我提供源代码教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:38:28.870

您不能使用 ctypes 执行此操作，因为二进制文件中没有简单地称为“增量”的符号，因为您的增量方法是类的成员。即使这是 C++，名称也会被破坏。但是使用 C#，您甚至不会在符号表中得到一个错误的名称，因为代码是由 .NET 框架解释的。

如果您出于某种原因必须与 C# 库交互，您可能需要考虑尝试 IronPython (http://ironpython.net/)，它是在 .NET 框架上运行的 Python，具有对 CLR 的完全访问权限。上面建议公开 COM 接口的评论也可以工作。

# php - 您如何评价 Open Street Maps 的可靠性？

> ID：10892568
> 
> 赞同：0
> 
> 时间：2012-06-05T06:21:17.170
> 
> 标签：php, ios, openstreetmap, mapquest

我正在构建一个 Geo Location 移动应用程序，现在我正处于与哪个 API 集成的十字路口。我猜这两个大人物是谷歌地图和开放街道地图。我听说 Google 将在秋季开始对他们的 API 收费，我不确定我的应用到那时是否会盈利，所以我决定使用 Open Street Maps。

我唯一想知道的是，Open Street Maps 在黄金时段是否足够可靠。我尝试了一些查询，老实说，它在佐治亚州找不到几个位置。我从来没有遇到过谷歌地图的问题。使用 Open Street Maps 的人是否对其可靠性有任何疑问？我正在构建一个 IOS 应用程序，如您所知，IOS 没有可以通过地址告诉您纬度和经度的地理编码器，所以这就是我必须寻找其他替代方案的原因。如果有任何安慰的话，我的后端将是 PHP 通过 CURL 调用 mapquest 的 nominatim 实现（无查询限制）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:37:47.087

Google Maps 和 Open Street Maps 之间存在概念上的差异。前者是一种商业产品（即使目前是免费的），通过干净、成熟的 API（地理编码、地图图块，甚至客户端 API），您可以访问其功能。但是你不能用它做你可能需要的*一切*，例如你不能改变地图颜色，或者只画餐馆等等。

Open Street Maps 不是一个产品，更好的是一个巨大的、开放的地理数据库。您可以根据需要以多边形、点、区域的形式从中查询所有信息。但是，您将不得不自己绘制地图。您可以在客户端（如果您有足够的 CPU）或服务器端执行此操作，并且仅将地图图块下载为图像。这正是 MapQuest 为您所做的：它呈现来自 Open Street Maps DB 的地图，并让您可以访问图块。Open Street Maps 周围还提供地理定位等辅助服务，但它并没有严格连接到它，您可以使用其他一些更具体的服务（例如，有一个非常好的数据库，其中包含地球上所有的山峰）。

根据我的经验，Open Street Maps DB 在数量上比 Google Maps 包含越来越多的精细信息，这可能取决于您将在地图图块上绘制多少以及哪种信息（如果您不使用渲染服务） . 无论如何，您可以以更多工作的代价获得更大的灵活性。

# xml - 为什么当我序列化为字符串时，TXmlDocument 会省略编码？

> ID：10892571
> 
> 赞同：2
> 
> 时间：2012-06-05T06:21:49.663
> 
> 标签：xml, delphi, encoding

如果我逐行构建 XML，我可以设置编码，但是当我从文件加载它时，我无法添加编码。看：

```
procedure TForm1.Button1Click(Sender: TObject);
var
    x : TXMLDocument;
    s : string;
    w : WIdeString;
begin
    s := '<?xml version="1.0"?><a><b/></a>';
    x := TXMLDocument.Create(Self);
    x.XML.Text := s;
    x.Active := True;
    x.Encoding := 'UTF-8';
    x.DocumentElement.childNodes['b'].attributes['x'] := '1';
    x.SaveToXML(w);
    ShowMessage(w);
end; 
```

有趣的是结果中缺少“编码”部分！

如何使结果包含 XML 编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:39:23.773

您正在将 XML 保存到 WideString。根据定义， [WideString](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/System__WideString.html)是 UTF16 编码的，因此指定另一种编码毫无意义。IIRC，您*可以*指定一个`encoding="UTF-16"`不会被删除的 ，因为它就是这样。

但是，如果您随后将 XML 文档保存到流中，则可以指定不同的编码。

# sql - 相对路径连接字符串 vb.net

> ID：10892573
> 
> 赞同：1
> 
> 时间：2012-06-05T06:21:58.587
> 
> 标签：sql, vb.net, visual-studio-2010, sql-server-2008-express

> **可能重复：**
> [SQL Express 连接字符串 - 相对于应用程序位置](https://stackoverflow.com/questions/3500829/sql-express-connection-string-relative-to-application-location)

我有一个用 vb.net 编写的桌面应用程序。该应用程序使用 SQL Server express 2008 数据库（.mdf 文件）。目前我将连接字符串作为绝对路径，如下所示：

```
Dim ObjConnection As New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Pantheo\Documents\Visual Studio 2010\Projects\Food Manager 2012(new)\Food Manager 2012\Food_CustomerDB.mdf;Integrated Security=True;User Instance=True") 
```

在我的电脑上它运行得很好。如果我构建它并让 .exe 运行到不同的 pc 它会崩溃，因为它无法附加数据库。

我尝试使用此连接字符串使其相对：

```
 Dim ObjConnection As New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Food_CustomerDB.mdf;Initial Catalog=Food_CustomerDB;Integrated Security=True;User Instance=True") 
```

没有成功。有人能帮我吗？我知道还有很多其他答案，基本上是关于 C#，但我无法实现它们。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:59:39.880

该`DataDirectory`值只是从 AppDomain.CurrentDomain 属性列表中提取的字符串。在 WinForm 应用程序中不是预定义的，但您可以在打开数据库之前设置它。

```
AppDomain.CurrentDomain.SetData("DataDirectory", @"C:\MyReadWriteFolder") 
```

`AttachDbFilename=|DataDirectory|\Food_CustomerDB.mdf`那么如果您将数据库放在那里（C：\ MyReadWriteFolder），则连接字符串应该可以工作。

# javascript - 我们可以在 Cordova 函数（PhoneGap）中嵌入另一个 JavaScript 吗？

> ID：10892575
> 
> 赞同：0
> 
> 时间：2012-06-05T06:22:03.830
> 
> 标签：javascript, cordova

我们可以在cordova phonegap 的功能中调用或放置任何其他java 脚本代码（如jquery mobile）吗？就像我在下面有一个功能

```
 function onOffline() {
    //here i want to put another javascript
 } 
```

是否可以向我展示各种方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:32:25.327

假设`onOffline`是来自侦听器对离线事件的回调（例如文档中的那个）：

```
document.addEventListener("offline", onOffline, false);

function onOffline() {
    // Handle the offline event
} 
```

然后你可以在回调中放入任何你喜欢的 js，包括使用 jQuery 或 zepto 等框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:29:14.893

如果您想创建本地应用程序，那么您永远不会更改 cordova.js 文件，但对于特定平台，您可以。

# php - 如何使用 XMPP 和 BOSH 实现 Facebook 聊天

> ID：10892576
> 
> 赞同：3
> 
> 时间：2012-06-05T06:22:07.613
> 
> 标签：php, xmpp, strophe

我正在开发一个基于 php 的网站。我想在其中实现 Facebook 聊天。

我的问题是我如何将 XMPP 与 BOSH 一起使用。XMPP和BOSH的关系是什么。

是否有任何示例源代码可以了解如何使用 JAXL 或 strophe.js 等库来实现 Facebook 聊天

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T05:48:00.767

> 我的问题是我如何将 XMPP 与 BOSH 一起使用。XMPP和BOSH的关系是什么。

BOSH 代表 http 上的双向流。它是为在 HTTP 上运行 XMPP 而设计的规范，但可用于在 http 上运行任何底层 tcp 级协议。

BOSH 基本上是在浏览器的限制范围内播放的，即一次不能向特定域发出超过 2 个请求。在这些限制内，BOSH 能够模拟服务器和客户端之间完整的双向管道。可以使用此虚拟管道传输有效负载，并且在用户体验方面它与实时一样好。

传统上，BOSH 是使用一种称为长轮询的技术来模拟的。但是，我已经成功地能够使用 jsonp 和 websockets（如果可用）运行相同的程序。

> 是否有任何示例源代码可以了解如何使用 JAXL 或 strophe.js 等库来实现 Facebook 聊天

我打赌你会找到足够多的使用 strophe.js 的网络聊天应用程序示例。您只需要一个像punjab或[ebosh （我写的）这样的](https://github.com/abhinavsingh/ebosh)[bosh](https://github.com/twonds/punjab/)连接管理器，它可以连接到任何 xmpp/jabber c2s 端点。

就 JAXL 示例示例而言，这里有一些您可以直接使用的示例：[https](https://github.com/abhinavsingh/JAXL/tree/master/app) ://github.com/abhinavsingh/JAXL/tree/master/app具体查看 boshchat.php、boshMUCchat.php 和 preFetchBOSH.php 示例它演示了 Jaxl 库的 BOSH 端支持。

如果您预计流量适中，则可以使用这些示例。对于基于大流量的应用程序，我强烈建议使用基于 strophe.js 的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:08:41.897

[BOSH](http://xmpp.org/about-xmpp/technology-overview/bosh/)是一种通过 HTTP 将消息从服​​务器发送到客户端的技术。它是为与 XMPP/Jabber 一起使用而开发的，作为模拟 TCP 的一种方式，但也可以被其他技术使用。本质上，BOSH 只是 XMPP 消息最常用的载体。

就实际实施而言，这个[问题可能对您有更多帮助。](https://stackoverflow.com/questions/5897833/architecture-to-facebook-chat-from-a-webpage-xmpp-strophe-punjab)

# php - 将 NULL 从 PHP 传递到 MySQL 以实现自动增量

> ID：10892577
> 
> 赞同：2
> 
> 时间：2012-06-05T06:22:10.097
> 
> 标签：php, mysql, mysqli

所以我在 MySQL 中有一个三列的数据库设置。第一列是“idnum”，它会自动增加用户 ID 号。第二个和第三个是名字和姓氏。我的问题是当我通过我的 PHP 文件中的查询字符串将名称发送到数据库时，我得到了几个不同的错误......

当我发送查询时：

```
$sql = "insert into namesdb values('NULL', 'firstname', 'lastname')";
$result = $db->query($sql); 
```

我得到了这个错误：“不正确的整数值：第 1 行的列 'idnum' 的 'NULL'。” 因为第 1 列是 INT 类型。

但是当我发送这个查询时：

```
$sql = "insert into namesdb values(".NULL.", 'firstname', 'lastname')";
$result = $db->query($sql); 
```

我得到一个语法错误...

知道我在这里做错了什么吗？

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:23:18.480

它应该是：

```
$sql = "insert into namesdb values(NULL, 'firstname', 'lastname')";
$result = $db->query($sql); 
```

`'NULL'`是一个字符串`"NULL"`。

虽然另一种选择（我会选择的那个）是明确列出列：

```
INSERT INTO namesdb (firstname, lastname) VALUES ('firstname', 'lastname') 
```

我更喜欢列出这些列，因为它更具未来性，而且更容易看到正在发生的事情。想象一下，如果将来重新排列、添加或删除列。如果您必须在任何地方（例如）删除第 6 个未命名参数，那么突然修复您的查询将是一个巨大的痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:25:36.343

您可以通过这种方式编写查询以避免该问题。

```
 $sql = "INSERT INTO table_name SET column_name_1 = 'value_1', column_name_2 = 'value_2'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:25:48.400

```
$sql = "insert into namesdb values('NULL', 'firstname', 'lastname')"; 
```

在上面的查询中，'NULL' 是一个字符串对象，而你的列是一个整数，所以错误。

```
$sql = "insert into namesdb values(".NULL.", 'firstname', 'lastname')"; 
```

在此查询中，您发送 php NULL 值，因此最终查询如下所示

```
"insert into namesdb values(, 'firstname', 'lastname')"; 
```

所以是无效的。

正确的插入方式应该是这样的

```
$sql = "insert into namesdb values(NULL, 'firstname', 'lastname')"; 
```

或者像这样

```
$sql = "insert into namesdb values('firstname', 'lastname')"; 
```

上述查询有效的原因是自动增量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T06:24:14.140

最好指定要插入的字段名称，不要指定 id 字段

喜欢

```
 insert into namesdb(firstname,lastname) values('firstname', 'lastname') 
```

它会自动增加你的 id 字段

# c# - 从 Windows 服务运行管理任务

> ID：10892579
> 
> 赞同：1
> 
> 时间：2012-06-05T06:22:23.223
> 
> 标签：c#, windows-services

我有一个 Windows 服务，我必须从中运行一个进程。但是，该过程需要管理员权限才能运行。在里面`Process Explorer`，我看到该服务确实运行了该进程，但该进程的 UI 没有出现。

我在这里想念什么？如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:25:24.250

如果您在 Windows Vista 或 7 上工作，则服务无法像 Windows XP 那样与桌面交互，也无法像普通 Windows 应用程序那样打开窗口。它们默认作为本地系统帐户运行，这是一个完全特权帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:26:25.490

这些服务在单独的会话中运行，具有单独的桌面。把它想象成服务在另一个远程桌面会话中运行。从服务中启动的任何带有 GUI 的内容都将显示在该隐藏会话中，无法访问。

# mysql - 在 select 语句中使用 case 条件

> ID：10892580
> 
> 赞同：-2
> 
> 时间：2012-06-05T06:22:27.723
> 
> 标签：mysql, sql

我想使用案例条件来获取日期之间的值。

我有一个表名用户和一个列日期，我想使用日期条件从数据库中获取值。

```
select sum(visitor) AS V FROM user  WHERE date  < '21-05-2012' AND dDateTime > '11-05-2012' 
select sum(visitor) AS c FROM user  WHERE date  < '21-06-2012' AND dDateTime > '11-06-2012'
select sum(visitor) AS s FROM user  WHERE date  < '21-07-2012' AND dDateTime > '11-07-2012'
select sum(visitor) AS g FROM user  WHERE date  < '21-08-2012' AND dDateTime > '11-08-2012' 
```

如何在一条语句中完成整个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:38:45.660

`sum`这是带有内部的 a 的示例`case`：

```
select sum(case when date < '21-05-2012' AND dDateTime > '11-05-2012' then visitor end) v 
,      sum(case when date < '21-06-2012' AND dDateTime > '11-06-2012' then visitor end) c
,      sum(case when date < '21-07-2012' AND dDateTime > '11-07-2012' then visitor end) s
,      sum(case when date < '21-08-2012' AND dDateTime > '11-08-2012' then visitor end) g
from   user 
```

# pointers - 指针问题

> ID：10892585
> 
> 赞同：0
> 
> 时间：2012-06-05T06:22:44.793
> 
> 标签：pointers

我正在尝试一些基本的指针操作，并且有一个我想澄清的问题。这是我所指的代码片段

```
 int arr[3] = {0};
*(arr+0) = 12;
*(arr+1) = 24;
*(arr+2) = 74;
*(arr+3) = 55;
cout<<*(arr+3)<<"\t"<<(long)(arr+3)<<endl;
//cout<<"Address of array arr : "<<arr<<endl;
cout<<(long)(arr+0)<<"\t"<<(long)(arr+1)<<"\t"<<(long)(arr+2)<<endl;;
for(int i=0;i<4;i++)
    cout<<*(arr+i)<<"\t"<<i<<"\t"<<(long)(arr+i)<<endl;
//*(arr+3) = 55;
cout<<*(arr+3)<<endl<<endl; 
```

我的问题是：当我尝试在 for-loop 之外访问 arr+3 时，我得到了所需的值 55 打印。但是当我尝试通过 for 循环访问它时，我得到了一些不同的值（在这种情况下为 3）。在 for 循环之后，它将值打印为 4。有人可以向我解释发生了什么吗？提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:27:15.993

您已经创建了一个大小为 3 的数组，并且您正在尝试访问第 4 个元素。因此结果是不确定的。

由于您在堆栈中分配数组，因此您第一次尝试写入第 4 个元素时，实际上是在为堆栈分配的空间之外进行写入。在 Debug 模式下这将起作用，但在 Release 中，您的程序可能会崩溃。

第二次在第 4 位读取值时，您正在读取值 4。这是有道理的，因为编译器在变量 i 的数组之后分配了堆栈空间，在循环完成执行后将具有值 4 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:29:57.323

由于数组已定义为 3 个元素，因此数据将按顺序存储，如 12、24、74。当您为第 4 个元素分配 55 时，它会存储在内存中的其他位置，而不是按顺序存储。第一次，编译器正确打印它，但它无法处理内存，所以它打印垃圾值。

# ubuntu - 在 Ubuntu 12.04 上全新安装 CouchDB 后无法与管理员用户连接

> ID：10892586
> 
> 赞同：3
> 
> 时间：2012-06-05T06:22:47.037
> 
> 标签：ubuntu, couchdb, ubuntu-12.04

我在 Ubuntu 12.04 上有一个 CouchDB 安装问题，实际上不是安装问题，而是配置问题。安装后

```
sudo apt-get couchdb 
```

我编辑`/etc/couchdb/local.ini`并添加

```
adminuser = mypass 
```

到该`[admin]`部分，然后我尝试

```
 curl http://adminuser:mypass@127.0.0.1:5984 
```

但我明白了

```
{"error":"unauthorized","reason":"Name or password is incorrect."} 
```

当然，我编辑后重启了服务器`local.ini`

我也尝试了这里所说的：[http](http://wiki.apache.org/couchdb/Installing_on_Ubuntu) ://wiki.apache.org/couchdb/Installing_on_Ubuntu ：“解决添加管理员挂起或在`local.ini`...中设置管理员的问题”但仍然没有运气:(

之后我使用最新版本进行了测试，`git`但错误仍然存​​在。我不得不说，在重新启动 Ubuntu 后它可以工作，但我需要这个工作开箱即用，而不需要重新启动安装脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:26:11.187

使用 _config 修改 .ini 文件更安全，因为这将遵循所有转义和间距规则（在您的情况下， = 周围的空格可能是问题所在）

```
curl -X PUT localhost:5984/_config/admins/adminuser -d '"mypass"'" 
```

# glassfish - 无法加载网络应用

> ID：10892591
> 
> 赞同：0
> 
> 时间：2012-06-05T06:23:09.210
> 
> 标签：glassfish

无法加载 Web 应用程序和控制台显示以下内容

> InstallationHandlers.isRegistered() 失败，原因：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

这是什么意思？任何想法 ？

谢谢，普拉莫德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:25:26.387

检查您的 SSL 设置。尝试关闭 SSL 并查看是否有帮助。
并且，正如错误消息所说，检查密钥库的所有路径和所有证书别名。
我不使用 glassfish - 我只看错误信息。PKIX 是包含证书的文件格式。所有证书，取决于 CA（证书颁发机构），属于不同的路径。示例：来自 Thawte 的证书属于 Thawte 证书路径，来自 Verisign 的证书属于 Verisign 路径。所以你使用的证书有问题：我认为它不属于任何注册路径。使用证书的最流行方法之一是 SSL，所以我认为这是您的情况。SSL 设置应该在 glassfish 中的某个地方 - 谷歌它。或者，也许，您可以让您的应用程序使用未加密的连接。

# c - 带有哈希的外壳安全性

> ID：10892595
> 
> 赞同：1
> 
> 时间：2012-06-05T06:23:35.000
> 
> 标签：c, security, shell

**出于教育目的**，我正在实现一个简单的远程 shell 程序，并且我正在努力思考如何使它有点安全。我的第一个想法是只需要一个密码。如果客户端发送密码，它运行，如果没有，它退出。然后，我对密码应用了一个简单的散列函数，但我不认为这真的使它更安全。在任何一种情况下，如果数据包被拦截，攻击者就可以提取密码或散列密码。~~我该怎么做才能使这更安全~~有没有一种方法可以使用密码/散列来避免基本数据包拦截？我知道 ssh 使用公钥/私钥来加密和解密，但这比我需要的更高级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:38:19.603

# ios5 - 使用 ant 创建 .ipa 文件

> ID：10892607
> 
> 赞同：0
> 
> 时间：2012-06-05T06:24:28.290
> 
> 标签：ios5, ant, ipa

我想使用 ant 脚本清理、构建和创建 .ipa 文件。我还需要设置应用程序图标。我在网上搜索但找不到解决方案。我更喜欢通过终端运行蚂蚁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:30:32.227

您可以使用以下命令创建一个 script.sh 而不是 Ant：

```
#!/bin/sh

cd {PROJECT_BUILDDIR}
xcodebuild -sdk iphoneos5.1 -configuration Release "ARCHS=armv6 armv7" clean build

/usr/bin/xcrun -sdk iphoneos PackageApplication -v "${PROJECT_BUILDDIR}/${PROJECT_NAME}.app" -o "${BUILD_HISTORY_DIR}/${APPLICATION_NAME}.ipa" --sign "${DEVELOPER_NAME}" --embed "${PROVISONING_PROFILE}" 
```

为了开始这个，打开终端并写下：

```
sudo bash script.sh 
```

这个未经测试，可能存在一些小错误

对于一些[提示](http://gavrix.wordpress.com/2012/02/21/xcode-automation-tips/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:28:42.827

尝试搜索 Ant + XCodeBuild。那里应该有很多示例可以让您大致了解如何从 ANT 编写 XCode 构建脚本。

关键是终端 xcodebuild 命令，如果您在 Mac 上运行构建，则只能使用 Ant 执行此操作。

# jquery - 成功或失败弹出窗口

> ID：10892618
> 
> 赞同：0
> 
> 时间：2012-06-05T06:25:33.210
> 
> 标签：jquery

我有一个 php 类，用于在操作（发布表单/更新页面）当前刷新页面和 psts 1 或 0 之后显示成功消息或失败消息，然后是以下代码 - - 我怎样才能让它弹出起来并自动关闭...就像绿色的勾号或十字...假设需要使用 jquery - - 完全迷失在这里所以欢迎任何建议...谢谢

```
 <?
    $response = $_GET['response'];
    if ($response == '0') {
    echo"
    <div class=\"error message\">
                 <h5>FYI, something just happened!</h5>
                 <p>This is just an info notification message.</p>
    </div>
    ";
    }
    if ($response == '1') {
    echo"
    <div class=\"success message\">
                 <h5>FYI, something just happened!</h5>
                 <p>This is just an info notification message.</p> 
    </div>
    ";
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:45:35.527

首先尝试这个[http://jsfiddle.net/tanducar/bJ6L9/1/](http://jsfiddle.net/tanducar/bJ6L9/1/)

如果您通过 ajax 收到此弹出消息，那么...这里是代码

```
$(document).ready(function(){
         ... your ajax call here
         success: function(data){
            var popup= $('<div>');
            popup.append(data);
            $('body').append(popup);
            popup.css("position","absolute");
            popup.css("top", ($(window).height() - popup.height() ) / 2+ $(window).scrollTop() + "px");
            popup.css("left", ($(window).width() - popup.width() ) / 2+ $(window).scrollLeft() + "px");

            popup.fadeOut(3000);
         }
     ......

}) 
```

在 javascript 中编写您的 php 代码。

```
 <script>
    $(document).ready(function(){
<?php    
$response = $_GET['response'];
     if ($response == '0') { ?>
      var data = $('<div class="success message"><h5>FYI, something just happened!</h5> <p>This is just an info notification message.</p> </div>');
    <?php } 
        if ($response == '1') {?>
       var data = $('<div class=\"success message\"><h5>FYI, something just happened!</h5><p>This is just an info notification message.</p> </div>');
    </div>
    <?} ?>

     var popup= $('<div>');
     popup.append(data);
     $('body').append(popup);
     popup.css("position", "absolute");
     popup.css("top", ($(window).height() - popup.height()) / 2 + $(window).scrollTop() + "px");
     popup.css("left", ($(window).width() - popup.width()) / 2 + $(window).scrollLeft() + "px");
     popup.fadeOut(2000);
    });

    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:29:14.277

```
$(function() {
    setTimeout(function() {
        $("#message").hide('blind', {}, 500)
    }, 5000);
}); 
```

它将在 5 秒后关闭您的弹出窗口

# iphone - iphone 4s如何更改当前位置？

> ID：10892626
> 
> 赞同：0
> 
> 时间：2012-06-05T06:25:54.543
> 
> 标签：iphone, ios5, gps, xcode4.2, core-location

我在我的应用程序中使用核心位置框架我不得不问我如何更改 iphone 4s 中的当前位置以测试核心位置框架的这个功能：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation      
   *)newLocation fromLocation:(CLLocation *)oldLocation { 
```

在这个函数中，我通过点击特定链接在服务器上发送 newLocation。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:31:09.470

我认为你有3个选择，

1）您可以使用[iSimulate模拟位置](http://www.vimov.com/isimulate/faq/)

2）在xcode 4.2中，您可以使用调试器本身进行模拟..

![在此处输入图像描述](../Images/3a3d4269e39ed932079d5422b75f6049.png)

3）或随身携带手机与您的应用程序..对不起;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:35:18.777

您可以使用 iOS 5.0 的 XCode4.2 中的模拟器对其进行测试。

在调试区域中，您可以在模拟器中运行应用程序时更改一些预定义的位置，您还可以在 GPX 文件中定义自定义位置。这是有关如何添加自定义位置的教程。

[http://plainoldstan.blogspot.hk/2011/08/on-gpx-files-for-xcode-42.html](http://plainoldstan.blogspot.hk/2011/08/on-gpx-files-for-xcode-42.html)

# iphone - 在 iPhone 应用程序中添加放大/缩小图像的功能

> ID：10892630
> 
> 赞同：-1
> 
> 时间：2012-06-05T06:26:19.850
> 
> 标签：iphone, objective-c, image, uiscrollview, uiimageview

在 iPhone 应用程序中，我想添加功能（imageview 或 webview 或其他控件）用捏合手势放大/缩小图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:30:16.727

你可以使用 a `UIScrollView`。

将 UIImageView 添加到`UIScrollView`并配置 UIScrollView 以通过其属性进行缩放。检查[UIScrollview 类参考 - 缩放和平移部分](https://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/doc/uid/TP40006922-CH3-SW36)

编辑：迈克的好点：`PhotoScroller`也检查Apple的示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:39:41.510

请参考此代码。我已经在我的一个应用程序中使用了它，所以它可以工作：

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer {

    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
} 
```

也不要忘记将捏手势识别器添加到您的 imageView。

![在此处输入图像描述](../Images/11b61922ceaa10e607329e79b78cdcde.png)

希望这可以帮助。

# mongodb - 如何在 Morphia 中自然地反向排序？

> ID：10892631
> 
> 赞同：2
> 
> 时间：2012-06-05T06:26:21.533
> 
> 标签：mongodb, morphia

我有一个上限集合，我知道我需要发布：

```
find().sort({$natural:-1}) 
```

按最近的优先排序。但是我如何在 Morphia 中做到这一点？

```
query.order("-$natural"); // doesn't work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:07:21.743

找到了解决方案：在创建查询对象后禁用验证，并且一切都按预期运行。

# c# - 如何使用 C# 读取文本文件中的日期

> ID：10892633
> 
> 赞同：1
> 
> 时间：2012-06-05T06:26:27.233
> 
> 标签：c#, text-files

我正在使用 C#**将日志**写入本地位置 (C:\temp\log.txt)的**文本文件中。**文本文件存储如下

```
 2011-11-17 23:05:17,266 [6] FATAL Application

 2011-11-17 23:05:18,094 [6] FATAL Service

 2011-11-17 23:17:08,862 [6] FATAL Receipts - SaveReceipts
 System.InvalidOperationException: Sequence contains no elements
 at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
 at GID.AAFramework.EntityWrapper.ReceiptFacade.SaveReceipts(IEnumerable`1 records,     String user) in     c:\AdvancedAnalyticsProjects\Surya\Trunk\dotnet_src\GID.AAFramework.EntityWrapper\ReceiptFacade.cs:line 632 
```

现在我想读取这个文件并想**记录第一次输入的日期**和**最后一个日期**

如何在此文本文件中获取**第一次日期和最后一次更新日期？**

现在我正在使用以下代码阅读此文本文件：

```
StreamReader sr = new StreamReader(FileLocation);
if (sr != null)
{
  linelist.Add(sr.ReadToEnd());
  LogInfoByDate.Add(FileLocation, "StartDate:" + linelist.First().Substring(0, 10) + "|" + "EndDate:" + linelist.Last().Substring(0, 10));               
} 
```

**如果异常行是单行**，我编写的这段代码用于获取第一次日期和最后更新日期，但它**不适用于**如上所示的多行异常。现在这是我的问题。谁能告诉我如何在这个文本文件中取第一个和最后一个日期？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T07:25:44.237

这是使用 LINQ 和的方法[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)：

```
DateTime d = DateTime.Now;
var format = "yyyy-MM-dd HH:mm:ss,fff";
var fileDates = System.IO.File.ReadAllLines(path)
                .Where(l => l.Length >= format.Length
                        && DateTime.TryParseExact(l.Substring(0, format.Length)
                                                , format
                                                , CultureInfo.InvariantCulture
                                                , DateTimeStyles.None
                                                , out d)
                )
                .Select(l => d)
                .OrderBy(dt => dt);

if (fileDates.Any())
{
    DateTime firstDate = fileDates.First();  // 2011-11-17 23:05:17,266
    DateTime lastDate  = fileDates.Last();   // 2011-11-17 23:17:08,862
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:50:42.607

这是一个如何解析的示例：

```
//init datetime list for log entries
List<DateTime> logDates = new List<DateTime>();

//Define regex string
string pattern = @"(?<logDate>(\d){4}-(\d){2}-(\d){2}\s(\d){2}:(\d){2}:(\d){2})";
Regex reg = new Regex(pattern);

//read log content
string logContent = File.ReadAllText("test.log");

//run regex
MatchCollection matches = reg.Matches(logContent);

//iterate over matches
foreach (Match m in matches)
{
    DateTime logTime = DateTime.Parse(m.Groups["logDate"].Value);
    logDates.Add(logTime);
}

//show first and last entry
Console.WriteLine("First: " + logDates.First());
Console.WriteLine("Last: " + logDates.Last()); 
```

我已经删除了几毫秒的逗号，只是为了更容易解析。

问候弗洛里安

# android - android eclipse上的网络服务

> ID：10892637
> 
> 赞同：-3
> 
> 时间：2012-06-05T06:26:57.360
> 
> 标签：android, web-services

我是 android/eclipse(java) 的新手，事实上这个论坛也是。

有没有人遇到过这种情况？

从用户那里获取输入并通过使用来自 android/eclipse 的 Web 服务来显示适当的结果。是否有可用的示例？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:07:30.910

我正在发布教程链接

[这里是android basic ksoap android tutorial](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)中访问web服务的基本android教程

并在 java 中创建 web 服务使用本教程[如何创建基于 java 的 web 服务](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

使用 java 编写 Web 服务，然后使用 ksoap 库，您将得到响应。然后根据您的要求格式化该响应。参考代码：

```
private static final String NAMESPACE = "http://tempuri.org/"; 
private static final String URL ="http://localhost/Web_Service.asmx?";// replace it by your Webservice URL
private static final String METHOD_NAME = "Function_Name";
private static final String SOAP_ACTION = "Soap Action";

SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
request.addProperty("parm_name",prm_value);// Parameter for Method
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
try 
{
    androidHttpTransport.call(SOAP_ACTION, envelope);//call the eb service Method
} 
catch (Exception e) 
{
    e.printStackTrace();
}//Next task is to get Response and format that response
    SoapObject response;
    response= (SoapObject) envelope.bodyIn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:33:43.540

也有同样的例子，请谷歌......

这仅用于启动

肥皂

[http://android.vexedlogic.com/2011/04/17/android-lists-iv-accessing-and-sumption-a-soap-web-service-i/](http://android.vexedlogic.com/2011/04/17/android-lists-iv-accessing-and-consuming-a-soap-web-service-i/)

[http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

其他

[http://webhole.net/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/](http://webhole.net/2011/11/15/android-tutorial-how-to-post-data-from-an-android-app-to-a-website/)

[http://apachejava.blogspot.in/2011/06/partial-http-post-show-data-webview.html](http://apachejava.blogspot.in/2011/06/partial-http-post-show-data-webview.html)

[http://senior.ceng.metu.edu.tr/2009/praeda/2009/01/11/a-simple-restful-client-at-android/](http://senior.ceng.metu.edu.tr/2009/praeda/2009/01/11/a-simple-restful-client-at-android/)

# java - 子类从父类实例化

> ID：10892641
> 
> 赞同：0
> 
> 时间：2012-06-05T06:27:24.447
> 
> 标签：java, class, inheritance, reflection, instance

可以从没有子类名的父类实例化子对象。

例如，我有下一节课：

```
public class A {
   protected int a;

   public A1() {
       a = 0;
   }

   public int getA() {
       return a;
   }

   public static A getObject() {
       // some code which I need to write
   }
}

public class A1 extends A {
    public A1() {
        a = 5;
    }
}

public class A2 extends A {
    public A2() {
        a = 10;
    }
} 
```

使用示例：

```
A a = A1.getObject();
a.getA(); // return 5

a = A2.getObject();
a.getA(); // return 10

a = A.getObject();
a.getA(); // return 0 
```

A1、A2 并不是所有的子类。可能有无限数量。

我如何编写 getObject() 方法来创建 A 类子实例。

**PS：**

*我只需要初始化子类对象，但是有大量子类，我不会为所有子类调用“new”，也不会编写静态方法来初始化它，而且所有子类都有相同的构造函数。我无法从父级创建子实例是很大的缺陷。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:04:15.300

当你写的时候`A a = A1.getObject()`，你确实使用了子类名（A1）。所以a）你的问题是误导性的，b）你为什么不能写`A a = new A1()`？

如果你想写`A1.getObject()`，那么你可以`getObject()`在 A1 类中重新定义：

```
public class A1 extends A {
   public static A getObject() {
     return new A1();
   }

} 
```

如果不重新定义，就无法`getObject()`在类 A 中声明，以便它返回不同类的对象，因为`A a = A1.getObject()`会编译为`A a = A.getObject()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:03:45.353

```
class A
{
   protected int a;

   public A()
   {
       a = 0;
   }

   public int getA()
   {
       return a;
   }

   public static A getObject(Class c) throws Exception
   {
        A obj = (A)c.newInstance();
    return obj;     
   }
}

class A1 extends A
{
    public A1()
    {
        a = 5;
    }
}

class A2 extends A
{
    public A2()
    {
        a = 10;
    }
}
class Test{
    public static void main(String args[]) throws Exception
    {
        A a = A1.getObject(A1.class);
        System.out.println(a.getA()); // return 5

        a = A2.getObject(A2.class);
        System.out.println(a.getA()); // return 10

        a = A.getObject(A.class);
        System.out.println(a.getA()); // return 0
    }
} 
```

# oracle - oracle中的嵌套游标

> ID：10892643
> 
> 赞同：0
> 
> 时间：2012-06-05T06:27:30.880
> 
> 标签：oracle, plsql, cursor, procedure

我在 oracle 中得到了这个存储过程

```
create or replace
procedure mayor_sueldo
as
  cursor c_depto is select deptno from dept;
  c_deptno dept.deptno%type;
  c_empno number;
  c_ename emp.ename%type;
  c_job emp.job%type;
  c_sal emp.sal%type;
begin
  open c_depto;
  fetch c_depto into c_deptno;
  while ( c_depto%found )loop
    select empno, ename, job, sal into c_empno, c_ename, c_job, c_sal from emp where sal = (select max(sal) from emp where(deptno = c_deptno) );
    dbms_output.put_line( c_empno||'-'||c_ename||'-'||c_job||' '||c_sal );
    fetch c_depto into c_deptno;
  end loop;
close c_depto;
end; 
```

问题出在 while 块内的查询内部，如果查询返回一行且仅一行，则没有问题，但是当查询返回多行时，我在想我可以使用另一个游标，但不知道如何使用。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:32:30.267

也许这会有所帮助：`for _row in (select ....) loop dbms_output(_row.a || ..); end loop;`

# ruby-on-rails-3 - Markitup 自定义 bbcodes

> ID：10892645
> 
> 赞同：0
> 
> 时间：2012-06-05T06:27:35.323
> 
> 标签：ruby-on-rails-3, bbcode, markitup

我正在尝试使用几个代码创建一个简单的支持 bbcode 的文本编辑器，但我需要为它们创建一些自定义代码和按钮，例如 [cut=#{line}]#{text}[/cut] 和 [谈话]#{文本}[/谈话]。而且我找不到任何手册来说明如何在标记中做到这一点。

**更新**

我在服务器端使用 rails 并且我已经设置了 bb-ruby 来安全地处理这些自定义 bb 代码，我只需要将它们包含在 markitup 设置中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:10:34.640

您可以下载[BBCODE 集](http://markitup.jaysalvat.com/downloads/demo.php?id=markupsets/bbcode) 并将您的自定义按钮添加到其中。

[文档](http://markitup.jaysalvat.com/documentation/)，Magic Markups 部分解释了如何添加和自定义按钮。

# c++ - 使用 aho-corasick 算法崩溃？

> ID：10892646
> 
> 赞同：1
> 
> 时间：2012-06-05T06:27:39.660
> 
> 标签：c++, algorithm, aho-corasick

我在这里得到了 aho-corasick 算法的代码：[http](http://www.komodia.com/aho-corasick) ://www.komodia.com/aho-corasick 。

我按照指南所说的那样使用它，添加了线条并构建了树。

然而，我确实将它从使用 std wstring 更改为 std string 但这无关紧要。我刚刚更改了typedef。

当我使用它并搜索某些东西时，如果没有找到结果就没有问题。找到结果后，我得到一个标准超出范围异常。

它在这里崩溃：

```
 if (aIterator==pNode->aMap.end())
            //No, check if we have failure node
            if (!pNode->pFailureNode)
            {
                //No failure node, start at root again
                pNode=&m_aRoot;

                //Reset search string
                sMatchedString="";

                //Did we do a switch?
                if (bSwitch)
                    //We need to do this over
                    --iCount;

                //Exit this loop
                break;
            }
            else
            {
                //What is the depth difference?
                unsigned short usDepth;
                usDepth=pNode->usDepth-pNode->pFailureNode->usDepth-1;

                //This is how many chars to remove
                sMatchedString=sMatchedString.substr(usDepth,sMatchedString.length()-usDepth); //CRASHES HERE!!

                //Go to the failure node
                pNode=pNode->pFailureNode;

                //Set to switch
                bSwitch=true;
            }
        else
        {
            //Add the char
            sMatchedString+=rString[iCount];

            //Save the new node
            pNode=aIterator->second;

            //Exit the loop
            break;
        }
    } 
```

它在这里崩溃：

```
sMatchedString=sMatchedString.substr(usDepth,sMatchedString.length()-usDepth); 
```

以下是变量：

![在此处输入图像描述](../Images/3719c23c24cc178658bc04c67a6f6378.png)

我正在使用它在游戏中实施审查。

什么可能导致它崩溃？

我有一些字符串添加了两次，这会导致问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:33:19.417

一个可能的问题是`sMatchedString`，`"u"`而 usDepth 为 3。这导致来自第三个字符（在一个字符串中）的子字符串，长度为 -2。

# com - 尝试使用 Scripting.Dictionary 时出现权限被拒绝错误

> ID：10892653
> 
> 赞同：1
> 
> 时间：2012-06-05T06:28:17.193
> 
> 标签：com, asp-classic, vb6, iis-7.5, windows-server-2008-r2

我正在使用 windows server 2008 R2 64 位和 IIS 7.5 并托管一个经典的 asp（32 位）网站并在 COM 服务器（也有 windows server 2008 R2 64 位）上调用 COM 组件。但收到错误“权限被拒绝”，错误代码为 800A0046。

```
Set oDictAOGroup = CreateObject("Scripting.Dictionary")
oDictAOGroup.Add "1000", "5"
oUser.fn_Update_AO_Groups(oDictAOGroup) 
```

asp 网站服务器使用 DCOM 与 COM 服务器进行通信。在 asp 网站服务器代理是由 COM 服务器类创建的。

我创建了一个测试函数并将值传递给该函数，然后代码工作得很好。

```
oUser.fn_Update_AO_Groups_Test1("1000", "21") 
```

但是当尝试传递 Scipting.Dictionary 对象时，会引发权限被拒绝错误。我为此搜索了很多，但徒劳无功。

函数的代码是

```
Public Function fn_Update_AO_Groups(vntAODict As Variant)

On Error GoTo ErrorHandler

Dim oADOConnect As AMLCONNECT_V2.clsConnect
Dim oADOConn        As ADODB.Connection
Dim oADOCmd         As ADODB.Command
Dim vntKey          As Variant

    If Not objContext Is Nothing Then
        Set oADOConnect = objContext.CreateInstance("AMLCONNECT_V2.clsConnect")
        Set oADOCmd = objContext.CreateInstance("ADODB.Command")
    Else
        Set oADOConnect = New clsConnect
        Set oADOCmd = New ADODB.Command
    End If

    If IsObject(vntAODict) Then
        If oADOConnect.OpenADOConnection(oADOConn) Then
            With oADOCmd
                .CommandText = "Sp_Upd_AOGroups"
                .CommandType = adCmdStoredProc
                .Parameters.Append .CreateParameter("AO_ID", adInteger, adParamInput)
                .Parameters.Append .CreateParameter("Email_Group_ID", adInteger, adParamInput)
                Set .ActiveConnection = oADOConn
            End With
            'Execute stored procedure for each item in the dictionary
            For Each vntKey In vntAODict.Keys
                oADOCmd.Parameters("AO_ID").Value = vntKey
                oADOCmd.Parameters("Email_Group_ID").Value = vntAODict(vntKey)
                oADOCmd.Execute
            Next
        End If
    End If

TidyUp:

    Set oADOConn = Nothing
    Set oADOCmd = Nothing
    Set oADOConnect = Nothing

Exit Function

ErrorHandler:
    Dim ErrHandler As AMLCONNECT_V2.clsConnect

    If Not objContext Is Nothing Then
        Set ErrHandler = objContext.CreateInstance("AMLCONNECT_V2.clsConnect")
    Else
        Set ErrHandler = New AMLCONNECT_V2.clsConnect
    End If

    m_sErrorMessage = "Error Number: " + CStr(Err.Number) + "<BR>" + "Description: " + ErrHandler.LogError(Err.Number, Err.Description, "MODULE: AMLADMIN_V2.clsUsers", "FUNCTION:fn_Update_AO_Groups", errError, errVB, errDatabase, "")

    If Not ErrHandler Is Nothing Then Set ErrHandler = Nothing

    GoTo TidyUp:

End Function 
```

任何人都可以为此提出补救措施吗？

函数接受字符串的代码

```
Public Function fn_Update_AO_Groups_Test1(strKey As String, strValue As String)

On Error GoTo ErrorHandler

Dim oADOConnect As AMLCONNECT_V2.clsConnect
Dim oADOConn        As ADODB.Connection
Dim oADOCmd         As ADODB.Command
Dim vntKey          As Variant

Dim ErrHandlerTest As AMLCONNECT_V2.clsConnect

    If Not objContext Is Nothing Then
        Set oADOConnect = objContext.CreateInstance("AMLCONNECT_V2.clsConnect")
        Set oADOCmd = objContext.CreateInstance("ADODB.Command")

    Else
        Set oADOConnect = New clsConnect
        Set oADOCmd = New ADODB.Command

    End If

            If oADOConnect.OpenADOConnection(oADOConn) Then
                With oADOCmd
                    .CommandText = "Sp_Upd_AOGroups"
                    .CommandType = adCmdStoredProc
                    .Parameters.Append .CreateParameter("AO_ID", adInteger, adParamInput)
                    .Parameters.Append .CreateParameter("Email_Group_ID", adInteger, adParamInput)
                    Set .ActiveConnection = oADOConn
                End With
                'Execute stored procedure for each item in the dictionary
                    oADOCmd.Parameters("AO_ID").Value = strKey
                    oADOCmd.Parameters("Email_Group_ID").Value = strValue
                    oADOCmd.Execute
            End If
TidyUp:

    Set oADOConn = Nothing
    Set oADOCmd = Nothing
    Set oADOConnect = Nothing

Exit Function

ErrorHandler:
    Dim ErrHandler As AMLCONNECT_V2.clsConnect

    If Not objContext Is Nothing Then
        Set ErrHandler = objContext.CreateInstance("AMLCONNECT_V2.clsConnect")
    Else
        Set ErrHandler = New AMLCONNECT_V2.clsConnect
    End If

    m_sErrorMessage = "Error Number: " + CStr(Err.Number) + "<BR>" + "Description: " + ErrHandler.LogError(Err.Number, Err.Description, "MODULE: AMLADMIN_V2.clsUsers", "FUNCTION:fn_Update_AO_Groups", errError, errVB, errDatabase, "")

    If Not ErrHandler Is Nothing Then Set ErrHandler = Nothing

    GoTo TidyUp:

End Function 
```

谢谢， 瓦巴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:40:01.623

使用`Call oUser.fn_Update_AO_Groups(oDictAOGroup)`或`oUser.fn_Update_AO_Groups oDictAOGroup`不使用括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T11:09:00.417

试试这些签名：

```
Public Function fn_Update_AO_Groups(ByVal vntAODict As Variant) 
```

或者

```
Public Function fn_Update_AO_Groups(ByVal vntAODict As Scripting.Dictionary) 
```

如果您允许默认`ByRef`设置占上风，您需要更多的编组代码。还提供预期的显式类型也为编组代码提供了更多选项。这些更改可能足以允许您进行预期的操作。

如果失败了，我会重新考虑这种方法，我更愿意将 XML 字符串传递给 SP。这提供了最大的灵活性，允许对 SQL 和 ASP 的代码更改以影响新的需求，而无需重新编译和部署新的二进制文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:03:00.597

评论太长了，所以虽然这不是完整的答案，但它可能会让你朝着正确的方向前进。

首先，我注意到字段类型是整数，而您的字典键和值是字符串。因此，首先尝试通过将函数中的代码更改为：

```
oADOCmd.Parameters("AO_ID").Value = CLng(vntKey)
oADOCmd.Parameters("Email_Group_ID").Value = CLng(vntAODict(vntKey)) 
```

如果仍然是相同的错误，我需要知道当您将两个参数显式传递给函数而不是字典时，完全相同的代码是否可以正常工作？

想到的另一件事是您的错误处理可能出了问题，尝试将其删除以进行调试，看看您是否收到更有意义的错误消息。

# java - JButton 及其 Location 方法表现得很奇怪

> ID：10892655
> 
> 赞同：1
> 
> 时间：2012-06-05T06:28:17.767
> 
> 标签：java, swing, jbutton, layout-manager, grid-layout

我的问题是，当我创建一个 JButton 时，在其构造函数中，我使用以下代码将其位置设置为一些相对坐标，例如 x = 5 和 y = 6：

```
this.setLocation(new Point(x, y)); 
```

但是在我尝试使用 getLocation() 方法获取其位置之后，它总是返回 0,0。请注意，这发生在我试图放置在网格布局驱动的 JFrame 上的每个 JButton 上，并且在调试过程中，我还注意到它们的位置正在正确实例化。

有人可以向我解释为什么会发生这种情况，如果我能以某种方式解决它吗？

编辑：

构造函数（我制作的砖类，扩展了 JButton）：

```
public Brick(int posx, int posy) {
        this.setLocation(new Point(posx, posy));
        this.setVisible(true);
    } 
```

我在 2 个 for 循环中制作了大约 100 多个：

```
 for (int row = 0; row < 15; row++) {
    for (int column = 0; column < 15; column++) {
    Brick brickie = new Brick(row, column);
    }
   } 
```

但之后，如果我想挑选一块砖并像这样检查它的位置：

```
Point brickLocation = brickie.getLocation(); 
```

`brickLocation.x == 0`和_`brickLocation.y == 0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:48:44.980

`JComponent(s)`可以返回其坐标、getBounds 或`getLocation`仅

*   如果容器已经在屏幕上可见

*   后`pack()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T06:48:48.780

当布局管理器（您的 GridLayout）自动分配按钮位置时，您正在尝试更改按钮位置。这就是为什么你总是得到相同的值 - 布局只是覆盖它。

为了能够手动更改任何组件边界/位置（包括按钮） - 您必须将“null”设置为容器的布局。之后，只需根据需要更改位置/大小/边界，它将影响组件的位置。

此外，您不需要使用“setVisible(true)” - 默认情况下，该标志对于所有组件（即使是尚未显示的组件）都是 true。

# html - 将整个网页设计为 SVG 文件

> ID：10892659
> 
> 赞同：17
> 
> 时间：2012-06-05T06:28:51.417
> 
> 标签：html, svg

## 免责声明

我意识到鉴于标题的荒谬，这听起来像是一个巨魔。然而，这是一个真正的问题。我的背景涉及 OpenGL / x86 程序集。我最近开始学习网络编程。我真的很喜欢 SVG + CSS，并且想知道——为什么人们不用 SVG 设计整个网页？

## 语境

*   SVG提供了漂亮的原始：二次+三次贝塞尔曲线；线条 + 填充 - 全部为矢量图形
*   SVG 提供文本
*   SVG 提供仿射变换

## 问题

*   是否有将整个网站设计为巨大 SVG 文件的示例？
*   如果没有，有什么限制？
*   使用 SVG 原语而不是 divs/tables 时是否会影响性能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T07:55:51.670

有可能的; 例如，您可以在 SVG 文档中嵌入 HTML 片段以获得超链接等内容。

但是，至少在目前，存在一些明显的缺点：

*   当前的 Web 浏览器将 SVG 视为图像，并且可能无法向用户呈现良好的 UI。例如，我认为 Firefox 不允许用户选择 SVG 文件中的文本。
*   你失去了内容和表现的分离。虽然 SVG 确实使用 CSS，并且如果您手动编辑原则上可以保持分离，但您可能正在设计布局和内容。这有几个缺点：
    *   作为推论，将结果页面调整为其他格式更加困难。特别：
    *   更改文本大小时的行为是什么？文件打印了吗？窗口调整大小？很难设计一个复杂的绘图来很好地支持**回流**（如果你的绘图不复杂，你还不如只使用 HTML+CSS）。
    *   **屏幕阅读器**支持：由于顺序不明确（如下），屏幕阅读器可能会给出难以理解的混乱输出。更基本的是，屏幕阅读器可能会认为 SVG 是图像，甚至不会尝试阅读文本。
*   SVG 完全基于 XML，因此需要非常严格地遵守规则。使用 (X)HTML，您可以选择使用纯 HTML 序列化。然后，这些规则中的许多规则都放宽了，如果您向浏览器提供虚假输入（而不是`XML PARSING ERROR`如果您有一个 misplaced `>`），浏览器就会更加健壮。
*   ~~当前的搜索引擎可能不会索引您的页面（他们只会将它们视为整体图像）。~~ [*没关系*](https://www.google.com/search?q=filetype%3Asvg)
*   内容顺序不明确。像 Inkscape 这样的工具不需要关心元素的输出顺序，只要它们在输出中的位置正确并且 z 顺序正确。但是如果你正在制作一个网页，这确实很重要，因为屏幕阅读器并不确定哪个元素在语义上是第一的。如果您只是手动编辑 SVG，这不是问题，但通常的 SVG 工具可能会打乱您的订单。使用 HTML，它通常很清楚。
*   ~~很难`#id_of_some_element`很好地实现片段标识符（在 URL 的末尾）。下面的演示程序使用它们，但我认为它取决于 Javascript（对搜索引擎和禁用 javascript 的人不利）。~~(I'm not sure about this one) *̶ ̶I̶t̶'̶s̶ ̶d̶i̶f̶f̶i̶c̶u̶l̶t̶ ̶t̶o̶ ̶c̶o̶n̶v̶e̶r̶t̶ ̶t̶o̶ ̶t̶e̶x̶t̶ ̶(̶f̶o̶r̶ ̶s̶e̶a̶r̶c̶h̶ ̶e̶n̶g̶i̶n̶e̶s̶,̶ ̶s̶c̶r̶e̶e̶n̶ ̶r̶e̶a̶d̶e̶r̶s̶,̶ ̶c̶o̶p̶y̶-̶a̶n̶d̶-̶p̶a̶s̶t̶e̶,̶ ̶e̶t̶c̶.̶)̶,̶ ̶p̶a̶r̶t̶i̶c̶u̶l̶a̶r̶l̶y̶ ̶w̶h̶e̶n̶ ̶g̶e̶n̶e̶r̶a̶t̶e̶d̶ ̶w̶i̶t̶h̶ ̶g̶r̶a̶p̶h̶i̶c̶a̶l̶ ̶t̶o̶o̶l̶s̶.̶ ̶F̶o̶r̶ ̶e̶x̶a̶m̶p̶l̶e̶,̶ ̶h̶t̶t̶p̶:̶/̶/̶w̶w̶w̶.̶a̶f̶r̶o̶k̶a̶d̶a̶n̶s̶.̶c̶o̶m̶/̶P̶a̶g̶e̶_̶0̶1̶.̶s̶v̶g̶ ̶s̶h̶o̶w̶s̶ ̶u̶p̶ ̶i̶n̶ ̶G̶o̶o̶g̶l̶e̶ ̶a̶s̶ ̶ `̶D̶A̶N̶S̶E̶ ̶E̶T̶ ̶M̶I̶S̶E̶ ̶E̶N̶ ̶F̶O̶R̶M̶E̶ ̶B̶I̶E̶N̶V̶E̶N̶U̶E̶ ̶D̶ ̶a̶ ̶n̶ ̶s̶ ̶e̶ ̶r̶ ̶p̶o̶ ̶u̶ ̶r̶ ̶c̶é̶ ̶l̶ ̶é̶b̶ ̶r̶ ̶e̶ ̶r̶ ̶l̶ ̶a̶ ̶v̶ ̶i̶e̶.̶ ̶E̶ ̶n̶ ̶v̶e̶ ̶l̶ ̶o̶p̶p̶ ̶é̶ ̶e̶ ̶d̶ ̶e̶ ̶t̶ ̶a̶ ̶m̶ ̶b̶ ̶o̶ ̶u̶r̶ ̶s̶ ̶i̶n̶ ̶d̶o̶ ̶c̶ ̶i̶l̶ ̶e̶ ̶s̶ ̶e̶ ̶t̶ ̶i̶ ̶n̶ ̶c̶e̶ ̶s̶s̶ ̶a̶ ̶n̶t̶s̶`̶.̶ ̶I̶n̶ ̶c̶o̶n̶t̶r̶a̶s̶t̶,̶ ̶e̶v̶e̶n̶ ̶c̶r̶a̶p̶p̶y̶ ̶W̶Y̶S̶I̶W̶Y̶G̶ ̶H̶T̶M̶L̶ ̶g̶e̶n̶e̶r̶a̶t̶o̶r̶s̶ ̶w̶o̶n̶'̶t̶ ̶s̶p̶l̶i̶t̶ ̶u̶p̶ ̶r̶u̶n̶s̶ ̶o̶f̶ ̶t̶e̶x̶t̶ ̶l̶i̶k̶e̶ ̶t̶h̶a̶t̶ .̶

需要考虑的一点是，可以在 XHTML 和 HTML 5 中嵌入 SVG 元素，因此您可以在不脱离浏览器/搜索引擎的情况下获得一些好处。

# 现有用法

我听说过它用于演示（在某些方面更接近图纸，因此上述一些缺点不适用）：

*   [“Jessyink 是一种 JavaScript，可以合并到包含多个图层的 Inkscape SVG 图像中。每一层都将转换为演示文稿的一张幻灯片。”](http://code.google.com/p/jessyink/)
*   [另一个实现](http://adityab.github.com/Awwation/)；[信息](http://adityabhatt.wordpress.com/2012/04/06/writing-a-prezi-clone-with-html5-svg-and-javascript/)和[示例](http://dl.dropbox.com/u/40496552/awwation-intro.svg)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T06:52:17.107

在不知道任何 html 的情况下，可以使用 .svg 图像文件来创建网页，这真是太酷了。考虑到 html 标准的混乱程度，对于天生具有艺术天赋的人来说，使用 Inkscape .svg 文件可能会容易得多。当您想到 Inkscape 和 Openclipart 对从事桌面出版、剪贴簿等工作的人来说最有用时，能够直接从 Inkscape 导出网页将是一个强大的工具。

至于 600 年的排版，我们正处于 21 世纪，媒体出版不必遵循中世纪的排版理念。排版确实有它的宫殿，但我们正在谈论一个强大的实验，它可以帮助“普通乔”用户在不了解 CSS 或 HTML 的情况下将他们的艺术作品转化为网页。

作为参考，Opera 团队在将 SVG 用于网页方面做了大量工作 - [http://dev.opera.com/articles/svg/](http://dev.opera.com/articles/svg/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-10T15:25:49.773

有一个专门用于创建基于 SVG 的网站的平台：[Svija](https://svija.love)（免责声明：这是我的项目）。

SVG 网站的优势在于你可以做任何你想做的事；您不仅限于使用 HTML 的矩形行。

最大的问题是可访问性。目前 SVG 文本由 Google 抓取，但根据源文档的不同，它很容易出现乱序。通常由 HTML 标记（H1 比 P 更重要）传达的语义信息也不存在。

要实现的主要内容是：

*   您可以在 SVG 文件中使用外部字体和图像
*   必须正确指定宽度和高度，Microsoft 的浏览器才能以正确的大小显示 SVG
*   如果您组合不同的 SVG 文件，冲突的 ID 可能会导致 CSS 样式被误用

我发现唯一可以正确链接到图像和字体的程序是 Adob​​e Illustrator。有一个我发现的所有可以创建 SVG 文件的程序列表，[其中](https://svija.love/en/wtf#anchorSVG)包含有关哪些程序支持哪些功能的一些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:05:06.023

实际上，有些页面严重依赖 SVG。使用诸如[Raphaël](http://raphaeljs.com/)之类的 Javascript 库是一种常用的方法。[Paper.js](http://paperjs.org/)也值得一看，尽管他们选择[不使用 SVG](http://paperjs.org/about/faq/#why-not-base-it-on-svg)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-29T18:05:28.650

你确实可以用 SVG 制作整个网站，我已经做了很多年了。如果您愿意改变您对设计页面（思考卡）的看法，那么这只是一个反复试验的问题。

# amazon-ec2 - 无法通过浏览器端口 8080 连接

> ID：10892668
> 
> 赞同：0
> 
> 时间：2012-06-05T06:29:30.247
> 
> 标签：amazon-ec2

我启动了一个 Amazon EC2 t1.micro 免费使用层实例。创建私钥对后，我在我的mac（本地机器）上做了以下操作

```
ec2-authorize default -p 22
ec2-authorize default -p 8080
ec2-authorize default -p 80 
```

但我无法连接到端口 80 或 8080。连接超时错误。

在端口 8080 上，我运行 mulgara RDFStore。我使用 http://$publicDNSName:8080 访问

我的 .profile 看起来像：

```
export EC2_HOME=~/.ec2
export PATH=$PATH:$EC2_HOME/bin
export EC2_PRIVATE_KEY=pk-MYKEYNAME.pem
export EC2_CERT=cert-MYKEYNAME.pem
export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home/ 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:50:28.220

啊。修复了问题。我允许访问默认安全组。相反，我应该使用 AWS 在启动时创建的组

谢谢！！

# javascript - 冒号的Javascript正则表达式？

> ID：10892675
> 
> 赞同：5
> 
> 时间：2012-06-05T06:29:59.293
> 
> 标签：javascript, regex

我想知道如何使用 javascript 正则表达式来匹配以下单词：

`Name:`

空间的所有变化？这就是我卡住的地方。IE

*   `Name<space>: Fred`
*   `Name:<space>Fred`或者`Name<space>:<space>Fred`

注意名称后、冒号等后空格的位置？

我希望类似的东西`/(name(\s*:\s*)?)\w/g`会起作用，但它没有:(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T06:32:53.773

*   名称以大写字母开头。正则表达式还应匹配以大写 N 开头的名称。

    *   如果您希望整个正则表达式不区分大小写，请`i`在末尾添加标志。
    *   如果您只想 name 以小写或大写 N 开头，则使用 set
*   `*`表示 0 或更多。`?`不再需要了。

像这样的东西应该工作

```
/Name\s*:\s*\w*/g    //matches "Name"

/[Nn]ame\s*:\s*\w*/g //matches "Name" or "name"

/name\s*:\s*\w*/gi   //the entire regex is case insensitive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:32:40.507

正则表达式`/name\s*:\s*\w/gi`就足够了。

# php - 用php写一个文件

> ID：10892676
> 
> 赞同：0
> 
> 时间：2012-06-05T06:29:59.580
> 
> 标签：php

此函数从数据库中获取记录。现在我希望它把它们写到一个文件中。请帮我。

```
function selectcsv($classname)
    {
        echo $sql = "SELECT * FROM tblstuden WHERE classname = $classname;"; 
        $obj_db = new DB();
        $obj_db->query($sql);

        while($row = $obj_db->rsset()){
        $this->_id($row[id]);
        $this->_studentname($row[studentname]);
        $this->_rollnumber($row[rollnumber]);
        $this->_classname($row[classname]);

        $out = $out . $row[studentname] . " , ". $row[rollnumber] . "\n";
        }

        $obj_db->db_close(); 
```

以上部分正在运行

```
$myFile = "write.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "write::";
fwrite($fh, $stringData);
$stringData = $_POST[read];
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:48:17.063

您可以向该方法添加一个参数，然后使用输出缓冲来创建要存储在您的文件中的内容，因为`ob_clean();`使用它不会被输出，但您仍然有您`$out`想要从该方法返回的情况：

```
<?php 
function selectcsv($classname,$writeFile=true)
{
    echo $sql = "SELECT * FROM tblstuden WHERE classname = $classname;";
    $obj_db = new DB();
    $obj_db->query($sql);

    if($writeFile==true){ob_start();}

    while($row = $obj_db->rsset()){
        $this->_id($row['id']);
        $this->_studentname($row['studentname']);
        $this->_rollnumber($row['rollnumber']);
        $this->_classname($row['classname']);
        if($writeFile==true){
            echo $row['studentname'] . " , ". $row['rollnumber'] . PHP_EOL;
        }
        $out .= $row['studentname'] . " , ". $row['rollnumber'] . PHP_EOL;
    }

    if($writeFile==true){
       $tofile = ob_get_contents();
       ob_clean();
       file_put_contents($classname.'.csv',$tofile);
    }

    return $out;
    $obj_db->db_close();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:48:41.600

```
$myFile = "write.txt";
$fh = fopen($myFile, 'w') or die("can't open file");

$stringData = "write::";
fwrite($fh, $stringData);

$stringData = $_POST['read'];
if(isempty($stringData){echo 'Nothing to write';}
else
fwrite($fh, $stringData);

fclose($fh); 
```

我认为数组索引字符串应该用引号括起来，而且，您可以检查 POST 数组是否包含有效数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:32:36.357

来试试这个，

```
header("Content-type: application/octet-stream");
header("Content-disposition:attachment; filename=".$myFile);

echo $out; 
```

在你的情况下：

```
$myFile = "write.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $out;
fwrite($fh, $stringData);
$stringData = $_POST['read'];
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T06:44:44.293

您永远不会将`$out`数据写入文件。

代替：

```
$stringData = "write::";
fwrite($fh, $stringData);
$stringData = $_POST[read];
fwrite($fh, $stringData); 
```

你应该：

```
fwrite($fh, $out); 
```

您应该尝试阅读并理解[fwrite 的 PHP 手册页](http://www.php.net/manual/en/function.fwrite.php)。

# algorithm - 最佳铲斗尺寸和铲斗数量

> ID：10892677
> 
> 赞同：0
> 
> 时间：2012-06-05T06:30:08.097
> 
> 标签：algorithm, data-structures, dataset, statistics, bucket

抱歉，这篇文章与编码无关，而与数据结构和算法有关。我有大量数据，每个数据都有不同的频率。近似的图形图似乎是贝尔曲线。我现在想在最准确地描述范围频率的范围内显示数据。例如，整个数据范围的总数没有。频率，但这个范围或桶的大小并不精确，可能会更精确。（例如，如果一些数据更集中在特定的频率区域，我们可能会建立一个数据量较小但具有更密切相关频率的桶。）
有关某些算法的任何帮助。我想到了一种与二进制搜索相关的算法。任何想法的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:02:10.617

不确定我是否在关注，但您似乎正在寻找`k`bean，对于每两个 bean，数据落在一个 bean 中的概率与它在另一个 bean 中的概率相同。

根据您的描述，您的数据似乎是[正态分布](http://en.wikipedia.org/wiki/Normal_distribution)的，或[T-distributed](http://en.wikipedia.org/wiki/Student%27s_t-distribution)。

可以评估数据的均值和标准差，令提取的 SD 为`s`，均值为`u`。

用于评估样本平均值和 SD 的标准公式是¹：

```
u = (x1 + x2 + ... + xn) / n (simple average)
s^2 = Sigma((xi - u)^2)/(n-1) 
```

鉴于此信息，您可以评估数据的分布，即`N(u,s^2)`. 鉴于此信息，您可以创建一个随机变量：`X~N(u,s^2)`²

现在剩下的就是找到 a,b,... 如下（假设有 10 个桶，这显然可以根据需要进行修改）：

```
P(X<a) = 0.1
P(X<b) = 0.2
P(X<c) = 0.3
... 
```

找到 a,b,c,... 之后，您就有了 bean： (-infinity,a], (a,b], (a,c], ...

* * *

(1) 评估方差：[http](http://en.wikipedia.org/wiki/Variance#Population_variance_and_sample_variance)
://en.wikipedia.org/wiki/Variance#Population_variance_and_sample_variance (2) 这个变量的实际分布实际上是 t 分布，因为方差是未知的 - 并且是从数据中提取的。但是 - 对于足够大的`n`情况 - t 分布衰减为正态分布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-23T19:20:37.520

首先计算所有索引，然后减去重复值，这将为您提供最佳桶数。但在小水平

# c# - 如何在 datalistview 中获取数据？

> ID：10892683
> 
> 赞同：1
> 
> 时间：2012-06-05T06:30:38.380
> 
> 标签：c#, asp.net, datalist

如何获取 datalist 中的数据？

例如我有这个数据列表：

```
 <asp:DataList ID="dlDynamicFiealds" DataKeyField="uniqID" runat="server" Width="100%"
                            OnItemDataBound="dlDynamicFiealds_ItemDataBound">
                            <ItemTemplate>
                                <div class="rows">
                                    <div class="field10" style="width: 15%">
                                        <asp:DropDownList ID="drpType" runat="server" AutoPostBack="true" OnSelectedIndexChanged="drpType_SelectedIndexChanged">
                                            <asp:ListItem Text="" />
                                        </asp:DropDownList>
                                    </div>
                                    <div class="field10">
                                        <asp:DropDownList ID="drpOlaviat" runat="server">
                                            <asp:ListItem Text="" />
                                        </asp:DropDownList>
                                    </div>
                                    <div class="field10" style="width: 15%">
                                        <asp:TextBox ID="txtName" runat="server" Width="95%" Text='<%#Eval("name")%>'></asp:TextBox>
                                    </div>
                                </div>
                                <div class="rows">
                                    <uc1:dynamicFieldsDetail ID="dynamicFieldsDetail" runat="server" />
                                </div>
                            </ItemTemplate>
                        </asp:DataList> 
```

和我的cs代码填充这个：

```
if (Session["categoryDF"] != null)
        {
            List<dynamicFields> ldf = (List<dynamicFields>)Session["categoryDF"];

            dlDynamicFiealds.DataSource = ldf;
            dlDynamicFiealds.DataBind();

        } 
```

现在我如何获取用户在数据列表中输入的数据？

# bash - 通过终端控制 Firefox

> ID：10892686
> 
> 赞同：0
> 
> 时间：2012-06-05T06:30:58.187
> 
> 标签：bash, firefox

我正在编写一个脚本，其中涉及根据用户的要求（我将其作为输入）向用户显示网页并在 Firefox 中打开它。例如，这个的粗略版本是：

```
#!/bin/bash
read -p "What do you want to search" search_term
link=$(echo "http://www.mywebsite_whatever.com/search?q="$search_term)
firefox $link 
```

**主要问题是我无法 wget/urllib 这个网站，因为我没有权限。**

现在我想做的是：

让用户只查看网页上的某些关键字。所以为此我想：

1.  打开`find`带有关键字的框（Ctrl + F）打开firefox（不更改firefox的源代码）

2.  不知何故让firefox打开网站，将其保存为html并退出。（我不知道）然后我可以`grep`根据需要输出关键字。[请不要开始说这是不道德的。我这样做只是作为练习]

我在 Linux 上工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:02:56.600

要控制程序中的浏览器，请尝试[Selenium](http://seleniumhq.org/)。它支持`Java`,`Python`等。

请参阅示例源代码：[http ://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

```
package org.openqa.selenium.example;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.WebDriverWait;

public class Selenium2Example  {
    public static void main(String[] args) {
    // Create a new instance of the Firefox driver
    // Notice that the remainder of the code relies on the interface, 
    // not the implementation.
    WebDriver driver = new FirefoxDriver();

    // And now use this to visit Google
    driver.get("http://www.google.com");
    // Alternatively the same thing can be done like this
    // driver.navigate().to("http://www.google.com");

    // Find the text input element by its name
    WebElement element = driver.findElement(By.name("q"));

    // Enter something to search for
    element.sendKeys("Cheese!");

    // Now submit the form. WebDriver will find the form for us from the element
    element.submit();

    // Check the title of the page
    System.out.println("Page title is: " + driver.getTitle());

    // Google's search is rendered dynamically with JavaScript.
    // Wait for the page to load, timeout after 10 seconds
        (new WebDriverWait(driver, 10)).until(new ExpectedCondition<Boolean>() {
           public Boolean apply(WebDriver d) {
               return d.getTitle().toLowerCase().startsWith("cheese!");
           }
        });

        // Should see: "cheese! - Google Search"
        System.out.println("Page title is: " + driver.getTitle());

        //Close the browser
        driver.quit();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:43:04.177

例如，将 Wget 与`--user-agent`开关一起使用，以便网站认为您正在使用 Firefox

```
wget --user-agent="Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0" 
```

当然，对于永久脚本，您应该改用`--user-agent="MyScript/1.0 (http://mywebsite/)"`或类似的脚本，这样如果出现问题，他们就知道该联系谁。

# mysql - 安装后无法连接到“localhost”（10061）上的 MySQL 服务器

> ID：10892689
> 
> 赞同：64
> 
> 时间：2012-06-05T06:31:11.740
> 
> 标签：mysql, windows, windows-7

我在 Windows 7 上使用**mysql-installer-5.5.20.0.msi**安装了 MySQL 。在 cmd 窗口中，我运行“mysqlshow -u root -p”。它要求输入密码，然后返回此错误：“无法连接到 'localhost' (10061) 上的 MySQL 服务器”这是部分失败/成功安装的不良指示。

阅读页面[http://dev.mysql.com/doc/refman/5.5/en/windows-troubleshooting.html](http://dev.mysql.com/doc/refman/5.5/en/windows-troubleshooting.html)后，它告诉我在 C:\Program Files\MySQL\ 中找到错误日志 (.err) MySQL 服务器 5.5\数据。该目录存在但没有日志文件。

我感觉这与 Windows 7 的严格安全性有关，尤其是在安装基于 Unix 的软件时。是的，我是我 PC 上的管理员。

任何帮助或建议表示赞赏。我可以通过回答 Java 和 SQL 查询问题来报答你的忙。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2016-01-19T07:21:24.917

请尝试以下步骤：

1.  c:\mysql\bin>mysqld --安装
2.  c:\mysql\bin>mysqld --初始化

然后按“ **Windows键+R** ”写“ **services.msc** ”，以**管理员身份运行**

启动 MySQL 服务。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2017-04-29T13:23:06.753

我也遇到了同样的问题并通过以下设置解决了它：

1.  检查windows服务中的**MYSQL**服务。如果它在那里并且没有运行，则启动它。它会解决你的问题。

    您可以通过导航到 Windows 开始菜单并在搜索栏中键入“服务”来找到服务窗口。选择“服务”选项，旁边有齿轮（不是可执行文件），然后会出现下面的窗口。向下滚动以找到“MySql（版本）”。当您选择 MySql 时，您应该会在左侧窗格中看到一个选项，上面写着“启动服务”。单击此按钮，应出现一个对话框，指示 Windows 正在尝试启动该服务。一旦启动，左窗格现在将为您提供停止、暂停和重新启动服务的选项，您现在可以从 windows cmd 行连接到您的 MySql。

[![在此处输入图像描述](../Images/cb1180d7268157565088ff9997c22bac.png)](https://i.stack.imgur.com/Vxegx.png)

2.  如果 Windows 服务中不存在 MYSQL 服务，请按照以下设置进行操作。

    一种。以管理员身份打开cmd。

    湾。cd 到**C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin**

    C。运行命令： **C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin>mysqld.exe --install**

    d。检查windows服务中的MySql，如果没有运行，点击服务启动。

    e. 如果您使用 XAMMP 。在 XAMMP 控制面板中启动 MySQL。

* * *

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-11-18T09:05:25.927

这个问题非常需要windows server用户解决

1.  转到此路径 C:\Program Files\MySQL\MySQL Server 5.1\bin

2.  运行此工具“MySQLInstanceConfig.exe”

并再次配置实例并解决问题

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-27T03:16:43.710

对我有用的简单解决方案是：将 localhost 更改为 127.0.0.1 在您的 database.yml 或脚本中（如果编写一个）。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-04-11T08:16:15.910

在这里，您需要确保正在运行的 MySQL 服务是 Windows。您的 MySQL 服务可能当前未运行。

1.  按下`Windows+R`并输入打开服务窗口`services.msc`
2.  找出`MySQL`右键单击并选择`start`。

有用。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-08-26T13:15:32.117

我有这个错误 - 愚蠢的错误是，我`-p3307`用来指定端口，而我应该使用`-P3307`，即大写 P。小 'p' 用于密码 arg :)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-06-10T18:13:40.970

在 Windows 7 中

1.  按 Windows+R 打开运行
2.  输入 services.msc
3.  找出mysql右键启动
4.  如果没有找到 mysql
    1.  以管理员身份运行cmd
    2.  转到 C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin 目录（返回使用 cd..）并输入`mysqld.exe --install`
5.  按照步骤 3

就这样

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-01-14T09:59:03.023

我通过在命令行字符串中添加以下参数解决了这个问题：

```
mysql --user username --password password --host localhost --port 3306 databasename < "system path to .sql file" 
```

如果没有`--host`and`--port`参数，特别是如果您将端口更改为 3307，这是一个非默认值，将导致此错误。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-01-26T07:04:03.317

我有 Windows 8.1，我也有这个问题。我的老师告诉我这可能是因为我的 MySQL 服务器已经停止运行。她告诉我进入计算机管理实用程序（右键单击 Windows 8.1 屏幕的最左下角以访问计算机管理）。然后在服务和应用程序下，打开服务并找到 MySQL。您应该能够右键单击 MySQL 并重新启动它。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-08-30T15:30:30.520

1.  在开始菜单中，搜索“mysql”。在结果中，您应该看到“MySQL 安装程序 - 社区”。运行。

2.  MySQL 安装程序窗口将如下所示。在 Product 下找到“MySQL Server”，然后单击“Reconfigure”链接。

3.  MySQL 安装程序将显示（与您第一次安装 MySQL 服务器时使用的相同）。完成所有步骤。

4.  MySQL Installer 完成后，我再次启动了 MySQL 服务。这一次，MySQL Notifier 上的“启动消息日志”显示服务器启动成功：

[https://www.howtosolutions.net/2017/08/fixing-mysql-10061-error-after-migration-of-database-files/](https://www.howtosolutions.net/2017/08/fixing-mysql-10061-error-after-migration-of-database-files/)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2021-08-11T15:16:46.693

当我尝试从 cmd "mysql -u root -p"
Can't connect to MySQL server on 'localhost:3306' (10061)打开 MySQL 时，我在命令提示符中收到此错误，
这是因为我在安装过程中更改了端口MySQL 社区服务器，因为我安装并运行了 XAMPP 服务器，这不允许我使用端口 3306。所以基本上我的系统中安装了 2 个 MySQL 服务器。

1.  MySQL 社区服务器。
2.  XAMPP 服务器。

如果有人遇到同样的问题，这就是我修复它的方法。第 1 步：将 MySQL 服务器重新配置为端口 3306 第 2 步：将 XAMPP 重新配置为使用 3306 以外的其他端口

注意：在执行这些步骤之前停止 XAMPP 服务器。

**步骤 1：将 MySQL 服务器重新配置为端口 3306**

1.  单击开始并打开 MySql 安装程序 - 社区
2.  点击MySql server前面的reconfigure按钮
3.  在端口输入 3306。执行并完成安装。 [![在此处输入图像描述](../Images/c70766025793be84e4d64709847fe4af.png)](https://i.stack.imgur.com/xZCzP.png)

**第 2 步：重新配置 XAMPP 以使用 3306 以外的其他端口**

1.  打开XAMPP，在MySQL下的
    **my.ini**
    和Apache 下的**php.ini**这两个文件中更改3306以外的端口[![在此处输入图像描述](../Images/d0e0cd4317d641e7ac5e6da4236ada94.png)](https://i.stack.imgur.com/qg9Ky.jpg)

现在一切似乎对我来说都很好。我能够从 cmd 进入 MySQL 社区服务器，也可以使用 XAMPP 服务器。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-05-19T06:11:09.013

这是最简单的解决方案，对我有用。

*   转到您下载“mysql-installer-web-community-8.0.19.0.msi”的位置，该文​​件用于安装 mysql。
*   通过双击它来运行它。（无需卸载任何东西）
*   单击 MySql 服务器旁边的“重新配置”。
*   同意中间的所有内容，在询问时提供root密码。
*   结束。就是这样，你可以走了。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-02-27T22:08:57.427

对于 5.7 版本，我遇到了同样的问题，一个简单的修复就可以了。在安装工作台 5.7 时，还有另一个称为“MySQL 安装程序社区”的“软件”。我运行了这个并为 MySQL 服务器运行了“重新配置”。花了大约一分钟，问题不再存在。

希望它有效！（请记住，我使用的是 5.7 版本）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-07-25T17:41:43.223

只需关闭防火墙并删除实例配置即可。为服务器添加一个新实例！[禁用防火墙][1] 将端口号正确设置为默认值 3306

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-11-12T17:35:32.867

**解决方案1：**

*对于 32 位：* 从 C:\Program Files\MySQL\MySQL Server 5.6\bin 运行“mysql.exe”

*对于 64 位：* 从 C:\Program Files\MySQL\MySQL Server 5.6\bin 运行“MySQLInstanceConfig.exe”

**解决方案2：**

> 错误 (2002) Can't connect to ... 通常意味着系统上没有运行 MySQL 服务器，或者您在尝试连接到服务器时使用了不正确的 Unix 套接字文件名或 TCP/IP 端口号。您还应该检查您正在使用的 TCP/IP 端口是否未被防火墙或端口阻止服务阻止。
> 
> 错误 (2003) Can't connect to MySQL server on 'server' (10061) 表示网络连接已被拒绝。您应该检查是否有一台 MySQL 服务器正在运行，它是否启用了网络连接，并且您指定的网络端口是服务器上配置的端口。

来源：[http](http://dev.mysql.com/doc/refman/5.6/en/starting-server.html) ://dev.mysql.com/doc/refman/5.6/en/starting-server.html 访问它以获取更多信息。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-05-14T06:16:54.757

对于遇到“无法连接到 'localhost' (10061) 上的 MySQL 服务器”或“无法连接到 '127.0.0.1' (10061) 上的 MySQL 服务器”同样问题的任何人。您可以安装“MySQL 安装程序”，这是链接[http://dev.mysql.com/downloads/windows/installer/5.6.html](http://dev.mysql.com/downloads/windows/installer/5.6.html) ，这是获取更多帮助的教程[https://www.youtube.com/watch ?v=AqQc3YqfelE](https://www.youtube.com/watch?v=AqQc3YqfelE)

它对我有用，我也希望为你工作。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-06-08T16:28:53.840

我有同样的错误。我是这样解决的

转到开始- MySQL Installer-community 并再次运行安装程序作为重新配置（系统会询问您）。

一旦询问您是否想让 MySQL 实例作为 Windows 服务运行，请选中该框。

如果不起作用，请尝试卸载并再次安装，然后选中复选框以将 MySQL 作为 Windows 服务运行。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-10-31T18:37:56.027

从我收集到的信息来看，这意味着 mysql 服务（mysqld）没有运行。

*   首先确保它作为 Windows 服务安装：运行

`"C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqld" --install`

从命令行。

*   接下来，启动它：

`services.msc > MySQL > start`

如果它无法重新启动，那么您可以按照以下步骤操作：

*   以管理员身份打开命令行： `cmd.exe > open as administrator`
*   跑`"C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqld" --verbose`

它应该失败并将错误日志放在**C:\Program Files\MySQL\MysSQL Server 5.7\**下名为**data**的目录中。如果由于某种原因无法创建**数据，请在该目录下手动执行，然后重试。**如果您能找出该日志中缺少的内容，那么很好，您就完成了。

 ****如果你仍然没有运气，我就是这样做的：

*   转到`C:\ProgramData\MySQL`并将名为**my.ini**的文件复制到`C:\Windows\`

*   尝试从命令行再次启动服务： `"C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqld" --verbose`

如果它没有显示任何错误，则表明服务启动成功。如果仍然无法正常工作，请删除刚刚复制的**my.ini**`C:\Windows` ，然后再次从命令行启动服务。

它现在应该可以工作了

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-04-07T08:31:09.473

如果它显示错误 2003 (HY000): Can't connect to MySQL server on localhost (10061) than

1.  在运行中搜索 services.msc
2.  转到 mysql 属性
3.  复制mysql服务名
4.  以管理员身份启动 cmd
5.  写：net start mysqlservicename .ie mysql57 or etc 它会显示 mysql 正在启动。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-08-20T11:46:19.197

对我来说，三个步骤在 Windows 10 上解决了这个问题：

我下载了 MySQL 服务器社区版 zip 并解压到 D 盘。之后我去了`bin`文件夹并`cmd`在那个文件夹上做了。我按照以下步骤和所有工作：

```
D:\tools\mysql-8.0.17-winx64\bin>mysqld -install
Service successfully installed.

D:\tools\mysql-8.0.17-winx64\bin>mysqld --initialize
D:\tools\mysql-8.0.17-winx64\bin>net start mysql
The MySQL service is starting...
The MySQL service was started successfully. 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-06-03T08:31:51.950

我也有这个问题，很容易解决：

进入控制面板-系统和维护-系统-高级系统设置-环境变量-系统变量-路径-点击编辑-添加

`"c:\xampp\mysql\bin"`- 它应该是这样的：

`\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\QuickTime Alternative\QTSystem;c:\xampp\mysql\bin`

并且不要忘记从 Xampp 的控制面板启动 MySQL。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-07-01T16:48:29.460

即使在尝试了上面给出的所有上述解决方案后，我也发现同样的错误再次发生。我什至尝试过 5.7 版和更多版本。伙计们不要浪费时间试图修复它。而是安装 5.5 版。它工作得很好，没有任何不必要的错误。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-09-21T07:28:26.737

好吧，在我的情况下，我刚刚使用 run 打开 services.msc 并重新启动了 2 个与 mysql 相关的服务，它工作了！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-11-23T08:52:29.567

如果是 Xampp 安装。

转到您的 xampp 安装和 mysql 文件夹，就我而言：C:\xampp\mysql

从 cmd 或资源管理器运行文件“resetroot.bat”。

我的安装开始工作了！！！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-12-16T16:49:02.527

解决该问题的解决方案是使用以下步骤：

在开始菜单中，搜索“mysql”。在结果中，您应该看到“MySQL 安装程序 - 社区”。运行。MySQL 安装程序窗口将如下所示。在 Product 下找到“MySQL Server”，然后单击“Reconfigure”链接。MySQL 安装程序社区

MySQL 安装程序将显示（与您第一次安装 MySQL 服务器时使用的相同）。完成所有步骤。

MySQL Installer 完成后，我再次启动了 MySQL 服务。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-08-06T16:32:42.487

不要做无用的事情，比如重新配置、停止 MySQL 和启动 MySQL 服务。只需重新安装 MYSQL 服务器并再次将其安装到您的系统中。记住只卸载 MySQL 服务器，别无其他。所有问题都会自动解决

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-08-26T09:28:26.223

这种错误的主要原因是您可能已经卸载了 Mysql 服务器应用程序。安装它，然后试一试。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2019-10-01T22:39:35.987

对于想要使用 mysql 或 mariadb 而没有任何错误的人，我建议使用 5.5 版，只需`mariadb-5.5.65-winx64.zip`从[https://downloads.mariadb.org/mariadb/5.5.65/](https://downloads.mariadb.org/mariadb/5.5.65/)下载一个 zip 文件并按照本教程逐步安装[https ://www.youtube.com/watch?v=uEPs6JsTZFc](https://www.youtube.com/watch?v=uEPs6JsTZFc)（本教程也适用于 5.5 版）

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-10-11T11:35:30.043

我遇到了同样的问题，基本上通过指向我的 MySQL 服务器正在运行的特定端口号来解决它。下面是命令。请编辑代码以适合您的情况，即您的端口号、您的 mysql 服务器用户名、您的密码。

```
 mysql -u root -pYourMysqlRootPassword -P3307 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-10-11T21:03:04.593

1.  创建临时文件夹 c:/mysqltmp
2.  在 [mysqld] 下的 my.ini 文件中添加行 tmpdir=c:/mysqltmp
3.  **为“C:\ProgramData\MySQL\MySQL Server XY** \Data\ibdata1”文件的用户 NETWORK SERVICE 添加完全权限
4.  启动服务

这些是 Windows 10 上 MySQL5.7 和 MySQL8.0 相同问题的步骤

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-12-28T15:15:14.400

这救了我的命，

```
mysqld --tc-heuristic-recover=ROLLBACK 
```

[阅读更多](https://forum.laragon.org/topic/371/database-is-not-working-error-2002/5)

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-12-18T05:42:42.233

关闭防火墙并重新启动mysql服务器。然后打开防火墙。这是简单的方法！就试一试吧

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2022-03-02T12:05:20.777

如果您使用的是窗口：

*   点击开始
*   搜索服务并打开
*   检查 MySql 是否正在运行

[![检查MySql是否正在运行...](../Images/78d31d8989ce3ffaa238942289439c7d.png)](https://i.stack.imgur.com/KuW9C.png)****

# ios - 列出 Cocos2D 应用程序中的所有活动节点/动作/动画

> ID：10892692
> 
> 赞同：1
> 
> 时间：2012-06-05T06:31:25.860
> 
> 标签：ios, cocos2d-iphone

是否可以在 Cocos2D 应用程序中列出所有活动节点（我也感兴趣的动作和动画）？

目前我正在解决应用程序中的内存问题，即使分析器对此有所帮助，我也想尝试其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:04:54.240

您可以递归地列出所有子节点。起始节点将是您的场景。对于动作，我知道您可以获得给定节点的动作数量，但我不知道是否可以以某种方式列出所有动作。

此外，您可以使用 CCTextureCache 来检查是否所有未使用的纹理都已从内存中删除。它没有访问此数据的公共方法，但您可以在调试器中查看加载的纹理名称或添加一些转储方法。

为了通过在节点上安排一些要从父节点删除的操作来防止内存泄漏，请在`cleanup`从父节点删除之前向所有节点发送消息。或者，如果它是您的类的实例，请`[self cleanup];`使用它的`onExit()`方法。

我不认为您可以收到所有已创建节点的列表。这听起来像 .net 中的垃圾收集 =) 在 Objective-C 中，您必须自己注意泄漏的对象。

# fonts - 编辑 .ttf 字体文件以添加缺失的符号

> ID：10892693
> 
> 赞同：27
> 
> 时间：2012-06-05T06:31:49.370
> 
> 标签：fonts, truetype

以下字体缺少@ 符号。我想创建一个添加了我自己的@符号的字体文件的副本：

[http://www.fonts2u.com/sixty-four-dollar-question-medium.font](http://www.fonts2u.com/sixty-four-dollar-question-medium.font)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-05T06:34:28.760

Fontforge 应该能够做到这一点。[http://fontforge.github.io](http://fontforge.github.io)

# javascript - 生成的最佳方法，然后使用 JQuery 打开 URL

> ID：10892698
> 
> 赞同：0
> 
> 时间：2012-06-05T06:32:21.823
> 
> 标签：javascript, jquery, html

我正在尝试在新窗口上打开一个网页，购买基于用户输入的 URL。我遇到的问题是它将打开一个新窗口，但不会使用生成的 URL。它将打开一个 about:blank 窗口。

我将代码放在 JSFIDDLE 中，它实际上在那里工作，但我不知道为什么它不能在我的页面上工作。但是 JSFIDDLE 实际上在原始页面中留下了 [Object]，我也想不通。

任何帮助表示赞赏。

[http://jsfiddle.net/cmirab/SHFgw/2/](http://jsfiddle.net/cmirab/SHFgw/2/)

HTML：

```
 <form id="search" name="Safe">
    <h1>How Safe</h1>
    <h2>is your Neighborhood?</h2>
    <p class="p1">Enter your zip to find crime statistics in your area:</p>
    <input type="text" name="search">
    <input type="hidden" name="url" id="url">
    <a class="button1" href="javascript:window.open(document.Safe.url.value)">Search</a>
    </form> 
```

JQuery var partFields = $('#search').val('#search').not('#url');

```
$(partFields).change(function() {
var urlB = 'http://classic.crimereports.com/map?';
var urlE = '&searchButton.x=0&searchButton.y=0';
var urlValue = urlB + partFields.serialize() + urlE;

$('#url').val(urlValue); // set the hidden input value
}); 
```

CSS：

```
 #search {background:#232426;padding:5px 0 21px 24px;color:#737985;margin:0 0 30px;line height:15px;}
    #search h1 {font-size:71px;line-height:1.2em;color:#ffad01;letter-spacing:-4px;}
    #search h2 {font-size:35px;letter-spacing:-1px;margin:0 0 10px;}
    #search input {border:none;background:#37383a;padding:9px 10px;margin:0 4px 0 0;width:240px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:49:14.213

试试这个，我也修改了你的一些 js 和标记。 [JSFiddle](http://jsfiddle.net/SHFgw/3/)

```
var $searchbox = $('#search input[name="search"]')
    $searchbox.change(function() {
    var urlB = 'http://classic.crimereports.com/map?';
    var urlE = '&searchButton.x=0&searchButton.y=0';
    var urlValue = urlB + $searchbox.serialize() + urlE;

    $('.button1').attr('href',urlValue); // set the hidden input value
});​

<form id="search" name="Safe" >
                    <h1>How Safe</h1>
                    <h2>is your Neighborhood?</h2>
                    <p class="p1">Enter your zip to find crime statistics in your area:</p>
                    <input type="text" name="search">
                    <input type="hidden" name="url" id="url">
                    <a class="button1" href="javascript:window.open(document.Safe.url.value)" target="_blank">Search</a>
                </form>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:26:20.023

您应该将脚本放在 html 表单之后，因为当脚本运行时，它会搜索当前不存在的 id 为“search”的元素，因此不存在的输入字段的值将作为空字符串返回.

# iphone - 警告：wait_fences：未能收到回复：10004003

> ID：10892700
> 
> 赞同：-2
> 
> 时间：2012-06-05T06:32:29.470
> 
> 标签：iphone, objective-c, ios, ipad, uialertview

我有时会收到此警告“ wait_fences: failed to receive reply: 10004003 ”，不知道为什么会这样，

我的代码中没有 viewdidiappear 方法，我的视图中有 UIAlert，代码是

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Start" message:[NSString stringWithFormat:@"Hi %@,",[user objectAtIndex:0] ] delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];
[alert release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:42:32.767

这是由于您当前不在的视图控制器上的 UI 操作，即您正在访问 UI 的屏幕，当前不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:03:20.250

如果您在评论中阅读了我的答案，您会理解，但是您需要在`-viewDidAppear`方法中添加上述代码并确保添加`[super viewDidAppear:YES];`，如果您想将其保留在您的 init 方法中，则必须添加延迟像这样
`[self performSelector:@selector(next) withObject:nil afterDelay:0.5];`

# audio - J2ME 中未播放通知声音

> ID：10892711
> 
> 赞同：3
> 
> 时间：2012-06-05T06:33:22.647
> 
> 标签：audio, java-me, nokia, nfc, mmapi

我正在开发一个 J2ME 应用程序。
我正在使用诺基亚 6131 NFC 手机。我正在使用 NetBeans IDE。
我有 4 个表格，在填写表格时我正在为用户播放一些通知声音。

问题是声音在 3 到 4 分钟后突然消失，唯一的解决方案是退出应用程序并再次打开它。

我的代码

```
public void playSoundOK()
{
        try
        {
            InputStream is = getClass().getResourceAsStream("/OK.wav");
            Player player = Manager.createPlayer(is,"audio/X-wav");

            player.realize();
            player.prefetch();
            player.start();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    } 
```

例外

```
at com.nokia.mid.impl.isa.mmedia.audio.AudioOutImpl.openSession(AudioOutImpl.java:206)
at com.nokia.mid.impl.isa.mmedia.MediaOut.openDataSession(MediaOut.java:282)
at com.nokia.mid.impl.isa.mmedia.MediaPlayer.doPrefetch(MediaPlayer.java:155)
at com.nokia.mid.impl.isa.amms.audio.AdvancedSampledPlayer.doPrefetch(+4)
at com.nokia.mid.impl.isa.mmedia.BasicPlayer.prefetch(BasicPlayer.java:409)
at org.ird.epi.ui.UtilityClass.playSoundOK(UtilityClass.java:139)
at org.ird.epi.ui.EnrollmentForm.targetDetected(+695)
at javax.microedition.contactless.DiscoveryManager.notifyTargetListeners(DiscoveryManager.java : 700)
at javax.microedition.contactless.DiscoveryManager.access$1200(DiscoveryManager.java:103)
at javax.microedition.contactless.DiscoveryManager$Discoverer.notifyIndication(DiscoveryManager.java:882)
at com.nokia.mid.impl.isa.io.protocol.external.nfc.isi.NFCConnectionHandler$IndicationNotifier.run(+67) javax.microedition.media.MediaException: AUD 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:40:14.707

你应该关闭你的播放器。将以下代码添加到您的方法中：

```
    PlayerListener listener = new PlayerListener() {
        public void playerUpdate(Player player, String event, Object eventData) {
            if (PlayerListener.END_OF_MEDIA.equals(event)) {
                播放器.close();
            }
        }
    };
    player.addPlayerListener(监听器);

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T11:12:57.280

我建议您将 NFC 和音频播放分成 2 个不同的线程。

从 API 回调（如 targetDetected）中调用需要一些时间才能完成的方法（如预取）通常是一个坏主意，因为它使您依赖于一种特别健壮的内部线程模型，而这种模型实际上可能并不存在您手机的 MIDP 实现。

您应该有一个线程，其唯一目的是播放您的应用程序可以发出的声音。使用 NFC 回调发送非阻塞命令来播放声音（通常使用对命令队列的同步访问）。如果命令是在忙于播放声音时发出的，音频播放线程可以决定忽略命令（通知用户多个同时 NFC 联系人没有意义）

# android - 如何在前台 Android 中的应用程序中显示 AlertDialog？

> ID：10892719
> 
> 赞同：0
> 
> 时间：2012-06-05T06:34:40.167
> 
> 标签：android, android-alertdialog

我有一个程序负责在几秒钟后在前台显示 AlertDialog：

```
 ActivityManager am = (ActivityManager) getSystemServ();
    if (am != null) {
        List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1);
        if (taskInfo != null && !taskInfo.isEmpty()) {
            if (taskInfo.get(0) != null && taskInfo.get(0).topActivity != null) {
                if (!MY_CLASS_NAME.equalsIgnoreCase(taskInfo.get(0).topActivity.getClassName())) {

                    new AlertDialog.Builder(this).setMessage("AAAAAAAAAAAAAAAAAAAAAAAAAAAA?")
                    .setTitle("Message").setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {                                

                        }  
                    })  
                    .setNegativeButton("No", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which){

                        }
                    }).show();                      
                }
            }
        }                       
    } 
```

但是当应用程序进入前台时，AlertDialog 没有显示！请帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:42:08.317

使用 create() 方法创建对话框，如下所示：

```
new AlertDialog.Builder(this).setMessage("AAAAAAAAAAAAAAAAAAAAAAAAAAAA?")
                        .setTitle("Message").setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {                                

                        }  
                    })  
                    .setNegativeButton("No", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which){

                        }
                    }).create().show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:51:47.580

我刚刚修改了你的代码。请检查并更新您的代码片段：

```
 ActivityManager am = (ActivityManager) getSystemServ();
if (am != null) {
    List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1);
    if (taskInfo != null && !taskInfo.isEmpty()) {
        if (taskInfo.get(0) != null && taskInfo.get(0).topActivity != null) {
            if (!MY_CLASS_NAME.equalsIgnoreCase(taskInfo.get(0).topActivity.getClassName())) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage("AAAAAAAAAAAAAAAAAAAAAAAAAAAA?")
                .setTitle("Message").setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {                                

                    }  
                })  
                .setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which){

                    }
                });             
    AlertDialog alert = builder.create();  
    alert.show();       
            }
        }
    }                       
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:39:08.757

您不能显示来自服务的对话框。而是使用像 Dialog 这样的 Activity 主题，为 Activity（在清单中）设置主题，如下所示：

```
android:theme="@android:style/Theme.Dialog" 
```

此外，你不应该使用`TimerTask`，`Handler`而是使用，像这样：http: [//developer.android.com/resources/articles/timed-ui-updates.html](http://developer.android.com/resources/articles/timed-ui-updates.html)

# php - 将 BLOB 从 mysql 数据库获取到 android

> ID：10892720
> 
> 赞同：1
> 
> 时间：2012-06-05T06:34:44.523
> 
> 标签：php, android, web-services

我有一个具有以下架构的 mysql 数据库

```
(int id, int sys_id, BLOB data) 
```

同一个 sys_id 可以有多个数据，即 (1,1, blobdata1), (2,1, blobdata2) 等是有效条目。blob 数据是压缩音频。当特定 sys_id 的所有行组合在一起时，就会生成有效的压缩音频数据。

我想将此 blob 数据发送到我的 android 设备。我已尝试使用以下 php 代码发送数据，但在客户端未按预期接收数据。

```
$conn = mysql_connect("localhost","root","");
mysql_select_db("mydb", $conn);

global $blobId;
$blobId = $_GET['id'];
$result = mysql_query("SELECT data FROM table WHERE sys_id=$blobId");
if( mysql_num_rows($result) == 0 )
die("No rows returned");

while($row = mysql_fetch_array($result) ) {
     // is this correct way of concatenating binary data
     $temp .= $row['data'];
}

// PROBLEM: what should be sent
echo $temp; 
```

我不介意是否所有行都可以在客户端接收并且可以在本地连接或操作。

在客户端，我执行以下操作：

```
// connect to the server
public void connect(URL url)
{

HttpURLConnection urlConnection = null;
    try {           
        urlConnection = (HttpURLConnection)url.openConnection();
        InputStream in = new BufferedInputStream(urlConnection.getInputStream());
        result = readStream(in);
            //problem, how should I now parse the resultant string
            decompress(result.getBytes()); // result.getBytes() returns null currently

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

// for reading the incoming stream
public static String readStream(InputStream in) throws IOException {
    StringBuilder sb = new StringBuilder();
    BufferedReader r = new BufferedReader(new InputStreamReader(in),1000);
    for (String line = r.readLine(); line != null; line =r.readLine()){
        sb.append(line);
    }
    in.close();
    return sb.toString();
} 

// definition for decompression utility
 public short[] decompress(byte[] codBytes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T04:29:32.680

您可以将要以 JSON 格式发送的数据编码为

```
 echo json_encode($response); 
```

并将其作为 Json 发送到您的设备并进行相应的解析。解析参考[这里](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

# actionscript-3 - ActionScript 3 的奇怪问题

> ID：10892722
> 
> 赞同：0
> 
> 时间：2012-06-05T06:34:50.357
> 
> 标签：actionscript-3, node.js, rest

我已经使用 Node.js REST API 创建了示例 Flash-AIR FB 应用程序。我只是通过动作脚本调用这些 REST api。由于我在 FB 上更新了应用程序，因此出现了奇怪的行为。

AS3 功能：这里有两行应该向我的 URL 发出 post 请求

```
 request.url = "http://sample.com:3137/getData";
 request.method = URLRequestMethod.POST; 
```

==================================================== ================= Node.js 函数：这里是 node.js 中的代码行

```
app.post('/getData', function(req, res){
    //res.send(req.params.paramTest);
    res.send("sending data");

});

app.get('/:methodName', function(req, res){
    //res.sendfile('index.html');
    res.send("In get "+req.params.methodName);
}); 
```

==================================================== ===========================

这里的问题是，每当我在 AS3 中使用 POST 请求调用“/getData”时，它总是进入“app.get('/:methodName'”而不是“app.post('/getData',”

如果有人有任何线索，请帮助我。

谢谢，斯瓦蒂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T02:54:17.387

问题已解决。以“get”开头的被调用方法名称存在问题，我只需将方法名称更改为“/userdata”，一切正常。

# java - 如何为收藏增加价值

> ID：10892723
> 
> 赞同：1
> 
> 时间：2012-06-05T06:34:52.893
> 
> 标签：java

我有一个像这样的哈希表：

```
Hashtable<String, String> ht = new Hashtable<String, String>();
 ht.put("A", "one");
 ht.put("B", "two"); 
```

然后我调用它的`values()`方法来获取它的值并存储在 Collection 对象中，如下所示：

```
Collection<String> col = ht.values(); 
```

现在这个集合对象有这些值：

```
 one, two. 
```

然后我打电话给`col.add(" three");`这次我得到了这个错误：

```
Exception in thread "main" java.lang.UnsupportedOperationException. 
```

我检查了 API：

```
If a collection refuses to add a particular element for any reason other than that it already contains the element, it must throw an exception (rather than returning false) 
```

我添加（“三个”）到集合的值是唯一的，而不是重复的。但是我可以对其进行其他操作，例如`remove()`和`clear()`操作。

无法调用`add()`。为什么不允许添加？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T06:37:43.270

Hashtable 中 values() 方法返回的集合不支持添加新元素。

从[javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html#values%28%29)：

> 返回此 Hashtable 中包含的值的 Collection 视图。Collection 由 Hashtable 支持，因此对 Hashtable 的更改会反映在 Collection 中，反之亦然。Collection 支持元素删除（从 Hashtable 中删除相应的条目），**但不支持元素添加**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:56:44.023

除了上面的答案，Hashtable 还需要键值对。您只是在添加值而不是键，因此它会引发异常。

# java - 使用迭代器和 ArrayList 的具有 10 条记录的多个 ArrayList

> ID：10892724
> 
> 赞同：1
> 
> 时间：2012-06-05T06:34:55.203
> 
> 标签：java, arraylist, iterator

具有 10 条记录的多个 Arraylist<>。我用这样的方法限制了最多 10 个结果，但是如何获得下一个 10 个结果等等。

```
try {
ArrayList<CalanderQueryOutput> results = new ArrayList<CalanderQueryOutput>();

List<?> eventsToday = (List<?>) filter.filter(calendar.getComponents(Component.VEVENT));
CalanderQueryOutput caldavOutput = new CalanderQueryOutput();

for (Iterator<?> i = eventsToday.iterator(); i.hasNext();) {
if(Limit < RsLimit){
    results.add(caldavOutput);  
    Limit++;
    }
      }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:58:42.303

首先，您需要一些其他数据结构来存储多个数组列表，您可以使用列表列表，如

```
List<List<CalanderQueryOutput>> resultList = new ArrayList<List<CalanderQueryOutput>>();
List<CalanderQueryOutput> results = new ArrayList<CalanderQueryOutput>();
for (Iterator<?> i = eventsToday.iterator(); i.hasNext();) {
if(Limit < RsLimit){
    results.add(caldavOutput);  
    Limit++;
    }else{
     resultList.add(results);
     Limit = 0;
     results = new ArrayList<CalanderQueryOutput>();
}
      } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:46:24.387

我已经修改了适用于带有迭代器的 ArrayList 的代码

```
 int inc = 0;
 int IOF = Integer.parseInt(ItemOffset);
 inc = IOF;
 int IC = Integer.parseInt(ItemCount);
 int TotalLimit = 0;
 int EventLimit = 0;
 for (int l = 0; l < IC; ++l) {
++IOF;
EventLimit = IOF;
 }

 try {
 ArrayList<CalanderQueryOutput> results = new ArrayList<CalanderQueryOutput>();
 List<?> eventsToday = (List<?>)filter.filter(calendar.getComponents(Component.VEVENT));
 CalanderQueryOutput caldavOutput = new CalanderQueryOutput();

 for (Iterator<?> i = eventsToday.iterator(); i.hasNext();) {
   if (TotalLimit < eventsToday.size()) {
    if (TotalLimit >= inc && TotalLimit <= EventLimit - 1){
       results.add(caldavOutput);
         }
     TotalLimit++;
      }
 }catch (SardineException e){
 } 
```

# html - CSS3 动画在 Web 浏览器控件中的性能比 IE10 差

> ID：10892725
> 
> 赞同：1
> 
> 时间：2012-06-05T06:35:08.183
> 
> 标签：html, css, windows-8, css-animations, internet-explorer-10

我创建了一个新的 WPF 项目，其中只有一个 Web 浏览器控件。当我在简单的应用程序和普通的 IE10（都在 Windows 8，所有版本）中加载带有 CSS3 转换的 html 页面时，性能有很大的不同。在 webbrowser 控件内部它是不稳定的，但在 IE10 中它是平滑的。

我尝试过的事情：

*   安装了高端显卡
*   将 wpfapplication1.exe的`DWORD`值添加到. （我们也设置了相同键的 Wow6432 版本的值）`10001``HKLM\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION`
*   为 WpfApplication1.exe设置`FEATURE_GPU_RENDERING`为`1`（例如`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_GPU_RENDERING`）
*   确认我的应用程序正在使用 Process Monitor 读取这两个新值。

有谁知道强制网络浏览器控件表现得像 IE10 的更多技巧？我知道有很多 FeatureControls 在 IE 中默认打开，但在 Web 浏览器控件中关闭，但它看起来真的不再影响动画性能。

# java - 春季批次中的继承未按预期工作

> ID：10892726
> 
> 赞同：0
> 
> 时间：2012-06-05T06:35:11.027
> 
> 标签：java, inheritance, spring-batch

当我使用 Spring Batch 运行以下代码时，出现异常。

```
<job id="simpleJob">
  <step id="parentStep">
    <tasklet allow-start-if-complete="true">
      <chunk reader="simpleReader" writer="simpleWriter" commit-interval="3"/>
    </tasklet>
  </step>
   <step id="concreteStep1" parent="parentStep">
    <tasklet start-limit="5">
       <chunk processor="simpleProcessor" commit-interval="2"/>
    </tasklet>
  </step>
</job> 
```

它给出了以下例外：

```
Exception in thread "main" org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: The element [concreteStep1] is unreachable 
```

我不明白为什么我会收到这个错误。我在[spring 源](http://static.springsource.org/spring-batch/reference/html-single/index.html#InheritingFromParentStep)代码中看到了类似的代码。即使这样也行不通。这个你能帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:28:32.660

父步骤应该超出范围。那是：

```
<job id="simpleJob">
   <step id="concreteStep1" parent="parentStep">
    <tasklet start-limit="5">
       <chunk processor="simpleProcessor" commit-interval="2"/>
    </tasklet>
  </step>
</job>
<step id="parentStep">
  <tasklet allow-start-if-complete="true">
    <chunk reader="simpleReader" writer="simpleWriter" commit-interval="3"/>
  </tasklet>
</step> 
```

# c# - 将 java 客户端应用程序和 IOS 应用程序与 WCF 服务器连接

> ID：10892729
> 
> 赞同：0
> 
> 时间：2012-06-05T06:35:19.060
> 
> 标签：c#, wcf, cross-platform, client

我想问一下我是否使用 WCF 技术构建了我的服务器客户端应用程序，我可以使用这种服务器技术连接 java 客户端应用程序和 Objective-C 客户端应用程序吗？因为我想构建跨平台应用程序，但我希望服务器是 c# 服务器

我可以将它们连接在一起吗？

使用 c# 的服务器应用程序还有另一种技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:49:52.343

是的，您应该使用 RESTful 服务来创建跨平台服务。这样您就可以使用访问您的 wcf 服务方法

[http://yourdomain.com//service.svc/users/](http://yourdomain.com//service.svc/users/) {用户名}/bookmarks?tag={tag}

但是使用restful服务存在一个问题，您需要实施身份验证才能正确保护它们以避免DOS攻击和其他恶意使用。确保安静服务的最佳方法是在每个服务调用中使用散列参数。哈希参数可以从密钥、日期时间、消息盐等派生。有关更多信息，请查看此内容。

[WCF、RESTful Web 服务和自定义身份验证](https://stackoverflow.com/questions/6021612/wcf-restful-web-services-and-custom-authentication)

我建议您应该以 JSON 格式创建 restful 服务，以便它重量轻，并减少数据包的开销。

[http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON](http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON)

问候。

# python - python中的步行和平均值

> ID：10892735
> 
> 赞同：-2
> 
> 时间：2012-06-05T06:35:52.947
> 
> 标签：python

我必须处理`.txt`Folder.like 内子文件夹中存在的文件：
`New Folder>Folder 1 to 6>xx.txt & yy.txt(files present in each folder)`
每个文件包含两列：

```
arg  his
asp  gln
glu  his 
```

和

```
arg his
glu arg
arg his
glu asp 
```

现在我要做的是：
1）计算每个文件的每个单词的出现次数>并通过除以2的平均总数`total no. of lines in that file`
）然后用完成第一步后获得的值，将这些值除以总数。文件夹中存在的用于平均的文件（即在这种情况下为 2）我已经尝试使用我的代码如下：
但我在第一种情况下成功但我没有得到第二种情况。

```
for root,dirs,files in os.walk(path):
    aspCount = 0
    glu_count = 0
    lys_count = 0
    arg_count = 0
    his_count = 0
    acid_count = 0
    base_count = 0
    count = 0
    listOfFile = glob.iglob(os.path.join(root,'*.txt')
    for filename in listOfFile:
        lineCount = 0
        asp_count_col1 = 0
        asp_count_col2 = 0
        glu_count_col1 = 0
        glu_count_col2 = 0
        lys_count_col1 = 0
        lys_count_col2 = 0
        arg_count_col1 = 0
        arg_count_col2 = 0
        his_count_col1 = 0
        his_count_col2 = 0
        count += 1
        for line in map(str.split,inp):
            saltCount += 1
            k = line[4]
            m = line[6]
            if k == 'ASP':
               asp_count_col1 += 1
            elif m == 'ASP':
               asp_count_col2 += 1
            if k == 'GLU':
               glu_count_col += 1
            elif m == 'GLU':
                glu_count_col2 += 1
            if k == 'LYS':
                lys_count_col1 += 1
            elif m == 'LYS':
                lys_count_col2 += 1
            if k == 'ARG':
                arg_count_col1 += 1
            elif m == 'ARG':
                arg_count_col2 += 1
            if k == 'HIS':
                his_count_col1 += 1
            elif m == 'HIS':
                his_count_col2 += 1
        asp_count = (float(asp_count_col1 + asp_count_col2))/lineCount   
        glu_count = (float(glu_count_col1 + glu_count_col2))/lineCount   
        lys_count = (float(lys_count_col1 + lys_count_col2))/lineCount   
        arg_count = (float(arg_count_col1 + arg_count_col2))/lineCount   
        his_count = (float(his_count_col1 + his_count_col2))/lineCount 
```

至此，我可以获得每个文件的平均值。但是我怎么能得到每个子文件夹的平均值（即除以计数（文件总数））。问题是第二部分。第一部分完成。提供的代码将平均每个文件的值。但是我想添加这个平均值并通过除以总数来得出一个新的平均值。子文件夹中存在的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:04:45.853

```
import os
from collections import *

aminoAcids = set('asp glu lys arg his'.split())

filesToCounts = {}

for root,dirs,files in os.walk(subfolderPath):
    for file in files:
        if file.endswith('.txt'):
            path = os.path.join(root,file)
            with open(path) as f:
                acidsInFile = f.read().split()

            assert all(a in aminoAcids for a in acidsInFile)
            filesToCounts[file] = Counter(acidsInFile)

def averageOfCounts(counts):
    numberOfAcids = sum(counts.values())
    assert numberOfAcids%2==0
    numberOfAcidPairs = numberOfAcids/2
    return dict((acid,acidCount/numberOfAcidPairs) for acid,acidCount in counts.items())

filesToAverages = dict((file,averageOfCounts(counts)) for file,counts in filesToCounts.items()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:59:21.400

您`os.walk`与 with 一起使用`glob.iglob`是虚假的。要么使用一种，要么使用另一种，而不是同时使用。这是我的做法：

```
import os, os.path, re, pprint, sys
#...
for root, dirs, files in os.walk(path):
  counts = {}
  nlines = 0
  for f in filter(lambda n: re.search(r'\.txt$', n), files):
    for l in open(f, 'rt'):
      nlines += 1
      for k in l.split():
        counts[k] = counts[k]+1 if k in counts else 1
  for k, v in counts.items():
    counts[k] = float(v)/nlines

  sys.stdout.write('Frequencies for directory %s:\n'%root
  pprint.pprint(counts) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T08:41:05.023

我喜欢 ninjagecko 的回答，但对这个问题的理解不同。以他的代码为起点，我提出以下建议：

```
import os
from collections import *

aminoAcids = set('asp glu lys arg his'.split())

subfolderFreqs = {}

for root,dirs,files in os.walk(subfolderPath):
    cumulativeFreqs = defaultdict(int)
    fileCount = 0
    for file in files:
        if file.endswith('.txt'):
            fileCount += 1
            path = os.path.join(root,file)
            with open(path) as f:
                acidsInFile = f.read().split()

            counts = Counter(acidsInFile)
            assert aminoAcids.issuperset(counts)
            numberOfAcidPairs = len(acidsInFile)/2
            for acid, acidCount in counts.items():
                cumulativeFreqs[acid] += float(acidCount) / numberOfAcidPairs
    if fileCount:
        subfolderFreqs[root] = {acid: cumulative/fileCount for acid, cumulative in cumulativeFreqs.items()}

print subfolderFreqs 
```

# com - 当指定 CLSCTX_LOCAL_SERVER 并使用代理进程时，CoCreateInstance 失败并显示 E_FAIL

> ID：10892736
> 
> 赞同：3
> 
> 时间：2012-06-05T06:35:57.823
> 
> 标签：com, ipc, dcom, inproc, localserver

我正在尝试使用代理进程 dllhost 在单独的 64 位 dllhost 进程中运行我的 COM 64 位 dll。我已经为此创建了所需的注册表项。

当我尝试使用 CoCreateInstance 或 CoGetClassObject 和 CreateInstance 创建我的类的对象时，我收到 E_FAIL 错误。如果我指定 CLSCTX_LOCAL_SERVER 标志，则会观察到错误。此调用适用于 CLSCTX_INPROC_SERVER 标志，但当然不在单独的进程 dllhost 中。

在使用 CLSCTX_LOCAL_SERVER 时，我可以在任务栏中看到 dllhost.exe；这表明代理相关的注册表项是正确的，但是对 CoCreateInstance/CreateInstance 的调用失败并出现错误 E_FAIL。

这是代码片段：-

```
hr = CoInitialize (NULL);
if(FAILED(hr))
    return hr;

IClassFactory *ptr;
    // I can see dllhost in task manager after this call
hr = CoGetClassObject(CLSID_MyID, CLSCTX_LOCAL_SERVER, 0,IID_IClassFactory,(void**)&ptr); 

// Works fine with CLSCTX_INPROC_SERVER
//hr = CoGetClassObject(CLSID_MyID, CLSCTX_INPROC_SERVER, 0,IID_IClassFactory,(void**)&ptr);    
if(FAILED(hr))
    return hr;

ptr->LockServer(TRUE);
hr = ptr->CreateInstance(NULL, IID_IUnknown, (void**) &myPointer);
if(FAILED(hr))  // I get E_FAIL here if CLSCTX_LOCAL_SERVER is on.
    return hr; 

ptr->LockServer(FALSE);
ptr->Release(); 
```

# ant - 使用 wsejbdeploy taskdef 通过 Ant 运行 RMIC 时出错

> ID：10892737
> 
> 赞同：0
> 
> 时间：2012-06-05T06:36:03.613
> 
> 标签：ant, websphere-6.1, ibm-rad

尝试使用 Ant 任务生成 RMIC 时出现以下异常。

```
[wsejbdeploy] Error generating RMI code: RMIC command failed on project: .... with message:
[wsejbdeploy] error: The IBM RMIC version 0x1500 does not match the IBM runtime version 0x1600. 
```

请让我知道如何解决这个问题。我正在尝试使用与 RAD7.5 捆绑在一起的 WebSphere 6.1 服务器。

这在我们使用 IDE 生成 EAR 时可以正常工作，并且只有在我们使用自定义 Ant 构建文件时才会失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T06:02:09.770

错误无法运行 RMIC，因为它没有安装。RMIC 的预期位置如下： 有时会混淆。启用“将 RMIC 详细输出捕获到工作区 .log 文件。并查看您得到的确切错误。此选项将在属性 > EJBDeployment 中可用。

在我的情况下，由于类路径中有大量 jar，它会抛出错误。在缩短类路径 jar 位置后它得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:02:47.243

该错误意味着用于调用 Ant 的 shell 中的 JAVA_HOME 与嵌入式 WebSphere Application Server 中包含的 Java 不同。尝试使用 WAS_HOME/bin/ws_ant 脚本，或将 JAVA_HOME 设置为 WAS_HOME/java/。

# facebook - - (void)request:(FBRequest *)request didLoad:(id)result 未调用

> ID：10892743
> 
> 赞同：0
> 
> 时间：2012-06-05T06:36:41.257
> 
> 标签：facebook, facebook-graph-api

为什么这个方法从不调用？谁能帮我检查我的代码，我是新手。

这是我的 *.h 文件

```
@interface LoginViewController : UIViewController <FBSessionDelegate,FBRequestDelegate,FBDialogDelegate> {

    Facebook *facebook;
    IBOutlet UITextField *_txt;
    NSString *facebookUserID; 
```

我想获取 faceboo 用户 ID，所以我调用了 API '[facebook requestWithGraphPath:@"me" andDelegate:self];'

```
- (void) fbDidLogin
{
    NSLog(@"[LOGIN] Used did login");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
    // User has logged in to Facebook, now get their userId from Facebook 
    [facebook requestWithGraphPath:@"me" andDelegate:self];     
} 
```

我知道下面的方法会获取用户 ID，但它从未调用过。

```
- (void)request:(FBRequest *)request didLoad:(id)result 
{
    NSLog(@"Inside didLoad");     
    if ([result isKindOfClass:[NSArray class]])
    {
        result = [result objectAtIndex:0];
    }
    // When we ask for user infor this will happen.
    if ([result isKindOfClass:[NSDictionary class]])
    {
        //NSDictionary *hash = result;         
        NSLog(@"Name: %@", [result objectForKey:@"name"]);

        self.facebookUserID = [result objectForKey:@"id"];
        NSLog(@"ID: %@", [result objectForKey:@"id"]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:02:14.767

您需要实现 openURL 或 handleOpenURL（后者在 ios 4.2 之前）。它需要在您的应用程序委托中实现，而不是您的视图控制器。

请参阅[未调用 fbDidLogin](https://stackoverflow.com/questions/4244609/fbdidlogin-not-called/4250836#4250836)。openURL 将导致 fbDidLogin 被调用

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    NSLog(@"============HANDLE OPEN URL");
    ViewController *v =(ViewController *) vc;
    return [[v facebook] handleOpenURL:url]; 
} 
```

# sql - Transact-SQL 中任何相当于 oracle sql 的 DBMS_UTILITY.get_hash_value() 的函数？

> ID：10892744
> 
> 赞同：1
> 
> 时间：2012-06-05T06:37:00.053
> 
> 标签：sql, sql-server-2008, tsql

在搜索 msdn 时，我发现了一个名为 HASHBYTES() 的内置函数。不确定这是否可以用来获得 DBMS_UTILITY.get_hash_value() 在 oracle 中给出的结果。我使用的是 SQL Server 2008。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:24:52.903

[HASHBYTES](http://msdn.microsoft.com/en-us/library/ms174415.aspx)很接近，但使用某些算法的预设（例如 SHA1 或 MD5）

您不能像使用[DBMS_UTILITY.GET_HASH_VALUE()那样选择基数或长度](http://docs.oracle.com/cd/B12037_01/appdev.101/b10802/d_util.htm#1003647)

您可能必须自己动手才能完全模仿它，但我认为这是倒退...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T14:20:22.250

在下面给出的链接中比较 Oracle 和 SQL Server 中的 SQL 内置函数

[http://dotnet-bm.blogspot.in/2013/08/comparison-in-sql-built-in-functions-in.html](http://dotnet-bm.blogspot.in/2013/08/comparison-in-sql-built-in-functions-in.html)

# django-orm - 多个django项目的单点登录

> ID：10892748
> 
> 赞同：1
> 
> 时间：2012-06-05T06:37:25.117
> 
> 标签：django-orm

在我们的商业案例中，有以下三个项目：

*   项目A
*   项目B
*   项目C

**ProjectA**将包含用户注册，因此如果用户在 ProjectA 注册，那么他可以访问除管理员登录之外的项目（**ProjectB、ProjectC**等）。每个项目都有不同的管理站点登录。

在这种情况下，我们将 django 多数据库概念与路由器一起使用：- [http://dustinfarris.com/2012/2/sharing-django-users-and-sessions-across-projects/](http://dustinfarris.com/2012/2/sharing-django-users-and-sessions-across-projects/)

之后，用户和会话将被路由到相应的项目（我可以在其他项目中获取 ProjectA 用户，并与该用户创建记录。）

**问题是**在访问管理员时它使用默认值（基于路由器的本地数据库）。但是在更新记录时会引发以下异常：

```
User matching query does not exist 
```

（它检查本地数据库中的 ProjectA 用户）

我的问题是是否有可能为管理员中的特定操作指定数据库（在路由器中）？（当我登录时，显示列表等。管理员需要使用默认数据库，而更新与 ProjectA 用户相关的记录意味着它需要访问路由器数据库）请任何人就此提出建议，谢谢。

# eclipse - 为什么像 Eclipse 中的“Balls”这样的 RenderScript 4.0 示例不生成 ScriptC_balls.java (s)？

> ID：10892753
> 
> 赞同：-1
> 
> 时间：2012-06-05T06:37:45.357
> 
> 标签：eclipse, renderscript

我在 Eclipse 中运行 RenderScript 4.0 示例，如“Balls”，但项目不生成 ScriptC_balls.java (s) 我的 ADT 是 18，sdk 是 15(4.0.3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T07:40:38.003

好的。请首先检查您的 AndroidManifest.xml。设置时可能会出现一些问题。 `<uses-sdk android:minSdkVersion="17" android:targetSdkVersion="17" />` 版本应该大于 15。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:54:28.653

这里没有太多信息可以继续，但是 RenderScript 和 ADT 对 order 非常敏感，并且 autogen 方面很容易混淆。如果简单地清理项目不起作用，请尝试检查以确保

```
#pragma rs java_package_name(name) 
```

与 .rs 文件所在的包相对应。有时在导入示例 RenderScript 项目时，包名称最终不正确。我通常只是创建一个新项目并导入源文件并计划摆弄包名称以使其正确。

# android - 防止图像像素化，缩进 listViews 并添加圆角

> ID：10892754
> 
> 赞同：7
> 
> 时间：2012-06-05T06:37:51.197
> 
> 标签：android, listview, android-layout, pixels

我有一些关于 Android 上的 UI 开发的问题和疑问。首先看这张图：

![在此处输入图像描述](../Images/985589421401bb7e7c24f591a3cd2cdb.png)

首先在图像 A）这是我插入并水平重复的图像，以在屏幕顶部给出锯齿形形状，无论屏幕大小如何，高于没有内容和背景颜色的 textField - 但我确信你可以是这两种颜色并不像它应该的那样完美匹配，即使它们都具有相同的十六进制颜色值（#BF0426）。其次，您还可以在该锯齿形图像上看到一些严重的像素化。我该如何解决这两个问题？

然后在图片 B）这里我有一个简单的 listView。我想做的是首先在两边缩进一点，然后把顶部和底部的角弄圆。所以基本上我希望它看起来像屏幕截图上绘制的蓝色边框。（您典型的 iOS 列表视图）。我该怎么做呢？

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T16:56:48.680

对于图像。只是出于好奇，您为什么不简单地扩展您的图像以包括顶部像素呢？换句话说，构建您的重复图像，使其包含您尝试使用空文本视图创建的像素。这至少会解决颜色不匹配的问题，因为颜色将全部从同一个地方生成。在像素化方面。你是真的在重复形象，还是在传播形象。传播肯定会导致您所看到的。

对于您的表格视图：对于左右缩进，您可以简单地使用表格视图项的边距或填充属性。有通用的填充和/或边距属性（它将填充所有顶部、底部、左侧和右侧），或者每个顶部、底部、左侧和右侧都有单独的填充和/或边距属性。这是您可能想要阅读的关于填充与边距的一个很好的链接。

[视图的填充和边距之间的区别](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin)

下边距的示例属性（在 XML 文件中调用）

```
android:layout_marginBottom
setMargins(left, top, right, bottom) // for setting margins programmatically 
```

顶部填充的示例属性（在 XML 文件中调用）

```
android:paddingTop
setPadding(left, top, right, bottom) // for setting padding programmatically 
```

对于自定义顶部和底部，您应该可以使用以下教程

[http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

从这里，您应该能够将项目检测为第一个和最后一个项目，并将背景属性（图像）设置为具有圆顶或圆底的背景图像。这就是我在 iPhone 上的做法。我还实现了一些看起来像 tableviews 但只是垂直布局的东西，我自己的自定义视图看起来像你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:22:36.460

需要考虑的一件事是，您使用的文件格式会在保存图像时改变图像（有损压缩），因此具有某种颜色的 .jpg 可能看起来与具有相同颜色的 .bmp 不同。确保在尝试匹配图像时使用相同的应用程序和/或导出设置进行创作。

此外，如果您使用与 android 显示器不兼容的 DPI 创建图像，则可能会导致细节区域出现严重的像素化，尤其是渐变和阴影。

# java - 如何将参数添加到 GWT 中的 URL？

> ID：10892759
> 
> 赞同：3
> 
> 时间：2012-06-05T06:38:32.643
> 
> 标签：java, url, gwt, anchor

我有一个 Java/GWT 应用程序。其中有一个项目列表。如果我单击任何项​​目标题，则该项目会以完整描述打开。

我使用 Anchor 作为项目标题，所以我想要的是当用户单击项目标题时，然后在 URL 中将该项目的 id 附加到当前 URL。

例如，这是我的网址：

`"http://127.0.0.1:8888/MyApp.html?gwt.codesvr=127.0.0.1:9997#listItem?list"`

我必须将 id 附加到 URL 的末尾，例如：

```
“http://127.0.0.1:8888/MyApp.html?gwt.codesvr=127.0.0.1:9997#listItem?list &itemId=55 ”
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:15:59.700

使用 Window.Location 应该可以解决问题：[请参阅此处的文档](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/Window.Location.html)

像这样的东西：

```
String url = Window.Location.getHref();
url = url + "&itemId=" + itemId;
Window.Location.replace(url); 
```

当然，正如 Crollster 指出的那样，您应该在 # 符号之前插入您的 url 参数。提供有关您正在寻找的内容的更多详细信息（为什么必须手动添加参数，页面是否必须重新加载......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:44:04.083

您可以使用重定向命令来添加此参数

```
response.sendRedirect(your url + itemId=55); 
```

然后你可以提取这个变量。

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:55:31.150

您可以尝试`javascript`编码。当用户单击链接时，获取此链接`URL`并将您的 id 附加到它并重建`URL`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:12:38.063

`#`你在网址中看到了吗？那是一个锚 - 你需要在此**之前**添加你的参数，所以它看起来像这样：

```
http://127.0.0.1:8888/MyApp.html?gwt.codesvr=127.0.0.1:9997&itemId=55#listItem?list 
```

高温高压

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-01-19T13:28:43.697

[Apache HttpComponents 的URIBuilder](https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIBuilder.html)提供了一种方便的方法来添加参数，并将处理现有的查询参数和锚点。

# android - 即使以太网可用且已连接，以太网的 NetworkInfo.isAvailable() 始终为 false

> ID：10892760
> 
> 赞同：1
> 
> 时间：2012-06-05T06:38:42.427
> 
> 标签：android, networking, ethernet

这是代码：

```
ConnectivityManager conMan = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo info = conMan.getActiveNetworkInfo();
Log.e("TEST","=================Info================\n"+info.toString()); 
```

logcat 看起来像

```
E/TEST    ( 2113): =================Info================
E/TEST    ( 2113): NetworkInfo: type: ETHERNET[], state: CONNECTED/CONNECTED, reason:    (unspecified), extra: (none), roaming: false, failover: false, isAvailable: false 
```

你觉得这很奇怪吗？不可用但已连接...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:42:47.603

试试这个代码来检查你的网络连接

```
 public boolean isNetworkOnline() {
boolean status=false;
try{
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getNetworkInfo(0);
    if (netInfo != null && netInfo.getState()==NetworkInfo.State.CONNECTED) {
        status= true;
    }else {
        netInfo = cm.getNetworkInfo(1);
        if(netInfo!=null && netInfo.getState()==NetworkInfo.State.CONNECTED)
            status= true;
    }
}catch(Exception e){
    e.printStackTrace();  
    return false;
}
return status;

} 
```

# jquery - 如何使用 Jquery 创建指向当前选项卡的链接

> ID：10892770
> 
> 赞同：0
> 
> 时间：2012-06-05T06:39:30.647
> 
> 标签：jquery, html

当我通过 url:www.domain.com/#ratings 时，评级选项卡应该打开，现在它在 url 中显示当前选项卡，但不适用于链接选项卡

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.tabs a').click(function () {
            switch_tabs($(this));
        });
        switch_tabs($('.defaulttab'));
    });

    function switch_tabs(obj) {
        $('.tab-content').hide();
        $('.tabs a').removeClass("selected");
        var id = obj.attr("rel");
        $('#' + id).show();
        obj.addClass("selected");
    }
</script>
<ul class="tabs">
    <li>
        <a href="#movies" class="defaulttab" rel="movies">Tutorial</a>
    </li>
    <li>
        <a href="#ratings" rel="ratings">Comments</a>
    </li>
</ul>
<div class="contentbox">
    <div class="tab-content" id="movies">movie tab</div>
    <div class="tab-content" id="ratings">rating tab</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:44:14.483

你有没有试过这个：

```
$(function(){
  var hash = window.location.href.split('#').pop();
  var allowed = ['hello', 'world'];
  if(allowed.indexOf(hash) == -1) hash = allowed[0];
  switch_tabs($('a[href=#'+hash+']'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:03:27.443

试试这个，

```
 $(document).ready(function () {
        $('.tabs a').click(function () {
            var $this = $(this);
            $('.tabs a').removeClass("selected");
            $this.addClass('selected');
            switch_tabs($this.attr('href'));
            return false;
        });
        var anchor;
        var hash = $('a[href="' + location.hash + '"]');
        if(hash.length > 0){
            anchor = hash;
        }
        else{
            anchor = $('.defaulttab');
        }
        anchor.click();
    });

    function switch_tabs(hash) {
        $('.tab-content').hide(); 
        $(hash).show();   
        location.hash = hash;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:49:57.583

使用 switch_tabs(window.location.hash); ?

例如：

```
 $(window).bind('hashchange', function() {
    alert(window.location.hash.split('#').pop());
        switch_tabs(window.location.hash);
    }); 
```

当哈希更改调用您的函数时

# java - 如何从一个 webapp 自动登录到另一个 webapp

> ID：10892774
> 
> 赞同：2
> 
> 时间：2012-06-05T06:39:53.463
> 
> 标签：java, javascript, jsf, autologin

我有一个网络应用程序（我们称之为 app1），我什至看不到源代码，要进入它。我需要进行基本身份验证，“用户，通过”。

然后我正在创建另一个 Web 应用程序 (app2)（即 java/JSF/Icefaces），您还必须使用用户密码登录（用户和 app1 的密码与用户和 app2 的密码相同）。

有时我必须打开一个 app1 窗口（填写一些我不想在 app2 中复制的表格）。我有该窗口/表单的有效 URL，但是，问题是，当我调用该 URL 时，app1 首先要求用户/通行证，我不希望这样。我想要类似单点登录的东西。这只是基本身份验证（我有用户通过）。

我试图在 app2 中打开一个新的 jsp，并将其发送重定向到 app1 尝试进行基本身份验证，但我不能，我的意思是，它不起作用。

App1 有一个 REST API，我可以通过基本身份验证从 app2 使用它（这样就可以了）。

有人能帮我吗？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:50:41.250

您必须了解 App1 如何处理登录，例如，如果它是基于 cookie 的，那么首先您需要使用 REST 登录，然后根据 App1 的要求设置 cookie。

[单点登录概念](http://docs.oracle.com/cd/A97335_02/portals.102/a90343/concepts.htm)

[建立单点登录](http://www.ibm.com/developerworks/web/library/wa-singlesign/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:48:09.543

你可以通过三种方式做到这一点：

1.  会议
2.  饼干
3.  过滤器

在**第一种**情况下，您必须*更改*代码，`App1`以便它处理[来自](http://www.fwd.at/tomcat/sharing-session-data-howto.html).`App2`

在**第二种**情况下，只需通过检查`App2`.. 设置的 cookie 来进行自动登录（不过我对此没有信心）

在**第三种**情况下，您必须设置一个`Filter`in`App1`以便它在请求来自您的特殊*信息时**绕过*登录凭据。`App2`

 *但是对于那些您必须更改`App1`. 您不能直接绕过身份验证过程。此外，您的一个很好的特点是`App1`不允许在没有`login`凭据的情况下直接访问安全页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:59:22.047

您可以`SSO (Single Sign On)`为此使用一个概念。如果您想直接通过 SSO 进行操作，是的，您可以按照某些人提供的 SSO 模块进行操作。当然，您可以创建自己的 SSO 方法，实施以下步骤：

1-> 使用`REST/SOAP API`登录到 app1。作为响应，返回一个参数（一个加密的字符串或其他东西）。将其存储在某个 cookie 中。（在后面，将此参数保存在一些超时和用户信息中，例如，在 a 中`HashMap`）

2->当从第二个应用程序登录时，将参数与请求一起发送。如果您在后端接受该参数，请尝试对其进行验证，`timeout`并且可能是用户信息。成功后继续进行身份验证。

您可以在`domain level cookie`. 中设置参数，因此所有过程都发生在您的后端。

你能试试这个并告诉我吗？

谢谢*

# c++ - 将核心转储从 Unix 生产环境移动到其他开发 Unix 环境

> ID：10892777
> 
> 赞同：0
> 
> 时间：2012-06-05T06:40:28.717
> 
> 标签：c++, coredump

我们的应用之一是在生产中生成核心。然而，生成的核心并没有多大帮助，因为大多数变量值都显示为已优化/它不包含太多调试信息。

当我们将核心从生产环境移动到开发环境时，gdb 无法成功加载它。我认为这是由于在生产中依赖于其他库。

请让我知道我们如何在不移动剩余依赖库的情况下将核心从生产环境迁移到开发环境。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:35:30.010

如果开发环境的系统库与生产环境的系统库不匹配，`gdb`则会发出警告，并可能无法解码核心文件。您应该`ldd`在您的程序上运行以查找它所依赖的库列表，并将这些库从您的生产环境复制到您的开发环境。

将依赖库复制到一个模仿生产环境根目录结构的目录结构中通常很方便（如果你愿意的话，一个假根目录）。然后，您可以使用该`gdb`命令`set solib-absolute-prefix`将其设置为该假根目录的路径，以便找到库。

这个问题似乎是相关的，如果不是[另一个问题](https://stackoverflow.com/questions/7557283/how-do-i-easily-package-libraries-needed-to-analyze-a-core-dump-i-e-packcore)的重复的话。

# delphi - Delphi XE、Firebird 和 UTF8

> ID：10892779
> 
> 赞同：3
> 
> 时间：2012-06-05T06:40:58.670
> 
> 标签：delphi, utf-8, firebird

我正在将 D7 程序升级到 XE，在 Delphi 7 下我有这样的代码......

ParamByName ('Somefield').AsString:=someutf8rawbytestring;

在 XE 下，如果 someutf8rawbytestring 包含 unicode 字符，例如 Cyrillic 脚本，那么它们会显示为 ???? 在数据库中。

我看到 someutf8rawbytestring 是 8 个字符长，对于我的 4 个字符的字符串，这是正确的。但是在数据库中只有四个字符。

我正在通过带有 XE 的 TIBQuery 使用 Firebird 2，并更新字符类型为“NONE”的 Varchar 字段。

因此，看起来 utf8 正在被检测到并以某种方式转换回 unicode 数据点，然后导致数据库的字符串转换失败。我尝试将 varchar 字段设置为 UTF8 编码，但结果相同。

那么这应该如何处理呢？

编辑：我可以使用数据库工具并编辑我的数据库字段以获取一些非 ASCII 数据，当我读回它时，它以 utf8 编码字符串的形式出现，我可以使用 UTF8decode 并且它是正确的。但是如果没有一堆????将数据写回这个字段似乎是不可能的。在数据库中。我试过 ParamByName ('Somefield').AsString:=somewidestring; 和 ParamByName ('Somefield').AsWideString:=somewidestring; 我只是在数据库中得到垃圾......

EDIT2：这是代码（在一次迭代中）......

```
 procedure TFormnameEdit.savename(id : integer);
begin
    With DataModule.UpdateNameQuery do begin
        ParamByName ('Name').AsString:=UTF8Encode(NameEdit.Text);
        ParamByName ('ID').AsInteger:=id;
        ExecSQL;
        Transaction.Commit;
    end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:52:48.467

正如@Lightbulb 建议的那样，将 lc_ctype=UTF8 添加到 TIBDatabase 参数解决了这个问题。

# javascript - 为什么在弹出按钮单击时div位置会发生变化？

> ID：10892780
> 
> 赞同：0
> 
> 时间：2012-06-05T06:41:02.260
> 
> 标签：javascript, html, css, ajax

我有一个包含多个 div 类的 HTML 页面。在第二个 div 类中，我有一个注册表单。当我单击提交按钮并检查验证并弹出窗口时，单击弹出窗口后它会重定向到主 div，并且我希望注册 div 类在单击弹出按钮后保持不变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:48:40.527

如果您使用 href 来获取点击并调用 js 方法。您必须防止默认行为。即使您不使用href，它也可以解决您的问题。

```
function(e){
 e.preventDefault();
// your code.

 return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:04:20.373

听起来您的链接的 href 值是 #

你可以添加

```
return false; 
```

作为绑定到点击事件的函数的最后一行

# asp.net - Ajax 支持搜索具有多个条件的产品

> ID：10892784
> 
> 赞同：1
> 
> 时间：2012-06-05T06:41:12.427
> 
> 标签：asp.net, ajax, search, filter

想要有这个网站上的搜索功能

[http://www.carwale.com/new/sea​​rch.aspx#budget=6&budget=8&fuel=2](http://www.carwale.com/new/search.aspx#budget=6&budget=8&fuel=2)

在这里，每当用户过滤搜索（选中任何复选框）时，它都会相应地更新结果，这可以理解为 ajax 过滤器。

但同时，查询字符串也反映了变化，这有助于用户将过滤器搜索添加到书签以供以后参考。

通过 asp.net/javascript 更改它可能会导致页面重新加载..

任何有关实施相同的提示或建议都会非常有帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:22:28.080

-- 对于第一部分，他有一组带有自动回发的复选框列表。

在每次回发中，列表都会根据选中的复选框进行更新。

到目前为止一切都很简单，很酷的是它有一个很好的交互界面（用 javascript 和 jQuery 制作）。

-- 关于第二部分，它如何更改 url 以便可以在不重新加载页面的情况下成为书签。这里的技巧是将参数放在锚点之后，`#`例如：

```
/new/search.aspx#budget=2 
```

使用锚`#`，页面不会重新加载并保持原样。因此，当有人单击复选框时，通过 javascript 也会更新 url，但仅更新之后的内容，`#`因此页面保持原样而无需完全重新加载。

现在后面的`#`代码无法读取后面的参数，只能通过javascript读取。

因此，当您为此页面添加书签并直接转到例如`/new/search.aspx#budget=2`javascript 读取之后的内容`#`并将其转换为命令时，选中相应的复选框，并要求刷新内容。所有这些都只能通过 javascript 来完成。

我看到这是在`jQuery history plugin`这个模式中使用 as 助手。

[http://archive.plugins.jquery.com/project/history](http://archive.plugins.jquery.com/project/history)

`#`当您在目录上从一页到另一页导航时，从亚马逊完成了与参数相同的技巧。

-- 一个更聪明的技巧是打开一个完整的页面等待，所以用户不能与页面交互，直到页面再次准备好。如果它不这样做，并且用户在复选框上快速单击两次，那么这可能会导致更新面板上的整页回帖，这可能会丢失以前的设​​置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:47:18.357

这可以在三件事的帮助下完成

1）正如@Aristos所说，启用自动回发的复选框

2) Ajax 控制工具包 Modalpopup，它在每次异步回发时自动触发 (http://weblogs.asp.net/ruslan/pages/ajax-update-progress-updateprogress-in-ajax-modal-popup-modalpopupextender.aspx 或[http://mattberseth.com/blog/2007/07/modalpopup_as_an_ajax_progress.html](http://mattberseth.com/blog/2007/07/modalpopup_as_an_ajax_progress.html) )

3）历史点（http://msdn.microsoft.com/en-us/library/cc488548.aspx）

如果您不想使用它，这可以完全不使用 jQuery 来完成。

# android - 我在 log cat 中收到 ClassNotFoundException？为什么？

> ID：10892786
> 
> 赞同：0
> 
> 时间：2012-06-05T06:41:38.870
> 
> 标签：android, android-activity, classnotfoundexception

对于我的项目，我所有的 java 类都在一个包中——`com.example.android.bitmapfun`我的清单是：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.example.android.bitmapfun"
  android:versionCode="1"
  android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:description="@string/app_description"
    android:hardwareAccelerated="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name="com.example.android.bitmapfun.ImageGridActivity"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.android.bitmapfun.ImageDetailActivity"
        android:label="@string/app_name"
        android:theme="@style/AppTheme.FullScreen" >
    </activity>
</application>
</manifest> 
```

活动是：

```
 package com.example.android.bitmapfun;

 import android.os.Bundle;
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.FragmentTransaction;

  public class ImageGridActivity extends FragmentActivity {
  private static final String TAG = "ImageGridFragment";

 @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (getSupportFragmentManager().findFragmentByTag(TAG) == null) {
        final FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        ft.add(android.R.id.content, new ImageGridFragment(), TAG);
        ft.commit();
    }
  }
  } 
```

ImageDeutilActivity.java：

```
 package com.example.android.bitmapfun;

 import android.annotation.SuppressLint;
 import android.app.ActionBar;
 import android.content.Intent;
 import android.os.Bundle;
 import android.support.v4.app.Fragment;
 import android.support.v4.app.FragmentActivity;
 import android.support.v4.app.FragmentManager;
 import android.support.v4.app.FragmentStatePagerAdapter;
 import android.support.v4.view.ViewPager;
 import android.util.DisplayMetrics;
 import android.view.Menu;
 import android.view.MenuInflater;
 import android.view.MenuItem;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.view.ViewGroup;
 import android.view.WindowManager.LayoutParams;
 import android.widget.Toast;

 import com.example.android.bitmapfun.R;
 import com.example.android.bitmapfun.Images;
 import com.example.android.bitmapfun.DiskLruCache;
 import com.example.android.bitmapfun.ImageCache;
 import com.example.android.bitmapfun.ImageFetcher;
 import com.example.android.bitmapfun.ImageResizer;
 import com.example.android.bitmapfun.ImageWorker;
 import com.example.android.bitmapfun.Utils;

 public class ImageDetailActivity extends FragmentActivity implements OnClickListener {
private static final String IMAGE_CACHE_DIR = "images";
public static final String EXTRA_IMAGE = "extra_image";

private ImagePagerAdapter mAdapter;
private ImageResizer mImageWorker;
private ViewPager mPager;

@SuppressLint("NewApi")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.image_detail_pager);
 .....
} 
```

LogCat：[这里](http://www.pastie.org/4029966)

为什么 LogCat 在这里显示 ClassNotFoundException？我试过但无法清除错误。请任何想法来克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:51:17.080

要使用此类`FragMentActivity`，您的应用程序必须在其清单中指定 API 级别“11”或更高，并针对支持相同或更高 API 级别的 Android 库版本进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T16:54:15.360

对于它的价值，当我将 BitmapFun 项目导入 Eclipse 时，我无法获得任何解决方案。这是因为 ClassNotFoundException。我确实注意到该项目缺少 libs 文件夹和支持库，但是创建 libs 文件夹并将支持库放入其中并不能解决问题。因此，我在 Eclipse 中创建了一个新项目，将文件从原始导入的项目中转移过来，并且在第一次尝试时就成功了。胜利。

# c++ - OpenGL 函数在多线程应用程序中失败

> ID：10892788
> 
> 赞同：0
> 
> 时间：2012-06-05T06:41:43.860
> 
> 标签：c++, multithreading, opengl, mutex, semaphore

为什么**有时**在下一个电话后：

```
TakeOpenGL();
glGetTexLevelParameteriv(GL_TEXTURE_2D, 0, GL_TEXTURE_WIDTH, &TextureWidth);
glGetTexLevelParameteriv(GL_TEXTURE_2D, 0, GL_TEXTURE_HEIGHT, &TextureHeight);
FreeOpenGL(); 
```

变量 Texture* 的值不正确？

我正在使用 OpenGL 互斥锁，它执行以下操作：

```
void TakeOpenGL(){
    OpenGL.Enter();
    wglMakeCurrent(hDC, hRC);
}

void FreeOpenGL(){
    OpenGL.Leave();
    wglMakeCurrent(0, 0);
} 
```

什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:44:24.007

`wglMakeCurrent`如果不持有互斥锁，您将无法调用。你的`FreeOpenGL`功能就是这样做的。

# eclipse - 初始化 Java 工具时出现 Eclipse 内部错误

> ID：10892790
> 
> 赞同：57
> 
> 时间：2012-06-05T06:41:55.880
> 
> 标签：eclipse

在 Windows 7 Ultimate 上运行的 Eclipse Indigo 出现错误。对于以下各项：

```
Android SDK content loader
Building workspace
Initializing Java Tooling
Loading data for Android 2.3.3
Loading data for Android 4.03 
```

抛出此错误：

```
 An internal error occurred during: "Initializing Java Tooling".java.lang.NullPointerException 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-08-16T07:24:47.477

关闭所有打开的项目并退出 Eclipse。现在您可以打开 Eclipse 而不会出现错误。开始一一打开您的项目，找出导致问题的原因。这很可能是因为您在 AVD 管理器中删除了设备配置文件。

或者您可以开始在新的工作区工作（即更改您的工作区），然后尝试从旧工作区导入您的项目

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-05T06:55:20.450

删除现有工作区，然后重新创建工作区并添加项目。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-07-31T13:07:10.617

只需将**“eclipse.ini”**文件中的以下值更改为以下值：

```
-Xms1024m
-Xmx2048m 
```

**笔记：**

*   您可以通过右键单击 eclipse 图标并选择“打开文件位置”来找到**“eclipse.ini”文件。**
*   出现这个错误是因为eclipse内存不足，所以我们只是增加了eclipse应用程序分配的内存。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-08-24T15:22:54.210

1.  关闭 Eclipse。
2.  转到 Windows 资源管理器中的工作区文件夹并删除以下文件夹：
    *   .元数据
    *   .推荐人
    *   远程系统临时文件
    *   服务器
3.  打开 Eclipse 并在启动期间再次提供相同的工作区文件夹。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-07-10T11:30:46.717

我想补充一点，简单地关闭和重新打开 Eclipse 对我来说总是适用于这种类型的错误。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-07T07:47:10.443

不需要创建另一个工作空间并从旧的导入所有项目：只需清空`\Workspaces\MyEclipse 8.5 M2\.metadata\.plugins\org.eclipse.core.resources\.projects`目录并重新启动 myeclipse/eclipse

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-03-26T16:13:03.557

我遇到了同样的问题。但是在 eclipse.ini 中更改两个配置解决了我的问题。

**-Xms512m 到 -Xms1024m 和 -Xmx1024m 到 -Xmx2048m**

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-10T14:00:49.560

1.  检查您的项目 -> 属性 -> Java 构建路径有`JDK`库而不是`JRE System Library`.

2.  转到`Eclipse`安装目录，搜索`eclipse.ini`-> 打开它

搜索包含以下任何值的行：

> -Xms512m -Xmx512m -Xms1024m -Xmx1024m -Xms1G -Xmx1G

只需将内存大小翻倍，假设您必须更改

> -Xms512m 到 -Xms1024m

增加 eclipse 内存大小将有助于`eclipse`从您的 PC 获得更多 RAM 大小。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-09T17:49:44.687

就我而言，我重新启动了我的 Eclipse IDE，但没有删除/编辑我的工作区或 .metadata 文件夹。错误“在“初始化 Java 工具”期间发生内部错误。java.lang.NullPointerException”消失了，Eclipse 运行良好。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-22T09:22:36.587

有时问题出在安装的 Java 版本上。尝试在我的 Ubuntu 16.04 上启动 Spring Tool Suite 时，我遇到了类似的问题。我的机器上安装了 java 9。我将其更改为 java 8。它开始工作。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-10-03T21:31:55.977

我的问题是由一些使用旧 JRE 系统库的旧 Java 项目引起的，所以我所要做的就是删除旧库并通过右键单击项目 -> 属性 -> Java 构建路径 -> 库 -> 添加新库添加库。

[![在此处输入图像描述](../Images/8336106614c9e50351e612c001f41da1.png)](https://i.stack.imgur.com/uJrgE.jpg)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-09-30T19:06:38.720

我在 eclipse 中遇到了同样的问题，所以我告诉你我做的同样的步骤，你只需要去 eclipse 安装文件夹，你会在我的情况下找到名为 eclipse.ini 的文件，位置是

C:\Users\comp\eclipse\jee-2018-12\eclipse

你可以找到你的位置。

在那个位置，以文本模式打开 eclipse.ini，你会在下面找到一些文本
-Xms256m -Xmx1024m

将其更改为

-Xms512m -Xmx1024m

我希望这将在我的系统中检查 100% 对您有所帮助；-)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-01T10:31:32.343

只需删除工作区上的 .metadata，然后重新启动 IDE 并再次正确配置

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-14T15:08:04.873

我的问题也得到了解决，我在 STS 上得到了解决，刚刚关闭了所有项目，包括项目资源管理器上的服务器，重新启动 ide，就是这样。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-11-30T03:42:34.037

检查 Eclipse 日志（工作区 .metadata 文件夹中智能命名的“.log”文件）并检查完整的堆栈跟踪。在我的情况下，它是由方法“org.eclipse.m2e.jdt.internal.MavenClasspathVariableInitializer.initialize(MavenClasspathVariableInitializer.java:30)”引起的，这导致了一个从未修复过的“启动期间的竞争条件”错误。我真的建议放弃 Eclipse 以支持更严肃的 IDE；像 IntelliJ 或 Netbeans。使用 Eclipse 意味着您将投入 40-50% 的时间来尝试解决此类错误，而不是提高工作效率。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-12-27T08:02:59.523

只需关闭 Eclipse 或 STS 并重新启动它。这可能会修复此错误。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-07-10T16:26:38.073

我遇到了同样的问题。从 Eclipse 中的 Switch workspace 选项切换回预定义的工作空间解决了我的问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-08-15T18:27:49.097

在我的情况下，“MySQL 服务”被禁用。我得到了同样的错误。

因此，如果您使用的是 MySQL，请检查它。

按`win+R`然后写`services.msc`并回车。搜索`MySQL`服务。启动服务。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-10-10T05:59:27.043

就我而言，我当前的工作区中有三个项目中有两个存在此问题。我打开工作区目录并备份损坏的项目，然后将其删除。然后再次打开eclipse。显然有缺失的数据可以处理。再次关闭 eclipse 并添加回没有元数据目录的早期保存项目。

TL;博士。只需从工作区中的项目中删除元数据目录。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-03-13T14:49:36.220

就我而言，Eclipse 尝试使用不存在的工作区文件夹启动。确定文件夹是此时创建的，但是在创建工作区的过程中发生了异常。发生异常后，我只是将工作区切换到正确的文件夹。为了避免滑到不存在的工作区文件夹，我从最近的工作区中删除了它。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-10-30T07:18:59.913

在我的情况下，即使*删除工作区并重新导入也不起作用*。因为所有文件都已**损坏**。所以利用了我现有的备份数据，将其提取并重新导入工作区，然后它开始正常工作。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-03-14T18:50:02.750

将 Eclipse 升级到最新版本（2020-12、4.18.0）为我修复了该错误。

# c# - 仅在 C# 中将字符串转换为日期

> ID：10892793
> 
> 赞同：-3
> 
> 时间：2012-06-05T06:42:16.657
> 
> 标签：c#, asp.net, datetime

> **可能重复：**
> [在 .NET 中将字符串转换为日期](https://stackoverflow.com/questions/2188585/convert-string-to-date-in-net)

我是新来的，当一个字符串数组的值为“120612”和“200612”时，我遇到了这个问题。

我需要将字符串转换为这样的日期格式，“2012 年 6 月 12 日，星期二”。我将如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:46:39.607

[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)可能是您正在寻找的：

```
DateTime.ParseExact("200612", "ddMMyy", System.Globalization.CultureInfo.CurrentCulture) 
```

# oracle - 面向对象数据库中的术语

> ID：10892800
> 
> 赞同：0
> 
> 时间：2012-06-05T06:42:52.507
> 
> 标签：oracle, oop

我正在研究 oracle 中的面向对象概念，并且在某些方面有些困惑，例如，我知道如何创建对象类型，但不知道什么是不可实例化？

```
create or replace type compar_item_t as object(
com varchar2(50),
chint varchar2(254),

 not instantiable member function getChint
                  return varchar2,
                 member function print
                  return varchar2
) not instantiable not final; 
```

不可实例化意味着我们不能实例化它吗？或者最后一个术语是什么意思？我的意思是不可实例化不是最终的；?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:50:24.620

如果您还不熟悉此文档，我认为此文档可能会有所帮助：

> [http://docs.oracle.com/cd/B19306_01/server.102/b14220/objects.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14220/objects.htm)
> 
> Oracle 对象技术是建立在 Oracle 关系技术之上的抽象层。

这意味着“它是我们的产品，所以我们正在制定我们自己的术语”；）

无论如何，Oracle 所说的“可实例化”是什么意思（我不确定你会在大多数字典中找到这个词，并且可能会被大多数拼写检查器拒绝；））？从同一个链接：

> 将方法声明为 NOT INSTANTIABLE 意味着该类型没有为该方法提供实现......
> 
> NOT INSTANTIABLE 类型的子类型可以覆盖超类型的任何不可实例化方法并提供具体实现。如果还有任何不可实例化的方法，则子类型也必须声明为 NOT INSTANTIABLE....

所以我猜“不可实例化”类似于大多数其他 OOP 语言中的“抽象基类型”或“接口”。

恕我直言...

# asp.net - ftp 服务器程序集中的 asp.net 网站主机丢失错误

> ID：10892801
> 
> 赞同：-1
> 
> 时间：2012-06-05T06:42:55.327
> 
> 标签：asp.net, website-hosting

我收到以下错误消息：

```
CS0246: The type or namespace name 'MySqlConnection' could not be found
(are you missing a using directive or an assembly reference? 
```

我正在使用以下代码：

```
MySqlConnection conn = new MySqlConnection(ConfigurationManager.ConnectionStrings["conn"].ConnectionString)‌​; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:10:13.070

您可能在输出目录中缺少“MySql”dll。

# r - 使用 R 计算图中的峰值

> ID：10892803
> 
> 赞同：-6
> 
> 时间：2012-06-05T06:42:59.967
> 
> 标签：r

我有一个有两个变量的表。数据来自核磁共振。所以当我绘图时，我得到了一个光谱。我在图中找到了峰值。但我需要知道如何列出峰值的值并将它们存储到一个变量中。任何人请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T15:22:05.697

基于 Brian Ripley 在[R-help](https://stat.ethz.ch/pipermail/r-help/2001-January/010704.html)的帖子的简单实现：

```
peaks <- function(x, halfWindowSize) {

  windowSize <- halfWindowSize * 2 + 1
  windows <- embed(x, windowSize)
  localMaxima <- max.col(windows, "first") == halfWindowSize + 1

  return(c(rep(FALSE, halfWindowSize), localMaxima, rep(FALSE, halfWindowSize)))
} 
```

例子：

```
x <- c(1,3,1,3,1)

peaks(x, 1)
## [1] FALSE  TRUE FALSE  TRUE FALSE 
```

# canvas - KineticJS - 绘制形状时使用坐标

> ID：10892806
> 
> 赞同：1
> 
> 时间：2012-06-05T06:43:25.760
> 
> 标签：canvas, kineticjs

我想使用 KineticJS 在网格中绘制一组复杂的形状。我的形状是 80 宽和 150 高。当我画它们时，形状之间有一个间隙，即形状的宽度/高度——我希望它们在一个紧密的网格中相互对接，而不是分开。

看起来我以某种方式以应有的 x/y 两倍绘制每个形状。

我已将我的问题简化为附加代码。我的形状很复杂，但为了保持代码简单，我用矩形替换了我的形状（我知道我可以使用 Rect 对象来绘制矩形）。

当你运行这段代码时，你会看到 8 个矩形在水平和垂直方向上相隔很远；需要明确的是，我想要的是每个矩形都紧紧地对接在一起。

我使用常量 width 和 height 来绘制函数 drawFunc 中的矩形，并定位矩形（在代码中，`xPos = ((cols -1) * width)`所以我会认为它们会相互紧贴。

代码非常简单。我遍历行和列，为我的形状创建一个drawFunc，我使用绘图中的宽度/高度，然后我根据它的行/列使用相同的宽度/高度定位形状。所以它们应该彼此紧贴，而不是分开。

使困惑。

```
<!DOCTYPE HTML>
<html>
<head>
<style>

body {
    margin: 0px;
    padding: 0px;
}
</style>
<script src="http://www.kineticjs.com/download/kinetic-v3.9.8.js"></script>

<script>
    window.onload = drawKineticGrid;

    function drawKineticGrid() {

        var width = 80;
        var height = 150;

        var stage = new Kinetic.Stage({
            container : "container",
            width : 800,
            height : 600
        });

        var layer = new Kinetic.Layer();
        var messageLayer = new Kinetic.Layer();

        for (rows = 1; rows <= 2; rows++) {

            for (cols = 1; cols <= 4; cols++) {
                var aRect = new Kinetic.Shape({
                    name : "" + rows + ":" + cols,
                    drawFunc :    function() {

                        var context = this.getContext();
                        context.beginPath();

                        // Make a simple shape - my actual shape is more complex, but I'm
                        // writing a rectangle here to keep the code simple - I know I could use

                        // the KineticJS Rect class here instead.

                        context.moveTo(this.getX(), this.getY());
                        context.lineTo(this.getX() + width, this.getY());

                        context.lineTo(this.getX() + width, this.getY() + height);

                        context.lineTo(this.getX(), this.getY() + height);

                        context.lineTo(this.getX(), this.getY());

                        context.lineWidth = 2;
                        context.stroke();

                        this.fill();
                        this.stroke();

                        // Draw the X and Y, Row and Col values in the rectangle
                        context.fillText("x,y : " + this.getX() + ", " + this.getY(), this.getX() + 5, this.getY() + 15);

                        context.fillText("row, col : " + this.getName(), this.getX() + 5, this.getY() + 30);

                    },
                    fill : "#ffffff",
                    stroke : "green",
                    strokeWidth : 1
                });

                //add the  shape to the layer
                var xPos = ((cols - 1) * width);
                var yPos = ((rows - 1) * height);

                aRect.setX(xPos);
                aRect.setY(yPos);
                layer.add(aRect);
            }
        }

        // Add the layer to the stage
        stage.add(layer);
        stage.add(messageLayer);

    };

</script>
</head>
<body>
    <div id="container"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T05:09:11.193

房祖名

请记住 draw() 方法发生在 setX() 方法之后；

在第一次迭代中，一切正常。

在第二次迭代中，当您执行 setX(80) 时，您的水平参考变为 80 像素，很好。

之后，您调用 moveTo(80, 0)，因此笔划定位在点 (160, 0) ---> / *80 + 80* /

等等。尝试以下操作：

```
<!DOCTYPE HTML>
<html>
<head>
<style>

body {
    margin: 0px;
    padding: 0px;
}
</style>
<script src="http://www.kineticjs.com/download/kinetic-v3.9.8.js"></script>

<script>
    window.onload = drawKineticGrid;

    function drawKineticGrid() {

        var width = 80;
        var height = 150;

        var stage = new Kinetic.Stage({
            container : "container",
            width : 800,
            height : 600
        });

        var layer = new Kinetic.Layer();
        var messageLayer = new Kinetic.Layer();

        for (rows = 1; rows <= 2; rows++) {

            for (cols = 1; cols <= 4; cols++) {
                var aRect = new Kinetic.Shape({
                    name : "" + rows + ":" + cols,
                    drawFunc :    function() {

                        var context = this.getContext();
                        context.beginPath();

                        // Make a simple shape - my actual shape is more complex, but I'm
                        // writing a rectangle here to keep the code simple - I know I could use

                        // the KineticJS Rect class here instead.

                        context.moveTo(0, 0);
                        context.lineTo(width, 0);

                        context.lineTo(width, height);

                        context.lineTo(0, height);

                        context.lineTo(0, 0);

                        context.lineWidth = 2;
                        context.stroke();

                        this.fill();
                        this.stroke();

                        // Draw the X and Y, Row and Col values in the rectangle
                        context.fillText("x,y : " + this.getX() + ", " + this.getY(), 5, 15);

                        context.fillText("row, col : " + this.getName(), 5, 30);

                    },
                    fill : "#ffffff",
                    stroke : "green",
                    strokeWidth : 1
                });

                //add the  shape to the layer
                var xPos = ((cols - 1) * width);
                var yPos = ((rows - 1) * height);

                aRect.setX(xPos);
                aRect.setY(yPos);
                layer.add(aRect);
            }
        }

        // Add the layer to the stage
        stage.add(layer);
        stage.add(messageLayer);

    };

</script>
</head>
<body>
    <div id="container"></div>
</body>
</html> 
```

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T20:18:38.837

drawFunc 中的坐标应该是相对的（相对于点 (getX(), getY())，而不是绝对的。例如，如果要绘制矩形，请使用

```
drawFunc: function(canvas){
    var context = canvas.getContext();
    context.beginPath();
    context.moveTo(0, 0);
    context.lineTo(this.getWidth(), 0);
    context.lineTo(this.getWidth(), this.getHeight());
    context.lineTo(0, this.getHeight());
    context.closePath();
    canvas.fillStroke(this);
} 
```

# ubuntu - 获取 OSError: [Errno 2] No such file or directory while download Android source code

> ID：10892807
> 
> 赞同：0
> 
> 时间：2012-06-05T06:43:36.127
> 
> 标签：ubuntu

我正在尝试下载[http://source.android.com/source/downloading.html](http://source.android.com/source/downloading.html)。根据终端中的指令编写此命令：

```
repo init -u https://android.googlesource.com/platform/manifest 
```

我收到下一个错误：

```
comrade@ubuntu:~/WORKING_DIRECTORY$ repo init -u https://android.googlesource.com/platform/manifest
Traceback (most recent call last):
  File "/home/comrade/bin/repo", line 700, in <module>
    main(sys.argv[1:])
  File "/home/comrade/bin/repo", line 667, in main
    _Init(args)
  File "/home/comrade/bin/repo", line 198, in _Init
    _CheckGitVersion()
  File "/home/comrade/bin/repo", line 223, in _CheckGitVersion
    proc = subprocess.Popen(cmd, stdout=subprocess.PIPE)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

我是 Ubuntu 的新手，所以如果问题很无聊，我很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:06:35.493

**问题解决了。我没有 git 客户端。**

# android - 如何从 sqlite 数据库中检查日期？

> ID：10892809
> 
> 赞同：2
> 
> 时间：2012-06-05T06:43:38.840
> 
> 标签：android, sqlite

我有 sqlite 数据库表，它与朋友及其联系人的出生日期联系。我想在数据库中的任何日期与当前日期匹配时发出警报。请任何人帮助我如何完成这项任务。实际上我想每天匹配日期 2 次，请建议我。

我正在使用此代码

```
private void setAlarm(String name,String date)
{
    String[] arrdob =date.split("/");
    Calendar cal = Calendar.getInstance();       //for using this you need to import java.util.Calendar;

    // add minutes to the calendar object
    cal.set(Calendar.MONTH,Integer.parseInt(arrdob[1]));
    cal.set(Calendar.YEAR, Integer.parseInt(arrdob[2]));                
    cal.set(Calendar.DAY_OF_MONTH,Integer.parseInt(arrdob[0]));
    cal.set(Calendar.HOUR_OF_DAY,14);
    cal.set(Calendar.MINUTE,35);
    System.out.println("1");

    Intent alarmintent = new Intent(getApplicationContext(), AlarmReceiver.class);
    alarmintent.putExtra("title","B'Day Alarm");
    alarmintent.putExtra("subject","Hi!Todays "+name+" B'Day");

    PendingIntent sender = PendingIntent.getBroadcast(getApplicationContext(), HELLO_ID,
    alarmintent,PendingIntent.FLAG_UPDATE_CURRENT |  Intent.FILL_IN_DATA);
    //VERY IMPORTANT TO SET FLAG_UPDATE_CURRENT... this will send correct extra's informations to 
    //AlarmReceiver Class
   // Get the AlarmManager service               
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);
} 
```

在将值插入数据库时​​调用此方法。AlarmReceiver 类如下：

```
private static int NOTIFICATION_ID = 1;

@Override
public void onReceive(Context context, Intent intent) //
{
    // NotificationManager mNotificationManager = 
    System.out.println("2");
   //context.getSystemService(Context.NOTIFICATION_SERVICE);

    NotificationManager manger = (NotificationManager)     
    context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = 
        new Notification(R.drawable.ic_launcher, "Combi Note",System.currentTimeMillis());
    PendingIntent contentIntent = PendingIntent.getActivity(context, 
            NOTIFICATION_ID, 
            new Intent(context, AlarmReceiver.class), 0);

    Bundle extras=intent.getExtras();
    String title=extras.getString("title");
 //here we get the title and description of our Notification
    String note=extras.getString("subject");
    notification.setLatestEventInfo(context, note, title, contentIntent);
    notification.flags = Notification.FLAG_INSISTENT;
    notification.defaults |= Notification.DEFAULT_SOUND; 
```

//这里我们为 //notification 设置默认声音

```
 // The PendingIntent to launch our activity if the user selects this notification
    manger.notify(NOTIFICATION_ID++, notification);
} 
```

# iphone - 我的应用在 Springboard 上的名称可以跨越两行吗？

> ID：10892812
> 
> 赞同：0
> 
> 时间：2012-06-05T06:43:48.153
> 
> 标签：iphone, springboard

如何显示图标文件名，即iphone屏幕图标下方的应用名称不显示全名，它带有点。如何显示全名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:56:50.237

丹尼尔是对的。如果您的应用程序的名称太长而无法完整显示，唯一的解决方案是使其更短。

# automation - 如何在 testng.xml 文件中设置每个测试之间的延迟

> ID：10892814
> 
> 赞同：1
> 
> 时间：2012-06-05T06:44:02.900
> 
> 标签：automation, selenium-webdriver, testng, selenium-grid

我是 testng 的新手。我想在并行执行模式下运行测试。我正在使用 `selenium grid, selenium webdriver, testng`.

我的 testng.xml 文件是：

```
`<?xml version="1.0" encoding="UTF-8"?>
<suite name="WebDriver Suite" verbose="1" parallel="tests" thread-count="5">
<test name="WebDriver Test" >
    <parameter name="browser" value="firefox" />
    <parameter name="port" value="5555" />
<classes>
   <class name="BootUpTest" >
        <methods>
            <include name = "testBootUp"/>
        </methods>
    </class>
</classes>
</test>    
<test name="WebDriver Test for IE" >
    <parameter name="browser" value="chrome" />
    <parameter name="port" value="5556" />
<classes>
   <class name="BootUpTest" >
        <methods>
            <include name = "testBootUp"/>
        </methods>
    </class>
</classes>
</test>  
</suite>` 
```

在上面的 xml 文件中，我应该`testBootUp`在 a 中运行该方法`firefox`以及`chrome`.i 能够运行上述方案。但我的范围是我想首先运行“ **WebDriver Test** 测试，然后我需要一些延迟在那之后我**的 IE 测试的 WebDriver 测试**应该必须运行..

是否可以在 testng.xml 文件中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:51:25.720

您不能这样做，`testng.xml`但为什么不将 a`sleep()`放入之前的方法之一？（可能`@BeforeMethod`）？

# php - 变量不被控制器查看

> ID：10892816
> 
> 赞同：0
> 
> 时间：2012-06-05T06:44:05.020
> 
> 标签：php, yii, variable-assignment

**控制器动作**

```
public function actionCreate()
{
    $model=new News;
    $contentModel = new NewsContent;
    // if I do a `var_dump( $contentModel )` here, I get variable dump correctly

    $this->render('create',array(
        'model'=>$model,
        'contentModel'=>$contentModel,
    ));
} 
```

**看法**

```
<?php var_dump( $model ); // dumps the variable correctly ?> 
<?php var_dump( $contentModel ); // dumps null ?> 
```

* * *

那么为什么`contentModel`不被传递给视图`model`呢？

请注意，我已经验证我引用了正确的视图。我已经通过不传递`model`变量并`null`在视图中看到转储代替原始变量转储来测试了这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:41:23.423

`actionCreate`和分别`actionUpdate`渲染`create`和视图，但两个`update`视图也部分渲染`_form`视图，基本上所有内容都在其中显示。

另外，看看这个，它对我了解 Yii 帮助很大。[了解视图渲染流程](http://www.yiiframework.com/wiki/249/understanding-the-view-rendering-flow/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T06:56:13.350

尝试删除逗号 (",")

```
$this->render('create',array(
    'model'=>$model,
    'contentModel'=>$contentModel
)); 
```

# ios - @"23.0984" 美元到 @"23.09 美元"

> ID：10892829
> 
> 赞同：-1
> 
> 时间：2012-06-05T06:44:52.647
> 
> 标签：ios, objective-c, cocoa-touch

我正在发送如下所述的 URLRequest。

```
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
NSString *balanceString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]; 
```

我在 balanceString 中得到 @"23.0984 USD" 然后我想在 uilabel.tex= 23.09 USD 上显示它请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:53:59.850

可能有更简单的方法..但这应该有效..

```
NSString *originalString = @"23.0984 USD";
NSString *numberString   = [originalString stringByReplacingOccurrencesOfString:@" USD"
                                                         withString:@""];
float  number   = [numberString floatValue];

NSString *changedString = [NSString stringWithFormat:@"%.2f",number];

NSLog(@"ChangedString : %@ USD",changedString); 
```

**编辑：**这个答案已经被接受。但我认为从字符串中获取数字的更好方法是**搜索空格**而不是替换硬编码字符串**@" USD"**。

```
NSString *originalString = @"23.0984 USD";
NSString *numberString = nil;
NSArray *parts  =  [originalString componentsSeparatedByString:@" "]; //space
if(parts && [parts lenght]){
    numberString = [parts objectAtIndex:0];
}
float number   = [numberString floatValue];

NSString *changedString = [NSString stringWithFormat:@"%.2f",number];

NSLog(@"ChangedString : %@ USD",changedString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:54:58.450

```
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
NSString *balanceString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
float amount = [balanceString floatValue]; // This will return 23.0984 as a float
NSString *formattedAmount = [NSString stringWithFormat:@"%01.2f USD", amount]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T06:57:30.263

然后这样的事情应该工作：

```
 NSString * inp = @"29.2994 USD";
    // Initialize a scanner to process the input
    NSScanner * scanner = [NSScanner scannerWithString:inp];

    // Pull out a floating point value
    float v;
    [scanner scanFloat:&v];

    NSCharacterSet * ws = [NSCharacterSet whitespaceAndNewlineCharacterSet];
    // scan through the whitespace after the float
    [scanner scanCharactersFromSet:ws intoString:nil];

    NSString * currency;
    [scanner scanUpToCharactersFromSet:ws intoString:&currency];

    // write out value:
    uilabel.text= [NSString stringWithFormat:@"%.2f %@",v,currency]; 
```

# multithreading - 多线程使用哪种脚本语言和 Web 服务器

> ID：10892830
> 
> 赞同：1
> 
> 时间：2012-06-05T06:44:59.020
> 
> 标签：multithreading, sqlite, server-side, serversocket, scripting-language

我是网络编程新手

我需要开发一个在服务器上运行的网页，需要同时显示 10 个线程的进度状态。我还需要 SQLite 数据库集成。

请告诉我有哪些可供我选择脚本语言和 Web 服务器 [socket] 开发框架的选项。也建议最合适的。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:51:01.327

[Python](http://docs.python.org/index.html)将是一个很好的选择。它集成了 SQLite，如此[处](http://docs.python.org/library/sqlite3.html)所述。

Python 还集成了以下特性（以及许多其他特性）：

*   线程和同步
*   网络（套接字）
*   许多网络服务器（和网页等）处理选项

[这](http://wiki.python.org/moin/WebFrameworks)是一个讨论几种不同 Python Web 服务器框架的页面。我对它不是很熟悉，但我听说过很多关于 Django 的好消息。

另一个很好的选择是[Ruby on Rails](http://rubyonrails.org/)。Ruby 是脚本语言，Rails 是 Web 服务器框架。

# sql-server - Why can't I use procedures inside functions in SQL Server?

> ID：10892835
> 
> 赞同：-1
> 
> 时间：2012-06-05T06:45:50.153
> 
> 标签：sql-server

I know that functions always returns a value and I'll make a sp which return a value as the function returns and want to calling it inside the function. How might I do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:06:03.567

Some thoughts after your comments above

*   *Generally* stored procedures can do almost anything. So it is safer to disallow them

*   The engine can't reliably work out what your stored procedure does
    What about nesting of stored procedures, or recursion, or linked server calls or OPENQUERY calls, and many many other things

*   What if someone change it later to do some writes?
    You can't schema-bind a UDF to a stored procedure

*   [Error throwing/handling is a state change even if the stored procedure is read only](https://stackoverflow.com/q/7789100/27535)

This is how SQL Server behaves for good reasons

# javascript - 带有dojo的单个按钮上的多种功能

> ID：10892836
> 
> 赞同：1
> 
> 时间：2012-06-05T06:46:01.797
> 
> 标签：javascript, dojo

如何在dojo中的单个按钮上提供多种功能，例如在滑块中，擦除和擦除功能必须在单个按钮上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:47:31.340

如果要在同一按钮上实现擦除/擦除，请使用[Dijit.form.ToggleButton](http://dojotoolkit.org/reference-guide/1.7/dijit/form/ToggleButton.html#dijit-form-togglebutton)

其他明智的，如果您想在一个按钮上添加更多功能，请使用[Dijit.form.DropDownButton](http://dojotoolkit.org/reference-guide/1.7/dijit/form/DropDownButton.html#dijit-form-dropdownbutton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:17:37.563

使用[dojo/on](http://dojotoolkit.org/reference-guide/1.7/dojo/on.html)（对于 <1.7 的[dojo.connect](http://dojotoolkit.org/reference-guide/1.7/dojo/connect.html)），您可以通过 domNodes（或按钮等小部件）上的事件连接（和断开连接）任意数量的功能。请参阅这些文档中的示例。

有了这些，您可以将变量定义为`this._isVisible`并在按钮上的单击事件上切换它。根据这个 var 的值，你可以决定采取什么行动。

# .net - 如何找出后台工作人员完成了在 for 循环 C# 内部开始的工作

> ID：10892842
> 
> 赞同：0
> 
> 时间：2012-06-05T06:47:16.893
> 
> 标签：.net, windows, c#-4.0, service

我启动了一个线程，它每 5 分钟收集大约 500 条记录。然后通过 foreach 语句，我为获得的每个详细信息创建了单独的后台工作程序。我通过检查队列中的条件（数据库中的“QU”）来收集数据。而后台工作人员Do_Work 事件我将“QU”状态更新为“PR”。

```
BackgroundWorker bw1;
Collection collect = new Collection()
foreach (Transaction trans in transactionList)
                {
                    try
                    {
                        collect.TransactionDetails = trans;
                        bw1 = new BackgroundWorker();
                        bw1.DoWork += new DoWorkEventHandler(bw1_DoWork);
                        bw1.RunWorkerCompleted += new  RunWorkerCompletedEventHandler(bw1_RunWorkerCompleted);
                        bw1.RunWorkerAsync(collect);
                    }
                    catch
                    { }
                } 
```

这是一个漫长的过程，因此必须使用后台工作程序运行。我的问题是，如果这个过程需要超过线程睡眠时间才能完成，那么将再次收集具有“QU”状态的相同记录。我如何理解该过程仍在运行并使线程等待更多时间直到完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:59:39.297

您需要以某种方式跟踪正在运行的进程。最基本的方法是使用一个计数器变量，在创建 a`BackgroundWorker`时递增并在完成时递减。`BackgroundWorker`然后，您只需查看变量的值即可找出 仍在运行的 s 的数量。

如果您使用的是 .NET 4，您可能还想查看[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)。

另一件事：据我了解，您为 500 多个项目创建了一个工作线程？这对我来说似乎很多。考虑将工作负载划分为更少的大块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:02:42.937

使用异步回调

[http://msdn.microsoft.com/en-us/library/system.asynccallback.aspx](http://msdn.microsoft.com/en-us/library/system.asynccallback.aspx)

[http://support.microsoft.com/kb/315582](http://support.microsoft.com/kb/315582)

# iphone - 无法在我的设备上安装应用程序 - iOS

> ID：10892844
> 
> 赞同：0
> 
> 时间：2012-06-05T06:47:36.750
> 
> 标签：iphone, ios, extjs, adhoc, sencha-2

我创建了一个 sencha 示例应用程序，在终端中使用以下命令

```
Mac-mini-2:sencha-touch-2.0.0-commercial eit$ sencha app create mySenchaApp /path/to/www/mySenchaApp 
```

然后我在模拟器上将该应用程序构建为本机，它在模拟器上运行良好。使用以下命令

```
Mac-mini-2:mySenchaApp eit$ sencha app build native 
```

现在我正在尝试进行临时分发 - 我想在我的设备上安装这个应用程序。如以下[链接](http://rwbaker.com/blog/2012/03/22/ad-hoc-provisioning-with-sencha-touch/)中所述，我已经完成了这些步骤。

这是 packager.jason 文件

```
{
    /**
     * @cfg {String} applicationName
     * @required
     * This is the name of your application, which is displayed on the device when the app is installed. On IOS, this should match
     * the name of your application in the Apple Provisioning Portal.
     */
    "applicationName":"MySenchaApp",

    /**
     * @cfg {String} applicationId
     * This is the name namespace for your application. On IOS, this should match the name of your application in the Apple Provisioning Portal.
     */
    "applicationId":"com.mydomain.keyboard",

    /**
     * @cfg {String} versionString
     * @required
     * This is the version of your application.
     */
    "versionString":"1.0",

    /**
     * @cfg {String} iconName
     * This is file name of your icon. This should be in the same directory of this configuration file.
     *
     * For iOS, please refer to their documentation about icon sizes:
     * https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html
     *
     * For Android, please refer to the Google Launcher icons guide:
     * http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html
     */
    "iconName":"resources/icons/Icon~ipad.png",

    /**
     * @cfg {String} inputPath
     * @required
     * This is location of your Sencha Touch 2 application, relative to this configuration file.
     */
    "inputPath":"build/native",

    /**
     * @cfg {String} outputPath
     * @required
     * This is where the built application file with be saved.
     */
    "outputPath":"build/",

    /**
     * @cfg {String} configuration
     * @required
     * This is configuration for your application. `Debug` should always be used unless you are submitting your app to an online
     * store - in which case `Release` should be specified.
     */
    "configuration":"Debug",

    /**
     * @cfg {String} platform
     * @required
     * This is the platform where you will be running your application. Available options are:
     *  - iOSSimulator
     *  - iOS
     *  - Android
     *  - AndroidEmulator
     */
    "platform":"iOS",

    /**
     * @cfg {String} deviceType
     * @required
     * This is device type that your application will be running on.
     *
     * If you are developing for Android, this is not necessary.
     *
     * Available options are:
     *  - iPhone
     *  - iPad
     *  - Universal
     */
    "deviceType":"iPhone",

    "provisionProfile":"build/package/cc2gokeyboard(3).mobileprovision",

    /**
     * @cfg {String} certificatePath
     * This is the location of your certificate.
     * This is required when you are developing for Android or you are developing on Windows.
     */
     "certificatePath":"build/package/ios_distribution.cer",

    /**
     * @cfg {String} certificateAlias
     * This is the name of your certificate.
     *
     * IF you do not specify this on OSX, we will try and automatically find the certificate for you using the applicationId.
     *
     * This can be just a simple matcher. For example, if your certificate name is "iPhone Developer: Robert Dougan (ABCDEFGHIJ)", you
     * can just put "iPhone Developer".
     *
     * When using a certificatePath on Windows, you do not need to specify this.
     */
    "certificateAlias":"",

    /**
     * @cfg {String} sdkPath
     * This is the path to the Android SDK, if you are developing an Android application.
     */
    "sdkPath":"/path/to/android-sdk",

    /**
     * @cfg  androidAPILevel
     * This is android API level, the version of Android SDK to use, you can read more about it here: http://developer.android.com/guide/appendix/api-levels.html.
     * Be sure to install corresponding platform API in android SDK manager (android_sdk/tools/android)
     */
    "androidAPILevel":"15",

    /**
     * @cfg  orientations
     * @required
     * This is orientations that this application can run.
     */
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

我已经修改了上面的 packager.json 文件。和`run the this command Mac-mini-2:mySenchaApp eit$ sencha app build native`

现在这已经产生`MySenchaApp.app in the Build /native folder.`

> 当我尝试使用 iTunes 同步在我的设备上安装此应用程序时，它已安装但它显示无法安装应用程序“MySenchaApp”。

我不确定这里有什么问题，我的 packager.json 文件是否正确？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:55:59.420

检查您的配置文件。是否在此条款中注册了您的捆绑包？

通常在提供错误或日期过期时会发生此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:51:15.580

您缺少一个重要的配置。尝试将其添加到您的 packager.json 文件中

在您的设备上进行测试“certificateAlias”：“iPhone Developer”

对于苹果商店“certificateAlias”：“iPhone Distribution”

# php - 在 PHP 上调用 MySQL 存储过程

> ID：10892845
> 
> 赞同：0
> 
> 时间：2012-06-05T06:47:37.160
> 
> 标签：php, mysql, stored-procedures

谁能帮助我如何在 php 中调用存储过程？我有一个调用 mysql 存储过程的下面的函数，但它提交了一个错误。

```
public function getProductionItems($selectedProjectID,$selectedTaskID,$processingType,$isFirstTask)
    {
        $prodItemList = array();

        $strQry = "CALL getProductionItem(".$selectedProjectID.",".$selectedTaskID.",".$processingType.",".$isFirstTask.")";
        $mysqli = new mysqli();
        $mysqli = $this->getPvtConnection();
        $stmt = $mysqli->query($strQry);

        while($data = $stmt->fetch_assoc())
        {
            $prodItem = new productionItemModel();
            $prodItem->setTaskQueueID($data['taskQueueID']);
            $prodItem->setProdItemName($data['prodItemName']);
            array_push($prodItemList,$prodItem);
        }
        mysqli_free_result($stmt);
        $mysqli->close();

        return $prodItemList;
    } 
```

遇到的错误是：致命错误：在第 1298 行的 C:\AppServ\www\ptsproject\dao\projecttask\projtaskdao.php 中的非对象上调用成员函数 fetch_assoc()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:55:03.860

我认为你失踪了`'`：

```
 $strQry = "CALL getProductionItem('$selectedProjectID','$selectedTaskID','$processingType','$isFirstTask')"; 
```

# oracle - 将转储文件导入 oracle 11gr2 得到错误

> ID：10892847
> 
> 赞同：3
> 
> 时间：2012-06-05T06:47:44.010
> 
> 标签：oracle, import, oracle-dump

将转储文件导入 oracle 11gr2 时出现此错误，请提出解决此问题的方法

```
*Warning: the objects were exported by D7IDMP, not by you
import done in WE8MSWIN1252 character set and AL16UTF16 NCHAR character set
export client uses WE8ISO8859P1 character set (possible charset conversion)
. importing D7IDMP's objects into MIGRATE
. . importing table                    "TXALLTXTS"     245628 rows imported
. . importing table                       "TXAUTH"        377 rows imported
. . importing table                    "TXBAIMERT"        244 rows imported
. . importing table                     "TXBARESC"        178 rows imported
. . importing table                     "TXBOILER"     458940 rows imported
. . importing table                    "TXCLASSES"        980 rows imported
. . importing table              "TXCLOSEDPERIODS"          1 rows imported
. . importing table                  "TXCOMPANIES"          1 rows imported
. . importing table                 "TXCONCLAUSES"        187 rows imported
IMP-00017: following statement failed with ORACLE error 959:
 "CREATE TABLE "TXCONFIGSETTINGS" ("CFS_CODE" VARCHAR2(20), "CFS_RCODE" VARCHAR2(2"
 "0))  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 STORAGE(INITIAL 16384 FR"
 "EELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT) TABLESPACE "MP5TEXT" LOGGI"
 "NG NOCOMPRESS LOB ("CFS_XMLCONFIG") STORE AS  (TABLESPACE "MP5TEXT" ENABLE "
 "STORAGE IN ROW CHUNK 8192 PCTVERSION 10 NOCACHE  STORAGE(INITIAL 65536 FREE"
 "LISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT))"
IMP-00003: ORACLE error 959 encountered
ORA-00959: tablespace 'MP5TEXT' does not exist* 
```

根据 Alex 的评论，我尝试使用 imp 的其他属性，但它导致了其他错误

我运行的命令是

```
imp fromuser=d7idmp touser=&&from_user file=test.dmp log= test.log ignore=y transport_tablespace = y tablespaces = MP5TEXT 
```

错误是

以 WE8MSWIN1252 字符集和 AL16UTF16 NCHAR 字符集完成导入 导出客户端使用 WE8ISO8859P1 字符集（可能的字符集转换） IMP-00053：导入模式与导出转储文件不兼容 IMP-00000：导入未成功终止

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T10:03:20.777

如果您能够使用 datapump 而不是旧的`imp`/`exp`工具，则可以即时重新映射表空间（和其他东西）。

如果没有，通常的处理方法是在新表空间中手动创建表，然后运行`imp`​​with`ignore=y`这样它就不会抱怨对象存在。

`imp`您可以通过运行`indexfile=<file>`. 这将为您提供一个带有表和索引的 DDL 的文本文件，但表命令用`rem`. 您可以提取所需的位并根据新数据库的需要对其进行编辑。

如果您还没有，请查看文档中的[导入参数](http://docs.oracle.com/cd/E11882_01/server.112/e22490/original_import.htm#i1021478)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T06:51:33.173

您需要创建表空间 MP5TEXT。导入实用程序需要源数据库中存在的相同表空间来导入表。

# c# - 数据传输对象和报告

> ID：10892854
> 
> 赞同：1
> 
> 时间：2012-06-05T06:48:10.563
> 
> 标签：c#, .net, oop, design-patterns, data-transfer-objects

我有这些情况：

```
//This class maps to the "Item" table in the database
public class Item
{
   public int itemID { get; set;}
   public string itemName { get; set; }
   public int quantity { get; set; }
}

//Items record are returned from the database as list    
List<Item> items = ItemDAO.GetItems(); 
```

我想生成一个包含聚合值的报告（来自查询/存储过程）

```
ItemID| ItemName | Qty | QtySoldThisMonth | QtySoldThisYr
-----------------------------------------------------------
123   | Vit. C   |  20 |   55             |    400
239   | Maloxin  |  25 |   12             |    210 
```

Item 类没有这些额外的字段 这对于可能具有不同列数的数据表会更容易，但我使用的是列表

请问，我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:56:49.950

您始终可以专门为该聚合视图创建另一个 DTO，并在您的报告中使用它。

比每个视图的特定 DTO 更通用的解决方案是为 Item 的报告创建 DTO，并使用字段集合而不是类属性在 DTO 中存储聚合值。

例如：

```
 class AggregatedReportField {
     public string FieldName { get; set; }
     public decimal FieldValue { get; set; }
 }

 class ItemReportDTO {

     public Dictionary<string, AggregatedReportField> ReportFields { get; private set; }

     public ItemReportDTO()
     {
         ReportFields = new Dictionary<string, AggregatedReportField>();
     }

     public void Add(AggregatedReportField field)
     {
         if (!ReportFields.ContainsKey(fieldl.FieldName))
              ReportFields.Add(field.FieldName, field);
     }
 } 
```

在您的 DAO 中，您将首先从数据库中获取值，为每个值创建 AggregatedReportField 实例并将它们与名称一起添加到您的 DTO。在您的报告中，您必须使用 DTO.ReportFields["SomeValue"].FieldValue 引用您的聚合值。

上面的代码只是一个示例，其中包含一些不好的做法（暴露的 Dictionary<>）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T08:44:18.753

我建议您将实体（如项目）和报告行（包含附加字段）分开。

我认为，您必须选择：

1.  创建单独的类来表示每个报告（或报告的行）
2.  创建类来表示所有报告（它将包含有关列和所有数据的元数据）

你应该选择什么取决于你的要求。这些报告可以在 java 代码中使用 DAO 和聚合值，或者直接调用存储的函数而不使用 DAO。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T08:44:27.580

我认为在你的情况下，如果你想要一些 BLL 类库在 DTO 列表中为你提供编译的报告，你应该为报告创建专门的 DTO。您所能做的就是使用类继承来避免冗余代码。这就是你最好的。

```
public class AggregatedItem:Item
{
public int QtyMonth {get;set;}
public int QtyYear {get;set;}
} 
```

问候。

# android - 尝试上传到 Dropbox：NetworkOnMainThreadException？

> ID：10892858
> 
> 赞同：3
> 
> 时间：2012-06-05T06:48:20.860
> 
> 标签：android, dropbox, dropbox-api

我现在已经为此奋斗了 6 个小时。我遵循了 Dropbox 的“教程”（如果可以这样称呼它们，因为它们非常糟糕），使用了 DBRoulette 示例，并做了很多事情来让我的应用程序正常工作。

我的应用程序可以毫无问题地进行身份验证。但是，尽管完全按照教程正在做的事情，我还是无法上传任何东西：

这是我的一小段代码（这是为了将创建的笔记保存在手机本身上，然后上传到 Dropbox）：

```
 saveBtn.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View view)
        {
            try
            {
                //Create the directory if it doesn't exist. If it does exist the next two line won't do anything.
                File dropNotesDir = new File(Environment.getExternalStorageDirectory() + "/documents/AppData/Dropnotes/");
                dropNotesDir.mkdirs();
                //-----------------------------------------------------------------------------------------------
                String wholeNoteString = noteBody.getText().toString();
                //Now we create the title of the txt file. It will be the first line of the whole note. The name will get truncated to 32 characters
                //if it's too long.
                String noteTitle;
                if(wholeNoteString.indexOf("\n") >= 0) //New line character found.
                {
                    noteTitle = wholeNoteString.substring(0, wholeNoteString.indexOf("\n"));
                    if(noteTitle.length() >= 32)
                    {
                        noteTitle = wholeNoteString.substring(0, 32);
                    }
                }
                else
                {
                    if(wholeNoteString.length() >= 32)
                    {
                        noteTitle = wholeNoteString.substring(0, 32);
                    }else
                    {
                        noteTitle = wholeNoteString;
                    }
                }
                if(extras.getString("file-mode").equals("modify"))
                {
                    //We will need to delete the existing file if it does exist to save the new one.
                    File existing = new File(Environment.getExternalStorageDirectory() + "/documents/AppData/Dropnotes/" + extras.getString("noteTitle"));
                    existing.delete();
                }
                File newNote = new File(Environment.getExternalStorageDirectory() + "/documents/AppData/Dropnotes/" + noteTitle + ".txt");
                PrintWriter newNoteWriter = new PrintWriter(new FileOutputStream(newNote));
                newNoteWriter.print(noteBody.getText().toString());
                newNoteWriter.close();

                //TRYING TO UPLOAD TO DROPBOX HERE
                File fileToUpload = new File(Environment.getExternalStorageDirectory() + "/documents/AppData/Dropnotes/" + noteTitle + ".txt");
                FileInputStream file2Uis = new FileInputStream(fileToUpload);
                Entry newEntry = mDBApi.putFile("/" + noteTitle + ".txt", file2Uis, fileToUpload.length(), null, null);
                //END OF TRYING TO UPLOAD TO DROPBOX HERE

                Toast.makeText(view.getContext(), "Saved successfully", Toast.LENGTH_SHORT).show();
                finish();
            } catch (FileNotFoundException e)
            {
                Toast.makeText(view.getContext(), "File not found: " + e.getMessage(), Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            } catch(Exception e)
            {
                Toast.makeText(view.getContext(), "Some bizarre exception occured: " + e.getClass().toString(), Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            }
        }

    }); 
```

它给了我一个 NetworkOnMainThreadException ，我不知道为什么。我正在尝试按照[此处](https://www.dropbox.com/developers/start/files#android "这里")标题为“上传文件”的部分进行操作。他们的片段让我感到困惑的是，他们甚至没有试图捕捉我被抛出的异常......

有什么帮助吗？我真的需要在下周五完成这项工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T06:55:30.160

在 Honeycomb SDK 之前，允许在主线程上执行网络操作。[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)但是，对于 Honeycomb，如果在主/UI 线程中尝试网络操作，则不再允许并抛出 a。

您需要在不同的线程中执行网络操作。你可以看看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)实现相同的。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-05T06:54:34.327

我的猜测是，由 StrictMode.ThreadPolicy 引起的错误。您无法在同一个 UI 线程中访问网络。

尝试在 oncreate 中将这些行添加到您的代码中

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
StrictMode.setThreadPolicy(policy); 
```

# php - jQuery输入表单验证

> ID：10892859
> 
> 赞同：1
> 
> 时间：2012-06-05T06:48:28.220
> 
> 标签：php, jquery, html, validation

如果我有一个 html 表单验证工作

```
<form method="POST" action="" name="loginForm" id="loginForm">
    <p><input type="text" name="user" id="user" "/></p>
    <div class="formInputMistake"  id="errorEmail"></div>   
    <p><input type="password" name="passwd" id="passwd" /></p>
    <div class="formInputMistake"></div>
    <input type="submit" name="login" id="login" value="Login" />
    <div class="formInputMistake"></div><!--here i want to show error "wrong password or user"-->
</form> 
```

php 文件 usr.php

```
if(isset($_GET['login']) && isset($_POST['user']) && 
        isset($_POST['passwd']) && isset($_POST['login'])) {
    if($_POST['user'] = "admin" && $_POST['passwd'] == "admin") {
        //successful log in
        $_SESSION['user'] = $_POST['user'];
        $_SESSION['passwd'] = $_POST['passwd'];
        echo 'true';
    } else {
        echo 'false';
    }
} 
```

还有一个 jQuery 代码，使用`validate-plugin`Jörn Zaefferer 制作的

```
$(document).ready(function(){
    $("#loginForm").validate({
        ignore: ".ignore",
        rules: { email: {...}, loginPasswd: {...} },
        messages: { email: {...}, loginPasswd: {...} },
        submitHandler: function(form) {
            $.post('usr.php?login', $(form).serialize(), function (data, textStatus) {
                if(data == 'true') {
                    $('#loginForm').hide();
                } else if(data == 'false') {
                    //Last formInputMistake - showing the  "wrong password or user"??
                }
            });
        }
    });
}); 
```

如何验证来自服务器的错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:52:16.190

你为什么写这个

```
$_GET['login'] 
```

我认为你应该写：

```
$_POST['login'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:31:50.730

我认为我们应该使用`$_REQUEST['login']`，它更好。

# tomcat - 通过 mod_proxy 时会话属性不再起作用

> ID：10892860
> 
> 赞同：1
> 
> 时间：2012-06-05T06:48:29.430
> 
> 标签：tomcat, apache2, tomcat6, mod-proxy, apache2-module

我有一个在“http://localhost:8080/appexploded/login.jsp”（Tomcat）上运行的 tomcat 应用程序。现在我已经安装了 Apache 并且正在运行 mod_proxy，以便端口 80 上的所有请求都可以代理到 8080。在我的 httpd.conf 文件中，这是我所拥有的：

```
LoadModule proxy_module  /usr/lib/apache2/modules/mod_proxy.so

ProxyPass         /ordergeek  http://localhost:8080/appexploded
ProxyPassReverse  /ordergeek  http://localhost:8080/appexploded 
```

因此，当我直接向 :8080 发出请求时，我的 request.getSession().getAttribute("BLAH") 从一页到另一页工作。但是，当我转到“http://localhost/ordergeek/login.jsp”时，该页面设置了一个会话属性，然后重定向到另一个页面。但是，下一页尝试读取 request.getSession().getAttribute("BLAH")，但没有找到。

当我不通过代理时……会话属性起作用。当我通过代理时，他们没有。我错过了什么？

我在 server.xml 中添加了以下内容：

```
<Connector port="8080" 
          proxyName="www.myappurl.com"
          proxyPort="80"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:41:28.700

这是一个旧的，但由于这个线程出现在第一个谷歌搜索结果中，而且我在其他地方几乎找不到答案，它可能会有所帮助：

您只需添加一个 ProxyPassReverseCookiePath 指令即可在 cookie 中更正路径：

```
ProxyPassReverseCookiePath /appexploded /ordergeek 
```

设置完成后，您应该像往常一样获取会话属性。

请注意，您必须使用 Apache 2.2 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T22:23:18.857

当 Apache HTTPD 在路径中时，很难更改 Web 应用程序名称。您不仅要使用 ProxyPassReverse，还要翻译所有传出的 HTML 以重写应用程序放置在那里的任何链接。有一个 3rd 方 mod_proxy_html 模块可以做到这一点，但你真的应该重新考虑整个策略。恕我直言，重写 HTML 是问题的一部分，而不是解决方案的一部分。只需在 Tomcat 内部重命名您的 Web 应用程序。

# amazon-web-services - 我的 Ec2 实例显示无法连接？

> ID：10892881
> 
> 赞同：1
> 
> 时间：2012-06-05T06:51:08.313
> 
> 标签：amazon-web-services

我在 AWS 中有一个微型 ec2 实例，其中我有一个我的 sqlite 数据库。直到昨天，一切对我来说都很好，我已经配置了安全组以允许所有传入的流量到端口 80 和 ssh。但是从昨天开始我是无法通过浏览器连接到我的实例。它显示无法连接。但我已经能够 scp 进入它并 ssh 进入它。显示服务器实例的控制台运行良好。任何人都可以帮我排序出这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:19:59.757

这将解决您与 ec2 实例相关的任何问题我更改了实例类型并重新启动它，然后重新关联公共 IP。我的问题已解决 [http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/TroubleshootingInstances.html](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/TroubleshootingInstances.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:03:58.963

可以提供更多细节：

1.  您是否从浏览器访问任何应用程序以及如何访问 ec-ip/appname ？
2.  在你 ssh 到服务器后，你可以使用命令行浏览器访问相同的内容..如果机器是 linux 试试`elinks "http:// localhost/appname.."`

# c# - 在文本中格式化 C# 代码，如 Visual Studio

> ID：10892884
> 
> 赞同：3
> 
> 时间：2012-06-05T06:51:18.550
> 
> 标签：c#, winforms

如果您在我正在编写的这个编辑器中注意到，当您按`Ctrl`+`K`然后粘贴您的代码并保存它时，它将像在 Visual Studio 中一样格式化。

现在我想使用 Windows 窗体编写自己的程序，我想查看我保存的代码片段并相应地对其进行格式化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:05:28.490

对于我的博客，我使用[Manoli 的 C# formatter](http://www.manoli.net/csharpformat/)。

格式化程序的源代码[是可用](http://www.manoli.net/csharpformat/CSharpFormat.zip)的。

基本上你收集所有的关键字，编译器指令......等。并使用正则表达式来查找它们。然后作者将 HTML 标签包裹在它们周围以格式化文本。

您可以采用相同的方法并包含您自己的格式，该格式与您要使用的任何 Windows 窗体控件兼容。

# c++ - C++ 正则表达式不理解

> ID：10892890
> 
> 赞同：8
> 
> 时间：2012-06-05T06:51:57.207
> 
> 标签：c++, regex

以下输出“> Hut”，我希望它输出“Hut”。我知道 .* 是贪婪的，但 > 必须匹配并且它在捕获组之外，那么为什么它在我的子匹配中？

```
#include <string>
#include <regex>
#include <iostream>

using namespace std;

int main() {
        regex my_r(".*>(.*)");
        string temp(R"~(cols="64">Hut)~");
        smatch m;
        if (regex_match(temp, m, my_r)) {
                cout << m[1] << endl;
        }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T08:07:20.243

这是 libstdc++ 实现中的一个错误。观看这些：

```
#include <string>
#include <regex>
#include <boost/regex.hpp>
#include <iostream>

int main() {
    {
        using namespace std;
        regex my_r("(.*)(6)(.*)");
        smatch m;
        if (regex_match(std::string{"123456789"}, m, my_r)) {
            std::cout << m.length(1) << ", "
                      << m.length(2) << ", "
                      << m.length(3) << std::endl;
        }
    }

    {
        using namespace boost;
        regex my_r("(.*)(6)(.*)");
        smatch m;
        if (regex_match(std::string{"123456789"}, m, my_r)) {
            std::cout << m.length(1) << ", "
                      << m.length(2) << ", "
                      << m.length(3) << std::endl;

        }
    }

    return 0;
} 
```

如果使用 gcc 编译，第一个（libstdc++）返回完全错误的结果**9、-2、4，**第二个（boost 的实现）按预期返回**5、1、3 。**

如果您使用 clang + libc++ 编译，您的代码可以正常工作。

（请注意，libstdc++ 的正则表达式实现仅“部分支持”，如[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52719](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52719)中所述。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T08:16:58.583

您可以修改正则表达式，以便将匹配的部分分成组：

```
std::regex my_r("(.*)>(.*)\\).*"); // group1>group2).*
std::string temp("~(cols=\"64\">Hut)~");
std::sregex_iterator reg_it(temp.begin(), temp.end(), my_r);

if (reg_it->size() > 1) {
    std::cout
        << "1: " << reg_it->str(1) << std::endl  // group1 match
        << "2: " << reg_it->str(2) << std::endl; // group2 match
} 
```

输出：

```
1: ~(cols="64"
2: Hut 
```

请注意，组是由大括号指定的`( /* your regex here */ )`，如果您想将大括号作为表达式的一部分，那么您需要使用代码中的 来对其进行`\`转义`\\`。有关详细信息，请参阅**[分组构造](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx)**。

这个问题也可以帮助你：[我如何遍历来自 std::regex_search 的结果？](https://stackoverflow.com/q/7301649/1168156)

也不要`using namespace std;`在文件的开头使用，这是一种不好的做法。

# linq - 我应该如何使以下 linq 泛型方法返回不同的记录？

> ID：10892892
> 
> 赞同：0
> 
> 时间：2012-06-05T06:52:11.527
> 
> 标签：linq, generics, distinct

当使用下面的方法进行 OR 操作时，我得到了重复的记录。我必须指定一个自定义的 IEqualityComparer 吗？一个简单的 distinct() 不起作用

```
internal static IQueryable<T> FilterEntity<T>(filters filters, IQueryable<T> entities)
    {
        if (filters.groupOp == "AND")
            foreach (var rule in filters.rules)
                entities = entities.Where<T>(
                    rule.field, rule.data,
                    (WhereOperation)StringEnum.Parse(typeof(WhereOperation), rule.op)
                    );
        else
        {
            //Or
            IQueryable<T> temp = (new List<T>()).AsQueryable();
            foreach (var rule in filters.rules)
            {
                var t = entities.Where<T>(
                    rule.field, rule.data,
                    (WhereOperation)StringEnum.Parse(typeof(WhereOperation), rule.op)
                    );

                    temp = temp.Concat<T>(t).AsQueryable();
            }
            entities = temp;
        }
        return entities;
    } 
```

在下面@usr 的建议后编辑-这给了我在sql profiler 中的正确查询（有一个不同的），但这开始看起来太复杂了-我想要一个更干净的解决方案

```
 internal static IQueryable<T> FilterEntity<T>(filters filters, IQueryable<T> entities)
    {
        if (filters.groupOp == "AND")
            foreach (var rule in filters.rules)
                entities = entities.Where<T>(
                    rule.field, rule.data,
                    (WhereOperation)StringEnum.Parse(typeof(WhereOperation), rule.op)
                    );
        else
        {
            //Or
            var t1 = entities.Where<T>(filters.rules[0].field,filters.rules[0].data,
                (WhereOperation)StringEnum.Parse(typeof(WhereOperation),filters.rules[0].op)
                );
            for (int i = 1; i<filters.rules.Count(); i++)
            {

                var t = t1.Where<T>(filters.rules[i].field, filters.rules[i].data,
                (WhereOperation)StringEnum.Parse(typeof(WhereOperation), filters.rules[i].op)
                );
              t1.Concat<T>(t).AsQueryable();
            }
           entities  = t1;
        }
        return entities.Distinct<T>();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:53:10.967

这与`Distinct()`or无关`IEqualityComparer`。就是[修改后的闭包gotcha](https://stackoverflow.com/questions/235455/access-to-modified-closure)，即：循环变量`rule`必须复制到循环体中：

```
foreach (var rule in filters.rules)
{
    var rule1 = rule;
    // work with rule1 only. 
```

您可以按照 Usr 的建议执行以下操作：

```
IQueryable<T> temp = null;
    ....
    foreach (var rule in filters.rules)
    {
        var rule1 = rule;
        var t = entities.Where<T>(rule1.field, rule1.data,
            (WhereOperation)StringEnum.Parse(typeof(WhereOperation), rule1.op));

            if (temp == null)
                temp = t;
            else
                temp = temp.Union(t); // Union!!
    }
}
return temp; 
```

我想知道它是否解决了你的问题。注意`Union`( 这是一个隐含的`Distinct`) 的使用。如果它不能解决您的问题，我认为有一些我们看不到的代码（例如在您的 中`WhereOperation`）会干扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:52:29.550

不要以 a`List<T>`开始查询。从第一个“ `t`”开始。这样，您将只获得一个在服务器上执行的查询。使用 Union 而不是 Concat 以获得不同的结果。

# protocols - nutch 使用的协议

> ID：10892893
> 
> 赞同：0
> 
> 时间：2012-06-05T06:52:12.247
> 
> 标签：protocols, nutch, charles-proxy

有人可以告诉我 nutch 使用哪种协议来获取页面。我想看看 nutch 提出了什么样的要求？

我使用 charles 代理来查看请求信息，但遗憾的是那里没有获得任何信息。我是否错过了有关查尔斯代理或 nutch 的信息？

我也尝试过wireshark，但是有太多的数据包，我无法确定哪一个是nutch的？

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:28:17.480

Nutch 是一个网络爬虫，所以我猜它使用的是 HTTP 协议。很可能是**HTTP GET**来获取页面。

如果您需要更多信息（例如 nutch 的用户代理），请考虑在您的机器上设置一个 apache 网络服务器并抓取一些测试页面。然后看看apache访问日志。

# iphone - 故事板和 pageControl 有什么区别？

> ID：10892898
> 
> 赞同：1
> 
> 时间：2012-06-05T06:52:19.837
> 
> 标签：iphone, objective-c, ios

故事板和 pageControl 作为页面控制器也呈现视图控制器的序列有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T06:59:13.943

页面控件在滚动视图中添加多个视图，启用分页后，用户可以从一个页面滚动到另一个页面，您可以在页面控件中添加任意数量的页面，真正发生的是您将创建一个非常宽的滚动将包含所有视图的视图。

“故事板让您可以直观地绘制出应用程序中的所有视图以及它们之间的相互关系。如果您刚开始使用故事板，可以在 WWDC 2011 视频[https://developer.apple.com中介绍故事板/视频/wwdc/2011/](https://developer.apple.com/videos/wwdc/2011/) “

引用自[.xib 文件和 .storyboard 有什么区别？](https://stackoverflow.com/questions/8436324/what-is-the-difference-between-a-xib-file-and-a-storyboard)

所以故事板和 UIPageControl 一点都不相似。

# jquery - jquery 1.7.2 使用模板动态更新列表视图

> ID：10892899
> 
> 赞同：0
> 
> 时间：2012-06-05T06:52:54.993
> 
> 标签：jquery, jquery-plugins, jquery-mobile

首先，我对 jquery 和 jquerymobile 真的很陌生，如果这个问题很愚蠢，我很抱歉。我正在尝试将一个旧项目（用 JQ 1.6.4 JQM 1.0b1 编写）移植到 JQ 1.7.2 + JQM 1.1.0。有一部分使用模板插件通过解析 JSON 来动态更新列表视图。

html代码：

```
...
<ul data-role="listview" id="MyItems" data-inset="true"></ul> 
... 
```

模板：

```
<script id="MyListItem" type="text/x-jquery-tmpl">
<li>
    <div class="ui-li-almost-right"><button id="editButton">Edit</button></div>
    <a href="javascript:true" id="connectLink">${symname}&nbsp;</a>
</li>
</script> 
```

更新列表：

```
$(items).each(function (i, item) {
    var myTemplate=$("#MyListItem").tmpl(item);
    myTemplate.appendTo($("#MyItems"));
});
$("#MyItems").listview("refresh"); 
```

使用 JQ 和 JQM 的新版本，列表项是使用类“ui-page”生成的，因此它们被垂直拉伸。有人可以告诉我为什么会发生这种情况以及如何避免它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:32:42.603

您可以使用下一代 jQuery 模板：JSRender，其中：

模板：

```
<script id="MyListItem" type="text/x-jquery-tmpl">
<li>
    <div class="ui-li-almost-right"><button id="editButton">Edit</button></div>
    <a href="javascript:true" id="connectLink">{{:symname}}&nbsp;</a>
</li>
</script> 
```

要使用 data.items 更新列表：

```
var dataList = $( "#MyList" );
// Create items using template & add to list
dataList.append( $("#MyListItem").render( data.items ) );
// Call listview jQuery UI Widget for correct rendering
dataList.listview( "refresh" ); 
```

希望这可以帮助。

# android - Android 矩形区域检测

> ID：10892901
> 
> 赞同：0
> 
> 时间：2012-06-05T06:53:28.773
> 
> 标签：android

我想知道是否可以在 Android 框架中检测图像中的矩形区域？

![在此处输入图像描述](../Images/2824c99b6f3e90fa2ec848ff0c59f768.png)

整个单个图像中矩形区域的尺寸不固定。我想要检测所有这些区域并裁剪它们并分别显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:01:24.167

您可以像这样获得 View 的绘图矩形：

```
Rect rect = new Rect();
mView.getDrawingRect(rect); 
```

这将为您提供一个矩形，其中包含在屏幕上绘制视图的位置的坐标。

获取屏幕上视图的左侧和顶部坐标：

```
float viewLeftXCoord = rect.left; 
float viewTopXCoord = rect.top; 
```

# wpf - WPF：大于网格的拉伸图像未完全渲染

> ID：10892906
> 
> 赞同：0
> 
> 时间：2012-06-05T06:54:05.863
> 
> 标签：wpf, image, render

嗨，我在 xaml 中的图像就是这样

```
<Image Name="bgImg" Width="2000" Stretch="UniformToFill" Height="auto"     VerticalAlignment="Stretch" HorizontalAlignment="Stretch"     Source="./Images/TemasekGrandMap(Kumar).png"> 
```

设置在网格中。但是当我加载页面时，我看到一个大图像，这是正确的，但是当我滚动到浏览器的右侧时，屏幕外的图像消失了，没有渲染。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:34:20.790

由于您的图像中有 Stretch="UniformToFill" ，可能是您的图像在其面板中的最大高度不够大，或者因为您的初始源图像纵横比。尝试使用非常高的网格并使用具有“正确”纵横比的图像进行验证，然后您必须考虑要在图像上设置的尺寸/拉伸约束。

# android - 服务事件引发

> ID：10892908
> 
> 赞同：0
> 
> 时间：2012-06-05T06:54:19.060
> 
> 标签：android

想我有一个播放音乐的服务，我也有一个绑定到这个服务的活动，我想当这个服务开始一首新音乐时，引发一个事件并且活动显示一个敬酒，我该怎么做，就像这里

```
Service service = new se...
BindToService();

service.OnMediaPlayerStarted(new Event(

public void run()
{

};
)); 
```

我想创建一个自定义事件，例如 MediaPlayerStarted 以及何时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:21:29.707

您可以通过两种方式做到这一点：

1) 使用 LocalBroadcastManager 并编写一个接收器，用于在应用程序内发送和接收广播（可能很繁重且复杂，因此不扩展细节，但有效）。

2）使用[Handler](http://developer.android.com/reference/android/os/Handler.html)使用消息传递（这很简单）。

*   在 Main Activity 中创建一个 Handler 并将其引用传递给 Service
*   使用带有相应事件 ID 的 Activity 处理程序发送空消息，并在 Activity 中相应地更新 UI。
*   [请参阅此示例。](http://developer.android.com/resources/articles/timed-ui-updates.html)- 这个用户 TimerTask 和 Runnables 但为了您的目的，只需使用 Handler 发送空消息并在 Handler 的 handleMessage(Message msg) 回调中处理它们。

# javascript - 我机器上的 Javascript 日期时间格式已更改，我无法将其更改回来

> ID：10892910
> 
> 赞同：0
> 
> 时间：2012-06-05T06:54:30.873
> 
> 标签：javascript, windows

我面临这个奇怪的问题是javascript对象的默认日期时间格式已从“dd/mm/yyyy”更改为“mm/dd/yyyy”....因此我收到了许多无效日期，

这仅限于一台机器，（我肯定怀疑有人搞砸了系统日期或其他东西，因为我不是唯一使用机器的人），

我知道问题只出在机器上，但我想找出发生这种情况的原因以及如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:32:23.530

这里缺少一些信息。标准 Date 对象不理解 DMY 格式的日期或 MDY 格式的日期。相反，它使用 ISO 8601 格式（或[RFC2822](https://www.rfc-editor.org/rfc/rfc2822#page-14)）作为日期。因此，例如，如果特定浏览器理解

```
var d = new Date("5/6/2012"); 
```

如 2012 年 5 月 5 日或 2012 年 6 月 5 日，或完全忽略它，它完全取决于浏览器。该标准需要格式为“YYYY-MM-DD”等格式的日期。

还有参数在

```
var d = new Date(5/6/2012); 
```

被解释为 5 除以 6 除以 2012，这是一个比零大的小数。这被解释为基准日的时间，即 1970 年 1 月 1 日。

因此，要使基本系统的区域设置产生影响，必须有一些其他代码将日期格式化为 DMY 或 MDY 或其他东西。

# python - 如何使 virtualenv 默认使用最新版本的分发？

> ID：10892914
> 
> 赞同：9
> 
> 时间：2012-06-05T06:54:39.057
> 
> 标签：python, virtualenv, pip

我经常使用 virtualenv 来保持为项目安装的正确版本的依赖项。

```
virtualenv apps --distribute 
```

问题是在使用它时，virtualenv 不断安装distribute==0.6.19

我每次都需要先运行：

```
pip install distribute -U 
```

为什么会这样，我怎样才能让它直接安装正确版本的分发？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:37:47.707

关于更新[python-virtualenv](https://groups.google.com/d/topic/python-virtualenv/Px2TPhMZ_Zg/discussion)列表上的 pip 有一个类似的问题。为方便起见，我在这里重复了一遍：

如果您使用的是最近的 virtualenv，您还可以使用`--extra-search-dir`option 指向包含`distribute`您要安装的包的备用目录。这记录在这里：

[http://www.virtualenv.org/en/latest/index.html#the-extra-search-dir-option](http://www.virtualenv.org/en/latest/index.html#the-extra-search-dir-option)

用户提供的额外搜索目录路径优先于“内置”搜索路径，因此您应该能够实现您想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T06:58:41.427

首先要做的是升级`virtualenv`：

```
sudo aptitude remove python-virtualenv python-pip
sudo easy_install pip virtualenv 
```

然后你默认安装了distribute==0.6.24。

# shell - 使用 shell 脚本将值存储在数组中

> ID：10892916
> 
> 赞同：2
> 
> 时间：2012-06-05T06:54:59.793
> 
> 标签：shell, unix, quoting

这很好用，因为我直接输入数据。

```
declare -a arr
arr=( $(awk '/123456789/{print NR}' filename) )
echo ${arr[0]}
echo ${arr[*]} 
```

Bt 当我按照以下方式进行操作时，它不起作用。你能告诉我如何在下面的命令中使用参数'name'：

```
echo  Enter your search string:  
read name
declare -a arr
arr=( $(awk '/"$name"/{print NR}' filename )
echo ${arr[0]}
echo ${arr[*]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T08:07:57.080

根据您的评论，我发布此答案。这是适合您的脚本：

```
read -e -p "Enter your search string: " name
#echo "name: [$name]"
declare -a arr
arr=( $(awk /"$name"'/{print NR}' x ) )
echo ${arr[0]}
echo ${arr[*]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:14:06.590

```
arr=( $(awk /"$name"/'{print NR}' filename ) ) 
```

# java - 垃圾收集和回调

> ID：10892918
> 
> 赞同：2
> 
> 时间：2012-06-05T06:55:19.030
> 
> 标签：java, android, callback, garbage-collection

如果我有 object `A`，它调用 DAO 对象`B`来执行一些数据库更新 - 一旦`B's`函数完成，它会调用`A`( `A.finishProcess()`) 中的回调函数，这会产生内存问题吗？我的意思是在完成`B`之前是否会保留在内存中`A`？还是被`B`GC 删除了？

我问这个是因为我正在考虑使用回调而不是从`B`.

简而言之，“返回”结果对象而不是使用对调用对象的回调是更好的设计（和内存使用）吗？

PS：请忽略具体的，即它没有提到`AsycnTask`，这是一个人为的情况来解决我的问题:)

为任何帮助而欢呼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:29:09.203

当您拥有 DAO 对象时，您将为相应的回调注册您的类。

只需取消注册回调并删除您班级中 B 类的引用。

如下所示（这里的“b”是 B 类的对象）。

```
b.removeListener(this);
b = null; 
```

这将告诉 JVM 对 B 类的引用不再存在，GC 会将其从内存中清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:40:37.187

这都是关于参考的。只要您不存储/保留任何（强）引用（即正确取消注册，在对象不再使用时清除引用等），您就不必担心，因为对象将被正确处理GC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:35:30.430

我认为您使用回调会导致内存使用问题。如果没有，我已经感到困惑了。如果您提供代码，我们将更容易理解您的想法。

到目前为止，我阅读的有关内存问题或内存泄漏的最佳文档（由 IBM 命名）位于[http://www.ibm.com/developerworks/library/j-leaks/](http://www.ibm.com/developerworks/library/j-leaks/)。

如果你得到一个数组、列表或其他对象，那么在可能的情况下，很容易尽快地尊重它。正如您所说，我通常会投票给结果对象。

# iphone - 在 iPhone 上的 Google plus 上发布朋友壁纸

> ID：10892921
> 
> 赞同：0
> 
> 时间：2012-06-05T06:55:25.803
> 
> 标签：iphone, objective-c, ios5, google-plus

我已经浏览了[https://developers.google.com/+/api/#calls](https://developers.google.com/+/api/#calls)但无法找到在 Google plus 上发布任何朋友壁纸的方法。请给我一些步骤如何在任何朋友上发布Google plus 上的壁纸。谢谢，苏里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:11:11.283

Google + Api 是只读的，你可以在当前的 api 版本中分享一个链接

[https://developers.google.com/+/plugins/share/#sharelink](https://developers.google.com/+/plugins/share/#sharelink)

# java - 使用我的第一个 HelloWorldLogin android 代码获取“强制关闭”

> ID：10892923
> 
> 赞同：0
> 
> 时间：2012-06-05T06:55:27.203
> 
> 标签：java, android, android-emulator

我试图通过以下实验室来学习[https://sites.google.com/site/androidcoursearchive/labs/lab-1](https://sites.google.com/site/androidcoursearchive/labs/lab-1)

这是代码

**名称Getter.java**

```
public class NameGetter extends Activity implements OnClickListener {

    EditText name;
    Button submit;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.name_getter);
        name = (EditText) this.findViewById(R.id.editText1);
        submit = (Button) this.findViewById(R.id.button1);
        submit.setOnClickListener(this);
    }

    public void onClick(View v) {
        String userName = name.getText().toString();
        Intent submitIntent = new Intent(NameGetter.this, HelloWorld.class);
        submitIntent.putExtra("username", userName);
        this.startActivity(submitIntent);
    }
} 
```

**HelloWorld.java**

```
public class HelloWorld extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TextView tv = (TextView) this.findViewById(R.id.textViewHello);

        Bundle name = this.getIntent().getExtras();

        if(name != null) {
            String nameEntered = name.getString("username");
            if(nameEntered != null) {
                tv.setText(nameEntered);
            } else {
                tv.setText("nameEntered is null");
            }
        } else {
            tv.setText("name is null");
        }
    }
} 
```

我可以在 EditText 框中输入文本，当我按下提交按钮时，我会强制关闭。LogCat 说如下：

> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.mypackagerhello.com/com.mypackagerhello.com.HelloWorld}：java.lang.NullPointerException`

编辑：谢谢大家！这是`this.setContentView(R.layout.main);`HelloWorld.java 中缺少的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T06:58:25.527

请注意，在 NameGetter Activity 中，您将内容视图设置为：

```
this.setContentView(R.layout.name_getter); 
```

但是在您的 HelloWorld 活动中，您还没有这样做。在 super.onCreate 之后和 findViewById 之前添加该行。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T06:57:42.267

插入

```
setContentView(R.layout.<layout_id>); 
```

在HelloWorld之前

```
TextView tv = (TextView) this.findViewById(R.id.textViewHello); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:04:40.837

jsut 在 androidmanifest.xml 中的 aplication 标记中声明您的 HelloWorld 活动，如下所示

```
 <activity
            android:name=".HelloWorld"
            android:label="@string/app_name" >
        </activity> 
```

# asp.net-mvc-3 - 覆盖 Global ActionFilter 中定义的缓存

> ID：10892924
> 
> 赞同：2
> 
> 时间：2012-06-05T06:55:29.147
> 
> 标签：asp.net-mvc-3, cache-control, action-filter

我的目标是拥有一个默认禁用缓存的全局`NoCacheActionFilter`属性（在 中注册）。`Global.asax.cs`

然后我想在我的控制器所需的操作上添加更细粒度的控制，我想添加一个**缓存**属性，该属性应该覆盖在 global 中定义的属性`NoCacheActionFilter`。

**我的方法**

在里面`NoCacheActionFilter`

```
public override void OnActionExcecuting(ActionExecutingContext filterContext)
{
    //disable caching
    HttpCachePolicyBase cache = filterContext.HttpContext.Response.Cache;
    cache.SetCacheability(HttpCacheability.NoCache);
    ...
} 
```

并在*缓存属性*中...

```
public override void OnActionExecuted(ActionExecutedContext filterContext)
{
    //add caching
    ...
    cache.SetCacheability(HttpCacheability.Public);
    ...
} 
```

注意 和 之间的区别`OnActionExecuting`，`OnActionExecuted`它们应该一个接一个地调用，因此应该授予顺序。

**但是**，显然这**不起作用**。有什么建议么？？有种想念一些微不足道的感觉...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:57:26.397

只是一个猜测。更改`Cache`对象后，`filterContext`您会调用基本过滤器类的方法吗？

```
 ...
    base.OnActionExecuting(filterContext);
} 
```

和

```
 ...
    base.OnActionExecuted(filterContext);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:38:48.903

过滤器的运行顺序可能不是您所期望的。

查看此博客文章，其中解释了它们将运行的顺序：http: [//blog.rajsoftware.com/post/2011/05/14/MVC3-Filter-Ordering.aspx](http://blog.rajsoftware.com/post/2011/05/14/MVC3-Filter-Ordering.aspx)

# asp.net-mvc-3 - 如果我删除一个字段，MVC 3 默认编辑将不起作用

> ID：10892929
> 
> 赞同：2
> 
> 时间：2012-06-05T06:55:54.317
> 
> 标签：asp.net-mvc-3

我创建了一个默认的 MVC 3 项目并为我的模型创建了默认的编辑页面。如果我不碰它，一切正常。

现在我想删除编辑页面上的一个编辑字段（因为我不希望主键可编辑）。所以我只是将 EditFor 更改为 DisplayFor。一切都正确播种，但如果我想保存，我会收到以下错误：

> **用户代码未处理 DbUpdateConcurrencyException**
> 
> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

在我可以看到的编辑操作中，我的模型类不再获得主键（它是 0），因此更新不起作用。

```
// POST: /Weiterleitung/Edit/5
        [HttpPost]
        public ActionResult Edit(Rufnummern_Weiterleitungen rufnummern_weiterleitungen)
        {
            if (ModelState.IsValid)
            {
                db.Entry(rufnummern_weiterleitungen).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(rufnummern_weiterleitungen);
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        } 
```

如何在不将模型的每个字段都显示为编辑字段的情况下避免此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:02:05.033

您的 POST 操作错过了 Id，因为 DisplayFor<> 不会呈现 HTML 控件，因此该值不会回传到您的控制器操作。您可以将 id 作为参数传递给您的操作（然后您需要将该参数添加到视图中的 Html.BeginForm() 调用并相应地修改您的编辑操作），或者您可以添加一个 HiddenFor<>-字段包含标识。隐藏字段在回发时传递给控制器​​，并且应该被`Rufnummern_Weiterleitungen`从表单值创建实例的默认绑定处理程序识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:02:51.697

只有编辑字段（`<input>`和`<select>`内部`<textare>`）`<form>`被回发到服务器。

我建议不要直接在视图中使用您的数据库实体。在这里阅读原因：

[http://blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/](http://blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/)

# c# - 服务层，实现定时缓存

> ID：10892934
> 
> 赞同：0
> 
> 时间：2012-06-05T06:56:17.130
> 
> 标签：c#, .net, .net-4.0, .net-3.5

所以现在我进入了一个由我负责的项目。

我发现实现一半的部分是服务层缓存。显然，服务层中的缓存是为了避免对数据库集群进行大量调用。如果一台服务器出现故障，服务层托管在两台服务器上，以确保性能和稳定性。

现在我的问题，或者更确切地说，实现定时缓存的最佳模式是什么？很少更改或更新的对象（例如国家/地区等）会被缓存，如果没有重置池，则永远不会真正释放。

因为我们，或者更确切地说是我的前辈，在两台不同的机器上有两个活动服务，所以我正在考虑实现一个定时缓存。另一种选择是让服务相互交谈，但当然要考虑到它们不相互依赖，这样如果一个服务出现故障，另一个就可以正常工作。

现在有 12 个包含缓存项目的字典。其中大部分很少更新。这些字典驻留在一个类中，该类不是单例，而是作为单例实现，因此只实例化一次。

你如何建议我解决这个有趣的问题，为什么要这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:40:52.860

为什么不使用以下缓存技术之一设置由一台或多台服务器组成的缓存集群：

*   [Windows Server AppFabric](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)
*   [NCache](http://www.alachisoft.com/ncache/)

这样您就不必担心运行两个服务做同样的事情。

这两种技术都支持在指定的时间内缓存对象。

例如：

```
public void Add(string key, object value, TimeSpan timeout)
{
    //...
} 
```

或者您可以选择无限期地缓存它们。

支持冗余。请注意小字体。

[AppFabric 冗余](https://stackoverflow.com/questions/4747219/appfabric-redundancy)

早在 2010 年，我写了一些关于 AppFabric 和 NCache 的文章。

*   [https://github.com/geersch/AppFabric](https://github.com/geersch/AppFabric)
*   [https://github.com/geersch/NCache](https://github.com/geersch/NCache)

两者都提供了一个简单且相似的 API 来使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:47:36.550

[MemCached](http://memcached.org/)是另一个。MemCached 针对分布式架构，例如您描述的架构。我使用[Paul Glavic](http://weblogs.asp.net/pglavich/)编写的适配器，他[在此处](http://weblogs.asp.net/pglavich/archive/2010/10/13/caching-architecture-testability-dependency-injection-and-multiple-providers.aspx)写了一篇文章，演示了如何使用它。

Glavs 适配器将允许您在未来将缓存实现从 Aspnet 缓存切换到 MemCached 或 AppFabric。

该适配器还以 ICacheProvider 的形式提供了一个不错的 API：

```
var data1 = cacheProvider.Get<SomeData>("cache-key", DateTime.Now.AddHours(1), () =>
{
    // With the cache disabled, this data access code is executed every attempt to
    // get this data via the CacheProvider.
    var someData = new SomeData() { SomeText = "cache example1", SomeNumber = 1 };
    return someData;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:01:28.140

ASP.Net 已经内置了一个相当不错的缓存系统。你不能使用它有什么原因吗？

它支持缓存的定时刷新，通过外部事件刷新，可以配置为使用内存、数据库、单独的缓存服务器、分布式缓存等。你应该没有理由自己制作:-)

# java - 在 Java 中擦洗字符串

> ID：10892936
> 
> 赞同：0
> 
> 时间：2012-06-05T06:56:40.077
> 
> 标签：java, string

我有一系列格式如下的字符串：

```
String a = "Agregator par. L1-23 2/22.-------->EFM Actelis ML628  8-210  alternative 8-/208                                                        "; 
```

如您所见，原始格式看起来不太好，所以我想删除部分字符串以给出以下结果：

```
"Agregator par. L1-23 2/22.EFM Actelis ML628  8-210  alternative 8-/208" 
```

然而，并非我的所有字符串都遵循这种确切的格式，这意味着它们不容易操作。

这是我想要做的：

*   删除所有尾随空格（大约 56 个，但并不总是相同的数字）
*   删除所有出现的`-------->`，而不删除字符串其他部分的连字符。中的连字符数`-------->`可能因字符串而异

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:11:28.617

您可以使用正则表达式删除不需要的字母。

```
String a= "Agregator par. L1-23 2/22.-------->EFM Actelis ML628  8-210  alternative 8-/208                                                        ";

     a = a.trim().replaceAll(" +", " ");
     a = a.replaceAll("-*>", " "); 
```

`a.trim().replaceAll(" +", " ")`将删除最后的所有空格，如果有多个空格，它将替换为单个空格。

**输出 ：** `"Agregator par. L1-23 2/22\. EFM Actelis ML628 8-210 alternative 8-/208"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:07:34.027

您可以将正则表达式传递给该`replaceAll`方法，因此以下工作：

```
String s = "Agregator par. L1-23 2/22.-------->EFM Actelis ML628  8-210  alternative 8-/208";
s = s.replaceAll("-*>", " "); 
```

如果您不知道`-`'es 的数量在您的`----->`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T07:10:10.060

您可以： 1- 使用 String.replace() 方法替换字符串中的某些内容。2-使用正则表达式在字符串中查找某些特定模式（例如“--->”或“-->”或“--------->”或其他任何内容）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T15:18:20.333

来自 apache common-lang 的 StringUtils 类提供了对 String、FQN org.apache.commons.lang.StringUtils 的简单和少量操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T07:03:28.643

`trim()`不会删除字符串中间的空格...取自 trim() [http://docs.oracle.com/javase/6/docs/api/java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)的 API 文档：

> 返回字符串的副本，省略前导和尾随空格。

如果你做一个`replaceAll("-------->", "")`

它只会替换确切的字符串“-------->”没有短划线或不大于末尾的任何内容....如果您不能进行精确匹配，请查看正则表达式[http:// docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T07:06:38.807

您可以像这样使用 String 的 replace 方法。

```
String a= "Agregator par. L1-23 2/22.-------->EFM Actelis ML628  8-210  alternative 8-/208 ";
a=a.replace("-------->", " "); //to replace the arrow
a=a.replace("  ", " "); //to replace the double spaces 
```

结果：`Agregator par. L1-23 2/22\. EFM Actelis ML628 8-210 alternative 8-/208`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T07:07:44.313

使用 split("----->") 然后合并结果数组

```
String [] array = s.split("---->");
String snew = "";
for(int i=0;i<array.length;i++){
   snew += array[i];
} 
```

# php - 用于评级 html5 js 的圆形 div 栏

> ID：10892939
> 
> 赞同：3
> 
> 时间：2012-06-05T06:56:44.413
> 
> 标签：php, javascript, html, css

嗨，我在我的页面中使用了一个条形评级系统，它通过一个非常简单的 php 代码示例以百分比显示用户有多少分：

```
if($points>50){
 $level = "Full User";
 $level_bar = "100%";
} 
```

到加载时，条形图显示 100% 填充了另一种颜色。

现在的问题是做实心条圆形，我有用html5做的想法，但我失败了，知道怎么做吗？

我试图让这个工作： [循环评级栏](http://d.pr/i/XLSf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T09:30:33.623

使用画布元素制作的演示：http: [//jsfiddle.net/x4pVy/](http://jsfiddle.net/x4pVy/)

如果要显示不同的百分比，只需更改存储在`data-completeness`属性上的值`canvas`

百分比值可以写入画布内（通过`fillText()`函数）或写入可以放置在画布上的另一个 DOM 元素（使用 css）

# c# - 用户选择 googlemap 位置并将其存储到数据库中

> ID：10892951
> 
> 赞同：0
> 
> 时间：2012-06-05T06:57:43.770
> 
> 标签：c#, model-view-controller, google-maps, latitude-longitude

我正在构建自定义房地产应用程序。我在`Longitude Latitude`数据类型十进制的 db (mssql2008) 中有两个字段。当然在我的领域我有相同的属性

```
public decimal Longitude
public decimal Latitude 
```

我的问题是如何使用谷歌地图使用户能够使用地图内的某种指针导航以导航到确切的位置，并且应用程序应该将 lon 和 lan 数据存储在 db 中。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:07:43.283

我认为这正是您要寻找的。

```
http://www.gorissen.info/Pierre/maps/googleMapLocation.php 
```

只需在地图上单击某个位置，它就会在标注窗口中为您提供纬度和经度。

您可以在以下位置找到 Google 地图 API`code.google.com/apis/maps/documentation/reference.html`

你将如何将这些信息存储到数据库中是这个问题的范围。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:12:09.893

Google 地图 API 具有以下功能，可帮助您获取地图中心的纬度和经度：

```
var c = map.getCenter();
var lat = c.lat();
var lng = c.lng(); 
```

然后，您可以将这些值提交回服务器以将它们存储在数据库中。

# c# - WCF 错误调用 Ws2007HttpBinding

> ID：10892955
> 
> 赞同：1
> 
> 时间：2012-06-05T06:58:01.740
> 
> 标签：c#, wcf, wcf-wshttpbinding

我正在尝试从 WCF ws2007HttpBinding 服务获取数据，但每次运行它时都会出现以下错误：

```
Content Type application/soap+xml; charset=utf-8 was not supported by service 
http://localhost/GoldInSacks.MutualFunds.local/MutualFunds.svc.  The client
and service bindings may be mismatched. 
```

InnerException 是这样写的：

```
The remote server returned an error: (415) Cannot process the message because 
the content type 'application/soap+xml; charset=utf-8' was not the expected 
type 'text/xml; charset=utf-8'.. 
```

web.config 的 system.ServiceModel 部分如下所示：

```
<system.serviceModel>
    <services>
        <service name="GoldInSacks.MutualFunds">
            <endpoint address="" 
                      binding="ws2007HttpBinding" 
                      contract="GoldInSacks.MutualFunds.Local.IMutualFunds" />
        </service>
    </services>

    <bindings>
        <ws2007HttpBinding>
            <binding>
                <security mode="None" />
            </binding>
        </ws2007HttpBinding>
    </bindings>
</system.serviceModel> 
```

当前在控制台应用程序中运行的客户端代码如下所示：

```
 EndpointAddress address = 
            new EndpointAddress("http://localhost/MutualFunds.local/MutualFunds.svc");

        var binding = new WS2007HttpBinding();
        binding.Security.Mode = SecurityMode.None;

        ChannelFactory<IMutualFundsChannel> channelFactory = 
            new ChannelFactory<IMutualFundsChannel>(binding, address);
        IMutualFundsChannel channel = channelFactory.CreateChannel();

        var mf = channel.GetMutualFundsByCustomer(1);

        channel.Close();

        foreach (var m in mf)
        {
            System.Console.WriteLine(m.Name);
        }

        System.Console.ReadLine(); 
```

调用 GetMutualFundsByCustomer 时发生错误。

我也尝试过 wsHttpBinding 但它给出了同样的错误。

有谁知道如何使这项工作？

（我为这个问题的简洁性道歉，但已经很晚了，我需要睡觉）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:55:07.867

您在客户端和服务端使用相同的 SOAP 版本吗？也许相关？ [http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/f29cd9c8-3c89-43d2-92ae-d2a270ab86b9/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/f29cd9c8-3c89-43d2-92ae-d2a270ab86b9/)

干杯——乔克

# java - jfreechart中的条形图数据集名称粗体

> ID：10892958
> 
> 赞同：0
> 
> 时间：2012-06-05T06:58:17.190
> 
> 标签：java, jfreechart, bar-chart

在我`Barchart`的如何以粗体添加数据集值文本中，我尝试了

```
rangeAxis.setTickLabelFont(new Font("Serif", Font.BOLD, 14)); 
```

这在水平方向上很好，但在垂直方向上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T07:10:01.730

垂直尝试

```
domainAxis.setTickLabelFont(new Font("Serif", Font.BOLD, 14)); 
```

# c# - 如何在 C# 中使用鼠标悬停延迟？

> ID：10892961
> 
> 赞同：1
> 
> 时间：2012-06-05T06:58:27.620
> 
> 标签：c#, winforms, delay, mousehover

我在 c# 中使用鼠标悬停单击，但我希望它在单击前等待 2-3 秒，如果光标没有在按钮上停留 2 秒或更长时间，它将不会单击。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T15:34:33.337

`Button`您可以通过从类派生来实现该功能：

```
using System;
using System.Windows.Forms;

namespace MouseHoverDelay
{
    public class HoverButton : Button
    {
        protected System.Timers.Timer timer;

        public bool IsHoverEnabled { get; set; }
        public double Delay { get; set; }

        public event System.Timers.ElapsedEventHandler TimerElapsed
        {
            add
            {
                timer.Elapsed += value;
            }
            remove
            {
                timer.Elapsed -= value;
            }
        }

        public HoverButton()
        {
            // defaults: hover trigger enabled with 3000 ms delay
            IsHoverEnabled = true;
            Delay = 3000;

            timer = new System.Timers.Timer
            {
                AutoReset = false,
                Interval = Delay
            };
        }

        protected override void OnMouseEnter(EventArgs e)
        {
            base.OnMouseEnter(e);

            if (IsHoverEnabled)
            {
                timer.Start();
            }
        }

        protected override void OnMouseLeave(EventArgs e)
        {
            base.OnMouseLeave(e);

            timer.Stop();
        }
    }
} 
```

将其添加到表单后，您需要在表单`Delay`的方法中设置它和处理程序方法`InitializeComponent()`：

```
this.btnHoverTest.Delay = 2000;
this.btnHoverTest.TimerElapsed += timer_Elapsed; 
```

然后以如下形式实现处理程序：

```
using System;
using System.Windows.Forms;

namespace MouseHoverDelay
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        // triggers when Delay milliseconds have passed since hovering mouse over control
        protected void timer_Elapsed(object o, EventArgs e)
        {
            MessageBox.Show("Hovered for 2 seconds!");
        }
    }
} 
```

# android - android项目中的错误

> ID：10892963
> 
> 赞同：0
> 
> 时间：2012-06-05T06:58:34.920
> 
> 标签：android

我做了这个温度转换器应用程序，代码很完美。但是每当我运行 AVD 时，它都会显示以下错误：

```
[2012-06-05 12:22:58 - Emulator] Failed to allocate memory: 1455
[2012-06-05 12:22:58 - Emulator] 
[2012-06-05 12:22:58 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
[2012-06-05 12:22:58 - Emulator] Please contact the application's support team for more information. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:12:28.317

**解决方案1：**

根据 Calvin 在 techarena 论坛上的指示，我已经证明了最佳和正确的解决方案。

*   单击开始，单击运行，在打开框中键入 sysdm.cpl，然后按 Enter。
*   单击高级选项卡，然后在性能下单击设置。
*   单击高级选项卡，然后在虚拟内存下单击更改。
*   在 Drive [Volume Label] 下，单击包含要更改的页面文件的驱动器。
*   在所选驱动器的分页文件大小下，单击自定义大小，在初始大小 (MB) 或最大大小 (MB) 框中键入新的分页文件大小（以兆字节 (MB) 为单位），然后单击设置。
*   单击确定关闭对话框并应用更改。

这种常见的错误“无法分配内存：1455”将由**Virtual Memory alocation**引起。这样解决了根 C 盘的虚拟内存分配问题后，你应该在 Eclipse 的控制台中阅读以下内容：

```
[2011-11-27 12:33:06 - Videotutorial1] ------------------------------
[2011-11-27 12:33:06 - Videotutorial1] Android Launch!
[2011-11-27 12:33:06 - Videotutorial1] adb is running normally.
[2011-11-27 12:33:06 - Videotutorial1] Performing com.videotutoriales.videotutorial1.Videotutorial1Activity activity launch
[2011-11-27 12:33:06 - Videotutorial1] Automatic Target Mode: Preferred AVD 'VtAVD' is not available. Launching new emulator.
[2011-11-27 12:33:06 - Videotutorial1] Launching a new emulator with Virtual Device 'VtAVD'
[2011-11-27 12:33:39 - Emulator] emulator: emulator window was out of view and was recentered
[2011-11-27 12:33:39 - Emulator]
[2011-11-27 12:33:45 - Videotutorial1] New emulator found: emulator-5554
[2011-11-27 12:33:45 - Videotutorial1] Waiting for HOME ('android.process.acore') to be launched...
[2011-11-27 12:38:19 - Videotutorial1] HOME is up on device 'emulator-5554'
[2011-11-27 12:38:19 - Videotutorial1] Uploading Videotutorial1.apk onto device 'emulator-5554'
[2011-11-27 12:38:20 - Videotutorial1] Installing Videotutorial1.apk...
[2011-11-27 12:40:52 - Videotutorial1] Success!
[2011-11-27 12:40:53 - Videotutorial1] Starting activity com.videotutoriales.videotutorial1.Videotutorial1Activity on device emulator-5554
[2011-11-27 12:41:18 - Videotutorial1] Attempting to connect debugger to 'com.videotutoriales.videotutorial1' on port 8628 
```

**解决方案2：**

打开 Android Virtual Device Manager 并将设备内存大小的值添加或更改为 15 或更小或更高的值：

![在此处输入图像描述](../Images/57629d6d59cd40a8596ccb605cb66d6f.png)

# progress-4gl - 如何使用openedge 11 版打开openedge 10 版字典？

> ID：10892964
> 
> 赞同：0
> 
> 时间：2012-06-05T06:58:38.750
> 
> 标签：progress-4gl, openedge, progress-db

我需要使用版本 11 数据库字典打开 opensge 版本 10 数据库。我正在尝试使用版本 11 打开数据库字典，但是一条消息说“使用 R10 数据字典打开此 R10 数据字典”。我可以使用 R11 数据库字典打开 R10 数据库吗？我对此没有任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:15:28.147

首先，我会注意到 v11 数据管理工具中的某些内容根本不适用于 v10 数据库，因为 v10 数据库没有 v11 数据库的相同功能。

写完之后，Progress 平台旨在允许客户端通过客户端-服务器连接连接到比当前客户端版本早一个版本的数据库，以支持升级数据库，然后再迁移客户端。

我不*认为*它以另一种方式工作（客户端可以连接到一个版本的数据库）。我建议您尝试连接到 db 客户端服务器，看看是否有帮助。

如果这不起作用，请与您的技术支持资源联系，或查看 PSC KB： http: [//knowledgebase.progress.com/progresskbsearch#](http://knowledgebase.progress.com/progresskbsearch#)

很可能，您运气不好，需要将数据库升级到版本 11 才能使用版本 11 数据管理工具。

# ruby-on-rails - Ruby 中的安全执行

> ID：10892968
> 
> 赞同：0
> 
> 时间：2012-06-05T06:58:43.257
> 
> 标签：ruby-on-rails, ruby, security, process

我正在尝试创建一个网站，人们可以在那里运行上传的代码。SPOJ / ACM 之类的东西。如何确保代码不会损坏我的系统（限制对套接字、系统调用的访问）

我在网上浏览了许多解决方案，有些建议使用 chroot，但我不明白。这也需要配置，这可以通过配置等来完成吗？

注意我不是要求任何特定的语言，在可执行文件中运行。

我的开发设置是用于托管的 MAC 和 Linux，如果解决方案可以在两者上运行，那就太好了。不是要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:25:17.687

我建议使用具有最低系统的虚拟机，只允许运行 ruby​​ 而没有其他任何东西。我会使用一个 linux 系统，您可以在其中更大程度地锁定程序的执行，并具有扩展权限。

最后在每个程序运行之后，然后将虚拟机重置为检查点原始设置，从而消除任何可能发生的事故。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:32:27.643

看看[RubyCop](https://github.com/envylabs/RubyCop)

> RubyCop 扫描 Ruby 代码并告诉您它是否安全。我们在 CodeSchool 使用它来检查用户提交的代码，然后再在服务器上对其进行评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T09:41:47.997

请检查 Ruby 内置的[污染](http://www.ruby-doc.org/docs/ProgrammingRuby/html/taint.html)机制

# git - 为什么需要 Gitosis 或 Gitolite？

> ID：10892969
> 
> 赞同：3
> 
> 时间：2012-06-05T06:58:46.003
> 
> 标签：git, gitosis, gitolite

对不起我的无知 - 但是拥有 Gitosis 或 Gitolite 有什么好处。

我有一个正在运行的 Synology NAS 服务器，但我可以不只是在 NAS 上的任何文件夹上创建一个“裸”吗？

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T07:04:32.217

主要原因是访问控制。Git 不支持存储库级别访问之外的任何访问控制功能，并且通常需要更细粒度的东西，例如访问组、文件夹/文件/分支/标签级别控制等。

对于很多项目，您并不严格需要它。但是，对于某些人来说，这是绝对必须的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:10:55.670

[请参阅我关于“身份验证和授权](https://stackoverflow.com/questions/5683253/distributed-version-control-systems-and-the-enterprise-a-good-mix/5685757#5685757)”的回答：DVCS（分布式 VCS）没有。

*   Gitosis 已死（已过时，未维护）。
*   Gitolite 是关于[授权，而不是身份验证](http://sitaramc.github.com/gitolite/auth.html)。

您将使用 ssh 或 httpd 将该授权机制与身份验证机制结合起来。

> 但是，它必须是一个以某种形式与 sshd 或 httpd 兼容的身份验证系统。
> 为什么？因为访问服务器的 git 客户端只知道这 2 个协议来“说 git”。（好吧， git:// 协议是未经身份验证的，而 file:// 并不真正适用于这个讨论，所以我们忽略了这些）。
> 
> 例如，假设您在某处有一个基于 LDAP 的身份验证系统。
> 可以让 apache 使用它来验证用户，因此当用户使用 访问 git url`http://sitaram:password@git.example.com/repo`时，是 LDAP 进行实际验证。

# ruby-on-rails - Rails 隔离引擎模型关联

> ID：10892981
> 
> 赞同：2
> 
> 时间：2012-06-05T06:59:26.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, rails-engines

我有一个带有命名空间“商店”的引擎。一切都很好，除了如果我不在关联声明中添加 class_name: 'Shop::MyAssociatedModel' 会出错。例如，产品有很多 product_images，所以如果产品模型看起来像这样，一切都很好：

```
module Shop
  class Product < ActiveRecord::Base
    has_many :product_images, :class_name => 'Shop::ProductImage'
  end
end 
```

如果我不使用 class_name 我会收到一个错误：

```
uninitialized constant ProductImage 
```

在这条线上：

```
@products.in_groups_of(3) do |products|
  ... 
```

这是我的 engine.rb 文件：

```
module Shop
  class Engine < Rails::Engine
    isolate_namespace Shop
    ...
  end
end 
```

该引擎是使用 rails v 3.1.something 上的 rails generator 创建的，我升级到 rails 3.2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:38:44.170

根据链接中的[Rails Guides - Engines](http://edgeguides.rubyonrails.org/engines.html#using-a-class-provided-by-the-application)部分，如果您不添加命名空间，它将在父应用程序的模型中查找该类，这不是您想要的。

# c# - 线程在委托上被中止

> ID：10892987
> 
> 赞同：0
> 
> 时间：2012-06-05T06:59:50.380
> 
> 标签：c#, multithreading

我在下面的函数上遇到了这种类型的错误：我也用 ThreadException 处理了它，但仍然收到这样的错误：

```
private void tmrOneSec_Tick(object sender, EventArgs e)
{
        tsSpendTime = tsSpendTime.Add(new TimeSpan(0, 0, 1));
        tsRemTime = tsTotalTime.Subtract(tsSpendTime);
        if (tsRemTime.Ticks > 0)
            clsCommonFunc.MultiThreadSetText(txtTimeRem, clsCommonFunc.GetFormattedTime(tsRemTime));
}

public static void MultiThreadSetText(TextBox TxtBox, string Text)
{

        if (TxtBox.InvokeRequired)
        {
            TxtBox.Invoke((MethodInvoker)delegate
            {
                MultiThreadSetText(TxtBox, Text);
            });
        }
        else
        {
            TxtBox.Text = Text;
            TxtBox.Refresh();
        }
} 
```

错误是这样的：

```
Source :: mscorlib
Error :: 6/5/2012 8:51:28 AM
Error Description : Thread was being aborted.

Stack Trace:    at System.Threading.WaitHandle.WaitOneNative(SafeWaitHandle waitHandle, UInt32 millisecondsTimeout, Boolean hasThreadAffinity, Boolean exitContext)
at System.Threading.WaitHandle.WaitOne(Int64 timeout, Boolean exitContext)
at System.Threading.WaitHandle.WaitOne(Int32 millisecondsTimeout, Boolean exitContext)
at System.Windows.Forms.Control.WaitForWaitHandle(WaitHandle waitHandle)
at System.Windows.Forms.Control.MarshaledInvoke(Control caller, Delegate method, Object[] args, Boolean synchronous)
at System.Windows.Forms.Control.Invoke(Delegate method, Object[] args)
at System.Windows.Forms.Control.Invoke(Delegate method)
at SE5.clsCommonFunc.MultiThreadSetText(TextBox TxtBox, String Text) 
```

我无法识别确切的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:58:30.353

您会得到等待`Invoke`调用返回的异常。

尝试改变

```
TxtBox.Invoke((MethodInvoker)delegate
{
    MultiThreadSetText(TxtBox, Text);
}); 
```

到

```
TxtBox.BeginInvoke((MethodInvoker)delegate
{
    MultiThreadSetText(TxtBox, Text);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:06:12.763

尝试像这样更改您的委托用法：

```
private delegate void MultiThreadSetTextDelegate(TextBox TxtBox, string Text);

public static void MultiThreadSetText(TextBox TxtBox, string Text)
{

        if (TxtBox.InvokeRequired)
        {
            TxtBox.Invoke(new MultiThreadSetTextDelegate(MultiThreadSetText), TxtBox, Text);
        }
        else
        {
            TxtBox.Text = Text;
            TxtBox.Refresh();
        }
} 
```

试试看，如果仍然有错误，请告诉我。但这就是我调用我的代表的方式，我一点也不麻烦！:)

# r - 使用substitute() 获取参数名称，多级

> ID：10892990
> 
> 赞同：6
> 
> 时间：2012-06-05T07:00:20.917
> 
> 标签：r

考虑这个函数`a()`，它打印出传入的参数：

```
a <- function(x) {
  message("The input is ", deparse(substitute(x)))
}

a("foo")
# The input is "foo"

tmplist <- list(x1 = 1, x2=2)
a(tmplist)
# The input is tmplist 
```

这样可行。但是当`a()`从另一个函数调用时，它不再打印出原始参数名称：

```
b <- function(y) {
  a(y)
}

b("foo")
# The input is y

b(tmplist)
# The input is y 
```

一种似乎可行的解决方案是包装另一个`substitute`和一个`eval`：

```
a1 <- function(x) {
  message("The input is ", deparse(eval(substitute(substitute(x)), parent.frame())))
}

a1("foo")
# The input is "foo"

tmplist <- list(x1 = 1, x2=2)
a1(tmplist)
# The input is tmplist

b1 <- function(y) {
  a1(y)
}

b1("foo")
# The input is "foo"

b1(tmplist)
# The input is tmplist 
```

但这似乎不优雅。如果我添加另一层，它会失败：

```
c1 <- function(z) {
  b1(z)
}
c1("foo")
# The input is z 
```

有没有一种好的、通用的方法来获得原始论点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T07:37:42.983

我不确定这在所有情况下都能正常工作，但试试这个：

```
f0 <- function(x) {
  nn <- substitute(x)
  i <- 1
  while(TRUE) {
    on <- do.call("substitute", list(as.name(nn), parent.frame(i)))
    if (on == nn) break;
    nn <- on
    i <- i + 1
  }
  message("The input is ", nn)
}

f1 <-function(.f1) f0(.f1)
f2 <- function(.f2) f1(.f2) 
```

接着，

```
> f2(foo)
The input is foo
> f1(poo)
The input is poo
> f0(moo)
The input is moo
> f2(";(")
The input is ;(
> f1(":)")
The input is :)
> f0(":p")
The input is :p 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T18:09:47.990

改编 kohske 的答案，这是可行的，但如果变量在两个连续的帧中具有相同的名称，则不会过早停止向上帧堆栈。我不知道它是否在所有情况下都能正常工作，但它似乎可以满足我的需求。字符串与变量的引用与以前略有不同，但这对我来说是可以的。

```
a <- function(x) {
  newname <- substitute(x)

  # Travel up the frame stack until we hit the top.
  for(i in seq_len(sys.nframe())) {
    oldname <- do.call("substitute", list(as.name(newname), parent.frame(i)))
    newname <- oldname
  }
  message("The input is ", deparse(newname))
}

b <- function(y)  a(y)

c <- function(z)  b(z)

a("adsf")
# The input is adsf
a(foo)
# The input is foo

b("adsf")
# The input is adsf
b(foo)
# The input is foo

c("adsf")
# The input is adsf
c(foo)
# The input is foo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T11:47:07.327

虽然这本身就是一个有趣的问题，但我想知道最好的解决方案是否只是将变量名作为字符传递，即在引号中。那么这些都不是必需的。如果需要与名称对应的对象，则可以使用`get`or`as.name`和`do.call`获取它，具体取决于您在函数中如何使用它。

```
> f0 <- function(x) {message("The input is ", x)}
> f1 <- function(.f1) f0(.f1)
> f2 <- function(.f2) f1(.f2)
> f2("aa")
The input is aa
> f1("bb")
The input is bb
> f0("cc")
The input is cc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T07:38:34.483

什么时候递归调用你的函数怎么样

```
deparse(substitute(x))!=deparse(eval(substitute(substitute(x)), parent.frame()) 
```

# android - Phone-gap 开发移动应用程序的难易程度

> ID：10892994
> 
> 赞同：0
> 
> 时间：2012-06-05T07:00:41.457
> 
> 标签：android, ios, cordova

目前我正在开发 ios 和 android，所以我需要一个接一个地为它们开发相同的应用程序..

了解Phone-Gap ..您尝试过吗..如何同时开发应用程序，并且两个平台的时间要短得多...是简单还是复杂还是需要时间来学习...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:09:53.917

一旦您为 PhoneGap 设置了 SDK（注意：目前它称为 Cordova），开始使用它进行开发非常快。基本上你所需要的只是一些 HTML(5) 和 JavaScript 知识。但是请注意，PhoneGap 只是一个将您的 HTML+CSS+JS 应用程序嵌入到本机框架中的框架，此外，它还使您可以访问 JavaScript（相机、加速度计等）无法使用的平台功能。 -平台方式。如果您了解 Web 客户端技术，您会发现开始使用它非常容易。

这种方法的不利之处在于，您无法直接访问本机 UI 小部件、屏幕过渡和动画，从而获得与本机应用程序相同的外观和感觉。为此，您必须安装一些其他 JavaScript UI 框架，如 jQuery Mobile、iScroll 等。配置这些框架以使其与 PhoneGap 一起工作可能需要一些时间，但值得付出努力。

无论如何，这取决于您的应用程序的需求。由于上述技术的局限性（在 CPU、内存处理、原生外观、对原生技术的访问受限），我觉得这种方法只适用于某些类型的应用程序，很可能是厚一堆 Web 服务背后的客户端。它们也非常适合快速制作 UI 原型。如果你需要更复杂的东西，你最好选择原生开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T07:10:05.610

不，从 phonegap 开发本机应用程序很容易，实际上您只需要创建一次编写代码，并且在进行一些设置后，它就会适用于 phonegap 支持的每个平台。有一些 url 有很好的信息。

对于[安卓](http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)。

对于[iOS](http://docs.phonegap.com/en/1.7.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)。

有[Phonegap-Beginners-Guide(pdf)的链接](http://lecturer.eepis-its.edu/~yuliana/Android/Buku/PhoneGap-Beginners-Guide.pdf)