# StackOverflow 问答 10200000-10200999

# php - 存储 pdf 文件或使用 php 生成它们

> ID：10200001
> 
> 赞同：0
> 
> 时间：2012-04-17T22:16:25.977
> 
> 标签：php, jquery, json, pdf

我正在构建一个供员工使用的网络应用程序。员工将出现在客户家中，工作完成后，客户将使用此[http://thomasjbradley.ca/lab/signature-pad/](http://thomasjbradley.ca/lab/signature-pad/)在 ipad 上签名（也许除非有更好的方法），我想如果客户想要一份副本，或者我们出于某种原因需要回去查看它（我也可能会签订合同），则能够使用 php 生成 pdf。

客户签名后，我应该存储 pdf 以备后用，还是不应该存储 pdf 并每次生成一个？合同（可能）不会经常被拉起，但我不想通过总是生成 pdf 来减慢服务器速度（并且 pdf 占用更多空间）

我应该采用哪种方法

存储 pdf 的副本并在服务器上占用空间？还是每次都生成一个pdf？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:25:21.143

如果您让客户签署这些 PDF，即使是虚拟的，您最好存储实际生成的 PDF。如果稍后对文档有疑问，您的记录将显示时间戳和清晰准确的 PDF 副本。虽然这不是无可争辩的证据，但它与任何人所期望的一样好。

*但是*我不是律师，我不知道您在哪个司法管辖区等，所以如果涉及大量资金，您应该咨询专业人士。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:00:08.110

老实说，这取决于你在哪个行业工作。我现在可以告诉你，你做事的方法不会被认为是我所在行业经过验证的记录系统。

要使电子记录在制药领域被视为有效，它必须满足标准，包括但不限于：

1) 带时间戳的审计日志 2) 对授权用户的访问受限 3) 定期用户重新认证 4) 能够以计算机和人类可读格式生成准确的记录副本 5) 备份以保证数据不会丢失 6) 等等。

因此，就像其他人已经提到的那样，这个问题应该交给您的法律部门，因为它本质上不是计算机问题。您已经知道这两种方法都足够简单，尽管显然 PDF 保留方法在空间方面的成本更高。如果你在一个监管适度的行业工作，我相当肯定任何称职的审计员都不会接受你的系统作为电子记录的有效保留系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:22:03.900

有几种方法可以生成 PDF 文件：

*   [FPDF](http://www.fpdf.org/)
*   [TCPDF](http://www.tcpdf.org/)
*   [原生 PHP PDF](http://php.net/manual/en/book.pdf.php)

就存储 PDF 而言，维护记录具有良好的商业意义。它可能会占用空间，但现在空间很便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T22:23:38.470

主意：

您可以使用 html 创建 pdf

[使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

关于签名，您提到的签名“插件”使用画布。您可以将内容导出为 base64 png 并将其放置在表单上。然后将表单提交给php，php将其转换为pdf

# eclipse - 如何增加 Eclipse 控制台中每行打印的字符数？

> ID：10200003
> 
> 赞同：4
> 
> 时间：2012-04-17T22:16:29.977
> 
> 标签：eclipse, console, word-wrap

当我在 Eclipse (v3.6.2) 控制台中右键单击并导航到“首选项”时，我尝试将“最大字符宽度”选项设置为较高的数字，例如 800 或 1000，以防止 Eclipse 将一行输出拆分为两条线，除非那条线真的很大。

但这似乎没有可预测的效果。一些曾经被分割的线不再被分割，但其他一些总长度较短的线仍然被分割。这很令人困惑，我想知道是否有一种明确的方法可以强制 Eclipse 打印行而不拆分它们，最多达到最大字符数。（我原以为这是我在“首选项”中更改的内容，但它不可能，因为输出不会统一更改。）

这是一些示例输出，仅在 Eclipse 的 PyDev 中打印随机 7x4 NumPy 数组的行：

**之前**（未选中“固定宽度控制台”且“最大字符宽度”行变灰。）

```
[ 1\.         0\.         0\.         0\.         1\.         0\.        -0.0999221]
[ 1\.          0\.          0\.          0\.          0\.          1.
 -1.49427733]
[ 0\.          1\.          0\.          0\.          0\.          1.
  0.16480027]
[ 0\.          0\.          1\.          0\.          1\.          0.
 -1.37390928] 
```

**之后**（选中“固定宽度控制台”并将“最大字符宽度”设置为 800。）

```
[ 1\.          0\.          0\.          0\.          1\.          0.
 -1.04662609]
[ 1\.          0\.          0\.          0\.          0\.          1.
 -0.57820969]
[ 0\.         1\.         0\.         0\.         0\.         1\.        -1.1370211]
[ 0\.          0\.          1\.          0\.          1\.          0.
  1.05934584] 
```

如您所见，它似乎有些不确定。部分原因是我创建的数组是随机的，但即便如此，为什么小数位数的微小差异会导致这种变化？

我还将“显示的标签宽度”字段设置为 4，甚至 2，上面的输出没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T12:40:40.143

我在这里检查了它，这对我来说似乎是正确的......考虑到一个标签被认为是一个字符，而不是 4 个空格——不管你显示的标签宽度如何。

如果这是您的问题，您可能想向 eclipse.org 上的 Eclipse 人员报告此问题，看看是否有人愿意解决它——或者可能自己做，因为它都是开源的；）

# c# - Active Directory 用户密码更改错误

> ID：10200004
> 
> 赞同：0
> 
> 时间：2012-04-17T22:16:36.113
> 
> 标签：c#, active-directory

嗨，我正在尝试重置 Active Directory 用户的密码，但出现错误，以下是我的代码：

```
 public string ChangePassword(string Identity,string OldPassword, string Password)
 {
      string success = "Success";
      try
      {

          DirectoryEntry UserEntry = null;
          DirectoryEntry entry = new DirectoryEntry("LDAP://.../DC=Domain,DC=COM", Identity, OldPassword);

          DirectorySearcher search = new DirectorySearcher(entry);
          SearchResult resultsearch = search.FindOne();
          if (resultsearch == null)
          {
              success = "User Not Found In This Domain";
          }
          else
          {

              success = "find";
              UserEntry = resultsearch.GetDirectoryEntry();
              UserEntry.Username = @"Domain\Administrator";
              UserEntry.Password = "password";
              UserEntry.AuthenticationType = AuthenticationTypes.None;

              if (UserEntry == null)
                  success = "User Not Found In This Domain";
              else
              {
                  try
                  {
                      success = UserEntry.Username.ToString();

    UserEntry.Invoke("ChangePassword", new object[] { OldPassword, Password });
                      UserEntry.CommitChanges();

                  }
                  catch (Exception ex)
                  {
                      success = ex.ToString();
                  }
              }
          }
      }
      catch (Exception ex)
      {
          success = ex.ToString();
      } 
```

所以我在**UserEntry.Invoke("ChangePassword", new object[] { OldPassword, Password });中遇到错误 UserEntry.CommitChanges();**

错误：

```
 System.Runtime.InteropServices.COMException (0x80020006): Unknown name.           (Exception from HRESULT: 0x80020006 (DISP_E_UNKNOWNNAME))
        at System.DirectoryServices.DirectoryEntry.Invoke(String methodName, Object[] args)
        at WebService.ChangePassword(String Identity, String OldPassword, String Password) in c:\inetpub\wwwroot\WebSite1\App_Code\WebService.cs:line 370 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:03:21.087

如果您使用的是 .NET Framework 3.5 或更高版本，下面的代码将解决问题。类定义被省略。

```
using System.DirectoryServices.AccountManagement;

public static string ChangePassword(string adminUser, string adminPassword,
    string domain, string container, string userName, string newPassword)
{
    try
    {
        PrincipalContext principalContext = 
            new PrincipalContext(ContextType.Domain, domain, container, 
                adminUser, adminPassword);
        UserPrincipal user = UserPrincipal.FindByIdentity(principalContext, userName);
        if (user == null) return "User Not Found In This Domain";

        user.SetPassword(newPassword);
        return user.Name;
    }
    catch (Exception ex)
    {
        return ex.Message;
    }
} 
```

用法：

```
ChangePassword(@"DOMAIN\Administrator", "password", "DOMAIN",
  "DC=Domain,DC=COM", userName, newPassword); 
```

编辑：为 .NET 2.0 框架添加了一个版本。

.NET 2.0 的更改密码方法：

```
public static string ChangePassword20(string adminUser, string adminPassword,
    string container, string domainController, string userName, string newPassword)
{
    const AuthenticationTypes authenticationTypes = AuthenticationTypes.Secure |
        AuthenticationTypes.Sealing | AuthenticationTypes.ServerBind;

    DirectoryEntry searchRoot = null;
    DirectorySearcher searcher = null;
    DirectoryEntry userEntry = null;

    try
    {
        searchRoot = new DirectoryEntry(String.Format("LDAP://{0}/{1}", 
            domainController, container), 
            adminUser, adminPassword, authenticationTypes);

        searcher = new DirectorySearcher(searchRoot);
        searcher.Filter = String.Format("sAMAccountName={0}", userName);
        searcher.SearchScope = SearchScope.Subtree;
        searcher.CacheResults = false;

        SearchResult searchResult = searcher.FindOne(); ;
        if (searchResult == null) return "User Not Found In This Domain";

        userEntry = searchResult.GetDirectoryEntry();

        userEntry.Invoke("SetPassword", new object[] { newPassword });
        userEntry.CommitChanges();

        return "New password set";
    }
    catch (Exception ex)
    {
        return ex.ToString();
    }
    finally
    {
        if (userEntry != null) userEntry.Dispose();
        if (searcher != null) searcher.Dispose();
        if (searchRoot != null) searchRoot.Dispose();
    }
} 
```

用法：

```
ChangePassword20(@"DOMAIN\Administrator", "password", "DC=Domain,DC=COM",
    "domainControllerName", "userName", "newPassword"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:02:30.333

一些事情：

*   您不应该在 上设置用户名、密码或 AuthN 类型`UserEntry`。
*   你的成功=`UserEntry.Username...`应该是`obj foo = UserEntry.NativeObject;`。如果通过了，你就有了一个有效的 DE。
*   你不需要在`CommitChanges()`这里打电话。
*   您将在用户而不是管理员的上下文中调用 ChangePassword。这将正确地通过`GetDirectoryEntry()`呼叫。

# java - 搜索查询并在 jtable 中显示结果

> ID：10200005
> 
> 赞同：0
> 
> 时间：2012-04-17T22:16:37.960
> 
> 标签：java, mysql, swing, jtable

我想执行一个搜索查询并将结果显示在`JTable`. 我有一个`JComboBox`用户可以选择要搜索的字段，例如*name*、*age*或*ID*。

这是我的代码。

```
try {
    Class.forName("com.mysql.jdbc.Driver");    
    String connectionUrl = "jdbc:mysql://localhost/db?" + "user=root&password=";
    con = DriverManager.getConnection(connectionUrl);
    Statement state = con.createStatement();

    ResultSet result = state.executeQuery("SELECT * FROM db.atelier where '" + 
        jComboBox1.getSelectedItem().toString() + "'='" +
        jTextField1.getText().toString() + "'");

    ResultSetMetaData resultMeta = result.getMetaData();

    while(result.next()){
        model.addRow(new Object[]{result.getObject(1),result.getObject(2)});      
        model.setDataVector(
            new Object[][]{{result.getObject(1),result.getObject(2)},{}},                           
            new Object[]{resultMeta.getColumnName(1),resultMeta.getColumnName(2)});
        }

    jPanel1.revalidate();
    model.fireTableDataChanged();
    this.repaint();
    state.close();
}
catch (SQLException e){
    System.out.println("SQL Exception: "+ e.toString());
}
catch (ClassNotFoundException cE){
    System.out.println("Class Not Found Exception: "+ cE.toString());
}

con=null; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:38:51.600

应删除组合框所选项目周围的单引号，以使它们成为字段名称而不是字符串文字。`?`此外，在 SQL 字符串中替换文本字段作为附加参数给出的 PreparedStatement更好。这会转义在文本字段中输入的单引号（和反斜杠等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:26:13.307

顺便说一句，您构建搜索查询的方式只会将您的应用程序暴露给 SQL 注入。

# iphone - 我的 UIImageView 中的大图像导致我的 UINavigationController 堆栈中的较低视图释放......我该如何解决这个问题？

> ID：10200016
> 
> 赞同：1
> 
> 时间：2012-04-17T22:17:53.877
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

这是我的问题的一些背景......使用 iOS 5 作为我的 iPhone 应用程序的目标，ARC 开启：

我有一个具有`UINavigationController`. 堆栈上有多个视图被推到顶部。显示的最终视图是`UIWebView`带有 Google 图片的网站，用户可以选择一张图片并将其发送回`UIImageView`导航堆栈中先前的视图。然后用户可以点击返回，然后在上一个视图上点击保存`UIBarButton`以将图像本地保存在他们的设备上。这是堆栈的样子：

> **MainView** -> **DetailsView**（保存`UIBarButton`在右上角）-> **ImageDisplayView** -> **WebView**（加载了 Google 图片网站）

问题是，当用户使用 Google 图片移动设备上的查看完整图片按钮从 Google 图片（比如说 5MB 的图片）中选择一个大图片时，会引发内存警告并释放其下方的视图。因此，当用户使用 Save 按钮返回 DetailsView 时，Save 按钮现在消失了。这是因为`didReceiveMemoryWarning`被称为。

所以我的问题是......

1.  为什么在嵌入式 UIWebView 中显示 5MB 图像时会调用内存警告？

2.  如何防止内存警告在我的导航堆栈中导致问题（如删除 UIBarButton 视图）较低？

3.  是否有任何提示/技巧，任何人都知道在 iPhone 应用程序中从 Google 图片手机正确获取全尺寸图片？

要自己尝试这个问题，请`UIWebView`在一个空白应用程序中创建一个，然后将 Google 图片网站加载到其中。将其安装在您的设备上（3GS 或更低版本会使问题出现得更快），然后将完整图像加载到浏览器中或从浏览器中加载出来……您最终会在调试控制台中收到警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:48:50.197

查看“响应 iOS 中的低内存警告”的 iOS 文档，其中指出*“视图控制器会自动清除当前不在屏幕上的所有视图”，* 还请查看“视图控制器生命周期”。您的视图控制器将收到 viewWillUnload: 和 viewDidUnload: 消息。下次需要时，您必须使用例如 loadView（如果不使用 Storyboard）重新创建视图。

具体回答您的问题：

1.  当需要内存但不可用时，会生成内存警告。即使需要一个字节也会触发警告——这取决于需要多少。
2.  视图*将*被删除；您有责任重新创建它们。如何重新创建它们取决于它们最初是如何创建的（以编程方式、通过 nib 文件、通过故事板）。
3.  似乎你得到的图像很好，但需要处理低内存警告。

# javascript - 表单验证错误后平滑滚动到页面脚本顶部

> ID：10200030
> 
> 赞同：1
> 
> 时间：2012-04-17T22:19:18.453
> 
> 标签：javascript, jquery, validation, function

我的表单很长，我想使用我的 jquery smooth-scroll-to-the-top-of-page 脚本向上滚动到页面顶部。

**如果验证脚本发现错误**，是否可以滚动到页面顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:41:08.647

只需让您的平滑滚动成为一个可以调用 onError 的函数，即

```
function SmoothScroll(){
 $('a.scrollToTop').click(function () {
   $('html, body').animate({
    scrollTop: 0
   }, 2500);
  return false;
 });
} 
```

和

```
 onError: function () {
        if ($('#input_2     input').hasClass('error-input')) {
            $('#r2 div, #r2 input').css('background-color', '#C1272D').css('color', '#FFF');
            $("#error-div").show();
            SmoothScroll();
        }
    } 
```

# iphone - 裁剪的 UIButton 标题

> ID：10200032
> 
> 赞同：7
> 
> 时间：2012-04-17T22:19:22.497
> 
> 标签：iphone, ios, uibutton, uilabel

我正在为 UIButton 的标题使用自定义字体。它可以工作，除非使用这种特殊字体，第一个字符的一部分被剪裁了。例如：

![在此处输入图像描述](../Images/44813ea6d5d2d34bd259991caf4bce4f.png)

我尝试设置 contentEdgeInsets 和 titleEdgeInsets 并且似乎无法让它不被剪裁。我还尝试将 button.titleLabel.clipsToBounds 属性设置为 NO；

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-24T10:47:34.913

尽管 Jeshua 的解决方案效果很好，但在我看来它并不是最佳的。我宁愿推荐子类 UIButton 并覆盖它的`layoutSubviews`方法。

```
-(void)layoutSubviews
{
    [super layoutSubviews];

    CGRect frame = self.titleLabel.frame;
    frame.size.height = self.bounds.size.height;
    frame.origin.y = self.titleEdgeInsets.top;
    self.titleLabel.frame = frame;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T00:01:34.583

所以我最终将 UIButton 标题设置为 nil，并将我自己的 UILabel 作为子视图添加到 UIButton。我将 UILabel 框架设置为与按钮相同的大小，并将其设置为居中。

我敢肯定，这不是最优雅的解决方案，但它可以完成工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T22:45:43.047

在我看来，您的内容很时髦。如果标签的框架不能直接访问，`[button setContentHorizontalAlignment:UIControlContentHorizontalAlignmentCenter];`请尝试修复水平对齐问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-08T12:38:07.540

上述答案的 Swift 代码：

```
override func layoutSubviews() {
    super.layoutSubviews()
    titleLabel?.frame = CGRect(x: bounds.origin.x, y: titleEdgeInsets.top, width: frame.width, height: bounds.size.height)
} 
```

# java - “在Java中找不到符号符号：构造函数......”？

> ID：10200034
> 
> 赞同：3
> 
> 时间：2012-04-17T22:19:35.630
> 
> 标签：java, constructor, syntax-error

我有一个定义如下的类...

```
public class df {
    String dt;
    String datestring;

    public String df(String dtstring) throws Exception {
        dt=dtstring;
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
        Date inpdate = formatter.parse(dt);
        datestring = formatter.format(inpdate);
        Date outpdate = formatter.parse(datestring);
        SimpleDateFormat newformatter = new SimpleDateFormat("dd/MM/yyyy");
        datestring = newformatter.format(outpdate);
        return datestring;
    }
} 
```

我按如下方式创建此类的实例，其中`rsnpos.getString(1)`包含 yyyy-MM-dd 格式的日期（例如 2010-01-01）...

```
new df(rsnpos.getString(1)) 
```

在编译期间，我收到以下错误...

```
cannot find symbol
symbol  : constructor df(java.lang.String)
location: class df 
```

我不明白为什么会这样，因为我已经定义了一个构造函数，如我的代码中所示。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:20:41.303

```
public class df
     {
 String dt;
 String datestring;
 public df(String dtstring) throws Exception
        {
                dt=dtstring;
                SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
                Date inpdate = formatter.parse(dt);
                datestring = formatter.format(inpdate);
                Date outpdate = formatter.parse(datestring);
                SimpleDateFormat newformatter = new SimpleDateFormat("dd/MM/yyyy");
                datestring = newformatter.format(outpdate);
        }
    } 
```

请参阅[http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:26:07.753

那不是构造函数...（构造函数具有*隐式*的“返回类型”，即类的类型）。它有一个*显式*的返回类型，因此不是构造函数，而是一个名为 的普通方法`df`。

因此，当用作 时它是无效的`new df(...)`，这正是错误消息所说的。另一方面，由于默认的无参数构造函数和*方法*`new df().df("x")`，它仍然会“工作” 。 *`String df(String)`*

 *请注意将其更改为构造函数的更新：

```
public class df 
{

  String dt;
  String datestring;
  // Remove return type (and keep matched name) to make it a constructor.
  public df(String dtstring) throws Exception
  {
    dt=dtstring;
    ...
    datestring = newformatter.format(outpdate);
    // Constructors cannot "return"
    // return datestring;
  }

} 
```

请处理变量名和命名约定以及可变性 redux :-)*

# c# - 用于输入项目列表的 wpf 控件，类似于 yahoo 或 facebook 发送到文本框

> ID：10200038
> 
> 赞同：0
> 
> 时间：2012-04-17T22:19:51.670
> 
> 标签：c#, wpf

我正在寻找一个 wpf 控件来输入类似于您在 yahoo 邮件或 facebook 中输入地址的方式的项目列表。

它允许您输入名称，显示匹配列表，一旦您选择一个，它会显示所选项目，并在其周围显示一个框。添加每个项目后，它们被视为单个条目，允许您删除条目或编辑条目。

实际上，我只是在堆栈溢出时在此处输入了此帖子的标签，并且它们执行了我正在寻找的相同类型的条目。

我正在寻找任何类似的 wpf 控件来帮助我入门，但我找不到任何东西。谁能指出我类似的控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:23:51.310

[Extended WPF Toolkit](http://wpftoolkit.codeplex.com/)`TokenizedTextBox`中的就是这样一个控件，但它是从最新版本（1.6.0.0）中删除的。不过它位于 beta 的*Main*分支中，因此您可以尝试并在使用时提供反馈。

# c# - 反序列化不同Json.Net lib生成的Json数据

> ID：10200047
> 
> 赞同：0
> 
> 时间：2012-04-17T22:20:17.567
> 
> 标签：c#, windows-phone-7, xna, json.net

使用 Json.Net，您能否反序列化在不同 Json.Net 库中生成的 Json 数据（我使用的是 Json.Net 的 .Net4 和 windows phone 库）？这是我到目前为止所拥有的：

我有一个在 XNA (.Net 4) 中创建的地图编辑器，它可以使用 Json.Net (for .Net) 序列化和反序列化 Json 数据。我创建了一个结构来存储数据并指定我想要序列化的数据属性，如下所示：

```
[JsonObject(MemberSerialization.OptIn)]
public struct LevelData
{
    [JsonProperty(PropertyName = "RowCount")]
    private int RowCount;

    [JsonProperty(PropertyName = "ColCount")]
    private int ColCount;

    [JsonProperty(PropertyName = "NodeSize")]
    private int NodeSize;

    [JsonProperty(PropertyName = "LevelNodes")]
    private List<Node> LevelNodes;

    public LevelData(int rowCount, int colCount, int nodeSize, List<Node> nodes)
    {
        RowCount = rowCount;
        ColCount = colCount;
        NodeSize = nodeSize;
        LevelNodes = nodes;
    }
} 
```

而Node类如下：

```
[JsonObject(MemberSerialization.OptIn)]
public class Node
{
    [JsonProperty(PropertyName = "ID")]
    private int mId;

    [JsonProperty(PropertyName = "Position")]
    private Vector2 mPosition;

    [JsonProperty(PropertyName = "Type")]
    private NodeType mType;

    [JsonProperty(PropertyName = "Neighbours")]
    private List<int> mNeighbours;

    ....
} 
```

我还有一个 windows phone xna 游戏，它读取从地图编辑器创建的 Json 数据，也使用 Json.Net（适用于 windows phone）。这个游戏有LevelData和Node，和Map Editor的struct和class完全一样。

Json.Net 为 .Net 4 和 windows phone 提供了不同的库。但是，它们似乎没有相同的功能。windows phone 游戏读取地图编辑器创建的 json 数据时，反序列化数据失败，报错如下：

```
Error getting value from 'mRowCount' on 'LevelData'. 
```

在调试窗口中打印出以下内容：

```
 A first chance exception of type 'System.FieldAccessException' occurred in mscorlib.dll
 A first chance exception of type 'Newtonsoft.Json.JsonSerializationException' occurred in Newtonsoft.Json.dll
 A first chance exception of type 'Newtonsoft.Json.JsonSerializationException' occurred in Newtonsoft.Json.dll 
```

我可以通过使成员变量公开而不是私有来解决这个问题。但随后它抱怨它不识别 Vector2：

```
Error converting value "12, 12" to type 'Microsoft.Xna.Framework.Vector2'. Line 8, position 27. 
```

在调试窗口中打印出以下内容：

```
A first chance exception of type 'System.Exception' occurred in Newtonsoft.Json.dll
A first chance exception of type 'Newtonsoft.Json.JsonSerializationException' occurred in Newtonsoft.Json.dll 
```

Map Editor 创建的 Json 数据在哪里：

```
{
    "RowCount": 20,
    "ColCount": 20,
    "NodeSize": 25,
    "LevelNodes": [
        {
            "ID": 1,
            "Position": "12, 12",
            "Type": 1,
            "Neighbours": [
                2,
                21
            ]
        }
    ],
    "Buildings": []
} 
```

编辑：这是我序列化和反序列化数据的方式。

```
String json = Json.ConvertToJson<LevelData>(levelData);

public static class Json
{
    // Serialize Object to Json
    public static string ConvertToJson<T>(T obj)
    {
        return JsonConvert.SerializeObject(obj, Formatting.Indented);
    }

    public static T ConvertFromJson<T>(string json)
    {
        T result = JsonConvert.DeserializeObject<T>(json);

        return result;
    }
} 
```

请注意：我可以在地图编辑器（.Net）中序列化和反序列化 json 就好了，它支持私有 json 属性和 Vector2。问题是当我在 windows phone 应用程序中反序列化在地图编辑器中生成的 json 数据时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:16:52.647

你可以尝试做的是为 Vector2 类型引入你自己的转换器；

```
[JsonObject(MemberSerialization.OptIn)]
public class Node {
  ...

  [JsonConverter(typeof(Vector2Converter))]
  public Vector2 Position { get; set; }

  ...
} 
```

`Vector2Converter`是从 Json.Net 的`JsonConverter`.

```
public class Vector2Converter : JsonConverter {
  public override bool CanConvert(Type objectType) {
    return (objectType == typeof(Vector2));
  }

  public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
    return serializer.Deserialize<Vector2>(reader);
  }

  public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)  {
    // Implement this if you're serialising back into JSON
    throw new NotImplementedException();
  }
} 
```

我没有在`Vector2`s 的特定情况下尝试过这个，所以不能确认它肯定会开箱即用。如果它不在您的`ReadJson`实现中，您可以开始考虑`Value`使用`JsonReader`. 这将返回一个您可以转换为其他类型并可能使用其中的数据`object`创建新的类型。`Vector2`如果这不起作用，您可能需要研究更复杂的`JsonConverter`情况，您对阅读器上的标记做出反应（`TokenType`等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T16:25:16.227

对于未来的观众在序列化和反序列化 Vector2 或其他类似对象时遇到问题的更完整的答案。我在直接 Windows 中遇到问题，而不是像 OP 这样的 WinPhone。

可以在序列化对象本身而不是需要序列化的每个 Vector2 属性上设置自定义 Vector2 反序列化器，如下所示：

```
var settings = new JsonSerializerSettings();
settings.Converters.Add(new Vector2Converter());
YourType yourObj = JsonConvert.DeserializeObject<YourType>(fileContents, settings); 
```

这使我们不必装饰每个 Vector2 属性。

此外，我正在使用的转换器的完整实现，实现了读写，是：

```
public class Vector2Converter : JsonConverter
{
    public override bool CanConvert(Type objectType) {
        return (objectType == typeof(Vector2));
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) {
        JObject jsonObject = JObject.Load(reader);
        var properties = jsonObject.Properties().ToList();
        return new Vector2
        {
            X = (float)properties[0].Value,
            Y = (float)properties[1].Value
        };
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer) {
        Vector2 v = (Vector2)value;
        writer.WriteStartObject();
        writer.WritePropertyName("X");
        serializer.Serialize(writer, v.X);
        writer.WritePropertyName("Y");
        serializer.Serialize(writer, v.Y);
        writer.WriteEndObject();
    }
} 
```

# javascript - 是否可以在 OpenLayers 中更改弹出窗口的 HTML？

> ID：10200048
> 
> 赞同：2
> 
> 时间：2012-04-17T22:20:17.660
> 
> 标签：javascript, openlayers

我正在尝试将“固定”功能集成到我的 OpenLayers 弹出窗口中。现在，当用户单击我放置在弹出窗口中的“pin”图像时，我希望源在`pinned.png`图像和`unpinned.png`图像之间切换。

我正在尝试这样做：

```
var pHtml = marker.feature.data.popupContentHTML;
marker.feature.data.popupContentHTML = pHtml.replace("pinned.png", "unpinned.png"); 
```

这似乎改变了 popupContentHTML 变量（因为当我 console.log 它时，“pinned.png”已被替换为“unpinned.png”作为标记），但屏幕上的 HTML 没有改变。

有没有更简单的方法可以做到这一点，或者有没有办法刷新弹出窗口以显示新的 popupContentHTML？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T06:38:31.427

HTML 内容有一个 setter 函数，它还更新弹出窗口的 DOM 元素。它被称为[`setContentHTML`](http://dev.openlayers.org/docs/files/OpenLayers/Popup-js.html#OpenLayers.Popup.setContentHTML)。

# android - 滑动键盘时让webview保持相同的内容？

> ID：10200050
> 
> 赞同：0
> 
> 时间：2012-04-17T22:20:37.753
> 
> 标签：android, webview

当用户滑动硬键盘时，我的活动将重新创建，活动中的网络视图也将重新加载页面。由于我们应用程序框架的限制，我无法更改 android manifest 中的 onConfigChange。我想找到一种方法，让活动重新创建，同时保持 webview 和以前一样（不要重新加载页面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:23:26.793

`onDestroy()`将能够保存您的应用程序被销毁时的 Parcelable 数据，并且`onResume()`应该能够重建它。如果通过某种魔法您能够保存整个页面状态并重新加载它，那么这就是您采用的路线。否则，您应该考虑限制较少的框架。

# java - 使用 jquery 在文本字段中显示 servlet 结果

> ID：10200053
> 
> 赞同：1
> 
> 时间：2012-04-17T22:20:50.337
> 
> 标签：java, javascript, jquery, jsp, servlets

**JSP**

```
<div id="feedback" class="statusbar"></div> 
```

**在 jQuery 中**

```
$("#categorySave").click(function(){        
$getCode = document.getElementById("catCode").value;
$getName = document.getElementById("catName").value;
$getDesc = document.getElementById("catDesc").value;
$getDepID = $("select option:selected").val();

$(':text').val('');

$('#feedback').html('<img src="images/loading.gif"/>Processing....');

$.post("CategoryOperation", {
    catCode:$getCode,
    catName:$getName,
    catDesc:$getDesc,
    catID:$getDepID
}, function(html) {
    $("#feedback").html(html);         
});
}); 
```

**在 Servlet 中（CategoryOperation）**

```
out.println("<div>Record Inserted!</div>"); 
```

当我按下保存按钮 (id=categorySave) 时，它会在插入记录时在 div (id=feedback) 中显示消息。上面的代码工作正常。但我现在想要一点改变，当成功插入记录时，它会在文本字段而不是 div（id=feedback）上显示结果。

假设，CategoryOperation（Servlet）处理后打印以下两个，

```
out.println("Record Inserted!");
out.println("1"); 
```

**现在我想分别在文本字段**中显示上述两个输出，它们具有以下 ID

```
id="Result"
id="Key" 
```

在上面的 jquery 代码片段中，我该如何通过编写以下代码或任何其他简单的方法来做到这一点

```
$('#Result').val();
$('#Key').val(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:12:33.450

您需要让 servlet 返回可解析的对象格式而不是纯文本，例如 JSON 或 XML。jQuery 对两者都有内置支持。

这是一个 JSON 示例：

```
String json = String.format("{\"result\": \"%s\", \"key\": \"%s\"}", "Record Inserted!", "1");
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().write(json); 
```

*（[谷歌 Gson](http://code.google.com/p/google-gson/)可能会使 JSON 格式化更容易）*

需要进行如下处理：

```
function(data) {
    $("#Result").val(data.result);
    $("#Key").val(data.key);
} 
```

### 也可以看看：

*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)

# jquery - 从值 jquery 中删除标签

> ID：10200056
> 
> 赞同：1
> 
> 时间：2012-04-17T22:21:16.603
> 
> 标签：jquery

我有：

```
<input type="hidden" name="some[]" value="some1">
<input type="hidden" name="some[]" value="some2"> 
```

如何使用 jquery 删除值为“some1”的输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:22:59.390

```
$('input[value="some1"]').remove(); 
```

应该管用。

曾经有一段时间，`""`周围`some1`在某些浏览器中引起了问题，我不确定是否仍然如此。如果它不起作用，请去掉双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:23:19.397

`$('input[value=some1]').remove()`应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:25:30.363

jQuery 使用 CSS 选择器，在这里[W3 CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)你可以检查什么是你需要的选择器。

所以，这应该工作：

`$('input[value="some1"]').remove();`

# ruby - Splat 作为数组或字符串取决于 Ruby 版本？

> ID：10200058
> 
> 赞同：0
> 
> 时间：2012-04-17T22:21:30.640
> 
> 标签：ruby, sinatra, ruby-1.9

我的 Sinatra 应用程序中有这个过滤器：

```
before '/:locale/*' do
  # stuff...
  request.path_info = params[:splat]
end 
```

换句话说，我只想获取 URL 的区域设置部分，然后让应用程序继续运行，就好像它不存在一样。（当然在渲染视图时使用语言环境。）

这在 Ruby 1.8.7 下可以正常工作，但在 >=1.9 时会中断，因为 splat 现在是一个包含一个项目的数组，而不仅仅是一个字符串。我不得不使用`params[:splat].first`它来使它工作。

我的问题只是这种差异来自哪里。它只是一个 Ruby 1.8 与 1.9 的东西吗？或者 Sinatra 是否以某种方式参与其中？

只是希望将来能够更轻松地修复这种事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:50:29.527

Sinatra 文档似乎表明 params[:splat] 可以是字符串或数组，因此您可以执行以下操作来处理任何一种情况：

```
request.path_info = [*params[:splat]].first 
```

我在这里演示：

```
$ cat splat.rb
[ { :splat => [ "/foo" ] }, { :splat => "/foo" } ].each do |params|
    path_info = [*params[:splat]].first
    puts "#{path_info} (#{path_info.class})"
end
$ ruby1.8 splat.rb
/foo (String)
/foo (String)
$ ruby1.9.1 splat.rb
/foo (String)
/foo (String) 
```

# sml - 如何在 SML 的 let 绑定中编写相互递归的函数？

> ID：10200059
> 
> 赞同：7
> 
> 时间：2012-04-17T22:21:38.800
> 
> 标签：sml, smlnj

我想做这样的事情：

```
fun f () =
    let
      fun a() = b()
    and
      fun b() = a()
    in
      ()
    end 
```

其中 a 和 b 是合理的相互递归函数。但是，这给出了：

```
Error: syntax error: replacing  AND with  SEMICOLON
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T22:29:34.583

SML 中相互递归函数的声明由一个`fun ... and ...`块标记：

```
fun f () =
  let
    fun a() = b()
    and b() = a() (* There is no 'fun' keyword before b() *)
  in
    ()
  end 
```

# c - 冲突的类型和先前的函数声明？

> ID：10200061
> 
> 赞同：0
> 
> 时间：2012-04-17T22:21:46.787
> 
> 标签：c

在使用 make 编译操作系统时，我从 make 中得到了一个我不理解的奇怪错误。

从制作：

```
source/paging.c:179:6: error: conflicting types for ‘page_fault’
headers/paging.h:68:6: note: previous declaration of ‘page_fault’ was here
make: *** [obj/paging.o] Error 1 
```

有问题的功能是以下功能。我没有包含 paging.c 的整个文件，因为它非常大，paging.h tbh 也是如此，但是如果您想查看头文件，我将发布其余部分。

分页.c：

```
....
....
void page_fault(registers_t regs)
{
// A page fault has occurred.
// The faulting address is stored in the CR2 register.
u32int faulting_address;
asm volatile("mov %%cr2, %0" : "=r" (faulting_address));

// The error code gives us details of what happened.
int present   = !(regs.err_code & 0x1); // Page not present
int rw = regs.err_code & 0x2;           // Write operation?
int us = regs.err_code & 0x4;           // Processor was in user-mode?
int reserved = regs.err_code & 0x8;     // Overwritten CPU-reserved bits of page entry?
int id = regs.err_code & 0x10;          // Caused by an instruction fetch?

// Output an error message.
monitor_write("Page fault! ( ");
if (present) {monitor_write("present ");}
if (rw) {monitor_write("read-only ");}
if (us) {monitor_write("user-mode ");}
if (reserved) {monitor_write("reserved ");}
monitor_write(") at 0x");
monitor_write_hex(faulting_address);
monitor_write("\n");
PANIC("Page fault");
} 
```

分页.h：

```
....
....
void page_fault(registers_t *regs);
....
.... 
```

注意：这是来自教程（所以它应该可以工作，但是在一个函数拼写不正确之前，我遇到了提供的源代码的问题）。

知道为什么make会抱怨吗？

谢谢。

在没有 * 的情况下出错：

```
obj/interrupt.o: In function `isr_common_stub':
asem/interrupt.s:(.text+0x1c9): undefined reference to `isr_handler'
obj/interrupt.o: In function `irq_common_stub':
asem/interrupt.s:(.text+0x1ee): undefined reference to `irq_handler'
obj/main.o: In function `main':
main.c:(.text+0x6e): undefined reference to `placement_address'
obj/descriptor_tables.o: In function `init_descriptor_tables':
descriptor_tables.c:(.text+0x23): undefined reference to `interrupt_handlers'
obj/timer.o: In function `init_timer':
timer.c:(.text+0x30): undefined reference to `register_interrupt_handler'
obj/paging.o: In function `initialise_paging':
paging.c:(.text+0x298): undefined reference to `kmalloc'
paging.c:(.text+0x2cc): undefined reference to `kmalloc_a'
paging.c:(.text+0x328): undefined reference to `placement_address'
paging.c:(.text+0x341): undefined reference to `register_interrupt_handler'
obj/paging.o: In function `get_page':
paging.c:(.text+0x3da): undefined reference to `kmalloc_ap'
obj/initrd.o: In function `initialise_initrd':
initrd.c:(.text+0x1f1): undefined reference to `kmalloc'
initrd.c:(.text+0x2f5): undefined reference to `kmalloc'
initrd.c:(.text+0x402): undefined reference to `kmalloc'
obj/task.o: In function `initialise_tasking':
task.c:(.text+0x24): undefined reference to `kmalloc'
task.c:(.text+0x9a): undefined reference to `kmalloc_a'
obj/task.o: In function `fork':
task.c:(.text+0x2b3): undefined reference to `clone_directory'
task.c:(.text+0x2c2): undefined reference to `kmalloc'
task.c:(.text+0x314): undefined reference to `kmalloc_a'
obj/syscall.o: In function `initialise_syscalls':
syscall.c:(.text+0x8b): undefined reference to `register_interrupt_handler'
make: *** [kern/kernel] Error 1 
```

中断.s：

```
....
; In isr.c
extern irq_handler
....
....
; In isr.c
extern isr_handler 
```

main.c: .... extern u32intplacement_address; ……

描述符表.c：

```
void init_descriptor_tables()
{

// Initialise the global descriptor table.
init_gdt();
// Initialise the interrupt descriptor table.
init_idt();
// Nullify all the interrupt handlers.
memset(&interrupt_handlers, 0, sizeof(isr_t)*256);
} 
```

计时器.c：

```
void init_timer(u32int frequency)
{
// Firstly, register our timer callback.
register_interrupt_handler(IRQ0, &timer_callback);

// The value we send to the PIT is the value to divide it's input clock
// (1193180 Hz) by, to get our required frequency. Important to note is
// that the divisor must be small enough to fit into 16-bits.
u32int divisor = 1193180 / frequency;

// Send the command byte.
outb(0x43, 0x36);

// Divisor has to be sent byte-wise, so split here into upper/lower bytes.
u8int l = (u8int)(divisor & 0xFF);
u8int h = (u8int)( (divisor>>8) & 0xFF );

// Send the frequency divisor.
outb(0x40, l);
outb(0x40, h);
} 
```

分页.c：

```
....
void initialise_paging()
{
// The size of physical memory. For the moment we 
// assume it is 16MB big.
u32int mem_end_page = 0x1000000;

nframes = mem_end_page / 0x1000;
frames = (u32int*)kmalloc(INDEX_FROM_BIT(nframes));
memset(frames, 0, INDEX_FROM_BIT(nframes));

// Let's make a page directory.
kernel_directory = (page_directory_t*)kmalloc_a(sizeof(page_directory_t));
current_directory = kernel_directory;

// We need to identity map (phys addr = virt addr) from
// 0x0 to the end of used memory, so we can access this
// transparently, as if paging wasn't enabled.
// NOTE that we use a while loop here deliberately.
// inside the loop body we actually change placement_address
// by calling kmalloc(). A while loop causes this to be
// computed on-the-fly rather than once at the start.
int i = 0;
while (i < placement_address)
{
    // Kernel code is readable but not writeable from userspace.
    alloc_frame( get_page(i, 1, kernel_directory), 0, 0);
    i += 0x1000;
}
// Before we enable paging, we must register our page fault handler.
register_interrupt_handler(14, page_fault);

// Now, enable paging!
switch_page_directory(kernel_directory);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:24:35.350

对于同名的函数，您有两个不同的签名。请注意，第一个声明采用 a `registers_t`，但第二个声明采用 a `registers_t*`。

```
/* paging.h */
void page_fault(registers_t *regs);

/* paging.c */
void page_fault(registers_t regs) 
```

根据变量的用法，函数签名`paging.c`是正确的`regs`，因此更改`.h`文件中的声明以匹配。

它真的很臭，但我之前在分布式源代码中遇到过这样的问题（尤其是在学校......）。不确定甚至无法编译的代码如何像这样进入野外，但它确实发生了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T22:26:14.257

函数签名不匹配：

文件中的声明`.h`：

```
void page_fault(registers_t *regs) 
```

文件中的定义`.c`：

```
void page_fault(registers_t regs) 
```

更正头文件中的签名以匹配文件中的签名`.c`（即删除`*`from `paging.h`）。

# javascript - 为什么不同的浏览器会生成不同的字符串？

> ID：10200062
> 
> 赞同：2
> 
> 时间：2012-04-17T22:21:55.767
> 
> 标签：javascript, string

我通过连接前 100 个 unicode 字符来构造一个字符串，就像这样

```
var str = "";
for (var i = 0; i < 100; i++) {
    str += String.fromCharCode(i);
} 
```

在 Firefox 和 Chrome 中，`str`具有我期望的值，即

`!"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abc`

另一方面，Internet Explorer 和 Opera 返回空字符串。

[您可以在 jsFiddle 上的浏览​​器中对其进行测试。](http://jsfiddle.net/xLX4K/)

是什么导致了这种行为差异？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T22:27:11.753

第一个 Unicode 代码点代表 NUL 字符，这可能使某些浏览器认为它们已到达字符串结尾（遵循 C 约定）。

# mysql - 表的自增值能否小于最大id？

> ID：10200065
> 
> 赞同：0
> 
> 时间：2012-04-17T22:22:11.827
> 
> 标签：mysql, auto-increment

如果是这样，当它到达一个已经在使用的 id 时会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:23:19.547

1.  不，它不能（尽管对于 innodb，该值可能小于服务器重新启动之前的值，但仍大于表中的最大值）
2.  ~~您收到警告并且无法在表中插入任何其他内容~~（我将其读作一个问题“当自动增量达到最大可能值时会发生什么”）

# c# - 如何将 JSON 反序列化为仅“内置”类型

> ID：10200066
> 
> 赞同：4
> 
> 时间：2012-04-17T22:22:22.793
> 
> 标签：c#, json, deserialization

首先，很*抱歉*再问一个关于 JSON 反序列化的问题。但是，我还没有看到这个问题的答案。

我想将 JSON 反序列化到`T`递归`T`定义为：

*   `Dictionary<string, T>`
*   `T[]`
*   `string`
*   原始类型
*   `(object)T`（盒装）

我知道那里的许多JSON库都允许指定反序列化类型，但是根据我的经验，一些自定义类型`JObject`（`JsonObject`一定深度）。这似乎很简单，因为类型几乎与 JavaScript 一对一映射。

**编辑**

理想情况下，我希望 JSON 是“干净的”，即没有特殊字段（“__type”等）来帮助反序列化。它应该是来自 JavaScript 的直接映射：`JObject`-> `IDictionary<string, T>`、`JArray`->`T[]`等等。

同时，我正在使用 FParsec 解析器和手动序列化器。它工作得很好，但我认为可能已经有一些东西了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:51:48.247

我不太确定您所说的“我想将 JSON 反序列化为 T，其中 T 被递归定义为”是什么意思，我的假设是您希望能够序列化和反序列化上面列出的任何类型和任何组合。

我的经验表明，`System.Runtime.Serialization.Json`具体可用的标准 DotNet 库`DataContractJsonSerializer`对于您描述的工作来说已经足够了，并且将成功地处理您提到的所有类型（没有元数据描述），而不是一种；T 的装箱对象。但是我的假设是，没有库能够在不提供元数据的情况下处理 T 的装箱对象（它怎么能？它对您的对象一无所知）

这是我用来在我的应用程序中提供序列化的一些代码

```
public class JSONSerializer<T>
{

    public static string Serialize(T obj)
    {
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
        using (MemoryStream stream = new MemoryStream()) {
            serializer.WriteObject(stream, obj);
            return Encoding.Default.GetString(stream.ToArray());
        }
    }

    public static T Deserialize(string json)
    {
        DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
        using (MemoryStream stream = new MemoryStream(Encoding.Default.GetBytes(json))) {
            return (T)serializer.ReadObject(stream);
        }
    }

} 
```

PS：另请注意，DataContractSerializer 执行“纯”序列化和反序列化而不使用任何代理类型对象（至少不在输出或输入中，可能在内部某处）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T07:48:11.990

您不能使用泛型。这是因为泛型必须在编译时剥离为一种类型。但是 JSON 对象或数组值应该是任何 JSON 类型，这是冲突的。

但如果你愿意，你可以使用`object`然后施放它。JSON 数组是`object[]`，JSON 对象是`Dictionary<string,object>`. 但这只是您提到的自定义类型的一种变体。

# jquery - jQuery：无需使用图像且可免费用于商业用途的易于调整的工具提示

> ID：10200067
> 
> 赞同：2
> 
> 时间：2012-04-17T22:22:24.160
> 
> 标签：jquery, tooltip, jquery-tooltip

是否有一个不使用图像的 jquery 工具提示插件，它是免费的，可以用于商业用途并且看起来很漂亮（至少不只是像一个正方形，而是像一个气泡）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:24:16.437

看看 qTip：http: [//craigsworks.com/projects/qtip/](http://craigsworks.com/projects/qtip/)

qTip2 也已经推出...

# c# - LINQ 匿名类型、自定义类、ObservableCollection 和 WPF - 它是如何挂在一起的？

> ID：10200068
> 
> 赞同：0
> 
> 时间：2012-04-17T22:22:30.227
> 
> 标签：c#, wpf, linq, xaml, observablecollection

我有一个非常简单的类，我用一个 LINQ 查询填充它——一切都很好；

```
public class CatSummary : INotifyPropertyChanged
{
    private string _catName;
    public string CatName
    {
        get { return _catName; }
        set { if (_catName != value) { _catName = value; NotifyPropertyChanged("CatName"); } }
    }

    private decimal _catAmount;
    public decimal CatAmount
    {
        get { return _catAmount; }
        set { if (_catAmount != value) { _catAmount = value; NotifyPropertyChanged("CatAmount"); } }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    // Used to notify Silverlight that a property has changed.
    private void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));

            //MessageBox.Show("NotifyPropertyChanged: " + propertyName);

        }
    }

} 
```

LINQ 位；

```
 var myOC = new ObservableCollection<CatSummary>();

        var initialQuery = BoughtItemDB.BoughtItems
                         .GroupBy(item => item.ItemCategory)
                         .Select(x => new CatSummary
                          { 
                              CatName = x.Key, 
                              CatAmount = x.Sum(amt => amt.ItemAmount)
                          });

        foreach (var item in initialQuery) myOC.Add(item); 
```

我正在尝试将我的 WPF 控件绑定到下面 XAML 中的自定义类；

```
<ListBox x:Name="boughtItemsListBox" ItemsSource="{Binding CatSummary}" Margin="5,27,-35,100" Width="450" Height="371" Grid.ColumnSpan="2" Grid.RowSpan="2">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid HorizontalAlignment="Stretch" Width="440">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="{Binding CatName, StringFormat=g}" TextWrapping="Wrap"  FontSize="{StaticResource PhoneFontSizeSmall}" VerticalAlignment="Top"/>
                <TextBlock Grid.Column="1" Text="{Binding CatAmount, StringFormat=\{0:C\}}" Margin="1" FontSize="{StaticResource PhoneFontSizeSmall}" VerticalAlignment="Top"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这给了我以下错误；BindingExpression 路径错误：在“MyApp.SpendAnalysis+CatSummary”上找不到“CatSummary”属性

根据我读过的内容，我认为我需要将我的类的属性变成 ObservableCollection 属性，但这似乎破坏了我的 LINQ 查询。我已经为此尝试了各种方法，也找不到任何教程来帮助我理解它应该如何工作。很高兴收到任何建议或指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:36:17.513

对于您的 XAML 绑定，`DataContext`of`boughtItemsListBox`应该是一个具有名为`CatSummary`type的属性的项`IEnumerable<CatSummary>`（或者，如果您希望能够实时更改构成列表的项，则`ObservableCollection<CatSummary>`或 的其他实现者）。`INotifyCollectionChanged`我猜这就是你出错的地方。

例如，如果您实际上有类似的东西`boughtItemsListBox.DataContext = myOC;`，那么它正在寻找`myOC.CatSummary`而不是找到任何东西；您需要做的是将 XAML 更改为`ItemsSource="{Binding}"`或将您的代码更改为`boughtItemsListBox.ItemsSource = myOC;`（并删除 XAML 中现在无用的`ItemsSource`设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:51:03.420

假设你有一个 MyOC 财产

```
private ObservableCollection<CatSummary> _myOC = new ObservableCollection<CatSummary>();
public ObservableCollection<CatSummary> MyOC
{
    get { return _myOC ; }
    set { if (_myOC != value) { _myOC = value; NotifyPropertyChanged("MyOC"); } }
} 
```

将你绑定`ListBox`到`ObservableCollection`，那么每个`ListBoxItem`都会有一个`DataContext`类型`CatSummary`。

```
<ListBox x:Name="boughtItemsListBox" ItemsSource="{Binding MyOc}" ... 
```

在您的 LINQ 查询代码中

```
var initialQuery = BoughtItemDB.BoughtItems
                    .GroupBy(item => item.ItemCategory)
                    .Select(x => new CatSummary
                     { 
                         CatName = x.Key, 
                         CatAmount = x.Sum(amt => amt.ItemAmount)
                     }); 
```

重新分配 MyOC

```
MyOC = new ObservableCollection<CatSummary>(initialQuery.ToList()); 
```

或使用现有的 MyOC 集合。

```
MyOC.Clear();
foreach (var item in initialQuery) MyOC.Add(item); 
```

# android - Android编程，mapview location-overlay：如何更改默认的蓝色位置点，用另一个图像

> ID：10200074
> 
> 赞同：0
> 
> 时间：2012-04-17T22:23:17.957
> 
> 标签：android, google-maps-api-3, geolocation, location-aware

我需要弄清楚如何用图像更改默认的“我的位置”蓝点，它的作用也与指向行进方向的指南针相同。这可以通过设备指南针或通过从 GPS 检测行进方向来计算

我做了一些谷歌搜索，但到目前为止只找到了在 iPhone 上更改点的方法的参考，我正在使用 Android ......

我很感激这方面的一些支持和指导

亲切的问候

缺口

在 OnCreate 中：

```
 LocationManager locman = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locman.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 2, locationListener); 

        //Adds a current location overlay to the map 'mapView' and turns on the map's compass

        MyLocation myLocationOverlay = new MyLocation(this, mapView);
        mapView.getOverlays().add(myLocationOverlay);
        myLocationOverlay.enableMyLocation();
        myLocationOverlay.enableCompass();

        mapView.getOverlays().add(myLocationOverlay);
        mapView.postInvalidate();

In OnLocationChanged:

    dbllatitude = locFromGps.getLatitude();
            dbllongitude = locFromGps.getLongitude();
            dblaltitude = locFromGps.getAltitude();

    bearing = locFromGps.getBearing(); 

         strlatitude = Double.toString(dbllatitude);
            strlongitude = Double.toString(dbllongitude);
            dblaltitude = (dblaltitude / 0.3048); 

            LocationText.setText("Your Location: Latitude " + dbllatitude + " Longitude: " +dbllongitude + " Altitude " + dblaltitude);

            boolean hasbearing = locFromGps.hasBearing();

            if (hasbearing =  false) {

                Toast.makeText(getApplicationContext(), "No bearing", Toast.LENGTH_SHORT).show();

            }
            else
            {
                Toast.makeText(getApplicationContext(), "I HAZ bearing: " + bearing, Toast.LENGTH_SHORT).show();
            }
            MyLocation.mOrientation = bearing; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:48:32.990

子类[`MyLocationOverlay`](http://code.google.com/android/add-ons/google-apis/reference/com/google/android/maps/MyLocationOverlay.html)，覆盖该[`drawMyLocation(...)`](http://code.google.com/android/add-ons/google-apis/reference/com/google/android/maps/MyLocationOverlay.html#drawMyLocation%28android.graphics.Canvas,%20com.google.android.maps.MapView,%20android.location.Location,%20com.google.android.maps.GeoPoint,%20long%29)方法并使用提供的参数绘制图像。这里有几个关于 SO 和博客的例子可以帮助你，例如：

*   [如何正确使用drawMyLocation](https://stackoverflow.com/q/7267077/1029225)
*   [如何为 MyLocationOverlay 中的“你在这里”点使用自定义位图？](https://stackoverflow.com/q/753793/1029225)
*   [如何使用 MyLocationOverlay 在 MapView 上绘制当前 GPS 位置？](https://stackoverflow.com/q/4624993/1029225)
*   [myLocationOverlay 更改标记](https://stackoverflow.com/q/4175432/1029225)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:39:11.350

对于希望获得旋转用户位置图标的类似功能的其他任何人，请参阅以下帖子：

[Android getbearing 仅返回 0.0。尝试使用旋转当前位置图标](https://stackoverflow.com/questions/10258365/android-getbearing-only-returns-0-0-trying-to-use-to-rotate-current-location-ic)

位置管理器 .getbearing() 派上用场

问候

缺口

# php - PHP XML 删除元素

> ID：10200077
> 
> 赞同：1
> 
> 时间：2012-04-17T22:23:20.960
> 
> 标签：php, xml

我的 xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<images>
    <pic>
        <image>54</image>
        <descr>Image 1</descr>
    </pic>
    <pic>
        <image>32</image>
        <descr>Image 2</descr>
    </pic>
    <pic>
        <image>47</image>
        <descr>Image 3</descr>
    </pic>
</images> 
```

我想删除一个元素，例如第二张图片（图 32）。使用此代码，但它不起作用。

```
$xml = simplexml_load_file('../../images.xml');

$target = false;
$i = 0;
foreach ($xml->pic as $m) {
  if ($m['image']=='32') { $target = $i; break; }
  $i++;
}
if ($target !== false) {      //$target always be $false
  unset($xml->pic[$target]);
}

echo $xml->savexml(); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:35:42.370

观察

`$m`是对象不是数组，所以`$m['image']`应该改为`$m->image`

更改`$target = false;`为`$target = 0 ;`

例子

```
$xml = simplexml_load_file ( '1.xml' );
$target = 0;
$i = 0;
foreach ( $xml->pic as $m ) {
    if ($m->image == '32') {
        $target = $i;
        break;
    }
    $i ++;
}

if ($target !== false) {
    unset ( $xml->pic [$target] );
}
echo $xml->savexml (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:28:01.750

尝试创建一个新`XML`对象，只添加您想要的数据并保存新对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:28:30.783

你的测试是错误的

```
if ($target !== false) { 
```

应该

```
if ($target > 0) { 
```

# asp.net-mvc-3 - URL.Action 在构造 URL 时包含 id

> ID：10200078
> 
> 赞同：25
> 
> 时间：2012-04-17T22:23:22.310
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, url.action

我正在使用 ASP.Net MVC。这是我来自名为 Course 的控制器的代码片段：

```
public ActionResult List(int id)
{
    var viewmodel.ShowUrl = Url.Action("Show", "Course");

    ...
}

public ActionResult Show(int id)
{
  ...
} 
```

viewmodel.ShowUrl 获取“id”参数的任何值。所以viewmodel.ShowUrl变成了“/Course/Show/151”（id的值为151）；我希望能够根据用户交互在客户端上设置 id 部分。我希望 viewmodel.ShowUrl 的值为“/Course/Show”。

这对我来说似乎是一个错误。我没有告诉 Url.Action 包含一个 id 值。它是自己做的。如果我想设置 id 值，那么我会这样做：

```
var viewmodel.ShowUrl = Url.Action("Show", "Course", new {id = somevalue}); 
```

那么，如何防止 MVC 添加 id 值呢？我可以将 viewmodel.ShowUrl 硬编码为“/Course/Show”，但这似乎是一个笨拙的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-07-09T06:59:02.450

刚刚遇到了同样的问题，所以你知道，你也可以只使用一个空字符串：

```
@Url.Action("Show", "Course", new { id = "" }) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-03-13T17:01:42.463

我知道这很旧，但我首先找到了这个，但不喜欢这些解决方案中的任何一个，所以我一直在寻找并找到[https://stackoverflow.com/a/19110921/1130636](https://stackoverflow.com/a/19110921/1130636)。

你可以`UrlParameter.Optional`用来解决这个问题

`Url.Action("Show", "Course", new { id = UrlParameter.Optional })`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-18T00:07:28.240

我猜在您的路由中，您没有指定 id 是可选参数。这是示例项目中的默认路由。

```
routes.MapRoute(
  "Default", // Route name
  "{controller}/{action}/{id}", // URL with parameters
  new { controller = "Home", action = "Index", id = UrlParameter.Optional } //Parameter defaults
); 
```

注意包含`id = UrlParameter.Optional`. 没有它，你会得到你所描述的行为，因为它认为 id 是强制性的。

附带说明一下，如果您的 Show 操作并不总是有 id，那么它应该可以为空或提供默认值。

```
public ActionResult Show(int? id)
public ActionResult Show(int id = 0) 
```

否则，当您尝试加载不带 id 参数的 url 时会出现错误。

# iphone - Web 服务向 iPhone 发送信息

> ID：10200082
> 
> 赞同：0
> 
> 时间：2012-04-17T22:23:33.143
> 
> 标签：iphone, web-services, asihttprequest

我为我的应用程序创建了几个 Web 服务，如下所示。1\. 允许主机设备将其信息发送到 Web 服务并将其存储在 sql 数据库中。2.允许客户端设备根据sql数据库中的信息查看附近的所有设备。

我希望客户端现在能够单击要连接的设备之一，然后以某种方式将两者链接在一起。我现在的问题是我的网络服务只能发送对设备请求的响应。我想要的是，如果主机设备可能按下一个按钮，它将将该信息发送到 Web 服务，然后它将一些信息发送给先前连接的客户端。

如何完成从 Web 服务向未请求任何内容的设备发送信息？

背景信息：我正在使用基于 php 的 Web 服务和 ASIHTTPRequest 在 iphone 端发送和接收信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:41:38.460

在 99% 的情况下，您会想要使用轮询。想想任何接收消息的应用程序（电子邮件、Words with Friends 等等）。他们都打电话给服务器并询问“有什么新消息给我吗？” 您必须为您的应用找出正确的频率。

在您需要近乎实时的通信的极少数情况下，您需要将您的应用程序设置为作为服务器运行。请参阅此处：[我使用哪些类使 iPhone 充当服务器？](https://stackoverflow.com/questions/478719/what-classes-do-i-use-to-make-an-iphone-act-as-a-server). 显然，这样做的电池和带宽成本要高得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:38:47.860

您可能会保持一个持久连接打开，但是当网络条件发生变化时（例如从一个网络移动到另一个网络、打开/关闭蜂窝网络等），这将中断。

客户端可以快速轮询服务器，但这不仅会在服务器上产生超出预期的负载，而且更重要的是，会消耗客户端设备的电池。（在 3G 上更是如此，因为无论网络事务有多小，蜂窝无线电都有相当长的最小开机间隔。）

如果您谈论的是相当零星的更新（实时更新确实需要上面的第一个选项，如果 TCP 会话被终止，则需要适当的错误处理和重新连接），您可能会考虑[Apple Push Notifications](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html) - 只要通知有效负载是一致的与 APNS 指南。他们的行为几乎与您描述的完全一样。

# wordpress - 需要 Wordpress 循环帮助

> ID：10200091
> 
> 赞同：0
> 
> 时间：2012-04-17T22:24:14.837
> 
> 标签：wordpress, loops

我正在使用 wordpress 循环将我的 wordpress 博客中的帖子调用到我的网站中。我设置了循环以获取投资组合类别下的 10 个最新帖子，并将它们显示在我的投资组合页面上。问题是我要显示 20 个项目，但我不想处理 20 个图像的加载时间。我曾想过在 Dreamweaver 中制作多个投资组合页面，并让每个页面抓取一组不同的十个帖子，但这违背了使用 wordpress 让我更快地更新页面的目的。

有什么办法可以设置它，以便当我点击“下一个”时，页面会刷新下一组十个帖子，而当我点击“返回”时，页面会刷新前十个帖子？

我看过类似 www.example.com/portfolio.php?paged=2 的网页

这是我调用循环的标题

```
define('WP_USE_THEMES', false);
require('./wp/wp-load.php');
query_posts('category_name=portfolio&posts_per_page=10'); 
```

这是循环放置在页面上的位置

```
<?php while (have_posts()): the_post(); ?>
<?php the_content(); ?>
<?php endwhile; ?> 
```

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:50:33.870

试试这个

```
 $paged = get_query_var('paged');

query_posts(array(
'category_name'=>'portfolio',
posts_per_page'=>10
'paged' => $paged // set the current page
)); 
```

# css - 让文本通过 div

> ID：10200095
> 
> 赞同：3
> 
> 时间：2012-04-17T22:24:20.303
> 
> 标签：css

好的，这是一个调查，其中 div 是图表，就像你在 facebook 上看到的一样。

基本上：

```
<div style='border:1px solid black;width:300px;'>    
<div style='width:100px;???'>This text is longer than the inner div tag.</div>
</div> 
```

...但我希望文本不要中断并直接通过 div。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T22:25:47.977

您可以使用`white-space: nowrap`. 确保您`div`及其相关的祖先没有，`overflow: hidden`否则您在离开元素时将看不到文本。

[js小提琴](http://jsfiddle.net/q5gQh/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:26:14.123

## CSS

```
word-wrap:nowrap; 
```

导致文本不换行。有关更多信息，请参阅[MDN 上的自动换行。](https://developer.mozilla.org/en/CSS/word-wrap)

# c++ - 如何使用插件创建安装程序

> ID：10200097
> 
> 赞同：1
> 
> 时间：2012-04-17T22:24:51.870
> 
> 标签：c++, .net, installation, windows-installer

如何创建带有巴比伦工具栏或许多其他插件（安装开始前可单击的复选框）的 Windows 安装程序？一些特殊的软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:06:51.687

是的，大多数安装程序都是使用设置创作工具创建的。这是一个可以帮助您入门的列表：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

您可以通过简单地创建自定义对话框并调节包中的功能来添加工具栏插件。

# mysql - Date_Format 并按日期排序

> ID：10200102
> 
> 赞同：6
> 
> 时间：2012-04-17T22:25:28.547
> 
> 标签：mysql

我目前在按使用 date_format 的数据列对结果进行排序时遇到问题。

我有以下日期：

*   12-03-12
*   21-03-12
*   25-03-12
*   17-04-12

当我执行查询时：

```
SELECT date FROM myTable ORDER date DESC 
```

日期以正确的顺序排列

*   17-04-12
*   25-03-12
*   21-03-12
*   12-03-12

当我执行查询时

```
SELECT DATE_FORMAT(date, '%d-%m-%Y') as `date` ORDER BY date 
```

现在日期的顺序错误

*   25-03-12
*   21-03-12
*   17-04-12
*   17-03-12
*   14-03-12

我也尝试运行查询 SELECT DATE_FORMAT(date, '%d-%m-%Y') as `date`ORDER BY DATE_FORMAT(date, '%d-%m-%Y') 但没有任何区别。

我怎样才能让它以正确的顺序排序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T22:28:07.710

问题是您正在使用别名覆盖列名。

选择另一个别名：

```
SELECT DATE_FORMAT(`date`, '%d-%m-%Y') as date_formatted
FROM myTable 
ORDER BY `date` DESC 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T22:28:00.667

`ORDER BY`只需为子句中的列指定表名：

```
 SELECT DATE_FORMAT(date, '%d-%m-%Y') as `date`
    FROM myTable
ORDER BY myTable.`date` DESC -- <<<<<< 
```

在这种情况下，mysql 知道您要按表列排序，而不是按您在`SELECT`部分中评估的表达式

# jquery - $("#orderedlist").find("li") 和 $("#orderedlist li") 之间的区别

> ID：10200118
> 
> 赞同：3
> 
> 时间：2012-04-17T22:26:40.907
> 
> 标签：jquery

有什么区别：

```
$("#orderedlist").find("li") 
```

...和...

```
$("#orderedlist li"). 
```

什么时候会使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:29:00.113

`$("#orderedlist").find("li")`更快，因为它使用原生 JavaScript。
`$("#orderedlist li")`会更慢，因为当您传入选择器时它会调用 Sizzle。
无论如何，两者都做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:28:52.093

一般来说，一个都没有。

只有在复杂的选择器中，将它们分解为不同的方法才有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T06:14:33.480

我将在这种情况下使用 .find() ：

```
$("#orderedlist").show().find("li").css("color", "red"); 
```

但是如果#orderedlist 是可见的，我只想直接更改

*   的颜色为红色，我会使用

    ```
    $("#orderedlist li").css("color", "red"); 
    ```

    我认为这只是你在做什么的问题。

# java - Java：如何在 JVM 加载类时拦截它们

> ID：10200119
> 
> 赞同：4
> 
> 时间：2012-04-17T22:26:40.847
> 
> 标签：java, class, runtime, classloader, instrumentation

在我的程序中，我想在 ClassLoader 加载类时拦截它们，并对它们做一些事情，例如。检查某些注释等。我该怎么做？

我已经在网上做了很多研究，但没有得到我的答案。我应该重写 ClassLoader 吗？问题在于，在大多数情况下，父 ClassLoader 会加载该类，因此我将无法获取所有类。在这个网站上的几个问题上，我看到提到了 Instrumentation，但我不知道这是否与我的问题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:36:47.450

您可以使用 java 代理来监控：

API 文档：[http ://docs.oracle.com/javase/6/docs/api/java/lang/instrument/ClassFileTransformer.html](http://docs.oracle.com/javase/6/docs/api/java/lang/instrument/ClassFileTransformer.html)

例子：

[http://www.informit.com/guides/content.aspx?g=java&seqNum=589](http://www.informit.com/guides/content.aspx?g=java&seqNum=589)

# sql - 如果列数据以数字开头，Like 操作在 nvarchar 列过滤器上不返回任何行

> ID：10200125
> 
> 赞同：2
> 
> 时间：2012-04-17T22:27:27.080
> 
> 标签：sql, sql-server-2008

我`nvarchar(50)`在 SQL Server 表中有列，数据如下：

```
123abc
234abc
456abc 
```

我的查询：

```
select * 
from table 
where col like '%abc' 
```

预期结果：应返回所有行实际结果：不返回任何行

如果列是，则工作正常，`varchar`但如果类型是，则不返回任何行`nvarchar`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T22:31:58.677

您的数据末尾可能有空格。看看这个例子。

```
Declare @Temp Table(col nvarchar(50))

Insert Into @Temp(col) Values(N'123abc')
Insert Into @Temp(col) Values(N'456abc ')

Select * From @Temp Where Col Like '%abc' 
```

当你运行上面的代码时，你只会得到 123 行，因为 456 行的末尾有一个空格。

当您运行如下所示的代码时，您将获得您期望的数据。

```
Declare @Temp Table(col nvarchar(50))

Insert Into @Temp(col) Values(N'123abc')
Insert Into @Temp(col) Values(N'456abc ')

Select * From @Temp Where rtrim(Col) Like '%abc' 
```

根据在线书籍中有关 LIKE 的文档（重点是我的）：http: [//msdn.microsoft.com/en-us/library/ms179859.aspx](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

使用 LIKE 进行模式匹配

LIKE 支持 ASCII 模式匹配和 Unicode 模式匹配。当所有参数（match_expression、pattern 和 escape_character，如果存在）都是 ASCII 字符数据类型时，将执行 ASCII 模式匹配。如果任何一个参数是 Unicode 数据类型，则所有参数都将转换为 Unicode 并执行 Unicode 模式匹配。**当您将 Unicode 数据（nchar 或 nvarchar 数据类型）与 LIKE 一起使用时，尾随空格很重要**；但是，对于非 Unicode 数据，尾随空格并不重要。Unicode LIKE 与 ISO 标准兼容。ASCII LIKE 与早期版本的 SQL Server 兼容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-16T12:56:09.923

对于`nvarchar`类型，您可以像这样使用选择：-

```
select * from Table where ColumnName like N'%abc%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T22:33:36.750

您确定值的末尾没有空格吗？您可以这样做来删除空白：

```
select *
from yourTable
where rtrim(yourcolumn) like '%abc' 
```

如果您不想一起使用`RTRIM`and ，`LIKE`您也可以使用：

```
Select * 
From yourTable 
Where charindex('abc', col) > 0 
```

来自微软关于使用[LIKE](http://support.microsoft.com/kb/316626)：

> SQL Server 遵循关于如何比较字符串和空格的 ANSI/ISO SQL-92 规范（第 8.2 节，一般规则 #3）。ANSI 标准要求对比较中使用的字符串进行填充，以便它们的长度在比较之前匹配。填充直接影响 WHERE 和 HAVING 子句谓词的语义以及其他 Transact-SQL 字符串比较。例如，Transact-SQL 认为字符串“abc”和“abc”对于大多数比较操作是等效的。
> 
> 此规则的唯一例外是 LIKE 谓词。当 LIKE 谓词表达式的右侧具有一个带有尾随空格的值时，SQL Server 不会在比较发生之前将这两个值填充到相同的长度。因为根据定义，LIKE 谓词的目的是促进模式搜索而不是简单的字符串相等测试，所以这并不违反前面提到的 ANSI SQL-92 规范部分。

如果您知道“abc”字符串的起始位置，那么您可以使用[`SUBSTRING`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)：

```
Select *
From yourTable 
Where substring(Col, 4, 3) = 'abc' 
```

但是你可以一起使用 charindex 和 substring 并且你不必担心空格：

```
select *
from yourTable
where substring(col, charindex('abc', col), 3) = 'abc' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T22:42:07.283

您的查询应该可以正常工作，但您也可以尝试。

```
SELECT * FROM TABLE WHERE (COL LIKE '%abc%') 
```

如果在“abc”部分之后看不到字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-18T23:37:03.897

只是为了记录一些 ASCII 与 Unicode 的怪异之处：

```
-- ascii like
if 'Non rational ' like 'Non[ --]rational%'  print 'like' else  print 'not like'

-- unicode like
if N'Non rational ' like N'Non[ --]rational%' print 'like' else  print 'not like'

-- unicode like, trailing space removed
if N'Non rational' like N'Non[ --]rational%' print 'like' else  print 'not like'

-- unicode like, different wildcard
 if N'Non rational ' like N'Non_rational%' print 'like' else  print 'not like' 
```

产生以下内容：

```
like
not like
not like
like 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-02T18:01:24.847

这将正常工作。你可以试试。

```
SELECT * 
FROM "table"
WHERE CAST("col" AS VARCHAR) LIKE '%abc' 
```

# php - php字符串替换引号

> ID：10200127
> 
> 赞同：3
> 
> 时间：2012-04-17T22:27:52.640
> 
> 标签：php, str-replace

您好，我正在尝试使用 php str_replace 将所有单引号变为双引号，但是无论我做什么，它似乎都不起作用，建议

```
$page = str_replace("/'/", '/"/', $page); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T22:30:03.403

更新：我同意其他人的观点，对于大多数人来说，以下是一个更易于阅读的替代方案：

```
$page = str_replace("'", '"', $page); 
```

我原来的答案：

```
$page = str_replace(chr(39), chr(34), $page); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T22:30:00.190

如果字符串没有用相同的字符分隔，则不需要转义引号字符（实际上它是`\`, 不是`/`，除非您与标准正则表达式分隔符混淆）。

```
$page = str_replace("'", '"', $page); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T22:30:46.070

这应该有效：

```
str_replace("'",'"',$text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T22:31:16.937

```
$page = str_replace("'", "\"", $page); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T22:31:43.697

我认为你应该用[preg_replace();](http://php.net/manual/en/function.preg-replace.php)

```
$str = "'Here 'it' goes'";
echo preg_replace("/'/", '"', $str); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T22:32:50.733

这行得通。您实际上不需要任何转义字符。

```
$page = str_replace("'", '"', $page); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T22:36:07.770

您只需要（和其他正则表达式）函数的开始和`/`结束`preg_...()`。对于诸如 之类的基本功能`str_replace`，只需使用以下字符：

```
str_replace("'", '"', $text); 
```

# c# - wmi：属性返回 null

> ID：10200133
> 
> 赞同：1
> 
> 时间：2012-04-17T22:28:08.897
> 
> 标签：c#, wmi, wmi-query

我正在尝试构建一个简单的 Windows 窗体应用程序，该应用程序可以使用 WMI（从硬盘驱动器开始）查询用户计算机的功能。

到目前为止，我已经做到了这一点（`HardDriveCheckResult`是我自己的课）：

```
ConnectionOptions wmiConnOpts = new ConnectionOptions();
wmiConnOpts.Impersonation = ImpersonationLevel.Impersonate;
wmiConnOpts.Authentication = AuthenticationLevel.Default;
wmiConnOpts.EnablePrivileges = true;
ManagementObjectSearcher managementObjectSearcher = new ManagementObjectSearcher(@"select * from Win32_LogicalDisk WHERE DriveType = 5");
managementObjectSearcher.Scope.Options = wmiConnOpts;
List<HardDriveCheckResult> hardDriveCheckResults = new List<HardDriveCheckResult>();

foreach (ManagementObject managementObject in managementObjectSearcher.Get())
{
    string hardDriveName = managementObject["name"].ToString();
    object objFreeSpace = managementObject["FreeSpace"];
    double freeSpace = objFreeSpace == null ? 0d : (double)objFreeSpace;
    ... additional code not relevant
} 
```

我遇到的问题是`managementObject["FreeSpace"]`总是返回null。我怀疑这可能与进行 WMI 调用的帐户的权限有关，因此我包含了`ConnectionOptions`由 Google 提供的代码。

任务管理器告诉我程序正在以我的管理员帐户运行，所以我对为什么 WMI 调用不会返回所有数据感到有些困惑。

我是否更正了`managementObject["FreeSpace"]`由于权限而返回 null 的调用？或者它可能完全是别的东西？

`managementObject["name"]`哦，顺便调用正确返回驱动器号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:45:32.733

好的，答案是糟糕的谷歌搜索。该查询正在过滤 DriveType = 5，即 CD-ROM 驱动器。我以为我在过滤硬盘。

可用空间部分返回 null，因为驱动器中没有磁盘。

# java - 闪屏安卓

> ID：10200143
> 
> 赞同：3
> 
> 时间：2012-04-17T22:29:08.577
> 
> 标签：java, android

我正在尝试创建一种效果，看起来就像您在设备截屏时看到的闪光灯一样。

我的问题，有没有办法做到这一点？如果可以的话，我可以改变那个小闪光灯的颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:53:45.537

您需要使用 FrameLayout 或 RelativeLayout 作为您的根视图。

然后，您将有两层，底部是您的内容，顶部是一个视图。

当用户触发事件时，您将以编程方式设置视图的颜色以实现闪光效果。

# c++ - 共享变量的竞争条件

> ID：10200147
> 
> 赞同：3
> 
> 时间：2012-04-17T22:29:19.253
> 
> 标签：c++, multithreading, atomic

我有一个类型的共享变量`double`。这个变量将被两个线程访问。一个线程永远只会写入变量，而另一个线程永远只会读取变量。

我仍然在这里获得比赛条件吗？如果是，在 C++ 中是否有一种“简单”的方式来实现原子访问？如果读取比写入多得多，我如何有效地实现它？我需要将变量标记为`volatile`吗？

编辑：好的，“阅读器”线程定期处理批量数据，并且新值的传播不是时间敏感的。与其实现我没有好方法测试的复杂联锁，我可以只声明编写器线程将写入的另一个临时变量。然后，当阅读器完成一批时，它可以将临时值自动传播到实际变量。那将是无竞争条件的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T22:35:01.163

是的，存在竞争条件，因为`double`变量在大多数处理器上都不是原子的。

使用 3 个双打（可能是一个中间有额外填充的数组，以避免错误共享导致性能下降）。

一份归读者所有，一份归作者所有，一份正在移交。

写入：写入写入槽，然后原子地交换（例如用`InterlockedExchange`）写入槽的指针/索引与切换槽的索引。由于索引是指针大小或更小，只要变量正确对齐，原子交换就很容易。如果您的平台偶然提供了带或不带内存屏障的互锁交换，请使用 with。

读取：以原子方式将读取槽的指针/索引与切换变量的索引交换。然后读取读取槽。

您实际上还应该包含一个版本号，因为读取线程往往会在最新和上一个插槽之间反弹。阅读时，在交换之前和之后都阅读，然后与更高版本一起使用。

或者，在 C++11 中，只需使用`std::atomic`.

警告：以上仅适用于单个作者/单个读者（此问题中的特殊情况）。如果您有多个，请考虑使用读写器锁或类似的锁来保护对变量的所有访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:35:22.943

您可能想看看讨论原始类型的读/写的this：

[C++ 对 int 的读写是原子的吗？](https://stackoverflow.com/questions/54188/are-c-reads-and-writes-of-an-int-atomic)

# security - Codeigniter 定义基本路径或退出

> ID：10200152
> 
> 赞同：23
> 
> 时间：2012-04-17T22:29:56.320
> 
> 标签：security, codeigniter, controller

我注意到演示 codeigniter 项目的控制器上方的一小段代码，并想知道它做了什么以及我是否应该使用它。

```
defined('BASEPATH') OR exit('No direct script access allowed'); 
```

另外，如果我应该使用它应该在哪里使用它？控制器？楷模？两个都？ETC..

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-17T22:45:28.947

为了激活 codeigniter 框架，该站点必须使用 www.blahblah.com/index.php/params 访问。通过首先通过 index.php，框架被激活，各种类和诸如此类的东西通过 PHP 运行。然后框架查看 url 的参数并激活特定的控制器。这行代码确保框架已正确“启动”并且用户只是不尝试在 Web 服务器上运行单个 php 文件。因为该 php 文件假定框架中的类已经被声明，所以单独运行一个控制器文件会严重失败，并且有可能导致安全漏洞。不允许直接访问。

# c# - 一台用户机器上的 .NET RTD/COM Excel 互操作错误？

> ID：10200154
> 
> 赞同：1
> 
> 时间：2012-04-17T22:30:02.343
> 
> 标签：c#, .net, excel, com, rtd

我们在各种机器上构建了一个已使用多年的 .NET COM/Excel RTD 服务器（.NET 程序集）（即我们知道它可以工作，并且我们安装它的标准方法也可以工作）。我们有一个用户在另一台机器上安装了这个 RTD 组件，并且在让它顺利运行时遇到了问题。我相信这个问题与 Interop.Microsoft.Office.Interop.Excel.dll 与这台机器不兼容，或者注册不正确有关。以下是具体细节：

尽管 RTD 链接在某种程度上可以正常工作，但我们看到我们的应用程序经常记录此错误：

```
RTDServer.NotifyExcel(): Error notifying Excel, ex=System.InvalidCastException: 
Unable to cast COM object of type 'System.__ComObject' to interface type 
'Microsoft.Office.Interop.Excel.IRTDUpdateEvent'. This operation failed because 
the QueryInterface call on the COM component for the interface with 
IID '{A43788C1-D91B-11D3-8F39-00C04F3651B8}' failed due to the following error: 
Library not registered. (Exception from HRESULT: 0x8002801D (TYPE_E_LIBNOTREGISTERED)).     
 at Microsoft.Office.Interop.Excel.IRTDUpdateEvent.UpdateNotify()     
 at EZomsRTDServer.RTDServer.NotifyExcel() 
```

当我在用户机器上进行故障排除时，我检查了我们的组件是否在 COM 中正确注册。我们运行这个命令来向 COM 注册我们的组件：

```
C:\EZomsRTD\regasm EZomsRTDServer.dll /codebase "c:\EZomsRTD\EZomsRTDServer.dll"
C:\EZomsRTD\regasm EZomsRTDServer.dll /tlb 
```

在用户的机器上运行这些命令会产生这个 regasm 错误：

```
Type library exporter warning: Referenced type is defined 
in managed component, which is imported from a type library 
that could not be loaded because it was not registered 
(type: 'Microsoft.Office.Interop.Excel.IRtdServer'; component: 
'C:\EZomsRTD\Interop.Microsoft.Office.Interop.Excel.dll').  
Assembly exported to 'C:\EZomsRTD\EZomsRTDServer.tlb', and the type 
library was registered successfully 
```

（文件：Interop.Microsoft.Office.Interop.Excel.dll 与我们的组件在同一个文件夹中。）

这是否可能是由于在这台机器的 GAC 中注册了另一个版本的 Interop.Excel 程序集？还有其他可能需要调查的领域吗？

注意：用户有 Windows XP 和 Excel 2003。（与他以前工作的机器相同的配置文件。）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:29:27.073

> 接口与 IID '{A43788C1-D91B-11D3-8F39-00C04F3651B8}

这就是 IRTDUpdateEvent 接口。它确实在 HKCU\Interfaces 中有一个声明标准编组器的条目。这需要一个类型库，LIBID 是 {00020813-0000-0000-C000-000000000046}。

错误消息告诉您的是该计算机上的注册表缺少注册表项`HKCR\TypeLib\{00020813-0000-0000-C000-000000000046}`或其子项之一。这可能是因为它安装了旧版本的 Office，但这很明显。只是简单的注册表损坏是此类事故的主要原因。最好把机器扔掉，让它停止浪费每个人的时间。如果由于某种原因不切实际，请重新安装 Office。尝试修复注册表项应该是您的最后选择，这种损坏很少孤立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T23:42:45.530

您实际上可以通过在与 Excel 相同的线程上调用 UpdateNotify 来解决此问题。请参阅：[https ://stackoverflow.com/a/27006281/949779](https://stackoverflow.com/a/27006281/949779)

# logging - 通过导入 Python logger 进行 Web2py 日志记录

> ID：10200156
> 
> 赞同：1
> 
> 时间：2012-04-17T22:30:30.603
> 
> 标签：logging, web2py

我遵循了 Web2py 手册中的详细信息，并以这种方式设置了我的记录器：

我首先将 Web2py 根目录中的配置文件“logging.example.conf”重命名为“logging.conf”，并将“myapp”添加到记录器列表中

```
[loggers]
keys=root,rocket,markdown,web2py,rewrite,app,welcome,myapp 
```

并添加一个单独的“logger_myapp”部分

```
[logger_myapp]
level=DEBUG
qualname=web2py.app.myapp
handlers=consoleHandler
propagate=0 
```

然后在 myapp 的一些模型文件中，我写道：

```
import logging
logger = logging.getLogger("web2py.app.myapp')
logger.setLevel(logging.DEBUG) 
```

在同一个模型文件的某个地方，我尝试通过以下方式测试日志记录：

```
logger.debug("Check: %s" % details) 
```

where`details`只是一个保存字符串的变量

但是，当我从命令行运行 Web2py 时，即`python web2py.py`执行模型文件时，我看不到控制台输出任何内容。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T00:04:33.077

您可能只需要将 handler_consoleHandler 的级别设置为 DEBUG。记录器和处理程序都有与之关联的级别，并且任何一个都可以过滤您的输出。

```
[handler_consoleHandler]
class=StreamHandler
level=DEBUG <<<<<<<<<<<<<<<<
formatter=simpleFormatter
args=(sys.stdout,) 
```

# c# - 有效域的正则表达式

> ID：10200159
> 
> 赞同：1
> 
> 时间：2012-04-17T22:31:02.007
> 
> 标签：c#, regex, vb.net

```
Regex(@"@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,4}$", RegexOptions.Compiled); 
```

使用上述内容，我只想传递@gmail.com、@xyz.edu、@co.uk 等值...但我发现像 abc@gmail.com（有效的电子邮件 ID）这样的值也可以通过。

我应该修改什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:34:19.597

`^`在前面放一个`@`。

顺便说一句，`{2,4}`到底为什么。`.travel`也是一个有效的顶级域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T22:43:36.807

域不能以`-`字符开头。

`^(?:[a-zA-Z0-9][a-zA-Z0-9-]*\.)+[a-zA-Z]{2,6}$`

* * *

```
Uri uri = new Uri("http://www.cnn.com/some_link/document.htm");
string url = uri.Host.ToString(); 
```

# android - 如何确保所有服务连接都绑定？

> ID：10200160
> 
> 赞同：1
> 
> 时间：2012-04-17T22:31:02.700
> 
> 标签：android, android-service, android-contentprovider

我有一个需要绑定的服务，因为调用者需要一些反馈和返回值。至少有一个 Activity、一个 Fragment 和一个 ContentProvider 应该使用绑定的 Service。所以所有使用对象调用bindService。并且都收到 onServiceConnected。到目前为止没问题，这行得通。

但是随后：Activity 想要所有的 Fragment 显示它们的内容，它们调用 ContentProvider。碰巧的是，Fragments 和 CP 还*没有*绑定。所以我不能确定，在 onServiceConnected 期间，所有其他使用服务的对象都已连接。

如何解决这个问题？我想到了一些想法：

*   有没有办法控制接收 onServiceConnected 回调的对象的顺序？

*   是否有一个活动生命周期回调，我可以确定所有 onServiceConnected 调用都已完成？那么，有没有更好的方法来开始填充 Fragments 的内容？或者，如果我在 Activity 的 onServiceConnected 中发布消息，我能否确定在所有其他 onServiceConnected 调用之后处理此消息？

*   另一个想法是我将绑定的服务连接保存在其他地方的静态单个字段中。因为 ContentProvider 需要访问，所以我想到了 Service 类本身。但不知何故，这似乎违背了绑定服务的想法？！？！

还有其他想法吗？

谢谢，约尔格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:09:02.403

啊，看来我找到了解决方案：

在 onServiceConnected 中，我向 UI 线程发布了一条消息。据我了解，此消息是在所有其他待处理的 onServiceConnected 回调完成后处理的。

所以现在我的代码看起来像：

```
private ServiceConnection mConnection = new ServiceConnection() {
    @Override public void onServiceConnected(ComponentName name, IBinder service) {
        HeftBinder binder = (HeftBinder)service;
        mService = binder.getService();
        mBound = true;
        new Handler().post(new Runnable() {
            @Override public void run() {
                fillAllTheFragments();
            }
        });
    } 
```

有没有人在双/四核设备上尝试过类似的东西？

问候，约尔格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:39:35.877

我可以想到一个非常简单的解决方案来解决您的问题。

每当您将 Activity、Fragment 或 ContentProvider 绑定到指定的 Service 时，您也会告诉他刚刚注册的人（通过 Service 中已注册元素的计数器）。使用服务中的公共方法，您可以从 Activity 中检索已注册元素的数量。

```
**Service.java**

private int nb_Fragments = 0;
private int nb_CProviders = 0;    

// Adds an element
public void addBoundElement(String nature)
    nb_Fragments++ OR nb_CProviders++;

// Remove an element
public void unBoundElement(String nature)
    nb_Fragments-- OR nb_CProviders--;

// Are both a Fragment and a ContentProvider bound ?
public boolean areAlreadyBound() 
```

您应该能够执行几乎相同的操作，在您的服务中实现侦听器接口，并在绑定或取消绑定新元素时通知活动。

# c - movl 与左操作数与 3 个子操作数？

> ID：10200161
> 
> 赞同：2
> 
> 时间：2012-04-17T22:31:04.837
> 
> 标签：c, assembly, x86

这是调用函数后的部分代码。

```
movl   12(%ebp),%ecx  
movl   8(%ebp),%esi    
movl   (%esi,%ebx,4),%edx 
```

这是对应的 C 函数：

```
void  foo(MyType_t A[], int n); 
```

所以基本上，`%esi`是`A[]` ，`%ecx`是`n`

第3行是什么意思？请注意，左操作数有 3 个子操作数。

```
%edx = A[4 * %ebx + %esi] ? 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:46:27.873

```
movl   (%esi,%ebx,4),%edx 
```

是 AT&T 的“比例、索引、基数”(SIB) 寻址语法。 `%esi`是基地址，`%ebx`是索引，而 4 是“比例”（应用于索引以生成基地址的字节偏移量的乘数）。

（等效的 Intel 语法等效更明确：`mov edx, dword ptr [esi+ebx*4]`.）

```
%edx = A[4 * %ebx + %esi] ? 
```

可能不是，因为这种寻址模式下的有效地址计算是以字节为单位工作的，而 C 数组索引是以数组元素的大小为单位工作的。

如果`%esi`是`A`内存中的基地址，并且`%ebx`是，并且(ie )`n`的单个元素的大小是4，那么给出的地址；所以指令在这种情况下意味着。`A``sizeof(MyType_t)``%esi + %ebx * 4``A[n]``%edx = A[n]`

# c# - 长时间运行的程序和数据处理

> ID：10200175
> 
> 赞同：0
> 
> 时间：2012-04-17T22:32:04.837
> 
> 标签：c#

我正在尝试用 C# 开发一个长期运行的数据馈送程序。数据处理将在多台服务器上运行，并且会出现一种长队列，一旦前一个文档的处理完成，数据将被输入数据处理软件。

我该怎么做？它可能会处理分布在 5 个单独的服务器中的 10,000 个文档，并且将使用服务器是否繁忙以及服务器已经处理了多少文档来分发文档。通常的负载平衡标准。我可以编写一个 Windows 应用程序来持续监控服务器并相应地提供/发送数据。我应该使用 WCF 服务吗？windows窗体应用程序？Windows 消息队列还是我应该构建自己的消息队列？数据馈送基本上会持续进行，因为每个单独的文档可能需要 20-30 分钟，并且有 10,000 个文档。我不希望喂养程序在基本上任何情况下崩溃/停止。

您将使用哪种软件和方法来开发它？有什么建议、猜测和想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:16:17.607

您应该使用 Windows 服务（Visual Studio 中的一种 Windows 应用程序）：

[演练：在组件设计器中创建 Windows 服务应用程序](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)

如果您在控制面板中配置它们，它们将在操作系统启动时启动，即使没有用户登录。您还必须使用有权访问必须读/写的文件的帐户启动服务。您可以专门为此创建一个帐户。

[Windows 服务](http://en.wikipedia.org/wiki/Windows_service)（这解释了如何做上一段的事情）

绝对必要的是捕获所有异常，因为一个简单的未处理异常会突然停止服务。

您可以使用多种方法对作业进行排队，但我建议您使用像数据库表这样简单的方法。该表可以包含定义作业所需的列，以及将流程标记为待处理/已启动/成功完成/已完成WithEroor 的列以及您确定的所有额外信息（开始和结束时间、处理计算机等） . 您应该使用事务保护获取下一个待处理作业并将其设置为由服务器启动的操作，以避免服务器之间的冲突。

你不应该做一个复杂的负载平衡过程。如果你真的需要，你可以将线程优先级设置为低级别，这样它就不会减慢其他进程。

# unity-container - Unity Dependancy Injection 将运行时参数值传递给构造函数？

> ID：10200176
> 
> 赞同：0
> 
> 时间：2012-04-17T22:32:12.763
> 
> 标签：unity-container

我正在使用 Unity 容器通过将接口传递给目标类构造函数，通过构造函数将一个类注入另一个类。我想将参数传递给注入类的构造函数。谁能告诉我该怎么做？

例如，在下面的示例中，我想将 2 个参数传递给正在注入 MyClass 的 adminmanager 的构造函数。

```
 public class MyClass
{
    IAdminManager AdminManager;

     public MyClass(IAdminManager adminManager)
    {
        AdminManager = adminManager;
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:40:20.767

通过统一解析对象时，您可以覆盖构造函数参数：

```
IAdminManager adminMgr = 
    container.Resolve<IAdminManager>(new ParameterOverride("param", myValue));
MyClass c = 
    container.Resolve<MyClass>(new ParameterOverride("adminManager", adminMgr)); 
```

# mercurial - Mercurial 变更集 ID 中的两个数字是什么？

> ID：10200177
> 
> 赞同：8
> 
> 时间：2012-04-17T22:32:14.477
> 
> 标签：mercurial

```
$ hg heads
changeset:   211:746a4ab8b3e3 
```

`211`和`746a4ab8b3e3`分别是什么？

当我这样做`hg revert -r REV`时，应该`REV`是什么？ `211`或`746a4ab8b3e3`, 或`211:746a4ab8b3e3`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T22:36:56.697

`211`是*[本地修订号](https://www.mercurial-scm.org/wiki/RevisionNumber)*，`746a4ab8b3e3`是*短[节点 ID](https://www.mercurial-scm.org/wiki/Nodeid)*。*本地*修订版 [可能]在相同节点 ID的存储库之间*有所不同*，并且对于交流修订版没有用处。带有 的形式`:`只是它们通常一起表示以进行显示的一种方式。

在大多数情况下*，* “修订号”都可以与 Hg 命令一起使用。（而且本地版本更容易输入！）但是请注意：如果有人说“更新到修订版 42”，那么他们要么在看你的屏幕，要么需要上一堂课。

现在去找[一个 Hg 教程](http://hginit.com/);-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:07:05.353

正如 pst 之前所说的 211 是本地修订号。

我建议看看这个很棒的[HG INIT 教程](http://hginit.com/)

从以下 HG Init 示例中，您可以看到每次签入时，第一个变更集编号都会增加。

> 变更集：1：a52881ed530d 标签：提示用户：Joel Spolsky 日期：2010 年 2 月 8 日星期一 14:51:18 -0500 摘要：将 crunch 更改为 smoosh
> 
> 变更集：0:c1fb7e7fbe50 用户：Joel Spolsky 日期：2010 年 2 月 8 日星期一 14:50:08 -0500 摘要：鳄梨酱配方的初始版本

# go - 从 Go 模板调用方法

> ID：10200178
> 
> 赞同：50
> 
> 时间：2012-04-17T22:32:16.283
> 
> 标签：go, go-templates

假设我有

```
type Person struct {
  Name string
}
func (p *Person) Label() string {
  return "This is " + p.Name
} 
```

如何从 html/template 使用此方法？我的模板中需要这样的东西：

```
{{ .Label() }} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-17T22:43:24.140

只需省略括号，应该没问题。例子：

```
package main

import (
    "html/template"
    "log"
    "os"
)

type Person string

func (p Person) Label() string {
    return "This is " + string(p)
}

func main() {
    tmpl, err := template.New("").Parse(`{{.Label}}`)
    if err != nil {
        log.Fatalf("Parse: %v", err)
    }
    tmpl.Execute(os.Stdout, Person("Bob"))
} 
```

根据[文档](https://golang.org/pkg/text/template/#hdr-Arguments)，您可以调用任何返回一个值（任何类型）的方法，或者如果第二个值是 type ，则返回两个值`error`。在后一种情况下，`Execute`如果它是非零，将返回该错误并停止执行模板。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-08-06T01:00:21.547

您甚至可以将参数传递给函数，如下所示

```
type Person struct {
  Name string
}
func (p *Person) Label(param1 string) string {
  return "This is " + p.Name + " - " + param1
} 
```

然后在模板中写

```
{{with person}}
    {{ .Label "value1"}}
{{end}} 
```

假设模板中的 person 是传递给 Template 的 Person 类型的变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-11-23T17:01:49.717

不确定是我的无能还是 Go 模板最近发生了变化，但我无法访问传递给 Execute 的数据结构上的函数。总是收到“ `can't evaluate field`”错误。

我能够通过使用来完成这项工作[`FuncMap`](https://pkg.go.dev/text/template#FuncMap)。

例子：

```
temp := template.New("templatename.gohtml")
temp.Funcs(
    template.FuncMap{
        "label": Label,
    },
)
temp, err := temp.ParseFiles(
    "templatename.gohtml",
)
if err != nil {
    log.Fatal("Error parsing template", err)
}

err = temp.Execute(os.Stdout, nil) 
```

在模板中：

```
{{label "the label"}} 
```

标签功能：

```
func Label(param string) string {
  ...
} 
```

# ruby-on-rails-3 - 部分会话被删除

> ID：10200187
> 
> 赞同：0
> 
> 时间：2012-04-17T22:33:00.360
> 
> 标签：ruby-on-rails-3, uploadify

我正在使用带有 Rails 3 的 Uploadify。该表单适用于除 IE 之外的所有浏览器。

我正确设置了我的 csrf 变量，以便会话不会完全被吹走。

```
<% key = Rails.application.config.session_options[:key] %>
var uploadify_script_data = {};
var csrf_param = $('meta[name=csrf-param]').attr('content');
var csrf_token = $('meta[name=csrf-token]').attr('content');

uploadify_script_data[csrf_param] = encodeURI(encodeURIComponent(csrf_token));
uploadify_script_data['<%= key %>'] = encodeURI(encodeURIComponent('<%= cookies[key] %>'));

$('#uploadify').uploadify({
  ...
  scriptData      : uploadify_script_data,
  ...
}); 
```

当我使用 3 步表单时，问题就出现了。在第二步中，我将所需的参数保存到会话变量中。在所有步骤中，我将参数与会话变量合并以使其保持最新。

在第二步中，会话看起来很好（我将其打印到日志中并且所有信息都在那里），但这也是我使用uploadify 的步骤。在处理 ajax 调用的控制器中，我打印出会话，我可以看到会话 ID 和设计信息，但我正在使用的 object_params 完全重置为空哈希。

这是来自处理上传器的控制器：

```
{"session_id"=>"fa12222657a979c92daf1a04dcec7fa8", "_csrf_token"=>"YCN8BvE8+6Vxc2PWgpOvZBhYufKdsTfEnJVkbTSdWHI=", "warden.user.user.key"=>["User", [20], "$2a$10$JCkVLxybPQYclyp2t1gnpu"], "object_params"=>{}} 
```

同样，这只发生在 IE8 和 IE9 中。

关于如何调试的任何想法？

其他资源：
[带有 JQuery Uploader 的 Rails Carrier Wave](https://stackoverflow.com/questions/8363698/rails-carrier-wave-with-jquery-uploader)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:01:47.457

我不得不把它写成一个 IE 问题。最终使用 IE 的标准 Uploadify 表单和其他所有内容的自定义图像。

# architecture - 学习如何使用类似 Lisp 的语言设计和实现大型复杂的应用程序

> ID：10200189
> 
> 赞同：11
> 
> 时间：2012-04-17T22:33:07.910
> 
> 标签：architecture, clojure, lisp, scheme

而不是传统的教程和书籍大多解释语法、数据结构、函数、高阶函数、宏等，而不是像练习这样的传统项目欧拉，有什么好的综合资源来学习如何设计大型应用程序Lisp 语言，涵盖客户端以及服务器端的设计和实现？

是否有任何指南，从第 1 步到第 42 步解释如何逐步实现一个有趣的应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T23:06:00.470

您可能会喜欢[Clojure in Action](http://www.manning.com/rathore/ "链接到 Manning Publication 在“Clojure in Action”一书中的页面")一书。它首先介绍了 Clojure，然后讨论了 Clojure 在“现实世界”软件（例如状态管理、并发性、代码生成和 Java 互操作）中大放异彩的用例，然后本书将引导您完成一个非使用单元测试、自定义 DSL、Hadoop、HBase 和 RabbitMQ 的简单、可扩展的 Web 应用程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T22:45:43.077

恕我直言，真正*获得*方案的最佳书籍是[计算机程序的结构和解释](http://mitpress.mit.edu/sicp/full-text/book/book.html)（SICP）。

通过这些章节，您将逐步实现更复杂的系统——数字塔、图片处理语言、流处理器、并发编程……直到最后，在最后两章中，您最终为不同的语言（Scheme 本身，一种逻辑语言，...），以及用于 Scheme 的虚拟机和编译器。

这些示例开始缓慢而简单，并建立在困难之上，直到您达到相当大、复杂和独立的系统。这是真正了解编程语言如何工作以及如何管理代码中的复杂性和抽象性的终极体验。读完这本书，你会成为一个更好的程序员，我可以向你保证。

抱歉，本书中没有客户端-服务器应用程序，但是开发的系统会让你准备好在 Scheme 中处理相当复杂的编程任务。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-17T22:59:01.680

请参阅[实用的通用 Lisp](http://www.gigamonkeys.com/book/)。另外，我认为 Racket 的一些教程非常好：例如，[构建一个 web 应用程序](http://docs.racket-lang.org/continue/index.html)。也就是说，没有教程或书籍会涵盖一个可以部署的全功能应用程序的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T07:04:26.460

实际上，[Practical Common Lisp](http://gigamonkeys.com/book/)描述了很多有用的模式和方法。还可以看看[Lisp Land of Lisp](http://landoflisp.com/)和[Lisp Outside the Box](http://lisp-book.org/)，这还没有完成，唉。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T06:20:41.643

就个人而言，我发现[这本书](http://norvig.com/paip.html)非常有用。它经常采用以 AI 为中心的方法（正如人们所期望的那样，鉴于标题），但它也涵盖了更广泛的主题（尤其是 PL 的东西 [特别是编译器和解释器]），并且它提供了对常见 lisp 的深入理解。作为替代方案，我也喜欢 Graham 的[On Lisp](http://paulgraham.com/onlisp.html)的“深奥”的 lispiness（高级宏，对 PL 实现的一些进一步探索）。是的，SICP 不会出错。狩猎愉快。

# php - PHP 模块在 ts_allocate_dtor 上崩溃

> ID：10200193
> 
> 赞同：2
> 
> 时间：2012-04-17T22:33:41.157
> 
> 标签：php, module, gdb

我在 Linux 上运行 PHP 5.4.0。

这是 ZEND_MINIT_FUNCTION 中的代码

```
#ifdef ZTS
ts_allocate_id( &sample_globals_id,
    sizeof(zend_sample_globals),
    (ts_allocate_ctor) php_sample_init_globals,
    (ts_allocate_dtor) php_sample_destroy_globals);
#else
    php_sample_init_globals(& sample_globals TSRMLS_CC);
#endif 
```

当模块完成其 MSHUTDOWN 时，此代码崩溃。GDB 指向 TSRM.c ，这一行（对 dtor 的调用）：

```
if (p->storage[j]) {
    if (resource_types_table && !resource_types_table[j].done && resource_types_table[j].dtor) {
    resource_types_table[j].dtor(p->storage[j], &p->storage);
    }
free(p->storage[j]);
} 
```

更奇怪的是，当我用 NULL 替换析构函数时，它可以工作。像这样：

```
ts_allocate_id( &sample_globals_id,
    sizeof(zend_sample_globals),
    (ts_allocate_ctor) php_sample_init_globals,
    NULL ); //Works, but destructor is not called 
```

也许有人知道为什么会发生这种情况？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T10:56:58.890

找到了。奇怪的是，这在任何教程中都没有描述，但答案在于 ext 目录中的源代码。

我已将下一个代码添加到 MSHUTDOWN

```
#ifdef ZTS
    ts_free_id(sample_globals_id); 
#endif 
```

现在它工作正常。呼...

# google-maps - 谷歌地图显示为灰色框

> ID：10200197
> 
> 赞同：1
> 
> 时间：2012-04-17T22:34:07.163
> 
> 标签：google-maps, google-maps-api-3

我正在为一个 drupal 站点开发这个应用程序。使用来自 api 站点的示例，我得到的地图可以与固定 javascript 的硬连线 html 一起正常工作。但我真的需要使用 ajax 并且具有相同数据的 ajax 函数只显示灰色框。

使用 alert() 我已经确认数据通过 ajax 调用正确进入函数，地图中心和缩放也是如此。一个关键的区别是硬连线的 html 在标签中使用了一个 onload="fcn()" 根据谷歌的例子，但我似乎需要在我的 . js文件而不是没有定义函数。当我尝试使用该函数时，它从未被触发。这段代码需要使用函数吗？诚然我没有很多javascript经验。这是我的js。第一行data 有一些参数，第二个是纬度，第三个是经度，最后一个是标记标题。

PS - 不知道为什么我不能得到最后一组 }); 显示在代码框中。

```
jQuery(document).ready(function() {

    jQuery.get('http://www.example/get_customer_geo', function(result) {

      var rows = result.split(';');
      var parms = rows[0].split(',');
      var midlat = parseFloat(parms[0]);
      var midlon = parseFloat(parms[1]);
      var LatlngCtr = new google.maps.LatLng(midlat,midlon);
      var zoomval = parms[2];
      var latitude = rows[1].split(',');
      var longitude = rows[2].split(',');
      var titles = rows[3].split(',');
      var myLatlng = new Array();
      var marker = new Array();

      for (i=0; i<latitude.length; i++)
      {
          myLatlng[i] = new google.maps.LatLng(parseFloat(latitude[i]),parseFloat(longitude[i]));
      }

      var myOptions = {
          zoom: zoomval,
          center: LatlngCtr,
          mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("map_terr"), myOptions);

      for (i=0; i<latitude.length; i++)
      {
          marker[i] = new google.maps.Marker({
            position: myLatlng[i],
            map: map,
            title: titles[i]
          });

      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:08:23.433

我也不能用`<Body onload=“initialize()”&gt;`。我离开了股票`function initialize ()`，只是将此侦听器添加为我的地图脚本的最后一部分`google.maps.event.addDomListener(window, "load", initialize);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T16:02:26.370

我通过确保定义地图的坐标解决了同样的问题。我的地图显示为灰色的原因是浏览器没有提供地理位置信息。我为 lat 和 long 设置了默认值，现在地图出现了。

# cairo - 如何让 Pango Cairo 正确换行？

> ID：10200201
> 
> 赞同：3
> 
> 时间：2012-04-17T22:34:33.713
> 
> 标签：cairo, pango, pycairo, pangocairo

我在让 Pango Cairo 自动换行时遇到问题。下面是一些演示代码。我将布局的宽度设置为与红色矩形相同，所以我希望它会包裹到红色矩形。实际上，它只是在每一行上放一个单词，就好像宽度设置得非常小一样。如果我使用 pango.WRAP_WORD_CHAR，我只会得到一个字符。

我究竟做错了什么？如何让布局包裹到我指定的宽度？

**编辑**如果我将宽度设置为 100000，则单词会正确换行。这意味着 set_width 和构造参数使用不同的单位。有任何想法吗？

```
# -*- coding: utf-8 -*-
import sys

import cairo
import pango
import pangocairo

SIZE = 200
HALF = 100
QUARTER = 50

surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, SIZE, SIZE)

context = cairo.Context(surface)
context.set_source_rgb(1, 0, 0)
context.rectangle(QUARTER, QUARTER, HALF, HALF)
context.fill()

context.set_source_rgb(1, 1, 0)

context.translate(QUARTER, QUARTER)

pangocairo_context = pangocairo.CairoContext(context)
layout = pangocairo_context.create_layout()

layout.set_width(HALF)
layout.set_alignment(pango.ALIGN_LEFT)
layout.set_wrap(pango.WRAP_WORD)
layout.set_font_description(pango.FontDescription("Arial 10"))
layout.set_text("The Quick Brown Fox Jumps Over The Piqued Gymnast")

pangocairo_context.update_layout(layout)
pangocairo_context.show_layout(layout)

context.show_page()

with file("test.png", "w") as op:
    surface.write_to_png(op) 
```

![自动换行](../Images/b29699c605a7d3c62dd6277c4a9a5d15.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:06:08.097

我找到了答案。该值必须乘以`pango.SCALE`。在 C API 中的函数的文档中似乎没有提到这一点。

# algorithm - 最小化数字加权和的绝对值

> ID：10200202
> 
> 赞同：1
> 
> 时间：2012-04-17T22:34:41.310
> 
> 标签：algorithm, linear-programming, operations-research

我的部分问题是最小化某些数字的加权和的绝对值。我必须找到重量。

假设我有一组数字 A、a1、a2、a3 和 a4，这样 (a1, a2 > 0), (a3, a4 < 0)

例如，最小重量为 0.1 (10%)，最大重量为 0.4 (40%)。我正在寻找权重**w**以使加权和为零；如果不可能为零，则最接近于零。可以使用一个简单的线性模型来实现这一点：

```
Minimise E

E >= SUM w * a
E >= -(SUM w * a)
SUM w = 1
w >= 0.1 for all w
w <= 0.4 for all w 
```

一个简单的线性程序足以快速找到解决方案。但是，我非常想为这个问题找到一个多项式算法或公式。有任何想法吗？这个问题众所周知吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T02:27:55.163

最小化（或最大化）`SUM w * a`很容易；将所有权重设置为最小值，然后从最小到最大（分别从最大到最小）增加关于局部最大值的权重，直到达到全局最大值。

如果 [min, max] 区间包含 0，则最优解可以实现为这两个解的凸组合。否则，使解更接近于 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:50:12.827

[椭球算法](http://en.wikipedia.org/wiki/Linear_programming#Ellipsoid_algorithm.2C_following_Khachiyan)是线性规划的第一个最坏情况多项式时间算法。

但是，我怀疑您想快速解决问题，这就是您对多项式时间算法感兴趣的原因。

**在这种情况下，使用单纯形法**会更好。尽管单纯形在最坏的情况下是指数的，但它似乎是大多数实际应用的最佳选择。毫不奇怪，它在我所知道的所有高质量求解器中都实现了。

# scala - 我们可以使用单例 .type 作为类型参数吗？

> ID：10200203
> 
> 赞同：4
> 
> 时间：2012-04-17T22:34:43.243
> 
> 标签：scala, types, type-parameter

我正在拼凑这个问题的答案：[Scala mixin to class instance](https://stackoverflow.com/questions/7949819/scala-mixin-to-class-instance/10199639#10199639)，我展示了一种将另一个特征或类实例“混合”到现有实例的方法：

```
case class Person(name: String)
val dave = Person("Dave")
val joe  = Person("Joe")

trait Dog { val dogName: String }
val spot = new Dog { val dogName = "Spot" }

implicit def daveHasDog(p: dave.type) = spot

dave.dogName //"Spot"
joe.dogName  //error: value dogName is not a member of Person 
```

所以在局部隐式def之后，`dave`可以有效地作为一个`Person with Dog`. 我的问题是，如果我们想定义一个方法，`Person`它只在`Person`有 a 的地方接受一个实例`Dog`，我们该怎么做？

我可以定义一个方法，例如

```
def showDog(pd: Person with Dog) = pd.name + " shows " + pd.dogName 
```

然而这并没有好处，`dave`因为他仍然只是一个`Person`，尽管他有隐含的变形能力。

我尝试定义

```
trait Dog [T] { val dogName: String }
val spot = new Dog [dave.type] { val dogName = "Spot" }
def showDog(p: Person)(implicit dog: Dog[p.type]) = ... 
```

但这不合法，给予`error: illegal dependent method type`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:24:14.140

如果您使用 编译`-Ydependent-method-types`，您的原始代码将使用以下定义`showDog`：

```
scala> def showDog(p: Person)(implicit ev: p.type => Dog) = p.name + " shows " + p.dogName
showDog: (p: Person)(implicit ev: p.type => Dog)java.lang.String

scala> showDog(dave)
res1: java.lang.String = Dave shows Spot 
```

# apache - Apache 子域重定向到 Tomcat

> ID：10200204
> 
> 赞同：3
> 
> 时间：2012-04-17T22:34:54.523
> 
> 标签：apache, tomcat, subdomain, mod-proxy, mod-jk

我对 Apache HTTP 和系统管理员很陌生，所以我有这个问题我有一个域（www.doamin.com），其中一个 Apache 监听端口 80，我在同一个域上也有一个 Apache Tomcat配置为 8080 端口。

有没有办法配置一个子域（即tomcat.domain.com），所以它会重定向到我的tomcat特定应用程序，所以用户可以通过app1.domain.com和app2.domain.com访问应用程序（它将被提供由Tomcat）？

我看到很多提到

> mod_jk

和

> mod_proxy

但所有帖子都假设事先了解 Apache。有人可以带我走吗？

非常感谢，-PK。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T08:44:39.460

mod_jk 已过时。建议使用 mod_proxy（mod_proxy_http 或 mod_proxy_ajp）将转发请求到您的 apache 服务器连接到 tomcat。

1.  在你的 apache 配置中定义一个虚拟主机
2.  创建一个代理指令，将您的请求转发到 tomcat

也许这个[SO question](https://stackoverflow.com/questions/956361/apache-tomcat-using-mod-proxy-instead-of-ajp)会给你一些提示。

您可以定义两个具有指定应用程序代理定义的虚拟主机（app1.domain.tld 和 app2.domain.tld）。app1 的示例：

```
<VirtualHost *:80>
    ServerName app1.domain.tld
    ProxyRequests Off
    ProxyPreserveHost On
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    ProxyPass / http://localhost:8080/app1
    ProxyPassReverse / http://localhost:8080/app1
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T13:32:20.050

虽然 Magomi 几乎是对的，

提出一个确切的方法来做到这一点。

1.  将您的子域添加到 DNS 服务器

2.  将 *mod_proxy* 集成到*httpf.conf 中*：

> ```
> LoadModule proxy_module modules/mod_proxy.so
> LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
> LoadModule proxy_balancer_module modules/mod_proxy_balancer.so
> LoadModule proxy_connect_module modules/mod_proxy_connect.so
> LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
> LoadModule proxy_http_module modules/mod_proxy_http.so
> LoadModule proxy_scgi_module modules/mod_proxy_scgi.so 
> ```

1.  定义两个虚拟主机如下

    > 名称虚拟主机 *:80
    > 
    > ```
    > <VirtualHost *:80>
    >     ServerName application.domain.com
    >     ProxyRequests Off
    >     ProxyPreserveHost On
    >     <Proxy *>
    >         Order deny,allow
    >         Allow from all
    >     </Proxy>
    >     ProxyPass / http://www.domain.com:8080/application/
    >     ProxyPassReverse / http://www.domain.com:8080/application/
    > </VirtualHost>
    > 
    > <VirtualHost *:80>
    >     DocumentRoot C:\<pathToApache>\www
    >     ServerName www.domain.com
    > </VirtualHost> 
    > ```

这会将您的站点 (www.domain.com) 定向到您的 Apache HTTP 服务器，并将所有对*应用程序*的调用重定向到 Tomcat。

希望这可以帮助，

**-PK**

# java - 如何在java中添加一系列sql时间值

> ID：10200209
> 
> 赞同：1
> 
> 时间：2012-04-17T22:35:16.667
> 
> 标签：java, sql, time

我有一个 Time 对象的 ResultSet，它们是两次之间的差异。它们在分钟到秒的范围内，例如“00:01:12”或“00:00:22”

如何将这些 java.sql.time 值加在一起成为时间的总和？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:08:36.287

```
public Date sumDates(String[] dateStrings, DateFormat df) {
    int secs=0, mins=0, hrs=0;
    Calendar calendar = Calendar.getInstance();
    for (int i=0; i<dateStrings.length; i++) {
        String dateString = dateStrings[i];
        Date date = (Date) df.parse(dateString);
        calendar.setTime(date);
        secs += calendar.get(Calendar.SECOND);
        mins += calendar.get(Calendar.MINUTE);
        hrs += calendar.get(Calendar.HOUR);
    }
    calendar.set(0, 0, 0, hrs, mins, secs);
    return calendar.getTime();
} 
```

使用示例：

```
String[] dateStrings = { "00:01:12", "00:00:22" };
DateFormat df = new SimpleDateFormat("hh:mm:ss");
Date total = sumDates(dateStrings, df);
System.out.println(df.format(total)); //output: 00:01:34 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:05:11.483

java.sql.Time 旨在表示时间点，而不是持续时间，因此您不能直接对该类的对象进行算术运算。我有点惊讶没有 Duration 的 java.sql 模拟，因为一些 RDBMS 提供了区别。无论如何，您始终可以手动执行此操作，使用（半伪）代码如下：

```
int totalSeconds = 0;
for (java.sql.Time s : myResultSet) {
    totalSeconds += s.getHours()*3600 + s.getMinutes()*60 + s.getSeconds();
} 
```

# actionscript-3 - 网格布局 - 非常奇怪的结果

> ID：10200210
> 
> 赞同：0
> 
> 时间：2012-04-17T22:35:19.187
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我尝试在我的 Air 应用程序上使用网格布局。即使组件允许使用相同的 colspan，左右屏幕上的宽度也不相同。

看文字区域的宽度，很奇怪不是吗？

```
<s:NavigatorContent label = "Famille" width = "{mainGroup.width}" height = "{mainGroup.height}">
                <s:VGroup  height="100%" width="{mainGroup.width}" paddingLeft="5" paddingRight="5" verticalAlign="middle">
                    <s:BorderContainer width="100%" verticalCenter="0" borderColor="#A8CB17">
                        <mx:Grid width="{mainGroup.width - 10}" height="{mainGroup.height}"
                                 paddingBottom="5" paddingTop="5" paddingLeft="5" paddingRight="5">
                            <mx:GridRow id="far1" verticalAlign="middle" width="100%" >
                                <mx:GridItem colSpan="1" width="100%" verticalAlign="middle"/>
                                <mx:GridItem colSpan="6" width="100%" verticalAlign="middle" horizontalAlign="left">
                                    <s:Label text="Fratrie" horizontalCenter="0" textAlign="left" />
                                </mx:GridItem>
                                <mx:GridItem colSpan="2" width="100%" verticalAlign="middle"/>
                            </mx:GridRow>
                            <mx:GridRow id="far2" verticalAlign="middle" width="100%" >
                                <mx:GridItem colSpan="1" width="100%" verticalAlign="middle"/>
                                <mx:GridItem colSpan="6" width="100%" verticalAlign="middle">
                                    <s:TextArea heightInLines="8" width="100%" id="taFrat"/>
                                </mx:GridItem>
                                <mx:GridItem colSpan="2" width="100%" verticalAlign="middle"/>
                            </mx:GridRow>
                            <mx:GridRow id="far3" verticalAlign="middle" width="100%" >
                                <mx:GridItem colSpan="2" width="100%" verticalAlign="middle">
                                    <s:Label text="Antécédents Familiaux" horizontalCenter="0" textAlign="right" />
                                </mx:GridItem>
                                <mx:GridItem colSpan="1" width="100%" verticalAlign="middle">
                                    <s:CheckBox label="Alerte" id="afA"/>
                                </mx:GridItem>
                                <mx:GridItem colSpan="1" width="100%" verticalAlign="middle">
                                    <s:CheckBox label="RAS" id="afRAS"/>
                                </mx:GridItem>
                                <mx:GridItem colSpan="1" width="30" verticalAlign="middle"/>
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:Label text="Antécédents Familiaux ODF" horizontalCenter="0" textAlign="right" />
                                </mx:GridItem>
                            </mx:GridRow>
                            <mx:GridRow id="far4" verticalAlign="middle" width="100%" >
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:TextArea heightInLines="8" width="100%" id="taanfam"/>
                                </mx:GridItem>

                                <mx:GridItem colSpan="1" width="30" verticalAlign="middle"/>
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:TextArea heightInLines="8" id="taAnFamOrtho" width="100%"/>
                                </mx:GridItem>

                            </mx:GridRow>

                            <mx:GridRow id="far5" verticalAlign="middle" width="100%" >
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:Label text="Divers 3" horizontalCenter="0" textAlign="right" />
                                </mx:GridItem>

                                <mx:GridItem colSpan="1" width="100%" verticalAlign="middle"/>
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:Label text="Divers 4" horizontalCenter="0" textAlign="right" />
                                </mx:GridItem>
                                <!--                                    <mx:GridItem colSpan="2" width="100%" verticalAlign="middle"/>
                                -->                                </mx:GridRow>
                            <mx:GridRow id="far6" verticalAlign="middle" width="100%" >
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:TextArea heightInLines="8" width="100%" id="taDiv3"/>
                                </mx:GridItem>
                                <mx:GridItem colSpan="1" width="100%" verticalAlign="middle"/>
                                <mx:GridItem colSpan="4" width="100%" verticalAlign="middle">
                                    <s:TextArea heightInLines="8" width="100%" id="taDiv4"/>
                                </mx:GridItem>
                                <mx:GridItem colSpan="2" width="100%" verticalAlign="middle"/>
                            </mx:GridRow>
                        </mx:Grid>
                    </s:BorderContainer>
                </s:VGroup>
            </s:NavigatorContent> 
```

现在，截图： ![结果](../Images/4ae7cd53b0c372906d60415d1f80ba60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:33:58.443

```
<mx:Grid width="100%" height="100%" paddingBottom="5" paddingTop="5" paddingLeft="5" paddingRight="5" horizontalGap="5">
  <mx:GridRow id="far1" verticalAlign="middle" width="100%" >
    <mx:GridItem colSpan="1" width="20%" verticalAlign="middle"/>
    <mx:GridItem colSpan="6" width="60%" verticalAlign="middle" horizontalAlign="left">
      <mx:Label text="Fratrie" horizontalCenter="0" textAlign="left" />
    </mx:GridItem>
    <mx:GridItem colSpan="1" width="20%" verticalAlign="middle"/>
  </mx:GridRow>

  <mx:GridRow id="far2" verticalAlign="middle" width="100%" >
    <mx:GridItem colSpan="1" verticalAlign="middle"/>
    <mx:GridItem colSpan="6" verticalAlign="middle">
      <mx:TextArea   width="100%" id="taFrat"/>
    </mx:GridItem>
  </mx:GridRow>

  <mx:GridRow id="far3" verticalAlign="middle" width="100%" >
   <mx:GridItem colSpan="2"  verticalAlign="middle">
     <mx:Label text="Antécédents Familiaux" horizontalCenter="0" textAlign="right" />
   </mx:GridItem>
   <mx:GridItem colSpan="1"  verticalAlign="middle">
     <mx:CheckBox label="Alerte" id="afA"/>
   </mx:GridItem>
   <mx:GridItem colSpan="1"  verticalAlign="middle">
     <mx:CheckBox label="RAS" id="afRAS"/>
   </mx:GridItem>
   <mx:GridItem colSpan="4" verticalAlign="middle">
     <mx:Label text="Antécédents Familiaux ODF" horizontalCenter="0" textAlign="right" />
   </mx:GridItem>
 </mx:GridRow>

 <mx:GridRow id="far4"  width="100%" >
   <mx:GridItem colSpan="4" >
     <mx:TextArea   width="100%" id="taanfam"/>
    </mx:GridItem>
    <mx:GridItem colSpan="4"  >
      <mx:TextArea   id="taAnFamOrtho" width="100%"/>
    </mx:GridItem>
 </mx:GridRow>

 <mx:GridRow id="far5" verticalAlign="middle" width="100%" >
   <mx:GridItem colSpan="4" verticalAlign="middle">
     <mx:Label text="Divers 3" horizontalCenter="0" textAlign="right" />
   </mx:GridItem>
   <mx:GridItem colSpan="4" verticalAlign="middle">
     <mx:Label text="Divers 4" horizontalCenter="0" textAlign="right" />
   </mx:GridItem>
 </mx:GridRow>

 <mx:GridRow id="far6" width="100%" >
   <mx:GridItem colSpan="4">
     <mx:TextArea   width="100%" id="taDiv3"/>
   </mx:GridItem>
   <mx:GridItem colSpan="4" >
     <mx:TextArea width="100%" id="taDiv4"/>
   </mx:GridItem>
 </mx:GridRow>

</mx:Grid> 
```

# objective-c - 故事板：无法将文本字段添加到 UITableViewController 中的单元格

> ID：10200219
> 
> 赞同：1
> 
> 时间：2012-04-17T22:36:16.377
> 
> 标签：objective-c, xcode4.2

将文本字段拖到 UITableViewController 中的单元格时遇到问题。它只是不会粘住。为什么是这样？

这是我的设置：

内容：静态单元格样式：将 2 行分组到一个部分

我试图将 textField 插入其中一个单元格，但不会留在原地。

# installation - 在一个 Win7 安装中设置 openerp 6.1 中的 webclient 主机名

> ID：10200221
> 
> 赞同：0
> 
> 时间：2012-04-17T22:36:26.187
> 
> 标签：installation, webclient, config, openerp

系统：Win7 Home，一键开启ERP 6.1

如何将集成的 Webclient 主机名设置`localhost:8069`为`127.0.0.1:8069`？我需要从 Internet 访问机器以进行开发。

在 6.0 版中，我可以在文件中找到 webclient 的主机名参数`openerp-web.cfg`。但在 6.1 版中，webclient 嵌入在核心中，并且没有`openerp-web.cfg`.

**openerp-server.conf**

```
[options]
without_demo = False
smtp_port = 25
db_template = template0
db_password = XXXXXX
xmlrpcs = True
xmlrpcs_interface = 
syslog = False
logrotate = True
xmlrpcs_port = 8071
test_report_directory = False
list_db = True
timezone = False
xmlrpc_interface = 
test_file = False
cache_timeout = 100000
smtp_password = False
secure_pkey_file = server.pkey
xmlrpc_port = 8069
log_level = info
xmlrpc = True
test_disable = False
admin_passwd = XXXXX
assert_exit_level = error
smtp_server = localhost
static_http_url_prefix = None
unaccent = False
test_commit = False
proxy_mode = False
demo = {}
db_host = localhost
login_message = False
import_partial = 
pidfile = False
db_maxconn = 64
osv_memory_count_limit = False
reportgz = False
osv_memory_age_limit = 1.0
netrpc_port = 8070
db_port = 5432
virtual_memory_reset = 671088640
db_name = False
debug_mode = False
netrpc = True
secure_cert_file = server.cert
logfile = C:\Program Files (x86)\OpenERP 6.1-1\server\openerp-server.log
csv_internal_sep = ,
virtual_memory_limit = 805306368
pg_path = C:\Program Files (x86)\OpenERP 6.1-1\PostgreSQL\bin
static_http_enable = False
cpu_time_limit = 60
translate_modules = ['all']
smtp_ssl = False
server_wide_modules = None
netrpc_interface = 
smtp_user = False
log_handler = [':INFO']
db_user = XXXXX
dbfilter = .*
max_cron_threads = 4
email_from = False
addons_path = C:\Program Files (x86)\OpenERP 6.1-1\server\openerp\addons
static_http_document_root = None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:40:43.213

```
xmlrpc_interface = my_ip
xmlrpc_port = my_port 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T13:37:08.363

无需更改 openerp 上的任何内容：

1-创建一个 dyndns 帐户（我使用 no-ip.com），如果您的路由器可配置为使用动态 dns，那么好的，否则您需要在托管 openerp 的机器上安装一个客户端。

完成后，您可以连接到[http://xxx.np-ip.org:8069](http://xxx.np-ip.org:8069)

# linux - Linux 上的 Eclipse 配置

> ID：10200222
> 
> 赞同：0
> 
> 时间：2012-04-17T22:36:26.050
> 
> 标签：linux, eclipse, configuration

我刚刚下载了适用于 Linux 的 Java 开发的 Eclipse IDE，我正在尝试为自己配置一种舒适的方式。我遵循了本教程：

[http://flurdy.com/docs/eclipse/install.html](http://flurdy.com/docs/eclipse/install.html)

我从“The Eclipse”这一点开始。但是它不能按照我希望的方式工作，我的意思是我现在可以从桌面图标启动 Eclipse，但是**当我最小化它时，我无法再次回到它**（无法使用“Alt+Tabing “通过打开的应用程序），**当我在最小化它后单击 Eclipse 图标时，会启动一个新的 Eclipse 实例并且存在工作区冲突**. 我也有将它添加到桌面栏的问题，我习惯于拥有所有重要且经常使用的应用程序的快捷方式（我也希望将其最小化，然后通过单击该栏上的图标再次返回它）。这是当我尝试将图标从桌面简单地拖放到栏时的小屏幕的样子 - 该位置已填满，但不可见。我尝试创建一个指向该图标的链接并将其拖放到栏上，然后图标是正确的，但它仍然运行 Eclipse :/ 的新实例。在这种情况下该怎么办？

![在此处输入图像描述](../Images/1a6e1dbbcd7d72d6732f5a67d533309a.png)

# php - CakePHP：适当的控制器、模型和动作结构

> ID：10200227
> 
> 赞同：3
> 
> 时间：2012-04-17T22:36:56.183
> 
> 标签：php, model-view-controller, cakephp

我有一个带有数据库表的简单 Web 应用程序，`orders`并且`products`我正在使用 CakePHP 进行改造。还有更多，但为了简单起见，我在这里只使用这两个。在 Web 应用程序中，我希望能够搜索项目、搜索订单并执行与订单相关的工作，但我在设置和选择用于制作此 Web 应用程序的组件时遇到了困难。作为我的问题的一个例子，我有以下页面。看看下面的布局。

```
|------------------------------|   
|            My App            | 
|------------------------------|
|Search <--| search order      |
|Orders    | search product    |
|etc.      |                   |
|          |                   |
|          |                   |
|------------------------------| 
```

图：显示的左侧导航栏和正文。箭头表示我们所在的页面。

1.  控制器：对于这个搜索***页面***，应该使用哪些控制器？我现在默认`PagesController`使用静态页面，但是这个搜索页面真的应该使用`PagesController`吗？我也有`ProductsController`，并且`OrdersController`是在我创建`Product`和`Order`模型时创建的，但使用一个全新的控制器似乎更合适，也许是一个名为`SearchController`. 这样，URL`myapp/search/...`就会保留在下面，不会到处乱窜。这是正确的方法吗？（我知道我可以重写 URL，但那是以后的事了）

2.  模型和行动：我有`Product`模型`Order`。这些模型中的每一个都有针对其各自数据库表的搜索逻辑。如果为上述页面创建了一个新控制器，那么该控制器可以简单地使用这些模型的操作，对吗？我正在阅读控制器和模型分离是完全正常的，实际上是一件好事。一开始我以为他们是一起走的，但是越熟悉CakePHP，似乎就相反了。

3.  如果我的方法（从 1 和 2 开始）不是低效、错误或不合适的，您能否建议一个好的结构来设置这个特定页面，以说明要使用哪些控制器以及控制器应该如何使用模型及其操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:01:39.230

我建议您使用另一个搜索控制器。在搜索控制器内部，在类级别只需添加这一行`var $uses = array('Order', 'Product');`，以便您可以访问 Order 和 Product 表。

只需使用`$this->Order->find()`和`$this->Product->find()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:58:58.920

**TLDR：**

真正的答案是——个人喜好。无论您是创建一个`SearchesController`还是使用`ProductsController`and `OrdersController`（但不要使用PagesController），这都不是什么大问题。

**我的偏好和推理**

我会创建一个`SearchesController`. 这对于组织目的最有意义。您所有的搜索功能都可以在同一个控制器中，您所有的搜索视图都将在“Views/Searches/”文件夹中，任何/所有相关的 css 和 javascript 都可以在`/css/searches`or中`/js/searches/`（如果您喜欢像我一样组织）。

您还需要创建一个 Search 模型 ( `Models/Search.php`) 并在其中添加： `public $useTable = false;` [[details]](http://book.cakephp.org/2.0/en/models/model-attributes.html#usetable)以告诉它您不会创建`searches`表格。

在 SearchController 的每个操作中，例如`function orders()`和`function products()`，您可以使用`$this->loadModel('Order');` [[details]](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aloadModel)来使这些模型可以从 访问`SearchesController`，然后运行您的搜索。

为了坚持“胖模型，瘦控制器”的口头禅，我建议保持你的控制器代码小 - 像这样：

```
$opts = array('limit'=>5);
$orders = $this->Order->search($string, $opts); 
```

然后，在您的 Order 模型中（根据此示例），执行逻辑的核心（以下是粗略的想法）：

```
public function search($string = null, $opts = null) {
    $params = array();
    $params['limit'] = 10; //sets default
    if(!empty($opts['limit'])) $params['limit'] = $opts['limit'];
    //... build options, contains, limits...etc
    return $this->find('all', $params);
} 
```

将所有控制器操作放在一起可以让您更轻松地进行全面更改 - 例如，如果您想为每个页面的结果设置一个变量来更改所有搜索页面......等等。我敢肯定还有很多其他的想法，但最重要的是，它将相似的代码放在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T22:45:19.683

1.  您不需要为此创建新的控制器。您可以在该控制器上拥有相同的控制器（例如 Products）和一个名为 Search 的操作。所以您的链接将指向 /Products/Search
2.  即使创建一个新的控制器，您也可以通过导入它们对应的控制器来访问其他模型
3.  我会建议坚持 Cake 通常做的事情，为应用程序中的每个模型创建一个控制器。通常，每个模型都应该是一个类，代表您要转换到系统中的场景中的实体（物理或逻辑），并且您将拥有每个方法的控制器。

# php - 想要从左到右列出 php 数组结果

> ID：10200229
> 
> 赞同：0
> 
> 时间：2012-04-17T22:36:59.110
> 
> 标签：php, arrays

这是一个基本问题，但我无法在任何地方找到答案。我想从左到右列出我的 php 数组结果，然后当到达行尾时，开始一个新行。像这样：

1 2 3 4

5 6 7

看起来很简单，但让我发疯。不能用表格来做，用 css div 试过无济于事。

这是我想要的每个结果页面上的代码：

```
 <?php 
if ($this->meeting){
?><?php
foreach($this->meeting as $meet){
echo date_bl($meet->date,$meet->time);
echo '<br />';
echo $meet->place;
echo '<br />';
echo $meet->address;
echo '<br />';
echo $meet->city.", ".$meet->state." ".$meet->zip;
echo '<br />';
}}else{}?> 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:39:32.277

## PHP

```
<?php 
if($this->meeting){
 echo '<ul class="list">';
 foreach($this->meeting as $meet){
  echo '<li>';
  echo date_bl($meet->date,$meet->time);
  echo '<br />';
  echo $meet->place;
  echo '<br />';
  echo $meet->address;
  echo '<br />';
  echo $meet->city.", ".$meet->state." ".$meet->zip;
  echo '<br />';
  echo '</li>';
 }
 echo '</ul>';
} else {

}
?> 
```

## CSS

```
.list {
 margin:0;
 padding:0;
 list-style:none;
}
.list li {
 width:200px;
 display:inline-block;
 padding:5px 9px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:41:52.027

更简单：

```
<p><?php echo implode(' ', $array); ?></p> 
```

在不知道数组结构的情况下，这是我能提供的最简单的东西。

# java - 使用 Executor 创建 ScheduledThreadPoolExecutor

> ID：10200230
> 
> 赞同：3
> 
> 时间：2012-04-17T22:37:14.720
> 
> 标签：java, java.util.concurrent

我对为什么以下演员表不起作用感到非常困惑：

```
ScheduledThreadPoolExecutor timeoutControl = (ScheduledThreadPoolExecutor) Executors.newSingleThreadScheduledExecutor(); 
```

ScheduledThreadPoolExecutor 实现了 ScheduledExecutorService。如果我不能将它与实际类一起使用，那么这个 Executors 调用的意义何在。

我用错了吗（可能），有人可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T22:47:18.023

问题是它`Executors.newSingleThreadScheduledExecutor();`实际上不返回一个`ScheduledThreadPoolExecutor`.

类中的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/Executors.java#Executors.newSingleThreadScheduledExecutor%28%29)`Executors`：

```
public static ScheduledExecutorService newSingleThreadScheduledExecutor() {
        return new DelegatedScheduledExecutorService
            (new ScheduledThreadPoolExecutor(1));
} 
```

这些`Delegated...`类（也有一个`DelegatedExecutorService`）只是将所有调用传递给底层执行程序，`ScheduledThreadPoolExecutor`在这种情况下。代码中的注释表明这些类的全部意义在于隐藏底层执行程序可能具有的所有非接口方法。

无论如何，最好还是使用接口而不是您正在处理的对象的类版本（`List`而不是`ArrayList`，`ScheduledExecutorService`而不是`ScheduledThreadPoolExecutor`）。

如果您绝对需要在 中`ScheduledThreadPoolExecutor`而不是在 中可用的功能`ScheduledExecutorService`，您可以使用构造函数`ScheduledThreadPoolExecutor`来创建它的实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T22:44:23.490

您应该只将返回的执行程序用作`ScheduledExecutorService`，而不是将其转换为`ScheduledThreadPoolExecutor`.

```
ScheduledExecutorService service = Executors.newSingleThreadScheduledExecutor(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:04:07.623

简化：

实现接口的类可以具有接口没有的其他方法和字段。在这种情况下，该方法返回接口，因此您不能将其向下转换为实现类。

# objective-c - Objective-C 代码到 C 代码

> ID：10200235
> 
> 赞同：0
> 
> 时间：2012-04-17T22:38:13.943
> 
> 标签：objective-c, c

如何将 Objective-C 代码“编译”为（仅）C 代码？
有一种方法可以在 Xcode 中预处理 Objective-C（产品 -> 生成输出 -> 生成预处理文件），但这不是我想要的......

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:42:58.337

clang（现在 Xcode 使用的编译器前端）`-rewrite-objc`内置了一个选项，允许您基于 Objective-C（或 Objective-C++）代码生成 C++ 代码。

只是不要问我如何将它与 Xcode 结合起来。

# android - Eclipse 在异常时打开错误的源文件

> ID：10200245
> 
> 赞同：1
> 
> 时间：2012-04-17T22:38:57.977
> 
> 标签：android, eclipse, classpath, stack-trace, logcat

我在 Eclipse 工作区中有几个 Android 项目：

*   一个带有类的独立应用程序项目`my.package.Foo`
*   具有*不同*类的库项目`my.package.Foo`
*   两个依赖于库项目且不包含源代码的应用程序项目

使用在库项目之上构建的应用程序之一时会出现问题。当它崩溃时（很遗憾，经常发生），我双击 logcat 中的堆栈跟踪行以转到相关源。问题是，如果该行是 for `Foo.java`，Eclipse 总是从独立项目中打开源代码。我可以将 Eclipse 引导到正确源的唯一方法是关闭独立项目，这有点不方便。

有没有办法让 Eclipse 在查找相关源文件时注意哪个应用程序实际崩溃了？我认为这是某种类路径问题（类似于本文中描述的问题[）](https://stackoverflow.com/questions/8823022/eclipse-opens-different-source-file-than-the-editable-one)。但是，我在 Android 运行配置属性中没有看到任何用于修改类路径的内容。Eclipse 似乎总是按名称的字母顺序运行工作区项目，并打开`my/package/Foo.java`它找到的第一个项目。

我正在使用最新的 Android ADT 和 SDK 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T01:41:52.907

根据@blessenm 评论中提供的链接，这是 Eclipse 中 logcat 的问题。我们应该会在 SDK 工具的第 20 版中看到修复。[从这里](https://android-review.googlesource.com/#/c/35462/)可以看出，修复它的补丁已经完成，正在等待最终批准。

同时，最好的办法是更改 logcat 首选项（Window -> Preferences -> Android -> LogCat），以便双击操作是“Go to Problem（方法声明）”而不是默认的“Go to Problem” （错误行）”。这不是万无一失的：它至少会打开文件，但如果有多个同名的方法，它会转到第一个方法，而不管签名。（合并修复后，将不需要双击操作选项，它应该从首选项中消失。）

# c++ - C ++标记字符串不可取消引用

> ID：10200247
> 
> 赞同：0
> 
> 时间：2012-04-17T22:39:22.803
> 
> 标签：c++, visual-studio-2010, debugging, dereference

我的代码出现“不可取消引用的字符串”错误，该代码几乎是从互联网上的某个地方逐字复制的。该应用程序在发布模式（VS 2010）下完美编译，但在调试模式下不断向我抛出错误。它应该在 * 处拆分字符串并将每个单词保存到一个向量中。有没有人有任何想法？它似乎真的不喜欢比较的 (string::npos != found) 部分。

```
string newString = "Something*NotCool";

size_t found = newString.find_first_of("+*-/%()");
size_t lastPos = 0;
//while (found != newString.length)
while (string::npos != found || string::npos != lastPos)
{
    if (found >= newString.length()) break;
    if (found == lastPos)
    {
        lastPos = found+1;
        found = newString.find_first_of("+*-/()", found+1);
    }
    string temp (newString,lastPos,found);
    temp.assign(newString, lastPos, found-lastPos);
    strings.push_back(temp);
    lastPos = found+1;
    found = newString.find_first_of("+*-/()", found + 1);
} 
```

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:03:51.657

您的代码在 VS2010 中没有对我产生任何错误。

由于您可以访问正则表达式（`<regex>`库），因此另一种选择可能是：

```
std::string str = "Something*NotCool";
std::regex re("[^(\\*\\+%/\\-\\(\\))]+");
std::sregex_token_iterator begin(str.begin(), str.end(), re), end;
std::vector<std::string> tokens;
std::copy(begin, end, std::back_inserter(tokens)); 
```

# jquery - jQuery 使用两个类设置验证错误框

> ID：10200250
> 
> 赞同：0
> 
> 时间：2012-04-17T22:39:29.917
> 
> 标签：jquery, jquery-validate

我有一个我的代码，我有一个特别`textarea`是我正在使用主`.error`类，另一个`.textAreaError`放置错误框是我想要的，但我不确定如何配置 textarea 错误以加载到这个特定的框中。

[从上一个问题](https://stackoverflow.com/a/10151646/594235)中，我得到了以下 jQuery 行`function(error, element) { error.appendTo(element.siblings("label")); }`，但我不确定如何将其用于下面的代码。

**jQuery：**

```
jQuery(document).ready(function() { 
    //Home Validation
    onfocusout: true,
    $("#quote").validate({
        rules:{
            companyName:{
                required: true,
                url: true
            }
        }
    }); 
```

**HTML：**

`<div class="error textAreaError">Error Here</div>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:48:38.997

通过查看 validate 插件的[文档](http://docs.jquery.com/Plugins/Validation/validate)，您似乎可以使用使用 function(error, element) 的 errorPlacement 参数来控制错误的位置。代码看起来像这样：

```
jQuery(document).ready(function() { 
    //Home Validation
    $("#quote").validate({
        onfocusout: true,
        rules:{
            companyName:{
                required: true,
                url: true
            }
        },
        errorPlacement: function(error, element) {
            if (element.is("textarea"))
                error.appendTo(".textAreaError");
            else
                error.appendTo(".generalError");
        }
    });
}); 
```

您必须为一般错误框提供 generalError 类。或者，给出错误框的 id 并引用它们（例如“#textAreaError”和“#generalError”）。

# delphi - JPEG 数据流到 TImage

> ID：10200252
> 
> 赞同：9
> 
> 时间：2012-04-17T22:39:34.023
> 
> 标签：delphi, delphi-7, filestream, timage

我有一些图像文件存储在一个文件（某种档案）中。该文件如下所示：

![在此处输入图像描述](../Images/1ec65674e125cace923d383beb1212a5.png)

好吧，它分为两个部分 - 标题和数据段。标题（绿色）包含各种信息，例如相册名称、位置、日期/时间、描述、相册中的照片数量等。数据段（蓝色和橙色）结构简单，包含**N** x JPEG 照片。我可以将该“imagedata”段提取到新的 TMemoryStream 对象中，现在我想使用 TImage 显示它。

我可以使用TMemoryStream 的**SaveAsFile**方法，设置一些临时文件名，从 TImage 加载该文件，然后删除临时文件。那行得通，但我想知道有没有办法使用 temp 将该流发送到 TImage 中。文件。

当然，我可以编写代码来提取硬盘上的所有这些文件，但问题是我有很多像这样的档案，只想编写应用程序来读取这些“相册”，而不是在我的硬盘上保存 20,000 多张照片.

简而言之，我想要的只是使以下程序有效（不使用临时文件）

```
procedure ShowImageFromStream(data: TStream; img: TImage);
begin
...
end; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-17T22:51:25.260

我不确定这是否是您要查找的内容，但是此代码应将 JPEG 文件从流加载到给定的 TImage 组件中：

```
uses
  JPEG;

procedure ShowImageFromStream(AImage: TImage; AData: TStream);
var
  JPEGImage: TJPEGImage;
begin
  AData.Position := 0;
  JPEGImage := TJPEGImage.Create;
  try
    JPEGImage.LoadFromStream(AData);
    AImage.Picture.Assign(JPEGImage);
  finally
    JPEGImage.Free;
  end;
end; 
```

# jquery - 我需要在更新面板中关闭/打开查询输入掩码

> ID：10200254
> 
> 赞同：0
> 
> 时间：2012-04-17T22:40:15.770
> 
> 标签：jquery, asp.net

我在 DotNetNuke 框架中有一个使用 ascx 控件，它允许用户在文本框中输入电话号码。它需要输入掩码 (999) 999-9999 和一个复选框，用于切换输入掩码关闭/打开以允许输入国际号码。我在测试 Chrome 时遇到了 asp.net ajax 控制工具包的几个问题，所以我决定尝试使用 jquery.maskedinput-1.3.min.js 扩展名的 jQuery，即使我是新手，我通过添加应用了掩码以下脚本部分中的代码，但复选框但只能工作一次。我认为这是因为文本框位于更新面板中。该复选框已启用自动回发，但我不知道如何捕获该事件以强制重新加载 javascript。

```
 jQuery(document).ready(function () {
        jQuery(".primarymask").mask("(999) 999-9999");

        jQuery("input[name=ckbIntPrimaryPhone]").click(function () {
            if (jQuery(this).is(":checked")) {
                jQuery(".primarymask").mask("");
            }
            else {
                jQuery(".primarymask").mask("(999) 9999-9999");
            }
        }); 
    }); 
```

我尝试使用下面的代码，然后重复 js 函数，但面具只会消失，直到点击然后一直回来。

```
 var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_endRequest(function () { 
```

\ }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:48:06.343

你可以试试这个：

将此代码放入您的 ascx/aspx 代码文件

```
<asp:ScriptManager ID="ScriptManager1" EnablePartialRendering="true" syncPostBackTimeout="70" runat="server" />

<script language="javascript" type="text/javascript">
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(update_start);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(update_end);
    function update_start(sender, args) {
        // code here executes when update panel begins to update
    }

    function update_end(sender, args) {
        // code here executes when update panel is done updatinging
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:43:27.057

使用 __dopostback('updatePanelId') MSAjax 刷新更新面板

# android - 内存不足错误 ImageView 问题

> ID：10200256
> 
> 赞同：35
> 
> 时间：2012-04-17T22:40:27.057
> 
> 标签：android, out-of-memory

我是 Android 编程新手，我收到一个错误，提示我的应用程序内存不足，这个示例是我从一本书中复制的，它使用的是小图片分辨率，但是当我添加了几张分辨率更高的图片时出现内存错误，可能是我做错了什么，或者只是不知道我应该使用图像的所有内容，如果有人知道我应该更改什么以便不会再次出现此错误，请帮助。谢谢期待！

源代码：

```
public class ImageViewsActivity extends Activity {
//the images to display
Integer[] imageIDs={
        R.drawable.pic1,
        R.drawable.pic2,
        R.drawable.pic3,
        R.drawable.pic4,
        R.drawable.pic5
};  
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final ImageView iv=(ImageView) findViewById(R.id.image1);

    Gallery gallery=(Gallery) findViewById(R.id.gallery);
    gallery.setAdapter(new ImageAdapter(this));
  gallery.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View v, int position, long id){
            Toast.makeText(getBaseContext(), "pic"+(position+1)+" selected", Toast.LENGTH_SHORT).show();

            //display the image selected
            try{iv.setScaleType(ImageView.ScaleType.FIT_CENTER);
              iv.setImageResource(imageIDs[position]);}catch(OutOfMemoryError e){
                     iv.setImageBitmap(null);
                }
        }
    });

}

public class ImageAdapter extends BaseAdapter{
    private Context context;
    private int itemBackground;

    public ImageAdapter(Context c){
        context=c;
        //setting the style
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
        itemBackground = a.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 0);
        a.recycle();
    }

    //returns the number of images
    public int getCount() {
        // TODO Auto-generated method stub
        return imageIDs.length;
    }

    //returns the ID of an item
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    //returns the ID of an item
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    //returns an ImageView view
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ImageView iv= new ImageView(context);
        iv.setImageResource(imageIDs[position]);
        iv.setScaleType(ImageView.ScaleType.FIT_XY);
        iv.setLayoutParams(new Gallery.LayoutParams(150,120));
        iv.setBackgroundResource(itemBackground);

        return iv;
    }
}} 
```

**这里的错误：**

```
04-18 10:38:31.661: D/dalvikvm(10152): Debugger has detached; object registry had 442 entries
04-18 10:38:31.661: D/AndroidRuntime(10152): Shutting down VM
04-18 10:38:31.661: W/dalvikvm(10152): threadid=1: thread exiting with uncaught exception (group=0x4001d820)
04-18 10:38:31.691: E/AndroidRuntime(10152): FATAL EXCEPTION: main
04-18 10:38:31.691: E/AndroidRuntime(10152): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.Bitmap.nativeCreate(Native Method)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.Bitmap.createBitmap(Bitmap.java:499)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.Bitmap.createBitmap(Bitmap.java:466)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:371)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:539)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:508)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:365)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:728)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.content.res.Resources.loadDrawable(Resources.java:1740)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.content.res.Resources.getDrawable(Resources.java:612)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.widget.ImageView.resolveUri(ImageView.java:520)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.widget.ImageView.setImageResource(ImageView.java:305)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at image.view.GalleryView$ImageAdapter.getView(GalleryView.java:95)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.widget.Gallery.makeAndAddView(Gallery.java:776)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.widget.Gallery.fillToGalleryLeft(Gallery.java:695)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.widget.Gallery.trackMotionScroll(Gallery.java:406)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.widget.Gallery$FlingRunnable.run(Gallery.java:1397)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.os.Handler.handleCallback(Handler.java:618)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.os.Handler.dispatchMessage(Handler.java:123)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.os.Looper.loop(Looper.java:154)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at android.app.ActivityThread.main(ActivityThread.java:4668)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at java.lang.reflect.Method.invokeNative(Native Method)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at java.lang.reflect.Method.invoke(Method.java:552)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:917)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:674)
04-18 10:38:31.691: E/AndroidRuntime(10152):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-12T22:06:44.527

为了补充 Ken 的答案，这是一段可靠的代码，我想在他设置好之后我会把它击倒：

```
 if(imageView != null) {
        ((BitmapDrawable)imageView.getDrawable()).getBitmap().recycle();
    }
    imageView = (ImageView) view.findViewById(R.id.imageView);
    imageView.setImageResource(resID); 
```

注意：如果您尝试交换已回收的图像，这将不起作用。你会在 LOGCAT 中得到类似的东西

> 画布：尝试使用回收的位图

因此，如果我不必异步加载一堆不同的图像，我现在要做的就是在处理片段和大背景图像时将其放在 onDestroy 中：

```
@Override
public void onDestroy() {
    super.onDestroy();

    imageView.setImageDrawable(null);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-05-01T02:23:13.777

对于那些使用[Glide](https://github.com/bumptech/glide)图像加载库的人，他们仍然遇到这些`OutOfMemory Exception`问题，你可以做很多事情来`Glide`减少内存的使用，并希望能解决你的问题。这里有几个：

*   不要`android:scaleType="fitXY"`在你的`ImageView`. 所以如果你`ImageView`看起来像这样：

    ```
    <ImageView android:id="@android:id/icon"
           android:layout_width="@dimen/width"
           android:layout_height="@dimen/height"
           android:adjustViewBounds="true" 
           android:scaleType="fitXY" 
          <!-- DON'T USE "fitXY"! -->
    /> 
    ```

    更改`ImageView`以使用不同的`android:scaleType`，最好是：`fitCenter`或`centerCrop`。

*   不要在`wrap_content`你`ImageView`的. _ _ 如果你*真的*坚持在你的. 中使用，至少设置一个/ 。`match_parent``width``height``dp`*`wrap_content``ImageView``android:maxHeight``android:maxWidth`*
**   `dontAnimate()`根据您的`Glide.with()...`要求关闭动画：*   如果您正在加载大量可能较大的图像（就像在列表/网格中一样），`thumbnail(float sizeMultiplier)`请在您的请求中指定负载。前任：

    ```
    Glide.with(context)
       .load(imageUri)
       .thumbnail(0.5f)
       .dontAnimate()
       .into(iconImageView); 
    ```

    *   `Glide`在您的应用程序的某些阶段使用以下命令暂时降低的内存占用： `Glide.get(context).setMemoryCategory(MemoryCategory.LOW)`.

    *   仅在需要时缓存在内存中，您可以`skipMemoryCache(true)`根据您的`Glide.with()...`请求将其关闭：这仍然会将图像缓存到磁盘，您可能会想要它，因为您前面是内存缓存。*   如果您`Drawable`从本地资源加载图像，请确保您尝试加载的图像不是超大的。网上有很多图像压缩工具。这些工具将缩小图像的大小，同时保持其外观质量。*   如果从本地资源加载，请使用`.diskCacheStrategy(DiskCacheStrategy.NONE)`.*   挂钩到`onTrimMemory(int level)`Android 提供的回调，以`Glide`根据需要修剪缓存。前任。

    ```
    @Override
    public void onTrimMemory(int level)
    {
        super.onTrimMemory(level);
        Glide.get(this).trimMemory(level);
    } 
    ```

    *   如果在 a 中显示图像，`RecyclerView`您可以明确清除`Glide`视图何时被回收，如下所示：

    ```
    @Override
    public void onViewRecycled(MyAdapter.MyViewHolder holder)
    {
        super.onViewRecycled(holder);
        Glide.clear(holder.imageView);
    } 
    ```

    *   如果这种情况*仍然*存在，即使在您“尝试了所有方法”之后，问题可能出在**您的应用程序**（GASP！），并且`Glide`只是将其推向`OutOfMemory Exception`区域的一件事......所以请确保您没有应用程序中的任何内存泄漏。`Android Studio`提供用于识别应用程序中的内存消耗问题的工具。*   最后检查[Glide 的 GitHub 上的问题页面](https://github.com/bumptech/glide/issues)，以了解可能提供解决问题的见解的类似问题。回购管理得非常好，他们非常有帮助。*

 ** * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-11-16T11:23:09.563

利用

```
((BitmapDrawable)imageView.getDrawable()).getBitmap().recycle(); 
```

在更改为新图像之前！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-16T08:34:47.243

> 图像有各种形状和大小。在许多情况下，它们比典型应用程序用户界面 (UI) 所需的要大。例如，系统图库应用程序显示使用您的 Android 设备的相机拍摄的照片，这些照片的分辨率通常比您设备的屏幕密度高得多。
> 
> 鉴于您正在使用有限的内存，理想情况下您只想在内存中加载较低分辨率的版本。较低分辨率的版本应该与显示它的 UI 组件的大小相匹配。具有更高分辨率的图像不会提供任何明显的好处，但仍会占用宝贵的内存并由于额外的动态缩放而导致额外的性能开销。

来源：[有效加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

根据上面的信息，我建议您不要像这样设置图像：

```
setImageResource(resId); 
```

像这样设置它：

```
setScaledImage(yourImageView, resId); 
```

并复制和粘贴以下方法：

```
 private void setScaledImage(ImageView imageView, final int resId) {
        final ImageView iv = imageView;
        ViewTreeObserver viewTreeObserver = iv.getViewTreeObserver();
        viewTreeObserver.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
            public boolean onPreDraw() {
                iv.getViewTreeObserver().removeOnPreDrawListener(this);
                int imageViewHeight = iv.getMeasuredHeight();
                int imageViewWidth = iv.getMeasuredWidth();
                iv.setImageBitmap(
                        decodeSampledBitmapFromResource(getResources(),
                                resId, imageViewWidth, imageViewHeight));
                return true;
            }
        });
    }

    private static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
                                                         int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds = true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeResource(res, resId, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeResource(res, resId, options);
    }

    private static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {

        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {

            final int halfHeight = height / 2;
            final int halfWidth = width / 2;

            // Calculate the largest inSampleSize value that is a power of 2 and keeps both
            // height and width larger than the requested height and width.
            while ((halfHeight / inSampleSize) > reqHeight
                    && (halfWidth / inSampleSize) > reqWidth) {
                inSampleSize *= 2;
            }
        }

        return inSampleSize;
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-18T22:50:40.743

您可以将其留给[Glide等 3rd 方库](https://github.com/bumptech/glide)

```
//                imageView.setImageResource(imageId);
                Glide.with(this)  // Activity or Fragment
                        .load(imageId)
                        .into(imageView); 
```

以下是如何将其添加到您的`build.gradle`：

```
compile group: 'com.github.bumptech.glide', name: 'glide', version: '3.7.0' 
```

Square 的 Picasso 也这样做[Picasso 从他们的 URI 加载可绘制资源](https://stackoverflow.com/questions/21158425/picasso-load-drawable-resources-from-their-uri)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-11T18:13:16.760

谷歌有正确（完美）的答案：

[https://developer.android.com/training/displaying-bitmaps/load-bitmap.html](https://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

我如何在片段中使用它的示例：

```
private ImageView mImageView;
private View view;
private int viewWidth;
private int viewHeight;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    view = inflater.inflate(R.layout.fragment_episode_list, container, false);
    mImageView = (ImageView) view.findViewById(R.id.ImageView);

    ViewTreeObserver viewTreeObserver = view.getViewTreeObserver();
    if (viewTreeObserver.isAlive()) {
        viewTreeObserver.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                view.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                viewWidth = view.getMeasuredWidth();
                viewHeight = view.getMeasuredHeight();
                mImageView.setImageBitmap(Methods.decodeSampledBitmapFromResource(getResources(),
                            R.drawable.YourImageName, viewWidth, viewHeight));
            }
        });
    }

    return view;
} 
```

我将这些 Google 方法放入我的“方法”类（放入任何其他有用的方法）：

```
public class Methods {

    ...

    public static int calculateInSampleSize(
            BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {

            final int halfHeight = height / 2;
            final int halfWidth = width / 2;

            // Calculate the largest inSampleSize value that is a power of 2 and keeps both
            // height and width larger than the requested height and width.
            while ((halfHeight / inSampleSize) >= reqHeight
                    && (halfWidth / inSampleSize) >= reqWidth) {
                inSampleSize *= 2;
            }
        }

        return inSampleSize;
    }

    public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
                                                         int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeResource(res, resId, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeResource(res, resId, options);
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-18T05:00:52.220

@Sakiboy 回答的附加说明。尽管我的回答可能为时已晚，但这是我的解决方案，我发现它无需进行大量代码更改即可工作。

*   用于`Glide`处理所有缓存。
*   要清除更多内存，您应该手动删除所有的`views`并将任何`ImageView`位图/可绘制对象设置为`null`并清除所有事件处理程序和侦听器。
*   将您在`activity`or中的所有变量设置`fragment`为`null`.
*   你需要把你的逻辑放在里面`onDestroy`，你应该很高兴。
*   可选步骤是`System.gc()`在代码末尾添加。

在清除了我之前提到的所有东西之后。您会注意到每次片段/活动被破坏时内存都会下降。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-03-24T11:44:10.933

当我在横向模式下的 imageview 中显示大图像时，我遇到了同样的问题。所以我用这段代码解决了

```
 File imgFile = new File(imageFile.getAbsolutePath()); // path of your file

                FileInputStream fis = null;
                try {
                    fis = new FileInputStream(imgFile);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = 8;
                options.inPurgeable = true;
                options.inScaled = true;
                Bitmap bm = BitmapFactory.decodeStream(fis, null,options);
              profileIV.setImageBitmap(bm);
         } 
```*

# python - .shape[] 在“for i in range(Y.shape[0])”中做了什么？

> ID：10200268
> 
> 赞同：80
> 
> 时间：2012-04-17T22:42:43.303
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试逐行分解程序。`Y`是一个数据矩阵，但我找不到任何具体数据`.shape[0]`。

```
for i in range(Y.shape[0]):
    if Y[i] == -1: 
```

该程序使用 numpy、scipy、matplotlib.pyplot 和 cvxopt。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-04-17T22:44:44.683

numpy 数组的`shape`属性返回数组的维度。如果`Y`有`n`行和`m`列，`Y.shape`则为`(n,m)`。`Y.shape[0]`也是如此`n`。

```
In [46]: Y = np.arange(12).reshape(3,4)

In [47]: Y
Out[47]: 
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])

In [48]: Y.shape
Out[48]: (3, 4)

In [49]: Y.shape[0]
Out[49]: 3 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-01-18T05:12:12.147

shape 是一个元组，它给出了数组的维度。

```
>>> c = arange(20).reshape(5,4)
>>> c
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19]])

c.shape[0] 
5 
```

给出行数

```
c.shape[1] 
4 
```

给出列数

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-17T22:45:37.510

`shape`是一个元组，可以指示数组中的维数。因此，在您的情况下，由于 的索引值为`Y.shape[0]`0，因此您正在沿着数组的第一个维度工作。

来自 [http://www.scipy.org/Tentative_NumPy_Tutorial#head-62ef2d3c0a5b4b7d6fdc48e4a60fe48b1ffe5006](http://www.scipy.org/Tentative_NumPy_Tutorial#head-62ef2d3c0a5b4b7d6fdc48e4a60fe48b1ffe5006)

```
 An array has a shape given by the number of elements along each axis:
 >>> a = floor(10*random.random((3,4)))

 >>> a
 array([[ 7.,  5.,  9.,  3.],
        [ 7.,  2.,  7.,  8.],
        [ 6.,  8.,  3.,  2.]])

 >>> a.shape
 (3, 4) 
```

[http://www.scipy.org/Numpy_Example_List#shape](http://www.scipy.org/Numpy_Example_List#shape)有更多示例。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-14T04:03:06.057

在 python 中，假设您已经在某个变量 train 中加载了数据：

```
train = pandas.read_csv('file_name')
>>> train
train([[ 1.,  2.,  3.],
        [ 5.,  1.,  2.]],) 
```

我想检查“文件名”的尺寸。我已将文件存储在火车中

```
>>>train.shape
(2,3)
>>>train.shape[0]              # will display number of rows
2
>>>train.shape[1]              # will display number of columns
3 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-16T04:03:32.000

在 Python`shape()`中，在 pandas 中使用来给出行数/列数：

行数由下式给出：

```
train = pd.read_csv('fine_name') //load the data
train.shape[0] 
```

列数由下式给出

```
train.shape[1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-17T07:03:29.647

`shape()`由具有两个参数行和列的数组组成。

如果你搜索`shape[0]`，那么它会给你行数。 `shape[1]`会给你列数。

# ios - UITextFields 间歇性地不允许用户交互

> ID：10200272
> 
> 赞同：2
> 
> 时间：2012-04-17T22:43:17.180
> 
> 标签：ios, cocoa-touch, uitextfield

我知道这是一个很长的镜头，问题描述充其量是模糊的，但我希望有人可能也遇到过。

我有一个以`UIViewController`模态方式呈现的子类。控制器的视图包含一些`UIButton`s和一些`UITextField`s。视图控制器可能会在用户会话期间出现多次；每次出现时都会创建它，并在关闭时将其销毁。大多数时候一切都按预期工作，但是，有时文本字段不会响应用户触摸，即点击它们不会调出键盘。视图上的按钮工作正常，只是文本字段被禁用。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:23:33.540

事实证明，`UITextField`模态呈现的视图控制器中的 s 没有响应的原因是应用程序中的一个长期存在的视图控制器调用`[self becomeFirstResponder]`了自身，但从未调用过`[self resignFirstResponder]`. 它必须是第一响应者才能在应用程序播放音乐时接收远程控制事件。

# python - Enumerating all paths in a tree and manipulate values associated with each node

> ID：10200278
> 
> 赞同：1
> 
> 时间：2012-04-17T22:43:42.363
> 
> 标签：python, algorithm, recursion, tree

Inspired by the [answer](https://stackoverflow.com/questions/5671486/enumerating-all-paths-in-a-tree/5671568#5671568) to the [question "Enumerating all paths in a tree"](https://stackoverflow.com/questions/5671486/enumerating-all-paths-in-a-tree/), I wrote an adapted version (I don't need the unrooted path):

```
def paths(tree):
    #Helper function
    #receives a tree and 
    #returns all paths that have this node as root
    if not tree:
        return []
    else: #tree is a node
        root = tree.ID
        rooted_paths = [[root]]
        for subtree in tree.nextDest:
            useable = paths(subtree)
            for path in useable:
                rooted_paths.append([root]+path)
    return rooted_paths 
```

Now, in my "tree" object, I have a number associated with each node: tree.number. I looks like this:

```
 A,2
    /   \
  B,5   C,4
   |    /  \
  D,1  E,4 F,3 
```

I would like to initialize my paths with a 0 value, and sum all tree.numbers of the path, in order to know the sum for each generated path:

```
A-B-D: 8
A-C-E: 10
A-C-F: 9 
```

How should I modify my code to get this result? I'm not seeing how to do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:52:25.410

In order to achieve what you want, pass one more argument to the recursion - that would be the sum you have got so far. Also return one more value for each path - its sum:

```
def paths(tree, sum_so_far):
    #Helper function
    #receives a tree and 
    #returns all paths that have this node as root
    if not tree:
        return []
    else: #tree is a node
        root = tree.ID
        val = tree.Value
        rooted_paths = [[[root], value]]
        for subtree in tree.nextDest:
            useable = paths(subtree, sum_so_far + val)
            for path in useable:
                rooted_paths.append([[root]+path[0], path[1]])
    return rooted_paths 
```

Something like this should work. Please note now you are returning an array of pair of path and integer value. The integer value is the sum along that path.

Hope that helps.

# oracle - if (select count(column) from table) > 0 then

> ID：10200281
> 
> 赞同：38
> 
> 时间：2012-04-17T22:44:13.780
> 
> 标签：oracle, plsql

我需要检查一个条件。IE：

```
if (condition)> 0 then
  update table
else do not update
end if 
```

我是否需要使用 select into 将结果存储到变量中？

例如：

```
declare valucount integer
begin
  select count(column) into valuecount from table
end
if valuecount > o then
  update table
else do 
  not update 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-18T05:06:18.673

不能在 PL/SQL 表达式中直接使用 SQL 语句：

```
SQL> begin
  2     if (select count(*) from dual) >= 1 then
  3        null;
  4     end if;
  5  end;
  6  /
        if (select count(*) from dual) >= 1 then
            *
ERROR at line 2:
ORA-06550: line 2, column 6:
PLS-00103: Encountered the symbol "SELECT" when expecting one of the following:
...
... 
```

您必须改用变量：

```
SQL> set serveroutput on
SQL>
SQL> declare
  2     v_count number;
  3  begin
  4     select count(*) into v_count from dual;
  5
  6     if v_count >= 1 then
  7             dbms_output.put_line('Pass');
  8     end if;
  9  end;
 10  /
Pass

PL/SQL procedure successfully completed. 
```

当然，您也许可以在 SQL 中完成所有操作：

```
update my_table
set x = y
where (select count(*) from other_table) >= 1; 
```

很难证明某事是不可能的。除了上面的简单测试用例，你可以看一下语句的语法[图](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/if_statement.htm#i34570)`IF`；您不会`SELECT`在任何分支中看到声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T22:56:42.047

### 编辑：

当提供这个答案时，oracle 标签不在问题上，显然它不适用于 oracle，但它至少适用于 postgres 和 mysql

不，直接使用值：

```
begin
  if (select count(*) from table) > 0 then
     update table
  end if;
end; 
```

请注意，不需要“其他”。

### 已编辑

您可以简单地*在*更新语句中完成所有操作（即没有`if`构造）：

```
update table
set ...
where ...
and exists (select 'x' from table where ...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-16T20:42:38.543

不是那么优雅，但你不需要声明任何变量：

```
for k in (select max(1) from table where 1 = 1) loop
    update x where column = value;
end loop; 
```

# asp.net - 带有表单的果园自定义小部件

> ID：10200289
> 
> 赞同：1
> 
> 时间：2012-04-17T22:45:00.383
> 
> 标签：asp.net, asp.net-mvc-3, orchardcms

我构建了一个自定义模块，用于管理基于服务的公司的约会。所有当前功能都包含在管理部分中。我没有使用单个 ContentItem 或 ContentPart。所有的模型都只是普通的记录。

我正在寻找一个小部件来展示从前端注册约会的能力。我有一个部分视图和一个控制器来处理显示和表单提交，但我不确定如何将其绑定到一个可以放置在前端内容区域之一的小部件中。

我花了相当多的时间研究这个，找不到一个好的路径。（我尝试了一些并得到了次优结果）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:28:03.280

对我来说最好的答案是在模块的 migration.cs 文件中创建一个小部件类型定义：

```
ContentDefinitionManager.AlterTypeDefinition("CreateAppointmentWidget",
    cfg => cfg
        .WithPart("WidgetPart")
        .WithPart("CommonPart")
        .WithSetting("Stereotype", "Widget")); 
```

然后在以下位置为该小部件创建一个处理程序`/MyModule/Handlers/CreateAppointmentWidgetHandler.cs`：

```
public class CreateAppointmentWidgetHandler : ContentHandler
{
    private readonly IRepository<FieldTechRecord> _repository;

    public CreateAppointmentWidgetHandler(IRepository<FieldTechRecord> repository)
    {
        _repository = repository;
    }

    protected override void BuildDisplayShape(BuildDisplayContext context)
    {
        base.BuildDisplayShape(context);

        if (context.ContentItem.ContentType == "CreateAppointmentWidget")
        {
            CreateAppointmentViewModel model = new CreateAppointmentViewModel(_repository.Fetch(x => x.IsActive));
            context.Shape.AppointmentModel = model;
        }
    }
} 
```

`/MyModule/Views/Widget-CreateAppointmentWidget.cshtml`然后在插入部分视图的位置创建一个匹配的小部件模板：

```
@Html.Partial("CreateAppointment", (MyModule.Models.Views.CreateAppointmentViewModel)Model.AppointmentModel) 
```

上面的代码抓取了部分视图`/MyModule/Views/CreateAppointment.cshtml`。

感谢 Giscard 的建议，我能够通过使用 @Url.RouteUrl() 并定义*命名*路由指向我需要执行操作和 ajax 请求的位置来更正从 CreateAppointment.cshtml 呈现的链接。

这个解决方案的好处是它提供了一种创建小部件的方法，而无需重新设计我的模型以使用 Orchards ContentPart 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T17:52:38.387

我的脑海中没有任何联系，因为我已经能够创建一个带有区域的主题，然后将我的模块中的一个形状发送到该区域，而不仅仅是执行@Display.Shape()。所以我很好奇是否绝对有必要使用处理程序来覆盖`BuildDisplayShape`.

同样，这是在您将模型作为普通记录的情况下（不使用 ContentItem 或 ContentPart - 即使不使用它们，您也展示了通过迁移创建模型的示例）。

像这样的东西 - 控制器：

```
public ShapeResult MyShape()
{
    var shape = _orchardServices.New.MyPath1_MyShape();
    return new ShapeResult(this, shape);
} 
```

然后使用我拥有的任何代码创建一个 MyShape.cshtml 形状（例如不需要）。

注意：我使用了一个自定义`IShapeTemplateHarvester`文件，它添加了可以存储我的形状的路径（而不是使用“视图”、“视图/项目”、“视图/零件”、“视图/字段”，这是 Orchard 的库存）。它是这样的：

> 注意：我讨厌代码不会自动包装在 SO 中。

```
[OrchardSuppressDependency("Orchard.DisplayManagement
    .Descriptors.ShapeTemplateStrategy.BasicShapeTemplateHarvester")]
public class MyShapeTemplateHarvester : BasicShapeTemplateHarvester,
    IShapeTemplateHarvester
{
    public new IEnumerable<string> SubPaths()
    {
        var paths = base.SubPaths().ToList();
        paths.Add("Views/MyPath1");
        paths.Add("Views/MyPath2");
        return paths;
    }
} 
```

假设我的主题中有 Index.cshtml。我有两个选择（我同时使用并使用主题作为默认演示）。

主题文件夹中的 Index.cshtml：

```
@*Default Content*@ 
```

模块文件夹中的 Index.cshtml：

```
@*Special Content overriding Theme's Index.cshtml*@
Display.MyPath1_MyShape() 
```

对我来说更好的是，我可以在 Theme 文件夹中的 Index.cshtml 中执行此操作：

```
@*Whatever content*@
Display.MyPath1_MySecondShape() 
```

Theme 中没有 ~/MyPath1/MySecondShape.cshtml，但 Module 中有一个，主题显示！这很棒，因为我可以有一个特殊的主题，并且有多个模块（放置在不同的站点上）与主题来回切换（想想不同站点上同一专业的不同服务的仪表板）。

注意：上述情况可能仅适用于以下`IThemeSelector`实施：

```
public class MyThemeSelector : IThemeSelector
{
    public ThemeSelectorResult GetTheme(RequestContext context)
    {
        if (MyFilter.IsApplied(context))
        {
            return new ThemeSelectorResult { Priority = 200,
                ThemeName = "MyDashboard" };
        }

        return null;
    }

} 
```

只是我的两个位。

# node.js - 我的第一个使用 Towerjs 框架的真实项目从哪里开始？

> ID：10200290
> 
> 赞同：4
> 
> 时间：2012-04-17T22:45:08.903
> 
> 标签：node.js, towerjs

我是个菜鸟。在过去的三四个月里，我阅读了十几本书、几十个在线教程，并观看了数百个截屏视频，自学了 Rails（以及 html、css 等）、Node、JS 和我最喜欢的 Coffeescript。在这一点上，我已经构建了很多玩具程序，我真的很想开始我的第一个真正的项目，即。我内心燃烧的创业想法让我有动力首先学习如何做到这一点。我现在知道我想用 Node 和 Coffeescript 构建。我认为，用 Rails 来做会更容易（因为有大量易于访问的信息），但 Node 更有意义，而且它绝对是一切似乎都在发展的方向，而且我认为它更适合那种非常有活力的，我想到的用户参与的应用程序。看看那里的各种框架，tower 绝对是我最喜欢的，而且似乎真的做的一切都是正确的。

也就是说，我有几个问题（实际上有数百个，但现在有几个）。首先，是否有人实际上已经将 Tower 用于生产环境、现实世界、关键任务开发？我得到的印象是 viatropos 已经是，但我不是 100% 确定，因为在 github 上的“问题”跟踪器中进行了讨论。

其次，我花了好几个小时翻阅 towerjs 网站上的“最终”文档以及 github 上的 wiki，但我仍然感到完全不知所措，不知道从哪里开始。Tower 似乎有这么多活动部件，我认为真正了解它们如何组合在一起只能来自实际使用它们，但是在不了解它们如何组合在一起的情况下能够使用它们会造成鸡与蛋的困境很令人沮丧。Tower 有很多清晰、编写良好的文档，实际上比任何其他“全栈”Node 框架都要多。但是，至少对于像我这样的人来说，缺少的是一个明确的起点。在我看来，完美的东西，

然而，据我所知，目前不存在这样的东西（我真的没想到它会出现，因为 tower 是一个如此年轻的框架），所以我想问一些关于从哪里开始的建议. 有没有人有一个完整的工作示例，我可以查看它的所有荣耀，玩它，也许可以逐个重建以尝试理解它，或者可能是让我移动的步骤列表通过反复试验来学习它？还是其他建议？

对于冗长的信息，我深表歉意，并提前感谢大家的时间。Towerjs 是一个非常酷的框架，我非常期待看到它是如何发展的。

# git - 如何在不本地创建远程分支的情况下进行 git fetch 和 checkout？

> ID：10200307
> 
> 赞同：19
> 
> 时间：2012-04-17T22:46:25.590
> 
> 标签：git, merge, git-checkout, pull, git-fetch

用例：我在 GitHub 上有一些存储库，有人对其进行了分叉并添加了新功能并发起了拉取请求。我无法自动合并它，因为我想先解决一些小问题。

这是一次性活动，我永远不需要这个远程存储库，所以我不想创建本地`remote`分支。

基本上我想做：

1.  从远程存储库复制文件并重写我自己的（没有任何与 git 相关的信息）。
2.  看看我现在的脑袋有什么不同。
3.  修复一些东西并提交它。

怎么做？

`git checkout git://github.com/xxx/xxx.git`根本不起作用（失败并出现错误）

`git fetch git://github.com/xxx/xxx.git`工作，但不更新任何东西

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T22:52:12.147

你想用`FETCH_HEAD`.

每当您运行`git fetch ...`一个名为的魔术引用时，`FETCH_HEAD`就会创建一个。

尝试例如：

```
git fetch git://github.com/xxx/xxx.git branch_name && git merge FETCH_HEAD 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-04T17:34:36.413

对于任何 Git 服务器：

```
git fetch git://host.com/path/to/repo.git remote-branch-name:local-branch-name
git checkout local-branch-name 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-08T12:56:33.550

另一种简洁的方法（至少在/来自 Github）是这样获取的：

```
git fetch repo pull/7324/head:pr-7324 
```

在哪里：

`repo`指向远程仓库，例如`git://github.com/xxx/xxx.git`.

`pull/7324/head`是远程拉取请求。

`pr-7324`是本地拉请求分支。

然后你可以使用本地 PR 分支来做任何你想做的事情。

*资料来源*：改编自[本次讨论](https://gist.github.com/piscisaureus/3342247)。

# facebook - Facebook Open Graph 图片的最小宽度和高度是多少？

> ID：10200312
> 
> 赞同：53
> 
> 时间：2012-04-17T22:46:37.633
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我读过 Facebook 开放图中与给定 URL 关联的图像必须大于 50 x 50

然而，当我们运行 Facebook 对象调试器时，我们收到了以下警告：

“Tiny og:image：所有 og:image 引用的图像在两个维度上都必须至少为 200 像素。请检查给定 url 中所有带有标签 og:image 的图像，并确保其符合最低规格。”

我们的 URL 是[http:](http://www.famousbirthdays.com/people/charlie-chaplin.html) //www. Famousbirthdays.com/people/charlie-chaplin.html并且图像确实显示在对象属性下

我们是否需要将图像转换为大于 200 x 200？或者我们可以保持原样吗？它目前是 65 x 75 的图像。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-22T00:29:27.880

今天我对这个问题有了更清晰的答案（来自[Open Graph 调试器工具](https://developers.facebook.com/tools/debug)）：

> **小 og:image：og:image** 引用的所有图像在两个维度上都应至少为 200 像素，最好是 1500x1500。（最大图像大小为 5MB。）请检查给定 url 中所有带有标签 og:image 的图像，并确保其符合推荐的规格。
> 
> **og:image 应该更大：** 前提是 og:image 不够大。请使用至少 200x200，最好是 1500x1500 的图片。（最大图像大小为 5MB。） Image ... 将被使用。

所以，**是**的，您必须将打开的图形图像转换为至少 200x200 像素，而且似乎越大越好。

如果您的图片小于 200x200，Facebook 将尝试使用页面上可用的更大图片（如果）。

调试器返回的相同信息可以在 open graph 文档中找到，关于[“最大化媒体内容分发”主题，第 3 项：标签](https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/#tags)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-26T16:59:50.387

**Edit: Facebook Fixed their documentation:**

From [Luciano's Answer](https://stackoverflow.com/a/15560644/363701):

> og:image should be at least 200px in both dimensions, with 1500x1500 preferred. (Maximum image size is 5MB.)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-29T00:53:07.950

这很清楚。它们不能超过 130x110 像素，并且每边必须至少 200 像素。如果您将图像存储在 TARDIS 上，这是完全可能的。

说真的，我自己也遇到了这个问题，这让我很困惑，因为不久前这些页面就很好地通过了。我希望这是为时间轴布局设计的更改，文档中尚未更新。我找不到的是，如果 og:images 现在必须“至少”每边 200 像素，那么最大值是多少，当前推荐的尺寸是多少。确实。

斯科特

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-08T14:28:48.233

我遇到了同样的问题。我正在使用 wordpress 网站，所以我不得不放弃`www`. 检查您`wordpress admin > settings >general`的站点地址/wordpress 地址等。这克服了其他 URL 错误。
至于图像问题，我只能说把它放在我的头文件中对我有用。我在下面添加了这个。

```
<html prefix="og: http://ogp.me/ns#">
<head>
<meta property="og:image" content="http://yourwebsite.com/images/yourimage.jpg"/>
<meta property="og:image:width" content="500" />
<meta property="og:image:height" content="500" />
<meta property="og:title" content="your website page title"/>
<meta property="og:url" content="http://yourwebsite.com"/>
<meta property="og:site_name" content="site name and content etc"/>
<meta property="og:description"content="description of site" />
<meta property="og:type" content="Website"/> 
```

在 wordpress 中，我确实把它留在 `<title><?php wp_title( '|', true, 'right' ); ?></title>`了那里。

同样正如我实例中其他帖子中所建议的那样，此代码： `<link rel="image_src" href="http://URL-TO-YOUR-IMAGE" / >`使其无法正常工作。删除它立即修复它。

我使用了 500 x 500 的图像。祝你好运..希望我能拯救别人的痛苦。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-19T18:54:31.440

只需遵循以下规则：

1.  “使用至少 1200 x 630 像素的图像，以便在高分辨率设备上获得最佳显示效果。”
2.  “尽量让您的图像保持接近 1.91:1 的纵横比，以便在不进行任何裁剪的情况下在 News Feed 中显示完整图像。”
3.  图像的首选宽度是 1500 像素

遵循上述原则，**首选图像的宽度为 1500px，高度为 786px**（保留 1.91:1 的纵横比）。

资料来源：[Facebook：分享最佳实践](https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-18T18:01:49.803

看起来是规范中的错误。一个变通的解决方案是使您的图像 200 像素，但剪辑您不想看到的内容，或者如果您有足够大的原件，则将它们缩小。例如，如果您的图像是 25x25 像素，您可以将 175px 添加到两个尺寸，然后将该图像嵌套在具有溢出：隐藏 css 属性和 25x25 宽度/高度的 div 中。不是最干净的，但它会工作。

我已经向 Facebook 开出了一张 bug 票，以解决文档质量差的问题，并发现这是否是一个实际的规范或 bug。[http://developers.facebook.com/bugs/210269722417284](http://developers.facebook.com/bugs/210269722417284)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-14T07:48:30.810

看起来他们更新了他们的文档：

> 图片必须至少为 50 像素 x 50 像素（但最好是最小 200 像素 x 200 像素）并且最大纵横比为 3:1

[developer.facebook.com/docs/reference/dialogs/feed](https://developers.facebook.com/docs/reference/dialogs/feed/)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-01-23T14:39:08.210

来自 Facebook 开发者页面：

> 使用至少 1200 x 630 像素的图像，以便在高分辨率设备上获得最佳显示效果。至少，您应该使用 600 x 315 像素的图像来显示带有较大图像的链接页面帖子。

您可以在[此处](https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/)找到更多详细信息。请检查第 4 点

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-25T10:36:09.497

使用至少 1200 x 630 像素的图像，以便在高分辨率设备上获得最佳显示效果。至少，您应该使用 600 x 315 像素的图像来显示带有较大图像的链接页面帖子。

参考： [https ://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content#images](https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content#images)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-09T13:07:14.373

The docs have been updated again!

og:image can now be as big as you like - whoop

They have recommended the following:

*   at least 600x315 pixels
*   Ideally 1.91:1 in ratio
*   no bigger than 5mb in file size
*   but AS BIG AS YOU LIKE!

Also don't forget you can add multiple og:images and let the user choose which picture they want to use.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-27T11:24:27.807

来自[https://developers.facebook.com/docs/plugins/checklist/#opengraphtags](https://developers.facebook.com/docs/plugins/checklist/#opengraphtags)

1.  使用适当的 Open Graph 标签来推动分发

Open Graph 标签可以包含在您页面的 HTML 中，以便 Facebook 爬虫在您的内容在 Facebook 上共享时生成更好的预览。

您应该实现的基本 Open Graph 标签是：

标签 描述

1.  og:title 文章的标题，不包括任何品牌。
2.  og:site_name 您网站的名称。例如 IMDb 不是 imdb.com。
3.  og:url 作为您帖子的唯一标识符的 URL。它应该与您用于 SEO 的规范 URL 匹配，并且不应包含任何会话变量、用户识别参数或计数器。如果您使用不当，点赞和分享将不会针对该 URL 进行汇总，而是会分布在该 URL 的所有变体中。
4.  og:description 一段内容的详细描述，通常在 2 到 4 个句子之间。
5.  **og:image 共享链接时要显示的图像的 URL。我们建议您使用至少 1200x630 像素的图像。**

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-04-23T14:37:23.580

从您的帖子看来，您希望使用 OG 概念将帖子分享到 facebook。为此，图像的**最小**尺寸应为**200px(x)200p** x。这是 FB 的标准尺寸，如果没有特定尺寸的图像可用，它将在您的页面中拍摄具有相同尺寸的下一张图像。

***最小图像尺寸*** 最小图像尺寸为 200 x 200 像素。如果您尝试使用比这更小的图像，您将在 URL 调试器中看到错误。请通过[此链接检查>>](https://developers.facebook.com/tools/debug/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-18T06:59:52.107

I ran into the same problem. I did not perform exhaustive testing, so I can't say exactly what the requirements are to get the images to show up. I can say that I switched my images to being >200x>200 (specifically 350x350) and they showed up after that.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-24T16:03:15.453

如果您甚至通知大于 200x200 的图像（作为新文档）[调试器](https://developers.facebook.com/tools/debug)仍然指责图像不够大，解决方案是在下面添加带有图像尺寸的元标记：

例子：

```
<meta property="og:image:width" content="500" />
<meta property="og:image:height" content="500" /> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-16T06:57:43.790

我最近遇到了类似的问题。根据经验，不要使用`png`图像文件，而是使用`jpg`图像文件。

png 文件的一般问题是由于透明背景，它们无法正确计算高度和重量，因为出现了问题的变化。

很遗憾，文档上没有指定...

# ios - 仅使用键盘从多个文本字段中获取字符串

> ID：10200313
> 
> 赞同：0
> 
> 时间：2012-04-17T22:46:42.017
> 
> 标签：ios, login, textfield

我想制作一个带有两个文本字段的登录系统。我希望用户编辑第一个文本字段，然后单击键盘上的下一步跳转到下一个文本字段，编辑后他应该单击 go 并且系统应该这样做。所以我真正想要的是能够从一个文本字段跳转到下一个文本字段，最重要的部分是当用户单击开始按钮时从两个字段中获取输入文本（女巫在第二个字段的键盘上）。我的两个文本字段都在 IB 中标记。如果不是很清楚，我想实现与 Podio 的应用登录非常相似的东西。这就是我到目前为止所拥有的。非常感谢任何帮助：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    AppSettings *settings = [AppSettings sharedSettings];
    NSString *password;
    NSString *name;

    if(textField == nameTextField)
    {
        name = textField.text;
        NSLog(@"Name text field: %@",name);
    }
    if(textField == passwordTextField)
    {
        password = textField.text;
        NSLog(@"Password text field: %@",password);        
    }

    //this is where I send a call to the server
    [[SessionInfo sharedInfo] loginWithEmail:settings.userEmailFromLogin 
                                     AndName:name AndPasswordRequest:password];

    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:37:11.703

@yibuyiqu 那对我来说真的不起作用。但我解决了如何从多个文本字段中获取数据的问题。只需将输入中的字符串存储到某个字典对象中，如下所示：

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
{
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    AppSettings *settings = [AppSettings sharedSettings];
    NSString *password;
    NSString *name;

    if ([textField.text isEqualToString:@""])
        return;

    switch (textField.tag) {
        case NameFieldTag:
            name = textField.text;
            [userDefaults setObject:name forKey:kloginName];
            settings.userNameFromLogin = [userDefaults objectForKey:kloginName];
            break;

        case PasswordFieldTag:
            password = textField.text;
            [userDefaults setObject:password forKey:klogginPassword];
            settings.userPasswordFromLogin = [userDefaults objectForKey:klogginPassword];
            break;
        default:
            break;
    }
} 
```

在此之后，我使用此处某人发布的解决方案从键盘[https://stackoverflow.com/a/1351090/1339876浏览文本字段](https://stackoverflow.com/a/1351090/1339876)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:03:09.953

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    AppSettings *settings = [AppSettings sharedSettings];
    NSString *password;
    NSString *name;

    if(textField == nameTextField)
    {
        name = textField.text;
        [passwordTextField becomeFirstResponder];
        NSLog(@"Name text field: %@",name);
    }
    if(textField == passwordTextField)
    {
        password = textField.text;
        [textField resignFirstResponder];
        NSLog(@"Password text field: %@",password); 
        //this is where I send a call to the server
        [[SessionInfo sharedInfo] loginWithEmail:settings.userEmailFromLogin 
                                         AndName:name AndPasswordRequest:password];  
    }
    return YES;
} 
```

# javascript - 带有 Rails 3.1 的 AngularJS - 加载角度种子时遇到问题

> ID：10200314
> 
> 赞同：1
> 
> 时间：2012-04-17T22:46:47.460
> 
> 标签：javascript, ruby-on-rails-3, angularjs

我一直在玩[AngularJS——](http://angularjs.org/#/)顺便说一句，这是一个非常棒的前端框架。

今天我尝试将 angular-seed 入门应用程序（可在此处找到： [https](https://github.com/angular/angular-seed) ://github.com/angular/angular-seed ）合并到当前存在的 Rails 3.1.3 应用程序中。

在获取演示代码时遇到了一些问题 - 此处：[http](http://docs.angularjs.org/#!/tutorial) ://docs.angularjs.org/#!/tutorial - 在资产管道中工作，因此仅出于测试目的，我将它们放入公共文件夹 - 老派风格。

我按照教程进行操作，并正确设置了我的所有视图、控制器和服务。但是，当我在索引页底部包含 js 文件时：

```
<script src="angular/app/lib/angular/angular.js" ng:autobind></script>
<script src="angular/app/js/services.js"></script>
<script src="angular/app/js/controllers.js"></script> 
```

...没有一个控制器可以工作。我会`{{ model.property }}`在模板中获取标签，而不是实际输出。

Chrome 的开发工具中没有 Javascript 错误 - 网络和资源显示所有预期的文件都正确加载。

我以为我可能忽略了代码中的某些内容，但是当我查看开发人员指南时，有一个指向 angular 的 cdn 的链接：

```
<script src="http://code.angularjs.org/angular-0.9.19.min.js" ng:autobind></script> 
```

只是为了它，我用 cdn 替换了我的本地 angular.js 脚本调用，突然一切都按预期工作了。

我仔细检查了一遍，以确保我从正确的目录加载本地副本，而且我是 - 这是 angular-seed 文件附带的标准目录。该文件也显示为已正确下载的资源。

**任何人都知道为什么cdn可以工作但本地副本不会？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:27:55.210

角种子使用与 0.9.19 不兼容的 AngularJS 1.0.0rc5（当前）。查看种子应用程序的连接方式。（例如删除 ng:autobind 并将 ng:app 或 ng-app 添加到布局模板中的 html 标记中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:42:41.980

看起来您使用的是旧版本：您想阅读以下内容：[http ://docs.angularjs.org/#!/guide/dev_guide.bootstrap.auto_bootstrap](http://docs.angularjs.org/#!/guide/dev_guide.bootstrap.auto_bootstrap)

你应该做的是使用新版本，文档在这里：[http ://docs-next.angularjs.org/guide/dev_guide.bootstrap.auto_bootstrap](http://docs-next.angularjs.org/guide/dev_guide.bootstrap.auto_bootstrap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:29:58.970

一方面，您在第一个脚本参考中缺少双引号。

# css - 当填充已经为零时，如何删除锚文本和边框之间的空间？

> ID：10200315
> 
> 赞同：0
> 
> 时间：2012-04-17T22:46:54.640
> 
> 标签：css, text, border, html-lists, padding

我正在开发一个导航菜单，并创建了一个包含四个锚标签，如下所示：

```
 <nav>
<ul>
        <li><a href="/" class="active">BLOG</a></li>
        <li><a href="/about/">ABOUT ME</a></li>
        <li><a href="/portfolio/">PORTFOLIO</a></li>
        <li><a href="/contact/" class="highlight">CONTACT</a></li>
    </ul>
 </nav> 
```

我为每个链接设置了一个 10px 的上边框，我想把它紧紧地放在文本的顶部。尽管在所有正确的地方将填充设置为 0，但我无法摆脱填充。我尝试过更改行高，但这只是将整个导航部分在屏幕上向上或向下移动，并且不会影响锚文本和顶部边框之间的间隙。

这是 CSS（不包括 CSS 重置等，如果需要，我可以发布，但这些主要来自 HTML5BoilerPlate。

```
nav ul {
        padding-right: 24px;
        float: right;
    }

    nav li {
        display: inline;
        font-family: Oswald;
        font-size: 25px;
    }

    nav a {
        color: #7a7a7a;
        text-decoration: none;
        margin-left: 16px;  
    }

    nav li a {
        border-top: 10px solid #7a7a7a; 
    }

    nav a:hover {
        color: #555555
    }

    nav a.active {
        color: #555555;
    }

    nav a.highlight:hover { 
        color: #1f9c66;
    }

    a.highlight {
        color: #29cf86;
    } 
```

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:38:02.160

设置一个锚点**浮动**，它将删除每个网络浏览器中的边距和填充。

```
#container li a {
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:57:23.397

您可以通过相对定位将锚点向上平移几个像素：

```
li {
    display: inline;
    margin-left: 16px;  
    border-top: 10px solid #7a7a7a;
}

a {
    position: relative;
    top: -6px;
} 
```

**现场演示：http:** [//jsfiddle.net/XQK9h/](http://jsfiddle.net/XQK9h/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:16:39.370

我认为它对你有帮助。

```
<style type="text/css">

nav ul {
    padding-right: 24px;
    float: right;
}

nav div {
    border-top: 10px solid green;
    display: block;
    float: left;
    font-family: Oswald;
    font-size: 25px;
    height: 10px;
    margin: 10px;
}

nav a {
    color: #7a7a7a;
    text-decoration: none;
}

nav a:hover {
    color: #555555
}

nav a.active {
    color: #555555;
}

nav a.highlight:hover { 
    color: #1f9c66;
}

a {
    position: relative;
    top: -3px;
}
a.highlight {
    color: #29cf86;
}

</style>

<nav>
<ul>
    <div><a href="/" class="active">BLOG</a></div>
    <div><a href="/about/">ABOUT ME</a></div>
    <div><a href="/portfodivo/">PORTFOLIO</a></div>
    <div><a href="/contact/" class="highdivght">CONTACT</a></div>
</ul>
</nav> 
```

# javascript - 许多 100% 高度/宽度 div - 轮播导航？

> ID：10200316
> 
> 赞同：0
> 
> 时间：2012-04-17T22:47:06.127
> 
> 标签：javascript, jquery, css, navigation, carousel

我有一个使用 100% 宽度和高度来实现全屏图像样式的网页。但是，我希望这些 div 并排放置，当我单击一个按钮时，它会切换到下一张或上一张幻灯片。你觉得我怎么能做到这一点？

这是轮播代码：

```
<div class="page-carousel">

    <div class="page page-01" style="background: url(images/01.jpg);">

        <div class="page-text">

            <h1>Headline</h1>
            <h2>Subheader</h2>

            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>

        </div>

    </div>

    <div class="page page-02" style="background: url(images/02.jpg);">

        <div class="post-text">

            <h1>Headline</h1>
            <h2>Subheader</h2>

            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</p>

        </div>

    </div>

</div> 
```

和CSS：

```
.page-carousel{
    height: 100%;
    width: 100%;
}

.page{
    height: 100%;
    width: 100%;
    background: no-repeat bottom center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    position: relative;
    float: left;
    z-index:0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:18:38.627

一个非常快速的示例，可以让您走上正确的轨道，前提是您不选择插件：

[http://jsfiddle.net/22VNQ/1/](http://jsfiddle.net/22VNQ/1/)

注意：另外，请投票并将答案标记为正确。看来您还没有为以前的答案这样做，因此缺乏回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T13:47:19.307

您想使用幻灯片特定的 javascript，例如 -

**Impress.js**：[https ://github.com/bartaz/impress.js/wiki/Examples-and-demos](https://github.com/bartaz/impress.js/wiki/Examples-and-demos)

**[甲板.js： http](http://imakewebthings.com/deck.js/) : **//imakewebthings.com/deck.js/****

 ****Reveal.js**：[https ://github.com/hakimel/reveal.js](https://github.com/hakimel/reveal.js)**

# xml - Adobe AIR - 如何创建树列表来组织媒体

> ID：10200324
> 
> 赞同：0
> 
> 时间：2012-04-17T22:47:45.157
> 
> 标签：xml, database, apache-flex, air, adobe

我想创建一个 AIR 应用程序来组织媒体编辑。

```
i.e. Compilation_1
           -Song1
           -Song2
           -Song3
     Compilation_2
           -Song1
           -Song2
           -Song3
           -Song4 
```

在 UI 上，用户必须能够为编辑输入标题，然后添加添加曲目标题。我唯一的其他要求是列表必须是可搜索的。

我之前没有做过任何涉及树列表、数据库或 xml 的事情。有人可以给我一个路线图并告诉我应该研究什么来完成这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:03:49.637

看起来你应该从一个[`Tree`](http://livedocs.adobe.com/flex/3/html/help.html?content=dpcontrols_8.html)控件开始。由于还没有 Spark 版本，您还应该看看如何[混合 MX 和 Spark 组件](http://help.adobe.com/en_US/flex/using/WS03d33b8076db57b9-1c32bcb9124deadc3e9-8000.html#WS03d33b8076db57b9-3edf2834124deb0ca54-7ffe)。

还有一个[替代实现](http://cookbooks.adobe.com/post_Spark_Tree-17788.html)可以考虑使用。如果两者都没有让你一直到那里，那么查看他们的来源应该可以帮助你。

可搜索性将是数据结构的一个特征。如果您最终使用 XML，您可以将用户查询转换为 E4X。

# sql - 不显示所有记录的sql查询

> ID：10200333
> 
> 赞同：2
> 
> 时间：2012-04-17T22:48:40.867
> 
> 标签：sql, oracle

我有一个查询问题，例如这个我可以检索记录：

```
SELECT 
l.*, 
ll.f_cocacola as cocacola, 
 le.name AS deposit, 
 lp.price
FROM 
 KPC AS l, 
 KPC_cocacola AS ll, 
 KPC_deposit AS le, 
 KPC_price AS lp 
WHERE 
l.cod_deposit = le.id_deposit 
AND l.code = ll.code
AND lp.code = l.code
AND l.code_deposit = '002365' 
```

但现在我需要包含另一个表中的另一个日期 -intranet- 具有字段*code*和*url*然后需要从这个表中显示*url*字段.. 请记住，关系在*code*字段上。

所以我以这种方式更改查询：

```
SELECT l.*,ll.f_cocacola as cocacola, le.name AS deposit, 
lp.price, lintranet.url 
FROM tableX AS l, intranet_cocacola AS ll, tableX_deposit AS le, 
tableX_price AS lp, 
tableX_intranet as lintranet 
WHERE l.code_deposit = le.id_deposit
AND l.code = ll.code
AND lp.code = l.code 
AND l.code = lintranet.code
AND l.code_deposit = '456852147' 
```

但问题是某些记录没有*url*，如果不存在*url*，那么这个查询不会向我显示记录.. 即使没有与我想要的记录关联的*url* ，我也需要它看到那个记录，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:53:22.113

使用 ANSI 连接语法重写您的查询并使用`LEFT JOIN`：

```
SELECT  l.*, ll.f_cocacola as cocacola, le.name AS deposit, 
        lp.price, lintranet.url 
FROM    tableX AS l,
JOIN    intranet_cocacola AS ll
ON      ll.code = l.code
JOIN    tableX_deposit AS le
ON      le.id_deposit = l.code_deposit
JOIN    tableX_price AS lp
ON      lp.code = l.code
LEFT JOIN
        tableX_intranet as lintranet
ON      lintranet.code = l.code
WHERE   l.code_deposit = '456852147' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T22:52:11.640

改用`LEFT JOIN`：

```
SELECT l.*,ll.f_cocacola as cocacola, le.name AS deposit, 
lp.price, lintranet.url 
FROM tableX AS l, intranet_cocacola AS ll, tableX_deposit AS le, 
tableX_price AS lp
LEFT JOIN tableX_intranet as lintranet ON l.code = lintranet.code -- <<<<<
WHERE l.code_deposit = le.id_deposit
AND l.code = ll.code
AND lp.code = l.code 
AND l.code_deposit = '456852147' 
```

PS：我个人更喜欢显式`INNER JOIN`，而不是使用逗号分隔的表枚举加入。因为它可以更好地了解查询的作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:22:20.547

我知道您已经有了答案，但是我看到您的问题是针对 Oracle 数据库提出的...虽然我认为 LEFT JOIN 有效，因为它是标准 SQL，Oracle 有自己的版本，因此您可以看到相同的查询编写如下：

```
SELECT l.*,ll.f_cocacola as cocacola, le.name AS deposit, lp.price, lintranet.url 
  FROM tableX AS l, intranet_cocacola AS ll, tableX_deposit AS le, tableX_price AS lp, tableX_intranet as lintranet
 WHERE l.code_deposit = le.id_deposit
   AND l.code = ll.code
   AND lp.code = l.code 
   AND l.code_deposit = '456852147'
   AND l.code = lintranet.code(+)  //<-- this is how a left/right join is written
                                   //on Oracle's SQL, you add "(+)" next to the 
                                   //field of the table that may not have 
                                   //matching records. 
```

# javascript - .animate 无限循环

> ID：10200337
> 
> 赞同：0
> 
> 时间：2012-04-17T22:49:16.247
> 
> 标签：javascript, jquery

我对 jQuery`.animate`无限循环中断方法的解决方案感兴趣。

```
$(element).mouseover(function() {
   $(this).animate({ opacity: 1 }, duration, customFunc);
}).mouseout(function() {

}); 
```

现在的问题是如何打破这个循环？例如在一个`mouseout`事件中？

我可以很容易地做到这一点`setInterval`，`clearInterval`但是有没有办法用**`.animate`**功能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T22:53:08.013

使用 .stop 方法：

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

我假设您想立即停止当前正在运行的动画？

```
$(element).mouseover(function() {
   $(this).animate({ opacity: 1 }, duration, customFunc);
}).mouseout(function() {
   $(this).stop();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:54:02.933

您可以使用 .stop() 停止动画

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

您可能想使用 .stop(true, true) 清除队列并跳转到动画的末尾

您可以使用 .data() 来存储是否应该再制作动画的标志

[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

在您再次调用 animate 之前在您的 customFunc 中添加一个 IF 以检查您是否应该制作动画的标志。这样你就不会因为任何其他回调而重新触发。在鼠标悬停时，您应该将标志设置为再次启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T10:37:55.007

如果您遇到的是当鼠标进入和离开元素时动画排队的效果，并在鼠标离开元素且未返回后继续一遍又一遍地重复动画 - 我会推荐 jquery hoverflow插件给你。

[http://www.2meter3.de/code/hoverFlow/](http://www.2meter3.de/code/hoverFlow/)

# ruby-on-rails-3 - 在哪里配置 Rails 3 cache_store？

> ID：10200339
> 
> 赞同：5
> 
> 时间：2012-04-17T22:49:26.030
> 
> 标签：ruby-on-rails-3

我正在尝试在环境/development.rb 中使用类似的内容配置 Rails 3 cache_store：

```
config.cache_store = :memory_store, {:size => 64.megabytes, :expires_in => 5.minutes} 
```

但是当我启动服务器时，我得到：

```
undefined method `megabytes' for 64:Fixnum (NoMethodError) 
```

可能还没有加载一些东西。

我的问题是：在哪里配置它们的正确位置？我应该把这段代码放在哪里？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T09:44:35.997

或者添加这一行

```
require 'active_support/core_ext/numeric/bytes' 
```

前

```
config.cache_store = :memory_store, {:size => 64.megabytes, :expires_in => 5.minutes} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:57:37.913

使用`ActionController::Base.cache_store =`并放入一个初始化文件（在 config/initializers 中创建一个 rb 文件）

# html - 窗口调整大小时浮动 div 问题

> ID：10200341
> 
> 赞同：0
> 
> 时间：2012-04-17T22:50:01.537
> 
> 标签：html, css, cross-browser, overlay, css-float

当我从使用模板布局过渡到编写自己的 css 脚本时，我遇到了很多问题，但有一个问题阻止了我继续。我已经成功创建了一个带有浮动 div 的 3 列布局，但是在浏览器重新调整右列的大小时，它会覆盖中间 div。 当我调整窗口大小但没有成功时，我已经导入了在[Div 部分中找到的脚本。](https://stackoverflow.com/questions/892497/div-sections-shifts-when-i-resize-the-window)基本上我希望布局表现得像当前的一样，在[http://www.allstarselectric.com](http://www.allstarselectric.com)，但使用 %. 我正在使用 % 来支持交叉分辨率，那么是否有解决方法/解决方案，或者像素是绝对必要的吗？任何帮助将不胜感激。

CSS：

```
body {
    height: 100%;
    width: 100%;
    margin: 0px;
    padding: 0px;
    color: #666;
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 13px;
    line-height: 1.7em; 
    background-color: #4a4d51;
    background-image: url(images/templatemo_body.jpg);
    background-repeat: repeat-x;
    background-position: top
}

.content{
position: fixed;
width: 100%;
height: 100%;
    background-image: url(images/templatemo_body.jpg);
}

.contentbody{
float: left;
width: 70%;
height: 100%;
}

.wrapper {
  width:100%
}

.sidebar{
float: left;
width: 15%;
height: 100%;
border: 0px solid #BBB;
background-color:#dddddd;
}
.sidebar li{
list-style-type:none;
margin:0;
padding:0;
}

.sidebar2{
float: left;
width: 15%;
height: 100%;
border: 0px solid #BBB;
background-color:#dddddd;
}
.sidebar2 li{
list-style-type:none;
text-align: center;
margin:0;
padding:0;
}

.chromestyle{
width: 100%;
font-weight: bold;
}
.chromestyle:after{ /*Adds margin between menu and rest of content in Firefox*/
content: "."; 
display: block; 
height: 0; 
clear: both; 
visibility: hidden;
}

/*Affects the background/menustyle*/
.chromestyle ul{
border: 0px solid #BBB;
width: 730px;
height: 45px;
background:  url(imgs/navm.jpg) center center no-repeat; /*THEME CHANGE HERE*/
padding: 0 15px;
margin: 0;
text-align: left; /*set value to "left", "center", or "right"*/
}

.chromestyle ul li{
display: inline;
}

/*Affects menu text*/

.chromestyle ul li a{
    float: left;
    display: block;
        color: #000;
    padding: 8px 20px;
    margin: 0 1px 0 0;
        text-decoration: none;
        border: none;
}

.chromestyle ul li a:hover, .chromestyle ul li a.selected{ /*script dynamically adds a class of "selected" to the current active menu item*/
color: #fff;
background: #ff0011
 center center repeat-x; /*THEME CHANGE HERE*/
}

.current { color: #fff; background: ; }

/* ######### Style for Drop Down Menu ######### */

.dropmenudiv{
position:absolute;
top: 0;
border: 1px solid #BBB; /*THEME CHANGE HERE*/
border-bottom-width: 0;
font:normal 12px Verdana;
line-height:18px;
z-index:100;
background-color: #d5a30b;
width: 200px;
visibility: hidden;
}

.dropmenudiv a{
width: auto;
display: block;
text-indent: 3px;
border-bottom: 1px solid #BBB; /*THEME CHANGE HERE*/
padding: 2px 0;
text-decoration: none;
font-weight: bold;
color: black;
}

* html .dropmenudiv a{ /*IE only hack*/
width: 100%;
}

.dropmenudiv a:hover{ /*THEME CHANGE HERE*/
background-color: #F0F0F0;
} 
```

HTML：

```
<html>
<head>
<title>Allstars Electric</title>
<meta name="keywords" content="electricians," />
<meta name="description" content="Electrical Contractor DFW" />

<link rel="stylesheet" type="text/css" href="style.css" />
<script src="js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/drop.js">
</script>

<style type="text/css">
<!--
.style2 {color: #FFFF00}
.style3 {
    font-size: 36px
}
-->
</style>
<SCRIPT LANGUAGE="JavaScript">
<!--
function JumpToIt(list) {
    var newPage = list.options[list.selectedIndex].value
    if (newPage != "None") {
        location.href=newPage
    }
}
//-->
</SCRIPT>

</head>

<body>
<div class="wrapper">
<div class="sidebar" id="sidebar"><li>home</li></div>

<div class="contentbody">
<center>
<div class="chromestyle" id="chromemenu">
<ul>
<li><a href="index.html" class="current">Home</a></li>
<li><a href="specialoffers.html">Special Offers</a></li>
<li><a href="#" rel="dropmenu2">Services</a></li>
<li><a href="about.html">About Us</a></li>  
<li><a href="contact.html">Contact</a></li>
<li><a href="#" rel="dropmenu3">Themes</a></li>
</ul>
</div>

<!--1st drop down menu -->                                                   
<div id="dropmenu1" class="dropmenudiv">
<a href="#">1</a>
<a href="#">2</a>
<a href="#">3</a>
<a href="#">4</a>
<a href="#">5</a>
</div>

<!--2nd drop down menu -->                                                
<div id="dropmenu2" class="dropmenudiv" style="width: 150px;">
<a href="electrical.html">Electrical</a>
<a href="hvac.html">Heating & Air Conditioning</a>
</div>

<!--3rd drop down menu -->                                                   
<div id="dropmenu3" class="dropmenudiv" style="width: 150px;">
<a href="http://www.allstarselectric.com/index.html">Dark</a>
<a href="http://www.allstarselectric.com/light/index.html">Light</a>
</div>
<!-- Dropdown End -->

<br><tr>text/other</br></tr>
</center>
</body>
</div>
</div>

<div class="sidebar2" id="sidebar2"><li>Home</li>

<script type="text/javascript">

cssdropdown.startchrome("chromemenu")

</script>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:59:07.777

在您的 CSS 中，您为 .chromestyle ul 设置了固定宽度。将该宽度更改为 %，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:12:29.047

您链接的文章的第一个答案为您提供了最合理的解决方案：“您可以用另一个您希望查看页面的最小宽度的 div 环绕两个 div。” 尝试使页面适合 320x240 浏览器没有多大意义。在这种分辨率下无法避免滚动条。

像这样的东西

```
.foowrap { min-width: 550px; width: 100%; overflow:auto; }
.foo { width:30%; float:left; }

<div class="foowrap">
    <div class="foo">bar</div>
    <div class="foo">baz</div>
    <div class="foo">bum</div>
</div> 
```

然后确保内部 div 的总最小宽度（示例中的类 foo）不大于您设置的最小宽度。尤其要注意边界。

顺便说一句，你有两个`</body>`并且你正在使用`<center>`，这两个都是你应该避免的事情。这一点也没有多大意义：`<br><tr>text/other</br></tr>`

# php - 使用 foreach 循环访问多维数组的元素

> ID：10200342
> 
> 赞同：0
> 
> 时间：2012-04-17T22:50:04.403
> 
> 标签：php, arrays, multidimensional-array

在下面的：

```
<?php
$test = array(
    array("fName" => "Paul", "lName" => "Jones", "Age" => "31"),
    array("fName" => "Mike", "lName" => "Hunt", "Age" => "3"),
    array("fName" => "John", "lName" => "Doe", "Age" => "32")
);
?>

<pre> <?php var_dump($test) ?> </pre>

<?php
foreach($test[0] as $key => $value) {
    echo $value . " " ;
} 
```

?>

这输出`Paul Jones 31`

我怎样才能让它只输出名字`fNames`？

IE`Paul, Mike, John`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T22:52:35.757

```
foreach($test as $person) {
    echo $person['fName'] . " " ;
}

// output: Paul Mike John 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T22:53:15.647

您可能想要遍历主数组而不是其中的单个元素。

```
foreach($test as $item) {
    echo $item['fName'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T22:51:07.997

```
foreach($test as $value) {
  echo $value['fName'] . ", " ;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T22:52:58.527

```
foreach ($test as $arr)
    echo $arr['fName'] . ', '; 
```

# c++ - 在 CI 中可以将 void* 分配给 char* 但在 C++ 中不能

> ID：10200345
> 
> 赞同：1
> 
> 时间：2012-04-17T22:50:32.653
> 
> 标签：c++, c, windows, char, void-pointers

如果文件是 .c，MSVC 将编译。

如果是 .cpp 它`"cannot convert from 'void *' to 'unsigned char *'"`

我正在使用`MEMORY_BASIC_INFORMATION::BaseAddress`in `windows.h`which is `void*`，将其分配给 a`char*`以便我可以看到您知道的实际地址？

当我将它转换为 char*，然后再转换为`void*`（在 Windows 函数中使用它）时，它就像错误并丢失数据或其他东西

该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T23:00:57.730

在 C++ 中，您必须使用显式强制转换将 a 转换`void*`为其他任何内容：

```
void *vp;
unsigned char *cp = static_cast<unsigned char *>(vp); 
```

这确实与 C 中的情况不同，其中 a`void*`可以隐式转换为任何其他指针类型。相反的情况仍然和 C 中一样：

```
void *vp = cp;  // no need for a static_cast 
```

但是，我不明白为什么您需要 a`char*`来“查看实际地址”，因为 a`void*`可以通过`operator<<`on`std::ostream`和`std::printf`with按原样打印`%p`。

# rest - OSGi JAX-RS 和 bnd 声明式服务

> ID：10200347
> 
> 赞同：6
> 
> 时间：2012-04-17T22:50:44.557
> 
> 标签：rest, osgi, jax-rs, code-injection, bnd

我想将我的 EE 应用程序迁移到 OSGi。我的应用程序由业务库、数据库 JPA/Entities 和一个 REST/WS 接口组成。它还有一个网络客户端。

我首先对结构进行原型设计，并使所有接口和包以 OSGi 干净的方式相互通信。我想尽可能使用干净的规范，而不需要任何特定的供应商或框架。

我正在使用 bnd maven 插件来生成清单和声明性服务。我想使用注入从我的其余资源调用 OSGI 服务（在另一个包上），如下所示：

```
@Path("some-resources")
@Component
public class SomeResources{

   private SomeService service = null;

   @Reference
   public void setController(SomeService service) {   // <- this is never called
    this.service = service;
   }

   @GET
   @Produces(javax.ws.rs.core.MediaType.APPLICATION_XML)
   public Object getSomeService() {                  // <- called 
    try {
        service.process("Hello World");              // <- Error null object
   }
    ...

} 
```

我可以用 bnd 注释资源`@Component`并且可以`@Resource`注入吗？一切正常，但服务始终为空。

应该如何为 BND 声明我的捆绑包以使其成为 web/wab 包？

我使用 Maven 包：

```
<packaging>bundle</packaging>

...

        <plugin>                    
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <dependencies>
                    <dependency>
                        <groupId>biz.aQute</groupId>
                        <artifactId>bndlib</artifactId>
                        <version>1.50.0</version>
                    </dependency>
                </dependencies> 
                <configuration>
                    <supportedProjectTypes>
                        <supportedProjectType>ejb</supportedProjectType>
                        <supportedProjectType>war</supportedProjectType>
                        <supportedProjectType>wab</supportedProjectType>
                        <supportedProjectType>bundle</supportedProjectType>
                        <supportedProjectType>jar</supportedProjectType>
                    </supportedProjectTypes>
                    <instructions>
                        <_include>-osgi.bundle</_include>
                    </instructions>
                </configuration>
                <executions>
                    <execution>
                        <id>bundle-manifest</id>
                        <phase>process-classes</phase>
                        <goals>
                            <goal>manifest</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>bundle-install</id>
                        <phase>install</phase>
                        <goals>
                            <goal>install</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>                    

 ... 
```

带 bnd 指令

```
Web-ContextPath: my-root-http/rest/
Service-Component: * 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:43:46.133

OSGi 有一部分规范称为远程服务。简而言之，它的工作方式是您可以使用特殊的服务属性注册服务，并且基于属性技术应该选择您的服务并从中创建一个端点。它不仅与 REST 有关，还与任何处理远程调用的技术有关。您可以在“远程服务”一章下的 OSGi 核心规范中找到信息。

好吧，它是一个规范，但谁来实现它？目前我尝试了两个更大的项目。CXF DOSGi 和 Eclipse ECF。他们提供了多种支持远程服务规范的技术。CXF 特别支持 Jax-RS，基于它在服务器端和客户端的实现。

因为我不想在 OSGi 中使用 spring 特定的解决方案，所以我最终没有使用 CXF，而是创建了我自己的解决方案。它基于 Jersey 和远程服务规范。当使用 service.exported.interfaces=* 和 service.exported.configs=org.everit.osgi.remote.jersey 指定 OSGi 服务时，它将使用 HttpService 在 /rest/ 路径下创建一个休息端点。您的捆绑包不必是 wab，它可以是简单的捆绑包。

我必须提到，如果您通过任何远程服务实现公开您的服务，您应该将 Jax-RS 注释带入由您的原始类实现的接口，并基于该接口公开您的服务。

我建议您应该使用与 Spring 惊人地相似的 Blueprint（OSGi 规范的一部分），而不是 OSGi 中的 @Resource 和 @Component 注释。目前 Apache Aries 和 Gemini Blueprint 实现了它。使用蓝图，您可以轻松创建 bean 并将它们相互连接。如果以这种方式注册您的远程服务，您可以在蓝图的帮助下设置任何属性（就像 spring applicationcontext.xml 中 bean 的属性一样）。

[您可以在https://source.everit.biz/svn/everit-osgi/trunk/samples/jaxrs/](https://source.everit.biz/svn/everit-osgi/trunk/samples/jaxrs/) *(user/passwd: guest/guest)*找到我制作的示例应用程序。[在http://cookbook.everit.org](http://cookbook.everit.org)上有一个指南解释了如何启动和开发这些示例

我希望示例应用程序可以帮助您开始使用远程服务规范一章。

要了解如何使用 JPA 和注入（蓝图），您应该查看 OSGi 纲要规范以了解可能性并找到您喜欢的实现。我还制作了一个基于 blueprint 和 hibernate-jpa 的示例项目，您可以将其作为我已经提供的示例 url 的兄弟找到。

**更新**

我在[https://github.com/everit-org/osgi-remote-jersey](https://github.com/everit-org/osgi-remote-jersey)还做了一个 JAXRS 扩展器实现。有关文档，请参阅自述文件。它与第一个不同之处在于它基于白板服务属性的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:58:04.953

我在 OSGi、Declarative Services 和 Jersey 遇到过类似的问题。

可以使用 @Component 和 @Reference 注释对资源进行注释。这将指示 DS 创建 SomeResource 类的实例，并在满足所有依赖项（引用）时将有效引用注入此实例。

您的引用为空的原因是因为 JAX-RS 实现将为每个 Web 请求创建 SomeResource 类的新实例。SomeResource 类的这个实例与 DS 创建的实例不同。

我通过使用 Java 静态关键字将引用变量设为静态来解决了这个问题：

```
private static SomeService service = null; 
```

这确保了依赖引用绑定到类对象而不是实例，然后所有实例都可以看到注入的值。

这个解决方案引入了一个新问题。必须在取消绑定事件（当服务不可用时）清除此引用，因为当实例被销毁时它不会被销毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:34:02.683

当 @Path 注释类型注册为服务本身时，问题将得到解决。使用 DS，您不仅可以注入其他服务。大约一年前，我自己也遇到了这个问题。这就是为什么我编写了一个小的 OSGi JAX-RS 连接器，它可以为您提供我所描述的内容。如果您愿意，请尝试一下：[https ://github.com/hstaudacher/osgi-jax-rs-connector](https://github.com/hstaudacher/osgi-jax-rs-connector)

# c# - 带有 ReadCommited 标志的 TransactionScope 仍然返回未提交的数据

> ID：10200348
> 
> 赞同：2
> 
> 时间：2012-04-17T22:51:06.133
> 
> 标签：c#, entity-framework, transactionscope

我正在使用 TransactionScope 来管理 EF 中的事务，我需要 ReadCommited 行为，但它不能按预期工作：

```
using (var trans = new TransactionScope(TransactionScopeOption.Required, 
                            new TransactionOptions() 
                                { IsolationLevel = IsolationLevel.ReadCommitted}))
{
    var c1 = customerRepository.Get(1);
    c1.FirstName = "Modified";
    customerRepository.Save();

    var c2 = customerRepository.Get(1);
    Assert.AreNotEqual("Modified", c2.FirstName);

    trans.Complete();
} 
```

虽然在获取第二个实例时我仍然没有提交事务，但它的 FirstName 已经被修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T22:54:36.473

你在同一个事务中。事务隔离级别是指不同的事务。

您不能将翻译与自身隔离，而是与其他不同的事务隔离。

尝试打开两个不同的事务范围（即同时运行两个应用程序），您将看到它们之间的操作系统隔离效果。您可以同时调试两个不同的应用程序，并在提交范围之前暂停它们。

看[SET TRANSACTION ISOLATION LEVEL (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

如您所见，在解释每个事务隔离级别时，它总是引用其他事务：

> READ UNCOMMITTED 指定语句可以读取已被其他事务修改但尚未提交的行。
> 
> READ COMMITTED 指定语句不能读取已被其他事务修改但未提交的数据。
> 
> REPEATABLE READ 指定语句不能读取已被其他事务修改但尚未提交的数据，并且...

等等。

# java - 如何在 Eclipse 的库文件夹中组织 jar 文件？

> ID：10200352
> 
> 赞同：1
> 
> 时间：2012-04-17T22:51:28.180
> 
> 标签：java, eclipse, eclipse-jdt

我在 Eclipse 中有一个 Java 项目，在 Eclipse 中有一个 Java 动态 Web 项目。在前者中，所有 jar 文件都单独显示在顶级项目文件夹下。在后者中，jar 文件位于 Libraries 文件夹下，导航更方便。

**是否也可以在 Java 项目中以相同的方式组织它们？如果是这样，怎么做？**

**更新：**它是项目资源管理器视图。对于 Java 项目，我看到：“my_project_name”，箭头向下指向，然后我看到：“package_icon src/main/java”，在“package_icon src/main/resources”下方，然后是 20 个 jar 文件，位于下方其他：“jar_icon 激活-1.1.jar”，...

对于 Java 动态 Web 项目，我看到：“my_project_name”如上，然后我看到：“JAX-WS Web 服务”（未扩展），然后是“部署描述符”（未扩展），然后是我扩展的“Java 资源”，所以我在下面看到它的组件，其中第一个是：“package_icon src/main/java”，然后在它下面，“package_icon src/main/resources”，然后在它下面是**“libraries_icon Libraries”而不是20个罐子**！如果我真的需要查看 20 个罐子，我可以选择扩展库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-17T18:56:52.073

我发现在 Eclipse Kepler 中让事情变得更漂亮的唯一选择是：

1.  在 Project Explorer 窗口的右上角有一个向下箭头。选择它，然后自定义视图。

2.  选择“来自外部的库”，然后确定。

有点俗气...

**编辑：**当然我不得不去做更多的挖掘......看起来我必须尝试[一下](http://ant.apache.org/ivy/ivyde/history/trunk/cp_container.html)，看看它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T04:38:03.350

我在 Eclipse Juno（最新版本）上注意到了这个“功能”，当您将 jar 文件添加到构建路径时，它不会在项目中显示为单个文件。

尝试从构建路径中删除其中一个 jar 以查看它是否再次出现。

我找不到如何关闭它。

顺便说一句......您的“Java 项目”的项目布局更类似于“Maven 项目”，它更强大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-23T18:41:48.677

类似于 M Miller 的回答（但对于 Juno），单击`Show 'Referenced Libraries' Node`Package Explorer 窗口的下拉菜单：

![参考库节点执行和结果](../Images/f6f7a96c0dec4eea56a1e1a8e7ad7af3.png)

我正在使用：

```
Eclipse IDE for Java Developers

Version: Juno Release
Build id: 20120614-1722 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-25T07:20:26.367

您应该通过 Window > show View 切换到 Package Explorer。它将在一个`Referenced Libraries`文件夹中显示所有引用的库。

# c - 使用 C 从文件中删除所有重复的行

> ID：10200354
> 
> 赞同：-2
> 
> 时间：2012-04-17T22:51:53.470
> 
> 标签：c, file-io, duplicate-removal

在这个问题中： [Detecting duplicate lines on file using c](https://stackoverflow.com/questions/10189594/detecting-duplicate-lines-on-file-using-c) i 可以检测到重复行，但是我们如何从文件中删除这些行？

谢谢。

编辑：添加我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct somehash {
    struct somehash *next;
        unsigned hash;
        char *mem;
};

#define THE_SIZE 100000

struct somehash *table[THE_SIZE] = { NULL,};

struct somehash **some_find(char *str, unsigned len);
static unsigned some_hash(char *str, unsigned len);

int main (void)
{
    char buffer[100];
    struct somehash **pp;
    size_t len;
    FILE * pFileIn;
    FILE * pFileOut;

    pFileIn  = fopen("in.csv", "r");
    pFileOut  = fopen("out.csv", "w+");

    if (pFileIn==NULL) perror ("Error opening input file");
    if (pFileOut==NULL) perror ("Error opening output file");

    while (fgets(buffer, sizeof buffer, pFileIn)) {
            len = strlen(buffer);
            pp = some_find(buffer, len);
            if (*pp) { /* found */
                fprintf(stderr, "Duplicate:%s\n", buffer);
                }
            else    
        {       /* not found: create one */
                    fprintf(stdout, "%s", buffer);
                    fprintf(pFileOut, "%s", buffer);
                    *pp = malloc(sizeof **pp);
                    (*pp)->next = NULL;
                    (*pp)->hash = some_hash(buffer,len);
                    (*pp)->mem = malloc(1+len);
                    memcpy((*pp)->mem , buffer,  1+len);
                }
        }

return 0;
}

struct somehash **some_find(char *str, unsigned len)
{
    unsigned hash;
    unsigned short slot;
    struct somehash **hnd;

    hash = some_hash(str,len);
    slot = hash % THE_SIZE;
    for (hnd = &table[slot]; *hnd ; hnd = &(*hnd)->next ) {
        if ( (*hnd)->hash != hash) continue;
            if ( strcmp((*hnd)->mem , str) ) continue;
                break;
        }

    return hnd;
}

static unsigned some_hash(char *str, unsigned len)
{
    unsigned val;
    unsigned idx;

    if (!len) len = strlen(str);

    val = 0;
    for(idx=0; idx < len; idx++ )   {
            val ^= (val >> 2) ^ (val << 5) ^ (val << 13) ^ str[idx] ^ 0x80001801;
    }

    return val;
} 
```

但在输出文件中，我们总是第一次出现！

编辑2：澄清：目的是在输入文件中查找所有重复项。当输入中有不止一个行的实例时，该行根本不应该出现在输出*中*。目的不仅是删除该行的重复*项*，因此每个仅出现一次，而且如果该行在输入中重复，则删除该行的*所有实例。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:02:07.970

本质上，从文本文件中删除行的唯一方法是复制文件，而副本中不包含这些行。通常情况下是这样的：

```
while (fgets(buffer, size, infile))
    if (search(your_hashtable, buffer) == NOT_FOUND) {
        fputs(line, outfile);
        insert(your_hashtable, buffer);
    } 
```

如果你想节省一些存储空间，你可以存储散列而不是完整的行。理论上，由于哈希冲突可能会失败，但如果您使用像 SHA-256 这样的加密哈希，则冲突的机会可能比由于 CPU 错误导致字符串比较出错的机会要慢。此外：如果您发现与 SHA-256 的冲突，您可能至少可以从中获得一点名气（如果不是财富）。

编辑：正如@Zack 所暗示的，哈希大小的情况基本上是决定你愿意接受的碰撞机会的问题。使用加密的 256 位散列，机会如此渺茫，几乎不值得考虑。如果你把它减少到，比如说，一个 128 位的散列，机会会增加很多，但对于大多数实际目的来说，它们仍然足够小。另一方面，如果您将其缩减为 32 位 CRC，那么如果数据非常重要，那么发生冲突的可能性可能比我乐意接受的要高。

我可能应该提到另一种可能性：另一种可能性是使用一些混合 - 存储类似 32 位 CRC（计算速度*非常*快）之类的内容以及文件中该行开始的偏移量。如果您的文件从不超过 4G，您可以将两者都存储在 8 个字节中。

在这种情况下，您的工作方式略有不同：您从计算 CRC 开始，绝大多数时候，当它不在文件中时，您将文件复制到输出并将这些值插入哈希表中。当它已经在表中时，您返回可能相同的行，将其读回，并与当前行进行比较。如果它们匹配，您将回到原来的位置并前进到下一行。如果它们不匹配，则将当前行复制到输出，并将其偏移量添加到哈希表中。

编辑2：让我们暂时假设文件足够小，您可以合理地将整个内容放入内存中。在这种情况下，您可以存储一行，以及它发生的行号。如果一行已经存储，您可以将其行号更改为 -1，以表明它是重复的，不应出现在输出中。

在 C++ 中（因为它定义了相关的数据结构），它可能看起来像这样：

```
std::string line;

typedef std::map<std::string, int> line_record;

line_record lines;
int line_number = 1;

while (std::getline(line, infile)) {
    line_record::iterator existing = lines.find(line);
    if (existing != lines.end()) // if it was already in the map
        existing->second = -1;    // indicate that it's duplicated
    else
        lines.insert(std::make_pair(line, line_number); // otherwise, add it to map
    ++line_number;
} 
```

好的，读取行，并且对于每一行，它检查它是否已经在地图中。如果是，则将 line_number 设置为 -1，表示它不会出现在输出中。如果不是，则将其与其行号一起插入到地图中。

```
line_record::iterator pos;

std::vector<line_record::iterator> sortable_lines;

for (pos=lines.begin(); pos != lines.end(); ++pos)
    if (pos->second != -1)
        sortable_lines.push_back(pos); 
```

这设置`sortable_lines`为映射中的迭代器向量，因此我们无需复制整行，而是将迭代器（本质上类似于指针）复制到这些行。然后它将迭代器复制到那里，但仅适用于行号不是-1的行。

```
std::sort(sortable_lines.begin(), sortable_lines.end(), by_line_number());

struct by_line_number {
     bool operator()(line_record::iterator a, line_record::iterator b) { 
         return a->second < b->second;
     }
}; 
```

然后我们按行号对这些迭代器进行排序。

```
for (int i=0; i<sortable_lines.size(); i++)
     outfile << sortable_lines[i]->first << "\n"; 
```

最后，我们按照原始行号将每一行复制到输出文件中。

# c++ - 将矩阵拆分为小矩阵块的方法

> ID：10200359
> 
> 赞同：2
> 
> 时间：2012-04-17T22:52:23.353
> 
> 标签：c++, algorithm, math

我有一个问题，想知道是否有人可以提供理想的解决方案。

基本上（小数据）但是，如果我有这样的矩阵：

```
 0 1 0 0
     1 1 1 0
     0 0 0 0
     1 1 0 0 
```

然后我需要将此矩阵拆分为与第二个矩阵大小相同的块，在本例中为 2x2：

```
0 1
1 1 
```

我知道它与 offsetX/Y 值有关，这些变化取决于（小）矩阵的大小，我只是不知道计算这些结果的计算方法。我将把 offsetX/Y 传递给一个函数（带有向量），这样我就可以计算特定块的总和。

有人有建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:01:37.117

```
import std.stdio : writeln;
void main(string[] args)
{
    int m=4, n=4;
    int[][] matrix = [[0, 1, 0, 0], [1, 1, 1, 0], [0, 0, 0, 0], [1, 1, 0, 0]];
    int mm=2, nn=2;
    int sum;
    for(int x=0; x<m; x+=mm)
      for(int y=0; y<n; y+=nn)
        sum += summation(matrix, x, y, mm, nn);
    writeln(sum);
}    
int summation(int[][] matrix, int offsetx, int offsety, int m, int n)
{
  int sum;
  for(int x=offsetx; x<offsetx+m; x++)
    for(int y=offsety; y<offsety+n; y++)
      sum += matrix[x][y];
  return sum;
} 
```

除非你在寻找别的东西？在解释您的要求时，您的问题含糊不清。

（这在 D 中编译，因为它是我唯一可以访问 atm 的东西，所以将它用作转换为 C++ 的指南）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T00:14:05.733

为了在原位拆分矩阵（即不复制它），您需要一个可以同时处理原始和拆分部分的表示 - 这将使定义递归算法等变得更加容易：

```
template <class elt> class MatRef {
    elt* m_data;
    unsigned m_rows, m_cols;
    unsigned m_step;

    unsigned index(unsigned row, unsigned col)
    {
        assert(row < m_rows && col < m_cols);
        return m_step * row + col;
    }

public: // access
    elt& operator() (unsigned row, unsigned col)
    {
        return m_data[index(row,col)];
    }

public: // constructors
    MatRef(unsigned rows, unsigned cols, elt* backing)  // original matrix
        : m_rows(rows)
        , m_cols(cols)
        , m_step(cols)
        , m_data(backing)
    {}
    MatRef(unsigned start_row, unsigned start_col,
           unsigned rows, unsigned cols, MatRef &orig) // sub-matrix
        : m_rows(rows)
        , m_cols(cols)
        , m_step(orig.m_step)
        , m_data(orig.m_data + orig.index(start_row, start_col))
    {
        assert(start_row+rows <= orig.m_rows && start_col+cols <= orig.m_cols);
    }
}; 
```

原始矩阵构造函数假定它的`backing`参数指向一个至少`rows*cols`长的数据元素数组，用于存储矩阵数据。矩阵的维度由数据成员`m_rows`和定义`m_cols`。

数据成员`m_step`表示从一行的开头到下一行的开头有多少个数据元素。对于原始矩阵，这与 相同`m_cols`。请注意，`m_cols`子矩阵的 可能小于它所指的原始矩阵的 —— 这就是子矩阵“跳过”原始矩阵中不属于子矩阵的元素的方式。为了使其正常工作，`m_step`必须与原始矩阵中的相同。

不管矩阵是否跳过元素，数据成员`m_data`总是指向矩阵的第一个元素。子矩阵构造函数中的`assert()`确保每个新的子矩阵都适合它所派生的矩阵。

* * *

我不确定这是否算作“有趣的算法”，但它是定义和访问子矩阵的一种有效且方便的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T00:56:40.680

从数学上讲，您可以使用曲线分割矩阵，例如 az 曲线或 peano 曲线。这样你也可以降低维度的复杂性。z 曲线使用 4 个四边形来分割一个平面，类似于四叉树。

编辑：我刚刚了解到它是 z 阶曲线而不是 z 曲线：[http](http://en.wikipedia.org/wiki/Z-order_curve) ://en.wikipedia.org/wiki/Z-order_curve 。z 曲线是生物信息学中的 3d [http://en.wikipedia.org/wiki/Z_curve](http://en.wikipedia.org/wiki/Z_curve) ??? 哈哈！我不是生物信息学家，也不是维基百科，但对我来说这听起来像是胡说八道。z 顺序曲线也可以覆盖 3d 区域。也许维基百科想说这个？这是一张 3d z 阶曲线的大图[http://en.wikipedia.org/wiki/File:Lebesgue-3d-step3.png](http://en.wikipedia.org/wiki/File:Lebesgue-3d-step3.png)。它甚至在维基百科的文章中？？？？？？

# android - Android 虚拟键盘按钮被不当禁用（Kindle Fire）

> ID：10200362
> 
> 赞同：1
> 
> 时间：2012-04-17T22:52:36.997
> 
> 标签：android, kindle-fire, virtual-keyboard

我有一个用户报告了我的应用程序错误。我的布局中有几个 EditText 字段。我只希望用户能够输入带符号的十进制数字。但是，我没有将它们声明为布局，`number|numberSigned|numberDecimal`因为我有一个自定义 TextWatcher 附加到这些字段，它处理输入并确保它是正确的。我这样做是因为我希望减号键充当切换开关。

假设该字段中有“300”。如果用户点击减号，我的自定义 TextWatcher 会拦截它并将其转换为“-300”而不是“300-”。如果他们再次点击减号，它将删除现有的减号并将其更改为“300”。

这对几乎所有人都适用，但不适用于 Kindle Fire。虚拟键盘上的小数点和减号键被禁用，因此他们甚至无法选择点击这些键并让自定义文本观察器完成其工作。

如果我确实将字段声明为`number|numberSigned|numberDecimal`，则字段不会让用户点击减号键，除非光标位于最左边的位置（即在 300 中的 3 之前）。

我怎样才能告诉 Kindle Fire 确保小数点和减号键需要处于活动状态，但同时在到达我的自定义 TextWatcher 之前不要限制用户允许的输入......你知道，就像其他所有 Android 设备一样设备一直为我工作？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:33:44.613

@zapl 的回答：

```
theEditText.setRawInputType(Configuration.KEYBOARD_12KEY) 
```

工作！去寻找他的其他一些好的答案并为他投票，以便他可以为这个答案获得适当的赞誉。;)

# php - Remember-Me-cookie - 在哪里存储令牌

> ID：10200363
> 
> 赞同：0
> 
> 时间：2012-04-17T22:52:37.730
> 
> 标签：php, sql, session-cookies, remember-me

我目前正在我的网站上实现用户身份验证，为了方便起见，我想实现一个记住我的功能。该网站是一个免费游戏，安全不是最重要的，因为没有存储个人日期 - 除了电子邮件地址和密码（使用 PHPass 框架）。

现在在哪里存储 cookie 的令牌？当我在网上阅读时，大多数网站似乎都想将其放在单独的表格中，但从未提及原因。

所以我正在考虑将其存储在我的“用户”表中，其中存储（散列）密码、电子邮件地址和其他一些信息。我会添加一个“令牌”列，如果用户登录时标记了“记住我”，我将创建一个令牌并将其存储在那里。

这在某种程度上不是很好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:56:58.563

分隔表更好，因为用户可以从多个浏览器/机器进行身份验证，因此您需要能够跟踪每个用户的多个令牌。

所以为此创建额外的表

# xcode - 如何添加 UILabel，使其文本比另一个 UILabel 的“文本”低 2 个像素？

> ID：10200366
> 
> 赞同：0
> 
> 时间：2012-04-17T22:53:07.373
> 
> 标签：xcode, uilabel

我真的在寻找这个问题的答案，但没有想出任何可靠的东西，所以就这样吧。

我正在动态地将 UILabel 添加到视图中，它们可以是任意大小。我希望将第二个添加的一个放置在最后一个下方约 2 个像素处，无论是否有字母在下方。

我尝试过使用各种方法在将标签框调整为字体大小后获取标签框，但没有看。框架似乎总是比垂直的实际文本大。

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T01:56:53.313

首先，我会尝试将标签设置`adjustsFontSizeToFitWidth`为 NO，看看它是否会让你弄乱正常比例，这似乎是你的目标。

如果这不起作用，您可能需要将字符串绘制到 CALayer。创建一个 CALayer 并将其添加到视图的根层，即：

```
[yourView.layer addSublayer.yourNewLayerForString]. 
```

将子层的委托设置为将进行绘图的类：

```
[yourNewLayerForString setDelegate:self]; 
```

并`drawLayer`在该类中实现（您指定为委托的类）。drawLayer 代码可能有点难看，但您可以找到有关如何在图层中绘制字符串的示例。这个看起来不错：[addTextToLayer](https://stackoverflow.com/questions/2209734/add-text-to-calayer)。

然后，您将可以精确控制字体和字符串大小，并可以调整图层框架和视图框架以适合您的目标。

# zend-framework - ZendFramework：类的对象无法转换为字符串

> ID：10200368
> 
> 赞同：0
> 
> 时间：2012-04-17T22:53:09.990
> 
> 标签：zend-framework, zend-form

大家好，我有一个带有一个输入框的表单，当我提交表单时，我收到以下错误：

可捕获的致命错误：无法将 Application_Model_DbTable_Comments 类的对象转换为 /Users/Ric/Sites/MN/library/Zend/Db/Statement/Pdo.php 中的字符串，第 228 行调用堆栈：0.0002 657600 1\. {main}() /Users/Ric/Sites/MN/public/index.php:0 0.0323 6224344 2\. Zend_Application->run() /Users/Ric/Sites/MN/public/index.php:28 0.0323 6224344 3\. Zend_Application_Bootstrap_Bootstrap->run () /Users/Ric/Sites/MN/library/Zend/Application.php:366 0.0324 6224480 4\. Zend_Controller_Front->dispatch() /Users/Ric/Sites/MN/library/Zend/Application/Bootstrap/Bootstrap.php :97 0.0420 7942648 5\. Zend_Controller_Dispatcher_Standard->dispatch() /Users/Ric/Sites/MN/library/Zend/Controller/Front.php:954 0.0474 8519528 6\. Zend_Controller_Action->dispatch() /Users/Ric/Sites/MN /library/Zend/Controller/Dispatcher/Standard.php:295 0.0475 8528200 7.ClubDescriptionController->indexAction() /Users/Ric/Sites/MN/library/Zend/Controller/Action.php:516 0.0760 12357968 8\. Application_Model_DbTable_Comments->addComment() /Users/Ric/Sites/MN/application/controllers/ClubDescriptionController .php:33 0.0760 12358408 9\. Zend_Db_Table_Abstract->insert() /Users/Ric/Sites/MN/application/models/DbTable/Comments.php:25 0.0790 12371776 10\. Zend_Db_Adapter_Abstract->insert() /Users/Ric/Sites /MN/library/Zend/Db/Table/Abstract.php:1075 0.0791 12373808 11\. Zend_Db_Adapter_Pdo_Abstract->query() /Users/Ric/Sites/MN/library/Zend/Db/Adapter/Abstract.php:575 0.0791 12373888 12\. Zend_Db_Adapter_Abstract->query() /Users/Ric/Sites/MN/library/Zend/Db/Adapter/Pdo/Abstract.php:238 0.0793 12379024 13\. Zend_Db_Statement->execute() /Users/Ric/Sites/MN /library/Zend/Db/Adapter/Abstract.php:479 0。0793 12379024 14\. Zend_Db_Statement_Pdo->_execute() /Users/Ric/Sites/MN/library/Zend/Db/Statement.php:300 0.0793 12379104 15\. PDOStatement->execute() /Users/Ric/Sites/MN/library /Zend/Db/Statement/Pdo.php:228

这是表格：

```
<?php

class Application_Form_Comment extends Zend_Form
{

public function init()
{
    $this->setName('comment');
    $id = new Zend_Form_Element_Hidden('id');
  $id->addFilter('Int');
        $comment = new Zend_Form_Element_Text('comment');
        $comment->setLabel('Comment:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $submit = new Zend_Form_Element_Submit('submit');
    $submit->setAttrib('id', 'submitbutton');
    $this->addElements(array($id, $comment, $submit));
        }
    } 
```

这是控制器：

```
public function indexAction()
    {
       //action for the comments submission
       $form = new Application_Form_Comment();
       $form->submit->setLabel('Comment');
       $this->view->form = $form;
       if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
            $comment = $form->getValue('comment');
            $comment = new Application_Model_DbTable_Comments();
            $comment->addComment($comment);
            $this->_helper->redirector('index');
        } else {
            $form->populate($formData);
        }
    }
} 
```

该模型：

类 Application_Model_DbTable_Comments 扩展 Zend_Db_Table_Abstract {

```
protected $_name = 'comments';

public function addComment($comment) {
    $data = array(
        'comment' => $comment,
        );
    $this->insert($data);
} 
```

}

风景：

```
<div id="comments">
    <?php echo $this->form; ?>
</div> 
```

谢谢

里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T22:56:15.580

你的问题在这里

```
$comment = $form->getValue('comment');
$comment = new Application_Model_DbTable_Comments();
$comment->addComment($comment); 
```

将其更改为

```
$comment = new Application_Model_DbTable_Comments();
$comment->addComment($form->getValue('comment')); 
```

# c - 从 C 中的 argv[i] 检查 fopen 时出错

> ID：10200377
> 
> 赞同：1
> 
> 时间：2012-04-17T22:54:25.403
> 
> 标签：c, file, if-statement, error-handling, null

我一直在尝试对我的代码进行错误检查，以确保给定的参数是有效文件。以下代码：

```
int main(int argc, char *argv[]){
    for(int i = 1, i <=argc, i++){
         FILE *fileIn = fopen(argv[i],"r");
         if(fileIn == NULL){
                fprintf(stderr,"The file %s doesn't exist.",fileIn);
         }
         else if (fileIn != NULL){
             do a bunch of stuff, including printing out values from a struct
         } 
```

我遇到的问题是当我运行我的程序时，我得到这个作为输出：

```
The (null) file doesn't exist
Output from else if loop 
```

所以基本上，它是说 fileIn 是 null 并且同时不是 null 。它正在正常读取文件并按应有的方式进行操作，但每次都会遇到错误。有没有办法将指针分配给 argv[i 或其他东西？这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T22:56:51.743

代码循环了太多次。`<= argc`正在评估一个比实际存在的论点多的论点。它应该是：

```
for(int i = 1, i < argc, i++){ 
```

此外，不存在文件的 printf 应如下所示（它需要名称）：

```
fprintf(stderr,"The file %s doesn't exist.",argv[i]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T22:57:04.057

改变不等式

```
for(int i = 1, i <=argc, i++){ 
```

到

```
for(int i = 1, i < argc, i++){ 
```

如果`argc`是 2，那么

argv[0] = 程序名
argv[1] = 第一个参数

此外，由于您正在检查`if (fileIn == NULL)`，因此您无需再次检查；只需使用`else`.

# linux - 如何在 Linux 上测量随机/顺序读/写。SSD注意事项

> ID：10200382
> 
> 赞同：1
> 
> 时间：2012-04-17T22:55:03.787
> 
> 标签：linux, solid-state-drive

我想为我的 Linux Fedora 16 工作站购买 SSD 驱动器。它将主要用于通过 Gnome3、IDE 和虚拟服务器（用于 web env）进行 web 开发。

我有两个候选人。

*   至关重要的 m4 128gb（有更好的 4k 随机读取）
*   SanDiskextreme 3 120GB（顺序和写入速度更快）

我想知道什么对我的系统最有利，以及是否有一个工具可以测量我系统上的实际随机/顺序读/写。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-14T02:12:07.553

您可以尝试名为[PassMark BurnInTest™</a> 的商业版工具。最新版本是 BurnInTest 7.1。](http://www.passmark.com/products/bit.htm)

[](http://www.passmark.com/products/bit.htm)

[您也可以尝试免费软件](http://www.passmark.com/products/bit.htm)**AS** [SSD 基准测试 1.7.4739.38088](http://www.alex-is.de/PHP/fusion/downloads.php?cat_id=4&download_id=9)
BurnInTest （也适用于 Linux））和**AS SSD 基准测试**适用于 Windows 平台。 Linux 下有一些实用程序： [Linux 下存在几个 I/O 基准测试选项。](https://wiki.archlinux.org/index.php/SSD_Benchmarking#Introduction)

 ****> 1.  使用带有 -Tt 开关的 hddparm，可以按时间顺序读取。此方法与分区对齐无关！
> 2.  gnome-disk-utility 软件包中包含一个名为 gnome-disks 的图形基准测试，它将提供 min/max/ave 读取以及 ave 访问时间和漂亮的图形显示。此方法与分区对齐无关！
> 3.  dd 实用程序可用于测量读取和写入。此方法依赖于分区对齐！换句话说，如果您未能正确对齐分区，则会在此处看到这一事实，因为您正在对已安装的文件系统进行写入和读取。
> 4.  邦妮++

如果您想对基准进行更多控制，我建议您使用[**SMARTCTL**](http://smartmontools.sourceforge.net/man/smartctl.8.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:02:42.153

实际系统 RAM 更快、更便宜；）然后选择最快的系统和程序加载驱动器，即 4k 速度的 IIRC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-14T10:35:14.293

您可以尝试下面描述的我的基准测试，它也有下载程序的链接：

[http://www.roylongbottom.org.uk/linux_disk_usb_lan_benchmarks.htm](http://www.roylongbottom.org.uk/linux_disk_usb_lan_benchmarks.htm)

最新版本包括随机写作。示例结果如下。运行时参数可以选择更大的文件。

```
 ###############################################################

 Selected File Path: 
 /media/PAT//
 Total MB    7620, Free MB    7620, Used MB       0

 Linux Storage Speed Test 64-Bit Version 1.2, Tue Dec 10 16:08:20 2013

                Copyright (C) Roy Longbottom 2012

     8 MB File         1          2          3          4          5
 Writing MB/sec       5.18      11.97      12.12      12.04      11.96
 Reading MB/sec      30.88      31.57      31.60      31.45      29.22

    16 MB File         1          2          3          4          5
 Writing MB/sec      11.90      11.95      12.26      12.07      12.14
 Reading MB/sec      30.94      31.47      31.51      31.51      30.31

    32 MB File         1          2          3          4          5
 Writing MB/sec      11.97      12.07      12.11      12.15      12.18
 Reading MB/sec      31.26      31.49      31.52      31.50      30.90

 ---------------------------------------------------------------------
 8 MB Cached File      1          2          3          4          5
 Writing MB/sec     396.50      77.49      11.19      11.01      13.36
 Reading MB/sec    2810.03    2675.62    2972.66    3139.78    3079.33

 ---------------------------------------------------------------------
 Bus Speed Block KB     64        128        256        512       1024
 Reading MB/sec      28.34      28.31      30.25      31.00      31.41

 ---------------------------------------------------------------------
 1 KB Blocks File MB >    2      4      8     16     32     64    128
 Random Read  msecs    0.52   0.51   0.50   0.50   0.50   0.50   0.52
 Random Write msecs    5.47   5.56   3.31   8.48   3.35   3.35 194.27

 ---------------------------------------------------------------------
 500 Files   Write             Read             Delete
 File KB     MB/sec  ms/File   MB/sec  ms/File  Seconds
       2       0.09    22.35     3.07     0.67    0.014
       4       0.15    26.79     6.12     0.67    0.014
       8       0.35    23.43     9.94     0.82    0.014
      16       0.74    22.12    16.16     1.01    0.014
      32       1.59    20.61    22.12     1.48    0.015
      64       3.03    21.66    28.06     2.34    0.015 
```****

# java - 创建一个新线程以将对象保存到文件

> ID：10200399
> 
> 赞同：0
> 
> 时间：2012-04-17T22:57:39.060
> 
> 标签：java, multithreading, performance

我想将一个对象（我的游戏的模型/数据）保存到磁盘，但由于游戏可能会变得非常大 - 可能大到足以存储几个游戏滴答 - 我认为单独执行保存是有意义的线程以保持游戏运行相对流畅。

实现这一目标的最佳方法是什么？我不确定让 GameState（模型）成为可运行的还是 Thread 的扩展是否有意义，因为大多数时候它并不打算成为可运行的——那么从逻辑上讲，它不应该是可运行的？

我看过的其他可能性是有一个 Runnable GameSaver 类，我将 GameState 或 GameState 的副本传递给它。但是，如果我通过 GameState，这可能会导致同步问题，或者在克隆类时会减慢游戏速度。

最好的方法是什么，或者方法的优点和缺点是什么？任何其他选择也很受欢迎 - 我怀疑我的搜索已经详尽无遗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:08:12.123

从纯线程管理的角度来看，我认为最干净的方法是使用执行器。这并不能解决您的克隆（或不克隆）问题。

创建一个保存游戏的方法：

```
public void saveTheGame() {
    //you maybe need to take a snapshot, which might require synchronization
    GameState state = ....;
} 
```

创建一个可运行的，例如作为类实例成员，嵌入该调用和执行程序服务：

```
private final Runnable save = new Runnable() {
    public void run() {
        saveTheGame();
    }
}
private final ExecutorService executor = Executors.newFixedThreadPool(1); 
```

并在需要时保存游戏：

```
executor.submit(save); 
```

关闭应用程序时不要忘记关闭执行程序：

```
executor.shutdown(); 
```

例如，您也可以使用`ScheduledExecutorService`每 x 分钟运行一次的代替。

例如，该类可能如下所示：

```
public static class GameSaver {
    private final Runnable save = new Runnable() {

        @Override
        public void run() {
            saveGame();
        }
    };
    private static final ExecutorService executor = Executors.newFixedThreadPool(1);
    private final GameState state;

    public GameSaver(GameState state) {
        this.state = state;
    }

    public void save() {
        executor.submit(save);
    }

    public static void close() {
        executor.shutdown();
    }

    private void saveGame() {
        //save your game here
    }

} 
```

并在您的主要代码中：

```
GameState state = getGameState();
GameSaver saver = new GameSaver(state);
saver.save(); 
```

# php - php 5 中的 php 匿名函数

> ID：10200401
> 
> 赞同：2
> 
> 时间：2012-04-17T22:57:53.857
> 
> 标签：php, anonymous-function

我一直在使用这样的回调函数：

```
private function make_f($arg1, $arg2)
{
    $callback =
        function ($my_var) use ($arg1, $arg2)
        {
            return $my_var  * $arg1 * arg2;
        };
    return $callback;
} 
```

[它](http://php.net/manual/en/functions.anonymous.php)由 PHP 5.3.0 支持，但我的托管服务提供商有 PHP 5.2.6，所以它不起作用。有没有办法以某种方式修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:04:52.483

这真的取决于是什么`$arg`。对于任何可能的值`$arg`，我只能想出这样的东西：

```
public static $arguments = array();

private function make_f($arg)
{
    $variable_name = uniqid();

    ThisClass::$arguments[$variable_name] = $arg; // Replace ThisClass with the name of the actual class

    $callback = create_function('$my_var', 'return $my_var * ThisClass::$arguments[\'' . $variable_name . '\'];');

    return $callback;
} 
```

[这是一个演示。](http://ideone.com/o6qwO)

# php - 从 mysql db 读取值以平均行

> ID：10200405
> 
> 赞同：-1
> 
> 时间：2012-04-17T22:58:22.197
> 
> 标签：php, mysql, xcode, json

```
-(int)getRatings:(int)idNo
{ 

NSString *urlString = [NSString stringWithFormat:@"http://www.website.com/rating-grab.php"];
NSURL *url = [NSURL URLWithString:urlString];
NSData *data = [NSData dataWithContentsOfURL:url];
NSError *error;
NSMutableArray *json = (NSMutableArray*)[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

NSLog(@"json output \n:  %@  \n",json);
NSLog(@"______________\n”);

/// not sure how to access the value
NSLog(@"object at: %@\n",[json objectAtIndex:0]);
} 
```

----- 内部 php

```
// How to output values of more than one column at a time?
$sth = mysql_query("SELECT AVG(overall) FROM votes WHERE idNo=1");

$rows = array();
while($r = mysql_fetch_assoc($sth)) {
$rows[] = $r;
}
echo json_encode($rows); 
```

* * *

```
php output   [{"AVG(overall)":"5.00000”}]

Xcode output

json output 
:  (
        {
        "AVG(overall)" = "5.00000";
    }
)  
2012-04-17 15:54:12.202 
```

* * *

我希望能够将每列的平均值存储为变量。我似乎正在接近，（肯定不是最有效的方式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T01:44:21.657

您是否有理由无法修改 SQL 查询以获取同一请求中多列的平均值，例如`SELECT AVG(overall),AVG(othercolumn1),AVG(othercolumn2),AVG(othercolumn3) FROM ...`？

# python - 在Python中将列表的开头向上移动到索引到后面

> ID：10200406
> 
> 赞同：3
> 
> 时间：2012-04-17T22:58:24.277
> 
> 标签：python, list

假设我有一个清单：

[a、b、c、d、e、f]

给定一个索引，比如 3，从列表的前面删除该索引之前的所有内容，然后将其添加到后面的 Python 方法是什么？

因此，如果给定索引 3，我希望将列表重新排序为 [d, e, f, a, b, c]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:00:08.177

```
>>> l = ['a', 'b', 'c', 'd', 'e', 'f']
>>> 
>>> l[3:] + l[:3]
['d', 'e', 'f', 'a', 'b', 'c']
>>> 
```

或将其带入函数：

```
>>> def swap_at_index(l, i):
...     return l[i:] + l[:i]
... 

>>> the_list = ['a', 'b', 'c', 'd', 'e', 'f']
>>> swap_at_index(the_list, 3)
['d', 'e', 'f', 'a', 'b', 'c'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T23:01:02.943

使用切片操作，例如，

```
 myList = ['a', 'b','c', 'd', 'e', 'f']
  myList[3:] + myList[:3] 
```

给

```
 ['d', 'e', 'f', 'a', 'b', 'c'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T23:01:06.960

```
def foo(myList, x):
    return myList[x:] + myList[:x] 
```

应该做的伎俩。

像这样称呼它：

```
>>> aList = ['a', 'b' ,'c', 'd', 'e', 'f']
>>> print foo(aList, 3)
['d', 'e', 'f', 'a', 'b', 'c'] 
```

*编辑*哈哈所有答案都是一样的......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T23:23:27.543

这是sdolan所说的pythonic方式，我只能添加内联方式：

```
>>> f = lambda l, q: l[q:] + l[:q] 
```

所以，你可以像这样使用：

```
>>> f([1,2,3,4,5,6], 3)
[4, 5, 6, 1, 2, 3] 
```

# php - 我如何知道哪个页面为我服务？

> ID：10200407
> 
> 赞同：1
> 
> 时间：2012-04-17T22:58:26.010
> 
> 标签：php, javascript, browser, dns

我在一个网站上。URL 类似于`https://somesite.com/serve`

我需要告诉为我服务的页面的名称。

比如`index.html`，，`index.htm`等等……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:00:18.447

你根本不可能发现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:08:49.467

您想知道正在提供的文件。很可能您正面临使用 htaccess 或其他技术重写 url。如果只有您设法获得制作页面的框架（如果它是框架），那么要判断哪个文件可能是不可能的。然后您可以阅读文档，该文档是请求所针对的文件。大多数框架都会有一个或几个这样的文件。例如 codeignighter 将只有 index.php，而 symfony 2 将有 app.php 和 app_dev.php（如果你想要不同的环境，还有其他的）。但是，如果进行了 url 重写，通常您无法知道哪个文件可以满足您的请求。

* * *

正如@Dale 所提到的，您也不能忘记网址所说的内容。因为您不能在最后添加一些扩展名以使其看起来像文件。有时您会注意到 .php 或更常见的 .html / .htm 结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:01:07.760

我不完全确定你的意思。但我确定您可以使用 $_SERVER 找到它（文档可以在[此处](http://php.net/manual/en/reserved.variables.server.php)找到）

祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T23:01:32.977

如果您只是想找出页面名称，那么您可以这样做：

```
<?php
$currentFile = $_SERVER["PHP_SELF"];
$parts = explode('/', $currentFile);
echo $parts[count($parts) - 1];
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T23:05:43.040

可能你有一个带有[重写规则的](http://mirificampress.com/permalink/beyond_redirect_using_rewriterules_in_htaccess)[.htaccess](http://en.wikipedia.org/wiki/Htaccess) ，它看起来像：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

否则，您可能会使用查询字符串，它可能看起来像：

```
index.php?c=products&m=view&id=345 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-26T03:07:44.657

（假设服务器支持 .htaccess、mod_rewrite、mod_headers）

*临时*使用 .htaccess RewriteRule 显示标题中的所有或匹配的文件名。

示例使用文件名标记所有 php 文件头：

```
<IfModule mod_rewrite.c>
RewriteEngine on
    <IfModule mod_headers.c>
        RewriteRule .*\.php$ - [E=FILENAME:$0]
        <FilesMatch ".php$">
           Header set MY-COOL-FILENAME "filename=%{FILENAME}e"
        </FilesMatch>
    </IfModule>
</IfModule> 
```

链接

[使用 htaccess 在标头中设置文件名](https://stackoverflow.com/questions/9309102/setting-a-filename-inside-the-header-with-htaccess/9319408#9319408)

[在 Google Chrome 中查看 HTTP 标头？](https://stackoverflow.com/questions/4423061/view-http-headers-in-google-chrome)

# ios - ASIHTTPRequest didReceiveData - 如何使用？

> ID：10200408
> 
> 赞同：1
> 
> 时间：2012-04-17T22:58:38.967
> 
> 标签：ios, asihttprequest

我想使用 ASIHTTPRequest 下载文件，并且我希望它的行为类似于常规的直接到文件下载，除了我想在数据进入时对其进行加密。

因为我需要自定义数据处理，我需要让我的委托实现 request:didReceiveData，我发现：“ASIHTTPRequest 不会填充 responseData 或将响应写入 downloadDestinationPath - 如果需要，您必须自己存储响应。”

我找不到任何实现自定义 didReceiveData 的代码示例，我不确定如何处理传入的数据或如何设置下载目标路径。有没有可以在网上看的例子？

要将数据写入目标文件，我尝试简单地定义函数：

```
-(void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data {
    [data writeToFile:request.downloadDestinationPath atomically:YES];
} 
```

但是当请求完成时，文件不存在，通过以下方式验证：

```
for (ASIHTTPRequest* req in queue.operations) {
    NSLog(@"file at %@", req.downloadDestinationPath);
    if ([[NSFileManager defaultManager] fileExistsAtPath:req.downloadDestinationPath]) {
        NSLog(@"file exists!");
    }
} 
```

如果有人对这个库有经验并且可以向我指出资源、示例项目、教程，或者只是有一个简单的答案，我将不胜感激:)

编辑：使用 NSURLConnection 会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:59:35.763

该库附带一个示例项目

# mysql - 适用于 Windows Server 2008 R2 和 SQL 2005 的最佳数据库

> ID：10200410
> 
> 赞同：0
> 
> 时间：2012-04-17T22:58:42.760
> 
> 标签：mysql, sql, database, ms-access, windows-server-2008

我正在为一家工厂编写整个数据库系统，其中包括库存、工资单、进出货物、工作数据、客户等。数据库将存储在运行 Windows 2008 R2 和 SQL 2005 的服务器上。运行服务器的人也给我发了这个：

> “我们还在服务器上安装了快速手册，并且正在运行 Exchange 2010。终端服务器也是 ws 2008 R2。主交换/文件服务器上有很多功能。如果您有任何其他问题，请告诉我。”。

我知道我的老板使用 Quickbooks 来查看报告和类似的东西。我不确定exchange 2010有多相关，也不知道“终端服务器也是ws 2008 r2”的意义是什么。我的老板希望我在 ms access 2010 中编写整个系统，但我觉得这将比简单地在 MySQL 中编写更多的工作。如果我们将数据库更改为 MySQL，我的老板还能在快速手册中查看他的报告吗？什么是好的数据库技术可以使用？我觉得使用 MySQL 用脚本语言编写它是最舒服的，但如果我能用 C/C++ 之类的东西编写它，我仍然会很高兴。我一直在努力学习访问，似乎在访问中设置一个前端和后端数据库会很痛苦。

如果我可以在 MySQL 中编写这个东西，我想我可以很轻松地完成整个事情，但我担心我做不到，因为它与 Quickbooks 和以前的数据库不兼容（虽然我听说转换相当容易）。大多数情况下，Quickbook 的兼容性是我的问题。

用 Ruby 写这个东西会有多可怕？

谢谢，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:18:41.153

我并不是要成为一项破坏运动，但这个问题表达了很多天真。很难想象如果没有相关技术的基本知识，您将成功设计和实施如此庞大的系统。

一些想法：

1.  Quickbooks 已经涵盖了您说您将负责实施的大部分功能。您是在补充现有的 Quickbooks 系统、替换它还是什么？

2.  Quickbooks 使用自己的（非常慢的）数据库引擎。它与 SQL Server、MySQL 或 Access 不“兼容”。

3.  SQL Server 2005*是*一个数据库。您不使用数据库*，*而是将其*用作*数据库。像您描述的那样以 Microsoft 为中心的组织不太可能对安装另一个数据库服务器（如 MySQL）感兴趣。

4.  MS Access 包含数据库“引擎”（称为 JET）和桌面开发环境。该引擎可以与其他开发环境一起使用，并且开发环境可以附加到其他数据库引擎（通常是 SQL Server，但其他人也可以）。当你说老板想用MS Access写系统时，你需要清楚他是指引擎，还是开发环境，还是两者兼而有之。（我的猜测是他们想使用 Access 作为前端开发平台，使用 SQL Server 作为数据存储）。

5.  你不会在一个月内编写出如此复杂的系统。那时你可能甚至不会*设计*它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:43:56.233

Quickbooks 可以使用 MySQL 作为数据源（或其他任何东西），但您需要使您的数据库符合 Quickbooks 的处理方式：即，您的表需要匹配 QB 表结构。听起来您只需要一个前端（数据输入表单和报告）和一个自定义后端。如果您不进行一些前期设计思想，访问可能很快变成一场噩梦，但它确实在一个整洁的小包中为您提供免费的表单、报告和网页。确保使用连接到 SQL Server 后端的 Access Data Project (adp)。Access 确实有自己的本地数据库，但所有内容都存储在一个本地文件中，这对于将由多个位置的多人访问的应用程序不利。

另一种选择是研究可定制的 Web 平台，例如 SalesForce 或 MS Dynamics。这也将允许您创建自己的表格、表单和报告，并且所有用户都可以立即更新，但您将持续每月支付用户费用。不过，他们在简历上看起来很棒！

# jquery-ui - 按日期选择活动标签

> ID：10200418
> 
> 赞同：0
> 
> 时间：2012-04-17T22:59:30.253
> 
> 标签：jquery-ui, tabs

这个问题是关于在工作日[https://stackoverflow.com/a/7681679/1339863](https://stackoverflow.com/a/7681679/1339863)之前选择活动选项卡的。

我确信这也可以在本月完成，但是我已经搜索过并且无法找到合适的应用程序。我对 jquery 很陌生，我不知道如何更改代码以满足我的需要。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:11:55.317

您可以在 stackoverflow 存档中调整以前的代码，只需要从日期中提取月份，使用以下代码：

```
var date = new Date();
var months = date.getMonth(); 
```

# php - 基于动态模式的Unix递归查找/替换？

> ID：10200419
> 
> 赞同：-1
> 
> 时间：2012-04-17T22:59:35.287
> 
> 标签：php, unix, refactoring, replace

所以，我继承了一些非常糟糕的代码，目前只是在彻底检修之前尝试将其重构到功能点。问题之一是原始程序员设置的帖子和会话是这样的：

```
$_SESSION[somename]  
$_POST[somevar] 
```

代替：

```
$_SESSION['somename']
$_POST['somevar'] 
```

它似乎在整个网站上造成了问题。有没有一种快速的方法可以递归地查找和替换这些类型的变量？我使用的是 unix 机器，所以不确定是否有办法从命令行执行此操作，或者我是否应该编写一个 php 脚本？它们无处不在，显然命名不同，所以我需要找到任何没有引号的变量并将其替换为相同的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:12:54.817

我会使用 sed 来完成这项工作。然后我会搜索 $_POST[(something)] 并替换为 $_POST["(something)]。记住要尽可能明确。另外，记得在尝试弄乱它之前进行备份。之后我会尝试使用“php [file]”运行所有 php 文件，以检查它们是否至少在语法上正确。

# iphone - iPhone消息按钮来自应用程序中的图片？

> ID：10200428
> 
> 赞同：1
> 
> 时间：2012-04-17T23:00:35.113
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我想在我的应用程序上实现一个功能，当单击图片时，它会打开一个对话框，类似于您在特定图片上打开的对话框并单击屏幕左下角的图标。单击它时，它会为您提供 7 个按钮（电子邮件照片、消息、分配给联系人、用作壁纸、推文、打印和取消）。是否可以在我正在开发的应用程序中做类似的事情？

我真的只想要消息和电子邮件的功能，但主要是消息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:21:01.690

那是一个[`UIActionSheet`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActionSheet_Class/Reference/Reference.html)。要使图片点击敏感，您可以附加一个[`UIGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITapGestureRecognizer_Class/Reference/Reference.html)到它。

# iphone - iOS OTA 50Mb 限制是否适用于所有版本的 iOS？

> ID：10200436
> 
> 赞同：1
> 
> 时间：2012-04-17T23:01:02.687
> 
> 标签：iphone, ios, limit, ota

经过大量搜索谷歌和这里的答案后，我还没有找到明确的答案。

我们的应用程序是一个移动应用程序，能够一时兴起通过 3G/Edge/Cellular 下载，因为它低于 20Mb 限制（仅），因此获得了大量销售。

我们希望添加更多功能，但如果这仅适用于 iOS 5.1 及更高版本，则无法获得任何官方确认，例如 iOS5.1 设备（例如新 iPad）的硬编码限制，或者它是从 AppStore 服务器远程仲裁的.

可能倾向于从 AppStore 服务器进行仲裁，但目前两者似乎都是合理的。

例如。如果有人拥有运行 iOS 5.0 或更低版本的 iOS 设备并且具有 3G 连接，您能否尝试通过 3G 连接下载大型免费的东西，例如“Epic Citadel”，让我知道结果如何？获胜者获得当之无愧的虚拟高五。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:47:39.307

我亲身体验了新的 50 MB 限制（2012 年 3 月 7 日之后），即使在 iOS 4 上也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:51:57.450

简短的回答：是的。自推出新 iPad 以来，OTA 限制从 20 MB 提高到 50 MB。

# jquery - Reel JS jQuery 插件，iPad，带有缩略图的缓慢加载图像

> ID：10200446
> 
> 赞同：1
> 
> 时间：2012-04-17T23:01:41.420
> 
> 标签：jquery, jquery-reel

我们将 Reel JS 用于我们开发的 360 查看器。我们这样做是为了在页面上有多个缩略图，用户可以选择一个缩略图，然后一个新的 Reel JS 360 查看器会填充页面。

不过，我们在 iPad 上遇到了问题。当我们尝试在图像序列之间切换时，iPad 在将图像加载到 Reel JS 360 查看器的过程中往往会阻塞或停止。我们使用的是第一代 iPad。我们使用隐藏的输入字段来调用图像序列并将图像加载到占位符中。因此，所有图像都不会在页面加载时加载到页面。

在运行 Android 的摩托罗拉 Xoom 平板电脑上，图像序列的加载速度非常快。

谁能告诉我们为什么在 iPad 上图像加载器会阻塞？我们的JS有什么问题吗？该代码在 Android 平板电脑和我们的台式机上运行良好，但在 iPad 上却不行。

我们的测试页面在这里：[http ://www.dmns.org/test/jquery-360/index4.html](http://www.dmns.org/test/jquery-360/index4.html)

我没有发布任何代码，因为我不完全知道这是代码问题还是只是 iPad 的限制，所以我想看看是否有其他人可以在 iPad 上测试它并帮助我们提供任何见解或想法. 如果您绝对需要我，我可以发布我们所有的代码。但我只是认为有人查看源代码并分析它会比我尝试在此页面中放置一堆代码更容易和更好。

提前致谢。

# ios5 - 带有 UITabBar 的 UITabBarController 功能

> ID：10200449
> 
> 赞同：2
> 
> 时间：2012-04-17T23:01:45.253
> 
> 标签：ios5, xamarin.ios, interface-builder, uitabbar

我正在使用故事板制作带有界面构建器的应用程序。

我想要一个标签栏，其中没有选择任何项目。这可以通过设置来实现

```
TabBar.SelectedItem = null; 
```

但是，如果您尝试这样做，则会收到以下错误：

```
'Directly modifying a tab bar managed by a tab bar controller is not allowed.' 
```

所以我不能使用标准`UITabBarController`。我创建了一个 custom `UIViewController`，并添加了一个`UITabBar`. 在选项卡之间切换工作正常，并且没有选择也可以正常工作。

但我不知道如何使用标签栏从我的自定义视图控制器中显示我的其他视图控制器。请记住，我使用的是 interfacebuilder，因此我不能只在代码中将视图控制器创建为新对象并将它们添加到视图中。*（如[没有 UITabBarController 的 UITabBar funcionality](https://stackoverflow.com/questions/3308458/uitabbar-funcionality-without-uitabbarcontroller)中所建议的）*

那么如何在不使用 UITabBarViewController 的情况下显示自己的视图呢？

* * *

编辑：仍然没有找到解决方案，但我做了一个hacky修复。简单地创建另一个标签栏并将其放在原始标签栏的顶部。收听这些事件并用于`SelectedIndex`更改显示的视图。然后添加一些功能来选择/取消选择您自己的标签栏上的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:12:02.997

事实上，即使你`UIViewControllers`从 IB 设计你的其他人，你也可以从代码中实例化它们。您可能需要对 frame 和 autoresizing 属性进行一些操作，以使它们适合您希望它们显示在主视图中的部分，但这是可能的。

因此，知道这一点，一个简单的解决方案是`UIView`在您的 main 中创建一个简单的（我们将其称为“tabFrame”）`UIViewController`，它从您的顶部到屏幕顶部填充`UITabBar`屏幕；实例化`UIViewController`与您的选项卡相对应的视图并将其视图添加为`tabFrame`. 现在您只需要从标签栏中捕获项目选择即可隐藏或显示所需的子视图。

希望我足够清楚，否则请不要犹豫！

**编辑**：今天早上指出，在故事板上下文中，您可以有效地从代码中实例化视图控制器/场景，但为了不丢失设计器设置，**不能通过**直接调用其构造函数来完成，而是通过`StoryBoard.InstantiateViewController("vc_identifier")`调用，在故事板中为 VC 设置标识符之后编辑。

例如，请参阅[http://docs.xamarin.com/ios/recipes/General/Storyboard/Storyboard_a_TableView](http://docs.xamarin.com/ios/recipes/General/Storyboard/Storyboard_a_TableView)

# actionscript-3 - 如何防止用户在 3D 游戏中逆向行驶

> ID：10200450
> 
> 赞同：1
> 
> 时间：2012-04-17T23:01:52.603
> 
> 标签：actionscript-3, flash, actionscript, stage3d

我正在使用 Flare3D 在 Flash 中制作 3D 游戏，并且我有一条由长直线段和短曲线段组成的轨道。玩家可以自由驾驶他们的汽车，但我需要能够防止他们掉头并在赛道上向后行驶。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:10:25.920

我不知道 AS3 语法，但总体思路是定义每个段的行进方向（至少是直线段）和可接受的偏差。然后，如果玩家的方向不在偏差范围内，那么你让他们回到正轨或让他们崩溃或任何你想要的。

例子：

直线轨道段为 30 度。偏差为 +-20。在你开始踢他们的屁股之前，用户的方向可以是 10 到 50 度之间的任何地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:16:22.293

一种方法是对轨道进行分段，并且对于轨道的每一段都有一个它所面对的方向（正如 boo 所说）所以如果轨道朝北，即 0/360，那么在那个点的轨道是 0。在他们第一次转弯之后，假设右边是 90，那么那个点的轨道的值为 90。

一旦你有足够的细分，并且它们都有方向，那么你能做的就是向前看。因此，如果它们位于第 10 段，请查看第 11 段，并使用该段值作为 boo 指向的限制（+/- 20 度）。这可能会解决您在转弯时遇到的任何问题，让他们能够通过转弯，但仍然能够撞车。

这假设您跟踪他们当前所在的段，并且前面只有一个段。如果曲目有选择，您可能必须采用它。

还，

如果他们试图让汽车慢慢转向，我会同意 Boo 的观点。检查汽车在道路上的角度，只允许有这么大的变化，也许添加一个声音，强制他们已经将车轮转动到尽可能远，这样他们就明白为什么它不再转动了。

如果他们在尝试时移动得很快，我会添加一个碰撞动画，然后将他们的汽车重置回正轨。用户将学会避免面对错误的方式，因为当你这样做时它会崩溃。

# css - CSS / JS 用于单选按钮选择器的图像网格替代方案？

> ID：10200461
> 
> 赞同：1
> 
> 时间：2012-04-17T23:03:21.370
> 
> 标签：css, image, widget, radio-button, reflow

是否有任何 CSS 工具包可以让您重现单选按钮功能，但使用以网格布局的照片/图像？例如，汽车租赁网站上的汽车模型网格，用户需要通过单击汽车图片为其租赁应用程序选择首选汽车。

这类似于 HTML 选择菜单小部件，除了：

*   布局是一个网格，而不是一行项目（即需要换行）。
*   当前选定的项目是持久的并且始终可见，可选择带有复选标记（或其他基于图标的指示器以显示选择）
*   如果在浏览器调整大小时网格能够智能地布局（重新计算行和列），那就太好了。
*   可以选择在单选（单选按钮）和多选（复选框按钮）模式之间进行选择也很好。

我认为这很简单，但我很难找到这样的东西。[JQuery UI 按钮功能](http://jqueryui.com/demos/button/#icons)很接近，但（我认为）不提供以图像为中心的按钮或重排网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:54:55.970

这应该适合你。您将每辆车包装在 a 中`DIV`，在其中放置一个复选框，然后将图像包装在`label`复选框中。单击图像会选中该框。

然后 jQuery 将包装的类更改`DIV`为 selected 以便您可以对其进行样式设置以使汽车被选中。

**jQuery**

```
jQuery(document).ready(function ($) {
    'use strict';
    $('input:checkbox').click(function () {
        $(this).closest('.photo').toggleClass('selected');
    });
}); 
```

**HTML**

```
<div class="photo">
    <input type="checkbox" name="image[0][status]" value="1" />
    <label for="image[0][status]">
        <img src="#" />
    </label>
</div> 
```

# c - 检测整数溢出

> ID：10200462
> 
> 赞同：9
> 
> 时间：2012-04-17T23:03:42.633
> 
> 标签：c, debugging, operating-system

我正在使用一个大型 C 库，其中一些数组索引是使用`int`. 我需要找到一种在运行时捕获整数溢出的方法，以便缩小到有问题的代码行。Libc 手册指出：

> FPE_INTOVF_TRAP 整数溢出（在 C 程序中不可能，除非您以特定于硬件的方式启用溢出捕获）。

但是 gcc 选项`-ffpe-trap`表明这些仅适用于 FP 号码？
那么如何启用整数溢出陷阱呢？我的系统是 Xeon/Core2, gcc-4.x, Linux 2.6

我查看了类似的问题，但它们都归结为修改代码。但是，我首先需要知道哪个代码有问题。
如果 Xeons 不能捕获溢出，哪些处理器可以？我也可以使用非 emt64 机器。

同时，我发现了一个为 llvm 设计的工具： [http](http://embed.cs.utah.edu/ioc/) ://embed.cs.utah.edu/ioc/ 但是似乎没有 gcc/icc 的等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:59:04.837

好吧，我可能不得不回答我自己的问题。

我发现 gcc 有`-ftrapv`选项，快速测试确实确认至少在我的系统溢出被困。随着我了解更多，我将发布更详细的信息，因为它似乎非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:16:23.920

当然，无符号整数运算不会溢出。

使用有符号整数算术，溢出会导致未定义的行为；什么事情都可能发生。优化器正在积极优化溢出的东西。所以，你最好的选择是避免溢出，而不是在它发生时捕获它。考虑使用 CERT[的“安全整数库”](https://www.securecoding.cert.org/confluence/display/seccode/INT03-C.+Use+a+secure+integer+library)（那里引用的 URL 似乎已经 AWOL/404；我不确定发生了什么）或 Google 的[“安全整数操作”](http://code.google.com/p/safe-iop/)库。

如果您必须捕获溢出，您将需要指定您感兴趣的平台（O/S 包括版本，编译器包括版本），因为答案将非常特定于平台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T23:26:40.453

你知道溢出发生在哪一行吗？如果是这样，如果有问题的操作导致溢出，您也许可以查看汇编程序的进位标志。这是 CPU 用于进行大量计算的标志，虽然在 C 级别不可用，但可能会帮助您调试问题 - 或者至少让您有机会做某事。

顺便说一句，找到[了这个](http://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html#Code-Gen-Options)关于整数陷阱的 gcc (-ftrapv) 链接。可能是您正在寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T23:47:59.967

您可以在 gcc 中使用内联汇编程序来使用可能会产生溢出的指令，然后测试溢出标志以查看它是否确实如此：

```
int addo(int a, int b)
{
    asm goto("add %0,%1; jo %l[overflow]" : : "r"(a), "r"(b) : "cc" : overflow);
    return a+b;
overflow:
    return 0;
} 
```

在这种情况下，它会尝试添加`a`and `b`，如果添加了，它将转到`overflow`标签。如果没有溢出，它会继续，再次添加并返回它。

这遇到了 GCC 限制，即内联 asm 块既不能输出值，也不能输出分支——如果不是这样，你就不需要第二次添加来实际获得结果。

# asp.net-mvc - 在 ASP.NET MVC3 项目中组合多态对象

> ID：10200466
> 
> 赞同：6
> 
> 时间：2012-04-17T23:04:21.063
> 
> 标签：asp.net-mvc, dependency-injection, ninject-extensions, object-composition

我的问题的本质是如何使用 MVC3 和 Ninject 以合理的方式组合这些对象（见下文）（尽管我不确定 DI 是否应该在解决方案中发挥作用）。我不能透露我的项目的真实细节，但这里有一个近似值来说明问题/问题。VB 或 C# 中的答案表示赞赏！

我有几种不同的产品，它们的特性各不相同，但它们都需要在目录中表示。每个产品类在我的数据库中都有一个对应的表。目录条目具有一些特定于作为目录条目的属性，因此具有自己的表。我已经为目录条目定义了一个接口，其意图是调用 DescriptionText 属性将根据底层的具体类型给我非常不同的结果。

```
Public Class Clothing
    Property Identity as Int64
    Property AvailableSizes As List(Of String)
    Property AvailableColor As List(Of String)
End Class

Public Class Fasteners
    Property Identity as Int64
    Property AvailableSizes As List(Of String)
    Property AvailableFinishes As List(Of String)
    Property IsMetric As Boolean
End Class

Public Interface ICatalogEntry
    Property ProductId as Int64
    Property PublishedOn As DateTime
    Property DescriptionText As String
End Interface 
```

鉴于 DescriptionText 是一个表示层问题，我不想在我的产品类中实现 IATAlogEntry 接口。相反，我想将其委托给某种格式化程序。

```
Public Interface ICatalogEntryFormatter
    Property DescriptionText As String
End Interface

Public Class ClothingCatalogEntryFormatter
    Implements ICatalogEntryFormatter

    Property DescriptionText As String
End Class

Public Class FastenerCatalogEntryFormatter
    Implements ICatalogEntryFormatter

    Property DescriptionText As String
End Class 
```

在某处的控制器中会有这样的代码：

```
Dim entries As List(Of ICatalogEntry)
                   = catalogService.CurrentCatalog(DateTime.Now) 
```

在某处的视图中会有这样的代码：

```
<ul>
@For Each entry As ICatalogEntry In Model.Catalog
    @<li>@entry.DescriptionText</li>
Next
</ul> 
```

所以问题是构造函数是什么样的？如何设置它以便在正确的位置实例化适当的对象。似乎泛型或 DI 可以帮助解决这个问题，但我似乎有一个心理障碍。我想出的唯一想法是将 ProductType 属性添加到 IATAlogEntry ，然后实现这样的工厂：

```
Public Class CatalogEntryFactory
    Public Function Create(catEntry as ICatalogEntry) As ICatalogEntry
        Select Case catEntry.ProductType
        Case "Clothing"
            Dim clothingProduct = clothingService.Get(catEntry.ProductId)
            Dim clothingEntry = New ClothingCatalogEntry(clothingProduct)
            Return result
        Case "Fastener"
            Dim fastenerProduct = fastenerService.Get(catEntry.ProductId)
            Dim fastenerEntry = New FastenerCatalogEntry(fastenerProduct)
            fastenerEntry.Formatter = New FastenerCatalogEntryFormatter
            Return fastenerEntry
    ...     
    End Function
End Class

Public ClothingCatalogEntry
    Public Sub New (product As ClothingProduct)
        Me.Formatter =  New ClothingCatalogEntryFormatter(product)
    End Sub

    Property DescriptionText As String
        Get
            Return Me.Formatter.DescriptionText
        End Get
    End Property
End Class

...FastenerCatalogEntry is omitted but you get the idea...

Public Class CatalogService
    Public Function CurrentCatalog(currentDate as DateTime)
        Dim theCatalog As List(Of ICatalogEntry)
                                  = Me.repository.GetCatalog(currentDate)

        Dim theResult As New List(Of ICatalogEntry)

        For Each entry As ICataLogEntry In theCatalog
            theResult.Add(factory.Create(entry))
        Next

        Return theResult
    End Function
End Class 
```

恕我直言，除了必须为每个出现的新产品类别更改工厂外，我并没有真正从这段代码中得到任何气味。然而，我的直觉告诉我这是旧的做事方式，现在 DI 和/或泛型可以做得更好。非常感谢有关如何处理此问题的建议（以及有关更好标题的建议......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:50:17.640

我喜欢在视图模型上使用默认构造函数并通过[Automapper](https://github.com/AutoMapper/AutoMapper)填充它们。

我会有这样的视图模型：

```
public interface IHasDescription
{
    public string DescriptionText { get; set; }
}

public class ViewModelType : IHasDescription
{
    [DisplayName("This will be rendered in the view")]
    public string SomeText { get; set; }

    public string DescriptionText { get; set; }
} 
```

我有一个来自 DAL 的模型，如下所示：

```
public class DALModelType
{
    public string SomeText { get; set; }
} 
```

所以你的控制器中有这样的东西：

```
var dalModel = someRepository.GetAll();
var viewModel = Mapper.Map<DALModelType, ViewModelType>(dalModel); 
```

并且您在某个文件中有 Automapper 设置代码。这样，您只需将转换代码放在一个地方，而不是在多个方法/控制器中。您有一个使用依赖注入的[自定义解析器](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)（而不是 () => new CustomResolver()），这将包含您获取显示文本的逻辑。

```
Mapper.CreateMap<IHasDescription, ViewModelType>()
    .ForMember(dest => dest.DescriptionText, 
               opt => opt.ResolveUsing<CustomResolver>().ConstructedBy(() => new CustomResolver())); 
```

不确定这是否适用于您的工作流程，但它*应该*能够为您提供您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:45:40.273

所以做了一些小的改变，我使用 Ninject Factory 扩展来实现它。最大的变化是我的实体有足够的信息来显示任一类型（在我的人为示例中为衣服或紧固件），如果该项目实际上是衣服，则紧固件特定属性将为空，反之亦然。

```
Public Interface IDescribable
    ReadOnly Property DescriptionText As String
End Interface

Public Enum ProductType
    CLOTHING
    FASTENER
End Enum

Public Interface ICatalogEntry
    Inherits IDescribable
    ReadOnly Property ProductId As Int64
    ReadOnly Property PublishedOn As DateTime
    ReadOnly Property ProductType As ProductType
End Interface

Public Class CatalogEntryEntity
    Public Property ProductId As Long
    Public Property ProductType As ProductType
    Public Property PublishedOn As Date
    Public Property DescriptionText As String
    Public Property Color As String
    Public Property Finish As String
    Public Property IsMetric As Boolean
End Class 
```

然后有了这个，我可以如下定义我的目录服务：

```
Public Class CatalogService
    Private ReadOnly _factory As ICatalogEntryFactory
    Private ReadOnly _repository As CatalogRepository

    Public Sub New(entryFactory As ICatalogEntryFactory, repository As CatalogRepository)
        Me._factory = entryFactory
        Me._repository = repository
    End Sub

    Public Function CurrentCatalog(currentDate As DateTime) As List(Of ICatalogEntry)
        Dim items = Me._repository.GetCatalog()
        Return (From item In items Select _factory.Create(item.ProductType.ToString(), item)).ToList()
    End Function
End Class

Public Interface ICatalogEntryFactory
    Function Create(bindingName As String, entity As CatalogEntryEntity) As ICatalogEntry
End Interface 
```

假设我像这样设置绑定，Ninject 将提供工厂（太棒了！）：

```
theKernel.Bind(Of ICatalogEntry)().To(Of ClothingCatalogEntry)().Named("CLOTHING")
theKernel.Bind(Of ICatalogEntry)().To(Of FastenerCatalogEntry)().Named("FASTENER")
theKernel.Bind(Of ICatalogEntryFactory)().ToFactory(Function() New UseFirstParameterAsNameInstanceProvider()) 
```

为简洁起见，我省略了 FastenerCatalogEntry；ClothingCatalogEntry 是这样的：

```
Public Class ClothingCatalogEntry   
    Public Sub New(ByVal entity As CatalogEntryEntity)
... 
```

正是[这篇文章](https://stackoverflow.com/q/9416132/1246347)最能帮助我弄清楚这一点。我完全按照那里所示使用了 UseFirstParameterAsNameInstanceProvider。

# c - 线程安全的唯一事务 ID

> ID：10200471
> 
> 赞同：0
> 
> 时间：2012-04-17T23:04:50.337
> 
> 标签：c, multithreading

谢谢大家的帮助，我正在分享下面的代码，因为它可以提供线程安全的 4 字节事务/会话 ID，或者至少我认为是 :)。它将为 16 个线程/16 个进程提供非常可观的唯一 ID。下面是函数的基本测试，p_no 是进程号。

```
int get_id(int choice, unsigned int pid);
    int start_(int id);
    void *print_message_function( void *ptr );
    void *print_message_function2( void *ptr );

      unsigned int pid_arr[15][2];
    int p_no = 1;
    int main()
    {
         pthread_t thread1, thread2;
         char *message1 = "Thread 1";
         char *message2 = "Thread 2";    
         int  iret1, iret2;
    int s,f;
        for (s=0;s<15;s++)
        {
        for (f=0;f<2;f++)
        pid_arr[s][f]= 0;

        }

         iret1 = pthread_create( &thread1, NULL, print_message_function, (void*) message1);
         iret2 = pthread_create( &thread2, NULL, print_message_function2, (void*) message2);

         pthread_join( thread1, NULL);
         pthread_join( thread2, NULL); 
         exit(0);
    }

    void *print_message_function( void *ptr )
    {
    int one=0;

    get_id(1/*register*/,(unsigned int)pthread_self());
    while (1)
    {

    int ret = get_id(0,(unsigned int)pthread_self());
    printf("thread 1 = %u\n",ret);
    sleep(1);
    }

    }
    void *print_message_function2( void *ptr )
    {
    int one=0;

    get_id(1/*register*/,(unsigned int)pthread_self());

    while (1)
    {

    int ret = get_id(0,(unsigned int)pthread_self());
    printf("thread 2 = %u\n",ret);
    sleep(1);
    }

    }

    int get_id(int choice, unsigned int pid)
    {
    int x;

       if (choice==1) // thread registeration part 
        {
           for(x=0;x<15;x++)
        {
            if (pid_arr[x][0] == 0) 
            {
            pid_arr[x][0] = pid;     
           pid_arr[x][1] = ((p_no<<4) | x) << 24;   

           break;
            }
         }

        }

    int y;
           for(y=0;y<15;y++) // tranaction ID part 
        {
           if (pid_arr[y][0]==pid)  
            {

             if(pid_arr[y][1] >= ((((p_no<<4) | y) << 24) | 0xfffffd) )
            ((p_no<<4) | x) << 24; 
            else 
            pid_arr[y][1]++;
            return (unsigned int) pid_arr[y][1];
            break;
           }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:24:02.733

它不是线程安全的。例如，在注册部分，以下几行最终会成为问题：

```
1:     if ( pid_arr[x][0] == 0 )
        {
2:        pid_arr[x][0] = pid; 
```

如果 thread1 执行第 1 行，然后在执行第 2 行之前发生上下文切换，则 thread2 可以运行并执行第 1 行。此时，两个线程最终可以“拥有”`pid_arr`数组中的相同位置。或者更确切地说，执行第 2 行的最后一个将拥有该位置，而另一个将不拥有数组中的任何位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:30:56.410

读/写文件范围或外部变量的代码必须序列化，否则它不是线程安全的。

提供的示例不是线程安全的。

# solr - 在文件上使用 Solr 与 Map Reduce 进行搜索 - 哪个可靠？

> ID：10200477
> 
> 赞同：0
> 
> 时间：2012-04-17T23:05:13.473
> 
> 标签：solr, lucene, amazon-web-services, mapreduce

我有一个应用程序需要存储大量数据（每天大约 200,000 txns），每条记录大约 100 kb 到 200 kb 大小。数据的格式将是 JSON/XML。

该应用程序应该是高可用的，因此我们计划将数据存储在 S3 或 AWS DynamoDB 上。

我们有一些用例，我们可能需要根据一些属性（日期范围、状态等）搜索数据。大多数搜索将针对少数常见属性，但对于某些操作用例可能会有一些任意查询。

我研究了搜索非关系数据的方法，到目前为止发现了大多数技术使用的两种方法 1）构建索引（Solr/CloudSearch 等） 2）运行 Map Reduce 作业（Hive/Hbase 等）

我们的要求是搜索结果是可靠的（与 S3/DB 中的数据一致 - 类似于 oracle 查询，速度慢是可以的，但是当我们获取数据时，我们应该返回与查询匹配的所有内容，或者至少让我们知道有些结果被跳过了）

一开始看起来基于索引的方法会比 MR 更快。但我不确定它是否可靠 - 索引可能已过时？（有没有办法在我们进行搜索时知道索引已经过时以便我们可以更正它？有没有办法让索引始终与 DB/S3 中的值一致？类似于 Oracle DB 上的索引）。MR 作业似乎总是可靠的（因为它为每个查询从 S3 获取数据），这个假设对吗？有没有办法加快这个查询 - 可能是 S3 中的分区数据并基于每个分区运行多个 MR 作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:22:25.953

添加文档后，您可以 <commit /> 和 <optimize /> Solr 索引，所以我不确定过时的索引是否值得关注。我设置了一个 Solr 实例，它每天可能处理 100,000 个额外的文档。在我离职时，我们的索引中有 140 万份文档。它用于内部报告，并且性能出色（最复杂的查询也在不到一分钟的时间内）。我刚问了一位前同事，一年后它仍然做得很好。

不过，我不能对地图缩减软件说话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T13:50:06.893

例如，您应该考虑每周/每月拥有一个 Solr 核心，这样较旧的核心将是只读的，并且更易于管理并且很容易分布在多个 Solr 实例上。如果每天要添加 20 万个文档，那么您需要那个或 Solr 分片，那么单个内核永远都不够。

# php - mysql_connect - 拒绝访问数据库或数据库不存在？

> ID：10200481
> 
> 赞同：-1
> 
> 时间：2012-04-17T23:05:42.593
> 
> 标签：php, mysql, mysql-connect

所以我使用以下代码连接到我的 MySQL 数据库：

```
function dbConnect($h,$u,$p,$n) {
  if (!$con = @mysql_connect($h,$u,$p)) {$err = err("There is a problem connecting to the database. ".mysql_error());}
  else if (!@mysql_select_db($n,$con)) {$err = err("The database \"{$n}\" could not be found. Check your spelling, make sure the database exists, and that your database credentials allows you access to this database.");}
  return (isset($err)) ? $err : "";
} 
```

问题是，如果他们输入了错误的用户名，mysql_connect 将不会发现任何错误并尝试连接到数据库，这会为 mysql_select_db() 输出错误。

所以我找到[了这个链接](https://stackoverflow.com/questions/7312401/php-mysql-connect-not-returning-false)。现在通常删除“任何”用户是可行的，但我正在创建一个类似 phpMyAdmin 的工具，并将连接到具有所有类型配置的不同数据库。我怎么知道哪个用户名可以实际连接？以及如何区分不存在的数据库名称和无法访问它的用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:09:15.787

使用 mysql_errno()

[在此处](http://dev.mysql.com/doc/refman/5.5/en/error-handling.html)查看错误代码

# algorithm - 在 1000 页的书中找到前 3 个出现的单词的算法

> ID：10200488
> 
> 赞同：4
> 
> 时间：2012-04-17T23:06:43.663
> 
> 标签：algorithm

> **可能重复：**
> [在大词序列中查找前 K 个频繁词的最有效方法](https://stackoverflow.com/questions/185697/the-most-efficient-way-to-find-top-k-frequent-words-in-a-big-word-sequence)

在 1000 页的书中查找出现次数最多的 3 个单词的算法。有比使用哈希表更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:14:22.773

一个可能更好的解决方案是使用基于 trie 的字典。使用 trie，您可以在最坏情况 O( *n* × *N* ) 时间内执行任务，其中*N*是单词的数量，*n*是它们的平均长度。与哈希表的不同之处在于，trie 的复杂性与任何哈希函数或书中的词汇无关。

对于任意输入，没有比 O( *n* × *N* ) 更好的方法了，因为您必须扫描所有单词。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T01:55:43.927

奇怪的是，每个人都专注于浏览单词列表而忘记了主要问题——*取k个最频繁的项目*。实际上，哈希映射足以计算出现次数，但是这种实现仍然需要*排序*，这实际上是 O(n*logn) （最好的情况下）。

因此，**哈希映射**实现需要 1 次通过来计算单词（不保证 O(n)）和 O(n*logn) 来对其进行排序。**这里提到的尝试**可能是更好的计数解决方案，但排序仍然是问题。再一次，1遍+排序。

你真正需要的是一个**堆**，即基于树的数据结构，它使最大（最低）元素接近根。堆的简单实现（例如[二进制堆](http://en.wikipedia.org/wiki/Binary_heap)）需要 O(logn) 时间来插入新元素，需要 O(1) 时间才能获得最高元素，因此生成的算法将需要 O(n*logn) 并且*只有 1 pass*。更复杂的实现（例如[Fibonacci heap](http://en.wikipedia.org/wiki/Fibonacci_heap)）需要平均 O(1) 时间进行插入，因此生成的算法需要 O(n) 时间，这比任何建议的解决方案都要好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:15:02.213

您将不得不逐字浏览所有页面才能获得准确的答案。

因此，也使用哈希表接口来存储指向链表节点的指针的链表实现会做得很好。

您需要链表动态增长，哈希表需要快速访问所需的正确节点，以便更新计数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T23:14:47.000

维基百科是这样说的：

“对于某些字符串处理应用程序，例如拼写检查，哈希表的效率可能低于尝试、有限自动机或 Judy 数组。此外，如果每个键都由足够少的位数表示，那么，而不是哈希表表，可以直接将键用作值数组的索引。请注意，在这种情况下没有冲突。

我也会猜到一个哈希树。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-17T23:09:06.390

一个简单的方法是使用`Dictionary<string, int>`(.net) or`HashTable`并在扫描整本书时计算每个单词的出现次数。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-18T08:42:25.623

该算法求解的复杂度为

n+lg(n)-2 当 n = 3 时。

[http://www.seeingwithc.org/topic3html.html](http://www.seeingwithc.org/topic3html.html)

# ios - 再次按下时禁用所选选项卡的重新初始化

> ID：10200490
> 
> 赞同：0
> 
> 时间：2012-04-17T23:07:07.257
> 
> 标签：ios, xcode, uiviewcontroller, uitabbarcontroller, uitabbaritem

我的 UITabBarController 有问题。在我的应用程序中，我有 4 个选项卡，每个选项卡对应于它们自己的根视图控制器。我可以毫无问题地更改选项卡，并且当我切换回来时，选项卡的状态是完整的。但是，如果我要重新选择相同的选项卡，视图控制器会刷新，将我带回根目录。

这是我希望在我的应用程序中禁用的东西，我想知道是否有任何可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T13:19:12.187

在进一步研究这个问题后，我发现解决这个问题的方法是添加以下代码：

首先将 UITabBarControllerDelegate 添加到头文件（在我的例子中为 AppDelegate），然后添加到主文件：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{

bool r = ([tabBarController.viewControllers indexOfObject:viewController] != tabBarController.selectedIndex);

return r; 
```

}

# mysql - hibernate 与我的数据库不同步

> ID：10200492
> 
> 赞同：0
> 
> 时间：2012-04-17T23:07:29.347
> 
> 标签：mysql, hibernate

```
 @PersistenceContext(unitName = "ServerLayerPU")
  protected EntityManager m_entityManager;

   m_entityManager.persist(entity);
   m_entityManager.flush(); 
```

我试图让我的新实体对象与提交给数据库的内容同步。我最初放入了flush，我认为它解决了问题，但在更大的测试中问题又出现了。当这个实体被提交到数据库时，会发生影响另一个表/实体的触发器，我需要反映这一点。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T01:48:45.180

`flush()`指示实体管理器检测对托管实体所做的所有更改，并将它们发送到数据库。它不会提交事务，也不会导致从数据库中重新读取数据。（Hibernate 怎么知道要重新读取哪些数据？您不希望它重新读取所有内容，以防万一触发器修改了它插入的数据？）。

您可以使用 重新读取实体[`refresh()`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#refresh%28java.lang.Object%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T01:48:07.320

当数据库触发器更改记录的状态时，这些更改将不会反映在休眠会话中的相应实例中。您必须使用 [session.refresh()](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Session.html#refresh%28java.lang.Object%29)使用来自底层数据库的最新值更新这些实例。

# jquery - 如何使用 Ember 将新模板动态插入到 DOM 中？

> ID：10200495
> 
> 赞同：7
> 
> 时间：2012-04-17T23:07:50.827
> 
> 标签：jquery, ember.js, handlebars.js

我有一个 Ember.js 应用程序。在主模板中，我有一个帮助按钮，单击该按钮应显示 CSS 工具提示。我的工具提示是一个单独的把手模板。

我要做的是处理单击事件以将弹出窗口插入 DOM 并显示它。我不知道如何使用 Ember 将新模板插入 DOM。

这是显示帮助按钮的模板：

```
<div id="status_help" class="icon_help" {{action "helpClicked"}}></div> 
```

这是我的主要观点：

```
var checkbox = Ember.Checkbox.extend({
    templateName: 'checkbox',
    helpClicked: function(e) {
        // Not sure what to do here
    }
}));

var tooltip = Ember.View.extend({
    templateName: 'tooltip'
}); 
```

所以我不确定在事件处理程序中要做什么来呈现工​​具提示模板并将其注入到要显示的 DOM 中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-18T04:33:56.973

`Ember.View`您可以使用's`append`或`appendTo`方法创建一个新视图并将其附加到 DOM 。

```
App.MyView = Ember.View.extend({
    templateName: 'a_template'
})

var view = App.MyView.create();

// Append the view to the document body
view.append();
// ...or append to any element described using
// a jQuery-compatible selector.
view.appendTo('#my-div'); 
```

# javascript - jQuery：有条件地显示基于下拉框选择的元素

> ID：10200498
> 
> 赞同：3
> 
> 时间：2012-04-17T23:08:14.647
> 
> 标签：javascript, jquery

我有两个相关的下拉列表，其中第二个下拉列表中的内容取决于第一个下拉列表中的选择。例如，在下面的 HTML 代码中，您将首先选择应用程序方法。如果您选择空中作为应用方法，那么您将回答进一步的问题，例如空中尺寸距离。否则，需要回答地喷式。

因此，一旦网页加载完毕，两个二级下拉列表（空中尺寸距离和地面喷雾类型）将被隐藏。只有在第一个（应用方法）中做出相关选择时才会出现。

我能够在 jQuery 中实现此功能（在 jQuery 代码下方）。但是我的方法很愚蠢。我的问题是：

1.  有没有办法选择整行，而不使用计算它的序列（nth-child（））？我可以根据选择元素 ID 选择整行吗？例如，我可以先选择 $('#id_A') 然后将我的选择扩展到整行吗？

2.  有没有更好的方法（循环？）来实现这个隐藏或显示功能，而不是比较所有可能的选择（($(this).val() == "X")）？

谢谢！

这是 HTML 代码，表单由 Django 生成：

```
<div class="articles">
    <form method="GET" action=_output.html>
        <table align="center">
<tr><th><label for="id_application_method">Application method:</label></th><td><select  name="application_method" id="id_application_method">
<option value="">Pick first</option>
<option value="A">Aerial</option>
<option value="B">Ground</option>
</select></td></tr>

<tr><th><label for="id_A">Aerial Size Dist:</label></th><td><select name="aerial_size_dist" id="id_A">
<option value="A1" selected="selected">A1</option>
<option value="A2">A2</option>
</select></td></tr>

<tr><th><label for="id_B">Ground spray type:</label></th><td><select name="ground_spray_type" id="id_B">
<option value="B1" selected="selected">B1</option>
<option value="B2">B2</option>
</select></td></tr>
</table>                  
</form>
</div> 
```

这是jQuery代码：

```
<script type="text/javascript" src=" https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script> 

<script>$(function() {
    $("tr:nth-child(2)").hide();
    $("tr:nth-child(3)").hide();

    $('#id_application_method').change(function() {
    ($(this).val() == "A") ? 
    $("tr:nth-child(2)").show() : $("tr:nth-child(2)").hide();

    ($(this).val() == "B") ? 
    $("tr:nth-child(3)").show() : $("tr:nth-child(3)").hide();
    });});</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:34:44.650

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T01:16:25.137

I think iKnowKungFoo's answer is very straightforward (it's got my vote). I noticed you said your form is generated by Django though. In case it's not straightforward for you to modify your generated HTML markup, here is another solution to your problem.

```
$(document).ready(function() {
    var $aerialTr = $('#id_A').closest('tr').hide();
    var $groundSprayTr = $('#id_B').closest('tr').hide();

    $('#id_application_method').change(function() {
        var selectedValue = $(this).val();

        if(selectedValue  === 'A') {
            $aerialTr.show();
            $groundSprayTr.hide();
        } else if (selectedValue === 'B') {
            $aerialTr.hide();
            $groundSprayTr.show();
        } else {
            $aerialTr.hide();
            $groundSprayTr.hide();
        }
    });
}); 
```

Here is a jsFiddle to test: [http://jsfiddle.net/willslab/n54cE/2/](http://jsfiddle.net/willslab/n54cE/2/)

It should work with your existing markup. It selects the tr's based on the current IDs for the select boxes. If you change those IDs, you will need to modify the selectors accordingly.

I hope that helps!

Edit: Here is another alternative, "hybrid" approach inspired by iKnowKungFoo. His solution is very elegant, so I combined it with my own. This works without changes to HTML or CSS.

```
$(document).ready(function() {
    $('#id_A').closest('tr').addClass('method_options').hide();
    $('#id_B').closest('tr').addClass('method_options').hide();

    $('#id_application_method').change(function() {
        $('tr.method_options').hide();
        $('#id_' + $(this).val()).closest('tr').show();
    });
}); 
```

jsFiddle link: [http://jsfiddle.net/willslab/6ASJu/3/](http://jsfiddle.net/willslab/6ASJu/3/)

# android - android进度对话框不显示百分比

> ID：10200500
> 
> 赞同：1
> 
> 时间：2012-04-17T23:08:18.933
> 
> 标签：android, progressdialog

如果我使用过代码，对话框不显示百分比

```
 final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        int total = msg.arg1;
        mProgressDialog.setProgress(total);
        if (total >= 100){
            try {
                mProgressThread.sleep(100);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
            mProgressThread.setState(ProgressThread.STATE_DONE);
        }
    }
}; 
```

并在线程代码中

```
while ((count = input.read(data)) != -1) {
                total += count;
                Message msg = mHandler.obtainMessage();
                msg.arg1 = total;
                mHandler.sendMessage(msg);
                output.write(data, 0, count);
            } 
```

怎么了？如果我使用总++；而是总计+=计数；比例提高到 19%，但没有提高到 100%。这是因为文件的下载速度比 while 循环 100 迭代快。如果我使用总 += 计数；它显示 0 但比例为 100% 文件已下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:31:08.920

您似乎没有将任何百分比信息传递给处理程序，而是将读取字符的绝对总数。当你写总++时；您传递了您的读取例程接收数据的次数以及您写入的时间总计 +=count; 你传递了你在完整的阅读过程中读入的所有字符的总数。

如果要显示百分比，则需要从 0-100 传递进度。为此，您需要知道总共将读取多少个字符并写入 total +=count; 并通过 total/CountOfAllCharactersToRead。这样，您将正确地将 %-fraction 分配给 proress 对话框。

只是另一个评论。如果您的阅读程序非常快，则可能会发生 UI 不经常更新的情况，并且您将看不到进度条实际上从 0 运行到 100。

# iphone - iPhone应用程序终止时调用哪个函数？

> ID：10200505
> 
> 赞同：7
> 
> 时间：2012-04-17T23:08:32.067
> 
> 标签：iphone, xcode, ios5

我正在开发 Xcode 4.2.1 版和 iOS 5.0 中的项目。我想知道当您完全终止应用程序时会调用哪个函数，这意味着即使用户强制在后台运行的应用程序从主屏幕终止。我假设

`(void)applicationWillTerminate:(UIApplication *)application`

会被调用，但事实证明即使在后台终止应用程序后也没有调用它。我基本上想要做的是调用我在应用程序完全终止之前创建的方法，因此需要知道在应用程序结束时调用了哪个函数。

谢谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-04-28T08:47:50.203

“ *applicationWillTerminate ”方法只有在应用程序被终止时***没有处于挂起状态**时才会被调用。

要理解这一点，考虑到当前您的应用程序处于前台活动状态，请查看以下两种情况：

**案例1：**当你**单击**主页按钮时，应用程序通过调用方法直接进入暂停状态 - (1) applicationWillResignActive 然后 (2) applicationDidEnterBackground。

现在，当您尝试退出/终止应用程序时，双击主页按钮，然后从最近的应用程序屏幕向上滑动当前应用程序屏幕，应用程序处于暂停状态。因此，**“ *applicationWillTerminate* ”方法将不会被调用。**

**案例 2：**当你**双击**Home 按钮时，应用程序通过调用方法进入非活动状态 - (1) applicationWillResignActive。

现在，当您尝试退出/终止应用程序时，通过从最近的应用程序屏幕向上滑动当前应用程序屏幕，应用程序在被终止时处于非活动状态（而不是暂停状态）。因此，**将调用****“ *applicationWillTerminate ”方法。***

看看苹果怎么说：[![在此处输入图像描述](../Images/562b88584cc86a69ee8801528b7ef72b.png)](https://i.stack.imgur.com/l17tP.png)

有关此外观的更多信息 - [Apple 关于 applicationWillTerminate(_:) 的官方文档](https://developer.apple.com/reference/uikit/uiapplicationdelegate/1623111-applicationwillterminate)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T23:29:44.857

[这是 iOS 4.0 及更高版本上的应用程序生命周期通知和委托消息的一个很好的概述](http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging/)。简而言之...

您的应用程序通常永远不会看到**willTerminate**，因为系统通常只会在您的应用程序已经暂停（在后台）时终止它。一旦您的应用程序被暂停，它就没有机会采取行动（*），因此没有回调。

didEnterBackground**委托**消息或通知应被视为您在可能终止之前清理或保存状态的最后机会。

* * *

(*) 好的，如果您的应用程序处于受支持的后台执行模式之一（例如音频、VoIP 或导航），则它可以执行某些操作，但在这种情况下，它要么尚未暂停，要么已通过条目取消暂停特定于该背景模式的点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T23:15:36.270

如果应用程序已经暂停，它将不会收到进一步的通知。留意`didEnterBackground`通知。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T23:28:07.150

此处的[文档说明](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW49)了这种情况的行为。

简而言之，只有`applicationWillTerminate:`在应用程序正在运行时（无论是在前台还是在后台），当应​​用程序终止时，您才会收到该消息。因此，除非您的应用程序在前台或长期运行的后台模式之一（例如 VoIP、音频或由 指示的长期运行的任务`beginBackgroundTaskWithExpirationHandler`）中运行，否则它将相当快地从`background`状态转换到状态。`suspended`在这种情况下，您将永远不会收到该`applicationWillTerminate:`消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T23:16:15.890

```
- (void)applicationWillTerminate:(UIApplication *)application 
```

它在 UIApplicationDelegate 协议中。

# gwt - 防止 从 SuggestBox 冒泡

> ID：10200508
> 
> 赞同：1
> 
> 时间：2012-04-17T23:08:46.067
> 
> 标签：gwt, event-handling

我想防止当用户按**ENTER 键**在 SuggestBox 中选择一个建议时，这个 Key 事件冒泡。

我在包装中有这段代码`Composite`：

```
 Event.addNativePreviewHandler(new Event.NativePreviewHandler() {

        @Override
        public void onPreviewNativeEvent(NativePreviewEvent event) {
            if (event.getTypeInt() == Event.KEYEVENTS) {
                int key = event.getNativeEvent().getKeyCode();
                if (key == KeyCodes.KEY_ENTER) {
                    event.cancel();
                }
            }
        }
    }); 
```

但是这个处理程序永远不会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:56:02.660

我不知道为什么你的方法不起作用。但我有另一种方法。为建议框添加一个关键事件侦听器。如果按下回车键，则取消事件的传播。

```
suggestBox.addKeyPressHandler(new KeyPressHandler() {
        @Override
        public void onKeyPress(KeyPressEvent event) {
            int key = event.getNativeEvent().getKeyCode();
            if (key == KeyCodes.KEY_ENTER) {
                event.stopPropagation();
            }
        }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T09:28:26.023

这对我来说效果更好：

```
suggestBox.addKeyPressHandler(new KeyPressHandler() {
            @Override
            public void onKeyPress(KeyPressEvent event) {
                int key = event.getNativeEvent().getKeyCode();
                if (key == KeyCodes.KEY_ENTER) {
                    event.getNativeEvent().preventDefault();
                }
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T09:06:31.037

@珍，

即使未显示建议​​列表，此代码也会限制文本区域中“输入”键的操作（如果建议框与文本区域相关联）。

在显示我的建议列表时，按“ENTER”键触发了我想停止传播的事件处理程序 addSelectionHandler()（不应触发 addKeyPressHandler 事件处理程序）

# testing - 使用 msbuild.exe 将测试结果推送到 TFS 2010，但看不到结果显示

> ID：10200511
> 
> 赞同：8
> 
> 时间：2012-04-17T23:09:04.807
> 
> 标签：testing, tfs, integration-testing, automated-tests

用于`Mstest.exe`运行一组单元测试并将结果推送到 TFS 会按预期提供以下输出：

MSTest 命令：

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\mstest.exe" /testcontainer:C:\temp\AnyCPU\Release\TestAssembly.dll /publish:http://tfsserver:8080/tfs/prod /TeamProject:ProjectName /publishbuild:1.2.3.4.5 /platform:AnyCPU /flavor:Release" 
```

输出：

```
Summary
-------
Test Run Completed.
  Passed  15
  ----------
  Total   15
Results file:  C:\temp\MachineName 2012-04-17 18_57_48_AnyCPU_Release.trx
Test Settings: Default Test Settings
Waiting to publish...
Publishing results of test run alias@machinename 2012-04-17 18:57:48_AnyCPU_Release to http://tfsHost:8080/tfs/prod.
..
........Publish completed successfully. 
```

但是，在 TFS 和报告服务中，我看不到这些结果在任何地方都可用。我很可能没有在正确的地方寻找，或者没有适当的权限。

我如何在 TFS 或其操作存储中查看这些测试结果？

**更新：已解决**

问题是 MSTEST.exe 显示成功发布，即使它没有与构建正确关联。

问题出在`/platform:"Any CPU"`我使用的标志上。它想要`/platform:"Any CPU"`其中包括和之间的`Any`空间`CPU`

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\mstest.exe" /testcontainer:C:\temp\AnyCPU\Release\TestAssembly.dll /publish:http://tfsserver:8080/tfs/prod /TeamProject:ProjectName /publishbuild:1.2.3.4.5 /platform:"AnyCPU" /flavor:"Release" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T09:28:17.797

**您也可以在自动化运行**时从 MTM 中看到这一点，并且可以分析此结果并记录为什么它未能将其反映到计划中

![在此处输入图像描述](../Images/8005577a6281f492c6430645c1181b91.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T00:41:07.407

当您针对 TFS 构建实体发布 MSTest 结果时，查看测试结果的逻辑位置是构建。您应该能够从Visual Studio 中构建的[构建详细信息视图中看到已发布的测试结果。](http://msdn.microsoft.com/en-us/library/ms181733.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T22:13:09.400

问题是 MSTEST.exe 显示成功发布，即使它没有与构建正确关联。

问题出在`/platform:"AnyCPU"`我使用的标志上。它想要`/platform:"Any CPU"`其中包括和之间的`Any`空间`CPU`

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\mstest.exe" /testcontainer:C:\temp\AnyCPU\Release\TestAssembly.dll /publish:http://tfsserver:8080/tfs/prod /TeamProject:ProjectName /publishbuild:1.2.3.4.5 /platform:"AnyCPU" /flavor:"Release" 
```

# javascript - 在 Ember Todo 示例中，我将如何切换而不是删除 todo？

> ID：10200516
> 
> 赞同：1
> 
> 时间：2012-04-17T23:09:33.587
> 
> 标签：javascript, ember.js

我指的是这个例子

[http://emberjs.com/examples/todos/](http://emberjs.com/examples/todos/)

在代码中，他们通过过滤然后从集合中删除来清除列表

```
clearCompletedTodos: function() {
    this.filterProperty('isDone', true).forEach(this.removeObject, this);
  }, 
```

假设我希望应用相同的过滤器，但我想切换而不是删除。换句话说，某种类型的“隐藏完成”按钮。如果选中，它将隐藏所有已完成的任务。如果未选中，它将显示所有已完成的任务。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T08:48:55.230

您可以沿着这条线创建一些东西，请参阅[http://jsfiddle.net/pangratz666/rufjC/](http://jsfiddle.net/pangratz666/rufjC/)

**车把**：

```
{{#each todos}}
    {{#view App.TodoView todoBinding="this" }}
        {{view Ember.Checkbox valueBinding="todo.isDone" titleBinding="todo.label" }}
    {{/view}}
{{/each}} 
```

**JavaScript**：

```
App.TodoView = Ember.View.extend({
    hideTodosBinding: 'App.hideTodos',
    isDoneBinding: 'todo.isDone',
    isVisible: function(){
        return !(this.get('hideTodos') && this.get('isDone'));
    }.property('hideTodos', 'isDone').cacheable()
}); 
```

# joomla - joomla 菜单项链接到文章不链接到文章

> ID：10200517
> 
> 赞同：0
> 
> 时间：2012-04-17T23:09:44.453
> 
> 标签：joomla, joomla1.5, joomla-template

通过选择菜单项中的文章，我已将我的 joomla 菜单项链接到文章。它没有拉起这篇文章。

我可以创建一个 html 模块并向页面添加内容。

我觉得它可能是模板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:28:23.637

确保文章、菜单模块和菜单项都已发布。

# php - 在 PHP 中访问对象的部分

> ID：10200518
> 
> 赞同：1
> 
> 时间：2012-04-17T23:09:45.267
> 
> 标签：php

我在 PHP 中有一个名为 $definition 的对象。

当我

```
print_r($definition); 
```

我明白了

> Array ( [0] => 定义对象 ( [extendedText] => [text] => 鼬科的几种食肉穴居哺乳动物中的任何一种，例如欧亚大陆的 Meles meles 或北美的 Taxidea taxus，腿短，爪子长在前脚上，还有一件厚重的灰白大衣。[source] => [sourceDictionary] => ahd-legacy [citations] => Array ( ) [labels] => Array ( ) [score] => 0 [exampleUses] = > Array ( ) [attributionUrl] => [seqString] => [attributionText] => 来自 The American Heritage® Dictionary of the English Language, 4th Edition [relatedWords] => Array ( ) [sequence] => 0 [word] = > 獾 [textProns] => 数组 () [notes] => 数组 () [partOfSpeech] => 名词))

如何打印出“text”和“partOfSpeech”组件？

我试过 $definition->text, $definition[0]['text'], $definition['text']....

我迷路了...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:11:38.370

尝试：

`echo $definition[0]->text;`

和

`echo $definition[0]->partOfSpeech;`

它将对象创建为数组的第一个索引:)

编辑：使用 PHP，您实际上可以将多个对象存储在一个数组中。这很酷，因为您可以做一些很棒的事情，而不是为了争论，将文章传递给视图，您可以做一些很棒的事情：

```
<?php
$articles = array();

for($i = 0; $i < 10; $i ++)
{
  $articles[$i] = new Article("Article $i", "Hello, this is $i");
}

?> 
```

所以在这个例子（和你的例子）中，我们没有将变量articles 设置为一个对象，而是将数组的索引设置为一个对象。

因此，如果我们想取出第 3 篇文章，我们会这样做：

```
<?php
  echo $articles[2]; // remember arrays start at 0 ;)
?> 
```

因此，通过您的 vardump，我们可以看到它与该对象的索引 0 相关联。

讨厌它为什么这样做。

但是，您可以这样做以删除它：

```
<?php
$definition = array_pop( $definition[0] );

echo $definition->text;
?> 
```

# ruby-on-rails-3 - rails路线注销如何

> ID：10200521
> 
> 赞同：1
> 
> 时间：2012-04-17T23:09:54.767
> 
> 标签：ruby-on-rails-3, routes

我正在创造 twitter_zombie rails 的乐趣。我只有一个问题，当我点击注销时，会跳转到索引。但我想当我点击注销时会跳转到我指定的页面。这是“推文”页面，抱歉我的英语不好。这是 routes.rb 文件

```
TwitterZombie::Application.routes.draw do

  devise_for :users

 # get "user/login"

 # get "user/logout"

 # get "tweets/index"

 # get "tweets/new"

 # get "tweets/create"

  #get "tweets/update"

  #get "tweets/destroy"

  #get "tweets/show"

 # get "tweets/edit"

  resources :tweets
  resources :zombies

  root :to =>'twees#index'

  match '/:controller(/:action(/:id))'
  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  #match ':controller(/:action(/:id))(.:format)'
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T11:24:42.410

您可以像这样定义路线

```
match '/logout', :to => 'sessions#logout' 
```

其中*会话*是控制器，*注销*是操作。

# objective-c - UIApplication空闲定时器

> ID：10200522
> 
> 赞同：2
> 
> 时间：2012-04-17T23:10:01.850
> 
> 标签：objective-c, ios, uiapplicationdelegate

这是一个简单的问题，我似乎找不到任何信息，但我只想知道下面的代码是否会让我的应用程序被拒绝。基本上，这是一个私有 API

```
[application setIdleTimerDisabled:YES]; 
```

我想在 didFinishLaunchingWithOptions 下将此添加到我的 AppDelegate。我只是不想使用如此简单的东西并让我的应用程序被拒绝。感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:14:21.353

它是公开的，尽管苹果建议：

> 重要您应该仅在必要时设置此属性，并且应确保在不再需要时将其重置为 NO。大多数应用程序应该让系统在空闲计时器结束时关闭屏幕。这包括音频应用程序。通过适当使用音频会话服务，当屏幕关闭时，播放和录制不会中断。唯一应该禁用空闲计时器的应用程序是映射应用程序、游戏或具有零星用户交互的类似程序。

因此，如果您的应用程序与他们描述的一样，或者您谨慎使用它，您应该没问题。

# c# - 基础表单真的必须编译为类库而不是简单表单吗？

> ID：10200523
> 
> 赞同：0
> 
> 时间：2012-04-17T23:10:06.800
> 
> 标签：c#, winforms, oop, inheritance

我创建了一个我想使用的表单（名为 BaseForm）……嗯，你知道的。

然后我尝试以这种方式获取另一种形式来继承它：

```
public partial class FormThatShouldInheritFromBaseForm : BaseForm { 
```

...即使这样：

```
public partial class FormThatShouldInheritFromBaseForm : <MyProjectsNamespace>.BaseForm { 
```

...但我得到，“名称空间‘TitanNextGen_Worker’中不存在类型或名称空间名称‘BaseForm’（您是否缺少程序集引用？）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:12:33.983

我发现有时您必须先编译项目才能使继承工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:13:29.063

我认为你的问题的答案是否定的。如果它被编译为 Windows 应用程序（或任何项目类型），您可以从另一个程序集中的 Forms 继承。

这引出了一个问题；实际上，您是否只是在派生表单的项目中缺少程序集引用？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:17:05.150

好吧，第二次尝试甚至不是有效的 C#，但是是的，如果该类型驻留在外部程序集中，则需要先构建它，然后才能在主项目中使用它。

如果它不驻留在外部程序集中，请检查您的命名空间并确保它们都在同一个程序集中声明。

# java - 使用递归打印镜像单词

> ID：10200527
> 
> 赞同：1
> 
> 时间：2012-04-17T23:10:29.133
> 
> 标签：java, recursion

我需要编写一个将字符串作为参数并以镜像形式打印单词的方法。例如，“hello”应该返回“helloolleh”。我必须使用递归并且不能使用 for 循环。到目前为止，这是我的代码：

```
public static String printMirrored(String str)
{
    if(str == null || str.equals(""))

    {
        return str;
    }
    else
    {
        return str + printMirrored(str.substring(1)) + str.charAt(0);
    }
} 
```

我的输出是“helloellollolooolleh”，其中显然有一些额外的东西。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:14:02.673

尝试`str.charAt(0)`在开头使用而不是`str`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:18:29.677

递归是关于成为最懒惰的人，将其余部分委托给递归克隆。所以在“Hello”上，只取“H”，得到“ello”的镜像结果，并在两端用“H”包围它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T23:32:55.410

写的真快。应该完全按照您的意愿行事，但如果您有任何问题，请告诉我。

```
String word = "hello";
System.out.println(reverseWord(word, word.length()));

public static String reverseWord(String word, int length) {
    if(length == 0)
        return word;
    else
        return reverseWord(word + word.charAt(length - 1), length - 1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T23:22:35.407

使用[StringBuilder.reverse()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#reverse%28%29)

# c# - 何时连接事件处理程序 asp.net

> ID：10200528
> 
> 赞同：6
> 
> 时间：2012-04-17T23:10:34.927
> 
> 标签：c#, asp.net, event-handling

假设我们有一个非常标准的表单，带有一个文本框和一个按钮（为简单起见）。你想处理一个 Click 事件并根据用户的输入做一些事情。

我想知道，当您在代码隐藏中为 Click 事件连接事件处理程序时，这有关系吗？如果是这样，最好的放置位置在哪里？页面加载？页面初始化？这两个地方我都试过了，但没有发现任何区别。还是只是程序员的个人喜好？我已经在互联网上搜索了几次，但没有找到任何满意的答案。

我知道实际方法何时执行，只是不确定**接线部分**。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T23:51:41.877

如您所知，有几个`Page_xxx`事件处理程序，如`Init`, `Load`, `Prerender`... 这些事件存在于 Controls 和 Pages 以及 User 控件中（实际上它们是派生的 form `Control`，它包含所有这些事件）。

此事件与[ASP.NET 页面生命周期有关](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.80%29.aspx)

如果您仔细阅读此链接指向的页面，您将了解何时触发事件。因此，如果您将事件处理程序绑定到在事件触发之前发生的任何页面生命周期事件中，则可以保证您的事件处理程序将及时绑定以被触发。

这些是主要的生命周期步骤：

```
PreInit -> Init -> InitComplete -> PreLoad -> Load -> [Control events] ->
LoadComplete -> PreRender -> SaveStateComplete -> Render -> Unload 
```

并非所有这些都有关联的事件，但是，如果有必要，您可以覆盖相应的`OnXxx()`函数，例如`OnPreInit()`. （这通常只在自定义服务器控件上完成）。

**可以在`Page_Init`or中绑定事件`Page_Load`，因为控件事件是在所有控件加载完成后触发的**。该`Load`步骤以自上而下的方式发生，首先在 Page 中，然后在所有子控件中递归。

完成后`Load`，触发的第一个事件是更改事件，例如`TextChanged`或`SelectionChanged`。然后触发所有其他事件，例如`Click`.

**如果您在 PreRender 或 Unload 中绑定事件，它们将不会被触发。如果您在 Init 或 Load 中执行此操作，它们会**.

所以**看起来在 Init 或 Load 中绑定是安全的，但事实并非如此**：

*看起来似乎没有特殊原因将它们绑定到`Init`or上`Load`，因为它们将在页面生命周期的后期被触发。但是，由于在 中定义的绑定`.aspx`发生在 中`Init`，程序员会期望所有事件都已经绑定在`Load`事件中。如果这个程序员在后面的代码中引发了子控件的事件会发生什么？该`Load`事件首先发生在控制树的根节点，然后递归地发生在所有子节点上。因此，当程序员试图引发子控件的事件时，它不会已经被绑定。所以这不会按预期工作。这足以考虑在事件中绑定事件是不安全的`Load`。这就是为什么**您应该始终将事件绑定在`Init`**.*

看这张图可以看到Page & children事件的执行顺序： [ASP.NET Page Life Cycle Diagram](http://blogs.msdn.com/b/aspnetue/archive/2010/01/14/asp-net-page-life-cycle-diagram.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:19:05.963

我一直在控制标签中连接我的。如果我这样做，很明显存在事件处理程序。

```
<asp:Button ID="btnRefresh" runat="server" Text="Refresh" OnClick="btnRefresh_Click" /> 
```

如果我必须在代码隐藏中连接一个事件处理程序，我会将它作为私有函数调用放在 Page_Load 中。

# php - 贝宝捐款按钮 最低捐款金额

> ID：10200530
> 
> 赞同：1
> 
> 时间：2012-04-17T23:11:07.760
> 
> 标签：php, javascript, html, paypal, minimum

我正在寻找一种方法来增加贝宝捐款的最低金额（即 1 欧元）。我尝试了很多不同的事情，但我不知道我应该怎么做。

尝试了一个下拉菜单，例如：

[贝宝捐赠按钮：添加“金额”和“货币”](https://stackoverflow.com/questions/9134865/paypal-donation-button-adding-amount-and-currency)

那里的第二个帖子（将立即购买转换为捐赠按钮）但是当我点击它时，它会转到我得到这个的页面：

```
Please enter your donation amount and click Update Total. 
```

所以现在我想知道是否有人能够帮助我。我不介意它是否基于 javascript/php 或者只要最低为 1 欧元。它需要为高级帐户工作（因为它不是商业帐户）。

预先感谢您提供的任何帮助。

自己修好了：

设法自己解决：

在里面

```
<script type="text/javascript">
<!--
function validate_form ( )
{
valid = true;
if ( document.donation_form.amount.value < 1 )
{
alert ( "Please enter a minimum of 1.00 EUR" );
valid = false;
}
return valid;
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:54:46.587

设法自己解决：

在里面

```
 <head>

    <script type="text/javascript">
    <!--
    function validate_form ( )
    {
    valid = true;
    if ( document.donation_form.amount.value < 1 )
    {
    alert ( "Please enter a minimum of 1.00 EUR" );
    valid = false;
    }
    return valid;
    }
    //-->
    </script> 
```

现在它很简单。if(document.donation_form.amount.value <1) 只是检查框内的值是否为 1.00 或更高。它的代码 Paypal 或多或少地提供。他们使用 a`<form ...="donation_form">`然后调用文本输入文本字段`<input name="amount">`

# jquery - jQuery Validation 默认将错误显示为 inline，需要将其更改为 inline-block

> ID：10200533
> 
> 赞同：6
> 
> 时间：2012-04-17T23:11:28.797
> 
> 标签：jquery, jquery-validate

我正在使用[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

如何将生成的错误消息`display`值更改为`inline-block`未隐藏时？

我尝试过使用 CSS，但 jQuery 会覆盖它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:50:55.663

我遇到了这个问题并且无法使用 CSS，因为 jQuery 在初始创建后在错误元素（设置“display:block;”内联）上使用了 show() 和 hide() 方法。相反，您可以使用 validate 插件的 highlight 和 unhighlight 方法来更改内联 css。

```
 errorElement: 'em',

highlight: function(element, errorClass) {
    $(element).addClass(errorClass); // good for changing field backgrounds
    $(element).next('em').css('display','inline'); // keeps error message layout clean
},

unhighlight: function(element, errorClass) {
        $(element).removeClass(errorClass); // good for changing field backgrounds
        $(element).next('em').css('display','none'); // keeps error message layout clean
}, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T23:22:03.050

使用该`errorClass`选项指定分配给错误消息和错误元素的类：

```
$(".selector").validate({
   errorClass: "invalid"
})

<style type="text/css">
  .invalid {
    display: inline-block !important;
  }
</style> 
```

请参阅验证器选项的文档：

[http://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:21:04.410

如果你`!important`在你的 CSS 上使用它，它应该优先于 jQuery 所做的：

```
.error {
    display: inline-block !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:38:03.987

jQuery validate 没有定义任何 CSS 样式。您是否使用任何其他带有 CSS 定义的“错误”类库？

这是 JsFiddle 示例代码，其中 jQuery 使用 inline-block 验证错误消息：

[http://jsfiddle.net/maxim75/HKnQD/4/](http://jsfiddle.net/maxim75/HKnQD/4/)

```
.error
{
    color: Red;
    display: inline-block;
}​ 
```

打开它并检查您的浏览器：

![在此处输入图像描述](../Images/9dad42c6c1378088880de1bbdbe02584.png)

# ruby - ruby 1.9，force_encoding，但检查

> ID：10200544
> 
> 赞同：26
> 
> 时间：2012-04-17T23:12:47.220
> 
> 标签：ruby, character-encoding

我有一个从某种输入中读取的字符串。

据我所知，它是 UTF8。好的：

```
string.force_encoding("utf8") 
```

但是，如果这个字符串中的字节实际上不是合法的 UTF8，我现在想知道并采取行动。

通常，如果遇到这样的字节， force_encoding("utf8") 会引发吗？我*相信*不会。

如果我正在执行[#encode](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-encode)，我可以从方便的选项中选择如何处理源编码（或目标编码）中无效的字符。

但我不是在做#encode，而是在做#force_encoding。它没有这样的选择。

有意义吗

```
string.force_encoding("utf8").encode("utf8") 
```

立即获得例外？*通常从*utf8编码*到*utf8 没有任何意义。但如果有无效字节，也许这是让它立即提升的方法？或者使用`:replace`选项等对无效字节做不同的事情？

但是不，似乎也无法做到这一点。

有人知道吗？

```
1.9.3-p0 :032 > a = "bad: \xc3\x28 okay".force_encoding("utf-8")
=> "bad: \xC3( okay"
1.9.3-p0 :033 > a.valid_encoding?
=> false 
```

好的，但是我如何找到并消除那些坏字节呢？奇怪的是，这不会引发：

```
1.9.3-p0 :035 > a.encode("utf-8")
 => "bad: \xC3( okay" 
```

如果我要转换为不同的编码，它会！

```
1.9.3-p0 :039 > a.encode("ISO-8859-1")
Encoding::InvalidByteSequenceError: "\xC3" followed by "(" on UTF-8 
```

或者如果我告诉它，它会用“？”替换它。=>

```
1.9.3-p0 :040 > a.encode("ISO-8859-1", :invalid => :replace)
=> "bad: ?( okay" 
```

所以 ruby​​ 很聪明地知道什么是 utf-8 中的坏字节，并用其他东西替换 em - 当转换为不同的编码时。但我*不想*转换为不同的编码，我想保留 utf8 - 但如果那里有无效字节，我可能想提高，或者我可能想用替换字符替换无效字节。

没有办法让红宝石做到这一点吗？

**更新**我相信这最终已在 2.1 中添加到 ruby​​ 中，在 2.1 预览版中存在 String#scrub 来执行此操作。所以找那个！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T01:49:46.840

（更新：见[https://github.com/jrochkind/scrub_rb](https://github.com/jrochkind/scrub_rb)）

所以我编写了一个我需要的解决方案：[https ://github.com/jrochkind/ensure_valid_encoding/blob/master/lib/ensure_valid_encoding.rb](https://github.com/jrochkind/ensure_valid_encoding/blob/master/lib/ensure_valid_encoding.rb)

但是直到最近我才意识到这实际上是内置在 stdlib 中的，您只需要有点违反直觉地将“二进制”作为“源编码”传递：

```
a = "bad: \xc3\x28 okay".force_encoding("utf-8")
a.encode("utf-8", "binary", :undef => :replace)
=> "bad: �( okay" 
```

是的，这正是我想要的。事实证明，这是内置于 1.9 stdlib 中的，它只是没有记录，很少有人知道（或者可能很少有人会说英语？）。虽然我在某处的博客上看到这些论点以这种方式使用，但其他人也知道！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-10T12:06:13.607

在 ruby​​ 2.1 中，stdlib 最终通过`scrub`.

[http://ruby-doc.org/core-2.1.0/String.html#method-i-scrub](http://ruby-doc.org/core-2.1.0/String.html#method-i-scrub)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T11:28:59.490

确保您的脚本文件本身保存为 UTF8 并尝试以下操作

```
# encoding: UTF-8
p [a = "bad: \xc3\x28 okay", a.valid_encoding?]
p [a.force_encoding("utf-8"), a.valid_encoding?]
p [a.encode!("ISO-8859-1", :invalid => :replace), a.valid_encoding?] 
```

这在我的 windows7 系统上提供了以下内容

```
["bad: \xC3( okay", false]
["bad: \xC3( okay", false]
["bad: ?( okay", true] 
```

所以你的坏字符被替换了，你可以马上做如下

```
a = "bad: \xc3\x28 okay".encode!("ISO-8859-1", :invalid => :replace)
=> "bad: ?( okay" 
```

编辑：这里有一个适用于任意编码的解决方案，第一个只编码坏字符，第二个只是用 ?

```
def validate_encoding(str)
  str.chars.collect do |c| 
    (c.valid_encoding?) ? c:c.encode!(Encoding.locale_charmap, :invalid => :replace)
  end.join 
end

def validate_encoding2(str)
  str.chars.collect do |c| 
    (c.valid_encoding?) ? c:'?'
  end.join 
end

a = "bad: \xc3\x28 okay"

puts validate_encoding(a)                  #=>bad: ?( okay
puts validate_encoding(a).valid_encoding?  #=>true

puts validate_encoding2(a)                  #=>bad: ?( okay
puts validate_encoding2(a).valid_encoding?  #=>true 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-10T20:13:47.737

要检查字符串是否没有无效序列，请尝试将其转换为*二进制*编码：

```
# Returns true if the string has only valid sequences
def valid_encoding?(string)
  string.encode('binary', :undef => :replace)
  true
rescue Encoding::InvalidByteSequenceError => e
  false
end

p valid_encoding?("\xc0".force_encoding('iso-8859-1'))    # true
p valid_encoding?("\u1111")                               # true
p valid_encoding?("\xc0".force_encoding('utf-8'))         # false 
```

此代码替换未定义的字符，因为我们不关心是否存在无法用二进制表示的有效序列。我们只关心是否存在无效序列。

对此代码稍作修改会返回实际错误，其中包含有关不正确编码的有价值信息：

```
# Returns the encoding error, or nil if there isn't one.

def encoding_error(string)
  string.encode('binary', :undef => :replace)
  nil
rescue Encoding::InvalidByteSequenceError => e
  e.to_s
end

# Returns truthy if the string has only valid sequences

def valid_encoding?(string)
  !encoding_error(string)
end

puts encoding_error("\xc0".force_encoding('iso-8859-1'))    # nil
puts encoding_error("\u1111")                               # nil
puts encoding_error("\xc0".force_encoding('utf-8'))         # "\xC0" on UTF-8 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T01:17:33.370

关于我唯一能想到的是将代码转换为不会损坏往返字符串的内容并返回：

```
string.force_encoding("UTF-8").encode("UTF-32LE").encode("UTF-8") 
```

不过，似乎相当浪费。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T02:37:28.403

好的，这是我自己想出来的一种非常蹩脚的纯红宝石方法。它可能执行废话。什么鬼，红宝石？现在不选择我自己的答案，希望其他人会出现并给我们更好的东西。

```
 # Pass in a string, will raise an Encoding::InvalidByteSequenceError
 # if it contains an invalid byte for it's encoding; otherwise
 # returns an equivalent string.
 #
 # OR, like String#encode, pass in option `:invalid => :replace`
 # to replace invalid bytes with a replacement string in the
 # returned string.  Pass in the
 # char you'd like with option `:replace`, or will, like String#encode
 # use the unicode replacement char if it thinks it's a unicode encoding,
 # else ascii '?'.
 #
 # in any case, method will raise, or return a new string
 # that is #valid_encoding?
 def validate_encoding(str, options = {})
   str.chars.collect do |c|
     if c.valid_encoding?
       c
     else
       unless options[:invalid] == :replace
         # it ought to be filled out with all the metadata
         # this exception usually has, but what a pain!
         raise  Encoding::InvalidByteSequenceError.new
       else
         options[:replace] || (
          # surely there's a better way to tell if
          # an encoding is a 'Unicode encoding form'
          # than this? What's wrong with you ruby 1.9?
          str.encoding.name.start_with?('UTF') ?
             "\uFFFD" :
             "?" )
       end
     end 
   end.join
 end 
```

更多咆哮[http://bibwild.wordpress.com/2012/04/17/checkingfixing-bad-bytes-in-ruby-1-9-char-encoding/](http://bibwild.wordpress.com/2012/04/17/checkingfixing-bad-bytes-in-ruby-1-9-char-encoding/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T01:35:10.500

如果您这样做是为了“现实生活”用例 - 例如解析用户输入的不同字符串，而不仅仅是为了能够“解码”一个完全随机的文件，该文件可以由尽可能多的编码组成如您所愿，那么我想您至少可以假设每个字符串的所有字符都具有相同的编码。

那么，在这种情况下，你会怎么想呢？

```
strings = [ "UTF-8 string with some utf8 chars \xC3\xB2 \xC3\x93", 
             "ISO-8859-1 string with some iso-8859-1 chars \xE0 \xE8", "..." ]

strings.each { |s| 
    s.force_encoding "utf-8"
    if s.valid_encoding?
        next
    else
        while s.valid_encoding? == false 
                    s.force_encoding "ISO-8859-1"
                    s.force_encoding "..."
                end
        s.encode!("utf-8")
    end
} 
```

无论如何，我都不是 Ruby “专业人士”，所以如果我的解决方案有误甚至有点幼稚，请原谅。

我只是尽量回馈我所能做的，这就是我的目标，而我正在（我仍然在）研究这个用于任意编码字符串的小解析器，我正在为一个研究项目做这个。

当我发布这篇文章时，我必须承认我什至还没有完全测试过它.. 我.. 刚刚得到了几个“积极”的结果，但我对可能找到我正在努力寻找的东西感到非常兴奋（并且我花了所有时间在 SO..) 上阅读此内容，我只是觉得有必要尽快分享它，希望它可以帮助任何人节省一些时间一直......如果它按预期工作:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-09T11:57:42.287

引发异常的一种简单方法似乎是：

untrusted_string.match /./

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-18T20:35:07.117

**这里有 2 种常见情况以及如何在Ruby 2.1+**中处理它们。我知道，这个问题是指 Ruby v1.9，但也许这有助于其他人通过谷歌找到这个问题。

# 情况一

**您有一个 UTF-8 字符串，其中可能包含一些无效字节**
删除无效字节：

```
str = "Partly valid\xE4 UTF-8 encoding: äöüß"

str.scrub('')
 # => "Partly valid UTF-8 encoding: äöüß" 
```

# 情况2

**您有一个字符串，可以是 UTF-8 或 ISO-8859-1 编码**
检查它是哪种编码并转换为 UTF-8（如有必要）：

```
str = "String in ISO-8859-1 encoding: \xE4\xF6\xFC\xDF"

unless str.valid_encoding?
  str.encode!( 'UTF-8', 'ISO-8859-1', invalid: :replace, undef: :replace, replace: '?' )
end #unless
 # => "String in ISO-8859-1 encoding: äöüß" 
```

**笔记**

*   上面的代码片段假定 Ruby`UTF-8`默认编码所有字符串。尽管这几乎总是如此，但您可以通过使用`# encoding: UTF-8`.

*   如果无效，则可以通过编程检测大多数多字节编码，例如`UTF-8`（在 Ruby 中，请参阅：）`#valid_encoding?`。但是，不能（很容易）以编程方式检测单字节编码的无效性，例如`ISO-8859-1`. 因此上面的代码片段不能反过来工作，即检测字符串是否是有效的`ISO-8859-1`编码。

*   尽管`UTF-8`作为默认编码在网络中变得越来越流行，但`ISO-8859-1`其他`Latin1`风格在西方国家仍然非常流行，尤其是在北美。请注意，有几个单字节编码非常相似，但与 ISO-8859-1 略有不同。示例：（`CP1252`又名`Windows-1252`），`ISO-8859-15`

# excel - IE8 excel 下载使图表数据系列对命名范围的引用无效

> ID：10200549
> 
> 赞同：1
> 
> 时间：2012-04-17T23:13:31.667
> 
> 标签：excel, internet-explorer, named-ranges

要重现此问题：

1.  创建 Excel 工作簿 (.xlsx)。我正在使用 Excel 2010，但我不确定这是否重要。

2.  创建一个命名范围。

3.  创建一个图表，该图表引用其数据系列值的命名范围。参考应该类似于“workbook.xlsx!NamedRangeName”。

4.  使用 IE8 从 Web 服务器下载此文件。在 Excel 中打开（不先保存）。

当您尝试打开文件时，Excel 会抱怨引用无效，因为在对命名范围的引用中，“workbook.xlsx”已被替换为“http://someUrl/filename.xlsx”。

如果您先保存文件而不是打开它，则不会出现此问题。它也不会出现在 IE9 或 Firefox 中。

我怀疑这与 IE 如何存储下载的文件有关。

我正在寻找一种解决方法，因为我认为只有 Microsoft 才能真正修复它。我只能控制服务器端，不能控制 PC、浏览器配置或用户行为。我可以在一定程度上更改 excel 文件，但我确实需要图表来引用命名范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:53:37.850

我找到的解决方法是添加到下载页面：

```
<!--[if lte IE 8 ]>
<meta name="DownloadOptions" content="noopen" />
<![endif]--> 
```

这将删除用户在不先保存文件的情况下打开文件的选项。

# java - BadPaddingException：在 Groovy（JDK 1.6）中使用带有填充的 AES 给定最终块未正确填充异常

> ID：10200551
> 
> 赞同：0
> 
> 时间：2012-04-17T23:14:01.927
> 
> 标签：java, encryption, groovy, aes

我在 Groovy(JDK 1.6) 中使用带有填充的 AES 得到“BadPaddingException：给定最终块未正确填充”异常。

我在尝试使用从属性文件中解密加密的字符串值（独立于加密过程运行）运行 decode() 方法时遇到此错误。加密是单独完成的，并存储在单独进程中的属性文件中。

当加密（编码方法）和解密（解码方法）像在主方法中一样一起运行时，这可以正常工作。

我已经为此浏览了 stackoverflow 问题，其中 1 个人说我在解密时遇到了错误的密钥问题。

我查看了存储在文件中的 iv 内容，它们是相同的，存储在密钥库中的 Secretkey 也是相同的。

那么，我是否在 Cipher.init(..) 步骤中失败了，其中密码代码在幕后使用了 SecureRandom。还是我没有正确存储密钥或 iv 填充？

我已将 iv 和 SecretKey 存储在单独的文件中，以便它们可以在单独的过程中重复用于解密，而与加密何时完成无关。

iv 值示例： 在加密期间：加密 iv 创建：[-8, 95, -47, -35, 77, 25, 113, -110, 95, 51, 71, -110, -92, -63, -95, -17]secretKey:javax.crypto.spec.SecretKeySpec@16c11

解密时：读取iv:[-8, 95, -47, -35, 77, 25, 113, -110, 95, 51, 71, -110, -92, -63, -95, -17] secretKey： javax.crypto.spec.SecretKeySpec@16c11

TIA 寻求帮助，维杰

```
class AESCodec extends ... {

public static final String IV_FILE="C:/keystore/iv-file"    
private static final String RANDOM_ALGORITHM = "SHA1PRNG";
private static final String CIPHER_ALGORITHM = "AES/CBC/PKCS5Padding";

static encode = { String target ->
    def cipher = getCipher(Cipher.ENCRYPT_MODE)
    return cipher.doFinal(target.bytes).encodeBase64()
}

static decode = { String target ->
    //println "target:"+target
    println "enter decode with target:"+target
    def cipher = getCipher(Cipher.DECRYPT_MODE)
    println "decode cipher:"+cipher
    return new String(cipher.doFinal(target.decodeBase64()))//<============== failing here when running decode independently
}

private String secretPassword

private String getSecretKey() {
    return "secret12"
}

private static getPassword() { new AESCodec().getSecretKey().getChars() }

private static byte[] iv

static SecretKey secretKey
/*
* Get key from Keystore where it is stored after creation
*/
private static SecretKey createKey(Integer mode) {
    println "createKey() mode values 1=encrypt,2=decrypt mode:"+mode
    if (secretKey == null) {
        if (mode== Cipher.ENCRYPT_MODE) {
            println "inside encrypt mode in createKey()"
            byte[] salt = "DYKSalt".getBytes()
            SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1")
            KeySpec spec = new PBEKeySpec(getPassword(), salt, 65536, 256)
            SecretKey tmp = factory.generateSecret(spec)
            SecretKey secret = new SecretKeySpec(tmp.getEncoded(), "AES")
            secretKey = secret
            println 'inside encrypt secretKey:'+secretKey
            //store it in keystore
            KeyStore ks = KeyStore.getInstance("JCEKS")
            ks.load(null, null);
            KeyStore.SecretKeyEntry skEntry = new KeyStore.SecretKeyEntry(secretKey)
            //key alias and passwd
            ks.setEntry("alias", skEntry,
              new KeyStore.PasswordProtection("fggd".toCharArray()))
            FileOutputStream fos = null
            try {
                fos = new FileOutputStream(AsymmetricCipher.KEYSTORE_DIR+"aes.keystore")
                //keystore passwd
                ks.store(fos, "fggd".toCharArray())
            } finally {

                fos?.close()

            }

        } else if (mode== Cipher.DECRYPT_MODE) {

            InputStream inputStream = getKeystoreAsStream(AsymmetricCipher.KEYSTORE_DIR+"aes.keystore")

            BufferedInputStream fis = null
            try {

                fis = new BufferedInputStream(inputStream)
                println "fis:"+fis
                //keystore passwd
                KeyStore ks = KeyStore.getInstance("JCEKS")
                //get key store
                ks.load(fis, "fggd".toCharArray())

                //get key from keystore
                Entry entry = ks.getEntry("alias", new KeyStore.PasswordProtection("fggd".toCharArray()))
                KeyStore.SecretKeyEntry secretKeystoreEntry = (KeyStore.SecretKeyEntry)entry
                secretKey = secretKeystoreEntry.getSecretKey()
                println " returned secretKey from decrypt mode"
            } finally {

                fis?.close()

            }

        }

    } else {

    }

    return secretKey
}

private SecretKey getKey() {

    return secretKey
}

private static getCipher(mode) {

  SecretKey secret = createKey(mode)
  Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);
  println "secret:"+secret.getEncoded()
  println "cipher:"+cipher

  if (mode == Cipher.DECRYPT_MODE) {
      //get iv
      iv = readIvFromFile(IV_FILE)
      println "decrypt iv created from file:"+iv
      IvParameterSpec ivspec = new IvParameterSpec(iv);
      println "ivspec:"+ivspec
      cipher.init(mode, secret,ivspec)
      //cipher.init(mode, secret)
  } else {

      //save that to IV_FILE
      byte[] iv = generateIv();
      println "encrypt iv created:"+iv
      IvParameterSpec ivspec = new IvParameterSpec(iv);
      println "ivspec:"+ivspec
      cipher.init(mode, secret,ivspec)
      //iv = cipher.getIV()
      AlgorithmParameters params = cipher.getParameters()
      iv = params.getParameterSpec(IvParameterSpec.class).getIV()
      saveToFile(IV_FILE,iv)
  }

  return cipher

}

private static byte[] generateIv() throws NoSuchAlgorithmException {
    SecureRandom random = SecureRandom.getInstance(RANDOM_ALGORITHM);
    byte[] iv = new byte[16];
    random.nextBytes(iv);
    return iv;
}

public static void saveToFile(String fileName,
    byte[] iv) throws IOException {
    println "saveToFile() fileName:"+fileName
    FileOutputStream oout = 
      new FileOutputStream(fileName);

    try {
      oout.write(iv);

    } catch (Exception e) {
      throw new IOException("Unexpected error", e);
    } finally {

        oout?.flush()
        oout?.close()
    }
}

private static byte[] readIvFromFile(String keyFileName)
throws IOException {
    println "readIvFromFile() keyFileName:"+keyFileName

    InputStream inputStream = AsymmetricCipher.getFile(keyFileName)

    try {

      iv = IOUtils.toByteArray(inputStream);

      println "read iv:"+iv
      return iv;
    } catch (Exception e) {
        throw new RuntimeException("Spurious serialisation error ", e);
    } finally {
        inputStream = null
        //oin?.close();
    }

}

static void main(String[] args) {

  String message="This is just an example";

  if(args) {

      def encryptedValue =  encode(args[0])
      println "encryptedValue:"+encryptedValue //byte[]

      String encryptedValue1=(String)(encryptedValue)
      println "encryptedValue1:"+encryptedValue1

      def decryptedValue = decode(encryptedValue1)
      println "decryptedValue:"+decryptedValue
      def decryptedValueStr = (String)decryptedValue

  }

//
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T01:00:05.020

看看：[http ://code.google.com/p/encryption-utils/source/browse/#svn%2Ftrunk%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgoogle%2Fcode%2Fencryptionutils](http://code.google.com/p/encryption-utils/source/browse/#svn%2Ftrunk%2Fsrc%2Fmain%2Fjava%2Fcom%2Fgoogle%2Fcode%2Fencryptionutils)

这是我为简单加密编写的一个小库。希望它能给你一些方向。

# objective-c - 如何从 iOS 上的相机胶卷中检索最近的照片？

> ID：10200553
> 
> 赞同：30
> 
> 时间：2012-04-17T23:14:07.220
> 
> 标签：objective-c, ios

我很难弄清楚如何在没有用户干预的情况下以编程方式检索相机胶卷中的最新照片。需要明确的是，我不想使用图像选择器，我希望应用程序在应用程序打开时自动抓取最新照片。

我知道这是可能的，因为我看过一个类似的应用程序，但我似乎找不到任何信息。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-17T23:54:49.620

一种方法是使用 AssetsLibrary 并使用 n - 1 作为枚举索引。

```
ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
[assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos
                             usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
                                 if (nil != group) {
                                     // be sure to filter the group so you only get photos
                                     [group setAssetsFilter:[ALAssetsFilter allPhotos]];

                                     if (group.numberOfAssets > 0) {
                                         [group enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:group.numberOfAssets - 1]
                                                                 options:0
                                                              usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
                                                                  if (nil != result) {
                                                                      ALAssetRepresentation *repr = [result defaultRepresentation];
                                                                      // this is the most recent saved photo
                                                                      UIImage *img = [UIImage imageWithCGImage:[repr fullResolutionImage]];
                                                                      // we only need the first (most recent) photo -- stop the enumeration
                                                                      *stop = YES;
                                                                  }
                                                              }];
                                     }
                                 }

                                 *stop = NO;
                             } failureBlock:^(NSError *error) {
                                 NSLog(@"error: %@", error);
                             }]; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-05-15T19:19:30.250

您可以反向枚举列表，而不是弄乱索引。如果你想要最近的图像，或者如果你想在 UICollectionView 中列出最近的图像，这种模式很有效。

返回最新图像的示例：

```
[group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *asset, NSUInteger index, BOOL *stop) {
    if (asset) {
        ALAssetRepresentation *repr = [asset defaultRepresentation];
        UIImage *img = [UIImage imageWithCGImage:[repr fullResolutionImage]];
        *stop = YES;
    }
}]; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-10T02:38:04.300

在 iOS 8 中，Apple 添加了[照片库](https://developer.apple.com/library/ios/documentation/Photos/Reference/Photos_Framework/index.html#//apple_ref/doc/uid/TP40014408)，这使得查询更容易。在 iOS 9 中，`ALAssetLibrary`已[弃用](https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/AssetsLibraryFramework/index.html#//apple_ref/doc/uid/TP40009730).

这是一些 Swift 代码，用于获取使用该框架拍摄的最新照片。

```
import UIKit
import Photos

struct LastPhotoRetriever {
    func queryLastPhoto(resizeTo size: CGSize?, queryCallback: (UIImage? -> Void)) {
        let fetchOptions = PHFetchOptions()
        fetchOptions.sortDescriptors = [NSSortDescriptor(key: "creationDate", ascending: false)]

//        fetchOptions.fetchLimit = 1 // This is available in iOS 9.

        if let fetchResult = PHAsset.fetchAssetsWithMediaType(PHAssetMediaType.Image, options: fetchOptions) {
            if let asset = fetchResult.firstObject as? PHAsset {
                let manager = PHImageManager.defaultManager()

                // If you already know how you want to resize, 
                // great, otherwise, use full-size.
                let targetSize = size == nil ? CGSize(width: asset.pixelWidth, height: asset.pixelHeight) : size!

                // I arbitrarily chose AspectFit here. AspectFill is 
                // also available.
                manager.requestImageForAsset(asset,
                    targetSize: targetSize,
                    contentMode: .AspectFit,
                    options: nil,
                    resultHandler: { image, info in

                    queryCallback(image)
                })
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-12-29T23:12:45.233

Swift 3.0：

1）在类声明之前在标题中导入照片框架。

```
import Photos 
```

2）添加以下方法，返回最后一张图片。

```
func queryLastPhoto(resizeTo size: CGSize?, queryCallback: @escaping ((UIImage?) -> Void)) {
    let fetchOptions = PHFetchOptions()
    fetchOptions.sortDescriptors = [NSSortDescriptor(key: "creationDate", ascending: false)]

    let requestOptions = PHImageRequestOptions()
    requestOptions.isSynchronous = true

    let fetchResult = PHAsset.fetchAssets(with: PHAssetMediaType.image, options: fetchOptions)
    if let asset = fetchResult.firstObject {
        let manager = PHImageManager.default()

        let targetSize = size == nil ? CGSize(width: asset.pixelWidth, height: asset.pixelHeight) : size!

        manager.requestImage(for: asset,
                             targetSize: targetSize,
                             contentMode: .aspectFit,
                             options: requestOptions,
                             resultHandler: { image, info in
                                queryCallback(image)
        })
    }

} 
```

3）然后在您的应用程序中的某处调用此方法（可能是按钮操作）：

```
@IBAction func pressedLastPictureAttachmentButton(_ sender: Any) {
    queryLastPhoto(resizeTo: nil){
        image in
        print(image)
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-18T15:47:12.473

为了补充 Art Gillespie 的答案，使用`fullResolutionImage`原始图像（取决于拍摄照片时设备的方向）可能会给您留下颠倒或 -90° 的图像。

要为此获得修改但优化的图像，请`fullScreenImage`改用....

```
 UIImage *img = [UIImage imageWithCGImage:[repr fullScreenImage]]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-25T23:46:13.737

回答问题（在**Swift**中）：

```
 func pickingTheLastImageFromThePhotoLibrary() {
        let assetsLibrary: ALAssetsLibrary = ALAssetsLibrary()
        assetsLibrary.enumerateGroupsWithTypes(ALAssetsGroupSavedPhotos,
            usingBlock: { (let group: ALAssetsGroup!, var stop: UnsafeMutablePointer<ObjCBool>) -> Void in
                if (group != nil) {
                    // Be sure to filter the group so you only get photos
                    group.setAssetsFilter(ALAssetsFilter.allPhotos())

                    group.enumerateAssetsWithOptions(NSEnumerationOptions.Reverse, 
                                 usingBlock: { (let asset: ALAsset!, 
                                                let index: Int, 
                                       var stop: UnsafeMutablePointer<ObjCBool>)
                                       -> Void in
                      if(asset != nil) {
                        /* 
                            Returns a CGImage representation of the asset.
                            Using the fullResolutionImage uses the original image which — depending on the
                            device's orientation when taking the photo — could leave you with an upside down,
                            or -90° image. To get the modified, but optimised image for this, use
                            fullScreenImage instead.
                        */
                        // let myCGImage: CGImage! = asset.defaultRepresentation().fullResolutionImage().takeUnretainedValue()

                        /*
                            Returns a CGImage of the representation that is appropriate for displaying full
                            screen.
                        */
                        // let myCGImage: CGImage! = asset.defaultRepresentation().fullScreenImage().takeUnretainedValue()

                        /* Returns a thumbnail representation of the asset. */
                        let myCGImage: CGImage! = asset.thumbnail().takeUnretainedValue()

                        // Here we set the image included in the UIImageView
                        self.myUIImageView.image = UIImage(CGImage: myCGImage)

                        stop.memory = ObjCBool(true)
                      }
                    })
                }

                stop.memory = ObjCBool(false)
            })
            { (let error: NSError!) -> Void in
                 println("A problem occurred: \(error.localizedDescription)")
            }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-14T22:00:16.550

使用照片库 (Objective-C)

```
 PHFetchOptions *fetchOptions = [[PHFetchOptions alloc] init];
fetchOptions.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"creationDate" ascending:NO]];

PHFetchResult *assetsFetchResult = [PHAsset fetchAssetsInAssetCollection:assetCollection options:fetchOptions];
if (assetsFetchResult.count>0) {
    PHAsset *asset = [assetsFetchResult objectAtIndex:0];

    CGFloat scale = [UIScreen mainScreen].scale;
    CGFloat dimension = 55.0f; // set your required size
    CGSize size = CGSizeMake(dimension*scale, dimension*scale);

    [[PHImageManager defaultManager] requestImageForAsset:asset
                                               targetSize:size
                                              contentMode:PHImageContentModeAspectFit
                                                  options:nil
                                            resultHandler:^(UIImage *result, NSDictionary *info) {
                                                // do your thing with the image
                                            }
     ];
} 
```

# c# - 适用于 0 的 C# 高性能舍入

> ID：10200561
> 
> 赞同：0
> 
> 时间：2012-04-17T23:15:08.843
> 
> 标签：c#, performance, integer, rounding, truncation

```
float x = 5;
Int16 x2 = (Int16)(x * 0.005); 
```

x2 是 x 的截断/舍入版本。表示 200 个单元的块，如上面的代码所示。

然而，上面的代码在 0 上产生了一个更大的间隔。一个 400 而不是 200 的间隔。

```
x     x2   intended
-500  -2   -3
-300  -1   -2
-100  0    -1
100   0    0
300   1    1
500   2    2

-210  -1   -2
-190  0    -1
-20   0    -1
-10   0    -1
10    0    0
20    0    0
190   0    0
210   1    1 
```

解决此问题的有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:27:46.430

```
float x = 5;
int16 x2 = (Int16)Math.Floor(x * 0.005); 
```

`Math.Floor`描述：

> 返回小于或等于指定双精度浮点数的最大整数。

[MSDN](http://msdn.microsoft.com/en-us/library/e0b5f0xb.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:28:12.933

很难确定，因为尚不清楚您要完成什么，但我怀疑您想要的是`Math.Floor`. 至少这适用于您的所有数据点。

# ravendb - 带提升的索引 - 如何进行 BeginsWith 查询

> ID：10200564
> 
> 赞同：1
> 
> 时间：2012-04-17T23:15:54.580
> 
> 标签：ravendb

我有一个文档实体 Student

```
public class Student
{
    public string Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime DateOfBirth { get; set; }
} 
```

我有一个索引 Student_ByName ，其中 FirstName 属性定义为

```
public class Student_ByName : AbstractIndexCreationTask<Domain.Student>
{
    public Student_ByName()
    {
        Map = students => from s in students
                          select new
                                     {
                                         FirstName = s.FirstName.Boost(6), 
                                         s.LastName,
                                         s.DateOfBirth,
                                         s.Gender
                                     };
    }
} 
```

我有以下学生文档实例

```
{ FirstName: 'David', LastName: 'Globe', DateOfBirth: '02/04/2000' }
{ FirstName: 'Tyson', LastName: 'David', DateOfBirth: '23/10/2000' }
{ FirstName: 'David', LastName: 'James', DateOfBirth: '19/05/1996' } 
```

那么下面的查询不会将 David 是名字的行提升到列表顶部。

```
var students = _session.Query<Domain.Student, Student_ByName>()
                       .Where(s => s.FirstName.StartsWith('David') || 
                                   s.LastName.StartsWith('David'))
                       .ToList(); 
```

如果我更改 Where 子句以检查是否相等，则以 David 作为名字的行将被提升到列表的顶部

```
.Where(s => s.FirstName == 'David' || s.LastName == 'David')
.ToList(); 
```

我的问题是，在进行 BeginsWith 搜索时，如何才能让 FirstName 的工作得到提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T03:34:19.000

这是预期的，请参阅此处的说明：

[http://grokbase.com/t/lucene/java-user/022dzkexc6/prefixquery-scoring](http://grokbase.com/t/lucene/java-user/022dzkexc6/prefixquery-scoring)

您可以使用查询时间（与索引时间）评分来执行此操作：

```
var students = session.Advanced.LuceneQuery<Student>()
    .WhereStartsWith("FirstName", "David").Boost(3)
    .WhereStartsWith("LastName", "David")
    .ToList(); 
```

# javascript - 3 个对象中的 Javascript 总和值

> ID：10200566
> 
> 赞同：1
> 
> 时间：2012-04-17T23:16:13.287
> 
> 标签：javascript, arrays, json, object

嗨，我正在尝试总结我在 3 个 json 对象中的值。

```
var things = {
    "noun": {
        "syn": ["belongings", "holding", "stuff", "property"]
    }
};
var stuff = {
    "noun": {
        "syn": ["belongings", "holding", "property"]
    }
};
var crap = {
    "noun": {
        "syn": ["things", "holding", "waste"]
    }
};

result = {};
word1 = things.noun.syn
for (key in word1) {
    nk = word1[key];
    if (result.nk == undefined) {
        result.nk = 1
    } else {
        result.nk = result.nk + 1;
    }
}
console.log(result);​ 
```

我得到的结果是`result.nk`而不是`result.belongings`例如。

我一直在搞一个 jsfiddle：http: [//jsfiddle.net/qunUz/2/](http://jsfiddle.net/qunUz/2/)

如何计算每个值出现的次数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:20:53.450

要访问给定字符串值的属性，您应该使用括号表示法

```
result[nk] //access the property defined by nk's value 
```

而不是您正在使用的点表示法

```
result.nk     //access the 'nk' property
result['nk']  //equivalent in bracket notation. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:24:40.360

通过设置 result.nk 你不是在使用变量`nk`，而是真的`result.nk`。

你应该像这样存储它：

```
result[nk] = 1; 
```

就像在更新的小提琴上展示的那样：http: [//jsfiddle.net/qunUz/3/](http://jsfiddle.net/qunUz/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:29:40.623

我认为这就是你想要做的。以下将总结三个不同数组中每个值的出现次数。

```
var a = things.noun.syn.concat(stuff.noun.syn).concat(crap.noun.syn);
var a = a.reduce(function (acc, curr) {
  if (typeof acc[curr] == 'undefined') {
    acc[curr] = 1;
  } else {
    acc[curr] += 1;
  }

  return acc;
}, {}); 
```

结果是

```
belongings: 2
holding: 3
property: 2
stuff: 1
things: 1
waste: 1 
```

如果你的目标浏览器没有 reduce 函数，你可以使用 underscore.js（或者直接复制他们的 reduce 函数）。

# python - 如何将 sqlite3 数据转换为 Json 格式和 CSV 格式

> ID：10200578
> 
> 赞同：2
> 
> 时间：2012-04-17T23:17:14.533
> 
> 标签：python, json, csv, sqlite

我的任务是将 sqlite3 数据转换为 Json 格式和 CSV 格式，我可以像这样读取数据（添加换行符）：

```
(2966, 
 u'http://buy.xineurope.com/thread-394248-1-1.html', 
 u'\u6d77\u666f\u623f\u627e\u4eba\u5408\u79df - \u623f\u5c4b\u4fe1\u606f - \u8df3\u86a4\u5e02\u573a - \u65b0\u6b27\u6d32-XinEurope-\u534e\u4eba\u4fe1\u606f\u5a31\u4e50\u4e92\u52a8\u95e8\u6237 - Powered by Discuz!', 
 1, 0, 12979085330693664L, 0, 0) 
```

是否有一些工具或模块（`import json`？）可以帮助我传输，最重要的是json和CSV的格式是什么，你能给我一个使用上面数据的例子吗？

就像，我创建了一个 dict {'a':dad,'b':dada}，但是是 json 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:44:05.937

要转换为`json`，无论是一行还是`cursor.fetchall()`：

```
import json

json_data = json.dumps(data) 
```

或者`json.dump(some_file_object, data)`如果要将其存储到文件中，请使用。

转换为`csv`：

```
import csv

writer = csv.writer(some_file_object)

for row in cursor:
    # the csv module can't handle unicode, so encode the strings
    row = [item.encode('utf-8') if isinstance(item, basestring) else item 
                                                                for item in data]
    writer.writerow(row) 
```

# jquery - 使用 jquery 提醒 JSON 元素

> ID：10200579
> 
> 赞同：0
> 
> 时间：2012-04-17T23:17:23.057
> 
> 标签：jquery, json

我正在尝试`JSON`使用 来提醒一个元素`JQuery`，这是我的代码：

data.js JSON 数据

```
[
    {
  "name": "bader",
  "major": "medicine",
  "id": "334453"
    }
] 
```

jQuery代码

```
$(document).ready(function() {

      $.getJSON("data.js", function(json) {
   alert("JSON Data: " + json.name);
 });

}); 
```

我试图检查元素我的控制台上有这个错误

```
XMLHttpRequest cannot load file:///data.js. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我对处理还是很陌生`JSON`，`JQUERY`我不知道我在哪里出错了，如果有人可以帮忙的话

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:21:13.613

`file:///data.js`表示您正在直接从本地文件系统加载页面。

[浏览器对 Ajax 请求有限制](http://en.wikipedia.org/wiki/Same_origin_policy)，它们不允许访问远程域（如果远程域不允许）或本地文件（尽管这可以启用 afaik（不知何故，取决于浏览器））。

The easiest way, IMHO, is to access your file through a server, not from the file system.
If you have Python, you can simply start a local server in the current directory with `python -m SimpleHTTPServer`. That's enough for testing and better than local file system access.

* * *

Regarding the output: `json` will be an array, so you have to access the `name` of the first object with `json[0].name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:21:02.083

试试这个：

```
$.ajax({
  url: "data.js",
  dataType: 'json',
  contentType:"application/json",
  success: function(data)
  {
      alert(JSON.stringify(data, null, "\t"))
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:21:13.170

像这样访问它

```
json[0].name 
```

因为 [] 括号是数组运算符。

# javascript - 长轮询ajax结构问题

> ID：10200583
> 
> 赞同：0
> 
> 时间：2012-04-17T23:18:01.273
> 
> 标签：javascript, jquery, ajax, long-polling, .post

所以我找到了这个长轮询的好例子，但我不知道如何通过它传输变量。这是我想出的，但它不起作用。我很确定问题出在 dataString 和类型上，因为这是我修改的代码的一部分。

```
$(".post").each(function() {
    poll("somestuff");
});

(function poll(pid) {
    var dataString = 'pid=' + pid;
    $.ajax({
        type: 'GET',
        url: 'http://localhost:8888/site/execs/something.php',
        data: dataString,
        success: function(data) {

            alert('stuff');

        },
        dataType: "json",
        complete: poll,
        timeout: 30000
    });
})();​ 
```

有人可以告诉我我在这里做错了什么吗？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:25:21.873

您`poll()`的函数永远不会在全局范围内注册。那是因为它被 " `(...)()`" 构造包围，这基本上意味着：调用 " `...`" 不带参数并忘记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T00:27:02.890

关于范围`poll`，霸主的回答大多是正确的——函数不是全局的。然而，还有更多。

您编写的方式`poll`使其成为所谓的*命名函数表达式*。

请记住，在 JavaScript 中有两种编写函数的方法。传统的*函数声明*：

```
function foo() {
    ...
} 
```

声明*必须*被命名，并被[提升](http://elegantcode.com/2011/03/24/basic-javascript-part-12-function-hoisting/)到顶部（基本上，在执行任何指令之前解析）。或者，*函数表达式*：

```
var foo = function() {
    ...
} 
```

或者

```
$.ajax('/', function() {
    // this is what's known as an anonymous callback
}); 
```

或者

```
(function() {
    // this is called a self-executing function...
})(); // <-- because we call it immediately 
```

表达式的执行与任何其他代码一样；他们没有被吊起。

现在有趣的部分是：函数表达式可以被赋予一个*可选*的名称，但该名称在函数本身的范围之外是不可访问的。换句话说，

```
(function foo() {
    // `foo` is this function
});

// `foo` will be undefined here 
```

很像这样写：

```
(function () {
    var foo = arguments.callee; // never do this
    // `foo` is this function
});

// `foo` will be undefined here 
```

由于命名函数表达式只能调用自身（或由在其范围内声明的函数调用），加上[一大堆浏览器错误](http://kangax.github.com/nfe/)，命名函数表达式除了在调试器或分析器中添加一些上下文之外**几乎没有用处**.

* * *

所以现在让我们来看看你的代码。

首先，您遍历每个具有`post`类的元素。jQuery 立即为每个匹配的元素调用您的匿名回调。您尝试调用`poll`，但它：

1.  还不存在，因为函数表达式没有被提升；`poll`代码还没有运行。
2.  即使它已经运行（例如，如果您将`$.each`调用移到底部），`post`仍然是未定义的，因为`poll`它是一个命名函数表达式，我们刚刚了解到这些标识符仅在函数本身内部可用。

接下来，您有一个自执行功能。（`()`在最后一行。）换句话说，`poll`立即调用，不带参数。您可能会看到一个长轮询发送`pid=undefined`。

*奖励：*回调`complete`（在一次超时或获取数据后开始新的长轮询）*确实*按预期工作，因为`poll`此时在范围内正确。

修复所有这些废话就像删除三个字符一样简单。希望到此为止，您能够弄清楚它们是哪三个字符。（提示：让你的表达成为一个声明。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:07:51.890

可能回答晚了……

除了范围问题，您的投票功能不是轮询。这只是一个ajax请求。

要进行轮询，您需要调用 setTimeout。所以你的代码看起来像：

```
(function poll(pid) {
    var dataString = 'pid=' + pid;
    setTimeout(function() {
        $.ajax({
            type: 'GET',
            url: 'http://localhost:8888/site/execs/something.php',
            data: dataString,
            success: function(data) {

                alert('stuff');

            },
            dataType: "json",
            complete: poll,
            timeout: 30000
        });
    })
})(); 
```

# php - PHP bcompiler 编码的代码有多安全？

> ID：10200584
> 
> 赞同：4
> 
> 时间：2012-04-17T23:18:11.007
> 
> 标签：php, obfuscation, bcompiler

[如果有人确切地知道 PHP 的bcompiler](http://www.php.net/manual/en/intro.bcompiler.php)对逆向工程的有效性/安全/受保护的程度，我很感兴趣。介绍页面提出了一个大胆的主张：

> 在代码保护方面，可以肯定地说，如果没有随附的源代码注释，就不可能重新创建构建它的确切源代码。使用 bcompiler 字节码重新创建和修改类实际上是没有用的。

也许关键词是“精确”——如果你删除它，他们的说法有多真实？

PS - 请不要讲关于编译/混淆与许可的讲座。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T23:26:05.977

它与将 C++ 编译为 ASM 一样安全。它可以通过仔细阅读和逻辑进行逆向工程或理解，并且可以编辑为，例如，很容易添加 10 个硬币而不是 5 个硬币。但是，即使是一小段字节码也需要很长时间才能理解，而且原始源代码只能手动重写。在大多数情况下，变量名称等将无法恢复。

换句话说，PHP 是比萨食谱，字节码是热腾腾的新鲜比萨。您可以找到原始食谱，但需要很长时间，非常困难，而且您不会知道厨师昵称为意大利辣香肠“Roni”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-24T13:35:35.207

Bcompiler现已反编译，见[链接](http://board.deioncube.in/showthread.php?tid=1870)（需要注册）！

但是请检查[存档版本](http://web.archive.org/web/20140902155619/http://board.deioncube.in/showthread.php?tid=1870)。

这些文件称为`ModeBIphp53Updated2.rar`：`ModeBIphp52ts.rar`和`MMcache+EA.rar`。

# ruby-on-rails - 导轨。同时创建两个对象，其中一个使用另一个的id

> ID：10200591
> 
> 赞同：1
> 
> 时间：2012-04-17T23:19:15.943
> 
> 标签：ruby-on-rails

我有用户、项目和任务。

```
Users have many tasks
Projects have tasks

Tasks belongs to users
Tasks belong to projects 
```

任务模型的字段之一是 Project_id。

我需要在用户创建新任务时创建一个新项目，并且创建的任务获取在其 Project_id 字段中创建的新项目的 id，因此它会自动与之关联。

我的问题是，在创建新任务时，尚未创建项目，所以 project_id 为空，有人可以请至少指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:42:01.223

`before_create`在回调中如何做呢？

```
class Task

  before_create :create_project

  def create_project
    new_project = Project.new(...)

    unless new_project.save
      self.errors.add(:base, "Couldn't create project.")
      return false
    end

    self.project_id = new_project.id
  end

end 
```

该`return false`位对于防止`Task`对象以无效保存`Project`并向其添加可显示在视图中的错误是必要的。

# python - PyQt：访问子菜单并将其添加到现有上下文菜单的基本示例？

> ID：10200594
> 
> 赞同：3
> 
> 时间：2012-04-17T23:19:36.913
> 
> 标签：python, plugins, pyqt, contextmenu, pyqt4

注意：我对 python 和 PyQt 的经验很少......

鉴于已经创建了一个上下文菜单，我正在寻找一个功能示例，说明我将如何访问该上下文菜单，因此它可以扩展为一个插件，该插件正在执行相当于 javascriptgreasemonkey 脚本的 python。然后，我还在寻找一个功能示例，说明如何将子菜单添加到该上下文菜单。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:33:06.583

customContextMenuRequested 信号将连接到方法/函数（在 Qt 中称为插槽），查找类似于此的代码行以了解需要调整的方法/函数：

```
self.centralwidget.customContextMenuRequested.connect(self.context_menu_method) 
```

因此对于该示例，您需要调整 self.context_menu_method，这就是实际创建菜单的方法

以及如何添加子菜单的代码示例：

```
menu = QtGui.QMenu()
submenu = QtGui.QMenu(menu)
submenu.setTitle("Submenu")
menu.addMenu(submenu) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T22:57:51.350

Avaris 的评论基本上最好地回答了这个问题。但是，我无法选择它，因为它是评论，而不是答案。所以我在这里总结了这个答案，所以这个Q可以回答：

“如果给你一个上下文菜单（具体来说是 QMenu），你可以访问它。” - 阿瓦里斯

“如果不修改该文件[包含上下文菜单创建代码的文件]，您将无法执行此操作。它假定它已经给出了一个 QActions 列表（参见第 301 行）并且它不会期待 QMenu。不过，如果你能访问插件中的 plugin_menu 参考，那是另一回事。” - 阿瓦里斯

因此，您可以访问以在菜单创建/定义代码所在的同一文件（以及该文件中的同一位置）中操作菜单，或者您可以通过该文件（在同一位置）访问以公开菜单通过 API。另一方面，如果您没有此类 API 访问权限，和/或修改该文件/函数，则无法执行此操作。

# asp.net-mvc - 使用视图模型时更新数据库

> ID：10200596
> 
> 赞同：2
> 
> 时间：2012-04-17T23:20:03.483
> 
> 标签：asp.net-mvc, mvvm, viewmodel

我有一个关于查看模型和向数据库添加信息的问题。

假设我有这两个类：

```
public class Ad {
public int Id { get; set; }
public int CategoryId { get; set; }
public string Headline { get; set; }
public string Text { get; set; }
public int Type { get; set; }

public Category Category { get; set; }
}

public class Category {
public int CategoryId { get; set; }
public int CategoryName { get; set; }

public IColletion<Ad> Ads { get; set; }
}

Context class:
public DbSet<Ad> Ads { get; set; }
public DbSet<Category> Categories { get; set; } 
```

这些模型确实过于简单，但我只想了解上下文。假设我想为应该向数据库添加条目的视图创建一个视图模型。如何从视图模型向“广告”数据库表添加信息。假设视图模型看起来像：

```
namespace Website.Models
{
public class CreateViewModel
{
    public Ad Ad { get; set; }
    public ICollection<Categories> Categories { get; set; }
    public Dictionary<int, string> AdTypes { get; set; }

    public CreateViewModel()
    {
        // to populate a dropdown on the "Create" page
        this.Adtypes= new Dictionary<int, string>
                              {
                                  {1, "For sale"},
                                  {2, "Want to buy"},
                                  {3, "Want to trade"},
                                  {4, "Have to offer"}
                              };
    }
}
} 
```

添加到数据库时，我唯一真正需要的是 Ad 类中的参数（尽管我需要视图模型来呈现下拉菜单）。但是如何从 CreateViewModel 中提取它以添加到数据库中。

这是我目前的代码：

```
 [HttpPost]
    public ActionResult Create(Ad ad)
    {

        if (ModelState.IsValid)
        {
            db.Ads.Add(ad);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(ad); 
```

由于这需要一个 Ad 类，我如何从视图模型中仅提取 Ad 参数并将其插入到数据库中。对不起，很长的帖子，可能是一些严肃的新手。我只是不知道如何更好地解释它。

如果有人可以解释视图模型，或者将我引导到某个站点，我将不胜感激。

/米

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T10:10:47.577

当您需要网站上的更多数据（例如下拉列表的值）时，您可以使用 Viewmodels。所以假设你想创造一辆汽车。

汽车对象 (Car.cs)

```
public class Car
{
  public int Id {get;set;}
  public string Color {get;set;}
  public string Name {get;set;}
} 
```

但是您不想自己在文本框中输入颜色。假设您想从下拉列表中选择颜色。如果是这样，您需要以某种方式将颜色列表（SelectList）添加到下拉列表中。

Viewmodel 在这种情况下很有帮助 (CreateCarViewModel.cs)

```
public CreateCarViewModel
{
  public Car Car {get;set;}
  public SelectList Colors{ get; set; } //List of colors for dropdown
} 
```

控制器

```
ActionResult CreateCar()
{
  CreateCarViewModel CCVM = new CreateCarViewModel();  
  List<string> colors = new List<string>{"Black","White"};
  CCVM.Colors = new SelectList(colors);

  //Your view is expecting CreateCarViewModel object so you have to pass it
  return View(CCVM);
} 
```

创建汽车 (CreateCar.cshtml)

```
@model YourSolutionName.ModelsFolder.CreateCarViewModel

//form etc.
{
  @Html.DropDownListFor(x => x.Car.Color, Model.Colors)
  @Html.TextBoxFor(x => x.Car.Name)
} 
```

再次控制器

```
[HttpPost]
//Again: but now controller expects CreateCarViewModel
ActionResult CreateCar(CreateCarViewModel CCVM)
{
  if (ModelState.IsValid)
    //update database with CCVM.Car object and redirect to some action or whatever you want to do
  else
  {
    //populate your colors list again

    List<string> colors = new List<string>{"Black","White"};
    CCVM.Colors = new SelectList(colors);
    return View (CCVM);
  }
} 
```

# javascript - 将数组内容写入文件/将文件内容读取到数组中。Javascript/HTML5 网络应用程序

> ID：10200598
> 
> 赞同：0
> 
> 时间：2012-04-17T23:20:26.720
> 
> 标签：javascript, arrays, html, file, io

我是 Web 应用程序的新手，我有一个 Web 应用程序，用户基本上可以根据表单输入创建一组对象。我认为一个非常有趣的功能是，如果 Web 应用程序能够在用户单击“保存”按钮时下载包含数组内容的格式化特殊文件。

除了这个“保存”功能之外，还有一个“加载”功能，它将加载一个特殊格式的文件，该文件将首先擦除现有数组的内容，并用从加载的文件中描述和解析的内容填充数组。

我查找了有关此过程的一些信息，包括有关 HTML5 本地存储功能的信息，但由于安全原因，从浏览器应用程序将文件保存到客户端计算机的过程似乎需要跳过一些循环才能实现。

是否有一些解决方法来实现此功能？或者考虑到应用程序的规模，它们似乎有点过于复杂和复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:48:45.707

我认为首先保持简单是最有效的解决方案是将输入字段的值保存在本地存储键/值对而不是文件中。主流浏览器都支持 HTML5 本地存储。如果本地存储不可行，您仍然可以使用 cookie 作为替代选项。

您可以找到许多教程来向/从本地存储中持久化/读取数据，[这](http://www.sitepoint.com/a-better-cookie-html5-and-web-storage/)只是其中之一。

# php - PHP，MySQL：如何获取用户的名字和姓氏

> ID：10200600
> 
> 赞同：1
> 
> 时间：2012-04-17T23:20:40.317
> 
> 标签：php, mysql, fetch

在过去的几个小时里，我被这个查询卡住了，我非常需要有人帮我解决这个问题。我试图完成我的私人消息系统，但我迷失在数据库表中。我为系统创建了三个表，它们如下：

```
CONVERSATION(**conversation_id**, subject)

CONVERSATION_MEMBER(**conversation_id**, **user_id**, conversation_last_view, conversation_deleted)

CONVERSATION_MESSAGE(**message_id**, conversation_id, user_id, message_date, message_text) 
```

好的，所以在我获取特定用户的所有对话的功能中，我正在获取主题、日期，最后我想向用户展示他/她正在与谁交谈。我写了以下查询：

```
SELECT
   c.conversation_id,
   c.conversation_subject, 
   MAX(cmes.message_date) AS conversation_last_reply, 
FROM conversation c, conversation_member cmem, conversation_message cmes
WHERE c.conversation_id = cmes.conversation_id
AND c.conversation_id = cmem.conversation_id                          
AND cmem.user_id = {$_SESSION['user_id']}
AND cmem.conversation_deleted = 0
GROUP BY c.conversation_id
ORDER BY conversation_last_reply DESC 
```

而且，最后我试图获取用户的名字和姓氏（对话中的另一个用户），但我迷失了如何做到这一点。我试图创建另一个函数来获取对话 id，同时遍历第一个查询的结果，并返回用户的名字和姓氏，但没有成功。

顺便说一句，对于用户，我还有另一张桌子......我想我不必告诉你。好的谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:37:49.613

```
$sql = "SELECT (user.forename, user.surname, other_fields...)
          FROM conversation
    INNER JOIN conversation_member
            ON conversation.conversation_id = conversation_member.conversation_id
    INNER JOIN conversation_message
            ON conversation.conversation_id = conversation_message.conversation_id
    INNER JOIN users_table /* replace this with the name of your user table */ AS user
            ON user.user_id = conversation_member.user_id
         WHERE user.user_id = :userid
           AND conversation_member.conversation_deleted = 0
      GROUP BY conversation.conversation_id;"

$query = $db->prepare($sql);
$query->bindParam(':userid', $userid, PDO::PARAM_INT);
$query->execute();
$results = $query->fetchAll();
$user = $results[0]["user"]; //stores array of user fields (forename, surname, etc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:24:02.280

如果您能够自己构建查询的其余部分，我不明白为什么您无法获取用户的名字和姓氏？

尝试以下方式：

```
SELECT cmem.user_id, u.first_name,  u.last_name, c.conversation_id, c.conversation_subject, MAX(cmes.message_date) AS conversation_last_reply  
FROM conversation c  
INNER JOIN conversation_member cmem on c.conversation_id=cmem.conversation_id  
INNER JOIN conversation_message cmes on c.conversation_id=cmes.conversation_id  
INNER JOIN users u on u.user_id = cmem.user_id
WHERE cmem.user_id = {$_SESSION['user_id']} AND cmem.conversation_deleted = 0  
GROUP BY cmem.user_id, u.first_name, u.last_name, c.conversation_id, c.conversation_subject 
```

现在，我认为您还应该重新考虑您的数据库结构，以便不需要所有这些连接。我看到几个问题。一，您的数据库似乎过度规范化。为什么你有一个单独的“对话”表，它只有两个字段，对话 ID 和主题？在我见过的任何消息系统中，主题始终可见，因此您**始终**必须加入对话表才能获取主题字段。无论如何，conversation_id 都在其他所有表中。只需将主题字段添加到消息表并消除对话表（如果它只包含它），规范化并不总是一件好事。

其次，为什么要为已删除的消息设置标志而不是删除它们？我也从未见过可以让我恢复已删除的消息的消息系统。至少，如果您出于某种原因想要保留它们，您应该将它们移动到存档表中，以便您运行的主表选择关闭时不必处理通过无意义的“已删除”解析的性能损失"条目。

最后，conversation_member 表到底是什么？根据我的解释，它应该代表对话的成员，因为它有一个 user_id。为什么对话的单个成员会出现对话删除标志？如果有的话，它应该在对话表中。有了这个改进，剩下的唯一字段是 conversation_last_view，真的没人关心。更重要的是conversation_last_post，它可以很容易地从线程中发布的最后一条消息的时间戳推导出来。

最后，如果您只想查看附加到查询中的名字和姓氏，只需加入 users 表并显示这两个条目即可。如果我提供的 SQL 查询不能直接运行，我应该会让你关闭，我懒得复制你的数据库并自己尝试。但是，我认为您也应该真正考虑数据库的整体设计，这样您就不会遇到不必要的性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:29:50.130

```
SELECT
   c.conversation_id,
   c.conversation_subject,
   user.firstname,
   user.lastname,
   MAX(cmes.message_date) AS conversation_last_reply, 
FROM conversation c, conversation_member cmem, conversation_message cmes, user_tablename user
WHERE c.conversation_id = cmes.conversation_id
AND c.conversation_id = cmem.conversation_id                          
AND cmem.user_id = {$_SESSION['user_id']}
AND cmem.conversation_deleted = 0
AND user.user_id_column = whatever.you_used_as_foriegn_key
GROUP BY c.conversation_id
ORDER BY conversation_last_reply DESC 
```

假设列名是这样的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T23:58:22.933

您需要再次加入“conversation_member”表，这一次，选择其他用户的 id，其中应用了相同的 conversation_id 和 message_id：

```
SELECT
    c.conversation_id,
    c.conversation_subject, 
    MAX(cmes.message_date) AS conversation_last_reply,
    cmem2.user_id AS other_user_id
    CONCAT(usr_tbl.firstname, ' ', usr_tbl.lastname) AS other_user_name
FROM conversation c
    JOIN conversation_member cmem
    JOIN conversation_message cmes
    JOIN conversation_member cmem2
    JOIN users_table usr_tbl

ON  c.conversation_id = cmes.conversation_id 
AND c.conversation_id = cmem.conversation_id                          
AND cmem.user_id = {$_SESSION['user_id']}
AND cmem.conversation_deleted = 0

AND c.conversation_id = cmem2.conversation_id                          
AND cmem2.user_id = {$_SESSION['other_user_id']}
AND cmem2.conversation_deleted = 0

GROUP BY c.conversation_id
ORDER BY conversation_last_reply DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T01:07:54.717

要回答以下问题：查找对话中的所有用户，减去当前用户：

```
 SELECT (users.forename, users.surname)
      FROM conversation_members AS members
INNER JOIN users_table AS users
        ON members.user_id = users.user_id
     WHERE members.conversation_id = :conversationid
       AND NOT users.user_id = :userid 
```

`:userid`当前用户在哪里，`:conversationid`是有问题的对话。

# javascript - 防止引导下拉菜单跨行拆分

> ID：10200602
> 
> 赞同：1
> 
> 时间：2012-04-17T23:20:56.307
> 
> 标签：javascript, html, css, twitter-bootstrap

我有一个有两列的表。第一列有很多文本，第二列有一个使用 Twitter 引导程序制作的下拉菜单。**我希望第二列占用在单行上**显示下拉菜单所需的尽可能少的空间。我希望第一列占据剩余的可用宽度。所以我设置`width: 100%`在第一列和`white-space: nowrap`第二列。

代码：http: [//jsfiddle.net/cberzan/hgCyD/3/](http://jsfiddle.net/cberzan/hgCyD/3/)

这可以满足我在 Chrome (Linux / 18.0.1025.151) 中的要求，但在 Firefox (Linux / 11.0) 和 Opera (Linux / 11.64) 中，下拉列表**分为两行**：

![例子](../Images/6c90ed16d205b68fbbb25846cdc40001.png)

如何防止下拉列表被拆分？

# sql - 如何在 Visual FoxPro 中暂时禁用默认排序？

> ID：10200610
> 
> 赞同：2
> 
> 时间：2012-04-17T23:21:33.470
> 
> 标签：sql, oledb, visual-foxpro

我正在搜索我想保持自然顺序以保持排名的地方。这是我的代码查询：

```
SELECT buyer_id, first, last, ALLTRIM(address) AS address1, city, state FROM BUYERMAST.DBF WHERE first = '{0}' AND last = '{1}' UNION 
SELECT buyer_id, first, last, ALLTRIM(address) AS address1, city, state FROM BUYERMAST.DBF WHERE phone = '{6}' UNION 
SELECT buyer_id, first, last, ALLTRIM(address) AS address1, city, state FROM BUYERMAST.DBF WHERE first LIKE '{0}' AND last LIKE '{1}' UNION 
SELECT buyer_id, first, last, ALLTRIM(address) AS address1, city, state FROM BUYERMAST.DBF WHERE address LIKE '{2}' AND city LIKE '{3}' UNION 
SELECT buyer_id, first, last, ALLTRIM(address) AS address1, city, state FROM BUYERMAST.DBF WHERE first = '{0}' OR last = '{1}' OR address = '{2}' OR city = '{3}' OR state = '{4}' OR zip = '{5}' OR phone = '{6}' or email = '{7}'" 
```

联合中的第一个选择返回一个完全匹配，而最后一个选择返回一个非常普遍的匹配。问题是结果总是按buyer_id 排序返回。我无法更改现有的表/索引，并且我看到有几个索引，buyer_id 是第一个。如果可能，我想“禁用”索引顺序，以便首先返回第一个选择的结果，随后的选择实际上附加到前一个。这可能吗？

PS默认情况下，联合是不同的，如果我为每个选择添加一个“排名”列并按此排序，它将留下重复的结果，因为每个选择查询之间的排名列是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:56:34.163

在一个查询中具有所有限定符的 SINGLE 查询怎么样，但附加列作为它们限定的标志...由于您的最后一个联合具有全面的“或”值，只需将其用作 WHERE，但具体标准为标记它是如何合格的，然后您可以每人保留一个条目，但将其标记为“howeverMatched”以进行分析。

```
SELECT 
      buyer_id, 
      first, 
      last, 
      address AS address1, 
      city, 
      state,
      ( first = '{0}' AND last = '{1}' ) as ExactNameMatch,
      ( phone = '{6}' ) as PhoneMatch,
      ( LIKE( first, '{0}' ) AND LIKE( last, '{1}' )) as LikeNameMatch,
      ( LIKE( address, '{2}' ) AND LIKE( city, '{3}' )) as LikeAddressMatch
   FROM 
      BuyerMast
   WHERE 
         first = '{0}' 
      OR last = '{1}' 
      OR address = '{2}' 
      OR city = '{3}' 
      OR state = '{4}' 
      OR zip = '{5}' 
      OR phone = '{6}' 
      OR email = '{7}'
      OR ( first LIKE '{0}' AND last LIKE '{1}' )
      OR ( address LIKE '{2}' AND city LIKE '{3}' ) 
```

它不喜欢名称匹配限定符中的“LIKE”......所以 LikeNameMatch 和 LikeAddressMatch 是罪魁祸首......但是，VFP 确实有一个功能，所以我改变了它们

```
from   first LIKE '{0}'
to     LIKE( first, '{0}' ) 
```

与其他类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:18:27.757

我不相信有可能直接做到这一点。目标是在没有 ORDER BY 子句的情况下对结果进行某种隐含顺序，问题是关系没有特定顺序。因此，除非查询依赖于数据库引擎的实现特定行为，否则您可能无法直接到达那里。

a`UNION ALL`可能会保留原始订单，尽管我不知道这是有保证的。如果是这样（或者即使不是，您也可以使用 OP 中提到的排名想法来执行 ORDER BY），然后您可以在查询后“手动”删除重复项。

另一种可能导致查询极其丑陋并且可能难以优化的可能性是再次使用 UNION ALL（或排名想法）来获取每个条件的结果，但将`NOT`先前条件的每个后续条件添加到每个后续条件中。换句话说，让每个单独的 SELECT 只选择它专门添加到最终结果的行：

```
SELECT ... WHERE condition1 UNION ALL
SELECT ... WHERE condition2 and NOT (condition1) UNION ALL
SELECT ... WHERE condition3 and NOT(condition1) and NOT (condition2)
etc. and on into a very ugly query 
```

请注意，在上面的示例中，如果 UNION ALL 确实不保留顺序，您可以在每个选择中添加一个排名值，然后按该值对最终结果进行排序（查询本身将具有内置的唯一性，所有`not(condition)`条款。

# svg - 用控制点关闭 SVG 路径（Z）？

> ID：10200611
> 
> 赞同：4
> 
> 时间：2012-04-17T23:21:44.373
> 
> 标签：svg, bezier

我像这样绘制 SVG 路径：

开始：

```
M x, y 
```

添加曲线

```
Q x1, y1, x, y 
```

等等等等....当我想关闭路径时，我只需添加`Z`

但是最后一条线段现在没有任何控制点。

如何关闭路径并在最后一段上有控制点？

类似于：`Z Q x1, y1`Z 关闭路径（当前点到第一个点）的位置，但它使用 x1 和 y1 作为控制点，而不仅仅是直线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:17:45.967

我理解你的愿望。每次我在 Illustrator 中徒手绘制斑点时，我总是将最终点设置在原始点上，然后拖动以创建两边控制点的切线。

SVG 没有这样的特性。没有执行此操作的[路径命令](http://www.w3.org/TR/SVG/paths.html#PathDataCubicBezierCommands)。最接近的是速记路径命令`S`和`T`，但是它们从上*一个*命令的最后一个控制点派生*第一个*控制点，而您想要的是从*下一个*命令的第一个控制点派生第二个控制点的东西（包装*-*围绕风格）。

 ***你可以用 JavaScript 来做到这一点，例如像这样的标记

```
<path d="… Z" class="smooth-close" /> 
```

…还有一个小脚本，它可以找到所有`smooth-close`路径，根据第一个命令确定适当的控制点并生成一个`S`or`T`命令并将其附加到路径数据中。但是由于您没有使用[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")标记您的问题，我认为这样的解决方案不会让您感兴趣。***

# backbone.js - 从集合中获取下一个和上一个模型

> ID：10200617
> 
> 赞同：15
> 
> 时间：2012-04-17T23:22:32.113
> 
> 标签：backbone.js

我已经看到了几种从集合中获取下一个或上一个模型的不同方法，但想知道是否有人可以就我决定实施它的方式提供一些建议。我的收藏是有序的，但我排序的 id 不能保证是连续的。它只保证是唯一的。假设较小的 id 是集合的“旧”条目，而较大的 id 是“较新”的。

```
MyCollection = Backbone.Collection.extend({
  model: MyModel,
  initialize:function (){
    this.getElement = this._getElement(0);
  },
  comparator: function(model) {
    return model.get("id");
  },
  _getElement: function (index){
    var self = this;
    return function (what){
     if (what === "next"){
       if (index+1 >= self.length) return null;
       return self.at(++index);
     }
     if (what === "prev"){
       if (index-1 < 0 ) return null;
       return self.at(--index);
     }
     // what doesn't equal anything useful
     return null;
    };
  }
}); 
```

使用 getElement 时，我会执行 getElement("next") 和 getElement("prev") 之类的操作来询问我收藏中的下一个或上一个模型。getElement 返回的是实际模型，而不是索引。我知道collection.indexOf，但我想要一种方法来循环遍历集合，而无需先从模型开始。这个实现是否比它需要的更难？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T02:41:06.823

我会做这样的事情。请记住，当前没有任何错误处理，因此如果您当前位于集合中的第一个模型并尝试获取前一个模型，您可能会收到错误。

```
MyCollection = Backbone.Collection.extend({
  model: MyModel,
  initialize:function (){
    this.bindAll(this);
    this.setElement(this.at(0));
  },
  comparator: function(model) {
    return model.get("id");
  },
  getElement: function() {
    return this.currentElement;
  },
  setElement: function(model) {
    this.currentElement = model;
  },
  next: function (){
    this.setElement(this.at(this.indexOf(this.getElement()) + 1));
    return this;
  },
  prev: function() {
    this.setElement(this.at(this.indexOf(this.getElement()) - 1));
    return this;
  }
}); 
```

前进到下一个模型`collection.next()`。进入下一个模型并将其返回`var m = collection.next().getElement();`

为了更好地解释下一个/上一个是如何工作的。

```
// The current model
this.getElement();
// Index of the current model in the collection
this.indexOf(this.getElement())
// Get the model either one before or one after where the current model is in the collection
this.at(this.indexOf(this.getElement()) + 1)
// Set the new model as the current model
this.setElement(this.at(this.indexOf(this.getElement()) + 1)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-30T13:43:01.450

我的做法略有不同，因为我将方法添加到模型而不是集合中。这样，我可以抓取任何模型，并获得序列中的下一个模型。

```
next: function () {
    if (this.collection) {
        return this.collection.at(this.collection.indexOf(this) + 1);
    }
},
prev: function () {
    if (this.collection) {
        return this.collection.at(this.collection.indexOf(this) - 1);
    }
}, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-13T17:40:32.507

用一个更通用的解决方案来解决这个旧线程：

**添加到 Collection.prototype 的东西**

```
current: null,

initialize: function(){
    this.setCurrent(0);
    // whatever else you want to do here...
},

setCurrent: function(index){
    // ensure the requested index exists
    if ( index > -1 && index < this.size() )
        this.current = this.at(index);
    else 
        // handle error...
},

// unnecessary, but if you want sugar...
prev: function() {
    this.setCurrent(this.at(this.current) -1);
},
next: function() {
    this.setCurrent(this.at(this.current) +1);
} 
```

然后你可以使用糖方法来获得上一个/下一个模型，就像这样......

```
collection.prev();
collection.next(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-12T06:38:04.020

我的主干 SelectableCollection 类：

```
Backbone.Collection.extend({
    selectNext: function () {
        if(this.cursor < this.length - 1) {
            this.cursor++;
            this.selected = this.at(this.cursor);
            this.trigger('selected', this.selected);
        }
    },

    selectPrevious: function () {
        if(this.cursor > 0) {
            this.cursor--;
            this.selected = this.at(this.cursor);
            this.trigger('selected', this.selected);
        }
    },
    selectById: function (id) {
        this.selected = this.get(id);
        this.cursor = this.indexOf(this.selected);
        this.trigger('selected', this.selected);
    },
    unselect: function () {
        this.cursor = null;
        this.selected = null;
        this.trigger('selected', null);
    }
}); 
```

# razor - 没有布局参考的 ASP.NET 默认 MVC4 应用程序内容页面？

> ID：10200620
> 
> 赞同：5
> 
> 时间：2012-04-17T23:23:27.740
> 
> 标签：razor, partial-views, asp.net-mvc-4

我创建了一个 mvc4 网络应用程序。带有剃刀视图引擎。您知道有布局页面和内容页面（主页、联系人、关于等）。但是内容页面中没有对布局的引用。

内容页面不应包含以下内容：

```
Layout = "~/Views/Shared/_Layout.cshtml"; 
```

在内容页面中缺少此代码。它们可以工作。在没有布局参考的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:44:19.530

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:43:56.570

如果您想要部分视图，那就是您的母版页

@Html.Partial("partialviewname". "controller")

并且部分视图不使用母版页，因为它被插入到您想要的位置

# php - MYSQL 语法 - 插入语句

> ID：10200627
> 
> 赞同：1
> 
> 时间：2012-04-17T23:24:26.560
> 
> 标签：php, mysql, syntax, insert

挣扎于一个简单的插入命令，我得到了错误

```
You have an error in your SQL syntax; check the manual that corresponds to 
your MySQL server version for the right syntax to use near 'All In: 
The Poker Movie, tells the story of poker focusing on why one of our nat' 
at line 2" 
```

基本上将电影信息传递到表格中，这里是代码 -

```
$query1 = "INSERT INTO Films_Info (Films_ID,FilmName, FilmRelease, Synopsis,Poster,CritScore,AudScore,Director,Studio,IMDB,date_added_db) 
VALUES ('',$Film_Name', '$Film_Release','$filmsynopsis','$film_image','$film_critic','$film_audience','$film_director','$film_studio','$film_imdbID','')";
$runquery1 = mysql_query($query1)or die(mysql_error()); 
```

多谢你们

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T23:26:22.013

看起来您在 $Film_Name 之前缺少一个 '。你能添加缺少的撇号吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:31:01.497

如果您在服务器上启用了 phpmyadmin，则可以将代码粘贴到 SQL-Field 中以在 SQL 查询上突出显示语法。

# c - C 编程中的堆内存

> ID：10200628
> 
> 赞同：7
> 
> 时间：2012-04-17T23:24:32.670
> 
> 标签：c, memory, heap-memory

堆内存到底是什么？

每当调用 malloc 时，都会从称为堆的东西中分配内存。堆到底在哪里。我知道主存中的程序分为存在程序语句的指令段，存储全局数据的数据段和存储局部变量和相应函数参数的堆栈段。现在，堆呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T23:37:32.413

堆是进程地址空间的一部分。堆可以增长或缩小；你通过调用`brk(2)`or来操作它`sbrk(2)`。这实际上就是`malloc(3)`这样做的。

从堆中分配比在堆栈上分配内存更方便，因为它在调用例程返回后仍然存在；因此，您可以调用例程，例如`funcA()`，分配一堆内存并用一些东西填充它；`funcA()`该内存在返回后仍然有效。如果`funcA()`分配了一个本地数组（在堆栈上），那么当`funcA()`返回时，堆栈上的数组就消失了。

使用堆的一个缺点是，如果您忘记释放堆分配的内存，您可能会耗尽它。未能释放堆分配的内存（例如，未能`free()`从 获取内存`malloc()`）有时称为**内存泄漏**。

与仅在堆栈上分配本地数组/结构/任何内容相比，堆的另一个不错的功能是，您会获得一个返回值，说明您的分配是否成功；如果你尝试在堆栈上分配一个本地数组并且你用完了，你不会得到错误代码；通常，您的线程将被简单地中止。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-20T20:39:14.820

堆与栈截然相反。堆是一个可以动态使用的大型内存池——它也被称为“自由存储”。这是不是自动管理的内存——您必须显式分配（使用诸如 malloc 之类的函数）和释放（例如释放）内存。完成后未能释放内存将导致所谓的内存泄漏 - 仍然“正在使用”的内存，并且对其他进程不可用。与堆栈不同，除了机器内存的物理大小之外，堆的大小（或它创建的变量）通常没有限制。在堆上创建的变量可以在程序的任何地方访问。

哦，堆内存需要你使用指针。

堆的总结：

*   堆由程序员管理，修改它的能力有点无限
*   在 C 中，使用 malloc() 和 free() 等函数分配和释放变量
*   堆很大，通常受可用物理内存的限制
*   堆需要指针来访问它

归功于 Craftofcoding

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T23:29:17.953

基本上，内存被程序的需要消耗掉之后，剩下的就是堆了。在 C 语言中，这将是计算机可用的内存，而对于虚拟机，它会比这更少。

但是，这是可以在运行时使用的内存，因为您的程序需要动态内存。

您可能想查看此以获取更多信息：

[http://computer.howstuffworks.com/c28.htm](http://computer.howstuffworks.com/c28.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-20T21:21:08.093

通读一遍，这实际上超出了 C 的范围。C 没有指定后面有*堆*`malloc`；它可以很容易地称为*链表*；按照惯例，您只是将其称为*堆*。

标准保证`malloc`将返回指向具有*动态存储持续时间*的对象的指针，而您的*堆*只是一种有助于提供这种存储持续时间的数据结构。这是常见的选择。尽管如此，编写*堆*的开发人员已经认识到它可能不是*堆*，因此例如在 POSIX 手册中您[不会](http://pubs.opengroup.org/onlinepubs/9699919799/functions/malloc.html)[看到对术语](http://pubs.opengroup.org/onlinepubs/9699919799/functions/malloc.html)*堆的引用。*[`malloc`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/malloc.html)

超出标准 C 领域的其他内容包括*机器代码*二进制文件的详细信息，编译后不再是 C 源代码。布局细节虽然很典型，但都是特定于实现的，而不是特定于 C 的。

*heap*或任何用于说明分配的簿记数据结构是在运行时生成的*；*正如`malloc`所谓的那样，新条目（可能）被添加到其中，并且正如`free`所谓的，新条目（再次，可能）从中删除。

因此，对于使用 分配的对象，通常不需要在机器代码二进制文件中有一个部分`malloc`，但是在某些情况下，应用程序是独立交付的，烘焙到微处理器中，在其中一些情况下，您可能会发现闪存或其他非易失性内存可能会保留用于该用途。

# alfresco - Alfresco REST API：如何列出站点中的文件夹？

> ID：10200630
> 
> 赞同：1
> 
> 时间：2012-04-17T23:24:43.480
> 
> 标签：alfresco

鉴于此网址

```
http://localhost:8080/alfresco/service/api/sites/test-3 
```

我回来了：

```
{
   "url": "\/alfresco\/service\/api\/sites\/test-3",
   "sitePreset": "site-dashboard",
   "shortName": "test-3",
   "title": "Test 3",
   "description": "",
   "node": "\/alfresco\/service\/api\/node\/workspace\/SpacesStore\/0352afea-797f-4b9e-be27-3bf37e54a2f1",
   "tagScope": "\/alfresco\/service\/api\/tagscopes\/workspace\/SpacesStore\/0352afea-797f-4b9e-be27-3bf37e54a2f1",
   "siteManagers":
   [
         "admin"
   ],
   "isPublic": true,
   "visibility": "PUBLIC"
} 
```

如何使用该信息来获取站点中的文件夹列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T07:16:56.463

您需要使用不同的 API。看看这个 shell 会话：

```
$ curl -u admin:admin -i -H "Accept: application/json" -H "Content-Type: application/json" -X POST -d "{'shortName':{'values':['test'], 'match':'foo'}}" http://localhost:8080/alfresco/service/api/sites/query

{
    "url" : "\/alfresco\/service\/api\/sites\/test",
    "sitePreset" : "wcmqs-site-dashboard",
    "shortName" : "test",
    "title" : "test",
    "description" : "",
        "node" : "\/alfresco\/service\/api\/node\/workspace\/SpacesStore\/e597e4c2-d307-46e3-ba4d-b911262e7261",
        "tagScope" : "\/alfresco\/service\/api\/tagscopes\/workspace\/SpacesStore\/e597e4c2-d307-46e3-ba4d-b911262e7261",
    "isPublic" : false,
    "visibility" : "PRIVATE",
    "siteManagers" : 
    [           
         "admin"  

   ]
}

// see the 'node' property up there
$ curl -u admin:admin http://p01:8080/alfresco/service/api/node/workspace/SpacesStore/e597e4c2-d307-46e3-ba4d-b911262e7261/children
[..cmis response here..] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T10:22:41.953

一种选择是使用 CMIS。不过，根据您的具体需求，您也可以使用一些内置的 webscripts 来做列表

在站点的根目录中，您有容器，例如 documentLibrary 和 wiki。您可以从*container.get* webscript 获取站点的容器列表。查看 org/alfresco/slingshot/documentlibrary/container.get.desc.xml 了解详细信息。如该文件所示，它的 URL 模式是*/slingshot/doclib/containers/{site}*

```
curl -u admin:admin http://localhost:8080/alfresco/service/slingshot/doclib/containers/test
{
   "containers":
   [
      {
         "name": "documentLibrary",
         "description": "Document Library",
         "nodeRef": "workspace://SpacesStore/973338a0-db39-458e-a10d-396f00cb16a3",
         "type": "cm:folder"
      }
   ]
} 
```

接下来，当您知道要使用容器中的哪个容器或文件夹时，*treenode.get* webscript 可以让您列出它，例如

```
 curl -u admin:admin http://localhost:8080/alfresco/service/slingshot/doclib/treenode/site/test/documentLibary
 {
    "totalResults": 0,
    "resultsTrimmed": false,
    "parent":
    {
       "nodeRef": "workspace://SpacesStore/92e4f8de-b919-4540-a27a-16c4e53a57bc",
       "userAccess":
       {
          "create": true,
          "edit": true,
          "delete": true
       }
    },
    "items":
    [
    ]
 } 
```

我还可以建议您使用[http://localhost:8080/alfresco/service/index](http://localhost:8080/alfresco/service/index)来查看系统中存在哪些 webscripts，并获取有关它们的信息，这对此类情况有很大帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T04:44:33.123

使用此 url 获取文件夹列表。

```
http://localhost:8080/alfresco/service/api/node/workspace:SpacesStore/store_id/b0697dd1-ae94-4bf6-81c8-5e2fa098ddfa/children 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T21:53:18.790

加载站点：[http://localhost:8080/alfresco/service/api/sites/test-3](http://localhost:8080/alfresco/service/api/sites/test-3)

```
{
    "url": "\/alfresco\/service\/api\/sites\/test-3",
    "sitePreset": "site-dashboard",
    "shortName": "test-3",
    "title": "test 3",
    "description": "",
    "node": "\/alfresco\/service\/api\/node\/workspace\/SpacesStore\/0352afea-797f-4b9e-be27-3bf37e54a2f1",
    "tagScope": "\/alfresco\/service\/api\/tagscopes\/workspace\/SpacesStore\/0352afea-797f-4b9e-be27-3bf37e54a2f1",
    "siteManagers":
    [
            "admin"
    ],
    "isPublic": true,
    "visibility": "PUBLIC"
} 
```

使用从节点属性中提取的 ID 获取站点内容：[http://localhost:8080/alfresco/service/api/node/workspace/SpacesStore/0352afea-797f-4b9e-be27-3bf37e54a2f1/children](http://localhost:8080/alfresco/service/api/node/workspace/SpacesStore/0352afea-797f-4b9e-be27-3bf37e54a2f1/children)

里面是一个标题为“documentLibrary”的节点。使用它的 ID GUID，您可以获取更多的孩子

[http://localhost:8080/alfresco/service/cmis/s/workspace:SpacesStore/i/b68db1eb-547d-4b2c-b5eb-ba207a275789/children](http://localhost:8080/alfresco/service/cmis/s/workspace:SpacesStore/i/b68db1eb-547d-4b2c-b5eb-ba207a275789/children)

如果您有自定义属性，它们将出现在使用此 API 调用的子项上。

使用子项的 ID，您可以获取其内容。

[http://localhost:8080/alfresco/service/cmis/s/workspace:SpacesStore/i/2d53f464-bea0-46f3-aa0c-10b3302e661c/content](http://localhost:8080/alfresco/service/cmis/s/workspace:SpacesStore/i/2d53f464-bea0-46f3-aa0c-10b3302e661c/content)

# delphi - 使用 D7 进行远程分析（不是内存分析，而是计时......）

> ID：10200641
> 
> 赞同：4
> 
> 时间：2012-04-17T23:26:20.827
> 
> 标签：delphi, profiling, delphi-7

我们内部有一台机器，它启动 Delphi 7 应用程序的速度比任何其他机器慢 20 倍。

我们希望获得性能配置文件（而不是内存配置文件）来定位它花费时间的位置。

我们发现，我们拥有的 AQTime 不进行远程分析。

我们不希望花时间构建一个完整的 D7 IDE 开发环境，这样我们就可以使用 AQTime 在这台内部机器上分析我们的应用程序。

代码有点太复杂，我们不想自己测量它。

关于远程收集高级（过程或行号）统计信息的分析器有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:53:07.810

看看[SamplingProfiler](http://delphitools.info/samplingprofiler/)。它不进行“远程”分析，但也不需要开发环境。它只需要能够启动要分析的程序（因此它必须在同一台机器上运行）并且程序必须具有由链接器生成的 .MAP 文件，该文件与 .EXE 位于同一文件夹中。如果这是在内部，那对您来说应该不是问题。

而且，如果您查看帮助文件，您甚至会找到方法让它只分析您程序的某些部分，而 AQTime 无法做到这一点。如果您知道问题出在某个特定位置（例如启动代码），这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:47:50.513

您可以使用我们的开源[`TSynLog`类](http://blog.synopse.info/post/2011/04/14/Enhanced-logging-in-SynCommons)将分析添加到任何应用程序，而不仅仅是在开发人员计算机上。

它不像其他工具那样是自动分析器：您必须修改代码。但它可以根据要求远程运行，甚至完全没有通信，即使是来自最终客户。

您将一些分析调用添加到一些方法代码，然后进入和离开方法将被记录到一个文本文件中。然后[提供的日志查看器](http://blog.synopse.info/post/2011/08/20/Enhanced-Log-viewer)可用，并且有一些专门的方法来进行分析，并识别慢速方法。

[![来自日志的分析方法](../Images/3ef11ab61766d5bd8066614317255ec6.png)](https://i.stack.imgur.com/AXyB4.png)
[（来源：[synopse.info](http://blog.synopse.info/public/LogView01.png)）]

日志机制可用于跟踪递归调用。当您进入和离开任何方法时，它可以使用基于接口的机制进行记录：

```
procedure TMyDB.SQLExecute(const SQL: RawUTF8);
var ILog: ISynLog;
begin
  ILog := TSynLogDB.Enter(self,'SQLExecute');
  // do some stuff
  ILog.Log(sllInfo,'SQL=%',[SQL]);
end; // when you leave the method, it will write the corresponding event to the log 
```

它将被记录为：

```
20110325 19325801  +    MyDBUnit.TMyDB(004E11F4).SQLExecute
20110325 19325801 info   SQL=SELECT * FROM Table;
20110325 19325801  -    MyDBUnit.TMyDB(004E11F4).SQLExecute 00.000.507 
```

这里方法名称在代码 ( `'SQLExecute'`) 中设置。但是如果你有一个关联的`.map`文件，日志机制能够读取这个符号信息，并写入事件的确切行号。您甚至可以使用`.map`文件的高度压缩版本（900 KB `.map`-> 70 KB `.mab`，即比 zip 或 lzma 好得多），或者在构建时将其内容嵌入到可执行文件中。

因此，在方法级别添加分析只是在方法的开头添加一行代码，如下所示：

```
procedure TMyDB.SQLExecute(const SQL: RawUTF8);
begin
  TSynLogDB.Enter;

  // do some stuff

end; // when you leave the method, it will write the corresponding event to the log 
```

高分辨率时间戳也记录在文件中（此处`00.000.507`）。有了这个，您将能够在其真实计算机上使用来自客户端的数据来分析您的应用程序。通过该`Enter`方法（及其自动离开功能），您可以获得所需的所有信息。

通过逐步进行，您将很快找到您的应用程序瓶颈。并且可以根据要求在最终客户方面做同样的事情。

我在几个应用程序上使用了它，并且非常容易地发现了几个瓶颈，甚至在特定的硬件、软件和网络配置上（你永远不知道你的客户使用什么），非常容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T05:59:47.060

您还可以尝试我的免费/开源采样分析器： [http ://code.google.com/p/asmprofiler/wiki/AsmProfilerSamplingMode](http://code.google.com/p/asmprofiler/wiki/AsmProfilerSamplingMode)

（我使用它比使用 SamplingProfiler 获得更好的结果）它使用各种 Delphi 调试符号（.map、TD32、.jdbg 等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T09:45:08.463

为什么不在机器上安装 AQTime 并将其用作独立的分析器？不需要“整个 D7 IDE 开发环境”。

# html - 登录表单未提交

> ID：10200646
> 
> 赞同：0
> 
> 时间：2012-04-17T23:26:55.327
> 
> 标签：html, forms, form-submit

我正在为我的 java 应用程序创建一个登录表单。但我不能让它提交。我在我的表格中找不到任何错误。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Log in</title>
 </head>
 <body>
 <div id="container">
 <div id="top">
    <h1>Please complete the form below</h1>
  </div>
 <div id="leftSide">
 <fieldset>
 <legend>Login details</legend>
<form action="login.jsp" method="get" class="form">
<label for="username">Username</label>
<div class="div_texbox">
<input name="username" type="text" class="username" id="username" value="username" />
</div>
 <label for="password">Password</label>
<div class="div_texbox">
<input name="password" type="password" class="password" id="password" value="password" />
</div>
<div class="button_div">
<input name="submit" type="button" value="Submit" class="buttons" />
</div>
 </form>
 </fieldset>
 </div>
</div>
 </body>
</html> 
```

有一些来自页面的其他部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:30:28.163

改变这个：

```
<input name="submit" type="button" value="Submit" class="buttons" /> 
```

对此：

```
<input name="submit" type="submit" value="Submit" class="buttons" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:30:49.600

提交按钮类型应为提交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T23:30:54.990

在此行中将输入类型从按钮更改为提交，您应该能够提交

```
<input name="submit" type="button" value="Submit" class="buttons" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T23:34:45.370

您的代码是正常的，如果您无法提交，请查看您的“login.jsp”。你也可以使用

```
<form action="login.jsp" method="post" class="form"> 
```

并改变：

```
type="botton" 
```

到

```
type="submit" 
```

# clojure - 命名空间对象的名称

> ID：10200651
> 
> 赞同：1
> 
> 时间：2012-04-17T23:27:20.927
> 
> 标签：clojure, namespaces

有没有办法通过名称获取命名空间对象？例如：

```
(def ns-symbol (ns-name *ns*))          ;; get namespace name as symbol
(def ns-object (ns-by-name ns-as-str))  ;; convert it back to namespace object 
```

所以在这个例子中我需要 function `ns-by-name`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T00:01:05.460

`(ns-name *ns*)`返回一个符号而不是字符串，因此您的 ns-as-str 名称错误...

```
(type (ns-name *ns*))
clojure.lang.Symbol 
```

鉴于此，将其转换回来就像...

```
(find-ns (ns-name *ns*))
#<Namespace user> 
```

如果你真的希望命名空间的名称是一个字符串......

```
(def ns-as-str (str (ns-name *ns*)))
(def ns-object (find-ns (symbol ns-as-str)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:59:17.523

该`find-ns`函数可能会起作用：

```
user=> (def ns-as-str (ns-name *ns*)) 
#'user/ns-as-str
user=> (def ns-object (find-ns ns-as-str)) 
#'user/ns-object
user=> ns-object
#<Namespace user> 
```

# c++ - 如何使用 libFLAC++ 将 WAV 格式转换为 FLAC

> ID：10200653
> 
> 赞同：0
> 
> 时间：2012-04-17T23:27:29.990
> 
> 标签：c++, c++builder, flac

如何使用 libFLAC++（encode.h 和 decode.h）将 WAV 格式转换为 FLAC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T01:31:07.990

*libflac*源代码压缩包中有一个不错的 C++ 示例。

也可以[在线浏览](http://flac.cvs.sourceforge.net/viewvc/flac/flac/examples/cpp/encode/file/main.cpp?view=markup)（单个 cpp 文件）。

*   [解码](http://flac.cvs.sourceforge.net/viewvc/flac/flac/examples/cpp/decode/)
*   [编码](http://flac.cvs.sourceforge.net/viewvc/flac/flac/examples/cpp/encode/)

# jquery - 用链接替换字符串的正确方法

> ID：10200658
> 
> 赞同：0
> 
> 时间：2012-04-17T23:28:35.497
> 
> 标签：jquery, format

我允许我的用户在我的网站上发布消息。我希望能够将 %pop 之类的内容替换为以下格式的链接：

`<a href="ss/pop.wav">%pop</a>`

%explosion 将更改为：

`<a href="ss/explosion.wav">%explosion</a>`

我正在使用 jQuery，有人知道我会怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:35:28.820

此代码不需要 jQuery：

```
"The %pop is here".replace(/%(\w+)/g, '<a href="ss/$1.wav">%$1</a>') 
```

结果是：

“<a href="ss/pop.wav">%pop</a> 在这里”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T00:03:44.290

混合使用 jQuery 和正则表达式：

```
jQuery("div.message").each(function() {
    jQuery(this).html(jQuery(this).text().replace(
        /%(\w+)/g,"<a href='ss/$1.wav'>%$1</a>"
    ));
}); 
```

根据需要更改“div.message”选择器。遍历每个 div.message，并根据需要替换每次出现的 %foo。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T23:33:35.697

```
$("a").each(function() {
    var href = $(this).val().split("%")[1];
    if(href.length > 0) {
        $(this).attr("href", "ss/"+href+".wav");
    }
});​ 
```

当然，您需要定制选择器以匹配您的 HTML 架构，因为遍历`a`页面上的所有元素可能会很麻烦和/或很慢。（为了简洁起见，我建议使用一个类）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T23:36:36.057

为标签分配一个类或 rel，遍历所有实例以获取括号内的值，过滤 % 并分配 href。

```
$('a.get-path').each(function(){

    // Cache the $(this) object
    var $this = $(this);

    // Strip out the % from the "file name" and create the path
    var myPath = $this.html().replace(/%(.*)/, "ss/$1.wav");

    $this.attr('href', myPath);

}); 
```

# c# - C# Webbrowser.invokeScript and Error: 80020006 only in this specific site

> ID：10200661
> 
> 赞同：1
> 
> 时间：2012-04-17T23:28:53.230
> 
> 标签：c#, windows-phone-7, browser, invokescript

我已经尝试了几个小时的解决方案......

我正在为 windowsphone 做一个应用程序，用于显示公共交通的详细信息。我需要更改 WhereFrom 和 WhereTo 的值，然后单击 tinyurl 网页中的提交，然后抓取信息。如果您可以推荐任何其他方式来做到这一点，请告诉它。我也尝试过 webclient、httpwebrequest，但它们的说明和示例对我来说太复杂了。

我坚持之前提到的错误和 selain.InvokeScript("eval"); 线导致它。更奇怪的是，我只在这个 tinyurl 网站上遇到了这个错误。例如，当使用 www.bing.com 站点时，我遇到另一个错误：80020101 使用第三个 Invokescript 行。

```
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Runtime.InteropServices; //COMException
namespace PhoneApp5
{

    public partial class MainPage : PhoneApplicationPage
    {

        // Constructor
        public MainPage()
        {

            InitializeComponent();
            //selain as WebBrowser. It's instanted in mainpage.xaml

            selain.IsScriptEnabled = true;

            selain.LoadCompleted += new System.Windows.Navigation.LoadCompletedEventHandler(selain_LoadCompleted);

            selain.Navigating +=new EventHandler<NavigatingEventArgs>(selain_Navigating);
            string osoite = "http://tinyurl.com/c7xel8s";
            //string osoite = "http://bing.fi";
            selain.Navigate(new Uri(osoite));

        }

        private void selain_Navigating(object sender, NavigatingEventArgs e)
        {

        }

        private void selain_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
        {
            //Updates textblock in mainpage
            tekstiBlokki.Text = "READY";
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            try
            {
                selain.InvokeScript("eval");
                selain.InvokeScript("eval", "document.getElementById('keya')");
                selain.InvokeScript("eval", "document.getElementById('sb_form_q').value = 'Roadname';");
                //selain.InvokeScript("eval", "document.getElementById('keyb').value=\"" + textBox2.Text + '\"');
            }
            catch (ObjectDisposedException)
            {
                MessageBox.Show("Selain ei ole enää toiminnassa");
            }
            catch (InvalidOperationException)
            {
                MessageBox.Show("Reference not found");
            }
            catch (COMException)
            {
                MessageBox.Show("Vastaavaa Jscript funktiota ei löydy");
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T00:42:36.140

您正试图在所有页面中调用一个名为**eval的脚本。**第二个参数是eval**函数的****参数**。很可能，页面上没有可用的**eval**函数，因此您会遇到异常。

 ****在此处查看[InvokeScript](http://msdn.microsoft.com/en-us/library/cc491132%28v=vs.95%29.aspx)的文档。****

# c - 限制程序只运行一个实例

> ID：10200671
> 
> 赞同：2
> 
> 时间：2012-04-17T23:29:49.250
> 
> 标签：c

这是一个简单的“hello world”C 程序，需要 10 秒才能完成：

```
#include<stdio.h>
main()
{
    printf("hello World 1 \n");
    fflush(stdout);
    sleep(10);
    printf("hello World 2 \n");
    fflush(stdout);
} 
```

我怎样才能修改它，以便在任何时候最多只能运行这个可执行文件的一个实例？我正在使用 Linux。

例如，假设同时运行多个实例时服务器会崩溃，我们正在努力防止这种情况发生。我希望看到一个或多个不同方式的示例，以便我可以在我的系统上运行和验证。

另外，有没有一种简单的方法来排队，所以如果我连续两次运行 C 可执行文件，第二个在第一个完成后运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:33:03.053

通常，您通常会获得一个文件锁，创建一个给定文件名的运行时文件，其中进程 PID 作为初始化时的内容（在 UNIX 系统中通常在`/var/run/`）。退出时删除文件。

如果文件在启动期间已经存在，则另一个实例已经在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:30:40.553

假设我们命名我们的 C 程序`hello.c`，并使用： 编译它`gcc -g hello.c -o hello.exe`。现在我们不再直接运行可执行文件，而是创建一个 bash 脚本来运行它。bash 脚本检查是否存在虚拟锁文件，表明 C 程序正在运行。如果此锁定文件不存在，它会创建一个以让将来对该 bash 脚本的调用知道 C 程序正在运行。这是 bash 脚本：

```
#!/bin/sh
if [ ! -f dummy.file ];
then
    echo "File not found. Let's create one now, then run hello.exe."
    echo 'locked'> dummy.file
    ./hello.exe
else
    echo "File dummy.file exists, so hello.exe is not run."
fi 
```

现在我们只需要在上面的 C 程序中添加一些代码，让它在程序末尾删除文件，如下所示：

```
#include<stdio.h>
main()
{
    printf("hello World 1 \n");
    fflush(stdout);
    sleep(10);
    printf("hello World 2 \n");
    fflush(stdout);

    if (remove("dummy.file") == -1)
      perror("Error in deleting lock file");
 } 
```

非常简单。感谢 skjaidev 暗示了这个解决方案（我将把它作为答案）。

# ios - 使用 [NSData writeToFile:] 后从设备中删除文件

> ID：10200675
> 
> 赞同：4
> 
> 时间：2012-04-17T23:30:25.170
> 
> 标签：ios, nsdata, writetofile

在我的代码中，我正在做：

```
[anNsDataObject writeToFile:@"thefile" atomically:YES]; 
```

如何从我的设备中删除此文件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T23:33:32.233

使用`NSFileManager`'[`removeItemAtPath:error:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-SW18)方法。

例子：

```
NSError *error;
[[NSFileManager defaultManager]removeItemAtPath:@"theFile" error:&error];

if (error)
{
  // file deletion failed
} 
```

# bash - Makefile 中的处理列表

> ID：10200676
> 
> 赞同：1
> 
> 时间：2012-04-17T23:30:25.443
> 
> 标签：bash, makefile, gnu-make

在 bash 中，当我想在没有扩展名的情况下迭代 pdf 文件的递归列表时，我可以执行以下操作：

```
for file in `find mypath -type f -name '*.pdf' -printf "%f\n"`
do
    echo "${file%.*}"
done 
```

这非常有效，我得到了一个没有扩展名的 pdf 文件列表。

但是如果我尝试在 Makefile 中做同样的事情，我会得到空输出：

```
my_test:
    @for file in `find mypath -type f -name '*.pdf' -printf "%f\n"`; \
    do \
        echo "${file%.*}"; \
    done; \ 
```

你知道为什么会这样吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:59:33.523

只需添加一个额外的`$`：

```
echo "$${file%.*}"; \ 
```

在您的命令中， Make 扩展了 first `$`，解释`${`为无，事情很快就解开了。使用`$$`，第一个`$`转义第二个，然后`${...}`传递给 shell。

# javascript - 桌面 <--> 移动代码共享 [Javascript]

> ID：10200678
> 
> 赞同：0
> 
> 时间：2012-04-17T23:30:33.220
> 
> 标签：javascript

我找不到令人满意的答案，所以这里是问题；

我正在开发一个基于 HTML5-Websocket 的应用程序，我也将把它移植到 Mobile 上。

问题是我的 2/3 功能不会出现在移动版本中，并且功能与 JS 紧密集成到 HTML 中。

如果我能优雅地分离这 1/3 的特征，我会很干。但是我找不到一个简单的解决方案。

例如，我有一个从节点获取用户对象并在函数中处理它的函数。对于移动设备，我将需要相同的流量，但流量的 2/3 除外。我可以为它们创建不同的函数并将它们放入不同的文件中，但这会带来维护的噩梦，因为即使是简单的特性，我也需要创建数十个额外的函数。

有没有什么好的框架或方法可以为这项工作做这些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:52:17.507

您应该将长函数分解为更小的函数。（每个函数大约 15 行代码。一般情况下，任何函数的长度都不应超过屏幕的高度。）

```
function DoAllTheThings() {
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
    // long function
} 
```

会成为：

```
function DoAllTheThings() {
    WarbleTheThing();
    FribbleTheThing();
    StrabbleTheThing();
}
function WarbleTheThing() {
    // short function
    // short function
    // short function
}
function FribbleTheThing() {
    // short function
    // short function
    // short function
}
function StrabbleTheThing() {
    // short function
    // short function
    // short function
} 
```

对于桌面浏览器，您调用 DoAllTheThings() 但对于移动设备，您可能只调用 FribbleTheThing()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:48:16.120

对于这种情况，我会推荐一种非规范化的方法。从表面上看，您认为这将是一场维护噩梦，因为您将复制一些代码，但在更深层次上，维护噩梦可能会因为您的共享代码尝试处理过多而浮出水面。在这种情况下，代码抽象和隔离可能是可行的方法，它将加快 QA。

# jquery - jQuery 不能在一个动作中进行 2 次更改？

> ID：10200686
> 
> 赞同：0
> 
> 时间：2012-04-17T23:31:09.537
> 
> 标签：jquery, events, checkbox, attributes

[这是 jsfiddle 上简单示例的链接](http://jsfiddle.net/Q8xMU/8/)

```
$(document).ready(function(){
  $('input[type=checkbox]').live("click", function() {
    if($(this).attr('class') == 'color_checkboxes') {
      if($(this).attr('id') == 'is_checked') {
        $(this).removeAttr('id');
        $(this).attr('checked', false);
      } else {
        $('input[type=checkbox][class=color_checkboxes]').attr('checked', false);
        $(this).attr('checked', true).attr('id', 'is_checked');                
      }
    }
  })
}); 
```

​</p>

目标是选中一个复选框 - 将其添加 ID 值`is_checked`，单击另一个复选框，然后在此复选框中添加 ID`is_checked`并将 ID 删除`is_checked`到前一个复选框。

示例 - 选中复选框**绿色**，然后选中**蓝色**，然后再次选中**绿色**- 绿色按钮不会被选中 - 我的意思是，原因是`is_checked`. 当您尝试第二次检查**绿色**按钮时，它已经工作了。

这不是用户友好的行为，所以我想问你，如果有一些方法/建议，如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:41:58.900

虽然您应该`radio buttons`在这里使用复选框版本：

```
$('input[type=checkbox].color_checkboxes').click(function() {
    if (this.checked)
        $(this).siblings().prop('checked', false);
});​ 
```

[**现场演示**](http://jsfiddle.net/dRD6y/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:51:45.747

```
$(document).ready(function() {
    var checkboxes = $('.color_checkboxes:checkbox');

    checkboxes.click(function(e) {
        var clicked = $(this);

        checkboxes.not(clicked).removeAttr('id').attr('checked', false);

        if(clicked.attr('checked')) {
            clicked.attr('id', 'is_clicked');
        } else {
            clicked.removeAttr('id');
        }
    });
}); 
```

[http://jsfiddle.net/xkMKk/1/](http://jsfiddle.net/xkMKk/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:34:24.983

像这样的东西。

```
<script>
  $("input[type='checkbox']").click(function(){
    $("#is_checked").removeAttr("id");
    $(this).attr("id","is_checked");
  });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T23:41:30.523

你可以重新考虑很多。首先，您应该绑定到[`.change()`](http://api.jquery.com/change/)through [`.on()`](http://api.jquery.com/on/)，因为[`.live()`](http://api.jquery.com/live/)已弃用。其次，您应该将所有复选框缓存到一个变量中。第三，您应该使用[`.prop()`](http://api.jquery.com/prop/)1.6 版的版本来处理属性，而不是[`.attr()`](http://api.jquery.com/attr/). 然后，您只需将所有复选框的选中属性选中为 false，同时将当前复选框的选中属性选中为 true。

像这样：

```
$(document).ready(function() {

    var $checkboxes = $("input[type=checkbox]");

    $checkboxes.on("change", function() {

        $checkboxes.prop("checked", false);
        $(this).prop("checked", true);

    });

});
​ 
```

***[单击此处查看 jsFiddle 演示。](http://jsfiddle.net/Q8xMU/11/)***

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T06:08:14.027

我就是这样做的。

```
$(document).ready(function(){      

    $(document).on("click", ".color_checkboxes:checkbox", function() {
        $(".is_checked").prop("checked", false).removeClass("is_checked");
        $(this).addClass("is_checked");
    });      

}); 
```

​</p>

首先，我会使用 .on() 而不是 .live()，因为 live 已被弃用。

Then, instead of using removing and adding IDs, I think it would be wiser to use Classes because there's functions made especially for that. Don't forget that it is possible to have multiple classes!

By using .on(), we can use it to bind it classes ".color_checkboxes" (that are also :checkbox).

When it's clicked, crawl for everything that has class "is_checked", uncheck them, then remove the class.

Then, add the class "is_checked" to the clicked checkbox.

Here is the fiddle. [http://jsfiddle.net/Q8xMU/15/](http://jsfiddle.net/Q8xMU/15/)

Cheers.

# java - Java vs C 浮点数：“x * x”与“pow(x,2)”不同？

> ID：10200691
> 
> 赞同：18
> 
> 时间：2012-04-17T23:32:08.140
> 
> 标签：java, c, floating-point, floating-accuracy

为什么这是真的？与 C 甚至 Java Math.pow 方法相比，当将两个浮点数相乘时，Java 产生的结果似乎略有差异。

爪哇：

```
float a = 0.88276923;

double b = a * a;   // b becomes 0.779281497001648  <---- what???
b = Math.pow(a,2);  // b becomes 0.7792815081874238 
```

C：

```
float a = 0.88276923;

double b = a * a;   // b becomes 0.7792815081874238
pow(a,2);           // b becomes 0.7792815081874238 
```

更新：根据 Ed S. 的评论，我还发现 C 行为会根据编译器而变化。使用 gcc 它似乎与 Java 行为相匹配。使用 Visual Studio（取决于您的目标平台）它可以产生上面看到的结果或在 Java 中看到的结果。啊。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T23:50:07.780

正如 pst 和真实性已经明智地指出的那样，C在乘法*之前*`float`将 a 提升为 a 。实际上，当它们被压入堆栈时，它们被提升为 80 位扩展精度值。这是汇编程序输出（VS2005 x86 C89）`double`

 *```
 double b = a * a;
00411397  fld         dword ptr [a] 
0041139A  fmul        dword ptr [a] 
0041139D  fstp        qword ptr [b] 
```

**FLD 指令**

> FLD 指令将 32 位、64 位或 80 位浮点值加载到堆栈中。该指令在将值压入浮点堆栈之前**将 32 位和 64 位操作数转换为 80 位扩展精度值。**

* * *

有趣的是，如果我以 x64 为目标进行构建，`movss`则会使用该指令并且您会得到一个值`0.779281497001648`作为结果，即您在 java 示例中看到的内容。试试看。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-17T23:41:26.140

Java 的用途

```
double b = a * a; 
```

首先乘以`a * a`（32 位） ，然后在分配给 时将`float`结果转换为（64 位）。`double``b`

```
b = Math.pow(a,2); 
```

首先转换`a`为（64 位）`double`（因为参数`Math.pow`是`double, double`），然后平方。

（对我来说）令人费解的是为什么 C 似乎将`a`'s`double`放在首位

```
double b = a * a; 
```

~~这在标准中吗？~~

~~**编辑：**我隐约记得C不需要数字的特定实现（就使用了多少位而言）......这是怎么回事？你的`float`s 是 64 位的吗？（在 Java 中 a`float`始终为 32 位，a`double`始终为 64 位）。~~

**编辑：** Ed S. 的回答和标记的评论都表明不同的编译器给出不同的结果表明 C 结果是特定于实现和体系结构的。*

# c++ - 新的 , 试图访问目录中的数据

> ID：10200692
> 
> 赞同：0
> 
> 时间：2012-04-17T23:32:11.840
> 
> 标签：c++, directory, opendir, istringstream, dirent.h

我以前从未使用`dirent.h`过。我正在使用 istringstream 读取文本文件（单数），但需要尝试修改程序以读取目录中的多个文本文件。这是我尝试实现 dirent 的地方，但它不起作用。

也许我不能将它与字符串流一起使用？请指教。

为了便于阅读，我已经去掉了我用单词做的蓬松的东西。这对一个文件*非常*有效，直到我添加了 dirent.h 的东西。

```
#include <cstdlib>
#include <iostream>
#include <string>
#include <sstream>  // for istringstream
#include <fstream>
#include <stdio.h>
#include <dirent.h>

void main(){

    string fileName;
    istringstream strLine;
    const string Punctuation = "-,.;:?\"'!@#$%^&*[]{}|";
    const char *commonWords[] = {"AND","IS","OR","ARE","THE","A","AN",""};
    string line, word;
    int currentLine = 0;
    int hashValue = 0;

    //// these variables were added to new code //////

    struct dirent *pent = NULL;
    DIR *pdir = NULL; // pointer to the directory
    pdir = opendir("documents");

    //////////////////////////////////////////////////

    while(pent = readdir(pdir)){

        // read in values line by line, then word by word
        while(getline(cin,line)){
            ++currentLine;

            strLine.clear();
            strLine.str(line);

            while(strLine >> word){

                        // insert the words into a table

            }

        } // end getline

        //print the words in the table

    closedir(pdir);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:40:41.120

你应该使用`int main()`而不是`void main()`.

您应该错误检查对`opendir()`.

您将需要打开一个文件而不是使用`cin`来读取文件的内容。而且，当然，您需要确保它被适当地关闭（这可能是什么都不做，让析构函数做它的事情）。

请注意，文件名将是目录名 ( `"documents"`) 和 . 返回的文件名的组合`readdir()`。

还要注意，您可能应该检查目录（或者，至少， for `"."`and `".."`，当前目录和父目录）。

Andrew Koenig 和 Barbara Moo所著的[“Ruminations on C++”](https://rads.stackoverflow.com/amzn/click/com/0201423391)一书中有一章讨论了如何在 C++ 中封装`opendir()`函数族，以使它们在 C++ 程序中表现得更好。

* * *

希瑟问：

> 我放什么`getline()`代替`cin`？

目前的代码从标准输入读取，也就是`cin`现在。这意味着如果您使用 启动程序`./a.out < program.cpp`，它将读取您的`program.cpp`文件，而不管它在目录中找到什么。因此，您需要根据找到的文件创建一个新的输入文件流`readdir()`：

```
while (pent = readdir(pdir))
{
    ...create name from "documents" and pent->d_name
    ...check that name is not a directory
    ...open the file for reading (only) and check that it succeeded
    ...use a variable such as fin for the file stream
    // read in values line by line, then word by word
    while (getline(fin, line))
    {
         ...processing of lines as before...
    }
} 
```

您可能只需打开目录就可以逃脱惩罚，因为第一次读取操作 (via ) 将失败（但您可能应该根据其名称`getline()`安排跳过`.`和目录条目）。`..`如果`fin`是循环中的局部变量，那么当外循环循环时，`fin`将被销毁，这应该关闭文件。

# c++ - DD/MM/YYYY 输入验证

> ID：10200693
> 
> 赞同：0
> 
> 时间：2012-04-17T23:32:35.727
> 
> 标签：c++, linux, date, validation

我正在处理`date validation`(MM/DD/YYYY) 并收到此错误：

> *错误：需要左值作为赋值的左操作数*

在 line:9 ( `if ( Y%4=0 ) { return true; }`) 运行这段代码？

```
bool valDate( int M, int D, int Y ) 
{
    if (! (1<=M and M<=12) ) return false;    
    if (! (1<=D and D<=31) ) return false;
    if ( (D==31) and (M==2 or M==4 or M==6 or M==9 or M==11) )        
        return false;
    if ( (D==30) and (M==2) ) return false;
    if ( (M==2) and (D==29) ) { 
        if ( Y%4=0 ) { return true; }        
        else { return false; }        
        if ( (Y%100==0) and (Y%400==0) ) { return true; }
        else { return false; }
    }   
} 
```

任何人都可以解释错误（以及我做错了什么）吗？干杯！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:35:37.667

```
 if ( Y%4=0 ) { return true; } 
```

应该：

```
 if ( Y%4==0 ) { return true; } 
```

左值是引用内存中某个位置的表达式。Y%4 是一个右值——从语义上讲，它不能被赋值。

# php - 如何在 PHP 上将 urn 添加到 SoapClient？

> ID：10200694
> 
> 赞同：3
> 
> 时间：2012-04-17T23:32:42.993
> 
> 标签：php, web-services, soap, namespaces, wsdl

[我有这个 wsdl](https://mws2.safetypay.com/sandbox/express/ws/v.2.4/MerchantWS.asmx?wsdl)由 SoapUI 生成的 xml ：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:safetypay:mws:api:messages">
   <soapenv:Header/>
   <soapenv:Body>
      <urn:CommunicationTestRequest>
         <urn:ApiKey>?</urn:ApiKey>
         <urn:RequestDateTime>?</urn:RequestDateTime>
         <urn:Signature>?</urn:Signature>
      </urn:CommunicationTestRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

它工作正常，但是当我使用 PHP 客户端 SoapClient 创建它时，它失败了......我发现错误是因为它略有不同，它只是缺少骨灰盒（我不知道它是什么）。SoapClient 的 xml 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <CommunicationTestRequest>
            <RequestDateTime>2012-04-17T23:21:54</RequestDateTime>
            <ApiKey>XXXXX</ApiKey>
            <Signature>XXXXX</Signature>
        </CommunicationTestRequest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

三个主要区别是：1）在定义中，SoapClient 生成的代码缺少这个： xmlns:urn="urn:safetypay:mws:api:messages" 2）在 SoapUI 生成的 xml 中我有soapenv，而在SoapClient 生成的那个是 SOAP-ENV 3）在 SoapUI 中，我在每个孩子之前都有瓮，SoapClient 没有。

我几乎一整天都在更改配置并从对象向后移动到数组（因为过去它与其他 wsdl 一起使用），而我在互联网上的研究并没有给我任何东西......所以......任何人都可以知道我的错误是什么吗？

请求是这样的：

```
$std = new RequestDateTime();
$std->RequestDateTime = date ( 'Y-m-d\TH:i:s', time () );
$std->ApiKey = SafetyPaySoap::API_KEY_SAND;
$std->Signature = SafetyPaySoap::SIG_KEY_SAND;
$this->_wsdl->CommunicationTest($std); 
```

SoapClient 的配置是这个

```
$config = array ();
$config ['exceptions'] = true;
$config ['trace'] = true;
$config ['cache_wsdl'] = WSDL_CACHE_NONE;
$config ['soap_version'] = SOAP_1_1;
parent::SoapClient ( $url . '?wsdl', $config ); 
```

**编辑：** 我能够修复这个错误。我不得不重写 __doRequest 方法。现在看起来像这样：

```
public function __doRequest($request, $location, $action, $version, $one_way = null) {
    $request = str_ireplace("<{$this->_method}Request>", "<{$this->_method}Request xmlns='urn:safetypay:mws:api:messages'>", $request);
    return parent::__doRequest ( $request, $location, $action, $version, $one_way );
} 
```

所以，我正在做的是在请求中添加命名空间，然后生成这个 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <CommunicationTestRequest xmlns='urn:safetypay:mws:api:messages'>
            <ApiKey>XXXX</ApiKey>
            <RequestDateTime>2012-04-18T20:22:51</RequestDateTime>
            <Signature>XXXXX</Signature>
        </CommunicationTestRequest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:46:53.813

urn: 实际上是一个 XML 命名空间。查看 SoapClient 的文档，它看起来像是在目标命名空间中作为配置数组中的“uri”条目传递。可能值得尝试以下内容，看看这是否有所作为。

```
$config = array();
$config['uri'] = "urn:safetypay:mws:api:messages";
// your other configurations
parent::SoapClient('https://mws2.safetypay.com/sandbox/express/ws/v.2.4/MerchantWS.asmx?wsdl', $config); 
```

# spring - spring-simple-memcache - ReadThroughSingleCache 的 Maven 依赖项

> ID：10200695
> 
> 赞同：0
> 
> 时间：2012-04-17T23:32:44.323
> 
> 标签：spring, memcached, simple-spring-memcached, ssm

有人用过spring simple memcached吗？我无法获得确切的 Maven 依赖项和可用的存储库。code.google 页面 (http://code.google.com/p/simple-spring-memcached/) 上提到的依赖项提到了其他依赖项，但它不包括 Simple-spring-memcache 本身的 jar。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:44:23.120

试试这个：

```
<dependency>
  <groupId>com.google.code.simple-spring-memcached</groupId>
  <artifactId>simple-spring-memcached</artifactId>
  <version>2.0.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:38:37.690

对于 SSM 2.0.0，您还需要 memcached 客户端（xmemcached 或 spymemcached）：

```
<dependency>
    <groupId>com.google.code.simple-spring-memcached</groupId>
    <artifactId>simple-spring-memcached</artifactId>
    <version>2.0.0</version>
</dependency>
<dependency>
    <groupId>com.googlecode.xmemcached</groupId>
    <artifactId>xmemcached</artifactId>
    <version>1.3.5</version>
</dependency> 
```

并配置与本地 memcached 服务器的连接：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
            http://www.springframework.org/schema/aop
            http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <import resource="simplesm-context.xml" />
    <aop:aspectj-autoproxy />

    <bean name="defaultMemcachedClient" class="com.google.code.ssm.CacheFactory">
          <property name="cacheClientFactory">
                <bean class="com.google.code.ssm.providers.xmemcached.MemcacheClientFactoryImpl" />
          </property>
          <property name="addressProvider">
                <bean class="com.google.code.ssm.config.DefaultAddressProvider">
                     <property name="address" value="127.0.0.1:11211" />
                </bean>
          </property>
          <property name="configuration">
                <bean class="com.google.code.ssm.providers.CacheConfiguration">
                      <property name="consistentHashing" value="true" />
                </bean>
          </property>
     </bean>
</beans> 
```

# javascript - 如果我使用的是 uniform.default jQuery 插件，如何更改选择器的宽度？

> ID：10200698
> 
> 赞同：0
> 
> 时间：2012-04-17T23:33:07.820
> 
> 标签：javascript, jquery, css

我需要更改单个选择器的宽度，但我遇到了很多问题，因为我使用的是 uniform.default jQuery 插件。

我有一个只有一个数字的选择器，我无法设置这个选择器的宽度真的很令人沮丧。无论如何我可以做到这一点吗？

谢谢，林戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:37:17.863

你的选择器是这样的数字吗？

```
455 { width: 100px; } 
```

没办法。它必须以一个字母为前缀。

# python - os.system：在一种方法中使用多个命令保存 shell 变量

> ID：10200702
> 
> 赞同：0
> 
> 时间：2012-04-17T23:33:25.760
> 
> 标签：python

我在将命令/命令与 os.system 的一个实例一起使用时遇到问题。

不幸的是，我必须使用 os.system，因为我无法控制它，因为我将字符串发送到 os.system 方法。我知道我真的应该为我的案例使用 subprocess 模块，但这不是一个选项。

所以这就是我想要做的。

我有一个如下字符串：

```
cmd = "export BASE_PATH=`pwd`; export fileList=`python OutputString.py`; ./myscript --files ${fileList}; cp outputfile  $BASE_PATH/.;" 
```

然后这个命令像这样被发送到 os.system 模块

```
os.system(cmd) 
```

不幸的是，当我查阅我的日志文件时，我得到的东西看起来像这样

```
os.system(r"""export BASE_PATH=/tmp/bla/bla; export fileList=; ./myscript --files ; cp outputfile  /.;""") 
```

如您所见，BASE_PATH 似乎正在工作，但是当我使用 cp 输出文件 /. 我得到一个空字符串

同样使用我的 fileList 我得到一个空字符串，因为 fileList=`python OutputString.py`应该打印出一个文件列表到这个变量。

我的想法：

这些错误是由于每个命令的新进程造成的吗？因此，我在下一个命令中松开了 BASE_PATH 中的变量。

同样因为我不确定为什么 fileList 是空的。

使用 os.system 和我的命令字符串是否可以解决我的上述问题？

请注意我必须使用 os.system 模块。这是我无法控制的。

# jsp - java.io.IOException：损坏的表单数据：提前结束

> ID：10200703
> 
> 赞同：0
> 
> 时间：2012-04-17T23:33:29.710
> 
> 标签：jsp, glassfish-3

在使用 Oreilly 的多部分类时，我的 Jsp 应用程序出现问题。

问题是，当我在某些机器上运行我的应用程序时，它运行得非常好，但是当我出于某些我不明白的原因尝试在某些服务器上运行它时，它会抛出这个错误：java.io.IOException: Corrupt form data:premature以 com.oreilly.servlet.multipart.MultipartParser.(MultipartParser.java:119) 处的 com.oreilly.servlet.multipart.MultipartParser.(MultipartParser.java:205) 结尾 以上只是正在获取的日志的一部分。

有人告诉我：-为什么该应用程序在某些服务器上运行得很好，而当我尝试从其他服务器运行它时却给我带来了问题？

我的问题有什么可能的解决方案？

我在所有服务器上运行 glassfish server3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:04:38.890

古老的 Oreilly 多部分解析器有一些错误。另请参阅此相关问题以了解[损坏的表单数据：过早结束（已解决）](https://stackoverflow.com/questions/240163/corrupt-form-data-premature-ending-resolved)。而是使用[Apache Commons FileUpload](http://commons.apache.org/fileupload)或仅使用新的 Servlet 3.0 内置`request.getPart()`方法。另请参阅[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:56:34.940

我找到了我的问题的答案。这是我使用的服务器版本 最新的 glassfish 版本有问题，就是这样.. 我为 linux 安装了 Glassfish3，它运行得非常好！

# git - 我可以将 .git 复制到另一个目录吗？

> ID：10200713
> 
> 赞同：11
> 
> 时间：2012-04-17T23:34:51.100
> 
> 标签：git

我继承了一个存储在 CVS 中的项目。之前的开发人员在他的工作目录中有大量未提交的更改，包括删除大量文件，我想检查这些更改。这是我的计划：

1.  cvs 签出 the_project。
2.  遵循[远程 cvs / 本地 git 工作流程](http://undefinedvalue.com/2010/07/02/workflow-remote-cvs-local-git)，使用 the_project 的原始状态初始化 git 存储库。
3.  将新的 .git 复制到另一个工作目录中。
4.  快！所有删除/更改都显示为未分级的差异。

最初看起来它会起作用。我应该担心的任何重大陷阱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T03:04:07.253

我一直在做类似的事情。我使用 GIT 跟踪大型 SVN 项目的多个版本和多个分支。该项目有大约 200 个 SVN 模块，每个模块都位于“src”的子目录中。当我启动 GIT 存储库时，我检查了项目的 v9.4.4，添加了 .gitignore 和 .gitattributes 的 'git init'，添加了 'git add -A' 和 'git commit -m 'v9.4.4'。然后我*将*.git 移出项目并创建了一个*符号链接*。当 v9.4.5 版本发布时，我检查了它，添加了一个符号链接到现在共享的 .git 目录，添加了 .gitignore 和 .gitattributes，执行了 'git add -A' 和 'git commit -m'v9。 4.5'。此时，我有一个从两个目录符号链接的 GIT 存储库。

通过此设置，您可以执行任何不涉及工作目录的 git 操作。因此，对于我的应用程序，'git diff v9.4.4..v9.4.5' 效果很好。当然，您也可以执行涉及索引和工作目录的 git 操作，但是您需要注意该存储库位于您所在版本的正确提交位置。

我也将它用于多个分支。*在这种情况下，使用 'git symbolic-ref HEAD refs/heads/a-branch' 在不*接触工作目录的情况下更改分支至关重要。因此，当我的项目版本 s3 出现时，我做了一个“git branch s3 v9.4.4”，创建了我的 .git 符号链接，做了“git symbolic-ref HEAD refs/heads/s3”，并在它后面加上了“add”和'犯罪。'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:52:58.007

这应该没有问题，但是您可能希望在执行此操作后尝试运行`git fsck --full`以验证数据库中对象的连接性和有效性。相比之下，另请参阅 Stack Overflow 问题[“我可以将 Git 工作副本复制到另一台机器上吗？”](https://stackoverflow.com/questions/2042470/can-i-copy-a-git-working-copy-onto-another-machine "我可以将 Git 工作副本复制到另一台机器上吗？") . 这是一个略有不同的场景，但相对而言具有可比性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:46:51.363

是的，那会奏效。你当然也可以做相反的事情 - 删除除 之外的所有内容`.git`并从其他地方粘贴文件。

# c++ - MergeSort 与链表 - 拆分函数 C++

> ID：10200714
> 
> 赞同：-1
> 
> 时间：2012-04-17T23:34:53.767
> 
> 标签：c++, linked-list, mergesort

我的 MergeSort 类中的拆分函数有问题。它适用于前几个，但后来出现分段错误。我认为这是我的 for 循环并选择了正确的中间节点，但我无法弄清楚。

任何帮助表示赞赏，这是我的代码：

标题：

```
#ifndef MERGE_LIST
#define MERGE_LIST

#include <iostream>
using namespace std;

class mergeList {
    public:
        struct node {
            int data;
            struct node* next;
        };

        mergeList();
        void push( struct node** head_ref, int new_data );
        void printList( struct node * nptr );
        //void merge( struct node** headRef );
        struct node* SortedMerge( struct node* a, struct node* b );
        void merge(struct node** headRef);

    private:
        int size;
        //void merge( struct node** headRef, int s );
        //void split( struct node* headRef, struct node** a, struct node** b, int mid );
        void split(struct node* source, struct node** frontRef, struct node** backRef, int s);
        void merge(struct node** headRef, int s);
};

#endif 
```

来源：

```
#include "mergeList.h"
#include "stdlib.h"

mergeList::mergeList( ) {
    size = 0;
}

void mergeList::push( struct node** head_ref, int new_data ) {

    struct node* new_node = ( struct node* ) malloc(sizeof(struct node));
    new_node->data  = new_data;
    new_node->next = (*head_ref);    
    (*head_ref)    = new_node;
    size++;
}

void mergeList::printList( struct node * nptr ) {

    while( nptr ) {
        cout << nptr->data << " ";
        nptr=nptr->next;
    }
    cout << endl;
}

void mergeList::merge(struct node** headRef) {
    merge( headRef, size);
}

void mergeList::merge(struct node** headRef, int s)
{

    if( s < 2 )
        return;

    struct node* a;
    struct node* b;
    struct node* head = *headRef;

    bool addOne = false;
    int mid = s/2;

    if( s % 2 != 0 )
        addOne = true;  

    cout << "B4 SPLIT!" << endl;
    cout << "AddOne: "  << addOne << endl;
    cout << "s: " << s << endl;

    split(head, &a, &b, s);

    merge(&a, mid);

    //if( addOne )
    //  mid++;

    merge(&b, mid);

    *headRef = SortedMerge(a, b);
}

//Use a pointer to split the list
void mergeList::split(struct node* headRef, struct node** _a, struct node** _b, int s) {

    struct node* a;
    //struct node* b;
    if ( s < 2) {
        *_a = headRef;
        *_b = NULL;
    }
    else {
        a = headRef;

    if( s != 2 ) {
        for( int i = 0; i < s/2; i++ )
            a = a->next;
    }
            *_a = headRef;
            *_b = a->next;
        a->next = NULL;
    }
}

struct mergeList::node* mergeList::SortedMerge( struct node* a, struct node* b ) {

    struct node* result = NULL; 

    if ( a == NULL )
        return b;
    else if ( b == NULL )
        return a;
    if( a->data <= b->data ) {
        result = a;
        result->next = SortedMerge( a->next, b );
    }
    else {
        result = b;
        result->next = SortedMerge( a, b->next );
    }

    return( result );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:42:50.507

您是否在调试器（例如 gdb 或 dbx）中运行以查看它在哪里出现了段错误？

# alfresco - 如何在 Alfresco 中为 Aspect 属性设置默认值？

> ID：10200722
> 
> 赞同：1
> 
> 时间：2012-04-17T23:37:06.903
> 
> 标签：alfresco

如何在 Alfresco 中为 Aspect 属性设置默认值？这会是一个约束还是属性本身有一个属性？

这是我的财产：

```
 <constraint name="ac:Priority_Options" type="LIST">
        <parameter name="allowedValues">
            <list>
                <value>Low</value>
                <value>Medium</value>
                <value>High</value>
            </list>
        </parameter>
    </constraint>

            <property name="ac:propPriority">
                <title>Priority</title>
                <type>d:text</type>
                <multiple>false</multiple>
                <constraints>
                    <constraint ref="ac:Priority_Options" />
                </constraints>
            </property> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:58:48.990

如[附加属性功能](http://wiki.alfresco.com/wiki/Data_Dictionary_Guide#Additional_Property_Capabilities)中所述：

```
 <property name="ac:propPriority">
            <title>Priority</title>
            <type>d:text</type>
            <multiple>false</multiple>
            <default>my default value</default> <!-- !! -->
            <constraints>
                <constraint ref="ac:Priority_Options" />
            </constraints>
        </property> 
```

# kohana - Kohana 3.2 路线::get

> ID：10200726
> 
> 赞同：0
> 
> 时间：2012-04-17T23:37:25.577
> 
> 标签：kohana, kohana-3.2

我正在尝试在循环内的视图内的 kohana 中添加简单的链接。

这是我的代码：

```
echo HTML::anchor(Route::get('parent')->uri(array('id' => $parent->id)), HTML::chars($parent->email)) 
```

现在这会返回一个指向 root 的链接，因为

```
Route::get('parent')->uri(array('id' => $parent->id) 
```

返回一个空字符串。

现在，如果我将 Route::get 修改为：

```
Route::get('parent')->uri(array(
                      'controller' => 'parent' , 
                      'action'     => 'index'  , 
                      'id'         =>  $parent->id)) 
```

我得到正确的链接。

问题：为什么 Kohana 无法获得正确的链接，因为我知道在我的引导程序中我有以下内容：

```
Route::set('parent', '(<controller>(/<action>(/<id>)))')
->defaults(array(
'controller' => 'parent',
'action'     => 'index',
)); 
```

那 : Route::get('parent') 返回：

```
: object(Route) = 
  _callback: undefined = NULL
  _uri: string = "(<controller>(/<action>(/<id>)))"
  _regex: array = 
  _defaults: array = 
    controller: string = "parent"
    action: string = "index"
  _route_regex: string = "#^(?:(?P<controller>[^/.,;?\\n]++)(?:/(?P<action>[^/.,;?\\n]++)(?:/(?P<id>[^/.,;?\\n]++))?)?)?\$#uD" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:52:22.387

由于 Kohana 3.2 文档 (http://kohanaframework.org/3.2/guide/api/Route#uri) `Route::uri() method Generates a URI for the current route based on the parameters given.`。所以如果你想让它工作，你必须定义所有的路由参数。

# java - 在 Java 中，每次我向 JPanel 添加多个内容时，第二个内容不会创建？

> ID：10200728
> 
> 赞同：3
> 
> 时间：2012-04-17T23:37:33.083
> 
> 标签：java, swing, jframe, jpanel, jbutton

我创建了一个 JPanel 并添加了一些带有侦听器的简单按钮。然后我决定将图像添加到面板的背景中，因此我将 JPanel 切换为 ImagePanel。这些按钮在 JPanel 上工作，但现在我为要显示的背景图像添加了一堆代码，按钮不再显示。我没有更改任何按钮添加代码，所以我很困惑为什么按钮不再显示。这也发生在我单独的 GameFrame 类中。我在面板中添加了 2 个矩形组件，然后添加了 3 个按钮。对于该面板，仅显示按钮，尽管矩形在添加按钮之前工作。每个面板只能有一种类型的 JComponent 吗？我真的不明白它为什么这样做。感谢您的时间。

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TitleFrame extends JFrame
{
    private ImagePanel panel;
    private JButton mage;
    private JButton rogue;
    private JButton warrior;
    private Image image;

    public TitleFrame()
    {
        JFrame frame = new JFrame();

        frame.setSize(1024, 768);
        frame.setTitle("Title Screen");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        createMageButton();
        createRogueButton();
        createWarriorButton();
        ImagePanel panel = new ImagePanel(new ImageIcon("C:/Users/Derek Reitz/Documents/Eclipse Projects/GameApp/src/background.jpg").getImage());
        panel.add(mage);
        panel.add(rogue);
        panel.add(warrior);
        panel.paintComponent(frame.getGraphics());
        frame.getContentPane().add(panel);
    }

    private void createRogueButton() {
        rogue = new JButton("Select Rogue");

        class AddButtonListener implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                moveToNextFrame('r');
            }
        }

        ActionListener listener = new AddButtonListener();
        rogue.addActionListener(listener);
    }

    private void createWarriorButton() {
        warrior = new JButton("Select Warrior");

        class AddButtonListener implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                moveToNextFrame('w');
            }

        }

        ActionListener listener = new AddButtonListener();
        warrior.addActionListener(listener);
    }

    private void createMageButton() {
        mage = new JButton("Select Mage");

        class AddButtonListener implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                moveToNextFrame('m');
            }
        }

        ActionListener listener = new AddButtonListener();
        mage.addActionListener(listener);
    }

    public void moveToNextFrame(char c) 
    {
        GameFrame game = new GameFrame(c);
    }

    class ImagePanel extends JPanel 
    {

        private Image img;

        public ImagePanel(Image img) {
            this.img = img;
            Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
            setPreferredSize(size);
            setMinimumSize(size);
            setMaximumSize(size);
            setSize(size);
            setLayout(null);
        }

        public void paintComponent(Graphics g) {
            g.drawImage(img, 0, 0, null);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T23:53:49.317

您需要使用[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)。

然后，您应该能够将 ImagePanel 和按钮添加到 contentPane 并让它们全部布局并可见。

尝试以下操作：

```
JFrame frame = new JFrame();
frame.setTitle("Title Screen");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

createMageButton();
createRogueButton();
createWarriorButton();

ImagePanel panel = new ImagePanel(new ImageIcon(".../background.jpg").getImage());
panel.setLayout(new FlowLayout());

panel.add(mage);
panel.add(rogue);
panel.add(warrior);

frame.getContentPane().add(panel);
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T23:40:14.813

您设置为 layout `null`。这是接受组件的绝对位置的特殊情况。所以使用`setBounds(x, y, width, height)。最好还是使用真实的布局。

另一句话，您可以从类路径中获取图像，例如从生成的 .jar 文件中获取图像）：

```
URL url = getClass().getResource("/background.jpg");
... new ImageIcon(url); 
```

# ios - 是否可以对对象进行分组？

> ID：10200729
> 
> 赞同：0
> 
> 时间：2012-04-17T23:37:46.770
> 
> 标签：ios, cocos2d-iphone, sprite, layer

Cocos2d 中有没有一种方法可以让一组对象（例如精灵、标签和菜单）一起执行一个动作，只需要几行代码，这样您就不需要运行动作了每个不同的对象？我说的不是层，而是层内的一个组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:24:42.780

试一试

```
CCNode *group = [CCNode node];
[group addChild:whatever];
[group addChild:whateverElse];

group.position = newPosition; // will move the group as a block.
group.visible=YES: 
```

如果您对 CCMoveTo 或 CCMoveBy 等组运行操作，这些操作会设置位置。因此，您可以将一些动作传授给小组，而不是单独传授给每个孩子。对于某些属性，您可能必须将 CCNode 子类化并使用您自己的逻辑在子节点中传播（例如不透明度）。

# shell - 如何使用 shell 从文件中删除重复条目

> ID：10200731
> 
> 赞同：1
> 
> 时间：2012-04-17T23:38:05.220
> 
> 标签：shell

我有一个格式为：

```
0000000540|Q1.1|margi|Q1.1|margi|Q1.1|margi
0099940598|Q1.2|8888|Q1.3|5454|Q1.2|8888    
0000234223|Q2.10|saigon|Q3.9|tango|Q1.1|money 
```

我正在尝试删除出现在同一行的重复项。

所以，如果一条线有

```
0000000540|Q1.1|margi|Q1.1|margi|Q1.1|margi 
```

我会喜欢的

```
0000000540|Q1.1|margi 
```

如果线路有

```
0099940598|Q1.2|8888|Q1.3|5454|Q1.2|8888 
```

我会喜欢它像

```
0099940598|Q1.2|8888|Q1.3|5454 
```

我想在一个 shell 脚本上执行此操作，该脚本接受一个输入文件并输出没有重复的文件。

提前感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:31:41.980

这应该可以，但对于大文件可能效率不高。

```
awk '
    {
        delete p;
        n = split($0, a, "|");

        printf("%s", a[1]);

        for (i = 2; i <= n ; i++)
        {
                if (!(a[i] in p))
                {
                    printf("|%s", a[i]);
                    p[a[i]] = "";
                }
        }

        printf "\n";
    }
' YourFileName 
```

# python - Django Deploy using Heroku - [Errno 2] 没有这样的文件或目录

> ID：10200732
> 
> 赞同：8
> 
> 时间：2012-04-17T23:38:28.710
> 
> 标签：python, django, heroku

将 repo 推送到 heroku master 后，我收到此错误（[Errno 2] No such file or directory）。这是我的日志。

```
2012-04-17T18:24:53+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2]     No such file or directory

2012-04-17T18:24:54+00:00 heroku[web.1]: Process exited with status 2

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from starting to crashed

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from crashed to created

2012-04-17T18:24:54+00:00 heroku[web.1]: State changed from created to starting

2012-04-17T18:24:57+00:00 heroku[web.1]: Starting process with command python /test/project/manage.py runserver 0.0.0.0:4473 --noreload 2012-04-17T18:24:57+00:00 app[web.1]: python: can't open file '/test/project/manage.py': [Errno 2] No such file or directory 
```

我的 Procfile 如下所示：

```
web: python /test/project/manage.py runserver 0.0.0.0:$PORT --noreload 
```

我不知道为什么它无法打开文件。当我使用我的开发服务器时，它可以正常打开。有任何想法吗？谢谢阅读。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T16:24:43.923

您在 Procfile 中的当前设置引用了 Heroku 上不存在的绝对路径“/test/project/manage.py”。'/test/ 是您正在运行的实例的根目录并且不正确。您应该首先将其更改为相对路径，这可能类似于：

```
web: python project/manage.py runserver 0.0.0.0:$PORT --noreload 
```

如果这不起作用，您可以通过运行来探索项目的位置：

```
heroku run bash 
```

这应该将您置于“/app”中，从这里您可以看到启动项目的路径是什么。

由于您的初始推送可能无法启动该流程，您可能需要扩展 Web 流程。然后你可以这样做：

```
heroku scale web=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:05:34.740

您可以附加`ls`到 heroku 以找出文件系统的实际结构。

```
> heroku run ls /
Running ls / attached to terminal... up, run.1
app  dev  home  lib64       mnt   sbin  usr
bin  etc  lib   lost+found  proc  tmp   var 
```

可能是他们将您的应用程序包装在一个`app`目录中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-25T00:56:49.757

您可以执行类似的操作来更改环境变量（例如，如果这是错误的来源，请将其添加到您的 wsgi.py 文件中）：

```
os.environ["DJANGO_SETTINGS_MODULE"] = "myblog.settings"                                                                
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myblog.settings") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:10:52.683

尝试使用[os.path](http://docs.python.org/library/os.path.html#os.path.join)加入路径的元素。顺便说一句，您是否尝试将 ProcFile 更改为从工作人员读取？`python hellodjango/manage.py`

稍后编辑：

尝试运行这三个命令以使 heroku 成为大师：

*   `pip install -r ./requirements.txt`

*   `foreman start`

*   `heroku create mempy-demo --stac=cedar`

*   git push heroku 大师

现在测试一个简单的“Hello World”：

```
$ curl mempy-demo.herokuapp.com 
```

# apache-flex - 是否可以像 Flash Builder 分析器一样在 Flash 中跟踪对象之间的引用？

> ID：10200736
> 
> 赞同：0
> 
> 时间：2012-04-17T23:39:09.573
> 
> 标签：apache-flex, memory, actionscript, garbage-collection, profiling

我试图在一个相当大的 Flex 应用程序中查找内存泄漏，并且我厌倦了使用 Flash Builder 提供的微不足道的工具。

具体来说，我想使用 Flash Builder 的工具似乎可以访问的相同信息来分析内存中对象的关系。即哪些对象在内存中，哪些对象有引用，哪些有引用。鉴于这些信息，我想构建一个有向图，其节点是活动对象，其边是从一个对象到另一个对象的引用。从那里我想搜索[dominators](http://en.wikipedia.org/wiki/Dominator_%28graph_theory%29)，这应该可以很好地指示哪些对象正在泄漏。

我相信 Eclipse 为 Java 做了类似的事情。

不幸的是，Flash Builder 只允许以只能由 Flash Builder 解析的二进制形式导出其捕获的分析数据。我没有尝试对他们的输出进行逆向工程，而是决定尝试自己捕获数据，因为他们在[flash.sampler.*](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/sampler/package.html)包中提供了他们的分析 API。

到目前为止，我已经设法收集了当前存在于内存中的对象，获取它们的分配跟踪，以及对我可以检查的对象的引用，这是我最需要的。但我无法弄清楚 FB 探查器如何跟踪对 GC 根的反向引用。我能看到的唯一方法是检查内存中的每个对象，并为每个对象检查其每个属性，依此类推，直到找到一个指向归类为“根”级别的对象的链。但由于我只能关注公开可见属性的引用，我完全有可能会错过许多阻止垃圾收集的引用。

Flash Builder 分析器是如何做到的？

我怀疑它不只是使用 sampler.* API 来捕获信息，而是通过调试器连接执行的查询来补充它，这可能超出了我的工作范围。但是在没有任何方法可以验证的情况下，我希望只使用采样器 API 是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T01:58:06.663

实际上在恕我直言，如果 Flash (Flex) Builder 的内存/性能工具是*微不足道*的，那么你就没有正确使用它。了解可用工具的关键 - 自 4.0 SDK 以来就可用，并且我一直将它用于我被分配为“运行时分析人员”的每个项目。

**实时视图：**
我们都知道这个，它为您提供了当前可用内容的“实时”视图。虽然当前实例计数很有用，但更有用的是累积。这有助于追踪创建*太多*对象的错误方法。

**徘徊对象视图：**
你可能没有使用这个，但相信我一旦你这样做了，你就不会回去了。这样有助于明确定义小屏幕/应用程序状态（例如 1\. 起点，2\. 创建对话框的能力 3\. 与 1 状态相同的结束点）。在您的应用程序中，到达您要测试的地方。然后点击**内存快照**功能——“彩色线条图标”。现在在您的应用程序中，运行第 2 步和第 3 步。返回分析器，然后再次单击它。在这里，您现在可以终止或暂停您的应用程序。选择两个内存配置文件并单击游荡对象功能 - “绿色图标”。从理论上讲，这个列表将是空的，但它不会。这显示了哪些对象已标记为 [sweep] 但未标记为 [reap]'

D-单击任何对象，这将为您提供一个详细视图，其中包含仍然保留在该对象上的每个引用的列表。我现在给你一个提示，如果你还没有在你的应用程序中创建一个解构过程（例如 IDestroyable 接口），现在停止并返回并执行此操作。**您必须将 null 分配给不是复杂原语的每个对象。**这意味着每个类、每个数组、向量、事件监听器等等。

据我所知，采样器包是该工具唯一使用的东西 - 毕竟该工具在调用时不会将任何代码注入您的应用程序。这是所有对象与 NewObjectSample 和 DeletedObjectSample 的比较，并查看返回原型链的 getSavedThis()（这应该返回一个对象，您可以在其中调用 getSavedThis() 等等）。

[http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7edf.html](http://help.adobe.com/en_US/flashbuilder/using/WS6f97d7caa66ef6eb1e63e3d11b6c4d0d21-7edf.html)

希望这可以帮助。

# java - Java - 对非静态字段列表进行静态引用

> ID：10200740
> 
> 赞同：5
> 
> 时间：2012-04-17T23:39:58.643
> 
> 标签：java, class, static, instantiation, private-members

我刚刚进行了试验，发现当我运行滚动代码时，它无法编译，我不知道为什么。

我的 IDE 说“无法对非静态字段列表进行静态引用”，但我真的不明白这是什么或为什么。它还适用于什么，即：它也只是私有变量和或方法吗？为什么？：

```
public class MyList {

    private List list;

    public static void main (String[] args) {
        list = new LinkedList();
        list.add("One");
        list.add("Two");
        System.out.println(list);
    }

} 
```

但是，当我将其更改为以下内容时，它确实有效：

```
public class MyList {

    private List list;

    public static void main (String[] args) {
        new MyList().exct();
    }

    public void exct() {
        list = new LinkedList();
        list.add("One");
        list.add("Two");
        System.out.println(list);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:48:34.507

静态字段是类的所有实例共享的字段。
非静态/成员字段特定于类的实例。

例子：

```
public class Car {
  static final int tireMax = 4;
  int tires;
} 
```

在这里，任何给定的汽车都可以有任意数量的轮胎是有道理的，但所有汽车的最大数量都是相同的。
如果我们使`tireMax`变量可变，修改该值将意味着所有汽车现在都可以拥有更多（或更少）轮胎。

您的第二个示例有效的原因是您正在检索`list`新的 MyList 实例。在第一种情况下，您处于静态上下文而不是特定实例的上下文中，因此`list`无法访问该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:46:41.807

在第一个示例中，您从静态内容调用非静态字段，这是不可能的。在第二个中，您在 MyList 对象上调用 ext 函数，该对象可以访问该字段。

# alfresco - 是否可以在 Alfresco Share 中的某个方面的属性中添加描述或帮助文本？

> ID：10200745
> 
> 赞同：0
> 
> 时间：2012-04-17T23:40:40.553
> 
> 标签：alfresco

是否可以在 Alfresco Share 中的某个方面的属性中添加描述或帮助文本？我无法更改标题，因为它需要太多文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:46:59.610

在定义类型或方面时，您可以设置标题和描述。这些通常会显示在表单、共享和资源管理器中，并且通常是向用户和开发人员解释您的模型的最简单方法。

要查看它的使用情况，请查看 Alfresco 中的**音频：音频**方面，最新版本[可在此处获得](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/repository/config/alfresco/model/contentModel.xml)。您会看到一些方面属性既有标题又有描述。如果您将 MP3 上传到 Alfresco 4，并在 Share 中编辑它的元数据，您应该会看到该信息显示。

不过，作为一般指南，您的方面应该类似于：

```
 <aspect name="test:thing">
     <title>Testing Content</title>
     <description>Aspect applied to mark content as being for testing use</description>
     <properties>
        <property name="test:edition">
           <title>Test Edition</title>
           <description>Which testing edition does this belong to?</description>
           <type>d:int</type>
        </property>
        <property name="test:notes">
           <title>Test Notes</title>
           <description>Notes for using this content in testing</description>
           <type>d:text</type>
        </property>
     </properties>
  </aspect> 
```

如果您打算在多语言系统中使用您的类型或方面，那么您应该查看[模型本地化指南](http://wiki.alfresco.com/wiki/Data_Dictionary_Guide#Model_Localization)以获取有关如何从可以本地化的属性包中指定名称、标题和描述的信息

# php - URL 有太多重定向。在重定向数量减少之前，Facebook 将无法抓取此 URL

> ID：10200749
> 
> 赞同：3
> 
> 时间：2012-04-17T23:41:19.523
> 
> 标签：php, facebook, exception, facebook-graph-api, facebook-fql

我正在使用 PHP 库运行 FQL 查询。它在一个应用程序中被大量使用并且工作正常。但是，对于一个用户（内部 QA 测试人员），它会抛出一个奇怪的 FB 异常，我找不到任何文档。异常消息是：

“URL 有太多重定向。在重定向数量减少之前，Facebook 将无法抓取此 URL。”

鉴于查询是：

```
$multiQuery = "info":"SELECT name, pic, sex, activities, interests, quotes, about_me, profile_blurb, music, tv, movies, books, games, sports, favorite_teams, favorite_athletes, timezone, locale, first_name FROM user WHERE uid = me()",
"likes":"SELECT user_id, object_id, object_type FROM like WHERE user_id = me() LIMIT 350",
"stream":"SELECT post_id, created_time, permalink, description, message, description_tags FROM stream WHERE source_id = me() AND filter_key = 'owner' AND created_time > 946684800 LIMIT 350",
"links":"SELECT link_id, created_time, owner_comment, picture FROM link WHERE owner = me() LIMIT 350",
"photos":"SELECT created, caption, src FROM photo WHERE aid IN (SELECT aid FROM album WHERE owner = me() LIMIT 100) LIMIT 350",
"myPhotosLiked":"SELECT object_id, user_id FROM like WHERE object_id in (SELECT object_id FROM photo WHERE aid IN (SELECT aid FROM album WHERE owner = me() LIMIT 50) LIMIT 100) LIMIT 350",
"questions":"SELECT question, created_time FROM question where owner = me() LIMIT 350"

$results = $facebook->api('fql/?q=' . urlencode($multiQuery));
// $facebook is the Facebook PHP library reference 
```

有人遇到过这个吗？

更新：感谢大家的建议。当然，现在 QA 人员不能再复制了。这是它第二次发生，而且两次都只是使用他的 FB 帐户（机器、浏览器无关紧要）并且持续了大约 24-48 小时，然后就自行消失了。我只需要等待它再次弹出来测试这些建议。

更新 2：好的 - 问题再次出现。我让测试人员在多个网络和计算机/设备上试用它。每次都出现同样奇怪的错误。不过要澄清一下，这只发生在他的 FB 帐户上。如果他尝试任何其他帐户，它就可以正常工作。也许 FB 只是对这个家伙帐户有个人不满。有人遇到过与个人帐户相关的类似错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T03:10:55.487

我曾经抛出过这个异常。虽然我没有使用 FQL。我经历了大量的废话和黑客攻击，没有任何快乐地修复。我只是无法弄清楚是什么原因造成的。结果发现我的应用程序的一部分（广告的第二个 iframe）陷入了重定向循环。

我不知道这是否会有所帮助。但我想我还是会分享。

# android - Eclipse 不会将项目识别为库 (ActionBarSherlock/ViewPagerIndicator)

> ID：10200751
> 
> 赞同：17
> 
> 时间：2012-04-17T23:41:27.073
> 
> 标签：android, eclipse, actionbarsherlock, android-viewpager, android-library

我正在尝试为我的项目设置[ActionBarSherlock](http://actionbarsherlock.com/)和[ViewPagerIndicator](http://viewpagerindicator.com/)库，但我似乎遇到了一些问题。我早些时候给 Jake Wharton（开发人员）发了几条关于它的消息，并得到了一些回复，但没有得到任何答复——我认为他正忙于其他一些事情。

我的问题是，对于 VPI 和 ABS ![对于 VPI 和 ABS](../Images/512eabe80a36882187f4709ab0fe19c4.png)

两个库都没有任何错误地打开，并且我根据需要使用编译器版本 1.6。

有趣的是，如果我加载提供的示例 - 它们工作正常并链接到他的库；但是当我将库添加到我的项目中时 - 会发生上述情况。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T23:18:57.550

存储实际库项目的位置无关紧要，只要您使用相对链接来引用它即可。查看[图书馆项目 - 开发注意事项](http://developer.android.com/guide/developing/projects/index.html#considerations)：

> *   ### 图书馆项目存放地点
>     
>     
>     
>     只要应用程序项目可以通过相对链接引用库项目，就应该在哪里存储库项目相对于依赖的应用程序项目没有具体要求。重要的是主项目可以通过相对链接引用库项目。

您应该始终使用 Eclipse ADT 插件来选择和设置 Library Project Reference，即右键单击项目 -> 属性 -> Android -> 添加，然后在打开的项目选择窗口中，选择此处的库项目列表（因为你应该将它们导入到与主项目相同的 Eclipse 工作区中）。这将使用相对路径将 android.library.reference 添加到 project.properties 中，并在 Android 首选项窗口中显示相对路径：

```
android.library.reference.2=../../../../../Documents and Settings/yorkw/Desktop/JakeWharton-Android-ViewPagerIndicator-f09acb0/library 
```

如果您使用 project.properties 中的绝对路径直接更改它，如下所示：

```
android.library.reference.1=C:\\Documents and Settings\\yorkw\\Desktop\\JakeWharton-Android-ViewPagerIndicator-f09acb0\\library 
```

然后在 Eclipse 刷新您的项目后，您会得到问题中描述的确切错误，请参见下面的屏幕截图： ![在此处输入图像描述](../Images/40b3d54fa61ffa7acf1e78fd07cce35b.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T14:49:03.430

导入库时，请确保勾选*“复制项目 int 工作区”*复选框。库项目需要在同一个工作区中才能工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-24T10:38:48.073

再次删除并导入项目和lib。构建lib项目，将lib添加到项目中，仍然显示错误..重命名lib项目。这对我有用....

# mfc - VS2005 nafxcw.lib(appcore.obj)：错误 LNK2001：无法解析的外部符号 ___argv

> ID：10200753
> 
> 赞同：2
> 
> 时间：2012-04-17T23:41:33.187
> 
> 标签：mfc, release-mode

当我构建具有静态库输入 (.lib) 的项目时出现此错误。问题是我可以在调试中成功运行项目，但不能在发布模式下运行。它显示错误为...。

```
nafxcw.lib(appcore.obj) : error LNK2001: unresolved external symbol ___argv
nafxcw.lib(appcore.obj) : error LNK2001: unresolved external symbol ___argc 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:57:58.980

[Microsoft 的 KB Q166504](http://support.microsoft.com/kb/166504)可能会为您提供答案：

> 在构建 MFC 应用程序或 DLL 时，您需要确保所有相关库是同步的：
> 
> *   如果您选择在共享库中使用 MFC 构建应用程序，则还必须使用 C 运行时 (MSVCRT.DLL) 的动态版本。
> *   如果您选择构建调试 MFC 应用程序，那么您还必须使用 C 运行时的调试版本。同样，发布 MFC 应用程序必须使用 C 运行时的非调试版本。
> *   如果您的调试 MFC 应用程序使用扩展 DLL，则每个扩展 DLL 也必须是调试版本。同样，发布应用程序必须匹配发布扩展 DLL。C 运行时库的类型是固定的。扩展 DLL 和使用它们的应用程序都必须使用共享库中的 MFC，这需要 C 运行时的动态 DLL 版本。
> *   如果您要链接到也链接到 MFC 或 CRT 的任何静态库，则应确保每个静态库与应用程序共享相同的属性（调试/发布、CRT 静态/动态）。
> 
> 解析度
> 
> 要更改应用程序或 DLL 使用的 C 运行时库的类型，请转到构建/项目设置属性表并切换到 C/C++ 选项卡。在 C/C++ 页面上，选择“代码生成”类别。更改“使用运行时库”列表框的值。请注意使每个配置都具有特定性；更改此值时，应仅选择一种配置，例如“Win32 (80x86) 调试”。
> 
> *   调试、共享库 MFC 应用程序 - “调试多线程 Dll”。
>     
>     
> *   发布、共享库 MFC 应用程序——“多线程 Dll”。
>     
>     
> *   调试、静态库 MFC 应用程序 - “调试多线程”。
>     
>     
> *   发布、静态库 MFC 应用程序 - “多线程”。

# java - 如何成功修改 JFrame（及其所有组件）的绘制方式？

> ID：10200763
> 
> 赞同：2
> 
> 时间：2012-04-17T23:42:55.800
> 
> 标签：java, swing, window, scale, repaint

我正在尝试在 java 的 swing 库中实现一个简单的窗口比例。目标只是将窗口的高度和宽度加倍，并按比例绘制窗口及其每个组件。

这是我正在使用的代码示例：

```
public class MyWindow extends JFrame {

...

public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    g2d.scale(2,2);
    super.paint(g);
}
} 
```

此窗口中每个我的组件的位置和大小是使用 setBounds 手动设置的，窗口布局为空。

当我实际运行程序时，窗口的第一次绘制似乎成功了——一切都调整了合适的大小。然而，组件随后的每次重绘既不是两倍大小，也不是在正确的位置。这就是我的意思：

![游戏视图](../Images/3be7edad6ad464cb8b16b4c49743493b.png)

如您所见，具有手动调用重绘的组件（动画位）的屏幕部分似乎没有使用 JFrame 的 Graphics2D 比例。我查看了源代码，并尝试重载其他一些方法（主要是更新和重绘），但它们似乎都产生了相同的结果。我进一步查看了组件和容器类的paint和repaint方法，但它们似乎都调用了它们父类的指定repaint。我的 Window 不应该是“最大”的父母吗？如果是这样，为什么这些重绘调用没有到达我的窗口？

因此，我对您的最大问题是：子组件调用父组件的哪些重绘方法？为什么调用没有正确路由到我的 JFrame 的绘制调用？还有其他（更好的）方法可以缩放我的窗口吗？任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:08:34.123

正如[*在 AWT 和 Swing 中的绘画：绘画方法中*](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#callbacks)所讨论的，“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`”。一种常见的方法是通过覆盖（或子类）来创建*视图*`paintComponent()`，如下[所示](https://stackoverflow.com/a/3256941/230513)。让你的*视图*监听游戏*模型的变化，正如*[这里](https://stackoverflow.com/a/3072979/230513)所讨论的。`JComponent`

 **`SwingUtilities.updateComponentTreeUI()`应该用于更改[外观](http://java.sun.com/products/jfc/tsc/articles/architecture/#pluggable)，而不是更新视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:23:05.423

利用

```
javax.swing.SwingUtilities.updateComponentTreeUI(parentComponent); 
```

当您需要确保`parentComponent`正确更新所有 s 子组件的外观时。**

# kohana - 对于 Kohana 3.2 中默认规则未捕获的控制器，Bootstrap 需要额外的路由

> ID：10200764
> 
> 赞同：1
> 
> 时间：2012-04-17T23:43:01.567
> 
> 标签：kohana, kohana-3, kohana-3.2

我的 Kohana 3.2 项目中有多个控制器，其中最初的路由：

```
Route::set('default', '(<controller>(/<action>(/<id>)))')
->defaults(array(
'controller' => 'user',
'action'     => 'index',
)); 
```

它适用于我所有的新控制器（当我添加一个新文件并转到：**域/控制器**时，它就像一个魅力。

现在对于一个名为 parents 的特定控制器，我必须在我的引导程序中添加新行：

```
Route::set('parents', '(<controller>(/<action>))')
->defaults(array(
'controller' => 'parents',
'action'     => 'index',
)); 

Route::set('parent', '(<controller>(/<action>(/<id>)))')
->defaults(array(
'controller' => 'parent',
'action'     => 'index',
)); 
```

我试图同时访问：**/parents/**和**/parent/index/id**并且在没有`Route::set`到位时都产生了错误。

如果没有这些行，我总是会遇到以下错误：

> 无法找到匹配 uri 的路线

或者

> 请求的路由不存在

我该怎么做？对于我添加的每个控制器，我是否需要在我的引导程序中定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:44:51.620

我最好为所有这些使用一条路线：

```
Route::set('p', '(<controller>(/<action>(/<id>)))')

->defaults(array(
'action'     => 'index',
)); 
```

如果你打电话`/parents/father`- 你去`parents`控制器，如果你打电话，`/parent/father`你去`parent`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:23:40.653

实际上，在您的情况下，您只需要使用默认路由即可。

```
Route::set('default', '(<controller>(/<action>(/<id>)))')
->defaults(array(
     'controller' => 'user',
     'action'     => 'index',
)); 
```

首先，Kohana 尝试匹配您的正则表达式模式 [((/(/)))]。这将匹配 url：用户、用户/删除、用户/删除/1、父母、父母/视图、父母/视图/2 等。

如果 Kohana 无法找到该操作，它将默认根据您的默认数组规则进行索引。如果 Kohana 无法找到控制器（这基本上意味着没有通过），那么它将使用控制器。在最后一种情况下，它也会默认操作，因为我们无法在不传递正则表达式中的控制器的情况下传递操作（请参阅括号首先需要控制器，然后是操作，然后是 id）。

因此，以下示例将通过此默认模式进行路由：

```
 URL: /users  
 Controller: users  
 Action: index (picked default)  

 URL: /users/kill/1  
 Controller: users    
 Action: kill
 Id: 1

 URL: /parents  
 Controller: parents  
 Action: index (picked default)    

 URL: /parent/view
 Controller: parent  
 Action: view 
```

最佳做法是将此路由保留为应用的最后一个路由（基本上是默认路由并捕获所有路由），如果您的 url 与默认模式不匹配，请添加它们。

# java - 使用 StringTemplate 生成条件代码

> ID：10200765
> 
> 赞同：2
> 
> 时间：2012-04-17T23:43:31.723
> 
> 标签：java, stringtemplate

在我的项目中，我有一个这样的类`Device`：

```
public class Device {
    private Set<String> abilities = new HashSet<String>();

    public Device(Set<String> abilities) {
        this.abilities = abilities;
    }

    public Set<String> getAbilities() {
        return abilities;
    }
} 
```

我正在初始化这个`Device`类：

```
Set<String> device1Abilities = new HashSet<String>();
device1Abilities.add("BadgeReader"); 
device1Abilities.add("TemperatureSensor");   
device1Abilities.add("xyz");
Device d1 = new Device(device1Abilities); 
```

在我的`stringTemplateFile`中，我正在使用

```
$device.abilities :{ sc | abilities.add("$sc$"); }$ 
```

这将生成以下代码=>

```
abilities.add("BadgeReader");
abilities.add("TemperatureSensor");
abilities.add("xyz"); 
```

现在，我的要求是-----我不想生成这行代码：

```
abilities.add("xyz"); 
```

我应该在什么条件下指定

```
 $device.abilities :{ sc | abilities.add("$sc$"); }$ 
```

这样它就不会生成那条线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:52:51.407

该计算确实属于模型，因此您应该对传递给模板的列表进行过滤。模板不应该确定要显示哪些数据。它应该显示您的模型说它应该显示的数据。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:02:26.863

见[这里](http://www.antlr.org/wiki/display/ST4/Templates)。您正在使用匿名子模板`abilities.add("$sc$");`。相反，您可以使用带有 sc 作为参数的模板调用。在那里你可以测试`"xyz"`。*虽然也许有更多 StringTemplate 经验的人知道更短的符号。*

# php - 解析错误：语法错误，意外的 T_STRING .. 无法查明错误

> ID：10200766
> 
> 赞同：-2
> 
> 时间：2012-04-17T23:43:49.217
> 
> 标签：php, parsing

我似乎无法摆脱这个错误-

解析错误：语法错误，第 154 行 /home/content/97/9225097/html/wp-content/themes/grisaille/functions.php 中的意外 T_STRING

*编辑：我尝试完全删除第 154 行，但仍然收到完全相同的错误*

**完整的functions.php：**

```
<?php

if ( ! isset( $content_width ) )
    $content_width  = '590';

/**
* Add Menu Support
**/

add_theme_support('automatic-feed-links');
register_nav_menu('main', 'Main Nav');

/**
* Add editor style - recommended according to Theme-Check
**/
add_editor_style('editor-style.css');

/**
* Add custom background with custom background colour fix 
* as shown here: http://devpress.com/blog/custom-background-fix-for-theme-developers/
**/

add_custom_background( 'grisaille_custom_background_callback' );

function grisaille_custom_background_callback() {

    /* Get the background image. */
    $image = get_background_image();

    /* If there's an image, just call the normal WordPress callback. We won't do anything here. */
    if ( !empty( $image ) ) {
        _custom_background_cb();
        return;
    }

    /* Get the background color. */
    $color = get_background_color();

    /* If no background color, return. */
    if ( empty( $color ) )
        return;

    /* Use 'background' instead of 'background-color'. */
    $style = "background: #{$color};";

?>
<style type="text/css">body { <?php echo trim( $style ); ?> }</style>
<?php

}

/**
* Add custom header
**/

define('HEADER_TEXTCOLOR', '334759');
define('HEADER_IMAGE', ''); // %s is the template dir uri
define('HEADER_IMAGE_WIDTH', 960); // use width and height appropriate for your theme
define('HEADER_IMAGE_HEIGHT', 200);

// gets included in the site header

function grisaille_header_style() {

    ?><style type="text/css">
        #site-title {
            background: url(<?php header_image(); ?>) 0 0 no-repeat;
            min-height: <?php echo HEADER_IMAGE_HEIGHT; ?>px;
            margin: 20px 0;          
        }
        #site-title h1 a {
            color:#<?php header_textcolor(); ?> ;
            min-height: <?php echo HEADER_IMAGE_HEIGHT; ?>px;
        }
        #site-description {
            color:#<?php header_textcolor(); ?> ;
        }
        <?php if ( 'blank' == get_header_textcolor() ) { ?>
        #site-title h1 {
            padding: 0;
        }
        #site-title h1 a  {
            display:block;
            text-indent:-99999px;
        }
        #site-description {
            display: none;
            text-indent:-99999px;
        }

<?php } ?>
</style>
<?php
}
// gets included in the admin header
function grisaille_admin_header_style() {
    ?>
        <style type="text/css">
            @font-face {
            font-family: 'WoodenNickelBlackRegular';
    src: url('<?php echo get_template_directory_uri(); ?>/type/WOODENNI-webfont.eot?') format('eot'),
         url('<?php echo get_template_directory_uri(); ?>/type/WOODENNI-webfont.woff') format('woff'),
         url('<?php echo get_template_directory_uri(); ?>/type/WOODENNI-webfont.ttf') format('truetype'),
         url('<?php echo get_template_directory_uri(); ?>/type/WOODENNI-webfont.svg#webfontDYhQeecV') format('svg');
    font-weight: normal;
    font-style: normal;
}

        #headimg h1 {
            margin-bottom: 0;
        }
        #headimg h1 a{
            font:80px WoodenNickelBlackRegular, "Times New Roman", Times, serif;
            padding-left: 30px;
            text-transform:uppercase;
            text-decoration:none;
            width: <?php echo HEADER_IMAGE_WIDTH; ?>px;
            height: <?php echo HEADER_IMAGE_HEIGHT; ?>px;
        }
        #desc {
            font:26px  Geneva, Verdana, sans-serif;
            padding-left: 30px;
        }
    </style><?php
}
add_custom_image_header('grisaille_header_style', 'grisaille_admin_header_style');

/**
* Change Excerpt length
**/
function grisaille_new_excerpt_length($length) {
    return 20;
}
add_filter('excerpt_length', 'grisaille_new_excerpt_length');

/**
* Change excerpt [...] to something else
**/

function grisaille_new_excerpt_more($more) {
    global $post;
    return ' ... <br /><a class="more-link" href="'. get_permalink($post->ID) . __('">keep reading</a>', 'grisaille');
}
add_filter('excerpt_more', 'grisaille_new_excerpt_more');

/**
* Thumbnail support
**/

add_theme_support( 'post-thumbnails' );  
set_post_thumbnail_size( 590, 275, true ); // 590 pixels wide by 275 pixels tall, hard crop mode
add_image_size( 'following-post-thumbnails', 250, 200, true ); // 250 pixels wide by 200 pixels tall, hard crop mode

// THIS LINKS THE THUMBNAIL TO THE POST PERMALINK
add_filter( 'post_thumbnail_html', 'grisaille_post_image_html', 10, 3 );
function grisaille_post_image_html( $html, $post_id, $post_image_id ) {

    $html = '<a href="' . get_permalink( $post_id ) . '" title="' . esc_attr( get_post_field( 'post_title', $post_id ) ) . '">' . $html . '</a>';

    return $html;
}

/**
* Google font API - adding Ubuntu font
**/
function grisaille_enqueue_scripts_styles() {
         wp_enqueue_style( 'Marvel', 'http://fonts.googleapis.com/css?family=Marvel');                                                 
}     
add_action('wp_enqueue_scripts', 'grisaille_enqueue_scripts_styles'); 

/**
* checks if the visitor is browsing either a page or a post and adds the 
* JavaScript required for threaded comments if they are
**/
function grisaille_queue_js(){
  if (!is_admin()){
    if ( is_singular() AND comments_open() AND (get_option('thread_comments') == 1))
      wp_enqueue_script( 'comment-reply' );
  }
}
add_action('get_header', 'grisaille_queue_js');

/**
* register_sidebar()
**/

add_action( 'widgets_init', 'grisaille_register_sidebars' );

function grisaille_register_sidebars() {

    /* Register the 'primary' sidebar. */
    register_sidebar(
        array(
            'id' => 'grisaillesidebar',
            'name' => __( 'Grisaille Sidebar', 'grisaille' ),
            'description' => __( 'Main right sidebar.', 'grisaille' ),
            'before_widget' => '<div class="sidebaritem">',
            'after_widget' => '</div>',
            'before_title' => '<h3 class="widget-title">',
            'after_title' => '</h3>'
        )
    );

}   

/**
* Load the Theme Options Page for social media icons
*/
require_once ( get_template_directory() . '/inc/theme-options.php' );

/**
* Loads the theme's translated strings
*/

add_action('after_setup_theme', 'grisaille_language_theme_setup');
function grisaille_language_theme_setup(){
    load_theme_textdomain('grisaille', get_template_directory() . '/lang');
}   
?> 
```

**第 149 - 165 行**

```
 /**
* Thumbnail support
**/

add_theme_support( 'post-thumbnails' );  
set_post_thumbnail_size( 590, 275, true ); // 590 pixels wide by 275 pixels tall, hard crop mode
add_image_size( 'following-post-thumbnails', 250, 200, true ); // 250 pixels wide by 200 pixels tall, hard crop mode

// THIS LINKS THE THUMBNAIL TO THE POST PERMALINK
add_filter( 'post_thumbnail_html', 'grisaille_post_image_html', 10, 3 );
function grisaille_post_image_html( $html, $post_id, $post_image_id ) {

    $html = '<a href="' . get_permalink( $post_id ) . '" title="' . esc_attr( get_post_field( 'post_title', $post_id ) ) . '">' . $html . '</a>';

    return $html;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:17:38.383

第 154 行没有任何问题。我正在查看代码，而我看到的有问题的一行是`grisaille_new_excerpt_more`函数中的一行。完成字符串连接的方式似乎不正确，但它确实通过我的测试框上的命令行编译，但与 wordpress(?) 代码混合时可能会导致问题。

尝试改变这个：

```
return ' ... <br /><a class="more-link" href="'. get_permalink($post->ID) . __('">keep reading</a>', 'grisaille'); 
```

对此：

```
return ' ... <br /><a class="more-link" href="'. get_permalink($post->ID) . '">' . __('keep reading', 'grisaille') . '</a>'; 
```

此外，`$more`您传递给的变量`grisaille_new_excerpt_more`甚至没有被使用，仅供参考。

# objective-c - 如何在另一个视图中访问 NSArray

> ID：10200768
> 
> 赞同：0
> 
> 时间：2012-04-17T23:43:51.273
> 
> 标签：objective-c, ios, nsmutablearray, nsarray

我的 XML 解析器有一些问题，用 obj-c 编写。解析器本身很好，但我无法访问 DetailView 中的结果数组。

我需要由我的 Master 和 DetailViewController 中的 Parser 类创建的数组的值。

在 MasterViewController 我这样做：

主视图控制器.h

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "TouchXML.h"
#import "Parser.h"

@class Parser;

@interface MasterViewController : UITableViewController{
    Parser *theParser;
    } 
```

主视图控制器.m

```
- (void)viewDidLoad
{
    theParser = [[Parser alloc] init];
    [theParser startParser:xmlPath]; //Now the parser runs and parses all needed values into arrays
} 
```

然后我点击DetailView，我也想访问那里的值。

UniViewController.h

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "Parser.h"

@interface UniViewController : UITableViewController{

    Parser *theParser;
} 
```

UniViewController.m

```
- (void)viewDidLoad
{
   NSLog(@"Name: %@",[[theParser.listArray objectAtIndex: 0]valueForKey:@"name"]);
} 
```

在这里，我想从解析器访问 Array 但我总是得到值 (null) ？在调试器中，我看到 theParser 有 0x0000 这不可能是正确的......在我执行 theParser = [[Parser alloc] init]; 之后 在这里，它有一个十六进制值，但我仍然得到（null）。

如何从 DetailView 访问数组值？

如果有人可以在这里向我解释这个问题，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:51:08.310

您的详细视图必须有一个指向您的 MasterView 创建的数组的指针（通过解析器），试试这个：

```
(void)viewDidLoad
{
    aParser = [[Parser alloc] init];
    [aParser startParser:xmlPath];
    myUniView.theParser = aParser; //myUniView is just the detail view you're pushing 
```

然后在此之后您可以推送您的详细信息视图。

# sql - PostgreSQL 列 'foo' 不存在

> ID：10200769
> 
> 赞同：60
> 
> 时间：2012-04-17T23:43:55.437
> 
> 标签：sql, postgresql, quoted-identifier

我有一个包含 20 个整数列和 1 个名为“foo”的文本列的表

如果我运行查询：

```
SELECT * from table_name where foo is NULL 
```

我得到错误：

```
ERROR:  column "foo" does not exist 
```

我已经检查过自己他的专栏确实存在。如果我这样做：

```
SELECT * from table_name where count is NULL 
```

结果输出将“foo”显示为列之一......我猜我必须在查询中做一些特别的事情，因为 foo 是一个文本列......

感谢您的帮助（POSTGRESQL 8.3）

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-18T00:38:32.120

您不小心创建了带有尾随空格的列名，并且大概 phpPGadmin 创建了带有双引号的列名：

```
create table your_table (
    "foo " -- ...
) 
```

这会给你一个看起来像在`foo`任何地方都被调用的列，但是你必须双引号它并在你使用它时包含空格：

```
select ... from your_table where "foo " is not null 
```

最佳实践是在 PostgreSQL 中使用小写不带引号的列名。phpPGadmin 中应该有一个设置，它会告诉它不要引用标识符（例如表和列名），但是唉，我不使用 phpPGadmin，所以我不使用该设置（或者即使它存在）。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-18T00:15:54.590

如果由于某种原因您创建了混合大小写或大写的列名，则需要引用它，否则会出现此错误：

```
test=> create table moo("FOO" int);
CREATE TABLE
test=> select * from moo;
 FOO 
-----
(0 rows)
test=> select "foo" from moo;
ERROR:  column "foo" does not exist
LINE 1: select "foo" from moo;
               ^
test=> _ 
```

请注意错误消息如何在引号中给出大小写。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-04-18T00:20:31.130

PostreSQL 显然在 sql 查询中将列名转换为小写 - 我已经看到混合大小写的列名会给出该错误的问题。您可以通过将列名放在引号中来修复它：

```
SELECT * FROM table_name where "Foo" IS NULL 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-11-17T03:08:19.397

**我通过在 Values 中使用撇号**( **'** )更改**引号**( **"** ) 来修复它。例如：

 ****`insert into trucks ("id","datetime") VALUES (862,"10-09-2002 09:15:59");`

变成这样：

`insert into trucks ("id","datetime") VALUES (862,'10-09-2002 09:15:59');`

假设`datetime`列是[VarChar](http://www.postgresql.org/docs/9.2/static/datatype-character.html)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-18T00:34:12.297

正如其他人在评论中所建议的那样，这可能是大写与小写的问题，或者是列名中的一些空格。（我正在使用答案，因此我可以格式化一些代码示例。）要查看列名的真正含义，请尝试运行以下查询：

```
SELECT '"' || attname || '"', char_length(attname)
  FROM pg_attribute
  WHERE attrelid = 'table_name'::regclass AND attnum > 0
  ORDER BY attnum; 
```

如果可以的话，您可能还应该检查您的 PostgreSQL 服务器日志，以查看它为语句报告的内容。

如果您引用标识符，则引号中的所有内容都是标识符的一部分，包括大写字符、行尾、空格和特殊字符。唯一的例外是两个相邻的引号字符被作为一个引号字符的转义序列。当标识符*不在*引号中时，所有字母都将折叠为小写。以下是正常行为的示例：

```
test=# create table t (alpha text, Bravo text, "Charlie" text, "delta " text);
CREATE TABLE
test=# select * from t where Alpha is null;
 alpha | bravo | Charlie | delta  
-------+-------+---------+--------
(0 rows)

test=# select * from t where bravo is null;
 alpha | bravo | Charlie | delta  
-------+-------+---------+--------
(0 rows)

test=# select * from t where Charlie is null;
ERROR:  column "charlie" does not exist
LINE 1: select * from t where Charlie is null;
                              ^
test=# select * from t where delta is null;
ERROR:  column "delta" does not exist
LINE 1: select * from t where delta is null;
                              ^ 
```

我在顶部显示的查询产生了这个：

```
 ?column?  | char_length 
-----------+-------------
 "alpha"   |           5
 "bravo"   |           5
 "Charlie" |           7
 "delta "  |           6
(4 rows) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-10T21:53:35.593

可能是引用本身就是整个问题。我有一个类似的问题，这是由于 CREATE TABLE 语句中列名周围的引号引起的。请注意，没有空格问题，只是引起问题的引号。

该列看起来像被调用`anID`但实际上被调用`"anID"`。引号不会出现在典型的查询中，因此很难检测到（对于这个 postgres 菜鸟）。这是在 postgres 9.4.1 上

更多细节：

做`postgres=# SELECT * FROM test;`给了：

```
 anID | value 
 ------+-------
     1 | hello
     2 | baz
     3 | foo (3 rows) 
```

但试图只选择第一列会`SELECT anID FROM test;`导致错误：

```
ERROR:  column "anid" does not exist 
LINE 1: SELECT anID FROM test;
                ^ 
```

仅查看列名并没有帮助： `postgres=# \d test;`

```
 Table "public.test"
 Column |       Type        | Modifiers 
--------+-------------------+-----------
 anID   | integer           | not null
 value  | character varying | 
Indexes:
    "PK on ID" PRIMARY KEY, btree ("anID") 
```

但是在 pgAdmin 中，如果您单击列名并查看它填充的 SQL 窗格：

```
ALTER TABLE test ADD COLUMN "anID" integer;
ALTER TABLE test ALTER COLUMN "anID" SET NOT NULL; 
```

你瞧，列名周围有引号。那么最终`postgres=# select "anID" FROM test;`工作正常：

```
 anID 
------
    1
    2
    3
(3 rows) 
```

同样的道德，不要使用引号。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-06-29T08:55:57.037

出现问题是因为列的名称在内部是驼峰式的，它用“”（双引号）将它包装起来以解决这个问题，在表中插入值时使用单引号（''）

例如 *插入 schema_name.table_name values(' ',' ',' ');*

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-01-11T10:30:20.493

就我而言，当我运行选择查询时，它可以工作并提供所需的数据。但是当我运行查询时

```
select * from users where email = "user@gmail.com" 
```

它显示了这个错误

```
ERROR:  column "user@gmail.com" does not exist
LINE 2: select * from users where email = "user@gmail.com...
                                          ^
SQL state: 42703
Character: 106 
```

然后我使用单引号而不是双引号来匹配条件，它可以工作。例如。

```
select * from users where email = 'user@gmail.com' 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-11-25T23:06:49.960

我们在使用 phppgadmin 客户端创建表时遇到了这个问题。使用 phppgadmin 我们没有在列名中指定任何双引号，但我们仍然遇到了同样的问题。

如果我们使用 caMel 大小写创建列，然后 phpPGAdmin 会在列名周围隐式添加双引号。如果您创建全小写的列，那么您将不会遇到此问题。

您可以更改 phppgadmin 中的列并将列名更改为全部小写，此问题将消失。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-03-02T07:07:02.933

我通过引用列名解决了类似的问题

```
SELECT * from table_name where "foo" is NULL; 
```

就我而言，这只是

```
SELECT id, "foo" from table_name; 
```

没有引号我有同样的错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-11T10:58:41.503

我正在处理地址数据并使用 pandas 将数据加载到 Postgres。pandas_usaddress 库在解析我的地址方面做得很好，但将新列放入了 InSpeCific 案例。疯狂的。但是现在我必须对每个列名使用双引号。从 har_addresses 中选择“邮编”；我得到了我的数据。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-24T05:52:58.973

当我使用 Dapper 并忘记输入参数化值时，我也遇到了这个错误。

为了解决这个问题，我必须确保作为参数传入的对象具有与 SQL 字符串中的参数化值匹配的属性。****

# ruby-on-rails - Accepts_nested_attributes_for 的自定义更新查找

> ID：10200775
> 
> 赞同：0
> 
> 时间：2012-04-17T23:44:09.673
> 
> 标签：ruby-on-rails, activerecord

我有一个主要是静态的设备表，如下所示：

```
class CreatePlatforms < ActiveRecord::Migration
  def change
    create_table :platforms do |t|
      t.column :model, :string, :null => false
      t.column :name, :string, :null => false

      t.timestamps
    end

    add_index :platforms, :model, :unique => true

    Platform.create  :model => "iPhone1,1", :name => "Original iPhone"
    Platform.create  :model => "iPhone1,2", :name => "iPhone 3G"
    [...]
  end
end 
```

还有一个引用平台的表、设备。现在我想将模型发送到服务器，并将创建的设备链接到数据库中该模型的相应 id，类似于`accepts_nested_attributes_for :platform`. 但是，除非属性中有 id，否则会创建记录。

是否有任何方法`accepts_nested_attributes_for`或类似的方法来使用不同的属性来查找现有记录？

我可以像下面这样在控制器中手动交换它，但这很麻烦，也是最后的手段：

```
params[:device][:platform] = Platform.find_by_model params[:device][:platform_attributes][:model] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:06:21.700

我找到了一个解决方案：

```
def autosave_associated_records_for_platform
  if new_platform = Platform.find_by_model(platform.model) then
    self.platform = new_platform
  else
    self.platform.name = "Unknown"
    self.platform.save!
  end
end 
```

# javascript - 单击单选按钮调用多个函数

> ID：10200776
> 
> 赞同：2
> 
> 时间：2012-04-17T23:44:16.630
> 
> 标签：javascript, html, click, dom-events

我正在调用单选按钮的两个函数。它适用于 Chrome，但不适用于 Firefox 和 IE。

```
onClick="showSelect(); showHelp();" 
```

第一个返回“继续”按钮，第二个返回带有信息和联系号码的框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:48:06.953

```
onClick="(function(){showSelect(); showHelp();})();"; 
```

[**现场演示**](http://jsfiddle.net/neykX/)

* * *

**更新** 我在下面的评论中写道，您希望这两个函数同时运行，这意味着并行。

太糟糕了......`javascript`所有现代浏览器都不支持并行编程，所以恐怕它不能完成，但顺序，意味着一个接一个的功能。对不起！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:46:23.430

```
onClick="(function(){showSelect(); showHelp();})()"; 
```

您需要将`onClick`属性包装在一个匿名函数中，如果您打算在其中调用多个函数，则需要使用闭包。（匿名函数只是一个没有名称的函数，例如`function(){...}`，而闭包是这样的：`(...)()`。一旦编译器到达它，它就会执行其中的任何代码。）

# php - ajax形式的结构

> ID：10200778
> 
> 赞同：0
> 
> 时间：2012-04-17T23:44:31.713
> 
> 标签：php, jquery, mysql, ajax

我将使其尽可能简短和具有描述性（考虑到我的情况更长）。假设我有 2 个具有以下结构的数据库表：

用户表：

id ---- 用户名---- 金

物品表：

id----- item_name---- item_price

我想要实现的是头脑风暴，我尝试了超过 20 种脚本组合。我需要能够将表​​格中的所有项目回显到一个好的布局（完成）有一个文本框供用户输入需要购买的值。a href 提交金额，从用户拥有的黄金数量中扣除物品的价格，然后将 1 添加到库存中。我不需要 php 代码，因为它很容易。我需要的只是帮助尝试更新在“实时”中键入的值。“商店”的布局将如下所示：

```
while($_row = mysql_fetch_assoc($query)){
 echo out name...
 <input type = 'text' name = 'to_buy_value'/>
 <a href = 'javascript:;' class = 'buy'>Buy</a>
} 
```

我希望上面的代码能给你足够的参考。TL;DR（在 db 结构之后？） 1- 一个带有 href 作为提交的文本框。2-表更新是即时完成的（不重新加载）。阿贾克斯。3-能够一次购买超过 1 件商品而无需重新加载页面 4-除非必要，否则无需使用 php 代码。我将不胜感激任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:49:08.917

前段时间，我有一个项目，我必须为新闻管理、添加、编辑、删除等做某种 CMS。正如 Satya 评论的那样，如果你想做得很好，方法就是使用 AJAX。

我所做的是一个循环，就像你的一样，为使用 PHP mysql_fetch_assoc 获取的每一行在表中添加一个 tr （是的，我知道，表......）。我知道您不想要 PHP 帮助，但我认为这会对您有所帮助。

```
 $res=mysql_query($query) or die(mysql_error());
    while($row = mysql_fetch_assoc($res)) {  
     foreach ($row as $col => $val) {
     if ($col != "column you dont display or isn't 'ID' column" && $col != "another column you dont display, and so on") {
       if ($col == "ID") $id = $val;

       //use this to echo values in table/tr/td/div/span or whatever you use to display values
       if ($col == "gold") {
        echo 'whatever you want to echo using the gold value';
       }
       if ($col == "name of last column you are displaying") {
        echo 'whatever you display for that column';
        echo '<input type="text" value="Introduce quantity">';
        //If you are on HTML5 you could just use id="{$id}" as it will be easier
        echo '<a href="#" class="buy" id="i_{$id}" value="Introduce quantity">';
       }
      }
     } 
```

这里最重要的事情之一是跟踪每个项目的 ID，这样您就可以在向服务器发送 POST 请求时将它们关联起来。

我建议你使用 jQuery，它很容易使用

```
<script type="text/javascript">
  $(document).ready(function () {
    $(".buy").click(function(e) {
      e.preventDefault();
      // You get the id attribute of the button clicked, which contains the
      // item ID. Then you substr the string to get just the id number. Example:
      // The id of the clicked element is "i_2254" you use substr to get just the
      // 2254 and send it to the php that process the buy
      // If you choose the HTML5 id form I said above in the PHP, then var id=$(this).attr("id")
      var id = $(this).attr("id").substr(2);
      $.ajax({
              type: "POST",
              url: "buy_item.php",
              async:false,
              data: "itemID="+id,
              success: function(data) {
                  // Here is where the magic occurs, this is what happens when you
                                      // get the response, here is where you update the
                                      // inventory, quantity, etc WITHOUT reloading.
                                      // The variable data is the response of the server
                                      // you just echo what you need on buy_item.php, and 
                                      // that will be data here
                                      // A simple example is to change the value of an input
                                      // with id="gold", you echo gold on php and...

                                      $('#gold').val(data);

                }
              }); 

  });
    });
  });
</script> 
```

在 buy_item.php 中，您可以更新表的黄金值，并将项目添加到项目表中。使用 $_SESSION 变量存储用户会话名称并更新该用户的金币和物品。

我建议你调查一下 AJAX 和 jQuery（可选），它会有很大帮助！

我想基本上这会解决你的问题，我希望能收到游戏邀请：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:55:53.373

这是一个非常粗略的解决方案。在您的 while 循环中，您可以将项目的数据库 ID 附加到元素的 ID：

```
while($_row = mysql_fetch_assoc($query)){
 echo out name...
 <input id="purchaseAmount{$_row->id}" type="text" name="value_to_buy" />
 <a id="purchaseButton{$_row->id}" href="#" class="buy">Buy</a>
} 
```

然后将 javascript 函数绑定到您的“购买”链接，该链接将发出 AJAX 请求：

```
$('.buy').bind('click', function() {

  // Grab the item id and amount
  var itemId = $(this).attr('id').substring(14);
  var itemAmount = $('purchaseAmount' + itemId).val();

  $.ajax({
    url: 'someurl/purchaseItem.php',
    data: { item: itemId, amount: itemAmount },
    success: function(data) {
      // Update the player's gold and inventory on screen
    }
  });
}); 
```

“purchaseItem.php”文件可以返回一个简单的 JSON 对象，该对象保存玩家当前的金币和物品栏的物品数量。或者您可以返回 HTML，具体取决于您的页面设置方式。

# django - 检查重定向 url 是否存在

> ID：10200780
> 
> 赞同：4
> 
> 时间：2012-04-17T23:44:43.987
> 
> 标签：django, url, design-patterns

登录后用户应该被重定向到`?next=%s`url。我想检查指定的 url 是否映射到现有视图。有`reverse()`通过视图获取 url 的功能，我需要 vv 所以，我需要 Django 为 url 模式匹配执行的功能。

我明白了，问题很简单，但我在谷歌中找不到答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T01:02:04.373

```
from django.core.urlresolvers import resolve, Resolver404
try:
    resolve(path)
except Resolver404:
    'not found' 
```

# php - 使用 PHP 使用 MySQL 表中的值填充搜索输入框

> ID：10200782
> 
> 赞同：0
> 
> 时间：2012-04-17T23:45:23.180
> 
> 标签：php, jquery, mysql, search

我目前在我的网站上使用[This JQuery](http://www.emposha.com/javascript/fcbkcomplete.html)作为搜索框。Javascript 当前从 .txt 文件中调用值以获取自动完成结果。但是，由于我希望我的网站最终可以选择用户添加这些值，我希望它改为从我的数据库表中调用值。

调用 .txt 文件的索引页面上的 JQuery：

```
 $(document).ready(function(){                
        $("#select3").fcbkcomplete({
            json_url: "data.txt",
            addontab: true,                   
            maxitems: 10,
            input_min_size: 0,
            height: 10,
            cache: true,
            newel: true,
            select_all_text: "select",
        });
    }); 
```

.txt 文件的格式：

```
[{"key": "hello world", "value": "hello world"}, {"key": "movies", "value": "movies"}, 
```

我认为解决方案不是调用 data.txt，而是调用 data.php 并让这段代码引入值：

```
$getData = mysql_query("SELECT Name FROM tblCocktails"); 

 while($info = mysql_fetch_array($getData)) 
 {
     echo "key: value:".$item['Name']"key: value:".$item['Name']';
 } 
```

但是，这似乎不起作用，我在 Dreamweaver 上的调试决定不起作用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:09:31.837

我会使用 json_encode() 而不是硬编码的字符串

```
//if you want other field of the database like value, I mofidied your query for this
$getData = mysql_query("SELECT Name, Value FROM tblCocktails"); 
$index=0;
 while($info = mysql_fetch_array($getData)) 
 {
    //this will be storage every row of your table in an array until while is finish
    $value[$index]=new Array("key"=>$info['Name'],
                             "value"=>$info['Value']
                              );
    $index++;
 }
//convert the array into a json string
echo json_encode($value); 
```

这应该输出你需要的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:52:33.910

在while循环中查看该`echo`行。您应该用信息替换项目。

像这样。

```
$getData = mysql_query("SELECT Name FROM tblCocktails"); 

 while($info = mysql_fetch_array($getData)) 
 {
     echo "key: value:".$info['Name']."key: value:".$info['Name'];
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T00:08:09.877

您的回复必须是**json 格式**，请在您的 php 文件中尝试：

```
$getData = mysql_query("SELECT Name FROM tblCocktails"); 

$data = array();
while($info = mysql_fetch_assoc($getData)) 
{
   $data[] = $info['Name'];     
}
echo json_encode($data);//data array is converted in json format response 
```

# sql-server-2008 - 从 sql server 2008 中的 dll 正确创建存储过程

> ID：10200788
> 
> 赞同：0
> 
> 时间：2012-04-17T23:46:30.727
> 
> 标签：sql-server-2008, stored-procedures, dll

我有一个使用如下代码创建的 dll：

```
public partial class StoredProcedures
{
    [Microsoft.SqlServer.Server.SqlProcedure]
    public static void STOREDPR(SqlString a1, SqlString a2, SqlDouble a3)
    {
     ....
    }
} 
```

所以我需要使用该代码的.dll来创建过程但是......我正在尝试

```
CREATE ASSEMBLY test  from 'C:\Documents and Settings\theDLL.dll' WITH PERMISSION_SET = SAFE 
```

直到完美，问题就来了......

```
CREATE PROCEDURE TEST AS EXTERNAL NAME test.STOREDPR @a1 nvarchar, @a2 nvarchar, @a3 double 
```

我不能让它工作，你能纠正这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:56:17.070

我认为您缺少类名**StoredProcedures**

```
CREATE PROCEDURE TEST 
  @a1 nvarchar(100), 
  @a2 nvarchar(100), 
  @a3 float 
AS EXTERNAL NAME test.StoredProcedures.STOREDPR 
```

# ios - iOS JSON NSString 解析

> ID：10200790
> 
> 赞同：15
> 
> 时间：2012-04-17T23:46:43.740
> 
> 标签：ios, json

我在 iOS 中有一个 JSON 字符串作为 NSString 对象。我想解析它并提取 JSON 字符串中的给定参数。有没有一种有效的方法来解析这个或者是搜索子字符串等的唯一方法？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-18T00:18:29.670

使用 iOS 5 的方法是使用`NSJSONSerialization`类。您需要先将字符串转换为 NSData 对象，然后调用类方法`JSONObjectWithData`

```
NSData *jsonData = [myJsonString dataUsingEncoding:NSUTF8StringEncoding];
NSError *e;
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:nil error:&e]; 
```

请注意，这`JSONObjectWithData`将返回 NSDictionary 或 NSArray，具体取决于您的 JSON 字符串表示字典还是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:52:28.810

`NSArray`将 JSON 字符串转换为 Objective-C 对象（和`NSDictionary`）的一个很好的框架是[SBJson](http://stig.github.com/json-framework/)（[Github](https://github.com/stig/json-framework)）。

用法：

```
NSDictionary *dict = [myJsonString JSONValue]; 
```

# jquery - 使用 AJAX 运行 jQuery 滑块脚本

> ID：10200793
> 
> 赞同：-1
> 
> 时间：2012-04-17T23:46:56.797
> 
> 标签：jquery, ajax, slider

我正在尝试使用 AJAX 运行 jQuery 滑块脚本，但没有成功。

这是 AJAX 调用：

**HTML**

```
 <div id="sn"><a href="#" id="button" onclick="loadDoc('sn','example4.html')">test</a></div> 
```

**JS**

```
<script type="text/javascript"> 
function loadDoc(id, url) {
  if (window.XMLHttpRequest) {
    // code for IE7+, Firefox, Chrome, Opera, Safari 
    xmlhttp=new XMLHttpRequest();
  } else {
    // code for IE6, IE5 
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"); 
  } 
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
      document.getElementById(id).innerHTML=xmlhttp.responseText;
    }
  } 
  xmlhttp.open("GET",url,false); 
  xmlhttp.send(null);
} 
</script> 
```

这是我实现 jQuery 滑块脚本的地方：

```
 <!DOCTYPE html>
 <html lang="en">
 <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
 </head>
 <body>
    <div class="container">
        <div id="va-accordion" class="va-container">
            <div class="va-nav">
                <span class="va-nav-prev">Previous</span>
                <span class="va-nav-next">Next</span>
            </div>
            <div class="va-wrapper" style="background:#f9e830;">
                <div class="va-slice va-slice-1">
                    <div class="va-content">
                        <p>TEST1</p>

                    </div>
                </div>
                <div class="va-slice va-slice-2">
                    <div class="va-content">
                        <p>TEST2</p>

                    </div>  
                </div>
                <div class="va-slice va-slice-3">
                    <div class="va-content">
                        <p>TEST3</p>

                    </div>  
                </div>

                </div>
            </div>
        </div>

    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="js/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="js/jquery.vaccordion.js"></script>
    <script type="text/javascript">
        $(function() {
            $('#va-accordion').vaccordion({
                expandedHeight  : 350,
                animSpeed       : 400,
                animOpacity     : 0.7,
                visibleSlices   : 2
            });
        });
    </script>
</body> 
```

这是滑块的CSS

```
 /* Vertical Accordion Style */
.va-container{
position:relative;
margin:40px auto 0 auto;
 }
.va-wrapper{
width:100%;
height:100%;
position:relative;
overflow:hidden;
background:#000;
 }
.va-slice{
cursor:pointer;
position:absolute;
width:100%;
left:0px;
overflow:hidden;
 }

.va-title{
font-family: 'Open Sans Condensed', sans-serif;
text-transform:uppercase;
font-size:60px;
margin-left:20px;
color:#fff;
text-shadow: 0px 0px 1px white;
 }
 .va-content{
display:none;
margin-left:25px;
 }
 .va-slice p{
font-size: 22px;
font-style: italic;
font-family:Georgia, serif;
 }
 .va-slice ul{
margin-top:20px;
 }
 .va-slice ul li{
float:left;
margin:0px 2px;
 }
 .va-slice ul li a{
color:#000;
background:#eede2f;
padding:3px 6px;
font-size:14px;
font-family:'PT Sans', sans-serif;
text-transform:uppercase;
}
.va-slice ul li a:hover{
background:#000;
color:#fff;
text-shadow:none;
}
.va-nav span{
width:40px;
height:25px;
background:transparent url(../images/prev.png) no-repeat center center;
position:absolute;
top:-35px;
left:50%;
margin-left:-20px;
text-indent:-9000px;
opacity:0.7;
cursor:pointer;
display:none;
z-index:100;
 }
 .va-nav span.va-nav-next{
background-image:url(../images/next.png);
top:auto;
bottom:-35px;
 }
.va-nav span:hover{
opacity:1.0;
 } 
```

所以一切正常，如果它不是从 AJAX 运行的。任何想法如何使所有这些工作？谢谢 ）

解决方案 ：

```
 <div id="sn"><a href="#" id="button" onclick="loadDoc('sn','example4.html');jQuery('#va-accordion').vaccordion();">test</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T01:15:35.183

尝试使用 jQuery 中内置的 load 函数来处理 AJAX 请求，就像您编写的那样……我们将从消除过程开始。

转换这个：

```
<div id="sn"><a href="#" id="button" onclick="loadDoc('sn','example4.html')">test</a></div> 
```

对此：

**HTML**

```
<div id="sn"><a href="#">test</a></div> 
```

**JS**

```
$(function() {
  $('#sn a').on('click', function(e) {
    e.preventDefault();
    $('#sn').load('example4.html');
  });
}); 
```

**编辑**

如果它仍然不起作用，并且您在控制台中没有看到任何内容，请稍微修改......

```
try {
  $(function() {
    $('#sn a').on('click', function(e) {
      e.preventDefault();
      $('#sn').load('example4.html');
    });
  });
} catch(err) {
  alert(err);
} 
```

# jquery - 将 jQuery 动画排入队列的最佳方法

> ID：10200794
> 
> 赞同：3
> 
> 时间：2012-04-17T23:47:00.773
> 
> 标签：jquery, jquery-animate

我需要根据存储在数据库中的时间线在 jQuery 中制作一系列动画。我用函数的名称（动画、幻灯片、淡入淡出......）、函数的选项/参数和函数的回调来存储这些信息。

我知道 jQuery 确实有**[.queue](http://api.jquery.com/queue/)**方法，但我真的不知道如何利用它（我认为更多是因为我从未使用过它）。

**那么，jQuery 动画队列和封装在回调中的动画函数有什么区别呢？考虑性能，最好的方法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:50:56.813

他们自动排队；只需依次调用它们即可。例如，这个：

```
$('#something').fadeOut().slideDown(); 
```

会淡出`#something`，*然后*向下滑动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:59:57.853

这篇[文章](http://www.artzstudio.com/2009/04/jquery-performance-rules/)是前段时间写的，但可以肯定的是，它仍然可以为这个问题提供足够的想法。

# vb.net - 如何使用 facebook 身份验证和 asp.net 登录控制？

> ID：10200799
> 
> 赞同：0
> 
> 时间：2012-04-17T23:48:02.260
> 
> 标签：vb.net, facebook-graph-api, login-control, facebook-login, form-authentication

我已经研究了一周的 Facebook 身份验证。我遇到了很多东西，例如 facebook_connect、CodePlex 的 Facebook C# SDK 以及其他与 facebook 连接的方式，这些方式现在是绝对的。最后，在多次阅读[http://developers.facebook.com之后，我确实设法拥有一个登录按钮并使用新的和标准的 Graph API 东西获取 facebook 的用户信息。](http://developers.facebook.com)在Javascript中有诸如。

```
var uid = response.authResponse.userID;
var accessToken = response.authResponse.accessToken;
var name = response.name
var username = response.username
var gender = response.gender 
```

在另一个世界上，我有登录控制和 asp.net 表单身份验证来管理整个网站。

```
Protected Sub Login1_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles Login1.Authenticate

Dim userName As String = Login1.UserName
Dim password As String = Login1.Password
Dim result As Boolean = UserLogin(userName, password)
If (result) Then
    e.Authenticated = True
Else
    e.Authenticated = False
End If
End Sub

Private Function UserLogin(ByVal userName As String, ByVal password As String) As Boolean
    //validate user // if valid, return true
    //return false if invalid user
End 
```

我无法从现有网站中删除所有表单身份验证。Facebook 登录应该是网站的增值功能。现在我没有得到的几位是......

1.  当有人使用 facebook Login 登录网站时如何验证 asp.net Form 身份验证。
2.  如何将 javascript 中的所有值传递给 aspx.vb 以连接到数据库并存储信息。

我知道我需要在数据库中创建一个新表，可能称为 FacebookUsers。但我想不出一种让 facebook 身份验证和 asp.net 登录控件一起工作的方式。顺便说一句，我的网站在 VB.net 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:42:44.300

1.  ****如何将 javascript 中的所有值传递给 aspx.vb 以连接到数据库并存储信息**** . 查看以下文章，它们可能会对您有所帮助。 [http://www.codeproject.com/Tips/371917/Get-user-Facebook-details-in-ASP-NET-and-Csharp](http://www.codeproject.com/Tips/371917/Get-user-Facebook-details-in-ASP-NET-and-Csharp)

1.-不要创建新表，只需在当前用户表中添加一个新字段... 2.-将字段命名为 FaceBookUID 或 FB_ID。3.-存储 facebook 用户 ID。4.-将 FACEBOOK UID 的默认值设置为 0。 5.-现在您将拥有普通用户和 FacebookUser 之间的唯一值。

# c++ - 算法：计算单词列表频率的更好方法

> ID：10200806
> 
> 赞同：6
> 
> 时间：2012-04-17T23:48:32.820
> 
> 标签：c++, performance, algorithm, data-structures

这个问题实际上很简单，但我想在开始编码之前听听一些想法。给定一个每行包含一个单词的文件，**计算最常见的 n 个数字。**

不幸的是，我脑海中突然出现的第一件事是使用`std::map`. 我知道 C++ 的同胞会说这`unordered_map`非常合理。

我想知道是否可以将任何东西添加到算法方面，或者这基本上只是“选择最佳数据结构的人获胜”类型的问题。我已经在互联网上搜索了它并阅读了该哈希表和优先级队列可能会提供一个运行时间为**O(n)**的算法，但是我认为实现起来会很复杂

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T01:43:46.813

用于此任务的最佳数据结构是 Trie：

[http://en.wikipedia.org/wiki/Trie](http://en.wikipedia.org/wiki/Trie)

它将胜过用于计算字符串的哈希表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T23:56:12.173

这个问题有很多不同的方法。它最终将取决于场景和其他因素，例如文件的大小（如果文件有十亿行），那么 a`HashMap`将不是一种有效的方法。根据您的问题，您可以执行以下操作：

1.  如果您知道唯一词的数量非常有限，您可以使用 a `TreeMap`or 在您的情况下`std::map`。
2.  如果单词的数量非常大，那么您可以在另一个数据结构中构建`trie`并保留各种单词的计数。这可能是一个 size 的堆（最小/最大取决于你想要做什么）`n`。所以你不需要存储所有的单词，只需要存储必要的单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T00:43:08.170

如果我有很多选择，我*不会*从`std::map`(or `unordered_map`) 开始（尽管我不知道可能会应用哪些其他限制）。

你这里有两个数据项，你用一个作为时间的关键部分，而另一个作为另一部分时间的关键。为此，您可能需要类似[Boost Bimap](http://www.boost.org/doc/libs/1_49_0/libs/bimap/doc/html/index.html)或[Boost MultiIndex 之](http://www.boost.org/doc/libs/1_49_0/libs/multi_index/doc/index.html)类的东西。

以下是使用 Bimap 的总体思路：

```
#include <boost/bimap.hpp>
#include <boost/bimap/list_of.hpp>
#include <iostream>

#define elements(array) ((sizeof(array)/sizeof(array[0])))

class uint_proxy {
    unsigned value;
public:
    uint_proxy() : value(0) {}
    uint_proxy& operator++() { ++value; return *this; }
    unsigned operator++(int) { return value++; }
    operator unsigned() const { return value; }
};

int main() {    
    int b[]={2,4,3,5,2,6,6,3,6,4};

    boost::bimap<int, boost::bimaps::list_of<uint_proxy> > a;

    // walk through array, counting how often each number occurs:
    for (int i=0; i<elements(b); i++) 
        ++a.left[b[i]];

    // print out the most frequent:
    std::cout << a.right.rbegin()->second;
} 
```

目前，我只打印出最频繁的数字，但迭代 N 次以打印出最频繁的 N 非常简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T07:44:40.673

如果您只对前 N 个最常用的词感兴趣，并且不需要精确，那么您可以使用一个非常巧妙的结构。我是通过 Udi Manber 听说的，它的工作原理如下：

您创建一个包含 N 个元素的数组，每个元素跟踪一个值和一个计数，您还保留一个索引到该数组的计数器。此外，您有一个从值到索引到该数组的映射。每次使用值更新结构时（例如文本流中的单词），您首先检查您的地图以查看该值是否已经在您的数组中，如果是，则增加该值的计数。如果不是，那么您减少计数器指向的任何元素的计数，然后增加计数器。

这听起来很简单，算法的任何内容都使它看起来会产生任何有用的东西，但对于典型的真实数据，它往往做得很好。通常，如果您希望跟踪前 N 个事物，您可能希望创建容量为 10*N 的结构，因为其中会有很多空值。使用 King James Bible 作为输入，以下是该结构列出的最常用词（无特定顺序）：

```
0 : in
1 : And
2 : shall
3 : of
4 : that
5 : to
6 : he
7 : and
8 : the
9 : I 
```

以下是前十个最常用的词（按顺序）：

```
0 : the ,  62600
1 : and ,  37820
2 : of ,  34513
3 : to ,  13497
4 : And ,  12703
5 : in ,  12216
6 : that ,  11699
7 : he ,  9447
8 : shall ,  9335
9 : unto ,  8912 
```

您会看到，前 10 个单词中有 9 个是正确的，而且它只使用了 50 个元素的空间。根据您的用例，此处节省的空间可能非常有用。它也非常快。

这是我用 Go 编写的 topN 的实现：

```
type Event string

type TopN struct {
  events  []Event
  counts  []int
  current int
  mapped  map[Event]int
}
func makeTopN(N int) *TopN {
  return &TopN{
    counts: make([]int, N),
    events: make([]Event, N),
    current: 0,
    mapped: make(map[Event]int, N),
  }
}

func (t *TopN) RegisterEvent(e Event) {
  if index, ok := t.mapped[e]; ok {
    t.counts[index]++
  } else {
    if t.counts[t.current] == 0 {
      t.counts[t.current] = 1
      t.events[t.current] = e
      t.mapped[e] = t.current
    } else {
      t.counts[t.current]--
      if t.counts[t.current] == 0 {
        delete(t.mapped, t.events[t.current])
      }
    }
  }
  t.current = (t.current + 1) % len(t.counts)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T23:59:15.503

> 给定一个每行包含一个单词的文件，计算最常见的**n 个**数字。...我已经在互联网上搜索并阅读了该哈希表和优先级队列可能会提供**O(n)的算法**

如果您的意思是 * *n* * 是相同的，那么不，这是不可能的。但是，如果您只是指时间与输入文件的大小呈线性关系，那么使用哈希表的简单实现将满足您的需求。

可能存在具有次线性内存的概率近似算法。

# c# - 以另一种形式将数据传递到 Datagrid 文本框

> ID：10200809
> 
> 赞同：1
> 
> 时间：2012-04-17T23:48:55.957
> 
> 标签：c#

当我双击 form1 中的文本框时，我打开了一个数据网格。我需要在 form2 中的 datagrid 单元格上单击两次，当我单击它时，它已经为 form1 中的文本框带来了价值。我尝试了许多不再有效的方法，在我单击单元格之前，他已经自动在文本框中添加了值，有人可以帮忙吗？

我试过这个：

在表格1

```
 Ncm Ncm formNcm = new ();
         formNcm.Show ();
         ncmcb.Text formNcm.getNCM = ();
         ncmcb.Focus (); 
```

表格2

public string getNCM() { = dataGridView1.CurrentCell.Value.ToString value2 string(); 返回值2；只有这样，它选择已经拥有数据网格的值，我不能改变，如果我改变它不会采用 form1 中文本框的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:02:54.867

设计方面，一个表单**永远不**应该知道另一个表单有一个文本框或下拉菜单或其他一些控件。理想情况下，这两种形式应该通过公共属性或自定义事件进行交互。

**将值从 Form2 分配给 Form1**

1.  在表单 2 中定义自定义事件。

2.  使 Form1 向该事件注册，以便当 Form 2 触发它时，Form1 可以捕获它。

3.  在 Form2 中捕获网格单元格单击事件并触发自定义事件。您将使用 EventArgs 来传递值。

4.  在 Form1 中，事件处理程序应该开始起作用，您可以在那里分配从 Form 2 发送的值。

这里有一篇文章正是这样做的：http: [//www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms](http://www.codeproject.com/Articles/17371/Passing-Data-between-Windows-Forms)

**如果你想从 Form2 给 Form1 赋值，**

在 Form 2 中，定义一个属性，例如。

```
publis string MyTextBoxValue //Choose a better name :)
{
     set {myTextBox.Text = value;}
} 
```

当您打开表格时，您可以通过以下方式拨打电话，

```
 Ncm Ncm formNcm = new ();
     formNcm.MyTextBoxValue = "Grid Cell Value"; //Whatever your value is
     formNcm.Show ();
     ncmcb.Text formNcm.getNCM = ();
     ncmcb.Focus (); 
```

# reporting-services - SSRS 更改数据源连接字符串

> ID：10200810
> 
> 赞同：1
> 
> 时间：2012-04-17T23:49:48.680
> 
> 标签：reporting-services

任何人都可以共享一个 SQL 脚本，它只需修改 SSRS 中共享数据源的连接字符串。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T07:44:23.140

不可以，因为 SQL 脚本只能在连接到 SQL 数据源时运行。

但是，我怀疑您实际需要的是一个可用于连接字符串的表达式 - 例如*：*

```
="Data Source=" + Parameters!DBName.Value + ";Initial Catalog=ReportDB" 
```

# c# - UserControl在wpf中使用父元素？

> ID：10200812
> 
> 赞同：6
> 
> 时间：2012-04-17T23:49:54.970
> 
> 标签：c#, wpf, xaml, user-controls

当您在 wpf 中有一个用户控件时，它可以到达其父元素之外吗？例如，我的用户控件只是列出了一些通用的东西，这些东西保存在控件中，这些控件封装在主窗口的停靠面板中，但我在主窗口中有一个文本框和按钮，我想从控件中访问它们......这可能吗？

这将节省我很多时间，而不是更改整个窗口的内容并在每个用户控件中显示相同的文本框/按钮。如果有人有这方面的例子，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T23:59:14.450

更好的设计模式是让用户控件在需要更改某些内容时（通过事件）通知主窗口，并在需要某些信息时询问窗口（通过方法）。例如，您将在用户控件可以调用的窗口上有一个 GetText() 方法，在窗口将订阅的用户控件上有一个 ChangeText 事件。

这个想法是始终控制窗口。使用这种心态，将来开发应用程序会更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T00:46:43.113

是的，这是可能的，这里是一些我用来从具有 DP 的 UserControls 组成演示文稿的代码。

我一点也不喜欢它，但它确实有效。我也认为这是一个*很棒的*话题，也许一些代码将有助于获得更好的答案！

干杯，
贝瑞

# 用户控件 XAML

```
<Button x:Name="btnAddNewItem" Style="{StaticResource blueButtonStyle}" >
    <StackPanel Orientation="Horizontal">
        <Image Source="{resx:Resx ResxName=Core.Presentation.Resources.MasterDetail, Key=bullet_add}" Stretch="Uniform" />
        <Label x:Name="tbItemName" Margin="5" Foreground="White" Padding="10, 0">_Add New [item]</Label>
    </StackPanel>
</Button> 
```

# 用户控制代码背后

```
public partial class AddNewItemButton : UserControl
{
    ...

    #region Item Name

    public static readonly DependencyProperty ItemNameProperty = DependencyProperty.Register(
        "ItemName", typeof(string), typeof(AddNewItemButton),
        new FrameworkPropertyMetadata(OnItemNameChanged));

    public string ItemName
    {
        get { return (string)GetValue(ItemNameProperty); }
        set { SetValue(ItemNameProperty, value); }
    }

    public string ButtonText { get { return (string) tbItemName.Content; } }

    private static void OnItemNameChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        // When the item name changes, set the text of the item name
        var control = (AddNewItemButton)obj;

        control.tbItemName.Content = string.Format(GlobalCommandStrings.Subject_Add, control.ItemName.Capitalize());
        control.ToolTip = string.Format(GlobalCommandStrings.Subject_Add_ToolTip, control.ItemName);
    }

    #endregion

    #region Command

    public static readonly DependencyProperty CommandProperty = DependencyProperty.Register(
        "Command", typeof(ICommand), typeof(AddNewItemButton),
        new FrameworkPropertyMetadata(OnCommandChanged));

    public ICommand Command
    {
        get { return (ICommand)GetValue(CommandProperty); }
        set { SetValue(CommandProperty, value); }
    }

    private static void OnCommandChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        // When the item name changes, set the text of the item name
        var control = (AddNewItemButton)obj;
        control.btnAddNewItem.Command = control.Command;
    }

    #endregion

} 
```

![在此处输入图像描述](../Images/325b5a9c0460a0024e6eb9db12e8bb97.png)

# 另一个显示合成的用户控件

```
<UserControl ...
         xmlns:uc="clr-namespace:Smack.Core.Presentation.Wpf.Controls.UserControls" 
         >

    <DockPanel LastChildFill="True">
        ...
        <uc:AddNewItemButton x:Name="_addNewItemButton" Margin="0,0,10 0" DockPanel.Dock="Right"  />
        ...
    </DockPanel>
</UserControl> 
```

![在此处输入图像描述](../Images/f98a94fb66ba65ac264e81ce758d6b92.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T00:44:12.537

要回答您的问题：是的，您可以通过 RelativeSource 绑定或通过后端代码中的 Parent 成员访问父控件。但更好的答案类似于@KendallFrey 的答案。采用[Light MVVM 之](http://www.galasoft.ch/mvvm/)类的框架并使用其信使类或使用 Kendall 描述的事件。

# android - 将 maven 库项目更新到主项目（android）

> ID：10200813
> 
> 赞同：1
> 
> 时间：2012-04-17T23:49:56.627
> 
> 标签：android, maven, maven-plugin, android-maven-plugin

我正在尝试通过此处找到的示例来了解 Maven Android 插件：[https ://github.com/jayway/maven-android-plugin-samples/archives/stable](https://github.com/jayway/maven-android-plugin-samples/archives/stable)

我正在使用示例“libraryproject”并且一切正常，只有一件事我真的无法弄清楚：如果我将某些内容更改为 lib1 项目（例如资源文件的内容）并编译主项目，我仍然在生成的 apk 文件中看到旧资源。

我试图清理，重建，我的apk没有变化......

抱歉，我的英语不好，愚蠢的问题结束了。

编辑：我就像yorkw所说的那样：

但现在我收到以下错误：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] Library Projects Parent
[INFO] Library Projects - Library 1
[INFO] Library Projects - Library 2
[INFO] Library Projects - Main App
[INFO] Library Projects - Instrumentation Tests
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Library Projects Parent 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Library Projects - Library 1 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- android-maven-plugin:3.1.1:generate-sources (default-generate-sources) @ libraryprojects-lib1 ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] C:\Program Files (x86)\Android\android-sdk-windows\platform-tools\aapt.exe [package, -m, -J, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib1\target\generated-sources\r, -M, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib1\AndroidManifest.xml, -S, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib1\res, --auto-add-overlay, -A, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib1\assets, -I, C:\Program Files (x86)\Android\android-sdk-windows\platforms\android-10\android.jar]
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Library Projects - Library 2 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- android-maven-plugin:3.1.1:generate-sources (default-generate-sources) @ libraryprojects-lib2 ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] C:\Program Files (x86)\Android\android-sdk-windows\platform-tools\aapt.exe [package, -m, -J, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib2\target\generated-sources\r, -M, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib2\AndroidManifest.xml, -S, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib2\res, --auto-add-overlay, -A, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-lib2\assets, -I, C:\Program Files (x86)\Android\android-sdk-windows\platforms\android-10\android.jar]
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Library Projects - Main App 1.0.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- android-maven-plugin:3.1.1:generate-sources (default-generate-sources) @ libraryprojects-mainapp ---
[DEBUG] Expanding: C:\Users\nicola\.m2\repository\com\jayway\maven\plugins\android\generation2\samples\libraryprojects\libraryprojects-lib1\1.0.0-SNAPSHOT\libraryprojects-lib1-1.0.0-SNAPSHOT.apklib into C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs\com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib1_apklib_1.0.0-SNAPSHOT
[DEBUG] expand complete
[DEBUG] Expanding: C:\Users\nicola\.m2\repository\com\jayway\maven\plugins\android\generation2\samples\libraryprojects\libraryprojects-lib2\1.0.0-SNAPSHOT\libraryprojects-lib2-1.0.0-SNAPSHOT.apklib into C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs\com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib2_apklib_1.0.0-SNAPSHOT
[DEBUG] expand complete
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] C:\Program Files (x86)\Android\android-sdk-windows\platform-tools\aapt.exe [package, -m, -J, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\generated-sources\r, -M, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\AndroidManifest.xml, -S, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\res, -S, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs/com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib1_apklib_1.0.0-SNAPSHOT/res, -S, C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs/com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib2_apklib_1.0.0-SNAPSHOT/res, --auto-add-overlay, -I, C:\Program Files (x86)\Android\android-sdk-windows\platforms\android-10\android.jar]
[INFO] C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\res\layout\main.xml:12: error: Error: No resource found that matches the given name (at 'text' with value '@string/lib1resource').
[INFO] C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\res\layout\main.xml:17: error: Error: No resource found that matches the given name (at 'text' with value '@string/lib2resource').
[ERROR] Error when generating sources.
org.apache.maven.plugin.MojoExecutionException: 
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:338)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute(GenerateSourcesMojo.java:102)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: com.jayway.maven.plugins.android.ExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe /X /C ""C:\Program Files (x86)\Android\android-sdk-windows\platform-tools\aapt.exe" package -m -J C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\generated-sources\r -M C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\AndroidManifest.xml -S C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\res -S C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs/com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib1_apklib_1.0.0-SNAPSHOT/res -S C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs/com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib2_apklib_1.0.0-SNAPSHOT/res --auto-add-overlay -I "C:\Program Files (x86)\Android\android-sdk-windows\platforms\android-10\android.jar"", Result = 1
    at com.jayway.maven.plugins.android.CommandExecutor$Factory$1.executeCommand(CommandExecutor.java:215)
    at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:336)
    ... 22 more
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Library Projects Parent ........................... SUCCESS [0.004s]
[INFO] Library Projects - Library 1 ...................... SUCCESS [1.109s]
[INFO] Library Projects - Library 2 ...................... SUCCESS [0.299s]
[INFO] Library Projects - Main App ....................... FAILURE [0.489s]
[INFO] Library Projects - Instrumentation Tests .......... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.277s
[INFO] Finished at: Wed Apr 18 02:46:34 CEST 2012
[INFO] Final Memory: 5M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.1.1:generate-sources (default-generate-sources) on project libraryprojects-mainapp: MojoExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe /X /C ""C:\Program Files (x86)\Android\android-sdk-windows\platform-tools\aapt.exe" package -m -J C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\generated-sources\r -M C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\AndroidManifest.xml -S C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\res -S C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs/com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib1_apklib_1.0.0-SNAPSHOT/res -S C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs/com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib2_apklib_1.0.0-SNAPSHOT/res --auto-add-overlay -I "C:\Program Files (x86)\Android\android-sdk-windows\platforms\android-10\android.jar"", Result = 1 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :libraryprojects-mainapp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T00:32:24.167

您应该在父项目文件夹（../libraryprojects）中构建项目（mvn clean install），这将构建 libraryprojects-lib1 项目（以便将最新的 apklib 安装到您的本地 maven 存储库中）以及 libraryprojects-mainapp 项目。

如果您在子项目文件夹 (../libraryprojects/libraryprojects-mainapp) 中构建项目 (mvn clean install)，这将仅构建 libraryprojects-mainapp 并使用存储在本地 maven 存储库中的现有 apklib 进行项目依赖。换句话说，libraryprojects-lib1 项目重新构建并没有发生并有助于 libraryprojects-mainapp 项目的构建生命周期。

请注意，如果您在 Eclipse 中导入整个项目并通过 Eclipse 清理/构建 libraryprojects-mainapp，它将自动触发依赖库项目 libraryprojects-lib1 的重新构建过程。

* * *

**更新：**

我已经下载了最新的 android maven 插件并在我的 Windows XP 机器上试一试并复制了问题，这实际上是微软的错误！如果您尝试访问（这是构建项目时创建的临时文件夹 Maven 之一）：

```
C:\Users\nicola\Desktop\maven_example\jayway-maven-android-plugin-samples-c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs\com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib2_apklib_1.0.0-SNAPSHOT\res 
```

从资源管理器，你得到： ![在此处输入图像描述](../Images/2eedeb871c267e91653d8731d0322949.png)

查看[此处](http://support.microsoft.com/kb/177665)和[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)了解更多详细信息。Windows 上的最大路径长度限制为 256 个字符。

**解决方案：**

首先，尝试使用短路径，例如，将找到以下内容：

```
 C:\c475bf4\libraryprojects\libraryprojects-mainapp\target\unpack\apklibs\com.jayway.maven.plugins.android.generation2.samples.libraryprojects_libraryprojects-lib2_apklib_1.0.0-SNAPSHOT\res 
```

然后再试一次，看看你是否可以构建它，你可能会得到另一个构建错误（我在我的 Windows XP 机器上尝试并得到这个错误）如下：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.1:compile (default-compile) on project libraryprojects-mainapp: Compilation failure: Compilation failure:
[ERROR] C:\c475bf4\libraryprojects\libraryprojects-mainapp\src\main\java\com\jayway\maven\plugins\android\generation2\samples\libraryprojects\mainapp\MainActivity.java:[16,5] annotations are not supported in -source 1.3 
```

要解决此问题，您可以在 ..\libraryprojects\pom.xml 中指定更高版本的 maven-compiler-plugin：

```
<plugin>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>2.3</version>
  <configuration>
    <source>1.6</source>
    <target>1.6</target>
  </configuration>
</plugin> 
```

最后但同样重要的是，请注意，您需要打开一个模拟器才能让测试子项目运行仪器测试，否则构建测试项目将失败。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T10:48:21.600

我遇到了同样的问题，解决方案是使用 Eclipse Marketplace 更新/安装 Maven android 配置器。（Eclipse 帮助 -> Eclipse 市场 -> 找到 maven android 配置器并安装它）

早些时候我还使用 Eclipse 帮助更新了 m2e 插件 -> 检查更新

如果没有帮助，请尝试逐步搜索错误。我在[这里描述了使用 android 和 eclipse 配置 maven 所需的所有步骤](http://looksok.wordpress.com/2012/05/12/use-maven-with-android-project/)

# ios - 如何在 UIView 上设置渐变边框？

> ID：10200814
> 
> 赞同：6
> 
> 时间：2012-04-17T23:50:03.987
> 
> 标签：ios, uiview, core-graphics, quartz-2d

在`UIView`. 您只需链接到`QuartzCore`，导入它，然后使用：

```
self.view.layer.borderColor = [UIColor redColor].CGColor;
self.view.layer.borderWidth = 2.0f; 
```

我的问题是......有没有办法让这个边框使用渐变。我知道如何将渐变蒙版应用于整个视图，而不仅仅是其边框。我假设这可能涉及自定义视图和`CoreGraphics`内部绘图`drawRect:`，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T11:32:09.817

我不完全确定您所说的“渐变”是什么意思。既然您说过您已经使用核心图形将渐变应用于形状，那么我假设您的意思是（而不是前面的答案所指的阴影）。

您不能将渐变应用到边框。但是，您可以使用自定义形状创建自己的边框。最简单的方法是创建两条路径，一条外部路径和一条内部路径。为简单起见，我们假设路径是一个简单的矩形（在 中给出的矩形`drawRect`）：

```
UIBezierPath *path = [UIBezierPath bezierPathWithRect:rect]; 
```

第二条路径将是比第一条更小的内部路径（足以制作边框）：

```
//To create a 1.0f borderWidth
CGRect innerRect = rect;
innerRect.origin.x += 1.0f;
innerRect.origin.y += 1.0f;
innerRect.size.width -= 2.0f;
innerRect.size.height -= 2.0f;
UIBezierPath *innerPath = [UIBezierPath bezierPathWithRect:innerRect]; 
```

现在，将内部路径附加到正常路径并确保该路径使用 evenOddFillRule。evenOddFillRule 将告诉核心图形仅填充外部部分，而单独保留内部部分。哦，你会想要剪辑到路径：

```
[path appendPath:innerPath];
path.usesEvenOddFillRule = YES;
[path addClip]; 
```

如果您对该形状应用渐变，它将填充内部路径之外和外部路径内部，从而形成具有渐变的边框。

***更新***

如果您的目标是 iOS 5.0，可能会有更好的方法来做到这一点。我发现了一个非凡的新路径函数，称为[CGPathCreateCopyByStrokingPath()](https://developer.apple.com/library/ios/documentation/graphicsimaging/Reference/CGPath/Reference/reference.html#//apple_ref/doc/uid/TP30000959-CH1g-SW6)。有关详细信息，请参阅链接，但基本上它会创建一个新路径，即原始路径的描边，因此如果您填充新路径，它将创建与抚摸旧路径相同的图像。这太棒了，因为您可以剪辑到新路径，然后用渐变填充，而不是填充新路径，从而为您提供渐变边框。这比我之前提到的方法要容易得多，但当然，它只在 iOS 5.0 中可用。这也将使创建新的复杂形状变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T01:58:02.510

我创建了第二个渐变层，颜色在数组中反转，然后使第二层的框架比第一层略小。创建边框的外观。

# java - 如何在 Java 中存储数字一万亿？

> ID：10200817
> 
> 赞同：2
> 
> 时间：2012-04-17T23:50:32.087
> 
> 标签：java, primitive

我正在尝试将数字一万亿存储在一个变量中。然而，即使变量类型很长，eclipse 也会继续磨损它超出其范围。

这是我的代码：

```
long temp = 1;

if(...){
    temp = 1000000000000;
} 
```

如果有人对为什么会发生这种情况有任何见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T23:53:12.100

尝试

```
temp = 1000000000000L; 
```

java中的1000000000000被识别为int，最后加L使其变长

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:55:17.917

Java 在数学库中有一个 BigInteger 类型。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)

例子：

```
import java.math.BigInteger;
public class BigIntegerExample 
{
  public static void main(String[] args) 
  {
  BigInteger bigInteger1 = new BigInteger ("123456789");
  BigInteger bigInteger2 = new BigInteger ("112334");
  BigInteger bigIntResult =
    bigInteger1.multiply(bigInteger2); 
  System.out.println("Result is  ==> " + bigIntResult);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T00:13:41.897

Java中的an`int`是有符号的32bit，所以最大的int值是2,147,483,647。使用 long 来表示更大的数字，例如 1 万亿，是一个不错的选择。

```
long temp = 1000000000000L; 
```

要了解有关 Java 的原始数据类型*及其限制*的更多信息，我强烈建议您参考这篇关于[原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的 Oracle 文章。

# java - 查询用户时 JPA 潜在的性能问题

> ID：10200820
> 
> 赞同：1
> 
> 时间：2012-04-17T23:50:52.210
> 
> 标签：java, performance, jpa, eclipselink

寻找一些关于在认证时查询用户的反馈。在编写下面的代码时，我的第一个想法是通过查询数据库中的所有用户名并检查提供的用户名是否属于用户列表来获取用户名。当用户表增长时，这种类型的检查会成为性能问题吗？

```
 EntityManager entityManager = factory.createEntityManager();
    /*Create a data structure to hold a list of users in our database*/
    List<String> allUsernames = new ArrayList<String>();  

    allUsernames = entityManager.createQuery("SELECT user.username FROM Users user").getResultList();

    /*Loop through each user in our available usernames checking if the username passed exists*/
    for (String user : allUsernames) {

        if (user.equals(username)) {
            System.out.println("Found real user\n");
            userFoundFLAG = 1; // set the flag equal to 1 when this user is found
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:21:29.663

是的，这将是一个性能问题，随着用户数量的增加，这将成为一个更大的问题。绝对不要这样做。

您应该执行以下操作：

```
try {
    User user = (User)entityManager.createQuery("SELECT user FROM Users user where user.username = :username")
        .setParameter ("username", username);
        .getSingleResult();
    userFoundFLAG = 1;
} catch (NoResultException e) {
    //There is no user with this username - do something
} catch (NonUniqueResultException e) {
    //There is more than one user with this username - do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:56:31.770

为什么不直接按名称查询用户？如果返回非零列表，则用户存在，否则不存在。更好的是，为什么不直接读取整个用户对象，因为可以想象，您将需要它来进行额外的身份验证/授权逻辑？

```
final TypedQuery<String> query = entityManager
      .createQuery("SELECT u.username FROM Users u WHERE u.username = :username", String.class);
query.setParameter("username", "BillyBob");
if (query.getResultList().size() > 0) {
   // ...
} 
```

或者：

```
final TypedQuery<User> query = entityManager
      .createQuery("SELECT u FROM Users u WHERE u.username = :username");
query.setParameter("username", "BillyBob");
final User user = query.getFirstResult(); 
```

# python - 如何在不使用任何内置 python 函数的情况下将 str 更改为 int ，反之亦然？

> ID：10200824
> 
> 赞同：0
> 
> 时间：2012-04-17T23:51:16.593
> 
> 标签：python, string, int

该函数假设在这两种情况下输入都是可以接受的（即）当对 str 执行 int 时假设 str 包含一个实际的 int，反之亦然总是有效

该函数也不得使用易于使用的 Python 内置函数，例如 int() 或 str()。只能使用基本编码以及 def 标头，例如（for i in rang() 和条件等等。）请帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:01:00.810

```
def str2int(s):
    i = 0
    chr2digit = {`j`:j for j in (0,1,2,3,4,5,6,7,8,9)}
    for c in s:
        i = i*10 + chr2digit[c]
    return i

def int2str(i):  # rather easy in Python2
    return `i`

def int2str(i):  # works in Python2 and Python3
    return "%s"%i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:12:22.043

它可能很难看，但它确实有效。看这个功能：

```
>>> def strint(val):
    digits = '0123456789'
    try:
        # Trying to treat it as a string-to-int conversion
        result = 0
        for l in val:
            result = result * 10 + digits.index(l)
    except (TypeError,):
        # There was a type error - we have int instead of string
        result = ''
        while val:
            digit = val % 10
            result = digits[digit] + result
            val = val // 10
        else:
            if not val and not result:
                result = '0'
    return result

>>> strint('123')
123
>>> strint(123)
'123'
>>> strint('0')
0
>>> strint(0)
'0' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:58:04.713

这只是为了`int`更换，并不能处理所有事情，但这是家庭作业，所以我会让你做剩下的。如果您使用`ord`.

```
def myint(s):
   x = 0
   for ch in s:
      if ch == '0': x = x * 10 + 0
      if ch == '1': x = x * 10 + 1
      if ch == '2': x = x * 10 + 2
      if ch == '3': x = x * 10 + 3
      if ch == '4': x = x * 10 + 4
      if ch == '5': x = x * 10 + 5
      if ch == '6': x = x * 10 + 6
      if ch == '7': x = x * 10 + 7
      if ch == '8': x = x * 10 + 8
      if ch == '9': x = x * 10 + 9
   return x 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:02:42.407

这是您可以考虑的一种方法：

```
x = "1"
print type(x)
<type 'str'>
import string
if x in string.digits:
    # Now you know that x is a number
    print x 
```

你也可以对[string.ascii_letters](http://docs.python.org/library/string.html)做同样的事情。不是一个完整的答案，但应该指出你正确的方向。

# php - ajax 调用 php 文件

> ID：10200825
> 
> 赞同：0
> 
> 时间：2012-04-17T23:51:28.357
> 
> 标签：php, javascript, ajax, jquery

我试图在调用 javascript 函数然后重新加载页面时运行 php 文件，它会重新加载页面但 php 文件没有被执行。

```
function changeR() 
{
    $.ajax({ url: 'win.php?id=1' });
    window.location.reload()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:53:45.363

ajax 调用完成后重新加载。您可以使用成功事件。

```
function changeR() 
{
  $.ajax({ url: 'win.php?id=1' ,
            success: function(data) {
                       window.location.reload()
                    }
        }); 
} 
```

请记住，如果ajax调用成功，将执行成功事件，如果您想执行一些代码，无论是成功还是错误，您都可以考虑，`[complete][1]`或者`done`

或者，您可以尝试`window.location.href=window.location.href`代替`window.location.reload()`

通常人们使用 ajax 进行**部分页面更新而无需重新加载页面**。您确定要在 ajax 调用后重新加载整个页面吗？

**编辑：**根据评论

如果你想通过这个 ajax 调用传递你的 php 变量值，你可以这样做

将值设置为某个 html 元素（例如：id 为 txtID 的隐藏元素）

```
//Reading the value of an html element with id `txtId` 
var val=$("#txtID").val();
$.ajax({ url: 'win.php' ,
         data: { id: val },
         success: function(data) {
                   window.location.reload()
                }
 }); 
```

在这里，您将在名为 的参数中发送元素的值`id`。您可以使用 firebug 或 fiddler 查看正在发生的值。

更多选项在这里：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T23:54:12.160

AJAX 调用是异步的，这意味着您`window.location.reload()`在 AJAX 请求完成之前执行。相反，等到 AJAX 请求完成，*然后*重新加载。

```
function changeR() 
{
  $.ajax({
    url: 'win.php?id=1'
  }).done(function() {
    window.location.reload()
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T23:59:04.980

首先确保您的`win.php`脚本中没有可能阻止它成功执行的错误。

其次，只有在ajax调用完成后才执行reload。完成此操作的更简单方法是将`asyc`设置设置为`false`。这样调用是同步完成的，这意味着它将等待其执行完成后再继续。

```
function changeR() 
{
    $.ajax({ url: 'win.php?id=1', async: false });
    window.location.reload()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:02:12.500

在你的'changeR'函数中试试这个：

```
$.ajax({
type: "GET",
url: "win.php",
data: "id=1",
success: function(msg){
  window.location.reload();
}
}); 
```

# c++ - 模板化优先级队列导致对象成为指针。C++

> ID：10200827
> 
> 赞同：2
> 
> 时间：2012-04-17T23:51:41.237
> 
> 标签：c++, templates, data-structures, heap, priority-queue

我正在尝试使用堆来实现一个模板化的优先级队列来处理图像中像素的频率。它工作得很好，但是当我尝试通过将另一个类作为模板参数传递来使用它时，它最终会在尝试向下或向上重新堆时将该类转换为指向该类的指针。这是堆规范：

```
template <typename ItemType>
struct HeapType
{
    void ReheapDown(int, int);
    void ReheapUp(int, int);
    ItemType *elements;
    int numElements;
}; 
```

重新堆放功能：

```
template<typename ItemType>
void HeapType<ItemType>::ReheapDown(int root, int bottom)
{
    int maxChild, rightChild, leftChild;
    leftChild = 2*root+1;
    rightChild = 2*root+2;

    if(leftChild <= bottom)
    {
        if(leftChild == bottom)
        {
            maxChild = leftChild;
        }
        else
        {
            if(elements[leftChild] <= elements[rightChild])
                maxChild = rightChild;
            else
                maxChild = leftChild;
        }
        if(elements[root] < elements[maxChild])
        {
            Swap(elements, root, maxChild);
            ReheapDown(maxChild, bottom);
        }
    }
} 
```

和交换功能：

```
template<typename ItemType>
void Swap(ItemType &itemSwap, int swapFrom, int swapTo)
{
    ItemType tempItem;
    tempItem = itemSwap[swapFrom];
    itemSwap[swapFrom] = itemSwap[swapTo];
    itemSwap[swapTo] = tempItem;
} 
```

因此，我使用名为 Pfreq 的辅助类来实现优先级队列，该类重载比较运算符，以便堆按像素的频率而不是像素的值进行排序。它没有问题，直到它到达 Swap 函数，然后抱怨它不能将类型从 Pfreq 转换为 Pfreq*。我不完全确定如何解决模板导致使用 Pfreq* 类型调用 Swap 函数的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T23:58:50.800

我认为问题在于这个函数的声明：

```
template<typename ItemType>
    void Swap(ItemType &itemSwap, int swapFrom, int swapTo) 
```

您正在尝试将第一个参数用作数组，如下所示：

```
ItemType tempItem;
tempItem = itemSwap[swapFrom];
itemSwap[swapFrom] = itemSwap[swapTo];
itemSwap[swapTo] = tempItem; 
```

问题是它`itemSwap`是对 an 的引用`ItemType`，而不是`ItemType`s 的数组或指向 an 的指针`ItemType`。尝试将该参数更改为 an`ItemType*`并查看是否可以解决问题。

希望这可以帮助！

# delphi - WM_NCHITTEST 不能以 WS_EX_LAYERED 形式工作

> ID：10200829
> 
> 赞同：5
> 
> 时间：2012-04-17T23:51:43.747
> 
> 标签：delphi

我正在使用这篇文章[http://melander.dk/articles/alphasplash/](http://melander.dk/articles/alphasplash/)的代码在表单中显示 32 位位图，但是当我尝试使用纯色位图而不是图像时，WM_NCHITTEST 消息不是收到，我无法移动表格。如果我使用 32 位图图像，代码就可以正常工作。我在这里缺少什么？

这是代码

```
uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  protected
    { Private declarations }
    procedure WMNCHitTest(var Message: TWMNCHitTest); message WM_NCHITTEST;
  public
    { Public declarations }
  end;

var
  Form1 : TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  BlendFunction: TBlendFunction;
  BitmapPos: TPoint;
  BitmapSize: TSize;
  exStyle: DWORD;
  Bitmap: TBitmap;
begin
  // Enable window layering
  exStyle := GetWindowLongA(Handle, GWL_EXSTYLE);
  if (exStyle and WS_EX_LAYERED = 0) then
    SetWindowLong(Handle, GWL_EXSTYLE, exStyle or WS_EX_LAYERED);

  Bitmap := TBitmap.Create;
  try
   //Bitmap.LoadFromFile('splash.bmp'); //if I use a image the code works fine

    Bitmap.PixelFormat := pf32bit;
    Bitmap.SetSize(Width, Height);    
    Bitmap.Canvas.Brush.Color:=clRed;
    Bitmap.Canvas.FillRect(Rect(0,0, Bitmap.Width, Bitmap.Height));

    // Position bitmap on form
    BitmapPos := Point(0, 0);
    BitmapSize.cx := Bitmap.Width;
    BitmapSize.cy := Bitmap.Height;

    // Setup alpha blending parameters
    BlendFunction.BlendOp := AC_SRC_OVER;
    BlendFunction.BlendFlags := 0;
    BlendFunction.SourceConstantAlpha := 255;
    BlendFunction.AlphaFormat := AC_SRC_ALPHA;

    UpdateLayeredWindow(Handle, 0, nil, @BitmapSize, Bitmap.Canvas.Handle,
      @BitmapPos, 0, @BlendFunction, ULW_ALPHA);
    Show;
  finally
    Bitmap.Free;
  end;
end;

procedure TForm1.WMNCHitTest(var Message: TWMNCHitTest);
begin
  Message.Result := HTCAPTION;
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T01:36:31.217

尝试：

```
BlendFunction.SourceConstantAlpha := 150; // 255 is fully opaque.
BlendFunction.AlphaFormat := 0; 
```

因为您的位图数据没有源 alpha。`AlphaFormat`对于 TBitmap 是默认的`afIgnored`。'AC_SRC_ALPHA' 仅用于颜色值预乘 alpha 的图像。您从磁盘加载的图像可能具有正确的 Alpha 通道。

我真的无法猜测与“WM_NC_HITTEST”的关系是什么，但错误的输入会产生错误的结果:)。

# iphone - iPhone不显示多个背景？

> ID：10200832
> 
> 赞同：2
> 
> 时间：2012-04-17T23:51:56.733
> 
> 标签：iphone, css, mobile-safari

我遇到了这个特定网站没有显示其中一个背景的问题。我没有设计这个网站，它今天才交给我。

但网址是： http: [//musicalchairswc.com/](http://musicalchairswc.com/)

CSS是：

```
div.body_wrapper {
  background-image:url(img/big_bg_mod.jpg), url(img/bg_gradient.jpg);
  background-repeat:no-repeat, repeat-y;
  background-position: center -25px, center top;

} 
```

但在 iPhone 上，第一个背景 (img/big_bg_mod.jpg) 不显示。据我了解 - Mobile Safari 现在支持多种背景，是吗？

预先感谢您的任何指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T05:15:39.597

阅读精美的文档。

[http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-SW15](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-SW15)

> JPEG 的最大解码图像大小为 32 兆像素，使用二次采样。

这是我接近它的方式。

```
div.body_wrapper {
  background-image:url(img/big_bg_mod_1-1.jpg), url(img/big_bg_mod_1-2.jpg), url(img/big_bg_mod_1-3.jpg), url(img/bg_gradient.jpg);
  background-repeat:no-repeat, repeat-y;
  background-position: center -25px, center 1000px, center 2000px, center top;
} 
```

我拆分 big_bg_mod.jpg (2320x1000, 2320x1000, 2320x320)

# c# - 不允许对 IsolatedStorageFileStream 错误进行操作

> ID：10200840
> 
> 赞同：4
> 
> 时间：2012-04-17T23:52:47.833
> 
> 标签：c#, silverlight, windows-phone-7

`operation not permitted on IsolatedStorageFileStream`当我尝试将文件的内容保存在 fileStream fs 中时，它会出错。

```
var appStorage = IsolatedStorageFile.GetUserStoreForApplication();
string[] fileList = appStorage.GetFileNames();

foreach (string fileName in fileList)
    {
       using (var file = appStorage.OpenFile(fileName, FileMode.Open))
       {
           if (fileName != "__ApplicationSettings")
           {
               var fs = new IsolatedStorageFileStream(fileName, FileMode.Open, FileAccess.Read, appStorage);
               string abc = fs.ToString();
               meTextBlock.Text = abc;
               //MemoryStream ms = appStorage.OpenFile(fileName, FileMode.Open, FileAccess.Read);

               clientUpload.UploadAsync(SkyDriveFolderId, fileName, fs);
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T00:24:18.023

为什么要添加内部`using (var file = appStorage.OpenFile(fileName, FileMode.Open))`？

在我看来，问题在于您正在打开一个流来读取文件，然后打开另一个，而不关闭前一个！

如果您删除该行（似乎在那里没有做任何事情），它应该可以正常工作。

哦，`fs.ToString()`这只会给你类型名称，而不是文件内容；要读取文件，请将 a`StreamReader`与`fs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T02:30:12.393

当一个流（或读取器或其他）打开隔离存储文件并且正在由另一个对象访问而第一个流（或读取器或其他）尚未放弃文件时，此错误始终发生。在您访问隔离存储文件的所有地方仔细检查您的代码，并确保在其他人访问它之前关闭每个文件。Pedro Lamas 对于这种特殊情况是正确的，我只是想提供一些一般性的反馈。如果您在 Google 上搜索“Operation not allowed on IsolatedStorageFileStream 错误”问题和答案，您会看到趋势。不过，错误消息可能更具描述性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T17:52:22.340

试试这个方法

```
using (var isf = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    if (IsolatedStorageFile.IsEnabled)
                    {
                        if (isf.FileExists(localFileName))
                        {
                            using (var isfs = new IsolatedStorageFileStream(localFileName, FileMode.Open, isf))
                            {
                                using (var sr = new StreamReader(isfs))
                                {
                                    var data = sr.ReadToEnd();
                                    if (data != null)
                                    {
                                       ... 
```

# javascript - CSS 或 Javascript DIV 对齐

> ID：10200849
> 
> 赞同：1
> 
> 时间：2012-04-17T23:54:00.453
> 
> 标签：javascript, css

我有网站，php 代码在同一页面上生成所有产品。

到目前为止，我得到了这样的东西。

[http://ratecleveland.com/irregular_height_columns.jpg](http://ratecleveland.com/irregular_height_columns.jpg)

但是我想得到这样的东西。

[http://ratecleveland.com/new.jpg](http://ratecleveland.com/new.jpg)

知道这是否可以在 CSS 中完成。或者如果没有，是否有 javascript 示例。

感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T23:56:29.557

jQuery砌体： http: [//masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:03:11.497

这是一个小提琴，使用 display:inline-block; 使用 ?display hack

[http://jsfiddle.net/qW3TV/](http://jsfiddle.net/qW3TV/)

不需要javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T00:06:55.893

看起来所有的 div 都是相同的宽度。为什么不围绕要堆叠的列创建包含列的 div？

```
<div class="col1">
    <div class="a"></div>
    <div class="e"></div>
    <div class="i"></div>
</div>
<div class="col2">
    <div class="b"></div>
    <div class="f"></div>
    <div class="k"></div>
</div>
<div class="col3">
    <div class="c"></div>
    <div class="g"></div>
    <div class="l"></div>
</div>
<div class="col4">
    <div class="d"></div>
    <div class="h"></div>
    <div class="m"></div>
</div> 
```

将每一列向左浮动，您的内部 div 似乎已经具有指定的宽度和高度，将落入适当的位置。你甚至可以给列赋予相同的类，因为它们只是浮动的左容器。

# php - Mysql 按时间分组有多个条件

> ID：10200850
> 
> 赞同：0
> 
> 时间：2012-04-17T23:54:02.460
> 
> 标签：php, mysql, group-by

鉴于下面的示例数据，我如何才能每分钟只获取一行`time`？

然后我需要做出这样的条件：

```
SELECT IF (`Flag` IS NOT NULL,
           [fetch flag row],
           [otherwise fetch one row from that minute]); 
```

样本数据

```
ID  Rate    Flag        time 
1   68.65    null       2012-04-18 10.00.01
2   68.63    null       2012-04-18 10.00.11
3   68.68    null       2012-04-18 10.00.21
4   68.70    null       2012-04-18 10.00.31
5   68.71    null       2012-04-18 10.00.41
6   68.60    null       2012-04-18 10.00.51
7   68.64    null       2012-04-18 10.01.01
8   68.75    null       2012-04-18 10.01.11
9   68.72    1          2012-04-18 10.01.21
10  68.63    null       2012-04-18 10.01.31
11  68.62    null       2012-04-18 10.01.41
12  68.60    null       2012-04-18 10.01.51

Expected Output
1   68.65    null       2012-04-18 10.00.01
9   68.72    1          2012-04-18 10.01.21 
```

这是我到目前为止所得到的：

```
SELECT FLAG as signal, DATE_FORMAT(TIME, '%Y-%m-%d %H:%i') as time, RATE as rate
       FROM RATES WHERE (FLAG!='' || (DATE_FORMAT(TIME, '%s')>50 ))
   GROUP BY time
   ORDER BY time DESC,FLAG DESC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T01:27:31.830

您的问题可以描述为：在同一分钟分组的每组行中找到具有最大标志的行，如果多行具有相同的标志，则选择任何行。所以查询应该如下所示：

```
SELECT r.id, r.rate, rg.flag, rg.minute
FROM
  ( SELECT MAX(flag) as flag , DATE_FORMAT(`TIME`, '%Y-%m-%d %H:%i') as minute
     FROM RATES
     GROUP BY minute ) rg
JOIN RATES r
ON r.id =(SELECT ru.id FROM RATES ru
          WHERE ru.flag <=> rg.flag
          AND ru.time BETWEEN CONCAT(rg.minute,':00') AND CONCAT(rg.minute,':59')
          LIMIT 1) 
```

# matlab - 在 MATLAB 中随时间导入数据

> ID：10200856
> 
> 赞同：0
> 
> 时间：2012-04-17T23:54:49.373
> 
> 标签：matlab, datetime, file-io, import

如何在 MATLAB 中导入以下文本数据文件：

```
day    time        price       volume
01     8:00:06    29.0000      1000
01     8:00:06    29.1000       200
01     8:02:08    29.0700      1000
01     8:03:12    29.0000      1000 
```

我尝试了以下代码但不起作用：

```
fid = fopen('data.txt');
dateItem = [];
values = [];
while ~feof(fid)
  [dateItem]= [dateItem ; fscanf(fid,'%s %s',2)]; 
  [values]= [values ; fscanf(fid,'%f %f',2)];
end
fclose(fid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T19:37:03.597

在终端输入“help importdata”将显示有关如何使用 importdata 功能的有用信息。或者，您可以使用主菜单上的 Import Data 功能（它是 MATLAB 2013 的一个大按钮，它位于以前版本的菜单栏上），它可以生成用于导入特定文件布局的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T03:16:36.633

很多小修复，

但这将是第一步

```
values = [];
dateItem= char(dateItem, fscanf(fid,'%s %s %s %s',4)); %If you don't want this remove the equal statement  but keep fscanf
while ~feof(fid)
  dateItem = char(dateItem, [fscanf(fid,'%s',1),' ', fscanf(fid,'%s',1)]); 
  values= [values; (fscanf(fid,'%f%f',2))'];
end
fclose(fid); 
```

# objective-c - 通过 SSH 从 iOS 远程重启/关闭 mac？

> ID：10200859
> 
> 赞同：0
> 
> 时间：2012-04-17T23:55:09.617
> 
> 标签：objective-c, ios, cocoa-touch, ssh, applescript

我将旧笔记本电脑设置为媒体服务器并创建了一个 mac 应用程序，该应用程序`AppleScript`将根据按下的按钮远程重启或关闭 mac，使用以下代码：

```
tell application "Finder" of machine "eppc://USERNAME:PASSWORD@MYSERVER"
    shut down
end tell 
```

它超级简单，而且很容易编写，但现在我想创建一个可以与 mac 配套的 iPad 应用程序。理想情况下，我想像我说`AppleScript`的那样使用它，它非常简单，但我觉得这不是一个选择。

还有哪些其他方法可以做到这一点？在我单击一个按钮的地方，它会连接到我的 Mac 并关闭或重新启动。

我觉得最好的方法是使用`SSH`，现在我正在查看[https://github.com/x2on/libssh2-for-iOS](https://github.com/x2on/libssh2-for-iOS)。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:24:55.957

好吧，只是为了集思广益...... Dropbox 是一种在机器之间共享内容的好方法，但它也是一种相当不错的通信机制。

我使用 Dropbox 在我的家用计算机上启动（仅限合法！）bittorrent 下载，方法是设置我的 torrent 客户端以查看传入的 .torrent 文件的保管箱文件夹。然后，我可以将 .torrents 保存到我安装了 Dropbox 的任何机器上的该目录中，或者原则上从我的 iOS 设备上可以共享到 Dropbox 的浏览器中保存，以及即时远程启动。我可以坐在另一台机器上，将 .torrent 保存到该目录，观察其文件扩展名更改为 .torrent.imported，并知道当我回到我的主机时，该内容将被下载。

您可以使用文件夹操作或 cron 作业来查看某个 Dropbox 文件夹中的命令，然后将文件放入该文件夹中，以触发这些脚本执行某些行为。Dropbox 有一个非常棒的 iOS 客户端库，它完全可以从自定义应用程序将内容存储到 Dropbox。

# c# - 使用 Selenium 在日期选择器中自动选择日期

> ID：10200865
> 
> 赞同：1
> 
> 时间：2012-04-17T23:55:46.617
> 
> 标签：c#, selenium, css-selectors

我在尝试自动化测试以从日期选择器中选择日期时遇到问题（没有日期输入字段）。我已经搜索并看到了几个示例，其中一个特别说明您可以将它与 By.CssSelector 一起使用，但我不确定在此具体需要指定什么。

这是 HTML：

```
<td class="dpTD" onmouseout="this.className=&quot;dpTD&quot;;" 
onmouseover="this.className=&quot;dpTDHover&quot;;" 
onclick="updateDateField('03/04/2012', '2', '3', '3', '2012');">3</td> 
```

这是 C#：

```
WebDriver.FindElement(By.CssSelector("inputtexthere")).Click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:59:06.170

看起来您可以按其类选择它：

```
WebDriver.FindElement(By.CssSelector(".dpTD")).Click(); 
```

或者，如果该类有多个单元格，请尝试使用以下方法缩小范围`:contains()`：

```
WebDriver.FindElement(By.CssSelector(".dpTD:contains('3')")).Click(); 
```

甚至是属性子字符串选择器：

```
WebDriver.FindElement(By.CssSelector(".dpTD[onclick*=updateDateField]")).Click(); 
```

我只是在这里提出建议，因为没有足够的标记可以使用。如果您使用过 CSS，则几乎可以将任何选择器与 Selenium 一起使用。

# c - 为什么总是说“未定义的引用”？

> ID：10200868
> 
> 赞同：1
> 
> 时间：2012-04-17T23:56:03.667
> 
> 标签：c, gcc, dll, linker, mingw

（我在 Windows 上。）

我正在用一个看起来像这样的 C 程序测试我编译的 DLL ( [libsox )：](http://sox.sourceforge.net/)

```
#include <stdio.h>
#include "sox.h"

int main(void) {
    char const * versionText = sox_version();
    printf(versionText);
    return 0;
} 
```

DLL 中定义的函数具有以下原型`sox.h`（其中包含`cdecl`）：

```
LSX_RETURN_VALID_Z LSX_RETURN_PURE
char const *
LSX_API
sox_version(void); 
```

这是问题所在：当我尝试使用构建文件时`gcc -lsox -o test.exe test.c`出现以下错误：

```
C:\DOKUME~1\ADMINI~1\LOKALE~1\Temp\ccSS2h2z.o:test.c:(.text+0xf): undefined reference to `sox_version'
collect2: ld returned 1 exit status 
```

一句话：我在 MinGW 的文件夹`-lsox`中有库文件“libsox.dll.a” 。`lib`如果我写`-lsoxnonsense`，那么它说没有图书馆。这意味着在所示情况下它会找到库。那么它为什么不想创建一个链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T00:05:09.047

```
gcc -lsox -o test.exe test.c 
```

您必须首先放置源文件：

```
gcc test.c -lsox -o test.exe 
```

这是因为链接器按顺序遍历输入文件，找到未定义的引用并满足它之前看到的引用。所以在你的命令行中，它读取`libsox.a`（或类似的东西），找到未定义的引用（不会有）。然后，它转到您的`test.c`，在那里找到未定义的引用，但没有其他库可以满足它们。

[有关更多信息，请参阅此答案。](https://stackoverflow.com/a/409470/51831)

# html - rgb 着色在 chrome 和 firefox 中失败

> ID：10200872
> 
> 赞同：1
> 
> 时间：2012-04-17T23:56:19.573
> 
> 标签：html

我正在为自己创建一个简单的测试页，其中我遇到了一个令人惊讶的错误。Firefox 和 chrome 无法正确解析“rgb”着色属性。我知道不推荐使用“bg_color”，而且我知道使用“#code”总是更好，但现在我想知道是什么导致了这个问题。我也检查过，显然 IE 没有这样的错误。或者我做错了什么？此代码将导致 chrome 和 FF 中的深蓝色 bg 颜色。

```
<html>
<body>

<table border="1">
  <tr>
    <th>Month</th>
    <th>Savings</th>
  </tr>
  <tr>
    <td bgcolor="#FF0000">January</td>
    <td bgcolor="rgb(0,255,0)">$100</td>
  </tr>
</table>

</body> 
```

旁注：浏览器应该支持[w3school中所写的 rgb](http://www.w3schools.com/tags/att_td_bgcolor.asp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T01:09:50.817

HTML 属性与 CSS 不同。rgb() 表示法仅适用于 CSS，不适用于`bgcolor`or`color`属性。

*但是，您可以在*属性中使用 CSS - 特别是`style`属性，如果您不想生成样式表：

```
<td style="background-color: rgb(0,255,0)"> 
```

# facebook - Facebook 调试器工具显示 og:type: profile 而不是 og:type: music

> ID：10200876
> 
> 赞同：1
> 
> 时间：2012-04-17T23:57:11.780
> 
> 标签：facebook, facebook-opengraph

我们使用 Open Graph 标签对人进行分类。

例如，猫王当然是音乐家：

[http://www. Famousbirthdays.com/people/elvis-presley.html](http://www.famousbirthdays.com/people/elvis-presley.html)

```
<meta property="og:type" content="musician"/> 
```

但是，当我运行 Facebook 对象调试器时 - 这是它在 type 下所说的

```
og:type:    profile 
```

为什么它在对象调试器的类型下说配置文件而不是音乐家？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:13:26.750

音乐家是一个人，一个人有一个轮廓。所以调试器说是的，这是一个音乐家，但那个音乐家实际上是一种数据类型：profile。

如果您不提供自己的命名空间（这就是 CURIE 的用途），og:type 会受到垂直领域的限制。见[http://ogp.me/#types](http://ogp.me/#types)

> music:musician - profile - 创作这首歌的音乐家。

请记住，在开放图中，所有内容都应该链接到其他内容。只有少数情况是属性非链接。

# sql - 在 WHERE 语句中使用 IS NULL

> ID：10200879
> 
> 赞同：0
> 
> 时间：2012-04-17T23:57:29.110
> 
> 标签：sql, sql-server, sql-server-2008

```
 [dbo].[StoreProc1]
 (
 @Name varchar(10) = NULL,
 @Age int
 )

 SELECT * FROM TABLE WHERE Name = @Name and Age = @Age 
```

但是，由于`@Name = NULL`不正确，存储过程不知道输入是否`Name`为 Null 或 Not to do`Name IS NULL`或`Name = '<value>'`

什么是快速解决这个问题？

我想我可以做这样的事情，但没有更简单的方法吗？

```
IF @Name IS NULL 
BEGIN 
  SELECT * FROM TABLE WHERE NAME IS NULL AND AGE=@AGE
END
ELSE
BEGIN
  SELECT * FROM TABLE WHERE NAME=@NAME AND AGE=@AGE
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T00:00:30.517

```
[dbo].[StoreProc1]
 (
 @Name varchar(10) = NULL,
 @Age int
 )

 SELECT * FROM TABLE WHERE (Name = @Name OR COALESCE(Name, @Name) IS NULL) and Age = @Age 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:00:18.910

改为`Name = @Name`：

```
( Name = @Name OR Name IS NULL AND @Name IS NULL ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T02:52:54.993

假设您想在 name = @Name 或它们都为 null 时获得结果，那么我将采用以下方法。

```
[dbo].[StoreProc1]
(
 @Name varchar(10) = NULL,
 @Age int
)

 SELECT * 
   FROM TABLE 
  WHERE (Name = @Name 
         OR ( Name IS NULL AND @Name IS NULL) )
    AND Age = @Age 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:48:34.330

```
SELECT * FROM TABLE WHERE ISNULL(NAME,'')=ISNULL(@NAME,'') AND AGE=@AGE 
```

# .net - 使用哪些请求标头将图像文件从 iOS 上传到 ASP.NET？

> ID：10200880
> 
> 赞同：1
> 
> 时间：2012-04-17T23:57:31.377
> 
> 标签：.net, objective-c, ios, asp.net-mvc, nsmutableurlrequest

我正在构建一个 iOS 应用程序，我想将图像上传到 ASP.NET MVC 服务器组件，例如在网页中发布文件。

我在 iOS 中创建了 NSMutableURLRequest 和 NSConnection 对象，并验证了 .NET 服务器组件的调用是否正常工作。

```
NSMutableURLRequest *request=[[NSMutableURLRequest alloc]init];
[request setTimeoutInterval:(interval==0?SERVICE_DEFAULT_TIMEOUT_INTERVAL:interval)];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",SERVICE_BASEURL,url]]];
[request setHTTPMethod:@"POST"];
... 
```

图像数据位于 AVFoundation 模块的 NSData 对象中

```
NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer]; 
```

在服务器上，.NET 组件中的控制器方法是

```
[HttpPost]
public JsonResult UploadMedia(HttpPostedFileBase fileData)
{
 ...
  return Json(@"Success");
} 
```

目标是将图像数据传输到服务器并存储。我的问题是：

1.  还需要创建哪些其他 HttpHeaderField 值？
2.  我应该如何在 NSMutableURLRequest 中嵌入图像数据？
3.  .NET 组件方法中的参数应该是什么类型？
4.  根据#3 中的类型，我应该如何提取服务器组件中的图像数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:07:59.610

您可以使用多部分表单数据发布数据。

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url 
                                        cachePolicy:NSURLRequestUseProtocolCachePolicy 
                                                   timeoutInterval:600];

request.HTTPMethod = @"POST";

NSString *boundry = @"---------------AF7DAFCDEFAB809";
NSMutableData *data = [NSMutableData dataWithCapacity:300 * 1024];

[data appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"image.jpg\"\r\n\r\n", @"field name"]
                             dataUsingEncoding:NSUTF8StringEncoding]];
[data appendData:imgdata];   // data upload
[data appendData:[[NSString stringWithString:@"\r\n"] 
                          dataUsingEncoding:NSUTF8StringEncoding]];

[data appendData:[[NSString stringWithFormat:@"--%@\r--\n",boundry] 
                  dataUsingEncoding:NSUTF8StringEncoding]];

request.HTTPBody = data; 
```

# php - Twitter API 达到 150 个限制，每 10 分钟执行一次 PHP cron

> ID：10200881
> 
> 赞同：0
> 
> 时间：2012-04-17T23:57:46.777
> 
> 标签：php, json, twitter

我为网页做了一个简单的 twitter 提要。我使用 API 的 JSON 响应保存了一个缓存文件，然后使用 jQuery 读取它。

它运行良好，问题是它随机达到 150 个请求的 REST API 限制，而我每小时只做 6 个（每 10 分钟 1 个），据我所知，我没有任何其他提要在我的主机（MediaTemple gs）中，每小时可能会处理很多请求。

我知道我可以使用一个帐户进行身份验证并获得 350 个请求的限制，我还没有测试过，但我认为这根本不能解决问题。

这是我每 10 分钟执行一次的 cron：

```
<?php  
//Set local timezone
putenv("TZ=America/Caracas");

//Function to get contents using cURL
    function url_get_contents ($Url) {
        if (!function_exists('curl_init')){ 
                die('CURL is not installed!');
        }
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $Url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
}
//The path of the file that contains cached tweets
$cache = '/home/xxxxx/domains/example.com/html/demos/webname/twitter-json.txt';  

//Call the api and get JSON response
$data = url_get_contents("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=webname&count=100");
$parsed = json_decode($data, true);
//This is a workaround I made to exit the script if there's an error(it works)
if ($parsed['error']) exit;
//I change the twitter date format to d/m/y H:i
foreach ($parsed as $key => $value) {
$parsed[$key]['created_at'] = date('d/m/y H:i',strtotime($value['created_at']));
}
//I encode to JSON
$data = json_encode($parsed);
//Save the file
$cachefile = fopen($cache, 'wb');  
fwrite($cachefile,$data);  
fclose($cachefile);
?> 
```

# designer - LiveCycle 设计器表单

> ID：10200882
> 
> 赞同：0
> 
> 时间：2012-04-17T23:57:51.623
> 
> 标签：designer, livecycle

我有一个链接到 SQL Server 数据库的 LiveCycle 设计器表单，我定义的一些功能运行良好，但是对于插入/更新功能不能说相同，我已经搜索过在我认识的各种论坛上下，但无法提出解决方案，StackOverflow 上的任何人都可以伸出援助之手。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T17:53:34.463

你在使用 ODBC 连接吗？如果是这样，您应该考虑转向基于 Web 服务的方式来连接到您的数据库。很乐意提供帮助，但需要更多地了解您的背景

# sql - 在 Java 中通过 SQL 查询搜索 ArrayList 对象

> ID：10200884
> 
> 赞同：0
> 
> 时间：2012-04-17T23:58:12.057
> 
> 标签：sql, arraylist

如果这是一个重复的问题，我很抱歉。任何指向类似问答的指针也可以。

是否有一个 API 可以让我通过 SQL 等自定义对象列表进行搜索。目前，我已经实现了一个功能来执行正则表达式，该功能是在每个对象图中使用覆盖 toString() 来实现的。这些对象列表是由数据库（5 个表/2 个不同的主机）构造的，但使用业务用例进行了按摩，因此实际的数据库值将与我在列表中的值有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:06:08.157

简而言之：你不能。

更长的版本：如果您需要类似于 SQL 的功能，而不仅仅是通过`for`循环、正则表达式等轻松实现的功能，请使用数据库！数据库可以非常轻量级。看看 HSQLDB、SQLite、JavaDB/Derby、H2 等。

# gwt - 如何调试tomcat请求线程？

> ID：10200885
> 
> 赞同：0
> 
> 时间：2012-04-17T23:58:13.377
> 
> 标签：gwt, tomcat

我有一个 Tomcat 应用程序正在运行，由于某种原因，我的一个 servlet 被搁置，而所有其他 servlet 在执行请求时响应。

我的 Tomcat 连接器配置：

```
<Connector port="8008" protocol="HTTP/1.1"
maxThreads="50" minSpareThreads="5" maxSpareThreads="50"
    enableLookups="false" acceptCount="100"
           connectionTimeout="20000" 
           redirectPort="8443"
           compression="off"
           allowTrace="true"
compressionMinSize="128"
 noCompressionUserAgents="gozilla, traviata"
 compressableMimeType="text/html,text/xml,text/x-gwt-rpc; charset=utf-8,application/json; charset=utf-8,application/javascript" /> 
```

我的 GWT RPC servlet 在执行很长的请求时不断响应。但是我在 GWT 之外创建了一个 servlet（即一个普通的旧 servlet），当我向这个 servlet 发送请求时，它不会响应，直到长 GWT 请求结束。它实际上根本没有开始执行（我添加了日志以查看它是否真正开始执行，直到日志 gwt 请求结束才开始执行）。

如何调试Tomcat实例的线程池/入站请求队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:16:28.400

查看您的 IDE 调试设置。

例如，在 IntelliJ IDEA 上，您需要在[断点设置中将](http://mattfleming.com/files/images/Picture%201_1.preview.png)*Suspend 策略*更改 为*Thread*。这意味着只有这个因断点而停止的线程才会阻塞，其他线程将继续正常运行。

# html - Gmail 如何防止使用绝对定位的元素重叠？

> ID：10200890
> 
> 赞同：2
> 
> 时间：2012-04-17T23:58:52.823
> 
> 标签：html, css, layout, gmail, positioning

我最近开始了学习 CSS 的旅程，并且一直在研究 Gmail 的设计，因为我一直对 Gmail 的工作原理感到好奇。

我似乎无法弄清楚的一个问题是，Gmail 是如何让一个绝对定位的 div 表现得好像它仍然是流程的一部分。这是我指的div：

![在此处输入图像描述](../Images/5014d0d4783e83a35d6a0698e280bb69.png)

该 div 的计算样式如下： ![在此处输入图像描述](../Images/48d4d22ca539925a906bad18411019d6.png)

问题是，当浏览器宽度减小时，我认为这个绝对定位的 div 会直接与左侧的搜索表单重叠。相反，它似乎压缩了搜索表单，就好像它仍然是流程的一部分。我检查了搜索表单和它周围的其他元素，寻找可能阻止它重叠的边距或填充，但我未经训练的眼睛什么也没发现。

希望更有经验的 CSS 和 Gmail 用户可以查看 Gmail DOM 树并向我解释这一点。干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:03:03.577

您可以为此使用 javascript。您可以绑定到窗口对象的 resize 事件，并在调整浏览器大小时重新计算和重新定位元素。

在纯 JavaScript 中：

```
window.onresize = function(event) {
    // recalculate
}; 
```

在 jQuery 中：

```
$(window).resize(function(event) {
    // recalculate
}); 
```

另一种选择是在绝对定位元素周围的容器上设置一个 position:relative。如果该相对容器随浏览器窗口调整大小，则其中的绝对容器将随之移动。

# c# - 与自动增量主键绑定的外键不会将负数转换为实际值

> ID：10200899
> 
> 赞同：3
> 
> 时间：2012-04-17T23:59:48.447
> 
> 标签：c#, database, sql-server-ce-4

我正在开发一个小型应用程序，它解析一个 html 文件并将文本添加到两个相关的数据库表中。我正在使用 MSVC# 11 和 SQL CE。

我理解为什么数据集设计器中的自动增量标识值是负数，当我查看两个表时，它们包含相同的负数，所以我可以看到关系是正确的。

但是，在数据库引擎分配正主键后，数据库引擎似乎永远不会将外键的负数转换为主键。

“刷新数据表”设置在数据集设计器中也是灰色的。所以我不确定如何获得正确的身份值。

提前致谢！

# android - 更新应用程序是否会清除共享偏好或删除应用程序设置的警报？

> ID：10200903
> 
> 赞同：6
> 
> 时间：2012-04-18T00:00:32.830
> 
> 标签：android, sharedpreferences, alarmmanager

我已经在谷歌商店发布了我的应用程序，现在我想更新它。

但我想确保我不会丢失我的应用程序共享首选项中存储的数据。我还在我的应用程序中设置了一些启动通知的警报，我也不想丢失它们。

我不确定更新应用程序是如何工作的？它会重写这些东西吗？无论如何，我可以在全球发布之前对其进行测试吗？

我应该提一下，我在这个版本中所做的更改包含清单中的一些更改：我更改了`targetSdkVersion`和`minSdkVersion`（它曾经有`minSdk=8`现在我已经将它更改为`4`并添加`targetsdk=15`）并且我为我的警报服务（这是一个意图服务）提供了一个进程名称设置警报）但后来决定更改它并且它现在没有进程名称。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T00:14:50.633

通常，SharedPreferences（以及其他用户数据）会在更新过程中保留，但有时，由于一些“未知”问题，数据可能会丢失，我猜它是你无法控制的。因此，您可以简单地相信 SharedPreferences 将被保留。

至于闹钟，你是怎么设置这些闹钟的？如果您在代码中设置它们，只要您在代码中正确设置它们应该是 100% 可以的。

当然，最好的测试方法是在将更新的应用程序推向市场之前将其安装在设备上。首先，您应该在您的手机上安装您的市场版本的应用程序，然后在您的本地计算机上使用您的市场密钥库导出您的应用程序，最后，在您的手机上安装导出的版本（安装程序应该会通知您更新）。您可以检查这些设置是否仍然存在。

导出时，最重要的是确保您使用的密钥库与您在应用程序的市场版本中使用的密钥库相同。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T00:04:41.580

SharedPreferences 被存储并且将在更新应用程序后继续存在。关于警报我不确定，对不起。

为了测试您的更新，只需在您的设备上安装您的市场版本，像普通用户一样设置您的东西（警报、共享首选项），然后在您的手机上安装您将上传到市场的 apk（签名 apk！）。安装应该与您的用户将获得的更新相同...

# java - 在文本文档中搜索一行 - JAVA

> ID：10200909
> 
> 赞同：0
> 
> 时间：2012-04-18T00:01:47.870
> 
> 标签：java, netbeans, login

我正在尝试制作一个可以从文本文件中读取用户名和密码的登录屏幕。我已经建立了注册页面，通过执行以下命令将用户名和密码输出到文件中：

```
try (BufferedWriter out = new BufferedWriter(fstream)) {
            try {
              out.write(username + " " + password);
              out.newLine();
              JOptionPane.showMessageDialog(null,"User Account '" + username + "'     Created");
            } catch (IOException ex) {
                Logger.getLogger(ServerMenu.class.getName()).log(Level.SEVERE, null, ex);
            }
       } 
```

文本文件看起来像这样：

```
user1 password1
user2 password2 
```

我一直在阅读大量文档以尝试弄清楚这一点，但是我读的越多，我就越困惑。我这样做的原因是为了让我可以继续读取和写入 .dat 文件以获取系统最终将保存的信息。

如果有人可以以任何形式帮助我，那将是惊人的！

谢谢

C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:19:28.567

快速简便的解决方案。每一行都有注释，但如果您需要任何帮助或有任何不明白的地方，请告知。

```
import java.io.*;
class FileRead 
{
 public static boolean main(String lineToCompare)
  {
  try{
  // Open the file that is the first 
  // command line parameter
  FileInputStream fstream = new FileInputStream("textfile.txt");

  // Get the object of DataInputStream
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));

  String strLine;
  //Read File Line By Line

  while ((strLine = br.readLine()) != null)   {
  //Compare the line with the line to compare (string)
  if(strLine.compareTo(lineToCompare) == 0)
      return true;
  }

  //Close the input stream
  in.close();
    }catch (Exception e){//Catch exception if any
     System.err.println("Error: " + e.getMessage());
  }

  return false;

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:30:49.337

我真的不确定您是要为特定的用户名和密码执行上述代码，还是全部执行上述代码。

如果您想从文件中获取特定行，并且您已经可以访问要读取的行的偏移​​量，则可以使用[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)。这个类可以让你将文件指针移动到某个位置，然后你可以简单地读取下一行来获取用户名和密码。

但是，如果您想读取特定行但不知道该行在输入文件中的位置，则需要读取每一行（例如，使用[BufferedReader](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html)）以找到您需要的行。如果您想逐行读取文件，也可以采用这种方法。

# c# - 创建“Hello World”WebSocket 示例

> ID：10200910
> 
> 赞同：96
> 
> 时间：2012-04-18T00:01:59.110
> 
> 标签：c#, javascript, websocket

我不明白为什么我不能使下面的代码工作。我想用 JavaScript 连接到我的服务器控制台应用程序。然后将数据发送到服务器。

这是服务器代码：

```
 static void Main(string[] args)
    {            
        TcpListener server = new TcpListener(IPAddress.Parse("127.0.0.1"), 9998);
        server.Start();
        var client = server.AcceptTcpClient();
        var stream = client.GetStream();

        while (true)
        {
            var buffer = new byte[1024]; 
            // wait for data to be received
            var bytesRead = stream.Read(buffer, 0, buffer.Length);                
            var r = System.Text.Encoding.UTF8.GetString(buffer);
            // write received data to the console
            Console.WriteLine(r.Substring(0, bytesRead));
        }
    } 
```

这是JavaScript：

```
 var ws = new WebSocket("ws://localhost:9998/service");
        ws.onopen = function () {
            ws.send("Hello World"); // I WANT TO SEND THIS MESSAGE TO THE SERVER!!!!!!!!
        };

        ws.onmessage = function (evt) {
            var received_msg = evt.data;
            alert("Message is received...");
        };
        ws.onclose = function () {
            // websocket is closed.
            alert("Connection is closed...");
        }; 
```

当我运行该代码时，会发生以下情况：

[![](../Images/82e805fc782ca05fbb1bbf858a5430e2.png)](https://i.stack.imgur.com/pgnSt.png)

请注意，当我运行 JavaScript 时，服务器接受并成功建立连接。JavaScript 无法发送数据。每当我放置发送方法时，即使建立了连接，它也不会发送。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-18T09:46:16.603

WebSockets 是依赖于 TCP 流连接的协议。虽然 WebSockets 是基于消息的协议。

如果您想实现自己的协议，那么我建议使用最新且稳定的规范（适用于 18/04/12）[RFC 6455](https://www.rfc-editor.org/rfc/rfc6455)。本规范包含有关握手和成帧的所有必要信息。以及大部分关于浏览器端和服务器端行为场景的描述。强烈建议在实施代码期间遵循有关服务器端的建议。

简而言之，我将描述像这样使用 WebSockets：

1.  **创建服务器 Socket** (System.Net.Sockets) 将其绑定到特定端口，并通过异步接受连接继续监听。像这样的东西：

```
Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
serverSocket.Bind(new IPEndPoint(IPAddress.Any, 8080));
serverSocket.Listen(128);
serverSocket.BeginAccept(null, 0, OnAccept, null);
```

2.  您应该具有将实现握手的**接受函数“OnAccept”。**将来，如果系统打算每秒处理大量连接，它必须在另一个线程中。

```
私人无效 OnAccept（IAsyncResult 结果）{
    尝试 {
        套接字客户端 = null;
        if (serverSocket != null && serverSocket.IsBound) {
            客户端 = serverSocket.EndAccept（结果）；
        }
        如果（客户端！= null）{
            /* 握手和管理 ClientSocket */
        }
    } 捕捉（SocketException 异常） {

    } 最后 {
        if (serverSocket != null && serverSocket.IsBound) {
            serverSocket.BeginAccept(null, 0, OnAccept, null);
        }
    }
}
```

3.  建立连接后，您必须进行**握手**。根据规范[1.3 打开握手](https://www.rfc-editor.org/rfc/rfc6455#page-6)，连接建立后，您将收到带有一些信息的基本 HTTP 请求。例子：

```
获取/聊天 HTTP/1.1
主机：server.example.com
升级：websocket
连接：升级
Sec-WebSocket-Key：dGhlIHNhbXBsZSBub25jZQ==
来源：http://example.com
Sec-WebSocket-Protocol：聊天、超级聊天
Sec-WebSocket-版本：13
```

此示例基于协议 13 的版本。请记住，旧版本有一些差异，但大多数最新版本是交叉兼容的。不同的浏览器可能会向您发送一些额外的数据。例如浏览器和操作系统详细信息、缓存等。

根据提供的握手细节，您必须生成答案行，它们大多相同，但将包含 Accept-Key，即基于提供的 Sec-WebSocket-Key。在规范 1.3 中清楚地描述了如何生成响应密钥。这是我一直用于 V13 的函数：

```
静态私有字符串 guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
私人字符串AcceptKey（参考字符串键）{
        字符串 longKey = 键 + guid；
        SHA1 sha1 = SHA1CryptoServiceProvider.Create();
        byte[] hashBytes = sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(longKey));
        返回 Convert.ToBase64String(hashBytes);
}

```

握手答案如下所示：

```
HTTP/1.1 101 交换协议
升级：websocket
连接：升级
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
```

但是接受密钥必须是基于客户端提供的密钥和我之前提供的方法 AcceptKey 生成的密钥。同样，确保在接受键的最后一个字符之后添加两个新行“\r\n\r\n”。

4.  握手应答从服务器发送后，客户端应该触发“ **onopen** ”功能，这意味着你可以发送消息。

5.  消息不是以原始格式发送的，但它们具有**Data Framing**。并且从客户端到服务器也根据消息头中提供的 4 个字节实现数据屏蔽。尽管从服务器到客户端，您不需要对数据应用屏蔽。阅读规范中的第[5 节。数据框架](https://www.rfc-editor.org/rfc/rfc6455#page-27)。这是我自己实现的复制粘贴。它不是即用型代码，必须进行修改，我发布它只是为了提供一个想法和使用 WebSocket 框架读/写的整体逻辑。转到[此链接](http://moka.me.uk/files/wsreadwrite.txt)。

6.  实现框架后，请确保您使用套接字以正确的方式接收数据。例如，为了防止某些消息合并为一个，因为 TCP 仍然是基于流的协议。这意味着您必须只读取特定数量的字节。消息的长度始终基于标头，并在标头中提供数据长度详细信息。因此，当您从 Socket 接收数据时，首先接收 2 个字节，根据帧规范从标头获取详细信息，然后如果掩码提供另外 4 个字节，然后根据数据长度可能是 1、4 或 8 个字节的长度。在数据它自己之后。阅读后，应用去掩码，您的消息数据就可以使用了。

7.  您可能想要使用一些**数据协议**，我建议使用 JSON，因为流量经济且易于在 JavaScript 客户端使用。对于服务器端，您可能需要检查一些解析器。有很多，谷歌真的很有帮助。

实现自己的 WebSockets 协议肯定有一些好处和丰富的经验，以及对协议本身的控制。但是你必须花一些时间去做，并确保实现是高度可靠的。

同时，您可能会看到谷歌（再次）有足够的现成可用的解决方案。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-27T10:39:54.177

*（代表 OP 发布答案）*。

我现在可以发送数据了。感谢您的回答和@Maksims Mihejevs 的代码，这是我的新版本程序。

## 服务器

```
using System;
using System.Net.Sockets;
using System.Net;
using System.Security.Cryptography;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        static Socket serverSocket = new Socket(AddressFamily.InterNetwork, 
        SocketType.Stream, ProtocolType.IP);
        static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";

        static void Main(string[] args)
        {            
            serverSocket.Bind(new IPEndPoint(IPAddress.Any, 8080));
            serverSocket.Listen(128);
            serverSocket.BeginAccept(null, 0, OnAccept, null);            
            Console.Read();
        }

        private static void OnAccept(IAsyncResult result)
        {
            byte[] buffer = new byte[1024];
            try
            {
                Socket client = null;
                string headerResponse = "";
                if (serverSocket != null && serverSocket.IsBound)
                {
                    client = serverSocket.EndAccept(result);
                    var i = client.Receive(buffer);
                    headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0,i);
                    // write received data to the console
                    Console.WriteLine(headerResponse);

                }
                if (client != null)
                {
                    /* Handshaking and managing ClientSocket */

                    var key = headerResponse.Replace("ey:", "`")
                              .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                              .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                              .Trim();

                    // key should now equal dGhlIHNhbXBsZSBub25jZQ==
                    var test1 = AcceptKey(ref key);

                    var newLine = "\r\n";

                    var response = "HTTP/1.1 101 Switching Protocols" + newLine
                         + "Upgrade: websocket" + newLine
                         + "Connection: Upgrade" + newLine
                         + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                         //+ "Sec-WebSocket-Protocol: chat, superchat" + newLine
                         //+ "Sec-WebSocket-Version: 13" + newLine
                         ;

                    // which one should I use? none of them fires the onopen method
                    client.Send(System.Text.Encoding.UTF8.GetBytes(response));

                    var i = client.Receive(buffer); // wait for client to send a message

                    // once the message is received decode it in different formats
                    Console.WriteLine(Convert.ToBase64String(buffer).Substring(0, i));                    

                    Console.WriteLine("\n\nPress enter to send data to client");
                    Console.Read();

                    var subA = SubArray<byte>(buffer, 0, i);
                    client.Send(subA);
                    Thread.Sleep(10000);//wait for message to be send

                }
            }
            catch (SocketException exception)
            {
                throw exception;
            }
            finally
            {
                if (serverSocket != null && serverSocket.IsBound)
                {
                    serverSocket.BeginAccept(null, 0, OnAccept, null);
                }
            }
        }

        public static T[] SubArray<T>(T[] data, int index, int length)
        {
            T[] result = new T[length];
            Array.Copy(data, index, result, 0, length);
            return result;
        }

        private static string AcceptKey(ref string key)
        {
            string longKey = key + guid;
            byte[] hashBytes = ComputeHash(longKey);
            return Convert.ToBase64String(hashBytes);
        }

        static SHA1 sha1 = SHA1CryptoServiceProvider.Create();
        private static byte[] ComputeHash(string str)
        {
            return sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(str));
        }
    }
} 
```

## JavaScript：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">
        function connect() {
            var ws = new WebSocket("ws://localhost:8080/service");
            ws.onopen = function () {
                alert("About to send data");
                ws.send("Hello World"); // I WANT TO SEND THIS MESSAGE TO THE SERVER!!!!!!!!
                alert("Message sent!");
            };

            ws.onmessage = function (evt) {
                alert("About to receive data");
                var received_msg = evt.data;
                alert("Message received = "+received_msg);
            };
            ws.onclose = function () {
                // websocket is closed.
                alert("Connection is closed...");
            };
        };

    </script>
</head>
<body style="font-size:xx-large" >
    <div>
    <a href="#" onclick="connect()">Click here to start</a></div>
</body>
</html> 
```

当我运行该代码时，我能够从客户端和服务器发送和接收数据。唯一的问题是消息在到达服务器时是加密的。以下是程序如何运行的步骤：

![在此处输入图像描述](../Images/5eaecd7bb0db4fe48af1bcba46f0f086.png)

请注意来自客户端的消息是如何加密的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-15T14:51:25.330

我在任何地方都找不到一个简单的工作示例（截至 1 月 19 日），所以这是一个更新版本。我有 chrome 版本 71.0.3578.98。

**C# Websocket 服务器：**

```
using System;
using System.Text;
using System.Net;
using System.Net.Sockets;
using System.Security.Cryptography;

namespace WebSocketServer
{
    class Program
    {
    static Socket serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.IP);
    static private string guid = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";

    static void Main(string[] args)
    {
        serverSocket.Bind(new IPEndPoint(IPAddress.Any, 8080));
        serverSocket.Listen(1); //just one socket
        serverSocket.BeginAccept(null, 0, OnAccept, null);
        Console.Read();
    }

    private static void OnAccept(IAsyncResult result)
    {
        byte[] buffer = new byte[1024];
        try
        {
            Socket client = null;
            string headerResponse = "";
            if (serverSocket != null && serverSocket.IsBound)
            {
                client = serverSocket.EndAccept(result);
                var i = client.Receive(buffer);
                headerResponse = (System.Text.Encoding.UTF8.GetString(buffer)).Substring(0, i);
                // write received data to the console
                Console.WriteLine(headerResponse);
                Console.WriteLine("=====================");
            }
            if (client != null)
            {
                /* Handshaking and managing ClientSocket */
                var key = headerResponse.Replace("ey:", "`")
                          .Split('`')[1]                     // dGhlIHNhbXBsZSBub25jZQ== \r\n .......
                          .Replace("\r", "").Split('\n')[0]  // dGhlIHNhbXBsZSBub25jZQ==
                          .Trim();

                // key should now equal dGhlIHNhbXBsZSBub25jZQ==
                var test1 = AcceptKey(ref key);

                var newLine = "\r\n";

                var response = "HTTP/1.1 101 Switching Protocols" + newLine
                     + "Upgrade: websocket" + newLine
                     + "Connection: Upgrade" + newLine
                     + "Sec-WebSocket-Accept: " + test1 + newLine + newLine
                     //+ "Sec-WebSocket-Protocol: chat, superchat" + newLine
                     //+ "Sec-WebSocket-Version: 13" + newLine
                     ;

                client.Send(System.Text.Encoding.UTF8.GetBytes(response));
                var i = client.Receive(buffer); // wait for client to send a message
                string browserSent = GetDecodedData(buffer, i);
                Console.WriteLine("BrowserSent: " + browserSent);

                Console.WriteLine("=====================");
                //now send message to client
                client.Send(GetFrameFromString("This is message from server to client."));
                System.Threading.Thread.Sleep(10000);//wait for message to be sent
            }
        }
        catch (SocketException exception)
        {
            throw exception;
        }
        finally
        {
            if (serverSocket != null && serverSocket.IsBound)
            {
                serverSocket.BeginAccept(null, 0, OnAccept, null);
            }
        }
    }

    public static T[] SubArray<T>(T[] data, int index, int length)
    {
        T[] result = new T[length];
        Array.Copy(data, index, result, 0, length);
        return result;
    }

    private static string AcceptKey(ref string key)
    {
        string longKey = key + guid;
        byte[] hashBytes = ComputeHash(longKey);
        return Convert.ToBase64String(hashBytes);
    }

    static SHA1 sha1 = SHA1CryptoServiceProvider.Create();
    private static byte[] ComputeHash(string str)
    {
        return sha1.ComputeHash(System.Text.Encoding.ASCII.GetBytes(str));
    }

    //Needed to decode frame
    public static string GetDecodedData(byte[] buffer, int length)
    {
        byte b = buffer[1];
        int dataLength = 0;
        int totalLength = 0;
        int keyIndex = 0;

        if (b - 128 <= 125)
        {
            dataLength = b - 128;
            keyIndex = 2;
            totalLength = dataLength + 6;
        }

        if (b - 128 == 126)
        {
            dataLength = BitConverter.ToInt16(new byte[] { buffer[3], buffer[2] }, 0);
            keyIndex = 4;
            totalLength = dataLength + 8;
        }

        if (b - 128 == 127)
        {
            dataLength = (int)BitConverter.ToInt64(new byte[] { buffer[9], buffer[8], buffer[7], buffer[6], buffer[5], buffer[4], buffer[3], buffer[2] }, 0);
            keyIndex = 10;
            totalLength = dataLength + 14;
        }

        if (totalLength > length)
            throw new Exception("The buffer length is small than the data length");

        byte[] key = new byte[] { buffer[keyIndex], buffer[keyIndex + 1], buffer[keyIndex + 2], buffer[keyIndex + 3] };

        int dataIndex = keyIndex + 4;
        int count = 0;
        for (int i = dataIndex; i < totalLength; i++)
        {
            buffer[i] = (byte)(buffer[i] ^ key[count % 4]);
            count++;
        }

        return Encoding.ASCII.GetString(buffer, dataIndex, dataLength);
    }

    //function to create  frames to send to client 
    /// <summary>
    /// Enum for opcode types
    /// </summary>
    public enum EOpcodeType
    {
        /* Denotes a continuation code */
        Fragment = 0,

        /* Denotes a text code */
        Text = 1,

        /* Denotes a binary code */
        Binary = 2,

        /* Denotes a closed connection */
        ClosedConnection = 8,

        /* Denotes a ping*/
        Ping = 9,

        /* Denotes a pong */
        Pong = 10
    }

    /// <summary>Gets an encoded websocket frame to send to a client from a string</summary>
    /// <param name="Message">The message to encode into the frame</param>
    /// <param name="Opcode">The opcode of the frame</param>
    /// <returns>Byte array in form of a websocket frame</returns>
    public static byte[] GetFrameFromString(string Message, EOpcodeType Opcode = EOpcodeType.Text)
    {
        byte[] response;
        byte[] bytesRaw = Encoding.Default.GetBytes(Message);
        byte[] frame = new byte[10];

        long indexStartRawData = -1;
        long length = (long)bytesRaw.Length;

        frame[0] = (byte)(128 + (int)Opcode);
        if (length <= 125)
        {
            frame[1] = (byte)length;
            indexStartRawData = 2;
        }
        else if (length >= 126 && length <= 65535)
        {
            frame[1] = (byte)126;
            frame[2] = (byte)((length >> 8) & 255);
            frame[3] = (byte)(length & 255);
            indexStartRawData = 4;
        }
        else
        {
            frame[1] = (byte)127;
            frame[2] = (byte)((length >> 56) & 255);
            frame[3] = (byte)((length >> 48) & 255);
            frame[4] = (byte)((length >> 40) & 255);
            frame[5] = (byte)((length >> 32) & 255);
            frame[6] = (byte)((length >> 24) & 255);
            frame[7] = (byte)((length >> 16) & 255);
            frame[8] = (byte)((length >> 8) & 255);
            frame[9] = (byte)(length & 255);

            indexStartRawData = 10;
        }

        response = new byte[indexStartRawData + length];

        long i, reponseIdx = 0;

        //Add the frame bytes to the reponse
        for (i = 0; i < indexStartRawData; i++)
        {
            response[reponseIdx] = frame[i];
            reponseIdx++;
        }

        //Add the data bytes to the response
        for (i = 0; i < length; i++)
        {
            response[reponseIdx] = bytesRaw[i];
            reponseIdx++;
        }

        return response;
    }
}
} 
```

**客户端 html 和 javascript：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript">
        var socket = new WebSocket('ws://localhost:8080/websession');
        socket.onopen = function() {
           // alert('handshake successfully established. May send data now...');
           socket.send("Hi there from browser.");
        };
        socket.onmessage = function (evt) {
                //alert("About to receive data");
                var received_msg = evt.data;
                alert("Message received = "+received_msg);
            };
        socket.onclose = function() {
            alert('connection closed');
        };
    </script>
</head>
<body>
</body>
</html>
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-18T00:05:10.637

WebSockets 是使用涉及[客户端和服务器之间握手](https://www.rfc-editor.org/rfc/rfc6455#section-1.3)[的协议实现的](https://www.rfc-editor.org/rfc/rfc6455)。我不认为它们的工作方式与普通插座非常相似。阅读协议，并让您的应用程序谈论它。或者，使用现有的 WebSocket 库或具有[WebSocket API](http://msdn.microsoft.com/en-us/library/system.net.websockets.websocket%28v=vs.110%29.aspx)的 .Net4.5beta 。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-18T00:14:05.540

## 问题

由于您使用的是 WebSocket，因此花费者是正确的。从 WebSocket 接收到初始数据后，您需要从 C# 服务器发送握手消息，然后才能传输任何进一步的信息。

```
HTTP/1.1 101 Web Socket Protocol Handshake
Upgrade: websocket
Connection: Upgrade
WebSocket-Origin: example
WebSocket-Location: something.here
WebSocket-Protocol: 13 
```

类似的东西。

您可以对 WebSocket 在 w3 或 google 上的工作方式进行更多研究。

## 链接和资源

这是一个协议规范：[https ://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76#section-1.3](https://datatracker.ietf.org/doc/html/draft-hixie-thewebsocketprotocol-76#section-1.3)

**工作示例列表：**

*   [https://stackoverflow.com/a/5866975/184746](https://stackoverflow.com/a/5866975/184746)
*   [https://stackoverflow.com/a/2212752/184746](https://stackoverflow.com/a/2212752/184746)
*   [http://ashishware.com/websocksample.shtml](http://ashishware.com/websocksample.shtml)
*   [http://www.sencha.com/forum/showthread.php?99842-WebSocket-server-in-C](http://www.sencha.com/forum/showthread.php?99842-WebSocket-server-in-C)

# php - 无法访问对象内的 php 值

> ID：10200915
> 
> 赞同：0
> 
> 时间：2012-04-18T00:02:43.180
> 
> 标签：php, oop, object

我有一个带有“。”键的对象。他们里面的性格..

如何仅使用 $var->site.title 正确访问它们

有没有办法做到这一点，坚持对象方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T00:04:42.000

使用[变量变量](http://php.net/manual/en/language.variables.variable.php)语法：

```
$obj->{"site.title"} 
```

# encryption - 非常规加密方案中的问题？

> ID：10200924
> 
> 赞同：0
> 
> 时间：2012-04-18T00:04:22.743
> 
> 标签：encryption, hash, aes

我的程序包含一个功能，用户可以使用密码加密某些数据。由于并非所有密码都是适当的长度，因此通过散列密码（使用良好的算法）以生成固定长度的密钥然后将其输入 AES 来解决此问题是否存在任何不安全性？

编辑：没关系，请参阅[http://en.wikipedia.org/wiki/Key_derivation_function](http://en.wikipedia.org/wiki/Key_derivation_function)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:09:23.583

如果密码很容易破解，因为它很短 - 散列将无济于事，因为所需要的只是在蛮力攻击期间应用相同的散列函数。并且可能无法使散列函数完全保密，因为它必须在某些时候公开以散列密码。

# php - XHRHTTPRequest 响应不能等于普通字符串

> ID：10200928
> 
> 赞同：0
> 
> 时间：2012-04-18T00:04:39.240
> 
> 标签：php, javascript, ajax, jquery, if-statement

我正在尝试将成功字符串与之进行比较，`xhr.responseText`但它不起作用，我不知道为什么。

```
if (xhr.responseText == "success")
{
    alert("Yay");
} 
```

可能是什么原因？我试图提醒 responseTest 并且它具有完全相同的值，即“成功”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:48:09.780

我敢打赌那里还有别的东西。最好使用 console.log 而不是 alert。现代浏览器内置了一个控制台。

```
alert(escape(xhr.responseText)); 
```

这将向您显示警报中不可见的其他字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T00:33:04.733

如果您是开发人员，我假设您正在使用 firebug 在 firefox 上工作，请尝试打印 xhr.response 对象，以便使用以下句子调试您的脚本：console.log(xhr.responseText);

# java - 将“过滤器”方法添加到元素列表的更好方法？

> ID：10200931
> 
> 赞同：1
> 
> 时间：2012-04-18T00:04:49.030
> 
> 标签：java, filter

我想对java中的元素列表实现一个过滤器方法，这样我就可以根据我的过滤器去掉列表中的一些元素。而且，最重要的是，我希望将界面设计得尽可能简单。

这是我的实现：我创建了一个名为 EasierList 的类，在该类中，我添加了一个方法，其签名和实现如下所示：

```
public IEasierList<T> filter(ISelection<T> filter) {
    List<T> result = new ArrayList<T>();
    for(T item : mInternalList) {
        if(filter.accept(item)) {
            result.add(item);
        }
    }

    mInternalList = result;
    return new EasierList<T>(this);
} 
```

至于 ISelection 界面，还是比较简单的：

```
public boolean accept(T obj); 
```

所以，你可以看出，使用这个类的用户需要编写一些这样的代码来使用过滤器：

```
aEasierList.filter(new ISelection<T>() {
@Override
public boolean accept(T obj) {
        // some test
    return false;
}
}); 
```

我想知道是否有更好的方法来做到这一点，我的意思是让界面更容易使用？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T00:13:11.500

两点：

首先，您不必重新发明轮子，您可以使用已经支持[过滤](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#filter%28java.util.Collection,%20com.google.common.base.Predicate%29)和[转换](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Collections2.html#transform%28java.util.Collection,%20com.google.common.base.Function%29)集合和可迭代对象的[Guava 。](http://code.google.com/p/guava-libraries/)当然，这些方法是静态的，但您可以将它们用于标准或接口。`List``Collection``Iterable`

其次，由于 Java 还不支持 lambda 表达式（计划用于 Java 8），冗长的匿名类是实现函数对象的唯一方法（如果您不想创建完整的命名类）。但是，您可以通过不就地实现匿名类，而是将其存储在静态字段中来帮助自己：

```
private static final Predicate<String> startsWithS = new Predicate<String>() {
    @Override public boolean apply(String string) {
        return string.startsWith("S");
    }
} 
```

然后像这样使用它：

```
Collection<String> strings = ...
Collection<String> filtered = Collections2.filter(strings, startsWithS); 
```

**编辑：**

应该提到更重要的事情：这些`filter`和`transform`方法不会创建独立于原始集合的新集合。他们创建的是一个“视图”，从技术上讲，它是一个代理对象，它指向原始集合，并在迭代、查询等期间懒惰地应用给定的`Predicate`或其元素。`Function`

这有时很方便，但您必须记住，为了获得一个独立于原始集合（当然不是深度）的新集合，您需要将它传递给新集合的构造函数（或工厂）收藏。

```
List<String> filteredList =
    new ArrayList<>(Collections2.filter(strings, startsWithS)); 
```

顺便说一句，这可能是一个使用静态导入来`filter`稍微减少冗长的方法的好时机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T00:16:06.263

我认为这是您在本机 Java 中可以做到的最好的事情，而无需求助于支持闭包的替代 JVM 语言（Groovy、Scala）。

Commons Collections 实现了基本相同的模式——查看`CollectionUtils.filter`和的文档`Predicate`。唯一的缺点是它不支持泛型。

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)

因此，如果您要走这条路，您不妨使用已经编写和测试过的东西。

C# 也通过 LINQ 和扩展方法很好地解决了这种模式，这使得类似于上述`filter`方法的东西看起来像是属于`Collection`自己的。

# jquery - 如何将顶部 div 移动到堆栈的底部

> ID：10200932
> 
> 赞同：0
> 
> 时间：2012-04-18T00:04:59.897
> 
> 标签：jquery, jquery-selectors, jquery-animate

```
<div>                       <div>
 <div>1</div>  ------------  <div>2</div> 
 <div>2</div>  -transition-  <div>3</div>
 <div>3</div>  ------------  <div>1</div>
</div>                      </div> 
```

他们是在 jquery 中删除 div 的第一个孩子并将其附加到一个链中的最后一个孩子的一种方式吗？示例 div 1 淡出然后附加到 div 3 并淡入我只能将第一个孩子从顶部移除或附加到最后一个孩子，但我不能一次加载。我还尝试将 div 放在一个数组中以使其更易于操作，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:09:01.670

```
$('div > div').first().fadeOut(500, function() {
    $(this).appendTo($(this).parent()).fadeIn();
})​; 
```

[**现场演示**](http://jsfiddle.net/npCEz/1)

需要注意的是，那些“我需要用一行代码完成”的要求是愚蠢的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:15:17.867

gdoron不起作用，稍微调整一下。

```
$('div > div').first().fadeOut('slow', function() {
  $(this).appendTo($(this).parent()).fadeIn(); 
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T00:11:07.513

给你：http: [//jsfiddle.net/V5bkC/](http://jsfiddle.net/V5bkC/)

我通常会在项目淡出后为项目的高度设置动画，但我会把那部分留给你:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:15:41.560

如果您追加一个已经在 DOM 中的元素，它会自动从其当前位置移除，因此只需在 .fadeOut() 的完整回调中执行此操作。

```
var $first = $("div div").first();
$first.fadeOut(500, function() {
   $first.appendTo($first.parent()).fadeIn(500);
}); 
```

演示：http: [//jsfiddle.net/tfEMq/](http://jsfiddle.net/tfEMq/)

如果将上述内容放在函数中，则可以通过向 .fadeIn() 添加回调来使其连续运行：http: [//jsfiddle.net/tfEMq/1/](http://jsfiddle.net/tfEMq/1/)

# f# - f# 泛型错误遵循 Expert Fsharp 书籍示例

> ID：10200943
> 
> 赞同：1
> 
> 时间：2012-04-18T00:06:27.863
> 
> 标签：f#

我正在阅读 Expert F# book，我发现了这段代码

```
open System.Collections.Generic
let divideIntoEquivalenceClasses keyf seq =
// The dictionary to hold the equivalence classes
  let dict = new Dictionary<'key,ResizeArray<'T>>()
  // Build the groupings
  seq |> Seq.iter (fun v ->
                          let key = keyf v
                          let ok,prev = dict.TryGetValue(key)
                          if ok then prev.Add(v)
                          else let prev = new ResizeArray<'T>()
                             dict.[key] <- prev
                             prev.Add(v))

 dict |> Seq.map (fun group -> group.Key, Seq.readonly group.Value) 
```

示例使用：

```
> divideIntoEquivalenceClasses (fun n -> n % 3) [ 0 .. 10 ];;
val it : seq<int * seq<int>>
= seq [(0, seq [0; 3; 6; 9]); (1, seq [1; 4; 7; 10]); (2, seq [2; 5; 8])] 
```

首先对我来说这段代码真的很难看，即使这是安全的，它看起来更像命令式语言而不是函数式语言......特别是与clojure相比。但问题不在于这个......我在字典定义方面遇到了问题

当我输入这个：

```
let dict = new Dictionary<'key,ResizeArray<'T>>();; 
```

我明白了：

```
pruebafs2a.fs(32,5): error FS0030: Value restriction. The value 'dict' has been inferred to have generic type
val dict : Dictionary<'_key,ResizeArray<'_T>> when '_key : equality    

Either define 'dict' as a simple data term, make it a function with explicit arguments or, if you do not intend for it to be generic, add a type annotation. 
```

好吗？...

非常感谢

* * *

**改进问题：**

好的，我一直在阅读有关价值限制的信息，我发现了这些有用的信息

> 特别是，只有函数定义和简单的不可变数据表达式会被自动泛化

...好的..这解释了为什么

```
let dict = new Dictionary<'key,ResizeArray<'T>>();; 
```

不起作用......并展示了 4 种不同的技术，尽管在我看来它们只能解决错误，但不是使用通用代码的解决方案：

**技巧 1：将值限制为非泛型**

```
 let empties : int list [] = Array.create 100 [] 
```

**技巧 3：必要时向泛型函数添加虚拟参数**

```
let empties () = Array.create 100 []
let intEmpties : int list [] = empties() 
```

**技巧 4：在必要时添加显式类型参数（类似于 tec 3）**

```
let emptyLists = Seq.init 100 (fun _ -> [])
> emptyLists<int>;;
val it : seq<int list> = seq [[]; []; []; []; ...] 
```

**----- 也是唯一让我使用真正的泛型代码的方法 ------ 技术 2：确保泛型函数具有显式参数**

```
let mapFirst = List.map fst //doesn't work
let mapFirst inp = List.map fst inp 
```

好的，在 4 种技术中的 3 种技术中，我需要先解决通用代码，然后才能使用它……现在……返回书本示例……当编译器知道 'key 和 'T 的值时

让 dict = new Dictionary<'key,ResizeArray<'T>>()

在**范围内，代码对于 let key 是任何类型都是非常通用的，同样的情况发生在 'T**

**最大的虚拟问题是**：

当我将代码包含在函数中时（技术 3）：

```
let empties = Array.create 100 [] //doesn't work
let empties () = Array.create 100 []
val empties : unit -> 'a list []

I need define the type before begin use it
let intEmpties : int list [] = empties() 
```

对我来说（诚然，我对静态类型语言有点笨）这不是真正的通用，因为当我使用它时它无法推断类型，我需要定义类型然后传递值（而不是基于传递的值）以其他方式定义类型而没有那么明确..

**非常感谢..非常感谢任何帮助**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:31:40.773

这条线

```
let dict = new Dictionary<'key,ResizeArray<'T>>();; 
```

失败是因为当您键入时`;;`，编译器不知道是什么`'key`和`'T`是什么。如错误消息所述，您需要添加类型注释，或允许编译器稍后使用它来推断类型或使其成为函数

例子

类型注释更改

```
let dict = new Dictionary<int,ResizeArray<int>>();; 
```

稍后使用类型

```
let dict = new Dictionary<'key,ResizeArray<'T>>()
dict.[1] <- 2 
```

使用函数

```
let dict() = new Dictionary<'key,ResizeArray<'T>>();; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T02:17:56.950

> 对我来说，这段代码真的很难看，即使这是安全的，它看起来更像命令式语言而不是函数式语言。

我完全同意——这与你的直接问题有点相切，但我认为更惯用的（*功能性*）方法是：

```
let divideIntoEquivalenceClasses keyf seq =
    (System.Collections.Generic.Dictionary(), seq)
    ||> Seq.fold (fun dict v ->
        let key = keyf v
        match dict.TryGetValue key with
        | false, _ -> dict.Add (key, ResizeArray(Seq.singleton v))
        | _, prev  -> prev.Add v
        dict)
    |> Seq.map (function KeyValue (k, v) -> k, Seq.readonly v) 
```

这允许足够的类型推断首先消除对您的问题的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T03:02:34.117

当它一起定义时，这实际上不会引起问题。也就是说，选择您发布的整个块并将其一次性发送给 FSI。我明白了：

```
val divideIntoEquivalenceClasses :
  ('T -> 'key) -> seq<'T> -> seq<'key * seq<'T>> when 'key : equality 
```

但是，如果您将这些单独键入 FSI，那么正如 John Palmer 所说，该隔离行中没有足够的信息供解释器确定类型约束。John 的建议将起作用，但原始代码正确地执行了它 - 定义变量并在同一范围内使用它，以便可以推断类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T16:27:30.137

其他答案提出的解决方法都很好。只是为了根据您的最新更新进行澄清，让我们考虑两个代码块：

```
let empties = Array.create 100 [] 
```

相对于：

```
let empties = Array.create 100 []
empties.[0] <- [1] 
```

在第二种情况下，编译器可以推断出，因为我们在第二行的数组中`empties : int list []`插入了一个，这限制了元素类型。`int list`

听起来您希望编译器`empties : 'a list []`在第一种情况下推断出一个通用值，但这是不合理的。考虑一下如果编译器这样做会发生什么，然后我们在另一批中输入以下两行：

```
empties.[0] <- [1] // treat 'a list [] as int list []
List.iter (printfn "%s") empties.[0] // treat 'a list [] as string list [] 
```

这些行中的每一行都将泛型类型参数`'a`与不同的具体类型（`int`和`string`）统一起来。这些统一中的任何一个都可以单独使用，但是它们彼此不兼容，并且会导致在执行第二行时将第一行插入的`int`值视为 a ，这显然违反了类型安全。 `1``string`

将此与一个空列表进行对比，这确实是通用的：

```
let empty = [] 
```

然后在这种情况下，编译器*会*推断`empty : 'a list`，因为将空视为代码中不同位置的不同类型的列表是安全的，而不会影响类型安全：

```
let l1 : int list = empty
let l2 : string list = empty
let l3 = 'a' :: empty 
```

在您制作`empties`泛型函数的返回值的情况下：

```
let empties() = Array.create 100 [] 
```

再次推断泛型类型是安全的，因为如果我们从之前尝试我们的有问题的场景：

```
empties().[0] <- [1]
List.iter (printfn "%s") (empties().[0]) 
```

我们在每一行上创建一个*新*数组，因此类型可以不同而不会破坏类型系统。希望这有助于更多地解释限制背后的原因。

# asp.net-mvc - 将元素放在一行中

> ID：10200944
> 
> 赞同：-1
> 
> 时间：2012-04-18T00:06:48.513
> 
> 标签：asp.net-mvc, css

我正在尝试将 H2 和 Div 排成一行但不起作用

我哪里有错误？

```
<div style="display:inline"><h2>LISTA DE SEDES</h2> |<div class="Create">  @Html.ActionLink("Create", "Create")</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:09:37.083

和`<h2>`内部 div 应该有`display:inline;`，而不是外部 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:10:42.367

尝试这个：

```
<div style="display:inline"><h2 style="display:inline;">LISTA DE SEDES</h2> |<div class="Create" style="display:inline;">  @Html.ActionLink("Create", "Create")</div></div> 
```

你应该看到：

```
LISTA DE SEDES | @Html.ActionLink("Create", "Create") 
```

内联显示。你也可以用浮点数来做：

```
<style type="text/css">
.float_left {
    float:left;
}
.clear {
    clear:both;
}
</style>
<div class="float_left">
<h2 style="display:inline;">LISTA DE SEDES</h2>
</div> 
<div class="float_left"> | </div> 
<div class="float_left"><div class="Create">  @Html.ActionLink("Create", "Create")</div></div>
<div class="clear"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T00:11:01.257

如果您希望嵌套`<div>`显示与您的内联，则`<h2>`需要应用于`display: inline`嵌套 div 本身。默认情况下，标题元素也显示为块，因此您需要指定您`<h2>`的也显示内联。

```
<div><h2 style="display: inline">LISTA DE SEDES</h2> |<div class="Create" style="display: inline">  @Html.ActionLink("Create", "Create")</div></div>​ 
```

在此处查看演示：http: [//jsfiddle.net/t5FEX/](http://jsfiddle.net/t5FEX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T04:10:29.280

嘿，你应该使用`display inline-block`

像这样

```
<div  style="display: inline-block;">
<h2 style="display: inline-block;">LISTA DE SEDES</h2> |
<div class="Create"  style="display: inline-block;">  @Html.ActionLink("Create", "Create")</div>
</div> 
```

​​​​​​​​​​现场演示[http://jsfiddle.net/rohitazad/t5FEX/1/](http://jsfiddle.net/rohitazad/t5FEX/1/)

# ruby - 尝试从 ruby script 中运行乘客状态命令时的特权问题

> ID：10200946
> 
> 赞同：1
> 
> 时间：2012-04-18T00:07:03.263
> 
> 标签：ruby, centos, passenger, collectd

我在 ruby​​ 中编写了一个 collectd 插件，用于检查乘客状态并报告各种指标。当我测试我的脚本时一切正常，但是当我尝试通过 collectd 运行我的脚本时，它失败并显示以下消息。

> > “错误：您无权查询此 Phusion Passenger 实例的状态。请使用 'sudo' 重试。”

然后我更改了我的 ruby​​ 脚本以使用 sudo 命令来获取乘客状态，这导致

> > “exec plugin: exec_read_one: error = sudo: 抱歉，你必须有一个 tty 才能运行 sudo”

然后我尝试让 collectd 以 root 身份运行脚本，但我得到了以下

> > “执行插件：胆小拒绝以root身份执行程序。”

我不确定我还能尝试什么。由 root 以外的用户使用时失败的命令是`passenger-status`

这是脚本

> > `#!/usr/bin/env ruby` 需要'getoptlong'
> > 
> > `# The name of the collectd plugin, something like apache, memory, mysql, interface, ...` PLUGIN_NAME = '乘客状态'
> > 
> > def 用法 puts("#{$0} -h [-i ]") 退出结束
> > 
> > `# Main` begin # 同步标准输出，以便正确刷新到 collectd。$stdout.sync = 真
> > 
> > # 解析命令行选项 hostname = nil sampling_interval = 20 # sec, Default value opts = GetoptLong.new( [ '--hostid', '-h', GetoptLong::REQUIRED_ARGUMENT ], [ '--sampling-interval', ' -i', GetoptLong::OPTIONAL_ARGUMENT ] ) opts.each 做 |opt, arg| case opt when '--hostid' hostname = arg when '--sampling-interval' sampling_interval = arg.to_i end end use if !hostname
> > 
> > # 收集循环 while true do start_run = Time.now.to_i next_run = start_run + sampling_interval
> > 
> > ```
> > # collectd data and print the values
> > data = `passenger-status`
> > max = data.match(/max (.*)/).to_s.split.last
> > count = data.match(/count (.*)/).to_s.split.last
> > active = data.match(/active (.*)/).to_s.split.last
> > inactive = data.match(/inactive (.*)/).to_s.split.last
> > waiting = data.match(/Waiting on global queue: ([\d]+)/).to_s.split.last
> > puts("PUTVAL #{hostname}/#{PLUGIN_NAME}/gauge-max_allowed_connections #{start_run}:#{max}")
> > puts("PUTVAL #{hostname}/#{PLUGIN_NAME}/gauge-thread_count #{start_run}:#{count}")
> > puts("PUTVAL #{hostname}/#{PLUGIN_NAME}/gauge-threads_active #{start_run}:#{active}")
> > puts("PUTVAL #{hostname}/#{PLUGIN_NAME}/gauge-threads_inactive #{start_run}:#{inactive}")
> > puts("PUTVAL #{hostname}/#{PLUGIN_NAME}/gauge-waiting_in_queue #{start_run}:#{waiting}")
> > 
> > # sleep to make the interval
> > while((time_left = (next_run - Time.now.to_i)) > 0) do
> >   sleep(time_left)
> > end 
> > ```
> > 
> > 结束结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:50:47.863

查看`phusion_passenger/admin_tools/server_instance.rb`文件，我能够确定乘客使用什么文件来确定用户是否能够运行乘客状态命令。

`filename = "#{@generation_path}/passenger-status-password.txt" password = File.open(filename, "rb") do |f| f.read end rescue Errno::EACCES raise RoleDeniedError`

它试图读取的`passenger-status-password.txt`文件是该文件位于`/tmp/passenger.1.0.19198/generation-1/`CentOS 5.7 上乘客版本 3.0.9 的目录中。我将文件修改为 644，这解决了这个问题。如果有人想在没有 sudo 的情况下运行乘客状态命令，此解决方案也适用。

# mysql - MySQL 多列与单列的速度/优化

> ID：10200947
> 
> 赞同：1
> 
> 时间：2012-04-18T00:07:05.253
> 
> 标签：mysql, performance, optimization, structure

我正在研究一个描述某些人不同身体特征的数据库。

我的问题是，像这样设置多列的性能会更快/更少的工作负载：

```
HAIR | EYES | HEIGHT | WEIGHT
brwn | blue | 5'9"   | 150 
```

或者有一个单列用分隔符分隔数据，如下所示：

```
ATTRIBUTES
Hair: Brown,
Eyes: Blue,
Height: 5'9",
Weight: 150 
```

一个有另一个优势吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:10:51.153

每个属性都应该有单独的列。否则你为什么还要使用数据库？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T00:11:33.480

如果有的话，性能差异将是最小的。将数据分隔在单个列中的问题在于，它使执行搜索变得更加困难和资源密集。如果你想找到所有体重在 150 到 160 之间并且有一头金发的人怎么办？将所有内容都塞在一个列中不会那么容易。

# android - Android EditText inputType="none" 不起作用，变成“textMultiLine”

> ID：10200950
> 
> 赞同：19
> 
> 时间：2012-04-18T00:07:17.053
> 
> 标签：android, android-layout, android-widget

使用 Android 1.6(4) 和 2.3.3(10) 测试。

我制作了一个简约的测试应用程序来演示这一点，它所做的只是加载 xml：

```
setContentView(R.layout.main); 
```

xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="none"
    android:ems="10" >

</EditText> 
```

问题：

当`inputType="none"`在执行过程中设置实际输入类型变为 时`textMultiLine(0x00020001)`，我已经用调试器检查了它。

另一方面，如果我使用`inputType="text"`它按预期工作。

这是Android中的错误吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-08-10T12:35:26.180

我遇到了同样的问题：通过 xml 定义输入类型不起作用。

然后，为了修复它，我以编程方式设置输入类型：

```
@Override
public void onActivityCreated(@Nullable Bundle savedInstanceState)
    {
    ...
    editText1= (EditText) super.getActivity().findViewById(R.id.editText1);
    editText1.setInputType(InputType.TYPE_NULL);    // none...
    ...
    } 
```

这对我行得通。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-06T13:03:43.443

设置 InputType="none" xml 不起作用，但如果您使用数据绑定，那么您可以使用绑定语法来设置输入类型。

导入类型..

`<data> <import type="android.text.InputType" /> </data>`

然后绑定值

`<EditText android:id="@+id/edit_text" android:inputType="@{InputType.TYPE_NULL}" />`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-02-25T14:55:16.410

使用`android:editable="false"`. 即使它已被弃用，它在 inputType 不支持时仍然有效。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-18T02:12:03.513

据我所知，这是android代码中的一个错误。请参阅this for refrence - [How to make EditText not editable through XML in Android?](https://stackoverflow.com/questions/3928711/how-to-make-edittext-not-editable)

GalDude33 建议——

```
 android:clickable="false" 
    android:cursorVisible="false" 
    android:focusable="false" 
    android:focusableInTouchMode="false" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-03-10T07:29:04.407

用这个

```
 textView.setKeyListener(null); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-12T10:53:08.013

像这样设置 .xml 是可行的，但是，我不得不添加另一行，因为光标是可见的。

```
android:focusable="false"
android:cursorVisible="false" 
```

奇怪的是，即使在 2 年后，这个“错误”仍然存在，而且折旧的方法比建议的方法效果更好。

使用它也可以，但是在这种情况下您必须编辑背景颜色，除非您希望颜色不同。

```
android:enabled="false" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-04T14:33:35.730

以下代码有效：

利用`android:enabled="false"`

# ios - 分发存档显示 Mac OS 而不是 iOS

> ID：10200954
> 
> 赞同：4
> 
> 时间：2012-04-18T00:07:59.137
> 
> 标签：ios, xcode

我在最新版本的 Xcode 中创建了一个全新的项目，并且一直在模拟器和插入我的 Mac 的设备上构建和运行它。

最近我需要存档和导出 .ipa 以供其他人安装（仍在使用我的开发人员配置文件和我的开发人员设备之一），但无法这样做，因为当我单击“存档”上的“分发”按钮时在管理器窗口的选项卡中，首选是“提交到 Mac 应用商店”而不是 iOS 商店。

我的项目设置中没有任何内容表明 Mac OS 而不是 iOS，所以我对为什么会发生这种情况感到困惑。我试过复制目标/产品，但结果是一样的。我也让其他人在不同的 Mac 上构建项目，他们遇到了同样的问题。

这是 Xcode 中的一个已知错误吗？有什么方法可以解决吗？

谢谢，英国电信

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:34:05.633

检查您是否不小心使 Info.plist 成为目标的一部分。不应该。在 Target Membership 窗格中取消选中它或从 Copy Bundle Resources 构建阶段将其删除。

（通过这个问题找到答案：[我的 iPhone 应用程序被归档为“Mac App Archive”而不是“iOS 应用程序归档”](https://stackoverflow.com/q/10411105/60488)。）

# c# - 在我限制帧速率后精灵移动太快

> ID：10200956
> 
> 赞同：2
> 
> 时间：2012-04-18T00:08:03.043
> 
> 标签：c#, xna, sprite, frame-rate

我通过这样做来限制游戏中的每秒帧数。

```
graphics.SynchronizeWithVerticalRetrace = false;
IsFixedTimeStep = false; 
```

但是现在我的精灵/播放器的移动速度比以前快了。我不知道为什么会这样，也不知道如何解决。

```
if (keyboard.IsKeyDown(Keys.W) || keyboard.IsKeyDown(Keys.Up))
{
    position.Y -= spd;
}
if (keyboard.IsKeyDown(Keys.A) || keyboard.IsKeyDown(Keys.Left))
{
    position.X -= spd;
}
if (keyboard.IsKeyDown(Keys.S) || keyboard.IsKeyDown(Keys.Down))
{
    position.Y += spd;
}
if (keyboard.IsKeyDown(Keys.D) || keyboard.IsKeyDown(Keys.Right))
{
    position.X += spd;
} 
```

这就是我目前让精灵移动的方式。`spd = 4`在这一刻。它工作得非常好，但现在它的移动速度似乎快了 2000 倍。只需轻按其中一个键，他就会离开屏幕。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T00:14:11.687

XNA 中的游戏循环基于更新和绘制。固定时间步长也指更新，因此通过将其设置为 false，您是在告诉更新尽可能频繁地调用。由于您的代码位于更新函数中，因此它的调用次数超过了默认值，每秒固定 60 次。

而不是仅仅使用 spd，将其更改为

```
spd * (gameTime.ElapsedGameTime.Milliseconds / 16); 
```

这将改变它，以便 spd 按经过时间缩放。16 是更新以 60 fps（大约）所需的毫秒数，这是您当前的 spd 值。

编辑：对于不是 Game.cs 的一部分：

更新您有兴趣移动的课程（我将其称为 Ship，但它可以是您想要的任何东西）

```
class Ship
{
  public void Update(GameTime gameTime)
  {
    ...
    position.Y += spd * (gameTime.ElapsedGameTime.Milliseconds / 16);
    ...
  }
  ..
} 
```

然后在 Game.cs 文件中：

```
public override Update(GameTime gameTime)
{
  myShip.Update(gameTime);
  ...
} 
```

myShip 是您要移动的精灵类的变量。注意 update 不再覆盖基本方法，因此对 base.Update 的调用也消失了

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T00:22:01.773

当您关闭固定时间步长时，您需要将时间增量纳入计算以控制移动。例如：

```
if (keyboard.IsKeyDown(Keys.W) || keyboard.IsKeyDown(Keys.Up))
{
    position.Y -= spd * gameTime.ElapsedGameTime.TotalSeconds;
}
... 
```

在这种情况下，您将设置为*每秒*`spd`距离，而不是每*帧*。

# javascript - 表单单选按钮禁用/启用组

> ID：10200961
> 
> 赞同：-1
> 
> 时间：2012-04-18T00:08:29.657
> 
> 标签：javascript, jquery, html

I have a form that I am building for a client and I am trying to make it so when one group of radio buttons is selected, disable the list of checkboxes but if the radio button for the checkboxes is selected then clear the other radio buttons if他们被/被选中。

这是我正在使用的代码：

```
<form action="#">
<fieldset><legend>Activities</legend>
    <input style="margin-right:0; margin-left:0;" type="radio" id="Golf" value="I would like to golf at The Breakers Ocean Course" name="activity" />
    <label for="Golf">Golf - The Breakers Ocean Course</label>
    <ul style="margin-top:0;">
        <label for="club">Club Rental</label>
        <input style="margin-right:0; margin-left:0;" type="radio" id="club-yes" value="Yes" name="clubrental" />
        <label for="club-yes">Yes</label>
        or
        <input style="margin-right:0; margin-left:0;" type="radio" id="club-no" value="No" name="clubrental" />
        <label for="club-no">No</label><br>

        <input style="margin-right:0; margin-left:0;" type="radio" id="right-hand" value="Right Handed" name="clubhand" />
        <label for="right-hand">Right Handed</label>
        or
        <input style="margin-right:0; margin-left:0;" type="radio" id="left-hand" value="Left Handed" name="clubhand" />
        <label for="left-hand">Left Handed</label>
    </ul>
<div style="clear:both;">&nbsp;</div>
    <input style="margin-right:0; margin-left:0;" type="radio" id="hometour" value="I would like to take the Home tour and Worth Avenue Shopping" name="activity" />
    <label for="hometour">Home tour and Worth Avenue Shopping</label>
<div style="clear:both;">&nbsp;</div>
    <input style="margin-right:0; margin-left:0;" type="radio" id="museum" value="I would like to attend the Cars of Dreams Museum Tour" name="activity" />
    <label for="museum">Cars of Dreams Museum Tour</label> 
<div style="clear:both;">&nbsp;</div>
    <input style="margin-right:0; margin-left:0;" type="radio" id="spa" value="I would like to attend The Spa at the Breakers" name="activity" />
    <label for="spa">Spa - The Spa at the Breakers</label>  
        <ul style="margin-top:5px;">
            - Please select two treatments<br>
            <div style="float:left; width:220px; margin-right:15px;">
            <input type="checkbox" id="personal-retreat-massage" value="Personal Retreat Massage" name="treatment" onclick="setItems(this)">
            <label for="personal-retreat-massage">Personal Retreat Massage</label>
            </div>
            <div style="float:left; width:220px; margin-right:15px;">
            <input type="checkbox" id="simplicity-massage" value="Simplicity Massage" name="treatment" onclick="setItems(this)">
            <label for="simplicity-massage">Simplicity Massage</label>
            </div>
            <div style="float:left; width:220px; margin-right:15px;">
            <input type="checkbox" id="guerlain-classic-facial" value="Guerlain Classic Facial" name="treatment" onclick="setItems(this)">
            <label for="guerlain-classic-facial">Guerlain Classic Facial</label>
            </div>
            <div style="float:left; width:220px; margin-right:15px;">
            <input type="checkbox" id="cellular-enzyme-peel" value="Cellular Enzyme Peel" name="treatment" onclick="setItems(this)">
            <label for="cellular-enzyme-peel">Cellular Enzyme Peel</label>
            </div>
        </ul>
</fieldset>
    <center><input style="width:75px; height:25px; margin-bottom:25px;" type="submit" value="Submit" name="submit"></center>
</form 
```

> 我不能使用 PHP，所以这只能是 Javascript。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:20:29.257

您可以尝试在 spa 单选按钮未选中时禁用复选框，并在选中时启用它们。您可以检查单选元素的焦点状态。我认为以下内容应该适合您：

```
$('[type="radio"]').focus(function(){
    if ($('#spa').prop('checked')) {// jQuery 1.7.2
        $('[type="checkbox"]').removeAttr('disabled');
    } else {
        $('[type="checkbox"]').attr('disabled', 'disabled');
    }
}) 
```

希望能帮助到你！

您应该查看 jQuery 文档！他们非常有帮助！

[http://api.jquery.com/](http://api.jquery.com/)

一些可能对您目前的情况有所帮助的事情是：

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

[http://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)

[http://api.jquery.com/focus/](http://api.jquery.com/focus/)

[http://api.jquery.com/blur/](http://api.jquery.com/blur/)

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# python - 在 Django 中协商内容的最小样板量是多少？

> ID：10200972
> 
> 赞同：2
> 
> 时间：2012-04-18T00:10:16.103
> 
> 标签：python, django

在 Django 应用程序中，我有多个返回 JSON 的视图，其调用类似于：

```
return HttpResponse(json.dumps(content), mimetype="application/json") 
```

我想开始创建根据`Accept`请求的标头返回 HTML 或 JSON 的视图。可能还有其他类型，但这些是主要类型。我还想将多个 URL 路由到这个视图；文件扩展名“.html”和“.json”有助于告诉客户在提出请求时应该使用哪些类型`Accept`，我想避免使用“?format=json”反模式。

在 Django 中使用最少的样板代码或重复代码来做到这一点的正确、幸运的方法是什么？

（编辑：改写以更好地遵循 SO 的社区准则。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T04:19:01.147

我认为基于[类的视图混合](https://docs.djangoproject.com/en/1.3/topics/class-based-views/#more-than-just-html)（django 1.3+）是最简单的方法。您的所有视图都将继承自一个基类，该基类包含响应相应内容的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T01:00:33.027

我想我可能在这里看不到你的大局，但这就是我要做的：

有一个 html 模板，在请求 html 时呈现，并在`json.dumps(content)`请求 json 时保留你的 for。似乎很明显，但我想我还是应该提一下。

设置您的 URL 以发送给您`"json"`或`'html'`. ：

```
(r'^some/path/(?P<url_path>.*)\.(?P<extension>html|json)$', 'some.redirect.view'),
(r'^/(?P<extension>html|json)/AppName', include(MyApp)),
# etc etc 
```

和你的看法：

```
def myRedirectView(request, url_path, extension):

    view, args, kwargs = resolve("/" + extension + "/" + urlPath)
    kwargs['request'] = request

    return view(*args, **kwargs) 
```

我知道这有点含糊，因为我还没有完全考虑清楚，但这是我要开始的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T11:48:06.730

我已经通过创建一个基于 Django 自己的 generic.View 类的通用视图类来解决这个问题，该类定义了一个装饰器“accept_types”。这会修改应用它的视图，以便在指示的内容类型不在 Accept 标头中时返回 None 。然后，get() 方法（由 generic.View 调度程序调用）如下所示：

```
def get(self, request):
    self.request = request      # For clarity: generic.View does this anyway
    resultdata = { 'result': data, etc. }
    return (
        self.render_uri_list(resultdata) or
        self.render_html(resultdata) or 
        self.error(self.error406values())
        ) 
```

实际的视图渲染器是这样装饰的：

```
@ContentNegotiationView.accept_types(["text/uri-list"])
def render_uri_list(self, resultdata):
    resp = HttpResponse(status=200, content_type="text/uri-list")
    # use resp.write(...) to assemble rendered response body
    return resp

@ContentNegotiationView.accept_types(["text/html", "application/html", "default_type"])
def render_html(self, resultdata):
    template = loader.get_template('rovserver_home.html')
    context  = RequestContext(self.request, resultdata)
    return HttpResponse(template.render(context)) 
```

声明装饰器的（一次性）通用视图类如下所示：

```
class ContentNegotiationView(generic.View):
    """
    Generic view class with content negotiation decorators and generic error value methods

    Note: generic.View dispatcher assigns HTTPRequest object to self.request. 
    """

    @staticmethod
    def accept_types(types):
        """
        Decorator to use associated function to render the indicated content types 
        """
        def decorator(func):
            def guard(self, values):
                accept_header = self.request.META.get('HTTP_ACCEPT',"default_type")
                accept_types  = [ a.split(';')[0].strip().lower() 
                                  for a in accept_header.split(',') ]
                for t in types:
                    if t in accept_types:
                        return func(self, values)
                return None
            return guard
        return decorator 
```

（装饰器中的参数处理应该是通用的——这段代码有效，但在我写这篇文章时仍在开发中。实际代码在 GitHub 中[https://github.com/wf4ever/ro-manager/tree/develop/ src/roverlay/rovweb/rovserver](https://github.com/wf4ever/ro-manager/tree/develop/src/roverlay/rovweb/rovserver)，但在适当的时候应该分开到一个单独的包中。HTH。）

# html - background-size:cover 在 Chrome 和 Safari 中表现不佳

> ID：10200973
> 
> 赞同：2
> 
> 时间：2012-04-18T00:10:17.287
> 
> 标签：html, css

我已经阅读了几篇关于这个问题的帖子，但还没有找到解决方案。我的网站使用视差滚动效果，我需要使用带背景的 div 而不是图像。有没有办法让背景全屏显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:26:29.980

我自己也遇到了同样的问题，我的解决方案是像这样设置你的 div：

`<div id="blah"> <div class="content"> Blah content </div> </div>`

然后给每个 div 你想要的背景，给它一个`width: 100%;`并制作它`display: inline-block;`因为 div 是内联块，如果用户的浏览器窗口非常小并且你的页面需要一个 x 滚动条，那么背景将拉伸整个宽度这页纸。相反，如果您将其保留为`display: block;`用户 x 滚动时，则对于最初不在视图中的任何内容，背景颜色都会消失。

至于您的内容类，您可以在其中为您的内容设置网格，使用 960gs 或您喜欢的任何内容，作为一个类，您可以将其应用于每个部分/div。

工作（进行中）示例：[http ://residencyradio.com](http://residencyradio.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T09:40:19.683

我尝试添加

```
-webkit-backface-visibility: hidden; 
```

看起来，滞后已经消失了。

# authentication - 通过 iframe 传递登录凭据

> ID：10200974
> 
> 赞同：0
> 
> 时间：2012-04-18T00:10:23.083
> 
> 标签：authentication, post, iframe

我有两个不同的域/站点，一个 http 和一个 https。http 站点需要登录，然后用户会看到一个带有 iframe 的非安全页面，该 iframe 显示来自 https 站点的内容。

我想将登录凭据从 http 站点无缝传递到 iframe 的 https 站点。我不想使用 jquery。是否可以让 iframe 使用 POST 请求而不是 GET？我想加密来自 http 站点的登录信息并将加密的捆绑包发布到 https 站点。

我正在使用 php 和 apache，如果它有所作为的话。

我[在 iframe/POST 上找到了这篇文章，](https://stackoverflow.com/questions/168455/how-do-you-post-to-an-iframe)但不确定如何在 http 页面加载时自动提交表单。也许那是一行javascript？此外，虽然 http 站点上的登录页面有一个登录表单，但上面有 iframe 的登录后页面（当前）没有表单。也许我可以制作一个不可见的表单来创建这个 POST 请求？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:14:04.937

您可以像这样使用 Javascript：

```
document.getElementById('someId').submit(); 
```

# php - 使用 php 进行基本循环以构建 json

> ID：10200979
> 
> 赞同：1
> 
> 时间：2012-04-18T00:10:55.580
> 
> 标签：php, json

我正在查询 instagram api 以使用以下代码返回 json：

```
$instagramClientID = '9110e8c268384cb79901a96e3a16f588';

$api = 'https://api.instagram.com/v1/tags/zipcar/media/recent?client_id='.$instagramClientID; //api request (edit this to reflect tags)

$response = get_curl($api); //change request path to pull different photos 
```

所以我想解码json

```
if($response){
    // Decode the response and build an array
    foreach(json_decode($response)->data as $item){
... 
```

所以现在我想将所述数组的内容重新格式化为特定的 json 格式（geojson），代码大致是这样的：

```
array(
'type' => 'FeatureCollection',
'features' => array(
    array(
        'type' => 'Feature',
        'geometry' => array(
            'coordinates' => array(-94.34885, 39.35757),
            'type' => 'Point'
        ), // geometry
        'properties' => array(
            // latitude, longitude, id etc.
        ) // properties
    ), // end of first feature
    array( ... ), // etc.
) // features
) 
```

然后使用`json_encode`将其全部返回到一个漂亮的 json 文件中以缓存在服务器上。

我的问题...是如何使用上面的代码循环遍历 json？array/json 的外部结构是静态的，但内部需要改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T04:12:36.440

在这种情况下，最好构建一个新的数据结构，而不是替换现有的内联数据结构。

例子：

```
<?php
$instagrams = json_decode($response)->data;

$features = array();
foreach ( $instagrams as $instagram ) {
    if ( !$instagram->location ) {
        // Images aren't required to have a location and this one doesn't have one
        // Now what? 
        continue; // Skip?
    }

    $features[] = array(
        'type' => 'Feature',
        'geometry' => array(
            'coordinates' => array(
                $instagram->location->longitude, 
                $instagram->location->latitude
            ),
            'type' => 'Point'
        ),
        'properties' => array(
            'longitude' => $instagram->location->longitude,
            'latitude' => $instagram->location->latitude,
            // Don't know where title comes from
            'title' => null,
            'user' => $instagram->user->username,
             // No idea where id comes from since instagram's id seems to belong in instagram_id
            'id' => null,
            'image' => $instagram->images->standard_resolution->url,
            // Assuming description maps to caption
            'description' => $instagram->caption ? $instagram->caption->text : null,
            'instagram_id' => $instagram->id,
        )
    );
}

$results = array(
    'type' => 'FeatureCollection',
    'features' => $features,
);

print_r($results); 
```

# jpa - JPQL 查询：如何过滤关系中的行？

> ID：10200985
> 
> 赞同：2
> 
> 时间：2012-04-18T00:11:47.700
> 
> 标签：jpa, persistence, jpql

我是 JPA 2.0 的新手，几乎没有什么我不明白的。

我有几张桌子：

```
 CUST table (for customers)
    --------------------------
    CUST_ID   (pk, integer)
    CUST_NAME (varchar) 
```

和

```
 ORD table (for orders)
    ----------------------
    ORD_ID     (pk, integer)
    ORD_STATUS (char) can be: 'N' for new, 'S' for shipped, 'D' for delivered
    CUST_ID    (fk, integer) 
```

这种关系是简单的“一对多”（每个客户都可以下很多订单）。

表格内容：

```
 CUST_ID | CUST_NAME
    -------------------
     1      | elcaro
     2      | tfosorcim
     3      | elppa 
```

和

```
 ORD_ID | ORD_STATUS | CUST_ID
    -----------------------------
     2     | N          | 1
     3     | N          | 1
     4     | N          | 1
     5     | S          | 1
     6     | S          | 1
     7     | D          | 1
     8     | D          | 1
     9     | D          | 1
     10    | D          | 2
     11    | N          | 2
     12    | S          | 3
     13    | S          | 3 
```

以下是我注释类的方式：

```
 @Entity(name = "Customer")
    @Table(name = "CUST")
    public class Customer implements Serializable
    {
        private static final long serialVersionUID = 1L;

        @Id
        @Column(name = "CUST_ID")
        private Integer id;

        @Column(name = "CUST_NAME")
        private String name;

        @OneToMany(mappedBy = "customer")
        private List<Order> orders;

        // Default constructor, getters and setters (no annotations on these)
    } 
```

和

```
 @Entity(name = "Order")
    @Table(name = "ORD")
    public class Order implements Serializable
    {
        private static final long serialVersionUID = 1L;

        @Id
        @Column(name = "ORD_ID")
        private Integer id;

        @Column(name = "ORD_STATUS")
        private Character status;

        @ManyToOne
        @JoinColumns
        (
          {
            @JoinColumn(name = "CUST_ID", referencedColumnName = "CUST_ID")
          }
        )
        private Customer customer;

        // Default constructor, getters and setters (no annotations on these)
    } 
```

一切正常，以下 JPQL 查询产生了我预期的结果：

```
`select c from Customer c`
```

它返回三个 Customer 类型的对象，每个对象都包含属于该客户的订单。

但是现在，我想提取状态为“N”的订单的客户列表，以及相关的订单（当然，只有状态为“N”的订单）。回到过去的美好时光，我会写一个这样的 SQL 查询：

```
 select      c.cust_id,
                c.cust_name,
                o.ord_id,
                o.ord_status
    from        cust c
    inner join  ord o on (o.cust_id = c.cust_id)
    where       o.ord_status = 'N' 
```

它会返回以下结果集：

```
 CUST_ID | CUST_NAME | ORD_ID | ORD_STATUS
    -----------------------------------------
     1      | elcaro    | 2      | N
     1      | elcaro    | 3      | N
     1      | elcaro    | 4      | N
     2      | tfosorcim | 11     | N 
```

但是，以下 JPQL 查询不会产生预期的结果：

```
`select distinct c from Customer c join c.orders o where o.status = 'N'`
```

它返回正确的客户集（客户“elppa”没有任何状态“N”订单并且被正确排除），但每个客户都包含完整的订单集，无论状态如何。似乎只评估“where”子句以确定必须提取哪组客户，然后持久性提供程序开始导航关系以提取完整的订单集。稍微想一想，我必须承认这是有道理的。

然后我尝试了另一个 JPQL 查询：

```
`select c, o from Customer c join c.orders o where o.status = 'N'`
```

此 JPQL 查询产生的结果与前一个 SQL 查询产生的结果相似：每个结果（预期为 4 个结果）是一个 2 对象数组，第一个对象是 Customer 类型，第二个对象是 Order 类型。但是，再次，客户类型的对象包含完整的相关订单集（正如我所料，这一次）。更不用说现在订单不包含在 Customer 对象中，而是单独返回，就像在 SQL 结果集中一样。

现在的问题是：是否可以编写一个 JPQL 查询来过滤掉不仅没有状态为“N”的订单的客户，还包括不处于状态“的相关订单（在关系导航期间获取）” N'也是？我希望能够得到的是 2-customer 结果，其中每个客户仅包含其状态“N”订单。

我阅读了 Java EE 6 教程，其中一个示例（订单应用程序）的模式与我的相似，但我找不到这样的查询（在下载的源代码中）。

虽然我认为以上是标准行为，但我使用 Oracle Weblogic 12c 服务器（通过其 Eclipse 适配器），并且持久性提供程序似乎是 EclipseLink。

提前致谢。

此致，

斯特凡诺

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T13:54:48.097

JPA处理对象，一个对象是有身份的，不管怎么查询都是一样的。无论您的 where 子句是什么，返回的 Customer 对象仍然是相同的 Customer 对象并且应该具有相同的关系。这对于缓存、对象标识和一致性很重要。

您的第二个查询可能是做您想做的事情的正确方法。可以使用 JOIN FETCH 上的别名来做您想做的事情（从 EclipseLink 2.4 开始），但不推荐。

见， [http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#JOIN_FETCH](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#JOIN_FETCH)

# jquery - jQuery：在单击时定期调用函数

> ID：10200986
> 
> 赞同：0
> 
> 时间：2012-04-18T00:11:50.750
> 
> 标签：jquery

单击一个元素时，我想每隔 n 秒调用一次函数，直到释放鼠标按钮。

我该怎么做？

编辑：

```
 var interval,
        i = 0;

    $("a").on("mousedown", function(){
           interval = setInterval(function(){ $(".results").append(i++); }, 250);
    });

    $(document.body).on("mouseup", function(){
           clearInterval(interval)
    });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T00:19:43.610

试试这个：http: [//jsfiddle.net/BDSUZ/](http://jsfiddle.net/BDSUZ/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T00:13:09.587

调用`setInterval`处理程序，`mousedown`然后调用`clearInterval`.`mouseup`

# c# - EntityContext.SaveChange() 在第一次调用时需要更长的时间

> ID：10200987
> 
> 赞同：3
> 
> 时间：2012-04-18T00:12:18.933
> 
> 标签：c#, entity-framework

我正在使用带有实体框架的 BindingSource，当我调用

```
EntityContext.SaveChange(); 
```

下次我将新对象添加到绑定源然后调用 SaveChanges() 时，执行需要更多时间；方法

**编辑 2**

细节：

在加载表单事件

```
BindingSource.DataSource = EntityContext.Table; 
```

添加新按钮

```
BindingSource.AddNew();
Table m_object= (Table)BindingSource.Current;
m_object.ID = Guid.NewGuid(); 
```

正在使用绑定到其属性的控件编辑其他对象数据

然后是保存按钮

```
BindingSource.EndEdit();
Stopwatch sw = new Stopwatch();
sw.Start();
EntityContext.SaveChanges();
sw.Stop();
Console.WriteLine(sw.Elapsed.ToString()); 
```

如果我重复添加和保存几次，我会得到以下输出：

00:00:01.0788243

00:00:00.0316786

00:00:00.0292763

00:00:00.0298630

00:00:00.1127312

值得注意的是，第一次添加和保存操作比下一次添加和保存要多花将近一秒钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T00:17:51.407

这可能有很多原因，一个可能的原因是您的数据库在您执行第一次提交时是自动增长的。您是否有正在执行的代码示例以及您观察到的时间差异

**编辑：**

根据您上面的代码，如果数据库中不存在一个新项目，您是否正在创建一个新项目，是否是第二次单击保存时您只是在执行 SQL 中更快的更新操作？（如果 EF 检测到没有变化，则可能为 0 次）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:21:37.767

另外，不要忘记 EF Change Tracker，它可能在第一次操作后缓存数据。根据 MergeOption 和您正在执行的操作，EF 可能会选择不调用数据库。我将使用 SQL Profiler 运行测试，以查看对数据库的实际调用的差异。此外，检查后续调用是否使用相同的数据库连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T00:48:45.257

Luke 提供的原因，但也不要忘记 JIT（即时）编译。当您运行 C# 应用程序时，它全部编译为 MSIL（Microsoft 中间语言），当您第一次开始调用方法时，JIT 必须将它们编译为本机代码并运行优化以适应其运行的操作系统。这是您第一次执行大量操作时可能会延迟几秒而不是预期毫秒的常见原因。

Mono 具有 AOT (ahead-of-time) 编译功能，这意味着它会跳过该步骤并避免第一次调用方法时的额外时间，但会牺牲其他地方的性能。

还有一个工具可以让你在 Windows 上本地预编译 C#，但我不记得它叫什么了。

[http://en.wikipedia.org/wiki/Just-in-time_compilation](http://en.wikipedia.org/wiki/Just-in-time_compilation)

# javascript - 在 Javascript 中为循环声明声明 var

> ID：10200994
> 
> 赞同：11
> 
> 时间：2012-04-18T00:13:12.237
> 
> 标签：javascript, variables, for-loop, scope

我确定我已经阅读了关于 SO 的讨论，但找不到。简单地说，在循环声明中声明 for 循环的增量是否有缺点？这有什么区别：

```
function foo() {
    for (var i=0; i<7; i++) {
        // code
    }
} 
```

...还有这个：

```
function foo() {
    var i;
    for (i=0; i<7; i++) {
        // code
    }
} 
```

既然 JS 有函数作用域，那应该没问题吧？是否存在前一种方法会导致问题的极端情况？

如果它们是相同的，为什么 Crockford/JSLint 都是“没办法 dawg”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T00:16:53.127

这些是完全相同的。javascript 中的所有局部变量都具有函数作用域，这意味着它们对于声明它们的整个函数都是有效的。起初这通常是反直觉的，因为大多数花括号语言将变量的生命周期限制在声明它们的块中。

一部分 Javascript 开发人员非常喜欢第二种形式。基本原理是，由于所有变量都具有函数作用域，因此您应该在函数级别声明它们，以使生命周期明确，即使对于那些不熟悉 Javascript 的人也是如此。这只是一种风格，绝不是硬性规定

**编辑**

请注意，随着[ES6 let](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/let)的引入，您现在可以在循环中使用 let 获取真正的块范围变量[更多详细信息](https://medium.com/front-end-developers/es6-variable-scopes-in-loops-with-closure-9cde7a198744#.hacsiac0w)

```
for(let i = 1; i <= 5; i++) {
   setTimeout(function(){
       console.log('Value of i : ' + i);
   },100);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T00:19:19.700

`var`在循环头中声明 with 的问题在于它具有欺骗性。*看起来*您正在声明一个变量，其范围仅限于`for`循环，而它实际上存在于函数中的任何地方 - 包括*在*声明之前：

```
var i = 1;
function foo() {
   console.log(i);                     // 'undefined'
   for (var i=1; i<100; ++i) {
   }
} 
```

即使`console.log`调用发生在 local 的声明之前`i`，它仍然在它的范围内，因为它在同一个函数内。因此`i`，尚未为其分配任何值的 local 是传递给`log`. 这可能令人惊讶。对于不熟悉 Javascript 范围规则的任何人来说，这肯定不是显而易见的。

从[ECMAScript 2015](http://www.ecma-international.org/ecma-262/6.0/)开始，有一种更好的方式来声明变量：[`let`](http://www.ecma-international.org/ecma-262/6.0/#sec-let-and-const-declarations). 声明的变量`let`是包含它们的块的局部变量，而不是整个函数。因此，上述代码的这个版本`1`将按预期打印：

```
let i=1; // could use var here; no practical difference at outermost scope
function foo() {
  console.log(i);               // 1
  for (let i=1; i<100; ++i) {
  }
} 
```

因此，现代 Javascript 中的最佳实践是使用`let`而不是`var`. 但是，如果您坚持使用 ECMAScript 2015 之前的实现，那么在函数顶部声明所有变量而不是等到第一次使用时会更容易混淆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T00:20:55.527

没有区别，但我更喜欢第二种方式（根据 Crockford），因为它明确表明该变量在 for 循环之外可用：

```
function() {
    for(var i=0; i<7; i++) {
        // code
    }

    // i is still in scope here and has value 7
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T00:15:07.393

这两者是完全一样的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-27T20:55:35.137

这两个代码块是相同的。循环的第一条语句`for`在for循环开始之前执行，当第二条语句为真时循环正在运行，第三条语句在每次循环迭代一次时运行。

这意味着

```
for(var i = 0; i < 8; i++) {
    //some Code
} 
```

等同于

```
var i = 0;
for(;i < 8;) {
    //some Code
    i++;
} 
```

（后面的分号`(`是告诉计算机`i < 8`实际上是第二个语句，而不是第一个）。

# html - 如何使用 nth-child 对具有行跨度的表格进行样式设置？

> ID：10200997
> 
> 赞同：33
> 
> 时间：2012-04-18T00:13:39.760
> 
> 标签：html, css, css-selectors

我有一个表，其中一行使用行跨度。所以，

```
<table>
 <tr>
  <td>...</td><td>...</td><td>...</td>
 </tr>
 <tr>
  <td rowspan="2">...</td><td>...</td><td>...</td>
 </tr>
 <tr>
              <td>...</td><td>...</td>
 </tr>
 <tr>
  <td>...</td><td>...</td><td>...</td>
 </tr>
</table> 
```

我想使用 nth-child 伪类为每隔一行添加背景颜色，但是 rowspan 把它搞砸了；它将背景颜色添加到具有行跨度的行下方的行中，而实际上我希望它跳过该行并移至下一行。

有没有办法让 nth-child 做一些聪明的事情，或者在选择器中使用 [rowspan] 来解决这个问题？因此，在这种情况下，我希望背景颜色位于第 1 行和第 4 行，但之后位于第 6、8、10 行等等（因为这些都没有行跨度）？这就像如果我看到一个行跨度，那么我希望 nth-child 将 1 添加到 n 然后继续。

可能没有解决方案，但我想我会问:-)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-10-25T12:56:09.517

似乎对我有用的是在下面的行中放置一个 td 并带有 display:none

```
<table>
   <tr>
      <td rowspan="2">2 rows</td>
      <td>1 row</td>
   </tr>
   <tr>
      <td style="display:none"></td>
      <td>1 row</td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-18T00:21:53.553

不幸的是，没有办法`:nth-child()`单独使用，或者单独使用 CSS 选择器。这与它的性质有关，`:nth-child()`它的选择纯粹基于一个元素是其父元素的第 n 个子元素，以及[CSS 缺少父选择器](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)`tr`（只有当它不包含 a时，你才能选择a `td[rowspan]`，因为例子）。

* * *

不过， jQuery 确实有`:has()`CSS 缺少的选择器，您可以将其与`:even`（不是`:odd`因为它是 0-indexed 与`:nth-child()`1-index 相结合）用于过滤作为 CSS 的替代方案：

```
$('tr:not(:has(td[rowspan])):even') 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/eFp7F)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T23:52:24.670

我有一个类似的问题，我只是用 TD 内部的背景覆盖了行背景。根据您想要的结果，这可能对您也有用吗？

```
tr:nth-child(odd) {
    background: #DDE;
}
tr:nth-child(odd) td[rowspan] {
    background: #FFF;
} 
```

当然，您可以使用类或 th 覆盖其他行，例如标题等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-20T10:25:12.187

尝试按 tbody 分隔表格，例如：

```
tbody tr:nth-child(odd){
  background: #00FFFF;
}
tbody tr:nth-child(even){
  background: #FF0000;
}

tbody:nth-child(odd)  td[rowspan]{
  background: #00FFFF;
}
tbody:nth-child(even)  td[rowspan]{
  background: #FF0000;
} 
```

```
<table>
<tbody>
<tr>
	<td rowspan="4">...</td>
	<td>...</td>
	<td>...</td>
	<td rowspan="4">...</td>
	<td>...</td>
</tr>
<tr>
	<td>...</td>
	<td>...</td>
	<td>...</td>
</tr>
<tr>
	<td>...</td>
	<td>...</td>
	<td>...</td>
</tr>
<tr>
	<td>...</td>
	<td>...</td>
    <td>...</td>
</tr>
</tbody>
<tbody>    
<tr>
	<td rowspan="3">...</td>
	<td>...</td>
	<td>...</td>
	<td rowspan="3">...</td>
	<td>...</td>
</tr>
<tr>
	<td>...</td>
	<td>...</td>
	<td>...</td>
</tr>
<tr>
	<td>...</td>
	<td>...</td>
	<td>...</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-25T11:37:40.180

如果你愿意添加一些额外的标记，你可以只使用 CSS 来做到这一点。将每个“组”行包装在一个`<tbody>`标签中。然后为每个奇数添加背景颜色`tbody`。

```
tbody:nth-child(odd) {
  background-color: yellow;
}
```

```
<table>
  <tbody>
    <tr>
      <td>tr 1</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td rowspan="2">tr 2+3</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 4</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 5</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 6</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 7</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 8</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 9</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>tr 10</td>
      <td>...</td>
      <td>...</td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-12T15:34:34.303

我结合使用以前的答案以编程方式添加`tr`'s ：`display=none`

HTML

```
 <table>
  <tr>
    <td>A</td>
    <td>B</td> 
    <td>C</td>
  </tr>
  <tr>
    <td rowspan=2>1</td>
    <td rowspan=2>2</td>
     <td>sub C 1</td>
  </tr>
  <tr>
    <td>sub C 2</td> 
  </tr>
  <tr>
    <td>3</td>
    <td>4</td>
    <td>5</td>
  </tr>
  <tr>
    <td>6</td>
    <td>7</td>
    <td>8</td>
  </tr>
</table> 
```

CSS

```
table tr:nth-child(2n) {
  background-color: #F8ECE0;
} 
```

查询

```
$( "<tr style='display:none'></tr>" ).insertAfter('tbody tr:has(td[rowspan])'); 
```

请参阅[JSfiddle](http://jsfiddle.net/eFp7F/154/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-06T12:21:10.310

如果您在示例中仅在第一列中使用行跨度，您也可以通过使用 nth-last-child(even) 来解决问题