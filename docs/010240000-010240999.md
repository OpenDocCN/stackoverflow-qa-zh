# StackOverflow 问答 10240000-10240999

# templates - 当表单包含在模板中时，不会调用 menuitem actionListener

> ID：10240004
> 
> 赞同：2
> 
> 时间：2012-04-20T03:53:19.993
> 
> 标签：templates, jsf, primefaces, facelets

当我使用`<p:menuButton>`如下：

```
<div id="div_menutop">
    <h:form id="form_top">    
        <p:menubar id="mnb_top" >  
            <p:submenu label="Help" icon="ui-icon-help">  
                <p:menuitem ajax="true"  process="@this" id="mn_item_help" update="@form" value="Hướng dẫn" actionListener="#{topprocess.helpListener}"/>  
            </p:submenu> 
        </p:menubar>  
        <p:commandButton ajax="false" action="#{secuser.logout()}" value="Thoát" />
        <p:commandButton ajax="true" actionListener="#{topprocess.helpListener}" value="Thoát" />
    </h:form>  
</div> 
```

然后它工作，`actionListener`被调用。

但是当我尝试将其放入模板组合中时，如下所示：

```
<ui:composition>
    <div id="div_menutop">
        <h:form id="form_top">    
            <p:menubar id="mnb_top" >  
                <p:submenu label="Help" icon="ui-icon-help">  
                    <p:menuitem id="mn_item_help" update="@form" value="Hướng dẫn" actionListener="#{topprocess.helpListener}"/>  
                </p:submenu> 
            </p:menubar>  
        </h:form>  
    </div>
</ui:composition> 
```

然后`actionListener`永远不会调用。这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:44:03.630

如果您正在嵌套表单，则可能会发生这种情况。即当模板客户端已经有另一个`<h:form>`. 这在 HTML 中是非法的，因此未指定浏览器行为。一些浏览器将只发送外部表单的数据，其他浏览器什么也不发送。如果 JSF 没有收到动作的参数 name=value，那么它不会调用任何东西。

您需要删除其中一个表单，以便它们不再嵌套。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

# objective-c - 更改块内的变量

> ID：10240006
> 
> 赞同：0
> 
> 时间：2012-04-20T03:53:38.810
> 
> 标签：objective-c

我在一个方法的顶部定义了这个：

`__block BOOL flag;`

我有一个 UIView 动画块，在里面我有这个：

```
flag=YES;
NSLog(@"the value of the flag is %i",flag); 
```

但是，它不是返回 1，而是记录为 0。

块中的其他东西运行正常。这里会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:08:20.083

您确定没有意外设置任何方法`flag = NO;`吗？因为看起来一切都很好。我什至自己尝试过，我可以将其记录为 1。（您使用的代码相同）

# php - vBulletin 手动 php 代码插入新用户

> ID：10240008
> 
> 赞同：2
> 
> 时间：2012-04-20T03:53:50.957
> 
> 标签：php, forum, vbulletin

我可以创建一个新的 PHP 代码来在 vBulletin 上创建/插入新用户吗？还是代码存在于 vBulletin 中，例如 Wordpress 上的 Function(wp_create_user()) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:58:11.867

打开`/admincp/user.php`并找到这个字符串

```
$_REQUEST['do'] == 'add' 
```

您会看到没有单一功能可以添加新用户，例如`wp_create_user()`.

# django - Django-storages 和 boto 和 REST

> ID：10240014
> 
> 赞同：1
> 
> 时间：2012-04-20T03:54:32.930
> 
> 标签：django, amazon-s3, amazon-web-services, boto, django-storage

晚上好，

1.  我对 Django-Storages 需要什么感到有点困惑？( [http://django-storages.readthedocs.org/en/latest/index.html](http://django-storages.readthedocs.org/en/latest/index.html) ) 它是否只是提供一个层来继续使用基本的 Django 存储代码，但使用 Amazon S3？如果是这样，这就是它使用 Boto 的原因吗？

2.  我会想使用 DevPay 和 Amazon S3。会`s3boto`用它吗？我读到要让 devpay 与 S3 一起工作，请求需要在 REST 中。DevPay 是否可以流式传输视频或获取图片的 URL？（在移动和网络浏览器上。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T05:05:07.850

django-storages 是 Django 的 FileSystem 存储类的直接替代品，允许您透明地将图像和文件上传到 S3 存储桶（以及各种其他存储系统）。它使用 Boto 在后台连接到 Amazon Web Services。

DevPay 完全独立于 S3/Boto/django-storages。我从未亲自使用过它，但您可能想看看[Stripe](http://stripe.com/)。简单的。有效的。很容易集成到 Django 中。

# r - predict.lm 与 newdata

> ID：10240017
> 
> 赞同：5
> 
> 时间：2012-04-20T03:54:47.967
> 
> 标签：r

我在`lm`不使用`data=`参数的情况下构建了一个模型：

```
m1 <- lm( mdldvlp.trim$y ~  gc.pc$scores[,1] + gc.pc$scores[,2] + gc.pc$scores[,3] + 
                            gc.pc$scores[,4] + gc.pc$scores[,5] + gc.pc$scores[,6] + predict(gc.tA)) 
```

现在我想预测`m1`使用`newdata`并命名我的新 data.frame 以匹配`lm()`上面调用中使用的变量。

作为`newComps`我的新`gc.pc`的（与`gc.tA`预测一样，它是使用新的 data.frame 预测的，没有任何问题），我已经尝试过

```
newD <- data.frame( newComps[1:100,1:6] ,
                    predict(gc.tA , newdata = mdldvlp[1:100,predKept]))

names(newD) <- names(m1$coefficients)[-1]
names(newD) <- names(m1$model)[-1]

names(newD) <- c( "gc.pc$scores[, 1]" , "gc.pc$scores[, 2]" , "gc.pc$scores[, 3]" , 
                  "gc.pc$scores[, 4]" , "gc.pc$scores[, 5]" , "gc.pc$scores[, 6]" , 
                  "predict(gc.tA)" )
names(newD) <- c( "gc.pc$scores[,1]" , "gc.pc$scores[,2]" , "gc.pc$scores[,3]" , 
                  "gc.pc$scores[,4]" , "gc.pc$scores[,5]" , "gc.pc$scores[,6]" , 
                  "predict(gc.tA)" ) 
```

不幸的是，`predict.lm`不接受上述命名策略并返回可怕的`newdata`警告以及来自构建的原始 data.frame 的预测`m1`：

```
Warning message:
'newdata' had 100 rows but variable(s) found have 1414 rows 
```

我应该如何命名`newD`列以使`predict`调用正常工作？谢谢。

下面的代码重现了这个问题：

```
 require(rpart)

    set.seed(123)
    X <- matrix(runif(200) , 20 , 10)
    gc.pc <- princomp(X)
    y <- runif(20)
    mdldvlp.trim <- data.frame(y,X)
    names(mdldvlp.trim) <- c("y",paste("x",1:10,sep=""))
    predKept <- paste("x",1:10,sep="")

    gc.tA <- rpart( y ~ . , data = mdldvlp.trim)

    m1 <- lm( mdldvlp.trim$y ~  gc.pc$scores[,1] + gc.pc$scores[,2] + gc.pc$scores[,3] + 
                                gc.pc$scores[,4] + gc.pc$scores[,5] + gc.pc$scores[,6] + predict(gc.tA))

    mdldvlp <- data.frame(matrix(runif(2000) , 200 , 10))
    names(mdldvlp) <- predKept

    newComps <- predict( gc.pc , newdata=mdldvlp )

    newD <- data.frame( newComps[1:100,1:6] ,
                        predict(gc.tA , newdata = mdldvlp[1:100,predKept]))

# enter newD naming strategy here

    predict( m1 , newdata=newD ) 
```

## 4/20 跟进：

谢谢大家的回答。我知道通过首先使用正确命名的预测器创建一个 data.frame 会更容易。我明白那个。我的问题是，如果建模数据框确实评估为具有变量命名`gc.pc$scores[,1]`等的数据框，那么为什么上面使用的命名“策略”不能使用`predict.lm`？换句话说，真的用等等来`lm`评估它的建模数据框吗？`gc.pc$scores[,1]`如果是这样，上面的重命名策略不会起作用`predict.lm`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T07:42:29.930

您正在滥用公式符号，正是这导致了您的问题。基本上你的公式：

```
m1 <- lm( mdldvlp.trim$y ~  gc.pc$scores[,1] + gc.pc$scores[,2] + 
                            gc.pc$scores[,3] + gc.pc$scores[,4] + 
                            gc.pc$scores[,5] + gc.pc$scores[,6] + 
                            predict(gc.tA)) 
```

将评估为具有名为`gc.pc$scores[,1]`etc 的变量的数据框。当您使用`predict()`它时，它将在传递给参数的对象中查找具有这些相同名称的`newdata`变量。

理想情况下，您将创建一个数据对象，其中包含您想要包含在其中的所有变量并具有适当的名称，例如：

```
fitData <- data.frame(mdldvlp.trim$y, gc.pc$scores[, 1:6], predict(gc.tA))
names(fitData) <- c("trimY", paste("scores", 1:6, sep = ""), "preds") 
```

然后通过以下方式拟合模型：

```
m1 <- lm(trimY ~ ., data = fitData) 
```

通过提供与用于拟合模型的名称相同的数据框，可以从模型中做出新的预测。因此使用你的`newD`：

```
newD <- data.frame(newComps[1:100,1:6] ,
                   predict(gc.tA , newdata = mdldvlp[1:100,predKept]))
names(newD) <- c(paste("scores", 1:6, sep = ""), "preds") 
```

接着`predict()`

```
predict(m1 , newdata=newD) 
```

## 完整示例

```
require(rpart)

set.seed(123)
X <- matrix(runif(200) , 20 , 10)
gc.pc <- princomp(X)
y <- runif(20)
mdldvlp.trim <- data.frame(y,X)
names(mdldvlp.trim) <- c("y",paste("x",1:10,sep=""))
predKept <- paste("x",1:10,sep="")

gc.tA <- rpart( y ~ . , data = mdldvlp.trim)
fitData <- data.frame(mdldvlp.trim$y, gc.pc$scores[, 1:6], predict(gc.tA))
names(fitData) <- c("trimY", paste("scores", 1:6, sep = ""), "preds")
m1 <- lm(trimY ~ ., data = fitData)
mdldvlp <- data.frame(matrix(runif(2000) , 200 , 10))
names(mdldvlp) <- predKept

newComps <- predict( gc.pc , newdata=mdldvlp )
newD <- data.frame(newComps[1:100,1:6] ,
                   predict(gc.tA , newdata = mdldvlp[1:100,predKept]))
names(newD) <- c(paste("scores", 1:6, sep = ""), "preds")
predict(m1 , newdata=newD) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:17:13.907

过去我遇到过类似的问题 - 我想我通过给变量名称而不是引用列号来解决它。例如，不要使用 gc.pc[,1]，而是将 gc.pc 矩阵转换为数据框并将名称添加到列（“PC1”、“PC2”……等）。然后确保您的 newdata 也使用这些名称（也在数据框中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-01T04:11:23.913

我有一个类似的问题。如果我的数据框有三个或更多变量（一个结果和两个或更多预测变量），那么在按列号引用列时我没有问题。但是，当我的数据框只有两个变量（一个结果，一个预测变量）时，R 给了我很多错误，包括`'newdata' had 1 row but variables found have xx rows`

按照框中的 Marc 的建议，我为数据框只有两个变量并分配了变量名称的实例编写了一个特殊情况。这解决了我的问题。

为了解决我的这个警告，我重写了：

```
lr <- lm(train[ , ncol(train)] ~ ., data = train[ , -ncol(train)]) 
```

作为：

```
if(ncol(train) == 2) {
    colnames(train) <- c('var1','var2')
    colnames(test) <- c('var1','var2')
    lr <- lm(var2 ~ var1, data = train)
} else if (ncol(train) > 2) {
    lr <- lm(train[ , ncol(train)] ~ ., data = train[ , -ncol(train)])
} 
```

# python - 如何使用 Pycharm 调试 python 脚本？

> ID：10240018
> 
> 赞同：21
> 
> 时间：2012-04-20T03:54:57.473
> 
> 标签：python, debugging, pycharm

我正在尝试使用[pycharm](http://www.jetbrains.com/pycharm/)。我可以编写代码并运行它。但是，我不知道如何调试代码。当我单击调试按钮时，我得到类似于下图的内容：

![在此处输入图像描述](../Images/5724d862c268bbd7796d20f755a7c0dc.png)

在pycharm中调试是否需要任何特殊配置？这是我的配置：

![在此处输入图像描述](../Images/2f59752ab643e954f32a9394d7d9f2fe.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-19T02:49:34.130

我想说明如何设置参数，因为我花了一段时间才做到这一点：

**找到“运行”按钮旁边的下拉菜单：**
![在此处输入图像描述](../Images/056bb838e4c92df4b6136ec55664373f.png)

**选择您要配置的文件，然后单击“编辑配置”：**
![在此处输入图像描述](../Images/30424ff049f57d24605cf54bc306a3f5.png)

**添加脚本参数：**
![在此处输入图像描述](../Images/c1c42aae22b7763781c960a95426a1b9.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T03:59:04.220

查看运行 -> 编辑配置对话框，您应该在其中单击添加新配置（左上角的 [+] 图标）。然后你需要选择项目类型（在你的情况下可能是 Python），指定你的脚本（.py）文件、参数、要使用的 Python 解释器等。一旦选择了配置，你应该能够在调试器中运行你的应用程序。

有关详细信息，请参阅在线帮助中的[调试部分。](http://www.jetbrains.com/pycharm/webhelp/debugging.html)

你好世界代码：

```
def main():
    print "Hello World"

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-13T20:49:36.530

只需从上下文菜单中单击所需选项卡，链接[https://www.jetbrains.com/help/pycharm/starting-the-debugger-session.html](https://www.jetbrains.com/help/pycharm/starting-the-debugger-session.html)

它将在后台启动调试会话，例如

```
/usr/local/bin/python3.7 "/Applications/PyCharm CE.app/Contents/helpers/pydev/pydevd.py" --cmd-line --multiproc --qt-support=auto --client 127.0.0.1 --port 56411 --file /Users/proskuryakovivan/code/audio/test.py 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-24T16:42:20.390

过去我在尝试使用 pycharm 进行调试时遇到过类似的问题。解决方案是在包含以下代码的文件中的任何位置（第一个断点）开始调试：

```
def main():
    <your code>

if __name__ == "__main__":
    main() 
```

# iphone - 在 iOS 中，为什么 objRect 可以使用，但是 NSLog(@"%@", objRect) 会导致内存访问不好？

> ID：10240020
> 
> 赞同：0
> 
> 时间：2012-04-20T03:55:01.633
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nslog

在 iOS 中，`objRect`是一个`CGRect`对象。代码运行良好

```
if (objRect.origin.x > 0)  { 
    // do something 
} 
```

但在它下面，这条线

```
NSLog(@"%@", objRect); 
```

将导致错误的内存访问 ( `EXC_BAD_ACCESS`) 并且程序将停止。这是为什么？否则可以打印出对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T03:58:09.540

CGRect 不是 Objective-C 对象，因此它无法响应 [objRect 描述]（这就是 %@ 的意思）。它是一个结构：

```
struct CGRect {
    CGPoint origin;
    CGSize size;
};
typedef struct CGRect CGRect; 
```

如果你想记录你的 CGRect，你可以使用[NSStringFromCGRect](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/NSStringFromCGRect)。

# javascript - 使用 JQUERY 或 javascript 从 JSON 文件中读取数据

> ID：10240021
> 
> 赞同：-1
> 
> 时间：2012-04-20T03:55:10.917
> 
> 标签：javascript, jquery, json

我有一个很大的 json 文件，它的结构有点像 json

```
- Lessons
    [{ "1 ":
         { " name ": "abc" ,
           " number ":"123" ,
            "check ":
             { "name ":"abc1" ,
               " quizes" :
                [ { "Questions " :
                     [ { "questiontype ": "your name" ,
                      "questionstem " : "name"
                     " options " :
                        [{ answer : "1",
                         ident : "left",
                         feedback : "yes" , 
                         answer: "no",
                         ident : "yes",
                         feedback : "yes"}
                        { answer
                         ident
                         feedback } 
                       {  answer
                         ident
                         feedback }]
                     correct_answers }}
                 Questions 
                 Questions 
                 Questions 
                 Questions 
                 Questions 
                 Questions 
                 Questions 
                 Questions 
                 Questions ]
         practise
         show
             name
             quizes }
     2 
     3}] 
```

在我第一次从 json 读取数据之前，我只是为 json 树提供了一些值，我不知道如何读取它，请给我一些提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:12:21.277

在 jQuery 中，您可以通过使用读取 json`$.parseJSON`

```
​var jsonData = '{"a" : "22"}';
$.parseJSON(jsonData) 
```

使用时`$.parseJSON`，不要错过在 json 的根中插入单引号 (') 或双引号 (")。

[示例](http://jsfiddle.net/oamiamgod/za8DN/)和[此处带有 json 数组](http://jsfiddle.net/oamiamgod/za8DN/1/)

这是一个 JSON 验证器。[http://jsonlint.com/](http://jsonlint.com/)

# android - Android：创建 UI 组件并以编程方式重用它

> ID：10240024
> 
> 赞同：0
> 
> 时间：2012-04-20T03:55:33.650
> 
> 标签：android, user-interface, components

我创建了一个简单的 UI 并由 id mainContainer2 设置。我想知道这样的事情是否可以在循环中重用它，例如

```
<LinearLayout
    android:id="@+id/mainContainer2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout> 
```

```
LinearLayout mainContainer = new LinearLayout(this);
mainContainer.setOrientation(LinearLayout.VERTICAL);

TextView textoqualquer = new TextView(this);
textoqualquer.setText("textoqualquer");
mainContainer.addView(textoqualquer);

LinearLayout maincontainer = new LinearLayout(this);
maincontainer.setOrientation(LinearLayout.VERTICAL);
maincontainer.findViewById(R.id.mainContainer2);

mainContainer.addView(maincontainer);

setContentView(mainContainer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:20:25.257

我不确定你在问什么。但是你可以在任何需要的地方使用相同的xml ui，只需像这样膨胀它

```
LayoutInflater mInflater = LayoutInflater.from(context);
LinearLayout yourLayout = (LinearLayout)mInflater.inflate(R.layout.your_layout, null); 
```

然后，您可以在需要的地方使用布局。同样在 xml 文件中，您可以使用“include”或“merge”标签来重用另一个 xml 布局，例如

```
<include layout="@layout/okcancelbar_button"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:29:23.983

我认为你可以在这种情况下使用布局充气器。采用

LinearLayout headerView = (LinearLayout) View.inflate(this, R.layout.layout_name, null);

这将为您提供布局的完整父布局，然后您可以重用您的完整视图或通过使用重用该视图的一部分

view_type my_view = (view_type)headerview.findviewbyid (R.id.view_name)

# javascript - 如何用画布删除透明的可点击区域

> ID：10240027
> 
> 赞同：0
> 
> 时间：2012-04-20T03:55:52.897
> 
> 标签：javascript, html, canvas

我正在使用画布，我有一个问题：如何从透明图像中删除可点击区域？

例如：我正在使用 Kinect.JS 制作图像，并在制作点击事件后。行。但是图像中的透明区域是可点击的！我不想要这个，因为我背面有图像......

有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:59:51.030

您将需要创建一个不透明点的地图，然后在点击处理程序中检查点击是否发生在这些点中的任何一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:47:12.473

创建图像时传递此参数：**detectionType: "pixel"**

这是教程解释。

[教程](http://www.html5canvastutorials.com/kineticjs/html5-canvas-pixel-detection-with-kineticjs/)

# visual-studio - 如何在本地安装 NuGet 包 .nupkg 文件？

> ID：10240029
> 
> 赞同：540
> 
> 时间：2012-04-20T03:56:18.397
> 
> 标签：visual-studio, nuget

我有一些来自 C# 书籍的 .nupkg 文件。我该如何安装它们？

![看不到我的包裹](../Images/a441d1dce737c5546d85af2d1dc9120d.png)

* * *

## 回答 #1

> 赞同：538
> 
> 时间：2012-04-20T04:13:41.327

**Menu *Tools* → *Options* → *Package Manager***

![Enter image description here](../Images/6cf7e7a6e99f0a6422be77ef937a1eaa.png)

Give a name and folder location. Click OK. Drop your NuGet package files in that folder.

Go to your Project in Solution Explorer, right click and select *"Manage NuGet Packages"*. Select your new package source.

![Enter image description here](../Images/bb7e137f8d0f92ce88bc4e9dcbcc5b3b.png)

Here is the [documentation](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds).

* * *

## 回答 #2

> 赞同：350
> 
> 时间：2013-01-30T10:07:10.827

您还可以使用[包管理器控制台](http://docs.nuget.org/docs/start-here/Using-the-Package-Manager-Console)`Install-Package`并通过在参数中指定包含包文件的目录的路径来调用cmdlet `-Source`：

```
Install-Package SomePackage -Source C:\PathToThePackageDir\ 
```

* * *

## 回答 #3

> 赞同：160
> 
> 时间：2016-03-02T17:19:15.697

对于我喜欢使用的 .nupkg 文件：

```
Install-Package C:\Path\To\Some\File.nupkg 
```

* * *

## 回答 #4

> 赞同：90
> 
> 时间：2018-01-31T18:23:21.253

## 对于 Visual Studio 2017 及其新的 .csproj 格式

您不能再仅使用 Install-Package 指向本地文件。（这可能是因为该`PackageReference`元素不支持文件路径；它只允许您指定包的 ID。）

您首先必须告诉 Visual Studio 您的包的位置，然后才能将其添加到项目中。大多数人所做的是进入 NuGet 包管理器并将本地文件夹添加为源（菜单*工具*→*选项*→ *NuGet 包管理器*→*包源*）。但这意味着您的依赖项的位置不会与您的代码库的其余部分一起提交（版本控制）。

### 使用相对路径的本地 NuGet 包

这将添加仅适用于特定解决方案的包源，并且您可以使用相对路径。

您需要`nuget.config`在与您的文件相同的目录中创建一个`.sln`文件。使用所需的包源配置文件。下次在 Visual Studio 2017 中打开解决方案时，这些源文件夹中的任何 .nupkg 文件都将可用。（您将看到包管理器中列出的源代码，当您管理项目的包时，您会在“浏览”选项卡上找到这些包。）

`nuget.config`这是一个帮助您入门的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <packageSources>
        <add key="MyLocalSharedSource" value="..\..\..\some\folder" />
    </packageSources>
</configuration> 
```

### 背景故事

我对这个功能的用例是我的机器上有一个代码存储库的多个实例。代码库中有一个共享库，它作为 .nupkg 文件发布/部署。这种方法允许我们代码库中的各种依赖解决方案在同一个存储库实例中使用包。此外，全新安装 Visual Studio 2017 的人可以在任何他们想要的地方签出代码，相关解决方案将成功恢复和构建。

* * *

## 回答 #5

> 赞同：57
> 
> 时间：2016-07-29T16:43:44.853

1.  将文件添加到解决方案旁边的名为 LocalPackages 的文件夹中（不必如此调用，但在后续步骤中相应地调整 xml）
2.  在您的解决方案文件旁边创建一个名为 NuGet.config 的文件，其中包含以下内容

    ```
    <?xml version="1.0" encoding="utf-8"?>
      <configuration>
        <packageSources>
          <add key="LocalPackages" value="./LocalPackages" />
        </packageSources>
        <activePackageSource>
          <!-- this tells that all of them are active -->
          <add key="All" value="(Aggregate source)" />
        </activePackageSource>
     </configuration> 
    ```

3.  如果解决方案在 Visual Studio 中打开，请将其关闭，然后重新打开。

现在你的包应该出现在浏览器中，或者可以使用 Install-Package 安装

* * *

## 回答 #6

> 赞同：54
> 
> 时间：2014-01-15T19:07:24.017

如果您有一个 .nupkg 文件并且只需要 .dll 文件，您只需将扩展名更改为 .zip 并找到 lib 目录。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2019-03-14T16:21:42.733

只是为了提供更新，Visual Studio 2015 用户有一些细微的变化。

要手动使用或安装包，请转到**工具**->**选项**-> **NuGet 包管理器**->**包源**

单击“添加”按钮，选择“源”，不要忘记单击“**更新**”，因为它会更新包的文件夹位置，如果需要，可以编辑所需的包源名称：

[![在此处输入图像描述](../Images/f0c44fb59c586e7f24e4fc9226f64974.png)](https://i.stack.imgur.com/d6Bfk.jpg)

要选择您添加的包，请右键单击您的解决方案并选择“**管理 Nuget 包**”

下拉列表在右侧，然后选择浏览以浏览您在文件夹源中指定的包。如果该文件夹源上没有 nuget 包，则这将为空：

[![在此处输入图像描述](../Images/c40a1198c7a65a8a91c89e0d3be14319.png)](https://i.stack.imgur.com/HCFDE.jpg)

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2019-08-05T17:47:17.617

在 Linux 上，使用 NuGet CLI，命令是相似的。要安装 my.nupkg，请运行

```
nuget add -Source some/directory my.nupkg 
```

然后`dotnet restore`从该目录运行

```
dotnet restore --source some/directory Project.sln 
```

或将该目录添加为 NuGet 源

```
nuget sources Add -Name MySource -Source some/directory 
```

然后告诉`msbuild`使用该目录使用`/p:RestoreAdditionalSources=MySource`or `/p:RestoreSources=MySource`。第二个开关将禁用所有其他来源，例如，这对于离线场景很有用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-10-14T15:38:12.880

最近我想安装`squirrel.windows`，我尝试`Install-Package squirrel.windows -Version 2.0.1`从[https://www.nuget.org/packages/squirrel.windows/](https://www.nuget.org/packages/squirrel.windows/)，但它失败了一些错误。所以我下载`squirrel.windows.2.0.1.nupkg`并保存在 中`D:\Downloads\`，然后我可以通过`Install-Package squirrel.windows -verbose -Source D:\Downloads\ -Scope CurrentUser -SkipDependencies`在 powershell 中成功安装它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-05-23T14:52:47.737

1.  使用以下 3 个选项之一打包您的库：

*   Visual Studio（csproj > 属性 > 包 > 勾选“在构建时生成 NuGet 包”。然后构建解决方案）
*   dotnet CLI（在项目文件夹中的命令提示符中：`dotnet build`，然后是`dotnet pack`命令）
*   NuGet CLI（在项目文件夹的命令提示符中：`dotnet build`，然后是`nuget pack`命令）

2.  使用命令将生成的包（在项目文件夹 bin > Debug（或 Release）>`*.nupkg`文件中）添加到离线提要（VS2019 中的默认位置是`C:\Program Files (x86)\Microsoft SDKs\NuGetPackages\`）`nuget add`
3.  在 VS 中，管理 NuGet 包 > 右上角：将包源更改为`Microsoft Visual Studio Online Packages`.

详细说明可以在[这里](https://fullduck.dev/how-to-release-a-nuget-package-locally/) 或在[yt上找到](https://www.youtube.com/watch?v=-IXCTljXayg)

# wordpress - Pinterest 'Pin it' 短代码，用于 wordpress 博客中的纯文本链接

> ID：10240032
> 
> 赞同：6
> 
> 时间：2012-04-20T03:56:52.073
> 
> 标签：wordpress, pinterest

我正在尝试找到一个短代码，使我能够将“Pin It”（Pinterest）文本链接添加到我的 wordpress 博客。我只想要一个文本链接。我不想使用他们提供代码的图形按钮，这使得这很棘手。

使用 Facebook 和 Twitter 非常简单。例如：

```
<a href="http://www.facebook.com/share.php?u=<?php echo get_permalink() ?>" title="Share on Facebook" target="_blank">Facebook,</a>

<a href="http://twitter.com/home?status=Currently reading <?php the_permalink(); ?>" title="Share on Twitter" target="_blank">Twitter,</a> 
```

有谁知道为 Pinterest 使用类似代码行的方法？任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T01:49:57.810

这是我在我的网站上所做的。

```
/*Stuff for Pinterest*/
    //getting the permalink
$postpermalink = urlencode( get_permalink() );

    //getting the thumbnail
$imageurl = urlencode( wp_get_attachment_url( get_post_thumbnail_id($post->ID) ) );
/*End of Pinterest*/ 
```

然后是html：

```
<a target="blank" href="http://pinterest.com/pin/create/button/?url=<?php echo $postpermalink ?>&media=<?php echo $imageurl ?>" title="Pin This Post">Pin</a> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-18T18:22:59.937

我使用：（[来源](http://diythemes.com/thesis/rtfm/add-pinterest-pins-wordpress/)）

在function.php中：

```
 function pinterest_post_page_pin_no_count() {
    global $post;
    /* HORIZONTAL NO-COUNTER PINTEREST BUTTON */
    printf( '<div class="pinterest-posts"><a href="http://pinterest.com/pin/create/button/?url=%s&media=%s" class="pin-it-button" count-layout="none">Pin It</a><script type="text/javascript" src="http://assets.pinterest.com/js/pinit.js"></script></div>', urlencode(get_permalink()), urlencode( get_post_meta($post->ID, 'thesis_post_image', true) ) );
    }
    add_shortcode( 'thesis_hook_before_post_box', 'pinterest_post_page_pin_no_count' ); 
```

在 %template-name%.php

```
 <?php echo do_shortcode("[thesis_hook_before_post_box]"); ?> 
```

或者只是（[来源](http://www.rafaytutorials.com/2013/12/pinterest-pin-it-button-without-javascript-for-wordPress-and-blogger.html)）

```
<a href="http://www.pinterest.com/pin/create/button/?url=<?php the_permalink(); ?>&media=<?php if(function_exists('the_post_thumbnail')) echo wp_get_attachment_url(get_post_thumbnail_id()); ?>&description=<?php echo get_the_title(); ?> - <?php echo get_permalink(); ?>" id="pinterest" target="_blank">Pinterest Pin It</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:03:00.450

您可以使用类似的方法，如下所示：

```
<a target="_blank" href="http://pinterest.com/pin/create/button/?url=<?php the_permalink(); ?>&amp;media=<?php echo $image->guid;?>&amp;description=<?php echo rawurlencode(get_the_title()); ?>">Pinterest,</a> 
```

示例 HTML：

```
<a target="_blank" href="http://pinterest.com/pin/create/button/?url=http://www.google.&amp;media=http://www.google.co.id/images/srpr/logo3w.png&amp;description=Google Search Engine" >Pinterest,</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:17:28.937

如果我仔细查看[生成的按钮](http://pinterest.com/about/goodies/)：

有一个`<img>`标签：

也许这就是你想要的：

```
<a href="http://pinterest.com/pin/create/button/" class="pin-it-button" count-layout="horizontal">pin it!</a> 
```

这就是您使用服务器代码的方式：

```
<a href="http://pinterest.com/pin/create/button/?url={the URL you want to pin}&media={image URL assiciated to the URL}&description={image or URL description}" class="pin-it-button" count-layout="horizontal">pin it!</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:00:57.747

将@AllanT 答案转换为简码。

*用法：`[pinterest-link title="HREF TITLE" text="ANCHOR TEXT"]`*
属性`title`和`text`是可选的。

```
add_shortcode( 'pinterest-link', 'so_10240032_pinterest_text_link' );

function so_10240032_pinterest_text_link( $atts, $content = null )
{   
    $title = ( isset( $atts['title'] ) ) ? $atts['title'] : 'Pin This Post';
    $text  = ( isset( $atts['text'] ) )  ? $atts['text']  : 'Pin';

    $postpermalink = urlencode( get_permalink() );

    $imageurl = urlencode( 
        wp_get_attachment_url( 
            get_post_thumbnail_id( $post->ID ) 
        ) 
    );

    $html = 
        '<a target="blank" href="http://pinterest.com/pin/create/button/?url=' 
        . $postpermalink 
        . '&media='
        . $imageurl
        . '" title="'
        . $title 
        . '">'
        . $text 
        . '</a>';

    return $html;
} 
```

# css - url() 手写笔错误

> ID：10240034
> 
> 赞同：0
> 
> 时间：2012-04-20T03:57:12.010
> 
> 标签：css, stylus

```
#logo  
 width  142px
 height 142px
 display block
 background-image url(../images/logo.png) 
```

最后一行防止手写笔编译。为什么？我在这里看不到我的代码有什么问题。你能发现问题。

显然这段代码是完全有效的。我的缩进没有空格的制表符，而手写笔需要空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:34:22.277

显然这段代码是完全有效的。我的缩进没有空格的制表符，而手写笔需要空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:10:17.943

错误不是由于 url 而是由于显示块，请 en-quot 块

# sql - SQL 和计数

> ID：10240035
> 
> 赞同：-2
> 
> 时间：2012-04-20T03:57:16.957
> 
> 标签：sql, ms-access, aggregate-functions

我有一张表，其中包含以下内容

```
Student Name        Grade       Class
--------------------------------------------------------
User 1              A           English
User 1              B           Math
User 2              B           Math 
```

我正在尝试创建一个查询，它将列出所有学生、总*及格*分数（A、B 和 C 级）、总 A、总 B、总 C

有人可以帮我创建查询或至少让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:08:13.853

您应该使用`sum`而不是`count`，并在内部使用条件表达式，如下所示：

```
select
  sum(case when grade in ('A','B','C') then 1 else 0 end) as passing
, sum(case when grade = 'A' then 1 else 0 end) as NumA
, sum(case when grade = 'B' then 1 else 0 end) as NumB
, sum(case when grade = 'C' then 1 else 0 end) as NumC
from grades 
```

此示例适用于 SQL Server [（请参阅此处的 sqlfiddle）](http://sqlfiddle.com/#!3/a82af/5)，但其他 RDBMS 具有类似的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T04:08:39.177

试试这个：

```
select name,
    count(case when grade in ('A', 'B', 'C') then 1 end) totalPass,
    count(case when grade = 'A' then 1 end) totalA,
    count(case when grade = 'B' then 1 end) totalB,
    count(case when grade = 'C' then 1 end) totalC
from t
group by name 
```

这是[小提琴](http://sqlfiddle.com/#!3/44634/1)。

或者，如果您使用的是 MySQL，我们可以让它变得更简单：

```
select name,
    sum(grade in ('A', 'B', 'C')) totalPass,
    sum(grade = 'A') totalA,
    sum(grade = 'B') totalB,
    sum(grade = 'C') totalC
from t
group by name 
```

这是[小提琴](http://sqlfiddle.com/#!2/658a5/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:20:57.193

这是 Access SQL 中的一个解决方案，在两个单独的查询中：

每个学生的总及格分数：

```
SELECT grades.StudentName, Count(grades.Grade) AS NumberOfPassGrades
FROM grades
WHERE (((grades.Grade) In ('A','B','C')))
GROUP BY grades.StudentName
ORDER BY grades.StudentName; 
```

A 总数、B 总数、C 总数：

```
SELECT grades.StudentName, grades.Grade, Count(grades.Grade) AS NumberOfGrades
FROM grades
GROUP BY grades.StudentName, grades.Grade
ORDER BY grades.StudentName, grades.Grade; 
```

如果您真的只需要**一个**查询，最简单的方法是将这两个查询保存为 Access 查询并将它们加入 StudentName。但是，一旦学生有多个不同的成绩，您就会多次获得 NumberOfPassGrades。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:26:13.037

另一个可能的答案（很长但不言自明）：

```
select u.UserName 
,totalA = count(a.Grade) 
,totalB = count(b.Grade) 
,totalC = count(c.Grade) 
,totalPass = count(p.Grade) 
from
GradeUser u
LEFT JOIN GradeUser a on a.UserName = u.UserName
 AND a.Grade = u.Grade AND a.Class = u.Class
 AND a.Grade ='A'
LEFT JOIN GradeUser b on b.UserName = u.UserName
 AND b.Grade = u.Grade AND b.Class = u.Class
 AND b.Grade ='B'
LEFT JOIN GradeUser c on c.UserName = u.UserName
 AND c.Grade = u.Grade AND c.Class = u.Class
 AND c.Grade ='C'
LEFT JOIN GradeUser p on p.UserName = u.UserName
 AND p.Grade = u.Grade AND p.Class = u.Class
 AND p.Grade IN ('A', 'B', 'C')
GROUP BY u.UserName 
```

# mysql - 对于 MySQL，是否有工具可以从一个表中转储一组行以及从所有相关表中转储所有相关（按外键）行？

> ID：10240037
> 
> 赞同：4
> 
> 时间：2012-04-20T03:57:41.990
> 
> 标签：mysql, mysqldump

我正在使用 MySQL 数据库。

我想从一个表中转储一组行，如果这些行具有指向其他表上的行的外键，我也想转储这些行。

然后我想将这些转储加载到不同数据库上的各自表中（例如，使用 LOAD DATA INFILE 命令）。所以仅仅使用`select...join...into outfile`是不够的，因为结果将是一个大的连接表。

例如，表 A 具有 B_id 和 C_id 列，它们分别指向表 B 和 C 上的行。因此，当我从表 A 中转储 3 行时，B 中的 3 行相关行和 C 中的 3 行也被转储。

这样的工具/脚本是否存在？

编写一个脚本来做到这一点是非常可行的，但如果这样的工具已经存在，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T07:28:54.387

我的建议：

1.  为导出创建临时表，例如 A_export、B_export、C_export 等。
2.  使用要导出的行填充这些新表。使用从支持表 B、C、... 到 A_export 的连接查询使其更容易。
3.  使用 mysqldump 转储这些表
4.  将生成的转储文件导入目标数据库
5.  重命名目标数据库中的表，删除“_export”后缀

# css - 使用 CSS 或 XPath 排除包含在另一个元素中的元素

> ID：10240040
> 
> 赞同：2
> 
> 时间：2012-04-20T03:58:15.500
> 
> 标签：css, ruby, xml, xpath, css-selectors

这是一段 XML：

```
<xml>
  <section>
    <element>good</element>
    <section class="ignored">
      <element>bad</element>
    </section>
  </section>
</xml> 
```

在 a中选择 all`elements`或 all很容易：`elements``section.ignored`

```
@doc.css('element').text
 => "goodbad" 
@doc.css('section.ignored element').text
 => "bad" 
```

*但是我*如何选择所有`elements`不在里面的东西？这不起作用：*`section.ignored`*

 *```
@doc.css('section:not(.ignored) element').text
 => "goodbad" 
```

...因为这实际上意味着“包含在**任何**未被忽略的部分中的所有元素”，包括包装其他所有内容的顶级部分！

额外的转折：与上面的简化示例不同，我必须处理的真正 XML 嵌套到任意深度，包括被忽略部分中的部分。

是的，我可以从 Ruby 中的完整数组中减去坏数组并收工，但如果可能的话，我更喜欢纯 CSS 解决方案（或者，如果必须的话，XPath）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:29:27.327

> 如何选择不在 section.ignored 内的所有元素？

**使用这个 XPath 表达式**：

```
//element[not(ancestor::section[@class='ignored'])] 
```

`element`这将选择任何没有祖先的元素 named ，`section`其`class`属性的字符串值为 string `"ignored"`。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "//element[not(ancestor::section[@class='ignored'])]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<xml>
    <section>
        <element>good</element>
        <section class="ignored">
            <element>bad</element>
        </section>
    </section>
</xml> 
```

**对上面的 XPath 表达式求值，并将所有（在本例中只有一个）选定节点复制到输出。产生了想要的正确结果**：

```
<element>good</element> 
```*

# android - 如何启动 Android 的电子邮件应用程序 (com.android.email)？

> ID：10240041
> 
> 赞同：2
> 
> 时间：2012-04-20T03:58:16.037
> 
> 标签：android, android-intent

如何启动 Android 的电子邮件应用程序 (com.android.email)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:10:10.220

你可以从意图开始

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("plain/text");
intent.putExtra(Intent.EXTRA_EMAIL, new String[] { "your@email.com" });
intent.putExtra(Intent.EXTRA_SUBJECT, "YOUR SUBJECT");
intent.putExtra(Intent.EXTRA_TEXT, "YOUR MAIL BODY");
startActivity(Intent.createChooser(intent, "")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T15:31:00.610

由于您需要启动一个包，这应该是您正在寻找的解决方案：

```
Intent intent = getPackageManager().getLaunchIntentForPackage("com.android.email");
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T04:07:40.517

我认为这对您打开电子邮件应用程序很有用。

```
Intent mailClient = new Intent(Intent.ACTION_VIEW);
mailClient.setClassName("com.google.android.gm", "com.google.android.gm.ConversationListActivity");
mailClient.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(mailClient); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:08:09.707

使用以下意图在 android 设备上启动电子邮件应用程序：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

String[] recipients = new String[]{"a@email.com", "",};

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Test");

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "This is email's message");

emailIntent.setType("text/plain");

startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

# android - IOException - 无法加载文件

> ID：10240042
> 
> 赞同：6
> 
> 时间：2012-04-20T03:58:36.830
> 
> 标签：android, file-io, ioexception

我有一个显示 GIF 图像的应用程序。*如果图像保存在 drawable 中*，一切正常，我像这样访问它

```
is=context.getResources().openRawResource(R.drawable.mygif);
movie = Movie.decodeStream(is); 
```

但我需要从互联网上下载图像，所以我将它保存到 CacheDir，效果很好。我尝试了以下内容来阅读它。

```
 try
    {
        is = new BufferedInputStream(new FileInputStream(new File(context.getCacheDir(), "mygif.gif")));
    }
    catch (FileNotFoundException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    movie = Movie.decodeStream(is); 
```

和这个

```
movie = Movie.decodeFile(new File(context.getCacheDir(), "mygif.gif").getPath()); 
```

但无论如何，它以

```
java.io.IOException
at java.io.InputStream.reset(InputStream.java:218)
at android.graphics.Movie.decodeStream(Native Method)
at android.graphics.Movie.decodeTempStream(Movie.java:74)
at android.graphics.Movie.decodeFile(Movie.java:59) 
```

或者

```
java.io.IOException: Mark has been invalidated.
at java.io.BufferedInputStream.reset(BufferedInputStream.java:350)
at android.graphics.Movie.decodeStream(Native Method) 
```

我认为这是一个非常简单的错误，但我无法克服它。清单有：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T05:38:22.233

建议：

1.尝试将下载位置移动到另一个文件夹，例如：`sdcard`，或应用程序除`cache`.

2.当初始化时`inputstream`，尝试使用：带有缓冲区大小的初始化

```
int buffersize = 16*1024;
InputStream  is = new BufferedInputStream(xxx,buffersize); 
```

3.检查文件夹中存在的文件

更新：像这样更改代码并且不要使用`Movie.decodeFile`

```
 InputStream is = null;
    try {
        is = new BufferedInputStream(new FileInputStream(new File(getCacheDir(), "mygif.gif")), 16 * 1024);
        is.mark(16 * 1024); 
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
movie = Movie.decodeStream(is); 
```

没有异常抛出，并且`movie`不为空。

此外，虽然您的代码会抛出异常，但`movie`也不为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-06T17:40:36.870

我知道这是一个非常旧的帖子，但我遇到了同样的问题

将 InputStream 复制到字节数组并调用 Movie.decodeByteArray 对我有用，即使在三星设备上也是如此

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T16:35:11.657

我的回答基于 BeNeXuS 的回答。

文件大小可能并不总是已知，请参阅：

```
File file = ...;
InputStream inputStream = new FileInputStream(file); 
```

或者

```
InputStream inputStream = getContext().getContentResolver().openInputStream(uri); 
```

得到 inputStream 后：

```
BufferedInputStream bis = new BufferedInputStream(inputStream);
ByteArrayOutputStream baos = new ByteArrayOutputStream();

byte buffer[] = new byte[1024];
int len;
while ((len = bis.read(buffer, 0, buffer.length)) > 0) {
    baos.write(buffer, 0, len);
}
bis.close();

byte[] imageData = baos.toByteArray();
baos.close();

Bitmap bitmap = BitmapFactory.decodeByteArray(imageData, 0, imageData.length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-04T10:56:26.197

在 InputStream.reset() 方法中出现内部 IOException 的情况下，Android 最高 4.4 无法从文件和流中解码电影。但是从字节解码在所有版本的 Android 上都运行良好。这是执行此操作的代码的最小版本：

```
int size = (int) imageFile.length();
byte[] buffer = new byte[size];
FileInputStream inputStream = new FileInputStream(imageFile);
int readLength = inputStream.read(buffer);
inputStream.close();
Movie movie = Movie.decodeByteArray(buffer, 0, readLength); 
```

# facebook - Facebook 照片标记示例代码？

> ID：10240044
> 
> 赞同：-1
> 
> 时间：2012-04-20T03:58:51.320
> 
> 标签：facebook, winforms, facebook-graph-api

我需要创建一个 Winform，其中包含一个按钮来打开 Facebook 相册并能够查看里面的照片。有谁知道我在哪里可以找到 Facebook 照片标记的编码教程或示例代码？我已经在谷歌上搜索了几天，仍然找不到任何分步教程。任何知道的请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T10:12:26.977

对于您的接受率：只需将 webbrowser 控件拖到您的 winform 中，然后将此代码输入到 Form_Load 事件中

```
WebBrowser1.Navigate (url_with_facebook_pics) 
```

# php - 社交登录。社会认证？寻找一个框架

> ID：10240045
> 
> 赞同：3
> 
> 时间：2012-04-20T03:58:53.040
> 
> 标签：php, mysql, frameworks, opensocial, authentication

我正在尝试找到一个如下的用户登录框架：

*   易于实施/维护。
*   易于使用简单的 if 语句来测试用户是否登录
*   用户从一个页面到另一个页面保持登录状态，框架处理所有这些
*   至少有 Facebook 的社交登录功能，还有 Twitter、Wordpress 等。
*   易于与 MySQL 集成，我可以添加额外的“配置文件”字段而无需处理框架。

加号 - 有 tumblr 的社交登录吗？- 简单的分享按钮等。

我已经发现了 Gigya、[LoginRadius](https://www.loginradius.com/)、[OneAll](http://www.oneall.com/)和 Janrain。问题是他们有糟糕的文档，我真的不确定我是否应该将它们集成到我自己的身份验证/会话系统中，或者它是否应该为我处理这些问题。

太感谢了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T06:39:06.520

试试[http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/) 它易于使用并且有大量的提供者只有一个 .php 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T12:46:08.177

FuelPHP 的 Auth 模块具有完整的 Opauth 集成，无需任何外部解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T17:34:03.510

如果需要，请尝试 facebook 登录 [http://www.sourceaddons.com/](http://www.sourceaddons.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T20:01:34.630

我最近自己也在做类似的研究，老实说，没有一个完美的框架可以处理所有这些。你能得到的最好的是[CakePHP Facebook 插件](https://github.com/webtechnick/CakePHP-Facebook-Plugin)，它涵盖了上面提到的与 Facebook 和[Opauth](http://opauth.org/)相关的所有方面，以及[Google+、Tumblr 和其他策略](https://github.com/opauth/opauth/wiki/List-of-strategies)。您也可以尝试混合身份验证，但无论如何集成[opauth](https://github.com/hybridauth/hybridauth)和混合身份验证都带有您必须自己编写的代码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-13T17:35:32.617

什么是Opauth？[http://opauth.org/](http://opauth.org/)

受 OmniAuth for Ruby 的启发，Opauth 为 PHP 应用程序与身份验证提供程序交互提供了一种标准化方法。

Opauth 作为一个框架提供了一组 API，允许开发人员创建以可预测方式跨 PHP 框架和应用程序工作的策略。

Opauth 适用于其他 PHP 应用程序和框架。目前支持：

vanilla（普通） PHP 应用程序（当然）
CakePHP（由 uzyn 维护）
CodeIgniter（由 destinomultimedia 维护）
CodeIgniter（由 mcatm 维护）
FuelPHP（由 andreoav 维护）
Laravel（由 FakeHeal 维护）
PrestaShop（由 Onasusweb 维护）
Silex（由icehero)
Yii 框架（由 kahwee 维护）
Zend Framework 2（由 lorenzoferrarajr 维护）
Nette（由 michalsvec 维护）
等等。
如果您选择的 PHP 框架尚未列出，您仍然可以像使用普通 PHP 组件（类）一样使用 Opauth。

# php - zf2 的 php_memcache.dll

> ID：10240051
> 
> 赞同：0
> 
> 时间：2012-04-20T04:00:16.590
> 
> 标签：php, zend-framework, memcached, xampp, zend-framework2

最近使用最新版本的 XAMPP for Windows 设置了服务器。随之而来的是zf2。我现在正在寻找一个适用于 PHP 5.3 的 memcache.dll 文件我使用了一些以前的 .dll 文件并收到一条错误消息：

```
"PHP Startup: memcache: Unable to initialize module.
Module compiled with build ID=API20090206,TS,vc6
PHP compiled with build ID=API20090206,TS,vc9
These options need to match" 
```

这个错误是怎么解决的？着急。

谢谢您的帮助！另一个不懂中文的高手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:45:36.890

在这里查看下载：[php_memcache.dll for PHP 5.3](https://stackoverflow.com/questions/1511045/php-memcache-dll-for-php-5-3)

您知道的一侧有几个链接。

# ruby - 无法在 ubuntu 11.10 64 位上安装 rhc openshift 客户端

> ID：10240054
> 
> 赞同：4
> 
> 时间：2012-04-20T04:01:09.590
> 
> 标签：ruby, linux, ubuntu, rubygems, openshift

谁能帮帮我，我安装了 Ruby 1.9.1 和 Ruby Gems 1.8，这是错误消息：

```
~$ sudo gem install rhc
Building native extensions.  This could take a while...
ERROR:  Error installing rhc:
ERROR: Failed to build gem native extension.
/usr/bin/ruby1.8 mkrf_conf.rb
Building native extensions.  This could take a while...

rake1.8 RUBYARCHDIR=/usr/lib/ruby/gems/1.8/gems/rhc-rest-0.0.14/lib RUBYLIBDIR=/usr/lib/ruby/gems/1.8/gems/rhc-rest-0.0.14/lib
sh: rake1.8: not found 
```

Gem 文件将继续安装在 /usr/lib/ruby/gems/1.8/gems/rhc-rest-0.0.14 以供检查。结果记录到 /usr/lib/ruby/gems/1.8/gems/rhc-rest-0.0.14/ext/gem_make.out

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T14:23:13.943

根据 Michael Frederick 的评论，对于我的 Linux Mint 12 Lisa 32 位，我有同样的错误，安装 Ruby 应用程序以管理 Openshift 云的最终解决方案如下：

```
sudo apt-get install ruby1.8
sudo apt-get install gem
sudo apt-get install rubygems
sudo gem install json_pure
sudo gem install rake
sudo gem install rhc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T22:30:29.917

实际上，您可能想尝试安装 Ruby 版本管理器 (RVM) 包，而不是标准的 ruby​​ 包，后者将您绑定到特定版本的 ruby​​。你应该看看这个页面的底部，我列出了一些关于如何在 ubuntu 上安装 rvm 和 rhc 的说明。

[https://openshift.redhat.com/community/developers/install-the-client-tools](https://openshift.redhat.com/community/developers/install-the-client-tools)

# django - Django ModalChoiceField 返回整数作为默认值

> ID：10240055
> 
> 赞同：0
> 
> 时间：2012-04-20T04:01:15.763
> 
> 标签：django, django-models, django-forms

对 python 和 django 如此陌生，在一个项目上进展顺利，但找不到上述问题的任何简单答案：

模型是这样的

```
class Projects(models.Model):
    project_name = models.CharField(max_length=200)
    project_description = models.TextField(blank=True)    
    active = models.BooleanField() 

    def __unicode__(self):
        return self.project_name 
```

我有其他将上述称为 ForignKey 的模型

```
class Estimates(models.Model):
    client = models.ForeignKey(Clients)
    estimate_summary = models.CharField(max_length=200,blank=True)
    project = models.ForeignKey(Projects,default=-1,blank=True) 
```

我知道我可以设置`blank=False`以确保我得到一个有效的选择，但是我想允许他们选择不将项目分配给估计值，在这种情况下我会存储一个默认整数 -1 或其他东西。

但是问题是我不知道如何让表单使用整数作为默认值而不是“”<-（空字符串）

```
<option selected="selected" value="">---------</option>
<option value="1">Sample Project</option> 
```

我看到的所有问题和答案都围绕着将其更改`---------`为其他文本或强迫您一起删除空白选项。我只是想

```
<option selected="selected" value="-1">---------</option> 
```

所以我的表格将验证

写完问题后，我想知道是否可以自己插入一个选项并`empty_label=None`在添加到表单时使用

```
field2 = forms.ModelChoiceField(queryset=..., empty_label=None) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:15:08.853

首先，您不想使用 -1 的整数作为默认值。对于 ForeignKeys，如果不需要，通常将 null=True 与 blank=True 结合使用（不要忘记删除并重新创建表或使用 south 迁移它——也删除默认值，因为 None 是一个有效选项使用 null=True ，因此不需要默认值）。这样，如果您不分配项目，您将在数据库中获得 NULL，这也是管理员支持的——-1 会破坏比它解决的更多。

只要您使用 null=True，blank=True ModelChoiceField 将自动按照您的需要工作。

# python - 在 Python 中更新 dict 值

> ID：10240059
> 
> 赞同：1
> 
> 时间：2012-04-20T04:01:33.330
> 
> 标签：python, python-3.x

作业由我的教授写在文档字符串中：

```
def evaluateBallot (voterPreferences, candidates):
    """
    Using voterPreferences (a dict associating each voter with a list of
      candidate names ordered from highest to lowest preference) and
      candidates(a set of candidates still remaining in the election),
      returns the vote distribution: a dict associating the name of each
      candidate in the election to the number of votes that they received
    >>> result = evaluateBallot(dict(x=['a','b','c'], y=['a','c','b'],z= ['c','a','b']),set(['b','c'])) 
    >>> (result['b'],result['c'])
    (1, 2)
    """

    d ={}
    for candidate in candidates:
       d[candidate] = 0
    for voterPreference in voterPreferences:
       if candidate == voterPreference[0]:
          d[candidate] += 1
    return d 
```

当我运行我编写的代码时，字典不会在每次候选人是选民的首选时更新 +1。我觉得错误出现在我的 if 语句中，但我不确定它到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:12:01.623

如果数据与您在评论中描述的一样，那么我认为

```
for voterPreference in voterPreferences: 
```

应该改为

```
for voterPreference in voterPreferences.values(): 
```

因为您希望 voterPreference 是 ['a','b','c'] 而不是 'x'。

PS我不太明白为什么输出应该是b = 1和c = 2。如果候选人中不存在但存在于 voterPreferences 中，你想如何处理它？忽略它？如果是这样，您的方法中需要更多逻辑来处理此问题。

**额外的**

根据您的评论，在计算最终结果时似乎应该忽略非候选人：

```
def evaluateBallot(voterPreferences, candidates):
    d = {}
    voterPrefCandOnly = [] # Just use list since we don't care about who voted

    # Remove votes for non-candidates
    for voterPref in voterPreferences.values():
        filtered = filter(lambda x: x in cand, voterPref)
        voterPrefCandOnly.append(filtered)

    # Calculate the result for voting
    for candidate in candidates:
        d[candidate] = 0
        for voterPref in voterPrefCandOnly:
            if candidate == voterPref[0]:
                d[candidate] += 1
    return d

voterPref = dict(x=['a','b','c'], y=['a','c','b'], z=['c','a','b'])
cand = set(['b','c'])
result = evaluateBallot(voterPref, cand)
print (result['b'], result['c']) # (1, 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:07:00.710

```
for candidate in candidates:
   d[candidate] = 0 
```

此循环完成后，`candidate`具有任何候选人的值最后在`candidates`.

```
for voterPreference in voterPreferences:
   if candidate == voterPreference[0]:
      d[candidate] += 1 
```

在这个循环中，我们使用剩余的`candidate`值，并且只更新那个候选人的投票。

我假设您想要做的是检查这`voterPreference[0]`是一个有效的候选人。为此，我们可以检查 是否`voterPreference[0]`是`in`现有的`d`，并相应地更新：

```
for voterPreference in voterPreferences:
   if voterPreference[0] in d:
      d[voterPreference[0]] += 1 
```

`voterPreference`如果我们知道它有多少项，我们可以通过使用元组解包来简化这一点，或者通过分配`voterPreference[0]`给另一个变量。此外，您的 3 空格缩进是非标准的；请考虑切换到 4 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:13:18.223

我相信这项作业假设读者认为一种特定类型的决选投票是理所当然的。因此，老师似乎也暗示“每个人都会投一票，而该票将投给他们评分最高的候选人，该候选人在`candidates`”

这是一个完整的答案，您可以在完成后检查您的工作，或者如果您卡了很长时间，或者希望检查您的假设：

```
def evaluateBallot(voterPreferences, candidates):
    """
       . . . 
    """
    votes = collections.Counter()  # or collections.defaultdict(lambda: 0)

    for voter,prefOrdering in voterPreferences.items():            
        for desiredCandidate in prefOrdering: # go through each person's preference list
            if desiredCandidate in candidates: # if candidate is still in the running                    
                # then this person votes for that candidate
                votes[desiredCandidate] += 1
                break
        # it is possible that the person casts no votes

    return dict(votes) 
```

# apache - htaccess 仅在域匹配时重定向

> ID：10240065
> 
> 赞同：12
> 
> 时间：2012-04-20T04:02:06.543
> 
> 标签：apache, .htaccess, redirect

我有一个问题，我需要在访问 php 之前重定向我的域。当它达到执行头球的能力时，为时已晚。

我能怎么做

```
if (domain == 'www.example.com')
redirect www.domain.com; 
```

在我的 .htaccess 中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T07:53:26.480

使用 mod_rewrite

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.example\.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-20T09:43:33.127

从 Apache 2.4 开始，您可以使用`<If>`指令来实现您的建议：

```
<If "req('Host') == 'www.example.com'">
  RedirectMatch (.*) http://www.example2.com$1
</If> 
```

对于匹配或不匹配 www 的不区分大小写版本，您可以执行以下操作：

```
<If "req('Host') =~ /example.com/i">
  RedirectMatch (.*) http://www.example2.com$1
</If> 
```

资料来源：

*   Apache 博客：[httpd 2.4 中的新功能：If、ElseIf 和 Else](https://blogs.apache.org/httpd/entry/new_in_httpd_2_4)
*   Apache 2.4 文档：[If 指令](https://httpd.apache.org/docs/2.4/mod/core.html#if)

# c++ - 如何使用 Microsoft 应用程序验证程序

> ID：10240067
> 
> 赞同：32
> 
> 时间：2012-04-20T04:02:18.040
> 
> 标签：c++, heap-corruption, application-verifier

使用 C++ 并在今天的演示中发现我遇到了损坏的堆（但仅在重要场合！！）。我在[这里找到了一些关于 SO 的帖子，](https://stackoverflow.com/questions/691794/finding-where-memory-was-last-freed)并决定下载[Application Verifier](http://www.microsoft.com/download/en/details.aspx?id=20028) and [Debugging tool](http://msdn.microsoft.com/en-us/windows/hardware/hh852363)。我目前正在运行 Visual Studio 2010。

所以，现在我只剩下了调试工具的安装，我在其中获得了一个名为 Windows Kits 的文件夹。在文件夹中，我有一个名为 WinDbg 的应用程序，我试图打开我的应用程序并运行它。它工作得很好，但我无法获得有关我的堆损坏的任何信息。然后我安装了验证程序，它只给我留下了一个头文件和一个我不知道该怎么处理的 .dll 文件。

那么，谁能告诉我如何使用这个工具，这样我就不必再忍受这样的尴尬时刻了？一直在论坛上搜索，因为我什至不知道如何打开验证器，当我阅读如何使用它的说明时，我真的迷路了（从 2009 年开始）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-20T07:22:30.897

App Verifier 将安装一个`AppVerif.EXE`可执行文件。运行它，并告诉它验证您的应用程序。然后在调试器（WinDBG 或您的 IDE）中运行您的应用程序。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-01-25T14:46:35.657

考虑将[Application Verifier](http://msdn.microsoft.com/en-us/library/ms220948%28v=vs.90%29.aspx "应用程序验证者")与*Visual Studio*调试器结合使用。

1.  启动*Visual Studio*并编译您的应用程序
2.  启动应用程序验证程序实用程序。
3.  `File`=>`Add Application`
4.  选择适当的`Tests`（例如堆，异常，...）
5.  使用 Visual Studio`Debug`启动您的应用程序。

当发生*不好*的事情时……您的调试器将停止。这应该使您对问题的根源有了一个很好的了解。

此外，在开始测试之前加载缺失的符号*可能会有所帮助。*在 Visual Studio 2017 中，您可以通过以下方式执行此操作：

1.  `Debug`
2.  `Options and Settings`
3.  `Debugging`
4.  `Symbols`
5.  `Load all symbols`

祝你好运！

**注意：**完成后，请务必禁用您启用的*AppVerfier*检查......否则，当您忘记*AppVerifier*时，您可能会在 6 个月后遇到一些意想不到的副作用。

## 参考

*   [MSDN：“应用程序验证器”文章](http://msdn.microsoft.com/en-us/library/ms220948%28v=vs.90%29.aspx "MSDN：应用程序验证器")
*   [下载：应用程序验证器](http://www.microsoft.com/en-ca/download/details.aspx?id=20028 "下载：应用程序验证器")
    *   我相信它也包含在各种 Windows SDK（以前称为 Platfrom SDK）中
    *   请注意，您可能安装了两个版本：
        *   `C:\Windows\SysWOW64\appverif.exe`[32 位版本]
        *   `C:\Windows\System32\appverif.exe`[64位版本]
*   [TechNet：两分钟练习：应用程序验证程序](http://blogs.technet.com/b/askperf/archive/2009/05/22/two-minute-drill-application-verifier.aspx "TechNet：两分钟练习：应用程序验证程序")

# git - 在同一服务器上的用户之间本地使用 git

> ID：10240069
> 
> 赞同：0
> 
> 时间：2012-04-20T04:02:48.027
> 
> 标签：git

有没有办法设置一个本地 git 存储库，供同一服务器上的用户访问，这样就不需要提供 ssh 公钥/私钥并连接到另一台服务器来访问存储库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:11:49.003

Git 可以使用 file:// URL。第二个用户需要将 repo 克隆到它自己的目录中，然后可以提交回原始目录。

```
git clone file:///home/user1/repo 
```

# android - 我应该使用 Sockets 直接连接两部 Android 手机吗

> ID：10240071
> 
> 赞同：3
> 
> 时间：2012-04-20T04:02:50.827
> 
> 标签：android, sockets, communication, android-wifi

我想直接在WIFI上进行两部Android手机之间的通信。这两款安卓手机不在同一个网络中。我已经阅读了这篇文章
[Incorporating Socket Programming into your Applications : Android](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)

我假设我们可以使用套接字连接两部 Android 手机。但我不知道直接套接字的可能限制是什么。
无论两台设备在哪里以及它们的 IP 地址是什么，它都能正常工作吗？
如果我将其设为服务器，Android 是否允许传入连接？
使用 Sockets 直接连接两部手机是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:19:06.450

可以使用 Sockets 连接两个 Android 设备，但是由于您想在 WIFI 和 WIFI 上连接它们，您**将没有静态 IP 地址**，如果在任何情况下**更改服务器的 IP 地址，这会给您带来问题。**
另一个问题是，如果您的 Android 服务器有一个**私有 IP 地址**，那么您将无法连接到 android 服务器。我不确定，但我假设**每个 Android 都有一个私有 IP 地址**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:13:18.067

无论两台设备在哪里以及它们的 IP 地址是什么，它都能正常工作吗？

**即使您在专用网络上，只要您在每个内部路由上正确设置了端口转发，它也应该这样做。**

如果我将其设为服务器，Android 是否允许传入连接？

**它应该**

使用 Sockets 直接连接两部手机是个好主意吗？

**我不明白为什么不**

试试看！您可能会发现您的 ISP 或运营商仅允许某些端口通过，如果更高的端口号给您带来问题，请尝试使用 80、443 或 22。

# asp.net - 登录后重定向到其他页面

> ID：10240072
> 
> 赞同：0
> 
> 时间：2012-04-20T04:02:56.217
> 
> 标签：asp.net

在我的 Web 应用程序中，我有 2 个用户和 2 个角色。我想根据角色将用户重定向到不同的页面。

我将以下代码用于 Login_LoggedIn 事件处理程序：

```
if(Roles.IsUserInRole(Login.UserName,"Member"))
      Response.Redirect("~Protected/frmMemberHome.aspx");
else if(Roles.IsUserInRole(Login.UserName,"Admin"))
      Response.Redirect("~Admin/frmAdminPanel.aspx"); 
```

现在，这对我不起作用。该事件不会自行触发。就我而言，成功登录后，只有登录页面会自动刷新，并且绝对没有任何反应。

网上有些论坛建议设置ASP.NET的登录控件的DestinationPageURL属性，但我的问题是不能将所有用户重定向到同一个URL，我需要根据角色更改DestinationPageURL。

这是我的用户登录页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/mainLayout.Master" AutoEventWireup="true" CodeBehind="frmUserLogin.aspx.cs" Inherits="OnlineTMS_MIST.frmUserLogin" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <asp:Login ID="Login" runat="server"
        DisplayRememberMe="False">
</asp:Login>
    </asp:Content> 
```

我不知道该怎么做。无论其他论坛建议什么，我之前尝试过的都是一样的，但对我没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:10:49.250

比较您的登录控制标记和我的。

```
<asp:Login ID="Login" runat="server"
        DisplayRememberMe="False">
</asp:Login> 
```

这是我的：

```
 <asp:Login ID="Login1" runat="server" DisplayRememberMe ="true" 
            onloggedin="Login1_LoggedIn">
        </asp:Login> 
```

我认为您尚未将事件与事件处理程序绑定。`onloggedin="Login1_LoggedIn"`您的标记中缺少此部分。如果您在 Page_Init 事件中已将其完成为：

```
 Login1.LoggedIn +=new EventHandler(Login1_LoggedIn); 
```

首先检查一下并更新它是否有效..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:08:18.320

尝试使用....

```
string RoleName = Roles.GetRolesForUser("username");
if(RoleName = "Member")
   Response.Redirect("~/Protected/frmMemberHome.aspx");
else if(RoleName = "Admin"))
   Response.Redirect("~/Admin/frmAdminPanel.aspx"); 
```

# c++ - 将指向结构成员变量的（常规）指针转换为指向整个结构的指针

> ID：10240073
> 
> 赞同：0
> 
> 时间：2012-04-20T04:02:57.900
> 
> 标签：c++, memory, pointers, memory-management

我将从上下文开始——我正在编写一个内存管理子系统，为此我提供了 new[]/delete[] 运算符的替代品。我必须解决的问题之一是如何存储由 new[] 分配的数组的大小，以便 delete[] 可以在解除分配的对象上调用析构函数。我选择的解决方案是分配更多内存并在实际数组的第一个元素之前存储数组的大小，然后返回指向该元素的指针。我想出了以下代码：

```
template<typename T, typename AllocatorType>
T* NewArrayHelper(size_t count, AllocatorType* allocator, const char* file, int line) {
    // Helper struct
    struct Helper {
        size_t Count;
        T Array[1];
    };

    Helper* ptr = allocator->Allocate(sizeof(Helper) + sizeof(T)*(count-1), ALIGNOF(Helper), file, line);

    // Call constructors, etc. ...

    return &ptr->Array[0];
} 
```

我应该提一下，我喜欢这种方法的原因是编译器会计算出数组和 size_t 的正确对齐方式，除了读取它并传递给分配器（ALIGNOF 是一个宏）之外，我不需要做任何事情。此外，我不必做任何通过联合转换或转换为 char* hack，这些黑客必须解决别名等问题。

另一方面，现在我在替换 delete[] 运算符时遇到了问题。也就是说，它被交给了一个指向该结构内部的指针。

```
template<typename T, typename AllocatorType>
void DeleteArrayHelper(T* ptr, AllocatorType* allocator, const char* file, int line) {
    // Helper struct
    struct Helper {
        size_t Count;
        T Array[1];
    };

    // Here ptr points to Array[0] in Helper struct
} 
```

如何以最少的黑客攻击并且可能可移植的方式将这样的指针转换为指向整个结构的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:08:48.803

像这样的东西会起作用，并且应该是可移植的：

```
Helper *h = (Helper*)((uintptr_t)ptr - offsetof(Helper, Array[0])); 
```

`uintptr_t`通常在`stdint.h`.

# php - 如何使用 PHP 执行 Apache 子请 求？

> ID：10240076
> 
> 赞同：4
> 
> 时间：2012-04-20T04:03:15.637
> 
> 标签：php, include

如果满足条件，我正在尝试使用 PHP 函数`virtual()`向具有“未找到”页面的用户正确显示错误文档。这是我在脚本上写的：

```
// if condition is met
virtual('/var/www/error/HTTP_NOT_FOUND.html.var'); 
```

不知何故，显示了一个空白页，这是我收到的警告：

> PHP 警告：virtual(): Unable to include '/var/www/error/HTTP_NOT_FOUND.html.var' - 第 100 行 /var/www/html/test 中的请求执行失败

我已检查是否正在执行以下操作：

1.  在 php.ini 中，`include_path = ".:/var/www/error"`

2.  在 httpd.conf 中，

    ```
    <IfModule mod_negotiation.c>
    <IfModule mod_include.c>
     <Directory "/var/www/error">
      Options +Includes
      AddOutputFilter Includes html
      AddHandler type-map var
      Order allow,deny
      Allow from all
     </Directory>
     ErrorDocument 404 /error/HTTP_NOT_FOUND.html.var
    </IfModule>
    </IfModule> 
    ```

3.  Apache 具有对错误文件夹和文件的读取权限。

什么可能导致警告以及如何解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:36:01.380

尝试从虚拟中删除根文件夹：

```
virtual('/error/HTTP_NOT_FOUND.html.var'); 
```

# visual-studio-2010 - 了解 Visual Studio 2010、AnkhSVN 和 SVN 1.7.4 的分支使用

> ID：10240078
> 
> 赞同：5
> 
> 时间：2012-04-20T04:03:31.870
> 
> 标签：visual-studio-2010, svn, ankhsvn

我是 Subversion 的新手，但我正试图摆脱 SourceSafe 的可怕阴影。所以我在学习，试图自学什么是什么，我遇到了一些我还不太明白的障碍。

SVN 1.7.3 在本地 Linux 机器上启动并运行。AnkhSVN 安装在我的 VS 2010 设置中。VS/AnkhSVN 可以与我的存储库对话。所以我开始尝试一些非常简单的控制台项目来开始。我按照迄今为止找到的指南中的建议创建了主干、分支和标签目录。

我创建了一个新的控制台解决方案，并允许 Ankh 在我的存储库中推荐的“主干”文件夹下创建该项目。在 Program.cs 中仅添加“Hello, World”行后，我将更改提交到主干。那行得通……到目前为止，很好……

我现在想假装我在一个私有分支上工作，所以我从“主干”和“头/最新”版本中选择 Subversion->Branch Project...，选中“创建后切换到分支”。这似乎进展顺利。

**问题1。**

现在这就是事情变得危险的地方。我决定将单个源文件添加到我的私有分支中的项目中，添加文件，但我无法将文件从我的私有分支移动到主干。合并/重新整合不起作用。更新不起作用。开关不工作。现在，在尝试从分支切换到主干后，VS 告诉我我的项目文件已损坏并且无法加载。

显然，我做错了什么，但我不知道是什么。看来我只需要获取一个主干工作副本，然后进行合并，但是如何在我的 VS 项目文件夹设置中执行此操作？

**问题 2**

我的下一个问题或问题，可能是问题 1 的一部分，是了解如何在 Visual Studio 端构建 Subversion 管理的项目。在 Unix 方面，我更清楚您可以将项目拉入本地文件夹，但根本不清楚 VS 项目的典型目录结构应该如何受到 Subversion 的影响。是否应该在本地 Visual Studio 框中也复制主干和分支文件夹？如果我从主干“切换”到私有分支（反之亦然），是否意味着相应的文件应该进入同一组 VS 文件夹，或者是否应该为分支和主干设置相应的集合?

**问题 3** 这更像是一个新手 SVN 问题，但是当 SVN 告诉我有冲突时，我还不明白如何解决它们。ankhSVN插件是否有专门的工具来解决冲突，还是我需要在宿主服务器上用完整的svn工具来修复它们？如果是这样，要解决的“最典型”类型的冲突是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:25:27.477

要做的第一件事：至少阅读[带有 Subversion 的版本控制](http://svnbook.red-bean.com/en/1.7/index.html)的前两章并使用示例。要执行后者，最好使用命令行客户端，例如[Slik SVN](http://www.sliksvn.com/en/download)。

AnkhSVN 本身对于 SVN 客户端来说是不够的——它只是一个将 SVN 集成到 VS 中的便利工具。因此，如果您想使用 GUI 客户端（除了命令行客户端，恕我直言，无论如何都是必须的），那么 Windows 上最受欢迎的客户端是[Tortoise SVN](http://tortoisesvn.net/)。

（积极地）阅读带有 Subversion 的版本控制将帮助您解决所有当前的问题，但这里有一些初步的想法：

**问题 1**你提交了你的分支吗？您可以通过运行确保`svn info [repo_url]/branches/[your_branch]`

**问题 2**似乎您有一些误解：SVN 也会在本地“拉取”（术语是“签出”）您的文件。读了这本书！！！

通常，您的 SVN 结构应该反映您的文件夹结构，反之亦然。此外，通常您一次只在一个分支上工作，并且只签出一个分支。当您需要在另一个分支上工作时，您会执行“svn switch”。它节省空间。现在，您当然可以从 repo 根目录开始检查您的所有存储库，但您为什么要这样做呢？（我可以想到这种情况，但他们更关心存储库维护，而不是常规工作流程）。

**问题 3**冲突——在你读完这本书之前，甚至不值得讨论。

我希望这将为您指明正确的方向。阅读本书的前两章应该花费你几个小时到几天的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T07:15:37.607

1.  您是否添加并提交了文件？

2.  您可以使用切换到保持相同的文件夹，如此处示例中所示[，](http://svnbook.red-bean.com/nightly/en/svn.ref.svn.c.switch.html)或者您可以为您的主干和分支设置两个单独的文件夹。这取决于您以及对您的项目有效的方法。如果您的项目必须在特定路径中工作，例如 Web 服务，则使用 switch 可能会更好。

3.  不幸的是，我面前没有 Ankh，但您应该能够使用 Ankh 内置的工具编辑或解决冲突，但您也可以更改配置以使用 3rd 方工具。文档[在这里](http://ankhsvn.open.collab.net/wiki/TasksHelp/ResolvingConflicts)。

# asp.net-mvc - Azure Web 角色卡在初始化

> ID：10240084
> 
> 赞同：3
> 
> 时间：2012-04-20T04:04:20.393
> 
> 标签：asp.net-mvc, deployment, azure

**编辑：我想通了。**差不多 :) 我解决了这个问题，但我发现了另一个问题。在此处记录解决方案。

* * *

我有一个试图部署到 Azure 的 MVC Web 角色。*它不断从Starting > Initializing*反弹。我进行了研究，发现了两个主要原因。

1.  我正在使用的程序集之一没有`Copy Local = True`设置
2.  诊断连接字符串错误。

我已经三次检查了我的诊断连接，它很好。我可以在 Worker Role 中使用完全相同的连接字符串，并且它启动得很好所以我认为问题与上面的 #1 有关。

这是一个标准的 MVC 项目，我向其中添加了一个 azure 部署项目，所以我猜我缺少一些“Azure Web 角色项目”会自动为我做的事情。我已经从项目上下文菜单中选择了“添加可部署程序集”选项，因此应该设置 MVC 位，对吗？

这是我的参考文献列表，突出显示的项目有`Copy Local = true`. 我缺一个吗？我还需要做什么才能部署它？是否有任何诊断工具可以帮助我解决问题？

**更新：**
我喜欢找到更多信息:)

因此，当我可以远程进入服务器时，我终于能够捕捉到它。我打开 IIS 并看到所有应该存在的东西。我试图在本地访问该站点，但出现此错误。该程序集包含在我的部署中，因此找不到它是没有意义的。似乎它正在尝试加载与打包的版本不同的版本。

> 无法加载文件或程序集“System.Web.WebPages”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

所以有（至少一个）我的错误.....但是**为什么**呢？该站点在 IIS express 中*运行*良好，在开发结构中运行良好。我在这里感觉自己像个菜鸟。我做错了什么？

![在此处输入图像描述](../Images/344488debaa45e1a7e4584c62151de16.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:19:02.823

我参考了 System.WebPages 的 V2，但 bin_dependencies 里面有 V1。我不知道这是怎么发生的，但确保一切都在正确的版本上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:56:24.550

我想知道您使用的是哪个 MVC 版本。如果您使用 MVC 3 或 4，请将 CLR 运行时重定向到新版本的程序集。例如，对于 MVC 3：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

如果您创建一个新的 MVC Web 角色，这将被自动配置。如果将现有 MVC 应用程序迁移到 Windows Azure，则需要手动配置它。

此致，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:34:44.013

您缺少一些直接或间接引用的程序集，这些程序集未打包，因为它们驻留在全局程序集缓存中，因此假定已提供。看看应该记录相同问题的[这个答案和评论。](https://stackoverflow.com/a/10142356/468244)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T06:17:23.923

不确定这是否是您遇到的问题，但是...如果启用了会话状态，则 web.config 中的默认提供程序是 SQL Express（基于 2011 年 8 月的更新，其中角色模板现在使用所有通用提供程序）。由于 Windows Azure 上没有安装 SQL Express，这会导致 Web 角色启动问题。您需要将提供程序更改为 SQL Azure 或缓存。Nate Totten关于 Universal Provider 更新的[博文对此进行了更多说明。](http://ntotten.com/2011/08/03/windows-azure-tools-1-4-released/)

[我在这里](https://stackoverflow.com/a/8802991/272109)也回答了一个类似的问题......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T05:40:45.383

当您使用 ASP.NET MVC (3) 时，您必须将其安装在 Azure 上。最简单的部署方法是使用简洁的功能“添加可部署依赖项”：

![添加可部署的依赖项](../Images/68ffb00bbae69331db14dddc0f1a4dde.png)

当您右键单击 Web 应用程序项目（Web 角色本身，而不是云项目）时，您将找到此选项。然后只需选择 ASP.NET MVC：

![在此处输入图像描述](../Images/e9da5644b8a20ece82afdf71ea37507a.png)

此过程将在您的 Web 应用程序***_bin_deployableAssemblies***中创建一个文件夹。框架将知道如何处理它。

**笔记**

“添加可部署依赖项”是[Visual Studio 2010 SP1](http://support.microsoft.com/kb/983509)的一部分。因此，如果您还没有升级到[SP1](http://www.microsoft.com/download/en/details.aspx?id=23691)，我强烈建议您这样做；）

# iphone - iPhone/IOS NsKeyedArchiver / NSUserDefaults 循环

> ID：10240085
> 
> 赞同：1
> 
> 时间：2012-04-20T04:04:25.523
> 
> 标签：iphone, objective-c, ios

我对 iOS 编程很陌生。我正在尝试使用下面列出的方法来遍历我的存档对象（nsuserdefaults）并显示它的内容。当我尝试使用下面的代码时出现错误，应用程序崩溃：

```
-[NSUserDefaults objectEnumerator]: unrecognized selector sent 
```

如果有人可以帮助我，那就太好了，我相信我循环不正确......

```
-(IBAction)loadNames:(id)sender {

NSString *fileName = [[NSString alloc] initWithFormat:@"%@", usertext.text];
NSFileManager *manager = [NSFileManager defaultManager];

User * userr = [User alloc];
userr = [NSKeyedUnarchiver unarchiveObjectWithFile:fileName];
NSUserDefaults * lg = [NSUserDefaults standardUserDefaults];
NSData *encodedUser = [NSKeyedArchiver archivedDataWithRootObject:userr];
[lg setObject:encodedUser forKey:@"userr"];

NSEnumerator *e = [lg objectEnumerator];
while (lg = [e nextObject]) {
    NSLog(@"%@", usertext);

} 
```

}

# android - res/raw/ 中的网页

> ID：10240089
> 
> 赞同：1
> 
> 时间：2012-04-20T04:04:33.993
> 
> 标签：android, webpage

我想使用网页来显示我的内容，因为这将利用 android 中内置的缩放和滚动功能。我知道我希望将网页放在 sdcard 上以允许无法访问 Internet，但我不知道如何从 res/raw/ 文件夹中调用它。我能得到一些帮助吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-24T08:42:22.037

有一种情况是我们不能使用`assets`文件夹。如果我们想从库项目中获得 WebView 加载资源怎么办。`assets`不支持文件夹，但支持`res/raw`。

据我所知，从 API 8 开始，以下工作正常：

```
webView.loadUrl("file:///android_res/raw/webPage.html"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T04:14:19.237

Put the webpage in the `assets` folder instead. Then when you want to load it, use this line of code:

```
webView.loadUrl("file:///android_asset/myWebPage.html"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:13:30.420

First get String from Drawable Folder, see following link to get contetnts of a file from raw folder:

[http://www.41post.com/3985/programming/android-loading-files-from-the-assets-and-raw-folders](http://www.41post.com/3985/programming/android-loading-files-from-the-assets-and-raw-folders)

and Then you can use WebView's loadData method to load html contents in webview.

Other method is to load html file by:

```
mWebView.loadUrl("file:///android_asset/myfile.html"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:14:34.230

You can set an html file from the assets folder like this

```
WebView wv;  
wv = (WebView) findViewById(R.id.webView1);  
wv.loadUrl("file:///android_asset/aboutcertified.html"); 
```

# audio - 如何实现 SIP 呼出的音频响铃

> ID：10240092
> 
> 赞同：2
> 
> 时间：2012-04-20T04:05:18.517
> 
> 标签：audio, sip, phone-call, ringtone, outbound

我使用 android.net.sip 类进行 SIP 呼叫

虽然，我可以拨打电话并从通话会话中捕获所有音频事件，例如响铃、忙碌、通话连接......

如何在通话中添加回铃音和忙音。

默认情况下，sipmanager 不会播放您在拨打电话时希望听到的任何正常音频。

由于 SIP 服务器在连接期间不发回任何音频，我假设必须在本地电话上播放音频。

我发现提到了 Startringbacktone() 但我不知道如何播放它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-16T13:16:58.827

您指的是**早期媒体**。早期媒体只是在接听电话之前发送的媒体。早期媒体通常通过使用 183 Session In Progress 响应来支持。与 180 Ringing 响应不同，183 将包含 SDP。此 SDP 用于建立承载这些网络音调和消息的媒体连接。

不错的读物是[SIP 媒体管理：早期媒体与晚期媒体](https://andrewjprokop.wordpress.com/2014/04/18/sip-media-management-early-media-vs-late-media/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:27:00.997

我只是使用 MediaPlayer 在开始通话和调用 OnCallEstablished 之间播放声音。

至于忙碌的声音，我不知道该怎么做。也许测试以查看返回忙时回调的内容，然后也为此启动媒体播放器。

# ruby-on-rails - 有 delay_job 日志“puts”、sql 查询和作业状态

> ID：10240094
> 
> 赞同：3
> 
> 时间：2012-04-20T04:05:37.400
> 
> 标签：ruby-on-rails, ruby, logging

现在只有以下内容被记录到`logs/delayed_job.log`：

```
2012-04-20T03:57:44+0000: Cacher completed after 5.3676
2012-04-20T03:57:44+0000: 1 jobs processed at 0.1744 j/s, 0 failed ... 
```

我想要做的是让它也记录我`puts`的所有 SQL 查询，就像它在开发模式下一样，除了它仍然被记录到`log/delayed_job.log`.

我尝试添加以下内容`initializers/delayed_job_config.rb`但没有运气：

```
Delayed::Worker.logger = Rails.logger
Delayed::Worker.logger.level = Logger::DEBUG 
```

（我现在都`puts`被记录了，但没有更多的作业状态日志，仍然没有 SQL 查询）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-10T04:16:17.707

在 Rails v3.2.13 中，您可以：

```
Delayed::Worker.logger = ActiveSupport::Logger.new("log/delayed_job.log", Rails.logger.level)
Delayed::Worker.logger.auto_flushing = 1

#only reassign AR logger if we're in a delayed process(rake task or script/delayed_job)
if caller.last =~ /script\/delayed_job/ or (File.basename($0) == "rake" and ARGV[0] =~ /jobs\:work/)
  ActiveRecord::Base.logger = Delayed::Worker.logger
end 
```

但是...ActiveSupport::BufferedLogger 已被弃用[https://github.com/rails/rails/blob/master/activesupport/lib/active_support/buffered_logger.rb#L18](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/buffered_logger.rb#L18)

另外，您可能想轮换您的日志，对吗？所以我认为这更好：

```
Delayed::Worker.logger = Logger.new("log/delayed_job.log", 5, 104857600)

if caller.last =~ /script\/delayed_job/ or (File.basename($0) == "rake" and ARGV[0] =~ /jobs\:work/)
  ActiveRecord::Base.logger = Delayed::Worker.logger
end 
```

构造函数说保留大约 5 个日志文件并在当前日志文件达到 100Mb 时轮换。有关详细信息，请参见此处： [http ://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#method-c-new](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/logger/rdoc/Logger.html#method-c-new)

归功于：[http](http://www.heedspin.com/2011/01/17/delayed-job-logging.html) ://www.heedspin.com/2011/01/17/delayed-job-logging.html 的灵感

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-28T01:57:00.643

这对于 OP 来说可能有点晚了，但这里有一种不同的方法：使用 DelayedJob 插件来设置分配给 Worker 的 Rails（和 ActiveRecord::Base）记录器。

两个步骤：在您的延迟作业初始化程序中，执行：

```
require 'delayed_job_log_setup'
Delayed::Worker.plugins << DelayedJobLogSetup 
```

插件本身（我显然把它放在 lib/delayed_job_log_setup.rb 中）：

```
require 'delayed_job'

class DelayedJobLogSetup < Delayed::Plugin
  callbacks do |lifecycle|
    lifecycle.before(:execute) do |worker|
      Rails.logger = worker.logger
      ActiveRecord::Base.logger = worker.logger
    end
  end
end 
```

不幸的是，我尝试通过猴子补丁`Object#puts`直接调用记录器（在插件内部）仍然没有达到 OP 的要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T05:03:17.993

也许这个链接对你有帮助：[https ://stackoverflow.com/a/7223681/445908](https://stackoverflow.com/a/7223681/445908)

更新：关于看跌期权的更多信息。与记录器：

我不确定您将“放置”结果存储到日志文件中的实现方式。**但是我认为总是**使用“logger”而不是“puts”可能是一个更好的选择。原因是：

1.  在大多数情况下，`puts`会降低你的性能（特别是在生产环境中，在我过去的所有项目中，`puts`都不允许出现在源代码中）（对于java程序员来说，`System.out.println`是一样的东西）

2.  始终使用`logger`，因为它有 5 个默认级别：调试、信息、警告、错误、致命，可以通过`grep`. 例如可以`puts`生成下面的日志信息吗？

    ```
    07:27:48 INFO: in device_resource, options: queryem??ltres67@blur.com 
    07:27:48 INFO: cloudset: ??100 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-14T01:08:21.610

`script/delayed_job`另一种方法是在 Rails 应用程序的文件中进行必要的日志文件配置。我的现在是这个样子

```
#!/usr/bin/env ruby

require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config', 'environment'))
require 'delayed/command'

# This was added to make sure the DJ log has the same log level 
# as the rails app, and to ensure ActiveRecord uses the same log 
# when loaded inside a DJ worker process.
#
Delayed::Worker.logger ||= Logger.new(File.join(Rails.root, 'log', 'delayed_job.log'), Rails.configuration.log_level)
ActiveRecord::Base.logger = Delayed::Worker.logger

Delayed::Command.new(ARGV).daemonize 
```

这种方法非常简单明了。

更重要的是，对于不涉及延迟工作进程的场景，不存在弄乱 AR 记录器的风险。这发生在我们身上，采用与其他一些答案类似的不同方法，并引起了许多头痛和困惑。

# javascript - 文本未清除 onClick（创建动态文本区域）

> ID：10240096
> 
> 赞同：-1
> 
> 时间：2012-04-20T04:05:57.130
> 
> 标签：javascript, jquery

当用户单击文本输入控件时，我试图清除文本，如下所示，但它没有发生......下面是代码

```
 var generate_message = $("<textarea onclick='if (this.value == 'Enter message here...') this.value = '''  rows='5' cols='45' id='comment'>Enter message here...</textarea>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:13:57.083

You cannot use single quote in html and javascript. It causes confusion in browser renderer

Usually, I separate the use of single quote and double quote. I use double quote for html and single quote for javascript

See example below

```
<textarea onclick="if (this.value == 'Enter message here...') this.value = ''"  rows="5" cols="45" id="comment">Enter message here...</textarea>​​​​​​​​​​​​​​​​​​​​ 
```

*   Add Fiddle

See [Fiddle](http://jsfiddle.net/vVr6g/) example

*   UPDATE I just realised that you have $("...") so what i suggest you can escape the single quote by putting \

see updated fiddle [here](http://jsfiddle.net/vVr6g/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:39:41.523

我想以不[引人注目](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的方式做到这一点

```
$(function(){
    $(document).on("focus","#comment",function(){
    if($(this).val()=="Enter message here...")
       $(this).val("")   
    });        
}); 
```

这是示例[http://jsfiddle.net/8UjkA/11/](http://jsfiddle.net/8UjkA/11/)

# html - 从用户提交的文本区域中去除 HTML

> ID：10240097
> 
> 赞同：0
> 
> 时间：2012-04-20T04:06:02.450
> 
> 标签：html

我正在使用一个名为“用户提交的帖子”的插件 - 有一个文本区域允许用户输入内容这里是代码：

```
<li class="usp_content">
            <label for="user-submitted-content" class="usp_label">Your Content</label>
            <div>
                <textarea class="usp_textarea" name="user-submitted-content" id="user-submitted-content" rows="5"></textarea>
            </div>
        </li> 
```

问题是这段代码允许用户输入 HTML 代码等。我试图从 HTML 中删除它，但我只是不知道如何，搜索并尝试了这么多代码，但它不起作用。

如果有人告诉我如何从上面的代码中删除 html，我真的很感激，这样这个人就不能放 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:58:05.957

你必须写这样的东西

```
<?php
    $yourTextareaContent = $_POST['user-submitted-content']; // if form METHOD="POST"
    //$yourTextareaContent = $_GET['user-submitted-content']; // if form METHOD="GET"
    echo strip_tags($yourTextareaContent);
?> 
```

您还必须在服务器端执行此操作（从您的表单接收内容的 php 脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:24:04.153

如果使用 PHP，那么您可以使用以下方法去除 html 标签：

```
 echo strip_tags($yourTextareaContent); 
```

参见：[strip_tags](http://php.net/manual/en/function.strip-tags.php)

# iphone - 将 UIImage 保存到照片库而不是相机胶卷

> ID：10240099
> 
> 赞同：5
> 
> 时间：2012-04-20T04:06:06.323
> 
> 标签：iphone, ios, camera, photo

我知道如何使用标准 API 调用相机胶卷来保存图像。我也知道没有相机的设备会保存到照片库中。

对于带有相机的设备，如何将 UIImage 保存到相机胶卷的照片库中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:29:53.160

你应该试试IOS SDK提供的这个方法，

```
UIImageWriteToSavedPhotosAlbum(myImage, nil, nil, nil ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T04:18:55.900

我知道如何做到这一点的唯一方法是使用 UIImageWriteToSavedPhotosAlbum，快速路线是将 nil 传递给除 UIImage 参数之外的所有内容。

```
UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:52:51.077

照片库只是一个占位符，显示手机上的所有照片，包括相机胶卷。因此，如果您从相机中删除了一张照片，它将在照片库中消失。照片库中的那个不是重复的；它更像是一条捷径。完全有道理。它就像一个“收藏夹”文件夹。它从主文件夹中获取信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T06:02:26.033

这就是你发现的。该链接显示了如何将图像存储在 iPhone Gallery 中。查看链接：[http ://sugartin.info/2012/01/10/permanently-download-image-and-fetch-locally-images/](http://sugartin.info/2012/01/10/permanently-download-image-and-fetch-locally-images/)

# java - Clojure / Lein / 打包到罐子里

> ID：10240100
> 
> 赞同：3
> 
> 时间：2012-04-20T04:06:22.527
> 
> 标签：java, clojure, leiningen

在过去的 6 个月里，我一直从 repl 运行我的 Clojure 应用程序。

即，每当我想运行应用程序时，我都会加载一个 clojure repl，然后输入： (load-file "src/run.clj") ... 它会运行我的应用程序。

然后，clojure 加载我所有的 *.clj 文件，编译它们并运行。

我最近切换到 Lein。我想“提前编译/打包”我的代码，这样我就可以获得一个带有 Main 方法的 jar，并通过“java ...”直接在命令行上运行它，而不必加载一个clojure/lein repl。

我很清楚我需要做一些 RTFMing。但是，如果有人可以为我指出一个好的教程，那将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T10:09:07.330

[lein 官方](https://github.com/technomancy/leiningen/blob/preview/doc/TUTORIAL.md)教程中也有一个不错的教程。我只是将这些信息包括在内，以防我们将来出现任何死链接。

`:main`1）您首先需要通过添加到 project.clj来指定主命名空间

```
(defproject yourproject "0.1"
   :dependencies [[org.clojure/clojure "1.4.0"]]
   :main yourproject.core) 
```

2）在您指定的主命名空间中，您必须添加`(:gen-class)`，并且您必须通过使用指定主功能`(defn -main ...)`

```
(ns yourproject.core
  (:gen-class))

(defn -main [& args]
  (println "This is your crazy project!")) 
```

3）运行`uberjar`创建独立的jar

```
lein uberjar 
```

4）运行你的程序`java -jar`

```
java -jar yourproject.jar 
```

# c - 使用信号量来防止竞争条件（在 C 中）

> ID：10240101
> 
> 赞同：2
> 
> 时间：2012-04-20T04:06:25.980
> 
> 标签：c, semaphore

所以，这是一个非常简单的问题。我正在尝试使用信号量来防止竞争条件。我尝试阅读手册页，但它们确实令人困惑。有人可以提供一个简单的解释他们是如何工作的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:12:23.620

我假设您在 Linux/Unix 中使用。信号量用于控制/限制从多个线程对共享资源（比如说全局变量）的访问。一个线程可以获取信号量，修改值并释放它如果另一个线程试图访问该变量，它应该获取信号量，如果它已经被获取，它被挂起并在前一个线程放弃控制后获得访问权。

这种方式信号量用于操作的排序和变量的完整性。

信号量也用于从一个线程向另一个线程发送事件信号。互斥量是信号量的变体，同一线程获取并释放它（以保护临界区或竞争条件）

在下面阅读更多详细信息

[https://www.sao.ru/hq/sts/linux/doc/ipc_guide/semaphores.html](https://www.sao.ru/hq/sts/linux/doc/ipc_guide/semaphores.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T01:20:40.390

我目前正在我的 Systems II 课程中讨论这个主题，该课程基本上使用 C 语言进行编程。正如我的导师向我们解释的那样，信号量是一个非负整数同步变量，它本质上有助于控制某些线程函数。它的工作方式有点像 pthread_mutex 函数，它试图在你的代码中保持线程受到监管......嗯 - 是的，我知道它有点晦涩，但总而言之的信号量用于调节线程活动，尤其是在使用相对较小的缓冲区时. 希望我没有让您更加困惑（0_0）。

我的意思的几个例子：

– 信号量：非负整数同步变量。

• sem_wait(s): [ while(s==0) wait(); s--; ] – 最初命名为 P()，荷兰语为“Proberen”（测试）

• sem_post(s)：[ s++；]

– 最初命名为 V()，荷兰语为“Verhogen”（增量）

– OS 保证括号 [ ] 之间的操作不可分割地执行。

信用/引文：菲利普斯博士，约瑟夫，德保罗大学，讲座（2014 年）

# php - json_encode 给出了意想不到的结果

> ID：10240105
> 
> 赞同：0
> 
> 时间：2012-04-20T04:06:46.867
> 
> 标签：php

我想使用 JSON 对对象进行编码以回答 AJAX 请求。首先，我将对象转换为数组（结果看起来不错），然后我使用`json_encode`将数组编码为 JSON 格式，但我得到了意想不到的结果。获取的 JSON 字符串在属性名之前有类名，并且空字符 '\0000' 出现在很多地方。我所有的文件都使用 UTF-8 编码。如果我使用`get_object_vars`，我会得到结果`array = []`。

我该如何解决这个问题？

我得到了结果：`{"\u0000DB\u0000connection":null,"\u0000DB\u0000serverName":"localhost","\u0000DB\u0000userName":"root","\u0000DB\u0000password":null,"\u0000DB\u0000dbName":"thahtin"}`

这是我使用的代码：

```
class DB
{
    private $connection;
    private $serverName;
    private $userName;
    private $password;
    private $dbName;

    public function __construct()
    {
        $config = new Configuration();
        $this->serverName = 'localhost'; //$config->getConfig("server");
        $this->userName = 'root'; //$config->getConfig("userName");
        $this->password = null; //$config->getConfig("password");
        $this->dbName = 'thahtin'; //$config->getConfig("database");
    }       

    public function open()
    {
        if(!$this->connection)
            mysql_close($this->connection);
        $this->connection = mysql_connect($this->serverName, $this->userName, $this->password);
        if(!$this->connection)
        {
            die('Could not connect. Error: ' . mysql_error());
        }
        mysql_select_db($dbName);
    }
}

$db = new DB();
echo json_encode((array)$db); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:08:53.337

[`get_object_vars`](http://www.php.net/get_object_vars)返回一个空数组，因为您的所有属性都是私有的。将它们公开，或者（更好）自己构建数组，以便您可以控制其中的内容。

# android - CannyEdgeDetector 使用位图给出堆栈溢出

> ID：10240106
> 
> 赞同：1
> 
> 时间：2012-04-20T04:06:53.860
> 
> 标签：android, bitmap

我在我的 Android 应用程序中使用 CannyEdgeDetector.java (http://www.tomgibara.com/computer-vision/canny-edge-detector) 进行边缘检测。

我不得不通过将其输入和输出更改为位图而不是 BufferedImages 来将其“移植”到 Android，因为 Android 不支持 BufferedImage 库。

这适用于 100x200 像素的小图像。不幸的是，对于任何更大的事情，它都会在 follow() 方法上产生堆栈溢出。但我需要使用更大的图片，可能是 8 兆像素。

解决此问题的最佳方法是什么？

原 CannyEdgeDetector.java：http://www.tomgibara.com/computer-vision/CannyEdgeDetector.java 我的[：](http://www.tomgibara.com/computer-vision/CannyEdgeDetector.java)

```
public class CannyEdgeDetector {

// statics

private final static float GAUSSIAN_CUT_OFF = 0.005f;
private final static float MAGNITUDE_SCALE = 10F;
private final static float MAGNITUDE_LIMIT = 100F;
private final static int MAGNITUDE_MAX = (int) (MAGNITUDE_SCALE * MAGNITUDE_LIMIT);

// fields

private int height;
private int width;
private int picsize;
private int[] data;
private int[] magnitude;
private Bitmap sourceImage;
private Bitmap edgesImage;

private float gaussianKernelRadius;
private float lowThreshold;
private float highThreshold;
private int gaussianKernelWidth;
private boolean contrastNormalized;

private float[] xConv;
private float[] yConv;
private float[] xGradient;
private float[] yGradient;

// constructors

/**
 * Constructs a new detector with default parameters.
 */

public CannyEdgeDetector() {
    lowThreshold = 2.5f;
    highThreshold = 7.5f;
    gaussianKernelRadius = 2f;
    gaussianKernelWidth = 16;
    contrastNormalized = false;
}

// accessors

/**
 * The image that provides the luminance data used by this detector to
 * generate edges.
 * 
 * @return the source image, or null
 */

public Bitmap getSourceImage() {
    return sourceImage;
}

/**
 * Specifies the image that will provide the luminance data in which edges
 * will be detected. A source image must be set before the process method
 * is called.
 *  
 * @param image a source of luminance data
 */

public void setSourceImage(Bitmap image) {
    // Convert to RGB
    sourceImage = image.copy(Bitmap.Config.ARGB_8888, true);
    //sourceImage = image.copy(Bitmap.Config.ALPHA_8, true);
}

/**
 * Obtains an image containing the edges detected during the last call to
 * the process method. The buffered image is an opaque image of type
 * BufferedImage.TYPE_INT_ARGB in which edge pixels are white and all other
 * pixels are black.
 * 
 * @return an image containing the detected edges, or null if the process
 * method has not yet been called.
 */

public Bitmap getEdgesImage() {
    return edgesImage;
}

/**
 * Sets the edges image. Calling this method will not change the operation
 * of the edge detector in any way. It is intended to provide a means by
 * which the memory referenced by the detector object may be reduced.
 * 
 * @param edgesImage expected (though not required) to be null
 */

public void setEdgesImage(Bitmap edgesImage) {
    this.edgesImage = edgesImage;
}

/**
 * The low threshold for hysteresis. The default value is 2.5.
 * 
 * @return the low hysteresis threshold
 */

public float getLowThreshold() {
    return lowThreshold;
}

/**
 * Sets the low threshold for hysteresis. Suitable values for this parameter
 * must be determined experimentally for each application. It is nonsensical
 * (though not prohibited) for this value to exceed the high threshold value.
 * 
 * @param threshold a low hysteresis threshold
 */

public void setLowThreshold(float threshold) {
    if (threshold < 0) throw new IllegalArgumentException();
    lowThreshold = threshold;
}

/**
 * The high threshold for hysteresis. The default value is 7.5.
 * 
 * @return the high hysteresis threshold
 */

public float getHighThreshold() {
    return highThreshold;
}

/**
 * Sets the high threshold for hysteresis. Suitable values for this
 * parameter must be determined experimentally for each application. It is
 * nonsensical (though not prohibited) for this value to be less than the
 * low threshold value.
 * 
 * @param threshold a high hysteresis threshold
 */

public void setHighThreshold(float threshold) {
    if (threshold < 0) throw new IllegalArgumentException();
    highThreshold = threshold;
}

/**
 * The number of pixels across which the Gaussian kernel is applied.
 * The default value is 16.
 * 
 * @return the radius of the convolution operation in pixels
 */

public int getGaussianKernelWidth() {
    return gaussianKernelWidth;
}

/**
 * The number of pixels across which the Gaussian kernel is applied.
 * This implementation will reduce the radius if the contribution of pixel
 * values is deemed negligable, so this is actually a maximum radius.
 * 
 * @param gaussianKernelWidth a radius for the convolution operation in
 * pixels, at least 2.
 */

public void setGaussianKernelWidth(int gaussianKernelWidth) {
    if (gaussianKernelWidth < 2) throw new IllegalArgumentException();
    this.gaussianKernelWidth = gaussianKernelWidth;
}

/**
 * The radius of the Gaussian convolution kernel used to smooth the source
 * image prior to gradient calculation. The default value is 16.
 * 
 * @return the Gaussian kernel radius in pixels
 */

public float getGaussianKernelRadius() {
    return gaussianKernelRadius;
}

/**
 * Sets the radius of the Gaussian convolution kernel used to smooth the
 * source image prior to gradient calculation.
 * 
 * @return a Gaussian kernel radius in pixels, must exceed 0.1f.
 */

public void setGaussianKernelRadius(float gaussianKernelRadius) {
    if (gaussianKernelRadius < 0.1f) throw new IllegalArgumentException();
    this.gaussianKernelRadius = gaussianKernelRadius;
}

/**
 * Whether the luminance data extracted from the source image is normalized
 * by linearizing its histogram prior to edge extraction. The default value
 * is false.
 * 
 * @return whether the contrast is normalized
 */

public boolean isContrastNormalized() {
    return contrastNormalized;
}

/**
 * Sets whether the contrast is normalized
 * @param contrastNormalized true if the contrast should be normalized,
 * false otherwise
 */

public void setContrastNormalized(boolean contrastNormalized) {
    this.contrastNormalized = contrastNormalized;
}

// methods

public void process() {
    width = sourceImage.getWidth();
    height = sourceImage.getHeight();
    picsize = width * height;
    initArrays();
    readLuminance();
    if (contrastNormalized) normalizeContrast();
    computeGradients(gaussianKernelRadius, gaussianKernelWidth);
    int low = Math.round(lowThreshold * MAGNITUDE_SCALE);
    int high = Math.round( highThreshold * MAGNITUDE_SCALE);
    performHysteresis(low, high);
    thresholdEdges();
    writeEdges(data);
}

// private utility methods

private void initArrays() {
    if (data == null || picsize != data.length) {
        data = new int[picsize];
        magnitude = new int[picsize];

        xConv = new float[picsize];
        yConv = new float[picsize];
        xGradient = new float[picsize];
        yGradient = new float[picsize];
    }
}

//NOTE: The elements of the method below (specifically the technique for
//non-maximal suppression and the technique for gradient computation)
//are derived from an implementation posted in the following forum (with the
//clear intent of others using the code):
//  http://forum.java.sun.com/thread.jspa?threadID=546211&start=45&tstart=0
//My code effectively mimics the algorithm exhibited above.
//Since I don't know the providence of the code that was posted it is a
//possibility (though I think a very remote one) that this code violates
//someone's intellectual property rights. If this concerns you feel free to
//contact me for an alternative, though less efficient, implementation.

private void computeGradients(float kernelRadius, int kernelWidth) {

    //generate the gaussian convolution masks
    float kernel[] = new float[kernelWidth];
    float diffKernel[] = new float[kernelWidth];
    int kwidth;
    for (kwidth = 0; kwidth < kernelWidth; kwidth++) {
        float g1 = gaussian(kwidth, kernelRadius);
        if (g1 <= GAUSSIAN_CUT_OFF && kwidth >= 2) break;
        float g2 = gaussian(kwidth - 0.5f, kernelRadius);
        float g3 = gaussian(kwidth + 0.5f, kernelRadius);
        kernel[kwidth] = (g1 + g2 + g3) / 3f / (2f * (float) Math.PI * kernelRadius * kernelRadius);
        diffKernel[kwidth] = g3 - g2;
    }

    int initX = kwidth - 1;
    int maxX = width - (kwidth - 1);
    int initY = width * (kwidth - 1);
    int maxY = width * (height - (kwidth - 1));

    //perform convolution in x and y directions
    for (int x = initX; x < maxX; x++) {
        for (int y = initY; y < maxY; y += width) {
            int index = x + y;
            float sumX = data[index] * kernel[0];
            float sumY = sumX;
            int xOffset = 1;
            int yOffset = width;
            for(; xOffset < kwidth ;) {
                sumY += kernel[xOffset] * (data[index - yOffset] + data[index + yOffset]);
                sumX += kernel[xOffset] * (data[index - xOffset] + data[index + xOffset]);
                yOffset += width;
                xOffset++;
            }

            yConv[index] = sumY;
            xConv[index] = sumX;
        }

    }

    for (int x = initX; x < maxX; x++) {
        for (int y = initY; y < maxY; y += width) {
            float sum = 0f;
            int index = x + y;
            for (int i = 1; i < kwidth; i++)
                sum += diffKernel[i] * (yConv[index - i] - yConv[index + i]);

            xGradient[index] = sum;
        }

    }

    for (int x = kwidth; x < width - kwidth; x++) {
        for (int y = initY; y < maxY; y += width) {
            float sum = 0.0f;
            int index = x + y;
            int yOffset = width;
            for (int i = 1; i < kwidth; i++) {
                sum += diffKernel[i] * (xConv[index - yOffset] - xConv[index + yOffset]);
                yOffset += width;
            }

            yGradient[index] = sum;
        }

    }

    initX = kwidth;
    maxX = width - kwidth;
    initY = width * kwidth;
    maxY = width * (height - kwidth);
    for (int x = initX; x < maxX; x++) {
        for (int y = initY; y < maxY; y += width) {
            int index = x + y;
            int indexN = index - width;
            int indexS = index + width;
            int indexW = index - 1;
            int indexE = index + 1;
            int indexNW = indexN - 1;
            int indexNE = indexN + 1;
            int indexSW = indexS - 1;
            int indexSE = indexS + 1;

            float xGrad = xGradient[index];
            float yGrad = yGradient[index];
            float gradMag = hypot(xGrad, yGrad);

            //perform non-maximal supression
            float nMag = hypot(xGradient[indexN], yGradient[indexN]);
            float sMag = hypot(xGradient[indexS], yGradient[indexS]);
            float wMag = hypot(xGradient[indexW], yGradient[indexW]);
            float eMag = hypot(xGradient[indexE], yGradient[indexE]);
            float neMag = hypot(xGradient[indexNE], yGradient[indexNE]);
            float seMag = hypot(xGradient[indexSE], yGradient[indexSE]);
            float swMag = hypot(xGradient[indexSW], yGradient[indexSW]);
            float nwMag = hypot(xGradient[indexNW], yGradient[indexNW]);
            float tmp;
            /*
             * An explanation of what's happening here, for those who want
             * to understand the source: This performs the "non-maximal
             * supression" phase of the Canny edge detection in which we
             * need to compare the gradient magnitude to that in the
             * direction of the gradient; only if the value is a local
             * maximum do we consider the point as an edge candidate.
             * 
             * We need to break the comparison into a number of different
             * cases depending on the gradient direction so that the
             * appropriate values can be used. To avoid computing the
             * gradient direction, we use two simple comparisons: first we
             * check that the partial derivatives have the same sign (1)
             * and then we check which is larger (2). As a consequence, we
             * have reduced the problem to one of four identical cases that
             * each test the central gradient magnitude against the values at
             * two points with 'identical support'; what this means is that
             * the geometry required to accurately interpolate the magnitude
             * of gradient function at those points has an identical
             * geometry (upto right-angled-rotation/reflection).
             * 
             * When comparing the central gradient to the two interpolated
             * values, we avoid performing any divisions by multiplying both
             * sides of each inequality by the greater of the two partial
             * derivatives. The common comparand is stored in a temporary
             * variable (3) and reused in the mirror case (4).
             * 
             */
            if (xGrad * yGrad <= (float) 0 /*(1)*/
                ? Math.abs(xGrad) >= Math.abs(yGrad) /*(2)*/
                    ? (tmp = Math.abs(xGrad * gradMag)) >= Math.abs(yGrad * neMag - (xGrad + yGrad) * eMag) /*(3)*/
                        && tmp > Math.abs(yGrad * swMag - (xGrad + yGrad) * wMag) /*(4)*/
                    : (tmp = Math.abs(yGrad * gradMag)) >= Math.abs(xGrad * neMag - (yGrad + xGrad) * nMag) /*(3)*/
                        && tmp > Math.abs(xGrad * swMag - (yGrad + xGrad) * sMag) /*(4)*/
                : Math.abs(xGrad) >= Math.abs(yGrad) /*(2)*/
                    ? (tmp = Math.abs(xGrad * gradMag)) >= Math.abs(yGrad * seMag + (xGrad - yGrad) * eMag) /*(3)*/
                        && tmp > Math.abs(yGrad * nwMag + (xGrad - yGrad) * wMag) /*(4)*/
                    : (tmp = Math.abs(yGrad * gradMag)) >= Math.abs(xGrad * seMag + (yGrad - xGrad) * sMag) /*(3)*/
                        && tmp > Math.abs(xGrad * nwMag + (yGrad - xGrad) * nMag) /*(4)*/
                ) {
                magnitude[index] = gradMag >= MAGNITUDE_LIMIT ? MAGNITUDE_MAX : (int) (MAGNITUDE_SCALE * gradMag);
                //NOTE: The orientation of the edge is not employed by this
                //implementation. It is a simple matter to compute it at
                //this point as: Math.atan2(yGrad, xGrad);
            } else {
                magnitude[index] = 0;
            }
        }
    }
}

//NOTE: It is quite feasible to replace the implementation of this method
//with one which only loosely approximates the hypot function. I've tested
//simple approximations such as Math.abs(x) + Math.abs(y) and they work fine.
private float hypot(float x, float y) {
    return (float) Math.hypot(x, y);
}

private float gaussian(float x, float sigma) {
    return (float) Math.exp(-(x * x) / (2f * sigma * sigma));
}

private void performHysteresis(int low, int high) {
    //NOTE: this implementation reuses the data array to store both
    //luminance data from the image, and edge intensity from the processing.
    //This is done for memory efficiency, other implementations may wish
    //to separate these functions.
    Arrays.fill(data, 0);

    int offset = 0;
    for (int x = 0; x < width; x++) {
        for (int y = 0; y < height; y++) {
            if (data[offset] == 0 && magnitude[offset] >= high) {
                follow(x, y, offset, low);
            }
            offset++;
        }
    }
}

private void follow(int x1, int y1, int i1, int threshold) {
    int x0 = x1 == 0 ? x1 : x1 - 1;
    int x2 = x1 == width - 1 ? x1 : x1 + 1;
    int y0 = y1 == 0 ? y1 : y1 - 1;
    int y2 = y1 == height -1 ? y1 : y1 + 1;

    data[i1] = magnitude[i1];
    try {
        for (int x = x0; x <= x2; x++) {
            for (int y = y0; y <= y2; y++) {
                int i2 = x + y * width;
                if ((y != y1 || x != x1)
                    && data[i2] == 0 
                    && magnitude[i2] >= threshold) {
                    follow(x, y, i2, threshold);
                }
            }
        }
    } catch (StackOverflowError e) {
        e.printStackTrace();
    }
    return;
}

private void thresholdEdges() {
    for (int i = 0; i < picsize; i++) {
        data[i] = data[i] > 0 ? -1 : 0xff000000;
    }
}

private int luminance(float r, float g, float b) {
    return Math.round(0.299f * r + 0.587f * g + 0.114f * b);
}

private void readLuminance() {
    //int type = sourceImage.getType();
    //if (type == BufferedImage.TYPE_INT_RGB || type == BufferedImage.TYPE_INT_ARGB) {
    // We short-circuit this because we manually set the image as ARGB earlier
    if (true)
    {
        //int[] pixels = (int[]) sourceImage.getData().getDataElements(0, 0, width, height, null);
        int[] pixels = new int[picsize];
        sourceImage.getPixels(pixels, 0, width, 0, 0, width, height);
        for (int i = 0; i < picsize; i++) {
            int p = pixels[i];
            int r = (p & 0xff0000) >> 16;
            int g = (p & 0xff00) >> 8;
            int b = p & 0xff;
            data[i] = luminance(r, g, b);
        }
    }
    /*
    elseif (type == BufferedImage.TYPE_BYTE_GRAY) {
        //byte[] pixels = (byte[]) sourceImage.getData().getDataElements(0, 0, width, height, null);
        int[] pixels = new int[picsize];
        sourceImage.getPixels(pixels, 0, width, 0, 0, width, height);
        for (int i = 0; i < picsize; i++) {
            data[i] = (pixels[i] & 0xff);
        }
    }
    /*else if (type == BufferedImage.TYPE_USHORT_GRAY) {
        short[] pixels = (short[]) sourceImage.getData().getDataElements(0, 0, width, height, null);
        for (int i = 0; i < picsize; i++) {
            data[i] = (pixels[i] & 0xffff) / 256;
        }
    } else if (type == BufferedImage.TYPE_3BYTE_BGR) {
        byte[] pixels = (byte[]) sourceImage.getData().getDataElements(0, 0, width, height, null);
        int offset = 0;
        for (int i = 0; i < picsize; i++) {
            int b = pixels[offset++] & 0xff;
            int g = pixels[offset++] & 0xff;
            int r = pixels[offset++] & 0xff;
            data[i] = luminance(r, g, b);
        }
    } else {
        throw new IllegalArgumentException("Unsupported image type: " + type);
    }
    */
}

private void normalizeContrast() {
    int[] histogram = new int[256];
    for (int i = 0; i < data.length; i++) {
        histogram[data[i]]++;
    }
    int[] remap = new int[256];
    int sum = 0;
    int j = 0;
    for (int i = 0; i < histogram.length; i++) {
        sum += histogram[i];
        int target = sum*255/picsize;
        for (int k = j+1; k <=target; k++) {
            remap[k] = i;
        }
        j = target;
    }

    for (int i = 0; i < data.length; i++) {
        data[i] = remap[data[i]];
    }
}

private void writeEdges(int pixels[]) {
    //NOTE: There is currently no mechanism for obtaining the edge data
    //in any other format other than an INT_ARGB type BufferedImage.
    //This may be easily remedied by providing alternative accessors.
    if (edgesImage == null) {
        //edgesImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
        edgesImage = Bitmap.createBitmap(width, height, Config.ARGB_8888);
    }
    //edgesImage.getWritableTile(0, 0).setDataElements(0, 0, width, height, pixels);
    edgesImage.setPixels(pixels, 0, width, 0, 0, width, height);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:26:28.893

```
 // add this to chase the stack, crash is at ~150 on Nexus One
    private int mFollowStackDepth = 100; 

  private void follow(int x1, int y1, int i1, int threshold, int depth)
 {
        if( depth > mFollowStackDepth)  // don't run out of stack!
            return;
        int x0 = x1 == 0 ? x1 : x1 - 1;
        int x2 = x1 == width - 1 ? x1 : x1 + 1;
        int y0 = y1 == 0 ? y1 : y1 - 1;
        int y2 = y1 == height -1 ? y1 : y1 + 1;

        data[i1] = magnitude[i1];
        for (int x = x0; x <= x2; x++) {
            for (int y = y0; y <= y2; y++) {
                int i2 = x + y * width;
                if ((y != y1 || x != x1)
                    && data[i2] == 0 
                    && magnitude[i2] >= threshold) {
                    follow(x, y, i2, threshold, depth+1);
                    return;
                }
            }
        }
    } 
```

# javascript - 你如何在Javascript中缓存图像

> ID：10240110
> 
> 赞同：91
> 
> 时间：2012-04-20T04:07:06.527
> 
> 标签：javascript, jquery, image, caching, browser-cache

我和我的朋友正在开发一个网站，我们希望在该网站上缓存某些图像，以便将来更快地显示它们。我有两个主要问题：

1.  你如何缓存图像？
2.  缓存后如何使用图像？（并且只是为了验证，如果图像缓存在页面 A 上，则可以从缓存中调用它以在页面 B 上使用它，对吗？）

另外，是否可以设置图像的缓存版本*何时*到期？

如果包含一个示例和/或指向进一步描述这一点的页面的链接，将不胜感激。

我们可以使用原始 Javascript 或 jQuery 版本。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-04-20T04:30:42.350

一旦图像以任何方式加载到浏览器中，它将位于浏览器缓存中，并且在下次使用时加载速度会更快，无论该使用是在当前页面中还是在任何其他页面中，只要图像是在浏览器缓存过期之前使用。

因此，要预缓存图像，您只需将它们加载到浏览器中即可。如果您想预先缓存一堆图像，最好使用 javascript 来完成，因为从 javascript 完成时它通常不会阻止页面加载。你可以这样做：

```
function preloadImages(array) {
    if (!preloadImages.list) {
        preloadImages.list = [];
    }
    var list = preloadImages.list;
    for (var i = 0; i < array.length; i++) {
        var img = new Image();
        img.onload = function() {
            var index = list.indexOf(this);
            if (index !== -1) {
                // remove image from the array once it's loaded
                // for memory consumption reasons
                list.splice(index, 1);
            }
        }
        list.push(img);
        img.src = array[i];
    }
}

preloadImages(["url1.jpg", "url2.jpg", "url3.jpg"]); 
```

可以根据需要多次调用此函数，并且每次只会将更多图像添加到预缓存中。

一旦通过 javascript 像这样预加载图像，浏览器会将它们保存在其缓存中，您可以只引用其他地方（在您的网页中）的正常 URL，浏览器将从其缓存中获取该 URL，而不是通过网络。

最终，随着时间的推移，浏览器缓存可能会填满并丢弃一段时间未使用的最旧的东西。所以最终，图像会从缓存中清除，但它们应该会在那里停留一段时间（取决于缓存的大小以及其他浏览的次数）。每次实际再次预加载图像或在网页中使用图像时，它都会自动刷新它们在浏览器缓存中的位置，因此它们不太可能从缓存中清除。

浏览器缓存是跨页面的，因此它适用于加载到浏览器中的任何页面。因此，您可以在站点的一个位置进行预缓存，然后浏览器缓存将适用于您站点上的所有其他页面。

* * *

如上所述进行预缓存时，图像是异步加载的，因此它们不会阻塞页面的加载或显示。但是，如果您的页面有很多自己的图像，这些预缓存图像可能会与您页面中显示的图像竞争带宽或连接。通常，这不是一个明显的问题，但在连接速度较慢的情况下，这种预缓存可能会减慢主页的加载速度。如果最后加载预加载图像是可以的，那么您可以使用该函数的一个版本，该版本将等待开始预加载，直到所有其他页面资源都已加载。

```
function preloadImages(array, waitForOtherResources, timeout) {
    var loaded = false, list = preloadImages.list, imgs = array.slice(0), t = timeout || 15*1000, timer;
    if (!preloadImages.list) {
        preloadImages.list = [];
    }
    if (!waitForOtherResources || document.readyState === 'complete') {
        loadNow();
    } else {
        window.addEventListener("load", function() {
            clearTimeout(timer);
            loadNow();
        });
        // in case window.addEventListener doesn't get called (sometimes some resource gets stuck)
        // then preload the images anyway after some timeout time
        timer = setTimeout(loadNow, t);
    }

    function loadNow() {
        if (!loaded) {
            loaded = true;
            for (var i = 0; i < imgs.length; i++) {
                var img = new Image();
                img.onload = img.onerror = img.onabort = function() {
                    var index = list.indexOf(this);
                    if (index !== -1) {
                        // remove image from the array once it's loaded
                        // for memory consumption reasons
                        list.splice(index, 1);
                    }
                }
                list.push(img);
                img.src = imgs[i];
            }
        }
    }
}

preloadImages(["url1.jpg", "url2.jpg", "url3.jpg"], true);
preloadImages(["url99.jpg", "url98.jpg"], true); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-20T04:13:23.107

as @Pointy said you don't cache images with javascript, the browser does that. so this may be what you are asking for and may not be... but you can preload images using javascript. By putting all of the images you want to preload into an array and putting all of the images in that array into hidden img elements, you effectively preload (or cache) the images.

```
var images = [
'/path/to/image1.png',
'/path/to/image2.png'
];

$(images).each(function() {
var image = $('<img />').attr('src', this);
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-13T19:15:37.717

添加以确保答案的完整性：使用 HTML 预加载

```
<link rel="preload" href="bg-image-wide.png" as="image"> 
```

还存在其他预加载功能，但没有一个比以下更适合`<link rel="preload">`：

*   `<link rel="prefetch">`浏览器已经支持很长时间了，但它旨在预取将在下一次导航/页面加载中使用的资源（例如，当您转到下一页时）。这很好，但对当前页面没有用！此外，浏览器会赋予预取资源比预加载资源更低的优先级——当前页面比下一个页面更重要。有关更多详细信息，请参阅[链接预取常见问题解答](https://developer.mozilla.org/en-US/docs/Web/HTTP/Link_prefetching_FAQ)。
*   `<link rel="prerender">`在后台呈现指定的网页，如果用户导航到该网页，则可以加快其加载速度。由于可能会浪费用户带宽，Chrome 将 prerender 视为 NoState 预取。
*   `<link rel="subresource">` 不久前在 Chrome 中得到了支持，旨在解决与预加载相同的问题，但它有一个问题：无法确定项目的优先级（因为当时不存在），所以它们都以相当低的优先级获取。

市面上有许多基于脚本的资源加载器，但它们对浏览器的获取优先级队列没有任何控制权，并且会遇到几乎相同的性能问题。

*来源：[https ://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content](https://developer.mozilla.org/en-US/docs/Web/HTML/Preloading_content)*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-10-29T15:37:37.493

现在，谷歌提出了一种新[技术](https://web.dev/use-lazysizes-to-lazyload-images)来缓存和改进你的图像渲染过程：

1.  包含 JavaScript Lazysizes 文件：[lazysizes.js](https://web.dev/codelab-use-lazysizes-to-lazyload-images)
2.  将文件添加到要使用的 html 文件中： `<script src="lazysizes.min.js" async></script>`
3.  将*`lazyload`*类添加到您的图像中： `<img data-src="images/flower3.png" class="lazyload" alt="">`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-10T12:39:36.973

即使您的问题是“使用 javascript”，您也可以使用`prefetch`链接标签的属性来预加载任何资产。截至撰写本文时（2016 年 8 月 10 日），Safari 不支持它，但几乎在其他任何地方都支持它：

`<link rel="prefetch" href="(url)">`

有关支持的更多信息：http: [//caniuse.com/#search=prefetch](http://caniuse.com/#search=prefetch)

请注意，IE 9,10 未在`caniuse`矩阵中列出，因为 Microsoft 已停止对它们的支持。

因此，如果您真的坚持使用 javascript，您也可以使用 jquery 将这些元素动态添加到您的页面；-)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-20T04:13:51.967

There are a few things you can look at:

Pre-loading your images
Setting a cache time in an .htaccess file
File size of images and base64 encoding them.

Preloading: [http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/](http://perishablepress.com/3-ways-preload-images-css-javascript-ajax/)

Caching: [http://www.askapache.com/htaccess/speed-up-sites-with-htaccess-caching.html](http://www.askapache.com/htaccess/speed-up-sites-with-htaccess-caching.html)

There are a couple different thoughts for base64 encoding, some say that the http requests bog down bandwidth, while others say that the "perceived" loading is better. I'll leave this up in the air.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-20T04:18:26.863

对于通过 JS 异步预加载图像，我有[类似的答案](https://stackoverflow.com/a/9962592/575527)。动态加载它们与正常加载它们相同。他们会缓存。

至于缓存，您无法控制浏览器，但可以通过服务器进行设置。如果您需要按需加载一个真正新鲜的资源，您可以使用[缓存破坏技术](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/)来强制加载一个新资源。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-07T17:04:08.673

我使用类似的技术来延迟加载图像，但不禁注意到 Javascript 在首次加载时不会访问浏览器缓存。

我的例子：

我的主页上有一个带有 4 张图片的旋转横幅，滑块等待 2 秒，然后 javascript 加载下一张图片，等待 2 秒，等等。

这些图像具有唯一的 url，每当我修改它们时它们就会发生变化，因此它们会获得缓存标头，这些标头将在浏览器中缓存一年。

```
max-age: 31536000, public 
```

现在，当我打开 Chrome Devtools 并确保 de 'Disable cache' 选项未激活并首次加载页面（清除缓存后）时，所有图像都会获取并具有 200 状态。在横幅中所有图像的完整循环之后，网络请求停止并使用缓存的图像。

现在，当我定期刷新或转到子页面并单击返回时，缓存中的图像似乎被忽略了。我希望在 Chrome devtools 的网络选项卡中看到一条灰色消息“来自磁盘缓存”。相反，我看到请求每两秒通过一个绿色状态圆圈而不是灰色，我看到数据正在传输，所以我得到的印象是根本没有从 javascript 访问缓存。它只是在每次页面加载时获取图像。

因此，无论图像的缓存策略如何，对首页的每个请求都会触发 4 个请求。

综合考虑以上内容以及大多数网络服务器和浏览器现在支持的新 http2 标准，我认为最好停止使用延迟加载，因为 http2 将几乎同时加载所有图像。

如果这是 Chrome Devtools 中的一个错误，我真的很惊讶我还没有人注意到这一点。;)

如果这是真的，使用延迟加载只会增加带宽使用。

如果我错了，请纠正我。:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-20T04:15:49.577

Yes, the browser caches images for you, automatically.

You can, however, set an image cache to expire. Check out this Stack Overflow questions and answer:

[Cache Expiration On Static Images](https://stackoverflow.com/questions/2097677/cache-expiration-on-static-images)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-28T07:56:17.433

我总是更喜欢使用[Konva JS: Image Events](https://konvajs.github.io/docs/events/Image_Events.html)中提到的示例来加载图像。

1.  您需要将图像 URL 列表作为对象或数组，例如：

    `var sources = { lion: '/assets/lion.png', monkey: '/assets/monkey.png' };`

2.  定义 Function 定义，它在其中接收图像 URL 列表和其参数列表中的回调函数，因此当它完成加载图像时，您可以在您的网页上开始执行：

```
 function loadImages(sources, callback) {
                var images = {};
                var loadedImages = 0;
                var numImages = 0;
                for (var src in sources) {
                    numImages++;
                }
                for (var src in sources) {
                    images[src] = new Image();
                    images[src].onload = function () {
                        if (++loadedImages >= numImages) {
                            callback(images);
                        }
                    };
                    images[src].src = sources[src];
                }
            }
```

3.  最后，您需要调用该函数。`jQuery`例如， 您可以从***Document Ready***中调用它

 *`$(document).ready(function (){ loadImages(sources, buildStage); });`*

# c++ - 它无法从它的对应迭代器中定义一个 const_iterator

> ID：10240117
> 
> 赞同：0
> 
> 时间：2012-04-20T04:07:40.567
> 
> 标签：c++, const-iterator

我正在使用自定义容器扩展 stl 容器，以便对元素的操作提供更灵活的控制

```
class MyContainer;

template <typename T> class myiterator :public iterator<bidirectional_iterator_tag, T>
{
  friend class MyContainer;
  private:
    T *pointer;

    myiterator(T *pt):pointer(pt) {}

  public:
    T& operator*() {return (*pointer);}

    const myiterator<T>& operator++()
    {
      pointer->current_iterator++;
       return *this;
    }

    bool isEnd(void) const
    {
      return pointer->current_iterator == pointer->data.end();
    }
  };

class MyContainer
{
  friend class myiterator<MyContainer>;
  public:
    typedef myiterator<MyContainer> iterator;
    typedef myiterator<MyContainer const> const_iterator;

  private:
    map<int, int> data;
    map<int, int>::const_iterator current_iterator;

  public:
    MyContainer() {current_iterator = data.begin(); }

    void addDataPair(int key, int value) {data[key] = value;}

    int first() const {return (*current_iterator).first;}
    int second() const {return (*current_iterator).second;}

    iterator begin() 
    {
      current_iterator = data.begin();
      return iterator(this);
    }

    const_iterator begin() const
    {
      return const_iterator(this);
    }
  }; 
```

这段代码运行正常，如果我使用迭代器如下

```
MyContainer h;

h.addDataPair(1, 1);
h.addDataPair(2, 2);
h.addDataPair(3, 3);

for (MyContainer::iterator it=h.begin(); !it.isEnd(); ++it)
{
  cout << (*it).first() << " " << (*it).second() << endl;
} 
```

但是如果我将迭代器更改为 const_iterator，它将无法编译。我读了一些文章，其中提到要定义常量迭代器，我们只需将 value_type 从 X 替换为 X const，这就是我在代码中所做的。但是我很快发现它在我的情况下可能不起作用，因为迭代器返回的引用在我的情况下是容器本身。我不知道如何在不重复编码的情况下使 const_iterator 工作。

此外，我的迭代器派生自 std::iterator 但我发现我无法覆盖我的迭代器的构造函数。除了 T *pt 之外，我可以通过任何方式将多个参数传递给我的迭代器吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:35:33.387

第一个问题：

如果你改变这个：

```
for (MyContainer::iterator it=h.begin(); !it.isEnd(); ++it) 
```

至

```
for (MyContainer::const_iterator it=h.begin(); !it.isEnd(); ++it) 
```

然后你`iterator`从`begin()`and得到一个非常量`end()`并尝试从中初始化 a `const_iterator`，但这是一个不同的类型，你的`my_iterator`模板没有允许从不同类型构造的构造函数。

您可以通过添加以下内容来解决此问题：

```
template<typename> friend class myiterator;

template<typename T2>
  myiterator(myiterator<T2> const& i) : pointer(i.pointer) { } 
```

您还应该制作`operator*`const （它不会更改迭代器以取消引用它。）

但是还有一个更大的问题， a`const_iterator`指向 a `const MyContainer`，但是`const_iterator::operator++`需要改变那个对象，它不能因为它是 const 。所以你不能增加你的`const_iterator`ie 不能用它来迭代！您可能需要重新考虑该设计。

# python - 在函数中引用 Python 控制台变量

> ID：10240121
> 
> 赞同：1
> 
> 时间：2012-04-20T04:07:57.587
> 
> 标签：python, variables, console, scope

我不确定 Python 的范围规则。如果我使用 Python 控制台并定义一个变量，然后导入一个模块并在该模块中调用一个函数，有没有办法在函数中引用该变量？例如：

```
>> option = 2
>> import choosingModule
>> choosingModule.choosingFunction() 
```

然后在选择模块：

```
def choosingFunction():
    if option == 0:
        doThis()
    elif option == 1:
        doThat()
    elif option == 2:
        doTheOtherOne()
    else:
        doWhateverYouFeelLike() 
```

显然这是一个简单的例子。我想这样做的原因是我有四个不同版本的函数，我希望能够从控制台中选择应该使用哪一个。该函数在代码中被调用得相当深入，所以我不想在每个函数调用中都传递一个参数，特别是因为我只需要在测试阶段比较它们；当它达到生产版本时，将只使用其中一个。

那么，有没有办法在被调用函数中引用 Python 控制台变量？还是有其他方法可以做我需要的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:12:25.410

当您运行 REPL 时，您就是`__main__`模块，因此您可以导入它并使用其中的变量：

```
def choosingFunction():
    option = __import__('__main__').option
    if option == 0:
        doThis()
    elif option == 1:
        doThat()
    elif option == 2:
        doTheOtherOne()
    else:
        doWhateverYouFeelLike() 
```

但是，如果您绝对*不需要*在控制台中定义变量，那么更好的方法是将其设置为`choosingModule`. 然后：

```
def choosingFunction():
    global option
    if option == 0:
        doThis()
    elif option == 1:
        doThat()
    elif option == 2:
        doTheOtherOne()
    else:
        doWhateverYouFeelLike() 
```

```
>>> import choosingModule
>>> choosingModule.option = 2
>>> choosingModule.choosingFunction() 
```

但是，您应该只在测试时使用其中之一。**请不要在生产代码中使用这些。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:01:11.057

我建议您将该变量保留在全局范围内并使用*global*语句访问它。

关键字*global*允许您在全局命名空间中引用一个变量，尽管函数调用者上存在另一个同名变量。

例如：这将打印“tangerine”

```
def foo():
    def bar():
        return fruit
    fruit = "tangerine"
    return bar2()

fruit = "banana"
print(foo()) # will print "tangerine" 
```

但这将打印“香蕉”。

```
def foo2():
    def bar2():
        global fruit # fetch me the fruit in the global scope
        return fruit
    fruit = "tangerine"
    return bar2()

fruit = "banana"
print(foo2()) # will print "banana" 
```

如果没有 global 关键字，解释器将遵循“LEGB 规则”来查找您尝试引用的变量：

1.  **本地**范围：首先，它将在本地范围内搜索变量，即执行函数语句的范围。每次调用函数时都会创建局部范围。
2.  **封闭**范围：其次，解释器将在“封闭函数局部变量”中查找变量，即插入（声明）函数的函数。这就是在*bar()内的**return fruit*语句中找到*fruit*变量的地方。
***   **全局**：如果在上面的命名空间中找不到变量，python 将尝试在全局变量中找到它。*global*语句的使用迫使 python 只在全局范围内查找它，因此跳过了 1 和 2。*   **B** uiltins：最后，python 会尝试在内置函数和常量中查找变量。这里没有魔法。**

 **如果上述所有搜索都找不到变量名，python 将引发*NameError*异常：

```
$ NameError: name 'fruit' is not defined 
```

然后你可以这样做：

```
def choosingFunction():
    global option
    if option == 0:
        doThis()
    elif option == 1:
        doThat()
    elif option == 2:
        doTheOtherOne()
    else:
        doWhateverYouFeelLike()

>> option = 2
>> import choosingModule
>> choosingModule.choosingFunction() 
```

请记住，依赖调用你的模块中存在的全局变量被认为是一种非常糟糕的做法，并且不能用于任何严重的事情。;)

有关*global*语句的更多信息，请查看文档：[Python 3.x](http://docs.python.org/py3k/reference/simple_stmts.html#the-global-statement)和[Python 2.7](http://docs.python.org/reference/simple_stmts.html#the-global-statement)。有关范围和命名空间规则的信息，请查看[此处](http://docs.python.org/py3k/reference/executionmodel.html#naming-and-binding)（Python 3.x）或[此处](http://docs.python.org/reference/executionmodel.html)（Python 2.7）。**

# database - Oracle 硬解析

> ID：10240122
> 
> 赞同：1
> 
> 时间：2012-04-20T04:08:01.830
> 
> 标签：database, oracle, plsql

我们有一个preparedStatement，它需要对数据库执行多项操作，所以所有这些sql 语句都包含在一个BEGIN-END 块中，例如

```
BEGIN
 DELETE FROM...WHERE A=?..
 UPDATE TABLE...WHERE B=?..
END; 
```

但许多评论者表示，这将导致难以解析。根据我的理解，硬解析是当在共享池中找不到 sql 时，语法、执行计划 .. 一切都需要重新计算，但这里不应该 Oracle 将它们视为单独的 sql 语句。如何确定 oracle 是否会对给定的 sql 语句进行硬解析？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T05:27:38.437

绑定变量在 PL/SQL 块中的工作方式与它们在 SQL 语句中的工作方式一样。

您可以通过在循环中运行简单语句来测试这一点，然后查看`v$sesstat`.

创建一个用于插入和删除的简单表。获取初始解析计数。

```
create table test1(a number);

--Flush the pool, or else this test won't be repeatable.
alter system flush shared_pool;

select value, name
from v$sesstat natural join v$statname
where sid = sys_context('userenv', 'sid')
    and name in ('parse count (total)', 'parse count (hard)');

47  parse count (total)
5   parse count (hard) 
```

这就是硬解析的样子：

```
begin
    for i in 1 .. 10000 loop
        execute immediate 'insert into test1 values('||i||')';
    end loop;
    commit;
end;
/

select value, name
from v$sesstat natural join v$statname
where sid = sys_context('userenv', 'sid')
    and name in ('parse count (total)', 'parse count (hard)');

10072   parse count (total)
10007   parse count (hard) 
```

带有绑定变量的 PL/SQL 块并不总是硬解析。请注意，解析计数是累积的，在这里它们只会略微增加。

```
begin
    for i in 1 .. 10000 loop
        execute immediate 
        'begin
            delete from test1 where a = :i;
        end;'
        using i;
    end loop;
    commit;
end;
/

select value, name
from v$sesstat natural join v$statname
where sid = sys_context('userenv', 'sid')
    and name in ('parse count (total)', 'parse count (hard)');

10106   parse count (total)
10019   parse count (hard) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T05:01:53.677

跟踪您的会话执行代码。运行 tkprof 并检查解析数。

您使用绑定变量还是使用文字？

建议使用绑定变量，因为当您使用 - 更改 - 文字时，这是导致解析发生的因素之一。更改文字确实会降低您的性能，请使用绑定。

这是一个很好的视频，解释并展示了会发生什么：[OLTP Performance - The Trouble with Parsing](http://www.youtube.com/watch?v=1oddFEyUAjs)

# github - 在 github.com 上使用 README.md

> ID：10240125
> 
> 赞同：107
> 
> 时间：2012-04-20T04:08:15.353
> 
> 标签：github, markdown, markup

我对 github 在更新 README 文件时使用的轻量级标记语言不太熟悉。

我可以在哪里阅读有关如何为我的开源库的 README/wiki 文件编写适当的标记语法的资源？

在将更新的 README 推送到我的 github 存储库之前，是否有一个工具可以“在我的浏览器中本地查看我的文档”？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-04-20T04:10:30.237

有问题的标记巧合地称为**Markdown**，由[Daring Fireball 博客](http://daringfireball.net/)的作者 John Gruber 创建。Markdown 的原始来源可以在[Daring Fireball - Markdown](http://daringfireball.net/projects/markdown/)找到。

有许多 Markdown 方言，Github 的文档可以在[Github Flavored Markdown](http://github.github.com/github-flavored-markdown/)页面上找到。

该页面的好提示：

在任何带有 Markdown 编辑器的 Github 页面上按**M以显示备忘单。**

您还可以使用[Github Markdown 实时预览](http://tmpvar.com/markdown.html)页面来测试您的 Markdown 文档。

**2012-11-08 更新**：正在努力标准化 Markdown 语法。请参阅[Markdown 的未来 - Jeff Atwood、Coding Horror](http://www.codinghorror.com/blog/2012/10/the-future-of-markdown.html)和[W3C Markdown 社区组](http://www.w3.org/community/markdown/)。

**2014-09-09 更新**： [CommonMark](http://commonmark.org/)已发布降价标准和规范。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-21T04:04:15.383

（[重新发布此答案](https://stackoverflow.com/questions/7694887/is-there-a-command-line-utility-for-rendering-github-flavored-markdown/13781363)并进行一些编辑。）

游戏有点晚了，但我用 Python 写了一个小 CLI。它被称为[Grip（Github 自述文件即时预览）](https://github.com/joeyespo/grip)。再加上帕特里克的回答，这将让您“在我的浏览器中本地查看我的文档”。

安装它：

```
$ pip install grip 
```

要使用它，只需：

```
$ grip 
```

然后访问`localhost:5000`以查看该`readme.md`位置的文件。

您还可以指定自己的文件：

```
$ grip CHANGES.md 
```

并更改端口：

```
$ grip 8080 
```

或者结合前两个：

```
$ grip CHANGES.md 8080 
```

您甚至可以渲染 GitHub 风格的 Markdown（即如何渲染评论和问题），可选择使用 repo 上下文来自动超链接对其他问题的引用：

```
$ grip --gfm --context=username/repo issue.md 
```

为简洁起见，请使用 CLI 帮助查看其余选项及其详细信息：

```
$ grip -h 
```

显着特点：

*   将页面呈现为与 GitHub 上完全相同的外观
*   围栏块
*   Python API
*   在链接文件之间导航
*   将呈现的文档导出到文件

希望这可以帮助。[检查出来](https://github.com/joeyespo/grip)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-21T00:23:28.500

这里有一个不错的在线/实时编辑器：

[http://jbt.github.io/markdown-editor/](http://jbt.github.io/markdown-editor/)

GitHub 上还有一个`Preview`按钮。

在下面的屏幕截图中可以看到，当我单击 Edit on 时会出现此按钮`README.md`。

![在此处输入图像描述](../Images/1dc60ce03e831f8aede733ce583b9cf9.png)

恕我直言，实时[编辑器](http://jbt.github.io/markdown-editor/)比 GitHub 上的当前编辑器更好。

**更新**

刚才我在搜索`Markdown`和 Visual Studio 后发现，如果你使用 VS，你可以安装[Web Essentials](http://vswebessentials.com/)并`Markdown`直接从 Visual Studio 中获得支持。这很酷！

它有：

*   语法高亮 => Markdown 语法的完全着色
*   嵌入式语言智能感知 ( ***W00T*** ) => GitHub 的嵌入式语言功能完全支持 ``` 语言语法。

![在此处输入图像描述](../Images/8571143a33787dcbc44564f922e2e71d.png)

*   预览窗口 => 查看渲染 HTML 的并排预览窗口
*   编译为 HTML => 右键单击​​任何 Markdown 文件并选择将 Markdown 编译为 HTML。这将生成一个嵌套在 Markdown 文件下的 .html 文件，并且随着 Markdown 文件的更改，它将保持同步。
*   自定义样式表 => 您可以添加解决方案特定的样式表来控制预览窗口的样式。

关于它的详细信息在[这里](http://vswebessentials.com/features/markdown)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-15T10:56:55.460

请注意，自 2014 年 2 月以来，使用“ [Rendered Prose Diffs](https://github.com/blog/1784-rendered-prose-diffs) ”，您还可以在降价文件上看到 diff 的渲染版本：

> 包括散文文件在内的提交和拉取请求现在具有源**和渲染视图**。

![https://f.cloud.github.com/assets/17715/1999080/7f0c15a2-853e-11e3-95dc-1d7737e1ec20.png](../Images/1daf9c5dcf1bb3ee0beecf75c01c9178.png)

> 非文本更改以低调的虚线下划线显示。将鼠标悬停在文本上以查看发生了什么变化：

![https://f.cloud.github.com/assets/17715/2005588/714cb5ea-86ef-11e3-9e92-a0d11ba6084f.png](../Images/df8e3ecbdab40bab4fdb7fbfae2d6598.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-28T10:32:32.170

另一种选择 - Github 的新文本编辑器 Atom 将在您编辑时呈现 github 风格的降价。见[https://atom.io/](https://atom.io/)

我不确定它是否会长期免费（如啤酒）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-07T11:23:09.763

从今天开始，您可以在编辑文件时进行预览。

[![在此处输入图像描述](../Images/29cf01937f981d614d444ed09f540124.png)](https://i.stack.imgur.com/MP9yQ.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-18T00:58:49.063

我没有发现其他工具足够好 - 我想要：

1.  能够离线编辑
2.  不仅仅是普通的降价，而是真正的*Github 风格的降价*

这就是我最终决定的：[https ://github.com/ypocat/gfms](https://github.com/ypocat/gfms)

```
> gfms

Github Flavored Markdown Server.
Run in your project's root directory.
Usage: gfms

Options:
  -p, --port              Port number to listen at.        [required]
  -h, --host              Host address to bind to.         [default: "localhost"]
  --proxy                 if behind a proxy, proxy url.
  -a, --api               Render using Github API.
  -n, --no-api-on-reload  Disable usage of Github API when the doc is manually reloaded. 
```

所以我别名：

```
alias gm='gfms -a -p 8070' 
```

使用该`-p`选项会触发 Github API 并使用实际的当前 Github CSS，因此不会有任何意外。

# c# - 使用 C# 在 Excel 中进行条件格式设置

> ID：10240132
> 
> 赞同：8
> 
> 时间：2012-04-20T04:08:55.550
> 
> 标签：c#, excel, vsto

如果值与另一列中的值不同，我需要将颜色应用于单元格的文本。最好的方法是什么？我能想到的方式是相当昂贵的。

```
 for (int i = 0; i < ColumnARange.Cells.Count; i++)
                    {
                        if (ColumnARange.Cells[i, 1] != ColumnBRange.Cells[i, 1])
                        {
                            Range currCell = ColumnBRange.Cells[i, 1];
                            currCell.Font.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red);
                        }
                    } 
```

尝试如下条件格式，但徒劳无功。

```
FormatCondition cond = ColumnBRange.FormatConditions.Add(XlFormatConditionType.xlCellValue, XlFormatConditionOperator.xlNotEqual, ColumnARange);
                cond.Font.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red); 
```

我正在使用 VSTO，C#

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T07:17:41.943

下面的代码，将条件格式添加到 D1 到 E10 的单元格范围

它分别比较值 D1 = E1 或 D2 = E2。您可以在 FormatCondition 对象上设置字体颜色或颜色填充。

```
FormatCondition format =(FormatCondition)( targetSheet.get_Range("D1:E10",
                Type.Missing).FormatConditions.Add(XlFormatConditionType.xlExpression,
                                                   XlFormatConditionOperator.xlEqual,
                                                   "=$D1=$E1", 
                                                   Type.Missing, Type.Missing, Type.Missing,
                                                   Type.Missing, Type.Missing));

            format.Font.Bold = true;
            format.Font.Color = 0x000000FF; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-06T22:56:43.007

假设`B1:B10`如果单元格的值不等于 的值，您想为单元格着色`A1:A10`，即

`B1<>A1`导致`B1`被着色，`B2<>A2`导致`B2`被着色等。

然后您可以执行以下操作

```
Range columnBRange = (Range)oSheet.Range[oSheet.Cells[1,2], oSheet.Cells[10,2]];

Range columnARange = (Range)oSheet.Range[oSheet.Cells[1,1], oSheet.Cells[1,1]];

FormatCondition cond = (FormatCondition) ColumnBRange.FormatConditions.Add(XlFormatConditionType.xlCellValue, XlFormatConditionOperator.xlNotEqual, "="+ColumnARange.Address[false,true]);
cond.Font.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red); //Red letters
cond.Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.LightYellow); //Light yellow cell background 
```

请注意，添加`"="`到`ColumnARange.Address[false,true]`是必需的，否则该`Add`方法将使用`Address`作为文字字符串而不是单元格引用。

如果您查看应用于`B1:B10`Excel 工作表中单元格的条件格式规则，它将说明`Cell Value <> B1`范围内的每个单元格，这有点令人困惑 IMO，但格式仍然正确应用。

为了完整性：我在`Range.Address`属性上使用可选对象，如下所示 `Range.Address[isRowAbsolute,isColumnAbsolute]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-08T12:27:14.693

尝试这个

```
FormatCondition cond = ColumnBRange.FormatConditions.Add(XlFormatConditionType.xlCellValue, XlFormatConditionOperator.xlNotEqual, "=$B1");
                cond.Font.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.Red); 
```

# qt - 如何安装 QMYSQL 插件

> ID：10240135
> 
> 赞同：-1
> 
> 时间：2012-04-20T04:09:05.223
> 
> 标签：qt, qtsql

如问题所述，如何安装 QMYSQL 插件？我正在使用 Ubuntu 11.10、QtSDK 4.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:35:30.143

[文档](http://doc-snapshot.qt-project.org/4.8/sql-driver.html#qmysql)告诉您如何构建和安装它。

# amazon-ec2 - 所有 EC2 区域是否有任何类型的“默认”AMI ID？

> ID：10240137
> 
> 赞同：3
> 
> 时间：2012-04-20T04:09:29.487
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ami, ec2-ami

该`ec2-run-instances`命令需要一个 AMI ID，并且该 ID 在所有区域中都不同。有什么方法可以指定我需要一个适用于区域 x / 区域 y 和 instance_type z 的 AMI？

换句话说，我需要一种方法来使用一些“默认”AMI，以便我可以编写一个适用于所有 EC2 区域的脚本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:51:13.640

没有什么类似于[Amazon EC2](http://aws.amazon.com/ec2/)的默认 AMI ，也没有在每个区域具有不同 ID 的其他相同 AMI 中选择默认（或者更确切地说是特定于区域）AMI 的概念（尽管区域独立的 AMI ID 将是一个很好的改进） .

这通常通过向您的脚本添加相应的映射来解决，因此取决于使用的脚本环境（一个简单的映射应该始终以某种方式可用） - 例如[AWS](http://aws.amazon.com/cloudformation/) CloudFormation本身使用完全相同的方法，请参阅示例[EC2ChooseAMI.template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/EC2ChooseAMI.template)，其中是*使用映射根据区域和实例类型选择 AMI 的示例*。

AWSRegionArch2AMI地图*可以满足*您的需求，并且还提供了架构选择（这暗示了为什么默认 AMI ID 不能像一见钟情那样容易实施）。

# python - 循环遍历python中的表列表

> ID：10240138
> 
> 赞同：0
> 
> 时间：2012-04-20T04:09:33.577
> 
> 标签：python, for-loop

我有一个表列表，其中包含一些数据和一个在数据集上运行的 fitter 脚本。fitter 生成一个拟合，然后输出一些拟合参数。我想自动化这个过程——运行一个 for 循环，循环遍历表中的部分元素并输出它们的拟合参数。我可以使用以下代码在每个元素上运行 fitter：

`import tables`

`from function.fitter import Fitter`

`hdf2 = tables.openFile('data.waveforms.hdf5')`

`for element in data.waveforms:`

`fitter = Fitter(element)`

元素以这种方式命名：data0101、data0102、（用于集合一）...、data0201、data0202（集合编号 2）等。

例如，如何仅循环遍历集合编号 1 的十个元素：data0101、data0102、... data0110？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:17:04.747

Either slice it (`for ... in data.waveforms[:10]`) or use [`itertools.islice()`](http://docs.python.org/library/itertools.html#itertools.islice).

# c# - 如何创建可执行文件以更新已安装应用程序中的 DLL

> ID：10240145
> 
> 赞同：0
> 
> 时间：2012-04-20T04:10:49.107
> 
> 标签：c#, dll, installation

我正在考虑使应用程序更加模块化并访问 dll，以便在客户想要不同的功能时可以更改它们。

我知道如何创建 dll 并引用它们，但我正在尝试找到一种方法来创建一个可执行文件，该可执行文件会将不同版本的 dll 安装到所需的应用程序文件夹中。我想避免将新的 dll 放入原始项目并构建一个新的安装文件，并且我想让最终用户的事情变得简单。

目前我正在使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:39:34.347

您可以为每个 dll 创建 MSI 文件并使用标准安装程序过程来更新 dll。也可以编写一个下载和提取的 exe，它具有任意数量的逻辑（许可、​​不时下载位置......）。

两者的结合似乎是一件有趣的事情。一个引导程序下载 msi 文件并静默安装它们。您可以在安装程序中拥有高级功能，同时可以自由决定自己安装什么以及何时安装。

技术方面突然出现在我的脑海中：使用中的文件可能不会更改，如果您更改界面，则未更改的主程序将无法使用新库。

看来您正在寻找插件架构，您可能想查看 MEF 或 Unity 来执行组合，但这更多是附带说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:55:09.153

这个很棒的网站上几乎没有可用的[SO 线程。](https://stackoverflow.com/search?q=how%20to%20create%20patch%20files%20.net)您应该探索它们并尝试以最佳方式实施您遇到的任何情况。

检查这些参考链接：

来自：[创建补丁以升级 .NET 应用程序](https://stackoverflow.com/questions/4146029/creating-a-patch-to-upgrade-net-application)

> 如果您已经使用 VS 安装项目，您可以部署此项目的新版本，它将升级现有安装。查看设置和升级 ID。服务的停止和启动可以通过可以在项目中定义的自定义操作来完成，并将在您的设置提交或回滚等时执行。

[DotNet 中的补丁开发](https://stackoverflow.com/questions/4767049/patch-development-in-dotnet)
[如何制作可补丁/可更新的应用程序？](https://stackoverflow.com/questions/3207792/how-to-make-patch-able-update-able-application)
[使用 .net windows 应用程序创建补丁文件](https://stackoverflow.com/questions/5153324/create-patch-file-using-net-windows-application)

注意：请参阅此单击[如何为现有安装程序构建补丁](https://stackoverflow.com/questions/5910912/how-to-build-a-patch-for-existing-installer)

# jquery - jquery点击内容幻灯片图片更改

> ID：10240146
> 
> 赞同：1
> 
> 时间：2012-04-20T04:11:08.160
> 
> 标签：jquery

```
$(".item_1").click(function(){  
  var i =1;
  if (i<=3){
    $("#slideshowWindow").wrapInner('<div class="slides" />');
    $('<img src="Content_Slide1/'+i+'.png" height="100%" width="100%"/>').appendTo($(".slides"));
    i++
} 
```

谁能告诉我我的代码有什么问题？我想要的是我的 html 如下：

```
<div id="slideshowWindow"> 
  <img id="Slide_image1" src="Content_Slide1/1.png" height="100%" width="100%" />
</div>
<div class="slide">
  <img id="Slide_image2" src="Content_Slide1/2.png" height="100%" width="100%"/> 
</div>
<div class="slide">
  <img id="Slide_image3" src="Content_Slide1/3.png" height="100%" width="100%"/> 
</div> 
```

如果我把html代码和下面一样，幻灯片就可以了！！然后，我删除了所有 div 幻灯片类。使用我上面使用的 Jquery 代码，尝试通过点击项更改幻灯片图像组。

你知道我做错了什么吗？？

```
<div class="Main" style="background-image:url(images/bg.jpg)">
  <div class="slide"><img></div>
  <div class="slide"><img></div>
  <div class="slide"><img></div>
</div><!--/slideshowWindow--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:26:11.150

```
$(".item_1").click(function(){  
  var i;
  for (i = 1; i <= 3; i += 1) {
    $("#slideshowWindow").wrapInner('<div class="slides" />');
    $('<img src="Content_Slide1/' + i + '.png" height="100%" width="100%"/>')
      .append($(".slides"));
  }
}); 
```

这可能是你的目标。（未测试）

**编辑**

我已经对我认为你在编辑后想要的东西做了一个[jsfiddle 。](http://jsfiddle.net/pKVnx/)我在 jQuery 中使用了[appendTo方法。](http://api.jquery.com/appendTo/)

**编辑 2**

我已经更新了[jsfiddle](http://jsfiddle.net/pKVnx/2/)，因此 html 输出将与您的输出 html 匹配。

```
<div class="Main"> 
  <div class="slide"><img src="//lorempixel.com/400/400/abstract/1/" height="100%" width="100%"></div>
  <div class="slide"><img src="//lorempixel.com/400/400/abstract/2/" height="100%" width="100%"></div>
  <div class="slide"><img src="//lorempixel.com/400/400/abstract/3/" height="100%" width="100%"></div>
</div> 
```

**注意：**我刚刚在要附加的 html 中添加了一些文本。

**请阅读您正在使用的工具：[jQuery](http://docs.jquery.com/Main_Page)、[js](https://developer.mozilla.org/en/JavaScript/Guide)**

# ios - ios webview 崩溃

> ID：10240151
> 
> 赞同：0
> 
> 时间：2012-04-20T04:11:27.193
> 
> 标签：ios, webview, mobile-application, iphone-web-app

嗨，我是一名网络开发人员，最近在开发一个混合应用程序。我的网页基于zepto.js和iscroll，当用户“拉起加载更多”页面发送ajax请求以获取更多项目时，服务器将返回包html，网页只是

```
$('#list').append(html) 
```

问题是当我加载大约 60-100 条记录时，应用程序将崩溃并退出。

ios 开发者告诉我每个应用程序都有 RAM 限制，可能是网页占用了太多 RAM....

我找不到问题，有人给出一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:02:37.150

如果您没有任何内存泄漏，实际上总记录太多，

在崩溃之前你会得到`didReceiveMemoryWarning`

所以把这段代码放在你的视图控制器中检查是否是原因

```
 - (void)didReceiveMemoryWarning {
     NSLog(@"too much for my memory!!");

} 
```

如果是这个原因，尝试加载较少的记录并批量加载它们？

;)

# ios - 在 iOS 上，有没有办法每秒刷新超过 60 帧？

> ID：10240152
> 
> 赞同：0
> 
> 时间：2012-04-20T04:11:27.600
> 
> 标签：ios, animation, core-animation

如果动画图像，比如一个金属球，它大约是 20 像素宽，速度大约是每秒 200 像素，那么如果刷新率为每秒 60 帧，那么球将每秒移动大约 3 像素，这是球宽度的 1/6 (16%)。（如果是愤怒的小鸟，蓝鸟的大小差不多是20个像素，而且移动起来流畅很多，不像每次3个像素）。

似乎这样，球以一些锯齿状运​​动移动。怎样才能使它顺利移动？这是否需要每秒超过 60 帧的刷新率？如果需要，如何实现？（`CADisplayLink`用作计时器，所以现在是每秒 60 帧。 `NSTimer`可以使其刷新更快，除非`NSTimer`可能会延迟并且不会告诉从上次刷新经过的时间。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:48:42.797

我正在尝试做像你这样的事情，但仍然会得到同样令人不快的“闪烁”。这是我的代码[http://paste.ideaslabs.com/show/1FZoo6AQtu](http://paste.ideaslabs.com/show/1FZoo6AQtu)

我正在阅读一些 OpenGL 文档，GLKViewController 的属性 preferredFramesPerSecond 看起来很有希望。可能对 OGL/GLK 有更多经验的人可以帮助我们。

# android - 以编程方式在 Fragment 内使用 ImageButton 膨胀布局

> ID：10240153
> 
> 赞同：7
> 
> 时间：2012-04-20T04:11:34.760
> 
> 标签：android, android-fragments, android-tabhost

我是 android 开发的新手，我目前正在使用 tabhost 和 TabActivity 创建一个应用程序来在不同的活动之间切换。这个应用程序运行良好，但我最近发现 TabActivity 已被弃用，我应该改用片段。

所以，我按照这个很棒的教程解释了如何做到这一点： http: [//thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

大部分都可以正常工作，但我的问题是，我的一些旧活动现在是片段，正在使用这种方法膨胀 ImageButton：

```
private void displayLevelButtons() {
     LayoutInflater lf = getLayoutInflater();            
        btns = lf.inflate(R.layout.mallmapactivity_level_buttons, null, false);

        mBtnLevelDown = (ImageButton) btns.findViewById(R.id.btn_level_down);
        mBtnLevelUp = (ImageButton) btns.findViewById(R.id.btn_level_up);

        mBtnLevelDown.setOnClickListener(new OnClickListener() {
          @Override
           public void onClick(View view) {                  
              levelDown();
              updateLevelButtons();
           }
       });
       mBtnLevelUp.setOnClickListener(new OnClickListener() {
           @Override
           public void onClick(View view) {
              levelUp();
              updateLevelButtons();
           }
       });

       LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
       params.gravity = Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL | Gravity.RIGHT;            
       addContentView(btns,params);

    } 
```

为了能够在片段中编译这个方法，我改变了：

```
LayoutInflater lf = getLayoutInflater(); 
```

到

```
LayoutInflater lf = getActivity().getLayoutInflater(); 
```

和

```
addContentView(btns,params); 
```

到

```
getActivity().addContentView(btns,params); 
```

但是像这样使用我的方法 displayLevelButtons() 使**我的按钮出现在我的一般视图的右下角，而不是在我的片段的右下角**。

我还尝试在使用图像按钮膨胀我的布局时指定一个根，我的所有片段类看起来像这样：

```
public class MyFragment extends Fragment {

    private View btns;        
    private ImageButton mBtnLevelUp;
    private ImageButton mBtnLevelDown; 
    private ViewGroup myViewGroup;

@Override
    public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }
        myViewGroup = container;
        v = inflater.inflate(R.layout.mallmaptile, container, false);           
        return v;
    }

 @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        //Do some stuff and then :
            displayLevelButtons();        

    }

 private void displayLevelButtons() {
         LayoutInflater lf = getActivity().getLayoutInflater();          
         btns = lf.inflate(R.layout.mallmapactivity_level_buttons, myViewGroup, false);

         mBtnLevelDown = (ImageButton) btns.findViewById(R.id.btn_level_down);
         mBtnLevelUp = (ImageButton) btns.findViewById(R.id.btn_level_up);

         mBtnLevelDown.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {                     
              levelDown();
              updateLevelButtons();
            }
        });
        mBtnLevelUp.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
              levelUp();
              updateLevelButtons();
            }
        });

        LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        params.gravity = Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL | Gravity.RIGHT;            
        getActivity().addContentView(btns,params);

    } 
```

这样做我的按钮仍然显示在我的一般视图的底部而不是我的片段的底部，如果我尝试将 attachToRoot 布尔值更改为 true ：

```
btns = lf.inflate(R.layout.mallmapactivity_level_buttons, myViewGroup, true); 
```

我得到错误：java.lang.IllegalStateException：指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

我敢肯定，我错过了一些重要的事情，但我没有。任何建议将不胜感激。

提前致谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T04:23:20.007

如果您在膨胀布局中遇到问题，那么您可以使用以下代码：

```
View headerView = View.inflate(this, R.layout.layout_name, null); 
```

这将为您提供完整的父布局，然后您可以使用该布局来获取您想要的任何视图，或者您可以获得布局参数，然后将布局参数设置为任何视图（我认为在您的情况下是按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-19T08:34:57.007

我有同样的问题，并在此链接中找到我的答案： [inflater 问题](https://www.bignerdranch.com/blog/understanding-androids-layoutinflater-inflate/)

你可以在没有任何依赖的情况下做到这一点

```
LayoutInflater inflater = LayoutInflater.from(getContext());
inflater.inflate(R.layout.view_with_merge_tag, this); 
```

# c# - 使用 Interop.domino.dll 的 C# 控制台应用程序 - 作为计划任务运行时失败

> ID：10240154
> 
> 赞同：4
> 
> 时间：2012-04-20T04:11:43.870
> 
> 标签：c#, com, lotus-domino, interop-domino

我编写了一个 C# 控制台应用程序，它使用 Interop.domino.dll 程序集与 domino/notes 交互以创建、更新和删除文档。当通过 cmd 提示符或通过 Visual Studio 手动运行应用程序时，应用程序运行成功。但是，当我们尝试将应用程序设置为计划任务（在域服务帐户下运行）时，它会失败并出现以下错误：

*   System.Runtime.InteropServices.COMException：检索具有 CLSID {29131539-2EED-1069-BF5D-00DD011186B7} 的组件的 COM 类工厂失败，原因是以下错误：80004005 未指定错误（HRESULT 异常：0x80004005 (E_FAIL)）。

一旦我们尝试使用 Interop.domino.dll 中的对象，特别是尝试按照以下内容创建 NotesSession 对象的实例时，就会发生错误：

*   ISession notesSession = new NotesSession();

经过一番调查，我发现互操作程序集需要一个桌面才能与之交互，并且如果我们使用登录到计算机的服务帐户运行计划任务，那么计划任务上正在运行的计划将成功运行。以服务帐户登录时，您可以看到应用程序在运行时会弹出一个 svchost.exe 窗口，这就是它需要桌面的原因。

但是，让服务帐户一直登录到机器不是一个可接受的解决方案，因为这意味着每次服务器重新启动时都必须重新登录该帐户。还有一些关于允许服务帐户登录机器的安全问题。

所以，我想知道是否有人对如何解决这个问题有任何建议？有没有办法抑制程序集试图显示的任何 UI？或者，任何人都可以建议一个可以达到类似结果的计划任务的替代方案。我们需要做的是：

*   让应用程序以设定的时间间隔运行（IE - 每天一次/每小时一次）
*   理想情况下，让它在域服务帐户下运行（而不是本地系统帐户）
*   运行不需要服务帐户从 Interop.domino.dll 登录到机器/UI 元素被抑制

我们考虑过使用notes Web 服务而不是Interop 组件编写一个类似的应用程序，如果我们不能让控制台应用程序作为计划任务运行，我们将沿着这条路走下去。但是，如果可能的话，我们想利用我已经写过的东西。

**2012 年 1 月 5 日更新**

我已经尝试按照@dna-man 解决方案设置 NOTESNTSERVICE OS 环境变量。然而，这并没有解决问题。

现在，我们已将应用程序设置为在本地系统帐户下运行的 Windows 服务，并允许与桌面交互。这并不理想，因为它不允许我们轻松地安排它并且它不在域服务帐户下运行，但应用程序确实可以工作，所以我们现在将采用这种方法。

有一个答案建议使用这种方法，但它似乎已被删除，因此我无法将其标记为正确。我可能会让这个问题有点开放，看看其他人是否有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:48:57.967

如果您的代码在 Domino 服务器上运行，您必须确保设置了 OS 环境变量 NOTESNTSERVICE=1。您可以在 Lotus C API 文档中找到有关此环境变量的更多信息，但它在作为服务运行时也适用于 COM API。早在 2003 年，我就创建了一个必须作为服务运行的 VB.NET 应用程序，而设置这个环境变量是关键。如果未设置，则服务将在我注销机器后立即停止工作。为了确保将来安装服务时不会忘记设置此环境变量，我只是让我的服务管理器启动代码在启动时使用对 SetEnvironmentVariable 的 VB.NET 调用直接设置此环境变量。它必须在创建 Domino 会话对象之前设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:40:59.763

很难确切地说出原因，但我相信它无法读取 Lotus 互操作类的注册表信息。显然条目在那里，否则在手动运行时它将不起作用。所以让我们考虑其他可能性。

我什至不知道这是否可能，但是您的应用程序在手动运行时以 32 位运行，但在计划时以 64 位运行？IBM 不支持 Win64 上的 Domino COM 类，我很确定第一个症状是注册表 l

更常见的可能性是服务帐户无权读取机器上安装的 Notes/Domino 的注册表项，这可能是因为该软件是安装在特定用户帐户下的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T22:49:54.583

我最终稍微修改了应用程序，将其设置为在本地系统帐户下运行的 Windows 服务，并允许与桌面交互。这并不理想，因为它不允许我们轻松地安排它，而且它不是在域服务帐户下运行的。但是，这种方法确实允许应用程序在不需要帐户始终登录的情况下运行，并且确实允许显示互操作 UI 元素（从而避免错误）。

为了安排 Windows 服务以设定的时间间隔（我每天设置一次）执行任务，我使用了[此处](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)提出的 Timer 解决方案。

# php - 将 php/mysql 查询中的数据添加到 XML 文件中

> ID：10240157
> 
> 赞同：0
> 
> 时间：2012-04-20T04:12:02.637
> 
> 标签：php, mysql, xml, wordpress

我想添加/显示来自数据库查询的数据并将其添加到 XML 文件中。例如，我有一个 table_persons，它有一个名字和年龄。我创建了一个 mysql 查询来获取它的名称和年龄。然后简单地将数据（人的姓名和年龄）放入 XML 文件中。

你会怎么做？或者有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:17:42.500

我建议您使用[DomDocument](http://www.php.net/manual/en/class.domdocument.php)和[file_put_contents](http://www.php.net/manual/en/function.file-put-contents.php)创建您的 XML 文件。

像这样的东西：

```
// Create XML document
$doc = new DomDocument('1.0', 'UTF-8');

// Create root node
$root = $doc->createElement('persons');
$root = $doc->appendChild($root);

while ($row = mysql_fetch_assoc($result)) {
    // add node for each row
    $node = $doc->createElement('person');
    $node = $root->appendChild($node);

    foreach ($row as $column => $value) {
        $columnElement = $doc->createElement($column);
        $columnElement = $node->appendChild($columnElement);

        $columnValue = $doc->createTextNode($value);
        $columnValue = $columnElement->appendChild($columnValue);
    }
}

// Complete XML document
$doc->formatOutput = true;
$xmlContent = $doc->saveXML();

// Save to file
file_put_contents('persons.xml', $xmlContent); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T05:00:55.097

```
<?php
[snip] //database code here

$f = fopen('myxml.xml', 'a+');
foreach($row = mysqli_fetch_assoc($resultFromQuery))
{
    $str = "<person>
        <name>{$row['name']}</name>
        <age>{$row['age']}</age>
    </person>\n";
    fwrite($f, $str);
}
fclose($f);
?> 
```

假设您使用`mysqli`，此代码有效。如果没有，适合。在`fopen`函数调用中，`a+`告诉它在写入时打开它以进行读取，并将指针放在文件末尾。

祝你好运。

# php - 如何从同一页面传递 PHP 中的变量？....逻辑思维难题

> ID：10240158
> 
> 赞同：0
> 
> 时间：2012-04-20T04:12:08.123
> 
> 标签：php, javascript, session, variables

所以我在我的网站上遇到了一个潜在的问题......这是一个基于帖子的系统，帖子位于文本文件中。使用一些 Javascript 和大量 PHP。

当您在主页上的表单上提交时，您会被发送到发布和处理数据的页面，但您看不到它，因为您被重定向回来。然后根据您发布的帖子内容更改主页。一切都很好。

但是现在我正在尝试添加一个新功能来修改您发布的帖子，该功能基于您点击的按钮，该按钮使用 javascript 提交隐藏表单，并发送到您看不到的另一个进程和重定向页面，它工作正常直到我今天意识到的那个街区。我不知道如何指定被更改的帖子是正确的。

我预计这个网站会有很多用户，所以我担心的是，如果用户 X 在用户 Y 发帖时发帖，并且用户 X 的帖子成为顶部帖子，那么用户 Y 的选项实际上会改变用户 X 的帖子......

我正在考虑向主处理页面（第一次提交时发生的页面）添加一个 COOKIE 或其他内容，通过计算该文件中的行数，记录该帖子将成为的行数时间并加1。然后根据用户的号码（每个用户都有一个号码）检查它是否是该用户的最新帖子....但问题是我不知道如何传递该值以在下一页阅读.

我认为设置 COOKIE 是因为页面既重定向，又读取和写入文件。但是，当前页面的唯一输出是 var_dumps。

POST/GET 已失效，因为据我所知，用户必须做一些事情才能提交它，而用户甚至不会看到该页面。

如果很多用户都试图获取他们自己的数据，那么写入文件会很麻烦。

我想我可能正在寻找的是 SESSION 变量......但我对这些变量一无所知，除了它们用于登录页面，而且这个站点没有登录。

为了让事情变得更有趣，当一个用户在一分钟内发布相同的内容时，第一个用户的帖子会被替换，并且它旁边会有点 +1 ......这使得它更难与用户的号码进行检查……

最后，我尝试使用 AJAX（我还不知道）进行实时更新……现在那会很糟糕。但现在我担心我的静态小网站。

婴儿步。

任何想法如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:17:16.850

正如您所暗示的那样，使用 Session 变量。它们不仅被登录页面使用，而且被所有东西使用。会话相当于服务器端 cookie/服务器端存储，因此您不必（尽可能多地）担心您的用户会篡改它们。

如果您想让自己的生活变得更加困难，您可以对变量进行 json 编码并将它们作为对象存储在数据库甚至纯文本文件中。但实际上，请阅读会话。

您需要知道的只是`session_start();`保存`$_SESSION['var']=$yourvar;`数据并`$_SESSION['yourvar']`稍后检索（例如在另一页上）。

# c++ - 在 C++ 中通过引用传递指针的原因？

> ID：10240161
> 
> 赞同：115
> 
> 时间：2012-04-20T04:12:21.467
> 
> 标签：c++, pointers, reference

在什么情况下你想在 c++ 中使用这种性质的代码？

```
void foo(type *&in) {...}

void fii() {
  type *choochoo;
  ...
  foo(choochoo);
} 
```

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-04-20T04:14:41.983

如果您需要修改指针而不是指针指向的对象，您可能希望通过引用传递指针。

这类似于为什么使用双指针；使用对指针的引用比使用指针稍微安全一些。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-11-25T09:51:08.450

50% 的 C++ 程序员喜欢在删除后将指针设置为 null：

```
template<typename T>    
void moronic_delete(T*& p)
{
    delete p;
    p = nullptr;
} 
```

如果没有引用，您只会更改指针的本地副本，而不会影响调用者。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-11-25T09:49:44.380

大卫的回答是正确的，但如果还是有点抽象，这里举两个例子：

1.  您可能希望将所有已释放的指针归零以更早地发现内存问题。你会做的C风格：

    ```
    void freeAndZero(void** ptr)
    {
        free(*ptr);
        *ptr = 0;
    }

    void* ptr = malloc(...);

    ...

    freeAndZero(&ptr); 
    ```

    在 C++ 中做同样的事情，你可以这样做：

    ```
    template<class T> void freeAndZero(T* &ptr)
    {
        delete ptr;
        ptr = 0;
    }

    int* ptr = new int;

    ...

    freeAndZero(ptr); 
    ```

2.  在处理链表时——通常简单地表示为指向下一个节点的指针：

    ```
    struct Node
    {
        value_t value;
        Node* next;
    }; 
    ```

    在这种情况下，当您插入空列表时，您必须更改传入指针，因为结果不再是`NULL`指针。这是您从函数修改外部指针的情况，因此它将在其签名中引用指针：

    ```
    void insert(Node* &list)
    {
        ...
        if(!list) list = new Node(...);
        ...
    } 
    ```

[这个问题](https://stackoverflow.com/questions/20125477/linked-list-insert-at-the-end-c)有一个例子。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-21T08:18:09.103

我不得不使用这样的代码来提供函数来为传入的指针分配内存并返回其大小，因为我的公司使用 STL 对我“对象”

```
 int iSizeOfArray(int* &piArray) {
    piArray = new int[iNumberOfElements];
    ...
    return iNumberOfElements;
 } 
```

这不好，但指针必须通过引用传递（或使用双指针）。如果不是，则内存分配给指针的本地副本，如果它是按值传递的，这会导致内存泄漏。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-04T01:17:56.573

一个例子是，当您编写一个解析器函数并将一个源指针传递给它以从中读取时，如果该函数应该将该指针向前推到解析器正确识别的最后一个字符之后。使用对指针的引用可以清楚地表明该函数将移动原始指针以更新其位置。

通常，如果您想将指针传递给函数并让它将*原始*指针移动到其他位置而不是仅移动它的副本而不影响原始指针，则使用对指针的引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-25T08:37:19.033

您可能需要这样做的另一种情况是，如果您有 stl 指针集合并希望使用 stl 算法更改它们。c++98 中的 for_each 示例。

```
struct Storage {
  typedef std::list<Object*> ObjectList;
  ObjectList objects;

  void change() {
    typedef void (*ChangeFunctionType)(Object*&);
    std::for_each<ObjectList::iterator, ChangeFunctionType>
                 (objects.begin(), objects.end(), &Storage::changeObject);
  }

  static void changeObject(Object*& item) {
    delete item;
    item = 0;
    if (someCondition) item = new Object();
  } 

}; 
```

否则，如果您使用*changeObject(Object* item)*签名，则您有指针的副本，而不是原始的。

# android - 设置 android:windowSoftInputMode="adjustPan" 时如何滚动我的布局？

> ID：10240165
> 
> 赞同：6
> 
> 时间：2012-04-20T04:12:32.483
> 
> 标签：android, android-layout

我的活动有一个顶栏和一个底栏。顶栏和底栏之间的空间我有一个线性布局，里面有几个编辑文本视图。因为我不希望每次出现软键盘时都调整布局大小，所以我在清单中为我的活动设置了 android:windowSoftInputMode="adjustPan" 。但是当软键盘打开时，我想向下滚动以选择另一个要输入的编辑文本，它不允许我这样做。当我关闭软键盘时，我只能选择底部的编辑文本。这是非常烦人和不方便的。我怎样才能让软键盘的滚动视图和 ajustpan 模式一起工作？

请帮帮我。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T03:00:15.433

最后，我找到了解决我的问题的方法，所以我想分享给将来可能会遇到同样问题的人。我的布局的简要说明如下：

```
<myRelativeLayout>
<topbar.../>
<myscrollView>
    <linearLayout>
        //all stuff controls:editview,textview,....
    </linearLayout>
</myscrollView>
<bottombar.../> 
```

我创建自定义类 myRelativeLayout 扩展 RelativeLayout

```
public class myRelativeLayout extends RelativeLayout{

public interface OnRelativeLayoutChangeListener {
    void onLayoutPushUp();
    void onLayoutPushDown();
}

private OnRelativeLayoutChangeListener layoutChangeListener;
public myRelativeLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    final int proposedheight = MeasureSpec.getSize(heightMeasureSpec);
    final int actualHeight = getHeight();

    if (actualHeight > proposedheight){
        // Keyboard is shown
        layoutChangeListener.onLayoutPushUp();
    } else if(actualHeight < proposedheight){
        // Keyboard is hidden
        layoutChangeListener.onLayoutPushDown();
    }       
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
}

public void setLayoutChangeListener(OnRelativeLayoutChangeListener layoutChangeListener) {
    this.layoutChangeListener = layoutChangeListener;
}

public OnRelativeLayoutChangeListener getLayoutChangeListener() {
    return layoutChangeListener;
} 
```

}

在我的活动中，我只是将 myRelativeLayout 的 setLayoutChangeListener 设置为在软键盘显示时隐藏底栏，并在软键盘隐藏时显示底栏：

```
myRlayout.setLayoutChangeListener(new OnRelativeLayoutChangeListener() {

        @Override
        public void onLayoutPushUp() {
            // TODO Auto-generated method stub
            myBottombar.setVisibility(View.GONE);//in my case i need to setVisibility(View.GONE) to bottombar in order for this bar is not displayed when softkeyboard show up.
        }

        @Override
        public void onLayoutPushDown() {
            // TODO Auto-generated method stub
            myBottombar.setVisibility(View.VISIBLE);// redisplay myBottombar when keyboard is closed.

        }
    }); 
```

不要忘记为活动设置 android:windowSoftInputMode="adjustResize"。希望这对遇到同样问题的人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:49:24.527

把它们`EditText`放在`ScrollView`这样的位置：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/editText2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <EditText
            android:id="@+id/editText3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

    </LinearLayout>

</ScrollView> 
```

# ruby-on-rails - 如何在 Rspec 中存根 current_user 方法

> ID：10240166
> 
> 赞同：1
> 
> 时间：2012-04-20T04:12:51.030
> 
> 标签：ruby-on-rails, rspec, factory-bot, cancan

我有一个简单的用户登录系统：

```
module SessionsHelper
  def logged_in?
    current_user.present?
  end

  def current_user
    @current_user ||= begin
                        if session[:current_user_id]
                          User.find(session[:current_user_id]) rescue nil
                        end
                      end
  end
end 
```

我包含在 ApplicationController 中：

```
class ApplicationController < ActionController::Base
  include SessionsHelper
  helper SessionsHelper 
```

我正在尝试测试横幅控制器：

```
require 'spec_helper'
describe Admin::BannersController do
  describe 'POST create' do
    let(:user){  create(:user_admin) }
    before do
      controller.stub(:current_user){ user }
    end

    it "create action should render new template when model is invalid" do
      Banner.any_instance.stubs(:valid?).returns(false)
      post :create
      response.should render_template(:new)
    end 
```

:user_admin 是正确设置的 Factory Girl 管理员用户。

但是测试仍然显示：**您无权访问此页面。** 这是来自康康。

我没有正确地存根吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:36:37.813

```
 def fake_user
    user = FactoryGirl.build(:user, :id => 100000 + rand(100000))
    stub(controller).current_user { user }
    user
  end 
```

# python - python try-except

> ID：10240167
> 
> 赞同：-1
> 
> 时间：2012-04-20T04:13:01.203
> 
> 标签：python

我有这个代码：

```
#! /usr/bin/python
import sys, string

def findAll(search, fh):
    count = 0
    for line in fh:
        count += 1
        if line.find(search) != -1:
            print "%3d: %s"%(count, line.rstrip())
    return count

search = raw_input("Enter string to be found: ")
filename = raw_input("Enter filename: ")
fh = open(filename, "rU")
findAll(search, fh) 
```

我的教授建议我编写这段代码并结合“改进的使用”。
我对如何做感到困惑，但她建议这样做

1.  我通过注释掉语句来修改程序`raw_input()`，然后添加语句以检查是否使用少于 2 个参数调用程序，如果是，则添加`print 'Usage: findstring.py string filename`. 该代码采用字符串并将它们定位在文件中。

2.  我使用`filename`命令行参数 from`sys.argv`打开文件并准备发生输入/输出错误 (IOError)。然后使用一个`try-except`块来编码打开文件是否有效。
    如果打开失败，我`print 'Error: cannot open findstring.py`也`findstring.py`认为是文本文件。

老实说……我忙着写下她的建议，以至于我不知道如何去做她推荐的许多事情。有人可以帮助改进此代码吗？我很困惑，我不知道该怎么做。我的教授确实说过代码会运行，但我不知道如何修改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:38:14.250

为了改进使用，请尝试使用 argparse 模块。它使命令行选项更容易。

[http://docs.python.org/library/argparse.html#module-argparse](http://docs.python.org/library/argparse.html#module-argparse)

来自上述链接的代码示例如下：

```
import argparse

parser = argparse.ArgumentParser(description='Process some integers.')
parser.add_argument('integers', metavar='N', type=int, nargs='+',
                   help='an integer for the accumulator')
parser.add_argument('--sum', dest='accumulate', action='store_const',
                   const=sum, default=max,
                   help='sum the integers (default: find the max)')

args = parser.parse_args()
print args.accumulate(args.integers) 
```

现在考虑如何为您的作业修改此示例。您需要使用字符串（搜索词、文件名）而不是整数。

对于 try/except 块，请记住处理错误的代码位于块的 except 部分。也就是说，您可能会考虑在 except 块中显示错误消息。

# iphone - 如何在横向模式下显示 UIImagePickerControllerSourceTypePhotoLibrary

> ID：10240169
> 
> 赞同：1
> 
> 时间：2012-04-20T04:13:11.657
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

有人知道如何像 iPhone 中的照片应用程序一样以横向模式显示 UIImagePickerControllerSourceTypePhotoLibrary 吗？

```
- (void)getPhotoFromSource:(UIImagePickerControllerSourceType)sourceType;
{
    if ([UIImagePickerController isSourceTypeAvailable:sourceType]) 
    {    photoPicker.sourceType = sourceType;//UIImagePickerControllerSourceTypePhotoLibrary
        [self presentViewController:photoPicker animated:YES completion:nil];
        //[self presentModalViewController:photoPicker animated:YES];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error accessing media" message:@"Device doesn't support media source" delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T00:28:25.090

无法以横向形式显示。虽然原生 photo.app 可以

# wordpress - Wordpress 主题/插件选项页面

> ID：10240174
> 
> 赞同：0
> 
> 时间：2012-04-20T04:13:22.730
> 
> 标签：wordpress

admin 的 Pluign 选项或 Theme 选项之间有什么实质性区别吗？

我可以找到很多很好的主题相关教程（用于选项页面） - 但没有那么多（或不太清楚）插件选项页面。

遵循主题相关的教程是否会基本相同？（仅考虑激活/停用挂钩会有所不同？）

编辑我 - 只是为了澄清：

我的问题更具体地说，我是否可以按照“主题”教程进行设置，即使我需要“插件” - 如果是这样，我需要更改/注意的点到底是什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T16:21:19.763

这个周末，我在 2007 年成为 WP 主题开发人员后编写了我的第一个插件，我遇到了和你一样的问题。事实证明，主题页面基本上只是创建插件页面的简化版本。这通常意味着函数需要更少的参数，你需要考虑的也更少。但这是一把双刃剑，因为它让你对自己想做的事情的自由度降低。

例如：而不是`add_theme_page()`您会调用`add_menu_page()`或`add_submenu_page()`取决于您希望菜单出现的位置。比较论据：

```
add_theme_page( $page_title, $menu_title, $capability, $menu_slug, $function);
add_menu_page( $page_title, $menu_title, $capability, $menu_slug, $function, $icon_url, $position ); 
```

wich`add_options_page()`也是一个包装函数`add_submenu_page()`。

我注意到的第二件事是[Settings API](http://codex.wordpress.org/Settings_API)。只要您遵循 Codex，您和您的插件就可以保存，因为它消除了所有实际设置表单布局创建。这是许多教程花费最多精力的地方：创建数百行代码来布局表单。Settings API 有点像一个框架。

我检查了“wordpress 主题选项页面”的所有顶级谷歌教程结果，其中只有两个使用了设置 API（[这个](http://www.onedesigns.com/tutorials/how-to-create-a-wordpress-theme-options-page)和[那个](http://themeshaper.com/2010/06/03/sample-theme-options/)）。因此，我建议您不要遵循大多数教程，除非它们使用 Settings API。

就是这样。在 WordPress 中创建插件设置只不过是注册菜单项并通过设置 API 呈现设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:13:06.807

在 WordPress 中，主题和插件的选项处理方式非常相似。

此外，如果您选择在主题中放置特定选项，则只有在激活该特定主题时它才会处于活动状态，这同样适用于插件。

如果您希望该功能仅在主题激活时可用，那么您可能必须将它们放在主题中，如果您希望它在多个主题中处于活动状态，那么您可能希望将它们放在插件中。

另一个区别是，主题可能有一些插件可能不可用的特殊钩子。

主题和插件的选项/设置页面也不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:17:34.983

这取决于主题或插件的开发方式。选项通常存储在 wp_options 数据库中。他们都可以从中受益并且基本相同。但在其他情况下，比如一个非常大的插件，开发人员可能会选择创建一个 TABLE 并将选项存储在那里。

# c# - C# .NET AS2 communication

> ID：10240176
> 
> 赞同：5
> 
> 时间：2012-04-20T04:13:26.210
> 
> 标签：c#, .net, edi, communicator

I like to ask for some guidance on this topic of sending and receiving files via AS2 or AS3 communications protocol via a .NET C# implementation. I have search for examples or explanation of how you would implement this communication layer to send and receive EDI documents as well as other types of documents. I have built my own EDI document generator and reader. It's linked to my eCommerce systems. We have been working with VCommerce and CommerceHUB for a number of years. What i can't seem to find much information on is an implementation of what the communication layer looks like for AS2\. I realize the second part to all of this is the generation of certificates for encryption and decryption but I think I have an idea on how to implement that or just create the certificates manually if possible. Can you guys point me to anything that can either show me an example of the standards to use to send the HTTP message or something like that? I have used the /n Software for the communications part up until now but I would really like to do this myself so that its 100% integrated. For anyone who needs just the server they are great and worth the cost. Very stable and easy to implement. For me I have grown beyond being able to use them and need to build my own.

Thanks so much for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:20:45.630

正如 Porges 所说，该规范是一个开放标准。您正在重新发明轮子，就像使用您的 EDI 翻译器一样。也许没有为您工作的软件工具的预算？我会对你的“读者”的样子感兴趣。它与 EDI 记事本（来自 Liaison 的免费 EDI 阅读器）相比吗？

如果您觉得 /n 不可扩展，那么还有许多其他 MFT / 集成产品是可扩展的。您是否知道 Drummond Group 有一个 AS2 认证流程 (http://www.drummondgroup.com/index.php/b2b-certified-products/certified-products/as2)？一些合作伙伴需要 Drummond 认证的 AS2 连接（尽管不像过去几年那样，因为沃尔玛放弃了这一要求）。

您打算为证书管理做什么？与 Windows 集成（IMO 对证书的处理能力很差），还是自己构建？合作伙伴管理/AS2 名称/连接？您是否要构建功能来处理同步和异步 MDN？错误捕获/通过电子邮件向用户发送错误呢？在我看来，这些商业软件平台的存在是有原因的，它们已经完成了所有这些功能。您花费在构建工具上的时间将花费同样多或更多的成本来购买已经有效的东西。

多年来，我使用的产品能够 100% 集成到我的平台中：Cleo Lexicom 具有可扩展性和成本效益。Liaison ECS 提供无限的合作伙伴（但需要 SQL Server） Axway Synchrony Interchange 非常灵活

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-11T21:00:49.797

试试 \n Software 的[http://www.nsoftware.com/ibiz/edi/](http://www.nsoftware.com/ibiz/edi/)

我使用它来将服务构建到商业文件交换应用程序中，并且我看到至少有两个我最喜欢的竞争对手也使用它来将 ASx 服务构建到他们的商业应用程序中。

# java - Why does onLongPress() not return a boolean like all other SimpleOnGestureListener?

> ID：10240178
> 
> 赞同：2
> 
> 时间：2012-04-20T04:13:35.197
> 
> 标签：java, android

As the title states. The fact that I can't consume the event is causing a `click` event to occur immediately afterwards. Now I am manually keeping track of whether or not a longpress has occurred when handling a potential click.

Am I missing something here? I mean, I can't even get around this trying to implement the OnGestureListener interface because it expects a void for `onLongPress()`. What are my options?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:36:49.323

我认为onLongPress不喜欢onDown这些，onLongPress的返回值不是用来检查什么的，但是onDown的返回值对系统是有用的，它会帮助系统识别另一个事件。从安卓源代码：

```
 mStillDown = true;
   mInLongPress = false;
   if (mIsLongpressEnabled) {
      mHandler.removeMessages(LONG_PRESS);
      mHandler.sendEmptyMessageAtTime(LONG_PRESS, mCurrentDownEvent.getDownTime() +      TAP_TIMEOUT + LONGPRESS_TIMEOUT);
    }
       mHandler.sendEmptyMessageAtTime(SHOW_PRESS, mCurrentDownEvent.getDownTime() + TAP_TIMEOUT);
      handled |= mListener.onDown(ev); 
```

onLongPress 和 ShowPress 只是告诉这些情况发生了。返回值对系统没有用。

如果你想实现你的设计，你可以使用这个变量来检查 LongPress 是否发生。希望这可以帮到你。

# ocaml - Functor compilation issue: Signature mismatch: Modules do not match

> ID：10240184
> 
> 赞同：2
> 
> 时间：2012-04-20T04:14:04.963
> 
> 标签：ocaml, functor

First the code:

```
module Boolean = struct
  exception SizeMismatch
  type boolean = T | F | Vec of boolean array 

  let to_bool v = match v with 
    T -> true
  | F -> false 
  | _ -> raise SizeMismatch
end

module Logic = struct
  type 'a var_t = { name: string; mutable value: 'a }
  type 'a bexp  = Const of 'a
  |             Var of 'a var_t

  let eval exp = match exp with
    Const x -> x
  | Var x   -> x.value

  let make_var s v = { name = s; value = v }
  let set v n = v.value <- n
  let get_var_name v = v.name
  let get_var_val  v = v.value
end

module type EXP =
  sig
    type  'a var_t
    type  'a bexp
    val eval_exp     : 'a bexp -> bool
    val get_var_name : 'a var_t -> string
    val get_var_val  : 'a var_t -> 'a
  end

module LogicExp = 
  struct
    include Logic
    let eval_exp exp = Boolean.to_bool (Logic.eval exp)
  end

module FSM ( Exp : EXP ) = 
  struct
    let print_var v = Printf.printf "%s = %d\n" (Exp.get_var_name v)
    (Exp.get_var_val v)

  end

module MyFSM = FSM(LogicExp) 

let myvar = Logic.make_var "foo" 1;;

MyFSM.print_var myvar ;; 
```

When I compile it I get the following error:

```
File "test.ml", line 57, characters 19-27:
Error: Signature mismatch:
   Modules do not match:
     sig
       type 'a var_t =
         'a Logic.var_t = {
         name : string;
         mutable value : 'a;
       }
       type 'a bexp = 'a Logic.bexp = Const of 'a | Var of 'a var_t
       val eval : 'a bexp -> 'a
       val make_var : string -> 'a -> 'a var_t
       val set : 'a var_t -> 'a -> unit
       val get_var_name : 'a var_t -> string
       val get_var_val : 'a var_t -> 'a
       val eval_exp : Boolean.boolean Logic.bexp -> bool
     end
   is not included in
     EXP
   Values do not match:
     val eval_exp : Boolean.boolean Logic.bexp -> bool
   is not included in
     val eval_exp : 'a bexp -> bool 
```

What I don't understand is how the more specific type isn't included in the more general type?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:45:07.670

错误信息实际上是相当准确的：

```
Values do not match:
  val eval_exp : Boolean.boolean Logic.bexp -> bool
is not included in
  val eval_exp : 'a bexp -> bool 
```

`MyFSM`函子需要一个模块参数，除其他外，它应该包含一个`eval_exp`类型的函数`'a bexp -> bool`。这意味着给定一个类型的值`'a bexp`对于函数的*任何*选择都`'a`应该产生一个类型的值`bool`。但是，您提供的模块包含一个函数，该函数仅针对 的*一个特定*选择执行此操作`'a`，即模块`'a`中的类型。`boolean``Boolean`

这个最快的解决方法是将您的签名定义`EXP`为

```
module type EXP =
  sig
    type  b  (* added *)
    type  'a var_t
    type  'a bexp
    val eval_exp     : b bexp -> bool  (* changed *)
    val get_var_name : 'a var_t -> string
    val get_var_val  : 'a var_t -> 'a
  end 
```

所以`eval_exp`现在对固定类型的布尔表达式进行操作`b`，然后定义`LogicExp`为

```
module LogicExp =
  struct
    type b = Boolean.boolean  (* added *)
    include Logic
    let eval_exp exp = Boolean.to_bool (Logic.eval exp)
  end 
```

使其固定`b`为`Boolean.boolean`.

实施这些更改将使您的代码编译。

现在，让我们看看您关于“更具体的类型如何不包含在更一般的类型中？”的问题。这假设`'a bexp -> bool`确实比 更一般`boolean bexp -> bool`，但实际上并非如此。如果一个函数类型比函数类型更通用并且比 更通用，`A -> B`则认为函数类型比函数类型更通用：`C -> D``C``A``B``D`

```
A <: C        D <: B
--------------------
  C -> D <: A -> B 
```

注意前提中`C`和的“翻转” 。`A`我们说函数空间构造函数的参数位置`... -> ...`是*逆变的（相对于结果位置的**协变*）。

直观地说，如果一个类型包含更多值，则它比另一个类型更通用。要了解为什么函数空间构造函数的参数位置是逆变的，请考虑某些类型`f`的类型函数和. 现在，考虑一个比 严格更一般的类型，即 in 中的所有值也在 in 中，但包含一些不在 in 中的值。因此，我们至少可以分配一个值 type ，但不能分配 type 。它的类型告诉我们知道如何对 type 的值进行操作。但是，如果我们要（错误地！）从中得出结论，那么我们可以使用它，就好像它有类型`A -> C``A``C``B``A``A``B``B``A``b``B``A``f``A``A <: B``A -> C <: B -> C``f``B -> C`因此，我们可以将值`b`作为参数传递给`f`. 但`b`不是类型`A`，`f`只知道如何操作类型的值`A`！

显然，`... -> ...`参数位置的协方差不起作用。要查看逆变确实起作用，请考虑相同的类型`A`, `B`，`C`现在还要考虑`g`类型的函数`B -> C`。也就是说，`g`知道如何对 type 的所有值进行操作`B`。函数空间构造函数在其参数位置的逆变使我们可以得出结论，`g`也可以安全地分配 type `A -> C`。我们知道 in 中的所有值`A`也都在`B`并且`g`知道如何处理所有`B`这些都没有问题，我们可以安全地将值传递`A`到`g`.

# windows-ce - Windows CE 6.0 - USB Drivers at boot up time

> ID：10240188
> 
> 赞同：1
> 
> 时间：2012-04-20T04:14:32.777
> 
> 标签：windows-ce, driver, platform-builder

I built a new Windows CE image and placed two USB drivers. One for the USB printer and the second for some special device with digital and analog I/O ports.

I have one problem that came out with the drivers while the operating system boots up.

Every time the image boots up it asks to enter the driver's name. (The message is "Unidentified USB Device" Enter the name of the USB device driver) Is there a workaround for this problem ? What does I have to put into a registry?

I did not check if the driver is working after that because of my second problem with the SQL CE 3.5 in my application.

The similar problem is happening if I not add a driver for example the Audio subsystem. The OS at boot up scans the devices and finds some new hardware asking to fill the name for the driver.

It is simple to correct the second situation. I only have to check the item in the catalog view and rebuild the image. On behind the ragistry is filled with correct parameters but what am I supposed to do with custom drivers ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:19:26.480

当查询 USB 节点并且在操作系统中没有找到 macthing 驱动程序时，会出现“未识别设备”对话框。具体是哪个设备造成的？您同时提到了打印机和 I/O 设备 - 了解导致错误的设备将有助于缩小范围。

当您将驱动程序“添加”到操作系统时，您是否只是添加了驱动程序二进制文件，或者您是否还在驱动程序部分添加了相关的注册表项？这些条目取决于特定的驱动程序，因此我无法准确告诉您您需要哪些键和值。

# python - Javascript library for displaying Python console app output

> ID：10240190
> 
> 赞同：2
> 
> 时间：2012-04-20T04:14:38.907
> 
> 标签：python, console, comet, javascript

I'm writing a **simple web-based front-end** for a Python **console program** that runs on a local machine. The interactions are extremely simple. Essentially, the web front-end needs to:

1.  Accept input from the user (through an AJAX form or something).
2.  Pass this input to the Python program and run it.
3.  Display the output of the Python console program *while it is running*, until it terminates.

The first two can be accomplished quite easily (though suitable AJAX library recommendations would be helpful).

**Question**: What Javascript library would I need to accomplish No. 3?

* * *

**Remarks**:

*   I am aware of packages like `AJAXterm` and `Shellinabox`, but instead of a full-shell, I just want to *display* the output of the Python console program; essentially I'd like a way to pipe Python's stdout to a web-page in real-time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:34:20.623

由于 python 代码输出的时间不可预测，您可能正在寻找一个[彗星](http://en.wikipedia.org/wiki/Comet_%28programming%29)实现或另一个服务器推送协议。因此，在服务器端，您有一个线程正在从您的 python 进程中读取`stdout`并通过 comet 将输出推送到您的客户端。

[Cometd](http://cometd.org/)可能是客户端和服务器组件的最佳选择。

# emacs - Emacs / Slime / Hard Code Vertical Split Ratio

> ID：10240192
> 
> 赞同：4
> 
> 时间：2012-04-20T04:14:45.393
> 
> 标签：emacs, slime

I'm currently in mode: C-x 2

Normally, I don't care much about vertical splitting. However, I'm coding on a 13" display, which makes vertical space rather precious.

I would like some setup where when I do C-x 2, my window is not split 50/50, but rather 70/30 [this way I can send the repl to the bottom portion of the screen, and stll see quite a bit of code.]

C-h a vertical split

brings up:

split-window-vertically, table-split-call-vertically

However, I suspect there is some parameter that changes / controls the split ratio.

What emacs option tells my computer to split 70/30 rather than 50/50?

Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:42:51.637

您可以使用前缀参数告诉 Emacs 给两个窗口中的每一个提供多少行。

见：`C-h``k` `C-x``2`
或`C-h``f` `split-window-below` `RET`

> 如果可选参数 SIZE 被省略或为零，则两个窗口的高度相同或接近。如果 SIZE 为正，则上部（选定的）窗口将获得 SIZE 行。如果 SIZE 为负数，则下部（新）窗口将获得 -SIZE 行。

所以你可以给上面的窗口 20 行和下面的窗口的其余部分：（`C-u` `20` `C-x``2`
或`M-2``M-0``C-x``2`，等等......）

你可以给下面的窗口 10 行和上面的窗口的其余部分：（`C-u` `-10` `C-x``2`
或`M--``M-1``M-0``C-x``2`，等等......）

请参阅[如何更改分屏 emacs 窗口的大小？](https://stackoverflow.com/questions/4987760/how-to-change-size-of-split-screen-emacs-windows/4988206)有很多方法可以在拆分后修改窗口的大小。

**编辑：**

您可以使用以下功能来做您想做的事：

```
(defun my-split-window-below (&optional arg)
  "Split the current window 70/30 rather than 50/50.
A single-digit prefix argument gives the top window arg*10%."
  (interactive "P")
  (let ((proportion (* (or arg 7) 0.1)))
    (split-window-below (round (* proportion (window-height))))))

(global-set-key (kbd "C-c x 2") 'my-split-window-below) 
```

默认比率为 70/30，但您可以提供一位数前缀参数以 10% 的增量指定顶部窗口的大小。

如果将此命令绑定到`C-x``2`then`C-9``C-x``2`将给顶部窗口 90% 和底部 10%。

* * *

**编辑 2：**我最终使用了它的一个变体作为我自己的`C-x``2`绑定。此版本默认为正常的 50/50 拆分，但提供与其他函数相同的前缀 arg 功能，以防我想要不同的东西。

```
(defun my-split-window-below (&optional arg)
  "Split the current window 50/50 by default.
A single-digit prefix argument gives the top window ARG * 10%
of the available lines."
  (interactive "P")
  (let* ((proportion (and arg (* arg 0.1)))
         (size (and proportion (round (* proportion (window-height))))))
    (split-window-below size))) 
```

# mysql - 你如何将一个mysql查询减去主键复制到另一个表中

> ID：10240200
> 
> 赞同：1
> 
> 时间：2012-04-20T04:16:01.700
> 
> 标签：mysql

在我的代码中，我创建了表本身，我只是想将一个表中的所有字段复制到另一个表中

```
INSERT INTO $tbl_query (imagetargetpath, gamename, gamedirectory, like, dislike) 
 SELECT *
 FROM $sql_tbl 
WHERE gamename LIKE '%$item_searched%' 
```

表本身是这样创建和结构的

```
$tbl_query(`id` INT( 14 ) NOT NULL AUTO_INCREMENT ,
`imagetargetpath` VARCHAR( 80 ) NOT  NULL , 
`gamename` VARCHAR( 50 ) NOT NULL , `gamedirectory` VARCHAR( 50 ) NOT NULL 
, `like` INT( 14 ) NOT NULL , `dislike` INT( 14 ) NOT NULL ,PRIMARY KEY (  `id` )) "; 
```

我的目标基本上是将查询结果复制到一个新表中，但 $tbl_query 有自己的唯一 ID 号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:18:06.453

仅选择您需要的列：

```
INSERT INTO $tbl_query (imagetargetpath, gamename, gamedirectory, `like`, dislike) 
SELECT imagetargetpath, gamename, gamedirectory, `like`, dislike
FROM $sql_tbl 
WHERE gamename LIKE '%$item_searched%' 
```

仅供参考，这个问题/问题经常出现在数据库中，所以值得记住如何去做

# jquery - jquery hover event doesn't work with select option tag in google chrome?

> ID：10240205
> 
> 赞同：1
> 
> 时间：2012-04-20T04:16:19.907
> 
> 标签：jquery, google-chrome, select, hover, option

I have a simple `select` tag

```
 <select>
        <option value="a">a</option>
        <option value="b">b</option>
        <option value="c">c</option>
        <option value="d">d</option>
    </select> 
```

I want add hover event on `option`

```
 $('select option').hover(function(){
        console.log($(this).val());
    },function(){
        console.log("mouse out");
    }); 
```

However, it only works in Firefox, not in Chrome. How can I solve this problem? Is it a bug in jquery? Is there some hack?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:19:25.277

对于 Chrome 和 IE 中的选项元素，悬停事件不会触发，其他浏览器也可能如此。您可以尝试为此使用一些自定义脚本：http: [//peterned.home.xs4all.nl/csshover.html](http://peterned.home.xs4all.nl/csshover.html)

# android - Android 需要在所有社交媒体上共享图像和文本

> ID：10240212
> 
> 赞同：1
> 
> 时间：2012-04-20T04:17:09.827
> 
> 标签：android

需要在所有社交媒体上共享图像和文本我用这个它只在 Facebook 上共享图像

```
//              Intent sharingIntent = new Intent(Intent.ACTION_SEND);
//              Uri path = Uri.parse("android.resource://com.hunter99x/" + R.drawable.ninexgreen);
//              Uri screenshotUri = Uri.parse(path.toString());
//              sharingIntent.setType("image/*");
//              sharingIntent.putExtra(Intent.EXTRA_TEXT, "Body text of the new status");
//              sharingIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
//              startActivity(Intent.createChooser(sharingIntent, "Share image using")); 
```

# tfs - Team Foundation Server 在分支之间切换

> ID：10240216
> 
> 赞同：24
> 
> 时间：2012-04-20T04:17:26.973
> 
> 标签：tfs, branch

我们可以在 TFS 中的分支之间切换吗

我想要的是我下载了一个工作副本，现在我想在不下载所有内容的情况下切换到不同的分支，因为对于大型项目，这将需要很多时间，因为开发人员会花费大量时间下载

是否有可能，如果没有任何解决方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T19:22:19.533

您可以通过更改工作区映射并使用命令的`/remap`标志`get`从命令行客户端切换分支（仅下载差异）：

```
tf workfold /map $/Branch1 C:\Work
tf get C:\Work /version:T /recursive
tf workfold /unmap $/Branch1
tf workfold /map $/Branch2 C:\Work
tf get C:\Work /remap /version:T /recursive 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T05:20:11.327

在 TFS 中，分支“物理地”存在于源代码管理中，它们就像“特殊文件夹”。因此，您可以通过定位正确的文件夹来完全选择您在本地获得的分支。

例如，如果您有：

*   项目 [文件夹]
    *   项目A [文件夹]
        *   开发 [分支]
        *   V1 [分支]
    *   项目B [文件夹]
        *   开发 [分支]
        *   V1 [分支]

并且您想获得仅包含“Dev”内容的“Projects”级别，您可以在 Workspace 定义中创建映射以覆盖 ProjectA 和 B 的 V1 分支。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-08T11:57:31.257

只是为了补充知识库——我的同事[Isak Savo](https://stackoverflow.com/users/8521/isak-savo)为此目的创建了有用的批次。您需要在脚本内部（在顶部）进行一些编辑，以指向正确的源代码位置和适当的分支。核心与 Edward Thomson 的回答基本相同，但添加了一些交互逻辑。我做了一些小改动（`tf`命令的目录上下文切换，参数的引号 - 如果目录中有空格，则需要）并在下面分享：

```
@echo off
rem Command to switch the current source tree to a new branch.
rem It's best to not have any pending changes. 
set DEVBRANCH=$/dir/src1
set RELEASEBRANCH=$/dir/src2
set SOURCEDIR=c:\sources directory\src

if exist "%SOURCEDIR%" goto ASK

echo Source code directory (%SOURCEDIR%) not found, please edit this script to point to the correct directory
pause
exit

:ASK:
set TARGET=
echo Available branches are:
echo   Dev: %DEVBRANCH%
echo   Release: %RELEASEBRANCH%
set /P ANSWER=Specify target branch? [Dev, Release]  
cls
if /I "%ANSWER%"=="Release" set TARGET=%RELEASEBRANCH%
if /I "%ANSWER%"=="Dev" set TARGET=%DEVBRANCH%
if /I "%ANSWER%"=="quit" goto END
if [%TARGET%] NEQ [] goto SWITCH

echo "%ANSWER%" unknown, please answer Dev or Release. Specify quit to cancel
GOTO ASK

:SWITCH
rem Navigate to the mapping source folder to avoid "Unable to determine the workspace..." error while invoking tf commands.
echo Changing directory context
pushd %SOURCEDIR%

echo Switching to branch %TARGET%
echo  - Creating new mapping...
tf workfold /map "%TARGET%" "%SOURCEDIR%"
echo  - Get latest version...
tf get "%SOURCEDIR%" /remap /version:T /recursive

popd
goto END

:END 
```

将其保存到例如 switch_branch.cmd 并从您机器上的任何目录执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T23:54:38.230

Team Explorer Everywhere 有一个“切换到分支”命令，这可能是您正在寻找的。

另一方面，Visual Studio 没有相同的命令......

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-20T09:36:06.893

只要您使用相同的工作区并且工作目录包含分支，您就可以在多个分支之间切换。

# iphone - touchesEnded 未调用

> ID：10240221
> 
> 赞同：1
> 
> 时间：2012-04-20T04:18:15.803
> 
> 标签：iphone, ipad

我在我的视图中有一个自定义表名 tbltask 并且在触摸开始和触摸移动方法时我正在动态创建一个标签。

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    [super touchesBegan:touches withEvent:event];

     self.scrollEnabled=NO;
    CGPoint point = [[touches anyObject] locationInView:[self superview]]; 
    CGPoint pointtask=[[touches anyObject] locationInView:self];
    NSIndexPath *indexPath = [self indexPathForRowAtPoint:pointtask];
    rowid=indexPath.row;

      app.sublable=[[UILabel alloc] initWithFrame:CGRectMake((point.x)-145, (point.y)-50, 300, 40)];
    app.sublable.textAlignment=UITextAlignmentRight;
    messagedrag=[app.arraddtask objectAtIndex:rowid];
    app.sublable.text=[NSString stringWithFormat:@" %@",messagedrag.msgsubject];
    app.sublable.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"black.png"]];  

    app.sublable.layer.cornerRadius=8.0;
      app.sublable.layer.borderWidth=4;
     app.sublable.layer.borderColor=[[UIColor lightGrayColor] CGColor];
       app.sublable.textColor=[UIColor whiteColor];

    UIFont *f = [UIFont fontWithName:@"Verdana-Bold" size:16];
    app.sublable.font = f;
    [app.sublable setTextAlignment:UITextAlignmentLeft];

    [self.superview addSubview:app.sublable];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];

    if(app.sublable!=nil)
    {

        [app.sublable removeFromSuperview];

    }
    CGPoint point = [[touches anyObject] locationInView:[self superview]]; 
    NSIndexPath *indexPath = [self indexPathForRowAtPoint:point];

    NSLog(@"............super %f",[self superview].frame.origin.y);

    app.sublable=[[UILabel alloc] initWithFrame:CGRectMake((point.x)-145, (point.y)-50, 300, 40)];
    app.sublable.textAlignment=UITextAlignmentRight;
    messagedrag=[app.arraddtask objectAtIndex:rowid];
    app.sublable.text=[NSString stringWithFormat:@" %@",messagedrag.msgsubject];

     app.sublable.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"black.png"]];  

    app.sublable.layer.borderWidth=4;
    app.sublable.layer.borderColor=[[UIColor lightGrayColor] CGColor];
    app.sublable.layer.cornerRadius=8.0;
    app.sublable.textColor=[UIColor whiteColor];
       UIFont *f = [UIFont fontWithName:@"Verdana-Bold" size:16];
    app.sublable.font = f;
    [app.sublable setTextAlignment:UITextAlignmentLeft];

    [self.superview addSubview:app.sublable];

} 
```

结果就是这样。 ![在此处输入图像描述](../Images/887c967437d73616105b065a2581c4ea.png)

所以当我触摸 tbltask touchBegan 方法开始工作并创建一个带有主题的标签时写在 superview 上，这是主视图，这里是 tbltask 所在的位置，如您所见。（底部是表任务）

现在当我打电话时touchesEnded 方法::

```
 - (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event
    {
        //<my stuff>

        [super touchesEnded:touches withEvent:event];
        NSString *taskname=[[NSString alloc] init];
         self.scrollEnabled=YES;
        if(app.sublable!=nil)
        {
           taskname=app.sublable.text;
            [app.sublable removeFromSuperview];
        }

        [taskdelegate droptask:self strtask:taskname];

    } 
```

这个主题放在上表中。
![在此处输入图像描述](../Images/e2487d4c082bd187f57c427b07919d0a.png)
它工作正常。但是当我从左到右或从右到左触摸 tbltask 时，发生了一些事情并且没有调用 touch end 方法，所以 sublable 不会像这样从视图中删除。像这样......![在此处输入图像描述](../Images/902e03c9c1fa5d5069d056b29c559388.png)

所以我做错了什么这个......是的，我在桌面触摸上调用触摸事件，你会注意到的。请帮助我解决这个问题...在此先感谢。

# network-programming - ZigBee 和蓝牙之间的通信

> ID：10240225
> 
> 赞同：0
> 
> 时间：2012-04-20T04:19:03.000
> 
> 标签：network-programming, bluetooth, communication, zigbee

[蓝牙](http://en.wikipedia.org/wiki/Bluetooth)和[ZigBee](http://en.wikipedia.org/wiki/ZigBee)设备根据网络层、安全算法等参数在其自己的家庭设备中工作或配对......我想编写一个应用程序来在 ZigBee 和蓝牙设备之间进行通信。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:38:30.910

您需要在两个网络之间创建一个网关。您的应用程序需要与 ZigBee 无线电和蓝牙无线电连接，加入每个网络，然后代理网络上设备之间的通信。

您打算桥接哪些设备？您的应用程序需要在 ZigBee 网络上显示为设备 X，在蓝牙网络上显示为设备 Y，并将接收到的数据转换为正确的格式以在其他网络上发送出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T04:45:14.900

如果它保持简单，这样的事情就可以工作。Zigbee 存在的模块，具有可配对的蓝牙节点。如果蓝牙配对设备靠近，Zigbee 会宣布自己为“存在”。当蓝牙配对设备不再存在时，Zigbee 设备变为“不存在”。

# objective-c - 如何让 CCScrollLayer 滚动？

> ID：10240229
> 
> 赞同：1
> 
> 时间：2012-04-20T04:19:19.920
> 
> 标签：objective-c, cocos2d-iphone, scroll, ccscrolllayer

我试图让 CCScrollLayer 在我的 cocos2d 应用程序中工作，但它不会滚动。

这是我所做的：

1.  使用 cocos2d 模板，创建了一个 iOS cocos2d 项目。添加了 CCScrollLayer 文件，并导入到我的 HelloWorldLayer 类中。添加了一个方法“layerWithLevelName”来创建图层。

2.  在 init 中，我创建了几个层用于测试。下面是我的 HelloWorldLayer 实现的代码。这是非常基本的，因为我只是想让一些图层滚动。

#

```
// HelloWorldLayer implementation
#import "HelloWorldLayer.h"
#import "CCScrollLayer.h"
@implementation HelloWorldLayer

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];    
    HelloWorldLayer *layer = [HelloWorldLayer node];    
    [scene addChild: layer];

    // return the scene
    return scene;
}

-(CCLayer*) layerWithLevelName:(NSString*)name number:(int)number screenSize:(CGSize)screenSize
{
    CCLayer *layer = [[[CCLayer alloc] init]autorelease];

    int largeFont = [CCDirector sharedDirector].winSize.height / 9;
    CCLabelTTF *layerLabel = [CCLabelTTF labelWithString:name fontName:@"Marker Felt" fontSize:largeFont];
    layerLabel.position =  ccp( screenSize.width / 2 , screenSize.height / 2 + 10 );
    layerLabel.rotation = -6.0f;
    layerLabel.color = ccc3(95,58,0);
    [layer addChild:layerLabel];

    return layer;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) 
    {

        // ask director the the window size        
        NSMutableArray* _layers = [[NSMutableArray alloc]init];
        CGSize screenSize = [CCDirector sharedDirector].winSize;  

        for (int i=0; i<3; i++)
        {
            int number = i;
            NSString* name = [[NSString alloc]initWithFormat:@"level%d",i];
            CCLayer* layer = [self layerWithLevelName:name number:number screenSize:screenSize];
            [_layers addObject:layer];

            [name release];
        }

        // Set up the swipe-able layers
        CCScrollLayer *scroller = [[CCScrollLayer alloc] initWithLayers:_layers 
                                                            widthOffset:230];
        [self addChild:scroller];
//        [scroller selectPage:0];

        [scroller release];
        [_layers release];

    }
    return self;
}

- (void) dealloc
{
    [super dealloc];
}
@end 
```

如果你运行代码，你会发现你可以看到levels/scroll layer --> 似乎已经正确加载了。但是你不能滚动。我忘了做什么？我究竟做错了什么？

编辑：我正在使用 cocos2d-iphone 1.1beta2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:35:04.903

看来这是 1.1beta2 的问题。

一个临时的解决方法是设置 scroller.stealTouches = NO;

我不知道这还有什么其他副作用。

编辑：

修复：使用更新的 CCTouchDispatcher 文件：

[https://github.com/cocos2d/cocos2d-iphone/blob/develop/cocos2d/Platforms/iOS/CCTouchDispatcher.m](https://github.com/cocos2d/cocos2d-iphone/blob/develop/cocos2d/Platforms/iOS/CCTouchDispatcher.m) 和对应的.h文件 [https://github.com/cocos2d/cocos2d-iphone/blob/develop/ cocos2d/Platforms/iOS/CCTouchDispatcher.h](https://github.com/cocos2d/cocos2d-iphone/blob/develop/cocos2d/Platforms/iOS/CCTouchDispatcher.h)

# jquery - jquery howto：验证 div 而不是表单

> ID：10240232
> 
> 赞同：2
> 
> 时间：2012-04-20T04:19:29.860
> 
> 标签：jquery, .net, validation

我正在使用 asp.net，所以它已经有一个`<fomr id="aspnetForm" name="aspnetForm">`.

我想要一个允许“单独提交多个表单”的页面。例如，我希望用户保存他们的简历。在“教育经验”页面上，我想允许用户的多条记录，每条记录都可以用ajax单独编辑和保存，但在ajax之前验证。

就像是：

```
<form id="aspnetForm" name="aspnetForm">
<div class="item_edit">
    1
    <input type="text" class="required" name="title" />
    <input type="text" class="required" name="description" />
    <input type="button" class="save" value="save" />
</div>
<div class="item_edit">
    2
    <input type="text" class="required" name="title" />
    <input type="text" class="required" name="description" />
    <input type="button" class="save" value="save" />
</div>
</form>

$("input.save").click(function(){
    var thediv = $(this).parent();
    if(thediv.valid()){
        //save with ajax
    }
    else{
        //show error, modal window preferred
    }
}) 
```

顺便说一句：如果有帮助，我正在使用backbone.js。

编辑：我的backbone.js 代码如下所示。以上`<div class="item_edit">`是从模板渲染的。

```
APIPortfolio.Views.OtherInfoCollection = Backbone.View.extend({
    el : "#otherinfo-container",
    template : "#otherinfo-template",
    initialize : function(options) {
    this.modelList = options.modelList.models;
    },
    render : function() {
        var self = this;
    $(self.el).empty();
    _.each(this.modelList, function(model) {
            $(self.el).append(Mustache.to_html($(self.template).html(), model.toJSON()));
    })
    return this;
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:38:41.443

实际上，您没有使用 Backbone.js。但是如果你决定这样做，你应该有一个代表你的表单的视图，它与一个模型实例相关联。在您的视图中，您应该有一个 events 属性来处理您的点击事件，如下所示：

```
var Thingy = Backbone.Model.extend({
  //implement me
})

var ThingyForm = Backbone.View.extend({
  events: function(){
    'input.save click': function(){
      if(this.model.isValid()){
          this.model.save()
      }
      else{
          //show error, modal window preferred
      }
    }
  }
})

thingy = new Thingy({attr1: 'val1', attr2: 'val2'})
thingyForm = new ThingyForm({model: thingy}) 
```

要将其连接到远程资源并连接模型的验证等，还有很多工作要做。但这应该可以帮助您入门。我可以建议以下两个资源：

[Backbone.js Documentation](http://documentcloud.github.com/backbone/) - 全面，Backbone 非常轻量级，你大概可以在一个小时内阅读完整的源代码。

[Backbone Fundamentals 免费电子书](https://github.com/addyosmani/backbone-fundamentals)- 该书的前四章或五章将帮助您入门。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:30:08.370

为什么不使用 jQuery 验证？您可以向 html 元素添加属性，并通过一次调用验证所有这些属性。

这是它的链接......似乎它可以解决问题[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:54:38.670

假设您的“item_edit”div 中可能有更多类型的表单元素，您可以为 div 中的每个表单元素添加一个类，并将其称为“item”。所以'item_div'现在看起来像：

```
<div class="item_edit">
    1
    <input type="text" class="required item" name="title" />
    <input type="text" class="required item" name="description" />
    <input type="button" class="save" value="save" />
</div> 
```

我们这样做是为了不假设“item_edit”中只有“标题”和“描述”

您可以定义一个以这种方式保存表单的部分元素的函数：

```
function savePartial(itemEditDiv)
{
    var bool = true;
    $(itemEditDiv).find('item').each(function(){
        var val = $(this).val()    //this is the value of the 'title' or 'description' etc
        //code to check if the value is valid (set bool = false in case its not valid)
    });
    return bool;
} 
```

现在您需要做的就是向“保存”按钮添加一个单击事件处理程序来调用此 savePartial 函数：

```
$("input.save").click(function(){
    var thediv = $(this).parent();
    if(savePartial(thediv))
    {
         //success message
    }
    else
    {
        //something went wrong
    }
}); 
```

此外，您可以将“msg”参数添加到“项目”字段并捕获数组中无效项目的消息以显示错误消息。

# ios - 使用带有颠覆的xcode时无法更新

> ID：10240235
> 
> 赞同：1
> 
> 时间：2012-04-20T04:20:00.153
> 
> 标签：ios, xcode

我在使用 xcode 和 subversion 时遇到了一些问题：

1：右键源文件，选择“Source Control -> Update Selected Files...”，会显示“操作无法执行，因为选择无效”。有时没问题，但大多数时候，它会显示上述消息。在 Organizer 中，没问题。

2：如果出现更新对话框（可以选择更新哪个文件的对话框），“更新”按钮被禁用，或者点击无效，即使我取消选中冲突文件。在 Organizer 中，也会发生同样的问题。

有人给我一些帮助吗？

# javascript - 如何设置 Google Chrome 语音输入控件的麦克风样式

> ID：10240236
> 
> 赞同：4
> 
> 时间：2012-04-20T04:20:01.017
> 
> 标签：javascript, html, css, google-chrome, styles

谷歌浏览器有以下输入控件：

![在此处输入图像描述](../Images/8a734c30b19eee74eba7879a21bfb72e.png)

关于如何使用它的更多信息可以在[这里](http://www.labnol.org/software/add-speech-recognition-to-website/19989/)找到。

我需要使麦克风更大。如果我可以为麦克风使用自定义图像，那就太好了。我发现调整输入元素的宽度和高度并不会使麦克风变大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T20:57:11.707

```
#speech {
  -webkit-transform: scale(4,4)
} 
```

这就是我的工作：

并且为此的html是：![在此处输入图像描述](../Images/0b914a60597293a873bd3dfd6e8b132c.png)

```
<html>
    <body>
        <img src="Capture.JPG" alt="Smiley face" width="80" style="margin-top:70px; margin-left:120px; position:absolute;"  />
        <input style="-webkit-transform: scale(8,8); opacity:.001; width:50px; border:none; margin-left:00px; margin-top:100px;"  type="text" speech="speech" x-webkit-speech="x-webkit-speech"  />          
    </body>
</html> 
```

![图片](../Images/da8e413df6b5312ef5a03213460955b9.png)

无论如何，现在我可以使用这些事件：

```
 onspeechchange="processspeech();"  
 onwebkitspeechchange="processspeech();" 
```

将文本放置在适当的位置...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:53:29.670

目前，增加麦克风尺寸的唯一方法是增加`font-size`输入元件的尺寸。

HTML：

```
<input type="text" id="speech" value="some text here" x-webkit-speech /> 
```

CSS：

```
#speech {
  font-size: 20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T07:28:03.120

对于仍在寻找这个的人：我设法通过将语音元素的不透明度设置为 0 来设置它的样式，然后用你可以自己设置样式的可见元素覆盖它。然后，当您单击覆盖的元素时，我使用 jQuery 触发了对语音元素的单击 :) 这样您甚至可以使用自己的图像！

作为说明，据我所知，将来会有语音元素的 W3C 规范的编辑版本，这应该让开发人员对外观有更多的控制（来源： http: [//www.adobe.com /devnet/html5/articles/voice-to-drive-the-web-introduction-to-speech-api.html](http://www.adobe.com/devnet/html5/articles/voice-to-drive-the-web-introduction-to-speech-api.html) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T14:13:04.960

在 Webkit 中，您可以输入[shadow DOM](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)来更改默认浏览器元素的布局。这就是我使用来自[icomoon.io](http://icomoon.io/app/)的自定义图标字体的方法（字体“Font Awesome”有一个不错的麦克风），但您当然也可以在`input::-webkit-input-speech-button`元素本身上使用任何背景图像。

```
input::-webkit-input-speech-button {
  -webkit-appearance: none; /* Important to undo default styling. */
  height: 100%;
  padding: 0 1em;
  cursor: pointer;

  &:before {
    content: '\e601';
    font-family: icomoon;
  }
} 
```

# c++ - 从二进制文件 C++ 中读取行

> ID：10240237
> 
> 赞同：2
> 
> 时间：2012-04-20T04:20:01.160
> 
> 标签：c++, binary

我正在尝试读取二进制文件并将其存储到数据库中，但是当我尝试将字符串类型存储到数据库中时出现分段错误。准确的说，错误发生在push函数内部：

```
new_node->name = name; 
```

我似乎无法在网上找到一个好的解决方案，而且我漫无目的地尝试不同的东西......任何帮助将不胜感激。

```
// 
// loadbin.cpp
//

#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

#include "studentsDB.h"

int main( int argc, char* argv[] ) {

    string name;
    string id;
    int numCourses;
    int crn;
    vector<int> crns;

    studentsDB sDB;
    studentsDB::node *students = 0;

    int in = 1;

    if( argc > 1 ) {

        ifstream infile(argv[in], ios::binary );

        while( !infile.eof() ) {
            infile.read( ( char* )(name.c_str()), sizeof( string ) );
            infile.read( ( char* )(id.c_str()), sizeof( string ) );
            infile.read( ( char* ) &numCourses, sizeof( int ) );

            do{
                crns.push_back( crn );
            }
            while( infile.read( ( char* ) &crn, sizeof( int ) ) );

            sDB.push( &students, (string)name, (string)id, numCourses, crns );
        }
        //sDB.printList( students );
    }

    else
        cout << "Not enough argument" << endl;
} 
```

```
void studentsDB::push( struct node** head_ref, string name, string id,
                       int numCourses, vector<int>crns ) {

    struct node* new_node = ( struct node* ) malloc(sizeof(struct node));
    new_node->name = name;
    //new_node->id   = id;
    new_node->numCourses = numCourses;
    //new_node->crns = crns;
    new_node->next = (*head_ref);    
    (*head_ref)    = new_node;
    size++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:22:56.043

这段代码很糟糕：

```
 infile.read( ( char* )(name.c_str()), sizeof( string ) ); 
```

您不能写入由 返回的缓冲区`c_str()`，它不能保证足够长来保存您的结果。 `sizeof(string)`顺便说一句，与字符串可以容纳的大小无关。您需要分配自己的`char[]`缓冲区来保存 的结果`infile.read`，然后转换为 a `string`。

# python - Python - 入门

> ID：10240241
> 
> 赞同：2
> 
> 时间：2012-04-20T04:20:44.810
> 
> 标签：python, syntax, syntax-error

我刚刚开始使用 Python 并编写了一个简单的外围程序。但是，每当我在终端中键入 python perimeter.py 时，我都会收到以下错误，我不知道如何解决它。

```
>>> python perimeter.py
File "<stdin>", line 1
python perimeter.py
               ^ 
```

SyntaxError：无效的语法

那是什么问题？我如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T04:22:45.800

您输入`python perimeter.py`命令 shell 以启动 Python 解释器。您无需*在*Python 解释器中键入它。

如果您确实需要从 Python 解释器中运行脚本，请执行`execfile('perimeter.py')`.

# c# - DotNetOpenAuth ResourceServer 从 Principal 获取用户 ID

> ID：10240242
> 
> 赞同：0
> 
> 时间：2012-04-20T04:20:53.250
> 
> 标签：c#, asp.net-mvc, dotnetopenauth

我创建了一个项目，该项目使用 DotNetOpenAuth 来同时实现 OAuth2 AuthorizationServer 和 ResourceServer。

我想要做的是使用 OAuth 作为伪身份验证，其中客户端由 OAuth 授权以获取作为用户配置文件的关联资源。

在 ResourceServer 上，我可以使用它`resourceServer.VerifyAccess( request, out result );` 来成功返回 IPrincipal。

我的问题是：在 ResourceServer（与授权服务器相同）上，如何从 Principal（或我有权访问的任何其他内容）获取用户/用户 id/用户配置文件。主体名称看起来像一个 base64 编码的字符串。但这似乎与我可以访问的任何其他内容都不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:54:41.233

DotNetOpenAuth 的`ResourceServer.VerifyAccess`方法为您提供了一个主体，其名称是授权访问令牌的用户，其角色是授予该令牌的范围。

如果您看到一些 base64 编码的字符串看起来像是主体名称，听起来您应该仔细检查您的代码。我建议您从您调用的授权服务器代码中`AuthorizationServer.PrepareApproveAuthorizationRequest`传入授权用户名的那一点开始。确保它应该是这样的。

由于令牌已加密和签名，因此它在传输过程中被损坏的可能性很小。

# android - 共享偏好 Android 存储数据

> ID：10240243
> 
> 赞同：0
> 
> 时间：2012-04-20T04:21:09.513
> 
> 标签：android, store

我在使用共享首选项存储数据时遇到问题。如果我有以下代码并尝试运行它，它会崩溃。我不知道为什么。

```
public class Favorites extends Activity{

    private static final String TAG_NAME = "title";
    private static final String TAG_URL = "href";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favorites);

        Intent in = getIntent();
        TextView favName = (TextView) findViewById(R.id.textView1);

        String FILENAME = "settings";
        String string = "hello world!";

        SharedPreferences pref = getSharedPreferences("Preference",
                MODE_WORLD_READABLE);
        SharedPreferences.Editor editor = pref.edit();
        editor.putBoolean("keyBoolean", true);
        editor.putFloat("keyFloat", 1.0f);
        editor.putInt("keyInt", 1);
        editor.putLong("keyLong", 1000000L);
        editor.putString("keyString", "Hello Android");
        editor.commit();

        boolean dataFromPrefBool = pref.getBoolean("keyBoolean", false);
        float dataFromPrefflaot = pref.getFloat("keyFloat", 0.0f);
        int dataFromPrefInt = pref.getInt("keyInt", 0);
        long dataFromPrefLong = pref.getLong("keyLong", 0);
        String dataFromPrefString = pref.getString("keyString", null);

        favName.setText(dataFromPrefInt);
} 
```

为什么什么都没有发生？这些只是虚拟值，但仍然没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:28:10.973

改变

```
SharedPreferences pref = getSharedPreferences("Preference",
            MODE_WORLD_READABLE); 
```

至

```
 SharedPreferences pref = getSharedPreferences("Preference",
            MODE_WORLD_WRITABLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:23:57.827

试试这个，也许是由于空指针异常。我不确定。

```
public class Favorites extends Activity{

    private static final String TAG_NAME = "title";
    private static final String TAG_URL = "href";

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favorites);

        Intent in = getIntent();
        TextView favName = (TextView) findViewById(R.id.textView1);

        String FILENAME = "settings";
        String string = "hello world!";

        SharedPreferences pref = getSharedPreferences("Preference",
                MODE_WORLD_READABLE);
        SharedPreferences.Editor editor = pref.edit();
        editor.putBoolean("keyBoolean", true);
        editor.putFloat("keyFloat", 1.0f);
        editor.putInt("keyInt", 1);
        editor.putLong("keyLong", 1000000L);
        editor.putString("keyString", "Hello Android");
        editor.commit();

        boolean dataFromPrefBool = pref.getBoolean("keyBoolean", null);
        float dataFromPrefflaot = pref.getFloat("keyFloat", null);
        int dataFromPrefInt = pref.getInt("keyInt", null);
        long dataFromPrefLong = pref.getLong("keyLong", null);
        String dataFromPrefString = pref.getString("keyString", null);

        if(dataFromPrefInt==null)
        {
            favName.setText("");
        }
        else
        {
            favName.setText(dataFromPrefInt);
        }
    }
} 
```

# data-structures - 二叉搜索树的 maxDepth 有哪些用途？

> ID：10240246
> 
> 赞同：0
> 
> 时间：2012-04-20T04:22:00.777
> 
> 标签：data-structures, binary-search-tree

我一直在思考找到二叉搜索树的最大深度的一些原因是什么，以及该函数的最佳用途是什么。

到目前为止，我想到实现它的一个原因是保持数据结构的效率。如果最大深度路径变得比其他可能的路径长得多，尤其是与最小深度路径相比，则在遍历该路径时可能会对性能产生更明显的影响，尤其是考虑到递归调用使用大量内存.

最大深度函数还有哪些其他原因？提前感谢您阅读我的问题并做出回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:43:28.037

这就像问如何在现实生活中使用加法......

这实际上取决于应用 maxDepth 操作的问题。例如，最大深度可能值得用于​​估计树内可以存在的最大元素数。这可能是分配内存的快捷方式。在[前缀树](http://en.wikipedia.org/wiki/Trie)中，找到 maxDepth 将为您提供最长单词的长度。如果树代表您的祖先树，则查找 maxDepth 将为您提供祖先的总数。这个名单还在继续……

# objective-c - 当有人在 cocos2D 中接受和邀请时的游戏中心邀请处理程序

> ID：10240247
> 
> 赞同：1
> 
> 时间：2012-04-20T04:22:37.580
> 
> 标签：objective-c, cocos2d-iphone, game-center, invite

如果两个玩家在同一个场景中，你可以邀请他们，当他们接受时，它会将他们添加到玩家列表中。

我没有工作，我不知道该怎么做是当一个玩家不在应用程序中而另一个玩家在应用程序中时，加载正确的场景，并从其中一个`CCScene`s 发送邀请请求。

我不知道是否有办法做到这一点，或者这是否是最好的方法。我对此的想法是，我想通过邀请处理程序将邀请玩家所在的场景的名称发送给他们邀请的人。我假设`didFinishLaunchingWithOptions`如果它们不在应用程序中，我将不得不以某种方式将信息发送到应用程序，但如果它们在，我将在其他地方处理它。我一直在到处寻找，没有遇到任何东西。如果你们知道如何做到这一点或更好的方法，我将非常感谢您的帮助。

这是我用于邀请处理程序的代码：

```
[GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
    UIViewController *topLevelViewController = self.presentingViewController;
    bool isInviter = NO;

    if (acceptedInvite) {
        isInviter = NO;
        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite] autorelease];
        mmvc.matchmakerDelegate = self;

        if ([topLevelViewController modalViewController] != nil)
            [topLevelViewController dismissModalViewControllerAnimated:NO];

        [topLevelViewController presentModalViewController:mmvc animated:YES];
    } else if (playersToInvite) {
        isInviter = NO;
        GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
        request.minPlayers = 2;
        request.maxPlayers = 2;
        request.playersToInvite = playersToInvite;

        GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
        mmvc.matchmakerDelegate = self;

        if ([topLevelViewController modalViewController] != nil)
            [topLevelViewController dismissModalViewControllerAnimated:NO];

        [topLevelViewController presentModalViewController:mmvc animated:YES];
    }
}; 
```

# c - read() 的包装函数无法编译

> ID：10240255
> 
> 赞同：0
> 
> 时间：2012-04-20T04:23:28.587
> 
> 标签：c, linux, system-calls

我正在尝试在 Linux 下为 read() 编写一个包装函数。

请放轻松，因为这是我第一次使用 Wrappers :)

给定`my_wrappers.c`文件的代码：

```
#include "my_wrappers.h"
#include <unistd.h>
#include <sys/types.h>

ssize_t my_read (int fd, void *buf, size_t count)
{
  long ret;
  extern int errno;

  __asm__ __volatile__ ("pushl %%ebx\n\t"
                        "movl %%esi,%%ebx\n\t"
                        "int $0x80\n\t"
                        "popl %%ebx"
                      : "=a" (ret)
                      : "0" (SYS_read), "S" ((long) fd),
                        "c" ((long) buf) "d" ((long) count): "bx");
  if (ret >= 0)
  {
    return (int) ret;
  }
  errno = -ret;
  return -1;
} 
```

和`my_wrappers.h`文件：

```
#ifndef __MY_WRAPPERS_H_
#define __MY_WRAPPERS_H_

#include <unistd.h>
#include <sys/types.h>

int my_open(const char *pathname, int flags, mode_t mode);
ssize_t my_write(int fd, const void *buf, size_t count);
ssize_t my_read(int fd, void *buf, size_t count);
int my_close(int fd);

pid_t my_fork(void);

#endif 
```

我只允许使用调用`libc`包装器，即，我不允许调用 open()、read() 等。

这段代码有什么问题？也许是因为我没有使用系统调用表的编号？

来自 Eclipse 的错误：-`‘SYS_read’ undeclared (first use in this function)`

问候

罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:46:25.160

你需要`#include <syscall.h>`或可能`#include <sys/syscall.h>`

# h2 - 如何通过 1 条 sql 语句为 H2 数据库删除和添加多个约束

> ID：10240258
> 
> 赞同：0
> 
> 时间：2012-04-20T04:23:43.313
> 
> 标签：h2

我正在研究 H2 数据库，我遇到了这个问题 - 删除一个约束很好，我可以使用这个语句

```
alter table customer drop constraint if exists fk_customer_order ; 
```

添加一个约束也很好，我可以使用这个语句。

```
alter table customer add constraint fk_customer_order foreign key (order_id) references order (id) on delete cascade on update cascade; 
```

但问题是，在客户表中我有更多的外键，我想在一个查询语句中删除它们。像这样的东西

```
alter table customer drop constraint fk_customer_order 
drop constraint fk_customer_information
drop constraint .... 
```

但这似乎不能在 h2 数据库中完成，任何人都可以告诉我是否可以通过 1 个 sql 语句添加或删除多约束？欢迎任何答案，我非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:50:55.807

我认为这是不可能的。为什么不使用多个语句？

# c++ - 运算符作为函数指针

> ID：10240259
> 
> 赞同：8
> 
> 时间：2012-04-20T04:23:44.520
> 
> 标签：c++, operator-overloading, function-pointers, functor

我想让一个类`operator()`根据类中设置的选项实现几种不同的方式。因为这会被调用很多次，所以我不想使用任何分支。理想情况下，这`operator()`将是一个可以使用方法设置的函数指针。但是，我不确定这实际上会是什么样子。我试过：

```
#include <iostream>

class Test {
public:
  int (*operator())();

  int DoIt1() {
    return 1;
  }

  int DoIt2() {
    return 2;
  }

  void SetIt(int i) {
    if(i == 1) {
      operator() = &Test::DoIt1;
    } else {
      operator() = &Test::DoIt2;
    }
  }
};

int main()
{
  Test t1;

  t1.SetIt(1);

  std::cout << t1() << std::endl;

  t1.SetIt(2);

  std::cout << t1() << std::endl;

  return 0;
} 
```

我知道如果我创建另一个函数指针并从函数中调用它，它将`operator()`起作用。但是是否可以让`operator()`函数本身成为函数指针？类似于我发布的内容（无法编译）？

上面的代码给出：

> test.cxx:5:21: 错误: 'operator()' 声明为非函数
> 
> test.cxx：在成员函数'void Test::SetIt(int)'中：
> 
> test.cxx:17:16: 错误: 'operator()' 未定义
> 
> test.cxx:19:16: 错误: 'operator()' 未定义
> 
> test.cxx：在函数'int main()'中：
> 
> test.cxx:30:19: error: no match for call to '(Test) ()'</p>
> 
> test.cxx:34:19: error: no match for call to '(Test) ()'</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T04:36:14.467

您的班级需要以某种方式记住要使用的函数指针。将其存储为类成员：

```
class Test
{ 
public:
    Test() : func(0) {}

    int operator()() {
        // Note that pointers to Test member functions need a pointer to Test to work.
        return (this->*func)(); // undefined behavior if func == 0
    }

    void SetIt(int i) { 
        if(i == 1) { 
            func = &Test::DoIt1; 
        } else { 
            func = &Test::DoIt2; 
        } 
    }

private:
    int DoIt1() { 
        return 1; 
    } 

    int DoIt2() { 
        return 2; 
    } 

    // Typedef of a pointer to a class method.
    typedef int (Test::*FuncPtr)(); 
    FuncPtr func; 
}; 
```

但是，在您开始执行此操作之前，请先*分析您的代码*，并查看分支通过`switch`or`if`是否实际上是一个瓶颈（它可能不是！）。现代处理器具有非常违反直觉的性能特征，因此编译器可能能够生成比您想象的更好的代码。确保分支实际上对您来说成本太高的唯一方法是分析您的代码。（通过“分析”，我的意思是“运行精心设计的实验”，而不是“在没有测试的情况下提出预感”。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:36:57.877

您可以使您`operator()`的内联函数调用另一个指针。优化器应该完全消除额外的间接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T04:46:19.933

@In silico 提供了一种解决方案，它在 C++03 和 C++11 中都有效。

这是仅适用于 C++11 的另一种解决方案：

```
std::function<int(Test*)>  func;

func = &Test::DoIt1; 

func(this); //this syntax is less cumbersome compared to C++03 solution 
```

[快速在线完整演示](http://ideone.com/l88eB)

# jquery - jQuery检查表单数据是否相等

> ID：10240261
> 
> 赞同：0
> 
> 时间：2012-04-20T04:23:51.620
> 
> 标签：jquery

> **可能重复：**
> [使用 jQuery 比较两个数组](https://stackoverflow.com/questions/1773069/using-jquery-to-compare-two-arrays)

我必须每隔 30 秒通过 ajax 将表单数据发送到服务器。现在我希望在客户端检查它，并且只有在表单有任何变化的情况下才会点击 ajax。我在用：

```
var lastData = "";
function saveFormInDB(){
    var $form = $("#fb_divBl0ck1").closest('form');
    var isSame = false;
    data = $form.serializeArray();
    if(lastData == ""){
        lastData = data;
    }else{
        if(lastData == data){
            isSame = true;
        }
        lastData = data;
    }
    if(!isSame){
        jqxhr = $.post("/SPSKMEForm/FormSaveServlet", data)
        .success(function() {
            if(jqxhr.responseText != ""){
                alert(jqxhr.responseText);
                alert($("#fixedFooter"));
                alert($("#fixedFooter").html());
                $("#fixedFooter").text(jqxhr.responseText).css("display", "");
                $("#fixedFooter").fadeOut("slow");
            }
        });
    }
} 
```

但`isSame`总是变得虚假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:25:52.693

那是因为你的变量**lastData**被认为是一个字符串，而**数据**是一个对象。因此，您的检查将永远失败，并且您将永远失败`isSame = false`。

编辑：

> .serializeArray **()**方法创建一个 JavaScript**对象数组**，准备好被编码为 JSON 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:35:30.090

我会以不同的方式处理这个问题：

在您的表单输入标签中添加一个包含已保存（原始）值的属性：

```
<input type="text" name="name" value="" original="Brian"> 
```

现在在您的 jQuery 中，检查值是否匹配：

```
if($('[name="name"]').attr('value') == $('[name="name"]').attr('original')) {
  //perform .post here
  //post success sets attr original to posted value
 } 
```

每次提交数据时，请务必更新“原始”属性。

# facebook - Facebook Feed 对话框出现奇怪错误

> ID：10240265
> 
> 赞同：4
> 
> 时间：2012-04-20T04:25:00.993
> 
> 标签：facebook

我们遵循此处显示的 Facebook 示例代码——这在我们的应用程序中有效——如果您单击锚点“a”链接，它的 onclick 处理程序将打开一个新窗口并出现 facebook 提要对话框：

```
 <a class="fbShareToWall" onClick='window.open("https://www.facebook.com/dialog/feed?app_id=123050457758177
       &link=https://developers.facebook.com/docs/reference/dialogs/
       &picture=http://fbrell.com/f8.jpg
       &name=Facebook%20Dialogs&caption=Reference%20Documentation
       &description=Using%20Dialogs%20to%20interact%20with%20users.
       &redirect_uri=http://www.example.com/response");'>Share on Facebook</a> 
```

上面的代码运行良好，并显示了 Feed 对话框的 Facebook 示例。

这是我们的代码 - 我们收到错误消息：

**“oursite.com 发生错误。请稍后再试。API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：redirect_uri 不属于应用程序。**

注意：这是一个测试版站点，我们在其域名与下面的“OUR_APP_ID”关联的域名不同的登台服务器上运行它：

```
 <a class="fbShareToWall" onClick='window.open("https://www.facebook.com/dialog/feed?app_id="OUR_APP_ID"
             &link=https://www.oursite.com&name=Please%20work
             &caption=Just%20work
             &description=Comeon%20work
             &redirect_uri=http://www.oursite.com");'>Share on Facebook</a> 
```

（注意：我们的代码有数字 FB app_id，而不是“OUR_APP_ID”）

“OUR_APP_ID”已“连接”到我们的生产服务器的域名，我们有点想知道这是否是问题所在。

编辑：“我们有点想知道这是否是问题所在”，因为上面的代码在我们的暂存网站 www.foo.com 上——我们上面的代码使用了一个 app_Id，我们连接到我们的生产域名 'www.oursite.com '。

我们想知道 Facebook 在收到上述显示 Feed 对话框的请求后是否在自言自语

**“好的，这个网站 www.foo.com 正在尝试显示一个 Feed 对话框——但 app_id 是针对 www.oursite.com 的——所以我们将弹出一个 191 错误”**

我们测试了这个理论。我们更改了顶部的示例 FB 提要对话框代码——我们更改了示例代码的应用程序 ID 中的一些数字。

我们现在使用以前工作的示例 Feed 对话框代码收到一条错误消息，但这是一条完全不同的错误消息。

关于这个“191”redirect_uri 错误信息有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T04:40:10.087

url 格式适用于我的应用程序

```
https://www.facebook.com/dialog/feed?app_id=135669679827333&link=https://anotherfeed.com&name=testing&caption=Just%20testing&description=the%20test&redirect_uri=http://anotherfeed.com 
```

检查以确保您的应用程序 ID 正确，并且您重定向到在您的应用程序设置中设置的域。

# ios - 从 App Store 以外的地方下载 Xcode

> ID：10240275
> 
> 赞同：42
> 
> 时间：2012-04-20T04:27:34.983
> 
> 标签：ios, xcode, download, xcode10, xcode9.4

我的 Mac 出现问题，我基本上无法从 App Store 下载任何内容，因为当我尝试登录时，它无法验证我的设备。我尝试了在网上找到的所有解决方案，并将其带到 Apple Store，他们在那里工作了一个小时，但仍然无法解决。

我可以从 App Store 以外的任何地方获取当前稳定/测试版的 Xcode 吗？可以让朋友下载然后给我吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-20T04:31:38.370

我会给你一个更好的。Xcode 4.3.2 可供所有开发人员直接从苹果下载。只需转到[此处](https://developer.apple.com/xcode/)，单击[查看下载](https://developer.apple.com/downloads/)链接，登录，您就可以找到几乎所有现代版本的 Xcode 和其余的 DVT。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-14T13:14:48.407

您可以从以下链接下载具有付费（高级）Apple 开发者帐户的 Xcode 9/10。

> **Xcode 10**
> 
> *   [Xcode 10 - Beta 6](https://download.developer.apple.com/Developer_Tools/Xcode_10_Beta_6/Xcode_10_Beta_6.xip)
>     - [(命令行工具 (Xcode 10 Beta 6) - 适用于 macOS 10.14)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.14_for_Xcode_10_Beta_6/Command_Line_Tools_macOS_10.14_for_Xcode_10_Beta_6.dmg)
>     - [(命令行工具 (Xcode 10 Beta 6) - 适用于 macOS 10.13)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_10_Beta_6/Command_Line_Tools_macOS_10.13_for_Xcode_10_Beta_6.dmg)
> 
> **Xcode 9**
> 
> *   [Xcode 9.4.1](https://developer.apple.com/download/more/)
>     [-（命令行工具 (Xcode 9.4.1) - 适用于 macOS 10.13）](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.4.1/Command_Line_Tools_macOS_10.13_for_Xcode_9.4.1.dmg)
> *   [Xcode 9.4](https://developer.apple.com/download/more/)
>     [-（命令行工具 (Xcode 9.4) - 适用于 macOS 10.13）](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.4/Command_Line_Tools_macOS_10.13_for_Xcode_9.4.dmg)
>     
>     
> *   [Xcode 9.3.1](https://developer.apple.com/download/more/)
>     
>     
> *   [Xcode 9.3](https://developer.apple.com/download/more/)
>     [-（命令行工具 (Xcode 9.3) - 适用于 macOS 10.13）](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.3/Command_Line_Tools_macOS_10.13_for_Xcode_9.3.dmg)
>     
>     
> *   [Xcode 9.2](https://developer.apple.com/download/more/)
>     [- (命令行工具 (Xcode 9.2) - 适用于 macOS 10.13)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.2/Command_Line_Tools_macOS_10.13_for_Xcode_9.2.dmg)
>     [- (命令行工具 (Xcode 9.2) - 适用于 macOS 10.12)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.12_for_Xcode_9.2/Command_Line_Tools_macOS_10.12_for_Xcode_9.2.dmg)
> *   [Xcode 9.1](https://developer.apple.com/download/more/)
>     [- (命令行工具 (Xcode 9.1) - 适用于 macOS 10.13)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.1/Command_Line_Tools_macOS_10.13_for_Xcode_9.1.dmg)
>     [- (命令行工具 (Xcode 9.1) - 适用于 macOS 10.12)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.12_for_Xcode_9.1/Command_Line_Tools_macOS_10.12_for_Xcode_9.1.dmg)
> *   [Xcode 9.0.1](https://developer.apple.com/download/more/)
>     [- (命令行工具 (Xcode 9.0.1) - 适用于 macOS 10.13)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9.0.1/Command_Line_Tools_macOS_10.13_for_Xcode_9.0.1.dmg)
>     [- (命令行工具 (Xcode 9.0.1) - 适用于 macOS 10.12)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.12_for_Xcode_9.0.1/Command_Line_Tools_macOS_10.12_for_Xcode_9.0.1.dmg)
>     
>     
> *   [Xcode 9.0](https://developer.apple.com/download/more/)
>     [- (命令行工具 (Xcode 9) - 适用于 macOS 10.12)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.12_for_Xcode_9/Command_Line_Tools_macOS_10.12_for_Xcode_9.dmg)
>     [- (命令行工具 (Xcode 9) - 适用于 macOS 10.13)](https://download.developer.apple.com/Developer_Tools/Command_Line_Tools_macOS_10.13_for_Xcode_9/Command_Line_Tools_macOS_10.13_for_Xcode_9.dmg)
>     
>     
> 
> 对于非高级帐户/苹果 ID：（从下面的链接下载没有付费（高级）Apple 开发者帐户的 Xcode 9.3.x）
> 
> *   [Xcode 9.4.1（Mac App Store 链接）](https://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)

[苹果下载门户](https://developer.apple.com/download/)

# jquery - 如何设置 jquery 日期选择器日历图标触发图像的大小和位置

> ID：10240278
> 
> 赞同：22
> 
> 时间：2012-04-20T04:28:12.923
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用jquery日期选择器文本框附近的日历图标触发图像默认情况下位于顶部我想将图像大小（高度）设置为与文本框高度相同请给我一些建议我的代码是

```
$(#textbox1).datepicker({
    showOn: "button",
    buttonImage: "calendar_1.png",
    buttonImageOnly: true
)}; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-20T04:41:33.327

[用firebug](http://getfirebug.com/)检查元素，我得到了这个：

```
<img class="ui-datepicker-trigger" src="http://xxxxx/officeprime/assets/img/calendar.gif" alt="..." title="..."/> 
```

例如： `button.ui-datepicker-trigger img`

然后，您可以使用该 CSS 类`ui-datepicker-trigger`。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-20T04:41:18.573

在您的页面中添加自定义 CSS

```
<style>
.ui-datepicker-trigger { position:relative;top:{}px ;right:{}px ; height:{}px }
 /* {} is the value according to your need */
</style> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-05-26T10:45:42.560

您可以使用 jQuery 编辑类 .ui-datepicker-trigger 但在 datepicker 函数之后进行编辑很重要。

例子：

```
$(#textbox1).datepicker({
        showOn: "button",
        buttonImage: "calendar_1.png",
        buttonImageOnly: true )};

$(".ui-datepicker-trigger").css("margin-bottom","-6px"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-26T21:33:53.737

这些都不适合我。离开就绪功能时，jQuery 似乎设置了图像按钮的高度属性。因此，如果您尝试在 ready 函数中设置 height 属性，它会被覆盖为 26px。所以我创建了一个单独的函数在body标签的onload事件中运行。它将按钮的高度属性更新为我想要的，如下所示：

```
// sample jQuery datepicker button tag: <img style="margin: 0px; padding: 2px; height: 26px; vertical-align: bottom;" class="ui-datepicker-trigger" >
var oDateCell = oTableRow.cells[2];
var sDateCellHTML = oDateCell.innerHTML;
var sRevisedHTML = sDateCellHTML.replace("height: 26px;", "height: 13px;");
oDateCell.innerHTML = sRevisedHTML; 
```

我对此做了更多的工作，我发现上面的代码有一个错误。它会导致单击事件失败，并且单击图像时不显示日历。我不知道为什么，但我找到了一种更好的方法。上面的方法是一种笨拙的（懒惰的？）改变风格的方法。正确的方法是这样的：

```
 var oTableRow = oTable.rows[iRow];
            if (oTableRow.cells.length > 2)
            {
                var oDateCell = oTableRow.cells[2];
                if (oDateCell.childNodes.length > 1)
                {
                    var oImage = oDateCell.childNodes[1];
                    oImage.style.height = "13px";
                }
            } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-13T07:20:03.407

应用这个 CSS：

```
.ui-datepicker-trigger {
   position: absolute;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T11:40:43.513

如果您使用自己的个性化图像作为日历图标，那么您可以简单地制作所需大小的图像。就我而言，我的输入框的高度是`24px`，图标大小是`16X16`. 我只是编辑了图像的大小并制作了它`24X24`，问题就解决了。

# c - 如何为 C 配置 Eclipse？

> ID：10240279
> 
> 赞同：0
> 
> 时间：2012-04-20T04:28:25.900
> 
> 标签：c, eclipse

我为 C/C++ 开发人员安装了一个 ecrise。但无法编译代码。它没有`#include <stdio.h>`说：未解决的包含`<stdio.h>`。我想知道我是否需要进行一些额外的配置。我的操作系统是 Windows 7 32 位。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:38:34.913

好吧，如果这些基本的东西不起作用，那么您一定错过了安装适当的工具链。仅仅下载 Eclipse 和 CDT 不会“做”它。所以安装一些可用的编译器，链接器等。

# javascript - 使用 Web 视图在 xcode 控制台上捕获 JS 日志

> ID：10240281
> 
> 赞同：3
> 
> 时间：2012-04-20T04:28:38.637
> 
> 标签：javascript, iphone, ios, uiwebview, console

任何人都可以帮助我在 xcode 控制台上捕获 JS 日志消息，JS 必须在 Web 视图（UIWebView）上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:34:59.170

要从一个 webview 接收消息，请使用自定义 url 方案，就像“log:yourlogmsg”一样

js代码

```
window.location = "log:yourlogmsg"; 
```

利用

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

并返回假；

# php - 将 display:none 附加到后续 li on loop

> ID：10240284
> 
> 赞同：0
> 
> 时间：2012-04-20T04:29:00.173
> 
> 标签：php, jquery

我们有一个滑块，我们想使用它。死简单的东西。但我需要它变得更有活力。

我们有一个博客卷，它在 php 循环上运行和显示，基本上.. 如果我们将循环设置为 6.. 它会生成 6 组 div。

现在我的想法是，将显示博客文章的 DIV 放在一个滑块中，然后我们可以在每个 div 刷新时显示后续文章.. 有点事情.. 我相信你知道我的意思。

我做了一个简单的小提琴...... [http://jsfiddle.net/ozzy/yEB4V/](http://jsfiddle.net/ozzy/yEB4V/)

本质上，我们只需要一个`<li> to </li>`

原因是，我们可以在 LI 标记周围使用我们的 php，以便循环正常工作，并且幻灯片会相应地更新..

我遇到的问题是，第一次触发 LI 时，它必须**没有 display:none**，原因很明显.. LI 标签的所有其他后续出现都被隐藏了。

正如您从小提琴中看到的那样，除了第一个 LI 标签外，所有的 LI 标签都没有显示，所以它首先显示，然后循环到下一个，每个标签都被更新。

脚本在这里；

```
var slider = function() {
    $('#testimonials .slide').filter(':visible').fadeOut(1000,function(){
        if($(this).next('li.slide').size()){
            $(this).next().fadeIn(2000);
        }
        else{
            $('#testimonials .slide').eq(0).fadeIn(1000);
        }
    });
};
var interval = setInterval(slider, 2000);
$('#testimonials .slide').hover(function() {
    clearInterval(interval);
}, function() {
    interval = setInterval(slider, 2000);
}); 
```

我想知道是否有人知道如何解决这个问题......因为我们的 php 代码将类似于：

```
<ul id="testimonials">
 <!-- OUR PHP LOOP-->
   <li class="slide">
    <div>
        <h1><?php echo $title; ?></h1>
        <p><?php echo $stuff; ?>
    </div>
    </li>
  <!-- // PHP LOOP -->
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:40:12.750

您可以使用 jquery 使第一个孩子可见。

```
$(document).ready(function(){
    $('#testimonials :first-child.slide').show(0);
    //.. rest of the stuff
}); 
```

在 php 中，将所有 div 设置为 display:none

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:37:28.403

利用：

```
 <ul id="testimonials">
<?php foreach($lis as $li) { ?>
       <li class="slide"<?php if($li == $lis[0]) echo ' style="display:list-item;"' ?>>
        <div>
            <h1><?php echo $title; ?></h1>
            <p><?php echo $stuff; ?>
        </div>
        </li>
<?php } ?>
    </ul> 
```

# android - 没有从我的输入中得到输出

> ID：10240286
> 
> 赞同：0
> 
> 时间：2012-04-20T04:29:03.183
> 
> 标签：android

[http://pastebin.com/YmeB2D1N](http://pastebin.com/YmeB2D1N)

本质上，我的程序有两个 EditText、一个 Button 和一个 TextView。您在 EditText 中输入一个数字/字符串，并且应该在 TextView 中显示一个输出。但是，我得到的只是“没有部门”。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:49:54.647

我在任何地方都看不到您正在设置部门或名称变量的值。你可以做：

```
EditText departmentEt = (EditText)findViewById(r.id.department_edit_text));
EditText nameEt = (EditText)findViewById(r.id.name_edit_text));
search.setOnClickListener(new OnClickListener) {
    public void onClick(View v) {
        if(deparmentEt.length() > 0) {
            department = Integer.parseInt(departmentEt.getText().toString());
        }
        if(nameEt.length() > 0) {
            name = nameEt.getText().toString();
        }

        //The rest of your code
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:49:55.787

对**EditText**使用**onTextChangedListener**和

 **在该方法中写入获取**EditText**的值并将其设置为**TextView**。

我希望它有效。

代码

```
textView= (TextView)findViewById(R.id.text);
textMessage = (EditText)findViewById(R.id.textMessage);
textMessage.addTextChangedListener(new TextWatcher(){
    public void afterTextChanged(Editable s) {

        textView.setText(textMessage.getText().toString());
    }
}); 
```**

# jquery - 停止 继续 jQuery ui droppable drop 事件

> ID：10240287
> 
> 赞同：0
> 
> 时间：2012-04-20T04:29:07.417
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

这就是我所说的：

[http://jsfiddle.net/m5Tse/1/](http://jsfiddle.net/m5Tse/1/)

当我放下可拖动对象时，它会改变 div 可放置对象在页面上的位置。似乎应该有一个简单的解决方案，但我似乎无法弄清楚，也无法向谷歌询问正确的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:51:08.923

它似乎只是一个 CSS 问题。

尝试更改您的`.box`to`float:left`而不是`display:inline-block`

```
.box{
    /*display: inline-block;*/
    float:left;
    ... 
```

更改您的保管箱 css 以反映以下内容：

```
.dropbox{
    /*height: 100%;*/
    height:200px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:28:09.277

将相对位置添加到 .box 并将绝对位置添加到 .dropbox，然后使 .dropbox 显式填充 .box 的宽度和高度。

```
.box{
    position: relative;
    display: inline-block;
    margin: 10px 0px;
    width: 200px;
    height: 200px;
    background: #f0f0f0;
    border: 1pt solid black;
}

.dropbox{
    position: absolute;
    height: 100%;
    width: 100%;
}​ 
```

我在你的 js-fiddle 上测试了它，它对我有用。

# python - 如何从 URL 中获取文件

> ID：10240289
> 
> 赞同：0
> 
> 时间：2012-04-20T04:29:12.240
> 
> 标签：python

例如，我有一个 URL

```
url = "www.example.com/file/processing/path/excefile.xls" 
```

当我将它粘贴到浏览器中时，此 URL 会直接下载一个 excel 文件。如何使用 python 下载此文件？也就是说，如果我运行 python 代码，上面的 URL 应该在浏览器中打开并下载 excel 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T04:53:50.667

如果您不一定需要通过浏览器，您可以使用该`urllib`模块将文件保存到指定位置。

```
import urllib

url = 'http://www.example.com/file/processing/path/excelfile.xls'
local_fname = '/home/John/excelfile.xls'
filename, headers = urllib.retrieveurl(url, local_fname) 
```

[http://docs.python.org/library/urllib.html#urllib.urlretrieve](http://docs.python.org/library/urllib.html#urllib.urlretrieve)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T04:31:34.090

使用[`webbrowser`模块](http://docs.python.org/library/webbrowser.html)：

```
import webbrowser
webbrowser.open(url) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:54:24.477

您绝对应该研究一下很棒的[请求](http://docs.python-requests.org/en/latest/user/quickstart/#make-a-get-request)库。

# lucene - 使用 Lucene 字段来提高文档分数，而不使用字段值进行选择

> ID：10240290
> 
> 赞同：0
> 
> 时间：2012-04-20T04:29:12.990
> 
> 标签：lucene

我有一个查询，如果找到匹配项但没有实际选择文档，我想使用某个字段来提高文档的分数。

所以如果我有文件 1 id:foo smoke:true city:Amsterdam

文件 2 id:to smoke:false city:Amsterdam

文件 3 id:bar smoke:true city:Rotterdam

我想选择 +smoke:true 但阿姆斯特丹结果排名较高的所有文档。

我想过做 +smoke:true city:Amsterdam^1.5

但我发现在这种情况下，还选择了smoke:false 和city=Amsterdam 的文件。

# mongodb - 神秘的 mongodb 错误 LEFT_SUBFIELD 仅支持 Object: stats not: 6

> ID：10240292
> 
> 赞同：10
> 
> 时间：2012-04-20T04:29:28.557
> 
> 标签：mongodb, mongoose

我无法弄清楚这个错误的含义

LEFT_SUBFIELD 仅支持 Object: stats not: 6

当我插入我的配置文件集合时，它似乎正在发生。我正在使用 mongoose.js。我们在 stats 属性中插入每个类别的帖子计数，例如

```
stats: {category:count, category2: count2}. 
```

这是我的架构

```
var ProfileSchema = new Schema({
  uname: {
    type: String,
    required: true,
    index: true,
    unique: true
  },
  fname: String,
  lname: String,
  stats: {
    type:{},
    "default":{},
    required:true
  },
  created: {
    type:Date,
    required:true,
    "default":Date.now
  }
}); 
```

我认为当我更新 stats 对象 $inc 计数时可能会发生这种情况，以便 stats 可以得出类似此更新的结果

```
db.status.update({_id:xyz}, {$inc: { stats.foo : 1, stats.bar:1}}) 
```

这是我的猫鼬代码

```
 var tags = ["comedy", "action", "drama"];

      //also adding the postId to the posts collection of profile
      var updateCommand = {$push: {posts: post._id}};

      var stats = {};
      for (var i = tags.length - 1; i >= 0; i--){
        stats["stats." + tags[i].toString()] = 1;
      };
      updateCommand.$inc = stats;

      Profile.update(
        {uname: uname}, 
        updateCommand,
        {safe:true, upsert:true},
        callback
      ); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T12:58:03.650

如果您尝试更新非对象的子文档，也会发生这种情况。

```
> db.test.insert({_id: 10240292, object: 'some string'})
> db.test.update({_id: 10240292}, {$set: {'object.subkey': 'some string'}})
LEFT_SUBFIELD only supports Object: object not: 2 
```

也许这不是你的情况，但它可以帮助那些用谷歌搜索这个错误的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T10:59:27.600

你可能会遇到这个：

[https://jira.mongodb.org/browse/SERVER-2651](https://jira.mongodb.org/browse/SERVER-2651)

或者

[https://jira.mongodb.org/browse/SERVER-5227](https://jira.mongodb.org/browse/SERVER-5227)

两者都已在 2.1 dev 分支中修复，但尚未（尚未）向后移植到 2.0

这里有一个关于类似问题的不错的讨论：

[https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/VhjhcyEdbNQ](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/VhjhcyEdbNQ)

基本上它归结为这样一个事实，即您可能会传递一个空键作为需要避免的更新的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T00:25:52.660

```
db.collection('fs.files').update({_id: Object_id}, {$set: {'metadata': {"foo" : "bar"}}} 
```

# excel - 通过 VBA 代码读取和显示列表值

> ID：10240296
> 
> 赞同：0
> 
> 时间：2012-04-20T04:30:25.697
> 
> 标签：excel, vba

请有人帮助我从 excel 下拉列表中读取值，并将这些值与不同单元格中的值进行复制，并在 VBA excel 中显示结果

我有 3 个下拉列表，我会将这些值与其他单元格中的值进行比较，如果匹配，我将显示该值。

我有 2 张，Sheet1 和 Sheet2。在 Sheet1 中，我有 3 个下拉列表，我将在其中选择值。当我选择这些值时，我需要在 sheet2 中存在的表中搜索这些值。以及要在特定单元格中显示的值。怎么做。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:34:46.100

你可能会寻找类似的东西吗？

```
Private Sub ComboBox1_Change()
If ComboBox1.Value = Range("E3").Text Then
    MsgBox "Same Values"
End If
End Sub 
```

# android - 如何解决按钮文本显示中的问题？

> ID：10240309
> 
> 赞同：0
> 
> 时间：2012-04-20T04:33:41.677
> 
> 标签：android, android-layout, android-button

```
<Button android:id="@+id/btn_log"
        android:layout_width="150dip"
        android:layout_height="wrap_content"
        android:text="@string/log" /> 
```

添加到表格布局并**在我单击按钮时正确显示，按钮文本消失/一段时间向下一行[按钮布局区域外]。** 根据代码和事情检查..一切都很好。

任何人都可以建议。提前致谢

# iphone - UIView 以两种不同的方法以不同的方式报告其中心

> ID：10240310
> 
> 赞同：0
> 
> 时间：2012-04-20T04:33:48.727
> 
> 标签：iphone, objective-c, uiview

我有一个创建的 UIView，`initWithFrame`它显示得很好，正是我想要的。

为了测试一些触摸交互性，我做了以下事情：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    NSLog(@"center: %f",self.center.x);
 } 
```

当我按下视图（以及类似这个视图的其他视图）时，它们都正确地记录了一个有意义的数字，作为它们在视图超级视图的坐标空间中的中心点。

但是，当我在`initWithFrame`方法内执行相同的日志语句时，`self.center.x`不会报告视图超级视图空间中的坐标。相反，它报告将成为边界中心的点，即如果视图是 100 像素宽，它会报告`50`所有视图的 ,。

我不明白的是这些视图没有移动，并且框架在开始时明确设置，`initWithFrame`因为它通过了一个框架`CGRect`并且视图显示在正确的位置。那么为什么它不能仅以这种方法正确报告其中心呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:39:29.973

在 期间`-initWithFrame:`，您的视图尚未添加到超级视图。

（稍后其他一些代码会将其添加到超级视图中——作为 nib 加载代码的一部分，或手动添加。）

# installation - Windows CE 6.0 - 将 SQL Server CE 3.5 安装到运行时映像中

> ID：10240323
> 
> 赞同：3
> 
> 时间：2012-04-20T04:35:17.557
> 
> 标签：installation, sql-server-ce, windows-ce, platform-builder

我做了一个应用程序，放在 Win CE（CF 卡）的硬盘上。我的问题是应用程序使用的是 SQL Server CE 3.5 数据库，但看起来图像是使用 SQL Server CE 3.0 创建的。开始构建镜像时无法选择 3.5 版本。

每次调试应用程序时都会部署 3.5 版本的 dll，因此问题永远不会出现在开发阶段。

现在，当应用程序启动时（它会在操作系统启动时自动启动），会弹出带有异常的消息窗口，并且不要让应用程序启动。我的问题是如何将 SQL Server CE 3.5 安装到映像中，或者如何在以后或每次启动时使用 CAB 文件安装它。

当我在正在运行的操作系统系统上运行正确的 CAB 文件（三个 CAB）时，它会安装 3.5 版本并且我的应用程序会启动，但是当我再次重新启动操作系统时，更改不会保存并提交。必须有一个解决方案，在构建映像之前在目录中添加 3.5 版本，或者在每次启动时安装它，或者在第一次启动后永久安装一次的最后一个选项。

如果您可以为我提供每次系统启动时安装 CAB 的解决方案这对我有用，但考虑到我必须在系统启动时运行将使用 SQL Server CE 3.5 数据库的应用程序，因此安装的 CAB 必须在应用程序自动启动之前。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:10:35.580

你有几个选择。最不希望的是在启动时运行 CAB。

一种选择是尽可能将最新的 SQLCE 二进制文件放入操作系统。*如果您安装了所有更新的 QFE*，则可以在目录中找到它。如果由于某种原因无法安装 QFE，则始终可以替换 Platfrom Builder 从 at 拉取的源二进制文件`%WINCEROOT%\OTHERS\SQLCOMPACT`。

另一种选择是在应用程序部署中只包含所有 SQLCE 二进制文件。您不需要 CAB，只需将 DLL 放在您的应用程序文件夹中（如果您走这条路线以防止本机 DLL 冲突，则从操作系统中删除 SQLCE 是一个好主意）。这些二进制文件的来源位于`%PROGRAM_FILES%\Microsoft SQL Server Compact Edition\v3.5\Devices`. 这实际上是我更喜欢的路线，因为对 SQLCE 的更新不需要新的操作系统。

# python - Selenium - click 和 clickAndWait 有什么区别？

> ID：10240329
> 
> 赞同：5
> 
> 时间：2012-04-20T04:36:38.757
> 
> 标签：python, selenium

我是硒的新手，需要对一些东西进行一些澄清。我已经在 IDE 中尝试过`click`，`clickAndWait`虽然参考文献清楚地说明了每一个的含义，但当我将测试用例导出到 Python 时，似乎两者都在这里做同样的事情

```
driver.find_element_by_xpath("//li[@id='pa-u_8298348-bd']/a/span[2]").click() #click and wait
driver.find_element_by_link_text("IMVironments").click() #click 
```

有人可以告诉我这里有什么区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-15T17:29:54.093

2年后，我知道了。但我一直在寻找相同的答案并找到了它。

来自[Selenium 维基](http://www.seleniumwiki.com/software-testing/selenium-the-%E2%80%9Candwait%E2%80%9D-commands/#more-29)

> 当操作导致浏览器导航到另一个页面或重新加载当前页面时，始终使用 AndWait 替代方案。

换句话说，Selenium 的 webdriver 在使用 Click() 命令时，如果识别到页面加载，将固有地使用“AndWait”修饰符。

另请参阅[界面 WebElement](https://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)

> 无效点击（）
> 
> 单击此元素。如果这导致加载新页面，则此方法将尝试阻止，直到页面加载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T04:42:25.660

来自[Selenium 文档](http://release.seleniumhq.org/selenium-core/0.8.0/reference.html)：

> 许多动作可以用“AndWait”后缀调用，例如“clickAndWait”。这个后缀告诉 Selenium 该操作将导致浏览器调用服务器，并且 Selenium 应该等待新页面加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T00:33:39.030

我不确定这是否是 python 的事情，但看起来你只是在调用'click'而不是调用'clickAndWait'。我认为这也是 Trott 所指出的。话虽如此，我注意到 IE 通常比 Firefox 或 Chrome 更频繁地需要 AndWait，后者似乎只需要更好地处理点击（由于速度？）。您还可以在 Selenium 中创建自己的“等待”，这是我通常在危急情况下所做的（因为您需要与特定元素交互，因此您“等待”直到它存在）。

编辑：在您发表评论后，我现在明白您在说什么（对“clickandwait”评论有点困惑：P）。据我所知，AndWait 并不总是可用于 Python 绑定，我在[这里](http://selenium.googlecode.com/svn/trunk/docs/api/py/selenium/selenium.selenium.html#selenium.selenium.selenium.click)发现了这一点，但我承认它并不是 100% 清楚，因为它在其他地方暗示了其他地方。也许这会有用吗？

> wait_for_page_to_load（超时）[来源]
> 
> 等待新页面加载。
> 
> 您可以使用此命令代替“AndWait”后缀、“clickAndWait”、“selectAndWait”、“typeAndWait”等（仅在 JS API 中可用）。

将此作为编辑放置，因为评论太长了，对不起！

# django - 基于 django 中的 GET 请求参数进行定向

> ID：10240338
> 
> 赞同：0
> 
> 时间：2012-04-20T04:37:53.423
> 
> 标签：django, django-urls

我在 c.html (http://localhost:8000/practice/c) 中，然后单击一个将我的 url 更改为的链接

[http://localhost:8000/practice/c/?q=1](http://localhost:8000/practice/c/?q=1)

这是 urls.py

```
url(r'^$', prac_c),
url(r'^q=\d',fetch_c), 
```

这是views.py

```
def prac_c(request):
    return render_to_response('subject/c.html', {"problem_list":problem_list})
def fetch_c(request):
        qno = request.GET.get('q')
        if qno:
            return render_to_response('subject/que.html', {'qno':qno}, context_instance=RequestContext(request)) 
```

但我没有被定向到 que.html。urls.py 有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:06:21.453

> ## URLconf 搜索的内容
> 
> URLconf 搜索请求的 URL，作为一个普通的 Python 字符串。这不包括 GET 或 POST 参数或域名。

[来源](https://docs.djangoproject.com/en/dev/topics/http/urls/#what-the-urlconf-searches-against)

# c++ - 学习OpenGL需要什么？

> ID：10240341
> 
> 赞同：-1
> 
> 时间：2012-04-20T04:38:23.077
> 
> 标签：c++, c, opengl, graphics

学习OpenGL需要什么？你需要先学习C/C++吗？我有 C 经验，但没有 C++ 经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:41:36.727

我建议使用 c++，因为它具有面向对象的一面，但 opengl 是跨平台 [http://www.opengl.org/resources/bindings/](http://www.opengl.org/resources/bindings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:02:08.673

您可以主要使用 C 和很少的 C++。

我建议查看 nehe.gamedev.net 以获取一些帮助。

# c - 如何重用线程 - pthreads c

> ID：10240347
> 
> 赞同：3
> 
> 时间：2012-04-20T04:39:27.477
> 
> 标签：c, synchronization, pthreads

我在 C 中使用 pthreads 进行编程。

我有一个父线程需要创建 4 个 ID 为 0、1、2、3 的子线程。当父线程获取数据时，它将设置拆分数据并将其分配给 4 个单独的上下文变量 - 每个子线程一个. 子线程必须处理这些数据，同时父线程应该等待这些线程。一旦这些子线程完成执行，它们将在其相应的上下文变量中设置输出并等待（以供重用）。一旦父线程知道所有这些子线程都完成了这一轮，它就会计算全局输出并将其打印出来。现在它等待新数据（子线程还没有被杀死，它们只是在等待）。

如果父线程获得更多数据，则重复上述过程 - 尽管已经创建了 4 个线程。

如果父线程接收到一个kill命令（假设一种特定类型的数据），它向所有子线程指示并且它们自己终止。现在父线程可以终止。

我是一名硕士研究生，我遇到了上述场景的需求。我知道这可以使用 pthread_cond_wait、pthread_Cond_signal 来完成。我已经编写了代码，但它只是无限期地运行，我不知道为什么。

我的猜测是，按照我的编码方式，我把场景过于复杂化了。了解如何实现这一点将非常有帮助。如果有需要，我可以发布我的代码的简化版本来展示我正在尝试做的事情（即使我认为我的方法有缺陷！）...

你能给我一些关于如何使用 pthreads 实现这个场景的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:25:47.407

从你的描述中可以看出，原理似乎没有什么问题。

我想您要实现的是一个工作池，应该有很多实现。如果您的线程正在执行的工作是大量计算（例如至少 CPU 秒左右），那么这种方案完全是矫枉过正。POSIX 线程的现代实现足够高效，它们支持创建大量线程，真的很多，而且开销并不高。

如果您让您的工作人员通过共享变量、互斥锁等（而不是通过线程的返回值）进行通信，那么唯一重要的是您通过使用属性参数来启动线程分离`pthread_create`。

一旦你为你的任务实现了这样的实现，就进行测量。只有这样，如果您的分析器告诉您在 pthread 例程中花费了大量时间，请开始考虑实现（或使用）工作池来回收线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:46:01.593

一个生产者-消费者线程，有 4 个线程挂在它上面。想要将四个任务排队的线程组装了四个上下文结构，其中包含以及所有其他数据内容，一个指向“OnComplete”函数的函数指针。然后它将所有四个上下文提交到队列中，在执行此操作时原子地将 aa taskCount 增加到 4，并等待事件/condvar/semaphore。

四个线程从 PC 队列中获取上下文并开始工作。

完成后，线程调用“OnComplete”函数指针。

在 OnComplete 中，线程自动倒计时 taskCount。如果一个线程将其减为零，则表示事件/condvar/semaphore 和源线程继续运行，知道所有任务都已完成。

安排它并不难，以便上下文的组装和同步等待也在一个任务中完成，因此允许池一次为多个请求线程处理多个“ForkAndWait”操作。

我必须补充一点，像这样的操作在 OO 语言中非常容易。例如，最新的 Java 有一个“ForkAndWait”线程池类，它应该做这种事情，但是 C++（或者甚至 C#，如果你喜欢农奴制的话）比普通的 C 更好。

# jquery - 如何修复云轮播插件？

> ID：10240351
> 
> 赞同：0
> 
> 时间：2012-04-20T04:39:44.137
> 
> 标签：jquery, geometry

我在互联网上找到了这个插件并将它用于我的任务，但是它有一个问题，例如我有 4 个标志图像，云轮播插件会使这些标志转一圈，但是当它停止前面的标志和后旗不要停在中心，我的意思是 4 旗的位置不正确，我不知道如何更清楚地谈论它，但请看图片你会明白我遇到的问题。另外，我数学不好，不知道怎么像插件那样计算。请看一下建议我一些解决方案。提前致谢 ！

这是问题的图像：

```
http://www.mediafire.com/i/?onvaklt5kbqgxt8

or

http://imageshack.us/photo/my-images/4/imgproblem.png/ 
```

这是一个正确的例子：

```
http://www.mediafire.com/i/?uqk4c1ndyeo50q2

or 

http://imageshack.us/photo/my-images/135/examplecd.jpg/ 
```

这是html代码：

```
<div class="circle" id="carousel">
            <img class="cloudcarousel" src="images/flag_spain.png" title="Treatment with Baraclude was generally well tolerated and no patients discontinued treatment due to AEs.1"
                alt="ORIENTE Study (n=190)" />
            <img class="cloudcarousel" src="images/flag_italy.png" title="No major safety issues were recorded; none of the patients had to stop or reduce the dose during the study.2 "
                alt="Italian Cohort (n=418) " />
            <img class="cloudcarousel" src="images/flag_eu.png" title="[Baraclude] was safe and didn’t affect renal function or cause lactic acidosis.3"
                alt="VIRGIL Study - Naïve cohort (n=243)" />
            <img class="cloudcarousel" src="images/flag_hongkong.png" title="There were no serious adverse events related to the drug.4"
                alt="Hong Kong Study (n=222)" />
            <p id="title-box">
            </p>
            <div id="all-box">
            </div>
            <span id="alt-box"></span>
        </div> 
```

这是CSS代码：

```
.circle {
    background:url(../images/circle.png) no-repeat;
    /*width:445px;
    height:138px;
    position:absolute;
    top:315px;
    left:288px;*/
    width:650px;
    height:475px;
    position:absolute;
    top:165px;
    left:185px;
}

#title-box {
    background-image:url(../images/title_bg.png);
    color: #000;
    font-size: 2em;
    height: 100px;
    padding: 24px 20px 20px 20px;
    text-align: center;
    width: 610px;
}

#alt-box 
{
    bottom: 0;
    height: 25px;
    left: 0;
    position: absolute;
    width: 650px;
}

.cloudcarousel {
    opacity: 0;
} 
```

这是我编辑的插件代码。

```
//////////////////////////////////////////////////////////////////////////////////
// CloudCarousel V1.0.5
// (c) 2011 by R Cecco. <http://www.professorcloud.com>
// MIT License
//
// reflection code based on plugin by Christophe Beyls <http://www.digitalia.be>
//
// Please retain this copyright header in all versions of the software
//////////////////////////////////////////////////////////////////////////////////

(function ($) {

    // START reflection object.
    // Creates a reflection for underneath an image.
    // IE uses an image with IE specific filter properties, other browsers use the Canvas tag.  
    // The position and size of the reflection gets updated by updateAll() in controller.
    function reflection(img, reflHeight, opacity) {

        var reflect, cntx, imageWidth = img.width, imageHeight = img.width, gradient, parent;

        parent = $(img.parentNode);
        this.element = reflect = parent.append("<canvas class='reflection' style='position:absolute'/>").find(':last')[0];
        if (!reflection.getContext && $.browser.msie) {
            this.element = reflection = parent.append("<img class='reflection' style='position:absolute'/>").find(':last')[0];
            reflect.src = img.src;
            reflect.style.filter = "flipv progid:DXImageTransform.Microsoft.Alpha(opacity=" + (opacity * 100) + ", style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy=" + (reflHeight / imageHeight * 100) + ")";

        } else {
            cntx = reflection.getContext("2d");
            try {

                $(reflect).attr({ width: imageWidth, height: reflHeight });
                cntx.save();
                cntx.translate(0, imageHeight - 1);
                cntx.scale(1, -1);
                cntx.drawImage(img, 0, 0, imageWidth, imageHeight);
                cntx.restore();
                cntx.globalCompositeOperation = "destination-out";
                gradient = cntx.createLinearGradient(0, 0, 0, reflHeight);
                gradient.addColorStop(0, "rgba(255, 255, 255, " + (1 - opacity) + ")");
                gradient.addColorStop(1, "rgba(255, 255, 255, 1.0)");
                cntx.fillStyle = gradient;
                cntx.fillRect(0, 0, imageWidth, reflHeight);
            } catch (e) {
                return;
            }
        }
        // Store a copy of the alt and title attrs into the reflection
        $(reflect).attr({ 'alt': $(img).attr('alt'), title: $(img).attr('title') });

    } //END reflection object

    // START item object.
    // A wrapper object for items within the carousel.
    var item = function (imgIn, options) {
        this.orgWidth = imgIn.width;
        this.orgHeight = imgIn.height;
        this.image = imgIn;
        this.reflection = null;
        this.alt = imgIn.alt;
        this.title = imgIn.title;
        this.imageOK = false;
        this.options = options;

        this.imageOK = true;

        if (this.options.reflHeight > 0) {
            this.reflection = new reflection(this.image, this.options.reflHeight, this.options.reflOpacity);
        }
        $(this.image).css('position', 'absolute'); // Bizarre. This seems to reset image width to 0 on webkit!                  
    }; // END item object

    // controller object.
    // This handles moving all the items, dealing with mouse clicks etc.    
    var controller = function (container, images, options) {

        var items = [], funcSin = Math.sin, funcCos = Math.cos, ctx = this;
        this.controlTimer = 0;
        this.stopped = false;
        //this.imagesLoaded = 0;
        this.container = container;
        this.xRadius = options.xRadius;
        this.yRadius = options.yRadius;
        this.showFrontTextTimer = 0;
        this.autoRotateTimer = 0;
        if (options.xRadius === 0) {
            this.xRadius = ($(container).width() / 2.3);
            console.log(this.xRadius);
        }
        if (options.yRadius === 0) {
            this.yRadius = ($(container).height() / 6);
        }

        this.xCentre = options.xPos;
        this.yCentre = options.yPos;
        this.frontIndex = 0; // Index of the item at the front

        // Start with the first item at the front.
        this.rotation = this.destRotation = Math.PI / 2;
        this.timeDelay = 1000 / options.FPS;

        // Turn on the infoBox
        if (options.altBox !== null) {
            $(options.altBox).css('display', 'block');
            $(options.titleBox).css('display', 'block');
        }
        // Turn on relative position for container to allow absolutely positioned elements
        // within it to work.
        $(container).css({ position: 'relative', overflow: 'hidden' });

        $(options.buttonLeft).css('display', 'inline');
        $(options.buttonRight).css('display', 'inline');

        // Setup the buttons.
        $(options.buttonLeft).bind('mouseup', this, function (event) {
            event.data.rotate(-1);
            return false;
        });
        $(options.buttonRight).bind('mouseup', this, function (event) {
            event.data.rotate(1);
            return false;
        });

        // You will need this plugin for the mousewheel to work: http://plugins.jquery.com/project/mousewheel
        //        if (options.mouseWheel) {
        //            $(container).bind('mousewheel', this, function (event, delta) {
        //                event.data.rotate(delta);
        //                return false;
        //            });
        //        }
        $(container).bind('click', this, function (event) {

            clearInterval(event.data.autoRotateTimer);  // Stop auto rotation if mouse over.
            var text = $(event.target).attr('alt');
            // If we have moved over a carousel item, then show the alt and title text.

            if (text !== undefined && text !== null) {

                clearTimeout(event.data.showFrontTextTimer);
                //if (event.type == 'click') {
                $(options.altBox).html(($(event.target).attr('alt')));
                $(options.titleBox).html(($(event.target).attr('title')));
                //}

                //if (options.bringToFront && event.type == 'click') {
                if (options.bringToFront) {
                    var idx = $(event.target).data('itemIndex');
                    var frontIndex = event.data.frontIndex;
                    //var   diff = idx - frontIndex;                    
                    var diff = (idx - frontIndex) % images.length;
                    if (Math.abs(diff) > images.length / 2) {
                        diff += (diff > 0 ? -images.length : images.length);
                    }
                    event.data.rotate(-diff);
                    console.log(-diff);
                }
            }
        });

        $(options.specialBox).bind('click', this, function (event) {
            event.data.rotate(0.5);
        });

        // If we have moved out of a carousel item (or the container itself),
        // restore the text of the front item in 1 second.
        //        $(container).bind('mouseout', this, function (event) {
        //            var context = event.data;
        //            clearTimeout(context.showFrontTextTimer);
        //            context.showFrontTextTimer = setTimeout(function () { context.showFrontText(); }, 1000);
        //            context.autoRotate(); // Start auto rotation.
        //        });

        // Prevent items from being selected as mouse is moved and clicked in the container.
        $(container).bind('mousedown', this, function (event) {
            event.data.container.focus();
            return false;
        });
        container.onselectstart = function () { return false; };    // For IE.

        this.innerWrapper = $(container).wrapInner('<div style="position:absolute;width:100%;height:100%;"/>').children()[0];

        // Shows the text from the front most item.
        this.showFrontText = function () {
            if (items[this.frontIndex] === undefined) { return; } // Images might not have loaded yet.
            $(options.titleBox).html($(items[this.frontIndex].image).attr('title'));
            $(options.altBox).html($(items[this.frontIndex].image).attr('alt'));
        };

        this.go = function () {
            if (this.controlTimer !== 0) { return; }
            var context = this;
            this.controlTimer = setTimeout(function () { context.updateAll(); }, this.timeDelay);
        };

        this.stop = function () {
            clearTimeout(this.controlTimer);
            this.controlTimer = 0;
        };

        // Starts the rotation of the carousel. Direction is the number (+-) of carousel items to rotate by.
        this.rotate = function (direction) {
            this.frontIndex -= direction;
            this.frontIndex %= items.length;
            this.destRotation += (Math.PI / items.length) * (2 * direction);
            this.showFrontText();
            this.go();
        };

        this.autoRotate = function () {
            if (options.autoRotate !== 'no') {
                var dir = (options.autoRotate === 'right') ? 1 : -1;
                this.autoRotateTimer = setInterval(function () { ctx.rotate(dir); }, options.autoRotateDelay);
            }
        };

        // This is the main loop function that moves everything.
        this.updateAll = function () {
            var minScale = options.minScale; // This is the smallest scale applied to the furthest item.
            var smallRange = (1 - minScale) * 0.4;
            var w, h, x, y, scale, item, sinVal;

            var change = (this.destRotation - this.rotation);
            var absChange = Math.abs(change);

            this.rotation += change * options.speed;
            if (absChange < 0.001) { this.rotation = this.destRotation; }
            var itemsLen = items.length;
            var spacing = (Math.PI / itemsLen) * 2;
            //var   wrapStyle = null;
            var radians = this.rotation;
            var isMSIE = $.browser.msie;

            // Turn off display. This can reduce repaints/reflows when making style and position changes in the loop.
            // See http://dev.opera.com/articles/view/efficient-javascript/?page=3          
            this.innerWrapper.style.display = 'none';

            var style;
            var px = 'px', reflHeight;
            var context = this;
            for (var i = 0; i < itemsLen; i++) {
                item = items[i];

                sinVal = funcSin(radians);

                scale = ((sinVal + 1) * smallRange) + minScale;

                x = this.xCentre + (((funcCos(radians) * this.xRadius) - (item.orgWidth * 0.5)) * scale);
                y = this.yCentre + (((sinVal * this.yRadius)) * scale);

                if (item.imageOK) {
                    var img = item.image;

                    //w = img.width = item.orgWidth * scale;
                    //h = img.height = item.orgHeight * scale;
                    img.style.webkittransition = 'transform 0.5s linear, left 0.5s linear, top 0.5s linear';
                    img.style.webkitTransform = 'scale(' + scale + ')';
                    w = item.orgWidth * scale;
                    h = item.orgHeight * scale;
                    //x = x == 214 ? 235 : x;
                    //x = x == 249 ? 235 : x;
                    if (i == 0) {
                        console.log('x : ' + x);
                        console.log('absChange : ' + absChange);
                    }
                    img.style.left = x + px;
                    img.style.top = y + px;
                    img.style.zIndex = "" + (scale * 100) >> 0; // >>0 = Math.foor(). Firefox doesn't like fractional decimals in z-index.

                    if (item.reflection !== null) {
                        reflHeight = options.reflHeight * scale;
                        style = item.reflection.element.style;
                        style.left = x + px;
                        style.top = y + h + options.reflGap * scale + px;
                        style.width = w + px;
                        if (isMSIE) {
                            style.filter.finishy = (reflHeight / h * 100);
                        } else {
                            style.height = reflHeight + px;
                        }
                    }
                }
                radians += spacing;
            }
            // Turn display back on.                    
            this.innerWrapper.style.display = 'block';

            // If we have a preceptable change in rotation then loop again next frame.
            if (absChange >= 0.001) {
                this.controlTimer = setTimeout(function () { context.updateAll(); }, this.timeDelay);
            } else {
                // Otherwise just stop completely.              
                this.stop();
            }
        }; // END updateAll     

        // Create an item object for each image 
        //      func = function(){return;ctx.updateAll();} ;

        // Check if images have loaded. We need valid widths and heights for the reflections.
        this.checkImagesLoaded = function () {

            var i;
            for (i = 0; i < images.length; i++) {
                if ((images[i].width === undefined) || ((images[i].complete !== undefined) && (!images[i].complete))) {
                    return;
                }
            }
            for (i = 0; i < images.length; i++) {
                items.push(new item(images[i], options));
                $(images[i]).data('itemIndex', i);
            }
            // If all images have valid widths and heights, we can stop checking.           
            clearInterval(this.tt);
            this.showFrontText();
            this.autoRotate();
            this.updateAll();

            for (i = 0; i < images.length; i++) {
                images[i].style.opacity = 1;
            }
        };

        this.tt = setInterval(function () { ctx.checkImagesLoaded(); }, 50);
    }; // END controller object

    // The jQuery plugin part. Iterates through items specified in selector and inits a controller class for each one.
    $.fn.CloudCarousel = function (options) {

        this.each(function () {

            options = $.extend({}, {
                reflHeight: 0,
                reflOpacity: 0.5,
                reflGap: 0,
                minScale: 0.5,
                xPos: 0,
                yPos: 0,
                xRadius: 0,
                yRadius: 0,
                specialBox: null,
                altBox: null,
                titleBox: null,
                FPS: 30,
                autoRotate: 'no',
                autoRotateDelay: 1500,
                speed: 0.2,
                mouseWheel: false,
                bringToFront: false
            }, options);
            // Create a controller for each carousel.       
            $(this).data('cloudcarousel', new controller(this, $('.cloudcarousel', $(this)), options));
        });
        return this;
    };

})(jQuery);

// this is my code that implement the plugin above
$(document).bind('ready', function () {

    $("#carousel").CloudCarousel({
        minScale: 0.4,
        xPos: 280,
        yPos: 0,
        xRadius: 260,
        yRadius: 0,
        FPS: 50,
        specialBox: '#all-box',
        titleBox: '#title-box',
        altBox: '#alt-box',
        autoRotate: 'no',
        auted: 0.1,
        bringToFront: true
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:06:59.717

请将您正在拨打的电话拨打给 CloudCarousel。您可以在此调用中轻松指定 centering 参数。

这一切都是为了正确计算 xPos。让我试着告诉你如何计算它。

计算轮播容器的宽度（在您的情况下为 650）；

通常通过将 xPos 指定为轮播容器宽度的一半，您应该会获得正确的结果。

[请参阅网站http://www.professorcloud.com/mainsite/carousel-integration.htm](http://www.professorcloud.com/mainsite/carousel-integration.htm)上提供的文档。这是不言自明的。

# cocos2d-iphone - 如何在 cocos2d 中从 Sprite 中检索动作

> ID：10240358
> 
> 赞同：0
> 
> 时间：2012-04-20T04:40:38.817
> 
> 标签：cocos2d-iphone

我有一个在场景中使用的 CCSprite，并创建了多个 CCAnimation 动作以使用单个 CCSpriteFrameCache sharedSpriteFrameCache 应用到它。虽然一切正常并且我可以在动画之间切换，但我觉得我做得很糟糕，我想通过检索 CCSprite 上正在运行的动作来简化我的代码，以便在运行下一个动作之前单独停止它们它。

为了帮助创建一些上下文，让我们假设以下情况：

*   我们有一个名为 mySprite 的 CCSprite

*   我们定义了 3 个独立的 CCAnimation 动作，分别用于向右行走、向左行走和向前坐着，分别称为：actionAnimWalkRight、actionAnimWalkLeft 和 actionAnimSitForward。

*   我们想让精灵在有人触摸 mySprite 右侧的屏幕时向右走，当有人触摸 mySprite 左侧的屏幕时向左走，当有人触摸 mySprite 时坐下。

我用来完成此操作的方法如下：

1.  将 CCSprite 作为一个孩子放置在场景中。
2.  使用以下命令告诉精灵运行一个动作： [self runAction:actionWalkRight];
3.  当我想在有人触摸后更改动作时，我有一个名为 stopAllAnimationActions 的方法，我会在应用一个新动作之前调用它，该动作会停止任何动画动作，无论正在运行什么。基本上列出了我定义的所有 CCAnimation/CCActions 并单独停止每个，因为我不想使用 stopAllActions。如下：[self stopAction:actionWalkRight]; [self stopAction:actionWalkLeft]; [self stopAction:actionSitForward];
4.  然后我在上述方法触发后应用新动画： [self runAction:actionWalkLeft];

虽然这可行，但仅仅因为我不确切知道正在运行的内容而停止我知道没有运行的项目似乎是一个糟糕的设计。因此，仅在非常复杂的情况下寻找建议和最佳推荐做法来执行此类操作，因此很难跟踪每一种可能的情况。对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:12:33.780

我建议您简化流程并利用原生 Cocos 功能，包括`stopAllActions`. 不要重复使用动作，总是从头开始创建它们，因为 Cocos 开发人员已经很好地讨论了重复使用动作可能是错误的。

Cocos 进行了很好的优化，并且像这样的特性`stopAllActions`并不是性能消耗。实际上，它可能会比您的方法更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T15:10:28.713

创建动作时，使用常量设置该动作的标签：

```
actionWalkRight.tag= kCurrentAction;
[self runAction:actionWalkRight]; 
```

然后，通过该标签检索正在运行的操作并停止它。

```
[self stopActionByTag:kCurrentAction]; 
```

# ruby-on-rails - 用户编辑和删除路由提供错误、命名空间路由

> ID：10240359
> 
> 赞同：2
> 
> 时间：2012-04-20T04:40:51.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-routing

我的路线有问题，我认为这是由于参数传递不正确。每当我尝试进入用户编辑页面时，都会收到以下错误：

```
No route matches {:action=>"edit", :controller=>"admin/users", :locale=>#<User id: 10, first_name: "Chase", last_name: "Jensen", email: "email@email.com", password_digest: "$2a$10$xTvG5gP73w2/nVW5jD.BSO3Z46S5v9oGogmfjo3gsGHf...", access_level: 2, last_login: nil, auth_token: nil, created_at: "2012-04-20 02:19:33", updated_at: "2012-04-20 02:19:33">} 
```

我注意到它说 :locale=>#User ID (hash) 但我不确定这是否是问题所在。如果是，我不知道为什么将用户哈希作为：locale？这是我的一些应用程序代码

它抱怨的代码：
app/views/admin/users/index.html.erb

```
<% @owners.each do |owner| %>
  <%= owner.first_name %>
  <%= link_to "Edit Owner", edit_admin_user_path(owner) %>
  <%= link_to "Delete Owner", admin_user_path(owner), :method => :delete, :confirm => "Are you sure you want to delete this owner?" %>
<% end %> 
```

用户控制器

```
class Admin::UsersController < Admin::BaseController
  def edit
    @user = User.find(params[:id])
  end
  def update
    @user = User.find(params[:id])

    if @user.update_attributes(params[:user])
      flash[:notice] = "User has been updated."
      redirect_to @user
    else 
      flash[:alert] = "User has not been updated."
      render :action => "edit"
    end
  end
  def index
    @owners = User.all
  end
end 
```

routes.rb（缩短）

```
scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
  namespace :admin do
    resources :users do
      collection do
        get :newowner
      end
    end
  end
end 
```

rake 路由输出

```
newowner_admin_users GET    /:locale/admin/users/newowner(.:format) {:locale=>/en|es/, :action=>"newowner", :controller=>"admin/users"}
     admin_users GET    /:locale/admin/users(.:format)          {:locale=>/en|es/, :action=>"index", :controller=>"admin/users"}
                 POST   /:locale/admin/users(.:format)          {:locale=>/en|es/, :action=>"create", :controller=>"admin/users"}
  new_admin_user GET    /:locale/admin/users/new(.:format)      {:locale=>/en|es/, :action=>"new", :controller=>"admin/users"}
 edit_admin_user GET    /:locale/admin/users/:id/edit(.:format) {:locale=>/en|es/, :action=>"edit", :controller=>"admin/users"}
      admin_user GET    /:locale/admin/users/:id(.:format)      {:locale=>/en|es/, :action=>"show", :controller=>"admin/users"}
                 PUT    /:locale/admin/users/:id(.:format)      {:locale=>/en|es/, :action=>"update", :controller=>"admin/users"}
                 DELETE /:locale/admin/users/:id(.:format)      {:locale=>/en|es/, :action=>"destroy", :controller=>"admin/users"} 
```

当路线似乎匹配时，我很困惑为什么会收到此错误。有人对此有任何见解吗？提前致谢。

**编辑：**

此时应在应用程序控制器中设置区域设置

```
before_filter :set_locale

private
def set_locale
  I18n.locale = params[:locale] if params[:locale].present?
end 
```

并在我的应用程序视图中 app/views/layouts/application.html.erb

```
<%= link_to_unless_current "English", locale: "en" %> |
<%= link_to_unless_current "Spanish", locale: "es" %> 
```

它不是默认为EN吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T19:24:14.110

将此添加到我的应用程序控制器中，如 Ryan Bates railscast 中指定的那样修复了它。

```
def default_url_options(options = {})
  {locale: I18n.locale}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:51:35.067

您没有通过语言环境参数
尝试`edit_admin_user_path(owner, :locale => "en")`

# c - 在 C 中，文字字符串地址是否总是大于任何分配的字符串地址？

> ID：10240360
> 
> 赞同：3
> 
> 时间：2012-04-20T04:40:53.280
> 
> 标签：c, string, memory-management

我试图将文字字符串与分配的字符串区分开来，所以我不会不小心尝试 free() 文字字符串，这会导致段错误。

我可能尝试 free() 文字字符串的原因涉及可以嵌入的 strcat() 包装器： `strcatex("My name ", strcatex("is ", strMyName));`

不管是什么原因，请考虑：

```
void* mallocex(int intBytes) 
{
    void* newPtr;

    newPtr = malloc(intBytes);

    if(newPtr == 0)
        return 0;
    else if(newPtr > maxPointer)
        maxPointer = newPtr;

    return newPtr;
} 
```

和

```
int SafeFree(void **ptr)
{
    if((unsigned long) ptr > (unsigned long) maxPointer) 
        return 0;
    else
        free(*ptr);

    return 1;
} 
```

示例使用：

```
char *newString;
newString = (char*) mallocex(12);

strcpy(newString, "Example one");

SafeFree(&newString);
SafeFree("Example two"); 
```

无论我的堆有多大，这总是有效吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T04:41:25.693

没有这样的保证不要依赖它。
字符串文字在只读实现定义区域中的某处分配了内存，无法以可移植的方式知道它将是什么，因此您不应该对它做出任何假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:15:09.833

情况比你想象的还要“糟糕”。比较仅针对指向同一对象（或仅指向超出的字节）的指针定义。因此，通常对于两个不同的对象（无论是静态分配为字符串文字还是动态分配`malloc`），您甚至都无法询问一个对象的地址是否小于另一个对象。在大多数平台上，这样的比较是可行的，但你不能严格地依赖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:32:08.140

不仅没有保证，相反的系统也很常见。例如，在 MacOS（我的笔记本电脑）上：

```
#include <stdio.h>
#include <stdlib.h>

void pr_addr(const char *name, void *addr) {
    printf("%s: %p\n", name, addr);
}

int main(void) {
    pr_addr("literal", "literal");
    pr_addr("heap", malloc(10));
    return 0;
}
$ cc -o foo -W -Wall -O foo.c
$ ./foo
literal: 0x1ff1
heap: 0x100160 
```

所以这里的`rodata`部分远*低于*竞技场的起点，`malloc`与您在系统上看到的相反。

一般来说，具有花哨分段或其他结构化指针类型的系统最终会在不相邻对象之间进行无意义的比较。测试`p < q`通常编译为仅对段内偏移进行比较。例如，如果`p`和都`q`指向它们（不同）段的开始，则它们的偏移量都为零，即使地址不同。因此`p < q`and`p > q`都是 false 和 yet `p != q`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-30T21:18:47.203

为了好玩，我写了一个尝试根据其他文字的地址进行猜测。它通过将潜在文字的地址与另一个已知文字、堆栈地址和堆地址进行比较来工作。如果潜在地址比其他地址更接近文字，则假定潜在地址是文字。在实践中可能不可靠。这是它的简单版本：

```
int is_literal_simplistic(char *s) {
    char *literal = "literal";
    char stack[] = "stack";
    char *heap = malloc(1);
    free(heap);
    unsigned long literal_delta = labs(literal - s);
    unsigned long stack_delta = labs(stack - s);
    unsigned long heap_delta = labs(heap - s);
    return (literal_delta < stack_delta && literal_delta < heap_delta);
} 
```

这是更简洁的版本。它可能更简单：

```
int is_literal(char *s) {
  char *heap = malloc(1);
  free(heap);
  unsigned long literal_delta = labs("literal" - s);
  unsigned long stack_delta = labs((char *)&s - s);
  unsigned long heap_delta = labs(heap - s);
  return (literal_delta < stack_delta && literal_delta < heap_delta);
} 
```

完整的可运行测试：

```
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

//#define DEBUG

#ifdef DEBUG
void debug_literal(unsigned long literal,
                   unsigned long stack,
                   unsigned long heap,
                   unsigned long literal_delta,
                   unsigned long stack_delta,
                   unsigned long heap_delta) {
  printf("literal(%lx)  stack(%lx)  heap(%lx)\n", literal, stack, heap);
  printf("literal(%lu)  stack(%lu)  heap(%lu)\n", literal_delta, stack_delta, heap_delta);
  int answer = (literal_delta < stack_delta && literal_delta < heap_delta);
  printf("\t%s\n", answer ? "literal" : "other");
}
#else
void debug_literal(unsigned long literal,
                   unsigned long stack,
                   unsigned long heap,
                   unsigned long literal_delta,
                   unsigned long stack_delta,
                   unsigned long heap_delta) {
}
#endif

int is_literal_simplistic(char *s) {
    char *literal = "literal";
    char stack[] = "stack";
    char *heap = malloc(1);
    free(heap);
    unsigned long literal_delta = labs(literal - s);
    unsigned long stack_delta = labs(stack - s);
    unsigned long heap_delta = labs(heap - s);
    debug_literal((unsigned long)literal, (unsigned long)stack, (unsigned long)heap,
                  literal_delta, stack_delta, heap_delta);
    return (literal_delta < stack_delta && literal_delta < heap_delta);
}

int is_literal(char *s) {
  char *heap = malloc(1);
  free(heap);
  unsigned long literal_delta = labs("literal" - s);
  unsigned long stack_delta = labs((char *)&s - s);
  unsigned long heap_delta = labs(heap - s);
  debug_literal(0,0,0, literal_delta, stack_delta, heap_delta);
  return (literal_delta < stack_delta && literal_delta < heap_delta);
}

void test_literal_function(int(*liternal_fn)(char *)) {
  char *literal = "literal_test";
  char stack[] = "stack_test";
  char *heap = malloc(40);

  printf("\t%s\n", liternal_fn(literal) ? "literal" : "other");
  printf("\t%s\n", liternal_fn(stack) ? "literal" : "other");
  printf("\t%s\n", liternal_fn(heap) ? "literal" : "other");
  printf("\n");

  free(heap);
}

int main() {
  test_literal_function(is_literal_simplistic);
  test_literal_function(is_literal);

  return 0;
} 
```

# java - 来自android中服务器验证的共享首选项概念登录页面

> ID：10240365
> 
> 赞同：0
> 
> 时间：2012-04-20T04:41:30.883
> 
> 标签：java, android

我正在验证登录页面是由服务器端完成的。我创建一个记住用户名和密码的复选框。如果选中复选框，它会记住用户名和密码。但问题是即使未选中复选框，它也会找到存储的用户名和密码. 现在我想如果复选框未选中意味着它不记得用户名和密码

```
 i try this code
   public class Login extends Activity {
  SharedPreferences app_preferences ;
CheckBox check;

private static final String UPDATE_URL = "serverurl";

public ProgressDialog progressDialog;

private EditText UserEditText;

private EditText PassEditText;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    app_preferences = PreferenceManager.getDefaultSharedPreferences(this);
    progressDialog = new ProgressDialog(this);

    progressDialog.setMessage("Please wait...");

    progressDialog.setIndeterminate(true);

    progressDialog.setCancelable(false);

    UserEditText = (EditText) findViewById(R.id.username);

    PassEditText = (EditText) findViewById(R.id.password);
    check=(CheckBox) findViewById(R.id.checkbox);
    String Str_user = app_preferences.getString("username","0" );
    String Str_pass = app_preferences.getString("password", "0");
    String Str_check = app_preferences.getString("checked", "no");
    if(Str_check.equals("yes"))
    {
            UserEditText.setText(Str_user);
           PassEditText.setText(Str_pass);
            check.setChecked(true);
    }
    Button button = (Button) findViewById(R.id.okbutton);

    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            int usersize = UserEditText.getText().length();

            int passsize = PassEditText.getText().length();

            if(usersize > 0 && passsize > 0) {

                progressDialog.show();

                String user = UserEditText.getText().toString();

                String pass = PassEditText.getText().toString();
                String Str_check2 = app_preferences.getString("checked", "no");
                if(Str_check2.equals("yes"))
                {
                    SharedPreferences.Editor editor = app_preferences.edit();
                    editor.putString("username", user);
                    editor.putString("password", pass);
                     editor.commit();
                }

                doLogin(user, pass);

            } else createDialog("Error","Please enter Username and Password");

        }

    });

   check box
    check.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                // Perform action on clicks, depending on whether it's now checked
                SharedPreferences.Editor editor = app_preferences.edit();
                if (((CheckBox) v).isChecked())
                {

                     editor.putString("checked", "yes");
                     editor.commit();
                }
                else
                {
                     editor.putString("checked", "no");
                     editor.commit();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:34:56.463

当用户取消选中该复选框时，您**应该**删除存储的详细信息。即使用户未选中该复选框，您也可以在此处**保留存储的值。**

```
 check box
        check.setOnClickListener(new View.OnClickListener()
            {
                public void onClick(View v)
                {
                    // Perform action on clicks, depending on whether it's now checked
                    SharedPreferences.Editor editor = app_preferences.edit();
                    if (((CheckBox) v).isChecked())
                    {

editor.putString("username", user);
                    editor.putString("password", pass);
                         editor.putString("checked", "yes");
                         editor.commit();
                    }
                    else
                    {

editor.putString("username", "");
                    editor.putString("password", "");
editor.putString("checked", "no");
                         editor.commit();
                    }
                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:47:04.863

尝试

```
 String Str_check = app_preferences.getString("checked", "no");
    if(Str_check.equals("yes"))
    {
String Str_user = app_preferences.getString("username","0" );
    String Str_pass = app_preferences.getString("password", "0");

            UserEditText.setText(Str_user);
           PassEditText.setText(Str_pass);
            check.setChecked(true);
    }
else{
   SharedPreferences.Editor editor = app_preferences.edit();
                    editor.putString("username", "");
                    editor.putString("password", "");
                     editor.commit();
} 
```

# visual-studio-2010 - 通过 Visual Studio 2010 运行经典 ASP - 脚本无法呈现

> ID：10240368
> 
> 赞同：0
> 
> 时间：2012-04-20T04:41:36.637
> 
> 标签：visual-studio-2010, iis-7, asp-classic

我已经按照这篇[http://www.falconwebtech.com/post/2010/12/28/Debugging-Classic-ASP-in-IIS7-and-VS2010.aspx](http://www.falconwebtech.com/post/2010/12/28/Debugging-Classic-ASP-in-IIS7-and-VS2010.aspx)文章将我的笔记本电脑设置为通过 Visual Studio 运行经典 ASP 网站2010 年。

但是，由于某种原因，我运行供应商.asp 的页面没有被呈现。我可以正常运行自定义服务器，但在 Google Chrome 中没有显示任何内容。服务器只是没有渲染经典的 VB 脚本，我在谷歌浏览器中打开了源文件，但没有 html 代码。

有什么问题？

# java - 如何将现有的程序代码转换为使用类？

> ID：10240370
> 
> 赞同：0
> 
> 时间：2012-04-20T04:41:51.797
> 
> 标签：java, oop

我正在尝试学习 Java，基本上我的方法是采用我从 python 中学到的程序风格，并将其应用于 Java。所以我从不使用类，只是把所有东西放在一个有很多方法的类中（我只是用作 python 函数）。我想我遇到了一个问题，需要硬着头皮使用课程，但是我很难弄清楚如何去做。

为了简化我的问题（忽略糟糕的设计——这只是为了说明这一点），我有一个程序，它接受一个列表，并在 for 循环中对每个项目进行一些数学运算（在这种情况下，将 1 添加到列表的值） . 我只希望它在列表中的 2 个项目上工作，然后停止（在此示例中，它是前 2 个项目，但在我的实际程序中，它可能在列表中的任何位置）。这是类似于我已经在做的工作代码：

没有课程：

```
public class LearningClasses {
    public static void main(String[] args) {
        int[] list = new int[]{1,2,3,4,5,6,7,8,9,10};
        int[] data_list = new int[list.length];

        for (int current_location = 0; current_location<list.length;current_location++) {
            for (int i =0; i<100; i++){
                if (check_size(data_list) == false ) {
                    break;
                }
                data_list[current_location] = (list[current_location]+1);
            }
        }

        //its done now lets print the results
        for (Integer item : data_list) {
            System.out.println(item);
        }
    }

    private static boolean check_size(int[] data_list) {
        // TODO Auto-generated method stub
        int count = 0;
        for (int item : data_list) {
            if (item != 0) {
                count++;
                if (count>=2) {
                    break;
                }
            }
        }
        if (count>=2) {
            return false;
        } else {
            return true;
        }
    }
} 
```

这段代码的问题是虽然它可以工作但效率低下，因为它计算了第二个 for 循环的每次迭代的计数。在我的程序中，我不能在第一个之上放置任何东西，`for loop`但我可以在它之下放置任何东西，所以我认为不是每次都进行计数，也许我可以使用一个类来以某种方式维持状态并增加数字，而不是每次都重新计算。

与类：

```
public class LearningClassesCounter {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int[] list = new int[]{1,2,3,4,5,6,7,8,9,10};
        int[] data_list = new int[list.length];
        for (int current_location = 0; current_location<list.length;current_location++) {
            //can only put commands in here. Nothing above.
            Counter checker = new Counter(data_list);
            System.out.println(checker.check_data());
            for (int i =0; i<100; i++){
                data_list[current_location] = (list[current_location]+1);
            }
        }

        //its done now lets print the results
        for (Integer item : data_list) {
            System.out.println(item);
        }
    }
}

class Counter {
    private int count;             // current value
    private boolean continue_or_not;
    private int[] data_list;

    // create a new counter with the given parameters
    public Counter(int[] data_list) {
        data_list = this.data_list;
        count = 0;
        continue_or_not = true;
    } 

    public boolean check_data() {
        // TODO Auto-generated method stub
        int count = 0;
        for (int item : data_list) {
            if (item != 0) {
                count++;
                if (count>=3) {
                    break;
                }
            }
        }

        if (count>=3) {
            return false;
        } else {
            return true;
        }
    }

    // increment the counter by 1
    public void increment() {
        count++;
    } 

    // return the current count
    public int value() {
        return count;
    } 
} 
```

这不起作用，因为它认为 data_list 是一个空指针（我知道我将它声明为空，但如果我将它设为私有 int[] data_list = data_list 它也不会编译）。我的最终目标是进行某种控制，在这种情况下将其限制为 2 个项目，但我还想添加其他限制，例如所有项目的总价值不能超过 X 或不能低于 X，并希望通过以下方式节省 CPU 功率不必每次都进行完整的计算。所以我认为我需要能够增加这些值，然后需要检查这些增量是否超过阈值。

谁能帮我理解我做错了什么？我只是语法错误吗？还是我设计错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T04:59:34.753

//这里只能放命令。上面什么都没有。计数器检查器 = new Counter(data_list); System.out.println(checker.check_data());

当您调用 checker.check_data() 时，它试图解析 data_list，但它是空的。因此，它会引发 NullPointerException。是空的`data_list`，因为在您的构造函数中，您可能需要像这样初始化`this.data_list = data_list`而不是`data_list = this.data_list`（这里`this.data_list`没有引用所以为 NULL）

如果你避免调用，输出将是 2,3,4,5,6,7,8,9,10,11。

# java - 基于 Jackson 字段的序列化

> ID：10240372
> 
> 赞同：7
> 
> 时间：2012-04-20T04:42:21.487
> 
> 标签：java, json, jackson

我认为杰克逊做了基于方法的序列化，有什么方法可以使它基于字段？

前任：

```
class Bean {
    Integer i;
    String s;

    public Integer getI() { return this.i; }
    public void setI(Integer i) { this.i = i; }
    public bool isSetI() { return this.i != null; }

    // same for s as well
} 
```

输出 JSON 有“i”和“setI”。无论如何我可以覆盖它以获得仅“i”吗？如果有一种方法可以在不向类添加任何注释的情况下执行此操作（它们是自动生成的），那就太好了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-06T16:05:20.577

查看 @JsonAutoDetect 注释。例子：

```
@JsonAutoDetect(fieldVisibility=Visibility.ANY, getterVisibility=Visibility.NONE, isGetterVisibility=Visibility.NONE, setterVisibility=Visibility.NONE)
public class Bean {
    Integer i;
    String s;

    Integer getI() { return this.i; }
    void setI(Integer i) { this.i = i; }
    bool isSetI() return { this.i == null; }

    // same for s as well
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T21:17:21.007

杰克逊也可以使用字段，是的；但默认情况下只发现公共字段。但是你可以`@JsonProperty`用来标记非公共字段。

需要注意的一点是，如果同时存在方法 (setX, getX) 和字段 (x)，则方法将具有优先权。这通常不是问题，但如果是，您需要显式禁用不使用的方法，方法是`@JsonIgnore`向它们添加 enxt。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-07T10:37:48.970

要在没有注释的情况下完成此操作，您可以`ObjectMapper`通过以下方式配置序列化/反序列化之前：

```
ObjectMapper om = new ObjectMapper();
om.setVisibilityChecker(om.getSerializationConfig().getDefaultVisibilityChecker().
            withGetterVisibility(JsonAutoDetect.Visibility.NONE).
            withSetterVisibility(JsonAutoDetect.Visibility.NONE)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-23T13:14:02.253

接受的答案没有为我产生预期的结果。在不添加注释的情况下对我有用的是`ObjectMapper`按以下方式配置：

```
ObjectMapper om = new ObjectMapper()
        .setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.NONE)
        .setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY); 
```

这对我来说似乎更有意义，它使用字段而不是像标准 Java 序列化那样的 getters\setters。

# coldfusion - VisualVM 和 Coldfusion 8：为什么没有可用的内存采样？

> ID：10240373
> 
> 赞同：4
> 
> 时间：2012-04-20T04:42:22.143
> 
> 标签：coldfusion, coldfusion-8, visualvm, jrun, java-6

我们正在尝试使用 VisualVM 来追踪 CF8 中的一些内存泄漏，但是无法让该工具 100% 工作。基本上，一切都出现了，除了内存采样。说“不支持JVM”。

但是，所有其他功能都可以工作（我们可以进行 CPU 采样，但不能进行内存采样）。发现这种奇怪的是我们可以做除了内存之外的所有其他事情，所以想知道我们是否需要指定另一个 JVM 参数来允许这样做？

其他一些信息：

1.  我们通过 127.0.0.1 或 localhost 在本地连接。
2.  我安装了 Visual GC 插件，它也无法连接。
3.  VisualVM 和 JRUN/CF8 都使用相同的 Java 版本 (1.6.0_31)，但是，它们不是从同一位置提取的（也许这很重要）。VisualVM 使用已安装的 JDK，而 JURN/CF8 仅使用我们在本地复制到 CF8 安装文件夹的二进制文件。
4.  安装了另一个显示 JVM 属性的插件，它说 JVM 不是“可附加的”。不知道这意味着什么，但我只是想提一下。

对此的任何帮助将不胜感激。如果我们能够获得内存采样，我认为我们可以解决最近困扰我们的性能问题。提前致谢！

编辑：

另外，刚刚检查了一下，JRUN 正在“管理员”下启动，而我正在另一个用户下启动 VisualVM。也许这是相关的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T10:06:43.110

是的，您在不同的用户下运行 VisualVM 是相关的。Memory Sampling 使用[Attach API](http://docs.oracle.com/javase/6/docs/technotes/guides/attach/index.html)，它仅在您以同一用户身份运行受监控的应用程序和 VisualVM 时才有效。这也是 JVM 属性报告您的应用程序不可附加的原因。如果您以“管理员”身份运行 VisualVM，它将自动检测您的 Coldfusion 8 应用程序并且内存采样器将工作。

# php - 如何查看应用程序以选择正确的索引 - php & mysql

> ID：10240376
> 
> 赞同：2
> 
> 时间：2012-04-20T04:42:39.560
> 
> 标签：php, database, orm, indexing

我们有一个现有的 PHP/MySQL 应用程序没有正确配置索引（监控显示我们进行了 85% 的表扫描，哎呀！）

确定我们应该将索引放在哪里的一个好的过程是什么？

我们正在使用 PHP（Kohana 使用 ORM 进行数据库访问）和 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:46:36.720

答案可能取决于很多事情。例如，如果您想不惜一切代价优化 SELECT，或者 INSERT 是否对您也很重要，您的策略可能会有所不同。您最好阅读 MySQL Performance Tuning 书籍或网站。有几个体面到伟大的。

如果您有慢查询日志，请检查它以查看是否存在导致问题的特定查询。 [http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.5/en/slow-query-log.html)

如果您知道将要运行的查询类型或通过慢查询日志或其他机制识别出有问题的查询，则可以使用 EXPLAIN 命令获取有关这些查询的一些统计信息。[http://dev.mysql.com/doc/refman/5.5/en/explain.html](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

获得 EXPLAIN 的输出后，您可以使用它进行优化。见[http://dev.mysql.com/doc/refman/5.5/en/using-explain.html](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:50:20.703

索引不仅仅用于主键或唯一键。如果您要搜索的表中有任何列，您几乎应该始终为它们编制索引。

我认为这将帮助您解决数据库问题。

[http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/](http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/)

# c - 无符号和 int gotcha

> ID：10240377
> 
> 赞同：0
> 
> 时间：2012-04-20T04:42:49.573
> 
> 标签：c, types, type-conversion

> **可能重复：**
> [无符号和有符号整数的算术运算](https://stackoverflow.com/questions/2084949/arithmetic-operations-on-unsigned-and-signed-integers)

```
unsigned int b=2;
int a=-2;

if(a>b)
    printf("a>b");
else
    printf("b>a"); 
```

输出：a>b

```
int b=2;
int a=-2;

if(a>b)
    printf("a>b");
else
    printf("b>a"); 
```

输出：b>a

请有人解释一下输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:48:25.610

在第一种情况下，两个操作数都转换为`unsigned int`，转换后的`a`将是`UINT_MAX-1`，它比输出 *大得多。*`b`

除非您了解算术转换的语义，否则不要比较有符号和无符号整数，结果可能会让您感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:14:14.980

您需要学习 C 中运算符的操作以及 C 的提升和转换规则。它们在 C 标准中进行了解释。它的一些摘录加上我的评论：

**6.5.8 关系运算符**
**语法**
1 关系表达式：
shift-expression
关系表达式 < shift-expression
关系表达式 > shift-expression
关系表达式 <= shift-expression
关系表达式 >= shift-expression

**语义**
**3 如果两个操作数都具有算术类型，则执行通常的算术转换。**

**大多数运算符在实际运算（加法、乘法、比较等）之前包括此“通常的算术转换”步骤。** *- 亚历克斯*

**6.3.1.8 常用算术转换**

1 许多期望算术类型的操作数的运算符会以类似的方式导致转换和产生结果类型。目的是确定操作数和结果的通用实数类型。对于指定的操作数，每个操作数都在不改变类型域的情况下转换为对应的实数类型是公共实数类型的类型。除非另有明确说明，否则公共实数类型也是结果的对应实数类型，如果操作数相同，则其类型域为操作数的类型域，否则为复数。这种模式称为通常的算术转换：

*   首先，如果任一操作数的对应实数类型为 long double，则将另一个操作数转换为对应实数类型为 long double 的类型，而不改变类型域。

*   否则，如果任一操作数的对应实数类型为双精度，则将另一操作数转换为对应实数类型为双精度的类型，而不改变类型域。

*   否则，如果任一操作数的对应实数类型为浮点数，则将另一个操作数转换为对应实数类型为浮点数的类型，而不改变类型域。

*   否则，对两个操作数都执行整数提升。然后将以下规则应用于提升的操作数：

*   如果两个操作数具有相同的类型，则不需要进一步转换。

*   否则，如果两个操作数都具有有符号整数类型或都具有无符号整数类型，则具有较小整数转换等级的类型的操作数将转换为具有较高等级的操作数的类型。

*   否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。

*   否则，如果有符号整数类型的操作数的类型可以表示无符号整数类型的操作数的所有值，则将无符号整数类型的操作数转换为有符号整数类型的操作数的类型。

*   否则，两个操作数都转换为与带符号整数类型的操作数类型对应的无符号整数类型。

**6.3.1.3 有符号和无符号整数**

1.  当整数类型的值转换为_Bool以外的其他整数类型时，如果该值可以用新类型表示，则保持不变。

2.  否则，如果新类型是无符号的，则通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。（规则描述的是数学值的算术，而不是给定类型表达式的值。）

3.  否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

因此，在您的`a>b`（`a`作为一个`int`和`b`作为一个`unsigned int`）中，根据上述规则，您在比较之前被`a`转换为`unsigned int`。由于`a`是负数 (-2)，所以无符号值变为`UINT_MAX+1+a`（这是`repeatedly adding or subtracting one more than the maximum value`位）。`UINT_MAX+1+a`在您的情况下是`UINT_MAX+1-2`= ，与(2)`UINT_MAX-1`的值相比，这是一个巨大的正数。`b`因此`a>b`产生“真实”。

忘记你在学校学过的数学。了解 C 是如何做到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T04:57:03.703

以下内容摘自第 44 页和-第 44 页`The C Programming Language`；页面的后半部分详细解释了相同的场景。下面一小部分供大家参考。`Kernighan``Ritchie``2.7 Type Conversions`

`unsigned`当涉及操作数时，转换规则很复杂。问题是`signed`和`unsigned`值之间的比较取决于机器，因为它们取决于`integer`各种类型的大小。例如，假设它`int`是 16 位长并且`long`是 32 位。然后`-1L < 1U`，因为`1U`，这是一个`int`，被提升为一个`signed long`。但是`-1L > 1UL`，因为`-1L`被提升为`unsigned long`，因此似乎是一个更大的正数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:06:13.573

当比较有符号和无符号值时，并且当无符号值不能全部以有符号类型表示时，则将有符号操作数提升为无符号。这是通过一个相当于重新解释 2-s 补码位模式的公式来完成的。

好吧，负数设置了很多高位...

由于您的操作数都是相同的等级，这只是比较无符号位模式的问题。

所以 -2 用 111111..110 表示，比可能的最大值小一，当解释为无符号时，它很容易超过 2。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-20T04:58:43.070

在第一种情况下，您将 unsigned a 转换为带符号的 int。然后将这两者进行比较。

有符号和无符号类型之间的类型转换等级在 C99 中可能具有相同的等级。这是当无符号和有符号类型具有相应的类型时，发生这种情况时，结果取决于编译器。

[这是规则的摘要](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)。

# asp.net - 将空值插入日期字段？

> ID：10240380
> 
> 赞同：7
> 
> 时间：2012-04-20T04:43:00.193
> 
> 标签：asp.net, sql, vb.net, ms-access

我有一个 FormView，我从一个表（MS Access）中提取数据，然后将它（加上更多数据）插入到另一个表中。我的日期有问题。

第一个表有两个日期字段：`date_submitted`和`date_updated`。在一些记录中，`date_updated`是空白的。这导致我在尝试插入第二个表时遇到数据不匹配错误。

这可能是因为我`date_updated`将第一个表中的字段数据绑定到 FormView 上的 HiddenField 中。然后它从 HiddenField 中获取值并尝试将其插入到第二个表中：

```
Dim hfDateRequestUpdated As HiddenField = FormView1.FindControl("hfDateRequestUpdated")
myDateRequestUpdated = hfDateRequestUpdated.Value
'... It then attempts to insert myDateRequestUpdated into the database. 
```

它在有值时起作用，但显然您不能在 Access 中的日期/时间字段中插入任​​何内容。我想我可以创建第二个不插入的插入语句`date_updated`（在没有值时使用`date_updated`），但这是唯一的方法吗？似乎应该有一种更简单/更少冗余的方式。

**编辑**：

好的。所以我尝试插入 SqlDateTime.Null、Nothing 和 DBNull.Value。SqlDateTime.Null 导致值 1/1/1900 被插入到数据库中。“Nothing”会导致它插入 2001 年 1 月 1 日。如果我尝试使用 DBNull.Value，它会告诉我它不能转换为字符串，所以也许我没有做一些完全正确的事情。无论如何，我希望如果没有要插入的内容，Access 中的字段将保持空白，但似乎它必须用一些东西填充它......

**编辑**：

我让 DBNull.Value 工作，它确实插入了一个完全空白的值。所以这是我的最终工作代码：

```
Dim hfDateRequestUpdated As HiddenField = FormView1.FindControl("hfDateRequestUpdated")
Dim myDateRequestUpdated = Nothing

If hfDateRequestUpdated.Value = Nothing Then
    myDateRequestUpdated = DBNull.Value
Else
    myDateRequestUpdated = DateTime.Parse(hfDateRequestUpdated.Value)
End If 
```

感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:24:24.570

莎拉，你有没有试过在更新之前投射日期/时间？数据不匹配错误可能来自`hfDateRequestUpdated.Value`您尝试插入数据库的列类型与列类型不匹配的事实。

尝试单步执行您的代码并查看该值的类型。如果您发现它是一个字符串（看起来可能是，因为它来自表单上的一个字段），那么您需要先检查该字段是否为空字符串 ( `VBNullString`)。如果是这样，您需要将插入数据库的值更改为`DBNull`，您可以在 VB.Net 中使用`DBNull.Value`.

我们看不到您的代码，因此我们不确切知道您如何将值输入数据库，但它看起来像这样

```
If theDateValueBeingInserted is Nothing Then
    theDateValueBeingInserted = DBNull.Value
EndIf 
```

请记住，仅当您从 HiddenField 获得的值是字符串时，上述测试才有效，我相信它是根据[文档](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.value.aspx)。这可能就是您遇到的所有这些麻烦的来源。您正在将您的日期/时间值隐式转换为字符串（这很容易），但将它们隐式转换回来并不是那么容易，特别是如果初始值是`DBNull`

* * *

*在旁边*

我认为 Marshall 试图建议的是上面代码的等价物，但是在一个称为“三元运算符”的快捷表达式中，它在 VB.Net 中看起来像这样：

```
newValue = IF(oldValue is Nothing ? DBNull.Value : oldValue) 
```

不过我不推荐它，因为它会让新程序员感到困惑，并且语法在 2008 年从`IFF(condition ? trueResult : falseResult)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T10:15:22.587

尝试这个：

```
 Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim str As String

    If TextBox1.Text.Length <> 0 Then
        str = "'" & TextBox1.Text & "'"
    Else
        str = "NULL"
    End If

    sql = "insert into test(test1) values(" & str & ")"
    dsave_sql(sql)
End Sub

Function save_sql(ByVal strsql As String, Optional ByVal msg As String = "Record Saved Sucessfully") As String
    Dim sqlcon As New SqlConnection(strConn)
    Dim comm As New SqlCommand(strsql, sqlcon)
    Dim i As Integer
    Try
        sqlcon.Open()
        i = CType(comm.ExecuteScalar(), Integer)
        save_sql = msg
    Catch ex As Exception
        save_sql = ex.Message
    End Try
    sqlcon.Close()
    Return i
End Function 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T15:26:10.643

你的代码

```
Dim myDateRequestUpdated As DateTime
myDateRequestUpdated = DateTime.Parse(hfDateRequestUpdated.Value) : DBNull.Value() 
```

有几个问题：

1.  当您声明`myDateRequestUpdated`为时`DateTime`，您不能将 DbNull.Value 放入其中。
2.  我不确定您是否需要`()`for DbNull.Value：它是一种属性，而不是一种方法（我对 VB 的了解还不够多，无法确定）
3.  VB不知道那个`:`运算符

您可能想要的是`Nullable(Of DateTime)`存储一个也可能丢失的 DateTime 值。

然后使用这样的东西来存储值：

```
myDateRequestUpdated = If(String.IsNullOrWhiteSpace(hfDateRequestUpdated.Value),
   Nothing, DateTime.Parse(hfDateRequestUpdated.Value)) 
```

如果`hfDateRequestUpdated.Value`为空，则`Nothing`作为结果使用；否则将值解析为日期（如果它不是有效日期，则可能会失败！）。

# dynamic - 如何以编程方式在 Cassandra Hector API 中创建二级索引

> ID：10240382
> 
> 赞同：3
> 
> 时间：2012-04-20T04:43:11.237
> 
> 标签：dynamic, indexing, cassandra, hector

我一直在尝试使用以下一组行创建索引。

```
 KeyspaceDefinition fromCluster = cluster.describeKeyspace(KEYSPACE);
 ColumnFamilyDefinition cfDef = fromCluster.getCfDefs().get(0);
 BasicColumnFamilyDefinition columnFamilyDefinition = newBasicColumnFamilyDefinition(cfDef); 
 BasicColumnDefinition columnDefinition = new BasicColumnDefinition();
 columnDefinition.setName(StringSerializer.get().toByteBuffer("A_NO"));    
 columnDefinition.setIndexName("A_NO_idx");
 columnDefinition.setIndexType(ColumnIndexType.KEYS);   
 columnDefinition.setValidationClass(ComparatorType.UTF8TYPE.getClassName());
 columnFamilyDefinition.addColumnDefinition(columnDefinition); 
```

但我无法这样做。实际上，我动态地将数据存储在列中，并动态地创建这些列，之后为了更好的查询目的，我试图在某些特定列上放置索引。任何建议请如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:02:50.487

它最终很简单。您只需要在定义列族时创建二级索引。在上面的代码中，所有的操作都是在对象索引上完成的，该索引必须在定义时创建。添加索引的步骤是

```
 List<ColumnDef> columns = new ArrayList<ColumnDef>();
    columns.add(newIndexedColumnDef("columnName", "UTF8Type"));
    List<ColumnDefinition> columnMetadata = ThriftColumnDef
            .fromThriftList(columns);
    cdefs.add(cf_def);    //cf_def is your columnfamily definition 
```

辅助方法代码来自[KeyspaceCreationTest](http://www.thydoc.com/cassandra-hector-core/doxygen/classme_1_1prettyprint_1_1hector_1_1api_1_1KeyspaceCreationTest.html)

```
 public ColumnDef newIndexedColumnDef(String     column_name, String     comparer){
        ColumnDef cd = new ColumnDef(se.toByteBuffer(column_name), comparer);
        cd.setIndex_name(column_name);
        cd.setIndex_type(IndexType.KEYS);
        return cd;
    } 
```

比较器的参考可以在[这里找到](http://www.datastax.com/docs/1.0/ddl/column_family#about-data-types-comparators-and-validators)

我希望它会帮助你。

# c# - 找不到类型或命名空间名称“T”（您是否缺少 using 指令或程序集引用？）

> ID：10240383
> 
> 赞同：1
> 
> 时间：2012-04-20T04:43:26.183
> 
> 标签：c#, visual-studio, visual-studio-2010, singleton

我正在尝试[单例基类文章](http://codebender.denniland.com/a-singleton-base-class-to-implement-the-singleton-pattern-in-c/)中的一些代码。但是当我编译时，它给了我那个错误信息。我确保项目的目标框架是完整的 4.0，而不是 4.0 客户端框架。代码有什么问题？

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Globalization;
using System.Reflection;

namespace ConsoleApplication1
{
    public abstract class SingletonBase<t> where T : class
    {
        /// <summary>
        /// A protected constructor which is accessible only to the sub classes.
        /// </summary>
        protected SingletonBase() { }

        /// <summary>
        /// Gets the singleton instance of this class.
        /// </summary>
        public static T Instance
        {
            get { return SingletonFactory.Instance; }
        }

        /// <summary>
        /// The singleton class factory to create the singleton instance.
        /// </summary>
        class SingletonFactory
        {
            // Explicit static constructor to tell C# compiler
            // not to mark type as beforefieldinit
            static SingletonFactory() { }

            // Prevent the compiler from generating a default constructor.
            SingletonFactory() { }

            internal static readonly T Instance = GetInstance();

            static T GetInstance()
            {
                var theType = typeof(T);

                T inst;

                try
                {
                    inst = (T)theType
                      .InvokeMember(theType.Name,
                        BindingFlags.CreateInstance | BindingFlags.Instance
                        | BindingFlags.NonPublic,
                        null, null, null,
                        CultureInfo.InvariantCulture);
                }
                catch (MissingMethodException ex)
                {
                    throw new TypeLoadException(string.Format(
                      CultureInfo.CurrentCulture,
                      "The type '{0}' must have a private constructor to " +
                      "be used in the Singleton pattern.", theType.FullName)
                      , ex);
                }

                return inst;
            }
        }
    }

    public sealed class SequenceGeneratorSingleton : SingletonBase<SequenceGeneratorSingleton>
    {
        // Must have a private constructor so no instance can be created externally.
        SequenceGeneratorSingleton()
        {
            _number = 0;
        }

        private int _number;

        public int GetSequenceNumber()
        {
            return _number++;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Sequence: " + SequenceGeneratorSingleton.Instance
                .GetSequenceNumber().ToString());  // Print "Sequence: 0"

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:44:19.750

是这种情况`t`吗？应该是`T`。无论如何，它需要在整个课堂上保持一致，并且大写是惯例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:45:49.513

```
public abstract class SingletonBase<t> where T : class 
```

应该：

```
public abstract class SingletonBase<T> where T : class 
```

C# 区分大小写，因此编译器将`where T : class`其视为引用未知的泛型类型参数，因为您在类型声明中使用了小写的 t `SingletonBase<t>`，.

# matlab - 解决由于非线程安全 API 函数而并行发生的分段错误

> ID：10240387
> 
> 赞同：0
> 
> 时间：2012-04-20T04:43:52.140
> 
> 标签：matlab, thread-safety, segmentation-fault, mex, cplex

我目前正在 MATLAB 中编写一个 MEX 文件，以使用 MATLAB 2012a 中的 parfor 函数并行运行实验。MEX 文件执行一些非常简单的数字任务，但依赖于 IBM 的 CPLEX 12.4 API。

虽然我的 MEX 文件是按顺序[运行的，但当我并行运行时，我不可避免地会收到“随机”分段错误](https://stackoverflow.com/questions/10193451/segmentation-faults-when-running-mex-files-in-parallel)。在将分段错误的堆栈跟踪发送到 MATLAB 后，他们建议错误源自 C 库中的“putenv()”函数，这显然不是线程安全的。

我没有在 MEX 代码中使用 putenv() 函数，但事实证明，我绝对必须从 CPLEX 12.4 调用的函数之一确实使用了它。我想知道是否有什么办法可以避免此功能导致的分段错误。以前有人建议“锁定我的位”和“使用信号量”，但当谈到这些概念时，我真的有点不知所措。

任何建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:30:38.030

事实证明，由于我同时在我的 MATLAB 代码中使用 CPLEX MATLAB API 和在我的 MEX 代码中使用 CPLEX C API，因此发生了违规。这两个 API 都使用 putenv() 函数，该函数不是线程安全的。特别是，只要两个线程尝试同时使用 putenv() 函数（在 MEX 文件或 MATLAB 代码中），就会发生崩溃。

解决方法是使用该包并在 C 和 MATLAB 中使用 putenv() 的函数周围添加一个 mutex_lock / mutex_unlock（即 CPXopenCPLEX in C / Cplex() in MATLAB）。可以在[CPLEX 论坛上的以下帖子中找到更多信息和创建 mutex_lock / mutex_unlock 的确切代码](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=425567&tstart=0)

# css - 如何使用 span 在选定字符和其他字符之间创建不同的样式？

> ID：10240388
> 
> 赞同：0
> 
> 时间：2012-04-20T04:43:58.737
> 
> 标签：css, xhtml

假设我有`<p>hi my name is john</p>`. 我知道我可以`span`用来选择字符，然后使用 CSS 使它们的样式与文本的其余部分不同。但是，如果我希望“name”和“john”与句子的其余部分不同，并且彼此不同，这甚至可能吗？如果是这样，这是如何实现的？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:11:24.560

哟可以`~`为此使用选择器。像这样写：

```
p span{ color: red;  }
p span ~ span{color:green} 
```

检查这个[http://jsfiddle.net/W4Vqk/1/](http://jsfiddle.net/W4Vqk/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:01:28.370

也许我没有抓住重点，但听起来你已经回答了自己的问题。您似乎知道您可以在 span 标签中进行包装`hi`，`john`然后应用 css 来设置它们的样式。

[http://jsfiddle.net/W4Vqk/](http://jsfiddle.net/W4Vqk/)

```
p span:first-child {  }
p span:last-child {  }

<p><span>hi</span>my name is <span>John</span></p> 
```

或者使用类名

[http://jsfiddle.net/ZegR2/](http://jsfiddle.net/ZegR2/)

```
span.foo {  }
span.bar {  }

<p><span class="foo">hi</span>my name is <span class="bar">John</span></p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:03:46.327

就这样做

```
<p>hi my <span>name</span> is <span>john</span></p> 
```

在 CSS 中

```
p span { color:#666666; } 
```

如果想要 name 和 john 的不同样式，只需为两个 span 标签提供不同的类

# wpf - wpf 数据验证控制模板 - 在多个页面上使用时不会得到反映

> ID：10240395
> 
> 赞同：0
> 
> 时间：2012-04-20T04:44:44.027
> 
> 标签：wpf, validation

我正在尝试使用 wpf 数据验证，如下面的链接所示。 [在 WPF 中，如何在 TextBox 中显示验证错误，如下图所示？](https://stackoverflow.com/questions/7147894/in-wpf-how-to-display-validation-error-in-textbox-like-the-image-below) 我面临的问题是，我的应用程序的第一页和最后一页都有一个标题文本框。对于两个页面，使用的视图模型相同，并且两个控件都绑定到相同的属性。如图所示，我将控制模板应用于它们两个，但不知何故，验证部分仅应用于第一个文本框，当我转到最后一页时，我看不到验证错误。它是默认文本框，没有显示任何验证。我的验证是简单的文本框空验证。

此外，当我从最后一页回到第一页时，我的控制模板验证也从第一页消失了。我使用的文本框来自 WPF.Extended.Toolkit.dll (WatermarkTextBox) 知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:01:30.387

**尝试用AdornerDecorator**元素中的文本框包装您的文本框或容器。

```
<UserControl>
 <AdornerDecorator>
  <Grid>
   <TextBox/>
  </Grid>
 </AdornerDecorator>
</UserControl> 
```

# compiler-errors - 什么是 ELF：ELF 错误？

> ID：10240396
> 
> 赞同：0
> 
> 时间：2012-04-20T04:44:46.080
> 
> 标签：compiler-errors, x86

我使用 64 位机器，但有时当我尝试安装和运行 32 位应用程序时，会遇到此类错误。任何人都可以给它一些光。

# java - 来自 jndi 数据源/连接池的 jdbc 连接的“延迟初始化”：可行性

> ID：10240397
> 
> 赞同：2
> 
> 时间：2012-04-20T04:44:49.550
> 
> 标签：java, servlets, jdbc, jndi, connection-pooling

我有一个主控制器 servlet，我在其中实例化了一个**数据源**。servlet 打开和关闭连接。主要是，servlet 使用“工厂模式”实例化来自应用程序的命令。这里有一些代码来解释：

```
public void init() throws ServletException {
    super.init();
    try {
            datasource =(DataSource) getServletContext().getAttribute("DBCPool");
    }
    catch (Exception e) {

    }
}
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
  //some code...
  Connection connection = null;
  if(cmd.mightNeedLazyLoadingAConnection)
  {

       connection = null;
  } 
  else 
       connection = getConnection();//where getConnection is a method: datasource.getconnection();

      //now a command (a java class) is instantied, to which the "null" CONNECTION obj is passed as parameter
     cmdFactory.getInstance().getCommand(Cmd).execute(tsk,connection);

  //some code

//Then wherever there is catch exception i close() the connection
// and it is always closed in finally
finally { 
 if(connection!=null)
  connection.close()
 }

} 
```

现在，对于第一种情况，即**connection=null存在****问题**，因为它永远不会在**“finally”部分关闭连接（在下面的****更新**中解释了原因）。

 ********“connection=null”**适用于命令可能不需要打开数据库连接的情况，因为它正在寻找的数据缓存在[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)中。

我试图 在**.execute(tsk,connection);中将****“Connection”** obj 作为“null”参数传递；然后根据需要在对应的java类中**打开**连接

 ****--> 它确实在命令中打开了连接，但是当进程返回到 servlet 时：**“Connection”为空，因此没有关闭。**
我该怎么做才能使**“Connection”** obj的值得到更新，以便在返回servlet时它不再是“Null”并且我可以关闭它？

我通常更喜欢使用**打开/关闭**数据库连接的控制器 servlet，那么处理这种情况的最佳方法是什么，您必须同时从池中执行某种“延迟加载”数据库连接时间保持分配给servlet的db连接 的**打开/关闭？**

**更新（进一步解释）：**

*   说我有一个命令：**X.java**
*   此命令可能/可能不需要数据库连接（取决于搜索的数据是否在身份映射中）

我想要的系统是：

(1) **“客户请求”**

(2)---> **"Servlet":** command.execute(connection) //where connection = null for now

(3) ---> **"Command X"** : 我需要去数据库还是记录在身份映射中？
(3.a) 需要去数据库的情况：
(3.a.1)connection = datasource.getconnection
(3.a.2) 去获取数据

(4)--->**回到**servlet：**关闭“Servlet”中的“连接”**

现在它一直工作到（3.a.2），但一旦回到（4），连接似乎仍然是“null”，因此代码：

```
finally { 
 if(connection!=null)
  connection.close()
 } 
```

不起作用**（不会关闭连接）**，因此数据库池会像那样被耗尽。连接 - 以“null”开头并在命令“X”内发生变化 - 如何将“globaly”更新为其新值，而不仅仅是在命令“X”的范围内“更新”？

**解决方案**

如果您遇到相同的情况，您可以选择以下**两种解决方案：**

*   您可以使用[LazyConnectionDataSourceProxy](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/LazyConnectionDataSourceProxy.html)，正如@Ryan Stewart 提到的“干净的抽象”和更专业的解决方案

*   或者，如果您想使用下面描述的我的解决方案（基本上我实现了一个类似于“LazyConnectionDataSourceProxy”的类，但它不是那么干净，它比“LazyConnectionDataSourceProxy”具有更少的细节抽象）

**我的个人解决方案，详细信息：**

*   我创建了一个“Helper”类，它的构造函数将“datasource”作为参数
*   此帮助程序类具有以下方法：从池中“延迟获取”连接，“关闭”连接
*   此类在 servlet 中实例化，并且**仅**在整个应用程序需要时才从池中获取连接。

这是我在 servlet 中添加/修改的代码：

```
Connection connection = null;
if(cmd.mightNeedLazyLoadingAConnection)
{

     helper hp =  new helper(datasource);
     cmdFactory.getInstance().getCommand(Cmd).execute(tsk,hp);
} 
else 
{
     connection = getConnection(); 
     cmdFactory.getInstance().getCommand(Cmd).execute(tsk,connection);
} 
```

然后在命令“X”中说，我需要一个数据库连接：

```
Connection connection = hp.LazyGet();//Now got a connection from the pool 
```

这样，当进程流回到 servlet 级别时，我可以：

*   关
*   回滚
*   犯罪
*   ETC..

一切都在助手类的这个 hp 对象上。

**我从中得到什么好处：**

*   我将所有数据库*打开/关闭/提交/回滚*限制在**一个**地方，即负责执行命令的Servlet。
*   有**3**种情况：*从不需要 db / 总是需要 db / 可能需要 db*因此现在我将对数据库的调用减少**1/3**，知道数据库调用随着新功能和新用户注册呈指数增长，这非常重要。

它可能不是**最干净**的解决方法，但在这种方式和额外的“不必要的”1/3 数据库调用之间，它肯定更好。或者，如果您想要一个经过*测试的、抽象的和干净的方法，*则只需使用[LazyConnectionDataSourceProxy 。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/LazyConnectionDataSourceProxy.html)

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:26:43.103

使用[`LazyConnectionDataSourceProxy`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/jdbc/datasource/LazyConnectionDataSourceProxy.html). 然后每次都获得一个“连接”，但只有在您实际执行需要的操作时才会打开真正的连接。因此，您遵循 Hiro2k 指出的“创建/销毁”智慧，因为连接的生命周期完全由您的 servlet 管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:51:34.283

在您的特定情况下，唯一的方法是返回连接。Java 没有任何可以帮助您的引用传递语义，这与 C 不同，您可以将引用传递给连接，然后在方法中设置它。

我不建议您的方法返回连接，而是记住这个简单的规则，一切都会按您的预期工作：

> 创建它的对象负责销毁它。

如果您想要做的不是为不需要的命令实例化连接，则向您的命令接口添加一个方法，该方法在需要时简单地返回。

```
Command command = cmdFactory.getInstance().getCommand(Cmd);
if(command.requiresConnections){
     connection = getConnection();
}
command.execute(tsk,connection); 
```***********

# javascript - 检查一个窗口是否是Popup？

> ID：10240398
> 
> 赞同：29
> 
> 时间：2012-04-20T04:44:52.460
> 
> 标签：javascript, jquery, html

这个问题不是[if window is popup](https://stackoverflow.com/questions/6963240/if-window-is-popup)的重复，而是一个类似的问题。

我正在开发一个将脚本注入所有网页的扩展程序。我需要检测窗口是否弹出。

注意：我不是打开弹出窗口的人，所以上述解决方案不起作用。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-06-16T17:11:09.483

我发现某些浏览器会在某些情况下将 window.opener 设置为 window。这是我现在使用的最可靠的弹出检查。

```
if (window.opener && window.opener !== window) {
  // you are in a popup
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-06-19T18:00:49.017

在 Chrome、Firefox、Safari 和 IE8 中进行测试时，以下内容对我有用。它适用于使用 window.open() 或 target=_blank 创建的窗口。

```
if (window.opener) {
    alert('inside a pop-up window or target=_blank window');
} else if (window.top !== window.self) {
    alert('inside an iframe');
} else {
    alert('this is a top level window');
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T03:24:30.033

`window.locationbar.visible`不一定只用于弹出窗口，但可以帮助检测用户是否可以通过位置栏手动更改位置......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-01-08T03:40:40.190

我使用此代码来确定弹出窗口

```
(window.opener && window.opener !== window && !window.menubar.visible) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T04:58:57.393

如果 window 是弹出窗口或子框架，则以下语句将成立：

```
 window.parent != window 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-21T13:07:38.973

为什么不检查开瓶器是否未定义？弹出窗口有一个开启器，而常规页面没有。

```
if (window.opener != null) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-01T21:54:53.393

The best way, is simply to check the window width, then try to resize the window width in a pixel or two, and then check if the current width equals or not to the one before the resize

in other words, if you succeeded to resize the window, you're probably inside a popup.

good luck.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T04:59:16.307

这不是一个确定的触发方法，但通常使用的弹出窗口`window.open()`不会指向新的 URL，因此两个窗口将具有相同的 href。因此，在很多情况下：

```
window.location.href == window.opener.location.href 
```

对于弹出窗口将是正确的。所以你可以这样做：

```
var isPopup = (window.location.href == window.opener.location.href); 
```

就像我说的，这在我有限的测试中有效，所以可能会有一些反馈表明这在哪里不可靠。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-06T22:26:42.707

对我来说，我正在实现一个注销屏幕，该屏幕可以通过 window.open(..) 或从单个页面中的链接显示在弹出窗口中。

我需要确定：

1）如果我的注销屏幕在弹出窗口中，则：

```
event.preventDefault();
window.close(); 
```

2）否则使用浏览器返回功能..

```
window.history.back(); 
```

我的解决方案：如果页面在弹出窗口中，在我的情况下，它的窗口页面历史记录为 1：

```
event.preventDefault();
if (window.history.length === 1) {
    window.close();
} else {
    window.history.back();
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-05T08:31:42.713

我在“Typescript/Nodejs”中实现了弹出窗口屏幕的“关闭”按钮和“_self”窗口的“取消”按钮，并相信它也适用于 JavaScript。所以我需要确定屏幕是否在弹出窗口中打开

```
if(window.opener || window.history.length === 1) 
     isPopupWindow = true;
else 
   isPopupWindow = false; 
```

“window.opener”适用于几乎所有浏览器，但 IE 存在问题，因此为了处理 IE 问题，我使用了“window.history.length”。

# windows-phone-7 - XBOX LIVE 集成到窗口电话

> ID：10240400
> 
> 赞同：2
> 
> 时间：2012-04-20T04:44:59.043
> 
> 标签：windows-phone-7

我是窗口电话应用程序开发的新手。我的客户要求我们的游戏具有用于排行榜和成就发布的 Xbox Live 启用，就像 iphone 具有游戏中心一样。并且用户必须能够在 Facebook 和 Twitter 上发布他们的分数。我认为 XBOX LIVE 用于排行榜和成就，但找不到任何关于如何做到这一点的好教程。请建议我如何实施所有这些。我应该使用哪个库。有没有关于这个主题的好教程？

直到现在我已经尝试过[这个](http://briansolli.wordpress.com/2011/03/30/online-leaderboard-for-your-wp7-game/)教程。但我认为它不能与 Xbox 真实帐户一起使用。

如果您认为这个问题不适合问，请告诉我，我会尽快删除。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:53:23.887

要使用 Xbox Live 功能，您的应用程序必须获得此标签的批准和“推广”。微软表示 Xbox Live 标签是最好的游戏的专属标签，因此如果您确定您的游戏符合微软的期望，请尝试通过电子邮件与 Xbox Live 团队联系：wpgames@microsoft.com

# gwt - 从 GWT FormPanel 调用 Servlet

> ID：10240404
> 
> 赞同：0
> 
> 时间：2012-04-20T04:45:34.823
> 
> 标签：gwt, servlets

如何将参数从 GWT 的 FormPanel 传递给 Servlet？

```
FormPanel formPanel = new FormPanel();
formPanel.setAction(GWT.getModuleBaseURL()
                + "ntPdfDownload?myParam=" + String.valueOf(document.getId())+ "&myValue="+ConstantName.IS_REQUIRED.toString()+"");
formPanel.setMethod(FormPanel.METHOD_GET);
formPanel.setEncoding(FormPanel.ENCODING_MULTIPART);
formPanel.submit(); 
```

这就是我所做的......但我无法在 Servelt 获得参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:37:29.700

如果您已将方法从 GET 更改为 POST，请确保在 servlet 中您也正在实现

```
public void doPost(HttpServletRequest req, HttpServletResponse resp){...} 
```

而不仅仅是 doGet(...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T04:53:37.953

如果你想使用`ENCODING_MULTIPART`. 你的方法必须是`POST`. 当您要将文件上传到服务器时，通常需要这样做。

我猜你正在将简单的参数传递给你的 servlet。所以，它应该可以在没有 `formPanel.setEncoding(FormPanel.ENCODING_MULTIPART);`.

# iphone - Tableview 中没有行的节数

> ID：10240420
> 
> 赞同：1
> 
> 时间：2012-04-20T04:47:43.587
> 
> 标签：iphone, objective-c, ios, uitableview

如何管理不同部分中的不同行数？行数和节数不固定取决于其他类中的另一个表视图。假设如果 xxx 节标题则它包含 5 行，另一个节标题包含 4 行。部分标题是其他类的表视图中的帐户标题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:00:02.730

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
     return 3; or [yourarray count] // 3 sections 0,1,2
} 
```

对于不同部分的不同行数

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the sections.
    if(  section == 0) // first section with 5 rows
        return [[yourarray objectAtIndex:section] count];

     if(  section == 1) // 2nd section with 4 rows
        return  [[yourarray objectAtIndex:section]  count];

     if(  section == 2) // 3rd section with 57rows
         return  [[yourarray objectAtIndex:section] count];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:57:11.510

在表视图委托方法中；它有：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
     return data.count;
} 
```

和

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
     return [data objectAtIndex:section].count;
} 
```

您可以在这两种方法中设置节数和行数。

当然，您还必须将数据配置为二维数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:06:56.460

希望能帮助到你：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 if(  section == 0)
    return [array count];

 if(  section == 1)
    return [array2 count];

 if(  section == 2)
     return [array3 count];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T04:52:55.630

它真的很简单，使用下面的 tableView 代表 -

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
  // return your another table view's array count here, on which no of sections depends.
}

// Customize the number of rows in the table view.
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   // use like this
  int noOfRows = 0; 

  if(section == 0)
  {
     noOfRows = x;
  }
  else if(section ==1)
  {
     noOfRows = y;
  }
  .
  .
  .
  else
 {  
    noOfRows = z;
 }
 return noOfRows;
} 
```

x, y, z 在这里是 NSInteger

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T05:00:12.513

试试这个

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    if (section == 0){
        return 5;
    }
    if (section == 1){
        return 10;
    }
    //etc.
} 
```

# asp.net-mvc - 如何在我的 MVC4 应用程序中接受来自 Kendo UI 数据源的 JSON 请求？

> ID：10240422
> 
> 赞同：2
> 
> 时间：2012-04-20T04:48:19.043
> 
> 标签：asp.net-mvc, asp.net-mvc-4, kendo-ui

我在我的 MVC3 应用程序中使用了 Kendo UI 网格，对此我感到非常满意。我正在使用 Telerik 提供的示例（摘录如下）来格式化网格的 DataSource 盟友发布的数据，一切都很好。但是，我不想依赖这样的代码。我想让 Kendo 和 MVC 在没有“翻译器”的情况下说话，即这段代码：

```
parameterMap: function(data, operation) {
    var result = { };
    for (var i = 0; i < data.models.length; i++) {
        var model = data.models[i];
        for (var member in model) {
            result["models[" + i + "]." + member] = model[member];
        }
    }
    return result;
} 
```

这个函数是一个“钩子”，它允许我`data`在 Kendo ajaxes 之前对其进行操作。默认情况下，Kendo DataSource 发送内容类型的表单编码，但对于 MVC 模型绑定器来说并不完全正确。没有这个，我仍然可以使用 FormCollection 并进行自己的绑定，但这不是。

当我配置`DataSource`发送 JSON，并将我的映射函数更改为如下所示

```
parameterMap: function(data, operation) {
    return JSON.stringify(data);
} 
```

我在请求中发送了以下数据，但现在我不知道如何让 MVC 绑定到这个。现在我唯一的希望是在 action 方法中获取 Request.Params[0]，然后自己反序列化这个 JSON。

我认为我不应该编写任何代码来让两个 HTTP 端点在当今时代使用 JSON 进行正确通信。我做错了什么，或者，我应该在我身边看什么，即请求的接收者。我真的更愿意尽量减少我对客户端的干预，也许只是`stringify`打电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:35:52.903

不知道这是否仍然是一个问题，因为这是一个相当老的问题，但我有一个场景，我将 json 数据发送到我的控制器，我不得不给它一个“提示”名称是什么模型绑定将正常工作：

```
public JsonResult GetDatByIds([Bind(Prefix="idList[]")]List<Guid> idList) 
```

在我的场景中，kendo 正在序列化我的数据并`idList[]`在表单中给它一个名称 post 而不仅仅是`idList`. 一旦我给它模型绑定提示，它就像一个魅力。这可能与您的方案相同。

# java - Java 多维数组。空指针

> ID：10240424
> 
> 赞同：0
> 
> 时间：2012-04-20T04:48:31.700
> 
> 标签：java, arrays, lwjgl

抱歉，如果我在凌晨 12 点 34 分解释得不好，而且我正在深夜编程，但我需要帮助。顺便说一句，这是在 LWJGL 这是我的代码：

我不断收到 addAt() 和 draw() 的空指针错误；基本上有几个类可以做到，所以当我点击它时，它会运行 addAt(mousex,mousey); 并且在渲染循环中它将继续绘制。new Block(x,y) 类是绘制 QUAD 的类。

```
//beggining
public class Grid {

    Block[][] blocks = new Block[25][25];
    public Grid(){
        for (int x = 0; x < 25 - 1; x++) {
            for (int y = 0; y < 16 - 1; y++) {
                blocks[x][y] = new Block(x,y);
            }
        }
    }
    public void draw(){

        for (int x = 0; x < 25;x++){
            for (int y = 0; y < 25;y++){
                blocks[x][y].draw();
            }   
        }

    }
    public void addAt(int x,int y){

        blocks[x][y] = new Block(x,y);

    }
}
//end 
```

基本上 Main 只是制作一个 Display 并运行绘图循环和输入侦听器。

然后 Block 类只是在定义的 x 和 y 处创建一个四边形。

抱歉，如果我违反了堆栈溢出规则。这是我的第一篇文章，来晚了。:) 提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T04:55:15.280

在添加到块数组时，您的循环是从 0 到 (25-1) 和 (16-1)。在处理块时，循环是从 0 到 25。这很可能会导致 NPE。尝试将块从 0 初始化到 25（对于 x 和 y 值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:00:42.813

我试过你的代码，它工作正常（我没有得到任何异常）。这是我的代码：

```
public class Test {

    private class Block {
        int x, y;

        private Block(int x, int y) {
            this.x = x;
            this.y = y;
        }

        void draw() {

        }
    }

    Block[][] blocks = new Block[25][25];

    public Test(){
        for (int x = 0; x < 25 - 1; x++) {
            for (int y = 0; y < 16 - 1; y++) {
                blocks[x][y] = new Block(x,y);
            }
        }
    }
    public void draw(){

        for (int x = 0; x < 25;x++){
            for (int y = 0; y < 25;y++){
                blocks[x][y].draw();
            }
        }

    }
    public void addAt(int x,int y){
        blocks[x][y] = new Block(x,y);
    }

    public static void main(String[] args) {
        Test t = new Test();
        t.addAt(4,5);
    }
} 
```

=> 问题似乎是深夜编程；-)

# java - 我应该使用哪个序列化库？

> ID：10240426
> 
> 赞同：3
> 
> 时间：2012-04-20T04:48:47.017
> 
> 标签：java, serialization

我想序列化对象上的某些字段。并在反序列化过程中强制通过适当的构造函数重新构造对象。这可能吗 ？

例如：

```
public Person()
{
    private String name;
    private int age;
    private Person parent;

    void Person(String name, int age)
    {
        this.name = name;
        this.age = age;

        this.parent = new Person("Mom", 65);
    }
} 
```

我想存储人的“姓名”和“年龄”字段。并且在反序列化时，调用构造函数并重新创建父对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:07:18.537

xstream 确实支持在增强模式下使用默认构造函数以外的构造函数。

[http://x-stream.github.io/index.html](http://x-stream.github.io/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:10:42.197

如果您更改您的类`Person`以使其实现，`Serializable`那么您可以简单地使用 Java 序列化功能。反序列化过程将重新创建所有对象层次结构。

如果您的任务只是序列化和存储该类，则不需要任何其他库。

这里有一篇关于 Java 序列化的简单[文章。](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:23:22.760

您可以使用[Gson](http://code.google.com/p/google-gson/)对 JSON 表示的对象进行序列化和反序列化。Gson 内置了能够处理通用对象的序列化器和反序列化器，但是如果您需要一些特殊的东西，那么您可以实现自己的。在问题中提到的示例中，如果该类具有不带参数的构造函数，则通用序列化器和反序列化器可能会起作用。

做你需要的简单方法如下：

```
public class Person {
  private String name;
  private int age;
  private Person parent = null;

  public Person() {
    // Required no-args constructor for Gson.
  }

  public Person(String name, int age) {
    this.name = name;
    this.age = age;
  }
} 
```

**序列化**

```
Person joe = new Person("Joe", 20);
Gson gson = new Gson();
String json = gson.toJson(joe);  
==> json is {"name":"Joe","age":"20"} 
```

请注意，您不能使用循环引用序列化对象，因为这将导致无限递归。此外，问题中提供的示例是不可能的，因为父母将被无限期地实例化。

**反序列化**

```
Person joe = gson.fromJson(json, Person.class); 
```

如果您需要比这更自定义的东西，您可以使用自定义序列化和反序列化。从[用户指南](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)：

> **自定义序列化和反序列化**
> 
> 有时默认表示不是您想要的。处理库类（DateTime 等）时经常出现这种情况。Gson 允许您注册自己的自定义序列化器和反序列化器。这是通过定义两个部分来完成的： Json Serialiers：需要为对象定义自定义序列化 Json Deserializers：需要为类型定义自定义反序列化 Instance Creators：如果无参数构造函数可用或已注册反序列化器，则不需要
> 
> ```
> GsonBuilder gson = new GsonBuilder();
> gson.registerTypeAdapter(MyType2.class, new MyTypeAdapter());
> gson.registerTypeAdapter(MyType.class, new MySerializer());
> gson.registerTypeAdapter(MyType.class, new MyDeserializer());
> gson.registerTypeAdapter(MyType.class, new MyInstanceCreator()); 
> ```
> 
> registerTypeAdapter 调用检查类型适配器是否实现多个这些接口并为所有这些接口注册它。
> 
> **编写序列化程序**
> 
> 这是一个如何为 JodaTime DateTime 类编写自定义序列化程序的示例。
> 
> ```
> private class DateTimeSerializer implements JsonSerializer<DateTime> {
>   public JsonElement serialize(DateTime src, Type typeOfSrc,
>       JsonSerializationContext context) {
>     return new JsonPrimitive(src.toString());
>   }
> } 
> ```
> 
> Gson 在序列化过程中遇到 DateTime 对象时调用 toJson()。
> 
> **编写反序列化器**
> 
> 这是一个如何为 JodaTime DateTime 类编写自定义反序列化器的示例。
> 
> ```
> private class DateTimeDeserializer implements
>     JsonDeserializer<DateTime> {
>   public DateTime deserialize(JsonElement
>       json, Type typeOfT, JsonDeserializationContext context)
>       throws JsonParseException {
>     return new DateTime(json.getAsJsonPrimitive().getAsString());
>   }
> } 
> ```
> 
> Gson 在需要将 JSON 字符串片段反序列化为 DateTime 对象时调用 fromJson()

# ruby-on-rails-3 - 三元多对多情况下的Rails模型类关系

> ID：10240436
> 
> 赞同：0
> 
> 时间：2012-04-20T04:50:28.673
> 
> 标签：ruby-on-rails-3, activerecord, relational-database

我有一个“用户”表、“组”表和“邀请”表（加入表）。我正在尝试在 'invitors'(class_name 'User')、'invitees'(class_name 'User') 和 'groups'(class_name 'Group') 之间建立关系，其中 'invitations'(class_name 'Invitation') 是加入具有外键“invitor_id”、“invitee_id”和“group_id”的表。

（许多“邀请者”可以向许多“被邀请者”发出“邀请”以加入许多“组”）

我通过在我的模型类中明确指定 :foreign_key 和 :class_name 尝试了几种方法，但徒劳无功。我刚刚开始学习 Rails 中的“activerecord 关系”概念，我真的很想有效地利用它。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:17:59.807

就术语而言，您在这里试图解决的问题`ActiveRecord`是“自我参照”关联。Ryan Bates 提供了一个很好的示例，几乎可以准确地回答您的情况：

[http://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

在他的示例中，您可以将“ `Friendship`”替换为您对“”的想法`Invitation`。您需要在`group_id`他的 Friendship 模型中添加一个以跟踪`Group`与之`Invitation`相关的。

# objective-c - 从目标c中的基类访问子类成员

> ID：10240445
> 
> 赞同：-2
> 
> 时间：2012-04-20T04:51:35.240
> 
> 标签：objective-c, xcode, oop, inheritance

我试图从基类访问子类成员变量。但我无法访问它。它返回一个空值..

例如..

我有基类 classA 和子类 ClassB。我试图从基类ClassA访问classB成员变量说x。但它返回null。我为classB变量分配了一些值。

我试过这样..

```
In classA.h

@classB

@property (nonatomic, retain) classB *BObj;

In classA.m

#import classB.h

@synthesize BObj;

BObj = [[classB alloc]init];
NSLog(@"%d",BObj.x); //returns NULL

In ClassB.h

@interface ClassB :ClassA

@property(nonatomic,retain) int x;

In ClassB.m

@synthesize x;

x = 10; //This value should be read from super class(Class A). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:02:44.903

正如 Chuck 在评论中所说，这看起来不像真正的代码。你在哪里将 x 设置为 10？如果它不在您的 init 方法中，或者在从 init 调用的方法中，它将不会显示。而且您已通过编辑使您的投诉无效 - 记录 %d 不会显示为空，它将显示为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:20:08.330

试试这个： NSLog(@"%d", BObj.x);

# c# - C# 从当前类外部调用函数

> ID：10240449
> 
> 赞同：0
> 
> 时间：2012-04-20T04:52:14.117
> 
> 标签：c#, function, invoke

目前有一个 mainForm.cs 调用一个类 panel.cs

panel.cs 包含多个带有事件的图片框，例如 _click、_mousedown、_mouseup

我希望从 panel.cs 调用 mainForm.cs 中的一个函数

我需要使用回调/委托吗？是否有其他方法可以访问此功能

我试过 Main main = new Main(); main.functioninMain 不起作用

任何帮助或方向将不胜感激。

例如

```
panel.cs
  private void pb_button1_Click(object sender, EventArgs e)
  {
    this.BeginInvoke(new Action(main.functioninMain));
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:44:59.893

如果我们可以使用像这样的委托和事件

```
public partial class MainForm : Form
{
        public MainForm()
        {
            InitializeComponent();
        }

    private void button1_Click(object sender, EventArgs e)
    {
        Panel formPanel = new Panel();
        formPanel.OnPanelClick += new Panel.OnPanelButtonClick(formPanel_OnPanelClick);
        formPanel.Show();
    }

    void formPanel_OnPanelClick(string a)
    {
        MessageBox.Show(a);
    }
}

public partial class Panel : Form
{
    public delegate void OnPanelButtonClick(string a);
    public event OnPanelButtonClick OnPanelClick = null;

    public Panel()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (OnPanelClick != null)
        {
            OnPanelClick("from Panel.cs");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:59:43.447

您不应实例化 MainForm 的另一个对象，这会创建一个副本，并且具有新 MainForm 的所有对象都不会具有您实际 MainForm 的值。

**方法 1** 您可以尝试创建 MainForm 的静态实例，如下所示

```
public partial class MainForm : Form
{
    public static MainForm Instance = null;
    public MainForm()
    {
        InitializeComponent();
        Instance = this;
    }
    public SomeMethod()
    {
    }
} 
```

现在，如果您有面板类，那么您可以轻松访问 MainClass 的公共方法和变量

```
class Panel : Form
{
    public Panel()
    {
        MainForm.Instance.SomeMethod();
    }

} 
```

**编辑：将句柄作为参数传递给表单** （来自 Ben Voigt 的建议）

**方法二：**

正如 Ben 所建议的，拥有更安全的代码也很重要，因此更简洁的方法是将控件的句柄作为参数传递，然后访问它们。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        TestClass test = new TestClass();
        test.ModifyText(textBox1);
    }
}

public class TestClass
{
    public void ModifyText(TextBox textBox)
    {
        textBox.Text = "New text";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:05:46.747

您应该不惜一切代价避免循环依赖（A 类依赖于 B 类，B 类依赖于 A 类）。

有很多方法可以做到这一点，但也许更简单的方法之一是使用接口。mainForm.cs 是这样实现的：

```
public class mainForm : IMainForm {
  // This method is defined in the interface, so mainForm
  // must implement it.
  public string GetStringFromMainForm() {
    return "Hello from MainForm";
  }

  public void CreatePanel() {
    // pass in a reference to myself so panel knows how to
    // talk to me.
    var panel = new Panel(this);
  }
} 
```

IMainForm（接口）可能如下所示：

```
public interface IMainForm {
  string GetStringFromMainForm();
} 
```

然后您的面板类可以与主窗体对话，而无需显式引用 mainForm.cs：

```
public class Panel {
  // use a private variable to keep track of main form
  private IMainForm _mainForm;

  // Constructor: pass in a class that implements IMainForm. It isn't
  // a type of MainForm, so there's no dependency on the concrete class.
  public Panel(IMainForm mainForm) {
    _mainForm = mainForm;
  }

  public void TalkToMainForm() {
    var resultFromMainForm = _mainForm.GetStringFromMainForm();
    Console.WriteLine(resultFromMainForm);
  }
} 
```

# python - webkit爬虫需要使用squid代理吗？

> ID：10240452
> 
> 赞同：1
> 
> 时间：2012-04-20T04:52:23.673
> 
> 标签：python, webkit, web-crawler, squid

我正在使用 webkit 编写爬虫，webkit 缓存东西吗？我是否需要使用 squid 作为基于 webkit 的爬虫的代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:38:47.793

你在用`QWebKit`吗？PyQt/PySide 默认不使用磁盘缓存。您必须设置一个`QNetworkDiskCache`对象`QNetworkManager`以启用缓存。

[查看webscraping](http://code.google.com/p/webscraping/)[`webkit.py`](http://code.google.com/p/webscraping/source/browse/webkit.py)库中模块的源代码，它展示了如何在 QWebkit 中启用缓存。

# google-app-engine - 带有光标的向后分页正在工作但缺少一个项目

> ID：10240454
> 
> 赞同：8
> 
> 时间：2012-04-20T04:52:47.127
> 
> 标签：google-app-engine, app-engine-ndb

从[寻找想法/替代方案到提供与 GAE 数据存储查询匹配的项目的页面/项目计数/导航](https://stackoverflow.com/questions/9390732/looking-for-ideas-alternatives-to-providing-a-page-item-count-navigation-of-item)，我可以找到提示如何通过 REVERSING ORDER 使用单个光标向后页面导航。

```
class CursorTests(test_utils.NDBTest):

  def testFirst(self):
    class Bar(model.Model):
      value = model.IntegerProperty()

    self.entities = []
    for i in range(10):
        e = Bar(value=i)
        e.put()
        self.entities.append(e)

    q = Bar.query()
    bars, next_cursor, more = q.order(Bar.key).fetch_page(3)
    barz, another_cursor, more2 = q.order(-Bar.key).fetch_page(3, start_cursor=next_cursor)
    self.assertEqual(len(bars), len(barz)) 
```

不幸的是，它因此错误而失败。

> 回溯（最近一次通话最后）：文件“/Users/reiot/Documents/Works/appengine-ndb-experiment/ndb/query_test.py”，第 32 行，在 testFirst self.assertEqual(len(bars), len(baz) ) AssertionError: 3 != 2

是的，反向查询缺少边界中的项目。

```
bars = [Bar(key=Key('Bar', 1), value=0), Bar(key=Key('Bar', 2), value=1), Bar(key=Key('Bar', 3), value=2)] 
bars = [Bar(key=Key('Bar', 2), value=1), Bar(key=Key('Bar', 1), value=0)] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T15:02:25.597

好的，这是官方的答案。您需要“反转”光标，如下所示：

```
rev_cursor = cursor.reversed() 
```

我自己不知道这一点。:-( 我会确保这显示在 fetch_page() 的文档中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-10T13:39:08.983

处理这些多个游标，加上正向和反向查询，不仅太复杂，而且不允许直接分页（转到第7页），在页面底部有一组页面链接像这样“<< 1 2 3 4 5 >>"，因为你不知道会有多少页。

出于这个原因，我的解决方案是获取整个结果集，或者至少是一个重要的结果集，例如对应于 10 个页面，然后进行简单的划分来处理页面。为了不浪费 Ndb 带宽（和成本），您将首先使用`keys_only=True`. 在确定与当前页面对应的集合后，您可以`key.get()`在实体上执行此操作。如果你愿意，你可以考虑将完整的键列表保存在 memcache 中几分钟，这样查询就不会重新运行，尽管到目前为止我还没有发现这是必要的。

这是一个示例实现：

```
def session_list():
    page = request.args.get('page', 0, type=int)

    sessions_keys = Session.query().order(-Session.time_opened).fetch(100, keys_only=True)
    sessions_keys, paging = generic_list_paging(sessions_keys, page)
    sessions = ndb.get_multi(sessions_keys)

    return render_template('generic_list.html', objects=sessions, paging=paging) 
```

它使用了一个`generic_list_paging`函数来进行分页划分并在结果集中提取正确的子列表：

```
def generic_list_paging(objects, page, page_size=10):
    nb_items = len(objects)
    item_start = min(page * page_size, nb_items)
    item_end = min((page + 1) * page_size, nb_items)
    page_max = (nb_items - 1) // page_size + 1
    objects = objects[item_start: item_end]
    paging = {'page': page, 'page_max': page_max}
    return objects, paging 
```

最后，如果您使用的是 Jinja2，这里是使用`paging`dict 的分页导航：

```
{% if paging.page_max > 1 %}
        <nav>
            <ul class="pagination">
                {% if paging.page > 0 %}
                    <li>
                        <a href="{{ request.path }}?page={{ paging.page-1 }} aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}
                {% for page in range(0,paging.page_max) %}
                    <li {% if page==paging.page %}class="disabled"{% endif %}><a href="{{ request.path }}?page={{ page }}">{{ page+1 }}</a></li>
                {% endfor %}
                {% if paging.page < paging.page_max-1 %}
                    <li>
                        <a href="{{ request.path }}?page={{ paging.page+1 }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
{% endif %} 
```

# apache - Jsp连接错误

> ID：10240456
> 
> 赞同：-2
> 
> 时间：2012-04-20T04:52:58.250
> 
> 标签：apache, class, jsp, jdbc

当我试图运行这段代码来建立连接时......这个错误来了

我正在使用 Apache-tomcat-7.0.8

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 
```

行发生错误：`1 in the jsp file: /test_conn.jsp` 无法将连接解析为类型

```
1: <% Connection connection = null; try { // Load the JDBC driver String driverName = "oracle.jdbc.driver.OracleDriver"; Class.forName(driverName);
2: 
3: // Create a connection to the database
4: String serverName = "URL"; 
```

我试过的代码：

```
<%@page import="java.sql.*,java.io.*,java.text.*,java.util.*" %> 
<%@page import="java.util.*" %> 

<%
 Connection connection = null;
 out.println("Before try"); 
  try { 
      String driverName = "oracle.jdbc.driver.OracleDriver"; 
      Class.forName(driverName); 
      out.println("Entered try"); 
      String url = "jdbc:oracle:thin:@:URL:port:sid"; 
      String username = "usr";
      String password = "pass"; 
      connection = DriverManager.getConnection(url, username, password); 
      out.println("Successfully Connected"); 
   }catch (SQLException e) { 
      out.println("Not  Connected: "+ e.getMessage()); 
   } 
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:56:23.380

您应该必须使用 Servlet 来编写数据库代码，但是您可以导入 java.sql 包或使用带有完全限定包名的 Connection 接口。

```
java.sql.Connection connection = null; 
```

编辑：

您需要将 .jar（例如，对于 oracle 10g - ojdbc14.jar）复制到 WEB-INF/lib 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:02:12.783

在 JSP 中，您忘记包含

```
<%@page import="java.sql.Connection"%> 
```

虽然，这不是一个好习惯。您应该编写 Servlet 和 DAO 类来执行此操作。JSP 用于编写 HTML。

# arrays - Perl：在数组中搜索项目

> ID：10240458
> 
> 赞同：3
> 
> 时间：2012-04-20T04:53:13.273
> 
> 标签：arrays, perl, variables, hash, perl-data-structures

给定一个`array @A`我们想检查`element $B`它是否在其中。一种方法是这样说：

```
Foreach $element (@A){
    if($element eq $B){
        print "$B is in array A";
    }
} 
```

然而，当谈到 Perl 时，我总是在考虑最优雅的方式。这就是我在想的：如果我们将 A 转换为变量字符串并使用，有没有办法找出数组 A 是否包含 B

```
index(@A,$B)=>0 
```

那可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T05:49:27.773

有*很多方法*可以确定元素是否存在于数组中：

1.  **使用 foreach**

    ```
    foreach my $element (@a) {
        if($element eq $b) {
           # do something             
           last;
        }
    } 
    ```

2.  **使用 Grep：**

    ```
    my $found = grep { $_ eq $b } @a; 
    ```

3.  **使用[List::Util](http://search.cpan.org/perldoc?List%3a%3aUtil)模块**

    ```
    use List::Util qw(first); 

    my $found = first { $_ eq $b } @a; 
    ```

4.  **使用由 Slice 初始化的 Hash**

    ```
    my %check;
    @check{@a} = ();

    my $found = exists $check{$b}; 
    ```

5.  **使用 map 初始化的 Hash**

    ```
    my %check = map { $_ => 1 } @a;

    my $found = $check{$b}; 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T04:56:23.613

```
use 5.10.1;

$B ~~ @A and say '$B in @A'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:51:14.490

```
use List::AllUtils qw/ any /;
print "\@A contains $B" if any { $B eq $_ } @A; 
```

# c - 下三角矩阵和上三角矩阵给我错误的答案

> ID：10240463
> 
> 赞同：0
> 
> 时间：2012-04-20T04:53:44.333
> 
> 标签：c, algorithm, matrix, linear-algebra

我正在用 C 语言进行 LU 分解。我的代码非常简单算法可以使用两个循环并行化，一个用于更新下三角矩阵，一个用于更新上三角矩阵，但似乎我错过了一些理解 :(

```
 for (i=0 ; i<N ; i++){
 // A[i][i]=1;
  for (j=i+1 ;j<N ;j++){
      A[j][i] = A[j][i]/A[i][i]; //*Update L*//
  }
  for (j=i+1;j<N;j++){
      for(k=i+1 ;k<N;k++){

          A[j][k] = A[j][k] - A[i][k] * A[j][i];//*Update U*//
       }
    }
 }

  printf("\n Matrix after U transformation: \n");
  print_matrix(); 

for (i=0 ; i<N ; i++){
   A[i][i]=1;
  for (j=i+1 ;j<N ;j++){
      A[j][i] = A[j][i]/A[i][i]; //*Update L*//
  }
  for (j=i+1;j<N;j++){
      for(k=i+1 ;k<N;k++){

          A[j][k] = A[j][k] - A[i][k] * A[j][i];//*Update U*//
         }
      }
     }

     printf("\n Matrix after L transformation: \n");
     print_matrix(); 

This is what I should to get ?! what I'm doing wrong

L =

1.0000         0         0         0         0
0.2000    1.0000         0         0         0
0.2000    0.1667    1.0000         0         0
0.2000    0.1667    0.1429    1.0000         0
0.2000    0.1667    0.1429    0.1250    1.0000

U =

 50.0000   10.0000   10.0000   10.0000   10.0000
     0   48.0000    8.0000    8.0000    8.0000
     0         0   46.6667    6.6667    6.6667
     0         0         0   45.7143    5.7143
     0         0         0         0   45.0000 
```

但我得到的是,,,,L不应该是这样的？！

```
Source Matrix :
50      10      10      10      10
10      50      10      10      10
10      10      50      10      10
10      10      10      50      10
10      10      10      10      50

Matrix after U transformation: 
 50      10      10      10      10
  0      48       8       8       8
  0       0      47       7       7
  0       0       0      46       6
  0       0       0       0      45

 Matrix after L transformation: 
   1      10      10      10      10
   0       1       6       6       6
   0      -2       1      16      16
   0      -2       9       1    -129
   0      -2       9    -134       1 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:12:04.470

你的 U 矩阵是正确的，除了这些是整数而不是浮点数。L 矩阵的对角线也是正确的（您正在设置它的值），但其余的不是。在检查代码与“[数字食谱中的 LU 分解不起作用；我做错了什么？](https://stackoverflow.com/q/5690010/172695) ”的答案后，它是（稍微改变了一下，添加了一些大括号）：

```
for (i = 0; i < N; i++) {
    // compute U
    for (j = i; j < N; j++) {
        for (k = 0; k < i-2; k++) {
            A[i,j] -= A[i,k] * A[k,j];
        }
    }

    // compute L
    for (j = i+1; j < N; j++) {
        for (k = 0; k < i-2; k++) {
            A[j,i] -= A[j,k] * A[k,i];
        }
    }
} 
```

我注意到您的代码中缺少一个循环，这应该是问题所在。另请查看提到的 SO 问题，它提供了一些更有用的提示。

# c++ - 如何在 Visual Studio 中覆盖引用的 c++ 项目的编译器选项

> ID：10240466
> 
> 赞同：0
> 
> 时间：2012-04-20T04:53:52.307
> 
> 标签：c++, visual-studio, static-libraries

我正在使用visual stuido 2010。

我有一个名为“公共库”的静态库。这个公共库被许多其他项目引用。这些项目通过“添加新引用”（在项目属性-> 通用属性-> 添加新引用）来使用公共库。

所有这些项目都有其特殊的编译器选项/预定义的宏。公共库需要符合他们的设置，否则编译失败。有什么简单的方法可以实现这一目标吗？

目前的解决方案是：为每个项目复制一个新的“公共库”项目文件，并在新的项目文件中设置选项/宏。这是非常痛苦的。

# php - PHP数组演示

> ID：10240468
> 
> 赞同：0
> 
> 时间：2012-04-20T04:54:07.530
> 
> 标签：php, arrays

我有一个 php 数组，其演示如下：-

```
<?php 
  $ads = array(); 
  $ads [] = array( 
  'name' => 'Apple', 
  'duration' => '3', 
  'price' => "$5"
  ); 

  $ads [] = array( 
  'name' => 'Orange', 
  'duration' => '2', 
  'price' => "$10"
  ); 

  $ads [] = array( 
  'name' => 'Banana', 
  'duration' => '5', 
  'price' => "$6"
  ); 
```

然后，我想用数据库中的动态数据替换静态数据：-

```
$sql = "SELECT * from tb_fruit order by fruit_id ASC";
$result = mysql_query($sql_approve, $conn_fruit);

while($record = mysql_fetch_array($result))
{
$fruit_id = $record['fruit_id'];
$fruit_name = $record['fruit_name '];
$fruit_price= $record['fruit_price'];
$fruit_duration= $record_approve['fruit_duration']; 
} 
```

实际上，我该如何将这两个演示文稿结合在一起？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:57:21.430

可以修改对结果的迭代（只要在查询中获取所需的属性）

```
$fruit = array();    
while($record = mysql_fetch_array($result))
    {
           $fruit[] = $record;
    } 
```

可能你可以使用**[array_merge](http://php.net/manual/en/function.array-merge.php)**

```
$result = array();

$result = array_merge($ads,$fruit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T04:58:07.483

如果您想获得与第一个示例中类似的结构，您可以修改第二个以创建一个新数组并将其附加到现有`$ads`数组。

```
$sql = "SELECT * from tb_fruit order by fruit_id ASC";
$result = mysql_query($sql_approve, $conn_fruit);

$ads = array();
while($record = mysql_fetch_array($result))
{
    $ads[] = array(
              'name' => $record['fruit_name'],
              'price' => $record['fruit_price'],
              'duration' => $record['fruit_duration']);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:00:35.390

那么，您想用数据库中的信息填充您的“广告”数组吗？看到 mysql_fetch_array 已经返回了一个完全足够的关联数组，这似乎是相当违反直觉的，但是你去吧：

```
$sql = "SELECT * from tb_fruit order by fruit_id ASC";
$result = mysql_query($sql_approve, $conn_fruit);
$ads = array();

while($record = mysql_fetch_array($result))
{
    $ads[] = array (
                       'name' => $record['fruit_name'],
                       'price' => $record['fruit_price'],
                       'duration' => $record['fruit_duration']
                   );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:14:29.547

如果

1.  初始数组不仅仅是一个示例，而是您可能会用 db 数据覆盖的默认数据，以及

2.  水果名称是唯一的（各种主键）

那么您应该将主数组的数组键设置为水果名称的键，这样如果 db 具有不同的值，它将自动被覆盖，否则将不理会。像这样：

```
 $ads ['Apple'] = array( 
  'duration' => '3', 
  'price' => "$5"
  ); 

  $ads ['Orange'] = array( 
  'duration' => '2', 
  'price' => "$10"
  ); 

  $ads ['Banana'] = array( 
  'duration' => '5', 
  'price' => "$6"
  ); 

$sql = "SELECT * from tb_fruit order by fruit_id ASC";
$result = mysql_query($sql_approve, $conn_fruit);

$ads = array();
while($record = mysql_fetch_array($result))
{
    $ads[$record['fruit_name']]['price']    = $record['fruit_price'];
    $ads[$record['fruit_name']]['duration'] = $record['fruit_duration'];
} 
```

现在，如果“Apple”在数据库中，价格和持续时间会被覆盖，否则，它会保留在您在查询之前设置的位置。

您可以更进一步，让查询返回的价格和持续时间都检查一个空值（Null、“”、0），并且仅在它不为空时才设置该值等。但这更多的是业务逻辑决策。

# java - 如何访问 JavaFx 2.0 中的 Controller 类？

> ID：10240471
> 
> 赞同：15
> 
> 时间：2012-04-20T04:54:39.297
> 
> 标签：java, model-view-controller, controller, javafx-2

最近在用JavaFx2.0编写一个软件，但遇到了一个大问题，那就是——如何访问Controller类？对于每个具有相同类类型的控制器类，它们可能会因为它所依赖的模型而表现不同，所以我想获取视图的控制器类并为其提供指定的模型，我可以这样做吗？我试图通过 FXMLLoader 获取控制器，但是 getController() 方法返回 null！为什么？

1.LightView.java

```
FXMLLoader loader = new FXMLLoader();
anchorPane = loader.load(LightView.class.getResource(fxmlFile));//fxmlFile = "LightView.fxml"
//controller = (LightViewController) loader.getController();//fail to get controller!it is null
//I want to -> controller.setLight(light); 
```

2.LightView.fxml

```
<AnchorPane ... fx:controller="light.LightViewController" > 
```

3.LightViewController.java

```
....
private Light light;
public void initialize(URL arg0, ResourceBundle arg1) 
```

4.Light.java

```
.... a simple pojo 
```

所以，我想做的是为每个 LightViewController 提供一个指定的灯光对象（它们来自一个列表）。任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-20T07:44:27.123

我使用以下内容：

```
URL location = getClass().getResource("MyController.fxml");

FXMLLoader fxmlLoader = new FXMLLoader();
fxmlLoader.setLocation(location);
fxmlLoader.setBuilderFactory(new JavaFXBuilderFactory());

Parent root = (Parent) fxmlLoader.load(location.openStream()); 
```

这种方式`fxmlLoader.getController()`不`null`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-07T06:34:59.047

除了 Alf 的回答，我想指出，代码可以更短：

```
URL location = getClass().getResource("MyController.fxml");

FXMLLoader fxmlLoader = new FXMLLoader();

Parent root = (Parent) fxmlLoader.load(location.openStream()); 
```

这也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T01:57:11.560

改用`getResourceAsStream`：

```
anchorPane = loader.load(LightView.class.getResourceAsStream(fxmlFile)); 
```

它很简单，很好用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-12T20:45:10.550

你可以试试这个...

```
 FXMLLoader loader = new FXMLLoader();
    loader.setLocation(getClass().getResource("LightView.fxml"));
    loader.load();
    Parent parent = loader.getRoot();
    Scene Scene = new Scene(parent);
    Stage Stage = new Stage();
    LightViewController lv = loader.getController();
    lv.setLight(light);
    Stage.setScene(Scene);
    Stage.show(); 
```

# c# - 如何使用 C# 可视化 GML

> ID：10240475
> 
> 赞同：1
> 
> 时间：2012-04-20T04:55:25.413
> 
> 标签：c#, .net, data-visualization, gml, drawingml

我想创建可以从 GML 格式可视化几何图形的程序。请问有人知道.NET 中是否有一些功能，或者您知道一些免费的 C# GIS / GeoSpatila 工具包（类似于 Java 的 GeoTools）

非常感谢！

# android - 如何从android中的webservice快速加载数据？

> ID：10240477
> 
> 赞同：1
> 
> 时间：2012-04-20T04:55:37.317
> 
> 标签：android, web-services

我从 Web 服务访问数据，但是当从一个活动移动到另一个活动时，它显示黑屏，直到被加载然后它显示我的活动。

如何避免黑屏和快速访问数据？

代码：

```
JSONObject json = getJSONfromURL(url);   
HttpClient httpclient = new DefaultHttpClient(); 
HttpPost httppost = new HttpPost(url);
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();is =entity.getContent(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:10:11.607

这是一个 AsyncTask 示例 - [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

这是一个进度对话示例 - [http://www.vogella.com/articles/AndroidDialogs/article.html](http://www.vogella.com/articles/AndroidDialogs/article.html)

应该让您朝着正确的方向开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T08:36:59.010

使用异步任务在执行解析时显示进度对话框。在后台方法中执行编写您执行的所有代码，并且 on post 方法显示结果。

# button - 使用 Jquery 切换按钮

> ID：10240478
> 
> 赞同：0
> 
> 时间：2012-04-20T04:55:41.993
> 
> 标签：button, click

我需要帮助。我有这个结构

```
<div class="buttons">
<p onclick="function1('param1')">button1</p>
<p onclick="function2('param2')">button2</p>
<p onclick="function3('param3')">button3</p>
</div> 
```

这段代码可以完美运行，但另外我需要将 class="active" 添加到当前选择的按钮，这是我做不到的。以下代码不起作用。

```
$(document).ready(function() {
$('.buttons').click(function(){
if($(this).hasClass('active')){
return false;
}
else{
$('.buttons > p').removeClass('active');
$(this).addClass('active');
}
});
}) 
```

谁能说如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:58:29.807

你有一个错字

```
<div class="buutons"> 
```

它应该是

```
<div class="buttons"> 
```

还

```
<p onclick="function3('param3')>button3</p> 
```

应该

```
<p onclick="function3('param3')">button3</p> 
```

JSFiddle 在[这里](http://jsfiddle.net/QW3dV/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:03:20.300

删除 p 元素上的 onclick 属性，它将覆盖您在 js 代码中注册的侦听器，而是在 js 代码中注册它。

更改您的代码，在您的第一个选择器中添加“> p”：

```
$(document).ready(function() {
$('.buttons > p').click(function(){
if($(this).hasClass('active')){
return false;
}
else{
$('.buttons > p').removeClass('active');
$(this).addClass('active');
}
});
}) 
```

# r - 缺少数据和属性选择

> ID：10240480
> 
> 赞同：0
> 
> 时间：2012-04-20T04:55:45.427
> 
> 标签：r, statistics, data-mining

我的数据是包含 271 个特征的 1,785,000 条记录。我正在尝试减少用于构建模型的功能数量。

Q1。在探索数据时，我发现一些特征几乎都是缺失数据，比如只有 25 条记录对这个特征有价值，而其他记录有缺失值，所以我认为这信息量不够，最好消除这些特征，是吗？正确的？如果我是对的，我能做到什么水平，我的意思是如果每个特征的 90%、80% 等都是缺失值，我什么时候可以决定摆脱这些特征？（考虑到因变量是 N/Y，整个数据中只有 %1.157 属于 Y）。

Q2。对于数据集中的每个个体，列出了 64 个 trait_type，其中每个可以取值 [1 或 3 或 5] 之一。我的问题是：如果某些特征类型只取值 [5] 或所有记录都缺少 dat，它是否有任何价值，或者我们可以再次消除该特征？

Q3。如果选择删除这些功能，如何从 R 中的 data.frame 中删除列？

谢谢

**更新：** 我正在尝试使用`caret`包来进行变量选择。我应用了这个：

```
ctrl<- rfeControl(functions = lmFuncs, method="cv", verbose = FALSE, returnResamp= 
"final")

lmprofile<- rfe(x,y, sizes = subsets, rfeControl = ctrl) 
```

其中`x`是具有 270 个因变量的 data.frame，y 是自变量的因子，其值为 Y/N。我收到了这个错误：

```
Error in { : 
  task 1 failed - "contrasts can be applied only to factors with 2 or more levels"
enter code here
In addition: There were 11 warnings (use warnings() to see them) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:58:34.073

仅仅因为缺少一列中的大部分数据并不意味着该列将无法预测，这与该列中有许多相同的值相同。

当然有一个截止点，如果该列只能帮助您区分（许多）少数情况，那么可以将其删除，并且只会对整体模型强度产生一点影响。

为了帮助您决定是否保留该列，您可以使用它构建一个单变量模型 - 其中数据集仅包含该列和因变量，并查看该模型的强度。如果它不比随机好多少，那么删除该列可能是安全的。

# android - OpenGL ES Android 的 3D 模型格式

> ID：10240481
> 
> 赞同：0
> 
> 时间：2012-04-20T04:55:49.187
> 
> 标签：android, opengl-es, 3d, 3d-model

当我使用 XNA 模型格式时，很明显是 .X 或 .FBX，它们有骨骼，所以我能够进行动画和碰撞检测，它们可能拥有我需要的一切。但现在我开始使用 Android 和 OpenGL ES，我似乎找不到任何关于首选模型格式的信息，我一直看到 .OBJ 但它们不支持骨骼，我也读过一些关于 collada 和 md5 格式的东西，但在那里听说过加载它们有问题吗？还有关于 min3d 的建议，但我不喜欢使用第三方东西的想法。

有人可以解释一下模型和 OpenGL ES 的情况，为什么没有首选的明显选择（至少从我的角度来看），我应该采用什么格式或解决方案？

这也是我的第一个问题，如果我没有正确解释自己或犯了任何其他问题错误，请写下建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T06:06:01.400

OpenGL ES 比 XNA 低得多，它不提供与 3d 模型“管理”相关的任何内容，因此没有首选的模型/文件格式或骨骼管理。

基本上，如果您不喜欢使用“第三方东西”的想法，那么您将不得不选择您认为合适的任何 3d 模型格式，并自行完成。

OpenGL ES 基本上是一个规范，仅此而已，[Khronos](http://www.khronos.org/opengles/sdk/)提供的“SDK”仅包含一个库。通常，开发资源由各个硬件供应商以代码示例的形式提供。

# arrays - 在数组中找到一个不重复的元素？

> ID：10240483
> 
> 赞同：11
> 
> 时间：2012-04-20T04:56:02.133
> 
> 标签：arrays, algorithm, time-complexity

我有一个`n`元素数组，其中只有一个元素不重复，否则所有其他数字都重复 >1 次。并且数组中的数字范围没有限制。

一些解决方案是：

*   **利用散列，**但这会导致线性时间复杂度但空间复杂度非常差
*   **使用 MergeSort**对列表**`O(nlogn)`进行排序，然后找到不重复的元素**

 **有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:30:06.283

如果您有严格的空间限制，请尝试多次扫描。

假设输入有 n 个元素，而你的记忆中只能保存 m 个元素。如果您使用哈希表方法，在最坏的情况下，您需要处理 n/2 个唯一数字，因此您需要 m>n/2。如果您没有那么大的 m，您可以将 n 个元素划分为 k=(max(input)-min(input))/(2m) 个组，然后继续扫描 n 个输入元素 k 次（在最坏的情况下）案子）：

第 1 次运行：您只使用 hash-get/put/mark/value < min(input)+m*2; 的任何元素；因为在 (min(input), min(input)+m*2) 范围内最多有 m 个唯一元素，您可以处理它。如果你很幸运，你已经找到了唯一的，否则继续。

第 2 次运行：仅对值在 (min(input)+m*2, min(input)+m*4) 范围内的元素进行操作，以此类推

通过这种方式，您将时间复杂度折衷为 O(kn)，但您会得到 O(m) 的空间复杂度界限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T05:04:25.533

我想到了两个想法：

*   对于您的需要，[平滑排序](http://en.wikipedia.org/wiki/Smoothsort)可能是比引用的合并排序更好的选择，因为它在内存使用方面是 O(1)，在最坏的情况下是 O(nlogn) 作为合并排序，但在最好的情况下是 O(n)；

*   基于[展开树](http://en.wikipedia.org/wiki/Splay_tree)的（反向）想法，您可以制作一种树，一旦使用它们就会将叶子推向底部（而不是像展开树中那样向上）。这仍然会给你一个 O(nlogn) 植入，但优点是找到唯一元素的 O(1) 步骤，它将是根。排序算法是 O(nlogn) + O(n) 的总和，这个算法是 O(nlogn) + O(1)

否则，正如您所说，使用基于散列的解决方案（如散列实现集）将导致 O(n) 算法（O(n) 插入并添加计数引用并 O(n) 遍历您的集合找到独特的元素），但你似乎不喜欢内存使用，虽然我不知道为什么。内存很便宜，现在...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T17:53:40.977

一种通用方法是实现一种分桶技术（其中散列技术就是这样一种技术），使用它们的标识（比如索引）将元素分配到不同的“桶”中，然后找到具有最小大小的桶（在您的情况下为 1）。我相信这个问题也被称为少数元素问题。集合中的独特元素将有多少桶。

由于冲突以及您的算法如何处理冲突，通过散列执行此操作是有问题的。某些关联数组方法（例如尝试和可扩展散列）似乎并不适用，因为它们更适合字符串。

上述的一种应用是[联合查找数据结构](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)。您的集合将是存储桶，您需要为数组中的每个元素调用 MakeSet() 和 Find()，每次调用的成本为 $O(\alpha(n))$，其中 $\alpha(n) $ 是增长极其缓慢的反阿克曼函数。你可以认为它实际上是一个常数。

当元素已经存在时，您必须执行 Union 。通过一些更改来跟踪具有最小基数的集合，这个解决方案应该可以工作。这个解的时间复杂度是$O(n\alpha(n))$。

您的问题似乎也与[Element Uniqueness 问题](http://en.wikipedia.org/wiki/Element_distinctness_problem)松散相关。**

# linux - 在 Wine 中构建 MSI

> ID：10240484
> 
> 赞同：21
> 
> 时间：2012-04-20T04:56:14.160
> 
> 标签：linux, windows-installer, wine

希望这仍然是 StackOverflow 的主题。

我在 Linux 机器上进行所有开发，但代码将由 Linux 和 Windows 机器运行。

我想使用 Linux 来编译代码，为此我有 mingw-32 和 mingw-w64。

但我想将生成的可执行文件打包成一个不错的 MSI 安装文件。是否可以使用 Linux 中的实用程序或在 Wine 下运行来执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-14T05:50:53.050

您可以结合使用 Wine、Mono 和 WiX 在 Linux 上创建 .msi 包。

对于 openSUSE，我创建了一个名为 wixwine 的包装程序包，它为您提供了来自 Windows Installer XML (WiX) 工具集的“蜡烛”和“灯光”命令，可以在 Linux 上使用。

[你可以在这里](https://build.opensuse.org/package/show?package=wixwine&project=home%3Ahiberis%3Awix)找到我的 wixwine 包

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-06T17:00:54.463

我刚刚发布了 msitools v0.01，这是一组用于检查和创建 Windows Installer 文件的实用程序。它基于 Wine 代码，但移植到 POSIX。

[您可以在http://bonzini.fedorapeople.org/](http://bonzini.fedorapeople.org/)找到源代码和二进制包- 不幸的是，您需要从 git 构建 libgsf，因为我发现了一个错误，并且截至目前还没有发布的版本有修复。链接页面包含带有修复程序的 Fedora RPM。

```
$ msiinfo streams ~/download/Firefox-16.0.2-it.msi 
Binary.New
Binary.Up
Binary.info
Binary.dlgbmp
Binary.CustomBin
Binary.bannrbmp
Binary.completi
Binary.custicon
Binary.exclamic
Binary.insticon
Binary.removico
Binary.repairic
_MAKEMSI_Cabs.MM01.cab
Binary.BannerGraphic.BMP
Icon.firefox.16.0.2.0.ico.exe
DigitalSignature
SummaryInformation
$ msiinfo extract ~/download/Firefox-16.0.2-it.msi _MAKEMSI_Cabs.MM01.cab > firefox.cab
$ cabextract -l firefox.cab
Viewing cabinet: firefox.cab
 File size | Date       Time     | Name
-----------+---------------------+-------------
    917984 | 24.10.2012 12:50:38 | firefox.exe
     18912 | 24.10.2012 12:50:38 | AccessibleMarshal.dll 
```

有一个配套的实用程序 msibuild 来构建 MSI。这是非常低级的，但您可以一起使用这两个工具对您已经在 Windows 上进行的 MSI 进行小的更改。

*更新*：现在托管在[https://live.gnome.org/msitools](https://live.gnome.org/msitools)，它还有一个支持 WiX XML 子集的工具 (wixl)。需要 libgsf 1.14.25 或更高版本。Fedora 18 及更新版本已将其打包。

# android - 个人如何为动态片段保存位置

> ID：10240489
> 
> 赞同：0
> 
> 时间：2012-04-20T04:56:45.607
> 
> 标签：android

我正在尝试创建一个 Activity，它在顶部包含一些 TextView，然后在下面并排放置两个 Fragment。左边的 Fragment 包含一个带有可点击 TextViews 的 LinearLayout，用于允许用户确定哪个 Fragment 显示在右边。如何保留右侧的 Fragment 空间，以便动态切换 Fragment？

我当前的尝试如下所示：main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/MainLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- TextViews go here -->

<fragment
    android:id="@+id/fragmentSelector"
    android:name="com.metastable.android.pe.FragmentSelector"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/empireNameTV"
    android:layout_below="@+id/empireNameTV" />

<fragment
    android:id="@+id/fragmentScreen"
    android:name="com.metastable.android.pe.FragmentSummary"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignTop="@+id/fragmentSelector"
    android:layout_toRightOf="@+id/fragmentSelector" />

</RelativeLayout> 
```

此刻的 fragmentSelector 将始终存在，因此在创建活动时加载它很好，问题出在我的 fragmentScreen 上。就目前而言，它将加载看起来不错的 FragmentSummary，但是当我尝试替换它时，它的布局仍然在背景中，新的 Fragment 放在它上面。这是我进行替换的方法：

```
public void onScreenSelected(int screen) {
    Log.d("PE", "ScreenSelected called!");
    if (screen == currentScreen)
        return;

    FragmentTransaction ft =  fm.beginTransaction();
    switch (screen) {
    case SUMMARY:
        ft.replace(R.id.fragmentScreen, fragmentSummary);
        currentScreen = SUMMARY;
        break;
    case PLANET_MANAGER:
        ft.replace(R.id.fragmentScreen, fragmentPlanetManager);
        currentScreen = PLANET_MANAGER;
        break;
    }
    ft.commit();
} 
```

我的猜测是您无法替换从布局加载的片段，因此我需要一种方法来节省布局中的空间并以编程方式加载片段。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:23:59.513

在我看来，一个解决方法是让不需要的片段不可见。如下图，

```
<LinearLayout>

    <FrameLyout>

        //fragment 1 here

    </FrameLyout>

    <FrameLyout>

        //fragment 2 here

    </FrameLyout>

</LinearLayout> 
```

现在，您可以通过使其父框架布局不可见或消失来隐藏片段。

我希望这能解决你的问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:00:56.247

只需将布局添加到您的 xml 以充当片段的容器。

```
<LinearLayout ...>
    <!-- Dynamic fragments go here -->
</LinearLayout> 
```

# rpm - rpm U 选项要使用吗？

> ID：10240490
> 
> 赞同：0
> 
> 时间：2012-04-20T04:56:52.183
> 
> 标签：rpm, rpmbuild

我想以这样的方式升级我的安装组件，只有指定的文件被替换并且结构不会改变

```
rpm -qlp CDA-4.2.1-201203020211.i386.rpm 
/opt/CDA/agent/bin/agent_client
/opt/CDA/agent/bin/Agent
/opt/CDA/agent/bin/cda_agent
/opt/CDA/agent/conf/agent.conf
/opt/CDA/agent/conf/agent.ini

 rpm -qlp CDA-4.2.1.1-201203020211.i386.rpm 
 /opt/CDA/agent/bin/Agent

   installed component CDA-4.2.1-201203020211.i386.rpm   
       when i do rpm -U  CDA-4.2.1.1-201203020211.i386.rpm 
          all the files get remvoved excpet /opt/CDA/agent/bin/Agent, 
        i'm struggling with the right rpm -U addional options,
         i want only /opt/CDA/agent/bin/Agent to be replaced 
```

我需要防止擦除所有旧版本的包，只是替换了存在的新文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:11:49.010

新 rpm 必须包含所有文件，而不仅仅是要更新的文件。如果您列出文件，因为`%config(noreplace)`它们在更新期间不会被替换，而是如果安装的文件已更改，则会在安装更新的 rpm 后创建 X.rpm 新文件。换句话说，您的 CDA.spec 应该具有：

```
...
%files
...
%config(noreplace) /opt/CDA/agent/conf/agent.ini # similar for other config files
... 
```

# jquery - jqgrid 嵌套子网格第 4 级子网格始终返回子网格的第一个 rowid

> ID：10240492
> 
> 赞同：3
> 
> 时间：2012-04-20T04:57:01.770
> 
> 标签：jquery, jqgrid, nested, subgrid

jqGrid v4.3.2
ie9
win7企业版

我正在使用以下代码生成子网格：

[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html) -> 高级 -> 网格作为子网格

我这样做，我有

1 级子网格*OK*
  2 级子网格*OK*
    3 级子网格*OK*
      4 级子网格*它为 3rd Lvl sg 的每一行加载子网格 OK，但它只显示 3rd Lvl sg 的第一行 id 的数据*

当我检查开发人员工具时，我看到请求总是发送第三个子网格的第一行的 id，我知道如何将自定义参数附加到我已经尝试过的 postData 以及 Oleg K [postData for subgrid in jqgrid不工作？](https://stackoverflow.com/questions/4449130/postdata-for-subgrid-in-jqgrid-not-working)（这在我的情况下不起作用，数据未添加到请求中）

我试图从以下事件中返回 rowdid 但没有运气，它仍然返回第三个子网格的第一行 id，因此，对于第三个子网格上的每一行，子子网格总是返回相同的。

```
subGridRowExpanded  //always returns first row id of the third grid
onSelectRow  //doesn't fire if we click the + icon for expanding the subgrid
beforeSelectRow  //doesn't fire at all 
```

另一个奇怪的行为是，如果我单击第三级子网格上的任何行，它只会选择第一行。

不，抱歉，不能使用 treegrid。

我正在考虑在第三级子网格的每一行的加号图标（第一个单元格）上绑定一个单击事件并触发一个 expandSubGridRow，但问题仍然存在，如何获取我单击*的第三级的行的 rowid子网格*？

最好的问候和提前感谢，非常感谢任何帮助。

```
jQuery("#listsg11").jqGrid({
    url:'server.php?q=1',
    datatype: "xml",
    height: 190,
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
    colModel:[
        {name:'id',index:'id', width:55},
        {name:'invdate',index:'invdate', width:90},
        {name:'name',index:'name', width:100},
        {name:'amount',index:'amount', width:80, align:"right"},
        {name:'tax',index:'tax', width:80, align:"right"},      
        {name:'total',index:'total', width:80,align:"right"},       
        {name:'note',index:'note', width:150, sortable:false}       
    ],
    rowNum:8,
    rowList:[8,10,20,30],
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    multiselect: false,
    subGrid: true,
    caption: "Grid as Subgrid",
    subGridRowExpanded: function(subgrid_id, row_id) {
        var subgrid_table_id;
        subgrid_table_id = subgrid_id+"_t";
        $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table>");
        jQuery("#"+subgrid_table_id).jqGrid({
            url:"subgrid.php?q=2&id="+row_id,
            datatype: "xml",
            colNames: ['No','Item','Qty','Unit','Line Total'],
            colModel: [
                {name:"num",index:"num",width:80,key:true},
                {name:"item",index:"item",width:130},
                {name:"qty",index:"qty",width:70,align:"right"},
                {name:"unit",index:"unit",width:70,align:"right"},
                {name:"total",index:"total",width:70,align:"right",sortable:false}
            ],
            subGrid: true,
            caption: "Grid as Subgrid",
            subGridRowExpanded: function(subgrid_id2, row_id2) {
                var subgrid_table_id2;
                subgrid_table_id2 = subgrid_id2+"_t";
                $("#"+subgrid_id2).html("<table id='"+subgrid_table_id2+"' class='scroll'></table>");
                jQuery("#"+subgrid_table_id2).jqGrid({
                    url:"subgrid.php?q=3&id="+row_id2,
                    datatype: "xml",
                    colNames: ['No','Item','Qty','Unit','Line Total'],
                    colModel: [
                        {name:"num",index:"num",width:80,key:true},
                        {name:"item",index:"item",width:130},
                        {name:"qty",index:"qty",width:70,align:"right"},
                        {name:"unit",index:"unit",width:70,align:"right"},
                        {name:"total",index:"total",width:70,align:"right",sortable:false}
                ],
                subGrid: true,
                caption: "Grid as Subgrid",
                subGridRowExpanded: function(subgrid_id3, row_id3) {
                    var subgrid_table_id3;
                    subgrid_table_id3 = subgrid_id3+"_t";
                    $("#"+subgrid_id3).html("<table id='"+subgrid_table_id3+"' class='scroll'></table></div>");
                    jQuery("#"+subgrid_table_id3).jqGrid({
                        url:"subgrid.php?q=4&id="+row_id3,
                        datatype: "xml",
                        colNames: ['No','Item','Qty','Unit','Line Total'],
                        colModel: [
                            {name:"num",index:"num",width:80,key:true},
                            {name:"item",index:"item",width:130},
                            {name:"qty",index:"qty",width:70,align:"right"},
                            {name:"unit",index:"unit",width:70,align:"right"},
                            {name:"total",index:"total",width:70,align:"right",sortable:false}
                    ]
                    });
                }
                });
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:51:44.587

我仍然认为您在页面上显示的 *all** 子网格中的 *data 之间存在一些 id 冲突。例如，如果您从打开的网格中的某些级别插入具有“1”作为 rowid 的数据，则任何子网格中的任何其他数据都不应插入相同的子网格。

用于理解：您`key:true`用于所有级别的子网格上的`"num"`列。相应的值将不仅仅用于`"num"`网格单元内部的列（内部`<td>here</td>`）。它还将用作网格或子网格 ( )`id`的行的属性值。`<tr>`HTML 不允许页面上的 id 重复。因此，如果您插入带有 id 重复的元素，您可能会产生一些奇怪的效果，这些效果在不同的 Web 浏览器中可能会有所不同。例如，您将尝试选择一行，然后将选择另一行。作为行的选择，您还可能遇到更多难题。因此，您应该填充网格，以便**id 在整个页面上是唯一的**。

为确保不存在 id 重复的问题，您可以使用`idPrefix`option. 在 0 级，您可以使用

```
idPrefix: "m" 
```

（从主要）例如。对于下一级的子网格，您可以使用

```
idPrefix: "s" + row_id + "_" 
```

对于下一级子网格

```
idPrefix: "s" + row_id + "_" + row_id2 + "_" 
```

和

```
idPrefix: "s" + row_id + "_" + row_id2 + "_" + row_id3 + "_" 
```

的定义`jQuery("#"+subgrid_table_id3)`在`subGridRowExpanded`所有先前级别的子网格中。所以你可以访问`row_id`并`row_id2`定义在外部范围。

我希望，在更改之后，您不会遇到任何奇怪的问题，例如您描述的问题。

这是重复的样本

[![单击以显示第四个网格时的第三个网格](../Images/cbbefe9e5f6da3fd8e6041d76d5850af.png)](https://i.stack.imgur.com/LCiVF.png)

# json - JSON JAXB 对象类型序列化

> ID：10240495
> 
> 赞同：1
> 
> 时间：2012-04-20T04:57:18.327
> 
> 标签：json, jaxb, cxf, jettison, badgerfish

我正在尝试使用 CXF 通过 JAXB 序列化 JSON。问题是当要转换的元素是 Object 类型时。

```
@XmlElement(name = "Value")
    protected Object value; 
```

JSON格式的结果是

```
"Value":{"@xsi.type":"xs:string","$":"LED"}} 
```

知道如何转换为简单的 json 格式吗？

```
"Value":"LED" o r "Value":1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T12:49:01.393

看起来您已经为 Jettison 转换器启用[了 BadgerFish](http://badgerfish.ning.com/)表示法（我不知道[Jackson](http://wiki.fasterxml.com/JacksonFAQ#Which_mappings_.28Badgerfish.2C_natural.2C_....29_does_Jackson_implement.3F)或[MOXy](http://blog.bdoughan.com/2012/03/moxy-as-your-jax-rs-json-provider.html)中的 BadgerFish 表示法支持）。

如果您使用 JBoss[`@BadgerFish`](http://grepcode.com/file/repo1.maven.org/maven2/org.jboss.resteasy/resteasy-jettison-provider/2.3.2.Final/org/jboss/resteasy/annotations/providers/jaxb/json/BadgerFish.java#BadgerFish)注释，只需将其删除。如果您使用[`JSONJAXBContext#BADGERFISH`](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.jersey/jersey-bundle/1.12/com/sun/jersey/api/json/JSONJAXBContext.java#86)选项设置，则将其更改为`MAPPED`或`NATURAL`（[查看文档](http://jersey.java.net/nonav/documentation/latest/json.html#d4e949)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T14:07:11.833

`writesiType=false`在`JSONProvider`Bean 配置中设置

# c++ - sysMALLOc：opencv 中的断言失败错误

> ID：10240496
> 
> 赞同：0
> 
> 时间：2012-04-20T04:57:19.563
> 
> 标签：c++, opencv

代码编译成功，但是当我尝试使用一些图像执行代码时出现以下错误。

> malloc.c:3096: sYSMALLOc: 断言 `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof (size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' 失败。中止

我的代码是：

```
#include "opencv2/modules/imgproc/include/opencv2/imgproc/imgproc.hpp"
#include "opencv2/modules/highgui/include/opencv2/highgui/highgui.hpp"
#include <stdlib.h>
#include <stdio.h>

using namespace cv;

/// Global variables
int const min_BINARY_value = 0;
int const max_BINARY_value = 255;

Mat src, src_gray, new_image;
const char* window_name = "Web Safe Colors";

/**
 * @function main
 */
int main( int argc, char** argv )
{
  double sum=0, mean=0;

  /// Load an image
  src = imread( argv[1], 1 );

  /// Convert the image to Gray
  cvtColor( src, src_gray, CV_RGB2GRAY );

  /// Create new image matrix
  new_image = Mat::ones( src_gray.size(), src_gray.type() );

  /// Calculate sum of pixels
  for( int y = 0; y < src_gray.rows; y++ )
  { 
    for( int x = 0; x < src_gray.cols; x++ )
    { 
      sum = sum + src_gray.at<Vec3b>(y,x)[0];
    }
  }

  /// Calculate mean of pixels
  mean = sum / (src_gray.rows * src_gray.cols);

  /// Perform conversion to binary
  for( int y = 0; y < src_gray.rows; y++ )
  { 
    for( int x = 0; x < src_gray.cols; x++ )
    { 
      if(src_gray.at<Vec3b>(y,x)[0] <= mean)
        new_image.at<Vec3b>(y,x)[0] = min_BINARY_value;
      else
        new_image.at<Vec3b>(y,x)[0] = max_BINARY_value;
    }
  }

  /// Create a window to display results
  namedWindow( window_name, CV_WINDOW_AUTOSIZE );

  imshow( window_name, new_image );
  /// Wait until user finishes program
  while(true)
    {
      int c;
      c = waitKey( 20 );
      if( (char)c == 27 )
    { break; }
    }

} 
```

你能帮我找出问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:47:08.133

我无法重现您收到的确切错误消息。在我的计算机上，您的程序以`segmentation fault`.

这样做的原因是，您正在访问灰度值图像的像素，就好像它们是 rgb 图像一样。所以而不是

```
new_image.at<Vec3b>(y,x)[0] 
```

你需要使用

```
new_image.at<uchar>(y,x) 
```

因为在灰度图像中，每个像素只有一个值，而不是 3 个值（红色、绿色和蓝色）的向量。在我应用此更改后，您的程序运行没有错误，并产生了阈值二进制图像的预期输出。

可能正因为如此，您正在覆盖当前使用的其他一些内存 opencv，并且这种内存损坏会导致您的错误消息。

# c++ - 实例化创建线程的类的多个实例......？

> ID：10240499
> 
> 赞同：1
> 
> 时间：2012-04-20T04:57:37.090
> 
> 标签：c++, multithreading, visual-c++

我正在实例化创建线程的类的多个实例。既然线程是静态的，那么对象的实例会不会干扰彼此的线程操作呢？

奇怪的是，我看到 2 个不同的波形并以两种不同的睡眠延迟运行。？？？那么这是否意味着有2个不同的线程？？？

```
void CWaveGeneration::CreateWave()
{

    Y = new double[numPoints];
    X = new double[numPoints];
    I = new int[numPoints];

    CWaveGeneration *pp = this;
    hThread_Wave = CreateThread(NULL, 0, Thread_Wave, pp, 0, NULL); 
    //within the thread, there is the setting of Sleep(iSleep);
}

void CWaveGeneration::CreateWave(int _waveType, double _A, double _w, double _T, double _r, int _numPoints, int _iSleep)
{
    waveType = _waveType;
    A = _A;
    w = _w;
    T = _T;
    r = _r;
    numPoints = _numPoints;
    iSleep = _iSleep;

    CreateWave();
}

DWORD WINAPI CWaveGeneration::Thread_Wave(LPVOID iValue)
{
    CWaveGeneration *p = (CWaveGeneration*)iValue;
    switch (p->waveType)
    {
    case 0:
        p->Sine();
        break;
    case 1:
        p->Square();
        break;
    case 2:
    //  p->Triangle();
        break;
    case 3:
    //  p->SawTooth();
        break;
    }

    return true;
} 
```

* * *

从头文件：

```
static DWORD WINAPI Thread_Wave(LPVOID iValue); 
```

* * *

```
 wave1 = new CWaveGeneration();
    wave1->CreateWave(0,100,10,0,0,200, 10);

    wave2 = new CWaveGeneration();
    wave2->CreateWave(1,80,5,0,0,200, 100);

    // in total, are there 1 thread or 2 threads created here ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:36:26.693

如果您的类中的线程对象是静态的，那么您将只有一个线程用于该类的所有实例。
如果类中的线程对象不是静态的，那么类的每个实例都会有1个线程对象。这应该没有任何问题。

# solr - server.request(up) 上的 Solr 索引失败

> ID：10240514
> 
> 赞同：1
> 
> 时间：2012-04-20T04:59:54.160
> 
> 标签：solr, indexing

在索引到 solr 时，我收到这样的错误。

```
 HTTP Status 500 - lazy loading error
 org.apache.solr.common.SolrException: lazy loading error at
 org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.getWrappedHandler(RequestHandlers.java:260)
 at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:242)
 at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376) at
 org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:365)
 at
 org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:260)
 at
 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
 at
 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
 at 
```

形成的 URL 是：`http://localhost:8080/solr/update/extract?Latitude=51.9125&Longitude=179.5&commit=true&waitFlush=true&waitSearcher=true&wt=javabin&version=2`

（我已经在 Windows 机器上使用 Xampp 配置了 tomcat）

我一直在关注 SOF 和其他各种博客/论坛并尝试对其进行调试，但几个小时我都找不到任何东西。

我在 solr.xml 中添加了以下内容

```
<maxFieldLength>10000</maxFieldLength>
<writeLockTimeout>60000</writeLockTimeout>
<commitLockTimeout>60000</commitLockTimeout>

<lockType>simple</lockType>
<unlockOnStartup>true</unlockOnStartup>
<reopenReaders>true</reopenReaders>

<requestParsers enableRemoteStreaming="true" 
multipartUploadLimitInKB="2048000" />

<lst name="defaults">
<!--str name="echoParams">explicit</str-->
<!--int name="rows">10</int-->
<!--str name="df">text</str-->
<str name="Latitude">Latitude</str>
<str name="Longitude">Longitude</str>
</lst> 
```

甚至尝试将以下内容添加到 solconfig.xml 并重新启动我得到的 tomcat

```
 <requestHandler name="/update/extract" class="org.apache.solr.handler.extraction.ExtractingRequestHandler"> 
     <lst name="defaults"> 
     <str name="ext.map.Last-Modified">last_modified</str> 
     <bool name="ext.ignore.und.fl">true</bool> 
     </lst> 
     </requestHandler> 
```

在 Java 控制台上显示错误：org.apache.solr.common.SolrException: Internal Server Error

1.  我意识到这个问题可能是因为我的 solr home 路径。我创建了一个新目录并在那里复制了所有配置文件并提到它作为我的 solr 路径。但是，我后来更新了 solrconfig.xml，更正了所有 jar 的路径。

2.  还尝试将“pdfbox 和 fontbox”jar 添加到 solr lib 文件夹并重新启动 Tomcat

我的Java代码是：

```
 String urlString = "http://localhost:8080/solr"; 
    SolrServer server = new CommonsHttpSolrServer(urlString);
    ContentStreamUpdateRequest up = new ContentStreamUpdateRequest("/update/extract");
    String fileName=f.toString();
    up.addFile(new File(fileName));
    up.setParam("Latitude", Latitude);
    up.setParam("Longitude", Longitude);
    up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);
    server.request(up); 
```

（端口8080是我配置的）

solr 索引仍然无法在我的最后工作.. 我已经尝试了几个小时调试这个并弄清楚了。如果您能给我一些提示或建议我做错了什么，那就太好了。

> 至于你的参考我已经尝试过： [http ://wiki.apache.org/solr/FrontPage](http://wiki.apache.org/solr/FrontPage) [http://wiki.apache.org/solr/ContentStreamUpdateRequestExample](http://wiki.apache.org/solr/ContentStreamUpdateRequestExample) [http://wiki.apache.org/solr/UpdateRichDocuments](http://wiki.apache.org/solr/UpdateRichDocuments) [http： //wiki.apache.org/solr/ExtractingRequestHandler#Configuration](http://wiki.apache.org/solr/ExtractingRequestHandler#Configuration) [http://lucene.472066.n3.nabble.com/Problem-using-ExtractingRequestHandler-with-tomcat-td494930.html](http://lucene.472066.n3.nabble.com/Problem-using-ExtractingRequestHandler-with-tomcat-td494930.html) [http://lucene.472066.n3。 nabble.com/Internal-Server-Error-td715713.html](http://lucene.472066.n3.nabble.com/Internal-Server-Error-td715713.html) [如何使用 SolrJ 索引 pdf 的内容？](https://stackoverflow.com/questions/5693671/how-to-index-pdfs-content-with-solrj)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T02:00:41.597

最后我找到了解决这个问题的方法。

只需修改，将标签的`SOLR_HOME/conf/solrconfig.xml`所有目录属性从更改为，保存文件`<tab>``"../../dist/"``"../dist/"`

如果遇到此问题，则`solr`必须将目录移动`apache-solr-x.x.x\example`到其他位置，因此`"../../dist/"`需要相应更改相对路径。

记得重新启动你的tomcat，看看它是否工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:25:02.767

你的类路径中有 solr-cell.jar 吗？?

ExtractingRequestHandler 在 solr-cell.jar 中，默认的 solr-server 没有打包

# java - 如何从 WEKA 获取结果

> ID：10240516
> 
> 赞同：0
> 
> 时间：2012-04-20T04:59:59.463
> 
> 标签：java, machine-learning, weka

我了解如何使用 WEKA API 我首先将`arff`其加载到创建`Instances`. 然后这些将被提供给`Classifier`已在此数据集上训练过的人。现在我想给它一个没有标签的新测试数据集，并让 WEKA API 告诉我该实例的标签是什么或可能是什么。这是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:49:19.303

您使用 Classifier.classifyInstance(Instance)

[http://weka.sourceforge.net/doc/weka/classifiers/Classifier.html](http://weka.sourceforge.net/doc/weka/classifiers/Classifier.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:13:03.563

您的训练和测试实例应该看起来完全一样。

特征值1，特征值2.......，特征值n，类别值特征值1，特征值2.......，特征值n，类别值

当您在测试集上应用模型时，Weka 不会为您的模型提供实例的类值。相反，它会问，“嘿，分类器，让我看看你如何根据从训练集中学习的知识为每个测试实例分配类”。然后分类器模型根据它从训练集中学到的知识为每个测试实例分配一个类。Weka 然后对其进行比较并提供精度、召回率、f 分数、ROC、AUC、错误等方面的结果。因此，总而言之，您的测试实例将具有类值。不要排除这一点。否则，您将收到“训练和测试集不兼容”之类的错误。

# jquery - 在 jQuery 中，尝试获取下一个项目没有特定类别

> ID：10240517
> 
> 赞同：10
> 
> 时间：2012-04-20T04:59:59.333
> 
> 标签：jquery, jquery-selectors

我试图在 .focus div 之后获取第一个 not(.hidden) div。在这个例子中，焦点是 X2，我应该返回 X5，跳过 X3 和 X4，因为它们是隐藏的。

```
<div id='CONTAINER'>
    <div id='X1'>eks1</div>
    <div id='X2' class='focus'>eks2</div>
    <div id='X3' class='hidden'>eks3</div>
    <div id='X4' class='hidden'>eks4</div>
    <div id='X5'>eks5</div>
    <div id='X6'>eks6</div>
</div> 
```

这似乎应该是一个非常简单的 jquery 问题，但我对这些东西还很陌生。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-20T05:07:52.487

以下语句应该可以解决您的问题。 `$("#CONTAINER").find("div.focus").nextAll("div").not(".hidden").first();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:05:12.730

使用 nextAll 方法： [http ://api.jquery.com/next/](http://api.jquery.com/next/)

```
$('div.focus').nextAll('div:not(.hidden)').filter(':first'); 
```

这将在 .focus 之后找到下一个不是 .hidden 的 div

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:28:19.977

试试这个！

```
$("#CONTAINER").find("div.focus").next('div[class!="hidden"]') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:05:28.363

```
$nextNotHidden = $('.focus').nextUntil(':not(.hidden)').last().next() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-28T07:40:34.417

试试这个：

```
var stop = true;
$('#CONTAINER> div.focus +div').each(function(){
    if(!$(this).hasClass('hidden') && stop) code
    else stop = false;
}); 
```

# jquery - JQuery 固定侧边栏不适用于长内容

> ID：10240526
> 
> 赞同：0
> 
> 时间：2012-04-20T05:00:56.093
> 
> 标签：jquery, fixed, sidebar

我有一个 wordpress 网站，在帖子页面中我有一个 jquery 固定侧边栏。固定侧边栏从帖子部分开始，在评论部分停止。

我正在使用这个 jquery

```
$window = $(window),
    $sidebar = $("#side-scroller"),
    sidebarTop = $sidebar.position().top,
    sidebarHeight = $sidebar.height(),
    $footer = $("#comments"),
    footerTop = $footer.position().top,    
    $sidebar.addClass('fixed');

    function isScrolledIntoView(elem)
    {
        var docViewTop = $(window).scrollTop();
        var docViewBottom = docViewTop + $(window).height();

        var elemTop = $(elem).offset().top;
        var elemBottom = elemTop + $(elem).height();

        return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
    }

    $window.scroll(function(event) {
        scrollTop = $window.scrollTop(),
        topPosition = Math.max(0, sidebarTop - scrollTop),
        topPosition = Math.min(topPosition, (footerTop - scrollTop) - sidebarHeight);
        $sidebar.css('top', topPosition);

        if(isScrolledIntoView('#comments')){
            $("#side-scroller").hide();
        }
        else{
            $("#side-scroller").show();
        }
    }); 
```

这很好用，但是当帖子内容太长时，它永远不会停在评论部分。

在这里你可以看到演示，

普通帖子（固定侧边栏正常工作） [http://webstutorial.com/html5-css3-toggle-slideup-slidedown/html-5](http://webstutorial.com/html5-css3-toggle-slideup-slidedown/html-5)

和长帖子（侧边栏不断滚动） [http://webstutorial.com/google-server-side-geocoding-php-infobox/website-tweaks/google](http://webstutorial.com/google-server-side-geocoding-php-infobox/website-tweaks/google)

**这不是垃圾邮件，也不是链接建设，所以请不要投反对票**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:38:01.693

我认为它正在工作，但是由于加载后页面的变化，它计算的高度不正确。

所以如果你把它移到 $window.scroll 函数中，它应该在滚动时得到正确的值。

```
$footer = $("#comments"),
footerTop = $footer.position().top; 
```

# java - AsyncTask 和回调 Android

> ID：10240536
> 
> 赞同：1
> 
> 时间：2012-04-20T05:02:12.157
> 
> 标签：java, android, facebook-android-sdk

我需要使用 Facebook 登录，因此我下载了 sdk 并创建了我的方法。

在我获得用户已登录的信息后，我需要将其发送到我的网络服务并回调我的活动。

这是我的代码。onComplete 我试图解释我需要什么：基本上我需要回调我当前的活动。

```
public class DisplayLoginActivity extends FragmentActivity {

    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display_login_activity);

        login();
    }

    public void login(){
        facebook = new Facebook(kAppId);

        facebook.authorize(this, new DialogListener() {

            @Override
            public void onComplete(Bundle values) {
                System.out.println("onComplete");
                        JSONObject me = null;
                        me = new JSONObject(facebook.request("me"));                

                        String id = me.getString("id");     

                        //I want here to call other async request and make it call back to DisplayLoginActivity, for that
                        //reason i created callback with interface so i need to give this of my Activity
                        //If i give this so it's DialogListener this. I tried to do this DisplayLoginActivity.this but it crashes
            }

            @Override
            public void onFacebookError(FacebookError error) {
                error.getMessage();

            }

            @Override
            public void onError(DialogError e) {

            }

            @Override
            public void onCancel() {

            }

        });
    }

} 
```

也许你有一些想法？谢谢。

***编辑：***

```
04-20 08:34:50.270: E/AndroidRuntime(7642): FATAL EXCEPTION: Thread-10
04-20 08:34:50.270: E/AndroidRuntime(7642): java.lang.ExceptionInInitializerError
04-20 08:34:50.270: E/AndroidRuntime(7642):     at com.my.main.DisplayLoginActivity$1$1.run(DisplayLoginActivity.java:161)
04-20 08:34:50.270: E/AndroidRuntime(7642):     at java.lang.Thread.run(Thread.java:1019)
04-20 08:34:50.270: E/AndroidRuntime(7642): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-20 08:34:50.270: E/AndroidRuntime(7642):     at android.os.Handler.<init>(Handler.java:121)
04-20 08:34:50.270: E/AndroidRuntime(7642):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
04-20 08:34:50.270: E/AndroidRuntime(7642):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
04-20 08:34:50.270: E/AndroidRuntime(7642):     at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
04-20 08:34:50.270: E/AndroidRuntime(7642):     ... 2 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:05:37.970

我不熟悉 Facebook API，但您是否尝试过简单地调用`Looper.prepare()`在单独线程上运行的函数（在本例中为 onComplete()）？它应该是线程中的第一个函数调用。

# java - 在java中的switch case中使用字符串

> ID：10240538
> 
> 赞同：60
> 
> 时间：2012-04-20T05:02:17.447
> 
> 标签：java, string, switch-statement

我需要将以下`if`' 更改为`switch`-`case`同时检查 a `String`，以提高圈复杂度。

```
String value = some methodx;
if ("apple".equals(value)) {
    method1;
}

if ("carrot".equals(value)) {
    method2;
}

if ("mango".equals(value)) {
    method3;
}

if ("orange".equals(value)) {
    method4;
} 
```

但我不确定我会得到什么价值。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-04-20T05:09:43.760

Java（版本 7 之前）在 switch/case 中不支持 String。但是您可以通过使用枚举来实现所需的结果。

```
private enum Fruit {
    apple, carrot, mango, orange;
}

String value; // assume input
Fruit fruit = Fruit.valueOf(value); // surround with try/catch

switch(fruit) {
    case apple:
        method1;
        break;
    case carrot:
        method2;
        break;
    // etc...
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-20T05:09:34.640

学会使用`else`。

由于`value`永远不会同时等于两个不相等的字符串，因此只有 5 种可能的结果——一个代表您关心的每个值，一个代表“以上都不是”。但是因为您的代码没有消除无法通过的测试，所以它有 16 个“可能的”路径（2 ^ 测试的数量），其中大多数永远不会被遵循。

对于`else`，唯一存在的路径是实际可能发生的 5 条路径。

```
String value = some methodx;
if ("apple".equals(value )) {
    method1;
}
else if ("carrot".equals(value )) {
    method2;
}
else if ("mango".equals(value )) {
    method3;
}
else if ("orance".equals(value )) {
    method4;
} 
```

`switch`或者开始使用 JDK 7，它包括在语句中使用字符串的能力。当然，Java无论如何都会编译`switch`成`if`/ like 结构......`else`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-02-09T02:13:45.200

现在每个人都在使用至少[Java 7](http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html)，对吧？这是原始问题的答案：

```
String myString = getFruitString();

switch (myString) {

    case "apple":
        method1();
        break;

    case "carrot":
        method2();
        break;

    case "mango":
        method3();
        break;

    case "orange":
        method4();
        break;
} 
```

**笔记**

*   case 语句等效于 using `String.equals`。
*   像往常一样，字符串匹配是区分大小写的。
*   根据[文档](http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html)，这通常比使用链式语句更快（如`if`cHao[的回答](https://stackoverflow.com/a/10240594/3681880)）。`else`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-20T07:10:01.423

要降低圈复杂度，请使用地图：

```
Map<String,Callable<Object>> map = new HashMap < > ( ) ;
map . put ( "apple" , new Callable<Object> () { public Object call ( method1 ( ) ; return null ; } ) ;
...
map . get ( x ) . call ( ) ; 
```

或多态性

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-03T10:15:34.947

只是为了做出具体的埃默里的回答，可执行代码如下：

```
 Map<String,Callable<USer>> map = new HashMap<String,Callable<User>>();
  map.put( "test" , new Callable<User> () { public User call (){ return fillUser("test" ); }} ) ;
  map.put( "admin" , new Callable<Utente> () { public Utente call (){  return fillUser("admin" ); }} ) ; 
```

其中用户是 POJO，然后

```
 User user = map.get(USERNAME).call(); 
```

最后被*调用*的方法在某处：

```
 private User fillUser(String x){        
        User user = new User();
        // set something in User
        return user;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T05:57:25.057

Java 不支持带字符串的 Switch-case。我想[这个](https://stackoverflow.com/questions/338206/switch-statement-with-strings-in-java)链接可以帮助你。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T09:06:16.567

这是一种可能的 pre-1.7 方式，我不推荐：

```
public class PoorSwitch
{
    final static public int poorHash (String s) {
        long l = 0L;
        for (char c: s.toCharArray ()) {
            l = 97*l + c;
        }
        return (int) l;
    }

    public static void main (String args[])
    {
        String param = "foo";
        if (args.length == 1)
        {
            param = args[0];
        }
        // uncomment these lines, to evaluate your hash
        // test ("foo");
        // test ("bar");
        switch (poorHash (param)) {
            // this doesn't work, since you need a literal constant
            // so we have to evaluate our hash beforehand:
            // case poorHash ("foo"): {
            case 970596: {
                System.out.println ("Foo!");
                break;
            }
            // case poorHash ("bar"): {
            case 931605: {
                System.out.println ("Bar!");
                break;
            }
            default: {
                System.out.println ("unknown\t" + param);
                break;
            }
        }
    }

    public static void test (String s)
    {
        System.out.println ("Hash:\t " + s + " =\t" + poorHash (s));
    }
} 
```

也许您可以在生成的代码中使用这样的技巧。否则我不能推荐它。与其说是哈希冲突的可能性让我担心，但如果有东西混淆（剪切和粘贴），很难找到错误。931605 不是一个好的文档。

把它当作概念证明，当作好奇心。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-23T11:04:50.820

我们可以仅在数据类型兼容的 int :short、Shor、byte、Byte、int、Integer、char、Character 或 enum 类型上应用 Switch。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-05T11:48:22.893

[在Java SE 7](http://openjdk.java.net/projects/jdk7/features/)`String`中已经实现了使用 switch 语句评估变量，因此它只在 java 7 中有效。您还可以看看这个新[特性](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/StringSwitchDemo.java)是如何在 JDK 7 中实现的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-21T03:57:11.340

```
 String name,lname;
 name= JOptionPane.showInputDialog(null,"Enter your name");
   lname= JOptionPane.showInputDialog(null,"Enter your father name");
    if(name.equals("Ahmad")){
       JOptionPane.showMessageDialog(null,"welcome "+name);
    }
    if(lname.equals("Khan"))
   JOptionPane.showMessageDialog(null,"Name : "+name +"\nLast name :"+lname ); 

    else {
       JOptionPane.showMessageDialog(null,"try again " );
    } 
  }} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-13T21:45:25.667

Java 8 支持字符串 switchcase。

```
String type = "apple";

switch(type){
    case "apple":
       //statements
    break;
    default:
       //statements
    break; } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-06-01T06:26:57.040

不是很漂亮，但这是另一种方式：

```
String runFct = 
        queryType.equals("eq") ? "method1":
        queryType.equals("L_L")? "method2":
        queryType.equals("L_R")? "method3":
        queryType.equals("L_LR")? "method4":
            "method5";
Method m = this.getClass().getMethod(runFct);
m.invoke(this); 
```

* * *

## 回答 #13

> 赞同：-11
> 
> 时间：2015-05-20T12:09:51.030

```
String value = someMethod();
switch(0) {
default:
    if ("apple".equals(value)) {
        method1();
        break;
    }
    if ("carrot".equals(value)) {
        method2();
        break;
    }
    if ("mango".equals(value)) {
        method3();
        break;
    }
    if ("orance".equals(value)) {
        method4();
        break;
    }
} 
```

# iphone - iPhone App 拍照问题

> ID：10240541
> 
> 赞同：1
> 
> 时间：2012-04-20T05:02:50.800
> 
> 标签：iphone, xcode, ios4

我们最近的 iPhone 应用程序的拍照功能存在问题。我们正在拍照并发送到服务器以保存这张照片。

每当我们用手机在垂直位置拍照时，拍摄的图像都会倒置。但是当我们水平握住手机时，图片显示正确。有人可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:06:55.243

以下代码是实现并解决您的问题，

```
- (UIImage *)scaleAndRotateImage:(UIImage *)image {
    int kMaxResolution = 640; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = roundf(bounds.size.width / ratio);
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = roundf(bounds.size.height * ratio);
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

调用函数

```
 imagVctr.image= UIImagePNGRepresentation([self scaleAndRotateImage:self.imgForEvent]); 
```

可能此代码对您有更多帮助。

# c# - 将对象值添加到数据库

> ID：10240543
> 
> 赞同：0
> 
> 时间：2012-04-20T05:03:04.463
> 
> 标签：c#, asp.net, database

我将申请人文本框数据存储在会话类中。我正在调用会话类并将其存储在一个对象中。

我如何遍历这些项目，并将它们添加到数据库中？

我可以循环并连接成一个字符串吗？我正在使用数据访问层和 oracle 数据库。

这是在 DAL 中插入的字符串。我没有完整的功能，因为我现在不知道要传递什么。但是，我确实有一个运行查询函数，它可以将字符串 sql 传递到其中。

```
public void AddJobApplication()
{
string sql = "insert into JOBQUESTIONS (JOBAPPLICATIONID, QUESTIONTEXT, TYPEID, HASCORRECTANSWER, CORRECTANSWER, ISREQUIRED) VALUES (" + JobID + ", \'" + QuestionText + "\', " + TypeID + ", " + HasCorrectAnswer + ", \'" + CorrectAnswer + "\', " + IsRequired + ")";
 RunQuery(sql); 
```

}

这是我的课程

```
public class JobApplicantSession
{

    public JobApplication ApplicationSession
    {

      get {if (HttpContext.Current.Session["Application"] != null)
               return (JobApplication)HttpContext.Current.Session["Application"];
           return null; }

      set{ HttpContext.Current.Session["Application"] = value; }
    }

} 
```

然后，我可以检索该会话并将其存储在一个对象中

```
JobApplicantSession _sessions = new JobApplicantSession();
JobApplication _application;
_application = new JobApplication(jobID);
_sessions.ApplicationSession = _application;   //_application holds all my saved textbox texts

JobApplication application;

var jas = new JobApplicantSession();
application = jas.ApplicationSession;   //holds all my session text 
```

我想在表 JOBQUESTIONS 中插入多条记录，并且我在应用程序变量中有所有这些记录

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:34:40.680

1.  首先，不要连接参数，最好使用参数化查询，因为目前您对 SQL 注入攻击持开放态度。这篇文章可以让你开始：[http ://www.csharp-station.com/Tutorials/AdoDotNet/Lesson06.aspx](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson06.aspx)

2.  通过 JobApplication 对象 tp SQL 函数（或者如果需要以 List 或数组的形式收集它），您可以遍历每条记录并对其运行插入查询。从您不止一次访问数据库的意义上说，这是一个性能问题。但是，如果您的应用程序很小，那么这不是主要问题。有一些方法可以使用 Dataset 之类的东西一次性发送多个记录的插入，但这对您来说目前可能有点进步，所以如果您不必查看它，那么我建议您循环浏览您的作业应用程序集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:56:28.917

几件事：
首先，它似乎`JobApplication`是一个为特定工作申请保存数据的对象。您不能对此进行迭代。您可能需要一个 JobApplication 列表，并且您的对象应用程序应该类似于
`List<JobApplication> applications = new List<JobApplication>();`
您只能使用 foreach 遍历一个对象，如果它实现了 Ienumerable 接口。（一般来说是对象数组或对象列表）

对于在数据库中插入数据，一旦您能够迭代和构造查询，我建议您构建具有多个值的单个插入语句。然后调用一次以将数据插入数据库。请注意[SQL 注入](http://st-curriculum.oracle.com/tutorial/SQLInjection/index.htm)。此外，如果您认为使用多个插入语句适合您的需要，请使用[事务](http://www.codeproject.com/Articles/18007/Processing-with-C-Oracle-Transactions-and-Oracle-E)

# prolog - 我可以在谓词中使用变量的 subtitude 函子吗

> ID：10240544
> 
> 赞同：2
> 
> 时间：2012-04-20T05:03:17.010
> 
> 标签：prolog, b-prolog

我是 prolog 的新手，并且正在使用 BProlog。

我一直在阅读一些示例程序来对一组相关数据执行查询。但是为了从结构相似的事实中推断，他们写了很多谓词，如`search_by_name`, `search_by_point`，这些谓词部分重复。

```
% working search in example
search_by_name(Key,Value) :-
    Key == name,
    sname(ID,Value),
    point(ID,Point),
    write(Value),write(Point),nl. 
```

当我尝试用更通用的版本替换它们时：

```
% a more general search I want to write
% but not accepted by BProlog
search_by_attr(Key,Value) :-
    Key(ID,Value),
    sname(ID,Name),
    point(ID,Point),
    write(Name),write(Point),nl. 
```

出现错误：

```
| ?- consult('students.pl')
consulting::students.pl
** Syntax error (students.pl, 17-21)
search_by_attr(Key,Value) :-
        Key<<HERE>>(ID,Value),
        sname(ID,Name),
        point(ID,Point),
        write(Name),write(Point),nl.

1 error(s) 
```

我是不是做错了，或者在序言中这种替代是不可能的？

代码和示例数据可以在[https://gist.github.com/2426119找到](https://gist.github.com/2426119)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:01:07.110

我不知道任何接受变量函子的 Prolog。有call/N，或univ+call/1。

```
search_by_attr(Key,Value) :-
    call(Key, ID, Value), % Key(ID,Value)
    ... 
```

或者

```
search_by_attr(Key,Value) :-
    C =.. [Key, ID, Value], % univ
    call(C),                % Key(ID,Value)
    ... 
```

# teamcity - 如何将额外参数传递给 Teamcity 中的 VCS 命令行

> ID：10240552
> 
> 赞同：1
> 
> 时间：2012-04-20T05:04:40.150
> 
> 标签：teamcity

所以我想在下拉源时将一些额外的参数传递给 VCS 命令（在我的情况下是 HG）。

但是“编辑 VCS 根”屏幕不允许我添加额外的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:37:50.863

无法在 UI 中设置此选项。您可以为 hg 命令编写一个包装器，并`Path to hg`在 VCS 根设置的选项中指定此包装器的路径。Wrapper 可以是这样的：

```
#!/bin/bash

case "$1" in
    init|pull|clone)
        command=$1;
        shift;
        hg $command --insecure $*
        ;;
    *)
        hg $*
        ;;
esac 
```

如果您使用代理端结帐，则必须在以下两者上都有此包装器：TeamCity 服务器和代理。此外，如果您认为在 UI 中使用此选项很有用，请随时在[tracker](http://youtrack.jetbrains.com)中创建问题。

# c++ - 野牛如何“工作”：它是如何使用的？

> ID：10240554
> 
> 赞同：2
> 
> 时间：2012-04-20T05:05:05.873
> 
> 标签：c++, bison, tokenize

假设我有这个 C 程序。

```
#include <stdio.h>

int main(void)
{
  int monday = 1;
  int tuesday = 2;

  if(monday == tuesday) { fprintf("I should quit my day job"); }

  return 1;
} 
```

令牌是什么？

**作为程序员，野牛为我提供了**什么？当然，bison 不会**仅**使用解析器语法生成机器代码？那么如何*与*野牛交互呢？我不希望在这里得到完整的答案，只是指向好的网站和书籍的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:23:29.460

Bison 实现了一个广义的 LR 解析器。请参阅[http://www.gnu.org/software/bison/manual/bison.html](http://www.gnu.org/software/bison/manual/bison.html)以获得相当广泛的文档和示例。你不会得到解析树本身；相反，您编写在每次减少时激活的“动作”。当然，如果您的操作只是*构建*一个解析树，那么如果您想获得一个解析树，那就可以了。现代野牛还可以插入许多额外的调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T05:19:13.977

令牌，逐行：

```
#include <stdio.h> 
```

上一行**不是**C 语句，而是由[C 预处理器](http://en.wikipedia.org/wiki/C_preprocessor)使用。

```
int main(void) 
```

五个标记：关键字`int`、标识符`main`、符号`(`、关键字`void`和符号`)`。

```
{ 
```

一个标记：符号`{`。

```
int monday = 1; 
```

五个标记：关键字`int`、标识符`monday`、符号`=`、整数`1`和符号`;`。

... 等等

还应注意，`=`and`==`是两个单独的标记，而字符串是一个单独的标记。

# ios - 如何将 NSString 从字符串值转换为 ASCII 值

> ID：10240555
> 
> 赞同：2
> 
> 时间：2012-04-20T05:05:08.440
> 
> 标签：ios, xcode, nsstring, ascii

如果我有字符串值，`a`它应该显示为`65`，如果它`b`应该显示 ASCII 等价物`66`，所以请任何人帮忙！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:09:43.033

```
NSString *string = @"A";
int asc = [string characterAtIndex:0]; 
```

# iphone - 在 iphone sdk 上使用 Twilio 发送和接收短信？

> ID：10240558
> 
> 赞同：1
> 
> 时间：2012-04-20T05:05:38.400
> 
> 标签：iphone, twilio

我正在使用 Twilio API 进行通话和短信。我无法发送短信。

1.  如何启用我的 Twilio 号码以发送或接收短信？
2.  请与我分享发送或接收短信的任何帮助材料，例如教程或任何代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:17:47.750

目前 Twilio iPhone SDK 不允许发送或接收 SMS。要发送 SMS，您可以根据 www.twilio.com/docs/api/rest/sending-sms 上的说明向 Twilio API 发出 HTTP 请求，并使用您的 Account Sid 和 Auth Token 进行身份验证。这里有一个快速入门教程：http: [//www.twilio.com/docs/quickstart/php/sms/sending-via-rest](http://www.twilio.com/docs/quickstart/php/sms/sending-via-rest)。

# c# - 向 WebService 发送 SOAP 请求错误 500

> ID：10240560
> 
> 赞同：1
> 
> 时间：2012-04-20T05:05:39.553
> 
> 标签：c#, asp.net, web-services, soap

将我的 SOAP 请求发送到我的 Web 服务“远程服务器返回错误：(500) 内部服务器错误。”时出现此异常。WebService 有 2 个参数（int a、int b）。如果我删除这两个参数，那么我不会得到任何异常。

这是我第一次使用 SOAP+WS。我做错了什么？感谢您抽出宝贵时间。

编辑：我的大学刚刚在我的代码中发现了错误。我发送的标题无效。

这是缺少的标题部分：

```
request.Headers.Add("SOAPAction", "http://tempuri.org/Add"); 
```

另外，我使用的网址不正确。错误的：

```
http://localhost:62830/Service1.asmx/Add 
```

正确的：

```
http://localhost:62830/Service1.asmx 
```

这是我将 SOAP 发送到 WebService 的代码客户端

```
private void button2_Click(object sender, EventArgs e)
    {

        var url = UrlTextBox.Text;
        var xml_file_path = FileTextBox.Text;

        XmlDocument xml_doc = new XmlDocument();
        xml_doc.Load(xml_file_path);

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);

        request.Method = "POST";
        request.ContentType = "text/xml";
        request.Accept = "text/xml";
        request.Timeout = 30 * 1000;

        Stream request_stream = request.GetRequestStream();
        xml_doc.Save(request_stream);
        request_stream.Close();

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream r_stream = response.GetResponseStream();

        StreamReader response_stream = new StreamReader(r_stream, System.Text.Encoding.Default);
        string sOutput = response_stream.ReadToEnd();

        ResultTextBox.Text = sOutput;

    } 
```

这里是 XML 文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
      <soap12:Body>
        <add xmlns="http://tempuri.org/" >
        <a>5</a>
        <b>10</b>
        </add>
      </soap12:Body>
    </soap12:Envelope> 
```

这里是 WebService 中的代码

```
 [WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
public class Service1 : System.Web.Services.WebService
{

    [WebMethod]
    public int Add(int a, int b)
    {
        return a + b;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:44:45.590

手动构建 SOAP 信封似乎不是一个好主意。您应该依靠 WSDL 来“添加 Web 引用”，然后选择 WCF。

无论如何，这是我在 web.config 中用于 WS 的配置的一部分

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
  <conformanceWarnings>
    <remove name="BasicProfile1_1"/>
  </conformanceWarnings>
</webServices>
</system.web> 
```

此外，您可以通过直接连接到 .asmx（在 localhost 模式下）来检查 WS 是否在 GET 模式下工作

不知道这是否重要，但我会稍微不同地写信封。我会添加标题“Content-Length”。

```
 <?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Body>
    <a xmlns="http://tempuri.org/">5</a>
    <b xmlns="http://tempuri.org/">10</b>
  </soap12:Body>
</soap12:Envelope> 
```

# android - Android：列表视图 NullPointerException

> ID：10240563
> 
> 赞同：1
> 
> 时间：2012-04-20T05:06:00.070
> 
> 标签：android, listview, nullpointerexception

我编写了一个简单的 android 列表视图，但它在运行时抛出了 java.lang.NullPointerException。在调试模式下检查它，findViewbyId 似乎返回 null。因此，当我到达 setAdapter 时，它会引发异常。但该列表确实存在于 R.java 文件和 main.xml 中。我怎样才能解决这个问题？

```
 setContentView(my.namespace.R.layout.main);
    String[] a={"asd","asdsad"};
    ListView lt;
    lt = (ListView) findViewById(R.id.list);        
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,my.namespace.R.layout.rowitem, a);
    lt.setAdapter(adapter); 
```

主要.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:29:53.300

您的活动是否扩展了 ListActivity？如果您扩展 ListActivity，则不需要单独的布局。请参阅[本](http://www.vogella.com/articles/AndroidListView/article.html)教程以获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:32:55.610

写这个：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,my.namespace.R.layout.simple_list_item_1, a); 
```

参考[这个](http://blogingtutorials.blogspot.in/2010/11/simple-listview-example-in-android_13.html)

# telerik-mvc - Telerik mvc panelbar中每个面板栏项目的AJAX .Beginform

> ID：10240566
> 
> 赞同：0
> 
> 时间：2012-04-20T05:06:36.887
> 
> 标签：telerik-mvc

我有一个场景，比如我必须将每个面板栏项目放入单独的 ajas.beginform 中。所有的面板栏项都是通过模型绑定来的。我该如何解决这个问题？？？

问候马赫什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:28:46.243

哟，您似乎需要为每个面板栏项目分别添加表单-因为如果您围绕整个面板栏-来自其他（甚至隐藏/关闭）项目的所有输入都将与当前打开的输入一起验证/提交物品。

# python - Pyramid：根据设置修改网站内容

> ID：10240572
> 
> 赞同：2
> 
> 时间：2012-04-20T05:07:00.457
> 
> 标签：python, pyramid

是否可以根据 development.ini 或 production.ini 中的特定用户定义设置来更改视图/模板的内容。

例如，我正在开发一个列出班级所有学生的金字塔网络应用程序。后端数据库只有一张表 - 'student'。现在我开发了一个可选脚本，该脚本还将一个表“老师”添加到数据库中。理想情况下，网络应用程序应该能够在这两种情况下运行。如果教师表丢失，它不会查询它并简单地打印学生详细信息。如果教师表存在，它将打印教师姓名和学生姓名。

在我看来，这可以通过以下方式之一完成 -

1.  为教师+学生和仅限学生的页面保留单独的路线 (URL)。问题是，当您只有学生信息时，您无法阻止人们实际致电前者。这将导致不必要的错误页面
2.  在 .ini 文件中使用设置 teacher_enabled=true/false。可以通过 settings['teacher_enabled'] 在 __init __.py 文件中访问该设置。只配置一条路线（比如'home'，'/'），但根据seeting 变量是真/假，将其映射到不同的视图。这将不允许使用 @view_config 装饰器，并且两种情况的模板必须分开
3.  再次使用设置变量，以某种方式将其传递给视图。仅在视图中进行相关查询。例如 - 如果teacher_enabled 为True，则查询教师表，否则仅查询学生表。将此变量也传递给模板，然后决定是否显示一些详细信息（例如教师姓名）。

所以我的问题是我应该使用哪些方法？如果要将设置变量传递给视图，该怎么做？有没有处理这个问题的标准方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:25:46.690

> 为教师+学生和仅限学生的页面保留单独的路线 (URL)。问题是，当您只有学生信息时，您无法阻止人们实际致电前者。

啊，但你可以！将它与数字 2 结合使用：在您的 .ini 文件中添加一个teacher_enabled=true/false 设置，然后您可以使用一些类似于此的代码：

```
from pyramid.threadlocal import get_current_registry
from pyramid.httpexceptions import HTTPFound

#Define some awesome student views here
@view_config(name='student')
def student(request):
    return HTTPFound('Foo!')

if get_current_registry().settings['teacher_enabled']:

    #Some awesome student and teacher views here
    @view_config(name='student_and_teacher')
    def student_and_teacher(request):
        return HTTPFound('Bar!') 
```

3号也是可行的。请记住： [请求宽恕比许可更容易](http://docs.python.org/glossary.html#term-eafp)。所以你可以这样做：（以 SQLAlchemy 为例）

```
from your_models.teacher import Teacher
from sqlalchemy.exc import NoSuchTableError

try:
    teacher = session.query(Teacher).filter(Teacher.id==42).first()
except NoSuchTableError:
    teacher = Teacher('Unknown') 
```

# google-app-engine - 在本地主机上安装谷歌应用程序数据

> ID：10240573
> 
> 赞同：-1
> 
> 时间：2012-04-20T05:07:06.367
> 
> 标签：google-app-engine

我有一个 python 应用程序，它的数据库在谷歌应用程序上。我已经从谷歌应用程序下载了数据，但我不知道如何在本地主机上安装它，我不知道确切的命令。我是 python 和谷歌应用程序的新手。请告诉我是否需要更多信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:36:59.950

只需按照 bulkloader 上传过程，将您的本地服务器指定为上传目标。

# c++ - C 与 C++ 中的 typedef 和 struct 命名空间

> ID：10240577
> 
> 赞同：2
> 
> 时间：2012-04-20T05:07:44.120
> 
> 标签：c++, c, compiler-construction, struct, typedef

我正在尝试在一些新的 C++ 中使用一些旧的 C 库。

该库的头文件使用 D. Hanson 的[“C 接口和实现”](https://rads.stackoverflow.com/amzn/click/com/0201498413)实现隐藏习惯用法：

```
#define T MyAST 

typedef struct T *T; 
```

据我所知，这可以用 C 编译，因为在 C 中，结构名称和 typedef 名称位于不同的命名空间中，但它不能用 C++ ( `extern "C" { #include "MyAST.h" }`) 编译，这显然是因为 typedef 和结构名称位于相同的命名空间中。

```
conflicting declaration 'typedef struct MyAST* MyAST' 
```

我认为我注定将 struct def 移动到标题中并放弃使用该技术，但我真的不想（这个成语在很多代码中使用，有些是我的，有些不是）并认为我会检查here，看看是否有人有任何见解。

PS：如果您不知道习语，它可以让您将结构定义保留在实现C文件中，然后接口（`MyAST.h`）的用户无法进入结构，他们必须在实现中使用您的函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T05:19:31.887

老实说，如果这里的唯一目的是使用一些旧库（我们假设不会更新），我会在您的 C++ 和旧库之间创建一个粘合层。只需编写少量用 C 编译的包装器代码以使用旧库，并提供一个用 C++ 编译到新 C++ 代码的 C 接口。

同名意味着两个不同的东西只会在未来的维护者中造成混淆，所以我会尝试将接口代码隔离到几个源文件中。

最后，虽然我很感激希望在某些时候将接口与实现分开，但您必须相信您的代码用户不会公然违反库的条件，只需以明显的方式对其进行编码，而不是偏执地隐藏结构定义远。

# sql-server - 引用插入表 T-SQL 上的列

> ID：10240582
> 
> 赞同：1
> 
> 时间：2012-04-20T05:08:03.563
> 
> 标签：sql-server, sql-server-2008, tsql

因此，我正在尝试创建一个触发器，如果​​外键代码无效，该触发器将在插入数据时引发错误。我有两个表，Publisher 和 Title。标题上有一个出版商代码，出版商也是如此。我的标题上有用于插入的触发器，我目前正在执行 if not exists 并选择代码等于插入行的发布者代码的发布者行。我不知道这是否是正确的方法，也可能不是，因为 SQL 给了我一个“找不到多部分标识符 Inserted.PublisherCode”错误。你们可以提供的任何帮助将不胜感激。谢谢。

```
go
create trigger TR_Title_PublisherCode_Insert
on title
for Insert
as
    if not exists(select * from Publisher where PublisherCode = Inserted.PublisherCode)
    begin
        raiserror('Publisher does not exist', 16, 1)
        rollback tran
    end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T06:29:46.597

INSERTED 和 DELETED 也是表格

所以你必须这样做：

```
if not exists(
    select * from Publisher 
    where PublisherCode in (SELECT PublisherCode FROM inserted) 
) 
```

顺便说一句，正如hkf所说，如果您将PublisherCode识别为外键，则无需触发

# asp.net-mvc-3 - 使用 RoleEnvironment 获取配置时出错

> ID：10240583
> 
> 赞同：0
> 
> 时间：2012-04-20T05:08:26.040
> 
> 标签：asp.net-mvc-3, razor, azure

我的网络应用程序正在使用带有剃须刀的 MVC3

如果我尝试使用 RoleEnvironment.GetConfigurationSettingValue("senderName") 从 ServiceConfig 读取任何内容，则会收到与 Microsoft.IdentityModel 相关的错误

```
Unable to find assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Runtime.Serialization.SerializationException: Unable to find assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[SerializationException: Unable to find assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +4727747
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +1725
   System.AppDomain.get_Id() +0
   <CrtImplementationDetails>.DoCallBackInDefaultDomain(IntPtr function, Void* cookie) +185
   <CrtImplementationDetails>.LanguageSupport._Initialize(LanguageSupport* ) +328
   <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* ) +102

[ModuleLoadException: The C++ module failed to load while attempting to initialize the default appdomain.
] 
```

.

确实，我正在使用 Windows 身份基础进行 Azure acs 身份验证。但是当我部署到 azure 时一切正常。但是如果我使用 RoleEnvironment 从我的 ServiceConfig 文件中读取任何设置（例如：RoleEnvironment.GetConfigurationSettingValue(" Smtpserver")) 。它在 azure 上失败。

但是在我的本地 azure appfabric 上一切正常。如果我删除这行代码，那么一切正常。`RoleEnvironment.GetConfigurationSettingValue("Smtpserver"))` 我在我的云应用程序中使用了两个 webrole。请帮我找出错误的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:19:14.753

您是如何在 Azure 上安装 WIF 的？

最可靠的方法是通过启动任务安装 WIF 运行时。你在这里查看[这个问题](https://stackoverflow.com/questions/10206022/installing-a-wif-runtime-for-hosting-a-net-application-in-windows-azure)。我认为[这个](https://stackoverflow.com/questions/5495531/azure-sdk-1-4-wif-the-c-module-failed-to-load-while-attempting-to-initiali)是完全重复的。

# vba - Range 方法中“命名范围”的数量限制

> ID：10240585
> 
> 赞同：1
> 
> 时间：2012-04-20T05:08:40.983
> 
> 标签：vba, excel

我正在使用以下代码：

```
Dim rng As Range

Set rng = Workbooks("import sheet.xls").Sheets("import").Range("project_name,project_author,project_code,project_breaker,default_fault_ac_mcb,default_fault_ac_mccb,default_fault_dc,default_fault_acb,default_rvdrop,default_svdrop,default_eff,default_pfactor,default_ratio,default_freq,default_sfactor_ac,default_spfactor")

For Each cell In rng.Cells
    MsgBox cell
Next cell 
```

现在`project_name`,`project_author`等是工作表中不同的命名范围。问题是当我将另一个命名范围添加到上述列表（已定义）时，我收到运行时错误 1004（“范围类的选择方法失败”）。

可以添加到范围对象的命名范围的数量是否有限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T07:13:38.263

我找不到任何关于为什么会发生这种情况的信息，但我仍在寻找。

然而，这有效。您可以使用组合范围`UNION`

```
Sub Sample()
    Dim rng As Range, cell As Range, newRng As Range

    Set rng = Sheets("import").Range("project_name,project_author,project_code,project_breaker,default_fault_ac_mcb,default_fault_ac_mccb,default_fault_dc,default_fault_acb,default_rvdrop,default_svdrop,default_eff,default_pfactor,default_ratio,default_freq,default_sfactor_ac,default_spfactor")

    Set newRng = Union(rng, Sheets("import").Range("default_sid"))

    For Each cell In newRng.Cells
        MsgBox cell
    Next cell
End Sub 
```

**更新**：我找不到任何描述此行为的 Microsoft 文档，但经过一些实验，我可以确认可以添加到范围对象的命名范围的最大数量为 16。此行为可以在 Excel 2003、2007 中看到, 和 2010 年。

奇怪的是，这种行为**并未在****Excel 2011** (MAC)中复制。我用 19 个名字进行了测试，它奏效了。

**更多更新**

经过更多测试，我发现如果您将范围命名为`Name1`、等`Name2`，`Name3`那么我可以在 Excel 2003-2007-2010 中添加更多命名范围。所以它必须与名称的命名有关。

我已经向微软提交了一个错误。

**测试样本文件**：

[https://skydrive.live.com/redir.aspx?cid=cdd3f8abe20bbe3b&resid=CDD3F8ABE20BBE3B!157&parid=CDD3F8ABE20BBE3B!150&authkey=!ADP_QVBopsqenBA](https://skydrive.live.com/redir.aspx?cid=cdd3f8abe20bbe3b&resid=CDD3F8ABE20BBE3B!157&parid=CDD3F8ABE20BBE3B!150&authkey=!ADP_QVBopsqenBA)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T09:00:57.337

我没有调查您的问题，但以下几点可能会给您和 Sid 一些关于可能解决方案的提示。

如果您访问`Rng.Address`，则字符串的大小有限制。我在互联网上发现了声称限制为 253 的评论，但我不相信这一点。 `Rng.Address`在完整子范围的末尾总是被截断，所以你得到的字符串在语法上是正确的，只是不完整。所以限制取决于子范围的确切字符串大小。

我遇到了相反的问题。我有一张有数千行的表格。我使用 AutoFilter 来选择感兴趣的行并保存范围。但`Rng.Address`只给了我前 19 个左右的兴趣范围。我必须使用`For Each Cell In Rng`和组合范围字符串来获得完整的字符串。

您的字符串长度为 255 个字符。显然，联合中的子范围数量没有限制。您可以尝试将子范围单独添加到联合中。

祝你好运。

PS如果你想要我的汇编范围字符串例程，欢迎你。

# javascript - 返回不带方括号的 json 对象

> ID：10240586
> 
> 赞同：1
> 
> 时间：2012-04-20T05:08:42.573
> 
> 标签：javascript, jquery

我有一个返回表单对象的函数： `[{"key":"name","value":"ali","key":"age","value":"56"}]`当调用时，如下所示。我怎样才能让它返回相同类型的对象但没有方括号？

```
setProperties('{"name":"ali","age":"56"}');

function setProperties(str) {
    var properties = [];
    var json = jQuery.parseJSON(str);
    for (property in json) {
      properties.push({
        key: property,
        value: json[property]});
    }
    return properties;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:10:56.493

```
return properties[0]; // returns the first element of the list instead of the whole list 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T05:13:33.200

方括号表示一个数组字面量，所以如果你只选择数组的第一个元素：`[{"name":"ali","age":"56","height":"xyz"}][0]`它会返回你想要的对象。

# c# - 在 VB.NET 中声明一个十六进制常量

> ID：10240587
> 
> 赞同：35
> 
> 时间：2012-04-20T05:08:51.903
> 
> 标签：c#, vb.net, hex, constants

如何将以下 C# 十六进制转换为[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)十六进制？

```
private const UInt32 temp = 0xE6359A60; 
```

我尝试了以下方法，但它不起作用。

```
Public Const temp As System.UInt32 = 0xE6359A60 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-20T05:13:40.620

**C# 使用和`0x`VB.NET[作为](http://en.wikipedia.org/wiki/Visual_Basic_.NET)`&H`前缀来指定十六进制数。** 尝试这个。

```
Public Const temp As Integer = &HE6359A60

Sub Main

End Sub 
```

它也可以是 Uint：

```
Public Const temp As UInt32 = &HE6359A60UI

Sub Main

End Sub 
```

查看 MSDN 的[Type Characters (Visual Basic)](http://msdn.microsoft.com/en-us/library/s9cz43ek.aspx)文档以定义十六进制和八进制文字：

> 编译器通常将整数文字解释为十进制（以 10 为基数）数字系统。您可以使用**&H 前缀**强制整数文字为**十六进制（基数 16）**，并且可以使用**&O 前缀强制它为****八进制（基数 8）**。前缀后面的数字必须适合数字系统。

 ******参考：

*   *[十六进制数（不是 ASCII 十六进制值）到 VB.NET 中的字符串](https://stackoverflow.com/questions/3747709)（堆栈溢出）*
*   *[&H57 代表什么以及如何将其翻译为 C#？](https://stackoverflow.com/questions/6206763)（堆栈溢出）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T05:14:11.230

```
Public Const temp As Integer = &H6359A60 
```

前缀`&H`******

# iphone - 来自两个不同 UITableView 的单个文本

> ID：10240588
> 
> 赞同：3
> 
> 时间：2012-04-20T05:08:55.637
> 
> 标签：iphone, ios, ipad

我有两个 UITableview，如果我在每个表中选择一行，则`textLabel.text`该特定行的应该显示在单个 UIAlertview 中。

如何组合`textLabel.text`两个表并在一个 UIAlertView 中显示

谁能让我知道我该怎么做

例如：一个显示 A、B、C、D 的表格视图和另一个显示 1、2、3、4 的 tableView。这两张桌子来自不同的班级。现在假设如果我在表 1 中按一行，我将得到 textLabel.text 作为“A”，如果我按表 2，如果在 table1 中选择 A 并在表中选择 1，则现在在视图上将 textLabel.text 作为“1” 2 我应该得到一个 AlertView 显示消息为“A1”

参考代码：

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "FirstTVContoller.h"
#import "SecondTVController.h"

@interface TwoTableViewsViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>{
    FirstTVContoller *firstController;
    SecondTVController *secondController;
    IBOutlet UITableView *firstTable;
    IBOutlet UITableView *secondTable;
    NSString *stringTable1;
    NSString *stringTable2;
    NSArray * myArray1;
    NSArray * myArray2;
}
@property (nonatomic, retain)  NSString *stringTable1;
@property (nonatomic, retain)  NSString *stringTable2;
@property (nonatomic, retain)  NSArray * myArray1;
@property (nonatomic, retain)   NSArray * myArray2;

@end 
```

米：

```
 #import "TwoTableViewsViewController.h"

    @implementation TwoTableViewsViewController

    @synthesize stringTable1 = stringTable1; 
    @synthesize stringTable2 = stringTable2;
    @synthesize  myArray1,myArray2;

    - (void)viewDidLoad {
        [super viewDidLoad];
        if (firstController == nil) {
            firstController = [[FirstTVContoller alloc] init];
        }
        if (secondController == nil) {
            secondController = [[SecondTVController alloc] init];
        }
        [firstTable setDataSource:firstController];
        [secondTable setDataSource:secondController];

        [firstTable setDelegate:firstController];
        [secondTable setDelegate:secondController];
        firstController.view = firstController.tableView;
        secondController.view = secondController.tableView;
    }

    - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        if (tableView == firstTable) {
         self.stringTable1  = [myArray1 objectAtIndex: indexPath.row];
            //call uiAlert, and place the stringTable1 on your message

        if (tableView == secondTable) {
            self.stringTable2  = [myArray2 objectAtIndex: indexPath.row];   
            //call uiAlert, and place the stringTable2 on your message
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"hi" message:[NSString stringWithFormat:@"%@ %@", self.stringTable1, self.stringTable2] delegate:self cancelButtonTitle:@"ok" otherButtonTitles:nil, nil];    
            [alert show];     
            [alert release];

        }}

}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];

}   

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [firstController release];
    [secondController release];
    [firstTable release];
    [secondTable release];
    [stringTable1 release];
    [stringTable2 release];
    [super dealloc];
}

@end 
```

表格1：

```
#import <Foundation/Foundation.h>

@interface FirstTVContoller : UITableViewController <UITableViewDataSource, UITableViewDelegate>{
    NSMutableArray *items;
}

@end

#import "FirstTVContoller.h"
#import "SecondTVController.h"

@implementation FirstTVContoller

-(void) loadView
{
    if (items == nil) {
        items = [[NSMutableArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"6",@"8",@"9",@"10",@"11",@"12",@"13",@"14",@"15",@"16",@"17",nil] retain];
    }
}

-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
    return [items count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewStylePlain reuseIdentifier:@"MyIdentifier"];
    }
    cell.textLabel.text = [NSString stringWithFormat:@"1.%@" ,[items objectAtIndex:indexPath.row]];
    return cell;
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *stringVariable = cell.textLabel.text;
    NSLog(@"%@",stringVariable);
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

        return UITableViewCellEditingStyleDelete;

}
- (void)tableView:(UITableView *)tv commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath {

    if(editingStyle == UITableViewCellEditingStyleDelete) {     
        //Delete the object from the table.
        [items removeObjectAtIndex:indexPath.row];
        [tv deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

-(void) dealloc
{
    [items release];
    [super dealloc];
}

@end 
```

表2：

```
#import <Foundation/Foundation.h>

@interface SecondTVController : UITableViewController <UITableViewDataSource, UITableViewDelegate>{
    int numberOfCells;
}
@end

#import "SecondTVController.h"

@implementation SecondTVController

-(void) viewDidLoad
{
    numberOfCells = 20;
}
-(NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
    return numberOfCells;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:@"MyIdentifier"];
    }
    cell.textLabel.text = [NSString stringWithFormat:@"2.%d",  indexPath.row];

    return cell;
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *stringVariable = cell.textLabel.text;
    NSLog(@"%@",stringVariable);

}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {

    return UITableViewCellEditingStyleDelete;

}
- (void)tableView:(UITableView *)tv commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath {

    if(editingStyle == UITableViewCellEditingStyleDelete) {     
        //Delete the object from the table.
        numberOfCells -=1;
        [tv deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationRight];
    }
}

@end 
```

请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:18:28.663

当您希望显示 alertView 时，我不清楚，但这将对您有所帮助

您需要有一个属性来放置标签的文本

所以你的.h

```
@ interface MyViewController :UIViewController {
 NSString *_stringTable1;
    NSString *_stringTable2;
}

@property (nonatomic, retain)  NSString *stringTable1;
@property (nonatomic, retain)  NSString *stringTable2; 
```

在你的 .m

```
@synthesize stringTable1 = _stringTable1; 
@synthesize stringTable2 = _stringTable2; 
- (void) dealloc{
[_stringTable1 release];
[_stringTable2 release];
    [super dealloc];
} 
```

所以在你的餐桌代表上

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    {

    if (tableView == table1) {
    self.stringTable1  = [myArray1 objectAtIndex: indexPath.row];   
    //call uiAlert, and place the stringTable1 on your message
 }
    if (tableView == table2) {
    self.stringTable2  = [myArray2 objectAtIndex: indexPath.row];   
        //call uiAlert, and place the stringTable2 on your message

 }

    } 
```

当您调用 uiAlertView 时，对于消息，您可以将它们一起显示

```
 [NSString stringWithFormat:@"%@ %@", self.stringTable1, self.stringTable2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:19:37.973

//在第二个表格单元格点击事件的点击上将两个字符串合并为一个字符串...

**//在 didSelectRowAtIndexPath 方法中使用以下代码..并享受...**

```
NSString *tempstring = [[NSString alloc]init];
   tempstring =yourlable.text;// your cell label...
   if (textField.tag == 1) {

    NSUserDefaults *stringsaver = [NSUserDefaults standardUserDefaults];

    if([stringsaver objectForKey:@"stringsaver"]== nil)
    {
        [stringsaver setObject:tempstring forKey:@"stringsaver"];
    }
    else
    {
        NSString *combinedstring = [stringsaver objectForKey:@"stringsaver"];
       //NSLog(@"==%@",combinedstring);

        UIAlertView *alertdata = [[UIAlertView alloc] 
                                  initWithTitle:@"Your Title" 
                                  message:combinedstring
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertdata show];
        [alertdata release];

       [stringsaver removeObjectForKey:@"stringsaver"];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:22:49.737

尝试这个-

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell * cell1 = [tableView cellForRowAtIndexPath:indexPath];

    // get here the instance of otherTableView.
    UITableViewCell * cell2 = [otherTableView cellForRowAtIndexPath:indexPath];

   UILabel *Title1 = (UILabel *)[cell1 viewWithTag:1]; //for it you need to make the label with Tag 1
   UILabel *Title2 = (UILabel *)[cell2 viewWithTag:1]; //for it you need to make the label with Tag 1 
   NSString * str = [NSString stringWithFormat:@"%@ %@",[Title1 text],[Title2 text]];

  //fire the alert

   UIAlertView *alertdata = [[UIAlertView alloc] 
                              initWithTitle:@"Your Title" 
                              message:str
                              delegate:nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alertdata show];

} 
```

# jquery - 如何从图像幻灯片的文件夹中动态加载所有图像 - jquery

> ID：10240591
> 
> 赞同：3
> 
> 时间：2012-04-20T05:09:18.430
> 
> 标签：jquery, load, directory, slideshow, nivo-slider

基本上我所追求的是一种将文件夹（保存在服务器上）中的所有图像动态加载到我的 nivo 滑块中的方法。目前，nivo 滑块中的脚本要求我单独引用每张照片。例如：

```
<div class="slider-wrapper theme-default">
        <div class="ribbon"></div>
        <div id="slider" class="nivoSlider">
            <img src="images/toystory.jpg" alt="" />
            <a href="http://dev7studios.com"><img src="images/up.jpg" alt="" title="This is an example of a caption" /></a>
            <img src="images/walle.jpg" alt="" data-transition="slideInLeft" />
            <img src="images/nemo.jpg" alt="" title="#htmlcaption" />
        </div> 
```

（上面的代码是从html文件中提取出来的）。

由于新手用户将维护网站，因此他们无法在每次从目录中添加或删除照片时进入并手动更改代码。

在这一点上，我不介意页面加载时是否加载了所有或部分照片。

我在查找有关如何解决此问题的任何信息时遇到了一些麻烦。我能找到的最接近的来源之一是在这个网站上（[当用户将图像滚动到视图中时如何动态（或延迟）加载图像](https://stackoverflow.com/questions/5117421/how-to-load-images-dynamically-or-lazily-when-users-scrolls-it-into-view)）。

虽然老实说，我对 jquery（和一般编程）很陌生，并且正在努力学习一些基础知识。因此，在为我回答问题时，请采取假人的方法。

目前我有图像文件夹（存储所有图像）、一个 jscript 文件和一个存储在服务器上的 css 文件。然后我将 html 添加到 webpart（因为 sharepoint 用于使网页变得疯狂）以使滑块出现。

代码可以在所有客户端完成还是需要在服务器和客户端都完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:21:47.070

像浏览器这样的客户端不可能知道服务器上一个目录中的所有文件。除非启用了目录列表，这在大多数情况下被视为安全问题，否则我会建议..

1.  [例如，在此处](http://wiki.apache.org/tomcat/FAQ/Miscellaneous#Q12)查看如何为 tomcat 启用目录列表。如果启用此功能，请使用 ajax 调用点击目录路径，搜索响应中的所有超链接，过滤扩展名为 jpg 的超链接并将链接传递给插件。

2.  更好的是，在服务器端编写一个服务来动态获取这个特定目录中的文件列表（使用正确的身份验证，尽管仍然是一个问题），点击服务来获取文件列表并将它们传递给插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T02:45:35.600

我也在追求同样的事情，并对 nivo 滑块进行了一些更改以使其工作。

你需要：

*   编写一些服务器端代码以从服务器文件夹中检索所有图像。只是路径，因此您可以将其添加到图像 dom 对象

*   编写一些 javascript ajax 代码来调用服务器端代码，然后解析响应并创建图像对象，然后添加到 dom

我认为当前版本的 nivo 不允许在滑块中添加新图像，因此您需要

*   更新 nivo 代码以允许添加新图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:42:38.797

我建议使用 ajax 调用将所有图像路径加载到 javascript 数组中（这需要服务器端编程并且图像文件夹必须在服务器上）。然后你可以用谷歌搜索任何幻灯片 jquery 插件来创建一个很棒的幻灯片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T11:52:19.337

可以使用 php 和 dropzone.js 从目录服务器检索图像

请查看此操作方法链接[http://www.startutorial.com/articles/view/dropzonejs-php-how-to-display-existing-files-on-server](http://www.startutorial.com/articles/view/dropzonejs-php-how-to-display-existing-files-on-server)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T14:37:03.583

这会将图像名称放入 Javascript 数组中：

```
$dir = 'images/c-data/' . $result; //set the working directory
$pics = scandir($dir);
unset($pics[0], $pics[1]); //first and second ellement are the "."".." , get rid of them
$string = '<script type ="text/javascript">var images_' . $result . ' =[ ';
foreach ($pics as $key => $item) {
    $string .= '"' . $item . '",';
}
echo substr($string, 0, -1) . "];</script>"; 
```

这将在它们循环时回显它们：

```
$path = 'images/c-data/';
$results = scandir($path);
$dirArray = array();
unset($results[0], $results[1]); //first and second ellement are the "."".." , get rid of them
foreach ($results as $result) {
    echo 'Image' . $result . ', ';
} 
```

在这两种情况下，我们都使用`php scandir()`which 返回目录中所有项目的数组。

# objective-c - 自毁单例设计模式 iOS

> ID：10240595
> 
> 赞同：4
> 
> 时间：2012-04-20T05:09:35.130
> 
> 标签：objective-c, ios, design-patterns, memory-management, singleton

我最近遇到了一个问题，我只希望特定对象的一个​​实例存在，并且只存在执行特定操作所需的短暂时间。它的操作是异步的，所以如果我没有对它的引用，ARC 会在运行循环结束时释放它。如果我确实坚持它，我将需要委托回调或通知来知道何时完成释放它。

该对象需要下载多个图像和其他数据并将其缓存到磁盘。我不希望它在不缓存项目时浪费内存，因为缓存限制约为 24 小时。我也不需要任何形式的反馈。我希望它执行它的任务并自己完成。

我想出了一个我非常喜欢的设计模式。从那以后，我在其他几个项目中使用了它，如果它是一种我不知道的众所周知和分析过的模式（自毁单例？？？），那我就很好奇了。我想知道，这样我就可以知道我目前没有看到的任何潜在陷阱。

我也很想听听你们关于为什么这是一个糟糕的设计的任何意见。

设计是这样的（这是 ARC，但如果您通过类方法释放单例，非弧也可以工作）：

一个全局静态对象（不是真正的单例，因为它不会一直存在）

```
 static MySelfDestructingClass* singleton; 
```

单个公共类方法

```
 + (void)downloadAndCacheDataIfNeeded
     {
        //Force synchronized access
        @synchronized(singleton){
            //We are already doing something, return
            if(singleton){
             return;
            }
             NSDate* lastCacheDate = [[NSUserDefaults standardDefaults] objectForKey:kKeyForLastUpdate];
            if([[NSDate date] timeIntervalSinceDate:lastCacheDate] > kCacheLimit){
              //Our cache is out of date, we need to update
                singleton = [[self alloc] init];
                [singleton downloadAndCache];
             }
        }
     } 
```

现在我们的实例方法，我们需要我们的对象活着，以便请求可以回来：

```
 - (void)downloadAndCache
        {
               //This would probably be a delegate, but for simplicity of this example it's a notification
               [[NSNotificationCenter defaultCenter] addObserver:self forNotificationWithName:NotificationSomeRequestDidSucceed selector:@selector(someCustomRequestDidSucceed:withData:) object:nil];
               [SomeCustomRequest makeRequestWithURL:@"http://www.someURL.com"];

        }

      - (void)someCustomRequestDidSucceed:(SomeCustomRequest *)request withData:(NSDictionary *)dictionary
        {

             //Do whatever we need to in order to save our data, or fire off image download requests etc...
             ....

            //Set our lastUpdated time in NSUserDefaults
            [[NSUserDefaults standardDefaults] setObject:[NSDate date] forKey:kKeyForLastUpdate];

            //Remove our observer
            [NSNotificationCenter defaultCenter] removeObserver:self name:NotificationSomeRequestDidSucceed object:nil];

            //Release ourselves (ok not really, but tell arc we can be released)
            singleton = nil;
        } 
```

这样，我在应用程序的其他任何地方都需要做的是：

```
 [MySelfDestructingClass downloadAndCacheDataIfNeeded]; 
```

现在这个对象会在需要时下载东西并在完成后释放自己，或者根本不创建自己。它也不会开始下载数据两次。

我知道这种设计在可扩展性和功能方面存在局限性，但是对于像这样的实例以及我使用过的其他实例，我发现它非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:42:45.823

这很常见的使用块。考虑类似的事情（尽管我可能会以不同的方式处理多个调用......）

```
void ExecuteWithMySingleSelfDestructingObject(void(^block)(MySelfDestructingClass *object)) {
    static MySelfDestructingClass* singleton;
    @synchronized(singleton) {
        if (singleton) {
          // To get past the synchronization primitive, this must be a recursive call.
        }
        // Whatever other conditions you want to have (like your date check)
        singleton = [[MySelfDestructingClass] alloc] init];
        @try { block(singleton); }
        @finally { singleton = nil; }
    }
} 
```

注意双重异常处理（尝试/最终加上 @synchronized 所做的 - 可能想要改变它......

然后对块做任何你想做的事情......

```
ExecuteWithMySingleSelfDestructingObject(^(MySelfDestructingClass *object){
    // Do whatever I want with the singleton instance that has
    // been given to me as <object>
}); 
```

当然，它可能是一个类方法......

```
+ (void)performBlock:(void(^)(MySelfDestructingClass *object))block {
    static MySelfDestructingClass* singleton;
    @synchronized(singleton) {
        if (singleton) {
          // To get past the synchronization primitive, this must be a recursive call.
        }
        // Whatever other conditions you want to have (like your date check)
        singleton = [[self] alloc] init];
        @try { block(singleton); }
        @finally { singleton = nil; }
    }
}

[MySelfDestructingClass performBlock:^(MySelfDestructingClass *object){
    // Do whatever I want with the singleton instance that has
    // been given to me as <object>
}]; 
```

我希望这是有道理的（我是徒手输入的，所以语法可能会有所不同，但你应该明白这一点）。

# iphone - rightbarbutton 动画不正确

> ID：10240600
> 
> 赞同：2
> 
> 时间：2012-04-20T05:09:51.427
> 
> 标签：iphone, ios, uinavigationbar

我正在动画到一个视图，它从右向左滑动。左栏按钮看起来像是在导航中，但右栏按钮似乎动画很奇怪，几乎就像一开始它不是导航栏的一部分。

我想知道我的代码是否有问题......或者是否有另一种方法？

```
- (void)viewWillAppear:(BOOL)animated
{
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Skip" style:UIBarButtonItemStyleBordered target:nil action:nil];

    [super viewWillAppear:animated];
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:17:46.247

`rightBarButtonItem`在视图控制器的`init...`方法中设置。它只需要在视图控制器的生命周期中完成一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:17:29.057

这只是在黑暗中拍摄，但惯例是先调用 [super viewWillAppear:animated]，然后添加您自己的代码。每当您构建事物（对象、视图等）时，请执行此操作。

然后在拆除东西时（-dealloc、-viewWillDisappear 等），做相反的事情。清理你的东西，然后打电话给超级让它清理。

这可能不相关，也不会产生影响。但这是一个好习惯，你永远不会知道。它可能会改变这里的行为。在添加栏按钮项之前，超级用户可能需要做一些设置。

# c - openSSL：解密不会产生正确的纯文本

> ID：10240601
> 
> 赞同：2
> 
> 时间：2012-04-20T05:09:54.087
> 
> 标签：c, linux, tcp, openssl, encryption

我需要在客户端和服务器之间建立两个通道，第一个是用于数据传输的 UDP 通道，第二个是用于发送密钥的 TCP 通道，iv 用于 UDP 通道中的 AES-128。

TCP 套接字在服务器上创建如下：

```
listen_fd = socket (AF_INET, SOCK_STREAM, 0);
// sa_serv contains TCP port
error = bind(listen_fd, (struct sockaddr*) &sa_serv, sizeof (sa_serv)); 
```

UDP 套接字在服务器上创建如下：

```
sock_fd = socket(AF_INET, SOCK_DGRAM, 0);
// local contains UDP port
error = bind(sock_fd, (struct sockaddr*) &local, sizeof(local)); 
```

服务器需要能够连接多个客户端，在 select() 中使用的 TCP 和 UDP 套接字如下：

```
max = (listen_fd > sock_fd) : listen_fd : sock_fd;
fd_set set;
FD_ZERO(&set);
FD_SET(listen_fd, &set); FD_SET(sock_fd, &set);

while(1)
{
      select(max + 1, &set, NULL, NULL, NULL);

      if(FD_ISSET(listen_fd, &set){
          // server accepts connection
          // server receives key and IV over TCP connection
      }
      if(FD_ISSET(sock_fd, &set){
          // server receives encrypted data from client using UDP socket
      }
} 
```

当服务器接收到UDP套接字中的数据时，服务器使用密钥解密它，并使用TCP连接接收到IV；解密代码如下：

```
 int decrypt(unsigned char *plain, unsigned char *key, unsigned char *iv, unsigned char *cipher, int len)
{
   int i;

    unsigned char buf[3000];
    int outlen, tmplen;
    EVP_CIPHER_CTX ctx;
    EVP_CIPHER_CTX_init(&ctx);
    EVP_DecryptInit_ex(&ctx, EVP_aes_128_cbc(), NULL, key, iv);

    if(!EVP_DecryptUpdate(&ctx, buf, &outlen, cipher, len))
    {
            EVP_CIPHER_CTX_cleanup(&ctx);
            return 0;
    }

    if(!EVP_DecryptFinal_ex(&ctx, buf + outlen, &tmplen))
    {
            EVP_CIPHER_CTX_cleanup(&ctx);
            return 0;
    }

    outlen += tmplen;
    EVP_CIPHER_CTX_cleanup(&ctx);

    printf("\nLength decrypted :%d\n",outlen);

    printf("\nBuf: ");
    for(i=0; i<outlen; i++){
           plain[i] = outbuf[i];    
       printf(" %02x ",buf[i]);
    }
     printf("\n");

     return outlen;
 } 
```

当从客户端接收到的密码与密钥和 IV 一起传递给此函数时，结果纯文本并不正确（大约 8 个字节是错误的）。现在，有人可能会争辩说密码可能是错误的，或者密钥或 iv 可能有问题；我验证了所有这些。

但是奇怪的情况是，当我认为我的服务器只连接到一个客户端时，上面的解密代码可以正确解密；当我不在 select() 中使用我的 TCP 套接字并在外部（之前）使用它时 select() 接受连接并仅从一个客户端获取密钥/iv（用于接受连接并从客户端接收密钥/iv 的代码正是与在 select()) 中使用时相同，在 select() 中仅使用 UDP 套接字发送/接收数据；收到的加密数据被正确解密。

我无法理解的是，通过将 TCP 套接字放入 select() fd_set，为什么相同的解密代码会产生问题，尽管我得到了正确的密码、密钥和 IV。

有人对此有解释吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T11:33:17.263

假设前 8 个字节是错误的，而后面的字节是正确的，那么您使用的 IV 用于解密而不是用于加密。解密时，IV 只影响第一个解密的块（明文的前 128 位）。

假设最后的字节是错误的：您是否正确考虑了消息扩展？即，您是将完整的密文发送到另一端，还是仅传递 len(plaintext) 字节的密文？

附加点：

*   如果您对多个 UDP 数据包重复使用相同的 IV：您应该为每条消息（每个单独加密的 UDP 数据包）使用不同的 IV。
*   您可能希望使用随机 IV 并将其添加到您通过 UDP 发送的密文中，而不是通过带外通道传递它。
*   TCP 不是一个好的带外通道，因为它不安全。

从本质上讲，您所做的是重新发明 DTLS。

# geolocation - 四方签到的工作原理

> ID：10240602
> 
> 赞同：1
> 
> 时间：2012-04-20T05:10:02.497
> 
> 标签：geolocation, foursquare

我构建了一个类似的签到系统，例如foursquare。我有一个带有 lat,lng 位置列表的表格。移动用户将发送请求以查找其位置附近的位置，半径约为 5 公里。如何做到这一点？有没有最佳实践模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:24:18.860

理想情况下，这是使用地理空间索引系统完成的。

为了让自己更轻松，请使用内置其中之一的数据库。MongoDB 是一个常见的例子。

它允许您以与其他类型的数据库查询类似的方式执行此类查询，而无需单独的系统来执行索引（例如 solr 或 postgis）。

有关更多信息，请参阅文档：

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

# xslt-1.0 - 使用 xsl 处理 xml 时出现 java.lang.StackOverflowError

> ID：10240610
> 
> 赞同：1
> 
> 时间：2012-04-20T05:11:00.923
> 
> 标签：xslt-1.0, xalan

我正在使用 XSLT 将一种 xml 格式转换为另一种 xml 格式。处理时出现以下错误

```
java.lang.StackOverflowError
at org.apache.xpath.objects.XString.equals(XString.java:336)
at org.apache.xpath.objects.XString.equals(XString.java:337 
```

当我寻找解决方案时，我找到了[针对此错误的补丁](https://issues.apache.org/jira/browse/XALANJ-2347)

我不知道我是否可以应用此补丁以消除错误。这是 Xalan.jar 版本的问题吗？

有人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:46:41.860

可能是xalan库的问题。你需要做的是下载最新版本的xalan或源代码并重新构建。仍然存在相同的问题，将补丁文件中提到的那些行复制到`WalkerFactory.java`并重新构建jar文件.

# objective-c - 没有专有名词的 UITextChecker

> ID：10240611
> 
> 赞同：1
> 
> 时间：2012-04-20T05:11:01.017
> 
> 标签：objective-c, xcode4, spell-checking

我正在练习 UITextChecker 类来快速检查一个拼字游戏的字符串。工作得有点太好了。不幸的是，据我所知，对此类进行操作的唯一方法返回的“正确”单词也包括专有名词。我想根据不包含专有名词的常用词列表检查我的字符串。到目前为止，这是我的代码：

```
 //Test the answer for a word
    UITextChecker *checker = [[UITextChecker alloc] init];
    NSString *testString = wordString;
    NSRange range = NSMakeRange(0,0);
    range = [checker rangeOfMisspelledWordInString:[testString lowercaseString] 
                                             range:NSMakeRange(0, [testString length]) 
                                        startingAt:0 
                                              wrap:NO 
                                          language:@"en_US"];
    if (range.location == NSNotFound) {
        spelledWord = YES;

    } else {
        spelledWord = NO;

    } 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:56:05.820

不确定这是否是最简单的方法，但您可以设置第二个条件。首先在代码的其他地方存储一个带有专有名词（或其他你不想要的词）的数组，如果你想不到它们，请在 Google 上搜索。（我已经从我使用的一种方法中稍微调整了一下）

```
if (range.location == NSNotFound) {
int i = 1;
NSString *p;
foundrand = FALSE;
if ([[MyArray sharedKelArray].Myarray count] >2){
        ////NSLog(@"GOTTEN - %d", choosennumber);
        while(i<[[MyArray sharedKelArray].Myarray count])//would check that if equal
        {
            p = [[[MyArray sharedKelArray].Myarray objectAtIndex:i] NSString];
            NSLog(@"Checking word - %d",p);

               if (testString == p){
                    NSLog(@"Matched");
                    spelledWord = NO;
i = 5 + [[MyArray sharedKelArray].Myarray count];

                }
                i+=1;

        }
        spelledWord = YES;
    }
}

} 
```

# ruby-on-rails - 如何在编辑页面的rails中自动填充form_form标签字段

> ID：10240616
> 
> 赞同：1
> 
> 时间：2012-04-20T05:11:41.190
> 
> 标签：ruby-on-rails, forms, edit

我知道如果有人进入对象编辑路径，则应该填充 form_for 字段。除了这个字段之外，大多数地雷都这样做，该字段具有 has_many :through 与另一张表的关系。你如何让它预先填充在创建时输入的任何使用？

例如...

```
 <div class="lesson_content">
            <%= f.label :content %>
            <%= f.text_area :content %>
        </div>

        <div class="tags">
            <%= f.label :tag_names, "Tags" %>
            <%= f.text_field :tag_names, data: { autocomplete_source: tags_path} %>
        </div> 
```

我的课程内容将正确填充，但不是我的标签字段。我有一个课程表、标签表和一个中间的 tags_relationship 表。

我的课程是...

```
class Lesson < ActiveRecord::Base
  attr_accessible :title, :desc, :content, :tag_names
  belongs_to :user

  has_many :tag_relationships, :autosave => true 
  has_many :tags, :through => :tag_relationships, :autosave => true 
```

我如何让标签字段填充？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:39:45.983

您需要的是 fields_for 嵌套在您的表单中。详细信息在这里[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

更好的是，查看 Ryan Bates 刚刚发布的精彩截屏视频[http://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:39:25.190

您需要的是`accepts_nested_attributes_for`从您的课程中调用：

```
# app/models/lesson.rb
class Lesson < ActiveRecord::Base
  attr_accessible :title, :desc, :content, :tag_names
  belongs_to :user

  has_many :tag_relationships, :autosave => true 
  has_many :tags, :through => :tag_relationships, :autosave => true

  accepts_nested_attributes_for :tags
end 
```

然后，在您的控制器/视图中：

```
# app/controllers/lessons_controller.rb
class LessonsController < ActiveSupport::Controller
  def edit
    @lesson = Lesson.find(params[:id])
  end
end

<%= form_for(@lesson) do |f| %>
  <div class="lesson_content">
    <%= f.label :content %>
    <%= f.text_area :content %>
  </div>

  <div class="tags">
    <%- @lesson.tags.each do |tag| -%>
      <%= fields_for(tag) do |t| %>
        <%= t.label :name, "Tag" %>
        <%= t.text_field :name, data: { autocomplete_source: tags_path} %>
      <%- end -%>
    <%- end -%>
  </div>
<%- end -%> 
```

但是，这将为每个标签显示一个文本字段。如果您想为所有标签使用单个文本字段（例如，用逗号分隔），并检索按标签过滤的课程，您应该检查这个 gem：[acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on)。

# git - What is the simplest git workflow to replace copy-paste

> ID：10240619
> 
> 赞同：3
> 
> 时间：2012-04-20T05:11:45.113
> 
> 标签：git

I am new to development and version control.

My present workflow to make changes to the project:

1.  I created index.html with minimum features. Being new, I don't have enough confidence on various CSS tags that break a page, by changing something small. For now I am using Bootstrap, which is simple to use, but with limited features.

2.  To add some new content I copy index.html to index_.html and change index.html. This is purely for a fear that if the page breaks, I instantly copy index_.html to index.html and have a sigh of relief. This is my workflow, which would change when I have a little experience.

How do I use Git just to this and nothing else for now. I don't want to copy index.html. I have already read progit and seen following posts. They seem to point to a multiple users, versions and so on. It would take me a while to reach there. But if I know Git now, I can reach there in shape.

[Workflow best practice with git and github?](https://stackoverflow.com/questions/1604613/workflow-best-practice-with-git-and-github)

[Git Workflow Best practices](https://stackoverflow.com/questions/1971459/git-workflow-best-practices)

[http://news.ycombinator.com/item?id=1826279](http://news.ycombinator.com/item?id=1826279)

[http://gweezlebur.com/2009/01/19/my-git-workflow.html](http://gweezlebur.com/2009/01/19/my-git-workflow.html)

[http://yehudakatz.com/2010/05/13/common-git-workflows/](http://yehudakatz.com/2010/05/13/common-git-workflows/)

[http://reinh.com/blog/2009/03/02/a-git-workflow-for-agile-teams.html](http://reinh.com/blog/2009/03/02/a-git-workflow-for-agile-teams.html)

[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)?

[http://thinkvitamin.com/code/source-control/git/our-simple-git-workflow/](http://thinkvitamin.com/code/source-control/git/our-simple-git-workflow/) (I have placed all these links, so that someone knows I have read enough and does not pull this post down.)

None of them seem to answer my stupid question that is important for my evolution.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T05:25:24.157

To set up your repository for the first time:

```
git init
git add index.html
git commit 
```

That saves a snapshot of your index.html exactly as it is now. Whenever you want to try something new, make changes directly to index.html.

If the page breaks, just do this:

```
git checkout index.html 
```

That throws away your most recent changes and restores the last saved snapshot of index.html.

But if the change goes well, do this instead:

```
git commit index.html 
```

That saves a new snapshot, so that you can go back to it if the next change breaks.

Now, as you know, git has a lot more power to it. You may find a better workflow that has advantages over the way you do it now. But if you want to start with an analogy to your familiar pattern, that's how to do it.

(By the way, whenever you run "git commit" a screen will appear asking you for a *commit message* -- you can use that to describe the changes so you can keep track of them. Nobody sees it but you, so if that doesn't sound useful, you could decide to ignore it.)

# glassfish - JavaDB 错误'模式'ROOT'不存在'

> ID：10240621
> 
> 赞同：1
> 
> 时间：2012-04-20T05:12:22.610
> 
> 标签：glassfish, javadb

我是 Java Server Faces 和 JavaDB 的新手。由于“架构'ROOT'不存在”的错误，我正在努力连接由于我的数据库。我正在为此拉扯头发，我知道这一定很简单。我没有为数据库“guest_book”设置用户名或密码。数据库存在于 APP 架构下。托管 bean 编码如下..

```
 package com.jsf;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import javax.annotation.Resource;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.sql.DataSource;
import javax.sql.rowset.CachedRowSet;

/**
 *
 * @author pctdeveloper7
 */
@ManagedBean(name="guestbean")
@SessionScoped
public class GuestBookBean {

private String date;
private String fname;
private String lname;
private String email;
private String message;

@Resource( name="jdbc/guest_book" )
DataSource ds;

/**
 * Creates a new instance of NewJSFManagedBean
 */
public GuestBookBean() {

}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getMessage() {
    return message;
}

public void setMessage(String message) {
    this.message = message;
}

public String getFname() {
    return fname;
}

public void setFname(String fname) {
    this.fname = fname;
}

public String getLname() {
    return lname;
}

public void setLname(String lname) {
    this.lname = lname;
}

//return a resultset of entries
public ResultSet getEntries() throws SQLException{
    //Check if was injected by the server
    if(ds == null)
        throw new SQLException("Unable to obtain datsource");

    //get connection from datapool
    Connection conn = ds.getConnection("root","root");

    //check if connection was successful
    if(conn==null)
        throw new SQLException("Unable to connect to DataSource");

    try{

        //Create a prepared statement to insert a new address book entry
        PreparedStatement getMessages = conn.prepareStatement("Select * " +
                "FROM MESSAGES ORDER BY lname, fname");
        CachedRowSet rowset= new com.sun.rowset.CachedRowSetImpl();
        rowset.populate(getMessages.executeQuery());
        return rowset;
    } finally{
        conn.close(); //return connection to pool
    }
}//End getEntries

//Save a new guestbook message
public String save() throws SQLException{

    //Check if was injected by the server
    if(ds == null)
        throw new SQLException("Unable to obtain datsource");

    //get connection from datapool
    Connection conn = ds.getConnection();

    //check if connection was successful
    if(conn==null)
        throw new SQLException("Unable to connect to DataSource");

    try{
        //create a preparedStatement to insert a new guestbook entry
        PreparedStatement insertEntry = conn.prepareStatement("INSERT INTO"+
                "messages values( ?, ?, ?, ?, ?)");
        //define prepared statements arguements
        insertEntry.setString(1, fname);
        insertEntry.setString(2, lname);
        insertEntry.setString(3, email);
        insertEntry.setString(4, message);
        insertEntry.setString(5, date);

        insertEntry.executeUpdate();// insert the new entry
        return "index"; //go back to the index page

    }finally{
        conn.close();//return connection to the pool
    }
}//END Save() 
```

}

用于创建数据库的 SQL 如下..

```
 create table messages
(
    fname varchar(25),
    lname varchar(35),
    email varchar(50),
    message varchar(300),
    "DATE" varchar(11)
);

Insert into messages
values('Jared', 'Rainey', 'jared.rainey.it@gmail.com', 'Hi!', '10-12-1982'); 
```

连接池名为GuestBookPool，数据源为jdbc/guest_book。我没有为任何东西设置密码或用户名，据我所知，它们都是在 APP 模式下创建的。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:51:43.600

而不是`@ManagedBean(name="guestbean");` 尝试`@ManagedBean(name="guestbean", schema="APP");`或您的架构是什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T05:32:11.803

如果您使用 JSF，您可以通过在项目中显示的 Web-INF 文件夹中创建 ApplicationContext 来连接到数据库。

创建所需数据源的单例 bean。

您使用的方法不是首选方法。

顺便问一下，为了帮助您更多，请问您使用的是哪个数据库？Oracle、postgres、Access 等？

# c++ - 输入 Ctrl+Z 结束阅读单词会导致循环错误

> ID：10240626
> 
> 赞同：1
> 
> 时间：2012-04-20T05:12:46.823
> 
> 标签：c++

这是我的代码，如果您输入“Ctrl+Z”，它应该会完成，但它会进入循环模式并重复写入最后一个单词。

```
#include <iostream>
using namespace std;
int main()
{  char word[80];
   do
   {  cin >> word;
      if (*word) cout << "\t\"" << word << "\"\n";
   }  while (*word);
} 
```

通过按“Ctrl+Z”，这个简单的程序应该结束，但为什么它不以这种方式运行呢？它有什么问题？

看看这段代码：

```
{  char line[80];
   do
   {  cin.getline(line,80);
      if (*line) cout << "\t[" << line << "]\n";
   } while (*line);
} 
```

它类似于第一个代码，但这次它工作正常，它将通过按“Ctrl+Z”退出循环

那么第一个代码的确切问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:16:35.013

它不会退出循环，因为`*word`它不是空字符；`word`仍然指向在上一次迭代中读取的缓冲区，并且当您按 Ctrl+Z 时它会被擦除。

您应该将循环编写为：

```
while(cin >> word) { /* your code */ } 
```

那么它应该在你按下 Ctrl+Z 后退出循环

此外，最好声明`word`为`std::string`而不是`char[80]`：

```
std::string word; //#include <string>

while (cin >> word)
{  
  cout << "\t\"" << word << "\"\n";
} 
```

# scheduling - 如何在特定时间每天触发 akka 调度程序？

> ID：10240627
> 
> 赞同：2
> 
> 时间：2012-04-20T05:12:54.047
> 
> 标签：scheduling, quartz-scheduler, scheduler, akka, job-scheduling

我创建了一个 Akka 的调度程序，以在固定时间每天发送邮件（例如每天早上 6:00）。那么如何称呼演员呢？我的意思是我应该使用什么逻辑？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T08:33:02.247

只需计算现在和下一个下午 6 点之间的差异，将其作为初始延迟，然后每 24 小时重复一次？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T16:55:00.850

[如果服务器在观察dst](/questions/tagged/dst "显示标记为“dst”的问题")的时区工作，则在早上 6 点开始作业并简单地以 24 小时间隔重复将不起作用- 在一年中的一半时间里，作业将在早上 5 点或早上 7 点触发，具体取决于它是什么时候最初安排的。

OP 似乎生活在印度（不遵守 DST），但是为了使解决方案完全可移植（并且因为他提到了[quartz-scheduler](/questions/tagged/quartz-scheduler "显示标记为“石英调度程序”的问题")），使用 Quartz 和 CRON 触发器似乎更安全：

```
Trigger trigger = newTrigger()
  .withIdentity("trigger3", "group1")
  .startNow()
  .withSchedule(dailyAtHourAndMinute(6, 0))
  .build(); 
```

Quartz也更强大。唯一的问题是获取目标参与者。可能放置`ActorRef`在调度程序上下文中并在作业中检索它是最简单的方法。

# php - php数组中的多个数据库值

> ID：10240628
> 
> 赞同：1
> 
> 时间：2012-04-20T05:12:58.740
> 
> 标签：php

假设你有这个：

```
while ($record = mysql_fetch_assoc($dbquery)) {
    $arr[] = $record['$columnvalue1'];
}
$arraycount = count($arr); 
```

并且您想要数组中的多个列这是如何完成的？

```
while ($record = mysql_fetch_assoc($dbquery)) {
    $arr[] = array($record['$columnvalue1'],$record['$columnvalue2']);
}
$arraycount = count($arr); 
```

上述代码错误：

```
Warning: array_count_values(): Can only count STRING and INTEGER values! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:03:33.803

将多个列值添加到数组中

```
$arr = array();
while ($record = mysql_fetch_array($dbquery)) {
    array_push($arr,$record['$columnvalue1'],$record['$columnvalue2']);
} 
```

求数组的总和

```
$arraycount = array_sum($arr); //to find the sum of the array
$num = sizeof($arr); //to find the size of the array 
```

# ajax - ruby on rails 中的 squarespace 开源克隆/功能？

> ID：10240643
> 
> 赞同：6
> 
> 时间：2012-04-20T05:15:13.240
> 
> 标签：ajax, ruby-on-rails-3, content-management-system, frontend, inline-editing

我进行了广泛的搜索，但找不到任何实现 squarespace.com 的功能，只有一些关于单个组件的博客文章，如内联编辑

我想要构建的是一个非常简单的 squarespace 版本

*   编辑内联内容
*   改变颜色或页面
*   轻松添加一些页面
*   所有前端编辑

是否有一些开源的 Rails 应用程序可以实现这些原则以供您了解和学习？

# image - 使用 SIFT 算法找到一组图像之间的最佳匹配

> ID：10240644
> 
> 赞同：0
> 
> 时间：2012-04-20T05:15:13.827
> 
> 标签：image, matlab, sift

我正在实现 SIFT 算法，我使用它的目的是我有一组图像，我想找到与单个图像的最佳匹配，我将其保存为“模板图像”。SIFT 返回匹配项和分数，其中“匹配项”表示在两个图像中发现相同的描述符，“分数”由欧几里德方法确定。

现在我被困在需要评估所有图像与我的模板图像之间的最佳匹配的点上。我发现当两个图像之间存在完全匹配时，“分数”结果为零，因为两个图像中的描述符位置相同。我该怎么做才能说这张图片是使用“分数”或任何其他方法与模板的最佳匹配或第二最佳匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:36:27.987

对于每个图像，您已经找到了一组匹配项以及模板图像的相应分数，对吧？

您可以将每张图像的所有分数相加以获得每张图像的总分，然后选择总分最低的图像作为“最佳匹配”图像。同样对于“次佳”等。

但是，我必须指出，通常应用基本 SIFT 算法后的主要困难在于确定哪些匹配实际上是正确的。如果您已经做得足够好（例如，使用一些稳健的方法，如 RANSAC），如上所述，找到“最佳匹配图像”应该不会太难。

# jqgrid - jqgrid数据客户端服务器同步

> ID：10240645
> 
> 赞同：0
> 
> 时间：2012-04-20T05:15:15.627
> 
> 标签：jqgrid

jqgrid总行数

如何设置为 jqgrid 垂直滚动条值：总记录数 = 100,000 记录（比方说）记录位置：51,100 但实际上服务器仅向客户端发送 1 页（客户端网格中实际可见的行）？

所以：在 rowAdd 服务器发送值总记录 = 100,001 或在 rowDelete 服务器发送总记录 = 99,999 在向上滚动或向下滚动时相同

但实际上客户端中的“真实”行总是不大于可见行（比如说 10-15 行）

进行同步将是服务器的责任。

总结：jqGrid 可以将值设置为vertical-scrollbar-thumb 'sees' thounds of records+ 和 location 但实际上只管理可见行吗？

# php - CakePHP 验证正则表达式

> ID：10240654
> 
> 赞同：3
> 
> 时间：2012-04-20T05:16:35.473
> 
> 标签：php, regex, cakephp

我有一个快速的正则表达式问题，我想有人可能会不自觉地知道。如果我只想允许上/下字母数字、空格、标点符号和引号，那么用于 CakePHP 验证的正则表达式是什么？这就是我所拥有的，但它已关闭：

```
 'rule' => array('custom', '/[a-z0-9\x20\x21\x2E\x3A\x3B\x3F\x2C\x27\x22]{0,600}/i'), 
```

据我所知， a-z0-9 覆盖字母数字，但 \xXX 不应该用 ASCII 十六进制代码覆盖标点符号吗？然后{0,600]表示0-600个字符的长度，i表示上下。我错过了什么？

例如：valid：这是一个“有效文本”，包含'和标点符号！

无效：这是一个明显的 XSS 尝试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:26:08.447

```
^([\d\w\s?!\.;:,'"\/\[\]\(\)=\+-]*)$ 
```

应该管用？您应该提供您认为有效和无效的文本示例。

```
preg_match('/^([\d\w\s?!\.;:,'"\/\[\]\(\)=\+-]*)$/', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T08:16:46.453

只要您知道您希望它是 ASCII，只需使用字符范围

```
$input = "this is a \n string\n";
echo preg_match("/^[ -~]{0,600}$/", $input);  // output is 0 (false)
$input = "this is a string";
echo preg_match("/^[ -~]{0,600}$/", $input);  // output is 1 (true) 
```

每当我处理 ASCII 时，我发现特定范围要容易得多。所以基本上你希望字符串的开头是空格和 ~ 中的任何内容，它们都是可见字符。然后你有 0-600 个字符的限制，$ 表示字符串的结尾

# c# - 使用 LINQ 按多个表中的多个属性有条件地对元素进行排序

> ID：10240658
> 
> 赞同：3
> 
> 时间：2012-04-20T05:17:05.793
> 
> 标签：c#, .net, linq, sql-order-by

我最近需要对相互关联的页面和导航菜单条目列表进行排序。

每个`Navigation`人都有一个`Page`财产。每个`Page`人都有一个`Navigation`财产。它们是我数据库中的外键引用。

我有一个`Navigation`项目列表以及每个`Page`项目的列表。问题在于，无论 a`Page`是否与 a 关联`Navigation`，它都存储在`Page`项目列表中。

我想生成一个排序的`Page`项目列表，如下所示：具有非空值`Navigation`的项目按`Page.Navigation.Index`属性排序。具有 null`Navigation`的项目按`Page.Title`属性排序，然后按`Page.ID`属性排序。

以下是我们目前所做的，它在大多数情况下都有效，但有一些例外。我遇到的问题是它不处理没有关联导航的页面的重复标题。

```
List<Page> page1 = db.Navigations.OrderBy(n => n.Index).Select(n => n.Page).ToList();

List<Page> page2 = db.Pages.Where(p => !db.Navigations.Contains(p.Navigation)).ToList();

model.Pages = page1.Concat(page2).ToList(); 
```

这是一些示例数据和预期结果

```
Pages Table (PageID, Title, Content)
0, "Home", "<html>This is a home page</html>"
3, "Some Page", "<html>This is some page.</html>"
2, "Some hidden page", "<html>This is some hidden page.</html>"
4, "Products", "<html>We've got products!</html>"
5, "aaaaa", "<html>This should be sorted to the top of pages with no nav</html>"

Navigations Table (PageID, Index)
0, 0
3, 2
4, 1

Output (PageID, Title, Content)
0, "Home", "<html>This is a home page</html>"
4, "Products", "<html>We've got products!</html>"
3, "Some Page", "<html>This is some page</html>"
5, "aaaaa", "<html>This should be sorted to the top of pages with no nav</html>"
2, "Some hidden page", "<html>This is some hidden page.</html" 
```

我很好奇这是否可以以更好看的方式以及查询语法而不是过程语法来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T08:55:34.173

我想这会解决这个问题：

```
model.Pages = db.Pages
  .OrderBy(p=>p.Navigation != null ? p.Navigation.Index : Int32.MaxValue)
  .ThenBy (p=>p.Title)
  .ThenBy (p=>p.PageID)
  .ToList(); 
```

或者如果你喜欢这种语法

```
var query = from p in db.Pages
            orderby p.Navigation != null ? p.Navigation.Index : Int32.MaxValue,
                       p.Title, 
                       p.PageID
            select p;

model.Pages = query.ToList(); 
```

当存在时，这些页面按 Navigation.Index 排序，没有 Navigation.Index 的页面将出现在这些页面之后（它们实际上将 Int32.MaxValue 作为 Navigation.Index）。因为没有 Navigation.Index 的那些现在具有唯一值 (Int32.MaxValue)，所以这些值再次按 Title 排序，然后按 PageId。

# ios - 在 UINavigationBar 的子类中设置 backButton 框架

> ID：10240660
> 
> 赞同：0
> 
> 时间：2012-04-20T05:17:30.503
> 
> 标签：ios, ipad, uinavigationbar

对于使用 ARC 的 iOS 5.0 中的 iPad，我使用 的子类`UINavigationBar`来制作具有更宽栏的自定义导航栏。此导航栏上的后退按钮需要垂直居中，因为我正在使用更宽的后退按钮。现在，它在自然位置拥抱底部。我知道我可以使用`UINavigationItem`每个视图控制器的 viewDidLoad 方法重新定位它。

但是，是否可以在我创建的 UINavigationBar 的自定义子类中获取返回按钮，以便我可以使用 layoutSubviews 将其垂直居中放置？

提前感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:06:12.860

请试试这个，我想这可能对你有帮助

```
// image for my back button
UIImage *backButtonImage= [UIImage imageNamed:@"Back.png"];
UIButton *leftBarButton = [UIButton buttonWithType: UIButtonTypeCustom];

// Setting the image for the back button
[leftBarButton setBackgroundImage: backButtonImage forState:UIControlStateNormal];  
[leftBarButton addTarget: self action:@selector(backToMenu:) forControlEvents:UIControlEventTouchUpInside];

 // setting the frame for the back button
leftBarButton.frame = CGRectMake(0, 0, 65, 32);  

// setting the custom button to navigationbars back button
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView: leftBarButton]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:26:10.107

你有没有尝试过：

```
 navigationBar.backItem.leftBarButtonItem 
```

# android - 如何从 Android x86 的不同存储中挂载 /data？

> ID：10240666
> 
> 赞同：0
> 
> 时间：2012-04-20T05:18:24.390
> 
> 标签：android

我构建了一个 generic_x86.iso 并安装在 vmware 中。但是，我无法在安装过程中选择要挂载 /data 的设备。我想用内存文件系统将 DRAM 的无设备挂载到 /data，我将使用 androbench 对其进行测试，所以我想单独挂载 /data。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:47:05.650

数据分区的挂载通常是通过一个文件来处理的，例如在启动映像的根目录中找到的 init.rc（即，作为 gzip 压缩的 cpio 归档文件打包到内核中的映像）

# c# - 将焦点放在 C# 中的控件上

> ID：10240668
> 
> 赞同：1
> 
> 时间：2012-04-20T05:18:44.870
> 
> 标签：c#, asp.net

我有用于搜索的文本框和下拉控件的转发器控件。当用户在任何文本框中搜索任何内容时，页面被回发以加载具有搜索条件的转发器。此时我需要将焦点设置在特定控件上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:23:47.967

试试这个代码。文本框.Focus();

> [http://msdn.microsoft.com/en-us/library/ms178232.aspx](http://msdn.microsoft.com/en-us/library/ms178232.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:14:11.877

我找到了我的问题的答案，我正在发布它。

```
 if(!postback){//code here}
  else
  {
    Control cont = this.Page.FindControl(Request.Form["__EVENTTARGET"]);
    if (cont != null)
        cont.Focus();
  } 
```

如果我们不知道目标控件的 ID，这有助于将焦点集中在控件上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:32:25.517

您可以使用 JavaScript 来实现此功能。这仅适用于特定控件

`<body onload="setFocus()">`

```
function setFocus()
{
    document.'your_control_id'.focus();
} 
```

欲了解更多信息，请参阅[http://www.w3schools.com/jsref/met_html_focus.asp](http://www.w3schools.com/jsref/met_html_focus.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T05:35:05.483

您可以通过设置**ControlName.Focus()**将焦点设置到任何控件。如果由于某种原因，加载后焦点转移到任何其他控件，您可以尝试以下操作：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.Load += new EventHandler(Loaded);
}

private void Loaded(object sender, EventArgs e)
{
    dropDownList.Focus();
} 
```

# javascript - 如何使用 JavaScript 写入不同的网页？

> ID：10240669
> 
> 赞同：2
> 
> 时间：2012-04-20T05:18:53.007
> 
> 标签：javascript, webpage

我正在尝试从一个网页获取用户输入并将其写入另一个已经存在的网页（如果重要的话，都在同一个域中）。我调试 JavaScript（见下文）并看到它正确地遍历 for 循环并构建要写入的正确信息，但它不会将其写入其他网页。不知道我做错了什么，但非常感谢一些帮助！

```
listitem='';

function newHTML() {

     for (i=0;i<3;i++) {
          cc=document.forms['mainform'].list[i];
          if (cc.checked) listitem+=cc.value;
     }
     HTMLstring='<HTML>\n';
     HTMLstring+='<HEAD>\n';
     HTMLstring+='<TITLE>TESTING</TITLE>\n';
     HTMLstring+='</HEAD>\n';
     HTMLstring+='<BODY bgColor="blue">\n';
     HTMLstring+='"'+listitem+'"\n';
     HTMLstring+='< /BODY>\n';
     HTMLstring+='< /HTML>';
     alert(HTMLstring);
     newwindow=window.open('writeToThisPage.html');

     newwindow.document.write(HTMLstring);
     newwindow.document.close();

     window.open('writeToThisPage.html');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:28:41.947

[这是一个演示](http://jsfiddle.net/upShH/)。你应该避免使用`document.write()`

```
//open a new window
//"newWindow" is your reference to it
var newWindow = window.open();

//"newWindow.document.body" is the body of the new window
var newWindowBody = newWindow.document.body

//let's test by adding a text node to it
var text = document.createTextNode('foo');
newWindowBody.appendChild(text);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:39:51.707

It seems all is OK, except one thing. You're opening the same window again immediately you've created the new document. Just leave this last line out:

```
window.open('writeToThisPage.html'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:41:28.757

这是你在寻找：PI 希望！！！

```
 HTMLstring='<HTML>\n';
     HTMLstring+='<HEAD>\n';
     HTMLstring+='<TITLE>TESTING</TITLE>\n';
     HTMLstring+='</HEAD>\n';
     HTMLstring+='<BODY bgColor="green">\n';
     HTMLstring+="<p>NinaMoxa</p>\n";
     HTMLstring+="<a href=\"javascript:self.close()\">Cerrar</a>\n";
     HTMLstring+='< /BODY>\n';
     HTMLstring+='< /HTML>';
     alert(HTMLstring);

     var ventana=window.open('','name','height=400,width=500'); 
     ventana.document.write(HTMLstring);
     ventana.document.close(); 
```

通过 JNE

# windows-phone-7 - 我想将 XNA 与 Silverlight 结合用于 windows phone 'mango'

> ID：10240670
> 
> 赞同：0
> 
> 时间：2012-04-20T05:18:55.087
> 
> 标签：windows-phone-7

我有很多链接显示“在 Windows Phone 应用程序中结合 Silverlight 和 XNA 框架”，但我无法弄清楚.. 我有一个项目在“XNA”中，并且有一个主项目在 sliver-光。我想将此 Xna 项目添加到我的主项目中，但我无法......

请帮助或提供我需要的简单步骤...

谢谢斯内哈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:58:32.937

在 SDK 的 Mango 版本中，有一个新的项目模板适用于同时使用 Silverlight 和 XNA 的应用程序。[有一个关于如何：在 Windows Phone 应用程序中结合 Silverlight 和 XNA 框架](http://msdn.microsoft.com/en-us/library/hh202938%28v=vs.92%29.aspx "如何：在 Windows Phone 应用程序中结合 Silverlight 和 XNA 框架")的 MSDN 演练，但是这是在一个项目中使用 XNA 和 Silverlight - 我不确定这是否适用于添加多个项目。

# android - Android执行jar文件在哪里？（只是出于好奇）

> ID：10240671
> 
> 赞同：4
> 
> 时间：2012-04-20T05:18:57.290
> 
> 标签：android, android-emulator

我正在开发一个 android 应用程序 **Api 8 级。**

现在我想知道包含执行体的**实际jar （不是项目中包含的'android.jar'Api jar）文件在哪里，***即'android.jar的实现jar文件*。

我通过android sdk安装目录搜索了很多，但没有找到这样的jar文件。为此目的是否存在任何 jar 文件？如果不是，那么android虚拟设备是如何执行源码的呢？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:28:23.333

您可以在此处找到平台 android.jar 文件，`..\android-sdk-windows\platforms\android-15`.

平台 jar 与模拟器 jar 不同，因为后者也包含隐藏和内部 API。

如果您想要**实现类文件**，则必须从该平台的**模拟器**中提取 jar 文件。

在更高的 API 级别中，您可能还必须将 dex 或 odex 文件反编译为类文件。

更多信息[在这里](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)。

我希望这个能帮上忙..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T05:28:27.580

永远不需要 jar 文件和类文件。您的代码在转换为 apk 时不会转换为不同的类和 jars，而是 apks。如果打开您会看到 apk 文件（它们只是 zip 文件），您将看不到 jars 和类。他们转换为 dex 文件。请记住，Android 不使用 JVM，而是使用针对 Moblie 优化的 DVM。（如果我了解您想要什么）

# java - 如何转换 ArrayList 到 Java (Android) 中的字符串？

> ID：10240676
> 
> 赞同：-2
> 
> 时间：2012-04-20T05:19:22.113
> 
> 标签：java, android

> **可能重复：**
> [将 ArrayList 转换为字符串的最佳方法](https://stackoverflow.com/questions/599161/best-way-to-convert-an-arraylist-to-a-string)

我需要你的帮助！我有一系列 JSon（来自 Facebook 的回应）。数组列表。如何将此数组转换为字符串？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:25:45.863

```
StringBuilder sb=new StringBuilder();
for (Long l:list)
    sb.append(l); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:24:21.817

最好的方法是迭代`ArrayList`并构建一个`String`

```
ArrayList<Long> list = new ArrayList<Long>(); 

String listString = ""; 

for (long l : list) 
{ 
    listString += String.valueOf(l) + "\n";
} 
```

**UPDATE** using`StringBuilder`是更好的方法，因为字符串是不可变的，并且每次附加到它时都会在内存中`String`创建新的。`String`还

"+" 运算符被重载`String`并用于连接两个`String`. 内部“+”操作是使用`StringBuffer`或实现的`StringBuilder`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:26:58.407

尝试使用 StringBuilder 类

```
public String ConvertArrayToString(Long[] longArray)
{
    if(longArray != null)
    {
        StringBuilder sb = new StringBuilder(longArray.length);         
        for(int i = 0; i < longArray.length; i++)
        {
            sb.append(longArray[i]);
        }
        return sb.toString();
    }
    return null;
} 
```

# iphone - UIDatepicker 日期仅显示星期一的日期

> ID：10240678
> 
> 赞同：1
> 
> 时间：2012-04-20T05:19:32.823
> 
> 标签：iphone, ios, uipickerview, uidatepicker

我只想在 UIDatePicker 中显示与星期一相关的日期，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:34:29.137

使用内置的 UIDatePicker 您无法做到这一点。您必须使用您想要的特定日期创建 UIPickerview。更多信息[在这里](https://stackoverflow.com/a/4221063/641062)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:33:32.117

当然，给你的 datePicker 提供一个星期一的日期数组

只需检查 nsdate 以获得所需的开始日期和下一个星期一，然后计算出你必须添加多少，所以只有星期一，创建一个循环来制作你的数组，并将它用作你的选择器的数据源

# ios - 我无法请求文件系统，在我通过浏览器打开 ***.doc 后，无论 childBroswer 或默认 webview

> ID：10240680
> 
> 赞同：0
> 
> 时间：2012-04-20T05:19:55.387
> 
> 标签：ios, cordova, safari

我是phonegap的新手。我在ios中使用cordova1.5。如果我在没有 *.doc 的情况下通过 broswer 打开，一切都会好起来的，我仍然会得到 fileSytem。例如：gif、jpg、png、txt、html、pdf。

在我通过浏览器打开 *.doc 并关闭新视图后。childBroswer(plugin),default webview,"file:///"(location),"http://"(net),所有的origin webview都不会再获取fileSystem了。

它是一个错误吗？正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T01:29:15.883

不确定您是否设法解决了这个问题，但是：Cordova 扩展了 NSMutableArray 以添加一个 pop 方法。当您打开一个 Word 文档时，查看器会覆盖 Cordova 版本的 pop，当您返回应用程序时，Cordova 开始使用该版本。

为确保您遇到相同的问题，请创建一个多次调用 [argument pop] 的插件。加载 word 文档后，您应该注意到行为发生了变化。

您可以通过执行以下代码来解决它，您需要在显示文档之前存储 store 方法，并在关闭它后调用 restore 。

导入 objc/runtime.h 导入 o​​bjc/message.h

@执行 ...

静态 IMP cordovaPopImplementation = NULL; 静态 const char* cordovaPopEncoding = NULL;

+(void)storeCordovaPop { 方法 popMethod = class_getInstanceMethod([NSMutableArray class], @selector(pop)); if (!cordovaPopImplementation) { cordovaPopImplementation = method_getImplementation(popMethod); cordovaPopEncoding = method_getTypeEncoding(popMethod); } }

+(void)restoreCordovaPop {
class_replaceMethod([NSMutableArray 类]，@selector(pop)，cordovaPopImplementation，cordovaPopEncoding); }

# jdeveloper - JSPX 下拉列表

> ID：10240686
> 
> 赞同：0
> 
> 时间：2012-04-20T05:20:40.753
> 
> 标签：jdeveloper, oracle-adf, jspx

我正在使用 jdeveloper 11.1.2.0.0 编写一个 oracle ADF fusion Web 应用程序。在 jspx 页面中，我有一个由菜单模型填充的下拉列表。我希望它在浏览器中加载页面时显示为展开状态。请给我一个想法。

谢谢萨梅拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:38:06.687

考虑使用其他类型的组件而不是下拉菜单。例如，仅使用迭代器来显示选项列表怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T18:24:22.250

确实没有直接或编程的方式来模拟在下拉菜单上触发点击事件以将其打开，但您可以通过以下代码执行此操作。你需要的是：

1.  [jquery-1.7.1.min.js](http://code.jquery.com/jquery-1.7.1.min.js)
2.  [ExpandSelect.js](http://expandselect.googlecode.com/files/ExpandSelect_1.00.js)

提供 SelectItem 列表的 bean 是：

```
import java.util.ArrayList;
import java.util.List;

import javax.faces.model.SelectItem;

public class BackBean {
    private List<SelectItem> options;

    public BackBean() {
        options = new ArrayList<SelectItem>(0);
        options.add(new SelectItem("Option 1", "Option 1"));
        options.add(new SelectItem("Option 2", "Option 2"));
        options.add(new SelectItem("Option 3", "Option 3"));
        options.add(new SelectItem("Option 4", "Option 4"));
        options.add(new SelectItem("Option 5", "Option 5"));
    }

    public void setOptions(List<SelectItem> options) {
        this.options = options;
    }

    public List<SelectItem> getOptions() {
        return options;
    }
} 
```

jspx页面是：

```
<?xml version='1.0' encoding='UTF-8'?>
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page" version="2.1" xmlns:f="http://java.sun.com/jsf/core"
          xmlns:af="http://xmlns.oracle.com/adf/faces/rich">
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <f:view>
        <af:document title="Home" id="d1">
            <af:form id="f1">
                <af:resource type="javascript" source="/js/jquery-1.7.1.min.js"/>
                <af:resource type="javascript" source="/js/ExpandSelect.js"/>
                <af:panelStretchLayout id="psl1">
                    <f:facet name="center">
                        <af:selectOneChoice label="Menu" id="soc1" clientComponent="true" styleClass="menu">
                            <f:selectItems value="#{backingBeanScope.backBean.options}" id="si1"/>
                        </af:selectOneChoice>
                    </f:facet>
                </af:panelStretchLayout>
            </af:form>            
            <af:resource type="javascript">
                $(document).ready(function(){                    
                    ExpandSelect(document.getElementById($($('.menu > tbody > tr > td').next().find('select')).attr('id')));
                });
            </af:resource>            
        </af:document>
    </f:view>
</jsp:root> 
```

这是我的屏幕截图： ![在此处输入图像描述](../Images/04fb6cd6ef85b212675951c7af1451e4.png)

希望这会有所帮助。让我知道你的反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:41:17.857

没有触发本机下拉元素披露的程序化（意思是javascript）方式。按照其他人的建议，考虑使用不同的 UI 策略。也许是一个可选择的 af:table？

# ruby-on-rails - 设计 sign_in_and_redirect 导致 rspec 测试失败

> ID：10240687
> 
> 赞同：3
> 
> 时间：2012-04-20T05:20:49.337
> 
> 标签：ruby-on-rails, rspec, devise, omniauth

我对 TDD 有点陌生，所以如果这很明显，请原谅我，但是我有一个使用 Devise 和 Omniauth 的登录系统，它在开发中完美运行，但是由于某种原因，当我运行我的 rspec测试，失败。

我正在测试我的身份验证控制器的创建操作

```
class AuthenticationsController < ApplicationController
  def create
    omniauth = request.env['omniauth.auth']
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully"
      sign_in_and_redirect(:user, authentication.user)
    else
      user = User.find_by_email(omniauth['info']['email']) || User.new(:email => omniauth['info']['email'], :fname => omniauth['info']['first_name'], :lname => omniauth['info']['last_name']) 
      user.authentications.build(:provider => omniauth['provider'], :uid => omniauth['uid'])
      if user.save :validate => false
        flash[:notice] = "Login successful"
        sign_in_and_redirect(:user, user)
      else
        flash[:notice] = "Login failed"
        redirect_to root_path
      end
    end
  end
end 
```

通过这个 rspec 测试

```
describe "GET 'create'" do
    before(:each) do
      request.env['omniauth.auth'] = { "provider" => "facebook", "uid" => "1298732", "info" => { "first_name" => "My", "last_name" => "Name", "email" => "myemail@email.com" } }
    end

    it "should create a user" do
      lambda do
        get :create
      end.should change(User, :count).by(1)
    end
  end 
```

当我运行测试时，我得到

```
Failure/Error: get :create
     NoMethodError:
       undefined method `user' for nil:NilClass
     # ./app/controllers/authentications_controller.rb:13:in `create' 
```

事实上，如果我删除了 sign_in_and_redirect 语句，测试就会通过。有趣的是，使用 sign_in 而不是 sign_in_and_redirect 也失败了。

有谁知道为什么会发生这种情况？特别是当我自己在开发中创建一个帐户时，它工作得很好......

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:55:20.410

[如何：使用 Rails 3（和 rspec）进行控制器和视图测试](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

> 如果您使用任何设计的实用程序方法，控制器规格将无法开箱即用。
> 
> 从 rspec-rails-2.0.0 和 devise-1.1 开始，将 devise 放入您的规范的最佳方法是将以下内容添加到 spec_helper 中：

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end 
```

# .htaccess - htaccess 重写到已经重写的 url

> ID：10240692
> 
> 赞同：1
> 
> 时间：2012-04-20T05:20:55.647
> 
> 标签：.htaccess, mod-rewrite

我已经建立了一个网站创建者，但在使用域时遇到了问题。客户端网址如下： http: [//www.maindomain.com/userdomain.com](http://www.maindomain.com/userdomain.com)（已经在使用mod_rewrite）。

我现在正试图将顶级域指向已经重写的 url。可悲的是，这似乎不起作用：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} ^(ww+\.)?(.+)$ [NC]
RewriteCond %2 !^maindomain.com
RewriteRule ^(.*)$ /%2/$1 [L] 
```

有趣的是，它可以很好地作为重定向：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} ^(ww+\.)?(.+)$ [NC]
RewriteCond %2 !^maindomain.com
RewriteRule ^(.*)$ http://www.maindomain.com/%2/$1 [L] 
```

尽管访问者不应该看到我的域，但这并不是一个真正的选择。任何想法我做错了什么？

任何帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:47:43.727

您将不得不使用 mod_proxy [P 标志]。

# java - Java socket API：如何判断连接是否已关闭？

> ID：10240694
> 
> 赞同：107
> 
> 时间：2012-04-20T05:20:59.237
> 
> 标签：java, sockets, networking, client-server

我遇到了 Java 套接字 API 的一些问题。我正在尝试显示当前连接到我的游戏的玩家数量。很容易确定玩家何时连接。但是，使用套接字 API 确定玩家何时断开连接似乎是不必要的困难。

调用`isConnected()`已远程断开的套接字似乎总是返回`true`。同样，调用`isClosed()`已远程关闭的套接字似乎总是返回`false`。我已经读过，要实际确定套接字是否已关闭，必须将数据写入输出流并且必须捕获异常。这似乎是处理这种情况的一种非常不干净的方式。我们只需要不断地通过网络发送垃圾消息，才能知道套接字何时关闭。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-04-20T06:00:43.773

没有 TCP API 可以告诉您连接的当前状态。`isConnected()`并告诉*您套接字*`isClosed()`的当前状态。不是一回事。

 *1.  `isConnected()`告诉你是否*连接*了*这个套接字*。你有，所以它返回true。

2.  `isClosed()`告诉您是否*已*关闭*此套接字。*在你拥有之前，它会返回 false。

3.  如果*对端*已经有序地关闭了*连接*

    *   `read()`返回 -1
    *   `readLine()`返回`null`
    *   `readXXX()`抛出`EOFException`任何其他 XXX。

    *   写入将抛出`IOException`：“对等方重置连接”，最终会受到缓冲延迟的影响。

4.  如果连接由于任何其他原因而断开，则写入`IOException`最终会抛出一个 ，如上所述，而读取可能会做同样的事情。

5.  如果对等方仍然连接但未使用连接，则可以使用读取超时。

6.  与您在其他地方可能读到的相反，`ClosedChannelException`并没有告诉您这一点。[也没有`SocketException: socket closed.`] 它只告诉你*你*关闭了*频道，*然后继续使用它。换句话说，您的编程错误。它并不表示已关闭*连接。*

7.  作为在 Windows XP 上使用 Java 7 进行的一些实验的结果，如果：

    *   你正在选择`OP_READ`
    *   `select()`返回大于零的值
    *   关联`SelectionKey`的已经无效（`key.isValid() == false`）

    这意味着对等方已重置连接。然而，这可能是 JRE 版本或平台所特有的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-20T05:37:02.100

在各种消息传递协议中，通常的做法是保持彼此心跳（不断发送 ping 数据包），数据包不需要非常大。探测机制将允许您检测断开连接的客户端，甚至在 TCP 发现它之前（TCP 超时时间要长得多）发送一个探测并等待 5 秒的回复，如果您没有看到回复说 2-3随后的探测，您的播放器已断开连接。

另外，[相关问题](https://stackoverflow.com/questions/485855/how-do-you-handle-socket-disconnecting-in-java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T05:40:27.057

我看到刚刚发布的另一个答案，但我认为您与玩游戏的客户互动，所以我可能会提出另一种方法（而 BufferedReader 在某些情况下绝对有效）。

如果您想...您可以将“注册”责任委托给客户。即，您将拥有一组已连接用户，并在从每个用户收到的最后一条消息上带有时间戳……如果客户端超时，您将强制重新注册客户端，但这会导致下面的引用和想法。

> 我已经读过，要实际确定套接字是否已关闭，必须将数据写入输出流并且必须捕获异常。这似乎是处理这种情况的一种非常不干净的方式。

如果您的 Java 代码没有关闭/断开 Socket，那么如何通知您远程主机关闭了您的连接？最终，您的 try/catch 所做的事情与在 ACTUAL 套接字上侦听事件的轮询器所做的事情大致相同。考虑以下：

*   您的本地系统可以在不通知您的情况下关闭您的套接字......这只是 Socket 的实现（即它不会轮询硬件/驱动程序/固件/任何状态更改）。
*   新的 Socket(Proxy p)... 多方（实际上是 6 个端点）可能正在关闭您的连接...

我认为抽象语言的特点之一是你从细节中抽象出来。想想 C# 中的 using 关键字（try/finally）用于 SqlConnection 或其他什么......这只是做生意的成本......我认为 try/catch/finally 是 Socket 使用的公认和必要模式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-24T02:30:34.940

我遇到了类似的问题。在我的情况下，客户端必须定期发送数据。我希望你有同样的要求。然后我设置 SO_TIMEOUT ，当指定时间到期时`socket.setSoTimeout(1000 * 60 * 5);`抛出。`java.net.SocketTimeoutException`然后我可以很容易地检测到死客户。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T05:55:20.703

我认为这是 tcp 连接的本质，在该标准中，在我们断定输出连接消失之前，传输需要大约 6 分钟的静默时间！所以我不认为你可以找到这个问题的确切解决方案。也许更好的方法是编写一些方便的代码来猜测服务器何时应该假设用户连接关闭。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-03T12:29:26.170

正如@user207421 所说，由于 TCP/IP 协议体系结构模型，无法知道连接的当前状态。所以服务器必须在关闭连接之前通知你，或者你自己检查。
这是一个简单的例子，展示了如何知道服务器关闭了套接字：

```
sockAdr = new InetSocketAddress(SERVER_HOSTNAME, SERVER_PORT);
socket = new Socket();
timeout = 5000;
socket.connect(sockAdr, timeout);
reader = new BufferedReader(new InputStreamReader(socket.getInputStream());
while ((data = reader.readLine())!=null) 
      log.e(TAG, "received -> " + data);
log.e(TAG, "Socket closed !"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-26T21:48:41.957

在这里，您是任何数据类型的另一种通用解决方案。

```
int offset = 0;
byte[] buffer = new byte[8192];

try {
    do {
        int b = inputStream.read();

        if (b == -1)
           break;

        buffer[offset++] = (byte) b;

        //check offset with buffer length and reallocate array if needed
    } while (inputStream.available() > 0);
} catch (SocketException e) {
    //connection was lost
}

//process buffer 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-08-01T23:03:23.583

我就是这样处理的

```
 while(true) {
        if((receiveMessage = receiveRead.readLine()) != null ) {  

        System.out.println("first message same :"+receiveMessage);
        System.out.println(receiveMessage);      

        }
        else if(receiveRead.readLine()==null)
        {

        System.out.println("Client has disconected: "+sock.isClosed()); 
        System.exit(1);
         }    } 
```

如果 result.code == null

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2017-05-31T13:29:02.083

在 Linux 上，当 write() 到您不知道的另一端已关闭的套接字时，将引发 SIGPIPE 信号/异常，但是您想调用它。但是，如果您不想被 SIGPIPE 发现，您可以使用带有 MSG_NOSIGNAL 标志的 send()。send() 调用将返回 -1，在这种情况下，您可以检查 errno，它会告诉您您尝试使用 EPIPE 值写入损坏的管道（在这种情况下为套接字），根据 errno.h 相当于32\. 作为对 EPIPE 的反应，您可以加倍返回并尝试重新打开套接字并尝试再次发送您的信息。*

# php - 亚马逊 S3 和 PHP

> ID：10240695
> 
> 赞同：0
> 
> 时间：2012-04-20T05:21:01.450
> 
> 标签：php, codeigniter, amazon-s3

我正在构建应用程序的管理端。它有一个页面，显示来自 amazon s3 文件夹的所有图像。页面一次显示 10 张图像。所以情况是我必须向 amazonS3 服务器发送 10 个请求以获取 10 个图像。任何人都知道通过单个请求或更好的方式获取这 10 张图像的其他方法吗？

我正在使用 codeigniter 和 amazons3 类（[http://undesign.org.za/2007/10/22/amazon-s3-php-class](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:28:08.827

无论使用哪种编程语言，每张图片都会有一个 http 请求。因此，除非您使用图像精灵之类的东西，据我所知，没有其他方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:34:03.880

您应该在本地服务器上缓存来自 S3 的所有图像，以减少 S3 请求和带宽使用。

除非每个页面都有唯一的图像，否则这应该会大大减少您发出的 S3 请求的数量——尽管很明显，当图像缓存为空时，仍然会有相同数量的请求传递到 S3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T05:45:05.473

看看这篇[文章](http://www.quora.com/Amazon-S3/Does-Amazon-S3-support-batch-operations)。人们得出结论，将 S3 用于多个小对象将非常昂贵。

我可以建议根据您的应用程序，您可能有一个（或几个）压缩（或去皮重）文件，您可以一次获取，在您的服务器上解压缩（解压缩）它并在您的网络应用程序中显示它。如果文件更改较少并且被多次获取，这是一个不错的选择。

另一种更疯狂的想法 - 你可以使用精灵 ;-)

# php - While 循环中的 Foreach 看起来很有趣

> ID：10240699
> 
> 赞同：0
> 
> 时间：2012-04-20T05:21:48.760
> 
> 标签：php, loops, foreach, while-loop

运行此命令后，我不断得到一个奇怪的列表：

```
<?php 
  $query_Category = "SELECT * FROM blog_categories ORDER BY category ASC";

  $getCategory = mysql_query($query_Category) or die(mysql_error()); 
?>

<div id="sheader" style="">Categories</div>

<div class="sbody" style="color:#000 !important;">

<?php 
   do { 
?>
    <div><?php echo $row_getCategory['category'];?></div>

<?php 
    $cat = $row_getCategory['cat_id'];

    $query_Subcategory = "SELECT * FROM blog_subcategories WHERE primcat_id = '$cat' ORDER BY subcategory ASC";

    $getSubCategory = mysql_query($query_Subcategory) or die(mysql_error());
    $row_getSubCategory = mysql_fetch_assoc($getSubCategory);

    $str = $row_getSubCategory['subcategory']; $subcategory = explode(',', $str);

    foreach ($subcategory as $arraysubcat) 
    {
       echo '<div>' . $arraysubcat . '</div>';
    }
    } while ($row_getCategory = mysql_fetch_assoc($getCategory)); 
?>

</div>
<?php mysql_free_result($getCategory); ?> 
```

我有一个带有 id 和类别的类别表和一个带有 id、子类别和主要类别 id 的子类别表。我运行它，它首先随机显示 foreach。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:41:32.813

你的代码让我很头疼，但我相信你的问题在这里：

```
$cat = $row_getCategory['cat_id']; 
```

$row_getCategory 是在您的代码末尾获取的，因此此代码无法正常工作。

我相信你想做这样的事情

```
while ($row_getCategory = mysql_fetch_assoc($getCategory))
{
    $cat = $row_getCategory['cat_id'];

    $query_Subcategory = "SELECT * FROM blog_subcategories WHERE primcat_id = '$cat' ORDER BY subcategory ASC";

    $getSubCategory = mysql_query($query_Subcategory) or die(mysql_error());
    $row_getSubCategory = mysql_fetch_assoc($getSubCategory);

    $str         = $row_getSubCategory['subcategory'];
    $subcategory = explode(',', $str);

    foreach ($subcategory as $arraysubcat) {
        echo '<div>' . $arraysubcat . '</div>';
    }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:51:04.527

有时可以在 a`foreach`中包含 a `while`，但这不是其中之一。首先，您正在执行一个`do ... while`循环，这意味着无论是否找到一行，您都将逐步执行所有代码，因此如果数据库中不存在任何行，您可能会遇到`undefined index`错误。其次，您正在为外部 while 循环的每次迭代执行子类别查询，这意味着如果您的查询返回 100 行，那么您将发出 100 个查询，这不好。

最好的办法是在两个表之间创建一个连接，并在一个循环中逐行遍历行，最好是一个 while 循环（相对于一个`do ... while`循环）。

像这样的东西：

```
// Made some assumptions with the query, as no schema was posted
// But should give you a starting point
$sql = 
'SELECT bc.*, GROUP_CONCAT(bsc.subcategory) AS sub_categories ' .
'FROM blog_categories AS BC INNER JOIN blog_subcategories AS bsc ON bsc.primcat_id = bc.id ' .
'GROUP BY bc.id ' .
'ORDER BY bc.category ASC'; 
```

现在您只有一个查询来检索所有类别及其关联的子类别，现在您可以使用单个 while 循环逐步完成它们：

```
$query = mysql_query($sql) or die(mysql_error());

while ($row = mysql_fetch_assoc($query)) {

    <div>
      <?php echo $row['category']; ?>
    </div>

    // To get at subcategories you can do this
    $subCategories = array_map('trim', explode(',', $row['sub_categories']));

    // And sort them ASC
    sort($subCategories);

    foreach ($subCategories as $subCategory) {
        echo '<div>' . $subCategory . '</div>';
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T05:53:57.873

您不需要为每个类别执行单独的子查询。只是做一个连接。试试这个：

```
$db = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '
            . $mysqli->connect_error);
}

$get_categories = $db -> query("SELECT category, subcategory 
                    FROM blog_categories, blog_subcategories
                    WHERE primcat_id = cat_id
                    ORDER BY category ASC, subcategory ASC");

echo "<h1>Categories</h1>";

echo "<ul>";

while($row = $get_categories -> fetch_assoc()) {
    echo "<li>" . $row['category'];
    if($row['subcategory']) {
        echo "<ul>";
        foreach(explode(",",$row['subcategory']) as $subcategory ) {
            echo "<li>$subcategory</li>";
        }
        echo "</ul>";
    }
    echo "</li>";
}

echo "</ul>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T05:40:52.897

我认为你不应该使用`do while`从数据库中检索数据。你应该使用`while`循环，因为`do while`在检查条件之前运行循环一次。所以在第一个循环中，你不会在 `echo $row_getCategory['category'];`变量中获得任何数据。所以请尝试使用以下代码：

```
<?php
while ($row_getCategory = mysql_fetch_assoc($getCategory)){
?>
        <div>
          <?php
            echo $row_getCategory['category'];      
           ?>
        </div>
        <?php
            $cat = $row_getCategory['cat_id'];

            $query_Subcategory = "SELECT * FROM blog_subcategories WHERE primcat_id = '$cat' ORDER BY subcategory ASC";

            $getSubCategory = mysql_query($query_Subcategory) or die(mysql_error());
            $row_getSubCategory = mysql_fetch_assoc($getSubCategory);

            $str         = $row_getSubCategory['subcategory'];
            $subcategory = explode(',', $str);

            foreach ($subcategory as $arraysubcat) {
                echo '<div>' . $arraysubcat . '</div>';
            }
        ?>
<?php
} 
?> 
```

# bluetooth - 低功耗蓝牙中的单模和双模如何配对

> ID：10240700
> 
> 赞同：2
> 
> 时间：2012-04-20T05:21:52.387
> 
> 标签：bluetooth

我正在了解蓝牙 LE，并且我目前正在研究设备之间的配对。我已经了解单模设备之间的配对。但我不知道单模和双模之间的配对是如何完成的。我用谷歌搜索但无法获得任何内容。你能告诉我它是如何实现的吗？如果给出了 URL，那会更有用

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:18:17.040

如果您有单模 LE 设备和双模 BR/EDR 和 LE 设备，那么它们只能使用 LE 安全性的 LE 连接进行连接和配对（请参阅蓝牙规范（核心规范 v 4.0）[第 3 卷] H 部分， 3.6 低功耗蓝牙的安全性 - 可从 www.bluetooth.org 获得 - 需要登录）。

如果您有两个双模设备，那么即使在当前 4.0 规范下使用 GATT 和 LE 配置文件时，它们也必须通过 BR/EDR 连接和配对。

4.1 版本（尚未批准）的更改将改变该限制。

# java - 使用 JDeveloper 构建 Java 整个项目的 jar

> ID：10240703
> 
> 赞同：2
> 
> 时间：2012-04-20T05:23:03.743
> 
> 标签：java, jar, executable-jar, jdeveloper

我正在使用 JDeveloper 11g 开发桌面应用程序。我想制作可在 java 环境中运行的整个项目 jar。如果我只使用标准 Java 库 jar 可以正常工作，但我的项目包含 JfreeChart、Comm、Hibernate3 等外部库等...当我尝试制作 jar它显示错误我如何制作我的项目的整个 jar 以及外部库。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T05:01:08.090

### 请按照以下说明操作..

> 1.  右键单击项目并选择属性。
> 2.  单击部署，通过输入部署配置文件类型和名称来设置新部署。
> 3.  现在在屏幕上编辑部署配置文件。
> 4.  选择 Jar Options 并指定您的`main`类。

**如果您有第 3 方罐子，请按照**

> 5.  选择文件组，然后单击新建。
> 6.  选择依赖分析和确定。
> 7.  然后选择您创建的新文件组下的贡献者。
>     1.  文件的文件选项卡
>     2.  库的库选项卡，包括您在项目中使用的库。
> 8.  然后确定。

**如果您没有 3rd 方 jar，请忽略上述内容**

> 10.  然后右键单击项目，选择部署下的配置文件。
> 11.  然后单击完成开始部署。

完成部署后，您会在项目/部署文件夹中看到该 jar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:29:35.940

是的，你可以这样做。看看这里 - [Java 创建带有外部 jar 的独立 jar](https://stackoverflow.com/questions/5218966/java-create-standalone-jar-with-external-jars)以及这里 -[将外部库放入 JAR？](https://stackoverflow.com/questions/2034180/put-external-library-to-the-jar)

简单的方法是使用工具，但您也可以使用 ant，将一组 JAR 重新编译成一个大 JAR。

# javascript - 跨浏览器事件处理程序（添加、删除、触发）

> ID：10240704
> 
> 赞同：0
> 
> 时间：2012-04-20T05:23:06.427
> 
> 标签：javascript, internet-explorer, firefox, google-chrome

我有点困惑，当我尝试在 IE7、IE9、Chrome 18、Firefox 12 中将函数绑定到事件（如点击）时效果很好，但是当我尝试删除事件的关联函数时，只有 IE7和 Firefox 能够解除附加功能。这是我正在使用的代码，我做错了什么？

```
 bindEvent:function(el,evtType,fn){

            if(el.addEventListener){
                el.addEventListener(evtType,fn,false);
            } else {
                if(el.attachEvent){

                  var _el=el;
                   var f = function(){fn.call(_el,window.event);}
                   el.attachEvent( 'on'+evtType, f);
                   el[fn.toString()+evtType]=f;

                    //el.attachEvent('on'+evtType,fn) ;

                } else {

                    el['on'+evtType]=fn;
                }
            }

    return el;

    },

    removeEvent: function(el,evtType, fn ) {

        if( el.removeEventListener){
            el.removeEventListener( evtType, fn, false );
        }else if(el.detachEvent){
            el.detachEvent('on'+evtType,el[fn.toString()+evtType]);
            el[fn.toString()+evtType]=null;

        }else{

            el['on'+evtType]=function(){};

        }

        return el;
    } 
```

我的测试代码是：

```
var a = document.getElementById('just_a_div');
bindEvent(a,'click',function(){alert('Hi There');}); 
```

并尝试删除我使用几乎相同的：

```
removeEvent(a,'click',function(){alert('Hi There');}); 
```

任何可以在所有浏览器上有效执行此任务的想法或一些预制片段？希望有解决办法，万分感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:22:20.900

您的代码在[我](http://jsfiddle.net/FJc6G/)的 IE8、firefox 和 chrome 示例中有效（该事件将在五秒钟后被删除）。也许您的测试用例中有错误？你能告诉我们你的测试用例吗？

=== UPDTAE ===

在 javascript*函数*中，当它们具有相同的参数和内容时，它们也永远不会相同。尝试：`alert(function(){alert('Hi There');} == function(){alert('Hi There');});`结果是`false`。

*对功能的尊重*是平等的，如果它们对同一功能的尊重。`var fn = function() { alert('clicked'); }; alert(fn == fn);`也是如此`true`。

您应该像在[我的示例](http://jsfiddle.net/FJc6G/)`bindEvent`中一样，在and函数中使用对函数的相同引用。`removeEvent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:45:59.077

用纯 javascript 代码支持所有浏览器有点困难，更好的方法是使用 javascript 框架，我认为最好的方法之一是[JQuery](http://jquery.com/)，当然还有很多其他框架是为不同的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:23:13.723

使用 jQuery 实现跨浏览器支持。[您可以简单地使用.bind](http://api.jquery.com/bind/)附加事件并使用[unbind](http://api.jquery.com/unbind/)分离它。

# jquery - 工具提示内的 Dynatree 图像

> ID：10240707
> 
> 赞同：0
> 
> 时间：2012-04-20T05:23:38.283
> 
> 标签：jquery, tooltip, dynatree

我在一个正在开发的新站点中使用 jQuery Dynatree 插件。这是我如何编写它的示例

```
 var treevluData = [
{title: "Team 1", isFolder: true, tooltip: "Tooltip test", expand: true, children: [ {title: "Honda CBR",tooltip: "Tooltip test Honda CBR"} ] },
{title: "Team 2", isFolder: true, expand: true, key: "id3", children: [ {title: "BMW X3"},
                                                                           {title: "Honda CRX"},
                                                                           {title: "VW Golf"},
                                                                           {title: "Smart ForTwo"}
                                                                         ]},
{title: "Team 3", isFolder: true, key: "id4", expand: true, children: [ {title: "Fiat Doblo"} ]} ]; 
```

树工作正常，一切正常。正如您在团队 1 的第一个孩子中看到的那样，我设置了一个工具提示。我的问题是，如果可能，我怎么能在工具提示中放置一个图像，所以每次你将鼠标悬停在一个孩子上时，它都会将图像显示为工具提示而不是纯文本。我知道你可以用 html 中的一些 CSS 来做到这一点，但我无法在这个插件中找到如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T05:39:48.053

该`tooltip`选项被转换为一个简单的`<a titlie='...'>`属性，大多数浏览器显示为简单的弹出窗口。据我所知，这些工具提示不能包含 HTML 标记。我建议改用现有的 jQuery tootltip 插件之一并将其绑定到 Dynatree 节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:29:34.333

谢谢你mar10。我找到了我认为适合我需要的 easyTooltip 插件。使用此代码

```
$("#vlutree a").easyTooltip({
useElement: "item"          
}); 
```

指向这个 div

```
<div id="item">
    <img src="icons/Icon.png" />
</div> 
```

我能够在工具提示中添加一个 img，我的问题是如何找到我指向的节点，以便为每个节点显示不同的图像..

# paypal - 如何在 Paypal 中重定向到“使用信用卡付款”

> ID：10240709
> 
> 赞同：3
> 
> 时间：2012-04-20T05:23:49.563
> 
> 标签：paypal

我在很多地方都看到过这个问题，但我必须找到一个明确的答案。我正在使用一个简单的 Paypal 立即购买按钮，它只是指向这样的 url：

```
https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&paymentaction=authorization&business=xxx&amount=1&currency_code=EUR&lc=US 
```

现在，实际上重定向取决于 cookie，有时它会将用户重定向到使用信用卡表单按钮登录到 Paypal，有时它会直接重定向到“用信用卡付款”表单，在该表单中他输入信用卡信息而无需登录到贝宝。

默认情况下，我想要第二个选项。是否有一个查询字符串参数来实现这一点？谢谢 Themos

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-28T14:57:52.230

有一种方法可以通过调整您的项目按钮代码来强制扩展“没有 PayPal 帐户”选项。请注意，这是一个未记录的提示，并且无法保证 PayPal 确实在幕后进行了更改，但仍然值得一试。如果您手动编码您的项目按钮（意味着您没有使用在线按钮创建器），您可以在 HTML 表单中插入以下行：

```
<input type="hidden" name="landing_page" value="billing"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T16:33:07.363

不，那里没有。
如果它没有检测到任何以前的 *.paypal.com 登录 cookie，它将打开信用卡面板。
如果是，它将打开登录面板。

# php - 检查有效的 URL 和有效的域名

> ID：10240711
> 
> 赞同：0
> 
> 时间：2012-04-20T05:24:04.417
> 
> 标签：php

我正在使用以下功能，这给了我正确的输出，但只有它检查 URL 模式不正确的域名...

```
 filter_var($url, FILTER_VALIDATE_URL) 
```

如果我输入正确的 URL，它显示它是有效的，但如果我输入正确的 URL 但不正确的域名，它仍然显示有效的 URL..

```
Ex.
    http://www.google.co.in
    Output: Valid

    http://www.google
    output: Invalid

    http://www.google.aa
    output: Valid 
```

在第三种情况下，它应该是无效的......

任何参考将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:38:54.363

试试这个

```
function url_exist($url){//se passar a URL existe
    $c=curl_init();
    curl_setopt($c,CURLOPT_URL,$url);
    curl_setopt($c,CURLOPT_HEADER,1);//get the header
    curl_setopt($c,CURLOPT_NOBODY,1);//and *only* get the header
    curl_setopt($c,CURLOPT_RETURNTRANSFER,1);//get the response as a string from curl_exec(), rather than echoing it
    curl_setopt($c,CURLOPT_FRESH_CONNECT,1);//don't use a cached version of the url
    if(!curl_exec($c)){
        //echo $url.' inexists';
        return false;
    }else{
        //echo $url.' exists';
        return true;
    }
    //$httpcode=curl_getinfo($c,CURLINFO_HTTP_CODE);
    //return ($httpcode<400);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:20:46.240

从技术上讲，第二个例子也应该被认为是“有效的”，我很惊讶过滤器没有验证它是正确的。第三个例子也是正确的。该方法仅检查语法，所有三个示例**实际上都是正确**的 URL 语法。

但是您在这里走在正确的道路上，不要因过滤器检查的作用而气馁。这就是我验证域的方法：

*   检查语法的有效性（filter_var($url,FILTER_VALIDATE_URL) 在这里合适）
*   检查域 DNS 的存在（PHP 函数 gethostbyname() 和 dns_get_record() 在这里都有帮助）

请注意，如果第二步失败，建议不要直接“失败”用户。有时 DNS 或服务器存在问题，尽管请求正确，但请求可能会失败（即使 facebook.com 有时也会失败）。因此，您应该“允许”该 URL，但在稍后再次仔细检查之前不要对它做任何事情。因此，如果多项检查失败，那么您应该取消该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T19:00:04.707

希望这对你有用！

```
/**
 * checks if a domain name is valid
 * @param  string $domain_name 
 * @return bool              
 */
public function validate_domain_name($domain_name)
{
    //FILTER_VALIDATE_URL checks length but..why not? so we dont move forward with more expensive operations
    $domain_len = strlen($domain_name);
    if ($domain_len < 3 OR $domain_len > 253)
        return FALSE;

    //getting rid of HTTP/S just in case was passed.
    if(stripos($domain_name, 'http://') === 0)
        $domain_name = substr($domain_name, 7); 
    elseif(stripos($domain_name, 'https://') === 0)
        $domain_name = substr($domain_name, 8);

    //we dont need the www either                 
    if(stripos($domain_name, 'www.') === 0)
        $domain_name = substr($domain_name, 4); 

    //Checking for a '.' at least, not in the beginning nor end, since http://.abcd. is reported valid
    if(strpos($domain_name, '.') === FALSE OR $domain_name[strlen($domain_name)-1]=='.' OR $domain_name[0]=='.')
        return FALSE;

    //now we use the FILTER_VALIDATE_URL, concatenating http so we can use it, and return BOOL
    return (filter_var ('http://' . $domain_name, FILTER_VALIDATE_URL)===FALSE)? FALSE:TRUE;

} 
```

# windows-phone-7 - windows phone 7中所有选项卡视图中的通用视图

> ID：10240715
> 
> 赞同：0
> 
> 时间：2012-04-20T05:25:02.433
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我有一个小视图（在屏幕顶部显示应用程序版本和名称），需要在所有选项卡视图中显示。我正在尝试将这些内容与应用程序栏（全局）一起添加到 App.xaml 中，但它似乎不是正确的方法。如果有人有任何想法，请分享。

谢谢 .. ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T10:24:56.340

如果它是选项卡式视图，我假设您使用的是 Pivot 控件。那么如何使用枢轴标题或然后在枢轴上方显示您的小视图？

# web-services - 将 web 项目部署为 web 服务

> ID：10240717
> 
> 赞同：0
> 
> 时间：2012-04-20T05:25:10.647
> 
> 标签：web-services, axis2

我是网络服务的新手。我将一类 myproject 公开为 Web 服务。我还做了一个客户来消费这个。但是我的类出现了一个问题，我将其作为 web 服务公开到作为 web 项目的项目中，并且公开的类与 hibernate 通信以获取数据，但它失败了，因为未加载获取必要的实体。为了首先加载实体，我们加载了 web.xml 中提到的 webservlet，但我的 .aar 不包含 web.xml 如何在 .aar 文件中包含 web.xml 或以任何其他方式部署项目作为网络服务。我正在使用 Axis2 和 Tomcat6。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:51:18.113

在 AXIS2 中有两种部署 Web 服务的方法：

**1）热部署**

您正在做的就是制作服务类的 .aar 文件并将其部署在 Tomcat 服务器的axis2 Web 容器中。您必须在 .aar 中添加任何其他必要的 jar。至于 web.xml，您必须在 tomcat6 Web 应用程序中对 axis2 容器的 web-xml 进行必要的更改。

**2) 正常部署**

第二种方法更简单，更适合您的情况，使用 eclipse WTP 工具创建 Web 服务并将您的 eclipse 项目部署为 .war 文件。通过这种方式，您可以让您的项目 web-xml 正常工作。检查此链接以获取帮助[http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

# django-forms - Post 方法中如何获取字段值的范围？

> ID：10240723
> 
> 赞同：-1
> 
> 时间：2012-04-20T05:25:55.003
> 
> 标签：django-forms

如何在 Post 方法中获取值？

我在用：

```
print form.cleaned_data['experience']

{'max': Decimal('2'), 'min': Decimal('1')} 
```

如何独立获得最大值和最小值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:25:35.710

怎么样`form.cleaned_data['experience']['max']`？

# javascript - 为什么javascript mouseover事件在chrome中不起作用？

> ID：10240731
> 
> 赞同：0
> 
> 时间：2012-04-20T05:26:36.987
> 
> 标签：javascript, google-chrome, hover, mouseover, option

假设我有一个选择标签和一些选项标签，然后我想在选项标签上添加鼠标悬停事件，我尝试了一些方法，但都不起作用铬：

方法一：

```
function showtrail(){
    console.log("mouseover");
}

          var el=document.querySelectorAll('#select option');
            for(var i=0;i<el.length;i++){
                el[i].addEventListener("mouseover",showtrail,false);
            } 
```

方法二：

```
<option onmouseover="showtrail()"  value="d">d</option> 
```

方法3：当然我试过jquery hover方法

所有这些在 chrome 中都不起作用，只在 firefox 中起作用

我该如何解决这个问题？在选项标签上添加悬停或鼠标悬停事件，并且可以在 chrome 中正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:14:08.150

IMO，它不是一种有效的方法，因为[选项](https://developer.mozilla.org/en/HTML/Element/option)标签不支持该属性。我建议您使用[Dropkick](http://jamielottering.github.com/DropKick/) - 一个自定义选择框并附加这些事件。

# android - 如何为我的 android 应用程序制作自定义标题栏？

> ID：10240732
> 
> 赞同：0
> 
> 时间：2012-04-20T05:26:39.687
> 
> 标签：android

> **可能重复：**
> [Android：自定义标题栏](https://stackoverflow.com/questions/3157522/android-custom-title-bar)

我想为我的应用程序制作自定义标题栏，以更改我的应用程序名称的颜色。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:40:06.700

在你的活动中写下这个东西。

```
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle); 
```

而 mytitle 布局是将显示为标题菜单的 xml 文件。下面是一个小例子。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/myTitle"
 android:text="custom title bar"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:textColor="@color/titletextcolor"
 android:gravity ="center"/> 
```

或者如果你只想写那么

```
setTitle("Your TITLE"); 
```

你可以自己做。其他参考文献 参考[文献 1](http://www.edumobile.org/android/android-programming-tutorials/creating-a-custom-title-bar/)、[参考文献 2](http://androidcookbook.com/Recipe.seam;jsessionid=5424397F3130CE7769FF47DD67742911?recipeId=1584&recipeFrom=ViewTOC)。

# java - 'this' 引用是否存储在 Java 的调用堆栈中？

> ID：10240733
> 
> 赞同：13
> 
> 时间：2012-04-20T05:26:46.283
> 
> 标签：java, this, callstack, calling-convention

我们已经知道，当我们在 Java 中调用一个方法时，参数和局部变量会存储在堆栈中。

例如下面的代码：

```
public class Test
{
    int x = 10;
    int y = 20;

    void test(int y)
    {
        int z = y;
        this.x = y; // How JVM knows where is our current object?
    }

    public static void main(String [] args)
    {
        Test obj = new Test();
        obj.test(3);
    }
} 
```

当我们调用时会产生如下调用栈`obj.test()`：

```
|             |
+-------------+
|     z       |
|     y       |  obj.test()
+-------------+
|    obj      |  main()
+-------------+ 
```

但我想知道存储中`this`的引用在哪里`method`？它是否也存储在堆栈中，如下所示：

```
|             |
+-------------+
|   this      |
|     z       |
|     y       |  obj.test()
+-------------+
|    obj      |  main()
+-------------+ 
```

或者它存储在内存中的其他区域？还是由JVM在运行时计算？

最后，我也很好奇`obj.test()`栈中参数/变量的顺序是否有特定的顺序，就像C有调用约定一样，还是依赖于VM的实现？

**更新**：

我知道`this`是关键字而不是普通的引用变量，但我对这个示例的主要关注点是 JVM 如何知道对象在堆中的位置？

或者换句话说，JVM 如何在运行时知道成员方法的当前对象是什么，以便他们可以访问那些实例变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T06:05:32.273

围绕 stackmachine 模型构建的大多数语言都将与您描述的完全一样。这包括 Java、.NET 和 C++。

可以这样想：实例方法的代码很可能在类的所有实例之间共享，复制每个实例的数据以外的任何内容都没有多大意义，如果那个公共部分（方法实现的代码，记住它只是计算机的内存）无论如何在所有实例中都是相同的。

因此，实例方法与静态（在 Java 和 .NET 中）方法的区别在于添加到每个方法签名中的隐式 this 参数。隐含的 this 参数表示该方法应该操作的实例。而且由于传递给方法的参数很可能发生在堆栈上，是的，这个参数将存储在堆栈上。（参见[http://zeroturnaround.com/articles/java-bytecode-fundamentals-using-objects-and-calling-methods/#objects](http://zeroturnaround.com/articles/java-bytecode-fundamentals-using-objects-and-calling-methods/#objects)对于 Java，它在 .NET 中非常相似）。this 参数在调用方法之前作为第一个参数压入堆栈，然后是所有其他参数。

现在，这描述了虚拟机的模型。如果 JITed 机器代码真的会通过堆栈或寄存器（或以任何其他方式）传递 this 参数，则完全特定于实现并对 VM 透明。

在您的示例代码中要注意的另一件事是您两次使用了变量名“y”，因此在该方法中，局部变量“y”将隐藏实例变量，除非您使用“this”明确限定它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:15:33.907

**您的问题是：** -JVM 如何在运行时知道成员方法的当前对象是什么，以便他们可以访问这些实例变量。

```
What i know is , when u call a method with its object then implicitly
your object reference is passed to your method. like....

obj.test(obj,3);

And at run time this object is cached in this keyword..  that means this is local
for that method and must be get m/m in stack. 
```

# regex - URL 正则表达式以

> ID：10240739
> 
> 赞同：0
> 
> 时间：2012-04-20T05:27:57.033
> 
> 标签：regex, url

我将如何制作正则表达式以仅获取“TITLE”一词并过滤掉其余部分。

标题可以改变

例子：

> [http://blogx.blogspot.com/2012/04/TITLE.html?showComment=13348745236XXXXXXX](http://blogx.blogspot.com/2012/04/TITLE.html?showComment=13348745236XXXXXXX)

我得到了什么：

```
http://[a-z{1,20}].blogspot.com/{4}/{2}/______\.(.*)$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:01:17.123

尝试这个

```
blogspot\.com\/.*?([^\/]+)\.html 
```

[在 Regexr 上](http://regexr.com?30n5i)查看

`([^\/]+)`是一个否定字符类，它将匹配除斜杠之外的任何内容，直到出现“.html”。

您将在捕获组 1 中找到“标题”。

除了缺少标题部分外，您的尝试还有其他问题

```
http://[a-z{1,20}].blogspot.com/{4}/{2}/______\.(.*)$
           ^^^^^^^              ^^^ ^^^ 
```

1.  量词必须在字符类之外。

2.  您在此处仅提供了量词。这将`/`连续匹配 7 个（顺便说一句。取决于您的正则表达式风格和/或您需要转义斜杠的正则表达式分隔符）。

使用您的正则表达式，解决方案可能看起来像

```
http://[a-z]{1,20}.blogspot.com/\d{4}/\d{2}/([^\/]+)\.(.*)$ 
```

在[Regexr上查看](http://regexr.com?30n5o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:39:03.713

```
(?<=http://blogx\.blogspot\.com\/\d{4}/\d{2}/).*?(?=\.) 
```

# java - 带有双数组的 Java System.out.format

> ID：10240741
> 
> 赞同：3
> 
> 时间：2012-04-20T05:28:03.570
> 
> 标签：java, printf

我正在尝试使用双 [] 数组作为参数输出带有 System.out.format 的信息。这不起作用：

```
out.format("New dimensions:\n" +
        "Length: %f\n" +
        "Width: %f\n\n",
        doubleArray); 
```

然而，这确实：

```
out.format("New dimensions:\n" +
        "Length: %f\n" +
        "Width: %f\n\n",
        doubleArray[0], doubleArray[1]); 
```

为什么第一种格式不起作用？据说它适用于字符串就好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:45:15.710

Java 会将您自动装箱`double`到 a `Double`，但不会将您自动装箱`double[]`到 a `Double[]`，因此它不匹配`Object[]`。结果，`Object...`您的数组不是被解压缩到可变参数中，而是被视为数组本身——显然，它不能被格式化为双精度。

如果您将数组声明为`Double[]`而不是`double[]`，则调用`format`有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:32:17.593

它不起作用，因为数组不是双精度的（在 Java 中，数组是一个类，所以在这里它就像一个通用指针）。您需要*准确*指定将输出的内容，并且您做到了 - 它是`%f` [格式说明符](http://en.wikipedia.org/wiki/Printf_format_string)。ArraySomething[] 不匹配..

有关[Java 格式](http://docs.oracle.com/javase/tutorial/essential/io/formatting.html)的更多信息，请参见此处和此处 -[数组类如何在 Java 中工作？](https://stackoverflow.com/questions/2910774/how-does-array-class-work-in-java), 对于 Java 数组。

# file-io - 查看我系统中打开的锁定文件

> ID：10240742
> 
> 赞同：-3
> 
> 时间：2012-04-20T05:28:03.613
> 
> 标签：file-io, vb6

> **可能重复：**
> [如何获取当前在 vb6 中运行的进程的文件名](https://stackoverflow.com/questions/10226718/how-to-get-the-filename-of-the-process-that-is-currently-runing-in-vb6)

我想显示我系统上所有打开文件的列表。对于每个打开的文件，都会显示附加信息：句柄值、读/写/删除访问、文件位置、打开文件的进程。这是一个链接[http://www.nirsoft.net/utils/opened_files_view.html](http://www.nirsoft.net/utils/opened_files_view.html)我在 vb6 中需要相同的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:32:08.417

我认为 vb6 很难列出所有文件。
看看这个，例如： http: [//www.codeproject.com/Articles/18975/Listing-Used-Files](http://www.codeproject.com/Articles/18975/Listing-Used-Files)

# ios - 如何通过代码判断 iPad 是黑色还是白色？

> ID：10240749
> 
> 赞同：9
> 
> 时间：2012-04-20T05:28:30.170
> 
> 标签：ios, ipad, cocoa-touch, ios5

我想知道是否有办法通过代码判断 iPad 是黑色还是白色？一个简单的谷歌搜索还没有出现任何东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T05:40:03.490

iPhone 上的序列号为您提供了所有这些信息，您只需将颜色代码映射到颜色本身。

iPhone SN 的典型格式如下：AABCCDDDEEF

```
AA = Factory and Machine ID
B = Year of Manufacturing (9 is 2009/2019, 0 is 2010/2020, 1 is 2011 and so on)
CC = Production Week (01 is week 1 of B, 11 is week 11 of B and so on)
DDD = Unique Identifier
EE = Color (A4=black)
F = size (S=16GB, T=32GB) 
```

[http://www.pressbyte.com/640/decode-iphone-hardware-information-serial-number/](http://www.pressbyte.com/640/decode-iphone-hardware-information-serial-number/)

此[链接](https://stackoverflow.com/questions/3132619/getting-the-serial-number-not-udid-of-iphone-programmatically)可能有助于获取 S/N。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:42:11.347

苹果设备的颜色可以通过解析其序列号来找到。您可以使用 I/O Kit 获取序列号。请参阅：

[黑白 iPhone 的区别？](https://stackoverflow.com/questions/5466707/differentiate-between-black-and-white-iphones)

[使用 IOKit 返回 Mac 的序列号会返回 4 个额外字符](https://stackoverflow.com/questions/8753171/using-iokit-to-return-macs-serial-number-returns-4-extra-characters)

但是您需要谨慎，因为 Apple 可能会拒绝您的应用程序（我还没有尝试在我的应用程序中使用 libIOKit.a）：

[如果我在应用程序中访问 iPhone 序列号，是否允许在 App Store 中访问？](https://stackoverflow.com/questions/7147416/if-i-access-the-iphone-serial-number-inside-an-app-is-it-allowed-in-the-app-sto)

# ruby-on-rails - Ruby on Rails：有什么类似于 C++ 子类的虚拟方法的吗？

> ID：10240755
> 
> 赞同：2
> 
> 时间：2012-04-20T05:28:44.087
> 
> 标签：ruby-on-rails, ruby, oop

我有一个抽象模型，其中包含很多实现子模型。我希望能够在抽象模型中定义一些函数，这些函数在子模型上调用时依赖于子模型自己的定义。在 Ruby on Rails 中这样的事情是可能的吗？

示例，其中长度属性在子模型中定义：

```
class Animal
  validates_inclusion_of :length, :in => MIN_LENGTH..MAX_LENGTH
end

class Elephant < Animal
  MIN_LENGTH = 5
  MAX_LENGTH = 20
end 
```

然后当我去 Elephant.new.save ！我希望它使用 Elephant 的常量运行验证。

我想这样做的原因是因为这样的验证对所有子模型都是通用的，唯一不同的是常量的值。

当我尝试这样做时，或者使用小写的方法时，在这两种情况下，我都会收到未定义值的名称错误。

在 Rails 中这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:07:00.277

```
validates_inclusion_of :length, :in => MIN_LENGTH..MAX_LENGTH 
```

当 Ruby 看到你的 Animal 类时被执行。因此，它很自然地使用当时`MIN/MAX_LENGTH`出现的值。要覆盖此行为，您可以执行以下操作：

```
validates_inclusion_of :length, :in => lambda {|animal| animal.class.age_range } 
```

然后在你的`Animal`和`Elephant`类中定义（或者如果你不打算“生”一个“刚刚`Animal`”，就在最后一个）：

```
def self.age_range
  # < some suitable range, like 5..20 >
end 
```

这样，您的范围`:in`将在需要时计算出来，`:in`为某些物种提供合适的范围。

PS我猜你`Animal`只是为了节省一些击键而省略了基类；）

# android - Android：如何在 TabWidget 上删除选定的选项卡突出显示颜色和按突出显示

> ID：10240756
> 
> 赞同：2
> 
> 时间：2012-04-20T05:28:45.563
> 
> 标签：android, user-interface, background, tabs, tabwidget

我现在正在使用 Android TabWidget。我基于[http://mobileorchard.com/android-app-development-tabbed-activities/](http://mobileorchard.com/android-app-development-tabbed-activities/)
构建了这个 TabWidget 我已经为 TabWidget 添加了背景，
但显然选定选项卡和按下选项卡的突出显示始终可见，我不能把它关掉。

这是图片（抱歉不能直接添加图片，因为还是新手）。：
1.默认选择标签： http: [//postimage.org/image/9ryed6w5b/](http://postimage.org/image/9ryed6w5b/)
2.按下标签： http: [//postimage.org/image/gwg7m83en/](http://postimage.org/image/gwg7m83en/)

我想要的是默认选择的选项卡颜色和按下的选项卡颜色不可见或关闭，因此图像背景将完全显示，不会被这些颜色阻挡。

任何回应将不胜感激。谢谢 ：）

编码：

```
public void onCreate(Bundle savedInstanceState) {
        //hide title bar
        BasicDisplaySettings.toggleTaskBar(EpolicyMainActivity.this, false);
        //show status bar
        BasicDisplaySettings.toggleStatusBar(EpolicyMainActivity.this, true);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.epolicy);
        TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
        tabHost.setup();
        tabHost.getTabWidget().setBackgroundColor(0);
        tabHost.getTabWidget().setBackgroundResource(R.drawable.epolicy_menu_bar);      

        TabSpec spec1=tabHost.newTabSpec("Tab 1");
        spec1.setContent(R.id.tab1);
        spec1.setIndicator("",getResources().getDrawable(R.drawable.epolicy_menu_home));

        TabSpec spec2=tabHost.newTabSpec("Tab 2");
        spec2.setContent(R.id.tab2);
        spec2.setIndicator("",getResources().getDrawable(R.drawable.epolicy_menu_nab));

        TabSpec spec3=tabHost.newTabSpec("Tab 3");
        spec3.setContent(R.id.tab3);
        spec3.setIndicator("",getResources().getDrawable(R.drawable.epolicy_menu_contact));

        TabSpec spec4=tabHost.newTabSpec("Tab 4");
        spec4.setContent(R.id.tab4);
        spec4.setIndicator("",getResources().getDrawable(R.drawable.epolicy_menu_agen));

tabHost.addTab(spec1);
tabHost.addTab(spec2);
tabHost.addTab(spec3);
tabHost.addTab(spec4); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T03:24:34.417

我添加了这个，终于可以工作了：

```
tabHost.getTabWidget().getChildTabViewAt(0).setBackgroundDrawable(null);
tabHost.getTabWidget().getChildTabViewAt(1).setBackgroundDrawable(null);
tabHost.getTabWidget().getChildTabViewAt(2).setBackgroundDrawable(null);
tabHost.getTabWidget().getChildTabViewAt(3).setBackgroundDrawable(null);
tabHost.setCurrentTab(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-05T13:38:07.800

如果使用 TabLayout 对象，那么隐藏指示器可以实现如下：

```
tabLayout.setSelectedTabIndicatorColor(getResources().getColor(R.color.transparent, null)); 
```

干杯。

# vim - Mac OS X 看到的 CLI Vim 进程的名称是什么？

> ID：10240757
> 
> 赞同：2
> 
> 时间：2012-04-20T05:28:56.683
> 
> 标签：vim, applescript

我正在尝试从[Skim wiki运行此脚本](http://sourceforge.net/apps/mediawiki/skim-app/index.php?title=TeX_and_PDF_Synchronization#Editor_Script_for_VIM)

```
#!/bin/bash

file="$1"
line="$2"

[ "${file:0:1}" == "/" ] || file="${PWD}/$file"

exec osascript \
  -e "set ESC to ASCII character 27" \
  -e "tell application \"Vim\" to activate" \
  -e "tell application \"System Events\"" \
  -e "  tell process \"Vim\"" \
  -e "    keystroke ESC & \":set hidden\" & return " \
  -e "    keystroke \":if bufexists('$file')\" & return " \
  -e "    keystroke \":exe \\\":buffer \\\" . bufnr('$file')\"  & return " \
  -e "    keystroke \":else \" & return " \
  -e "    keystroke \":    edit ${file// /\\\\ }\" & return " \
  -e "    keystroke \":endif\" & return " \
  -e "    keystroke \":$line\" & return " \
  -e "    keystroke \"zO\" " \
  -e "  end tell" \
  -e "end tell" 
```

如果我尝试从命令行运行它：

```
# Go to line 20 of some_file
$ ./that_script "some_file" 20 
```

我收到以下错误：

```
56:64: execution error: File Vim wasn’t found. (-43) 
```

## 尝试

我尝试了各种方法：

```
tell application \"vim\" to activate <-- File vim wasn't found
tell application \"/usr/bin/vim\" to activate <-- this raises a 10810 error
tell application \"/path/to/my/own/compiled/vim\" <-- this raises a 10810 error 
```

## 客观的

我正在尝试与从终端而不是 GUI 运行的 Vim 实例“交谈”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:21:32.747

现在你已经`+clientserver`（从[你的另一个问题](https://stackoverflow.com/questions/10231223/compile-vim-7-3-with-clientserver-feature-on-mac-os-x)）工作了，我假设你不再需要这里的答案，但无论如何这里是：

AppleScript 通常不处理命令行程序。

您可以使用 AppleScript 与 MacVim ( `tell application "MacVim" to activate`) 对话，但您根本无法访问 CLI Vim。AppleScript 仅适用于 GUI 应用程序。

现在，大多数（我不愿写“全部”）Mac OS X GUI 应用程序至少公开了一个名为“字典”的 AppleScript 最小界面：您可以激活应用程序、获取窗口数量、打印活动文档、打开文件…并模拟击键。

您示例中的脚本 - 或多或少 - 但仅适用于 GUI Vim。Mac OS X 有少量此类应用程序，此脚本旨在与名为 Vim.app 的应用程序一起使用。您可以根据需要更改`Vim`为`MacVim`，但无法使其与 CLI Vim 一起使用。

# php - 将 3 个选择值内爆到一个字段错误中

> ID：10240769
> 
> 赞同：0
> 
> 时间：2012-04-20T05:30:13.207
> 
> 标签：php, select, form-submit, implode

我目前正在尝试将 3 个选择值放入一个字段中。我试图通过内爆值来做到这一点；但是我收到一条错误消息：

> “警告：内爆（）[function.implode]：传递的参数无效”

更新后的版本

```
<script>
function datepopulate(){
var day = document.getElementById('airdate_day').value;
var month = document.getElementById('airdate_month').value;
var year = document.getElementById('airdate_year').value;

var completedate = day+'-'+month+'-'+year;
document.getelementById('episode_airdate').value = completedate;
return true;
    }
</script>
        <?php
for($i=1910; $i<=2012; $i++)
    $years[]=$i;

    echo '<select id="airdate_year" onChange="javascript:datepopulate();" style="width:50px; float:left; margin-right:10px;">';
                        echo '<option value="">' . __("2012" ) . '</option>';
        foreach($years as $year){
                            $selected = '';
                            echo '<option value="' . $year . '" ' . $selected . '>' . $year . '</option>';
                        }
                    echo '</select>';

                    for($i=1; $i<=12; $i++)
                        $months[]=$i;

                    echo '<select id="airdate_month" onChange="javascript:datepopulate();" style="width:50px; float:left; margin-right:10px;">';
                        echo '<option value="">' . __("0" ) . '</option>';
                        foreach($months as $month){
                            $selected = '';
                            echo '<option value="' . $month . '" ' . $selected . '>' . $month . '</option>';
                        }
                    echo '</select>';

                    for($i=1; $i<=31; $i++)
                        $days[]=$i;

                    echo '<select name="airdate_day" id="airdate_day" onChange="javascript:datepopulate();"  style="width:50px; float:left; margin-right:10px;">';
                        echo '<option value="">' . __("10" ) . '</option>';
                        foreach($days as $day){
                            $selected = '';
                            echo '<option value="' . $day . '" ' . $selected . '>' . $day . '</option>';
                        }
                    echo '</select>';
                    ?> 
            <input type="hidden" name="episode_airdate[]" id="episode_airdate[]"  class="airdate regular-text" value="" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:35:31.720

您的 $_POST['episode_airdate'] 未在此处作为数组发布....

似乎您愿意在这里生成一个日期，因此为了方便您使用下面给出的日期选择器 PHP 库的 url...。

[PHP 日期选择器](http://www.triconsole.com/php/calendar_datepicker.php)

> **更新**

根据您对此答案的评论...如果您想填充隐藏字段，那么您必须使用 javascript 创建的函数，只要选择框的值发生变化，就会调用这些函数，函数将从所有三个选择框中获取值并以您想要的格式将它们内爆为 DD-MM-YYYY.. 并用这个新创建的值填充隐藏字段

下面将是您的功能，它不是经过测试的功能..但您必须这样做：

首先，使选择框的所有 id 属性不同，例如`id='airdate_day'`日选择框、`id='airdate_month'`月选择框和`id='airdate_year'`年选择框

并使隐藏字段 id`id='episode_airdate'`为`name='episode_airdate'`

Javascript函数：

```
function datepopulate(){
    var day = document.getElementById('airdate_day').value;
    var month = document.getElementById('airdate_month').value;
    var year = document.getElementById('airdate_year').value;

   var completedate = day+'-'+month+'-'+year;
   document.getelementById('episode_airdate').value = completedate;
   return true;
} 
```

现在每个选择框的 onChange 属性都会调用这个函数

`<select name='airdate_day' id='airdate_day' onChange='javascript:datepopulate();'>`

并且以类似的方式，其他两个选择框将调用 javascript 函数

现在，当表格发布时，您`$_POST['episode_airdate']`将包含一个完整的日期，因此您不必在其中使用`implode()`函数，并且可以直接将您的`datetime()`函数应用于`$_POST['episode_airdate']`变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:38:11.337

implode 函数的第二个参数必须是一个数组，你给一个 POST 变量。

# android - 电池的最佳使用

> ID：10240770
> 
> 赞同：6
> 
> 时间：2012-04-20T05:30:16.703
> 
> 标签：android

作为一名程序员，我可以采取哪些措施来确保我的应用程序不会占用大量资源并耗尽电池？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:59:20.113

根据您编写的应用程序，其中一些可能适用于您：

*   不要使用过多的网络调用。尝试维护一个不经常更改的数据缓存，并且仅在最后一次刷新的 10 秒后运行完全刷新（阻止它们向服务器发送垃圾邮件，提供更快的响应）
*   如果不需要，则取消正在运行的任何异步任务（例如，如果用户退出使用它的活动，则无需下载该图片/网站的其余部分）
*   利用 OnPause/OnResume 暂停/恢复游戏
*   利用 OnStop/OnStart 方法保存程序状态并在必要时重新加载。请注意，在这种状态下，应用程序“不再可见”，如果其他应用程序需要内存，则可能会被终止，这意味着下次运行时，您将进入 onRestart() 或 onCreate()
*   避免将屏幕设置为保持打开（`setKeepScreenOn(boolean)`或`android:keepScreenOn`）。视频可能应该是您使用此功能的唯一实例之一
*   避免构建频繁更新的小部件，并且[仅在可见时更新它](https://stackoverflow.com/questions/2416782/android-how-update-widget-often-but-only-when-it-is-visible "仅在可见时更新")

有一个很好的流程图显示了在 android 开发者网站上调用暂停/恢复的不同方法：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# vb6 - 如何实现全局 VB6 错误处理程序？

> ID：10240771
> 
> 赞同：3
> 
> 时间：2012-04-20T05:30:32.490
> 
> 标签：vb6, error-handling

以下链接中提到的全局 VB6 错误处理程序产品声称“在 VBE6 调试器中安装一个小的回调挂钩”：

[http://www.everythingaccess.com/simplyvba/globalerrorhandler/howitworks.htm](http://www.everythingaccess.com/simplyvba/globalerrorhandler/howitworks.htm)

我想自己实现这个产品，因为我想更好地控制它在做什么。上述产品如何实现其功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:07:55.787

您正在查看的产品是一个 COM 组件。从网站上提供的[文档](http://www.everythingaccess.com/simplyvba/globalerrorhandler/installation_vb6.htm)来看，听起来 COM 组件实现了特定的组件类。如果您已经拥有该产品，要做的第一件事是启动 SysInternals `procmon`，`regsvr32`在 DLL 上运行，并从创建的注册表项中找出实现了哪些组件类。一旦你知道了这一点，MSDN 或许就能告诉你哪些接口对应于那些组件类。

Microsoft 开发了一个名为 Active Scripting 的框架，它允许您托管脚本引擎并注入调试功能。如果假设 VB6 生成一个与该框架相关的 exe，则您*可以*执行以下操作：

*   创建一个实现的 COM 组件`IApplicationDebugger`
*   实现`IApplicationDebugger::onHandleBreakPoint`能够响应 VB 代码中的错误
*   阅读 MSDN KB [Q222966](http://support.microsoft.com/kb/222966)以了解如何从`onHandleBreakPoint`

看起来该产品`ErrEx`使用`IActiveScript::AddNamedItem`. 为了提供相同的行为，`IActiveScriptSite::GetItemInfo`在同一个 COM 组件上实现以返回一个指针，该指针指向`TypeInfo`实现与`ErrEx`. 在您的实施中，`ErrEx.EnableGlobalErrorHandler`您将执行以下操作：

*   `CoCreateInstance`inproc 进程调试管理器
*   投射参考`IRemoteDebugApplication`
*   `IApplicationDebugger`使用注册组件的实例`IRemoteDebugApplication::ConnectDebugger`

我忽略了调用`IActiveScript::AddNamedItem`，因为我不知道您如何`IActiveScript`从正在运行的进程中获取指针。另外，我不知道创建流程调试管理器的新实例是否可行，或者您是否必须以某种方式连接到现有实例。

对于令人困惑的解释、缺失的信息和掩盖大部分过程，我深表歉意，但这又要回来了……

您将需要阅读 MSDN 上的[Active Scripting APIs](http://msdn.microsoft.com/en-us/magazine/cc301316.aspx)文章。

# android - 是什么导致了android webView中的这种情况？

> ID：10240772
> 
> 赞同：4
> 
> 时间：2012-04-20T05:30:35.720
> 
> 标签：android, webview, runtimeexception

我收到以下异常并且无法调试它。

请帮忙。
代码：

```
public class HybridActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView webview=(WebView)findViewById(R.id.webkitWebView1);
        WebSettings settings=webview.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setDatabaseEnabled(true);
        settings.setDomStorageEnabled(true);
        settings.setAllowFileAccess(true);
        settings.setBuiltInZoomControls(true);
        webview.setWebChromeClient(new WebChromeClient());

        //  webview.loadUrl("file:///android_asset/www/html/hyb.html");
        // webview.loadUrl("file:///android_asset/index.html");
        try {
            webview.loadUrl("http://www.google.com");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        MultipleWebViewHanlder webView2 = new MultipleWebViewHanlder(this);
        webView2.loadNewWebView();
    }
}

public class MultipleWebViewHanlder {
    public MultipleWebViewHanlder(Context context) {
        // TODO Auto-generated constructor stub
        this.context = context;
    }

    public void MultipleWebViewArea(final String command) {

        final RelativeLayout.LayoutParams params = new  RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
        try {
            Log.i("","Inside tryyyyyyyyyyyyyyyyyyyyy");
            final WebView mWebView = new WebView(context);

            WebSettings settings=mWebView.getSettings();
            settings.setJavaScriptEnabled(true);
            settings.setDatabaseEnabled(true);
            settings.setDomStorageEnabled(true);
            settings.setAllowFileAccess(true);
            settings.setBuiltInZoomControls(true);
            mWebView.setWebChromeClient(new WebChromeClient());
            JSInterface.handler.post(new Runnable() {

                @Override
                public void run() {
                    try {
                        Log.i("","Inside tryyyyyyyyyyyyyyyyyyyy b4 add content viewwwwwwwwww");
                        Runnable runnable = new Runnable() {
                            public void run() {
                                ((Activity)context).addContentView(mWebView,params);
                                Log.i("","Inside tryyyyyyyyyyyyyyyyyyyy after add content viewwwwwwwwww ");
                                mWebView.loadUrl(((Activity)context).getResources().getString(R.string.DemoURL));
                            }
                        };
                        ((Activity)context).runOnUiThread(runnable); 
```

日志：

```
04-20 10:55:58.052: WARN/dalvikvm(9255): threadid=8: thread exiting with uncaught exception (group=0x400207d8)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255): FATAL EXCEPTION: WebViewCoreThread  
04-20 10:55:58.092: ERROR/AndroidRuntime(9255): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.  
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.view.ViewRoot.checkThread(ViewRoot.java:2812)  
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:607)  
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:633)  
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2505)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.view.View.invalidate(View.java:5115)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.webkit.WebView.viewInvalidate(WebView.java:2565)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.webkit.WebView.invalidateContentRect(WebView.java:2584)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.webkit.WebView.access$6200(WebView.java:304)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.webkit.WebView$PrivateHandler.handleMessage(WebView.java:7860)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.os.Looper.loop(Looper.java:123)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:637)
04-20 10:55:58.092: ERROR/AndroidRuntime(9255):     at java.lang.Thread.run(Thread.java:1096)
04-20 10:55:58.102: WARN/ActivityManager(172):   Force finishing activity com.Hy5/.activity.Hy5CanvasActivity 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:39:49.663

没有看到代码很难说，但您似乎正在尝试从其所有者线程之外更改元素（这可能会发生，因为您正在尝试从其他线程更改 UI 元素）。

所以试试这个：有一个辅助函数`runOnUiThread()`接受一个可运行的作为参数：

```
Runnable runnable = new Runnable() {
    public void run() {
        // your code here
    }
}

runOnUiThread(runnable); 
```

# iphone - 是否可以在 iOS 中自定义应用程序名称的字体

> ID：10240776
> 
> 赞同：2
> 
> 时间：2012-04-20T05:31:38.293
> 
> 标签：iphone, ios, ipad

有没有办法我们可以自定义 iphone 应用程序名称的字体..

我从应用商店下载了一个应用，它的名称中有一个**电话图像**......

**应用名称：**简单的手机启动器

[http://itunes.apple.com/us/app/simple-launcher-for-ipad-launch/id467950393?mt=8](http://itunes.apple.com/us/app/simple-launcher-for-ipad-launch/id467950393?mt=8)

添加图像： ![在此处输入图像描述](../Images/ad2d39f9ef528bd60807479e7a50e4e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:30:01.293

我相信这个问题的答案是否定的，没有支持的方式来更改特定应用程序的 Springboard 字体。

即使是运行[Springboard 等价物的越狱手机似乎也只能更改整个 Springboard](http://www.hackthatphone.com/2x/themes_with_winterboard_section15.html)（即所有应用程序）的字体，而不仅仅是特定应用程序。

上面的评论似乎表明您建议的应用没有自定义字体或图形。但我想你可能见过一个包含 Unicode 电话字符的名字：☎</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:03:12.720

不，不能更改应用程序名称的字体。

# mysql - SQL Select 基于特定数据

> ID：10240779
> 
> 赞同：0
> 
> 时间：2012-04-20T05:32:04.240
> 
> 标签：mysql, sql, database, select, join

我的数据库中有几张表：

> 1.  `user`表：`user_id (primary key)`, `first_name`, `last_name`, `email_address`.
> 2.  `inst`表：`inst_id (primary key)`、`inst_name`和`type`。
> 3.  `user_insts`表：`user_insts_id (primary key)`、`user_insts_status`和`inst_name (foreign key)`。`user_id(foreign key)`

我在我的网站上使用它，我需要它来显示表格`inst_name`列中的所有条目`inst`，但只有右侧某个 id 的条目，否则显示为空。我已经尝试了如下几件事：

```
SELECT inst.inst_name,inst.inst_id,user_insts.user_id,user_insts.inst_name 
FROM inst LEFT JOIN user_insts ON inst.inst_name=user_insts.inst_name;

SELECT inst.inst_name,inst.inst_id,user_insts.user_id,user_insts.inst_name 
FROM inst LEFT JOIN user_insts ON inst.inst_name=user_insts.inst_name 
WHERE user_insts.user_id='11'; 
```

任何帮助将不胜感激。

编辑：：

这是我目前得到的：

```
 inst_name  inst_id user_id:
 ASB          1        11
 BNZ          3        11
 FMG          5        11 
```

我希望能够得到更像这样的东西：

```
 inst_name  inst_id user_id:
 ASB           1       11
 ANZ           2      NULL
 BNZ           3       11
 paymark       4      NULL
 FMG           5       11
 STATE         6      NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:05:24.380

您的原始查询将做的是从表中获取所有行，然后查看`inst`表中是否有匹配的行。如果有，它将返回该表中的数据。否则它将返回 NULL。如果将 JOIN 更改为 INNER JOIN，则它将仅返回右侧匹配的行。像这样：`inst_name``user_insts`

```
SELECT inst.inst_name,inst.inst_id,user_insts.user_id,user_insts.inst_name 
FROM inst INNER JOIN user_insts ON inst.inst_name=user_insts.inst_name 
WHERE user_insts.user_id='11'; 
```

但是你应该看看改变你的架构。你有一个整数主键，`inst`所以你应该使用它而不是`inst_name`作为外键`inst_name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:55:29.547

你的问题不是 100% 清楚，所以我假设你想为每个用户显示 inst_name；当 inst 条目不存在时，将 inst_name 显示为 null。

像这样的东西应该工作：

```
select u.user_id, i.inst_name
from user u
left join user_insts ui on ui.user_id = u.user_id
left join inst i on i.inst_name = ui.inst_name 
```

您可以通过添加 user_id 来限制结果

```
where u.user_id = '11' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:04:27.403

您提供的查询是否显示以下结果？

1.  查询 1：显示所有`inst`+`user_insts`条目，但未过滤`user_id`
2.  查询 2：仅显示`inst`+`user_insts`过滤的条目`user_id`

查询 2 中发生的情况是，该`where`子句在连接后过滤连接的表。`user_insts`我猜你想要发生的事情是首先通过特定的过滤结果（）的右侧，`user_id`如下所示：

```
SELECT ui.inst_name, ui.user_id FROM user_insts ui WHERE ui.user_id = :PARAM 
```

然后，您希望`inst`在过滤器之后将其与表中的所有条目 LEFT JOIN。您可以使用内部视图，以便`user_id`在实际加入`inst`表之前先进行过滤。结果查询应该是这样的：

```
SELECT i.inst_name, filtered_ui.user_id
FROM  inst i
LEFT JOIN (SELECT ui.inst_name, ui.user_id
           FROM user_insts ui
           WHERE ui.user_id = :PARAM) filtered_ui
ON i.inst_name = filtered_ui.inst_name 
```

再想一想，我对 MySQL 不太熟悉，所以我不确定这个替代查询是否是有效的语法：

```
SELECT i.inst_name, ui.user_id
FROM inst i
LEFT JOIN user_insts ui ON i.inst_name = ui.inst_name AND ui.user_id = :PARAM 
```

...这可能比内部视图更简单。

要点是您必须在加入之前先进行过滤，以便显示所有`inst_names`内容。

# meteor - 尝试在 Meteor.js 中更新服务器数据库的内部服务器错误

> ID：10240783
> 
> 赞同：0
> 
> 时间：2012-04-20T05:32:08.653
> 
> 标签：meteor

我一直在修改[http://meteor.com/examples/leaderboard](http://meteor.com/examples/leaderboard)上的示例流星应用程序。正如您在下面的代码中看到的那样，我正在尝试在有人按下重置按钮时更新玩家的分数。这在客户端更新得很好，但在我的控制台中我注意到错误“更新失败：500 - 内部服务器错误”。经过进一步检查，我发现服务器端数据库确实没有更新。有什么想法吗？（相关代码在重置函数中，但我已经在这里发布了其余部分以防万一）

```
// Set up a collection to contain player information. On the server,
// it is backed by a MongoDB collection named "players."

Players = new Meteor.Collection("players");

var SORT_OPTIONS = {
  name:  {name: 1, score: -1},
  score: {score: -1, name: 1}
}

var NAMES = [ "Ada Lovelace",
              "Grace Hopper",
              "Marie Curie",
              "Carl Friedrich Gauss",
              "Nikola Tesla",
              "Claude Shannon" ];

function reset(options) {
  if (options && options['seed'] === true) {
    for (var i = 0; i < NAMES.length; i++) {
      Players.insert({ name: NAMES[i], score: Math.floor(Math.random()*10)*5 });
    }
  }

  if (options && options['restart'] === true) {
  Players.update( {},
                  { $set: { score: Math.floor(Math.random()*10)*5 } },
                  {multi: true});
  }

}

if (Meteor.is_client) {
  Template.leaderboard.players = function () {
    var sort_by = SORT_OPTIONS[Session.get("sort_by")]
    return Players.find({}, {sort: sort_by});
  };

  Template.leaderboard.selected_name = function () {
    var player = Players.findOne(Session.get("selected_player"));
    return player && player.name;
  };

  Template.player.selected = function () {
    return Session.equals("selected_player", this._id) ? "selected" : '';
  };

  Template.leaderboard.events = {
    'click input.inc': function () {
      Players.update(Session.get("selected_player"), {$inc: {score: 5}});
    },
    'click input.sort': function () {
      Session.get("sort_by") == "score" ? Session.set("sort_by", "name") : Session.set("sort_by", "score");
    },
    'click input.reset': function () {
      reset({'restart': true});
    }
  };

  Template.player.events = {
    'click': function () {
      Session.set("selected_player", this._id);
    }
  };
}

// On server startup, create some players if the database is empty.
if (Meteor.is_server) {
  Meteor.startup(function () {
    if (Players.find().count() === 0) {
      reset({'seed': true});
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:12:46.150

这也发生在我身上，但是检查服务器日志，我遇到的问题是 $inc 修饰符需要一个数字作为更新方法的参数，所以我确保它得到了它 `Number()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T00:04:20.847

时间过去了，它现在可以工作了 :) 我猜这是他们演示部署站点上的一些服务器问题。

# iphone - 在 webview 中退出全屏嵌入 youtube

> ID：10240789
> 
> 赞同：1
> 
> 时间：2012-04-20T05:32:28.357
> 
> 标签：iphone, objective-c, youtube-api, youtube-javascript-api

我在我的 web 视图中使用嵌入的 youtube 来制作 iPhone 应用程序。但我有几个问题。首先是，当我开始播放视频时，它会自动进入全屏状态。我希望它在播放时保持在同一帧上。另一个问题是，我希望它自动运行。我的意思是我不想手动单击运行，我希望，一旦应用程序被加载，它应该自动运行而不需要手动运行，而且它不应该在全屏上运行。

谢谢

阿坎莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:23:17.527

我认为您正在为 youtube 加载嵌入的 html 字符串，但它不会自动播放。

为此，您需要像下面的代码一样放置逻辑

```
- (UIButton *)findButtonInView:(UIView *)view
{
UIButton *button = nil;

if ([view isMemberOfClass:[UIButton class]]) {
    return (UIButton *)view;
}

if (view.subviews && [view.subviews count] > 0) {
    for (UIView *subview in view.subviews) {
        button = [self findButtonInView:subview];
        if (button) return button;
    }
}

return button;
}

- (void)webViewDidFinishLoad:(UIWebView *)theWebView
{
self.playButton = [self findButtonInView:theWebView];
[self.playButton sendActionsForControlEvents:UIControlEventTouchUpInside];
} 
```

这将在加载完成后自动播放视频...

# multithreading - 在 Android NDK 中跨线程共享 JavaVM*

> ID：10240791
> 
> 赞同：5
> 
> 时间：2012-04-20T05:32:48.900
> 
> 标签：multithreading, android-ndk, java-native-interface

我想从接收来自另一个可执行文件的回调的 cpp 文件中调用 Java 类方法。

为此，我使用 .cpp 文件中的**android::AndroidRuntime::getJavaVM()**方法检索了一个 JavaVM 指针，该文件直接接收 JNI 方法调用。我通过构造函数将这个 JavaVM 指针共享给最终的 .cpp 文件，在该文件中我调用所需的 Java 方法，如下所示：

```
/* All the required objects(JNIEnv*,jclass,jmethodID,etc) are appropriately declared. */
**JNIEnv* env;
jvm->AttachCurrentThread(&env, NULL);
clazz = env->FindClass("com/skype/ref/NativeCodeCaller");
readFromAudioRecord = env->GetStaticMethodID(clazz, "readFromAudioRecord", "([B)I");
writeToAudioTrack = env->GetStaticMethodID(clazz, "writeToAudioTrack", "([B)I");** 
```

但是， 运行此代码时出现**SIGSEGV错误。**

根据 JNI 文档，这似乎是在任意上下文中获取 JNIEnv 的适当方法：http: [//java.sun.com/docs/books/jni/html/other.html#26206](http://java.sun.com/docs/books/jni/html/other.html#26206)

在这方面的任何帮助将不胜感激。

问候， 尼拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T23:21:42.490

如果您尝试使用 JNIEnv 或 JavaVM 引用而不将线程附加到 VM，则全局引用不会阻止新线程中的分段错误。你第一次做得很好，Mārtiņš Možeiko 错误地暗示你所做的事情有问题。

不要删除它，只需学习如何使用它。那家伙不知道他在说什么，如果它在 jni.h 中，你可以很确定它不会去任何地方。它没有被记录的原因可能是因为它是可笑的自我解释。您不需要创建 GlobalReference 对象或任何东西，只需执行以下操作：

```
#include <jni.h>
#include <string.h>
#include <stdio.h>
#include <android/log.h>
#include <linux/threads.h>
#include <pthread.h>

#define  LOG_TAG    "[NDK]"
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)
#define  LOGW(...)  __android_log_print(ANDROID_LOG_WARN,LOG_TAG,__VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)

static pthread_mutex_t thread_mutex;
static pthread_t thread;
static JNIEnv* jniENV;

void *threadLoop()
{
    int exiting;
    JavaVM* jvm;
    int gotVM = (*jniENV)->GetJavaVM(jniENV,&jvm);
    LOGI("Got JVM: %s", (gotVM ? "false" : "true") );
    jclass javaClass;
    jmethodID javaMethodId;
    int attached = (*jvm)->AttachCurrentThread(jvm, &jniENV,NULL);
    if(attached>0)
    {
        LOGE("Failed to attach thread to JavaVM");
        exiting = 1;
    }
    else{
        javaClass= (*jniENV)->FindClass(jniENV, "com/justinbuser/nativecore/NativeThread");
        javaMethodId= (*jniENV)->GetStaticMethodID(jniENV, javaClass, "javaMethodName", "()V");
    }
    while(!exiting)
    {
        pthread_mutex_lock(&thread_mutex);
        (*jniENV)->CallStaticVoidMethod(jniENV, javaClass, javaMethodId);
        pthread_mutex_unlock(&thread_mutex);
    }
    LOGE("Thread Loop Exiting");
    void* retval;
    pthread_exit(retval);
    return retval;
}

void start_thread(){
    if(thread < 1)
        {
            if(pthread_mutex_init(&thread_mutex, NULL) != 0)
            {
                LOGE( "Error initing mutex" );
            }
            if(pthread_create(&thread, NULL, threadLoop, NULL) == 0)
            {
                LOGI( "Started thread#: %d", thread);
                if(pthread_detach(thread)!=0)
                {
                    LOGE( "Error detaching thread" );
                }
            }
            else
            {
                LOGE( "Error starting thread" );
            }
        }
}

JNIEXPORT void JNICALL
Java_com_justinbuser_nativecore_NativeMethods_startThread(JNIEnv * env, jobject this){
    jniENV = env;
    start_thread();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:07:50.990

解决了这个问题。分段错误是因为我无法从从共享 jvm 指针检索的 JNIEnv 对象中检索 jclass 对象。

我与 jvm 一起传播了一个全局引用 jclass 对象，问题就解决了。

感谢您的帮助 Mārtiņš Možeiko！..

问候， 尼拉吉

# jquery - jQuery - contains / filter 和 insertBefore 重新排列列表 (div > ul > li) 问题

> ID：10240800
> 
> 赞同：1
> 
> 时间：2012-04-20T05:34:07.310
> 
> 标签：jquery, jquery-selectors

在我们的电子商务系统和 POS 系统之间进行了付费集成后，我的在线商店现在按字母/时间顺序显示尺寸。例如。 `L | M | S | XL`而不是`S | M | L | XL` 和

```
7 | 7 1/2 | 7 1/4 | 7 1/8 | 7 3/8 
```

这是因为尺寸属性/选项现在是从 POS 系统中提取的，并且对于每个产品都是独一无二的（我知道这很愚蠢，但这就是集成的工作方式）。这意味着无法手动选择它们出现的顺序，因为这将需要数千次手动更改，这违背了集成的目的。

我想出了一个 jQuery 解决方案，但遇到了一些问题。我已将此应用于数字和字母大小，并且有同样的问题。

```
$(".Value li:contains('XL')").insertBefore($(".Value li:contains('XXL')"));
$(".Value li:contains('L')").insertBefore($(".Value li:contains('XL')"));
$(".Value li:contains('M')").insertBefore($(".Value li:contains('L')"));
$(".Value li:contains('S')").insertBefore($(".Value li:contains('M')"));
$(".Value li:contains('XS')").insertBefore($(".Value li:contains('S')")); 
```

这可以正常工作，直到您获得具有姐妹值的单个字符值。换句话说，该代码将 LMS 重新排列为 SML 就好了，但是如果存在 XS 或 XL，或者在数字大小下降到一位数的情况下，它就会遇到问题。例如，如果有 7 1/4、7 1/8 等，则为 7。这显然是因为 .contains() 函数。

我曾尝试使用 .filter() 但我无法让它选择我想要的元素，更不用说 .insertBefore

谢谢。

* * *

根据要求使用 HTML 进行编辑：

```
<div class="Value">
    <ul>
            <li>
    <label><input name="variation[1]" type="radio" class="RadioButton" value="5429"  /> XL</label>
</li>   <li>
    <label><input name="variation[1]" type="radio" class="RadioButton" value="5430"  /> 2XL</label>
</li>   <li>
    <label><input name="variation[1]" type="radio" class="RadioButton" value="5431"  /> M</label>
</li>   <li>
    <label><input name="variation[1]" type="radio" class="RadioButton" value="5432"  /> L</label>
</li>   <li>
    <label><input name="variation[1]" type="radio" class="RadioButton" value="5433"  /> S</label>
</li>
    </ul>
</div> 
```

* * *

编辑 2

从上面的 HTML 和我刚刚意识到的内容可以看出 - 它不是按标签（大小）的字母/时间顺序显示，而是按时间顺序显示单选按钮值。如前所述，这是在从我们的 POS 导入产品时由购物车动态生成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:37:06.423

我不确定你需要一个通用的函数，但是这段代码会对你发布的 HTML 进行排序，并且可以传递给其他选择器和其他关键命令：

```
function sortLabels(ulSelector, order) {
    var parent = $(ulSelector);
    var items = $("li", parent).each(function() {
        // get text out of the label and trim
        var txt = $.trim($(this).find("label").text());
        // get order number
        var num = order[txt] || 0;
        // save this on the DOM object for easier sorting
        this.sortKey = num;
    }).get().sort(function(a, b) {
        // sort DOM array
        return(a.sortKey - b.sortKey);
    });

    // reinsert DOM elements in order
    for (var i = 0; i < items.length; i++) {
        parent.append(items[i]);
    }
}

var sizeOrdinals = {
    "XS": 1, "S": 2, "M": 3, "L": 4, 
    "XL": 5, "XXL": 6, "2XL": 7
};
sortLabels(".Value ul", sizeOrdinals); 
```

工作演示：http: [//jsfiddle.net/jfriend00/B45tJ/](http://jsfiddle.net/jfriend00/B45tJ/)

通过简单地定义一个新的序数表，您可以使用它来对其他类型的值（例如鞋码）进行排序，而无需重写 sortLabels 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T06:39:02.410

在你的文件中添加这个 jQuery 函数：

```
(function($) {
    $.fn.whichContains = function(content) {
        return this.filter(function() {
                return $(this).text().trim() == content;
        });
    };
}(jQuery)); 
```

并在您的 jquery 脚本中尝试使用以下公式：

```
$(".Value li").whichContains('XL').insertBefore($(".Value li").whichContains('2XL')); 
```

有关更多信息，请参阅此 JSFiddle 链接：

[http://jsfiddle.net/UcbU2/1/](http://jsfiddle.net/UcbU2/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:02:40.417

您可以使用自定义排序器按数组列表上的大小对列表项进行排序。这样，如果您需要为页面添加新尺寸，只需更新排序函数上的数组！

```
var sortSizes = [],
allLi = $("div.Value li"),
newLi = "";

// Pushing list items onto the sort Array with its size
allLi.each(function() {
    sortSizes.push(new Array($.trim($(this).text()), $('<div>').append($(this).clone()).remove().html()));
});
// Sort by index of its size in the size array below
sortSizes = sortSizes.sort(sizes);
// Get the new list of sorted LIs
for (i = 0, l = sortSizes.length; i < l; i++) {
    newLi += sortSizes[i][1];
}
// Add this sorted LI to the UL
$("div.Value ul").html(newLi);
// Size sorter
function sizes(a, b) {
    var size = ["S", "M", "L", "XL", "XXL", "XXXL"],
        a = $.inArray(a[0], size),
        b = $.inArray(b[0], size);
    return ((a < b) ? -1 : ((a > b) ? 1 : 0));
}​ 
```

这是工作小提琴：http: [//jsfiddle.net/kayen/rgQr3/2/](http://jsfiddle.net/kayen/rgQr3/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T09:43:01.630

有点晚了，但发现这个问题很有趣
这是我的做法：

## *[jsFiddle 演示](http://jsfiddle.net/6QpjM/)*

```
var size = ['XS','S','M','L','XL','XXL', '2XL'];
function sorty(a,b){
    var AA = $(a).data('size'),
        BB = $(b).data('size');
    return (AA<BB) ? -1 : (AA>BB) ? 1 : 0;
}
$('div.Value ul').each(function(ix, UL){  
    $('li', UL).each(function(ix, LI){
      for(i=0;i<size.length;i++){
        if( $.trim($(LI).find('label').text().toUpperCase()) === size[i]){
            $(LI).data('size', i);
        }
      }
    });
    $(UL).append( $('li',UL).sort(sorty) );
}); 
```

*   创建一个大小数组（从较小的）
*   创建一个排序自定义函数`sorty()`，对元素进行排序`.data()`
*   遍历循环内每个`LI --> LABEL`元素的文本。`UL``for`
*   如果文本（`trim()`空格和`toUpperCase()`修复错误）匹配一个数组 - 设置父`li`a `data-size-N`，其中 N 是返回的数组索引号（`size[i]`）。
*   现在每个`LI`都有一个类似的数据：`data-size="N"`我们可以使用我们的函数`sorty`附加到`UL`排序的 LI。

# iphone - 如何使用多线程在 UITableView 中显示 json 图像数组？

> ID：10240801
> 
> 赞同：5
> 
> 时间：2012-04-20T05:34:12.990
> 
> 标签：iphone, xcode, json, uitableview

我的服务器上的图像很少，其名称存储在 phpmysql 表中。该表包含两个字段：id 和 images。我准备了一个 php 来获取 json 编码格式的图像，如前所述：

jsonFetch.php

```
<?php
$dbhost = "localhost";
$dbname = "userauth";
$dbuser = "root";
//$DB_Pass = "root";
$dbtable = "images";

@mysql_connect($dbhost, $dbuser);
$db = mysql_select_db($dbname);

$sql = "SELECT * FROM $dbtable";
$query = mysql_query($sql);

while($row = mysql_fetch_array($query))
    {
         $rows[] = array(
        //"id" => $row[0],
        "image" => $row[1]
        //"description" => $row['description']);
        );
    }

$json = json_encode($rows);
$callback = $_GET['images'];
echo $callback.$json ;   
//print_r($json);  

?> 
```

现在，当我点击 url 时，我得到以下响应：

[{"image":"./95462"},{"image":"./8838upload_image.jpg"}{"image":"./43185upload_image.jpg"},{"image":"/17426upload_image.jpg "}]

我得到如上所述的json数组。

下一步就是在 UITableView 中以多线程的方式显示上面的数组。当我对它们进行硬编码时，我从 url 获取图像，但是当涉及到 json 解析时，我是一个菜鸟。我已经尝试了所有可以解析 json 的可能方式，以便您参考，我发布了 .m 文件。：

```
#import "json.h"

@interface profilePhotos(Private)
- (void) initialize;
- (void) loadImage:(id)arg;
- (void) updateTableView:(id)arg;
- (void) addImagesToQueue:(NSArray *)images;
- (void) addImagesToQueue:(NSArray *)arrayImages;
- (void) addImagesToQueue:(NSArray *)arrayDataFromServer;
- (void) showcommentView;
- (void) hidecommentView;
@end

@implementation profilePhotos
@synthesize photosTable;
@synthesize addPhotos;
@synthesize deletePhotos;
@synthesize back;
@synthesize imageQueue, loadedImages, imageLoaderOpQueue, commentView;
//@synthesize photosView;

-(void)initializeWith:(int)buttonTag{

tag = buttonTag;

NSLog(@"tag = %d", tag);
 }

- (id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
  if (!(self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil])) {
    return self;
  }

 [self initialize];
 return self;
  }

 - (void) awakeFromNib
 {
   NSLog(@"AsyncImageLoadingViewController::awakeFromNib called");
   [super awakeFromNib];
    [self initialize];
   }

 - (void) viewDidLoad
 {
NSLog(@"AsyncImageLoadingViewController::viewDidLoad called");
[super viewDidLoad];
 }

 - (void) viewDidAppear:(BOOL)animated
{
 NSLog(@"AsyncImageLoadingViewController::viewDidAppear called");
 [super viewDidAppear:animated];

 NSArray *images = [NSArray arrayWithObjects:
                   @"http://dl.dropbox.com/u/9234555/avatars/ava01.gif",
                   @"http://dl.dropbox.com/u/9234555/avatars/ava02.gif",
                   @"http://dl.dropbox.com/u/9234555/avatars/ava03.gif",
                   @"http://dl.dropbox.com/u/9234555/avatars/ava04.gif",
                   @"http://dl.dropbox.com/u/9234555/avatars/ava05.gif", nil];

[self addImagesToQueue:images];  
NSLog(@"addImagesToQueue: %@",self);

 }

 #pragma mark -
 #pragma mark Private Methods

  /*!
  @method     
  @abstract   initializes class variables
  */
 - (void) initialize
    {
      NSLog(@"AsyncImageLoadingViewController::initialize called");

      NSMutableArray *a = [[NSMutableArray alloc] init];
      self.imageQueue = a;
      //[a release];

      a = [[NSMutableArray alloc] init];
      self.loadedImages = a;
      //[a release];

      NSOperationQueue *queue = [[NSOperationQueue alloc] init];
      self.imageLoaderOpQueue = queue;
      //[queue release];
       }

        /*!
       @method     
       @abstract   updates tableview for the newly downloaded image and scrolls the          tableview to bottom
       */
     - (void) updateTableView:(id)arg
        {
         NSLog(@"AsyncImageLoadingViewController::updateTableView called");

         if ((arg == nil) || ([arg isKindOfClass:[UIImage class]] == NO)) {
            return;
    }

    // store the newly downloaded image
    [self.loadedImages addObject:arg];
    //[arg release];

    // refresh tableview
    [self.photosTable reloadData];

    // scroll to the last cell of the tableview
    NSIndexPath *lastRow = [NSIndexPath indexPathForRow:([self.loadedImages count] - 1) inSection:0];
    [self.photosTable scrollToRowAtIndexPath:lastRow
                            atScrollPosition:UITableViewScrollPositionBottom
                                    animated:YES];
}

 /*!
 @method     
 @abstract   downloads images, this is the method that dispatches tasks in the operation q ueue
 */
- (void) loadImage:(id)arg
 {
   NSLog(@"AsyncImageLoadingViewController::loadImage called");

   if ((arg == nil) || ([arg isKindOfClass:[NSString class]] == NO)) {
    return;
    }

    // create a local autorelease pool since this code runs not on main thread
    //NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    // fetch the image
    NSLog(@"AsyncImageLoadingViewController::loadImage - will download image: %@", arg);
    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:arg]];
    UIImage *image = [UIImage imageWithData:data];
    NSLog(@"image: %@",image);

    // update tableview with the downloaded image on main thread
    [self performSelectorOnMainThread:@selector(updateTableView:) withObject:image    waitUntilDone:NO];

    //[pool release];
     }

  /*!
  @method     
  @abstract   adds images to the queue and starts the operation queue to download them
   */
 - (void) addImagesToQueue:(NSArray *)images
   {
    NSLog(@"AsyncImageLoadingViewController::addImagesToQueue called");

    [self.imageQueue addObjectsFromArray:images];
    NSLog(@"addImagesToQueue Array: %@", self);

    // suspend the operation queue
    [self.imageLoaderOpQueue setSuspended:YES];

    // add tasks to the operation queue
     for (NSString *imageUrl in self.imageQueue) {
     NSInvocationOperation *op = [[NSInvocationOperation alloc] initWithTarget:self                                              selector:@selector(loadImage:) object:imageUrl];
      [self.imageLoaderOpQueue addOperation:op];
      // [op release];
       }

// clear items in the queue and resume the operation queue to start downloading images
[self.imageQueue removeAllObjects];
[self.imageLoaderOpQueue setSuspended:NO];
    }

 #pragma mark -
 #pragma mark UITableViewDataSource Methods

  - (NSInteger)tableView:(UITableView *)tableView
  numberOfRowsInSection:(NSInteger)section
    {

return [self.loadedImages count];

       }

  - (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
      { 

   static NSString *CellIdentifier = @"CellIdentifier";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{       
    //cell = [[[UITableViewCell alloc] initWithStyle:UITableViewStyleGrouped      reuseIdentifier:CellIdentifier] autorelease];
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewStyleGrouped   reuseIdentifier:[NSString stringWithFormat:@"cellID%d",indexPath.row]];

    cell.accessoryType =UITableViewCellAccessoryNone;
    //cell.accessoryType =UITableViewCellAccessoryDisclosureIndicator;

  }

for(UIView *subviews in cell.subviews)
    [subviews removeFromSuperview];

     UIImageView *photo;
     photo=[[UIImageView alloc] init];
     [photo setImage:[self.loadedImages objectAtIndex:indexPath.row]];
     [photo setFrame:CGRectMake(0, 5, 150, 120)];
     [cell addSubview:photo];  
     return cell;
       }

    -(void)aMethod:(UIButton *)sender{

//[sender tag];

NSIndexPath *indexPath = [photosTable indexPathForCell: (UITableViewCell*)[[sender superview]superview]];

NSLog(@"[sender tag] is %d",[sender tag]);

if([sender tag]==indexPath.row){

    textField = (UITextField*)[cell viewWithTag:[sender tag]];
    textField.hidden=NO;
    }
  //}

    }

#pragma mark -
#pragma mark UITableViewDelegate Methods

-(void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

[tableView deselectRowAtIndexPath:indexPath animated:YES];

}

 - (void)didReceiveMemoryWarning
   {
   // Releases the view if it doesn't have a superview.
   [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
     }

   - (void)viewDidUnload{
     // [self setPhotosView:nil];
  [self setPhotosTable:nil];
  [self setAddPhotos:nil];
  [self setDeletePhotos:nil];
  [self setBack:nil];
  [super viewDidUnload];
  // Release any retained subviews of the main view.
  // e.g. self.myOutlet = nil;
      }

   - (BOOL)shouldAutorotateToInterfaceOrientation:(  UIInterfaceOrientation)interfaceOrientation
      {
       // Return YES for supported orientations
      return (interfaceOrientation == UIInterfaceOrientationPortrait);
       } 
```

我相信需要在 viewDidAppear 方法中做一些事情，但我不明白它是什么。

请帮帮我。我已经尝试了所有可能的 json 方法。可能是我在这方面犯了一些错误，但我一直很沮丧。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:40:01.443

伙计..使用以下参考，您将获得教程作为工作演示..

[UITableView 中的图像使用多线程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

[如果您是 iOS 新手，请参阅此参考资料。这很简单](http://www.markj.net/iphone-asynchronous-table-image/)

希望对你有帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:45:22.307

我建议你使用[SDWebImage](https://github.com/rs/SDWebImage)

Web Image 这个库为 UIImageVIew 提供了一个类别，支持来自网络的远程图像。

它提供：

一个向 Cocoa Touch 框架添加 Web 图像和缓存管理的 UIImageView 类别 异步图像下载器 具有自动缓存过期处理的异步内存 + 磁盘图像缓存 保证不会多次下载相同的 URL 保证不会出现虚假 URL t 一次又一次地重试表演！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:47:47.910

试试看 - [https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

# ckeditor - 在 CKEditor 的差异语言环境中添加特殊符号

> ID：10240802
> 
> 赞同：0
> 
> 时间：2012-04-20T05:34:22.053
> 
> 标签：ckeditor

我想使用 CKEditor 中的下拉菜单列表添加更多不同语言环境的符号选择特殊字符颜色框。但是，我无法找到可以添加下拉菜单的相应 HTML 代码。请指导我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:04:50.767

修改你的 specialchar 插件的 js

```
/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/

/**
 * @file Special Character plugin
 */

CKEDITOR.plugins.add( 'specialchar',
{
    // List of available localizations.
    availableLangs : { en:1 , lat:2 , math:3},

    init : function( editor )
    {
        var pluginName = 'specialchar',
            plugin = this;
        // Register the dialog.
        CKEDITOR.dialog.add( pluginName, this.path + 'dialogs/specialchar.js' );
        editor.addCommand( pluginName,
            {
                exec : function()
                {   
                    if(CKEDITOR.dialog.getCurrent())
                    {
                        CKEDITOR.dialog.getCurrent().hide();
                    }    

                    var langCode = editor.langCode;     
                    langCode = plugin.availableLangs[ langCode ] ? langCode : 'en';

                    CKEDITOR.scriptLoader.load(
                            CKEDITOR.getUrl( plugin.path + 'lang/' + langCode + '.js' ),
                            function()
                            {
                                CKEDITOR.tools.extend( editor.lang.specialChar, plugin.langEntries[ langCode ] );                                   
                                editor.openDialog( pluginName );                                                    
                            });
                },
                modes : { wysiwyg:1 },
                canUndo : false             
            });

        // Register the toolbar button.
        editor.ui.addButton( 'SpecialChar',
            {
                label : editor.lang.specialChar.toolbar,
                command : pluginName
            });
    }
} );

/**
  * The list of special characters visible in the Special Character dialog window.
  * @type Array
  * @example
  * config.specialChars = [ '&quot;', '&rsquo;', [ '&custom;', 'Custom label' ] ];
  * config.specialChars = config.specialChars.concat( [ '&quot;', [ '&rsquo;', 'Custom label' ] ] );
  */

    CKEDITOR.config.specialChars =
        [
            '!','&quot;','#','$','%','&amp;',"'",'(',')','*','+','-','.','/',
            '0','1','2','3','4','5','6','7','8','9',':',';',
            '&lt;','=','&gt;','?','@',
            'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O',
            'P','Q','R','S','T','U','V','W','X','Y','Z',
            '[',']','^','_','`',
            'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p',
            'q','r','s','t','u','v','w','x','y','z',
            '{','|','}','~',
            "&euro;", "&lsquo;", "&rsquo;", "&ldquo;", "&rdquo;", "&ndash;", "&mdash;", "&iexcl;", "&cent;", "&pound;", "&curren;", "&yen;", "&brvbar;", "&sect;", "&uml;", "&copy;", "&ordf;", "&laquo;", "&not;", "&reg;", "&macr;", "&deg;", "&sup2;", "&sup3;", "&acute;", "&micro;", "&para;", "&middot;", "&cedil;", "&sup1;", "&ordm;", "&raquo;", "&frac14;", "&frac12;", "&frac34;", "&iquest;", "&Agrave;", "&Aacute;", "&Acirc;", "&Atilde;", "&Auml;", "&Aring;", "&AElig;", "&Ccedil;", "&Egrave;", "&Eacute;", "&Ecirc;", "&Euml;", "&Igrave;", "&Iacute;", "&Icirc;", "&Iuml;", "&ETH;", "&Ntilde;", "&Ograve;", "&Oacute;", "&Ocirc;", "&Otilde;", "&Ouml;", "&times;", "&Oslash;", "&Ugrave;", "&Uacute;", "&Ucirc;", "&Uuml;", "&Yacute;", "&THORN;", "&szlig;", "&agrave;", "&aacute;", "&acirc;", "&atilde;", "&auml;", "&aring;", "&aelig;", "&ccedil;", "&egrave;", "&eacute;", "&ecirc;", "&euml;", "&igrave;", "&iacute;", "&icirc;", "&iuml;", "&eth;", "&ntilde;", "&ograve;", "&oacute;", "&ocirc;", "&otilde;", "&ouml;", "&divide;", "&oslash;", "&ugrave;", "&uacute;", "&ucirc;", "&uuml;", "&yacute;", "&thorn;", "&yuml;", "&OElig;", "&oelig;", "&#372;", "&#374", "&#373", "&#375;", "&sbquo;", "&#8219;", "&bdquo;", "&hellip;", "&trade;", "&#9658;", "&bull;", "&rarr;", "&rArr;", "&hArr;", "&diams;", "&asymp;"
        ];

    var latin = ['ƀ','Ɓ','Ƃ','ƃ','Ƅ','ƅ','Ɔ','Ƈ','ƈ','Ɖ','Ɗ','Ƌ','ƌ','ƍ','Ǝ','Ə','Ɛ','Ƒ','ƒ','Ɠ','Ɣ','ƕ','Ɩ','Ɨ','Ƙ','ƙ','ƚ','ƛ','Ɯ','Ɲ','ƞ','Ɵ','Ơ','ơ','Ƣ','ƣ','Ƥ','ƥ','Ʀ','Ƨ','ƨ','Ʃ','ƪ','ƫ','Ƭ','ƭ','Ʈ','Ư','ư','Ʊ','Ʋ','Ƴ','ƴ','Ƶ','ƶ','Ʒ','Ƹ','ƹ','ƺ','ƻ','Ƽ','ƽ','ƾ','ƿ','ǀ','ǁ','ǂ','ǃ','Ǆ','ǅ','ǆ','Ǉ','ǈ','ǉ','Ǌ','ǋ','ǌ','Ǎ','ǎ','Ǐ','ǐ','Ǒ','ǒ','Ǔ','ǔ','Ǖ','ǖ','Ǘ','ǘ','Ǚ','ǚ','Ǜ','ǜ','ǝ','Ǟ','ǟ','Ǡ','ǡ','Ǣ','ǣ','Ǥ','ǥ','Ǧ','ǧ','Ǩ','ǩ','Ǫ','ǫ','Ǭ','ǭ','Ǯ','ǯ','ǰ','Ǳ','ǲ','ǳ','Ǵ','ǵ','Ƕ','Ƿ','Ǹ','ǹ','Ǻ','ǻ','Ǽ','ǽ','Ǿ','ǿ','Ȁ','ȁ','Ȃ','ȃ','Ȅ','ȅ','Ȇ','ȇ','Ȉ','ȉ','Ȋ','ȋ','Ȍ','ȍ','Ȏ','ȏ','Ȑ','ȑ','Ȓ','ȓ','Ȕ','ȕ','Ȗ','ȗ','Ș','ș','Ț','ț','Ȝ','ȝ','Ȟ','ȟ','Ƞ','','Ȣ','ȣ','Ȥ','ȥ','Ȧ','ȧ','Ȩ','ȩ','Ȫ','ȫ','Ȭ','ȭ','Ȯ','ȯ','Ȱ','ȱ','Ȳ','ȳ','ȷ','ȸ','ȹ','Ⱥ','Ȼ','ȼ','Ƚ','Ⱦ','ȿ','ɀ','Ɂ','ɂ','Ƀ','Ʉ','Ʌ','Ɇ','ɇ','Ɉ','ɉ','Ɋ','ɋ','Ɍ','ɍ','Ɏ','ɏ'];

    var math_operator = ['∀','∁','∂','∃','∄','∅','Δ','∇','∈','∉','ε','∋','∌','∍','∎','Π','∐','Σ','−','∓','∔','∕','','∗','∘','∙','√','∛','∜','∝','∞','∟','∠','∡','∢','∣','∤','∥','∦','∧','∨','∩','∪','∫','∬','∭','∮','∯','∰','∱','∲','∳','∴','∵','∶','∷','∸','∹','∺','∻','∼','∽','∾','∿','≀','≁','≂','≃','≄','≅','≆','≇','≈','≉','≊','≋','≌','≍','≎','≏','≐','≑','≒','≓','≔','≕','≖','≗','≘','≙','≚','≛','≜','≝','≞','≟','≠','≡','≢','≣','≤','≥','≦','≧','≨','≩','≪','≫','≬','≭','≮','≯','≰','≱','≲','≳','≴','≵','≶','≷','','','≺','≻','≼','≽','≾','≿','⊀','⊁','⊂','⊃','⊄','⊅','⊆','⊇','⊈','⊉','⊊','⊋','⊌','⊍','⊎','⊏','⊐','⊑','⊓','⊔','⊕','⊖','⊗','⊘','⊙','⊚','⊛','⊜','⊝','⊞','⊟','⊠','⊡','⊢','⊣','⊤','⊥','⊦','⊧','⊨','⊩','⊪','⊫','⊬','⊭','⊮','⊯','⊰','⊱','⊲','⊳','⊴','⊵','','','','⊹','⊺','⊻','⊼','⊽','⊿','⋀','⋁','⋂','⋃','⋄','⋅','⋆','⋇','','','⋍','⋎','⋏','⋐','⋑','⋒','⋓','⋔','⋕','⋖','⋗','⋘','⋙','⋚','⋛','⋜','⋝','⋞','⋟','⋠','⋡','⋢','⋣','⋤','⋥','⋦','⋧','⋨','⋩','⋪','⋫','⋬','⋭','⋮','⋯','⋰','⋱',]; 
```

# cakephp - Cakephp 2.1 图片上传插件

> ID：10240803
> 
> 赞同：0
> 
> 时间：2012-04-20T05:34:23.653
> 
> 标签：cakephp, cakephp-2.1

我正在寻找插件来上传内容 - 主要是图像。我发现了几个适用于 1.3 的插件，但不是没有适用于 2.1

你能分享一些2.1的插件吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T06:47:58.550

你试过meio上传吗？它与 cake 2.x 兼容？

[https://github.com/jrbasso/MeioUpload](https://github.com/jrbasso/MeioUpload)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T08:19:39.170

我刚刚发现的一个不错的：

*   [https://github.com/bmcclure/CakePHP-Media-Plugin](https://github.com/bmcclure/CakePHP-Media-Plugin)

我没有对其进行太多测试，但它似乎工作得很好，您甚至可以定义要自动创建的其他图像大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:52:39.797

您可以为 2.1 自定义 1.3 版本插件或使用类似的东西：[CakePHP File Upload](https://github.com/jrbasso/MeioUpload)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T06:25:33.180

虽然其他的都不错，但我发现这个比其他的更容易使用，看看：

[https://github.com/malikov/cakephp2.0-image-upload](https://github.com/malikov/cakephp2.0-image-upload)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-26T16:13:37.830

我为 cakephp 想象库使用包装器：

[https://github.com/burzum/cakephp-imagine-plugin](https://github.com/burzum/cakephp-imagine-plugin)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-20T08:10:54.797

[上传](https://github.com/josegonzalez/cakephp-upload)插件现已在 Github 上可用

# php - Flex 图像编辑器问题

> ID：10240810
> 
> 赞同：1
> 
> 时间：2012-04-20T05:34:49.947
> 
> 标签：php, actionscript-3, imagemagick, image-manipulation, image-editing

我们开发了用于编辑名片和模板的 flex 图像编辑器。用户可以添加文本，为该模板中的文本选择字体和大小并保存其输出。

由于 flex 是一个客户端程序，因此将输出直接从 flex 保存到我们的服务器非常耗时。为此，我们使用 PHP 脚本通过接收由 flex 添加的文本的 x,y 坐标来保存该输出。

我们还需要将这些输出保存为 300 dpi 以供打印。我们能够以 300 dpi 输出图像，但在编辑器和最终输出中看到的文本对齐仍然存在问题。我可以说它是 90% 正确的。

有人可以指导我使其 100% 准确吗？

评论的答案

我们有 flex 用来添加文本的相同模板图像。在从 flex 编辑器接收坐标、字体和大小后，我们使用 ImageMagick 向该图像添加文本。

关于字体大小还有一个挑战，因为 Flex 将大小存储为像素，我们必须将其转换为 PHP 的点数。我们正在使用以下计算来转换它。

点 = 像素 * 72 / 96

# javascript - 将全局变量的名称传递给改变变量的函数？

> ID：10240815
> 
> 赞同：0
> 
> 时间：2012-04-20T05:35:09.387
> 
> 标签：javascript

我今天遇到了一个奇怪的问题。

好处：我成功地从一个函数中更改了一个全局 var 值（换句话说，当“passedVarName”被“a”替换时，下面的示例可以正常工作）。

坏处：当试图传递全局变量名“a”（而不是将其直接放在函数中）时，它无法工作。

以下是我似乎无法工作的内容：

（点击文档应该写“2”，而是写“NaN”？）

Javascript：

```
 var a = 1;

  function click(passedVarName){

     passedVarName ++;

     document.write(passedVarName)

  }; 
```

HTML：

```
<a href="javascript:click('a')">Click this Button to alter global var "a".</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:47:16.960

这是一个非常糟糕的代码气味，但如果你知道它是全球性的，那么这将起作用：

```
var a = 1;

function click(passedVarName){

    window[passedVarName]++;

    document.write(passedVarName)

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:44:15.853

单击此按钮可更改全局变量“a”。

这会将字符串“a”传递给您的函数，而不是变量 a。您需要将其传递为`click(a);`

更正示例： [http ://html-bin.appspot.com/aghodG1sLWJpbnIMCxIEUGFnZRjhjxoM](http://html-bin.appspot.com/aghodG1sLWJpbnIMCxIEUGFnZRjhjxoM)

[没有使用 jsfiddle.net 通过分隔 javascript 和 HTML 来避免混淆]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:03:48.740

将全局变量作为参数传递给函数会在函数内创建该 var 的副本。全局不变。

每次单击第一个 div 时，此示例将生成相同的输出：

```
//html
<div onclick="foo(a)">Click here</div>
<div id="txt"></div>​​​​​​​​​​​​​
//js
window.a = 152;
window.foo = function(varr) {varr++; $("#txt").html(varr)}​ 
```

但是，似乎如果您将变量作为对象的属性传递，将该对象传递给函数，并在函数内部修改变量，则它具有全局效果：

```
//html
<div onclick="foo(a)">Click here</div>
<div id="txt"></div>​​​​​​​​​​​​​​​​
//js
window.a = { val:152};
window.foo = function(varr) {varr.val++; $("#txt").html(varr.val)}​ 
```

这是一个有效的 jsFiddle：http: [//jsfiddle.net/2Ahdb/3/](http://jsfiddle.net/2Ahdb/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T07:45:35.953

如果我误解了您的编程知识，请原谅我，但是全局变量是可以由您的编程的任何部分访问和修改的东西，您不需要通过函数传递它来修改它。

如果您尝试通过函数修改全局变量，则 javascript 有一些限制。只有对象通过引用传递。

```
var a = 5;
var b = { value: 5 };

function changeMe(x) {
   x = 10;
}
changeMe(a); //... still 5

function changeMeAlso(x) {
   x.value = 10;
}
changeMeAlso(b); //.. changed to { value: 10 } 
```

# c# - ZeroMQ/0MQ 推/拉内存和路由问题

> ID：10240817
> 
> 赞同：-1
> 
> 时间：2012-04-20T05:35:18.567
> 
> 标签：c#, sockets, tcp, messaging, zeromq

我在 ZeroMQ 上玩了一段时间，并提出了几个问题/问题。如果 ZeroMQ 的任何贡献者可以加入或任何使用或当前使用该库的人将不胜感激。

***假设我有一个路由器/转发器和 2 个不同的客户端（c1，c2）。我想通过路由设备将消息从 client1 推送到 client2。路由器从任何客户端（此处为 client1）提取消息并将它们发布到任何订阅的客户端（此处为 client2）。我目前将此类消息路由到相应客户端的唯一方法是通过 pub/sub，但是，a）我想通过发送 routingTo 标记以及消息正文来决定如何在运行时路由，b）我想使用 push /pull 转发给客户端，而不是发布/订阅，因为我想在设置高水位标记属性时实现阻塞功能，c）我想让 c1 和 c2 连接到 1 个端口用于推送和 1 个端口用于订阅。我能否以某种方式在路由器端进行更改以便不必使用 pub/sub 或者 pub/sub 是路由到客户端的唯一方法，即使我知道在路由端应该将消息转发到哪里？我读到当队列大小超过我不想要的 hwm 时，pub/sub 会丢弃消息。我也不想实现请求/回复模式，因为它增加了不必要的开销，因为我不需要回复。

***在运行以下代码（Push/Pull -> Pub/Sub）并发送所有消息并收到确认所有消息已收到后，推送消息的客户端仍然显示巨大的内存占用，显然仍然有大量消息在Push 套接字的队列。为什么会这样，我能做些什么来解决这个问题？

这是我的代码：

路由器：

```
class Program
{
    static void Main(string[] args)
    {
        using (var context = new Context(1))
        {
            using (Socket socketIn = context.Socket(SocketType.PULL), socketOut = context.Socket(SocketType.XPUB))
            {
                socketIn.HWM = 10000;
                socketOut.Bind("tcp://*:5560"); //forwards on this port
                socketIn.Bind("tcp://*:5559"); //listens on this port

                Console.WriteLine("Router started and running...");

                while (true)
                {
                    //Receive Message
                    byte[] address = socketIn.Recv();
                    byte[] body = socketIn.Recv();

                    //Forward Message
                    socketOut.SendMore(address);
                    socketOut.Send(body);
                }
            }
        }
    }
} 
```

客户1：

```
class Program
{
    static void Main(string[] args)
    {
        using (var context = new Context(1))
        {
            using (Socket socketIn = context.Socket(SocketType.SUB), socketOut= context.Socket(SocketType.PUSH))
            {
                byte[] iAM = Encoding.Unicode.GetBytes("Client1");
                byte[] youAre = Encoding.Unicode.GetBytes("Client2");
                byte[] msgBody = new byte[16];

                socketOut.HWM = 10000;
                socketOut.Connect("tcp://localhost:5559");
                socketIn.Connect("tcp://localhost:5560");
                socketIn.Subscribe(iAM);

                Console.WriteLine("Press key to kick off Test Client1 Sending Routine");
                Console.ReadLine();

                for (int counter = 1; counter <= 10000000; counter++)
                {
                    //Send Message
                    socketOut.SendMore(youAre);
                    socketOut.Send(msgBody);
                }

                Console.WriteLine("Client1: Finished Sending");
                Console.ReadLine();
            }
        }
    }
} 
```

客户2：

```
class Program
{
    public static int msgCounter;

    static void Main(string[] args)
    {
        msgCounter = 0;

        using (var context = new Context(1))
        {
            using (Socket socketIn = context.Socket(SocketType.SUB), socketOut = context.Socket(SocketType.PUSH))
            {
                byte[] iAM = Encoding.Unicode.GetBytes("Client2");

                socketOut.Connect("tcp://localhost:5559");
                socketIn.Connect("tcp://localhost:5560");
                socketIn.Subscribe(iAM);

                Console.WriteLine("Client2: Started Listening");

                //Receive First Message
                byte[] address = socketIn.Recv();
                byte[] body = socketIn.Recv();
                msgCounter += 1;

                Console.WriteLine("Received first message");

                Stopwatch watch = new Stopwatch();
                watch.Start();

                while (msgCounter < 10000000)
                {
                    //Receive Message
                    address = socketIn.Recv();
                    body = socketIn.Recv();
                    msgCounter += 1;
                }

                watch.Stop();
                Console.WriteLine("Elapsed Time: " + watch.ElapsedMilliseconds + "ms");
                Console.ReadLine();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T18:23:22.530

我将建议您的架构可能有点偏离这里。

1) 如果您需要一个 PUSH 和一个 PULL，请从中间移除设备。设备被显式添加到架构中以管理多个消费者，这样您就不必在每次添加节点时更新生产者。当/如果您确实到达需要多个消费者和/或生产者的地方，您将需要连接到设备上的每个节点——这就是它们的工作方式。在这种情况下，听起来该设备使您的解决方案过于复杂。

2）拥有“路线”标签的想法真的让我大吃一惊。选择消息传递而不是其他集成选项的最大原因可能是将生产者和消费者解耦，这样任何一方都不必知道对方的任何信息（除了在无代理设计的情况下将消息发送到哪里）。将路由信息直接添加到您的逻辑中会破坏这一点。

至于开销，我从未经历过。但是，我以前从未使用过 ZeroMQ 的 .Net 驱动程序，因此未受过教育的猜测是查看 .Net 驱动程序本身。

# xslt - 如何使用 XSLT 调解器在 tridion SDL Tridion 2011 SP1 中处理 XSLT 中的链接组件

> ID：10240822
> 
> 赞同：4
> 
> 时间：2012-04-20T05:35:51.383
> 
> 标签：xslt, xpath, tridion

我正在为一个链接到另一个组件的组件创建 XSLT TBB。

考虑我的组件名称是“A”，它链接到另一个组件“B”。

组件 A 的源代码如下所示：

```
<Content xmlns="Some UUID">
    <Name xlink:type="simple" xlink:href="tcm:184-1897" 
          xmlns:xlink="http://www.w3.org/1999/xlink" xlink:title="B"></Name>
</Content> 
```

组分 B 来源是：

```
<Content xmlns="Some UUID">
    <first>first filed</first>
    <second>second field</second>
</Content> 
```

谁能帮我写一个 XSLT TBB 来输出这个链接组件的值？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T09:34:32.650

请解释“处理此组件链接”的含义。

您的意思是要在内容管理器端的 TBB 中访问此链接的组件及其字段，还是您的意思是要在 HTML 中输出链接到您网站上的其他组件的锚标记？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T15:46:12.630

为了访问链接组件中的字段，您需要使用文档函数加载它，请记住链接组件可能基于不同的模式，因此具有不同的名称空间，如下所示：

***组分 A***

```
<Content xmlns="Some UUID">
    <Name xlink:type="simple" 
        xlink:href="tcm:184-1897" 
        xmlns:xlink="http://www.w3.org/1999/xlink" 
        xlink:title="B"/>
</Content> 
```

***B组份***

```
<Content xmlns="Some Other UUID">
    <Text>Some Value</Text>
</Content> 
```

然后，您可以转换组件 A 并访问链接的组件 B，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:main="Some UUID" 
    xmlns:link="Some Other UUID" 
    xmlns:xlink="http://www.w3.org/1999/xlink" >
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <xsl:variable name="LINKED_COMPONENT" select="document(//main:Name/@xlink:href)"/>
        <xsl:value-of select="$LINKED_COMPONENT//link:Text"/>
    </xsl:template>
</xsl:stylesheet> 
```

请注意，我在 XPath 中使用了“//”以使代码更易于阅读，但从性能的角度来看，这并不理想。

如果由于某种原因您不知道链接的组件将基于什么模式（因此命名空间），您也可以使用该`$LINKED_COMPONENT//*[local-name()='Text']`符号，但这又会带来性能损失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T09:28:24.153

要输出您的组件链接到的图像，请查看以下内容：http: [//yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1](http://yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1)

```
<xsl:element name="img">
    <xsl:attribute name="src">
        <xsl:value-of select="simple:image/@xlink:href"/>
    </xsl:attribute>
</xsl:element> 
```

编辑：要输出链接组件的附加字段，请参阅本节：http: [//yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1/#complink](http://yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1/#complink)

那里的一个例子：

```
<xsl:attribute name="alt">
    <xsl:value-of select="document(simple:image/@xlink:href)/tcm:Component/tcm:Data/tcm:Metadata/image:Metadata/image:altText"/>
</xsl:attribute> 
```

所以这会加载多媒体组件，然后从元数据字段中提取一个值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T10:49:19.287

这是从多值组件链接中提取一些字段的 XSLT 代码。请记住，组件链接属于同一架构。

```
<!-- language: xml -->
<xsl:for-each select="base:componentLink">
<xsl:element name="div">      
  <xsl:variable name ="LinkedComponent" select="document(./@xlink:href)"></xsl:variable>
  <xsl:value-of select="$LinkedComponent/tcm:Component/tcm:Data/tcm:Content/linked:Teaser/linked:LinkText"/>      
</xsl:element>
</xsl:for-each> 
```

# php - 保存在变量 PHP 中后无法处理 curl 响应

> ID：10240828
> 
> 赞同：0
> 
> 时间：2012-04-20T05:36:28.777
> 
> 标签：php, html, curl

```
$ch = curl_init("http://acrs.bboxpr.com/getAddress.php?lat=35.545112&lng=-90.657635");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$address = curl_exec($ch);       
curl_close($ch);

//prints the address
echo $address;

//$token = strtok($address, ",");
//$phaddress=array();
//while ($token != null)
//{
//array_push($phaddress,$token);
//$token = strtok(",");
//}
//print_r($phaddress); //blank 
```

该行将`echo $address;`打印页面中的内容，但如果我取消注释下面的代码（以: 开头的代码`$token=strtok`），$address 将看起来是空的。我添加了更多使用 $address 的结果的代码（但我没有在这里包含它），有时会出现在 curl 初始化中调用的站点的源代码。所以我认为 curl 可能需要更长的时间，但我试图在 srtok 之前睡觉，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:43:13.530

在您的`while`循环中，您必须替换`$token = strtok(",");`为`$token = strtok($address, ",");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:21:05.267

由于您要从谷歌获取 MAP 信息，我认为您使用了错误的方法，`javascript`因为这可能更难以解析

你为什么不尝试`PHP`直接使用

```
$ch = curl_init("http://maps.google.com/maps/api/geocode/json?latlng=35.545112,-90.657635&sensor=false");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
$return = curl_exec($ch);
curl_close($ch);
$geoOutput = json_decode($return,true);
echo "<pre>" ;

foreach($geoOutput as $key => $data)
{
    if(is_array($data))
    {
        foreach($data as $cKey => $cData)
        {
            var_dump($cData['formatted_address']);
        }
    }
} 
```

输出

```
string(43) "6724-6916 Bay Ln, Harrisburg, AR 72432, USA"
string(16) "Bolivar, AR, USA"
string(25) "Harrisburg, AR 72432, USA"
string(17) "Poinsett, AR, USA"
string(13) "Arkansas, USA" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T07:49:59.197

将您的 while 循环更改为：`while ($token !== false)`

# android - 如何在 Android SDK 中实现订阅

> ID：10240830
> 
> 赞同：0
> 
> 时间：2012-04-20T05:36:40.927
> 
> 标签：android, payment-gateway

在应用程序中我们可以添加一个按年订阅的方法，这样如果订阅关闭，它每年都会停止工作，否则当年的付款将不会成功。

任何想法都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:46:38.140

您可以使用[应用内结算](http://developer.android.com/guide/market/billing/index.html)

或者，如果您允许您的客户在您的网站上创建一个帐户。他们可以在那里向您付款，您可以使用自己的服务器通过从应用程序调用订阅来验证订阅。

# c# - 使用 Membership.GetUser() 时发生错误

> ID：10240834
> 
> 赞同：2
> 
> 时间：2012-04-20T05:37:07.200
> 
> 标签：c#, asp.net-mvc-3, c#-4.0

当我使用`Membership.GetUser()`方法并包含`using System.Web.Security;`命名空间时，错误表明

> “类型‘System.Web.Security.MembershipUser’是在未引用的程序集中定义的。您必须添加对程序集‘System.Web.ApplicationServices，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35’的引用.C:\Raj\Orchard\src\Orchard.Web\Modules\test\Controllers\VideoController.cs"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:40:55.700

您需要在 Visual Studio 项目中对 System.Web.ApplicationServices 程序集执行“添加引用”。有关详细信息，请参阅以下链接：[如何：在 Visual Studio 中添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.100%29.aspx)

> 在 Visual C# 中添加引用
> 
> 在解决方案资源管理器中，右键单击项目节点，然后单击添加引用。
> 
> 在“添加引用”对话框中，选择指示要引用的组件类型的选项卡。
> 
> 选择要引用的组件，然后单击“确定”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T05:41:58.437

尽管`Memebership`类驻留在 System.Web 程序集中，但该`GetUser`方法返回类型的对象，`MembershipUser`并且此类型在`System.Web.ApplicationServices`程序集中定义。

因此，您需要添加对该程序集的引用，以便您可以在代码中使用所述类型。

# php - 带有分页的图形 API 批处理？

> ID：10240841
> 
> 赞同：0
> 
> 时间：2012-04-20T05:38:36.827
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在使用 PHP Facebook SDK 和图形 API 来获取用户所有朋友的所有喜欢。问题是执行需要相当长的时间。

目前我正在获取所有用户的朋友，然后单独遍历每个朋友并收集他们所有的喜欢。

为了加快速度，我想对每 50 个“/user_friend_fbid/likes”请求进行批处理（但也对这些请求进行分页）。

即：

```
foreach (facebookUserFriends($fb_id) as $friend) { //custom func returns friends
    facebookUserLikes($friend['id'],$fb_location); //custom func returns all user likes
} 
```

...相对：

```
$i = 0;     
foreach (facebookUserFriends($fb_id) as $friend) {
    $queries[$i]['method'] = 'GET';
    $queries[$i]['relative_url'] = $friend['id'].'/likes';
    if ($i==49) {
       batchProcess($queries); //custom func returns all likes (but doesn't do paging)
       $i = 0;
    }
    $i++;
} 
```

***TL;DR 如何在批处理查询中执行分页？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:05:20.400

那东西可能会很快变得丑陋;-)

改用 FQL 多查询并节省双方时间：[https ://developers.facebook.com/docs/reference/rest/fql.multiquery/](https://developers.facebook.com/docs/reference/rest/fql.multiquery/)

也可以在这里查看： [Facebook New PHP SDK For Graph API - Multi Query](https://stackoverflow.com/questions/4332739/facebook-new-php-sdk-for-graph-api-multi-query)

对于您的情况，一个 FQL 就足够了：

```
SELECT object_id, user_id FROM like WHERE user_id IN (SELECT uid2 FROM friend WHERE uid1=me()) 
```

例如，这会为我自己的朋友找到喜欢的人；`me()`用别的东西代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:35:49.003

我会采取广度优先的方法。将前 50 个用户第一次批量请求排队，当批量返回时，保存数据，然后从返回的 50 个分页 url 中创建一个新的批量。

# c# - 如何转换 IQueryable > 到 IQueryable 与 Linq

> ID：10240859
> 
> 赞同：3
> 
> 时间：2012-04-20T05:40:47.147
> 
> 标签：c#, linq, iqueryable

```
var page = pagesRepository.GetPages();
var categoryPages = page.ChildCategoryPages;
var articlePages = categoryPages.Select(x => x.ChildPages); 
```

`articlePages`是`IQueryable<IQueryable<Page>>`。但我需要`IQueryable<Page>`.

这该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T05:49:00.590

```
var articlePages = categoryPages.SelectMany(x => x.ChildPages); 
```

# android - ScaleAnimation Android API 8 级

> ID：10240860
> 
> 赞同：1
> 
> 时间：2012-04-20T05:40:50.553
> 
> 标签：android, android-animation

我有一个问题：
我在我的项目中实现了拖放，其中包含一些模拟 android 2.2 拖放的图标。
因此，当您单击图标一秒钟时，您可以开始移动手指并将图标插入屏幕的任何部分。android 2.2（API level 8）的基本行为是当你长按时，你触摸的图标会有一点振动和动画，你可以开始移动。
我已经实现了振动，但我不知道我可以实现什么小动画。
我读过关于 a`scaleAnimation`但我不确定。
谁能解释我实现这个动画的最佳方法？
有一些教程或例子吗？
提前致谢。
马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:44:25.590

[这是使用动画替换视图DraggableGridView](https://github.com/thquinn/DraggableGridView)拖放的好例子

您也可以扩展您的自定义布局，并可以处理与之相关的所有事件。

# php - 来自同一源文件夹的多个 SVN 存储库

> ID：10240865
> 
> 赞同：0
> 
> 时间：2012-04-20T05:41:01.017
> 
> 标签：php, svn, repository

我对 SVN 很陌生，经过大约 30 分钟的搜索，我找不到如何做到这一点的答案。我目前在一个文件夹中有一堆文件，它们属于 2-3 个不同的存储库。我想让它们保持原样（不要将它们移动到单独的文件夹中）但是当我在那个目录中并告诉它提交时，它怎么知道我在说哪个存储库？我不想移动文件的原因是因为它会破坏我的开发环境（运行 apache 的服务器上的 php）代码中的路径依赖关系，我希望能够让开发环境继续工作并且只有任何给定文件的一个版本。如果有帮助，我愿意使用符号链接。有谁知道解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:44:32.543

你应该阅读[svn externals](http://svnbook.red-bean.com/en/1.6/svn-book.html#svn.advanced.externals)。

# configuration - 在 Heroku 上部署 Sinatra 应用程序

> ID：10240872
> 
> 赞同：1
> 
> 时间：2012-04-20T05:42:11.113
> 
> 标签：configuration, sinatra, rackup

关于在 Heroku 上部署 Sinatra 应用程序，我对实际上不是一个实际问题（只是一个概念难题）感到困惑。

我有两个应用程序，几乎在各个方面都相同，除了一个将其大部分逻辑放在一个不包含 Sinatra::Base 类的文件中，并使用“需要其他文件名”来获取它需要的逻辑。该 Sinatra:Base 类名为 Kincalc。

对于在一个文件中包含所有逻辑的应用程序（即包含 Sinatra:Base 类的同一文件），在我的 config.ru 文件中，最后一行显示“运行 Sinatra::Application”，它可以正常启动。但是在另一个应用程序中，如果我将其作为最后一行，该应用程序会正确上传并说它已“部署到 Heroku”，但会显示“未找到”消息。当我将最后一行读取为“运行 Kincalc”时，它可以正常加载。

我已经来回检查了这一点，这两个应用程序的构建方式没有什么不同，除了一个为逻辑使用第二个文件（也位于根目录）的事实。为什么这会是个问题，或者这真的是个问题？当我尝试将第二个文件（没有 Sinatra 类的文件）放在单独的 lib 文件夹中时，当我调用类名时它仍然有效，但当我调用“Sinatra::Application”时它仍然有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T08:53:50.333

顶层代码将委托给`Sinatra::Application`，因此这将是运行经典应用程序的场景：

```
# app.rb
require 'sinatra'

get '/' do
  'hi'
end

# config.ru
require './app'
run Sinatra::Application 
```

如果你定义一个模块化应用程序，你会像这样运行它：

```
# app.rb
require 'sinatra/base'

class Kincalc < Sinatra::Base
  get '/' do
    'hi'
  end
end

# config.ru
require './app'
run Kincalc 
```

现在我假设你想要做的是：

```
# otherfilename.rb
require 'sinatra'

get '/' do
  'hi'
end

# app.rb
require 'sinatra/base'

class Kincalc < Sinatra::Base
  require './otherfilename'
end

# config.ru
require './app'
run Kincalc # Sinatra::Application seems to work 
```

您遇到的行为（获取 404 File Not Found）实际上是正确的，因为`require`不关心它被调用的词法范围。查看以下示例

```
# a.rb
puts "in a, top level: #{self.inspect}"

module Example
  puts "in a, nested: #{self.inspect}"
  require 'b'
end

# b.rb
puts "in b: #{self.inspect}" 
```

结果输出应该是：

```
in a, top level: main
in a, nested: Example
in b: main 
```

因此，如果您想使用*一个*模块化应用程序，您应该执行以下操作：

```
# otherfilename.rb
Kincalc.get '/' do
  'hi'
end 
```

或再次打开课程：

```
# otherfilename.rb
class Kincalc
  get '/' do
    'hi'
  end
end 
```

或者您实际上`otherfilename.rb`可以`Sinatra::Application`在`Kincalc`.

```
# app.rb
require 'sinatra/base'
require './otherfilename'

class Kincalc < Sinatra::Base
  use Sinatra::Application
end 
```

或者您可以更改将顶级 DSL 方法委托给的位置：

```
# app.rb
require 'sinatra/base'

class Kincalc < Sinatra::Base
  Sinatra::Delegator.target = self
  require './otherfilename'
end 
```

# .net - 使用效果时 WPF 中的渲染问题

> ID：10240874
> 
> 赞同：2
> 
> 时间：2012-04-20T05:42:17.287
> 
> 标签：.net, wpf, rendering, effect

当我使用 Effects（特别是 a `DropShadowEffect`）时，我遇到了 WPF 中的渲染问题。这就是我的 UI 应该是这样的： ![在此处输入图像描述](../Images/c3150ecc1be109dd979add6347de55f3.png)

但是当我开始调整窗口大小时，它会在某些点出现故障并转向：

![在此处输入图像描述](../Images/e5f93730c624eef8c0e800941b50a937.png)

您可以看到文本被扭曲，并且在“启动服务器”按钮的右侧有一条暗线。如果我删除效果，问题就会消失。这只是 WPF 中的一个错误，还是有办法修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T06:24:18.817

正如哈雷所说，您可能会“遭受”亚像素定位。如果针对 .Net 4 FrameWork 编译应用程序，则可以设置窗口的 UseLayoutRounding 属性来关闭此行为。

```
UseLayoutRounding=True 
```

如果这不起作用，请尝试软件渲染以检查 DX 是否给您带来麻烦（尽管我敢打赌您不必去那里）。

```
RenderOptions.ProcessRenderMode = RenderMode.SoftwareOnly; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:53:34.883

我猜你的启动服务器按钮和搜索栏有中心对齐，所以当你调整整个窗口的大小时，控件可能会在屏幕上从半像素绘制到另一个半像素。这就是控件看起来模糊的原因。

试试[SnapToDevicePixels](http://msdn.microsoft.com/en-us/library/system.windows.uielement.snapstodevicepixels.aspx)看看它是否有帮助。将两个控件的属性设置为 true。它应该确保所有边缘都绘制在物理设备像素上。

# javascript - 节点中的 RequireJS 因使用插件的依赖项而失败（例如使用 use.js）

> ID：10240879
> 
> 赞同：3
> 
> 时间：2012-04-20T05:43:11.887
> 
> 标签：javascript, node.js, requirejs

为了在浏览器和节点之间共享 AMD 模块，我在两个地方都使用了 RequireJS（请参阅[Node 中的 RequireJS](http://requirejs.org/docs/node.html)）。

服务器/dataDao.js：

```
var requirejs = require('requirejs');
var dataDao = module.exports = {};

requirejs(['client/resource'], function (Resource) {
   ...
}); 
```

客户端/resource.js：

```
define(['underscore'], function (_) {
  ...
}); 
```

这通常可以正常工作，只要共享模块不涉及任何在服务器上不起作用的依赖项。

但是，我想介绍[use.js](https://github.com/tbranyen/use.js)以避免手动包装非 AMD 兼容库，例如下划线。为此，我必须在列出的依赖项前面加上`use!`（以触发 RequireJS 中的使用插件）。

客户端/resource.js：

```
define(['use!underscore'], function (_) {
  ...
}); 
```

这在浏览器中运行良好，但在 Node 中会导致错误：

```
Error: Calling node's require("use") failed with error: Error: Cannot find module 'use' 
```

我相信这不是特定于使用插件，而是文本等。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T20:17:44.333

使用[0.3 版，](https://github.com/tbranyen/use.js/commit/e57b948e6856058501ca5804c14b856c42b80e12)我能够让它在 node.js 中工作。根据对您问题的评论，这可能是一个配置问题——我花了几次尝试才能找到正确的路径。

# http - 在 Wireshark 中搜索设置的 cookie 不会显示浏览器中设置的所有 cookie

> ID：10240886
> 
> 赞同：1
> 
> 时间：2012-04-20T05:44:28.657
> 
> 标签：http, cookies, wireshark

我首先清除了浏览器中的所有 cookie。然后我去了 www.yahoo.com。与此同时，wireshark 正在捕获。在wireshark的搜索栏里，我输入了http.set_cookie。但过滤后的数据包不会显示浏览器中设置的所有 cookie。例如，在.yahoo.com 域中显示（在wireshark 中）的cookie 只是fpc。在浏览器中，在该域中设置了更多 6 个 cookie（如 fpps、fpc_s、fpt 等）
为什么会发生这种情况？Wireshark 不能捕获所有数据包吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T12:11:22.667

我浏览了 in.yahoo.com 并在第一次访问该站点时运行了 Wireshark。我能够使用以下过滤器查看 cookie -

http.set_cookie && ip.src eq 98.139.183.24

Wireshark 会看到任何设置的 cookie，所以我怀疑在你的情况下，网络服务器没有发送它们。它可能没有发送它们，因为页面的那个元素没有被请求，因为它仍然在浏览器缓存中。重复测试，确保浏览器缓存中没有任何内容。

！

# iphone - 在地址字段中单击时显示地图视图

> ID：10240889
> 
> 赞同：0
> 
> 时间：2012-04-20T05:44:44.413
> 
> 标签：iphone, ios, mkmapview, abpersonviewcontroller

我有一个子类的类`ABPersonViewController`。单击 PersonViewController 中的地址字段时，我需要在地图视图中显示相应的地址位置，就像它在本机地址簿中一样。我该如何实现这个功能。这不应该是`ABPersonViewController`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:16:54.343

```
UIApplication *app = [UIApplication sharedApplication];  
[app openURL:[NSURL URLWithString:@"http://maps.google.com/maps?q=Paris"]]; 
```

试试这个代码，代替巴黎，使用自己的位置名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T06:12:13.767

查看以下链接，您必须在其中发送地址簿中的地址

查看这两个链接，其中一个提供堆栈溢出答案[How to invoke iPhone Maps for Directions with Current Location as Start Address](https://stackoverflow.com/questions/576768/how-to-invoke-iphone-maps-for-directions-with-current-location-as-start-address) 这个是来自 tutplus [mobtutplus的教程](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-quick-tip-launching-maps-in-app/)

# mysql - sql以只读模式打开连接

> ID：10240890
> 
> 赞同：36
> 
> 时间：2012-04-20T05:44:49.537
> 
> 标签：mysql, database-connection, database-permissions

这个问题是出于好奇。我在谷歌上搜索了这个，但没有得到任何线索。

假设用户对 MySQL 数据库具有完全的读/写访问权限。我想知道，有没有办法（连接字符串中的一些参数）以只读模式通过相同的用户名和密码连接到数据库？

我希望在 **不**更改此用户权限的情况下这样做，因为同一用户可能在其他时间也需要写权限。这将有助于（如果可能）防止意外修改数据库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T05:59:03.353

你的问题的答案是

不，无法在连接字符串中指定只读访问权限。

替代品是

**1.**创建有读权限的sql用户

[MVC3 只读 MySql 连接字符串](https://stackoverflow.com/questions/10122745/mvc3-read-only-mysql-connection-string)

**2.**创建带有权限检查逻辑的视图或存储过程

MS SQL[仅授予视图权限](https://stackoverflow.com/questions/760793/grant-permission-to-only-a-view)

MySQL[授予用户仅查看 mysql 视图的权限](https://stackoverflow.com/questions/3108656/grant-a-user-permission-to-only-view-a-mysql-view)

**3.**在你的业务逻辑中实现权限层

祝你好运！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-20T05:51:24.523

这里最好的解决方案是在 mysql 服务器上创建另一个具有只读权限的帐户，并使用它进行连接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-24T03:50:45.757

根据您的用例和您拥有的控制，您可以在连接后立即让代码调用“设置事务只读”，或者在连接时使用 --init-command 参数。这适用于我们拥有的测试用例，

这是设置的事务文档：[https://dev.mysql.com/doc/refman/5.7/en/set-transaction.html](https://dev.mysql.com/doc/refman/5.7/en/set-transaction.html)，同样你也可以将它设置为会话变量，如果这会有所不同[https://dev .mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_transaction_read_only](https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_transaction_read_only)。

# mysql - 如何最好地从 Java/JDBC 中的 SQL 查询中检索 SELECT COUNT(*) 的结果 - Long？大整数？

> ID：10240901
> 
> 赞同：1
> 
> 时间：2012-04-20T05:45:21.840
> 
> 标签：mysql, select, jdbc, count, hsqldb

我使用的是 Hibernate，但做了一个简单的 SQLQuery，所以我认为这归结为一个基本的 JDBC 问题。我的生产应用程序在 MySQL 上运行，但我的测试用例使用内存中的 HSQLDB。我发现 SELECT COUNT 操作从 MySQL 返回 BigInteger，但从 HSQLDB 返回 Long。

MySQL 5.5.22 HSQLDB 2.2.5

我想出的代码是：

```
SQLQuery tq = session.createSQLQuery(
    "SELECT COUNT(*) AS count FROM calendar_month WHERE date = :date");
tq.setDate("date", eachDate);
Object countobj = tq.list().get(0);
int count = (countobj instanceof BigInteger) ?
    ((BigInteger)countobj).intValue() : ((Long)countobj).intValue(); 
```

返回类型的这个问题否定了其他 SO 问题的答案，例如[在 hibernate 中使用 createSQLQuery 获取 count(*)？](https://stackoverflow.com/questions/2559786/getting-count-using-createsqlquery-in-hibernate)建议用于`setResultTransformer`将返回值映射到 bean。bean 的类型必须是 BigInteger 或 Long，如果类型不正确则失败。

由于担心数据库互操作性，我不愿意在我的 SQL 的 'COUNT(*) AS count' 部分使用强制转换运算符。我意识到我已经在使用`createSQLQuery`，所以我已经超出了 Hibernates 尝试数据库中立性的范围，但是之前在数据库约束方面遇到了 MySQL 和 HSQLDB 之间的差异

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T18:56:35.673

您可以向下转换为 Number，然后调用 intValue() 方法。例如

```
SQLQuery tq = session.createSQLQuery("SELECT COUNT(*) AS count FROM calendar_month WHERE date = :date");
tq.setDate("date", eachDate);
Object countobj = tq.list().get(0);
int count = ((Number) countobj).intValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:26:15.850

我不知道这个问题的明确解决方案，但我建议您使用[H2 数据库](http://www.h2database.com/)进行测试。

H2 数据库有[一个功能](http://www.h2database.com/html/features.html#compatibility)，您可以使用兼容模式连接到多个不同的数据库。

例如，要使用 MySQL 模式，您可以使用此`jdbc:h2:~/test;MODE=MySQL`URL 连接到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:27:31.990

两个想法：

1.  您可以将结果值作为字符串获取，然后将其解析为 Long 或 BigInteger

2.  不要使用`COUNT(*) AS count FROM ...`，最好使用类似的东西，`COUNT(*) AS cnt ...`但在您的示例代码中，您不使用结果列的名称而是索引，因此您可以简单地使用`COUNT(*) FROM ...`

# php - 在 wordpress 自定义标题图像上禁用纵横比或图像裁剪

> ID：10240903
> 
> 赞同：1
> 
> 时间：2012-04-20T05:45:28.553
> 
> 标签：php, wordpress

谁能帮助我在 wordpress 2011 主题中禁用自定义标题图像裁剪的纵横比，或者完全禁用裁剪？

在这个阶段我只需要完成它，即使这意味着修改核心文件。我已经用谷歌搜索了解决方案，但到目前为止还没有找到。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T07:19:08.400

如果我理解你想要做什么，我想你可以看看主题的functions.php文件。

您将看到以下几行：

```
// The height and width of your custom header.
// Add a filter to twentyeleven_header_image_width and twentyeleven_header_image_height to change these values.
define( 'HEADER_IMAGE_WIDTH', apply_filters( 'twentyeleven_header_image_width', 1000 ) );
define( 'HEADER_IMAGE_HEIGHT', apply_filters( 'twentyeleven_header_image_height', 288 ) );

// We'll be using post thumbnails for custom header images on posts and pages.
// We want them to be the size of the header image that we just defined
// Larger images will be auto-cropped to fit, smaller ones will be ignored. See header.php.
set_post_thumbnail_size( HEADER_IMAGE_WIDTH, HEADER_IMAGE_HEIGHT, true );

// Add Twenty Eleven's custom image sizes
add_image_size( 'large-feature', HEADER_IMAGE_WIDTH, HEADER_IMAGE_HEIGHT, true ); // Used for large feature (header) images
add_image_size( 'small-feature', 500, 300 ); // Used for featured posts if a large-feature doesn't exist 
```

如果你想改变裁剪的行为，你只需将 *add_image_size()* 函数的第三个参数设置为**false**，正如你在[add_image_size() codex 页面中看到的那样](http://codex.wordpress.org/Function_Reference/add_image_size)

我希望这就是您想要的，如果不是，请告诉我；）

# javascript - 单击带有 UIButton 的 UIWebView 中的锚点

> ID：10240905
> 
> 赞同：0
> 
> 时间：2012-04-20T05:45:42.213
> 
> 标签：javascript, jquery, iphone, objective-c, xcode

我在 UIWebView 中显示的网页上有一个 Javascript 函数：

```
$(document).ready(function() {
   // index to reference the next/prev display
var i = 0;
   // get the total number of display sections
   //    where the ID starts with "display_"
var len = $('div[id^="hl"]').length;

   // for next, increment the index, or reset to 0, and concatenate 
   //    it to "display_" and set it as the hash
$('#next').click(function() {
    ++i;
    window.location.hash = "hl" + i;
    return false;
});

   // for prev, if the index is 0, set it to the total length, then decrement
   //    it, concatenate it to "display_" and set it as the hash
$('#prev').click(function() {
    if (i > 1)
    --i;
    window.location.hash = "hl" + i;
    return false;
});

}); 
```

所以我需要做的是在单击 UIButton 时模拟锚点单击：

```
- (IBAction)next:(id)sender {
    [animalDesciption stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"next\").click();"];
} 
```

但这不起作用！它在 HTML 页面上效果很好，只需单击 id 为“next”的锚点。

任何想法为什么单击按钮时这不起作用？

顺便说一句，我可以像`myFunc()`我当前的设置一样调用标准的 javascript 函数，但它不会做这样的事情！

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:07:28.017

您可以为下一个和上一个实现 javascript 函数，并直接从您的 UIButton 调用它。

```
var i = 0;

function next() {
   ++i;
    window.location.hash = "hl" + i;
    return false;
}

function prev() {
   if (i > 1)
    --i;
    window.location.hash = "hl" + i;
    return false;
}

$(document).ready(function() {
   // get the total number of display sections   
   // where the ID starts with "display_"
   var len = $('div[id^="hl"]').length;

   $('#next').click(function() {
       next();
   });

   $('#prev').click(function() {
      prev():
   });

}); 
```

来自 UIButton 的调用将是：

```
- (IBAction)next:(id)sender {
    [animalDesciption stringByEvaluatingJavaScriptFromString:@"next()"];
} 
```

顺便说一句：我想你忘了`len`在`next()`函数中使用以避免跨过最后一个显示部分。

# cuda - 使用带有浮点参数的 atomicAdd

> ID：10240907
> 
> 赞同：1
> 
> 时间：2012-04-20T05:45:43.587
> 
> 标签：cuda, atomic

我需要使用原子函数**atomicAdd(float * adress, float value)。** 我的显卡支持计算能力 2.1。我已经读到要在具有计算能力 2.1 的 gpu 中使用 atomicAdd 进行浮点运算，我们必须指定**sm_20 arch**。我正在使用 Visual Studio 2010。我已在 Project->Properties->Configuration Properties->CUDA C/C++->Device 中将“compute_10,sm_10”更改为“compute_20,sm_20”。但我有错误：“没有重载函数“atomicAdd”的实例与参数列表匹配”。我可以看到在编译过程中仍然使用了arch sm_11。我应该在哪里指定使用的架构。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:24:32.383

尝试右键单击 .cu 文件，打开首选项并查看那里的设备设置是否已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T10:04:57.427

在配置属性中，在 CUDA C/C++->Device 下，您已经将 Code Generation 设置为 compute_20,sm_20（尽管如果您的 GPU 具有 2.1 功能，您可能应该设置 sm_21）但您还应该确保取消选中“继承自父级或项目默认值”。

然后检查有问题的文件的属性是否覆盖了项目设置（基本上重复上面的步骤，但这次应该检查“从父级或项目默认值继承”并且应该没有其他条目）。

# sql - 有没有办法在 INFORMIX-SQL 中取消删除已删除的行？

> ID：10240908
> 
> 赞同：2
> 
> 时间：2012-04-20T05:45:45.567
> 
> 标签：sql, informix, delete-row

除了使用文本编辑器物理删除行末尾的 \0 之外？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T09:56:41.310

这取决于 Informix SQL 背后的数据服务器。

如果数据服务器是 SE（标准引擎），并且风向对您有利（特别是，如果先前分配给现在已删除行的空间尚未用于其他任何事情），那么您可以修改`.dat`文件将“死行”标记（`'\0'`在 C 中）更改为“活动行”标记（`'\n'`在 C 中）。然后，您需要使用`bcheck`or `secheck`（取决于 Informix SE 的版本）检查表上的索引。这依赖于一些关于 C-ISAM 数据文件的内部知识。

如果数据服务器是 IDS（Informix 动态服务器，现在又称为 Informix），那么答案基本上是“不”。当然，“未重复使用的空间”警告适用。但是，没有像 C-ISAM (SE) 中那样简单的行结束标记，也没有一种简单的方法可以准确地找到已删除数据的存储位置，并且存在将行拆分为多个页面的问题足够大的行大小（大于 4 KiB；在大多数系统上，大于 2 KiB）等。因此，基本上，答案是否定的。

# opencv - opencv kmeans 聚类的输入矩阵

> ID：10240912
> 
> 赞同：7
> 
> 时间：2012-04-20T05:45:51.300
> 
> 标签：opencv, cluster-analysis, k-means

这个问题特定于 opencv：opencv 文档中给出的 kmeans 示例有一个 2 通道矩阵 - 特征向量的每个维度都有一个通道。但是，其他一些示例似乎说它应该是一个单通道矩阵，其特征沿列具有每个样本的一行。其中哪一个是正确的？

如果我有一个 5 维特征向量，我应该使用什么输入矩阵： 这个：

```
cv::Mat inputSamples(numSamples, 1, CV32FC(numFeatures)) 
```

或者这个：

```
cv::Mat inputSamples(numSamples, numFeatures, CV_32F) 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-20T07:40:20.900

正确答案是`cv::Mat inputSamples(numSamples, numFeatures, CV_32F)`。关于 OpenCV 文档`kmeans` [说](http://docs.opencv.org/modules/core/doc/clustering.html)：

> samples – 输入样本的浮点矩阵，每个样本一行

因此，它不是另一个选项中的 n 维浮点数的浮点向量。哪些例子表明了这种行为？

这也是我的一个小例子，展示了如何使用kmeans。它聚集图像的像素并显示结果：

```
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

int main( int argc, char** argv )
{
  Mat src = imread( argv[1], 1 );
  Mat samples(src.rows * src.cols, 3, CV_32F);
  for( int y = 0; y < src.rows; y++ )
    for( int x = 0; x < src.cols; x++ )
      for( int z = 0; z < 3; z++)
        samples.at<float>(y + x*src.rows, z) = src.at<Vec3b>(y,x)[z];

  int clusterCount = 15;
  Mat labels;
  int attempts = 5;
  Mat centers;
  kmeans(samples, clusterCount, labels, TermCriteria(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS, 10000, 0.0001), attempts, KMEANS_PP_CENTERS, centers );

  Mat new_image( src.size(), src.type() );
  for( int y = 0; y < src.rows; y++ )
    for( int x = 0; x < src.cols; x++ )
    { 
      int cluster_idx = labels.at<int>(y + x*src.rows,0);
      new_image.at<Vec3b>(y,x)[0] = centers.at<float>(cluster_idx, 0);
      new_image.at<Vec3b>(y,x)[1] = centers.at<float>(cluster_idx, 1);
      new_image.at<Vec3b>(y,x)[2] = centers.at<float>(cluster_idx, 2);
    }
  imshow( "clustered image", new_image );
  waitKey( 0 );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-22T11:14:07.340

作为手动重塑输入矩阵的替代方法，您可以使用 OpenCV[重塑](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=copy#mat-reshape)功能以更少的代码实现类似的结果。这是我使用 K-Means 方法（在 Java 中）减少颜色计数的工作实现：

```
private final static int MAX_ITER = 10;
private final static int CLUSTERS = 16;

public static Mat colorMapKMeans(Mat img, int K, int maxIterations) {

    Mat m = img.reshape(1, img.rows() * img.cols());
    m.convertTo(m, CvType.CV_32F);

    Mat bestLabels = new Mat(m.rows(), 1, CvType.CV_8U);
    Mat centroids = new Mat(K, 1, CvType.CV_32F);
    Core.kmeans(m, K, bestLabels, 
                new TermCriteria(TermCriteria.COUNT | TermCriteria.EPS, maxIterations, 1E-5),
                1, Core.KMEANS_RANDOM_CENTERS, centroids);
    List<Integer> idx = new ArrayList<>(m.rows());
    Converters.Mat_to_vector_int(bestLabels, idx);

    Mat imgMapped = new Mat(m.size(), m.type());
    for(int i = 0; i < idx.size(); i++) {
        Mat row = imgMapped.row(i);
        centroids.row(idx.get(i)).copyTo(row);
    }

    return imgMapped.reshape(3, img.rows());
}

public static void main(String[] args) {
    System.loadLibrary(Core.NATIVE_LIBRARY_NAME);
    Highgui.imwrite("result.png", 
        colorMapKMeans(Highgui.imread(args[0], Highgui.CV_LOAD_IMAGE_COLOR),
            CLUSTERS, MAX_ITER));
} 
```

OpenCV 将图像读入 2 维 3 通道矩阵。第一次调用`reshape`- `img.reshape(1, img.rows() * img.cols());`- 基本上将 3 个通道展开为列。在结果矩阵中，一行对应于输入图像的一个像素，三列对应于 RGB 分量。

在 K-Means 算法完成工作并应用颜色映射后，我们`reshape`再次调用 - `imgMapped.reshape(3, img.rows())`，但现在将列回滚到通道中，并将行数减少到原始图像行数，从而恢复原始矩阵格式，但只有减少颜色。

# batch-file - 批量参数替换中路径运算符的以下用法无效

> ID：10240913
> 
> 赞同：4
> 
> 时间：2012-04-20T05:45:51.440
> 
> 标签：batch-file

在一个.bat

```
if ... set a.b=1
...
set c=%%~!a.b! 
```

echo %c% 打印`%~1`，但我需要 %~1 的内容。但`set c=%~!a.b!`导致“批处理参数替换中路径运算符的以下用法无效：%~!ab!。” 怎么修？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:47:06.203

您不能直接使用评估表达式访问参数，
因为百分比扩展是解析器的第一[阶段之一](https://stackoverflow.com/questions/6379619/explain-how-dos-batch-newline-variable-hack-works/6379861#6379861)。

但是*CALL-trick*可以在这里为您提供帮助。
就像是

```
set paramNo=1
call echo %%~%paramNo% 
```

will 首先扩展为 `call echo %%~1`
并且`CALL`将重新启动解析器，因此您将获得所需的结果。

# c# - 仅当有后退时才显示“后退”按钮（MVC）

> ID：10240914
> 
> 赞同：17
> 
> 时间：2012-04-20T05:45:52.620
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, asp.net-mvc-2

现在我正在使用`<a class="bottomNav" onclick="history.go(-1); return false;" href="#">Back</a><br />`
但是它总是会显示，即使“后退”按钮不会指向任何地方。
如何在显示按钮之前检查是否有“返回”？

我想检查动作和控制器，例如：`if(ViewContext.Controller.ValueProvider.GetValue("controller").RawValue != "Home")`
但它不准确，因为我有时仍然需要“后退”

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-20T05:49:05.003

```
@if(Request.UrlReferrer != null)
{
    <a class="bottomNav" onclick="history.go(-1); return false;" href="#">Back</a><br />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:56:43.167

你可以检查一下`document.referrer`。如果设置了此属性，那么您可以显示链接

# objective-c - Mac应用程序在睡眠后消耗大量CPU

> ID：10240915
> 
> 赞同：0
> 
> 时间：2012-04-20T05:45:56.777
> 
> 标签：objective-c, macos, nstimer

我的应用在启动时运行良好。通常，它在运行时只使用 0.2% 的 CPU。

但是日复一日地使用这个应用程序，它现在需要 15% 的 CPU，这对我来说真的是巨大的。

在我睡了我的 Macbook 很多次之后，我认为事情出了问题。我没有关闭我的 Macbook。

我不知道在哪里调查这个错误？

PS：我的应用使用了很多 NSTimer，添加到 NSRunLoopCommonModes

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:55:35.473

唯一真正的答案是：分析并查看时间在哪里使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:08:13.817

在睡眠模式下，操作系统和其他程序通常不会做太多或任何事情。如果您的应用程序继续循环并忽略睡眠模式，您的 CPU 使用百分比将会上升，因为其他程序使用较少。

理想情况下，您的应用应检查睡眠模式，然后调整其行为，例如暂停循环。

# java - 正确使用接口和抽象类

> ID：10240917
> 
> 赞同：-2
> 
> 时间：2012-04-20T05:46:01.247
> 
> 标签：java, oop, interface, abstract

我在stackoverflow中搜索了关于抽象类和接口的不同问题。我知道他们做什么，但我想知道什么时候使用它们，什么时候使用接口而不是抽象类，反之亦然，抽象类应该包含什么？谁能给我一个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T05:55:03.193

看看这个页面：[http](http://www.javaworld.com/javaworld/javaqa/2001-04/03-qa-0420-abstract.html) ://www.javaworld.com/javaworld/javaqa/2001-04/03-qa-0420-abstract.html 。它解释了一些差异，以及何时应该使用它们。

编辑：或者这个：[http](http://www.javabeginner.com/learn-java/java-abstract-class-and-interface) ://www.javabeginner.com/learn-java/java-abstract-class-and-interface 。这个更好，我想。

# c#-4.0 - SqlConnection 与并行编程

> ID：10240921
> 
> 赞同：6
> 
> 时间：2012-04-20T05:46:18.047
> 
> 标签：c#-4.0, task-parallel-library

这是我现有的代码，它将一些数据保存到多个表中

```
using (SqlConnection conn = new SqlConnection("myConnString"))
{
   DoWork1(conn);
   DoWork2(conc);
   DoWork3(conn);
} 
```

为了加快我的代码速度，所以我尝试获得 .net TPL 支持，我重新挂起我的代码，如下所示

```
using (SqlConnection conn = new SqlConnection("myConnString"))
{
   ParallelOptions pw = new ParallelOptions();
   pw.MaxDegreeOfParallelism = Environment.ProcessorCount;

   Parallel.Invoke(pw,()=> DoWork1(conn),()=> DoWork2(conc),()=> DoWork3(conn));
} 
```

但这会在我的数据访问层中的 ExecuteNonQuery() 方法中引发内部连接致命错误异常。我的并行方法是否错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T06:04:38.013

嗯，有一些方法可以*使用*MARS 来工作[——](http://msdn.microsoft.com/en-us/library/yf1a7f4f%28v=vs.80%29.aspx)但我会建议一种不同的方法。（我不知道 MARS 是否支持跨多个线程使用相同的连接，即使它允许多个并发操作。）

与其尝试在所有并行任务中重用一个连接，不如让每个任务为自己打开（和关闭）一个连接，并让连接池处理效率方面的问题。无论您是否使用并行，这都是 .NET 中的一般最佳实践：打开连接，做一些工作，关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T16:40:16.243

我没有评论的声誉，但似乎我可以回答。这有点奇怪无论如何我的评论是临时表是每个连接的，所以打开一个新连接意味着你看不到其他任务创建的临时表。

全局临时表可能是答案，但您要么必须 a) 使用单个全局临时表并使用某个键对数据进行分区 b) 使用唯一命名的表，这意味着动态 sql

真的有点乱

# iphone - 从地图视图中删除图钉时崩溃

> ID：10240928
> 
> 赞同：0
> 
> 时间：2012-04-20T05:47:08.593
> 
> 标签：iphone, objective-c, ios5

我正在研究 MapView，我有两个按钮。1)centreButton：此按钮将引脚注释放置在当前地图的中心。按下此按钮时，我将最后一个注释存储在 NSMutable 数组中。然后从地图视图中删除最后一个注释并在地图中心放置一个大头针我为此部分所做的代码如下：放置大头针的功能

```
- (void)PinDropwithlatitude:(double)lat longitude:(double)longi droptitle:(NSString *)title
{
    CLLocationCoordinate2D theCoordinate;
    theCoordinate.latitude = lat;
    theCoordinate.longitude = longi;

    MKCoordinateRegion region;
    region.center.latitude  = theCoordinate.latitude;
    region.center.longitude = theCoordinate.longitude;

    //Set Zoom level using Span
    MKCoordinateSpan span;
    span.latitudeDelta  =0.005;
    span.longitudeDelta =0.005;
    region.span = span;
    [MapView setRegion:region animated:YES];

    SetLat =lat;
    SetLong =longi;
    DDAnnotation *annotation = [[[DDAnnotation alloc] initWithCoordinate:theCoordinate addressDictionary:nil] autorelease];
    annotation.title = title;
    annotation.subtitle = [NSString    stringWithFormat:@"%f %f", annotation.coordinate.latitude, annotation.coordinate.longitude];
    [MapView addAnnotation:annotation];    
} 
```

当我按下中心按钮时，我正在执行以下代码并将最后一个数组存储在注释中。

```
-(IBAction)CenterPressed:(id)sender
 {
        //40.439631,-3.698273 -spain centre        
        [lastAnnotation addObjectsFromArray:MapView.annotations];
        NSLog(@"last annotation array=%@",lastAnnotation);
        for (id annotation in [MapView annotations]) 
        {
            if ([annotation isKindOfClass:[MKUserLocation class]]) 
            {
                 continue;
            }
            [MapView removeAnnotation:annotation];
        }    
        [self PinDropwithlatitude:SetLat longitude:SetLong  
        droptitle:NSLocalizedString(@"Title", nil)];
 } 
```

数组的日志向我显示了您可以在下面看到的最后注释：

```
 last annotation array=(
      "<+40.43963100,-3.69827300> +/- 0.00m",
        "<+40.43923187,-3.68722200> +/- 0.00m",
      "<+40.43792343,-3.67670774> +/- 0.00m",
      "<+40.43772888,-3.66711617> +/- 0.00m"
      ) 
```

2）UNDOButton：删除当前放置的注释并重新删除以前的注释，因为我已经从mapview中删除了注释，并从我之前维护的数组中重新删除了注释最后一个注释，使用代码：

```
 -(IBAction)undoPressed:(id)sender
   {
         if ([lastAnnotation count]>0)
         {
              int countAnn = [lastAnnotation count];
              [MapView removeAnnotation:[lastAnnotation objectAtIndex:countAnn-1]];  
              //[MapView delete:[lastAnnotation objectAtIndex:countAnn-1]];
              [lastAnnotation removeObjectAtIndex:countAnn-1];        
              double latitude = [[[lastAnnotation objectAtIndex:[lastAnnotation count]-1] annotation]coordinate].latitude;
              double longitude = [[[lastAnnotation objectAtIndex:[lastAnnotation count]-1]annotation]coordinate].longitude;        
              NSLog(@"count = %d",[lastAnnotation count]);           
              [self PinDropwithlatitude:latitude longitude:longitude droptitle:NSLocalizedString(@"Title", nil)];
         }
   } 
```

但是当我按下撤消按钮时，它会因以下错误而崩溃

**-[DDAnnotation 注释]：无法识别的选择器发送到实例 0x79b8f40**

我不知道问题到底出在哪里。谁能帮我指出我在上面代码中的错误。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T05:51:59.963

你能试一下吗

```
[lastAnnotation  lastObject] 
```

代替

```
[[lastAnnotation objectAtIndex:[lastAnnotation count]-1] 
```

喜欢

```
[MapView removeAnnotation:[lastAnnotation  lastObject]];  
[lastAnnotation removeObject:[lastAnnotation  lastObject]]; 
```

# wcf - 取消 WCF REST 下载

> ID：10240938
> 
> 赞同：0
> 
> 时间：2012-04-20T05:48:24.870
> 
> 标签：wcf, rest

我有一个 REST 服务，它通过 Stream 作为返回类型返回大文件。但是，即使客户端取消了下载，我也需要一种方法来知道传输了多少文件。完成这样的事情的最佳方法是什么？

到目前为止，我想出了以下内容：

```
 public Message GetFile(string path)
    {
        UsageLog log = new UsageLog();

        return WebOperationContext.Current.CreateStreamResponse((stream) =>
        {
            using (FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read))
            {
                byte[] buffer = new byte[_BufferSize];
                int bytesRead = 0;
                long totalBytesRead = 0;

                while (true)
                {
                    bytesRead = fs.Read(buffer, 0, _BufferSize);

                    if (bytesRead == 0)
                    {
                        break;
                    }

                    try
                    {
                        stream.Write(buffer, 0, bytesRead);
                    }
                    catch (CommunicationException ex)
                    {
                        break;
                    }

                    totalBytesRead += bytesRead;
                }

                log.TransferCompletedUtc = DateTime.UtcNow;
                log.BytesTransferred = totalBytesRead;
            }
        },
        "application/octet-stream");
    } 
```

我有兴趣听到任何其他解决方案来完成这样的事情。

# typo3 - 如何在 TYPO3 中仅包装使用 RTE 的内容字段？

> ID：10240942
> 
> 赞同：1
> 
> 时间：2012-04-20T05:48:53.240
> 
> 标签：typo3, typoscript, rte

我想在后端包装使用 RTE 的所有字段（或仅正文），有什么想法可以通过 TypoScript 实现吗？我试过了：

```
tt_content.text.default {
 20 = TEXT
 20.field = bodytext
 20.wrap = <div class="rte">|</div>
} 
```

但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:15:44.200

您将需要一个用户功能。因为在前端渲染中不知道是否使用 RTE。或者您需要直接对所有字段执行此操作，而不是默认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T08:19:20.823

以下脚本将帮助您包装 RTE

```
tt_content.text.20.wrap = <div class="wrapRTE">|</div> 
```

有关更多信息，您可以访问[https://jainishsenjaliya.wordpress.com/2015/09/02/how-to-wrap-the-content-in-rte-typo3/](https://jainishsenjaliya.wordpress.com/2015/09/02/how-to-wrap-the-content-in-rte-typo3/)

# ruby-on-rails - Ruby on Rails 中的 SQL 错误：“（完整）年份必须介于 -4713 和 +9999 之间，并且不能为 0”

> ID：10240943
> 
> 赞同：0
> 
> 时间：2012-04-20T05:48:53.060
> 
> 标签：ruby-on-rails

我在 Ruby 中使用以下查询：

```
mcuglist = Balsiebeltogenevaprodmapping.find_by_sql ["select * from master_cug_list where customer_ref = ? and product_seq = ? and end_date = ? and line_seq is null order by directory_number",bseq_11.customer_ref,bseq_11.product_seq,(accdtlmap.start_dat.to_date + 9).strftime('%Y-%m-%d')] 
```

它给了我标题中给出的错误：`(full) year must be between -4713 and +9999, and not be 0`。

关于如何传递`date`给的任何想法`find_by_sql query`？

# c# - 如何知道后台线程的结束？

> ID：10240950
> 
> 赞同：0
> 
> 时间：2012-04-20T05:49:46.693
> 
> 标签：c#, multithreading, windows-phone-7.1

我在下载页面中使用了后台线程。我将离开下载页面并前往项目 deatis 页面。当下载线程完成时，我需要将当前正在下载的项目的状态更改为“已下载”。我怎么知道线程已经结束了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:54:45.347

您将必须订阅指示您的任务完成的事件，就像您有 RunWorkerCompleted 一样。[您可以在此处](http://www.dotnetperls.com/backgroundworker)或[此处](http://www.dreamincode.net/forums/topic/112547-using-the-backgroundworker-in-c#/)找到一个示例以供您理解

# sql - 从 SQL 数据建立关联矩阵

> ID：10240954
> 
> 赞同：1
> 
> 时间：2012-04-20T05:50:41.297
> 
> 标签：sql, associations, tracking

我在 SQL Server 中有一个表来记录我网站所有成员登录的 IP。

```
 ID   MEMBER      IP       
    ---------------------------------------
    1    member1     1.1.1.1
    2    member2     2.2.2.2
    3    member3     1.1.1.1
    4    member3     3.3.3.3
    5    member4     3.3.3.3 
```

我想找出一种搜索关联成员及其关联 IP 的方法。

第一个例子，

*   member1 之前从 1.1.1.1 登录
*   member3 之前从 1.1.1.1 和 3.3.3.3 登录
*   member4 之前从 3.3.3.3 登录

因此，对于成员 1：

*   关联成员：member1、member3、member4
*   关联 IP：1.1.1.1、3.3.3.3

对于 member2，关联成员为 member2，关联 IP 为 2.2.2.2。

这个协会系统是为了帮助管理假玩家，成员数量很大（~100k）。所以加载时间是个大问题。

我的问题：

*   是否有 SQL 查询来生成关联成员和关联 IP 的列表？

=======要测试的表======

```
CREATE TABLE [dbo].[tblAssociation](
    [ID] [int] NULL,
    [Member] [nvarchar](50) NULL,
    [IP] [nvarchar](50) NULL
) ON [PRIMARY]

GO

INSERT INTO [tblAssociation] VALUES(1,'member1','1.1.1.1')
INSERT INTO [tblAssociation] VALUES(2,'member2','2.2.2.2')
INSERT INTO [tblAssociation] VALUES(3,'member3','1.1.1.1')
INSERT INTO [tblAssociation] VALUES(4,'member3','3.3.3.3')
INSERT INTO [tblAssociation] VALUES(5,'member4','3.3.3.3') 
```

======香卡的建议====

```
SELECT T1.Member, T1.IP, T2.Member 
FROM   tblAssociation T1 
INNER JOIN tblAssociation T2 ON T1.IP = T2.IP
AND T1.Member = 'member1' 
```

如果你尝试，我只能得到关联成员 = member1，member3。

member4 不存在，但他应该是关联的，因为 member4 和 member3 之前连接到 3.3.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:32:59.133

通过缩小问题范围，您有更好的机会获得更具体的答案。

如果您的问题只是查询关联，那么您可以简单地这样做：

如果您的表名是`MyTable`并且您要查看其关联的成员是`@MemberID`，那么就可以了

```
SELECT T1.MEMBER, T1.IP, T2.MEMBER 
FROM   MyTable T1 
       INNER JOIN MyTable T2 ON T1.IP = T2.IP
                                AND T1.ID = @MemberID 
```

上面的这个查询只给出了第一级关联，一路走下去，你可以使用 CTE 使用递归

[http://msdn.microsoft.com/en-us/library/ms186243.aspx](http://msdn.microsoft.com/en-us/library/ms186243.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T08:00:12.577

在与 shankar_pratap 相同的语句的基础上，以下`CTE`将为您提供给定成员的所有相关成员。这里真正的困难在于知道何时*停止*递归。要停止递归，需要`q.ID <> a.ID`和`q.OriginalID <> r.ID`。

**SQL 语句**

```
;WITH q AS (
  SELECT  OriginalID = r.ID
          , r.ID
          , r.Member
          , r.IP
  FROM    tblAssociation a
          INNER JOIN tblAssociation r ON r.IP = a.IP
  WHERE   a.Member = 'member1'
  UNION ALL
  SELECT  q.OriginalID
          , r.ID
          , r.Member
          , r.IP
  FROM    tblAssociation a
          INNER JOIN tblAssociation r ON r.IP = a.IP
          INNER JOIN q ON q.Member = a.Member AND q.ID <> a.ID
  WHERE   q.OriginalID <> r.ID
)
SELECT  DISTINCT ID
        , Member
        , IP
FROM    q 
```

**结果**

```
ID  Member  IP
1   member1 1.1.1.1
3   member3 1.1.1.1
4   member3 3.3.3.3
5   member4 3.3.3.3 
```

# c# - 如何使用C#中的cmd将文件从任何目录复制到C盘

> ID：10240957
> 
> 赞同：0
> 
> 时间：2012-04-20T05:51:12.807
> 
> 标签：c#, file-io

我尝试将图像文件复制到 c:(operating sys) 驱动器中，但它显示错误 wid access denied，我已用作

```
string strCmdLine;
    strCmdLine = @" /c xcopy d:\123.png C:\windows\system32";
    Process.Start("CMD.exe", strCmdLine); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T05:56:52.480

你可能没有足够的权限....

尝试添加凭据：

```
 Process p = new Process();
    process.StartInfo.UserName = "aaaa";  
    process.StartInfo.Password = "xxxxx";
...
... 
```

另外，验证：

读取权限：`d:\123.png`

写权限：`C:\windows\system32`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:01:00.293

拒绝访问可能由多种原因引起，例如用户权限或文件正在使用中。由于命令行似乎没问题，我建议检查您的应用程序是否由有权写入 C:\windows\system32 的 Windows 用户运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T06:12:41.890

您需要以管理员身份运行 CMD.exe 尝试以下操作

```
 Process p = new Process();
        p.StartInfo.FileName = "cmd.exe";
        p.StartInfo.Verb = "runas";
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardInput = true;
        p.Start();

        p.StandardInput.WriteLine(@"/c xcopy d:\123.png C:\windows\system32"); 
```

您可以查看[这篇](https://stackoverflow.com/questions/2532769/how-to-start-a-process-as-administrator-mode-in-c-sharp)文章，它显示了如何以管理员身份运行程序。

# c# - 将网格视图导出到 .xls

> ID：10240963
> 
> 赞同：0
> 
> 时间：2012-04-20T05:51:33.230
> 
> 标签：c#, asp.net, excel

我正在开发一个具有 gridview 控件的网页。我需要将数据传输为 .xls 格式。我能够创建 .xls 文件并传输数据，但问题是我需要将网格单元格显示在 Excel 工作表的背景中。现在，它只显示没有网格单元的空白背景。否则，gridview 会被很好地转移。由于这个问题，打印 .xls 文件是个问题。具有更多列的表格不会压缩，而是打印 2-3 页。我的代码如下：

```
public static void ExportToXLS(string fileName, GridView gv,string companyName,string reportTitle , string period)
    {
        //For writing to XLS file
        HttpContext.Current.Response.Clear();
        HttpContext.Current.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", fileName));
        HttpContext.Current.Response.ContentType = "application/ms-excel";

        using (StringWriter sw = new StringWriter())
        {
            using (HtmlTextWriter htw = new HtmlTextWriter(sw))
            {

                Table tableReport = new Table();
                tableReport.GridLines = gv.GridLines;

                //  add the header row to the table
                if (gv.HeaderRow != null)
                {
                    ReportList.PrepareControlForExport(gv.HeaderRow);
                    tableReport.Rows.Add(gv.HeaderRow);
                }

                //  add each of the data rows to the table
                foreach (GridViewRow row in gv.Rows)
                {
                    ReportList.PrepareControlForExport(row);
                    tableReport.Rows.Add(row);
                }

                //  add the footer row to the table
                if (gv.FooterRow != null)
                {
                    ReportList.PrepareControlForExport(gv.FooterRow);
                    tableReport.Rows.Add(gv.FooterRow);
                }

                //Takes value of company name
                System.Web.UI.WebControls.Label labelCompany = new System.Web.UI.WebControls.Label();
                labelCompany.Text = companyName;
                labelCompany.Font.Bold = true;

                //Takes value of report title
                System.Web.UI.WebControls.Label labelReport = new System.Web.UI.WebControls.Label();
                labelReport.Text = reportTitle;
                labelReport.Font.Bold = true;

                //Takes value of report period
                System.Web.UI.WebControls.Label labelPeriod = new System.Web.UI.WebControls.Label();
                labelPeriod.Text = period;

                //  render the htmlwriter into the response
                htw.Write("<center>");
                labelCompany.RenderControl(htw);
                htw.Write("<br/>");
                labelReport.RenderControl(htw);
                htw.Write("<br/>");
                labelPeriod.RenderControl(htw);
                htw.Write("</center>");
                htw.Write("<br/>");
                tableReport.RenderControl(htw);
                HttpContext.Current.Response.Write(sw.ToString());
                HttpContext.Current.Response.End();
            }
        }
    } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T07:26:55.857

参考：[导出网格](http://www.dotnetfunda.com/forums/thread5429-export-grid-view-to-excel.aspx)

尝试这个：

```
protected void btnExportExcel_Click(object sender, EventArgs e)

    {     

        Response.Clear();
        Response.Buffer = true;

        Response.AddHeader("content-disposition",

         "attachment;filename=GridViewExport.xls");

        Response.Charset = "";

        Response.ContentType = "application/vnd.ms-excel";

        StringWriter sw = new StringWriter();

        HtmlTextWriter hw = new HtmlTextWriter(sw);

        grdExport.AllowPaging = false;

        oMailing.GetData(out ODs);

        grdExport.DataSource = ODs;

        grdExport.DataBind();

        //Change the Header Row back to white color

        grdExport.HeaderRow.Style.Add("background-color", "#FFFFFF");

        //Apply style to Individual Cells

        grdExport.HeaderRow.Cells[0].Style.Add("background-color", "green");

        grdExport.HeaderRow.Cells[1].Style.Add("background-color", "green");

        grdExport.HeaderRow.Cells[2].Style.Add("background-color", "green");

        grdExport.HeaderRow.Cells[3].Style.Add("background-color", "green");

        grdExport.HeaderRow.Cells[4].Style.Add("background-color", "green");

        grdExport.RenderControl(hw);

        //style to format numbers to string

        string style = @"<style> .textmode { mso-number-format:\@; } </style>";

        Response.Write(style);

        Response.Output.Write(sw.ToString());

        Response.Flush();

        Response.End();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T07:38:16.330

首先参考这个：[How to export nested gridview to excel/word with gridlines on child grid](https://stackoverflow.com/questions/10187692/how-to-export-nested-gridview-to-excel-word-with-gridlines-on-the-child-grid)，希望它能帮助你解决你的问题。

参考：[如何在控制台类型的应用程序中将 gridview 导出为 excel？](http://forums.asp.net/p/1774093/4852115.aspx/1?How%20to%20export%20gridview%20to%20excel%20in%20a%20console%20type%20application%20)

您可以参考以下链接中的 Export To Excel 控件。这是一个自定义控件。希望它可以帮助你。

[http://exporttoexcel.codeplex.com/](http://exporttoexcel.codeplex.com/)

[样式导出的网格](http://www.dotnetfunda.com/forums/thread5429-export-grid-view-to-excel.aspx)：

```
 protected void btnExportExcel_Click(object sender, EventArgs e)
        {
            Response.Clear();
            Response.Buffer = true;

            Response.AddHeader("content-disposition",
             "attachment;filename=GridViewExport.xls");

            Response.Charset = "";
            Response.ContentType = "application/vnd.ms-excel";
            StringWriter sw = new StringWriter();
            HtmlTextWriter hw = new HtmlTextWriter(sw);

            grdExport.AllowPaging = false;
            oMailing.GetData(out ODs);
            grdExport.DataSource = ODs;
            grdExport.DataBind();

            //Change the Header Row back to white color
            grdExport.HeaderRow.Style.Add("background-color", "#FFFFFF");

            //Apply style to Individual Cells
            grdExport.HeaderRow.Cells[0].Style.Add("background-color", "green");

            grdExport.HeaderRow.Cells[1].Style.Add("background-color", "green");

            grdExport.HeaderRow.Cells[2].Style.Add("background-color", "green");

            grdExport.HeaderRow.Cells[3].Style.Add("background-color", "green");

            grdExport.HeaderRow.Cells[4].Style.Add("background-color", "green");

            for (int i = 0; i < grdExport.Rows.Count; i++)
            {
                GridViewRow row = grdExport.Rows;

                //Change Color back to white
                row.BackColor = System.Drawing.Color.White;

                //Apply text style to each Row
                row.Attributes.Add("class", "textmode");

                //Apply style to Individual Cells of Alternating Row
                if (i % 2 != 0)
                {
                    row.Cells[0].Style.Add("background-color", "#C2D69B");
                    row.Cells[1].Style.Add("background-color", "#C2D69B");
                    row.Cells[2].Style.Add("background-color", "#C2D69B");
                    row.Cells[3].Style.Add("background-color", "#C2D69B");
                    row.Cells[4].Style.Add("background-color", "#C2D69B");
                }

            }
            grdExport.RenderControl(hw);
            //style to format numbers to string
            string style = @"<style> .textmode { mso-number-format:\@; } </style>";
            Response.Write(style);
            Response.Output.Write(sw.ToString());
            Response.Flush();
            Response.End();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:23:01.730

我尝试导出到excel，似乎你首先需要创建一个使用部分`Excel = using Microsoft.Office.Interop.Excel`，当你点击按钮时，只需创建一个具有工作簿和工作表属性的excel类，然后使用gridview属性`Gridview.Row[].cell[].Text.`，你可以动态存储每个值将 gridview 写入工作表，然后将其写入`FILE`....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T06:48:42.060

```
 Response.Clear();
  Response.Buffer = true;
  Response.AddHeader("content-disposition",attachment;filename=GridViewExport.xls");
  Response.Charset = "";
  Response.ContentType = "application/vnd.ms-excel";

  StringWriter sw = new StringWriter();
  HtmlTextWriter hw = new HtmlTextWriter(sw); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T07:26:55.837

所有的答案都会让你得到你想要的——你只是错过了格式化部分。

归根结底，您真正创建的是 Excel 可以读取的 HTML 文件（带有 HTML 表格）。@BhaskarreddyMule 中的 RESPONSE 标头“强制”客户端将文件视为“xls”文件，并且如果它运行 Excel 并打开它（但底线是它**不是真正的“本机”Excel 文件**。

现在已经不碍事了，用 HTML 来思考。像在 HTML 中一样设置列、行和文本内容的样式。这就是您控制格式的方式（即老派“nowrap”以防止包装单元格内容、字体大小等）。

我有一段时间没有这样做了（当我需要这样做时，我已经转向 Excel XML 和 VB.Net XML 文字）所以我不确定你有多少控制级别`RenderControl`......或者如果您必须更进一步“老派”并从头开始构建 HTML 表格字符串.....

# java - netbeans 和控制台的不同行为

> ID：10240964
> 
> 赞同：1
> 
> 时间：2012-04-20T05:51:40.187
> 
> 标签：java, console, netbeans-7

我用java写了一段代码。我在其中创建了一个名为`xml-creator`.
包`xml_creator`有 3 个类说`XML_Control`,`XML_Creator`和`XML_implement`.

**当我在 netbeans ( NetBeans 7.0** )上运行我的项目时，它运行良好。但是如果我尝试在控制台上编译代码，我会收到各种错误，例如

当我编译`XML_Creator.java`时，我得到以下错误。

```
XML_Creator.java:371: cannot find symbol
symbol  : variable XML_implement
location: class xml_creator.XML_Creator
                    typeAttr.setValue(XML_implement.table_col[i][2]);
                                      ^
XML_Creator.java:375: cannot find symbol
symbol  : variable XML_implement
location: class xml_creator.XML_Creator
                for(int j=0;j<XML_implement.kTab;j++)
                              ^ 
```

`XML_Creator`并且`XML_implemenr`两者都在同一个包中，但它们都没有相互扩展。

很抱歉，我无法在此站点上显示代码，因为它太大并且**违反了公司的政策**。

我不明白为什么它向我显示错误？

示例代码
**XML_Control.java**

```
package xml_creator;
public class XML_Control 
{
    public static void main(String as[])
    {
        XML_Creator xml = new XML_Creator();    
    }
} 
```

**XML_Creator.java**

```
package xml-creator;

public class XML_Creator
{
    XML_implement ixml = new XML_implement();
    public XML_Creator() 
    {
        System.out.println(""+ixml.a);
    }
} 
```

**XML_implement.java**

```
package xml_creator;
public class XML_implement 
{
    public int a;
    public XML_implement()
    {
        a = 10;
    }
} 
```

所以当我编译时`XML_Creator.java`，控制台会出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T06:01:38.657

听起来您正在*包含 .java 文件的目录中进行*编译，并且只告诉编译器其中一个源文件。这就是问题所在——为了尝试查找源文件或类文件，编译器使用包名，并期望包以传统方式布局。从源代码树的根目录编译——我当然*希望*你正在使用它——像这样：

```
javac xml_creator/*.java 
```

您可能还想指定一个输出目录 - 这又将是包目录层次结构的根：

```
javac -d bin xml_creator/*.java 
```

如果您*定期*从命令行构建（而不仅仅是一次性代码），您应该考虑使用诸如[Ant](http://ant.apache.org/)的构建系统。

# c - 如何在LINUX / C中以“dd mm yyyy hh mm sec”格式打印时间

> ID：10240966
> 
> 赞同：-3
> 
> 时间：2012-04-20T05:51:55.977
> 
> 标签：c, linux, datetime

我正在使用 libxml2 生成一个 XML 文件。在其中一个标签中，我想将当前时间`"dd mm yyyy hh mm sec"`格式化。我的开发环境是 C/LINUX。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T05:55:10.133

使用`strftime`. 查看手册页以获取详细信息。

# shell - Shell 脚本不得生成“额外”错误消息，而是针对一个奇怪的测试用例

> ID：10240970
> 
> 赞同：0
> 
> 时间：2012-04-20T05:52:14.913
> 
> 标签：shell, unix, sed

我必须编写一个基本脚本，以以下形式接受输入：

./chext 'param1' 'param2.xx'

和输出：

参数2.param1

具体来说，我必须检查文件是否存在，如果存在，则使用新扩展名重命名它，如果不存在，则生成消息：

param2.xx：没有这样的文件

具体来说，有人告诉我：“不应发出其他消息，包括来自脚本调用的命令的错误消息。”

这适用于以下示例：

./chext 'com' '土豚.dat'

和

./chext 'ret' '太常见了.exp'

但对于：

./chext 'dat' 'ocelot.dat'

我收到错误（由我的教授创建）“生成了意外消息”

谁能告诉我这个例子有什么不同以至于我的脚本没有处理？

```
#!/bin/csh                                                                      
set ext="$1"
set oldName="$2"
if (-r "$oldName") then
set newName=`echo "$oldName" | sed 's/\.[A-Za-z0-9]*$/'".$ext"'/g'`
mv "$oldName" "$newName"
else
echo "$oldName": No such file
endif 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T05:57:14.290

您不能将文件重命名为它已有的名称。

# perl - 我收到错误“install_driver(Oracle) failed: Attempt to reload DBD/Oracle.pm aborted。在 (eval 85) 第 3 行的要求中编译失败

> ID：10240971
> 
> 赞同：0
> 
> 时间：2012-04-20T05:52:24.267
> 
> 标签：perl, oracle, cgi

我已经使用 bugzilla 检查了所有内容。它说好的。但仍然没有让脚本运行。我要连接的服务器是 suse Linux。Oracle 10g 服务器。我在 Windows x86 PC 上运行 cgi 脚本。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:01:54.657

我假设您在 windows 机器上安装了 oracle 驱动程序，并且 windows 中的 env 参数已为 oracle_home、tns_admin 正确设置，并且正常的 net8 功能都可以在没有 perl 的情况下首先通过 oracle 驱动程序/即时客户端的 sqlplus 连接到 oracle。如果不安装 oracle 即时客户端或 oracle 完整客户端安装。然后配置您的 oracle 客户端以正确连接到数据库并测试其是否正常工作。

# php - 在 php 中从服务器中的视频创建缩略图

> ID：10240972
> 
> 赞同：5
> 
> 时间：2012-04-20T05:52:31.403
> 
> 标签：php, ffmpeg

在我的网站中，我可以选择由用户上传视频文件。在那我想创建该视频的缩略图。我已经在本地系统中尝试了一些编码，它工作正常。我尝试了相同的编码来服务它不起作用。我检查了服务器中启用的 ffmpeg，它被禁用了。他们是否还有其他选项可以在不启用 ffmpeg 的情况下在服务器中创建缩略图？请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T07:56:13.473

你可以使用`ffmpeg`（我想你知道的标签形式）

你需要传递给 ffmpeg 的是

```
-i = input file
-deinterlace = deinterlace pictures
-an = disable audio recording
-ss = start time in the video (seconds)
-t = duration of the recording (seconds)
-r = set frame rate
-y = overwrite existing file
-s = resolution size
-f = force format 
```

例子

```
// where ffmpeg is located  
$ffmpeg = '/usr/bin/ffmpeg';  
//video dir  
$video = 'path/to/video';  
//where to save the image  
$image = 'path/to/image.jpg';  
//time to take screenshot at  
$interval = 5;  
//screenshot size  
$size = '640x480';  
//ffmpeg command  
$cmd = "$ffmpeg -i $video -deinterlace -an -ss $interval -f mjpeg -t 1 -r 1 -y -s $size $image 2>&1";

exec($cmd); 
```

或者试试

```
$second = 15;
$cmd = "$ffmpeg  -itsoffset -$second  -i $video -vcodec mjpeg -vframes 1 -an -f rawvideo -s $size $image";
exec($cmd); 
```

认为您还应该查看有关可能问题的详细劝阻

[ffmpeg-php 创建视频缩略图](https://stackoverflow.com/questions/3911797/ffmpeg-php-to-create-thumbnail-of-video-problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T05:57:53.197

如果您不想使用 ffmpeg，您也可以使用 mencoder 作为替代方案。但最后你需要安装 ffmpeg/mencoder 然后用它来渲染缩略图，因为 PHP 没有内置的功能来处理视频。

如果你在一个共享的虚拟主机上，你可能想要研究像 zencoder 这样的服务，它可以为你生成转换后的视频流，包括缩略图：

[https://app.zencoder.com/docs/api/encoding/thumbnails](https://app.zencoder.com/docs/api/encoding/thumbnails)

# extjs3 - ExrJs 3\. 如何在字段后添加新元素？

> ID：10240974
> 
> 赞同：0
> 
> 时间：2012-04-20T05:52:34.243
> 
> 标签：extjs3

在一系列动态形式的接收元素中。在其中一些元素之后，我需要添加插件。ie先去字段等输入，然后自动添加一个新的xtype。尝试过 createChild，但由于某种原因，他对 xtype 发誓。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T20:27:14.767

```
var formPanel = new Ext.form.FormPanel({
    title: 'Test Form',
    labelWidth: 120,
    width: 350,
    padding: 10,
    tbar: [{
        text: 'Add Item',
        handler: function () {
            formPanel.add({
                xtype: 'textfield',
                fieldLabel: 'My TextBox'
            });
            formPanel.doLayout();
        }
    }],
    renderTo: 'output'
}); 
```

在这里演示[http://ext4all.com/post/extjs-3-how-to-add-a-new-field-dynamically](http://ext4all.com/post/extjs-3-how-to-add-a-new-field-dynamically)

# java - 数组作为方法参数

> ID：10240977
> 
> 赞同：0
> 
> 时间：2012-04-20T05:52:52.543
> 
> 标签：java, arrays, arguments

我们像这样声明字符串数组 -

```
String[] a={"A"}; 
```

但是当一个方法有 String 数组作为参数时，为什么我们不能像这样调用该方法 -

```
mymethod({"A"}); 
```

代码-

```
class A{
    static void m1(String[] a) { }
    public static void main(String args[]){
        m1(new String []{});//OK
            m1({}); //Error
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T05:55:11.950

你可以，虽然你的语法有点偏离。

```
mymethod(new String[]{"A"}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T05:55:36.507

这就是指定语言的方式。从[JLS 的第 10.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)：

> 数组初始值设定项可以在声明中指定（第 8.3 节、第 9.3 节、第 14.4 节），或作为数组创建表达式的一部分（第 15.10 节）来创建数组并提供一些初始值。

因此，您已经看到它在声明中工作，并且[数组创建表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10)`new ArrayElementType`是开头包含的形式：

```
myMethod(new String[] {"A"}); 
```

请记住，当它是声明的一部分时，只涉及一种可能的元素类型。对于方法调用，它更棘手 - 可能有多个重载方法等。基本上，在参与重载决议之前，您需要让表达式*自行*`{"A"}`评估为字符串数组。

 *为了进行一些比较，在 C# 中也是如此，尽管 C# 3 引入了隐式类型数组，其中元素类型是从值中推断出来的，因此您可以编写：

```
// C# 3
MyMethod(new[] {"A"}); 
```

不过，您仍然需要该`new[]`零件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T05:53:34.243

你不能传递这样的数组。将其声明为变量，然后将变量传递给方法。*

# android - 移动开发和云数据库，我应该从哪里开始？

> ID：10240978
> 
> 赞同：1
> 
> 时间：2012-04-20T05:53:00.420
> 
> 标签：android, ruby-on-rails, cloud

在网络技术方面，我是一名 Android 开发人员和菜鸟。

我打算创建一个将其数据存储到数据库的 Android 应用程序。

我不想维护自己的服务器，所以我想我会求助于云服务。

问题是我不知道从哪里开始。

我需要什么才能从我的 Android 应用程序访问并将数据存储到云数据库？

我在哪里可以免费获得最好的云数据库。

我需要使用网络服务吗？

任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:28:16.017

其中有几件事让我提出问题，而不是回答它们。

1.  您的意思是让您的应用程序始终能够与数据库通信，还是更多地与您掌上电脑上的数据库进行备份/同步。

如果您确实希望该应用程序一直处于活动状态，那么只需编写一个 Web 应用程序并在考虑小屏幕的情况下构建它。它会更快，而且有点跨平台。

如果您打算让应用程序与后端同步。那么一个简单的 Web 服务应该可以为您提供存储。是的。Rails 将是要走的路。

这真的取决于您的用户。他们将如何使用该应用程序？他们会在哪里？

我个人喜欢与后端同步的独立应用程序。因为我走进了隧道，所以它不太容易崩溃。它还可以让我控制同步时的时间和地点。但这意味着我正在查看的数据可能已经过时了。而且我添加的数据不适合其他人使用.. 他们必须等待我同步'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:22:52.183

查看 Amazon 的[AWS](http://aws.amazon.com/)及其[适用于 Android 的 SDK](http://aws.amazon.com/sdkforandroid/)。强烈推荐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:05:46.183

我假设您知道 Java，我的解决方案是 GWT/GAE，因为您要求 Web 应用程序，GWT [https://developers.google.com/web-toolkit/](https://developers.google.com/web-toolkit/)将是完美的方式，您也可以使用 Google AppEngine Store 作为云服务，您也可以将 GWT 与 Phonegap 集成以在 Android 中运行它。

# android - android中片段上的NullPointerException VideoView和MediaController

> ID：10240980
> 
> 赞同：0
> 
> 时间：2012-04-20T05:53:25.987
> 
> 标签：android, nullpointerexception, show, fragment, mediacontroller

我正在使用蜂窝 3.1 开发 Galaxy Tab 10.1 应用程序，我在右侧的片段中有一个视频视图和媒体控制器。我在 Layout xml 文件中定义了 VideoView 和 MediaController 并在相关的 java 文件中实例化和操作它们。

正如你们所知道的，在 java 文件中，我将 VideoView 的控制器设置为 MediaController，并将 MediaController 的媒体播放器设置为 VideoView，这是我定义的。

下面是片段布局xml文件

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/video"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <MediaController
        android:id="@+id/controller"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal" />
</LinearLayout> 
```

和java代码文件在下面

```
public class ContentFragment extends Fragment {
    private VideoView mVideo;
    private MediaController mController;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.content, null);
        mVideo = (VideoView)view.findViewById(R.id.video);
        mController = (MediaController)view.findViewById(R.id.controller);
        mVideo.setMediaController(mController);
        mController.setMediaPlayer(mVideo);

        return view;
    }

    public void playVideo(String path) {
        mVideo.setVideoPath(path);
        mVideo.requestFocus();
    }
} 
```

但是在运行这个应用程序时，会发生

> NullPointerException 与 android.widget.MediaController.show(MediaController.java:305)

我试图解决这个错误一整天，但我不明白为什么。actullay 没有足够的信息。有没有人知道我做错了什么？或有解决方案？请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T06:31:15.943

抱歉，您应该以编程方式实例化它，而不是在 XML 中定义 MediaController（请参阅[文档](http://developer.android.com/reference/android/widget/MediaController.html)）：

```
mController = new MediaController(getActivity()); 
```

然后将其附加到 VideoView：

```
mVideo.setMediaController(mController); 
```

此外，据我所知，添加`mController.setMediaPlayer(mVideo);`是没有意义的，因为对 setMediaController 的调用似乎也能解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T06:22:26.990

将 ContentFragment 类更改为静态类：

```
public **static** class ContentFragment extends Fragment { 
    [...]
}
```

# jquery - 无法在 Liferay 中使用 Jquery Ajax 调用 Struts2 Action

> ID：10240983
> 
> 赞同：0
> 
> 时间：2012-04-20T05:53:45.397
> 
> 标签：jquery, struts2, liferay

我无法在 Liferay6.1 中使用 Jquery Ajax 调用 Struts2 Action

请查看以下文件，我粘贴在下面，如果这不是打电话的方式，请告诉我

**Jsp页面**

```
<portlet:renderURL var="getChartData" windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>">
<portlet:param name="struts_action" value="/getChartData" />
</portlet:renderURL>

 <script type="text/javascript">
$(document).ready(function(){
     alert('jjjj');
     $.ajax({
         type : 'POST',
         url  : '<%=getChartData%>',
         data: "countryId="+countryId,
         success : function(data){
             alert(data);
         }
     });

});
</script> 
```

**struts.xml**

```
<action name="getChartData" class="com.actions.ImageDisplayAction" method="getChartData">
            <result name="success">/WEB-INF/view/blank.jsp</result>
        </action> 
```

**portlet.xml**

```
<portlet>
        <portlet-name>DisplayImages</portlet-name>
        <display-name>DisplayImages</display-name>

        <portlet-class>org.apache.struts2.portlet.dispatcher.Jsr168Dispatcher</portlet-class> 
```

动作类

```
public class ImageDisplayAction extends ActionSupport {

    public String getChartData() {

        System.out.println("Hi ");
        System.out.println("Hi ");
        System.out.println("Hi ");
        System.out.println("Hi ");

        return SUCCESS;
    }

} 
```

更新部分：

我没有收到任何异常，这是我完整的 struts.xml 文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
  <constant name="struts.multipart.saveDir" value="D:\\ant" />

    <package name="view" extends="struts-portlet-default">

        <action name="index" >
            <result name="input">/WEB-INF/view/index.jsp</result>           
            <result name="success">/WEB-INF/view/index.jsp</result>
        </action>       

         <action name="getChartData" class="com.actions.ImageDisplayAction" method="getChartData">
            <result name="success">/WEB-INF/view/blank.jsp</result>
        </action>

    </package>
</struts> 
```

**这是在我的 JSP 文件中（没有 chnages ）**

```
<portlet:renderURL var="getChartData" windowState="<%= LiferayWindowState.EXCLUSIVE.toString() %>">
<portlet:param name="struts_action" value="/getChartData" />
</portlet:renderURL>

 <script type="text/javascript">
$(document).ready(function(){
     alert('jjjj');
     $.ajax({
         type : 'POST',
         url  : '<%=getChartData%>',
         data: "countryId="+countryId,
         success : function(data){
             alert(data);
         }
     });

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T06:20:14.933

尝试改变

```
<portlet:param name="struts_action" value="/getChartData" /> 
```

至

```
<portlet:param name="struts.portlet.action" value="/namespace/getChartData" /> 
```

Struts2 需要一个具有该名称的参数。

另一方面，struts 可能会尝试为动作寻找命名空间。命名空间应该`<modules>`在struts.xml 中标签的属性中定义。（如果失败，请尝试删除命名空间）。

# sql-server - 在 sql server 2008 中创建新数据库时，自动创建了一些表？

> ID：10240988
> 
> 赞同：2
> 
> 时间：2012-04-20T05:54:33.500
> 
> 标签：sql-server

当我创建任何新数据库时，它会自动在新数据库中创建一些表。

细节：

我使用以下命令创建了一个新数据库“TestDatabase”

```
Create database TestDatabase 
```

当我展开 Tables 文件夹时，我发现已经有一些表是自动创建的。

这些是我在其他数据库中使用的那些表。

表名：1\. Employee 2\. Admin 等

如何创建新的数据库以确保其中没有创建表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T07:01:48.123

`model`大概在某些时候您不小心在数据库中创建了这些表。

这用作创建新数据库的模板。只需删除它们`model`即可阻止它们出现在每个新创建的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T07:02:18.230

SQL Server 使用`model`数据库作为新数据库的基础。检查并查看这些表是否存在`model`- 如果存在，请删除它们。
您可能也应该检查其他对象`model`（存储过程、视图等）。

# java - Spring Security 认证管理漏洞

> ID：10240989
> 
> 赞同：9
> 
> 时间：2012-04-20T05:54:36.053
> 
> 标签：java, spring, security, spring-security

Spring文档说记住我是通过在cookie中存储以下信息来实现的 -

> base64(用户名 + ":" + expireTime + ":" + md5Hex(用户名 + ":" + expirationTime + ":" 密码 + ":" + key))

我有以下困惑-

1.  为什么要使用像 MD5 这样的不安全哈希来消化信息，而不是使用 SHA-1 或 SHA-2。对于这么小的信息，这些对性能的影响会很大吗？

2.  为什么要通过网络传输这些信息呢？为什么不在服务器上维护一个加密安全随机数和此信息的映射，只返回映射密钥作为 cookie。AFAIK 这是 Servlet API 使用的方法，被认为更安全。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T06:27:35.313

让我们从第二个问题开始，因为它更相关：

**第二个问题**“为什么要通过网络传输密码......”答案：

因为你描述的只是`Simple Hash-Based Token Approach`

如果向下滚动页面[Spring Security Reference: Chapter 10 Remember-Me Authentication](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)你会看到 spring security 也可以使用不同的 remember me 方法：[Chapter 10.3 Persistent Token Approach](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)。这就是您在第二个问题中提出的建议。

* * *

**第一个问题**：简短回答“对于这么小的信息，这些对性能的影响会很大吗？” - 不

因此，如果您想使用`Simple Hash-Based Token Approach`MD5 并且觉得 MD5 是不安全的，那么您可以继承`TokenBasedRememberMeService` [[javadoc]](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/rememberme/TokenBasedRememberMeServices.html)并覆盖该`String makeTokenSignature(long tokenExpiryTime, String username, String password)`方法。例如（未经测试）

```
protected String makeTokenSignature(long tokenExpiryTime, String username, String password) {
    String data = username + ":" + tokenExpiryTime + ":" + password + ":" + getKey();
    MessageDigest digest;
    try {
        digest = MessageDigest.getInstance("SHA-256");
    } catch (NoSuchAlgorithmException e) {
        throw new IllegalStateException("No SHA-256 algorithm available!");
    }

    return new String(Hex.encode(digest.digest(data.getBytes())));
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T04:20:15.257

Simple Hash-Based 令牌使用的 MD5 哈希不是该方法的漏洞。

使用 MD5 散列密码是危险的，因为给定现有密码的散列值，您可以找到另一个散列到相同值的密码（使用彩虹表）。

但是，在这种情况下，MD5 不用于散列密码，而是用作[MAC](http://en.wikipedia.org/wiki/Message_authentication_code)。如果您确实使用彩虹表来找到与该哈希冲突的值，那么您如何准确地使用该值？

对 cookie 使用不同的散列函数可能会让您感觉更安全，但在这种情况下它不会提供更多安全性。

如果您想要更高的安全性，那么您应该使用持久哈希令牌方法。简单哈希令牌以明文形式公开用户名，容易受到重放攻击。Persistent Token 避免了这些问题。

无论哪种方式，您都应该通过设置其 Secure 和 Http-only 标志来保护您的 remember-me cookie。

# r - 从 R 中的数据集中抽取不成比例的样本

> ID：10240991
> 
> 赞同：13
> 
> 时间：2012-04-20T05:54:52.060
> 
> 标签：r, random, sampling

如果我在 R 中有一个大型数据集，我如何在考虑原始数据分布的情况下随机抽取数据样本，特别是如果数据是偏斜的并且只有 1% 属于次要类别并且我想采取有偏见的数据样本？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T16:06:56.800

该`sample(x, n, replace = FALSE, prob = NULL)`函数从大小为 的向量`x`中获取样本`n`。这个样本可以**有**或**没有替换**，选择每个元素到样本的概率可以是**每个元素相同的，**也可以是用户通知**的向量。**

如果你想为每个元素抽取一个相同概率的样本，每个元素有 50 个案例，你所要做的就是

```
n <- 50
smpl <- df[sample(nrow(df), 50),] 
```

但是，如果您想为元素提供不同的被选中概率，例如，**性别**为**M**的元素的概率**为 0.25**，而**性别**为**F**的元素的概率为**0.75**，您应该这样做

```
n <- 50
prb <- ifelse(sex=="M",0.25,0.75)
smpl <- df[sample(nrow(df), 50, prob = prb),] 
```