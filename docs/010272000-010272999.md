# StackOverflow 问答 10272000-10272999

# spring - 将 JSR-303 与自定义验证一起使用

> ID：10272000
> 
> 赞同：3
> 
> 时间：2012-04-22T20:50:50.187
> 
> 标签：spring, validation, spring-mvc

亲爱的春天社区，

我要实现的是以下内容：

*   我希望每个控制器都有一个自定义验证器（[通过`@InitBinder`](http://forum.springsource.org/showthread.php?103761-Spring-validation)）
*   我想春天打电话`validator.validate()`（所以[不是这样](http://forum.springsource.org/showthread.php?95765-Valid-Not-working#post320983)）
*   我想为此使用 JSR-303`@Valid`注释
*   要验证的 bean ( `RegistrationForm`) 没有任何每个字段的 JSR-303 注释
*   我不想将验证实现（如[Hibernate](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/hibernate/hibernate-validator/)）包含到类路径中；从上面的陈述来看，这将是无用的

我基本上遵循[这里](http://forum.springsource.org/showthread.php?88755-Commons-Validator-to-Spring-MVC-3-Validation#post314296)提到的步骤：

*   我添加`javax.validation.validation-api:validation-api`为我的依赖项
*   我用`<mvc:annotation-driven />`
*   我用以下标记我的模型`@Valid`： `public String onRegistrationFormSubmitted(@ModelAttribute("registrationForm") @Valid RegistrationForm registrationForm, BindingResult result) ...`

那么会发生什么，验证 API 尝试定位任何实现并失败：

```
Caused by: javax.validation.ValidationException: Unable to find a default provider
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:264)
    at org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:183)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417) 
```

出路是为 定义一个`validator`属性`AnnotationDrivenBeanDefinitionParser`：

```
<bean name="validator" class="org.company.module.RegistrationFormValidator" />

<mvc:annotation-driven validator="validator" /> 
```

但是这种方法意味着验证器将被设置为所有控制器`ConfigurableWebBindingInitializer.initBinder()`。

我知道我正在尝试以一种特殊的方式使用该框架，但是社区会说什么，如果`validator`属性有特殊含义告诉验证器不需要被解析，例如

```
<mvc:annotation-driven validator="manual" /> 
```

特殊处理：

```
--- AnnotationDrivenBeanDefinitionParser.java.orig      2011-06-30 14:33:10.287577300 +0200
+++ AnnotationDrivenBeanDefinitionParser.java   2011-06-30 14:34:27.897449000 +0200
@@ -152,6 +152,10 @@

        private RuntimeBeanReference getValidator(Element element, Object source, ParserContext parserContext) {
                if (element.hasAttribute("validator")) {
+                       if ("manual".equals(element.getAttribute("validator"))) {
+                               return null;
+                       }
+
                        return new RuntimeBeanReference(element.getAttribute("validator"));
                }
                else if (jsr303Present) { 
```

欢迎任何反馈。

PS 来自[Spring 论坛](http://forum.springsource.org/showthread.php?111456-Partially-using-JSR-303-for-validation)的转贴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:42:24.260

这也是我在[上述论坛](http://forum.springsource.org/showthread.php?111456-Partially-using-JSR-303-for-validation&p=409120#post409120)上的答案/解决方法的转贴。无论如何，我认为在这里也可能会有所帮助。

我发现的唯一解决方法是实现我自己的`@Valid`注释，一旦 Spring（至少在 3.1.1.RELEASE 代码库中）只检查方法参数注释的简单名称（请查看`org.springframework.web.method.annotation.ModelAttributeMethodProcessor`下面的类）。这样，我不需要添加`javax.validation.validation-api:validation-api`到我的项目的依赖项中，并且我不再获得臭名昭著的`javax.validation.ValidationException: Unable to find a default provider`.

```
/**
 * Validate the model attribute if applicable.
 * <p>The default implementation checks for {@code @javax.validation.Valid}.
 * @param binder the DataBinder to be used
 * @param parameter the method parameter
 */
protected void validateIfApplicable(WebDataBinder binder, MethodParameter parameter) {
    Annotation[] annotations = parameter.getParameterAnnotations();
    for (Annotation annot : annotations) {
        if (annot.annotationType().getSimpleName().startsWith("Valid")) {
            Object hints = AnnotationUtils.getValue(annot);
            binder.validate(hints instanceof Object[] ? (Object[]) hints : new Object[] {hints});
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:19:28.730

为什么你不想包含 Hibernate Validator？曾经 JSR 规范有一些实现，如果没有任何实现（或提供者），您就无法使用规范。

您能想象在没有任何 JDBC 驱动程序的情况下使用 JDBC 吗？在没有提供者的情况下使用 JPA？在没有任何容器的情况下使用 Servlet？

同理，Hibernate Validator 是 JSR-303 的参考实现，我不知道有没有其他实现，但是如果你不喜欢 Hibernate Validator，那就换个实现吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T21:12:16.283

你写了：

> 我添加 javax.validation.validation-api:validation-api 作为我的依赖...
> 
> 原因：javax.validation.ValidationException：找不到默认提供程序

您还需要实现该 api。例如 Hibernate Validator，它是默认实现。（与 ORM Hibernate 无关）

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.2.0.Final</version>
</dependency> 
```

# lisp - 实现同时绑定

> ID：10272001
> 
> 赞同：2
> 
> 时间：2012-04-22T20:51:00.260
> 
> 标签：lisp, scheme

我正在编写一个 Lisp（[GitHub 上](https://github.com/chris-taylor/Haskeme)的代码），我想实现本地绑定。目前我有两种语法：

```
(let <var> <val> <expr>) 
```

用于绑定单个变量或函数，以及

```
(with (<var1> <val1> ... <varN> <valN>) <expr>) 
```

一次绑定多个值。

目前，绑定是按顺序评估的，每个新的函数绑定都保留了它定义的环境的副本，因此`<var2>`可以引用`<var1>`但反之不行。

我想修改代码，以便在一次绑定多个值时有效地同时绑定。例如，我希望能够编写（这是一个简单的例子，但它应该说明这个想法）：

```
(define (h y)
  (with ((f x) (if (eq? x 0) #t (g (- x 1)))
         (g x) (if (eq? x 0) #f (f (- x 1))))
  (f y)) 
```

目前这段代码没有运行-`g`关闭`f`，但不是相反。

有没有一种规范的方法可以在 Lisp 中实现同时绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:36:04.540

在[SICP](http://mitpress.mit.edu/sicp/full-text/book/book.html)中有一个关于[内部定义](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-26.html#%_sec_4.1.6)的部分涵盖了这个主题。特别是，练习 4.16、4.18、4.19 告诉你如何实施不同的策略来实现同时定义。

语法有点不同，但书中的想法归结为转换这段代码：

```
(lambda <vars>
  (define u <e1>)
  (define v <e2>)
  <e3>) 
```

进入这段代码：

```
(lambda <vars>
  (let ((u '*unassigned*)
        (v '*unassigned*))
    (set! u <e1>)
    (set! v <e2>)
    <e3>)) 
```

同样的想法也适用于您的`with`特殊形式。查看链接的书以了解更多实施细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:36:47.680

在`(with (a (+ 2 2)))`我们绑定`a`到表达式的值时`(+ 2 2)`，so`a`变为 4。但是在`(with ((f x) (+ x x)))`我们正在做其他事情时：我们正在绑定`f`到一个函数。这是`(with (f (lambda (x) (+ x x))))`.

要处理这种情况，您必须分两次处理绑定。首先收集所有变量并创建包含所有变量的环境。然后评估初始化表达式并将它们的值存储在相应的变量中。这些表达式的评估发生**在**那个环境中，因此每个表达式都可以看到所有变量。初始化是通过赋值完成的。变量可以是初始值，也可以`nil`具有一些陷阱值，如果它们被访问，就会爆炸。

# asp.net - 自动完成 Ajax 工具包 VB.NET ASPX

> ID：10272004
> 
> 赞同：0
> 
> 时间：2012-04-22T20:51:40.997
> 
> 标签：asp.net, vb.net, visual-studio, visual-studio-2010

大家好，我坚持如何使用 ajax 工具包自动完成扩展器从数据库中获取记录，我查看了以下内容：

```
http://www.youtube.com/watch?v=2tZiVY8qs1c
http://www.andreavb.com/forum/viewtopic_9310.html
http://forums.asp.net/t/1626754.aspx/1
http://www.programmersheaven.com/article/100738-Using+AutoComplete+in+the+AJAX+Toolkit+in+VB.NET/info.aspx
http://www.ajaxtutorials.com/ajax-tutorials/using-autocomplete-in-the-ajax-toolkit-in-vb-net/
http://www.c-sharpcorner.com/uploadfile/cd3aa3/creating-auto-complete-textbox-using-autocompleteextender-control-of-ajax/ 
```

我似乎找不到可以帮助我使用 asp.net 数据库的数据库，而这里显示的都是网站驱动的，而不是数据库。您能否帮助我创建或指导我使用数据库在 vb.net aspx pages 2010 中创建自动完成的教程

我有一个带有一个表的测试数据库，表内有以下属性：

```
TESTID int PK
Name nvarchar(100)
LName nvarchar(100) 
```

感谢您提供的任何帮助

编辑：

当我尝试添加（添加自动完成页面方法）时，出现以下错误：

```
Unexpected error (TargetInvocationException); Exception has been thrown by the target of an invocation.
at System.RuntimeMethodHandle._InvokedMethodFast(IRuntimeMethodInfo  method, Object target, Object[] arguments, SignaureStruct@sig, 
```

“它继续写很多东西”

当我按下确定

我的 aspx 页面显示以下带有绿色下划线的代码：

```
Partial Class _Default
    Inherits System.Web.UI.Page

Public Function GetComletionList() As System.String[]

    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T20:59:10.457

您需要设置一个 Web 服务，以返回数据。在此 Web 服务的 vb 代码中，连接到数据库并检索数据。

# c++ - 您可以使用 boost::reference_wrapper 将引用存储在 STL 容器中吗？

> ID：10272005
> 
> 赞同：2
> 
> 时间：2012-04-22T20:51:43.833
> 
> 标签：c++, boost

我正在尝试这样做：维护两个字符串向量，其中一个向量存储值，第二个存储相同值的引用。我认为 using`boost::reference_wrapper`可以解决问题，但似乎不会。我的平台是 Visual C++ 2008。

```
std::vector<std::string> str_vec;
str_vec.push_back("abc");
str_vec.push_back("cde");
str_vec.push_back("fgh");

std::vector<boost::reference_wrapper<std::string> > str_view;
for(std::vector<std::string>::iterator it = str_vec.begin(); it != str_vec.end(); ++it)
{
  str_view.push_back(*it);
} 
```

这是错误：

> 错误 C2664: 'std::vector<_Ty>::push_back' : 无法将参数 1 从 std::basic_string<_Elem,_Traits,_Ax>' 转换为 'const boost::reference

我可以使用`boost::shared_ptr`，但我认为参考可以更好地表达我的意图。这段代码可能可以在 C++11 中使用`std::reference_wrapper`，但我现在不可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T20:55:31.710

是的，它可以。该文档指出它是容器模板参数的必需概念，`CopyConstructible`以及`Assignable`哪些是必需的概念。但是您需要使用`boost::ref`或`boost::cref`创建类型的对象`reference_wrapper`。没有隐式转换，这就是您的代码不起作用的原因。

请注意，`std::reference_wrapper`和之间的细微差别`boost::reference_wrapper`是只有`std`版本适用于仿函数。

例子：

```
std::vector<std::string> str_vec;
str_vec.push_back("abc");
str_vec.push_back("cde");
str_vec.push_back("fgh");

std::vector<boost::reference_wrapper<std::string> > str_view;
std::transform(begin(str_vec), end(str_vec),
               std::back_inserter(str_view), boost::ref<std::string>); 
```

如果您不喜欢这样并希望从原始值进行隐式转换，您可能需要使用：

```
template<typename T>
class my_ref_wrap : public boost::reference_wrapper<T> {
public:
  my_ref_wrap(T& t) : boost::reference_wrapper<T>(t) {}
};

std::vector<my_ref_wrap<std::string> > str_view;
std::copy(begin(str_vec), begin(str_vec),
          std::back_inserter(str_view)); 
```

虽然我不会那样做。

# android - 使用带有 https 地址的 HttpURLConnection 的 Android ICS 无法执行发布方法

> ID：10272009
> 
> 赞同：3
> 
> 时间：2012-04-22T20:52:12.887
> 
> 标签：android, post, android-4.0-ice-cream-sandwich, httpurlconnection

我从 API lvl 4 开始使用此代码，它一直有效，直到 ICS。由于 API 级别 14，当我使用 https URL 时，此代码块始终执行 GET 方法而不是 POST。如果我使用 http URL，代码会执行 POST 并且一切正常。自 lvl14 以来我得到的异常是 FileNotFoundException。我完全不明白发生了什么。请帮忙。谢谢你。

```
private byte[] Post(byte[] Header, byte[] Body, String protocol) throws IOException, MyAppConnectionException
{
    HttpURLConnection urlConnection = null;
    byte[] responseData = null;

    try
    {
        String url = MyApp.getContext().getResources().getString(R.string.ServerEndPoint);
        URL u = new URL(url);
        urlConnection = (HttpURLConnection) u.openConnection();
        urlConnection.setConnectTimeout(15000);
        urlConnection.setReadTimeout(45000);
        urlConnection.setRequestProperty("CONTENT-TYPE", protocol);
        urlConnection.setDoOutput(true); 
        urlConnection.setDoInput(true);
        urlConnection.setChunkedStreamingMode(0);
        urlConnection.connect();
    }
    catch(IOException ioex)
    {
        throw new MyAppConnectionException();
    }

    if(urlConnection != null)
    {
        DataOutputStream outputStream = new DataOutputStream(urlConnection.getOutputStream());

        int msgLength = (int)(4 + Header.length + Body.length);

        outputStream.write(ByteBuffer.allocate(4).order(ByteOrder.LITTLE_ENDIAN).putInt(msgLength).array());
        outputStream.write(Header);
        outputStream.write(Body);
        outputStream.flush();
        outputStream.close();

        if(urlConnection.getResponseCode() == HttpURLConnection.HTTP_OK)
        {
            DataInputStream inputStream = new DataInputStream(urlConnection.getInputStream());

            int dataLength = inputStream.available();
            byte[] msgbLength = new byte[4];
            inputStream.read(msgbLength, 0, 4);
            int length = ByteBuffer.wrap(msgbLength).order(ByteOrder.LITTLE_ENDIAN).getInt();

            assert(dataLength == length);      

            responseData = new byte[length - 4];
            inputStream.readFully(responseData, 0, length - 4);
            inputStream.close();
        }
        urlConnection.disconnect();
    }

    return responseData;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:09:32.100

看来你不见了`urlConnection.setRequestMethod("POST");`。

[http://developer.android.com/reference/java/net/HttpURLConnection.html#setRequestMethod(java.lang.String](http://developer.android.com/reference/java/net/HttpURLConnection.html#setRequestMethod(java.lang.String) )

# javascript - 如何自定义 FACEBOOK 对话框？

> ID：10272011
> 
> 赞同：2
> 
> 时间：2012-04-22T20:52:22.203
> 
> 标签：javascript, facebook, actionscript-3, facebook-graph-api

大家好，我在许多应用程序上看到，他们已经自定义了请求/提要对话框，以赋予其自己的设计。有谁知道我如何自定义我的请求对话框或简单地使用“代码”来发送像 Zyngas 游戏一样的请求？添加照片

![这是自定义请求对话框](../Images/c9645d287493b8ce48dbadf0a5cd6054.png)[http://born2star.com/sssss.jpg](http://born2star.com/sssss.jpg) ![在此处输入图像描述](../Images/95ffc15258cce503612cb465a624bef6.png)

我正在使用 fb.ui('apprequests') ，它带来了蓝色的 facebook 对话框，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:18:03.843

您必须使用标准对话框来发送应用请求。它们不能在不启动对话框的情况下“通过代码”发送，因为出于安全原因，用户需要批准每个请求操作。该对话框不能像您使用公共 API 显示的图像那样定制。似乎有一个私有 API 可以为顶级开发人员定制请求对话框设计。

# php - PHP 登录脚本结果资源

> ID：10272013
> 
> 赞同：0
> 
> 时间：2012-04-22T20:52:48.013
> 
> 标签：php, mysql, database

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

输入用户名和密码时出现错误

mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源

它是说我没有选择数据库...

我想知道这个错误是什么意思。可能是连接到数据库的问题还是语法问题。这是用户名和密码的代码

```
$query = mysql_query("SELECT * FROM Users WHERE username = '$user'");
                $numrows = mysql_num_rows($query);
                if($numrows == 1){
                    $row = mysql_fetch_assoc($query);
                    $dbid = $row['id'];
                    $dbuser = $row['username'];
                    $dbpass = $row['password'];
                    $dbactive = $row['active'];

                    if($password == $dbpass){
                        if($dbactive == 1){

                            //set session info
                            $_SESSION['userid'] = $dbid;
                            $_SESSION['username'] = $dbuser;

                            echo "You have been logged in as <b>$dbuser</b> Click here to go to member page.";

                        }else
                            echo "You must activate your account to login.";

                    }else 
                        echo "You did not enter the correct password.";

                }else 
                    echo "The username you entered was not found.";
            }

        }else
            echo "You must enter your username.";

    } 
```

问题出在 $query 行中。第一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:14:11.123

最可能的原因是您没有连接或没有选择正确的数据库，您应该使用它`mysql_error()`来跟踪。**但**我也看到一些逻辑混乱，这是一个超级简单登录的示例，应该对数据库查询进行检查，而不是通过 PHP（另外，不需要将密码存储在数据库中的任何地方）。您还应该散列用户帐户密码并转义用户输入，希望对您有所帮助..

```
<?php 
session_start();
$db = mysql_connect('host','uesr','pass') or die(mysql_error());
mysql_select_db('database') or die(mysql_error());

if($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['username']) && isset($_POST['password'])){

    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);

    $query = mysql_query("SELECT `username`,`active`
                          FROM Users 
                          WHERE username ='$user' && password='$password' && active=1
                          LIMIT 1");

    if(mysql_num_rows($query) == 1){
        //Log in user found
        $row = mysql_fetch_assoc($query);

        $_SESSION['username']  = $row['username'];
        $_SESSION['active']    = $row['active'];
        $_SESSION['logged_in'] =true;
        header('Location: ./members.php');
        die;
    }else{
        //failed login
        $_SESSION['logged_in']=false;
        $_SESSION['log_in_error']='Fail!! Account not active or incorrect login information!';
        header('Location: ./login.php');
        die;
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T20:59:48.113

像 zerkms 建议的那样，尝试将 mysql_error() 打印到屏幕上。就像是：

```
$query = mysql_query("your_query here");
if(!$query){
    echo 'Error! : ' . mysql_error();
} 
```

[http://www.php.net/manual/en/function.mysql-error.php](http://www.php.net/manual/en/function.mysql-error.php)

在执行所有这些操作之前，请确保您已连接到数据库。例如： http: [//php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

```
$link = mysql_connect('localhost', 'database_user', 'database_password');
if(!$link){
    die('Could not connect: ' . mysql_error());
}

//select your db
mysql_select_db("YOUR_DB_NAME",$link);

$result = mysql_query("SELECT * FROM Users WHERE username = '$user'");
if(!$result){
    echo 'Error! ' . mysql_error();
} 
```

# database - 用于在数据库中查找相似图像的指标

> ID：10272017
> 
> 赞同：7
> 
> 时间：2012-04-22T20:53:37.790
> 
> 标签：database, image, computer-vision, cbir

有很多不同的算法可以计算两幅图像之间的相似度，但我找不到任何关于如何将这些信息存储在数据库中以便快速找到相似图像的信息。

“相似”是指经过旋转（90 度增量）、颜色调整和/或重新保存（有损 jpeg 压缩）的精确副本。

我试图想出图像的“[指纹](http://www.tineye.com/faq#how)”，以便我可以快速查找它们。

到目前为止，我想出的最好的方法是[生成灰度直方图](http://pastebin.com/YSv0Afwr)。使用 16 个 bin 和 256 种灰度，我可以轻松创建一个 16 字节的指纹。这工作得相当好，但它并不像我想要的那么强大。

我尝试的另一个解决方案是调整图像大小，[旋转它们](https://stackoverflow.com/q/10167183/65387)以使它们都以相同的方式定向，对它们进行灰度化，标准化直方图，然后将它们缩小到大约 8x8，并将颜色减少到 16 种灰度。尽管微缩图像非常相似，但它们通常相差一两个像素，这意味着精确匹配无法正常工作。

如果没有精确匹配，我认为没有任何有效的方法可以对相似的照片进行分组（无需将每张照片与其他每张照片进行比较，即 O(n^2)）。

那么，（1）如何创建我创建一个与上述要求不变的指纹/签名？或者，（2）如果这不可能，我可以使用什么其他指标，以便给定单*个*图像，我可以在数千个数据库中找到它的最佳匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:40:43.577

您的问题中有一点令人困惑的事情：您链接到的“指纹”明确**不**意味着要找到相似的图像（引用）：

*TinEye 通常不会找到相似的图像（即具有相同主题的不同图像）；它会找到完全匹配的内容，包括那些被裁剪、编辑或调整大小的内容。*

现在，也就是说，我只是假设您知道您要问什么，并且您实际上希望能够找到所有相似的图像，而不仅仅是编辑过的精确副本。

如果您想尝试详细了解它，我建议您查找[Sivic、Zisserman](http://web.cs.swarthmore.edu/~turnbull/cs97/f08/paper/sivic03.pdf)和[Nister、Stewenius](http://www.wisdom.weizmann.ac.il/~bagon/CVspring07/files/scalable.pdf)的论文。这两篇论文（以及最近的许多其他论文）一直在使用的想法是尝试将文本搜索技术应用于图像数据库，并以与谷歌搜索其文档（网页) 数据库。

我链接到的[第一](http://web.cs.swarthmore.edu/~turnbull/cs97/f08/paper/sivic03.pdf)篇论文是这种方法的一个很好的起点，因为它主要解决了一个大问题：*图像中的“单词”是什么？*. 文本搜索技术都专注于单词，并将它们的相似性度量基于包括单词计数在内的计算。因此，将图像成功表示为*视觉词*的集合是将文本搜索技术应用于图像数据库的第一步。

然后[第二篇](http://www.wisdom.weizmann.ac.il/~bagon/CVspring07/files/scalable.pdf)论文扩展了使用文本技术的想法，提出了更合适的搜索结构。有了这个，它们允许更快的图像检索和更大的图像数据库。他们还提出了如何基于底层搜索结构构建*图像描述符。*

两篇论文中用作视觉词的特征都应该满足您的不变性约束，而第二篇论文绝对应该能够使用您所需的数据库大小（甚至第一篇论文中的方法也可以工作）。

最后，我建议查找来自同一作者的新论文（我很肯定 Nister 做了一些新的事情，只是链接论文中的方法对我来说已经足够了），查找他们的一些参考文献并进行一般搜索对于有关*基于内容的图像（索引和）检索*（CBIR）的论文——它现在是一个非常流行的主题，所以应该有很多。

# php - Google Maps API V3 中的 PHP

> ID：10272022
> 
> 赞同：0
> 
> 时间：2012-04-22T20:53:56.600
> 
> 标签：php, google-maps, google-maps-api-3

我在使用 Google Maps API 时遇到了一个令人费解的小问题，这让我大吃一惊。以下代码

```
<?php
$anim='images/animation.gif';
session_start();
if ($_SESSION['anim']==1) {
$anim='images/transparent.png';
}

//Select database
require_once('../Connections/MySQL_extranet.php');
mysql_select_db($database_MySQL_extranet, $MySQL_extranet);

// Get the hid which is passed from previous page
if (isset($_REQUEST['hid'])) {
    $hid=$_REQUEST['hid'];
}

//MySQL query to select location details
$query_location = "SELECT hotel, lat, lng, zoomair, sp_lat, sp_lng FROM ex_hotel WHERE hid = '$hid'";
$location = mysql_query($query_location, $MySQL_extranet) or die(mysql_error());
$row_location = mysql_fetch_assoc($location);

//Set the session variable to pass the hotel name
$_SESSION['hotel'] = $row_location['hotel'];
?>

<!DOCTYPE html>
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if (gt IE 7)|!(IE)]><!--> <html> <!--<![endif]-->
<!--Dump the above when IE7 users go below 2% -->
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Little Hotels - Directions to <?php echo $row_location['hotel'];?></title>
<meta name="description" content="Little Hotels provides accurate directions to hotels from any starting point you choose.">
<meta name="keywords" content="hotel directions, google maps, Little Hotels, driving directions, directions to <?php echo $row_location['hotel'];?>">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" >
<?php 
$full_url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
$canonical_url = strtok($full_url,'?');
echo '<link rel="canonical" href="' . $canonical_url . '" >'; 
?>
<link rel="stylesheet" href="css/littlehotels.css" type="text/css">
<style type="text/css">
#content{padding: 70px 5px 0; width: 100%;}
#mapcontainer{float:left; display:block;}
#mapCanvas {width: 600px; height: 400px;}

#markerStatus {height: 0px;}
#info {height: 0px;}
#infoPanel {margin-left: 620px; margin-right:10px; display:block;}
#infoPanel div {margin-bottom: 5px;}
</style>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var geocoder = new google.maps.Geocoder();
    var lat = <?php echo $row_location['lat'];?>;
    var lng = <?php echo $row_location['lng'];?>;
    var latlng = new google.maps.LatLng(lat, lng);

function geocodePosition(pos) {
  geocoder.geocode({
    latLng: pos
  }, function(responses) {
    if (responses && responses.length > 0) {
      updateMarkerAddress(responses[0].formatted_address);
    } else {
      updateMarkerAddress('Cannot determine address at this location.');
    }
  });
}

function updateMarkerStatus(str) {
  document.getElementById('markerStatus').innerHTML = str;
}

function updateMarkerPosition(startpoint) {
  document.getElementById('info').innerHTML = [
    startpoint.lat(),
    startpoint.lng()
  ].join(', ');
  }

function nextPage() {
  saddress = document.getElementById('info').innerHTML;
location='directions_detail.php?saddr='+saddress+'&daddr='+latlng;
}

function updateMarkerAddress(str) {
  document.getElementById('address').innerHTML = str;
}

function initialize() {
    var zoom = <?php echo $row_location['zoomair'];?>;
    var sp_lat = <?php echo $row_location['sp_lat'];?>;
    var sp_lng = <?php echo $row_location['sp_lng'];?>;
    var startpoint = new google.maps.LatLng(sp_lat, sp_lng);

    var map = new google.maps.Map(document.getElementById('mapCanvas'), {
    zoom: zoom,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    streetViewControl: false,
    zoomControl: true,
    zoomControlOptions: {
    style: google.maps.ZoomControlStyle.SMALL
    }
  });

var destimage = new google.maps.MarkerImage('/images/hotel_icon.gif',
      new google.maps.Size(32, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(16, 35));
var destshadow = new google.maps.MarkerImage('/images/hotelshadow.png',
      new google.maps.Size(51, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(16, 35));
var marker = new google.maps.Marker({
  icon: destimage,
  shadow: destshadow,
  map: map,
  position: latlng
});

var startimage = new google.maps.MarkerImage(
  '/images/start_icon.png',
      new google.maps.Size(59, 37),
      new google.maps.Point(0,0),
      new google.maps.Point(29, 35));
    var marker = new google.maps.Marker({
    position: startpoint,
    title: 'If necessary, drag this to a different start point',
    map: map,
    draggable: true,
    icon: startimage
  });

  // Update current position info.
  updateMarkerPosition(startpoint);
  geocodePosition(startpoint);

  // Add dragging event listeners.
  google.maps.event.addListener(marker, 'dragstart', function() {
    updateMarkerAddress('Dragging...');
  });

  google.maps.event.addListener(marker, 'drag', function() {
    updateMarkerStatus('Dragging...');
    updateMarkerPosition(marker.getPosition());
  });

  google.maps.event.addListener(marker, 'dragend', function() {
    updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
  });
}

// Onload handler to fire off the app.
google.maps.event.addDomListener(window, 'load', initialize);
</script>
  </head>
  <body onload="initialize()">
<div id="wrapper">
<a href="http://www.littlehotels.co.uk"><img src="images/transparent.png" width="266" height="122" border="0" alt="Little Hotels"></a>
<img src="<?php echo $anim ?>" alt="Little Hotels logo" width="93" height="117" align="top">
<img src="images/header/directions.png" alt="Little Hotels" width="364" height="88">
<div id="container">
<?php include("includes/topnavbar.html"); ?>
<div id="breadcrumb">
<div class="bc-link" style="width:200px"><a href="../carhire.php" target="_blank">Car Hire at competitive rates</a></div>
<div class="bc-link"><a href="flights.php" target="_blank">Flights</a></div>
<div class="bc-link"><a href="ferries.php" target="_blank">Ferries</a></div>
<div class="bc-link"><a href="airportparking.php" target="_blank">Airport Parking</a></div>
<div class="bc-link"><a href="airporthotels.php" target="_blank">Airport Hotels</a></div>
<div class="bc-link" style="width:200px"><a href="travelinsurance.php" target="_blank">Travel Insurance</a></div>
<div class="bc-link" style="width:200px" align="right"><a href="wp/" target="_blank">News and Special Offers</a></div>
</div>
  <div id="content">
<div id="mapcontainer">
<table border=1 bordercolor="#666666">
      <tr>
        <td>
  <div id="mapCanvas"></div>
        </td>
      </tr>
</table>
</div>
<div id="infoPanel">
<h2>Driving Directions to <?php echo $row_location['hotel'];?> </h2>
<!-- Following two lines must be kept in, even though not visible. Also corresponding lines in Style -->
    <div id="markerStatus" style="visibility:hidden;"><i>Click and drag the marker.</i></div>
    <div id="info" style="visibility:hidden;"></div>
    <b>Start Point:</b>
    <div id="address"></div>
    <br><b>Destination:</b><br>
    <div><?php echo $row_location['hotel'];?></div>
<br>
To select a different starting point, just drag the start icon to the required location (zoom in if necessary for better precision).<br>
<br>
<button onclick="nextPage()">Get Directions</button>
<br>
<span class="verdana"><br>

</span>
</div>
</div>
</div>
</div>
</body>
</html>
<?php 
$_SESSION['anim']=1;
?> 
```

创建一个令人满意的页面（[http://new.littlehotels.co.uk/directions_hotel.php?hid=colorado](http://new.littlehotels.co.uk/directions_hotel.php?hid=colorado)），但我想添加一些改进。这些更改需要我从一段 MySQL 数据创建一个 javascript 变量。

因此，我想创建一条类似这样的线：

```
var hotelname = <?php echo $row_location['hotel'];?>; 
```

这应该不会太难，因为我已经在工作代码中有几行类似的行。但是，无论我尝试什么变化，这个新行每次都会打破页面。当我添加该行时，页面显示但没有地图，并且右侧没有起点的名称。

那是我吗？？？？？？？？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:57:45.727

我猜你正在输出一个字符串，`$row_location['hotel']`在这种情况下你需要用引号括起来告诉javascript它不是一个变量而是一个字符串值。

因此：

```
var hotelname = "<?php echo $row_location['hotel'];?>"; 
```

要检查上述假设是否正确，请检查您的控制台，您将看到以下错误：

```
ReferenceError: <value returned by $raw_location['hotel']> is not defined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:06:00.650

像这样可以将变量传递给 JS，它可以防止 PHP 解释器抱怨任何丢失的索引，以防万一（这取决于 php.ini 中错误报告的设置方式），例如：

```
var hotelname = "<?php echo(isset($row_location['hotel']) ? $row_location['hotel'] :''); ?>";
console.info(hotelname); 
```

周围的引号是不同的，就像 $row_location['hotel'] 在 JavaScript 中被强制转换为字符串。

...这段代码返回什么，你甚至得到任何结果？

```
while ($row_location = mysql_fetch_assoc($location)) {
   echo '<pre>'.print_r($row_location,true).'</pre>';
} 
```

# assembly - x86 jmp 注册

> ID：10272027
> 
> 赞同：7
> 
> 时间：2012-04-22T20:54:37.337
> 
> 标签：assembly, x86

所以我有一个地址，`%eax`我想跳转到，但代码无法编译，有没有办法解决这个问题？

```
movl 0xdeadbeef, %eax

jmp %eax ; <--- compile error: type mismatch for 'jmp' 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-22T22:32:56.230

由于没有人能够为您提供正确的答案，所以这里是：

```
jmp   *%eax 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T21:00:54.353

如果没有其他方法，您可以随时使用以下技巧：

```
push eax
ret 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-22T21:08:22.720

```
// target address in eax
jmp   *%eax

// target pointer address in eax
jmp   *(%eax) 
```

对于 x86_64，寄存器是：`%rax`

# dialog - 如何从“依赖”对话框中获取参数

> ID：10272028
> 
> 赞同：1
> 
> 时间：2012-04-22T20:54:58.137
> 
> 标签：dialog, xul, xulrunner

在我的 XUL 应用程序中，我通过以下代码打开一个对话窗口：

```
var win = myWindow.openDialog("chrome://mywindow/content/mydialog.xul",
                  "Dialog creation",
                  "chrome, dialog, modal, resizable=yes",
                           params).focus(); 
```

我通过以下代码访问用户传递的信息：

```
if (params.out){     
    dialogVariablesValues = params.out['inputValues'];
    sameDialog = params.out['sameDialog'];  
    (...)
} 
```

单击对话框窗口中的 OK 按钮时，窗口关闭，if (params.out) 变为 true，我可以获取值。我对这种方法没有任何问题。问题是我需要将我的对话窗口更改为依赖。所以我将代码更改为：

```
var win = myWindow.openDialog("chrome://mywindow/content/mydialog.xul",
                  "Dialog creation",
                  "chrome, dialog, dependent, resizable=yes",
                           params).focus(); 
```

但是 params.out 始终为空...

有谁知道关闭依赖对话框时如何获取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:58:53.320

对于依赖对话框，`openDialog()`即使对话框仍处于打开状态，调用后仍会继续执行。因此，您希望在关闭该对话框时“通知”您的代码。最简单的解决方案应该是在参数中传递回调并更改对话框以在关闭时调用您的回调。因此打开对话框的代码如下所示：

```
params.callback = function(inputValues, sameDialog)
{
  // Do something with the dialog result here
};
myWindow.openDialog(..., params).focus(); 
```

对话框将包含如下代码：

```
var inputValues = ...;
var sameDialog = ...;
window.addEventListener("unload", function()
{
  // Dialog is being closed, call the callback
  window.arguments.callback(inputValues, sameDialog);
}, false) 
```

# javascript - Annotating a class received from JSON server call

> ID：10272036
> 
> 赞同：0
> 
> 时间：2012-04-22T20:55:39.473
> 
> 标签：javascript, annotations, google-closure

I am trying to properly annotate all my Javascript code and am still a beginner in this field.

I get objects from a server call that are directly in `json`. Those objects are passed to functions and I call members directly. It obviously is very error prone while obfuscating so I am trying to annotate everything properly.

My understanding is that (i) I should create a class for this object even though it is never created directly with `new` and (ii) I should be careful with member names since they are fixed by the server response and should not be changed (or should be aliased beforehand).

I have two questions: are my asumptions correct ? how to do the annotation based on that.

Here is a sample code to illustrate

```
$.get("url.php", function(data) {
    process(data);}, "json"); // <= returns {"a":"abc","b":1}

function process(data) {
  $("#someElement").html(data.a + data.b);
} 
```

Here is the class I was planning on creating for closure compilation purposes

```
/**
 * The object that is sent back from the server
 * @constructor
 */
function ServerResponse() {
  /** @type {string} a */
  this["a"] = "";
  /** @type {number} b */
  this["b"] = 0;
} 
```

Here is the annotation for my `process` function

```
/**
 * Process data from the server
 * @param {ServerResponse} data: the Object sent back from the server
 */ 
```

Is my annotation correct? Is it robust to obfuscation?

Thanks a lot for your help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:41:30.897

如果您引用属性名称，则需要在每次使用时一致地引用它们。如果你还没有看到这个，你应该阅读：

[https://developers.google.com/closure/compiler/docs/api-tutorial3](https://developers.google.com/closure/compiler/docs/api-tutorial3)

这样您的第一个片段将是：

```
function process(data) {
  $("#someElement").html(data['a'] + data['b']);
} 
```

如果您试图避免引用，或者您希望编译器键入检查属性的使用情况（不检查引用的属性引用），您应该定义一个 extern 文件以包含在您的源代码的编译中：

```
/** 
 * @fileoverview
 * @externs
 */

/** @interface */
function ServerResponse() {}
/** @type {string} */
ServerResponse.prototype.a;
/** @type {number} */
ServerResponse.prototype.b; 
```

# jquery - jQuery ScrollTop cannot scroll down

> ID：10272038
> 
> 赞同：1
> 
> 时间：2012-04-22T20:55:46.733
> 
> 标签：jquery, scrolltop

On clicking a link I'm using ajax to refresh the contents of a div, and then using scrollTop to move to the top of the content. The problem is, for a second or two after the animation, if you try to scroll down, the page scrolls back up. The only way to get around it is with a fast animation, but I want to keep it a little bit slow so the user can see what is happening. It's like its still running the animation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:03:51.377

Try using [serialScroll](http://demos.flesler.com/jquery/serialScroll/) and [scrollTo](http://demos.flesler.com/jquery/scrollTo/) instead of the native jQuery scrolling for more advanced features. Flesler's scrollTo allows the user mouse scroll to interrupt the current action. You can see it the [demo](http://demos.flesler.com/jquery/scrollTo/)

# apache-flex - Flex，有什么方法可以像验证器那样以编程方式突出显示红色字段？

> ID：10272041
> 
> 赞同：1
> 
> 时间：2012-04-22T20:56:03.967
> 
> 标签：apache-flex, actionscript, flex4, flex3, adobe

我正在对表单中的某些字段值进行一些编程验证，Actionscript 中是否有任何方法可以像验证器那样以红色突出显示该字段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T21:31:59.690

您只需要在程序验证错误上设置 errorString 属性

```
<s:TextInput errorString="error string value" />
<mx:TextInput errorString="error string value" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:15:19.093

使用：

```
var textField:TextField = new TextField();
addChild(textField); 
```

要突出显示 AS3 中的背景：

```
textField.background = true;
textField.backgroundColor = 0xFFF000; 
```

要在 AS3 中突出显示边框：

```
textField.border = true;
textField.borderColor = 0xFFF000; 
```

要关闭它，只需将适当的布尔值设置为`false`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T00:30:44.830

尝试使用辉光滤镜：

```
<fx:Declarations>
    <s:GlowFilter id="gf" color="#ff0000" alpha="1" blurX="5" blurY="5" />
</fx:Declarations>

<s:TextInput id="ti" width="80%"/>
<s:ToggleButton id="btn" label="glow on/off" click="ti.filters = btn.selected?new Array(gf) : null;"/> 
```

# dynamic - Actionscript dynamic assets loaded at run-time - any framework to get them into library?

> ID：10272042
> 
> 赞同：0
> 
> 时间：2012-04-22T20:56:09.167
> 
> 标签：dynamic, actionscript, assets

I have wrote a game that relies on dynamic assets loaded at run-time.The problem is that my publisher will not accept dynamic assets. Is there any way that i can run a 3rd party tool, so that i can auto include them into my library?I am guessing this is possible, since all the data i should load is pointed to in some xml files.

# javascript - How to access javascript variable stored in function closure from browser console?

> ID：10272043
> 
> 赞同：0
> 
> 时间：2012-04-22T20:56:11.210
> 
> 标签：javascript, closures

Lets say I have a global function:

```
function Init()
{
       var v = 10;
       window.GlobalFunction = function()
       {
          // Global Function has access to v, because of closure
          alert(v);
       }
}

Init(); 
```

How I can get value of v from FireBug console? I can put break point there and see value. However this is not enough for me. I want to build FireFox addon for third party website, so I need access this variable, but can't change source code.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T20:59:16.233

如果`v`像你说的那样是一个全局变量，那么你应该能够`v`在控制台上输入来获取它的值。

如果`v`不是全局的，那么您只能从包含它的函数中访问它。JavaScript 是一种函数作用域语言，`var`关键字表示变量只能在当前作用域内访问。如果您不想使用断点/调试器，如果您无法修改源代码，并且如果源代码没有变量的 getter 方法，那么您可能不走运。

尝试在这里发挥创意，您​​可能能够基于原型`Init`或包含它的任何对象（例如，使用`new`关键字）创建一个对象，并为您的对象版本添加一个 getter 函数。然后在您之前使用原始代码对象的任何地方使用您的新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:08:29.227

如果您的意思是如何从捕获它的函数外部访问通过闭包捕获的变量，那么您不能。控制台没有给你任何对状态的特殊访问，它执行 JavaScript，就好像你`eval()`在当前断点处执行一样（或者如果你不在断点处，则全局执行）。如果您无法从 JavaScript 访问该变量，您也无法从控制台访问它。

正如您所指出的，您只能`v`在它在范围内时访问，即当您在一个断点处停止并且`v`在范围内时。

# list - Swi-Prolog - how to delete the second element (if exist) in a list?

> ID：10272044
> 
> 赞同：0
> 
> 时间：2012-04-22T20:56:19.147
> 
> 标签：list, prolog

I need to write a program in swi-prolog that removes the second value of a list. thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:15:55.023

我认为这可能很简单：

```
remove2nd([], []).
remove2nd([X], [X]).
remove2nd([X, Y|Z], [X|Z]). 
```

你在哪里使用它：

```
remove2nd([1,2,3], X). 
```

并给你

```
X = [1, 3]. 
```

# dom - opa : strange behaviour of dom element update

> ID：10272048
> 
> 赞同：2
> 
> 时间：2012-04-22T20:56:40.897
> 
> 标签：dom, opa

I have a strange behaviour with the code below:

```
function update(txt, _)
{
    #text = <>{txt}</>
    #data = <>{txt}</>
}

command = <a onclick={update("test1", _)}> change text1 </a> <+>
      <a onclick={update("test2", _)}> change text2 </a>    

content = <textarea style="width:30%;" rows=1 id=#text > filename </textarea>
    <textarea style="width:100%;" rows=30 id=#data > This is a text area </textarea> 

Server.start(
   Server.http,
   [
     {page: function() {command <+> content}, title: "test" }
   ]
) 
```

When I clik on the links "change text1" or "change text2", the text is updated in the two textareas, but as soon as I edit the value of one of these textareas, the update failed when I clik on the links.

Why ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:52:47.973

我认为这是因为一旦您编辑了 textarea，浏览器就会考虑 textarea 的“值”属性，而不是 textarea 内的 HTML 内容。

所以为了工作，你应该：

```
function update(txt, _)
{
    Dom.set_value(#text, txt)
    Dom.set_value(#data, txt)
} 
```

# c# - c# - Want to perform an action if a user enters a node that already exists in a xml file

> ID：10272051
> 
> 赞同：0
> 
> 时间：2012-04-22T20:57:24.680
> 
> 标签：c#, winforms

Bassicly im creating a schedule where the user can input his on time such as 19/4/2012, and it gets saved into an xml file such as 19/4/2012\. Im trying to perform an action that if the user enters information that has already been entered into the xml file then display a error. Im still unsure how to do such a task so any help would be appreciated thanx.

Example of xml:

```
<Schedule>
<Date>19/4/2012</Date>
</Schedule> 
```

Code Example:

```
 private void button1_Click(object sender, EventArgs e)
      {

            XmlDocument doc = new XmlDocument();
            doc.Load("xmldoc.xml");
            XmlNode schedule = doc.CreateElement("Schedule");
            XmlNode date = doc.CreateElement("Date");
            date.InnerText = monthCalendar1.SelectionStart.ToString();
            schedule.AppendChild(date);
            doc.DocumentElement.AppendChild(schedule);
            doc.Save("xmldoc.xml");

            if(date.InnerText == monthCalander1.SelectionStart.ToString())
            {
                label6.Text = "Incorrect";

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:07:20.970

那么您需要在添加新计划之前检查日期是否存在。您可能可以执行以下操作：

```
if (doc.SelectSingleNode("/Schedule/Date[text()='" + monthCalander1.SelectionStart.ToString() + "']") != null){
   // already exists, do something here
} 
```

# c# - How do I determine local IP address which can connect to a given remote IP/DNS Address

> ID：10272053
> 
> 赞同：2
> 
> 时间：2012-04-22T20:57:29.367
> 
> 标签：c#, .net, network-programming

Using C# Winforms I am trying to automatically detect the local machines IP address through which it can connect to a particular remote DNS/IP address.

One senario is running over a VPN, with the remote address being 10.8.0.1 and local address being 10.8.0.6, netmask of 255.255.255.252

Iterating through the local addresses and checking if the remote and local are on the same subnet obviously fails and I am unsure of how else to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:10:18.920

[路由表](http://technet.microsoft.com/en-us/library/cc779122%28v=ws.10%29.aspx)决定使用哪个本地端口。除了运行 route print CLI 命令之外，我不知道从 C# 获取它的方法。如果存在网络匹配，则使用该端口，否则使用默认路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:45:59.087

这是一些示例代码，可以为您提供所需的信息。它创建一个 UDP 套接字并调用[`Connect()`](http://msdn.microsoft.com/en-us/library/ych8bz3x.aspx)它（实际上是一个 NOOP），然后检查本地地址。

```
static EndPoint GetLocalEndPointFor(IPAddress remote)
{
    using (Socket s = new Socket(remote.AddressFamily,
                                 SocketType.Dgram,
                                 ProtocolType.IP))
    {
        // Just picked a random port, you could make this application
        // specific if you want, but I don't think it really matters
        s.Connect(new IPEndPoint(remote, 35353));

        return s.LocalEndPoint;
    }
}

static void Main(string[] args)
{
    IPAddress remoteAddress = IPAddress.Parse("10.8.0.1");
    IPEndPoint localEndPoint = GetLocalEndPointFor(remoteAddress) as IPEndPoint;

    if (localEndPoint == null)
        Console.WriteLine("Couldn't find local address");
    else
        Console.WriteLine(localEndPoint.Address);

    Console.ReadKey();
} 
```

请注意，这实际上是[这个答案](https://stackoverflow.com/a/8645922/21926)的实现，但在 C# 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-22T20:59:52.047

[http://www.csharp-examples.net/local-ip/](http://www.csharp-examples.net/local-ip/)

试一试。

# knockout.js - 计算值的数组语义

> ID：10272058
> 
> 赞同：4
> 
> 时间：2012-04-22T20:58:03.503
> 
> 标签：knockout.js

我有一个`ko.computed()`代理这样的集合的函数：

```
function ListView(query) {
    var self = this;

    this.query = query;
    this.items = ko.observableArray([]);
    ko.computed( function() {
        self.items( self.query() == null ? [] : self.query().postings() );
    }

    // more code
} 
```

不幸的是，这会导致`self.items()`变量随着对 posts() 数组中每个对象的每次更改而更改。我宁愿做的是有一个计算值项目直接代表查询的帖子。但如果我这样做：

```
 self.items = ko.computed(function() { return self.query().postings(); }); 
```

就 Knockout 而言，该值变为标量，而不是数组。这很重要的原因是，当列表中的某些项目更改状态时，我只想更新显示的那些部分，而不是重新渲染整个列表。这不仅仅是一个性能优化（尽管数百个项目的性能也是一个问题），而且我正在尝试记录当前正在显示的项目以跟踪用户可能看到的内容。

我想从逻辑上讲，我想要这样的东西：

```
 self.items = self.query().postings; 
```

但是如果查询发生变化，这会中断，因为（我认为）依赖项存在于不同的对象上。

有没有一种干净的方法来构建依赖机制并仍然保留集合语义？

*编辑：2012 年 5 月 13 日*

我尝试实现@MichaelBest 建议的扩展方法，但产生了以下错误：

```
Uncaught TypeError: Object function dependentObservable() {
        if (arguments.length > 0) {
            set.apply(dependentObservable, arguments);
        } else {
            return get();
        }
    } has no method 'valueWillMutate'
ko.utils.arrayForEach.ko.observableArray.fn.(anonymous function)    knockout-2.1.0.debug.js:1087
SubviewModel.self.refresh.self.doSort    SummaryViewModel.js:73
ko.ignoreDependencies    knockout-deferred-updates.js:172
subFnObj.(anonymous function).newCallback    knockout-deferred-updates.js:188
ko.subscribable.fn.notifySubscribers    knockout-2.1.0.debug.js:870
ko.utils.arrayForEach    knockout-2.1.0.debug.js:85
ko.subscribable.fn.notifySubscribers    knockout-2.1.0.debug.js:866
evaluateImmediate    knockout-deferred-updates.js:300
evaluatePossiblyAsync    knockout-deferred-updates.js:246
ko.subscribable.fn.notifySubscribers    knockout-2.1.0.debug.js:870
ko.utils.arrayForEach    knockout-2.1.0.debug.js:85
ko.subscribable.fn.notifySubscribers    knockout-2.1.0.debug.js:866
ko.observable.observable.valueHasMutated    knockout-2.1.0.debug.js:946
observable    knockout-2.1.0.debug.js:934
updateViewModel    knockout.mapping-latest.debug.js:514
changes    knockout.mapping-latest.debug.js:389
visitPropertiesOrArrayEntries    knockout.mapping-latest.debug.js:569
updateViewModel    knockout.mapping-latest.debug.js:374
ko.mapping.fromJS    knockout.mapping-latest.debug.js:91
Topic.load    querium.js:1212
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T05:50:55.473

您可以创建一个计算的 observable，它返回一个数组并像`observableArray`:

```
self.items = ko.computed({
    read: function() { return self.query().postings(); }
    write: function(value) { self.query().postings(value); }
});
ko.utils.extend(self.items, ko.observableArray.fn); 
```

现在您可以使用 an`observableArray`具有的所有功能`items`。

编辑：此方法仅在您还向对象添加`valueWillMutate`和`valueHasMutated`函数时才有效：

```
self.items.valueWillMutate = function () { self.query().postings.valueWillMutate(); }
self.items.valueHasMutated = function () { self.query().postings.valueHasMutated(); } 
```

这也仅在您使用 Knockout 的*调试*版本时才有效，因为在*缩小*版本中，函数名称将被压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T01:29:09.873

你可以让`computed`返回一个可观察的：

`self.items = ko.computed(function() { return self.query().postings; });`

然后你可以像这样使用代理`observableArray`：

`self.items().push(...);`

要访问底层数组，您必须解开两个可观察对象：

`var postingsArray = self.items()();`

# objective-c - 使用 NSNotification 将 NSString 变量传递给其他类

> ID：10272068
> 
> 赞同：7
> 
> 时间：2012-04-22T20:59:31.953
> 
> 标签：objective-c, ios, xcode, nsnotificationcenter

我想将一个 NSString 从一个类传递到另一个类，然后将该 NSString 添加到我的第二个类的 NSMutableArray 中。我相信我可以为此使用 NSNotification，但我不知道如何通过通知传递变量。我的代码是这样的：

//class1.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property(strong,nonatomic)NSString *variableString;

@end 
```

//class1.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize variableString = _variableString;

- (void)viewDidLoad
{
[super viewDidLoad];
[self setVariableString:@"test"];

[[NSNotificationCenter defaultCenter] postNotificationName: @"pasteString" object: _variableString];

// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

@end 
```

//class2.h

```
#import <UIKit/UIKit.h>

@interface ViewController2 : UIViewController

@property(strong,nonatomic)NSMutableArray *arr;

@end 
```

//class2.m

```
#import "ViewController2.h"

@interface ViewController2 ()

@end

@implementation ViewController2

@synthesize arr = _arr;

- (void)viewDidLoad:(BOOL)animated   
{
[super viewDidLoad];
if(_arr == nil)
{
    _arr = [[NSMutableArray alloc]init];
}
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(incomingNotification:) name:@"pasteString" object:nil]; 
// Do any additional setup after loading the view.
}

- (void) incomingNotification:(NSNotification *)notification{
NSString *theString = [notification object];
[_arr addObject:theString];
}

@end 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-22T21:11:25.113

在发件人类中，您可以使用以下对象发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName: NOTIFICATION_NAME object: myString]; 
```

侦听器或接收器类必须注册通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(incomingNotification:) name:NOTIFICATION_NAME object:nil]; 
```

方法incomingNotification 是：

```
- (void) incomingNotification:(NSNotification *)notification{
   NSString *theString = [notification object];
   ...
} 
```

## 编辑

当您从“ViewController”发布通知时，是否加载了“ViewController2”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T11:52:06.557

```
Send your Notification like this:

        if(isComingFromHowToUseThisApp) {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"noteFromVideoPlayer"
                                                            object:@"fromHowToUseThisApp"];
    }else {
        [[NSNotificationCenter defaultCenter] postNotificationName:@"noteFromVideoPlayer"
                                                            object:@"fromVideoPlayerViewiPad"];
    }

Receive your notification like this:

// Reset the default value of table view in master split view
- (void)defaultCellSelectionOfTableView:(NSNotification *) objNotification {

     // We need to change the default selection of row
    NSString *noticeFromVideoPlayer = [objNotification object];

}// end defaultCellSelectionOfTableView 
```

# java - 谷歌客户端登录处理 AuthToken

> ID：10272074
> 
> 赞同：0
> 
> 时间：2012-04-22T20:59:48.753
> 
> 标签：java, gwt, authentication, oauth, google-docs-api

我有一个非 gae、gwt 应用程序，它有一个模块，允许用户通过 google docs api 在线创建文档。

为此，我首先要求用户输入文档的名称和类型，然后使用给定的参数通过 google docs api 创建一个新文档，并且该 servlet 的 onSucces 部分返回编辑链接，该链接用于客户端打开一个新的页面来编辑创建的文档。

问题是，每次我尝试打开该 editLink 用户时都必须输入登录信息。为了解决这个问题，我尝试使用谷歌客户端登录，但我认为我完全迷路了。

首先我有用户的用户名和密码，可以直接使用它们，搜索后我尝试了一些通常返回[这样](http://code.google.com/p/fevos/source/browse/trunk/ClientLoginToken/src/ClientLoginToken.java)和[那样](http://www.javacodegeeks.com/2011/09/google-clientlogin-utility-in-java.html)的令牌的示例。现在我应该用令牌做什么？它如何用于完成登录过程或应该完全找到另一种登录方式？所有那些 oauth1、oauth2 等文档让我有点困惑。

这是我的步骤；

服务器端;

```
 LinkedHashMap<String, String> hashMap = new LinkedHashMap<String, String>();

    // Login
    DocumentList docList = new DocumentList("document");
    docList.login(ServletUtil.googleDocsLoginInfo().get("username"), ServletUtil.googleDocsLoginInfo().get("password"));

    //Create document with a unique suffix
    String docName= parameterName+ "-Created-" + new Date();
    docList.createNew(docName, dosyaTur);

    // Find the created document and store editLink
    DocumentListFeed feed = docList.getDocsListFeed("all");

    for (final DocumentListEntry entry : feed.getEntries()) {

        if (entry.getTitle().getPlainText().equals(docName)) {

            hashMap.put("editlink", entry.getDocumentLink().getHref());

        }

    }

    return hashMap; 
```

和客户端；

```
 @Override
    public void onSuccess(LinkedHashMap<String, String> result) {

        String editLink = result.get("editlink");

        Window.open(editLink,"newwindow","locationno");

    } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T23:33:32.060

如果我可以建议使用 OAuth 而不是客户端登录，它已经过时且不太安全。功能基本相同（对于 OAuth 2.0，有更多处理登录的方法）。

我知道，试图了解如何通过 OAuth 访问 api 非常令人困惑，所以我尝试将其分解一下：

如果您使用 OAuth 2.0，您可能想要使用这样的库，[或者](http://code.google.com/p/google-api-java-client/wiki/OAuth2Draft10)您可以尝试[我自己](https://github.com/Xotan/OAuth2Android)的库（虽然我是为 Android 编写的，但这可以与其他 Java 应用程序一起使用，包括 Web 应用程序）

### 当用户第一次使用您的应用程序登录时会发生这种情况：

1.  > 您的应用程序发送包含有关您的应用程序的一些信息的**授权请求**- 例如，您的应用程序需要在谷歌注册，因此有一个特殊的应用程序密钥
2.  < 服务器向您发送一个**url**，在新的浏览器窗口中打开它并让用户登录。在那里，他将被要求允许您的应用访问他的帐户（或其中的某些部分） - 当他确认他将被提示一个他需要复制的**授权码时**
3.  > 用户返回您的应用程序，您将在其中向他询问**授权码**。在他给它之后，您的应用程序再次与服务器连接并将代码作为用户的某种**授权授予**发送。
4.  < 服务器用**访问令牌回答**
5.  您需要做的就是在您对隐藏在标头消息中的服务器的所有请求中使用此**访问令牌**（也称为*不记名令牌）。*

很抱歉我现在不能给你更准确的答案，因为我从未使用过 GWT。我只能说，尝试使用 OAuth2，它实际上非常简单（在您了解授权流程、承载令牌等所有这些令人困惑的事情之后）并且一旦他完成第一次登录，对您的用户来说真的很舒服。

# facebook - Facebook linter 返回“错误解析输入 URL”，尽管如果 FB 按钮被激活，大多数信息都会显示

> ID：10272078
> 
> 赞同：0
> 
> 时间：2012-04-22T21:00:06.493
> 
> 标签：facebook

我正在尝试解决特定行为。我在 WordPress 博客上写的最后一篇文章在通过 Facebook 的对象调试器 (linter) 运行时没有返回任何数据。我只是得到一个“解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。”</p>

*   但是，如果我尝试使用以前的任何帖子，一切似乎都很好：linter 正确刮擦页面；

*   如果点击有问题的条目下的 Facebook 按钮，则会正确生成一个片段，但图像的缩略图除外：永久链接、摘要，一切都是正确的。

*   当我在浏览器中检查永久链接条目的源代码时，我可以看到所有标签都正确显示，甚至是`og:image`标签（URL 是有效的）。

这是突然的行为。自从我在博客上设置 Facebook Open Graph 协议以来，我没有遇到任何问题。

P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:38:10.937

知道了。在我创建上一个条目和编写新条目之间的某个时间，我运行博客的 CDN（内容交付网络）停止工作。

Facebook linter 很不高兴，因为它找不到图像（因为图像不是通过 CDN 分发的：CDN 处理媒体，而不是纯文本，这就是 Facebook 仍然能够抓取标题、摘要等的原因） .

经验教训：使用 Facebook 对象调试器运行测试时，首先禁用任何缓存系统（或确保其正常工作），否则可能会影响结果。

# ruby-on-rails - 创建一个调用方法的选择框

> ID：10272085
> 
> 赞同：1
> 
> 时间：2012-04-22T21:00:48.957
> 
> 标签：ruby-on-rails, select, tags, link-to

我有一个带有标签的工作报告的 rails 应用程序。在 Report/Index.html.erb 中，我希望用户能够通过选择标签对报告进行排序。他们一次只能选择一个标签，所以我觉得选择框效果最好。我目前有这个：

```
<%= select("preferences", :tag_with, 
 ["Politics", "Technology", "Entertainment", "Sports", "Science", "Crime", 
 "Business", "Social", "Nature", "Other"], :prompt => "Filter Feed by:" )%> 
```

我有一个有效的首选项控制器，带有一个`tag_with`更新当前标签的方法调用。但是，此代码仅生成选择框。我希望当用户选择其中一个标签时，它会从首选项控制器调用 tag_with 方法。

我生成了一系列`link_to`完成任务的行，但是我真的想要一个选择框。

```
<%= link_to "Politics", :action => "tag_with", :tag => "Politics", :controller =>"preferences" %>
<%= link_to "Entertainment", :action => "tag_with", :tag => "Entertainment", :controller =>"preferences" %>
<%= link_to "Science", :action => "tag_with", :tag => "Science", :controller =>"preferences" %>
<%= link_to "Technology", :action => "tag_with", :tag => "Technology", :controller =>"preferences" %> 
```

每个标签依此类推。这工作正常，但体积庞大且不可取。有没有办法通过选择框做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:42:50.207

在您的`reports.js.coffee`文件中，或您想要的任何其他 js 文件中。

```
jQuery ->
  $('select#preferences').change ->
    $.get 'preferences/tag_with',{ term: $('option:selected', this). val() } 
```

或者，如果您想使用常规 javascript：

```
$(function(){
  $('select#preferences').change( function() {
    $.get('preferences/tag_with',{term: $('option:selected',this).val()});
  });
}); 
```

链接是一个 GET 请求。`.change()`每当有人进行更改时，jQuery方法就会触发。该`$.get`方法向 URL 发送 GET 请求并可以传递数据（第二个参数）。该数据成为您的参数哈希，因此在上面的示例中，您将获得：

```
params[:term] #=> the value attribute of whatever option was selected by the user 
```

[有关更多帮助，请参阅.change()](http://api.jquery.com/change/)和[$.get()](http://api.jquery.com/jQuery.get/)上的 jQuery 文档。

* * *

**更新**

为此刷新页面，最简单的方法是将要更改的表提取为部分表，假设它被称为`_report.html.erb`. 部分应如下所示：

```
<div id="report">
  <%= render @report %>
</div> 
```

*注：`render @report`只是`render :partial => 'report'`. 请参阅[http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html) *

在您的首选项控制器的 tag_with 选项中，您应该确保设置`@report`对象（或任何其他将数据传递到您的部分的对象）。

然后你应该创建一个名为的文件`views/preferences/tag_with.js.erb`并在其中放入如下内容：

```
$('div#report').html('<%= escape_javascript( render @report ) %>'); 
```

这将使用新内容更新报告容器。

# xcode - 有没有办法在我的 sharedSpriteFrameCache 中打印所有精灵帧？

> ID：10272086
> 
> 赞同：0
> 
> 时间：2012-04-22T21:00:52.750
> 
> 标签：xcode, cocos2d-iphone

有没有办法在控制台中打印我场景的 sharedSpriteFrameCache 中包含的所有对象？使用 NSLog 或 CCLOG 的东西？

我在我的场景中有这个，并希望它打印出现在 plist 中的帧的名称。

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"samplesprites.plist"]; 
```

通常我会在这里写我已经尝试过的东西，但是我还没有找到任何引用访问精灵帧名称、键、对象或任何用于 sharedSpriteFrameCache 的方法的方法。

编辑：我可能应该详细说明我确实知道框架名称在 plist 文件中的事实，但是，我遇到了一个错误，控制台说我的框架名称不存在，但我知道它确实存在。我已经找到了各种解决方法，但这对于我尝试使用的故障排除方法来说更像是一个好奇的问题。请求的技术可能没有任何实际用途，但是，它真的可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:05:19.237

里卡德在他的评论中回答了这个问题，但这里是详细说明：

如果你进入 libs 下的 Cocos2d 文件夹，你会发现`CSpriteFrameCache.h`和`CCSpriteFrameCache.m`.

更改您的 CCSpriteFrameCache.h 文件以包含以下附加行：

```
@interface CCSpriteFrameCache : NSObject
{
    ...(existing code)
    NSMutableDictionary *showSpriteFrames;//or whatever you want to call it
} 
```

然后，在 CCSpriteFrameCache.m 中，添加：

```
-(NSMutableDictionary *) showSpriteFrames 
{
    return spriteFrames_;
} 
```

然后在代码中的任何位置，您希望显示当前缓存中的精灵帧，输入以下内容：

```
NSMutableDictionary *framesDict = [[CCSpriteFrameCache sharedSpriteFrameCache] showSpriteFrames];

for (NSString *frameKey in framesDict)
{
    CCLOG(@"Frame name: %@", frameKey);
} 
```

归因于此链接的答案：http: [//www.cocos2d-iphone.org/forum/topic/31060](http://www.cocos2d-iphone.org/forum/topic/31060)

# javascript - 设置背景颜色样式的 JavaScript 函数

> ID：10272090
> 
> 赞同：1
> 
> 时间：2012-04-22T21:01:45.200
> 
> 标签：javascript, function, background

为什么我的代码不起作用？

```
<script type="text/javascript">
                function barFix(newDiv)
                {
                     var elem = document.getElementById(newDiv);
                     elem.style.background='#666666';
                }
            </script>

                <div onmouseover="barFix('badgebar1');" id="badgelist">                             
                </div>

            <div id="badge1bar" style="background-color: #dddddd; width: 2px; height: 42px;"> </div> 
```

我已经尝试了一切..无法让它工作！为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:03:48.067

在鼠标悬停时，您将“badgebar1”作为参数发送，但没有badgebar1，它是badge1bar。

因此，要么更改 id，要么更改 onmouseover 代码，然后它应该可以工作。

# qt - 无法将背景图像添加到 QDockWidget

> ID：10272091
> 
> 赞同：1
> 
> 时间：2012-04-22T21:01:47.803
> 
> 标签：qt, qt4, qdockwidget, qtstylesheets

据我所知，将小部件的背景设置为图像的方法是将 qstylesheet 修改为：

```
background-image: url(<your image here>); 
```

这似乎有效，除非它是`QDockWidget`' 的主要小部件。

这就是我所做的：

1.  新建一个 qt 小部件项目
2.  制作一个`QWidget`对象，可能会在那里放一个或两个按钮以确保您知道它正在被使用。
3.  将样式表更改为步骤 2 中制作的小部件以包含：`background-image: url(<your image here>);`
4.  在 MainWindow ui 文件中，将`QDockWidget`, 提升它的主小部件到`QWidget`步骤 #2 中制作的内容。

当您运行程序时，您会注意到`QDockWidget`的背景仍然是默认设置，但是您添加到小部件的任何按钮或标签都已将其背景更改为您选择的图像。

当您将 qss 行从 更改为`background-image`并`background-color`选择颜色而不是图像时，小部件会更改颜色。

`QDockWidget`有没有人对提供背景图像（而不仅仅是背景颜色）有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:56:15.290

Apparently all you need to do is overwrite the widget's pain event with:

```
void MyWidget::paintEvent(QPaintEvent *)
{
    QStyleOption opt;
    opt.init(this);
    QPainter p(this);
    style()->drawPrimitive(QStyle::PE_Widget, &opt, &p, this);
} 
```

# android - 带有独立复选框的android ListView

> ID：10272092
> 
> 赞同：0
> 
> 时间：2012-04-22T21:01:49.393
> 
> 标签：android, listview

我有一个带有复选框的列表，我需要知道的是，无论如何，当我单击复选框时，它会被选中，当我单击列表项时，我想触发一个功能但不选择复选框。

换句话说，如果我点击任何一行，除非我直接点击它，否则不应选中该复选框。

这是我的清单：

```
listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice , items));
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:09:06.930

我前段时间实现了这个，要做的是使用多个布局，一个包含复选框，另一个包含列表项的文本，并将其包装为相对布局，并将其添加为每个列表项的行，即使用它来动态填充和创建你的行。

现在为此列表设置一个 onClickListener 并在该代码块中侦听哪个视图正在获得点击的标识并执行不同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:45:42.930

^基本上是其他评论者所说的。我个人认为最简单的做法是首先让您的布局完美适合单个列表项，然后制作一个滚动视图，在滚动视图中放置一个线性布局，并使用循环使用单个列表项填充线性布局。在循环中设置 onClickListeners 等，或者对列表项使用具有不同标签或 id 的单个 onClickListener ...

# android - Android Wifi 监听策略

> ID：10272093
> 
> 赞同：1
> 
> 时间：2012-04-22T21:01:50.643
> 
> 标签：android, authentication

我是 Android 开发新手，我需要一些帮助来解决以下问题：我大学的 Wi-Fi 网络有一个强制门户，要求您输入用户名和密码才能访问学校的系统，所以我想我可以自动化每次手机检测到与学校网络的连接（检查 SSID）时，通过向门户网站发送带有用户数据的 HTTP 发布请求来登录网络的过程，很简单，对吧？问题是我不知道从哪里开始，Android 是一个非常广泛的环境，所以我在这里向您寻求指导。我对此做了一些功课，这就是我到目前为止所得到的：

*   我可以使用带有 Connectivity Manager Intent 的 BroadcastReceiver 启动应用程序。我认为它可能会给我太多我不需要的意图，因为我只需要 Wifi。[我在这里](https://stackoverflow.com/questions/6362314/wifi-connect-disconnect-listener)读到了
*   我可以使用 AndroidHTTPClient 发出 HTTP 请求。

我计划的流程如下：用户第一次打开应用程序，他输入用户名和密码，有一个自动连接的切换按钮，当你按下它时会变为“断开连接”（因为你只能一次使用相同的凭据连接一台设备，它会向网络的注销页面发送请求）。系统处于自动连接模式时，每次手机连接到学校网络时，即使应用程序没有运行，它也应该发送请求。

*   首先，解决这类问题的最佳方法是什么？
*   我应该在哪里（以及何时）存储凭据？
*   我应该在哪里提出请求？在接收方的 onRecive() 中？在活动中？

我知道这就像要求您解决我的问题，但我正在尝试在这里学习，我需要指导以尽我所能使用此软件。我非常感谢您的意见:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:02:33.503

我将实现一个实现 BroadcastReceiver 的服务，以检查配置 AsyncTask 并执行它以向登录服务发出正确请求的 Internet 连接的更改。

你检查这是否真的可行？您了解 HTTP 请求的正确参数了吗？你可以使用 curl 进行身份验证吗？

我不知道 Android 是否有一个像样的机制来存储有价值的信息，但基本上你保存凭据的位置取决于安全风险的级别。我暂时不会对此给予太多关注 - 假设这些密码没有价值并且应用程序不会广泛传播。无论如何，您可以将二进制序列存储在静态变量中，然后将其与用户密码进行异或，然后将其存储在另一个静态变量中。这对于简单的内存扫描应该足够了。我没有提到写入文件，因为我认为这种方式在安全性方面风险太大。

顺便说一句，这看起来是一个不错的应用创意。你检查过是否有人已经做过这个吗？

# haskell - Haskell：显示/获取所有用户定义函数的列表

> ID：10272094
> 
> 赞同：14
> 
> 时间：2012-04-22T21:02:01.843
> 
> 标签：haskell, ghc, ghci, winghci

Haskell 中是否有一个命令显示（或作为列表获取）所有已在 GHCi 中加载/定义的用户定义函数？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T00:01:20.993

要查看您在 ghci 提示符下所做的绑定（例如使用`let`or `<-`），请尝试使用`:show bindings`.

如果您已经加载了一些模块，您可以使用它`:show modules`来获取加载模块的名称，然后`:browse ModuleName`列出该模块范围内的所有内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-22T21:04:39.987

在 ghci 中时，使用`:browse`或`:bro`在加载文件之后。您还可以通过 浏览卸载的模块`:browse Foo.Bar.Baz`。

# html - 在 jsf 上下文中访问 html 标签和值？

> ID：10272095
> 
> 赞同：0
> 
> 时间：2012-04-22T21:02:04.467
> 
> 标签：html, jsf, tags

我可以在 jsf 上下文中访问 jsf 标签，但是有没有办法在 jsf 上下文中也访问常规 html 标签？

详细来说，我在网页上有以下内容

```
<h:form >
<b>id:</b><b id='idDisplay'>somevalue</b><br/> 
```

我想在我的支持 bean 中访问 idDisplay 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:04:54.200

不是直接的，您需要将它们转换为完全有价值的 JSF 组件，以便您可以通过它们的客户端 ID 来获取它们，或者在*正确*的方向[`UIComponent#findComponent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)上寻找解决方案。

 *作为一种间接解决方案，您可以将它们作为已知父 JSF 组件的子组件。对于 Facelets，它将是`UIInstructions`. 但无论您打算如何处理，这是一种令人讨厌的方法，因为它是纯文本，您需要自己解析 HTML。

在您未来的问题中，我建议您详细阐述功能需求，而不是询问如何实现您认为它是正确解决方案的解决方案，但毕竟不是。*

# java - primefaces - 无活动功能

> ID：10272098
> 
> 赞同：0
> 
> 时间：2012-04-22T21:02:25.603
> 
> 标签：java, javascript, jsp, web, primefaces

我的目标是创建一个函数，使用 primefaces 和 JSP，来捕捉用户在我的网站上没有任何活动的时间。例如，如果用户超过 5 分钟没有使用我的页面，我需要发送一个对话框告诉他他已与网站断开连接。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:08:05.273

您不需要 PrimeFaces 来执行此操作。您的会话活动需要一个过滤器，并检查会话超时是否已激活。这是一个很好的示例[http://viralpatel.net/blogs/2009/02/http-session-handling-tutorial-using-servlet-filters-session-error-filter-servlet-filter.html](http://viralpatel.net/blogs/2009/02/http-session-handling-tutorial-using-servlet-filters-session-error-filter-servlet-filter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:07:58.757

这是[你](http://www.primefaces.org/showcase/ui/idleMonitorEvents.jsf)要找的吗？

`primefaces detect inactivity`这是（至少对我而言）的第一个 Google 结果。

这里还有一个关于它的 js-only 问题[优雅地检测 JavaScript 中的空闲时间](https://stackoverflow.com/questions/667555/detecting-idle-time-in-javascript-elegantly)可能适合您的答案。

# python - django 'too many SQL variables' error with ModelMultipleChoiceField

> ID：10272106
> 
> 赞同：1
> 
> 时间：2012-04-22T21:03:31.877
> 
> 标签：python, django, sqlite

I have a form with `ModelMultipleChoiceField` on it, and I am getting `'DatabaseError: too many SQL variables'` (using SQLite) when the user picks more than 1000 entries in the selection widget and posts the form.

The problem seems to be the method `clean` of `ModelMultipleChoiceField`, which tries to select objects from the database simply by the `IN` SQL clause (e.g. SELECT * FROM projects WHERE id IN (1,2,3)). When the number of numbers in the IN argument rises over 1000 the `too many SQL variables` happens.

I am using the most recent version of Django (1.5.dev17922), though I think it is irrelevant because similar issues happened even with older versions.

I have always worked around this problem by custom temporary models that I used for joins of more complex queries. But more and more it seems to me that, either there already is a systematic solution to this problem that I am missing (which I hope somebody could point out to me), or there at least needs to be a need for it -- how do you address similar situations? -- in which case I can start thinking how to propose something general that could later be incorporated into Django.

Thanks for any suggestions or help.

EDIT: I posted the same question to django-users ML, and quite a fruitful discussion got going; [https://groups.google.com/forum/?fromgroups#!topic/django-users/aI7uO49UVRU](https://groups.google.com/forum/?fromgroups#!topic/django-users/aI7uO49UVRU)

# javascript - Add/Delete class to with Javascript when you are on specific div.

> ID：10272107
> 
> 赞同：2
> 
> 时间：2012-04-22T21:03:36.647
> 
> 标签：javascript, class, menu, navigation, add

I open this thread to ask your help with JavaScript.

My website is divided vertically into four main div.

```
<div id="homepage"> Content </ div>
<div id="page1"> Content </ div>
<div id="page2"> Content </ div>
<div id="page3"> Content </ div>
<div id="page4"> Content </ div> 
```

On the right of page there is navigation menu, div position: fixed.

```
<div id="nav">
<ul>
<li> <a href="#homepage"> Homepage </ a> </ li>
<li> <a href="#page1"> Page1 </ a> </ li>
<li> <a href="#page2"> Page2 </ a> </ li>
<li> <a href="#page3"> Page3 </ a> </ li>
<li> <a href="#page4"> page4 </ a> </ li>
</ ul>
</ div> 
```

I wish that when you are in a div container (page1 or page2 etc) is added to a class corresponding menu item.

And 'possible to do this with javascript? Thanks in advance

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T21:10:07.333

您将使用节点树来设置属性。我的意思是说

```
var node = document.getElementById("dividname").getElementsByTagName("li")[i];
node.setAttribute("class", "classname"); 
```

用于删除仅在上面使用的类，没有任何价值

```
node.setAttribute("class", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T21:12:16.753

我想到的 jquery 中最简单的解决方案是：

```
$('.menu-link').click(function(){
 var divId = $(this).attr("href");
 $('.page-div').removeClass("special-class");
 $(divId).addClass("special-class");
}); 
```

请注意，这`.menu-link`是您`<a>`内部的课程，`<li>`并且`.page-div`是带有 ids 等的 div 的`page1`课程`page2`。

# eclipse - 在 Eclipse Galileo 中设置 tomcat7

> ID：10272110
> 
> 赞同：0
> 
> 时间：2012-04-22T21:04:01.543
> 
> 标签：eclipse, tomcat7

我下载了 tomcat7，但我不知道将其设置为可通过 Ubuntu 10.10 上的 Eclipse 3.5 管理的 Web 服务器。有什么指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:13:22.847

# atk4 - Agile Toolkit 4.2 ...参考字段类型与模型中断

> ID：10272113
> 
> 赞同：1
> 
> 时间：2012-04-22T21:04:21.750
> 
> 标签：atk4

这是对引用字段示例代码的简单重写：

```
class page_LoadResults extends Page {
function init(){
    parent::init();
    $p=$this;
    $f=$p->add('Form');

$c=$p->add('Model_Season');
$f->addField('reference','Season')
    ->setValueList($c)
    ->validateNotNull()
    ->add('Icon',null,'after_field')
    ->set('arrows-left3')
    ->addStyle('cursor','pointer')
    ->js('click',$f->js()->reload())
    ; 
```

当被调用时，我收到一条错误消息：

\atk4\lib\Form/Field.php:652 [2] htmlspecialchars() 期望参数 1 为字符串，给定数组

查看代码，在 Field.php 的第 648 行附近

```
 foreach($this->getValueList() as $value=>$descr){
        // Check if a separator is not needed identified with _separator<
        $output.=
            $this->getOption($value)
            .htmlspecialchars($descr)
            .$this->getTag('/option');
    } 
```

确实显然将 $descr 创建为 ($value,descr) 的数组

这是一个错误还是我不在基地。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:09:24.103

使用 atk 4.2 语法

```
<?php

class page_b extends Page {
    function init(){
        parent::init();
        $p=$this;
        $f=$p->add('Form');
        $field = $f->addField('Dropdown','Season');
        $field->setModel("a");
        $field
            ->validateNotNull()
            ->add('Icon',null,'after_field')
            ->set('arrows-left3')
            ->addStyle('cursor','pointer')
            ->js('click',$f->js()->reload())
            ;
    }   
} 
```

1.  注意`addField("Dropdown")`
2.  使用`setModel`而不是`setValueList($model);`

# list - Ocaml，用列表中的给定元素替换所有指定元素

> ID：10272115
> 
> 赞同：5
> 
> 时间：2012-04-22T21:04:26.573
> 
> 标签：list, ocaml

我正在编写一个 ocaml 项目，其中我有一个函数可以将`''`char-list 中的所有内容替换为`'E'`. 这是我的建议代码：

```
 let rec string_lst_change_E lst = 
    match lst with
        [] -> let a ='E'; a::[]
        |(h::t) if (h = '') -> 'E'::(string_lst_change_E t) 
        |(h::t) ->  h::(string_lst_change_E t)
;; 
```

它说我有语法错误......但我无法自己弄清楚。我试图像这样修改它：

```
 let rec string_lst_change_E lst = 
    match lst with
        [] -> 'E'::[]
        |(h::t) ->if (h = '') then 'E'::(string_lst_change_E t) else h::(string_lst_change_E t)
;; 
```

但仍然存在语法错误...（就行 |(h::t) -> .... char 18-21）

请帮我看看。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:26:39.303

这是第一个错误所在：`[] -> let a ='E'; a::[]`如果要在声明后使用 a ，则应改为编写`[] -> let a = 'E' in a ::[]`. 显然，`[] -> ['E']`更简单。

第二个是`if`在模式匹配中的使用。您应该`when`改用：`|(h::t) when h = '' -> 'E'::(string_lst_change_E t)`

但到底什么是''？空字符？你如何在字符串中得到这个？打字`''`本身就是一个语法错误。在顶层试试吧！为了使您的代码编译，我将其替换`''`为`' '`.

```
let rec string_lst_change_E lst =
    match lst with
        | [] -> let a ='E' in a::[]
        | (h::t) when h = ' ' -> 'E'::(string_lst_change_E t) 
        | (h::t) ->  h::(string_lst_change_E t) 
```

请注意，您可以在这里简单地使用函数：

```
let rec string_lst_change_E = function
    | [] -> let a ='E' in a::[]
    | (h::t) when h = ' ' -> 'E'::(string_lst_change_E t) 
    | (h::t) ->  h::(string_lst_change_E t) 
```

# xdebug - Xdebug 不显示跟踪和转储

> ID：10272122
> 
> 赞同：0
> 
> 时间：2012-04-22T21:05:14.867
> 
> 标签：xdebug

为什么 xdebug 不显示错误跟踪和 var_dump（仅 php 标准错误输出）？但调试工作正常。

我正在工作 n Mac OS Lion。

这是我的配置：

```
[xdebug]
zend_extension=/usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so
; Remote settings
xdebug.remote_autostart=off
xdebug.remote_enable=on
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=localhost
xdebug.remote_port=9000

; General
xdebug.show_local_vars=On
xdebug.dump.SERVER=HTTP_HOST, SERVER_NAME
xdebug.dump_globals=On
xdebug.collect_params=4
xdebug.auto_trace=off
xdebug.collect_includes=on
xdebug.collect_return=off
xdebug.default_enable=on
xdebug.extended_info=1
xdebug.manual_url=http://www.php.net
xdebug.show_mem_delta=1
xdebug.max_nesting_level=100
xdebug.idekey=xdebug

; Trace options
xdebug.trace_format=0
xdebug.trace_output_dir=/tmp/xdebug/trace
xdebug.trace_options=0
xdebug.trace_output_name=tracelog

; Profiling
xdebug.profiler_append=0
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=0
xdebug.profiler_output_dir=/tmp/xdebug/debug
xdebug.profiler_output_name=scriptprofile.out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:14:56.023

确保在 php.ini 中也将 html_errors 设置为 on (1)。这是由于某些奇怪的原因在 PHP 5.3 中默认关闭的。在 PHP 5.4 中，默认值再次为 (1)。

# c# - 如何自定义 InitializeComponent 的代码生成？更具体地说，如何对所有生成的代码进行后处理？

> ID：10272123
> 
> 赞同：11
> 
> 时间：2012-04-22T21:05:24.047
> 
> 标签：c#, winforms, serialization, designer, initializecomponent

我正在尝试为`InitializeComponent`. MSDN 文章[“在 .NET Framework 可视化设计器中自定义代码生成”](http://msdn.microsoft.com/en-us/library/ms973818.aspx "MSDN 文章：“在 .NET Framework 可视化设计器中自定义代码生成”")包含[“控制代码生成”](http://msdn.microsoft.com/en-us/library/ms973818.aspx#custcodegen_topic8 "MSDN 文章：“在 .NET Framework 可视化设计器中自定义代码生成”，“控制代码生成”部分")部分，它解释了如何完成此操作的基础知识。

我密切关注上述文章中的一个示例：

```
//using System.ComponentModel.Design.Serialization;

class SomeFormSerializer : CodeDomSerializer
{
    public override object Serialize(IDesignerSerializationManager manager,
                                     object value)
    {
        // first, let the default serializer do its work:
        var baseSerializer = (CodeDomSerializer)manager.GetSerializer(
                             typeof(Form).BaseType, typeof(CodeDomSerializer));
        object codeObject = baseSerializer.Serialize(manager, value);

        // then, modify the generated CodeDOM -- add a comment as the 1st line:
        if (codeObject is CodeStatementCollection)
        {
            var statements = (CodeStatementCollection)codeObject;
            statements.Insert(0, new CodeCommentStatement("CODEDOM WAS HERE"));
        }

        // finally, return the modified CodeDOM:
        return codeObject;
    }
} 
```

现在我将它连接到我的表单`SomeForm`：

```
[DesignerSerializer(typeof(SomeFormSerializer), typeof(CodeDomSerializer))]
class SomeForm : Form { … } 
```

然后，表单设计器可能会生成以下`InitializeComponent`代码：

```
private void InitializeComponent()
{
    … /* (general setup code, such as a call to `this.SuspendLayout`) */ 

    // 
    // someButton
    // 
    … /* (someButton's properties are set) */

    // CODEDOM WAS HERE!
    // 
    // SomeForm
    // 
    … /* (form's properties are set) */

    … /* (general setup code, such as a call to `this.ResumeLayout`) */ 
} 
```

请注意，注释`// CODEDOM WAS HERE`不是作为第一行添加的`InitializeComponent`，而只是作为处理表单对象本身属性的代码块的第一行。

如果我希望能够修改生成的整个方法的 CodeDOM，而不仅仅是处理特定对象的部分，我该怎么办？

> **背景：我为什么要这样做？**在 Windows 窗体中，如果想要在数据绑定过程中进行灵活的值转换，通常不得不求助于订阅某个特定对象的`Format`和`Parse`事件。`Binding`所以我正在创建一个专门`Binding`的子类（我们称之为它`ConvertingBinding`）来稍微简化这个过程。
> 
> 现在，问题是当在 Windows 窗体设计器中设置数据绑定时，生成的代码会创建`Binding`; 但是，我希望设计器改为实例化我的专门子类。我目前的方法是让设计人员首先创建一个 CodeDOM 树，然后遍历该树并将所有实例替换`Binding`为`ConvertingBinding`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T09:39:26.523

您需要创建两个`Form`类。首先`Form`用一个`DesignerSerializerAttribute`. 第二个`Form`是第一个的后代。之后，您可以自定义`InitializeComponent()`第二个`Form`控件或组件。为此，您应该使用`manager.Context`来获取包含's 控件的序列`StatementContext`化 代码的所有对象。`CodeStatementCollection``Form`

这里有一些简单的步骤。
包括库：

```
using System.CodeDom;
using System.ComponentModel.Design.Serialization;
using System.Collections; 
```

创建新表单并添加`DesignerSerializerAttribute`：

```
[DesignerSerializer(typeof(CustomFormSerializer), typeof(CodeDomSerializer))]
class CustomForm : Form { … } 
```

创建`CustomForm`后代并向其添加一些控件或组件：

```
class CustomForm1 : CustomForm { … } 
```

`CustomFormSerializer`为处理添加方法`CodeStatementCollection`，例如：

```
private void DoSomethingWith(CodeStatementCollection statements)
{
    statements.Insert(0, new CodeCommentStatement("CODEDOM WAS HERE"));
} 
```

在`Serialize`方法使用循环中`manager.Context`：

```
public override object Serialize(IDesignerSerializationManager manager,
    object value)
{
    //Cycle through manager.Context            
    for (int iIndex = 0; manager.Context[iIndex] != null; iIndex++)
    {
        object context = manager.Context[iIndex];

        if (context is StatementContext)
        // Get CodeStatementCollection objects from StatementContext
        {
            ObjectStatementCollection objectStatementCollection =
                ((StatementContext)context).StatementCollection;

            // Get each entry in collection.
            foreach (DictionaryEntry dictionaryEntry in objectStatementCollection)
                // dictionaryEntry.Key is control or component contained in CustomForm descendant class
                // dictionartEntry.Value is CodeDOM for this control or component
                if (dictionaryEntry.Value is CodeStatementCollection)
                    DoSomethingWith((CodeStatementCollection)dictionaryEntry.Value);
        }

        //Do something with each collection in manager.Context:
        if (context is CodeStatementCollection)
            DoSomethingWith((CodeStatementCollection)context);
    }

    // Let the default serializer do its work:
    CodeDomSerializer baseClassSerializer = (CodeDomSerializer)manager.
        GetSerializer(value.GetType().BaseType, typeof(CodeDomSerializer));
    object codeObject = baseClassSerializer.Serialize(manager, value);

    // Then, modify the generated CodeDOM:
    if (codeObject is CodeStatementCollection)
        DoSomethingWith((CodeStatementCollection)codeObject);

    // Finally, return the modified CodeDOM:
    return codeObject;
} 
```

# forms - 如何通过 cURL 重现请求

> ID：10272124
> 
> 赞同：2
> 
> 时间：2012-04-22T21:05:26.963
> 
> 标签：forms, cookies, curl, firebug, query-parameters

我想捕捉参数是如何发送的。通常我所做的是发出请求并在 Firebug 的参数选项卡上检查发送的参数是什么。但是，当我尝试在以下站点 ( [http://www.infraero.gov.br/voos/index_2.aspx](http://www.infraero.gov.br/voos/index_2.aspx) ) 上执行此操作时，它不起作用 - 我看不到参数是什么使用 curl 重复此请求。我怎么才能得到它？我不确定，但我认为正在使用 cookie。

**编辑**

我能够获得请求内容，但无法理解。它似乎使用 javascript 来生成正确的请求。如何通过 cURL 重现此请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T01:58:19.040

你看到这个以前的问题[cURL post data to asp.net page 了](https://stackoverflow.com/questions/5384655/curl-post-data-to-asp-net-page)吗？这可能会回答那里的问题（我所做的只是搜索“ASP.NET cURL”）。而这个：[Unable to load ASP.NET page using Python urllib2](https://stackoverflow.com/questions/5380638/unable-to-load-asp-net-page-using-python-urllib2)谈到了 Python，但它以一种应该转换为 cURL 的方式接近它。

但是对于我的 0.02 美元，我不会费心尝试解开 ASP.NET 和 __VIEWSTATE 以及 javascript。使用 cURL 是绝对要求吗？

我认为你最好使用一个更像真正的浏览器并且理解 javascript 的客户端。这有点工作，但并不像听起来那么糟糕。我以前用[http://watirwebdriver.com/](http://watirwebdriver.com/)和一个简短的 Ruby 脚本做过这个。这是使用[Python 和 Mechanize](https://stackoverflow.com/questions/6116023/screenscaping-aspx-with-python-mechanize-javascript-form-submission)的方法（这可能更轻量级）。 [http://phantomjs.org/](http://phantomjs.org/)是您使用 javascript 编写脚本的另一个选项。如果您在 Google 上搜索“Scraping ASP.NET”，您会发现这是一个常见问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:18:36.657

您没有说您希望如何完成，但您可以使用 curl -d name1=contents1&name2=contents2 [TARGETURL] 等简单地发送请求。

请注意，您可能首先需要获取主页并提取“__VIEWSTATE”表单字段并提交回该（非常大的）内容以使您的提交被接受。

# php - 插入...重复键更新 - 重复插入

> ID：10272126
> 
> 赞同：0
> 
> 时间：2012-04-22T21:05:49.880
> 
> 标签：php, mysql

在我的文档表中，我有： `id (auto int index), user_id (P.key and links to other table), Doc_Name, abstract`

当我使用下面的代码时，它只是插入另一行，所以当它应该更新时，我有两个相同的 user_id。显然 id 只是在数量上进行，因为它是 auto int ，我不确定这是否与它为什么不起作用有关。

```
 $the_query = sprintf("INSERT INTO `document` (`user_id`,`Doc_Name`,`abstract`)
 VALUES ('%d','%s','%s')",'$user_id', '$Doc_Name', '$abstract')
 ON DUPLICATE KEY UPDATE
 user_id=user_id+'$user_id',
 Doc_Name=Doc_Name+'$Doc_Name',
 abstract=abstract+'$abstract' "
 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:09:01.963

货物崇拜编程？在没有任何`%`占位符的情况下使用 sprintf() 只是......错误。同样，为什么要在更新的字段上添加？

MySQL`concat()`用于连接。`+`纯粹是数学运算。做`'a' + 'a'`不给你`aa`，你会得到`0`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:13:53.937

如果`user_id`是表中的唯一字段，您的查询应如下所示：

```
$query = sprintf("
INSERT INTO
    `document`(`user_id`, `Doc_Name`, `abstract`)
VALUES
    ('%s', '%s', '%s')
ON DUPLICATE KEY UPDATE
    `Doc_Name` = VALUES(`Doc_Name`),
    `abstract` = VALUES(`abstract`)
", $user_id, $Doc_Name, $abstract); 
```

# design-patterns - 编译器中的静态链接问题

> ID：10272127
> 
> 赞同：0
> 
> 时间：2012-04-22T21:06:02.760
> 
> 标签：design-patterns, static, compiler-optimization, chain

对使用静态链访问非局部变量的一种批评是，对超出静态父级范围的变量的引用比对局部变量的引用成本更高。必须遵循静态链，每个封闭范围从引用到声明一个链接。幸运的是，在实践中，对远距离非局部变量的引用很少见，所以这不是一个严重的问题。对静态链方法的另一个批评是，对于时间要求严格的程序，程序员很难估计非本地引用的成本，因为每个引用的成本取决于引用之间的嵌套深度和范围。宣言。使这个问题更复杂的是，后续的代码修改可能会改变嵌套深度，从而改变一些引用的时间，

这种方法还有其他潜在问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:37:38.150

这个问题听起来很熟悉（如果你愿意的话，就像家庭作业一样），所以我将采取谨慎的态度来回答并告诉你的搜索重点。

静态链接实现静态作用域。一个是概念，另一个是这个概念是如何实现的。我建议使用代数的关联属性并从那里开始。:)

以防万一静态范围需要一些额外的澄清： [http ://hoolihan.net/blog-tim/2009/02/17/static-vs-dynamic-scope/](http://hoolihan.net/blog-tim/2009/02/17/static-vs-dynamic-scope/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T00:24:09.597

排除的两个问题是： 如果引用和被引用变量的声明之间的范围数很大，则非本地引用很慢。时间关键的代码很困难，因为非本地引用的成本是不相等的，并且可以随着代码升级和修复而改变。

但是，必须为每个子程序调用和返回修改静态链。子程序调用所需的操作很复杂。尽管在编译时很容易确定正确的父作用域，但必须在调用时找到父作用域的最新激活记录实例。通过静态链的漫长步行将是开销。已经开发了一些静态链的替代方案，最值得注意的是一种使用称为显示的辅助数据结构的方法（静态链更好，除非显示可以保存在寄存器中）。然而，没有发现任何替代方法优于静态链方法，静态链方法仍然是最广泛使用的方法。此外，在动态范围界定方面也具有优势的深度访问在创建动态链接时以类似的方式起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T07:43:36.067

这似乎是小事一桩。

我必须为 Modula-3 C 后端实现这个。

所以我有意见：

*   您可以摊销成本。如果在函数中频繁访问“uplevel local”，您可以将其地址缓存在本地/寄存器中。我没有实现这一点。
*   这是极其罕见的东西。
    *   支持这一点的编程语言很少见（Modula-3。Modula-2？Pascal？不是 C、C++、Rust、Go 中的任何一种。）
    *   在这些语言中，嵌套函数相当少见。
    *   在这些嵌套函数中，访问上层局部变量的情况更加罕见。
    *   然后很少对性能敏感。

所以它从来都不重要。

我不明白什么是“显示”与“静态链”。这些不是一回事吗？

# ios - iPhone 上的人脸识别

> ID：10272129
> 
> 赞同：28
> 
> 时间：2012-04-22T21:06:22.480
> 
> 标签：ios, opencv, computer-vision

如何在 iPhone 上进行面部识别。有人可以为我提供参考/文章以指出我正确的方向吗？我进行了研究并意识到我需要先进行人脸检测以提取图像，然后通过将其与数据库中的其他图像进行比较来进行人脸识别。

我已经意识到我已经通过使用 OpenCV 或使用 iOS 5.0 及更高版本来检测人脸来进行人脸检测。我不确定面部识别（我计划将图像存储在远程数据库中，然后与远程数据库进行比较）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-22T22:01:34.920

**人脸检测**

我会使用 Open CV 中可用的 Haarcascades 来执行快速准确的人脸检测。

[http://opencv.willowgarage.com/wiki/FaceDetection](http://opencv.willowgarage.com/wiki/FaceDetection)

**人脸识别**

我会使用诸如主成分分析（PCA）又名特征脸之类的方法。

[http://www.cognotics.com/opencv/servo_2007_series/part_5/index.html](http://www.cognotics.com/opencv/servo_2007_series/part_5/index.html)

该链接显示了有关如何使用 OpenCV 的教程 - 我认为这是为 C 编写的，但我相信您可以获得它的基本要点。

如果你觉得勇敢，你也可以考虑自己实现它（还不错）......

[http://www.face-rec.org/algorithms/PCA/jcn.pdf](http://www.face-rec.org/algorithms/PCA/jcn.pdf)

[http://blog.zabarauskas.com/eigenfaces-tutorial/](http://blog.zabarauskas.com/eigenfaces-tutorial/)

**数据库**

我实际上做了一些与你类似的事情，尽管在 PC 上不是 iPhone，但它仍然是相同的概念。我将所有图像作为 Blob 数据类型存储在数据库中，然后在必要时将它们加载到我的程序中。

**编辑**

数据库是系统中一个特别棘手的部分，因为这是最大的瓶颈所在。在我的应用程序中，我将执行以下步骤...

1.  打开应用程序并从数据库中获取训练图像
2.  根据这些图像生成训练集
3.  一旦完成 1 和 2，系统就会非常快，因为它只是针对训练集执行识别。

对我来说幸运的是，我的数据库服务器位于 LAN 上，因此速度不是问题，但是我可以理解为什么您会遇到问题，因为在移动设备上您的数据连接（速度/带宽）有限。您可以压缩图像，但是由于图像质量降低，这可能会导致识别率降低，并且您必须在设备上进行解码。还有一个问题是如何将远程数据库暴露给应用程序，但是我相信这可以使用 PHP 和 JSON（以及其他技术，见下文）。

[从远程数据库中检索数据](https://stackoverflow.com/questions/6840779/retrieving-data-from-a-remote-database)

也许您可以与数据库进行初始同步，以便将图像缓存在手机上？无论如何，我认为您可能必须以某种方式将图像保存在手机上。

找出将识别数据/图像存储在数据库中的最佳方法是我面临的最大挑战之一，所以我很想知道你是否找到了一个好的方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-23T00:38:39.870

正如您所指出的，使用 iOS 5 和[`CoreImage.framework`](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html). 快速示例：

```
CIImage *image = [CIImage imageWithCGImage:image_ref];
NSDictionary *options = [NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy];
CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:options];
NSArray *features = [detector featuresInImage:image];

for (CIFaceFeature *feature in features)
{
  CGRect face_bounds = [feature bounds];
  CGPoint mouth_position = [feature mouthPosition];
  // do something with these values
} 
```

关于你问题的第二部分（即面部*识别*），我将把它留给比我更有资格的人来回答。:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-28T13:08:48.927

您可能想看看 Pedro Centieiro 的[midian](https://github.com/pcentieiro/midian)项目，它使用 OpenCV 在 iOS 5 上执行人脸识别。它在 github 上：

*   [https://github.com/pcentieiro/midian](https://github.com/pcentieiro/midian)

它使用了我的部分[libfacerec](https://github.com/bytefish/libfacerec)，因此它支持特征脸、Fisherfaces 和局部二进制模式直方图以进行人脸识别。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T21:11:46.990

人脸识别可以作为机器学习算法来实现。[本书](https://rads.stackoverflow.com/amzn/click/com/0898716268)有一章描述了这个任务以及如何实现它。值得一读！

它使用**单值分解**(SVD)，更具体地说是[张量 SVD 方法](http://en.wikipedia.org/wiki/Singular_value_decomposition#Tensor_SVD)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-23T09:46:20.713

**我们有以下人脸识别api：-**

```
1\. OpenCV

2\. Kairos

3\. CraftarAR

4\. AAFaceDetection

5\. MoodMe 
```

在我看来`CraftAR`，如果您想在离线应用程序中使用，并且如果您想在线使用，那`Kairos`是最好的。同时`OpenCV`也是一个著名且可靠的选择。

OPENCV 最大的优势是它是开源的。

请在 google 上搜索这些以获取更多详细信息，并查看 github 示例以了解这些 api 是如何工作的。

# mongodb - MongoDB 和 Mongolab.com

> ID：10272130
> 
> 赞同：1
> 
> 时间：2012-04-22T21:06:22.713
> 
> 标签：mongodb, mongodb-php, mlab

最近我发现了 noSQL 数据库[MongoDB](http://www.mongodb.org/)的强大功能。经过大量的试验和错误，我能够将它与 wampserver 一起安装在我的电脑上。它运行平稳。现在我想问的问题是，如果我想在我的共享主机计划中集成[Mongolab](https://mongolab.com)提供的 MongoDB 服务，是否有任何可用的类可以帮助我连接到数据库？就像 php 和 mongodb 的驱动程序的 php 类版本。由于没有 root 访问权限，因此无法在我的主机上安装驱动程序。那么是否有一个原始类可以替代驱动程序 dll？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:50:33.053

如果您无法安装驱动程序，那么 MongoLab 提供的 REST 接口是您最好的选择——任何可以发送/接收 HTTP 请求的语言都可以使用 REST：

[http://support.mongolab.com/entries/20433053-rest-api-for-mongodb](http://support.mongolab.com/entries/20433053-rest-api-for-mongodb)

# objective-c - 如何将 Hexa-Tri-Decimal 数字转换为目标 c 中的 int？

> ID：10272131
> 
> 赞同：0
> 
> 时间：2012-04-22T21:06:23.227
> 
> 标签：objective-c, base-conversion

Hexa-Tri-Decimal 数字是 0-9 和 AZ。我知道我可以使用 NSScanner 从十六进制转换，但不确定如何转换 Hexa-Tri-Decimal。

例如，我有一个带有“0XPM”的 NSString，int 值应该是 43690，“1BLC”应该是 61680。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T21:47:38.080

Objective C 建立在 C 之上，幸运的是，您可以使用那里的函数来完成转换。您正在寻找的是 strtol 或它的兄弟函数之一。如果我没记错 strtol 最多可以处理base36（您指的十六进制三进制）。

[http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/](http://www.cplusplus.com/reference/clibrary/cstdlib/strtol/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:49:14.383

我只能考虑使用 C 字符串来执行此操作，因为它们可以更轻松地访问单个字符。

这似乎是一个需要解决的有趣问题，所以我尝试编写它：

```
int parseBase36Number(NSString *input)
{
    const char *inputCString = [[input lowercaseString] UTF8String];
    size_t inputLength = [input length];
    int orderOfMagnitudeMultiplier = 1;

    int result = 0;

    // iterate backward through the number
    for (int i = inputLength - 1; i >= 0; i--)
    {
        char inputChar = inputCString[i];
        int charNumericValue;

        if (isdigit(inputChar))
        {
            charNumericValue = inputChar - '0';
        }
        else if (islower(inputChar))
        {
            charNumericValue = inputChar - 'a' + 10;
        }
        else
        {
            // unhanded character, throw error
        }

        result += charNumericValue * orderOfMagnitudeMultiplier;

        orderOfMagnitudeMultiplier *= 36;
    }

    return result;
} 
```

注意：我根本没有测试过这个，所以请注意并告诉我它是怎么回事！

# android - loadNativeCode 未注册

> ID：10272132
> 
> 赞同：0
> 
> 时间：2012-04-22T21:06:23.827
> 
> 标签：android, android-ndk

我尝试运行一个 android 应用程序，它在本机中实现了它的部分代码。它确实找到了共享库，但是当它尝试在模拟器中运行它并调用它时，`loadNativeCode`我得到：

```
AndroidRuntime(1342): java.lang.UnsatisfiedLinkError: loadNativeCode 
```

就我跟踪代码而言，它似乎错过了`register_android_app_NativeActivity`设置`loadNativeCode`映射的调用。但由于这是在运行时完成的，我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:04:59.173

```
JNI
loadNativeCode native function MUST format as:

Static way:
JNIEXPORT void JNICALL Java_com_tapir_android_jniutils_test_MainActivity_emptyf(JNIEnv *env, jobject obj)
{
...
}
package name is com.tapir.android.jniutils.test
class name is MainActivity
function name is emptyf

Dynamic way,use RegisterNatives to register your native function in JNI_onLoad function

JNINativeMethod nm;
nm.name = "emptyf";
/* method descriptor assigned to signature field */
nm.signature = "()V";
nm.fnPtr = native_emptyf;
env->RegisterNatives( cls, &nm, 1);

native_emptyf MUST like as 
void native_emptyf(JNIEnv *env, jobject obj)
{
...
}

hope can help u 
```

# php - 在 PDO::commit 之后使用 PDOStatement::rowCount 结果？

> ID：10272134
> 
> 赞同：8
> 
> 时间：2012-04-22T21:06:27.627
> 
> 标签：php, mysql, transactions, pdo, pdostatement

在 MySQL 文档中，有一条关于`mysql_affected_rows`在事务提交后使用的说明：http: [//php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

> **注意：事务**
> 如果您使用事务，则需要在 INSERT、UPDATE 或 DELETE 查询之后调用**mysql_affected_rows() ，而不是在 COMMIT 之后。**

`PDOStatement::rowCount`但是，文档 上没有这样的注释： [http ://www.php.net/manual/en/pdostatement.rowcount.php](http://www.php.net/manual/en/pdostatement.rowcount.php)

这是否意味着在使用对象时，在 INSERT、UPDATE 或 DELETE 查询之后提交不会影响受影响的行数`PDO`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T16:08:08.213

每个执行的查询都会返回一个 PDOStatement。您可以随时在代码中使用 PDOStatement->rowCount()（在事务期间或之后，回滚/提交无关紧要）。每个对象都负责维护自己。

mysql_affected_rows 有该事务注释的原因是因为它只知道单个 mysql 连接资源。这意味着当您完成事务（提交/回滚）时，新查询已发送到数据库，从而改变正在处理受影响行数的结果。

# jquery - 固定 jquerymobile 中页眉、页脚和内容的宽度和高度

> ID：10272136
> 
> 赞同：1
> 
> 时间：2012-04-22T21:06:30.613
> 
> 标签：jquery, asp.net, mobile

我正在使用 asp.net 学习 jquerymobile。我尝试了有关固定页眉、页脚和内容的所有提示，包括带有固定选项的选项。但我仍然没有得到具有高度的固定页眉和页脚。请帮助我完成代码。

关于，D.Vasanth

# java - 确定密码——循环查找字符——使用 StringBuilder 追加

> ID：10272142
> 
> 赞同：0
> 
> 时间：2012-04-22T21:07:15.977
> 
> 标签：java

```
public class Programming {

   public static void main(String[] args) {
      // Scanner scan = new Scanner( System.in );

      int l = 0;
      StringBuilder password = new StringBuilder();

      l = password.length();
      for (l = 1; l < 100; l++) {
         if (l > 0 || l < 100) {
            System.out.println("Your password has the correct length");
         }
      }
      if (l < 0 || l > 100) {
         System.out.println("Your password does NOT have the correct length");
      }

      for (int i = 0; i < 127; i++) {

      }
   }
} 
```

我想知道如何运行一个循环来找出 PasswordGenerator 类生成的第一个字符。[此处](http://www.technology.heartland.edu/faculty/todds/csci130/assignments/A5_password/doc/index.html)的文档，但每个字符只是 0-127 之间的标准 ASCII 代码，之后我必须附加每个字符以使其成为字符串。密码的长度在 0 到 100（上图）之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:35:49.220

你不需要循环。

一旦你弄清楚如何调用密码生成器类来获取密码字符串中的值，只需使用以下代码来获取第一个字符。

```
char firstCharacter = password.charAt(0) 
```

# javascript - JQuery 插件在大多数浏览器上不显示

> ID：10272144
> 
> 赞同：-2
> 
> 时间：2012-04-22T21:07:40.333
> 
> 标签：javascript, jquery, jquery-plugins

我创建了一个 JQuery 插件来显示可拖动的地图 (xy)。

在 Firefox 上它可以完美运行，但在任何其他浏览器上都存在错误。

错误：通常应在站点加载时显示地图。但是在除firefox之外的所有浏览器上只有一个黑屏，直到你拖动地图，然后它才能工作。

我不知道如何解决这个问题。

示例：http: [//jsfiddle.net/X42Wf/](http://jsfiddle.net/X42Wf/)

我希望你明白我的意思，如果不看示例（不是使用 firefox），运行它然后拖动黑色输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:24:50.943

`innerDiv.css('left')`设置为初始化时（意味着在第`auto`一次拖动之前）。所以在`getVisibleTiles`函数中，`mapX`等于`NaN`所以不执行双for循环

你只需要编辑这个：

```
jQuery('<div/>', {
    id: 'GameMap',
    height: o.InnerDivHeight,
    width: o.InnerDivWidth
}).appendTo(obj); 
```

有了这个：

```
jQuery('<div/>', {
    id: 'GameMap',
    height: o.InnerDivHeight,
    width: o.InnerDivWidth,
    css: {
        left: 0,
        top: 0
    }
}).appendTo(obj); 
```

* * *

此外，如果您想避免对 IE 产生副作用，您应该在对象声明的末尾删除尾随逗号，就像在这两个示例中一样：

```
jQuery('<div/>', {
    id: tileName,
    style: "some CSS string", // <----- remove this comma or it will break on IE
}).appendTo(innerDiv).text(tileName);

jQuery('<div/>', {
    id: 'GameMap',
    height: o.InnerDivHeight,
    width: o.InnerDivWidth, // <----- this one too
}).appendTo(obj); 
```

# database - 是否有任何算法可以创建不需要大量数据库（或与可公开访问的数据库一起使用）的播放列表？

> ID：10272148
> 
> 赞同：1
> 
> 时间：2012-04-22T21:08:11.497
> 
> 标签：database, algorithm, playlist

有没有什么算法可以让我自动创建一个彼此很好的歌曲播放列表——类似于 iTunes Genius 之类的服务——一个开发人员可以实际实现？它应该要么 a) 不需要任何类型的远程收听习惯数据库等，要么 b) 需要这样的数据库，但可以使用免费提供的数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:22:18.260

我不知道 iTunes Genius，但我认为[last.fm](http://www.last.fm)数据库和 API 可能对你有用。每次您看到[任何曲目](http://www.last.fm/music/Anneke%2Bvan%2BGiersbergen%2B%2526%2BDanny%2BCavanagh/_/Teardrop)时，它都会根据其他用户的偏好显示类似曲目的列表。[`track.getSimilar`](http://www.last.fm/api/show/track.getSimilar)使用API 方法可以获得相同的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:59:45.223

我这样做了，我使用了 tomasz 描述的 last.fm 数据库。我没有直接使用“相关艺术家”，而是通过比较与不同艺术家相关的标签来构建我自己的关系图（这不是 lcfseth btw 建议的方法 - 我有相当多的音乐，我想探索“自然的”连接可能不是“正常”播放列表中的共同伙伴；我也不确定相关艺术家的统一程度）。

我还使用本地数据库缓存来自 last.fm 的数据，因为对 api 的调用受到速率限制，并且我尝试使用 api 的其他部分来改进/规范我从 mp3 标签中读取的信息。

生成相关艺术家的有用图表实际上非常困难；很大程度上是因为图中的某些节点自然而然地往往比其他节点更重要。如果您不“平衡”图表，那么您的播放列表将继续返回“重要”艺术家。

最终的结果确实很好，因为音乐的选择在“中心主题”和变奏之间取得了很好的平衡。但是实现一点都没有打磨，图的计算可能需要很长时间（好几个小时），程序在运行时会占用相当多的内存，而且玩 elvis costello 似乎仍然比预期的要多一点； o)

如果您有兴趣，代码位于[http://code.google.com/p/uykfe/](http://code.google.com/p/uykfe/)

从我作为用户的角度来看，最好的部分是它可以“实时”更新罗技媒体服务器（squeezeserver）播放列表，每当列表为空时添加新曲目。从您“手动”选择的任何音乐中继续播放都非常有效。当然，它还可以生成一次性播放列表，最后，通过调整参数，您可以在您的音乐收藏中获得一种“随机漫步”——它会播放相关的曲调，但会慢慢从一种风格转移到另一种风格（事实上，这实际上是“默认”模式——为了让它停留在一个主题上，我需要额外的逻辑来让它偏向于它之前播放的任何音乐）。

ps 另外，将最终图表转储到 gephi 真的很酷——我把它打印出来了，现在它已经固定在墙上了……

pps 我还尝试了 musicbrainz 数据库，从理论上讲，这听起来像是一个很棒的资源。但在实践中，它过于复杂且记录不充分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T03:50:49.750

大多数这些数据库背后的想法是查看其他用户在收听给定歌曲后收听的内容。这些统计数据的准确性取决于用户数量，因此在本地可能很难使用。算法本身并不难实现。另一种方法是根据流派、歌手...对歌曲进行排序，这些信息通常嵌入在歌曲中，但并非总是如此。Winamp有这个功能，但是对老歌不起作用，除非你手动设置信息或使用在线歌曲数据库。

# nhibernate - NHibernate + ActiveRecord + 从不加载映射？

> ID：10272154
> 
> 赞同：0
> 
> 时间：2012-04-22T21:09:24.650
> 
> 标签：nhibernate, activerecord

我将我的类映射到 belongsTo / hasMany / HasAndBelongsToMany / HasManyToAny。QueryOver 我想用来构建我的查询，我不希望 NH 映射自动加载任何，因为我这样做？

注意：在我使用 WCF 时不能解决 Lazy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:28:46.313

发送仅包含您需要的属性的 DTO。然后您可以根据具体情况决定发送或不发送什么。

或者，您可以延迟加载并挂钩到 wcf 以忽略未初始化的属性

```
var proxy = obj.PropertyWithReference as INHibernateProxy;
if (proxy != null && proxy.HibernateLazyInitializer.IsUninitialized)
    // ignore

var coll = obj.SomeCollection as IPersistentCollection
if (coll != null && !coll.WasInitialized)
    // ignore 
```

# android - 从 Android Play 商店获取数据

> ID：10272155
> 
> 赞同：84
> 
> 时间：2012-04-22T21:09:29.817
> 
> 标签：android, google-play

我见过一些使用来自 Android Play 商店的数据的应用程序和网站。例如应用程序或具有顶级应用程序排名的网站等。但是您如何获取数据？从哪里可以解析它？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-23T00:00:11.273

Android Market有一个非官方[的开源 API，](http://code.google.com/p/android-market-api/)您可以尝试使用它来获取所需的信息。希望这可以帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-28T09:28:40.320

免责声明：我来自 42matters，他们已经在[https://42matters.com/api](https://42matters.com/api?utm_source=stackoverflow.com&utm_medium=Referral&utm_campaign=22091127)上提供了这些数据，请随时查看或给我们留言。

正如 lenik 提到的，有一些开源库已经帮助从 GPlay 获取一些数据。如果您想自己构建一个，您可以尝试解析 Google Play App 页面，但您应该注意以下几点：

*   确保您尝试解析的 URL 在 robots.txt 中未被阻止 - 例如[https://play.google.com/robots.txt](https://play.google.com/robots.txt)
*   确保您不经常这样做，如果您这样做太多，Google 会限制您并可能将您列入黑名单。
*   发送正确的 User-Agent 标头以实际表明您是机器人
*   应用程序的页面很大 - 确保您接受 gzip 并请求移动版本
*   GPlay 网站不是一个 API，它并不关心你是否解析它，所以它会随着时间的推移而改变。确保您处理更改 - 例如通过测试以确保您得到预期的结果。

因此，记住获取一个页面元数据是获取页面 html 并正确解析它的问题。使用[JSoup](http://jsoup.org/)，您可以尝试：

```
 HttpClient httpClient = HttpClientBuilder.create().build();
      HttpGet request = new HttpGet(crawlUrl);
      HttpResponse rsp = httpClient.execute(request);

      int statusCode = rsp.getStatusLine().getStatusCode();

      if (statusCode == 200) {
           String content = EntityUtils.toString(rsp.getEntity());    
           Document doc = Jsoup.parse(content);
           //parse content, whatever you need
           Element price = doc.select("[itemprop=price]").first();
      } 
```

对于应该让您入门的那个非常简单的用例。然而，当你想做更多有趣的事情时，事情就变得复杂了：

*   机器人禁止搜索。
*   使应用元数据保持最新是很难做到的。有超过 220 万个应用程序，如果您想每天刷新它们的元数据，则每天有 2.2 个请求，这将 1）立即被阻止，2）花费很多钱 - 如果一个应用程序是 100k，则每天传输 220gb 数据悲观
*   您如何发现新应用
*   您如何获得每个国家/地区的定价，每种语言的翻译

名单还在继续。如果你不想自己做这一切，你可以考虑[42matters API](https://42matters.com/api?utm_source=stackoverflow.com&utm_medium=Referral&utm_campaign=22091127)，它支持查找和搜索、谷歌排行榜、高级查询和过滤器。这适用于 35 种语言和 50 多个国家/地区。

[2]：

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-04-07T23:12:22.457

我编写了一个小的 Node.js 模块来从 Google Play 抓取应用程序和列表数据：[google-play-scraper](https://github.com/facundoolano/google-play-scraper)

```
var gplay = require('google-play-scrapper');

gplay.List({
    category: gplay.category.GAME_ACTION,
    collection: gplay.collection.TOP_FREE,
    num: 2
  }).then(console.log); 
```

结果：

```
 [ { url: 'https://play.google.com/store/apps/details?id=com.playappking.busrush',
    appId: 'com.playappking.busrush',
    title: 'Bus Rush',
    developer: 'Play App King',
    icon: 'https://lh3.googleusercontent.com/R6hmyJ6ls6wskk5hHFoW02yEyJpSG36il4JBkVf-Aojb1q4ZJ9nrGsx6lwsRtnTqfA=w340',
    score: 3.9,
    price: '0',
    free: false },
  { url: 'https://play.google.com/store/apps/details?id=com.yodo1.crossyroad',
    appId: 'com.yodo1.crossyroad',
    title: 'Crossy Road',
    developer: 'Yodo1 Games',
    icon: 'https://lh3.googleusercontent.com/doHqbSPNekdR694M-4rAu9P2B3V6ivff76fqItheZGJiN4NBw6TrxhIxCEpqgO3jKVg=w340',
    score: 4.5,
    price: '0',
    free: false } ] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-22T21:21:09.563

Google Play 商店不提供这些数据，所以网站肯定只是在抓取它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-12T08:21:58.677

这是一个 google chrome 扩展程序，可让您下载**您的**评论：[https ://chrome.google.com/webstore/detail/my-play-store-reviews/ldggikfajgoedghjnflfafiiheagngoa?hl=en](https://chrome.google.com/webstore/detail/my-play-store-reviews/ldggikfajgoedghjnflfafiiheagngoa?hl=en)

# xml - 带有 text() 但没有空格的嵌套元素上的 XPath

> ID：10272158
> 
> 赞同：10
> 
> 时间：2012-04-22T21:09:43.467
> 
> 标签：xml, xpath, xhtml

我的 XHTML 很差，需要用 xpath 解析。它看起来像这样：

```
<div class="foo">
  i need this text
  <br/>
  <br/>
  <span>sometext</span>
</div>

<div class="foo">
  <span>some other text</span>
  <span>sometext</span>
</div> 
```

我想在第一个 div 中选择“我需要这个文本”的所有内容。我的问题是，div 元素包含空格或其他内容，因此 //div[@class="foo"]/text() 也为第二个 div 返回空字符串。我想忽略这些空字段，我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T01:30:51.113

**使用**：

```
//div
   [.//text()
        [normalize-space() = 'i need this text']
   ]
    //text()[normalize-space()] 
```

这会选择文档中 any 的任何非纯空格文本节点后代`div`，即 (the `div`) 具有其规范化字符串值为 string 的文本节点后代`"i need this text"`。

该**[`normalize-space()`](http://www.w3.org/TR/xpath/#function-normalize-space)**函数接受一个字符串（上下文节点的字符串值——如果没有指定参数）并从它产生另一个字符串，其中所有前导和尾随空白字符都被删除，并且任何内部相邻空白字符组被替换为单一空间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-30T07:53:41.240

试试这个选择器：

`//span[@class='glyphicon glyphicon-list mr5']/..[contains(normalize-space(text()),'Applications')]`

# ios - 卡在循环形式 CFRunLoop

> ID：10272164
> 
> 赞同：0
> 
> 时间：2012-04-22T21:10:47.603
> 
> 标签：ios, xcode

视图控制器.h

```
@interface ViewController : UIViewController{
CFSocketRef s;
int connectFlag;
} 
```

视图控制器.m

```
void receiveDataCilent(CFSocketRef cs, 
                   CFSocketCallBackType type, 
                   CFDataRef address, 
                   const void *data, 
                   void *info)
{  

CFDataRef df = (CFDataRef) data;
int len = CFDataGetLength(df);
if(len <= 0) return;

CFRange range = CFRangeMake(0,len);
UInt8 buffer[len];
NSLog(@"Received %d bytes from socket %d\n", 
      len, CFSocketGetNative(cs));
CFDataGetBytes(df, range, buffer);
NSLog(@"Client received: %s\n", buffer); 
NSLog(@"As UInt8 coding: %@", df);
NSLog(@"len value: %d", len);

}

-(void) clientConnect:(int)sender;{

s = CFSocketCreate(NULL, PF_INET, 
                    SOCK_STREAM, IPPROTO_TCP, 
                    kCFSocketDataCallBack, 
                    receiveDataCilent, 
                    NULL);

struct sockaddr_in      sin; 
struct hostent          *host;

memset(&sin, 0, sizeof(sin));

host = gethostbyname("localhost");      

memcpy(&(sin.sin_addr), host->h_addr,host->h_length); 

sin.sin_family = AF_INET;
sin.sin_port = htons(6666);

CFDataRef address;
CFRunLoopSourceRef source;

address = CFDataCreate(NULL, (UInt8 *)&sin, sizeof(sin));
CFSocketConnectToAddress(s, address, 0);

CFRelease(address);

source = CFSocketCreateRunLoopSource(NULL, s, 0);
CFRunLoopAddSource(CFRunLoopGetCurrent(), 
                   source, 
                   kCFRunLoopDefaultMode);
CFRelease(source); 
CFRunLoopRun(); 

}

- (void)viewDidLoad
{
[super viewDidLoad];
}

- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

if(connectFlag == 0 ){
[self clientConnect:1];
}

} 
```

首先我很抱歉弄乱了xcode编程和线程编程的概念我对xcode很陌生，我需要尽快完成我的游戏项目

此代码假设连接到服务器并等待来自服务器的消息。我尝试测试它，它工作正常。在视图中，我有可以按下和更改视图的 IBAction。

但是在我将它实施到我的主要项目之后。它可以运行，但我不能按任何按钮或做任何事情。注销后。它似乎停留在 CFRunLoopRun(); 我认为它陷入了循环，但为什么当我测试它时。它没有卡住吗？

在我的项目中，这段代码是从另一个视图运行的，而不是像我刚刚测试的那样从 ViewController 运行。我不知道为什么它卡在我的项目中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:32:34.857

不要在主线程上自己运行运行循环。主事件循环将运行它。

编辑：我应该说，“在 GUI 应用程序的上下文中”。在命令行工具中，您确实需要自己运行运行循环。

# c++ - map和unorderd_map的C实现区别

> ID：10272165
> 
> 赞同：0
> 
> 时间：2012-04-22T21:10:49.050
> 
> 标签：c++, c, map, unordered-map

我正在将一个小 C++ 程序重写为纯 C，这是一个非常简单的程序，它使用`map`. 我正在使用静态大小的哈希表（包含大小和指向链接节点列表的指针数组的结构）。我无法将以下部分重写为 C

```
#if 1       // switch between 1 and 0
# include <tr1/unordered_map>
  typedef std::tr1::unordered_map<std::string,int>  map_t;
#else
# include <map>
  typedef std::map<std::string,int>  map_t;
#endif 
```

我主要使用哈希函数实现了无序版本，我是这样使用的

```
#if 1    // switch between 1 and 0
    int hash_function(const char *key, int size);
#else
    #define hash_function(key, size) .......
#endif 
```

但现在我不知道宏应该是什么样子，因为我想要订购表格并且我有表格的静态大小。因为我没有使用地图的经验，所以我不知道是否有任何传统的方式来实现这一点。

我想到了将表格用作二维数组，作为简单矩阵，并从上到下逐列填充。

再说一次，有没有更好的传统方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:18:53.307

有序 hashmap 的一个非常典型的实现就是一个常规的 hashmap，它带有一个按顺序遍历所有元素的附加链表。诀窍是在每次插入和删除时都正确地维护这个链表。散列函数不需要（需要）改变 b/w 和有序和无序的 hashmap。

您的二维数组想法的主要问题是它消耗`n*sizeOfHashTable`空间，其中大部分都被浪费了。

如果您正在实现排序映射，您通常采用任何有序的数据结构，如二叉搜索树，并让键（这是您排序的对象）也具有与它们关联的值。然后你根本不使用散列函数。

# vim - 在vim中映射键时nore是什么意思？

> ID：10272167
> 
> 赞同：7
> 
> 时间：2012-04-22T21:11:39.907
> 
> 标签：vim

`nore`在vim中映射键是什么意思？例如，这两个映射有什么区别？

```
:map ddd ddjdd 
```

和

```
:noremap ddd ddjdd 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T21:39:26.347

这意味着映射**不是**n**递归**的。

为了显示，

```
:nmap x dd 
```

`x`假设您在正常模式下映射到`dd`（删除行），以节省一些时间，删除行。一切正常，直到您需要其他映射中的 x（删除字符）来删除两个字符，

```
:nmap c xx 
```

因为现在上层映射真的

```
:nmap c dddd 
```

即将删除两行。

因此，为了保留“原始”映射（vim 键），您可以使用非递归方式进行操作，

```
:nnoremap x dd
:nnoremap c xx 
```

一切正常（映射不......啊，你明白了）......

使用“nore”进行所有映射通常是一个好习惯，因为您永远不知道哪些插件可能依赖于什么，以及使用“普通”映射破坏了哪些 vim 行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T21:48:00.187

这一切都包含在内置文档中

`map`：

> 对于 map 命令适用的模式，将键序列 {lhs} 映射到 {rhs}。然后进一步扫描包含 {rhs} 的结果以查找映射。这允许嵌套和递归使用映射。

并且`noremap`：

> 对于 map 命令适用的模式，将键序列 {lhs} 映射到 {rhs}。不允许映射 {rhs}，以避免嵌套和递归映射。通常用于重新定义命令。{Vi 无此功能}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T21:13:45.493

`nore`代表非递归。它会导致映射的右侧忽略映射。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T21:13:33.073

如果您阅读整个单词，它会有所帮助。“noremap”，如“无重新映射”。这意味着不能更改映射。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-04T01:14:29.097

我认为是`vi`这样一个反直觉的设置，它`map`代表递归映射，而不是明确地添加`re`到递归映射

[https://learnvimscriptthehardway.stevelosh.com/chapters/05.html](https://learnvimscriptthehardway.stevelosh.com/chapters/05.html)

> 什么时候应该使用这些非递归变体而不是它们的正常对应物？
> 
> 总是。
> 
> 不，说真的，总是。
> 
> 使用裸 *map 只是在安装插件或添加新的自定义映射时要求痛苦。

# javascript - .prepend() 结果对每个人都是可见的，不仅对执行操作的人可见

> ID：10272168
> 
> 赞同：-1
> 
> 时间：2012-04-22T21:11:43.827
> 
> 标签：javascript, jquery

当用户单击按钮时，我在页面中使用 .prepend() 操作。

我认为只有点击者才能看到添加到列表中的元素，但是对于所有已经在观看此页面的用户也可以看到它怎么办？

PS：一个很好的例子是facebook的朋友新闻线程（在右栏中），每个人都会看到一个事实。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:14:07.510

DOM 操作完全在您的浏览器中。除非您的 JS 代码通过更新操作来 ping 服务器，并且您的服务器将该数据推送给任何观察者，否则一个用户的浏览器无法“窥探”另一个用户的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:14:45.597

当您说其他用户时，您是指网站的其他用户吗？

如果是这样，那么答案是否定的。只有该用户才能看到 javascript 中对 DOM 所做的任何更改，因为更改仅发生在本地计算机上。无论是否使用 AJAX 都是如此。

这里有一个比喻来帮助你理解。当一个网站给一个用户一个页面时，它就像给那个用户寄一封信。收到这封信（html 文档）的人可以整天进行更改，并且不会影响收到该信函副本的其他任何人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T21:21:50.257

你误解了 jQuery prepend()。它不执行任何 AJAX。它只会在页面上插入新的 HTML。如果它传递了一个现有的 HTML 元素，它将将该元素移动到您要添加到的元素的开头。

例如：

```
// this adds a new paragraph to the beginning of the main content div
$('#mainContentDiv').prepend('<p>New content</p>'); 
```

有关更多信息，请参阅 jQuery API：[jQuery .prepend()](http://api.jquery.com/prepend/)

请注意，除了 Karl Swedberg 的评论之外，您不会在页面上的任何地方找到 AJAX，他指的是 AJAX 文档。

您可能需要使用与 .prepend() 分开的 jQuery.ajax() 之类的东西来更新服务器以供其他用户接收更改。

# vb.net - 使用线程访问更多组件

> ID：10272180
> 
> 赞同：0
> 
> 时间：2012-04-22T21:13:47.573
> 
> 标签：vb.net, multithreading, backgroundworker

我正在尝试使用线程访问一些组件。我的表格如下所示：

![在此处输入图像描述](../Images/2016d1358b0e2a68957b037e7f86c22b.png)

我的来源看起来像这样：

```
 Private Sub btnGO_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGO.Click
      pbAction.Value = 0
      bgwProcess.RunWorkerAsync()
      Me.Cursor = Cursors.WaitCursor
   End Sub

   Private Sub btnExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
      Application.Exit()
   End Sub

   Private Sub bgwProcess_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles bgwProcess.DoWork
      'a job consists in retrieving data, populating a listview and update the progressbar
      'start job 1.1
      'do job 1.1 -> ProgressBar1.value+=1
      'do job 1.2 -> ProgressBar1.value+=1
      'do job 1.3 -> ProgressBar1.value+=1

      'start job 2.1 ProgressBar1.value=1
      'do job 2.1 -> ProgressBar2.value+=1
      'do job 2.2 -> ProgressBar1.value+=1

   End Sub

   Private Sub bgwProcess_RunWorkerCompleted(ByVal sender As System.Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles bgwProcess.RunWorkerCompleted
      Me.Cursor = Cursors.Default
   End Sub 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:13:07.170

我创建了一个在 _doWork 中填充的类，并将其发送到 _ProgressChanged 过程，在那里我可以对表单上的组件做任何我想做的事情：

```
Public Class myObj
      Public action As String
      Public msg As String
      Public pbAction As Integer
      Public pbMsg As Integer
   End Class

...

   Private Sub btnGO_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGO.Click
      bgwProcess.RunWorkerAsync()
      Me.Cursor = Cursors.WaitCursor
   End Sub

   Private Sub btnExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs)
      Application.Exit()
   End Sub

   Private Sub bgwProcess_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles bgwProcess.DoWork
      Dim op As New myObj

      op.action = "my action"
      op.msg = "My result: Done"
      op.pbAction = 1
      op.pbMsg = 1
      bgwProcess.ReportProgress(0, op)

   End Sub

   Private Sub bgwProcess_ProgressChanged(ByVal sender As System.Object, ByVal e As System.ComponentModel.ProgressChangedEventArgs) Handles bgwProcess.ProgressChanged
      Dim obj As New myObj
      obj = DirectCast(e.UserState, myObj)

      myListView.BeginUpdate()
      Dim li As New ListViewItem(obj.action, 0)
      li.SubItems.Add(obj.msg)

      myListView.Items.AddRange(New ListViewItem() {li})
      myListView.EndUpdate()
      myListView.EnsureVisible(myListView.Items.Count - 1)
      myListView.Refresh()

      pbAction.Value = obj.pbAction
      pbTotal.Value = obj.pbMsg
   End Sub

   Private Sub bgwProcess_RunWorkerCompleted(ByVal sender As System.Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles bgwProcess.RunWorkerCompleted
      Me.Cursor = Cursors.Default
   End Sub 
```

# javascript - subdir 或 parentdir 中 cookie 的读/写权限

> ID：10272182
> 
> 赞同：0
> 
> 时间：2012-04-22T21:13:54.307
> 
> 标签：javascript, jquery, browser, cookies, session-cookies

假设 cookie 设置为`/foo`使用

```
Set-Cookie: mytoken=12345; Path="/foo" 
```

以下哪些页面可以**读取**，哪些可以**写入/删除**此 cookie？

```
/page.html
/foo/page.html 
/foo/bar/page.html
/baz/page.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:15:07.037

**读/写/删除**：

```
/foo/page.html 
/foo/bar/page.html 
```

# ruby-on-rails - 在 Win 中获取测试输出（点而不是测试）

> ID：10272188
> 
> 赞同：0
> 
> 时间：2012-04-22T21:14:48.440
> 
> 标签：ruby-on-rails, rake

当我在 Windows 下运行 rake test 时，我看到的是点而不是测试名称。不过，所有测试都通过了。输出示例：

```
>rake test
# Running tests:
. . . . . . .
Finished tests in <...>
7 test, 10 alterations, 0 errors, 0 failures, 0 skips 
```

和`test/unit/product_test.erb`内容：

```
require 'test_helper'

class ProductTest < ActiveSupport::TestCase
  test 'product attributes must not be empty' do
    product = Product.new
    assert product.invalid?
    assert product.errors[:title].any?
    assert product.errors[:description].any?
    assert product.errors[:price].any?
    assert product.errors[:image_url].any?
  end
end 
```

Rails 版本：3.2.1，Ruby 版本：1.9.3

没有发现任何有用的东西。将不胜感激任何建议/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T21:04:59.297

一段时间后回到这个问题。我所需要的——“转”宝石。和一个'minitest'来使用它。

将此添加到 Gemfile，我的输出变得更漂亮...

# javascript - 如何自动将JS文件放入AJAX调用页面？

> ID：10272191
> 
> 赞同：0
> 
> 时间：2012-04-22T21:15:41.117
> 
> 标签：javascript, ajax, ruby-on-rails-3, file

在我的应用程序中，我包含了所有需要的 JS 文件（我的脚本、Twitter Bootstrap 等库等）。

问题是，当我有一个通过 AJAX 调用的请求时，被调用的页面中不包含 JS 文件，这些文件包含在我的应用程序中，我必须将它们包含到被调用的页面中。

示例：**my_scripts.js**包含许多 JS 函数。

链接到通过 AJAX 调用的页面

```
<a href="/articles/create_new" data-remote="true>Create New Article</a> 
```

**/views/articles/_create_new.html.haml**

```
...some content of this file.. #here doesn't work the functions from the file "my_scripts.js" 
```

当我放入**/views/articles/_create_new.html.haml**这个链接

```
= javascript_include_tag "my_scripts"
...some content of this file.. 
```

所以然后在**/views/articles/_create_new.html.haml**那些 JS 函数工作。

我想问你，如果存在任何方式，如何自动将所有 JS 文件放在我的每个 AJAX 页面中，因为总是将 JS 文件包含到 AJAX 页面中不是好方法...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:23:12.180

我将通过以下三种方式之一实现这一目标：

**jQuery**

从[http://api.jquery.com/load/](http://api.jquery.com/load/)：

> 脚本执行 当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。两种情况的示例如下所示：
> 
> 在这里，作为文档的一部分加载到#a 中的任何 JavaScript 都将成功执行。
> 
> `$('#a').load('article.html');`
> 
> 但是，在以下情况下，正在加载到 #b 的文档中的脚本块被剥离并且不被执行：
> 
> `$('#b').load('article.html #target');`

基本上，您可以将 JS 引用添加到 Ajax 请求返回的 HTML，然后 jQuery 将执行它们。

**RequireJS 或类似的**

与其直接返回 HTML，不如将 HTML 作为 JSON 包的一部分返回，该包还包含一组脚本引用：

```
{
    html: '<p>stuff</p>',
    scriptRefs: [ 'js/one.js', 'js/two.js' ]
} 
```

然后，我将使用 RequireJS 之类的东西遍历 scriptRefs 数组。

**只需将代码添加到基本页面**

老实说，我更有可能这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:23:39.147

使用像[RequireJS](http://requirejs.org/)或[$cript](http://dustindiaz.com/scriptjs)这样的脚本加载器。

让您的页面也回复 2 件事：要加载的内容和脚本。最好使用 JSON，例如：

```
{
    "content" : "content here",
    "scripts" : ["an","array","of","script","urls"]
} 
```

然后当返回数据时，解析和绘制内容，然后使用脚本加载器加载脚本。实际上，您可以制作自己的脚本加载器。这只是动态创建`<script>`标签的问题，将其放入`<head>`并给它一个`src`

# notepad++ - Notepad++ 在下面用 Sift + Enter 插入行，就像在 Eclipse 中一样？

> ID：10272192
> 
> 赞同：3
> 
> 时间：2012-04-22T21:15:44.920
> 
> 标签：notepad++

即使您的光标位于当前行的中间，此快捷方式也应该可以使用。就像在带有`SHIFT`+的 Eclipse 中一样`ENTER`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T21:25:04.660

你可以定义一个宏：

1.  转到宏->开始录制
2.  按`End`，然后`Enter`
3.  转到宏->停止录制
4.  宏 --> 保存当前录制的宏
5.  选择你的热键，例如`Shift`+ `Ctrl`+ `Enter`（只是`Shift`+`Enter`对我来说是不可能的）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-04T18:51:31.223

我知道这是一篇已有 6 年历史的帖子，但我只是想出了如何做到这一点，这是谷歌针对这个问题的第一次点击。

Notepad++ 不允许您将“shift + enter”分配给快捷方式，但您可以强制它这样做。假设 Windows >= 7，快捷方式配置文件位于`C:\Users\<user name>\AppData\Roaming\Notepad++\shortcuts.xml`. 在内部命令节点下，添加该行（或替换对应的快捷方式id）`<Shortcut id="42058" Ctrl="no" Alt="no" Shift="yes" Key="13" />`

请务必更改具有相同组合键的 Scintilla 快捷方式，`<ScintKey ScintID="2329" ... />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-31T12:08:51.033

就像@Lightfire228 我知道这是一个老问题，但我决定提供一步一步的方法来做到这一点：

1.  打开记事本++并从宏菜单中点击“开始录制”
2.  按`"End"`键，然后按`"Enter"`
3.  从宏菜单点击`'Stop Recording'`
4.  从宏菜单点击`'Save Current Recorded Macro..'`
5.  在打开的窗口中为快捷方式选择一个名称`'NewLine With Shift+Enter'`会很好。并填充`Alt`、`Shift`框并`Enter`从下拉菜单中选择。
6.  打开`"C:\\Users\Your-Username\AppData\Roaming\Notepad++\shortcuts.xml"`
7.  `'<Macros>'`您应该在标签下找到您的快捷方式。我的在第 8 行。该行应该像“ `<Macro name="NewLine With Shift+Enter" Ctrl="no" Alt="yes" Shift="yes" Key="13">`”
8.  将 Alt 值从 ' `yes`' 更改为 ' `no`'
9.  保存文件
10.  转到宏菜单并选择`'Modify Shortcut/Delete Macro'`
11.  从打开的窗口转到`'Scintilla commands'`选项卡
12.  查找`'SCI_NEWLINE'`行（我的是第 9 行）
13.  双击它并`Shift+Enter`从打开的窗口中删除该行
14.  重新启动记事本++，你就完成了。

刚为我工作:)

# c#-4.0 - 使用 Parallel.Invoke 执行带参数的方法

> ID：10272193
> 
> 赞同：5
> 
> 时间：2012-04-22T21:15:46.480
> 
> 标签：c#-4.0, action, parallel-processing

我已经定义了一个数组`Action<string, int, double, double>`并希望使用`Parallel.Invoke()`. 有什么方法可以将我的动作转换为无参数的动作，以便我可以做到这一点，还是有其他方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T22:10:13.693

你可以试试这个：

```
Parallel.Invoke(() =>
    {
        YourFirstAction(param1, param2, param3, param4);
    },  // close first Action
    () =>
    {
        YourSecondAction(param1, param2, param3, param4);
    }//close second Action
); //close parallel.invoke 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T01:55:57.257

如果您可以在不发送参数值的情况下执行它们，我对为什么动作有参数感到困惑。最好将 Parallel.ForEach 与默认值一起使用：

```
Action<string, int, double, double>[] actions;

// Action array, actions, set somewhere in code.

Parallel.ForEach(actions, action => action(string.Empty, 0, 0, 0)); 
```

如果要发送参数，请替换您认为合适的值。

我在测试中使用了以下操作：

```
Parallel.For(0, actions.Length, index => actions[index] = (s, i, d1, d2) => Thread.Sleep(100));
Parallel.For(0, parameterless.Length, index => parameterless[index] = () => Thread.Sleep(100)); 
```

长度为 20 的数组的结果（以秒为单位）：

并行调用：0.3000709

Parallel.ForEach：0.3022143

常规 for 循环：2.0000706

所以 Parallel.Invoke 确实具有使用无参数操作的优势，这对性能有轻微影响，但影响不大。

只是为了好玩，我使用 Parallel.ForEach 测试了无参数的 Action 数组，结果与 Parallel.Invoke 几乎相同，结果为 0.300979 秒。

# jquery - 根据事件（悬停）在父 div 中选择特定 div

> ID：10272196
> 
> 赞同：0
> 
> 时间：2012-04-22T21:15:55.773
> 
> 标签：jquery, jquery-selectors

所以，我有一个父 div，有 7 个子 div。这 7 个 div 中的每一个都是一个容器，将在悬停或单击时切换。如何将事件附加到 7 个 div 之一，以便仅显示其内容？现在，如果我将鼠标悬停，则会显示所有 div 的内容。我需要悬停并只显示悬停的 div 的内容。

```
$('div#HoldsAll').on('hover', function(){
$('div.none').show();
});

<div id="HoldsAll">

<div class="none">
<p>A hover over this parent div should display only this</p>
<p>and this</p>
<p>and this too</p>
</div>
<div class="none">
<p>This should remain hidden</p>
</div>
<div class="none">
<p>This should remain hidden, too</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:20:38.680

您应该对一个唯一元素仅使用一个唯一 ID，请使用`class="none"`：

如果具有 none 类的 div 的内容隐藏在没有悬停的元素中，请尝试以下操作：

CSS：

```
.none p {display: none;}
span {color: red} 
```

HTML：

```
<div id="HoldsAll">

<div class="none">
 <span>show</span>    
 <p>A hover over this parent div should display only this</p>
 <p>and this</p>
 <p>and this too</p>
 </div>

 <div class="none">
 <span>show</span>    
 <p>This should remain hidden</p>
 </div>

 <div class="none">
 <span>show</span>    
 <p>This should remain hidden, too</p>
 </div>

</div> 
```

jQuery：

```
 $(function () {            
   $('.none').hover(function () {
      $(this).find("p").show();
   }, function () {
      $(this).find("p").hide();
   });
}); 
```

[http://jsfiddle.net/faNtu/](http://jsfiddle.net/faNtu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:18:01.527

您有重复的 ID ( `id="none"`)，这是不允许的，并且可能导致意外行为，例如您在此处看到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:53:16.990

好吧，你需要一些东西来让它工作，所以你`.none`需要一个实际的大小才能让你的小鼠标指针在它上面，但可能是这样的：

```
$('.none', '#HoldsAll').on({
    mouseenter: function() {
        $('p', this).show();
    },
    mouseleave: function() {
        $('p', this).hide();    
    }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/JDYmj/1/)

# git - 制作一个 Git Bash “Shell”脚本来执行已经存在的命令

> ID：10272199
> 
> 赞同：-3
> 
> 时间：2012-04-22T21:16:10.250
> 
> 标签：git, bash, command, execute

我想制作一个“脚本”来在 git bash 中为我执行一些命令。然后我会启动 git bash 并输入 git myScriptName 并按回车键，它会执行：

```
 cd myProjectFolderName (ENTER)
    git init (ENTER)
    git add -A (ENTER)
    git commit -m 'letMeWriteSomeThingHereAndIHitEnterAndItEndsCommentWith' (ENTER)
    git push myRemoteName myBranch (ENTER) 
```

然后什么也不做，我也想这样做：

```
 cd myProjectFolderName (ENTER)
    git init (ENTER)
    git pull myRemoteName myBranch (ENTER) 
```

然后什么也不做。

非常感谢您对此提供的任何帮助，如果有人甚至继续制作脚本，那将是一个加分项：）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:21:40.457

你可以从这个开始：

*gitCommands.sh*：

```
function go_on {
  echo -ne "$1 [Y, n]\r"
  read answer
  if [ "$answer" = "n" ]; then
    echo "exit"
    exit 0
  fi
}

function call {
  go_on "$1"
  $1
  echo ""
}

call "cd myProjectFolderName"

echo "Type commit message"
read commit_message
call "git commit -m $commit_message" 
```

该函数`call`执行函数“go_on”。这会在命令行上回显字符串参数（例如`cd myProjectFolderName [Y, n]`），然后等待您的输入。如果您键入 Y 或简单地按回车，脚本将继续（执行此命令）。如果您键入“n”，脚本将停止。

# asp-classic - .ASP 中的脚本以在服务器上创建新页面

> ID：10272200
> 
> 赞同：0
> 
> 时间：2012-04-22T21:16:19.170
> 
> 标签：asp-classic

我想制作一个 ASP 脚本，它可以在网络服务器上创建一个新页面，并告诉它新的 .asp 文件中将包含哪些内容。

我怎样才能做到这一点？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:40:33.103

您要做的不是为每个请求创建一个新页面。相反，您希望预先创建一个 ASP 页面，该页面根据用户的输入动态输出文件。

在您上传要显示的文件的示例中。您可能想要做的是将上传的文件存储在某处，然后创建另一个 ASP 页面，该页面读取上传的文件并使用`Response.binarywrite`或显示它`response.write`。不要为每个上传的文件创建一个新的 ASP 页面。

因此，为了举例，您将创建一个名为“DisplayUploadedFile.asp”的 ASP 脚本，其中的代码将读取文件（无论您将其存储在服务器上的哪个位置（例如在数据库中），然后将其写回. 无论用户想查看哪个上传的文件，用户都会点击相同的页面，并带有一个参数告诉脚本要显示哪个。例如`DisplayUploadedFile.asp?fileID=12`

**注意：**让用户上传显示给其他用户的内容在安全方面是极其危险的。除非您非常了解确保此功能安全所需的步骤，否则不要这样做。根据您的问题，我认为在发布解决方案之前让更高级的程序员审查您的解决方案可能是明智的。

# ruby-on-rails - 无法生成脚手架

> ID：10272201
> 
> 赞同：0
> 
> 时间：2012-04-22T21:16:19.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我尝试使用[本教程](http://russian.railstutorial.org/chapters/a-demo-app#sec:planning_the_application)，但在脚手架生成代码方面存在一些问题。

应用程序.rb

```
Bundler.require(:default, Rails.env) if defined?(Bundler) 
#if defined?(Bundler) 
  # If you precompile assets before deploying to production, use this line
  # Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
#end 
```

[从此主题](https://stackoverflow.com/questions/6822904/undefined-method-groups-for-railsmodule/8460870#8460870)中获取解决方案，但不适用于此问题。

日志：

```
C:\Users\Evgeny\Rails_projects\demo_app>rails generate scaffold User name:string
 email:string
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.0.9/lib/rails/ra
iltie/configuration.rb:77:in `method_missing': undefined method `assets' for #<R
ails::Application::Configuration:0x3a03248> (NoMethodError)
        from C:/Users/Evgeny/Rails_projects/demo_app/config/application.rb:55:in
 `<class:Application>'
        from C:/Users/Evgeny/Rails_projects/demo_app/config/application.rb:14:in
 `<module:DemoApp>'
        from C:/Users/Evgeny/Rails_projects/demo_app/config/application.rb:13:in
 `<top (required)>'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.0.9
/lib/rails/commands.rb:15:in `require'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.0.9
/lib/rails/commands.rb:15:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

配置应用程序：

```
source 'http://rubygems.org'

gem 'rails', '3.0.9'
gem 'sqlite3', '1.3.3' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:42:27.433

Rails 资产管道在 Rails 3.1 及更高版本之前不可用。我猜在 C:/Users/Evgeny/Rails_projects/demo_app/config/application.rb 的第 55 行，你有一个导致问题的 config.assets 行。删除该行或升级到 Rails 3.1 或 3.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:07:10.743

这是有资产的东西。我认为您至少需要将 Rails 升级到 3.1。3.2.3更好。

尝试使用最新版本的 rails 3.2.3 创建新项目。

或尝试此解决方案[http://railscasts.com/episodes/282-upgrading-to-rails-3-1](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)或教程书的最后一章[http://russian.railstutorial.org/chapters/rails-3-1#top](http://russian.railstutorial.org/chapters/rails-3-1#top) .

无需升级的另一种解决方案，但我不确定。在您的 config/application.rb 中尝试找到 config.assets.enabled 并将其设置为 false。

# grails - 如何将对象实例从一个控制器传递到grails中的另一个控制器中的动作

> ID：10272208
> 
> 赞同：0
> 
> 时间：2012-04-22T21:17:50.583
> 
> 标签：grails, groovy, grails-orm

> **可能重复：**
> [在 grails 中的控制器操作之间传递对象的最佳方式](https://stackoverflow.com/questions/9751211/best-way-to-pass-objects-between-controller-actions-in-grails)

我在控制器中有一个 def 显示，它应该将信息作为对象发送到我尝试过的其他控制器中的动作显示

```
def show() {
        Person personDomainInstance = getPersonById(params.personId)

            redirect(controller: "NewPersonController", action: "show", personDomainInstance:personDomainInstance)
        }
    } 
```

当我尝试这个时，它显示请求的资源（/......./show）不可用。我是否遵循正确的重定向方法。我可以以这种方式传递对象吗？还有一个问题是如何将人员域对象绑定到 NewPersonDomain 对象的域实例对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:25:59.437

您不能将一个控制器中的实例变量传递给另一个控制器，您必须传递 id，并让第二个控制器再次加载它。它可能会在第一次加载时被缓存，所以它会来自缓存，实际上不必重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:31:06.783

不久前我有一个类似的问题，我最终将该对象添加到 servletContext 对象中。如果这需要每个用户更改，建议将其添加到会话中。

Servlet 上下文信息 --> [http://www.grails.org/doc/latest/ref/Controllers/servletContext.html](http://www.grails.org/doc/latest/ref/Controllers/servletContext.html)

我之前问过这个的完整线程-> [http://grails.1312388.n4.nabble.com/Passing-a-list-of-Groovy-Object-between-Controllers-td3551395.html](http://grails.1312388.n4.nabble.com/Passing-a-list-of-Groovy-Object-between-Controllers-td3551395.html)

# c# - 如何将打印作业图像写入磁盘？

> ID：10272219
> 
> 赞同：0
> 
> 时间：2012-04-22T21:20:30.543
> 
> 标签：c#, printing, virtual-printer

当我使用计算机打印任何文档时，我希望将打印的页面保存在计算机上，例如 bmp 或 jpg 文件，并同时打印到一张纸上。我不知道是否可以从打印机中提取此信息，或者是否可以制作虚拟打印机并将其用作“通过”并从虚拟打印机获取图像并随后将其发送到真实打印机.

操作系统：Windows XP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:41:09.513

Win2PDF虚拟打印机可以创建 PDF 并同时将其打印到纸质打印机[。](http://www.win2pdf.com)为此，请将您的真实打印机设置为 Windows 默认打印机，打印到 Win2PDF 打印机，然后在文件保存窗口中选择“[打印文件”选项。](http://www.win2pdf.com/doc/print-pdf.htm)创建 PDF 文件后，它会自动打印到您的真实打印机。

# php - 用于 Sed 命令的 PHP 中的转义引号

> ID：10272225
> 
> 赞同：0
> 
> 时间：2012-04-22T21:21:25.243
> 
> 标签：php, syntax, sed, quotes, libssh2

我有以下php代码

```
if (!($stream = ssh2_exec($con, 'sed -i \'s/motd=A Minecraft Server/motd=\'.$name.\'s     Server/g\' /home/servers/runner15/server.properties
'))) { 
```

但是当我运行它而不是将文本“motd=A Minecraft Server”替换为“motd=runner15s Server”时，它会将其更改为 motd=..s Server

这与转义引号有关

哦，顺便说一下 $name 持有 runner15

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:24:40.950

基本 PHP 字符串...`'`字符串不插入变量，因此您的 sed 命令包含文字`$`, `n`, `a`, `m`,`e`等...这将被解释为远程服务器上不存在的 shell 变量，并扩展为空细绳。

```
[...snip...]otd=A Minecraft Server/motd=\''.$name.'\'s [..snip...]
                                          ^-------^--- 'exit' the string in your client-side PHP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:31:10.470

在ssh2_exec`escapeshellcmd`之前尝试。[http://www.php.net/manual/en/function.escapeshellcmd.php](http://www.php.net/manual/en/function.escapeshellcmd.php)

# php - 您可以将数组内爆到函数参数中吗？

> ID：10272230
> 
> 赞同：7
> 
> 时间：2012-04-22T21:22:01.897
> 
> 标签：php, arrays

是否可以拥有一个数组并将其作为单独的参数传递给函数？

```
$name = array('test', 'dog', 'cat');
$name = implode(',' $name);
randomThing($name);

function randomThing($args) {
    $args = func_get_args();
    // Would be 'test', 'dog', 'cat'

    print_r($args);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T21:23:32.613

不，这就是[`call_user_func_array()`](http://php.net/manual/en/function.call-user-func-array.php)目的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-12-29T09:45:05.660

从 PHP 5.6 开始，您可以使用`...`将数组作为函数参数传递。请参阅 PHP 文档中的此[示例](http://php.net/manual/en/functions.arguments.php#example-150)：

```
function add($a, $b) {
    return $a + $b;
}

echo add(...[1, 2])."\n";

$a = [1, 2];
echo add(...$a); 
```

# regex - 如何在 Coldfusion 中使用正则表达式的过滤器

> ID：10272234
> 
> 赞同：1
> 
> 时间：2012-04-22T21:22:18.233
> 
> 标签：regex, coldfusion, cfdirectory

冷融合的新手，正则表达式的新手......

我有一个文件目录，以“some”命名，后跟一个 13 位数字，后跟下划线、ID 和文件结尾，如下所示：

```
 some0000000000000_ID.jpg 
```

ID 可以是任何字符串。

如何使用正则表达式获取 ID？我想我会寻找这样的东西，它捕获下划线和文件结束点之间的所有内容：

```
 _\A[A-Z]*[a-z]*[0-9]*$ 
```

但我真的无处可去。有人可以指出我正确的方向吗？

谢谢！

**编辑：**
我最终这样做了，这是*hack-ish*但效果很好：

```
<cfset cropFront = #ListRest(ReReplaceNoCase(name, ".png|.jpg", ""), "_")#>
<cfset cropFull = #ListFirst(ReReplaceNoCase( cropFront, "xxxxx", ""), "." )#> 
```

也许对其他人也有用！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T21:26:31.960

```
<cfdirectory name="images" directory="#path#" filter="some?????????????_ID.jpg"> 
```

过滤器不是正则表达式模式。它只知道`?`和`*`通配符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:28:13.613

目前无法测试，但这就是想法......

```
<cfdirectory name="files" directory="path" action="list" />

<cfloop query="files">
    <cfset findinfo = refind("^some(\d{13})_", files.name, 0, true) />
    <cfif arraylen(findinfo.pos) eq 2>
        <cfset fileid = mid(files.name, findinfo.pos[2], findinfo.len[2]) />
        <!--- do something --->
    </cfif>
</cfloop> 
```

# java - Java：块中的LinkedList反转

> ID：10272239
> 
> 赞同：6
> 
> 时间：2012-04-22T21:23:43.913
> 
> 标签：java, algorithm

如果给你一个链表的头部，并被要求反转每 k 个节点序列，那么在 Java 中如何做到这一点？例如，`a->b->c->d->e->f->g->h`k = 3 将是`c->b->a->f->e->d->h->g->f`

任何一般帮助甚至伪代码都将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:45:10.093

如果`k`期望相当小，我会选择最简单的事情：完全忽略它是一个链表的事实，并将每个子序列视为一个数组类型的事物来反转。

因此，如果您的链表的节点类是 a `Node<T>`，则创建 a`Node<?>[]`的 size `k`。对于每个段，加载`k` `Nodes`到数组列表中，然后用一个简单的`for`循环来反转它们的元素。在伪代码中：

```
// reverse the elements within the k nodes
for i from 0 to k/2:
    nodeI = segment[i]
    nodeE = segment[segment.length-i-1]
    tmp = nodeI.elem
    nodeI.elem = nodeE.elem
    nodeE.elem = tmp 
```

优点：非常简单，O(N) 性能，利用易于识别的反转算法。

缺点：需要一个`k`-sized 数组（只需一次，因为您可以在每个段中重复使用它）

另请注意，这意味着每个`Node`都不会在列表中移动，只会在`Node`持有的对象中移动。这意味着每个`Node`人最终都会持有与以前不同的物品。这可能好也可能不好，这取决于您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:27:51.433

时间 O(n); 空间 O(1)

列表反转的一个通常要求是您在 O(n) 时间和 O(1) 空间内进行。这消除了递归或堆栈或临时数组（如果 K==n 怎么办？）等。因此，这里的挑战是修改就地反转算法以解决该`K`因素。而不是`K`我`dist`用于距离。

这是一个简单的原地反转算法： 使用三个指针在原地遍历链表：`b`指向新链表的头部；`c`指向未处理列表的移动头；以方便和`a`之间的交换。`b``c`

```
 A->B->C->D->E->F->G->H->I->J->L //original
 A<-B<-C<-D    E->F->G->H->I->J->L //during processing
          ^    ^
          |    |
          b    c
 `a` is the variable that allow us to move `b` and `c` without losing either of
  the lists.

Node simpleReverse(Node n){//n is head
if(null == n || null == n.next)
   return n;
Node a=n, b=a.next, c=b.next;
a.next=null; b.next=a;
while(null != c){
   a=c;
   c=c.next;
   a.next=b;
   b=a;
}
return b;
} 
```

要将`simpleReverse`算法转换为`chunkReverse`算法，请执行以下操作：

1]反转第一个块后，设置`head`为`b`; `head`是结果列表的永久负责人。

2] 对于所有其他块，设置`tail.next`为`b`; 回想一下，这`b`是刚刚处理的块的头部。

其他一些细节：

3] 如果列表有一个或更少的节点或dist为1或更少，则返回列表而不进行处理。

4]使用计数器`cnt`来跟踪`dist`连续节点何时被反转。

5]使用变量`tail`来跟踪刚刚处理的块`tmp`的尾部，并跟踪正在处理的块的尾部。

6] 请注意，在处理一个块之前，它的头，必然成为它的尾巴，是你遇到的第一个节点：所以，将它设置为`tmp`，这是一个临时的尾巴。

```
public Node reverse(Node n, int dist) {
  if(dist<=1 || null == n || null == n.right) 
      return n;
  Node tail=n, head=null, tmp=null;
  while(true) {
      Node a=n, b=a.right; n=b.right;
      a.right=null; b.right=a;
      int cnt=2;
      while(null != n && cnt < dist) {
          a=n; n=n.right; a.right=b; b=a;
          cnt++;
      }
      if(null == head) head = b;
      else {
          tail.right=b;tail=tmp;
      }
      tmp=n;
      if(null == n) return head;
      if(null == n.right) {
          tail.right=n;
          return head;
      }
  }//true
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T21:33:48.570

这是相当高级的，但我认为它会提供一些指导。

我有一个像`void swap3(Node first, Node last)`这样的辅助方法，在列表的任意位置取三个元素并将它们反转。这应该不难，并且可以递归地完成（交换外部元素，递归内部元素，直到列表的大小为 0 或 1）。现在我想到了，`swapK()`如果您使用递归，您可以轻松地将其概括为。

一旦完成，你就可以沿着你的链表走并调用`swapK()`每个`k`节点。如果列表的大小不能被 整除`k`，您可以不交换最后一位，或者`length%k`使用交换技术反转最后一个节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T23:39:47.480

例如通过 Common Lisp

```
(defun rev-k (k sq)
  (if (<= (length sq) k)
      (reverse sq)
      (concatenate 'list (reverse (subseq sq 0 k)) (rev-k k (subseq sq k))))) 
```

其他方式例如通过 F# 使用 Stack

```
open System.Collections.Generic
let rev_k k (list:'T list)  =
  seq {
    let stack = new Stack<'T>()
    for x in list do
      stack.Push(x)
      if stack.Count = k then
        while stack.Count > 0 do
          yield stack.Pop()
    while stack.Count > 0 do
      yield stack.Pop()
  }
  |> Seq.toList 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T15:08:34.603

此实现使用 ListIterator 类：

```
LinkedList<T> list;
//Inside the method after the method's parameters check
ListIterator<T> it = (ListIterator<T>) list.iterator(); 
ListIterator<T> reverseIt =  (ListIterator<T>) list.listIterator(k); 

for(int i = 0; i< (int) k/2; i++ )
{
    T element  = it.next();
    it.set(reverseIt.previous());
    reverseIt.set(element);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T03:38:17.390

使用堆栈并递归地从列表中删除 k 个项目，将它们推送到堆栈然后弹出它们并将它们添加到位。不确定这是否是最好的解决方案，但堆栈提供了一种反转事物的正确方法。请注意，如果您有队列而不是列表，这也有效。只需将 k 个项目出列，将它们推入堆栈，将它们从堆栈中弹出并将它们入队 :)

# ruby-on-rails - Facebooker 注销 将用户从 facebook 中注销

> ID：10272240
> 
> 赞同：0
> 
> 时间：2012-04-22T21:23:53.287
> 
> 标签：ruby-on-rails, facebook, facebooker, facebooker2

是否可以在不让用户退出 Facebook 的情况下退出 Facebooker 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:33:04.203

没有。从应用程序注销总是从 FB 本身注销用户。这就是他们的 API 的工作方式。

# session - 如何在会话断开时进行一些清理

> ID：10272241
> 
> 赞同：0
> 
> 时间：2012-04-22T21:23:53.287
> 
> 标签：session, jsf, listener, destroy

我有一个名为`WorkSession`. 创建此 bean 的实例时，我调用初始化函数（用`@PostConstruct`注释声明），它将数据库中的当前用户（我使用 JASS 处理用户日志记录）状态更改为`ONLINE`.

我想在用户注销时做类似的事情（将用户状态更改为`OFFLINE`）。当用户按下网页上的“注销”按钮时，很容易做到这一点。问题是我不知道如何检测关闭的浏览器或浏览器中的标签。

我看到带有注释的方法`@PreDestroy`对此不起作用，因为它是由应用程序服务器垃圾收集器调用的，对吗？

我使用 Glassfish 3.1.2、JPA 2,0 和 JSF 2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:36:57.440

> *我看到带有注释的方法`@PreDestroy`对此不起作用，因为它是由应用程序服务器垃圾收集器调用的，对吗？*

它应该工作得很好。GC 绝对不会调用它。它在会话被销毁时由容器调用。也许您的具体问题是您希望当用户关闭整个浏览器时会话*立即被销毁。*因此这是不正确的。它只有在服务器端超时时才会被销毁。默认超时为 30 分钟。因此，如果您等待 30 分钟，那么会话将被销毁，并且`@PreDestroy`将调用所有会话（和视图）范围的 bean。

`<session-config><session-timeout>`您可以通过in配置默认超时`web.xml`。

### 也可以看看：

*   [servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)- 了解会话如何“在幕后”工作。

* * *

顺便说一句，“会话断开”一词在 Web 开发世界中完全没有意义。

# android - 在 Android 中使用 TextView 获取 RSS Feed 行项的值

> ID：10272242
> 
> 赞同：0
> 
> 时间：2012-04-22T21:24:14.283
> 
> 标签：android, android-intent, rss

我正在尝试构建一个显示几个 RSS 提要的 Android 应用程序，我想仅显示标题和日期的 RSS 提要，然后让用户单击它们以查看完整的故事。目前，我将 RSS 行值作为其行 Textviews 中的意图附加值传递。但是，我不能没有故事 TextView 但仍然让这些数据作为额外的意图传递。这是我的代码的相关位：

```
public class RSSFeedView extends ListActivity implements OnItemClickListener
{
Intent intent;
private String thread;

private RSSFeed feed = null;
RSSHandler rh = new RSSHandler();
private MyRowAdapter myRowAdapter;
private ArrayList<RSSItem> items;
private final static String TAG = "MAD Assignment";
public String description;

private ProgressDialog pbarDialog;

/** Called when the activity is first created */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    intent = getIntent();
    thread = intent.getStringExtra("thread");

    StrictMode.setThreadPolicy(
    new StrictMode.ThreadPolicy.Builder().detectDiskReads().detectDiskWrites().detectNetwork()   
    // or .detectAll() for all detectable 
                .penaltyLog().build());

    items = new ArrayList<RSSItem>();
    myRowAdapter = new MyRowAdapter(this);
    setListAdapter(myRowAdapter);

    new DownloadFilesTask().execute(thread);
}

class MyRowAdapter extends ArrayAdapter<RSSItem>
{
    Activity context;

    MyRowAdapter (Activity context)
    {
        super(context, R.layout.rss, items);
        this.context=context;
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row = convertView;
        if(row == null)
        {
            LayoutInflater inflater = context.getLayoutInflater();
            row = inflater.inflate(R.layout.rss, null);
        }

        RSSItem _item = items.get(position);

        TextView title = (TextView)row.findViewById(R.id.rssTitle);
        title.setText(_item.getTitle());
        **TextView feed = (TextView)row.findViewById(R.id.itemlist);
        feed.setText(_item.getDescription());**
        //description = _item.getDescription();    TRY TO GET IT WORKING WITH JUST DATE AND TITLE!!!!!!!!
        TextView date = (TextView)row.findViewById(R.id.rssDate);
        String dateStr = ConvertToDate(_item.getPubDate());
        date.setText(dateStr);

        row.setOnClickListener(new OnItemClickListener(position));

        return (row);
    }
}

@Override
public boolean onCreateOptionsMenu (Menu menu)
{
    new MenuInflater(getApplication()).inflate(R.menu.rss_menu, menu);
    return (super.onCreateOptionsMenu(menu));
}

@Override
public boolean onOptionsItemSelected (MenuItem item)
{
    switch (item.getItemId())
    {
        case R.id.rss1:
            new DownloadFilesTask().execute(thread);
            break;
    }
    return super.onOptionsItemSelected(item);
}

private class DownloadFilesTask extends AsyncTask<String, Integer, RSSFeed>
{
    @Override
    protected RSSFeed doInBackground(String... urls)
    {
        // TODO Auto-generated method stub
        feed = new RSSFeed();
        try
        {
            feed = getFeed (urls[0]);
        }
        catch (Exception e)
        {
            feed = null;
        }
        return feed;
    }

    @Override
    protected void onCancelled()
    {
        // TODO Auto-generated method stub
        super.onCancelled();
    }

    @Override
    protected void onPostExecute(RSSFeed _feed)
    {
        // TODO Auto-generated method stub
        super.onPostExecute(_feed);
        if (_feed!=null)
        {
            hideProgressBar();
            Log.v(TAG,"onPostExecute");
            for (RSSItem _item : _feed.getAllItems())
            {
                // needed as items have to be explicitly added
                // for notifyDataSetChanged to work
                items.add(_item);
            }
            myRowAdapter.notifyDataSetChanged();
        }
        else
        {
            showError();
        }
    }

    @Override
    protected void onPreExecute()
    {
        // TODO Auto-generated method stub
        super.onPreExecute();
        showProgressBar();
    }

    @Override
    protected void onProgressUpdate(Integer... values)
    {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }
}

private RSSFeed getFeed (String urlToRssFeed)
{
    try
    {
        URL url = new URL(urlToRssFeed);
        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser parser = factory.newSAXParser();

        XMLReader xmlreader = parser.getXMLReader();
        RSSHandler theRssHandler = new RSSHandler();

        xmlreader.setContentHandler(theRssHandler);
        InputSource is = new InputSource(url.openStream());
        xmlreader.parse(is);
        return theRssHandler.getFeed();
    }
    catch (Exception e)
    {
        return null;
    }
}

private class OnItemClickListener implements OnClickListener
{
   private int mPosition;

    OnItemClickListener(int position)
    {
            mPosition = position;
    }

    @Override
    public void onClick(View row) 
    {
        // TODO Auto-generated method stub
        final String title = (String) ((TextView) row.findViewById(R.id.rssTitle)).getText();
        final String date = (String) ((TextView) row.findViewById(R.id.rssDate)).getText();
        **final String desc = (String) ((TextView) row.findViewById(R.id.itemlist)).getText();**
        //final String desc = description;

        Intent showDetailedIntent = new Intent(RSSFeedView.this, RSSDetailed.class);

        showDetailedIntent.putExtra("title", title);
        showDetailedIntent.putExtra("date", date);
        showDetailedIntent.putExtra("desc", desc);

        startActivity(showDetailedIntent);
    }
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
{
    // TODO Auto-generated method stub

}

} 
```

然后在我的 RSSDetailed 类中，我只是提取了额外的意图。关于如何在不先在 TextView 中输出数据的情况下获取数据的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:50:14.750

例如，通过将 RSSItem 传递给您的侦听器。

```
public View getView(final int position, View convertView, ViewGroup parent)
{
    row.setOnClickListener(new OnItemClickListener(position, _item));
}

private class OnItemClickListener implements OnClickListener
{
   private int mPosition;
   private RSSItem mItem;

    OnItemClickListener(int position, RSSItem item)
    {
            mPosition = position;
            mItem = item;
    }

    @Override
    public void onClick(View row) 
    {
        final String title = mItem.getTitle(); 
        final String desc = mItem.getDescription();
        // etc..
    }
} 
```

# numpy - n 维 numpy.gradient 的逆

> ID：10272245
> 
> 赞同：2
> 
> 时间：2012-04-22T21:24:55.770
> 
> 标签：numpy, scipy

numpy 或 scipy 是否包含一个与 n 维“梯度”fn 相反的函数？

例如，如果“图像”包含一个 2D 矩阵，那么我想要一个行为如下的函数 inv_gradient：

```
(gx, gy) = numpy.gradient(image)
constant_vector_0 = image[0,:] - inv_gradient(gx, gy)[0,:]
constant_vector_1 = image[:,0] - inv_gradient(gx, gy)[:,0]
image == inv_gradient(gx, gy) + tile(constant_vector_0,(shape(image)[0],1)) + transpose(tile(constant_vector_1,(shape(image)[1],1))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:40:56.513

您所描述的基本上是一个逆滤波器。这些存在，但有限。

理解这一点的一种方法是通过[卷积定理](http://en.wikipedia.org/wiki/Convolution_theorem)，并将梯度视为卷积的特定核，在这种情况下，类似于 1D 中的 (-1, 0, 1)。那么问题是内核的傅里叶变换 (FT) 将有零，当内核的 FT 与信号相乘时，内核 FT 中的零会消除这部分原始数据中的任何数据频谱（当图像中添加噪声时，这会变得更加成问题）。特别是对于梯度，f=0 波段中的幂为 0，这就是人们在评论中所指的内容，但其他信息也丢失了。

尽管如此，您仍然可以从逆滤波器中获得很多，也许是您需要的。这是相当具体的情况。

[这](http://ecourses.vtu.ac.in/nptel/courses/Webcourse-contents/IIT-KANPUR/Digi_Img_Pro/chapter_9/9_18.html)是对该问题的非常基本和快速的描述，以及一个[示例](http://www.gergltd.com/cse485/project4/)（尽管不是渐变）。

# java - LWJGL GLSL 着色器有效性检查总是失败，尽管着色器工作正常

> ID：10272246
> 
> 赞同：1
> 
> 时间：2012-04-22T21:24:56.467
> 
> 标签：java, opengl, graphics, opengl-es, lwjgl

我有一个函数可以检查共享的顶点/片段是否已成功编译并且是否可以在 LWJGL 中使用

```
public static boolean isShaderValid(int shaderToCheck) {
    IntBuffer iVal = BufferUtils.createIntBuffer(1);
    glGetObjectParameterARB(shaderToCheck, GL_OBJECT_INFO_LOG_LENGTH_ARB, iVal);
    int length = iVal.get();
    boolean isValid = length>1;
    if (isValid && verboseValidityCheck) {
        printShaderLogInfo(shaderToCheck, iVal, length);
    }
    return isValid;
} 
```

然而，这总是返回 false，即使当我跳过此检查并仅使用着色器时，它也可以正常工作。那么，这个着色器有效性检查有什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:56:03.073

这部分

boolean isValid = 长度>1;

将为您提供任何空信息日志的 False 值。

据我所知，着色器的空信息日志很好，因此可以使用任何完美验证着色器得到 False 结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:40:08.737

使用 infolog 长度来检查着色器的有效性是不合适的。

我不确定您在这里指的是**程序**还是**着色器**，但您应该分别使用 GL_LINK_STATUS/GL_COMPILE_STATUS 调用[glGetProgramiv](http://www.opengl.org/sdk/docs/man/xhtml/glGetProgram.xml)或[glGetShaderiv](http://www.opengl.org/sdk/docs/man/xhtml/glGetShader.xml)以获得布尔通过/失败结果。

信息日志长度仅在您想要分配一个字符缓冲区来检索日志时有用，并且日志的内容完全取决于 GPU 供应商并且是任意的。

它可以在着色器编译后轻松返回`"Compile Successful"`到信息日志中，这会使您的长度检查毫无用处。

# java - 如何将图像从 Java Server+MySql 加载到 Android 客户端

> ID：10272250
> 
> 赞同：0
> 
> 时间：2012-04-22T21:25:29.993
> 
> 标签：java, android, mysql, image, blob

我有一个适用于 android 的社交网络应用程序，我可以在从 java 服务器 +mySql 数据库获取后查看列表朋友，实际上我已经完成了将所有信息从 Java Servlet 加载到 android 客户端但我无法加载存储的图像作为服务器端数据库上mysql中的blob。

我尝试将 blob 对象作为字符串发送到 android 客户端，然后尝试在 android 客户端将它们转换为位图。但我不能做我想做的事.. :(

谁能建议我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:55:02.440

我认为一个可行的解决方案是放置一个能够通过 HTTP 发送响应的简单[blob servlet 。](http://www.java2s.com/Code/Java/Servlets/DisplayBlobServlet.htm)`image/your_image_format`通过这种方式，您可以轻松地`Bitmap`从 servlet 响应下载/解码 Android 客户端中的内容，然后将其设置为您的`ImageVIew`源。

# c - 快速双向位移？

> ID：10272251
> 
> 赞同：2
> 
> 时间：2012-04-22T21:25:33.240
> 
> 标签：c, optimization, bit-shift

我有一段代码会被执行很多次，我想对其进行优化。它看起来像这样：

```
int exponent;
uint32_t mantissa;

if (exponent < 0) {
    return mantissa << -exponent;
} else {
    return mantissa >> exponent;
} 
```

`mantissa`它的目的很明确，它应该按位置右移`exponent`，其中`exponent`可能是负数。

有没有更快的编码方法（如果可能，没有分支）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:42:50.140

当然有。即无分支的；我不会说它在所有情况下都一定会更快。

```
int exponent;
uint32_t mantissa;

return (uint32_t)( (uint64_t)mantissa << (32-exponent) >> 32 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:35:02.890

看看这个[“没有分支的整数 abs”](http://graphics.stanford.edu/~seander/bithacks.html#IntegerAbs)。这家伙有一套很棒的小技巧，包括你想要的。如果'exponent'变量类型永远不会改变，那么在你的情况下，'sizeof(int)*CHAR_BIT' 应该只替换为 8。

顺便说一句，您确定这个特定的“if”语句是由于分支导致的性能问题吗？我的意思是，如果问题在于其他地方的数据局部性差，那么优化分支是没有意义的。

# c# - 使用 char 值与 c# 中的变量名进行比较？

> ID：10272252
> 
> 赞同：4
> 
> 时间：2012-04-22T21:25:37.000
> 
> 标签：c#, .net, char

我正在尝试使用 c#（[问题 22](http://projecteuler.net/problem=22)）解决欧拉项目问题之一。虽然我遇到了问题。可能值得注意的是，我对编程比较陌生，尤其是 c#。

我需要为我拥有的一组字符串想出一个单词分数。这涉及对 aa 单词中每个字母的得分求和，例如 a=1、b=2、c=3 等等。为此，我将字母表中的所有 26 个字母分配为具有相关分数的变量。然后我想将单词中的每个字母与同名的相关变量进行比较。但是我剩下的是 char 数据类型，我将字符与相关变量进行比较，然后在我的整数计算中使用变量值的最佳方法是什么。我已经在下面包含了到目前为止的代码，问题出现在最后两行中，不包括大括号。（我快速浏览了一下，似乎 c++ 不支持此功能，但我不确定 c#）。任何帮助将不胜感激。

```
string[] lines = File.ReadAllLines(@"C:\Users\john\Downloads\names.txt");
//Console.WriteLine(lines[1]);

char[] delimiterChars = { ',', '\t' };

string text = lines[0];

string[] names = text.Split(delimiterChars);
Console.WriteLine("{0} words in text:", names.Length);
Array.Sort(names);

int a = 1;
int b = 2;
int c = 3;
int d = 4;
int e = 5;
int f = 6;
int g = 7;
int h = 8;
int i = 9;
int j = 10;
int k = 11;
int l = 12;
int m = 13;
int n = 14;
int o = 15;
int p = 16;
int q = 17;
int r = 18;
int s = 19;
int t = 20;
int u = 21;
int v = 22;
int w = 23;
int x = 24;
int y = 25;
int z = 26;

int[] nameTotal;

for (int count = 0; count < names.Length; count++)
{
    string name = names[count];
    int total = 0;
    for (int count2 = 0; count2 < name.Length; count2++)
    {             
        nameTotal[count] = name.Substring(count2) + total;
        total = total + nameTotal[count];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:47:46.863

您可以利用标准[ASCII 表](http://www.asciitable.com/ "ASCII 表")的布局来做到这一点。

在 ASCII 中，'a' 字符的十进制值为 97。然后小写字母一直持续到 122。

因此，您可以使用以下方法轻松地将 'a' char 值转换为所需的值：

```
char charToConvert = 'a';
int requiredValue = (int)charToConvert - 96; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:34:51.643

不要为每个字母分配 26 个变量，而是创建一个`IDictionary<TKey, TValue>`where`TKey`是字符，而 the`TValue`是您分配的任何值。然后，您可以更轻松地通过传入字符来访问该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T21:35:02.563

如果要计算名称中字母的总和，还可以使用 Linq（只是一个示例）：

```
string name = "ABCD";
int sum = name.Select(letter => letter - 'A' + 1).Sum(); 
```

您可以使用字母执行计算，就像在 C# 中使用整数一样。Select 方法（它是 Linq 的扩展方法）将字符串的每个字母投影到其对应的值。然后通过扩展方法 Sum() 对这些值求和。

编辑：正如 jlafay 指出的那样，您可以省略 Select 调用并将投影放入 Sum 方法中：

```
name.Sum(letter => letter - 'A' + 1) 
```

关于您最初的问题：即使使用反射，您也无法访问局部变量的名称。该信息不包含在编译代码的元数据中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:53:08.610

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text.RegularExpressions;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace SO
{
    static class Program
    {
        static void Main()
        {
            WebClient wc = new WebClient();
            var text = wc.DownloadString("http://projecteuler.net/project/names.txt");

            var names = Regex.Matches(text, "[A-Z]+").Cast<Match>()
                .Select(x => x.Value)
                .OrderBy(x => x)
                .Select((name, inx) => new
                {
                    Name = name,
                    Score = name.Sum(c => c - 'A' + 1) * (inx + 1)
                });

            foreach (var n in names)
            {
                Console.WriteLine("{0}: {1}", n.Name, n.Score);
            }
        }
    }
} 
```

# c# - 中继器 - 将按钮绑定到字段

> ID：10272253
> 
> 赞同：0
> 
> 时间：2012-04-22T21:25:39.540
> 
> 标签：c#, asp.net, repeater

我正在通过中继器显示 3 个作业。每个作业都有一个 JOB 应用程序 ID。在我的数据访问层中，您可以通过 ID 删除数据库中的作业。因此，在任何课程中，我都可以调用和删除条目。

```
JobOpeningDAL app = new JobOpeningDAL();
app.RemoveJobOpening(64); 
```

我想为 3+ 个工作中的每一个生成一个按钮。

我想将此代码放在按钮中，而不是对 ID 进行硬编码。

诀窍是每个按钮都需要获取该作业 ID。

这可能吗？

有没有办法根据以下项目将不同的按钮绑定到每个中继器项目：JOB ID？这样，当用户单击作业下方的删除按钮时，它会自动将其删除。

这是我的中继器代码

```
<br />
 Job ID
 <%# DataBinder.Eval(Container.DataItem, "JOBAPPLICATIONID")%>
 <br />
 Job Description: 
 <%# DataBinder.Eval(Container.DataItem, "JobDescription") %>
 <br />
 Wage:
 <%# DataBinder.Eval(Container.DataItem, "Wage") %>
 <br />
 Department ID:
  <%# DataBinder.Eval(Container.DataItem, "DepartmentID") %>
 <br />
 Has been filled:
 <%# DataBinder.Eval(Container.DataItem, "HasBeenFilled") %>
 <br />
 Location:
  <%# DataBinder.Eval(Container.DataItem, "Location") %>
 <br />

 Job Name:    
  <%# DataBinder.Eval(Container.DataItem, "JobName") %>
 <br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:53:34.110

如果我了解您要执行的操作，您可以尝试以下操作：

像这样向中继器添加一个按钮：

```
 <asp:Button ID="yourButton" runat="server"  CommandName="delete" CommandArgument='<%# Eval("id")' /> 
```

然后在中继器的 itemcommand 处理程序中，您可以执行以下操作：

```
 protected void YourRepeater_ItemCommand(object source, RepeaterCommandEventArgs e)
    {
        if (e.CommandName == "delete")
        {
            object idToDelete = e.CommandArgument;
          int  ID = Convert.ToInt32(idToDelete );
             //do stuff with the ID here
       }
       } 
```

# java - 我正在尝试下载 JXTA 2.7

> ID：10272254
> 
> 赞同：0
> 
> 时间：2012-04-22T21:25:57.077
> 
> 标签：java, jakarta-ee, java-me, jxta

我正在尝试从该站点[http://sourceforge.net/projects/practicaljxta/files/](http://sourceforge.net/projects/practicaljxta/files/)下载 JXTA 2.7 。当我解压缩内容时，我看到的类与我在 JXTA 2.5 中看到的类不同。你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:34:42.493

因为自 JXSE 2.6 和 2.7 以来，许多事情都发生了变化。访问教程部分并阅读“程序员指南”。这些将通知您所做的更改。[http://jxse.kenai.com/Tutorials/Tutorials.html](http://jxse.kenai.com/Tutorials/Tutorials.html)可能您正在使用新的二进制文件 (2.6 / 2.7) 和旧的教程 (2.5)。

# applescript - 使用 rb-appscript 键入键盘快捷键

> ID：10272257
> 
> 赞同：0
> 
> 时间：2012-04-22T21:26:24.117
> 
> 标签：applescript, rb-appscript

我正在尝试使用 rb-appscript 将以下脚本转换为 Ruby：

```
-- Runs the keyboard shortcut for the provided application name.
-- applicationName - The name of the application to run the keyboard shortcut on.
-- key - The key to press.  For example, this could be "n" or "q".
-- modifiersList - A list of modifiers for the keyboard shortcut.  This could be something like
-- { command down } or { command down, shift down, option down }.
on runKeyboardShortcut(applicationName, key, modifiersList)
    tell application applicationName to activate
    tell application "System Events"
      keystroke key using modifiersList
    end tell
end runKeyboardShortcut 
```

这是我到目前为止所拥有的：

```
def run_keyboard_shortcut(application_name, key, modifiers_list)
    Appscript.app.by_name(application_name).activate
    Appscript.app.by_name("System Events").keystroke(key)
end 
```

如何将修饰符添加到击键命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:17:25.880

解决方案是这样做：

```
def run_keyboard_shortcut(application_name, key, modifiers)
    Appscript.app.by_name(application_name).activate
    Appscript.app.by_name("System Events").keystroke(key, :using => modifiers)
end

run_keyboard_shortcut("Finder", "n", [ :command_down ]) 
```

# c# - 从多个源接收音频数据并将它们合并到一个波形文件中

> ID：10272258
> 
> 赞同：2
> 
> 时间：2012-04-22T21:26:24.940
> 
> 标签：c#, wav, audio-recording, naudio, directsound

我正在使用 C# 和 DirectSound 录制音频并通过本地网络将其发送到另一台接收数据并将其保存到波形文件中的计算机。

我使用类似[的代码进行录制](http://blogs.microsoft.co.il/blogs/tamir/archive/2008/12/25/capturing-and-streaming-sound-by-using-directsound-with-c.aspx)，并使用类似的代码[保存](https://stackoverflow.com/questions/6729594/writing-contents-of-a-directsound-capturebuffer-to-a-wav-file-in-c-sharp)波形文件（使用 NAudio）。

将所有接收到的字节保存到波形文件中。但是，我想从多台计算机接收音频并将其合并为一个波形文件。

我尝试录制两个单独的波形文件，每个客户端一个，然后将它们合并在一起。但是，我的幼稚方法没有提供任何同步方式。生成的波形文件在长度上至少相差 5 秒，并且无法适当地合并。

所以，这是我的问题：

1）如何获取从网络接收的音频字节并将它们保存到波形文件中，以便生成的文件在正确的时间播放音频？

例如，我录制了 100 秒的音频并通过网络发送。但是，实际上只记录了 95 秒的音频字节。丢失的 5 秒是由于我发送数据包时发生的小延迟累积造成的。

那么，如何在 100 秒内将这 95 秒的音频同步到正确的时间播放？

2）如何混合从多个客户端接收到的音频字节以获得同步播放所有客户端音频的单个波形文件？

如果我需要澄清我的问题，请告诉我。我感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T05:26:16.090

您需要参与计算机上的高精度时间同步（加上发送数据包的时间戳）。为了最大限度地减少时钟漂移，您可以按预定的时间间隔重新同步（不太推荐）或在机器中安装更高质量的硬件时钟（推荐）。如果这些机器位于本地网络上，则将其中一台设置为 NTP 服务器，另一台设置为客户端将产生足够同步的时钟（即，彼此之间的时钟在 0.000001 秒内或更好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T15:43:28.157

如果要同步来自多个源的音频，则需要在接收端缓冲数据。在您从每个参与的源中获得至少 BUFERSIZE 样本之前，不要编写或播放任何音频数据。您必须根据网络延迟调整 BUFFERSIZE。

您可以使用两个线程来执行此操作，一个用于写入或播放音频数据，另一个用于缓冲传入的流。当从每个音频源接收到BUFFERSIZE 样本时，接收线程将所有数据传递给另一个线程进行写入或播放。通常情况下，大多数流都有超过 BUFFERSIZE 个样本。您将不得不保留这些剩菜以备下次填充。

# sql - 从 sql 计数查询中过滤最大值

> ID：10272259
> 
> 赞同：3
> 
> 时间：2012-04-22T21:26:25.810
> 
> 标签：sql, oracle, oracle11g

我目前有以下查询

```
SELECT organisation.organisationID, COUNT(organisation.organisationID)
FROM position, positionLocation, organisation
WHERE position.positionLocationID = positionLocation.positionLocationID AND
positionLocation.organisationID = organisation.organisationID AND
position.status = 'Open'
GROUP BY organisation.organisationID; 
```

此查询输出

```
organisationID | countOrganisationID
1                3
3                2
5                3 
```

我想显示具有最大 countOrganisationID 的记录。理想情况下，如果可能的话，我只想输出带有相应组织名称的组织 ID。

类似的东西

```
organisationID | organisatioName
1                name1
5                name2 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T04:41:20.410

Barrett 是对的，RANK() 是要走的路，例如：

```
SELECT organisationID, c FROM (
  SELECT organisationID
        ,c
        ,RANK() OVER (ORDER BY c DESC) r
  FROM (
    SELECT organisation.organisationID
          ,COUNT(organisation.organisationID) AS c
    FROM position, positionLocation, organisation
    WHERE position.positionLocationID = positionLocation.positionLocationID
    AND positionLocation.organisationID = organisation.organisationID
    AND position.status = 'Open'
    GROUP BY organisation.organisationID
  )
) WHERE r = 1; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T22:05:46.620

可以子查询它：

```
WITH counts AS (
    SELECT organisation.organisationID
          ,organisation.organisationName
          ,COUNT(organisation.organisationID) the_count
      FROM position, positionLocation, organisation
      WHERE position.positionLocationID = positionLocation.positionLocationID
        AND positionLocation.organisationID = organisation.organisationID
        AND position.status = 'Open'
      GROUP BY organisation.organisationID, organisation.organisationName
)
SELECT organisationID, organisationName
  FROM counts
  WHERE the_count = (SELECT MAX(the_count) FROM counts) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:03:47.663

这应该有效。

```
SELECT organisationID,  organisatioName
FROM position, positionLocation, organisation
WHERE position.positionLocationID = positionLocation.positionLocationID AND
positionLocation.organisationID = organisation.organisationID AND
position.status = 'Open'
AND COUNT(organisation.organisationID) =
    SELECT MAX(cnt) AS MaxCnt FROM
        SELECT organisation.organisationID, COUNT(organisation.organisationID) AS cnt
        FROM organisation
        WHERE position.status = 'Open'
        GROUP BY organisation.organisationID

GROUP BY organisation.organisationID, organisation.organisatioName; 
```

# c# - windows phone GameTimerEventArgs 重置 xna

> ID：10272263
> 
> 赞同：0
> 
> 时间：2012-04-22T21:27:05.487
> 
> 标签：c#, windows-phone-7, xna

所以我现在有一个游戏正在运行，它使用“e”在：private void OnUpdate(object sender, GameTimerEventArgs e) 来保持世界速度更新，但是我不知道如何在我重新启动游戏时重置这个 GameTimerEventArgs （实际上没有退出游戏）

这就是我使用它的方式

```
 worldSpeed = (float)(3 + e.TotalTime.TotalMilliseconds / 10000); 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:17:27.277

查询`GameTimerEventArgs.ElapsedTime`每一帧。忽略`TotalTime`。

在变量中累积经过的时间。这样，您可以在重新启动游戏时将变量重置为零。您还可以通过在暂停时不累积时间来实现暂停。

就您而言，随着游戏玩法的进行，您似乎正在增加`worldSpeed`。因此，与其累积运行时间，不如将更改累积到`worldSpeed`如下所示：

```
if(!paused)
{
    worldSpeed += (float)(e.ElapsedTime.TotalMilliseconds / 10000f);
} 
```

并在您重新启动时设置`worldSpeed`为 3。

# sql-server - ToUniversalTime() - 太慢了？

> ID：10272272
> 
> 赞同：0
> 
> 时间：2012-04-22T21:27:38.667
> 
> 标签：sql-server, vb.net, entity-framework, sql-server-2008-r2, utc

我保存了大量数据，其中每条记录都有一个时间标记。我还想用 UTC 时间标记保存每个项目，所以我使用 ToUniversalTime() (VB.NET) 转换原始时间。使用这种方法似乎很慢。你有什么技巧可以加速这个过程吗？

```
For Each i In CollectionOutput.Select(Function(f) f)
    Dim utcTimeMark = i.GetTIMEMARK.ToUniversalTime()
    contextEmanagement.pr_Collection_Store(i.GetID, i.GetTIMEMARK, utcTimeMark, i.GetVALUE)
Next 
```

其中 .pr_Collection_Store 调用 SQL Server 存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:09:56.707

目前，您的存储过程可能会执行类似的操作（我在这里完全猜测数据类型，并且我假设您使用的是 SQL Server 2008 或更高版本 - 请在提问时指定您的版本！）：

```
CREATE PROCEDURE dbo.pr_Collection_Store
  @GetID INT,
  @GetTimeMark DATETIME, 
  @UTCTimeMark DATETIME,
  @GetValue INT
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.SomeTable(ID, TimeMark, UTCTimeMark, Value)
    SELECT @GetID, @GetTimeMark, @UTCTimeMark, @GetValue;
END
GO 
```

你可以这样做：

```
CREATE TYPE dbo.Collection AS TABLE
(
  GetID       INT,
  GetTimeMark DATETIME,
  UTCTimeMark DATETIME,
  GetValue    INT
);
GO

CREATE PROCEDURE dbo.pr_Collection_Store2
  @Collection AS dbo.Collection READONLY
AS
BEGIN
  SET NOCOUNT ON;

  INSERT dbo.SomeTable(ID, TimeMark, UTCTimeMark, Value)
    SELECT GetID, GetTimeMark, UTCTimeMark, GetValue
    FROM @Collection AS c
    WHERE NOT EXISTS (SELECT 1 FROM dbo.SomeTable WHERE ID = c.GetID);
END
GO 
```

然后从应用程序。对不起，我知道 C#，希望你能把它翻译成 VB.NET。

```
DataTable tvp = new DataTable();
tvp.Columns.Add(new DataColumn("i"));
foreach(var i in CollectionOutput)
{ 
    tvp.Rows.Add(i.GetID, i.GetTIMEMARK, i.GetTIMEMARK.ToUniversalTime(), i.GetValue); 
}

using (connection)
{
    SqlCommand cmd = new SqlCommand("dbo.pr_Collection_Store2", connection);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter tvparam = cmd.Parameters.AddWithValue("@Collection", tvp);
    tvparam.SqlDbType = SqlDbType.Structured;
    connection.Open();
    cmd.ExecuteNonQuery();
} 
```

# symfony - Symfony2 表单组件 - 日期小部件不适用于 mongodb

> ID：10272274
> 
> 赞同：0
> 
> 时间：2012-04-22T21:27:53.253
> 
> 标签：symfony, symfony-forms

表单字段声明： `$builder->add('birthday', 'date', array('label' => 'Data urodzenia:', 'years' => range(date('Y'), date('Y')-100)), 'required' => false);` 对应文档字段声明：

```
/**
 * @ODM\Field(type="date")
 */
protected $birthday;
/**
 * Set bitrhday
 *
 * @param \DateTime $birthday
 */
public function setBirthday(\DateTime $birthday)
{
    $this->birthday = $birthday;
}

/**
 * Get bitrhday
 *
 * @return \DateTime $birthday
 */
public function getBirthday()
{
    return $this->birthday;
} 
```

当我在表单中设置数据时，值被正确保存到数据库，但是当我在保存后访问表单页面时，小部件没有填充数据表单数据库字段。

表单中的其他字段按预期工作。

这是 sf2 错误还是我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:40:56.813

首先，生日似乎拼写错误。`Set`**`bitrhday`**&`Get`**`bitrhday`**

其次，ODM 不支持 DateTime 字段类型。ODM 仅支持字段类型 Date。请参阅[ODM 字段类型参考](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/index.html#doctrine-field-types-reference)

另一方面，ORM 确实支持 DateTime 字段类型。请参阅[ORM 字段类型参考](http://symfony.com/doc/current/book/doctrine.html#doctrine-field-types-reference)

# iphone - 当一个精灵与另一个精灵发生碰撞时，它会粘在另一个精灵上

> ID：10272275
> 
> 赞同：1
> 
> 时间：2012-04-22T21:27:54.583
> 
> 标签：iphone, xcode, cocos2d-iphone, sprite, accelerometer

所以我有一个每秒创建的精灵，它在随机位置（sprite1）和另一个具有固定位置的精灵（sprite2）移动。我希望当 sprite1 与 sprite2 碰撞时，sprite1 就像粘在它上面（它停止移动并粘在它上面）。请问我该怎么做？对不起我的英语我是法国人：/

ps：sprite2 与加速度计一起旋转，所以如果 sprite1 与它发生碰撞，我希望它也旋转 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:05:22.460

如果你不想使用 Box2d（它可以处理圆形碰撞），你可以尝试这样的事情：

1.）检测碰撞，是两个圆中心点（x，y）之间的距离，小于两个圆半径之和。

2.) 让 Sprite1 粘在 Sprite2 上，停止 Sprite1 的移动，并将相对 delta (x,y) 保存到 Sprite2，然后每当 Sprite2 移动或旋转时，对 Sprite1 应用相同的 delta 移动和旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:59:17.253

我认为，您可以尝试使用 box2d 来执行此操作。它将有助于检测碰撞并管理旋转、移动等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:09:51.083

我认为，你可以在 Cocos2d 中简单地做到这一点。

1）首先使用为 sprite1 和 sprite2 设置矩形`CGRectMake(x,y,width,height)`

2）正如您所说 sprite1 在随机位置移动而 sprite2 固定在特定位置，您可以使用`CGRectIntersectsRect([sprite1 bounds],[sprite2 bounds])`.

3）如果相交，设置`sprite1.position = sprite2.position`

注意：你说 sprite1 是旋转的，rect 只能适合常规体。如果你想要更好的精灵的精确碰撞或物理属性，你可以选择 box2d。

# android - Android Programm 在我的应用程序开头添加视频

> ID：10272277
> 
> 赞同：0
> 
> 时间：2012-04-22T21:28:24.107
> 
> 标签：android, video, startup

我想在我的应用程序启动时添加一个 5 秒的视频。我怎样才能做到这一点？我必须创建一个新活动？和新的布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:32:12.350

是的。创建一个新的活动和布局，并将其添加到 manifest.xml 中的活动定义中。这将阻止用户按返回以转到视频..

```
android:noHistory="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:01:13.110

[最简单的方法是使用android:noHistory](http://developer.android.com/guide/topics/manifest/activity-element.html#nohist)创建一个新活动，就像 Simon 说的那样。如果您的视频类似于教程，您应该在[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中存储一个变量以检查“这是第一次启动与否”。如果它不是教程，我建议您在设置屏幕中添加一个复选框“是否显示启动画面”。让用户自己选择。

# iphone - iOS：如何使用钥匙串数据“自动登录”？

> ID：10272278
> 
> 赞同：0
> 
> 时间：2012-04-22T21:28:25.093
> 
> 标签：iphone, ios, keychain, autologin

我想自动登录用户。当他第一次输入他的凭据（用户名、密码）时，它会保存在钥匙串中。现在，当用户重新启动应用程序时，他应该会被重定向到他的帐户信息，而不会看到登录屏幕。

我想我必须在 AppDelegate 中启动它，对吧？

任何的想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:27:48.390

要回答这个问题：如果您想使用钥匙串数据自动登录，请使用免费框架“SFHFKeychainUtils”。它将用户名、密码和服务名保存在钥匙串中。如果您想找回它，只需将用户名保存在 NSUserDefaults 中，您就可以轻松获取密码。

开始了：

**SiFi HiFi 框架：** [https ://github.com/ldandersen/scifihifi-iphone/tree/master/security](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)

**SiFi Hifi 框架（ARC 兼容）：** [https ://stackoverflow.com/a/10348964/1011125](https://stackoverflow.com/a/10348964/1011125)

**如何使用 SFHFKeychainUtils：** [http ://gorgando.com/blog/technology/iphone_development/simple-iphone-tutorial-password-management-using-the-keychain-by-using-sfhfkeychainutils](http://gorgando.com/blog/technology/iphone_development/simple-iphone-tutorial-password-management-using-the-keychain-by-using-sfhfkeychainutils)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-22T23:26:06.223

IOS设备没有钥匙串的概念（据我所知）。

避免后续登录屏幕的方法是：成功登录后，在 userdefaults 中保存一个布尔变量。我希望您熟悉 User Defaults 数据，它可以为您的应用存储少量数据。将其视为跨应用程序执行的数据库。下次打开应用程序后，请阅读此变量，如果显示已登录，请不要登录。

我希望这对你有用。

# android - MonoDevelop 默认 M4A 应用程序“已意外停止”

> ID：10272279
> 
> 赞同：1
> 
> 时间：2012-04-22T21:28:54.910
> 
> 标签：android, monodevelop, xamarin.android

当我尝试运行默认的“Android 应用程序的单声道”时，我收到应用程序意外停止的错误。

![在此处输入图像描述](../Images/ebfb3bc904d14f8757eb6461390d315e.png)

之后，（有时）我会在 MonoDevelop 中遇到异常： System.IO.IOException: DWP Handshake failed。

我不确定可能出了什么问题 - 我没有对应用程序进行任何更改。任何帮助将不胜感激 - 我一直在努力让它运行一整天。

TIA

堆栈跟踪：

> java:597) E/AndroidRuntime(2066): 在 dalvik.system.NativeStart.main(Native Method) I/Process (2066): 发送信号。PID：2066 SIG：9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:13:59.037

在使用付费版本后不久，我遇到了类似的问题。只需清理并重建以更新对新 monodroid 库的引用。

另见： http: [//www.mail-archive.com/monodroid@lists.ximian.com/msg00531.html](http://www.mail-archive.com/monodroid@lists.ximian.com/msg00531.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:23:19.827

这很可能是[Android 错误 21670](http://code.google.com/p/android/issues/detail?id=21670)：有时本地库未从 .apk 中提取，但仍报告安装成功：

```
W/NativeHelper(   98): Failed to cache package shared libs
W/NativeHelper(   98): java.io.IOException: Couldn't create cached binary /data/data/Mono.Android.DebugRuntime/lib/libmonosgen-2.0.so in /data/data/Mono.Android.DebugRuntime/lib
W/NativeHelper(   98):  at com.android.internal.content.NativeLibraryHelper.copyNativeBinaryLI(NativeLibraryHelper.java:289) 
```

检查您的 Android 调试日志以获取与上述类似的消息，以确认是这种情况。

如果您看到上述情况，则需要卸载您的应用程序和尽可能多的其他软件包以释放存储空间，然后重新安装您的应用程序。

# php - 如何保护 $_SERVER['PHP_SELF']？

> ID：10272282
> 
> 赞同：5
> 
> 时间：2012-04-22T21:29:43.147
> 
> 标签：php, security, validation

我正在使用下面的代码来控制分页。它正在使用`$_SERVER['PHP_SELF']`，所以我想知道它是否以这种方式安全，或者我必须做些什么才能确保`$_SERVER['PHP_SELF']`安全？

```
<?php 

    if($rows > 10) {
        echo '<a id=nex href="'.$_SERVER['PHP_SELF'].'?pg='.($startrow+10).'">
        Next</a>';
    } 

    $prev = $startrow - 10;

    if ($prev >= 0) {
        echo '<a id=pex href="'.$_SERVER['PHP_SELF'].'?pg='.$prev.'">
        Previous</a>';
    }

?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T21:38:25.553

你应该使用`filter_input`： http: [//php.net/filter_input](http://php.net/filter_input)

```
$phpSelf = filter_input(INPUT_SERVER, 'PHP_SELF', FILTER_SANITIZE_URL); 
```

然后使用`$phpSelf`而不是`$_SERVER['PHP_SELF']`.

这比 好`htmlspecialchars`，但理想的解决方案是使用[http://htmlpurifier.org/之类的工具](http://htmlpurifier.org/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-22T21:41:46.820

为防止 XSS 攻击，您应该使用`htmlspecialchars()`或`filter_input()`转义`$_SERVER['PHP_SELF']`。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/6080022/php-self-and-xss)。

另请注意，如果您`href`以没有路径的属性开始`?`，浏览器会将后续查询字符串附加到当前请求，就像相对链接将附加到同一目录一样。

我假设您正在消毒`$prev`和`$startrow`其他地方。数学比较应该使它们安全，但如果它们来自 $_GET，那么`intval()`在你做任何其他事情之前运行它们是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T21:34:33.360

`$_SERVER['PHP_SELF']`在某种意义上已经是安全的，没有字符可以对您要发布的 HTML 语法产生更改。唯一的就是文件名本身。

`htmlspecialchars`通常，您应该在将输出发布到浏览器之前使用诸如清理输出之类的方法。

# c++ - 使用空格取消简单循环

> ID：10272284
> 
> 赞同：1
> 
> 时间：2012-04-22T21:30:04.217
> 
> 标签：c++

这是我的这个简单任务的代码：

> 编写将读取用户输入的字符的代码，直到输入一个空格（空格）。打印输入了多少个字符。请记住，用户可能决定输入一个空白作为他的第一个字符。

为什么空间没有结束循环？

```
#include <iostream>
using namespace std;

int main(){
char answer;
int count=1;

do{
    cout << "please enter number " << count;
    cin >> answer;
    count++;

}while(answer!=' ');
    cout << "you entered " << count-1 << "numbers." << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T21:32:56.597

默认情况下，这些`cin >>`操作会跳过各种空格。您可以[`cin >> noskipws;`](http://www.cplusplus.com/reference/iostream/manipulators/noskipws/)在循环之前使用来禁用空格跳过或[`cin.get()`](http://www.cplusplus.com/reference/iostream/istream/get/)改用：

```
cin.get(answer); 
```

您应该知道现在不再跳过换行符和回车符，因此您必须单独处理它们。此外，您应该检查流状态以对文件结尾做出反应：

```
do {
    cout << "Please enter number " << count << endl;
    do {
        cin.get(answer);
    } while (cin && (answer == '\r' || answer == '\n'));
    count++;
} while (cin && answer != ' '); 
```

# jquery - deck.js - 是否可以将“deck-container”类的元素（主体）更改为另一个元素？

> ID：10272285
> 
> 赞同：1
> 
> 时间：2012-04-22T21:30:54.517
> 
> 标签：jquery, javascript, deck.js

Deck.js 在我使用时工作正常

```
<body class="deck-container"><section> 
```

...但它不适用于 div 或 <article> 等其他元素。但是，在 Deck.js 的主页上——http://imakewebthings.com/deck.js/——[他们](http://imakewebthings.com/deck.js/)正在使用 <article 类="甲板容器">。

这可能只是 JS 代码需要的一个小调整。但我在文档中找不到任何帮助。

如果有人可以在这里帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T22:47:16.957

应该重新定义样式，添加这个 css 块，然后你可以避免 body 类：

```
<head>

<style type="text/css">
.deck-container {
width: auto;
max-width: 864px;
min-height: 560px;
font-size: 16px;
}
</style>

</head> 
```

# matlab - matlab中的上采样

> ID：10272288
> 
> 赞同：0
> 
> 时间：2012-04-22T21:31:27.230
> 
> 标签：matlab

我尝试编写一个 matlab 函数来对我的图片（灰度值矩阵）进行上采样。它实际上并没有什么特别复杂的，但我仍然设法做错了。我的目标是将其大小调整为 2 倍，并且一开始我只想查看放大后的图片。我想用零填充空白，因此每第二行/列都用零填充。完成后，我想知道为什么我只看到一片灰色的像素海洋。我本来希望能够识别我照片中的至少一些东西。

这是我的功能，有人看到我的错误吗？

```
function [upsampled] = do_my_upsampling(image)
    [X Y] = size(image);
    upsampled = zeros(X*2, Y*2);
    upsampled(1:2:end, 1:2:end) = image(1:1:end, 1:1:end);
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T22:06:25.840

你的代码对我来说很好（使用`image = rand(100);`. 但是，它不是一种非常 Matlab 实现结果的方式。

如果你只是想分散你的像素，你为什么不直接索引呢？

```
[nRows,nCols] = size(image);
upsampled = zeros(2*nRows,2*nCols);
upsampled(1:2:end,1:2:end) = image; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-07T04:16:52.920

尝试`imshow(image,[])`

或者，由于您的图像是双精度图像，请先将其转换为 uint8 然后显示 ie

```
imshow(uint8(image)) 
```

# java - 使用 jena 从 xml 文件创建 RDF 三元组和 RDF 存储

> ID：10272289
> 
> 赞同：2
> 
> 时间：2012-04-22T21:31:33.077
> 
> 标签：java, xml, rdf, semantic-web, jena

我使用以下 java 程序从 xml 文件中提取信息。

```
import java.io.File;
import java.net.URL;

import org.w3c.dom.*;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException; 

public class ExtractInfo {

public static void main(String argv []) {
    try {
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        File file = new File("page.xml");
        Document doc = docBuilder.parse(file);

        // normalize text representation
        doc.getDocumentElement().normalize();
        System.out.println ("Root element of the doc is " + 
            doc.getDocumentElement().getNodeName());

        NodeList listOfPersons = doc.getElementsByTagName("person");
        int totalPersons = listOfPersons.getLength();
        System.out.println("Total no of people : " + totalPersons);

        for (int s=0; s<listOfPersons.getLength(); s++) {
            Node firstPersonNode = listOfPersons.item(s);
            if (firstPersonNode.getNodeType() == Node.ELEMENT_NODE) {
                Element firstPersonElement = (Element)firstPersonNode;
                //-------
                NodeList firstNameList = firstPersonElement.getElementsByTagName("first");
                Element firstNameElement = (Element)firstNameList.item(0);

                NodeList textFNList = firstNameElement.getChildNodes();
                System.out.println("First Name : " + 
                       ((Node)textFNList.item(0)).getNodeValue().trim());
                //-------
                NodeList lastNameList = firstPersonElement.getElementsByTagName("last");
                Element lastNameElement = (Element)lastNameList.item(0);

                NodeList textLNList = lastNameElement.getChildNodes();
                System.out.println("Last Name : " + 
                       ((Node)textLNList.item(0)).getNodeValue().trim());
                //----
                NodeList ageList = firstPersonElement.getElementsByTagName("age");
                Element ageElement = (Element)ageList.item(0);

                NodeList textAgeList = ageElement.getChildNodes();
                System.out.println("Age : " + 
                    ((Node)textAgeList.item(0)).getNodeValue().trim());
            }
        }
    } catch (SAXParseException err) {
        System.out.println ("** Parsing error" + ", line " 
            + err.getLineNumber () + ", uri " + err.getSystemId());
        System.out.println(" " + err.getMessage());
    } catch (SAXException e) {
        Exception x = e.getException ();
        ((x == null) ? e : x).printStackTrace();
    } catch (Throwable t) {
        t.printStackTrace();
    }
}

} 
```

有人可以帮我从提取的信息中生成 RDF 三元组，并**使用 Jena 创建一个**包含所有三元组的三元组存储。我对 RDF 和 Jena 很陌生，所以我确实需要你们的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:14:37.323

```
Resource resource=OntModel.createResourc(NameSpace+"Doutorado_em_Engenharia_de_Sistemas_e_Computacao");
Property prop=OntModel.createProperty(http://www.owl-ontologies.com/OntologyBase.owl#program_Provided_By);
Resource obj=OntModel.createResource(NameSpace+"Universidade_X");
OntMode.add(resource,prop,obj); 
```

在应用它之前，您应该首先为您的本体创建一个 OntModel 实例。

[http://answers.semanticweb.com/questions/11084/add-triples-in-an-ontology-using-jena-api](https://web.archive.org/web/20141115033015/http://answers.semanticweb.com:80/questions/11084/add-triples-in-an-ontology-using-jena-api)

# php - 解析错误似乎取决于我将数组索引命名为什么

> ID：10272297
> 
> 赞同：0
> 
> 时间：2012-04-22T21:32:40.723
> 
> 标签：php, string, echo, associative-array

我是 PHP 新手。当我使用“echo”打印一个数组元素时，我的成功似乎取决于我命名索引的名称。这不可能是对的，对吧？！我觉得我快疯了。这段代码：

```
$ARRAY['q1'] = 'foo';
echo "q1 is $ARRAY[q1]<br>"; 
```

工作正常。但是这段代码：

```
$ARRAY['1q'] = 'foo';
echo "1q is $ARRAY[1q]<br>"; 
```

产生错误：

> 解析错误：语法错误，意外的 T_STRING，在第 6 行的 /var/www/html/test.php 中需要 ']'

我知道我可以纠正这样的问题：

```
echo "1q is " . $ARRAY['1q'] . "<br>"; 
```

但我的问题是为什么数组索引“1q”与“q1”在第一个代码块中很重要？我什至检查了 1q 是否是某种常数，但似乎不是。这是在字符串中插入数组元素的不正确方法吗？（我从 PHP 文档中复制了它。）

这是在 PHP 5.3.8 中。我真的很感激任何帮助。

**编辑：** 好的，我从 PHP 手册的这个页面上的示例 #8 中得到了这个回显语法：[http](http://www.php.net/manual/en/language.types.string.php) : //www.php.net/manual/en/language.types.string.php 显然这不是正确的方法事物。我将在手册中添加用户提供的注释。

产生此错误的整个脚本将是：

```
<?php
$ARRAY['1q'] = 'foo';
echo "1q is $ARRAY[1q]<br>"; 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:38:16.633

因为它试图将数组键视为某种文字。之所以可行，是因为`q1`没有命名常量`q1`，所以 PHP 假定它应该是一个字符串。`1q`但是，失败了，因为它开始将其视为一个数字。

无论如何，您都不应该将数组嵌入到这样的字符串中。使用以下方法之一：

```
echo "1q is {$ARRAY['1q']}";
echo "1q is ".$ARRAY['1q']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:41:17.037

在双引号字符串中使用数组时，如果 PHP 看到数组键以数字开头，则假定整个键是数字索引，例如

```
echo "$arr[123abc]"; 
```

被解释为`$arr[123]`。该`abc`部分是产生预期字符串错误的原因，因为数字键不能包含非数字组件。

要解决此问题，您必须使用

```
echo "1q is {$ARRAY['1q]'}<br>";
            ^       ^   ^^ 
```

带有正确引用的数组索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T21:41:52.383

你不需要连接。试试`echo "1q is {$ARRAY['1q']}";`。

*   您应该始终使用引号来访问字符串数组键，即使在字符串内部也是如此。
*   在字符串中包含 {} 上的变量是一种很好的做法。

# java - 尝试将 sqlite 数据库从 android 手机发送到 Web 服务器

> ID：10272300
> 
> 赞同：2
> 
> 时间：2012-04-22T21:33:01.553
> 
> 标签：java, android, database, upload

我正在尝试将 sqlite 数据库从我的 android 手机发送到 Web 服务器。代码执行时我没有收到任何错误，但是数据库没有出现在服务器上。这是我的 php 代码和从 android 手机上传文件的代码。连接响应消息是“OK”，我得到的来自 http 客户端的响应是 org.apache.http.message.BasicHttpResponse@4132dd40。

```
 public void uploadDatabase() {

    String urli = "http://uploadsite.com";
                String path = sql3.getPath();
                File file = new File(path);

            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 1*1024*1024;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";

            try {
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(urli);

            URL url = new URL(urli);
            connection = (HttpURLConnection) url.openConnection();

            InputStreamEntity reqEntity = new InputStreamEntity(
                    new FileInputStream(file), -1);

            reqEntity.setContentType("binary/octet-stream");
            reqEntity.setChunked(true);

            HttpResponse response = httpclient.execute(httppost);
            String response2 = connection.getResponseMessage();
            Log.i("response", response.toString());
            Log.i("response", response2.toString());
        } catch (Exception e) {

        }
    }

<?php
$uploaddir = '/var/www/mvideos/uploads/';
$file = basename($_FILES['userfile']['name']);
$timestamp = time();
$uploadfile = $uploaddir . $timestamp . '.sq3';

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
    echo "OK";
} else {
    echo "ERROR: $timestamp";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T18:30:58.917

我的代码基于这个例子，它运行良好。

```
String pathToOurFile = "/data/dada.jpg"; 
String urlServer = "http://sampleserver.com";

try {
    FileInputStream fis = new FileInputStream(new File(pathToOurFile));
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost(urlServer);
    byte[] data = IOUtils.toByteArray(fis);
    InputStreamBody isb = new InputStreamBody(new ByteArrayInputStream(data),pathToOurFile);
    StringBody sb1 = new StringBody("someTextGoesHere");
    StringBody sb2 = new StringBody("someTextGoesHere too");
    MultipartEntity multipartContent = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    FileBody bin = new FileBody(new File(pathToOurFile));

    multipartContent.addPart("uploadedfile", bin);
    multipartContent.addPart("name", sb1);
    multipartContent.addPart("status", sb2);
    postRequest.setEntity(multipartContent);

    HttpResponse res = httpClient.execute(postRequest);
    res.getEntity().getContent().close();
} catch (Throwable e) {
    e.printStackTrace();
} 
```

# c# - 在同一程序的多个实例之间同步

> ID：10272302
> 
> 赞同：2
> 
> 时间：2012-04-22T21:33:10.180
> 
> 标签：c#, multithreading, single-instance

我手头有一个相当复杂的编程问题，所以请耐心等待几分钟。

我决定要在 WPF (C#) 中创建一个媒体播放器，但我遇到了一些麻烦。

我希望我的应用程序是单实例，这样当用户双击服务器文件时，程序只会运行一次并将所有文件排队播放。

我尝试了几种方法，包括 Microsoft 的单实例实现，但似乎没有任何效果，直到我决定创建*自己*的没有出现）

基本上，我使用命名互斥锁来防止打开多个实例，并强制其他实例将其参数写入文件，之后，创建互斥锁的实例将读取该文件。不用说，就性能而言，这非常非常无效，但无论如何，这是我对 Main() 函数的实现。请注意，这个 Main() 也是从头开始编写的，因为我不太喜欢 VS2010 自动生成的那个。

```
static void Main(string[] args)
    {

            string[] arguments = new string[0];
            handler g = new handler();
            bool createdNew = false;
            Mutex lolpaca = new Mutex(true, "lolpacamaximumtrolololololol", out createdNew);
            if (createdNew)
            {

                if (args != null)
                {
                    var MainWindow = new MainWindow();
                    var app = new Application();
                    app.Run(MainWindow);
                    lolpaca.ReleaseMutex();
                    lolpaca.Dispose();
                }
                else
                {
                            Array.Resize(ref arguments, 1);
                            arguments[0] = args[0];
                            string line;
                    //nu mai arunca exceptii nenorocitule

                            while ((line = g.ReadArgs()) != null)
                            {
                                int old_size = arguments.Length;
                                Array.Resize(ref arguments, arguments.Length + 1);
                                arguments[old_size] = line;
                            }

                    var MainWindow = new MainWindow(arguments, arguments.Length);
                    var app = new Application();
                    app.Run(MainWindow);
                    lolpaca.ReleaseMutex();
                    lolpaca.Dispose();

                }
                if (File.Exists(path))
                {
                    File.Delete(path);
                }
            }

            else
            {
                Thread writer = new Thread(new ParameterizedThreadStart(g.WriteArg));
                writer.Start(args);
                writer.Join();

                 try
                {
                    g.WriteArg(args);
                }
                catch (IOException e)
                {
                    MediaPlayerFinal_GUI_new.ExceptionCatcher exp = new MediaPlayerFinal_GUI_new.ExceptionCatcher(e.Source);
                    exp.Show();
                }

            }

    } 
```

我也在使用这个类来尝试在线程之间同步

```
 public class handler
{  
    static string path = @"D:\playlist.txt";
    static FileStream fs = new FileStream(path, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite);
    string line;

    string arg;
    bool readerFlag = false;
    public string ReadArgs()
    {
        try
        {
            lock (fs)   // Enter synchronization block
            {
                if (!readerFlag)
                {            // Wait until writer  finishes
                    try
                    {
                        // Waits for the Monitor.Pulse in WriteArg
                        Monitor.Wait(fs);
                    }
                    catch (SynchronizationLockException)
                    {

                    }
                    catch (ThreadInterruptedException)
                    {

                    }
                }

                TextReader tr = new StreamReader(fs);
                while ((line = tr.ReadLine()) != null)
                {
                    arg = line;
                }
                tr.Close();
                tr.Dispose();

            }

          /*  fs.Close();
            fs.Dispose();*/
            readerFlag = false;
            Monitor.Pulse(fs);
            return arg;
        }
        catch (IOException e)
        {
            MediaPlayerFinal_GUI_new.ExceptionCatcher exp = new MediaPlayerFinal_GUI_new.ExceptionCatcher(e.Source);
            exp.Show();
            return null;
        }
    }
    public void WriteArg(object args)
    {
        lock (fs)
        {
            try
            {
                if (readerFlag)
                {
                    try
                    {
                        Monitor.Wait(fs);   // Wait for the Monitor.Pulse in ReadArgs
                    }
                    catch (SynchronizationLockException)
                    {

                    }
                    catch (ThreadInterruptedException)
                    {

                    }
                }
                arg = Convert.ToString(args);
                //   FileStream fs = new FileStream(path, FileMode.Append, FileAccess.Write, FileShare.Read);                
                TextWriter tw = new StreamWriter(fs);
                tw.WriteLine(args);
                tw.Close();
                tw.Dispose();

            }
            catch (IOException e)
            {
                MediaPlayerFinal_GUI_new.ExceptionCatcher exp = new MediaPlayerFinal_GUI_new.ExceptionCatcher(e.Source);
                exp.Show();
            }
        }
       /* fs.Close();
        fs.Dispose();*/
        readerFlag = true;
        Monitor.Pulse(fs);
    } 
```

}

现在，基本上，对于每个双击文件，Windows 都会创建一个 Main() 函数实例。第一个实例控制了互斥体并继续做它想做的任何事情。其他实例必须将它们的参数写入文件。

现在，问题是：显然，线程（所有线程）没有正确同步，有时我得到 IO 异常。我不知道这些异常到底是在哪里引发的，因为 try-catch 块似乎什么都不做。事实上，我相信这比 try-catch 的作用要深一些。

那么，当用户双击大量文件时，我如何同步所有产生的线程？这个实现最多可以双击 3 个文件，有时（注意，有时它可以工作，其他时候不能）超过 3 个文件（测试最多 9 个）。到目前为止，我在 Internet 上发现的任何内容都无法说明独立运行的同一应用程序的多个实例。

如果能举个例子就好了：）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T12:45:30.860

在同一应用程序的两个实例之间进行通信的最佳方式是使用 IPC。下面查看可用于帮助处理单个实例的类示例：

```
 /// <summary>
        /// Enforces single instance for an application.
        /// </summary>
        public class SingleInstance : IDisposable
        {
            #region Fields

            /// <summary>
            /// The synchronization context.
            /// </summary>
            private readonly SynchronizationContext synchronizationContext;

            /// <summary>
            /// The disposed.
            /// </summary>
            private bool disposed;

            /// <summary>
            /// The identifier.
            /// </summary>
            private Guid identifier = Guid.Empty;

            /// <summary>
            /// The mutex.
            /// </summary>
            private Mutex mutex;

            #endregion

            #region Constructors and Destructors

            /// <summary>
            /// Initializes a new instance of the <see cref="SingleInstance"/> class.
            /// </summary>
            /// <param name="identifier">
            /// An identifier unique to this application.
            /// </param>
            /// <param name="args">
            /// The command line arguments.
            /// </param>
            public SingleInstance(Guid identifier, IEnumerable<string> args)
            {
                this.identifier = identifier;

                bool ownsMutex;
                this.mutex = new Mutex(true, identifier.ToString(), out ownsMutex);

                this.synchronizationContext = SynchronizationContext.Current;

                this.FirstInstance = ownsMutex;

                if (this.FirstInstance)
                {
                    this.ListenAsync();
                }
                else
                {
                    this.NotifyFirstInstance(args);
                }
            }

            /// <summary>
            /// Initializes a new instance of the <see cref="SingleInstance"/> class.
            /// </summary>
            /// <param name="identifier">
            /// An identifier unique to this application.
            /// </param>
            public SingleInstance(Guid identifier)
                : this(identifier, null)
            {
            }

            #endregion

            #region Public Events

            /// <summary>
            /// Event raised when arguments are received from successive instances.
            /// </summary>
            public event EventHandler<OtherInstanceCreatedEventArgs> OtherInstanceCreated;

            #endregion

            #region Public Properties

            /// <summary>
            /// Gets a value indicating whether this is the first instance of this application.
            /// </summary>
            public bool FirstInstance { get; private set; }

            #endregion

            #region Implemented Interfaces

            #region IDisposable

            /// <summary>
            /// The dispose.
            /// </summary>
            public void Dispose()
            {
                this.Dispose(true);
                GC.SuppressFinalize(this);
            }

            #endregion

            #endregion

            #region Methods

            /// <summary>
            /// Clean up any resources being used.
            /// </summary>
            /// <param name="disposing">
            /// True if managed resources should be disposed; otherwise, false.
            /// </param>
            protected virtual void Dispose(bool disposing)
            {
                if (this.disposed)
                {
                    return;
                }

                if (disposing)
                {
                    if (this.mutex != null && this.FirstInstance)
                    {
                        this.mutex.WaitOne();
                        this.mutex.ReleaseMutex();
                        this.mutex = null;
                    }
                }

                this.disposed = true;
            }

            /// <summary>
            /// Fires the OtherInstanceCreated event.
            /// </summary>
            /// <param name="arguments">
            /// The arguments to pass with the <see cref="OtherInstanceCreatedEventArgs"/> class.
            /// </param>
            protected virtual void OnOtherInstanceCreated(OtherInstanceCreatedEventArgs arguments)
            {
                EventHandler<OtherInstanceCreatedEventArgs> handler = this.OtherInstanceCreated;

                if (handler != null)
                {
                    handler(this, arguments);
                }
            }

            /// <summary>
            /// Listens for arguments on a named pipe.
            /// </summary>
            private void Listen()
            {
                try
                {
                    using (var server = new NamedPipeServerStream(this.identifier.ToString()))
                    {
                        using (var reader = new StreamReader(server))
                        {
                            server.WaitForConnection();
                            var arguments = new List<string>();

                            while (server.IsConnected)
                            {
                                arguments.Add(reader.ReadLine());
                            }

                            this.synchronizationContext.Post(o => this.OnOtherInstanceCreated(new OtherInstanceCreatedEventArgs(arguments)), null);                        
                        }
                    }

                    // start listening again.
                    this.Listen();
                }
                catch (IOException)
                {
                    // Pipe was broken, listen again.
                    this.Listen();
                }          
            }

            /// <summary>
            /// Listens for arguments being passed from successive instances of the applicaiton.
            /// </summary>
            private void ListenAsync()
            {
                Task.Factory.StartNew(this.Listen, TaskCreationOptions.LongRunning);
            }

            /// <summary>
            /// Passes the given arguments to the first running instance of the application.
            /// </summary>
            /// <param name="arguments">
            /// The arguments to pass.
            /// </param>
            private void NotifyFirstInstance(IEnumerable<string> arguments)
            {
                try
                {
                    using (var client = new NamedPipeClientStream(this.identifier.ToString()))
                    {
                        using (var writer = new StreamWriter(client))
                        {
                            client.Connect(200);

                            if (arguments != null)
                            {
                                foreach (string argument in arguments)
                                {
                                    writer.WriteLine(argument);
                                }
                            }
                        }
                    }
                }
                catch (TimeoutException)
                {
                    // Couldn't connect to server
                }
                catch (IOException)
                {
                    // Pipe was broken
                }
            }

 #endregion
    }

/// <summary>
/// Holds a list of arguments given to an application at startup.
/// </summary>
public class OtherInstanceCreatedEventArgs : EventArgs
{
    #region Constructors and Destructors

    /// <summary>
    /// Initializes a new instance of the <see cref="OtherInstanceCreatedEventArgs"/> class.
    /// </summary>
    /// <param name="args">
    /// The command line arguments.
    /// </param>
    public OtherInstanceCreatedEventArgs(IEnumerable<string> args)
    {
        this.Args = args;
    }

    #endregion

    #region Public Properties

    /// <summary>
    /// Gets the startup arguments.
    /// </summary>
    public IEnumerable<string> Args { get; private set; }

    #endregion
} 
```

然后在您的主类中，您可以创建将一直保留到应用程序运行的类的实例。您可以检查其他实例是否由属性创建，并获得由事件`FirstInstance`创建的其他实例的通知。`OtherInstanceCreated`

# python - 将python操作保存为二进制

> ID：10272304
> 
> 赞同：2
> 
> 时间：2012-04-22T21:33:26.570
> 
> 标签：python, numpy, binary

使用 numpy 并尝试以二进制形式打印 martices：

```
import numpy

G=numpy.matrix('100011;010101;001110')

H = numpy.matrix('011100;101010;110001')

print G
print H 
```

返回

```
[[100011]
 [  4161]
 [   584]]
[[  4672]
 [101010]
 [110001]] 
```

我怎样才能将我的矩阵保持为二进制，并且也可以在二进制中进行矩阵运算？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:39:33.930

“二进制”是指“布尔”吗？（为什么在世界上你使用你正在使用的语法？？）

```
import numpy as np

g = np.array([[1, 0, 0, 0, 1, 1], 
              [0, 1, 0, 1, 0, 1], 
              [0, 0, 1, 1, 1, 0]], dtype=bool)

h = np.array([[0, 1, 1, 1, 0, 0], 
              [1, 0, 1, 0, 1, 0],
              [1, 1, 0, 0, 0, 1]], dtype=bool) 
```

至于区别，请考虑`1 + 1`。在二进制中，你会得到`2`( `0b10`)。在布尔表示中，你会得到`1`.

所以，如果你想`[0, 1] + [0, 1]`成为`[1, 0]`，那么你想要二进制。如果你希望它是`[0, 1]`，那么你希望它是布尔值。

同样，如果你想`[1, 1] + [1, 0]`成为`[1, 0, 1]`，那么你希望它是二进制的。如果你希望它是`[1, 1]`，那么你希望它是布尔值。

作为您提到的一些操作的示例（使用布尔值）：

```
print 'g * h ...'
print g * h

print 'g * h viewed as integers...'
print (g * h).view(np.int8) # or x.astype(int), but the latter makes a copy

a = np.array([1, 1, 0], dtype=bool)
print 'Matrix multiplication of [1, 1, 0] with g...'
print a.dot(g) # Or we could do g.T.dot(a) 
```

这产生：

```
g * h ...
[[False False False False False False]
 [False False False False False False]
 [False False False False False False]]

g * h viewed as integers...
[[0 0 0 0 0 0]
 [0 0 0 0 0 0]
 [0 0 0 0 0 0]]

Matrix multiplication of [1, 1, 0] with g...
[ True  True False  True  True  True] 
```

# objective-c - 何时使用类扩展在 .m 文件中创建初始化方法？

> ID：10272308
> 
> 赞同：3
> 
> 时间：2012-04-22T21:33:56.190
> 
> 标签：objective-c, class-extensions

我正在阅读 Apple 的教程之一（您的第二个 iOS 应用程序）。基本上，您有一个主数据类和一个数据控制器类。控制器类通过创建包含它们的数组来操作主要数据对象。

突然出现这个：

“...但是“创建主集合”任务是只有数据控制器对象需要知道的任务。由于此方法不需要暴露给其他对象，因此您无需在标头中声明文件。”

事实证明，“主集合”的初始化作为类扩展而不是头文件出现在 .m 文件中。我们为什么要这样做？直接在头文件中声明初始化方法有什么问题？

数据控制器的头文件：

```
#import <Foundation/Foundation.h>

@class BirdSighting;
@interface BirdsSightingDataController : NSObject

@property (nonatomic, copy) NSMutableArray *masterBirdSightingList;
- (NSUInteger)countOfList;
- (BirdSighting *)objectInListAtIndex:(NSUInteger)theIndex;
- (void)addBirdSightingWithName:(NSString *)inputBirdName location:(NSString *)inputLocation;

@end 
```

这是相应的 .m 文件：

```
#import "BirdsSightingDataController.h"
#import "BirdSighting.h"

@interface BirdsSightingDataController ()

- (void)initializeDefaultDataList; //class extension

@end

@implementation BirdsSightingDataController
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:50:30.343

将方法放在 .m 文件内部的接口中是制作方法的正确方法`hidden`。

-

在头文件中声明这个方法并没有什么“错误”。如果你愿意，你可以这样做。

但是，如果不需要公开方法，最好使用私有标头扩展来隐藏实现文件中的方法。这意味着如果没有其他类需要调用此方法，或者如果没有其他程序员需要调用此方法，那么最好将方法保持为私有或隐藏。

像这样的案例将有助于解释这种情况：

首先，将方法放在 .m 文件中的隐藏接口扩展名中是一个有意识的决定。作为另一位开发人员，如果我在查看您的代码并看到您有意识地决定在您的实现文件中的隐藏接口（）中放置一个方法，我会知道该方法仅在此类中使用......并且你是故意这样做的。

此外，这是一种很好的做法，因为如果您正在开发一个将被其他人使用的 API，或者与其他开发人员使用相同的代码库，它会限制他们调用类本身之外的特定方法的能力。这意味着，他们不会意外地从另一个对象调用该方法。

# php - PHP获取多维数组中所有数组的第一个值

> ID：10272314
> 
> 赞同：13
> 
> 时间：2012-04-22T21:34:58.633
> 
> 标签：php, multidimensional-array

这是我的多维数组的一部分：

```
Array ( 
[0] => Array ( [0] => Height [1] => 40 ) 
[1] => Array ( [0] => Weight [1] => 15 ) 
[2] => Array ( [0] => Ctr_Percent [1] => 15 ) 
) 
```

仅打印`height`,`weight`和的语法是什么`ctr_percent`？我并不是说像这样呼应它：

```
echo $array[0][0];
echo $array[1][0]; 
```

有没有办法遍历整个多维数组并回显每个子数组的第一个值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-22T21:37:27.167

假设您使用 php 5.3：

```
$first_elements = array_map(function($i) {
    return $i[0];
}, $data); 
```

否则你需要实现一个回调函数或者只使用普通的旧的`foreach`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-12-06T15:23:26.490

这是一个单行：

```
array_map('array_shift', $array); 
```

将返回：

```
Array
(
    [0] => Height
    [1] => Weight
    [2] => Ctr_Percent
) 
```

这是另一个：

```
array_combine(array_map('array_shift', $temp), array_map('array_pop', $temp)) 
```

将返回：

```
Array
(
    [Height] => 40
    [Weight] => 15
    [Ctr_Percent] => 15
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-24T16:14:04.860

使用[array_column](https://www.php.net/manual/en/function.array-column)：

```
$result = array_column($array, 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T21:37:34.087

```
foreach ($main_array as $inner_array){
  echo $inner_array[0] . "\n";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T21:40:35.573

```
foreach($array as $x) {
   echo $x[0]."\n";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-06T15:33:35.550

我认为您正在寻找的功能`reset()`是

```
array_map('reset', $array); 
```

或者

```
foreach ($array as $subarray)
    echo reset($subarray)."\n"; 
```

请注意，即使 0 不是数组的第一个索引，这也有效。例如`$a = [1=>5,0=>3]; echo reset($a);`仍然会`echo 5;`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-07-31T10:01:31.480

最简单的方法是使用`array_walk`

```
 function getFirstElement(&$val){
            $val = $val[0];
        }
        array_walk($data,'getFirstElement'); 
```

现在，如果您像这样打印 $data，`print_r($data);`您将得到如下结果

```
Array
(
   [0] => Height
   [1] => Weight
   [2] => Ctr_Percent
) 
```

# objective-c - Objective C - iOS，在屏幕外的静态表格单元格中遍历 UILabel

> ID：10272315
> 
> 赞同：2
> 
> 时间：2012-04-22T21:34:59.003
> 
> 标签：objective-c, ios, uitableview, uilabel

我有一个由静态单元格组成的 UITableView，每个单元格都包含一个 UILabel，它在屏幕加载时填充了字段数据。单元格的数量超出了一个屏幕的容量，因此表格视图会滚动。UILabel 在设计时是隐藏的，我想在设置完所有文本属性后将它们设置为可见。我一直在使用 tableView 的 subviews 属性来遍历标签到 setHidden:NO 但这只会影响当前正在查看的单元格中的标签。无论哪些 UILabel 是否在视图中，我如何遍历所有 UILabel？

谢谢乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:59:44.123

你可以在你的`tableView:cellForRowAtIndexPath:`方法中解决这个问题。

假设您[按照 Apple 指南建议的方式](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html)实现了静态单元格，您`tableView:cellForRowAtIndexPath:`应该看起来像一系列`if-then-else`语句，返回通过`IBOutlet`对象提供的单元格：

```
if (indexPath.row == 0) {
    return cell1;
} else if (indexPath.row == 1) {
    return cell2;
} // .. and so on 
```

修改此代码如下：

```
UITableViewCell *res = nil;
if (indexPath.row == 0) {
    res = cell1;
} else if (indexPath.row == 1) {
    res = cell2;
} // .. and so on
// Call your custom code that makes the label visible
if (allTextPropertiesHaveBeenLoaded) {
    [res setMyLabelVisible];
}
return res; 
```

设置所有文本属性后，调用`reloadData`以强制所有单元格通过您`tableView:cellForRowAtIndexPath:`并重新配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:03:09.600

只需调用 cellForRowAtIndexPath: 方法

```
for(NSUInteger i = 0; i < numberOfCells; i++) {
UITableView* cell = [tableView cellForRowAtIndexPath: [NSIndexPath indexPathForRow:i  inSection:0];
} 
```

# c++ - 如何从私有成员子类对象中捕获异常？

> ID：10272317
> 
> 赞同：1
> 
> 时间：2012-04-22T21:35:29.710
> 
> 标签：c++

给定下面的伪代码，我想捕获 B 类中的子对象 a 抛出的异常，并在 B 中维护该对象私有。如下所述的 catch 子句不起作用，因为对象 a 在 B 中是私有的。我怎样才能捕捉到这个异常？

**编辑** 我已将伪代码更改为将 A 类嵌入到 B 类中。

```
class B
{
    class A
    {
        public:
        class Exception{};
        A() throw(Exception) { ... }  // A ctor throws an Exception class object
    } a;
    public:
    B() { ... }     //  B ctor
};

int main()
{
    try
    {
        B b;
    }
    catch( B::A::Exception& )
    {
        ...
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:38:25.387

你不需要`B::A::Exception`在`catch`子句中说，除非类`A`是在里面定义的`B`。既然您已经对其进行了编辑以*使其*如此，`B::A::Exception`那么*如果* `A`在外部可见`B`并且`Exception`在外部可见`A`......或者如果`B::A::Exception`以其他方式可用（如通过 typedef，*如*[pmr 所建议的那样](https://stackoverflow.com/a/10272340/319403)）是合适的。

如果不是，你根本不应该扔它。（在这种情况下，不是这样，所以是的。不要那样做。）如果他们甚至看不到它的类型，他们如何合理地捕捉到那个异常？

您可以使这项工作的一种方法是将类的声明与成员变量的声明分开。有点像

```
class B {
 public:
    B() { }

    class A {
     public:
        class Exception {};
        A() { /* throw Exception(); */ }
    };
 private:
    A a;
}; 
```

但坦率地说，typedef 听起来更优雅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:38:55.807

将 typedef 添加到周围类的异常中。

```
class B
{
    class A
    {
        public:
        class Exception{};
        A() throw(Exception) {  }  // A ctor throws an Exception class object
    } a;

public:
  typedef A::Exception Except;
    B() {  }     //  B ctor
};

int main()
{
    try
    {
        B b;
    }
    catch( B::Except& )
    {

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:14:46.617

您可能需要重新考虑在构造函数中抛出异常。[这就是原因](http://herbsutter.com/2008/07/25/constructor-exceptions-in-c-c-and-java/)（抛出异常时不会调用析构函数）

例外确实是针对特殊情况的。不要过度使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T21:55:16.577

由于`A`是私有的，因此您无法访问该类型`Exception`来捕获它。有几个解决方案，首先是捕捉任何东西：

```
try {
    B b;
} catch(...) {
} 
```

其次是创建一个在 main 中可见的单独的 Exception 类。

最后，您可以进行`B::A::Exception`extend`std::Exception`和 catch `std::Exception`。

# c# - 处理 ListView 窗口消息

> ID：10272321
> 
> 赞同：0
> 
> 时间：2012-04-22T21:36:38.863
> 
> 标签：c#, listview

我正在尝试为从 ListView 添加或删除项目时添加一个事件。这是我到目前为止所拥有的：

```
protected override void OnNotifyMessage(Message m)
    {
        const int WM_ERASEBKGND = 0x14;
        const int LVM_FIRST = 0x1000;
        const int LVM_DELETEITEM = LVM_FIRST + 8;
        const int LVM_DELETEALLITEMS = LVM_FIRST + 9;
        const int LVM_INSERTITEMA = LVM_FIRST + 7;
        const int LVM_INSERTITEMW = LVM_FIRST + 77;

        //Filter out the WM_ERASEBKGND message to prevent flicker when redrawing
        if (m.Msg == WM_ERASEBKGND) return;

        base.OnNotifyMessage(m);

        if (m.Msg == LVM_DELETEITEM || m.Msg == LVM_DELETEALLITEMS)
        {
            if (ItemsRemoved == null) return;

            ItemsRemoved(null, EventArgs.Empty);
        }
        else if (m.Msg == LVM_INSERTITEMA || m.Msg == LVM_INSERTITEMW)
        {
            if (ItemsAdded == null) return;

            ItemsAdded(null, EventArgs.Empty);
        }
    } 
```

问题是，当 ItemsRemoved 事件被触发时，ListView 的项目数没有改变。例如，当执行`ListView.Items.Clear()`LVM_DELETEALLITEMS 消息被处理但触发 ItemsRemoved 事件时，项目计数仍显示为 > 0。

有什么想法我在这里出错了吗？

# sql - SQL查询以获取随机未使用的组合

> ID：10272323
> 
> 赞同：0
> 
> 时间：2012-04-22T21:36:49.973
> 
> 标签：sql, database

**背景：**

我想创建一个可以运行 1 对 1 比赛的数据库。它需要跟踪每场比赛的获胜者和失败者以及有关该比赛的任何评论，并随机决定下一场独特的比赛。

**规则：**

有x个玩家。每个玩家最终将与其他玩家玩一次，实际上涵盖了所有可能的独特玩家组合。

**数据库表（带有示例数据）：**

```
DECLARE @Players TABLE (
    ID INT PRIMARY KEY IDENTITY,
    Name VARCHAR(50)
)

ID Name  
-- ----- 
1  Alex  
2  Bob   
3  Chris 
4  Dave 

DECLARE @Matches TABLE (
    ID INT PRIMARY KEY IDENTITY,
    WinnerId INT,
    LoserId INT
)

ID WinnerId LoserId 
-- -------- ------- 
1  1        2       
2  4        2       
3  3        1    

DECLARE @Comments TABLE (
    ID INT PRIMARY KEY IDENTITY,
    MatchId INT,
    Comment VARCHAR(MAX)
)

ID MatchId Comment                        
-- ------- ------------------------------ 
1  2       That was a close one.          
2  3       I did not expect that outcome. 
```

**问题：**

*   如何有效地查询以获得尚未发生的单个随机匹配？

主要问题是玩家的数量会随着时间的推移而增长。现在在我的示例数据中，我只有 4 名球员，剩下 6 场可能的比赛。

```
Alex,Bob
Alex,Chris
Alex,Dave
Bob,Chris
Bob,Dave
Chris,Dave 
```

这将足够小，只需继续抓取与玩家 id 相对应的 2 个随机数，然后检查匹配表是否已经发生该匹配。如果有：再拿 2 个并重复该过程。如果还没有，则将其用作下一场比赛。但是，如果我有 10,000 名玩家，那将是 49995000 次可能的对决，它只会变得太慢。

谁能指出我正确的方向以进行更有效的查询？如果这也有助于提高效率，我对数据库设计的更改持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:46:20.983

如果您在每个可能的配对和已播放的配对之间进行外部连接，然后过滤掉已播放的配对，则剩下尚未播放的配对。选择一个随机的就是一个简单的排序情况：

```
SELECT p1.Name, p2.Name FROM
  Players p1
  JOIN Players p2 ON (
    p1.ID < p2.ID
  )
  LEFT JOIN Matches ON (
       (WinnerId = p1.ID AND LoserId = p2.ID)
    OR (WinnerId = p2.ID AND LoserId = p1.ID)
  )
WHERE Matches.ID IS NULL
ORDER BY RAND()
LIMIT 1; 
```

* * *

**编辑**

正如下面的[ypercube](https://stackoverflow.com/users/344949/ypercube)所指出的，上面的`LIMIT`语法是 MySQL 特定的。您可能需要为您的 SQL 实现使用适当的语法 - 让我们知道它是什么，如果需要，有人可以提供建议。我知道在 Microsoft SQL Server 中使用[`TOP`](http://technet.microsoft.com/en-us/library/ms189463.aspx)和在 Oracle 中[`ROWNUM`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns009.htm)，但除此之外你的谷歌搜索可能和我的一样好。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:45:15.947

虽然数据集很大，但是[`limit`](http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html)只要返回一个key，使用key就会停止额外的处理。一种可能性可能是使用如下查询来返回下一个匹配项。

```
SELECT * FROM Players p1, Players p2 WHERE p1.ID <> p2.ID AND (p1.ID, p2.ID) NOT IN (Select WinnerID, LoserID FROM Matches) AND (p2.ID, p1.ID) NOT IN (Select WinnerID, LoserID FROM Matches) LIMIT 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T21:50:07.193

我想知道为什么你需要随机选择 2 个玩家。如何预先生成可能匹配的整个列表，然后添加一个 WinnerId 列？对于下一场比赛，只需选择没有设置 WinnerId 的第一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:29:01.713

对于您的问题，您希望 A) 以随机顺序考虑玩家 B) 的所有 2 元素子集。

对于 A，其他答案建议使用具有各种条件的 SQL 连接。如果您确实需要处理 10,000 个玩家，那么数据库密集度较低的解决方案可能是使用有效的组合生成算法。我找到了一个先前的答案，列出了 TAOCP vol 中的一些内容。4[这里](https://stackoverflow.com/a/127856)。对于 2 元素子集的情况，按字典顺序对玩家 id 进行简单的双嵌套循环就可以了：

```
for player_a in 1..num_players:
  for player_b in player_a+1..num_players:
    handle a vs. b 
```

对于 B 部分，您可以使用第二个表将玩家映射`1..n`到整数的洗牌`1..n`。保持这个打乱的映射，直到你完成比赛过程。您可以使用[Knuth-Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)。

要跟踪您在此问题的实例中所处的位置，您可能希望定期将组合生成器的状态保存到数据库中。这可能比仅从原始表中找出您在序列中的位置要快。

正如您所提到的，以这种方式处理 10,000 名球员的比赛会导致近 5000 万场比赛需要处理。您可能会考虑一种不需要每个玩家与其他玩家竞争的锦标赛结构。例如，如果 A 击败 B 并且 B 击败 C，那么您可能不必考虑 A 是否击败 C。如果适用于您的场景，这种捷径可以节省大量时间。

# objective-c - 添加子视图后属性为空

> ID：10272330
> 
> 赞同：0
> 
> 时间：2012-04-22T21:37:44.303
> 
> 标签：objective-c, uipopovercontroller, addsubview

我正在启动一个应该绘制两个按钮（添加和删除按钮）的 UIPopoverViewController。UIPopover 的 ContentViewController 有一个名为的属性，该属性`outputJackView`在 UIPopoverViewController 启动之前设置。这个属性是按钮正确绘制所必需的。问题就在第一个按钮被添加为子视图之后，`outputJackView`以某种方式设置为 null。

这是 UIPopoverViewController 的 ContentViewController：

CableConnectionMenuController.h

```
#import <UIKit/UIKit.h>
@class JackView;

@interface CableConnectionMenuController : UIViewController
{
JackView *outputJackView;
}

@property (nonatomic, weak) id <CableConnectionDelegate> delegate;
@property (nonatomic, strong) JackView *outputJackView;

- (void)setButtonTextWithOutputJack:(JackView *)outputJack withInputArray:(NSMutableArray *)inputArray;
- (void)createAddConnectionButton;
- (void)createDeleteConnectionButton;
@end 
```

CableConnectionMenuController.m

```
#import "CableConnectionMenuController.h"
#import "JackView.h"
#import "CableDisconnectButton.h"

@implementation CableConnectionMenuController

@synthesize delegate;
@synthesize outputJackView; 
```

...

```
- (void)viewDidLoad
{
[super viewDidLoad];

//alloc output jack view
self.outputJackView = [[JackView alloc] init];

//set size of popover view in cables view
self.contentSizeForViewInPopover = CGSizeMake(200, 200);

//change view background color
self.view.backgroundColor = [UIColor whiteColor];
}

//this method is called from the class that launches the UIPopoverViewController
- (void)setButtonTextWithOutputJack:(JackView *)outputJack withInputArray:(NSMutableArray *)inputArray
{
//set output jack which will be the same for all inputs
self.outputJackView = outputJack;

//draw add connection button
[self createAddConnectionButton];

//draw delete connection button - not working
//[self createDeleteConnectionButton];
}

- (void)createAddConnectionButton
{
CableDisconnectButton *addConnectionButton = [CableDisconnectButton buttonWithType:UIButtonTypeCustom];
addConnectionButton.frame = CGRectMake(0, 0, 190, 40);
[addConnectionButton setBackgroundImage:[UIImage imageNamed:@"images/cable_connect_button.png"] forState:UIControlStateNormal];
[addConnectionButton setBackgroundImage:[UIImage imageNamed:@"images/cable_connect_button_over.png"] forState:UIControlStateHighlighted];

//add output jack
addConnectionButton.outputJack = self.outputJackView;

//add action to button
[addConnectionButton addTarget:self action:@selector(addConnectionButtonTarget:) forControlEvents:UIControlEventTouchUpInside];

NSLog(@"output jack name before: %@", self.outputJackView.jackName);

[self.view addSubview:addConnectionButton];

NSLog(@"output jack name after: %@", self.outputJackView.jackName);
} 
```

最后的两个 NSLog 在第一个（之前）正确返回名称，并在第二个（之后）返回 null。`jackName`属性是 NSString 的。很明显，在添加子视图后该属性被设置为 null，但我无法弄清楚为什么会发生这种情况。

这是启动 UIPopoverViewController 的类中的方法，以防万一：

```
- (void)editCableConnectionsWith:(JackView *)outputJack
{
//launches the note menu popover
self.cableConnectionMenuController = [[CableConnectionMenuController alloc] init];
self.cableConnectionMenuController.delegate = (id)self;

//find appropriate connection to edit
for (JackView *currentJack in jackArray)
{
    if (currentJack == outputJack)
    {
        //create temp array of input jacks to send to cable connection controller
        NSMutableArray *inputButtonTempArray = [self returnInputJackArrayWithOutputJack:currentJack];

        //set information for creating disconnect buttons in popover
        [self.cableConnectionMenuController setButtonTextWithOutputJack:currentJack withInputArray:inputButtonTempArray];
    }
}

self.editConnectionsPopoverController = [[UIPopoverController alloc] initWithContentViewController:self.cableConnectionMenuController];

[self.editConnectionsPopoverController presentPopoverFromRect:pulseRing.frame inView:self permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:10:03.663

jackName 属性是如何声明的？我的猜测是它是一个弱参考。

我有一个类似的问题，在视图添加为子视图后，视图上的弱引用被重置。我的理解是，只有在存在潜在的保留周期时才应使用弱引用（例如，您有一个带有计算器引用的背包，并且计算器指向背包——请参阅[Big Nerd Ranch 书](https://rads.stackoverflow.com/amzn/click/com/0321821521)）。

我不太清楚为什么这是一个问题，但我遇到了类似的事情并想我会分享。

# android - 奇怪的kindle fire布局问题

> ID：10272334
> 
> 赞同：0
> 
> 时间：2012-04-22T21:38:11.703
> 
> 标签：android, xml, screen-orientation, kindle-fire

我已经编写了一个带有视图的 android 应用程序，该活动依赖于对视图包装器的 getHeight() 函数的回调，该函数使用附加到视图包装器的 viewTreeObserver 的 OnGlobalLayoutListener 来确定它在 onCreate 期间必须使用的空间量。通常这小于 chordDisplay 在下面的 xml 中请求的 400px。这在 android 模拟器中完美运行，适用于使用 android 2.1 和 4.03 的各种屏幕尺寸。但是，在我的 kindle fire 上，当我以横向方式启动应用程序时（小于 400 像素可用），回调最初不会返回正确的高度，直到我手动或通过代码将方向切换为纵向并返回横向。这意味着我的视图内容最初的大小不正确。

当我最初以横向启动应用程序时的示例 logcat 输出：

```
 04-22 17:31:28.249: D/onGlobalLayout(12979): chordDisplay.getHeight(): 400 
```

然后我切换到纵向并返回横向：

```
 04-22 17:32:44.546: D/onGlobalLayout(12979): chordDisplay.getHeight(): 350 
```

考虑到在方向更改期间发生的所有事情都是应用程序中对 onCreate() 的另一个调用，我不明白这是怎么发生的，对吧？这与我启动应用程序时发生的事情相同。

有没有人在他们的应用程序中遇到过类似的方向切换/布局错误？/知道为什么会发生这种情况吗？任何帮助将不胜感激......谢谢。

代码：

```
OnGlobalLayoutListener thelistener;
RelativeLayout chordDisplayWrapper;
TableRow.LayoutParams lp;
private ChordAdapter chordAdapter;
private HorizontalListView chordDisplay

thelistener = new OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {
                chordDisplayWrapper.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                Log.d("onGlobalLayout", "chordDisplay.getHeight(): " + chordDisplay.getHeight());
                lp = new TableRow.LayoutParams(chordDisplay.getHeight()/6 -2,chordDisplay.getHeight()/6 -2); //6 just works.  I shrink it a tiny bit to compensate for some weird bug.
                chordAdapter = (new ChordAdapter(mcontext, R.layout.row, magicbundle, lp));
                chordDisplay.setAdapter(chordAdapter);
            }
        };
        chordDisplayWrapper.getViewTreeObserver().addOnGlobalLayoutListener(thelistener); 
```

涉及的视图的 xml 布局：

```
 <RelativeLayout
        android:id="@+id/chordDisplayWrapper"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:gravity="center" >

        <berry.chordsfree.HorizontalListView
            android:id="@+id/testerList"
            android:layout_width="wrap_content"
            android:layout_height="400px"
            android:layout_centerInParent="true"
            android:gravity="center" />
   </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:43:44.993

您现在可能已经解决了这个问题，但是为以后可能遇到此问题的人发帖以供后代使用 -

我在运行自定义 2.3.7 ROM 的 Nexus One 上遇到了同样的问题，但代码在我的 Nexus Galaxy 上运行，库存为 4.1.1。

与您类似，我正在尝试在`onCreate`使用`ViewTreeObserver`. 我已经尝试手动调用`dispatchGlobalLayout`并确定它不是`onGlobalLayout`不触发的问题。我尝试将元素移动到活动中`onWindowFocusChanged`但没有成功（但我想避免在那里进行大量调整）。这花费了我一天多的工作时间，所以我现在只是使用快速/肮脏的修复。如果我只是调整有问题的布局/视图，它会正常显示，`onCreate`完成后：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);

    if (!reset) {

        LinearLayout frameItem = (LinearLayout) findViewById(R.id.frameItem);
        frameItem.setVisibility(LinearLayout.GONE);
        frameItem.setVisibility(LinearLayout.VISIBLE);
        reset = true;
    }
} 
```

# asp.net-mvc - 温泉。它是 MVC4 中真正的单页应用程序吗？

> ID：10272335
> 
> 赞同：1
> 
> 时间：2012-04-22T21:38:12.640
> 
> 标签：asp.net-mvc

我注意到很多人认为 SPA 只是交互式页面（单击按钮 - 获取对话框）。SPA 还意味着在页面之间传输（通过更改 URL、支持历史记录等）。Gmail 就是一个很好的例子。

*ASP.NET* MVC 4 是提供整个 SPA 的实现还是只是“单击按钮 - 获取对话框”（就像在他们的[模板](http://www.asp.net/single-page-application/getting-started-with-spa/spa-walkthroughs/walkthrough-getting-started-with-spa)中一样）？

如果是，我可以在哪里阅读文档或查看示例？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T19:48:44.407

VS 2012 的发布告诉我们答案是否定的……模板不存在。

在这里，我找到了一个非常好的解释如何创建 SPA： http: [//pluralsight.com/training/Courses/TableOfContents/spa](http://pluralsight.com/training/Courses/TableOfContents/spa)

# php - 如何在 PHP 中构建一个 android 推送通知服务器

> ID：10272342
> 
> 赞同：5
> 
> 时间：2012-04-22T21:39:30.487
> 
> 标签：php, android, json, zend-framework, push-notification

我正在开发一个应用程序，在该应用程序中我需要实现推送通知。

谁能建议我如何在 PHP 中开发服务器（如果可能的话，Json，Zend 框架）并为我提供一个关于推送通知的好教程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T11:51:06.700

[“Android 云到设备消息传递 (C2DM) 已弃用”](http://developer.android.com/guide/google/gcm/c2dm.html)。它的新版本是**Google Cloud Messaging (GCM)**。[developer.android.com](http://developer.android.com/guide/google/gcm/index.html)上有大量信息和源代码示例。

这是[Android Push Notifications](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)的另一篇有用的帖子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T04:55:07.333

每当您想向 Android 设备发送消息时，您的服务器联系人 -> Google 服务器联系人 -> android 设备。

因此，您将 ZF 应用程序与 google c2d api 集成。在这里，您可以找到这种与 ZF 集成的此类实现 [http://blog.digitalstruct.com/2010/11/21/android-c2dm-with-php-and-zend-framework/](http://blog.digitalstruct.com/2010/11/21/android-c2dm-with-php-and-zend-framework/)

# delphi - DevExpress ExpressSkins 还是 VCL 样式？

> ID：10272344
> 
> 赞同：6
> 
> 时间：2012-04-22T21:39:45.473
> 
> 标签：delphi, devexpress, delphi-xe2, vcl-styles

我正在开发一个用 Delphi 编写的大型遗留应用程序。大多数组件是 VCL 和 DevExpress QuantumGrid 组件。我需要更新 UI 以支持各种样式和更现代的外观和感觉。最初我打算切换到 DevExpress ExpressSkins 库（我已经拥有完整的 DevExpress VCL 订阅）并将所有组件替换为 DevExpress 组件。然而，自从我将项目升级到 Delphi XE2 之后，随之而来的是 VCL Styles 技术。

这些库的优缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T02:22:43.167

我没有使用 VCL 样式，因为我也有 Dev Express 并且喜欢使用他们的皮肤。但这是我为 DX 皮肤准备的两分钱。

DX皮肤的优点：

*   看起来相当不错
*   总是有更多的皮肤出来
*   如果您在应用程序中使用 DX 功能区，则为最终用户内置样式选择器小部件
*   DX 对其组件有很大的支持

DX皮肤的缺点：

*   由于屏幕绘制速度慢，无法在 Citrix 或终端服务环境中使用
*   每个皮肤都会在你的USES子句中添加一个条目，这对于版本控制来说可能很麻烦

# iphone - UIImage 的透明颜色为白色

> ID：10272345
> 
> 赞同：0
> 
> 时间：2012-04-22T21:39:56.727
> 
> 标签：iphone, colors, uiimage, transparent

我意识到我所有的 png 图像都是用透明颜色而不是白色定义的。我从来没有注意到，因为我的应用程序的背景是白色的，但现在是不同的颜色。而且由于我无法编辑每个单独的 png 文件以将透明颜色替换为白色，因此我正在寻找一种简单的编程方法来动态地将透明颜色替换为白色。请问我该怎么做？

谢谢你的帮助

干杯，吉比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:52:38.710

如果我了解您要做什么，我建议您在 UIImageViews 中添加白色背景。

```
self.myImageView.backgroundColor = [UIColor whiteColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:50:56.470

我不明白为什么你不能“编辑每个单独的 png 文件”；这是一个使用 GraphicConverter 或 ImageMagick 或其他任何东西的即时批处理操作。

如果您真的坚持在加载图像时在设备上对此进行补偿，那么只需将图像绘制到白色不透明矩形上并使用生成的合成图像。

# iphone - iOS 5.1 通过 BluetoothManager 切换蓝牙

> ID：10272349
> 
> 赞同：1
> 
> 时间：2012-04-22T21:40:19.143
> 
> 标签：iphone, ios5, frameworks, bluetooth

我想试试蓝牙管理器。但是在阅读和测试了这里的所有条目后，我真的很困惑。

首先，我在

```
Xcode/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/PrivateFrameworks/BluetoothManager.framework 
```

所需的框架。但那里只有二进制文件。所以我添加了一个“Headers”文件夹并将[BluetoothManager.h](http://iphone-dev.googlecode.com/svn/branches/include-1.2-sdk/include/BluetoothManager/)文件放入其中。

在我的项目中，我添加了这个框架，但它找不到任何 BluetoothManager.h 文件，所以如果我使用会出现错误

```
#import "BluetoothManager.h" 
```

或者

```
#import <BluetoothManager/BluetoothManager.h> 
```

我想用下面的代码来启动BT：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
#if TARGET_IPHONE_SIMULATOR
    exit( EXIT_SUCCESS ) ;
#else
    /* this works in iOS 4.2.3 */
    Class BluetoothManager = objc_getClass( "BluetoothManager" ) ;
    id btCont = [BluetoothManager sharedInstance] ;
    [btCont setPowered:YES] ;
#endif
    return YES ;
} 
```

我也尝试了这里的所有想法：

[这里](https://stackoverflow.com/questions/1743610/programmatically-turn-on-bluetooth-in-the-iphone-sdk) 或 [这里](https://stackoverflow.com/questions/4518406/is-there-a-way-to-toggle-bluetooth-and-or-wifi-on-and-off-programatically-in-ios) 或 [这里](https://stackoverflow.com/questions/4518406/is-there-a-way-to-toggle-bluetooth-and-or-wifi-on-and-off-programatically-in-ios)

有没有人真正的好主意、教程或使用 (PrivateFramework/)BluetoothManager 在 iPhone、SKD 5.1 上切换蓝牙的真正运行示例？

非常感谢。

伊西康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T14:03:31.683

您可以使用来自 github 的类转储工具生成头文件

或者将以下内容（我为 IOS 5.1 生成）复制/粘贴到 BluetoothManager.h 并将该文件添加到您的项目中。那么你不应该看到错误。

* * *

```
@class NSMutableDictionary;

@interface BluetoothManager : NSObject
{
    struct BTLocalDeviceImpl *_localDevice;
    struct BTSessionImpl *_session;
    int _available;
    BOOL _audioConnected;
    BOOL _scanningEnabled;
    BOOL _scanningInProgress;
    unsigned int _scanningServiceMask;
    struct BTDiscoveryAgentImpl *_discoveryAgent;
    struct BTPairingAgentImpl *_pairingAgent;
    struct BTAccessoryManagerImpl *_accessoryManager;
    NSMutableDictionary *_btAddrDict;
    NSMutableDictionary *_btDeviceDict;
}

+ (id)sharedInstance;
+ (int)lastInitError;
- (BOOL)available;
- (id)init;
- (BOOL)_attach:(id)arg1;
- (BOOL)_setup:(struct BTSessionImpl *)arg1;
- (void)_cleanup:(BOOL)arg1;
- (void)dealloc;
- (void)_postNotificationWithArray:(id)arg1;
- (void)_postNotification:(id)arg1;
- (void)postNotification:(id)arg1;
- (void)postNotificationName:(id)arg1 object:(id)arg2;
- (void)postNotificationName:(id)arg1 object:(id)arg2 error:(id)arg3;
- (int)powerState;
- (BOOL)powered;
- (BOOL)enabled;
- (BOOL)setPowered:(BOOL)arg1;
- (BOOL)setEnabled:(BOOL)arg1;
- (void)_powerChanged;
- (BOOL)isAnyoneScanning;
- (id)addDeviceIfNeeded:(struct BTDeviceImpl *)arg1;
- (void)_removeDevice:(id)arg1;
- (BOOL)wasDeviceDiscovered:(id)arg1;
- (BOOL)deviceScanningEnabled;
- (BOOL)deviceScanningInProgress;
- (void)resetDeviceScanning;
- (void)_scanForServices:(unsigned int)arg1 withMode:(int)arg2;
- (void)scanForServices:(unsigned int)arg1;
- (void)scanForConnectableDevices:(unsigned int)arg1;
- (void)setDeviceScanningEnabled:(BOOL)arg1;
- (void)_restartScan;
- (void)_setScanState:(int)arg1;
- (void)_discoveryStateChanged;
- (BOOL)isDiscoverable;
- (void)setDiscoverable:(BOOL)arg1;
- (BOOL)devicePairingEnabled;
- (void)setDevicePairingEnabled:(BOOL)arg1;
- (void)cancelPairing;
- (void)unpairDevice:(id)arg1;
- (id)pairedDevices:(BOOL)arg1;
- (id)pairedDevices;
- (id)pairedLEDevices;
- (void)setPincode:(id)arg1 forDevice:(id)arg2;
- (void)acceptSSP:(int)arg1 forDevice:(id)arg2;
- (void)connectDevice:(id)arg1 withServices:(unsigned int)arg2;
- (void)connectDevice:(id)arg1;
- (BOOL)connectable;
- (void)setConnectable:(BOOL)arg1;
- (id)connectingDevices;
- (id)connectedDevices;
- (BOOL)_onlySensorsConnected;
- (BOOL)connected;
- (void)_connectedStatusChanged;
- (void)_connectabilityChanged;
- (BOOL)audioConnected;
- (void)setAudioConnected:(BOOL)arg1;
- (void)startVoiceCommand:(id)arg1;
- (void)endVoiceCommand:(id)arg1;
- (BOOL)isServiceSupported:(unsigned int)arg1;
- (void)enableTestMode;

@end 
```

* * *

# css - 有没有办法定义别名并在 Sass 或 Less 中使用 CSS 定义

> ID：10272350
> 
> 赞同：0
> 
> 时间：2012-04-22T21:40:32.810
> 
> 标签：css, sass, less

**编辑：在不使用`@mixin`and的情况下实现这种方法`@include`**

目前我正在使用 Sass 作为我的 CSS 预编译器，用于一个大型的全新项目。我承认，我真的很喜欢这个工具背后的想法，当你想将它与`@mixin`功能一起使用时，它会变得更有用。

我想更快地使用 Sass。我的想法是，为变量分配别名并在 CSS 声明中使用它。考虑以下代码块。

```
$背景颜色：#F1F2F2；

身体 {
    背景：$背景颜色；
}

```

在 Sass 中运行良好。但我想实现，

```
$backgroundColor: "背景：#F1F2F2";

身体 {
    $背景颜色；
}

```

这个块在 Sass 中返回错误。任何想法，或者是否可以以这种方式使用 Sass？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T21:54:23.150

```
@mixin backgroundColor {
    background: #F1F2F2;
}

body {
    @include backgroundColor;
} 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:14:26.040

我对 SASS 不太熟悉（不过它很棒），我不知道您是否可以将属性名称分配为变量的值，但是您的缩短方式可能有问题的可能是数据类型问题。由于属性名称和值似乎不是单引号/双引号字符串（并且由于您使用引号），这种情况可能会使 SASS 感到困惑。我认为您应该尝试以下模式：

```
$backgroundColor: background + : + #F1F2F2;

body {
    $backgroundColor;
} 
```

# php - 将选项数组中的值传递给嵌入式表单

> ID：10272353
> 
> 赞同：1
> 
> 时间：2012-04-22T21:40:38.413
> 
> 标签：php, symfony

我了解如何通过该`createForm`方法将变量从控制器传递到表单，但是如果我需要将该值传递给嵌入在我称为**createForm**的表单中的表单怎么办？我从来没有在嵌入表单的任何地方显式调用 createForm，那么我应该如何获得该值呢？值得注意的是，我试图传递的值可通过服务获得，但我无法调用`$this->get('serviceName')->getValue()`，因为我不在控制器中。作为参考，这是我将值传递给父表单的方式，请注意我是如何通过**createForm**方法而不是构造函数进行的：

```
//in a controller
$form = $this->createForm(new FormType(), $formObject, array('value' => $value)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:36:42.200

这并不是因为您不在控制器中，您无法注入服务（和参数）。尤其是每种类型都可以是服务的类型。当然，您不能`$this->get('serviceName')->getValue()`直接这样做，因为该方法`get`默认情况下不可用。但是，您可以将服务注入您的表单类型。有关如何注入服务的一些信息，请参阅我在[此处](https://stackoverflow.com/a/6127711/697930)回答的关于依赖注入的另一个问题。

请参阅此[食谱部分](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html#creating-your-field-type-as-a-service)，该部分告诉您如何将类型转换为服务，以便您可以注入依赖项，同时注入您的价值。

如果由于某种原因您无法将您的类型转换为服务，那么您需要做的是将您的选项传递给`FormType`它将读取它们并将`value`选项传递给嵌入式类型。这就像一个传递样式设计，你将所有选项传递给主类型，主类型会将其中一些传递给每个子类型，然后每个子类型将它们传递给它们自己的子类型等等。同样，您可以查看这个 [cookbook recipe]，了解如何阅读选项并在自定义表单类型中使用它们。

总之，我认为将您的类型转换为服务更容易。

希望这对您有所帮助。

问候，
马特

# android - 如何将来自 Android 应用的推文发布到一个特定帐户？

> ID：10272355
> 
> 赞同：4
> 
> 时间：2012-04-22T21:40:59.380
> 
> 标签：android, twitter, send

我必须在我的游戏中添加一个选项，以便在 Twitter 上发布高分。这个想法是应用程序有它自己的 twitter 帐户，用户可以通过单击按钮或菜单项将分数上传到此特定帐户（尚未确定 UI 的外观）。

我发现了很多这样的教程： [http](http://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/) ://blog.doityourselfandroid.com/2011/02/13/guide-to-integrating-twitter-android-application/ ，它展示了如何从应用程序发布到 twitter，但在所有这些解决方案用户需要使用他/她自己的帐户登录。

欢迎任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T19:35:56.473

我已经找到了解决这个问题的方法。以为我在这里分享它以防万一有人遇到同样的问题。

1.  首先，您需要在 twitter 上为您的应用创建帐户
2.  转到[此页面](http://dev.twitter.com)并使用创建的帐户登录
3.  将鼠标移到右上角的帐户名称上，然后单击“我的应用程序”
4.  单击右侧的“创建新应用程序”
5.  填写表格并创建应用程序
6.  转到设置并在应用程序类型下将访问类型设置为“读写”并保存设置
7.  返回“详细信息”页面并向下滚动到底部并单击“创建访问令牌”按钮
8.  使用这些生成的令牌和显示在同一页面上这些先前生成的令牌上方的其他令牌（“消费者密钥”和“消费者秘密”）从您的应用发布推文

这是我在我的应用程序中使用的代码：

为此，您需要包含**twitter4j-core-android-2.2.5.jar**包。你可以从这里下载：http: [//twitter4j.org/archive/twitter4j-android-2.2.5.zip](http://twitter4j.org/archive/twitter4j-android-2.2.5.zip)

```
 tweet=(Button)findViewById(R.id.tweetbtn);
    message=(EditText)findViewById(R.id.messagetxt);

    tweet.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            String token ="<Your access token>"; 
            String secret = "<Your access token secret>";
            AccessToken a = new AccessToken(token,secret);
            Twitter twitter = new TwitterFactory().getInstance();
            twitter.setOAuthConsumer("<Your consumer key>", "<Your consumer secret>");
            twitter.setOAuthAccessToken(a);
            try {
                twitter.updateStatus(message.getText().toString());
            } catch (TwitterException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:22:29.643

新的下载链接

[http://twitter4j.org/archive/twitter4j-android-2.2.5.zip](http://twitter4j.org/archive/twitter4j-android-2.2.5.zip)

旧链接失效

# mysql - 加速订购

> ID：10272356
> 
> 赞同：2
> 
> 时间：2012-04-22T21:41:16.957
> 
> 标签：mysql

我有一个存储成员消息的 mysql 表，其中包含 4 列：

*   message_id（主键，自动递增）
*   sender_id（键）
*   receiver_id（键）
*   消息内容

我做了很多`SELECT`s 并且我总是按 s 对它们进行排序`message_id DESC`，查询如下：

```
SELECT message_content 
FROM table 
WHERE sender_id='3333' 
ORDER BY message_id DESC 
LIMIT 30 
```

在这样的查询中，这`ORDER BY`是昂贵的（它通常必须对数千行进行排序，当每秒乘以许多请求时会产生一些负载）

有没有办法避免每次都对表格进行排序？由于我总是希望以相同的顺序检索结果，并且由于 message_id 列不会随时间变化，因此如果每个新表行都插入到第一个位置，则表将始终被排序，我不需要任何“ORDER BY”了。那可能吗 ？还是有其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T21:43:07.647

1.  指定`3333`为整数，而不是字符串（删除引号）
2.  将`message_id`列添加到`sender_id`索引（如果您使用 myisam，因为在 innodb 中它是由所谓的“[聚集索引](http://dev.mysql.com/doc/refman/5.5/en/innodb-index-types.html)”自动添加的）

# android - Android：为什么我的屏幕上有额外的填充？

> ID：10272359
> 
> 赞同：0
> 
> 时间：2012-04-22T21:41:43.353
> 
> 标签：android, android-layout

它在 Android 4.0 上运行良好，但在 2.3 上，整个屏幕周围有额外的填充。似乎它认为屏幕比它小。我正在使用 4.0.3 来编译它。

我正在开发一个应用程序。

![在此处输入图像描述](../Images/a0219c2a3f45ab00f7c0f6b4e041e155.png)

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.yolo"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="Categories"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="Main">
        </activity>
    </application>
</manifest> 
```

布局.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
        >
    <TextView
            android:id="@+id/text"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center_horizontal"
            android:textSize="24sp"
            android:text="Where are you?"
            />
    <Button
            android:id="@+id/mall"
            android:layout_width="fill_parent"
            android:layout_height="75dp"
            android:layout_centerInParent="true"
            android:text="At the mall"
            android:onClick="selectCategory"/>
    <Button
            android:id="@+id/home"
            android:layout_width="fill_parent"
            android:layout_height="75dp"
            android:layout_centerInParent="true"
            android:layout_below="@+id/mall"
            android:text="At home"
            android:onClick="selectCategory"/>
    <Button
            android:id="@+id/store"
            android:layout_width="fill_parent"
            android:layout_height="75dp"
            android:layout_centerInParent="true"
            android:layout_above="@+id/mall"
            android:text="At a store"
            android:onClick="selectCategory"/>
    <Button
            android:id="@+id/downtown"
            android:layout_width="fill_parent"
            android:layout_height="75dp"
            android:layout_centerInParent="true"
            android:layout_below="@+id/home"
            android:text="Downtown"
            android:onClick="selectCategory"/>
</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:47:38.503

你需要提供更多细节。但这可能与特定 Android 系统的开发人员可能进行的修改有关。

# grails - how to parse XML in grails

> ID：10272363
> 
> 赞同：-1
> 
> 时间：2012-04-22T21:42:02.777
> 
> 标签：grails, groovy, grails-orm

I have object has XML as a string. For example I have a domain which has

```
class person{
    String personId
    String personName
    String personType
    String personDescription
    String personDetailsXML
} 
```

I am getting the details and binding to person object. I have to pass this object to another controller which displays the info about each person when he clicks on the profile name. How do i parse the XML string.

I have another domain say eachPerson domian which has

```
class eachPerson{
 String personName
 String personDescription
 Object personDetails 
```

I want to match the person name and person description and persondetailsXml.How do I do that and how can I parse personDetailsXML to personDetails object. Please suggest. How i can pass the personInstance as object to action show() in eachPerson controller??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:31:19.313

I'd check this out for starters. Should be pretty straightforward to work from this example.

[http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlParser](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlParser).

* * *

(Upon re-reading, this doesn't entirely answer the question...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:38:26.333

You need to parse the xml (using introduced in the link in the comment above - or with XmlSlurper). This is pretty straightforward and easy to understand. If you have all the data you can use `render(action:'show', controller:'eachPerson', model:[persons:personsData])`. See the grails doc for further details how to use `render`.

This will call the action with the given data. In the show action you can access it with `params.persons`.

# javascript - 尝试通过 AJAX 使用 CFC 时出现 Railo 错误

> ID：10272364
> 
> 赞同：0
> 
> 时间：2012-04-22T21:42:08.360
> 
> 标签：javascript, cfc, railo, cfml

我无法让 Railo 在测试页面上使用新的 CFC，并在错误控制台中不断收到“Railo 未定义”

错误控制台突出显示此部分：

```
 var _Railo_proxytest = Railo.ajaxProxy.init('/proxytest.cfc','proxytest'); 
```

代码 CFC：

```
<cfcomponent>

   <cffunction name="test1" access="remote" returntype="string" output="no">
   <cfargument name="name" type="string" required="yes" default="Nameless">
   <cfreturn "#areguments.name#">
   </cffunction>
</cfcomponent> 
```

代码 CFM：

```
<cfajaxproxy cfc="proxytest" jsclassname ="proxytest">
<script>

var myProxy = new proxytest();

function runProxy() {
var name = document.getElementById("name").value;
var results = myProxy.sayHello(name);
}
</script>

<form>
  <input type="text" id ="name">
  <input type="button" onclick="runProxy()" value="Run">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:25:14.663

Try like this:

```
var proxytest = Railo.ajaxProxy.init('/proxytest.cfc'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:01:29.250

您的示例代码中有一个错字：`<cfreturn "#areguments.name#">`应该是`<cfreturn "#arguments.name#">`

此外，您发布的代码没有加起来。您正在`sayHello()`从 Javascript 调用函数，但 CFC 没有此函数。发布实际代码而不是重写通常是明智的。

如果您`/proxytest.cfc?method=test1&name=MyName`直接从浏览器调用会发生什么？

# wpf - 覆盖两个集合 - 模式

> ID：10272365
> 
> 赞同：2
> 
> 时间：2012-04-22T21:42:13.243
> 
> 标签：wpf, design-patterns, c#-4.0

我有这样的模型

```
interface IStudent {
   string Name;
   List<Subjects> Marks;
   int RollNumber;
}

class ViewModel {
   ObservableCollection<IStudent> FromExcel;  
   ObservableCollection<IStudent> FromDB;
} 
```

我需要在 UI 上绑定两个集合的联合。什么是最好的方法。`ObservableCollection<IStudent> FromBoth;`我正在考虑使用带有比较器的 LINQ 联合方法生成另一个属性。我的问题是

1.  在 UI 上绑定三个集合可以吗？注意：我需要删除重复项，优先考虑excel中的数据。

2.  在某些情况下，我需要从 DB 中选择一些数据而不是 excel。

例如：fromExcel 中的 name="hungrymind" 和 fromDB 集合中的 name="hungrymind 概念"。默认情况下，UI 上的网格应显示饥饿思维（Excel 优先），但如果用户从 UI 取消选中列（又名属性），则该列的数据优先级变为 DB，即 UI 应显示“饥饿思维概念”

应该采取什么方法来实现这一目标。我的方法是针对用户事件，从 FromDB 或 FromExcel 中为集合中的每个项目选择数据，并将其分配给 FromBoth 集合中的属性。由于有100多列，我不得不使用反射，但不会减慢性能吗？如果我避免反思，那么我必须为每一列编写一个方法。关于模式或方法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:00:13.270

我解决了这样的问题

```
interface IStudent {
   string Name { get; set; }
   List<Subjects> Marks  { get; set; }
   int RollNumber  { get; set; }
}

class EntityViewModel: IStudent {
   IStudent FromExcel;  
   IStudent FromDB;
   public string Name {
     get { return Choose("Name").Name; }
     set { Choose("Name").Name = value; }
   }
   public string RollNumber{
     get { return Choose("RollNumber").RollNumber; }
     set { Choose("RollNumber").RollNumber = value; }
   }
   internal IStudent Choose(string propertyName){
     if(IsOveridable(propertyName))
        return this.FromExcel;
     else 
        return this.FromDB  
   }
}
class ViewModel{
   ObservableCollection<EntityViewModel> Entities;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:37:37.937

在那种情况下，你为什么不建立一个元模型来帮助你组织数据，例如

```
String objectName
String dataType
String defaultName
String displayName
String userSelectedName
boolean isUserOvverride
String viewType  // (i.e. Text Input, Combo Box, Text Area, Radio Button, Multi Line List)
String viewElementTypeId  // (i.e. for Combo Box,Radio Button this refers to user options available and for Text Input or Area it would be null) 
```

尽管上述方法会降低性能，但您可以采用明天可能出现的任意数量的类型。

# ruby-on-rails - 如何在 Rails 中正确查看此类内容？

> ID：10272366
> 
> 赞同：1
> 
> 时间：2012-04-22T21:42:32.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, view

我已经为每个模型选择了它在控制器中使用的另一个表中的数据：

```
 def modelv
    @model = Model.find(:all, :conditions => { :MOD_MFA_ID => params[:man]}) 
    @ct1 = CountryDesignation.all(:conditions => { :CDS_ID => @model.map(&:MOD_CDS_ID)})
    @ct = @ct1.uniq{|hh| hh.CDS_ID}
    @destext = DesText.find(:all, :conditions => { :TEX_ID => @ct.map(&:CDS_TEX_ID)})
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @model }
    end
  end 
```

对不起脏代码。

和我的看法

```
%table   %tr
    %th Mfa id
    %th Год начала выпуска
    %th Год завершения выпуска
  - @model.each do |model| 
    %tr
      %td= model.MOD_CDS_ID
      %td= link_to model.MOD_ID, model
      %td= link_to model.MOD_PCON_START, model
      -if model.MOD_PCON_END.blank?
        %td= link_to "По настоящее время", model
      -else
        %td= link_to model.MOD_PCON_END, model
      -#%td= model.country_designations.des_texts.TEX_TEXT
      -#= link_to 'Show model', model   %br %table   %tr
  - @destext.each do |t|
    %tr
      %td= t.TEX_ID
      %td= t.TEX_TEXT
  - @ct.each do |ct|
    %tr
      %td= ct.CDS_ID
      %td= ct.CDS_TEX_ID 
```

但是如何为每个模型显示它的 t.TEX_TEXT 和 ct.CDS_TEX_ID，而不是在另一个循环中，而是在同一个表中的列中？而且，我的方法是获取数据，但是当我选择数据时，当 ct.CDS_TEX_ID 与多个条目相同时，@destext 正在分组，我只获取一个实例，例如

```
cds_id    cds_tex_id
110007626 420077
110007627 420077 
```

结果我从@destext 得到的只有一行。请帮帮我。这是非标准数据库

> 看，表 MODELS 有字段 MOD_CDS_ID，用这个字段我去表 COUNTRY_DESIGNATIONS 并且它的字段 CDS_ID = MOD_CDS_ID（来自 MODELS 表），而不是从这个表中我选择字段 CDS_TEX_ID 并用这个 id 去表 DES_TEXTS 它的字段 TEX_ID 必须相等从上一个表 CDS_TEX_ID 中获取字段 TEX_TEXT !!! 我的迭代中的这个字段@model.each 确实......我必须为每个模型显示

# c++ - 将子节点添加到 XML 结构的顶部。提升属性树

> ID：10272371
> 
> 赞同：1
> 
> 时间：2012-04-22T21:43:09.110
> 
> 标签：c++, xml, boost, boost-propertytree

我正在将一组结果写入 XML 文件。每个结果集包含一系列结果。我的问题是（在多次执行代码期间）当我尝试将一些新结果写入集合时，XML 解析器获取现有 XML 文件中的第一个（顶部）结果集，并将结果附加到那个（旧）设置。例如：

```
<root>
  <result_set result_number="0">    <--- Parser selects this result set
    <result number="0">
      <tolerance>100</tolerance>
    </result>
    <result number="1">
        <tolerance>100</tolerance>
    </result>
    <resultnumber="0">          <---- This should be added to result set 1      
      <tolerance>100</tolerance>
    </result>
  </result_set>
  <result_set result_number="1"/>   <-- New result set added to Xml, missing results
</root> 
```

因此，我想知道是否可以将最新的结果集写入添加到 XML 文件的顶部？或者，在检索最新结果集时，获取列表中的最后一个？

我希望我已经清楚地解释了自己。谢谢

（我正在使用的示例代码）

```
void initialise(std::string filename)
{
  ptree pt;
  xml_writer_settings<char> w('\t', 1);
  read_xml(filename, pt, boost::property_tree::xml_parser::trim_whitespace);
  std::ofstream xmlFile(filename.c_str(), std::ios::out);

  // Probably not the best way to check for a root node
  try
  {
    ptree & rootNode = pt.get_child("root");
  }
  catch(...)
  {
    xmlFile << "<root></root>" << std::endl;
    read_xml(filename, pt, boost::property_tree::xml_parser::trim_whitespace);
  }

  ptree & rootNode = pt.get_child("root");
  ptree resultSetNode;
  resultSetNode.add("<xmlattr>.result_number", 0);
  rootNode.add_child("result_set", resultSetNode);
  write_xml(filename, pt, std::locale(), w);

}

void save1(std::string filename)
{
  ptree pt;
  xml_writer_settings<char> w('\t', 1);
  read_xml(filename, pt, boost::property_tree::xml_parser::trim_whitespace);

  ptree &resultSetNode = pt.get_child("root.result_set");
  ptree resultNode;
  resultNode.put("tolerance", 100);
  resultSetNode.add_child("result", resultNode);

  write_xml(filename, pt, std::locale(), w);

}

int main()
{
  initialise("sample.xml");

  for(int i = 0; i < 2; ++i)
  {
    save1("sample.xml");
  }
  std::cout << "Success!!!\n";
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:50:42.673

这是我在 boost 邮件列表上的回复的副本/粘贴：

我认为你在这里误解了整个事情。

您有很多 xpath 为 的节点`root/result_set`，但它们都有一个标识它们的属性： `result_number`.

当您调用时，`get_child`您将获得一个任意节点（[来自 boost 文档](http://www.boost.org/doc/libs/1_41_0/doc/html/boost/property_tree/basic_ptree.html#id973373-bb)）：

> ```
> self_type & get_child(const path_type & path) ; 
> ```
> 
> 让孩子在给定的路径，或 throw `ptree_bad_path`。
> 
> **注意：**
> 根据路径的不同，每个级别的结果可能不是完全确定的，即如果相同的键出现多次，则未指定选择哪个子级。这可能导致路径无法解析，即使此路径有后代。
> 例子：
> 
> ```
>  a -> b -> c
>     -> b 
> ```
> 
> 如果“b”的解析选择第一个这样的节点，路径“abc”将成功，但如果选择第二个则失败。

我猜你应该在 root 上使用迭代器来查找最后执行的集合，然后获取对该节点的引用，然后将结果添加到它：

```
 from begin() to end(), find the max result_number or 
   just the one that matches count() 
```

# java - jwebsocket 独立服务器

> ID：10272373
> 
> 赞同：1
> 
> 时间：2012-04-22T21:43:13.773
> 
> 标签：java

有人可以提供一个在独立示例中使用 jwebsocket 的示例吗？

我一直在尝试遵循[http://jwebsocket.org/howto/ht_1st_listener.htm](http://jwebsocket.org/howto/ht_1st_listener.htm)上的示例，但失败得很惨。

谢谢。

ps 当我指的是独立时，我的意思是“不使用应用程序服务器，例如 tomcat 或 glassfish”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:01:36.423

最后一个版本 jWebSocketServer-1.0-nb20507 和一些旧版本已经包含一个 .bat 或 .sh 以供独立使用。

但是在最新版本（nb20205）中，我们可以将带有自定义参数的 websocket.xml 作为参数传递。

查看官方网站 www.jwebsocket.org。

我仍在寻找我自己的一步一步的独立实施:( ...

# java - 未知公式的包装函数

> ID：10272374
> 
> 赞同：4
> 
> 时间：2012-04-22T21:43:15.177
> 
> 标签：java, python, function

有没有办法创建如下函数？

我需要计算三角形的面积，我不记得计算这个的正确公式，而且我没有互联网或其他信息来源。我记得的是，这种函数的参数是一些边**b**和高度**h**。所以我想创建一些看起来像这样的函数：

```
public static void calculate(String forgottenFunc, int... params) {/*implementation*/}; 
```

我想到了基于 Java 的 JavaScript eval 函数来实现，而无需使用 RegExp。我一直坚持将字符串（forgottenFunc）转换为一些真正的函数，这些函数将使用给定的参数来计算我需要的东西。或者 Python 的 eval 或其他一些功能的任何替代方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:49:04.317

试试[Jep](http://sourceforge.net/projects/jep/)，一个免费的 Java 数学解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-17T11:03:25.673

[mXparser](http://mathparser.org/)将满足您的需求 :-) 请按照以下示例进行操作：

```
import org.mariuszgromada.math.mxparser.*;
...
...
public static double calculate(String forgottenFunc, double... params) {
    Function f = new Function(forgottenFunc);
    return f.calculate(params);
}
...
...
System.out.println( calculate("p(a,h) = a*h/2", 2, 3) ); 
```

结果：

```
3.0 
```

请遵循[mXparser 教程](http://mathparser.org/mxparser-tutorial/)

Additionally - this software is using mXparser as well - you can learn the syntax [Scalar](https://scalarmath.org) [Calculator](https://play.google.com/store/apps/details?id=org.mathparser.scalar.lite) [app](https://play.google.com/store/apps/details?id=org.mathparser.scalar.pro)

Best regards

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:43:21.347

根据您的评论，我看到您想要一个解析器，而不是一个闭包。

JavaScript eval 函数没有内置的等效函数。它被认为是邪恶的。

您可以使用 zovegames 建议的第三方解析器，也可以使用[javacc](https://stackoverflow.com/a/10272413/348975)等构建自己的[解析器](http://javacc.java.net/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T00:11:55.790

对于一般解决方案：您可以在程序中嵌入[MVEL](http://mvel.codehaus.org/)，将公式作为字符串传递，绑定参数并对其进行评估。从链接页面：

> MVEL 是一种用于基于 Java 的应用程序的强大表达语言。它提供了大量功能，适用于从最小的属性绑定和提取到完整脚本的所有内容。

# asp.net - 在asp.net Gridview上选择记录时将记录从一个表插入另一个表

> ID：10272376
> 
> 赞同：0
> 
> 时间：2012-04-22T21:43:34.367
> 
> 标签：asp.net, sql-server-2008

我正在使用 C# ASP.net，并且相对较新，并试图在下面完成。

在 VS2010 Web 应用程序项目中，我有一个带有 Gridview 的 Web 表单，它从 SQL Server 2008 的 table1 中读取数据。Gridview 具有选择选项。

要求是，当我在 gridview 上选择一行时，它将选定的行插入到 table2 中。两个表都在同一个数据库中，具有相同的数据类型。

提前致谢

PS我改写了同样的问题并删除了旧帖子。希望这次很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:00:38.510

问题已经解决了。我抓住了 selectedidexchange 事件 创建了新的 GridViewRow 实例 创建了到 table2 的新连接和 SQLcommand 写入 table2 使用命令我添加了值等于 row 的 sqlparameters 并且它的列值通过 GridViewRow 实例打开了连接 cmd.ExecuteNonQuery();

# c - 在 C 中拆分 ASCII 文本文件

> ID：10272377
> 
> 赞同：1
> 
> 时间：2012-04-22T21:43:38.360
> 
> 标签：c, file, split, fopen

假设我在 C 中有以下代码：

```
FILE* a=fopen("myfile.txt","r");
FILE* b,c; 
```

'a'中有一个分隔线，它指定了我要分割的地方；我想将'a'的内容分成'b'和'c'。我想在不创建任何其他文件的情况下执行此操作。

稍后，我想通过创建一个指向'FILE*'的指针数组来动态地执行此操作。所以分隔线的数量是任意的。

对于这种情况，假设分隔线是任何具有字符串“delim”的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:34:18.163

这个概念可以是：

1）`fopen()`INFILE 和（第一个）OUTFILE

2）虽然可以，`fgets()`但从 INFILE 和`strncmp()`它们到分隔符的行

2.a) 未找到分隔符：`fputs()`到 OUTFILE 的行

2.b) 找到分隔符：`fclose()`OUTFILE 和`fopen()`下一个 OUTFILE

2.c) 文件结尾：中断循环

3) `fclose()`INFILE 和 OUTFILE

或者这样：

1)`fopen()`文件

2）`fseek()`到流的末尾并用于`ftell()`获取文件位置，我们称之为`N`

3)`rewind()`将流和`fread()` `N`字节从中提取到缓冲区中。

4)`fclose()`文件

5）虽然可以，`strstr()`但缓冲区中的分隔符和`fwrite()`中间的数据块到 OUTFILE

# tcp - Wireshark 未捕获端口 2000

> ID：10272384
> 
> 赞同：0
> 
> 时间：2012-04-22T21:45:20.637
> 
> 标签：tcp, wireshark

如果我在捕获过滤器中输入“端口 2000”，我不会从通过端口 2000 上的 TCP 通信的应用程序中获取数据包......知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:56:23.777

如果服务器位于同一主机上，则您的应用程序可能正在使用环回接口。

在 Linux 上，您可以通过选择“lo”设备来收听环回接口。

在 Windows 上它有点[棘手](http://wiki.wireshark.org/CaptureSetup/Loopback)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:57:10.193

Wireshark 不会在没有一些抖动的情况下捕获 Windows 机器上的本地流量。见 Devon_C_Millers 回答

# iphone - 如何在 iPhone 屏幕顶部显示 Admob？

> ID：10272385
> 
> 赞同：2
> 
> 时间：2012-04-22T21:45:41.867
> 
> 标签：iphone, admob, deprecated, cgpoint

我几乎到处都在寻找答案。

```
//
//  GADAdSize.h
//  Google Ads iOS SDK
//
//  Copyright 2012 Google Inc. All rights reserved.
//
//  A valid GADAdSize is considered to be one of the predefined GADAdSize
//  constants or a GADAdSize constructed by GADAdSizeFromCGSize,
//  GADAdSizeFullWidthPortraitWithHeight, GADAdSizeFullWidthLandscapeWithHeight.
//

#import <UIKit/UIKit.h>

// Do not create a GADAdSize manually. Use one of the kGADAdSize constants.
// Treat GADAdSize as an opaque type. Do not access any fields directly. To
// obtain a concrete CGSize, use the function CGSizeFromGADAdSize().
typedef struct GADAdSize {
  CGSize size;
  NSUInteger flags;
} GADAdSize;

#pragma mark Standard Sizes

// iPhone and iPod Touch ad size. Typically 320x50.
extern GADAdSize const kGADAdSizeBanner;

// Medium Rectangle size for the iPad (especially in a UISplitView's left pane).
// Typically 300x250.
extern GADAdSize const kGADAdSizeMediumRectangle;

// Full Banner size for the iPad (especially in a UIPopoverController or in
// UIModalPresentationFormSheet). Typically 468x60.
extern GADAdSize const kGADAdSizeFullBanner;

// Leaderboard size for the iPad. Typically 728x90.
extern GADAdSize const kGADAdSizeLeaderboard;

// Skyscraper size for the iPad. Mediation only. AdMob/Google does not offer
// this size. Typically 120x600.
extern GADAdSize const kGADAdSizeSkyscraper;

// An ad size that spans the full width of the application in portrait
// orientation. The height is typically 50 pixels on an iPhone/iPod UI, and 90
// pixels tall on an iPad UI.
extern GADAdSize const kGADAdSizeSmartBannerPortrait;

// An ad size that spans the full width of the application in landscape
// orientation. The height is typically 32 pixels on an iPhone/iPod UI, and 90
// pixels tall on an iPad UI.
extern GADAdSize const kGADAdSizeSmartBannerLandscape;

// Invalid ad size marker.
extern GADAdSize const kGADAdSizeInvalid;

#pragma mark Custom Sizes

// Given a CGSize, return a custom GADAdSize. Use this only if you require a
// non-standard size, otherwise, use one of the standard size constants above.
GADAdSize GADAdSizeFromCGSize(CGSize size);

// Get a custom GADAdSize that spans the full width of the application in
// portrait orientation with the height provided.
GADAdSize GADAdSizeFullWidthPortraitWithHeight(CGFloat height);

// Get a custom GADAdSize that spans the full width of the application in
// landscape orientation with the height provided.
GADAdSize GADAdSizeFullWidthLandscapeWithHeight(CGFloat height);

#pragma mark Convenience Functions

// Checks whether the two GADAdSizes are equal.
BOOL GADAdSizeEqualToSize(GADAdSize size1, GADAdSize size2);

// Given a GADAdSize constant, returns a CGSize. If the GADAdSize is unknown,
// returns CGSizeZero.
CGSize CGSizeFromGADAdSize(GADAdSize size);

// Determines if |size| is one of the predefined constants, or a custom
// GADAdSize generated by FromCGSize.
BOOL IsGADAdSizeValid(GADAdSize size);

// Given a GADAdSize constant, returns a NSString describing the GADAdSize.
NSString *NSStringFromGADAdSize(GADAdSize size);

#pragma mark Deprecated Macros

#define GAD_SIZE_320x50     CGSizeFromGADAdSize(kGADAdSizeBanner)
#define GAD_SIZE_300x250    CGSizeFromGADAdSize(kGADAdSizeMediumRectangle)
#define GAD_SIZE_468x60     CGSizeFromGADAdSize(kGADAdSizeFullBanner)
#define GAD_SIZE_728x90     CGSizeFromGADAdSize(kGADAdSizeLeaderboard)
#define GAD_SIZE_120x600    CGSizeFromGADAdSize(kGADAdSizeSkyscraper) 
```

* * *

这是 viewdidload 示例项目中给出的内容。

```
- (void)viewDidLoad {
  [super viewDidLoad];

  // Initialize the banner at the bottom of the screen.
  CGPoint origin = CGPointMake(0.0,
                               self.view.frame.size.height -
                               CGSizeFromGADAdSize(kGADAdSizeBanner).height);

  // Use predefined GADAdSize constants to define the GADBannerView.
  self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                                  origin:origin]
                    autorelease];

  // Note: Edit SampleConstants.h to provide a definition for kSampleAdUnitID
  // before compiling.
  self.adBanner.adUnitID = kSampleAdUnitID;
  self.adBanner.delegate = self;
  [self.adBanner setRootViewController:self];
  [self.view addSubview:self.adBanner];
  [self.adBanner loadRequest:[self createRequest]];
} 
```

我在目标 C 方面不是最好的，并且可以使用简短的描述来说明调用此代码时发生的情况。Android 也有类似的问题，我想我会问 iPhoners。Google 上的每个人都在使用已弃用的宏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:24:39.337

您正在查看的示例代码将屏幕底部的广告初始化为屏幕底部的原点（原点具体为`(0, HEIGHT_OF_SCREEN-HEIGHT_OF_AD)`.

initWithSize: 构造函数默认初始化屏幕顶部的广告，`(0,0)`所以如果你只是这样初始化你的广告横幅：

```
self.adBanner = [[[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner]
                    autorelease]; 
```

您应该会看到广告出现在屏幕顶部。

# javascript - 计算单选按钮的值

> ID：10272388
> 
> 赞同：0
> 
> 时间：2012-04-22T21:45:51.047
> 
> 标签：javascript, jquery

我想用复选框和收音机制作一个计算表格。如果元素被选中（选择） - 我将它的值求和为常数。

对于复选框，我使用以下代码：

```
 var normochas = 0;
   function Count(a,b) {
    if(a==1) {
        normochas = normochas + b;
        $('#sidebar-contact .blue').text(normochas);
    } else {
        normochas = normochas - b;
       $('#sidebar-contact .blue').text(normochas);
    }
   }

$(':checkbox').change(function () {
    var count = parseInt($(this).val());
    if ($(this).attr("checked")) {
        Count(1,count);
        return;
    }
    Count(0,count);
 }); 
```

如何为收音机做到这一点？我想要，如果您选择第 1 项，然后从第 1 项的值和第 2 项的 PLUS 值中选择第 2项- **js** **MINUS**到.`normochas`**`normochas`**

 **```
<ul>
<li><input type="radio" name="cms" value="5" /> Item 1</li>
<li><input type="radio" name="cms" value="13" /> Item 2</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:00:09.817

你可以这样计算它们的值：

```
$("input[type=radio], input[type=checkbox]").change(function(){

    var radios = 0;
    var checkboxes = 0;

    $("input[type=radio]:checked").each(function(){
        radios += parseInt($(this).val());
    });

    $("input[type=checkbox]:checked").each(function(){
        checkboxes += parseInt($(this).val());
    });

   alert(radios + checkboxes);

}); 
```**

# php - 如何生成选择数据库中值的州/省下拉列表

> ID：10272390
> 
> 赞同：0
> 
> 时间：2012-04-22T21:46:20.860
> 
> 标签：php, mysql, html

所以我有几个国家和州/省下拉菜单的地方。我想做的是为每一个都有一个函数，当我对来自mysql的客户数据运行while循环时，我想默认从数据库中的数据中选择正确的。

原因是现在下拉菜单默认为选定的 HTML，因此如果用户在编辑帐户时没有再次将其更改为他们的，他们会使用错误的州/国家/地区重新保存他们的信息。

我也想在几个地方使用它，所以我想要大量的国家和州/省循环。

只是寻找一只手或被指出已经在一个函数中完成了这项工作。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:54:34.507

`$states`- 查询所有状态，`$user_state`- 当前用户的状态。因此，默认情况下将选择您用户的选择。

```
<?php
echo '<select name="state">';
while ($state = mysql_fetch_assoc($states))
{
  echo '<option value="' . $state['state'] . '"';
  if ($user_state == $state['state'])
  {
    echo ' selected';
  }
  echo '>' . $state . '</option>';
}
echo '</select>'; 
```

# ruby - 使用 Bundler 创建 gem

> ID：10272393
> 
> 赞同：0
> 
> 时间：2012-04-22T21:46:29.547
> 
> 标签：ruby, gem, bundler

我正在尝试使用 Bundler 创建一个 gem，遵循本指南：[http](http://rakeroutes.com/blog/lets-write-a-gem-part-one/) ://rakeroutes.com/blog/lets-write-a-gem-part-one/ 。其中，它说：

> 在我第一次浏览 gemspec 之后，我错误地认为我需要在开发我的 gem 时添加更多的 require 语句。情况并非如此：文件只需要在 git 中。

我正在尝试清理我的一些旧 gem 以使用此约定，但是当我安装我的 gem 时，其他文件中的类不可用。我的 /lib 目录下嵌套了几个目录，但我认为这不是问题。有什么容易忽略的东西会阻止需要我的其他文件吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:31:03.283

在链接中，当他说他不需要添加很多“require”语句时，他的意思是向 、 和数组添加文件`s.files`——`s.executables`这些`s.test_files`决定了哪些文件被打包到 gem 中，哪些文件被忽略. 正如您从 gem 规范中看到的那样，git 在某些目录中跟踪的任何内容都将包含在打包的 gem 中。

Ruby 的`require`情况则不同。标准要求规则仍然适用。

Ruby 的 gem 系统通过添加一堆不同的位置让 Ruby 在运行时查找“foo.rb”来工作`require "foo"`。如果`"lib"`是您的 gem 的唯一需要路径，那么当您`require "my_gem"`Ruby 只打算运行**lib/my_gem.rb**中的代码时。如果**lib/my_gem.rb**在你的 gem中没有`require`任何其他文件，那么 Ruby 没有看到它们，所以当你尝试使用这些文件中的类时，你会得到未定义的常量错误。

例如，你可以看看我写的两个简单的 gem；两者都是从[HashToHiddenFields](https://github.com/brianhempel/hash_to_hidden_fields)`bundle gem`和SimpleStats [开始](https://github.com/brianhempel/simple_stats)的。在这两个 gem 中，**lib/**中的主 Ruby 文件需要加载所有需要加载的 gem 才能正常工作。例如，[hash_to_hidden_​​fields.rb](https://github.com/brianhempel/hash_to_hidden_fields/blob/master/lib/hash_to_hidden_fields.rb)需要**action_view/helpers/hash_to_hidden_​​fields**以便常量+模块存在，因此我们可以将其包含到.****`ActionView::Helpers::HashToHiddenFields``ActionView::Base`****

 ****希望能回答这个问题。我知道 Ruby 要求有一段时间对我来说非常模糊。****

# ruby-on-rails - 仅 gmaps4rails gem-placemarks 的缩放焦点问题

> ID：10272395
> 
> 赞同：0
> 
> 时间：2012-04-22T21:46:51.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, map, zooming, gmaps4rails

我已经浏览了与此相关的其他链接，但我无法让它按需要工作。

是）我有的：

索引页面：显示所有地标，按预期工作。

现在是显示页面：所以我在索引页面上并单击一个单独的链接以进入该特定标记的显示页面。当我点击它时，它被放大了。

我想要它，所以它不会被放大。我不想使用 auto_adjust => false，因为我希望地图集中在那个地标上。

当我将自动调整设置为 true 并使用缩放玩具时，缩放不会做任何事情，它只是像以前一样保持放大（即不使用地图选项）。

任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:30:44.710

您正在寻找`auto_zoom`选项。

[见文档。](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/%28Multiple%29-Maps)

# php - 函数运行后函数中的变量会被销毁吗？

> ID：10272401
> 
> 赞同：0
> 
> 时间：2012-04-22T21:47:24.320
> 
> 标签：php, class, memory

函数运行后函数中的变量会被销毁吗？

```
class B {
   function C() {
       $x = "123456";
       echo "XXX".$x;
       // After this function is finished, will $x be destroyed by default to save memory in PHP?
   }
}
class A {
   function F1() {
       return new Class_B();
   }

   function F2() {
       $this->F1()->C();
       // After this function is finished, will F1 be destroyed by default to save memory and CPU in PHP?
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:53:20.763

是的，它将被“销毁”，以便可以重复使用它占用的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T21:54:33.843

关于`$x`：是的，运行完成后会进行垃圾回收`B::C()`。

关于`$this->F1()->C()`：`F1`方法本身不会被销毁，但是`B`它返回的实例会在`F2`运行结束后被销毁。

# matlab - 白噪声具有平坦的功率谱密度

> ID：10272402
> 
> 赞同：1
> 
> 时间：2012-04-22T21:47:26.610
> 
> 标签：matlab, fft

我试图使用matlab证明白噪声具有恒定的功率谱密度，但频谱的幅度看起来像随机幅度。

谁能告诉我为什么？

这是我的代码。

```
noise = randn(1,10000);
fft_noise=fft(noise);
plot(abs(fft_noise(1:5000))) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:56:58.053

您需要平均一堆（大数定律）白噪声的 FFT 以接近平均功率谱密度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T22:36:38.440

如果您对来自同一分布的一组独立随机变量进行 FFT，那么您将从同一分布中获得一组独立的随机变量，因为傅里叶逆变换（或多或少）与傅里叶变换相同。关键是每个频率的期望值是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T05:31:46.510

您需要将 fft 与 fft 的复共轭相乘以显示平坦的 PSD。即改变

```
fft_noise=fft(noise); 
```

到

```
fft_noise=fft(noise).*conj(fft(noise)); 
```

# objective-c - Objective-c 在 C 数组中释放对象

> ID：10272411
> 
> 赞同：0
> 
> 时间：2012-04-22T21:48:20.417
> 
> 标签：objective-c, arrays

我有：

```
id<EnemyUpdate> enemies[6][10]; 
```

我使用以下方法初始化我的自定义类：

```
// init
enemies[row][col] = [[MyenemyClass alloc]init];
//..

-(void) dealloc{
     [super dealloc]
      // I want to release the 2d array here
} 
```

现在，我以后如何（在 dealloc 方法中）在二维数组中释放我的对象？通过调用 free(enemies[row][col]) 不会进入类中的 dealloc 方法。顺便说一句，我不想​​使用自动释放。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:52:30.560

您应该遍历它们并一一释放它们：

```
for (int i = 0; i < 6; ++i)
  for (int j = 0; j < 10; ++j)
    [enemies[i][j] release];

free(enemies); 
```

请记住，`autorelease`在这种情况下不得使用：由于对象存储在非托管对象（C 数组）中，因此自动释放将导致僵尸对象，因为没有其他人保留该对象。我的意思是你不能做

```
[[[MyenemyClass alloc]init] autorelease] 
```

就像您在将项目添加到 an 时通常所做的那样，`NSMutableArray`因为在 C 数组中设置托管对象时没有保留计数增加，因此对象将被释放，但数组中的指针将继续指向垃圾，并且在您尝试时大多崩溃用它。

请注意，如果您在 ARC 环境中工作，这将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:08:50.333

像任何其他 objc 变量一样，您需要`release`数组的每个元素。此外，您应该在调用`enemies[][]` *之前*`[super dealloc]`释放您的.

您的实现将采用以下形式：

```
- (void)dealloc
{
  for (size_t i = 0; i < 6; ++i) {
    for (size_t j = 0; j < 10; ++j) {
      [enemies[i][j] release];
      enemies[i][j] = nil;
    }
  }

  [super dealloc]
} 
```

**编辑**

> 警告告诉我方法 -release 没有找到？

那是因为`release`is 不在`EnemyUpdate`协议中并且类型是`id<EnemyUpdate>`. 您可以将数组声明为`NSObject<EnemyUpdate>* enemies[6][10];`

**或者**

指定`EnemyUpdate`采用`@protocol NSObject`：

```
@protocol EnemyUpdate < NSObject >
...
@end 
```

# android - Android：如何在 ICS 中禁用选择放大镜？

> ID：10272412
> 
> 赞同：9
> 
> 时间：2012-04-22T21:49:02.567
> 
> 标签：android, android-edittext

在 ICS 的 EditText 视图中选择文本时，选择上方会出现一个放大镜。任何人都知道我可以如何禁用它？

![在此处输入图像描述](../Images/3a3bdc3d22f5e90b59fdc4df15ee9973.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T09:48:06.010

据我了解，我们可以通过系统设置处理**放大手势**，我们没有任何方法可以覆盖此功能/行为。

您可以参考以下链接以了解有关放大手势功能的更多信息：

[http://pauljadam.com/androida11y/#magnification](http://pauljadam.com/androida11y/#magnification)

[http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//help/hc/images/android/android_ug_42/Android-Quick-Start-Guide.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en//help/hc/images/android/android_ug_42/Android-Quick-Start-Guide.pdf)

如果我错了，请告诉我。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T12:10:35.507

几天后，我终于找到了解决方案。

我的对话框窗口有问题，里面有一个 EditText。当这个放大镜显示我不知道为什么但是在我关闭对话框并尝试再次打开它之后......它没有像往常一样显示在前面......它显示在活动窗口的后面......奇怪事情......我猜是一个错误......

我为我的问题找到的唯一解决方案是将此属性设置为我的对话框窗口：

`LayoutParams lp = dialog.getWindow().getAttributes(); lp.type = WindowManager.LayoutParams.TYPE_APPLICATION_PANEL; dialog.getWindow().setAttributes(lp);`

并且此放大镜工具不再显示在此 EditText 上。

我希望它可以帮助某人。

# c# - Excel ExportAsFixedFormat PDF

> ID：10272415
> 
> 赞同：8
> 
> 时间：2012-04-22T21:49:22.433
> 
> 标签：c#, excel-2007

我可以成功获取一个excel文件并将其导出为c#中的PDF文件

```
private static void ExportWorkbookToPDF(string workbook, string output)
{
    if (string.IsNullOrEmpty(workbook) || string.IsNullOrEmpty(output))
    {
        throw new NullReferenceException("Cannot create PDF copy " +
            "from empty workbook.");
    }

    Application excelApplication = new Application();
    excelApplication.ScreenUpdating = false;
    excelApplication.DisplayAlerts = false;
    excelApplication.Visible = false;

    Workbook excelWorkbook = excelApplication.Workbooks.Open(
        Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + 
        "\\" + workbook);

    if (excelWorkbook == null)
    {
        excelApplication.Quit();
        excelApplication = null;
        excelWorkbook = null;

        throw new NullReferenceException("Cannot create new excel workbook.");
    }

    try
    {
        excelWorkbook.ExportAsFixedFormat(XlFixedFormatType.xlTypePDF, 
            Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + 
            "\\" + output);
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
    }
    finally
    {
        excelWorkbook.Close();
        excelApplication.Quit();
        excelApplication = null;
        excelWorkbook = null;
    }
} 
```

为了将 excel 文件保存为页面宽度而不是页面高度，我需要访问哪些参数或对象？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T23:06:22.660

我找到了强制将工作簿导出为具有横向视图的 PDF 所需的属性。

```
try 
{ 
    ((Microsoft.Office.Interop.Excel._Worksheet)  
    excelWorkbook.ActiveSheet).PageSetup.Orientation =  
    Microsoft.Office.Interop.Excel.XlPageOrientation.xlLandscape;

    excelWorkbook.ExportAsFixedFormat(XlFixedFormatType.xlTypePDF,  
    Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + 
        "\\" + output); 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-07T07:29:27.567

1.  安装 2007 Microsoft Office Suite Service Pack 3 (SP3) [http://www.microsoft.com/en-in/download/details.aspx?id=27838](http://www.microsoft.com/en-in/download/details.aspx?id=27838)

2.  安装 2007 Microsoft Office 插件：Microsoft 另存为 PDF 或 XPS [http://www.microsoft.com/en-in/download/details.aspx?id=7](http://www.microsoft.com/en-in/download/details.aspx?id=7)

**强制：**将**Microsoft XPS Document Writer**设置为服务器中的默认打印机。因为**ExportAsFixedFormat**函数执行**Microsoft XPS Document Writer**将 Excel 转换为 PDF。

这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T12:32:06.373

请试试这个：

```
object misValue = System.Reflection.Missing.Value;
string paramExportFilePath = @"C:\Test2.pdf";
Excel.XlFixedFormatType paramExportFormat = Excel.XlFixedFormatType.xlTypePDF;
Excel.XlFixedFormatQuality paramExportQuality = Excel.XlFixedFormatQuality.xlQualityStandard;
bool paramOpenAfterPublish = false;
bool paramIncludeDocProps = true;
bool paramIgnorePrintAreas = true;
if (xlWorkBook != null)//save as pdf
    xlWorkBook.ExportAsFixedFormat(paramExportFormat, paramExportFilePath, paramExportQuality,     paramIncludeDocProps, paramIgnorePrintAreas, 1, 1, paramOpenAfterPublish, misValue); 
```

参数`paramIgnorePrintAreas=true`调整页面大小。

# python - 检查是否可以分词

> ID：10272417
> 
> 赞同：4
> 
> 时间：2012-04-22T21:49:46.847
> 
> 标签：python, algorithm, nlp, dynamic-programming, text-segmentation

[这是对此响应](https://stackoverflow.com/questions/3466972/how-to-split-a-string-into-words-ex-stringintowords-string-into-words/3469228#3469228)和用户发布的伪代码算法的后续问题。由于它的年龄，我没有对这个问题发表评论。我只对验证字符串是否可以拆分为单词感兴趣。该算法不需要实际拆分字符串。这是来自链接问题的回复：

> 让 S[1..length(w)] 是一个带有布尔条目的表。如果单词 w[1..i] 可以拆分，则 S[i] 为真。然后设置 S[1] = isWord(w[1]) 并为 i=2 到 length(w) 计算
> 
> S[i] = (isWord[w[1..i] 或 {2..i} 中的任何 j：S[j-1] 和 isWord[j..i])。

我正在将此算法翻译成简单的 python 代码，但我不确定我是否正确理解它。代码：

```
def is_all_words(a_string, dictionary)):
    str_len = len(a_string)
    S = [False] * str_len
    S[0] = is_word(a_string[0], dictionary)
    for i in range(1, str_len):
        check = is_word(a_string[0:i], dictionary)
        if (check):
            S[i] = check
        else:
            for j in range(1, str_len):
                check = (S[j - 1] and is_word(a_string[j:i]), dictionary)
                if (check):
                    S[i] == True
                    break
    return S 
```

我有两个相关的问题。1）这段代码是否将链接算法正确翻译成Python，如果是，2）现在我有S，我如何用它来判断字符串*是否*只由单词组成？在这种情况下，`is_word`是一个简单地在列表中查找给定单词的函数。我还没有实现它作为一个尝试。

更新：更新代码以包含建议的更改后，它不起作用。这是更新的代码：

```
def is_all_words(a_string, dictionary)):
    str_len = len(a_string)
    S = [False] * str_len
    S[0] = is_word(a_string[0], dictionary)
    for i in range(1, str_len):
        check = is_word(a_string[0:i], dictionary)
        if (check):
            S[i] = check
        else:
            for j in range(1, i): #THIS LINE WAS UPDATED
                check = (S[j - 1] and is_word(a_string[j:i]), dictionary)
                if (check):
                    S[i] == True
                    break
    return S

a_string = "carrotforever"
S = is_all_words(a_string, dictionary)
print(S[len(S) - 1]) #prints FALSE

a_string = "hello"
S = is_all_words(a_string, dictionary)
print(S[len(S) - 1]) #prints TRUE 
```

它应该返回`True`这两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:23:36.760

这是您的代码的修改版本，应该会返回良好的结果。请注意，您的错误只是从伪代码数组索引（从 1 开始）到 python 数组索引（从 0 开始）的转换，因此 S[0] 和 S[1] 填充了相同的值，其中 S[L-1]实际上从未计算过。您可以通过打印整个 S 值轻松跟踪此错误。您会发现在第一个示例中 S[3] 设置为 true，其中单词“car”应为 S[2]。您还可以通过存储到目前为止找到的复合词的索引来加速该过程，而不是测试每个位置。

```
def is_all_words(a_string, dictionary):
    str_len = len(a_string)
    S = [False] * (str_len)
# I replaced is_word function by a simple list lookup, 
# feel free to replace it with whatever function you use. 
# tries or suffix tree are best for this.
    S[0] = (a_string[0] in dictionary) 
    for i in range(1, str_len):
        check = a_string[0:i+1] in dictionary # i+1 instead of i
        if (check):
            S[i] = check
    else:
        for j in range(0,i+1): # i+1 instead of i
            if (S[j-1] and (a_string[j:i+1] in dictionary)): # i+1 instead of i
            S[i] = True
            break

    return S

a_string = "carrotforever"
S = is_all_words(a_string, ["a","car","carrot","for","eve","forever"])
print(S[len(a_string)-1]) #prints TRUE

a_string = "helloworld"
S = is_all_words(a_string, ["hello","world"])
print(S[len(a_string)-1]) #prints TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-02T23:17:09.397

有关如何进行英语分词的真实示例，请查看[Python wordsegment 模块](http://www.grantjenks.com/docs/wordsegment/)的源代码。它更复杂一点，因为它使用单词和短语频率表，但它说明了递归方法。通过修改`score`函数，您可以优先考虑更长的匹配。

安装很容易`pip`：

```
$ pip install wordsegment 
```

并`segment`返回一个单词列表：

```
>>> import wordsegment
>>> wordsegment.segment('carrotfever')
['carrot', 'forever'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:33:23.300

1）乍一看，看起来不错。一件事：`for j in range(1, str_len):`应该是`for j in range(1, i):`我认为

2) 如果 S[str_len-1]==true，那么整个字符串应该只包含整个单词。

毕竟 S[i] 为真当且仅当

*   从 0 到 i 的整个字符串由一个字典单词组成
*   或者存在一个 S[j-1]==true `j<i`，并且字符串 [j:i] 是一个字典词

所以如果 S[str_len-1] 为真，那么整个字符串由字典单词组成

# silverlight - WP7 Silverlight + XNA：应用程序栏 -> 不再全屏 xna 渲染？

> ID：10272421
> 
> 赞同：2
> 
> 时间：2012-04-22T21:50:12.777
> 
> 标签：silverlight, windows-phone-7, xna, fullscreen

我正在为 WP7 开发一个混合 silverlight/XNA 应用程序。我希望 XNA 部分呈现全屏，但应用程序栏除外，它是 silverlight。没有打开应用程序栏，XNA 呈现全屏。一旦我打开应用程序栏，XNA 就会在屏幕的顶部和底部留下黑带（我在横向模式下工作）。应用程序栏确实使用全屏高度。

XAML 包含以下行：

mc:Ignorable="d" d:DesignHeight="480" d:DesignWidth="728" shell:SystemTray.IsVisible="False">

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:53:02.410

我认为这与这篇法语文章的问题相同。（因为ApplicationBar和SystrayBar是shell的两个元素）

[http://blog.naviso.fr/wordpress/?p=1304](http://blog.naviso.fr/wordpress/?p=1304)

# ruby-on-rails - 奇怪的 Rails 资产 css 图像行为（可能还有其他东西）

> ID：10272423
> 
> 赞同：0
> 
> 时间：2012-04-22T21:50:16.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, sass, asset-pipeline

我有一个漂亮的 vanilla rails 应用程序，我的所有图像都在 app/assets/images 中，我的样式表在 app/assets/stylesheets 中。在我的风格中，我有：

```
body
  background: url(/assets/bg.png)
  //background: image-path('bg.png')--well, same thing also doesn't work 
```

这个图像没有出现，虽然如果我`=image_tag 'bg.png'`在视图中，它工作得很好（但最后没有生成的时间戳（不是`bg.png?<buncha#s>`）。

如果我去`localhost:3000/assets/bg.png`，它就在那里，就像我所有的图像一样——除了一个被调用`diag_bg.png`的，在这种情况下我得到一个`Errno::ENOTDIR Not a directory - project/app/assets/images/diag_bg`非常奇怪的图像。好吧，无论图像是否存在，即使我可以通过这种方式访问​​它，我也无法将其用作 css 背景。firebug 还显示根本没有对 css 图像的 GET 请求。

-btw，除非我手动 rake 预编译资产（我从未在 dev 中将预编译设置为 false），否则这些图像都不在 public/images 中。但似乎这些图像甚至没有被使用......（对它们有点困惑）

我也收到这些消息。我不确定它是否正常（到目前为止，logo_small.png 是单个 =image_tag）：

```
Started GET "/assets/main.css?body=1" for 127.0.0.1 at 2012-04-22 14:31:33 -0700
Served asset /main.css - 304 Not Modified (0ms)
[2012-04-22 14:31:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true    

Started GET "/assets/logo_small.png" for 127.0.0.1 at 2012-04-22 14:31:33 -0700
Served asset /logo_small.png - 304 Not Modified (0ms)
[2012-04-22 14:31:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

任何帮助将不胜感激......我对资产感到非常沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:35:30.600

你需要使用：

```
background: image-url("bg.png") 
```

helper就是你要的那个`image-url`，需要引用路径，不需要放在`/assets`前面。仅当您的图像位于子文件夹中时才包含文件夹，例如：

```
app/assets/images/icons/favorite.png 
```

...将被称为：

```
background: image-url("icons/favorite.png") 
```

有关更多信息，请参阅[https://github.com/rails/sass-rails](https://github.com/rails/sass-rails)。

# ios - 我们如何使用带有 iOS GLKTextureLoader 的 RGB565 格式的纹理？

> ID：10272432
> 
> 赞同：3
> 
> 时间：2012-04-22T21:51:23.060
> 
> 标签：ios, opengl-es

我正在从 JPG 格式加载非常大的纹理，在 iOS5 之前，我将使用 Apple 示例 Texture2D 类将 JPG 纹理从 RGB888 转换为 RGB565 格式，以将所需的内存空间减半。然后它将以 RGB565 格式上传到带有 glTexImage2D 的 GPU。

使用 iOS5，我将调用转换为使用新的 GLKTextureLoader。然而，即使 JPG 没有 alpha 通道，它似乎也只是使用 RGB888，因此占用了 GPU 内存的两倍。

有没有办法让 GLKTextureLoader 在上传到 GPU 时使用 RGB565？我现在正在使用 [GLKTextureLoader textureWithContentsOfFile:jpgFile]。我还尝试了 [GLKTextureLoader textureWithContentsOfData:data] 并将原始 RGB565 位图的 NSData 传递给它，但是当我尝试这样做时出现错误“{GLKTextureLoaderErrorKey=图像解码失败}”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T20:47:39.790

“textureWithContentsOfData”似乎是一个损坏的方法（注意：缺少它的文档 - 没有规范说明它接受什么）Apple尚未实现 - 它对于我尝试的所有标准 NSData 输入都失败了。

然后我使用标准的 gl* 方法调用将它们直接交给 OpenGL，它们运行良好，所以错误在 GLKit 中。

我已经向 Apple 记录了一个支持请求，要求他们解释他们的方法，并记录它接受的内容。在那之前，我强烈建议你忽略 GLTextureInfo 类（这是一个好主意，但它有太多问题，不值得 - 放弃这个类让我的性能立即提高了 5 倍！）

* * *

更新：Apple 的回应（释义）“嗯。我们也不知道。请将其记录为错误”。

...并且：Apple 在收到错误时的回应：“这不是错误，它是按照设计的，我们认为没有必要记录它。它的作用很明显”

（他们的“显而易见”是：您必须仅向其发送 PNG 或 JPG 或 PVR 格式的数据……（并且*仅*当您在特定硬件上运行时才允许使用 PVR）其他任何东西都会崩溃。）

他们的最终建议是：使用 OpenGL 纹理调用来上传纹理，即在纹理加载时完全忽略 GLKit - 因为 OpenGL 可以工作，记录在案等。令人失望，但似乎是真的 - 在现场项目中， OpenGL 纹理调用通常比 Apple 的 GLKit TextureInfo 类快十倍。说真的 - 不要使用它，这太可怕了:(。

# javascript - 鼠标事件未定义

> ID：10272436
> 
> 赞同：0
> 
> 时间：2012-04-22T21:51:48.933
> 
> 标签：javascript, html, html5-canvas, dom-events

我在网页上有一个 HTML5 画布，带有一个在画布上绘制图像的 JavaScript 函数。我正在尝试向图像添加鼠标事件，以便在单击它时调用另一个 JavaScript 函数，它将更新画布上显示的内容。

在 Firefox 中查看页面时，单击画布上显示的图像时没有任何反应。我正在使用 Firebug 来尝试看看出了什么问题，它给了我以下消息：

```
 mouse_event is not defined
 drawStartButton()index.html (line 107)
 startGame()index.html (line 64)
 (?)()index.html (line 1)
 event = load
 [Break On This Error]  

 ...useX = (mouse_event.clientX-boundingBox.left) * (myGameCanvas.width/boundingBox....

 index.html (line 107) 
```

我用来在画布上绘制开始按钮的函数，以及我添加的鼠标事件如下：

```
function drawStartButton(){
            image.onload = function(){
                context.drawImage(image, 260.5, 60);
            };
            image.src = "StartButton.png";
            /** Now I need to add an event listener to the area of the canvas on 
                on which the button image is displayed, in order to 'listen' for 
                a click on the button */
            var boundingBox = myGameCanvas.getBoundingClientRect();
            var mouseX = (mouse_event.clientX-boundingBox.left) * (myGameCanvas.width/boundingBox.width);
            var mouseY = (mouse_event.clientY-boundingBox.top) * (myGameCanvas.height/boundingBox.height);
            var pixels = context.getImageData(mouseX, mouseY, 1, 1); } 
```

基本上，我想做的就是当用户单击按钮时，将调用下面的函数，并更新画布的内容：

```
function drawLevelOneElements(){
            var context = canvas.getContext("2d");

            /* Draw the images for numbers 1-10.*/
            var image1 = new Image();
            /* Test that this code is being executed */
            context.moveTo(300, 300);
            context.font = "11pt Calibri";
            context.strokeStyle = "black";
            context.strokeText("Testing",300, 300);
            /* End of test */

            image1.onLoad = function(){
                context.drawImage(image1, 50, 50);
                };
            image1.src="1.png";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-21T17:12:45.593

看来我可以通过将变量 mouseX、mouseY 和像素放在一个函数中并将`boundingBox.onmousemove`属性设置为等于这个函数来解决这个问题：

```
boundingBox.onmousemove = function(e){
                var mouseX = e.pageX - this.offsetLeft;
                var mouseY = e.pageY - this.offsetTop;
                var pixels = context.getImageData(mouseX, mouseY, 1, 1);
            } 
```

# javascript - 通过 javascript 全屏 Silverlight

> ID：10272439
> 
> 赞同：0
> 
> 时间：2012-04-22T21:52:30.793
> 
> 标签：javascript, silverlight

好的，这就是问题所在。我有一个基本的网站，其中有按钮。这些按钮通过 javascript 运行，然后代码进入 C#，然后它使用 Silverlight 甘特图控件执行各种操作。

例如，如果我想放大甘特图控件，我会这样：

```
<button id="zoomIn" onclick="SlZoomIn()">Zoom In</button> 
```

然后在javascript中：

```
function SlZoomIn() {
    var control = document.getElementById("SilverlightPlugIn");
    control.Content.SilverPlan.JsZoomIn();
} 
```

然后在 C# 中：

```
[ScriptableMember]
        public void JsZoomIn()
        {

            try
            {
                gantt.ZoomBySteps(1);
            }
            catch (Exception e)
            {
                MessageBox.Show("Zoom In does not work.");
            }
        } 
```

这一切都很好，但是当我想使用需要事件的甘特图时，这是一个问题。例如，如果我想打印或全屏显示我的甘特图控件。我怎样才能做到这一点？

在 C# 中，此代码为：

```
private void fullScreen(object sender, RoutedEventArgs e)
        {
            Application.Current.Host.Content.IsFullScreen = !Application.Current.Host.Content.IsFullScreen;
        } 
```

但是我必须在javascript中做什么才能触发这个方法？当用户点击按钮全屏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:36:46.800

与您之前的示例相比，从 JavaScript 调用此代码没有什么不同，除了 Silverlight 插件对几件事施加了安全限制，包括全屏模式、打印和文件对话框。这意味着这些操作必须由用户单击或键入某些内容来启动。[在 MSDN 上](http://msdn.microsoft.com/en-us/library/cc189023%28v=vs.95%29.aspx#Entering_Full-screen_Mode)进行了解释。

因此，您无法从 JavaScript 执行此操作，即使用户按下 Silverlight 插件外部的按钮 - 用户必须单击 Silverlight 插件内的某些内容，例如引发您在 C# 代码中处理的事件的按钮，并且直接采取行动。

在全屏的情况下，如果您将 HTML/JavaScript 内容与 Silverlight 混合，您会发现 Silverlight 全屏很可能根本不会做您想要的 - Silverlight 内容将是全屏的，而 HTML 内容将不可见。您也不能使用键盘输入（大多数情况下）。我建议在 HTML 页面中调整 Silverlight 对象的大小（可能结合最大化浏览器窗口）。

# objective-c - 什么保存会话？NSURLRequest 还是 NSURLConnection？

> ID：10272446
> 
> 赞同：1
> 
> 时间：2012-04-22T21:53:20.723
> 
> 标签：objective-c, ios, cocoa-touch, nsurlconnection, nsurlrequest

什么保存会话？NSURLRequest 还是 NSURLConnection？我的应用程序使用 NSURLConnection 登录我的网站，但需要 NSURLRequest。登录成功后，什么会保存我创建的会话？NSURLRequest 还是 NSURLConnection？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:53:38.917

两者都不。NSURLRequest 描述了从远程主机获取的东西。NSURLConnection 是一个对象，它的工作是将 NSURLRequest 中的消息发送到远程服务器，并获得响应。两者都没有保存会话数据。

# javascript - 触发事件和ajax

> ID：10272447
> 
> 赞同：1
> 
> 时间：2012-04-22T21:53:26.283
> 
> 标签：javascript, jquery, ajax, json

我对ajax和jquery都是新手，所以请原谅初学者的问题。我对使用 AJAX 调用和返回 JSON 对象的过程感到困惑，并且这些数据可用于程序的其余部分。

如果我有这样的功能：

```
function treeData(){
  $.getJSON("/recipe/recipelist/", function(data) {

    // sorts array by title, alphabetically 
    data.sort(function(a, b){
        return b.title < a.title ? 1 : b.title > a.title ? -1 : 0;
    }); 

    return data; 
  });
} 
```

我尝试像这样访问这些数据，

```
var obj = treeData(); 
```

我收到一条错误消息，说 obj 未定义。基本上，我不明白为什么这不起作用。我假设这与我的退货声明有关。我希望能够构建另一个“删除”函数，该函数在调用时会触发 .getJSON 请求并重绘我的数据库条目列表。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T21:57:16.527

您必须向它发送一个回调，以便您可以对返回的数据做一些事情`treeData`

```
//modified tree data
function treeData(callback){
    $.getJSON("/recipe/recipelist/", function(data) {
        data.sort(function(a, b){
            return b.title < a.title ? 1 : b.title > a.title ? -1 : 0;
        }); 
        callback(data); //supply the callback with the data
    });
}

var obj;

treeData(function(newdata){  //the supplied data
    obj = newdata            //assign to obj
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:57:30.260

AJAX 中的 A 代表异步，这意味着代码不会等待响应到达，而是会在响应到达时调用回调函数。如果您尝试立即返回该值，它还不会被设置。

在您的函数中也使用回调：

```
function treeData(callback){
  $.getJSON("/recipe/recipelist/", function(data) {

    // sorts array by title, alphabetically 
    data.sort(function(a, b){
        return b.title < a.title ? 1 : b.title > a.title ? -1 : 0;
    }); :

    callback(data); 
  });
} 
```

用法：

```
treeData(function(obj){
  // here you can use the result
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T21:59:57.403

你不能那样做。该`return`语句从内部函数返回，而不是从`treeData`函数返回。

```
function treeData() {

  $.getJSON("/recipe/recipelist/", function(data) {

    // sorts array by title, alphabetically 
    data.sort(function(a, b){
        return b.title < a.title ? 1 : b.title > a.title ? -1 : 0;
    }); 

    // this is in the inner function
    return data; 
  });

  // this is in the treeData function
  return "whatever";
} 
```

你可以用它`Deferred`来做到这一点。

```
function treeData() {
  return $.ajax({
      url: "/recipe/recipelist/",
      type: "get",
      dataType: "json"
  });
}

$.when( treeData() ).then(function(data) {
    data.sort(function(a, b) {
        return b.title < a.title ? 1 : b.title > a.title ? -1 : 0;
    });
    var obj = data;
    // you can use obj safely
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T21:58:08.367

你不能`return`从回调。相反，您应该分配`data`一个在外部声明的变量，或者只是在回调内部`treeData`做您需要做的事情。`data`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T22:00:20.227

默认情况下，AJAX 请求是异步的，当您的函数返回时，AJAX 请求尚未完成并且数据不可用。您必须开始使用您传递给的回调函数中的数据`$.getJSON`。这样，您的代码将可以访问数据。约瑟夫提供了一个例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-22T22:03:48.510

$.getJSON 是一个异步请求，这意味着代码被执行但不会等待它完成。该代码不起作用有两个原因：

1.  您可能在 getJSON 完成执行之前分配了 treeData() 的值。

2.  在您的示例中，treeData() 实际上并没有返回任何值，getJSON 回调会。

这会起作用：

```
var obj;

function treeData(){
  $.getJSON("/recipe/recipelist/", function(data) {

    // sorts array by title, alphabetically 
    data.sort(function(a, b){
        return b.title < a.title ? 1 : b.title > a.title ? -1 : 0;
    }); 

    obj = data; 
  });
};

treeData(); 
```

但是您不知道 getJSON 回调何时完成触发，因此您可能希望在回调本身中处理排序结果。

# ruby-on-rails - 键必须是字符串或符号

> ID：10272452
> 
> 赞同：5
> 
> 时间：2012-04-22T21:54:13.077
> 
> 标签：ruby-on-rails, mongoid, datamapper

设置：

```
Ruby on rails 3.2.2
Ruby 1.9.2
dataMapper 1.2.0
mongoid 2.4.8
mongoid_orderable 1.0.0 
```

使用mongoid_orderable`keys must be strings or symbols`时出错。

我认为这与我正在使用的数据映射器有关（使用数据映射器从另一个服务器移植数据）

我注意到 dataMapper 和 mongoid 之间存在冲突，因为它们都使用各种方法、asc、desc 等扩展 Symbol。这可能是同一个问题吗？

如果有帮助，这是我的堆栈跟踪中的一个片段：

```
keys must be strings or symbols
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/bson-1.6.2/lib/bson/bson_c.rb:24:in `serialize'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/bson-1.6.2/lib/bson/bson_c.rb:24:in `serialize'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongo-1.6.2/lib/mongo/collection.rb:436:in `update'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid-2.4.8/lib/mongoid/collections/master.rb:25:in `block in update'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid-2.4.8/lib/mongoid/collections/retry.rb:29:in `retry_on_connection_failure'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid-2.4.8/lib/mongoid/collections/master.rb:24:in `update'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid-2.4.8/lib/mongoid/collection.rb:149:in `update'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid_orderable-1.0.0/lib/mongoid_orderable/mongoid/contexts/mongo.rb:6:in `inc'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid_orderable-1.0.0/lib/mongoid_orderable/mongoid/criteria.rb:1:in `inc'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid_orderable-1.0.0/lib/mongoid/orderable.rb:125:in `apply_position'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/mongoid_orderable-1.0.0/lib/mongoid/orderable.rb:85:in `add_to_list'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:419:in `block in _run__3008157942946527494__save__4591629889417243504__callbacks'
/Users/hmm/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_742' 
```

mongoid_orderable 的当前实现如下：

```
class MyModel
  include Mongoid::Document
  include Mongoid::Orderable
  default_scope order_by(:position => :asc)
end 
```

我很确定它基于堆栈跟踪与 _mongoid_orderable_ 相关，并且如果我注释掉 _mongoid_orderable_ 相关行，它就会起作用。[还在这里](https://github.com/pyromaniac/mongoid_orderable/issues/4)提出了问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:49:58.253

解决了。

就像我一样，它与 mongoid 和 DataMapper 发生了冲突。[在mongoid_orderable](https://github.com/pyromaniac/mongoid_orderable/issues/4)中更改几行解决了它。

如果有人偶然发现这个问题，那是因为 DataMapper 和 Mongoid 都在使用诸如`gte, gt, lt, lte`etc之类的运算符扩展 Symbol。

为了避免这种冲突，只需使用 mongoids 替代语法：

代替：

```
order_by(:created_at.desc) 
```

和

```
where(:type.ne => 'Class') 
```

用这个：

```
order_by(:created_at => :desc) 
```

和

```
where(:type => {'$ne' => 'Class'}) 
```

# ruby-on-rails - 导轨。如何将值从数组传递到谷歌图表脚本。

> ID：10272454
> 
> 赞同：3
> 
> 时间：2012-04-22T21:54:17.930
> 
> 标签：ruby-on-rails, charts

轨道应用程序。我有一个项目和一个任务模型。任务有一个列 project_id 来设置它们所属的项目，以及几个完整性列来指示任务在一段时间内的完整性（所以我有一个列'completeness_at_3hours'、'completeness_at_6hours'等），以指示从 1 到 5 的级别任务的完成度。

我现在需要用谷歌图表来绘制属于一个项目的任务在一段时间内的完整性。

在我的项目控制器中，我有

```
@tasks = Tasks.where("project_id = ?", params[:id]) 
```

那么，既然我有了所选项目的任务，在@tasks 中，我将如何将数据包含在谷歌图表脚本中？

```
function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Time', '<%= @task.name %>', '????????'],
          ['<%= @task.created_at %>',  <%= @task.zerohours %>, '?????????'],
          ['<%= @task.created_at + 3.hours %>',  <%= @task.threehours %>, '????????'],
          ['<%= @task.created_at + 6.hours %>',  <%= @task.sixhours %>, '????????'],
          ['<%= @task.created_at + 9.hours %>',  <%= @task.ninehours %>, '????????'],
          ['<%= @task.created_at + 12.hours %>',  <%= @task.twelvehours %>, '????????']
        ]); 
```

这仅适用于一项任务（刚刚创建的任务），但是如何将@tasks 中包含的所有数据传递给脚本？

我的意思是，要在一个简单的表中检索数据，我会使用：

```
<% @tasks.each do |task| %>
<%= @task.threehours %>
<%= @task.sixhours %>
<%= @task.ninehours %>
<%= @task.twelvehours %>
<% end %> 
```

但是我如何在谷歌图表脚本中做同样的事情呢？

非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:34:35.223

据我所知，您想通过其他任务代替问号，对吗？如果是这样，我有一个解决方案。首先，您可能希望将代码包装在一个函数中：

```
var data = google.visualization.arrayToDataTable(<%= make_a_chart %>); 
```

并将其放置在相应的助手中：

```
def make_a_chart
  result = []
  result.push make_labels, 
              make_data( 0, "zerohour" ), 
              make_data( 3, "threehours" ),
              make_data( 6, "sixhours" ),
              make_data( 9, "ninehours" ),
              make_data( 12, "twelvehours" )
  return result
end

def make_labels
  y = ["Time"]
  for task in Task.all do
    y.append task.name
  end
  return y
end

def make_data( time, completeness )
  y = Task.first.created_at + time
  for task in Task.all do
    y.append task[completeness]
  end
  return y
end 
```

此代码假定所有任务同时启动，并且您的数据库称为“任务”。此外，它很可能很粗糙，可以进行一些改进。

# ruby-on-rails - 使用 form_tag 在 rails 3 中匹配路径

> ID：10272460
> 
> 赞同：1
> 
> 时间：2012-04-22T21:55:21.137
> 
> 标签：ruby-on-rails, path

我正在尝试按照教程在 ruby​​ on rails (http://www.youtube.com/watch?v=oXr1jAsBlPI&feature=relmfu) 中制作 Twitter 克隆。对我来说不幸的是，他在 Rails 2.xx 中这样做，我在跟上时遇到了一些麻烦。我目前是 41:34，当时他正在定义`routes.rb`.

当我进入我的“显示”页面时，我遇到了这个问题：

> “路由错误没有路由匹配 {:action=>"show", :controller=>"toggle_follow"} 尝试运行 rake 路由以获取有关可用路由的更多信息。”

这是我在相关文件中的内容：

# 路线.rb

```
match '/:username', :controller => 'home', :action => 'show'
match '/:username/toggle_follow', :controller => 'home', :action => 'toggle_follow' 
```

# 显示.html.rb

```
<% if current_user.is_friend? @user %>
    <%= submit_tag "Following", :class => "button" %>
<% else %>
    <%= submit_tag "Stop following", :class => "button" %>
<% end %> 
```

# home_controller.rb

```
def show
    @user = User.find_by_username(params[:username])
    @flits = @user.all_flits

end

def toggle_follow
    @user = User.find_by_username(params[:username])
    if current_user.is_friend? @user
        flash[:notice] = "You are no longer following @#{@user.username}"
        current_user.remove_friend(@user)
    else 
        current_user.add_friend(@user)
        flash[:notice] = "You are following @#{@user.username}"
    end

   redirect_to user_flits_path(@user.username)

end 
```

...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:39:52.583

好的，我解决了...

在您必须输入的路线中：

# 路由.db

匹配 '/:username', :to => 'home#show', :as => 'user_flits' 匹配 '/:username/toggle_follow', :to => 'home#toggle_follow', :as => 'toggle_follow'

# python - 从 LaTeX 文档生成图像

> ID：10272462
> 
> 赞同：2
> 
> 时间：2012-04-22T21:55:52.553
> 
> 标签：python, latex, wxpython

我编写了一个生成 LaTeX 输出的 Python 脚本。我想在我的 wxPython 应用程序中将生成的 LaTeX 视为“文档”。

我能想到的唯一方法是从 LaTeX 字符串动态生成图像，然后将图像绘制到 StaticBitmap 小部件上。

沿着这些思路。在这里，它的 Google 的 mathtext 模块用于解析 LaTex 字符串 - 但是，它是 LaTeX lite 并且仅适用于数学表达式。我希望能够解析整个 LaTeX 文档并从中生成图像。

```
import wx
import mathtext

class LaTex:
    def __init__(self, rawText, pos = (0, 0), size = 72):
        self.laTexParser = mathtext.MathTextParser('Bitmap')
        self.rawText = rawText
        self.pos = pos
        self.size = size
        self.setImage()

    def setImage(self):
        img = self.laTexParser.parse(self.rawText, self.size)
        img = wx.ImageFromData(img.get_width(), img.get_height(),
img.as_rgb_str())
        self.img = wx.BitmapFromImage(img)

    def draw(self, dc):
        dc.DrawBitmap(self.img, self.pos[0], self.pos[1])

s = get_latex_doc()
test = LaTex(s)
#test.draw(your_DC_here) 
```

是否有 Python 库/模块可用于将 LaTeX 文档解析为图像（最好不必将图像保存到文件）？

# windows-phone-7 - 即使在应用补丁后，Windows Phone 7 模拟器也会在 Windows 8 上崩溃

> ID：10272463
> 
> 赞同：2
> 
> 时间：2012-04-22T21:56:07.903
> 
> 标签：windows-phone-7, windows-phone-7-emulator, windows-phone-7.1.1

不久前，微软发布了一个补丁，允许 Windows Phone 模拟器在 Windows 8 中工作。没有补丁，模拟器实际上仍然可以为我工作（尽管速度很慢），但自从我应用了补丁后，它每次都会崩溃。

有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:06:07.587

你的电脑显卡是Intel mobile 965 express吗？

我认为这是该卡的驱动程序的问题

实际上尝试将驱动程序更改为 Microsoft 基本显示适配器，如果它有效，你会看到这个驱动程序

对不起我的英语不好

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-09T04:05:00.397

卸载你的VS。再次安装VS。[然后从这里](http://www.microsoft.com/download/en/details.aspx?id=29233)下载 7.1.1 。它适用于带有 VS10 的 Win8 x64

# iphone - 使用 ui 动画捕获 uiwindow 屏幕截图 30 fps

> ID：10272468
> 
> 赞同：0
> 
> 时间：2012-04-22T21:56:30.683
> 
> 标签：iphone, ios, ipad, core-animation, screenshot

我想制作一个工具来制作应用程序屏幕的视频，以向客户展示应用程序是如何工作的。
所以我想每 30 - 60 次每秒获取一次窗口截图并将其保存到文档中。应用程序关闭后，从该文件创建视频，然后您将拥有应用程序的视频。当您将应用程序发送到应用商店时，您将删除或取消以制作视频和应用程序截图。

```
//Get list of document directories in sandbox
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDirectory, YES);
    //Get one and only document directory from that list
    self.documentFolder = [documentDirectories objectAtIndex:0];

    self.images = [[NSMutableArray alloc] init];
    //Append passed in file name to that directory, return it

    _counter = 0;
    self.timerCapture = [NSTimer scheduledTimerWithTimeInterval: 1.0f/30.0f
                                             target: self
                                           selector: @selector(getWindowCapture:)
                                           userInfo: nil
                                            repeats: YES];

- (UIImage *)captureScreen {
    CALayer *layer;
    layer = self.window.layer;
    UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, 1.0f); 
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return screenImage;
} 
```

问题是我无法在动画期间捕获 UIWindow？
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:00:54.847

用这个
`[layer.presentationLayer renderInContext:UIGraphicsGetCurrentContext()];`
代替
`[layer renderInContext:UIGraphicsGetCurrentContext()];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T15:41:42.253

它可能会对你有所帮助。:-

[https://github.com/hackiftekhar/IQProjectVideo](https://github.com/hackiftekhar/IQProjectVideo)

它有一个缺点，它不能捕捉 presentViewController 动画。我正在尝试解决这个问题。

# android - 解析数据时出错 org.json.JSONException：值 我正在编写一个打算在android设备上运行的应用程序。该应用程序应该通过php读取Mysql数据库中的信息，但是当我运行该应用程序时，Log cat提示错误'解析数据时出错org.json.JSONException：值 我得到的代码是从教程 问问题 问问题 2012-04-22T21:56:59.253 10106 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在编写一个打算在android设备上运行的应用程序。该应用程序应该通过php读取Mysql数据库中的信息，但是当我运行该应用程序时，Log cat提示错误'解析数据时出错org.json.JSONException：值 我得到的代码是从教程中下载的，请耐心等待我对php有一些基础知识，在java中很少。我已经测试了 php 脚本并且它运行完美，所以我不会费心附加它。 main.java 代码： package test.an2mysql; import java.io.BufferedReader; import java.io.InputStream; import java.io.InputStreamReader; import java.util.ArrayList; import org.apache.http.HttpEntity; import org.apache.http.HttpResponse; import org.apache.http.NameValuePair; import org.apache.http.client.HttpClient; import org.apache.http.client.entity.UrlEncodedFormEntity; import org.apache.http.client.methods.HttpPost; import org.apache.http.impl.client.DefaultHttpClient; import org.apache.http.message.BasicNameValuePair; import org.json.JSONArray; import org.json.JSONException; import org.json.JSONObject; import android.app.Activity; import android.os.Bundle; import android.util.Log; import android.widget.LinearLayout; import android.widget.TextView; public class main extends Activity { /** Called when the activity is first created. */ TextView txt; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.main); // Create a crude view - this should really be set via the layout resources // but since its an example saves declaring them in the XML. LinearLayout rootLayout = new LinearLayout(getApplicationContext()); txt = new TextView(getApplicationContext()); rootLayout.addView(txt); setContentView(rootLayout); // Set the text and call the connect function. txt.setText("Connecting..."); //call the method to run the data retreival txt.setText(getServerData(KEY_121)); } public static final String KEY_121 = "http://10.1.1.19/cms/test/android2mysql/read.php"; //i use my real ip here private String getServerData(String returnString) { InputStream is = null; String result = ""; //the data to send ArrayList <namevaluepair>nameValuePairs = new ArrayList<namevaluepair>(); nameValuePairs.add(new BasicNameValuePair("country","undefined")); //http post try{ HttpClient httpclient = new DefaultHttpClient(); HttpPost httppost = new HttpPost(KEY_121); httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); HttpResponse response = httpclient.execute(httppost); HttpEntity entity = response.getEntity(); is = entity.getContent(); }catch(Exception e){ Log.e("log_tag", "Error in http connection "+e.toString()); } //convert response to string try{ BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8); StringBuilder sb = new StringBuilder(); String line = null; while ((line = reader.readLine()) != null) { sb.append(line + "\n"); } is.close(); result=sb.toString(); }catch(Exception e){ Log.e("log_tag", "Error converting result "+e.toString()); } //parse json data try{ JSONArray jArray = new JSONArray(result); for(int i=0;i <jarray.length();i++){ 0="" 1="" 2="" 3="" 4="" 5="" jsonobject="" json_data="jArray.getJSONObject(i);" log.i("log_tag","id:="" "+json_data.getint("id")+="" ",="" country:="" "+json_data.getstring("country")+="" documentn:="" "+json_data.getint("documentn")="" );="" get="" an="" output="" to="" the="" screen="" returnstring="" +="\n\t" jarray.getjsonobject(i);="" }="" }catch(jsonexception="" e){="" log.e("log_tag",="" "error="" parsing="" data="" "+e.tostring());="" return="" returnstring;="" 如果您能给我任何帮助，我将不胜感激。="" 正如对您问题的评论中所指出的，您的服务器似乎返回的是="" xml="" 而不是="" json。您只需输出即可轻松确认result：="" "failed="" was:\n"="" result);="" 如果是="" xml（几乎可以肯定），那么您要么需要让服务器输出="" json，要么需要解析它发送给您的="" xml。="" androideclipseparsingsdk="" 回答="" this="" answer="" is="" useful="" 于="" 2012-06-05t10:24:00.967="" related="" mobile="" -="" 如何将手机用作="" usb="" 尤其是诺基亚="" s-60="" 系列="" android="" android：phonegap="" sqlite="" 问题="" 在android中加载两个webview="" java="" 存储实体的="" id="" 生成（app="" 引擎）="" javascript="" 在="" 中的另一个函数中定义一个函数="" 试图在linux中设置类路径="" linux="" linux中等效的tasklist.exe="" ebean="" 如何检查模型是否已增强？="" 尝试通过意图启动地图活动时出现="" noclassdeffounderror="" jquery="" 根据选择器更改css值？="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：10272470
> 
> 赞同：4
> 
> 时间：
> 
> 标签：android, eclipse, parsing, sdk

我正在编写一个打算在android设备上运行的应用程序。该应用程序应该通过php读取Mysql数据库中的信息，但是当我运行该应用程序时，Log cat提示错误'解析数据时出错org.json.JSONException：值

我得到的代码是从教程中下载的，请耐心等待我对php有一些基础知识，在java中很少。我已经测试了 php 脚本并且它运行完美，所以我不会费心附加它。

main.java 代码：

```
  `package test.an2mysql;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.TextView;

public class main extends Activity {
/** Called when the activity is first created. */

   TextView txt;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    // Create a crude view - this should really be set via the layout resources 
    // but since its an example saves declaring them in the XML. 
    LinearLayout rootLayout = new LinearLayout(getApplicationContext()); 
    txt = new TextView(getApplicationContext()); 
    rootLayout.addView(txt); 
    setContentView(rootLayout); 

    // Set the text and call the connect function. 
    txt.setText("Connecting...");
  //call the method to run the data retreival
    txt.setText(getServerData(KEY_121));

}
public static final String KEY_121 = "http://10.1.1.19/cms/test/android2mysql/read.php"; //i use my real ip here

private String getServerData(String returnString) {

   InputStream is = null;

   String result = "";
    //the data to send
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("country","undefined"));

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(KEY_121);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }
    //parse json data
    try{
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                    JSONObject json_data = jArray.getJSONObject(i);
                    Log.i("log_tag","id: "+json_data.getInt("id")+
                            ", country: "+json_data.getString("country")+
                            ", documentn: "+json_data.getInt("documentn")
                    );
                    //Get an output to the screen
                    returnString += "\n\t" + jArray.getJSONObject(i);
       }
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }
    return returnString;
}   

}` 

如果您能给我任何帮助，我将不胜感激。

            回答 #1

赞同：3

时间：2012-06-05T10:24:00.967

正如对您问题的评论中所指出的，您的服务器似乎返回的是 XML 而不是 JSON。您只需输出即可轻松确认`result`：

```
}catch(JSONException e){
    Log.e("log_tag", "Error parsing data "+e.toString());
    Log.e("log_tag", "Failed data was:\n" + result);
} 
```

如果是 XML（几乎可以肯定），那么您要么需要让服务器输出 JSON，要么需要解析它发送给您的 XML。

```</jarray.length();i++){></namevaluepair></namevaluepair>

# java - 无法从一个类访问数组数据到另一个类

> ID：10272471
> 
> 赞同：2
> 
> 时间：2012-04-22T21:57:04.443
> 
> 标签：java, arrays, scope, variable-assignment

我在将数组的数据从一个类传递到下一个类时遇到了一些麻烦。

*编辑* 我现在不再收到错误，并且我的代码可以编译，但是正如我被警告的那样，数组的每个元素都为 null。现在我已经取出了静态修饰符，它仍然给我null。我也更新了代码。

这是创建数组的类。

```
public class AssignSeat {

String[] arrangement = new String[12];

public void SeatStart() {

    arrangement[0] = "Collins";
    arrangement[2] = "Faivre";
    arrangement[3] = "Kinnard";
    arrangement[6] = "Morgans";
    arrangement[7] = "Rohan";
    arrangement[8] = "Shatrov";
    arrangement[9] = "Sword";
    arrangement[11] = "Tuckness";

    System.out.format("%-15s%-15s%n", "seat", "passenger");

    for (int i=0; i<arrangement.length; i++) {
        System.out.format("%-15s%-15s%n", i+1, arrangement[i]);

    }

}

public String[] getArrangement() {
    return arrangement;
}

public void setArrangement(String[] arrangement) {
    this.arrangement = arrangement;
}
} 
```

这是尝试访问信息的方法。特别是我需要帮助的 for 循环，所以忽略其他有错误的地方。谢谢你。

```
public void actionPerformed(ActionEvent event) {
    Scanner scanner = new Scanner(System.in);
    AssignSeat seat = new AssignSeat();

    if(event.getSource() instanceof JButton){

        JButton clickedButton = (JButton) event.getSource();
        String buttonText = clickedButton.getText();

        if (buttonText.equals("first class")) {
            entername.setVisible(true);
            seatnum.setVisible(true);
            confirmed.setVisible(true);
            inputline.setVisible(true);
            outputline.setVisible(true);
            if ((seat.arrangement[1] == null)) {
                System.out.println(seat.arrangement[0]);
                System.out.println(seat.arrangement[2]);
                two.setForeground(Color.green);
            }
        } else if (buttonText.equals("coach")) {
            //System.out.println("so does this!");
            entername.setVisible(true);
            seatnum.setVisible(true);
            confirmed.setVisible(true);
            inputline.setVisible(true);
            outputline.setVisible(true);
            if ((seat.arrangement[4] == null)) {
                five.setForeground(Color.green);
            } 
            if ((seat.arrangement[5] == null)) {
                six.setForeground(Color.green);
            } 
            if ((seat.arrangement[10] == null)) {
                eleven.setForeground(Color.green);
            } 
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:00:16.260

问题在于数组被声明为`static`，但它的初始化代码在构造函数中。去掉`static`原代码中的所有修饰符，替换掉这部分：

```
if (AssignSeat.getArrangement()[1].equals("null")) 
```

有了这个：

```
AssignSeat assign = new AssignSeat();
if (assign.getArrangement()[1] == null) 
```

另请注意，这`"null"`不是空值，请使用`null`（不带引号）。

另一种方法是将数组保留为静态成员，但静态初始化它，如下所示：

```
private static String[] arrangement = new String[12];
static {
    arrangement[0] = "Collins";
    arrangement[2] = "Faivre";
    arrangement[3] = "Kinnard";
    arrangement[6] = "Morgans";
    arrangement[7] = "Rohan";
    arrangement[8] = "Shatrov";
    arrangement[9] = "Sword";
    arrangement[11] = "Tuckness";
} 
```

在这种情况下，这将起作用：

```
if (AssignSeat.getArrangement()[1] == null) 
```

但我仍然相信，`static`如果类的多个实例碰巧修改了它的内容，那么制作数组将会有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T21:59:52.873

代替

```
if (AssignSeat.getArrangement()[1].equals("null")) 
```

和

```
if (AssignSeat.getArrangement()[1] == null) 
```

如果值为`null`，则不能`equals`在其上调用方法（如 ）。您需要将该值直接与 进行比较`null`，这是一个常量而不是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:07:03.970

好的，我对您在头等舱中要做什么感到有些困惑。您正在从实例方法初始化静态数组...

换句话说，数组中的 String 值将是 null，直到您从类的实例调用 SeatStart。

尝试从 AssignSeat 的静态构造函数初始化 String 数组，以确保在使用它之前已对其进行初始化：[http ://www.snippetit.com/2009/05/java-static-variables-static-methods-and-静态构造函数/](http://www.snippetit.com/2009/05/java-static-variables-static-methods-and-static-constructor/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:42:48.870

您正在尝试使用类的属性，而不首先实例化对象。在您调用默认/用户定义的构造函数之前，没有专门用于该对象属性的内存。

即使您设法调用该方法，您也使用的是静态方法，可以在不需要对象实例的情况下调用该方法。

为对象创建一个构造函数（或使用默认构造函数），然后您将能够访问您的属性，因为您的对象将位于堆上并为字符串 [] 分配了内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-12T07:38:02.973

只需将 SeaStart 定义为一个数组。

```
 public String[] SeatStart() {
        arrangement[0] = "Collins";
        arrangement[2] = "Faivre";
        arrangement[3] = "Kinnard";

        return arrangement;
    } 
```

为方便起见，创建一个新数组以从**AssignSeat**类复制数组。然后从该数组中检索值。

```
public void actionPerformed(ActionEvent event) {    
    AssignSeat seat = new AssignSeat();

    String[] foo = seat.SeatStart();

    System.out.println(foo[0]);
    System.out.println(foo[1]);
    System.out.println(foo[2]);
} 
```

尽管您也可以通过以下方式访问它：

`System.out.println(seat.SeatStart()[0]);`

结果将是：

```
Collins
null
Faivre 
```

并且'null'是因为显然你没有为安排[1]分配一个值:-)

但最终，它奏效了。

# python - 为什么每次更新我的 pylab 动画都会变慢？

> ID：10272478
> 
> 赞同：10
> 
> 时间：2012-04-22T21:57:35.713
> 
> 标签：python, matplotlib

我想通过调用`imshow`for 循环来显示一个简单的动画。这是我的问题的演示：

```
import pylab,time
images = [pylab.uniform(0,255,(50,50)) for _ in xrange(40)]
pylab.ion()
timings = []
for img in images:
  tic = time.time()
  pylab.imshow(img)
  pylab.draw()
  toc = time.time()
  timings.append(toc-tic)
pylab.clf()
pylab.plot(timings)
pylab.title('elapsed time per iteration')
pylab.ioff()
pylab.show() 
```

请注意，我在运行循环之前生成图像，并且我唯一需要时间的部分是`imshow`and`draw`函数。我得到的结果如下所示： ![运行我的演示的结果](../Images/6d6f362f5fb7a2fa73ca1807d4ed9986.png)

我怎样才能避免这种减速？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-22T23:09:13.720

事情正在放缓，因为您每次*都添加越来越多的图像并绘制它们。*

要么 1）清除每个图像之间的情节（在你的情况下，`pylab.cla()`），或者更好 2）不要制作新图像，只需将现有图像的数据设置为新数据。

作为使用示例`cla()`：

```
import matplotlib.pyplot as plt
import numpy as np

images = np.random.uniform(0, 255, size=(40, 50, 50))

fig, ax = plt.subplots()

fig.show()
for image in images:
    ax.imshow(image)
    fig.canvas.draw()
    ax.cla() 
```

作为仅设置数据的示例：

```
import matplotlib.pyplot as plt
import numpy as np

images = np.random.uniform(0, 255, size=(40, 50, 50))

fig, ax = plt.subplots()

im = ax.imshow(images[0])
fig.show()
for image in images[1:]:
    im.set_data(image)
    fig.canvas.draw() 
```

您会注意到第二种方法要快得多。

# spring - 如果声明了会话对象，则会话对象的自动装配属性不会自动装配

> ID：10272479
> 
> 赞同：1
> 
> 时间：2012-04-22T21:57:47.397
> 
> 标签：spring, spring-mvc

如果声明了会话对象，则会话对象的自动装配属性不会自动装配

```
<bean id="user" class="org.User" scope="session">
    <aop:scoped-proxy/>
</bean> 
```

用户对象属性是@autowired，但该属性没有自动装配。

```
public class User 
{
    TemplateService templateService;

    @Autowired
    public void setTemplateService(TemplateService templateService) {
        this.templateService = templateService;
    }
} 
```

我想知道为什么会这样。用 xml 声明替换自动装配注释是唯一的解决方案。还有其他解决方案吗？谢谢

# php - 如何从 2 个不同的数字范围中选择 1 个随机数？

> ID：10272481
> 
> 赞同：5
> 
> 时间：2012-04-22T21:58:28.567
> 
> 标签：php, random

我需要得到一个介于两者之间的随机数

```
0 - 80 
```

和

```
120 - 200 
```

我可以

```
$n1 = rand(0, 80);
$n2 = rand(120, 200); 
```

但是我需要在 和 之间进行`n1`选择`n2`。无法做到

```
 $n3 = rand($n1, $n2) 
```

因为这可能会给我一个`80 - 120`我需要避免的数字。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-22T22:01:51.200

由于两个范围的大小不同（即使只有 1 个数字），为了确保良好的随机分布，您需要这样做：

```
$random = rand( 0, 200 - 39 );
if ($random>=120-39) $random+=39; 
```

最快的方法。:)

它的工作方式是假装它是一个范围，如果它最终选择了一个高于第一个范围的数字，我们将其增加以适应第二个范围。这确保了完美的传播。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T22:00:08.583

由于两个范围具有相同的大小，您可以简单地使用`rand(0, 1)`来确定要使用的范围。

```
$n = rand(0, 1) ? rand(0, 80) : rand(120, 200); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-21T12:19:43.687

得到两个随机数**$n1**和**$n2**

```
$n1 = 兰德(0, 80);
$n2 = 兰德(120, 200);
```

定义名为**$n3的新数组**

```
$n3=数组（）；
```

使用 array_push() 函数将**$n1**和**$n2**添加到数组**$n3中**

```
array_push($n3,$n1,$n2);
```

使用 array_rand() 函数从数组**$n3**中找到随机索引**$find_index**。

 **```
$find_index=array_rand($n3,1);
```

显示结果

```
回声 $n3[$find_index];
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T01:16:50.963

PHP为此提供了一个新功能，也称为范围。非常易于使用，可以在 PHP 手册中找到。

它允许您输入最小/最大数字以从中获取范围。

```
<?php
echo range(0, 1000);
? 
```

但从技术上讲，您也可以输入自己的两个数字作为数字范围。**

# c# - 按财产共享价值排序

> ID：10272483
> 
> 赞同：2
> 
> 时间：2012-04-22T21:58:55.423
> 
> 标签：c#, linq

我有一个包含字段 UserID、Property 的对象列表：

我想按大多数共享属性值对列表进行排序。因此，如果每个用户都有 Property="Popular"，那应该首先出现。如果除了一个用户之外的每个人都有 Property="Second" 应该在列表中排在第二位......即使每个用户只使用一次。

我会在每个可能的属性上做 distinct() ，但是对于许多可能的属性来说这似乎并不有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:01:01.237

您可以在 上使用分组`Property`，按每组中的计数对组进行排序，然后使用以下方法再次展平列表`SelectMany()`：

```
var items = myList.GroupBy(x => x.Property)
                  .OrderByDescending(g => g.Count())
                  .SelectMany(g => g);
                  .ToList(); 
```

从您的问题来看，我不太清楚您是否希望显示重复项，以及您是否对`UserID`. 如果没有，您只需选择组的键，即可`List<string>`按所需顺序为您提供唯一的属性值：

```
var props = myList.GroupBy(x => x.Property)
                  .OrderByDescending(g => g.Count())
                  .Select(g => g.Key);
                  .ToList(); 
```

**编辑：**

看起来这将是您实际正在寻找的更多内容 - 组是按具有给定属性的唯一用户数量排序的。

```
var props = myList.GroupBy(x => x.Property)
                  .OrderByDescending(g => g.Select(x=> x.UserID)
                                           .Distinct()
                                           .Count())
                  .Select(g => g.Key);
                  .ToList(); 
```

# c# - SharePoint2010 中的 ConversionJob 将 docx 转换为 pdf 需要很长时间或非常慢

> ID：10272485
> 
> 赞同：2
> 
> 时间：2012-04-22T21:59:44.627
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-api, pdf-conversion

我一直在**SharePoint 2010中使用****ConversionJob**将 docx 文件转换为 pdf，这需要很长时间，大约 10 分钟。

 **这真的很慢还是因为我服务器上的资源有点慢？因为我的开发服务器需要 10 分钟，我担心通过互联网花费的时间。

在 SharePoint 2010 中是否有任何方法可以使其更快或使用任何其他解决方案？

我首先使用 C#、Open XML 来操作和创建 docx，然后使用 SharePoint 2010 ConversionJob 转换为 pdf。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:55:55.760

如果我没记错的话，ConversionJob 默认每 10 分钟运行一次。可能您需要等到计时器作业再次开始。根据我的经验，将 Word 文档转换为 PDF 并不需要太多时间。

转到您的管理中心 -> 监控 -> 查看作业定义 -> 找到 Word Automation Services 计时器作业，然后查看设置的时间表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:58:16.280

有很多因素会影响性能。

1.  看看您的代码如何影响开发中的 CPU 和 RAM，并使用一个文档或一组文档来模拟数据等生产。
2.  看看你在哪里得到 .docx 并把 .pdf 放在哪里。这是网络延迟可以发挥作用，与您的代码无关。
3.  您应该显示一些代码，以便我们查看任何可用的优化。**

# matlab - 找到形状中一点的梯度方向

> ID：10272492
> 
> 赞同：0
> 
> 时间：2012-04-22T22:00:13.317
> 
> 标签：matlab, gradient, hough-transform

我正在尝试在 matlab 中实现广义霍夫变换。该算法需要形状中每个点的梯度方向。如何测量 phi，如下图所示？

![在此处输入图像描述](../Images/c921d89c4708203276e29ac5caa8a2c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:36:47.243

曲线 [x(t), y(t)] 的法线是 [-dy(t)/dt, dx(t)/dt]。因此，`x`作为 x 坐标和`y`y 坐标，法线是

```
[-diff(y(:)),diff(x(:))] 
```

角度 phi 是

```
atan2(diff(x(:)),-diff(y(:))) 
```

# android - 如何隐藏/禁用 admob adview？

> ID：10272493
> 
> 赞同：6
> 
> 时间：2012-04-22T22:00:13.537
> 
> 标签：android, view, admob, adview

我通过 view.gone 隐藏 admob adview：

```
//adView.setClickable(false);
//adView.clearFocus();
//adView.setEnabled(false);
//adView.setFilterTouchesWhenObscured(true);
//adView.setFocusable(false);
//adView.setFocusableInTouchMode(false);
adView.setVisibility(View.GONE);
adView.startAnimation( animation ); 
```

这隐藏了广告，但 adview 本身仍然是可触摸的，所以如果我触摸 adview 的空间，它仍然会打开浏览器并将我重定向到广告，尽管广告本身是不可见的。

如何也禁用触摸事件？我已经尝试了上面的所有行，但没有一个行得通。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T10:18:42.240

在大多数情况下，在视图层次结构中设置`adView.setVisibility(View.GONE)`和删除 AdMob 视图会隐藏广告并阻止用户交互。

不要忘记在显示广告的 Activity 完成（销毁）时结束 AdView 生命周期。来自 AdMob SDK Javadoc：

> **公共无效销毁（）**
> 
> 销毁 AdView。调用此方法后，不应再使用 AdView。

`destroy()`在 Activity 的回调`onDestroy()`中调用：

```
@Override
public void onDestroy() {
    if (adView != null) {
        adView.destroy();
    }
super.onDestroy();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T22:09:35.950

尝试根据需要使用 setOnTouchListener 和 Override onTouch。您也可以使用 removeView()：

```
LinearLayout linLay = (LinearLayout)findViewById(R.id.ad_layout);
linLay.removeView(adView); 
LinearLayout.LayoutParams params = new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);
linLay.addView(adView, params); 
```

并在需要时将其添加回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-30T20:46:05.833

```
final com.google.ads.AdView ad = (AdView) findViewById(R.id.rect_ad);
   if ( ad != null) {
            ad.stopLoading();
            ad.destroy();
            getWindowManager().removeView(ad);
   } 
```

即使这段代码也不会破坏 AdMob =((( 我有它的 Handler 和 WebView 在内存中保存我的活动

# mysql - 使用 SQL 优化分页

> ID：10272497
> 
> 赞同：0
> 
> 时间：2012-04-22T22:00:22.673
> 
> 标签：mysql

使用 mySQL 优化分页的最佳实践是什么？SQL 查询类似于

```
Select * from SOME_TABLE where id <= SOME_NUMBERS and OTHER_OPTIONAL_CONDITIONS_TO_FILTER_RESULTS order by id desc limit NUM_RESULTS_PER_PAGE 
```

我目前的方法是缓存前几页，但通常使缓存结果无效的过程相当复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:03:29.723

您可以将偏移量传递给`LIMIT`，因此查询仅返回您正在查找的页面的内容。例如，考虑到每个页面有 20 条记录：

```
-- Page 1
SELECT * 
FROM some_table
LIMIT 0, 20

-- Page 2
SELECT * 
FROM some_table
LIMIT 20, 20

-- and so on... 
```

# php - foreach 选择查询如何缩短

> ID：10272507
> 
> 赞同：0
> 
> 时间：2012-04-22T22:02:16.133
> 
> 标签：php, mysql, function, search

您好，我有一个集成在搜索功能中的选择查询：我有以下代码：

```
foreach ($keywords as $key=>$keyword){
$where .= "`column_a` LIKE '%$keyword%'";
$where .= " OR ";
$where .= "`column_b` LIKE '%$keyword%'";
$where .= " OR ";   
$where .= "`column_c` LIKE '%$keyword%'";
$where .= " OR ";
$where .= "`column_d` LIKE '%$keyword%'";
$where .= " OR ";
$where .= "`column_e` LIKE '%$keyword%'";

    if ($key != ($total_keywords - 1)){ 
        $where .= " AND ";
    }
}

$results = "SELECT `column_a`, `column_b`, `column_c`, `column_d`, `column_e` FROM `table` WHERE $where"; 
```

好的，如果只搜索一个关键字，查询看起来像：

```
SELECT `column_a`, `column_b`, `column_c`, `column_d`, `column_e` FROM `table` WHERE `column_a` LIKE '%one%' OR `column_b` LIKE '%one%' OR `column_c` LIKE '%one%' OR `column_d` LIKE '%one%' OR `column_e` LIKE '%one%' 
```

什么很长。现在如果有两个搜索词，它看起来像：

```
SELECT `column_a`, `column_b`, `column_c`, column_d`, `column_e` FROM `table` WHERE `column_a` LIKE '%one%' OR `column_b` LIKE '%one%' OR `column_c` LIKE '%one%' OR `column_d` LIKE '%one%' OR `column_e` LIKE '%one%' AND `column_a` LIKE '%two%' OR `column_b` LIKE '%two%' OR `column_c` LIKE '%two%' OR `column_d` LIKE '%two%' OR `column_e` `LIKE` '%two%' 
```

什么太长了。所以我的问题是，还有其他方法可以获得相同的结果吗？我已经知道有 MATCH() AGAINST() 但这并没有起作用，原因不明。

因此，如果有人可以帮助我，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:24:56.813

看看[这个答案](https://stackoverflow.com/a/1127106/344347)。

它将缩短您的查询，最多 5 个条件就足够了。

不仅如此，您还可以将所有列合并为一个并在其中搜索：

```
SELECT `column_a`, `column_b`, `column_c`, column_d`, `column_e` FROM `table` 
WHERE CONCAT(column_a, column_b, column_c, column_d, column_e) REGEXP 'one|two' 
```

但是全文索引（如果有的话）可能在这个查询中不起作用。检查性能是否合适。

# javascript - 将 Dart 与 HTML 一起使用（我可以在 Javascript 中做的事情）

> ID：10272510
> 
> 赞同：1
> 
> 时间：2012-04-22T22:02:35.000
> 
> 标签：javascript, dart, dart-html

我在 JS 中做了什么：

```
<script type="text/javascript">

function displayThesis(){
    var thesisForm = document.getElementById("thesisForm").innerHTML;
document.getElementById("activeForm").innerHTML = thesisForm;
}

function displayNonThesis(){
var nonThesisForm = document.getElementById("nonThesisForm").innerHTML;
document.getElementById("activeForm").innerHTML = nonThesisForm;
}
</script> 
```

然后我会做一些事情，比如：

```
<form action="" method="get">
  <p>Do you need the thesis option form?</p>
  <label>Yes</label>
  <input name="thesisOption" type="radio" value="Yes" onclick="displayThesis()" />
  <label>No</label>
  <input name="thesisOption" type="radio" onclick="displayNonThesis()" />
 </form> 
```

调用这些函数。

我将如何使用列出并调用的外部飞镖程序执行此操作：

```
<script type="application/dart" src="attempt1.dart"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T22:18:58.797

在 Dart 中是禁止的。无论如何，内联事件侦听器是个坏主意。将 HTML 和脚本代码分开会更好。您可以从飞镖代码附加事件侦听器：

```
document.query('input[name="thesisOption"][value="Yes"]').on.click.add( (e) {
  document.query("#activeForm").innerHTML = document.query("#thesisForm").innerHTML;
}); 
```

当然，您应该向元素添加重要的类名和 id 以清楚地引用它们。

# c# - RadDateInput 格式不正确

> ID：10272512
> 
> 赞同：2
> 
> 时间：2012-04-22T22:03:02.983
> 
> 标签：c#, asp.net, datetime, telerik

我有一个 rad 输入，它只接受指定格式的日期，这工作正常，但是当我尝试在后端将其转换为日期时间（在 c# 代码中）时，它说它的格式不正确。

```
 <telerik:RadDateInput ID="DeliveryDate" runat="server" 
  MinDate="1/1/1980" MaxDate="12/31/2099" DateFormat="MM/dd/yyyy" Visible="false">

// Throws an error that its not in the correct format
DateTime Test = Convert.ToDateTime(DeliveryDate.Text); 
```

当我在 DateTime 行添加断点时，文本以这种格式传递（我不知道为什么我指定了 MM/dd/yyyy）。

```
2012-02-03 00:00:00 
```

任何帮助将非常感激。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:13:10.337

`DateTime test = DeliveryDate.SelectedDate`改为使用

# crash - CUDA - 运行时 nvidia 驱动程序崩溃

> ID：10272513
> 
> 赞同：3
> 
> 时间：2012-04-22T22:03:03.047
> 
> 标签：crash, cuda, driver

我在 CUDA 中运行了一个带有 N Bounces 的光线追踪器（每条光线会反弹 N 次）。

我使用 openGL 查看结果。

一旦 N 很小（1~4），一切都会很好。一旦我把 N 变大（~10），每个线程（大约 800x1000）必须做大量的计算，当屏幕变黑时，然后重新打开，注意我的 nvidia 崩溃了。

我在网上搜索并认为是什么导致它成为某种看门狗定时器，因为我的显示器和计算使用相同的图形卡（计算需要超过 2 秒，因此驱动程序会自行重置）。

是否有命令让主机（cpu）等待设备（gpu）只要它需要？

我需要做什么？我卡住了:(

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:01:31.910

根据您的描述，您在 Windows Vista 或 Windows 7 上运行。正如您所猜测的，Windows 操作系统有一个看门狗计时器。看门狗定时器仅适用于连接了显示器的 GPU。

最简单的解决方案是运行 2 个或更多 GPU，并在不连接显示器的 GPU 上运行 CUDA。

您可以禁用看门狗定时器。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/497685/how-doyou-get-around-the-maximum-cuda-run-time)。但是，您应该小心操作——请记住，当您的主显示 GPU 上有一个长时间运行的内核时，您的计算机将完全没有响应（至少您将无法看到它在做什么），直到内核完成。

# haskell - Haskell 可以忽略整数与整数吗？

> ID：10272519
> 
> 赞同：5
> 
> 时间：2012-04-22T22:04:08.870
> 
> 标签：haskell

我有一个同时使用`Int`和的程序`Integer`，因为其中一些函数返回的结果非常大。我厌倦了不得不在`fromIntegral`任何地方使用，我想知道是否有办法让 Haskell 忽略编译之间`Int`和`Integer`编译时的区别。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T00:45:02.383

解决方案：从程序中删除`Int`s 并使用所有`Integer`s。正如 geekosaur 所指出的，您可以使用 Data.List 中[的通用函数](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#g:26)（例如`genericLength`）。如果您向我们提供您的具体程序代码，那么我们可以提供更具体的建议。

# matlab - eval('expression') 在 MATLAB 代码中的使用和含义？

> ID：10272522
> 
> 赞同：1
> 
> 时间：2012-04-22T22:04:48.727
> 
> 标签：matlab, eval

我在 matlab 的其他人的代码中遇到了函数**eval(expression)**的使用：例如：

```
for n = 1 : 4
sn = int2str( n) ;
eval( [ 'saveas( fig'  sn  ', [ sName' sn ' ], ''fig'' ) ' ] );
end 
```

Matlab Help 中的 MathWorks 资料指出：

> 与其他 MATLAB 函数和语言结构相比，eval 函数的许多常见用途效率较低，并且更难阅读和调试。

在此之后，我发现这个函数在许多其他程序语言中都有使用，例如 Python、JavaScript、PHP。

所以我有几个问题：

1.  这个函数的使用会影响我的代码的性能吗？
2.  如果它会减慢执行速度，为什么会发生？
3.  如果每次调用都会减慢执行速度，原则上使用这个函数的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T22:13:07.740

该`eval`功能很**危险**，您真正需要它的示例很少。例如，如果将图形句柄存储在数组等中并编写`fig(1)`，则可以轻松重写您提供的代码`fig(2)`

```
for n = 1:4
  filename = sprintf('sName%d', n);
  saveas(fig(n), filename, 'fig');
end 
```

这更清晰，使用更少的字符，可以通过 Matlab 编辑器的 linter 进行分析，如果（何时）您需要扩展代码，则更容易修改，并且不太容易出现奇怪的错误。

根据经验，`eval`除非您真的知道自己在做什么（即您正在编写一个复杂的 Lisp 宏或其他等同于操作该语言的 AST 的东西 - 如果您不知道那是什么），否则您永远不应该使用任何语言意味着，您可能不需要使用`eval`)。

几乎总是有更清晰、更有效和更不危险的方法来实现相同的结果。通常，可以将调用`eval`替换为某种形式的[递归](http://en.wikipedia.org/wiki/Recursion#Recursion_in_computer_science)、[高阶函数](http://en.wikipedia.org/wiki/Higher_order_function)或循环。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-22T22:12:48.397

1.  在这里使用 eval 肯定会比非 eval 版本慢，但它很可能不会成为您代码中的瓶颈。但是，性能只是一个问题，维护（包括调试）以及可读性是其他问题。
2.  出现减速是因为 Matlab 使用 JIT 编译器，并且`eval`无法优化行。
3.  在大多数情况下，评估的使用是由于缺乏关于合适的 Matlab 功能的知识。在这种特殊情况下，问题在于图形句柄存储在`fig1`通过调用的变量名中`fig4`。如果它们被存储在一个名为`fig`, ie `fig(1)`etc 的数组中，那`eval`将是不必要的。

**编辑**这是 Loren Shure 撰写的两篇关于为什么`eval`在 Matlab 中应避免使用的优秀文章。[逃避 eval](http://blogs.mathworks.com/loren/2005/12/28/evading-eval/)和[更多关于 eval](http://blogs.mathworks.com/loren/2006/01/04/more-in-eval/)的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T06:52:39.677

这是另一个含义：

当你编译一个使用 的程序时`eval`，你必须放置 pragma 告诉编译器需要一些函数。例如：

此代码将编译并运行良好：

```
 foo() 
```

但这需要添加一个编译指示：

```
 %#function foo
 eval('foo()') 
```

否则会遇到运行时问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T22:12:30.203

在大多数情况下，速度变慢是因为必须将字符串解析为实际代码。如果谨慎使用，这不是什么大问题，但是如果您发现自己在循环代码（显式循环或 JavaScript 之类的东西`setInterval()`）中使用它，那么您的性能将大幅下降。

我见过的`eval`可以做得更好的常见用途是：

*   在不了解`[]`符号的情况下访问属性名称
*   基于参数名称调用函数，可以改为使用`switch`(更安全，防止代码注入风险)
*   当它们应该是数组时访问名为`var1`,`var2`的变量`var3`

老实说，我认为我从来没有遇到过一种情况，这`eval`是解决问题的唯一方法。我想你可以把它比作`goto`它是程序结构的替代品，或者作为一个临时解决方案来测试一个程序，然后再花时间让它以最佳方式工作。

# mysql - MySQL 删除表

> ID：10272526
> 
> 赞同：4
> 
> 时间：2012-04-22T22:04:59.910
> 
> 标签：mysql, foreign-keys, sql-drop

我想删除一张桌子`drop table EMPLOYEE;`

但我得到了错误：`#1217 - Cannot delete or update a parent row: a foreign key constraint fails`

我在互联网上环顾四周以显示隐藏的约束并发现：

```
CREATE TABLE `EMPLOYEE` (
`Ssn` int(9) NOT NULL,
`Dno` int(11) NOT NULL,
UNIQUE KEY`Ssn_8` (`Ssn`),
UNIQUE KEY`Dno_13` (`Dno`),
CONSTRAINT `EMPLOYEE_ibfk_1` FOREIGN KEY(`Dno`) REFERENCES `DEPARTMENT` (`Dnumber`),
CONSTRAINT `EMPLOYEE_ibfk_2` FOREIGN KEY(`Dno`) REFERENCES `DEPARTMENT` (`Dnumber`),
CONSTRAINT `EMPLOYEE_ibfk_3` FOREIGN KEY(`Dno`) REFERENCES `EMPLOYEE` (`Dno`),
CONSTRAINT `EMPLOYEE_ibfk_4` FOREIGN KEY(`Dno`) REFERENCES `EMPLOYEE` (`Dno`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1

   CREATE TABLE `DEPARTMENT` (
`Dnumber` int(11) NOT NULL,
`Mgr_ssn` int(9) NOT NULL,
UNIQUE KEY`Mgr_ssn` (`Mgr_ssn`),
UNIQUE KEY`Dnumber` (`Dnumber`),
CONSTRAINT `DEPARTMENT_ibfk_1` FOREIGN KEY(`Mgr_ssn`) REFERENCES `EMPLOYEE` (`Ssn`),
CONSTRAINT `DEPARTMENT_ibfk_2` FOREIGN KEY(`Mgr_ssn`) REFERENCES `EMPLOYEE` (`Ssn`),
CONSTRAINT `DEPARTMENT_ibfk_3` FOREIGN KEY(`Mgr_ssn`) REFERENCES `DEPARTMENT` (`Mgr_ssn`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

找到这个后，我尝试首先删除约束： `alter table EMPLOYEE drop contraint 'EMPLOYEE_ibfk_1';`

但我不断得到： `#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''EMPLOYEE_ibfk_1'' at line 1`

我已经在删除这张表上工作了几个小时，并在互联网上搜索了许多主题。人们最终放弃了数据库，但我无权删除数据库或创建数据库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T22:58:28.983

首先从to中删除`FOREIGN KEY`约束（注意奇怪的语法，你应该使用但是带有约束（！）标识符）：`DEPARTMENT``EMPLOYEE``DROP FOREIGN KEY`

```
ALTER TABLE DEPARTMENT
  DROP  FOREIGN KEY  DEPARTMENT_ibfk_1 ,
  DROP  FOREIGN KEY  DEPARTMENT_ibfk_2 ; 
```

然后删除`EMPLOYEE`表：

```
DROP TABLE EMPLOYEE ; 
```

* * *

您的代码的问题在于您使用了`DROP CONSTRAINT`- 这是正确的，AFAIK 它是`ALTER TABLE`.

然而，MySQL “更喜欢” `DROP FOREIGN KEY`. 换句话说，在这种情况下它不符合标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:12:48.570

外键名称需要用反引号引起来：

```
alter table EMPLOYEE drop constraint `EMPLOYEE_ibfk_1`;
                                     ^               ^ 
```

使用`'`单引号将其变成一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:08:19.547

您需要删除表 Employee 中的外键以及 Department 表中的外键，然后尝试删除它。

**注意**：需要删除部门表中首先引用的表的外键。

还要首先删除 Department 表中对 Employee 的任何引用。

# sql-server - Microsoft Access 或 SQL Server 中的重复查询

> ID：10272527
> 
> 赞同：0
> 
> 时间：2012-04-22T22:05:42.320
> 
> 标签：sql-server, ms-access, duplicates

我在 Access 数据库中有超过 1,000 个具有重复值的条目。我想创建一个名为 Duplicate 的列，并将其设置为`true`如果记录**不是**具有特定值的第一个记录。这意味着，如果记录是第一个值为“Red Chair”的记录，则 Duplicate 字段设置为`false`，但所有后续记录值为“Red Chair”的记录将 Duplicate 字段设置为`true`。

如何在 Access 中执行此查询？

*该数据库将升级为 SQL Server 数据库*，因此我的一个选择是在我的 SQL 查询中检索记录时“忽略”重复记录。如果此选项可行，我想知道如何在 SQL 中执行此操作作为替代方案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:42:29.230

您将不得不使用子查询。尝试这个

```
UPDATE Tabelle1 SET Tabelle1.b = 'Duplicate'
WHERE 
((Tabelle1.[ID] In 
 (SELECT Tabelle1.[ID] FROM Tabelle1 WHERE 
  ((Tabelle1.[a] In 
     (SELECT [a] FROM [Tabelle1] As Tmp GROUP BY [a] HAVING Count(*)>1 )
   )
  AND 
  (Tabelle1.[ID] Not In 
    (SELECT min([id]) FROM [Tabelle1] as grpid GROUP BY [a] HAVING Count(*)>1)
  ));
))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:33:59.300

我不是 Access 方言的专家，但是这种对 RJIGO 答案或类似内容的改编也可能有效并且更有效：

```
UPDATE Tabelle1 SET
  b = 'Duplicate'
WHERE 
  Tabelle1.[ID] > (
    SELECT min([id])
    FROM [Tabelle1] as T2
    WHERE T2.[a] = Tabelle1.[a]
  ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:01:24.610

我希望这个sql可以帮助你：

SELECT table.field, Count(table.field) AS test, IIf([test]>1,"TRUE","FALSE") AS check FROM table GROUP BY table.field, IIf([test]>1,"TRUE “，“错误的”）;

# jquery - jQuery .load() fadeIn，fadeOut 在我的远程服务器中不起作用

> ID：10272530
> 
> 赞同：0
> 
> 时间：2012-04-22T22:05:56.583
> 
> 标签：jquery, local, fadein, fadeout

这听起来可能很愚蠢，但我有一个无法解决的问题，而且我已经绞尽脑汁好几天了。

有代码，它只适用于本地主机，但当我上传到远程服务器时不起作用。这是我实现它的页面 www.jvalladolid.com

我该如何解决...我将感谢您的帮助:)

```
$(document).ready(function () {

$('#navigation li a').click(function () {

    var toLoad = $(this).attr('href') + ' #MainContent';
    $('#MainContent').fadeOut('2000', loadContent);

    function loadContent() {
        $('#MainContent').load(toLoad, '', showNewContent())
    }
    function showNewContent() {
        $('#MainContent').fadeIn('2000');
    }

    return false;

}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:08:30.847

在我的浏览器（ff osx）中运行良好。

# apache - 配置虚拟主机和 localhost 重定向到 xampp 文件夹

> ID：10272531
> 
> 赞同：26
> 
> 时间：2012-04-22T22:05:59.443
> 
> 标签：apache, xampp, localhost, virtualhost

我在创建虚拟主机时遇到问题。我正在使用 Windows 7 x64 专业版。在文件中`C:\Windows\System32\drivers\etc\hosts`我只有这几行：

```
127.0.0.1   myhost
127.0.0.1   www.myhost 
```

在文件中`C:\xampp\apache\conf\extra\httpd-vhosts.conf`我有这个：

```
NameVirtualHost *:80
<VirtualHost *:80> 
    DocumentRoot "C:/xampp/htdocs/"
    ServerName localhost
    ServerAlias www.localhost
</VirtualHost>

<VirtualHost *:80> 
    DocumentRoot "C:/Users/Me/Dropbox/Project/public"
    ServerName myhost
    ServerAlias www.myhost
    <Directory "C:/Users/Me/Dropbox/Project/public">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order allow,deny
        Allow from all
   </Directory>
</VirtualHost> 
```

当然，在这些文件中添加这些行之后，我已经重新启动了我的 Apache 服务器。不幸的是，在我的浏览器中键入`myhost`或`www.myhost`将我重定向到`myhost/xampp`.

我已经搜索过，我在 google 和 stackoverflow 上找到了如何使用 xampp 配置虚拟主机的描述，但我怎么能认识到我做的一切都很好。我知道我的问题并不新鲜，但我没有找到适合我的解决方案。

我也认识到`localhost`在我的浏览器中输入也会重定向我`localhost/xampp`。我不知道这些问题是否与我的情况有关。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-06T23:13:21.070

我有同样的问题。您的第一个请求是重定向到 htdocs 根目录。如果您查看 htdocs 目录中的 index.php，您会看到非常简短的代码，它接收传入请求并将其重定向到 xampp 目录。

我通过摆弄 httpd-vhosts.conf 文件来修复它。在您的情况下，请尝试进行以下编辑：

```
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1> 
    DocumentRoot "C:\xampp\htdocs\
    ServerName localhost
</VirtualHost>

<VirtualHost www.myhost> 
    DocumentRoot "C:\Users\Me\Dropbox\Project\public"
    ServerName www.myhost
    ServerAlias www.myhost
    <Directory "C:\Users\Me\Dropbox\Project\public">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order allow,deny
        Allow from all
   </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-24T23:39:55.973

我有一个类似的问题，发现我必须转到我的 Apache24 主 httpd.conf 文件并取消注释我以前从未使用过的第 501 行“包括 conf/extra/httpd-vhost.conf”，它仍然是#'ed出去。希望这对在这里找不到其他答案的人有所帮助。我的 Apache24 现在可以看到我的虚拟主机文件了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T01:33:55.543

您需要启用基于名称的虚拟主机。

在 C:\xampp\apache\conf\extra\httpd-vhosts 中的文件顶部附近

取消注释**#NameVirtualHost *:80**

即来自：

```
#
# Use name-based virtual hosting.
#
#NameVirtualHost *:80 
```

到：

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80 
```

（注意最后一行现在没有注释）。

对我来说就像一个魅力。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-25T20:05:52.593

试试这个

[文件：C:\xampp\apache\conf\extra\httpd-vhosts.conf]

```
<VirtualHost basic.test:80>
    DocumentRoot "C:/xampp/htdocs/basic/public/"
    ServerName basic.test
</VirtualHost> 
```

* * *

[文件：C:\Windows\System32\drivers\etc\hosts]（以管理员身份打开）

```
127.0.0.1  basic.test
127.0.0.1  localhost 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-24T07:17:50.530

对我来说，将这个替换`<VirtualHost *:80>`为这个`<VirtualHost 127.0.0.1:80>`工作正常。

# ruby - 如何将 Datamapper 与 Heroku Scheduler 结合使用？

> ID：10272533
> 
> 赞同：2
> 
> 时间：2012-04-22T22:06:40.240
> 
> 标签：ruby, heroku, sinatra, datamapper

我有一个 Postgres 数据库，我在我的 ruby​​ Web 服务器上使用 Datamapper 进行操作。我正在尝试将 Heroku Scheduler 合并为每 10 分钟更新一次数据库的一部分。但是，当它尝试执行脚本时，它会不断给出此错误：

```
/app/vendor/bundle/ruby/1.9.1/gems/dm-core-1.2.0/lib/dm-core/repository.rb:72:in `adapter': Adapter not set: default. Did you forget to setup? (DataMapper::RepositoryNotSetupError) 
```

数据库在服务器启动时被初始化，那么为什么这个脚本不能像我通常在其余代码中所做的那样更新数据库。

例如，调度程序调用的脚本将包含以下行：

```
User.update(:user_x => "whatever") 
```

是否有我绝对需要的特定需求声明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:11:42.523

首先，您需要将计划进程指向您的数据库，因此包括 Datamapper.setup，但不要迁移或初始化。

然后你需要读取数据库。您可能希望 datamapper 创建对象模型，就像您的应用程序使用的一样。为此，我一直在使用[dm-is-reflective](https://github.com/godfat/dm-is-reflective)。

```
require 'data_mapper'
require 'dm-is-reflective'
dm = DataMapper.setup(:default, ENV['DATABASE_URL'])

class User
  include DataMapper::Resource
  is :reflective
  reflect
end

p User.fields 
```

# iphone - 从 Iphone（或消费类相机）获取深度图像

> ID：10272535
> 
> 赞同：3
> 
> 时间：2012-04-22T22:07:03.890
> 
> 标签：iphone, image-processing, artificial-intelligence, computer-vision, detection

我已经读过可以从立体相机设置中创建深度图像（其中两个具有相同焦距/光圈/其他相机设置的相机从一个角度拍摄物体的照片）。

是否可以几乎立即拍摄两张快照（例如在 iPhone 上）并使用两张图片之间的差异来开发深度图像？

少量的手部移动和晃动显然会晃动相机，从而产生一些角位移，并且也许可以通过查看两张照片中检测到的特征的一般位移角度来计算该位移。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:47:34.417

看待这个问题的另一种方法是**从运动结构**，一个很好的评论可以在[这里](http://mi.eng.cam.ac.uk/~cipolla/publications/contributionToEditedBook/2008-SFM-chapters.pdf)找到。

一般来说，解决*空间对应*问题也可以作为*时间对应*问题。如果场景没有改变，那么从不同的视点同时拍摄两张图像 - 就像在立体中一样 - 实际上与使用同一个相机拍摄两张图像但随着时间的推移在视点之间移动相同。

我最近在实践中遇到了一个很好的玩具示例 -[使用 OpenCV 实现](http://www.morethantechnical.com/2012/02/07/structure-from-motion-and-3d-reconstruction-on-the-easy-in-opencv-2-3-w-code/)。本文包含一些指向其他更强大的实现的链接。

为了更深入地了解，我建议您获取 Hartley 和 Zisserman 的*“计算机视觉中的多视图几何”*一书的实际副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T23:25:06.177

您可能会从“cha-cha”立体图像（在 3D 摄影圈中广为人知）得出一个非常粗略的深度图，但充其量只是非常粗略。

匹配图像非常耗费 CPU。

iPhone 不是处理数字的好设备。它的CPU不是那么快，内存带宽也不是很好。

一旦 Apple 允许我们在 iOS 上使用 OpenCL，您就可以编写 OpenCL 代码，这会有所帮助。

# sql - 如何返回加入黑名单表的数据？

> ID：10272539
> 
> 赞同：1
> 
> 时间：2012-04-22T22:07:39.050
> 
> 标签：sql, sql-server, sql-server-2008

请查看此声明：

```
 SELECT TableID FROM Table t1
   INNER JOIN BlackList b ON b.TableID <> t1.TableID 
```

我在想这个语句返回`Table`了`Blacklist`表中没有的所有内容，但它根本没有返回任何内容（0 行）。如果我试图返回表`Table`中未找到的所有内容`Blacklist`，那么最好的方法是什么？我假设你可以这样做：

```
 SELECT TableID FROM (
    SELECT TableID, CASE WHEN b.TableID IS NULL THEN 1 ELSE 0 END OnBlackList 
    FROM Table t1
      LEFT JOIN Blacklist b ON b.TableID = t1.TableID
    ) tb1
  WHERE tb1.OnBlackList = 0 
```

但我一直在寻找一种更短、更有效的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:13:02.743

```
SELECT TableID FROM dbo.Table
EXCEPT
SELECT TableID FROM dbo.Blacklist; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:12:47.980

一种基本方法是使用`NOT EXISTS`：

```
SELECT TableID FROM Table t1
where NOT EXISTS (select * from BlackList b where b.TableID = t1.TableID); 
```

这将选择表`t1`中不存在的行`BlackList`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:17:14.987

```
SELECT TableT1.TableId FROM TableT1  
LEFT OUTER JOIN BlackList ON  
TableT1.TableID = BlackList.TableID  
where BlackList.TableId IS NULL 
```

我写了上面的，但现在我还在StackOverflow中找到了一个以前的问题/答案： [如何在一个表中找到另一个表中没有对应行的行](https://stackoverflow.com/questions/1415438/how-to-find-rows-in-one-table-that-have-no-corresponding-row-in-another-table)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:19:13.167

还：

```
SELECT TableId FROM Table
WHERE TableId NOT IN (SELECT TableID FROM BlackList) 
```

无论您在主选择语句中添加什么列，这都将起作用。

# c# - 获取当前目录 C# 错误

> ID：10272540
> 
> 赞同：-2
> 
> 时间：2012-04-22T22:07:40.757
> 
> 标签：c#, directory

我编写了一个 C# 程序，它可以复制自身并在精确的源目录中移动。它第一次移动时工作正常，但第二次当前目录的值是错误的。要确定我使用的文件路径：

```
string current = Directory.GetCurrentDirectory(); 
```

程序第二次要移动时，我`GetCurrentDirectory`再次调用，但“当前”的值仍然是旧路径，它给了我`FileNotFound`错误。

我该怎么做才能`GetCurrentDirectory()`阅读新路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:13:17.120

您需要在新进程中执行您的应用程序。您可能正在使用原始进程，并且其当前目录不会更改为您将应用程序复制到的任何位置。

我不知道你想用你的应用程序实现什么，但绝对将每个副本作为一个新进程执行，并允许当前进程自行终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:19:40.873

跟踪您移动它的位置。

GetCurrentDirectory() 是执行程序的工作目录。当您简单地移动可执行文件时，这不会改变（如果您从新位置再次执行它会改变）。因此，要么创建一个新进程并在其新位置执行 exe，要么只跟踪您将其移动到的位置。后者要容易得多。

需要注意的是，复制 exe 文件对程序的运行实例没有任何影响，因为它仍在“旧”位置运行（此时它可能实际加载到内存中）。对于正在运行的程序，exe文件副本只是一个文件。你为什么做这个 ？

如果你想执行新的 exe 并退出旧的然后使用[这个](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)api 并调用

```
Process.start("new/path/to/exe");
Environment.exit(0); 
```

如果你只是在 main 中，你可以简单地返回而不是调用 exit。这应该可行，它可能会导致两个程序都退出（如果这会杀死子进程），但我认为不会。

# xml - 如何在 xsl 中使用变量？

> ID：10272541
> 
> 赞同：1
> 
> 时间：2012-04-22T22:07:40.833
> 
> 标签：xml, xslt

我创建了一个如下所示的 XSL：

```
<xsl:choose>
   <xsl:when test="range_from &lt; 0 and range_to > 5">
      <xsl:variable name="markup_03" select="((7 div $total_price_02) * 100)"/>
    </xsl:when>
    <xsl:when test="range_from &lt; 6 and range_to > 10">
      <xsl:variable name="markup_03" select="((5 div $total_price_02) * 100)"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:variable name="markup_03" select="0"/>
    </xsl:otherwise>
</xsl:choose>
<xsl:variable name="total_price_03" select="(($total_price_02 * $markup_03) div 100) + $total_price_02"/> 
```

我收到以下错误：

> 无法解析对变量或参数“markup_03”的引用。变量或参数可能未定义，或者不在范围内

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:56:59.443

您正在声明条件的`markup_03`内部`<xsl:choose>`，因此当您尝试在`<xsl:choose>`.

相反，声明您的`<xsl:variable name="markup_03">`并嵌套在`<xsl:choose>`变量内部以确定分配给它的值：

```
 <xsl:variable name="markup_03">
       <xsl:choose>
           <xsl:when test="range_from &lt; 0 and range_to > 5">
               <xsl:value-of select="((7 div $total_price_02) * 100)"/>
           </xsl:when>
           <xsl:when test="range_from &lt; 6 and range_to > 10">
               <xsl:value-of select="((5 div $total_price_02) * 100)"/>
           </xsl:when>
           <xsl:otherwise>
               <xsl:value-of select="0"/>
           </xsl:otherwise>
       </xsl:choose>
    </xsl:variable>
    <xsl:variable name="total_price_03" select="(($total_price_02 * $markup_03) div 100) + $total_price_02"/> 
```

# android - 安卓云存储

> ID：10272545
> 
> 赞同：0
> 
> 时间：2012-04-22T22:08:22.843
> 
> 标签：android, backup, cloud

我知道这是一个**非常**广泛的话题，但是任何人都可以给我任何关于如何将云存储集成到我的应用程序中的起始链接/文档吗？作为一个例子（这不是实际的应用程序，因为有几十个这样的应用程序），我希望用户写一个便条并将其自动保存到链接到他们特定帐户的某个云中。现在，我知道我可以使用 DropBox 来实现这一点，但这需要用户拥有一个 DropBox 帐户，我希望它能够独立于任何第三方服务工作。

我知道这有很多问题要问，但是有没有任何人可以想到的初学者资源让我开始思考这个问题？

谢谢！

编辑：对于所有投反对票的人，我知道这是一个广泛的话题。我只是想把这个问题抛给开发者社区，看看是否有人们使用过的最喜欢的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:15:17.177

一个很好的起点是 Android 2.2 中引入的 Android Cloud to Device Messaging (C2DM)。你应该玩一下它。它将让您初步了解云服务的全部内容以及它在服务器端和客户端的含义。在血站，[在这里](http://android-developers.blogspot.de/2010/05/android-cloud-to-device-messaging.html)。

# java - Eclipse - 打开一个新的浏览器选项卡？

> ID：10272546
> 
> 赞同：2
> 
> 时间：2012-04-22T22:08:24.773
> 
> 标签：java, eclipse

如何在 Eclipse 中打开新的浏览器选项卡/窗口？如果我部署到服务器，我就会启动。但如果我不这样做呢？我怎样才能启动一个？

tyvm

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T22:24:08.030

如果要打开内部浏览器：

```
Menu -> Window -> Show View -> Other -> General -> Internal Web Browser 
```

# scala - 多个 trait mixin 和 Actor 的问题

> ID：10272550
> 
> 赞同：2
> 
> 时间：2012-04-22T22:09:09.897
> 
> 标签：scala, inheritance, actor, mixins, traits

```
trait A extends Actor {
  private val s = Set[Int]()

  override def act() {
    loop {
      react {
        // case code that modifies s
      }
    }
  }
}

trait B extends Actor {
  private val t = Set[String]()

  override def act() {
    loop {
      react {
        // case code that modifies t
      }
    }
  }
}

val c = new C with A with B //...? 
```

我真正想要的是某种自动组合`B.act() and C.act()`，但使用 trait mix-ins，只会`B.act()`被调用。有没有简单的方法来实现这一点？

编辑：这是我找到的[半解决方案。](http://www.kotancode.com/2011/07/19/traits-multiple-inheritance-and-actors-in-scala/)我说“一半”是因为原始特征不再扩展`Actor`，并且`C with A with B`需要定义为一个类而不是动态混合。也许我应该称之为“四分之一解决方案”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:52:32.330

也许您可以创建一个将消息转发到其他 Actor 列表的特征，这样您就不必修改`A`or `B`：

```
trait C extends Actor {
  private val acts: Seq[Actor] = Seq(new A{}, new B{})

  override def act() {
    acts foreach (_.start)
    loop {
      react { case x => acts foreach { _ ! x } }
    }
  }
} 
```

当您实例化它时，您当然可以保留`acts`抽象或用不同的集合覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:59:08.420

扩展 Actor 类：

```
import actors.Actor

class MixableActor extends Actor {
  protected var acts = List[PartialFunction[Any, Unit]]()

  final override def act() {
    loop {
      react {
        acts.reduce((a, b) => a orElse b)
      }
    }
  }

  final def receive(act: PartialFunction[Any, Unit]) {
    acts = act :: acts
  }
} 
```

示例代码：

```
abstract class Node extends MixableActor {
  ...
}

trait User extends MixableActor {
  val files = scala.collection.mutable.Set[Data]()
}

trait Provider extends User {
  receive({
    case ("provide", file: Data) =>
      provide(file)
  }: PartialFunction[Any, Unit])
}

trait Consumer extends User {
  receive({
    case ("consume", file: Data) =>
      consume(file)
  }: PartialFunction[Any, Unit])
} 
```

样品用法：

```
val provider = new Node with Provider
val consumer = new Node with Consumer
val provider_and_consumer = new Node with Provider with Consumer 
```

# google-chrome - 垂直对齐：基线在 Chrome 中不起作用

> ID：10272553
> 
> 赞同：3
> 
> 时间：2012-04-22T22:09:35.810
> 
> 标签：google-chrome, alignment, baseline

老实说，我有这个非常愚蠢的问题。反正到这里。我一直在尝试使用垂直对齐：基线；这本身就起作用。问题是它适用于 IE 和 Firefox。我的问题是，由于某种奇怪的原因，它在 Chrome 中不起作用。chrome [http://img576.imageshack.us/img576/8976/chromem.png中的问题截图](http://img576.imageshack.us/img576/8976/chromem.png)

这就是它应该看起来的样子（有一个 14px 的填充，否则它会在最顶部） [http://img62.imageshack.us/img62/140/firefoxi.png](http://img62.imageshack.us/img62/140/firefoxi.png) 它在 IE 中看起来与在 firefox 中相同.

我没有使用表格来处理我的图像和文本（只是指出）我希望有人可以帮助我，因为这已经让我头痛 2 天了：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T23:17:27.097

如果您将背景 div 设置为`display: table`并将其每个子项设置为`display: table-cell`，它应该可以工作。

```
#outer_div
{
    display: table; /* display: inline-table; works as well */
}

#outer_div div
{
    display: table-cell;
    vertical-align: baseline;
} 
```

# android - 当使用绝对定位元素构建页面时，WebKit 似乎错误地计算了窗口/正文大小，如何解决？

> ID：10272555
> 
> 赞同：2
> 
> 时间：2012-04-22T22:09:38.837
> 
> 标签：android, html, css, browser, webkit

**概括：**

我一直在为客户开发一个移动 Web 应用程序，一切都很顺利，直到 Android 更新似乎毁了一切。网页现在呈现为好像窗口/主体（DOM 元素）高度远小于实际屏幕高度。这种理论的原因是页面是围绕绝对定位的元素构建的，因此元素`bottom: 0`应该定位在页面的底部（除非父级当然是相对的，但事实并非如此）。

该问题似乎仅在设备使用特定版本的 WebKit 时出现（到目前为止，该问题仅在 Android 设备上发现）。更具体地说，在版本 534.13 到 534.30 之间（请参阅下面的调试部分）

**关于布局：**

该站点使用绝对定位元素将页眉和页脚内容附加到屏幕的顶部和底部。jQuery(window).load() 事件用于计算`bottom`和`top`数字，以便相对于每个元素正确定位元素。

> 我知道该网站并不完美，无需提及（我是移动优化网站的新手，并没有质疑他们的想法）。

查看当前的实现：http: [//v-tone.com/](http://v-tone.com/)（注意：此问题不是为了网站访问或任何个人利益。页面也可以随时更改）

**问题：**

*可以通过向您展示一个工作*和*不工作*的例子来最好地说明这个问题：

工作：[http ://www.kjetil-hartveit.com/_misc/vtone/working.jpg](http://www.kjetil-hartveit.com/_misc/vtone/working.jpg)

不工作：[http ://www.kjetil-hartveit.com/_misc/vtone/notworking.jpg](http://www.kjetil-hartveit.com/_misc/vtone/notworking.jpg)

如您所见，该实现在 Android 2.2 中有效，但在新的 4.0.3 中无效。

**调试：**

我一直在使用 jsconsole.com（远程调试）和控制台日志记录以及诸如此类的东西进行调试，但没有发现工作和错误渲染站点之间的尺寸和计算有任何显着差异。

我还使用 webkit 和其他渲染引擎测试了几种不同的实现，以试图解决问题。**结果表明 WebKit 版本534.13**和**534.30**之间可能存在一些错误。

您可以在此处查看所有测试数据：[http](http://www.kjetil-hartveit.com/_misc/vtone/Render%20comparison.xlsx) ://www.kjetil-hartveit.com/_misc/vtone/Render%20comparison.xlsx （再次注意，此链接可能随时停止存在）

**解决方案？**

我的客户真的希望网站尽快启动，我也是。我们不确定等待可能的 Android 更新是否值得。

*   有谁知道快速解决这个问题？
*   谁能确认这是 WebKit 问题？
*   其他建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:42:40.907

我在带有 Android 操作系统的三星 Galaxy S3 上使用 WebKit 534.30 时遇到了同样的问题。

我使用 CSS3 制作了一个手风琴菜单。

```
<div class="wrapper">
 <ul class="accordion">
  <li>
   <button>Button Caption</button>
   <div>
    <p>Some Information</p>
   </div>
  </li>
 </ul>
 <footer>Some information in footer</footer>
</div> 
```

点击按钮后，li 元素使用纯 JavaScript 更改其高度（= 按钮高度 + div 高度）。问题是打开的 li 元素与页脚元素内容重叠。

我提出的解决方案是将 translate3d 和 scale(1) 添加到每个交互元素中：

```
.wrapper {
 -webkit-transform: translate3d(0, 0, 0);
 -webkit-transform: scale(1);
}
.accordion > li {
 -webkit-transform: translate3d(0, 0, 0);
 -webkit-transform: scale(1);
}
.accordion > li > button {
 -webkit-transform: translate3d(0, 0, 0);
 -webkit-transform: scale(1);
} 
```

然后，即使在 webkit 534.30 中，手风琴菜单也开始正常工作。

# c++ - 如何将此文件读入变量？

> ID：10272556
> 
> 赞同：-1
> 
> 时间：2012-04-22T22:09:44.153
> 
> 标签：c++

这是我需要阅读的文件。

```
Coca-Cola,0.75,20
Root Beer,0.75,20
Sprite,0.75,20
Spring Water,0.80,20
Apple Juice,0.95,20 
```

我需要将其中的每一个都放入一个变量中。例如drinkName、drinkCost、drinkQuantity。我正在使用c ++，请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T22:57:03.163

我建议将这三个变量捆绑到一个数据类型中。让我们称之为“DrinkT”。

```
struct DrinkT{
    std::string name;
    float cost;
    unsigned int quantity;

    DrinkT(std::string const& nameIn, float const& costIn, unsigned int const& quantityIn):
    name(nameIn),
    cost(costIn),
    quantity(quantityIn)
    {}
}; 
```

这有很多优点。
您现在可以像这样制作饮品：

```
DrinkT coke("Coca-Cola",0.75,20); 
```

并像这样访问变量：

```
std::cout << coke.name << std::endl;     //outputs: Coca-Cola
std::cout << coke.cost << std::endl;     //outputs: 0.75
std::cout << coke.quantity << std::endl; //outputs: 20 
```

饮料对象将只包含您指定的内容：饮料名称、饮料成本和饮料数量。
该对象有一个构造函数，它在构造时采用所有这三个值。
这意味着，您只能在同时指定所有值的情况下创建一个饮料对象。

如果您要存放很多饮料物品（您可能不知道有多少），我们可能还想将它们放入某种容器中。
向量是一个不错的选择。一个向量将增长到可以存储尽可能多的饮料。

让我们遍历文件，分别读取三个值，并将它们存储在我们的向量中。我们将为每种饮料一次又一次地这样做，直到我们到达文件的末尾。

```
int main(){

    std::ifstream infile("file.txt");
    std::vector<DrinkT> drinks;

    std::string name;
    std::string cost;
    std::string quantity;

    std::getline(infile,name,',');
    std::getline(infile,cost,',');
    std::getline(infile,quantity,' ');

    while (infile){
        drinks.push_back(DrinkT(name,atof(cost.c_str()),atoi(quantity.c_str())));

        std::getline(infile,name,',');
        std::getline(infile,cost,',');
        std::getline(infile,quantity,' ');
    }

    //output
    for(DrinkT drink : drinks){
        std::cout << drink.name << " " << drink.cost << " " << drink.quantity << std::endl;
    }

    return EXIT_SUCCESS;
} 
```

> 用 g++ -std=c++0x -o main main.cpp 编译

有关使用的一些语言功能的信息：
[http ://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)
[http://www.cplusplus.com/reference/stl/vector/](http://www.cplusplus.com/reference/stl/vector/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T23:36:37.887

在某些（但绝对不是全部）方面，我的建议与@Xploit 的建议大致相似。我将首先定义一个结构（或类，如果您愿意）来保存数据：

```
struct soft_drink { 
    std::string name;
    double price;
    int quantity;
}; 
```

然后（一个主要区别）我会`operator>>`为那个类/结构定义：

```
std::istream &operator>>(std::istream &is, soft_drink &s) { 
    // this will read *one* "record" from the file:

    // first read the raw data:
    std::string raw_data;
    std::getline(raw_data, is);
    if (!is)
        return is; // if we failed to read raw data, just return.        

    // then split it into fields:
    std::istringstream buffer(raw_data);

    std::string name;
    std::getline(buffer, name, ',');

    double price = 0.0;
    buffer >> price;
    buffer.ignore(1, ',');

    int quantity = 0;
    buffer >> quantity;

    // Check whether conversion succeeded. We'll assume a price or quantity 
    // of 0 is invalid:
    if (price == 0.0 || quantity = 0)
        is.setstate(std::ios::failbit);

    // Since we got valid data, put it into the destination:
    s.name = name;
    s.price = price;
    s.quantity = quantity;
    return is;
} 
```

这让我们可以从输入流中读取一条记录*并*知道转换是否成功。一旦我们有了读取一条记录的代码，剩下的就变得微不足道了——我们可以使用一对正确类型的 istream_iterator 来初始化一个数据向量：

```
// read the data in one big gulp (sorry, couldn't resist).
//
std::vector<soft_drink> drink_data((std::istream_iterator<soft_drink>(infile)), 
                                    std::istream_iterator<soft_drink>()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:32:23.867

首先研究如何将一个项目与其他项目分开：

[如何在 C++ 中拆分字符串？](https://stackoverflow.com/questions/236129/how-do-i-iterate-over-the-words-of-a-string)（通过空格）

之后，您将获得一个新字符串，其格式为：`drinkName,drinkCost,drinkQuantity`

如果您考虑一下，将项目的每个信息分开的是符号`,`（逗号），所以您需要查看[这篇文章](https://stackoverflow.com/questions/5607589/right-way-to-split-an-stdstring-into-a-vectorstring/5607650#5607650)，因为它也显示了如何用逗号分割。

为了帮助存储此信息，您可以创建一个具有 3 个变量的新数据类型（类）：

```
class Drink
{
public:
    std::string name;
    std::string value;     // or float
    std::string quantity;  // or int
}; 
```

最后，您可以对`std::vector<Drink>`里面的所有信息感到满意。

# java - 用 getResourceAsStream 替换 FileInputStream

> ID：10272557
> 
> 赞同：2
> 
> 时间：2012-04-22T22:09:52.737
> 
> 标签：java

我目前正在使用以下代码读取公钥文件：

```
 // Read Public Key.
    File filePublicKey = new File(path + "/public.key");
    FileInputStream fis = new FileInputStream(path + "/public.key");
    byte[] encodedPublicKey = new byte[(int) filePublicKey.length()];
    fis.read(encodedPublicKey);
    fis.close(); 
```

但是，我希望将密钥文件包含在我的 jar 中。我已在 Eclipse 中将密钥文件拖到我的项目中，我正在尝试使用以下内容加载公钥以替换上面的内容：

```
 InputStream is = getClass().getResourceAsStream( "/RSAAlgorithm2/public.key" );
    byte[] encodedPublicKey = new byte[(int) 2375];
    is.read(encodedPublicKey);
    is.close(); 
```

但是我不断收到 NullPointerException。

> java.lang.NullPointerException at RSA.LoadKeyPair(RSA.java:122) at RSA.main(RSA.java:31)

这是因为我错误地加载了文件吗？文件可以像这样拖到eclipse中并加载，还是需要将它们与JAR分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:18:45.897

检查是否`is`是`null`在做之后`getResourceAsStream`。如果是，则资源尚未找到。在这种情况下，检查文件的路径，它是相对于您的类路径的。我不知道你的项目设置，但我会尝试简单地使用`"/public.key"`......</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:23:37.283

使用此名称，您必须将“public.key”文件放入 RSAAlgorithm2 包中。这意味着在您的“jar”文件中，您应该看到一个名为“RSAAlgorithm2/public.key”的条目。

# plugins - 如何最好地使用插件构建和构建 Clojure 应用程序？

> ID：10272559
> 
> 赞同：13
> 
> 时间：2012-04-22T22:10:25.840
> 
> 标签：plugins, clojure, gradle, leiningen

我认为（见下文）我想将 Clojure 项目构建为具有有序依赖关系的多个模块 - 就像 Maven 让我使用[多模块项目](http://docs.codehaus.org/display/MAVENUSER/Multi-modules+projects)一样。

但是我看不到如何使用 Leiningen 执行此操作 - 我只能看到[常见问题解答](https://github.com/technomancy/leiningen)`checkouts`中描述的修复程序，它似乎没有那么强大。

莱茵会这样做吗？我应该改用 Gradle 吗？还是不需要这种东西？

更多上下文：我想知道如何构建一个支持插件的模块化应用程序（我想这意味着将 jars 转储到类路径中）。并且想知道我可以在多大程度上将其构建为核心 + 插件（我想我应该能够使用 Clojure 的[动态代码加载](https://stackoverflow.com/questions/1810231/defining-a-spi-in-clojure)来做一些事情，而不必使用 Java/OSGi）。*所以我想单个*项目的驱动动机来自想要某种方式将所有东西（核心+默认插件）打包成一个对最终用户来说很容易的单一 blob，但也可以分割（并且它是构建和分片测试，测试各个模块的逻辑独立性）。欢迎对此提供更多一般性建议

**更新**

下面没有提到的一个可能的解决方案是使用[Maven 插件](https://github.com/talios/clojure-maven-plugin)——我假设它支持 Maven 所做的一切，但编译 Clojure，因此可以使用嵌套模块等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T04:38:01.130

首先，Leiningen 似乎不像 Maven 那样支持模块层次结构。结帐是它拥有的下一个最接近的东西。不过，在 Clojure 中开发模块化应用程序就足够了。

对于项目结构，我将有一个 API 项目、一个“核心”项目、插件本身和一个单独的打包项目。核心和插件应该只依赖于 API。您使用哪种构建工具来创建打包项目取决于您。Gradle 在处理包装方面可能会更有效，但是拥有 Leiningen 提供的“结帐”功能可以使整个系统的开发更容易。

我会看一下 Leiningen 和 Noir 的代码，以找出如何有效地处理这个问题。

为了动态加载插件，我会先看看 Noir 如何在他们的两个文件中处理它：

*   [server.clj](https://github.com/ibdknox/noir/blob/master/src/noir/server.clj)为特定命名空间下的所有文件加载命名空间。在底层它使用[tools.namespace](https://github.com/clojure/tools.namespace/)，但你可以很容易地看到它是如何用于`require`特定基础下的每个命名空间的。这也是 Leiningen 处理自定义任务的方式——任务的基本定义应该在 leiningen.$task 命名空间中。
*   [core.clj](https://github.com/ibdknox/noir/blob/master/src/noir/core.clj)具有我将用于插件注册的内容。总之，使用 an 下的地图`atom`并将插件添加到该地图。我建议用宏包装注册以保持代码更干净。

如果您不需要在运行时处理添加插件，我上面列出的内容应该足够了。如果在启动期间类路径中没有每个插件，我建议使用[pomegranite](https://github.com/cemerick/pomegranate)将条目添加到类路径中。[您可以在classpath.clj](https://github.com/technomancy/leiningen/blob/master/leiningen-core/src/leiningen/core/classpath.clj)中看到一个示例。

# c++ - C++ 堆栈流行通论

> ID：10272560
> 
> 赞同：0
> 
> 时间：2012-04-22T22:10:36.060
> 
> 标签：c++, stack

我对如何将下面的代码发送一个变量然后将该变量更改为堆栈顶部的值而不“返回”一个值感到困惑。因此，如果 1 在顶部，我可以执行 stack.pop(variable) ，然后 variable 将等于 1。

```
void DynIntStack::pop(int &num)
{
   StackNode *temp; // Temporary pointer

   // First make sure the stack isn't empty.
   if (isEmpty())
   {
      cout << "The stack is empty.\n";
   }
   else  // pop value off top of stack
   {
      num = top->value;
      temp = top->next;
      delete top;
      top = temp;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:14:17.163

这是一个通过*引用*传递的参数。

您可以将其视为传递实际参数，而不仅仅是传递值。对参数所做的任何修改都会反映到原始变量，因为它们是相同的变量。

实际上，参数是对实际值的内存地址的引用（指针）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:20:38.497

当你调用一个带有引用的函数时，比如

```
void setNum(int &num) {
  num = 4;
}

main(...) {
  int myNum = 2;
  setNum(myNum);
  cout << myNum << endl;
} 
```

你告诉编译器传递参数的*地址*，而不是它的值。当您为引用分配值时，它会更改该地址处的内存。然后，当函数返回时，原始变量仍然指向相同的地址，因此它采用新值。

另一方面，当您声明一个接受*value*的函数时，例如

```
void leaveNumUnchanged(int num) {
  num++;
  cout << "The new value is " << num << endl;
} 
```

该函数制作自己的参数的私有副本，并且任何操作仅影响副本。

# javascript - AJAX 和用户离开页面

> ID：10272561
> 
> 赞同：16
> 
> 时间：2012-04-22T22:10:40.100
> 
> 标签：javascript, jquery, ajax

我正在聊天，我试图弄清楚如何检测到用户是否离开了页面。几乎所有事情都由数据库处理，以避免前端混乱。

所以我想要做的是一旦页面因任何原因离开（窗口关闭、转到另一个页面、单击链接等），将在一个人离开之前触发 ajax 调用，以便我可以更新数据库。

这是我尝试过的：

```
$(window).unload(function(){
      $.post("script.php",{key_leave:"289583002"});
}); 
```

出于某种奇怪的原因，它不起作用，我检查了 php 代码，它工作正常。有什么建议么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-22T22:23:07.717

试试这个：

```
$(window).unload(function(){
    $.ajax({
        type: 'POST',
        url: 'script.php',
        async:false,
        data: {key_leave:"289583002"}
    });
}); 
```

请注意`async:false`，浏览器等待请求完成的方式。

使用`$.post`是异步的，因此在浏览器停止执行脚本之前请求可能不够快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T22:24:46.783

这不是正确的方法......假设操作系统只是挂起或浏览器进程中发生了一些事情，那么这个事件将不会被触发。而且您永远不会知道用户何时离开，在他/她断开连接后显示他/她在线。取而代之的是，您可以做的是。

1.  尝试连接一个socket，这样在socket断开的时候就可以知道用户已经断开了
2.  您可以向服务器发送一个请求（例如每 1 秒后），这样您就可以知道用户仍然处于连接状态。如果您没有收到请求 - 即使在 2 秒后 - 断开用户连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:13:55.043

尝试在 $.post 之后添加弹出窗口 (prompt("leaving so early?"))。它可能会起作用。但这可能是糟糕的用户体验。:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-12T15:19:57.450

这与上面的答案有关。[https://stackoverflow.com/a/10272651/1306144](https://stackoverflow.com/a/10272651/1306144)

这将每 1 秒执行一次 ajax 调用。(1000)

```
function callEveryOneSec() {
    $jx.ajax({}); // your ajax call
}

setInterval(callEveryOneSec, 1000); 
```

# sql-server - SQL Server：如果 2 列具有特定值，则返回第三列

> ID：10272562
> 
> 赞同：1
> 
> 时间：2012-04-22T22:10:54.697
> 
> 标签：sql-server

我正在尝试创建一个执行以下操作的 SQL 查询。

```
If (field-A = Value1) and (field-B = value1)
then (field-c) 
```

因此，如果 2 列具有某个值，我想返回第三列的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:13:35.307

尝试这个：

```
case 
  when field-A = @value1 and field-B = @value1 then field-C 
  else 'whatever else you want' end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:13:59.643

`select fieldc from table where fielda='value1' and fieldb='value2'`

# php - 多个表用 while 连接 echo

> ID：10272566
> 
> 赞同：1
> 
> 时间：2012-04-22T22:12:06.930
> 
> 标签：php, mysql, html-table, echo

我现在对这个问题绝望了，这就是我在这里的原因。我是 PHP 和 mysql 编程的初学者。我在网上搜索了解决方案，但没有成功。我正在做一个项目，什么是汽车维修管理系统。这是我需要的一部分。

我有两张桌子：

```
repairs (j_id /this is the primary key/, rendszam, javitas, megjegyzes, datum) 
and 
pictures (kep_id /this is the primary key/, j_id /it's from repairs j_id/, kepnev) 
```

我需要在表格中显示一个结果，在这里我可以看到哪些修复在图片表中有图片，但没有冗余，所以我不想要多个彼此相似的修复行，而是一个修复行后面有多个图片列。

我已经做了什么：

```
<?php
$sql = "SELECT $tbl_name2.j_id, $tbl_name2.rendszam, $tbl_name2.javitas, $tbl_name2.megjegyzes, $tbl_name2.datum, $tbl_name3.kepnev FROM $tbl_name2, $tbl_name3 WHERE $tbl_name2.j_id=$tbl_name3.j_id";

$result = mysql_query($sql) or die(mysql_error());

while ($row = mysql_fetch_array($result)) {
    echo "<tr><td>" . $row[$i] . "</td>";
    echo "<td>" . $row[$i + 1] . "</td>";
    echo "<td>" . $row[$i + 2] . "</td>";
    echo "<td>" . $row[$i + 3] . "</td>";
    echo "<td>" . $row[$i + 4] . "</td>";
    echo "<td>" . $row[$i + 5] . "</td>";
}
?> 
```

这个显示如下信息：

```
repair id | picture

1    |    fdgdfg.jpg
1    |    fgdfg.jpg
1    |    fghh.jpg
25   |    dfg.jpg
25   |    jkjk.jpg 
```

但我不想有多个修复行，而是一个修复行，后面有多张图片。

我试过这个：

```
$sql2="SELECT DISTINCT $tbl_name2.j_id, $tbl_name3.kepnev FROM $tbl_name2, $tbl_name3 WHERE $tbl_name2.j_id=$tbl_name3.j_id";

$result2=mysql_query($sql2) or die(mysql_error());

$sql="SELECT $tbl_name2.j_id, $tbl_name2.rendszam, $tbl_name2.javitas, $tbl_name2.megjegyzes, $tbl_name2.datum, $tbl_name3.kepnev FROM $tbl_name2, $tbl_name3 WHERE $tbl_name2.j_id=$tbl_name3.j_id GROUP BY j_id;

$result=mysql_query($sql) or die(mysql_error());

while($row=mysql_fetch_array($result))
{
echo "<tr><td>".$row[$i]."</td>";
echo "<td>".$row[$i+1]."</td>";
echo "<td>".$row[$i+2]."</td>";
echo "<td>".$row[$i+3]."</td>";
echo "<td>".$row[$i+4]."</td>";
echo "<td>".$row[$i+5]."</td>";
while($sor=mysql_fetch_array($result2))
    {
        if($sor['j_id']==$row[$i]){
        echo "<td><a href=kepek/".$sor['kepnev']." target=_blank>".$sor['kepnev']."</a></td>";
        }
    }

} 
```

sql 语句在 $sql 中的 group by 中有所不同，但这个显示结果如下：

```
 repair id | picture

    1    |    fdgdfg.jpg | fgdfg.jpg | fghh.jpg
    25   | 
```

所以它只是在第一个修复 id 之后没有继续，没有显示修复 id 25 的修复图片。

我不知道，我怎样才能正确。我需要一个显示如下信息的表格：

```
repair id | picture

   1    |    fdgdfg.jpg | fgdfg.jpg | fghh.jpg
   25   |    dfg.jpg | jkjk.jpg 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:29:50.683

这听起来很简单，看起来你已经有了一个好的开始。

我过去做过类似的事情，我只是使用一个变量来跟踪当前显示的 ID 和之前显示的 ID。这是一个快速代码示例来概述我的意思。

```
while($row=mysql_fetch_array($result))
{
    $currentID=$row[$i];
    if ($currentID != $lastID) { 
        echo "</tr><tr><td>".$row[$i]."</td>"; 
    } else {
        echo "<td>".$row[$i]."</td>";   
    }
    $lastID=$row[$i];
} 
```

因此，我们的想法是跟踪最后一个 ID 是什么。在下一行中，如果 ID 相同，只需输出 <td>"variable goes here"</td> 以使其保持在同一列上。如果 ID 更改，请结束该行并使用 </tr><tr>" 创建一个新行。如果您需要更多帮助，请随时发表评论。

# image - 用图像样式化 HTML“提交”按钮？

> ID：10272569
> 
> 赞同：0
> 
> 时间：2012-04-22T22:12:32.280
> 
> 标签：image, button, styles

我想知道表单按钮上的图形。

我使用表单按钮而不是链接，因为它们看起来更好。

而不是这个：

```
 print ('<A HREF="vote.php?vote=up" REL="nofollow">Vote +</A>&nbsp;');
 print ('<A HREF="vote.php?vote=dn" REL="nofollow">Vote -</A> '); 
```

我有这个：

```
 print ('<TD VALIGN="center"> ');
 print ('<FORM METHOD="post" ACTION="vote.php?vote=up" REL="nofollow"> ');
 print ('<P ALIGN="CENTER"> ');
 print ('<INPUT TYPE="submit" VALUE="Vote +" /> ');
 print ('</P> ');
 print ('</FORM> ');
 print ('</TD> ');
 print ('<TD VALIGN="center"> ');
 print ('<FORM METHOD="post" ACTION="vote.php?vote=dn" REL="nofollow"> ');
 print ('<P ALIGN="CENTER"> ');
 print ('<INPUT TYPE="submit" VALUE="Vote -" /> ');
 print ('</P> ');
 print ('</FORM> '); 
```

现在，在这种情况下，我想在按钮上使用拇指向上和向下符号，而不是说“投票+”等。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:29:12.987

您可以使用 CSS 来设置按钮样式，包括使用图像。这里有一些教程可以帮助你解决这个问题。

[http://www.tyssendesign.com.au/articles/css/styling-form-b​​uttons/](http://www.tyssendesign.com.au/articles/css/styling-form-buttons/)

[http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/](http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:17:01.437

css

```
<style>
.btn1 input.submit-button {
    width: 120px;
    background-image:url(/images/vote1.png);
    background-repeat: no-repeat;
    background-position: 3px center;
    padding: 5px;
.btn2 input.submit-button {
    width: 120px;
    background-image:url(/images/vote2.png);
    background-repeat: no-repeat;
    background-position: 3px center;
    padding: 5px;
</style> 
```

代码

```
print ('<INPUT TYPE="submit" VALUE="Vote +" class="btn1" /> ');

print ('<INPUT TYPE="submit" VALUE="Vote -" class="btn2" /> '); 
```

# c# - ADO.NET 在 SQL Server 2008 中更新表

> ID：10272576
> 
> 赞同：0
> 
> 时间：2012-04-22T22:12:58.703
> 
> 标签：c#, .net, sql, entity-framework

我正在使用 ADO.NET 并尝试更新 SQL Server 2008 数据库中表中的列值。但是该值没有更新。即使当我在 C# 代码中调试它时它是更新的。这是我的代码：

```
using (ADONETClass context = new ADONETClass())
{
   List<Invoices> list = context.Invoices.ToList<Invoices>();
   foreach (Invoices b in list)
   {
      b.status = 0;
   }
} 
```

现在我调试了代码，发现`context.Invoices.ToList<Invoices>()[0].status`确实设置为零。但是当程序运行完毕后，我打开 SQL Server Management Studio 并且状态值仍然是 0。不知道发生了什么？我错过了什么吗？

谢谢

瓦伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:16:07.943

你在调用 context.SaveChanges() 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:18:27.083

你在使用实体框架吗？我认为您缺少对 context.SaveChanges 的调用 在 EntityFramework 中，更改都只是在内存中，并且在您调用 SaveChanges 之前不会写入数据库

# c# - 将 bool 转换为 int？

> ID：10272581
> 
> 赞同：-1
> 
> 时间：2012-04-22T22:13:35.807
> 
> 标签：c#, operands

我有这段代码，但我不明白为什么我不能使用运算符 || 在这个例子中。

“操作员'||' 不能应用于“bool”和“int”类型的操作数”

我错过了什么吗？这个布尔值在哪里？

```
int i = 1;                            
if ( i == 1)
{
    Response.Write("-3");
}
else if (i == 5 || 3) //this is the error, but where is the bool?
{
    Response.Write("-2");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:17:09.940

您需要将 x 与 y 和/或 x 与 z 进行比较，大多数语言都不允许将 x 与（y 或 z）进行比较。当您添加一个 int 的“3”时，引入了 bool。编译器认为你想要 (i == 5) || (3) 这不起作用，因为 3 不会自动转换为 bool （可能在 JavaScript 中除外）。

```
int i = 1;                            
        if ( i == 1)
        {
            Response.Write("-3");
        }

        else if (i == 5 || i == 3) //this is the error, but where is the bool?
        {
            Response.Write("-2");
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:17:24.367

您还可以使用 switch 语句。案例3和5是同一个
例子

```
int i = 1;

        switch (i)
        {
            case 1:
                Response.Write("-3");
                break;
            case 3:
            case 5:
                Response.Write("-2");
                break;
        } 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:20:48.033

您收到错误的原因是因为您尝试对无法解析为布尔方程的事物执行布尔评估：

```
if (false || 3) 
```

这里 '3' 不会计算为布尔方程。

如果你把它改成

```
if (false || 3 == 3) 
```

然后你会发现它会起作用。

# http - http-protocol 处理什么？

> ID：10272585
> 
> 赞同：-1
> 
> 时间：2012-04-22T22:14:02.090
> 
> 标签：http, cookies, network-protocols

我有关于 http 协议的具体问题？

我知道 http 协议处理请求/响应，但它也处理 cookie 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T22:14:41.343

Cookie 使用 HTTP 响应标头设置并使用 HTTP 请求标头发送。

另请参阅：[原始](http://www.w3.org/Protocols/rfc2109/rfc2109)和[更新的 cookie 规范](https://www.rfc-editor.org/rfc/rfc6265)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:21:00.853

Cookie 在 HTTP 请求和响应中传输，但不是 HTTP 的一部分。

请参阅[RFC 6265](http://greenbytes.de/tech/webdav/rfc6265.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:15:59.567

是的。它处理cookies。所有 cookie 都通过相同 cookie 域参数（包括通配符域）的 HTTP 请求发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:18:40.437

是的，这个相同的协议负责处理 cookie。我的意思是说它可以处理 HTTP 协议的浏览器也处理 cookie。
请参阅链接[http://en.wikipedia.org/wiki/HTTP_cookie#Implementation](http://en.wikipedia.org/wiki/HTTP_cookie#Implementation)
，除了 Req/Res 和 cookie 之外，HTTP 中还有很多东西。事实上，cookie 是 req/res 的一部分。访问此链接 [http://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

# html - 将标题元素与表格元素内联

> ID：10272590
> 
> 赞同：1
> 
> 时间：2012-04-22T22:15:03.123
> 
> 标签：html, html-table, caption

我建立了一个利用标题元素的表格；桌子周围有盒子阴影，默认情况下，标题放在桌子顶部，盒子阴影之外。我试图让标题落在盒子阴影内。我将标题的显示更改为`display:table-header-group`，它确实将其放置在表格内，但是“破坏”了我想要的布局......你可以在这里看到它：http: [//jsfiddle.net/jalbertbowdenii/YraVE/](http://jsfiddle.net/jalbertbowdenii/YraVE/) （我只看过这在 chrome 中）第一列比其他列占用更多的宽度。有人知道将标题放在表格中同时不改变列宽的解决方案吗？

CSS：

```
table{border-collapse:collapse; border-spacing:0; padding-top:0.5em; padding-bottom:0.5em; margin:0.8em auto; -moz-box-shadow:0 0 4px #000; -ms-box-shadow:0 0 4px #000; -o-box-shadow:0 0 4px #000; -webkit-box-shadow:0 0 4px #000; box-shadow:0 0 4px #000; color:#000; width:80%}
.captionx{display:table-header-group} 
```

HTML：

```
<h1>Caption Default <code>display:table-caption</code></h1>      
<table summary="Summary of Table Data">
        <caption>Caption for Table</caption>
        <thead><tr><th>Sun</th><th>Mon</th><th>Tues</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead>
        <tfoot><tr><td colspan="7"><p>Table Footer</p></td></tr></tfoot>    
        <tbody>
          <tr><td>01</td><td>02</td><td>03</td><td>04</td><td>05</td><td>06</td><td>07</td></tr>        
        </tbody>
      </table>
<hr />
<h1>Caption set to <code>display:</code></h1>
      <table summary="Summary of Table Data">
        <caption class="captionx">Caption for Table</caption>
        <thead><tr><th>Sun</th><th>Mon</th><th>Tues</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead>
        <tfoot><tr><td colspan="7"><p>Table Footer</p></td></tr></tfoot>    
        <tbody>
          <tr><td>01</td><td>02</td><td>03</td><td>04</td><td>05</td><td>06</td><td>07</td></tr>        
        </tbody>
      </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T09:28:10.277

我刚刚遇到了同样的问题并得到了这个问题。如果您确定您的标题将只有一行（即您知道它的高度），您可以尝试将其设置为`position:absolute`并且`table`to`position:relative`与.`padding-top`的高度相等`caption`。

```
table {
    position: relative;
    padding-top: 20px;
}

caption {
    position: absolute;
    top: 0;
    left: 0;
    height: 20px;
    line-height: 20px;
} 
```

# javascript - 未缩小的 SoundCloud SDK

> ID：10272596
> 
> 赞同：3
> 
> 时间：2012-04-22T22:16:06.610
> 
> 标签：javascript, soundcloud

我想要未缩小的 SoundCloud SDK。它有一个错误，在谷歌和这里都没有出现，所以我想自己调试它，但不能因为缩小的 JavaScript 几乎不可读。

我找到了这个：

[https://github.com/soundcloud/sc-connect/](https://github.com/soundcloud/sc-connect/)

我下载了整个 SDK 并尝试使用 latest.js... 然后尝试[http://connect.soundcloud.com/latest.js](http://connect.soundcloud.com/latest.js)，但我收到 SC.initialize 不存在的错误。如果我回到 sdk.js，没问题。我是 js n00b，所以我确信这很简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:12:44.723

我们的 Javascript SDK 存储库现已在[http://github.com/soundcloud/soundcloud-javascript](http://github.com/soundcloud/soundcloud-javascript)上公开。此外还有[http://connect.soundcloud.com/sdk.unminified.js](http://connect.soundcloud.com/sdk.unminified.js)。

# php - 知道是否在视图中使用 cakephp 单击了 html 按钮

> ID：10272598
> 
> 赞同：0
> 
> 时间：2012-04-22T22:16:34.040
> 
> 标签：php, html, cakephp

这是我的 cakephp 视图代码的一部分：

```
</fieldset> 
   </form>
        <?php        
            $account = new Account();
            $account->insertPos();               
         ?>
   <button id="button" name="button" onClick="assign();" value="save"> Save Changes     </button> 
</body> 
```

我需要仅在单击按钮时才执行 php 部分，我如何检查在我的视图中单击了按钮并执行此 php 代码...

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:02:21.237

在同一个 PHP 请求中没有办法做到这一点。当用户看到按钮并点击它时，页面已经完成渲染，请求结束，PHP 的工作也完成了。

您需要通过提交常规表单或通过 Ajax 向服务器发送另一个请求以实现此目的。这是一个简单的非 Ajax 解决方案（可能需要调整以适应您的其余代码）：

```
<div id="result"><?php
    if(isset($_POST['newaccount']))
    {
        $account = new Account();
        $account->insertPos();
    }
?></div>
<form id="newaccountform" method="post">
    <input type="submit" id="button" name="newaccount" value="Save Changes">
</form> 
```

# php - PHP Regex 检查两个字符串是否共享两个公共字符

> ID：10272600
> 
> 赞同：12
> 
> 时间：2012-04-22T22:16:50.853
> 
> 标签：php, regex, preg-match-all

我刚刚开始了解正则表达式，但是在阅读了很多内容（并且学到了很多东西）之后，我仍然无法找到解决这个问题的好方法。

让我说清楚，我知道*不*使用正则表达式可能会更好地解决这个特定问题，但为了简洁起见，我只想说我需要使用正则表达式（相信我，我知道有更好的方法来解决这个问题）。

这就是问题所在。我得到了一个大文件，每行正好有 4 个字符长。

这是一个定义“有效”行的正则表达式：

```
"/^[AB][CD][EF][GH]$/m" 
```

在英语中，每行在位置 0 处有 A 或 B，在位置 1 处有 C 或 D，在位置 2 处有 E 或 F，在位置 3 处有 G 或 H。我可以假设每行正好是 4 个字符长。

我正在尝试做的是给定这些行之一，匹配包含 2 个或更多常见字符的所有其他行。

**以下示例假定以下内容：**

1.  `$line`始终是有效格式
2.  `BigFileOfLines.txt`仅包含有效行

**例子：**

```
// Matches all other lines in string that share 2 or more characters in common
// with "$line"
function findMatchingLines($line, $subject) {
    $regex = "magic regex I'm looking for here";
    $matchingLines = array();
    preg_match_all($regex, $subject, $matchingLines);
    return $matchingLines;
}

// Example Usage
$fileContents = file_get_contents("BigFileOfLines.txt");
$matchingLines = findMatchingLines("ACFG", $fileContents);

/*
 * Desired return value (Note: this is an example set, there 
 * could be more or less than this)
 * 
 * BCEG
 * ADFG
 * BCFG
 * BDFG
*/ 
```

我知道可行的一种方法是使用如下正*则*表达式（以下正则表达式仅适用于“ACFG”：

`"/^(?:AC.{2}|.CF.|.{2}FG|A.F.|A.{2}G|.C.G)$/m"`

这工作正常，性能是可以接受的。令我困扰的是，我必须基于 生成它`$line`，我宁愿让它不知道具体参数是什么。此外，如果稍后修改代码以匹配 3 个或更多字符，或者如果每行的大小从 4 增长到 16，则此解决方案的扩展性不佳。

感觉就像我忽略了一些非常简单的事情。似乎这可能是一个重复的问题，但我看过的其他问题似乎都没有真正解决这个特定问题。

提前致谢！

**更新：**

似乎正则表达式答案的规范是让 SO 用户简单地发布一个正则表达式并说“这应该适合你”。

我认为这是一个半途而废的答案。我真的很想*了解*正则表达式，所以如果您可以在答案中包含对为什么该正则表达式的彻底（合理）解释：

*   A. 作品
*   B. 是最有效的（我觉得可以对主题字符串做出足够多的假设，可以进行相当多的优化）。

当然，如果您给出一个有效的答案，并且没有其他人*用* 解决方案发布答案​​，我会将其标记为答案 :)

**更新 2：**

谢谢大家的精彩回复，很多有用的信息，你们中的很多人都有有效的解决方案。我选择了我所做的答案，因为在运行性能测试之后，它是最好的解决方案，平均运行时间与其他解决方案相同。

我赞成这个答案的原因：

1.  给定的正则表达式为更长的行提供了出色的可伸缩性
2.  正则表达式看起来更干净，对于像我这样的凡人来说更容易解释。

但是，很多功劳归功于以下答案，因为他们非常彻底地解释了为什么他们的解决方案是最好的。如果您遇到这个问题是因为这是您想要弄清楚的问题，请给他们全部阅读，这对我有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:38:23.027

你为什么不直接使用这个正则表达式`$regex = "/.*[$line].*[$line].*/m";`？

对于您的示例，这转化为`$regex = "/.*[ACFG].*[ACFG].*/m";`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T23:34:08.757

> 这是一个定义“有效”行的正则表达式：
> 
> `/^[A|B]{1}|[C|D]{1}|[E|F]{1}|[G|H]{1}$/m`
> 
> 在英语中，每行在位置 0 处有 A 或 B，在位置 1 处有 C 或 D，在位置 2 处有 E 或 F，在位置 3 处有 G 或 H。我可以假设每行正好是 4 个字符长。

那不是那个正则表达式的意思。该正则表达式意味着每行都有 A 或 B 或位置 0 的管道、C 或 D 或位置 1 的管道等； `[A|B]`意思是“'A'或'|' 或'B'”。'|' 仅表示字符类 *之外的“或​​”。*

此外，`{1}`是无操作；缺少任何量词，一切都必须恰好出现一次。因此，上述英语的正确正则表达式是：

```
/^[AB][CD][EF][GH]$/ 
```

或者，或者：

```
/^(A|B)(C|D)(E|F)(G|H)$/ 
```

第二个具有捕获每个位置的字母的副作用，因此第一个捕获的组会告诉您第一个字符是 A 还是 B，依此类推。如果您不想捕获，可以使用非捕获分组：

```
/^(?:A|B)(?:C|D)(?:E|F)(?:G|H)$/ 
```

但是字符类版本是迄今为止写这个的常用方式。

至于你的问题，它不适合正则表达式；当你解构字符串，用适当的正则表达式语法将它重新组合在一起，编译正则表达式并进行测试时，你可能会更好地进行逐个字符的比较。

我会重写你的“ACFG”正则表达式：`/^(?:AC|A.F|A..G|.CF|.C.G|..FG)$/`，但这只是外观；我想不出使用正则表达式的更好解决方案。（尽管正如迈克·瑞安（Mike Ryan）所指出的那样，最好还是`/^(?:A(?:C|.E|..G))|(?:.C(?:E|.G))|(?:..EG)$/`- 但这仍然是相同的解决方案，只是以更有效的处理形式。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:39:19.070

您已经回答了如何使用正则表达式进行操作，并指出了它的缺点和无法扩展，所以我认为没有必要鞭打死马。相反，这是一种无需正则表达式即可工作的方法：

```
function findMatchingLines($line) {
    static $file = null;
    if( !$file) $file = file("BigFileOfLines.txt");

    $search = str_split($line);
    foreach($file as $l) {
        $test = str_split($l);
        $matches = count(array_intersect($search,$test));
        if( $matches > 2) // define number of matches required here - optionally make it an argument
            return true;
    }
    // no matches
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T23:40:23.667

人们可能会对您的第一个正则表达式感到困惑。你给：

```
"/^[A|B]{1}|[C|D]{1}|[E|F]{1}|[G|H]{1}$/m" 
```

然后说：

> 在英语中，每行在位置 0 处有 A 或 B，在位置 1 处有 C 或 D，在位置 2 处有 E 或 F，在位置 3 处有 G 或 H。我可以假设每行正好是 4 个字符长。

但这根本不是那个正则表达式的意思。

这是因为`|`运算符在这里具有最高优先级。因此，该正则表达式在英语中真正所说的是：要么`A`或`|`或`B`在第一个位置，要么或或在第一个位置，或或`C`或在第一个位置，或或'| H`在第一个位置。`|``D``E``|``F``G``or`

这是因为`[A|B]`表示具有三个给定字符之一的字符类（包括`|`. 并且因为`{1}`表示一个字符（它也是完全多余的，可以删除），并且因为`|`它周围的一切都在外部交替出现。在我上面的英语表达中每个大写的 OR 代表你的一个交替`|`的。（我开始从 1 开始计算位置，而不是 0——我不想输入第 0 位置。）

要将您的英语描述作为正则表达式，您需要：

```
/^[AB][CD][EF][GH]$/ 
```

正则表达式将通过并检查`A`或`B`（在字符类中）的第一个位置，然后检查`C`或`D`在下一个位置等。

--

编辑：

您只想测试这四个字符中的两个是否匹配。

非常严格地说，从@Mark Reed 的回答中，最快的正则表达式（在它被解析之后）可能是：

```
/^(A(C|.E|..G))|(.C(E)|(.G))|(..EG)$/ 
```

相比于：

```
/^(AC|A.E|A..G|.CE|.C.G|..EG)$/ 
```

这是因为正则表达式实现如何通过文本逐步执行。您首先测试是否`A`在第一个位置。如果成功，那么您测试子案例。如果失败了，那么你就完成了所有这些可能的情况（或者有 3 个）。如果您还没有匹配，则测试 C 是否处于第二位。如果成功，那么您测试这两个子案例。如果这些都没有成功，你测试，'EG 在第 3 和第 4 位置。

这个正则表达式是专门为尽快失败而创建的。分别列出每个案例，意味着失败，您将测试 6 个不同的案例（六个备选方案中的每一个），而不是 3 个案例（至少）。如果`A`不是第一名，你会立即去测试第二名，而不是再打两次。等等。

（请注意，我不确切知道 PHP 是如何编译正则表达式的——它们可能编译为相同的内部表示，尽管我怀疑不是。）

--

编辑：关于附加点。最快的正则表达式是一个有点模棱两可的术语。最快失败？最快成功？并给出成功行和失败行的样本数据的可能范围？必须澄清所有这些，才能真正确定您所说的*最快*标准是什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-22T23:42:47.400

这是使用[Levenshtein 距离](http://uk3.php.net/manual/en/function.levenshtein.php)而不是正则表达式的东西，并且应该足够可扩展以满足您的要求：

```
$lines = array_map('rtrim', file('file.txt')); // load file into array removing \n
$common = 2; // number of common characters required
$match = 'ACFG'; // string to match

$matchingLines = array_filter($lines, function ($line) use ($common, $match) {
    // error checking here if necessary - $line and $match must be same length
    return (levenshtein($line, $match) <= (strlen($line) - $common));
});

var_dump($matchingLines); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-22T23:51:14.473

有 6 种可能性， 4 个字符中*至少有*两个字符匹配：MM..、MM、M..M、.MM.、.MM 和 ..MM（“M”表示匹配，“.”表示不匹配-匹配）。

因此，您只需要将输入转换为匹配任何这些可能性的正则表达式。对于 的输入`ACFG`，您将使用以下命令：

```
"/^(AC..|A.F.|A..G|.CF.|.C.G|..FG)$/m" 
```

当然，这是您已经得出的结论——到目前为止非常好。

关键问题是 Regex 不是一种用于比较的语言`two strings`，它是一种用于将*字符串与模式*进行比较的语言。因此，您的比较字符串必须是模式的一部分（您已经找到），或者它必须是*input 的一部分*。后一种方法允许您使用通用匹配，但确实需要您修改输入。

```
function findMatchingLines($line, $subject) {
  $regex = "/(?<=^([AB])([CD])([EF])([GH])[.\n]+)"
      + "(\1\2..|\1.\3.|\1..\4|.\2\3.|.\2.\4|..\3\4)/m";
  $matchingLines = array();
  preg_match_all($regex, $line + "\n" + $subject, $matchingLines);
  return $matchingLines;
} 
```

这个函数的作用是在你的输入字符串前面加上你想要匹配的行，然后使用一个模式将第一行*之后*的每一行（即工作`+`后`[.\n]`）与第一行的 4 个字符进行比较。

如果您还想根据“规则”*验证*这些匹配行，只需将`.`每个模式中的 替换为适当的字符类（`\1\2[EF][GH]`等）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-23T17:47:28.813

我昨天晚上将问题添加为书签以今天发布答案，但似乎我有点晚了^^无论如何这是我的解决方案：

```
/^[^ACFG]*+(?:[ACFG][^ACFG]*+){2}$/m 
```

`ACFG`它查找被任何其他字符包围的字符之一的两次出现。循环展开并使用所有格量词，以稍微提高性能。

可以使用以下方法生成：

```
function getRegexMatchingNCharactersOfLine($line, $num) {
    return "/^[^$line]*+(?:[$line][^$line]*+){$num}$/m";
} 
```

# mysql - 字段列表中的 MySQL 未知列.. 仅出现在大写列中

> ID：10272601
> 
> 赞同：2
> 
> 时间：2012-04-22T22:17:00.313
> 
> 标签：mysql, sql

这有效：

```
INSERT INTO people (`name`, `job`) values ('Bob', 'sales') 
```

但这失败了：

```
INSERT INTO people (`name`, `Sold`) values ('Bob', '56') 
```

给出错误： `Unknown column 'Sold' in 'field list'`

所有字段都是 varchar 类型。想不通这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:22:28.357

这个错误是指表`Sold`中的表列名`people`。

您的两个示例没有意义，因为您没有`Sold`在第一个示例中成功地将值插入到列中。在第一个示例中，您也没有成功地将数字插入到 VARCHAR 列中。

这与类型不匹配无关，错误表示此列未知（不存在）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:23:06.610

试试这个：

```
INSERT INTO people (name, sold) values ('Bob', '56') 
```

我需要有关表的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:42:34.633

```
INSERT INTO test (`name`, `Sold`) values ('Bob', '56') 
```

考虑到表格是这样创建的，对我有用..

```
create table test (id int, name varchar(6),Sold varchar(4),job varchar(7)); 
```

请在创建的“已售”列中检查您的数据类型。

在你的情况下它可能是一个布尔值..

# css - 在同一行左右对齐两个内联块

> ID：10272605
> 
> 赞同：127
> 
> 时间：2012-04-22T22:17:17.737
> 
> 标签：css, html

如何对齐两个内联块，使一个在左侧，另一个在同一行右侧？为什么这么难？是否有类似 LaTeX 的 \hfill 可以消耗它们之间的空间来实现这一点？

**我不想使用浮点数**，因为使用内联块我可以排列基线。当窗口对于他们俩来说都太小时，使用内联块我可以将 text-align 更改为 center ，它们将彼此居中。相对（父）+ 绝对（元素）定位与浮动有相同的问题。

HTML5：

```
<header>
    <h1>Title</h1>
    <nav>
        <a>A Link</a>
        <a>Another Link</a>
        <a>A Third Link</a>
    </nav>
</header> 
```

的CSS：

```
header {
    //text-align: center; // will set in js when the nav overflows (i think)
}

h1 {
    display: inline-block;
    margin-top: 0.321em;
}

nav {
    display: inline-block;
    vertical-align: baseline;
} 
```

他们就在彼此旁边，但我想要`nav`在右边。

![图表](../Images/ef99b07c39f736c0cf1ec1eaf0d93ae7.png)

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-04-23T08:33:26.367

**编辑：**自从我回答这个问题以来已经过去了 3 年，我想需要一个更现代的解决方案，尽管目前的解决方案可以做到这一点:)

1.[**弹性盒**](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes)

它是迄今为止最短和最灵活的。应用`display: flex;`到父容器并调整其子容器的位置，`justify-content: space-between;`如下所示：

```
.header {
    display: flex;
    justify-content: space-between;
} 
```

可以在这里在线看到 - [http://jsfiddle.net/skip405/NfeVh/1073/](http://jsfiddle.net/skip405/NfeVh/1073/)

但请注意，[flexbox 支持](http://caniuse.com/#feat=flexbox)是 IE10 和更新版本。如果您需要支持 IE 9 或更早版本，请使用以下解决方案：

2.你可以使用`text-align: justify`这里的技术。

```
.header {
    background: #ccc; 
    text-align: justify; 

    /* ie 7*/  
    *width: 100%;  
    *-ms-text-justify: distribute-all-lines;
    *text-justify: distribute-all-lines;
}
 .header:after{
    content: '';
    display: inline-block;
    width: 100%;
    height: 0;
    font-size:0;
    line-height:0;
}

h1 {
    display: inline-block;
    margin-top: 0.321em; 

    /* ie 7*/ 
    *display: inline;
    *zoom: 1;
    *text-align: left; 
}

.nav {
    display: inline-block;
    vertical-align: baseline; 

    /* ie 7*/
    *display: inline;
    *zoom:1;
    *text-align: right;
} 
```

工作示例可以在这里看到：http: [//jsfiddle.net/skip405/NfeVh/4/](http://jsfiddle.net/skip405/NfeVh/4/)。此代码适用于 IE7 及更高版本

如果 HTML 中的 inline-block 元素没有用空格分隔，则此解决方案将不起作用 - 请参见示例[http://jsfiddle.net/NfeVh/1408/](http://jsfiddle.net/NfeVh/1408/)。当您使用 Javascript 插入内容时，可能会出现这种情况。

如果我们不关心 IE7，只需忽略 star-hack 属性。使用您的标记的工作示例在这里 - [http://jsfiddle.net/skip405/NfeVh/5/](http://jsfiddle.net/skip405/NfeVh/5/)。我只是添加了`header:after`部分并证明了内容。

为了解决使用`after`伪元素插入的额外空间的问题，可以`font-size`将父元素设置为 0 并将子元素重置为 14px。这个技巧的工作示例可以在这里看到：http: [//jsfiddle.net/skip405/NfeVh/326/](http://jsfiddle.net/skip405/NfeVh/326/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-04T18:29:25.293

利用@skip405的回答，我为它制作了一个Sass mixin：

```
@mixin inline-block-lr($container,$left,$right){
    #{$container}{        
        text-align: justify; 

        &:after{
            content: '';
            display: inline-block;
            width: 100%;
            height: 0;
            font-size:0;
            line-height:0;
        }
    }

    #{$left} {
        display: inline-block;
        vertical-align: middle; 
    }

    #{$right} {
        display: inline-block;
        vertical-align: middle; 
    }
} 
```

它接受 3 个参数。容器，左右元素。例如，为了适合这个问题，您可以像这样使用它：

```
@include inline-block-lr('header', 'h1', 'nav'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T22:33:30.457

如果你不想使用浮动，你将不得不包装你的导航：

```
<header>
<h1>Title</h1>
<div id="navWrap">
<nav>
    <a>A Link</a>
    <a>Another Link</a>
    <a>A Third Link</a>
</nav>
</div>
</header> 
```

...并添加一些更具体的 css：

```
header {
//text-align: center; // will set in js when the nav overflows (i think)
width:960px;/*Change as needed*/
height:75px;/*Change as needed*/
}

h1 {
display: inline-block;
margin-top: 0.321em;
}

#navWrap{
position:absolute;
top:50px; /*Change as needed*/
right:0;
}

nav {
display: inline-block;
vertical-align: baseline;
} 
```

你可能需要做更多的事情，但这是一个开始。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-01T08:57:34.680

对于这两个元素使用

```
display: inline-block; 
```

'nav' 元素使用

```
float: right; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-02T19:13:50.137

正确对齐项目的新方法：

[网格](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout)：

```
.header {
        display:grid;
        grid-template-columns: 1fr auto;
    } 
```

[演示](http://jsfiddle.net/usn5wkd3/)

[Bootstrap 4\. 右对齐](https://getbootstrap.com/docs/4.1/utilities/float/#responsive)：

```
<div class="row">
      <div class="col">left</div>
      <div class="col">
          <div class="float-right">element needs to be right aligned</div>
      </div>
</div> 
```

[演示](http://jsfiddle.net/tw6ds39n/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-22T22:26:37.330

如果您已经在屏幕太小时使用 JavaScript 将内容居中（根据您对标题的评论），为什么不使用 JavaScript 撤消浮动/边距并正常使用浮动和边距。

您甚至可以使用 CSS 媒体查询来减少您使用的 JavaScript 数量。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-11T07:16:17.127

我认为一种可能的解决方案是使用`display: table`：

```
.header {
  display: table;
  width: 100%;
  box-sizing: border-box;
}

.header > * {
  display: table-cell;
}

.header > *:last-child {
  text-align: right;  
}

h1 {
  font-size: 32px;
}

nav {
  vertical-align: baseline;
} 
```

JSFiddle：http: [//jsfiddle.net/yxxrnn7j/1/](http://jsfiddle.net/yxxrnn7j/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-22T22:22:08.950

给它 float: right 和 h1 float:left 并在它们之后放置一个带有 clear:both 的元素。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-05T13:35:05.833

显示父母的左中和右。如果您有 3 个以上的元素，则为它们使用 nth-child() 。

[![在此处输入图像描述](../Images/fba47fc715b907584e589d669b19f413.png)](https://i.stack.imgur.com/mPssn.png)

HTML 示例：

```
<body>
    <ul class="nav-tabs">
        <li><a  id="btn-tab-business" class="btn-tab nav-tab-selected"  onclick="openTab('business','btn-tab-business')"><i class="fas fa-th"></i>Business</a></li>
        <li><a  id="btn-tab-expertise" class="btn-tab" onclick="openTab('expertise', 'btn-tab-expertise')"><i class="fas fa-th"></i>Expertise</a></li>
        <li><a  id="btn-tab-quality" class="btn-tab" onclick="openTab('quality', 'btn-tab-quality')"><i class="fas fa-th"></i>Quality</a></li>
    </ul>
</body> 
```

CSS 示例：

```
.nav-tabs{
  position: relative;
  padding-bottom: 50px;
}

.nav-tabs li {
  display: inline-block;  
  position: absolute;
  list-style: none;
}
.nav-tabs li:first-child{
  top: 0px;
  left: 0px;
}
.nav-tabs li:last-child{
  top: 0px;
  right: 0px;
}
.nav-tabs li:nth-child(2){
  top: 0px;
  left: 50%;
  transform: translate(-50%, 0%);
} 
```

# php - 从FTP流式传输文件并让用户同时下载它

> ID：10272611
> 
> 赞同：2
> 
> 时间：2012-04-22T22:17:50.673
> 
> 标签：php, ftp

我正在创建一个备份系统，其中将自动生成备份，所以我会将备份存储在不同的服务器上，但是当我想下载它们时，我希望链接是一次性链接，这并不难为了使这个安全，我正在考虑存储文件，以便它们不能通过其他服务器上的 http 访问。

所以我要做的是通过 ftp 连接，将文件下载到主服务器，然后将其提交下载并删除它，但是如果备份很大，这将需要很长时间，有没有办法从 FTP 流式传输而不显示下载实际位置而不将其存储在服务器上的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:34:54.110

[这是一个使用cURL](http://php.net/curl)的非常基本的示例。它指定了一个读取回调，当可以从 FTP 读取数据时将调用该回调，并将数据输出到浏览器，以便在与备份服务器进行 FTP 事务时同时下载到客户端。

这是一个非常基本的示例，您可以对其进行扩展。

```
<?php

// ftp URL to file
$url = 'ftp://ftp.mozilla.org/pub/firefox/nightly/latest-firefox-3.6.x/firefox-3.6.29pre.en-US.linux-i686.tar.bz2';

// init curl session with FTP address
$ch = curl_init($url);

// specify a callback function for reading data
curl_setopt($ch, CURLOPT_READFUNCTION, 'readCallback');

// send download headers for client
header('Content-type: application/octet-stream');
header('Content-Disposition: attachment; filename="backup.tar.bz2"');

// execute request, our read callback will be called when data is available
curl_exec($ch);

// read callback function, takes 3 params, the curl handle, the stream to read from and the maximum number of bytes to read    
function readCallback($curl, $stream, $maxRead)
{
    // read the data from the ftp stream
    $read = fgets($stream, $maxRead);

    // echo the contents just read to the client which contributes to their total download
    echo $read;

    // return the read data so the function continues to operate
    return $read;
} 
```

有关该选项的更多信息，请参阅[curl_setopt() 。](http://www.php.net/manual/en/function.curl-setopt.php)`CURLOPT_READFUNCTION`

# python - 404 Not Found Django 当明确在 urls.py 中时

> ID：10272612
> 
> 赞同：0
> 
> 时间：2012-04-22T22:18:10.920
> 
> 标签：python, django, apache, amazon-ec2, django-urls

我在 urls.py 文件中有以下代码

```
urlpatterns = patterns('ecomstore.accounts.views',
                       (r'^register/$', 'register', {'template_name':'registration/register.html', 'SSL':settings.ENABLE_SSL}, 'register'),
                       (r'^my_account/$','my_account', {'template_name':'registration/my_account.html'},'my_account'),
                       (r'^order_details/(?P<order_id>[-\w]+)/$', 'order_details', {'template_name':'registration/order_details.html'}, 'order_details'),
                       (r'^order_info//$', 'order_info', {'template_name':'registration/order_info.html'},'order_info'),
) 
```

所有重定向都有效，即`/register/`,`/my_account/`等，除了`/order_info//`. 我收到一个 404 page not found 错误，我不确定为什么这与其他的有什么不同。

它正在我的开发服务器上运行，但由于某种原因，它不能在 apache 上运行，如果这与它有任何关系的话。

# jquery - jquery-datatables-editable 自定义

> ID：10272618
> 
> 赞同：0
> 
> 时间：2012-04-22T22:18:52.150
> 
> 标签：jquery, datatables

我使用[jquery-datatables-editable](http://code.google.com/p/jquery-datatables-editable/wiki/Customization)插件。我使用弹出表单的添加按钮。我看到可以使用插件初始化中的 oAddNewRowFormOptions 参数为其 UI 自定义此表单。但是，我想使用[jquery 工具验证器](http://jquerytools.org/documentation/validator/index.html)来验证表单字段，而不是上述 datatables-editable 插件默认使用的 jquery.validate 插件。

是否有我可以在插件初始化中指定的参数选项，以便它使用另一个验证器，即来自[jquery 工具验证器](http://jquerytools.org/documentation/validator/index.html)的验证器？

另一个问题是：

我们可以让添加按钮（来自上面的插件）添加一个新的表格内联可编辑行而不是弹出表单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:44:22.420

您可以处理 fnOnAdding 事件，该事件在单击确定按钮后调用以验证您的表单。

[http://jquery-datatables-editable.googlecode.com/svn/trunk/events.html](http://jquery-datatables-editable.googlecode.com/svn/trunk/events.html)

```
 $(document).ready( function () {
$('#example').dataTable().makeEditable({
        sUpdateURL: "UpdateData.php",
                    sDeleteURL: "DeleteData.php",
        sAddURL: "AddData.php",
                    fnOnAdding: function()
            {   
                $("#trace").append("Adding new record");
                return true;
            },
        });

     } ); 
```

# ios - 来自 NSData 的文件路径

> ID：10272624
> 
> 赞同：1
> 
> 时间：2012-04-22T22:19:18.440
> 
> 标签：ios, cocoa, nsdata

我有从文件路径加载的 NSData。然后数据被传递，我需要数据来自哪里的文件路径。

除了将 filePath 作为额外参数传递之外，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:22:19.360

将两者包装在代表文件的容器对象中，例如

```
@interface File : NSObject

@property (strong) NSData *fileContents;
@property (copy) NSString *filePath;

// perhaps, even a nice constructor to fill these properties
- (id)initWithFilePath:(NSString *)filePath;

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:41:11.813

虽然您可能应该创建一个包含所需数据的单独结构或类，但您也可以向 NSData 添加关联。

为方便起见，您甚至可以将其作为 NSData 上的一个类别...假设您使用的是字符串...如果使用 URL，请使用 NSURL...这样，您的其他代码都不需要更改...您仍然可以像以前一样使用您的 NSData ，并使用新添加的属性。

注意：使用或不使用类别的原因有很多。我假设你会根据你的代码情况做出最好的选择，并将关于类别的好/坏使用的战争推迟到其他人身上。

尝试这样的事情......

NSData+AssociatedFilePath.h

```
#import <Foundation/Foundation.h>

@interface NSData (AssociatedFilePath)
@property (nonatomic, strong) NSString *filePath;
@end 
```

NSData+AssociatedFilePath.m

```
#import <objc/runtime.h>

static char kFilePath;

@implementation NSData (AssociatedFilePath)

- (void)setFilePath:(NSString*)filePath
{
    objc_setAssociatedObject(self, &kFilePath, filePath, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (NSString*)filePath
{
  return objc_getAssociatedObject(self, &kFilePath);
}

@end 
```

现在，在您的代码中，您可以执行此操作...

```
NSData *data = // whatever you do to create the data object..
data.filePath = someFilePath; 
```

每当您想要 NSData 对象的文件路径时...

```
NSString *filePath = myNSDataObject.filePath; 
```

由于它是一个类别，因此您可以在任何 NSData 对象上使用它，如果从未设置过文件路径，它将只返回 nil。

这是您需要向现有类添加行为的任何时候的通用解决方案（当然，在最佳使用类别时遵循适当的做法）。

# linked-list - 在 C++ 中传递指向链表的指针

> ID：10272626
> 
> 赞同：1
> 
> 时间：2012-04-22T22:19:37.020
> 
> 标签：linked-list

我有一个相当基本的程序，旨在通过链接列表对数字列表进行排序。

我挂断的地方是需要在列表开头插入元素时。这是有问题的代码块

假设 root->x = 15 并假设用户在提示时输入 12：

```
void addNode(node *root)
{
int check = 0;  //To break the loop
node *current = root;   //Starts at the head of the linked list
node *temp = new node;

cout << "Enter a value for x" << endl;
cin >> temp->x;
cin.ignore(100,'\n');

if(temp->x < root->x)
{
    cout << "first" << endl;
    temp->next=root;
    root=temp;

        cout << root->x << " " << root->next->x; //Displays 12 15, the correct response
} 
```

但是，如果在运行此功能后，我尝试

```
cout << root->x; 
```

回到 main()，它再次显示 15。所以代码

```
root=temp; 
```

一旦我离开该功能，它就会丢失。现在对 *root 的其他更改，例如在 LL 中添加另一个元素并指向 root->next ，正在被执行。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:25:45.287

这是因为您正在设置局部`node *root`变量，您不会修改原始根，而只是修改堆栈上传递的参数。

要修复它，您需要使用对指针的引用，例如：

```
void addNode(node*& root) 
```

或指向指针的指针：

```
void addNode(node **root) 
```

# python - 在python中实现“最简单协议”伪代码算法

> ID：10272630
> 
> 赞同：1
> 
> 时间：2012-04-22T22:20:18.543
> 
> 标签：python, telecommunication

使用两台不同的计算机，我必须实现发送者和接收者算法来发送和接收帧。我是一个强大的程序员，但对网络编程和 python 相对较新。算法如下。

发件人站点算法：

```
while(true)
{
    WaitForEvent();
    if(Event(RequestToSend))
    {
        GetData();
        MakeFrame();
        SendFrame();
    } 
```

接收端算法：

```
while(true)
{ 
    WaitForEvent();
    if(Event(ArrivalNotification))
    {
        ReceiveFrame();
        ExtractData();
        DeliverData();
    } 
```

我必须在两台不同的计算机上实现这些算法，一台作为发送者，另一台作为接收​​者。我不知道从哪里开始或寻找例子。我做了一些研究，运气不佳。如果有人可以提供示例代码或有关实现此功能的好文章，那将有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:26:11.130

我发现自己在使用 Python 的[Socket Server](http://docs.python.org/library/socketserver.html)示例。这将使您继续执行`SendFrame()`、`ReceiveFrame()`和`DeliverData()`例程。

`MakeFrame()`和`ExtractData()`, 将根据您需要来回发送的数据量而有很大差异。我将尝试挖掘一些我过去使用过的好例子。

如果您正在寻找一站式解决方案，我建议您研究[Twisted](http://twistedmatrix.com/trac/)。它有一个明确的学习曲线，但对你来说可能是值得的。请注意，如果您想使用`pyInstaller`or将 Python 代码打包到 exe 中`py2exe`，基于我读过的许多线程，Twisted 可能会给您带来麻烦。

所以回顾我的笔记后，框架方面对我来说是一个痛苦的话题，因为我找不到任何好的例子来帮助我。相反，我从头开始写了一个，并且（现在仍在）对其进行了调整。

当您阅读套接字编程时，您肯定会看到，仅仅因为您发送了所有数据（`socket.sendall()`）并不意味着您将在第一次之后收到所有数据`socket.recv()`。这增加了消息框架问题的一些复杂性。由于网络上缺乏示例，下面我有一个我现在在几个进程中使用的精简版本。

**更新**
所以在进一步测试了欠重/爆裂之后，我离开了正则表达式并逐个字符地处理流，这大大提高了它的性能。

`SendFrame()`, `ReceiveFrame()`, `ExtractData()`,`DeliverData()`例子：

```
MESSAGE_FRAME_START = '@'
MESSAGE_FRAME_END = '#'

def process_raw_socket_message_stream(raw_message_stream):
    message_list = []
    cmd = ''
    last_footer_idx = message_string.rfind(MESSAGE_FRAME_END)
    cmd_str_len = len(message_string)
    byte_cnt = 0
    while (byte_cnt <= last_footer_idx):
        cmd_chr = message_string[byte_cnt]
        cmd += cmd_chr
        if cmd_chr == MESSAGE_FRAME_START:
            cmd = MESSAGE_FRAME_START
        elif cmd_chr == MESSAGE_FRAME_END:
            message_list.append(cmd)

        byte_cnt += 1

    # Remove the parsed data
    if last_footer_idx > 0:
        message_string = message_string[last_footer_idx+1:]

    return message_list, message_string

def add_message_frames(unframed_message):
    return MESSAGE_FRAME_START + unframed_message + MESSAGE_FRAME_END

def remove_message_frames(framed_message):
    clean_message = framed_message.lstrip(MESSAGE_FRAME_START)
    clean_message = clean_message.rstrip(MESSAGE_FRAME_END)
    return clean_message

def process_messsage(clean_message):
    # Do what needs to be done
    pass

def send_data(mysocket, payload):
    framed_payload = add_message_frames(payload)
    mysocket.sendall(framed_payload)

def receive_data(mysocket, byte_size=1024):
    data = ''
    while(1):
        try: # Wait for data
            data += mysocket.recv(byte_size)
            if(data != '') and (data != None):
                # Decode all messsages
                message_list, remaining_data = process_raw_socket_message_stream(data)

                # Process all of the messages
                for messsage in message_list:
                    process_messsage(remove_message_frames(message))

                # Store the remaining data
                data = remaining_data
        except:
            print "Unexpected Error" 
```

# sql-server-2008-r2 - 如何将 SQL Server 2008 R2 数据库转换为 SQL Server 2012？

> ID：10272637
> 
> 赞同：10
> 
> 时间：2012-04-22T22:22:15.813
> 
> 标签：sql-server-2008-r2, sql-server-2012

我安装了 SQL Server 2012，并附加了一个最初由 SQL Server 2008 R2 生成的数据库。

一切似乎都很完美，但有一个问题：合并从每秒 1000 次下降到每秒 10 次（减速 100 倍）。

我推测这是因为我正在从 SQL Server 2012 访问 SQL Server 2008 R2 数据库。有没有办法将数据库转换为 SQL Server 2012 格式？或者是否还有其他事情可以解释性能下降 100 倍？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-22T22:30:10.707

请确保您将数据库的兼容模式设置为 110，并更新统计信息。

```
ALTER DATABASE MyDatabase SET COMPATIBILITY_LEVEL = 110;

DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += CHAR(13) + CHAR(10) + 'UPDATE STATISTICS '
  + QUOTENAME(SCHEMA_NAME(schema_id)) 
  + '.' + QUOTENAME(name) + ' WITH FULLSCAN;'
  FROM sys.tables;

PRINT @sql;
--EXEC sp_executesql @sql; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T10:29:38.023

当我在答案中运行 SQL 时，nvarchar 溢出。问题是当您的数据库有太多表时，SQL 对于 nvarchar 来说太长了。我的数据库有足够的表来溢出 varchar（是 nvarchar 的两倍）。所以我编辑了 SQL 来遍历每个表并执行单独的语句。这样您就不会错过更新任何表格的统计信息。

```
ALTER DATABASE MyDatabase SET COMPATIBILITY_LEVEL = 110;

DECLARE @SQL NVARCHAR(MAX) = N'';

Declare @Tables table
([Schema] nvarchar(50)
,[TableName] nvarchar(100))

Insert into @Tables
Select QUOTENAME(SCHEMA_NAME(schema_id)),QUOTENAME(name) 
FROM sys.tables;

Declare @Schema nvarchar(50), @TableName nvarchar(100)

While Exists(Select * From @Tables)
Begin
    Select Top 1 @Schema = [Schema], @TableName = [TableName] From @Tables
    Set @SQL = 'UPDATE STATISTICS ' + @Schema + '.' + @TableName + ' WITH FULLSCAN;'

    Begin Try
        EXEC SP_ExecuteSql @SQLToExecute = @SQL 
        Print 'Completed: ' + @SQL
    End Try
    Begin Catch
        DECLARE @ErrMsg nvarchar(4000)
        SELECT  @ErrMsg = SubString(ERROR_MESSAGE(),0,900)

        Select GetDate(), 'Failed updating stats on ' + @Schema + ' ' + @TableName + '. Error: '+@ErrMsg
    End Catch

    Delete From @Tables Where [Schema] = @Schema and [TableName] = @TableName 
End 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T16:17:36.247

分离和附加数据库时必须更新统计信息。否则查询计划器无法生成有效的执行计划，并最终导致执行时间长。这是我注意到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T18:27:13.990

升级数据库文件以使用 LocalDB：

1.在服务器资源管理器中，选择连接到数据库按钮。

2.在添加连接对话框中，指定以下信息：

数据源：Microsoft SQL Server (SqlClient)

服务器名称：(LocalDB)\v11.0

附加数据库文件：Path，其中 Path 是主 .mdf 文件的物理路径。

逻辑名称：名称，其中名称是要用于文件的名称。

选择确定按钮。

出现提示时，选择是按钮升级文件。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-04-22T22:25:16.093

这是在正确的轨道上：

[http://msdn.microsoft.com/en-us/library/ms189625.aspx](http://msdn.microsoft.com/en-us/library/ms189625.aspx)

```
USE master;
GO
CREATE DATABASE MyDatabase 
    ON (FILENAME = 'C:\MySQLServer\MyDatabase.mdf'),
    (FILENAME = 'C:\MySQLServer\Database.ldf')
    FOR ATTACH;
GO 
```

# delphi - 将C++回调函数导入delphi

> ID：10272638
> 
> 赞同：0
> 
> 时间：2012-04-22T22:22:17.140
> 
> 标签：delphi

这是此函数的 C++ 头文件。我已经导入了所有东西，除了那个回调我不知道该怎么做。

```
struct abs_operation;

typedef struct abs_operation ABS_OPERATION;  /* forward declaration */

typedef void (BSAPI  *ABS_CALLBACK) ( const ABS_OPERATION*, ABS_DWORD, void*);

struct abs_operation {
        ABS_CALLBACK Callback;  ///< Pointer to application-defined function, implementing operation callback.
} ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:56:54.673

根据对您之前问题的了解，我认为是这样的：

```
type
  PABSOperation = ^TABSOperation;
  TABSCallback = procedure(const Operation: PABSOperation;
     Flags: DWORD; Ptr: Pointer); stdcall;
  TABSOperation = record
     Callback: TABSCallback;
  end; 
```

# javascript - jquery替换问题

> ID：10272641
> 
> 赞同：0
> 
> 时间：2012-04-22T22:22:30.807
> 
> 标签：javascript, jquery, jquery-click-event

我有一系列 div，代表类似于棋盘。但这是一盘棘手的国际象棋。基本上用户点击一块，然后点击敌人的一块。如果它可以杀人。它应该将其移动到敌人的位置。并且敌人应该被删除。

```
<div class="column" data-square="4-4">
<div class="white-king lol">a</div>
</div>
<div class="column" data-square="4-5">
<div class="black-pawn lol">b</div>
</div>
<div class="column" data-square="4-6">
<div class="blue lol">c</div>
</div> 
```

//所以当用户第一次点击whiteking时，我们得到data-square，将它分配给一个变量$from，然后点击敌人的black-pawn。在服务器中进行一些验证，并且应该移动

​ square = 4-4 的内部 div 到 square = 4-5 的内部 div ， square = 4-5 的内部 div 应该被删除， square= 4-4 的内部 div 应该是 presnet

我尝试过使用 jquery 克隆。但它不适合小提琴：http: [//jsfiddle.net/jm4eb/13/](http://jsfiddle.net/jm4eb/13/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:32:37.380

这仍然不是好方法，但您可以尝试

```
(function() {

        var from = null;
          var $change =null;
        var to = null;

        $(".column" ).click(function(){
            if(from === null)
            {
                $(this).css("background-color","yellow");

                from = $(this).data('square');
                    $change= ($('<div/>').append($(this).clone(true).children()).html());

            }
            else
            {

                to = $(this).data('square');
                $(this).html("").html($change);
                $('div[data-square="'+from+'"]').html("<div class=lol>empty</div>").css("background-color","");
                from = to = null;
            }
        });

    }());​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:32:37.437

我个人不会因为用另一种元素替换一个元素而变得太变形。我只考虑将属性从一个元素交换到另一个元素。从一个元素中删除`white-king`类并将其添加到另一个元素。

# c++ - 搜索 C++ OAI-PMH 库

> ID：10272642
> 
> 赞同：1
> 
> 时间：2012-04-22T22:22:39.120
> 
> 标签：c++, oai

是否有为c++提供[OAI-PMH API](http://www.openarchives.org/)的库或其他东西？

我需要这样一个库，因为我必须为[citeseerx](http://citeseerx.ist.psu.edu/index)中的一些作者计算 Hirsch-Index作为作业，并且我不想从网站上获取所有信息。

如果有人有提示我可以在哪里找到，请告诉我。

谢谢

# ios - 快速傅立叶变换结果：频率轴刻度？

> ID：10272644
> 
> 赞同：1
> 
> 时间：2012-04-22T22:22:54.973
> 
> 标签：ios, accelerometer, fft, accelerate-framework

我使用 Apple 的 Accelerate Framework（在 iOS 设备上执行）成功实现了获取数组数据并在其上运行快速傅立叶变换的代码。

我现在的问题是频率轴的比例是多少？结果在某些频率范围内具有预期的峰值，但我不确定频率应该是多少。Accelerate Framework 的 FFT 函数接收一个数组并输出一个具有相同（或更多）数据点数的数组。它是否假设所有这些点在时间上都是等距的？它不将采样频率或时间变量作为输入。频率轴的比例（即每个点的频率增量）是否只是采样周期除以 2*Pi（或类似的东西？）我在文档中找不到很多关于此的信息。我一直在网上寻找类似的问题，但没有找到任何东西。

这在某些方面是一个数学问题，尽管它在很大程度上取决于 Accelerate Framework 的实现。

谢谢

[编辑我在这里](https://stackoverflow.com/questions/10508692/accelerate-framework-fft-vdspztoc-split-real-form-to-split-real-vector)问了一个后续问题，但还没有人回答。请看一下！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T22:37:11.520

FFT 为您提供线性间隔的频率区间，直至采样频率。这意味着箱之间的间距是（采样频率）/（箱数）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T03:01:38.263

频率轴刻度不依赖于 Accelerate 框架实现，只依赖于时域数据的采样率 (FS) 和 FFT 的长度 (N)。任何 FFT。

对于严格的真实数据输入，FFT 结果的后半部分将只是前半部分的复共轭。通常仅绘制前半部分（最高 FS/2）用于真实数据。

# java - 如何将视频打开到视频中的特定点？

> ID：10272653
> 
> 赞同：0
> 
> 时间：2012-04-22T22:24:50.443
> 
> 标签：java, android, video

我有一组与录制视频中的事件相对应的时间。这些时间膨胀了一个列表。选择列表条目时，我希望视频在所选时间打开

现在，以下代码仅在视频开头打开视频。

```
 Uri video = Uri.parse(Environment.getExternalStorageDirectory()+"/recordedMedia/" +eventName+ ".mp4");
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
                intent.setDataAndType(video, "video/*");
                startActivity(intent); 
```

理想情况下，直接在指定时间最好，尽管从头开始，然后跳到指定时间，如果它相当快，也可以工作。我正在使用 Android 2.2，API 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:50:34.137

我建议在您自己的代码中使用 MediaPlayer 类。您完成它的方式将使用媒体类型的默认播放器或用户选择的播放器之一。即使您可以弄清楚如何使特定媒体播放器从某个位置开始，您也没有机会让它与正在使用的各种播放器一起工作，包括一些 Android 默认设置已被 OEM 变体替换的设备.

使用 MediaPlayer 创建您自己的活动，并使用 seekTo() 从您想要的位置开始。网上有很多例子。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:45:08.743

也许您可以使用对象中的`seekTo()`方法 `MediaPlayer`？

我没有对此进行测试，您需要添加异常处理，但您可以按照以下方式进行操作：

```
 MediaPlayer mp = new MediaPlayer();
    mp.setDataSource(Environment.getExternalStorageDirectory()+"/recordedMedia/" +eventName+ ".mp4");
    mp.prepare();
    mp.seekTo(/*a time*/); 
```

# android - 我的班级和 Sqlite 数据库之间的连接

> ID：10272657
> 
> 赞同：-3
> 
> 时间：2012-04-22T22:25:20.043
> 
> 标签：android, string, sqlite, login

我正在尝试在 android 上设置登录系统，使用用户名检查用户输入的内容和数据库中存在的内容

这是我的一段代码，但它总是给我“无效”，如果我使用 Try Catch 块，它会给我一个 nullpointerException

```
public void checklogin(String logged){
    SQLiteDatabase db = null;
    DatabaseAdapter database = new DatabaseAdapter(this);       

        try{               
    Cursor mCursor = db.query(database.TABLE_USERS,new String[]{"select * from users"}, " Name like" + "'logged+'",null,null,null,null);

     if  (mCursor.moveToFirst()){
         Toast.makeText(LoginActivity.this, "Yaaaay", Toast.LENGTH_LONG).show();
     }}
        catch(NullPointerException e){
      Toast.makeText(LoginActivity.this, "invalid", Toast.LENGTH_LONG).show();

        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:27:50.973

好吧，您设置`db`为`null`... 所以当您调用它时，`db.query`它应该正确地给您一个`NullPointerException`.

# jquery - 单击 ASP.NET 按钮时，jQuery“.button”装饰消失了吗？

> ID：10272665
> 
> 赞同：2
> 
> 时间：2012-04-22T22:26:43.397
> 
> 标签：jquery, asp.net, jquery-ui, updatepanel

现在，您可以从 jquery UI 应用`.button()`到锚点、按钮、提交按钮等。我有一个简单的 asp.net 按钮，如下所示：

```
<asp:Button ID="btnFindSearch" runat="server" Text="Search" 
                        onclick="btnFindSearch_Click" /> 
```

然而，它位于更新面板中，如下所示：

```
 <div id="dialog" title="Select Address">
        <asp:UpdatePanel ID="upNewUpdatePanel" UpdateMode="Conditional" ChildrenAsTriggers="true" runat="server">
        <ContentTemplate>
            <div id="search" style="width:100%; text-align:center;">
                <asp:TextBox ID="txtFindSearch" runat="server"></asp:TextBox> 
                <asp:Button ID="btnFindSearch" runat="server" Text="Search" 
                    onclick="btnFindSearch_Click" />
            </div>
        </ContentTemplate>
        </asp:UpdatePanel>
        </div> 
```

在我的 jquery 中，我可以这样做：

`$('#btnFindSearch').button();`

它给了我一个按钮的 jquery ui 外观......我想真棒。但是在我单击按钮的那一刻，按钮就会返回到看起来很普通的 asp.net 服务器按钮。它好像`.button()`不再适用。

这是因为它位于 UpdatePanel 内还是可能导致这种情况的原因？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T22:29:58.663

这是因为在单击按钮*时会发生服务器 PostBack，*并且会替换原始 DOM 元素。

UpdatePanel 并不是特别聪明。它只是用从服务器发送的新 HTML替换*所有子内容*`innerHTML = severStuff`（想想）。因此，新创建的 DOM 元素是“未修饰的”。魔术`.button()`需要在新的 DOM 元素上再次运行。

* * *

除非有更好的方法来处理这个，我不知道，这里有一个[有用的类，用于](http://zsoltmiskolczi.blogspot.com/2011/01/aspnet-web-server-control-for-rendering.html)自动处理不同场景的内联脚本块。这有点杂乱无章和“hackish”，但它确实工作得很好（我们使用修改后的版本）。

用法可能看起来像（这必须**在**[updated] UpdatePanel 中，因为它适用于部分 PostBacks）：

```
<UpdatePanel ...>
  <OtherControls ...>
  // Put other controls first, because this will be rendered in-order
  // (which should usually be last!) in a normal/full PostBack.
  // It will use the appropriate "RegisterScript" for partial PostBacks.
  <InlineScript runat="server">
    <script>
        // Add .button() stuff here - note that InlineScript is last
        // so the previous (control) DOM nodes exist already in current
        // browser implementations, even if there is no "DOM loaded" per-se...
        // -- or --
        jQuery(function ($) {
            // Add .button() stuff here; using $.ready here might (??)
            // actually cause the browser to update the UI first...
            // ...but it will guarantee the DOM is completely loaded.
        })
    </script>
  </InlineScript>
</UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T22:53:30.717

这可以通过[jQuery **livequery**插件](http://docs.jquery.com/Plugins/livequery)来完成。

它可用于为当前在 dom 中的所有元素以及稍后添加的元素定义一个函数。这将解决您的大部分问题。

这是一个示例用法：

```
$("#btnFindSearch").livequery(function(){$(this).button();}) 
```

# c - 通过 C 中的指针为结构中的变量赋值

> ID：10272670
> 
> 赞同：0
> 
> 时间：2012-04-22T22:27:37.853
> 
> 标签：c, algorithm, struct

好的，所以我确定我缺少一个简单的修复程序，但是现在我的代码导致“A[i]->key = 0;”行出现段错误。Record* Item 部分对于程序来说是必需的，所以我需要让它为我正在处理的作业以这种方式工作，但是如果我确实更改它以使 Item 成为 Record 的非指针 typedef，那么我可以使用 A[i].key 没问题。我只需要朝正确的方向轻推，以便让standInput 正确地将值分配给指向记录的指针数组。谢谢！

项目.h：

```
#include "stdio.h"
#include "stdlib.h"

typedef int keyType;

struct Record
{
    keyType key;
    int other;
};
typedef struct Record* Item;

void standInput(Item *A, int n)
{
    int i, input;
    for(i = 0; i <= n-1; i++)
    {
        A[i]->key = 0;
        printf("%d ", A[i]->key);
    }
} 
```

主要的：

```
#include "stdio.h"
#include "stdlib.h"
#include "Item.h"

int main()
{
    int n;
    Item *A;
    printf("Enter a length for the array: ");
    scanf("%d", &n);
    A = (Item*)malloc(n * sizeof(Item));
    standInput(A, n);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:30:18.793

请注意，这`Item`已经是一个指针！

您必须为结构分配空间，而不是为指针分配空间：

```
A = (Item)malloc(n * sizeof(struct Record)); 
```

注意：如果指针的 typedef 让您感到困惑，请不要使用它；）

`A[i]->key`意味着这`A[i]`是一个指针，但你刚刚分配了一个数组，所以使用`A[i].key`.

注意：您必须相应地更改 A 的类型。

**第二种解决方案：**如果您希望 A[i] 成为指针，则必须首先为指针分配空间（就像现在一样），然后为每个指针（在循环中）为结构分配空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:32:19.327

中的值`A`都未初始化，但无论如何您都将它们用作`struct Record`指针。如果您想`A`继续持有指针（而不是直接持有结构），那么您需要为`A` *和*指向的每个项目分配空间`A`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T22:32:10.253

您的结构名称`Record`不是`Item`. 所以你应该使用`sizeof(struct Record)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T23:00:29.217

这样做：

```
int main()
{
    int n, i;
    Item *A;
    printf("Enter a length for the array: ");
    scanf("%d", &n);
    A = (Item*)malloc(n * sizeof(Item));
    for(i=0; i<n; i++){
        A[i] = (Item)malloc(sizeof(struct Record));
    }
    standInput(A, n);
    return 0;
} 
```

# model-view-controller - 模型内的codeigniter模型和控制器内的模型

> ID：10272673
> 
> 赞同：0
> 
> 时间：2012-04-22T22:28:05.097
> 
> 标签：model-view-controller, codeigniter, view, model, controller

我实际上有 3 个问题，但彼此相似：

*   我有一个模型叫`Permissions`. 我需要另一个模型，即。`Users`. 什么是用户`Permissions`内部的正确方法`Users`。
*   你明白我上面的意思，这很奇怪还是有另一种更好的方法来做到这一点。
*   该`Permissions`模型将在我的整个应用程序中全局使用，在其他模型或控制器中使用它的方法是什么（与第一个问题类似）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T22:44:56.877

一种方法是获取主 CodeIgniter 对象的全局变量，然后从该对象而不是 $this 加载模型：

```
class Permissions extends Model
{
    function MyPermissionsFunction()
    {
        $ci =& get_instance();
        $ci->load->model('users');

        $ci->users->MyUserFunction();
    }
} 
```

您还可以通过将模型组合成一个更大的模型来回避这个问题。将它们分开的主要原因是只加载您需要的模型；如果您几乎总是同时使用两者（这对于用户和权限来说是有意义的），那么采用这种方法可能会更好。

# yacc - Automake/autoconf 不适用于 lex/yacc

> ID：10272675
> 
> 赞同：2
> 
> 时间：2012-04-22T22:28:11.603
> 
> 标签：yacc, lex, autotools

我在使用 autoconf/automake 时遇到以下问题：我有几个为 flex/yacc 编写的文件。我在configure.ac中添加了以下内容：

```
AC_PROG_YACC
AC_PROG_LEX 
```

在 Makefile.am 我写了以下内容：

```
PARSER = parser.yy scanner.ll
AM_YFLAGS = -d

BUILT_SOURCES = parser.h

appname_SOURCES = analyze.cc (various other sources) \
  $(PARSER) 
```

当我尝试编译时，每个对象都被创建得很好，但是链接不起作用：

```
g++ (various libs) -o appname appname-analyze.o  (various other objects)
appname-scanner.o 
(yet more objects) appname-scanner.o (and still more objects) 
```

所以 automake 包含对象*两次*，这完全搞砸了构建并导致很多`multiple definition`错误。如果您能告诉我我做错了什么，或者向我展示一个成功处理 lex/yacc 文件的 automake 项目，我将不胜感激。

# c# - 运行时 WCF 基址

> ID：10272676
> 
> 赞同：0
> 
> 时间：2012-04-22T22:28:39.400
> 
> 标签：c#, wcf

如何在 C# 代码中获取当前运行的 WCF 服务的网址？例如，在函数内部的 Web 服务调用期间，我正在寻找“this”和当前正在执行/运行的服务的基地址。该服务将像“http://localhost:2342342/WebServiceName1.svc”一样运行，我想在运行时在代码中的服务内获取此地址。我之所以获得自动地址而不是硬编码地址，是因为当我将服务投入生产或移动服务时，我想要动态地址。我想在服务初始化期间使用此服务地址设置额外的值。

另一方面，是否有任何与 WCF 相关联的唯一 ID 和 guid 已经内置。例如，如果我有相同的服务在 2 个具有 Web 地址的单独服务器上运行，有没有办法为每个单独的服务获取和设置唯一 ID . 唯一的方法是通过服务的地址？相同的服务、多个服务器以及每个单独服务的不同数据处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:29:03.177

要知道 WCF 服务内 WCF 的当前地址，请使用以下命令：

```
Uri address = OperationContext.Current.IncomingMessageHeaders.To; 
```

# google-maps - Panoramio & Weather Layers zIndex 低于 Polygon Overlay Google Maps API V3

> ID：10272677
> 
> 赞同：0
> 
> 时间：2012-04-22T22:28:57.353
> 
> 标签：google-maps, google-weather-api

是否可以使 Panoramio Pictures 和 WeatherLayer 图标出现在多边形上方（zIndex 高于）多边形？

我有一张带有透明多边形叠加层的地图，当我将 Panoramio 或 WeatherLayers 添加到地图时，Panoramio 照片和天气图标会出现在多边形叠加层下方。

图片和天气图标可以在多边形下方看到，因为多边形是部分透明的，但用户无法与这些照片或图标交互，因为多边形位于它们之上。

下面的屏幕截图显示了一个示例：

![例子](../Images/47ad867932e156e313269e122fc796d4.png)

[您可以在此处](http://slimer.dyndns.info:84/map_example/map_layers_example.php)查看示例页面。

您可以添加和删除不同的覆盖/图层。我尝试将多边形的 zIndex 设置为负数，但它们总是出现在 Panoramio 和 WeatherLayer 图标上方。

[PanoramioLayer](https://developers.google.com/maps/documentation/javascript/reference#PanoramioLayer)和[PanoramioLayerOptions](https://developers.google.com/maps/documentation/javascript/reference#PanoramioLayerOptions) API参考没有提到 zIndex。WeatherLayer和[WeatherLayerOptions](https://developers.google.com/maps/documentation/javascript/reference#WeatherLayerOptions) API 参考也是[如此。](https://developers.google.com/maps/documentation/javascript/reference#WeatherLayer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:10:36.560

您需要为多边形设置选项： **可点击**：false

但是所有多边形的鼠标事件都不起作用

# xcode - 以编程方式“隐藏”测试广告

> ID：10272678
> 
> 赞同：0
> 
> 时间：2012-04-22T22:28:59.273
> 
> 标签：xcode, iad

有什么方法可以模拟正在卸载的 iAd（测试广告）？我想知道我的应用程序的其余部分在切换广告时是否正常运行，或者没有可显示的广告。

蒂亚！:) /伦帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:30:03.710

是的，打开飞行模式。当 iAd 兑现数据时，您可能需要重新启动设备。

# matlab - 用 x,y,z 点绘制曲面

> ID：10272682
> 
> 赞同：4
> 
> 时间：2012-04-22T22:29:36.000
> 
> 标签：matlab, plot

我有一个,的列表`x`，格式如下：`y``z`

```
 -0.2894    1.2835    0.5405
   -0.8171   -0.3034    0.1824
    2.7864    0.5506    0.0037 
```

我可以使用绘图`plot3(x,y,z, '*')`并且效果很好。

现在我想绘制一个表面，但是当我这样做时：

```
>> surf(x,y,z)
??? Error using ==> surf at 78
Z must be a matrix, not a scalar or vector. 
```

我应该怎么画？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T23:06:23.987

我建议您对 x,y 值进行 Delaunay 三角剖分，然后使用 z 作为曲面图的高度：

```
x = randn(100,1);
y = randn(100,1);
z = (exp(-x.^2-y.^2));
tri = delaunay(x,y);
trisurf(tri,x,y,z) 
```

![在此处输入图像描述](../Images/70903cc1e4e5fb46d93ea8db25a51049.png)

**编辑**

由于您的 Matlab 版本似乎有问题，这里有一个替代方案：用于`griddata`将您的数据插入到常规网格中，以便您可以`surf`用于绘图。

```
x = randn(100,1);
y = randn(100,1);
z = (exp(-x.^2-y.^2));
[xx,yy]=meshgrid(-2:0.1:2,-2:0.1:2);
zz = griddata(x,y,z,xx,yy);
dfig,surf(xx,yy,zz) 
```

![在此处输入图像描述](../Images/868550e7331b38938d65c8c3533691fa.png)

# c# - 用 # 而不是 ? 读取 URL 在里面

> ID：10272684
> 
> 赞同：1
> 
> 时间：2012-04-22T22:29:51.137
> 
> 标签：c#, asp.net, url, web

我正在使用 OAuth2，并且正在调用 Google API。调用完成后谷歌返回结果，我应该从查询参数中读取。现在，谷歌返回的那种 URL 很奇怪，它有锚点 # 在它应该有一个 ?

和 URL 看起来像

[http://localhost.contestfactory.com/enduser/#state=MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAw&access_token=ya29.AHES6ZTjWwx7hHO4WnmfQ_lwJSpATCqA_DUZCC_ZIjdyPWA96OS0EN0&token_type=Bearer&expires_in=3600](http://localhost.contestfactory.com/enduser/#state=MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAw&access_token=ya29.AHES6ZTjWwx7hHO4WnmfQ_lwJSpATCqA_DUZCC_ZIjdyPWA96OS0EN0&token_type=Bearer&expires_in=3600)

由于 URL 中的 #，我的 C# 代码无法读取超出 # 的内容。无论如何我可以在 C# 中处理这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T22:31:26.807

之后的部分`#`称为 URL 片段（或哈希）。

它永远不会发送到服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:34:06.577

你所说的看起来像哈希片段..它永远不会发送到服务器。你可以做什么而不是制作一个JS脚本来改变所有`"#" to "?"`这些方式它们将被视为查询字符串并将被发送到服务器

# python - Python 有 dir(obj) 和 help(obj)，在 Lua 中是否有等价物？

> ID：10272687
> 
> 赞同：3
> 
> 时间：2012-04-22T22:30:11.300
> 
> 标签：python, lua, introspection

对于任何不熟悉 Python 中这两种方法的人...

`dir`返回特定对象的方法/属性列表。

`help`返回一个对象[文档字符串](http://www.python.org/dev/peps/pep-0257/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:10:38.067

Lua 没有“文档字符串”的概念。

所有 Lua 对象都是表（或用户数据，但您不能从 Lua 代码中检查用户数据。在 Lua 5.1 中不行；在 5.2 中，如果创建用户数据的用户希望您这样做，您可以这样做）。因此，您可以只使用现有的表方法来迭代表的内容：

```
for k, v in pairs(obj) do
  --Do stuff with k(ey) and v(alue)
end 
```

请注意，这将调用元方法，因此表的*真实*内容是未知的。再说一次，如果创建该对象的人希望您拥有真实的内容，他就不会使用元方法来保护它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-05T12:20:04.700

让乐趣：

```
function dir(obj)
    for k, v in pairs(obj) do print(k) end
end 
```

这是 Lua 中类似的 python“dir”函数。

# htmlunit - PhpBB 论坛的测试

> ID：10272690
> 
> 赞同：2
> 
> 时间：2012-04-22T22:30:19.723
> 
> 标签：htmlunit

我正在 HTML 单元的帮助下测试论坛 PhpBB。我想在 PhpBB 论坛的主题之一中添加消息。我在 textarea 中输入消息并单击提交按钮，但新页面没有我的消息。似乎是什么问题？

```
final ArrayList<HtmlForm> formList=(ArrayList<HtmlForm>) page.getByXPath("//form[@id='postform']");  
final HtmlTextArea myMessage=formList.get(0).getTextAreaByName("message");
myMessage.type("text");
final HtmlSubmitInput submit_post = formList.get(0).getInputByName("post");

page=submit_post.click();

if (page.asText().contains("text")) {
  System.out.println("right");
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T21:42:46.693

解决此问题的一种方法是构建自定义 http post 请求。

使用 Fiddler 捕获流量，然后使用 HTMLUnit 进行复制。它应该如下所示

```
public Page postMessage() throws Exception
{
    URL url = new URL("YOURURL");
    WebRequest requestSettings = new WebRequest(url, HttpMethod.POST);

    requestSettings.setAdditionalHeader("Accept", "*/*");
    requestSettings.setAdditionalHeader("Content-Type", "application/x-www-form-urlencoded");
    requestSettings.setAdditionalHeader("Referer", "REFERER");
    requestSettings.setAdditionalHeader("Accept-Language", "en-US,en;q=0.8");
    requestSettings.setAdditionalHeader("Accept-Encoding", "gzip,deflate,sdch");

    requestSettings
            .setRequestBody("YOURPOSTREQUEST");

    Page page = webClient.getPage(requestSettings);

    return page;
} 
```

# ruby-on-rails - rails，如何在控制器中检索 :id 属性

> ID：10272692
> 
> 赞同：0
> 
> 时间：2012-04-22T22:30:40.043
> 
> 标签：ruby-on-rails, forms, controller

我试图创建一个简单的私人消息系统

我有一个嵌套路线

```
resources :users do
   resources :messages
end 
```

在我的用户显示页面上，我有...

```
 <%= form_for([current_user, @message])  do |f| %>
      <div class="field">
        <%= f.text_area :content, placeholder: "Send a private message..." %>
      </div>
      <%= f.submit "Post", class: "btn btn-large btn-primary" %>
    <% end %> 
```

当前用户可以向当前正在查看的用户发送私人消息。

在我的 message.rb 我有...

```
belongs_to :user 
```

在 user.rb 我有...

```
has_many :messages 
```

在我的用户控制器上显示我有的动作

```
def show
 @user = User.find(params[:id])
 @microposts = @user.microposts.paginate(page: params[:page])
 if user_signed_in?
    @message = current_user.messages.build(params[:messages])
 end

end 
```

当用户点击我的显示模板上的提交按钮时，它会转到我的消息创建操作，但是我无法获取我正在查看（或尝试发送给）的用户的 ID

我打印出我的消息变量，它说...

```
[#<Message id: nil, content: nil, user_id: 1, to_id: nil, created_at: nil, updated_at: nil>] 
```

:user_id 是当前用户（即我，id 为 1），但是我似乎无法获得 to_id（这是我刚刚查看的用户，假设他的 id 为 2）

有人可以告诉我如何找回它吗？我只能将 id 视为隐藏字段，但我听说这样做不安全。

帮助将不胜感激。谢谢

更新：@安德鲁

嗯实际上它很有趣，因为如果我这样做......

```
@message = current_user.messages.build(to_id: @user.id) 
```

我通过

```
<%= f.hidden_field :to_id, :value => @user.id %> 
```

我得到一个

```
Can't mass-assign protected attributes: to_id. 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:52:54.897

将 UserID 放在隐藏字段中没有任何问题，它在开始的 URL 中是可见的。

如果您`to_id`在显示操作中添加 并在表单中有一个隐藏字段，它将从`users#show`操作流入消息表单，然后在`messages#create`发布该表单时流入操作。

```
def show
 @user = User.find(params[:id])
 @microposts = @user.microposts.paginate(page: params[:page])
 if user_signed_in?
    @message = current_user.messages.build(to_id: @user.id)
 end

end 
```

请注意，show 操作没有收到任何参数 [:messages]，因为您没有发布到此。除非您的 URL 看起来像这样：`users/1?messages=foo`那么该参数值将始终为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:55:13.727

在您的显示页面上，放入一个隐藏字段。

```
<%= form_for([current_user, @message])  do |form| %>
  <%= form.hidden_field :to_id, :value => @user.id %> 
```

# lucene - 在 PyLucene 中使用 ShingleFilter 构建自定义分析器

> ID：10272697
> 
> 赞同：2
> 
> 时间：2012-04-22T22:31:44.897
> 
> 标签：lucene, pylucene

我对 Lucene 和 Pylucene 很陌生。当我使用 pylucene 编写自定义分析器以将文本标记为二元组时，这是一个问题。

分析器类的代码是：

```
class BiGramShingleAnalyzer(PythonAnalyzer):                                                                                                 
    def __init__(self, outputUnigrams=False):                                                                                               
        PythonAnalyzer.__init__(self)                                                                                                       
        self.outputUnigrams = outputUnigrams                                                                                                 

    def tokenStream(self, field, reader):                                                                                                   
        result = ShingleFilter(LowerCaseTokenizer(Version.LUCENE_35,reader))                                                                 
        result.setOutputUnigrams(self.outputUnigrams)                                                                                       
        #print 'result is', result                                                                                                            
        return result 
```

我在 LowerCaseTokeinizer 生成的 TokenStream 上使用了 ShingleFilter。当我直接调用 tokenStream 函数时，它可以正常工作：

```
str = ‘divide this sentence'
bi = BiGramShingleAnalyzer(False)
sf = bi.tokenStream('f', StringReader(str))
while sf.incrementToken():
    print sf
(divide this,startOffset=0,endOffset=11,positionIncrement=1,type=shingle)
(this sentence,startOffset=7,endOffset=20,positionIncrement=1,type=shingle) 
```

但是当我尝试使用此分析器构建查询解析器时，出现了问题：

```
parser = QueryParser(Version.LUCENE_35, 'f', bi)
query = parser.parse(str) 
```

在查询中什么都没有。

在 tokenStream 函数中添加 print 语句后，我发现当我调用 parser.parse(str) 时，tokenStream 中的 print 语句实际上被调用了 3 次（我的 str 变量中的 3 个单词）。在我看来，解析器对我传递给它的 str 进行了预处理，并在预处理结果上调用了 tokenStream 函数。

关于如何使分析器工作的任何想法，以便当我将它传递给查询解析器时，解析器可以将字符串解析为二元组？

提前致谢！

# asp.net - 在 ASP.NET 网站中使用 Ninject 3 进行依赖注入

> ID：10272698
> 
> 赞同：5
> 
> 时间：2012-04-22T22:31:54.380
> 
> 标签：asp.net, dependency-injection, ninject

[我尝试了如何在 asp.net Web 窗体上实现 Ninject 或 DI](https://stackoverflow.com/questions/4933695/how-can-i-implement-ninject-or-di-on-asp-net-web-forms/6121250#6121250)中找到的以下解决方案？（杰森的回答）

1.  创建一个新的 ASP.NET WebForms 项目
2.  使用 NuGet 添加 Ninject.Web 库（这也会关闭 Ninject.Web.Common 和 Ninject 库）
3.  在 App_Start / NinjectWebCommon.cs / RegisterServices 方法中注册您的自定义绑定
4.  在您的页面上使用属性注入

在 ASP.NET Web 应用程序中运行良好。

问题是我想在 ASP.NET**网站**而不是 Web 应用程序中使用 Ninject 进行 DI。

我在 NinjectWebCommon / RegisterServices 中注册了自定义绑定：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<ITestRepository>().To<TestRepository>();
} 
```

在网页中我注入它：

```
public partial class _Default : System.Web.UI.Page
{
    [Inject]
    public ITestRepository _repository { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
        System.Diagnostics.Trace.WriteLine(_repository.ExecuteOperation());
    }
} 
```

它总是抛出一个空引用异常，并且永远不会到达 NinjectWebCommon.cs 中的断点——这与 Web 应用程序不同。

为了让 Ninject 3 在网站上运行，还应该做些什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T22:42:41.047

我给你的第一个建议是...

不要使用 ASP.NET 网站。忘记他们的存在。不惜一切代价避免它们。它们是对过去时代的不合时宜的回归，只是由于遗留原因而仍然存在。

我的第二条建议是……

如果您坚持继续使用网站项目，请大量投资头痛药，因为您将需要它。

我的第三条建议是……

请参阅第一个建议。

我的第四条建议是……

如果你完全无法控制它是否是一个网站项目，那么就放弃使用 Ninject 或任何其他 DI 容器的想法。网站项目继承自一组不同于 Web 应用程序站点的基类。你不会让它以同样的方式工作，你可能会花费太多时间来让它适应。

编辑：

基本上，代码模型在网站和 Web 应用程序之间的工作方式非常不同。您只需看看网站应用程序没有名称空间，而 Web 应用程序应用程序有这个事实。这应该告诉你这些有多么不同。

我不完全确定激活过程在两者中是否相同。

然而，说了这么多。您的代码存在明显问题。您的页面派生自 System.Web.UI.Page 而不是 Ninject.Web.PageBase

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:00:12.007

根据您链接到的另一个问题，您需要您的页面继承自`Ninject.Web.PageBase`. 您的页面似乎继承自`System.Web.UI.Page`，它不知道如何注入您的依赖存储库。

# android - android中的显式和隐式活动调用有什么区别？

> ID：10272699
> 
> 赞同：39
> 
> 时间：2012-04-22T22:32:03.867
> 
> 标签：android, android-activity, android-implicit-intent, explicit-intent

android中的显式和隐式活动调用有什么区别？如果你用一个简单的例子来解释答案会很好。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-23T02:25:47.930

例如：

**隐式活动调用**

在意图过滤器中，您为您的活动创建操作，因此其他应用程序可以通过此操作调用您的活动，如下所示：

```
<activity android:name=".BrowserActivitiy" android:label="@string/app_name">
   <intent-filter>
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
      <data android:scheme="http"/> 
   </intent-filter>
</activity> 
```

调用隐式 Intent 的另一种方法如下：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.example.com"));
startActivity(intent); 
```

**显式活动调用**

您拨打电话，准确指明哪个活动类别：

```
Intent intent = new Intent(this, ActivityABC.class);
intent.putExtra("Value", "This value for ActivityABC");
startActivity(intent); 
```

希望这可以帮助您更多地了解 android 中的显式和隐式活动调用。

[您可以在此处](http://www.vogella.com/articles/AndroidIntent/article.html)获取有关 Android Intent 的更多详细信息

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-12-22T10:53:44.860

1.  显式意图用于调用特定组件。当您知道要启动哪个组件并且不想让用户自由控制要使用的组件时。例如，您有一个具有 2 个活动的应用程序。活动 A 和活动 B。您希望从活动 A 启动活动 B。在这种情况下，您定义了一个针对活动 B 的显式意图，然后使用它直接调用它。
2.  当您知道要做什么但不知道应该启动哪个组件时，可以使用隐式 Intent。或者，如果您想为用户提供在要使用的组件列表之间进行选择的选项。如果这些 Intent 被发送到 Android 系统，它会搜索为特定操作和数据类型注册的所有组件。如果只找到一个组件，Android 直接启动该组件。例如，您有一个使用相机拍照的应用程序。您的应用程序的功能之一是您可以让用户发送他拍摄的照片。你不知道用户有什么样的应用程序可以发送照片，如果用户有多个应用程序，你也想给用户一个选项来选择使用哪个外部应用程序。在这种情况下，您不会使用显式意图。

一个明确的意图总是传递给它的目标，不管它包含什么；不咨询过滤器。但是只有当它可以通过组件的过滤器之一时，才会将隐式意图传递给组件

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-22T05:57:31.030

每次我在任何一次采访中都对这些感到困惑。因此，我将其总结为这样，可能有助于有人记住这种差异。

**概括：**

在*隐式*意图中，用户*隐式地*告诉系统应该做什么，而不指定谁应该做**。**

在*Explicit* Intents 中，用户*明确地*告诉系统**WHOM**无论工作是什么都要被触发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-22T22:41:24.853

在此处查看意图解析

[http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

显式意图（活动）指的是特定的类，并且通常仅对您的包可用。隐式意图是指应用程序公开宣布它们可以处理某些类型的数据或可以提供特定服务（例如发送电子邮件）的意图过滤器。使用隐式意图，用户选择使用哪个活动（通常是包）来处理意图，或者如果设置了默认处理程序，则启动它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-22T09:22:52.953

## 什么时候用哪个？

**显式意图：**当您知道哪个组件可以处理您的请求时。因此，您在意图中**明确提到了该组件名称。**

```
Intent i = new Intent(context,DetailActivity.class);  // DetailActivity.class is the component name
startActivity(i); 
```

**隐含意图：**当您不知道哪个应用程序可以处理您的请求时，**您可以在意图中提及该操作**，并让操作系统决定哪些应用程序/s 适合您的任务。

示例：播放音乐

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setData(file);
startActivity(intent); 
```

### 操作系统如何决定？

当存在带有意图的隐式调用时，操作系统会执行该操作，然后使用 PackageManager 与所有应用程序的所有注册活动的所有意图过滤器匹配，然后将结果填充为列表。它被称为[意图解析](https://developer.android.com/guide/components/intents-filters.html#Resolution)
因此有可能您的设备中没有可用的应用程序可以处理您的请求。在这种情况下，您将获得 NullPointer 异常。

> 因此，调用隐式意图的更安全方法是

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(file);
if (intent.resolveActivity(getPackageManager()) != null) {
    startActivity(intent);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-30T07:56:47.057

有两种类型的意图：

*   **明确意图：**

    当**我们直接在意图中显式指定并传递目标组件名称**时创建一个 Intent 对象时，它是一个显式意图。

*   **隐含意图：**

    在这种情况下，我们将评估已注册组件的任务（注册通常使用我们稍后将介绍的意图过滤器完成）基于意图数据和预期操作（如发送电子邮件、捕获照片、固定位置）委托给 Android我们经过的地图等）。因此，**Android 会自动从同一个应用程序或其他可以处理意图消息/作业的应用程序启动组件。**这种情况下的想法是，假设我们必须在地图上固定一个位置，因为我们不必编写自己的活动来处理它。相反，只需将位置数据传递给可以代表我们的应用程序完成工作的 Google 地图等应用程序。

来源：[http ://codetheory.in/android-intents/](http://codetheory.in/android-intents/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-31T09:59:08.077

**隐式意图未指定组件。**Intent 提供了一个组件的信息

```
Intent intent=new Intent(Intent.ACTION_VIEW);  
intent.setData(Uri.parse("http://www.google.com"));
startActivity(intent); 
```

而 **显式意图指定组件。**意图提供有关类的信息。

```
 Intent i = new Intent(this, ClassB.class);  
 startActivity(i); 
```

# facebook-graph-api - 无法通过 Facebook PHP SDK 进行身份验证

> ID：10272704
> 
> 赞同：1
> 
> 时间：2012-04-22T22:32:28.400
> 
> 标签：facebook-graph-api

我目前强制用户在每次与我的网站开始新会话时通过 Facebook 进行身份验证。这意味着每次重新启动浏览器时，我都会强制用户点击通过 $facebook->getLoginURL() 获得的 url。

当用户完成登录过程时，他们将被重定向到我的登录脚本：

```
{checks for CSRF token and error status...}

$facebook = new Facebook(array(
    'appId'  => '{my app id}',
    'secret' => '{my app secret}',
    'cookie' => true
));

//Get user info
$user = $facebook->getUser();
if($user)
  echo 'user found';
else
  echo 'no user!'; 
```

$user 总是返回 0；我得到了预期的“状态”变量，并且 API 响应中没有错误。此外，我看到我的个人资料中存在相关的应用权限。但是，$facebook->getUser() 仍然返回 0。是否有一些我遗漏的中间步骤（我是否应该对用户的身份验证令牌做任何事情？）

我知道这个问题有很多线程，但还没有找到任何解决方案。另外，我认为这是一个非常基本的示例，因此我希望这里的答案对将来处理该问题的用户更有用。谢谢！

# php - 使用'and'的PHP三元语句

> ID：10272705
> 
> 赞同：5
> 
> 时间：2012-04-22T22:32:35.277
> 
> 标签：php

好的，所以我刚刚意识到 PHP 的一些奇怪行为，并且想知道为什么会发生这种情况。所以运行这段代码：

```
 var_dump( true and false ? 'one' : 'two' ); 
```

输出

```
boolean true 
```

而不是您所期望的“两个”......问题似乎是使用“和”。

跑步：

```
var_dump( true && false ? 'one' : 'two' ); 
```

输出

```
string 'two' (length=3) 
```

正如预期的那样。为什么使用 'and' 而不是 '&&' 会导致这种奇怪的行为？他们不应该是一样的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:34:37.723

那是因为[优先级](http://php.net/manual/en/language.operators.precedence.php)`?:`高于，但低于。`and``&&`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T22:34:39.150

这是因为`and`优先级低于`&&`and `?:`。

# c++ - 使用英特尔编译器从 C++ 调用 Fortran 子例程

> ID：10272714
> 
> 赞同：2
> 
> 时间：2012-04-22T22:33:27.127
> 
> 标签：c++, fortran

我需要在 C++ 代码中调用 Fortran 程序。该程序使用 Intel 编译器进行编译 Fortran 程序跨越多个文件，过去被称为 PROGRAM。我试图做的是将主程序调用更改为名为 SIMULATOR 的子程序。然后，我将每个 Fortran 源代码编译为目标文件，而不将它们全部放入可执行文件中。然后，我准备用一个简单的 C++ 包装器将所有 Fortran 对象链接起来进行测试。代码和生成文件如下。

包装器.cpp：

```
#include <iostream.h>

using namespace std;

extern "C"{
void simulator_();
}

int main()
{
    cout << "starting..." << endl;
    simulator_();
    cout << "success!" << endl;
    return 0;
} 
```

生成文件：

```
all:
    ifort -nologo -O3 -cxxlib -nofor-main -gen-interfaces -traceback -check bounds -save -static -threads -c modules.for
    ifort -nologo -O3 -cxxlib -nofor-main -gen-interfaces -traceback -check bounds -save -static -threads -c Finterp.for
--a few more sources go here--
    ifort -nologo -O3 -cxxlib -nofor-main -gen-interfaces -traceback -check bounds -save -static -threads -c Simsys.for
    icpc -c wrapper.cpp
    icpc -o cppprogram *.o 
```

这是编译器的（部分）输出。Simsys 是包含我试图调用的模拟器函数的文件：

```
Simsys.o: In function `simsys_':
Simsys.for:(.text+0xed4): undefined reference to `for_write_int_lis'
Simsys.for:(.text+0xeef): undefined reference to `for_adjustl'
Simsys.for:(.text+0xf38): undefined reference to `for_trim'
Simsys.for:(.text+0xf83): undefined reference to `for_concat'
Simsys.for:(.text+0x1071): undefined reference to `for_open'
Simsys.for:(.text+0x131d): undefined reference to `for_emit_diagnostic'
Simsys.o:Simsys.for:(.text+0x1670): more undefined references to `for_emit_diagnostic' follow 
```

现在根据一个有类似问题的人（http://www.velocityreviews.com/forums/t288905-intel-compiler-8-1-c-calling-fortran-routine.html），我好像失踪了一些图书馆。那个人写道，他们包含了一个特定的库，它帮助了他们，但我不知道如何开始寻找我需要的库。我也不知道如何在我正在使用的 HPC 系统上找到英特尔编译器的路径，所以我希望能在正确的方向上提供一些帮助。在我尝试将它与 C++ 链接之前，我不需要做任何特别的事情来编译 fortran 程序，所以我有点想从这里去哪里。

顺便说一句，Fortran 程序不需要任何输入，它都是独立的。

提前感谢您的帮助和见解！

编辑：

ifort 给了我：/usr/global/intel/Compiler/11.1/073/bin/intel64/ifort

尝试使用 ifort 完成最终链接后，出现以下错误：

ld：找不到-lunwind

我找到了关于 unwind 的文档（https://savannah.nongnu.org/news/?group=libunwind），但我没有尝试自己调用这个库，也不知道这是从哪里来的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T22:58:12.650

简单的方法是使用 ifort 进行链接，以获取 Fortran 运行时库。一些说明位于[http://www.ualberta.ca/AICT/RESEARCH/LinuxClusters/doc/ifc91/main_for/mergedProjects/bldaps_for/pgsclmix.htm](http://www.ualberta.ca/AICT/RESEARCH/LinuxClusters/doc/ifc91/main_for/mergedProjects/bldaps_for/pgsclmix.htm)

如果您在 Fortran 端使用 ISO_C_Binding，您可以控制例程的名称并去掉下划线。微不足道...如果您开始在 C/C++ 和 Fortran 之间添加参数，ISO C 绑定将变得更加有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T23:02:57.277

编译/链接 fortran 和 C++ 是完全可行的，但有一些细节需要解决。英特尔有帮助地在线提供他们的文档：http: [//software.intel.com/en-us/articles/intel-fortran-composer-xe-documentation/](http://software.intel.com/en-us/articles/intel-fortran-composer-xe-documentation/)

请参阅英特尔 Fortran 编译器用户/参考指南，特别是“编译器参考”/“混合语言编程”/“Fortran/C 混合语言程序”部分。“编译器参考”/“库”部分也很有用。

最后，您需要在链接行中包含一些 fortran 静态库，并且您可能必须在您的应用程序中重新分发一些 fortran 运行时 dll。

# ruby-on-rails-3 - 文件类型的客户端验证

> ID：10272717
> 
> 赞同：1
> 
> 时间：2012-04-22T22:34:01.393
> 
> 标签：ruby-on-rails-3, file, client-side-validation

我有一个表格，我想允许用户只上传一种类型的文件。我使用**客户端验证**，但文件类型验证没有我预期的行为。我尝试使用以下两种方式验证文件类型：

```
 validates :doc_type, :allow_blank => true, :format => {:with => /\A.*\.(pdf|PDF)\z/, :message => 'must be PDF file.'} 
```

并且

```
validates_attachment_content_type :doc_type, :content_type => { :content_type => "application/pdf" } 
```

但是关于错误文件类型的错误不是通过**客户端验证**显示的，而是像往常一样的验证错误。

是否存在通过客户端验证显示验证错误的任何方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:24:21.093

我建议先在客户端使用 jquery validate 插件，然后再提交到后端。这允许您在前端验证文件类型。

[http://docs.jquery.com/Plugins/Validation/Methods/accept](http://docs.jquery.com/Plugins/Validation/Methods/accept)

这是一个示例，需要“字段”并以“.xls”或“.csv”结尾。

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      accept: "xls|csv"
    }
  }
}); 
```

使用 jquery 验证插件的好处在于它还可以方便地进行其他客户端验证，例如电子邮件、密码等。

# java - 异常 NoClassDefFoundError

> ID：10272720
> 
> 赞同：1
> 
> 时间：2012-04-22T22:34:13.750
> 
> 标签：java, jar, jakarta-mail

我一直在开发一个邮件应用程序，我想将它压缩成一个 .jar 文件，以便用户可以双击运行。我正在使用 javamail API。在 eclipse 中，我“添加了外部 jar”并添加了 mail.jar 文件，并且在 eclipse 中开发时，我能够使用 mail.jar 中的所有类。现在我想将它们打包成一个 jar 文件，所以我在命令行中使用了 -jar 工具，并指定了一个清单文件和我所有的类文件，但是当我运行 jar 时，我得到了这个异常：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: javax/mail/Multipart
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getMethod0(Unknown Source)
    at java.lang.Class.getMethod(Unknown Source)
    at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
    at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
    Caused by: java.lang.ClassNotFoundException: javax.mail.Multipart
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 6 more 
```

我知道这与 mail.jar 不在 jar 文件中有关，我尝试将 mail.jar 文件包含到我的应用程序中，但没有任何效果。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T22:43:43.540

How do you run your application? If you're running your application through command line, you should add the required jars separated with semi-colon, into your application's classpath as such :

> java -cp mail.jar;other_jars your-main-class

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:30:47.700

如果您想要一个 jar 文件中的所有内容，以便双击该 jar 文件并运行应用程序，您有两个主要选择：

1.  从您想要包含的 jar 文件中提取**所有内容，将它们与您的应用程序合并，然后使用合并的内容创建一个新的 jar 文件。**不要忘记除了 .class 文件之外还有其他重要的文件。我不是 Eclipse 专家，但我知道 Eclipse 执行此操作的某些方式仅包含 .class 文件，这将不起作用。

2.  使用诸如[“onejar”工具](http://one-jar.sourceforge.net/)之类的工具，该工具允许您将 jar 文件“嵌套”在 jar 文件中。

祝你好运！

# c++ - 具有多个值的 C++ 堆栈

> ID：10272725
> 
> 赞同：1
> 
> 时间：2012-04-22T22:34:50.717
> 
> 标签：c++, templates, stack

我在下面有一些代码。这段代码是一个基本的推送/弹出堆栈类，我创建它作为模板，使某人能够推送/弹出堆栈。我有一个家庭作业，我现在要做的是创建一个具有多个值的堆栈。

所以我希望能够创建一个基本上可以发送三个整数的堆栈，并且我也可以在其中推送/弹出这些整数。我正在寻找的是关于这应该如何工作的理论，我并不是想找人为我做功课。

场景是我们正在处理零件。所以用户将输入序列号（int），制造日期（int）和lotnum（int）。所以我的问题是：

1.  当我“弹出”该值时，我应该尝试在弹出期间发送所有三个值还是以另一种方式处理？
2.  我应该尝试使用类或其他结构之类的结构创建一个新类吗？

    ```
    /****************************************************************************
    Inventory class.

    Chad Peppers

    This class creates a object for stacking nodes

    In addition, there should be member functions to perform the following 
    operations:
    - Push to the stack
    - Pop to the stack
    - Function to check if empty

    ****************************************************************************/
    // Specification file for the DynIntStack class

    template <class T>
    class Inventory
    {
    private:
       // Structure for stack nodes
       struct StackNode
       {
          T value;        // Value in the node
          StackNode *next;  // Pointer to the next node
       };

       StackNode *top;      // Pointer to the stack top

    public:
       // Constructor
       Inventory()
          {  top = NULL; }

       // Destructor
       ~Inventory();

       // Stack operations
       void push(T);
       void pop(T &);
       bool isEmpty();
    }; 

    /*************************************************************************
    Basic class constructor.

    Input Parameters:  Information to build the  stack

    Return Type:  void

    *************************************************************************/

    template<class T>
    Inventory<T>::~Inventory()
    {
       StackNode *nodePtr, *nextNode;

       // Position nodePtr at the top of the stack.
       nodePtr = top;

       // Traverse the list deleting each node.
       while (nodePtr != NULL)
       {
          nextNode = nodePtr->next;
          delete nodePtr;
          nodePtr = nextNode;
       }
    }

    /*************************************************************************
    Function to push an item in the stack

    Input Parameters:  T

    Return Type:  void

    *************************************************************************/

    template<class T>
    void Inventory<T>::push(T num)
    {
       StackNode *newNode; // Pointer to a new node

       // Allocate a new node and store num there.
       newNode = new StackNode;
       newNode->value = num;

       // If there are no nodes in the list
       // make newNode the first node.
       if (isEmpty())
       {
          top = newNode;
          newNode->next = NULL;
       }
       else  // Otherwise, insert NewNode before top.
       {
          newNode->next = top;
          top = newNode;
       }
    }

    /*************************************************************************
    Function to pop an item in the stack

    Input Parameters:  T

    Return Type:  void

    *************************************************************************/
    template<class T>
    void Inventory<T>::pop(T &num)
    {
       StackNode *temp; // Temporary pointer

       // First make sure the stack isn't empty.
       if (isEmpty())
       {
          cout << "The stack is empty.\n";
       }
       else  // pop value off top of stack
       {
          num = top->value;
          temp = top->next;
          delete top;
          top = temp;
       }
    }

    /*************************************************************************
    Basic class deconstructor.

    Input Parameters:  None

    Return Type:  void

    *************************************************************************/
    template<class T>
    bool Inventory<T>::isEmpty()
    {
       bool status;

       if (!top)
          status = true;
       else
          status = false;

       return status;
    } 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:52:52.517

您可以创建一个结构，它是 3 个 int 值的聚合，然后在这些行上为该结构实例化模板 Inventory

```
#include "Inventory.h"
//create an aggregate structure
struct ProductData {
   int serial_num;
   int manufacture_date;
   int lot_num;
}

//instantiate Inventory for ProductData

Inventory<ProductData> stack; 
```

# python - 任何可以在 python/nltk 中将阿拉伯语翻译成英语的模块？

> ID：10272726
> 
> 赞同：3
> 
> 时间：2012-04-22T22:34:53.860
> 
> 标签：python, nltk

是否有任何模块可用于在 Python/NLTK 中将阿拉伯语翻译成英语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:14:47.700

您最好查看一些在线翻译 API，例如[Google Translate API](https://developers.google.com/translate/)。我认为[SysTRAN](http://www.systran.co.uk/)也提供 API，但我不确定它们是否支持阿拉伯语。

Google 的 API 支持[Python 的绑定](http://code.google.com/p/google-api-python-client/)。

无论哪种方式，如果有一个独立的解决方案，它可能不会很好并且很快就会过时。

# javascript - 代码无法在 jsFiddle 之外工作

> ID：10272728
> 
> 赞同：-1
> 
> 时间：2012-04-22T22:34:55.123
> 
> 标签：javascript, jquery, html, dreamweaver, jsfiddle

我的目标是制作一个包含交互式视频的网页，在这里搜索时，我发现了一个指向[适合我需要的 jsFiddle](http://jsfiddle.net/trpeters1/EyZdy/11/)的链接。

由于代码在 jsFiddle 上运行良好，因此当我尝试将其复制到 DreamWeaver 时它崩溃了（似乎 JavaScript 已停止工作）。

我把它们放在一起：

```
<html>
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="sgrub.js"></script>
    <script>
        $('#video_1, #video_2').hide();

        $('.icon_1').click(function() {
            $('#video_2').fadeOut(function() {
                $('#video_1').fadeIn();
            });
        });

        $('.icon_2').click(function() {
            $('#video_1').fadeOut(function() {
                $('#video_2').fadeIn();
            });
        });

        $('.icon_1').click(function() {

            $('.video_2').get(0).pause();
            $('.video_2').get(0).currentTime = 0;
            $('.video_1').get(0).play();
        });

        $('.icon_2').click(function() {
            $('.video_1').get(0).pause();
            $('.video_1').get(0).currentTime = 0;
            $('.video_2').get(0).play();
        });

    </script>
    <head></head>
    <body>
        <div class="icon_1" id="mediaplayer">
            cadillac
        </div>
        <div class="icon_2" id="mediaplayer2">
            nike
        </div>
        <div id="video_1">
            <video class="video_1" width="50%" height="50%" controls="controls"
            poster="http://www.birds.com/wp-content/uploads/home/bird.jpg">
                <source src="http://video-js.zencoder.com/oceans-clip.mp4"
                type="video/mp4" />
            </video>
        </div>
        <div id="video_2">
            <video class="video_2" width="50%" height="50%" controls="controls"
            poster="http://www.birds.com/wp-content/uploads/home/bird.jpg">
                <source src="images/01.mp4" type="video/mp4" />
            </video>
        </div>
    </body>
</html> 
```

我尝试将 JavaScript 包装在 jQuery DOM 就绪调用中，但无济于事：

```
$(document).ready(function() {
    // The JavaScript here
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T22:38:22.473

您的 jQuery 代码在 DOM 准备好之前运行，因此您的 jQuery 代码在页面中找不到任何对象，因此它们不会做任何事情。您应该在加载 DOM 项目后将其定位在正文的末尾，或者使用 jQuery(document).ready() 让您的代码等待 DOM 准备好。

您的 jsFiddle 设置为仅在加载 DOM 后运行您的代码，这可能就是它在 jsFiddle 中工作的原因。

将您的代码更改为：

```
<script>
$(document).ready(function() {

$('#video_1, #video_2').hide();

      $('.icon_1').click(function(){
            $('#video_2').fadeOut(function(){
            $('#video_1').fadeIn();
            });
      });

      $('.icon_2').click(function(){
            $('#video_1').fadeOut(function(){
            $('#video_2').fadeIn();
            });
        });

$('.icon_1').click(function(){

            $('.video_2').get(0).pause();
            $('.video_2').get(0).currentTime = 0;
            $('.video_1').get(0).play();
        });

$('.icon_2').click(function(){
            $('.video_1').get(0).pause();
            $('.video_1').get(0).currentTime = 0;
            $('.video_2').get(0).play();
        });
});
</script> 
```

您可能还想修复脚本标签的位置。它们应该在`<head>`标签内或`<body>`标签内。你没有它们（在`<head>`标签之前）。大多数浏览器可能会容忍，但在技术上不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:38:31.950

在 html 之后移动头部

所以看起来像

```
<html>
<head>
<script...etc.. 
```

# javascript - 使 CSS 旋转中的过渡转最短距离

> ID：10272730
> 
> 赞同：1
> 
> 时间：2012-04-22T22:35:37.400
> 
> 标签：javascript, css

我有一个我旋转的大轮子。我使用 CSS 过渡使它的运动看起来不错。我希望能够用 JavaScript 任意设置它的角度。

我遇到的问题是，如果角度为零，并且我想将其转至 270，它将一直顺时针转至 270。我希望它“聪明”并且知道转起来更短逆时针90度。

因此，除了使用 JavaScript 计算正确的旋转（在我的情况下这样做的复杂性令人望而却步）之外，还有什么方法可以让它“聪明”地转动？

编辑：我想我以前见过类似的东西，内置在 CSS 中的东西，但我似乎无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:01:25.053

正如 Daniel 评论的那样，似乎唯一的方法是使用 JavaScript：

> 我只能想到一种方法来解决这个问题。并且是做一些JavaScript计算。这应该说，如果值超过 180，它应该将值减去 180 并且？> 然后将其减去 0。然后你会得到负值。

# asp.net-mvc - Ajax.ActionLink，从控制器获取数据或错误消息？

> ID：10272733
> 
> 赞同：2
> 
> 时间：2012-04-22T22:36:37.027
> 
> 标签：asp.net-mvc, asp.net-ajax, actionlink

这是我要更新的地方：

```
<div style="text-align: center;" id="vote_count">@Html.DisplayFor(q => q.VoteCount)</div> 
```

这是我的actionLink：

```
@Ajax.ActionLink("Upvote", "Upvote", "Author", new { QuestionID = Model.QuestionID, @class = "upvote" },
new AjaxOptions
{
     InsertionMode = InsertionMode.Replace,
     UpdateTargetId = "vote_count",
     OnBegin = "onBegin",
     OnComplete = "onComplete",
     OnSuccess = "onSuccess",
     OnFailure = "onFailure"
}) 
```

这是我的控制器之一：

```
public int Upvote(Guid QuestionID)
{
    if ()
    {
        //I want to send error message
    }
    else 
    {
        //I want to send an integer
    }
} 
```

我的问题是：我想向我的视图页面发送错误消息或整数来显示它。我该怎么做？根据您推荐的建议，我可以更改所有代码。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T06:13:15.873

```
public ActionResult Upvote(Guid QuestionID)
{
    if (...)
    {
        return Content("some error message");
    }
    else 
    {
        return Content("5 votes");
    }
} 
```

您在内容结果中返回的任何文本都将插入到 div 中。

另一种可能性是使用 JSON：

```
public ActionResult Upvote(Guid QuestionID)
{
    if (...)
    {
        return Json(new { error = "some error message" }, JsonRequestBehavior.AllowGet);
    }
    else 
    {
        return Json(new { votes = 5 }, JsonRequestBehavior.AllowGet);
    }
} 
```

接着：

```
@Ajax.ActionLink("Upvote", "Upvote", "Author", new { QuestionID = Model.QuestionID, @class = "upvote" },
new AjaxOptions
{
     OnSuccess = "onSuccess"
}) 
```

最后在 onSuccess 回调中：

```
function onSuccess(result) {
    if (result.error) {
        alert(result.error);
    } else {
        $('#vote_count').html(result.votes);   
    }
} 
```

# c# - 使消息框显示变量

> ID：10272740
> 
> 赞同：8
> 
> 时间：2012-04-22T22:38:31.083
> 
> 标签：c#, variables, messagebox

我想`MessageBox`显示一个`int`变量，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T22:39:29.383

您想使用[MessageBox.Show()](http://msdn.microsoft.com/en-us/library/ms598674%28v=vs.95%29.aspx)方法

```
int num = 0;
MessageBox.Show(num.ToString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-15T11:34:28.153

对消息框使用字符串格式：

```
int courseId = 0;

DialogResult result = MessageBox.Show(string.Format("Print Course No {0} ?", courseId), "Print Confirmation", MessageBoxButtons.YesNo, MessageBoxIcon.Question); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:44:28.473

jb 的回答是正确的，如果您需要更多信息，MSDN 的完整文档位于：http: [//msdn.microsoft.com/en-us/library/aa984357 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984357(v=vs.71).aspx)

对于简单的库问题，MSDN 几乎总是有出色的、易于理解的文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:48:27.723

这真的很容易。不要混淆并写`int test = 1;`, then `MessageBox.Show("test:" + 1)`，因为如果`test`' 的值发生变化，那只会打印`1`而不是`test`' 的新值`2`。

例子：

```
int test = 1;
test = test + 1;
MessageBox.Show(test); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-11T15:38:07.717

实现这一点很容易，请参见以下示例：

```
int a=1;
MessageBox.Show(a+""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-09T08:59:44.080

这里：int test = 0; messagebox.show(Convert.ToString(test));

# javascript - 将用户限制为一个矩形 google maps api

> ID：10272742
> 
> 赞同：2
> 
> 时间：2012-04-22T22:38:32.947
> 
> 标签：javascript, google-maps, spatial

只是想知道是否可以使用谷歌地图 api 中的谷歌地图绘图管理器将用户限制为仅绘制一个矩形。理想情况下，用户将绘制矩形，应用程序将自动切换到平移工具，该工具将允许用户拖动矩形的手柄并编辑其形状。矩形工具将变灰，并且在用户单击重置地图按钮之前不会再次可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:34:26.060

是的，这是可能的。您将使用 API 为 的事件注册一个事件侦听`DrawingManager`器`rectanglecomplete`。一旦该事件触发，您可以通过`DrawingManagerOptions`（特别是`drawingControl`属性）禁用控件。`drawingControl`当用户单击重置按钮时，您可以通过将属性切换为 true 来轻松地重新启用该工具。

此处的文档：

[http://goo.gl/8zl7r](http://goo.gl/8zl7r)

# c++ - memset 将 -1 放入我的数组而不是我指定的值，这是怎么回事？

> ID：10272743
> 
> 赞同：2
> 
> 时间：2012-04-22T22:38:51.193
> 
> 标签：c++, memset

```
 int * best = new int[numNodes];
memset(best,numeric_limits<int>::max()/2,numNodes*sizeof(int));
    int test = numeric_limits<int>::max()/2; 
```

打印出数组给了我一个全-1的数组。打印出 int 'test' 给了我正确的值 '1073741823'

我包括'cstring' 以使用memset。这是我关注的文档： [http ://www.cplusplus.com/reference/clibrary/cstring/memset/](http://www.cplusplus.com/reference/clibrary/cstring/memset/)

为什么我会得到这个结果？我敢肯定这可能是显而易见的，我只是没有看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:41:41.110

memset 用无符号字符填充内存：

```
void *memset(void *DST, int C, size_t LENGTH);
   This  function converts the argument C into an unsigned char and fills the
   first LENGTH characters of the array pointed to by DST to the value. 
```

# php - 将用户送回推荐页面

> ID：10272746
> 
> 赞同：7
> 
> 时间：2012-04-22T22:39:53.167
> 
> 标签：php, redirect

用户成功登录后，我正在努力设置重定向。

登录页面应将用户重定向到他们成功登录后被拒绝访问的页面。

例如，如果用户在登录（无会话）之前单击“我的帐户”，那么他们将成功重定向到登录页面，但是一旦他们登录，我如何将他们发送回“我的帐户”页面？

我尝试过的方法包括`$_SESSION['HTTP_REFERER]`.

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T22:40:43.320

使用[`$_SERVER['HTTP_REFERER']`](http://php.net/manual/en/reserved.variables.server.php)是危险的，因为如果用户在尝试登录时收到错误（例如密码错误），引荐来源将是同一个登录页面。在将用户重定向到登录页面之前，您应该将返回 URL 存储在会话变量中，然后在他们成功登录后，将它们重定向到存储的返回 URL。

例如，假设你需要保护`page.php`，你可以在文件的开头有这样的东西：

```
if (empty($_SESSION['user'])) {
    $_SESSION['backURL'] = $_SERVER['REQUEST_URI'];
    header('Location: login.php');
    exit;
} 
```

然后，在用户成功登录后，您可以填充`$_SESSION['user']`变量，然后重定向到您存储的 URL，然后将他发送到登录页面（或者如果碰巧您没有存储任何返回 URL，则重定向到站点的根目录无论出于何种原因）：

```
$backURL = empty($_SESSION['backURL']) ? '/' : $_SESSION['backURL'];
unset($_SESSION['backURL']);
header('Location: ' . $backURL);
exit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T22:41:37.983

试试这个：

```
<?php
  header("Location: " . $_SERVER["HTTP_REFERER"]);
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T22:45:49.017

让进行重定向的页面设置一个会话变量，即该页面的 URL：

```
session_start();
if (!$logged_id)
{
    $_SESSION['redirect_url'] = $_SERVER['PHP_SELF']; 
    header('Location: login.php');
    exit;
} 
```

然后在成功登录后将它们重定向到该 URL：

```
session_start();

/* Login code goes here */

$redirect_url = (isset($_SESSION['redirect_url'])) ? $_SESSION['redirect_url'] : '/';
unset($_SESSION['redirect_url']);
header("Location: $redirect_url", true. 303);
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T22:43:36.383

```
header("Location: " . $_SERVER["HTTP_REFERER"]); 
```

会这样做，但请注意：

在发送自定义标头之前，您不能输出（`echo`、、等）任何内容。`print_r`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T22:47:49.487

您应该记住变量中的上次访问页面`$_SESSION["last_page"]`（不包括登录页面）。用户成功登录后，获取变量的值并将用户重定向到他以前的位置。

您不能使用引荐来源网址。例如，如果用户第一次尝试登录失败，则在第二次尝试中，他的推荐人将是登录页面。

另一种方法是使用 ajax 对用户进行身份验证，而无需单独的登录页面。如果登录成功，您可以简单地使用 javascript 刷新页面。

# ruby - 如何正确覆盖具有未知数量参数的方法？

> ID：10272750
> 
> 赞同：4
> 
> 时间：2012-04-22T22:40:35.550
> 
> 标签：ruby

我正在做的是：

```
class Foo
  alias_method :__bar__,:bar
  def bar(*arg)
    #do something
    __bar__(*arg)
  end
end 
```

这是正确的方法吗？

或者最好弄清楚原始方法有多少必需的、可选的、块参数，并编写完全相同数量的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:46:57.707

使用 slurpy arg 是正确的方法，但您还应该处理任何块参数：

```
class Foo
  alias_method :__bar__,:bar
  def bar(*arg, &block)
    #do something
    __bar__(*arg, &block)
  end
end 
```

# ios - 从 NSObject 调用 UIViewController 中的方法？

> ID：10272771
> 
> 赞同：0
> 
> 时间：2012-04-22T22:42:49.370
> 
> 标签：ios, cocoa-touch, storyboard, xcode4.3, pass-data

我是 iOS 开发的新手，所以请多多包涵。假设我在 UIViewController 中有一个基本方法，它只 NSLogs 单词“hi”。我将如何从 NSObject 类中调用此方法？

从 ViewController 调用 NSObject 类中的方法很容易，但它似乎不能双向工作。

我一直在使用下面的代码从视图控制器的 NSObject 类中调用方法。

```
 SecondClass *secondClass = [[SecondClass alloc]init];
 [secondClass displayTheNSLog]; 
```

但是，如果我反转此代码，以便“SecondClass”将成为视图控制器，则该方法不会被调用。

我正在使用 Xcode 4.3、ARC 和情节提要。

- 感谢所有的帮助！

-碎纸机2794

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:11:18.247

这里有几个选项：

1.  您是否在视图控制器 .h 文件中声明了 displayTheNSLog 方法？为了让其他类知道您添加到视图控制器类的方法，您需要这样做：

    -（无效）显示TheNSLog；

.h 界面中的某处。

1.  您确定您在 nsobject 子类中调用视图控制器方法的方法正在被 iOS 系统调用吗？如果没有尝试在您的视图控制器类中创建对象并调用包含对视图控制器 displayTheNSLog 方法的调用的对象上的方法。

# javascript - 在第一个空格出现时拆分字符串

> ID：10272773
> 
> 赞同：182
> 
> 时间：2012-04-22T22:42:51.907
> 
> 标签：javascript, regex, string

我没有得到优化的正则表达式，它根据第一个空格出现将我拆分为字符串：

```
var str="72 tocirah sneab"; 
```

我需要得到：

```
[
    "72",
    "tocirah sneab",
] 
```

* * *

## 回答 #1

> 赞同：383
> 
> 时间：2012-04-22T22:50:38.707

如果您只关心空格字符（而不是制表符或其他空白字符）并且只关心第一个空格之前的所有内容以及第一个空格之后的所有内容，那么您可以在没有这样的正则表达式的情况下执行此操作：

```
str.substring(0, str.indexOf(' ')); // "72"
str.substring(str.indexOf(' ') + 1); // "tocirah sneab" 
```

请注意，如果根本没有空格，那么第一行将返回一个空字符串，第二行将返回整个字符串。确保这是您在那种情况下想要的行为（或者这种情况不会出现）。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-04-22T22:51:33.513

Javascript 不支持lookbehinds，所以`split`是不可能的。`match`作品：

```
str.match(/^(\S+)\s(.*)/).slice(1) 
```

另一个技巧：

```
str.replace(/\s+/, '\x01').split('\x01') 
```

怎么样：

```
[str.replace(/\s.*/, ''), str.replace(/\S+\s/, '')] 
```

那么为何不

```
reverse = function (s) { return s.split('').reverse().join('') }
reverse(str).split(/\s(?=\S+$)/).reverse().map(reverse) 
```

或许

```
re = /^\S+\s|.*/g;
[].concat.call(re.exec(str), re.exec(str)) 
```

*2019 年更新*：从 ES2018 开始，支持lookbehinds：

```
str = "72 tocirah sneab"
s = str.split(/(?<=^\S+)\s/)
console.log(s)
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-04-16T14:13:18.143

在 ES6 中，您还可以

```
let [first, ...second] = str.split(" ")
second = second.join(" ") 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-08-24T08:10:39.877

我知道游戏迟到了，但似乎有一种非常简单的方法可以做到这一点：

```
const str = "72 tocirah sneab";
const arr = str.split(/ (.*)/);
console.log(arr);
```

这将离开`arr[0]`with`"72"`和`arr[1]`with `"tocirah sneab"`。请注意， arr[2] 将为空，但您可以忽略它。

以供参考：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split#Capturing_parentheses](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split#Capturing_parentheses)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-04-22T22:47:40.433

```
var arr = [];             //new storage
str = str.split(' ');     //split by spaces
arr.push(str.shift());    //add the number
arr.push(str.join(' '));  //and the rest of the string

//arr is now:
["72","tocirah sneab"]; 
```

但我仍然认为有一种更快的方法。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-06-26T19:34:54.430

georg 的解决方案很好，但如果字符串不包含任何空格，则会中断。如果您的字符串有可能不包含空格，则使用 .split 并像这样捕获组会更安全：

```
str_1 = str.split(/\s(.+)/)[0];  //everything before the first space
str_2 = str.split(/\s(.+)/)[1];  //everything after the first space 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-04-22T22:54:43.383

您也可以使用 .replace 仅替换第一次出现，

```
​str = str.replace(' ','<br />'); 
```

省略 /g。

[**演示**](http://jsfiddle.net/LWCZj/)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-05-31T06:47:10.717

我不确定为什么所有其他答案都如此复杂，当您可以在一行中完成所有操作时，还可以处理空间不足的问题。

例如，让我们获取名称的第一个和“其余”部分：

```
const [first, rest] = 'John Von Doe'.split(/\s+(.*)/);
console.log({ first, rest });

// As array
const components = 'Surma'.split(/\s+(.*)/);
console.log(components);
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-18T02:10:58.713

只需将字符串拆分为一个数组并将您需要的部分粘合在一起。这种方法非常灵活，它适用于许多情况并且很容易推理。另外，您只需要一个函数调用。

```
arr = str.split(' ');             // ["72", "tocirah", "sneab"]
strA = arr[0];                    // "72"
strB = arr[1] + ' ' + arr[2];     // "tocirah sneab" 
```

或者，如果您想直接从字符串中挑选您需要的内容，您可以执行以下操作：

```
strA = str.split(' ')[0];                    // "72";
strB = str.slice(strA.length + 1);           // "tocirah sneab" 
```

或者像这样：

```
strA = str.split(' ')[0];                    // "72";
strB = str.split(' ').splice(1).join(' ');   // "tocirah sneab" 
```

但是我建议第一个例子。

工作演示：[jsbin](https://jsbin.com/luyunekafi/1/edit?css,js,console,output)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-01-17T10:19:00.983

另一种简单的方法：

```
str = 'text1 text2 text3';
strFirstWord = str.split(' ')[0];
strOtherWords = str.replace(strFirstWord + ' ', ''); 
```

结果：

```
strFirstWord = 'text1';
strOtherWords = 'text2 text3'; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-12-18T09:18:27.833

我习惯于`.split(" ")[0]`在空格之前获取所有字符。

```
productName.split(" ")[0] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-10-14T20:13:13.957

每当我需要从类列表或类名或 id 的一部分中获取类时，我总是使用 split() 然后使用数组索引专门获取它，或者在我的情况下最常见的是 pop() 来获取最后一个元素或 shift() 获得第一个。

此示例获取 div 的类“gallery_148 ui-sortable”并返回图库 id 148。

```
var galleryClass = $(this).parent().prop("class"); // = gallery_148 ui-sortable
var galleryID = galleryClass.split(" ").shift(); // = gallery_148
galleryID = galleryID.split("_").pop(); // = 148
//or
galleryID = galleryID.substring(8); // = 148 also, but less versatile 
```

我确信它可以压缩成更少的行，但为了便于阅读，我将其扩展。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-04-10T11:16:35.603

我需要一个稍微不同的结果。

我想要第一个词，以及它之后的内容——即使它是空白的。

```
str.substr(0, text.indexOf(' ') == -1 ? text.length : text.indexOf(' '));
str.substr(text.indexOf(' ') == -1 ? text.length : text.indexOf(' ') + 1); 
```

所以如果输入是`oneword`你得到`oneword`和`''`。

如果输入是`one word and some more`你得到`one`和`word and some more`。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-14T23:10:32.193

上面的大多数答案都是按空格而不是空格搜索的。@georg 的回答很好。我有一个稍微不同的版本。

```
s.trim().split(/\s(.*)/).splice(0,2) 
```

我不确定如何判断哪个最有效，因为我的正则表达式要简单得多，但它有额外的空间。

（@georg 的参考是`s.split(/(?<=^\S+)\s/)`）

该问题没有指定如何处理无空格或所有空格、前导或尾随空格或空字符串，在这些情况下，我们的结果略有不同。

我正在为需要使用下一个单词的解析器编写此代码，因此我更喜欢我的定义，尽管 @georg 可能更适合其他用例。

```
input.        mine              @georg
'aaa bbb'     ['aaa','bbb']     ['aaa','bbb']
'aaa bbb ccc' ['aaa','bbb ccc'] ['aaa','bbb ccc']
'aaa '        [ 'aaa' ]         [ 'aaa', '' ]
' '           [ '' ]            [ ' ' ]
''            ['']              ['']
' aaa'        ['aaa']           [' aaa'] 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-03-09T10:04:42.973

以下函数将**始终**将句子分成 2 个元素。第一个元素将仅包含第一个单词，第二个元素将包含所有其他单词（或者它将是一个空字符串）。

```
var arr1 = split_on_first_word("72 tocirah sneab");       // Result: ["72", "tocirah sneab"]
var arr2 = split_on_first_word("  72  tocirah sneab  ");  // Result: ["72", "tocirah sneab"]
var arr3 = split_on_first_word("72");                     // Result: ["72", ""]
var arr4 = split_on_first_word("");                       // Result: ["", ""]

function split_on_first_word(str)
{
    str = str.trim();  // Clean string by removing beginning and ending spaces.

    var arr = [];
    var pos = str.indexOf(' ');  // Find position of first space

    if ( pos === -1 ) {
        // No space found
        arr.push(str);                // First word (or empty)
        arr.push('');                 // Empty (no next words)
    } else {
        // Split on first space
        arr.push(str.substr(0,pos));         // First word
        arr.push(str.substr(pos+1).trim());  // Next words
    }

    return arr;
} 
```

# java - 支持空间查询的内存数据库

> ID：10272774
> 
> 赞同：6
> 
> 时间：2012-04-22T22:42:53.527
> 
> 标签：java, geolocation

我正在尝试解决java中“查找您附近的兴趣点”的问题。即我有很多纬度，很多兴趣点。我想找到800米以内的那些。假设我知道我当前的纬度和日志。

我的问题是这个应用程序必须是独立的。所以我不能依靠空间数据库查询来查找结果，例如使用 mysql 我发现这很有用：http: [//xebee.xebia.in/2010/10/28/working-with-geolocations/](http://xebee.xebia.in/2010/10/28/working-with-geolocations/)

目前我找不到支持空间查询的内存数据库。我打算使用像[http://jsi.sourceforge.net/这样的 R-Tree](http://jsi.sourceforge.net/)

但我知道这不会是正确的，因为它使用矩形而不是循环搜索。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T15:52:20.120

有一个名为 Altibase 的内存数据库，它支持空间功能。它遵守 OGC 规范。你可以利用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:14:45.500

实际上，jsi 库 (http://jsi.sourceforge.net) 非常适合解决这个问题。它是为了支持这种确切的情况而编写的。

搜索附近的矩形（或点）时，您可以提供最大距离，它将按距离增加的顺序返回结果。

它不支持查询“返回 800m 半径内的每个点”，但实际上您需要一个限制。所以jsi库确实支持更有用的“返回800m半径内最近的50个点”。

如果您确实想要半径内的每个点，您可以将点的数量增加到一个很大的数量并运行最近的 N 查询，或者在您自己的代码中执行交叉查询并按距离过滤。

# javascript - jQuery 淡化画布内的 div

> ID：10272783
> 
> 赞同：1
> 
> 时间：2012-04-22T22:44:33.683
> 
> 标签：javascript, html

我正在尝试淡化`<canvas>`标签内的 DIV。（这甚至允许吗？我认为是这样，因为它是一个元素）。你知道标准的[jQuery 淡入淡出](http://api.jquery.com/fadeIn/)，这是我用于样式的：

```
 <style type="text/css">
<!--
    #canvas {
       background:red;
       z-index:0;
       position:relative;       
    }
    .txt {
        z-index:2;
        background:blue;
        display:none;
        position:absolute;
        top:0;
        right:0;
        width:200px;
    }
-->
</style> 
```

很简单，这里是我的 HTML（忽略正文..我拥有一切..这是为了缩短它）：

```
<body>
    <canvas id="canvas"><div class="txt">Welcome to the Game</div></canvas>
</body> 
```

我尝试了一个简单的淡入淡出，但它不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:07:59.067

来自[WHATWG 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html)：

> canvas 元素的内容（如果有）是该元素的后备内容。

仅当浏览器不支持某种元素时才显示“后备内容”：

```
<canvas>
    <div>Looks like you need to upgrade to a canvas-aware browser!</div>
</canvas> 
```

您应该将 div 放在画布元素之后，并使用 CSS 将其视觉定位在画布上*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:52:39.343

根据[画布元素的 WHATWG 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element)

> 当作者使用canvas 元素时，他们还必须提供在呈现给用户时传达与位图画布基本相同的功能或目的的内容。该内容可以作为canvas 元素的内容放置。canvas 元素的内容（如果有）是该元素的后备内容。

您的内容显然不是后备内容。如果不是，也许您应该使用传统的画布方法来显示您的文本。

# c - 如果程序使用 sudo 运行，我如何获得用户的真实 uid？

> ID：10272784
> 
> 赞同：21
> 
> 时间：2012-04-22T22:44:33.887
> 
> 标签：c, ubuntu

我正在运行的程序需要 root 权限，因此使用 运行`sudo`，但它还需要知道运行它的用户是什么。`getuid`并且`geteuid`都返回`root`。如何获取实际用户的用户名（或 uid）？

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-22T22:47:15.900

`sudo`提供了一些环境变量来帮助您解决这种情况：

```
 SUDO_UID        Set to the user ID of the user who invoked
                   sudo

   SUDO_USER       Set to the login of the user who invoked sudo 
```

steveayre 在评论中指出，用户可以在某些情况下设置这些环境变量；`sudo(8)`手册页部分包括：

```
The sudoers policy subjects variables
passed on the command line to the same restrictions as normal
environment variables with one important exception.  If the
setenv option is set in sudoers, the command to be run has the
SETENV tag set or the command matched is ALL, the user may set
variables that would otherwise be forbidden.  See sudoers(5)
for more information. 
```

`ALL`因此，当您需要依赖此功能时，请确保不要向用户授予命令。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T22:57:33.897

审计系统提供的特定于 Linux 的`audit_getloginuid()`功能可能会有所帮助；因为`pam_loginuid(8)`只会为“主要”守护进程（`sshd`、`login`、`gdm`等）安装，所以审计 uid 在`sudo(8)`执行时将保持不变。

这将需要一些配置；添加：

```
session    required     pam_loginuid.so 
```

到`/etc/pam.d/sshd`文件 - 以及您允许用户使用的任何其他服务。

确保`pam_loginuid.so`未在`/etc/pam.d/sudo`配置文件中加载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-22T23:15:43.950

你有两个不错的选择...

1.  信任 sudo 并使用它的环境
2.  使您的程序 setuid-on-execution 然后 geteuid 等，将正常工作

*更新：*

**[setuid 位](http://en.wikipedia.org/wiki/Setuid)**是文件模式中的访问权限标志，它使程序以可执行文件所有者的能力运行。这就是 sudo(1) 能够以 root 身份运行的方式...... sudo 程序本身具有这种模式。

```
$ ls -l /usr/bin/sudo
-r-s--x--x  1 root  wheel  272384 Jun 22  2009 /usr/bin/sudo* 
```

要使程序 setuid root 可以：

```
$ chown root a.out
$ chmod +s a.out 
```

不用说，setuid root 程序应该仔细编写。如果您只需要访问受保护的目录或文件，您可以将其设置为权限较低的用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-09T09:09:54.367

更简单的方法是使用我是谁

```
who am i | awk '{print $1}' 
```

或者

```
who am i | cut -f1 -d" " 
```

# android - 由于意图过滤器启动应用程序时仍然调用 onCreate() 吗？

> ID：10272785
> 
> 赞同：1
> 
> 时间：2012-04-22T22:44:36.833
> 
> 标签：android, android-intent

我正在开发一个安卓应用程序。我注册了一个意图过滤器。我是否必须将 onCreate() 中的初始设置代码复制到 onResume() 函数中？还是会在进入 onResume() 之前调用 onCreate()？

谢谢

编辑：大声笑，不知道我怎么没想到搜索：http: **//developer.android.com/guide/topics/intents/intents-filters.html**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:48:23.060

onCreate 总是在你的活动被创建时被调用，不管是什么触发了正在显示的活动。在有关活动生命周期的官方文档中对此也不例外：http: [//developer.android.com/guide/topics/fundamentals/activities.html](http://developer.android.com/guide/topics/fundamentals/activities.html)

# iphone - 目标 c 常量类

> ID：10272789
> 
> 赞同：6
> 
> 时间：2012-04-22T22:45:14.353
> 
> 标签：iphone, ios, uiviewcontroller, constants, nsobject

我将一些常量编码到几个不同的 viewController 和 NSObject 类 atm 中。我工作中的一个人说我应该把它们放到他们自己的类中（即常量类）

我想知道这种设计的优点和缺点是什么，以及是否应该做一些关于如何做的澄清会很棒。

例如，我是否只是创建一个新的 NSObject 类并在其中包含一堆#defines？那么当我需要使用它们时，我是否只是将我的常量类子类化并使用这个类中的常量，就像我会使用另一个类中的任何其他方法或变量一样？

IE

```
myclass.theConstant 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-22T22:53:39.873

将常量与使用它们的东西放在一起。不要创建全局“一切不变”文件。这使得代码重用非常头疼。例如，如果您发布通知，则需要通知名称字符串。所以你把它放在发布通知的类中：

```
.h
extern NSString * const MYObjectDidSomethingNotification;

.m
NSString * const MYObjectDidSomethingNotification = @"MYObjectDidSomethingNotification"; 
```

常量通常不是方法或定义。它们只是像上面一样的常量全局变量。您应该尽可能避免使用#define，但在某些地方它非常有用（例如常量`UIColor`对象，否则会令人沮丧地初始化）。

花一点时间在 Apple 头文件中查看示例。查看 UIWindow.h、UITableViewCell.h 和 UITableView.h 中的几个很好的例子来说明常量是如何定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:50:27.133

如果您只是拥有`#defines`它们，则不需要在任何课程中-只需将它们粘贴在自己的 .h 文件中即可。

# c - GTK+ 上的 2D 老虎机类型动画

> ID：10272791
> 
> 赞同：3
> 
> 时间：2012-04-22T22:45:40.857
> 
> 标签：c, animation, gtk, graphics2d

我在 Linux 下使用 C 和 GTK 编写了一个基本的老虎机模拟。老虎机有 5 个卷轴，每个卷轴有 3 个符号。为了“动画化”旋转动作，我只是使用带有 GtkImages 数组 3,5 的动画 GIF。

我想让它看起来像一个合适的老虎机，每个卷轴都有一个垂直动画。我想我需要从卷轴上的符号构建一个像素图或像素缓冲区，使用 g_timer_add() 来更改 GtkImage 上像素图的可见部分。我是 Gtk+ 的新手，所以如果有人有这类动画的简单示例或良好的文档，我将永远感激不尽。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:34:02.473

使用 GtkDrawingArea 而不是 GtkImage，这样您就可以随意绘制。将所有可能的图像放在一个垂直的 PNG 图像中，就像展开卷轴一样。然后将其加载到 pixbuf 中，使用 cairo 为其创建一个表面。您只需要使用 cairo 绘制该大图像的一小部分，您可以通过该大图像的垂直偏移量来引用它。使用带有 g_timer_add 的计时器，使其以每秒足够的帧数刷新（计算您需要的速度）。不要认为定时器回调是理所当然的，回调的触发可能会有延迟。最好的方法是使用 GTimer，在您想要使卷轴旋转的时间启动它，并在 g_timer_add 回调中，测量自启动 GTimer 以来经过的时间。这将允许您计算图像的偏移量。

# java - 以编程方式添加 Servlet 或过滤器有哪些优点或用例？

> ID：10272792
> 
> 赞同：0
> 
> 时间：2012-04-22T22:45:48.987
> 
> 标签：java, jakarta-ee, servlets, servlet-3.0

这个[问题](https://stackoverflow.com/questions/4490648/adding-a-dynamic-servlet-using-servlet-3-0-throws-exception)让我想知道，因为我没有看到使用 contextListener （据我所知运行一次）以编程方式添加 servlet 优于 DD 或 Annotations。我想知道一个常见的用例，它有助于以编程方式添加它们。

如果有一种方法可以在运行时（在应用程序运行期间）以编程方式添加 servlet，我可能会想到一些情况，但似乎只能通过 contextListener 或

> 来自 ServletContainerInitializer 实现的 onStartup 方法。

正如 Servlet 3.0 所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:41:09.547

在运行时添加 servlet 等的能力主要是为框架创建者设计的。

如果你创建了一个框架，比如说，它与普通的 POJO Java 对象一起工作，那么你需要在某个时候创建​​ servlet——它们必须公开 POJO 类以进行 Web 访问。因为您可以动态创建 servlet，所以不需要 POJO 类的配置文件。好的！

通用框架可能还具有可以动态“打开/关闭”的过滤器，例如可以有可切换的过滤器来处理用户授权/身份验证。

在“正常”应用程序中，通常所有 Servlet、过滤器都是预先知道的，因此几乎不需要编程添加。

# node.js - 如何在 Node.js 中链接另一个回调函数？

> ID：10272797
> 
> 赞同：0
> 
> 时间：2012-04-22T22:46:13.437
> 
> 标签：node.js, asynchronous, callback, chaining

我有一个 node.js 函数：

```
function myFunc(callback) {
    var ret = 50; // some time consuming calculation 
    return callback(random);
} 
```

如果我无论如何都无法编辑它，我怎么知道这个功能何时完成。有没有办法将另一个回调函数链接到它上面。无论如何都无需编辑 myFunc 。

即，如果我正在使用：

```
async.forEach([1, 2, 3], function iter(myFunc(console.log), ????) {}, function(err){
    // if any of the saves produced an error, err would equal that error
}); 
```

我把什么作为迭代器？

当所有 myFuncs 都已执行时，我怎么知道传递控制权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:09:15.803

```
myFunc(function(ret) {
  console.log("finished");
  console.log(ret);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:26:06.247

就像是 ：

```
// fn wraps myFunc
var fn = function(callback) {
    // myFunc isn't altered, it is called with callback function
    myFunc(function(random) {
       console.log('done');
       callback(random);
    };
};

async.forEach([1,2,3], fn(console.log)); 
```

# javascript - 如何使 div 不可选择？

> ID：10272798
> 
> 赞同：0
> 
> 时间：2012-04-22T22:46:13.903
> 
> 标签：javascript, jquery

我想让特定 div 的不可选择的双击等应该被阻止。

[这是我尝试过的：](http://jsfiddle.net/VYKfL/)

```
<div id="test" class="unselectable">asd</div>

$(document).ready(function() {
    $.ctrl = function(key, callback, args) {
        var isCtrl = false;
        $(document).keydown(function(e) {
            if (!args) args = []; // IE barks when args is null
            if (e.ctrlKey) isCtrl = true;
            if (e.keyCode == key.charCodeAt(65) && isCtrl) {
                callback.apply(this, args);
                return false;
            }
        }).keyup(function(e) {
            if (e.ctrlKey) isCtrl = false;
        });
    };

    //Other Method
    $(function() {
        $(document).keydown(function(objEvent) {
            if (objEvent.ctrlKey) {
                if (objEvent.keyCode == 65) {
                    objEvent.disableTextSelect();
                    return false;
                }
            }
        });
    });  
});​ 
```

但令我懊恼的是，我发现这行不通。我如何修改我的代码以实现我的目标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T22:56:40.357

为此，您不需要 Javascript（[参考答案](https://stackoverflow.com/a/4407335/339852)）。做这个：

```
div {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T22:55:05.180

据我所知，没有办法阻止用户选择 div 上的文本。由于这是一个浏览器和可能与操作系统相关的功能，它超出了您通常可以使用 Javascript 操作的范围。

如果您想让您的用户感到非常烦人，您可以在整个文档上创建一个事件处理程序，以检查用户是否曾经同时按下 control-A，如果是，请尝试通过阻止默认设置来阻止选择 div行动或专注于页面的其他部分。但是，这只会让他们生气，因为您正试图阻止他们以他们想要的方式使用他们的计算机，并且可能会让他们从您的网站中脱颖而出。

您能否给我们提供更多背景信息，说明您为什么不希望用户选择某些东西？**考虑到他们可以禁用 javascript/CSS 并重新加载页面，无论您做什么，总会有解决方法。**如果您想让文本更难以复制粘贴，您可以制作包含所需文本的图像并将其放置在 div 中，但您仍然只是在花时间让用户对您的网站*更加*恼火.

* * *

虽然我不会声称我对你的整个项目非常了解以至于我可以准确地告诉你你应该做什么，但我会说可能有更好的方法来实现你所追求的任何目标。如果您发布更多详细信息，我们可能会帮助您找到它。:D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:15:26.410

我已经用相当明确的答案回答了至少三个关于 SO 的类似问题。[这里是最受欢迎的](https://stackoverflow.com/a/4358620/96100)。

我还使用来自该答案的信息更新了您的 jsFiddle，以便在 IE 中工作：http: [//jsfiddle.net/VYKfL/3/](http://jsfiddle.net/VYKfL/3/)

# c# - 如何在 C# XNA 中访问位图的宽度和高度？

> ID：10272805
> 
> 赞同：0
> 
> 时间：2012-04-22T22:47:55.690
> 
> 标签：c#, bitmap, xna, argumentexception

我正在尝试创建一个应用程序，在其中创建一个位图，然后从中取出一些变量并从中制作一个 Texture2D。这就是我所拥有的：

```
public Bitmap getBitmap()
        {
            if (!panelVideoPreview.IsDisposed)
            {
                Bitmap b = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height, PixelFormat.Format32bppRgb);
                Graphics g = Graphics.FromImage(b);
                Rectangle videoRect = panelVideoPreview.Bounds;
                panelVideoPreview.DrawToBitmap(b, videoRect);
                b.Dispose();
                return b;
            }
            else
            {
                Bitmap b = new Bitmap(panelVideoPreview.Width, panelVideoPreview.Height);
                return b;
            }
        } 
```

然后我尝试从中创建一个纹理：

```
 Texture2D tex = new Texture2D(gDevice, (int)bit.Width, (int)bit.Height); 
```

这是我得到错误的地方，我得到这个：

> System.ArgumentException 未处理 Message=Parameter 无效。Source=System.Drawing StackTrace: 在 System.Drawing.Image.get_Width() at GPUParticles.VelocityTexture.createVelocityMapBitmap(GraphicsDevice gDevice, Bitmap bit, Single Accuracy) in D:\Dropbox\School\Project FUN\Code\XNA\GPUParticles\ GPUParticles\GPUParticles\VelocityTexture.cs：D:\Dropbox\School\Project FUN\Code\XNA\GPUParticles\GPUParticles\GPUParticles\Game1.cs 中 GPUParticles.Game1.camInterval_Tick(Object myObject, EventArgs myEventArgs) 的第 16 行：第 302 行在 System.Windows.Forms.Timer.OnTick(EventArgs e) 在 System.Windows.Forms.Timer.TimerNativeWindow.WndProc(Message& m) 在 System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 在系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:33:39.850

您可以使用 MemoryStream。示例（未经测试）：

```
Texture2D MakeTextureFromBitmap(Bitmap bmp) {
    using (var ms = new MemoryStream()) {
        bmp.Save(ms, ImageFormat.Png);
        return Texture2D.FromStream(GraphicsDevice, ms);
    }
} 
```

# java - 在 Android 4 上自定义 ActionBar 选项卡

> ID：10272812
> 
> 赞同：15
> 
> 时间：2012-04-22T22:49:00.407
> 
> 标签：java, android, android-layout, android-theme, android-actionbar

我正在尝试自定义 ActionBar 上的选项卡。我只想将标签与手机屏幕对齐，并使其可伸缩以适应各种屏幕。但我得到的只是：

![在此处输入图像描述](../Images/1e51a1d3be8d7f701b02b7c08b1da57c.png)

我用于主题的代码是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="MyTheme" parent="@android:style/Theme.Holo.Light">
        <item name="android:actionBarTabTextStyle">@style/MyActionBarTabTextStyle</item>
    </style>

    <style name="MyActionBarTabTextStyle" parent="@android:style/Widget.Holo.Light.Tab">
        <item name="android:textSize">14dip</item>
        <item name="android:padding">0dip</item>
    </style>

</resources> 
```

是否有可能只是减少字体并摆脱那些蓝线？

**提前感谢您的帮助。**

PS：按钮的行为也很奇怪。没有文字（虽然它应该是）......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T19:33:27.370

**编辑：**`ActionBarCompat`在支持库中使用。

* * *

我建议你使用 Jake Wharton 的[**ActionBarSherlock**](http://actionbarsherlock.com/)有两个原因：

1.  ActionBarSherlock 是兼容性库的扩展，它有助于跨所有版本的 Android 使用操作栏。这意味着在 HoneyComb 之前的 Android 版本上运行您的应用程序的用户也可以使用`ActionBar`导航。这对用户（因为`ActionBar`太棒了！）和您（因为您不必担心根据是否`ActionBar`可用来分离应用程序的控制流。例如，没有 pre -HoneyComb 兼容`ActionBar`，您可能不得不担心`Activity`为单个屏幕创建多个 s……一个针对与 的使用进行了优化`ActionBar`，一个可以在预 HoneyComb 设备上运行。

2.  使用 ActionBarSherlock，为您的 ActionBar 设置[样式](http://actionbarsherlock.com/theming.html)很容易！我可以详细介绍如何执行此操作，但是该库已经附带了许多[示例代码](https://github.com/JakeWharton/ActionBarSherlock/tree/master/samples)，这些示例代码说明了您在上面描述的内容。

安装/使用该库非常简单，几乎与使用`ActionBar`Android SDK 中提供的普通库相同（大多数情况下只是调用`getSupportActionBar()`而不是`getActionBar()`）。如果您有任何问题，请告诉我。

ps 另请注意，它`ActionBarSherlock`提供了 ViewPagerExtensions 库提供的所有功能等等。我肯定会推荐使用前者而不是后者。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T08:40:19.743

有一个全新的工具可以为操作栏生成正确的 9patch 图像：http: [//jgilfelt.github.com/android-actionbarstylegenerator/](http://jgilfelt.github.com/android-actionbarstylegenerator/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T15:56:31.770

我发现使用选项卡的样式指南对于蜂窝非常不一致，只需为您想要的自定义视图充气要容易得多。

```
Fragment serivceFrag = new ServicesFragment();
Tab serviceTab = bar.newTab();
TextViewPlus serviceTabTextView =(TextViewPlus)getLayoutInflater().inflate(R.layout.tab_item_layout, null);
serviceTabTextView.setText(servicesLabel);
serviceTab.setCustomView(serviceTabTextView);
serviceTab.setTabListener(new TabListenerFragment(serivceFrag,"Service",R.id.MainInfoPaneFragment));
bar.addTab(serviceTab); 
```

这对我来说要简单得多，

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-13T03:54:13.860

改成：

```
<style name="MyActionBarTabTextStyle" parent="@android:style/Widget.Holo.ActionBar.TabText">
     <item name="android:textSize">14dip</item>
     <item name="android:padding">0dip</item>
</style> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T21:13:50.187

我认为您继承了错误的样式，请尝试：

```
<style name="MyActionBarTabTextStyle" parent="android:TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textSize">14sp</item>
    <item name="android:padding">0dip</item>
</style> 
```

编辑：另外，请确保您使用 sp 而不是 dip 字体大小（14sp）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T15:03:43.467

我强烈建议您使用[ViewPagerExtensions 库](https://github.com/astuetz/ViewPagerExtensions)，它为您提供 5 种不同样式的选项卡供您选择，而且您必须在纵向和横向填充选项卡的问题，每个屏幕尺寸的 ode 已在此库中解决。

顺便说一句，如果您查看库的代码，您可以自己简单地设置主题。

此外，如果您在使用片段页面实现此功能时遇到问题，请查看[actionbarsherlock-tabs-multi-fragments](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-11T06:14:03.490

您可以使用[setCustomView](http://developer.android.com/reference/android/app/ActionBar.Tab.html#setCustomView%28int%29)方法。

# xml - 动作方法“setElementClass”在哪里定义？

> ID：10272813
> 
> 赞同：0
> 
> 时间：2012-04-22T22:49:15.300
> 
> 标签：xml, magento

我在整个 magento 文件夹中搜索了文本“setElementClass”，它仅作为对名为 setElementClass 的操作方法的调用出现在 xml 文件中。我希望它在某个地方的 php 类中定义，但无处可寻。任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:18:50.947

查看`Varien_Object::__call()`Magento 中的所有块从哪个扩展。任何以 get set has 或 uns 开头的方法都是“好的”。

# java - 在循环中创建新对象的效率

> ID：10272814
> 
> 赞同：9
> 
> 时间：2012-04-22T22:49:27.360
> 
> 标签：java, memory, loops

我不确定这个问题是否与语言无关，所以我将把它作为一个 Java 问题来问。如果你有一个像

```
for (int i = 0; i < 9; i++) {
    Object obj = new Object;
    // fill object
    // do something with data
} 
```

循环的每次迭代是否都会创建新的内存空间？如果是这样，旧空间是否正在处理？如果没有，做这样的事情是否更有效率

```
Object obj = new Object;
for (int i = 0; i < 9; i++) {
    // fill object
    // do something with data
} 
```

编辑：更新代码以更好地举例说明问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-22T22:52:13.010

简短的回答：在 Java 中开发时忽略这些事情，即使这些问题中的大多数是由 JVM 本身隐藏和管理的。

垃圾收集器会知道该做什么，它会根据情况尝试做最好的事情。

此外，您的具体示例对我来说没有多大意义..您能进一步详细说明吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-22T23:04:07.357

“让垃圾收集器弄清楚”的基本答案是正确的，但您也应该了解这两条语句的效果：

```
String object = new String();
object = array[i]; 
```

是（1）创建一个新的（空）字符串，并将其分配给“object”，然后（2）将值分配`array[i]`给“object”。

(2) 中的赋值覆盖了您在 (1) 中所做的，因此您创建的第一个 String 永远不会被使用。垃圾收集器最终会回收存储，因此您不必担心它会丢失，但它仍然是不必要的分配；你可以从`String object = null;`

还要注意`String`s 在 Java 中是不可变的，所以一旦分配了一个`String`对象，就不能改变它的值——你可以让一个`String`变量引用一个新的对象，但不能修改一个现有的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:01:28.853

为什么不进行一些测试并观察结果？垃圾收集器确实有效，但您不知道它的效果最好。处理大量数据，这种事情可能会影响您的效率。

我认为[这个链接](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)将有助于追踪你需要什么。

# mysql - Mysql 最小/最大优化

> ID：10272826
> 
> 赞同：0
> 
> 时间：2012-04-22T22:51:07.820
> 
> 标签：mysql, database, optimization, query-optimization

我有一个看起来像这样的表（我们称之为 tableA）：

```
 id    |   dateA    |   dateB    
----------|------------|-------------
    1     | 2011-01-01 | 2010-05-01
    1     | 2011-05-01 | 2010-06-12
    2     | 2011-01-11 | 2010-01-31
    2     | 2011-01-31 | 2010-02-01
    3     | 2011-05-11 | 2010-08-02
    3     | 2011-08-02 | 2010-09-10 
```

我的目标是按 id 对行进行分组，并获得 dateA 的最小值和 dateB 的最大值，并得到一个看起来像这样的表：

```
 id    | min(dateA) | max(dateB)
----------|------------|-------------
    1     | 2011-01-01 | 2010-06-12
    2     | 2011-01-11 | 2010-02-01
    3     | 2011-05-11 | 2010-09-11 
```

现在，我正在使用 LEFT join 方法：

```
SELECT
    id,
    tableB.dateA,
    tableC.dateB
FROM tableA as a

    LEFT JOIN (
        SELECT id, min(dateA)
        FROM tableA
        GROUP BY id
    )tableB ON a.id = tableB.id

    LEFT JOIN (
        SELECT id, max(dateB)
        FROM tableA
        GROUP BY id
    )tableC ON a.id = tableC.id 
```

但是，我的方法太慢了。我有很大的桌子，大约需要 7 秒才能得到想要的结果。

谁能建议我一种适用于我的情况的良好优化技术？

谢谢你。

Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T22:54:49.633

一个简单的 GROUP BY 使用一次遍历表并且没有自联接有什么问题？

```
SELECT id, MIN(dateA), MAX(dateB)
  FROM TableA
 GROUP BY id; 
```

# database - 有很多关系设计

> ID：10272827
> 
> 赞同：0
> 
> 时间：2012-04-22T22:51:10.347
> 
> 标签：database, database-design

我有不止一种尺寸的产品。下一个设计好不好？

*   产品（#product_id，product_name）

*   尺寸（#size_id，#product_id，尺寸）

我用“#”表示一个键，无论是外键还是主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:06:09.147

您没有明确指定哪些列组合是主键，哪些是外键约束，哪些是 Size 表中唯一约束的。

*   Product_id 显然是一个引用产品的外键。它没有问题。

*   Size_id 可能是一个自动递增的标识符，并且是 Size 的“主键”。对我来说这似乎有点矫枉过正，但实际上并没有错。

*   Product_ID 和 Size 的未记录组合需要对其进行唯一约束，以确保您最终不会得到这样的两行：

    ```
    Size_ID   Product_ID    Size
     1234      23456        12
     1235      23456        12 
    ```

说同样的事情两次——ID 为 23456 的产品的尺码为 12。同样的事情说两次是重复的，很容易导致错误的答案（产品 23456 有多少尺码——如果你必须写 COUNT(DISTINCT Size) 而不仅仅是 COUNT(*)，这不是因为打字，而是因为 DBMS 必须做更多的工作，因为有时有人会忘记并产生错误的查询，它不会是直到事后检查为什么会出现严重错误时才被发现是一个问题。

使用 Product_ID 和 Size 的组合作为主键，您可以完全不使用 Size_ID。否则，您需要对 Product_ID 和 Size 进行唯一约束。

# matlab - matlab print: '无法创建输出文件'.\test.tif''

> ID：10272829
> 
> 赞同：3
> 
> 时间：2012-04-22T22:51:36.333
> 
> 标签：matlab

我正在尝试使用 MATLAB 中的打印命令将散点图另存为当前文件夹中的 TIFF。但是，我收到以下错误消息：`Cannot create output file '.\test.tif'`

我的代码如下所示：

```
hold on
plot(x,y,'-r','LineWidth',4)
plot(x2,y2,'--xk','LineWidth',4,'MarkerSize',10);
hold off
print -dtiff -r300 test.tif 
```

有谁知道我怎样才能成功保存我的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T02:16:59.223

您很可能没有在当前目录中创建文件的写入权限。如果您在 Windows 7 下工作，您的工作目录可能`Program Files`位于驱动器根目录下或驱动器根目录下。`pwd`用命令检查它。

还要检查您是否可以保存其他文件，例如 MATLAB m 文件。如果是权限问题，您应该有同样的问题。

另一个可能的原因是您已经以相同的名称创建了一个文件并被另一个程序打开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T21:34:36.913

如果您的文件名格式错误，您还会收到“无法创建输出文件”错误。例如：

```
figHandle = figure;
AnInt = 12;
print(figHandle,'-dpng', [AnInt .png]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-13T10:02:50.530

当我有长标题时，我得到了同样的错误。这不是你的情况。但是，如果您因此遇到类似的错误，请使用以下代码将标题分为两行

title({'X和Y的性能比较';'},... 'interpreter','latex',...
'FontUnits','points',... 'FontWeight','normal', ... 'FontSize',15,... 'FontName','Times');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-14T13:51:10.300

毫无疑问，在目录中写入文件的权限是关键。Matlab 尝试将输出文件保存到“当前文件夹”（在工作区上方的左侧窗口中提到）。也许，选择了错误的文件夹。

# drupal - Drupal 6 使用视图查找引用了 nid 参数的节点

> ID：10272830
> 
> 赞同：0
> 
> 时间：2012-04-22T22:51:48.677
> 
> 标签：drupal, drupal-6

我有一个 event_note 节点，其中包含正文和一个节点引用，用于将注释与事件节点相关联。我将如何创建一个视图来获取引用了节点 ID 的 event_note。

因此，假设 event_note 引用节点 4 和 20。在我看来，我希望它的参数是 4 或 20，并且我希望它找到引用它的 event_note。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:32:19.677

尝试这个：

1.  创建一个新视图（以节点为类型）。

2.  添加 -> 显示 -> 页面

3.  添加字段 -> 节点标题（单击覆盖默认显示）

4.  在路径设置中添加路径：node/%/evet_notes 并在菜单中：选择类型为菜单选项卡并给出一个标题，例如：事件注释。

5.  在参数部分执行以下操作（首先单击覆盖默认显示）

    1.  添加此参数：您在 event_note 节点中使用的内容以引用事件节点。

    2.  在“参数不存在时采取的措施：”下选择“提供默认参数”。

    3.  在“提供默认参数选项：”中选择“来自 url 的节点 ID”

    4.  在“验证器选项”下选择“节点”并选中“事件”作为节点类型。

    5.  最后点击更新。

6.  保存视图。

7.  在实时预览中选择页面显示并给出参数为 4 或 20，它将列出引用节点 4 的 event_note 节点。

8.  现在转到任何事件节点页面，您将看到一个新的菜单选项卡“事件注释”，单击它。这将显示引用相应事件节点的所有 event_note 节点。

# php - eBay Finding API - 在查询中搜索一系列数字

> ID：10272831
> 
> 赞同：0
> 
> 时间：2012-04-22T22:51:54.213
> 
> 标签：php, ebay-api

下面的代码返回一个结果列表，其中关键字“27”出现在项目标题或描述中。如何让它返回描述中存在关键字 + 或 - 1 的结果列表？所以在本例中为 26、27 或 28。查询变量在第 10 行。

```
<?php

error_reporting(E_ALL);  // Turn on all errors, warnings and notices for easier debugging

// API request variables
$endpoint = 'http://svcs.ebay.com/services/search/FindingService/v1';  // URL to call
$version = '1.0.0';  // API version supported by your application
$appid = 'carson2e7-8d18-4e3b-8267-5a37144ec50';  // Replace with your own AppID
$globalid = 'EBAY-US';  // Global ID of the eBay site you want to search (e.g., EBAY-DE)
$query = 'shirt 27';  // You may want to supply your own query
$safequery = urlencode($query);  // Make the query URL-friendly
$i = '0';  // Initialize the item filter index to 0

// Create a PHP array of the item filters you want to use in your request
$filterarray =
  array(
    array(
    'name' => 'MaxPrice',
    'value' => '1500',
    'paramName' => 'Currency',
    'paramValue' => 'USD'),
    array(
    'name' => 'FreeShippingOnly',
    'value' => 'false',
    'paramName' => '',
    'paramValue' => ''),
    array(
    'name' => 'ListingType',
    'value' => array('AuctionWithBIN','FixedPrice','StoreInventory'),
    'paramName' => '',
    'paramValue' => ''),
  );

// Generates an indexed URL snippet from the array of item filters
function buildURLArray ($filterarray) {
  global $urlfilter;
  global $i;
  // Iterate through each filter in the array
  foreach($filterarray as $itemfilter) {
    // Iterate through each key in the filter
    foreach ($itemfilter as $key =>$value) {
      if(is_array($value)) {
        foreach($value as $j => $content) { // Index the key for each value
          $urlfilter .= "&itemFilter($i).$key($j)=$content";
        }
      }
      else {
        if($value != "") {
          $urlfilter .= "&itemFilter($i).$key=$value";
        }
      }
    }
    $i++;
  }
  return "$urlfilter";
} // End of buildURLArray function

// Build the indexed item filter URL snippet
buildURLArray($filterarray);

// Construct the findItemsByKeywords HTTP GET call 
$apicall = "$endpoint?";
$apicall .= "OPERATION-NAME=findItemsAdvanced";
$apicall .= "&SERVICE-VERSION=$version";
$apicall .= "&SECURITY-APPNAME=$appid";
$apicall .= "&GLOBAL-ID=$globalid";
$apicall .= "&descriptionSearch=true";
$apicall .= "&categoryId=110";
$apicall .= "&keywords=$safequery";
$apicall .= "&paginationInput.entriesPerPage=100";
$apicall .= "$urlfilter";

// Load the call and capture the document returned by eBay API
$resp = simplexml_load_file($apicall);

// Check to see if the request was successful, else print an error
if ($resp->ack == "Success") {
  $results = '';
  // If the response was loaded, parse it and build links  
  foreach($resp->searchResult->item as $item) {
    $pic    = $item->galleryURL;
    $link   = $item->viewItemURL;
    $title  = $item->title;

    // For each SearchResultItem node, build a link and append it to $results
    $results .= "<a href=\"$link\" title=\"$title\"><img src=\"$pic\" height=\"250\" width=\"250\" style=\"margin:5px;\"></a>";
  }
}
// If the response does not indicate 'Success,' print an error
else {
  $results  = "<h3>Oops! The request was not successful. Make sure you are using a valid ";
  $results .= "AppID for the Production environment.</h3>";
}
?>

<!-- Build the HTML page with values from the call response -->
<html>
<head>
<title>eBay Search Results for <?php echo $query; ?></title>
<style type="text/css">
body {
  font-family: arial,sans-serif;
  }
.container {
  max-width: 1200px;
}

  </style>
</head>
<body>

<div class="container">

    <?php echo $results;?>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:19:49.130

这比我想象的要容易......我修改了第 10 行：

$query = '衬衫 (27, 26, 28)'; // 你可能想提供你自己的查询

在这里找到答案：http: [//developer.ebay.com/DevZone/XML/docs/WebHelp/wwhelp/wwhimpl/common/html/wwhelp.htm ?context=eBay_XML_API&file=SearchingForItems-Searching_for_Items_by_Using_a_Query.html](http://developer.ebay.com/DevZone/XML/docs/WebHelp/wwhelp/wwhimpl/common/html/wwhelp.htm?context=eBay_XML_API&file=SearchingForItems-Searching_for_Items_by_Using_a_Query.html)

# php - Twigg 评估模拟

> ID：10272832
> 
> 赞同：0
> 
> 时间：2012-04-22T22:52:07.693
> 
> 标签：php, symfony, twig

您好我有一个问题，我有一个布局，它是存储在数据库中的文件和内部模板。我需要使用树枝渲染整个页面。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:41:50.057

看看 twig 的[字符串加载器](https://github.com/fabpot/Twig/blob/master/lib/Twig/Loader/String.php)是如何工作的。

[从长远来看，创建自己的 loader](http://twig.sensiolabs.org/doc/api.html#create-your-own-loader)可能会更好。

# c# - 选择组合框后将所有匹配值返回到列表框

> ID：10272835
> 
> 赞同：0
> 
> 时间：2012-04-22T22:52:39.843
> 
> 标签：c#, wpf

我有一个带有 a`ListBox`和一堆`TextBox`s 的表格用于编辑记录。我还可以`ComboBox`从中选择`trip`s 的类型（这是在表单中定义的）。

```
 private void LoadExpenseList()
        {
            tripSelect.Items.Clear();
            var dateSorted =
                from e in roster
                orderby e.Trip
                select e;
            foreach (var e in dateSorted)
                tripSelect.Items.Add(e.Trip);
        }

private void tripSelect_SelectedIndexChanged(object sender, EventArgs e)
        {
            selectedExpense = (ExpenseItem)roster.TripFind((string)tripSelect.SelectedItem);
            listExpenses.Items.Add(selectedExpense);
        }

 private void listExpenses_SelectedIndexChanged(object sender, EventArgs e)
        {} 
```

现在，当我选择 a 时，`trip`我只得到第一个传递给的结果`ListBox`，这就是原因（这是在列表类中定义的）

```
public ExpenseItem TripFind(string trip)
    {
        var specificExpenseItem =
           from e in this
           where e.Trip == trip
           select e;
        if (specificExpenseItem.Count() >= 1)
            return specificExpenseItem.First();
        return null;
    } 
```

每次我尝试重写它时都会遇到问题！我得到`not all paths return a value`或 JIT 调试器告诉我我无法通过这个。

这是我尝试过的最后一件事：

```
public ExpenseItem TripFind(string trip)
    {
        var specificExpenseItem =
           from e in this
           where e.Trip == trip
           select e;
        foreach (var e in specificExpenseItem);
        return null;
    } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T22:54:19.907

你可以用

```
return this.FirstOrDefault(e => e.Trip == trip); 
```

# sharepoint - Sharepoint-将列修剪到特定字符

> ID：10272842
> 
> 赞同：1
> 
> 时间：2012-04-22T22:53:13.090
> 
> 标签：sharepoint, trim

我正在尝试将一列修剪为特定字符。此列是在向 sharepoint 站点发送电子邮件时创建的。这是一个例子：

约翰·史密斯 (1234567890_carrier.net)Login_Report

我只想得到约翰·史密斯，名字后面总是有一个（。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:17:48.417

无需编程，您可以在列表中创建一个额外的计算列，该列将使用公式语言从名称中删除不需要的文本：。假设有全文的列是 MyColumn：

```
=IF(ISNUMBER(FIND("(";MyColumn));LEFT(MyColumn;FIND("(";MyColumn)-1);MyColumn) 
```

您可以在列表中创建一个视图，该视图将仅显示具有正确名称的计算列。

如果您需要原始（和可编辑）列包含正确的文本，则必须修复创建列表项的代码，以便它设置正确的值。如果您无法修改创建项目的代码，您可以创建一个事件接收器（使用[`ItemAdding`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemadding.aspx)和[`ItemUpdating`](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.itemupdating.aspx)修复该字段的事件）并将其注册到您的列表中。

--- 费尔达

# iphone - iPhone应用程序中的后退按钮

> ID：10272843
> 
> 赞同：0
> 
> 时间：2012-04-22T22:53:15.273
> 
> 标签：iphone, button, view, navigation, back

我有一个简单的单视图应用程序，主视图中有一个按钮，它将我发送到另一个带有独立 xib 文件的视图。在第二个视图中，我有一个按钮可以让我返回主视图。我没有使用导航控制器。

谁能告诉我如何编程这个“后退”按钮，以便它再次显示主视图？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:16:56.430

如果您像这样调用第二个视图控制器：

```
[self presentModalViewController:secondViewController animated:YES]; 
```

你可以这样关闭它：

```
[self dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T00:47:56.870

您可能需要考虑使用委托。创建一个委托将是一些工作，但会导致一个更加灵活的平台，然后您可以根据在辅助视图控制器中更改或更新的内容将信息发送到第一个视图控制器。这比 TommyG 将第二个视图控制器呈现为模态视图的答案更复杂，但同时它可能更灵活。您需要创建一个看起来像这样的通用协议（我更喜欢在单独的 objc 头文件中创建它们，因为我是肛门）：

```
//In YouPressMyButtons.h
#import <Foundation/Foundation.h>
@protocol YouPressMyButtons <NSObject>
- (void)secondViewBackButtonPressed:(id)sender;
@end 
```

然后你想让第一个视图控制器（主视图）符合协议并在第一个视图控制器（主视图）的头文件中实现 secondViewBackButtonPressed: 方法，如下所示：

```
//In FirstViewController.h
@interface FirstViewController : UIViewController <YouPressMyButtons>
- (void)secondViewBackButtonPressed:(id)sender;
@end 
```

在第一个视图控制器实现文件中，您需要在某处实际创建该方法并告诉它关闭第二个视图，如下所示：

```
//In FirstViewController.m somewhere down at the bottom 
//(or on top if you prefer it that way;)
- (void)secondViewBackButtonPressed:(id)sender {
   //Dismiss your second view controller in here
return;
} 
```

然后在第二个视图控制器中，您需要做的就是创建委托并在按下按钮时调用此方法。在第二个视图控制器头文件中，您需要像这样创建委托：

```
//In SecondViewController.h
@interface SecondViewController : UIViewController {
   __weak id <FCPViewSwap> delegate; //I am assuming you are using ARC like me :)
}
@property (weak, nonatomic) id<YouPressMyButtons> delegate;
- (IBAction)backButtonPressed:(id)sender; 
@end 
```

最后，在第二个视图控制器实现文件中，您只需要调用委托方法，它就会将您发送回您在上面创建的第一个视图控制器方法，如下所示：

```
//Somewhere in SecondViewController.m
- (IBAction)backButtonPressed:(id)sender {
   NSLog(@"Back button pressed. Forwarding to parent controller.");
   [self.delegate secondViewBackButtonPressed:sender];
} 
```

我还没有看到很多关于创建委托和使用它们在视图控制器之间发送信息的好的解释，所以我想我会在这里尽可能地解释它。这是在视图控制器之间发送您想要的任何信息的最强大的方法之一。您可以扩展协议中声明的方法，让您想要传递的变量数量不限。您还可以向协议添加方法和属性以使其更有用。请记住，您需要实现协议中的每个方法和属性，除非您将它们分成 @required 和 @optional 部分（有关协议和使用 @optional 说明符的详细说明，请参阅 Apple 的文档）。[Apple 协议文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)。希望这有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T03:27:30.277

如果您只有两个视图，请考虑在 xcode 中使用“实用程序”模板

# javascript - CRM-从父实体获取所有相关实体的字段总数

> ID：10272847
> 
> 赞同：2
> 
> 时间：2012-04-22T22:53:32.730
> 
> 标签：javascript, entity, relationship, crm

嗨，我有一个父实体“实体 A”，它与“实体 B”有一对多的关系。我有一个特定的整数字段，它存在于我想在“实体 A”中总计的相关实体 B 的所有实例中。我将如何通过 CRM Javascript 实现这一目标？我认为它需要一个循环来获取实体 B 的所有实例，然后将值检索到一个数组中。有什么例子吗？

简而言之：实体 A 需要一个字段来显示来自相关实体的特定值的总和。

如果有人有例子，我会奖励赏金。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T01:12:35.583

听起来很好地使用了 map/reduce。 [http://bennolan.com/2011/07/27/map-reduce.html](http://bennolan.com/2011/07/27/map-reduce.html)和[http://www.dashdashverbose.com/2009/01/mapreduce-with-javascript.html](http://www.dashdashverbose.com/2009/01/mapreduce-with-javascript.html)将帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T01:27:44.947

为了回答我自己的问题，我使用了retrieveMultiple 来执行此操作并将值推送到父实体中。

# asp.net - SSL 证书可以在 IIS (asp.net) 上的网站和虚拟目录之间共享吗？

> ID：10272852
> 
> 赞同：0
> 
> 时间：2012-04-22T22:54:12.137
> 
> 标签：asp.net, iis, ssl

如果我有一个安装了 ssl 证书的网站 (mydomain.com)。然后我创建一个虚拟目录 mydomain.com/forums 例如，我希望该站点也被相同的 ssl 证书覆盖。这会在 iis7 及更高版本中自动发生吗？我需要做一些特别的事情来实现这一点吗？有什么我需要关心的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:23:18.003

证书中描述的身份遵循[RFC 2818（第 3.1 节）](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)中定义的规则。这适用于整个主机，因此相同的证书`mydomain.com`将对该主机内的所有 URI 有效。

请注意，我说的是使用此主机的 URI，不一定是子域上的主机，例如`subdomain.mydomain.com`：在这种情况下，证书也必须对该子域有效。

正如我[最近在 Security.SE 上的这个答案](https://security.stackexchange.com/a/14021/2435)中所说的那样，即使使用更新的 RFC 6125，它允许证书主题备用名称中的 URI 条目（RFC 2818 只讨论 DNS 名称或 IP 地址），验证不会比主机名更进一步。

# c# - WebBrowser 控件自动化 C# 控制台应用程序测试中的内存泄漏

> ID：10272854
> 
> 赞同：0
> 
> 时间：2012-04-22T22:54:20.403
> 
> 标签：c#, memory-leaks, automation, webbrowser-control, sta

以下（在本文的 PS 中）测试代码会导致内存泄漏。您能否建议如何解决此内存泄漏问题？仅供参考：我正在使用 VS2010 Prof、.NET Framework 4.0、Win7 Ultimate 和 IE9。可以使用 C# 代码行激活测试代码：

```
(new WebBrowser_STA_Test()).Main(); 
```

谢谢你。

PS WebBrowser 控件自动化 C# 控制台应用程序测试代码：

```
using System;
using System.Windows.Forms;
using System.Threading;
using NUnit.Framework;
using System.ComponentModel;
using System.Runtime.InteropServices;

namespace R_and_D_TestConsole
{
    public class WebBrowserThread : IDisposable 
    {
        private Action<string> _logger;
        public WebBrowserThread(Action<string> logger)
        {
            _logger = logger;
        }

        private void log(string message)
        {
            if (_logger != null) _logger(message);
        }

        private Thread _STA_Thread;

        public bool IsAlive
        {
            get
            {
                return (
                    _STA_Thread != null && 
                    _STA_Thread.IsAlive &&
                    !this.ThreadStoppingInProgress &&
                    !this.ThreadStopped
                    ); 
            }
        }

        public void Start()
        {
            log("Starting WebBrowser Thread...");

            _STA_Thread = new Thread(startBrowser);
            _STA_Thread.Name = "WebBrowser STA Thread";
            _STA_Thread.SetApartmentState(ApartmentState.STA);
            _STA_Thread.Start();

        }

        public WebBrowserHandler WebBrowserHandler { get; private set; }
        private void startBrowser()
        {
            log("WebBrowser Thread started.");

            WebBrowserHandler = new WebBrowserHandler(_logger);
            WebBrowserHandler.CreateBrowserInstance();

            Application.Run();
        }

        public bool ThreadStoppingInProgress { get; private set; }
        public bool ThreadStopped { get; private set; }
        public void Stop()
        {
            if (ThreadStoppingInProgress) return;

            try
            {
                ThreadStoppingInProgress = true;

                log("Stopping WebBrowser Thread...");

                log("Disposing WebBrowser Handler...");
                WebBrowserHandler.DisposeBrowserInstance();
                log("WebBrowser Handler partially disposed.");

                _STA_Thread.Abort();
                Application.ExitThread();
                log("WebBrowser Thread stopped.");
            }
            finally
            {
                ThreadStopped = true;
                ThreadStoppingInProgress = false;
            }

        }

        public bool Disposed { get; private set; }
        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!this.Disposed)
            {
                if (disposing)
                {
                    if (WebBrowserHandler != null)
                    {
                        WebBrowserHandler.Dispose();
                        WebBrowserHandler = null;
                        log("WebBrowser Handler object instance and its child objects disposed completely (?)");
                    }

                    _logger = null;
                    _STA_Thread = null;
                }

                this.Disposed = true;
            }
        }

    }

    public class WebBrowserHandlerBase : IDisposable
    {
        protected ISynchronizeInvoke _invokeHelper;

        protected WebBrowser _webBrowser;

        private Action<string> _logger;
        public WebBrowserHandlerBase(Action<string> logger)
        {
            _logger = logger;
        }

        protected void log(string message)
        {
            if (_logger != null) _logger(message);
        }

        public bool Activated { get; private set; }
        public void CreateBrowserInstance()
        {

            _webBrowser = new WebBrowser();
            _webBrowser.Visible = true;
            _webBrowser.DocumentCompleted += webBrowser_DocumentCompleted;
            _webBrowser.ScriptErrorsSuppressed = true;

            _invokeHelper = _webBrowser as ISynchronizeInvoke;

            this.Activated = true;
        }

        public void DisposeBrowserInstance()
        {
            if (!this.Activated) return;

            Action dispose = () =>
                {
                    log("WebBrowserHandler.DisposeBrowserInstance (1)");
                    _webBrowser.DocumentCompleted -= webBrowser_DocumentCompleted;
                    // the following line results in floating runtime errors - commented...
                    //_webBrowser.Dispose();  

                    log("WebBrowserHandler.DisposeBrowserInstance (2)");
                };

            if (_invokeHelper.InvokeRequired)
            {
                IAsyncResult result = _invokeHelper.BeginInvoke(dispose, null);
                _invokeHelper.EndInvoke(result);
            }
            else dispose(); 

            this.Activated = false;
        }

        public bool Disposed { get; private set; }
        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }

        protected virtual void Dispose(bool disposing)
        {
            if (!this.Disposed)
            {
                if (disposing)
                {
                    if (_webBrowser != null)
                    {
                        // The following line results in runtime error:
                        //   'COM object that has been separated from its underlying RCW cannot be used.'
                        //_webBrowser.Dispose();
                        log("Releasing WebBrowser ActiveX instance...");
                        if (_webBrowser.ActiveXInstance != null) Marshal.ReleaseComObject(_webBrowser.ActiveXInstance);
                        _webBrowser = null;
                    }

                    _logger = null;
                }

                this.Disposed = true;
            }
        }

        public bool NavigationCompleted { get; protected set; }
        public virtual void Navigate_Async(string url) { }
        public virtual void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {}
    }

    public class WebBrowserHandler : WebBrowserHandlerBase 
    {
        public WebBrowserHandler(Action<string> logger):base(logger) {}

        public override void Navigate_Async(string url)
        {
            if (!this.Activated) throw new ApplicationException(string.Format("{0} is not yet activated.", this.GetType().Name) ) ; 

            Action<string> navigate = (x) =>
                {
                    NavigationCompleted = false;
                    _webBrowser.Navigate(x); 
                };

            if (_webBrowser.InvokeRequired) _webBrowser.Invoke(navigate, new object[] { url } ); 
            else navigate(url);
        }

        public override void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            log(string.Format(" *** webBrowser_DocumentCompleted: {0} {1}", _webBrowser.ReadyState,  e.Url));

            if (NavigationCompleted) return;

            NavigationCompleted = _webBrowser.ReadyState == WebBrowserReadyState.Complete;

            if (NavigationCompleted)
            {
                log(string.Format(" *** {0} '{1}'", _webBrowser.DocumentText.Length, _webBrowser.DocumentTitle));       
            }
        }
    }

    public class WebBrowser_STA_Test
    {

        private void log(string message)
        {
            System.Console.WriteLine("[{0}] - {1}", System.Threading.Thread.CurrentThread.ManagedThreadId, message);   
        }

        public void Main()
        {
            for (int i =1; i <= 10; i++)
            {
                test();
                GC.Collect(); 
            }
        }

        private void test()
        {
            log("Test started.");

            foreach (string url in new string[] 
                   { 
                   "http://www.google.com", 
                   "http://www.bing.com", 
                   "http://www.yandex.ru" 
                   })
            {

                log(string.Format("+++ TEST URL = '{0}' +++", url));

                bool navigateMethodCalled = false;

                using (WebBrowserThread _wbTest = new WebBrowserThread(log))
                {
                    _wbTest.Start();

                    Application.DoEvents();

                    while (_wbTest.IsAlive)
                    {
                        if (_wbTest.IsAlive &&
                            _wbTest.WebBrowserHandler != null &&
                            _wbTest.WebBrowserHandler.Activated &&
                            !navigateMethodCalled) 
                        { navigateMethodCalled = true; _wbTest.WebBrowserHandler.Navigate_Async(url); }

                        if (_wbTest.IsAlive &&
                            _wbTest.WebBrowserHandler != null &&
                            _wbTest.WebBrowserHandler.NavigationCompleted) _wbTest.Stop();

                        Thread.Sleep(500);
                    }
                }

                log(string.Format("--- TEST URL = '{0}' ---\n", url));
            }

            log("Test finished.");

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:24:24.260

请注意，使用 MaxWorkingSet 和 MinWorkingSet 将强制应用使用虚拟内存，而不是实际 RAM。这可能会导致磁盘抖动，并且可能无法解决问题。

我一直在寻找几个星期，但我没有找到解决这个问题的明确解决方案。

即使销毁 Web 浏览器对象也不会释放内存。我知道的唯一确定的方法是重新启动应用程序。

但是，我在浏览“网络”时确实找到了这个有趣的页面：

[http://www.codeproject.com/Questions/322884/WPF-WebBrowser-control-vs-Internet-Explorer-browse](http://www.codeproject.com/Questions/322884/WPF-WebBrowser-control-vs-Internet-Explorer-browse)

...他们声称有一个解决方案，虽然我没有尝试过，因为它在 C# 中，我的应用程序在 vb.net

（不幸的是，没有一个基于 Web 的转换器愿意在不崩溃的情况下将该代码转换为 vb.net，而且由于我对 c# 很烂，我自己无法转换它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:21:10.063

将以下内容粘贴到您的 documentCompleted 函数中。

```
System.Diagnostics.Process loProcess = System.Diagnostics.Process.GetCurrentProcess();
try
{
    loProcess.MaxWorkingSet = (IntPtr)((int)loProcess.MaxWorkingSet - 1);
    loProcess.MinWorkingSet = (IntPtr)((int)loProcess.MinWorkingSet - 1);
}
catch (System.Exception)
{
    loProcess.MaxWorkingSet = (IntPtr)((int)1413120);
    loProcess.MinWorkingSet = (IntPtr)((int)204800);
} 
```

# forms - 如何克隆表单并使克隆功能与原始表单完全相同？

> ID：10272855
> 
> 赞同：0
> 
> 时间：2012-04-22T22:54:23.010
> 
> 标签：forms, clone

我有以下表格：

```
 $(function() {
$("#message").keyup(function() {
var text_msg = $("#message").val();
    if(text_msg.length > 3 && text_msg.length <= 140)
    {
        $('#post').attr('disabled', '');
        $('#post').attr('value', 'Submit');
    }else{
        $('#post').attr('disabled', 'disabled');
        $('#post').attr('value', 'Wait...')
        if(text_msg.length > 3 && text_msg.length > 140){
            alert('Your message exceeded the number of characters which is 140\. Delete a few letters.');
        }
    }

}); 
```

});

```
 $(function() {
$(".resp").click(function(){
    var idf = $(this).attr('id');   
    newform = $("form#form-msg").clone(true);
        $("#new-form-"+idf).append(newform);// These id's are generated dynamically
    });
 });

    <form method="post" name="form-msg" id="form-msg" action="javascript:func()"> 
        <textarea id="message" name="message"></textarea>
        <input type="submit" value="wait..." id="post" align="left" disabled="disabled" />
    </form>

<div id="new-form-1"></div>
<div class="resp" align="center" id="1">Reply</div>
<div id="new-form-2"></div>
<div class="resp" align="center" id="2">Reply</div>
<div id="new-form-3"></div>
<div class="resp" align="center" id="3">Reply</div> 
```

当我克隆表单时，它不像原始表单那样工作，提交按钮不活动，不在提交表单的状态。一切都完美无缺，克隆形式的输入更少。如何使克隆功能等于原始功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:00:19.913

您需要删除属性而不是仅仅将它们空白，禁用属性的存在，即使它为空也会导致按钮被禁用。使用 jQuery，这意味着`$(...).removeAttr('disabled')`与`$(...).attr('disabled', '')`

# visual-studio - 有没有办法通过 VSIX 扩展将自定义文件筛选器添加到 Visual Studio 的打开文件对话框？

> ID：10272861
> 
> 赞同：0
> 
> 时间：2012-04-22T22:55:22.307
> 
> 标签：visual-studio, visual-studio-2010, mef, vsix, vspackage

我正在通过 VSIX 扩展项目实现一组 MEF 扩展。这适用于小型内部 DSL。

我可以让语法突出显示工作得很好。

我想做的是能够在 Visual Studio 的“打开文件”对话框中拥有关联的文件过滤器条目。

有没有办法通过 VSIX 扩展来做到这一点？如果没有，将过滤器添加到该列表的认可方式是什么？

我在 VSPackage 系统中没有看到任何可以做到这一点的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:11:16.503

如果您仅使用自定义语言服务开发包，并且希望能够创建您自己的自定义项目类型的项目 - 您需要开发一个项目系统（请参阅[IronPython 项目系统示例](http://msdn.microsoft.com/en-US/library/bb165776%28v=vs.80%29.aspx)并查看[MSDN](http://msdn.microsoft.com/en-us/library/bb166376%28VS.80%29.aspx)）。

但是，如果您只想将自定义扩展添加到“打开文件”对话框中的现有项目组之一 - 您只需要创建自定义项目模板。像这样的东西：

```
<VSTemplate Version="2.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Item">
  <TemplateData>
    <DefaultName>Class.my</DefaultName>
    <Name>MY File Class</Name>
    <Description>An empty class definition</Description>
    <Icon>__TemplateIcon.ico</Icon>
    <ProjectType>[PUT HERE THE PROJECT TYPE YOU WANT TO PLACE YOUR TEMPLATE UNDER]</ProjectType>
    <SortOrder>10</SortOrder>
  </TemplateData>
  <TemplateContent>
    <References />
    <ProjectItem SubType="Code" TargetFileName="$fileinputname$.my" ReplaceParameters="true">Class.my</ProjectItem>
  </TemplateContent>
</VSTemplate> 
```

创建新模板的[最简单方法](http://blogs.msdn.com/b/visualstudio/archive/2010/03/04/creating-and-sharing-project-item-templates.aspx)是提取现有模板，从 ZIP 解压缩，调整所需的所有内容并将其安装回 IDE。但是您也可以从头开始创建它并在 VS 中进行设置期间进行安装。我猜你有足够的指针来深入挖掘；）

# java - 从 JPanel 添加/删除行

> ID：10272862
> 
> 赞同：2
> 
> 时间：2012-04-22T22:55:25.617
> 
> 标签：java, swing, graph, jpanel

我正在尝试创建一个图形实现，其中图形显示在 JPanel 上。

我可以毫无问题地添加和删除顶点（我正在为这些顶点使用更多面板）。我遇到的问题是添加线条来表示边缘。我知道我可以使用

```
contentPane.getGraphics().drawLine(x1, y1, x2, y2) 
```

添加一行，但我以后无法删除该行。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:52:03.610

[`GraphPanel`](https://sites.google.com/site/drjohnbmatthews/graphpanel)使用 a`List<Edge>`对连接图节点的边进行建模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:01:23.453

我不认为这可以做到，真的......如果你只是在背景颜色中画出同一条线，那当然会弄乱你绘制的任何其他跨越那条线的东西......

最简单的解决方案是重绘整个控件而不使用该行

我唯一能想到的就是如果可以创建一个透明面板，您可以将其放在控件的根面板内，您可以在其中绘制该线，例如在 Photoshop 或 GIMP 中使用图层，但不确定如何/是否这样做在 Swing 中是可能的。

如果你只是想得到一个图表，那里有几个很好的图表库......

# architecture - Windows Azure 在什么（模拟？）架构上运行？

> ID：10272864
> 
> 赞同：0
> 
> 时间：2012-04-22T22:55:46.253
> 
> 标签：architecture, azure, amazon-ec2

[EC2 告诉您](http://aws.amazon.com/ec2/instance-types/)它们的巨型实例类型的架构（例如 2 x Intel Xeon X5570，四核“Nehalem”架构），但拒绝具体说明它们的小型实例类型。蔚蓝呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:07:49.663

我不明白这个问题，你的意思是管理程序层吗？EC2 (AWS) 在“修改过的”Xen 虚拟机管理程序上运行，Azure“带有 Fabric 控制器层的极度修改过的 Hyper V”

此计费页面可能会让您更好地了解 Azure 实例：[https ://www.windowsazure.com/en-us/pricing/details/](https://www.windowsazure.com/en-us/pricing/details/)

# android - 在 SQL Server 中存储 JSONArray 的 Web 服务

> ID：10272865
> 
> 赞同：1
> 
> 时间：2012-04-22T22:55:47.527
> 
> 标签：android, sql-server, vb.net, web-services, arrays

我有一个创建 JSONArray 的 android 应用程序：

```
List<String[]> sqlist = MySQLiteHelper.selectAll();
JSONArray jsArray = new JSONArray(sqlist); 
```

哪个在呼唤

```
public static List<String[]> selectAll()
    {
        List<String[]> list = new ArrayList<String[]>();
        Cursor cursor = db.query(TABLE_BREADCRUMBS, new String[] 
                { "id","tim","lat","lon"}, null, null, null, null, null); 
       int x=0;
        if (cursor.moveToFirst()) {
           do {
                String[] b1=new String[]{cursor.getString(0),cursor.getString(1),cursor.getString(2),
cursor.getString(3)};
                list.add(b1);
                x=x+1;
           } while (cursor.moveToNext());
        }
        if (cursor != null && !cursor.isClosed()) {
           cursor.close();
        } 
       cursor.close();
        return list;
   } 
```

然后我试图调用看起来像的网络服务 BoldApi

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.Data.SqlClient

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
' <System.Web.Script.Services.ScriptService()> _
<WebService(Namespace:="http://tempuri.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class BoldApi
    Inherits System.Web.Services.WebService

    Dim b_id As Integer
    Dim b_time As String
    Dim b_lat As String
    Dim b_lon As String

    Public Property idBreadcrumb() As Integer
        Get
            Return b_id
        End Get
        Set(ByVal value As Integer)
            b_id = value
        End Set
    End Property

    Public Property timeBreadcrumb() As String
        Get
            Return b_time
        End Get
        Set(ByVal value As String)
            b_time = value
        End Set
    End Property

    Public Property latBreadcrumb() As String
        Get
            Return b_lat
        End Get
        Set(ByVal value As String)
            b_lat = value
        End Set
    End Property

    Public Property lonBreadcrumb() As String
        Get
            Return b_lon
        End Get
        Set(ByVal value As String)
            b_lon = value
        End Set
    End Property

    <WebMethod()> _
    Public Function JSONpass(ByVal jsArray() As BoldApi) As Boolean
        For X = 0 To jsArray.Length - 1
            ' Usage example
            b_id = jsArray(X).idBreadcrumb()
            b_time = jsArray(X).timeBreadcrumb()
            b_lat = jsArray(X).latBreadcrumb()
            b_lon = jsArray(X).lonBreadcrumb()

            InsertRow(b_time, b_lat, b_lon)

        Next
        Return True
    End Function

    Public Sub InsertRow(time As String, lat As String, lon As String)
        Dim myConnectionString As String = "Data Source=tcp:sql2k804.discountasp.net;Initial Catalog=SQL2008R2_868128_mjk;User ID=********;Password=******;"
        Dim myConnection As New SqlConnection(myConnectionString)
        Dim myInsertQuery As String = "INSERT INTO dbo.bold_breadcrumbs (latitude, longitude) values (lat,lon)"
        Dim myCommand As New SqlCommand(myInsertQuery)
        myCommand.Connection = myConnection
        myConnection.Open()
        myCommand.ExecuteNonQuery()
        myCommand.Connection.Close()
    End Sub 'SelectSqlClientSrvRows

End Class 
```

通过使用看起来像的 HttpPost

```
HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost("http://www.gamoda.org/r/Bold/api/BoldApi.asmx");

                try {
                    httppost.setEntity((HttpEntity) jsArray);
                    HttpResponse response = httpclient.execute(httppost);
                } catch (ClientProtocolException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

我收到错误：java.lang.ClassCastException: org.json.JSONArray

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:27:25.233

您将 jsArray 定义为 JSONArray 对象，`JSONArray jsArray = new JSONArray(sqlist);` 但是，您发送 http 请求的代码将其强制转换为`HttpEntity`，这导致无效并抛出`java.lang.ClassCastException: org.json.JSONArray`。您应该自己将 jsArray 转换为实体对象。

```
Map<String, String> param = .... //here is a Map object for example, edit to make it fit your case
ArrayList<BasicNameValuePair> postData = new ArrayList<BasicNameValuePair>();
for (Map.Entry<String, String> m : param.entrySet()) {
    postData.add(new BasicNameValuePair(m.getKey(), m.getValue()));
}
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(postData);
httpPost.setEntity(entity);
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

# jquery - 防止在滚动时多次触发脚本

> ID：10272866
> 
> 赞同：1
> 
> 时间：2012-04-22T22:56:05.210
> 
> 标签：jquery, hover, delay, settimeout, wait

我有一个跨度列表，“元数据”存储在 alt 标签中。当用户将鼠标悬停在跨度上整整一秒时，alt 标签信息被附加到不同的元素上，以供读取。

我的问题是，如果我快速滚动多个跨度，脚本会触发多次；所以 setTimeout() 是没有意义的，因为它们最终都会触发，并且我会附加所有这些 alt，而只是悬停一整秒的那个。

```
var target;
$("#LIST span").live('hover', function(){
    target = $(this);
    setTimeout(function() {
        getALT = target.attr('alt');
        $(document).showALT();
    }, 1000);
});

jQuery.fn.showALT = function(){
    $("#tell2").append('X ')
    $(".Show_Info").attr('src', getALT);
} 
```

上面显然有缺陷，我知道为什么，如上所述。我不确定如何完成我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:07:57.497

使用前清除它。

```
var target;
var timeO;
$("#LIST span").live('hover', function(){
    target = $(this);
    clearTimeout(timeO);
    timeO = setTimeout(function() {
        getALT = target.attr('alt');
        $(document).showALT();
    }, 1000);
});

jQuery.fn.showALT = function(){
    $("#tell2").append('X ')
    $(".Show_Info").attr('src', getALT);
} 
```

PS：您也可以使用：`function showALT(){`而不是：`jQuery.fn.showALT = function(){`

PS2：如果您使用 jQ 7+，则不`.live()`推荐使用该方法。改为使用`.on()`：

`$("#LIST").on('hover','span', function(){`

# java - 十六进制的格式说明符在java中不起作用

> ID：10272873
> 
> 赞同：-2
> 
> 时间：2012-04-22T22:56:41.837
> 
> 标签：java, format, printf

我总是遇到异常

```
Exception in thread "main" java.util.FormatFlagsConversionMismatchException: Conversion = h, Flags = 0 
```

在这行代码上

```
String.format("%02H", data[i]); 
```

数据数组包含 char 变量。

我想以十六进制格式打印这些字符，例如 09，而不仅仅是 9。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:08:18.410

我认为您需要`String.format("%02X", (int)data[i]);`改用。

[查看Java code To convert byte to Hexadecimal](https://stackoverflow.com/questions/2817752/java-code-to-convert-byte-to-hexadecimal)的答案，以获得关于该主题的扩展讨论。

# math - 数学 - 从符号方程组中获取 x

> ID：10272878
> 
> 赞同：0
> 
> 时间：2012-04-22T22:57:06.220
> 
> 标签：math, equation

起初很抱歉英语不好，我绝对不擅长数学英语。

我有一个方程组：

![在此处输入图像描述](../Images/154b08eb6cb271b8b581d7c667f4b104.png)

我需要清理 x。我可以使用其余的符号。只要得到x。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:33:22.097

您有两个带有两个未知数的方程：x 和 y。这是一个非常标准的线性代数问题。

```
n*x -p*y = w
x + y = I 
```

Wolfram Alpha 可以轻松地为您提供解决方案：

[http://www.wolframalpha.com/input/?i=inv+%7B%7Bn%2C+-p%7D%2C+%7B1%2C+1%7D%7D](http://www.wolframalpha.com/input/?i=inv+%7B%7Bn%2C+-p%7D%2C+%7B1%2C+1%7D%7D)

乘以右边的倒数，你就会得到答案：

[http://www.wolframalpha.com/input/?i=inv+%7B%7Bn%2C+-p%7D%2C+%7B1%2C+1%7D%7D](http://www.wolframalpha.com/input/?i=inv+%7B%7Bn%2C+-p%7D%2C+%7B1%2C+1%7D%7D) *%7Bw%2C+I%7D

如果这对你来说太多了，那么我会为 y 求解第二个方程：

```
y = I -x 
```

将该值代入第一个方程：

```
n*x -p*(I-x) = w 
```

通过重新排列来简化，所以只有 x 保留在左侧：

```
(n+p)*x = w+p*I 
```

求解 x 的方程：

```
x = (w+p*I)/(n+p) 
```

将其代入另一个方程得到 y：

```
y = I - (w+p*I)/(n+p) 
```

# python - 如何从同级目录导入 Python 脚本？

> ID：10272879
> 
> 赞同：74
> 
> 时间：2012-04-22T22:57:18.720
> 
> 标签：python, import, path, pythonpath

假设我有以下目录结构：

```
parent_dir/
    foo_dir/
        foo.py
    bar_dir/
        bar.py 
```

如果我想`bar.py`从内部导入`foo.py`，我会怎么做？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-22T23:00:37.733

如果所有出现的目录都是 Python*包*，即它们都包含`__init__.py`，那么您可以使用

```
from ..bar_dir import bar 
```

如果目录不是 Python 包，你可以通过弄乱 来做到这一点`sys.path`，但你不应该这样做。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-22T23:01:36.593

您可以使用`sys`和`os`模块进行通用导入。从`foo.py`线条开始

```
import sys
import os
sys.path.append(os.path.abspath('../bar_dir'))
import bar 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-16T17:50:53.203

假设您有以下结构：

```
root
  |_ productconst.py
  |_ products
     |_ __init__.py 
```

如果您想在中导入 productconst `products.__init__`，则可以使用以下命令：

```
from ..productconst import * 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-27T15:22:40.777

如果您在 python 3+ 中遇到问题，以下对我有用，使用`sys.path.append("..")`.

```
sys.path.append("..")
from bar_dir import bar 
```

# php - 使用 PHP 用 MySQL 数据填充 HTML 表

> ID：10272880
> 
> 赞同：0
> 
> 时间：2012-04-22T22:57:27.597
> 
> 标签：php, mysql, html, css

我正在尝试使用 MySQL 数据填充 HTML 表，但在第 128 行（即在带有 的行之后`$row['location']`）出现错误，显示：T_CONSTANT_ENCAPSED_STRING。我已经用谷歌搜索了，但我无法真正理解这意味着什么或我可能会出错的地方。任何帮助将**不胜**感激。谢谢 ：）

```
echo "<table id='row1_border'>";
                    while($row = mysql_fetch_array($result)) ;
                    {
                    echo "<tbody>";
                        echo "<tr class='job_listing'>";
                            echo "<td class='job'>";
                                echo "<div class='company_image'></div>";

                                echo "<div class='job_title'>";
                                    echo "<span class='job_title_style'></span>";
                                echo "</div>";
                                echo "<div class='company_name'>";
                                    echo "<span class='company_name_style'>Akin, Gump, and Smith</span>";
                                echo "</div>";
                                echo "<div class='company_tagline'>";
                                    echo "<span class='company_tagline_style'>This is just a test.</span>";
                                echo "</div>";
                            echo "</td>";
                            echo "<td class='location'>";
                                echo "<div class='location_div'>";
                                    echo "<span class='location_style'>";
                                        $row['location']

                                "</span>";
                                echo "</div>";
                            echo "</td>";
                            echo "<td class='job_type'>";
                                echo "<div class='job_type_div'>";
                                    echo "<span class='job_type_style'>";

                                        echo .$row['job_type'].
                                    "</span>";
                                echo "</div>";
                            echo "</td>";
                        echo "</tr>";
                    echo "</tbody>";
                    }
                echo "</table>"

                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:00:08.313

您在有问题的行之前没有回声，请尝试：

回声 $row['location'];

此行之后的行也没有正确回显。

确保你在呼应每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:17:07.740

这是因为你需要分号。

我建议您以后阅读该错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:20:30.000

尝试这个

```
echo "<td class='location'>";
     echo "<div class='location_div'>";
         echo "<span class='location_style'>".$row['location']."</span>";                   
     echo "</div>";
 echo "</td>";
 echo "<td class='job_type'>";
     echo "<div class='job_type_div'>";
         echo "<span class='job_type_style'>".$row['job_type']."</span>";
     echo "</div>";
 echo "</td>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T23:44:14.123

祝你好运

```
<table><tbody>
<?php while($row = mysql_fetch_array($result)) { ?>
                    <tr class='job_listing'>
                        <td class='job'>
                            <div class='company_image'></div>

                            <div class='job_title'>
                                <span class='job_title_style'></span>
                            </div>
                            <div class='company_name'>
                                <span class='company_name_style'>Akin, Gump, and Smith</span>
                            </div>
                            <div class='company_tagline'>
                                <span class='company_tagline_style'>This is just a test.</span>
                            </div>
                        </td>
                        <td class='location'>
                            <div class='location_div'>
                                <span class='location_style'>
                                   <?php  echo $row['location']; ?>

                            </span>
                            </div>
                        </td>
                        <td class='job_type'>
                            <div class='job_type_div'>
                                <span class='job_type_style'>

                                    <?php  $row['job_type']; ?>
                                </span>
                            </div>
                        </td>
                    </tr>
                    <?php } ?>
                </tbody>
            </table> 
```

# c# - 从 App.Config 将程序集加载到 AppDomain

> ID：10272883
> 
> 赞同：0
> 
> 时间：2012-04-22T22:57:47.953
> 
> 标签：c#, reflection, assemblies, app-config, appdomain

我有一个 DLL，我需要成为当前 AppDomain 的一部分。有没有办法让 AppDomain 从 app.config/web.config 中的某个列表中获取 dll？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:03:27.480

您可以将程序集的名称放在 app.config 文件中，然后在运行时使用 Assembly.Load 选项和反射加载它。这是 MSDN 文章的链接，描述了如何执行此操作。

[http://msdn.microsoft.com/en-us/library/25y1ya39.aspx](http://msdn.microsoft.com/en-us/library/25y1ya39.aspx)

基本

1.  将程序集的名称放在 app.config 文件中
2.  使用 ConfigurationManager 读取条目并将名称转换为程序中的字符串
3.  将程序集的名称传递给 Assembly.Load 方法。

链接中的示例：

```
public class Asmload0
{
    public static void Main()
    {
        // Use the file name to load the assembly into the current
        // application domain.
        Assembly a = Assembly.Load("example");
        // Get the type to use.
        Type myType = a.GetType("Example");
        // Get the method to call.
        MethodInfo myMethod = myType.GetMethod("MethodA");
        // Create an instance.
        object obj = Activator.CreateInstance(myType);
        // Execute the method.
        myMethod.Invoke(obj, null);
    }
} 
```

# jboss7.x - 无法在 Ubuntu 中连接到 CLI jboss 7.1.1.FINAL

> ID：10272884
> 
> 赞同：6
> 
> 时间：2012-04-22T22:58:00.620
> 
> 标签：jboss7.x

我无法在 Ubuntu 中连接到 CLI Jboss 7.1.1.FINAL，我想知道为什么？

在控制台中我输入：

```
mastervodoo@vodoo-Studio-1558:/opt/jboss-as-7.1.1.Final/bin$ ./jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server or 'help'     for the list of supported commands.
[disconnected /] connect
The controller is not available at localhost:9999
[disconnected /] connect 127.0.0.1
The controller is not available at 127.0.0.1:9999
[disconnected /] connect 127.0.1.1
The controller is not available at 127.0.1.1:9999 
[disconnected /] connect 192.168.1.33
The controller is not available at 192.168.1.33:9999
[disconnected /] 
```

是一个独立的配置，为什么我不能进入？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T15:41:18.430

Check your XML configuration, e.g. standalone.xml or domain.xml, and look `<interfaces/>` section. Make sure you're binding to 127.0.0.1 for the management interface. Also have a look at your `management-native` port in the `<socket-binding/>` section and make sure it's set to 9999\. These are the defaults.

It should look something like the following:

```
<interfaces>
    <interface name="management">
        <inet-address value="${jboss.bind.address.management:127.0.0.1}"/>
    </interface>
    <interface name="public">
        <inet-address value="${jboss.bind.address:127.0.0.1}"/>
    </interface>
    ...
</interfaces>

<socket-binding-group name="standard-sockets" default-interface="public" port-offset="${jboss.socket.binding.port-offset:0}">
    <socket-binding name="management-native" interface="management" port="${jboss.management.native.port:9999}"/>
    <socket-binding name="management-http" interface="management" port="${jboss.management.http.port:9990}"/>
    <socket-binding name="management-https" interface="management" port="${jboss.management.https.port:9443}"/>
    ...
</socket-binding-group> 
```

You could also pass properties to change the values if the expression values are being used.

```
$JBOSS_HOME/bin/standalone.sh -Djboss.bind.address.management=127.0.0.1 -Djboss.management.native.port=9999 
```

If it's still not connecting it's likely a local issue. Most likely a firewall getting in the way or possibly you don't have localhost set-up in your hosts.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-26T13:14:29.673

如果你的 jboss 实例没有绑定到 127.0.0.1，你可以使用`--controller`如下选项：

```
./jboss-cli.sh --controller=YOUR_IP:9999 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:49:58.027

检查您的主机文件！

/etc/hosts

您的**localhost**必须指定为**127.0.0.1**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T13:54:21.497

对我来说，这是因为 JBoss 在处理错误任务时负载过重，导致 Hibernate 异常发生率很高。

我在重试约 20 次后设法连接，之后我无法再次连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T23:30:07.163

只是为了让下一个偶然发现这个问题的人，如果你在 Mac 上，这将解决它：

[http://saltnlight5.blogspot.com.au/2012/07/getting-jboss-clish-to-work-on-macosx.html](http://saltnlight5.blogspot.com.au/2012/07/getting-jboss-clish-to-work-on-macosx.html)

如果链接断开：

1.  启动服务器： bin/standalone.sh -Djava.nio.channels.spi.SelectorProvider=sun.nio.ch.KQueueSelectorProvider
2.  在客户端，首先运行：export JAVA_OPTS="-Djava.nio.channels.spi.SelectorProvider=sun.nio.ch.KQueueSelectorProvider"
3.  然后运行 ​​bin/jboss-cli.sh --connect

您现在应该已连接！

# java - 将使用不可序列化对象的类保存到文件

> ID：10272886
> 
> 赞同：3
> 
> 时间：2012-04-22T22:58:09.713
> 
> 标签：java, serializable

我已经使用不可序列化的对象（例如 ArrayList 等）创建了一个类......这个类实现了 Serializable 但当然当我尝试使用 ObjectOutputStream 的 writeObject 方法将类实例写入文件时，我得到一个 IOException。
如何避免这个问题？writeObject 方法是最终的，所以我不能覆盖它，我是否必须手动保存（读取所有 ArrayList 并逐个保存它的元素）对象，或者有机会管理 writeObject 方法工作？

PS：我认为没有必要包含，因为它对问题没有意义，但是如果您认为有必要发布代码（其中还包含其他用户定义的类，因此很难理解），请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:40:53.417

1.  您不需要覆盖*或*“提供实现`of`writeObject()”。

2.  `ArrayList` *根据上面的评论，*是可序列化的。**

**   您需要阅读您收到的实际错误消息。它不仅仅是“一个 IOException”，它还包含信息。几乎可以肯定它告诉您其他一些类是不可序列化的。所以这就是你必须解决的问题。这样做通常也不涉及`writeObject()`方法。* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:33:52.570

writeObject 是最终的，但它也是私有的。你不应该覆盖它。您应该只提供一个实现（也是私有的）。这很奇怪，但事实就是如此。*

# java - 如何将 X509CertImpl 转换为 X509CRLEntry

> ID：10272889
> 
> 赞同：1
> 
> 时间：2012-04-22T22:58:27.750
> 
> 标签：java, x509

我正在尝试将 X509CertImpl 转换为 X509CRLEntry 以便我可以生成我的 X509CRLImpl 但我找不到这样做的方法，这不应该很容易吗？CRL 应该由撤销的 X509 证书组成，因此它必须是一种简单的方法！

我正在使用 sun.security.x509 和 java.security.cert 包

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:17:37.830

CRL 不包含证书，因此您无法从 CRL 获得证书。

# ruby-on-rails - after_filter :foo foo 在 rails 3.2 中的控制器之前运行

> ID：10272891
> 
> 赞同：1
> 
> 时间：2012-04-22T22:58:29.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一定在这里做错了什么。我想在控制器运行后运行一个函数。此函数填充我的会话变量的某些部分，然后我在下一个请求中使用该信息。这是代码。

```
class SummariesController < ApplicationController  
    after_filter :foo, :only=>[:bar]  

    def foo  
        session[:x] = y  
    end  

    def bar  
        #some code  
    end  
end 
```

在此代码`foo`之前被调用`bar`。我希望在 bar 渲染后调用它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:18:01.737

`after_filter`在将响应发送到客户端之前执行，因此您将无法在`bar`呈现后运行它。从 Rails 指南：

> 他们可以访问*即将发送*给客户端的响应数据

# javascript - 检查并设置表格行的可见性

> ID：10272895
> 
> 赞同：1
> 
> 时间：2012-04-22T22:59:08.497
> 
> 标签：javascript, row, visible

我有一个有几行的表，如果它上面的行中的字段不为空，则每一行都变得可见。我写了一个工作脚本，但我是 Javascript 新手，感觉它太复杂了。换句话说，有没有更好、更简洁的解决方案来解决这个问题？我需要在多个位置执行相同的解决方案，因此非常欢迎更好的解决方案。

```
<script language="javascript">
   function MyTableRow(){
    //Row 1
 if(document.getElementById("DQ23I1010").value=="") 
  {
    //alert("test");
    document.getElementById("myRow1").style.display='none';
}
else
{
    document.getElementById("myRow1").style.display='block';   
}

 //Row 2
if(document.getElementById("DQ24I1011").value=="") 
  {
    document.getElementById("myRow2").style.display='none';
}
else
{
    document.getElementById("myRow2").style.display='block';   
}
//Row 3
if(document.getElementById("DQ25I1012").value=="") 
{
    document.getElementById("myRow3").style.display='none';
}
else
{
    document.getElementById("myRow3").style.display='block';   
}
//Row 4
if(document.getElementById("DQ26I1013").value=="") 
{
    document.getElementById("myRow4").style.display='none';
 }
else
{
    document.getElementById("myRow4").style.display='block';   
}
//Row 5
   if(document.getElementById("DQ27I1014").value=="") 
{
    document.getElementById("myRow5").style.display='none';
}
else
{
    document.getElementById("myRow5").style.display='block';   
}
//Row 6
if(document.getElementById("DQ28I1015").value=="") 
{
    document.getElementById("myRow6").style.display='none';
}
else
{
    document.getElementById("myRow6").style.display='block';   
}
//Row 7
if(document.getElementById("DQ29I1016").value=="") 
{
    document.getElementById("myRow7").style.display='none';
}
else
{
    document.getElementById("myRow7").style.display='block';   
}
 //Row 8
 if(document.getElementById("DQ30I1017").value=="") 
{
    document.getElementById("myRow8").style.display='none';
}
else
{
    document.getElementById("myRow8").style.display='block';   
}
  //Row 9
if(document.getElementById("DQ31I1018").value=="") 
{
    document.getElementById("myRow9").style.display='none';
}
else
{
    document.getElementById("myRow9").style.display='block';   
}
 //Row 10
 if(document.getElementById("DQ32I1019").value=="") 
{
    document.getElementById("myRow10").style.display='none';
}
else
{
    document.getElementById("myRow10").style.display='block';   
}
} 

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T23:14:05.417

是的，它可以很容易地缩短...

```
function MyTableRow() {
   for (var i = 1; i <= 10; i++) {
       var row = document.getElementById("myRow" + i);
       if (document.getElementById("DQ" + (22 + i) + "I10" + (i + 9)).value == "")
           row.style.display = 'none';
       else
           row.style.display = '';  
   }
} 
```

可能有一个更好的解决方案，但我们需要更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:06:32.567

我认为[jquery](http://api.jquery.com/class-selector/)可以帮助您做类似的事情，将您的行类设置为 class="row"

```
<table>
    <tr class="row">
        <td></td>
    </tr>
    <tr class="row">
        <td></td>
    </tr>
</table> 
```

那么你的代码看起来像这样：

```
var showRow = true;
$(".row").each(function(index){
    if (!showRow) {
        $(this).css("display", "none");
    }
    if ($this.find(".dataItem").val() == "") {
        showRow = false;
    }
}); 
```

# c - 读取文件中的行数

> ID：10272896
> 
> 赞同：1
> 
> 时间：2012-04-22T22:59:18.017
> 
> 标签：c, linux, file, io

我需要计算文件中的行数，但是，我必须在没有“简单”函数（例如：`fopen`、、`fscanf`...`fgets`等）的情况下进行计算。

意思是我不能这样做：

```
int calculateLines(char *filename)
 {
     FILE *myFile;
     char c;
     int myLines = 0;

     myFile = fopen(filename, "r");

     if(myFile == NULL)
         return 0;

     while ((c = fgetc(f)) != EOF)
         if(c == '\n')
             myLines++;

     fclose(f);

     if(c != '\n')
         myLines++;

     return myLines;
 } 
```

为此，我只能使用系统调用`read`, `write`, `close`, `open`& `fork`。

从我到目前为止所做的事情来看，我认为：

*   打开文件`open` ： `someResult = wrapper_open(argv[1],O_RDONLY,0);`
*   逐行阅读`read`：我可以以某种方式操纵阅读以逐行阅读吗？我试图检查它的教程但是空手而归。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:06:25.827

您无法真正逐行阅读`read`. 相反，您会读入一个数据*块*（其中可能包含任意数量的行，并且可能包含一些部分行）。计算该块中的换行符，然后重复读取/计数过程，直到到达文件末尾。

# symfony - symfony2 学说：生成：CRUD 错误

> ID：10272897
> 
> 赞同：1
> 
> 时间：2012-04-22T22:59:19.600
> 
> 标签：symfony

我是 symfony2 框架的新手。在安装 symfony 之前，我有一个 mysql 数据库。所以我能够基于数据库生成模式。

我正在尝试为其中一张表生成 CRUD 控制器。这是一个用户表，主键是 UserId。但是，当我运行教义：生成：CRUD 时，出现以下错误

CRUD 生成器期望实体对象有一个名为“id”的主键字段和 getId() 方法。

我必须将 Id 作为 PK 标识符吗？这是最好的做法吗？我对表的所有 PK 都是由 tablenameid 定义的。

我将 User 实体类的 get 方法设置为 getUserid()。我怎样才能让 CRUD 生成器知道这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:50:56.083

我不认为它必须是 'id' 作为 PK 标识符。我认为您的实体中可能存在一些错误。

```
/** @Id @Column(type="integer") @GeneratedValue */
private $userid; 
```

YML 文件：

```
Bundle\BundleBundle\Entity\Example:
  type: entity
  table: Example
  fields:
    userid:
      id: true
      type: integer
      generator:
        strategy: AUTO 
```

# python - python列表理解中的多个IF条件

> ID：10272898
> 
> 赞同：26
> 
> 时间：2012-04-22T22:59:31.413
> 
> 标签：python, conditional, list-comprehension

我想知道，是否可以`if`在列表理解中放置多个条件？我在文档中没有找到类似的东西。

我希望能够做这样的事情

```
ar=[]
for i in range(1,n):
  if i%4 == 0: ar.append('four')
  elif i%6 == 0: ar.append('six')
  else: ar.append(i) 
```

使用列表理解。我该怎么做？

这甚至可能吗？如果不是，那么完成此任务的最优雅（pythonic）方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-22T23:03:08.370

怎么样

```
ar = [('four' if i % 4 == 0 else ('six' if i % 6 == 0 else i)) for i in range(1, n)] 
```

例如，如果`n = 30`这是

```
[1, 2, 3, 'four', 5, 'six', 7, 'four', 9, 10, 11, 'four', 13, 14, 15, 'four', 17, 'six', 19, 'four', 21, 22, 23, 'four', 25, 26, 27, 'four', 29] 
```

ETA：以下是应用条件列表的方法：

```
CONDITIONS = [(lambda i: i % 4 == 0, "four"), (lambda i: i % 6 == 0, "six"),
              (lambda i: i % 7 == 0, "seven")]

def apply_conditions(i):
    for condition, replacement in CONDITIONS:
        if condition(i):
            return replacement
    return i

ar = map(apply_conditions, range(0, n)) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-26T07:07:01.233

您可以将逻辑放在单独的函数中，然后具有列表理解的优雅以及函数的可读性：

```
def cond(i):
    if i % 4 == 0: return 'four'
    elif i % 6 == 0: return 'six'

    return i

l=[cond(i) for i in range(1,n)] 
```

如果你有很多条件，通常更容易维护一个 dict 而不是一个大的 if/else 阶梯：

```
def cond(i):
    mkey={4:'four',6:'six'}
    return next((mkey[k] for k in mkey if i%k == 0), i) 
```

这使用 next 的默认版本来查找任何整数键是否是该键或数字本身的倍数，如果不是，则默认值。

如果需要，这可能是一个单一的理解：

```
[next((v for k,v in {4:'four',6:'six'}.items() if i%k==0), i) for i  in range(1,10)] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-19T16:13:50.583

```
ar = ["four" if i%4==0 else "six" if i%6==0  else i for i in range(1,30)] 
```

# graph - 可以在 orientdb 图形数据库中创建子图吗？

> ID：10272900
> 
> 赞同：2
> 
> 时间：2012-04-22T22:59:45.083
> 
> 标签：graph, nosql, graph-databases, orientdb

大家好，我正在玩 orientdb 来评估他是否包含在一个新项目中。

这是我的问题。

看看用例，我将拥有很多超级节点（至少有 5-10k 个传出关系的节点），我认为这些节点可能是高并发访问的一个令人讨厌的瓶颈。

整个数据库必须为 20 个部门提供服务，每个部门拥有数据的一个分区，并且这些“块”不能从其他部门访问。每个部门的分区共享大约 60% 的数据结构模式，另外 40% 的模式是部门独立的......

在系统级别，我有几个代理可以完全读取图表以进行数据分析和分析，每个部门都可以拥有自己的分析代理，它只会分析他的分区数据。

现在。我的问题是可以将“独立”子图创建到东方图数据库中吗？

感谢大家的时间和帮助。

马可

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:08:06.467

您可以在您的域中将此用例建模为图形：

根 -> * 部门 -> 其他节点

以这种方式，部门从自己的部门节点开始交叉图。

要使用已经完成的内容，请查看 Marko Rodriguez（蓝图和 Gremlin 语言的主要作者）的这篇文章：http: [//thinkaurelius.com/2012/04/06/multitenant-graph-applications/](http://thinkaurelius.com/2012/04/06/multitenant-graph-applications/)

[最近这个项目在OrientDB](http://www.orientdb.org)的 Blueprints 实现之上运行分区图： [https ://github.com/tinkerpop/blueprints/wiki/Partition-Implementation](https://github.com/tinkerpop/blueprints/wiki/Partition-Implementation)

# c++ - 万神殿的第一次机会例外

> ID：10272903
> 
> 赞同：0
> 
> 时间：2012-04-22T23:00:06.373
> 
> 标签：c++, visual-studio-2010, pantheios

我的应用程序运行良好，直到我尝试使用应用程序验证程序对其进行调试。之后，我开始收到“第一次机会异常...：指定了无效句柄”，问题似乎出在 Pantheios 的“bailout.c”文件中：

```
hFile = CreateFileA("logging-bailout.txt"
                ,   GENERIC_WRITE
                ,   0
                ,   NULL
                ,   OPEN_ALWAYS
                ,   0
                ,   NULL); <--- this is where it crashes, line 442 
```

并留言：

```
First-chance exception at 0x7769f8cd in myapp.exe: 0xC0000008: An invalid handle was specified.

=======================================
VERIFIER STOP 0000000000000300: pid 0x3814: Invalid handle exception for current stack trace. 

    00000000C0000008 : Exception code.
    00000000111DE950 : Exception record. Use .exr to display it.
    00000000111DE460 : Context record. Use .cxr to display it.
    0000000000000000 : Not used.

=======================================
This verifier stop is continuable.
After debugging it use `go' to continue.

======================================= 
```

在控制台刚刚记录了我使用 Pantheios 得到的异常之前，我并没有太在意。但是，现在当应用程序在第一次使用 Pantheios 进行日志记录时崩溃时，我该处理这个问题了，但我不太确定如何处理。

我在设置我的 Pantheios 时遵循本指南：http: [//www.codeproject.com/Articles/27119/Using-Callback-Back-ends-with-the-Pantheios-Loggin](http://www.codeproject.com/Articles/27119/Using-Callback-Back-ends-with-the-Pantheios-Loggin)

在我记录的每个文件中，源文件中都有以下几行：

```
#include <pantheios/pantheios.hpp>
#include <pantheios/inserters/boolean.hpp>
#include <pantheios/inserters/integer.hpp>
#include <Shared/logs.h> 
```

logs.h 包含：

```
#include <pantheios/implicit_link/core.h>
#include <pantheios/implicit_link/fe.simple.h>
#include <pantheios/implicit_link/be.WindowsConsole.h> 
```

我也在`pantheios::init();`做任何记录之前打电话。

我正在使用 Visual Studio 2010，并且在“附加依赖项”下包含以下库文件：

```
$(PANTHEIOS_ROOT)\lib\pantheios.1.core.vc10.mt.debug.lib
$(PANTHEIOS_ROOT)\lib\pantheios.1.be.WindowsConsole.vc10.mt.debug.lib
$(PANTHEIOS_ROOT)\lib\pantheios.1.fe.simple.vc10.mt.debug.lib
$(PANTHEIOS_ROOT)\lib\pantheios.1.util.vc10.mt.debug.lib 
```

但是，我的所有日​​志记录如下所示：

> myapp.exe 中 0x750bb9bc 处的第一次机会异常：Microsoft C++ 异常：stlsoft::winstl_project::windows_exception 在内存位置 0x1822bda0..
> 
> 20120423-104817.497：无法将消息写入日志文件；给定消息如下：[myapp.Qt.Framework.13424, 23/04/2012 10:48:17.496 am; 调试]：“一些日志记录”

打电话时`pantheios::log(pantheios::debug, "some logging");`

然后，我的所有日​​志都被写入项目所在文件夹中的“救助”文件中。这以前有效，但它在我的“待办事项清单”上是一个大子弹（但比其他事情更进一步）。

所以现在我的问题是，我该如何解决这个问题？遵循我能找到的每个教程，但没有成功。为什么我的应用在运行 Ms Application Verifier 后决定不再接受这个？没有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:33:58.180

[第一次机会异常](http://blogs.msdn.com/b/davidklinems/archive/2005/07/12/438061.aspx)仅意味着引发了异常。这并不意味着您的程序中有错误，只是调试器向您显示正在引发异常，因此您有机会在它传播到调用链之前对其进行检查。如果异常被异常处理程序（例如用于日志记录）捕获，您的应用程序将继续，否则调试器会为您提供第二次机会异常通知，通知您应用程序将由于未处理的异常而退出。

如果您不想收到第一次机会异常通知，您可以在调试器中将其关闭。 [此链接](http://support.microsoft.com/kb/961889)可能有助于如何关闭应用程序验证程序中的异常处理。

> 要变通解决此问题，请关闭应用程序验证程序中的异常测试。为此，请按照下列步骤操作：
> 
> 1.启动应用程序验证器。
> 
> 2.在应用程序下，单击要测试的 GDI+ 程序。
> 
> 3.在测试下，展开基础。
> 
> 4.单击以清除例外复选框。
> 
> 5.运行您要测试的 GDI+ 程序。
> 
> 您还可以配置调试工具以确保在发生访问冲突时不会在调试工具中遇到断点。

另一种方法（在 MSVS 中关闭异常通知）是通过“Debug->Exceptions...”

或者，如果可能，请确保首先不会引发异常。您将需要检查异常的性质（例如找不到文件）并修复阻止预期操作的条件。

鉴于 Application Verifier 的性质/目的，我建议采用后一种方法：AV 告诉您发生了一些不正确的事情，以前可能没问题，但以后可能会导致问题（取决于环境、情况等）

# python - 找到两个字典之间“关键”区别的简洁方法？

> ID：10272909
> 
> 赞同：6
> 
> 时间：2012-04-22T23:00:32.597
> 
> 标签：python, dictionary, set, set-difference

我需要比较两个字典以在一个字典中找到另一个字典中没有的键集。

我知道 Python*集合*对象支持：

```
set3=set1-set2 
```

但我不能这样做：

```
dict3=dict1-dict2 
```

或者：

```
missingKeys=dict1.keys()-dict2.keys() 
```

（最后一点我有点惊讶，因为在 Java 中，键是一个 Set 对象。）一种解决方案是：

```
missingKeys=set(dict1.keys())-set(dict2.keys()) 
```

有没有更好或更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-22T23:07:51.767

蟒蛇 2.7：

```
>>> d = {1:2, 2:3, 3:4}
>>> d2 = {2:20, 3:30}
>>> set(d)-set(d2)
set([1]) 
```

蟒蛇 3.2：

```
>>> d = {1:2, 2:3, 3:4}
>>> d2 = {2:20, 3:30}
>>> d.keys()-d2.keys()
{1} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-18T07:47:25.930

对于可移植的方式，我建议在 Python 2.7 中使用 dict.viewkeys - 它是 Python 3.x dict.keys 的反向移植，并由 2to3 自动转换。

例子：

```
>>> left = {1: 2, 2: 3, 3: 4}
>>> right = {2: 20, 3:30}
>>> left.viewkeys() - right.viewkeys()
set([1]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T23:10:04.547

也许

```
[x for x in dict1.keys() if x not in dict2.keys()] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-14T23:44:55.057

这应该适用于 Python 2.7 和 3.x：

```
>>> keys = getattr(dict, 'viewkeys', dict.keys)
>>> left = {1: 2, 2: 3, 3: 4}
>>> right = {2: 20, 3:30} 
>>> list(keys(left) - keys(right))
[1] 
```

# ios - iOS - 斯坦福教程 - CoreDataTableViewController - 许可证

> ID：10272911
> 
> 赞同：1
> 
> 时间：2012-04-22T23:00:46.013
> 
> 标签：ios, core-data, licensing

**概述：**

斯坦福 iOS 教程包含一个实现（标题 + 实现文件），以帮助在使用核心数据时使用表格视图。

**链接**- [http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)

**文件名**- *CoreDataTableViewController.zip*（包含下面提到的 2 个文件）

*   *CoreDataTableViewController.h*
*   *CoreDataTableViewController.m*

它在两个文件中都包含以下文本：

```
//  CoreDataTableViewController.h
//
//  Created for Stanford CS193p Fall 2011.
//  Copyright 2011 Stanford University. All rights reserved. 
```

**问题**

1.  我可以在我的 iOS 应用程序中使用这 2 个文件吗？
2.  我应该和斯坦福的人核实一下吗？
3.  我应该保留上述评论吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T18:53:40.240

CoreDataTableViewController 只是从 Apples 文档中复制的一堆代码。如果您按照讲座进行操作，Paul Hegarty 会指出这一点。您可以将文档中的相同信息复制并粘贴到您自己的类和子类中。 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T23:07:44.120

那么你下载它们的页面有这个：

“斯坦福大学的这项工作是根据知识共享署名-非商业性-相同方式共享 3.0 美国许可证获得许可的。”

因此，您可以将其用于研究和学习，但不能用于商业目的。

以下是有关该许可证的更多详细信息： [http ://creativecommons.org/licenses/by-nc-sa/3.0/us/](http://creativecommons.org/licenses/by-nc-sa/3.0/us/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T14:55:36.947

我在 Swift 中为 iOS 制作了这个新的核心数据包装器 - [https://github.com/tadija/AERecord](https://github.com/tadija/AERecord)

它有 Swift 版本的 CoreDataTableViewController，还有 CoreDataCollectionViewController。

除此之外，您可以使用它来设置 Core Data 堆栈，如下所示：

```
AERecord.setupCoreDataStack() 
```

当前线程的访问上下文如下：

```
AERecord.defaultContext 
```

像这样保存上下文：

```
AERecord.saveContext() 
```

像这样创建获取请求：

```
NSManagedObject.create()

NSManagedObject.firstOrCreateWithAttribute("city", value: "Belgrade")

NSManagedObject.deleteAll()

let predicate = ...
NSManagedObject.firstWithPredicate(predicate)

NSManagedObject.allWithAttribute("year", value: 1984) 
```

还有更多......我希望它对某人有用。

# php - 如何授予对 public_html 目录之外的文件的下载访问权限？

> ID：10272912
> 
> 赞同：4
> 
> 时间：2012-04-22T23:00:55.653
> 
> 标签：php, .htaccess, redirect

出于安全目的，我将文件存储在 public_html 文件夹之外。但是，我想以某种方式链接到特定文件，用户可以在其中下载这些文件之一。

我正在使用一个 jquery 脚本，它允许我将服务器 PATH 指定为上传文件夹，并且它确实在 public_html 文件夹之外上传。

唯一的问题是它需要我指定用于下载文件的“上传路径”的 URL。我想我可能能够做到：

```
public_html/redirect (contains htaccess which forwards all requests to "hiding" folder)

hiding (outside public_html)

A user clicks /redirect/file.doc and they download a file located at hiding/file.doc 
```

这可能吗？如果没有，我怎样才能让特定的文件下载访问我的 public_html 目录之外的文件？我知道我以前在其他脚本上看到过它......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-22T23:23:05.847

## 您可以使用“php 下载处理程序”执行此操作：

您可以使用这样的方法将文件内容和文件信息头返回给用户浏览器，只需确保在此之前没有输出任何其他内容。

我建议你把它放到单独的文件中，例如调用它`download.php`。

```
function returnFile( $filename ) {
    // Check if file exists, if it is not here return false:
    if ( !file_exists( $filename )) return false;
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    // Suggest better filename for browser to use when saving file:
    header('Content-Disposition: attachment; filename='.basename($filename));
    header('Content-Transfer-Encoding: binary');
    // Caching headers:
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    // This should be set:
    header('Content-Length: ' . filesize($filename));
    // Clean output buffer without sending it, alternatively you can do ob_end_clean(); to also turn off buffering.
    ob_clean();
    // And flush buffers, don't know actually why but php manual seems recommending it:
    flush();
    // Read file and output it's contents:
    readfile( $filename );
    // You need to exit after that or at least make sure that anything other is not echoed out:
    exit;
} 
```

## 将其扩展为基本用途：

```
// Added to download.php
if (isset($_GET['file'])) {
    $filename = '/home/username/public_files/'.$_GET['file'];
    returnFile( $filename );
} 
```

### 警告：

这是一个基本的例子，并没有考虑到用户可能会试图利用一些`$_GET`没有得到适当清理的邪恶优势。

这基本上意味着`passwd`如果某些条件适用，用户可以例如检索文件或其他一些敏感信息。

例如，检索`/etc/passwd`：

只需将浏览器指向`http://server.com/download.php?file=../../../etc/passwd`服务器即可返回该文件。因此，在实际使用之前，您应该了解如何正确检查和清理任何用户提供的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:15:04.497

不可能为`public_html`.

`mod_rewrite`仅重写请求，但路径仍应可供用户使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:37:15.050

另一种执行此操作的标准方法是使用[mod_xsendfile——](https://tn123.org/mod_xsendfile/)它将允许 Web 应用程序通过在标头 (X-SendFile) 中指定路径来让 Web 服务器发送一个文件作为其输出。

# url - 查找域及其子域中的所有网页

> ID：10272920
> 
> 赞同：3
> 
> 时间：2012-04-22T23:01:40.863
> 
> 标签：url, solr, web-crawler, nutch

我正在寻找一种方法来查找域中的所有网页和子域。例如，在 uoregon.edu 域中，我想查找该域和所有子域中的所有网页（例如，cs.uoregon.edu）。

我一直在看nutch，我认为它可以完成这项工作。但是，nutch 似乎会下载整个网页并将其编入索引以供以后搜索。但是，我想要一个只扫描网页以查找属于同一域的 URL 的爬虫。此外，nutch 似乎以序列化格式保存链接数据库。我该如何阅读它？我试过solr，它可以读取nutch收集的数据。但是，我认为我不需要 solr，因为我没有执行任何搜索。我只需要属于给定域的 URL。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:08:58.057

如果您熟悉红宝石，请考虑使用海葵。奇妙的爬行框架。这是开箱即用的示例代码。

```
require 'anemone'

urls = []

Anemone.crawl(site_url)
  anemone.on_every_page do |page|
    urls << page.url
  end
end 
```

[https://github.com/chriskite/anemone](https://github.com/chriskite/anemone)

免责声明：您需要使用问题中的补丁来抓取子域，并且您可能需要考虑添加最大页数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:12:55.030

查找给定域的所有子域的最简单方法是要求相关站点的 DNS 管理员为您提供[DNS 区域传输](http://en.wikipedia.org/wiki/DNS_zone_transfer)或其区域文件；如果该区域中有任何[通配符 DNS 条目](http://en.wikipedia.org/wiki/Wildcard_DNS_record)，您还必须获取响应通配符 DNS 条目请求的服务器的配置（可能还有*代码）。*不要忘记，域名空间的一部分可能由其他 DNS 服务器处理——您必须从它们全部获取数据。

这尤其复杂，因为 HTTP 服务器可能对烘焙到其服务器配置文件中的不同名称的请求有不同的处理，或者运行服务器的应用程序代码，或者运行服务器的应用程序代码可能会执行数据库查找以确定如何处理给定的名称。FTP 不提供基于名称的虚拟主机，您感兴趣的任何其他服务可能会或可能不会提供基于名称的虚拟主机协议。

# centos - Magento 管理面板无法访问且没有错误（服务器挂起后）

> ID：10272921
> 
> 赞同：4
> 
> 时间：2012-04-22T23:02:16.200
> 
> 标签：centos, magento

安装magento的服务器崩溃了（目前原因未知），现在后端无法访问。我要么没有错误，要么访问被拒绝。我能够执行密码重置。

我努力了：

*   清除浏览器 cookie 和缓存
*   清除 magento 中的 session、tmp 和缓存文件夹
*   使用 magento 数据库修复工具 - 未发现错误
*   在 admin_users 表中手动创建一个新用户（这会被拒绝访问）
*   再次重新启动服务器（最后的手段，但仍然没有）

主管理员用户得到一个重定向循环。

欢迎任何想法，我现在很难过。

编辑：我真的想通过任何方式恢复 magento 管理员登录吗？或以任何方式无法导出数据（不导出错误部分）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:57:57.210

我在此处详述的核心 magento 文件之一中使用了 hack：http: [//blog.chapagain.com.np/magento-admin-login-problem/](http://blog.chapagain.com.np/magento-admin-login-problem/)

我不得不注释掉“app/code/core/Mage/Core/Model/Session/Abstract/Varien.php”中的行：（请注意这是针对 1.6 的 - 检查发布的关于 1.4 的建议的链接）

```
$cookieParams = array(
    'lifetime' => $cookie->getLifetime(),
    'path'     => $cookie->getPath()//,
    //'domain'   => $cookie->getConfigDomain(),
    //'secure'   => $cookie->isSecure(),
    //'httponly' => $cookie->getHttponly()
); 
```

第 104 行也注释掉：

```
//call_user_func_array('session_set_cookie_params', $cookieParams); 
```

似乎是当服务器关闭时，会话发生了一些事情，因为新安装也失败了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:02:08.877

您可以通过 cPanel 或 mysqldump 通过 SSH 访问执行数据库备份来获取数据。您的托管服务提供商应该能够为您提供帮助。此外，您可以从 Magento 安装版本中解压缩管理文件。将其下载到您的计算机并解压缩安装...然后重新压缩文件夹以`app/design/adminhtml`...上传并在您的网站上将其解压缩到适当的位置，这将重新安装 PHP 页面。

仔细检查文件，`app/etc/local.xml`该文件通常存储有数据库登录名。

在您的 magento 安装的 mysql 数据库中，有一个表`core_config_data`，如果故意设置不正确，某些路径值可能会干扰使用 admin：

```
mysql> select config_id, path, left(value,30) from core_config_data WHERE path LIKE '%admin%';
+-----------+-------------------------------------------+--------------------------------+
| config_id | path                                      | left(value,30)                 |
+-----------+-------------------------------------------+--------------------------------+
|        50 | dev/translate_inline/active_admin         | 0                              | 
|       220 | web/secure/use_in_adminhtml               | 0                              | 
|       687 | admin/startup/page                        | catalog/products               | 
|       690 | admin/security/use_form_key               | 0                              | 
|       691 | admin/security/use_case_sensitive_login   | 1                              | 
|       692 | admin/security/session_cookie_lifetime    | 36000                          | 
|       745 | admin/url/use_custom                      | 0                              | 
|       746 | admin/url/custom                          |                                | 
+-----------+-------------------------------------------+--------------------------------+ 
```

# mysql - SQL-从两个表中连接两列

> ID：10272923
> 
> 赞同：1
> 
> 时间：2012-04-22T23:02:37.933
> 
> 标签：mysql, sql, database, union

我需要帮助来制定查询。我想从表 A 和表 B 中选择所有 DISTINCT 颜色。

这是查询的所需结果：

```
BLACK
RED
YELLOW
BLUE 
```

我有这些表：

表A

```
ID   NAME    COLOR
5    SOCKS   BLACK
4    SOCKS   RED 
```

表 B

```
ID   NAME   COLOR 
0    CAR    BLUE
1    BIKE   BLUE
5    TRUCK  YELLOW
10   PLANE  NULL 
```

我试过了：

```
SELECT DISTINCT A.color FROM A JOIN B ON b.color 
```

但我没有得到所有的颜色。:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T23:10:55.180

```
SELECT color FROM A
UNION
SELECT color FROM B
WHERE  color IS NOT NULL -- only filters NULL from B
ORDER  BY color          -- sorts all rows 
```

`UNION`（而不是`UNION ALL`）删除重复项。不需要额外的子查询或`DISTINCT`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-22T23:04:30.337

```
SELECT 
  A.Color FROM TableA A
WHERE A.Color IS NOT NULL
UNION
SELECT
  B.Color FROM TableB B
    WHERE B.Color IS NOT NULL 
```

我删除了 DISTINCT，因为当你将它与 UNION 结合使用时它是不必要的——我总是倾向于忘记这一点！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:07:25.743

尝试：

```
SELECT DISTINCT Color
FROM (
    SELECT Color FROM TableA
    UNION ALL
    SELECT Color FROM TableB
) Colors
WHERE NOT Color IS NULL 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T23:07:46.933

[http://sqlfiddle.com/#!2/0de4d/5](http://sqlfiddle.com/#!2/0de4d/5)

```
SELECT distinct
    COLOR
FROM
    (
      select color from TableA
      UNION
      select color from TableB
    ) tmp
WHERE color IS NOT NULL
order by color 
```

*编辑*以删除空值

全面披露 - SQL Fiddle 是我的网站

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T23:27:44.910

```
选择不同的颜色
(
    (
        （从颜色不为空的地方选择颜色）
        联盟
        （从 B 中选择颜色，其中颜色不为空）
    ) 作为温度
)

```

# java - 如何修复这个 java.util.Scanner.next，抛出 java.util.NoSuchElementException

> ID：10272924
> 
> 赞同：1
> 
> 时间：2012-04-22T23:02:41.630
> 
> 标签：java, java.util.scanner, jcombobox

我正在过滤新行，但它第一次在第二个循环上工作时，它的归档失败`line 2`。

例外：

```
run:
a[line 1]l[0]
Exception in thread "main" java.util.NoSuchElementException
a[line 2]l[1]
a[line 3]l[2]
b[line 1]l[0]
b[line 3]l[1]
    at java.util.Scanner.throwFor(Scanner.java:855)
    at java.util.Scanner.next(Scanner.java:1364)
    at ui.Test.main(Test.java:82) 
```

代码：

```
// a) Lines
String a = "line 1\n\r" +
           "line 2\n\r" +
           "line 3\n\r";                
// b) Total length 
int len = 0;    
Scanner sc = new Scanner(a).useDelimiter("\r?\n\r|\\|");
while (sc.hasNext()) {
  System.out.println("a[" + sc.next() + "]l[" +  len + "]" ); 
  len++;
}

// c) Prepare array 
String[] value;
value = new String[len+1];
len = 0;    
sc = new Scanner(a).useDelimiter("\r?\n\r|\\|");
while (sc.hasNext()) {
  System.out.println("b[" + sc.next() + "]l[" +  len + "]" ); 
  value[len] = sc.next();
  len++;
}

// d) Goal - use the value for JComboBox
System.out.println(value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:06:22.563

您在第二个循环中调用 next 两次，调用一次并存储值：

```
String val;
while (sc.hasNext()) {
  val=sc.next();
  System.out.println("b[" + val + "]l[" +  len + "]" ); 
  value[len] = val;
  len++;
} 
```

# cakephp - cakephp忘记密码系统

> ID：10272926
> 
> 赞同：0
> 
> 时间：2012-04-22T23:03:06.097
> 
> 标签：cakephp, authentication, forgot-password

我想做一个登录系统，用“忘记密码？” ，这是我发现的唯一例子..[忘记密码](http://www.frodosghost.com/blog/2009/7/6/cakephp-forgotten-password.html)

但我的身份验证权限有问题...我把链接“忘记密码？” 在我看来，当我单击链接时 login.ctp 不允许我重定向到 /user/forgot.ctp 并从文件 app_controller.php 上的 beforeFilter() 函数向我发送一条消息

这是我在 login.ctp 中的链接

```
 <?php echo $html->link('¿forgot password?', array('controller' => 'users', 'action' =>
 'forgot')); ?></p> 
```

当我登录时它可以工作，但是当我没有登录时它不起作用并向我发送可能是问题的消息错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:12:38.427

我没有看教程，但是您尝试过中的`beforefilter`方法`users_controller`吗？

```
function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('forgot');
} 
```

# java - javax.el.PropertyNotFoundException：在类型 entity.Authors 上找不到属性“AuthFirstName”

> ID：10272928
> 
> 赞同：2
> 
> 时间：2012-04-22T23:03:22.347
> 
> 标签：java, jsp, jstl, el, propertynotfoundexception

实体：

```
package entity;

import java.io.Serializable;

public class Authors implements Serializable {

    private String AuthFirstName;

    public Authors() {
    }

    public String getAuthFirstName() {
        return AuthFirstName;
    }

    public void setAuthFirstName(String AuthFirstName) {
        this.AuthFirstName = AuthFirstName;
    }

} 
```

小服务程序：

```
 List listAuthors = authDAO.findAuthors();
 request.setAttribute("lista", listAuthors); 
```

JSP：

```
<c:forEach var="var" items="${lista}">
    <c:out value="${var.AuthFirstName}"/>
</c:forEach> 
```

例外：

> javax.el.PropertyNotFoundException：在类型 entity.Authors 上找不到属性“AuthFirstName”

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:16:48.060

它应该以小写字母开头。

```
<c:out value="${var.authFirstName}" /> 
```

此外，将底层属性名称也固定为以小写字母开头也会很好，尽管它在功能上没有害处。

```
private String authFirstName; 
```

### 也可以看看：

*   [Javabean 规范](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-138795.html)
*   [Java 命名约定](http://www.oracle.com/technetwork/java/codeconventions-135099.html#367)。

# c# - Quickest Array Initialization?

> ID：10272932
> 
> 赞同：4
> 
> 时间：2012-04-22T23:04:17.200
> 
> 标签：c#, arrays, performance

In an application of mine, I need a large constant (actually `static readonly`) array of objects. The array is initialized in the type's static constructor.

The array contains more than a thousand items, and when the type is first used, my program experiences a serious slowdown. I would like to know if there is a way to initialise a large array quickly in C#.

```
public static class XSampa {
    public class XSampaPair : IComparable<XSampaPair> {
        public XSampaPair GetReverse() {
            return new XSampaPair(Key, Target);
        }
        public string Key { get; private set; }
        public string Target { get; private set; }
        internal XSampaPair(string key, string target) {
            Key = key;
            Target = target;
        }
        public int CompareTo(XSampaPair other) {
            if (other == null)
                throw new ArgumentNullException("other", 
                        "Cannot compare with Null.");
            if (Key == null)
                throw new NullReferenceException("Key is null!");
            if (other.Key == null)
                throw new NullReferenceException("Key is null!");
            if (Key.Length == other.Key.Length)
                return string.Compare(Key, other.Key, 
                        StringComparison.InvariantCulture);
            return other.Key.Length - other.Key;
        }
    }    
    private static readonly XSampaPair[] pairs, reversedPairs;
    public static string ParseXSampaToIpa(this string xsampa) {
        // Parsing code here...
    }
    public static string ParseIpaToXSampa(this string ipa) {
        // reverse code here...
    }
    static XSampa() {
        pairs = new [] {
            new XSampaPair("a", "\u0061"), 
            new XSampaPair("b", "\u0062"),
            new XSampaPair("b_<", "\u0253"), 
            new XSampaPair("c", "\u0063"),
            // And many more pairs initialized here...
        };
        var temp = pairs.Select(x => x.GetReversed());
        reversedPairs = temp.ToArray();
        Array.Sort(pairs);
        Array.Sort(reversedPairs);
    }
} 
```

PS: I use to array to convert X-SAMPA phonetic transcription to a Unicode string with the corresponding IPA characters.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:20:00.060

You can serialize a completely initialized onject into a binary file, add that file as a resource, and load it into your array on startup. If your constructors are CPU-intensive, you might get an improvement. Since your code appears to perform some sort of parsing, the chances of getting a decent improvement there are fairly high.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:21:16.477

You could use an `IEnumerable<yourobj>` which would let you lazily yield return the enumerable only as needed.

The problem with this is you won't be able to index into it like you could using the array.

# node.js - 我是一个完整的新手，如何学习 Node.Js + Express + MongoDB？

> ID：10272950
> 
> 赞同：6
> 
> 时间：2012-04-22T23:07:26.573
> 
> 标签：node.js, mongodb, express

我想明确一点，我之前没有编程经验，我只有 HTML 和 SQL 方面的经验，每个人似乎都喜欢“看起来像文档”，是的，这对我有帮助！*sniff* *sniff* 是否有值得推荐的书或一系列网络广播？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:11:26.330

欢迎来到 node.js 的精彩世界！

我自己也刚开始学习 Node.js，经常问自己“什么是 express？” “为什么在节点上使用快递？” 等等

Express 是一个出色的 Web 框架，因此您可以开发强大的应用程序，并为您完成很多困难的工作:)

我强烈建议阅读他的示例，以了解它们是如何组合在一起的：[https ://github.com/visionmedia/express/tree/master/examples](https://github.com/visionmedia/express/tree/master/examples)

我发现这个屏幕投射对自己学习基础知识很有帮助：http: [//vimeo.com/38136668](http://vimeo.com/38136668)

Proloser 解释了如何启动一个新的 express 应用程序，如何将它连接到 mongodb，并解释了一切如何以及为什么工作:) 他为新节点创建了它。

我们的节点在 #node.js 频道的 irc.freenode.net 上闲逛。来提出您的任何问题，我们将帮助您走上正轨:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:39:03.420

*   我想明确表示我之前没有编程经验，
*   我只有 HTML 和 SQL 方面的经验

基于这两点，首先你应该学习编程。您想学习 NodeJS+Express+MongoDB，其中 3 个与您已经知道的完全不同。

1.  首先从 Javascript 开始。这绰绰有余：[http ://www.w3schools.com/js/](http://www.w3schools.com/js/)
    *   将您的脚本写入一个名为的文件`try.js`并执行它们`node try.js`并查看结果！
2.  然后尝试了解如何构建 Web 应用程序。为您提供两个基础知识：
    *   你通过 HTTP 从服务器请求一些东西， http: [//myapp.com/users/all](http://myapp.com/users/all)
    *   服务器处理请求，并以 HTML 格式向您发送结果
    *   您的浏览器会显示它。
    *   更多信息请访问：[http ://www.slideshare.net/nbrier/how-to-build-a-web-app-for-nonprogrammers](http://www.slideshare.net/nbrier/how-to-build-a-web-app-for-nonprogrammers)
    *   查看 ExpressJS 网站，一步一步地去尝试一切
3.  然后学习 MongoDB，这不是 SQL 数据库，它是 NoSQL 数据库，我不知道你为什么要学习它，但是，尝试[http://www.mongodb.org/display/DOCS/Tutorial](http://www.mongodb.org/display/DOCS/Tutorial)肯定会有所帮助。但是您所要做的就是查看示例。要从 Node 使用 MongoDB，您可以使用 Mongoose。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T05:52:24.930

如果你只知道 HTML/CSS，你还有很长的路要走。看看[http://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb)

您必须深入了解如何编写模块化 JavaScript、JSON、数据库（尤其是 NoSQL 数据库）。

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T20:56:04.540

我认为在深入了解框架之前，您应该学习编程语言的基础知识。

[**Code Year**](http://codeyear.com/)有一系列交互式编程课程来学习 JavaScript。你从头开始一步一步地学习语言。

当你掌握了 JavaScript 之后，你就可以开始使用 express 和 mongo 等框架了。

# python - Python 和 Pygame：避免创建显示表面两次

> ID：10272964
> 
> 赞同：1
> 
> 时间：2012-04-22T23:08:32.490
> 
> 标签：python, variables, pygame, global, geometry-surface

嘿嘿，这是我之前提出的“导入中的导入”问题的扩展，所以版主可以随意合并 2。

我有 2 个文件：A.py 和 B.py

```
#A.py
import pygame
import B
pygame.init()
tv = pygame.display.set_mode((256, 256))
tv.blit(<some surface here>)

#B.py
import pygame
pygame.init()
tv.blit()??? <--- I need to blit to tv, but how do I do it here? 
```

我尝试过制作一个名为 Globe 的空白文件并为其分配全局值，但大多数时候我发现它只会让我的代码看起来笨重且难以编写。以及.. 我也不想`init`pygame 两次。有什么“Pythonic”的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T00:19:23.790

这个问题真的适用于任何结构化的 Python 应用程序。

一个可执行的 python 脚本将有一个入口点。这是您调用以启动应用程序的脚本。在此脚本中，它可以导入库模块以重用扩展功能。

您的应用程序需要有一个入口点。让我们假设它会是`A.py`。
`B.py`将是一个库模块，您将导入并使用它的功能。它不应该期望一个全局`tv`变量来操作。相反，它至少应该具有带参数的函数。甚至，使用要使用的表面实例化的类。这种方法的好处是您的`B`模块现在是可重用的，并且不依赖于一些可执行的主脚本，提供一个始终称为全局表面的`tv`

**py**

```
def blitSpecial(surf):
    surf.blit() 
```

**py**

```
import B

tv = pygame.display.set_mode((256, 256))
B.blitSpecial(tv) 
```

这是一个养成的好习惯。如果您的所有模块都依赖于主脚本中的全局对象，那么它们的可重用性将大大降低。

特别是对于您的 pygame 情况，屏幕表面的一切都应该发生，`A.py`其中使用所有其他模块来实现自定义类和实用程序功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:22:45.307

你只需要调用`pygame.init()`一次，所以我认为你的代码应该是这样的：

```
#A.py
import pygame
import B

def setup():
    pygame.init()
    tv = pygame.display.set_mode((256, 256))
    ...
    mysurface = ...
    tv.blit(mysurface)
    return tv

#B.py
import pygame
def mydraw(surface):
    ...
    surface.blit()

# In whatever file you like :)
if __name__ == '__main__':
    surface_A = B.setup() # Do this first
    mydraw(surface_A) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T00:45:34.573

您可以编写将 pygame.Surface 对象作为参数的函数：

```
class TV():
    def __init__(self):
        self.img = ... 

        ### insert code to load image here

        self.rect = self.img.get_rect()

    def draw(self, surface):
        surface.blit(self.img, self.rect.topleft)

    def erase(self, surface, background):
        surface.blit(background, self.rect) 
```

我个人不知道这与其他基于 sprite 的引擎相比有多快/慢，但它是构建一个可以绘制/擦除自身的类的一种非常快速的方法。

要使用它，只需创建一个显示屏和一个 TV 对象。

```
screen = pygame.display.set_mode((256, 256))     
background = pygame.Surface((0,0),(256,256))

background.fill(pygame.Color(0,0,0))
screen.fill(pygame.Color(0,0,0))

myTVobj = TV() 
```

每次您想在您调用的屏幕上绘制电视的副本时

```
myTVobj.draw(screen) 
```

要擦除对象，请使用

```
myTVobj.erase(screen, background) 
```

然后，您可以稍后使用从 TV 类创建的对象做一些有趣的事情，例如将它们粘贴到列表中。

```
tv_list = []
tv_list.append(myTVobj) 
```

您可以将一大堆电视添加到列表中并同时绘制所有电视。

```
tv_list = []
tv_list.append(myTVobj)
tv_list.append(myTVobj)
tv_list.append(myTVobj)

for tv in tv_list:
    tv.draw(screen) 
```

或者您只需更改一行即可将它们全部删除

```
for tv in tv_list:
    tv.erase(screen) 
```

最后，您可以在 TV 类中再添加一项功能，让您可以移动它。如果您将 .rect 成员视为“位置标记”，您所要做的就是摆弄其成员（呵呵）来更改对象的屏幕更新位置。

```
def move(self, move_amount=(1,0):
    self.rect.move_ip(move_amount[0], move_amount[1]) 
```

# html - Twitter 引导表单字段太小

> ID：10272965
> 
> 赞同：10
> 
> 时间：2012-04-22T23:08:44.450
> 
> 标签：html, css, wordpress, twitter-bootstrap

我知道这个主题“听起来”很像那里的其他主题，但我已经查看了所有现有的线程（无论如何都是“大多数”），我仍然有一个问题我可以使用帮助......

这个*问题*与其他人所描述的并没有太大的不同：

*   某些 FORM 元素不显示其完整的垂直高度
*   其中最值得注意的是 INPUT 类型在坐在按钮或“附加”类旁边时看起来有点贫乏
*   最近我注意到一个更严重的问题……单选按钮变成了“单选点”，因为它们太小以至于几乎看不到。

现在很多人通过确保他们在 HTML 文档的顶部正确指定**DOCTYPE来解决他们的问题。**我也发现这个简单的调整对我的静态 HTML 模型起到了作用。可悲的是，当我切换到 Wordpress 时，问题再次出现，但我非常肯定地将 HTML 5 DOCTYPE 签名放在输出的最顶部（我已经用“查看源代码”检查了几次，因为我想也许我丢失了我的头脑）。

我已经包含了屏幕的快速快照，以防这有助于阐明这一点。你可以在这里找到它：http: [//www.flickr.com/photos/14261777@N00/6957941282/](http://www.flickr.com/photos/14261777@N00/6957941282/)。请注意底部的小点，它们应该是单选按钮。更明显的是不够高的 INPUT 字段。哦，为了完整起见，这里是我的 HTML 源代码如何开始的屏幕截图：http: [//www.flickr.com/photos/14261777@N00/6957952802/](http://www.flickr.com/photos/14261777@N00/6957952802/)。

我很想听听任何对为什么会发生这种情况以及可能存在的任何解决方法有理论的人（即使解决方案的来源未知）。我尝试过强加 CSS 属性，如 line-height、height、min-height 等以及其他一些零效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T14:49:59.543

看起来你有两个问题。`input type=text`问题和按钮`radio`问题。在没有看到您的代码的情况下，您的文本框问题似乎`DOCTYPE`与您的单选按钮问题有关，而您的单选按钮问题与覆盖 CSS 样式有关（可以确认您是否发布单选按钮的检查器输出）。

如果您的变量显示为正确的值（例如 18px 高度），那么这绝对是一个`DOCTYPE`问题。

来自A List Apart 上的[这篇文章：](http://www.alistapart.com/articles/doctype/)

> 您已经完成了所有正确的事情，但是您的网站在最新的浏览器中看起来或工作不正常。
> 
> 您已经编写了有效的 XHTML 和 CSS。您已使用 W3C 标准文档对象模型 (DOM) 来操作动态页面元素。然而，在专为支持这些标准而设计的浏览器中，您的网站却失败了。错误的 DOCTYPE 可能是罪魁祸首。
> 
> 这篇小文章将为您提供有效的 DOCTYPE，并解释这些看似抽象的标签的实际效果。

以下是 W3C 推荐的 DOCTYPE 列表：

[http://www.w3.org/QA/2002/04/valid-dtd-list.html](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:45:13.780

如果有人感兴趣，这是我为解决问题而添加的内容：

```
input, input[type="text"], input[type="radio"], isindex, .uneditable-input {
    padding: 4px;
    border-bottom-width: 1px;
    border-bottom-style: solid;
    border-bottom-color: #CCC;
    border-left-width: 1px;
    border-left-style: solid;
    border-left-color: #CCC;
    border-right-width: 1px;
    border-right-style: solid;
    border-right-color: #CCC; 
    border-top-width: 1px;
    border-top-style: solid;
    border-top-color: #CCC;
    border-top-left-radius: 3px;
    border-top-right-radius: 3px;
    border-bottom-left-radius: 3px;
    border-bottom-right-radius: 3px;
}

.input-append .add-on, .input-append .btn {
    margin-left: -6px;
}

input[type=checkbox] {
        -webkit-appearance: checkbox;
} 
```

# javascript - 随着时间的推移在地图上可视化用户的库

> ID：10272971
> 
> 赞同：2
> 
> 时间：2012-04-22T23:09:34.593
> 
> 标签：javascript, map, visualization

我有与（位置，时间）的用户事件相对应的数据。我想在动画地图上可视化这些。当事件发生时可能会出现光点（在同一个地方发生多个事件会产生更亮的点）。用于同时在地图上为白天/夜晚区域设置动画的双点。是否有用于可视化此类数据的 javascript 库？

[处理过程中编写的这个可视化](http://max-planck-research-networks.net/)右侧的地图不太符合我的描述，但也可以很好地工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:34:36.853

我发现[d3.js](http://mbostock.github.com/d3/)非常适合该项目。geo 模块可以很容易地在 svg 元素中绘制世界地图（数据来自 data/world-countries.json 和墨卡托投影）。首先，我对数据进行了预处理，以将用户放入 GPS 位置的“桶”中。我为每个位置添加了一个圆圈，并根据该存储桶中有多少用户更改了它的半径。

# mysql - 我可以使用多台服务器来提高mysql的数据上传性能吗？

> ID：10272974
> 
> 赞同：0
> 
> 时间：2012-04-22T23:10:13.643
> 
> 标签：mysql, database

我正在设置一个mysql服务器来存储一些数据，但意识到（在这个周末读了一点之后）我可能无法及时上传数据。

我基本上有多个服务器生成每日数据，然后将其发送到共享队列进行处理/分析。数据大约有 50 亿行（尽管它的数据非常小，一列中有一个 ID 号，另一列中有一个整数字典）。我看到的大多数性能报告都显示插入速度为 60 到 100k/秒，这需要 10 多个小时。我们需要非常快的数据，这样我们就可以在那天处理它，然后我们可能会丢弃它（或者将表实现到 S3 或其他东西）。

我能做些什么？我有 8 台服务器可供我使用（除了数据库服务器），我可以使用它们来加快上传速度吗？起初我正在考虑使用它们同时将数据推送到服务器，但我也在想也许我可以将数据加载到每个服务器上，然后以某种方式尝试将所有分离的数据合并到一个服务器中？

我打算将 mysql 与 innodb 一起使用（我可以使用它有帮助的任何其他设置）但它没有最终确定，所以如果 mysql 不起作用，还有其他东西可以吗（我以前使用过 hbase，但首先在寻找 mysql 解决方案万一我遇到的问题似乎被更广泛地使用并且更容易获得帮助）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:13:39.323

哇。这是您正在加载的大量数据。为了做到这一点，可能值得进行相当多的设计思考。

多个 mySQL 服务器实例对加载速度没有帮助。不同之处在于您的 mySQL 服务器上的快速处理器芯片和非常快速的磁盘 IO 子系统。如果您可以使用 64 位处理器并为其配备大量 RAM，则您可以为您的大表使用 MEMORY 访问方法，这确实非常快。（但如果这对你有用，一个巨大的 Java HashMap 可能会更好。）

问问自己：为什么需要将此信息存储在 SQL 可查询表中？加载数据后，您将如何使用数据？您会运行大量查询来检索单行还是仅检索数十亿行中的几行？`SUM(something) ... GROUP BY something_else`或者您将运行通过大部分表进行的聚合查询（例如）？

您是否必须在数据未完全加载时访问数据？或者你可以在第一次访问之前加载一整批数据吗？

如果您的**所有**查询都需要研磨整个表，那么不要使用任何索引。否则做。但是不要放入任何你不需要的索引。它们会花费你大量的时间加载性能。

考虑为此表使用 myISAM 而不是 InnoDB；myISAM 缺乏事务语义使其加载速度更快。myISAM 可以很好地处理聚合查询或少行查询。

您可能希望为每天的数据创建一个单独的表，因此您可以通过重命名表或简单地访问新表来“摆脱”昨天的数据。

您应该考虑使用 LOAD DATA INFILE 命令。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

此命令使 mySQL 服务器从**mySQL 服务器的文件系统**中读取文件并将其直接批量加载到表中。这比从另一台机器上的客户端程序执行 INSERT 命令要快得多。但在生产环境中设置也比较棘手：您的共享队列需要访问 mySQL 服务器的文件系统才能写入数据文件以进行加载。

您应该考虑禁用索引，然后加载整个表，然后重新启用索引，但前提是您不需要查询部分加载的表。

# algorithm - 非恢复有符号整数除法后校正

> ID：10272975
> 
> 赞同：1
> 
> 时间：2012-04-22T23:10:28.277
> 
> 标签：algorithm, math, binary, integer-division, divider

我无法弄清楚非恢复整数除法的后更正。出于某种原因，我不断收到不需要更正或在需要时不更正的情况

这是算法的伪代码。`Dividend`是 16 位，其他是 8 位。，我的意思是它们的 MSB 是 1 `Dividend_Sign`，`Remainder_Sign`所以它们是 2 的补码的负数。

```
LoopCounter = 8;
do {
    Shift Dividend Left with 0 in LSB;

    if (Dividend_Sign XOR Divisor_Sign) {
        Shift 0 into Quotient;
        DividendHighByte = DividendHighByte + Divisor;
    } else {
        shift 1 into Quotient;
        DividendHighByte = DividendHighByte - Divisor;  // subtraction by 2's complement
    }
} while (loopCounter != 0);

Remainder = DividendHighByte;

// here i do the Quotient conversion
invert MSB;  // shifted out anyway. Probably should be used for overflow check, not important atm.
shift 1 into Quotient; 
```

现在我基本上有了正确的答案，它只需要以一种或另一种方式进行后校正......或者根本不进行后校正。我不确定所有更正案例是什么。现在我有一些东西在一半的时间里都没有工作，但无论如何都是这样：

```
if (Dividend_Sign XOR Remainder_sign) {     // diff signs so correct
    if (Remainder_Sign XOR Divisor_Sign) {  // diff signs just add
        Remainder = Remainder + Divisor;
        Quotient = Quotient - 1;
    } else {
        Remainder = Remainder - Divisor;
        Quotient = Quotient + 1;
    }
} 
```

[http://en.wikipedia.org/wiki/Division_%28digital%29](http://en.wikipedia.org/wiki/Division_%28digital%29)

[http://www.acsel-lab.com/arithmetic/papers/ARITH17/ARITH17_Takagi.pdf](http://www.acsel-lab.com/arithmetic/papers/ARITH17/ARITH17_Takagi.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:55:10.317

该算法有效，问题是 2s 补码有一个负零。如果最后的余数为 0，则不需要更正。但该算法必须在周期内检测到 0 余数，如果遇到余数，则始终需要进行更正。

只需添加一个 0 余数标志并执行此操作：

```
if (!Remainder.isEmpty() && (zeroFlag || (Dividend.Sign() XOR Remainder.Sign())))
      ...do corrections 
```

# c - 我如何测试以查看我的程序是否正在存储信息或覆盖它

> ID：10272981
> 
> 赞同：0
> 
> 时间：2012-04-22T23:11:02.893
> 
> 标签：c

好的，我已经包含了我的结构和指针，这就是我想要弄清楚的，我需要存储多达 5 个人资料，但我不知道如何在使用指针时将这些存储在我的数组中，如果我没有指针我可以这样做：strcpy(user[0].UserName,"whatevername"); strcpy(user[0].UserName,"whateverpwd");

但是我如何在使用指向我的结构的点时指定数组中我想要信息的位置..我希望这是有道理的，我认为我不能更好地解释它

```
struct profile
{
char First[15];
char Last[15];
char Pwd[10];
char UserName[10];
};

struct profile user[100];
struct profile *puser;
puser=&user[0];

void add_user(struct profile *puser)
{
 int i = 0;
 int j = 0;
 int quit = 0;
 char fname[30];
 char lname[30];
 char username[30];
 char password[30];

 do
 {
 printf("Enter the first name of the user:\n");
 fgets((puser+i)->First,15, stdin);
 printf("Enter the last name of the user:\n");
 fgets((puser+i)->Last, 15, stdin);
 printf("Enter the username:\n");
 fgets((puser+i)->UserName, 30, stdin);
 printf("Enter the password:\n");
 fgets((puser+i)->Pwd, 30, stdin);

 printf("the first name is: %s\n", (puser+i)->First);
 printf("the last name is: %s\n", (puser+i)->Last);
 printf("the user name is: %s\n", (puser+i)->UserName);
 printf("the password name is: %s\n", (puser+i)->Pwd);
 j++;
 printf("enter 0 to exit 1 to continue:");
 scanf("%d", &quit);
 if(quit == 0)
 printf("goodbye");
 i++;
 getchar();
 }while(quit == 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:58:55.283

尝试这个：

```
#include <stdio.h>

typedef struct
{
char First[15];
char Last[15];
char Pwd[10];
char UserName[10];
}profile;

profile user[100];
profile *puser = user;

void add_user(profile *puser);

void add_user(profile *puser)
{
 int i = 0;
 int j = 0;
 int quit = 0;
 char fname[30];
 char lname[30];
 char username[30];
 char password[30];

 do
 {

     printf("Enter the first name of the user:\n");
     fgets(puser[i].First,15, stdin);
     printf("Enter the last name of the user:\n");
     fgets(puser[i].Last, 15, stdin);
     printf("Enter the username:\n");
     fgets(puser[i].UserName, 30, stdin);
     printf("Enter the password:\n");
     fgets(puser[i].Pwd, 30, stdin);
     printf("enter 0 to exit 1 to continue:");

     scanf("%d", &quit);
     getchar();
     i++;
 }while(quit == 1);

 for( j = 0; j < i; j++ )
 {

     printf("first name[%d] is: %s\n", j,(puser+j)->First);
     printf("last name[%d] is: %s\n", j,(puser+j)->Last);
     printf("user name[%d] is: %s\n", j,(puser+j)->UserName);
     printf("password[%d] is: %s\n", j,(puser+j)->Pwd);
 }

 printf("Goodbye\n");

}

int main(int argc, char *argv[])
{

    add_user(puser);

    return 0;
} 
```

# android - 保持ListView的位置

> ID：10272982
> 
> 赞同：0
> 
> 时间：2012-04-22T23:11:26.420
> 
> 标签：android

我正在使用以下代码重新加载我的`ListView`. 我应该如何修改它以`ListView`保持的位置？

```
protected void refreshListView() {
    datasource = new DataSource(this);
    try {
        datasource.ScanVirtualSystems();
    } catch (Exception e) {
        Log.w("Exception", "exception in ScanVirtualSystems() method");
    }
    MatrixCursor cursor;
    cursor = datasource.getnameList();
    startManagingCursor(cursor);
    String[] from = { "name", "desc", "status", "path", "folder",
            BaseColumns._ID };
    int[] to = { R.id.name, R.id.desc, R.id.status, R.id.path };
    final CustomSCAdapter adapter = new CustomSCAdapter(
            Mactivity.this, R.layout.row, cursor, from, to);
    adapter.notifyDataSetChanged();
    setListAdapter(adapter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:16:28.463

```
protected void refreshListView() {

    ListView lv = getListView();
    int position = lv.getFirstVisiblePosition();

    datasource = new DataSource(this);
    try {
        datasource.ScanVirtualSystems();
    } catch (Exception e) {
        Log.w("Exception", "exception in ScanVirtualSystems() method");
    }
    MatrixCursor cursor;
    cursor = datasource.getnameList();
    startManagingCursor(cursor);
    String[] from = { "name", "desc", "status", "path", "folder",
            BaseColumns._ID };
    int[] to = { R.id.name, R.id.desc, R.id.status, R.id.path };
    final CustomSCAdapter adapter = new CustomSCAdapter(
            Mactivity.this, R.layout.row, cursor, from, to);
    adapter.notifyDataSetChanged();
    setListAdapter(adapter);

    lv.smoothScrollToPosition(position);
} 
```

# jquery - jQuery 一次淡出多个 div

> ID：10272984
> 
> 赞同：6
> 
> 时间：2012-04-22T23:12:04.090
> 
> 标签：jquery, fadein, fade, fadeout

我试图一次淡出多个 div 并在完成后淡入一个 div。这是代码：

```
if($(this).attr("id")==="benefits-button"){

    $("#solar-about, #home-page, #process-page, #financing-page, #vendors-page, #consump-info-page, #smart-page, #wind-page, #about-page").fadeOut(750, function() {
         $("#benefits-page").fadeIn(750);
    });
    } 
```

When there are multiple divs in the selector, the fadeOut and fadeIn happen at the same time.

**问题：**我如何在淡出之后获得淡入？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T23:24:27.643

```
$("#benefits-page").fadeIn(750); 
```

正在立即工作，因为它在第一个元素（在您的示例中为#solar-about）fadeOut 动画完成时开始工作。

如果您想等到所有动画都完成，则可以使用[.promise()](http://api.jquery.com/promise/)，如下所示：

```
$("#solar-about, #home-page, #process-page, #financing-page, #vendors-page, #consump-info-page, #smart-page, #wind-page, #about-page").fadeOut(750).promise().done(function() {
     $("#benefits-page").fadeIn(750);
}); 
```

[演示](http://jsfiddle.net/GE72B/)

# android - Android，WebView.getWidth() == window.innerWidth

> ID：10272989
> 
> 赞同：1
> 
> 时间：2012-04-22T23:12:46.650
> 
> 标签：android, zooming, scale, dpi

我应该使用 HTML 中的 META 标记设置和 Java 中的 WebSettings 的哪种组合来获得以下结果：Javascript 中的 window.innerWidth 应该始终（在任何 Android 版本和任何设备上）等于 WebView 宽度（以像素为单位）。

例如，我将 WebView 宽度设置为 1024px。在 Android AVD 模拟器中，window.innerWidth 等于 683px（1024 的 2/3，或 150% 比例）。

我尝试了以下 META：

```
<meta name="viewport" content="width=device-width;
user-scalable=no; initial-scale=1.0;
minimum-scale=1.0; maximum-scale=1.0;" /> 
```

——不起作用。

然后我尝试了：

```
_WebView.getSettings().setLoadWithOverviewMode(true);
_WebView.getSettings().setUseWideViewPort(true);
_WebView.setInitialScale(100); 
```

——也不行。

最后，

```
_WebView.getSettings().setDefaultZoom(ZoomDensity.FAR); 
```

似乎正在工作。根据文档，这意味着“100% 看起来像 240dpi”。我不知道，什么 dpi 用户设备有！如何正确完成任务？

**更新**

我刚刚在高 dpi 平板电脑上测试了 ZoomDensity.FAR ——*没有它也能工作**，*也不能用它！

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T09:10:44.933

1.  元：

    meta name="viewport" content="width=device-width; user-scalable=no; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0; **target-densityDpi=device-dpi** ;"

2.  爪哇：

    _WebView.getSettings().setLoadWithOverviewMode(true); _WebView.getSettings().setUseWideViewPort(true);

这种组合有效。

# c++ - 经期卸妆后双倍空格

> ID：10272991
> 
> 赞同：1
> 
> 时间：2012-04-22T23:12:58.170
> 
> 标签：c++, string

> 在文字处理器之前学习如何打字的人通常在句号结束后添加两个空格。编写一个函数 singleSpaces ，它接受一个字符串并返回该字符串，所有出现的两个空格都在 "." 之后。变成改变的单个空格。）

这就是我所拥有的；我究竟做错了什么？

```
#include <cmath>
#include <iostream>
using namespace std;

string forceSingleSpaces1 (string s) {
    string r = "";
    int i = 0;
    while (i < static_cast <int> (s.length()))  {
        if (s.at(i) != ' ')  {
            r = r + s.at(i);
            i++;
        } else  {
            r +=  ' ';
            while (i < static_cast <int> (s.length()) && s.at(i) == ' ')
                i++;
        }
    }
    return r;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:30:42.930

在您的作业中，讨论了点后的双空格，而不是文本中的所有双空格。所以你应该修改你的代码，以便它

*   等待一个'.'而不是''，
*   什么时候 '。' 被拦截然后添加它，然后添加任何单个空格

您可以将此代码视为两个状态机：

状态 1 - 当你在任何非 '.' 上循环时 字符，在这种状态下，您的代码添加到结果它找到的所有内容

状态 2 - 是 '.' 找到，并且在这种状态下您使用不同的代码，您添加“。” 结果并吃掉那个完全单一的空间（如果找到任何一个）

这样你就可以把你的问题分成两个子问题

[编辑] - 用修改提示替换源代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T00:43:40.737

您可以（重新）使用更通用的函数，将字符串中出现的给定字符串替换为另一个字符串，如此[处](https://stackoverflow.com/a/3418285/581845)所述。

```
#include <string>
#include <iostream>

void replace_all(std::string& str, const std::string& from, const std::string& to) {
    size_t start_pos = 0;
    while((start_pos = str.find(from, start_pos)) != std::string::npos) {
        str.replace(start_pos, from.length(), to);
        start_pos += to.length(); // In case 'to' contains 'from', like replacing 'x' with 'yx'
    }
}

int main() {
    std::string text = "I'm old.  And I use two spaces.  After periods.";
    std::string newstyle_text(text);
    replace_all(newstyle_text, ".  ", ". ");
    std::cout << newstyle_text << "\n";

    return 0;
} 
```

## 更新

如果你不怕走在最前沿，你可以考虑使用[TR1 正则表达式](http://www.johndcook.com/cpp_regex.html)。像这样的东西应该工作：

```
#include <string>
#include <regex>
#include <iostream>

int main() {
    std::string text = "I'm old.  And I use two spaces.  After periods.";
    std::regex regex = ".  ";
    std::string replacement = ". ";
    std::string newstyle_text = std::regex_replace(text, regex, repacement);

    std::cout << newstyle_text << "\n";

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:55:39.977

```
#include <iostream>
#include <string>
#include <cstdlib>
using namespace std;

//1\. loop through the string looking for ".  "
//2\. when ".  " is found, delete one of the spaces
//3\. Repeat process until ".  " is not found.  

string forceSingleSpaces1 (string str) {
    size_t found(str.find(".  "));
    while (found !=string::npos){
        str.erase(found+1,1);
        found = str.find(".  ");
    }

    return str;
}

int main(){

    cout << forceSingleSpaces1("sentence1\.  sentence2\.  end.  ") << endl;

    return EXIT_SUCCESS;
} 
```

# ruby-on-rails - Rails 3 中的集合和部分

> ID：10272995
> 
> 赞同：1
> 
> 时间：2012-04-22T23:13:49.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, collections, partials

这是我第一次问问题，所以请放轻松我:-p

我正在按照[http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)（第 3.4.5 节渲染集合）上的示例使用部分渲染集合。代码看起来很简单，但显然我遗漏了一些东西。

models/expert.rb 包含以下行：

```
attr_accessible :name 
```

Experts_controller.rb 在 index 方法中包含以下行：

```
@experts = Expert.all 
```

views/experts/index.html.erb 包含以下行：

```
<%= render :partial => "expert", :collection => @experts %> 
```

意见/专家/_expert.html.erb 包含：

```
<%= expert.name %> 
```

在浏览器中查看索引页面时，出现以下错误：

```
NoMethodError in Experts#index
undefined method `name' for nil:NilClass 
```

我已经为此工作了一个小时，完全被难住了：-/我错过了什么小东西？

---**澄清**---

在 index.html.erb 中运行 '<%= debug @experts %>' 会产生以下输出：

```
- !ruby/object:Expert
attributes:
    id: 1
    name: Bob Smith
    slug: bob-smith
    created_at: '2012-03-11 18:37:11.791118'
    updated_at: '2012-03-11 18:55:58.179629'
  changed_attributes: {}
  previously_changed: {}
  attributes_cache: {}
  marked_for_destruction: false
  destroyed: false
  readonly: false
  new_record: false
- !ruby/object:Expert
  attributes:
    id: 2
    name: Steve Kamp
    slug: steve-kamp
    created_at: !!null 
    updated_at: !!null 
  changed_attributes: {}
  previously_changed: {}
  attributes_cache: {}
  marked_for_destruction: false
  destroyed: false
  readonly: false
  new_record: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:16:40.360

这个例外几乎可以肯定意味着没有专家，`@experts`空数组也是如此。您是否创建了任何专家记录？

此外，您会知道，要按照您的方式渲染对象集合，有一个不错的快捷方式：

```
render @experts 
```