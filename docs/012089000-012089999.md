# StackOverflow 问答 12089000-12089999

# file - Windows批处理：同时迭代多个文件行

> ID：12089002
> 
> 赞同：3
> 
> 时间：2012-08-23T09:49:08.020
> 
> 标签：file, cmd, batch-file

是否可以同时遍历多个文件的行？我需要通过加入两个不同文件中的行来输出一个文件（并添加一些额外的单词）。

我知道 CMD 命令：

```
FOR %variable IN (set) DO command [command-parameters] 
```

但是，如果您需要同时迭代两个文件，这将无济于事。更准确地说，我需要以下内容：

```
While the first file is not ended
   line1 <- READ a line from the first file
   line2 <- READ a line from the second file
   WRITE on a third file line1 + line2 
```

我正在寻找一种方法来完成我之前在**dos 批处理**文件中描述的内容。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T23:05:00.407

我知道 3 种基本技术，从中可以衍生出大量的混合体。

**选项 1**（这个选项与 wmz 解决方案非常相似）

使用 FOR /F 读取文件 1，并使用带有 SKIP 选项的第二个 FOR /F 读取文件 2。必须在 CALLed 子例程中读取文件 2，以便可以在不中断文件 1 循环的情况下中断循环。

限制：

*   空行会导致行不同步。空白行包含在跳过计数中，但 FOR /F 不读取。
*   `;`由于默认的 EOL 选项，不会读取以开头的行。如有必要，可以通过将 EOL 设置为换行符来解决此问题。请参阅[如何：FOR /F 禁用 EOF 或使用引号作为分隔符](http://www.dostips.com/forum/viewtopic.php?p=10729)
*   行的最大长度限制为 8191 字节。

这个选项很慢，因为 CALL 并且因为第二个文件必须为每一行读取一次。

*编辑 - 如果第二个文件提前结束，代码固定为仍然输出一行*

```
@echo off
setlocal disableDelayedExpansion
set "file1=a.txt"
set "file2=b.txt"
set "out=out.txt"

set /a cnt=0
set "skip="

>"%out%" (
  for /f "usebackq delims=" %%A in ("%file1%") do (
    set "found="
    call :readFile2
    if not defined found (echo %%A - )
  )
)
type "%out%"
exit /b

:readFile2
for /f "usebackq %skip% delims=" %%B in ("%file2%") do (
  set found=1
  echo %%A - %%B"
  goto :break
)
:break
set /a cnt+=1
set "skip=skip=%cnt%"
exit /b 
```

**选项 2**

此选项通过使用 FINDSTR 在每行前面加上行号和冒号来解决空行问题。FINDSTR 用于仅读取文件 2 中的第 n 行，因此无需跳出第二个循环。

限制：

*   前导冒号将从行中删除。这个限制可以通过额外的代码来消除，但它会使它变得更复杂和更慢。
*   行的最大长度限制为 8191 字节。

此选项甚至比选项 1 慢

*编辑 - 如果第二个文件提前结束，代码固定为仍然输出一行*

```
@echo off
setlocal disableDelayedExpansion
set "file1=a.txt"
set "file2=b.txt"
set "out=out.txt"

>"%file2%.tmp" findstr /n "^" "%file2%"
>"%out%" (
  for /f "tokens=1* delims=:" %%A in ('findstr /n "^" "%file1%"') do (
    set "found="
    for /f "tokens=1* delims=:" %%a in ('findstr "^%%A:" "%file2%.tmp"') do (
      set found=1
      echo %%B - %%b
    )
    if not defined found (echo %%B - )
  )
)
del "%file2%.tmp"
type "%out%" 
```

**选项 3**

使用 SET /P 读取这两个文件。FIND 用于获取文件 1 中的行数，因为 SET /P 无法区分空行和文件结尾之间的区别。

此选项消除了许多限制和复杂性，但引入了其自身的限制。

限制：

*   行必须使用`<CR><LF>`. Unix 风格`<LF>`行不通。
*   行限制为 1021 字节
*   从每一行中去除尾随控制字符。

这个选项是迄今为止最快的。只要限制是可以接受的，它是优选的。

```
@echo off
setlocal enableDelayedExpansion
set "file1=a.txt"
set "file2=b.txt"
set "out=out.txt"

for /f %%N in ('type "%file1%"^|find /c /v ""') do set "cnt=%%N"
>"%out%" 9<"%file1%" <"%file2%" (
  for /l %%N in (1 1 %cnt%) do (
    set "ln1="
    set "ln2="
    <&9 set /p "ln1="
    set /p "ln2="
    echo !ln1! - !ln2!
  )
)
type "%out%" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T18:01:09.733

现在我必须交付:-)

```
@echo off
setlocal disabledelayedexpansion
set count=0
for /f "delims=" %%F in (outer.txt) do (
  set fline=%%F
  call :inner %%count%%
  call echo %%fline%%
  set /a count+=1  

)
goto :eof

:inner
if %1 neq 0 set skipline=skip=%1 
  for /f "%skipline% delims=" %%S  in (inner.txt) do (
    set fline=%%F%%S
    goto :eof
  ) 
```

请注意，某些类型的输入可能会失败，例如。当行包含`&`或其他一些由 shell 特殊处理的字符时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:52:14.487

附加文件内容：

```
echo FOO > foo.txt
echo BAR > bar.txt
type foo.txt > both.txt
echo "Both" >> both.txt
type bar.txt >> both.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T14:50:25.373

我必须为 2 个字符串执行此操作（可能对其他人有用）

```
@echo off
setlocal enableextensions enabledelayedexpansion

set string1=token1,token2,token3
set string2=2ndtoken1,2ndtoken2,2ndtoken3

for %%A in (%string1%) do (
    echo From String1: %%A

    set str2=
    for %%S in (!string2!) do (
        if not defined str2 (
            set str2=%%S

            echo !str2!%>tempfile.txt
            FOR %%? IN (tempfile.txt) DO ( SET /A strlength=%%~z? - 1 )

            REM echo StrLen=!strlength!
            echo From String2: !str2!

            call set string2=%%string2:~!strlength!%%
            REM echo String2: !string2!
        )
    )
) 
```

# vb.net - LinqDataSource 抛出 System.Data.Linq.Mapping.DataAttribute 未定义错误

> ID：12089004
> 
> 赞同：3
> 
> 时间：2012-08-23T09:49:18.927
> 
> 标签：vb.net, linq, linqdatasource

我在 VB.net 中使用了一个 ASP.net 网站项目，并为它添加了一个 LINQ to SQL 数据类，以便使用许多 LinqDataSource 控件。昨天我的项目运行良好，但在昨晚关闭并今天早上启动后，我现在收到此错误：

> 编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：BC30002：未定义类型“System.Data.Linq.Mapping.DatabaseAttribute”。

**源错误：**

```
<Global.System.Data.Linq.Mapping.DatabaseAttribute(Name:="xxxx_pcf")>  _
Partial Public Class PCFDataContext
    Inherits System.Data.Linq.DataContext 
```

此文件由 Visual Studio 2010 自动生成，但不会引发错误。我只在运行时收到错误。

在互联网上的其他地方，人们建议删除命名空间声明，只是我没有。

我还在[这里](http://programmer.wrighton.org/2010/11/linq-to-sql-error-bc30002.html)发现有人说`System.Data.Linq`web.config 文件中可能缺少对的引用。不过不适合我，我的 web.config 没问题。

[这里](http://akselsoft.blogspot.co.uk/2010/06/linq-reserved-names-and-net.html)还有一个关于 VS 出于多元化原因重命名你的类的警告——再次对我无效。

所以我被困住了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-25T17:04:16.087

当我第一次在我的网站（.net 4.0 框架）中使用 LINQtoSQL(vb.net) 并将其推广到实时服务器时，我遇到了类似的问题。它在我的本地服务器上运行良好。

我所做的只是在我的 web.config 中添加以下行

```
<page>
 <namespaces>
    <add namespace="System.Data.Linq" />
    <add namespace="System.Linq" />
 </namespaces>
</Page>
<system.web>
  <assemblies>
    <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
     <add assembly="System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  </assemblies>
</system.web> 
```

它对我有用，值得一试我的朋友......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:00:33.017

看起来它只是 VB 的问题，而 C# 不会面临同样的问题。看看[这里](http://stevescodingblog.co.uk/vb-dynamic-query-library-woes/)。希望能帮助到你

# java - 编程中的对象树和对象图有什么区别（主要是OOPS）？

> ID：12089005
> 
> 赞同：4
> 
> 时间：2012-08-23T09:49:20.783
> 
> 标签：java, oop, object

我知道对象图的概念（它是对象之间关系的图形表示）。（用法：- 垃圾收集）

1.  但是，我不知道对象树的确切含义和用法。

2.  我也很困惑对象树和对象图之间的主要区别是什么（如果任何机构都可以给出关于 OOPS 域的示例，那么它会更有帮助）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T09:51:19.977

对我来说，对象图是一个普通的对象集合，中间有引用。

对象树几乎相同，只是引用形成树并且都指向某个（根）对象的方向。

来自维基百科的一段话：

> *有向树是有向图，如果忽略边缘上的方向，它将是一棵树。一些作者将短语限制为边缘全部指向特定顶点或全部远离特定顶点的情况*

# css - 屏幕拖动/调整大小上的媒体查询不起作用

> ID：12089011
> 
> 赞同：0
> 
> 时间：2012-08-23T09:49:29.003
> 
> 标签：css, responsive-design, media-queries

关于媒体查询，我有一个非常基本的问题

我已经建立了一些网站，这些网站可以很好地显示通过媒体查询调用的不同布局的内容，但是在桌面上查看它们并调整屏幕大小时，媒体查询不会被调用。关于我哪里出错的任何指示？

```
 <!DOCTYPE html>

    <html>
    <head>
        <title>Page Title</title>

        <style>
            div{
                background:red;
                width:600px;
                height:200px;
            }
            @media (min-width: 61px AND max-width: 600px) {
div {
               background:green;
}
        }
        </style>
    </head>

    <body>
    <div>Something</div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:54:20.207

```
div {
  background:red;
  width:600px;
  height:200px;

  @media screen and (min-width: 61px) and (max-width: 600px) {
     background:green;
  }
} 
```

[http://jsfiddle.net/spacebeers/5NzrW/](http://jsfiddle.net/spacebeers/5NzrW/)

您的媒体查询在 div 的选择器之外。就事情而言，您正在输出以下内容：

```
div {
    background:red;
    width:600px;
    height:200px;
}

background:green; 
```

所以背景：绿色只是它自己。用顶部的示例替换您的代码，它应该没问题。

# sql-server - 在 SQL Server 中从 EST 转换为 GMT 时间

> ID：12089014
> 
> 赞同：1
> 
> 时间：2012-08-23T09:49:29.870
> 
> 标签：sql-server, timezone

考虑到夏令时，如何编写查询以从 EST 转换为 GMT 时间？

例如：东部时间是`2010-02-13 11:30:55.293`

如果这属于夏令时，则应该是，`2010-02-13 15:30:55.293` 否则应该是`2010-02-13 16:30:55.293`

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:15:09.233

在您当前的条件下，您无法*干净地*反向转换为 UTC ，因为已经存在不明确的时间条目（然后时间正在及时切换）。

除此之外，您将需要[SQL CLR](http://msdn.microsoft.com/en-us/library/ms254498%28v=vs.80%29.aspx)函数进行此类转换，因为 SQL 服务器无法访问时区数据 AFAIK。您应该为您的任务使用[TimeZoneInfo](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)类。

# jquery - 识别链接到选项卡的 ID 以附加 click() 以获取 AJAX 内容

> ID：12089019
> 
> 赞同：0
> 
> 时间：2012-08-23T09:49:46.787
> 
> 标签：jquery, hyperlink, jquery-ui-tabs

我有一个带有选项卡和子选项卡的页面，所有这些都由单击选项卡（或子选项卡）时启动的 ajax 调用“填充”。

当我从一个选项卡 x 子选项卡组合中的内容超链接到另一个选项卡 x 子选项卡组合时，正在选择正确的选项卡 x 子选项卡，但由于没有发生单击事件，因此没有加载任何内容。

我的计划是：

1.  获取链接到的 li 元素的 ID
2.  找到其中的 a 标签并获取其 ID
3.  在 .trigger('click') 调用中使用该 ID 来启动 ajax 调用以加载其内容（该 ID 包含后端处理所需的信息）

我已经在链接的标签中添加了一个类，并且正在使用以下函数。它失败是因为 'tst' 给出了当前子标签 li 的 ID，而不是链接到的。

```
$('a.totab').live("click",function(){
    var tst = $('li.ui-tabs-selected.pagelink').attr('id');
    var tst2 = $('#'+tst).find('a').attr('id');
    $('#'+tst2).trigger('click');
}); 
```

'pagelink' 是一个只出现在子标签 li 元素中的类。链接的 URL 格式为“growsafe.asp?id=Z321141S39#techbox=2&sm=4”，其中 techbox=2 是父选项卡的索引，sm 是子选项卡的索引。

我只是无法在这里概念化我的前进方式 - 非常感谢您的建议。

谢谢/布鲁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:51:44.010

```
$('a.totab').live("click",function(){
    var tst = $(this).attr('id');
    var tst2 = $('#'+tst).find('a').attr('id');
    $('#'+tst2).trigger('click');
}); 
```

对单击的元素使用 $(this)。但是，您的 javascript 非常令人困惑，因此如果您也发布 HTML，则可能更容易为您的问题提供更优化的解决方案。

# asp.net-mvc-3 - 如何在 C# 中实现扩展方法？

> ID：12089031
> 
> 赞同：0
> 
> 时间：2012-08-23T09:50:32.333
> 
> 标签：asp.net-mvc-3, extension-methods, html.dropdownlistfor

我在[这里](https://stackoverflow.com/questions/388483/how-do-you-create-a-dropdownlist-from-an-enum-in-asp-net-mvc)找到了一个主题，该主题是关于如何从 MVC 中的枚举创建下拉列表。这是该主题的答案：

[马丁法尔托夫特](https://stackoverflow.com/users/7147/martin-faartoft)说：

> 我将 Rune 的答案转换为扩展方法：

```
public static SelectList ToSelectList<TEnum>(this TEnum enumObj)
{
  var values = from TEnum e in Enum.GetValues(typeof(TEnum))
               select new { Id = e, Name = e.ToString() };

  return new SelectList(values, "Id", "Name", enumObj);
} 
```

我确实需要这样做，但它使用扩展方法，我不知道它是什么以及如何实现它。那么任何人都可以帮助我让这段代码正常工作吗？我需要知道什么是扩展方法以及如何实现它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:59:06.043

扩展方法是`static`具有一个或多个参数的类的成员，其中第一个参数必须使用`this`关键字作为代码示例中的属性。

从那时起，您可以在给定类型的任何实例上使用扩展方法，只要将包含该类的命名空间作为`using`语句添加即可。

包含扩展方法的类的示例：

```
public static class ExtensionMethods
{
    public static string Reverse(this string source)
    {
        string result = String.Empty;
        for (int i = 0; i < source.Length; i++)
            result = source.Substring(i, 1) + result;

        return result;
    }
} 
```

使用这种扩展方法，如

```
string toBeReversed = "Hello World";
string reversed = toBeReversed.Reverse(); 
```

重点是向现有类型添加功能，而无需实际继承它。使用扩展方法，您可以将新功能“附加”到任何给定类型，而无需实际更改它。

# java - JNLP 更新只询问用户一次，然后强制更新

> ID：12089032
> 
> 赞同：3
> 
> 时间：2012-08-23T09:50:33.587
> 
> 标签：java, jnlp, java-web-start

我想使用 Java Webstart 使我的应用程序保持最新。我选择了选项

```
<update check="always" policy="prompt-update"/> 
```

当我的 jar 的新版本可用时，第一次可以正常工作。系统会问我是否想要新版本。如果我说是，则采用新版本，如果我说否，则保留旧版本。但是，如果我选择保留旧版本，那么下次我调用 jnlp 文件时，就不会再询问我了，将始终采用新版本。

有没有办法解决这个问题，让用户每次都可以拒绝使用新版本并保留旧版本？

我也试过

```
<update check="always" policy="prompt-run"/> 
```

并且它具有相同的行为，即第一次，我可以拒绝并且我的应用程序不会运行，第二次总是会采用新版本。

我使用 jnlp 6.0+。

在此先感谢您的帮助

# liferay - Removal of added portlet from Liferay portal page

> ID：12089035
> 
> 赞同：0
> 
> 时间：2012-08-23T09:50:37.830
> 
> 标签：liferay, portlet

I am using Liferay 6.1 (bundled with Tomcat 7.0.23) and Portlet with JSR 286.

I am able to add portlet onto the Liferay page, but am unable to remove it.

It is a simple portlet with a single button on it.

The problem is I am able to add multiple instances of the same portlet on a single page. Even after I shutdown and restart the server, the old added portlets are still there on the page.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T14:07:36.023

I use a bit of hack for such portlets for which I dont see close option. Hover over on any portlet for which you see the close icon on the same page and copy its link

```
http://localhost:8080/c/portal/update_layout?p_l_id=10141&p_p_id=56_INSTANCE_B9Xt&doAsUserId=&cmd=delete&referer=%2Fc%2Fportal%2Flayout%3Fp_l_id%3D10141%26doAsUserId%3D&refresh=1 
```

Replace the value of p_p_id of the above url with the name of the portlet and then hit this url in the browser.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:04:09.490

First of all, Let me know what you need, meaning do you need if your portlet has multiple instances on same page or not.

If you want that your portlet should have multiple instances then you have to make that portlet as `instanceable` portlet by specifying `<instanceable>true</instanceable>` in your `liferay-portlet.xml`, by default the value is `false`.

Also, You need to check following items to remove the portlet:

*   Do you have rights (permissions) to remove the portlet. (like, admin, or similar custom role if created)
*   Please check the `checkbox` at the top of the page (on the `dockbar`) named **Toggle Edit Control**.
*   Portlet should not be included from theme.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T15:28:48.697

You have to go to the left side vertical menu and click on "Modify Controls" where you see the covered eye. After this, you can see on all the portlets the settings Icon and you can remove each of them.

# facebook - Facebook 注册插件：注销时出现“invalid_id”

> ID：12089038
> 
> 赞同：3
> 
> 时间：2012-08-23T09:50:45.587
> 
> 标签：facebook, registration, user-registration

我刚刚在这里[http://www.lexpressproperty.com/en/register](http://www.lexpressproperty.com/en/register)设置了一个 Facebook 注册插件。

我的工作就像一个魅力，但我遇到了以下问题：每当用户想要注销（使用他的个人资料旁边的“x”）时，他都会收到以下消息：

> 无法加载 的注册表单。您之前可能在 Facebook 上屏蔽了此应用。转到您的 Facebook 隐私设置以取消阻止此应用。（错误：'client_id' 无效。）”

如果用户随后刷新页面，则表单将正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:18:43.063

解决方案处于[沙盒状态](https://stackoverflow.com/questions/4845721/facebook-apis-fbregistration-returning-invalid-client-id-when-not-connecte)

我也遇到了同样的问题，真的很郁闷。但这是虚惊一场。上面的解决方案就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:59:01.377

我使用了以下，它在所有情况下都可以正常工作。试试这个。请注意，您需要在 Facebook 应用程序配置中指定的同一应用程序域中为 redirect_uri 字段提供实时 url。

```
<iframe src="https://www.facebook.com/plugins/registration?client_id=999999999999&redirect_uri=@ConfigCaller.redirectURI&fields=name,birthday,gender,location,email,first_name,last_name"
        scrolling="auto"
        frameborder="no"
        style="border:none"
        allowTransparency="true"
        width="100%"
        height="390"></iframe> 
```

# sql - 如何在SQL中查询名称存储在另一个表中的表？

> ID：12089039
> 
> 赞同：4
> 
> 时间：2012-08-23T09:51:03.543
> 
> 标签：sql, postgresql, database-schema, time-series

情况如下：

我有成千上万个传感器（比如说 100,000 个）。每个传感器以`(timestamp, value)`. 步长可能小于 1 秒，因此在一年中，`(timestamp, value)`特定传感器可能有数百万对，形成每个传感器的时间序列。`(from, to)`用户可以为这种时间序列的传感器请求一个时间段的值。

将所有值存储在一个表中（`sensor_id, timestamp, value)`每月将用数十亿个值/行填充该表。这压倒了传统的开源数据库系统（MySQL、PostgreSQL）。

我正在考虑为每个传感器时间序列创建一个表，`(timestamp, value)`并在我的传感器表中引用它`(sensor_id, sensor_name, sensor_table_name)`。因此将有 100,000 个表，每个表有数百万行。

我可以直接使用`sensor_table_name`传感器中的列直接获取值，还是必须执行两个查询，一个是获取`sensor_table_name`，一个是从该表中获取值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T13:51:03.070

如果您对传感器表名称使用约定，则不必执行查询只是为了找出要为某个传感器查询哪个表。

例如，如果您的传感器 ID 是 Wolverine967，并且这些表的名称约定是 Sensor_ + Sensor ID，那么您会立即知道您可以查询表 Sensor_Wolverine967。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:51:34.477

这听起来比动态生成名称与传感器匹配的 SQL 语句更好的解决方案是使用[表分区](http://www.postgresql.org/docs/current/interactive/ddl-partitioning.html)。您可以按传感器名称进行分区，这样可以正常工作；但是，如果您不打算永远保留每年数十亿的读数（不汇总它们），那么您可能希望按日期范围进行分区，以使最终的数据清除更容易。

这可能会比动态生成 SQL 语句执行得更好，并且应该更易于管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:53:09.993

如果您使用普通的关系数据库，恐怕您需要执行两个查询，一个是获取 sensor_table_name，另一个是从该表中获取值。

# java - 如何将 JSF 命令控制链接到 JAVA 函数？

> ID：12089040
> 
> 赞同：1
> 
> 时间：2012-08-23T09:51:04.870
> 
> 标签：java, jsf-2, richfaces

我使用的是 Richfaces 版本 4，我在 XHTML 中有一个命令控件，如下所示：

```
<a4j:commandButton action="#{MyBean.doGo}" value="#{msg.Label_Go}" render="tablePanel" execute="@form" id="Go" immediate="true"/> 
```

还有一个豆类：

```
@ManagedBean(name="MyBean")
@SessionScoped
public class MyBean {

  public void doGo() {
    ...
  }
} 
```

无论如何，`doGo()`根本不起作用，这意味着它不会被调用。我可以知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:51:10.587

如果你有多个嵌套的 h:form，请注意，a4j 操作将不起作用或确保你的 a4j:commandButton 在 h:form 内。

# macos - NSWindow 在主窗口后面

> ID：12089046
> 
> 赞同：0
> 
> 时间：2012-08-23T09:51:28.543
> 
> 标签：macos, cocoa, osx-lion, nswindow

我的应用程序有一个主窗口。单击按钮时，我会显示另一个窗口（较小的窗口）。默认情况下，这显示在主窗口上方。在较小的窗口中，我可以选择导航到浏览器页面。当我这样做时，我的两个窗口都进入后台，浏览器将在前面。之后，当我尝试单击较小的窗口时，它会出现在主窗口的后面。我需要它出现在主窗口上方。有什么出路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:42:35.187

您可以使用[addChildWindow:ordered:](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)

> 在将 childWindow 添加为窗口的子窗口后，它会保持在 orderingMode 指示的相对位置，以用于涉及任一窗口的后续排序操作。当此附件处于活动状态时，移动 childWindow 不会导致窗口移动（如将抽屉滑入或滑出），但移动窗口会导致 childWindow 移动。

# macros - 在 LibreOffice 中更改单元格背景颜色

> ID：12089051
> 
> 赞同：6
> 
> 时间：2012-08-23T09:51:32.863
> 
> 标签：macros, spreadsheet, background-color, libreoffice, libreoffice-basic

我正在使用 LibreOffice 3.5.4.2。我想根据各种条件更改单元格的背景颜色。作为一个最小的例子，我定义了以下宏/函数：

```
function bgcolor()
Dim Doc As Object
Dim Sheet As Object
Dim Cell As Object   

Doc = ThisComponent
Sheet = Doc.Sheets(1)

Cell = Sheet.getCellByPosition(0, 0)
REM Cell.CellBackColor = RGB(50,60,70)
bgcolor=Cell.CellBackColor
end function 
```

`=BGCOLOR()`我通过输入一个单元格来执行该功能。如预期的那样，存在该公式的单元格返回第一个单元格`(0,0)`或工作表 1 上的颜色值。`A1`

但是，我无法获得更改单元格背景颜色的功能`A1`。当我删除上面示例中的行以**设置**背景颜色时，单元格背景颜色不会**改变**。`REM`

 **如何在 LibreOffice 中使用函数设置单元格的背景颜色？

（我读过关于使用“样式”，但没有进一步研究，因为我需要设置许多不同的背景颜色并且不想制作许多不同的样式。可以手动更改背景颜色而不使用样式，所以我认为可以以编程方式执行相同的操作。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-29T12:37:09.633

首先，您的宏总体上没有问题。如前所述，设置 CellBackColor 的单行是正确的。问题是该函数是从您尝试修改的工作表中调用的。不允许函数修改调用它的工作表。因此，如果您从工作表 1 调用函数，然后尝试更改工作表 1 中单元格的背景颜色，则会失败。但是，如果您在从工作表 1 调用时尝试更改工作表 0 上单元格的背景颜色，则将按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-18T17:14:39.777

该行应该是

```
cell.cellbackcolor = RGB(50,60,70) 
```

（当然没有“REM”，这会创建刚刚注释的行）

如果您只有一张纸，请考虑将图纸的参数设为**0而不是 1**

有关其他有趣的属性，请参阅[单元格属性](https://www.openoffice.org/api/docs/common/ref/com/sun/star/table/CellProperties.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T17:05:45.443

```
Cell.BackColor = RGB(50,60,70) should do the trick 
```

编辑：这只适用于lowriter。谢谢坎帕。**

# freemarker - cmsfn.inherit() 似乎返回错误的类型

> ID：12089052
> 
> 赞同：0
> 
> 时间：2012-08-23T09:51:33.940
> 
> 标签：freemarker, magnolia

在 Magnolia 4.5.3 中，如果没有为此定义父页面，我将尝试继承父页面的阶段。Java 类`TemplatingFunctions`（`cmsfn`在 freemarker 中公开）提供了一个方法`inherit(Node content)`，所以我正在尝试以下方法：

```
[#if component??]
    [@cms.component content=component /]
[#else]
    [#assign inheritedContent = cmsfn.inherit(cmsfn.content(state.mainContent.@handle)) /]
    [@cms.component content=inheritedContent /]
[/#if] 
```

但后来我得到一个错误：

```
The 'content' parameter must be a ContentMapModel and is a StringModel. 
```

（我的例子中的第 6 行）

为什么会出现这个错误，即我该如何解决这样的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:40:45.860

我猜问题是`cmsfn.content(path)`返回 a `javax.jcr.Node`，因此重载的`cmsfn.inherit`方法也会返回 a `Node`，但`@cms.component`需要 a `info.magnolia.jcr.util.ContentMap`。所以，也许你应该将 转换`Node`为`ContentMap`with `cmsfn.asContentMap(someNode)`。（我在不了解 Magnolia 的情况下这么说，只是查看它的 API javadoc，所以也许我错了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:54:23.307

我编写了自己的继承方法，手动搜索具有阶段的父节点，但最后，我没有返回节点，而是返回`new ContentMap(node)`.

# javascript - 关闭对话框时刷新数据表，无需单击按钮 jsf2 primefaces

> ID：12089053
> 
> 赞同：1
> 
> 时间：2012-08-23T09:51:36.147
> 
> 标签：javascript, dialog, datatable, primefaces, refresh

我有这个对话框：

```
<p:dialog  header="Commande editée le #{acceuilUserController.selectedMajCommande.dateMaj} par l'#{acceuilUserController.selectedMajCommande.utilisateur.type} #{acceuilUserController.selectedMajCommande.utilisateur.nom} #{acceuilUserController.selectedMajCommande.utilisateur.prenom}" widgetVar="carDialog" resizable="false" id="carDlg"  
                     update="cars" showEffect="fade" hideEffect="explode" modal="true"> 
```

它在用户单击数据表下方的按钮时显示：

```
<p:column style="width:40px">                         
                        <p:commandButton  id="selectButton" action="#{acceuilUserController.refresh()}" update=":form:carDlg" oncomplete="carDialog.show()" icon="ui-icon-search" title="plus de détails">  
                            <f:setPropertyActionListener value="#{car}" target="#{acceuilUserController.selectedMajCommande}" />  
                        </p:commandButton>                       
                    </p:column> 
```

我希望当用户关闭 tis 对话框时，将执行以下方法：

```
public String refresh(){
    this.selectedMajCommande.setLu(true);
    System.out.println("je suis la alors : "+this.selectedMajCommande.isLu());
    hch.updateCommandeMaj(selectedMajCommande);
    return "acceuil";
} 
```

它允许将数据刷新到数据表中，我成功地使用对话框中的一个按钮来做到这一点，如下所示：

```
 <p:commandButton id="confirm" value="fermer" update="cars" oncomplete="carDialog.hide()"
                                     action="#{acceuilUserController.refresh()}" /> 
```

但我只想在关闭对话框时这样做，不需要框中的这个按钮

这是我要刷新的数据表：

```
<p:dataTable id="cars" var="car" value="#{acceuilUserController.lc_maj}"  tableStyle="width:auto" rowStyleClass="#{(car.lu == false) ? 'red' : null}" >  

                    <p:column headerText="Commande N° : " style="width:100px">  
                        <h:outputText value="#{car.commande.id}" />  
                    </p:column>  

                    <p:column headerText="Date de mise à jour : " style="width:100px">  
                        <h:outputText value="#{car.dateMaj}" />  
                    </p:column> 

                    <p:column headerText="Decision : " style="width:100px">  
                        <h:outputText value="#{car.decison}" />  
                    </p:column> 

                    <p:column headerText="Etat : " style="width:100px">  
                        <h:outputText value="#{car.etat}" />  
                    </p:column> 

                    <p:column style="width:40px">                         
                        <p:commandButton  id="selectButton" action="#{acceuilUserController.refresh()}" update=":form:carDlg" oncomplete="carDialog.show()" icon="ui-icon-search" title="plus de détails">  
                            <f:setPropertyActionListener value="#{car}" target="#{acceuilUserController.selectedMajCommande}" />  
                        </p:commandButton>                       
                    </p:column> 

                </p:dataTable> 
```

怎么能做到这一点，提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:56:38.337

这可以使用 jQuery 来绑定单击事件，从而调用 PrimeFaces commandButton 组件的单击事件，该组件已配置为部分处理和更新您选择的组件。我做了类似的事情，把这个脚本放在一个复合组件中，放在我所有的对话框之外，但当然有很多方法可以做到这一点。

```
jQuery(document).ready(function() {
    // Searching for naming container that contains my dialog...
    var dashboardPanel = jQuery('*[id*=#{cc.attrs.id}]');
    // Find the dialog closer button by its unique class
    var closerButton = dashboardPanel.children().find('.ui-dialog-titlebar-close');
    closerButtons.bind('click', function(event) {
        // Use set timeout to delay the event if you want to see close animation effect
        setTimeout(function() { //Some logic to find the button client id
            var menuItemId = 'view#{cc.attrs.id}'.replace('Panel', '');
            jQuery('#' + menuItemId).click();
        }, 400);
    });
}); 
```

当然，如果您没有带有动态 id 的 commandButton 或者它不在重复容器中，那么直接在 Javascript 中通过它的`widgetVar`.

```
commandButtonWidget.jq.click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T14:07:19.630

你应该`RequestContext`这样更新：

```
public void update() {
   RequestContext requestContext = RequestContext.getCurrentInstance();
   requestContext.update("form:cars");
} 
```

# php - 从.txt文件插入mysql表

> ID：12089064
> 
> 赞同：2
> 
> 时间：2012-08-23T09:52:16.060
> 
> 标签：php, mysql

我有一种情况，我必须从 .txt 文件中插入 mysql 表。数据格式如下。左侧和右侧的数据都显示分别插入 2 列。和第三列显示是 id

```
koijjh12 : 12
lkoiujjf : 12
uoytresf : 15
kjhgfd56 : 50 
```

我们可以使用 php 脚本将该 .txt 文件导入 mysql 数据库吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T09:53:46.313

你当然可以通过 PHP 脚本来完成，但最好的方法是使用[Mysql](http://dev.mysql.com/doc/refman/5.0/en/load-data.html) `load data infile`语法，如下所示：

```
LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test
  FIELDS TERMINATED BY ','  LINES TERMINATED BY '\n'; 
```

在您的情况下，看起来字段已终止，`:`因此您可以像这样轻松地更改它：

```
LOAD DATA INFILE '/tmp/test.txt' INTO TABLE test
  FIELDS TERMINATED BY ' : '  LINES TERMINATED BY '\n'; 
```

您可以通过将其作为查询插入任何 mysql 查询函数来运行此命令。这将比您在 PHP 中手动执行的任何操作都要快得多（例如将文本读入 PHP，然后将其插入数据库）*。*

编辑：请注意，如果您在字符串中使用它，则需要使用另一个像这样`\`的换行符来转义：`\``LINES TERMINATED BY '\\n';`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T09:57:42.433

像这样的东西：

```
<?php

$content = file_get_contents("a.txt");
$lines = explode("\n", $content);
foreach ($lines as $line) {
    $row = explode(":", $line);
    $query = "INSERT INTO tablename SET val1 = '" . trim($row[0]) . "', val2 = '" . trim($row[1]) . "'";
    mysql_query($query);
}

?> 
```

# c# - 状态码 304 未修改，但文件已修改

> ID：12089065
> 
> 赞同：4
> 
> 时间：2012-08-23T09:52:19.630
> 
> 标签：c#, asp.net-mvc, iis

我已经清除了浏览器缓存，并重新启动了浏览器，但 Chrome 仍然返回`304`代码。

如何使 IIS 返回`200`码？

[![这个 css 文件已修改](../Images/8fa7946659586e71340e4d75c23339c8.png)](https://i.stack.imgur.com/O7S3p.png)

请求响应详细信息：

![在此处输入图像描述](../Images/ae9d0f4c54462bfc2c26a0612ab0aa2a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T10:01:45.623

您获得状态的原因很可能是屏幕截图底部的两个标题的结果：`If-Modified-Since`和`If-None-Match`. 这些在这里有详细[说明](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)。

基本上，这些标头告诉服务器，如果满足标头中的条件，则发送资源（带有`200`响应）。如果不满足条件，则发送`304`响应。因此，IIS 认为该文件自 6 月 25 日以来没有被修改过，并且它的 etag 是`if-none-match`标头中的值。

这可能有多种原因，具体取决于您的 IIS 配置以及所提供的确切内容。Firefox 可能正在工作，因为它*没有*发送这些标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T09:58:23.087

304 可能来自 IIS。您可以使用诸如 fiddler 之类的工具进行检查。

尝试 IISReset 看看是否有帮助。

# internet-explorer - FancyBox 2.1.0：关闭按钮不与 IE9 的 iframe 中的视频一起显示

> ID：12089067
> 
> 赞同：0
> 
> 时间：2012-08-23T09:52:25.330
> 
> 标签：internet-explorer, fancybox

使用fancybox 2.1.0，当视频在内容中时，关闭按钮在IE9下不显示

代码

```
<a class="fancybox.iframe fancyframe" href="http://player.vimeo.com/video/17221844">Iframe vimeo</a> 
```

JAVASCRIPT代码

```
$(document).ready(function() {
    $(".fancyframe").fancybox({
    type        : 'iframe',
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : false,
    width       : '70%',
    height      : '70%',
    autoSize    : false,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
});
}); 
```

它适用于其他现代浏览器

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:51:26.177

我相信，这是 jQuery 1.8 / IE9 错误并且已经被报告 - [http://bugs.jquery.com/ticket/12266](http://bugs.jquery.com/ticket/12266)

临时解决方案是使用较旧的 jQuery 版本（1.7.2）。

（您可以自己尝试 - [http://fiddle.jshell.net/L9HH5/](http://fiddle.jshell.net/L9HH5/)）

# android - 适用于 Android 的 RSS Feeder - 全文

> ID：12089070
> 
> 赞同：0
> 
> 时间：2012-08-23T09:52:47.823
> 
> 标签：android, rss

我正在开发 android 应用程序，它从 RSS feeder 中提取新闻，将它们存储在主机上，然后在应用程序上显示新闻。

我遇到的问题是 RSS feeder 只提供标题和文章的一小部分，例如 BBC RSS feeder。

[http://feeds.bbci.co.uk/news/rss.xml](http://feeds.bbci.co.uk/news/rss.xml)

我想知道是否有办法通过RSS feeder或任何其他方式提取整篇文章并将它们存储在主机上，以便应用程序显示整篇文章。

如果需要更多信息，请告诉我

提前致谢

萨默

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:59:45.160

我认为最简单的方法是获取 rss 提要，在请求文章页面后，获取 html 并提取内容。

这是一个关于 Httprequest 的链接：http: [//developer.android.com/reference/org/apache/http/HttpRequest.html](http://developer.android.com/reference/org/apache/http/HttpRequest.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:02:58.730

对于您链接的 BBC 提要，该提要仅向您提供该文章的简短描述。这很常见，可能是因为他们希望用户访问他们的网站以阅读全文。

要获得完整的文章，您需要关注元素中的 url，然后使用例如 Httprequest 抓取该网站以[获取](https://en.wikipedia.org/wiki/Web_scraping)[全文](http://developer.android.com/reference/org/apache/http/HttpRequest.html)。这将需要为您想要从中获取文章的每个不同提要使用不同的代码，因为网站看起来不同。

他们也可能是未经许可使用他们的全文文本的法律问题（但这不是我的专业领域）。

# orchardcms - 如何使用 Orchard CMS 实现前端内容过滤器？IE。按日期/字母排序的下拉列表

> ID：12089071
> 
> 赞同：0
> 
> 时间：2012-08-23T09:52:54.563
> 
> 标签：orchardcms

Orchard 在 CMS 中提供过滤选项，您可以在其中按日期、标题等对内容进行排序。

虽然这很好，但我希望访问用户能够自己过滤。

我怎样才能实现这样一个过滤器，访问该站点的用户将能够使用下拉框对内容（即博客/新闻项目）进行排序。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:52:25.837

您可以使用 QueryString 标记来过滤投影。您所要做的就是构建将驱动它的表单。

# java - JAX-WS Web 服务中的 EJB 对象空指针异常

> ID：12089072
> 
> 赞同：1
> 
> 时间：2012-08-23T09:52:57.270
> 
> 标签：java, spring, ejb, jax-ws, cxf

我试图开发一个在 Web 服务类中利用 EJB 功能的 Web 服务应用程序，但 EJB 对象在运行时为空。

我正在使用 Spring Application Context 配置 Web 服务。有什么问题吗？

代码：

```
public class CreditCardService implements ICreditCardService {  

  private static final Logger logger = Logger.getLogger(CreditCardService.class.getName());  

  @EJB  
  private CreditcardFacadeLocal databaseFacade;  

  @Override  
  public void addCreditCard(Creditcard card) {  
    logger.log(Level.INFO, "Add credit card start");  
    databaseFacade.addCreditCard(card); // NPE Here  
    logger.log(Level.INFO, "Add create card finish");  
  }  
} 
```

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>  
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">  

    <display-name>CreditCardWebService</display-name>  
    <context-param>  
        <param-name>contextConfigLocation</param-name>  
        <param-value>WEB-INF/beans.xml</param-value>  
    </context-param>  
    <listener>  
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>  
    </listener>  

    <servlet>  
        <description>Apache CXF Endpoint</description>  
        <display-name>cxf</display-name>  
        <servlet-name>cxf</servlet-name>  
        <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>  
        <load-on-startup>1</load-on-startup>  
        <enabled>true</enabled>  
        <async-supported>false</async-supported>  
    </servlet>  
    <servlet-mapping>  
        <servlet-name>cxf</servlet-name>  
        <url-pattern>  
        /services/*</url-pattern>  
    </servlet-mapping>  
    <session-config>  
        <session-timeout>60</session-timeout>  
    </session-config>  
    <welcome-file-list>  
        <welcome-file>index.html</welcome-file>  
        <welcome-file>index.htm</welcome-file>  
        <welcome-file>index.jsp</welcome-file>  
        <welcome-file>default.html</welcome-file>  
        <welcome-file>default.htm</welcome-file>  
        <welcome-file>default.jsp</welcome-file>  
    </welcome-file-list>  
</web-app> 
```

豆类.xml

```
<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws"  
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">  
    <import resource="classpath:META-INF/cxf/cxf.xml" />  
    <!--  <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" /> -->  
    <import resource="classpath:META-INF/cxf/cxf-servlet.xml" />  

    <!-- Create Web Service End Point using Spring DI-->  
    <jaxws:endpoint xmlns:tns="http://service.peter.com/"  
        id="creditcardservice" implementor="com.peter.service.CreditCardService"  
        wsdlLocation="wsdl/creditcardservice.wsdl" endpointName="tns:CreditCardServicePort"  
        serviceName="tns:CreditCardServiceService" address="/CreditCardServicePort">  
        <jaxws:features>  
            <bean class="org.apache.cxf.feature.LoggingFeature" />  
        </jaxws:features>  
    </jaxws:endpoint>  
</beans> 
```

ejb ojbect 为空的原因是什么？它是否与 CreditCardService 类的 Spring DI 相关但不实例化 ejb 对象？

CXF servlet 的目的是什么？它是用来处理网络服务请求的吗？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:41:21.383

`CXF`servlet 用于处理 Web 服务请求。`CXF`是基于`JAX-WS`但有一些功能`JAX-WS`没有的 Web 服务堆栈。看看[这里](http://cxf.apache.org/)。

您不能在 Web 服务中使用注释注入`EJB`对象。注释仅适用于托管 bean，例如 servlet 等……或者在上下文中。`@EJB``@EJB``EJB`

要注入您的`EJB`内容，您需要`JNDI`在您的 Web 服务中进行查找。所以它会是这样的：

```
/**
 * Java global JNDI.
 */
private static final String JAVA_GLOBAL = "java:global/";

/**
 * Application name in application server.
 */
private static final String APP_NAME = "YourAppName/";

/**
 * Application EJB jar name.
 */
private static final String APP_EJB = "your-ejb/";

/**
 * Credit EJB constant.
 */
public static final String CREDIT_EJB = JAVA_GLOBAL + APP_NAME + APP_EJB + "CreditcardFacade!your.package.CreditcardFacadeLocal"; 
```

现在创建一个通用方法来获取您的`EJB`对象`JNDI`：

```
/**
 * Gets local EJB from JNDI.
 *
 * @param jndiName JNDI constant name to look up for EJB
 * @param <T> generic object
 * @return local EJB object loaded from JNDI
 */
public static <T> T getLocalEJB(String jndiName) {
    try {
        InitialContext context = new InitialContext();
        return (T) context.lookup(jndiName);
    } catch (NamingException e) {
        LOGGER.error("Naming exception occurred while trying to load EJB from JNDI with JNDI name: " + jndiName, e);
        throw new RuntimeException("Naming exception occurred while trying to load EJB from JNDI with JNDI name: " + jndiName, e);
    }
} 
```

现在你可以像这样得到你的 EJB：

```
CreditcardFacadeLocal facade = JndiUtils.getLocalEJB(JndiUtils.CREDIT_EJB); 
```

我自己在 CXF Web 服务中完成了它，一切正常。

# razor - RenderSection 上的条件逻辑

> ID：12089077
> 
> 赞同：0
> 
> 时间：2012-08-23T09:53:25.007
> 
> 标签：razor

在我的一个模板中，我有这个：

```
<aside class="headline image right">            
    @RenderSection("HeaderImage", required: false)              
</aside> 
```

在相应的页面中，我使用它来填充图像：

```
@section HeaderImage { <img src="whatever.jpg" alt="" /> } 
```

如果 HeaderImage 留空/页面模板中未提供，是否有一些简单的条件逻辑我可以围绕包含“aside”的整个内容来阻止它输出代码？只是寻找尽可能直接和简单的东西，因为我不想在任何人更新文件可以随机删除/编辑它等的地方包含备用代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:55:49.990

您可以使用以下`IsSectionDefined`方法：

```
@if (IsSectionDefined("HeaderImage"))
{
    <aside class="headline image right">            
        @RenderSection("HeaderImage")
    </aside>
} 
```

我现在删除了`required: false`参数，因为我们`RenderSection`只在定义了它时才调用该方法。`else`如果该部分尚未在视图中定义，您还可以有一个条件来指定一些默认标记。

# javascript - ActiveX 中的 VARIANT 克隆

> ID：12089084
> 
> 赞同：1
> 
> 时间：2012-08-23T09:53:43.597
> 
> 标签：javascript, c++, variant, activexobject, cloning

我正在用 javascript 编写一个使用 activeX 对象的应用程序。
ActiveX 函数从 javascript 调用中获取*VARIANT参数。*

如果我定义一个名为 * *V1*的全局变量并将其与 get 变量进行比较，如下所示：

```
V1 = &variant; 
```

它不起作用，因为函数结束后数据丢失。
如何安全轻松地克隆*变体？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:56:10.277

使用`VariantCopy`功能（[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221697%28v=vs.85%29.aspx)）

```
VARIANT v1;
VariantCopy(&v1, &variant); 
```

# jquery - toggleClass 功能无法正常工作

> ID：12089094
> 
> 赞同：-3
> 
> 时间：2012-08-23T09:54:14.207
> 
> 标签：jquery, html

我的功能无法正常工作。有时它工作有时它不

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">

$(function(){

    $('label').click(function(){
    $(this).toggleClass('jaja papa')
    }   )

    })

</script>

</head>

<body>

<label class="jaja">
<input type="checkbox" />
click
</label>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:07:06.810

当您单击标签时，您也在单击复选框，因为这就是标签的作用。复选框的单击事件依次冒泡到标签。因此，标签的点击处理程序被触发了两次，并且类被切换了两次，实际上什么也没做。

您必须跟踪点击处理程序被调用的次数，并且只在第一次执行：http: [//jsfiddle.net/ZVCM5/2/](http://jsfiddle.net/ZVCM5/2/)。

```
$('label').click(function f(e) {
    if(!f.triggered) {  // only if not already triggered for this time
        f.triggered = true;
        $(this).toggleClass('jaja papa');
        setTimeout(function() {
            f.triggered = false;  // reset after both clicks are done
        }, 0);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:09:21.927

一种可能的解决方案，涉及稍微更改您的标记（为了更好的恕我直言！）

如果您要更改标签以具有复选框和文本跨度 - 并在那里应用您的样式，即：

```
<label>
    <input type="checkbox">
    <span class="papa">Test</span>
</label> 
```

然后这个 jQuery 工作：

```
$('label>:checkbox').click(function(){
    $(this).next('span').toggleClass('jaja papa')
}); 
```

现场示例：http: [//jsfiddle.net/JHwBP/](http://jsfiddle.net/JHwBP/)

这里的优点是您拥有更多可寻址的 HTML（您可以与标签内的复选框分开访问文本）。此外，单击文本的语义仍然选中/取消选中复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:58:38.000

如果你想在这两个类之间切换

```
$('label').click(function(){
    $(this).toggleClass('jaja').toggleClass('papa');
    }); 
```

应该这样做

# android - Phonegap 和 Android 滚动问题

> ID：12089096
> 
> 赞同：0
> 
> 时间：2012-08-23T09:54:15.937
> 
> 标签：android, cordova, scroll, overflow

我正在为 Android 和 iPhone 使用 Phonegap 部署应用程序。

我正在使用 style -> Overflow : scroll 滚动内容。

它在 iPhone 应用程序中正常工作。甚至为 3.0 版和更高版本的 Android 应用程序工作。

但面临的问题：整个页面向上/向下滚动，而不是旧版本（如 2.1 和 2.2）中的特定数据滚动条

有什么解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:21:40.110

我认为您可以为此目的使用 iScroll，要获取此脚本，您可以查看此[链接](http://cubiq.org/iscroll-4 "iScroll4")。iScroll4 支持 iPhone/Ipod touch (>=3.1.1) iPad (>=3.2) , Android ( >=1.6) , Desktop Webkit, Firefox, Opera desktop/mobile 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:58:19.763

我相信旧版本的 Android 和 iPhone 设备根本不支持溢出，或者在有限的情况下，所以克服这个问题的唯一方法是使用一些 JavaScript，就像 jQuery Mobile 在之前的版本中所做的那样

另外，也许检查一下：[-webkit-overflow-scrolling:touch 有多少支持](https://stackoverflow.com/questions/7768363/how-much-support-is-there-for-webkit-overflow-scrollingtouch)

# ios - iOS：将我的项目转换为库

> ID：12089097
> 
> 赞同：1
> 
> 时间：2012-08-23T09:54:16.317
> 
> 标签：ios, svn, shared-libraries

我开发了一个与 SVN 集成的项目，旨在对许多其他项目进行即插即用，这样当我修改这个项目时，其他项目应该能够只更新它，而不是每次手动覆盖。我的问题是这个项目的所有组件（文件）都引用了共享应用程序委托，我在其中编写了所有服务器通信方法。App Delegate 与服务器通信，设置所需数据并通知更改。

如果我想将此项目与另一个项目集成，则该项目必须具有委托名称 AppDelegate 并且需要复制所有服务器通信方法。如果我不使用委托名称作为 AppDelegate，那么我必须修改我引用共享委托的所有其他组件。

有人可以告诉我将我的项目转换为库的最佳实践是什么，这样它就不需要任何手动更改。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:06:59.313

为什么要在 Appdelegate 中编写服务器通信？更好的是，您可以创建一个通信管理器类，所有 Web 服务调用都在其中。并使用您的类（不是由 Apple 生成的）来创建静态库。有关创建静态库的步骤，请参阅此链接[http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)

# java - 在 Java Web 应用程序中读取 unix 文件

> ID：12089114
> 
> 赞同：0
> 
> 时间：2012-08-23T09:55:31.483
> 
> 标签：java, jakarta-ee, web-applications, web

我需要在 java 中有一个 Web 应用程序（最好）使用用户名和密码登录到特定的 unix 服务器（例如 xxx.pr.s.com），并读取该服务器中的特定文件。是否有任何java库来实现相同的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:00:58.693

我认为 Java 安全通道 (JSCH) 是您正在寻找的。它将允许您通过 ssh 进入操作系统[http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

# ajax - Wicket ajax 更新组件行为？

> ID：12089117
> 
> 赞同：2
> 
> 时间：2012-08-23T09:55:49.590
> 
> 标签：ajax, wicket

我已经覆盖了我的 DefaultDataTable 中的 rowitem 以添加一些 onClick 行为。

```
 @Override
        protected Item newRowItem(String id, int index, IModel model) {
             //return super.newRowItem(id, index, model);
            final Item<SearchResult> rowItem = super.newRowItem(id, index,model);
            rowItem.add(new AjaxEventBehavior ("onclick") {
               @Override
               protected void onEvent(AjaxRequestTarget target){
                  WebMarkupContainer wmc = new WebMarkupContainer("myTest");
                  target.add(wmc); //this doesn't work
                  add(wmc); //works but only when I refresh the page
               }
            });
            return rowItem;
        }

        <object wicket:id="myTest" data="" border="1" width="100%" height="600px"></object> 
```

当点击发生时，我想更新对象的数据并重新加载对象。该对象是一个 Pdf 文件。如果我使用目标，Pdf 似乎不会重新加载。我已经设定

```
 wmc.setOutputMarkupId(true); 
```

但这似乎没有帮助。

我怎样才能做到让用户不必刷新页面？？？

我刚开始使用 Wicket 和 Ajax，所以我是初学者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T10:00:41.697

您应该将*原始*容器添加到 AjaxRequestTarget 而不是创建新容器。确保容器使用动态模型，以便在通过 AJAX 重绘组件时实际更新值。

# ruby - 如何在 SQL 语句中使用变量并将答案分配给变量

> ID：12089118
> 
> 赞同：0
> 
> 时间：2012-08-23T09:55:49.630
> 
> 标签：ruby, database, sqlite, variables

我正在 Ruby 中对 .sqlite 文件执行 SQL 语句。我需要在 WHERE 子句中使用一个变量，但我不确定语法。这也是我使用`name`变量保存结果的方式吗？

```
total = 0.0
db = SQLite3::Database.open "Test2.sqlite"

for i in 0..@items.length
    name = db.execute "SELECT price FROM Products WHERE product_code = {variable here}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:06:45.067

您可以像这样使用绑定变量：

```
name = db.execute "SELECT price FROM Products WHERE product_code = ?", bind_variable_here 
```

见[http://sqlite-ruby.rubyforge.org/classes/SQLite/Database.html#M000078](http://sqlite-ruby.rubyforge.org/classes/SQLite/Database.html#M000078)

正如您的问题所建议的那样，您可以使用 Ruby 字符串插值在此处获得正确的结果，但这通常是一个坏主意，因为它可能会使您的应用程序容易受到 SQL 注入的攻击。

# dynamic - ExtJs 面板 - 添加动态组件

> ID：12089123
> 
> 赞同：11
> 
> 时间：2012-08-23T09:56:19.390
> 
> 标签：dynamic, extjs, window, components, panel

我在窗口内有一个带有面板的窗口。我动态地将组件添加到面板中。这些组件采用“hbox”布局，因此它们是水平排列的。单击按钮时，我将在“hbox”布局中向面板添加另一行类似的组件。这里的问题是我想在第一行下面添加第二行，但是下面的代码将组件添加到面板的顶部。

```
panel.add(items);  #items is the group of comboboxes in hbox layout
panel.doLayout(); 
```

有什么想法可以解决这个问题吗？这样我就可以在第一行下方添加第二行组件。

Extjs 版本是 3.4

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T17:44:11.187

我找到了问题的原因。

**原因**：当我们将具有相同 ' **id** ' 的组件添加到面板时，新添加的组件将被添加到面板的顶部。

**修复**：在面板中添加相同组件时使用“ **itemId** ”而不是“ **id ”。**

希望这对某人有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-23T16:26:42.580

You can use `insert` method instead to specify the index of panel items that you want to put your component at:

```
var index = panel.items.length;
panel.insert(index, items);

// or if it always going to be the second item
panel.insert(1, items); 
```

[Here it is in the docs.](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.Panel-method-insert)

# php - 如何使用 jQuery ajax 调用 RESTful php Web 服务？

> ID：12089128
> 
> 赞同：2
> 
> 时间：2012-08-23T09:56:35.263
> 
> 标签：php, web-services, rest, jquery

> **可能重复：**
> [PHP Web 服务无法从 jQuery AJAX 工作](https://stackoverflow.com/questions/12037154/php-web-service-not-working-from-jquery-ajax)

我在本地环境
url 上创建了 php web 服务：

```
http://localhost:5454/kisan-06/index.php?option=com_api&format=raw&app=users&resource=login&key=dfd8a84f8cdce807ae1d30a838415ea37eaa075c 
```

我在我的 android phonegap 应用程序中使用 jQuery.ajax 调用它。

Ajax 调用是：

```
$.ajax({
    type: "POST",
    url: "http://localhost:5454/kisan-06/index.php?option=com_api&format=raw&app=users&resource=login&key=dfd8a84f8cdce807ae1d30a838415ea37eaa075c",
    data: "{ username: 'sai.kiks2@gmail.com', password: '123456'}",
    contentType: "application/json; charset=utf-8",
    cache : false,
    dataType: "json",
    success: function(data) {
        alert("in success");
    },
    error: function(){
       alert("There was an error loggin in");
    }
}); 
```

每次调用错误回调，我都无法跟踪错误。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:24:06.157

我认为您需要在 URL 中指定需要在 ajax 调用时调用的特定方法。我还没有开发 php web 服务，但是在 Asp 中我们调用如下。

```
 <script type="text/javascript">

    $(document).ready(function () {
    $("#MainContent_ButtonSearch").click(function () {
    /// hide employee details (if shown)
    $("#empDetails").hide("slow");
    var empId = $("#MainContent_TextBoxEmpId").val();
    $.ajax({
      type: "POST",
      dataType: "json",
      contentType: "application/json",
      **url: "EmployeeService.asmx/GetEmployeeById",**
      data: "{'employeeId': '" + empId.toString() + "'}",
      success: function (data) {
      $("#textId").html(data.d.ID);
      $("#textName").html(data.d.FullName);
      $("#textTitle").html(data.d.Title);
      $("#textDepartment").html(data.d.Department);
      /// show employee details
      $("#empDetails").show("slow");
   },
   error: function () {
    alert("Error calling the web service.");
   }
  });
  });
  });

    </script> 
```

# ruby-on-rails - ruby on rails 从视图中访问关联表

> ID：12089132
> 
> 赞同：0
> 
> 时间：2012-08-23T09:56:41.900
> 
> 标签：ruby-on-rails, model, associations

我的**Post 模型**中有一个获取**用户帖子的方法**

```
 def self.find_user_posts(user_id)
    where(:user_id => user_id).limit(15)
  end 
```

然后在我**看来**

```
<% Post.find_user_posts(@user.id).each do |p| %>
    <%= render_post(p) %>
<% end %> 
```

然后**调用部分**调用`/posts/_post.html.erb`

我的问题是我想从**users**表中获取每个用户图片，因为两个表共享一个名为**user_id的外部列**

我也有**后期模型**

```
belongs_to :user, :foreign_key => 'post_id' 
```

在**用户模型中**

```
has_many :post, :foreign_key => 'post_id' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:05:32.473

您可以简化这一点。

在你看来

```
<% @user.posts.limit(15).each do |post| %>
  <%= render_post(post) %>
<% end %> 
```

这将让您删除

```
def self.find_user_posts(user_id)
    where(:user_id => user_id).limit(15)
end 
```

如果需要，它应该是一个 named_scope。

然后在您的 _post 部分中，您应该能够执行类似的操作

```
<%= image_tag(post.user.image_url) %> 
```

在每个帖子中显示每个用户的图像。

# perl - 使用 Perl DBI 执行整个 SQL 文件，就像在 Oracle SQL Developer 中一样

> ID：12089134
> 
> 赞同：1
> 
> 时间：2012-08-23T09:56:42.897
> 
> 标签：perl, oracle, sqlplus, dbi

我需要使用 Perl DBI 对 Oracle 数据库执行 SQL 文件。通过快速搜索，我找到了一些逐行执行 SQL 文件的解决方案，但我想像在 SQL Developer 中一样加载整个文件中的 SQL。

在 SQL Dveloper 或 SQL*Plus 命令行中我可以执行；

```
@/path/to/file.sql; 
```

如果我在 Perl 中执行此语句，如下所示

```
my $query = "@/path/to/file.sql";
my $sth  = $dbh->prepare($query)
        or die "Couldn't prepare query: ". $dbh->errstr;    
$sth->execute(); 
```

我得到错误：`ORA-00900: Invalid statement`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:16:35.430

sqlplus 在处理文件时，会在读取行尾的分号 (';') 或行上的正斜杠 ('/') 时执行 SQL 语句。如果你想用 perl 和 DBI 处理它，你必须以相同的方式拆分语句并一次执行它们，去掉'/'和';' 在你执行之前。请记住，'execute some_stored_procedure()' 是 sqlplus 语句，而不是 SQL 语句，您必须在 DBI 中执行之前对其进行扩展（参见 DBD::Oracle）。

另外，如果你这样做，你不需要prepare()和execute()，你只需要do()。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-08-16T00:15:17.410

这个问题可能意味着是否可以使用 DBI 将文件批量加载到数据库中。

可能吗？我尝试执行以下操作：

```
use DBI;
my $dbh = DBI-> connect('dbi:ODBC:test','test','test');
my $sql="@\test.sql";
$dbh->do($sql); 
```

我的当前目录中有 test.sql 和一个简单的 sql 语句。

我需要这个用于新的 odbc 测试驱动程序并将其安装到一些测试框架中。谢谢。

# jquery - 如何使用jQuery在HTML表格中随机拖放表格行？

> ID：12089139
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:57:04.857
> 
> 标签：jquery, html

我想使用 jQuery（不使用 jQuery 插件）在 HTML 表中随机拖放一个表行。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:01:55.643

先说最简单的。你认为 jquery ui 是一个插件吗？

如果没有，那么您应该寻找它的可排序方法 [http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/) 他们也有一个可放置和可拖动的方法。

使用 sortable，您可以快速将可排序行为添加到表中。由于您需要能够混合标题行和正文行，您可以尝试 connectWith 选项：

```
<body>
    <table>
        <tr class="connectedSortable">
            <th>Column1</th>
            <th>Column2</th>
            <th>Column3</th>
            <th>Column4</th>
            <th>Column5</th>
        </tr>
        <tr class="connectedSortable">
            <td>item1</td>
            <td>item2</td>
            <td>item3</td>
            <td>item4</td>
            <td>item5</td>
        </tr>
        <tr class="connectedSortable">
            <td>item11</td>
            <td>item22</td>
            <td>item33</td>
            <td>item44</td>
            <td>item55</td>
        </tr>
    </table>

    <script type="text/javascript">
        (function($){
            $(document).ready(function(){
                $('table tr').sortable({
                    connectWith: ".connectedSortable"
                });
            });
        })(jQuery);
    </script>

</body> 
```

# html - css 框模型不使用填充进行拉伸

> ID：12089144
> 
> 赞同：1
> 
> 时间：2012-08-23T09:57:24.847
> 
> 标签：html, css, layout, css-float

我的网页中有一个项目标题作为标题。该项目标题位于名为“pagetitle”的 div 中。在项目标题之后，我有两个单词，一个在左边，另一个在右边。我希望“pagetitle” div 中的所有内容都使用白色背景，在这两个词之后的底部留下一点空间。我已经为这两个词尝试了“padding-bottom:10px”。但是，白色背景不会延伸到包含的 10 像素。我可以知道我该怎么做吗？

干杯，郑红

```
<div class ="pagetitle" style="background-color:black;">
        <center style="padding: 10px 0 0 0">Executive Summary Dashboard<center>
        <br><left style="float:left; padding:0 0 10px 10px;">Subject Selected:</left><right style="float:right;padding:0 10px 10px 0; background-color:green; margin-bottom:10px;">Time frame:</right></br>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:02:06.937

你需要清除浮动。

1.  将此添加到您的CSS

    .clearfix:before, .clearfix:after { 内容："\0020"; 显示：块；高度：0；溢出：隐藏；} .clearfix:after { clear: both; } .clearfix { 缩放：1；}

2.  将 class .clearfix 添加到您的顶级 div 以便您拥有 div class="pagetitle clearfix"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:02:31.837

你必须“包含”你的花车。实现这一点的一种方法是`overflow: hidden`在容器元素上进行设置。不过，还有一千种其他技术，称为 clearfixes（您可以在 Internet 上找到很多），其中一些涉及`clear: both`在其上添加元素。

*   [已修复代码的 jsFiddle Demo](http://jsfiddle.net/b8Hf3/)

一些建议阅读：

*   [在 Quirksmode 上清除浮动](http://www.quirksmode.org/css/clearing.html)
*   [溢出：隐藏会影响布局吗？](https://stackoverflow.com/questions/6128139/can-overflowhidden-affect-layout/6128264#6128264)
*   [http://colinaarts.com/articles/float-containment/](http://colinaarts.com/articles/float-containment/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:08:07.583

-left 和 right 不是[有效的 html 标签](http://www.w3schools.com/tags/default.asp)

- 分离您的 html 和样式（使用外部样式表）

示例[小提琴](http://jsfiddle.net/gajjuthechamp/Am7mb/)

# c# - C# 正则表达式验证文件名

> ID：12089145
> 
> 赞同：2
> 
> 时间：2012-08-23T09:57:27.973
> 
> 标签：c#, regex

我想用 string.Empty 替换这些字符：`'"<>?*/\|` 在给定的文件名中如何使用正则表达式来做到这一点我试过这个：

```
Regex r = new Regex("(?:[^a-z0-9.]|(?<=['\"]))", RegexOptions.IgnoreCase | RegexOptions.CultureInvariant | RegexOptions.Compiled);
                 FileName = r.Replace(FileName, String.Empty); 
```

但这会将所有特殊字符替换为 String.Empty。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T09:59:47.760

您可以使用[Regex.Replace](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)方法。它做它的名字所暗示的。

```
Regex regex = new Regex(@"[\\'\\""\\<\\>\\?\\*\\/\\\\\|]");
var filename = "dfgdfg'\"<>?*/\\|dfdf";
filename = regex.Replace(filename, string.Empty); 
```

但是我宁愿对您当前使用的文件系统下的文件名中禁止的所有字符进行清理，而不仅仅是您在正则表达式中定义的字符，因为您可能忘记了一些东西：

```
private static readonly char[] InvalidfilenameCharacters = Path.GetInvalidFileNameChars();

public static string SanitizeFileName(string filename)
{
    return new string(
        filename
            .Where(x => !InvalidfilenameCharacters.Contains(x))
            .ToArray()
    );
} 
```

进而：

```
var filename = SanitizeFileName("dfgdfg'\"<>?*/\\|dfdf"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:09:52.230

看看这里怎么做：

[如何从路径和文件名中删除非法字符？](https://stackoverflow.com/questions/146134/how-to-remove-illegal-characters-from-path-and-filenames)

记得使用 Path.GetInvalidFileNameChars()

# php - 为 CArrayDataProvider 获取 Yii 过滤器

> ID：12089146
> 
> 赞同：0
> 
> 时间：2012-08-23T09:57:30.707
> 
> 标签：php, yii

我从两个表中获取数据并将该数组发送到 CArrayDataProvider，它在其他控制器中，我想要（过滤或搜索）我的列之一的选项。任何人都可以帮助我，如何实现。

我会非常感谢他/她。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:32:17.627

看看这个维基： [http ://www.yiiframework.com/wiki/232/using-filters-with-cgridview-and-carraydataprovider/](http://www.yiiframework.com/wiki/232/using-filters-with-cgridview-and-carraydataprovider/)

还要确保阅读文章中链接的评论和相关论坛主题。

# xcode4.2 - 找不到此可执行文件的有效配置文件

> ID：12089149
> 
> 赞同：1
> 
> 时间：2012-08-23T09:57:42.797
> 
> 标签：xcode4.2, ios-provisioning

我正在尝试在我的 iphone 中安装我的应用程序，但它不起作用。

我在这里按照“启动助手”中的步骤进行操作：

[https://developer.apple.com/ios/manage/overview/index.action](https://developer.apple.com/ios/manage/overview/index.action)

我认为一切正常，之前安装了证书，我检查了一下，它在“keyChan 访问”中

我 ckecked 并且配置文件与我的 iphone 相关联：

![在此处输入图像描述](../Images/3b695c43a4313d9535b4fd99561d7802.png)

当我尝试“运行”安装到我的 iphone 时，我收到此错误。

为什么会这样？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T07:34:17.770

请检查用于创建此配置文件的包标识符/APPID 和您的应用程序的包标识符是否相同。

# rest - 是否可以为 ServiceStack 创建的 REST API 自动生成漂亮的文档？

> ID：12089153
> 
> 赞同：4
> 
> 时间：2012-08-23T09:57:55.237
> 
> 标签：rest, documentation-generation, servicestack

有用于自动生成 API 文档的现有工具 - 大多数不是为 REST 服务设计的。

对于所有使用 ServiceStack 创建 REST 服务的人——您是如何编写文档的？手动/半自动/全自动？我什至正在考虑自动生成一个自定义的 WADL 并将其连接到类似 apigee [Console To Go的东西](http://apigee.com/docs/consoletogo)

（哦，还有 RESTafaries - 请保留“REST api 应该是自动发现和自我解释”的口头禅……我真的想要为我的用户提供好看的文档）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T20:24:23.723

通过 XHTML 记录 API 可能比格式化 DTO 提供更好的结果。看看[http://www.amundsen.com/blog/archives/1043](http://www.amundsen.com/blog/archives/1043)和这个鼓舞人心的[视频](https://vimeo.com/20781278)。

# c# - 在 Windows 8 应用程序中加载本地 xml 文件

> ID：12089156
> 
> 赞同：0
> 
> 时间：2012-08-23T09:58:08.823
> 
> 标签：c#, xml, windows

对于我的应用程序，我将一些数据存储在一个 XML 文件中，该文件包含在项目中。现在我想使用 SyndicationClient 从 cml 文件中获取数据。但我得到一个错误，因为 uri 不正确。在这里，我正在使用 uri 创建一个变量

```
var uri = new Uri("/assets/data/filename.xml"); 
```

在这里我得到了错误。那么如何在 Windows 8 应用程序中读取本地文件呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:25:56.993

您使用带有第二个参数类型的[重载构造函数](http://msdn.microsoft.com/en-us/library/ms131565.aspx)`UriKind`。像这样：

```
var uri = new Uri("/assets/data/filename.xml", UriKind.Relative); 
```

# php - 如何从搜索引擎隐藏特定的网站页面 URL？

> ID：12089157
> 
> 赞同：5
> 
> 时间：2012-08-23T09:58:17.407
> 
> 标签：php, .htaccess, meta-tags

1.  我的项目是一个电子商务网站，它包含很多静态和动态页面。我只想对搜索引擎隐藏*一页*。如果有人搜索该文本，则它不需要显示在“Google”、“Yahoo”等搜索引擎上。

> **[http://www.mysitename.com/users/download/id](http://www.mysitename.com/users/download/id)**

以上网址需要隐藏在搜索引擎中。

如果有人搜索我的 mysitename，那么上面的链接现在也显示在 Google 搜索中。我能为此做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T10:01:37.403

在您的网站根目录中添加一个文件`robots.txt`，其中包含以下内容：

```
User-agent: *
Disallow: /users/download/id 
```

这种方法基本上告诉搜索引擎不要索引`/users/download/id`。

这并不意味着每个搜索引擎都会这样做，但大多数现代搜索引擎都会考虑该文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:07:58.403

你可以使用Seo技术...

您可以将一些代码放入 HTML 中，以防止机器人爬取您的页面。此代码以元标记的形式（您认为元标记仅用于关键字）放置在网页的标题中（意思是和标记之间）。

以下是此代码外观的四个示例；

```
<meta name="robots" content="index,follow">
<meta name="robots" content="noindex,follow">
<meta name="robots" content="index,nofollow">
<meta name="robots" content="noindex,nofollow"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T20:56:47.793

```
 <meta name="googlebot" content="noindex,nofollow,noarchive,nosnippet,noodp" />
    <meta name="robots" content="noindex,nofollow,noarchive,nosnippet,noodp" /> 
```

# php - 如何将数组值转换为数组索引，数组值在 PHP 中保持不变

> ID：12089159
> 
> 赞同：0
> 
> 时间：2012-08-23T09:58:19.147
> 
> 标签：php, arrays, arraylist, associative-array

我有一个这样的数组

```
array(
0 => "bar",
1 => "foo",
); 
```

我想要这样的输出

```
array(
"bar" => "bar",
"foo" => "foo",
); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T09:59:15.783

~~假设您的原始数组严格来说是一个数字数组~~：

实际上也适用于非数字：

```
array_combine($array, $array); 
```

[http://codepad.org/fxOmIh2D](http://codepad.org/fxOmIh2D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:32:14.373

```
$arr = array(
0 => "bar",
1 => "foo",
);

$arrCombine = array_combine($arr, $arr);

print_r($arrCombine); 
```

```
给

大批
(
    [酒吧] => 酒吧
    [foo] => 富
)

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:08:17.863

如果是非数字数组

使用值作为键的简单逻辑有效

```
$array1 = array(
   0 => "bar",
   "cat" => "foo",);
foreach($array1 as $key => $value)
{
    $array1[$value] = $value;
    unset($array1[$key]);
}

var_dump($array1); 
```

给

```
array(2) {
  ["bar"]=>
  string(3) "bar"
  ["foo"]=>
  string(3) "foo"
} 
```

如果它在上面严格使用答案，我猜会更快并且代码也更干净。

[http://codepad.org/x3Z1zLjz](http://codepad.org/x3Z1zLjz)

# javascript - 自动刷新使用 javascript 的 rails 3.2 页面内容

> ID：12089160
> 
> 赞同：-1
> 
> 时间：2012-08-23T09:58:19.873
> 
> 标签：javascript, ajax, ruby-on-rails-3

我正在使用使用 app.js 文件的显示视图。在此我从数据库中检索数据并使用 app.js 中的一些 api 显示。我需要自动重新加载显示，比如 5 秒。我不想刷新页面而是更新页面。有 'mydiv' 的 div 包含显示内容。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:24:45.663

这可以使用 JavaScript 来完成。要每 n 分钟刷新一次 div，可以使用 setInterval 方法每 n 毫秒调用一次函数。此函数应发出 ajax 请求以从服务器获取数据并将数据插入 HTML。下面的代码使用 jQuery，但您可以使用任何其他库来获取结果。

```
$(document).ready(function() {
    // get data every 5 seconds and refresh myDiv
    var pingAfter = 5000;  
    var refreshId = setInterval(function() {
        $("#myDiv").load('/partial/data');
    }, pingAfter);
}); 
```

# javascript - 电话上的谷歌广告转换？

> ID：12089166
> 
> 赞同：1
> 
> 时间：2012-08-23T09:58:27.640
> 
> 标签：javascript, mobile, google-ads-api, phone-call

当用户点击我的页面上来自谷歌搜索的电话号码时，我想跟踪 adwords 转换。这就是我所做的：

我添加了一段基于 detectmobilebrowser.js 的脚本来检查用户是否正在使用手机。[你可以在这里](http://www.servimulti.com/detectmobilebrowser.js)看到我的脚本

我在这样的电话号码上有一个链接：

```
<a onclick='clickNumber()' href="tel:9xxxxxxxx">xxx xxx xxx</a> 
```

这是当有人点击数字时触发的 javascript（请注意，只有当点击来自移动浏览器时才会跟踪转换）：

```
<script type="text/javascript"> 
function trackConv(google_conversion_id,google_conversion_label) {
         var image = new Image(1,1); 
         image.src = "http://www.googleadservices.com/pagead/conversion/"+google_conversion_id+"/?label="+google_conversion_label+"&script=0";      }
function clickNumber() {
    if(isMobile) {
        trackConv(xxxxxxxxxx,"xxxxxxxxxxxxxxxxxxx");
        }
}
</script> 
```

当有人点击电话号码时会跟踪转换，但随后他们必须接受拨打该号码。我怎么知道有人在打电话。这样的事情有任何类型的API或事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:30:40.747

恐怕真的没有办法知道是否实际拨打了电话（而不是用户只是单击链接）。

您可能做的最好的事情是要求您有一种以编程方式知道来电时间的方法，并将点击时间与通话时间相匹配。但这远非以任何一种自动化方式进行的简单解决方案。

您唯一可以做的另一件事是，如果您跟踪自己何时点击该链接，并向接听电话的人展示最近的“点击者”列表，那么您就可以执行诸如跟踪呼叫转换之类的事情“成功”的致电转化次数（假设您在这里销售产品/服务）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:53:46.690

我发现你现在可以跟踪移动电话转化，你需要正确设置谷歌广告词，它会生成一个特殊的转化代码段，你必须将它放在正文结束标记之前。

要在有人调用时触发转换，请不要忘记`goog_report_conversion()`在有人点击 telf 时调用（在提供的代码段中定义）。你可以这样做：

```
<a onClick="goog_report_conversion()" href="tel: xxxxxx">xxxxxxxxx</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T16:28:07.293

将他们的新转化导入功能 ( [https://support.google.com/adwords/answer/2998031?hl=en](https://support.google.com/adwords/answer/2998031?hl=en) ) 与呼叫跟踪提供商结合使用，可以将任何线下事件注册为 AdWords 中的转化。

当它在 2013 年 9 月发布时，我记得博客文章中提到了 Mongoose Metrics（呼叫跟踪提供商），它有一份白皮书或有关如何使这项工作发挥作用的东西。

# android - 将安卓设备与电视模拟器上的应用程序配对

> ID：12089169
> 
> 赞同：1
> 
> 时间：2012-08-23T09:58:38.720
> 
> 标签：android, samsung-smart-tv

我正在尝试在三星模拟器 3.5.1 上让消息传递系统工作。

得到了正确发现模拟器的android应用程序。当我尝试连接时开始出现问题：

```
String url='http://'+tvUrl+':8008'+'/ws/app/'+appId+'/connect';
HttpClient client = new DefaultHttpClient();
HttpPost request = new HttpPost();
request.addHeader('Accept-Language', 'en-us');
request.addHeader('sldeviceid', '12345');           
request.addHeader('vendorid', 'VenderMe');
request.addHeader('devicename', 'IE-Client');
request.addHeader('productid', 'SMARTDev');
request.addHeader('Accept-Encoding', 'gzip, deflate');
request.addHeader('User-Agent', 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1;Trident/5.0)');
request.addHeader('Accept', '*/*');

request.setURI(new URI(url));

client.execute(request); 
```

appId 是从模拟器中读取的硬编码值：

```
alert('App id: '+ curWidget.id); 
```

结果，当应用程序在模拟器上运行时，我收到错误 404。

我错过了什么？这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T23:08:13.893

您使用的模拟器版本太旧。如果您想通过 SDK 使用 AllShare 功能，您应该使用 4.0+。

# javascript - 来自此单击的 jquery 不同选择

> ID：12089174
> 
> 赞同：0
> 
> 时间：2012-08-23T09:59:01.933
> 
> 标签：javascript, jquery, html, jquery-selectors, html-parsing

我有这个不起作用的代码

首先我添加一个img div

```
$('div.group_title a').prepend("<img src='replace_w_img_link_in_real'  width='20' height='20'  >"); 
```

然后我选择那个 div

```
$('.el.group_title a img').on('click', function(e){
  e.preventDefault();
  var img2 = "img_link_path_2";
  var img1 = "img_link_path_1";

  var img = $(this).attr("src");

  if (img == img1) {
    $(this).attr("src",img2);
  } else {
    $(this).attr("src",img1);
  }

  $(this).nextUntil('.el.group_title', '.sidebar_project').toggle();
}); 
```

这里的问题是`$('.el.group_title a img')`只返回一个选择，当我这样做时我`$(this).nextUntil('.el.group_title', '.sidebar_project').toggle();` 找不到 div。

所以想法是它添加了一个 img div，当您单击该 img 时，img 会更改并隐藏/显示内容`.sidebar_project`，直到下一个 img。我试图改变`$(this).nextUntil('.el.group_title a img'`但没有运气

根据要求，这是基本 html

```
<div class="el group_title">
  <a href="link_path">NAME</a>
</div>
<div data-project-id="195677" class="sidebar_project">..</div>
<div data-project-id="9844" class="sidebar_project">..</div>
<div class="el group_title">
  <a href="link_path">NAME 2</a>
</div>
<div data-project-id="195677" class="sidebar_project">..</div>
<div data-project-id="9844" class="sidebar_project">..</div> 
```

现在当我添加 img div

```
<div class="el group_title">
  <a href="link">
    <img alt="ACME org" src="link" width="20" height="20">org name</a>
</div>
.... 
```

这是 jsFiddle -> [http://jsfiddle.net/6fdMc/](http://jsfiddle.net/6fdMc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:34:41.777

It's hard to tell exactly what you're trying to do, but it sounds like part of the solution will be to `$( this ).closest( ".group_title" )`. Are you trying to do something [like this](http://jsfiddle.net/psZyE/3/)? This is the part that I changed in your code:

Original:

```
$(this).nextUntil('.el.group_title', '.sidebar_project').toggle(); 
```

New:

```
$( this ).closest( ".group_title" )

  .nextUntil( ".group_title", ".sidebar_project" ).toggle(); 
```

# android - 谷歌播放在通知区域显示的应用内计费错误的活动

> ID：12089175
> 
> 赞同：2
> 
> 时间：2012-08-23T09:59:04.810
> 
> 标签：android, in-app-billing

我有使用应用内购买的 android 应用程序。

当我**尝试购买**商品并且卡上**没有足够的钱时，** **Google Play 会在通知区域中放置通知**（购买失败），然后单击该通知会打开我的应用程序并进行初始活动。

**我可以**：
0）让谷歌播放不要将此通知添加到通知区域吗？
1）设置要在此通知点击上启动的活动的意图？

# css - 忽略边距的正文背景图像

> ID：12089177
> 
> 赞同：0
> 
> 时间：2012-08-23T09:59:09.117
> 
> 标签：css, background, margin

一个快速的问题；

我有许多完整且非常复杂的网站，我正在其上激活 cookie 接受脚本。cookie 消息包装出现在正文包装的顶部。

在许多此类网站（主要是电子商务网站）上，有不少页面使用 body 标签来标记背景图像。由于使用了后端系统，这是不可避免的。

我使用的方法是将主体上边距设置为 200px，然后在 cookie 包装器上设置负 200px 上边距。

问题是身体背景不尊重该边距。如果背景位置设置为顶部，则它位于窗口顶部并忽略正文边距。我可以将背景顶部位置设置为 200 像素，但这会搞砸背景顶部位置已经设​​置为不同值的页面......

我只是在寻找一种使背景尊重正文边距而不影响布局的任何其他部分的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:28:15.347

你可以使用 jQuery 来处理这个问题。准备好文档后，检查是否有 cookie 包装器 div。如果存在，请更改背景位置。

# javascript - 随着时间的推移延迟问题javascript

> ID：12089180
> 
> 赞同：2
> 
> 时间：2012-08-23T09:59:19.013
> 
> 标签：javascript, google-chrome, memory, lag

我有一个技术问题要问你。我目前正在使用带有计时器和请求的 javascript 开发一个巨大的应用程序，我有一个奇怪的问题。

当我在我的项目上工作两个小时（如此刷新页面、提交、重新刷新......）时，我没有任何问题，但是当我再工作一个小时时，我的应用程序开始出现一些滞后问题，打开控制台可能会成为一场噩梦。是服务器问题还是电脑问题？？

我使用了很多计时器（setTimeout 和 setInterval）

我们可以从chrome / firefox / safari / ...动态释放所有内存吗？

如果您有任何想法，请告诉我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:22:54.283

使用计时器的另一种方法是：

1.  每隔最短的定时器持续时间只有一个定时器 (setInterval) 调用；
2.  所有其他计时器都由该计时器在主计时器调用的指定时间触发；

你可以在 jQuery 中找到一些关于[动画和效果](https://github.com/jquery/jquery/blob/master/src/effects.js)的线索。

我认为这个概念可能来自计算机科学上的任务调度和[中断。](http://en.wikipedia.org/wiki/Interrupt)

# android - Android Manifest，如何禁用较低 api 的启动器图标

> ID：12089188
> 
> 赞同：0
> 
> 时间：2012-08-23T09:59:47.400
> 
> 标签：android, accessibility

我有一个我编写的可访问性应用程序，但在 android 4.0 及更高版本上，api 允许设置设置活动。这违背了拥有启动器条目的目的。有没有办法在清单中挑出 4.0 及更高版本的系统以不具有启动器图标？

编辑：解决方案

我将原始设置分类为 JB/ICS 设置。在这一点上这是非常不必要的，但是如果将特定于 JB/ICS 的东西添加到应用程序中，从长远来看，将它们分开可能会很好。

谢谢alanv，你的片段仍然有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T06:34:14.283

您可以根据平台版本有选择地禁用活动。为您的 Settings 活动添加活动别名，并将 enabled 属性设置为特定于平台的值。这将确保它仅在您需要时显示在启动器中。

AndroidManifest.xml：

```
<activity
    android:name=".MySettingsActivity"
    . . . >
</activity>

<activity-alias
    android:name=".MyActivityAlias"
    android:label="@string/settings"
    android:targetActivity=".MySettingsActivity"
    android:enabled="@bool/show_settings">
        <intent-filter>
        . . .
        </intent-filter>
</activity-alias> 
```

值-v14/bool.xml：

```
<bool name="show_settings">false</bool> 
```

值/bool.xml：

```
<bool name="show_settings">true</bool> 
```

# java - 无需整理源代码的 HTML 解析器

> ID：12089191
> 
> 赞同：0
> 
> 时间：2012-08-23T09:59:58.497
> 
> 标签：java, parsing, html-parsing, jtidy, htmlcleaner

我的机器上有数百个旧的 html 文件，我正在尝试解析和提取一些数据。我尝试了不同的 Java 解析器，包括 Jsoup、Tagsoup、HTMLcleaner、JTidy 等。由于 html 代码在文件中的方式，我只能使用支持 XPATH 的解析器，尝试了 Jsoup，但找不到等效的 css 选择器。

无论如何，我的问题是无论我尝试什么解析器，都会清理实际内容并将 ' （撇号）之类的东西转换为奇怪的字符。

是否可以使用任何 Java 解析器解析内容而无需整理和替换特殊字符？

# php - 如何编辑 joomla 插件？

> ID：12089192
> 
> 赞同：0
> 
> 时间：2012-08-23T09:59:59.527
> 
> 标签：php, css, joomla2.5

我是 joomla 开发的新手。我下载了 joomla 2.5 并安装在本地计算机上进行练习。我的问题是我们可以编辑 joomla 插件布局吗？我想更改内容的默认布局 - 分页插件（当我们在文章中添加分页时出现的分页）。我浏览了 joomla 管理员登录，但没有找到任何东西，所以怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:14:11.597

有两种方法可以编辑 joomla 插件的布局。 **1.进入管理员->插件管理器->选择要编辑的插件。在右侧你会得到一些参数，比如改变皮肤，数量，高度，宽度等取决于你的插件。通过使用此选项，您可以选择任何您想要的设置或布局。大多数插件都有皮肤下拉菜单，您可以通过它更改插件的外观。**

**2.second是如果您了解html和php而不是直接编辑代码。转到根文件（ex.joomla2.5）->插件->选择插件文件并进行编辑。**

# ruby-on-rails - rails 数据库字段安全性

> ID：12089193
> 
> 赞同：0
> 
> 时间：2012-08-23T10:00:04.717
> 
> 标签：ruby-on-rails, security, field

在此处输入代码

```
@user = User.new(params[:id])
@user.update_attributes(params[:user])
# params[:user] = {:admin => true, :name => "stackoverflow", ...} 
```

如果 :admin 只允许服务管理员。

开发人员没有为管理员制作（例如，但有些用户强行插入。

我希望某些字段仅由具有权限的人（不是普通用户）允许

（以前我是强行插入的。public tumblr 不能更改为 private tumblr，但是可以通过插入 soem 代码行来实现）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:26:29.477

您正在搜索的是 attr_accessible。

来自[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

```
class AccountsController < ApplicationController
  include ActiveModel::MassAssignmentSecurity

  attr_accessible :first_name, :last_name
  attr_accessible :first_name, :last_name, :plan_id, :as => :admin

  def update
    ...
    @account.update_attributes(account_params)
    ...
  end

  protected

  def account_params
    role = admin ? :admin : :default
    sanitize_for_mass_assignment(params[:account], role)
  end

end 
```

**注意：** 这仅适用于 rails > 3.0。如果您的版本小于 3，您可以查看 ryan bate 的[动态 attr 可访问演员表](http://railscasts.com/episodes/237-dynamic-attr-accessible)

# php - 使用angularjs将记录插入mysql数据库

> ID：12089195
> 
> 赞同：0
> 
> 时间：2012-08-23T10:00:12.993
> 
> 标签：php, angularjs

我希望使用 angularjs 在 mysql 表中插入一条记录。表：产品 product_id、名称、描述。

我希望有两个文本字段和一个保存按钮，单击保存按钮记录应该插入到 mysql 表中。我提到了以下链接：

但一切都是徒劳的……

索引.html

```
 <html ng-app>
    <head>
        <script src="../angular-1.0.1.min.js"></script>
        <script src="js/controllers.js"></script>
    </head>
    <body>
    <ul ng:controller="ProductListCtrl">
        <li ng:repeat="product in products">
            {{product.name}}
        </li>
    </ul>
    <form method = 'post'>
        Name : <input type = 'text' name = 'txtName'/>
        Description : <input type = 'text' name = 'txtDescription'/>
        <button ng:click="saveProduct()">New Product</button>
        <div id="content">
            <ng:view></ng:view>
        </div>
    </form>
    </body>
</html> 
```

我在哪里写 saveProduct() 方法，我应该在里面写什么？

我应该怎么做才能从 angularjs 在 mysql 中添加记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-02T09:47:16.183

您的保存产品方法应包含`$http.post`如下方法

`$http.post('/api/products', $scope.form).`

在html中定义表单如下

`<input ng-model="form.txtName" type="text" name="txtName" /> <input ng-model="form.txtDescription" type="text" name="txtDescription" />`

您需要定义 REST API 以`/api/products`使用您的 PHP 代码，该`$http.post`方法会将 json 发送到服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:20:03.933

AngularJS 是一个客户端 MV* 框架。大多数客户端框架都希望将有关 DOM 操作的决定留给它们，它们只是从服务器端获取数据。

在您的情况下，这些数据当然会存储在 MySQL 中，您必须通过 PHP 检索并为您的数据库编写一个简单的 RESTful 接口。在您的角度代码中，假设您的 PHP restful 端点类似于

[http://mywebsite.com/api/product](http://mywebsite.com/api/product)

如果您通过 ng-resource 进行简单的 POST 调用，则相当于在您的数据库上进行保存。有关如何设置的详细信息，您可以查看一些浮动的 ng-resource 示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T09:29:25.450

很难给出 ganaraj 解释的完整代码，因为它涉及服务器和客户端代码。

在客户端，您应该在控制器中编写 saveProduct() 函数/方法...从那里您可以直接发送 HTTP 请求（例如，使用 $http 对象，它内置于 angularJS）或编写 Angular 服务也将使用 $http 或 $resource 发送请求（我个人觉得 $http 更容易理解）。然后必须将服务注入控制器，以便您的控制器可以调用其（服务）saveProduct() 方法。

您绝对需要的是服务器端的 REST 接口/Web 服务 API。Web 服务“接受”传入的 HTTP 请求，然后执行某种服务器端功能，将实际的 SQL 语句发送到您的数据库以保存产品。

通常不会有从客户端直接发送到服务器的 SQL 代码。事实上，我什至不确定这是否可能......在使用 Java 时，您需要一些“中间”软件，例如 JDBC，以便让您的编程语言与数据库对话。据我所知，AngularJS 不存在这种类型的东西，因为常用的架构/设计模式是使用 REST 服务/Web 服务 API。

如果您在服务器端使用 PHP，以下链接可能会对您有所帮助（它解释了如何设置简单的 REST API）：

[使用 PHP 创建简单的 REST API](http://blog.ijasoneverett.com/2013/02/rest-api-a-simple-php-tutorial/)

我发现此链接对如何实现控制器和服务以将 HTTP 请求发送到服务器很有用：

[在 AngularJS 中使用 $http 发布表单数据](http://www.bennadel.com/blog/2615-posting-form-data-with-http-in-angularjs.htm)

# android - 启动新活动时出现 ANR 错误

> ID：12089199
> 
> 赞同：0
> 
> 时间：2012-08-23T10:00:21.173
> 
> 标签：android, multithreading, countdowntimer

基本上我有一个带有开始按钮的菜单类，它在线程中启动一个新的游戏活动。

在 Game 类中，我实例化了一个 Count 对象（它扩展了 CountDownTimer）。

启动游戏活动时，我收到 ANR 错误，我相信它是由计时器引起的，因为我已将其注释掉并且它工作得很好。坦率地说，我不知道如何解决这个问题；我尝试了不同的方法但失败了。 **编辑后的代码****最后是 Logcat* *

```
public class Menu extends Activity {

    Button start, highscores, exit;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);
        addListenerOnButton();

    }

    private void addListenerOnButton() {

        start = (Button) findViewById(R.id.start);
        start.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {

                        startActivity(new Intent("net.fb.clauz.GAME"));

                };

        });

        highscores = (Button) findViewById(R.id.highscores);
        highscores.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {

            }
        });

        exit = (Button) findViewById(R.id.exit);
        exit.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {
                finish();
                System.exit(0);
            }
        });

    }
}

public class Game extends Activity {

    Button button;
    TextView score;
    public static TextView timeleft;
    int x = 0;
    public Counter count;
    public static boolean running=true;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        count = new Counter(30000, 1000);
        timeleft = (TextView) findViewById(R.id.timeleftTitle);

        gameThread = new Thread(new Runnable() {
            public void run() {
                while (running) {
                    addListenerOnButton();
                    count.start();
                }
            }
        });
        gameThread.start();
    }

    private void addListenerOnButton() {

        button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View view) {
                x++;
                score = (TextView) findViewById(R.id.score);
                score.setText(String.valueOf(x));

            }

        });

    }
}

public class Counter extends CountDownTimer{

    public Counter(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub
        Game.running = false; // stop the game

        //need to implement action to return to the buttons menu.
    }

    @Override
    public void onTick(long millisUntilFinished) {
        // TODO Auto-generated method stub
        Game.timeleft.setText("Left: " + millisUntilFinished / 1000);
        System.out.println(millisUntilFinished / 1000);
    }

} 
```

日志猫：

```
08-23 11:00:02.963: W/ActivityManager(885): Activity idle timeout for ActivityRecord{b4ca99d0 net.fb.clauz/.Game}

08-23 11:00:18.343: D/dalvikvm(14424): GC_CONCURRENT freed 3397K, 28% free 9419K/12935K, paused 4ms+4ms

08-23 11:00:21.383: I/InputDispatcher(885): Application is not responding: Window{b4cd2aa8 net.fb.clauz/net.fb.clauz.Game paused=false}.  5005.6ms since event, 5004.9ms since wait started

08-23 11:00:21.383: I/WindowManager(885): Input event dispatching timed out sending to net.fb.clauz/net.fb.clauz.Game

08-23 11:00:21.415: I/Process(885): Sending signal. PID: 14424 SIG: 3

08-23 11:00:21.415: I/dalvikvm(14424): threadid=3: reacting to signal 3

08-23 11:00:21.443: I/dalvikvm(14424): Wrote stack traces to '/data/anr/traces.txt'

08-23 11:00:21.443: I/Process(885): Sending signal. PID: 885 SIG: 3

08-23 11:00:21.443: I/dalvikvm(885): threadid=3: reacting to signal 3

08-23 11:00:21.593: I/dalvikvm(885): Wrote stack traces to '/data/anr/traces.txt'

08-23 11:00:21.593: I/Process(885): Sending signal. PID: 944 SIG: 3

08-23 11:00:21.593: I/dalvikvm(944): threadid=3: reacting to signal 3

08-23 11:00:21.634: I/dalvikvm(944): Wrote stack traces to '/data/anr/traces.txt'

08-23 11:00:21.634: I/Process(885): Sending signal. PID: 976 SIG: 3

08-23 11:00:21.634: I/dalvikvm(976): threadid=3: reacting to signal 3

08-23 11:00:21.673: I/dalvikvm(976): Wrote stack traces to '/data/anr/traces.txt'

08-23 11:00:22.463: D/dalvikvm(885): GC_CONCURRENT freed 472K, 14% free 11275K/13063K, paused 6ms+0ms

08-23 11:00:23.293: D/dalvikvm(885): GC_EXPLICIT freed 326K, 14% free 11328K/13063K, paused 6ms+9ms

08-23 11:00:23.963: E/ActivityManager(885): ANR in net.fb.clauz (net.fb.clauz/.Game)

08-23 11:00:23.963: E/ActivityManager(885): Reason: keyDispatchingTimedOut

08-23 11:00:23.963: E/ActivityManager(885): Load: 1.54 / 0.86 / 0.89

08-23 11:00:23.963: E/ActivityManager(885): CPU usage from 11149ms to 0ms ago:

08-23 11:00:23.963: E/ActivityManager(885):   98% 14424/net.fb.clauz: 96% user + 1.7% kernel / faults: 117 minor

08-23 11:00:23.963: E/ActivityManager(885):   0.6% 778/surfaceflinger: 0.6% user + 0% kernel

08-23 11:00:23.963: E/ActivityManager(885):   0.5% 885/system_server: 0.3% user + 0.1% kernel

08-23 11:00:23.963: E/ActivityManager(885):   0% 944/com.android.systemui: 0% user + 0% kernel / faults: 1 minor

08-23 11:00:23.963: E/ActivityManager(885): 99% TOTAL: 97% user + 1.9% kernel

08-23 11:00:23.963: E/ActivityManager(885): CPU usage from 1917ms to 2519ms later:

08-23 11:00:23.963: E/ActivityManager(885):   92% 14424/net.fb.clauz: 92% user + 0% kernel

08-23 11:00:23.963: E/ActivityManager(885):     46% 14424/net.fb.clauz: 46% user + 0% kernel

08-23 11:00:23.963: E/ActivityManager(885):     46% 14440/Thread-108: 46% user + 0% kernel

08-23 11:00:23.963: E/ActivityManager(885):   8.6% 885/system_server: 3.4% user + 5.1% 
kernel
08-23 11:00:23.963: E/ActivityManager(885):     6.8% 920/InputDispatcher: 3.4% user + 3.4% kernel

08-23 11:00:23.963: E/ActivityManager(885): 100% TOTAL: 95% user + 4.9% kernel

08-23 11:00:24.583: D/dalvikvm(885): GC_CONCURRENT freed 475K, 13% free 11423K/13063K, paused 6ms+15ms

08-23 11:00:38.693: W/ActivityManager(885):   Force finishing activity net.fb.clauz/.Game 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:02:54.673

删除线程。

```
start.setOnClickListener(new OnClickListener() {

        public void onClick(View view) {

                    startActivity(new Intent("net.fb.clauz.GAME"));

        }
    }); 
```

# java - 渲染空 Jtable

> ID：12089201
> 
> 赞同：3
> 
> 时间：2012-08-23T10:00:23.773
> 
> 标签：java, swing, jtable

我的摇摆应用程序中有 JTable。如果模型为空（行数 == 0），我想显示文本“0 结果”。我怎样才能做到这一点？

K。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:17:29.770

您可以使用 and 将文本（和或与/ `Icon`）`ImageIcon`放入 `JLabel`

*   [GlassPane](https://stackoverflow.com/questions/8715807/layering-multiple-glasspanes-in-a-root-container)（常见和基本的解决方法）

*   [J视口](https://stackoverflow.com/q/8614972/714968)

*   提到[了JLayer](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)（基于`JXLayer`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T15:44:45.670

如果您扩展`AbstractTableModel`，如本[例](https://stackoverflow.com/a/9134371/230513)所示，您可以检查您选择的数据结构的大小并调整覆盖的方法以返回具有所需值的单行和列。例如，

```
@Override
public Object getValueAt(int row, int col) {
    if (keys.length == 0) {
        return "No results.";
    }
    ...
} 
```

构造函数和其余方法中需要进行相关更改`getRowCount()`，`getColumnCount()`并且`getColumnName()`.

# asp.net-mvc-3 - MVC .NET 如何测试链接是否出现在页面上

> ID：12089206
> 
> 赞同：1
> 
> 时间：2012-08-23T10:00:34.507
> 
> 标签：asp.net-mvc-3, unit-testing, razor

我开始为我的剃须刀页面编写单元测试（[查看此链接](http://blog.davidebbo.com/2011/06/unit-test-your-mvc-views-using-razor.html)）。我想知道，如果我想测试特定页面是否存在链接，我可以解析 html 并测试页面上是否出现路由“Admin/Index”。但是，如果我将控制器方法从 Index 更改为 Home - 它会破坏我的 gui 单元测试。

有没有办法对链接是否出现在未与控制器耦合的页面上进行单元测试？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:09:31.623

我认为您不应该尝试从控制器的具体操作中抽象出单元测试。如果您从 Index 更改为 Home - 从人类的角度来看没问题，但从单元测试的角度来看，它可以是 DeleteWholeSite 而不是 Home。并且发布此链接非常危险，但可能会误操作。因此，如果您更改页面上的某些链接，那么您应该维护您的单元测试，以确保您的页面包含反映您希望提供给用户的功能的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:26:49.973

当然，如果您真的愿意，也可以这样做。我要做的是使用像[watin](http://watin.org/)或[selenium](http://seleniumhq.org/)这样的网络驱动程序来编写这样的测试。

# php - PHP 定位条目

> ID：12089207
> 
> 赞同：0
> 
> 时间：2012-08-23T10:00:38.557
> 
> 标签：php, position

我对 PHP 很陌生，所以请善待:)。我一直在为客户开发一个系统，以将产品添加到页面、删除和编辑这些产品。现在我正在定位，所以我创建了一个 mysql 条目“位置”。

我的表有一个自动增加的 id、标题、描述和位置。

我已设法将定位设置为最新上传，例如，如果我有 3 个条目，则最新上传将获得位置 4。这是上传脚本：

```
//UPLOAD SCRIPT

    if (isset($_POST['upload'])) {
        $dirupload = "../images/";
        $dirupload = $dirupload . basename( $_FILES['image-upload']['name']);
        $titleupload = $_POST['title-upload'];
        $descriptionupload = $_POST['desc-upload'];
        $imageupload = ($_FILES['image-upload']['name']);
        $uploadedfileupload = $_FILES['image-upload']['tmp_name'];
        $uploadedfiletypeupload = $_FILES['image-upload']['type']; 

        $query="SELECT * FROM promotions ORDER BY position";
        $result=mysql_query($query);
        $num=mysql_num_rows($result);
        $add=$num+1;

        if (!($uploadedfiletypeupload =="image/pjpeg" OR $uploadedfiletypeupload =="image/jpeg" OR $uploadedfiletypeupload =="image/jpg")){
            echo "L'image doit être en .jpg ou .jpeg";
        }else if (move_uploaded_file($_FILES['image-upload']['tmp_name'], $dirupload)){    
            $sql="INSERT INTO promotions (title, description, position) VALUES ('$titleupload','$descriptionupload','$add')";
            if (!mysql_query($sql,$con)){
                die('Error: ' . mysql_error());
            }

            $newnameupload = "../images/" . mysql_insert_id() . ".jpg";
            rename ("../images/$imageupload","$newnameupload");    
            $orig_imageupload = imagecreatefromjpeg("../image/$newnameupload");
            $sm_imageupload = imagecreatetruecolor(96,96);
            imagecopyresampled($sm_imageupload,$orig_imageupload,0,0,0,0,96,96,imagesx($orig_imageupload),imagesy($orig_imageupload));
            imagejpeg($sm_imageupload, $newnameupload, 100);

        }else{
            echo "Problem";
        }
    } 
```

现在我的问题是使用“向上”和“向下”条目来更改位置，我设法在当前位置添加或减去 1，问题是我需要与下一个或上一个相反，这里是“向上”脚本：

```
if (isset ($_POST['up'])){
        $id=$_POST['id'];
        $position=$_POST['position'];
        $newPos=$position-1;

        mysql_query("UPDATE promotions SET position='$newPos' WHERE id='$id'");

    } 
```

所以我需要找到上一行并添加 1，例如：如果我有第二个条目要放在第一个，单击“向上”按钮，它会向上移动（有效）但我需要找到旧的第一个位置并将其向下移动一次（这就是问题所在）。

希望我足够清楚，并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:16:57.930

认为这应该在您当前产品的更新之前工作

```
mysql_query("UPDATE promotions SET position='$position' WHERE position='$newPos'"); 
```

# ruby - 不承认 resque worker 已经启动

> ID：12089211
> 
> 赞同：2
> 
> 时间：2012-08-23T10:00:42.770
> 
> 标签：ruby, resque, god

我在从上帝那里运行 resque 工人时遇到问题。

这是我的上帝配置

```
num_workers = 9 
queue       = '*'
current_path = "/u/apps/narg/current"

God.pid_file_directory = "/u/apps/narg/current/tmp/pids"
num_workers.times do |num|
  God.watch do |w|
    w.name     = "resque-#{num}"
    w.group    = "resque_all"
    w.interval = 30.seconds
    w.env      = {"QUEUE"=>queue, "RAILS_ENV"=>"production",
             'PIDFILE' => "#{current_path}/tmp/pids/#{w.name}.pid" }
w.start    = "cd #{current_path} ; bundle exec rake environment resque:work"
w.log      = "#{current_path}/log/god-#{w.name}.log"
w.pid_file = "#{current_path}/tmp/pids/#{w.name}.pid"
w.uid = 'root'
w.gid = 'root'
w.behavior(:clean_pid_file)
# retart if memory gets too high
w.transition(:up, :restart) do |on|
  on.condition(:memory_usage) do |c|
    c.above = 150.megabytes
    c.times = 2
  end
end

# determine the state on startup
w.transition(:init, { true => :up, false => :start }) do |on|
  on.condition(:process_running) do |c|
    c.running = true
    c.interval = 5
  end
end

# determine when process has finished starting
w.transition([:start, :restart], :up) do |on|
  on.condition(:process_running) do |c|
    c.running = true
    c.interval = 5.seconds
  end

  # failsafe
  on.condition(:tries) do |c|
    c.times = 5
    c.transition = :start
    c.interval = 5.seconds
  end
end

    # start if process is not running
    w.transition(:up, :start) do |on|
      on.condition(:process_running) do |c|
        c.running = false
      end
    end
  end
end 
```

当我开始上帝时，当工人正在工作时，一切看起来都很好，并且它运行所有过渡到：向上。

但是当工人不运行时，它会在启动后停止。工作人员实际上已经启动，pid 文件也是正确的。只有上帝不明白：

```
 ** [out :: narg-wrk02] I [2012-08-23 11:40:48]  INFO: resque-7 move 'unmonitored' to 'init'
 ** [out :: narg-wrk02] I [2012-08-23 11:40:48]  INFO: resque-7 moved 'unmonitored' to 'init'
 ** [out :: narg-wrk02] I [2012-08-23 11:40:48]  INFO: resque-7 [trigger] process is not running (ProcessRunning)
 ** [out :: narg-wrk02] I [2012-08-23 11:40:48]  INFO: resque-7 move 'init' to 'start'
 ** [out :: narg-wrk02] I [2012-08-23 11:40:48]  INFO: resque-7 before_start: deleted pid 
 ** [out :: narg-wrk02] I [2012-08-23 11:40:48]  INFO: resque-7 start: cd /u/apps/narg/current ; bundle exec rake environment resque:work 
```

如前所述，工人已启动并运行良好。pid 文件也包含正确的 pid。

如果我现在杀死上帝并重新启动它，它会很好地识别正在运行的工作人员并转换为 :up..

任何想法或指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T22:08:09.203

尝试改变

`w.start = "cd #{current_path} ; bundle exec rake environment resque:work"`

至

`w.start = "cd #{current_path} ; bundle exec rake environment resque:work &"`

这为我解决了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T03:27:06.897

我用以下方法解决了同样的问题：

```
w.start = "cd #{current_path} && rake environment RAILS_ENV=production resque:work &" 
```

# joomla - 从 Joomla 1.5 文章类别为 Google 阅读器和其他 RSS 阅读器生成 RSS

> ID：12089218
> 
> 赞同：0
> 
> 时间：2012-08-23T10:00:54.590
> 
> 标签：joomla, rss, blogs

我正在创建一个包含博客部分的网站。我希望人们能够在我的网站上有一个按钮，人们可以点击它来订阅博客文章。请问我怎样才能做到这一点？我必须使用哪个扩展程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T05:54:06.677

看看这个页面：

[http://extensions.joomla.org/extensions/content-sharing/rss-syndicate](http://extensions.joomla.org/extensions/content-sharing/rss-syndicate)

# maven - 在antrun插件中引用Maven依赖

> ID：12089227
> 
> 赞同：1
> 
> 时间：2012-08-23T10:01:37.447
> 
> 标签：maven, maven-antrun-plugin

我想在 antrun 插件中引用 maven 项目依赖项。在 maven 组装战争过程之后，我需要删除 WEB-INF/lib 文件夹中存在的所有库，并在那里放置另一个依赖项。我在[这里](http://maven.apache.org/plugins/maven-antrun-plugin/examples/classpaths.html)找到了一篇文章，但那里显示的示例不起作用。有没有其他可能性来做这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:17:54.983

您可以将 antrun 插件中的各个依赖项引用为，例如`${junit:junit}`. 请参阅：[http ://maven.apache.org/plugins/maven-antrun-plugin/examples/classpaths.html](http://maven.apache.org/plugins/maven-antrun-plugin/examples/classpaths.html)

另请参阅：[Maven Antrun 和依赖项](https://stackoverflow.com/questions/1580562)

# git - Intellij IDEA：致命：错误的修订版“HEAD”

> ID：12089230
> 
> 赞同：6
> 
> 时间：2012-08-23T10:01:41.223
> 
> 标签：git, intellij-idea

我正在与我的项目一起工作`git`，`Intellij IDEA`一切都很好。然后我创建了一个包含当前存储库的新存储库。我已更新`Version Control`部分`Preferences`以指向一个新的根文件夹，IDE 向我显示了两个“Git 根”。我把两者都包括在内。

结果：IDEA 不跟踪文件的任何更改并弹出错误：`fatal: bad revision 'HEAD'`. IDE 还声明我的所有文件都没有版本控制。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:42:31.583

您不能只在存储库的父目录上创建一个 git 目录，并期望一切正常。了解您实际想要**实现**的目标会有所帮助，但一个疯狂的猜测是您可能想看看[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T15:48:31.163

这通常是由于`.git`目录嵌套在实际工作空间中造成的，因此您必须删除嵌套 `.git`目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-07T09:13:35.157

好的，自从它打开以来已经有一段时间了，但这不是真的，你可以在一些我在项目上工作过的 repo 上有一个嵌套的 git 结构，每个插件文件夹都有一个 git 文件夹。然而，嵌套文件夹会被 gitignore 文件忽略。这是一个不同的问题。我的解决方案是删除 .git 文件夹并重新开始，因为这是一个新项目，在我的情况下，我重命名了目录和项目，因为我的名称有错字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-21T16:12:01.357

这解决了我的问题：

1.  从 IDE 设置中注销有问题的*版本控制根，然后单击确定：*

    [![在此处输入图像描述](../Images/42955badecddb32b31ddae67eec0db03.png)](https://i.stack.imgur.com/ls8kS.png)

2.  重新打开并再次添加（注册）它：

    [![在此处输入图像描述](../Images/3712a90afc59f4a0e0455fbf3a2d895d.png)](https://i.stack.imgur.com/NIgSP.png)

# javascript - 页面加载时，Javascript 似乎无法加载图像

> ID：12089240
> 
> 赞同：0
> 
> 时间：2012-08-23T10:02:22.813
> 
> 标签：javascript, forms, load

我正在使用 Javascript 使我的复选框更大。这样做我使用图像一个黑色复选框和另一个带有选中复选框的图像。它就像真正的复选框一样工作。但是，当页面加载时，黑色复选框不会成功加载，除非我单击页面中的某个位置来调用它们。请[在此处](http://checkintonight.freeiz.com/)查看页面。

以下是我的 js 代码，我认为它会影响这一点：

```
var Custom = {
    init: function() {
        var inputs = document.getElementsByTagName("input"), span = Array(), textnode, option, active;
        for(a = 0; a < inputs.length; a++) {
            if((inputs[a].type == "checkbox" || inputs[a].type == "radio") && inputs[a].className == "styled") {
                span[a] = document.createElement("span");
                span[a].className = inputs[a].type;

                if(inputs[a].checked == true) {
                    if(inputs[a].type == "checkbox") {
                        span[a].style.background = unchecked;
                    } else {
                        span[a].style.background = unchecked;
                    }
                }
                inputs[a].parentNode.insertBefore(span[a], inputs[a]);
                inputs[a].onchange = Custom.clear;
                if(!inputs[a].getAttribute("disabled")) {
                    span[a].onmousedown = Custom.pushed;
                    span[a].onmouseup = Custom.check;
                } else {
                    span[a].className = span[a].className += " disabled";
                }
            }
        }
} 
```

下面是我在表单加载时的图像： ![在此处输入图像描述](../Images/0983b98044052b448e541cd7199859a5.png)

这是我在任何地方单击时的页面： ![在此处输入图像描述](../Images/3593f6c6bc7820e6c5e4b15efc28d671.png) 已经定义了哪些其他函数和变量。因此，任何人都可以帮助我让它们在表单加载时显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:26:43.197

我不知道你为什么用那个

```
 if(inputs[a].checked == true) {
       if(inputs[a].type == "checkbox") {
           span[a].style.background = unchecked;
       } else {
           span[a].style.background = unchecked;
       }
   } 
```

[但是当我在http://checkintonight.freeiz.com/js/custom-form-elements.js](http://checkintonight.freeiz.com/js/custom-form-elements.js)中打开你的脚本时 尝试在 Custom.init() 的末尾调用函数 clear()，它可以工作

```
init: function() {
  //
  ...
  //
  this.clear();
} 
```

对不起，我的英语不好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:29:44.197

最终，我在我的 Javascript 代码中发现了一个错误。我`else`在函数中添加语句`init()`来测试复选框是否也未被选中。所以代码变成了下面这样：

```
if(inputs[a].checked == true) {
    if(inputs[a].type == "checkbox") {
          span[a].style.background = unchecked;
    }
} else {
    span[a].style.background = unchecked;
} 
```

然后它起作用了！感谢所有审查并回答我的问题的人。

# php - Drupal 7中私人消息模块的定制

> ID：12089241
> 
> 赞同：-2
> 
> 时间：2012-08-23T10:02:24.987
> 
> 标签：php, html, drupal

我在 drupal7 的工作门户网站上工作，我已经制作了一份申请表来申请工作正常并使用私人消息模块的工作。现在我需要在用户申请工作时同时使用两者，提交用户将获得收件箱中的消息。请分享您的知识。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:34:44.993

就像 Bhuvan Rikka 在评论中所说的那样，您可以将电子邮件存储在数据库中，然后使用它来发送包含您想要发送的任何信息的电子邮件：

```
<?php
$to = "$email";
$subject = "Thank you for applying for the job(or whatever you want to say)";
$txt = $message;
$headers = 'From: youremail@domain.com ' . "\r\n" .
mail($to,$subject,$txt,$headers);
?> 
```

在使用它之前，您显然必须从数据库中获取电子邮件并将其存储在 $email 变量中。

希望这有帮助。

# c# - WPF DataTemplate 指定替代源

> ID：12089243
> 
> 赞同：0
> 
> 时间：2012-08-23T10:02:34.147
> 
> 标签：c#, wpf, binding, datatemplate

我有一个`DataTemplate`基于`XmlNode`.

```
<DataTemplate DataType="person" >
    <Border Margin="30" CornerRadius="25">
        <Border.Background>
            <ImageBrush ImageSource="{Binding Path=[dog], Source={????}}" />
        </Border.Background>
        <TextBlock Text="{Binding XPath=@forename}" />
    </Border>
</DataTemplate> 
```

然后`ContentControl`我在`Window`其中`Content`设置了`XmlNode`一个元素名称为“person”和属性名称为“forename”的元素。

`Source`这一切都很好，但我现在想为`Border`背景图像应用替代方案。

在确保图像可用之后，我有一个“提供”图像 uri 的类。这个类被调用`ResourceLoader`，它在我的主窗口中的任何控件中都能完美运行，但我不知道如何从我的`DataTemplate`.

`ResourceLoader`是主要的`DataContext`。`Window`

我希望这是有道理的。

谢谢，丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:13:57.293

对，我想我已经解决了这个问题。

我添加了一个新项目到我的`Resources`

```
<local:ResourceLoader x:Key="allimages" /> 
```

然后，在我`ImageBrush`指定...

```
<ImageBrush ImageSource="{Binding Source={StaticResource allimages}, Path=[dog]}" /> 
```

问题解决了。

# php - 如何传递两个数组？

> ID：12089246
> 
> 赞同：-3
> 
> 时间：2012-08-23T10:02:47.507
> 
> 标签：php

该`test.php`目录与 csv 和文本文件相同。现在我想将所有`csv file name`和传递`all the text name` 给以下`if`条件。即，替换`one.csv`为所有 csv 文件名。替换`one.txt`为所有的txt文件名。

```
if (($handle = fopen("one.csv", "r")) !== FALSE && ($handle2 = fopen("one.txt", 'a')) !== FALSE) { ...} 
```

以下是我的代码。运行代码后，我发现**文本**文件中的所有内容都是一样的。它循环了太多次。如何更改代码？谢谢。

```
 $files = glob("./*.csv");
    $files1 = glob("./*.txt");
    foreach($files as $filepath){
    foreach($files1 as $filepath1){

   $row = 1;
if (($handle = fopen("one.csv", "r")) !== FALSE && ($handle2 = fopen("one.txt", 'a')) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if($row > 1) {
            $url = $data[8];
            foreach($result[0] as $url){
                fwrite($handle2, $url."\r\n");
            }

        }
        $row++;
    }
    fclose($handle);
    fclose($handle2);
}

    }
    } 
```

txt 文件为空。现在，我想读取 csv 文件并提取其中的一些内容，然后将它们放入文本文件中。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:14:10.557

您不需要 glob .txt 文件，只需 glob csv，并将扩展名替换`.csv`为`.txt`

```
$csv = glob('./*.csv');
foreach($csv as $file) {
   $txt = preg_replace('#\.csv$#', '.txt', $file);
   if (($handle = fopen($file, "r")) !== FALSE && ($handle2 = fopen($txt, 'a')) !== FALSE) {
    //your code...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:14:14.050

问题是你在一个循环中有一个循环。因此，每次第一个循环循环时，它都会在第二个循环中再次执行所有操作。

尝试这样的事情：

```
$csv_files = glob("./*.csv");
$txt_files = glob("./*.txt");

$csvs = array();
foreach($csv_files as $fp){
    $csvs[] = fopen($fp, "r");
}

$txts = array();
foreach($txt_files as $fp){
    $txts[] = fopen($fp, "r");
}

var_dump($csvs); // all csv file info
var_dump($txts); // all txt file info 
```

如果您愿意，您可以测试以查看`!== false`单独的循环。否则，如果您只想使用它们，那么您可以遍历单独的数组并以这种方式从中获取信息。

# actionscript-3 - AS3：奇怪的 getBounds() 结果

> ID：12089247
> 
> 赞同：2
> 
> 时间：2012-08-23T10:02:50.213
> 
> 标签：actionscript-3, get, movieclip, bounds

EDIT2：似乎是因为movieclip不包含任何bipmapdata而创建了大数字，但我还不确定，但我真正的错误是我只是忘记了一个“getBounds”前面的“this”......项目大小是太大了，我找不到错误 =)

编辑：尝试使用单独的容器，用于电影剪辑，并在根类中完成所有这些......一切正常，当我使用单独的容器并将所有内容附加到 charakter 类时，它又搞砸了

OLD：嘿，我现在正在制作游戏，我想获得角色身体的界限。为了了解我是如何设置整个事情的，我解释了等级制度。

我的 Flash 文档的类是“game.as”。“game.as”添加了 Charakter 类的子项，我的 Charakterclass 对每个身体部位都有一个影片剪辑，例如“头部”每个身体部位都有一个包含身体部位图片的影片剪辑，在本例中为“头部”。

当我现在尝试在“head”类中使用 getBounds(head.mc) 时，我得到了非常奇怪的结果。通常 x=64001, y=64001, width = 0, height = 0;

我找到了一种方法来解决这个问题，方法是简单地使用 getBounds(head.mc) 函数而不是在头部内部，而是在 Charakter 类内部......但这不是我真正想要做的，我想使用头类中的 getBounds(head.mc) 函数。

任何想法为什么结果如此奇怪或我必须做什么？我非常感谢每一个意见，因为这对我来说似乎不合逻辑xD

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:13:25.290

`getBounds()`不准确。请阅读以下帖子以了解该问题。

**getBounds“错误”结果**（[*来源*](http://timetoflash.blogspot.kr/2012/01/getbounds-wrong-results.html)）

> 当获取对象相对于它的 OWN 坐标系的边界时，这些值将不会被缩放。

**getBounds() 返回不正确的高度**（[*Source*](https://www.mochimedia.com/community/forum/topic/as3-getbounds-returning-incorrect-height)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T14:17:15.297

从 head_mc 内部，尝试`getBounds(this.parent);`（您可能想先测试看看父级是否存在） - 这应该给你 head_mc 的边界，因为它的容器看到它，我认为这是你想要的，但是从 head_mc 内部调用，如你要求。

不过，bitmapdata 是对的 - getBounds() 有时会给出一些奇怪的结果。在我看来，您在将 head_mc 添加到舞台之前可能会问这个问题，因此会获得未定义的宽度/高度/x/y 值。

# lejos-nxj - nxj中的蓝牙通信

> ID：12089249
> 
> 赞同：0
> 
> 时间：2012-08-23T10:02:56.637
> 
> 标签：lejos-nxj

我是nxj初学者。我对 PC 和砖头之间的蓝牙通信有一些疑问。首先，当蓝牙通信发生时，发源地在哪里处理这些数据？换句话说，我想知道这些数据是在 CPU 上处理还是在砖上处理。其次，CPU和brick在蓝牙通信中的确切作用是什么？这意味着什么在 CPU 上处理，什么在砖块上处理。我几乎搜索了网站，但在任何地方都找不到。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:28:13.707

lejos.pc.comm 提供 API，允许您从 PC 通信/控制 nxt 机器人。

将库导入 Android 项目时，它允许您构建在 pc 上使用的相同环境的实例，但在 android.xml 中。

我同意很难找到一些东西。如果在 SO 上有更强大的 lejos 存在，那就太好了

这个问题已有数月之久，仍未得到解答，实际上我自己对此也有很多疑问，但是我也许可以为完全的新手提供一些见解。

在 Android 和 NXJ 机器人上使用蓝牙时，您可以使用 lejos.pc.comm 或 lejos.NXJ。

两者都提供 API 来做几乎相同的事情，但工作方式略有不同。我对 NXJ api 知之甚少，但我确实知道它可以让您更有效地操纵机器人，例如将数据输出到它的 LCD 屏幕，这是您无法使用 PC 完成的。通讯接口

据我所知，pc.comm API 使用 Android 蓝牙 API 和它自己的协议来允许与 Lego LCP 命令进行通信。

（我想回到这个，但我正在写一篇关于这个主题的论文，所以我会在几天内尝试更新它。不过似乎没有多少人感兴趣，可惜）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:08:08.533

您可以在包结构中看到它。

*   **lejos.nxt.***
    *   这个包包含在 NXT-brick 上运行的类。这个包中的所有代码都将针对积木编译并在积木上运行。
*   **lejos.pc.***
    *   这里的区别不是那么明显。这是您为个人计算机编译的 java 代码。因此，大多数代码都在您的计算机上运行。但是有些类（例如：RemoteMotorController）只向 NXT-brick 发送消息，NXT-brick 向电机发出命令。

# node.js - 服务器上的 Node.js 和 Backbone.js 路由器

> ID：12089252
> 
> 赞同：2
> 
> 时间：2012-08-23T10:03:11.087
> 
> 标签：node.js, backbone.js

有人在 node.js 服务器中使用骨干路由器吗？也许一些允许这样做的扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:06:28.487

我们有，但我们才刚刚开始。Airbnb 似乎也接受了它 [http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product](http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product)

# python - 将 Python 代码分发为 Mac/Windows/Linux 的可执行文件

> ID：12089254
> 
> 赞同：1
> 
> 时间：2012-08-23T10:03:22.267
> 
> 标签：python, windows, linux, macos, executable

我正在开发一个有趣的工具，我觉得它很有价值，最终可能想要开源它。但是，在我决定之前，我想让它保持“关闭”。

问题是我想用 Python 对其进行编码，这本质上意味着交付代码。我知道我可以将 Python 代码转换为二进制文件，但我想要在 Windows / Linux / Mac 上工作的东西

有人可以指点我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:18:40.057

好吧，Python 是一种脚本语言，因此不太可能创建真正的 .exe 文件。
但是，您可能希望将代码编译为 .pyc，然后分发您的应用程序。运行 .pyc 与常规 python 文件相同：

```
$ python code.pyc 
```

compileall - [http://docs.python.org/library/compileall.html#module-compileall](http://docs.python.org/library/compileall.html#module-compileall)
典型用法：

```
python -m compileall ./ 
```

我不确定反编译问题，但我认为这是可能的。Java .class 文件也可以被反编译。

# sql - 如何将文本执行计划保存在临时表中

> ID：12089255
> 
> 赞同：1
> 
> 时间：2012-08-23T10:03:28.133
> 
> 标签：sql, sql-server

我想将文本执行计划保存在一个临时表中，以便我可以对性能进行一些分析。请告诉我该怎么做。

我打算通过一个过程找出所有的性能问题。使用 MS-SQL Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:14:58.757

您可能希望使用[SQL Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)，它为您提供将跟踪信息存储到表中并在以后分析它们的选项。

顺便说一句，您需要对数据库具有 ALTER TRACE 权限才能运行探查器。

# wpf - 有没有办法在故事板中使用设置器而不是动画？

> ID：12089256
> 
> 赞同：4
> 
> 时间：2012-08-23T10:03:39.357
> 
> 标签：wpf, xaml, storyboard, setter

动画很好，但有时我只想立即更改属性的值，而不需要任何动画。显然，这样做的唯一方法是使用 a `<Something>AnimationUsingKeyFrames`：

```
<Storyboard>
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="txtStatus" Storyboard.TargetProperty="Foreground">
        <DiscreteObjectKeyFrame KeyTime="0">
            <DiscreteObjectKeyFrame.Value>
                <SolidColorBrush Color="Red" />
            </DiscreteObjectKeyFrame.Value>
        </DiscreteObjectKeyFrame>
    </ObjectAnimationUsingKeyFrames>
</Storyboard> 
```

语法是一团糟... 7 行代码只是为了将属性设置为不同的值？！

有没有更简单的方法？

我希望能够做这样的事情：

```
<Storyboard>
    <Setter TargetName="txtStatus" Property="Foreground" Value="Red" />
</Storyboard> 
```

（我知道这段代码是无效的，这只是为了举例说明我想要什么）

* * *

编辑：只是为了说清楚：我知道`Triggers`and `DataTriggers`，但它们不是我需要的，因为它们只能用于样式和控件模板中。我正在使用`VisualStateManager`in a `UserControl`，所以我被迫使用 a `Storyboard`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:52:27.193

如果您正在设置的属性类型存在非关键帧动画（并且有一大堆非关键帧动画类型），则可以使用持续时间为 0 的动画。这具有在 xaml 的一行中充当二传手。例如：

```
<Storyboard>
    <ColorAnimation Storyboard.TargetName="txtStatus" Storyboard.TargetProperty="Foreground" Value="Red" Duration="0" />
</Storyboard> 
```

这是因为动画的默认 FillBehavior 是 HoldEnd。

这与出现“Setter”一词并不完全相同——浏览 xaml 需要一些解释才能意识到动画具有瞬时设置的效果。此外，故事板结束时该值将恢复，但这确实符合立即更改值的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:18:20.457

您必须设置触发器（您可能已经必须调用情节提要。而不是用设置器填充它们`BeginStoryboard`和`Storyboard`项目。

```
<Trigger Property="<SomeProperty>" Value="<SomeValue>">
   <Setter TargetName="txtStatus" Property="Foreground" Value="Red" />
</Trigger> 
```

# ruby - 在 Ruby 中合并两个集合以简化代码

> ID：12089260
> 
> 赞同：2
> 
> 时间：2012-08-23T10:03:57.090
> 
> 标签：ruby

这是Ruby中的代码。我只是想简化它。你有什么想法？

```
def foo
   points = some_collection.map { |item| {:key1 => item.key1, :key2 => item.key2, :key3 => item.key3, :key4=> item.key4} }

   some_collection2.each do |item2|
    points << {:key1 => item2.key1, :key2 => item2.key2, :key3 => item2.key3, :key4=> item2.key4}
   end

   points
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:24:35.243

我会将两个集合的转换结果存储到两个数组中，然后将它们加在一起。

```
def foo
   a1 = some_collection.map do |item| 
     {:key1 => item.method1, :key2 => item.method2, :key3 => item.key4, :key5=> item.key5}
   end
   a2 = some_collection2.map do |item|
    {:key1 => item.method1, :key2 => item.method2, :key3 => item.key4, :key5=> item.key5}
   end

   a1 + a2
end 
```

或者，如果你愿意，它甚至可以变成这个

```
def foo
   some_collection.map do |item| 
     {:key1 => item.method1, :key2 => item.method2, :key3 => item.key4, :key5=> item.key5}
   end + some_collection2.map do |item2|
    {:key1 => item.method1, :key2 => item.method2, :key3 => item.key4, :key5=> item.key5}
   end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:32:45.500

如果我理解正确，在您的情况下，两个集合的映射功能是相同的。

```
points = (some_collection + some_collection2).map do |item|
  {:key1 => item.method1, :key2 => item.method2, :key3 => item.key4, :key5=> item.key5}
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T12:49:43.847

您甚至可以在单独的数组中提取键列表，因此您将拥有：

```
keys = [:key1, :key2, :key3, :key4]

points = (some_collection + some_collection2).map do |item|
  Hash[keys.map{|key| [key, item.send(key)]}]
end 
```

# javascript - for 循环与 if 条件

> ID：12089261
> 
> 赞同：2
> 
> 时间：2012-08-23T10:04:02.913
> 
> 标签：javascript, optimization, loops, if-statement

我有两种选择来执行一段代码。该代码基本上重置了三个数组中的所有值。其中两个是 int 数组，一个是布尔值。

**选择 1**

```
for (i = 0; i < array1.length; i++)
    array1[i] = 0;

for (i = 0; i < array2.length; i++)
    array2[i] = 0;

for (i = 0; i < array3.length; i++)
    array3[i] = false; 
```

**选择 2**

```
int limit = <assign the greatest of the array lengths>

for (i = 0; i < limit; i++)
{
    if (i < array1.length)
        array1[i] = 0;

    if (i < array2.length)
        array2[i] = 0;

    if (i < array3.length)
        array3[i] = false;
} 
```

其中哪一个会更快？鉴于数组可以具有不同的长度并且彼此之间没有关系。

[这里](https://stackoverflow.com/questions/1295584/most-efficient-way-to-create-a-zero-filled-javascript-array)有一个很好的讨论。首先列出的答案很好地解释了数组在 javascript 中的实际含义。有兴趣的可以去看看！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T10:07:20.337

这个版本几乎肯定会更快。它也*更容易阅读*和*更短，*这两个属性都比速度更重要（99% 以上的时间）。

```
for (i = 0; i < array1.length; i++)
    array1[i] = 0;

for (i = 0; i < array2.length; i++)
    array2[i] = 0;

for (i = 0; i < array3.length; i++)
    array3[i] = false; 
```

通常，访问内存中与您最近访问的数据接近的数据会更快。

此版本也不会受到您在第二个版本中获得的额外分支的影响。

一个足够先进的编译器会将第二个版本转换为第一个版本。

**基准测试：**如果不先分析整个程序，微基准测试 100% 无用。由于我认为性能测量没有用，因此我不提供它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:10:04.830

```
function reset_array(array, value) {
  var len = array.length;
  array.length = 0;
  while (len--) array.push(value);
}

reset_array(array1, 0);
reset_array(array2, 0);
reset_array(array3, false); 
```

# radio-button - 获取选定的单选按钮标签？

> ID：12089265
> 
> 赞同：0
> 
> 时间：2012-08-23T10:04:20.697
> 
> 标签：radio-button, label

我有一组单选按钮，我正在从该组中选择一个，如下所示：

```
var selectedRadio= Form.getInputs('my_form','radio','options[22]').find(function(radio) { 
        return radio.checked; 
    }); 
```

现在每个单选按钮都有一个标签，我想为这个选定的单选按钮获取一个标签。例如，单选按钮具有 id="options_22_2" ，标签如下所示：

```
<label id="options_22_2label" for="options_22_2">
    labels text
</label> 
```

所以我想要的是*标签 text*。有机会拿到那个标签吗？也许使用ID或其他东西？可以使用原型。

谢谢！

**已解决：**我现在获取所选收音机的 id，然后使用此 id 获取标签的 innerHTML。

# cakephp - 一次保存多个 hasMany

> ID：12089266
> 
> 赞同：1
> 
> 时间：2012-08-23T10:04:21.723
> 
> 标签：cakephp, many-to-many, has-many-through

我在 2 个模型之间存在多对多关系，`Invoice`并`Position`使用 hasMany through 方法定义，如[Cookbook](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany-through-the-join-model "食谱")中所述。

现在，当我创建发票时，我想在一次操作中将多个职位保存到该发票`save()`。像这样的东西：

```
$data = array(
  'Invoice' => array(
    // invoice stuff 
  ),
  'InvoicesPosition' => array(
    [0] => array(
      // additional meta information
      'Position' => array(
        // position stuff
        // ...
      ),
    ),
    [1] => array(
      // ...
      'Position' => array(
        // position stuff
        // ...
      ),
    ),
    // and so on
  ),
);  

$this->Invoice->saveAll($data, array('deep' => true)); 
```

结果应该是一张新发票，其中有 2 个职位链接（这意味着发票表中有 1 条新记录，职位表中有 2 条新记录，连接表中有 2 条新记录）。

Cake的内置方法可以吗？还是我必须覆盖该`saveAll()`模型的 - 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:48:49.177

`'deep' => true`在 saveAll() 方法中使用选项。

```
$this->Invoice->saveAll($data, array('deep' => true)); 
```

# c# - 提取 Zip 文件保存到磁盘

> ID：12089268
> 
> 赞同：0
> 
> 时间：2012-08-23T10:04:24.537
> 
> 标签：c#, zip

我有一个 URI 上的 zip 文件（例如[http://www.abc.com/a.zip](http://www.abc.com/a.zip)），我想打开它并将文件从它保存到磁盘。在 C# 中有没有办法打开它而不将其保存到磁盘然后将文件从它保存到磁盘？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:08:58.447

使用[ZipFile .Net Framework 4.5](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfile%28v=vs.110%29.aspx)类或[DotNetZip](http://dotnetzip.codeplex.com/) API。

```
ZipFile.ExtractToDirectory(zipPath, extractPath); 
```

编辑：您可以通过类的方法准备一个流或获取 URL 的字节数组`WebClient`。

```
string urlStr = "https://xyz.com/sample.zip";

 using (WebClient client = new WebClient())
  {
   byte []bytes=client.DownloadData(urlStr);
   using (MemoryStream ms = new MemoryStream(bytes))
   {
    using (ZipFile zip = ZipFile.Read(ms))
    {
     zip.ExtractAll(@"C:\csnet");
    }
   }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T10:44:58.980

使用[DotNetZip](http://dotnetzip.codeplex.com/)提取 zip 文件而不将存档保存到文件系统的示例。

```
private static void ExtractFromUrl(Uri uri, string directoryPath)
{
    using (var webClient = new WebClient())
    {
        var data = webClient.DownloadData(uri);
        using (var memoryStream = new MemoryStream(data))
        using (var zipFile = ZipFile.Read(memoryStream))
        {
            zipFile.ExtractAll(directoryPath);
        }                
    }
} 
```

# java - 从禁用的 JTextField 获取文本

> ID：12089270
> 
> 赞同：1
> 
> 时间：2012-08-23T10:04:32.990
> 
> 标签：java, swing, jtextfield

我一直在使用函数 getText() 来读取 MyJTextField 中的用户输入，直到我注意到禁用的 JTextField 看起来不可能。

```
JTextField jtx = new JTextField();
jtx.setText("TEST");
jtx.setEnabled(false);
String str = jtx.getText();
System.out.println(str); 
```

这不会返回任何东西，我开始认为这是因为禁用了 JTextField。有没有办法从禁用的 JTextField 获取文本，或者我应该：

```
jtx.setEditable(false); 
```

我不想这样做。我希望禁用该字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:10:48.263

下面的代码按预期工作（打印 TEST 是否启用或禁用文本字段） - 您是否在 EDT 中运行您的代码？

```
public static void main(String[] args) throws InterruptedException {
    Runnable r = new Runnable() {
        @Override
        public void run() {
            JTextField jtx = new JTextField();
            jtx.setText("TEST");
            System.out.println("Before: " + jtx.getText());
            jtx.setEnabled(false);
            System.out.println("After: " + jtx.getText());
        }
    };
    SwingUtilities.invokeLater(r);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:08:21.477

您绝对可以`JTextField`使用您指定的代码从残疾人那里获取文本。在其他地方搜索问题。

# testing - 拦截和修改进出 tomcat 的流量

> ID：12089281
> 
> 赞同：0
> 
> 时间：2012-08-23T10:04:56.743
> 
> 标签：testing, tomcat, networking

我在本地主机上的 tomcat 上部署了一个应用程序。我想拦截和修改应用程序发出的请求和它收到的响应。有没有工具可以做到这一点？我已经尝试过**Burp**，但我只能使用它拦截进出 Firefox 浏览器的流量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:22:53.970

您可以尝试使用[OWASP Zed Attack Proxy](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)。

它将能够拦截来自不支持代理（Firefox、IE、Chrome、Opera ...）的浏览器的任何请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:42:12.040

如前所述， `Vikdor`Servlet[过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)应该可以解决问题。你需要修改运行在tomcat上的每个应用程序的web.xml，并在java中编写你的过滤器代码作为过滤器。

如果你想做一个简单的任务，比如重定向一个 url 或添加一个标题，你可以使用[UrlRewriteFilter](http://tuckey.org/urlrewrite/)，对于更复杂/自定义的任务，你应该编写自己的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:10:46.463

我认为您正在谈论拦截对 servlet 的请求和响应（并放置在 FilterChain 中）的[Servlet 过滤器。](http://www.oracle.com/technetwork/java/filters-137243.html)

# google-app-engine - 从 Ubuntu 的 Google app-spot 上部署的 Google App Engine 应用程序获取日志

> ID：12089292
> 
> 赞同：0
> 
> 时间：2012-08-23T10:05:39.223
> 
> 标签：google-app-engine, logging, ubuntu, terminal

如何通过 Ubuntu 终端获取部署在 Google app-spot 上的应用程序的日志。我已经尝试了 shell 脚本中的命令：

$./appcfg.sh request_logs mylogs.txt

但它说不好的论点。我在 app-spot 上部署的应用程序的应用程序 ID 是“vikastest111”。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:35:43.633

where is appcfg.sh coming from ? Its not part of the google_appengine distribution.

The standard usage for appcfg.py is `Usage: appcfg.py [options] request_logs <directory> <output_file>`

where directory is where you app.yaml is located .

To get specific help for a command do

`python ~/google_appengine/appcfg.py request_logs --help`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:26:32.920

尝试：

```
$./appcfg.sh request_logs /path/to/your/appengine/project mylogs.txt 
```

# css - CSS 3 渐变在 ie 8 中不起作用

> ID：12089293
> 
> 赞同：0
> 
> 时间：2012-08-23T10:05:41.193
> 
> 标签：css, css3pie

我有一个 CSS3`gradient`按钮，除了 IE8 之外，它在任何地方都可以使用。

我正在为 IE8 使用[CSS3 Pie](http://css3pie.com/)。

在此处查看搜索按钮：[http ://whygo.net/](http://whygo.net/)

我在控制台上看到一个错误：

```
PIE.htc, line 94 character 103 
```

这是：

```
var a=window.PIE 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T21:43:28.307

如果你使用这个工具，它可以在 IE8 中运行没问题： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# c++ - 数字的 QODBC 错误值

> ID：12089303
> 
> 赞同：1
> 
> 时间：2012-08-23T10:06:22.270
> 
> 标签：c++, sql-server, database, qt, odbc

我尝试从 Microsoft SQLServer 数据库中选择 numeric(20,0) 值。因此，我通过 ODBC 连接到 Microsoft SQL Server。我使用 SQLServer Native Client 10.0 驱动程序。

我在 QT 项目中连接和选择数据的方式如下：

```
db = QSqlDatabase::addDatabase("QODBC", "DBConnection");
db.open();

query.exec("SELECT * FROM TABLE")
while (query.next()) {
   //Do something with query.value(0)
} 
```

现在的问题是，当我查看`QVariant`返回的类型时，`query.value()`我发现它是双精度的。但是双精度值仅适用于大约 16 位而不适用于 20。例如，在选择中，值应该是 10903012224000000001 但我得到 10903012224000000000。

有没有办法告诉 QT 它应该返回哪种类型的值？一个确切的字符串值就足够了。

该方法`query.value(0).toXXX`不起作用，因为它似乎以 double 值开始转换。

关于主题：我确定问题出在`QT`. 当我在 Java 应用程序中使用相同的 ODBC-Driver 时，我得到了正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:15:19.173

嗨，我发现了一个错误报告[https://bugreports.qt-project.org/browse/QTBUG-10451](https://bugreports.qt-project.org/browse/QTBUG-10451)

解决方案是将 numericPrecisionPolicy 从 LowPrecisionDouble 设置为 HighPrecision 以下代码行是添加，然后 qVariant 是 qString 并且一切正常

```
db.setNumericalPrecisionPolicy(QSql::HighPrecision); 
```

# c - ncurses中奇怪的扩展字符

> ID：12089306
> 
> 赞同：1
> 
> 时间：2012-08-23T10:06:41.537
> 
> 标签：c, terminal, character, ncurses

我正在编写一个 ncurses 应用程序，但如何将特殊字符打印到屏幕上存在一个奇怪的问题。这是一个例子：

```
#include <ncurses.h>

int main(int argc, char *argv[])
{
  initscr();
  noecho();
  keypad(stdscr, TRUE);
  cbreak();
  curs_set(0);

  addch(ACS_LARROW);
  addch(' ');
  addch(ACS_UARROW);
  addch(' ');
  addch(ACS_DARROW);
  addch(' ');
  addch(ACS_RARROW);
  addch(' ');

  refresh();

  getch();

  endwin();

  return 0;
} 
```

因此，当我在 tty 上运行它时，字符会正确打印为箭头（←、↑、↓、→），但是当我尝试在终端上运行它时（我在 gnome-terminal 和 LXTerminal 上尝试过）这个是输出：

```
< ^ v > 
```

这种差异有什么原因吗？我认为这可能与字体有关，但我真的不在我的领域，我的谷歌搜索没有帮助。

关于如何强制 lxterminal（或任何其他终端）输出与 tty 相同的字符的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:02:41.507

ncurses 根据您的术语类型决定为 ACS_LARROW 和朋友输出哪个字符。在 tty 中，您的 termtype 可能设置为“linux”，而在 gnome-terminal 等中，它很可能设置为“xterm”。虽然我不确定，但很可能 xterm 术语类型不支持这些字符。

您可以尝试这样运行您的应用程序：

```
env TERM=linux ./a.out 
```

其他可以尝试的术语类型是 gnome、rxvt 和 vt102。这些将输出扩展的 ASCII 字符，您的终端仿真器应该支持它们。如果您安装了 rxvt-unicode，您也可以尝试它，它应该为这些特殊符号输出正确的 unicode 代码点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:23:12.980

终端仿真有时以 7 位 ASCII 编码，并且此代码页中的箭头（带有线和楔形）没有对应的值，因此终端显示接近的内容（即：仅楔形）。在 tty 上，您拥有计算机的所有功能（UTF-8，颜色编码，...），因此终端可以绘制箭头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-02T00:40:50.780

的设置在`TERM`很大程度上无关紧要。重要的是

*   语言环境
*   图书馆的选择
*   特定的终端仿真器

这样做的通常原因是程序是内置并链接到**ncurses**库而不是**ncursesw**：

*   如果您在使用 UTF-8 的语言环境中使用前者（**ncurses**），ncurses 将使用[ASCII 图形](http://invisible-island.net/ncurses/man/curs_addch.3x.html#h3-Line-Graphics)，因为它无法绘制 UTF-8。 **ncursesw**可以使用[UTF-8 字符](http://invisible-island.net/ncurses/man/curs_add_wch.3x.html#h3-Line-Graphics)进行绘制。
*   使用**ncursesw**，程序将根据需要使用 UTF-8（自[2002](http://invisible-island.net/ncurses/NEWS.html#t20020629)以来，它可以使用 terminfo 信息或内置的 Unicode 值表）。Linux 控制台`screen`是已知的特殊情况，其中 terminfo 无法描述终端的行为。对于其他（在 UTF-8 模式下不支持 VT100 画线的终端），您将设置[`NCURSES_NO_UTF8_ACS`](http://invisible-island.net/ncurses/man/ncurses.3x.html#h3-NCURSES_NO_UTF8_ACS).
*   实际上，终端数据库确实具有解决 VT100 与 UTF-8 兼容性不足的扩展功能（请参阅终端数据库中的[`U8`注释](http://invisible-island.net/ncurses/terminfo.src.html#toc-_X_T_E_R_M__Extensions_)）。但是，大多数人将 TERM 设置为`xterm`或`linux`经常等同于*它们*（参见[xterm FAQ](http://invisible-island.net/xterm/xterm.faq.html#other_versions)中的注释）。

# postgresql - postgresql中的连续查询

> ID：12089310
> 
> 赞同：2
> 
> 时间：2012-08-23T10:06:55.843
> 
> 标签：postgresql, streaming, continuous

我在 Postgresql 中有一个持续更新的时空数据库。我想知道这个数据库中是否有一种连续查询的技术？例如，我有特定区域的数据库中每分钟更新一次的温度数据。我想执行聚合查询以显示每小时的温度（聚合值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:11:33.377

不，您不能持续更新查询，但您可以接收有关重要事件的通知并重新发出查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-07T14:09:33.537

有像 PipelineDB 这样的插件可以帮助你

# iphone - initWithFrame:reuseIdentifier 已弃用且 initWithStyle:reuseIdentifier 不起作用

> ID：12089311
> 
> 赞同：1
> 
> 时间：2012-08-23T10:06:55.687
> 
> 标签：iphone, objective-c, ios, uitableview

> **可能重复：**
> [UITableViewCell 不使用不推荐使用的方法 initWithFrame:reuseIdentifier](https://stackoverflow.com/questions/2815121/uitableviewcell-without-using-deprecated-method-initwithframereuseidentifier)

我的项目有一个自`UITableViewCell`定义高度的自定义，以前我们使用过`initWithFrame:reuseIdentifier`，但该功能已被弃用，所以我使用`initWithStyle:reuseIdentifier:`但现在没有单元格可见。

我用作`UITableViewCellStyleDefault`单元格样式。

# python - 在 greenlet 中运行 logger.info 会增加线程数

> ID：12089323
> 
> 赞同：0
> 
> 时间：2012-08-23T10:07:59.680
> 
> 标签：python, logging, gevent

使用以下代码，如果我取消注释`log_it`，则`threading.active_count`达到 11。因为这意味着每个记录器都会创建`_DummyThread daemons.Now`

Q1.他们有什么方法可以在不创建额外线程的情况下达到同样的效果吗？

Q2.为什么记录器需要创建另一个线程。为什么它不能以同样的方式执行，比如`fun`函数？

```
from gevent import monkey
monkey.patch_all()

import threading
import gc
import gevent
import logging

def print_stats():
    while True:
        gc.collect()
        print threading.active_count() 
        gevent.sleep(2)

jobs = [gevent.spawn(print_stats)]
logger = logging.getLogger(__name__)
ch = logging.StreamHandler()
ch.setLevel(logging.DEBUG)
logger.setLevel(logging.INFO)
form = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
ch.setFormatter(form)
logger.addHandler(ch)

def log_it():
    string = 'abcdefghijklmnopqrstuvwxyz'
    logger.info(string)

def fun():
    print "hello world"

def block_for_some_time():
    log_it()
    fun()
    gevent.sleep(5)
    print 'exiting thread'

for i in range(10):
    jobs.append(gevent.spawn(block_for_some_time))

gevent.joinall(jobs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:35:15.987

如果您将路径更改为此：

```
from gevent import monkey
monkey.patch_all(thread=False) 
```

`threading.active_count()`将一直打印 1。原因在于修补线程模块，它为您提供有关“greenlets”的信息，而不是真正的线程。

# javascript - 从按钮解析值以通过 javascript 输入。（toogle 弹出窗口）

> ID：12089326
> 
> 赞同：0
> 
> 时间：2012-08-23T10:08:10.693
> 
> 标签：javascript, popup

别介意问题解决了！非常感谢您的帮助！

我有以下问题：

我做了一个弹出 div 部分，它实际上是一个图像管理器启动器，事情是我想要当一个人点击图像时，图像的路径转到输入字段。

但是因为里面有很多不同的相册，所以我使用 Javascript 中的函数 .load() 来自动更改菜单项。

例子

```
function changeDiv(link)
    {           
        if(link == 'album_cover'){          
            $('#images').load('image_manager.php?path=Album_cover'); 
        }
        if(link == 'background'){           
            $('#images').load('image_manager.php?path=Background'); 
        }
             .
             .more ifs
             .
} 
```

我在帖子新闻区（链接：post_new.php），image_manager.php 用于显示每个专辑的图像。我从 javascript 获取路径，然后显示正确的图片。

我正在使用此功能弹出窗口：

```
function toggleImageLauncher(x) {
        if ($('#'+x).is(":hidden")) {
            $('#'+x).fadeIn(200);
        } else {
            $('#'+x).fadeOut(200);
        }
} 
```

还有一些CSS。

我现在的问题是：在 image_manager.php 中，每一张图片都在文件夹和我的数据库中的表中。

我在 image_manager.php 的 echo 中的代码是：

```
<div style="width:100px; height:100px;">

<input type="image"src="../media/siteAlbum_thumbs/'.$image['folder_name'].'/'.$image['title'].'"
onclick="javascript:document.getElementById(\'banner_image_link\').value='.$image['path'].'>

</div> 
```

这是在从数据库中获取每个图像的信息的 foreach 中。$image 是一个包含图像所有信息的数组。

在 post_new.php 现在我有输入：

```
Banner Image :
<input name="banner_image_link" type="text" size="50" maxlength="32" 
value="">

<input name="banner_image" type="button" value="Browse..." 
onClick="javascript:toggleImageLauncher('image_manager');"> 
```

在其下方，我有弹出窗口中出现的专辑菜单：

```
<div style="float:left;">
                <ul>
                    <li><a id="album" onclick="changeDiv('album_cover')">Album Cover</a></li>
                    <li><a id="back" onclick="changeDiv('background')">Background</a></li>
                    ... more <li></li>
                </div> 
```

之后，我有了调用 image_manager.php 并显示所有图片的图像 div：

```
 <div id="images">

    </div> 
```

当我将图像单击到名称为：banner_image_link 的输入时，我无法解析图像路径的值。

有关更多信息，请随时问我。

谢谢你的时间，我很抱歉我的大内容！

亲切的问候，

科斯坦丁诺斯·西亚特利斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:10:13.073

我不确定我是否理解正确..您单击图像，然后您想读取该图像的 src 属性并将该值复制到另一个输入字段中？

尝试这个。

```
$('#imageID').live('click', function(){
   var src = $( this ).attr('src');
   $('#inputID').attr('value', src);
}) 
```

# ruby - 上帝（红宝石进程管理器）不断重启我的进程

> ID：12089328
> 
> 赞同：3
> 
> 时间：2012-08-23T10:08:17.670
> 
> 标签：ruby, god

这可能是一个相当新手的修复，所以提前道歉。

我有一个简单的过程，我想用上帝来控制。这个阶段的过程基本上是刚刚好`loop do; sleep 1; end`。配置文件是最低限度的：

```
God.watch do |w|
  w.name = "punter"
  w.start = "bundle exec rails runner ./script/fetcher_daemon.rb"
  w.keepalive
end 
```

该过程不断开始，pid文件不断重置。就像上帝可以开始一切正常然后不承认该过程正在运行并重新启动它。请参阅下面的日志文件：

我可以从命令行运行`bundle exec rails runner ./script/fetcher_daemon.rb`并且运行良好。

我的设置是 Mint Linux，我使用 rvm。

```
I [2012-08-23 19:33:42]  INFO: Loading ./script/punter.god
I [2012-08-23 19:33:42]  INFO: Syslog enabled.
I [2012-08-23 19:33:42]  INFO: Using pid file directory: /home/matt/.god/pids
I [2012-08-23 19:33:42]  INFO: Started on drbunix:///tmp/god.17165.sock
I [2012-08-23 19:33:42]  INFO: punter move 'unmonitored' to 'up'
D [2012-08-23 19:33:42] DEBUG: driver schedule #<God::Conditions::ProcessRunning:0x917d7d0> in 0 seconds
I [2012-08-23 19:33:42]  INFO: punter moved 'unmonitored' to 'up'
I [2012-08-23 19:33:42]  INFO: punter [trigger] process is not running (ProcessRunning)
D [2012-08-23 19:33:42] DEBUG: punter ProcessRunning [true] {true=>:start}
I [2012-08-23 19:33:42]  INFO: punter move 'up' to 'start'
I [2012-08-23 19:33:42]  INFO: punter start: bundle exec rails runner ./script/fetcher_daemon.rb
D [2012-08-23 19:33:42] DEBUG: driver schedule #<God::Conditions::ProcessRunning:0x917d7d0> in 0 seconds
I [2012-08-23 19:33:42]  INFO: punter moved 'up' to 'up'
I [2012-08-23 19:33:42]  INFO: punter [ok] process is running (ProcessRunning)
D [2012-08-23 19:33:42] DEBUG: punter ProcessRunning [false] {true=>:start}
D [2012-08-23 19:33:42] DEBUG: driver schedule #<God::Conditions::ProcessRunning:0x917d7d0> in 5 seconds
I [2012-08-23 19:33:47]  INFO: punter [trigger] process is not running (ProcessRunning)
D [2012-08-23 19:33:47] DEBUG: punter ProcessRunning [true] {true=>:start}
I [2012-08-23 19:33:47]  INFO: punter move 'up' to 'start'
I [2012-08-23 19:33:47]  INFO: punter start: bundle exec rails runner ./script/fetcher_daemon.rb
D [2012-08-23 19:33:48] DEBUG: driver schedule #<God::Conditions::ProcessRunning:0x917d7d0> in 0 seconds
I [2012-08-23 19:33:48]  INFO: punter moved 'up' to 'up'
I [2012-08-23 19:33:48]  INFO: punter [ok] process is running (ProcessRunning)
D [2012-08-23 19:33:48] DEBUG: punter ProcessRunning [false] {true=>:start}
D [2012-08-23 19:33:48] DEBUG: driver schedule #<God::Conditions::ProcessRunning:0x917d7d0> in 5 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:30:47.843

您需要在 God 文件中使用绝对路径。所以这里

```
God.watch do |w|
  w.name = "punter"
  w.start = "bundle exec rails runner /home/matt/code/punter/script/fetcher_daemon.rb" # <- abs path
  w.keepalive
end 
```

# android - 无法在 webView 中播放视频

> ID：12089329
> 
> 赞同：1
> 
> 时间：2012-08-23T10:08:20.657
> 
> 标签：android, html, video

在网页中，我尝试打开以下 html 并且它可以工作。如您所见，它包含一个视频列表。当我在浏览器中打开这些视频时，所有这些视频都能完美运行，但我无法从我的设备打开它们。`Practically they don't play!!!!` 这是我的网页......每个项目都是一个视频链接...... [![这是我的形象](../Images/5433b52577cce1f982a52c2ef5c9e476.png)](https://i.stack.imgur.com/xvlyn.png)

在我点击其中一个项目后，我来到这里，这是视频......但它只是不播放。

**重要**即使我点击视频也无法播放，无论我做什么......它就是无法播放。 [![这是我的形象](../Images/ca2f5b87197816e5869d0cbb07ec8b80.png)](https://i.stack.imgur.com/8DlFY.png)

这是我的代码：

```
 public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        // ToDo add your GUI initialization code here
        setContentView(R.layout.second);
        WebView myWebView = (WebView) findViewById(R.id.webview);
        myWebView.setWebViewClient(new HelloWebViewClient());
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setAllowFileAccess(true);
        myWebView.getSettings().setPluginsEnabled(true);
        myWebView.loadUrl("Here is set the link");
    }

private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if (Uri.parse(url).getHost().equals("Here is set the link")) {
            // This is my web site, so do not override; let my WebView load the page
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            intent.setDataAndType(Uri.parse(url), "video/*");
            view.getContext().startActivity(intent);

        return true;
        }

        else{

            return super.shouldOverrideUrlLoading(view, url);
        }
   }
} 
```

**重要**视频在浏览器内工作。任何人都可以给我一个解决方案以播放我的视频吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:12:52.620

考虑使用 a`WebChromeClient`代替。

```
private class HelloWebViewClient extends WebChromeClient {
    //Code here
} 
```

# android - Android 4.0.3 切换回车键和软键盘上的搜索键

> ID：12089337
> 
> 赞同：1
> 
> 时间：2012-08-23T10:08:45.887
> 
> 标签：android

我试图让这个工作：在我的 EditText 中的 XML 中，我有：

```
 android:imeActionLabel="Search"
    android:imeOptions="actionSearch" 
```

但它不起作用。在代码中

```
 search.setImeOptions(EditorInfo.IME_ACTION_SEARCH); 
```

也不行。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:41:51.520

试试这个

在你的 xml 文件中

```
<EditText
            android:id="@+id/rechercheTextView"
            android:layout_width="174dp"
            android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:imeOptions="actionSearch"
            android:inputType="text"
             /> 
```

在您的活动中

```
EditText rechTxt = (EditText) findViewById(R.id.rechercheTextView);
rechTxt.setOnEditorActionListener(new OnEditorActionListener() {

    public boolean onEditorAction(TextView v, int actionId,
                        KeyEvent event) {
    if (actionId == EditorInfo.IME_ACTION_SEARCH) {

        Toast.makeText(getApplicationContext(),"search",Toast.LENGTH_LONG).show();
        return true;
                    }
                    return false;
                }
            }); 
```

# oracle - Hibernate 2.1.7 可以与 Oracle Database 11gR2 一起使用吗？

> ID：12089338
> 
> 赞同：2
> 
> 时间：2012-08-23T10:08:47.027
> 
> 标签：oracle, hibernate, oracle11g, weblogic11g, oracle11gr2

一个快速而简单的问题：有人使用过 Hibernate 2.1.7 和 Oracle 11gR2 数据库的组合吗？我们有一个使用 Hibernate 2.1.7 的旧版应用程序（我们目前不打算更新），并且我们的数据库后端正在升级到 Oracle 11gR2。有什么我们需要注意的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:50:03.807

使用 jdbc 驱动程序 11.1.0.6.0，您可以连接到 Oracle 11gR2。没问题。您可能会遇到的一个简单问题是用户名和密码。在 11g 中这是区分大小写的，在该版本之前它不区分大小写。

另一个不错的是帐户现在默认过期。请与您当地的 dba 核实。

您应该在升级测试期间测试应用程序。数据库功能发生变化，优化器功能发生变化，因此应用程序的行为可能会发生变化。从技术上讲，我看不出它为什么不起作用但知道一些软件项目的原因......测试它。在许多情况下，它根本不会带来任何问题。很大程度上取决于代码的质量。如果您的应用程序的代码可以正常工作，因为它基于 Oracle 中的一个现已解决的错误，那么您将遇到问题。

# iphone - 如何将 UIImageView 随机放置在 X 和 Y 轴上但使用线性模式？

> ID：12089344
> 
> 赞同：2
> 
> 时间：2012-08-23T10:09:13.790
> 
> 标签：iphone, objective-c, ios, random, uiimageview

我已经达到了快照中显示的图像。

但它的 Y 仍然只在底部，我无法正确设置 X 重叠。

Y 处的图像可以上下，但不能具有与前一个图像相同的 Y。![我在这里](../Images/52095462d260a484b086c811b1ab5e13.png) X 处的图像必须与前一个重叠，但任何图像之间不能有距离。

我可以设置 Y 但它仍然应该在屏幕中间而不是在底部并且无法设置 X。

这是我正在使用的代码

```
 CGFloat randomX = (arc4random()%100) *1.1;
    CGFloat randomY = (arc4random()%100) *.40;

    UICollectionViewLayoutAttributes* attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:path];

    NSLog(@"prevnode : %@",NSStringFromCGPoint(prevNodeCenter));

    attributes.size = CGSizeMake(ITEM_SIZE, ITEM_SIZE);
    attributes.center = CGPointMake(_center.x + _radius + randomX * cosf(2 * path.item * M_PI / _cellCount) ,
                                    _center.y  + _radius + randomY);

    NSLog(@"randomX : %f randomY : %f",randomX,randomY);
    NSLog(@"attrib center x : %f",attributes.center.x);

    /*
    if(attributes.center.x <= prevNodeCenter.x )
    {
        attributes.center = CGPointMake(prevNodeCenter.x+_radius+cosf(2 * path.item * M_PI / _cellCount), attributes.center.y);
    }
    if(attributes.center.x >= prevNodeCenter.x+_radius)
    {
        NSLog(@"its far");
    }
    */

     /*
    if(attributes.center.y > self.collectionView.frame.size.height)
    {
        attributes.center = CGPointMake(attributes.center.x, self.collectionView.frame.size.height/2);
    }*/

    prevNodeCenter = attributes.center;
    return attributes; 
```

# sql-server - 通过绑定源数据库连接sql连接错误

> ID：12089347
> 
> 赞同：0
> 
> 时间：2012-08-23T10:09:23.103
> 
> 标签：sql-server, vb.net, data-binding, database-connection

这是我的连接代码：

```
Imports System.Data.SqlClient
Public Class frm_edit_patient
    Dim con As New SqlConnection
    Private Sub frm_edit_patient_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
        frm_dashboard.Enabled = True
        Me.Hide()
    End Sub
    Private Sub frm_edit_patient_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the 'Database1DataSet1.patients' table. You can move, or remove it, as needed.
        Me.PatientsTableAdapter.Fill(Me.Database1DataSet1.patients)
        frm_dashboard.Enabled = False
        Try
            Dim myConString As String = My.Settings.Database1ConnectionString
            con.ConnectionString = myConString
            con.Open()
            con.Close()
            MessageBox.Show("connected")
        Catch ex As Exception
            MessageBox.Show(ex.ToString)
        End Try
    End Sub

    Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        frm_dashboard.Enabled = True
        Me.Hide()
    End Sub
End Class 
```

但这给了我错误：

![在此处输入图像描述](../Images/06e31c12f1ac32cf3b0c653f770e0b25.png)

我正在使用绑定源进行数据库连接....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:42:22.017

Database.sdf 是 Sql Compact 数据库文件，而不是 Sql Server 目录名称。

你不需要[`SqlCeConnection`](http://msdn.microsoft.com/en-us/library/system.data.sqlserverce.sqlceconnection%28v=VS.80%29.aspx)使用`SqlConnection`

因此，您需要声明

```
Dim con As New SqlCeConnection 
```

还请记住，您需要对程序集 System.Data.SqlServerCe 的引用
（在 System.Data.SqlServerCe.dll 中）

# php - Gzip 还是 ob_flush()？哪个更好？

> ID：12089348
> 
> 赞同：3
> 
> 时间：2012-08-23T10:09:28.277
> 
> 标签：php, compression, gzip

我刚看完[这篇文章](http://developer.yahoo.com/performance/rules.html#flush)

> *   通过在服务器上启用 gzip 压缩来改进网页的加载时间。
> *   通过刷新网页中的内容可以获得更好的用户体验。

但问题是当启用 gzip(apache) 压缩时，flush() 无法工作。

1.  有什么解决办法吗？（即，flush() 和 gzip 可以同时工作吗？）
2.  如果没有，flush() 还是 gzip？哪个更好？
3.  或者有任何替代策略来减少加载时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:18:10.480

1.  它们不能一起使用。

2.  如果页面的总服务器渲染时间很长（比如超过 250 毫秒左右），请进行刷新（直到您修复了脚本）。否则坚持使用正确的 gzip。

3.  您发布的链接上已经有完整的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:46:54.547

They absolutely can be used together. There were early versions of mod_deflate where it would not stream the compression and support chunked encoding but that is no longer the case (just watch out for the size of the deflate buffers) - [http://www.phpied.com/progressive-rendering-via-multiple-flushes/](http://www.phpied.com/progressive-rendering-via-multiple-flushes/)

# ruby-on-rails - RoR - 嵌套对象/关联的 en.yml 文件验证消息

> ID：12089352
> 
> 赞同：0
> 
> 时间：2012-08-23T10:09:52.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, associations, yaml

en.yml 中的关联验证消息存在问题。

这是我看到的消息：
**Name infos prev first name can't be blank**

我想更改两件事：
1.“名称信息”是关联模型的名称，我不希望它出现
2.“prev first name”应该改为“Previous First Name”

我一直在谷歌搜索、搜索和尝试不同的东西。从我所看到的，下面的“应该”工作，但它不是（我什至重新启动了应用程序）。

```
**contact_info.rb:** 
class ContactInfo < ActiveRecord::Base
  has_many :name_infos
  accepts_nested_attributes_for :name_infos, :allow_destroy => true
end

**name_info.rb:**
class NameInfo < ActiveRecord::Base
  belongs_to :contact_info

      validates :prev_first_name, :presence => true, 
                   :if => :name_subcat_is_first_name?

      private

      def name_subcat_is_first_name?
        subcat == 'first'
      end

end

**routes.rb:**    
    resources :users do
       resources :contact_infos do
         collection do
           get 'get_full_fields'
           get 'clear_fields'
         end
       resources :name_infos
    end
  end

**en.yml:**    
en:
  activerecord:
    attributes:
      contact_info:
        name_infos:
          prev_first_name: "Previous First Name" 
```

每当我在控制台中测试它时，它都不会改变：

```
irb(main):050:0> ContactInfo.human_attribute_name("prev_first_name")
=> "Prev first name"
irb(main):051:0> NameInfo.human_attribute_name("prev_first_name")
=> "Prev first name" 
```

我试过了：

```
**en.yml:**

en:
  activerecord:
    attributes:
      users:
         contact_info:
           name_infos:
             prev_first_name: "Previous First Name" 
```

但这并没有什么不同。

任何人都可以阐明这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T13:16:26.303

我相信格式是这样的（因为`prev_first_name`是 NameInfo 模型的一个属性）：

```
en:
  activerecord:
    attributes:
      name_info:
        prev_first_name: "Previous First Name" 
```

请注意，型号名称 ( `name_info`) 是单数，而不是复数。

# sql - Vertica 角色授予不起作用

> ID：12089354
> 
> 赞同：1
> 
> 时间：2012-08-23T10:09:55.953
> 
> 标签：sql, vertica

我正在尝试设置一个新角色，以便更轻松地授予访问权限。我想知道是否有一种更简单的方法可以将模式下的所有表（新创建的表应该可以自动访问）上的选择提供给选定的用户。我针对相同的问题进行了以下查询。但是我的用户仍然无法访问特定的表。

```
CREATE ROLE myrole;

GRANT SELECT ON myschema.mytable TO myrole;

GRANT usage ON schema myschema TO myrole;

CREATE USER mytest1 identified BY '***';

GRANT myrole TO mytest1; 
```

之后，当我使用 mytest1 用户登录并尝试在 myschema.mytable 上运行 select 时，它要求我将架构的使用权限授予用户。在我直接将架构的使用权限授予用户后，该表的权限被拒绝而失败。

请帮忙。我在 vertica 5.0 上运行

**更新：** 我发现您还必须将该角色设为默认角色或明确将该角色设置为用户会话的默认角色，以使角色生效。

```
ALTER USER mytest1 DEFAULT ROLE myrole; 
```

但是，我的另一个问题仍然存在，即如何使特定用户可以访问模式下的所有表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:48:55.403

根据 Vertica **SQL Reference Manual.pdf**（第 725 页）（文档版本 5.0 - 用于页码）

> ```
> GRANT (Schema)
> ...
> USAGE
> Allows the user  access to the objects contained  within the 
> schema. This allows the user to look up objects within the 
> schema. Note that the user must also be granted access to the
> individual objects. See the GRANT TABLE (page 727) ... . 
> ```

`the user must also be granted access to the individual objects`意味着你也`GRANT table`需要。

我使用的两个是`GRANT SELECT`，`GRANT REFERENCES`它允许用户在查询中运行查询和连接（引用）表。

例子：

```
GRANT SELECT ON TABLE [schema].[Table1] TO myUser;
GRANT SELECT ON TABLE [schema].[Table2] TO myUser;
GRANT REFERENCES ON TABLE [schema].[Table1] TO myUser;
GRANT REFERENCES ON TABLE [schema].[Table2] TO myUser;
... 
```

6.0 文档参考`GRANT SCHEMA`（第 808 页）和`GRANT TABLE`（第 813 页）。

# flash - actionscript 3 翻转效果破坏我的点击

> ID：12089356
> 
> 赞同：0
> 
> 时间：2012-08-23T10:10:02.090
> 
> 标签：flash, actionscript, onclick, rollover

我正在尝试使用 flash/as3 制作一组导航按钮。我使它在单击时文本在几个框架内变大，并且每个按钮在滚动时具有多个框架的效果。但是，由于我添加了翻转效果，我的点击不再起作用。我似乎无法在网上找到任何关于我的确切问题的资源。有任何想法吗？

顺便说一句，我是 actionscript 的新手，但我的代码是一组简单的事件点击，然后是 gotoAndPlay("blah")/stop 的一些翻转，在框架标签层和动作层上分开，所有按钮都在一层（在关键帧等范围内）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:27:55.957

如果你想“强制”动画完成播放，你总是可以设置一个变量来阻止它：

```
var playing:Boolean = false;

function myClickFunction(e) {
    if(!playing) {
        e.currentTarget.play();
        playing = true;
    }
}

// and in the last frame of the animation, you would do:
playing = false; 
```

但是，这个“正在播放”的变量将计入所有按钮，因此请谨慎使用，因为它会阻止所有按钮。至于阻止点击事件的翻转事件，你能发布一些代码吗？

另一种方法是检查目标当前是否在您希望它能够播放的那些帧中。就像`if(e.currentTarget.currentFrame == 0)`而不是`if(!playing)`，如果您希望它仅在当前位于第 0 帧时才允许播放。

# delphi - 为参数化查询的参数赋值时出现赋值错误

> ID：12089359
> 
> 赞同：5
> 
> 时间：2012-08-23T10:10:10.087
> 
> 标签：delphi, parameters, delphi-xe2, advantage-database-server, anydac

我将 Delphi XE2 与 AnyDac Components 和 Advantage Database 10 一起使用。在我的代码中，我使用如下参数化查询：

```
q.SQL.Text := 'SELECT * FROM Table1 ' +
  'LEFT JOIN Table2 ON (Table1.ID = Table1 .ID_Table2) ' +
  'WHERE ' +
  ':0 BETWEEN Table1.StartAm AND Table1.EndeAm ' +
  'AND Table2 = :1';
q.Params[0].Value := AStartDateTime;
q.Params[1].Value := AIDRessourcenGruppe;
q.Open; 
```

这最终导致异常：

> 异常 der Klasse EADSNativeException mit der Meldung '[AnyDAC][Phys][ADS] 错误 7200：AQE 错误：状态 = 22018；
> 本机错误 = 2112; [iAnywhere 解决方案][Adv​​antage SQL 引擎]分配错误'aufgetreten。

当然 AStartDateTime 是一个有效的 delphi TDateTime 值，AIDRessourcenGruppe 是一个整数值。

有趣的是，这两种变体有效：

```
q.SQL.Text := 'SELECT * FROM Table1 ' +
  'LEFT JOIN Table2 ON (Table1.ID = Table1 .ID_Table2) ' +
  'WHERE ' +
  ':0 BETWEEN Table1.StartAm AND Table1.EndeAm ' +
  'AND Table2 = :1';
q.Params[0].AsDateTime:= AStartDateTime;
q.Params[1].AsInteger:= AIDRessourcenGruppe;
q.Open; 
```

-

```
q.SQL.Text := 'SELECT * FROM Table1 ' +
  'LEFT JOIN Table2 ON (Table1.ID = Table1 .ID_Table2) ' +
  'WHERE ' +
  ':SomeDate BETWEEN Table1.StartAm AND Table1.EndeAm ' +
  'AND Table2 = :ID_PT_Ressourcengruppe';
q.ParamByName('SomeDate').Value := AStartDateTime;
q.ParamByName('ID_PT_Ressourcengruppe').Value := AIDRessourcenGruppe;
q.Open; 
```

我错过了什么吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:21:03.030

***答案 - 只是一个猜测：***

我会说对参数属性的索引写访问`Value`不能确定参数的数据类型，而命名访问却可以。如果这是正确的，那么您就有麻烦了，因为您通过`Variant`type 传递所有值，在执行查询之前必须将其转换为正确的值格式。但这一切只是我的猜测——我根本不知道 AnyDAC！

***AsType 值访问：***

我发布这个只是因为我不喜欢`Value`访问被称为专业的参数:-)
最好使用`AsType`类型转换，至少因为：

*   它更快，因为您直接说出要传递给某个参数的类型，因此查询参数引擎不需要确定这一点，并且与`Value`访问相比，它不需要转换`Variant`类型

*   它对你来说更安全，因为你不能将字符串值传递给`AsDateTime`访问的参数，所以你有一个额外的保护来防止参数不匹配

我在您的示例中推荐的是使用索引访问参数，而不是常用的命名，它需要在访问之前搜索参数列表并且速度较慢。

# gwt - GWT 获取构建日期

> ID：12089360
> 
> 赞同：1
> 
> 时间：2012-08-23T10:10:19.343
> 
> 标签：gwt, date, compiler-construction

当我在 GWT 中编译我的 web 应用程序时，我希望编译设置日期/时间或更新我的应用程序中的内部版本号，但我不知道如何。有没有办法在编译时运行代码？或者是否可以让我的编译器在正确的位置（通过 project.xml）填写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:15:23.953

您可以在调用 GWT 编译器之前修改您的源代码（使用 Maven 和资源过滤相对容易，或者使用 Ant，可能还有任何类型的构建脚本），或者可能为此编写一个 GWT 生成器。

请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#generators](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#generators)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T01:17:19.383

您可以只获取文档的最后修改日期，该日期应该是构建日期：

```
public static native String getDocumentLastModifiedDate() 
/*-{ 
      return document.lastModified; 
}-*/; 
```

# ruby-on-rails - 如何运行 github 中的 rails 示例代码？

> ID：12089361
> 
> 赞同：-1
> 
> 时间：2012-08-23T10:10:20.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试运行[https://github.com/binarylogic/authlogic_example.git](https://github.com/binarylogic/authlogic_example.git)中的代码，但无法执行。我之前尝试过一些例子，结果非常好。我不能这样做。没有 gemfile，可能缺少一些东西。有人告诉我如何执行这个特定的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:15:53.613

该仓库的最后一次提交是 3 年，所以我怀疑它是否与 bundle 和 Rails 3 兼容。我建议您尝试[设计](https://github.com/plataformatec/devise)身份验证而不是 os authlogic，就像 Rails3 一样，它是事实上的身份验证 gem。示例应用程序：[https ://github.com/plataformatec/devise/wiki/Example-Applications](https://github.com/plataformatec/devise/wiki/Example-Applications)

# c# - c++ dll 使用 dllimport c#

> ID：12089362
> 
> 赞同：0
> 
> 时间：2012-08-23T10:10:23.407
> 
> 标签：c#, c++, dll, dllimport

我有一个我想在 .net 中使用的 dll。我正在尝试使用 dllimport，但出现错误。我已将 dll 放在 windows system32 文件夹以及 exe 的存储位置。我得到的在 vb 中工作的函数定义是。

```
 declare function LocalToWGS84 lib "TTDatum3.Dll"(Lat As Double, Lon As Double, ByVal Datum As Long) As Long 
```

方法信号

```
 #ifdef __cplusplus
extern "C" {
#endif

int __stdcall WGS84ToLocal(double * lat, double * longt, int d); 
```

C＃

```
 class Program
{

    [DllImport("TTDatum3.Dll", EntryPoint="LocalToWGS84")]
    public static extern long LocalToWGS84([In,Out]double lat, [In,Out]double lon,[In,Out]long datum);

    public static void Main(string[] args)
    {
        Console.WriteLine(LocalToWGS84(50.82011492,-0.117981131, 150));

    }
} 
```

错误是：

> 未处理的异常：System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:33:06.073

VB6 中的长！= c#.net 中的长

将 Long 更改为 int

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:39:12.023

嗯，在不知道方法签名的情况下，你在黑暗中刺了一下 eh，寻找支持 delphi 的反射器/反编译器工具，你可以尝试其中一些来获取方法签名；DeDe 似乎是生意（不确定帖子的年龄）[Delphi Decompilers](http://delphi.about.com/od/devutilities/a/decompiling_3.htm)

您可以尝试 MarshalAs 属性，但您可以再次尝试很多。在不知道方法签名的情况下，它非常受欢迎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T14:49:48.500

由于 lat 和 lon 参数在 C 定义中被定义为指向 int ( `int*`) 的指针，因此您需要将参数标记为`ref`. 并且返回值和基准参数应该是一个`int`很好的：

```
 [DllImport("TTDatum3.Dll", EntryPoint="LocalToWGS84")]
 public static extern int LocalToWGS84([In,Out]ref double lat, [In,Out]ref double lon,[In,Out]int datum); 
```

# asp.net - 回传的良好编程实践

> ID：12089364
> 
> 赞同：0
> 
> 时间：2012-08-23T10:10:26.787
> 
> 标签：asp.net

asp.net 的新手在这里。我正在构建一个报告工具并尝试在一个页面上处理逻辑，以便报告 A 是一个 aspx 页面，依此类推。

因此，许多控件/查询实际上不需要在第一次访问页面时执行，其中只需要日期、列等参数作为输入。

我想在单击按钮或回发时，无论是图表还是网格视图形式的这些控件都会生成。回到过去，当我做一些 ASP 编程时，我会将所有控件、代码放在 if 块中，看看它是否是回发。在 ASP.net 中有更有效的方法吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:16:41.767

*假设 ASP.NET WebForms：*

如果您需要在单击按钮时运行代码，则应将代码添加到按钮的单击事件处理程序中。

```
<asp:button id="btn" runat="server" text="Submit" onclick="btn_Click" />

protected void btn_Click(object sender, eventargs e){
   //code here
} 
```

# python - scrapy：如何测试每个请求之间的延迟

> ID：12089365
> 
> 赞同：1
> 
> 时间：2012-08-23T10:10:26.270
> 
> 标签：python, scrapy

我在每个请求之间设置了延迟，想看看效果。但似乎什么也没发生。我设置

```
DOWNLOAD_DELAY=5

CONCURRENT_REQUESTS=1

CONCURRNT_REQUESTS_PER_IP=1

RANDOM_DOWNLOAD_DELY=False 
```

我想如果它有效，我会看到每个请求之间有 5 秒的延迟。但它没有发生。

以下代码片段是蜘蛛：

```
class Useragent(BaseSpider):

    name = 'useragent'

    settings.overrides['DOWNLOAD_DELAY'] = 5
    settings.overrides['CONCURRENT_REQUESTS'] = 1
    settings.overrides['CONCURRENT_REQUESTS_PER_DOMAIN'] = 1
    settings.overrides['RANDOM_DOWNLOAD_DELAY'] = False

    fn_useragents = "utils/useragents.txt"
    fp_useragents = open(fn_useragents, 'rb')
    total_lines = len(fp_useragents.readlines())
    fp_useragents.close()

    if not os.path.isdir("data"):
        os.mkdir("data")
    fn_log = "data/log.txt"
    fp_log = open(fn_log, "ab+")

    def start_requests(self):
        urls = [
            'http://www.dangdang.com',
            'http://www.360buy.com',
            'http://www.amazon.com.cn',
            'http://www.taobao.com'
            ]

        for url in urls:
            ua = linecache.getline(Useragent.fn_useragents, randint(1, Useragent.total_lines)).strip()
            url_headers = {'User-Agent': ua}
            yield Request(url, callback=self.parse_origin, headers=url_headers)

    def parse_origin(self, response):
        current_url = response.url
        headers = response.request.headers

        data_log = current_url
        for k, v in headers.items():
            header = "%s\t%s" % (k, v)
            data_log = "\n".join((data_log, header))
        Useragent.fp_log.write("%s\n" % data_log) 
```

**更新**

我又写了一个蜘蛛看看设置DOWNLOAD_DELAY的效果，下面是代码：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.conf import settings
import sys, os, time

reload(sys)
sys.setdefaultencoding('utf-8')

class TestCrawl(CrawlSpider):

    name = 'crawldelay'
    start_urls = [
        'http://www.dangdang.com',
        ]

    rules = (
        Rule(SgmlLinkExtractor(allow=('.+'),), callback="parse_origin"),
        )

    def __init__(self):
        CrawlSpider.__init__(self)
        if not os.path.isdir("data"):
            os.mkdir("data")
        self.fn_log = "data/log.txt"
        self.fp_log = open(self.fn_log, 'ab+')

        settings.overrides['DOWNLOAD_DELAY'] = 60
        settings.overrides['RANDOM_DOWNLOAD_DELAY'] = False
        settings.overrides['CONCURRENT_REQUESTS'] = 1
        settings.overrides['CONCURRENT_REQUESTS_PER_IP'] = 1

    def parse_origin(self, response):
        current_url = response.url
        data_log = "%s\n%s\n\n" % (current_url, time.asctime())
        self.fp_log.write(data_log) 
```

以下是我用来查看设置DOWNLOAD_DELAY效果的部分日志文件：

```
http://living.dangdang.com/furniture
Mon Aug 27 10:49:50 2012

http://static.dangdang.com/topic/744/200778.shtml
Mon Aug 27 10:49:50 2012

http://survey.dangdang.com/html/2389.html
Mon Aug 27 10:49:50 2012

http://fashion.dangdang.com/watch
Mon Aug 27 10:49:50 2012

https://login.dangdang.com/signin.aspx?returnurl=http://customer.dangdang.com/wishlist/
Mon Aug 27 10:49:50 2012

http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001051000098
Mon Aug 27 10:49:51 2012

https://ss.cnnic.cn/verifyseal.dll?pa=2940051&sn=2010091900100002234
Mon Aug 27 10:49:51 2012 
```

但是 DOWNLOAD_DELAY 似乎没有明显的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T05:23:13.800

它是由`dnscache`（延迟）的执行引起的。
`CONCURRENT_REQUESTS_PER_IP`仅适用于第二个同域请求。
您可以重写 的`get()`方法`LocalCache`以使其返回固定值。
它导致scrapy看到对同一IP的每个请求。

* * *

```
from scrapy.utils.datatypes import LocalCache
LocalCache.get = lambda *args:'fake-dummy-domain' 
```

* * *

测试你的蜘蛛：

```
scrapy crawl crawldelay -s CONCURRENT_REQUESTS_PER_IP=1 -s DOWNLOAD_DELAY=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:42:31.767

您只能将属性分配和方法直接放在类主体中。如果要初始化目标代码，则需要覆盖`__init__()`：

```
class UseragentSpider(BaseSpider):

    name = 'useragent'
    fn_log = "data/log.txt"
    fn_useragents = "utils/useragents.txt"
    DOWNLOAD_DELAY = 5

    def __init__(self, name=None, **kwargs):
        settings.overrides['CONCURRENT_REQUESTS'] = 1
        settings.overrides['CONCURRENT_REQUESTS_PER_DOMAIN'] = 1
        settings.overrides['RANDOM_DOWNLOAD_DELAY'] = False

        fp_useragents = open(self.fn_useragents, 'rb')
        self.total_lines = len(fp_useragents.readlines())
        fp_useragents.close()

        if not os.path.isdir("data"):
            os.mkdir("data")
        self.fp_log = open(self.fn_log, "ab+")

        # remember to call BaseSpider __init__() since we're overriding it
        super(UseragentSpider, self).__init__(name, **kwargs)

    def start_requests(self):
        urls = ['http://www.dangdang.com',
                'http://www.360buy.com',
                'http://www.amazon.com.cn',
                'http://www.taobao.com',
            ]

        for url in urls:
            ua = linecache.getline(self.fn_useragents, randint(1, self.total_lines)).strip()
            url_headers = {'User-Agent': ua}
            yield Request(url, callback=self.parse_origin, headers=url_headers)

    def parse_origin(self, response):
        headers = response.request.headers
        data_log = response.url

        for k, v in headers.items():
            header = "%s\t%s" % (k, v)
            data_log = "\n".join((data_log, header))

        self.fp_log.write("%s\n" % data_log) 
```

# xml - 使用 Perl SOAP::Parser 模块解析 SOAP XML 数据。无法使用 CPAN 安装模块

> ID：12089366
> 
> 赞同：-2
> 
> 时间：2012-08-23T10:10:32.213
> 
> 标签：xml, perl, soap

现在我有紧急工作来解析 SOAP XML 数据。

我选择`SOAP::Parser`了最好的模块，然后我尝试使用 CPAN 安装它，但它给出了类似`don't know what is this`.

如果不可能，您能否提供 SOAP XML 解析器模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:24:43.480

你拼错了模块吗？CPAN 需要正确的大小写和正确数量的冒号。

也尝试只安装`SOAP`包含模块

# f# - 使用 F# 从头开始 构建数据表

> ID：12089371
> 
> 赞同：0
> 
> 时间：2012-08-23T10:10:46.170
> 
> 标签：f#

是否可以使用 F# 从头开始​​构建 DataTable 对象

我写了这段代码

```
module DataHelper
open System
open System.Data
open System.Data.SqlClient

let addDataRow (dt : DataTable) kerberos =
    let dr = dt.NewRow()
    dr["Kerberos"] = kerberos
    dt.Rows.Add(dr)

let Func userList : string seq = 
    let dt : DataTable = new DataTable("UserNameListType")
    let dc : DataColumn = new DataColumn("Kerberos")
    dt.Columns.Add(dc)
    Seq.iter (fun user -> addDataRow dt user) userList
    dt 
```

但这有太多错误

1.  VS.NET 似乎不理解 DataTable、DataRow 类，只向我显示一个“注释”作为智能感知。
2.  在 F# 中很难使用集合对象 Rows、Columns，因为这些方法都没有真正起作用（在 C# 中很容易工作）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:54:25.650

如果您在新项目中执行此操作，则需要添加对`System.Data.dll`和的引用`System.Xml.dll`。之后，Visual Studio 应该可以识别这些类型。您可以通过右键单击项目中的“参考”并选择“添加参考”来做到这一点。

除此之外，您的代码中还有两个小错误。赋值应该写成（注意前面有一个点`[`，运算符是`<-`代替`=`）：

```
dr.["Kerberos"] <- kerberos 
```

你的`Func`函数应该返回`DataTable`：

```
let Func userList : DataTable = 
```

# jquery - jQuery / IIS7 / Classic ASP - “HTTP 错误 405.0 - 方法不允许”

> ID：12089377
> 
> 赞同：2
> 
> 时间：2012-08-23T10:11:08.813
> 
> 标签：jquery, iis-7, jquery-post

我在使用经典 ASP 的 Windows 7 Home Premium (IIS7) 上（请不要问）。使用 jQuery 发布一些数据

```
$.ajax({ 
   url: "widgets/post.html",
   type: "POST",
   data:nhs,
   dataType: "json",
   success: function(data) {
      $('#result').html( data );
   }
}); 
```

独立，在我打开 HTML 页面的地方，它可以工作。但是，当我在本地主机上运行它时，我得到了错误（在 Firebug 的帮助下）

> HTTP 错误 405.0 - 方法不允许
> 
> 您正在查找的页面无法显示，因为正在使用无效的方法（HTTP 动词）。

任何帮助将不胜感激

提前致谢，

JJ

# javascript - Ember.js ArrayController 使用

> ID：12089379
> 
> 赞同：3
> 
> 时间：2012-08-23T10:11:25.250
> 
> 标签：javascript, ember.js

如何在 Ember.js 1.0pre 中使用 ArrayController？

从文档：

```
MyApp.listController = Ember.ArrayController.create(); 
```

提出这个：

```
TypeError: a[c].create is not a function 
```

如果我替换`create`为`extend`，它会上升：

```
TypeError: b.addArrayObserver is not a function 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:38:42.503

请确保您也添加了 jquery 1.7.x。Ember 依赖于它。

# c++ - 使用命名空间撤销？

> ID：12089386
> 
> 赞同：0
> 
> 时间：2012-08-23T10:11:43.737
> 
> 标签：c++, namespaces, variable-declaration

以下代码不合法​​：

```
// .cpp file

{
  using namespace X;
  char text[] = {someENUMinX, someOtherENUMinX, ... };
} 
```

{} 块在以这种方式使用时会出错。如何做到这一点？即有能力为变量声明的某些部分使用整个命名空间。

换句话说：是否可以**使用命名空间**撤销？我在每个命名空间中有 40 个成员，并且想在定义变量时切换到它们。

**PS.：我很抱歉多次编辑。如果问题有问题，可以删除该问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:17:05.910

> 这很方便，因为在 .cpp 中，我可以在定义 var 时使用命名空间 X - X::someXcall() - 然后可以在全局命名空间中访问 var，

这是错误的。它在全局命名空间中不可访问。该`extern`行不是`X::text`. 什么`extern char text[];`是声明一个`text`在全局命名空间中命名的不同变量。

更重要的是，为什么在全局命名空间中有它是可取的？为什么有人想要使用命名空间，却一有机会就破坏了他们的全部目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:15:53.637

您的程序有 2 个**不同的**对象，名为`text`.

`extern char text[]`在 .h 文件中声明的文件位于全局命名空间中。`char text[]`是不是和中的一样`namespace X`。

# jboss - JBoss AS 7 的部署内容在哪里

> ID：12089387
> 
> 赞同：7
> 
> 时间：2012-08-23T10:11:56.397
> 
> 标签：jboss

我是 JBoss AS 7 的新手。我尝试在 JBoss AS 7 上部署我的 war 文件，这似乎工作正常。我的问题是在哪里可以看到部署的内容。

我希望它像 Tomcat，它应该有一个已探索的战争文件夹，用于保存已部署的内容。JBoss AS 7 有这样的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T10:21:34.683

它应该在**JBOSS_HOME/standalone/deployments** [看到那里](https://docs.jboss.org/author/display/AS7/Getting+Started+Developing+Applications+Guide)

如果您将战争文件名部署为“示例”，那么您可以将此文件 domain/configuration/domain.xml 视为

```
 [...]
<deployments>
   <deployment name="sample.war"
               runtime-name="sample.war">
       <content sha1="dda9881fa7811b22f1424b4c5acccb13c71202bd"/>
   </deployment>
</deployments>
[...]
<server-groups>
   <server-group name="main-server-group" profile="default">
       [...]
       <deployments>
           <deployment name="sample.war" runtime-name="sample.war"/>
       </deployments>
   </server-group>
</server-groups>
[...] 
```

ls 域/内容/

```
 |---/47
  |-----95cc29338b5049e238941231b36b3946952991
  |---/dd
  |-----a9881fa7811b22f1424b4c5acccb13c71202bd 
```

这也适用于独立/内容。

请注意，在上面提到的standalone.xml 文件中，sample.war 文件有一个散列。哈希是定位 WAR 文件的关键。但是，您不会通过在“内容”目录中搜索“sample.war”来找到它。哈希的前 2 个字符是父目录。其余的是包含 WAR 文件的目录。但是 WAR 文件已重命名为“内容”

```
 |---/47
  |-----95cc29338b5049e238941231b36b3946952991
  |---/dd
  |-----a9881fa7811b22f1424b4c5acccb13c71202bd
  |-------content   <-- this is really sample.war file.  JBoss renames it. (go figure!) 
```

执行 jar -xvf 内容，您将看到 sample.war 的所有类、web.xml 等文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T04:16:47.170

另一种部署方式：`maven-jboss-as-plugin`.

你只需运行

```
mvn deploy 
```

它会部署你的战争。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T13:46:48.480

您可以在此处找到已部署的 jar：$JBOSS_HOME/standalone/tmp/vfs/deployment/

# xcode - 告诉 Xcode 不要在项目中使用自动布局

> ID：12089389
> 
> 赞同：2
> 
> 时间：2012-08-23T10:12:07.410
> 
> 标签：xcode, cocoa, autolayout

我可以告诉 Xcode 4 我不在项目中使用自动布局吗？
目前，每个新创建的 xib 都会启用自动布局，这意味着我必须在创建后手动将其关闭，而我不希望这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:03:20.080

这是自动布局的问题。你不能在整个代码中设置它。你需要得到它，就像[GH 所做](http://www.goodbyehelicopter.com/2012/02/arggh-xcode-4-3-auto-layout-is-on-by-default-how-to-turn-off-auto-layout/)的那样。

现在它并不完美，但我建议您开始查看[文档](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-DontLinkElementID_2)。我还建议您观看[WWDC 2012 会议视频](https://developer.apple.com/videos/wwdc/2012/)，其中涵盖了这个非常棒的功能。

# mfc - CreateCompatibleBitmap 与 SelectObject

> ID：12089392
> 
> 赞同：0
> 
> 时间：2012-08-23T10:12:47.697
> 
> 标签：mfc, scale, cdc, cbitmap

我想知道，如果我想创建不同的位图，

我`CreateCompatibleBitmap`一次又一次地使用该函数，将其关联到同一个内存 CDC。

`CreateBitmap` 我一次又一次的意思是一样的`SelectObject`吗？？

我问这个问题是因为我想对另一个 CDC 新创建的位图做点什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:04:20.547

没有看到具体的代码很难知道确切的问题，但 CreateCompatibleBitmap 通常用于双缓冲情况以避免闪烁。不是直接绘制到设备上下文 (DC)，而是首先绘制到屏幕外或内存 DC，它基本上是绘制到位图。然后使用 BitBlt 将位图直接复制到屏幕 DC，因此看起来所有绘图都同时发生。

通常的步骤是这样的（并且可能会在每个 WM_PAINT 上发生）：

1.  使用屏幕 DC 创建一个与其“兼容”的位图，使用`CreateCompatibleBitmap`.
2.  创建内存 DC
3.  将位图选择到内存 DC 中（这就是您要绘制的内容）
4.  绘制完成后`BitBlt`，将内存 DC 的位图放到屏幕 DC 上。

此处提供更多信息：[Win32 内存 DC 指南（代码项目）](http://www.codeproject.com/Articles/224754/Guide-to-Win32-Memory-DC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T19:01:41.377

是的，每次循环调用 CreateCompatibleBitmap() 都会创建一个新的位图、一个新的内存分配、一个新的处理程序；

# android - Mobclix 广告未在 android 中显示

> ID：12089398
> 
> 赞同：3
> 
> 时间：2012-08-23T10:13:07.033
> 
> 标签：android, ads, mobclix

我阅读了官方[文档](http://support.mobclix.com/attachments/token/lvbgrqsfpjgvgxb/?name=Detailed%20Start%20Guide%20for%20Android.pdf)并尝试将 MobClix 广告集成到我的应用程序中，但我没有收到任何广告。

**AdMobActivity.java**

```
import com.mobclix.android.sdk.MobclixMMABannerXLAdView;

import android.app.Activity;
import android.os.Bundle;

public class MobclixDemo extends Activity {
    private MobclixMMABannerXLAdView adview_banner=null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        adview_banner = (MobclixMMABannerXLAdView) findViewById(R.id.banner_adview);        
        adview_banner.getAd();

    }
} 
```

我还在**XML**文件中添加了 MobClix adView

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <com.mobclix.android.sdk.MobclixMMABannerXLAdView
        android:id="@+id/banner_adview"
        android:layout_width="320dip"
        android:layout_height="50dip"
        android:layout_gravity="center" />

</LinearLayout> 
```

**并像这样在清单**文件中添加了所需的权限和 AD ID

```
<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mobclix.demo"
    android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:debuggable="true"
        android:hardwareAccelerated="true">
        <activity
            android:name=".MobclixDemo"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.mobclix.APPLICATION_ID"
            android:value="450F718E-99C3-4BA0-9BD1-D20B41425280" />
        <activity
            android:name="com.mobclix.android.sdk.MobclixBrowserActivity"
            android:theme="@android:style/Theme.Translucent.NoTitleBar"
            android:hardwareAccelerated="true" />

    </application>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

</manifest> 
```

我没有任何线索是我的代码中缺少某些内容还是广告 ID 的问题，因为我是从我的客户自己那里得到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:13:45.960

我在**@Anupam**回答的帮助下解决了我的问题，但是

*我们在客户端还做了一些更改（MobClix 帐户）*

我要在这里写。。

> 1.  我已确保所有可能的广告尺寸都关闭了测试模式。
> 2.  我还确保在列出的所有“正在运行的广告”按钮上单击“是”。
> 3.  此外，我选择注册在 Mobclix 系统中运行的每个单独的广告网络，其中一些需要几天时间才能获得批准，所以目前我们可能不会收到所有广告。

就是这样，我得到了像魅力一样的广告 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:48:43.943

您是否检查了您的 DDMS 是否存在 MobClix 广告请求失败或其他问题？而且，您是否在服务选项卡中注册了所有商家/广告提供商？

# sql - SQL CLR 地理类型

> ID：12089399
> 
> 赞同：4
> 
> 时间：2012-08-23T10:13:11.677
> 
> 标签：sql, sql-server, sql-server-2008, sqlclr

这可能完全不合时宜——但由于某种原因，我无法在 SQL CLR 函数 (VB.NET) 中声明 SqlGeography 类型的变量。以下声明 SqlGeography 未在第 3 行定义 - 很确定我需要导入一些东西 - 但找不到它。

哦，是的 - 使用 SSDT。

任何帮助表示赞赏。

```
Public Shared Sub usp_routing_dijkstra(node_1 As SqlGuid, node_2 As SqlGuid)

    Dim StartGeo As SqlGeography

    Using connection As New SqlConnection("context connection=true")
        connection.Open()

        Using command As New SqlCommand("select [geo] from [nodes] where [sys_id] = @id", connection)
            Dim param As New SqlParameter("@id", SqlDbType.UniqueIdentifier)
            param.Value = node_1
            command.Parameters.Add(param)
            Dim StartNode As Object
            StartNode = command.ExecuteScalar()
            If StartNode IsNot Nothing Then

            End If
        End Using

    End Using

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T12:10:24.447

尝试在您的项目中添加对 Microsoft.SqlServer.Types 的引用。在我的例子中，它位于 C:\Program Files (x86)\Microsoft SQL Server\110\SDK\Assemblies\Microsoft.SqlServer.Types.dll。

然后，确保在 .vb 文件的顶部有以下 Imports： Imports Microsoft.SqlServer Imports Microsoft.SqlServer.Types

之后，您应该能够声明 SqlGeography 类型的变量。

# android - 如何正确返回已启动活动的结果

> ID：12089402
> 
> 赞同：0
> 
> 时间：2012-08-23T10:13:31.183
> 
> 标签：android

我已经开始了另一个活动，我想将结果返回给调用它的活动，我已经阅读了一些教程并尝试了它，但是我遇到了一些这样的错误：

```
08-23 17:48:58.005: E/AndroidRuntime(581): java.lang.RuntimeException: Failure delivering result ResultInfo{who=Tab2, request=0, result=-1, data=Intent { cmp=com.organizer.medical.activities/.AddPatientActivity (has extras) }} to activity {com.organizer.medical.activities/com.organizer.medical.activities.Main}: java.lang.NullPointerException
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityThread.access$1100(ActivityThread.java:123)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.os.Looper.loop(Looper.java:137)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-23 17:48:58.005: E/AndroidRuntime(581):  at java.lang.reflect.Method.invokeNative(Native Method)
08-23 17:48:58.005: E/AndroidRuntime(581):  at java.lang.reflect.Method.invoke(Method.java:511)
08-23 17:48:58.005: E/AndroidRuntime(581):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-23 17:48:58.005: E/AndroidRuntime(581):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-23 17:48:58.005: E/AndroidRuntime(581):  at dalvik.system.NativeStart.main(Native Method)
08-23 17:48:58.005: E/AndroidRuntime(581): Caused by: java.lang.NullPointerException
08-23 17:48:58.005: E/AndroidRuntime(581):  at com.organizer.medical.activities.PatientActivity.onActivityResult(PatientActivity.java:347)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityGroup.dispatchActivityResult(ActivityGroup.java:122)
08-23 17:48:58.005: E/AndroidRuntime(581):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
08-23 17:48:58.005: E/AndroidRuntime(581):  ... 11 more 
```

这是我的调用活动代码：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
super.onActivityResult(requestCode, resultCode, data);
if (requestCode == 0) {
      if (resultCode == RESULT_OK) {
        int cat = Integer.parseInt(getIntent().getExtras().get("category").toString());
        loadList(cat);
       }
 }
} 
```

这是在我的通话活动中的 oncreate() 上：

```
startActivityForResult(new Intent(this, CalledActivity.class), ADD_PATIENT); 
```

这是我的“被调用”活动代码：

```
 setResult(RESULT_OK, getIntent().putExtra("category", status.isChecked()?1:2));
   finish(); 
```

顺便说一句，在我的被调用活动上，`setResult()`并且`finish()`只能`onClick`通过该被调用活动上的按钮完成......

我真的不知道如何正确使用`startActivityForResult()`. 请分享您对此的了解。

更新

* * *

事实证明，我在 onActivityResult() 上访问的意图导致了 null 异常错误，结果证明传递给该方法的“日期”变量就是这样使用的：

```
int cat = Integer.parseInt(**data**.getExtras().get("category").toString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:28:13.733

您好，此示例返回一个字符串，但对于示例，它会很好：

```
Intent intent = new Intent();
Bundle b = new Bundle();
b.putString("lastPath", this.myPath.getText().toString());
intent.putExtras(b);
setResult(SUCCESS_RETURN_CODE, intent);
finish(); 
```

要读取值，请使用：

```
Bundle b = data.getExtras();
lastPath = b.getString("lastPath"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:03:54.217

事实证明，我在 onActivityResult() 上访问的意图导致了 null 异常错误，结果证明传递给该方法的“日期”变量就是这样使用的：

int cat = Integer.parseInt( **data** .getExtras().get("category").toString());

# express - 我怎样才能在 Jade 中做到这一点？

> ID：12089403
> 
> 赞同：5
> 
> 时间：2012-08-23T10:13:32.557
> 
> 标签：express, pug

我试图在我的玉模板中翻译这个，但不能。有什么帮助吗？

```
<span class="riciclame_piccolo">
   ricicla
   <span class="rosa">
      .me
   </span>
</span>
<span class="footer_p"> 
   &nbsp&nbsp è un'idea di <a href="http://www.ottoquattro.com" target="_blank">OttoQuattro Web & Video Agency</a>
</span> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T10:20:36.423

像这样的东西...

```
span.riciclame_piccolo ricicla
    span.rosa .me
span.footer_p &nbsp&nbsp è un'idea di 
    a(href="http://www.ottoquattro.com", target="_blank") OttoQuattro Web & Video Agency​ 
```

# sql - SQL Server 中的触发器丢失

> ID：12089406
> 
> 赞同：2
> 
> 时间：2012-08-23T10:13:57.487
> 
> 标签：sql, sql-server, triggers, sql-server-2008-r2

我*失去了*一个触发器。我知道它是活动的，因为当我尝试更改字段时，它会恢复其值，并且从 SQL Server Management Studio 我可以看到，当我执行查询时，正在执行一个额外的查询（触发器）。

我试过`SELECT * FROM sys.triggers WHERE 1 = 1`了，但它没有返回任何东西。另外，我知道触发器的名称，但是当我尝试`ALTER`它时返回一个错误，说

> 对象“myTrigger”的名称无效。

如果我尝试`DROP TRIGGER myTrigger ON DATABASE`

> 无法删除触发器“myTrigger”，因为它不存在，或者用户没有足够的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:41:41.100

好的，正如 Lieven 所说，我没有查询正确的数据库......这很奇怪，因为查询已经定义了数据库

```
ALTER TRIGGER myTrigger
ON [DB].[dbo].[table] 
```

但是 SQL Server Management Studio 的上层选择指向其他数据库......

* * *

**编辑：** 我一直在调查（试图清理我的图像），我在 SQL Server Management Studio 上发现了一个奇怪的行为。如果您执行如下查询：

```
UPDATE [DB].[dbo].[table] SET column = 'value' WHERE column2 = 'foo' 
```

它在正确的数据库中执行查询。无论上层选择指向什么数据库。

**但是**，如果你尝试用触发器做同样的事情，你必须让上面的选择指向正确的 DB，否则你将面临同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T00:37:56.940

我有一个像你一样的微妙错误；我做了这样的事情：

```
CREATE TRIGGER [TrigCustomerInsertDelete] 

ON [mobile].[Customers] 

AFTER INSERT, DELETE   
AS  

    select 'I'  [ACTION],* from inserted
    select 'D'  [ACTION],* from deleted

GO 
```

然后尝试使用以下方法更新它：

更改触发器 [TrigCustomerInsertDelete]

并得到这个错误：无效的对象名称

问题是我没有在触发器上指定架构（认为它只是 dbo），但表确实有一个架构。因此，在触发器中包含架构后，我发现了错误。

创建触发器 [DBO].[TrigCustomerInsertDelete]

这给了我以下错误：无法创建触发器“DBO.TrigCustomerInsertDelete”，因为它的架构与目标表或视图的架构不同。

我知道这是一个旧帖子，但希望它可以帮助其他人。

# windows - 使用自定义协议打开 URL - 语法错误？

> ID：12089409
> 
> 赞同：4
> 
> 时间：2012-08-23T10:14:11.377
> 
> 标签：windows, iis-7, protocols

我在使用自定义协议通过浏览器打开本地文件时遇到了一些实际问题。现在，在您为自定义协议开枪之前，此 Web 应用程序将在封闭的 Intranet 环境中运行，因此我可以完全控制为所有用户添加这些协议。该应用程序目前运行良好，但我被要求绕过文件的打开/保存对话框，因为它“烦人”和“耗时”（是的，我知道......我试图告诉他们），所以在这里我在未知领域！

这是一个不起作用的示例（我在此示例中使用记事本在带有 IIS7 的 Server 2008 R2 中对其进行测试）：

使用关于[将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)的信息，我已将以下内容添加到注册表中：

```
HKEY_CLASSES_ROOT
 opentxt
      (Default) = "URL:opentxt Protocol"
      URL Protocol = ""
      DefaultIcon
           (Default) = "C:\Windows\System32\notepad.exe,1"
      shell
           open
                command
                     (Default) = "C:\Windows\System32\notepad.exe" "%1" 
```

所以现在，理论上，它应该像在我的 html 中包含以下链接一样简单

```
<a href="opentxt://localhost/openme.txt">Open File</a> 
```

它几乎可以工作 - 单击链接，它会立即打开记事本，但是我在记事本中遇到了这个错误。

```
The filename, directory name, or volume label syntax is incorrect 
```

该文件肯定存在于该位置（我可以使用 读取它`http: //localhost/openme.txt`），并且我尝试以多种不同格式表示链接，例如[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819129%28v=vs.85%29.aspx)所述，但无法使其正常工作。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:35:19.407

很简单，您混淆了两种不同的协议。

您的协议 - 以及您传递给记事本的 Url - 是`opentxt://localhost/openme.txt`. 该文件的工作位置是`http: //localhost/openme.txt`. 这两个不一样！

HTTP 是一种操作系统本身可以理解的协议，因此，记事本可以将 HTTP Url 传递给操作系统，操作系统反过来`localhost`使用端口 80 连接并发送对该资源的请求。文件被返回，记事本有它的数据。这一切都在定义 HTTP 行为的操作系统库中处理。

除非您对其进行编码，否则您的`opentxt`协议没有此支持。记事本不知道如何处理它 - 所以您会看到错误消息。

一种轻松处理此问题的方法是创建自己的处理协议的应用程序。如果您`opentxtHandler.exe`通过注册表连接，它将被传递`opentxt://`url，然后可以适当地处理它。这可能只是意味着将协议从`opentxt`to更改为`http`然后将其传递给记事本 - 或者它可能更复杂。

# c++ - 如何复制 std::string 的第一个字符除外？

> ID：12089410
> 
> 赞同：0
> 
> 时间：2012-08-23T10:14:11.947
> 
> 标签：c++, string

除了第一个字符 ( )之外，我必须复制`originalString`到。的内容不应更改。`newString``~``originalString`

```
std::string originalString("~myOriginalString");
std::string newString;
…
// expected result: newString is "myOriginalString", originalString is unmodified. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T10:16:13.797

只需使用[`std::string::substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)：

```
string newString(originalString.substr(1)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T10:16:46.227

一般来说，这种操作可以用迭代器来执行：

```
string newString(originalString.begin()+1, originalString.end()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:28:14.273

您可以为此使用 c-tor：

`string newString(originalString, 1);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T10:16:54.730

`std::string`有一个方法，`substr()`，它就是这样做的。查一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T10:17:03.803

使用[substr](http://www.cplusplus.com/reference/string/string/substr/)字符串成员函数：

```
 newString = originalString.substr(1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T10:17:40.277

如果它是 std::string，您可以执行以下操作：

```
newString = originalString;
newString.replace(0, 1, ""); 
```

或者，还有一种方法称为`erase`：

```
newString = originalString;
newString.erase(0, 1); 
```

基本上，这用空字符串替换了从第 0 个字符开始、长度为 1 的部分。第二种方法不替换，而是直接擦除这部分。

# nginx - Nginx 404 报告

> ID：12089412
> 
> 赞同：1
> 
> 时间：2012-08-23T10:14:19.743
> 
> 标签：nginx, reporting, http-status-code-404

我正在寻找一些方法来向我的客户报告我们继承的网站的 404 错误。

应用程序 (Django) 中的 404 由 Sentry 处理，并且运行良好，但这是针对 Django 无法处理的事情（例如，指向静态 PDF 的链接）。

我在想我可以写一些东西来 grep Nginx 日志，向我展示一个 404 URL 的列表，可能是频率。

我认为像 AWStats 这样的东西有点矫枉过正。

任何人都可以指点我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:03:17.707

也许您可以执行以下操作：

(nginx 配置)

```
error_page 404 = /report_404.html; 
```

`report_404.html`然后为记录哨兵条目创建一个django视图。

# udp - 通过 UDP 处理 RTSP 的数据丢失

> ID：12089414
> 
> 赞同：3
> 
> 时间：2012-08-23T10:14:28.717
> 
> 标签：udp, rtsp, data-loss

我通过 UDP（视频数据）接收 RTP。

RTP 持有我需要解码的 H264。不幸的是，大多数 RTP 都保存着零散的数据。由于缺少 RTP 序列，我无法正确重建 H264。

关于如何减少数据丢失以便能够解码至少几帧的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:37:29.120

没有什么可以说的。正如形容词所暗示的那样，丢失的数据会丢失。你不能把它找回来。在几乎任何情况下，您仍然可以将剩余的 NAL 输入解码器并渲染视频。您将看到丢失的 NAL 引入的工件，但这就是生活。

丢失的数据丢失。

为了减少数据丢失，您需要更改传输协议。RTSP 中的交错式 RTP 可能是一个不错的选择，它基于类似的技术堆栈。

显然，只有在您有足够的带宽来传输视频时，更改为 TCP 才会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:30:12.760

如果您可以控制 H264 编码器，请启用错误恢复工具 (http://www.slideshare.net/coldfire7/error-resiliency-and-concealment-in-h264-presentation)，这会使您的视频对传输错误更加稳健。

这样您的 UDP 上的 RTP 就变得“更能抵抗”数据包丢失。

# java - 解析“;” 用 Ant 脚本分隔 XML 值

> ID：12089416
> 
> 赞同：1
> 
> 时间：2012-08-23T10:14:42.610
> 
> 标签：java, xml, ant

> **可能重复：**
> [在 Ant 中传递分号作为参数](https://stackoverflow.com/questions/7804567/pass-semicolon-in-ant-as-a-parameter)

我必须`XE`从这个 xml 属性标签中读取它

```
<databases key="Test" type=".configdb">
      <dbname>test</dbname>
      <driver type=".dbdriver">
        <attributes>localhost;1521;XE;false</attributes>
        <driverType>Oracle thin</driverType>
      </driver>
      <password>965449DE3DB045FE</password>
      <user>test</user>
    </databases> 
```

用蚂蚁脚本。

看到很多想法；但似乎所有的路径都很长，甚至没有到达确切的目的地。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:49:15.943

假设您在某些`resource.xml`. 您可以`XE`通过使用[scriptdef](http://ant.apache.org/manual/Tasks/scriptdef.html)片段来解析 Ant 的 javascript 引擎。

**构建.xml**：

```
<target name="something" ...
...
  <scriptdef language="javascript" name="split">
    <attribute name="input"/>
    <attribute name="output"/>
    values = attributes.get("input");
    project.setProperty(attributes.get("output"), values.split(";")[2]);
  </scriptdef>

  <xmlproperty file="resource.xml"/>
  <echo message="Original: ${databases.driver.attributes}"/>
  <split input="${databases.driver.attributes}" output="result" />
  <echo message="Split: ${result}"/>
...
</target> 
```

运行此任务时，您将获得：

```
something:
[xmlproperty] Loading /home/code/resource.xml
     [echo] Original: localhost;1521;XE;false
     [echo] Split: XE 
```

# entity-framework - 为实体框架迁移设置启动项目参数

> ID：12089420
> 
> 赞同：13
> 
> 时间：2012-08-23T10:14:55.830
> 
> 标签：entity-framework, migration

当每次我需要添加迁移或更新数据库时使用 EF 4.3.1 迁移时，我必须使用 StartUpProject 参数。我可以把它设置在某个地方，这样我就不必继续这样做了吗？我不想将我的数据项目设置为启动项目。如果有影响的话，我的上下文和迁移在不同的项目中。

不使用 StartpProject 参数时引发的异常：

```
update-database -verbose
Using NuGet project 'Data.Deployment'.
Using StartUp project ''.
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentException: The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))
   --- End of inner exception stack trace ---
   at System.RuntimeType.InvokeDispMethod(String name, BindingFlags invokeAttr, Object target, Object[] args, Boolean[] byrefModifiers, Int32 culture, String[] namedParameters)
   at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParams)
   at System.Management.Automation.ComMethod.InvokeMethod(PSMethod method, Object[] arguments)
Exception has been thrown by the target of an invocation. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-11T20:11:40.863

至少在 Entity Framework 6 中，要指定启动项目，请使用`-StartUpProjectName`update-database 的参数：

```
update-database -StartUpProjectName <String> 
```

您可以使用`get-help`包管理器控制台中的命令来查看命令的可能参数：

```
get-help update-database -detailed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T08:29:19.900

我不确定这是否是您所说的，但是您可以将包管理器控制台中的默认项目设置为您的迁移配置所在的项目；这是最右边的下拉列表。
这样，我就不必提供启动项目作为论据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-07T20:52:28.517

使用 StartupProject 参数：`Update-database -StartupProject "PROJECTNAME"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T12:46:08.223

解决此问题的一种干净方法是将测试项目附加到解决方案中。

即使您不想编写大量单元测试，它也是一个适合数据层命名空间或类似的启动项目。

这使您的启动问题更清晰，包管理器适用于整个解决方案 IIRC - 因此请确保默认项目是其中包含迁移文件夹的项目。

# android - 从不同的应用程序访问数据库

> ID：12089424
> 
> 赞同：0
> 
> 时间：2012-08-23T10:15:07.807
> 
> 标签：android, android-sqlite

我如何访问位于不同应用程序中的数据库。我想访问数据并将其用于其他应用程序我想怎么做。我什至不知道如何从不同的应用程序访问数据，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:18:04.280

阅读[这篇文章](http://developer.android.com/tools/publishing/app-signing.html)：

“应用程序模块化——Android 系统允许由相同证书签名的应用程序在同一进程中运行，如果应用程序请求，系统将它们视为单个应用程序。通过这种方式，您可以将应用程序部署在模块中，如果需要，用户可以独立更新每个模块。”

“通过权限共享代码/数据——Android系统提供基于签名的权限强制执行，这样一个应用程序就可以将功能暴露给另一个使用指定证书签名的应用程序。通过使用相同的证书签署多个应用程序并使用基于签名的权限检查后，您的应用程序可以安全地共享代码和数据。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:16:38.280

请使用内容提供者来完成相同的任务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:16:48.213

你了解**[内容提供商吗？](http://developer.android.com/guide/topics/providers/content-providers.html)**，您可以通过使用它来实现上述功能。

**例如，**日历、联系人都是这样做的。

查看：

1.  [创建内容提供者](http://developer.android.com/guide/topics/providers/content-provider-creating.html)
2.  [Android SQLite 数据库和 ContentProvider - 教程](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T10:20:17.157

在 Android diff 应用程序中，可以在内容提供者的帮助下共享数据，下面将为您提供帮助

[http://about-android.blogspot.in/2010/04/content-provider-example-1.html](http://about-android.blogspot.in/2010/04/content-provider-example-1.html)

保持微笑

# c - 这个结构代码是如何工作的

> ID：12089427
> 
> 赞同：2
> 
> 时间：2012-08-23T10:15:12.960
> 
> 标签：c, struct, structure, unsigned

大家好，有人可以帮我处理这段代码吗

```
struct  
        {  
    unsigned BLOCKDATA:16;  
    unsigned QUALCOUNT:4;  
    unsigned BLOCKTYPE:2;  
    unsigned BE:1;  
    unsigned Z:1;  
    unsigned SYN:1;  
    unsigned DOK:1;  
    unsigned BM:1;  
    unsigned SYNDROME:5;  
}  
    RDSout; 
```

我知道 RDSout 是一个结构，BLOCKDATA 和 QUALCOUNT 等是这个结构的元素，但我不明白BLOCKDATA 前面的**:16是什么意思？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T10:16:28.740

这样，您可以声明要为该变量保留多少位。它通常用于对齐数据结构。维基[百科文章](http://en.wikipedia.org/wiki/Data_structure_alignment)包含一个很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:20:39.517

结构中每个元素后面的数字显示了我们为每个元素保留了多少位。当您已经知道要使用的确切位数时，通常会打包位并节省内存。您也可以参考[此处](http://cplus.about.com/od/learningc/ss/lowlevel_10.htm)以使您的概念更加清晰。

[更多链接](http://www.cs.cf.ac.uk/Dave/C/node13.html)

[还有一个](http://forums.codeguru.com/archive/index.php/t-377882.html)

# android - 带有自定义广播接收器的 GCM

> ID：12089428
> 
> 赞同：5
> 
> 时间：2012-08-23T10:15:17.937
> 
> 标签：android, broadcastreceiver, google-cloud-messaging

我正在我的应用程序中实现 gcm 通知。因为我使用我的代码生成许多具有不同包名称的应用程序，所以我不能使用标准的 mypackage.GCMIntentService 名称。在生成应用程序时，我只在 Manifest 中进行更改并更改我的 R 类的导入。所以我实现了自己的 BroadcastReceiver

```
public class GCMReceiver extends GCMBroadcastReceiver {
  @Override
  protected String getGCMIntentServiceClassName(Context context) {
    return GCMIntentService.class.getName();
  }
} 
```

无论包名称如何，都返回 GCMIntentService 的名称。

这是我的清单：

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <permission
        android:name="org.rferl.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="org.rferl.permission.C2D_MESSAGE" />

    <service
        android:name="org.rferl.service.GCMIntentService"
        android:enabled="true" />

   <receiver
        android:name="org.rferl.GCMReceiver"
        android:enabled="true"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>

            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="org.rferl" />
        </intent-filter>
    </receiver> 
```

一切正常，我可以注册、注销、接收消息。但是当应用程序没有运行时，不会调用 GCMIntentService.onMessage。我的清单中是否缺少某些内容？为什么系统没有启动服务？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T12:29:18.757

## 为 Android GCM 更改应用程序// 的包/类名称（使用 Eclipse `GCMIntentService`ADT ）`GCMBroadcastReceiver`

**注意**：*建议您在进行以下更改之前验证您是否可以通过 GCM 接收消息。**要使用应用程序的默认包名称**在 Android 应用程序中实现 GCM ，请参阅[GCM：入门](http://developer.android.com/google/gcm/gs.html)。*

* * *

### 包裹名字

要更改应用程序的包名称（例如，新包名称 = `com.example.newpackage`），

*   在包资源管理器中，右键单击项目 → Android 工具 → 重命名应用程序包。
    这会自动方便地更新包名称。
*   在中，在和中`AndroidManifest.xml`更新包名称：`permission``uses-permission``C2D_MESSAGE`

    ```
    <permission android:name="com.example.newpackage.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="com.example.newpackage.permission.C2D_MESSAGE" /> 
    ```

*   在`AndroidManifest.xml`中，更新 中的包`category`名称`receiver`：

    ```
    <receiver
        android:name="com.example.oldpackage.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >  <!-- Not this one!! -->
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.example.newpackage" />  <!-- This one!! -->
        </intent-filter>
    </receiver> 
    ```

* * *

### 的名字`GCMIntentService`

如果您的应用程序的包名称是`com.example.newpackage`，则`GCMIntentService`必须调用您的`com.example.newpackage.GCMIntentService`。如果不，

*   创建一个新类`extends` `GCMBroadcastReceiver`并覆盖`getGCMIntentServiceClassName()`：

    ```
    public class MyBroadcastReceiver extends GCMBroadcastReceiver
    {
        @Override
        protected String getGCMIntentServiceClassName(Context context)
        {
            return MyIntentService.class.getName(); // Don't hard-code like "com.example.oldpackage.MyIntentService", see http://stackoverflow.com/a/936696/1402846
        }
    } 
    ```

    *这是基于[谷歌关于 GCMBroadcastReceiver 的文档](http://developer.android.com/reference/com/google/android/gcm/GCMBroadcastReceiver.html)：*

    > 默认情况下，[`GCMBaseIntentService`](http://developer.android.com/reference/com/google/android/gcm/GCMBaseIntentService.html)该类属于应用程序主包，名为[`DEFAULT_INTENT_SERVICE_CLASS_NAME`](http://developer.android.com/reference/com/google/android/gcm/GCMConstants.html#DEFAULT_INTENT_SERVICE_CLASS_NAME). 要使用新类，[`getGCMIntentServiceClassName(Context)`](http://developer.android.com/reference/com/google/android/gcm/GCMBroadcastReceiver.html#getGCMIntentServiceClassName(android.content.Context))必须覆盖 。

*   在`AndroidManifest.xml`中，更新 的名称`receiver`：

    ```
    <receiver
        android:name="com.example.oldpackage.MyBroadcastReceiver"
        ... >
    </receiver> 
    ```

*   在`AndroidManifest.xml`中，更新 的名称`service`：

    ```
    <service android:name="com.example.oldpackage.MyIntentService" /> 
    ```

* * *

### 的名字`GCMBroadcastReceiver`

如果您更改了以下包/类名称`GCMBroadcastReceiver`：

*   在`AndroidManifest.xml`中，更新 的名称`receiver`：

    ```
    <receiver
        android:name="com.example.oldpackage.NewBroadcastReceiver"
        ... >
    </receiver> 
    ```

* * *

### 故障排除

*   验证在 中`AndroidManifest.xml`，包名应至少出现 4 次：

    *   在`manifest`：

        ```
        <manifest ...
            package="com.example.newpackage" ... 
        ```

    *   在`permission`：

        ```
        <permission android:name="com.example.newpackage.permission.C2D_MESSAGE" android:protectionLevel="signature" /> 
        ```

    *   在`uses-permission`：

        ```
        <uses-permission android:name="com.example.newpackage.permission.C2D_MESSAGE" /> 
        ```

    *   在GCM 广播接收器的内部`category`：`intent-filter``receiver`

        ```
        <category android:name="com.example.newpackage" /> 
        ```

*   如果您更改了软件包名称，请在测试前卸载设备/模拟器上的旧应用程序。

*   如果您更改了包名称，请注意（您在 中收到的[`onRegistered()`](http://developer.android.com/reference/com/google/android/gcm/GCMBaseIntentService.html#onRegistered(android.content.Context,%20java.lang.String))）注册 ID 已更改。
*   如果您在 中收到您的注册 ID [`onRegistered()`](http://developer.android.com/reference/com/google/android/gcm/GCMBaseIntentService.html#onRegistered(android.content.Context,%20java.lang.String))，您应该在 LogCat (tag) 中看到类似这样的内容`GCMBroadcastReceiver`：

    ```
    GCMBroadcastReceiver        onReceive: com.google.android.c2dm.intent.REGISTRATION
    GCMBroadcastReceiver        GCM IntentService class: com.example.oldpackage.MyIntentService 
    ```

    验证意图服务的包/类名称是否正确。

*   如果您[`getGCMIntentServiceClassName(Context)`](http://developer.android.com/reference/com/google/android/gcm/GCMBroadcastReceiver.html#getGCMIntentServiceClassName(android.content.Context))在自己的中覆盖`GCMBroadcastReceiver`，您应该在 LogCat (tag) 中看到类似的内容`GCMRegistrar`：

    ```
    GCMRegistrar        Setting the name of retry receiver class to com.example.oldpackage.MyBroadcastReceiver 
    ```

    验证广播接收器的包/类名称是否正确。

*   当您的服务器向 GCM 服务器发送消息时，请检查 HTTP 状态代码和 HTTP 响应是否有错误。
*   如果你很绝望：
    *   检查 LogCat 是否有错误。
    *   尝试重新启动您的设备/模拟器。
    *   尝试在设备/模拟器上卸载您的应用程序。
    *   尝试重新启动 Eclipse。
    *   尝试清理并重新构建项目。
    *   尝试更新 ADT（下拉菜单 → 窗口 → Android SDK 管理器 → 安装包）。
    *   尝试更新 Eclipse（下拉菜单 → 帮助 → 检查更新）。
    *   尝试重新启动计算机。
    *   睡个好觉，或者祈祷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T20:22:18.617

> 因为我使用我的代码生成许多具有不同包名称的应用程序，所以我不能使用标准的 mypackage.GCMIntentService 名称。

我不确定您是要求运行时解决方案还是构建时解决方案。其他答案是运行时解决方案，所以我想我在构建期间添加了一些关于可能性的信息。

* * *

在 AndroidManifest 中，您可以使用变量`$PACKAGE_NAME`（默认可用），该变量将引用您在根元素的属性`package`中指定的包名称。`manifest`

此`package`属性的值不必是硬编码字符串，也可以通过资源引用动态设置，如下所示：

```
<manifest package="@string/app_package" ...>
    ...
    <service
        android:name="$PACKAGE_NAME.service.GCMIntentService"
        android:enabled="true" />
    ...
</manifest> 
```

注意`.service`只是我包含的一个子包，用于显示您如何指定这些。当然，这个解决方案只有在您的应用程序遵循一般规则（例如将服务类放在`.service`子包中）时才有效。

另请注意，您实际上可以完全关闭根包。它将被 Android 扩展：

```
<manifest package="@string/app_package" ...>
    ...
    <service
        android:name=".service.GCMIntentService"
        android:enabled="true" />
    ...
</manifest> 
```

实际上，和上面一样。

如果您正在寻找一种更灵活的方式来替换 AndroidManifest（或不同文件）中的值，您可能需要查看 Ant Replace 任务（[http://ant.apache.org/manual/Tasks/replace。 html](http://ant.apache.org/manual/Tasks/replace.html) ) 或 Maven 的资源过滤 ( [http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html) )。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T11:34:50.193

您应该将 GCMIntentService 类放入您的根应用程序包中。这里 org.rferl

```
<service
    android:name=".GCMIntentService"
    android:enabled="true" /> 
```

和接收器

```
 <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.EgoSecure.ma" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T11:35:05.603

The gcm broadcast receiver (GCMBroadcastReceiver.class) calls intent service class (GCMIntentService.class) from application root directory. You cannot use "org.rferl.service.GCMIntentService" right now. You should override getGCMIntentServiceClassName method from GCMBroadcastReceiver, that returns name of your GCMIntentService class. How to do that, [here](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)

# objective-c - 将导航控制器实现为标签栏控制器

> ID：12089430
> 
> 赞同：0
> 
> 时间：2012-08-23T10:15:25.510
> 
> 标签：objective-c, ios, xcode

好的，我有一个众所周知的问题。我想将 tableview 控制器实现为导航控制器。这个导航控制器应该在一个标签栏控制器中实现。

我正在使用 XCode 4.2，并使用标签栏控制器模板开始了一个新项目现在我所做的是在 firstViewController 的 xib 文件中删除了视图并添加了一个带有 tableview 控制器的导航控制器。

我将文件所有者视图连接到 tableview 项目。但是当我构建并运行它时，它只显示表格视图而不是导航控制器。

有人可以帮忙吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:36:56.543

There is the TabBarController Application. In this application you will see how to implement NavigationController and TableView together in the TabBarController application:

[http://www.edumobile.org/iphone/iphone-programming-tutorials/tabbarcontroller-with-navigationcontroller-and-tableview-in-iphone/](http://www.edumobile.org/iphone/iphone-programming-tutorials/tabbarcontroller-with-navigationcontroller-and-tableview-in-iphone/)

# database-design - 用于调度任务的数据库表设计

> ID：12089431
> 
> 赞同：30
> 
> 时间：2012-08-23T10:15:28.183
> 
> 标签：database-design, database-schema

我希望能够创建可以基于固定日期执行的时间表，每天重复，在一周中的特定日期重复，在一年中的特定月份重复，在每年的特定日期重复，并在一天中的特定时间。

请问我该如何为这个问题构建数据库表？

**编辑#1**

基本上，我正在编写一个应用程序，该应用程序允许用户安排在各种预配置时间发送预配置的问候语。我知道我需要一个表格来存储有关日程安排的信息（例如圣诞节、Marketing One、...| 以及日程安排的运行时间）。然后是另一个表格，记录已运行的日程安排、发送的问候语、发给谁以及使用什么电子邮件；基本上是一个交易表。

我的问题是设计日程表，因为我希望允许用户在特定日期、一周中的特定日期（重复）、每个月的特定日期、每天的特定时间以及每年的特定日期/月份（例如 25/12）。

我如何创建一组以灵活方式处理这些输入的日程表？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-12T10:37:26.477

这是我想出的表结构；

```
Schedule
 - ScheduleName
 - ScheduleTypeId (Daily, Weekly, Monthly, Yearly, Specific)
 - StartDate
 - IntervalInDays
 - Frequency
 - FrequencyCounter

ScheduleDaily
 - ScheduleDailyId 
 - ScheduleId
 - TimeOfDay
 - StartDate
 - EndDate

ScheduleMonthly
 - ScheduleMonthlyId
 - ScheduleId
 - DayOfMonth
 - StartDate
 - EndDate

ScheduleSpecific
 - ScheduleSpecificId
 - ScheduleId
 - SpecificDate
 - StartDate

...

ScheduleJob
 - ScheduleJobId
 - ScheduleId
 - ScheduleTypeId
 - RunDate
 - ScheduleStatusId 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-05-14T14:00:04.083

Microsoft SQL Server 设计高效灵活：[https ://msdn.microsoft.com/en-us/library/ms178644.aspx](https://msdn.microsoft.com/en-us/library/ms178644.aspx)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-10-23T22:17:44.373

我认为接受的答案比它需要的要复杂得多。这可以通过这样的单个表来完成：

```
Schedules

 - Id :int
 - Greetingid :int
 - Startdate :date
 - Frequencytype :char(1)
 - Frequencyinterval :int
 - Timeofday :time 
```

频率类型将是以下值之一

*   'O' = 一次
*   'D' = 每日
*   'W' = 每周
*   'M' = 每月
*   'A' = 每年

频率间隔将是数字，值的含义取决于频率类型的值

*   如果 type = 'Once' 那么 value = 0（无间隔）计划将在 startdate 执行
*   如果 type = 'Daily' 那么 value = # of days 间隔
*   如果 type = 'Weekly' 然后 1 到 7 表示一周中的某一天
*   如果 type = 'Monthly' 那么 1 到 31 表示该月中的某天
*   如果 type = 'Annually' 那么 1 到 365 表示一年中的某一天

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-04-24T10:07:49.297

我已经阅读了上面的答案，我认为很多事情都是不必要的，如果我错了，请纠正我。

以下是我认为应该做的：

**日程**

* * *

*   ID

*   类型（每日、每月、每周、固定、每年） - 枚举

*   频率（可以是 1-7 [星期几]、1-30（或 28）[月份中的几天]、1-365 [一年中的几天] 或 null（对于每日，固定） - ArrayField（整数） - [ 1, 7] 或 [23] 或 [235] 或空

*   时间（UTC 时间） - ArrayField（字符字符串 - ['9:00', '13:30']

*   日期（对于固定类型） - 日期时间 - 2009-03-21

*   is_active (boolean) - 用于启用、禁用计划

*   name (CharField) - 如果你想命名时间表

其余字段需要您正在构建的内容的上下文。

现在，为此我正在考虑每 30 分钟运行一次 cronjob（我将输入时间间隔为 30 分钟），它运行一个脚本（在我的情况下为 django 管理命令），该脚本从该表中过滤需要运行的计划：

查询将是这样的：

```
current_day_of_week = 3
current_day_of_month = 24
current_day_of_year = 114
current_time = 13:30
current_date = 2019-04-24

Filter records that match the below query(not even psuedo code)(I'm using Q objects(https://docs.djangoproject.com/en/2.2/topics/db/queries/#complex-lookups-with-q-objects)

Q(daily AND current_time) OR
Q(weekly AND current_day_of_week AND current_time) OR
Q(monthly AND current_day_of_month AND current_time) OR
Q(yearly AND current_day_of_year AND current_time) OR
Q(fixed AND current_date AND current_time) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-25T06:16:33.920

您可以从一个简单的表开始，该表具有以下用于存储计划的通用模式 (PostgreSQL)。考虑称为“作业”的调度运行的每个实例。

```
CREATE TABLE Schedule (
    id SERIAL UNIQUE,                      -- unique identifier for the job
    name varchar(64) NOT NULL,             -- human readable name for the job
    description text,                      -- details about the job
    schedule varchar(64) NOT NULL,         -- valid CRON expression for the job schedule
    handler varchar(64) NOT NULL,          -- string representing handler for the job
    args text NOT NULL,                    -- arguments for the job handler
    enabled boolean NOT NULL DEFAULT TRUE, -- whether the job should be run
    created_at timestamp NOT NULL,         -- when was the job created
    updated_at timestamp NOT NULL,         -- when was the job updated
    start_date timestamp,                  -- job should not run until this time
    end_date timestamp,                    -- job should not run after this time
    last_triggered_at timestamp,           -- when was the job last triggered
    meta json                              -- additional metadata for the job 
); 
```

# c# - asp.net 图像按钮发送空值

> ID：12089437
> 
> 赞同：0
> 
> 时间：2012-08-23T10:15:50.617
> 
> 标签：c#, asp.net-mvc, imagebutton

嗨，我正在尝试使用图像按钮将值传递给模型，但它说我只是发送任何东西都没有任何帮助。

我用普通的输入按钮让它工作

```
<input type="submit" name="Vote" value="6" /> 
```

但不是图像。

```
<input type="image" src="..urlpath" name="Vote" value="6"/>
<button type="submit" name="Vote" value="6"> 6 <img src="...urlpath" /></button> 
```

如果你能帮助我，那将是非常感谢

控制器

```
 public ActionResult PlanVote()
    {
        return View();
    }

    [HttpPost]
    public ActionResult PlanVote(int vote)
    {
        PlanModel myModel = PlanModel.Instance;
        myModel.Vote(vote);

        if (PlanModel.Instance.currentstate == PlanState.displaying)
        {
            return RedirectToAction("Index", "Plan");
        }
        else
        {
            return RedirectToAction("Waiting", "Plan");
        }
     } 
```

模型

```
 public void Vote(int Votes)
    {

        ivote.Add(Votes);

        if (countVotes >= iCount)
        {
            currentstate = PlanState.displaying;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:22:18.017

阅读 HTML[规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.4.1)：

> **图片**
> 
> 创建一个图形提交按钮。src 属性的值指定将装饰按钮的图像的 URI。出于可访问性的原因，作者应通过 alt 属性为图像提供替代文本。当使用定点设备单击图像时，会提交表单并将单击坐标传递给服务器。x 值以图像左侧的像素为单位，y 值以图像顶部的像素为单位。提交的数据包括name.x=x-value和name.y=y-value，其中“name”是name属性的值，x-value和y-value分别是x和y坐标值。
> 
> 如果服务器根据点击的位置采取不同的行动，非图形浏览器的用户将处于不利地位。出于这个原因，作者应该考虑替代方法：
> 
> 使用多个提交按钮（每个按钮都有自己的图像）代替单个图形提交按钮。作者可以使用样式表来控制这些按钮的位置。将客户端图像映射与脚本一起使用。

# javascript - Firefox 显示的值与我从 Firebug 看到的不同

> ID：12089438
> 
> 赞同：2
> 
> 时间：2012-08-23T10:15:50.677
> 
> 标签：javascript, html, firefox

我不确定这是一个错误还是其他什么，但它看起来很奇怪，我完全糊涂了。

请看下图，note的标题在Firebug中是`#note_title`有值`3333`的，但是`44444`在网页中显示，在控制台中，从jQuery中，标题的值也是`44444`，这是为什么呢？

![在此处输入图像描述](../Images/6b46f221d340b29b0a19ebd9bde44254.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:18:59.100

value*属性*指定*默认*值。

value*属性*（`val()`访问）和 UI 显示*当前*值。

# c# - 调用 SomeEventHandler.Invoke() 和 SomeEventHandler() 有区别吗？

> ID：12089448
> 
> 赞同：1
> 
> 时间：2012-08-23T10:16:24.960
> 
> 标签：c#

假设您有一个定义了以下事件的 C# 类：

`public event EventHandler SomeEvent;`

这两种调用事件的方法的行为是否存在差异？

```
SomeEvent.Invoke(this, null); // 1
SomeEvent(this, null);        // 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:17:30.987

不，没有区别。

```
SomeEvent(this, null); 
```

改为

```
SomeEvent.Invoke(this, null); 
```

在编译器编译时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:19:26.003

不，编译器将转换`SomeEvent()`为`SomeEvent.Invoke()`

# objective-c - 没有 CATiledLayer 的 iOS 应用程序中的巨大图像？

> ID：12089453
> 
> 赞同：4
> 
> 时间：2012-08-23T10:16:45.440
> 
> 标签：objective-c, ios, cocoa-touch, catiledlayer

我有一个大约 7000x6000 像素的图像。我需要它在我的应用程序的滚动视图/图像视图中，但是这是一种巨大的显示方式。它应该是一种地图。我希望将应用程序的大小保持在最小，并且图像在 .jpg 中只有 13mb 左右。在 .png 中超过 100mb，这是不可接受的。许多人建议`CATiledLayer`作为一种选择，但我相信这会导致更大的文件大小。无论如何，我尝试使用`CATiledLayer`，并在 TileCutter 中创建自己的图块（.jpg 中的图块），并且大小还不错。但是我到处都有错误。iOS 版本`CATiledLayer`对我来说是一个谜，我找不到解决这个问题的方法。我收到一个错误，说明与 java 等效的“索引超出数组范围”，即使该数组在该特定索引处具有内容。它有一个返回数组的方法。该数组包含 .plist 的数据。在返回之前，我注销了数组的内容，给了我很好的数据。呼叫正在尝试访问

`[array objectAtIndex:0]`

并将其放入字典中，但会抛出 OutOfBounds。注销整个数组时，我可以清楚地看到内容，但是注销时

```
NSLog("%@",[method objectAtIndex]); I get the same exception. 
```

无论如何，`CATiledLayer`给我的只是问题。我一直在对 PhotoScroller 项目进行逆向工程，但没有运气。有人有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T11:39:11.830

Apple 有一个非常简洁的项目 PhotoScroller，它使用 CATiledLayer 并允许您滚动浏览多个图像并缩放它们。这看起来真的很整洁，直到我发现苹果“作弊”并预先平铺了图像（大约 800 个图块保存为捆绑中的文件！）

我需要类似的功能，但必须从网络下载图像。于是就出现了[PhotoScrollerNetwork](https://github.com/dhoerl/PhotoScrollerNetwork)。使用 TiledImageBuilder，您可以下载（或从磁盘读取）大量图像——我什至测试了 18000x18000 的图像——它可以工作。

此类所做的是在下载时开始平铺图像（使用 libjpegturbo 时），或者可以保存文件然后平铺（需要更长的时间）。该类计算出需要多少级别的细节才能以全分辨率显示图像并调整大小以适合包含视图（滚动视图）。

该类使用磁盘缓存来保存切片，但是使用旧的 Unix 技巧来创建文件，打开它，然后取消链接，这样切片就永远不会真正被保存 - 一旦类被释放（并且文件描述符关闭）瓷砖被释放（或者如果你的应用程序崩溃，它们也会被释放。

有人在内存非常有限的 iPad 1 上遇到问题，因此该类现在在同时加载多个图像时会限制其对文件系统的使用。今年我在 WWDC 上与 iOS 内核经理进行了讨论，在向他解释了节流技术之后，他说算法（关于管理磁盘缓存使用量）可能是可以使用的最佳技术。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T11:07:01.207

我认为那些建议 CATiledLayer 的人是对的。你真的应该使用它！如果您需要使用该技术显示巨大位图的示例项目，请查看此处：[http ://www.cimgf.com/2011/03/01/subduing-catiledlayer/](http://www.cimgf.com/2011/03/01/subduing-catiledlayer/)

> 我们作为 Cocoa/Cocoa Touch 开发人员使用的许多技术不受胆怯的人的影响，因为我们通常根本不了解它们，并且使用它们似乎是一项艰巨的任务。其中一种技术可以在 Core Animation 中找到，称为 CATiledLayer。它似乎是一种神奇的技术，因为它的大部分实现有点像黑匣子，这一事实导致它被误解。CATiledLayer 只是提供了一种方法来绘制非常大的图像而不会导致严重的内存命中。无论您在哪里部署，这都很重要，但在 iOS 设备上尤其重要，因为内存很宝贵，当操作系统告诉您释放内存时，您最好能够这样做，否则您的应用程序将被关闭。

# javascript - 比较 js/jquery 中的所有数组元素

> ID：12089471
> 
> 赞同：1
> 
> 时间：2012-08-23T10:17:35.713
> 
> 标签：javascript, jquery, ajax, jquery-ui

这是当前代码的演示：http: [//mobilocloud.com/schedule/](http://mobilocloud.com/schedule/)

我有一个包含多个数组的 js 对象，每个数组有两个时间散列（一个开始时间和一个结束时间/我已经让它们使用`getTime()`）。我想比较对象中包含的所有数组以检查时间范围之间的所有交集。我已经让脚本工作了，但它一次只比较两个数组（最后我得到两个重叠事件的组）。我想获得所有重叠事件的组，而不仅仅是两个。

这是实际的代码：

```
function _DetectOverlapedEvents(column) {
    events;
    groups;
    sgroups;
    todeoverlap[column] = new Array();
    groups[column] = new Array();
    sgroups[column] = new Array();
    var $curid=0;
    var $curevent= new Array();
    if(events[column].length > 1){
        $(events[column]).each(function(key, $secondevent) {
            //alert("Comparing : " + $curevent["name"] + " and " + $secondevent["name"] + "\n" + $curevent["starthash"] + "<" +$secondevent["endhash"] + " = " + ($curevent["starthash"] < $secondevent["endhash"]) + "\n&&\n" + $curevent["endhash"] + ">" + $secondevent["starthash"] + " = " + ($curevent["endhash"] > $secondevent["starthash"]));
            if($curevent.length<2) {
                $curevent=$secondevent;
            } else if(($curevent["starthash"] < $secondevent["endhash"]) && ($curevent["endhash"] > $secondevent["starthash"])) {
                //alert("added " + $curevent["name"] + " and " + $secondevent["name"]);
                toextend = {left: $curevent, right: $secondevent};
                groups[column].push(toextend);
                sgroups[column].push($curevent, $secondevent);
                //console.log("groups: " + JSON.stringify(groups[column]));
                $curid++;
            }
            $curevent = $secondevent;
        });
    }
    //console.log(JSON.stringify(groups));
} 
```

![](../Images/cee402a9406e65c4d48b0d32b102b940.png)

# javascript - 登录后避免连接到 Facebook 应用程序

> ID：12089472
> 
> 赞同：0
> 
> 时间：2012-08-23T10:17:39.113
> 
> 标签：javascript, facebook, login, popup

我的页面有一个 facebook-loggin 按钮：

```
<div id="signin"><div id="fb-root"></div><a id="fb-login" onclick="facebookLogin()">Login with Facebook</a></div>

function facebookLogin() {
FB.login(function(response) {
    if (response.authResponse) {
        window.location.reload(); //or do whatever you want
    } else {
        //do smthg else
    }
}); 
```

}

我单击该链接，将出现一个登录弹出窗口，然后继续。完成此操作后，我总是被要求连接到与我的页面 URL 对应的应用程序。

有没有办法在我登录后关闭登录弹出窗口并且不要求连接到应用程序？

非常感谢

# jsf-2 - 简单的 jsf2.0 应用程序：javax.faces.application.ViewExpiredException 无法恢复视图

> ID：12089474
> 
> 赞同：1
> 
> 时间：2012-08-23T10:17:39.990
> 
> 标签：jsf-2, primefaces, viewexpiredexception

在一个简单的 jsf2.0 应用程序中，我收到此异常：javax.faces.application.ViewExpiredException 无法恢复视图。

在控制台中我收到以下错误：org.portletfaces.bridge.BridgeException: Must first call setPortletContext(PortletContext)

当我在不使用 Primefaces jar 的情况下执行我的应用程序时，它可以正常工作。但是在添加 Primefaces jar 之后，我开始收到此异常。

我正在使用 Tomcat 7.2。编辑：应用程序中只有 3 页，没有支持 bean。第一页上的链接正在调用第二页。但是当我点击链接时，我收到了这个错误，第二页没有显示。无法理解问题的原因。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:56:05.990

> *应用程序中只有 3 个页面，没有支持 bean。第一页上的链接正在调用第二页。但是当我点击链接时，我收到了这个错误，第二页没有显示。*

如果您通过`UICommand`链接/按钮导航，则可能会发生这种情况。您根本不应该通过 POST 链接/按钮导航，而应该通过 GET 链接/按钮导航。

用普通链接/按钮替换所有那些[`UICommand`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UICommand.html)错误地用于页面到页面导航的[`UIOutcomeTarget`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutcomeTarget.html)链接/按钮。换句话说，替换`<h:commandButton>`为`<h:button>`、`<h:commandLink>`和和。`<p:commandLink>``<h:link>``<p:commandButton>``<p:button>`

即不使用

```
<h:form>
    <p:commandButton value="Go to next page" action="nextpage" />
</h:form> 
```

而是使用

```
<p:button value="Go to next page" outcome="nextpage" /> 
```

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)

# c - C 函数实现 - 带指针与不带指针

> ID：12089478
> 
> 赞同：3
> 
> 时间：2012-08-23T10:17:57.163
> 
> 标签：c, pointers

我刚开始使用 C 语言，从来不用处理我以前使用的语言中的指针，所以我想知道如果只是修改一个字符串，哪种方法更好。

指针字符串与正常。

此外，如果您想提供有关何时使用指针的更多信息，那就太好了。当我发现“正常”函数甚至会修改传递的字符串，并在没有返回值的情况下在主函数中更新时，我感到很震惊。

```
#include <stdio.h>

void pointerstring(char *s);
void normal(char s[]);

int main() {
    char string[20];
    pointerstring(string);
    printf("\nPointer: %s\n",string);
    normal(string);
    printf("Normal: %s\n",string);
}

void pointerstring(char *s) {
    sprintf(s,"Hello");
}
void normal(char s[]) {
    sprintf(s,"World");
} 
```

输出：

```
Pointer: Hello
Normal: World 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T10:20:07.110

在函数声明中，`char []`和`char *`是等价的。具有外层数组类型的函数参数被转换为等效的指针类型；这会影响调用代码和函数体本身。

正因为如此，最好使用`char *`语法，否则您可能会感到困惑并尝试例如采用`sizeof`外层固定长度数组类型参数：

```
void foo(char s[10]) {
    printf("%z\n", sizeof(s));  // prints 4 (or 8), not 10
} 
```

当您将声明为指向函数的指针的参数传递（并且未声明指针参数`const`）时，您明确授予函数修改指针指向的对象或数组的权限。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T10:21:15.017

C 中的问题之一是数组是二等公民。在几乎所有有用的情况下，其中***当将它们传递给函数时，数组会衰减为指针***（从而丢失它们的大小信息）。

因此，将数组作为`T* arg`or没有区别`T arg[]`——***后者只是前者的同义词***。两者都是指向 中`string`定义的变量的第一个字符的指针`main()`，因此两者都可以访问原始数据并可以对其进行修改。

* * *

*注意：C 总是为每个副本*传递参数。在这种情况下也是如此。但是，当您传递一个指针（或衰减为指针的数组）时，复制的是*地址*，因此可以通过其地址的两个不同副本访问所引用的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T13:29:23.407

## 有指针 Vs 没有指针

1）我们可以直接将局部变量引用（地址）传递给新函数来处理和更新值，而不是将值发送给函数并从函数返回值。

带指针

```
...
int a = 10;
func(&a);
...

void func(int *x);
{
   //do something with the value *x(10)
   *x = 5;
} 
```

没有指针

```
...
int a = 10;
a = func(a);
...

int func(int x);
{
   //do something with the value x(10)
   x = 5;
   return x;
} 
```

2) 全局或静态变量具有生命周期作用域，而局部变量仅对函数具有作用域。如果我们想创建一个用户定义的范围变量意味着需要指针。这意味着，如果我们要创建一个应该在某些`n`函数中具有范围的变量，则在第一个函数中为该变量创建一个动态内存并将其传递给所有函数，最后在第 n 个函数中释放内存。

3）如果我们想将成员函数与成员变量一起保留在结构中，那么我们可以使用函数指针。

```
struct data;

struct data
{
    int no1, no2, ans;
    void (*pfAdd)(struct data*);
    void (*pfSub)(struct data*);    
    void (*pfMul)(struct data*);
    void (*pfDiv)(struct data*);
};

void add(struct data* x)
{
   x.ans = x.no1, x.no2;
}
...
struct data a;
a.no1 = 10;
a.no1 = 5;
a.pfAdd = add;
...
a.pfAdd(&a);
printf("Addition is %d\n", a.ans);
... 
```

4）考虑一个`data`尺寸`s`非常大的结构。如果我们想将此结构的变量发送到另一个函数，最好作为参考发送。因为这将减少为新函数创建的激活记录（堆栈中）大小。

使用指针 - 在函数的激活记录（堆栈中）中只需要 4 个字节（32 位 m/c）或 8 个字节（64 位 m/c）`func`

```
...
struct data a;
func(&a);
... 
```

没有指针 - 它需要`s`函数的激活记录（堆栈中）中的字节`func`。考虑到这`s`是`sizeof(struct data)`非常大的价值。

```
...
struct data a;
func(a);
... 
```

5) 我们可以用指针改变常量变量的值。

```
...
const int a = 10;
int *p = NULL;
p = (int *)&a;
*p = 5;
printf("%d", a); //This will print 5
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:55:13.000

除了其他答案之外，我对“字符串”操作函数（字符串 = 零终止字符数组）的评论：始终将字符串参数作为返回值返回。

所以你可以使用函数程序或函数，比如`printf("Dear %s, ", normal(buf));`

# vim - 关于默认命令超时的 Vim 行为

> ID：12089482
> 
> 赞同：4
> 
> 时间：2012-08-23T10:18:22.633
> 
> 标签：vim

我正在尝试取消映射`<C-w>o`，这是执行`:only`（`:help :only`）的默认命令，所以我尝试的第一件事是：

```
nmap <c-w>o <nop> 
```

这种工作，除非我按`<c-w>`，等待超过`timeoutlen`ms 然后按`o`，`:only`被调用。

我不明白为什么`<c-w>`-prefixed 和其他默认命令在 ms 之后不会超时`timeoutlen`，恕我直言，这是意料之外的。

以前我有定义自己映射的 ZoomWin 插件：`<c-w>o`有效地覆盖`:only`命令，我不明白为什么有时会`:only command`调用而不是 ZoomWin 插件，我意识到它在插件映射超时时被调用（在`timeoutlen`ms 之后）和然后我按下，改为`o`调用默认命令。`<c-w>o`

那么，是否可以像自定义映射一样使默认命令超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:58:06.333

您不应该考虑`<C-w>o`成为一个命令，而应该考虑`<C-w>`“启动窗口操作子模式”：像任何其他多键 vim 正常模式命令`<C-w>{smth}`（也`g*`, `z*`, `Z*`）不仅不受超时影响，`<C-w>%`( `<C-w>{any-key-not-mentioned-in-help}`) 不会做任何事情（可能它会发出哔声，但在我的系统上我看不到（使用“visualbell”）或听到哔声），没有切换到相应的括号（这是 的默认值`%`）。

您仍然可以通过以下方式`<C-w>o`重新映射来禁用：`<C-w>`

```
function s:CtrlW()
    let char=getchar()
    if type(char)==type(0) | let char=nr2char(char) | endif

    if char is# 'o'
        return ''
    endif
    return "\<C-w>".char
endfunction
nnoremap <expr> <C-w> <SID>CtrlW() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:14:12.207

我也不明白为什么内置命令不会在`'timeout'`;之后中止。我会发现这更一致，但到目前为止这并没有困扰我。

我想我找到了一种方法来实现你想要的，但这很麻烦。您必须中和 Ctrl-W 本身；Ctrl-\ Ctrl-N 类似于`<Esc>`，但没有哔声。当我使用 时`<Nop>`，后续命令不知何故无法工作，直到我在两者之间发出另一个命令。

```
:nnoremap <C-w> <C-\><C-n> 
```

但由于这也会禁用所有内置命令，因此您必须将它们映射到它们自己：

```
:nnoremap <C-w><C-w> <C-w><C-w>
:nnoremap <C-w>s     <C-w>s
... 
```

这可以通过循环自动执行（您想要映射到的 Ctrl-W o 除外`<Nop>`），但它仍然很难看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:48:03.627

你想`<C-w>o`什么都不做，还是想把它映射到别的东西上？

`<C-w>o`似乎对`<nop>`or不太敏感`:unmap`，所以看起来要让它消失也不是那么容易。不过，我很难找到一个正当的理由。由于反复的胖手指而摆脱命令*可能*是一个正当的理由（*“可能”*），但`<C-w>o`并不那么容易被意外击中，无论是否胖手指。

但是，您可以轻松地将其映射到其他内容，例如：

```
nnoremap <C-w>o o 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T12:54:08.103

默认命令不会超时，因为它们可能没有作为映射处理。在`'timeoutlen'`密钥未附加到任何映射之后，如下所述`:h ttimeout`：

```
'timeout'    'ttimeout'     action  ~
   off      off     do not time out
   on       on or off   time out on :mappings and key codes
   off      on      time out on key codes

If both options are off, Vim will wait until either the complete
mapping or key sequence has been received, or it is clear that there
is no mapping or key sequence for the received characters.  For
example: if you have mapped "vl" and Vim has received 'v', the next
character is needed to see if the 'v' is followed by an 'l'.
When one of the options is on, Vim will wait for about 1 second for
the next character to arrive.  After that the already received
characters are interpreted as single characters. 
```

所以上的键`<C-w>o`被解释为单个字符并触发默认命令。你可以考虑出发`'timeout'`和`'ttimeout'`。

# perl - Perl 睡眠被 SIGCHLD 终止

> ID：12089484
> 
> 赞同：3
> 
> 时间：2012-08-23T10:18:41.767
> 
> 标签：perl

```
#!/usr/bin/perl

use POSIX ":sys_wait_h";
$SIG{CHLD} = \&REAPER;

sub REAPER {
  my $pid;
  while (($pid = waitpid(-1, WNOHANG)) > 0) {
      print "where is here,$pid\n";
  }
}

sub child {
  print "I'm child, pid=$$.\n";
  sleep 2;
}

$lid = fork();
if ($lid == 0) {
    &child;
    exit;
} else {
    sleep 1000;
    print "I am parent, child pid : $lid\n";
} 
```

输出：

```
I'm child, pid=11839.
where is here,11839
I am parent, child pid : 11839 
```

以上是我的 Perl 脚本。输出是正确的，但奇怪的是它`I am parent, child pid : 11839`在最后一次输出之后立即打印。为什么没有`sleep 1000`任何效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T13:50:33.867

这被[记录在案](http://perldoc.perl.org/functions/sleep.html)：“如果进程收到信号，可能会被中断”。重点是允许信号处理程序运行。如果还没到醒来的时间，就回去睡觉吧。

```
use Time::HiRes qw( time sleep );  # Optional.

sub unint_sleep($) {
    my $sleep_til = time + $_[0];
    for (;;) {
        my $sleep_dur = time - $sleep_til;
        last if $sleep_dur <= 0;
        sleep($sleep_dur);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:35:58.437

Please *always* `use strict` and `use warnings`, and declare your symbols using `my` at their point of definition. This applies especially when you are asking for help, as these measures can reveal simple bugs that are otherwise easily overlooked

`sleep` is implemented by using `setitimer` to request a `SIGALRM` after a specified interval, and then `pause` to suspend the process until it gets the signal.

But if a `SIGCHLD` comes first this will also wake the process.

The signal mask cannot be set to prevent this as otherwise the `SIGCHLD` wouldn't get serviced

# android - 在Android中单击缩略图后如何显示全尺寸图像？

> ID：12089485
> 
> 赞同：6
> 
> 时间：2012-08-23T10:18:50.437
> 
> 标签：android

我有一个缩略图图像，当用户单击该图像时，
它将弹出（窗口或对话框？？）以显示大图像。
（窗口或对话框？？）的背景应该是透明的。
有教程吗？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-23T10:36:17.653

是的，您可以设置全屏对话框以显示如下图像

```
final Dialog nagDialog = new Dialog(backgroundsActivity.this,android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
            nagDialog.requestWindowFeature(Window.FEATURE_NO_TITLE); 
            nagDialog.setCancelable(false);
            nagDialog.setContentView(R.layout.preview_image);
            Button btnClose = (Button)nagDialog.findViewById(R.id.btnIvClose);
            ImageView ivPreview = (ImageView)nagDialog.findViewById(R.id.iv_preview_image);
            ivPreview.setBackgroundDrawable(dd);

            btnClose.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View arg0) {

                    nagDialog.dismiss();
                }
            });
            nagDialog.show(); 
```

**其中 preview_image 是 xml 仅包含 ImageView 和关闭按钮。**

这里用于全屏显示图像的 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:id="@+id/iv_preview_image" />

    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:background="@drawable/close"
        android:id="@+id/btnIvClose" android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:23:42.183

使用背景颜色透明、无标题主题和只有一个 ImageView 的自定义布局的对话框

# hibernate - Hibernate Set和排序问题

> ID：12089486
> 
> 赞同：1
> 
> 时间：2012-08-23T10:18:57.030
> 
> 标签：hibernate, hibernate-criteria, hibernate-annotations

在我的实体中，我目前有这样的映射：

```
private Set<Sth> sths; 
```

所以当我使用`criteria.addOrder(Order.asc(Sth.ID))`

然后休眠生成查询，`order by id asc`但集合中的元素未排序（我遍历它们以检查） - 我认为在这种情况下休眠将使用某种排序集实现（我不希望数据总是被排序）。

但是如果我使用..

```
@OrderBy(Sth.ID)
private Set<Sth> sths; 
```

Hibernate 将生成完全相同的 sql 查询，但这次对数据进行了排序。所以我的问题是 - 这是一个错误吗？我正在使用休眠 3.4。

使用 OrderBy 注释对我来说是可以接受的，但也许我不想总是按此属性进行排序，所以我宁愿在标准查询中给出排序指令，而不是在注释中。

有任何想法吗？它在更高版本的hibernate中是否以相同的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:50:43.760

阅读[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html#collections-sorted](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html#collections-sorted)

**甚至可以使用集合 filter() 在运行时按任意标准对关联进行排序：**

```
sortedUsers = s.createFilter( group.getUsers(), "order by this.name" ).list(); 
```

其中 group.getUsers() 是您的查询结果。

问候

# c# - Asp.net objectdatasource TypeName 属性错误

> ID：12089488
> 
> 赞同：2
> 
> 时间：2012-08-23T10:19:01.627
> 
> 标签：c#, asp.net, objectdatasource

我`ASP:ObjectDataSource`用于网格数据绑定。

我的问题是当我运行此代码时出现错误。

```
<asp:ObjectDataSource ID="odsListing" 
runat = "server"  
SelectMethod = "MethodNameOfCodeBehindClass"
TypeName = "FolderName_CodeBehindClassName" ></asp:ObjectDataSource> 
```

错误信息

```
The type specified in the TypeName property of 
ObjectDataSource 'odsListing' could not be found. 
```

所以我将我的代码移动到代码隐藏站点。

```
 #region ObjectDataSource for Grid Binding
    Type type = typeof(FolderName_CodeBehindClassName);
    string assemblyQualifiedName = type.AssemblyQualifiedName;

    odsListing.TypeName = assemblyQualifiedName;
    odsListing.SelectMethod = "ListingDatabind";
    #endregion 
```

现在一切正常。这是工作。但我想知道我的问题的实际解决方案。为什么会引发错误？

实际上，如果它可以在设计层编写，我不想将我的代码移动到代码隐藏层。

每一个建议都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:24:25.930

问题是您使用的是短类型名称而不是完整类型名称。

替换`FolderName_CodeBehindClassName`为`The.NameSpace.YouHaveYourTypeIn.FolderName_CodeBehindClassName, Name.Of.Your.Assembly`。

# blackberry - 直接从黑莓上的 NFC 标签打开foursquare 应用程序？

> ID：12089489
> 
> 赞同：1
> 
> 时间：2012-08-23T10:19:03.367
> 
> 标签：blackberry, foursquare, nfc

有没有人能够直接从 NFC 标签打开foursquare 应用程序？如果是，您会在标签上写入什么自定义 URL？

对于 android，一个简单的[http://m.foursquare.com/venue/VENUE_ID](http://m.foursquare.com/venue/VENUE_ID)就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T20:54:28.540

相同的 url 格式适用于 BlackBerry 设备。唯一可能不同的是 NFC 标签本身的格式。它需要是记录类型为“U”的 NDEF 标签。Android 应用程序还将读取该格式的标签。

# mysql - 将主键应用于mysql中的多个列

> ID：12089492
> 
> 赞同：0
> 
> 时间：2012-08-23T10:19:19.480
> 
> 标签：mysql, primary-key

我有 3 列：

```
-> person(varchar(50))
-> related_with(varchar(50))
-> relationship(varchar(50)) 
```

以上3个组合为主键

现在，例如，将值赋予 3 列：

```
person -> User
related_with -> User1
relationship -> Son of 
```

问题是，如果我将值添加为

```
person -> User1
related_with -> User
relationship -> Son of 
```

然后它被成功插入..但这不应该是这种情况，因为在这种情况下反之亦然

这个问题有解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:50:54.650

使 (person, related_with) 成为关键。像“兄弟”这样的相互关系是隐含的，因此您不一定需要两行来表示它们。现在您可以添加一个 CHECK 约束：

ALTER TABLE tbl ADD CONSTRAINT ck1 CHECK (person <related_with);

对于每种关系来说，这并不是一个完美的解决方案，但它确实减少了冗余量和潜在异常的数量，并且它以声明的方式执行规则，而不是作为触发器中的程序代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:29:08.193

大多数时候，应在应用程序代码级别进行此类验证。但是，如果您必须在数据库中执行此操作，请考虑编写[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。

这确实是一个复杂的逻辑和验证（在应用程序或触发器中）。可能有多种情况： 1\. 考虑一个`relationship -> friend of`. 这里相反的关系成立，不像`son of`。

1.  考虑一个`relationship -> brother of`. 在这种情况下，如果两个用户都是男性，则相反的关系是可能的，但如果用户是女性，则不是。同上`relationship -> sister of`。

因此，您需要仔细设计一种存储查找关系的方式，以及是否要加强逻辑或使用标志来识别关系类型。

# jquery - 如何使用 jquery 访问可见 =“false”的字段？

> ID：12089501
> 
> 赞同：1
> 
> 时间：2012-08-23T10:20:00.533
> 
> 标签：jquery, asp.net, css, selector

我有这个字段，可见=“false”我可以通过后端的cs页面访问它，但是如何使用jquery访问这个控件？我的小代码可能会有所帮助..

```
<tr>
  <td class="TDCaption" style="text-align: left">
    <asp:Label ID="lblMsg" runat="server" EnableViewState="False" ForeColor="#CC0000"></asp:Label>
    <div class="DivStyleWithScroll" style="width: 100%; overflow: scroll; height: 250px;">
      <asp:GridView ID="grdReport" runat="server" AutoGenerateColumns="False"
      DataKeyNames="CustCode" ShowFooter="True" EmptyDataText="No record found"
      PageSize="50" CssClass="mGrid" onrowdatabound="grdReport_RowDataBound">
        <Columns>
          <asp:TemplateField Visible="false">
              <ItemTemplate>
                  <asp:Label ID="lblCustCodes" runat="server" Text='<%# Eval("CustCode") %>' CssClass="grdCustName"></asp:Label>
              </ItemTemplate>
          </asp:TemplateField>
          <%--other columns--%> 
```

jQuery是

```
 $('#<%=btnCompare.ClientID%>').click(function () {
            if ($(':checkbox:checked').size() == 0) {
            }
            else {
                custList = $(':checkbox:checked').map(function () { return $(this).closest('tr').find('.grdCustName').text() }).get();
                alert(custList);
            }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:26:30.617

我相信设置`.Visible = false`会阻止控件被呈现到 HTML 中，因此 jQuery 将无法找到它。

相反，对于代码隐藏，请尝试使用...

```
ctrl.Style("display") = "none" 
```

或者在标记上，尝试在控件上使用以下属性...

```
style="display:none" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:27:42.307

如果 Visible 为 false，则控件不会传递到客户端，因此您不能直接从 javascript/jquery 访问它：它根本不存在。您可以将控件的值放入其中`hidden field`，然后可以访问它。因为它们在前端永远不可见。`Hiddenfields`仅在`HTML`源中可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T11:15:32.600

`Label.ForeColor = System.Drawing.Color.Transparent`在后面的代码中

然后将标签设置`Visible`为`true`

# java - MSSQL：未知的事务隔离级别

> ID：12089503
> 
> 赞同：2
> 
> 时间：2012-08-23T10:20:04.067
> 
> 标签：java, sql-server, spring, websphere, ibatis

我有一些 Java 代码似乎对 DB2/Oracle 运行良好，但在 SQL Server 上会导致表被锁定。

TXN 建议是 READ_UNCOMMITTED

```
 <tx:method name="*"
             read-only="false"
             rollback-for="Exception"
             isolation="READ_UNCOMMITTED"/> 
```

数据源的 websphere 默认事务隔离级别是 (webSphereDefaultIsolationLevel) 设置为 1 (READ UNCOMMITTED)

但是石英作业被启动（满足 tx 建议的切入点建议），这会导致表被锁定，如下面的报告所示......

所以我有两个问题...

1：为什么桌子被锁住了？（在服务器外部尝试“select * OWB_AUDIT”证明其已锁定）

2：下面报告中“未知”的“隔离级别”是什么意思？

任何人都可以对此有所了解吗？

谢谢杰夫

![SQL Server Studio 报告](../Images/c871d43d26f5d520b929029f2d71cd28.png)

# php - PHP 函数调用处理程序

> ID：12089509
> 
> 赞同：0
> 
> 时间：2012-08-23T10:20:35.470
> 
> 标签：php, function

php中有什么函数处理程序吗？就像我在 PHP 中调用任何函数一样。函数处理程序自动调用。

```
function add($i ,$j){
    $k = $i+$j;
    return $k;
} 
```

因此，如果有人调用上述函数，函数处理程序会自动执行。就像我们在 PHP 中有其他函数 session save_handler 或 error_handler 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:23:57.523

不，没有。您应该改用委托

```
function otherFunction ($i, $k) {
  foobar();
  return add($i, $j);
} 
```

使用面向对象的设计，您还可以包装整个对象

```
class A {
  public function add($i, $j) { return $i + $j; }
}
class B extends A {
  public function add($i, $j) { $this->foobar(); return parent::add($i, $j);
  protected foobar() { /* do something useful */ }
}
// or
class C extends A {
  protected $_inner;
  public function __construct (A $inner) { $this->_inner = $inner; 0
  public function add($i, $j) { $this->foobar(); return $this->_inner->add($i, $j); }
  protected foobar() { /* do something useful */ }
} 
```

或匿名函数，如

```
$add = function ($i, $j) {
  foobar();
  return add($i, $j);
};
$add(3, 7); 
```

# c++ - C/C++ 中的实数模运算符？

> ID：12089514
> 
> 赞同：4
> 
> 时间：2012-08-23T10:20:44.573
> 
> 标签：c++, c, modulo

> **可能重复：**
> [如何在处理负数的 C/C++/Obj-C 中编写模 (%) 运算符](https://stackoverflow.com/questions/4003232/how-to-code-a-modulo-operator-in-c-c-obj-c-that-handles-negative-numbers)

据我了解（请参阅[具有负值的模运算符](https://stackoverflow.com/questions/7594508/modulo-operator-with-negative-values)和[模运算](https://en.wikipedia.org/wiki/Modulo_operation)）C 和 C++ 有一个“余数”运算`a % b`符，但当 LHS 为负数时没有实际执行模运算的运算符。

几种语言确实具有这样的功能。是否可以在 C/C++ 中构建一个高效的函数（或者在 i686/x64 CPU 上没有有效的方法）？

目前我使用`(n * b + a) % b`where `n`is pick 这样我就可以确定整个 LHS 是非负数，但不可避免地会更改代码并且有时会出现错误。

注意：如果不清楚，模算术是指一个运算符，`a + b % b = a % b`对于所有整数`a`和所有正整数`b`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T10:29:19.873

没有简单的方法可以做到这一点，但是如果您创建一个两行解决方案，并节省乘法和确定，它会更有效`n`。

```
inline int modulo(int a, int b) {
  const int result = a % b;
  return result >= 0 ? result : result + b;
} 
```

此外，如果您还需要正确处理负数`b`，请添加到开头：

```
 if(b < 0) return modulo(-a, -b); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T10:32:59.207

我建议使用与上述类似的函数，但使用`inline int modulo(int a, int b) {}`（就像该运算符存在于 C++ 中一样）。就个人而言，我不经常使用负数，并且仍然认为`%`只要代码不使用负数就应该保留。

# cassandra - 在 cassandra 宽行中存储和删除

> ID：12089518
> 
> 赞同：0
> 
> 时间：2012-08-23T10:21:17.390
> 
> 标签：cassandra

我正在将 cassandra 用于博客应用程序。我的列族之一是用于存储用户的所有关注者 - UserFollowers。其中每一行是一个用户，列是由 firstname+lastname+uuid 组成的关注者的排序键。复合键是这样我可以搜索关注者的范围并为他们提供分页服务。

示例 - 用户 A 的关注者如下所示：

一个 | 约翰：2f432t3 | 山姆：f242fg | 乔：f24gf24

到目前为止一切都很好。当我添加一个追随者时，他会落入他的分类位置，我可以随意搜索和检索。但现在山姆决定不再做追随者，我需要删除他。此外 - 就在此之前，sam 将他的名字改为 samuel，所以我现在发送的删除消息是 samuel:f242fg。将找不到该值，并且 sam:f242fg 列将保留。

我现在唯一的解决方案是，当我想删除时，我必须拉出整行。仅通过他的 id 找到 sam。获取最初存储的密钥并将其删除。对于有很多追随者的人来说效率非常低，并且依赖于这些类型的移除不会发生很多。

有什么更好的策略吗？

谢谢或

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:42:54.290

我建议如下：

1.  将 UserFollowers 上的密钥更改为代表用户的 ID。
2.  添加包含该用户名称的“名称”列。
3.  与其存储关注者的姓名，不如存储他们的 ID。

所以你的数据现在看起来像这样：

```
f1341df | name: george | 2f432t3 | f242fg | f24gf24
2f432t3 | name: john | f242fg | f1341df

... etc 
```

现在，您可以通过首先查询用户并获取 ID 列表来获取关注者姓名列表，然后在单个查询中使用所有这些键进行多次获取。如果用户更改了他们的名字，这不会破坏您的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:55:40.417

好的，我想我找到了一种更有效的方法。它需要更多的工作应用程序端，但它可以工作并允许删除，无论对源进行更改。

只是为了再次定义问题：

1.  我们有 2 个相互引用的实体。示例 - 用户和其他用户。用户关注其他用户，其他用户被用户关注。
2.  我们想要水平存储相关实体。所以我们有一个 CF UserFollowers，它在每一行中存储用户的所有关注者。
3.  我们还有逆向 CF UserFollowing 来存储该用户关注的所有用户。
4.  我们实际存储的是每个关注或关注用户的列，其中名称是由 firstname:lastname:uuid 组成的键，值是用户的紧凑 json。
5.  现在，通过对名称进行范围查询，获得关注者或关注用户已经很容易了。
6.  然而，从任一列表中删除用户更加棘手，因为我们需要使用存储的原始密钥发送删除消息。

示例：如果 sam:jones:safg8sdfg 跟随 abe:maxwell:fh2497h9 我们将拥有 -

```
in UserFollowers: fh2497h9 | sam:jones:safg8sdfg<json for sam>
and in UserFollowing: safg8sdfg | abe:maxwell:fh2497h9<json for abe> 
```

如果 sam 将他的名字更改为 sammy 并尝试取消关注 abe，它将不起作用，因为当实际存储的列是 sam:jones:safg8sdfg 时，删除消息现在将尝试删除 UserFollowers 中名为 sammy:jones:safg8sdfg 的列。

所以我对此的解决方案是在每一侧存储一个带有存储 json 的 reverseKey，以便每一侧都知道在另一侧实际存储了什么密钥，并可以使用它从那里删除自己。

它看起来像：

```
in UserFollowers: fh2497h9 | sam:jones:safg8sdfg<json for sam.. reversKey:abe:maxwell:fh2497h9>
and in UserFollowing: safg8sdfg | abe:maxwell:fh2497h9<json for abe..reverseKey:sam:jones:safg8sdfg> 
```

现在当 sam 想要从他的追随者中删除 abe 时，他可以使用 reverseKey:sam:jones:safg8sdfg 将自己从 abes 追随者列表中删除。

每个人都很高兴。

# yii - Yii 高级和内联搜索通过别名

> ID：12089523
> 
> 赞同：1
> 
> 时间：2012-08-23T10:21:43.997
> 
> 标签：yii

我有几个具有关系的模型，我想做的是使用我在 DetailView 中提供的别名搜索字段。看起来像这样

```
<?php $this->widget('bootstrap.widgets.BootGridView',array(
    'id'=>'operations-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'operationType.name:raw:Operation',
        'creation_date:datetime',
        'modification_date:datetime',
        'ammount_usd:raw:Ammount',
        'currency.short',
        /*

        'client_id',
        'organization_id',
        */
        array(
            'class'=>'bootstrap.widgets.BootButtonColumn',
        ),
    ),
)); ?> 
```

我想要的是能够使用列的别名搜索行，例如`currency.short`. 这样做的正确方法是什么？试图修改这样的`search()`方法..但我想我错过了一些东西。

```
public function search()
{
    // Warning: Please modify the following code to remove attributes that
    // should not be searched.

    $criteria=new CDbCriteria;

    $criteria->compare('creation_date',$this->creation_date,true);
    $criteria->compare('modification_date',$this->modification_date,true);
    $criteria->compare('ammount',$this->ammount,true);
    $criteria->compare('ammount_usd',$this->ammount_usd,true);
    $criteria->compare('currency_id',$this->currency_id);
    $criteria->compare('operation_type',operationType::model()->name);
    $criteria->compare('client_id',$this->client_id);
    $criteria->compare('organization_id',$this->organization_id);
$criteria->compare('comment',$this->comment);
    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:52:23.733

您必须为该属性创建一个虚拟字段。例如在您的主模型中：

```
private _currencyshort = null;
public function setCurrencyshort($value) {
    $this->_currencyshort = $value;
}
public function getCurrencyshort() {
    if ($this->_currencyshort === null && $this->currency != null)
    {
        $this->_currencyshort = $this->currency->short
    }
    return $this->_currencyshort;
}
public function search() {
    $criteria=new CDbCriteria;
    $criteria->with = array('currency'); // add more elements to array if you want to search by more relations
    $criteria->compare('currency.short',$this->currencyshort);
    // You can also add this field to your sorting criteria
    // ... etc
} 
```

此外，您还必须将主模型`currencyshort`的方法添加到它声明的行中，例如：`rules()``'on'=>'search'`

```
array('currencyshort', 'safe', 'on'=>'search'), 
```

然后`columns`代替`currency.short`您可以放入`currencyshort`，它将与过滤器，排序等一起使用。

# excel - 将日期与 GetPivotData 一起使用

> ID：12089525
> 
> 赞同：4
> 
> 时间：2012-08-23T10:21:44.870
> 
> 标签：excel, pivot-table

我有一个数据透视表，我试图使用日期作为查找的一部分来引用它。数据透视表数据可以按天、周或月分组（有一个小 VBA 可以控制这一点）但是，我似乎无法创建一个适用于所有三个分组的 GETPIVOTDATA 函数。- 按天分组时，GETPIVOTDATA 似乎想要一年中的某一天（1-365），它不会接受日期。

```
    =GETTPIVOTDATA（值，pt，“日期”，184）
```

*   按周分组时，它将接受一个日期并返回该日期所在的周

```
    =GETTPIVOTDATA(值, pt, "日期", Date(2012, 08, 22))
```

*   按月份分组时，似乎想要一年中的月份（1-12）

```
    =GETTPIVOTDATA（值，pt，“日期”，11）
```

无论如何都要使用所有三个分组的日期吗？请记住，分组会改变，但公式不会改变，因此相同的公式必须适用于任何分组。

每当我更改分组时，替代方法是使用 IF 语句和日期操作或使用 VBA。但是，我觉得应该是一种只使用日期的方法，而不管分组如何。

# jquery - jQuery - Datepicker - defaultDate 的值有问题

> ID：12089526
> 
> 赞同：0
> 
> 时间：2012-08-23T10:22:00.010
> 
> 标签：jquery, datepicker

我试图找出为什么 defaultDate 问题，但我被困住了。

我有这个例如：

```
<tr>
    <td><input type="text" value="12/03/2012" id="8798044_date"></td>
    <td><font class="red">-39 999,60 €&lt;/font></td>
    <td>
        <input type="text" id="8798044" class="date_twr">
    </td>
</tr> 
```

这是可以工作的JS代码：

```
jQuery('.date_twr').datepicker({
    'changeMonth':true,
    'changeYear':true,
    'dateFormat': 'dd/mm/yy',
    'defaultDate': jQuery('#8798044_date').val()
}); 
```

问题是我不想使用 id，它被放在我的测试中。我宁愿通过“操纵”来搜索

```
jQuery('.date_twr').datepicker({
    'changeMonth':true,
    'changeYear':true,
    'dateFormat': 'dd/mm/yy',
    'defaultDate': jQuery(this).parent().prev().prev().find('input').val()
}); 
```

使用这个类的点击，我知道我想要的值是正确的：

```
jQuery('.date_twr').click({
    console.log(jQuery(this).parent().prev().prev().find('input').val())
}); 
```

但是搜索默认处理不起作用。我搜索了一下，但我不明白为什么它不起作用。我猜 datepicker 元素是一种特殊行为，突然 jQuery(this) 不是预期的。

欢迎提供一点帮助:)

先感谢您

PS：我使用 jQuery() 而不是 $()，因为我正在开发的网站上有几个 JS 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:34:00.383

你是对的，在日期选择器的上下文中，jQuery(this) 似乎是指文档根目录。这将 HTML 演示为它的子元素。

```
jQuery('.date_twr').datepicker({
    'appendText': jQuery(this).children().first().prop('tagName')
}); 
```

奇怪的是，在每个循环中执行它似乎有效

```
jQuery('.date_twr').each(function() {
    jQuery(this).datepicker({
        'changeMonth':true,
        'changeYear':true,
        'dateFormat': 'dd/mm/yy',
        'defaultDate': jQuery(this).parent().prev().prev().find('input').val()
    });
}); 
```

编辑：这会提取正确的值，但 datepicker 似乎解析它们不正确，你会得到一些奇怪的结果。这会强制以正确的格式解析日期并将日期对象传递给日期选择器：

```
jQuery('.date_twr').each(function() {
    var dt = jQuery.datepicker.parseDate('dd/mm/yy', jQuery(this).parent().prev().prev().find('input').val());
    jQuery(this).datepicker({
        'changeMonth': true,
        'changeYear': true,
        'dateFormat': 'dd/mm/yy',
        'defaultDate': dt
    });
}); 
```

# javascript - JQUERY / JAVASCRIPT - 需要从中获取价值在使用 JavaScript 代码的 jquery 对话框上我有一个基于 JQUERY 的对话框，上面有一个“选择”。当我单击按钮时，我需要获取选择选项值。这是我的 JavaScript 代码： $( "#dialog-select" ).dialog({ resizable: true, height:250, width:450, modal: true, buttons: { "Ok": function() { var p

> ID：12089532
> 
> 赞同：2
> 
> 时间：2012-08-23T10:22:25.567
> 
> 标签：javascript, jquery, html, jquery-dialog

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:28:10.340

用于所选选项`$("#element").val()`的**值**或`$("#element option:selected").text()`用于获取所选选项的**名称/文本**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:35:50.453

Since (on your page, given that specific html) you can only identify the select by its `Name` (without having to traverse the DOM), the quickest solution is:

```
 var selectedvalue =    $('select[name="priority"]').val(); 
```

I would suggest adding an ID to the dropdownlist, it will be a more efficient search. But hardly noticeable unless your page is huge, so it's more a ""good practice principle".

**Please note:** I used ' for the jQuery selector string, and " for the name value within the selector. You could use them the other way around, but they *will have to be different*.

# c - 如何始终使用 RSA_generate_key 生成不同的公钥

> ID：12089536
> 
> 赞同：0
> 
> 时间：2012-08-23T10:22:45.537
> 
> 标签：c, unix, openssl, rsa

我在使用`RSA_generate_key`. 该方法在两个不同的 C 源中生成相同的公钥。因此，这两个源是应用程序的客户端和服务器，在`localhost`. 每次调用 RSA_generate_key 时如何生成不同的对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:33:10.093

来自 RSA_generatey 密钥手册：

> 伪随机数生成器必须在调用 RSA_generate_key() 之前播种。

您需要使用启动种子调用 RAND_add，如果在 linux 中，如果您可以等待足够的熵，则可以从 /dev/random 读取种子，如果需要快速响应，则可以从 /dev/urandom 读取种子。

您可以在这里了解更多信息： [http ://research.swtch.com/openssl](http://research.swtch.com/openssl)

# c# - 通过后台代码设置 DataGridTextColumn.ElementStyle

> ID：12089541
> 
> 赞同：4
> 
> 时间：2012-08-23T10:23:04.067
> 
> 标签：c#, wpf, xaml, datagrid

我的用户界面中有一个数据网格。数据表将绑定到它。因为数据表可能有不同的格式，所以我在后面的代码中为网格添加列和绑定值。见下文：

```
for (int iLoop = 0; iLoop < dtGroup.Columns.Count; iLoop++)
{
    DataGridTextColumn dgColumn = new DataGridTextColumn();
    dgColumn.Header = dtGroup.Columns[iLoop].ColumnName;
    dgColumn.Binding = new Binding(dtGroup.Columns[iLoop].ColumnName);

    this.dgGroupMatrix.Columns.Add(dgColumn);
} 
```

我想要的是让网格单元的背景颜色基于值。

我可以通过 XAML 做到这一点。

```
<DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding Path= operation_name}" Header="operation_name">
        <DataGridTextColumn.ElementStyle>
            <Style TargetType="{x:Type TextBlock}">
                <Style.Triggers>
                    <Trigger Property="Text" Value="V31">
                        <Setter Property="Background" Value="LightGreen"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </DataGridTextColumn.ElementStyle>
    </DataGridTextColumn>
</DataGrid.Columns> 
```

但是我不能在 XAML 中设置网格的列，因为这个网格会有不同的格式。

我能做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:31:46.817

只需在代码中做同样的事情：

```
for (int iLoop = 0; iLoop < dtGroup.Columns.Count; iLoop++)
{
    DataGridTextColumn dgColumn = new DataGridTextColumn();
    dgColumn.Header = dtGroup.Columns[iLoop].ColumnName;
    dgColumn.Binding = new Binding(dtGroup.Columns[iLoop].ColumnName);

    Style columnStyle = new Style(typeof(TextBlock));
    Trigger backgroundColorTrigger = new Trigger();
    backgroundColorTrigger.Property = TextBlock.TextProperty;
    backgroundColorTrigger.Value = "V31";
    backgroundColorTrigger.Setters.Add(
        new Setter(
            TextBlock.BackgroundProperty,
            new SolidColorBrush(Colors.LightGreen)));
    columnStyle.Triggers.Add(backgroundColorTrigger);
    dgColumn.ElementStyle = columnStyle;

    this.dgGroupMatrix.Columns.Add(dgColumn);
} 
```

# iphone - uitableview 使应用程序崩溃

> ID：12089545
> 
> 赞同：0
> 
> 时间：2012-08-23T10:23:16.633
> 
> 标签：iphone, objective-c, uitableview

你在那里

我有一个大问题。最近我正在制作一个促销应用程序。我的应用程序的核心是导航控制器。当我按下标签栏时，它会在该视图中打开一个新视图，有一个按钮可以打开一个表格视图。到现在为止还挺好。一切正常。除非我将表格视图更改为分组和静态单元格（我真的需要那个），否则程序仍然可以工作，除非我进入表格视图并按下选项卡栏查看另一个视图，然后按下选项卡栏查看此视图​​它'会使应用程序崩溃。但是，如果我从表格视图返回，它会正常工作。我没有编写与桌子有关的事情。

这是我的按钮代码：

```
Class *detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"map"];
    [self.navigationController pushViewController:detailViewController animated:YES]; 
```

然后打开分组的uitableview。UITableViewController 类是空的，因为它有静态单元格。

这是应用程序崩溃时的错误：

> 0x14f209b: movl 8(%edx), %edi

当我选择 tableview 样式 Plain 时，它可以工作。当我选择 tableview 样式 Grouped 它崩溃应用程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:42:11.250

即使您没有任何代码，您也需要添加 UITableViewDelegate

[http://vimeo.com/1014998](http://vimeo.com/1014998)

本教程视频应该会有所帮助。

# c++ - 'std::ios_base::ios_base(const std::ios_base&)' 是私有的'错误，同时为 std::ostram 重载 operator<<

> ID：12089547
> 
> 赞同：6
> 
> 时间：2012-08-23T10:23:23.217
> 
> 标签：c++, iostream, ostream

我有一个看起来像这样的结构：

```
sturct person
{
    string surname;
    person(string n) : surname(n) {};
} 
```

我需要`operator<<`为`std::ostream`and重载`person`。我写了这个函数：

```
std::ostream operator<<(std::ostream & s, person & os)
{
    s << os.surname;
    return s;
} 
```

但我收到此错误：

> /usr/include/c++/4.6/bits/ios_base.h|788|错误：'std::ios_base::ios_base(const std::ios_base&)' 是私有的|
> 
> /usr/include/c++/4.6/bits/basic_ios.h|64|error：在此上下文中
> 
> /usr/include/c++/4.6/ostream|57|注意：这里首先需要综合方法'std::basic_ios::basic_ios(const std::basic_ios&)' |

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-23T10:28:03.447

`std::ostream`不是可复制构造的，当您按值返回时，您就是在复制构造。尽管[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)意味着实际上可能不会进行复制，但编译器仍然要求可以进行复制。

此运算符的规范返回值是非常量引用：

```
std::ostream& operator<<(std::ostream& o, const SomeType& t); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T10:25:03.743

通过引用返回：

```
std::ostream& operator<<(...)
          //^ 
```

否则将尝试复制`s`，并且`ostream`s 是不可复制的（错误消息说明尝试访问`private`复制构造函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T10:25:03.230

您忘记了返回类型中的引用：

```
std::ostream &operator<<(std::ostream & s, person & os)
{
    return s << os.surname;
} 
```

# ios5 - 关于 UIViews 委托

> ID：12089548
> 
> 赞同：0
> 
> 时间：2012-08-23T10:23:23.840
> 
> 标签：ios5, uiview, uiviewcontroller, delegates

我的问题很简单，但无法在互联网上找到一个简单的例子。我有一个带有按钮的主视图控制器，当我单击一个按钮时，我想显示一个使用 IB 创建的 UIView，例如：

-ViewController (.h/.m/.xib) 是我的主界面，带有一个菜单按钮

-MenuView (.h/.m/.xib) 是我希望在我的 uiviewcontroller 上显示为弹出窗口的视图。

那么如何从我的 viewController 控制我的 MenuView 呢？是否可以使用 IB 创建它，还是以编程方式创建它更好？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:40:25.983

我不知道只有使用界面生成器才能做到这一点，但 IB 可以帮助你。我将创建另一个视图控制器，其中包含您要显示的视图。在您已经存在的视图控制器上，您可以创建一个方法，即：

```
- (void) show: (id) sender {
    UIViewController *theNewController = [TheNewController alloc] initWithNibName: @"TheNewController" bundle:[NSBundle mainBundle]];
    [self presentViewController:theNewController animated:YES completion:nil];
} 
```

并使用 IB 将此方法链接到按钮操作。（右键单击 IB 中的按钮，选择事件，即 Touch Down，拖放到文件所有者）。但我建议您也查看视图控制器的苹果文档：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

# c# - 控制台应用程序到服务 - 我需要注意什么吗？

> ID：12089549
> 
> 赞同：1
> 
> 时间：2012-08-23T10:23:30.670
> 
> 标签：c#, .net, service, timer

我正在编写一个控制台应用程序，该应用程序在白天以不同的时间间隔读写一些东西。我以后想要这个（如果它是“最终的”）作为服务。现在，一个简单的控制台应用程序更好（这就是我的想法），因为它更易于使用，而且我无需注册/启动/结束服务就可以看到结果。如果我完成了测试，那么以后是否容易创建一个新的服务项目并从控制台应用程序复制代码？

我现在听说我们不应该`Timer`在服务中使用。但我`System.Threading.Timer`在我的控制台应用程序中使用了很多。这是否意味着我会遇到麻烦？这是*“在控制台应用程序上测试然后在服务上使用它”*不是一个好主意吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:30:57.123

您可以创建 Windows 服务并右键单击-> 属性并将输出类型更改为控制台应用程序进行开发。一旦您完成了开发更改回输出类型为 Windows 应用程序。

查看此[链接](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)以深入了解这两个计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:56:23.803

一个很好的解决方案 - 是尝试[应用即服务](http://www.application-as-service.com/)软件

您可以将每个应用程序作为服务启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:27:20.407

问题`System.Threading.Timer`在于没有简单的方法来启动/停止计时器。正因为如此，你不能真正将它用于可能需要比计时器间隔更长的任务。

改为`System.Timers.Timer`：

[http://netpl.blogspot.com/2010/05/systemwindowsformstimer-vs.html](http://netpl.blogspot.com/2010/05/systemwindowsformstimer-vs.html)

# mysql - mysql：如何删除然后插入某种类型的所有记录？

> ID：12089551
> 
> 赞同：0
> 
> 时间：2012-08-23T10:23:41.610
> 
> 标签：mysql, sql

情况如下：

*   我有一个主**管理员**，其`id`, 在表中`person`是`478`.
*   这个管理员应该在表中处理合作伙伴`partners`。
*   有一个“加入”他们的表：`person_partners`。

有时，有些人添加了新的合作伙伴，我想运行一个查询：

*   任何一个：
    *   删除*此*管理员和合作伙伴之间的所有链接，某种`DELETE * FROM person_partners where id_person=478`
    *   重新插入*此*管理员和合作伙伴之间的所有链接（= 也将插入新的合作伙伴），某种`INSERT INTO person_partners (id_person,id_partner) VALUES (478, SELECT id FROM partners)`（但是这个查询给了我这个错误`ERROR 1242 (21000): Subquery returns more than 1 row`：）
*   或者简单地插入所有尚未加入的合作`person_partners`伙伴`id_person=478`

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:40:09.470

就像 BugFinder 说的，“你似乎对这个问题有自己的答案”

要修复 ERROR 1242，您必须这样编写：

```
INSERT INTO person_partners (id_person,id_partner) 
SELECT '478', id FROM partners; 
```

或者“简单地插入所有尚未在 person_partners 中的合作伙伴 id_person=478”，您可以

```
INSERT IGNORE INTO person_partners (id_person,id_partner) 
SELECT '478', id FROM partners; 
```

[在此处](http://dev.mysql.com/doc/refman/5.1/en/insert.html)阅读更多相关信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:43:30.787

```
INSERT INTO person_partners (id_person,id_partner) SELECT 478, ID FROM partners
ON DUPLICATE KEY UPDATE id_person=478; 
```

# java - db 计算是否值得并行化？

> ID：12089555
> 
> 赞同：1
> 
> 时间：2012-08-23T10:23:51.023
> 
> 标签：java, parallel-processing, db2

我使用 DB2 9.7.5 64 位。服务器有足够的内存但没有集群。

我需要进行大量计算：在我的数据库中计算几个（大约 20 个）比率。其中一些可能需要长达 25 秒的时间。

结果存储在结果表中。

现在我有几个解决方案（作为一项政策，我们排除了存储过程）。

我从 java 客户端一次调用每个比率，或者在多线程 java 客户端中调用多个比率。

我的假设是从多线程调用是没有用的，因为我的数据库是瓶颈。但我不完全确定 db 引擎是否真的为 1 次查询提供了 100% 的 cpu。我认为引擎可能必须能够在多个查询之间共享其 cpu 能力。

我目前正在阅读 IBM Data 手册，但希望获得您的反馈。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:05:27.150

看看[具体化查询表](http://www.ibm.com/developerworks/data/library/techarticle/dm-0509melnyk/)。如果您正在处理的是报告，尤其是不需要绝对最新的信息，您可以设置 MQT，其中包含计算繁重的部分，例如每小时版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:05:02.537

> 我需要进行大量计算：在我的数据库中计算几个（大约 20 个）比率。其中一些可能需要长达 25 秒的时间。

25秒不一定是坏事。也许这是一个很好的结果，取决于你计算什么

> 现在我有几个解决方案（作为一项政策，我们排除了存储过程）。

存储过程不是邪恶的，你只需要知道如何安全使用它们

> 我的假设是从多线程调用是没有用的，因为我的数据库是瓶颈。但我不完全确定 db 引擎是否真的为 1 次查询提供了 100% 的 cpu。我认为引擎可能必须能够在多个查询之间共享其 cpu 能力。

java中的多线程永远不会让人心（只要您保持线程安全），在您进行大量计算时特别有用。我不使用 db2，所以我不知道它在多线程方面有多好，但如果它是单线程的，我怀疑它是否会达到 100% 的 cpu 使用率。您应该检查一下您的 db2 的 conf 文件以稍微调整一下它还阅读有关[IBM DB2 集群的文章](http://publib.boulder.ibm.com/infocenter/iisinfsv/v8r5/index.jsp?topic=/com.ibm.swg.im.iis.productization.iisinfsv.ha.install.doc/topics/wsisinst_pln_ha_xmeta_db2cluster.html)

我还建议使用[数据仓库](http://en.wikipedia.org/wiki/Data_warehouse)工具来针对 db2 分析您的脚本性能

祝你好运

# paypal - 如何在 payflow pro 中使用 Paypal API

> ID：12089557
> 
> 赞同：0
> 
> 时间：2012-08-23T10:23:56.837
> 
> 标签：paypal

我有一个使用 PayPal 和快速结帐运行顺畅的网站。现在我的客户想要一个参考交易（当他通过手机等订购时直接从客户那里收费，而不涉及他）。他让我为此使用 payflow pro，但我真的很困惑如何将 payflow pro 与 paypal API 一起使用。请指导我。我已经阅读了他们的支付流指南 PDF，但没有从那里得到任何想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T23:23:57.277

Payflow Pro 是一组完全不同的 API 调用，与 PayPal 不同。
如果您的客户已经与 PayPal Express Checkout 集成，他是否确定要使用 Payflow Pro API？
如果您只想做一个参考交易，您只需将“L_BILLINGTYPE0=MerchantInitiatedBilling”添加到您的初始 SetExpressCheckout API 调用并调用 DoReferenceTransaction API 调用来创建此参考交易。

# sql-server-2008 - xQuery，使用命名空间获取值？

> ID：12089558
> 
> 赞同：0
> 
> 时间：2012-08-23T10:23:56.970
> 
> 标签：sql-server-2008, tsql, xquery

我只是从 xquery 开始，目前我不知道，为什么以下不起作用。我创建了两个 XML 文件，它们是相同的，除了一个有命名空间而另一个没有：

```
<Envelope>
    <Header>
        <JustAValue>12345</JustAValue>
    </Header>
    <Body>
        <someBody>
            <ValueIWant>12345678910</ValueIWant>
        </someBody>
    </Body>
</Envelope>

<env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'>
    <env:Header xmlns:wsa='http://www.w3.org/2005/08/addressing'>
        <JustAValue>12345</JustAValue>
    </env:Header>
    <env:Body xmlns:wsu='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd' wsu:Id='element-28-1344266615792-223644235'>
        <ns1:someBody xmlns='http://someURL.com' xmlns:ns1='http://someURL.com'>
            <ValueIWant>12345678910</ValueIWant>
        </ns1:someBody>
    </env:Body>
</env:Envelope> 
```

两个 xml 文件都位于数据库的 xml 字段中。

现在我尝试获得“ValueIWant”，我这样做：

```
DECLARE @xml xml

Select @xml = completexml from MyDB.dbo.Xml where PKxml = 3 -- XML without namespaces

declare @somevalue nvarchar(max)

set @somevalue = @xml.value('(/Envelope/Body/someBody/ValueIWant/text())[1]', 'nvarchar(max)');

select @somevalue -- -> 12345678910

Select @xml = completexml from MyDB.dbo.Xml where PKxml = 2 -- XML with namespaces

set @somevalue = @xml.value('
declare namespace env="http://schemas.xmlsoap.org/soap/envelope/"; 
declare namespace ns1="http://someURL.com"; 
(/env:Envelope/env:Body/ns1:someBody/ValueIWant/text())[1]', 'nvarchar(max)');

select @somevalue -- -> NULL 
```

**我在这里做错了什么？**

我玩过一些 XML：

```
<env:Envelope xmlns:env='http://schemas.xmlsoap.org/soap/envelope/'>
    <env:Header xmlns:wsa='http://www.w3.org/2005/08/addressing'>
        <JustAValue>12345</JustAValue>
    </env:Header>
    <env:Body xmlns:wsu='http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd' wsu:Id='element-28-1344266615792-223644235'>
        <ns1:someBody xmlns='http://someURL.com' xmlns:ns1='http://someURL.com'>
            <ValueIWant>12345678910</ValueIWant>
        </ns1:someBody>
        <BodyValue>BodyValue</BodyValue>
        <env:BodyValue>BodyValue</env:BodyValue>
    </env:Body>
    <env:TestValue1>TestValue</env:TestValue1>
    <TestValue2>TestValue2</TestValue2>
</env:Envelope> 
```

我可以获得所有值：BodyValue、TestValue1 和 TestValue2。完全没问题，但只要我想更改为 ns1 命名空间并获取 ValueIWant，它就会返回 NULL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:28:20.687

ValueIWant 元素标记名称位于默认命名空间 (http://someURL.com) 中，因为此命名空间由其父元素绑定到空前缀：

```
<ns1:someBody xmlns='http://someURL.com' ... 
```

但是在查询中似乎没有默认命名空间，因此名称 test ValueIWant 与 ValueIWant 标记不匹配。

由于它是绑定到 ns1 前缀的同一个 URL，也许在 XPath 表达式中使用 ns1 作为 ValueIWant 前缀可以解决问题？

或者，您可以添加一个

```
declare default element namespace "http://someURL.com"; 
```

在您的查询中。但是使用 ns1 前缀通常也可以工作，因为在比较名称（“QNames”）时，只有名称空间和本地名称很重要，前缀无关紧要。

# android - 来自实现回调的吐司

> ID：12089559
> 
> 赞同：0
> 
> 时间：2012-08-23T10:24:00.640
> 
> 标签：android, callback, android-asynctask, progressdialog, toast

我有一个大致遵循这种结构的活动：

```
public class myActivity extends Activity implements myCallback{
   //Code

   @Override
   public void onCreate(Bundle savedInstaceState){
       super.onCreate(savedInstanceState);
       new myAsyncTask(myActivity.this).execute();
   }
   public void myCallback(Context context){
   //Code
   Toast.makeText(context,"Hello",Toast.LENGTH_SHORT).show();
   }
} 
```

并且 myAsyncTask 定义了 myCallback() 接口并最终调用它。无论我做什么，无论我尝试显示什么 UI 元素，无论是 Toast 还是 ProgressDialog，它都不会显示。我也没有任何例外。其余的回调代码得到完美执行。为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:26:00.127

尝试使用：

```
public class myActivity extends Activity implements myCallback{
   //Code
   Context mContext;

   @Override
   public void onCreate(Bundle savedInstaceState){
       super.onCreate(savedInstanceState);
       mContext = this;
       new myAsyncTask(getApplicationContext()).execute();
   }
   public void myCallback(Context context){
   //Code
   Toast.makeText(mContext,"Hello",Toast.LENGTH_SHORT).show();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:11:26.563

而不是使用 context ，使用 getApplicationContext ......我希望它会显示 toast ......像这样

```
 Toast.makeText(getApplicationContext(),"Hello",Toast.LENGTH_SHORT).show(); 
```

# javascript - js.erb 文件中的循环迭代次数是应有的两倍

> ID：12089567
> 
> 赞同：1
> 
> 时间：2012-08-23T10:24:31.677
> 
> 标签：javascript, ruby-on-rails

我的一个导轨控制器中有一个阵列。我想在相应的 js.erb 文件中循环遍历它的元素。问题是它似乎为每个元素迭代两次。这是代码：

```
<% @array.each do |element| %>
    table_row = document.getElementById("<%= element[:row_id]%>")
    if (table_row != null)
    {
        <% p "row found:" %>
        <% p element[:row_id] %>
    }
    else
    {
        <% p "row not found:" %>
        <% p element[:row_id] %>
    }
<% end %> 
```

可以说`@array`有3个元素。那么上面的代码会产生一个非常奇怪的输出：

```
row found:
1
row not found:
1
row found:
2
row not found:
2
row found:
3
row not found:
3 
```

我的第一个问题是：为什么`@array`有 3 个元素时会有 6 次迭代？
第二个问题：为什么`getElementById`null和(not null)的结果交替出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:33:46.910

问题很可能是内部代码是ruby，无论`if`js代码中的条件如何都会执行。通过使用`p`您告诉 ruby​​ 将这些行打印到服务器控制台，因为 js 将仅在客户端执行，因此没有机会将任何内容放入服务器控制台。

基本上你做两件事：首先你生成一个包含一些带有空块的条件的 js，然后你在 rails 服务器控制台打印一些行。你不能混合那样的东西。使用这样的东西，看看：

```
<% @array.each do |element| %>
    table_row = document.getElementById("<%= element[:row_id]%>")
    if (table_row != null)
    {
        alert("row found: <%= element[:row_id] %>");
    }
    else
    {
        alert("row not found: <%= element[:row_id] %>");
    }
<% end %> 
```

# delphi - 带 Web 代理的 Delphi idWHOIS

> ID：12089569
> 
> 赞同：0
> 
> 时间：2012-08-23T10:24:41.917
> 
> 标签：delphi, http, proxy, whois

再会，

请提供如何通过网络代理使用 idWHOIS 的示例？我想使用免费的网络代理匿名拨打 whois 电话。

为什么具有 ProxyParams 但没有 idWHOIS 的 idHTTP 组件如此简单？

我真的一无所知:)

看到我尝试的代码被剪断：

```
procedure TForm2.Button2Click(Sender: TObject);
var
  ProxyHTTP :TIdConnectThroughHttpProxy;
  Proxy :TIdCustomTransparentProxy;
begin
  ProxyHTTP := TIdConnectThroughHttpProxy.Create(Self);
  Proxy := TIdCustomTransparentProxy.Create(Self);
  Try

{    idIOHandler.TransparentProxy := Proxy;

    Proxy.Host := 'whois.ausregistry.net.au';
    Proxy.Port := StrToInt('43');
    Proxy.IPVersion := ID_DEFAULT_IP_VERSION;
//    Proxy.Connect(idIOHandler, edtProxy.Text, StrToInt(edtPort.Text), ID_DEFAULT_IP_VERSION);
//    Proxy.Enabled;

    Proxy.ChainedProxy := ProxyHTTP;
 }

    idIOHandler.TransparentProxy := ProxyHTTP;
    ProxyHTTP.Host := edtProxy.Text;
    ProxyHTTP.Port :=  StrToInt(edtPort.Text);
    ProxyHTTP.IPVersion := ID_DEFAULT_IP_VERSION;
    ProxyHTTP.OnStatus := ProxyHTTPOnStatus;
    ProxyHTTP.Enabled;
    ProxyHTTP.Connect(idIOHandler, edtProxy.Text, StrToInt(edtPort.Text), ID_DEFAULT_IP_VERSION);

    Memo1.Clear;
    Memo1.Update;
    Memo1.Lines.Text := idWhois.WhoIs(edtDomain.Text + '.com.au');
  Finally
    idIOHandler.Close;
    idWhois.Disconnect;
    Proxy.Free;
    ProxyHTTP := TIdConnectThroughHttpProxy.Create(Self);
  End;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:44:47.117

首先 - 你使用 whois 还是 http 协议？

*   有本地 whois 服务通过其本地协议工作。
*   还有 WWW 前端，可以让您在 MSIE（Microsoft Internet Explorer）等 WWW 浏览器中发出 whois 请求和查看结果。

显然，您应该能够通过 HTTP 代理连接到后者。 *这里的 WWW 是几种相关技术一起使用的绰号：HTTP + SSL/TLS + WebDAV + HTML + CSS + JS 等。因此，HTTP 代理可能被认为是 HTTP 的子集，它是 WWW 的子集，* 并且无法连接到前者, 因为 whois 不是 WWW blob 的一部分。

同样的事情也适用于电子邮件，它也超出了 WWW 领域：

*   有邮件程序，通过IMAP/POP/SMTP协议和对应端口直接连接，
*   还有像 Yahoo 和 GMail 这样的 WWW 前端允许通过 MSIE 查看邮件。WWW 访问通过 HTTP 代理工作，直接访问不是 HTTP 并且不起作用。

例外：一些代理允许 pin-holling。这被视为安全漏洞和错误配置，但有时可以通过 HTTP/SSL 支持命令 CONNECT。但通常不可能连接到每个端口，而只能连接到 :80 和 :443 端口。whois 协议很少出现在这些端口上，只有 HTTP 或 HTTPS 协议。*一些服务器，如 Jabber、ICQ、GTalk 等许多 Messenger 或 Skype 超级节点，故意滥用这些端口：80 和：443 来提供其非 HTTP 协议，从而帮助这些程序欺骗 HTTP 代理并绕过 NAT 隔离. 但我认为你几乎找不到很多 whois 服务器这样做*

无论谁，如果您发现配置不当的代理或此类特殊配置的 whois 服务器，您将有机会使用它。否则，您将只能通过现有的 WWW 前端对 whois 服务器使用 idHTTP。大多数 DNS 名称注册商都提供它们，因此用户无需使用特殊工具而只需使用 WWW 浏览器即可检查数据。

谷歌“http proxy ssl connect pinholling”了解更多关于使用 HTTP 代理的细节。谷歌“NAT Traversal”和“Proxy Tunelling”以获得更一般的概念。有时 VPN 技术被 [mis-] 用于在外部建立隧道。

PS。这并不能回答“我该怎么做”——没有 100% 可靠的方法——但希望能回答“为什么使用具有 ProxyParams 但没有 idWHOIS 的 idHTTP 组件如此简单？”。

如果通过 HTTP 代理向我们发送 idSMTP 或其他电子邮件组件，我想您会遇到同样的障碍。

聚苯乙烯。还有更通用的代理 - Socks 代理 - 应该允许转发任何 TCP 类协议。但它们是非常稀有的东西。

# cappuccino - 通过 Interface Builder 在 Cappuccino 中使用自定义组件

> ID：12089576
> 
> 赞同：2
> 
> 时间：2012-08-23T10:25:03.020
> 
> 标签：cappuccino

我知道在 Cocoa 中，为了在 Interface Builder 中使用自定义组件，我应该转到属性检查器面板并将我的标准 NSView 更改为自定义的。

在 Interface Builder 中布局组件时，是否有任何解决方案可以在 Cappuccino 中使用自定义组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:37:12.863

你可以做同样的事情。

您有您的 CPSupaView，您只需在 IB 中放置一个视图，然后将类名更改为 CPSupaView。

# bash - 我可以在从脚本运行的 makefile 中分配系统变量吗？

> ID：12089579
> 
> 赞同：2
> 
> 时间：2012-08-23T10:25:07.610
> 
> 标签：bash, shell, makefile, gnu-make

我有一个 bash 脚本，它遍历不同的子项目目录并在那里执行**make** target。

每个 makefile 都可以有自己的变量，例如 $(MY_FILTERS) 分配给 makefile。所以它是一个makefile的内部变量。

有没有办法可以*导出*此类变量以将其内容添加到可从主脚本访问的某个系统/shell 变量中？

我希望这不是父进程不能被子进程修改的情况？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T11:10:57.577

*我希望这不是父进程不能被子进程修改的情况？？*

希望破灭了，抱歉，您必须使用某种 IPC。这是一种方法：

```
#!/bin/bash
export pipe="/tmp/mypipe.$$"
trap 'rm "$pipe"' EXIT 
mkfifo "$pipe" 

make &

read myfilters < "$pipe"
echo "myfilters is $myfilters" 
```

生成文件：

```
all:
    echo ${MY_FILTERS} > ${pipe} 
```

（请注意，`echo`缩进带有制表符）

# deployment - 如何设置 apt 以将其用于 Web 应用程序部署

> ID：12089580
> 
> 赞同：4
> 
> 时间：2012-08-23T10:25:09.467
> 
> 标签：deployment, repository, apt-get, package-managers

如果我想使用 apt 包将我的 web 应用程序部署到不同的 linux 服务器，我应该采取哪些步骤？从 PHP/MySQL 应用程序开始，我希望能够将其安装为这样的包：

```
apt-get update
apt-get install mywebapp-package 
```

我想我必须在某个地方建立一个存储库并将我的包添加到其中，但是这是如何工作的？如何创建包本身？我必须做什么才能让任何服务器找到我的存储库？一些谷歌搜索只会出现令人困惑的信息，也许我正在寻找错误的流行语。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:43:20.340

以下是如何创建一个 apt-package [https://askubuntu.com/questions/27715/create-a-deb-package-from-scripts-or-binaries](https://askubuntu.com/questions/27715/create-a-deb-package-from-scripts-or-binaries)

这真的很简单......在你的应用程序文件夹中有一个*debian*子文件夹...... ./debian/install 文件包含一个非常简单的文件到最终位置的映射

```
# debian/install must contain the list of scripts to install 
# as well as the target directory
echo myscript.sh usr/bin > debian/install 
```

您可以使用 makefile 创建安装和安装后任务。如果您以前从未使用 make 编译过 ac/c++ 程序...基本上在应用程序文件夹中运行“./configure”，然后运行“make”或“make install”来编译/解包程序... dh_make 有一个略有不同的过程和一些默认值，但它是一个非常相似的工作流程......以下是来自[GNU Make Reference的一个非常简单的 makefile](http://www.gnu.org/software/make/manual/make.html#Rule-Introduction)

```
objects = main.o kbd.o command.o display.o \
               insert.o search.o files.o utils.o

     edit : $(objects)
             cc -o edit $(objects)
     main.o : main.c defs.h
             cc -c main.c
     kbd.o : kbd.c defs.h command.h
             cc -c kbd.c
     command.o : command.c defs.h command.h
             cc -c command.c
     display.o : display.c defs.h buffer.h
             cc -c display.c
     insert.o : insert.c defs.h buffer.h
             cc -c insert.c
     search.o : search.c defs.h buffer.h
             cc -c search.c
     files.o : files.c defs.h buffer.h command.h
             cc -c files.c
     utils.o : utils.c defs.h
             cc -c utils.c
     clean :
             rm edit $(objects) 
```

基本上默认的“make”任务编译程序编辑......并且从这个结构中的文件名中自动检测到依赖关系

对于 webapp，这里是来自 OSS 项目的 makefile，其中包括从 Github [http://build.shr-project.org/Makefile拉取](http://build.shr-project.org/Makefile)

基本上，如果您从事该项目并将所有安装任务放入一个makefile中......并让“make”默认任务解压缩您的应用程序并安装apache / nginx vhost并在完成后重新启动/重新加载相关服务器......然后apt 是一种完全可行的处理方式......有很多程序可以在数百个系统上同时管理 apt 包...... [https://serverfault.com/questions/79093/managing-upgrades-on-hundreds -of-debian-servers](https://serverfault.com/questions/79093/managing-upgrades-on-hundreds-of-debian-servers)

Canonical/Ubuntu 的[Landscape](http://www.canonical.com/enterprise-services/ubuntu-advantage/landscape)是处理这类事情的好工具……我之前在大约 20 个服务器的平台上使用过它……不太清楚设置自己的上游存储库和签署密钥等的细节apt 可以完全管理软件包，但我敢肯定，一旦你的 dpkg 开始运行，它就会非常简单

Debconf / apt 为许多类型的应用程序提供了一个很好的用例......但是，如果它是一个持续部署的应用程序并且您必须不断进行升级（我的经验法则是，如果您每周进行一次以上的升级或 5x 月）......那么使用持续部署工具可能会更好...... Capistrano 和 Fabric 都非常出色（使用 Cap，具有多阶段扩展......很棒，Fabric 我只听说过很棒的东西) ...但我仍然不相信数百台 Debian 服务器上的 Cap ...这实际上与您的项目规模有关...上面说 10 或 20 个服务器的上限对于真正管理部署来说太慢太笨重了好吧（恕我直言，显然任何人都可以做任何事情，而我对此的研究还不够多，但与 Gnu Make 和 debconf 相比，Ruby Rake 和 Capistrano 等都非常缓慢且不可靠，尤其是在野外）

特别是关于一般的服务器自动化，我建议你看看[Puppet](https://puppetlabs.com/)和[Chef](http://www.opscode.com/chef/)，这两个都是非常可行的工具。也没有使用，但我们所有的管理脚本都是用 Ruby 编写的，而且 Chef 的刀工具对于以脚本方式配置服务器非常方便

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T21:16:54.717

我建议使用[Capistrano](http://capistranorb.com/)或[Fabric](http://docs.fabfile.org/en/1.5/)之类的东西来部署您的应用程序，而不是 apt-get。这些工具用于部署应用程序并且能够部署到多个服务器。

# facebook - 访问 developers.facebook.com/apps 时的 Facebook 重定向循环

> ID：12089583
> 
> 赞同：1
> 
> 时间：2012-08-23T10:25:27.357
> 
> 标签：facebook, redirect

由于无限重定向循环，我无法访问[developers.facebook.com/apps 。](http://developers.facebook.com/apps)我已清除缓存和 cookie，但无济于事。有时它可以让我访问一些页面，但我无法测试我的 Facebook 应用程序的开发。

# c# - 将 Oracle 存储过程设置调用为 Web 服务

> ID：12089588
> 
> 赞同：0
> 
> 时间：2012-08-23T10:25:46.517
> 
> 标签：c#, oracle, stored-procedures, odp.net

我有一个由某人编写的存储过程。存储过程公开为 Web 服务。代码的核心是它创建了一个包含几个选定字段的自定义数组，然后返回它。

为了获得更好的内部系统集成性能，我希望直接从 .NET 调用存储过程

但是，我不确定输出类型以及是否需要指定大小。

**Oracle 存储过程：**

```
opTradeListArray OSWTRADELISTARRAY; opTradeListArray(n) := WS_WSTRADELIST(T.XORCODE,T.XORDESC,t.XDAREF); 
```

**网络服务：**

```
public class WS_WSTRADELIST : INullable, IOracleCustomType, IXmlSerializable
{
    private bool m_IsNull;
    private string m_OPWORKCENTRES;
    private string m_OPTRADECODE;
    private string m_OPTRADENAME;

    cmd.Parameters.Add(":1", OracleDbType.RefCursor, System.Data.ParameterDirection.Output);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "DB_INTEGRATION.BASE_GETTRADES_V1_0";
} 
```

有没有人有任何例子？

# node.js - 对 Node.js 单线程执行模型感到非常困惑

> ID：12089589
> 
> 赞同：5
> 
> 时间：2012-08-23T10:25:51.350
> 
> 标签：node.js

好的，我正在学习 Node.js，但我无法完全理解这个等待模型。我通过阅读[The Node Beginner Book](http://www.nodebeginner.org)来学习它。其中有一个关于阻塞和非阻塞操作的部分。我不明白的是非阻塞操作。

这是代码：

```
var exec = require("child_process").exec;

function start(response) {
  console.log("Request handler 'start' was called.");

  exec("ls -lah", function (error, stdout, stderr) {
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write(stdout);
    response.end();
  });
}

function upload(response) {
  console.log("Request handler 'upload' was called.");
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello Upload");
  response.end();
}

exports.start = start;
exports.upload = upload; 
```

start函数调用exec，exec执行ls -lah。那么回调会等待响应吗？如果 exec 执行“find /”怎么办，在我的计算机中完成“find /”命令需要大约 30 秒。由于这是单线程的，如果用户 1 访问启动函数，那么在毫秒内用户 2 也访问启动函数。然后会发生什么？这是否意味着用户 1 将在 30 秒内得到响应，而用户 2 需要等待 1 分钟，因为用户 1 仍在执行“查找 /”？

对不起，如果我的问题太无聊了。谢谢阅读！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:38:05.820

In node.js all I/O operations works asynchronously. Both `find` operations will be run in parallel. Try read this: [Understanding the node.js event loop](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/).

# python - DateField 总是返回 None 值

> ID：12089590
> 
> 赞同：1
> 
> 时间：2012-08-23T10:25:52.820
> 
> 标签：python, django

```
class News(models.Model):
  title = models.CharField(max_length=70)
  full_text = models.TextField()
  pub_date = models.DateField('-pub_date') 
```

然后我运行 python manage.py shell 无论我为 News.pub_date 做的值是 None

我正在使用 sqlite3，当我打开数据库时，我可以看到日期值在那里。但是当我恢复一个对象时，pub_date 是无。在 s=News.objects.all()[0].pub_date 在此处输入代码后我没有收到任何错误

```
>>> from face.models import News
>>> from datetime import datetime
>>> s=News()
>>> s.pub_date

>>> s=News()
>>> s.title="hgello"
>>> s.full_text="hello there"
>>> s.pub_date = datetime.now()
>>> s.show=True
>>> s.save()
>>> t=News.objects.all()
>>> t
[<News: This is title>, <News: second text>, <News: sample>, <News: hgello>]
>>> t=t[3]
>>> print t.pub_date
    None 
```

**我已经解决了这个问题。我刚刚删除了 sqllite3 的数据库文件。我认为它的发生是因为最初它被命名为 DateTimeField，然后我将其更改为 DateField。但是我在更改之间做了syncdb。因此 django 能够成功存储日期数据但无法恢复。并且 re-syncdb 并没有帮助我做了好几次。只有数据库的物理删除和数据库的重建结构解决了使用问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:32:07.770

您可能想设置[`auto_now_add`参数](https://docs.djangoproject.com/en/stable/ref/models/fields/#django.db.models.DateField)：

```
pub_date = models.DateField(auto_now_add=True) 
```

或者，您可以覆盖该`.save()`方法：

```
class News(models.Model):
    title = models.CharField(max_length=70)
    full_text = models.TextField()
    pub_date = models.DateField()

    def save(self, *args, **kwargs):
        if not self.id:
            self.pub_date = datetime.datetime.today()
        super(News, self).save(*args, **kwargs) 
```

# c# - c#.net如何在每天的特定时间启动一个动作

> ID：12089594
> 
> 赞同：0
> 
> 时间：2012-08-23T10:26:06.087
> 
> 标签：c#, triggers

我希望每天在特定时间执行一项操作，例如 sql 中的触发器，但我希望在 c#.net 中执行此操作，任何人都可以帮助我，

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:31:52.877

通常，您正在创建循环，然后检查是否该采取行动了。它应该始终在运行进程（服务或托盘中的应用程序等）。

这取决于您需要在计时器中保持多清晰：如果它需要以秒为单位，您需要在 1 秒内创建间隔，并在`Elapsed`处理程序中检查您的目标时间与当前时间，如果为真 - 火警（事件）。

# c++ - 一堆独特元素的容器

> ID：12089596
> 
> 赞同：5
> 
> 时间：2012-08-23T10:26:12.390
> 
> 标签：c++

我想要做的是构建一个包含独特元素的堆栈。

如果一个元素被推送到已经在堆栈中的元素不会被推送但是现有的元素应该被移动到堆栈的顶部，即 ABCD + B > ACDB

我想从你这里得到这个功能的最佳选择。

我决定在列表上使用堆栈适配器，因为

1.  list 确实为元素移动提供了恒定的时间
2.  list 是堆栈本机支持的容器之一。

我选择的缺点是我必须手动检查重复元素。

PS我的编译器不是最近的所以请不要建议unordered_set。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:35:48.490

基本上，您必须在恒定时间移动+长时间搜索或恒定时间搜索+长时间移动之间进行选择。

很难说哪个会更耗时，但考虑一下：

*   *每次*尝试添加元素时，您都必须搜索该元素是否存在
*   您*不必*每次都移动元素，因为显然有时您会为容器添加“新”元素。

我建议您将*元素*及其*堆栈位置*存储在不同的容器中。以提供快速搜索的方式存储*元素，以提供快速移动的方式存储**堆栈位置*。用指针连接两者（这样你就可以知道哪个元素在哪个位置，哪个位置保存哪个元素<--混乱的短语，我知道！），你会很快地执行一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T14:19:08.773

根据您的要求，在我看来，您想要的结构可以来自[Max Heap](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)。

如果不只存储项目，而是存储一对 (generation, item)，生成来自单调递增的计数器，那么堆的“根”始终是最后看到的元素（其他元素并不重要，是吗？）。

*   pop：堆上典型的pop操作（`delete-max`操作）
*   Push：修改操作，以说明结构内“item”的唯一性
    *   寻找“项目”，如果找到更新它的世代（`increase-key`操作）
    *   如果没有，插入它（`insert`操作）

考虑到元素的数量（20），在 a 上构建堆`vector`似乎是一个自然的选择。

# jenkins - 詹金斯阈值插件shell脚本

> ID：12089597
> 
> 赞同：2
> 
> 时间：2012-08-23T10:26:18.653
> 
> 标签：jenkins, jenkins-plugins

我有一个 bash/shell 脚本来检查项目中的一组约束。此脚本的输出是在源代码（非 Java 项目）中发现的错误/违规数量。

我正在寻找一个 Jenkins 插件来检查此脚本输出并根据阈值通知失败。它与[Violations 插件](https://wiki.jenkins-ci.org/display/JENKINS/Violations)+ Checkstyle、PMD 等功能相同，但数据源应该是自定义脚本。

我一直在寻找一段时间，但任何东西都符合这个要求。

不知道这个插件有没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:13:06.810

您可能想查看[警告插件](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin)，它描述了如何“编写应包含在警告插件中的新解析器”和“编写将部署在新插件中的新独立解析器”

它还有一个“将构建标记为不稳定的失败阈值”

# c# - 正则表达式匹配左双引号前面有未闭合的左双引号

> ID：12089599
> 
> 赞同：1
> 
> 时间：2012-08-23T10:26:22.930
> 
> 标签：c#, .net, regex, lookbehind

笔记 ：

左双引号 (") = &ldquo

右双引号 (") = &rdquo

我目前的正则表达式是这个

```
(?>=&ldquo.*)&ldquo 
```

它与这里的第二个 &ldquo 匹配（这是正确的）：

```
&ldquoThis is a sample&ldquo 
```

它还与此处的第二个 &ldquo 匹配（我不想发生这种情况，因为第一个报价已经关闭）：

```
&ldquoThis is a sample&rdquoSample&ldquoTesting 
```

我如何编写一个正则表达式来匹配前面的每个 &ldquo 与未封闭的 &ldquo

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:00:21.153

我认为这是答案：

```
(?<=&ldquo.*)(?<!&rdquo.*)&ldquo 
```

[在那里](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)测试过。

啊，它失败了`&ldquoThis is a sample&rdquo &ldquoThis is a sample&ldquo`

* * *

我的第二次尝试：

```
(?<=&ldquo(?!.*&rdquo).*)&ldquo 
```

# jquery-plugins - 如何从子网格 rowId 中获取父 id？

> ID：12089603
> 
> 赞同：1
> 
> 时间：2012-08-23T10:26:35.820
> 
> 标签：jquery-plugins, jqgrid, subgrid

我正在使用一个`JqGrid`和`subgrid`。我必须从**子网格 rowId**获取**父 ID**。

 **请帮我解决这个问题..

我在下面粘贴我的代码。

//这是网格

```
$("#DayEvents").jqGrid({
    url: 'Event.asmx/GetDayForEvents',
    datatype: 'json',
    mtype: 'POST',
    ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
    serializeGridData: PrepareGridPostData,
    jsonReader: { repeatitems: false, root: "d.rows", page: "d.page", total: "d.total", records: "d.records" },
    colNames: ['day', 'DayID'],
    colModel: [{ name: 'Day', index: 'Day', editable: false, width: 550, align: 'center', sortable: false },
    { name: 'DayID', index: 'DayID', editable: false, width: 550, align: 'center', sortable: false, hidden: true }
  ],
    rowNum: 10,
    rowList: [5, 10, 15, 20],
    // pager: "#pager2",
    viewrecords: true,
    gridview: true,
    width: '100%',
    autowidth: false,
    shrinkToFit: false,
    height: '331px',
    // pgbuttons: true,
    hoverrows: false,
    //caption: 'Days',
    subGrid: true,
    subGridUrl: 'Event.asmx/GetSubGridDay',
    subGridOptions: {
        "plusicon": "ui-icon-triangle-1-e",
        "minusicon": "ui-icon-triangle-1-s",
        "openicon": "ui-icon-arrowreturn-1-e",
        //expand all rows on load
        "expandOnLoad": false
    }, 
```

//这是子网格 subGridRowExpanded: function(subgrid_id, row_id) {

```
 var subgrid_table_id, pager_id;
        subgrid_table_id = subgrid_id + "_t";
        pager_id = "p_" + subgrid_table_id;
        //alert(subgrid_table_id);
        $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "' class='scroll'></table><a href=# id='AddSession' OnClick='addRow(\"" + subgrid_table_id + "\");'>add session</a><div id='" + pager_id + "' class='scroll'></div>");
        //debugger;
        jQuery("#" + subgrid_table_id).jqGrid({

            url: 'Event.asmx/GetSubGridDay',
            datatype: 'json',
            mtype: 'POST',
            cellEdit: true,
            cellsubmit: 'clientarray',
            onCellSelect: GridCellClick,               

            ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
            serializeGridData: PrepareGridPostData,
            jsonReader: { repeatitems: false, root: "d.rows", page: "d.page", total: "d.total", records: "d.records" },
            colNames: ['session', 'start time', 'end time'],
            colModel: [

                 { name: 'SessionName', index: 'SessionName', width: 90, formatter: 'text', align: 'center', edittype: 'text', editable: true, editoptions: { size: 10, maxlength: 15, dataEvents: [{ type: 'change', fn: GetRemainingEffort }, { type: 'focus', fn: clearCellValues }, { type: 'blur', fn: resetCellValues}]} },
                  { name: 'StartTime', index: 'StartTime', width: 90, formatter: 'number', align: 'center', edittype: 'text', editable: true, editoptions: { size: 10, maxlength: 15, dataEvents: [{ type: 'change', fn: GetRemainingEffort }, { type: 'focus', fn: clearCellValues }, { type: 'blur', fn: resetCellValues}]} },
                 { name: 'EndTime', index: 'EndTime', width: 90, formatter: 'number', align: 'center', edittype: 'text', editable: true, editoptions: { size: 10, maxlength: 15, dataEvents: [{ type: 'change', fn: GetRemainingEffort }, { type: 'focus', fn: clearCellValues }, { type: 'blur', fn: resetCellValues}]} }

            ],

            rowNum: 10,
             height: 'auto',
            autowidth: true

        });

    }

}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T12:08:49.320

在回调函数 subGridRowExpanded 内部，您可以使用此变量，该变量已初始化为网格的 DOM（的 DOM）。所以你可以通过this.id获取父网格的id。

检查[subGridRowExpanded的文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asubgrid)**

# regex - URL 重写器表达式

> ID：12089610
> 
> 赞同：0
> 
> 时间：2012-08-23T10:27:13.057
> 
> 标签：regex, urlrewriter

我当前的重写器运行良好，但是当用户在 facebook 和 facebook 上添加一个 URL 时，它无法再加载。

这是我的表达：

```
<rewrite url="~/hinh-anh/(.+)-(.+)" to="~/Content.aspx?ContentID=$2"/> 
```

这运作良好：

```
http://www.funbook.vn/hinh-anh/pho-cu-reu-phong-205 
```

此网址无效：

```
http://www.funbook.vn/hinh-anh/pho-cu-reu-phong-205?fb_comment_id=fbc_10151011439516616_22968658_10151011472976616#f17f94926c 
```

请帮助我，我是正则表达式的菜鸟。

预先感谢！！

编辑：

最后我找到了解决方案：

```
<rewrite url="~/hinh-anh/([A-Za-z\-]*)([\d]+)" to="~/Content.aspx?ContentID=$2"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:32:49.237

试试这个：

```
<rewrite url="~/hinh-anh/(.+)-(.+).*" to="~/Content.aspx?ContentID=$2"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T04:04:03.027

最后我找到了解决方案：

```
`<rewrite url="~/hinh-anh/([A-Za-z\-]*)([\d]+)" to="~/Content.aspx?ContentID=$2"/>` 
```

# android - 在平板电脑上强制手机布局

> ID：12089621
> 
> 赞同：2
> 
> 时间：2012-08-23T10:28:12.377
> 
> 标签：android, tablet

当有一个大的可用时，是否有可能使平板电脑使用常规布局？

例如：

```
if(!user.payedForTabletApp) DO_NOT_USE_LARGE_LAYOUT(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:42:20.023

以下是解决问题的方法：

**1)**创建两个布局：`res/layout/phone.xml`和`res/layout/tablet.xml`
**2)**创建布局别名：
***2.1)*** `res/layout/main.xml` -> `res/layout/phone.xml`
***2.2)*** `res/layout-large/main.xml` -> `res/layout/tablet.xml`
***2.3)*** `res/layout-sw600dp/main.xml` ->`res/layout/tablet.xml`

别名我的意思是这样的：

```
<resources>
    <item name="main" type="layout">@layout/phone</item>
</resources> 
```

有关布局别名的更多示例，请参阅[本教程](http://developer.android.com/training/multiscreen/screensizes.html)。

**3）**更新`onCreate()`活动中的功能或`onCreateView()`片段中的功能以使用适当的布局。

下面是一个活动示例：

```
int layoutResId = R.layout.main;
if (!user.payedForTabletApp) {
    layoutResId = R.layout.phone;
}
setContentView(layoutResId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:41:13.673

对此的简短回答是否定的。Android 为您处理资源系统。

您可以在布局文件夹中提供两个不同的布局文件。

类似的东西`activity_home_normal.xml`，`activity_home_large.xml`显然*我不推荐这个*！

然后你可以这样做：

```
if(!user.payedForTabletApp){
    setContentView(R.layout.activity_home_normal);
}else{
    setContentView(R.layout.activity_home_large);
} 
```

**但**我会考虑对您使用其他功能而不是布局收费。如果我在 iOS 上购买了一个应用程序，我希望同一个应用程序可以在两种设备尺寸上运行——对于 android 也是如此。

布局*优化*用户体验。

# javascript - 使用 javascript 播放声音

> ID：12089624
> 
> 赞同：2
> 
> 时间：2012-08-23T10:28:14.633
> 
> 标签：javascript, html, audio

我正在尝试使用 javascript 在事件中播放声音

试过这个

```
<object height="100" width="100" data="sounds/cash.wav" id="cash"></object>

var thissound= document.getElementById("cash");
thissound.play(); 
```

它奏效了。问题是，我没有在浏览器上显示我的元素，所以我尝试了

```
<object height="0" width="0" data="sounds/cash.wav" id="cash"></object>
and even
<object height="100" width="100" data="sounds/cash.wav" id="cash" style="display:none"></object> 
```

我在 JS 中得到一个错误，告诉我该元素为空..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:34:08.890

你可以试试

```
<object height="100" width="100" data="sounds/cash.wav" id="cash" style="visibility: hidden; white-space: nowrap;"></object> 
```

隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:36:20.137

您也可以将`object`元素包装在一个块中，并隐藏该块。

# android - onkeyup 事件在手机中不起作用

> ID：12089626
> 
> 赞同：1
> 
> 时间：2012-08-23T10:28:17.390
> 
> 标签：android, keyevent, mobile-browser

我正在开发必须在所有智能手机上运行的网络应用程序，
我的代码如下：

```
<input type='text' style='width:50px' onkeyup="abc()"/> 
```

和 js 就像：

```
function abc(){
    alert("something");
} 
```

它在我的电脑浏览器中工作，但在我的安卓手机浏览器中不工作。
该怎么办..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:45:06.917

[您可以尝试使用 WEINRE 之类的工具](http://muellerware.org/papers/weinre/manual.html)调试您的移动浏览器或安装[Adob​​e Shadow](http://labs.adobe.com/technologies/shadow/)（使用 WEINRE）。

**WAINRE**本质上是一个远程 Web 检查器，类似于 Chrome 中或通过 Firefox Firebug 提供的开发者工具。

这可以帮助您查看错误并跟踪问题。

# c# - 反序列化改变的对象

> ID：12089628
> 
> 赞同：0
> 
> 时间：2012-08-23T10:28:20.487
> 
> 标签：c#, .net, serialization, audit

**为了审计**目的，我需要在数据库中*创建/更新/删除*期间存储**序列化**[使用*二进制序列化*] 对象。另一个要求是能够在任何时间点查看 2 个审计日志条目之间的差异，即能够**反序列化**2 个*相同*类型的对象并比较它们的属性值。

 ******现在这一切都很酷，直到你发布一个新版本，其中这个被审计的对象发生了变化——比如你已经删除了几个属性并添加了一个新属性：现在尝试从旧的审计日志条目**反序列化到它，它会****失败**。

我们的网络服务器管理员*非常严格*，不允许我们在 GAC 中安装任何东西，所以问题是假设您只安装了最新的 Assemly 版本，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:31:07.097

对于新字段，您有[`OptionalFieldAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.optionalfieldattribute.aspx)

除此之外，我想您会喜欢 MSDN 上的这篇[文章](http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.80%29.aspx)。******

# c - 过滤器 c 注释的正则表达式

> ID：12089630
> 
> 赞同：2
> 
> 时间：2012-08-23T10:28:41.633
> 
> 标签：c, regex

对于与工具的合并，我只需要比较源代码行的未注释部分。

所以我尝试创建一个过滤器来检测实际代码，即一个匹配*除*注释之外的所有文本的正则表达式。

也许是这样的：

```
^.*(?!((/\**([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/)|(//.*))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:44:23.337

这个会做：

```
(/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/)|(//.*) 
```

来源： http: [//ostermiller.org/findcomment.html](http://ostermiller.org/findcomment.html)。

或使用非贪婪匹配 : `(/\*([\r\n]|.)*?\*/)|(//.*)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:47:41.817

Amine 的回答是正确的，但您也可以找到任何评论并将其从字符串中删除：

这个正则表达式会给你所有的评论：

```
(/\*.*?\*/)|//.*?\n 
```

这将用“”替换匹配项（如果您使用的是 c++）：

```
std::string str2 = std::tr1::regex_replace(string, regex, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:29:31.523

也许您的编译器可以提供帮助。有些人可能会选择预处理源代码和去除注释。也许可以使预处理器**只**去除注释。这将是让一个工具正确完成一件事的 Unix 方式——C 预处理器知道注释是什么（而 regexen 是用于解析的工具，IMNSHO）。

作为第二种选择，编写带有`lex`或`flex`识别注释的词法分析器很容易。网上应该有很多例子。任何搜索引擎都会出现大量点击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-18T12:50:41.107

对于多行注释，请使用：

`/\/\*([\s\S]*?)\*\//mg`

并用于匹配单行注释：

`/\/\/([\s\S]*?)[\n\r]?$/mg`

或将这两者结合起来以匹配所有评论 `/(\/\*(?<multiline>[\s\S]*?)\*\/)|(\/\/(?<singleline>[\s\S]*?)[\n\r]?$)/mg`

# php - 否则不起作用

> ID：12089633
> 
> 赞同：0
> 
> 时间：2012-08-23T10:29:10.097
> 
> 标签：php, if-statement, is-empty

这应该很简单，但由于某种原因它不起作用。你能指点什么吗？

```
if ( !empty( $data[$i][19] )) {
    $an_image = "<img src='/images/camera.gif' title='Der er et billede' />";
} elseif( !empty( $data[$i][24] )) {
    $an_image = "<img src='/images/camera.gif' title='Der er et billede' />";
} elseif( !empty( $data[$i][25] )) {
    $an_image = "<img src='/images/camera.gif' title='Der er et billede' />";
} else {
    $an_image = "";
} 
```

它应该简单地检查数据中的三个变量，如果其中任何一个有东西，则返回一个图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:32:50.317

```
if (in_array(array(19, 24, 25), $data[$i]))
{
     $an_image = "<img src='/images/camera.gif' title='Der er et billede' />";

}
else
{
     $an_image = "";
} 
```

检查这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:43:40.467

您可以简单地使用 or 运算符吗？

```
if ( $x || $y || $z ){
    $an_image = "<img src='/images/camera.gif' title='Der er et billede' />";
} else {
    $an_image = "";
} 
```

[http://codepad.org/zeyPPLYP](http://codepad.org/zeyPPLYP)

# maven - 在子 java 模块 pom 中声明依赖项的必要性

> ID：12089640
> 
> 赞同：0
> 
> 时间：2012-08-23T10:29:39.493
> 
> 标签：maven, build, dependencies

当父级的 pom at (or ) 部分中存在依赖项时，是否有必要在子级的 pom.xml 中声明依赖项？他们是遗传的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:37:53.310

The fallowing elements from the parent POM are inherited by the children pom's:

*   Dependencies
*   Plugin executions
*   Plugin configurations
*   Other misc. elements (e.g SCM settings, developers, reports)

For more info see: [Pom Inheritance](http://maven.apache.org/pom.html#Inheritance)

So in your case you don't need to declare again the dependencies in the child pom.

# java - 在学习 java 中的网络和密码学 api 方面需要帮助

> ID：12089647
> 
> 赞同：-4
> 
> 时间：2012-08-23T10:30:51.247
> 
> 标签：java, networking, encryption, network-programming, cryptography

我是一名刚进入网络世界的 Java 开发新手。我读过http不是传递数据的安全方式。我想用java学习密码学、http和https。你能指点我一些好的参考资料和教程吗？

谢谢，马扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:45:32.400

使用您最喜欢的搜索引擎并查找网络相关技术的参考资料

*   TCP/IP 和套接字
*   HTTP、HTTPS 和 SSL（以及 TLS）
*   基本 Java 网络 API：s (java.net.*)
*   密码学技术。对称与非对称算法（MD5、DES、AES、RSA 等）、单向（散列）和双向加密
*   Java 加密 API (javax.crypto)
*   流行的 3d 派对/开源网络库，如 Apache HttpComponents
*   Java 和 SSL、证书和签名

老实说，仅 wikipedia 就可以让您从起点出发。

# vb.net - Visual Basic Keydown 计算

> ID：12089649
> 
> 赞同：-1
> 
> 时间：2012-08-23T10:31:00.187
> 
> 标签：vb.net

我已经这样做了几天。我想做的是当我点击进入时。我在 txtbox1 中输入的数字将乘以 12，然后显示输出到 txtbox2。但没有运气。有人能帮助我吗？这是我的代码：

```
Private Sub txt1_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles txt1.KeyDown
    Dim a, b, c As Integer
    txt1.Text = a
    b=a*12
    If e.KeyCode = Keys.Enter Then
      txt2.text = b
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:32:43.537

它应该是

```
a = txt1.Text 
```

代替

```
txt1.Text = a 
```

否则，您只需设置`txt1.Text`为`0`.

* * *

顺便说一句，您应该使用该[`TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)方法，以确保当文本框中的文本不包含有效数字时不会引发任何期望。

```
Dim number = 0
If e.KeyCode = Keys.Enter AndAlso Int32.TryParse(txt1.Text, number) Then
    txt2.Text = (number * 12).ToString()
End If 
```

# java - 如何在surfaceview中将Android相机更改为人像？

> ID：12089654
> 
> 赞同：5
> 
> 时间：2012-08-23T10:31:15.450
> 
> 标签：java, android, android-camera, surfaceview

我正在为 android 平板电脑编码，我希望我的应用程序使用`surfaceView`相机预览的纵向视图。默认情况下它是横向的，我尝试使用以下代码旋转到纵向视图：

```
public void surfaceCreated(SurfaceHolder holder){
  // The Surface has been created, acquire the camera and tell it where to draw.
  mCamera = Camera.open();
  Parameters params = mCamera.getParameters();
  // If we aren't landscape (the default), tell the camera we want portrait mode
  if (this.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE){
    params.set("orientation", "portrait"); // "landscape"
    // And Rotate the final picture if possible
    // This works on 2.0 and higher only
    //params.setRotation(90);
    // Use reflection to see if it exists and to call it so you can support older versions
      try {
        Method rotateSet = Camera.Parameters.class.getMethod("setRotation", new Class[] { Integer.TYPE } );
        Object arguments[] = new Object[] { new Integer(270) };
        rotateSet.invoke(params, arguments);
      } catch (NoSuchMethodException nsme) {
        // Older Device
        Log.v("CameraView","No Set Rotation");
      } catch (IllegalArgumentException e) {
        Log.v("CameraView","Exception IllegalArgument");
      } catch (IllegalAccessException e) {
        Log.v("CameraView","Illegal Access Exception");
      } catch (InvocationTargetException e) {
        Log.v("CameraView","Invocation Target Exception");
      }
  }
  mCamera.setParameters(params);
  try{
    mCamera.setPreviewDisplay(holder);
  } catch (IOException exception) {
    mCamera.release();
    mCamera = null;
  }
} 
```

但它不起作用。请问有人可以修吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T20:19:52.993

您可能希望`setDisplayOrientation`按如下方式使用该函数：

```
public void surfaceCreated(SurfaceHolder holder) {
    if (Build.VERSION.SDK_INT >= 8) mCamera.setDisplayOrientation(90);
} 
```

使用相机的`params.set("orientation"...`东西在设备之间并不一致，实际上是 SDK 8 之前的语言。

# oracle - Oracle客户端安装错误——路径太长

> ID：12089655
> 
> 赞同：33
> 
> 时间：2012-08-23T10:31:18.187
> 
> 标签：oracle, oracle11g, oracleclient

我正在尝试安装 Oracle 11g 第 2 版（客户端）。但它给出了这样的错误：

```
Environment variable: "PATH" - This test checks whether the length of the
    environment variable "PATH" does not exceed the recommended length.
Expected Value: 1023
Actual Value : 1028
List of errors: - PRVF-3929 : Adding the Oracle binary location to the PATH
  environment variable will exceed the OS length limit of [ "1023" ] for the
  variable on the node "KamalNuriyev-PC"  -
    Cause:  The installer needs to update the PATH environment variable to
            include the value "%ORACLE_HOME%/bin;". However, doing so will
            cause PATH to exceed the maximum allowable length that this
            operating system allows.  - Action:  Ensure that the sum of the
            lengths of your current PATH environment variable and that of
            "%ORACLE_HOME%/bin;" does not exceed the operating system limit.
            Restart the installer after correcting the setting for
            environment variable. 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-23T08:29:11.117

此限制*基于旧的 Windows 限制，*其中环境变量的长度很重要。这个限制在 Oracle 安装中仍然存在。

***解决这个问题：***

*   第 1 步：将“路径”变量的值复制到文本编辑器（例如：记事本）并将该值保存为备份。
*   第 2 步：**将此路径的大小减少**到 1023 个字符以下。最后删除路径变量。在 oracle 安装过程中，您几乎不需要它们中的任何一个。将这些删除的值保存在单独的文本文件中，因为您需要稍后再次添加它们！
*   第三步：再次**开始安装oracle**。
*   第 4 步：安装 Oracle 后：在路径末尾**再次添加那些已删除的路径值。**

祝你好运！

![额外截图](../Images/9a1ae40850bee2ef07365ba47227a128.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-26T12:10:41.057

**对于那些面临此问题的人**，解决方案是查看您的环境变量“PATH”并通过删除不必要的路径/重复路径来缩短长度，正如 Bob Javis 在他的评论中所建议的那样。感谢他。

我有类似的问题，并通过这样做解决了。

**在 Windows 7 上编辑 ENV 变量：** 开始 -> 计算机 -> 属性 -> 高级系统设置 -> 在“系统属性”窗口中，选择“高级”选项卡 -> 单击“环境变量” -> 向下滚动以查看 PATH变量并单击“编辑”进行相应编辑，然后单击“确定”保存

希望有人可以得到帮助:)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-06-28T10:22:05.803

您可以选中右上角的全部忽略复选框，这应该使下一步按钮能够继续。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-19T13:22:09.213

解决此问题的一种方法是进入`stage\cvu`安装程序目录并编辑`cvu_prereq.xml`，**将包含 1023 的所有值**（有多个）替换为更大的数字，然后尝试再次安装。

可能需要在运行安装程序之后但在安装程序检查不同要求（如 PATH 长度）之前执行此操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-14T15:38:12.180

在尝试了所有之后，我[在 Oracle wiki 中找到了这个](http://docs.oracle.com/cd/E23943_01/doc.1111/e14774/install.htm#BABGFICI)：

它说的是你应该减少字符串的路径，将“C:\Program Files (x86)”更改为“C:\PROGRA~2”

请务必备份原始路径。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-15T15:35:08.213

简单的，

检查路径大小，如果有不必要的东西将其删除，如果没有，请按原样保存。并重启oracle安装过程。

[http://hashtutorial.com/plsql-tutorial/plsql-environment-setup/](http://hashtutorial.com/plsql-tutorial/plsql-environment-setup/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-04T13:55:10.817

简单的解决方案：

1.  将当前的 PATH 变量重命名为 PATH2
2.  然后添加一个新的 PATH = %PATH2%
3.  继续安装

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-25T12:28:58.513

但是，如果你没有不必要的路径/重复路径并且你不能缩短它（注意！如果你删除了一些必要的路径，它会影响相应的服务！），请在安装 oracle 之前删除一些路径并在之后返回它们安装。

或者，您可以在系统 PATH 变量中手动添加 oracle 路径字符串（将其添加到字符串的开头，而不是末尾）以进行 oracle 安装。例如，如果您在路径“c:\ora”中安装 Oracle 11g R2，则通常路径字符串为 C:\ora\product\11.2.0\dbhome\BIN -for server and C: \ora\product\11.2.0\client_1\BIN - 用于客户端。:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-30T19:59:58.247

我使用了两种方法来缩短我的 PATH 环境变量：

1) 使用其他环境变量，例如：%CommonProgramFiles(x86)% for "C:\Program Files (x86)\Common Files" %ProgramFiles(x86)% for "C:\Program Files (x86)"

2) 使用 8 个字符的 DOS 路径名，例如：MICROS~4 表示“Microsoft SQL Server” * 您的系统可能有不同的编号，在 CMD 窗口中，浏览到父文件夹并键入“dir /ad /x”

"%ProgramFiles(x86)%\Micros~4\140\DTS\Binn" 比 "C:\Program Files (x86)\Microsoft SQL Server\140\DTS\Binn" 短 15 个字符

我将 PATH 的总长度从 1120 缩小到 890。然后我可以毫无问题地安装 Oracle 客户端。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-02T17:31:39.160

我遇到了这个问题，我们可以通过 PATH 测试的唯一方法是从域中删除计算机并重新添加它。无法解释为什么，但这对我们有用。祝你好运。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-27T23:26:35.223

就我而言，由于此错误，我也无法安装 11.2.0.4 32 位客户端或 12.2.0.1 64 位客户端。经过大量调查，我发现在 Windows 10 Enterprise 1703 上安装它时似乎存在一个错误，正如这个问题所暗示的那样：

[https://dba.stackexchange.com/questions/176774/environment-variable-path-exceeding-recommended-length](https://dba.stackexchange.com/questions/176774/environment-variable-path-exceeding-recommended-length)

就我而言，当我使用自动化来安装它时，我最终将我的虚拟机重新创建为 Windows 10 Enterprise LTSC，并且不再出现此错误。就我而言，它与实际路径无关，因为我已经缩短到几乎没有任何东西的地步，这不足以解决问题。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2012-08-23T11:38:13.163

您可以尝试以管理员身份运行安装。

希望能帮助到你

# java - Findbugs 布尔字段上的错误 SE_BAD_FIELD

> ID：12089659
> 
> 赞同：1
> 
> 时间：2012-08-23T10:31:41.213
> 
> 标签：java, jenkins, findbugs, serializable

我们已将 Findbugs 配置为通过 Maven 在我们的 Jenkins 上运行。

除其他外，它在以下代码行中抱怨 SE_BAD_FIELD：

```
private boolean logged = false; 
```

[这个错误](http://findbugs.sourceforge.net/bugDescriptions.html#SE_BAD_FIELD)的描述说

> **Se：可序列化类中的非瞬态不可序列化实例字段（SE_BAD_FIELD）**
> 
> 这个 Serializable 类定义了一个非原始实例字段，它既不是瞬态的、Serializable 也不是 java.lang.Object，并且似乎没有实现 Externalizable 接口或 readObject() 和 writeObject() 方法。如果此字段中存储了不可序列化的对象，则此类的对象将无法正确反序列化。

但是`boolean`是原始人！？那它为什么抱怨呢？或者这是某种 Findbugs、Maven 或 Jenkins Bug？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:27:17.393

我注意到 FindBugs 有时会报告 SE_BAD_FIELD 的错误行号。因此，您可能想要检查其他字段的可序列化性。（我使用 FB 1.3.9。）。

# c - 混合 16 位线性 PCM 流并避免削波/溢出

> ID：12089662
> 
> 赞同：9
> 
> 时间：2012-08-23T10:31:58.377
> 
> 标签：c, audio, signal-processing, pcm, mixing

我试图将 2 个 16 位线性 PCM 音频流混合在一起，但我似乎无法克服噪音问题。我认为它们在将样品混合在一起时来自溢出。

我有以下功能...

```
short int mix_sample(short int sample1, short int sample2)
{
    return #mixing_algorithm#;
} 
```

...这就是我尝试过的#mixing_algorithm#

```
sample1/2 + sample2/2
2*(sample1 + sample2) - 2*(sample1*sample2) - 65535
(sample1 + sample2) - sample1*sample2
(sample1 + sample2) - sample1*sample2 - 65535
(sample1 + sample2) - ((sample1*sample2) >> 0x10) // same as divide by 65535 
```

其中一些产生了比其他更好的结果，但即使是最好的结果也包含相当多的噪音。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-03T06:44:03.547

我找到的最佳解决方案是[Viktor Toth 给出的](http://www.vttoth.com/CMS/index.php/technical-notes/68)。他为 8 位无符号 PCM 提供了一个解决方案，并将其更改为 16 位有符号 PCM，会产生以下结果：

```
int a = 111; // first sample (-32768..32767)
int b = 222; // second sample
int m; // mixed result will go here

// Make both samples unsigned (0..65535)
a += 32768;
b += 32768;

// Pick the equation
if ((a < 32768) || (b < 32768)) {
    // Viktor's first equation when both sources are "quiet"
    // (i.e. less than middle of the dynamic range)
    m = a * b / 32768;
} else {
    // Viktor's second equation when one or both sources are loud
    m = 2 * (a + b) - (a * b) / 32768 - 65536;
}

// Output is unsigned (0..65536) so convert back to signed (-32768..32767)
if (m == 65536) m = 65535;
m -= 32768; 
```

使用这种算法意味着几乎不需要裁剪输出，因为它只有一个值在范围内。与直接平均不同，即使另一个源静音，一个源的音量也不会降低。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-23T11:24:25.287

这是一个描述性的实现：

```
short int mix_sample(short int sample1, short int sample2) {
    const int32_t result(static_cast<int32_t>(sample1) + static_cast<int32_t>(sample2));
    typedef std::numeric_limits<short int> Range;
    if (Range::max() < result)
        return Range::max();
    else if (Range::min() > result)
        return Range::min();
    else
        return result;
} 
```

混合，它只是添加和剪辑！

为避免削波伪影，您将需要使用饱和度或限制器。理想情况下，您将拥有一个`int32_t`带有少量前瞻的小缓冲区。这将引入延迟。

比到处限制更常见的是在你的信号中留下一些“余量”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-18T17:28:05.803

这是我在最近的合成器项目中所做的。

```
int* unfiltered = (int *)malloc(lengthOfLongPcmInShorts*4);
int i;
for(i = 0; i < lengthOfShortPcmInShorts; i++){
    unfiltered[i] = shortPcm[i] + longPcm[i];
}
for(; i < lengthOfLongPcmInShorts; i++){
     unfiltered[i] = longPcm[i];
}

int max = 0;
for(int i = 0; i < lengthOfLongPcmInShorts; i++){
   int val = unfiltered[i];
   if(abs(val) > max)
      max = val;
}

short int *newPcm = (short int *)malloc(lengthOfLongPcmInShorts*2);
for(int i = 0; i < lengthOfLongPcmInShorts; i++){
   newPcm[i] = (unfilted[i]/max) * MAX_SHRT;
} 
```

我将所有 PCM 数据添加到一个整数数组中，这样我就可以得到所有未过滤的数据。

之后，我在整数数组中寻找绝对最大值。

最后，我将整数数组放入一个短整数数组中，方法是将每个元素除以该最大值，然后乘以最大短整数值。

通过这种方式，您可以获得适合数据所需的最小“净空”量。

您也许可以对整数数组进行一些统计并整合一些剪辑，但对于我需要的最小空间量对我来说已经足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-02T13:50:23.173

这里有一个讨论：[https](https://dsp.stackexchange.com/questions/3581/algorithms-to-mix-audio-signals-without-clipping) ://dsp.stackexchange.com/questions/3581/algorithms-to-mix-audio-signals-without-clipping关于为什么 A+B - A*B 解决方案不理想。隐藏在本次讨论的其中一条评论中的是建议将这些值相加并除以信号数量的平方根。额外的剪裁检查也无妨。这似乎是一个合理（简单而快速）的中间立场。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T10:46:40.333

我认为它们应该是函数映射`[MIN_SHORT, MAX_SHORT] -> [MIN_SHORT, MAX_SHORT]`，它们显然不是（除了第一个），所以会发生溢出。

如果 unwind 的提议不起作用，您也可以尝试：

```
((long int)(sample1) + sample2) / 2 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-23T00:43:55.987

由于您处于时域中，因此频率信息位于连续样本之间的*差异*中，当您除以 2 时，您会损坏该信息。这就是为什么添加和剪辑效果更好的原因。削波当然会添加非常高频的噪声，可能会被过滤掉。

# android - Android webview 全屏

> ID：12089671
> 
> 赞同：0
> 
> 时间：2012-08-23T10:32:22.497
> 
> 标签：android, android-layout, android-webview

我有一个布局，我需要在屏幕的一部分上显示一个 web 视图。我已经在 Eclipse 的图形布局中设置了布局，它看起来确实像我想要的那样（徽标和标题变黑了）：

![图形布局中所示的布局](../Images/6cb834c8179eeced74a03bbcc4429ea3.png)

但是，当我在模拟器或手机上打开此布局时，它会将 WebView 显示为全屏。如何制作这样的布局？任何帮助深表感谢！

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/Theme.KB_default"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/header_background_shape" >
        <TextView
            android:id="@+id/heading"
            style="@style/Theme.KB_header"
            android:layout_width="wrap_content"
            android:layout_centerHorizontal="true"
            android:text="@string/app_name" >
        </TextView>
        <ImageView
            android:id="@+id/imageViewPadlock"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            android:contentDescription="@string/global_secure_connection"
            android:src="@drawable/padlock" />
    </RelativeLayout>
    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:background="@color/black" >
    </View>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="0.41"
        android:orientation="vertical" >
        <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="40dp"
            android:layout_height="20dp"
            android:layout_marginBottom="5dp"
            android:layout_marginLeft="15dp"
            android:contentDescription="@string/global_logo"
            android:scaleType="fitXY"
            android:src="@drawable/logo_transparrent_notext" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:41:26.310

将表格块之一作为 webview

检查这个链接

[http://developer.android.com/reference/android/widget/TableLayout.html](http://developer.android.com/reference/android/widget/TableLayout.html)

您还可以使用对话框检查此示例

[http://www.41post.com/4673/programming/android-creating-a-webview-dialog](http://www.41post.com/4673/programming/android-creating-a-webview-dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:38:16.153

好吧，我似乎是活着的愚蠢的家伙。我的布局有效，但我忘记添加“setContentView(xml.file);” 所以它从来没有加载过 XML ......愚蠢

# python - 树样式字典

> ID：12089676
> 
> 赞同：0
> 
> 时间：2012-08-23T10:32:49.520
> 
> 标签：python, list, dictionary, tree

我被以下数据困住了。

有一个清单。

```
[{name: '/', children: [{name: 'bin'}, {name: 'sbin'}, {name: 'home'}]},
{name: 'home', children: [{name: 'user1'}, {name: 'user2'}]},
{name: 'user2', children: [{name: 'desktop'}]}] 
```

我想将上面的列表转换为下面的字典。

```
{name: '/', children: [{name: '/bin'}, {name: '/sbin'}, {name: '/home', children: [{name: 'user1'}, {name: 'user2', children: [{name: 'desktop'}]}]}]} 
```

我写了一些代码来转换上述样式的数据。

```
def recT(data, child, parent, collector):
    dparent = dict(name=parent)
    dchildren = dict()
    lst = []
    for c in child:
        lst.append(dict(name=c['name']))
        for d in data:
            if c['name'] == d['name']:
                if len(d) > 1:
                    dchildren.update(dict(children=recT(data, d['children'], d['name'], collector)))
    dparent.update(dchildren)
    collector.update(dparent)
    return lst 
```

然后，

```
myd = dict()
for d in data2:
    if len(d) > 1:
        recT(data2, d['children'], d['name'], myd) 
```

注意：data2 是我要转换的字典列表。

但是，输出字典是列表中的最后一条记录：

```
{'children': [{'name': 'desktop'}], 'name': 'user2'} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:59:23.690

正如lazer 所说，您不能`dict`像那样复制密钥。您可以将其转换为如下格式以成为有效的 Python`dict`语法：

```
{
  '/': {
    'bin': {}, 
    'sbin': {}, 
    'home': {
      'user1': {},
      'user2': {
        'desktop': {}
      }
  }
} 
```

您只获得列表中最后一条记录的原因是因为您的 dict 使用**唯一键**

```
mydict = {}
mydict['name'] = 1
mydict['name'] # is 1
mydict['name'] = 2

for x,y in mydict.iteritems():
  print '{0}: {1}'.format(x,y)
>> name: 2 # Note only one entry 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T18:39:36.080

现在，我从@lazyr 的[How to convert a strict sorted list of strings into dict 的回答中得到了它？](https://stackoverflow.com/questions/7818245/how-to-convert-a-strictly-sorted-list-of-strings-into-dict).

然后，我将其转换为字符串并使用 myReplacer() 将其更改为想要的格式。

这里：

```
def myReplacer(strdata):
    strdata = strdata.replace("{", '{ name:')
    strdata = strdata.replace(': {', ', children : [{')
    strdata = strdata.replace('}', '}]')
    strdata = strdata.replace(': None,', '},{ name:')
    strdata = strdata.replace(': None', '')
    strdata = strdata.replace(", '", "}, { name: '")
    return strdata[:-1] 
```

谢谢@lazyr，每个人都帮助了我。它需要一些润色。

# html - 添加一个简单的向下箭头图像到下拉菜单

> ID：12089679
> 
> 赞同：9
> 
> 时间：2012-08-23T10:32:51.957
> 
> 标签：html, css, user-interface

我有一个网站，其中某些菜单标题下拉（css）

我想在能够下拉的某些菜单标题上添加一个向下的小箭头。谁能给我任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T10:35:19.547

只需使用这个字符：[http ://www.fileformat.info/info/unicode/char/25bc/index.htm](http://www.fileformat.info/info/unicode/char/25bc/index.htm)

```
&#9660;  - ▼ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-04T09:36:41.917

```
a:after{
    content: '';
    border: 4px solid transparent;
    border-top: 4px solid white;
    margin-left: 2px;
    margin-bottom: 3px;
    display: inline-block;
    vertical-align: bottom;
} 
```

我认为这是最好的方法，因为您可以调整边框的长度并调整“边框顶部”的高度，让您完全自定义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-23T09:51:57.913

如果您使用的是引导程序，则可以执行以下操作：

```
<span class="caret"></span> 
```

这将在放置跨度的任何位置插入一个小的向下箭头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T02:53:47.807

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-09-19T18:41:23.197

尝试使用以下代码添加箭头，根据需要自定义箭头的高度和宽度以及位置。

```
 li.has_child:after {  
        content: '';   
        position: absolute;   
        border: 7px solid transparent; 
        /* This will set the direction of the arrow.*/  
         border-top: 7px solid white; 
           top: 34px; 
        margin-left: 5px; 

  } 
```

# mysql - 安全杀死一个删除大号。mysql中的记录

> ID：12089681
> 
> 赞同：3
> 
> 时间：2012-08-23T10:32:55.367
> 
> 标签：mysql, sql-delete, kill

我正在删除包含 22M 记录的数据库上的 7M 记录。我开始使用经典删除`DELETE FROM db WHERE.`

我忘了分页：/

如果我杀了它，我会破坏数据吗？说损坏并不是说我不恢复已删除的行。我不在乎他们。我只希望查询完成它正在执行的删除并停在那里。

表引擎是**MyISAM**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:40:12.373

见[杀死](http://dev.mysql.com/doc/refman/5.0/en/kill.html)

> 在 UPDATE 或 DELETE 操作期间，在每个块读取之后以及每个更新或删除的行之后检查 kill 标志。如果设置了 kill 标志，则该语句被中止。请注意，如果您不使用事务，则不会回滚更改。

它不会破坏数据。您的更改将消失，直到 kill（删除停止）。你根本不会打扰它。如果您打扰它，请使用交易。

# eclipse - eclipse中调试/运行黑莓模拟器的区别

> ID：12089684
> 
> 赞同：1
> 
> 时间：2012-08-23T10:33:00.957
> 
> 标签：eclipse, blackberry

当我单击**Run -> Debug Configuration**时，将有 3 种不同类型的模拟器：

1.  黑莓模拟器
2.  黑莓设备和
3.  黑莓模拟器（运行中）

我应该使用哪一个？

这是图片： ![在此处输入图像描述](../Images/3bea0f0d0d24f0b5312f0e39fef58a41.png)

每次我想在模拟器（f11）​​中调试我的代码时，都会出现烦人的问题。这是图片：

![在此处输入图像描述](../Images/6ccfe8154ed2ddefb233dfca36d72f08.png)

**我的问题是：**

1.  我应该使用哪一个？
2.  有什么不同？和
3.  有什么办法可以让烦人的问题（第二张图片）不再出现​​？

（我不知道第二张图片（对话框）是做什么用的。虽然它一直在问这个问题，但我真的不能*选择*，因为只有一个选择会顺利运行，而另外两个会出错，所以为什么要问？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T23:32:09.293

我也遇到过这些问题。这不是很清楚。

基本上，**黑莓设备**将用于在真正的黑莓智能手机上运行。显然，要选择此选项，您必须连接 BlackBerry 智能手机。

至于另外两个，我自己一直都用**黑莓模拟器**。听起来**BlackBerry Simulator (running)**将用于在已经启动的模拟器上运行。但是，根据我的经验，选择**BlackBerry Simulator**通常会起作用，即使模拟器已经启动。然而，尽管在 Eclipse 中有几种方法可以做到这一点（普通的 Eclipse**运行/调试**菜单、**BlackBerry菜单或在 Eclipse 的****Project Explorer**中右键单击项目），但我并不总是在所有这些方面都取得了很好的成功。

最近（JDE 插件 1.5.0+），我一直在使用 Eclipse **Run -> Debug As -> BlackBerry Simulator**选择，或者特殊的 BlackBerry 插件 Debug 图标：

![在此处输入图像描述](../Images/ad2703417b663c56c9109813a2ccd5fa.png)

当我开始这两种方式中的任何一种时，它都不会要求我做出另一种选择。

请注意，如果我使用 Eclipse，我看不到热交换（在没有完全重启模拟器的情况下重启应用程序）功能在所有模拟器上都能正常工作，即使是那些 OS > 5.0 的模拟器。

以下是有关在 Eclipse 中运行和调试的更多参考资料：

[http://docs.blackberry.com/en/developers/deliverables/35144/Testing_a_BB_app_with_BB_smartphone_sim_1889924_11.jsp](http://docs.blackberry.com/en/developers/deliverables/35144/Testing_a_BB_app_with_BB_smartphone_sim_1889924_11.jsp)

顺便说一句，[该文档的旧版本（插件 1.3）](http://docs.blackberry.com/en/developers/deliverables/23671/Using_the_BB_menu_1382991_11.jsp)提到了**BlackBerry Simulator (running)**，而新版本 (1.5) 则没有。所以，也许 RIM 不再打算让你使用那个选择（？）。

[http://devblog.blackberry.com/2009/08/how-to-set-up-a-lightning-fast-blackberry-smartphone-simulator/](http://devblog.blackberry.com/2009/08/how-to-set-up-a-lightning-fast-blackberry-smartphone-simulator/)

# c# - 是否有内存 IL 重写（Profiler API）的示例？

> ID：12089687
> 
> 赞同：4
> 
> 时间：2012-08-23T10:33:09.560
> 
> 标签：c#, .net, reflection, clr, jit

我看到分析器 API 可以做到这一点。有谁知道除此之外的示例：http: [//www.codeproject.com/Articles/17275/Really-Easy-Logging-using-IL-Rewriting-and-the-NET](http://www.codeproject.com/Articles/17275/Really-Easy-Logging-using-IL-Rewriting-and-the-NET)因为我什至无法编译它。我对此很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-13T09:49:13.183

[David Broman 的 CLR Profiling API 博客：创建 IL 重写分析器](https://web.archive.org/web/20190114032259/https://blogs.msdn.microsoft.com/davbr/2007/03/06/creating-an-il-rewriting-profiler)

该博客包含大量关于 IL 重写的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-13T09:53:24.093

福迪

[https://github.com/Fody/Fody](https://github.com/Fody/Fody)

用于编织 .net 程序集的可扩展工具

介绍

在构建过程中操作程序集的 IL 需要大量的管道代码。此管道代码涉及 MSBuild 和 Visual Studio API 的知识。Fody 试图通过可扩展的插件模型消除该管道代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T19:06:13.717

看看[StaticProxy](https://github.com/BrunoJuchli/StaticProxy.Fody)。非常容易使用。

# jquery - Photoswipe + JQM：返回事件问题

> ID：12089688
> 
> 赞同：2
> 
> 时间：2012-08-23T10:33:22.330
> 
> 标签：jquery, jquery-mobile, jsonp, photoswipe

```
$(document).on("pagecreate", function() {
            $.jsonp({
                url: 'URL_TO_GET_JSONP',
                回调参数：'get_photo'，
                成功：函数（json，状态）{
                    变种照片 = [];
                    var path = 'URL_TO_GET_JSONP';
                    $.each(json, 函数(a,b){
                        照片.push('
```

*   '); photo.push(''); 照片.push(''); }); $('.gallery').html(photo.join('')); var myPhotoSwipe = $(".gallery a").photoSwipe({ 启用鼠标轮：假， }) }, 错误：函数（）{ alert("无法加载照片。"); } }); });

我在使用图库和浏览器后退按钮时遇到问题。与小 (x) 按钮相比，用户更有可能按下后退按钮以退出图库。问题是当您使用后退按钮时，您最终会看到一个没有导航或内容的空白页面，只有页面背景。（例如：[http](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html) ://www.photoswipe.com/latest/examples/04-jquery-mobile.html ）

有什么解决办法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:34:13.657

我自己仍在寻找答案，但也许这对你有帮助。

jQuery Mobile 使用哈希将页面保存在历史记录中并向后导航。当使用 Photoswipe 进入轮播模式时，事件处理程序附加到后退事件（关闭 (x) 按钮只不过是在历史记录中返回到画廊索引页面）。使用关闭 (x) 按钮分离事件处理程序并将控制权交还给 jQuery Mobile。使用设备的后退按钮退出轮播不起作用，因为 jQuery Mobile 的哈希列表以某种方式被弄乱了。

如果我找到修复程序，我会在这里发布。

（已编辑以添加解决方案。）

我找到了适合我的解决方案。

您需要做两件事：1）从 body 标签中删除 ps-active 类 2）找到所有 photoswipe 实例并取消设置它们

以下代码对我有用：

```
$(document).bind('pagebeforechange', function(e) {
if ($('.ps-carousel').length) {
    $('body').removeClass('ps-active');
    $('div.gallery-page').each(function(){
        var photoSwipe = window.Code.PhotoSwipe;
        var photoSwipeInstance = photoSwipe.getInstance($(this).attr('id'));
        if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
            photoSwipe.unsetActivateInstance(photoSwipeInstance);
        }
    });
}
}); 
```

请注意，如果您使用的类与照片滑动示例中使用的类不同（例如[http://www.photoswipe.com/latest/examples/04-jquery-mobile .html](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:38:03.843

我找到了我的 qns 的解决方案。请看一下。

```
$.ajax({
        网址：URL_TO_GET_JSON，
        成功：函数（json，状态）{
            变种 p = [];
            $.each(json, 函数(a,b){
                //在这里画图。
            });
            $('.gallery').html(photo.join(''));

        // 在此处创建实例        
            var myPhotoSwipe = $(".gallery a").photoSwipe({
                启用鼠标轮：假，
            })

          /********** 此处未设置实例 *****************/

            $(document).bind('pagebeforechange', function(e) {
                if ($('.ps-carousel').length) {
                    $('body').removeClass('ps-active');
                    var photoSwipe = window.Code.PhotoSwipe;
                    var photoSwipeInstance = photoSwipe.getInstance($(myPhotoSwipe).attr('id'));
                    if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                        photoSwipe.unsetActivateInstance(photoSwipeInstance);
                        photoSwipe.detatch(photoSwipeInstance);
                    }
                }
            });
        }
    });

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T14:12:35.040

我对另一个答案投了赞成票，但经过更多测试后发现它并不能始终如一地工作。在查看了 photoswipe 源代码后，我意识到最好使用他们自己的 hide() 函数，而不是试图找出一种不同的方法来关闭它。

这对我来说仍然不是完美的，有时后退按钮只会关闭叠加层，而其他时候它会移回上一页，这是我不想要的。但至少这样我在按下后不会被卡住。

我使用 photoSwipe 对象返回的实例数组并检查它是否通过设置 documentOverlay 可见：

```
$(document).on('pagebeforechange', function(e) {
if ($('.ps-carousel').length) {
  var photoSwipe = window.Code.PhotoSwipe;
  for( i = 0 ; i < photoSwipe.instances.length ; i++ )
  {
    if( !Code.Util.isNothing( photoSwipe.instances[i].documentOverlay ) ) 
    {
      photoSwipe.instances[i].hide();
    }
  }
 }
}); 
```

# android - 安卓平板通过蓝牙与ARM开发板通信

> ID：12089692
> 
> 赞同：0
> 
> 时间：2012-08-23T10:33:43.363
> 
> 标签：android, bluetooth, embedded, arm

我是嵌入式编程的新手，我有一个项目要在 Android 平板电脑和具有蓝牙功能**的 ARM 开发板之间建立蓝牙通信。**

请告诉我这个项目是否可以完成？

如果可以做到，那么我应该如何处理它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:38:06.117

Check out this page: [http://www.amarino-toolkit.net/](http://www.amarino-toolkit.net/)

They are using the arduino board with a bluetooth component to connect to android. You can check the source code of their library to see how they establish and use the connection here:

[http://code.google.com/p/amarino/](http://code.google.com/p/amarino/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:51:58.977

如果您想要的是一种简单而强大的蓝牙通信方法，那么[SPP](http://en.wikipedia.org/wiki/Serial_port_profile#Serial_Port_Profile_.28SPP.29)绝对是您的最佳选择。

唯一的问题可能是带宽，但如果传统串行电缆连接的吞吐量足以满足您的应用程序，那么肯定不会有任何问题。IIRC 然后大多数模块使用 SPP 的吞吐量 > 1 Mbit。

有关在 Android 上使用 SPP 的一些信息在[这里](https://stackoverflow.com/questions/4031434/activate-bluetooth-spp-in-android)。

但我们需要更多信息来提供有关您需要在 ARM 套件上做什么的建议。也许您可以发布一些有关其类型的详细信息，其中使用了哪个蓝牙模块，如何连接到 ARM MCU 等。

如果幸运的话，您的套件的 BT 模块可以用作串行电缆的替代品，您可以将其视为 Android 设备已连接到您的 MCU 的 UART。当然，在此之前，需要通过某些接口（可能是相同的 UART，取决于模块类型）进行一些配置以建立蓝牙连接。

哦，回答你的第一个问题：是的，当然可以：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T03:17:55.430

我没有通过蓝牙使用 Android 到 ARM 板，但我已经完成了一些使用蓝牙在 Android 设备和 Arduino 之间进行通信的工作。我试图用一系列例子记录我学到的东西。有几个可能会有所帮助。

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-basic-bluetooth.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-basic-bluetooth.html)

[http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and.html](http://digitalhacksblog.blogspot.com/2012/05/arduino-to-android-turning-led-on-and.html)

[http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html](http://digitalhacksblog.blogspot.com/2012/05/android-example-bluetooth-simple-spp.html)

前两个示例展示了如何通过蓝牙设置从 Android 设备到带有蓝牙板的 Arduino 的通信。我希望在 Android 和 ARM 之间获得一些初始连接，Android 方面的事情将是相同的。

第三个示例展示了如何在 Android 设备和运行 windows 的 PC 之间设置一个简单的 spp 客户端和服务器。

希望这可以帮助。

# visual-studio-2010 - 如何使用 TFS API 和 C#.Net 代码将作为任务/测试用例的工作项链接到另一个工作项/任务？

> ID：12089695
> 
> 赞同：0
> 
> 时间：2012-08-23T10:33:47.343
> 
> 标签：visual-studio-2010, tfs, microsoft-test-manager, tfs-sdk

我可以使用 TFS API 获得一个测试用例对象。现在我想将一个任务 ID（例如 435567）链接到这个测试用例对象的“受影响者”链接类型。任何可用于执行此操作的示例代码？

我可以看到测试用例有一个 add 方法，如下所示，但它没有将任务 id 作为参数。

```
 testCase.WorkItem.WorkItemLinks.Add(<Microsoft.TeamFoundation.WorkItemTracking.Client.workitemlink.link >) 
```

知道如何在这里链接taskid吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T00:04:19.667

这篇[博文](http://www.ewaldhofman.nl/post/2009/12/10/TFS-SDK-2010-e28093-Part-4-Create-a-new-User-Story-with-the-implementation-%28Tasks%29-and-test-scenarios-%28Test-Case%29.aspx)将对您有所帮助。它使用一些测试用例创建了一个新的用户故事。

```
var testedByLink = wiStore.WorkItemLinkTypes["Microsoft.VSTS.Common.TestedBy"];
wiUserStory.WorkItemLinks.Add(new WorkItemLink(testedByLink.ForwardEnd, wiTestCase.Id));
wiUserStory.Save(); 
```

# java - 在 Java/Spring/JSP 中绘制图像

> ID：12089696
> 
> 赞同：0
> 
> 时间：2012-08-23T10:33:49.520
> 
> 标签：java, image, spring, jsp, draw

我`<img src=""/>`在 JSP 站点上实现了一个图像。现在我想让用户可以在该图像上绘图（仅一种颜色和一支铅笔）并将更改后的图像上传给我。如何在图像上绘图？

我们使用的是 Spring Forms，图像是 CommonsMultipartFile。

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:28:25.487

假设您有一个图像页面，`"image.jsp"`并且您必须将所有逻辑（操作模块）写入（`Image.java`将在其中绘制实际图像）“

<1> 创建您的图像

```
public void drawImage(Graphics g){
 g.drawImage(image,x,y,null);
} 
```

然后对于另一个类“UserImage.java”中的用户

<2> 如果你使用 javax.swing.JPanel 那么你可以添加加载你的图片

```
BufferedImage image = ImageIO.read(new File("path-to-image-file"));
...
...
JColorChooser jColorChooser = new JColorChooser(your_image_file_name.getForeground()); 
```

<3> 你可以写下你自己选择铅笔或钢笔的代码

```
public Image image = new Image("Give_the_path_of_the file","x_parameter","y_parameter");
public void changeImage(Graphics g){
 g.drawImage(g)} 
```

您的代码将根据用户规范+它将是动态实现

在这里，您应该处理 UserImage 上传位置。

# macos - 如何为 Mac OS X 10.8 Mountain Lion 设置 Java JDK 环境变量

> ID：12089697
> 
> 赞同：14
> 
> 时间：2012-08-23T10:33:54.540
> 
> 标签：macos, osx-mountain-lion

谁能告诉我如何为 Mac OS X 10.8 Mountain Lion 设置环境变量。我只是将我的 Mac 升级到 Mac OS X 10.8。当我运行脚本时。它说

“/Users/ruijiaoli/lejos_nxj/bin/nxj：第 64 行：/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java：没有这样的文件或目录”

我在上面路径内的目录中找到了 JDK。它在 Mac OS X lion 中运行良好。Mac OS X Mountain Lion 中的 JDK 路径是否更改？我系统上的 Java 版本是 1.6。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-01-06T12:44:06.410

这是我尝试过的：

创建 bash_profile：

```
$ vim ~/.bash_profile 
```

将此添加到文件中：

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

执行源码命令

```
$ source ~/.bash_profile 
```

回声 JAVA_HOME：

```
$ echo $JAVA_HOME
/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-29T13:19:26.410

我创建了一个文件 ~/.bash_profile 并添加了：

```
export PATH=/usr/local/mysql/bin:$PATH
export PATH=/Users/sparkyspider/dev/javalibs/Grails/grails-2.1.1/bin:$PATH
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.7.0_07.jdk/Contents/Home 
```

一切对我来说都很好......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T21:11:02.010

我发现以下帖子非常有帮助 -

[http://www.cyberciti.biz/faq/appleosx-bash-unix-change-set-path-environment-variable/](http://www.cyberciti.biz/faq/appleosx-bash-unix-change-set-path-environment-variable/)

它解释了如何为单个用户或系统范围（OS X Leopard+）设置路径

# tridion - UGC：评论是否可以在继承自父出版物的出版物之间共享？

> ID：12089698
> 
> 赞同：3
> 
> 时间：2012-08-23T10:34:01.150
> 
> 标签：tridion, ugc

在我的场景中，所有页面都在“XXX”出版物中创建，并且该出版物有 2 个子出版物“XX1”和“XX2”。

在“XX1”发布中，用户可以在页面上成功评论帖子。但是当我在评论部分看到 Tridion 时，我只能在子发布页面上看到那些评论（通过只读模式选项）。它不会显示在父出版物页面中。

我也想从任何儿童出版物页面分享对父出版物的评论。可能吗？

反之亦然，如果用户在父发布页面中添加了任何评论，那么这些评论也应该显示在子发布页面上。也有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:58:12.200

Community Builder（评论和评级）没有蓝图意识。仅当您在该特定发布上下文中打开该项目时，才会显示对发布 XX1 中某个项目的评论。

如果您想在“XX1”和“XX2”中显示相同的评论，您可以配置前端逻辑，使其使用“XXX”的发布 ID。在这种情况下，您可以在 XXX 级别查看和审核 Tridion 中的项目，并且评论将在两个站点上可见。

一个不同但表面上相似的问题是，GUI 不允许用户对共享项目进行审核。这是一个已知的错误。有一个修补程序。使用此修补程序，即使页面/组件是共享的（未本地化），您也可以审核评论。如果修补程序是公开可用的，您应该与 SDL 客户支持联系。

# tfs - TFS 构建代理服务应该在哪个帐户下运行？

> ID：12089700
> 
> 赞同：2
> 
> 时间：2012-08-23T10:34:03.653
> 
> 标签：tfs, tfsbuild

**背景信息** 我需要我们的 TFS 构建代理在特定帐户下运行，以便我们的 ClickOnce 证书获得授权。

但是，如果我在帐户 X 下运行，这也是具有正确证书的构建控制器的用户帐户。我收到错误消息：“源已在使用中”。即使我重新启动服务和/或虚拟机。

最初正确/错误的是，我们的构建代理在网络服务帐户下运行，但是该帐户无法验证证书。

使用本地系统帐户不会授予从开发人员框访问构建控制器的权限。

**所以我想我的问题是：**服务“Visual Studio Team Foundation Build Service Host”应该在什么帐户下运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:05:20.693

事实证明，帐户 X 是正确的选择（我们的构建控制器用户帐户，权限很少）。

这是该帐户需要添加到构建器组 TFS Admin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:41:48.270

我个人的建议是：一个专门创建的、最低权限的帐户，仅在您的构建机器上构建代码所需的范围内获得授权，仅此而已。

不过，我不知道构建代理与构建控制器对用户的任何限制 - 事实上，我确信我之前使用过类似的设置。您的错误是否可能具有误导性？更改用户可能是一种解决方法，但也许还有其他可解决的问题。

# d - 标准 D 类型和 GDC (LDC) 规范

> ID：12089701
> 
> 赞同：2
> 
> 时间：2012-08-23T10:34:07.743
> 
> 标签：d, gdc

我在哪里可以找到有关 GDC（GNU D 编译器）以及如何重写标准 D 类型（如 uint 等）的规范？

有关信息：我有兴趣将 D 用于内核和其他低级别的东西。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:45:26.633

您可以遵循 D ABI 规范：[http ://dlang.org/abi.html](http://dlang.org/abi.html)

GDC 几乎遵循从上到下到“函数调用约定”部分的所有内容。

这个页面会告诉你一些相同的信息： http: [//gdcproject.org/wiki/Porting](http://gdcproject.org/wiki/Porting)

关于重写标准 D 类型，我要说的就是不要。您可能会为要解决的错误问题找到错误的解决方案。如果您使用该平台，我建议在 IRC 上给我一个铃铛，因为我会更容易在那里回答任何 GDC 开发问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:37:10.270

我不明白您所说的“重写像 uint 这样的标准 D 类型”是什么意思。

但是，您可能会发现这很有用：[https ://github.com/xomboverlord/xomb](https://github.com/xomboverlord/xomb)

# ruby - 来自数据库的结果 - 无法将数组强制转换为 Float (TypeError)

> ID：12089706
> 
> 赞同：0
> 
> 时间：2012-08-23T10:34:29.627
> 
> 标签：ruby, sqlite, typeerror

我从数据库中检索了一个 Float 值并尝试将其添加到 Float 类型值中，但出现错误：`in '+': Array cant be coerced into Float (TypeError)`

```
total = 0.0
db = SQLite3::Database.open "Checkout.sqlite"

for i in 0..@items.length
    tempPrice = db.execute "SELECT price FROM Products WHERE product_code = ?", @items[i]
    total = total + tempPrice
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:37:54.407

`tempPrice`是数组，`tempPrice[0]`如果您确定它只有 1 个值，则应该使用，或者`tempPrice.sum`如果结果可以有多个值，则可以使用。

UPD：试试

```
total = 0.0
db = SQLite3::Database.open "Checkout.sqlite"

@items.each do |item|
    db.execute("SELECT price FROM Products WHERE product_code = ?", item) do |row|
        total = total + row[0]
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:52:38.553

```
total = 0.0
db = SQLite3::Database.open "Checkout.sqlite"

for i in 0..@items.length
    db.execute("SELECT price FROM Products WHERE product_code = ?", @items[i]) do |row|
        total = total + row[0]
    end
end 
```

# ios - 如何从 Core Data 的关系字段中获取 ID 而不是实体对象？

> ID：12089708
> 
> 赞同：1
> 
> 时间：2012-08-23T10:34:42.127
> 
> 标签：ios, core-data

我想从当前实体的字段中获取相关实体的 ID。我怎样才能做到这一点？

例如，假设我有两个实体类。`Company`和`Employee`。`Company`已`Employee`设置。使用 Core Data，我将这样做是为了从公司那里得到它。

```
TTCompany* company = <get company>
TTEmployee* employee = [[company employees] anyObject];
id employeeID = employee.objectID; 
```

我想要得到的只是`employeeID`. 我现在不需要加载员工对象，因为如果需要，我稍后会解决它们。显然，当前公司对象具有员工的 ID。我认为有一种方法可以在不获取任何数据的情况下获得它。

有没有更好的方法在不加载对象的情况下获取 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:07:02.447

如果他们有关系，而不是从公司到员工，您可以在具有给定公司的员工上构建获取请求。然后在执行之前将返回结果类型设置为 NSManagedObjectID。

我在没有测试的情况下写了这个，并且有点冗长以使概念更清晰。

```
NSFetchRequest *myFetchRequest =[[NSFetchRequest alloc] init];
myFetchRequest.entity=<your employee description>;
myFetchRequest.predicate=[NSPredicate predicateWithFormat:@"(company==%@)",yourCompany];
myFetchRequest.setResultType=NSManagedObjectIDResultType;

// execute fetch and the rest.... 
```

# jquery - 带有 jquery 子项的顺序动画

> ID：12089709
> 
> 赞同：2
> 
> 时间：2012-08-23T10:34:44.130
> 
> 标签：jquery, animation

我将一个 html 字符串 (var data['return']) 附加到具有以下形式的 ul 元素 $('#sidebar_append')

```
<li>item one</li>
<li>item two</li>
<li>item three</li> 
```

我想为所有孩子创建一个连续的淡入淡出动画。我尝试了以下方法，但它不会淡入淡出

```
$('#sidebar_append')
    .hide()
    .append(data['return'])
    .children()
    .each(function() {
          $(this).fadeIn('fast')
    }); 
```

这很奇怪，因为当我执行*console.log($(this))*我实际上得到了`li`in firebug 但没有`fadeIn`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:37:16.390

Nevermind, it's pretty simple, I forgot that `$('#sidebar_append')` is still hidden. You also need a delay to create a sequence animation:

```
$('#sidebar_append')
  .append(data['return'])
  .children().hide()
  .each(function(index) {
      $(this).delay(150*index).fadeIn('slow')
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:11:16.873

尝试这个

```
(function(){
    $('#sidebar_append').append(data['return']).children().hide();
    var index=0;
    function show()
    {
        $('#sidebar_append li').eq(index).fadeIn('slow', function(){
            index+=1;
            if($('#sidebar_append li').eq(index).length) show();
            else return false;
        });
    }
    show();
})(); 
```

[**演示**](http://jsfiddle.net/vCAMy/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:22:25.203

连同那个插件[jquery-timing](http://creativecouple.github.com/jquery-timing/)整个事情变得更短：

```
$('#sidebar_append').append(data['return'])
    .children().hide().each($).fadeIn('fast',$); 
```

瞧

# asp.net - 导出到excel后asp.net重新加载页面

> ID：12089712
> 
> 赞同：0
> 
> 时间：2012-08-23T10:35:07.433
> 
> 标签：asp.net, export-to-excel

我有一个页面，可以在单击按钮时将文档导出为 excel。我需要做的是在发送 excel 文档后刷新页面。

我正在尝试注册一个脚本，该脚本将导致页面刷新，但无法在导出到 Excel 的同时进行注册。

```
ScriptManager.RegisterClientScriptBlock(Page, Page.GetType(), "test", "alert('Done');", True)

Response.Clear()
Response.ClearHeaders()
Response.AddHeader("Refresh", "3; url=" + Request.RawUrl)
Response.ContentType = strMimeType
Response.AddHeader("content-disposition", "attachment; filename=CompleteReport." + strFilenameExtension)
Response.BinaryWrite(bytFileContent)
Response.End() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:38:23.023

Basically this can not be done if you want it reloaded only *after* the file has downloaded as it it not possible to find out when that is. Also you are clearing the response out and then writing the excel so the script isn't even returned from the server. The refresh-header is not being used by the browser when downloading a file either.

What you can do is to use the aspx-page to include a script like:

```
function onclick() {
  window.location.href = 'loadmyfile.ashx?parameters...';

  refreshPage();
} 
```

The above will however refresh the page immediately on click so that might not be what you are after.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:45:26.490

你（们）能做到

### 每个请求只有一个响应

（第一个 excel 导出，第二个是刷新）。在第一个 response.end 之后，你什么也做不了。您必须以另一种方式解决excel导出问题，使用组件等。导出后您可以调用

```
Response.redirect("your page"); 
```

# xml - 如何将 XSD 转换为 XSLT？

> ID：12089713
> 
> 赞同：2
> 
> 时间：2012-08-23T10:35:08.413
> 
> 标签：xml, xslt, xsd

我有一个 XSD 架构，我想将其转换为 XSLT 样式表，该样式表复制 XSD 架构中表示的元素。

原因是我只想从它所代表的 XML 文档中提取 XSD 模式中所代表的元素。

任何帮助或建议将不胜感激，在此先感谢，干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:39:20.993

XSD 模式仅描述一个 XML 文档，而 XSLT 将一个 XML 文档转换为另一个，所以我不确定转换器是否是您正在寻找的正确工具。Altova (http://www.altova.com/) 为使用 XML 制作了一些很棒的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:51:14.050

这应该可以通过 XSLT 实现。制作一个普通的 XSLT 转换您的 XML 并使用 document() 函数加载您的 XSD 并检查其中是否提到了该元素（并允许复制）。

加载第二个 XML（在您的情况下为 XSD）：[http ://www.abbeyworkshop.com/howto/xslt/document/](http://www.abbeyworkshop.com/howto/xslt/document/)

# android - 如何用 SAX 解析 rss-feed，其他解析方法？

> ID：12089715
> 
> 赞同：2
> 
> 时间：2012-08-23T10:35:12.750
> 
> 标签：android, parsing, rss

我正在尝试解析多个属性但没有成功。

我很好地解析了这些属性：

```
<id>..</id>
<published>..</published>
<content>..</content>
<title>..</title> 
```

我解析的 xml 图像和我需要的数据： ![在此处输入图像描述](../Images/0740a5dc92bf9c2c387587323f4fc683.png) 但我需要获取带有标签的属性：

```
<media:thumbnail url='http://ww.../> </media:thumbnail>
<media:content url='http://ww.../> </<media:content> 
```

我在某处读到 sax parse 不支持这样做，我当时不明白这是真的。

我使用的代码是执行解析：

```
public class YoutubePARSER {
    private static final String LOGTAG = "LogsAndroid";
    private ArrayList<YoutubeVO> videos = new ArrayList<YoutubeVO>();
    private YoutubeVO video;
    private URL rssUrl;
    final String myString = "http://www.w3.org/2005/Atom";

    SAXParserFactory parser = SAXParserFactory.newInstance(); 

public YoutubePARSER(String url)
{
    try
    {
        this.rssUrl = new URL(url);
    }
    catch (MalformedURLException e)
    {
        throw new RuntimeException(e);
    } 
}

public ArrayList<YoutubeVO> parse()
{
    RootElement root = new RootElement(myString, "feed");
          Element itemPlace = root.getChild(myString, "entry");
          itemPlace.setStartElementListener(new StartElementListener(){
              public void start(Attributes attrs){
                  video = new YoutubeVO();  
              }
          });

      itemPlace.setEndElementListener(new EndElementListener(){
            public void end() {
                videos.add(video);
            }
        });

      itemPlace.getChild(myString, "id").setEndTextElementListener(
              new EndTextElementListener(){
                  public void end(String body) {
                      video.setId(body);
                  }
          });

      itemPlace.getChild(myString, "published").setEndTextElementListener(
    new EndTextElementListener(){
        public void end(String body) {
            video.setPublished(body);
        }
}); 
```

我尝试通过以下方式解析该字段，但没有成功：

```
 itemPlace.getChild(myString, "media:thumbnail").setEndTextElementListener(
 itemPlace.getChild(myString, "media").setEndTextElementListener(
 itemPlace.getChild(myString, "thumbnail").setEndTextElementListener(
 itemPlace.getChild(myString, "media:thumbnail url").setEndTextElementListener( 
```

有什么解决办法？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-30T00:52:05.277

为了能够读取“**媒体：内容**”或任何其他“**媒体：** ”元素，您需要指定媒体**名称空间**。

您在代码中设置了错误的名称空间并使用了**myString="http://www.w3.org/2005/Atom"**

```
itemPlace.getChild(myString, "thumbnail").setEndTextElementListener( 
```

将其更改为正确的命名空间将像一个魅力：

```
itemPlace.getChild("http://search.yahoo.com/mrss/", "thumbnail")setElementListener(new ElementListener() {
        @Override
        public void end() {

        }

        @Override
        public void start(Attributes attributes) {
            String urlAttr = attributes.getValue("url");
        }
    }); 
```

注意：您不需要指定命名空间前缀，只需使用元素名称（在本例中为缩略图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T09:14:43.183

我的解决方案：

```
public class DomParserSampleActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ScrollView mScrView1 = new ScrollView(this);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView id[];
        TextView published[];
        TextView content[];
        TextView title[];

        TextView mediacontent[];
        TextView mediathumbnail[];

        try {
            URL url = new URL(
                    "http://gdata.youtube.com/feeds/api/users/estudiosabiertostv/uploads");
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(url.openStream()));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("entry");

            /** Assign textview array length by arraylist size */
            id = new TextView[nodeList.getLength()];
            published = new TextView[nodeList.getLength()];
            content = new TextView[nodeList.getLength()];
            title = new TextView[nodeList.getLength()];
            mediacontent = new TextView[nodeList.getLength()];
            mediathumbnail = new TextView[nodeList.getLength()];

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                id[i] = new TextView(this);
                published[i] = new TextView(this);
                content[i] = new TextView(this);
                title[i] = new TextView(this);

                Element fstElmnt = (Element) node;

                NodeList idList = fstElmnt.getElementsByTagName("id");
                Element idElement = (Element) idList.item(0);
                idList = idElement.getChildNodes();
                id[i].setText("Id is = "
                        + ((Node) idList.item(0)).getNodeValue());

                Log.v("TAG","id: "+idList.item(0).getNodeValue());

                NodeList publishedList = fstElmnt
                        .getElementsByTagName("published");
                Element publishedElement = (Element) publishedList.item(0);
                publishedList = publishedElement.getChildNodes();
                published[i].setText("published is = "
                        + ((Node) publishedList.item(0)).getNodeValue());

                Log.v("TAG","published: "+publishedList.item(0).getNodeValue());

                NodeList contentList = fstElmnt.getElementsByTagName("content");
                Element contentElement = (Element) contentList.item(0);
                contentList = contentElement.getChildNodes();
                content[i].setText("content is = "
                        + ((Node) contentList.item(0)).getNodeValue());

                Log.v("TAG","content: "+contentList.item(0).getNodeValue());

                NodeList titleList = fstElmnt.getElementsByTagName("title");
                Element titleElement = (Element) titleList.item(0);
                titleList = titleElement.getChildNodes();
                title[i].setText("title is = "
                        + ((Node) titleList.item(0)).getNodeValue());

                Log.v("TAG","titulo: "+titleList.item(0).getNodeValue());

                NodeList nodeList1 = fstElmnt
                        .getElementsByTagName("media:group");

                for (int j = 0; j < nodeList1.getLength(); j++) {
                    Node node1 = nodeList1.item(j);
                    mediacontent[j] = new TextView(this);
                    mediathumbnail[j] = new TextView(this);

                    Element secondElmnt = (Element) node1;

                    NodeList mediacontentList = secondElmnt
                            .getElementsByTagName("media:content");
                    Element mediacontentElement = (Element) mediacontentList
                            .item(0);
                    mediacontent[j].setText("mediacontent url is = "
                            + mediacontentElement.getAttribute("url"));

                    Log.v("TAG","MEDIACONTENT: "+mediacontentElement.getAttribute("url"));

                    NodeList mediathumbnailList = secondElmnt
                            .getElementsByTagName("media:thumbnail");
                    Element mediathumbnailElement = (Element) mediathumbnailList
                            .item(0);
                    mediathumbnail[j].setText("mediathumbnail url is = "
                            + mediathumbnailElement.getAttribute("url"));

                    Log.v("TAG","MEDIATHUMBNAIL: "+mediathumbnailElement.getAttribute("url"));

                    layout.addView(mediacontent[j]);
                    layout.addView(mediathumbnail[j]);
                }

                layout.addView(id[i]);
                layout.addView(published[i]);
                layout.addView(content[i]);
                layout.addView(title[i]);

            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        /** Set the layout view to display */

        mScrView1.addView(layout);
        setContentView(mScrView1);
    }
} 
```

不要忘记在线程中这样做或失败，请在 onCreate() 之后使用这些行

```
 StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
.permitAll().build();
    StrictMode.setThreadPolicy(policy); 
```

# ios - NSURLCache 不支持 file://？

> ID：12089719
> 
> 赞同：0
> 
> 时间：2012-08-23T10:35:25.853
> 
> 标签：ios, nsurlcache, local-files

我想`[NSURL fileURLWithPath:@"2.html"]`在`UIWebView`使用中加载`NSURLCache`，执行 cachedResponseForRequest: 函数并返回一个`NSCachedURLResponse`在 http:// 方案中正确执行的对象。
但`UIWebView`最终加载失败。我错过了一些可选的吗？

我想`UIWebView`在压缩文件中使用加载 html 文件，并且我不希望将文件解压缩到磁盘。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:43:30.710

做这个：

```
 NSURL *url = [[NSBundle mainBundle] URLForResource:@"2" withExtension:@"html"];
 NSString *html = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];
 NSURL *baseUrl = [NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]];
 [webView loadHTMLString:html baseURL:baseUrl]; 
```

# spring - 如何在不使用 hibernate.xml 配置文件的情况下集成 LiquiBase + Spring + Hibernate

> ID：12089721
> 
> 赞同：8
> 
> 时间：2012-08-23T10:35:31.580
> 
> 标签：spring, hibernate, ant, annotations, liquibase

我已经阅读了很多关于 LiquiBase、Spring 和 Hibernate 之间集成的帖子，但没有一个适用于我的情况，女巫是：

我正在开始一个使用 Spring 和 Hibernate 的新项目，因此我正在寻找一种在项目生命周期内管理数据库更改的方法。首先我开始使用 hbm2ddl，但后来意识到人们说这在生产环境中不是一个好主意，所以我得出结论 LiquiBase 是要走的路（所以我认为）。

问题是我没有使用 hibernate.xml 配置文件（并且我发现使用 LiquiBase 的所有示例都使用 hibernate.xml），因为我在我的 POJO/DB 类中使用 java 注释并且我的休眠配置是像这样

```
@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() throws ClassNotFoundException
{
    LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();

    entityManagerFactoryBean.setDataSource(dataSource());
    entityManagerFactoryBean.setPackagesToScan(environment.getRequiredProperty(PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN));
    entityManagerFactoryBean.setPersistenceProviderClass(HibernatePersistence.class);

    Properties jpaProterties = new Properties();
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_DIALECT, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_DIALECT));
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_FORMAT_SQL, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_FORMAT_SQL));
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY));
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_SHOW_SQL, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_SHOW_SQL));
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_HBM2DDL_AUTO, environment.getRequiredProperty(PROPERTY_NAME_HIBERNATE_HBM2DDL_AUTO));

    entityManagerFactoryBean.setJpaProperties(jpaProterties);

    return entityManagerFactoryBean;
} 
```

我还发现 2 年前的帖子说此选项仅在 2.0 版（当前版本）中可用，我想知道这是否已经实现。如果是这样，我如何在 ANT 脚本中使用它？

我需要创建原始数据库 DDL 和以下数据库更改日志并将它们导入生产数据库。

**编辑：**我正在使用：

Liquibase 2.0.5

Liquibase 休眠 2.0.0

休眠 4.1.4

春天 3.1.1

春季数据 JPA 1.1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:36:51.057

你看过[http://www.liquibase.org/documentation/spring.html](http://www.liquibase.org/documentation/spring.html)吗？

它提到了 dataSource 并且没有 hibernate.xml。

对于初始生成，您可以使用命令行模式和`generateChangeLog`.

请参阅[http://www.liquibase.org/documentation/command_line.html](http://www.liquibase.org/documentation/command_line.html)。

`hibernate.xfg.xml`这是您将需要的最低要求：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
                "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory name="entityManagerFactoryBean">
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://127.0.0.1:3307/test</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password">123456</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    </session-factory>
</hibernate-configuration> 
```

# javascript - Values get converted to UNICODE when sent by Python in Javascript

> ID：12089722
> 
> 赞同：3
> 
> 时间：2012-08-23T10:35:41.657
> 
> 标签：javascript, python, django

I have a small problem when my code is retrieved by javaScript from Python, i get unicode values to my script where my browser gives an error in the developer console.

The script inside my archive.html page -

```
<script>
    var results = {{myposts}};
    console.log(results);
</script> 
```

My Python code -

```
def archive(request):
    test = ["a","b","c"]
    t = loader.get_template("archive.html")
    c = Context({'myposts' : test})
    return HttpResponse(t.render(c)) 
```

I tried `c = Context({'myposts' : simplejson.dumps(test)})` , but it gave the problem. My browsers give me and arror **Uncaught SyntaxError: Unexpected token &** and my console shows my array with unicode values `[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]`

How do i make it look like - `["a","b","c"]`

What do i change in my Python code or JavaScript

Thanks for the help in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:07:54.410

看起来它在输出时得到了 HTML 转义。如果你这样做怎么办？：

```
var results = {{ myposts|safe }}; 
```

（谨慎使用——您可能希望根据数据的来源执行一些转义。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:40:19.163

在模板中试试这个：

```
<script>
    var results = {{ myposts|escapejs }};
    console.log(results);
</script> 
```

编辑：

在视图中：

```
from django.utils import simplejson

def archive(request):
    test = ["a","b","c"]
    t = loader.get_template("archive.html")
    c = Context(simplejson.dumps({'myposts' : test}))
    return HttpResponse(t.render(c)) 
```

# c++ - How to preallocate memory for a std::map or QMap?

> ID：12089728
> 
> 赞同：2
> 
> 时间：2012-08-23T10:35:57.683
> 
> 标签：c++, qt, stl

I am developing a program, where performance is critical. There I use a `QMultiMap`, which is a class provided by the Qt framework, similar to `std::map`.

```
QMultiMap<int, SomeClass> heavilyUsedMap;

void prepareMap()
{
    ...
    heavilyUsedMap.reserve(nEntries); // There is no reserve.
    // fill heavilyUsedMap with a known number of entries.
}

void useMap()
{
    // computations
    heavilyUsedMap.clear();
} 
```

I use `prepareMap()` a lot. When I want to optimize, it would make sense to allocate the memory for `heavilyUsedMap` .

Indeed the containers: `QVector<T>`, `QHash<Key, T>`, `QSet<T>`, `QString`, and `QByteArray` all provide this possibility, but `QMap<Key, T>` and `QMultiMap<Key, T>` don't.

Why is this so and how can I preallocate memory for the `QMap<Key, T>` and `QMultiMap<Key, T>`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:39:35.650

map 是一个*基于节点的*容器，因此每个元素都是单独分配的。没有“预分配”之类的东西，它没有任何优势（即花费的总时间相同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T10:37:34.517

It's most likely backed by a binary search tree, so preallocation isn't common as it is usually a linked structure with each node dynamically allocated as required.

If order is not important consider using a hash map instead, you can preallocate and it is also more performant generally. So `QHashMap<int, SomeClass>`.

I also see your key type is int, if the domain is sufficiently small you can use a perfect hash which is essentially an array. So `QVector<SomeClass>`, which will be even more performant than a hash map.

# ruby-on-rails - 如何设置 PDFkit 的路径（gem 找不到 wkhtmltopdf）？

> ID：12089732
> 
> 赞同：0
> 
> 时间：2012-08-23T10:36:16.443
> 
> 标签：ruby-on-rails, gem, pdfkit

我在 Windows 上运行 Rails 并安装了 wkhtmltopdf（路径 - C:\Users\User\local\bin）。我正在尝试使用文档 - [https://github.com/pdfkit/pdfkit#configuration](https://github.com/pdfkit/pdfkit#configuration)对其进行配置。但它给了我关于路径的错误。

我在初始化程序文件夹中创建了 pdfkit.rb 文件并写了这个：

```
PDFKit.configure do |config|
  config.wkhtmltopdf = "C:Users/User/local/bin"
  config.default_options = {
 :page_size => 'Legal',
 :print_media_type => true
 }
end 
```

但它给了我错误

```
 No wkhtmltopdf executable found at C:Users/User/local/bin
    >> Please install wkhtmltopdf - https://github.com/jdpace/PDFKit/wiki/Installing-WKHTMLTOPDF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:18:26.693

您需要指定整个可执行路径并**在后面加上一个斜杠** `C:`

路径应如下所示：`C:/Users/User/local/bin/wkhtmltopdf.exe`还考虑您可以在 Windows 中使用反斜杠 \ 而不是斜杠 /

# oracle - ORACLE Mutating trigger error

> ID：12089735
> 
> 赞同：0
> 
> 时间：2012-08-23T10:36:21.270
> 
> 标签：oracle, triggers

> **Possible Duplicate:**
> [ORACLE After update trigger: solving ORA-04091 mutating table error](https://stackoverflow.com/questions/6915325/oracle-after-update-trigger-solving-ora-04091-mutating-table-error)

So I have a trigger to check if a an admin has been locked out of login (if they are they will have a 1 set to temp_pw. It then send the admin a four digit pass code to unlock their account. Problem is I update the failed_logins field, incrementing it by 1 for every failed login before the trigger is called.

The rest of the trigger checks if there is an admin has a locked account before sending them an email with a pass code.

If I take out the *Update Pi_admin_table set blah blah* it sends the email but if I include it to insert the new pass code in the table it errors with this:

```
 Message: 60 ORA-00060: deadlock detected while waiting for resource
 ORA-06512: at "PI_USER_ADMIN.TR_ADMIN_LOCKOUT", line 17
 ORA-04088: error during execution of trigger
 'PI_USER_ADMIN.TR_ADMIN_LOCKOUT' UPDATE *pi_admin_table SET
 failed_logins = failed_logins + 1 where
 EMAIL='nathan@perceptive.co.uk' returning failed_logins into :bind_var 
```

Here's my trigger:

```
create or replace
TRIGGER "TR_ADMIN_LOCKOUT" 
AFTER UPDATE ON PI_ADMIN_TABLE
for each row
declare
-- pragma autonomous_transaction seems to fix trigger mutation errors. 
-- Look at rewriting trigger later.
--pragma autonomous_transaction;
tempEmail varchar2(80 BYTE);
tempID varchar2(80 BYTE);
mail_host varchar2(255);
mail_port varchar2(255);
mail_from varchar2(255);
tempPW int;
begin
  SELECT EMAIL, ADMINID
    into tempEmail, tempID
    from pi_admin_table
    where TEMP_PW = :NEW.TEMP_PW;

  SELECT MAIL_HOST, MAIL_PORT, MAIL_FROM
    into mail_host, mail_port, mail_from
    from pi_settings_table;

  select dbms_random.value(1,10000)
    into tempPW
    from dual;

  if tempEmail IS NOT NULL then
    UPDATE PI_ADMIN_TABLE SET RESET_PW=round(tempPW) where adminid=tempID;
    send_mail(tempEmail,
              mail_host,
              mail_port,
              mail_from,
              'Locked Out Event',
              'Your administrator account was locked out. '|| chr(10) || chr(10) ||
              'Please use this four digit pass code next time try to log in' ||
              chr(10) || chr(10) ||  
              'Temp pass code: '|| round(tempPW) );
  end if;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:50:29.053

Oracle 不允许 ROW 触发器中的代码对定义触发器的表发出 SELECT、INSERT、UPDATE 或 DELETE。您的选择是使用 AUTONOMOUS TRANSACTION（但请参阅[上面@Ben 评论中引用的帖子中](https://stackoverflow.com/questions/6915325/oracle-after-update-trigger-solving-ora-04091-mutating-table-error)的警告）或使用 COMPOUND TRIGGER。

分享和享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:34:38.103

我建议您不要为该任务使用触发器。将您试图在存储过程中实现的逻辑封装起来。

# java - 用于提高性能的阵列比较的替代方案

> ID：12089740
> 
> 赞同：0
> 
> 时间：2012-08-23T10:36:35.530
> 
> 标签：java, android, performance, cpu-usage

我有一个每隔一秒`thread`比较两个长的（显然一个数组列表发生了变化，所以我比较了）。`arraylist`性能降低，CPU 利用率急剧增加。我想知道提高 CPU 性能的解决方案。有什么好方法？除了使用数组列表还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:40:02.000

您可以保留 ArrayList 并存储它是否已更改。所以，如果你改变它，做类似的事情`boolean changed = true`。然后，当您要检查时，无需遍历整个列表，只需检查`if(changed)`. 然后记得在`changed = false`每次检查时进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:08:44.303

Java Collections 框架包含用于对 ArrayList（以及其他集合）进行排序的方法，这些方法比冒泡排序的实现更有效，这是 O(n^2)，最坏的情况 - 你将能够实现 O (n log n) 使用集合。

用法将是：

Collections.sort(yourArrayList);

这里有一个用法示例：http: [//onjava.com/onjava/2003/03/12/java_comp.html](http://onjava.com/onjava/2003/03/12/java_comp.html)

# linux - 需要检查文件是否存在？

> ID：12089747
> 
> 赞同：1
> 
> 时间：2012-08-23T10:37:24.800
> 
> 标签：linux, perl, shell, awk, ksh

在一个文件夹中，我有一些文件

```
UEDP01_20120821.csv
UEDP02_20120821.csv
UEDP03_20120821.csv
UEDP04_20120821.csv
UEDP05_20120821.csv 
```

只想检查所有文件是否存在。如果缺少任何一个文件，需要创建一个同名的空文件。

例如：

```
UEDP01_20120821.csv
UEDP02_20120821.csv
UEDP04_20120821.csv
UEDP05_20120821.csv 
```

**UDP03_20120821.csv**如果缺少此文件，则需要创建相同的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:29:49.113

如果`file.txt`是您的文件列表，在 bash 中：

```
while read fname; do
    [[ -f $fname ]] || touch "$fname"
done < file.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T11:08:51.630

为什么你需要一个脚本呢？

正如 dennis 建议的那样，您可以使用 -a 来更改现有文件的访问时间。

```
 touch -a UEDP0{1..5}_20120821.csv 
```

将直接创建丢失的文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T10:48:16.207

外壳脚本：-

```
for i in {1..5}
do
file="UEDP0${i}_20120821.csv"
if [ -f $file ]
then
    echo the file exists
else
 >$file
fi
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T10:53:24.407

如果您的文件列表动态更改，那么您可以在另一个文件中拥有一个文件列表，这样会更容易：

如果您将文件放在名为`list`then 的文件中：

`list`将有以下内容：

```
 UEDP01_20120821.csv
  UEDP02_20120821.csv
  UEDP03_20120821.csv
  UEDP04_20120821.csv
  UEDP05_20120821.csv 
```

* * *

```
awk 'system("touch "$1"");' list 
```

如果文件不存在，将创建文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-23T10:44:07.993

只需打开一个文件进行输出即可为您创建它。

你没有说你的文件名列表来自哪里，但是在下面的程序中我已经硬编码了它。

请注意，没有必要关闭文件句柄`$fh`，因为当变量在循环的每个循环结束时超出范围时，Perl 会自动关闭它。

[`-e`操作员](http://perldoc.perl.org/functions/-X.html)将检查文件是否存在。`-f`或者，如果节点存在*且不是目录*，您可以使用which is true 。如果已经有同名目录，`open`则将失败

```
use strict;
use warnings;

my @files = qw/
  UEDP01_20120821.csv
  UEDP02_20120821.csv
  UEDP03_20120821.csv
  UEDP04_20120821.csv
  UEDP05_20120821.csv
/;

for my $file (@files) {
  open my $fh, '>', $file or die $! unless -e $file;
} 
```

* * *

**更新**

正如 Bill Ruppert 所建议的，您可能更喜欢打开文件进行追加，无论它们是否存在。如有必要，这将创建文件，但如果它们已经存在，则保持原样

```
use strict;
use warnings;

my @files = qw/
  UEDP01_20120821.csv
  UEDP02_20120821.csv
  UEDP03_20120821.csv
  UEDP04_20120821.csv
  UEDP05_20120821.csv
/;

open my $fh, '>>', $_ or die $! for @files; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-23T10:45:53.890

这个怎么样？检查名称的常规文件是否存在。如果没有，请创建它。

```
#!/usr/bin/perl
use strict;
use warnings;

my @files = qw(
    UEDP01_20120821.csv
    UEDP02_20120821.csv
    UEDP03_20120821.csv
    UEDP04_20120821.csv
    UEDP05_20120821.csv
);

for my $file (@files) {
    next if -f $file;
    open my $fh, '>', $file or die $!;
} 
```

# javascript - Twitter bootstrap手风琴折叠功能

> ID：12089750
> 
> 赞同：4
> 
> 时间：2012-08-23T10:37:41.260
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在使用 twitter 引导 css 和 js 框架。在这个例子中，我有两个可折叠的 div，和 .

目前两个 div 可以同时展开。

我希望它们的工作方式是一次只能扩展一个 div。例如，如果#about 被展开并且用户点击#videos，#about 将被折叠并且#videos 将在其位置展开。

是否有捷径可寻？

```
<div id="main" class="span12">
      <div class="row">

         <div class="span4">
            <a href="#" data-target="#about" data-toggle="collapse">
                <div class="unit red bloat">
                   <h3>About</h3>
                     <p>A Melbourne based social clan who enjoy a range of MMO, RTS and action based titles. Take a look at what we're all about.</p>

                </div>
            </a>
         </div>

         <div class="span4">
            <a href="#" data-target="#videos" data-toggle="collapse">
                <div class="unit red bloat">
                   <h3>Videos</h3>
                    <p>A selection of our best videos, of both the good times and the bad. Due to the poor nature of it's content, viewer discretion is advised and should not be viewed by anyone. </p>

                </div>
            </a>
         </div>

         <div class="span4">
            <a href="forums/index.php">
                 <div class="unit grey bloat">
                <h3>Forum</h3>
                  <p>If you think you'd fit in here, click this box and sign up to our forum. </p>

                 </div>
            </a>
         </div>

</div><!-- end row -->

            <br />
            <br />

             <div class="row-fluid">
                <div class="span12">

                <!-- start accord -->

        <div id="about" class="collapse">
            <div class="row-fluid">
                <div class="expanded">
                    <p>about</p>
                </div>
            </div>
        </div>

        <div id="videos" class="collapse">
            <div class="row-fluid">
                <div class="expanded">
                    <p>vid</p>
                </div>
            </div>
        </div>

                <!-- end accord -->

                </div>
            </div>

      <hr><!-- Bottom border -->

    </div> <!-- /container --> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T12:06:58.527

通过遵循引导示例，我能够使其工作。必须使用数据父标签而不是数据目标。

这是工作示例；

```
<div id="main" class="span12">
    <div class="row">
        <div class="span4">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                <div class="unit grey bloat">
                    <h3>Heading 1</h3>
                    <p>Paragraph 1</p>
                </div>
            </a>
        </div>
        <div class="span4">
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                <div class="unit grey bloat">
                    <h3>Heading 2</h3>
                    <p>Paragraph 2</p>
                </div>
            </a>
        </div>
        <div class="span4">
            <a href="#">
                <div class="unit grey bloat">
                    <h3>Heading 3</h3>
                    <p>Paragraph 3</p>
                </div>
            </a>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12"> 
            <div class="accordion" id="accordion2">
                <div class="accordion-group">
                    <div id="collapseOne" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="expanded">
                                <p>Expanded 1</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="accordion-group">
                    <div id="collapseTwo" class="accordion-body collapse">
                        <div class="accordion-inner">
                            <div class="expanded">
                                <p>Expanded 2</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> <!-- /container --> 
```

# asp.net - Asp.net 开发服务器作为 Web 服务器

> ID：12089751
> 
> 赞同：1
> 
> 时间：2012-08-23T10:37:48.963
> 
> 标签：asp.net

是否可以将 asp.net 开发服务器配置为 80 端口的 Web 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:00:34.613

不使用 VS 的内置 Web 服务器，不，但是如果您强烈反对使用 IIS，您可以从[这里下载 Cassini（对于 .NET <= 3.5）或更新的服务器](http://ultidev.com/products/UWS-Cassini-Pro/Default.aspx)

# javascript - Console shows error about Content Security policy and lots of failed GET requests

> ID：12089752
> 
> 赞同：3
> 
> 时间：2012-08-23T10:37:50.837
> 
> 标签：javascript, google-chrome, dom, google-chrome-extension, content-security-policy

I'm actually working on my first Chrome Extension and *even if it run smooth* i got a lot of error from the `get()` function i'm using to retrieve some data and an annoying error about the security of the code.

Here's a [screenshot of the console log](https://i.imgur.com/ohyir.png): ![Console Log](../Images/d615af51eb8a9cd91dd3cd68b4943785.png)

Following there's the code involved:

## popup.html

```
<!doctype html>
<html>
<head>
    <title>NGI Little Helper - Subscribes</title>
    <link rel="stylesheet" href="popup.css">
    <!-- JavaScript and HTML must be in separate files for security. -->
    <script type="text/javascript" src="common/jquery.js"></script>
    <script type="text/javascript" src="popup.js"></script>
</head>

<body>
    <h1>Topics</h1>
    <div id="content">..:: Loading ::..</div>
</body>
</html> 
```

## popup.js

This script start making a `$.get()` to a remote web page. The content of the variable `data` can be found [here](http://pastebin.com/h2z1uvRk)

```
$.get("http://gaming.ngi.it/subscription.php?do=viewsubscription", function(data) {
    var TDs = $('td[id*="td_threadtitle_"]', data);
    $(document).ready(function() {
        $("#content").html("<br/>");
        $.each( TDs, function() {
            //Removes useless elements from the source
            $('img[src="images/misc/tag.png"]', this).remove();
            $('span', this).remove(); //$('span[class="smallfont"]', this).remove();
            $('div[class="smallfont"]', this).remove();
            $('img[src="images/buttons/firstnew.gif"]', this).attr('src', '/img/icons/comment.gif');
            $('a[style="font-weight:bold"]', this).removeAttr("style");
            //Modify the lenght of the strings
            if ($("a[id^='thread_title_']", this).text().length > 35) {
                $("a[id^='thread_title_']", this).text( $("a[id^='thread_title_']", this).text().substring(0, 30) + " [...]" );
            }
            //Modify the URL from relative to absolute and add the target="_newtab"
            $("a[id^='thread_']", this).attr('href', "http://gaming.ngi.it/"+ $("a[id^='thread_']", this).attr('href'));
            $("a[id^='thread_']", this).attr('target', "_newtab");
            //Send the HTML modified to the popup window
            $("#content").html($("#content").html() + $('div', this).wrap("<span></span>").parent().html() +"<br/>" );
        });
    });
}); 
```

[Here](http://pastebin.com/sBjhL0DP) you can find the HTML after all the manipulation from jquery.

Honestly i cannot understand why these error show, especially the one related to the security. I've not used any inline code in my popup.html.

## Manifest.json

```
{
    "name": "NGI Little Helper",
    "version": "0.8.5",
    "manifest_version": 2,
    "description": "Extension per gli Utenti del forum gaming.ngi.it",
    "options_page": "fancy-settings/source/index.html",
    "background": {
        "page": "background.html"
    },
    "icons": {
        "16": "img/logo16.png",
        "48": "img/logo48.png",
        "128": "img/logo128.png"
    },
    "content_scripts": [{
        "matches": ["*://gaming.ngi.it/*"],
        "js": ["common/jquery.js", "logo_changer/logo_change.js"],
        "run_at": "document_start"
    }],
    "browser_action": {
        "default_icon": "img/icon.png",
        "default_popup": "popup.html",
        "default_title": "Visualizza Subscriptions"
    },
    "permissions": [
        "*://gaming.ngi.it/*"
    ]
} 
```

The following is a piece of HTML code that will be rendered into the popup window after all the manipulation. All the `div` is similar to this, just the url changes:

```
<div>

            <a href="http://gaming.ngi.it/showthread.php?goto=newpost&amp;t=555954" id="thread_gotonew_555954" target="_newtab"><img class="inlineimg" src="/img/icons/comment.gif" alt="Go to first new post" border="0"></a>

            <a href="http://gaming.ngi.it/showthread.php?goto=newpost&amp;t=555954" id="thread_title_555954" target="_newtab">[All Gamez] [Frozen Synapse] S [...]</a>

        </div> 
```

If needed i can provide the full source code.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T22:34:41.487

让我们从最简单的问题开始：

## 拒绝执行内联脚本，因为...

`$('div', this)`选择a 中`<div>`的所有元素`<td>`。在您提供的[源代码](http://pastebin.com/raw.php?i=pvrmymsq)中，可以找到以下事件处理程序：

```
<div class="smallfont">
    <span style="cursor:pointer" onclick="window.open('member.php?u=47995', '_self')" >K4raMong</span>
</div>
```

默认情况下，[内容安全策略](https://developer.chrome.com/extensions/contentSecurityPolicy)是禁止的。要摆脱错误，只需在将其插入文档之前删除该属性：

```
element.removeAttribute('onclick'); // in jQuery: $element.removeAttr('onclick'); 
```

# 为什么要加载这些图像？我没有把它们放在文档中

在 jQuery/JavaScript 可以操作 DOM 之前，必须先对其进行解析。在您的代码中，这项工作在`var TDs = $(.., data)`. 线。这个解析大约等于：

```
var dummy = document.createElement('div'); // Container
dummy.innerHTML = data; 
```

听说过预加载图像吗？这是缓存图像的有用功能，以便在需要时准备好它们。这可以使用`(new Image).src='...';`. 创建的`<img>`元素不必插入到文档中。

在您的情况下，这是不受欢迎的行为，因为这些图像是在您的扩展程序中查找的。这是因为您的网页使用了*相对 URL*，而不是绝对 URL。使用相对 URL 时，资源的预期位置取决于当前文档的位置。

## 如何修复它

**不要*使用*jQuery**。由于您正在编写 Chrome 扩展程序，因此您无需担心跨浏览器兼容性。jQuery 使用该`innerHTML`技巧来解析 HTML，但失败了，正如我之前所展示的。

JavaScript 有[`DOMParser`](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)对象，从 Chrome 30 开始可以如下使用：

```
var doc = (new DOMParser).parseFromString(data, 'text/html'); 
```

您可以使用该属性跳过从字符串到文档的手动转换`responseType`，如下所示。

### 到达解决方案

`permissions`如您所知，只要 URL 正确添加到清单文件中的部分，Chrome 扩展程序中就可以进行跨站点请求。我们将使用 XMLHttpRequest 级别 2 中引入的一个特性，即[`responseType`属性](https://developer.mozilla.org/en-US/docs/HTML_in_XMLHttpRequest)。

```
// Fetching data
var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://gaming.ngi.it/subscription.php?do=viewsubscription');
xhr.onload = function() {
    var doc = xhr.response;
    // Now, you can use jQuery, since the string has been parsed.
    ...
};
xhr.responseType = 'document'; // Chrome 18+
xhr.send(); 
```

您可以轻松地重写代码以使用本机 DOM 和 JavaScript 而不是 jQuery。大多数使用 jQuery 作为选择器引擎，但大多数情况下，它也可以使用[`element.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll). 使用 获取文档后`var doc = xhr.response;`，执行以下操作：

```
var TDs = doc.querySelectorAll('td[id*="td_threadtitle_"]');
var html = '';
[].forEach.call(TDs, function(td) {
    // etc, etc. Do your job
}); 
```

你看到了`var html = '';`吗？这是一个很好的做法，无论您是否使用 jQuery。永远不要在循环中做`element.innerHTML += ...;`，甚至更糟。`$element.html($element.html() + ...);`浏览器将很难一遍又一遍地渲染它，并且您 - 作为用户 - 会注意到性能下降。

# entity-framework - Entity Framework - Error while trying to call parametrized function

> ID：12089756
> 
> 赞同：1
> 
> 时间：2012-08-23T10:37:57.963
> 
> 标签：entity-framework, entity-framework-4, oracle11g

I've mapped some function that is being used as a wrapper for the one of the Oracle functions (I really need to call that Oracle function from my LINQ).

**My mapping looks like (Storage Model):**

```
<Function Name="RunTranslate" IsComposable="false" BuiltIn="false">
    <CommandText>
        SELECT Translate(@DataToTranslate using char_cs) AS ResultData FROM dual
    </CommandText>
    <Parameter Name="DataToTranslate" Type="char" Mode="In" />
</Function> 
```

**And:**

```
<FunctionImport Name="OracleTranslate" ReturnType="Collection(String)">
    <Parameter Name="DataToTranslate" Mode="In" Type="String" />
</FunctionImport> 
```

**I try to use it from the code this way:**

```
using (var context = new TestEntities())
{
    ....

    var result = from myData in context.OracleTranslate("test")
                 select myData;    // Error ORA-00936!
    ....
} 
```

I tried to use Entity Framework Profiler (EFProf) to see the query that is actually being sent to the DB. Intercepted query is the next:

```
SELECT Translate('test' /*@DataToTranslate*/ using char_cs) AS ResultData FROM dual 
```

(looks fine)

But my application stops with the next error: **ORA-00936: missing expression**

If I copy-paste the intercepted query into the VS2010's Server Explorer Query Window - it works! DB returns correct data to me!

So, where the problem can be? What is the difference between the code and the query window in my case? I thought they use the same provider, etc...

Thank you very much!

**EDIT**:

I've just used standard Inet-sniffer to check the real data that is being sent over the sockets and Internet when I run my query.

And it's not the same with the first one! It's exactly my source SQL query:

**SELECT Translate(@DataToTranslate using char_cs) AS ResultData FROM dual**

It seems, that parameter is not recognized, but why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:14:18.403

我找到了解决方案，希望此信息对某人有所帮助：

DataToTranslate 参数应映射为冒号 (":DataToTranslate")，而不是 "@"。

另一个重要的经验（对我而言）：Entity Framework Profiler (EFProf) 显示了它想要的东西，而不是真实的数据——使用像 Wireshark 这样的 TCP 嗅探器来查看数据要好得多。

# c# - 如何将 HtmlGenericControl 转换为 WebControl？

> ID：12089762
> 
> 赞同：1
> 
> 时间：2012-08-23T10:38:11.523
> 
> 标签：c#, asp.net, htmlgenericcontrol

...我正在尝试使用此代码向我的 ASP 控件动态添加或删除类（我通过我的伟大结对编程朋友找到的，他被称为“Mr G”）

```
public static class WebHelper
{
    public static void AddCssClass(this WebControl control, string cssClass) {
        List<string> classes;
        if (!string.IsNullOrWhiteSpace(control.CssClass)) 
        {
            classes = control.CssClass.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
            if (!classes.Contains(cssClass))
                classes.Add(cssClass);
        }
        else
        {
            classes = new List<string> { cssClass };
        }
        control.CssClass = string.Join(" ", classes.ToArray());
    }

    public static void RemoveCssClass(this WebControl control, string cssClass)
    {
        List<string> classes = new List<string>();
        if (!string.IsNullOrWhiteSpace(control.CssClass))
        {
            classes = control.CssClass.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
        }
        classes.Remove(cssClass);
        control.CssClass = string.Join(" ", classes.ToArray());
    }
} 
```

不幸的是，我找不到将我的 HtmlGenericControls 传递给他们的方法......我已经尝试了显而易见的方法：

```
WebControl test1 = (WebControl)Page.FindControl("divcontent");
WebHelper.AddCssClass(test1, centredClass); 
```

但我得到：System.InvalidCastException：无法将“System.Web.UI.HtmlControls.HtmlGenericControl”类型的对象转换为“System.Web.UI.WebControls.WebControl”。

我在 C#、Visual Studio 等方面仍然相对缺乏经验，因为我的背景是 Ye Olde Pick BASIC，所以请简单解释一下我是如何进行控制或修改代码以实现能够添加或删除的最终目标类而不丢失任何现有的类。

非常感谢！罗斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T10:47:51.143

你用错了朋友类。WebHelper 中的方法是扩展方法，因此它应该如下所示：

```
WebControl test1 = (WebControl)Page.FindControl("divcontent");
test1.AddCssClass("something"); 
```

（已验证它有效）。确保您的控件派生自`WebControl`并且已`runat="server"`设置。

**编辑：修改 WebHelper 以支持 HtmlControls**

```
public static class WebHelper
{
    public static void AddCssClass(this HtmlControl control, string cssClass)
    {
        List<string> classes;
        if (!string.IsNullOrWhiteSpace(control.Attributes["class"]))
        {
            classes = control.Attributes["class"].Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
            if (!classes.Contains(cssClass))
                classes.Add(cssClass);
        }
        else
        {
            classes = new List<string> { cssClass };
        }
        control.Attributes["class"] = string.Join(" ", classes.ToArray());
    }

    public static void RemoveCssClass(this HtmlControl control, string cssClass)
    {
        List<string> classes = new List<string>();
        if (!string.IsNullOrWhiteSpace(control.Attributes["class"]))
        {
            classes = control.Attributes["class"].Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
        }
        classes.Remove(cssClass);
        control.Attributes["class"] = string.Join(" ", classes.ToArray());
    }

    public static void AddCssClass(this WebControl control, string cssClass)
    {
        List<string> classes;
        if (!string.IsNullOrWhiteSpace(control.CssClass))
        {
            classes = control.CssClass.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
            if (!classes.Contains(cssClass))
                classes.Add(cssClass);
        }
        else
        {
            classes = new List<string> { cssClass };
        }
        control.CssClass = string.Join(" ", classes.ToArray());
    }

    public static void RemoveCssClass(this WebControl control, string cssClass)
    {
        List<string> classes = new List<string>();
        if (!string.IsNullOrWhiteSpace(control.CssClass))
        {
            classes = control.CssClass.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).ToList();
        }
        classes.Remove(cssClass);
        control.CssClass = string.Join(" ", classes.ToArray());
    }
} 
```

随意根据需要修改代码。一切都保持不变，只是为 HtmlControl 添加了扩展方法，因为如果要修改 HtmlControl 的类，则需要使用`control.Attributes["class"]`，因为没有`CssClass`属性。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:18:53.450

使用`asp:Panel`控制`divcontent`代替`div runat="server"`

# ruby - Ruby 1.9.3 中的摘要::MD5

> ID：12089764
> 
> 赞同：8
> 
> 时间：2012-08-23T10:38:15.190
> 
> 标签：ruby, rubygems, md5, irb, ruby-1.9.3

我在这里遇到了一些奇怪的事情。我有一个“身份验证器”，它依赖 ND5 来散列我们匹配为密码的某个字符串。我运行测试时的问题是：

```
NoMethodError: undefined method `md5' for #<CASServer::Authenticators::Billing:0x007fd8e6c906a0>
./models/authenticators/billing.rb:63:in `validate'
./routes/login.rb:166:in `block (2 levels) in <class:Server>'
./routes/login.rb:158:in `each'
./routes/login.rb:158:in `block in <class:Server>'
(eval):2:in `click_button'
./features/step_definitions/when_steps.rb:32:in `/^I enter "(.*)" as username and the generated username password and log in$/'
./features/rubycas.login.feature:14:in `When I enter "username" as username and the generated username password and log in' 
```

所以基本上他不承认 MD5 是 Digest 库的一部分。在 IDE 以及 IRB 控制台中运行测试时会出现此问题：

```
1.9.3-p125 :001 > require "digest/md5" and Digest::MD5("test")
NoMethodError: undefined method `MD5' for Digest:Module 
```

但是，当我运行以下命令时：

```
[root@DCUDEV01 /home/morn/rubycas/current]# ruby
require "digest/md5" and Digest::MD5("test") 
```

我没有收到任何错误、转储或异常。Ruby 只是接受它。为了让这些 MD5 工作正常，我缺少什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-23T10:48:23.557

Digest::MD5 不是方法而是模块。尝试

```
Digest::MD5.digest("test") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-02T13:50:25.200

我发现它令人困惑，它似乎不`.digest`正确。我也不能说是错的...

评论者@reconbot 说得对，IMO，但我只是在回来改进这个 QA 后才看到评论，我认为评论不够明显。

[http://ruby-doc.org/stdlib-2.4.0/libdoc/digest/rdoc/Digest/MD5.html](http://ruby-doc.org/stdlib-2.4.0/libdoc/digest/rdoc/Digest/MD5.html)

下面是 md5 hasing 的示例用法，用于长臂猿使用，即 mailchimp gem。

```
md5_hashed_email_address = Digest::MD5.hexdigest("john.doe@example.com") 
```

# java - Console based login application using java sockets

> ID：12089768
> 
> 赞同：1
> 
> 时间：2012-08-23T10:38:24.610
> 
> 标签：java, sockets

I am making a console based java application - which will check the username and password of client. What I want is the data entered by client must enter to server in a line by line format i.e pressing enter must send username data and password for next enter press. But what the problem is - until I quit at the client side the data is not sent to the server. Meaning , when client hits 'Bye.' then the client is closed and server receives the data then. Help me in this regard as this is the first step - later I have to check database with this username and password on server. My codes are as follows :

Server :

```
import java.net.*;

import java.io.*; 

public class EchoServer2 extends Thread
{ 
 protected Socket clientSocket;

 public static void main(String[] args) throws IOException 
   { 
    ServerSocket serverSocket = null; 

    try { 
         serverSocket = new ServerSocket(2010); 
         System.out.println ("Connection Socket Created");
         try { 
              while (true)
                 {
                  System.out.println ("Waiting for Connection");
                  new EchoServer2 (serverSocket.accept()); 
                 }
             } 
         catch (IOException e) 
             { 
              System.err.println("Accept failed."); 
              System.exit(1); 
             } 
        } 
    catch (IOException e) 
        { 
         System.err.println("Could not listen on port."); 
         System.exit(1); 
        } 
    finally
        {
         try {
              serverSocket.close(); 
             }
         catch (IOException e)
             { 
              System.err.println("Could not close port."); 
              System.exit(1); 
             } 
        }
   }

 private EchoServer2 (Socket clientSoc)
   {
    clientSocket = clientSoc;
    start();
   }

 public void run()
   {
    System.out.println ("New Communication Thread Started");

    try { 
         PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), 
                                      true); 
         PrintWriter out1 = new PrintWriter(clientSocket.getOutputStream(), 
                                      true); 
         BufferedReader in = new BufferedReader( 
                 new InputStreamReader( clientSocket.getInputStream())); 
         BufferedReader in1 = new BufferedReader( 
                 new InputStreamReader( clientSocket.getInputStream())); 

         String inputLine,u,p; 

         while ((u = in.readLine()) != null && (p = in.readLine()) != null) 
             { 
             System.out.println ("U: " + u); 
              out1.println(u); 
              System.out.println ("P: " + p); 
              out1.println(p); 

              if (u.equals("Bye.")) 
                  break; 
             } 

         out1.close(); 
         out.close();
         //in1.close(); 
         in.close(); 
         clientSocket.close(); 
        } 
    catch (IOException e) 
        { 
         System.err.println("Problem with Communication Server");
         System.exit(1); 
        } 
    }
} 
```

Client :

```
import java.io.*;

import java.net.*;

import java.lang.*;

import java.io.Console;

    public class EchoClient2 {
    public static void main(String[] args) throws IOException {

        String serverHostname = new String ("127.0.0.1");

        if (args.length > 0)
           serverHostname = args[0];
        System.out.println ("Attemping to connect to host " +
                serverHostname + " on port .");

        Socket echoSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;
        BufferedReader in1 = null;

        try {
            echoSocket = new Socket(serverHostname, 2010);
            out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(
                                        echoSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: " + serverHostname);
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for "
                               + "the connection to: " + serverHostname);
            System.exit(1);
        }

    BufferedReader stdIn = new BufferedReader(
                                   new InputStreamReader(System.in));
        BufferedReader std = new BufferedReader(
                                   new InputStreamReader(System.in));
    String upwd,uname,text;
        Console console = System.console();
        String username = console.readLine("Username:");
        char[] pwd = console.readPassword("Password:");
        upwd=new String(pwd);

 while (username!=null && upwd!=null && (uname = stdIn.readLine()) != null)
           {

            out.println("Username:"+username);

        out.println("Password:"+upwd);

            // end loop
            if (uname.equals("Bye."))
                break;

       }

    out.close();

    stdIn.close();
    echoSocket.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:43:37.557

在客户端，将密码写入流后执行**out.flush() 。**

# sql - XCODE - SQL 日期

> ID：12089773
> 
> 赞同：0
> 
> 时间：2012-08-23T10:38:51.540
> 
> 标签：sql, xcode, date

我正在尝试在日期过期时更新我的​​ SQL 数据库（即比现在少）我有这段可爱的 SQL 代码

```
Update Notifications 
SET Active = 'N' 
where CAST(SetDate AS DATE) <= CAST('2012-08-23 11:19:00 +0000' AS DATE) 
```

但它会更新所有记录（即使日期不小于现在）

我也试过

```
Update Notifications 
SET Active = 'N' 
where CAST(SetDate AS DATE) < CAST('2012-08-23 11:19:00 +0000' AS DATE) 
```

但这会影响任何行。

我想我有些困惑？？

有什么帮助？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:48:17.460

除了这一行，我看不出代码有什么奇怪的地方：

```
CAST('2012-08-23 11:19:00 +0000' AS DATE) 
```

如果您用于将`CAST()`其更改为日期，则无需传入值的时间部分。

您没有提供完整的表架构，但要考虑的一件事是使用`bit`字段作为`Y/N`值。

这是一个代码工作的[SQL Fiddle](http://sqlfiddle.com/#!3/ba453/1)

```
Update Notifications 
SET Active = 'N' 
where CAST(SetDate AS DATE) <= CAST('2012-08-23' AS DATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:44:06.373

您感到困惑的一件事是 SQL 中的类型。我不知道您使用的是什么数据库，但它可能具有布尔（或整数）和日期类型。将布尔值和日期存储为字符串是非常低效的。例如，即使您的示例确实有效，它也必须扫描整个数据库并转换每个值才能进行比较。

错误的线索是`<`vs `<=`。这暗示值相等。如果双方的强制转换都失败，并返回默认值零，那么将是相等的。

您应该更改架构以使用正确的类型，然后您的查询将起作用。

# python - 连接到多个 TOR 出口节点

> ID：12089774
> 
> 赞同：2
> 
> 时间：2012-08-23T10:39:00.937
> 
> 标签：python, tor

我想使用 TOR 开发一个分布式网络爬虫。我如何通过 TOR 说出 20 个不同的连接？我想同时浏览具有 20 个外部 ips 的网站。请用 Python 编写代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T19:31:34.763

本文通过示例对其进行了深入解释...

[http://blog.databigbang.com/distributed-scraping-with-multiple-tor-circuits/](http://blog.databigbang.com/distributed-scraping-with-multiple-tor-circuits/)

# javascript - jquery 的这个表达式是什么意思 $("div[id*='box']")？

> ID：12089778
> 
> 赞同：-1
> 
> 时间：2012-08-23T10:39:16.757
> 
> 标签：javascript, jquery

下面的表达式是否意味着它将给我所有 id 包含单词框的 div 对象？

```
$("div[id*='box']") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:47:36.790

是的，您是正确的，它的意思是所有在其属性`$("div[id*='box']")`中包含`box`单词的div 对象。`id`

您还可以检查-属性以框字开头的`$("div[id^='box']")`所有 div 对象`id``Like 'box1', 'box-data'.`

`$("div[id$='box']")``id`- 所有属性以 box word 结尾的div 对象`like 'white-box', 'new-box'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:41:04.370

很简单，是的:-) 没有什么要补充的了，你是对的。

# jquery - 在 URL 中传递参数值

> ID：12089780
> 
> 赞同：0
> 
> 时间：2012-08-23T10:39:19.933
> 
> 标签：jquery, ajax, jsp, jakarta-ee, servlets

我有一个用于添加、删除、更新和搜索功能的 servlet。我在 jquery 上传递参数。根据这个参数，我将逻辑放在我的 servlet 中。

问题是所有其他功能都在工作。但是当我在动作和 servlet 条件中输入相同的名称时，我得到 url not found 错误。如果我使用不同的名称，则不会出现未找到错误。我在下面添加了我的 jquery 和 servlet 代码：

```
/* 
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */    
$(document).ready(function() {
    $("#doctorId").keypress(function (e)  
    {
        //if the letter is not digit then display error and don't type anything
        if( e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57))
        {
            //display error message
            $("#errmsg").html("Digits Only").show().fadeOut("slow"); 
            return false;
        }   
    });

    $('.btn-submit').click(function(e) {
        required = ["doctorId","speciality","employeeId","experience","qualification"];
        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var nicReg=/^[0-9]{9}[vVxX]$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            for (i=0;i<required.length;i++) {
                var inputVal = $('#'+required[i]).val();
                var $parentTag = $('#'+required[i]).parent();
                if(inputVal == ''){
                    $parentTag.addClass('error').append($error.clone().text('Required Field'));
                }
            }

            // Run the email validation using the regex for those input items also having class "email"
            if($(this).hasClass('nic') == true){
                var inputVal2=$('#nic').val();
                var $parentTag2=$('#nic').parent();
                if(!nicReg.test(inputVal2)){
                    $parentTag2.addClass('error').append($error.clone().text('Enter valid NIC'));
                }
            }

            // Check passwords match for inputs with class "password"
            if($(this).hasClass('password') == true){
                var password1 = $('#password-1').val();
                var password2 = $('#password-2').val();
                if(password1 != password2){
                    $parentTag.addClass('error').append($error.clone().text('Passwords must match'));
                }
            }                
        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            this.form.action = "DoctorServlet?method=add";
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();
    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

    $('.btn-delete').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $("#doctorId").val();
            var $parentTag = $("#doctorId").parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

            // Run the email validation using the regex for those input items also having class "email"

            // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            this.form.action = "DoctorServlet?method=delete";
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();
    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });

    $('.btn-update').click(function(e){
        required = ["doctorId","experience","qualification"];
        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            for (i=0;i<required.length;i++){
                var inputVal = $('#'+required[i]).val();
                var $parentTag = $('#'+required[i]).parent();
                if(inputVal == ''){
                    $parentTag.addClass('error').append($error.clone().text('Required Field'));
                }
            }

        // Run the email validation using the regex for those input items also having class "email"

        // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            this.form.action = "DoctorServlet?method=update";
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();

    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });
    $('.btn-search').click(function(e){

        // Declare the function variables:
        // Parent form, form URL, email regex and the error HTML
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var $error = $('<span class="error"></span>');

        // Prepare the form for validation - remove previous errors
        $('li',$formId).removeClass('error');

        $('span.error').remove();

        // Validate all inputs with the class "required"
        $('.required',$formId).each(function(){
            var inputVal = $("#doctorId").val();
            var $parentTag = $("#doctorId").parent();
            if(inputVal == ''){
                $parentTag.addClass('error').append($error.clone().text('Required Field'));
            }

        // Run the email validation using the regex for those input items also having class "email"

        // Check passwords match for inputs with class "password"

        });

        // All validation complete - Check if any errors exist
        // If has errors

        if ($('span.error').length > 0) {

            $('span.error').each(function(){

                // Set the distance for the error animation
                var distance = 5;

                // Get the error dimensions
                var width = $(this).outerWidth();

                // Calculate starting position
                var start = width + distance;

                // Set the initial CSS
                $(this).show().css({
                    display: 'block',
                    opacity: 0,
                    right: -start+'px'
                })
                // Animate the error message
                .animate({
                    right: -width+'px',
                    opacity: 1
                }, 'slow');

            });
        } else {
            this.form.action = "DoctorServlet?method=search";
            $formId.submit();
        }
        // Prevent form submission
        e.preventDefault();
    });

    // Fade out error message when input field gains focus
    $('.required').focus(function(){
        var $parent = $(this).parent();
        $parent.removeClass('error');
        $('span.error',$parent).fadeOut();
    });
}); 
```

* * *

```
public class DoctorServlet extends HttpServlet {

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String sDocId = request.getParameter("doctorId");
        Integer dId = Integer.parseInt(sDocId);
        String speciality = request.getParameter("speciality");
        String experience = request.getParameter("experience");
        String qualification = request.getParameter("qualification");
        String sempId = request.getParameter("employeeId");

        String action = request.getParameter("method");

        Doctors d = new Doctors();

        if (action.equalsIgnoreCase("add")) {
            Integer empId = Integer.parseInt(sempId);
            d.setDocId(dId);
            d.setEmpId(empId);
            d.setExp(experience);
            d.setSumOfQn(qualification);
            d.setSpeciality(speciality);
            try {
                boolean result = new Doctors().insertDoctor(d);
                if (result == true) {

                    request.setAttribute("add", "success");
                }
                request.getRequestDispatcher("doctor_result.jsp").forward(request, response);
                // response.sendRedirect("doctor_result.jsp");

            } catch (SQLException ex) {
                Logger.getLogger(DoctorServlet.class.getName()).log(Level.SEVERE, null, ex);
            }

        } else if (action.equalsIgnoreCase("delete")) {

            d.setDocId(dId);
            try {
                boolean result = d.removeDoctor(dId);
                if (result == true) {

                    request.setAttribute("delete", "success");
                }
                request.getRequestDispatcher("doctor_result.jsp").forward(request, response);
                response.sendRedirect("doctor_result.jsp");

            } catch (SQLException ex) {
                Logger.getLogger(DoctorServlet.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        else if(action.equalsIgnoreCase("update")){
            try {
                boolean result=d.updateDoctor(dId, experience, qualification);
                if(result==true){

                    request.setAttribute("update", "success");
                }
                request.getRequestDispatcher("doctor_result.jsp").forward(request, response);

            } catch (SQLException ex) {
                Logger.getLogger(DoctorServlet.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
        else if(action.equalsIgnoreCase("search")){
            try {
                ResultSet rs=d.searchDoctor(dId);
                while(rs.next()){
                    int docId=rs.getInt(1);
                    request.setAttribute("docId", docId);
                    String exp=rs.getString(3);
                    request.setAttribute("exp",exp);
                    String spec=rs.getString(2);
                    request.setAttribute("speciality", spec);
                    String qlf=rs.getString(5);
                    request.setAttribute("qlf", qlf);

                }
                request.getRequestDispatcher("doctor_result").forward(request, response);

            } catch (SQLException ex) {
                Logger.getLogger(DoctorServlet.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

    }
} 
```

# php - 如何使用此脚本在上传时重命名图像文件

> ID：12089783
> 
> 赞同：-1
> 
> 时间：2012-08-23T10:39:22.100
> 
> 标签：php, image, upload

请有人告诉我我需要在哪里更改代码，以便上传的图像重命名为“freddy”，例如

但仍然带有正确的现有扩展名，即 jpg、png、gif。

提前致谢

```
<?php
// define a constant for the maximum upload size
 define ('MAX_FILE_SIZE', 1024 * 50);

if (array_key_exists('upload', $_POST)) {
// define constant for upload folder
define('UPLOAD_DIR', '/home/richard/public_html/testing/editable-images/');
// replace any spaces in original filename with underscores

$file = str_replace(' ', '_', $_FILES['image']['name']);
// create an array of permitted MIME types
$permitted = array('image/gif', 'image/jpeg', 'image/pjpeg',
'image/png');

// upload if file is OK
if (in_array($_FILES['image']['type'], $permitted)
  && $_FILES['image']['size'] > 0 
  && $_FILES['image']['size'] <= MAX_FILE_SIZE) {
switch($_FILES['image']['error']) {
  case 0:
    // check if a file of the same name has been uploaded
 // Uncomment to stop overwritten files >>>>      if (!file_exists(UPLOAD_DIR . $file))        {
      // move the file to the upload folder and rename it
      $success =
 move_uploaded_file($_FILES['image']['tmp_name'], UPLOAD_DIR .
 $file);
// Uncomment to stop overwritten files  >>>>    } else {
//  Uncomment to stop overwritten files  >>>>       $result = 'A file of the same name             already exists.';
  // Uncomment to stop overwritten files  >>>>>      }
    if ($success) {
      $result = "$file uploaded successfully.";
    } else {
      $result = "Error uploading $file. Please try again.";
    }
    break;
  case 3:
  case 6:
  case 7:
  case 8:
    $result = "Error uploading $file. Please try again.";
    break;
  case 4:
    $result = "You didn't select a file to be uploaded.";
   }
  } else {
  $result = "$file is either too big or not an image.";
  }
  }
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:44:28.383

```
// get file extension
$ext = end(explode($_FILES['image']['name']));

// name your file and preserve file extension
$file = "freddy.".$ext;

// create an array of permitted MIME types
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:43:19.523

[在此处](http://php.net/manual/en/function.move-uploaded-file.php)检查方法 move_uploaded_file 的描述

# linux - 在 libc 的 ARM 程序集中收到信号 SIGSTOP？

> ID：12089784
> 
> 赞同：1
> 
> 时间：2012-08-23T10:39:24.830
> 
> 标签：linux, assembly, arm

试图理解这个 ARM 程序集。为此，我收到了 SIGSTOP 信号。这里出了点问题。我会尝试但需要一些帮助

```
afd0c750:   push {r4, r7}        
afd0c754:   mov r7, #252    ; 0xfc  // what is this I think that its calling the SWI and it need the r7 to have this value.  
afd0c758:   svc 0x00000000
afd0c75c:   pop {r4, r7}
afd0c760:   movs r0, r0
afd0c764:   bxpl lr 
afd0c768:   b 0xafd3896c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:44:41.090

`SIGSTOP`被发送到进程以暂停它 - 以供以后恢复 - 并且不是错误条件 - 或直接由错误条件生成。

最有可能的情况是，您的进程`SIGSTOP`在线程在内核中执行时已收到 - 并且很可能在那里被阻塞。您的回溯会将`SVC`指令显示为最后在用户堆栈上执行的指令，因为这是用户空间到内核的转换。

从您的描述中不清楚是如何`SIGSTOP`表现出来的。一个可能的候选人是`gdb`它的来源。

完整的回溯在这里将非常有用。

# android - 使用 PhoneGap 在启用 NFC 的 Android 应用程序中添加 nfc 标签侦听器

> ID：12089788
> 
> 赞同：0
> 
> 时间：2012-08-23T10:39:38.293
> 
> 标签：android, events, cordova, nfc

我正在编写一个应用程序，用于从我的原生 android 应用程序读取 mifare 卡。为此，我使用的是 phonegap 1.9.0。

我添加了 phonegap-nfc 插件。

```
<script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
<script type="text/javascript" charset="utf-8" src="phonegap-nfc.js"></script>
<script type="text/javascript" charset="utf-8">
function onLoad() 
{
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() 
{
    // Here I want to write my code for tag listener.

} 
```

现在在[phonegap 博客](http://www.phonegap.com/2011/09/26/building-an-nfc-enabled-android-application-with-phonegap/)中，他们正在讨论**添加一个 nfc 标签监听**器。

但这并不完全清楚。所以请告诉我如何在我的代码中添加事件监听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:08:15.833

一切都在博客文章中。例如：

```
nfc.addNdefListener(
function() {
    document.write("Found an NDEF formatted tag");
},
function() {
    console.log("Success.");
},
function() {
    console.log("Fail.");
} 
```

# silverlight - 在 Silverlight 5 中通过更改模板重用相同样式

> ID：12089791
> 
> 赞同：0
> 
> 时间：2012-08-23T10:39:41.483
> 
> 标签：silverlight, styles, reusability

我有很多 hiperlink 按钮的样式，它们完全相同，只是模板中的路径不同。

这是 XAML 片段

```
<Style x:Key="HeatmapLinkStyle" TargetType="HyperlinkButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="HyperlinkButton">
                <Grid Margin="4,2" Height="40" VerticalAlignment="Top">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0:0:0.2" To="1.5" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="element" d:IsOptimized="True"/>
                                    <DoubleAnimation Duration="0:0:0.2" To="1.5" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="element" d:IsOptimized="True"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="LinkStates">
                            <VisualState x:Name="ActiveLink">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="ActiveLinkBorder" Storyboard.TargetProperty="(UIElement.Visibility)">
                                        <DiscreteObjectKeyFrame KeyTime="00:00:00">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="InactiveLink"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid Width="32" Height="32" VerticalAlignment="Top">
                        <Path Data="M50.5,4.7500001C25.232973,4.75 4.75,25.232973 4.7500001,50.5 4.75,75.767029 25.232973,96.25 50.5,96.25 75.767029,96.25 96.25,75.767029 96.25,50.5 96.25,25.232973 75.767029,4.75 50.5,4.7500001z M50.5,0C78.390381,0 101,22.609621 101,50.5 101,78.390381 78.390381,101 50.5,101 22.609621,101 0,78.390381 0,50.5 0,22.609621 22.609621,0 50.5,0z" Stretch="Fill" Fill="#FF3FA9F5" Visibility="Visible" />
                        <Path x:Name="element" Data="F1M-1834.73,-354.432L-1772.06,-354.432 -1772.06,-417.099 -1834.73,-417.099 -1834.73,-354.432z M-1832.68,-385.765L-1803.39,-385.765 -1803.39,-415.052 -1774.11,-415.052 -1774.11,-385.765 -1803.39,-385.765 -1803.39,-356.484 -1832.68,-356.484 -1832.68,-385.765z"  Stretch="Uniform" Fill="#FF3FA9F5" Width="16" Height="16" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                            <Path.RenderTransform>
                                <CompositeTransform ScaleY="1" ScaleX="1"/>
                            </Path.RenderTransform>
                        </Path>
                        <Ellipse x:Name="container" Fill="Transparent" Cursor="Hand" Height="32" Width="32"/>
                    </Grid>
                    <Border x:Name="ActiveLinkBorder" Width="32" Height="4" VerticalAlignment="Bottom" Opacity="0.5" Background="#FF3FA9F5" Visibility="Collapsed"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

唯一变化的部分是“元素”路径的数据。

有没有办法只使用一种基本样式并更改其他样式的路径？

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:29:18.720

您可以创建一个基本样式并继承它。

这是一个很好的例子： [basedOn Style](http://10rem.net/blog/2009/03/18/silverlight-3-%E2%80%93-basedon-styles)

希望能帮助到你

# php - 正则表达式允许数字和中间只有一个连字符

> ID：12089792
> 
> 赞同：7
> 
> 时间：2012-08-23T10:39:57.637
> 
> 标签：php, regex

我正在尝试编写一个正则表达式以允许数字和中间只有一个连字符（不能在开头或结尾）说 pattern: `02-04`,`02`是可以接受的，但是 pattern: `--`or `-`or `-02`or `04-`or`02-04-06`是不可接受的

我尝试过这样的事情，但这将允许 - 在开始时也允许多个 -

```
'/^[0-9 \-]+$/' 
```

我对正则表达式不太擅长，所以稍微解释一下会很有帮助。

> **编辑：**很抱歉再次打扰您，但我需要只有 2 位数字（123-346）的数字应该被视为无效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-23T10:41:55.433

试试这个：

```
/^\d{1,2}(-\d{1,2})?$/ 
```

一位或两位数字，后跟（可选）（连字符后跟一位或两位数字）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T10:41:37.160

相当容易：

```
^\d+(-\d+)?$ 
```

至少一个 ( `+`) 数字 ( `\d`)，后跟包含连字符减号 ( `-`) 的可选组，后跟至少一个数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T10:58:47.690

对于仅包含该模式的字符串，以下应该有效

```
^(\d{2}-)?\d{2}$ 
```

一组 2 位数字，后跟负号，以一组 2 位不带负号的数字结尾。

# ruby-on-rails - 如何在 Rails 中更改 form_tag onchange 事件 select_tag 的操作值

> ID：12089794
> 
> 赞同：0
> 
> 时间：2012-08-23T10:40:01.850
> 
> 标签：ruby-on-rails

Ruby1.9.2 Rails3.2

下面的代码将生成下一个 HTML 代码。

```
<%= form_tag :controller => "index", :action => "index" do %>
<%= select_tag(:area_id,
options_from_collection_for_select(@areas, :id, :area_name, @area_id),
 :onchange => "this.form.submit()") %>
<% end %>

<form accept-charset="UTF-8" action="/area/2" method="post">
    <select id="area_id" name="area_id" onchange="this.form.submit()">
      <option value="1">Japan</option>
      <option value="2" selected="selected">Thailand</option>
      <option value="3">USA</option>
      <option value="4">Canada</option>
      <option value="5">England</option>
    </select>
</form> 
```

当我更改选择框时，会发生 onchange 事件。但是表单操作值不会按原样改变“/area/2”。如果我选择 /area/1，它不会改变。

我想知道在 onchange 事件发生时如何更改操作的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T14:44:22.783

这可以通过将一些 javascript 代码放在 app/assets/javascripts 目录中的一个 js 文件中来完成。在您的 select_tag 调用中删除 onchange 选项后，这应该会处理它：

```
$(function() {
  $('#area_id').change(function() {
    $(this).parent().attr('action', '/area/' + $(this).val());
  });
}); 
```

只要您的视图或布局通过该`javascript_include_tag`方法加载应用程序文件，您就可以开始了。

虽然我建议不要在更改事件上提交表单，而是只添加一个按钮，以防有人错误选择了他们想要的值，他们不必点击后退按钮或你有什么。

# android - 图像不使用 ImageView 调整大小

> ID：12089796
> 
> 赞同：0
> 
> 时间：2012-08-23T10:40:05.700
> 
> 标签：android, imageview

我有一个 ImageView。
我在xml中设置如下：　

```
<ImageView
    android:id="@+id/background"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

并设置图像如下：

```
ImageView background
background.setImageBitmap(bitmap); 
```

但是如果 ImageView 的父布局缩小，IamgeView 也会缩小。
并且图像被调整大小。
我想让它不调整大小。
是否可以通过 setScaleType 进行修改？
或者怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T11:01:46.683

尝试在 ImageView[上将 adjustViewBounds](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:adjustViewBounds)参数设置为 true。

```
<ImageView
   android:id="@+id/background"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content" 
   android:adjustViewBounds="true"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T10:43:20.850

你为什么不这样`scaledBitmap`使用

```
Bitmap bMap =   Bitmap.createScaledBitmap(chosenBitmap, needed_width, needed_height, true);
imageView.setImageBitmap(bMap); 
```

# java - Spring 的 contextConfigLocation xml 和 Controller 类是如何连接的？

> ID：12089799
> 
> 赞同：2
> 
> 时间：2012-08-23T10:40:11.577
> 
> 标签：java, model-view-controller, jakarta-ee, spring-mvc

我是 Spring MVC 的初学者。所以我不明白控制流是从控制器类到 training-servlet.xml，反之亦然。contextConfigLocation 文件（training-servlet.xml）解释为：

```
<beans:bean id="userService" class="com.my.control.UserServiceImpl" />
<beans:bean name="/userRegistration.htm" class="com.my.control.HomeController">
    <beans:property name="validator">
        <beans:bean class="com.my.validations.HomeValidations" /> 
    </beans:property>
    <beans:property name="userService" ref="userService"></beans:property>
    <beans:property name="formView" value="userForm"></beans:property>
    <beans:property name="successView" value="userSuccess"></beans:property>
</beans:bean>
<beans:bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/jsp/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean> 
```

我的 Controller 类扩展了 SimpleFormController 并且是：

```
public class HomeController extends SimpleFormController {    
    private UserService userService;
    public HomeController() {
        setCommandClass(User.class);
        setCommandName("user");
    }
    public void setUserService(UserService userService) {
        this.userService = userService;
    }
    protected ModelAndView onSubmit(Object command) throws Exception {
        System.out.println("Hai Inside");
        User user = (User) command;
        userService.add(user);
        return new ModelAndView("userSuccess","user",user);
    }    
} 
```

请帮助我了解模型和控制器之间的流程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:55:32.467

XML 仅在启动时使用。Spring 使用您的配置文件来创建其中指定的每个 bean 的实例，并连接其依赖项。这意味着一旦你在你的 web 容器中启动你的 webapp，控制器的 userService 字段将被应用程序上下文提供的 bean 填充。Spring MVC 进一步处理将 HttpServletRequest 转换为控制器 bean 中 onSubmit() 方法的方法调用。

所以实际上没有从控制器到 XML 文件的流，而是从一个 bean 到另一个。

# iphone - 图像未使用链接到捆绑包的 Documents 目录中的符号链接加载到 UIWebView 中？

> ID：12089802
> 
> 赞同：0
> 
> 时间：2012-08-23T10:40:25.547
> 
> 标签：iphone, objective-c, ios, ipad, uiwebview

我正在使用`[myWebView loadHTMLString:htmlString baseURL:documentsDirectoryURL]`本地 NSString 的 HTML 和应用程序的 Documents 目录中的目录的 baseURL 加载 UIWebView。

问题是 HTML 包含`<img>`带有从上述目录加载的图像的标签。它不是包含图像的 Documents 目录中的目录，而是包含指向应用程序包中包含的图像的符号链接。

首次启动时加载 UIWebView 时，图像无法加载，导致标准 Safari 蓝色问号。如果我然后退出应用程序，重新启动并再次加载 UIWebView 图像加载正常。

**有没有其他人有这个问题？**

符号链接是这样创建的：

```
- (void)createSymbolicLinksForURL:(NSURL *)url inDirectory:(NSURL *)directory {

    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSDirectoryEnumerator *dirEnum = [fileManager enumeratorAtURL:url
                                       includingPropertiesForKeys:[NSArray arrayWithObject:NSURLIsDirectoryKey] 
                                                          options:NSDirectoryEnumerationSkipsHiddenFiles | NSDirectoryEnumerationSkipsPackageDescendants
                                                     errorHandler:nil];

    NSArray *resourceKeys = [NSArray arrayWithObjects:NSURLIsSymbolicLinkKey, NSURLIsDirectoryKey, nil];

    for (NSURL *bundledURL in dirEnum) {

        if ([[[bundledURL resourceValuesForKeys:resourceKeys error:nil] objectForKey:NSURLIsDirectoryKey] boolValue]) continue;

        NSArray *bundledURLPathComponents = [bundledURL pathComponents];

        NSURL *destinationURL = directory;

        for (NSUInteger componentIndex = [bundledURLPathComponents count] - dirEnum.level; componentIndex < [bundledURLPathComponents count]; componentIndex++) {

            destinationURL = [destinationURL URLByAppendingPathComponent:[bundledURLPathComponents objectAtIndex:componentIndex]];
        }

        if ([fileManager fileExistsAtPath:destinationURL.path]) {

            if ([[[destinationURL resourceValuesForKeys:resourceKeys error:nil] objectForKey:NSURLIsSymbolicLinkKey] boolValue]) {

                [fileManager removeItemAtURL:destinationURL error:nil];
            }
            else {

                continue;
            }
        }

        NSURL *container = [destinationURL URLByDeletingLastPathComponent];
        if (![fileManager fileExistsAtPath:container.path]) [fileManager createDirectoryAtURL:container withIntermediateDirectories:YES attributes:nil error:nil];

        NSError *error = nil;
        [fileManager createSymbolicLinkAtURL:destinationURL withDestinationURL:bundledURL error:&error];
        if (error) NSLog(@"Failed to create symbolic link for %@ (Error: %@)", bundledURL, error);
    }
} 
```

UIWebView 加载的 HTML 字符串如下所示（这只是一个片段）：

```
<img src="images/thumb.jpg">
<img src="images/thumb1.jpg">
<img src="images/thumb2.jpg"> 
```

在第一次启动时导致：

![首次发射](../Images/6d798abecd241551f4f24c01fa13e1b4.png)

...这在任何后续发布中：

![后续推出](../Images/a33e7fd7dcbbf7e0b5c019acfc7bfb63.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:13:36.050

似乎将符号链接移动到 Documents 目录的根目录中，因此将`<img>`标签缩短为`<img src="thumb.jpg">`，例如，解决了问题 - 首次启动时加载的图像。

这还不足以解决问题，因为我确实需要将资源分组到 Documents 目录中的目录中。所以我改为尝试扩展`<img>`标签以包含符号链接的绝对 URL。例如（在模拟器中运行时）：

```
<img src="file://localhost/Users/adam/Library/Application%20Support/iPhone%20Simulator/5.1/Applications/677CFABC-D16A-42C8-8F08-6FF415522FB6/Documents/images/thumb.jpg"> 
```

..它有效！

感谢[SP Varma](https://stackoverflow.com/users/363363/s-p-varma)的提示！

# javascript - 调用 JavaScript 函数后文件上传字段重置

> ID：12089804
> 
> 赞同：1
> 
> 时间：2012-08-23T10:40:38.683
> 
> 标签：javascript, html, file, upload

我有一个通过 JavaScript 函数生成文件上传字段的链接。但是，当我添加一个上传字段，然后选择一个文件，然后添加另一个字段时，该文件会从第一个字段中消失。我不明白为什么会发生这种情况。

jsFiddle：http: [//jsfiddle.net/etCqD/](http://jsfiddle.net/etCqD/)

请注意，jsFiddle 给出了一个`'addPhoto() is not defined'`我也不理解的错误，因为该函数在 JavaScript 部分中已明确定义。这个错误不会发生在我的实际页面上。有人能告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:43:16.107

您正在编辑`innerHTML`. 这意味着您将 DOM 序列化为 HTML，然后更改 HTML 并将 HTML 转换回 DOM。

这会破坏价值，因为：

*   该`value`属性将包含默认值
*   您不能`value`为文件输入设置属性

改用[`createElement`,`appendNode`和朋友](http://www.w3.org/wiki/Creating_and_modifying_HTML#Creating_HTML)。

# flash - 对于新项目以及将应用程序迁移到 2012 年的最新版本时，我应该使用哪个 OpenLaszlo 版本？

> ID：12089808
> 
> 赞同：2
> 
> 时间：2012-08-23T10:40:55.587
> 
> 标签：flash, html, open-source, openlaszlo, lzx

作为 OpenLaszlo 项目的前提交者，我收到了很多关于在迁移使用低于 4.2 的 3.x 版本或 4.x 版本的应用程序时使用的最佳 OpenLaszlo 版本的问题，或者在开始新版本时使用的问题。 OpenLaszlo 项目。

做出此决定的困难与以下事实有关：自 2010 年 10 月以来，OpenLaszlo 没有次要或主要版本，而且 Laszlo 关于计划发布、任何形式的营销或参与开发人员的信息几乎为零Laszlo 员工在过去 2 年的会议（查看[Laszlo 系统主页上的新闻和活动部分](http://www.laszlosystems.com/news/inthenews/2011)，或[OpenLaszlo 公告邮件列表](http://markmail.org/search/?q=list%3aorg.openlaszlo.laszlo-announce)）。

尽管如此，OpenLaszlo 仍然是一个非常强大的平台，用于构建基于 HTML5 或 Flash/SWF 的应用程序。

我将在这里回答我自己的问题，希望其他人加入并报告他们在项目中使用 OpenLaszlo 4.9 或未发布的 5.0 版本的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:40:55.587

**上次正式发布 4.9 或 OpenLaszlo 5.0（主干）**
OpenLaszlo 次要版本的上次正式发布是[2010 年 10 月发布的 OpenLaszlo 4.9](http://weblog.openlaszlo.org/archives/2010/10/openlaszlo-49-is-available/)。上一次被 OpenLaszlo 团队视为主要版本的正式[版本是 2008 年 12 月的 4.2 版](http://weblog.openlaszlo.org/archives/2008/12/openlaszlo-42-is-now-available/)。由于 4.2 版本为 OpenLaszlo 添加了 ActionScript 3 和 SWF9 支持 - 因此是一个新的运行时 - 它绝对应该是一个新的主要版本。

在 4.9 版本之后，直到 2011 年 4 月/5 月 - 开发速度放缓（基于[发送到 laszlo-reviews 邮件列表的消息数量）](http://markmail.org/search/?q=laszlo-reviews#query%3alaszlo-reviews)之前，已经修复了很多错误。2012 年，Laszlo 对 DHTML 运行时进行了少量改进，我个人在 OpenLaszlo 中添加了 SWF11 运行时支持，已签入 flex4.6 brnach。

主干中修复的许多错误和新功能没有移植回 4.9，建议使用 OpenLaszlo 以 DHTML/HTML5 运行时和 SWF11 为目标的开发人员使用未发布版本的 OpenLaszlo 5.0 或未发布的 flex4.6 分支（我添加到平台的第一个具有 SWF11 运行时支持的 OpenLaszlo 版本）。

**5.0 主干中的 DHTML/HTML5 浏览器支持 5.0 主干中**
对更现代浏览器的浏览器支持对于 IE7、IE8、基于 Webkit 的浏览器和 Firefox 组似乎相对稳定。据我所知，Opera 可能会工作，但不会经过 QA 的全面测试。目前不支持 IE9，但如果 Laszlo 设法在未来某个时间发布 5.0，这可能会改变。OpenLaszlo 在 iPad 上运行——我认为大多数针对移动 DHTML 运行时的优化都是在 2009 年和 2010 年针对 iPad 完成的。

**Flash Player 11 API 支持和 SWF11 运行时**
2012 年 3 月，我开始着手[将 SWF11 运行时支持添加到 OpenLaszlo](https://www.assembla.com/wiki/show/openlaszlo-community/SWF11_Runtime)，并在 7 月将代码签入[新的 OpenLaszlo flex4.6 分支](http://svn.openlaszlo.org/openlaszlo/branches/flex4.6/)。flex4.6 分支是 OpenLaszlo 主干的一个分支，包含 Laszlo 添加的一些 DHTML 运行时改进。如果您想在 OpenLaszlo 中使用 Flash Player 11 API，则 flex4.6 分支目前是唯一的选择。由于我在 8 月份停止了提交者的工作（不能接受新的 Laszlo 政策，发送到 laszlo-dev 和 laszlo-user 邮件列表的关键邮件被阻止），我不知道 Laszlo 是否会设法整合SWF11 运行时支持在不久的将来进入主干。

**OpenLaszlo 5.0 发布日期 - Laszlo Systems 何时发布 5.0？**
邮件列表中一遍又一遍地出现的大问题。我听说日期介于 2009[年底和 2011 年底](http://twitter.com/openlaszlo/status/121731357662646273)之间- 但仍然没有发布。很难说 Laszlo 发生了什么，因为工程管理部门拒绝就过去 3 年的发布日期发布任何公告。在2012 年初[被 Critical Path 收购 Laszlo之后，关于 OpenLaszlo 的唯一公开公告是](http://cp.net/index.php?option=com_content&view=article&id=231%3aevent-2&catid=13%3acritical-path&Itemid=39)[OpenLaszlo.org 网站](http://www.openlaszlo.org)上的图片标题中的一句话：

> “CP（关键路径）致力于继续赞助 OpenLaszlo 开源项目及其全球社区。”

**谁在生产中使用 OpenLaszlo 5.0 主干？**
我不知道很多产品使用 OpenLaszlo 主干，我最初认为 Gliffy 的 HTML5 版本的图表编辑器是使用 OpenLaszlo 构建的，但看起来他们改用了一些 JS 库的 jQuery 和 HTML5 画布（[Flash 版本的 Gliffy 是使用 OpenLaszlo 构建](http://www.gliffy.com/blog/2010/04/08/gliffy-is-built-using-openlaszlo-not-flash/)）。Laszlo 似乎将 5.0（主干）用于带有 Webtop 的客户项目，尽管我从未得到官方确认。
[OpenMeetings](http://incubator.apache.org/openmeetings/) - 一个开源网络会议工具和 Apache Incubator 项目 - 使用 OpenLaszlo，并且他们已经开始使用支持 SWF11 的 5.0 trunk。
在过去的 15 个月里，我一直在为一个项目使用 5.0 主干，并且没有遇到无法解决的问题。我正在开发的应用程序同时使用 SWFx 和 DHTML/HTML5 运行时。

**4.9 和 5.0 中的文档状态**
许多较新的功能没有很好的文档记录，因为目前没有任何人负责升级文档。直到 2007 年底，Laszlo 曾经有一个全职的资源在文档上工作，但从那时起，文档似乎没有得到很好的维护。大多数开发人员在提交新代码时都试图记录新功能，但这不等于让技术作家在文档上工作。

**支持和社区**
可见的 OpenLaszlo 社区现在真的很小，在过去的 2 年里，我在论坛和邮件列表中看到最多 30-40 人的活动。我正在尝试将讨论从 OpenLaszlo 论坛（已经死了）转移到 Stackoverflow.com，因为您在回答问题时至少会在这里获得声誉积分，并且不能保证有人不会拔掉插头未来的 OpenLaszlo.org 网站。看起来 Stackoverflow 上标记为[openlaszlo 的](/questions/tagged/openlaszlo "显示标记为“openlaszlo”的问题")大多数问题都会得到解答，但标记为 openlaszlo 的问题数量仍低于 100。

**建议** 这是我的个人意见，如果您按照我的建议遇到问题，请不要怪我。作为一名前提交者，我对源代码了如指掌，可以对 OpenLaszlo 服务器进行更改，如果您不具备这种知识，那么您的情况可能会有所不同：

1.  迁移到较新的 OpenLaszlo 版本时，始终使用 5.0（主干）。
2.  对于新项目，请考虑 Laszlo 或关键路径（Laszlo 和 OpenLaszlo 的新所有者）停止支持该平台的风险。如果他们继续像过去一年那样少赞助这个项目，那么 OpenLaszlo 的终结就很近了——除非我们作为社区分叉这个项目。
3.  为 HTML5 应用程序使用 OpenLaszlo 的新项目：如果您只针对 DHTML/HTML5 运行时，其他选项或框架可能会更好。OpenLaszlo 使得修改 DOM 或与现有 JavaScript 应用程序集成变得困难。由于项目未来的不确定性，使用这项技术的风险相对较大。
4.  为基于 SWF11 的应用程序使用 OpenLaszlo 的新项目：使用 OpenLaszlo 应该没问题，因为该产品非常稳定，您可以使用任何 ActionScript 3 API，甚至可以编译为 iOS 或 Android 本机应用程序（使用 Adob​​e AIR SDK 和一些构建脚本）。我已经使用新的 Apache Flex SDK（Flex 作为 Apache Incubator 项目的第一个版本）成功地测试了 OpenLaszlo 5.0，并且使用[我创建的这些文档](https://www.assembla.com/spaces/openlaszlo-community/documents/tag/swf11)很容易将 Flex SDK 升级到更新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T16:57:01.493

我建议使用 Nightly Build 5.0.x，因为 4.9.0 中没有许多错误修复、新功能和对 HTML5 运行时（以前称为 DHTML 运行时）的许多改进。

OpenLaszlo 5.0.x 似乎非常稳定。我有一个用 OpenLaszlo 4.9.0 编写的相当复杂的应用程序（超过 30,000 行），我在 5.0.x 版本下对其进行了编译测试，我的应用程序的所有功能似乎在 SWF10 和 HTML5 运行时模式下都能正常运行。

除非您已经拥有低于 4.2.x 的 OpenLaszlo 版本的现有应用程序，否则没有充分的理由继续使用该平台，您应该从 5.0.x 开始。如果您的应用程序介于 4.2.x 和 4.9.0 版本之间，您应该尝试将其编译为 5.0.x，如果可以正常工作，那么从那时起使用 5.0.x。

5.0.x 的夜间版本可在此处获得：

[http://download.openlaszlo.org/nightly/trunk/](http://download.openlaszlo.org/nightly/trunk/)

此外，如果您需要，还有另一个支持 SWF11 (Flash 11) 的分支（由[https://stackoverflow.com/users/410652/r-bitter](https://stackoverflow.com/users/410652/r-bitter)编写）尚未与主要的 5.0.x 夜间构建集成SWF11 支持该分支的夜间构建可以在这里下载：

[http://download.openlaszlo.org/nightly/flex4.6/](http://download.openlaszlo.org/nightly/flex4.6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T16:02:18.490

快速浏览一下旧的 openlaszlo 站点（我为 Laszlo 构建的），自从我离开后，他们没有在上面做任何重要的工作。论坛最后一次更新是在 2009 年。（哎呀，openlaszlo.org 网站仍然显示 2008 年的版权。他们甚至没有改变它）。

如果他们甚至无法修复页脚中的版权，这不是一个正在积极支持的项目......

# asp.net-mvc-3 - 基于存储在数据库中的 URL 的自定义 MVC 路由

> ID：12089815
> 
> 赞同：3
> 
> 时间：2012-08-23T10:41:20.413
> 
> 标签：asp.net-mvc-3, routing

我正在尝试根据存储在 mvc 数据库中的 url 添加一些自定义路由逻辑。（CMS Like），我认为它相当基本，但我觉得我并没有真正到达任何地方。

基本上，用户可以键入 url，例如：

```
www.somesite.com/categorya/categoryb/categoryf/someitem
www.somesite.com/about/someinfo 
```

在数据库中存储这些项目以及它们的类型，即普通页面或产品页面。

根据这一点，然后我想实际使用不同的“动作”方法，即我希望上面的方法可以使用：

```
PageController/Product
PageController/Normal 
```

然后，这些操作会加载此页面的内容并显示相同的视图（产品视图或普通视图）。

使用正常的路由方式是行不通的，因为我可能有类似的东西；

```
cata/producta
cata/catb/catc/catd/cate/catf/producta 
```

现在我一直在看这里：[ASP.NET MVC custom routing for search](https://stackoverflow.com/questions/379558/mvc-net-routing#379823)

并试图以此为基础，但我如何真正“改变”我想在 InvokeActionMethod 调用中点击的操作方法？

顺便说一句，使用 MVC 3.0。

感谢您的任何帮助/建议

**最终解决方案：**

全球.asax

```
routes.MapRoute(
                "Default",
                "{*path}",
                new { controller = "Page", action = "NotFound", path= "Home" }
            ).RouteHandler = new ApplicationRouteHandler(); 
```

路由处理程序

```
public class ApplicationRouteHandler : IRouteHandler
    {
        public IHttpHandler GetHttpHandler(RequestContext requestContext)
        {
            return new ApplicationHandler(requestContext);
        }
    }

    public class ApplicationHandler : MvcHandler, IRequiresSessionState
    {
        public ApplicationHandler(RequestContext requestContext)
            : base(requestContext)
        {

        }

        protected override IAsyncResult BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, object state)
        {
            var url = RequestContext.RouteData.Values["path"].ToString();
            var page = SomePageService.GetPageByUrl(url);

            if (page == null)
            {
                RequestContext.RouteData.Values["Action"] = "NotFound";
            }
            else
            {
                RequestContext.RouteData.Values["Action"] = page.Action;
                RequestContext.RouteData.Values["page"] = page;
            }

            return base.BeginProcessRequest(httpContext, callback, state);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:01:08.540

对于您的情况，也许不是一个确切的解决方案，但我最近不得不处理类似的事情，所以这可能会为您指明正确的方向。

我所做的是在 Global.asax 中设置一个简单的路由，其中​​包含一个调用自定义 RouteHandler 类的包罗万象的参数。

```
// Custom MVC route
routes.MapRoute(
    "Custom",
    "{lang}/{*path}",
    new { controller = "Default", action = "Index" },
    new { lang = @"fr|en" }
).RouteHandler = new ApplicationRouteHandler(); 
```

ApplicationRouteHandler.cs ：

```
public class ApplicationRouteHandler : IRouteHandler
{
    /// <summary>
    /// Provides the object that processes the request.
    /// </summary>
    /// <param name="requestContext">An object that encapsulates information about the request.</param>
    /// <returns>
    /// An object that processes the request.
    /// </returns>
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        string path = requestContext.RouteData.Values["path"] as string;
    // attempt to retrieve controller and action for current path
        Page page = GetPageData(path);

    // Method that returns a 404 error
        if (page == null)
            return SetupErrorHandler(requestContext, "ApplicationRouteHandler");

    // Assign route values to current requestContext
        requestContext.RouteData.Values["controller"] = page.Controller;
        requestContext.RouteData.Values["action"] = page.Action;
        return new MvcHandler(requestContext);
    }
} 
```

显然，您从数据库中检索动作和控制器名称的方式可能与我的大不相同，但这应该会给您一个想法。

# c# - 小数点后双精度

> ID：12089817
> 
> 赞同：6
> 
> 时间：2012-08-23T10:41:28.947
> 
> 标签：c#, double, ieee-754

在午休时间，我们开始讨论`double`值类型的精度。

我的同事认为，它总是有小数点后 15 位。

在我看来，不能说，因为 IEEE 754 没有对此做出假设，这取决于第一个`1`在二进制表示中的位置。（即小数点前的数字大小也计算在内）

怎样才能做出更合格的陈述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:48:35.750

正如[C# 参考](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.100%29.aspx)中所述，精度在小数点之前或之后为 15 到 16 位（取决于所表示的十进制值）。

**简而言之，你是对的，它取决于小数点前后的值**。

例如：

*   `12345678.1234567D`//右边的下一个数字将被四舍五入
*   `1234567.12345678D`//右边的下一个数字将被四舍五入

完整示例：http: [//ideone.com/eXvz3](http://ideone.com/eXvz3)

此外，尝试将`double`值视为固定十进制值也不是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T11:09:21.563

你们都错了。法线`double`具有 53**位**精度。这大致相当于 16 位小数，但将`double`值视为小数会导致混乱，最好避免。

也就是说，您比您的同事更接近正确——精度与所表示的值相关；足够大`double`的 s*没有*小数位精度。

例如，下一个大于`4503599627370496.0`is的 double `4503599627370497.0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:57:20.860

C# 双精度数根据 IEEE 754 用 53 位有效*数 p*（或尾数）和 11 位指数*e*表示，范围在 -1022 和 1023 之间。因此，它们的值是

```
p * 2^e 
```

有效数字在小数点前总是有一位，因此其小数部分的精度是固定的。另一方面，双精度数中小数点后的位数也取决于其指数；指数超过有效数字小数部分的位数的数字本身没有小数部分。

[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)可能是该主题最广为人知的出版物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T15:50:09.283

由于这是我在该主题上可以找到的唯一关于 SO 的问题，因此我想对[jorgebg 的回答](https://stackoverflow.com/a/12089931/6505444)进行补充。

据此[，](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types)精度实际上是 15-17 位。具有 17 位精度的双精度示例是 0.92107099070578813（不要问我是如何得到这个数字的：P）

# crystal-reports - 已达到系统管理员配置的最大报表处理作业限制

> ID：12089818
> 
> 赞同：5
> 
> 时间：2012-08-23T10:41:34.107
> 
> 标签：crystal-reports

我正在使用 Crystal Report，但收到错误消息：

```
The maximum report processing jobs limit configured by your system administrator has been reached 
```

我搜索了stackoverflow并找到了2个主题：

1.  [Crystal Reports 错误：最大报表处理作业限制](https://stackoverflow.com/questions/1578638/crystal-reports-error-the-maximum-report-processing-jobs-limit)
2.  [Crystal Reports 异常：已达到系统管理员配置的最大报表处理作业限制](https://stackoverflow.com/questions/9579914/crystal-reports-exception-the-maximum-report-processing-jobs-limit-configured-b)

但是，当我按照主题 1 更改 PrintJobLimit =-1 时，错误仍然会发生。

当我做主题 2 时，我还没有测试，因为我的报告需要在页面之间导航。要导航，我必须在会话中保存报告：

```
 ReportDocument reportDocument = null;
    protected override void OnInit(EventArgs e)
    {
        if (IsPostBack && Session["reportDocument"] != null)
        {
            reportDocument = (ReportDocument)Session["reportDocument"];
            crvReport.ReportSource = reportDocument;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        reportDocument = new ReportDocument();
        Session["reportDocument"] = reportDocument;
        crvReport.ReportSource = reportDocument;

        reportDocument.Load(Server.MapPath("~/files/Users.rpt"));
        reportDocument.SetDatabaseLogon("******", "******", "*.*.*.*", "*****");
        reportDocument.VerifyDatabase();

        crvReport.DataBind();
    } 
```

所以我无法在卸载时处理 reportDocument，因为 Session["reportDocument"] 更改为 null

```
 protected void crvReport_Unload(object sender, EventArgs e)
    {
        if (reportDocument != null)
        {
            reportDocument.Close();
            reportDocument.Dispose();
            reportDocument = null;
            GC.Collect();
        }
    } 
```

那么，如何在报告中的页面之间导航，但我没有收到错误消息？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:01:57.567

我找到了这个链接[Pdf 文件](http://www.sdn.sap.com/irj/boc/go/portal/prtroot/docs/library/uuid/f053713e-3e3d-2c10-2a81-f79259e54023?QuickLink=support&overridelayout=true&43705587209382)

所以，我不会关闭并处理 crvReport_Unload 中的文档，但是当我重定向到另一个页面时我会关闭并处理它。

```
//OnRedirect
ReportDocument reportDocument = (ReportDocument)Session["reportDocument"];
reportDocument.Close();
reportDocument.Dispose();
reportDocument = null;
GC.Collect(); 
```

并且错误仍然发生但不那么冒犯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T05:39:34.207

我在水晶报表 11.5 版中遇到了同样的问题。经过大量搜索后，我找到了不同的解决方案，例如**“HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Report Application Server\InprocServer**，上面写着增加打印作业限制等，但它们都不适合我。然后我只是处理掉我的`reportDocument with clone`，这就像一个魅力。就我而言，在打印/生成报告后，我这样做了

```
reportDocument.Close(); 
reportDocument.Clone(); 
reportDocument.Dispose(); 
reportDocument = null;
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

希望这会帮助你。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T10:08:33.713

There is No permanent solution. After changing Registry and Code, problem arise within few hours. Suggesting to change RDL or RDLC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T11:23:14.080

早上，你有没有尝试过这里的任何东西：http: [//social.msdn.microsoft.com/forums/en/vscrystalreports/thread/208525b2-94cd-4af6-9c5a-015e243b3092/](http://social.msdn.microsoft.com/forums/en/vscrystalreports/thread/208525b2-94cd-4af6-9c5a-015e243b3092/)

# android - android：我的应用程序无法在模拟器上访问互联网

> ID：12089820
> 
> 赞同：1
> 
> 时间：2012-08-23T10:41:37.007
> 
> 标签：android

我开发了 android 应用程序，它在真实设备上运行良好并且可以访问互联网，但是当我在模拟器上运行它时它不工作（无法访问互联网）。

我可以在模拟器上访问互联网，我用互联网浏览器检查过（能够从模拟器的浏览器打开几个网页），但我的应用程序无法使用它。

谁能帮助我为什么会出现这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:14:18.803

做两件事：

```
 - Recheck your manifest file that it has internet permission or not 
```

```
 - Do this on your eclipse Run->Run config->select your app then go to Target->put -dns-server 8.8.8.8 in Additional commandline option for your emulator and run; 
```

希望这会有所帮助:) 干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:16:24.537

尝试从命令行运行它。`emulator -avd Machine2.3 -no-boot-anim -dns-server 8.8.8.8`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:04:37.017

嗨，即使我也遇到过类似的问题..我尝试了以下方法，效果很好

```
 1)close your emulator
  2)Kill the adb process
  3)start the adb
  4) restart your eclispse than run it again.. 
```

我希望它可以工作......对我来说它工作......

# javascript - 获取原型对象的名称

> ID：12089823
> 
> 赞同：7
> 
> 时间：2012-08-23T10:41:43.160
> 
> 标签：javascript, knockout.js, prototype

**这个问题刚刚得到了投票，所以可以用我所做的更新问题**

我通过迭代窗口对象（或用户指定的对象根）来解决它，当我找到正确的实例时，我回溯并从索引中获取名称。最终解决方案可以在这里找到

[https://github.com/AndersMalmgren/Knockout.BindingConventions](https://github.com/AndersMalmgren/Knockout.BindingConventions)

**更新结束**

我正计划为 KnockoutJS / MVC 编写一个关于配置模板源引擎的约定。我从一个小的客户端 POC 开始，马上就遇到了一个表演障碍

我的计划是使用这种语法或类似的东西

```
MyApp.EditCustomersViewModel = function() {
   ko.templates.loadView(this);
}; 
```

执行此操作时，它将检查模板缓存或使用对象名称作为键从服务器获取模板。问题是我无法获得原型对象的名称，我试过这个

```
Object.prototype.getName = function() {
   var funcNameRegex = /function (.{1,})\(/;
   var results = (funcNameRegex).exec((this).constructor.toString());
   return (results && results.length > 1) ? results[1] : "";
}; 
```

如果适用于这样定义的对象

```
function MyClass() { 
} 
```

如果您将原型添加到上述对象，它将不起作用，或者如果您像这样定义它

```
MyApp = {};
MyApp.MyClass = function() {
}; 
```

原型和范围界定是两个必须的，所以这是一个很好的展示，有什么想法吗？

小提琴：http: [//jsfiddle.net/aRWLA/](http://jsfiddle.net/aRWLA/)

**编辑：**这个的背景是这样的。

在服务器上你有这样的结构

*   模板\ [视图名称]\index.html
*   模板\ [视图名称]\sub-model-template.html

在客户端你会做

```
MyApp.EditCustomersViewModel = function() {
   ko.templates.loadView(this);
}; 
```

这将生成一个以对象名称为键的 ajax 请求，它将获取相关视图的所有模板

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T08:55:39.517

只有提升的函数 ( `function someFunc() {`) 具有可检索的名称。

分配的函数不会，因为从技术上讲，您不是在命名函数，而是创建一个匿名函数并将对它的引用（在内存中）分配给命名变量。

因此，命名的是 var，而不是函数。

这使得检索函数名称的想法几乎无法启动，因为在任何模糊成熟的模式中，您将编写方法，而不是提升函数 - 当然方法是分配函数。

命名表达式（请参阅其他答案）是一种部分解决方法，但这些还有其他问题 - 尤其是在较旧的 IE 中缺乏支持。

（旁注：我一直期望浏览器供应商围绕这一点进行构建，以便分配函数的名称变得可检索，但 AFAIK 还没有喜悦。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T11:15:12.507

我认为您在替换函数原型时存在问题：如果替换函数原型对象，则必须`constructor`在原型中保留成员：

```
function Test1() {
}
Test1.prototype={
  constructor: Test1
};

MyApp={};
MyApp.MyClass=function MyClass(){
};
MyApp.MyClass.prototype={
  constructor: MyApp.MyClass
}; 
```

你的例子：http: [//jsfiddle.net/aRWLA/1/](http://jsfiddle.net/aRWLA/1/)

修改示例：http: [//jsfiddle.net/aRWLA/2/](http://jsfiddle.net/aRWLA/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:54:10.220

您可以使用**命名函数表达式**：

```
MyApp.MyClass = function MyClass() { ... }; 
```

但请注意（惊喜）它们在所有版本的 IE 中都不能正常工作。

见： http: [//kangax.github.com/nfe/](http://kangax.github.com/nfe/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T11:01:07.830

## 这不能回答问题

*但是，该代码可能对其他人有用，因此我将其留在这里，以防万一。我不指望赞成票，但也请不要滥用它来反对票。谢谢。*

* * *

我不知道您的用例，因此我认为您遇到了设计问题-您描述的问题在实践中不应该发生。

但是，假设您确实需要让这个工作。一个简单的方法来做你需要的事情是这样的：

```
function findNamed(obj, fn){
    for(var p in obj)
        if(obj[p] === fn)
            return p;
    return false;
}

var m = {};
m.MyClass = function() {};

console.log(findNamed(m, m.MyClass)); 
```

当然，解决方案可以做成更合适的 OOP 形式，但这只是提供一个想法。

要复制您的用例，它看起来像：

```
m.MyClass = function() {
    findNamed(this, arguments.callee);
}; 
```

* * *

**所以，最终的代码是：**

```
Object.prototype.getNameOfCall = function(fn) {
    for(var p in this)
        if(this[p] === fn)
            return p;
    throw "Callback not in object.";
};

var m = {};
m.MyClass = function() {
    console.log(this.getNameOfCall(arguments.callee)); // MyClass
};

m.MyClass(); // test it out 
```

# excel - 如何在公式中引用左侧单元格中的值

> ID：12089829
> 
> 赞同：0
> 
> 时间：2012-08-23T10:42:04.767
> 
> 标签：excel, excel-2007, excel-formula

我的电子表格中有 2 张工作表。Sheet2 从 Sheet1 中提取信息。在 sheet2 中，有 2 列。A 列有公司名称。B 列有一个公式，用于在 sheet1 中搜索该行的公司名称，并将 sheet1 中该行的值相加。

我已经能够通过以下公式实现这一点。

```
=SUMPRODUCT((Sheet1!B:B=A1)*(Sheet1!F:F)) 
```

这很好用，但是我必须在公式中手动输入“A1”。对于其他行，我必须写 B1、C1、D1 等。

我已经搜索了如何引用左侧的单元格，我找到了这个公式......

```
=OFFSET(INDIRECT(ADDRESS(ROW(), COLUMN())), 0, -1) 
```

这似乎可以作为单元格中的独立公式工作，但我无法弄清楚如何将其合并到`SUMPRODUCT`公式中。我尝试的任何东西都会出错。我需要这样的东西。

```
=SUMPRODUCT((Sheet1!B:B=(=OFFSET(INDIRECT(ADDRESS(ROW(), COLUMN())), 0, -1)))*(Sheet1!F:F)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:29:26.937

根据 pnuts 的建议，使其成为答案：

答案就是把公式拖过来。如果它不是整列或整行，请确保修复（使用 F4 或添加美元符号）您的范围

# jakarta-ee - Dropwizard 是否支持 Servlet 3 异步 Servlet？

> ID：12089834
> 
> 赞同：4
> 
> 时间：2012-08-23T10:42:20.233
> 
> 标签：jakarta-ee, servlets, dropwizard

Dropwizard 是否支持 Servlet 3 异步 servlet？如果没有，是否会在不久的将来随时出现在路线图上？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T06:52:25.120

它使用支持 Servlet 3.0 的 Jetty 8。Jersey（和 JAX-RS）对此没有任何支持，但它即将在 JAX-RS 2.0（和 Jersey 2.0）中提供。Dropwizard 没有添加任何特别的东西，但是当 Jersey 2.0 发布时，下一个主要的 Dropwizard 版本很可能会包含它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T10:48:12.050

您可以使用[https://github.com/jetty-project/jetty-eventsource-servlet](https://github.com/jetty-project/jetty-eventsource-servlet)。阅读 wiki 了解如何实现 Servlet 和 EventSource

在您的 DW 服务实现中，您添加您的 SSE servlet

```
environment.addServlet(new MySseEventSourceServlet(), "/sse"); 
```

然后将其添加到您的 DW 配置中

```
http:
    connectorType: NONBLOCKING 
```

现在你可以开始监听服务器发送的事件了

```
<host>:<port>/sse 
```

前任。

```
curl localhost:8080/sse -H"Accept: text/event-stream" 
```

参见工作示例@GitHub，[https://github.com/andershedstrom/dropwizard-with-sse](https://github.com/andershedstrom/dropwizard-with-sse)

# java - 在 Netbeans 中构建我的 Web 应用程序后如何运行 .war 文件

> ID：12089838
> 
> 赞同：0
> 
> 时间：2012-08-23T10:42:30.427
> 
> 标签：java, netbeans

我制作了一个小型 Web 应用程序`Netbeans`，它包含一些`JSP pages`. 无论如何，当我构建项目时，它创建了一个名为的文件夹`dist`，其中有一个`.war file`. 我该如何运行它？创建我的应用程序时，我使用`GlassFish Server`了`JavaDB`数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:59:05.430

尝试以下步骤；

*   登录到 glassfish：http://localhost:4848/（通常）提供用户名和密码。
*   单击浏览器左侧框架中常见任务上的应用程序，然后单击部署按钮以进入部署应用程序或模块屏幕。
*   单击浏览按钮以定位您的战争，或者您可以选择任何本地打包文件或目录复选框来定位您的应用程序存档或目录。请记住，申请的类型是必填字段，您必须选择该字段，否则您将无法继续。
*   单击“确定”进行部署。成功后，您将进入应用程序页面，您可以在其中看到启动、重新部署和重新启动，具体取决于应用程序类型。如果您想取消部署或启用/禁用特定应用程序，您可以通过选中复选框然后单击所需按钮来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:46:33.237

您必须将战争部署到您的应用程序服务器才能运行它。

# asp.net - 卡住流 Xml

> ID：12089839
> 
> 赞同：2
> 
> 时间：2012-08-23T10:42:43.187
> 
> 标签：asp.net, xml

这是我为获取一个 url 的 xml 而编写的代码，但它对任何 url 都显示“根级别的数据无效”。有人可以指定原因吗？

```
XmlDocument xdoc = new XmlDocument();//xml doc used for xml parsing                           
xdoc.LoadXml("http://latestpackagingnews.blogspot.com/feeds/posts/default");//loading XML in xml doc
XmlNodeList xNodelst = xdoc.DocumentElement.SelectNodes("entry");//reading node so that we can traverse thorugh the XML
Response.Write(xNodelst); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:50:04.143

[`XmlDocument.LoadXml`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.loadxml.aspx)方法等待 XML 文本，但不是源 URL。

首先，将页面内容下载到`string`，然后将其传递给`LoadXml`. 下载方法如下：

```
public string GetUrlContent(string url)
{
    var request = (HttpWebRequest)HttpWebRequest.Create(url);
    var response = (HttpWebResponse)request.GetResponse();

    var reader = new StreamReader(response.GetResponseStream(), Encoding.UTF8);
    var content = reader.ReadToEnd();

    reader.Close();
    response.Close();

    return content;
} 
```

在您的情况下，它将是：

```
var content = GetUrlContent("http://latestpackagingnews.blogspot.com/feeds/posts/default");
var doc = new XmlDocument();
doc.LoadXml(content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:50:06.157

`xdoc.LoadXml`can not for read url，将其更改为，`xdoc.Load`它将起作用。

您还可以阅读：[将返回的 XML 与 C# 结合使用](http://developer.yahoo.com/dotnet/howto-xml_cs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:54:37.287

您需要首先使用 WebClient 类下载您的 xml 数据

```
string downloadedString;
System.Net.WebClient client = new System.Net.WebClient();
downloadedString = client.DownloadString("http://latestpackagingnews.blogspot.com/feeds/posts/default");
//Now write this string as an xml
//I think you can easily do it with XmlDocument class and then read it 
```

# c# - 从子级访问时基类 0 的值

> ID：12089841
> 
> 赞同：0
> 
> 时间：2012-08-23T10:42:55.137
> 
> 标签：c#, inheritance, xna

我正在使用 Xna3，我无法让继承原理起作用。

我有这一堂课：

```
public class Papa{
  protected int winHeight = 10;
} 
```

然后我有

```
public class Son:Papa{
   int some = winHeight;
} 
```

我也试过base.winHeight。出于某种原因，当逐行调试时，我可以看到父级中 winHeight 的值是 10，但是在 Son 类中跳转时它是 0。

我想我所做的事情有问题，但我在网上找到的所有页面似乎都说这就是方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:53:40.943

有趣的是，我发现这段代码实际上并没有在 VS2012 中编译，出现错误“非静态字段、方法或属性 'Papa.winHeight' 需要对象引用”。你确定你的编译？

您的变量被声明为带有初始化程序的字段。假设您的代码*正在*为您编译，这些初始化程序的运行顺序（在派生类和基类之间）必须`some = winHeight`是在`winHeight = 10`.

我建议您改为将`Son`initlialisation 放在构造函数中，该构造函数将在`Papa`字段初始化后调用：

```
public class Son : Papa
{ 
   int some; 

   public void Son()
   {
      some = winHeight;
   }
} 
```

# .htaccess - 如何指定 htaccess 以匹配除 index.html 之外的所有文件？

> ID：12089842
> 
> 赞同：1
> 
> 时间：2012-08-23T10:42:56.617
> 
> 标签：.htaccess

我有以下用于身份验证的代码，如果 url 不是 index.html，则显示身份验证表单

```
<files "(?!index.html)">
    AuthUserFile  C:/wamp/www/eyedream/trunk/www/.htpasswd
    AuthName "Please login"
    AuthType Basic
    Require valid-user
</files> 
```

如果文件不是 index.html，如何指定，显示身份验证框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:50:13.320

您不能在`<Files>`块内使用 Auth 指令，它必须在 a`<Directory>`或 .htaccess 文件中。您可以设置环境变量并用于`Satisfy Any`绕过某些请求的身份验证：

```
SetEnvIfNoCase Request_URI ^/index.html$ norequire_auth=true
SetEnvIfNoCase Request_URI ^/$ norequire_auth=true

# Auth stuff
AuthUserFile C:/wamp/www/eyedream/trunk/www/.htpasswd
AuthName "Please login"
AuthType Basic

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# except if either of these are satisfied
Satisfy any
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_auth" var is NOT set
Allow from env=norequire_auth 
```

# java - 在 derby 中的表上描述和选择不使用与创建相同的列顺序

> ID：12089848
> 
> 赞同：2
> 
> 时间：2012-08-23T10:43:28.720
> 
> 标签：java, derby

我在 derbyDB 中遇到过有趣的行为。

我使用以下 SQL（来自 java 代码）创建了一个表...

```
Create Table S1.SortieDessai (OBS VARCHAR(9), DateDUSortie TIMESTAMP, ContreIndic BOOLEAN,
Fin BOOLEAN, PdeVu VARCHAR(255), Refus LONG VARCHAR , InvDecisn LONG VARCHAR ,
Admin LONG VARCHAR , Motif_de_la_sortie VARCHAR(255), NomValidee VARCHAR(255),
DateValidee TIMESTAMP ) 
```

但是，当我从 ij 调用描述时，我得到以下信息......

```
ij> describe sortiedessai;
COLUMN_NAME         |TYPE_NAME|DEC&|NUM&|COLUM&|COLUMN_DEF|CHAR_OCTE&|IS_NULL&
------------------------------------------------------------------------------
OBS                 |VARCHAR  |NULL|NULL|9     |NULL      |18        |YES
CONTREINDIC         |BOOLEAN  |NULL|NULL|1     |NULL      |NULL      |YES
FIN                 |BOOLEAN  |NULL|NULL|1     |NULL      |NULL      |YES
PDEVU               |VARCHAR  |NULL|NULL|255   |NULL      |510       |YES
REFUS               |LONG VAR&|NULL|NULL|32700 |NULL      |NULL      |YES
INVDECISN           |LONG VAR&|NULL|NULL|32700 |NULL      |NULL      |YES
ADMIN               |LONG VAR&|NULL|NULL|32700 |NULL      |NULL      |YES
MOTIF_DE_LA_SORTIE  |VARCHAR  |NULL|NULL|255   |NULL      |510       |YES
NOMVALIDEE          |VARCHAR  |NULL|NULL|255   |NULL      |510       |YES
DATEDUSORTIE        |DATE     |0   |10  |10    |NULL      |NULL      |YES
DATEVALIDEE         |DATE     |0   |10  |10    |NULL      |NULL      |YES 
```

当我执行 select * 时，列的报告顺序与上述相同。

在将表从一个 DBMS 复制到另一个 DBMS 时，这给我带来了问题。另一个 DBMS（Ms Access）按创建语句的顺序报告列名，所以当我执行插入时，我不能依赖 Access 报告的 Derby 中的顺序是“正确的”，这意味着我必须玩大约多一点以获得良好的顺序，然后按该顺序插入要插入的值，这不是很大的困难，而是加重了。

此外，当我创建我的表时，我将我想首先看到的信息放在我的 create 语句的开头，假设任何*select **命令都会以相同的顺序吐出结果。

这导致我提出几个问题。

我可以告诉 derby 以特定顺序（即创建顺序）报告某个设置中的表格吗？derby 是在做一些奇怪的行为，这是一个错误，还是与语句对象有关？（我已经尝试过 statement.execute(sqlString) 和 statement.executeUpdate(sqlString) 并且两者似乎都具有相同的效果 - 我暂时假设它是一个 java 的东西，就好像我在 ij 中创建表一切都在正确的顺序。

derby 如何确定如何报告任何给定表中列的顺序，看起来它是随机的，但无论我在 create 语句中使用列的顺序如何，describe 总是相同的！

注意：我已经意识到 Access 确实习惯于以完全随机的顺序吐出一些信息（即 databaseMetaData 中的表名列表从不以相同的顺序输出，但 resultSetMetadata 似乎是正确排序的）。

任何想法都会被极大地接受

部分解决方案和更多信息。请参阅我关于使用数组存储列名顺序并以相同顺序提取数据的评论。它不是很“好”，但它解决了问题。我还应该补充一点，我测试了我的数据（顺便说一下来自 ms Access 源）并在某些情况下确认正确的类型（即 Access 中的单个日期时间不能轻松映射到时间戳/日期/时间）。所以我修改了列的数据类型。显然，这种修改通过添加和删除列来改变结构，这也有助于打乱初始插入的“结构化”顺序。在我有机会编写一个合适的测试用例之前，我不能保证这不是我的问题的根本原因！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:24:56.030

奇怪的是，顺序取决于您是通过 ij 创建表，还是从 Java 程序创建表。如果您可以将其隔离为一个简单的测试用例，您应该考虑将其作为错误报告给 Derby 开发人员，因为我认为不应该这样。

要更深入地研究细节，请尝试查看列在`SYSCOLUMNS`系统表中的布局方式，特别是`COLUMNNUMBER`该表中列的值。

[http://db.apache.org/derby/docs/10.9/ref/rrefsistabs22441.html](http://db.apache.org/derby/docs/10.9/ref/rrefsistabs22441.html)

`SYSCOLUMNS`当您在 ij 中创建表与从 Java 应用程序中创建表时，您在表中得到相同的结果吗？

# c# - 本地数据库缓存：“仅后”和外键

> ID：12089853
> 
> 赞同：2
> 
> 时间：2012-08-23T10:43:37.933
> 
> 标签：c#, visual-studio-2010, sql-server-2008, caching

首先：我们使用 Visual Studio 2010、.Net 4 和 SQL Server 2008 R2（和 C#）

我们目前正在将旧应用程序迁移到 .Net。事实上，这是一个完整的重写。

该应用程序将是一个服务器-客户端设置，完全符合“偶尔连接”的描述。

典型安装涉及 10 个客户端和一台服务器。客户端正在从数据库访问一个半静态数据池（我们称之为核心数据）。

客户每天还会将一系列新条目（大约 700 到 800 个）添加到另一个表中。让我们称之为“帖子”。

现在我们想要一个本地数据库作为缓存，有两个目的：

1.  对于我们的主要客户，核心数据包含大约 200000 个条目，每天大约有 100 次更改。我们想在客户端缓存这些数据，因为我们需要快速访问它。

2.  对于其他几个较小的客户，我们没有运行专用服务器。其中一台客户端机器正在做这项工作。如果用户关闭“服务器”，客户端将无法保存新帖子。这实际上是一个严重的问题，并且经常发生（未经培训的用户）。为此，我们需要某种缓存。

现在，我读到了可以通过 Visual Studio 添加的本地数据库缓存，我已经尝试过了。

理论上，这正是我们所需要的。然而，实际上我遇到了一些困难：

1.  我注意到在创建本地缓存数据库时，本地数据库中缺少外键关系。我看到这被记录为“按预期工作”，但是我无法找到有关如何正确包含它们的说明，因此我可以在本地数据库中依赖它们并且我仍然可以同步。

    在我自己添加关系后，我仍然遇到了同步问题：

    我有两个表，表 A 和表 B。我在表 A 上添加了一个条目，在表 B 上添加了 30 个条目，引用表 A 中的条目。

    在同步表 A 已正确同步 - 在表 B 上没有同步条目。

    我在表 B 中添加了另外 30 个条目并尝试再次同步。这次它忽略了前 30 个条目并尝试仅同步新的 30 个条目。其中它只成功同步了一个。我显然在这里遗漏了一些东西。

2.  一个纯粹的理论问题：同步可以是“仅上传”、“仅下载”等。我们需要的是“仅发布”之类的东西。因为我无法让整个设置正常工作，所以我会在没有自己测试的情况下添加这个问题：

    如果我同步“仅上传”并在同步后清除本地数据库中的所有条目会发生什么？下次同步时它会从服务器中删除条目吗？如果是，我们是否仍然可以为此目的使用同步服务，还是应该使用数据集并将条目手动发布到服务器？

# php - 如何获取逗号分隔值的相应记录？

> ID：12089858
> 
> 赞同：2
> 
> 时间：2012-08-23T10:43:48.877
> 
> 标签：php, mysql, many-to-many

我有一个名为 features 的字段，因为我将值存储为逗号分隔值，现在在选择时我需要获取逗号分隔值的相应名称

```
table1- feature

id    feature_names
1        A
2        B
3        C
4        D
5        E

table2- car

id   car    feature_ids

1    Zen    2,3,4   // features = B,C,D
2    Benz   1,2     // features = A,B
3    Audi   4,5     // features  = D,E 
```

选择汽车表时如何获取逗号分隔值的对应名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:46:56.063

重新设计您的数据库。

*   **功能**- id、名称
*   **车牌**号、姓名
*   **car_feature** - car_id，feature_id

之后，您可以`JOIN`在查询中使用 a。像这样的东西：

```
SELECT car.*, feature.name FROM car
    JOIN car_feature ON car_feature.car_id = car.id
    JOIN feature ON feature.id = car_feature.feature_id 
```

您不应该在关系数据库中使用逗号分隔的字段。当然不是，如果您想基于该字段编写查询。即使它看起来有效，但它很快就会变得非常低效且无法维护。

您的场景称为表之间的多对多关系 - 汽车可以具有任何功能，并且功能可以属于任何汽车。我概述的技术称为交叉引用表。我已经给出了所有关键字供您搜索正确的 MySQL 教程和文章，例如：

*   [如何处理 PHP 和 MySQL 的多对多关系](http://www.tonymarston.net/php-mysql/many-to-many.html)
*   [MYSQL：多对多关系](http://return-true.com/2011/02/mysql-many-to-many-relationships/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:48:35.393

您可以尝试以下方法：

```
select 
    a.id,
    a.car,
    group_concat(b.feature_names) as Features
from
    car a
        join feature b
            on b.id in (cast(b.feature_ids as char)); 
```

话虽如此，您确实不应该在数据库中使用 CSV。每个功能取一行，并在您的*汽车*表中增加一些行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-23T10:46:57.597

```
SELECT car FROM table2 WHERE feature_ids LIKE '%3%' 
```

# c++ - 是否有任何计划或现有项目将 OpenGL API 移植到 C++？

> ID：12089859
> 
> 赞同：13
> 
> 时间：2012-08-23T10:43:57.980
> 
> 标签：c++, opengl

OpenGL 标准页面声明 OpenGL可从 C 和 C++*调用。*然而，API 当然是纯 C 语言。例如，由于 OpenGL 使用大量枚举，使用枚举类（来自 C++11）可以大大减少错误数量，并使 API 对初学者更可行。可以看出，创建了很多像 OpenTK（用于 C#）这样的绑定；创建好的 C++ API 应该不会*更难*。

我找不到任何比不起眼的包装更多的东西，因此我的问题是：

1.  是否有一个著名的 C++ 包装器使用 C++11 设施来支持 OpenGL？如果不，
2.  这样的事情是由任何知名人士（尤其是 Khronos）策划的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T12:37:25.040

OpenGL 工作的整个方式并不能很好地映射到 OOP：[http ://www.opengl.org/wiki/Common_Mistakes#The_Object_Oriented_Language_Problem](http://www.opengl.org/wiki/Common_Mistakes#The_Object_Oriented_Language_Problem)

本文没有说明的是*上下文关联问题*。在 OpenGL 中，一切都发生在上下文中，因此正确的“纹理”类只不过是与上下文一起使用的美化句柄。

这是**错误**的：

```
class Texture {
/* ... */

public:
    void bind();
} 
```

只有当纹理是当前活动上下文的一部分时，它才会起作用。

这也好不到哪里去：

```
class Texture {
/* ... */

public:
    void bind(Context &ctx);
} 
```

纹理仍然必须是 context 的一部分`ctx`，并且只有在此时处于活动状态时才会起作用`ctx`。

那么这个呢：

```
class Context {
/* ... */
public:
    void bindTextureToUnit(TextureUnit &tu, Texture &t);
}; 
```

更好，但仍然不正确，因为上下文必须是当前线程中当前活动的上下文。你可能会想“哦，如果上下文不活跃，我会抛出一个异常”。请不要这样做。

那么这个呢

```
class ActiveContext : Context {
/* ... */
public:
    void bindTextureToUnit(TextureUnit &tu, Texture &t);

} 
```

现在您已经确保每个线程只能有一个 ActiveContext 实例。最终你会陷入各种奇怪的线程单例混乱中。

事实上，我多次尝试实现从 OpenGL 状态和对象到一组 C++ 类的干净和健全的映射，但总有一些情况根本无法解决或最终导致可怕的代码混乱。

恕我直言，最好不要尝试将 OpenGL API 映射到一组 C++ 类中（不能正常完成），而是使用专门类中的常规 OpenGL API。任何 OpenGL 上下文管理都非常依赖于相关程序，因此必须专门针对所述程序进行定制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T13:38:14.547

*包装*OpenGL 和 OpenGL*对象模型*是两个不同的概念。OpenGL 实体可以很容易地被制作成对象来包装它们的功能，事实上，如果你想编写一个可以用 OpenGL 或 D3D 实例化的渲染器，这是绝对必要的。

我有这样的课程：

```
 class Device
        class State
    class Buffer
            class BufferUniform
        class BufferVertices
        class BufferIndices
        class BufferArray
    class Texture
        class Texture1d
        class Texture2d
        class Texture3d
        class TextureCubeMap
        class TextureArray
        class TextureRender
        class TextureFrame          
    class Shader
        class ShaderPixel
        class ShaderVertex
        class ShaderGeometry
        class ShaderEvaluator
        class ShaderTessellator
        class ShaderProgram
        class ShaderGenerator
            class ShaderGeneratorParser
            class ShaderGeneratorNode
            class ShaderGeneratorCondition 
```

...以及每个版本的 D3D 或 OpenGL 版本。Renderer<...> 在编译时用一组或另一组实例化，这取决于我想要 D3D 还是 OpenGL 来完成这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-25T07:32:34.447

> 是否有一个著名的 C++ 包装器使用 C++11 设施来支持 OpenGL？如果不，

不，已经有一些尝试了。

> 这样的事情是由任何知名人士（尤其是 Khronos）策划的吗？

Khronos ARB 并没有真正尝试直接与我们交流即将发生的事情。但是，我非常怀疑他们是否关心这种事情。

至于其他人，同样，那里有一些独立的项目。但一般来说，使用 OpenGL 的人对做这类事情并没有那么感兴趣。

基本事实如下： OpenGL 对象直接与一些全局概念相关联。即，OpenGL 上下文。这些对象只有在它们所在的上下文（因为对象可以在上下文之间共享）处于活动状态时才能被操作。

因此，任何 C++ 面向对象的系统都*必须*决定它想要的容错程度。也就是说，它想提供什么样的保证。如果你调用一个对一个对象进行操作的函数，你能确定这个调用成功吗？

以下是可以合理提供的保证级别列表：

### 完全肛门

在这种情况下，您可以确保每个函数调用要么成功，要么正确检测到错误条件并正确失败。

为了实现这一点，您需要一个*显式*的OpenGL 上下文对象。每个 OpenGL 对象都必须与上下文（或特定上下文本身，如果对象类型不可共享）之间的共享组相关联。

所有对象成员函数都必须采用上下文对象，该对象必须是它们所属的上下文或该上下文的共享组的成员。必须有一个上下文的每个线程缓存，以便他们可以检查当前上下文是否是给定的上下文，如果不是，则使其成为当前上下文。

当一个上下文被销毁时，依赖于该上下文存在的每个对象都必须立即失去功能。因此，每个这样的对象都需要访问某个标签（例如通过 a `std::weak_ptr`），让他们知道他们所有的函数调用都会失败。

如果要对对象进行适当的 RAII，则每个对象都必须能够确保它们可以在其中销毁的上下文（即：`glDelete*`函数）是当前的。如果不是，他们需要*制作*一个电流。所以基本上，每个对象都需要持有对有效上下文的引用，否则需要能够创建一个。

就个人而言，我觉得这一切都*非常*愚蠢。没有 API 具有*这种*容错能力，也不需要如此。有很多毫无意义的保姆和信息共享。C++ 不是一种*安全*语言，因此它不应该仅仅为了提供这种安全级别而浪费良好的内存和/或性能。

### 萨内

在这里，我们摆脱了基于上下文的安全检查。在尝试以任何方式使用任何对象之前，*用户*应确保正确的上下文是最新的。这与 C++ 一样。这个 API 的主要特点就是比原始的 C API 更好。

*OpenGL 对象将是 RAII 样式，但它们也将具有“处理”函数，如果您希望它们清除自身而不*删除其相应对象，则可以调用该函数。如果您要关闭上下文并且不想运行并破坏所有对象，这很有用。

该系统基本上会假设您想要这些类的纯直接状态访问。因此，没有一个修改成员函数实际上将对象绑定到上下文。他们可以通过以下几种方式之一来实现：

1.  使用 EXT_DSA 或等效的（如果有）。
2.  如果 EXT_DSA 或等效项不可用，则存储修改后的状态并在下次绑定此对象时发送修改。
3.  或者只是绑定它，进行修改，然后取消绑定。

某些类型的修改不能使用#2。例如`glBufferData`，`glBufferSubData`和`glTexSubImage*D`调用。用户真的希望它们现在发生。这些函数的命名方式应使它们与*保证*的非绑定函数区分开来。

任何此类绑定函数都不应努力恢复对象的先前绑定状态。

### 宽容的

基本上，C++ 成员函数和 C 函数之间存在 1:1 的对应关系。当然，您将使用 C++ 运算符重载等来减少不必要的函数变化。但归根结底，您几乎是在以编写 C 代码的方式编写 C++ 代码。

对象可能会使用 RAII，但除此之外它们不会提供任何真正的便利。成员函数要么绑定对象本身，要么期望你绑定它们。或者，如果 DSA 不可用，他们将使用 DSA 并失败。

### 何苦？

归根结底，从 C++ 接口到 OpenGL 并*没有*什么好处。当然，你会得到 RAII。好吧，您可以通过使用`std::unique_ptr`带有特殊删除器函子的 a 来获得 RAII（是的，真的，这是非常可能的）。但除了 API 带来的一些轻微便利之外，您还获得了哪些以前没有的真正表达*能力？*

如果您对使用 OpenGL 开发应用程序很认真，那么您可能会构建一个渲染系统，相对于您的其余代码，它将 OpenGL 的概念抽象出来。因此，除了您的渲染器之外，没有人会看到您花哨的 C++ 界面。您的渲染器也可以轻松使用 OpenGL 的 C API。如果它几乎没有给您带来任何好处，为什么还要从抽象中构建您的渲染器。

如果你只是在玩 OpenGL……那有什么关系呢？只需使用您拥有的界面即可。

# java - 解析数据 org.json.jsonexception 在字符 1 处输入结束时出错

> ID：12089861
> 
> 赞同：0
> 
> 时间：2012-08-23T10:44:05.573
> 
> 标签：java, php, android, mysql, json

我是 android 开发新手，我根据本教程构建了一个 android 应用程序... [Android 教程 22 - JSON Array 数据在 ListView 中使用 ArrayList 和自定义类显示](http://www.youtube.com/watch?v=0TulTqQM0Cc)

我已经完成了教程所说的一切，但是当我运行模拟器时，我收到以下消息：

> **解析数据时出错 org.json.jsonexception 在字符 1 处输入结束**

这是代码：

```
public class Antallaktika extends Activity {

ArrayList<proionta> arrayOfWebData = new ArrayList<proionta>();

class proionta {
    public String product_name;
    public String product_sku;
    public String product_price;
}

FancyAdapter aa=null;

static ArrayList<String> resultRow;

public void onCreate(Bundle savedInstanceState) {
    try{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.antallaktika);
        String result = "";

    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://machina.gr/antallaktika2.php");
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream webs = entity.getContent();

        try{
            BufferedReader reader = new BufferedReader (new InputStreamReader(webs, "ISO-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line = "\n");
            }
            webs.close();
            result=sb.toString();
        }
        catch (Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
        }
    }
        catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
        }
    try{
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++){
            JSONObject json_data = jArray.getJSONObject(i);
            proionta resultRow = new proionta();
            resultRow.product_name = json_data.getString("jos_vm_product.product_name");
            resultRow.product_sku = json_data.getString("jos_vm_product.product_sku");
            resultRow.product_price = json_data.getString("jos_vm_product_price.product_price");
            arrayOfWebData.add(resultRow);
        }
    }
    catch(JSONException e){
        Log.e("log_tag", "Error parsing data "+e.toString());
    }
    ListView myListView = (ListView)findViewById(R.id.myListView);
    aa=new FancyAdapter();
    myListView.setAdapter(aa);
    }
    catch (Exception e){
        Log.e("ERROR", "ERROR IN CODE: " + e.toString());
        e.printStackTrace();
    }
}

class FancyAdapter extends ArrayAdapter<proionta> {
    FancyAdapter() {
        super(Antallaktika.this, android.R.layout.simple_list_item_1, arrayOfWebData);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView==null){
            LayoutInflater inflater=getLayoutInflater();
            convertView=inflater.inflate(R.layout.customgrid, null);
            holder=new ViewHolder (convertView);
            convertView.setTag(holder);
        }
        else{
            holder=(ViewHolder)convertView.getTag();
        }
        holder.populateFrom(arrayOfWebData.get(position));
        return(convertView);
    }
}

class ViewHolder{
    public TextView product_name=null;
    public TextView product_sku=null;
    public TextView product_price=null;

    ViewHolder(View customgrid) {
        product_name=(TextView)customgrid.findViewById(R.id.product_name);
        product_sku=(TextView)customgrid.findViewById(R.id.product_sku);
        product_price=(TextView)customgrid.findViewById(R.id.product_price);
    }
    void populateFrom(proionta r){
        product_name.setText(r.product_name);
        product_sku.setText(r.product_sku);
        product_price.setText(r.product_price);
    }
}

} 
```

和 php 文件是：

```
<?php

$databasehost = "localhost";
$databasename = "xxxxxxxxxxx";
$databaseusername = "xxxxxxxxxxxxxx";
$databasepassword = "xxxxxxxxxxxxx";

$con = mysql_connect($databasehost,$databaseusername,$databasepassword) or die(mysql_error());
mysql_select_db($databasename) or die(mysql_error());

$query = ("SELECT jos_vm_product.product_name, jos_vm_product.product_sku, jos_vm_product_price.product_price
FROM jos_vm_product, jos_vm_product_category_xref, jos_vm_product_price
WHERE jos_vm_product_category_xref.category_id=2 
   AND jos_vm_product_category_xref.product_id= jos_vm_product.product_id
   AND jos_vm_product.product_id=jos_vm_product_price.product_id
ORDER BY jos_vm_product.product_name");
$sth = mysql_query($query);

if (mysql_errno()) {
header("HTTP/1.1 500 Internal Server Error");
echo $query. '\n';
echo mysql_error();
}
else
{
$rows = array();
while($r = mysql_fetch_assoc($sth)) {
    $rows[] = $r;
    }
print json_encode($rows);
}
?> 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T12:02:09.400

```
08-23 11:57:48.639: E/dasd(336): [{"product_name":"250 1?.70,5 ??","product_sku":"??.86.???.LBR.169","product_price":"0.00000"},{"product_name":"BI?? 6?12","product_sku":"??.81.???.SEP.553","product_price":"0.00000"},{"product_name":"BI?? 8X16 TSEI","product_sku":"??.81.???.SEP.554","product_price":"0.00000"},{"product_name":"BOCCOLA","product_sku":"??.99.???.SEP.223","product_price":"0.00000"},{"product_name":"BOCCOLA - ?????????? ??????? ??? MFC150-1000","product_sku":"??.81.???.SEP.234","product_price":"1.57500"},{"product_name":"BOCOLLA","product_sku":"??.99.???.SEP.390","product_price":"0.00000"},{"product_name":"CARTUCCIA INTERMOTOR ??? IM252\/350 (226)","product_sku":"??.86.???.LBR.124","product_price":"1.84800"},{"product_name":"D1140","product_sku":"??.99.???.SEP.476","product_price":"0.00000"},{"product_name":"E??????? ???????","product_sku":"??.85.???.PAT.073","product_price":"0.00000"},{"product_name":"FOTORESISTENZA FC","product_sku":"??.86.???.ITM.011","product_price":"0.00000"},{"product_name":"GROUP BILANCERE (4330.039 VECH) (L25)","product_sku":"??.86.???.LBR.160","product_price":"14.70000"},{"product_name":"JOYSTICK RIVER 21M4000069-4C016","product_sku":"??.97.???.ORS.103","product_price":"210.00000"},{"product_name":"KIT PRONTO INTERVENTO AR19","product_sku":"??.86.???.A&R.034","product_price":"34.12500"},{"product_name":"KIT PRONTO INTERVENTO AR30","product_sku":"??.86.???.A&R.037","product_price":"34.12500"},{"product_name":"KIT PRONTO INTERVENTO AR503","product_sku":"??.86.???.A&R.039","product_price":"34.12500"},{"product_name":"KIT ??? ??????????? QP BRIGGS & STRATTON","product_sku":"??.89.???.SIG.059","product_price":"0.00000"},{"product_name":"NTIZA AYTOKINH??? UNIVERSALE","product_sku":"??.89.???.SIG.069","product_price":"13.25100"},{"product_name":"NTIZA AYTOKIN???? TBS 47","product_sku":"??.89.???.SIG.068","product_price":"16.02300"},{"product_name":"OR 53.4X49.8X1.8","product_sku":"??.81.???.SEP.430","product_price":"0.00000"},{"product_name":"OR 65?61,4?1,8","product_sku":"??.81.???.SEP.340","product_price":"1.15500"},{"product_name":"OR ?12,37X2,62 OR3050","product_sku":"??.81.???.SEP.608","product_price":"0.00000"},{"product_name":"OR ?15,08?2,62 OR119","product_sku":"??.81.???.SEP.552","product_price":"0.00000"},{"product_name":"OR ?15,60?1,78 OR2062","product_sku":"??.81.???.SEP.591","product_price":"0.00000"},{"product_name":"OR ?34,5?3,53 OR 4137","product_sku":"??.81.???.SEP.607","product_price":"0.00000"},{"product_name":"OR ?39,69?3,53 OR144","product_sku":"??.81.???.SEP.531","product_price":"0.00000"},{"product_name":"OR ?44,45?3,53 OR149","product_sku":"??.81.???.SEP.551","product_price":"0.00000"},{"product_name":"OR ?45,69?2,62 OR3181","product_sku":"??.81.???.SEP.532","product_price":"0.00000"},{"product_name":"OR ?49?2","product_sku":"??.81.???.SEP.592","product_price":"0.00000"},{"product_name":"OR ?55,25?2,62 OR3218","product_sku":"??.81.???.SEP.570","product_price":"0.00000"},{"product_name":"OR ?9,113?2,62 OR109","product_sku":"??.81.???.SEP.569","product_price":"0.00000"},{"product_name":"OR ?9,92?2,62","product_sku":"??.81.???.SEP.590","product_price":"0.00000"},{"product_name":"ORING 114","product_sku":"??.85.???.PAT.025","product_price":"0.00000"},{"product_name":"ORING 114","product_sku":"??.85.???.PAT.031","product_price":"0.00000"},{"product_name":"ORING 2010","product_sku":"??.85.???.PAT.028","product_price":"0.00000"},{"product_name":"ORING 2018","product_sku":"??.85.???.PAT.029","product_price":"0.00000"},{"product_name":"ORING 3162","product_sku":"??.85.???.PAT.033","product_price":"0.00000"},{"product_name":"ORING 3175","product_sku":"??.85.???.PAT.006","product_price":"0.00000"},{"product_name":"ORING OR 3112 ???????? ?????????  4\/5 ??????","product_sku":"??.93.???.ABA.032","product_price":"0.31500"},{"product_name":"P.T.O ??? SEP 1000","product_sku":"??.81.???.SEP.089","product_price":"0.00000"},{"product_name":"PAGLIETTA INTERMOTOR ??? IM252\/350 (146)","product_sku":"??.86.???.LBR.134","product_price":"1.38600"},{"product_name":"PIATTELLO INTERMOTOR ??? IM252\/ 
```

看看它不会以 ']' 结尾 太多数据无法保存在字符串中 一次仅发送 10 个 prdct 当用户到达列表视图末尾时再发送 10 个 prdct

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:48:40.870

改变

```
 resultRow.product_name = json_data.getString("jos_vm_product.product_name");
        resultRow.product_sku = json_data.getString("jos_vm_product.product_sku");
        resultRow.product_price = json_data.getString("jos_vm_product_price.product_price"); 
```

至

```
 resultRow.product_name = json_data.getString("product_name");
        resultRow.product_sku = json_data.getString("product_sku");
        resultRow.product_price = json_data.getString("product_price"); 
```

就像在您的 json 文件中一样，列出的标签就像引用了 url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:58:46.770

即使我的应用程序也遇到了这个异常，但在我的情况下，它是来自服务器的 JSONException 为 null ......我认为在你的情况下也可能是同样的问题......可能是你的 php 标签或来自 php 链接的响应是不对的或即将到来的……似乎……

# c# - 通过反射连接通用委托

> ID：12089865
> 
> 赞同：1
> 
> 时间：2012-08-23T10:44:18.863
> 
> 标签：c#, delegates, runtime

我想在运行时连接一个通用委托，您可以查看下面的示例代码。

但是，在将委托绑定到事件时，`Delegate.CreateInstance`我得到一个`ArgumentException`（'错误绑定到目标方法'）。

```
class MyClass
{
    public event EventHandler<MyEventArgs> OnRequest;
}

class MyEventArgs : EventArgs { }

class Program
{
    static void Main(string[] args)
    {
        MyClass obj = new MyClass();
        EventInfo eventInfo = obj.GetType().GetEvent("OnRequest");
        Type delegateType = eventInfo.EventHandlerType;
        MethodInfo methodInfo = typeof(Program).GetMethod("OnRequestReceived");
        Delegate del = Delegate.CreateDelegate(delegateType, methodInfo);
    }

    public static void OnRequestReceived(object o, EventArgs e) { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:49:17.033

当您为静态方法创建委托时，您需要传递`null`而不是对象实例，如果您正在为实例方法创建委托，则它必须是对定义处理程序方法的对象实例的引用，而不是定义事件的对象。

```
Delegate.CreateDelegate(delegateType, null, methodInfo); 
```

在这种情况下，您可以进一步简化，只需使用仅需要委托类型和方法信息的重载。

```
Delegate.CreateDelegate(delegateType, methodInfo); 
```

另请注意，在您提供的示例代码中，您只是创建了委托，而不是实际将其附加到事件。为了将其绑定到事件，您还需要执行以下操作：

```
eventInfo.AddEventHandler(obj, del); 
```

# html - Flash AS3 自定义颜色频闪动画

> ID：12089868
> 
> 赞同：0
> 
> 时间：2012-08-23T10:44:29.853
> 
> 标签：html, actionscript-3, flash, actionscript, web

我已经在一个网站上工作了一段时间[（http://strobepage.com/](http://strobepage.com/)注意：如果您患有癫痫症，请不要点击）。基本上这个想法是观众可以在不同的频闪幻觉和颜色之间进行选择。 .

我开始思考，我想，我可以让用户在频闪动画中选择 2+ 种颜色，而不是制作许多具有各种不同颜色的不同特定动画，我可以让事情变得容易得多。可能，用户可以从（在主页上）选择不同的 SWF，并且这些不同的 SWF 在频闪灯中可能都有不同数量的颜色旋转，例如 3 种重复颜色。我意识到这只有在以下情况下才有意义不可能将所有内容集成到一个文件中..

无论如何，我已经尝试并尝试了很多方法，但我无法得到任何工作..它需要与我所拥有的一起工作..带有“全屏”按钮的基本频闪灯，将频闪灯启动到全屏，然后我希望用户迎接带有 GUI 的屏幕，允许他们选择颜色，然后单击以继续.. 也可能是在闪光灯运行时出现的颜色选择器..

任何建议都必须与我已经拥有的功能和控件一起使用，如果您也可以建议使用 AS，那就太棒了.. 但只有一堆想法也会很棒。

谢谢，我期待阅读一些有趣的想法；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:02:41.960

您可能想为癫痫患者添加一些警告，不要点击该链接。人可能会受伤。

至于您的问题，您始终可以使用以下方法为影片剪辑着色：

```
var c:ColorTransform = new ColorTransform();
c.color = (0xFF0000); // should be red
myMovieclip.transform.colorTransform = c; 
```

这将要求您的动画基于电影剪辑，而不仅仅是“补间”。至于补间，您可能可以将整个内容放入 Movieclip 并为其着色，这一切都取决于您最初是如何做到的。

# c# - linq 加入和计数

> ID：12089870
> 
> 赞同：4
> 
> 时间：2012-08-23T10:44:32.660
> 
> 标签：c#, asp.net, linq

我是 Linq 的新手，想知道如何获取客户 ID 列表以及他们的交易计数

```
public class Transaction
{
    public int TransactionId {get; set;}
    public int CustomerId {get; set;}   
}

public class Customer
{
    public int ID {get; set;}
    public string Name {get; set;}
    public string Surname {get; set;}
} 
```

我想我需要与客户一起进行交易，但不太确定如何计算。

```
 var query  =    (from c  in customers
                    join t in transactions on c.ID equals t.CustomerId 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:45:25.937

```
var query = transactions
                .GroupBy(t => t.CustomerId)
                    .Select (t => new { Id = t.Key, TranCount = t.Count() })
                        .ToList(); 
```

无需加入您就拥有 Transaction 对象的所有信息。

但是，如果您需要额外的客户信息（例如客户姓氏），则需要加入，在这种情况下，您可以执行以下操作；

```
var query  =    (from c  in customers
                join t in transactions on c.ID equals t.CustomerId
                group c by c.ID  into grp 
                select new 
                { 
                    Id = grp.Key, 
                    Surname = grp.First().Surname, 
                    TranCount = grp.Count() 
                }).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-20T09:11:21.713

saj 的回答只有在每个客户都有交易时才有效。相反，最好使用以 开头的组加入`Customer`，并计算结果：

```
var query = from customer in customers
            join transaction in transactions
              on customer.Id equals transaction.CustomerId
              into customerTransactions
            select new { customer.Id, Count = customerTransactions.Count() }; 
```

# php - Zend_Pdf : 在 Pdf 文档的多个页面上显示 Hello world

> ID：12089872
> 
> 赞同：2
> 
> 时间：2012-08-23T10:44:44.133
> 
> 标签：php, zend-framework, zend-pdf

如何使用 Zend_Pdf 在单个 PDF 文档的多个页面上显示“hello world”？

```
 $pdf = new Zend_Pdf(); 
 $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);
$page->setFont($font, 24) ->drawText('Hello World,', 72, 720);
 $pdf->pages[] = $page;
 $pdf->save('new.pdf'); 
```

我已经尝试了上面的代码，但无法编写用于迭代多个页面的代码块

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T12:12:38.490

在我刚刚发表的评论之后，我将其作为答案发布，因为代码在评论中呈现不佳。如果您想要具有相同文本的多个页面，我想您可以简单地执行一个循环：

```
<?php
    $pdf = new Zend_Pdf(); 
    $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

    for($i=0; $i<5; $i++) {
        $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
        $page->setFont($font, 24) ->drawText('Hello World page '.$i, 72, 720);
        $pdf->pages[] = $page;
    }

    $pdf->save('new.pdf');
?> 
```

我没有测试代码，因为就像 h2ooooooo 一样，我并没有真正使用 Zend_Pdf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:36:24.593

老实说，我不知道如何`Zend_Pdf`工作，但我可以想象这样的事情会起作用：

```
<?php
    $pdf = new Zend_Pdf(); 
    $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

    $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
    $page->setFont($font, 24) ->drawText('Hello World page one,', 72, 720);
    $pdf->pages[] = $page;

    $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
    $page->setFont($font, 24) ->drawText('Hello World page two,', 72, 720);
    $pdf->pages[] = $page;

    $pdf->save('new.pdf');
?> 
```

# azure - 使用 Windows azure 本地存储空间进行临时文件处理

> ID：12089875
> 
> 赞同：0
> 
> 时间：2012-08-23T10:44:56.450
> 
> 标签：azure, resources, local

我们正在使用 azure 本地存储来处理临时文件。这些临时文件将通过应用程序上传到本地存储。为此，我在 ServiceDefinition.csdef 文件中配置了以下代码。

**本地资源 LocalStorage name="ELearningSpace" sizeInMB="2000" cleanOnRoleRecycle="true" 本地资源**

我们使用下面的代码来访问 azure 实例的本地存储 **LocalResource uploadFolder = RoleEnvironment.GetLocalResource("mylocalStore"); file.SaveAs(uploadFolder.RootPath + "Content/" + collection["packageType"].ToString() + "/" + fileName);** 还包括 dll（使 dll 复制本地为真）

*   Microsoft.identity.model。
*   Microsoft.Windowsazure.serviceruntime。

问题：在我的带有云刺激器的本地机器上，上述代码运行良好。但是在实际的云环境中，我遇到了错误。 **异常：“'' 的类型初始化程序引发了异常。” “System.Runtime.Serialization.SerializationException 消息：找不到程序集 'Microsoft.IdentityModel，Version=3.5.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35'。来源：mscorlib？**

有人请帮我找出我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:26:47.733

在某些情况下**Copy Local=true**是不够的（[链接](http://blogs.msdn.com/b/benko/archive/2012/04/07/cloud-tip-9-add-microsoft-identitymodel-to-the-gac-with-a-startup-task.aspx)）。尝试使用[Azure 插件库](https://github.com/richorama/AzurePluginLibrary/tree/master/plugins/WIF)或[Windows Azure Bootstrapper](http://bootstrap.codeplex.com/)安装 WIF 运行时。安装运行时也会将程序集复制到 GAC，这应该可以解决您的问题。

# activerecord - Rails 在一对一关系中找不到路由（使用 Devise）

> ID：12089877
> 
> 赞同：0
> 
> 时间：2012-08-23T10:44:58.387
> 
> 标签：activerecord, devise, routes, ruby-on-rails-3.2

我在 Rails 中遇到嵌套路由的问题，我不知道我做错了什么。

简而言之：我使用 Devise 进行身份验证和注册。现在我想让用户输入有关他的联系数据的更多详细信息。为了保持用户模型小，我想使用一个不同的模型，称为帐户。由于用户只有一个帐户，因此我使用一对一关联和嵌套路由。但不知何故，路由不起作用。这是我的用户模型：

**用户.rb**

```
class User < ActiveRecord::Base
  has_one :account, :dependent => :destroy
  attr_accessible :username, :email, :password, :password_confirmation, :remember_me 
```

这是我的帐户模型：

**帐号.rb**

```
class Account < ActiveRecord::Base
 attr_accessible :anrede, :land, :nachname, :plz, :stadt, :strasse, :user_id, :vorname
 belongs_to :user
end 
```

我的路线文件如下所示：

**路线.rb**

```
devise_for :users, :path => 'members'
 resources :users do
  resource :account
 end 
```

由于用户可能还没有帐户，因此我在我看来对此进行了测试：

```
 <% if current_user.account.try %>
        <li><%= link_to "Account", user_account_path %></li>
        <% else %>
        <li><%= link_to "create Account", new_user_account_path %></li>
        <% end %> 
```

但是当我使用登录用户进入根路径时，Rails 告诉我

```
Routing Error
No route matches {:action=>"new", :controller=>"accounts"} 
```

但是我的 accounts_controller.rb 中有一个新操作，因为我已经搭建了整个 CRUD 集（使用 current_user.build_account 编辑创建），它也是 rake 路由给出的路径。

我绝望地陷入了这个困境！有人可以帮我吗？

**编辑** 这是我的 rake 路线的输出：

```
 user_account POST   /users/:user_id/account(.:format)      accounts#create
    new_user_account GET    /users/:user_id/account/new(.:format)  accounts#new
   edit_user_account GET    /users/:user_id/account/edit(.:format) accounts#edit
                     GET    /users/:user_id/account(.:format)      accounts#show
                     PUT    /users/:user_id/account(.:format)      accounts#update
                     DELETE /users/:user_id/account(.:format)      accounts#destroy 
```

**编辑2**

这是操作新表单的错误消息：

```
NoMethodError in Accounts#new

Showing /home/stonjarks/Work/toytrade_devise/app/views/accounts/_form.html.erb where line #1 raised:

undefined method `accounts_path' for #<#<Class:0xa44d0cc>:0xab6222c>

Extracted source (around line #1):

1: <%= form_for(@account) do |f| %>
2:   <% if @account.errors.any? %>
3:     <div id="error_explanation">
4:       <h2><%= pluralize(@account.errors.count, "error") %> prohibited this account from being saved:</h2> 
```

我使用这个 SO hack 解决了这个问题，但无论如何这是一个奇怪的行为：

[单一资源的 Rails 嵌套路由](https://stackoverflow.com/questions/1157574/rails-nested-route-for-singular-resource)

```
<%= form_for @account,:url=>{:action=>:create} 
```

但无论如何，我仍然不明白这条路线的意义。尽管如此，我还是无法找到显示帐户的路线：

/用户/1/帐户

```
ActiveRecord::RecordNotFound in AccountsController#show

Couldn't find Account without an ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:24:14.620

`new_user_account_path`缺少应提供的用户实例，例如：

`new_user_account_path(current_user)`

如果您查看以下行：

```
new_user_account GET    /users/:user_id/account/new(.:format)  accounts#new 
```

您可以看到该路径需要一个 :user_id - 一个用户实例。

您可以[在此处](http://railsadventures.wordpress.com/2012/07/29/rails-dead-end-no-route-matches/)阅读以进一步说明您的问题。

# c# - 如何阻止来自特定地址的传入连接？

> ID：12089879
> 
> 赞同：1
> 
> 时间：2012-08-23T10:45:08.760
> 
> 标签：c#, .net, wcf

我有一个会话 WCF 双工服务（绑定：）`NetTcpBinding`：该服务具有`Subscribe`启动会话的`Unsubscribe`方法和终止会话的方法。该服务保留了一个端点黑名单，因此我希望该服务拒绝访问此黑名单中包含的端点。有没有办法自动过滤来自某些地址的连接，避免创建新会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:20:35.900

每当启动新会话时，都会在 WCF 服务中初始化一个新的实例上下文，因此您可以使用自定义`IInstanceContextInitializer`实现来执行该验证。下面的代码显示了如何做到这一点的一种方法。

```
public class StackOverflow_12089879
{
    [ServiceContract(SessionMode = SessionMode.Required)]
    public interface IStackCalculator
    {
        [OperationContract]
        void Enter(double value);
        [OperationContract]
        double Add();
        [OperationContract]
        double Subtract();
        [OperationContract]
        double Multiply();
        [OperationContract]
        double Divide();
    }
    public class StackCalculator : IStackCalculator
    {
        public Stack<double> stack = new Stack<double>();

        public void Enter(double value)
        {
            Console.WriteLine("Entering {0}", value);
            stack.Push(value);
        }

        public double Add()
        {
            return Execute("Add", (x, y) => x + y);
        }

        public double Subtract()
        {
            return Execute("Subtract", (x, y) => x - y);
        }

        public double Multiply()
        {
            return Execute("Multiply", (x, y) => x * y);
        }

        public double Divide()
        {
            return Execute("Divide", (x, y) => x / y);
        }

        private double Execute(string operationName, Func<double, double, double> operation)
        {
            double first = stack.Pop();
            double second = stack.Pop();
            double result = operation(first, second);
            Console.WriteLine("Executing {0}({1}, {2}), result = {3}", operationName, first, second, result);
            stack.Push(result);
            return result;
        }
    }
    static Binding GetBinding()
    {
        var result = new NetTcpBinding(SecurityMode.None);
        return result;
    }
    public class MyInstanceContextInitializer : IEndpointBehavior, IInstanceContextInitializer
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            endpointDispatcher.DispatchRuntime.InstanceContextInitializers.Add(this);
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        public void Initialize(InstanceContext instanceContext, Message message)
        {
            RemoteEndpointMessageProperty remp = (RemoteEndpointMessageProperty)message.Properties[RemoteEndpointMessageProperty.Name];
            Console.WriteLine("Starting new session from {0}:{1}", remp.Address, remp.Port);
            Console.WriteLine("If session should not be started, throw an exception here");
        }
    }
    public static void Test()
    {
        string baseAddress = "net.tcp://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(StackCalculator), new Uri(baseAddress));
        ServiceEndpoint endpoint = host.AddServiceEndpoint(typeof(IStackCalculator), GetBinding(), "");
        endpoint.Behaviors.Add(new MyInstanceContextInitializer());
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<IStackCalculator> factory = new ChannelFactory<IStackCalculator>(GetBinding(), new EndpointAddress(baseAddress));
        IStackCalculator proxy = factory.CreateChannel();
        proxy.Enter(40);
        proxy.Enter(30);
        proxy.Enter(20);
        proxy.Add();
        proxy.Subtract();

        ChannelFactory<IStackCalculator> factory2 = new ChannelFactory<IStackCalculator>(GetBinding(), new EndpointAddress(baseAddress));
        IStackCalculator proxy2 = factory.CreateChannel();
        proxy2.Enter(40);
        proxy2.Enter(30);
        proxy2.Enter(20);
        proxy2.Add();
        proxy2.Subtract();

        ((IClientChannel)proxy).Close();
        factory.Close();
        ((IClientChannel)proxy2).Close();
        factory2.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# telerik - 有记录时，RadGrid 显示“没有要显示的记录”

> ID：12089880
> 
> 赞同：2
> 
> 时间：2012-08-23T10:45:14.323
> 
> 标签：telerik, radgrid

我有一个特殊的问题，我不确定之前是否有人遇到过这个问题。但是问题是这样的..

我有一个包含 TemplateColumns 和 BoundColumns 组合的网格，当我使用模板列下的过滤器过滤网格时，我可以在 UI（网格）中看到结果，但是当我在 BoundColumns 中执行相同操作时，我看不到任何结果.. !! ！

有趣的是我可以看到查询的输出，它从数据库返回正确数量的结果。并且它也在 NeedDataSource 事件中分配给 GridDataSource。但是我在 ItemDataBoundItem 中找不到 GridDataItem，我只能获取 headeritem、filteritem 和 footeritem。

即使有很多记录分配给数据源，它也会显示“没有要显示的记录”。在这里我附上屏幕截图，您可以在其中看到记录数显示但不显示记录.. !!

![没有记录](../Images/0dbc3223c4b5d257da28203681d31128.png)

非常感谢任何帮助。

这是代码示例

```
<ps:MassApprovalAjaxPanel runat="server" ID="m_UIRadAjaxPanel" LoadingPanelID="m_UIAsynBindLoadPanelInMasterPage">
    <ps:MassApprovalRadGrid
        runat="server"
        ID="m_UIListingGrid"
        SkinID="Grid_MassApproval"
        OnNeedDataSource="ListingGrid_NeedDataSource"
        OnItemDataBound="ListingGrid_ItemDataBound"
        AllowFilteringByColumn="true"
        EnableViewState="true">
        <MasterTableView
            DataKeyNames="CardID, WeekEnding, ClientPONumber"
            ShowFooter="true">
            <Columns>
                <ps:NumericTextBoxTemplateColumn
                    UniqueName="CardID"
                    Width="70"
                    RelativeWidthRatio="90">
                    <ItemTemplate>
                        <asp:Label
                            runat="server"
                            Text='<%# string.Format("{0}/{1}", Eval(Constants.CARD_ID), Eval(Constants.VERSION)) %>' />
                    </ItemTemplate>            
                </ps:NumericTextBoxTemplateColumn>

                <ps:TextBoxBoundColumn
                    UniqueName="ClientPONumber"
                    DataField="ClientPONumber"
                    Width="60"
                    RelativeWidthRatio="80" />
                <telerik:GridClientSelectColumn UniqueName="SelectAll" HeaderText="All" />
            </Columns>
        </MasterTableView>
    </ps:MassApprovalRadGrid>
</ps:MassApprovalAjaxPanel>

protected void ListingGrid_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    m_UIListingGrid.DataSource = RadGridUtilUI.MassApprovalResultsGet();
}

protected void ListingGrid_ItemDataBound(object sender, GridItemEventArgs e)
{
    GridDataItem gridDataItem = e.Item as GridDataItem;
    if (gridDataItem != null)
    {
        AddClientScripts(gridDataItem);
    }
} 
```

谢谢，普雷瑟姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:33:04.917

我找到了解决这个问题的方法，它非常简单直接，但我们没有注意到它。

```
protected void ListingGrid_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
{
    m_UIListingGrid.MasterTableView.FilterExpression = string.Empty;
    m_UIListingGrid.DataSource = RadGridUtilUI.MassApprovalResultsGet();
} 
```

Telerik 有两种类型的过滤，即内置过滤和用户定义的过滤，我们通过我们的 SP 和代码进行过滤。所以我们总是必须在进行自定义过滤之前将过滤器值设置为 null。

将此标记为答案。

谢谢，普雷瑟姆。

# cocoa - NSWindow，使用核心动画时的奇怪角落

> ID：12089881
> 
> 赞同：1
> 
> 时间：2012-08-23T10:45:18.630
> 
> 标签：cocoa, core-animation, nswindow

在我的项目中，有一个带有自定义 drawRect: 方法的视图，该方法可以绘制深色背景。当我调用**[view setWantsLayer:YES]**时，窗口的一角（视图所在的位置）看起来不如平时（图 1）平滑（图 2）。

![图 1](../Images/04af544db407e76442ff7db18f9b731b.png) ![图 2](../Images/ddf82c84888aed921d6d4126d431c5d6.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:49:23.810

您需要像这样设置`cornerRadius:`和启用`maskToBounds:`图层：

```
[view setWantsLayer:YES];
[[view layer] setMasksToBounds:YES];
[[view layer] setCornerRadius:10.0]; 
```

结果：

![结果图片](../Images/943db085fe61cfdaf479d416c1e4617e.png)

# php - 写入文件夹和安全风险

> ID：12089882
> 
> 赞同：0
> 
> 时间：2012-08-23T10:45:24.917
> 
> 标签：php, permissions

我正在使用一个`Thumbnail`插件。它将拇指存储在 webroot 上的文件夹中。但是当它试图保存拇指时，返回“不可写”错误。它的目录权限是`755`. 如果我将权限更改为`777`，错误就会消失。但我在某处读到`777`权限可能会导致安全问题..

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:48:07.250

您可以更改所有者（例如`chown www-data:www-data your/direcotry/path`在 linux 中）

```
chown [OPTIONS] [Owner][:[Group]] FilenameOrFoldername 
```

网络服务器用户（执行 php 脚本的用户）拥有该目录，则他具有写入权限，您可以将权限保留为 755。

7 5 5 = rwx rx rx

**读写e **x** **ecute** **_** _**

 ****第一位 = 所有者
第二位 = 组
第三位 = 所有其他用户

意味着只有所有者有写权限（他可以将文件添加到目录中，在这种情况下是 www-data 用户），组（www-data）有读取和执行权限，其余的也有读取和执行权限，所以有不应该是 755 的安全风险。

[在这里](http://www.onlineconversion.com/html_chmod_calculator.htm)你有一个工具可以计算正确的 -> chmod 数字转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:49:21.627

权利被写为所有者/组/其他，我认为您可以将 775 权利用于您的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:50:27.827

您可以将其存储在 Web 服务器（如 apache 或 nginx）无法访问但您的 Web 应用程序服务器（php、java servlet 等）可以访问的位置，并为其创建逻辑以从该文件夹中获取它并将其作为一个图像。这样，您可以确保用户上传的任何文件都不会被执行。

这将花费更多的服务器资源，因此您应该考虑这一点。

如果文件是由您的应用程序创建的，并且用户无法直接修改它们，那么授予其写入权限就没有问题。****

# php - Echoprint-codegen 永久“错误”：来自 shell_exec 的“无法解码”

> ID：12089888
> 
> 赞同：1
> 
> 时间：2012-08-23T10:45:34.840
> 
> 标签：php, ffmpeg, audio-fingerprinting, codegen, echoprint

我正在尝试在我的 Mac lion MAMP 框中的 php 中从 popen 运行 codegen（shell_exec 创建相同的场景），如下所示：

```
$handle = popen('echoprint-codegen "/Applications/MAMP/htdocs/projectx/codegen/2.mp3" 10 30', 'r')

echo "'$handle'; " . gettype($handle) . "\n";
$read = fread($handle, 2096);
echo $read;
pclose($handle); 
```

但我总是遇到

```
"error":"could not decode", "tag":0, "metadata":{"filename":"/Applications/MAMP/htdocs/projectx/codegen/2.mp3"}} 
```

无论我如何格式化句柄内的 cmd，使用单引号和 dbl 引号的各种变体，我仍然得到相同的结果。

codegen 在路径中，ffmpeg 也在路径中。

这是踢球者。Codegen 在命令行中运行良好，带有 popen() 或 shell_exec() 的 php 脚本也是如此。

从浏览器它将无法正常工作。

有任何想法吗？

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T21:58:48.137

对于任何可能需要帮助的人，在我发现 ffmpeg 确实是问题后，我设法解决了它。

从这个 [ffmpeg MAMP "dyld: Library not loaded" 错误中得到提示](https://stackoverflow.com/questions/10107671/ffmpeg-mamp-dyld-library-not-loaded-error/12099991#12099991)

# python - python:print(''.join(doc.xpath('//text()'))

> ID：12089890
> 
> 赞同：-1
> 
> 时间：2012-08-23T10:45:49.183
> 
> 标签：python

怎么了？拜托，有人说我，我必须写什么而不是 application/x-abiwordAbiWord。

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.

>>> f=open('a.abw','r').read()
>>> from lxml import etree
>>> doc=etree.fromstring
>>> from lxml import html
>>> doc=html.fromstring
>>> doc
<function fromstring at 0x0113B858
>>> print(''.join(doc.xpath('//text()'))
      application/x-abiwordAbiWord

SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:51:22.973

您在 print 语句中缺少一个近义词。另外，除非我大错特错，否则您的 fromstring 函数缺少括号和参数；根据[python参考](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.fromstring)，函数签名需要`xml.etree.ElementTree.fromstring(text)`

就目前而言，您似乎正在将对函数“fromstring()”的引用分配给“doc”。您不能在函数引用上调用“.xpath()”。

编辑：试试这个。编辑2：试图澄清以回应OP评论

1：将此代码粘贴到一个空文档中：

```
MY_FILE_NAME = "path/to/my/file.abw"
# MY_FILE_NAME = "C:\\path\\to\\my\\file.abw" ## use this on windows

from lxml import etree
from lxml import html
import os

f=open(MY_FILE_NAME,'r')
myStr = f.read()
f.close()

doc=etree.fromstring(myStr)
doc=html.fromstring(myStr)

text = ''.join(doc.xpath('//text()'))

f = open(os.environ["HOME"] + "output.txt",'w')
f.write(text)
f.close() 
```

2：将文档另存为recover.py

3：在python中运行脚本

4：？？？

5：利润！（又名，你的故事现在应该在你的主目录的 output.txt 中）

* * *

注意：**你到底想做什么？**如果您给我们一个精确的问题/任务，人们将能够更好地帮助您。还要尝试描述您已经尝试过的内容 - SO 不应该是人们免费为您工作的地方，因此重要的是要表明您付出了一些努力来解决/研究您的问题。

# c# - 停止阻塞调用的线程

> ID：12089892
> 
> 赞同：5
> 
> 时间：2012-08-23T10:45:51.783
> 
> 标签：c#, winforms, thread-safety, blocking

我正在开发一个 Windows 窗体应用程序，以便在通过 USB 连接的设备上执行一些操作。对于读取、写入等所有操作，我们有一个自定义库。

当用户点击一个按钮时，写操作就完成了。

要阅读，会创建一个单独的线程。可用库的问题是读取调用被阻塞并且具有无限超时。

在连接失败的情况下，这个线程会停留在读取函数调用，因为这个函数只有在它接收到数据时才会中断。

在这种情况下杀死这个线程的方法是什么？Thread.Abort() 不起作用。

我正在使用 C# 进行此编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:53:37.860

您的 Read 方法可能会调用本机代码，因此线程无法中止。没有办法（至少我熟悉）中止使用 COM 互操作的线程。你可以先看看为什么 Read 方法会阻塞线程。在调用 Read 方法之前尝试检查需求。

看看这个问题：[Abort call to unmanaged DLL](https://stackoverflow.com/questions/2781484/abort-call-to-unmanaged-dll)

# jquery - 使用 jquery 为 xslt 列表设置动画

> ID：12089894
> 
> 赞同：0
> 
> 时间：2012-08-23T10:46:00.503
> 
> 标签：jquery

有没有人尝试过使用 jQuery 为 xsl 样式表中的“li”列表设置动画？我的 XSLT 的一部分如下

```
<ul>
    <xsl:for-each select="/CourseList/*">
        <li>
            <xsl:value-of select='$coursename'/> 
        </li>
    </xsl:for-each>
</ul> 
```

我正在考虑在加载页面时为 li 项目设置动画。

# c# - C# foreach 语句

> ID：12089895
> 
> 赞同：0
> 
> 时间：2012-08-23T10:46:03.687
> 
> 标签：c#, datagridview, foreach

对于每个语句，我需要一些帮助，基本上，当用户编辑单元格中的值时，我的 foreach 会将其应用于数据网格中的所有单元格并更改它们的值，我需要我的 foreach 语句才能工作通过遍历数据网格但仅更改已编辑的选定行

```
try
{
    //loop through each of the rows in the dgv
    foreach  (DataGridViewRow row in dgvDetials.SelectedRows) 
    {
        int intQtyInsp = 0;

        //if quantity inspected is empty:
        if (row.Cells[2].Value.ToString() == "") 
        {
            //quantity inspected is 0\. Prevents null value errors:
            intQtyInsp = 0; 
        }

        intQtyInsp = 
            Int32.Parse(dgvDetials.CurrentRow.Cells[2].Value.ToString());

        if (intQtyInsp < 0)   // checks the cell for a negative value 
        {
            intQtyInsp = 0;   // if cells is negative submits value as Zero
        }
        else
        {
            //sets quantity inspected to value entered
            intQtyInsp = Int32.Parse(row.Cells[2].Value.ToString()); 
        }

        if (intQtyInsp == 0) //if quantity inspected is 0\. Ignore row.
        {

        }
        else //else gather details and insert row as production.
        {
            area = dtArea2.Rows[0]["area_code"].ToString();
            inspDate = dtpInspectionDate.Value.ToString("MM/dd/yyyy");
            inspShift = cbShift.Text;
            partNo = row.Cells[0].Value.ToString();
            // dieCode = row.Cells[0].Value.ToString();
            dieCode = "";
            machine = "";
            qtyInsp = intQtyInsp;
            qtyInspRecorded = Int32.Parse(row.Cells[5].Value.ToString());
            comment = "";
            //machine = row.Cells[3].Value.ToString();

            if (qtyInspRecorded == 0)
            {
                SQLMethods.insertProduction(area, 
                                            inspDate,
                                            inspShift, 
                                            partNo, 
                                            dieCode, 
                                            qtyInsp, 
                                            comment, 
                                            machine);
            }
            else
            {
                SQLMethods.updateProduction(area, 
                                            inspDate, 
                                            inspShift, 
                                            partNo, 
                                            dieCode, 
                                            (qtyInspRecorded + qtyInsp), 
                                            comment, 
                                            machine);
            }
        }
    }
    retrieveData(); //reset values
}
catch (Exception ex)
{
    MessageBox.Show(
        "Error instering production values. Processed with error: " 
        + ex.Message);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:26:22.643

首先，我将这里的代码简化一点，将其拆分为几个可以从 For 循环调用的方法。这将使它更容易阅读，从而也更容易帮助你。举个例子，如下：

```
if (intQtyInsp < 0)   // checks the cell for a negative value 
{
    intQtyInsp = 0;   // if cells is negative submits value as Zero
}
else
{
    //sets quantity inspected to value entered
    intQtyInsp = Int32.Parse(row.Cells[2].Value.ToString()); 
} 
```

可以用类似的东西代替：

```
int intQtyInsp = SetQuantityInspected(); 
```

然后该方法可以包含 if 结构。对循环中代码的其他部分也重复此操作。相信我，这会让你的生活更轻松。

此外，似乎从未使用过本节的结果；的值`intQtyInsp`随后被覆盖！：

```
if (row.Cells[2].Value.ToString() == "") 
{
    //quantity inspected is 0\. Prevents null value errors:
    intQtyInsp = 0; 
} 
```

**至于您的问题：**我不确定您将如何获得当前正在编辑的行的 id。（如果可能（？），循环遍历数据网格后面的表/数据源可能是吸气剂？）。

无论如何，您需要在循环中执行以下操作：

```
if(IsCurrentlyEditedRow(row)){
    ...

    // (all the stuff currently in the body of your loop goes here)
    ...
} 
```

现在您可以实现`IsCurrentlyEditedRow()`返回`True`或`False`取决于当前行的 id 是否与您正在编辑的行相同的方法。

对不起，如果这不是一个非常具体和详细的​​答案，希望它无论如何都有用。

# c# - 如何在字符串中添加双引号？

> ID：12089896
> 
> 赞同：0
> 
> 时间：2012-08-23T10:46:03.327
> 
> 标签：c#, asp.net

我想为 sting 添加双引号。我知道通过使用 /" 我们可以添加双引号。我的字符串是

```
string scrip = "$(function () {$(\"[src='" + names[i, 0] + "']\"" + ").pinit();});"; 
```

当我在浏览器上执行此操作时，我得到的是“而不是”引号。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:57:06.257

如果您的浏览器显示的是“&”而不是“字符，则可能只有几个原因。该字符应该作为其本身或作为 的*HTML 实体*发送到浏览器`&quot;`。请注意半色在结束。如果浏览器看到这样的“代码”，它会显示一个引号。这是为了让 HTML 更容易编写，当它的属性需要包含特殊字符时，比较：

```
<div attribute="blahblahblah" /> 
```

如果您想在 blahs 中添加一个 "，它会终止属性的符号，并且 HTML 代码会中断。因此，添加单个 " 字符应该如下所示：

```
<div attribute="blah&quote;blahblah" /> 
```

现在，如果您错过分号，浏览器将显示`blah&quotblahblah`而不是`blah"blahblah`.

我刚刚注意到您的代码实际上是在粘合 JavaScript 代码。在 JavaScript 中，分号是一个表达式分隔符，所以在发出的 HTML 中可能实际上有 a`&quot;`并且它只是不正确地出现在错误消息中......或者你可能忘记在 javascript 中打开/关闭一些引号，并且分号实际上被视为表达式终止符？

还要确保检查 JavaScript 代码为什么要进行 html-entity 转换。通常，不会重新解析块。您是否将该 JavaScript 代码设置为 HTML 元素属性？像 OnClick 或 OnSend？那现在就别做了。使用此代码创建一个 javascript 函数，然后从单击/发送中调用该函数。将 JS 中的长表达式编码为属性是不值得的！只是浪费时间和精力。

如果所有其他方法都失败并且 JavaScript 发出正确，则查找您网站上的任何文本更正或文本突出显示或文本格式模块。很可能其中一个人误读了 html 实体并删除了分号，或者相反 - 他们在不需要时添加了它们。ASP.Net 本身通常可以正确完成其工作，它可以在需要的任何地方正确翻译实体，所以我先看看其他库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:49:39.623

你可以使用这样的东西：

```
String str=@"hello,,?!" 
```

这应该转义所有字符或

```
String TestString = "This is a <Test String>.";
String EncodedString = Server.HtmlEncode(TestString); 
```

这是手册：http: [//msdn.microsoft.com/en-us/library/w3te6wfz.aspx](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:00:42.363

你还用字符串做什么？

似乎在那之后的某个地方，字符串被编码了。您可以使用 HttpUtility.HtmlDecode(str); 但首先你必须首先弄清楚你的字符串在哪里被编码。

请记住，如果您`<%: %>`在 aspx 或`@yourvar`Razor 中使用，它将自动编码。你必须用它`@Html.Raw(yourvar)`来压制它。

# c# - 查询字符串运算符赋值错误

> ID：12089898
> 
> 赞同：-3
> 
> 时间：2012-08-23T10:46:14.500
> 
> 标签：c#, c#-4.0

我要将数据发送回我的短信网关。首先我有一个这样的查询字符串。

```
string mobileNo = Request.QueryString["msisdn"];
int dest = int.Parse(Request.QueryString["shortcode"].ToString());
string messageIn = Request.QueryString["msg"];
string operatorNew = Request.QueryString["operator"]; 
```

然后我将为其分配一个变量。

```
 public void sendReply(string messageOut)
{

   messageOut = "http://mygateway.com/api/mt?msisdn=mobileNo&body=msg&sender=shortcode&key=nvqow9rhfp&product_id=2116&operator=OperatorNew&country=us";

} 
```

但我得到操作员分配错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:10:26.610

检查这个。这个参数是错误的。这个参数没有提供。

```
&body=msg 
```

请与网关所有者验证您的密钥和产品 ID。

# ruby-on-rails - 用于计算 ruby on rails 应用程序中点击次数的代码

> ID：12089900
> 
> 赞同：0
> 
> 时间：2012-08-23T10:46:21.710
> 
> 标签：ruby-on-rails, ruby, count, views, hit

我想知道在我的 ruby​​ on rails 应用程序中计算命中次数的代码：条件是在执行刷新操作时它不应该增加。并且只有在被唯一的 MAC 地址点击时才应该加 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:15:23.087

我认为不可能获得mac id

[从 Rails 应用程序检索客户端系统信息](https://stackoverflow.com/questions/283185/retrieving-client-system-information-from-a-rails-application)

尝试一些分析来获取唯一访问者的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:46:20.873

这不能使用 Rails 应用程序来完成，但您可以使用[AWSStats](http://awstats.sourceforge.net/)来完成。

这将根据主机 IP、国家、浏览器等提供更详细的统计信息。

# asp.net-mvc-3 - 实体框架超时

> ID：12089901
> 
> 赞同：0
> 
> 时间：2012-08-23T10:46:24.907
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-4.1, timeout

我最近将我的 ASP.Net MVC 3 Web 应用程序（用于数据持久性的实体框架 4.1）发布到实时服务器。该应用程序位于一个 Web 服务器上，而数据库 (SQL Server 2008) 位于另一个单独的服务器上。

该站点仅上线几天，点击量很少，因此数据库表中包含的记录很少（最多 10-20 条）。

我还将 ELMAH（用于 ASP.NET 的错误记录模块和处理程序）集成到该站点中，并且我已经收到了以下错误的一些实例

> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。

下面显示了 ELMAH 提供的全部详细信息

> System.Data.EntityException：基础提供程序在打开时失败。---> System.Data.SqlClient.SqlException：超时已过期。在操作完成之前超时时间已过或服务器没有响应。在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data.SqlClient.TdsParserStateObject.ReadSniError（TdsParserStateObject stateObj，UInt32 错误）在 System.Data .SqlClient.TdsParserStateObject.ReadSni(DbAsyncResult asyncResult, TdsParserStateObject stateObj) 在 System.Data.SqlClient.TdsParserStateObject.ReadNetworkPacket() 在 System.Data.SqlClient.TdsParser.ConsumePreLoginHandshake(Boolean encrypt, Boolean trustServerCert, Boolean&`1.GetResults(Nullable`1 forMergeOption) 在 System.Data.Objects.ObjectQuery `1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Collections.Generic.List`1..ctor(IEnumerable 1 源) System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 2 参数) 在 System.Web.Mvc.ControllerActionInvoker.<> *c_DisplayClass15 .b* _12() 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter 过滤器，ActionExecutingContext preContext，Func 1 过滤器，ActionDescriptor actionDescriptor，IDictionary`2 参数) 在 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName )`1 collection)
> at System.Linq.Enumerable.ToList[TSource](IEnumerable``2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`*`1 continuation) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`*

 *发生此错误的情况是由于 SELECT 查询。这些选择查询非常简单，即

> 从 col1 = 1 的表中选择 col1、col2、col3

正如我所说，数据库中的数据非常少，因此查询并不是要撤回 100 条记录。

**我使用Internet**和**Stackoverflow**对此进行了一些研究。有些人建议增加**dbContext CommandTimeout**属性，但是，我不明白为什么我需要这样做。是的，如果我要撤回大量记录，但正如我所说，这些是简单的**SELECT**语句，最多撤回 1-5 条记录。

我也知道开发人员需要密切关注实体框架生成的 SQL，因此，我下载并运行了这个试用版[http://www.datawizard.com](http://www.datawizard.com)，以了解为导致问题的实体框架 SELECT 查询。同样，分析器显示这些查询的语法非常简单，所以我认为这不是问题所在。

我开始认为这可能与我的数据库和 Web 应用程序位于不同的服务器上有关，但是，我没有想法！

请如果有人可以帮助或建议我解决这个问题，将不胜感激。

感谢大家。*

# java - 自定义日志级别

> ID：12089902
> 
> 赞同：1
> 
> 时间：2012-08-23T10:46:29.833
> 
> 标签：java, jakarta-ee, logging, log4j

在我现有的应用程序中，“ **org.apache.log4j** ”API 已在 java 代码中使用。

**要求 ：**

在任何情况下，我都必须在日志文件中记录一些语句（比如 xyz），并且不应该依赖于日志级别。例如：如果我的日志级别是错误，那么 xyz 也应该打印，如果我的日志级别是调试，那么 xyz 也应该打印.

我无法使 xyz 的日志语句处于调试状态，因为如果我这样做，除 xyz 之外的其他日志语句也将开始打印。

为此，我相信，我必须添加一些自定义日志级别。请帮助如何做到这一点以及如何设置其级别顺序，以便在任何情况下都应该打印。

提前致谢。此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T11:21:30.857

您可以“劫持”受保护的方法`Logger#forcedLog()`以始终打印到日志。

您必须将*劫持者*类与`Logger`.

```
package org.apache.log4j;

/**
 * @author maba, 2012-08-23
 */
public class LogOverride {
    public static void print(Logger logger, String message) {
        logger.forcedLog(logger.getName(), Priority.INFO, message, null);
    }
} 
```

并从您的调用代码

```
log.setLevel(Level.OFF); // Make sure logging is turned off
log.info("Normal logging"); // Will not be seen anywhere
LogOverride.print(log, "Overriding logger"); // Will still make it to your appender 
```

* * *

这就是 log4j 常见问题解答关于[自定义级别](http://logging.apache.org/log4j/1.2/faq.html#custom-level)的内容：

> **如何添加自定义关卡？**
> 
> 这是可能的，但很少合适。该请求通常针对名为“审计”之类的级别，该级别显然不适合进程“跟踪”、“调试”、“信息”、“警告”、“错误”和“致命”。在这种情况下，对级别的请求实际上是对指定不同受众的机制的请求。适当的机制是为“审计”相关消息使用不同的记录器名称（或树）。

因此，如果您想接受该建议，那么您应该查看[SJuan76](https://stackoverflow.com/questions/12089902/custom-log-level/12089956#12089956)的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T10:50:15.283

您可以做的是`Logger`为这些语句创建一个不同的语句（在定义记录器时，您不限于使用类名）

```
// Standard logger
private static Logger log = Logger.getLogger(MyClass.class)

// XYZ logger
private static Logger logXYZ = Logger.getLogger("logs.xyz"); 
```

您可以从多个类访问相同的记录器，您只需传递相同的标签。

然后，在配置文件中，可以为该类别定义不同的日志级别，甚至将这些日志输出到不同的appender中（不同的文件、处理等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T11:06:59.837

如果您决定采用创建自定义的想法，则需要创建 Level 的子类来执行此操作，因为`Level`构造函数是`protected`.

```
/**
 * Instantiate a Level object.
 */
 protected Level(int level, String levelStr, int syslogEquivalent) {
     super(level, levelStr, syslogEquivalent);
 } 
```

*看起来*您应该链接到`Level`构造函数，并为其传递一个合适的`level`值。请注意，级别编号越大，优先级越高。因此，对于`Level`在任何现有命名级别都不会被阻止的 a，您需要一个大于`Priority.FATAL_INT`which is的值`50000`。

（但是，我不相信这是正确的方法。首先，您可能无法在日志配置文件中按名称引用您的自定义级别。）

# java - 你如何重构 @Transactional 方法来拆分非事务部分

> ID：12089912
> 
> 赞同：7
> 
> 时间：2012-08-23T10:47:00.923
> 
> 标签：java, hibernate, transactions, hibernate-annotations, spring-annotations

我有一个作为独立 java 应用程序的一部分运行的数据访问类。它目前正在工作，这意味着定义了事务管理器，但我想重构类以减少事务的范围，但如果我这样做了，我会得到**org.hibernate.HibernateException: No Hibernate Session bound to thread，并且配置不允许在此处创建非事务性的，**这意味着移动*@Transactional*以某种方式阻止了它被识别。

我的原始版本的重构方法是私有的，但我发现建议将其更改为公共，因为在某些情况下注释不会被拾取。

```
public class DoStuff {
    @Transactional
    public void originalMethod() {
        // do database stuff
        ...

        // do non-database stuff that is time consuming
        ...
    }
} 
```

我想要做的是重构以下

```
public class DoStuff {
    public void originalMethod() {
        doDatabaseStuff()

        doNonDatabaseStuff()
    }

    @Transactional
    public void doDatabaseStuff() {
        ...
    }

    public void doNonDatabaseStuff() {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-23T13:30:51.723

**编辑：**

你需要了解[Spring 代理是如何工作](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch08s06.html)的，才能理解为什么你的重构不起作用。

> 对象引用上的方法调用将是代理上的调用，因此代理将能够委托给与该特定方法调用相关的所有拦截器（建议）。但是，一旦调用最终到达目标对象，它可能对自身进行的任何方法调用都将针对 this 引用而不是代理调用。这具有重要意义。这意味着自调用不会导致与方法调用相关的建议有机会执行。

@Transactional 使用 Spring AOP，Spring 使用代理。这意味着当您从另一个类调用 @Transactional 方法时，Spring 将使用代理，因此将应用事务建议。但是，如果您从同一个类调用该方法，spring 将使用“this”引用而不是代理，因此不会应用事务建议。

**原答案：**

这是在类似情况下对我有用的方法。

```
public class DoStuff implement ApplicationContextAware {    
private ApplicationContext CONTEXT;
public void setApplicationContext(ApplicationContext context) throws BeansException {
    CONTEXT = context;
}

    public void originalMethod() {           
        getSpringProxy().doDatabaseStuff()              
        doNonDatabaseStuff()       
    }

    private DoStuff getSpringProxy() {
        return context.getBean(this.getClass());     
    } 
    @Transactional       
    public void doDatabaseStuff() {           
        ...       
    }          

    public void doNonDatabaseStuff() {           
        ...       
    }   
} 
```

解释：

1.  创建类`ApplicationContextAware`，使其具有对上下文的引用
2.  当您需要调用事务方法时，从上下文中获取实际的 spring 代理
3.  使用此代理调用您的方法，以便实际应用 @Transactional。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T19:08:07.827

您的方法看起来应该可以正常工作，我希望这个问题与 Spring 代理有关。

我询问接口的原因与 Spring 应用事务行为的默认方法有关 - JDK 动态代理。

如果您的班级的实际定义是：

```
public class DoStuff implements Doable {
  public void originalMethod() {

  }
}

public interface Doable {
  public void originalMethod();
} 
```

如果这确实是结构，那么当您移动到新结构时，Spring 无法代理新`doDatabaseStuff`方法。

您解决此问题的选项：

*   将新方法添加到您的接口以确保 Spring 可以代理它们
*   转向使用基于 CGLIB 的代理（这些不依赖于接口）

# ruby-on-rails-3 - Rails 和不存在的参数

> ID：12089918
> 
> 赞同：1
> 
> 时间：2012-08-23T10:47:41.413
> 
> 标签：ruby-on-rails-3, api

我有这样的代码：

```
User.create(params[:user]) 
```

但是如果有人通过 API 发送参数，比如

```
{"userr":{"name":"Firstname"}} 
```

然后我得到 500 错误，因为 nil:NilClass 的未定义方法***。我应该如何处理这个，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:18:08.850

当然，您应该处理错误输入 - 这也是生产中可能发生的情况。

我只是这样做：

```
if params[:user].blank?
  # Handle false input here
else
  User.create(params[:user])
end 
```

# mysql - 选择计数作为计算列？

> ID：12089926
> 
> 赞同：0
> 
> 时间：2012-08-23T10:48:15.953
> 
> 标签：mysql, sql

我有一个名为“likes”的表，结构如下：id - 自动生成的号码，bywho - 喜欢某人的用户，标识符 - 喜欢的用户，tip - 喜欢的类别

我正在尝试列出最喜欢的用户（标识符），我的问题是：

我需要生成喜欢的数量作为列表中的计算列...

这是我尝试过的：

```
SELECT u.bywho,u.identifier COUNT(DISTINCT inv_by.identifier) AS lol
FROM  likes u
LEFT  JOIN likes inv_by ON u.identifier = inv_by.identifier
WHERE inv_by.identifier= $this->who AND tip='profil' 
GROUP BY u.identifier ORDER BY lol DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:17:08.077

我预计这不起作用，因为缺少逗号并且 u.bywho 没有进行分组。这样做的问题是它会给你一个被喜欢的人和喜欢他们的人的计数细目。假设一个人永远不会被喜欢超过一次，计数将永远是一个。

尝试在另一个回复中提到的 select 子句中的 u.identiier 之后添加逗号。如果这不起作用，请尝试按 u.who 分组。如果这不能按预期工作，请解释一下您的期望。我猜你可能想从 select 子句中删除一些东西。选择子句中剩下的任何非聚合都需要进行分组。

# jquery - 单击时显示不同文本的交互式多边形形状

> ID：12089928
> 
> 赞同：0
> 
> 时间：2012-08-23T10:48:17.910
> 
> 标签：jquery, html, canvas, raphael, interactive

## 更新：

嗨，伙计们，这是我已经走了多远：http: [//jsfiddle.net/vsJMn/](http://jsfiddle.net/vsJMn/)（我正在使用“RaphaelJS australia”示例进行测试）

我现在无法弄清楚的唯一问题是如何在单击另一个元素时将元素的状态恢复为 0。我已经弄清楚了如何在单击一个元素时获得“活动/选定”状态，然后悬停在其余元素上起作用，但是随后单击的任何元素都停留在最后一个状态并且悬停事件不会不要再工作了。

有人知道如何解决这个问题吗？

* * *

**老问题：**

我想创建与此非常相似的东西：[http ://www.voanews.com/content/olympic-village-map/1446501.html](http://www.voanews.com/content/olympic-village-map/1446501.html)

我希望能够绘制自定义形状，单击时，每个形状都会在页面上显示不同的文本（可能在“div”中）。

就像链接中的示例一样，我想通过鼠标悬停、单击等添加交互式样式。当您将鼠标悬停在形状上时，它们会动画，然后当您单击一个时，它会保持选中状态，从而允许悬停动画在其他形状，直到您单击另一个形状。还有文字褪色效果。

我一直在寻找许多方法来创建它，特别是 HTML5 画布、Raphaeljs ( [http://raphaeljs.com/australia.html](http://raphaeljs.com/australia.html) ) 和其他一些方法，但我似乎无法做到正确。

那个“奥运村”正是我所需要的——任何人都可以帮我解决这个问题。

* * *

谢谢@vlad-otrocol，我查看了您建议的教程，它们真的很有帮助。他们确实有很多我需要的东西，但我找不到我想要的一切。

感谢@kevin-nielsen 的示例，您的方式比我在 RaphaelJS 示例网站上一直在研究的“澳大利亚”示例要容易得多。这是我已经走了多远：http: [//jsfiddle.net/k2GQj/](http://jsfiddle.net/k2GQj/)。

我已将我的示例与您的示例集成在一起，并拥有：http: [//jsfiddle.net/L3bHz/](http://jsfiddle.net/L3bHz/)。

我需要做的是能够单击一个元素，更改其颜色，然后保持该颜色状态，同时允许其他元素在悬停时更改颜色（如“奥运村地图”）。

正如您从我的示例中看到的那样，目前我有一个“mouseout”事件，它将每个元素颜色更改为一种颜色。我是否需要为每个元素创建一个“mouseout”事件 - 是否有办法在悬停后将元素颜色恢复为原始状态？

还有凯文，在你的例子中，你如何定位文本？在我一直在处理的示例中，使用了 DIV，因此可以使用 CSS 更改定位。

再次感谢大家的帮助——我会在这方面做更多的工作，并会报告任何进展！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:46:37.283

如果您决定在您的项目中使用 html 画布元素，我会看看这个：[http](http://simonsarris.com/blog/510-making-html5-canvas-useful) ://simonsarris.com/blog/510-making-html5-canvas-useful 他在画布上有一系列非常好的教程.

Simon 的教程包含了几乎所有你需要的东西。但您必须记住几个关键要素：

1.  您必须跟踪画布上所有对象的坐标和状态。
2.  Canvas 没有形状/对象事件之类的东西。您只能将事件添加到画布元素。
3.  如果您想要鼠标悬停在形状事件上，则需要有一个画布鼠标悬停事件，获取光标的坐标以检查形状的位置，然后您可以决定光标是否超出形状。
4.  canvas的一般流程是：事件触发->重新计算新的canvas状态、对象位置和可见性等->重绘一切

我也会看看 html5 画布教程[http://www.html5canvastutorials.com/tutorials/html5-canvas-tutorials-introduction/](http://www.html5canvastutorials.com/tutorials/html5-canvas-tutorials-introduction/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T16:23:04.707

对于这样的显示，我反对使用画布来支持使用 RaphaelJS 驱动的 SVG，就像您用作模型的奥运村地图一样。它提供了针对悬停和单击的内置事件处理以及持久状态信息，开箱即用，并且对数百或数千个对象保持合理的性能。如果您完全熟悉 javascript，它会使您所描述的地图变得非常容易。考虑一下[这个小例子](http://jsfiddle.net/kevindivdbyzero/V22ZZ/)fiddle，它演示了 Raphael 的 js 来支持悬停和单击任意形状——只花了几分钟的时间来编写。

你有你打算建立的地图的路径吗？

# java - 使用 freemaker 生成 1 个 dto 到另一个 dto 转换器。卡在生成枚举 type1 到枚举 type2 转换器

> ID：12089933
> 
> 赞同：0
> 
> 时间：2012-08-23T10:48:36.727
> 
> 标签：java, enums, converter, freemarker, generated-code

我正在使用 freemaker 生成从一种类型到另一种类型的 dto 转换器。通过自定义注释定义事物例如：

```
@CustomAnnotationTargetDTO(type=DTO2)
Class DTO1 {

@CustomAnnotationTargetProperty(propertyName="gender")
private String sex;

} 
```

像这样，我发明了不同的注释，用于将类及其属性映射到其他类型。

我现在在 DTO 中有一个枚举。关于我如何将一种类型映射到另一种类型的任何想法。

我在想线

```
@CustomAnnotationTargetEnum(xmlEnum="Type2Enum")
public enum Type1Enum {

    @CustomAnnotationTargetEnumValue(enumValue="GIRL")
    FEMALE(Byte.valueOf("1")), 
    @CustomAnnotationTargetEnumValue(enumValue="BOY")
    MALE(Byte.valueOf("2"));
//other stuff below

} 
```

# java - 通知单个线程：notify、notifyAll 还是 concurrent.locks.Condition？

> ID：12089935
> 
> 赞同：5
> 
> 时间：2012-08-23T10:48:45.557
> 
> 标签：java, android, multithreading, performance

有时我需要唤醒或发送一个线程来睡觉**，**我想知道最好和最有效的方法是什么。

第一个解决方案是信号结合`wait-notify`（我知道如何正确实现这种模式，这不是问题）。

我在某处读到它，使用*java.concurrent*库和`CountDownLatch`用于信令更有效。我也检查了[concurrent.locks.Condition](http://developer.android.com/reference/java/util/concurrent/locks/Condition.html)，但是[这个](https://stackoverflow.com/a/2953556/1099432)主题指出它只是一个（程序员方面）更安全和更通用的构造，与`notify/notifyAll`. Peter Lawrey 建议使用*并发*库而不是`notify-notifyAll`在[此](https://stackoverflow.com/questions/37026/java-notify-vs-notifyall-all-over-again)评论中，所以现在我很困惑什么是最佳实践。

一个相关的问题：哪个性能更好，`notify`或者`notifyAll`在我的情况下（即如果我有一个线程）？我知道有很多类似的主题，但没有一个给出明确的答案。就我而言，从功能上讲，我使用哪个并不重要，但我想知道哪个更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T12:25:29.087

IMO 他们在“性能方面”并没有太大的区别，因为他们都暂停了调用相应的线程，`wait`所以很可能底层机制非常相似。为什么性能如此重要呢？除非您有一些极快的等待/信号模式，其中信号在等待后**立即**出现，否则会使上下文切换过于昂贵并且可能需要自旋锁，否则无需担心性能。

您应该在编程方面实现您认为最方便的方法，然后进行基准测试，看看您是否真的需要更高性能的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:41:33.737

`wait-notify`很好。

`notify`由于等待列表中只有一个线程，因此和之间在语义或性能方面没有区别`notifyAll`。

# ruby-on-rails - 我在哪里可以找到好的 Rails 身份验证示例？

> ID：12089937
> 
> 赞同：0
> 
> 时间：2012-08-23T10:48:48.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3

首先我尝试了[https://github.com/binarylogic/authlogic_example.git](https://github.com/binarylogic/authlogic_example.git) 并且它不起作用，所以我尝试了[https://github.com/plataformatec/devise/wiki/Example-Applications](https://github.com/plataformatec/devise/wiki/Example-Applications)并且它有效但它没有注册完成后激活用户。所以我正在寻找一个从邮件激活用户的例子。所以请告诉我是否还有其他可以正常工作的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:27:21.507

Ruby 工具箱提供了很好的选择，

[https://www.ruby-toolbox.com/categories/rails_authentication](https://www.ruby-toolbox.com/categories/rails_authentication)

虽然如果我要表达意见，我会使用 Devise

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:56:22.010

Devise 确实有一个称为确认的激活功能。

要激活它，请将 :confirmable 模块添加到您的模型中，并在设计配置文件中将 confirm_within 设置为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T02:25:51.797

查看[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)

和[http://railscasts.com/episodes/21-super-simple-authentication](http://railscasts.com/episodes/21-super-simple-authentication)

并设计[http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T05:39:56.660

最后，设计示例效果很好。这些就是我所做的改变

`config.mailer = "Devise::Mailer"`应该在 devise.rb 文件中取消注释，以下行将包含在 environment 文件夹中的 production.rb 和 development.rb 文件中。

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' }
    config.action_mailer.delivery_method = :smtp

    config.action_mailer.smtp_settings = {
        :tls => true,
        :enable_starttls_auto => true,
        :address => "smtp.gmail.com",
        :port => "587",
        :domain => "gmail.com",
        :authentication => :plain,
        :user_name => "xxxxx@gmail.com",
        :password => "yyyyyy"
    } 
```

现在它运作良好。

# javascript - 引导下拉菜单不起作用？

> ID：12089938
> 
> 赞同：4
> 
> 时间：2012-08-23T10:48:48.733
> 
> 标签：javascript, css, twitter-bootstrap

Bootstrap 下拉菜单对我不起作用。我做的一切都是正确的，你可以在那里看到：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<title>Test site | Jony</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Testing website coded by Jony - rapture-gfx" />
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen"/>
<link href='http://fonts.googleapis.com/css?family=Dosis' rel='stylesheet' type='text/css'><link rel="stylesheet" href="css/flexslider.css" type="text/css"><script     src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script><script     src="js/jquery.flexslider.js"></script><!-- Place in the <head>, after the three links -->    <script type="text/javascript" charset="utf-8">$(window).load(function() {      $('.flexslider').flexslider({    animation: "slide"  });});</script>
<link rel="stylesheet" href="flexslider.css" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="js/jquery.flexslider.js"></script>
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/jquery.lavalamp-1.4.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript">
$('.dropdown-toggle').dropdown()
</script>
</head>
<header>
<div class="header">
<div class="container">
<ul class="menu">
<li class="current"><span style="color: #bde2e1;">Home</li>

<li class="dropdown"><a class="dropdown-toggle" href="#">Servers</a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    <li class="hovering"><a href="#">Portfolio</a></li>
<li class="hovering"><a href="#">Releases</a></li>
<li class="hovering"><a href="#">Contact</a></li>
</ul>

</li>

<li class="hovering"><a href="#">Portfolio</a></li>
<li class="hovering"><a href="#">Releases</a></li>
<li class="hovering"><a href="#">Contact</a></li>
</ul> 
```

Bootstrap 是一个现成的框架，具有网格系统、行、现成的 js 菜单等功能。

有一个解释它是如何工作的：

[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns) 它对我不起作用。

是的，我`src`的 JS 文件链接正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:51:45.563

`body`你在你的 html 中丢失了。

将您的脚本放在页面底部或准备好后：

```
<script type="text/javascript">
$(function(){
    $('.dropdown-toggle').dropdown();
});
</script> 
```

演示：http: [//jsfiddle.net/rLL75/](http://jsfiddle.net/rLL75/)

编辑：

使用较新版本的 jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T13:04:33.293

```
<header>
    <div class="navbar navbar-static header">
        <div class="navbar-inner container">
            <ul class="nav" role="navigation">
               <li class="brand"><span style="color: #bde2e1;">Home</span></li>
               <li class="dropdown">
                   <a class="dropdown-toggle" id="drop4" role="button" data-toggle="dropdown" href="#">Dropdown <b class="caret"></b></a>
                   <ul id="menu1" class="dropdown-menu" role="menu" aria-labelledby="drop4">
                       <li><a tabindex="-1" href="#">Action</a></li>
                       <li><a tabindex="-1" href="#">Another action</a></li>
                       <li><a tabindex="-1" href="#">Something else here</a></li>
                       <li class="divider"></li>
                       <li><a tabindex="-1" href="#">Separated link</a></li>
                   </ul>
               </li>
               <li class="hovering"><a href="#">Portfolio</a></li>
               <li class="hovering"><a href="#">Releases</a></li>
               <li class="hovering"><a href="#">Contact</a></li>
           </ul>
           <div id="logo"><a href="#"><img src="img/logo.png" /></a></div>
       </div>
    </div>
</header>

<script type="text/javascript">
    $(function(){
        $('.dropdown-toggle').dropdown();
    });
</script> 
```

# css - PHP/HTML/CSS - 如果是 FireFox、如果是 Chrome、如果是 Safari

> ID：12089942
> 
> 赞同：14
> 
> 时间：2012-08-23T10:49:00.607
> 
> 标签：css, firefox, google-chrome, if-statement, conditional

是否有简单的条件语句、css 命令、html、jquery、javascript 或简单的 PHP 动态方式检测当前浏览器？

```
<!if firefox>
    .element { top:4px; }
<![endif]>
<!if chrome>
    .element { top:6px; }
<![endif]>
<!if ie>
    .element { top:8px; }
<![endif]>
<!if opera>
    .element { top:10px; }
<![endif]>
<!if safari_webkit>
    .element { top:12px; }
<![endif]> 
```

这个伪代码可以用 jQuery/JS/HTML 或 CSS PHP 等完成吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-23T10:54:21.040

使用 CSS 无法实现浏览器检测。然而，使用 PHP、ASP 和其他编程语言，您可以在页面内进行浏览器检测。我不是在这里告诉你它的利弊——我认为你知道浏览器检测和网络标准的优缺点，但这里是列表。

## PHP 解决方案。

```
if(isset($_SERVER['HTTP_USER_AGENT'])){
    $agent = $_SERVER['HTTP_USER_AGENT'];
} 
```

然后，将其与您想要的进行比较

为了与例如“firefox”进行比较，您应该这样做：

```
if(strlen(strstr($agent,"Firefox")) > 0 ){      
    $browser = 'firefox';
}
if($browser=='firefox'){
    echo '<style type="text/css">.element{top:2px}';
} 
```

## jQuery 解决方案。

```
// Safari CSS and Webkit Google Chrome
if ($.browser.webkit) {
   $("#element").css('top', '2px');
} else if ( $.browser.safari ) //not fully supported on 1.7 jQuery {
   $("#element").css('top', '2px');
// Opera CSS
} else if ( $.browser.opera ) {
   $("#element").css('top', '2px');
// Internet Explorer CSS
} else if ( $.browser.msie ) {
   $("#element").css('top', '2px');
// Mozilla FireFox CSS
} else if ( $.browser.mozilla ) {
   $("#element").css('top', '2px');
// Normal Revert, careful and note your the use of !important
} else {
   $("#element").css('top', '2px');
   // You can have normal JavaScript between these too
   document.getElementById("element").style.top="2px";
} 
```

## Mootools 解决方案。

```
if (Browser.ie){
    // This code will only run in IE
}

if (Browser.firefox2){
    // This code will only run in Firefox 2
}
if (Browser.firefox){
    // This code will only run in Firefox 
} 
if (Browser.chrome){
    // This code will only run in Chrome
} 
if (Browser.opera){
    // This code will only run in Chrome
}   
if (Browser.ie6 || Browser.ie7){
    // Please upgrade your browser
}
// Also notice you can use Engine.trident
if(Browser.Engine.trident) {

} 
```

## 原型解决方案。

```
if(Prototype.Browser.IE){
  // do something IE specific
}
if(Prototype.Browser.Opera){
  // do something Opera specific
}
if(Prototype.Browser.WebKit){
  // do something WebKit specific
}
if(Prototype.Browser.MobileSafari){
  // do something MobileSafari specific - iPhone etc
}
if(Prototype.Browser.Gecko){
  // do something Gecko specific
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-04T16:54:57.250

仅使用 CSS 执行此操作。

您可以使用此“hack”来定位 Firefox：

```
@-moz-document url-prefix() {...} 
```

和 Chrome 和 Safari 一起像这样：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {...} 
```

但不一定推荐...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T10:57:46.757

使用 javascript：

```
navigator.appCodeName 
```

存储浏览器代号：

```
navigator.appName 
```

是浏览器的名称。

但我建议使用 jQuery 来提高效率并减少麻烦：

```
if ($.browser.webkit) {
   $("#div ul li").css( "display","inline-table" );
} else if ( $.browser.msie ) {
   $("#div ul li").css( "display","inline" );
} else {
   $("#div ul li").css( "display","inline-table" );
} 
```

**编辑：**根据 jQuery.com：

*   webkit（Chrome 和 Safari）

*   野生动物园（已弃用）

*   歌剧

*   msie (Internet Explorer)

*   火狐浏览器）

资料来源：[jQuery 网站](http://api.jquery.com/jQuery.browser/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-01T10:14:08.583

在 php 中，您可以使用此代码来检测浏览器

```
<?php
  $msie = strpos($_SERVER["HTTP_USER_AGENT"], 'MSIE') ? true : false;
  $firefox = strpos($_SERVER["HTTP_USER_AGENT"], 'Firefox') ? true : false;
  $safari = strpos($_SERVER["HTTP_USER_AGENT"], 'Safari') ? true : false;
  $chrome = strpos($_SERVER["HTTP_USER_AGENT"], 'Chrome') ? true : false;
?> 
```

# c# - win8下创建DataTemplate

> ID：12089943
> 
> 赞同：3
> 
> 时间：2012-08-23T10:49:03.350
> 
> 标签：c#, windows-8, .net-4.5

如何使用文件隐藏代码（即使用 C# 而不是 xaml）在 win8 (WinRT) 应用程序中创建 DataTemplate。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T22:51:29.780

如果您想根据所显示的内容类型创建模板，我可以理解为什么这可能很有用。完成这项工作的关键是 Windows.UI.Xaml.Markup.XamlReader.Load()。它接受一个包含数据模板的字符串并将其解析为 DataTemplate 对象。然后，您可以将该对象分配到您想要使用它的任何位置。在下面的示例中，我将其分配给 ListView 的 ItemTemplate 字段。

这是一些 XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ListView x:Name="MyListView"/>
</Grid> 
```

这是创建 DataTemplate 的代码隐藏：

```
public sealed partial class MainPage : Page
{
    public MainPage()
    {
        this.InitializeComponent();
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        var items = new List<MyItem>
        {
            new MyItem { Foo = "Hello", Bar = "World" },
            new MyItem { Foo = "Just an", Bar = "Example" }
        };
        MyListView.ItemsSource = items;

        var str = "<DataTemplate xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\">" +
                "<Border Background=\"Blue\" BorderBrush=\"Green\" BorderThickness=\"2\">" +
                    "<StackPanel Orientation=\"Vertical\">" +
                        "<TextBlock Text=\"{Binding Foo}\"/>" +
                        "<TextBlock Text=\"{Binding Bar}\"/>" +
                    "</StackPanel>" +
                "</Border>" +
            "</DataTemplate>";
        DataTemplate template = (DataTemplate)Windows.UI.Xaml.Markup.XamlReader.Load(str);
        MyListView.ItemTemplate = template;
    }
}

public class MyItem
{
    public string Foo { get; set; }
    public string Bar { get; set; }
} 
```

# sql - 使用 sql 识别趋势和分类

> ID：12089944
> 
> 赞同：2
> 
> 时间：2012-08-23T10:49:14.583
> 
> 标签：sql, design-patterns, teradata

我有一个表 xyz，包含三列 rcvr_id、mth_id 和 tpv。rcvr_id 是给客户的 id，mth_id 是存储月份编号的列（mth_id 计算为 (2012-1900) * 12 + 1,2,3..（取决于月份）。例如 2011 年 12 月月 ID 为 1344，2012 年 1 月为 1345 等。 Tpv 是一个变量，显示客户交易金额。

```
Example table

rcvr_id mth_id tpv

1       1344   23
2       1344   27
3       1344   54
1       1345   98
3       1345   102
          .
          .
          .
so on

P.S if a customer does not have a transaction in a given month, his row for that month wont exist. 
```

现在，问题。根据 1327 到 1350 月份的交易，我需要将客户分类为稳定或零星。

这是一个描述。

![此模式适用于 1 个客户.. 我有数百万客户](../Images/b58759a8f8b7b1921c818a6483ebad74.png)

上图适用于 1 位客户。我有数以百万计的客户。

我该怎么做？我不知道如何识别 sql 中的趋势 .. 或者更确切地说如何以最好的方式做到这一点。

**另外，我正在研究 teradata。**

*好的，我已经找到了如何获得标准偏差。现在重要的问题是：我如何自己设置标准偏差限制？我不能随便说“如果标准开发高于 40%，他是零星的，否则稳定”。我想为所有客户计算标准偏差的平均值，如果高于这个值，那么他是零星的，否则是稳定的。但我觉得可能有更好的逻辑*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T10:53:36.587

我建议使用该`STDDEV_POP`函数 - 值越高表示值的变化越大。

```
select 
rcvr_id, STDDEV_POP(tpv)
from yourtable
group by rcvr_id 
```

`STDDEV_POP`是[标准差的函数](http://en.wikipedia.org/wiki/Standard_deviation)

如果这不足以区分，您可能需要查看回归函数和方差。

# sql - SQL Server 输出到文本文件的每一列不同的长度用空格分隔

> ID：12089946
> 
> 赞同：0
> 
> 时间：2012-08-23T10:49:17.287
> 
> 标签：sql, sql-server

假设我有一个如下所示的 SQL Server 表：

```
ID             NAME                DESCRIPTION
1              ANDREW              COOL
2              MATT                NOT COOL 
```

我需要做的就是将数据输出到以空格分隔的文本文件。但是，我想确保“名称”列最多包含 10 个字符。因此，例如，第一行“ANDREW”是 6 个字符，那么我想要它后面的 4 个空格。

第二排也一样。'MATT' 是 4 个字符，所以我想要 6 个空格。这样，当您移动到每一列时，数据都会排列整齐，最坏的情况是它会被截断，但我并不关心这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:53:05.233

使用此选择查询，然后将其导出到您的文本文件。

```
select ID,cast(NAME as char(10)) as NAME,DESCRIPTION from yourtable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:53:55.990

你可以使用转换功能

```
select CONVERT(char(10),'ANDREW') 
```

.

```
select ID,
       CONVERT((char(10),NAME) as NAME,
       DESCRIPTION 
from <table> 
```

# android - ListView 和 onItemClick 中的可聚焦 EditText

> ID：12089948
> 
> 赞同：14
> 
> 时间：2012-08-23T10:49:21.570
> 
> 标签：android, android-listview, onitemclick, focusable

在我拥有的每个`ListView`项目中`EditText`。

当我设置`android:focusable="false"`为`EditText`then`onItemClick`时，该`ListView`项目正在工作，`EditText`但当我进入时没有得到光标`click`。

如果我设置`android:focusable="true"`, `EditText`then`EditText`是可聚焦的，但是当我点击它`onItemClick`时`ListView`它不起作用。

如何在这个项目中分离`onItemClick`和聚焦？`EditText`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-23T16:38:34.877

感谢**@user370305**提供 OnTouchListener 的想法。现在它通过使用为我工作`setOnTouchListener()`：

```
public class AdapterListCards extends CursorAdapter implements View.OnTouchListener {
 public AdapterListCards(Context context) {
    super(context, null, true);
 }

 @Override
 public boolean onTouch(View view, MotionEvent motionEvent) {
    if (view instanceof EditText) {
        EditText editText = (EditText) view;
        editText.setFocusable(true);
        editText.setFocusableInTouchMode(true);
    } else {
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.edtCode.setFocusable(false);
        holder.edtCode.setFocusableInTouchMode(false);
    }
    return false;
 }

 private class ViewHolder {
    TextView txtName;
    EditText edtCode;
}

 @Override
 public View newView(final Context context, Cursor cursor, ViewGroup parent) {
    View convertView = LayoutInflater.from(context).inflate(R.layout.list_item, parent, false);
    final ViewHolder holder = new ViewHolder();
    holder.txtName = (TextView) convertView.findViewById(R.id.txt_name);
    holder.edtCode = (EditText) convertView.findViewById(R.id.pass);
    holder.edtCode.setOnTouchListener(this);
    convertView.setOnTouchListener(this);
    convertView.setTag(holder);

    return convertView;
 }

@Override
public void bindView(View view, Context context, Cursor cur) {
    ViewHolder holder = (ViewHolder) view.getTag();
    if (cur!=null) holder.txtName.setText(cur.getString(cur.getColumnIndex("name")));
 }
} 
```

当然：`android:windowSoftInputMode="adjustPan"`对于清单中的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T07:18:09.007

我的解决方案：

```
@Override
public boolean onTouch(View view, MotionEvent motionEvent) {
    ViewHolder vh = (ViewHolder) view.getTag();
    //vh.row is the convertView in getView or you may call it the row item itself
    ((ViewGroup)vh.row).setDescendantFocusability(view instanceof EditText?ViewGroup.FOCUS_AFTER_DESCENDANTS:ViewGroup.FOCUS_BLOCK_DESCENDANTS);
    return false;
} 
```

并添加

```
android:descendantFocusability="blocksDescendants" 
```

到列表行项目的布局 xml 文件中的视图组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T09:32:06.063

对我有用的解决方案是使用带有 TextView 的 EditText 和 adater 中指示编辑模式启用/禁用的标志。

我在相对布局中的相同位置添加了 TextView 和 EditText，这意味着它们将相互重叠。默认情况下，EditText 将被隐藏，而 TextView 将被显示。在此列表视图的项目单击完美无缺。

然后我为 TextView 和 onTouch 分配了触摸侦听器，我隐藏了 textview 并显示了 EditText 和 requestfocus 启用输入。甚至整个视图的点击都会请求 EditText 的焦点。因此，不应启用任何项目单击。

我在操作栏中有一个按钮“完成”。单击它后，我会在适配器中更新我的标志，说“modeEdit = false”并调用 notifydatasetchanges。

在 GetView 中，我们检查了标志，如果 modeEdit = false，则显示 TextView。

这是我必须工作的唯一最佳解决方案！！！

希望这可以帮助。如果有人对源代码的工作副本感兴趣，请告诉我。

# iphone - 触摸按钮区域（iPhone、iPad）

> ID：12089951
> 
> 赞同：0
> 
> 时间：2012-08-23T10:49:41.603
> 
> 标签：iphone, ipad, touch

我遇到了这种情况：这是照片： http: [//imageshack.us/photo/my-images/826/iconepe.png/](http://imageshack.us/photo/my-images/826/iconepe.png/) 这两个图像都是小 20 像素 x 像素，如果我点击它们，没有任何反应，如果我单击它们的左侧，则链接有效。我应该把图像放大吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:57:07.933

请您的设计师通过在图像周围使用透明空间来放大图像。20x20 太小而无法触摸。Apple 表示平均手指点击是 44x44（来自 WWDC）。建议所有表格行至少为该高度。使用透明填充使您的图像至少为 44 * 44。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:57:24.400

我的猜测是您的手指缺少按钮。

> 可点击 UI 元素的舒适最小尺寸为 44 x 44 点。

根据[iOS 人机界面指南](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Characteristics/Characteristics.html#//apple_ref/doc/uid/TP40006556-CH7-SW1)

如果您需要保持图像这么小，一种解决方法是增加按钮的大小（框架）并保留图像（图像必须设置为按钮图像，而不是背景图像）。这样，您将拥有一个更大的区域，可以接受输入并仍然使用相同的图像。

# java - 在类中删除这个对象

> ID：12089961
> 
> 赞同：4
> 
> 时间：2012-08-23T10:50:30.790
> 
> 标签：java, class

```
private class Node
{
    Item name;
    Node next;

    public void deleteObject()
    {
        this = null;
    }
} 
```

是否可以删除类内的对象？我试图在上面做，但它给出了一个错误，左侧应该是一个变量。 `Node`是内部类。谢谢你。

**编辑：** `var1`并且`var2`引用了这个类的对象，当我`var1`通过做删除时`var1 = null`，我希望它`var2`也被删除。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T10:52:59.840

不，那是不可能的。也没有必要。

只要无法从其中一个根对象访问该对象，它就会有资格进行垃圾回收（有效地释放）。基本上自我引用并不重要。

只要确保您永远不会存储对不再使用的对象的引用，其余的将由垃圾收集器处理。

关于您的编辑：

> ***编辑：** var1 和 var2 引用了此类的对象，当我通过执行 var1 = null 删除 var1 时，我希望 var2 也将被删除。*

您不能强制另一个对象删除其引用。您必须明确告诉其他对象这样做。例如，如果您正在实现一个链表（如您的示例中所示），我建议您添加一个`prev`引用并执行以下操作：

```
if (prev != null)
    prev.setNext(next);  // make prev discard its reference to me (this).

if (next != null)
    next.setPrev(prev);  // make next discard its reference to me (this). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:53:11.280

不，您不能`this`在同一类中删除对象或将其标记为垃圾回收。

并且`this`不是变量，表达式左侧不能有关键字，因此编译器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T10:54:29.583

是不可能的。您应该在“NodeManager”之类的东西中收集节点，然后从这个“管理器”中删除节点。

例如，如果您制作一个节点列表。您可以从列表中删除节点。显然，List 将包含第一个节点和一系列方法，并且在这些方法之间存在 deleteNode。

见[链表](http://en.wikipedia.org/wiki/Linked_list)

# c# - 弹出窗口 WPF 表单自定义控件内容

> ID：12089963
> 
> 赞同：0
> 
> 时间：2012-08-23T10:50:34.463
> 
> 标签：c#, wpf

我在 WPF 中完成了一个表单，其中已经有一个名为 RateView 的自定义控件。这个自定义控件有 4 个文本框（它们都可以正常工作）。它还包含一个按钮。

我有第二个名为 Extended Margin Info 的自定义控件，它还有一个 XAML 表单，它只显示输出数据。

如何通过单击名为 Rateview 的自定义控件上的按钮将 XAML 画布显示到扩展边距信息 XAML 的主窗口中，每次都在同一位置？Rateview控件在主窗口中存在5次，因此将有5个按钮，当点击时，每次都需要将ExtendedMargin Info的弹出窗口与extendedmargin info的内容输出到主屏幕的相同位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:25:52.480

单击时，您的按钮应调用`Command`更新某些 ViewModel 的 a ，该 ViewModel 公开您要显示`Property`的当前的 ViewModel 。`ExtendedMarginInfo`然后您可以将此属性绑定到目标视图`Content Property`中的 a `ContentControl`。您可以使用该属性选择`View`要显示的内容。`Control``ContentControl.ContentTemplateSelector`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:47:17.860

我猜您想显示一个弹出窗口并更改其内容，并将其放置在不同的控件中。

首先创建您的自定义控件：

```
balloon = new LogEntryInfoBalloon();
        balloon.SetMainWindow(this);
        balloon.DataContext = vm.NotificationViewModel; 
```

然后创建 Popup 控件（System.Windows.Controls.Primitives）：

```
localPop = new Popup();
        localPop.AllowsTransparency = true;
        localPop.Placement = PlacementMode.AbsolutePoint;
        localPop.StaysOpen = true;
        localPop.PlacementTarget = this;
        localPop.Child = balloon; 
```

放置目标指向 MainWindow。

定义将关闭（隐藏）气球的计时器：

```
localPopTimer = new Timer(new TimerCallback(CloseLocalPopup)); 
```

关闭功能：

```
private void CloseLocalPopup(object args)
    {
        var act = new Action(() =>
        {
            localPop.IsOpen = false;
        });
        Dispatcher.BeginInvoke(act, null);
    } 
```

显示气球代码如下所示：

```
private void ShowNotifyBaloon(NotifyBaloonViewModel vm)
    {
        var act = new Action(() =>
        {
            localPop.IsOpen = true;
            localPopTimer.Change(4000, Timeout.Infinite);
        });
        Dispatcher.BeginInvoke(act, null);
    } 
```

# java - 查找两个字符串之间的差异

> ID：12089967
> 
> 赞同：30
> 
> 时间：2012-08-23T06:40:29.410
> 
> 标签：java, string, comparison

假设我有两个长字符串。它们几乎相同。

```
String a = "this is a example"
String b = "this is a examp" 
```

上面的代码只是示例。实际的字符串很长。

问题是一个字符串比另一个字符串多**2 个字符**。

我如何检查这两个字符是哪一个？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-23T10:27:56.317

您可以使用[StringUtils.difference(String first, String second)](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html#difference(java.lang.String,%20java.lang.String))。

他们是这样实现的：

```
public static String difference(String str1, String str2) {
    if (str1 == null) {
        return str2;
    }
    if (str2 == null) {
        return str1;
    }
    int at = indexOfDifference(str1, str2);
    if (at == INDEX_NOT_FOUND) {
        return EMPTY;
    }
    return str2.substring(at);
}

public static int indexOfDifference(CharSequence cs1, CharSequence cs2) {
    if (cs1 == cs2) {
        return INDEX_NOT_FOUND;
    }
    if (cs1 == null || cs2 == null) {
        return 0;
    }
    int i;
    for (i = 0; i < cs1.length() && i < cs2.length(); ++i) {
        if (cs1.charAt(i) != cs2.charAt(i)) {
            break;
        }
    }
    if (i < cs2.length() || i < cs1.length()) {
        return i;
    }
    return INDEX_NOT_FOUND;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-04-29T19:30:13.573

要查找 2 个字符串之间的差异，您可以使用**StringUtils**类和***差异***方法。它比较两个字符串，并返回它们不同的部分。

```
 StringUtils.difference(null, null) = null
 StringUtils.difference("", "") = ""
 StringUtils.difference("", "abc") = "abc"
 StringUtils.difference("abc", "") = ""
 StringUtils.difference("abc", "abc") = ""
 StringUtils.difference("ab", "abxyz") = "xyz"
 StringUtils.difference("abcde", "abxyz") = "xyz"
 StringUtils.difference("abcde", "xyz") = "xyz" 
```

请参阅：[https ://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-23T06:42:53.180

如果不遍历字符串，您只能知道*它们*是不同的，而不是*在哪里*- 并且只有它们的长度不同。如果你真的需要知道不同的字符是什么，你必须逐个遍历两个字符串并比较相应位置的字符。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-10-10T15:27:31.630

下面的 Java 片段有效地计算了一组最小的字符，这些字符必须从相应的字符串中删除（或添加到）以使字符串相等。这是动态规划的一个例子。

```
import java.util.HashMap;
import java.util.Map;

public class StringUtils {

    /**
     * Examples
     */
    public static void main(String[] args) {
        System.out.println(diff("this is a example", "this is a examp")); // prints (le,)
        System.out.println(diff("Honda", "Hyundai")); // prints (o,yui)
        System.out.println(diff("Toyota", "Coyote")); // prints (Ta,Ce)
        System.out.println(diff("Flomax", "Volmax")); // prints (Fo,Vo)
    }

    /**
     * Returns a minimal set of characters that have to be removed from (or added to) the respective
     * strings to make the strings equal.
     */
    public static Pair<String> diff(String a, String b) {
        return diffHelper(a, b, new HashMap<>());
    }

    /**
     * Recursively compute a minimal set of characters while remembering already computed substrings.
     * Runs in O(n^2).
     */
    private static Pair<String> diffHelper(String a, String b, Map<Long, Pair<String>> lookup) {
        long key = ((long) a.length()) << 32 | b.length();
        if (!lookup.containsKey(key)) {
            Pair<String> value;
            if (a.isEmpty() || b.isEmpty()) {
                value = new Pair<>(a, b);
            } else if (a.charAt(0) == b.charAt(0)) {
                value = diffHelper(a.substring(1), b.substring(1), lookup);
            } else {
                Pair<String> aa = diffHelper(a.substring(1), b, lookup);
                Pair<String> bb = diffHelper(a, b.substring(1), lookup);
                if (aa.first.length() + aa.second.length() < bb.first.length() + bb.second.length()) {
                    value = new Pair<>(a.charAt(0) + aa.first, aa.second);
                } else {
                    value = new Pair<>(bb.first, b.charAt(0) + bb.second);
                }
            }
            lookup.put(key, value);
        }
        return lookup.get(key);
    }

    public static class Pair<T> {
        public Pair(T first, T second) {
            this.first = first;
            this.second = second;
        }

        public final T first, second;

        public String toString() {
            return "(" + first + "," + second + ")";
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-07-31T02:55:34.053

要直接获取更改的部分，而不仅仅是结尾，您可以使用 Google 的[Diff Match Patch](https://github.com/google/diff-match-patch)。

```
List<Diff> diffs = new DiffMatchPatch().diffMain("stringend", "stringdiffend");
for (Diff diff : diffs) {
  if (diff.operation == Operation.INSERT) {
    return diff.text; // Return only single diff, can also find multiple based on use case
  }
} 
```

对于 Android，添加：`implementation 'org.bitbucket.cowwoc:diff-match-patch:1.2'`

这个包比这个功能强大得多，它主要用于创建diff相关的工具。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-23T11:55:31.820

```
String strDiffChop(String s1, String s2) {
    if (s1.length > s2.length) {
        return s1.substring(s2.length - 1);
    } else if (s2.length > s1.length) {
        return s2.substring(s1.length - 1);
    } else {
        return null;
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-16T16:56:08.313

Google 的 Diff Match Patch 很好，但安装到我的 Java maven 项目中很痛苦。只是添加一个 Maven 依赖项是行不通的；eclipse 刚刚创建了目录并添加了 lastUpdated 信息文件。最后，在第三次尝试时，我在我的 pom 中添加了以下内容：

```
<dependency>
    <groupId>fun.mike</groupId>
     <artifactId>diff-match-patch</artifactId>
    <version>0.0.2</version>
</dependency> 
```

[然后我从https://search.maven.org/search?q=g:fun.mike%20AND%20a:diff-match-patch%20AND%20v](https://search.maven.org/search?q=g:fun.mike%20AND%20a:diff-match-patch%20AND%20v:0.0.2)手动将 jar 和源 jar 文件放入我的 .m2 存储库中： [0.0.2](https://search.maven.org/search?q=g:fun.mike%20AND%20a:diff-match-patch%20AND%20v:0.0.2)

毕竟，以下代码有效：

```
import fun.mike.dmp.Diff;
import fun.mike.dmp.DiffMatchPatch;

DiffMatchPatch dmp = new DiffMatchPatch();
LinkedList<Diff> diffs = dmp.diff_main("Hello World.", "Goodbye World.");
System.out.println(diffs); 
```

结果：

```
[Diff(DELETE,"Hell"), Diff(INSERT,"G"), Diff(EQUAL,"o"), Diff(INSERT,"odbye"), Diff(EQUAL," World.")] 
```

显然，这最初并不是编写（甚至完全移植）到 Java 中的。（diff_main？我能感觉到 C 燃烧到我的眼睛里 :-)）仍然有效。对于使用长而复杂的字符串的人来说，它可能是一个有价值的工具。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-11T12:04:19.967

要查找两行中不同的单词，可以使用以下代码。

```
 String[] strList1 = str1.split(" ");
    String[] strList2 = str2.split(" ");

    List<String> list1 = Arrays.asList(strList1);
    List<String> list2 = Arrays.asList(strList2);

    // Prepare a union
    List<String> union = new ArrayList<>(list1);
    union.addAll(list2);

    // Prepare an intersection
    List<String> intersection = new ArrayList<>(list1);
    intersection.retainAll(list2);

    // Subtract the intersection from the union
    union.removeAll(intersection);

    for (String s : union) {
        System.out.println(s);
    } 
```

最后，您将获得两个列表中不同的单词列表。人们可以轻松地对其进行修改，以便在第一个列表或第二个列表中简单地使用不同的单词，而不是同时使用。这可以通过仅从 list1 或 list2 而不是并集中删除交集来完成。

可以通过将拆分列表中每个单词的长度相加（以及拆分正则表达式）或简单地执行 String.indexOf("subStr") 来计算确切位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-16T16:39:03.187

另一个发现字符串之间差异的优秀库是[https://github.com/java-diff-utils](https://github.com/java-diff-utils)上的 DiffUtils 。我使用了 Dmitry Naumenko 的叉子：

```
public void testDiffChange() {
    final List<String> changeTestFrom = Arrays.asList("aaa", "bbb", "ccc");
    final List<String> changeTestTo = Arrays.asList("aaa", "zzz", "ccc");
    System.out.println("changeTestFrom=" + changeTestFrom);
    System.out.println("changeTestTo=" + changeTestTo);
    final Patch<String> patch0 = DiffUtils.diff(changeTestFrom, changeTestTo);
    System.out.println("patch=" + Arrays.toString(patch0.getDeltas().toArray()));

    String original = "abcdefghijk";
    String badCopy =  "abmdefghink";
    List<Character> originalList = original
            .chars() // Convert to an IntStream
            .mapToObj(i -> (char) i) // Convert int to char, which gets boxed to Character
            .collect(Collectors.toList()); // Collect in a List<Character>
    List<Character> badCopyList = badCopy.chars().mapToObj(i -> (char) i).collect(Collectors.toList());
    System.out.println("original=" + original);
    System.out.println("badCopy=" + badCopy);
    final Patch<Character> patch = DiffUtils.diff(originalList, badCopyList);
    System.out.println("patch=" + Arrays.toString(patch.getDeltas().toArray()));
} 
```

结果准确显示了变化的地方（基于零的计数）：

```
changeTestFrom=[aaa, bbb, ccc]
changeTestTo=[aaa, zzz, ccc]
patch=[[ChangeDelta, position: 1, lines: [bbb] to [zzz]]]
original=abcdefghijk
badCopy=abmdefghink
patch=[[ChangeDelta, position: 2, lines: [c] to [m]], [ChangeDelta, position: 9, lines: [j] to [n]]] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-03T19:03:10.437

对于像这样的简单用例。您可以检查字符串的大小并使用拆分功能。对于你的例子

```
a.split(b)[1] 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-06-21T14:13:59.487

你可以试试这个

```
String a = "this is a example";
String b = "this is a examp";

String ans= a.replace(b, "");

System.out.print(now);      
//ans=le 
```

# android - 在更新应用程序之前我可以做一些操作吗？

> ID：12089971
> 
> 赞同：1
> 
> 时间：2012-08-23T10:50:50.127
> 
> 标签：android

在从 Goole Play 更新应用程序之前，我想在我的应用程序中执行一些干净的操作。例如。从以前的应用程序版本中删除一些文件。有什么办法可以在Android中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:53:27.287

对此没有 API 调用，也没有任何非官方的方法。但是，您可以让您的应用程序在每次运行时检查服务器上的文件。您可以在其中存储最新版本代码，并根据已安装应用程序的版本代码对其进行检查。如果版本代码更高，则有可用的更新。然后，您可以执行清理操作，并提示用户更新应用程序。但是，有时用户不会更新应用程序，因此您应该确保正在清理的数据对功能来说是非必要的，或者通过在用户更新之前不让他们通过更新提示来强制用户更新应用程序它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T10:55:42.837

您不能在更新后第一次启动您的应用程序时执行此操作吗？看起来轻松了很多。只需将上次更新的应用程序版本存储在用户首选项或文件中，并在每次应用程序启动时进行验证。

# c# - 使用 c# 和 VS 2010 创建动态图

> ID：12089972
> 
> 赞同：0
> 
> 时间：2012-08-23T10:50:51.157
> 
> 标签：c#, html, visual-studio-2010

我的网站需要生成动态图表。我使用 Visual Studio 2010 用 c# 编写它。我搜索了 MSDN 站点并找到了 asp:chart 标记。问题是它似乎只有一个 VS 2008 安装程序，它不能在 VS 2010 上工作。有谁知道在 VS 2010 中设置和运行它的方法或建议一个可靠的图形工具？e

我已经安装[了图表库](http://www.microsoft.com/en-us/download/details.aspx?id=14422) ，但一直无法安装 VS 插件，因为它适用于 2008 年

[添加在](http://www.microsoft.com/en-us/download/details.aspx?id=23903)

我一直找不到 2010 的链接？

我还得到了红色下划线的数据可视化：

`using System.Web.UI.DataVisualization.Charting;`

# javascript - 图像在画布上多次出现？

> ID：12089975
> 
> 赞同：0
> 
> 时间：2012-08-23T10:50:59.257
> 
> 标签：javascript, html, canvas

我正在绘制一个简单的动态画布，我想知道如何使我的 drawImage 方法中的 .png 文件同时在画布上的不同位置出现 40 次？预先感谢！:)

非常感谢大家的回复！这是我现在得到的：

```
<script type="text/javascript">
var ctx;
var imgBg;
var imgDrops;
var x = 40;
var y = 0;
    function setup() {
        var canvas = document.getElementById('canvasRegn');

        if (canvas.getContext) {
                ctx = canvas.getContext('2d');
        setInterval('draw();', 36);
        imgBg = new Image();
        imgBg.src = 'dimma.jpg';

        imgDrops = new Image();
        imgDrops.src = 'drop.png';

        }
    }

function draw() {
    drawBackground();

    for(var i=0; i <= 40; i++) {    
    ctx.drawImage (imgDrops, x, y);
    y += 3;
    if(y > 450)
            y = -20;
        x=Math.random()*600;
    }

}

function drawBackground(){  
    ctx.drawImage(imgBg, 0, 0);
}
</script> 
```

我现在的问题是图像到处乱跳......我希望它们从上面慢慢“落下”并回来:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:23:07.797

这就是您需要的：[http](http://edumax.org.ro/extra/new/imagetut/) ://edumax.org.ro/extra/new/imagetut/ 您可以在此处获取代码：http: [//edumax.org.ro/extra/new/imagetut/script.js](http://edumax.org.ro/extra/new/imagetut/script.js)

相关部分是这样的：

```
function draw_image(){
//draw one image code
}
window.onload = function () {
   for (var i=0;i<10;i++){
    for (var j=0;j<10;j++){
        draw_image(10+i*40, 10+j*40, 40, 40);
    }
}  
} 
```

这段代码只解释了这个概念，它本身不会起作用，完整版本请查看上面的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T11:06:30.353

看看这个小提琴[http://jsfiddle.net/joevallender/D83uC/10/](http://jsfiddle.net/joevallender/D83uC/10/)

我最近向朋友解释了画布的一些基础知识。尽管我使用的是形状而不是 .png 文件，但我认为您正在寻找的循环是相同的。

代码的关键位是下面的这个循环

```
setInterval(function(){
  // clear stage
  context.clearRect(0, 0, width, height);
  for(var i = 0; i < balls.length; i++) {
    balls[i].move(balls);
  }
}, 1000/FPS) 
```

FPS 是一个变量，而 .move() 是一个计算新坐标然后重新绘制球对象的函数。

我认为它可能根本没有清除“舞台”`context.clearRect(0, 0, width, height);`

**编辑**也许那个例子有太多的事情没有用。

请参阅更早的版本[http://jsfiddle.net/joevallender/D83uC/2](http://jsfiddle.net/joevallender/D83uC/2)，它可以简单地为球设置动画。重点仍然存在，**如果您不想要“小径”，则需要清除画布**

把画布想象成窗户油漆，而不是闪光。您绘制的东西不是可编辑的对象。每次都需要重新绘制整个东西。（除非你使用的 JS 库让事情看起来更像 flash - 但我猜你一开始想在没有帮助库的情况下学习）

[正如我所说，我最近正在向某人解释画布，您可以通过更改 URL http://jsfiddle.net/joevallender/D83uC/3](http://jsfiddle.net/joevallender/D83uC/3) 末尾的数字来查看我发送给您的两个链接之间的各个阶段[http://jsfiddle.net/joevallender/D83uC/4](http://jsfiddle.net/joevallender/D83uC/4) 等。

**编辑2**

或者，如果我误解了，请发布一个 jsfiddle，让我们知道它有什么问题

# ruby-on-rails - 如何为 /user/2/files/any/path/to/a/file 创建 Rails 通配符路由？

> ID：12089978
> 
> 赞同：1
> 
> 时间：2012-08-23T10:51:17.063
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, web-applications, routing

我正在构建一个 Rails 应用程序，它允许用户拥有一个个人文件夹，他们可以在其中上传文件或创建另一个文件夹。

我怎么能做出一条类似的路线

```
/user/:id/files/:any_path 
```

并匹配这样的路线

```
/user/2/files/some_folder/a_file.doc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T11:09:40.387

您可以尝试匹配这样的自定义路由：

```
match '/user/:id/files/*any_path' 
```

此路由将匹配`/user/2/files/3`or `/user/2/files/long/path/to/3`，设置`params[:any_path]`为`"3"`or `"long/path/to/3"`。

从 Rails 3.1 开始，通配符路由默认总是匹配可选的格式段。例如，如果您有这条路线：

```
match '*pages' => 'pages#show' 
```

通过请求`"/foo/bar.json"`，您的 params[:pages] 将等于`"foo/bar"`JSON 的请求格式。如果您想恢复旧的 3.0.x 行为，可以这样提供`:format => false`：

```
match '*pages' => 'pages#show', :format => false 
```

如果你想让格式段强制，所以不能省略，你可以`:format => true`这样提供：

```
match '*pages' => 'pages#show', :format => true 
```

您可以在[**Rails 路由中从外部找到此信息和更多详细信息**](http://guides.rubyonrails.org/routing.html)

# ajax - ajax 和 node.js 的区别

> ID：12089982
> 
> 赞同：15
> 
> 时间：2012-08-23T10:51:39.683
> 
> 标签：ajax, node.js

我对 node.js 和 ajax 感到困惑。大佬能不能给个区别啊

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-23T10:59:31.327

AJAX 和 Node.js 唯一的相似之处在于它们都是 JavaScript。但它们都服务于完全不同的目的。

AJAX（Asynchronous Javascript and XML 的缩写）是一种**客户端**技术，通常用于在不刷新页面的情况下更新页面内容。这种使用几乎随处可见。从 Facebook，甚至到 Stack Overflow。

Node.js 是**服务器端**JavaScript，用于开发服务器软件。例如，您不想在客户端 JS 中开发数据库系统（因为显然任何人都可以访问数据库的凭据），但是使用 Node.js 可以完成这样的任务。Node.js 不会在浏览器中执行，而是由服务器执行 - 它的用途与 Apache/PHP、Ruby on Rails、Django 等非常相似。

**TL;DR** : AJAX 用于客户端，Node.js 用于服务器端

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-30T16:02:14.983

简单来说，Node.js 和 Ajax 的区别在于，Ajax（Asynchronous JavaScript and XML 的缩写）是一种客户端技术，通常用于更新页面内容而不刷新页面。而Node.js是Server Side JavaScript，用于开发服务器软件。Node.js 不在浏览器中执行，而是由服务器执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-04T01:57:53.500

Node 是一个完整的开发环境，允许你做普通的 js 不能不喜欢与数据库通信的东西。Ajax 只是一种从外部文件获取数据或脚本的技术。

# php - 在php中使用数组查找百分位数

> ID：12089984
> 
> 赞同：5
> 
> 时间：2012-08-23T10:51:45.840
> 
> 标签：php, arrays, arraylist, percentile

我有一个这样的数组

```
 array(
      45=>5,
      42=>4.9,
      48=>5,
      41=>4.8,
      40=>4.9,
      34=>4.9,
      .....
      ) 
```

这里 index 是`userid`，value 是他的分数。

现在我想要为用户实现百分位数，例如 45,48 的百分位数为 99，42,40,34 为 97，41 为 94。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T11:01:54.163

1.  根据“分数”对数组进行排序，升序
2.  Percentile = (排序数组中元素的索引) * 100 / (数组中的总元素)

例子：

```
<?php
$array = array(
      45=>5,
      42=>4.9,
      48=>5,
      41=>4.8,
      40=>4.9,
      34=>4.9,
      );

print("Unsorted array:<br/>");
print_r($array);
arsort($array);
print("<br/>");
print("Sorted array:<br/>");
print_r($array);
print("<br/>");

$i=0;
$total = count($array);
$percentiles = array();
$previousValue = -1;
$previousPercentile = -1;
foreach ($array as $key => $value) {
    echo "\$array[$key] => $value";
    if ($previousValue == $value) {
    $percentile = $previousPercentile;
    } else {
    $percentile = 99 - $i*100/$total;
    $previousPercentile = $percentile;
    }
    $percentiles[$key] = $percentile;
    $previousValue = $value;
    $i++;
}

print("Percentiles:<br/>");
print_r($percentiles);
print("<br/>");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T11:59:43.863

它可以更容易地完成

```
function procentile($arr, $percentile=0.95){
    sort($arr);
    return $arr[round($percentile * count($arr) - 1.0-$percentile)];
} 
```

# javascript - d3.js 保存状态

> ID：12089986
> 
> 赞同：10
> 
> 时间：2012-08-23T10:52:13.223
> 
> 标签：javascript, jquery, save, d3.js, snapshot

我`D3.js`过去常常以交互式和动态的方式可视化几个数据集。用户可以通过加载组合附加数据和视图来浏览所有图表并检索数据的各个视图。我希望用户能够通过 等分享他们在数据中发现的宝藏`mail`，`facebook`但在某种程度上，访问共享“快照”的新用户可以继续探索数据。所以我需要

1.  保持我的动态网页的当前状态
2.  能够快速加载和显示此*状态*。
3.  绑定用户快照那一刻已经绑定的所有事件

作为一个*尽可能简单的*示例（将有各种图表和大量事件），想象有一个简单的 d3 线图和

```
graph.selectAll("path").on('mouseover', function(d){
    $.get("ajaxFunction",{"d" : d} ,function(jsonData) {
        //INIT NEW SVG
    });
}); 
```

这个新的动态加载页面包含几个`svg`s。但是，如果我只是保存每个 svg 的形状和位置，可能很难跟踪所有当前的事件绑定。如果我保存前用户所做的每一个操作，我怎样才能有效地重新加载快照？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:11:35.753

我能想象的最简单的事情是遍历所有节点，将其身份和状态存储为哈希，然后使用 ajax 将此哈希作为 json 发送回服务器，并将哈希与返回的密钥一起放入数据库用户作为 url。在访问 url 时，您然后加载 d3js 对象并运行哈希，将每个节点的状态设置为它的状态。

获取节点的状态需要更多的 d3js 知识。

你显示什么样的数据？您也许应该能够将事件寄存器添加到您的 js 并记录所有执行的事件。通过事件调用者。

例如说我有以下数据

```
 {"Things":{
       "Balls":{
         "Footballs":"", 
         "Basketballs":""
       }, 
     "Persons":{
        "Painter":{
          "Pablo":"","Robert":""
        },
        "Programmers":{
        "Robert":""}}} 
```

您应该并且希望在鼠标单击时显示/隐藏此树的节点。

你应该能够做这样的事情

```
var eventlog = [];
$(".nodes").onClick(function(this){
  if (isClosed(this)){
    function_to_open_node();
    eventlog.append({"action" : "open", "id" : this.id})
  }else{
    function_to_close_node();
    eventlog.append({"action" : "close", "id" : this.id})
  }
}) 
```

这样你应该最终得到这样的东西

```
[{"action" : "close", "id" : "id"},{"action" : "close", "id" : "someotherid"},{"action" : "close", "id" : "someid"}] 
```

这样你就有了一个可存储的状态！可以执行的。

# javascript - 防止将 Jquery Dialog 内容的 CSS 应用到主窗口

> ID：12089995
> 
> 赞同：0
> 
> 时间：2012-08-23T10:52:41.057
> 
> 标签：javascript, jquery, css, jquery-ui

在我的 Web 应用程序中，我编写了一个跨域 ajax 调用，它从不同的域获取 HTML 页面。这个新获取的页面正在使用以下代码在 jQuery 对话框中`$('#previewDialog').html(response).dialog('open');` 呈现 这将在对话框中正确呈现响应。但是，响应（HTML 页面）中也有一些 CSS 样式。这些样式（通常是 BODY、INPUT 等）被应用到我的主窗口（父页面）并扭曲了页面的完整视图。

当带有 HTML 页面的对话框打开时，由于 HTML 页面中使用的 CSS（AJAX 调用的响应）应用于所有组件，父页面的视图完全扭曲。当我关闭对话框时，父页面会恢复原状。

无论如何，我可以防止在对话框中显示的 HTML 页面的 CSS 不应用于我的父页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:01:17.693

简单的答案：将您拉入的页面中的所有内容都包装在一个 div 中，该 div 具有其他地方未使用的类。修改该页面的 .css，使其仅适用于该类的 div 中的元素。

编辑：如果您无法控制原始页面的 css，事情会变得有些复杂。但是，您的问题是您将 HTML（包括 css 链接）直接注入到您的页面中。相反，请尝试以下操作：

*   获取其他页面的 HTML。使用 html() 命令将其放入您不用于其他任何操作的一侧的 div 中。
*   使用 jquery DOM 命令进入该 div。抓住麻烦链接内的页面部分，并将其拉到该`$('#previewDialog')`位置。销毁工作空间 div 的内容。如果您需要保留 javascript 或 css，请将其输入到页面的其他位置（如有必要，请修改 - 就像使用 div 包装器一样）。

现在，这仅在您被馈送的页面没有以任何频率更改其 css 或 javascript 时才有效。

同一事物的另一个版本 - 当您将其作为响应（字符串格式）时，使用字符串操作工具来删除 css 引用，而不是使用 DOM 命令从中提取您需要的内容。

同一事物的更复杂/更困难的版本（尽管更健壮）：使用字符串命令切出 css 引用（与备用版本一样），然后使用该 css 引用进行另一个调用以获取 .css 文件。使用 .css 文件上的字符串命令添加最初描述的 div-wrapper 限制，然后将其作为内部样式表插入到页面的其他位置。