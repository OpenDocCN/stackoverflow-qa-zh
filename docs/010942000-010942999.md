# StackOverflow 问答 10942000-10942999

# railo - Railo 在哪个 Windows 帐户下运行

> ID：10942000
> 
> 赞同：4
> 
> 时间：2012-06-08T01:27:17.920
> 
> 标签：railo, cfml

如何找到 Railo 在 Windows 2008 r2 上运行的 Windows 用户帐户？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T01:45:21.677

我相信您可以使用这些`System`属性，就像在 ACF 中一样：

```
<cfscript>
    prop = createObject("java", "java.lang.System").getProperties();
    WriteDump( var=prop["user.name"], label="User.Name");
    WriteDump( var=prop, label="All Properties" );
</cfscript> 
```

# erlang - Reltool 错误“可能包含在两个不同的应用程序中”

> ID：10942002
> 
> 赞同：6
> 
> 时间：2012-06-08T01:27:20.253
> 
> 标签：erlang, reltool

[我想知道reltool](http://www.erlang.org/doc/man/reltool.html)以下行为背后的原因是什么：

如果我`reltool.config`使用默认值`mod_cond`和`incl_cond`选项，并且我包含的应用程序之一有一个模块，该模块也恰好是我的机器上安装的某些应用程序的一部分，但未包含在我的版本中，[则 reltool:get_target_spec/1](http://www.erlang.org/doc/man/reltool.html#get_target_spec-1)返回：

`{error, "Module <some_module> potentially included by two different applications: <system_app> and <my_app>."}`

这很烦人，因为`<system_app>`它不是我发布的一部分（直接或间接）。reltool 真的不能确定`<system_app>`不会包含在我的版本中吗？这就是它的原因`"potentially included"`吗？

无论如何，为了生成我的版本，我必须明确排除哪个是丑陋`<system_app>`的`{app, <system_app> [{incl_cond, exclude}]}`，因为它`<system_app>`恰好安装在`root_dir`我进行构建的机器的 Erlang/OTP 系统中（它可能没有安装在其他构建机器）并且与我的发布无关。实际示例：[tsung-1.4.3](http://tsung.erlang-projects.org/)包含`mochijson2`模块，因此我在构建自己的版本时遇到问题，该版本应`mochiweb`在已`tsung`安装的机器上包含应用程序（但不在其他机器上）。另一种选择是将顶级`incl_cond`从更改`{incl_cond, derived}`为`{incl_cond, exclude}`然后手动包含所有我想成为我发布的一部分的应用程序，它更好（可以在任何构建机器上工作）但仍然不是很好，因为它必须手动完成（我想依靠 relltool 来找出依赖关系） .

那么问题来了，为什么我们会出现这样的情况？为什么仅仅在构建机器上存在一些应用程序就会导致上述`reltool`错误？

PS 作为旁注，我相信当前版本的[reltool_server.erl](https://github.com/erlang/otp/blob/maint/lib/reltool/src/reltool_server.erl#L907-909)的第 907-909 行包含一个错误：它会`bad argument`在被调用时生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T21:55:48.943

我相信您会看到错误消息，因为在应用程序包含的 {include_cond, derived} 策略的情况下，reltool 使用 erlang 的 lib 目录作为 erlang 库的规范源。Tsung 仅仅因为它安装到系统库目录而污染了它，现在不允许任何其他应用程序将 mochijson2 模块作为发布的一部分包含在内。

我不会称其为 reltool 中的错误，而是 tsung 自身安装方式中的错误。

# r - predict() 不返回 type = "class" 与 type = "raw" 配合使用

> ID：10942003
> 
> 赞同：1
> 
> 时间：2012-06-08T01:27:31.360
> 
> 标签：r, predict

训练数据从两个文件中读取——一个仅包含自变量 (df.train)，另一个仅包含实际对应的类值 (df.churn)。这些值仅为 -1 和 1。然后我删除所有 NA 列并删除任何找到的重复列。

我将这两组数据组合成具有独立值和类值的单个数据框，并运行 naiveBayes() 且没有错误。

使用 naiveBayes 生成的模型，我运行 predict() 并注意到 type = "raw" 的输出看起来像是合理的数据——在大多数情况下，这些概率相对接近 0 或 1。我在下面展示了前 6 个元素。

我正在寻找输入到 prediction() 中的实际预测类值，以获取 ROC 图和 AUC 值。我再次使用 type = "class" 运行 predict()，这就是我基本上一无所获的地方。

```
 df.train <- read.csv('~/projects/kdd_analysis/data/train_table.csv', header=TRUE, sep=',')
    df.churn <- read.csv('~/projects/kdd_analysis/data/sm_churn_labels.csv', header=TRUE, sep=',')
    df.train <- df.train[,colSums(is.na(df.train))<nrow(df.train)]
    df.train <- df.train[!duplicated(lapply(df.train,c))]
    df.train_C <- cbind(df.train, df.churn)
    mod_C <- naiveBayes(V1~., df.train_C, laplace=0.01)
    pre_C <- predict(mod_C, df.train ,type="raw", threshold=0.001) 
```

我故意对训练数据运行 predict() ，因为我认为这会很有趣。下面， predict() 的值对我来说似乎是“合理的”......也就是说，它们至少看起来不像完全是胡说八道。我还没有将它们与实际值进行比较，并且希望使用 predict() 给出的显式类值来做到这一点。

```
 head(pre_C)
           -1            1
    [1,] 9.996934e-01 3.066321e-04
    [2,] 9.005501e-07 9.999991e-01
    [3,] 1.000000e+00 3.468739e-11
    [4,] 9.362914e-01 6.370858e-02
    [5,] 9.854649e-01 1.453510e-02
    [6,] 9.997680e-01 2.320003e-04 
```

所以，这是 predict() 再次针对相同的模型运行 - 我不明白它怎么可能什么都不返回：

```
 > pre_C <- predict(mod_C, df.train ,type="class", threshold=0.001)
    > pre_C
    factor(0)
    Levels: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T00:18:52.557

解决方案是强制类变量列输入因子：

```
df.train_C$V1 <- factor(df.train_C$V1) 
```

然后`predict()`像以前一样运行模型。我没有改变其他任何东西，而这个模组“修复”了这个问题。由 r-help 的 Andy Liaw 提供。

# c# - Visual Studio 中的静态资源或错误？

> ID：10942004
> 
> 赞同：1
> 
> 时间：2012-06-08T01:28:13.510
> 
> 标签：c#, wpf, xaml

我正进入（状态：

**'在 'System.Windows.StaticResourceExtension' 上提供值引发了异常。' 行号“244”和行位置“11”。**我完全理解这是由于缺少 StaticResource 甚至错误输入或区分大小写的情况，但我已经检查了每个可能是问题的情况，但我在我的标记或代码中没有看到任何问题。可能是一个错误还是还有其他我不是家人的情况？我会很感激你的建议。

谢谢

# visual-studio-2008 - 在 Visual Studio 2008/2010 中为 Win CE 4.2 构建？

> ID：10942005
> 
> 赞同：2
> 
> 时间：2012-06-08T01:28:19.770
> 
> 标签：visual-studio-2008, visual-c++, windows-ce, evc4

我有一个用于 Win CE 4.2（仅限 x86）的旧版 MFC C++ 应用程序，它最初是使用 Embedded Visual C++ 4 (eVC4) 构建的。我需要添加一些来自 C++ 库的功能，该库使用 eVC 编译器不支持的现代 C++ 功能（VS2008 编译器很好地支持它们。）

我尝试在 VS2008 中打开解决方案并收到错误“没有与此项目文件的原始平台匹配的平台”尽管正确安装了 SDK：这台机器上也有 EVC4 的功能副本。

在我的研究中，我在互联网上看到了关于 VS2008 是否可以使用 CE4.2 SDK 构建的相互矛盾的说法——但由于它都是 x86 代码，我不明白为什么这会是一个问题。

重申一下——我不需要任何 ARM 支持，也不需要模拟器或远程调试。我只需要能够将一堆 C++ 文件构建成一个可以在 CE 上运行的 DLL。

以前有人走过这条路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T00:45:17.237

留给后来者的碎屑——

VS2008 不支持使用标准 SDK for x86 构建 WinCE.NET 4.2。

我们目前正在努力回到 VS2003 以获得这种支持。

# cocoa - 有没有人看到“[StdMovieUISliderCell sliderType]：无法识别的选择器发送到实例”

> ID：10942006
> 
> 赞同：9
> 
> 时间：2012-06-08T01:28:21.560
> 
> 标签：cocoa, osx-lion

我正在使用 QTMovieView，有时，我会收到以下日志，然后是未知的选择器异常。该程序具有供用户设置显示和隐藏 QTMovieView 控制器的选项。程序链接的 SDK 是 10.7

“[StdMovieUISliderCell sliderType]：发送到实例的无法识别的选择器”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T14:32:23.647

这看起来像是 OS X Mountain Lion 10.8 中引入的错误（**编辑：**也有关于 OS X 10.7 的报告，请参阅下面的评论）。我想这`QTMovieView`将在下一个主要的 OS X 版本中被弃用。最好的解决方案是转到 AV Foundation（`AVPlayer`和相应的`AVPlayerLayer`课程）。Apple 有一些[关于使用此框架播放资产的文档](http://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)。

也就是说，如果你不能更新到 AV Foundation 或者你不能关闭*Auto Layout*，你仍然可以通过在运行时动态添加缺少的方法来解决这个问题`StdMovieUISliderCell`。确保添加Objective C 运行时头文件并尽早添加方法（例如`+ (void)load`在您的应用程序委托中）。出于 App Store 静态分析器拒绝 foo 的原因，在类名中添加一些简单的编码（如 rot13）也是安全的。

```
// Make sure that we have the right headers.
#import <objc/runtime.h>

// The selectors should be recognized by class_addMethod().
@interface NSObject (SliderCellBugFix)

- (NSSliderType)sliderType;
- (NSInteger)numberOfTickMarks;

@end

// Add C implementations of missing methods that we’ll add
// to the StdMovieUISliderCell class later.
static NSSliderType SliderType(id self, SEL _cmd)
{
  return NSLinearSlider;
}

static NSInteger NumberOfTickMarks(id self, SEL _cmd)
{
  return 0;
}

// rot13, just to be extra safe.
static NSString *ResolveName(NSString *aName)
{
  const char *_string = [aName cStringUsingEncoding:NSASCIIStringEncoding];
  NSUInteger stringLength = [aName length];
  char newString[stringLength+1];

  NSUInteger x;
  for(x = 0; x < stringLength; x++)
  {
    unsigned int aCharacter = _string[x];

    if( 0x40 < aCharacter && aCharacter < 0x5B ) // A - Z
      newString[x] = (((aCharacter - 0x41) + 0x0D) % 0x1A) + 0x41;
    else if( 0x60 < aCharacter && aCharacter < 0x7B ) // a-z
      newString[x] = (((aCharacter - 0x61) + 0x0D) % 0x1A) + 0x61;
    else  // Not an alpha character
      newString[x] = aCharacter;
  }
  newString[x] = '\0';

  return [NSString stringWithCString:newString encoding:NSASCIIStringEncoding];
}

// Add both methods if they aren’t already there. This should makes this
// code safe, even if Apple decides to implement the methods later on.
+ (void)load
{
  Class MovieSliderCell = NSClassFromString(ResolveName(@"FgqZbivrHVFyvqrePryy"));

  if (!class_getInstanceMethod(MovieSliderCell, @selector(sliderType)))
  {
    const char *types = [[NSString stringWithFormat:@"%s%s%s",
      @encode(NSSliderType), @encode(id), @encode(SEL)] UTF8String];
    class_addMethod(MovieSliderCell, @selector(sliderType),
      (IMP)SliderType, types);
  }
  if (!class_getInstanceMethod(MovieSliderCell, @selector(numberOfTickMarks)))
  {
    const char *types = [[NSString stringWithFormat: @"%s%s%s",
      @encode(NSInteger), @encode(id), @encode(SEL)] UTF8String];
    class_addMethod(MovieSliderCell, @selector(numberOfTickMarks),
      (IMP)NumberOfTickMarks, types);
  }
} 
```

在实现这两种方法时，我做了两个假设：

1.  电影视图只能有一个线性滑块，不能有一个圆形滑块。
2.  电影视图不会有刻度线。

如果你的电影有章节，后者可能是个问题，但我不知道它们是如何处理的，因为我不需要或使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:19:26.923

如果我尝试使用 setMovie: 并启用 AutoLayout，我也会遇到同样的问题。Xcode 4.4.1 的更新解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:02:54.317

我知道这是一个相当老的帖子，但对于其他人来说，我遇到了同样的问题，我刚刚为包含 QTMovieView 的 xib 文件停用了可可自动布局，它的工作方式与它应该有的一样。

我目前在 OSX 10.7.4 下使用 xcode 4.5.2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T09:16:53.053

通过在 QtMovieView 子类中添加空的 updateConstraintsForSubtreeIfNeeded 方法来修复此问题。

# emacs - Emacs 的学习曲线（实际上）是什么样的？

> ID：10942008
> 
> 赞同：19
> 
> 时间：2012-06-08T01:29:02.010
> 
> 标签：emacs

Emacs 的学习曲线（实际上）是什么样的？

前段时间，有人给出了一张图表，显示了不同编辑器的学习曲线是如何不同的：

![http://blogs.msdn.com/b/steverowe/archive/2004/11/17/code-editor-learning-curves.aspx](../Images/04a3745ac0f82955cf0d75809fb5937c.png)

资料来源：http: [//blogs.msdn.com/b/steverowe/archive/2004/11/17/code-editor-learning-curves.aspx](http://blogs.msdn.com/b/steverowe/archive/2004/11/17/code-editor-learning-curves.aspx)

假设横轴是使用该工具的经验，纵轴是保留的信息，我无法理解上图是 Emacs 的曲线如何向后弯曲，因为您的经验应该总是增加？！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-08T01:41:20.383

这是一个很好的笑话，其中包含一些明确的事实。

我一直认为作者的意思是，您对 Emacs 了解得越多，进一步学习的可能性就越大。因此无限螺旋。

或者换句话说，你知道的越多，你就越意识到你不知道的东西:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T01:36:29.167

就我而言，它看起来像：

```
|
|
|-___________ 
```

我错误地启动了emacs并且无法弄清楚如何退出，我最终从另一个终端登录并终止了该进程。

这足以让我相信 vi 并没有那么糟糕。

# python - pygame中对象的速度？

> ID：10942011
> 
> 赞同：3
> 
> 时间：2012-06-08T01:29:08.133
> 
> 标签：python, pygame

我正在编写一个简单的 pygame 程序，它只包括在屏幕上移动一个框。盒子移动得很快，我想知道如何控制速度。在我的代码中，更新后的位置移动了 1 而不是更小，因为如果数字不是整数，它会使事情变得更复杂。

```
import os, sys
import pygame
from pygame.locals import *

pygame.init()
mainClock = pygame.time.Clock()

WINDOWWIDTH = 400
WINDOWHEIGHT = 400
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)
pygame.display.set_caption("Box")

BLACK = (0, 0, 0)
RED = (255, 0, 0)
WHITE = (255, 255, 255)
size1 = 20
size2 = 2
#character = pygame.Rect(30, 30, 20, 30)
player = pygame.Surface((40,40))

pos1 = 100
pos2 = 100

MOVESPEED = 6

x = 1

while True:
    if pos1 == WINDOWWIDTH - 40 and pos1 > 0:
        pos1 -= 1
        x += 1
    elif pos1 < WINDOWWIDTH - 40 and x == 1:
        pos1 += 1
    elif x ==2:
        pos1 -= 1

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()
        if event.type == KEYDOWN:
            if event.key == K_LEFT:

                pos1 -= 5
            if event.key == K_RIGHT:
                pos1 += 4

    windowSurface.fill(WHITE)

    #screen.blit(character)

    windowSurface.blit(player, (pos1, pos2))
    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T20:08:17.997

您应该将以下代码放入“while True:”循环中的某处：

```
clock.tick([insert fps here]) 
```

并将其放在循环之前的某处：

```
clock=pygame.time.Clock() 
```

这将不允许循环运行超过您每秒输入的次数，并希望减慢多维数据集的速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:25:08.830

只是不要在循环的每次迭代中改变位置。

代替

```
while True:
  if ... :
    pos1 += 1
  ... 
```

使用这样的东西：

```
tmp = 0

while True:
  if ... :
    tmp += 1
    if tmp == 10:
      pos1 += 1
      tmp = 0
  ... 
```

或者

```
tmp = 0

while True:
  if ... and not tmp % 10:
      pos1 += 1
  ... 
```

您可以在其中调整`10`到适合您的值。

[此外，您可能希望限制程序的帧速率以使用Clock](http://www.pygame.org/docs/ref/time.html#pygame.time.Clock)获得（或多或少）恒定帧速率。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:26:53.730

毕竟，您可以使用浮点数来存储位置。将 while 循环中的更新值更改为更小的值，例如`pos1 += 0.25`. 然后只需确保 blit integers: `windowSurface.blit(player, (int(pos1), int(pos2)))`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T18:57:38.813

我通常也对大多数位置使用整数，但是当我说 pygame 将我的对象/精灵/...绘制到屏幕上时，我总是将位置除以 10，这样我就有 10 步的值，因为对象在屏幕上移动了一步.

组织这个并不难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-28T12:55:10.990

您可以拥有的最小速度是 1，但有一种方法可以通过控制时间来进一步减慢速度。

例如，每 100 毫秒而不是每帧以速度 1 移动框会使移动看起来明显变慢。

请参阅下面的实现：

```
# initialize clock object outside of main loop
clock = pygame.time.Clock()
time = 0

while 1:

    time = time + clock.get_time()
    if time >= 100:

        # Your movement implementation here

        time = 0 # Reset timer at the end 
```

# javascript - SMIL 动画在动态加载的外部 SVG 上失败

> ID：10942013
> 
> 赞同：1
> 
> 时间：2012-06-08T01:29:23.510
> 
> 标签：javascript, animation, svg, dom-events, smil

我创建了一个包含 3000 多个路径的怪物动画 SVG 文件。每个路径都使用声明性 SMIL 动画独立制作动画。它在所有新浏览器中播放缓慢但很漂亮，使用 IE9 的小 js 后备。（我会发布一个链接，但它不会澄清任何事情。）

我使用 HTML5 和内联 SVG 开发了该页面。就在我完成的时候，我意识到我不想强迫移动浏览器阻塞这个巨大的文件。因此，我将 svg 移至外部文件，并将所有 xml 声明重新添加进去。在页面中的重要信息已经呈现后，我使用一些条件逻辑和一些教科书 ajax 调用外部 svg：

```
function loadThatSvg(){
    var xhr = new XMLHttpRequest;
    xhr.open('get','floral.svg',true);
    xhr.onreadystatechange = function(){
        if (xhr.readyState === 4) {
            if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 ) {
                var flowers = xhr.responseXML.getElementById('floralpaths');
                var stage = document.getElementById('stage');
                stage.appendChild(flowers);
            }
        }
    };
    xhr.send(null);
}

window.onload = function(){
    setTimeout(loadThatSvg,3000);
} 
```

各种浏览器中的检查器工具显示文件正在正确加载。问题是动画永远不会被触发，所以什么也没有发生！它们在 DOM 中。我可以看到他们。*但是，在标记*中启动 SMIL 动画的任何计时器或事件似乎都不适用于*动态加载*的动画元素。

但后来我阅读了关于 Bugzilla 的[这个错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=628888)，它专注于这个用例，并表明问题已经解决（尽管对于我在 FF13 中的测试，它显然还没有解决）。唔...

是否有一些自定义函数或声明可用于在动态加载的 SVG 内容中启动 SMIL 动画的时钟？即使答案是明确的“不”，对于像我这样的人来说，知道一种或另一种方式也会很好。感谢您的澄清！

更新：

这是原始的svg文件。它适用于 FF、Opera 和 Webkit。请耐心等待：

[http://位。ly/LC3LEQ](http://socializepalmsprings.com/archivereference/floral-b.svg)

这是一个页面，它引用了来自同一个域的同一个 SVG 文件。我已经更改了`appendChild`我之前代码中的语句以包含一个`adoptNode()`方法，该方法使它在 FF13 和 Opera 11.64 中工作，但动画仍然从未在 webkit 中启动：

[http://位。ly/Mk0lnz](http://socializepalmsprings.com/archivereference/full23adoptedroot.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:27:04.840

有一些方法可以做到这一点。请注意，我假设您已经将动画文档插入到主文档中。

第一种方式，通过使用脚本启动动画：

*   获取要触发的每个动画元素，然后对其调用beginElement [()](http://www.w3.org/TR/SVG11/animate.html#InterfaceElementTimeControl)

第二种方法是重置文档中的当前时间，动画元素是相对的。这可能有效，您必须测试并查看：

*   获取动画文档的根 svg 元素，并在其上调用[setCurrentTime(0)](http://www.w3.org/TR/SVG11/struct.html#__svg__SVGSVGElement__setCurrentTime)

如果你选择第二个，但它不起作用，你也可以尝试暂停和取消暂停，如下所示：

*   获取动画文档的根 svg 元素（下面的变量“svgroot”）
*   调用 svgroot。[暂停动画（）](http://www.w3.org/TR/SVG11/struct.html#__svg__SVGSVGElement__pauseAnimations)
*   调用 svgroot。[设置当前时间（0）](http://www.w3.org/TR/SVG11/struct.html#__svg__SVGSVGElement__setCurrentTime)
*   调用 svgroot。[取消暂停动画（）](http://www.w3.org/TR/SVG11/struct.html#__svg__SVGSVGElement__unpauseAnimations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:11:04.830

Webkit 中有很多错误发生在这里：

[https://bugs.webkit.org/show_bug.cgi?id=82647](https://bugs.webkit.org/show_bug.cgi?id=82647)

[https://bugs.webkit.org/show_bug.cgi?id=74801](https://bugs.webkit.org/show_bug.cgi?id=74801)

我能够在 Webkit 中获得动画的唯一方法是遍历它们，从 svg 标记中获取目标值，然后使用 jquery animate() 手动为它们设置动画。没有一个 svg 特定的方法对我有用。

# database-design - Redis 数据库设计基础

> ID：10942015
> 
> 赞同：2
> 
> 时间：2012-06-08T01:29:25.447
> 
> 标签：database-design, redis

我设计了我的第一个 Redis 数据库，希望得到一些反馈、建议或提示。

**概述：**

我的 redis 数据库存储文章，以后可以按喜欢、创建日期、更新日期、作者等排序...

文章还包含“项目”我还需要确定哪些文章中包含至少 1 个项目。

**创建**

创建新文章时，我将其 ID 写入各种键

ZADD 'articles:created' 时间戳 ArticleID

ZADD 'articles:updated' 时间戳 ArticleID

ZADD '文章：喜欢' 0 ArticleID

SADD 'user:USERID:articles' ArticleID

每当更新文章时

ZADD 'articles:updated' 时间戳 ArticleID

每当将项目添加到文章时

ZADD 'articles:itemCount' ItemCount ArticleID

如果一个项目被删除，并且没有项目保留，我只需删除它的成员

ZREM 'articles:itemCount' 文章ID

因此，当涉及到排序时，我会执行以下操作：

1.  我使用 'articles:likes' 和 'articles:updated' 执行 ZUNIONSTORE
2.  结果我对结果和“articles:itemCount”执行 ZINTERSTORE
3.  结果我只需执行 ZREVRANGEBYSCORE

这一切都可以找到并做我想做的事情，但是我是 Redis 的新手，并且愿意接受建议和改进。

真挚地，

- 詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:21:44.910

我同意你的解决方案。

为了改进，请考虑`Transaction`

**创建**

> 多
> 
> ZADD 'articles:created' 时间戳 ArticleID
> 
> ZADD 'articles:updated' 时间戳 ArticleID
> 
> ZADD '文章：喜欢' 0 ArticleID
> 
> SADD 'user:USERID:articles' ArticleID
> 
> 执行

# jquery - 在 JQuery 中使用 SSRS 或 SSRS Web 服务

> ID：10942017
> 
> 赞同：1
> 
> 时间：2012-06-08T01:30:04.197
> 
> 标签：jquery, reporting-services

我想用 JQuery 使用 SSRS 报告，我必须使用 JQuery UI 组件，如表格图等。我只是想知道如何用 JQuery 实现这一点。我不想报告查看器控制。这是否可以将 JQuery 与 SSRS Web 服务一起使用并使用 JQuery UI 的所有功能，例如表格和图表以及效果等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:00:56.553

您可以通过点击包含参数的 URL 来直接运行您的报告以指定返回类型。从这里你可以以 XML 或 HTML 格式获取它，例如

```
http://zorro/ReportServer/?%2fEdgewoodLab%2fzPass_Params_with_HTML&rs:Command=Render&rs:Format=HTML 
```

您可能需要在客户端中编写一些函数来处理响应并可能将其解析为更有用的格式，但这至少允许您通过 URL 获取报告 + 数据。

查看[这篇文章](http://www.mssqltips.com/sqlservertip/1336/pass-parameters-and-options-with-a-url-in-sql-reporting-services/)，了解如何通过 URL 传递参数和检索您的报告。

或者，您可以[使用 SSRS 的数据馈送功能](http://technet.microsoft.com/en-us/library/ff519563.aspx)，它提供报告数据的 ATOM 馈送。这往往比 XML 或 HTML 输出表现得更一致，但需要更多的工作来解析。但是，您有机会获得一个 jQuery 插件来帮助解决这个问题。

查看[这篇文章](http://thinknook.com/convert-ssrs-graphs-to-highcharts-graphs-2012-01-21/)，它使用 ATOM 数据馈送来获取报告并使用 HighCharts JS 插件呈现它。

# algorithm - Perl 中的键更改时的总计

> ID：10942018
> 
> 赞同：2
> 
> 时间：2012-06-08T01:30:15.813
> 
> 标签：algorithm, perl, aggregate, pseudocode

我有一个格式如下的输入文件

```
ant,1
bat,1
bat,2
cat,4
cat,1
cat,2
dog,4 
```

我需要为每个键（column1）聚合 col2，所以结果是：

```
ant,1
bat,3
cat,7
dog,4 
```

其他注意事项：

1.  假设输入文件已排序
2.  输入文件非常大（大约1M行），所以我不想使用数组并占用内存
3.  每个输入行都应该在我们读取它时进行处理，并移至下一行
4.  我需要将结果写入 outFile
5.  我需要在 Perl 中执行此操作，但伪代码或算法会有所帮助

谢谢！

这就是我想出的......想看看这是否可以写得更好/优雅。

```
open infile, outFile

prev_line = <infile>;
print_line = $prev_line;

while(<>){
   curr_line = $_;

   @prev_cols=split(',', $prev_line);
   @curr_cols=split(',', $curr_line);

   if ( $prev_cols[0] eq $curr_cols[0] ){
      $prev_cols[1] += curr_cols[1];
      $print_line = "$prev_cols[0],$prev_cols[1]\n";
      $print_flag = 0;
   }
   else{
      $print outFile "$print_line";
      $print_flag = 1;
      $print_line = $curr_line;
   }
   $prev_line = $curr_line;
}

if($print_flag = 1){
   print outFile "$curr_line";
}   
else{
   print outFile "$print_line";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:40:43.377

```
#!/usr/bin/perl
use warnings;
use strict;
use integer;

my %a;
while (<>) {
    my ($animal, $n) = /^\s*(\S+)\s*,\s*(\S+)/;
    $a{$animal} += $n if defined $n;
}
print "$_,${a{$_}}\n" for sort keys %a; 
```

这段简短的代码让您有机会学习 Perl 出色的*哈希*工具，如`%a`. 哈希是 Perl 的核心。没有它们，一个人真的无法写出流利的 Perl。

顺便观察一下，代码执行了 Perl 有趣的*自动生存*功能。第一次在输入流中遇到特定动物时，不存在计数，因此 Perl 隐含地假定预先存在的计数为零。因此，`+=`操作员不会失败，即使它看起来应该失败。它只是在第一个实例中添加到零。

另一方面，可能不仅数据*的数量而且动物的数量*都非常大，以至于人们不想存储散列`%a`。在这种情况下，您仍然可以计算总数，前提是数据在输入中按动物排序，就像在您的示例中一样。在这种情况下，类似下面的东西可能适合（尽管遗憾的是它不像上面的那么整洁）。

```
#!/usr/bin/perl
use warnings;
use strict;
use integer;

my $last_animal = undef;
my $total_for_the_last_animal = 0;

sub start_new_animal ($$) {
    my $next_animal = shift;
    my $n = shift;
    print "$last_animal,$total_for_the_last_animal\n"
      if defined $last_animal;
    $last_animal = $next_animal;
    $total_for_the_last_animal = $n;
}

while (<>) {
    my ($animal, $n) = /^\s*(\S+)\s*,\s*(\S+)/;
    if (
        defined($n) && defined($animal) && defined($last_animal)
          && $animal eq $last_animal
    ) { $total_for_the_last_animal += $n; }
    else { start_new_animal $animal, $n; }
}
start_new_animal undef, 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T02:49:22.007

使用 Perl 的[*awk*模式](http://perldoc.perl.org/perlrun.html#%2a-a%2a)。

> *   **-一种**
> 
> `-n`与 a或一起使用时打开自动拆分模式`-p`。对数组的隐式`split`命令是在or产生`@F`的隐式循环中的第一件事。`while``-n``-p`
> 
> ```
> perl -ane 'print pop(@F), "\n";' 
> ```
> 
> 相当于
> 
> ```
> while (<>) {
>   @F = split(' ');
>   print pop(@F), "\n";
> } 
> ```
> 
> 可以使用 指定备用分隔符`-F`。

剩下的就是将总和累加到散列中并打印出来。

```
$ perl -F, -lane '$s{$F[0]} += $F[1];
    END { print "$_,$s{$_}" for sort keys %s }' input 
```

输出：

```
蚂蚁,1
蝙蝠，3
猫，7
狗，4
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:44:17.233

这在 perl 中是微不足道的。循环文件输入。用逗号分割输入行。对于第一列中的每个键，保留一个散列，将第二列中的值添加到该散列中。在文件末尾打印散列键及其值的列表。它可以在一行中完成，但这会混淆算法。

# google-chrome-devtools - 回发后 Chrome 开发者工具箱保存控制台日志

> ID：10942021
> 
> 赞同：2
> 
> 时间：2012-06-08T01:31:28.773
> 
> 标签：google-chrome-devtools

我正在使用 chrome 的开发人员工具来调试/测试我的应用程序。我注意到每次回帖后，控制台窗口中的日志似乎都清除了。无论如何要在回邮中坚持它们吗？例如，如果我有类似的东西

```
<input type="submit" onClick="RunMyCode();" /> 
```

“RunMyCode()” javascript 的最后一行类似于

```
console.log("Finished processing. About to submit"); 
```

这条线正在丢失。即，提交似乎完成，新页面加载，最后一页的日志消息丢失。

无论如何在开发人员工具的控制台窗口中保留/显示这些日志的运行列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:38:20.867

如果您右键单击控制台窗口，则有一个选项可以检查：`preserve log upon navigation`。

# linq - LINQ-2-SQL 如何“重用”子选择

> ID：10942022
> 
> 赞同：2
> 
> 时间：2012-06-08T01:31:30.543
> 
> 标签：linq, linq-to-sql

让我们假设：

*   我有一个 EVENT 表
*   我有一个 CLIENT 表
*   ADDRESS 表有一些列：UnitNo、StreetNo、StreetName、City、AddressType 等
*   客户有很多事件，客户也可以有很多地址

因此，如果我想用客户 HOME 地址街道名称查询事件列表，我就去

```
var qry = db.Events
            .Select(evt => new {
               EventAddress =
               evt.Client
                  .Addresses
                  .FirstOrDefault(a => a.AddressType.Equals("HOME")).StreetName
            }); 
```

但是，如果我想获得完整的地址，我需要连接多个地址字段。目前我正在尝试类似的东西

```
var qry = db.Events
            .Select(evt => new {
               EventAddress =
               evt.Client
                  .Addresses
                  .FirstOrDefault(a => a.AddressType.Equals("HOME")).StreetNo + " " +
               evt.Client
                  .Addresses
                  .FirstOrDefault(a => a.AddressType.Equals("HOME")).StreetName + " " +
               evt.Client
                  .Addresses
                  .FirstOrDefault(a => a.AddressType.Equals("HOME")).City
            }); 
```

它不起作用，看起来也很丑
有没有更好的方法来制作 `evt.Client.Addresses.FirstOrDefault(a => a.AddressType.Equals("HOME"))`“可重复使用”，所以我可以去

```
var qry =
    db.Events
      .Select(evt => new {
         EventAddress = 
         STUFF.StreetNo + " " + STUFF.StreetName + " " + STUFF.City
}); 
```

提前谢谢了！

休

**更新：**

感谢伊利安的回答，效果很好。基于此，我创建了答案的扩展版本

```
var qry =
    db.Events
      .Select(evt => new {
         EventAddress = 
         db.Addresses.Select(a => new
           {
             ClientId = a.ClientId,
             AddressType = a.AddressType,
             FullAddress = (a.addStreetNo ?? "") + (a.addStreetName ?? "")
           })
         .FirstOrDefault(a => a.ClientId == e.Client.ClientId && a.AddressType.Equals("HOME"))
         .FullAddress
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:49:50.333

使用查询语法：

```
var qry =
    from evt in db.Events
    let firstAddress = evt.Client.Addresses.FirstOrDefault(a => a.AddressType.Equals("HOME"))
    where firstAddress != null
    select new
    {
        EventAddress = firstAddress.StreetNo + " " +
                       firstAddress.StreetName + " " +
                       firstAddress.City
    } 
```

# linux - 从某处的文件中查找字符串

> ID：10942024
> 
> 赞同：0
> 
> 时间：2012-06-08T01:32:01.290
> 
> 标签：linux, terminal

我想从子目录中的某个文件中找到一个字符串。就像我们在 bundle/. 在 bundle/ 中有多个子目录和多个 txt 文件我想做类似的事情

```
 find . -type f -exec grep "\<F8\>" {} \; 
```

想要获取包含字符串 < F8 > 的文件

这个命令确实有效，找到字符串，但从不返回文件名我希望任何人都可以给我一个更好的解决方案，比如显示文件名以及包含该字符串的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:36:43.570

```
grep -rl '<F8>' . 
```

该`-r`选项告诉 grep 在目录中递归搜索`.`

该`-l`选项告诉它只显示匹配的文件名，而不是行本身。

您的输出将如下所示：

```
./thisfile
./foo/bar/thatfile 
```

如果要将其限制为仅一个文件，请附加`| head -1`到行尾。

如果你想要像这样的输出：

```
./thisfile:My text contains the <F8> string
./foo/bar/thatfile:didn't remember to press the <F8> key on the 
```

那么你可以放弃这个`-l`选项。请注意，此输出解析不安全，因为文件名可能包含冒号，并且文件名中的冒号不会在 grep 的输出中转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T01:33:45.410

您可以单独使用`grep`。

```
grep -r '<F8>' . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:36:48.387

这应该列出所有匹配的文件和行号：

```
grep -nR '<F8>' * 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T04:55:29.347

就个人而言，我发现它更容易使用`ack`. （`ack-grep`是 Ubuntu 存储库中使用的名称，以免与其他同名软件混淆。）它在大多数主要存储库中都可用。

该命令将是`ack -a "<F8>"`（或`ack-grep -a "<F8>"`在 Ubuntu 中）。选项是`-a`搜索所有文件类型。

例子：

**测试文件**

```
Line 1
Line 2
Line 3
<F8>
<F9>
<F10>
Line 4
Line 5
Line 6 
```

**输出：**

```
$ ack -a "<F8>"
testfile
4:<F8> 
```

# javascript - 图像未在第一次函数调用时显示 - HTML5/Canvas

> ID：10942025
> 
> 赞同：1
> 
> 时间：2012-06-08T01:32:07.773
> 
> 标签：javascript, image, html, google-chrome, canvas

当我单击按钮时，以下代码应在网格中显示图像。问题是我必须单击按钮两次才能看到图像。即使图像没有显示，我也会在两个函数调用中获得日志输出。这是怎么回事？

编辑：我发现只有在打开 chrome 开发人员工具时才会出现问题，所以这不是 javascript 问题。

EDIT2：除了接受的答案，这个链接帮助了我：[Javascript Canvas Element - Array Of Images](https://stackoverflow.com/questions/1360392/javascript-canvas-element-array-of-images)

```
<html>
    <head>
        <title>Canvas Test</title>

        <script>
            function init() {
                var canvas = document.getElementById("canvas");
                context = canvas.getContext("2d");
                images = new Array();
            }

            function drawImage() {
                for (var i = 0; i < 12; i++) {
                    for (var j = 0; j < 12; j++) {
                        var index = i*12 + j;
                        images[index] = new Image();
                        images[index].src = 'image.jpg';
                        images[index].onload = function(image, index, i, j) {
                            console.log(index);
                            context.drawImage(image, i * 20, j * 20, 20, 20);
                            console.log("Loading image: " + image.src);
                        } (images[index], index, i, j);
                    }
                }
            }
        </script>

    </head>
    <body onload="init();">
        <canvas id="canvas" width="300px" height="300px" style="border: solid;"></canvas>
        <button onclick="drawImage();">Display Image</button>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:39:16.343

实际上你的代码有效。但有时图片未加载，您必须单击两次按钮。

[在这里试试。](http://jsfiddle.net/DerekL/W5cBn/3/)

* * *

2个问题：

*   第一的，

```
function(image, index, i, j) {
    console.log(index);
    context.drawImage(image, i * 20, j * 20, 20, 20);
    console.log("Loading image: " + image.src);
}(images[index], index, i, j); 
```

这将以正确的方式触发，因为`()`最终意味着运行它。这就是为什么你必须点击它两次。

*   第二，`src`应该排在最后。（[MDN](https://developer.mozilla.org/en/Canvas_tutorial/Using_images#Creating_an_image_from_scratch)）（但实际上没关系）

要修复它，您必须使该功能不会立即运行。此外，由于它位于循环内部并且使用范围变量，因此需要格外小心。请参阅演示中的代码。

　[**>固定演示！<**](http://jsfiddle.net/DerekL/W5cBn/4/)

# datagridview - 限制datagridview中的重复行

> ID：10942029
> 
> 赞同：0
> 
> 时间：2012-06-08T01:33:12.930
> 
> 标签：datagridview, duplicates

我有第一列作为组合框的 Datagridview。如何限制用户从列表中仅选择一项。因此，如果在第一行中用户已经选择了“香蕉”，则在第二行中不应允许香蕉（可能会显示一个消息框，说“香蕉已经存在”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:45:20.707

这是使用`CellValidating`事件的简单解决方案：

```
void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    if (e.ColumnIndex == dataGridView1.Columns["MyCombo"].Index)
    {
        var query = from DataGridViewRow row in dataGridView1.Rows
                    where row.Cells[e.ColumnIndex].Value != null && row.Cells[e.ColumnIndex].Value.ToString() == e.FormattedValue.ToString()
                    where row.Index != e.RowIndex
                    select row;

        if (query.Any())
        {
            MessageBox.Show(string.Format("{0} already exists", e.FormattedValue.ToString()));
            e.Cancel = true;
        }
    }
} 
```

当用户试图离开包含组合框的单元格时触发此事件 - 另一种选择是在用户使用`RowValidating`事件离开当前行时执行类似的操作。

# android - Android 无法暂停活动接收器未注册

> ID：10942031
> 
> 赞同：5
> 
> 时间：2012-06-08T01:33:38.487
> 
> 标签：android, exception

这个错误的原因是什么：

```
 java.lang.RuntimeException: Unable to pause activity { 
com.test/com.test.activities.MyActivity}: java.lang.IllegalArgumentException: 
        Receiver not registered: android.widget.VideoView$EventReceiver@98976  at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354)  at
        android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)  at
        android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)  at
        android.app.ActivityThread.access$1700(ActivityThread.java:117)  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)  at 
        android.os.Handler.dispatchMessage(Handler.java:99)  at 
        android.os.Looper.loop(Looper.java:130)  at
        android.app.ActivityThread.main(ActivityThread.java:3683)  at 
        java.lang.reflect.Method.invokeNative(Native Method)  at
        java.lang.reflect.Method.invoke(Method.java:507)  at 
        com.android.internal.os.ZygoteInit$MethodAndArg… 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:14:53.957

您的活动是否与服务相关联？如果是这样，请检查您是否没有从服务中解除绑定两次。

我有一个类似的问题，我的活动在启动/暂停时需要绑定和取消绑定。暂停时调用 unbind 太多次并抛出该错误。

希望这可以帮助

# c - sbrk(size_t) 中的分段错误

> ID：10942041
> 
> 赞同：0
> 
> 时间：2012-06-08T01:34:37.307
> 
> 标签：c, linux, memory-management, malloc, sbrk

我的程序很简单，

```
...
#define TO_INT(a) (*(int *)a)
void *pool_head;
void *pool_tail;
...

pool_head = sbrk(BUF_LENGTH);
if (pool_head == (void *)-1) {
    errno = ENOMEM;
    return pool_head;
}
pool_tail = sbrk(0);
TO_INT(pool_head)     = BUF_LENGTH * -1;
TO_INT((pool_tail - 3)) = BUF_LENGTH * -1; 
```

当我调试它时，它显示：

`Program received signal SIGSEGV, Segmentation fault.`在`TO_INT((pool_tail - 3)) = BUF_LENGTH * -1;`

pool_tail & pool_head 的值：

`pool_tail = 0x805a000`

`pool_head = 0x804a000`

如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:42:22.347

首先，您不能对 执行指针算术 ( `pool_tail - 3`) `void *`。

其次，即使我们允许它并将其`pool_tail`视为`char *`，减去`pool_tail`3 也不会提供足够的空间来容纳`int`。

# ruby - Rails 在数据库中向 has_many 关联添加记录失败

> ID：10942045
> 
> 赞同：1
> 
> 时间：2012-06-08T01:35:29.870
> 
> 标签：ruby, database, ruby-on-rails-3, has-many

我创建了通过 has_many/belongs_to 关系关联的 Trainer 和 Client 模型：Trainer has_many Clients 和 Client belongs_to Trainer。但是，当尝试使用 将现有客户端添加到现有培训师`Trainer.Clients << Client`时，它不会保存到数据库中。

客户型号：

```
class Client < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation, :trainer_id
  has_secure_password
  belongs_to :trainer

  validates :name, presence: true, length: { maximum: 40 }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true, length: { minimum: 6 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                uniqueness: { case_sensitive: false }

  before_save { |client| client.email = email.downcase }
end 
```

教练机型号：

```
class Trainer < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  has_many :clients

  validates :name, presence: true
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, 
                                                                    uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true, length: { minimum: 6 }

  before_save { |trainer| trainer.email = email.downcase } 
end 
```

数据库中的Client表有一个foreign_id trainer_id：

```
create_table "clients", :force => true do |t|
  t.string   "name"
  t.string   "email"
  t.datetime "created_at",      :null => false
  t.datetime "updated_at",      :null => false
  t.string   "password_digest"
  t.integer  "trainer_id"
end 
```

在控制台中，当我尝试将客户记录添加到培训师时，无法保存到数据库：

```
1.9.3-p194 :001 > trainer = Trainer.find(2)
  Trainer Load (30.1ms)  SELECT "trainers".* FROM "trainers" WHERE "trainers"."id" = ? LIMIT 1  [["id", 2]]
 => #<Trainer id: 2, name: "Noah Macejkovic", email: "trainer-1@mp-trainer.com", created_at: "2012-06-06 20:40:45", updated_at: "2012-06-06 20:40:45", password_digest: "$2a$10$bDL0ealWYdsxpN2jOyToCO9T/WKsI4I7WXdhRXQBvcP1..."> 

1.9.3-p194 :002 > client = Client.find(2)
  Client Load (0.2ms)  SELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1  [["id", 2]]
 => #<Client id: 2, name: "Katherine Skiles V", email: "client-1@example.com", created_at: "2012-06-06 20:40:54", updated_at: "2012-06-06 20:40:54", password_digest: "$2a$10$47CUSOS3k5j1c.DjH2PP7uqHD6kM94rZHMco37X34li/...", trainer_id: nil> 

1.9.3-p194 :003 > trainer.clients << client
   (0.1ms)  begin transaction
  Client Exists (0.4ms)  SELECT 1 FROM "clients" WHERE (LOWER("clients"."email") = LOWER('client-1@example.com') AND "clients"."id" != 2) LIMIT 1
   (0.1ms)  commit transaction
 => false 
```

如果我在交易后立即查询客户端，它会显示 trainer_id

```
1.9.3-p194 :004 > client
 => #<Client id: 2, name: "Katherine Skiles V", email: "client-1@example.com", created_at: "2012-06-06 20:40:54", updated_at: "2012-06-06 20:40:54", password_digest: "$2a$10$47CUSOS3k5j1c.DjH2PP7uqHD6kM94rZHMco37X34li/...", trainer_id: 2> 
```

但是从数据库重新加载后，trainer_id 为 nil（正如预期的那样，因为从`trainer.clients << client`.

```
1.9.3-p194 :006 > client.reload
  Client Load (0.2ms)  SELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1  [["id", 2]]
 => #<Client id: 2, name: "Katherine Skiles V", email: "client-1@example.com", created_at: "2012-06-06 20:40:54", updated_at: "2012-06-06 20:40:54", password_digest: "$2a$10$47CUSOS3k5j1c.DjH2PP7uqHD6kM94rZHMco37X34li/...", trainer_id: nil> 
```

所以问题的关键是“为什么提交到数据库失败？”

# javascript - Javascript/jQuery 新手错误与 mouseenter 事件导致语法错误

> ID：10942047
> 
> 赞同：4
> 
> 时间：2012-06-08T01:36:06.483
> 
> 标签：javascript, jquery, syntax, syntax-error

我正在尝试在`mouseenter`触发事件时应用样式，但是如果我取消注释以下未触及的选择器 - 即使文档准备就绪也会停止工作。

```
<body>
<div id="1" class="button untouched"></div>
<script src="/jquery.js"></script>
<script>
$(document).ready(function(){
    alert("JQuery is working");
});

/*
$(".untouched").mouseenter($function(){
    $(this).addClass("touched");
});
*/
</script>
</body> 
```

我正在关注在以下位置找到的示例：

[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

我[在 Firebug 中收到以下错误](http://jsfiddle.net/cxeFa/)：

```
missing ) after argument list
[Break On This Error]   

$(".untouched").mouseenter($function(){ 
```

由于它不起作用，我犯了一个错误，但我不知道是什么。我所知道的是，如果我让它运行，我的代码都不起作用。我下载了最新的 1.7.2 版本的 jQuery，我知道它在页面上可用，因为`alert()`与其他运行一起被注释掉了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T01:39:57.950

函数前面不需要 $ 。此外，mouseenter 事件函数代码应该在文档内准备好。

```
<script>
     $(document).ready(function(){
         alert("JQuery is working");

         $(".untouched").mouseenter(function(){
             $(this).addClass("touched");
         });
     });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:39:09.087

在您的脚本中，该`$(".untouched")`部分应该在`ready`函数内。还，

`mouseenter($function(){`$ 符号不正确。

您的最终脚本应如下所示：

```
$(document).ready(function(){
    alert("JQuery is working");

    $(".untouched").mouseenter(function(){
        $(this).addClass("touched");
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T01:40:40.210

你有一个额外的`$`你不应该在这个词前面`function`。您可能还想删除`untouched`该类：

```
$(".untouched").mouseenter(function(){
    $(this).removeClass("untouched").addClass("touched");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T01:49:19.770

您可以从 css 轻松执行此操作

```
 .untouched 
       {
       background: green;
      }

    .untouched :hover
      {
       background: blue
       } 
```

在 JQuery 中，如果您想使用 .mouseover ，您需要使用函数 - 一个用于将鼠标悬停时，一个用于鼠标未悬停时。这在 css 中更容易，只有一个 :hover 过滤器

```
 $('.untouched').mouseover(function() {
               $(this).addClass('touched');
                     });
       $('.untuoched').mouseout(function() {
              $(this).removeClass('touched');
                      }); 
```

# perl - Perl 模块比较两个 URL 的根域

> ID：10942048
> 
> 赞同：1
> 
> 时间：2012-06-08T01:36:18.890
> 
> 标签：perl, url, module, dns

我想知道是否有一个 Perl 模块可以检测两个 URL 是否属于同一个根域，例如`http://services.bestbuy.com/`，`http://espanol.bestbuy.com/`它们都将被视为具有相同的根域。

我知道使用正则表达式是可能的，但如果已经有一个模块可以做到这一点，我会更喜欢它！我还没有找到任何东西。

有谁知道任何好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:31:55.443

我会使用[Domain::PublicSuffix](http://search.cpan.org/perldoc?Domain%3a%3aPublicSuffix)。

```
use feature qw( say state );

use Domain::PublicSuffix qw( );
use URI                  qw( );

# Accepts urls as strings and as URI objects.
sub url_root_domain {
   my ($abs_url) = @_;
   state $parser = Domain::PublicSuffix->new();
   return $parser->get_root_domain( URI->new($abs_url)->host );
}

my $url1 = 'http://services.bestbuy.com/';
my $url2 = 'http://espanol.bestbuy.com/';

say url_root_domain($url1) eq url_root_domain($url2) ? "same" : "diff"; 
```

# android - 运行junit测试时是否可以进入android的调试模式？

> ID：10942049
> 
> 赞同：13
> 
> 时间：2012-06-08T01:36:20.087
> 
> 标签：android, junit, tdd, android-testing

通常我使用`adb shell am instrument -w com.android.contacts.tests/android.test.InstrumentationTestRunner`. 它确实有效，它将运行我所有的测试。

但是当我在运行junit时设置断点并希望进入调试模式时，它失败了。当我调试普通的android应用程序时，我制作断点的方式有效。

所以我搜索了网页，并尝试了类似的东西`adb shell am instrument -e debug true -e class com.android.contacts.AndroidUtilsTest -w com.android.contacts.tests/android.test.InstrumentationTestRunner`，但仍然没有运气。你的如何解决这个问题？我不仅想调试junit类，还想调试普通项目中的代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T01:56:09.227

我猜您正在尝试使用 Eclipse 调试您的测试。如果是这种情况，您只需选择您的测试项目，右键单击，***Debug As... -> Android JUNit 测试***，执行将在您在测试或代码中设置的断点处停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T01:49:11.013

我刚刚找到了答案。当我启动仪器时它会阻塞，因为它正在等待我设置断点。所以在我设置断点之后，junit 开始运行。所以调试一个android junit项目的顺序是：

1.  在调试设置为 true 的情况下启动仪器。
2.  使用命令行或 eclipse 设置断点。
3.  仪器将开始自动运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-07T15:14:18.933

要调试 Android JUnit 测试，不要忘记放入`debuggable=true`可测试的项目。

# jquery - 如何检测单击了哪个单选按钮（动态）以及如何获取值

> ID：10942051
> 
> 赞同：0
> 
> 时间：2012-06-08T01:36:34.130
> 
> 标签：jquery

我有一些动态单选按钮，现在我的问题是如何检测选择/单击了哪个单选按钮以及如何获取所选单选按钮的值？我的代码：

```
<div class="well sidebar-nav  rbatch">
<ul class="nav nav-list">
<li class="nav-header">
<?php
  include 'connect.php';
  $result = mysql_query('select * from batches');       
  $index=0;
  while($row=mysql_fetch_array($result))
  echo "<label class='radio'>
       <input type='radio' id='".$index++."'> Check me out
    </label>"           
?>
</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:45:51.097

[http://jsfiddle.net/ctFt7/](http://jsfiddle.net/ctFt7/)

您的单选按钮必须具有相同的名称，以便在任何时候只能选择 1 个按钮。

```
$('input[type="radio"]').on('change',function(){
            alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T01:43:27.260

试试这个：

```
$('input:radio').change(function(){
   var id = $(this).attr('id');
   var val = $(this).val()
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:42:44.517

简单的。做这样的事情：

```
​$(function() {
    $('input[type=radio]').on("change",function() {
        alert($(this).val());
    });  
});​ 
```

查看[演示](http://jsfiddle.net/WvWCn/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T01:43:49.477

```
$("input:radio").attr("checked").each(function()
{
           alert($(this).val());    
}); 
```

# objective-c - iOS 颜色数组检索错误

> ID：10942061
> 
> 赞同：1
> 
> 时间：2012-06-08T01:37:43.897
> 
> 标签：objective-c, ios, uiview, colors

我正在尝试有一个按钮来切换按钮的颜色。由于某种原因，下面的代码不起作用......

```
**//Header (.h)**
    @property UIColor *imageColor1;
    @property UIColor *imageColor2;    
    @property UIButton *button1;
    @property UIButton *button2;    
    @property CGRect viewBounds;
    -(IBAction)changeColor:(id)sender;    
    -(IBAction)createButton;

**//Implementation (.m)**
    @synthesize imageColor1;
    @synthesize imageColor2;
    @synthesize button1;
    @synthesize button2;
    @synthesize viewBounds;

    -(IBAction)createButton{
        self.viewBounds = self.view.bounds;

        self.button1 = [UIButton buttonWithType:UIButtonTypeCustom];
        self.button1.frame = CGRectMake(CGRectGetMidX(self.viewBounds)-30, CGRectGetMidY(viewBounds)-15, 60, 30); 
        self.button1.backgroundColor = self.imageColor1;
        [self.view addSubview:button1];

        self.button2 = [UIButton buttonWithType:UIButtonTypeCustom];
        self.button2.frame = CGRectMake(CGRectGetMidX(self.viewBounds)-15, CGRectGetMidY(viewBounds)-30, 30, 60); 
        self.button2.backgroundColor = self.imageColor2;          
        [self.view addSubview:button2];

    }

    -(IBAction)changeColor:(id)sender{

       int changeCount = 0;
       int changeCount1 = 1;
       NSArray *colors = [[NSArray alloc] initWithObjects:[UIColor redColor],[UIColor blueColor],[UIColor yellowColor],[UIColor                  magentaColor],[UIColor greenColor],[UIColor orangeColor],[UIColor purpleColor], nil];
       if(changeCount < 7){
          imageColor1 = [colors objectAtIndex:changeCount];
       }
       else{
          changeCount = changeCount - 5;
          imageColor1 = [colors objectAtIndex:changeCount];
       }
       if(changeCount1 < 7){
          imageColor2 = [colors objectAtIndex:changeCount1];
       }
       else{
          changeCount1 = changeCount1 - 5;
          imageColor2 = [colors objectAtIndex:changeCount1];
       }
       changeCount++;
       changeCount1++;
    } 
```

基本上，每当用户点击“更改颜色”按钮时，变量`changeCount`并`changeCount1`增加它们的计数，并且中的值`self.imageColor1`会`self.imageColor2`更改为数组中的后续值`colors`。出于某种原因，此代码不起作用，颜色也不会改变。该`createButton`方法有效，因为每当我按下它时，都会出现一个新按钮，但如果我创建一个按钮然后按下更改颜色按钮然后创建另一个按钮，新按钮的颜色仍然相同。所以基本上我需要知道我的代码有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T01:47:21.117

那是因为您每次都重置 changeCount 和 changeCount1 变量。请注意您重新创建它们并在开始时将它们设置为 0 和 1？所以他们当然永远不会改变。您正在创建它们，就好像它们是静态变量一样，但它们不是。它们是局部变量。NSArray 可以是静态的，但计数变量最好作为成员变量（即在您的接口中定义）。

# assembly - 在 avr tiny 中，当微控制器通电时，如何初始化存储在 sram 中的数据？

> ID：10942063
> 
> 赞同：5
> 
> 时间：2012-06-08T01:37:51.007
> 
> 标签：assembly, avr, avr-gcc

首先是一些背景。在 avr tiny 中，数据可以存储在寄存器、sram、eeprom 或程序空间中。寄存器和 sram 是易失性存储器，而 eeprom 和程序空间则不是。（即：未通电时数据保持不变。）

在 c 中编程时（使用 avr-gcc 库），典型的代码可能如下所示：

```
#define F_CPU 8000000UL
#include <inttypes.h>
#include <avr/io.h>
#include <avr/pgmspace.h>
#include <avr/eeprom.h>

//This data is put in the eeprom
const uint8_t dat_eeprom EEMEM= 0xab;
//This data is put in the program space
const uint8_t dat_pgm_space PROGMEM= 0xcd;
//This data is stored in the sram
uint8_t dat_sram = 0xef;

int main(){
    while(1){
    ;;
    }
} 
```

编译：

```
avr-gcc -g -mmcu=attiny44 -o test.elf test.c 
```

并从 .elf 中提取一个 intel .hex ：

```
avr-objcopy -j .text -j .data -O ihex test.elf test.hex 
```

我们得到以下 test.hex ：

```
:1000000011C023C022C021C020C01FC01EC01DC0FF
:100010001CC01BC01AC019C018C017C016C015C01C
:1000200014C0CD0011241FBECFE5D1E0DEBFCDBF8F
:1000300010E0A0E6B0E0EAE5F0E002C005900D9225
:10004000A236B107D9F702D006C0DACFCF93DF933B
:0A005000CDB7DEB7FFCFF894FFCF65
:02005A00EF00B5
:00000001FF 
```

以及以下反汇编：

```
00000000 <.sec1>:
0:  11 c0           rjmp    .+34        ;  0x24
      <...skipped interrupt vector table...> 
20: 14 c0           rjmp    .+40        ;  0x4a
22: cd 00           .word   0x00cd  ; this is our data stored in the program mem.
24: 11 24           eor r1, r1  
26: 1f be           out 0x3f, r1    ; 63
28: cf e5           ldi r28, 0x5F   ; 95
2a: d1 e0           ldi r29, 0x01   ; 1
2c: de bf           out 0x3e, r29   ; 62
2e: cd bf           out 0x3d, r28   ; 61
30: 10 e0           ldi r17, 0x00   ; 0
32: a0 e6           ldi r26, 0x60   ; X register low byte ; address of dest. in
34: b0 e0           ldi r27, 0x00   ; X register high byte; sram
36: ea e5           ldi r30, 0x5A   ; z register low byte ; address of data in 
38: f0 e0           ldi r31, 0x00   ; z register high byte; program memory
3a: 02 c0           rjmp    .+4         ;  0x40
3c: 05 90           lpm r0, Z+
3e: 0d 92           st  X+, r0
40: a2 36           cpi r26, 0x62   ; 98
42: b1 07           cpc r27, r17
44: d9 f7           brne    .-10        ;  0x3c
          <...skipped rcall to main...>
5a: ef 00           .word   0x00ef  ; this is our data that
                                      should be stored in the sram. 
```

那么我们想要放入 sram 的数据（0xef）是如何初始化的呢？
答案是通过 main 之前的例程。

应存储在 sram 中的数据位于程序空间中的地址 0x5a。它以下列方式放入 sram 中：

1.  x 寄存器的高字节和低字节设置为我们要在 sram 中放入数据的地址。（0x60）注意这个地址不在程序存储器中，而是在数据存储器中。
2.  z 寄存器相同，但数据在程序空间中的地址（0x5a）
3.  存储在 z 寄存器中的地址处的程序存储器内容通过 lpm 操作码加载到寄存器 r0 中。请注意，z 寄存器值递增以指向（最终，这里没有）要加载到 sram 中的下一个数据。
4.  然后将 r0 中的数据存储在 sram 中存储在 x 寄存器中的地址处。
5.  重复直到所有应该在 sram 中的数据都被初始化。

这发生在对 main 的 rcall 之前。

有更好/更清晰的答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:23:30.407

对，在 gnu 工具世界中，当然与其他工具类似。

链接器获得 .text、.data、.bss 数据，并且必须将其放入二进制文件中。对于基于闪存的系统，没有什么特定于 avr，所有平台都相同，所有非易失性信息都必须在闪存上。链接器脚本告诉链接器 .data 段有两个主目录，一个主目录用 .text 和闪存中的其他任何内容附加，然后是 ram 地址空间中的一个主目录。您使用一些关键字制作链接器脚本，链接器将这些关键字填充到引导代码中的外部变量（调用 main 的 asm）。此代码在调用 main 之前使用这些变量将 .data 复制到 ram 并将 .bss 归零，以便 C 语言假设（未初始化变量为零，初始化变量是您的代码将它们初始化为的变量）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T02:05:19.780

如果你想在你的 SRAM 中存储数据，你的程序必须把它放在那里。

在那里，为你做到了。

# objective-c - MFMailComposeViewController mailComposeDelegate 的完成块语法是否可行？

> ID：10942072
> 
> 赞同：1
> 
> 时间：2012-06-08T01:39:21.130
> 
> 标签：objective-c, ios, objective-c-blocks, mfmailcomposeviewcontroller

我想将[MFMailComposeViewController](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html) `mailComposeDelegate`属性与完成块语法一起使用，但不确定这是否可能。类似于[TWTweetComposeViewController](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TWTweetSheetViewControllerClassRef/Reference/Reference.html) `completionHandler`属性的工作方式：

```
TWTweetComposeViewController __weak *twee = tweeter;
tweeter.completionHandler = ^(TWTweetComposeViewControllerResult result) {
    // code here
}; 
```

我创建的代码创建了 MFMailComposeViewController，但随后必须保存对我的`viewController`参数的引用，因为此“通过电子邮件共享”功能不在 a 中`UIViewcontroller`，而是在自定义`MYSharing`类中。

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
// more code here
_viewController = viewController;
picker.mailComposeDelegate = self;
[viewController presentModalViewController:picker animated:YES]; 
```

来自[MFMailComposeViewControllerDelegate](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/MFMailComposeViewControllerDelegate)使用它`mailComposeController:didFinishWithResult:error:`来关闭模式。`_viewController`

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
    [_viewController dismissModalViewControllerAnimated:YES];
} 
```

不是很好理解块，有没有一些看起来像这样的语法？

```
picker.mailComposeDelegate = ^(???)(??? ??? ???) {
    [viewController dismissModalViewControllerAnimated:YES];
} 
```

我确实找到了[MFMailComposeViewController(BlocksKit)](http://zwaldowski.github.com/BlocksKit/Documentation/Categories/MFMailComposeViewController+BlocksKit.html)（在 github 上有源代码），但即便如此，语法转换还是让我感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:56:05.050

现在没有 MFMailComposeViewController 的完成处理程序。

如果你想引用呈现 MFMailComposeViewController 的视图控制器，如下代码，使用 presentingViewController 属性。

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {
    [controller.presentingViewController dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T07:47:14.783

你为什么不直接`[self dismissModalViewControllerAnimated:YES];`从`MFMailComposeViewControllerDelegate`方法中调用？

# c# - 当我尝试在 C# 程序中上传文件时出现错误消息“外部表不是预期的格式”

> ID：10942074
> 
> 赞同：1
> 
> 时间：2012-06-08T01:39:30.290
> 
> 标签：c#, excel, datagridview, oledb, dataadapter

我正在创建一个 C# 程序，我可以在其中浏览文件并将其查看到 C# 中的 datagridview 中。我已经对其进行了多次测试，并且效果很好。但是昨天当我再次尝试执行此操作时，会显示一条错误消息，说明“ **Provider=Microsoft.Jet.OLEDB.4.0;** ”。我正在测试的文件与我之前使用的文件相同（没有错误）。我没有对文件（excel文件）做任何事情。

这是错误消息的打印屏幕： ![在此处输入图像描述](../Images/3c782eb499ef4e36a7e2af4a94f4b5df.png)

这是我使用的代码：

```
 private void buttonUpload_Click(object sender, EventArgs e)
    {
        string OleDBConnection = String.Format(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;""", textBoxFileName.Text);

        string query = String.Format("select * from [{0}$]", "Sheet1");

        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(query, OleDBConnection);

        DataSet dataSet = new DataSet();

        dataAdapter.Fill(dataSet);

        dataGridView1.DataSource = dataSet.Tables[0];

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:49:14.230

```
 If Path.GetExtension(pth).ToLower().Equals(".xls") Then
     strcon = "Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & pth & ";Extended Properties=""Excel 8.0;HDR=YES;IMEX=1;"""
 Else
     strcon = "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" & pth & ";Extended Properties=""Excel 12.0;HDR=YES;IMEX=1;"""
 End If 
```

# html - 固定背景图像的对齐问题

> ID：10942075
> 
> 赞同：0
> 
> 时间：2012-06-08T01:39:30.960
> 
> 标签：html, css

不完全确定如何在这里首先表达这个问题，但我会试一试。

我有一个图像，我想固定向下滚动页面，当它进入具有不同颜色背景的第二个 div 时，我想平滑地更改颜色。我已经对 div 进行了排序，图像放置得很好，我想要的效果也很好——我现在唯一的问题是，由于使用百分比等，我无法在我的一生中对齐这两个图像。

我在这里有一个工作示例，您当然需要查看 - [jsFiddle](http://jsfiddle.net/EtJBn/61/) - 您可能需要稍微调整页面大小以了解我遇到的特定对齐问题。顶部的“Hello”偏离中心位置，我想用第二个“Hello”来实现。我就是不能让它发生！有什么建议么？我一直在寻找可能的 jQuery 解决方案，但到目前为止还没有运气。

非常感谢您提供任何答案。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:35:14.137

**现场演示链接在这里** [http://jsfiddle.net/EtJBn/107/](http://jsfiddle.net/EtJBn/107/)

嗨，现在你可以轻松做到这一点

只需像这样定义一些属性

**CSS**

```
html, body {
    height:100%;
}

#top{
    height:100%;
    width:100%;
}

#bottom{

    height:100%;
    width:100%;
    background-color:black;
    z-index:200;
}

#topsq {
    position:fixed;
    height:175px;
    background:url("http://mattwaymouth.com/images/hello_small.png") no-repeat center top;
    left:0;
    top:50px;
    right:0;
    z-index:1;

}    

#second {
    position:relative;
    background: url("http://mattwaymouth.com/images/hello_small_green.png")  no-repeat center 50px fixed;         
    left:0;
    top:0;
    right:0;
    z-index: 200;
        height:300px;
} 
```

**HTML**

```
<div id="top">
    <div id="topsq"></div>
</div>

<div id="bottom">
    <div id="second"></div>
</div> 
```

**现场演示** [http://jsfiddle.net/EtJBn/107/](http://jsfiddle.net/EtJBn/107/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:41:11.383

好。似乎我找到了一个解决方案，虽然我不会称之为理想。不过效果很好！在乍得说要尝试之后，`background-position: left center;`我意识到如果我只是将图像设置为**`background-position: center;`**并让图像在一侧有一堆空白空间，在 Photoshop 上进行足够的操作，我可以设法将两者对齐。现在效果很好，在我所有的浏览器中都完美排列。

这是示例 - [jsFiddle](http://jsfiddle.net/EtJBn/100/)（尽管您看不到它有太多变化，因为必须更改图像本身。）

谢谢大家的回复。

# django - Nginx Django csrf_token 获取 502 错误无效标头

> ID：10942078
> 
> 赞同：0
> 
> 时间：2012-06-08T01:39:39.913
> 
> 标签：django, nginx, pinax, uwsgi, django-csrf

我有一个使用 Pinax 开发的 Django 站点。当我在 apache+mod_wsgi 中部署它时，它工作正常。但是当我在 nginx+uwsgi 中部署它时，它几乎可以正常工作，但是页面包含一个`{% csrf_token %}`标签。崩溃的页面不会显示 Django 错误页面，而是显示 Nginx 502 错误页面。Nginx 错误日志是：

> 2012/06/08 09:11:59 [错误] 30224#0: *79 上游从上游读取响应标头时发送了无效标头，客户端：211.142.12.3，服务器：mysite.com，请求：“GET /discuss/ HTTP /1.1”，上游：“uwsgi://127.0.0.1:9001”，主机：“mysite.com”，引用者：“http://mysite.com/”

uwsgi 显示：

> {地址空间使用：42319872 字节/40MB} {rss 使用：22573056 字节/21MB} [pid: 21398|app: 0|req: 1/3] 110.178.82.221 () {42 vars in 988 bytes} [Fri Jun 8 18:27:01 2012] GET /discuss/ => 在 2306 毫秒内生成 31139 个字节（HTTP/1.1 200） 358 个字节中的 5 个标头（1 个在核心 0 上切换）

错误发生在 GET 请求上，而不是 POST 请求上。我对此进行了测试-当我`csrf_token`从模板中删除令牌时，就可以了。因此，令牌和错误之间必须存在关系，而不是其他任何东西。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:39:27.007

好的，解决了。我通过编译源代码安装了 uwsgi。现在我删除了那个版本，然后使用 重新安装它`pip install uwsgi`，一切都很好！

# ruby-on-rails - 如何在 Ruby 中合并和排序 YML 文件中的键？

> ID：10942089
> 
> 赞同：2
> 
> 时间：2012-06-08T01:41:25.187
> 
> 标签：ruby-on-rails, ruby, yaml

假设您有一个这样的 YML 文件：

```
en:
  thanksgiving:
    turkey: 'Turkey'
    stuffing: 'Stuffing'
  christmas:
    ham: 'Bring ham'
  thanksgiving:
    beer: 'lots of beer' 
```

并且您想使用 ruby​​ 基本上像这样读取、合并和重写该 YML：

```
en:
  thanksgiving:
    turkey: 'Turkey'
    stuffing: 'Stuffing'
    beer: 'lots of beer'
  christmas:
    ham: 'Bring ham' 
```

实现这一目标的最好/最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:26:56.833

您需要解析文件以获取节点表示：

```
yml = YAML.parse( open('c:\temp\foo.yml')) 
```

该`yml`变量包含整个结构。示例：键入以下内容将打印实际的整个文件内容

```
pp yml 
```

检查结果后，我能够编写一个安全的序列化程序。添加一个名为`config/initializers/yaml.rb`

```
module YAML

  def YAML.safe_load(file_name)
    YAML::safe_load_node(YAML::parse(IO.read(file_name)))
  end

  def YAML.safe_load_node(input)
    case input.kind
    when :map
      {}.tap do |h|
        input.value.each do |key, node|
          k,v = key.value, YAML::safe_load_node(node)
          if (v.is_a?(Hash) and h[k].is_a?(Hash))
            h[k] = h[k].merge(v)
          elsif (v.is_a?(Array) and h[k].is_a?(Array))
            h[k] = h[k] + v
          else
            h[k] = v
          end
        end
      end
    when :seq
      input.value.map{|node| YAML::safe_load_node(node)}
    when :scalar
      input.value
    end
  end

end 
```

现在在 Rails 控制台中：

```
>> y YAML::safe_load('c:/temp/test.yml')
---
en:
  christmas:
    ham: Bring ham
  thanksgiving:
    turkey: Turkey
    stuffing: Stuffing
    beer: lots of beer 
```

# java - 在另一个活动中以编程方式对齐相对布局

> ID：10942090
> 
> 赞同：0
> 
> 时间：2012-06-08T01:41:40.587
> 
> 标签：java, android, android-layout

好的，我完全坚持这一点。我到处寻找答案，但没有找到任何解决方案对我有任何好处。我想要做的是将相对布局添加到线性布局中，我可以做到这一点，问题是我只能设置相对布局的高度和宽度，并且不能在任何视图下方对齐在线性布局中。我猜这是因为相对布局不是线性布局的子布局？我采用上述方法的唯一原因是因为我需要为数据库表中的每条记录添加相对布局。无论如何，这是下面的代码，任何帮助都会很棒:)

individual_past_test.xml 文件

```
 <?xml version="1.0" encoding="utf-8"?>
      <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/past_test"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#E4EFF5" >

       <TextView
         android:id="@+id/candidate_name"
         style="@style/past_test_candidate"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:layout_alignParentTop="true"
         android:layout_marginLeft="25dp" />

     </RelativeLayout> 
```

个人PastTest.java

```
 public class IndividualPastTests extends RelativeLayout {

    private Context mContext;

    public IndividualPastTests(Context context) {
    super(context);

    mContext = context;

    String infService = Context.LAYOUT_INFLATER_SERVICE;
    LayoutInflater li;

    li = (LayoutInflater) getContext().getSystemService(infService);
    li.inflate(R.layout.individual_past_test, this, true);
    }
    } 
```

PastTests.java（相关部分）

```
 past_tests_label = (TextView) findViewById(R.id.past_tests_label);
    past_tests_label.setId(1);

    addViewForFirstTest();

    private void addViewForFirstTest() {

    past_test = new IndividualPastTests(this);
    RelativeLayout.LayoutParams past_test_view_params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    past_test.setGravity(Gravity.CENTER_HORIZONTAL);

    // Not being called?
    past_test_view_params.addRule(RelativeLayout.BELOW, past_tests_label.getId());

            past_test_view_params.height = 100;
    past_test_view_params.width = 600;

    System.out.println(past_tests_label.getId());

    past_test.setLayoutParams(past_test_view_params);       
    this.addContentView(past_test, past_test_view_params);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:59:19.173

好的，我最终通过在我的 xml 文件中为过去的测试添加相对布局来修复它（我没有添加到问题中），然后按如下方式更改了我的 PastTests.java -

```
 // Added this line to get the RelativeLayout I created in the xml to hold my view
        pasts_tests_holder = (RelativeLayout) findViewById(R.id.past_tests_holder)

        past_tests_label = (TextView) findViewById(R.id.past_tests_label);
        past_tests_label.setId(1);

        addViewForFirstTest();

    private void addViewForFirstTest() {

        past_test = new IndividualPastTests(this);
        RelativeLayout.LayoutParams past_test_view_params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        past_test.setGravity(Gravity.CENTER_HORIZONTAL);

        past_test_view_params.addRule(RelativeLayout.BELOW, past_tests_label.getId());

        past_test_view_params.height = 100;
        past_test_view_params.width = 600;

        past_test.setLayoutParams(past_test_view_params);       

        // Changed this line to add the past_test view to my new relative layout 
        past_tests_holder.addView(past_test); 
```

以下是我的 past_tests.xml 文件的相关部分以供参考 -

```
 <?xml version="1.0" encoding="utf-8"?>
       <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:id="@+id/prev_test_view"
          android:orientation="vertical" >

         <RelativeLayout
             android:id="@+id/past_tests"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/past_tests_label"
             android:layout_centerHorizontal="true"
             android:layout_marginTop="227dp" >

         </RelativeLayout> 
      </LinearLayout> 
```

希望这可以帮助其他在 android 中实际设置视图时遇到问题的人

# node.js - Node.js 将流量从域重定向到特定端口

> ID：10942092
> 
> 赞同：0
> 
> 时间：2012-06-08T01:41:51.987
> 
> 标签：node.js, minecraft

所以我不知道这是否可能，但我的一位好朋友给了我这个 node.js 脚本，它应该执行以下操作：

当有人使用 a.FreeMinecraftHost.com:25565 连接到 Minecraft 服务器时（这是我的世界的默认端口，当您的服务器使用默认端口运行时，客户端不必输入端口）它应该重定向他们说 a.FreeMinecraftHost.com:30000

这是他给我的代码：

```
var Socket = require('net').Socket;
var Server = require('net').Server;
var net = require('net');

var SERVERMAP = {
  'a.FreeMinecraftHost.com:25565': ['localhost', 30000],
  'b.FreeMinecraftHost.com:25565': ['localhost', 30001],
  'c.FreeMinecraftHost.com:25565': ['localhost', 30002],
  'd.FreeMinecraftHost.com:25565': ['localhost', 30003]
};
var server = new Server();
server.on('connection', function(client) {
  var buffer = '';
  var authed = false;

  client.on('data', function(data) {
    if(!authed) buffer += data;

    if(!authed) {
      var parser = new RegExp('([a-z0-9_]+);([^:]+):([0-9]+)', 'ig');
      var parts = parser.exec(buffer.toString().replace(/\0/ig, ''));

      if(parts) {
        var serverString = parts[2] + ':' + parts[3];
        authed=true;

        if(SERVERMAP[serverString]) {
          var socket = new Socket();

          socket.connect(SERVERMAP[serverString][1], SERVERMAP[serverString][0],     function() {
        socket.write(buffer);

        socket.pipe(client);
        client.pipe(socket);
      });
    } else {
      client.end();
    }
  } else {
    client.end();
  }
}
  });
}); 
```

问题是当我运行它时，它什么也不做，节点不让它活着或任何东西，我只是立即返回到提示

**编辑** 我让它工作了！有点，我忘记了，

```
server.listen(25565); 
```

最后，所以现在我可以连接到 Minecraft 服务器并且它可以工作，但是当 Minecraft 客户端在您的服务器列表中 Ping 它时，它显示为离线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:39:25.330

你想要做的是进行负载平衡我建议做两件事之一

a) nginx 和代理通行证

```
upstream minecraft_servers {
  server 127.0.0.1:30000;
  server 127.0.0.1:30001;
  server 127.0.0.1:30002;
  server 127.0.0.1:30003;
}

server {
  listen 25565;

  location / {
    proxy_pass http://minecraft_servers;
  }
} 
```

b）haproxy负载平衡更多信息在这里[http://haproxy.1wt.eu/](http://haproxy.1wt.eu/)

# java - 为什么需要复制 volatile 变量而不是直接使用呢？

> ID：10942097
> 
> 赞同：4
> 
> 时间：2012-06-08T01:42:35.750
> 
> 标签：java, synchronization, volatile

在[Java concurrency in practice](http://jcip.net/)一书中，有一个自定义线程的例子（见 8.3.4 节的清单 8.7）。我粘贴了下面的代码。有一件事我不太明白。也就是说，该`run()`方法在使用 volatile 变量`debugLifecycle`之前对其进行复制。它有一个注释*复制调试标志，以确保始终一致的值*。是否需要在此处复制变量？如果是，为什么？

```
public class MyAppThread extends Thread {
    public static final String DEFAULT_NAME = "MyAppThread";
    private static volatile boolean debugLifecycle = false;

    public MyAppThread(Runnable r) {
        this(r, DEFAULT_NAME);
    }

    public MyAppThread(Runnable runnable, String name) {
        super(runnable, name + "-" + created.incrementAndGet());
        setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
            public void uncaughtException(Thread t,
                                          Throwable e) {
                log.log(Level.SEVERE,
                        "UNCAUGHT in thread " + t.getName(), e);
            }
        });
    }

    public void run() {
        // Question: why copy the volatile variable here?
        // Copy debug flag to ensure consistent value throughout.
        boolean debug = debugLifecycle;
        if (debug) log.log(Level.FINE, "Created " + getName());
        try {
            alive.incrementAndGet();
            super.run();
        } finally {
            alive.decrementAndGet();
            if (debug) log.log(Level.FINE, "Exiting " + getName());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T01:46:26.297

`volatile`关键字一般表示变量被多个线程访问。所以你复制它的状态一次。如果在您运行时，另一个线程对其进行了修改，您的副本将不受影响。

否则，可能`log.log()`会执行第一个，而不是 finally 子句的`log.log()`. 这可能是令人困惑或不正确的行为。

即使 debugLifecycle在某些情况下**不是**易变的，使用副本可能仍然更好。但这`volatile`是一个“危险信号”，这个变量可能随时改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:46:31.337

volatile关键字意味着它可以被不同的线程访问和修改。在 java 中，我们不能保证线程什么时候做什么（直到你接触到更复杂的东西；从阅读信号量和互斥体开始）。因此，一个线程可以在另一个线程使用它时更改变量的值。如果您正在使用该变量，并且值发生了变化，这可能会产生不良影响。因此，为了防止这种情况，我们将值复制到另一个变量，并且该变量将保留它在复制时的值（而原始的易失变量可能会更改）。

# jquery - jQuery 中的简单淡入和可见性

> ID：10942098
> 
> 赞同：13
> 
> 时间：2012-06-08T01:42:43.427
> 
> 标签：jquery, css

我正在尝试将`visibility`div 的 css 属性更改为`visible`使用 jQuery`.fadeIn()`转换。

这是我的代码：

```
$('a').click(function() {
    $('#test').fadeIn('slow', function() {
     $(this).css('visibility','visible');
  });
});​ 
```

和小提琴：http: [//jsfiddle.net/np6r7/](http://jsfiddle.net/np6r7/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-06-03T17:16:53.227

实际上，我喜欢[davidaam](https://stackoverflow.com/users/1235095/davidaam)的回答。我会稍作修改：

```
 $('#test').css('visibility','visible').hide().fadeIn("slow"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-13T18:29:05.373

你也可以使用 CSS opacity 和 JQuery 的 fadeIn 来达到同样的效果。

不要在 CSS 中使用可见性，而是使用`opacity: 0;` Then use jQuery`FadeTo`将不透明度提高到 100%：

`$('#test').fadeTo('slow', 1);`

这将像可见性一样保留定位，但是，重要的是要注意`opacity: 0`响应点击和按键等事件以及参与 taborder。此外，我还读到*负责任*地使用`visibility: hidden`而不是`display: none`对 SEO 更好，但我不确定这如何适用于`opacity: 0`.

***JSFIDDLE***：http: [//jsfiddle.net/np6r7/15/](http://jsfiddle.net/np6r7/15/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-08T01:46:16.247

你不能为`visibility`. `fadein`被关闭`display:none;`，所以这应该是`#test`通过 CSS 的初始状态。如果您需要保留布局，您可以尝试将测试包装在一个指定您需要的高度和/或宽度的 div 中。

# ruby-on-rails - ActiveRecord 基于动态属性的查找器如何工作？

> ID：10942100
> 
> 赞同：1
> 
> 时间：2012-06-08T01:42:53.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我一直在尝试查找源代码，以便了解[ActiveRecord 基于动态属性的查找器](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders)是如何工作的。我无法在源代码中找到定义所在的位置。

有人可以将我放在定义此功能的文件中的位置吗？谢谢！

使用 Rails 3.2.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:05:28.057

我查看了 ActiveRecord::Model 并注意到其中包含一个名为 DynamicMatchers 的模块。看起来这是所有动态属性查找器的来源。本质上，它使用了缺少的方法并反映了相关的模型：

[https://github.com/rails/rails/blob/master/activerecord/lib/active_record/dynamic_matchers.rb](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/dynamic_matchers.rb)

# python - 谷歌应用引擎（python）中的简单cron作业

> ID：10942104
> 
> 赞同：3
> 
> 时间：2012-06-08T01:43:16.467
> 
> 标签：python, google-app-engine, cron, scheduled-tasks

我需要帮助在 GAE (python) 中实现一个简单的 cron 作业。

根据我从appengine文档中了解到的，我在应用根目录下做了一个cron.yaml文件，内容如下：

```
cron:
- description: blah blah
  url: /crontask
  schedule: every 1 minute 
```

而我的 app.yaml 文件内容如下：

```
application: template-123
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: template-123.app 
```

我将我所有的应用程序代码（cron 和其他部分）制作成一个文件“template-123.py”。在代码中，我通过以下方式实现 cron：

```
class CronTask(Handler):

    def  post(self):
        i=25
        number = Birthday(day = i)
        number.put() 
```

我告诉代码将这个类用于 cron，方法是：('/crontask', CronTask)。

但是，没有新条目上传到数据存储区（我相信它们应该如此）。而且我知道我访问数据存储的方式不是问题，因为当我尝试手动执行相同的操作（将条目上传到应用程序的非 cron 部分中的数据存储）时，它会以适当的方式返回结果。

所以我需要一些指导来了解我可能做错了什么或遗漏了什么？是否必须对 yaml 文件进行更多更改或添加一些其他库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T17:43:15.530

Cron 使用 GET，而不是 POST。将您的更改`def post(self)`为`def get(self)`（或其他任何合适的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T02:16:24.093

通常 python 文件以 py 结尾。处理程序应该说

```
script: template-123.py 
```

首先在本地测试您的 cron 作业。您应该能够访问 localhost:8000/_ah/admin，然后单击左侧的 Cron Jobs 链接。它应该列出您所有的 cron 作业，并且您应该能够使用页面上的链接来测试它们。首先在 dev_appserver 上调试。

# node.js - 如何扩展使用 Nowjs 的 Heroku 应用程序？

> ID：10942108
> 
> 赞同：1
> 
> 时间：2012-06-08T01:43:59.223
> 
> 标签：node.js, heroku, socket.io, nowjs-sockets

在 Heroku 上将我的 Web 应用程序扩展到 2 个 Web 进程会破坏 Nowjs/Sockets.io。

我正在使用对我来说是新的完整堆栈，并且在我添加第二个 Web 进程之前一切都很好。Node.js 仍然响应良好，但 Nowjs 停止响应。我在浏览器中收到 503 响应，然后

```
GET musicbacon.com/socket.io/1/?t=1339117661910 dyno=web.2 queue=0 wait=0ms service=2ms status=200 bytes=82
2012-06-08T01:07:42+00:00 heroku[router]: Error H13 (Connection closed without response) -> GET musicbacon.com/socket.io/1/websocket/12401614301555103827 dyno=web.2 queue= wait= service= status=503 bytes= 
```

在服务器上。

我认为 Nowjs（它是 Socket.io 之上的一个抽象层）在我的 Node.js 服务器旁边创建了它自己的服务器。扩展 Heroku 启动了一个新的 Node.js 服务器虚拟机，但由于 Now.js 还不兼容分布式环境，它就死了。

希望我遗漏了一些东西，并且我可以扩展 Now.js，因为根据我的经验，1 Heroku Web 进程一次只能处理大约 60 个用户。

全部股份是：Heroku Node.js Express Jade Now.js Postgres

错误 H13 参考：[https ://devcenter.heroku.com/articles/error-codes#h13__connection_closed_without_response](https://devcenter.heroku.com/articles/error-codes#h13__connection_closed_without_response)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:18:22.213

WebSockets 在 Heroku 上不起作用，您需要更改 Socket.IO 配置以禁用 WS：

*   [https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)
*   [https://devcenter.heroku.com/articles/request-timeout#longpolling_and_streaming_responses](https://devcenter.heroku.com/articles/request-timeout#longpolling_and_streaming_responses)
*   [https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)

# ruby-on-rails - 将本地人传递给部分

> ID：10942116
> 
> 赞同：0
> 
> 时间：2012-06-08T01:44:59.290
> 
> 标签：ruby-on-rails, partial, locals

我正在尝试提供一个表单来为 features_index 页面上的每个功能创建一个“消息”。不幸的是，我收到错误“找不到没有 ID 的功能”。

我是否正确地通过了当地人？参数似乎没有 feature_id！（也许现在是 @ 的时候了？

功能/索引视图：

```
 - @features.each do |feature|
%tr
  %td= feature.project_id
  %td= feature.subject
  %td= feature.details
  %td= link_to 'Show', feature
  %td= link_to 'Edit', edit_feature_path(feature)
  %td= link_to 'Destroy', feature, :confirm => 'Are you sure?', :method => :delete

  - if feature.messages.length > 0
    - feature.messages.each do |message|
      = render partial: "message_form", locals: {message: message}
  - else
    %td
      = render partial: "message_form", locals: {message: Message.new(feature_id: feature)}

%br/ 
```

特征/_message_form：

```
= simple_form_for(message) do |f|
  = f.error_notification

.form-inputs
  -# = f.input :feature_id
  -# = f.input :sender
  -# = f.input :receiver
  = f.input :subject
  = f.input :details

.form-actions
  = f.button :submit 
```

和消息控制器：

```
def create
@feature = Feature.find(params[:message][:feature_id])

@message = @feature.messages.build(params[:message])

respond_to do |format|
  if @message.save
    flash[:notice] = "Message sent!"
    format.html { redirect_to @message, notice: 'Message was successfully created.' }
    format.json { render json: @message, status: :created, location: @message }
  else
    flash[:notice] = "Message failed to send."
    format.html { render action: "new" }
    format.json { render json: @message.errors, status: :unprocessable_entity }
  end
end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:56:03.693

我相信您将需要一个 hidden_​​field 将 feature_id 的参数传递到您的创建操作中。

```
f.hidden_input :feature_id 
```

# c# - 可以同时使用路由和查询字符串值吗？

> ID：10942117
> 
> 赞同：3
> 
> 时间：2012-06-08T01:45:03.083
> 
> 标签：c#, asp.net

是否可以同时使用路由和查询字符串？

一个示例将是以下作为我的*Global.asax*文件中的路由：

```
 void RegisterRoutes(System.Web.Routing.RouteCollection routes)
 {
      routes.MapPageRoute("My Route Name", "users/{UserName}", "~/users/UserInfo.aspx");
 } 
```

我可以以某种方式使用[http://www.mywebsite.com/users/usernamehere?info=bla](http://www.mywebsite.com/users/usernamehere?info=bla)并将 info=bla 传递给页面吗？我宁愿不尝试在路由模式中对此进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:56:33.477

当然，您可以同时使用路由和查询字符串值。当你定义一个路由时，你的路由不是由查询字符串决定的；相反，它由您的 URL 部分决定。

查看这篇关于使用路由和查询字符串的简明[文章](http://forums.asp.net/p/1549452/3795116.aspx)——Sanderson 指出您可以轻松地将两者结合使用。

即使引用的文章是关于 MVC2 的，您也可以将路由与 ASP.NET Web 表单一起使用。我以前用过，实施起来并不难。

# android - 如何在文本StaticLayout超过其高度时添加省略号？

> ID：10942118
> 
> 赞同：10
> 
> 时间：2012-06-08T01:45:12.860
> 
> 标签：android, android-canvas, textview

我正在以编程方式创建具有不同字符串的静态布局，然后将每个字符串应用于位图，然后将其添加到画布中。在被我在 SL 构造函数中定义的固定高度截断之前，SL 最多显示两行。但是没有省略号表示文本比显示的要长。

从[http://developer.android.com/reference/android/text/StaticLayout.html](http://developer.android.com/reference/android/text/StaticLayout.html)我看到第三个构造函数末尾有截断参数：

```
StaticLayout(CharSequence source, int bufstart, int bufend, TextPaint paint, int outerwidth, Layout.Alignment align, float spacingmult, float spacingadd, boolean includepad, TextUtils.TruncateAt ellipsize, int ellipsizedWidth) 
```

我知道我想要`TextUtils.TruncateAt.END`，但我不知道我应该为`bufstart`、`bufend`和定义什么`ellipsizedWidth`。我找不到这个构造函数的任何好的例子，或者它是否有助于实现我的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:54:54.750

不是 100% 熟悉 Android，但我自己也遇到过同样的问题，这就是我发现的：

*   bufstart - 要包含在布局中的第一个字符（在源代码中）的索引
*   bufend - 要包含在布局中的最后一个字符的索引
*   outerwidth - 我认为包含所有文本的假想框的宽度（我刚刚把它做得非常宽）
*   ellipsizedwidth - 绘图框的宽度，如果超过此值，文本将被修剪

抱歉，我的答案不太自信，但我仍在学习！

# visual-studio-2010 - 如何确保包含目录中的每个文件都复制到 Visual Studio 中的目标位置？

> ID：10942132
> 
> 赞同：3
> 
> 时间：2012-06-08T01:47:15.183
> 
> 标签：visual-studio-2010

我正在构建一个应用程序，它有很多需要包含在目标目录中的文件。到目前为止，还没有很多文件，所以我只需将每个文件的设置单独更改为`Copy to Output Directory :: Copy if newer`. 现在的问题是我正在以指数速度添加文件。

![在此处输入图像描述](../Images/55b139aeebf7466837a2bc70c752069a.png)

你们有谁知道如何使“Some_Directory”的所有子文件都有`Copy to Output Directory :: Copy if newer`我想要的设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:02:17.367

**您可以使用xcopy**命令编写自己的自定义**构建后事件**（选择项目 -> 属性 -> 构建事件） 。您可以为解决方案目录使用 $(solution) 宏并指定文件的相对路径。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T02:02:40.403

您可以使用*构建后*事件。

使用以下帖子，我创建了一个完全符合您要求的*帖子事件：*

*   [在编译时将文件复制到应用程序文件夹中](https://stackoverflow.com/questions/747941/visual-studio-copying-files-into-the-application-folder-at-compile-time)
*   [复制到输出目录复制文件夹结构但只想复制文件](https://stackoverflow.com/questions/1014207/copy-to-output-directory-copies-folder-structure-but-only-want-to-copy-files)
*   [Visual Studio 编译后将 .dll 和 .pdb 添加到项目中](https://stackoverflow.com/questions/1013419/visual-studio-adds-dll-and-pdb-to-project-after-compiling/1013561)

现在，您可以轻松地编辑*Post-build*事件，进入项目设置并进入 Compile 选项卡，现在单击*Build Events*并将以下行放入 *Post-build event command line" 文本框中：

```
xcopy "$(ProjectDir)Test\*.*" "$(TargetDir)Test\\" /E /I /F /Y 
```

看这张图片： ![构建后事件](../Images/9f89e45b8883d20a68d3aba6622f5fb3.png)

在您的情况下，您将不得不通过“some_directory”更改“测试”，仅此而已。

> 但是，有一个警告。每次我的项目构建时，这都会复制每个文件。正在复制的文件夹超过 3MB（我正在开发一个相当大的项目）。这使得调试需要很长时间，因为每次我进行构建时都必须将所有内容移过来。有没有办法让它只复制自上次构建以来已更新的文件？这就是我使用该`Copy if newer`选项的原因。

您可以添加`/D`参数（您可以在命令提示符中查找`xcopy /?`）。

```
/D:m-d-y     Copies files changed on or after the specified date.
             If no date is given, copies only those files whose
             source time is newer than the destination time. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:08:22.990

我有同样的问题，但接受的答案并没有解决它。对我有用的是在 Local.testsettings 中启用部署（在解决方案项下）。**

# android - 运行时异常无法实例化在加载器中找不到的应用程序类？

> ID：10942135
> 
> 赞同：0
> 
> 时间：2012-06-08T01:47:36.233
> 
> 标签：android

以下是我得到的错误日志，

```
java.lang.RuntimeException: Unable to instantiate application
com.test.MyApplication: java.lang.ClassNotFoundException:
com.test.MyApplication in loader
dalvik.system.PathClassLoader[/mnt/asec/com.test-1/pkg.apk]  at
android.app.ActivityThread$PackageInfo.makeApplication(ActivityThread.java:659)
at
android.app.ActivityThread.handleBindApplication(ActivityThread.java:4201)
at android.app.ActivityThread.access$3000(ActivityThread.java:125)
at
android.app.ActivityThread$H.handleMessage(ActivityThread.java:2071)
at android.os.Handler.dispatchMessage(Handler.java:99)  at
android.os.Looper.loop(Looper.java:123)  at
android.app.ActivityThread.main(ActivityThread.java:4627)  at
java.lang.reflect.Method.invokeNative(Native Method)  at
java.lang.reflect.Method.invoke(Method.java:521)  at
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.j… 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:51:04.993

那只是说它找不到那个类。确保名称和包正确。

然后转到 Project > Clean.. 并清理/重建您的应用程序。

如果您粘贴该 Activity 的代码，也可能会让其他人更容易提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:15:42.243

我想“MyApplication”类扩展了Application。Sooo ...您最有可能忘记做的是：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name="MyApplication" > 
```

您需要在 AndroidManifest 中定义您的自定义应用程序类。我敢打赌这会解决你的问题。

# haskell - OverlappingInstances 有什么不好？

> ID：10942136
> 
> 赞同：17
> 
> 时间：2012-06-08T01:47:45.483
> 
> 标签：haskell

围绕最近的一些问题，我想我会把焦点转向老妖怪，`OverlappingInstances`.

几年前我可能一直在认真地问这个问题：毕竟，您可以提供有用的默认实例，而其他人可以在需要时用更具体​​的实例覆盖它们，这有什么不好呢？

一路走来，我对`OverlappingInstances`确实不那么干净，最好避免的观点产生了一些欣赏；主要是因为它在理论上的基础不是很好，不像其他大的扩展。

但仔细想想，如果有人问我，我不确定我是否可以向另一个人解释它到底有什么不好。

我正在寻找的是使用`OverlappingInstances`可能导致坏事发生的具体示例，无论是通过颠覆类型系统或其他不变量，还是只是一般的意外或混乱。

我知道的一个特殊问题是它破坏了仅添加或删除单个模块导入不能改变程序含义的属性，因为随着扩展的打开，可以静默添加或删除新的实例重叠。虽然我可以理解为什么这令人不快，但我不明白为什么它会如此可怕。

额外的问题：只要我们讨论的是有用但理论上没有充分基础的扩展，这些扩展可能会导致糟糕的事情发生，为什么`GeneralizedNewtypeDeriving`没有得到同样糟糕的说唱？是不是因为负面的可能性更容易定位？更容易看出什么会导致问题并说“不要那样做”？

（注意：如果答案的首当其冲集中在 上，我更愿意`OverlappingInstances`，而不是`IncoherentInstances`需要较少的解释。）

[编辑：这里](https://stackoverflow.com/questions/12628700)也有类似问题的好答案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T04:13:58.560

haskell 语言试图遵守的一个原则是在给定模块中添加额外的方法/类或实例不应导致任何其他依赖于给定模块的模块无法编译或具有不同的行为（只要依赖的模块使用显式导入列表）。

不幸的是，这被 OverlappingInstances 打破了。例如：

模块 A：

```
{-# LANGUAGE FlexibleInstances, OverlappingInstances, MultiParamTypeClasses, FunctionalDependencies #-}

module A (Test(..)) where

class Test a b c | a b -> c where
   test :: a -> b -> c

instance Test String a String where
    test str _ = str 
```

模块 B：

```
module B where
import A (Test(test))

someFunc :: String -> Int -> String
someFunc = test

shouldEqualHello = someFunc "hello" 4 
```

`shouldEqualHello`确实等于模块 B 中的“hello”。

现在在 A 中添加以下实例声明：

```
instance Test String Int String where
    test s i = concat $ replicate i s 
```

如果这不影响模块 B 会更好。它在添加之前工作，并且应该在之后工作。不幸的是，事实并非如此。

模块 B 仍然可以编译，但`shouldEqualHello`现在等于`"hellohellohellohello"`。即使最初使用的方法没有改变，行为也发生了变化。

更糟糕的是没有办法回到旧的行为，因为你不能选择不从模块中导入实例。可以想象，这对向后兼容性非常不利，因为您无法安全地将新实例添加到使用重叠实例的类中，因为它可能会改变使用模块的代码的行为（尤其是在您编写库代码时）。这比编译错误更糟糕，因为跟踪更改可能非常困难。

在我看来，使用重叠实例的唯一安全时间是当你编写一个你知道永远不需要额外实例的类时。如果您正在执行一些基于类型的棘手代码，则可能会发生这种情况。

# php - 带有 omegle 克隆的 mysql_num_rows 错误

> ID：10942140
> 
> 赞同：-3
> 
> 时间：2012-06-08T01:48:12.210
> 
> 标签：php, mysql, mysql-num-rows

下载 omegle 克隆后。这当然写得不好，所以关键文件中有错误。如果您想查看，请[点击此处。](http://pasteit.comlu.com/)我得到的错误`Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in /home/a1687121/public_html/listenToReceive.php on line 11`是文件：

```
<?php
$userId=$_REQUEST["userId"];

$msg   ="";
$randomUserId;

include ('config.inc.php');
include ('database.inc.php');
$result=mysql_query("SELECT * FROM chats WHERE userId = $userId ");

if (mysql_num_rows($result) > 0)
    {
    $result=mysql_query("SELECT * FROM msgs WHERE randomUserId = $userId ORDER BY sentdate limit 1");

    $id    =0;

    while ($row=mysql_fetch_array($result))
        {
        $id          = $row["id"];
        $msg         =$row["msg"];
        $randomUserId=$row["userId"];
        }

    if ($id != 0)
        {
        mysql_query ("DELETE FROM msgs WHERE id = $id ");
        mysql_query ("INSERT INTO oldMsgs(userId,randomUserId,msg) VALUES( $randomUserId,$userId,'$msg'); ");
        }
    }
else
    {
    echo "||--rut roh!--||";
    }

mysql_close ($con);

echo $msg;
?> 
```

我检查了一百万次。我找不到任何问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:52:39.223

```
$result=mysql_query("SELECT * FROM chats WHERE userId = $userId ");
// add the error check
if (!$result) {
    die('ERROR: ' . mysql_error());
} 
```

# assembly - A86 - 定义与前向引用冲突

> ID：10942151
> 
> 赞同：3
> 
> 时间：2012-06-08T01:49:53.143
> 
> 标签：assembly, x86-16, forward-reference, a86

我正在尝试使用 A86 为 8086 组装一些代码。我将问题缩小到 4 行代码。

```
MOV BX, testz
ADD AL, [testz]

INT 20h
testz:
~     ^
#ERROR 16: Definition Conflicts With Forward Reference                    @@@@#
db ? 
```

你认为这段代码有什么问题？我将地址本身移动到 BX 寄存器并将 testz 地址中的字节值添加到 AL。

在一个更大的程序中，我也得到了`#ERROR 13: Byte/Word Combination Not Allowed`.

But `label`is a word where `[label]`is a byte。为什么我的编译器不能区分这些？

```
ADD BL, [second]
MOV BX, second
~             ^
#ERROR 13: Byte/Word Combination Not Allowed   
second:
~      ^
#ERROR 16: Definition Conflicts With Forward Reference                    @@@@#
db ? 
```

因为我看不到任何字节/字冲突。

* * *

我的编译器平等地解释偏移量 testz 和 testz。我查看了字节码，看不出有什么区别。

```
MOV BX, testz
ADD AL, [BX] 
```

上面的代码有效，但是有没有其他方法可以让我在一行中做到这一点

```
ADD AL, [testz] 
```

每当我在 [] 中添加标签名称时，根据我的编译器 a86，这是不可接受的。但我觉得他们在语言中是允许的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T01:53:43.573

我怀疑你想要`MOV BX, offset testz`. 看来您的汇编程序解释`[testz]`并`testz`表示相同的意思。

您可以通过尝试代替理论上等效的方法来确认这一点`LEA BX, testz`

编辑：（来自[http://www.csn.ul.ie/~darkstar/assembler/manual/a14.txt](http://www.csn.ul.ie/~darkstar/assembler/manual/a14.txt)）：

```
ERROR 16: Definition Conflicts With Forward Reference

   This error occurs when the assembler has previously guessed
   the type of a forward-referenced symbol in order to determine
   what kind of instruction to generate, and the guess turned out
   to be wrong.  The error is reported at the time the symbol is
   defined.  For example, when A86 sees MOV AX,FOO, it will
   assume FOO is an immediate value.  This error is reported if
   FOO turns out to be a word variable: FOO DW 0\.  You need to
   search backwards from the error message, to references of FOO,
   and specify the type you intend to be used: MOV AX,FOO W.  If
   you really did intend to load the offset of FOO and not the
   memory contents, you can code MOV AX,OFFSET FOO to make the
   error message go away. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-28T18:27:36.043

您遇到的问题源于 A86 是单通道汇编程序这一事实。当您使用类似符号时`testz`，`second`在定义它们之前，A86 必须猜测它们是什么。它假定它们将是立即值，但后来它发现它们实际上是标签。一个多阶段汇编器可能会返回并改变它之前做出的决定，但 A86 不会这样做。它只是抛出一个错误（#16）。这就是错误出现在定义附近的源文件中的原因：这就是 A86 发现问题时所在的位置。

您可以使用指令`offset`、`d`、`w`等明确地告诉 A86 您希望它做什么，因此它不必进行猜测。

A86[手册](https://fruttenboel.verhoeven272.nl/asm/a86man.html#para4e)说明：*“重要提示：你必须了解标签和变量之间的区别，因为如果你混淆它们，你可能会生成与你预期不同的指令。例如，如果你声明 XXX: DW ?，那么 XXX 后面的冒号表示 XXX 是标签；指令 MOV SI,XXX 将 XXX 的立即常数地址移动到 SI 寄存器中。另一方面，如果您声明 XXX DW ? 不带冒号，则 XXX 是字变量；同样的指令 MOV SI,XXX现在做了一些不同的事情：它将内存字 XXX 的运行时值加载到 SI 寄存器中。您可以使用立即值运算符 OFFSET 或内存变量运算符 B，W 覆盖任何用法中的符号定义， D、Q 或 T。因此，无论 XXX 是如何声明的，MOV SI,OFFSET XXX 都会加载指向 XXX 的立即数；MOV SI,无论 XXX 是如何声明的，XXX W 都会在 XXX 处加载单词变量。”*

这应该回答您的第二个问题：当 A86 看到`add bl, [second]`它时，它假定`second`它将是一个立即字节大小的操作数，因为`bl`它是一个字节大小的寄存器。

你的下一行`mov bx, second`应该`second`是一个立即字大小的操作数，但 A86 已经做了`second`一个字节的注释，所以你得到错误 #13。

你可以通过这样做得到你想要的：

```
add bl, second b        ; add the byte at memory location ds:second to bl
mov bx, offset second 
```

通常，如果您在使用符号之前定义它们，这些问题就会消失。例如，这将起作用：

```
name example1 ; good code
code segment
org 0100h
main:                   ; - MACHINE CODE
  mov bx, main          ; BB0001        - put 0100h in bx
  mov bx, offset main   ; BB0001        - put 0100h in bx
;         ^ offset directive not needed here
;           A86 already knows what to do

  mov bx, [main]        ; 8B1E0001      - put 00BBh in bx
;         ^ brackets work fine to dereference main here

  mov bx, main w        ; 8B1E0001      - put 00BBh in bx
;              ^ w does the same thing as brackets

org 0150h
goodbye:
  int 020h
code ends
end main 
```

但这不起作用：

```
name example2 ; will not assemble
code segment
org 0100h
main:                   ; - MACHINE CODE
  mov bx, goodbye       ; BB5001        - put 0150h in bx
;         ^ A86 assumes goodbye is an immediate value. This assumption
;           turns out to be a good one, so this line works OK

  mov bx, offset goodbye; BB5001        - put 0150h in bx
;         ^ offset directive tells A86 that goodbye will be an immediate
;           value. You can skip it, since A86 assumes that anyway

  mov bx, [goodbye] ; this line is the culprit!
;         ^ A86 doesn't know what to do about these brackets

  mov bx, goodbye w     ; 8B1E5001      - put 20CDh (`int 020h`) in bx
;                 ^ w directive tells A86 that goodbye will be a word 
;                   variable

org 0150h
goodbye:                ; label goodbye not defined until way down here!
  int 020h
code ends
end main 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T18:13:21.063

DOS 手册指示为此类处理程序提供指针：

mov ax, word ptr es:[bx],BBBB

以BBBB为基础

也是对段的基数的引用 - 推送 cx 后相同 [我想 - 我不记得了]

与上述相同，除了 BBBB 是 SSSS 用于分段

现在我写了一个处理程序，当我的鼠标因严重崩溃而停止功能时，我使用这个词 ptr 作为一个字节而不是一个词，它似乎可以工作，因为我从未制作过实际的词指针，而只是在 teh 中使用了“word ptr”程序以及将字节向后二进制转换为十六进制 [A6 向后是 65]。

也是我发现 int eh DOS amnual 进行 INT 调用的错误[不像调试程序集或程序集通过调用 int ## 但实际上直接调用 8080 并且事实是它不是一个中断调用，但一个 IRQ 调用。指令代码不正确——特别是在演示文稿中。同样在英特尔 es:[bx] 上不起作用 - 必须使用 es[bx]

同样在扩展-我的头在哪里-回答您的问题，您要引用一个8位寄存器，然后是16位寄存器-您要指示ADD bl，然后在添加操作数后更改bx。这是你的错误#13。

您必须做的是确保 bl 在之前与 BX 兼容，否则您将得到一个无前向引用错误，这基本上是什么。ADD 指令自动保护 BX 不被篡改，直到 tis 计算请求或命令请求完全完成，除非它是作为一个 IRQ 请求进行的，它可能会被 sti 和 cli 暂停，其间是用于更改页表或引用表的引用。

# java - 使用 InputMethodManager 时给出空指针 imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);

> ID：10942152
> 
> 赞同：0
> 
> 时间：2012-06-08T01:50:08.723
> 
> 标签：java, android

嗨，我正在尝试输入这段代码来隐藏 android 上的软键盘，但它返回一个空指针。

代码：

```
public void testSetTestEnvironment (){
    solo.clickInList(4);
    solo.clickOnMenuItem(ConfigVariables.CATALOGSERVER);
    assertTrue(solo.searchText(ConfigVariables.CATALOGSERVERURL));

    //Enter KeyCode
     solo.clickInList(5);

    View myEditText = solo.getViews().get(0);
    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(myEditText.getWindowToken(), InputMethodManager.HIDE_IMPLICIT_ONLY);

    solo.enterText(solo.getEditText(0), "");
    solo.enterText(0, ConfigVariables.KEYCODE);

    assertTrue(popupClickButtonHandler("Enter KeyCode", "OK")); 
```

日志显示：

java.lang.NullPointerException

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T15:11:08.237

也许有点太晚了，但我希望这对某人有所帮助。您的代码很容易出错，因为它依赖于焦点视图来获取窗口令牌。

尝试使用：

```
InputMethodManager im = (InputMethodManager) this.getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);
im.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

这段代码对我来说是正确的。

取自[venator85](https://stackoverflow.com/users/247095/venator85)的[这个答案](https://stackoverflow.com/questions/10429125/hiding-keyboard-after-calling-new-activity-that-shows-a-progressdialog)

# c# - 是否可以在 C#/SQL Server 中使用表变量作为存储过程的参数？

> ID：10942154
> 
> 赞同：0
> 
> 时间：2012-06-08T01:50:32.890
> 
> 标签：c#, sql-server, stored-procedures

我知道我可以使用表值参数作为另一个选项，并且我已经能够实现它。我尝试使用这种方法（表变量而不是表值）的原因是因为我正在学习并且我想学习如何通过存储过程插入数据库的其他方法。

这是我当前的查询：

```
CREATE PROCEDURE TVar
(
DECLARE @TblVar TABLE
(Product nvarchar(max), Qty int)

)
AS
Insert Into sample_tbl Select * FROM @TblVar 
```

是否有可能采用这种方法，其中在 C# 代码中我将使用数据表作为参数传递，这可以在使用表值参数时完成。执行查询时出现错误。

这是错误：

```
Msg 156, Level 15, State 1, Line 2
Incorrect syntax near the keyword 'DECLARE'.
Msg 102, Level 15, State 1, Line 5
Incorrect syntax near ')'. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T01:55:29.547

是的。您可以使用表值参数作为存储过程的参数，并且可以从 C# 调用。

您需要单独声明一个`TABLE` `TYPE`：

```
CREATE TYPE MyTableType AS TABLE 
(
    Product nvarchar(max),
    Qty int
);
GO 
```

然后像这样使用：

```
CREATE PROCEDURE TVar   
(   
   @TblVar as dbo.MyTableType READONLY  
)   
AS  
... 
```

这些文章展示了如何构建 .NET`DataTable`以从 C# 调用存储过程：

*   [C# 和表值参数](http://www.codeproject.com/Articles/39161/C-and-Table-Value-Parameters)

*   [SQL Server 2008 和 .NET (C#) 中的表值参数](http://www.mssqltips.com/sqlservertip/2112/table-value-parameters-in-sql-server-2008-and-net-c/)

# git - 如何从 git 存储库查看二进制（图像或非代码）文件的旧版本？

> ID：10942159
> 
> 赞同：2
> 
> 时间：2012-06-08T01:51:23.780
> 
> 标签：git, bitbucket

我目前正在使用 BitBucket 的 git 系统来管理我的存储库。我看到了我的旧代码，但是当我尝试查看图像 (PNG) 文件的旧版本时，我看到的只有以下内容：

![历史视图](../Images/54d1a3cd37c82172e04b45d855053d56.png)

并且当我尝试从旧提交访问图像时：

![旧回购访问](../Images/3dcb0e20b14ab76edd95870f6d40d9ee.png)

任何有关如何获取此类文件的输入将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:45:21.680

您也可以在本地查看

```
git checkout HEAD^^^^^^ -- path/to/pic.png 
```

或者如果你想把它放在别的地方

```
git show HEAD^^^^^^:path/to/pic.png > /some/other/path/pic.png 
```

然后用浏览器在你的机器上查看

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:24:19.003

您应该看到您的文件，使用访问**原始**内容的地址：

```
https://bitbucket.org/<username>/<repo>/raw/<revision>/yourpicture.png 
```

参见例如[https://bitbucket.org/wuub/kmagik/raw/c1fd2c3c64b7/screen1-hi.png](https://bitbucket.org/wuub/kmagik/raw/c1fd2c3c64b7/screen1-hi.png)

![来自bitbucket的屏幕截图](../Images/64aa77e2b446f83e66dfbfb7aee41795.png)

如本[BitBucket 文档](https://confluence.atlassian.com/display/BITBUCKET/Source)中所述，您可以使用 curl 直接获取您的文档。

# mysql - 避免在不同表的多个列上使用 group by 的临时表

> ID：10942161
> 
> 赞同：1
> 
> 时间：2012-06-08T01:51:29.700
> 
> 标签：mysql, indexing, group-by, temp-tables

是否可以创建一个索引，以便在 group by 对来自不同表的两个或多个列进行分组的情况下不创建临时表？

例子：

```
SELECT T1.c1, T2.c2, COUNT(*)
FROM T1
JOIN T2 USING (pk)
WHERE
 T1.c3 = 100
GROUP BY T1.c1, T2.c2 
```

我可以使用什么索引组合以便不创建临时表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:04:56.953

不，请阅读第一个列表的第一点的[解释。](http://dev.mysql.com/doc/refman/5.5/en/internal-temporary-tables.html)此查询中唯一可用的索引可能在`T1.c3`列上。您可以通过创建一个包含两个表的视图并将其显式分组来避免临时表。

# jquery - 谷歌地图自动完成：如何比国家更严格？

> ID：10942162
> 
> 赞同：1
> 
> 时间：2012-06-08T01:51:34.270
> 
> 标签：jquery, jquery-plugins, google-maps-api-3

有没有办法让谷歌地图的自动完成功能将结果限制在一个州内？似乎只能按国家/地区限制：[https](https://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions) ://developers.google.com/maps/documentation/javascript/reference#ComponentRestrictions 。

如果谷歌的自动完成无法做到这一点，是否有一个 jQuery 插件可以为我做到这一点？我需要一个好的自动完成插件，它有望返回整个地图 API 响应（或至少 lat/lng 值）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:18:18.007

在`bounds`构造. `Component Restrictions`_ `Autocomplete`它在[开发人员指南的](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)[**自动完成部分**](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)进行了描述，编码规范[在 API 文档的 AutocompleteOptions 条目中](https://developers.google.com/maps/documentation/javascript/reference#AutocompleteOptions)定义。您还可以`Autocomplete`在创建 后通过调用更改边界：`autocomplete.setBounds(bounds)`。

不能保证将`bounds`结果限制在范围内，但是将其设置为`bounds`覆盖州或城市的区域将非常接近于实现您所描述的。

如果您需要更进一步，您还可以选择从 切换`Autocomplete`到使用 Places Library [^(dev-guide)](https://developers.google.com/maps/documentation/javascript/places)，它还允许您定义`rankBy`可选属性。如果您使用`google.maps.places.RankBy.DISTANCE`to define `rankBy`，您可以额外控制将返回的结果限制到特定地理区域。这些是谷歌地图上目前可用的最佳选项。

# android - MonoDroid - 使用警报管理器的每日预定服务？

> ID：10942163
> 
> 赞同：2
> 
> 时间：2012-06-08T01:51:44.543
> 
> 标签：android, android-intent, xamarin.android

我正在尝试安排一项服务在用户指定的时间每天运行。我正在使用时间选择器让用户控制服务运行的时间。

每次用户更改服务运行的时间时，我都会更新警报管理器。

这是我的代码：

```
void RescheduleOpeningRatesRetriever (string strTime)
{
    var i = new Intent (this.ApplicationContext, typeof (OpenRatesService));            
    var src = PendingIntent.GetService (this.ApplicationContext, 0, i, PendingIntentFlags.UpdateCurrent);
    var am = (AlarmManager)this.ApplicationContext.GetSystemService (Context.AlarmService);

    var hour = TimePickerPreference.GetHour (strTime);
    var minute = TimePickerPreference.GetMinute (strTime);

    var cal = Java.Util.Calendar.GetInstance (Java.Util.TimeZone.Default);
    cal.Set (Java.Util.CalendarField.HourOfDay, hour);
    cal.Set (Java.Util.CalendarField.Minute, minute);

    am.SetRepeating (AlarmType.RtcWakeup, cal.TimeInMillis, AlarmManager.IntervalDay, src);
} 
```

我不能 100% 确定代码是否正在安排服务正常运行，因为我的测试结果好坏参半。

我现在遇到的问题是每次我重新安排服务以使用上述代码运行时，服务都会立即启动......我不想在配置的时间之前启动服务。

如何安排和更新服务以在一天中的指定时间运行，而无需在使用警报管理器安排后立即运行服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:17:20.360

如果您设置闹钟的时间已经过去，那么闹钟会立即响起。所以首先检查时间是否过去，如果是则设置为第二天。

像：：

```
Calendar rightNow = Calendar.getInstance()

if( cal.after( rightNow )  )
{
      am.SetRepeating (AlarmType.RtcWakeup, cal.TimeInMillis, AlarmManager.IntervalDay, src);
}
else
{
      cal.roll(Java.Util.CalendarField.DAY_OF_MONTH, 1);
      SetRepeating (AlarmType.RtcWakeup, cal.TimeInMillis, AlarmManager.IntervalDay, src);
} 
```

# c# - 为什么这些参数不起作用？

> ID：10942167
> 
> 赞同：2
> 
> 时间：2012-06-08T01:52:29.400
> 
> 标签：c#, nullable, out

```
public static string ChangeDeviceState(int deviceID, DeviceState nextState)
{
    bool temp1;
    string temp = "";
    return ChangeDeviceState(deviceID, nextState, temp1, temp, "", "", "", "", ""); 
}

public static string ChangeDeviceState(int deviceID, DeviceState nextState, out bool? isAccessToken, out String challengeOrToken, string accessToken, string serialNumber, string MACAddress, string deviceModel, string answer )
{ 
```

我想做的只是有另一种方法，不需要其他参数。I bool isAccessToken 必须可以为空，challengeOrToken 必须是输出参数。

我收到非法参数错误。

我真的不明白c#中的这些参数特性。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T01:53:57.903

需要时，您不包括[`out`](http://msdn.microsoft.com/en-us/library/ee332485.aspx)在参数调用中，并且`temp1`不是可为[空的布尔值](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)( `bool?`)。

```
public static string ChangeDeviceState(int deviceID, DeviceState nextState)
{
    bool? temp1;
    string temp;
    return ChangeDeviceState(deviceID, nextState, out temp1, out temp, "", "", "", "", ""); 
} 
```

# wordpress - 如何防止 Wordpress 中的 TinyMCE 编辑器更改 html 标记？

> ID：10942170
> 
> 赞同：2
> 
> 时间：2012-06-08T01:53:14.843
> 
> 标签：wordpress, tinymce

我正在尝试在编辑页面时在 TinyMCE 的“Html”选项卡中编写一些 html，当我保存页面时编辑器会不断修改我的标记。例如，它删除我的`<br>`标签并将我的标签替换`<i>`为`<em>`.

有什么地方可以完全关闭这个“自动更正”功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:07:52.423

此插件将解决您的问题：[http ://wordpress.org/extend/plugins/preserved-html-editor-markup/](http://wordpress.org/extend/plugins/preserved-html-editor-markup/)

它禁用负责“自动更正”的“wpautop”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:11:23.893

首先，您需要知道有两个级别的校正。

1.  天猫
2.  浏览器

在您的情况下，您的 tinymce 配置看起来没有正确设置。请检查您的 tinymce 配置以获取设置[valid_elements](https://www.tiny.cloud/docs/configure/content-filtering/#valid_elements)和[valid_children](https://www.tiny.cloud/docs/configure/content-filtering/#valid_children)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T21:32:09.453

WordPress 将通过将换行符转换为段落等来编辑您的 html。如果您想通过文本编辑器添加 html 并且以后不会损坏，请使用 RAW HTML 插件之类的插件： [http ://wordpress.org/extend/plugins /raw-html/](http://wordpress.org/extend/plugins/raw-html/)

# django - django中的unittest内部函数

> ID：10942171
> 
> 赞同：0
> 
> 时间：2012-06-08T01:53:41.267
> 
> 标签：django, unit-testing

我开始在我的 django 项目中使用 unitest，并且对测试感兴趣`process_email()`。由于我正在测试电子邮件功能，因此我有兴趣测试该`parse_email()`功能。下面这段代码是命令行管理功能（即我做python manage.py process_email）。

**我如何调用`parse_email()`我的单元测试？**

由于此代码位于名为 的文件中`somemodel/management/commands/process_email.py`，因此仅`process_email()`可见。随后，`call_command('parse_email', mail.outbox[1].body, interactive=False)`将不起作用，因为只有`process_email()`可见。

```
def process_email():
    server = imaplib.IMAP4_SSL(settings.EMAIL_HOST,993)
    server.login(settings.EMAIL_HOST_USER, settings.EMAIL_HOST_PASSWORD)
    server.select('INBOX')
    status, data = server.search(None, 'NOT', 'DELETED')

    if data:
        msgnums = data[0].split()

        for num in msgnums:
            status, data = server.fetch(num, '(RFC822)')
            valid = parse_email(data[0][1])
            print "valid is ", valid
            #            if not valid:
            server.store(num, '+FLAGS', '\\Deleted')

    server.expunge()
    server.close()
    server.logout()

def parse_email(message):
    # 'message' must be an RFC822 formatted message.
    pdb.set_trace()
    try:
        msg = message   
        message = email.message_from_string(msg)
        subject = message.get('subject', _('Created from e-mail'))
        subject = decode_mail_headers(decodeUnknown(message.get_charset(), subject))
        subject = subject.replace("Re: ", "").replace("Fw: ", "").replace("RE: ", "").replace("FW: ", "").strip() 
```

这就是我说它不可见时的意思（可能是这个词的错误使用）：当我调用`call_command('parse_email')`我的测试文件时，我收到以下错误：

```
======================================================================
ERROR: test_submit_bldg (bldg.tests.SimpleTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/bldg/tests.py", line 36, in test_submit_bldg
      print call_command('parse_email') 
  File "django/core/management/__init__.py", line 136, in call_command
  raise CommandError("Unknown command: %r" % name)
  CommandError: Unknown command: 'parse_email' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T07:00:49.733

`parse_email`您可以直接从测试中导入：

```
from somemodel.management.commands.process_email import parse_email
assert_equals(parse_email("..."), ...) 
```

# macos - 在桌面/图标级别与应用程序交互 (OS X)

> ID：10942176
> 
> 赞同：1
> 
> 时间：2012-06-08T01:54:03.237
> 
> 标签：macos, cocoa, nswindow, appkit

所以我想出了如何通过将窗口的级别设置为`kCGDesktopIconWindowLevelKey`. 完美运行。

我遇到的问题是交互。当应用程序启动并且窗口聚焦时一切都很好，但是当我放开它并聚焦另一个应用程序或其他图标时，我再也无法聚焦窗口了。就好像它被合并到桌面...

任何人都有类似的问题并且知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T18:31:29.710

这也是我遇到的一个错误，这一切都是在 Lion 发布时开始的。为了解决这个问题，您需要在默认键上添加一两个级别。像这样：

```
window.level = kCGDesktopIconWindowLevelKey + 1; 
```

# ruby - 如何使用正则表达式搜索和替换？

> ID：10942177
> 
> 赞同：1
> 
> 时间：2012-06-08T01:54:05.297
> 
> 标签：ruby, regex

我有一个像这样的字符串：

```
str = 'in europe it costs 250 eur' 
```

或者：

```
str = 'in europe it costs a lot (250eu)' 
```

或者：

```
str = 'eureka! I found it and it costs eu250' 
```

或者：

```
str = 'eureka! I found it and it costs 250.00eur' 
```

等等..

当它们后面和前面有一个非字符 ( ) 时，我想替换两者`'eu'`，但我不希望它们成为替换的受害者。我如何使用或其他方法完成该任务？`'eur'``'euro'``[^a-z]``sub`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:27:40.500

首先，我们编译一个用作测试用例集的数组：

```
test_input = ["aa 250 eu", "bb 250eu", "cc 250 euro", "dd 250euro", 
              "ee eu 250", "ff eu250",  "gg eur250",  "hh euro250"] 
```

接下来我们试试正则表达式：

```
puts test_input.map { |s| 
  # First gsub handles eur before number, second gsub handles eur after number
  s.gsub(/(eu|euro?)\s?(\d+)/, 'euro \2').
    gsub(/(\d+)\s?(eu|euro?)(\z|\s)/, '\1 euro') 
} 
```

解释：

*   `\d+`匹配 1 个或多个数字（数字）
*   `\s?`匹配零个或 1 个空格
*   `\z` 匹配字符串结尾

结果：

```
aa 250 euro
bb 250 euro
cc 250 euro
xx 250 euro
dd euro 250
ee euro 250
ff euro 250 
```

# linux - PAM limits.conf 不适用于 ubuntu oneric ocelot 中的 www-data

> ID：10942179
> 
> 赞同：0
> 
> 时间：2012-06-08T01:54:50.427
> 
> 标签：linux, pam, ulimit

尝试从 pam.d 目录中取消注释 pam_limits.so 但没有运气。基本 PAM 似乎已安装，因为 /usr/lib 中存在 libpam

这是limits.conf的未注释部分

```
www-数据硬盘 CPU 1
@www-data 硬盘 CPU 1

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:21:57.283

刚找到我想。我不得不添加

```
ulimit -t 5 
```

到

```
/etc/init.d/apache2 
```

在这个 debian 线程[http://lists.debian.org/debian-isp/2001/12/msg00218.html找到了解决方案](http://lists.debian.org/debian-isp/2001/12/msg00218.html)

几天来，我一直在努力寻找解决方案。希望这对其他人有帮助。

# jquery - 检查最后 5 个元素中的多少个？

> ID：10942186
> 
> 赞同：1
> 
> 时间：2012-06-08T01:56:03.340
> 
> 标签：jquery, jquery-selectors

为什么我不能这样做？

```
$(this).prevAll("input").slice(-5).is(":checked").length 
```

我想知道最后 5 个输入中有多少被检查了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T01:57:46.803

你不想要[`.is`](http://api.jquery.com/is)；`.is`测试条件并返回一个布尔值。用于[`.filter`](http://api.jquery.com/filter)获取匹配项：

```
$(this).prevAll("input").slice(-5).filter(":checked").length 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:57:32.730

[`.is()`](http://api.jquery.com/is)根据集合中的任何元素是否与选择器匹配，而不是元素集合本身，返回真/假。

您可能打算[`.filter()`](http://api.jquery.com/filter)改用它，它返回一组与您的选择器匹配的元素：

```
$(this).prevAll("input").slice(-5).filter(":checked").length 
```

# c - 如何使用 OpenGL 以特定顺序绘制贴花？

> ID：10942188
> 
> 赞同：3
> 
> 时间：2012-06-08T01:56:08.603
> 
> 标签：c, opengl, 3d

为了绘制我目前正在使用的`glPolygonOffset(-1,-1)`贴花，当我通过伪造贴花的 zbuffer 值来绘制贴花时，就好像贴花的多边形更靠近相机一样，这可以消除一些丑陋的 z 战斗伪影。我还认为我可以使用`glPolygonOffset`各种参数来相对于彼此订购贴花，但这似乎会根据相机角度进行调整，因此当我移动相机时，整个贴花最终会相互交换顺序。

我玩过的另一种方法是在本文档中：[“制作贴花”](http://www.loria.fr/~roegel/cours/iut/opengl/addison.pdf)

> 1.  禁用深度缓冲区以进行写入，并渲染 A。
> 2.  启用深度缓冲区进行写入，并渲染 B。
> 3.  禁用用于写入的颜色缓冲区，然后再次渲染 A。
> 4.  启用用于写入的颜色缓冲区。

这是我的尝试，但我真的不明白如何扩展它以相对于彼此按顺序绘制贴花，因为贴花是在启用深度缓冲区进行写入时绘制的，我不会得到更多 z斗争？

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);  
glEnable(GL_BLEND);

//Render a red solid quad on the color mask
glDepthMask(false);
glColor3f (1.0f, 0.0f, 0.0f);
glBegin (GL_QUADS);
    glVertex2f(-1,-1);
    glVertex2f(-1,1);
    glVertex2f(1,1);
    glVertex2f(1,-1);
glEnd ();

//Render the coincident decal, a transparent square works fine for now
glDepthMask(true);
glColor4f(0.0f, 1.0f, 0.0f, 0.5f);
glTranslatef(0, 1, 0.0f);
glScalef(0.5f, 0.5f, 0.5f);
glBegin (GL_QUADS);
    glVertex2f(-1,-1);
    glVertex2f(-1,1);
    glVertex2f(1,1);
    glVertex2f(1,-1);
glEnd ();

//Render the red quad again but only on the depth buffer
glColorMask(false, false, false, false);
glLoadIdentity();
glColor3f(1.0f, 0.0f, 0.0f);
glBegin (GL_QUADS);
    glVertex2f(-1,-1);
    glVertex2f(-1,1);
    glVertex2f(1,1);
    glVertex2f(1,-1);
glEnd ();
glColorMask(true, true, true, true); 
```

这似乎在大多数游戏中都会完成，所以我确信我缺少更好的解决方案。但是，我已经进行了很多搜索，并且无法提供任何教程来在 openGL 中订购这样的贴花。也许我只是使用了错误的搜索词？这个过程还有别的名字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:42:45.537

按照您的建议使用`glPolygonOffset`并从前到后渲染事物可能会比其他选项提供更好的性能，因为它应该充分利用 GPU 中的“早期 Z”优化。

您可能想尝试将更大的数字传递给`glPolygonOffset`，例如 (-4, -4) 用于第一个贴花， (-8, -8) 用于第二个等 - 这不是一门精确的科学；）

当然，在`glPolygonOffset`你的贴花变得如此之大之前，你可以以这种方式绘制多少贴花是有限制的，你的贴花会出现在它们不应该出现的东西的前面。

重新相机角度的东西：`factor`参数`glPolygonOffset`应该为高角度的多边形添加额外的软糖。

您可以尝试的另一种方法是：

*   正常渲染所有常规几何体
*   禁用深度写入（但保持启用深度测试）
*   `glPolygonOffset(-1, -1)`
*   从后到前绘制所有贴花

还有另一种可能更有效的方法：

*   在帧开始时将模板缓冲区清除为 0（同时清除其他缓冲区）
*   正常渲染所有常规几何体
*   禁用深度写入（但保持启用深度测试）
*   `glPolygonOffset(-1, -1)`
*   `glStencilFunc(GL_NOTEQUAL, 1, 1)`,`glStencilOp(GL_KEEP, GL_KEEP, GL_REPLACE)`
*   从前到后绘制所有贴花

# c# - 在 ASP.Net、C# 中访问 gridview 的标题控件

> ID：10942194
> 
> 赞同：1
> 
> 时间：2012-06-08T01:56:24.030
> 
> 标签：c#, asp.net, gridview

我有 Gridview 并且标题有文本框和标签，我在 gridview 之外有一个搜索按钮，当用户单击搜索时，我需要通过相应列的 texbox 值过滤 gridview 的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:23:38.387

尝试这个

```
TextBox textBox = (TextBox)gridView1.HeaderRow.FindControl("contorlId"); 
```

在列中专门搜索通过索引识别单元格

```
TextBox textBox = (TextBox)gridView1.HeaderRow.Cells[0].FindControl("contorlId"); 
```

# wordpress - 获取WordPress安装文件夹路径

> ID：10942197
> 
> 赞同：5
> 
> 时间：2012-06-08T01:56:39.827
> 
> 标签：wordpress, root, document-root, realpath, installation-path

有没有办法获得安装 WordPress 的路径？

我正在使用以下内容：

```
$root = realpath($_SERVER["DOCUMENT_ROOT"]); 
```

www.example.com -> /usr/local/pem/vhosts/165312/webspace/httpdocs

这对于 www.example.com/blog 来说并不好，因为我需要对文件夹名称（博客）进行硬编码。

后来我找到了一种方法：

```
$iroot = getcwd();
$folder = explode("/", $iroot);
$dir = $folder[8]; // I know is 8
$root = realpath($_SERVER["DOCUMENT_ROOT"]);
require "$root/$dir/wp-blog-header.php"; 
```

但它仍然是很多复杂的东西。有没有一种简单的方法可以在没有硬编码的情况下获取 WordPress 的安装位置（路径）？

**注意：1** WordPress 功能将不起作用，因为这在 WordPress 之外。如上一个示例所述，确定 WordPress 安装路径的重点在于`require "wp-blog-header.php";`多个 WordPress 安装，其中每个安装使用不同的文件夹（example.com/blog-one 和 example.com/blog-two），而不是 WordPress MU或多站点。

**注意：2**如果不是`require "$root/$dir/wp-blog-header.php";`我使用`require "wp-blog-header.php";`它，只要文件在同一个文件夹中，它就可以工作，但在我的情况下，文件有时会在不同的文件夹中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T22:17:54.920

使用 ABSPATH 常量：

```
<?php echo ABSPATH ?> 
```

这应该打印您的 WordPress 路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T20:39:16.460

这就是我正在做的事情：

**设置**：

```
$docRoot = $_SERVER['DOCUMENT_ROOT'];
$scriptName = $_SERVER['SCRIPT_NAME'];
$queryArray = explode("/", $scriptName);
$queryLength = count($queryArray); 
```

**用法**：

```
require_once($docRoot . ($queryLength > 2 ? "/".$queryArray[$queryLength - 2] : "" ) . '/wp-blog-header.php'); 
```

无论脚本在哪里，这对我来说都非常适合实例化 WordPress 环境。**在使用任何$_SERVER**变量之前肯定需要进行清理（并且我需要在我的 localhost 环境之外对其进行三次检查），但我认为它不需要进行严格的修改才能成为一个实用的通用解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T02:28:13.210

如果您要尝试的只是被调用文件所在的当前目录，那么我将使用：

```
realpath(dirname(__FILE__)) 
```

这在很大程度上取决于文件所在的位置。如果它与 WordPress 安装在同一目录中，那么它将类似于：

```
<?php
    $root = realpath(dirname(__FILE__));
    require "$root/wp-blog-header.php";
?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-13T15:38:16.870

根示例：

*   /usr/local/pem/vhosts/165312/webspace/httpdocs/blog-one
*   /usr/local/pem/vhosts/165312/webspace/httpdocs/blog-two
*   /usr/local/pem/vhosts/165312/webspace/httpdocs/some-blog

下面的示例适用于**任何**博客（“blog-one”、“blog-two”和“some-blog”），并且脚本或文件可以安装在博客的**任何子**文件夹中。

```
$current_path = getcwd(); // Get the current path to where the file is located
$folder = explode("/", $current_path); // Divide the path in parts (aka folders)
$blog = $folder[8]; // The blog's folder is the number 8 on the path

// $root = path without the blog installation folder.
$root = realpath($_SERVER["DOCUMENT_ROOT"]);

// Now I can require any WordPress file
require "$root/$dir/wp-blog-header.php";

// For the current installation
// For example, wp-blog-header.php to get the blog name or
// wp-config.php to access the database. 
```

这使得脚本独立。该脚本适用于任何 WordPress 安装安装中的任何文件夹，只要该文件夹的编号为 8。如果安装在子文件夹中，则必须增加编号 8。还要记住，当前路径可能有更多或更少的文件夹，这意味着必须相应地调整脚本。

**注意**：这将通过“硬编码”路径上的文件夹位置来工作，只要所有安装的位置相同，脚本就可以工作。另一种方法是硬编码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-03T21:14:18.170

这是**从 WordPress**中执行此操作的方法（这不是提问者所要求的，但我怀疑很多人会搜索...）

有一个专用函数[get_home_path()](http://codex.wordpress.org/Function_Reference/get_home_path)，它会给你类似的东西：

```
/srv/www/my-site/htdocs/ 
```

[文件和内容目录](http://codex.wordpress.org/Determining_Plugin_and_Content_Directories)（以及 Web 路径）的其他功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T13:14:15.640

如果你可以到达数据库，你需要做

```
update_option('wp_dir',dirname(__FILE__)); 
```

在文件 wp-blog-header.php 中。

然后从任何应用程序连接到数据库并使用以下查询检索路径：

```
select option_value from wp_options where option_name ='wp_dir'; 
```

当然，您需要知道数据库名称和 WordPress 表前缀。

PS：这可能是也可能不是您的解决方案，但它是其中一种方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T03:11:03.190

为什么不简单地在 wp-config.php 中执行以下操作：

```
$WP_PATH = implode("/", (explode("/", $_SERVER["PHP_SELF"], -1))); 
```

例如

```
$WP_PATH = implode("/", (explode("/", "/one/two/three/index.php", -1))); 
```

将返回 "/one/two/three" 和

```
$WP_PATH = implode("/", (explode("/", "/index.php", -1))); 
```

将返回 ””

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-04T19:40:31.903

```
$WP_PATH = implode("/", (explode("/", $_SERVER["PHP_SELF"], -4))); 
```

将为您提供确切的 WordPress 根目录。

例如，您的根地址是 www.myroot.com，而您的 WordPress 站点位于 public_html 的 WordPress 文件夹中，那么 wwww.myroot.com/wordpress/ 将是 $WP_PATH 中的结果。在这种情况下，您当前的文件名应该在您的插件根目录中。就像 some_plugin 是我的插件名称。所以完整路径将变为：

```
localhot/wordpress/wp_content/plugins/some_plugin/ 
```

是我`localhot/wordpress/wp_content/plugins/some_plugin/myfile.php`写这个脚本的文件名，会给我`/wordpress`. 这对我有用，因为我想要我的 wordpress 目录名称。所以寻找这样的内容：

```
$WP_PATH = implode("/", (explode("/", $_SERVER["PHP_SELF"], -4)));
require_once( $_SERVER['DOCUMENT_ROOT'].$WP_PATH '/wp-load.php'); 
```

# c# - 有没有办法检测串口的最快速度？

> ID：10942204
> 
> 赞同：1
> 
> 时间：2012-06-08T01:57:56.333
> 
> 标签：c#, serial-port

到目前为止，我还没有找到答案，但我想知道是否有一种方法，特别是使用 C#，可以检测串行端口的最高波特率，而无需进行测试。

它的硬件配置文件中是否有某些东西或存储某个端口的可用波特率的东西，C# 可以查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:38:57.077

使用反射你可以/应该这样做：

```
 serialPort = new SerialPort(portName);
   serialPort.Open();
   object p = serialPort.BaseStream.GetType().GetField("commProp", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(serialPort.BaseStream);
   Int32 bv = (Int32)p.GetType().GetField("dwSettableBaud", BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public).GetValue(p); 
```

注意：端口将被打开以检查其可设置的波特率！:)

有关如何检查波特率的更多信息，请参阅这篇文章：[如何以编程方式在 C# 中查找所有可用的波特率（serialPort 类）](https://stackoverflow.com/questions/1165692/how-to-programatically-find-all-available-baudrates-in-c-sharp-serialport-class)

# java - 从 NameValuePairs 列表创建 UrlEncodedFormEntity 会引发 NullPointerException

> ID：10942205
> 
> 赞同：21
> 
> 时间：2012-06-08T01:58:01.187
> 
> 标签：java, post, apache-httpclient-4.x

我正在创建一个单元测试来试用我刚刚创建的 servlet。

```
@Test
public void test() throws ParseException, IOException {

  HttpClient client = new DefaultHttpClient();
  HttpPost post = new HttpPost("http://localhost:8080/WebService/MakeBaby");

  List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

  nameValuePairs.add(new BasicNameValuePair("father_name", "Foo"));
  nameValuePairs.add(new BasicNameValuePair("mother_name", "Bar"));

  post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
  HttpResponse response = null;

  try {
    response = client.execute(post);
  } catch (ClientProtocolException e) {
    e.printStackTrace();
  } catch (IOException e) {
    e.printStackTrace();
  }

  String stringifiedResponse = EntityUtils.toString(response.getEntity());

  System.out.println(stringifiedResponse);

  assertNotNull(stringifiedResponse);
} 
```

以下行生成 NullPointerException：

```
post.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-08T02:33:57.223

抱歉这个愚蠢的问题，刚刚通过添加 utf-8 格式解决了它。

```
post.setEntity(new UrlEncodedFormEntity(nameValuePairs, "utf-8")); 
```

创建一个[`UrlEncodedFormEntity`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/entity/UrlEncodedFormEntity.html)不传递格式将使用`DEFAULT_CONTENT_CHARSET`which is`ISO-8859-1`

这让我感到困惑......是什么导致它抛出`NullPointerException`？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T16:29:03.173

根本不是一个愚蠢的问题。我认为令人困惑的是，在 httpclient 4.1 中，不需要编码格式 - 这有效：

```
HttpEntity entity = new UrlEncodedFormEntity(params);
method.setEntity(entity); 
```

当我将依赖项更改为 httpclient 4.2 以访问[URIBuilder](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIBuilder.html)时，我得到：

```
java.lang.NullPointerException
at org.apache.http.entity.StringEntity.<init>(StringEntity.java:70)
at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:78)
at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:92)... 
```

正如您所指出的，对于 4.2，构造函数似乎需要编码。令人困惑的是，文档指定旧的构造函数仍然可用，但它似乎不再工作了。

公共 UrlEncodedFormEntity（列表参数）[文档](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/entity/UrlEncodedFormEntity.html#UrlEncodedFormEntity(java.util.List))

# javascript - IE window.open 在第二个会话上打开一个带有第一个会话 ID 的窗口

> ID：10942206
> 
> 赞同：1
> 
> 时间：2012-06-08T01:58:30.700
> 
> 标签：javascript, asp.net, internet-explorer, sessionid

我有一个*asp.net*应用程序，我需要同时运行两个会话。

我也在`windows.open`我的一些页面上使用，这就是我的问题开始的地方。如果我在会话二中从我的一个页面调用 JavaScript 时正在运行两个会话`windows.open`，则会打开新窗口，其中包含会话一中的会话 ID。

我还应该补充一点，第二个会话是使用下面的代码在不同的 IE 实例中创建的。

```
var myshell = new ActiveXObject("Shell.Application");

if (parseFloat(ieVersion) >= 8) {
    myshell.ShellExecute("iexplore.exe", "-noframemerging " + url, "", "open", 1);
}
else {
    myshell.ShellExecute("iexplore.exe", url, "", "open", 1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T01:59:22.067

我知道为什么会这样，但我发现了问题......

从 IE 的第二个实例打开的新窗口未正确加载，并在 IE 的第一个实例上重新呈现。

打开窗口的javascript很简单：window.open(the_url, "DisplayWindow", option);

这在 IE 的第一个实例上工作得很好，在一些运行 Windows 7 和 IE 9 的计算机上，它可以在 IE 的第二个实例上打开一个窗口，但对于运行相同设置的其他计算机，这只是不工作！

**解决方案只是删除窗口名称。
window.open(the_url, "", 选项);**

我还发现了一个类似的问题，在 IE9 中，如果窗口名称包含空格，窗口将不会打开！因此，如果您遇到类似问题，请尝试更改窗口名称或将其删除。

# c# - ASP.NET MVC 4 Intranet 模板 - 显示用户全名

> ID：10942213
> 
> 赞同：3
> 
> 时间：2012-06-08T01:59:18.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我在 VS 2012 RC 下使用 MVC 4 的 Intranet 模板。右上角显示域\用户名，我希望它显示全名。

我能够在 _Layout.cshtml 中使用它。我在正文中加入了以下助手 -

```
@helper AccountName()
{       
    using (var context = new System.DirectoryServices.AccountManagement.PrincipalContext(System.DirectoryServices.AccountManagement.ContextType.Domain))
    {
        try
        {
            var principal = System.DirectoryServices.AccountManagement.UserPrincipal.FindByIdentity(context, User.Identity.Name); 
            @String.Concat(principal.GivenName, " ", principal.Surname) 
        }
        catch { }

    } 
} 
```

（我还必须在参考文献中包含 System.DirectoryServices.AccountManagement）

然后我可以在问候代码中使用帮助程序，如下所示 -

```
 <section id="login">
      Hello, <span class="username">@AccountName()</span>!
 </section> 
```

这工作正常，但我不喜欢在 _Layout.cshtml 中有代码。我试图将帮助程序放在 Helpers 目录下的单独文件中，但 @AccountName() 不再解决。理想情况下，代码应该真的在一个直接的 CS 文件中。

任何人都可以提出更好的设置方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T02:09:31.503

您当然可以将代码放在常规 C# 文件中，例如

```
AccountUtil.AccountName() 
```

在这种情况下，您需要通过放置来包含您的助手所在的命名空间

```
@using My.App.Helpers  @* Change to your own namespace *@ 
```

在任何想要引用该代码的视图的顶部。

或者，您可以通过编辑`web.config`Views 目录中的文件（*不是*项目级别的文件）使该命名空间可用于所有视图

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <!-- Don't edit out the stuff that's already here! -->
        <add namespace="My.App.Helpers" />  <!-- Add your own namespace here -->
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

# php - 使用 curl 从标签中检索推文

> ID：10942216
> 
> 赞同：0
> 
> 时间：2012-06-08T01:59:42.550
> 
> 标签：php, json, curl, twitter

我正在尝试使用某个主题标签（在本例中为#stackoverflow）获取最新推文的文本和用户名。返回的错误是`Invalid argument supplied for foreach()`。我认为这是因为`$content`它实际上不是关联数组。

```
function get_twitter($hashtag) {

    $json_url = "http://search.twitter.com/search.json?q=%23" . $hashtag . "&rpp=1&result_type=recent";
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$returned_content = get_twitter('stackoverflow');
$content = json_decode($returned_content);
foreach ($content['results'] as $tweet) {
    echo $tweet['text'];
    echo $tweet['from_user'];
} 
```

Twitter 返回的 JSON 示例如下：

```
{
"completed_in":0.099,   
"max_id":210895419549548544, 
"max_id_str":"210895419549548544", 
"next_page":"?page=2&max_id=210895419549548544&q=%23stackoverflow&rpp=1&result_type=recent", 
"page":1, 
"query":"%23stackoverflow", 
"refresh_url":"?since_id=210895419549548544&q=%23stackoverflow&result_type=recent", 
"results":[ 
    { 
        "created_at":"Fri, 08 Jun 2012 00:46:00 +0000", 
        "from_user":"Beseeker", 
        "from_user_id":334048944, 
        "from_user_id_str":"334048944", 
        "from_user_name":"Italo Iv\u00e1n", 
        "geo":null, 
        "id":210895419549548544, 
        "id_str":"210895419549548544", 
        "iso_language_code":"es", 
        "metadata":{"result_type":"recent"}, 
        "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/1611497833\/imagen-perfil-fb_normal.jpg", 
        "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/1611497833\/imagen-perfil-fb_normal.jpg", 
        "source":"&lt;a href=&quot;http:\/\/twitter.com\/&quot;&gt;web&lt;\/a&gt;", 
        "text":"podr\u00eda pasar horas y horas en #StackoverFlow", 
        "to_user":null, 
        "to_user_id":0, 
        "to_user_id_str":"0", 
        "to_user_name":null
    }
], 
    "results_per_page":1, 
    "since_id":0, 
    "since_id_str":"0"
} 
```

提前感谢您的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T11:22:28.533

此功能不是用户 oAuth 并且可能不再起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T02:07:48.400

```
function getTweets($hash_tag) {

    $url = 'http://search.twitter.com/search.atom?q='.urlencode($hash_tag) ;
    echo "<p>Connecting to <strong>$url</strong> ...</p>";
    $ch = curl_init($url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $xml = curl_exec ($ch);
    curl_close ($ch);

    //If you want to see the response from Twitter, uncomment this next part out:
    //echo "<p>Response:</p>";
    //echo "<pre>".htmlspecialchars($xml)."</pre>";

    $affected = 0;
    $twelement = new SimpleXMLElement($xml);
    foreach ($twelement->entry as $entry) {
        $text = trim($entry->title);
        $author = trim($entry->author->name);
        $time = strtotime($entry->published);
        $id = $entry->id;
        echo "<p>Tweet from ".$author.": <strong>".$text."</strong>  <em>Posted ".date('n/j/y g:i a',$time)."</em></p>";
    }

    return true ;
} 
```

像这样使用：

```
getTweets('#yankees'); 
```

* * *

[文档](http://dev.twitter.com/doc/get/search)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T13:54:43.753

错误在您的“foreach”循环中。它应该是：

```
foreach($status->results as $tweet) {
    echo $tweet->text;
    echo $tweet->from_user;
} 
```

# sql - 您如何在 postgres 中选择日期范围？

> ID：10942219
> 
> 赞同：2
> 
> 时间：2012-06-08T02:00:05.867
> 
> 标签：sql, postgresql, date, select, timestamp

我在 postgres 数据库中有一个时间戳字段。我想选择上个月内发生的所有日期。所以像 select * from table where timestamp > (current timestamp - 1 month) 之类的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T02:02:55.840

```
select * from table where timestamp > now() - interval '1 month' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T02:19:40.020

准确地说：

```
SELECT *
FROM   tbl
WHERE  ts_col >  now() - interval '1 month'
AND    ts_col <= now(); 
```

# drupal-7 - drupal 7 webform：更改下载提交的标签

> ID：10942220
> 
> 赞同：1
> 
> 时间：2012-06-08T02:00:19.250
> 
> 标签：drupal-7, drupal-webform

我有一个带有一些表单组件的网络表单。我想以 CSV 格式下载它。但我希望下载文件的表单组件标签是机器名称（字段键）而不是表单组件的标签。

原因是我会在之后处理 csv 文件并且我需要这些密钥，但这些密钥不是人类可读的。这就是为什么我在网络表单中放置了不同的更用户友好的标签。但是在下载的文件中，我得到了那些标签而不是机器名称。

“选择”选项列表有一个选项，但我没有看到其他普通文本字段的任何选项。

我正在考虑一些 javascript 或 css 来做一些肮脏的伎俩，将丑陋的机器值放入标签中，但向用户显示用户友好的值。但这只是一种解决方法，我想有一种drupal方法可以做到这一点。

提前致谢！

编辑：让自己更清楚：在 Web 表单中添加组件时，有两个必填字段：标签和“机器名称”。我希望标签值对用户来说是漂亮的，并且我将机器名称用于我自己的目的。我希望当我在 CSV 文件中下载提交的表单时，将每列的标题设为“机器名称”值而不是标签，这就是我现在得到的。

Edit2：用钩子形式改变显示表单上的标签而不是js和css更优雅！但我还是想知道答案

# java - 如何使用 JSON

> ID：10942225
> 
> 赞同：0
> 
> 时间：2012-06-08T02:00:57.410
> 
> 标签：java, android

好的，如果有人问过这个问题，我真的很抱歉，但我似乎找不到任何好的帮助。

我使用 PHP 和 Codeigniter 为我的 android 应用程序编写了一个小 API。它通过 GET 请求工作，所以我会向它发送一些信息，它会返回一些东西。当我向它发送登录请求时，我希望它验证用户数据，如果正确则返回用户的凭据（uid、电子邮件等）。所有这些信息都可以作为格式化的 XML 或 JSON 数组返回。我的问题是在 Java 中哪个更容易使用，你能帮我举个简单的例子吗？

任何帮助深表感谢。

编辑：

要求的代码

```
 // Parse JSON array
                JSONObject obj = (JSONObject) JSONValue.parse(response);
                String uid = (String) obj.get("uid");
                String email = (String) obj.get("email"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T02:23:06.883

根据我的经验，JSON 更容易使用。

这是一些以 XML 格式格式化的数据：

```
<book>
    <person>
      <first>Kiran</first>
      <last>Pai</last>
      <age>22</age>
    </person>
    <person>
      <first>Bill</first>
      <last>Gates</last>
      <age>46</age>
    </person>
    <person>
      <first>Steve</first>
      <last>Jobs</last>
      <age>40</age>
    </person>
</book> 
```

这是读取 XML 文件的示例代码：

```
import java.io.File;
import org.w3c.dom.Document;
import org.w3c.dom.*;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException; 

public class ReadAndPrintXMLFile{

    public static void main (String argv []){
    try {

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse (new File("book.xml"));

            // normalize text representation
            doc.getDocumentElement ().normalize ();
            System.out.println ("Root element of the doc is " + 
                 doc.getDocumentElement().getNodeName());

            NodeList listOfPersons = doc.getElementsByTagName("person");
            int totalPersons = listOfPersons.getLength();
            System.out.println("Total no of people : " + totalPersons);

            for(int s=0; s<listOfPersons.getLength() ; s++){

                Node firstPersonNode = listOfPersons.item(s);
                if(firstPersonNode.getNodeType() == Node.ELEMENT_NODE){

                    Element firstPersonElement = (Element)firstPersonNode;

                    //-------
                    NodeList firstNameList = firstPersonElement.getElementsByTagName("first");
                    Element firstNameElement = (Element)firstNameList.item(0);

                    NodeList textFNList = firstNameElement.getChildNodes();
                    System.out.println("First Name : " + 
                           ((Node)textFNList.item(0)).getNodeValue().trim());

                    //-------
                    NodeList lastNameList = firstPersonElement.getElementsByTagName("last");
                    Element lastNameElement = (Element)lastNameList.item(0);

                    NodeList textLNList = lastNameElement.getChildNodes();
                    System.out.println("Last Name : " + 
                           ((Node)textLNList.item(0)).getNodeValue().trim());

                    //----
                    NodeList ageList = firstPersonElement.getElementsByTagName("age");
                    Element ageElement = (Element)ageList.item(0);

                    NodeList textAgeList = ageElement.getChildNodes();
                    System.out.println("Age : " + 
                           ((Node)textAgeList.item(0)).getNodeValue().trim());

                    //------

                }//end of if clause

            }//end of for loop with s var

        }catch (SAXParseException err) {
        System.out.println ("** Parsing error" + ", line " 
             + err.getLineNumber () + ", uri " + err.getSystemId ());
        System.out.println(" " + err.getMessage ());

        }catch (SAXException e) {
        Exception x = e.getException ();
        ((x == null) ? e : x).printStackTrace ();

        }catch (Throwable t) {
        t.printStackTrace ();
        }
        //System.exit (0);

    }//end of main
} 
```

这是以 JSON 格式格式化的相同数据：

```
{"book":
    [ 
      {"person":
          {"last":"Pai","age":22,"first":"Kiran"}
      },
      {"person":
          {"last":"Gates","age":46,"first":"Bill"}
      },
      {"person":
          {"last":"Jobs","age":40,"first":"Steve"}
      }
    ]
} 
```

以及读取 JSON 的示例代码：

```
JSONObject obj = (JSONObject) JSONValue.parse(jsonString);
JSONArray arr = (JSONArray) obj.get("book");
for (int i = 0; i < arr.size(); i++) {
    JSONObject person = (JSONObject) arr.get(i);
    String first = (String) person.get("first");
    String last = (String) person.get("last");
    String age = (String) person.get("age");
    System.out.println("Person " + i +" : first = "+ first + ", last = " + last + ", age = " + age);
} 
```

从 2 段示例代码中，您可以看到 JSON 更易于阅读、编写和格式化。

XML 更常用作交换信息的行业标准，而 JSON 通常用于通过基于 REST 的 API 交换信息。

# amazon-s3 - 尝试使用 s3cmd 在 Amazon S3 文件上设置元数据

> ID：10942228
> 
> 赞同：15
> 
> 时间：2012-06-08T02:01:36.863
> 
> 标签：amazon-s3, amazon-web-services, s3cmd

我在亚马逊 S3 上有一个后缀为“.bin.gz”的文件。我希望网络浏览器将其视为压缩的 HTML 文件。因此，我可以进入 Amazon S3 Web 控制台 (https://console.aws.amazon.com/s3/home) 并导航到该文件并选择它。在那里，在属性下，我可以转到元数据选项卡并添加以下指令：

```
Content-Type: text/html
Content-Encoding: gzip 
```

这按预期工作。那是容易的部分。

现在，我想在将数百个（或可能数百万个）文件放在 S3 上时对它们做同样的事情。

我曾尝试将 s3cmd 与该`--add-header`选项一起使用，但是当我尝试设置 Content-Type 时，这给了我一个签名错误。此外，我很确定这样做只会影响在 PUT 操作时发送的标头，而不是与文档一起存储的元数据。

所以，我正在寻找一种方法来做到这一点，最好是使用 s3cmd。如果这是不可能的，如果有人可以建议一个能够将元数据应用于 s3 上的文件的 python 库，我将不胜感激。

必须有一种方法可以做到这一点，而无需在控制台中手动设置。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-08T02:06:18.810

用于`-m`设置 MIME 类型（将`Content-Type`在后续请求中作为标头发送：

```
s3cmd -m text/html --add-header='Content-Encoding: gzip' put [files] s3://... 
```

# css - 更改打印样式表的 img

> ID：10942232
> 
> 赞同：1
> 
> 时间：2012-06-08T02:02:50.317
> 
> 标签：css, printing, print-style

我在文本旁边有一个小图标，代码如下所示：

```
<div id="photo-info">
    <p class="textcenter"><img width="16" height="16" 
              src="/Images/Icons/info.png" />Photo Info:</p>
    <p class="textcenter"> Information text here.</p>
</div> 
```

页面背景为黑色，图标为白色。但是当我打印页面时，文本是黑色的，背景是白色的。打印时白色图标不显示，虽然这不是一个大问题，但我希望图标在打印机时显示。我有另一个可以打印的黑色图标。打印时如何切换这些？

注意：我可以手动将两个图像插入页面，然后使用 CSS 显示和隐藏屏幕和打印的正确图标，但我正在寻找一种自动的方式，不需要我返回并编辑每个页面里面的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:07:26.640

另一种方法是`background-image`在图像上设置。所以你的 HTML 会是这样。

```
<img class="small-icon" width="16" height="16" /> 
```

然后你的 CSS 看起来会与此类似。

```
.small-icon {
  background-image: url(path/to/image.png);
} 
```

然后，您可以为每个样式表应用背景图像。这样，您就可以在桌面样式表中指定一个桌面图像，并在打印样式表中指定一个打印图像。

# python - 通过 paramiko 执行长时间运行的命令

> ID：10942236
> 
> 赞同：4
> 
> 时间：2012-06-08T02:04:03.587
> 
> 标签：python, ssh, paramiko

我正在寻找一种通过 paramiko 在远程服务器上执行脚本并在将输出写入标准输出时接收回输出的方法。这些脚本可以运行一个小时左右，但是在执行任务时，我想检索打印到标准输出的日志消息。我该怎么做呢？

如果在 paramiko 中不可能，是否有任何其他模块可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:45:34.393

掌握传输并生成您自己的频道。[通道](http://www.lag.net/paramiko/docs/paramiko.Channel-class.html)可用于执行命令，您可以在 select 语句中使用它来确定何时可以读取数据：

```
#!/usr/bin/env python
import paramiko
import select
client = paramiko.SSHClient()
client.load_system_host_keys()
client.connect('host.example.com')
transport = client.get_transport()
channel = transport.open_session()
channel.exec_command(COMMAND)
while True:
  rl, wl, xl = select.select([channel],[],[],0.0)
  if len(rl) > 0:
      # Must be stdout
      print channel.recv(1024) 
```

来源：[https ://stackoverflow.com/a/9470642/286937](https://stackoverflow.com/a/9470642/286937)

# c# - 乌里图像绘制

> ID：10942237
> 
> 赞同：-1
> 
> 时间：2012-06-08T02:04:11.620
> 
> 标签：c#, winforms

我想从 uri 中提取项目，例如：“http://profile/imgpath/0234245222.jpg”，但是我收到了不支持 uri 的错误。

我曾经将绘制项目图像作为字节，我从不从 uri 中绘制。

请帮帮我！

```
 private int mouseIndex = -1;

    private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (e.Index == -1) return;
        Image avatarContact = null;
        Mycontact contact = (Mycontact)listBox1.Items[e.Index];

        Brush textBrush = SystemBrushes.WindowText;
        if (e.Index > -1)
        {
            // Drawing the frame
            if (e.Index == mouseIndex)
            {
                e.Graphics.FillRectangle(SystemBrushes.HotTrack, e.Bounds);
                textBrush = SystemBrushes.HighlightText;
            }
            else
            {
                if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
                {
                    e.Graphics.FillRectangle(SystemBrushes.Highlight, e.Bounds);
                    textBrush = SystemBrushes.HighlightText;
                }else{
                    e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds);
                }
                // Drawing the Avatar Image
                if (contact.P_AVATAR_IMAGE != null)
                {
                    // displaying avatar picture
                    // if byte image
                    //MemoryStream stream = new MemoryStream(contact.P_AVATAR_IMAGE);
                    //avatarContact = Image.FromStream(stream );

                }
                else
                {
                    // if the contact has no avatar image, we can use a default one
                    if (contact.P_GENDER == "male") avatarContact = defaultMaleAvatar;
                    if (contact.P_GENDER == "female") avatarContact = defaultFemaleAvatar;
                }
                e.Graphics.DrawImage(avatarContact, e.Bounds.Left -2, e.Bounds.Top - 2, 50,40);

            }
        }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:38:30.683

看看这个[MSDN 论坛主题](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/1817a17b-36ae-4d8f-be94-e6afc1361955)，他们建议做这样的事情。

```
 Uri uri = new Uri("http://profile/imgpath/0234245222.jpg");
 WebRequest request = HttpWebRequest.Create(uri);
 WebResponse response = request.GetResponse();
 Stream stream = response.GetResponseStream();
 Image image = Image.FromStream(stream); 
```

# ios - 第一次比较两个 UIColors 不起作用

> ID：10942239
> 
> 赞同：0
> 
> 时间：2012-06-08T02:04:38.080
> 
> 标签：ios, uialertview

当我点击 UIAlertView 的 OK 按钮时，我需要更改视图的背景颜色，它的默认颜色是白色，所以每次用户点击 OK 时，我需要在两种颜色之间交替，例如白色和红色：

```
-(void)changeColor{

        if([self.view.backgroundColor isEqual: [UIColor whiteColor]]){

            self.view.backgroundColor=[UIColor redColor];
        }else {
            self.view.backgroundColor=[UIColor whiteColor];
        }
} 
```

问题是，在第一次单击确定时，颜色应该变成红色，但是它没有变成红色，所以我需要第二次单击确定按钮才能获得红色的视图背景颜色。我是否错过了从第一次开始改变颜色的东西？

这是`alertView:didDismissWithButtonIndex`委托方法：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{

    if (buttonIndex==0) {
        //NSLog(@"It's Ok button which has been clicked");
        //Do whatever you want, commonly call to another function like so:
        [self changeColor];
    }else
        if (buttonIndex==1) {
            //NSLog(@"It's Cancel button which has been clicked");
        }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T03:30:52.163

它可能与返回的“白色”不同`[UIColor whiteColor]`。如果您在 IB 中为您的视图选择白色并记录它，您将获得： `UIDeviceRGBColorSpace 1 1 1 1`

如果您随后将颜色设置为`[UIColor whiteColor]`，并再次记录，您将获得：`UIDeviceWhiteColorSpace 1 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:33:27.187

如前所述，它实际上不是 [UIColor whiteColor]。在视图加载时手动设置：

```
- (void)viewDidLoad
{
    self.view.backgroundColor = [UIColor whiteColor];
} 
```

# java - java.util.zip的算法

> ID：10942240
> 
> 赞同：-3
> 
> 时间：2012-06-08T02:04:54.397
> 
> 标签：java, algorithm

`java.util.zip`压缩中使用什么算法？LZW，霍夫曼，游程？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:09:22.750

Take a look at the package description.

[Package Summary](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/package-summary.html)

It says it uses the DEFLATE compression algorithm.

[DEFLATE](http://en.wikipedia.org/wiki/DEFLATE)

# iphone - 将变量添加到 writeToFile:atomically:

> ID：10942247
> 
> 赞同：0
> 
> 时间：2012-06-08T02:06:19.237
> 
> 标签：iphone, ios, xcode

我目前正在编写一个简单的 IOS 应用程序，将任务保存到表中。我想扩展应用程序并允许人们与其他人共享“列表”。在将其保存到 XML 或 URL 之前，我想使用 writeToFile:atomically: 尝试使用本地文件。这很好用。但我需要文件对使用它的人来说是唯一的，所以我想让文件对列表的标题是唯一的。标题字段是一个 UITextField。任务是一个可变数组这是我的代码：

```
- (void)saveTask:(id)sender;
{
NSString * original = [titleField text];
NSString * file = [NSString stringWithFormat:@"%@.plist", original];

[tasks writeToFile:@"/tmp/%@.plist",file 
        atomically:YES];
} 
```

我收到一个错误，要我自动在中间添加一个“：”。如何在 writeToFile:atomically: 中使用变量？如果这些都没有意义，请告诉我，以便我添加一些内容。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:24:54.680

通过你正在做的事情，你最终会得到具有 .plist.plist 扩展名的文件。

此外，您收到错误的原因是，代码应该是这样的

```
[tasks writeToFile:[NSString stringWithFormat:@"/tmp/%@.plist",file] 
        atomically:YES]; 
```

这可能是你想要的

```
- (void)saveTask:(id)sender;
{
    NSString * original = [titleField text];
    NSString * file = [NSString stringWithFormat:@"%@.plist", original];

    [tasks writeToFile:[NSString stringWithFormat:@"/tmp/%@", file] 
            atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:11:07.437

您的变量文件具有 plist 的扩展名。当您尝试将数组写入文件时，您再次将 plist 附加到路径中。所以，它给你一个错误。此类文件不存在。

# ajax - How does Facebook's Chat Window Remains open and in the same place When you navigate through pages

> ID：10942248
> 
> 赞同：7
> 
> 时间：2012-06-08T02:06:24.940
> 
> 标签：ajax, facebook, html, facebook-chat

How does Facebook's Chat Window Remains open and in the same place When you navigate through pages

Please before you answer:

1-I'm aware of Ajax very well and the current implementation in Facebook **is not normal Ajax** like it used to be in the past.

2-The URL of the page changes completely not the Hash part, and the whole page reloads but not the Chat window or panel.

I Found that the URL changes through this JS Part:

```
history.pushState({},"New Title Goes Here","http://facebook.com/Something"); 
```

But what about the data itself how doesn't it come ? the Network->XHR in Firebug or Chrome displays nothing in the XHR. so I guess it's not Ajax.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:00:57.260

对我来说看起来像很多ajax。

![在此处输入图像描述](../Images/23d29c997929a58acd6f355fce6fdd5b.png)

他们在重新加载聊天窗口时是有选择性的。即：如果您转到帐户设置和其他较少访问的页面。

对于聊天窗口本身的加载，我相当肯定他们使用长轮询（彗星）。

# javascript - google geochart marker size and color

> ID：10942251
> 
> 赞同：3
> 
> 时间：2012-06-08T02:07:24.800
> 
> 标签：javascript, google-visualization

This is a two part question.

First, is there a way to change the size of the markers on google's Geochart when the points being plotted are only cities and don't have a population or size tied to them? I'm just listing cities with no value attached to it and all of Google's examples have some sort of population attached to it.

For example, Google uses this bit of code which the size of the marker is reflected by the population.

```
function drawMarkersMap() {
  var data = google.visualization.arrayToDataTable([
    ['City',  'Population', 'Area'],
    ['Rome',     2761477,    1285.31],
    ['Milan',    1324110,    181.76],
    ['Naples',   959574,     117.27],
    ['Turin',    907563,     130.17],
    ['Palermo',  655875,     158.9],
    ['Genoa',    607906,     243.60],
    ['Bologna',  380181,     140.7],
    ['Florence', 371282,     102.41]
  ]); 
```

Is there any way to change the marker size without having it set by some sort of area or population?

Secondly, since I don't have a number for the marker size (only city name), how can I change the color of the markers? From what I understand, colorAxis is based off of the number tied to the city being plotted.

```
colorAxis: {colors: ['green', 'blue']} 
```

Here's a link to the API's documentation [https://developers.google.com/chart/interactive/docs/gallery/geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T10:34:33.260

通过一些调整，您可以做到这一点。

查看我创建的一些示例：

[http://cmoreira.net/interactive-world-maps-demo/svg-maps-of-the-states-in-usa/](http://cmoreira.net/interactive-world-maps-demo/svg-maps-of-the-states-in-usa/)

要更改颜色，您应该执行以下操作：

```
 var data = new google.visualization.DataTable();
    data.addColumn('string', 'Country'); 
    data.addColumn('number', 'Value');
    data.addColumn({type:'string', role:'tooltip'});

    data.addRows([[{v:"Olympia  Washington",f:"Olympia"},1,"Capital city of the state of Washington"],[{v:"Seattle Washington",f:"Seattle"},2,"Largest city of the state of Washington"],[{v:"Spokane  Washington",f:"Spokane"},3,"Seconde Largest city of the state of Washington"],[{v:"Vancouver  Washington",f:"Vancouver"},4,"Fourth largest city of the state of Washington"],]);

var options = {   colorAxis: {minValue: 1, maxValue:4,  colors: ['#4A9928','#204DA8','#992F1A','#2292C9',]},

    (...) 
```

所以，你增加一个数字，并给出尽可能多的不同颜色来匹配这些值。

要更改大小，我没有对其进行测试，但我想如果您使用以下值，类似的方法会起作用：

```
sizeAxis: {minValue: 1, maxValue:4,minSize:1,  maxSize: 4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:58:50.167

据我从文档中了解到，您无法直接定义 Google Geochart 中标记的颜色和大小。我建议您为您的任务尝试另一种解决方案 - [jVectorMap](http://jvectormap.com/examples/markers-world/)。使用`markers`参数定义标记时，您可以为每个标记设置大小和填充颜色，或使用 定义默认参数`markerDefaults`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-26T05:53:34.273

```
/*Code for geo chart configuration option*/
$scope.geoChartConfig = function (data, regionName) {
  $scope.chart = {};
  $scope.chart.type = "GeoChart";
  $scope.chart.data = data

  $scope.chart.options = {
    // width: 800,
    // height: 500,
    resolution: 'provinces', //code to set city wise data 
    region: regionName,
    sizeAxis: {
      // minValue: 1, //code to set min and max values in geo chart
      // maxValue: 4,
      minSize: 4, //code to set min and max marker size
      maxSize: 4
    },
    // markerOpacity:1,//code to set opacity or transparancy of chart
    displayMode: 'auto', //auto, chart will automatically detect data set whether it is regions or points
    keepAspectRatio: true, // code to set max size of chart according to div size html
    backgroundColor: '#eaf9ff',
    datalessRegionColor: 'white',
    defaultColor: '#f5f5f5',
    colorAxis: {
      colors: ['#1f77b4', '#55FF00', 'red'] //, '#ff0505'
    },
  };
} 
```

# spotify - Libspotify - Playlist not returning from Playlist container

> ID：10942256
> 
> 赞同：2
> 
> 时间：2012-06-08T02:08:14.617
> 
> 标签：spotify

I am using libspotify to iterate through a list of spotify usernames (stored in a database), and create a playlist container for these, and retreive all the playlists inside the container, and all the tracks inside every playlist.

I'm doing this as follows:

```
static sp_playlistcontainer_callbacks pc_callbacks = {
 NULL,
 NULL,
 NULL,
 &container_loaded
};

static sp_playlist_callbacks pl_callbacks = {
 NULL,
 NULL,
 NULL,
 NULL,
 &playlist_callback,
 NULL,
 NULL,
 NULL,
 NULL,
 NULL,
 NULL,
 NULL,
 NULL
};

static void container_loaded(sp_playlistcontainer *pc, void *userdata)
{
 char * username =  ((char *) userdata);
 sp_playlistcontainer_remove_callbacks(pc, &pc_callbacks, username);

 int num_playlists = sp_playlistcontainer_num_playlists(pc);
 std::cout << "User: " << username << " has : " << num_playlists << std::endl;

 //for each playlist, analyse each song
 //sp_playlist currentPlaylist;
 for(int i=0;i<num_playlists;i++)
 {
    sp_playlist * currentPlaylist = sp_playlistcontainer_playlist(pc,i);
    sp_playlist_add_callbacks(currentPlaylist, &pl_callbacks, username);
 }

 sp_playlistcontainer_release(pc);

}

static void playlist_callback(sp_playlist *pl, void *userdata)
{
 char * username =  ((char *) userdata);

 if(!sp_playlist_is_loaded(pl))
 {
    return;
 }
 sp_playlist_remove_callbacks(pl, &pl_callbacks, username);

 int numTracks = sp_playlist_num_tracks(pl);
 for (int i=0;i<numTracks;i++)
 {
    //do track processing  
 }

 std::cout << "Found: " << sp_playlist_name(pl) << std::endl;

}

//main function
//for(int i=0;...
sp_playlistcontainer * plc = sp_session_publishedcontainer_for_user_create(g_session, usernames[i]);
sp_playlistcontainer_add_callbacks(
 plc,
 &pc_callbacks,
 usernames[i]
);
//end for
//end main

//more functions etc... 
```

The playlist container callback works with out any problems, however the playlist callback only works sometimes for some playlists. I can retreive correctly 95% of all playlists each time. I have left the call back for 30 minutes+ without it raising the callback.

Am I missing something or is there a bug here that I need to work around?

Thanks for your time.

Regards, Rob

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T11:00:36.033

libspotify 需要通过调用 sp_session_process_events 从主线程定期调用，您似乎没有这样做，至少它不是您源代码的一部分。

有关此背景的信息，请参阅常见问题解答：[https ://developer.spotify.com/technologies/libspotify/faq/](https://developer.spotify.com/technologies/libspotify/faq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:57:15.773

您是否已验证无法获取的播放列表已发布以供公众查看？如果播放列表不是由用户发布的，则除非您以他们的身份登录，否则您无法获取该播放列表。

# jquery - Printing a DIV using Jquery and CSS on landscape mode

> ID：10942257
> 
> 赞同：0
> 
> 时间：2012-06-08T02:08:20.387
> 
> 标签：jquery, css, printing, landscape-portrait

I am currently trying to build a coupon system, The coupon has several informations on it (Address, name, google map, a QR code etc) Right now Iam trying to use a button in order to print the coupon only. The coupon is generated on a white page only the body the container DIV and a printing button exist on the page. The QR code is generated using a jquery plugin. My main problem is that no css styles are attached to the printing material although I have made the following statement on my header

```
<link href="/media/css/coupon.css" rel="stylesheet" media="screen" type="text/css" />
<link rel="stylesheet" href="/media/css/coupon.css" type="text/css" media="print" /> 
```

Also, I am seeking for a solution in order to force the coupon to be printed on landscape mode as the container DIV is too large for a single page on portrait mode. You can take a look on my live example over [here](http://jsfiddle.net/q8DeF/1/)

I have used for testing Chrome, Mozilla and Opera with OSX but still no luck.

# .net - Any code that duplicates how the DebuggerDisplayAttribute generates the resulting string?

> ID：10942258
> 
> 赞同：10
> 
> 时间：2012-06-08T02:08:24.457
> 
> 标签：.net, custom-attributes

Anyone know of any code that duplicates how the `DebuggerDisplayAttribute` parses and gathers the resultant string?

I would like to create a custom attribute that does nearly the sample thing. Similiar to "When a breakpoint is hit..." where you can use a variable within curly braces, as in "{variable}".

I already handle simple cases, such as "{Name}", but something like "{Foo.Name}" requires extra reflection code that I need help with.

Basically, I want to parse a string using the rules defined in the `DebuggerDisplayAttribute` documentation. Currently, I can parse and resolve "I am {GetName()}". I need help with something like "Foo's Name: {Foo.Name}"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T02:05:23.377

希望这段代码都适合...我使用 Microsoft Roslyn 及其 C# 脚本功能将属性值中的“代码”作为 C# 代码运行，制作了您正在尝试做的事情的非反射版本。

要使用此代码，请创建一个新的 C# 项目，并使用 NuGet 添加对 Roslyn 的引用。

首先是我用来测试的类，这样你就可以看到我尝试过的属性。

```
using System.Diagnostics;

namespace DebuggerDisplayStrings
{
    [DebuggerDisplay("The Value Is {StringProp}.")]
    public class SomeClass
    {
        public string StringProp { get; set; }
    }

    [DebuggerDisplay("The Value Is {Foo.StringProp}.")]
    public class SomeClass2
    {
        public SomeClass Foo { get; set; }
    }

    [DebuggerDisplay("The Value Is {Seven() - 6}.")]
    public class SomeClass3
    {
        public int Seven()
        {
            return 7;
        }
    }
} 
```

现在测试（是的，这些都通过了）：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace DebuggerDisplayStrings
{
    [TestClass]
    public class DebuggerDisplayReaderTests
    {
        [TestMethod]
        public void CanReadStringProperty()
        {
            var target = new SomeClass {StringProp = "Foo"};
            var reader = new DebuggerDisplayReader();
            Assert.AreEqual("The Value Is Foo.", reader.Read(target));
        }

        [TestMethod]
        public void CanReadPropertyOfProperty()
        {
            var target = new SomeClass2 {Foo = new SomeClass {StringProp = "Foo"}};
            var reader = new DebuggerDisplayReader();
            Assert.AreEqual("The Value Is Foo.", reader.Read(target));
        }

        [TestMethod]
        public void CanReadMethodResultAndDoMath()
        {
            var target = new SomeClass3();
            var reader = new DebuggerDisplayReader();
            Assert.AreEqual("The Value Is 1.", reader.Read(target));
        }
    }
} 
```

最后是真货：

```
using System.Collections.Generic;
using System.Diagnostics;
using System.Globalization;
using System.Text.RegularExpressions;
using Roslyn.Scripting.CSharp;

namespace DebuggerDisplayStrings
{
    public class DebuggerDisplayReader
    {
        // Get the fully evaluated string representation of the DebuggerDisplayAttribute's value.
        public string Read(object target)
        {
            var debuggerDisplayFormat = GetDebuggerDisplayFormat(target);
            if(string.IsNullOrWhiteSpace(debuggerDisplayFormat))
                return target.ToString();
            return EvaluateDebuggerDisplayFormat(debuggerDisplayFormat, target);
        }

        // Gets the string off the attribute on the target class, or returns null if attribute not found.
        private static string GetDebuggerDisplayFormat(object target)
        {
            var attributes = target.GetType().GetCustomAttributes(typeof(DebuggerDisplayAttribute), false);
            return attributes.Length > 0 ? ((DebuggerDisplayAttribute)attributes[0]).Value : null;
        }

        // Executes each bracketed portion of the format string using Roslyn,
        // and puts the resulting value back into the final output string.
        private string EvaluateDebuggerDisplayFormat(string format, object target)
        {
            var scriptingEngine = new ScriptEngine(new[] { GetType().Assembly });
            var formatInfo = ExtractFormatInfoFromFormatString(format);
            var replacements = new List<object>(formatInfo.FormatReplacements.Length);
            foreach (var codePart in formatInfo.FormatReplacements)
            {
                var result = scriptingEngine.Execute(codePart, target);
                replacements.Add((result ?? "").ToString());
            }
            return string.Format(formatInfo.FormatString, replacements.ToArray());
        }

        // Parse the format string from the attribute into its bracketed parts.
        // Prepares the string for string.Format() replacement.
        private static DebuggerDisplayFormatInfo ExtractFormatInfoFromFormatString(string format)
        {
            var result = new DebuggerDisplayFormatInfo();
            var regex = new Regex(@"\{(.*)\}");
            var matches = regex.Matches(format);
            result.FormatReplacements = new string[matches.Count];
            for (var i = matches.Count - 1; i >= 0; i-- )
            {
                var match = matches[i];
                result.FormatReplacements[i] = match.Groups[1].Value;
                format = format.Remove(match.Index + 1, match.Length - 2).Insert(match.Index+1, i.ToString(CultureInfo.InvariantCulture));
            }
            result.FormatString = format;
            return result;
        }
    }

    internal class DebuggerDisplayFormatInfo
    {
        public string FormatString { get; set; }
        public string[] FormatReplacements { get; set; }
    }
} 
```

希望对您有所帮助。这只是大约一个半小时的工作，所以单元测试无论如何都没有完成，我敢肯定那里有错误，但它应该是一个可靠的开始，如果你对罗斯林方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:28:22.137

我假设这是供您自己（团队）使用的。我没有亲自尝试过，但是您是否查看了有关如何自定义[此处](http://msdn.microsoft.com/en-us/library/x810d419.aspx)找到的 DebuggerDisplay 属性的说明？

# proxy - mod_rewrite with AJAX applications: possible?

> ID：10942259
> 
> 赞同：1
> 
> 时间：2012-06-07T22:06:17.407
> 
> 标签：proxy, apache, mod-rewrite

I am trying to run Shell In a Box ([link](http://code.google.com/p/shellinabox/)) through another server (the computer running shellinabox is not accessible from the internet) . Ideally I could use ProxyPass in the Apache config to have a reverse proxy. Problem is I can't access the conf file. So I tried using .htaccess and I discover that I cannot use ProxyPass in there. So I tried and used mod_rewrite to do the job. Currently I have the following on the .htaccess file

```
RewriteEngine On
RewriteRule ^$ http://10.1.13.236:4200/ [P] 
```

However while it displays the title correctly and if I open up the source code I can see there is something in the page, nothing is diplayed on the screen (it remains blank). My suspicion is that there are problems with AJAX and this kind of proxy.

What I am trying to accomplish with the mod_rewrite as close as possible behaviour to ProxyPass (Mirorr a website in a subdirectory).

Is this possible? Is there some other solution (I tried phproxy and khproxy but neither of them is able to display anything)?

# java - 将 ArrayList 写回 XML 文件

> ID：10942270
> 
> 赞同：1
> 
> 时间：2012-06-08T02:11:21.687
> 
> 标签：java, android

当我的活动开始时，我会检查现有的数据文件，如果没有，我会调用一个提供空白文件的 Web 服务。该文件被读入一个 ArrayList 集合，用户根据需要进行更改。现在我需要最佳方法的建议。

我应该尝试将 ArrayList 中的更新内容与 XML 文件中的元素匹配（有一个可用于匹配的 ID 字段）还是应该只写出 ArrayList 覆盖旧的 xml 文件？无需担心维护 hx。

如果我写出文件（我想的是要走的路），我是否必须将 DataObject 类中的所有内容（即所有属性）装饰为可序列化的或仅在类级别。我是否还需要以某种方式将 ArrayList 集合标记为可序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:40:26.040

如果您只想将其写为 XML，则无需将您的`ArrayList`或标记为可序列化，请检查例如[XStream](http://xstream.codehaus.org/)以进行基本对象到 XML 的转换。`DataObject`

此外，由于您在其中包含全部内容，`ArrayList`这意味着在任何给定时间点您都`ArrayList`包含更新的数据，如果您只是覆盖 XML 文件，那么从编码的角度来看，您将更容易进行编码，因为您不需要进行任何脏检查。

# symfony - Doctrine2 类表继承和级联删除

> ID：10942273
> 
> 赞同：2
> 
> 时间：2012-06-08T02:12:30.803
> 
> 标签：symfony, doctrine-orm

我正在将 Doctrine2.2.2 与 Symfony 2.0.15 一起使用。我注意到在使用类表继承时，例如：

```
/**
 * @Entity
 * @InheritanceType("JOINED")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"person" = "Person", "employee" = "Employee"})
 */ 
```

这将在子实体/表（在本例中为员工）上创建外键级联删除约束。Doctrine[在这方面的文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#class-table-inheritance)包含一个看起来很重要的黄色框，上面写着：

> 当您不使用 SchemaTool 生成所需的 SQL 时，您应该知道删除类表继承会在所有数据库实现中使用外键属性 ON DELETE CASCADE。自己未能实现这一点将导致数据库中出现死行。

这对我来说没有意义。这是否意味着如果您不使用 SchemaTool 那么 Doctrine 将创建外键级联删除约束？如果确实使用了 SchemaTool，Doctrine 会使用它的内置级联功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:19:39.350

也就是说，当您使用 SchemaTool 生成 SQL 时，它还会将适当的 ON DELETE CASCADE 部分添加到您的外键约束中。

```
ALTER TABLE Employee ADD CONSTRAINT FK_55D6C234BF396750 
    FOREIGN KEY (id) REFERENCES Parent(id) ON DELETE CASCADE; 
```

如果您不使用 SchemaTool，则需要确保外键约束具有 ON DELETE CASCADE 部分，否则当您从 Employee 表中删除行时，您最终会在父表中出现孤立行。

# silverlight - Serialization Exception

> ID：10942275
> 
> 赞同：0
> 
> 时间：2012-06-08T02:13:35.653
> 
> 标签：silverlight, windows-phone-7

I'm trying to store and retrieve data without one application use , means it should refresh instantly on the other list when i redirect , but i'm facing some problem with the saving. would be nice if you could help me out. is the structure alright?

Serialization Exception Type 'System.Collections.Generic.List`1[[Med.sMedication, Med, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' with data contract name 'ArrayOfsMedication:http://schemas.datacontract.org/2004/07/MedReminder_v1' is not expected. Add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.

Class File

```
public class sMedication
{

    public string Name { get; set; }
    public string Remarks { get; set; }
    public string Dosage { get; set; }
    public string Duration { get; set; }
    public DateTime StartDate { get; set; }

    List<string> medicationItem = new List<string> { "", "", "", "", "" };

    public void addtoList()
    {

    }

    public object save(object bigobject)
    {
        List<Object> Obj = new List<Object>();
        Obj.Add(bigobject);

        var settings = IsolatedStorageSettings.ApplicationSettings;
        settings.Add("Obj", Obj);

        settings.Save();
        return true;
    }

} 
```

Adding code

```
 private void Submit_Clicked(object sender, RoutedEventArgs e)
    {
        sMedication med = new sMedication();
        med.Name = txtName.Text;
        med.Dosage = txtDosage.Text;
        med.Duration = txtDuration.Text;
        med.StartDate = startDate.Value.Value;

        List<sMedication> medicationItem = new List<sMedication> { new sMedication { Name = med.Name, Dosage = med.Dosage } };

        //{ Name, Remarks, Dosage, Duration, Convert.ToString(StartDate) };

        med.save(medicationItem);
        NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:19:32.933

`ApplicationSettings`使用`DataContractSerializer`. 您可以自己使用它来测试对象的序列化。或者，您可以自己处理序列化（和反序列化）并将字符串存储在`ApplicationSettings`.

您的代码也比它需要的复杂得多。您正在尝试保存单个`sMedication`实例，但将其包装在 a 中`List<sMedication>`（即使只有其中一个），然后将其`List<object>`再次包装在 a 中，即使它只是一个对象。

# c# - 转换列表 列出 ?

> ID：10942279
> 
> 赞同：3
> 
> 时间：2012-06-08T02:14:43.237
> 
> 标签：c#, generics, wpfdatagrid

在使用 Visual FoxPro 将近 20 年之后，我深受强类型语言的困扰。:)。

我正在尝试使用一个接口创建一个通用方法来设置`DataGrid.ItemsSource`属性。

开始了...

首先，我有一个类（POCO）：

```
public class PersonVO
{
    public int PersonID { get; set; }
    public string Name { get; set; }
} 
```

然后我创建了一个界面：

```
public interface IBussiness
{
    List<T> GetAll<T>();
} 
```

然后，实现这个接口的其他类......

```
public class PersonBLL : IBussiness
{
    public List<PersonVO> CreateNewList()
    {
        List<PersonVO> list = new List<PersonVO>();
        list.Add(new PersonVO() { PersonID = 1, Name = "Robert" });
        list.Add(new PersonVO() { PersonID = 2, Name = "Julie" });
        list.Add(new PersonVO() { PersonID = 3, Name = "Bernard" });
        return list;
    }

    public List<T> GetAll<T>()
    {
        return CreateNewList();
    }
} 
```

该语句`return CreateNewList()`显示错误：

> C#：“System.Collections.Generic.List”类型的方法不能返回“System.Collections.Generic.List”类型的实例

所以我把这个方法改成：

```
public List<T> GetAll<T>()
{
    return CreateNewList() as List<T>;
} 
```

它编译！

现在，我的问题开始了……我有一个 WPF usercontrol `MyTabItemList`。

我的意思是，我在运行时创建了一个新的 WPF TabItem，并注入了我的 BLL 类（在这个例子`PersonBLL`中，但在现实世界中我有很多......）。

```
MyTabItemList myTabItem = new MyTabItemList(new PersonBLL()); 
```

MyTabItemList 是这样的：

```
public partial class MyTabItemList : TabItem
{
    IBussiness oBLL;
    public MyTabItemList(IBussiness oBLL)
    {
        InitializeComponent();
        this.oBLL = oBLL;
        MyGrid.ItemsSource = oBLL.GetAll<object>();
    }
} 
```

它运行正常，但不像我希望的那样工作。

`oBLL.GetAll<object>()`总是返回`null`。

如果我更改`<object>`为`<PersonBLL>`（如下所示），它可以工作，但在这种情况下`MyTabItemList`只适用于`PersonBLL`类：

```
MyGrid.ItemsSource = oBLL.GetAll<PersonBLL>(); 
```

我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T02:20:48.027

为什么要从这样的非通用组件中返回通用列表？

```
public interface IBussiness
{
    List<T> GetAll<T>();
} 
```

我认为你的目的是：

```
public interface IBussiness<T>
{
    List<T> GetAll();
} 
```

并制作你的`PersonBLL`工具`IBussiness<PersonVO>`：

```
public class PersonBLL : IBussiness<PersonVO>
{
    public List<PersonVO> CreateNewList() { ... }

    public List<PersonVO> GetAll()
    {
        return CreateNewList();
    }
} 
```

这是正常模式之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T02:25:58.867

Jeffrey 的回答是正确的，但听起来您实际上是在尝试使用泛型实现存储库模式

[在这里](http://www.remondo.net/repository-pattern-example-csharp/)查看更多信息 - 您可能正在尝试重新发明轮子。

# mediawiki - How to remove text "Redirected from Main Page" in MediaWiki?

> ID：10942281
> 
> 赞同：3
> 
> 时间：2012-06-08T02:15:32.270
> 
> 标签：mediawiki

MediaWiki's main page has the URL of

> site.com/wiki/index.php?title=Main_Page

and a gigantic header that reads Main Page. The official way to rename Main Page is by moving the Main Page article to an article with a new name, plus a redirect. However, doing that adds a phrase

> (Redirected from Main Page)

right under the new header, which is unsightly. How do I get rid of that?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T09:14:43.657

在您的 wiki 上编辑名为“ **MediaWiki:Mainpage** ”的页面（您需要管理员权限）以设置新的主页标题。

有关详细信息，请参阅[“如何更改哪个页面是主页？”](https://www.mediawiki.org/wiki/Manual%3aFAQ#How_do_I_change_which_page_is_the_main_page.3F) 在 MediaWiki 常见问题解答中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:34:43.290

您可以使用 CSS[1] 轻松隐藏重定向文本。在您的 wiki 中编辑页面 MediaWiki:Common.css 并添加以下内容：

```
.page-Main_Page #contentSub { display: none } 
```

其中“Main_Page”是新主页的名称。此外，如果您真的想更改主页，以便单击站点徽标或侧边栏中的主页链接将您带到不同的页面，您可以编辑 MediaWiki:Mainpage[2] 并输入您的新名称主页。

[1] [https://www.mediawiki.org/wiki/Manual:CSS](https://www.mediawiki.org/wiki/Manual:CSS)

[2] [https://www.mediawiki.org/wiki/Manual:FAQ#How_do_I_change_which_page_is_the_main_page.3F](https://www.mediawiki.org/wiki/Manual:FAQ#How_do_I_change_which_page_is_the_main_page.3F)

# c++ - 在 Windows 64 中编译 QT - 未定义的引用

> ID：10942282
> 
> 赞同：2
> 
> 时间：2012-06-08T02:15:56.647
> 
> 标签：c++, qt, windows-7-x64, qmake, undefined-reference

行。我刚刚使用在线安装程序从[http://qt.nokia.com/downloads](http://qt.nokia.com/downloads)安装了 Qt 。我安装了 MinGW、make、gcc 和 g++。我还添加了变量`QMAKESPEC`，`QTDIR`并将 MinGW 和 Qt 中的目录附加到`PATH`变量中。运行 qmake 和 make 时，我收到大量关于未定义引用的错误`QGraphicsScene`，`QGraphicsView`等等。

这是众多之一：

`./debug/mox_roiwindow.o:moc_roiwindow.cpp:(.rdata$_ZTV9roiwindow[vtavle for roiwindow]+0x74): undefined reference to 'QGRaphcisScene::drawForeground(QPainter*, QRectF const&)'`

makefile 中的 LIBS 部分是：

`LIBS = -L'c:/QtSDK/Desktop/Qt/4.8.0/msvc2008/lib' -lmingw32 -lqtmaind -lQtGuid4 -lQtCored4`

包含部分是：

`INCPATH = -I'../../../../QtSDK/Desktop/Qt/4.8.0/msvc2008/include/QtCore' -I'../../../../QtSDK/Desktop/Qt/4.8.0/msvc2008/include/QtGui'`

这似乎是正确的。我试图通过谷歌查找解决方案，要么一无所获，要么解决方案似乎没有帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:10:57.220

有点奇怪....您正在尝试链接`mingw32`，同时您正在使用`msvc2008`库路径。它们是独立且不兼容的编译器环境，因此如果您尝试链接从两者编译的对象，您可能会遇到此错误。你用的是什么编译器？？你在使用 QtCreator 吗？编译器必须与用于编译 Qt 库的编译器相同...

# javascript - 使用 JavaScript 在 :hover 上获取另一个元素的 innerHTML

> ID：10942285
> 
> 赞同：0
> 
> 时间：2012-06-08T02:16:28.883
> 
> 标签：javascript, css, dhtml

我正在使用不支持 onmouseover 或 onmouseout 的平台。我需要使用 JavaScript 更改另一个元素的 innerHTML。我想我可能可以用 :hover 来做到这一点，但如果有更好的 CSS/HTML 方法，我会去的。我将如何关联 JavaScript 和 CSS 以使其工作？

基本上，

```
<div id="trigger">To hover over</div>
<div id="dynamicContent">To change innerHTML of</div> 
```

关于如何使用上面的模板完成此操作的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:24:07.787

```
document.querySelector("#trigger").addEventListener("mouseover", function(){
    var txt = document.querySelector("#dynamicContent").innerHTML;
    document.querySelector("#dynamicContent").innerHTML = "Changed.";

    this.addEventListener("mouseout", function(){
        document.querySelector("#dynamicContent").innerHTML = txt;
    });
}); 
```

`:)`

# php - Registration wont input values in database

> ID：10942286
> 
> 赞同：0
> 
> 时间：2012-06-08T02:16:40.550
> 
> 标签：php, registration

The values wont insert into my database, the message tells me that registration is complete but nothing gets stored in database, please help. Thanks!

> Your post does not have much context to explain the code sections; please explain your scenario more clearly.

Heres code:

```
$submit = $_POST['submit'];

$name = strip_tags($_POST['fullnamefield']);
$regemail = strip_tags($_POST['regemailfield']);
$password = strip_tags($_POST['regpasswordfield']);
$repeatpassword = strip_tags($_POST['regpasswordconfirmfield']);
$date = date("Y-m-d");

if ($submit)
{

    if ($name&&$regemail&&$password&&$repeatpassword)
    {

        if ($password==$repeatpassword)
        {

        if (strlen($name)>32||strlen($regemail)>1024)
        {
         echo "Length of name or email is too long.";
        }
        else
        {
        if (strlen($password)>32||strlen($password)<6)
        {
        echo "Password must be between 6 and 32 characters long.";
        }
        else
        {

        $password = md5($password);
        $repeatpassword = md5($repeatpassword);

        $connect = mysql_connect("xx","xx","xx");
        mysql_select_db("xx");

        $queryreg = mysql_query("

        INSERT INTO users VALUES ('','$name','$regemail','$password','$date')

        ");

        die("You have been registered!");

        }

        }
        }
        else
            echo "Your passwords do not match";
    }
    else
        echo "Please fill in all fields.";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:42:03.417

要获得一些诊断信息，我会添加

```
or die(mysql_error()); 
```

到您的 mysql_query 语句制作最后一行

```
$queryreg = mysql_query("

    INSERT INTO users VALUES ('','$name','$regemail','$password','$date')

    ") or die (mysql_error()); 
```

这将输出mysql在查询期间出现的任何错误。如果您不确定自己在看什么，请将它们发回此处。

希望这可以帮助。

# android - Disable/Hide status bar in Android

> ID：10942288
> 
> 赞同：1
> 
> 时间：2012-06-08T02:17:16.947
> 
> 标签：android, statusbar

I am developing an application which should have some extra security features. In this case I have to disable/hide the status bar. I am running with Android 2.2.

And also my device is rooted and if there is an ADB command to disable status bar, it would be fine as well.

For now what I do is basically when user try to expand the status bar I collapse it by invoking some . But sometimes user can expand it and click on the items in status bar notifications.

This code part will do this,

```
 public void onWindowFocusChanged(boolean hasFocus)
 {
         try
         {
            if(!hasFocus)
            {
                 Object service  = getSystemService("statusbar");
                 Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
                 Method collapse = statusbarManager.getMethod("collapse");
                 collapse .setAccessible(true);
                 collapse .invoke(service); 
            }
         }
         catch(Exception ex)
         {

         }
 } 
```

And also I tried setting application as full screen app. But it also has some problems.

Can someone please help me to solve this issue?

Can someone please help me to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T04:09:17.180

> 您可以选择主题微调器并选择“Theme.NoTitleBar.Fullscreen”。
> 
> 使用代码：-

```
requestWindowFeature(Window.FEATURE_NO_TITLE); getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

> 上面写的代码放在oncreate方法中

# php - 将 cakephp 命名参数添加到列表选择的 url

> ID：10942290
> 
> 赞同：2
> 
> 时间：2012-06-08T02:17:33.427
> 
> 标签：php, javascript, jquery, cakephp, cakephp-1.3

假设我有一个选择列表如下：

```
<select name='languages'>
    <option value='german'>German</option>
    <option value='english'>English</option>
</select> 
```

当用户选择一种语言时，我如何使用 javascript/jQuery 刷新页面，并在每次用户做出选择时将[命名参数样式](http://book.cakephp.org/1.3/view/947/Named-parameters/)参数添加到我的 url 的末尾，例如，如果用户选择德语，则 url 应该看起来像：

```
http://my_app/my_controller/my_action/language:select_option_value_for_german 
```

如果用户选择英语，则 url 将是：

```
http://my_app/my_controller/my_action/language:select_option_value_for_english 
```

因此，每次用户进行选择时，都会刷新同一个页面，并在 url 末尾添加命名参数。

**注意**：我希望命名参数在每个请求中只出现一次，换句话说，我不希望它们在 url 的末尾重复，例如：

```
http://my_app/my_controller/my_action/language:select_option_value_for_german/language:select_option_value_for_english 
```

非常感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:36:53.820

在您的 js 文件中，聆听您选择的更改事件并构建 url 并导航到构建的 url。

```
$('select[name="languages"]').change(function(){
    var url ="/my_app/my_controller/my_action/language:" + $(this).val();
    window.location = url;
});​​​ 
```

使用默认值更改您的选择框，以便您在每次刷新时选择德语。我错过了注意到每次刷新默认都是德语这就是为什么你总是得到英语

```
<select name='languages'>
    <option>Select language</option>
    <option value='german'>German</option>
    <option value='english'>English</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:09:45.443

```
$('select[name="language"]').on('change', function() {
    var pn = window.location.protocol +
             window.location.hostname +
             window.location.pathname +
             window.location.hash;
    window.location.assign(pn + '?language=' + $(this).val());
}); 
```

# google-tv - How to get default gateway using Ethernet, not wifi

> ID：10942291
> 
> 赞同：1
> 
> 时间：2012-06-08T02:17:46.843
> 
> 标签：google-tv

i'm looking forward to know how to programmatically find the default gateway Address. i've already found default gateway Address for Wifi-Manager(getDhcpInfo()), but i don't find it in Ethernet mode. please. Help me~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:28:07.110

我假设这是针对 Google-TV 的，如果您将 Google-TV 添加到标题中可能会有所帮助。有没有办法在这个设备上静态声明网关？如果有，您可以尝试登录路由器，找到默认网关，然后直接将网关放入设备的配置选项中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:36:04.990

以下是在以太网上查找 Google TV 设备 IP 地址的方法：

```
private static final String IPADDRESS_PATTERN =
        "^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
                "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
                "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
                "([01]?\\d\\d?|2[0-4]\\d|25[0-5])$";

public String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en =
                NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr =
                    intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                String ipAddress = inetAddress.getHostAddress().toString();
                if (!inetAddress.isLoopbackAddress()
                        && validate(ipAddress)) {

                    return ipAddress;
                }
            }
        }
    } catch (SocketException e) {
        // TODO(mjoshi): Auto-generated catch block
        e.printStackTrace();
    }
    return null;
}

/**
 * Validate ip address with regular expression
 * 
 * @param ip ip address for validation
 * @return true valid ip address, false invalid ip address
 */
public boolean validate(final String ip) {
    Pattern pattern = Pattern.compile(IPADDRESS_PATTERN);
    Matcher  matcher = pattern.matcher(ip);
    return matcher.matches();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T16:55:21.297

这是我们在 Able Remote 中使用的代码。请注意，我们检查接口是否已启动（仅适用于 Android 2.3 及更高版本）。这是必要的，因为用户报告了具有多个 IP 地址但一次只有一个存在的设备：

```
public static String getLocalIpAddress() {
        try {
            for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                if (intf.isUp()) {
                    for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                        InetAddress inetAddress = enumIpAddr.nextElement();
                        if (!inetAddress.isLoopbackAddress()) {
                            if (inetAddress instanceof Inet4Address) { // only want ipv4 address
                                return inetAddress.getHostAddress().toString();
                            }
                        }
                    }
                }
            }
        } catch (Throwable e) {
            Log.e(LOG_TAG, "Failed to get the IP address", e);
        }

        return null;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T04:41:49.690

如果您希望一次有两个连接，那么您可以转到命令提示符并检查您公布的路由。如果路由有一个默认网关，那么您可以连接到该特定网络。如果它有两个默认网关，那么您可以访问两个随机的网络

谢谢鲍米

# c++ - 发布模式下的 Windbg 不起作用

> ID：10942300
> 
> 赞同：1
> 
> 时间：2012-06-08T02:19:10.363
> 
> 标签：c++, debugging, mfc, windbg

我编译了这个小型 MFC 应用程序，当我使用 VS2010 单击 CButton 时会引发异常。

它处于**发布模式**并创建了 pdb 文件和映射文件。

然后我使用这些命令，symfix 和 sympath+ 让调试器知道符号在哪里。.reload 后我输入 g，单击异常按钮，它按预期崩溃，但这里的问题是当我执行 kb 时，它没有显示完整的调用堆栈，而它成功显示了它的调用堆栈，指向异常来自的位置当我在**调试模式下**编译这个应用程序时。

我相信这应该是一个关于编译选项的简单问题，但我显然遗漏了一些东西。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:34:09.447

在发布模式下，代码优化处于开启状态，因此编译器会重新排列您的代码并丢弃其中的一部分。这可能是您没有看到您期望看到的内容的原因。尝试通过转到项目 -> 属性 -> 配置属性 -> C/C++ -> 优化 -> 优化来禁用优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:48:13.620

您必须确保您的 pdb 具有完整的符号，因此您需要在 pdb 设置中指定不要剥离私有符号，这将确保您将获得完整的调用堆栈，优化设置不应该导致您的问题。

想一想，如果 Windows 代码没有优化，当你调试 Windows 代码时，你怎么能从符号服务器获取 MicroSoft pdbs 工作正常？

有关[http://msdn.microsoft.com/en-us/library/958x11bc%28v=vs.90%29.aspx的更多信息，请参阅此内容](http://msdn.microsoft.com/en-us/library/958x11bc%28v=vs.90%29.aspx)

在您的项目设置下：Configuration Properties > Linker > Debugging 确保“Strip Private Symbols”为空。

您可以通过输入以下内容来确认 pdb 是否与您的代码匹配：

```
!chksym mydll 
```

或执行相同操作的未记录命令：

```
!itoldyouso mydll 
```

# image-processing - 如何生成数据 URI

> ID：10942312
> 
> 赞同：5
> 
> 时间：2012-06-08T02:20:48.943
> 
> 标签：image-processing, data-uri, image-conversion

我最近遇到了 Data URI 方案，并且正在[Wikipedia](http://en.wikipedia.org/wiki/Data_URI_scheme)上阅读它。

示例代码如下所示：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA
          AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO
          9TXL0Y4OHwAAAABJRU5ErkJggg==" alt="Red dot"> 
```

我的问题是：如何生成在`iVBORw0KGgoAAAA...`网站上使用的代码（IE: ）？

*注意：*我正在专门寻找如何在没有服务器端脚本的情况下完成此操作。但是您仍然可以为可能遇到此问题的其他人发布服务器端脚本方式。我也看到过可以为你做这件事的网站，我自己怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-01T18:08:28.537

在 Google Chrome 中查看图像时，这是一种很酷的方法：

1.  **右键单击**有问题的图像并选择**检查元素**
2.  **右键单击**图像的 URL（光标将变成一只手）并选择**在资源面板中打开链接**
3.  **右键单击**资源面板中的图像，然后选择**将图像复制为数据 URL**
4.  **将数据 URI粘贴**到您需要的位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:24:22.010

[如果从Wikipedia 文章](http://en.wikipedia.org/wiki/Data_URI_scheme)中不清楚，数据 URI 只是将文件的全部内容（例如 png）推入文本链接的一种方式。由于许多有趣的文件类型包含不表示为文本的数据，因此该方案使用[base64](http://en.wikipedia.org/wiki/Base64)编码以文本格式表示所有可能的二进制数据。

此外，当浏览器从 Web 服务器检索文件时，Web 服务器会以[MIME 类型](http://en.wikipedia.org/wiki/Internet_media_type)的形式告诉浏览器它是什么类型的文件。由于数据 URI 没有 Web 服务器（甚至没有文件名！）来识别文件的类型，因此该信息必须包含在 URI 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T16:04:53.913

（我还不能发表评论，所以我将其添加为新答案。）

类似于[Oran D. Lord's answer](https://stackoverflow.com/questions/10942312/how-to-generate-a-data-uri/26147772#26147772)，这应该在 Firefox 中工作：

1.  在 Firefox 中打开图像文件（或打开带有图像的网页）。
2.  右键单击图像并选择“检查元素”。
3.  在 Inspector 中，图像标签现在应该突出显示。右键单击图像标签并选择“复制图像数据-URL”（即使它可能不是真正的 URL，这就是当前菜单项的名称）。
4.  将数据 URI 粘贴到您需要的任何位置。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-10T07:24:22.410

在做了更多阅读之后，我发现了一个链接到我信任的网站的网站[。](http://websemantics.co.uk/online_tools/image_to_data_uri_convertor/)效果很好，并为我提供了插入 HTML、CSS 和原始数据的代码。我发现的非常好的和最好的方法。但请注意，由于 Google 或 AVG 的恶意软件，我访问的一些用于生成数据 URI 的站点已被阻止。不过这个好像还可以[。](http://websemantics.co.uk/online_tools/image_to_data_uri_convertor/)

# grails - 如何在 Grails 中按（子）域类过滤？

> ID：10942313
> 
> 赞同：1
> 
> 时间：2012-06-08T02:20:50.643
> 
> 标签：grails, grails-domain-class

我有一个父域类，产品：

```
class Product {
    ...
} 
```

以及扩展它的 20 多个子类。其中之一是 ProductGroup：

```
class ProductGroup extends Product {
    ...
} 
```

在创建 ProductGroup 的实例时，我有一个多选输入，其中列出了产品，用户可以选择他/她想要添加到组中的产品。现在，我使用 Product.list() 来填充多选输入。我想要做的是列出所有产品的列表，不包括 ProductGroup 实例。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:26:03.437

如果不使用本机 GORM，您应该能够使用 HQL 执行此操作：

```
Product.findAll("from Product p where p.class != ProductGroup") 
```

# c++ - Random numbers based on a probability

> ID：10942318
> 
> 赞同：9
> 
> 时间：2012-06-08T02:21:35.073
> 
> 标签：c++, random, distribution, probability

I'm having trouble generating random numbers that do not follow a discrete uniform distribution.

So for example, say I have 5 numbers (to keep it simple), a probability of number k being generated would be k/15\. (k = 1 to 5)

My idea is to generate a random number j using rand(), and if this number j is:

1 => then number 1 is generated

2 or 3 => num 2

4 or 5 or 6 => num 3

7 or 8 or 9 or 10 => num 4

11 or 12 or 13 or 14 or 15 => num 5

Now scale this to generating 1-10, 1-100, 1-1000\. Does this work the way I intend it to? I've constructed a loop that pretty much does this every time a number needs to be generated, I think it's probably inefficient since it goes up until it finds the j number generated in one of the ranges... What could be a better way to do this?

EDIT: or maybe create an array once with the proper numbers and then pull out with rand() better solution?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T02:32:51.030

您似乎走在正确的轨道上，但是 C++ 已经为此提供了专门的随机数分布，`std::discrete_distribution`

```
#include <iostream>
#include <vector>
#include <map>
#include <random>

int main()
{
    std::random_device rd;
    std::mt19937 gen(rd());

    // list of probabilities    
    std::vector<double> p = {0, 1.0/15, 2.0/15, 3.0/15, 4.0/15, 5.0/15};
    // could also be min, max, and a generating function (n/15 in your case?)
    std::discrete_distribution<> d(p.begin(), p.end());

    // some statistics
    std::map<int, int> m;
    for(int n=0; n<10000; ++n) {
        ++m[d(gen)];
    }
    for(auto p : m) {
        std::cout << p.first << " generated " << p.second << " times\n";
    }
} 
```

在线演示：http: [//ideone.com/jU1ll](http://ideone.com/jU1ll)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-08T02:36:55.620

考虑`s`从 1 到 的整数之和`n`是`s = n * (n + 1) / 2`。求解`n`得到`n = (± sqrt(8*s + 1) - 1) / 2`。我们可以忽略负平方根，因为我们知道`n`它是正的。因此`n = (sqrt(8*s + 1) - 1) / 2`。

因此，插入`s`1 到 15 之间的整数：

```
s  n
01 1.000000
02 1.561553
03 2.000000
04 2.372281
05 2.701562
06 3.000000
07 3.274917
08 3.531129
09 3.772002
10 4.000000
11 4.216991
12 4.424429
13 4.623475
14 4.815073
15 5.000000 
```

如果我们取每个计算的上限`n`（不小于 的最小整数`n`），我们会得到：

```
s  n
01 1
02 2
03 2
04 3
05 3
06 3
07 4
08 4
09 4
10 4
11 5
12 5
13 5
14 5
15 5 
```

因此，您可以从均匀分布转到恒定空间和恒定时间的分布（无需迭代，也无需预先计算的表）：

```
double my_distribution_from_uniform_distribution(double s) {
    return ceil((sqrt(8*s + 1) - 1) / 2);
} 
```

NB 这依赖于`sqrt`给出一个完美正方形的精确结果（例如，精确地返回 7 给定精确的 49）。这通常是一个安全的假设，因为 IEEE 754 要求平方根的精确舍入。

IEEE 754 双精度可以表示从 1 到 2^53 的所有整数（以及许多更大的整数，但在 2^53 之后不连续）。所以这个函数应该对`s`从 1 到`floor((2^53 - 1) / 8) = 1125899906842623`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:32:43.337

您可以利用奇怪的算术事实：

```
S(n) = 1 + 2 + 3 + ... + (n - 1) + n 
```

或简化：

```
S(n) = n * (n + 1) / 2 
```

这使您可以避免存储数组。

# facebook - Creating Facebook App Results in 500 Error

> ID：10942320
> 
> 赞同：-3
> 
> 时间：2012-06-08T02:22:54.933
> 
> 标签：facebook

I'm trying to create a facebook application that i'll connect with my MVC site. I go to developers.facebook.com, select Apps tab, and it gives me a 500 error... any idea why? I have another account where it works fine. What does facebook require for me to create an application?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:11:25.210

Facebook requires an internal API to work for you to create an application; something is evidently wrong with it at the moment. What's going wrong is a mystery, hence the 500 and not a specific error. Rest assured its not just you though, I cannot register an app right now either.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:18:16.793

I tried to follow an developers invitation link and got the same error. I also get it when browsing into the apps section generally. Switching to a fellow developers account resulted in an instant login, so the problem is account-related.

# php - PHP 魔术 __get 和 __set。动态创建的字段是否被认为是“可访问的”？

> ID：10942323
> 
> 赞同：1
> 
> 时间：2012-06-08T02:23:13.637
> 
> 标签：php, magic-methods

我对 PHP 的 OO 系统和小怪癖有些陌生。根据我的阅读，当您访问不可“访问”的字段时，会调用 __get 和 __set 方法。因此，显然访问类中的公共字段或受保护字段不会调用这些函数。但是如果我尝试访问 $obj->a 并且之前从未定义过 a 怎么办？我最初认为这会调用 __get 或 __set 但似乎没有。我知道解决这个问题的方法是将所有动态创建的字段放入一个数据数组中。

$obj->a 因此是一个公共字段吗？非常感谢你！

例子

```
 class Example
  {
    public function __get($field)
    {
      echo 'Getting ' . $field;
      return $this->$field; 
    }

    public function __set($field, $value)
    {
      echo 'Setting ' . $field . ' to ' . $value;
      $this->$field = $value;
    }
   }

   $obj = new Example;
   $obj->randomField = 1; //here randomField is set to 1 but the echo statement is not printed out in __set
   echo $obj->randomField;  //here, 1 will be echoed but not the statement in __get

   //is randomField a public field? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:38:10.343

```
$obj = new Example;
$obj->randomField = 1; // here __set method is called
echo $obj->randomField; // here __get method won't be called because `$obj->randomField` exists.

//is randomField a public field?
// Yes, after you set it, it became a public field of the object. 
```

# c++ - 我成功地能够在 C++ 中运行 Hello World 程序，但我看不到和输出。它在哪里？

> ID：10942331
> 
> 赞同：7
> 
> 时间：2012-06-08T02:24:27.927
> 
> 标签：c++, xcode

我是一个完整的初学者。我今天刚下载了 xCode。这是我所拥有的屏幕截图：

![在此处输入图像描述](../Images/a4e48be93d18faf82222ead65ccbda44.png)

如您所见，我成功运行了该程序，但是，我在任何地方都看不到任何输出。它在哪里，我如何看到它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:50:17.267

看起来程序根本没有运行，只是构建。顶部的状态表示*构建*成功，而不是*运行*成功。Command-R 将运行程序。

这是运行程序时的样子： ![跑完](../Images/dd946af82eb24ca7c9fd82b670bbc8ea.png)

您还可以使用 Log Navigator 查看以前的构建和调试会话的结果。 ![日志导航器](../Images/26a654886c39d86931ad7e7e8dd720ac.png)

您经常会看到为 Windows 编写的教程程序，其中程序以询问用户输入而结束。原因是Windows上的控制台模型有程序拥有控制台窗口，所以一旦程序退出，窗口就会消失。因此，通过要求输入作为程序将继续运行的最后一件事，直到用户给它输入，程序将完成并且控制台窗口将消失。

非 Windows 平台不会以这种方式运行，并且通常不需要此类代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T02:29:33.507

在 return 语句或 getchar() 处放置断点，然后再返回。您没有看到输出的原因是程序退出时控制台关闭。所以以上几点可以防止程序结束。

# iphone - iOS如何检查当前是否正在通话

> ID：10942334
> 
> 赞同：25
> 
> 时间：2012-06-08T02:25:02.593
> 
> 标签：iphone, objective-c, ios, xcode, phone-call

我环顾四周，我能找到的只是检查 CTCallCenter 的 callState。但是，这是通过监听事件来工作的——这取决于应用程序是否处于活动/暂停/恢复状态，可以在不同的时间引发事件。

我需要的不是听事件并在呼叫连接时被告知，我想自己决定何时询问呼叫是否已连接。

用例：当电话接通时 - 用户知道并且将始终单击应用程序图标，这将打开应用程序。此时我只想运行一个快速函数来检查当前是否正在通话。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-08T02:31:19.143

该`CTCallCenter`对象具有一个`currentCalls`属性，该属性是`NSSet`当前调用的一个。如果有电话，则该`currentCalls`属性应为 != nil。

如果您想知道是否有任何呼叫实际连接，那么您必须遍历当前呼叫并检查`callState`以确定是否连接`CTCallStateConnected`。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-29T06:09:43.477

```
#import <CoreTelephony/CTCallCenter.h>
#import <CoreTelephony/CTCall.h>

-(bool)isOnPhoneCall {
    /*

     Returns TRUE/YES if the user is currently on a phone call

     */

    CTCallCenter *callCenter = [[[CTCallCenter alloc] init] autorelease];
    for (CTCall *call in callCenter.currentCalls)  {
        if (call.callState == CTCallStateConnected) {
            return YES;
        }
    }
    return NO;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T06:38:14.097

感谢ThomasW 的回答。我想我也会发布代码。

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    CTCallCenter *ctCallCenter = [[CTCallCenter alloc] init];
    if (ctCallCenter.currentCalls != nil) 
    {
        NSArray* currentCalls = [ctCallCenter.currentCalls allObjects];
        for (CTCall *call in currentCalls)
        {   
            if(call.callState == CTCallStateConnected)
            {
                // connected
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-12T07:49:41.373

我遇到了同样的问题，但我认为从**iOS 10**执行此操作的正确方法是：

```
func checkForActiveCall() -> Bool {
    for call in CXCallObserver().calls {
        if call.hasEnded == false {
            return true
        }
    }
    return false
} 
```

# javascript - 为什么我的图片在通过 JavaScript 加载时会损坏？

> ID：10942338
> 
> 赞同：-6
> 
> 时间：2012-06-08T02:25:52.127
> 
> 标签：javascript

我刚刚将我的第一个“网站”(html+js) 上传到网络服务器，我通过 JavaScript 加载的图像突然坏了。（他们在我的本地计算机上工作。）

我使用了相对路径（根本没有路径，因为图像与 .html 和 .js 文件位于同一文件夹中）。会显示直接在 html 文件中编码的静态图像，但不会显示通过 JavaScript 动态加载的图像。任何想法为什么？

* * *

抱歉，我认为这可能是通用的，独立于 JS。我用于显示图像的非常简化的代码：

```
$("#show_image").click(function(){
            $('#test1').append('<img src="a.jpg">');
        }); 
```

'show_image' 是一个按钮，#test1 是一个 div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:29:33.543

我建议在 FireBug 的 Net 面板中监控资源加载问题。可能是计算路径的问题，或者远程主机的权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:35:55.947

问题是您在 .append() 中缺少引号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:39:14.067

万一有人有类似的问题，我在我的解决方案中发现了这个错误，这并不容易找到。

我使用的服务器有区分大小写的文件系统，我的图像的真实文件名是例如“a.JPG”，而不是代码中的“a.jpg”！当然，这在我的本地、不区分大小写的文件系统上不是问题，只是在服务器上。

我不知道服务器文件系统可能区分大小写，现在我知道了...... :)

# python - 意外的 Python 元组行为

> ID：10942341
> 
> 赞同：0
> 
> 时间：2012-06-08T02:26:32.517
> 
> 标签：python

`0 2`当我把它交给 Python 时，为什么会得到一个奇怪的结果？

```
#tuples ~wtF?
a=()
b=(a)
c=(a,1)
len(b)
len(c) 
```

注意：我得到了 `1 2`列表的预期结果：

```
a=[]
b=[a]
c=[a,1]
len(b)
len(c) 
```

这发生在 Linux 上：

```
$ python --version
Python 2.7.2+ 
```

## 编辑：到目前为止的答案

那么这是不是因为`,`在`c=(a,1)`任务中？

```
>>> print b
()
>>> print c
((), 1) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T02:32:16.990

括号不会使它成为一个元组 - 逗号会。考虑：

```
>>> 5 * (3 + 2)
25 
```

括号里的意思是“先做这个”。中的括号：

```
b=(a) 
```

意思一样。所以，这相当于

```
b = a 
```

`b is a`也会如此`True`。

要创建`b`一个包含空元组的元组，您需要执行以下操作：

```
b = a, 
```

同样，括号不会使它成为一个元组（除了`()`空元组的特殊情况），逗号可以。

对于编辑，

```
c = (a, 1) 
```

由于`a = ()`，这与：

```
c = ((), 1) 
```

即，它是一个包含空元组和的元组`1`。`()`始终是空元组（与`[]`空列表相同），但这是唯一一次括号表示“元组”。以上与以下相同：

```
c = (), 1 
```

尽管通常人们确实在此处包含括号（元组的`repr`and`str`总是如此），但这是为了样式而不是因为它们有意义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T02:30:35.823

`(a)`只是一种表达方式`a`，like `(1+2)`is just `1+2`。

如果您想要 1 项元组，请编写`(a,)`. 顺便说一句，相同的语法适用于列表：`[a,]`. 还有函数参数列表。逗号分隔列表所在的任何地方都可以使用尾随逗号。

# jquery - 初学者试图让 jQuery anySlider 显示在页面上

> ID：10942342
> 
> 赞同：0
> 
> 时间：2012-06-08T02:26:41.220
> 
> 标签：jquery, jquery-plugins

我是 jQuery 的新手。试图使用这个片段来创建一个anythingSlider，但我只是得到没有滑块的图像。图像的 div 在别处定义，所有文件路径都是正确的。我更改了 PolicyContainer 的宽度只是为了验证 jQuery 是否正常工作。这段代码有什么问题吗？最可能的问题是什么？

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js">         
    </script>
    <script src="/anythingSlider/jquery.anythingslider.min.js"></script>
    <script>
    $(document).ready(function() {
        var test = $('#PolicyContainer').width(300);
        $('#slider').anythingSlider();
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:44:16.997

你包括`anythingslider.css`文件吗？它具有基本的 CSS 样式，可以定位幻灯片并隐藏非当前幻灯片。

我希望在标题中看到这样的内容：

```
<link href="/anythingSlider/anythingslider.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
<script src="/anythingSlider/jquery.anythingslider.min.js"></script>
<script>
$(document).ready(function() {
    var test = $('#PolicyContainer').width(300);
    $('#slider').anythingSlider();
});
</script> 
```

如果包含样式表，请确保`slider`ID 存在。

现在，如果它仍然无法正常工作，则可能是 javascript 错误。因此，如果您在现代浏览器中进行测试，请按 F12 并查看控制台选项卡是否有任何错误。

# javascript - Do I need to import or include something for built-in functions in JavaScript?

> ID：10942346
> 
> 赞同：0
> 
> 时间：2012-06-08T02:27:39.580
> 
> 标签：javascript

As the title said, or can I just use them directly without any declaration? (It seems a dumb question, but I want to make sure nothing goes wrong in these subtle aspects.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:29:49.003

Nope. Everything that is apart of Javascript is automatically included.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:31:58.167

No. What's built in to the browser is there automatically. There are obviously differences browser to browser as to what's built in, but most browsers today implement a common core set.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:37:11.383

As everyone else has said, you don't have to add anything. Each browser has its differences when it comes to javascript implementation and that is why libraries such as jQuery are popular. They as the abstract away these differences.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T02:43:43.370

Unfortunately, not all browsers have every single method available (especially older ones). In those cases, there are plenty of solutions that people post that you can include in your script to fix it. For example, the .indexOf() method for arrays is not available in older versions of IE. But, there's a very simple function you can write, such as:

```
if (!Array.indexOf) {
    // Replaces the "indexOf" method for arrays when not available.
    // Used like array_var.indexOf(int)

    Array.prototype.indexOf = function (obj) {
        for (var i=0; i < this.length; i++) {
            if (this[i] == obj) {
                return i;
            }
        }
        return -1;
    }
} 
```

There are newer methods that help ease the use of JSON but are not available in older browsers. Those, as well, have simple functions that people have written for you to include in case the browser doesn't support it.

So for the most part, for probably all of the types, methods, functions and anything else that you want to use that is a part of Javascript is available for you to use without any importing, including or declaration.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T02:45:41.497

No, but you need to be aware that not all environments have the same "built-in" functions...

Assuming you target web browsers, depending on the browser and its version number you won't get the all the same features.

For instance, array manipulation functions like `.map()`, or JSON manipulation functions like `JSON.parse()`, are relatively new additions that are now mainstream across modern browsers, but weren't guaranteed to be there only a few years back.

So be careful, depending on your target platforms.

You can, however, then use different libraries to add the missing functionalities, or to wrap them (one of my favorite "toolkit/utilities" library would be underscore.js, for instance, or dojo.js for more heavyweight stuff. Other prefer jQuery, or Prototype, etc...). These will often delegate to built-in functions, if present, or use their own implementation if needed, saving you from having to check for a function's existence.

# ruby-on-rails - 安装 ruby Mine 时出错，未指定 SDK，但已列出

> ID：10942348
> 
> 赞同：15
> 
> 时间：2012-06-08T02:27:59.440
> 
> 标签：ruby-on-rails, ruby, sdk, gem, rubymine

尝试运行任何命令（例如启动 rails 服务器）时出现“无法安装 gems：未指定 SDK”。为什么我会得到这个，我该如何解决？
我之前在使用 JDK 时遇到过问题，但没有看到此 SDK 错误。

![在此处输入图像描述](../Images/fe632a597bc7508b714c29338f35b742.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-08T03:00:27.817

我进入设置并且已经列出了一个 SDK，但是直到我点击“更新 gems”，一切都安装好了。然后我就可以正常启动并使用该应用程序了。

![在此处输入图像描述](../Images/07955e2c78675db3ca62d7291f5c12a4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-16T01:25:49.193

我尝试按照上述两个答案中的建议进行操作，但它仍然对我不起作用。在确保我的项目通过了所有 rSpec 之后，我放弃了 RubyMine 并简单地删除了 .idea 子目录，并在我从头开始重新创建 RubyMine 项目后让它工作。

希望这可以帮助。

ps 我的环境是安装了 RVM 的 Mac Os X。也许有什么让 RubyMine 与这一切混淆了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:20:51.313

重新启动Rubymine后我成功了。

# ios - UITableView 部分未正确绘制/滚动离开屏幕时的 EXC_Bad_Access

> ID：10942350
> 
> 赞同：0
> 
> 时间：2012-06-08T02:28:40.630
> 
> 标签：ios, xcode, uitableview

所以我不明白为什么这个极其简单的 UITableView 部分绘制不正确，其次，当我试图将这个傻瓜滚动到屏幕外时，它会抛出随机错误，有时会抛出 bad_access 和其他此类绿色突出显示的错误。

这是设备上到底发生了什么的图片，下面是我首先在 appDelegate 中使用的代码来创建 tableview 单元格本身。谢谢

**在 appDelegate**

```
SignUp *signup = [[SignUp alloc] initWithNibName:@"SignUp" bundle:nil];
signup.view.frame = self.window.frame;

[self.window addSubview:signup.view];
[self.window makeKeyAndVisible]; 
```

**创建表视图**

```
static NSString *CellIdentifier = @"EditableCell";

   EditableCell *editableCell = (EditableCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (editableCell == nil) {

       editableCell = [[EditableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];   
   }

   UITextField *cellTextField = [editableCell textFieldCell];

   cellTextField.keyboardType = UIKeyboardTypeDefault;
   cellTextField.delegate = self;

   return editableCell; 
```

**错误：**![在此处输入图像描述](../Images/af4e53aea5db256b6829697c5b5235db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:58:51.283

你正在创建你的视图控制器，但从来没有用任何东西抓住它。一旦您的 didFinishLaunchingWithOptions 方法退出，您将丢失视图控制器并遇到内存问题。持有视图控制器的视图并不持有视图控制器。而不是直接将视图添加到窗口使用：

```
self.window.rootViewController = signup; 
```

这将获得视图的所有权，并应设置它的框架，因此您不必手动执行此操作。您当前正在将框架设置为与将其推到状态栏下方的窗口相同的框架。

# javascript - 将 json 对象作为 javascript 的函数参数传递

> ID：10942351
> 
> 赞同：0
> 
> 时间：2012-06-08T02:28:48.817
> 
> 标签：javascript, json, object, parameter-passing

我想传递 json 对象的一些元素，例如 objson.post.mypost[i].idpost 作为 javascript 函数中的参数，这是我的脚本：

```
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp1=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp1=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp1.onreadystatechange=function()
{
    if (xmlhttp1.readyState==4 && xmlhttp1.status==200)
    {
        var txttmp2 = xmlhttp1.responseText;
        var obj2 = $.parseJSON(txttmp2);
        var text1= document.getElementById("tabs-Mil");
        var objln=obj2.post.mypost.length;
        //alert(objln+"");
        for(var counter=0;counter<objln;counter++)
        {
            text1.innerHTML+=" '"+obj2.post.mypost[counter].status+"' @ <a href='#'>"+obj2.post.mypost[counter].namalokasi+"</a>&nbsp;on "+obj2.post.mypost[counter].tanggal+"<br/><a href='#' onclick='addcomment("+obj2.post.mypost[counter].idpost+","+localStorage.loggeduser+")'>comment</a><hr width='80%' align='left'><br/>";
            text1.innerHTML+="<span id='comments' name='comments'></span>";
        }
    }
 }
xmlhttp1.open("GET","http://localhost:280/finaltask/forjson.php?tmpid="+iduser+"&proses=showpost",true);
xmlhttp1.send();

function addcomment(idcheckin,iduser)
{
    $("#formcomment").show();
    var detpost=document.getElementById("detail-post");
    alert(idcheckin+"/"+iduser);
} 
```

我已经通过了 json 对象元素： onclick='addcomment("+obj2.post.mypost[counter].idpost+","+localStorage.loggeduser+")'

但是当函数执行时（函数addcomment（idcheckin，iduser）），据说'idcheckin'是'未定义'.....

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:35:29.567

Do not attach complex event handler by concating string, use library like jQuery:

```
$("<a></a>").text("Hello").click(function () {
    addComment(obj.post.mypost[counter].idpost, ...);
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:01:57.003

确保您的返回结果符合预期。您应该检查 idpost 是否有效，考虑在循环开始时添加日志记录。

```
 for(var counter=0;counter<objln;counter++)
    {
        console.log('loop results ' + counter + ': ' + JSON.stringify(obj2.post.mypost[counter])); // confirm output of selected element
        alert('idpost: ' + obj2.post.mypost[counter].idpost); // Check result
        text1.innerHTML+=" '"+obj2.post.mypost[counter].status+"' @ <a href='#'>"+obj2.post.mypost[counter].namalokasi+"</a>&nbsp;on "+obj2.post.mypost[counter].tanggal+"<br/><a href='#' onclick='addcomment("+obj2.post.mypost[counter].idpost+","+localStorage.loggeduser+")'>comment</a><hr width='80%' align='left'><br/>"; 
```

也考虑改变：

```
addcomment("+obj2.post.mypost[counter].idpost+","+localStorage.loggeduser+") 
```

至：

```
addcomment(\""+obj2.post.mypost[counter].idpost+"\",\""+localStorage.loggeduser+"\") 
```

# php - 使用 JavaScript 前进/后退箭头覆盖自动 jQuery 选项卡控件？

> ID：10942352
> 
> 赞同：0
> 
> 时间：2012-06-08T02:29:20.420
> 
> 标签：php, javascript, jquery, twitter-bootstrap

关于这个主题有类似的问题，但不一样。我有一个滚动 jQuery 功能，它使用选项卡进行选择并且是自动化的。我不能轻易改变这个布局，因为它是动态的，并且基于选定数组中有多少项在 PHP 中传递。标记代码看起来像这样......（见最后的 PHP）

```
<div id="tabs" class="clients" style="display:none;">
 <a class="" href="#">1</a>
 <a class="" href="#">2</a>
 <a class="" href="#">3</a>
 <a class="" href="#">4</a>
 <a class="activeSlide" href="#">5</a>
</div> 
```

当它滚动或选择选项卡时，它成为 activeSlide 类。我计划在某些客户端上使用 display:none （在 CSS 中）来隐藏选项卡，并希望在我的前进/后退中包含这个箭头布局，并绑定某种类型的 JavaScript...

```
<div id="slider-controls">
  <a href="#" id="prev"><img src="_img/_sliders/prev.gif" width="41" height="17" /></a>      <span><img src="_img/blank.gif" width="1" height="1" /></span>
  <a href="#" id="next"><img src="_img/_sliders/next.gif" width="41" height="17" /></a>
</div> 
```

关于使用现有 jQuery 更容易修复的任何见解，我应该寻找什么以及是否可以简单地添加 JavaScript 以使用新的前进/后退选项卡覆盖现有代码。

现在这里是我的 PHP 代码，此时可以查看所有内容的来源，您可以看到我也有一个暂停按钮（不那么重要）和一个不在所有项目中的客户端案例研究，所以一个 if/别的。比让它工作更重要的是，我想学习一种更好的方法来解决这个问题，以及它如何为那些有更多时间的人工作。

```
<?php if ($num_projs > 0){ ?>
        <div id="slider">
            <div id="photos">
                <!-- dump all photos here, then manipulate them via tabs with jQuery -->
                <?php 
                foreach($projects as $project){
                    if($project['project_media_use'] == 'video' and $project['project_video'] != ''){
                ?>
                <div id="<?php print stripslashes($project['project_name']);?>" title="<?php print stripslashes($project['project_desc']);?>" class="video"><iframe src="http://player.vimeo.com/video/<?php print $project['project_video'];?>?title=0&amp;byline=0&amp;portrait=0" width="606" height="348" marginheight="0" marginwidth="0" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe></div>
                <?php }else{ ?>
                <div id="<?php print stripslashes($project['project_name']);?>" title="<?php print stripslashes($project['project_desc']);?>" style="background-image: url('_img/_cms_uploads/_projects/<?php print $project['project_image'];?>')"></div>
                <?php } } ?>

            </div>
            <div id="slider-bottom"> <!-- added display:none; to hide tabs - Shane -->
                <div style="display:none;" id="tabs" class="clients"></div> <!-- tabs are created automatically based on number of divs within "photos" div -->
                <?php if($clientCaseStudy != ''){?>
                    <div id="links">
                <!-- shane -->
                    <a><img src="_img/_sliders/pause.gif" id="pause" width="20" height="17"/></a><span><img src="_img/blank.gif" width="1" height="1" /></span>
                    <a id="prev"><img src="_img/_sliders/prev.gif" width="41" height="17" /></a><span><img src="_img/blank.gif" width="1" height="1" /></span><a id="next"><img src="_img/_sliders/next.gif" width="41" height="17" /></a><br />
                        <a style="text-align: left;" href="/<?php print $clientCaseStudy + " ";?>" rel="casestudy">CASE STUDY &gt;</a> <div style="clear:left"></div>
                 <!-- shane -->

                </div><?php } else{?>
                    <div id="links"><a><img src="_img/_sliders/pause.gif" id="pause" width="20" height="17"/></a><span><img src="_img/blank.gif" width="1" height="1" /></span>
                    <a id="prev"><img src="_img/_sliders/prev.gif" width="41" height="17" /></a><span><img src="_img/blank.gif" width="1" height="1" /></span><a id="next"><img src="_img/_sliders/next.gif" width="41" height="17" /></a>
                    </div>
                <?php } ?>
            </div>
        </div>
        <?php } ?> 
```

如果有帮助，该网站正在使用 Twitter Bootstrap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:49:04.050

我最终弄清楚了这一点，并认为我会分享以防其他人遇到同样的情况。它涉及操作一个 JavaScript 文件，添加最后两行代码......

```
$(document).ready(function() {
$('#photos').cycle({ 
    fx:     'turnDown', 
    speed:  'slow', 
    timeout: 9000, 
    pager:  '#tabs',
    before:  onBefore, 
    after:   onAfter,
    next:   '#next', //added shane
    prev:   '#prev'  //added shane
}); 
```

然后将这种性质的东西添加到另一个文件中......

```
<div class="nav">
                <a id="prev" href="#">Prev</a>
                <a id="next" href="#">Next</a>
            </div> 
```

...让我能够导航或使用标签。这个网站[http://jquery.malsup.com/cycle/int2.html](http://jquery.malsup.com/cycle/int2.html)在弄清楚所有这些方面非常有帮助，并且看起来是 jQuery Cycle 插件的一部分。

# c# - Xpath 选择带有节点的转义节点

> ID：10942353
> 
> 赞同：0
> 
> 时间：2012-06-08T02:29:24.733
> 
> 标签：c#, .net, xml, xslt, xpath

我有这个 xml：

```
<text>
    blah blah &lt;strong&gt; hello &lt;/strong&gt; more text &lt;strong&gt;hello again&lt;/strong&gt; blah blah
</text> 
```

如何选择强标签中已转义的文本`&lt`和`&gt`

在此示例中，选择应为：

1.  你好
2.  再一次问好

****更新需要 XSLT 1.0****

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:34:45.983

Since you have updated saying you can only use XSLT 1 - See this post: [How to use XSLT 1.0 or XPath to manipulate an HTML string](https://stackoverflow.com/questions/1680979/how-to-use-xslt-1-0-or-xpath-to-manipulate-an-html-string)

This is a little complex but:

To replace <, >, and & you'll have to clean it three times...

Here is some XSLT to get you started:

```
<xsl:variable name="cleanXML">
  <xsl:call-template name="SubstringReplace">
    <xsl:with-param name="stringIn">
      <xsl:call-template name="SubstringReplace">
        <xsl:with-param name="stringIn">
          <xsl:call-template name="SubstringReplace">
            <xsl:with-param name="stringIn">
              <xsl:call-template name="SubstringReplace">
                <xsl:with-param name="stringIn" select="$theXml"/>
                <xsl:with-param name="substringIn" select="'&amp;lt;'"/>
                <xsl:with-param name="substringOut" select="'&lt;'"/>
              </xsl:call-template>
            </xsl:with-param>
            <xsl:with-param name="substringIn" select="'&amp;gt;'"/>
            <xsl:with-param name="substringOut" select="'&gt;'"/>
          </xsl:call-template>
        </xsl:with-param>
        <xsl:with-param name="substringIn" select="'&amp;amp;'"/>
        <xsl:with-param name="substringOut" select="'&amp;'"/>
      </xsl:call-template>
    </xsl:with-param>
  </xsl:call-template>
</xsl:variable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:56:47.423

这是一个 C# 实现。

使用的命名空间

```
using System.Xml
using System.Web 
```

执行

```
 //Read xml file
     string xmlText = "<text>blah blah &lt;strong&gt; hello &lt;/strong&gt; more text &lt;strong&gt;hello again&lt;/strong&gt; blah blah</text>";
     System.Xml.XmlDocument doc = new System.Xml.XmlDocument();
     doc.LoadXml(HttpUtility.HtmlDecode(xmlText));
     XmlNodeList Nodes =  doc.GetElementsByTagName("strong");

     List<string> nodeValues= new List<string>();
     foreach (XmlNode Node in Nodes)
     {
         nodeValues.Add(Node.InnerText);
     } 
```**

# r - 如何让 geom_vline 尊重 facet_wrap？

> ID：10942360
> 
> 赞同：32
> 
> 时间：2012-06-08T02:29:57.577
> 
> 标签：r, ggplot2

我四处寻找，但找不到答案。我想做一个加权 geom_bar 图，上面覆盖着一条垂直线，显示每个方面的总体加权平均值。我无法做到这一点。垂直线似乎是应用于所有方面的单个值。

```
require('ggplot2')
require('plyr')

# data vectors
panel <- c("A","A","A","A","A","A","B","B","B","B","B","B","B","B","B","B")
instrument <-c("V1","V2","V1","V1","V1","V2","V1","V1","V2","V1","V1","V2","V1","V1","V2","V1")
cost <- c(1,4,1.5,1,4,4,1,2,1.5,1,2,1.5,2,1.5,1,2)
sensitivity <- c(3,5,2,5,5,1,1,2,3,4,3,2,1,3,1,2)

# put an initial data frame together
mydata <- data.frame(panel, instrument, cost, sensitivity)

# add a "contribution to" vector to the data frame: contribution of each instrument
# to the panel's weighted average sensitivity.
myfunc <- function(cost, sensitivity) {
  return(cost*sensitivity/sum(cost))
}
mydata <- ddply(mydata, .(panel), transform, contrib=myfunc(cost, sensitivity))

# two views of each panels weighted average; should be the same numbers either way
ddply(mydata, c("panel"), summarize, wavg=weighted.mean(sensitivity, cost))
ddply(mydata, c("panel"), summarize, wavg2=sum(contrib))

# plot where each panel is getting its overall cost-weighted sensitivity from. Also
# put each panel's weighted average on the plot as a simple vertical line.
#
# PROBLEM! I don't know how to get geom_vline to honor the facet breakdown. It
#          seems to be computing it overall the data and showing the resulting
#          value identically in each facet plot.
ggplot(mydata, aes(x=sensitivity, weight=contrib)) +
  geom_bar(binwidth=1) +
  geom_vline(xintercept=sum(contrib)) +
  facet_wrap(~ panel) +
  ylab("contrib") 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-08T02:43:26.423

如果您传入预先设定的数据，它似乎可以工作：

```
ggplot(mydata, aes(x=sensitivity, weight=contrib)) +
  geom_bar(binwidth=1) +
  geom_vline(data = ddply(mydata, "panel", summarize, wavg = sum(contrib)), aes(xintercept=wavg)) +
  facet_wrap(~ panel) +
  ylab("contrib") +
  theme_bw() 
```

![在此处输入图像描述](../Images/acbe2bd79eaf74ee4debe4eea56671f1.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-04-17T02:19:54.793

使用 dplyr 和 facet_wrap 的示例以防万一。

```
library(dplyr)
library(ggplot2)

df1 <- mutate(iris, Big.Petal = Petal.Length > 4)
df2 <- df1 %>%
  group_by(Species, Big.Petal) %>%
  summarise(Mean.SL = mean(Sepal.Length))

ggplot() +
  geom_histogram(data = df1, aes(x = Sepal.Length, y = ..density..)) +
  geom_vline(data = df2, mapping = aes(xintercept = Mean.SL)) +
  facet_wrap(Species ~ Big.Petal) 
```

[![在此处输入图像描述](../Images/fb1627d15b9226f79dddc338e228de3e.png)](https://i.stack.imgur.com/LG02B.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T02:38:51.813

```
 vlines <- ddply(mydata, .(panel), summarize, sumc = sum(contrib))
 ggplot(merge(mydata, vlines), aes(sensitivity, weight = contrib)) + 
 geom_bar(binwidth = 1) + geom_vline(aes(xintercept = sumc)) + 
 facet_wrap(~panel) + ylab("contrib") 
```

# java - 下拉菜单未按预期工作

> ID：10942361
> 
> 赞同：2
> 
> 时间：2012-06-08T02:30:01.563
> 
> 标签：java, swing

```
import javax.swing.*;
public class MainP2 {
public MainP2() {
   JOptionPane.showMessageDialog(
          null,
          "Hi welcome to my square Pyramid calculator." + "\nPress Ok to begin.",
"CIS 2235", 
          JOptionPane.PLAIN_MESSAGE
   );
   String[] possibilities = {
           "adjust height", 
           "adjust baselength", 
           "adjust height and baselength", 
           "exit" 
   };
   String s = (String)JOptionPane.showInputDialog(
           null,
           "Choose one",
           "Customized Dialog",
           JOptionPane.PLAIN_MESSAGE,
           null,
           possibilities,
           possibilities[0]
   );
   //-----here's the problem with the code, am i calling it wrong?
   if(possibilities.equals(possibilities[0])){
           String myString = JOptionPane.showInputDialog(null,"Please enter height: ");
    }
}
public static void main (String[] args) {
    MainP2 app = new MainP2();
}
} 
```

我正在构建一个平方金字塔计算器并从头开始编写所有代码，但我似乎遇到了我的第一个问题。我给用户一个欢迎信息，然后给他们一个下拉菜单，询问他们想要为金字塔“调整”什么。他们可以调整的四个选项是金字塔的`height`、和`baselength`，或者他们可以直接退出。现在从这里他们选择的任何选项（退出选项除外）都会弹出一个输入对话框，要求输入他们选择的新值/值。`height``baselength`

我刚刚尝试了第一个选项，只是想看看它是否有效，但没有运气。每当我单击索引为 0 的调整高度时，程序就会结束并忽略我的 if 语句，即如果选项索引为 0，`JOptionPane`则应弹出一个输入对话框。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T02:42:04.667

我想你的意思是：

```
if(s.equals(possibilities[0])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T02:44:32.380

替换以下内容：

```
if(possibilities.equals(possibilities[0])){ 
```

和：

```
if(s.equals(possibilities[0])){ 
```

# azure - 用于播客内容的 Windows Azure

> ID：10942362
> 
> 赞同：4
> 
> 时间：2012-06-08T02:30:05.053
> 
> 标签：azure

我正在尝试评估使用 Windows Azure 存储/媒体/cdn 服务来托管播客站点的音频内容，但我在弄清楚这样做的最佳方法时遇到了一些麻烦。我是否需要设置存储帐户并使用为内容启用 CDN 的 blob 存储？使用媒体服务会更好吗？如果是后者，我似乎找不到任何关于如何开始使用媒体服务或如何管理内容的好的文档。有人对此有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:17:38.360

Windows Azure 媒体服务目前处于预览阶段，您需要通过[https://manage.windowsazure.com/](https://manage.windowsazure.com/)在 Azure 门户（预览部分）上注册，更多信息请参见： [https ://www.windowsazure.com/en -我们/主页/功能/媒体服务/](https://www.windowsazure.com/en-us/home/features/media-services/)

不确定您是否需要媒体服务，如果您创建存储帐户，然后将文件上传到公共 blob 容器（设置缓存到期标头，否则它将在 CDN 中从缓存中过期 72 小时），然后您登录进入门户并在该存储帐户上启用 CDN。您的所有内容都将被推送到 CDN 边缘节点。

CDN 将以 http://.vo.msecnd.net 的形式分配一个 URL。（请注意，发生 DNS 传播最多可能需要 60 分钟）。

Maarten Balliauw 有一篇很棒的博客文章解释了这一切： [http ://acloudyplace.com/2012/04/using-the-windows-azure-content-delivery-network/](http://acloudyplace.com/2012/04/using-the-windows-azure-content-delivery-network/)

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T03:57:00.293

根据您的要求，您确实需要为您的内容使用 Azure 存储。将 Azure 存储设置为 CDN 终结点是内容所有者根据内容的使用方式做出的决策。当您尝试为播客存储内容时，由于播客作为公共服务的性质，您肯定可以利用 CDN。因此，拥有 Azure CDN 服务将是您的最佳选择。

在您决定选择 Windows Azure 媒体服务之前，我建议您先看看[这里](https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/)以了解它在技术上是如何工作的，并且您确实需要所有这些。Windows Azure 媒体服务是媒体内容提供商对多个设备进行编码、保护、分发和流式传输的端到端工作流程。这对您的项目来说可能是非常大的东西，老实说不需要。

由于您只是尝试向播客用户提供音频内容，因此最好将编码内容上传到 Azure 存储，然后通过 CDN 分发给您的用户。如果您需要压缩它，那么您可能需要一个 WebRole 来完成它。如果您需要这些特定领域的内容，请提出建议，我们肯定可以提供帮助。

# ruby - 如何操作已设置为对象的变量？

> ID：10942367
> 
> 赞同：0
> 
> 时间：2012-06-08T02:30:51.067
> 
> 标签：ruby, class, module, function

我写了一个类似于以下的模块：

```
module One
  class Two
    def self.new(planet)
      @world = planet
    end
    def self.hello
      "Hello, #{@world}"
    end
  end
end 
```

我打算通过以下方式操作模块：

```
t = One::Two.new("World")
puts t.hello 
```

但是，显然`self.hello`不在`t`'s 范围内。我意识到我可以做到以下几点：

```
t = One::Two
t.new("World")
puts t.hello 
```

以前的方法感觉不对，所以我正在寻找替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:00:16.870

```
module One
  class Two
    # use initialize, not self.new
    # the new method is defined for you, it creates your object
    # then it calls initialize to set the initial state.
    # If you want some initial state set, you define initialize.
    # 
    # By overriding self.new, One::Two.new was returning the planet,
    # not an initialized instance of Two.
    def initialize(planet)
      @world = planet
    end

    # because One::Two.new now gives us back an instance,
    # we can invoke it
    def hello
      "Hello, #{@world}"
    end
  end
end

t = One::Two.new 'World'
t.hello # => "Hello, World" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T02:49:21.007

您应该创建一个`initialize`方法而不是`self.new`创建一个类的对象。`SomeClass.new`将调用该`initialize`方法。

如果你想访问实例变量，你应该使用实例方法。所以而不是`def self.hello`do `def hello`。如果你想要类方法，你也应该使用类变量。这样做，而不是`@some_var`使用`@@some_var`.

# mysql - 如何定义指定关系类型的多对多关系？

> ID：10942372
> 
> 赞同：0
> 
> 时间：2012-06-08T02:31:37.230
> 
> 标签：mysql, hibernate, relational-database

我正在使用 Hibernate 和 MySql（两者的旧版本 - Seam 2 项目）。

我无法弄清楚如何设置我的映射表和实体注释，以便我可以“着色”两个实体之间的关系类型（就像我在图上着色边缘一样）。这是我的架构的近似值：

**顾客**

*   ID
*   全名
*   电话号码

**店铺**

*   ID
*   分店名称
*   地址第一行
*   地址第二行

**客户商店**

*   客户ID
*   store_id
*   顾客类型

**顾客类型**

*   价值（列举：个人、公司、内部）

## 设计我的 Hibernate 注释和模式以正确映射这些关系的最佳方法是什么？

我看过的方法：

1.  我觉得我可以`Set<Store>`在对象上拥有三个属性`Customer`，每个属性一个`CustomerType`，或者一个`Set<Store> getStores(CustomerType)`方法。不过，我不知道如何制作这种映射，而且我很难找到适用于这种特定场景的文档。
2.  我可以将我的架构更改为每个`customertype`( `customer_store_individual`,`customer_store_corporate`等) 都有一个表。这感觉是多余的，但它会解决问题。不过，我更愿意让 hibernate 做一些魔术来整理这个映射并将它们组合到一个表中。
3.  `customer_store`我可以为桌子制作一个实体。这感觉就像一个非常糟糕的解决方法。 [这个答案已经涵盖了这种类型的关系](https://stackoverflow.com/questions/3574975/how-to-implement-a-3-many-to-many-relationship-with-hibernate)，虽然我不喜欢这个解决方案。

请注意，我试图混淆我的域，因此请避免对客户提出建议或自行存储对象。让我们假设我的域对象被正确分解，并且它们是真正的多对多关系。它只是区分我遇到问题的每个链接的类型:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:59:32.387

我不知道这是否是最好的解决方案，但我会使用关系的值对象

```
@Entity
public class Customer
{
    // to get all stores
    @ElementCollection
    public Set<StoreCustomer> stores;

    // to get specific stores
    public Set<Store> getStores(CustomerType);
}

@Entity
public class Store
{
    // to get all customers
    @ElementCollection
    public Set<StoreCustomer> customers;

    // to get specific customers
    public Set<Customer> getCustomers(CustomerType);
}

@Embeddable
public class StoreCustomer
{
    @ManyToOne
    public Customer customer;

    @ManyToOne
    public Store store;

    public CustomerType type;
} 
```

# vb.net - .Net + 电子邮件线程

> ID：10942373
> 
> 赞同：0
> 
> 时间：2012-06-08T02:31:42.083
> 
> 标签：vb.net

我正在尝试向未知号码发送电子邮件邀请。的人，我希望我可以使用线程来稍微提高速度。任何人都可以请教我所做的是否有任何帮助或完全无关紧要。谢谢。

```
 Public Shared Function Emailing_FriendInvitation(ByVal memberID As String _
                                   , ByVal referrerCode As String _
                                   , ByVal enquiryCode As String _
                                   , ByVal outletCode As String _
                                   , ByVal templateName As String _
                                   , ByVal emailAddressLists As List(Of String) _
                                   , ByVal dbtrans As DbTransaction _
                                   , ByVal dbConnection As DbConnection _
                                   , ByVal addedBy As String _
                                   , ByVal customerCode As String) As Boolean
        Dim dbCommand As DbCommand = Nothing
        Dim isSuccess As Boolean = False
        Try
            Dim senderEmailName As String = String.Empty
            Dim senderEmail As String = String.Empty
            Dim receipientEmail As String = String.Empty

            Dim receipientName As String = "Dear Sir/Madam"
            Dim emailSubject As String = String.Empty
            Dim emailBody As String = String.Empty

            Dim ds As DataSet = Nothing

            If dbConnection.State <> ConnectionState.Open Then
                dbConnection.Open()
            End If
            dbCommand = GetStoredProcedureCommand("FriendsInvitation")
            dbCommand.Connection = dbConnection
            If Not dbtrans Is Nothing Then
                dbCommand.Transaction = dbtrans
            End If

            Dim emailAddresses As String
            For Each email In emailAddressLists
                emailAddresses += email + ","
            Next

            AddInParameter(dbCommand, "@MemberID", DbType.String, memberID)
            AddInParameter(dbCommand, "@EmailAddresses", DbType.String, emailAddresses)
            AddInParameter(dbCommand, "@TemplateName", DbType.String, 256, templateName)
            AddInParameter(dbCommand, "@EnquiryCode", DbType.String, 50, enquiryCode)
            AddInParameter(dbCommand, "@OutletCode", DbType.String, 50, outletCode)
            AddInParameter(dbCommand, "@ReferrerCode", DbType.String, 50, referrerCode)
            AddInParameter(dbCommand, "@AddedBy", DbType.String, 50, addedBy)

            ds = ExecuteDataSet(dbCommand)
            senderEmailName = Convert.ToString(IIf(Not IsDBNull(ds.Tables(0).Rows(0)("AutoEmailDisplayName")), ds.Tables(0).Rows(0)("AutoEmailDisplayName"), String.Empty))
            senderEmail = Convert.ToString(IIf(Not IsDBNull(ds.Tables(0).Rows(0)("AutoEmailSender")), ds.Tables(0).Rows(0)("AutoEmailSender"), String.Empty))
            emailSubject = templateName
            emailBody = Convert.ToString(IIf(Not IsDBNull(ds.Tables(0).Rows(0)("AutoEmailContent")), ds.Tables(0).Rows(0)("AutoEmailContent"), String.Empty))
            'emailBlastRecipientAutoID = Convert.ToString(ds.Tables(1).Rows(0)("EmailBlastRecipientAutoID"))
            ' End If
            If Not (String.IsNullOrEmpty(senderEmail) AndAlso String.IsNullOrEmpty(receipientEmail) AndAlso _
              String.IsNullOrEmpty(emailSubject) AndAlso String.IsNullOrEmpty(emailBody)) Then

      emailBody = emailBody.Replace("[REFERRERCODE]", "REFERRERCODE")

      '----Thread-----

      Dim Th = New Thread(Sub() sendEmail(emailAddressLists, senderEmailName, senderEmail,     emailSubject, emailBody))
                Th.Start()
      End If

      '---------------

        Catch ex As Exception
            isSuccess = False
            Throw New DALException(ex, dbCommand, customerCode, "Emailing_FriendInvitation")
        Finally
            If Not dbCommand Is Nothing Then
                dbCommand.Dispose()
            End If
        End Try
        Return isSuccess
    End Function

    Private Shared Sub sendEmail(ByVal emailLst As List(Of String), ByVal senderEmailName As String, ByVal senderEmail As String, ByVal emailSubject As String, ByVal emailBody As String)
        Dim successfulReceipents As String = String.Empty

        For Each emailAdd In emailLst
            Try
                Email.Send(senderEmailName, senderEmail, emailAdd, emailSubject, emailBody, Nothing)
                successfulReceipents += emailAdd + ","
            Catch ex As Exception

            End Try
        Next
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:42:59.390

不，这无济于事，因为您没有并行执行任何工作，您只是将工作放在后台线程上。这将有助于保持 UI 畅通，但不会加快执行速度。

正确的方法是让线程在`sendEmail`sub 的 For 循环内产生。但是，请不要那样做。这确实不是线程的好选择。

# appdomain - AppDomain.CreateInstance 和 AppDomain.CreateInstanceFrom 之间的区别

> ID：10942374
> 
> 赞同：2
> 
> 时间：2012-06-08T02:31:44.413
> 
> 标签：appdomain

我开始研究 AppDomains，但我无法理解 CreateInstance 和 CreateInstanceFrom 之间的区别。两者都返回需要解包的对象句柄。任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:46:53.240

它们都返回一个 AppDomain，但不同之处在于如何定位要创建的 AppDomain。CreateInstanceFrom 基于提供程序集文件路径，其中 CreateInstance 基于提供要加载的程序集名称。

请参阅以下内容（注意两者中第一个参数的区别）：

CreateInstanceFrom [http://msdn.microsoft.com/en-us/library/2xkww633.aspx](http://msdn.microsoft.com/en-us/library/2xkww633.aspx)

> 汇编文件
> 
> 包含定义请求类型的程序集的文件的名称（包括路径）。使用 LoadFrom 方法加载程序集。

CreateInstance [http://msdn.microsoft.com/en-us/library/44s54yc4.aspx](http://msdn.microsoft.com/en-us/library/44s54yc4.aspx)

> 程序集名称
> 
> 程序集的显示名称。请参阅 Assembly.FullName。

# c++ - 如何使用 windows api 获取输入

> ID：10942376
> 
> 赞同：0
> 
> 时间：2012-06-08T02:32:00.330
> 
> 标签：c++, winapi

我和一些朋友开始制作电子游戏。不过，我对 windows api 还是很陌生，要为我们的早期阶段做一些原型设计，我需要知道如何解析通过 windows 消息系统给出的输入。我需要做的主要事情是以按下的键的形式从键盘获取输入。关于如何在 winProc 函数中解析 lParam 和 wParam 以查找按下的键的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T02:35:26.800

从[WM_KEYDOWN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646280%28v=vs.85%29.aspx)，`wParam The virtual-key code of the nonsystem key.`

从[WM_CHAR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646276%28v=vs.85%29.aspx)，`wParam The character code of the key.`

后者非常简单，而前者可以在此处引用：[Virtual Key Codes](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)。

假设您正在寻找转义按键。在表格中，您可以看到 vk 代码为 0x1B，但它有一个别名`VK_ESCAPE`：

```
case WM_KEYDOWN:
    if (wParam == VK_ESCAPE) {
        //handle
    }

    break; 
```

根据您需要处理的密钥类型进行选择。

# google-app-engine - 使用 Objectify 更新实体

> ID：10942377
> 
> 赞同：0
> 
> 时间：2012-06-08T02:32:08.090
> 
> 标签：google-app-engine, objectify

我正面临这种情况：我有三个实体（EntA、EntB 和 EntC） EntA 和 EntB 有一个 Key<EntC> 参数。EntC 也有一个 List<String> 参数，它将 EntA 和 EntB 的键保存为字符串。

为了获得任何实体的密钥，我首先必须保留它们（id 字段是自动生成的）。所以我这样做：

1.  创建并保存 EntC，这将为 EntA 和 EntB 创建我需要的 Key<EntC> 值。
2.  我使用 Key< EntC> 创建 EntA 和 EntB 并保存它们。
3.  通过将 Key<EntA> 和 Key<EntC> 添加到相应的列表来更新 EntC。我发现实体没有在 DS 中更新，而是重新编写。所以，我首先获取 EntC，获取它的 id，我用它来创建一个包含 Key<EntA> 和 Key<EntB> 的新 EntC 实体。最后，我删除了原来的 EntC 并保存了新的 EntC。

我想知道是否有更好的方法来实现这一点。此外，在我删除原始 EntC 实体之后和保存新的 EntC 实体之前，是否有可能另一个实体获得了原始 EntC 实体的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:50:43.220

提前分配id：

例如，与父母一起做：

```
Key<YourEntity> k=  dao.fact().allocateId(parentObj, YourEntity.class);
(obviously dao extends DAOBase, I think you know that from using objectify)

 allocateId(java.lang.Class<T> clazz) 
       Allocates a single id from the allocator for the specified kind.

 allocateId(java.lang.Object parentKeyOrEntity, java.lang.Class<T> clazz) 
      Allocates a single id from the allocator for the specified kind. 
```

[http://objectify-appengine.googlecode.com/svn/trunk/javadoc/com/googlecode/objectify/ObjectifyFactory.html](http://objectify-appengine.googlecode.com/svn/trunk/javadoc/com/googlecode/objectify/ObjectifyFactory.html)

# php - MySQL - 设计问题

> ID：10942379
> 
> 赞同：1
> 
> 时间：2012-06-08T02:32:28.537
> 
> 标签：php, mysql

我正在尝试找出系统中特定功能的设计（它是基于云的服务的一部分）

本质上，我希望用户能够为与系统集成的简单 CRM 输入/检索系统创建自己的伪“表”。

所以我有两个问题需要帮助

1.  我想知道如何存储数据，我想到了两种布局

    *   制作 3 个表格，例如存储**text**、**integer**或 **double**

    cms_item_text -`[id, heaqderID, data (text)]`

    cms_item_int -`[id, headerID, data (int)]`

    cms_item_double -`[id, headerID, data (double)]`

    *   **或**cms_item -`[id, headerID, data (text)]`我会（使用 MySQL **cast()**函数在执行订单时将文本转换为整数/双精度`order by cast(data as signed integer)`）
2.  现在数据的检索是另一回事。由于它通常在表格视图中，从中读取的最佳方法是什么？我是这样想的——

    ```
    SELECT barcode.data as barcode, price.data as price, notes.data as notes
    FROM cms_item barcode, cms_item price, cms_item notes
    WHERE (barcode.headerID = 1 and barcode.id = 1) and
          (price.id = 1 and price.headerID = 2) and
          (notes.id = 1 and notes.headerID = 3) 
    ```

这样我就可以得到类似的结果

```
array("barcode" => "eg", "price" => "123", "notes" => "hello there")
array("barcode" => "no2", "price" => "456", "notes" => "yes") 
```

最好的设计路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:12:33.190

我的应用程序设计遇到了类似的问题。本质上，我必须允许用户在数据库中定义“表”，包括指定数据类型。

我最终采用了第一种方法，即我有一个包含多个字段和用户可以定义的不同类型的表。

虽然我最终得到了一切工作，但并非一帆风顺。查询变得相当复杂，我不得不大量使用动态 SQL 以及从我的应用程序中构建 SQL 查询。

对我来说最重要的一点以及为什么我选择在我的应用程序中实现强类型数据字段（而不是将所有内容存储在文本字段中）是能够对数字数据类型执行 SQL 函数（ 、 等`AVG`）`MAX`。`MIN`

所以我只能说，无论你选择哪种方式，都会有一些容易实现和编码的东西，而另一些则很难。如果您希望提取数据，并通过使用 SQL 函数或在代码中 CAST 数据，则取决于您的应用程序的规模，在存储和检索数据时可能会有很多不必要的验证检查。

我建议您真正考虑您的用户对数据库中的数据需要什么功能，这是您需要彻底调查的决定，并且取决于您的应用程序及其预期用途。

更新

您可能还需要考虑表中的数据量。我注意到您将`ORDER BY`使用该`CAST()`功能。请注意，这是低效的，可能会导致查询缓慢。

# iphone - 在 Cocoa Touch 中处理 UI 与行为问题的子类化替代方案

> ID：10942380
> 
> 赞同：1
> 
> 时间：2012-06-08T02:32:40.707
> 
> 标签：iphone, objective-c, ios, cocoa, design-patterns

我一直在为应用程序重写考虑几个设计选项，但似乎无法开始，因为我想不出我喜欢的设计。我的大部分担忧源于子类化问题。基本上，我有一些方面希望在多个类中重用：

*   用户界面“外观”
*   用户界面行为（对话框、活动指示器、导航）
*   网络接口（如 Three20's `ModelViewController`、类似 a `load`、`more`等）
*   状态驱动的行为（可达性、登录状态、通知等的变化）

由于 Obj-C 不支持多重继承，我不能做类似`MyViewController : StandardUILookNFeelViewController, NetworkEnabledViewController`. 我知道我可以像在 Java 中使用接口一样使用协议，但我不知道我是否应该将外观、网络行为、状态驱动的行为子类化，或者尝试将它们全部融合在一起班级。

根据您的经验，您是否使用 your`BaseViewController`来处理外观和感觉，是否使用它来处理网络内容，是否使用它来处理行为？您是否将所有这些都归为一类？你有像`three20`'s 这样的大类层次结构，还是我缺少更聪明的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:15:55.100

人们倾向于将功能集中到视图控制器中，因为“它很方便”。但是，根据定义，处理多个职责的单个类违反了单一职责原则。

这对于可读性、可维护性和可测试性很重要。如果您想重复使用，这是必不可少的。

我建议阅读：

*   [Model-View-Controller](https://developer.apple.com/library/content/documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html)（不是Three20类，而是设计原则）
*   [代表团](https://developer.apple.com/library/content/documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)
*   [单一职责原则](https://qualitycoding.org/single-responsibility-principle/)

# python - Django：表单中未加载字段

> ID：10942383
> 
> 赞同：1
> 
> 时间：2012-06-08T02:32:58.353
> 
> 标签：python, django, django-forms

我有一个用户个人资料，并希望允许用户更新关于他自己的所有信息（用户名、密码、姓名和其他信息）。使用下面的代码，不会加载 password1 和 password2 字段，也不会调用 clean_username 方法。为了完成，当我调用 is_valid 方法时，它总是返回 False 但没有错误。

有人可以帮助我吗？谢谢你。

```
#forms.py
class UserProfileForm(ModelForm):
    c_user = None
    error_messages = {
        'duplicate_username': _("A user with that username already exists."),
        'password_mismatch': _("The two password fields didn't match."),
    }
    username = forms.RegexField(label=_("Username"), max_length=30,
        regex=r'^[\w.@+-]+$',
        help_text = _("Required. 30 characters or fewer. Letters, digits and "
                      "@/./+/-/_ only."),
        error_messages = {
            'invalid': _("This value may contain only letters, numbers and "
                         "@/./+/-/_ characters.")})

    def __init__(self, *args, **kwargs):
        super(UserProfileForm, self).__init__(*args, **kwargs)
        if kwargs.has_key('instance'):
            current_user = kwargs.get('instance').user
            self.c_user = current_user
            self.password1 = forms.CharField(label=_("Password"),
                widget=forms.PasswordInput, required = False)
            self.password2 = forms.CharField(label=_("Password confirmation"),
                widget=forms.PasswordInput, required = False,
                help_text = _("Enter the same password as above, for verification."))
        else: 
            self.password1 = forms.CharField(label=_("Password"),
                widget=forms.PasswordInput)
            self.password2 = forms.CharField(label=_("Password confirmation"),
                widget=forms.PasswordInput,
                help_text = _("Enter the same password as above, for verification."))

    def clean_username(self):
        # Since User.username is unique, this check is redundant,
        # but it sets a nicer error message than the ORM. See #13147.
        username = self.cleaned_data["username"]
        if (self.c_user == None) or (self.c_user.username != username):
            try:
                User.objects.get(username=username)
            except User.DoesNotExist:
                return username
            raise forms.ValidationError(self.error_messages['duplicate_username'])

    def clean_password2(self):
        password1 = self.cleaned_data.get("password1", "")
        password2 = self.cleaned_data["password2"]
        if password1 != password2:
            raise forms.ValidationError(
                self.error_messages['password_mismatch'])
        return password2

    class Meta:
        model = UserProfile
        exclude=('user') 
```

>

```
#views.py

@csrf_protect
def update_user(request):
    user = request.user
    user_profile = user.get_profile()
    if request.method == 'GET':
        initials = {'username':user.username,
                'email':user.email,
                'name':user_profile.name,
                'birth_date':user_profile.birth_date,
                'weight':user_profile.weight,
                'height':user_profile.height,
                'smoke':user_profile.smoke,
                'drink_alcohol':user_profile.drink_alcohol,
                'alergies':user_profile.alergies,
                }
        form = UserProfileForm(initial=initials)
    elif request.method == 'POST':
        form = UserProfileForm(request.POST, instance=user_profile)
        if form.is_valid():
            f = form.save(commit=False)
            user.username = request.POST.get('username')
            user.save()
            f.user = user
            f.save()
            print request.POST.get('username')
            return redirect('/')
    return render_to_response('profile.html', {'form':form}, context_instance=RequestContext(request)) 
```

**更新：**谢谢丹尼尔罗斯曼！现在我遇到了密码1和密码2字段的问题。他们没有被加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:27:26.093

这是一个常见错误：您已经覆盖了表单`__init__`方法的签名，因此第一个参数是`current_user`. 因此，当您在 POST 块中使用 实例化表单时`UserProfileForm(request.POST, instance=user_profile)`，数据字典将用于 current_user 参数，而实际数据参数为空。因为是空的，所以表单没有绑定，所以没有错误。

覆盖表单的最佳方法`__init__`是从`args`or获取任何新参数`kwargs`：

```
def __init__(self, *args, **kwargs):
    current_user = kwargs.pop('current_user')
    super(UserProfileForm, self).__init__(*args, **kwargs)
    etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:50:32.730

尝试一下：

```
self.fields['password1'] = forms.CharField(label=_("Password"),
            widget=forms.PasswordInput, required = False)
self.fields['password2'] = forms.CharField(label=_("Password confirmation"),
            widget=forms.PasswordInput, required = False,
            help_text = _("Enter the same password as above, for verification.")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T08:04:28.763

它不应该只是视图定义中的 {'form':form, } 吗？然后在模板中使用 {{ form.as_p }}

# qt - Handling left and right key events in QT

> ID：10942384
> 
> 赞同：1
> 
> 时间：2012-06-08T02:33:03.390
> 
> 标签：qt, keyevent

I have a `QTabWidget` in one of my QT windows, and it seems to be swallowing the left/right key press events. In the main window I have the following function:

```
void VisionWindow::keyPressEvent(QKeyEvent* event) {
    std::cout << event->key() << "\n";
} 
```

When I press any key other than left or right, the handler goes off and prints the key code to the console. When I press left or right, it moves to the next left (or right) tab in the tab widget, and the `VisionWindow`'s `keyPressEvent` method never fires.

I tried to fix this with a subclass that would ignore the event:

```
class KeylessTabWidget : public QTabWidget {
    public:
        KeylessTabWidget(QWidget* parent) : QTabWidget(parent) {}
        void keyPressEvent(QKeyEvent* event) { event->ignore(); std::cout << "ignored an event\n"; }
}; 
```

Similar to the main window, this is only called when keys other than left or right are pressed. I'm also seeing that based on where the focus is, sometimes hitting left or right will switch the focus to different widgets in the main window, like checkboxes. If there any way to reclaim the left and right keys, or should I just accept that these are widely used in QT by default and switch to something else?

**Update:**

I ended up using `#include <QApplication>` along with `qApp->installEventFilter(this);` in my window constructor. The downside is that the tab widget is still switching tabs. [This seems to be a linux issue](https://stackoverflow.com/questions/5987977/how-do-i-disable-qts-behavior-on-linux-of-capturing-arrow-keys-for-widget-focus). On the plus side, I'm able to capture all key events. I was having events get swallowed by child widgets for other keys as well, and this solved it.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T03:29:44.040

尝试`event handler`机制。可能这些左右键事件已经在 Keypressevent 之前处理过了。

```
bool MainWindow::eventFilter(QObject *object, QEvent *e)
{
 if (e->type() == QEvent::KeyPress)
  {
  QKeyEvent *keyEvent = static_cast<QKeyEvent *>(e);
  std::cout << event->key() << "\n";
  }
 return false;
} 
```

安装此事件过滤器。`(qApplicationobject->installEventFilter(this);)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T14:04:59.297

我想添加更多内容，如果您想避免 QtWidgetTab 对象不切换选项卡，只需添加 return true ：

```
bool MyObject::eventFilter(QObject *object, QEvent *ev)
{
 if (e->type() == QEvent::KeyPress)
  {
       QKeyEvent *keyEvent = static_cast<QKeyEvent *>(ev);
       qDebug() << keyEvent->key() ;

      return true; //Here the signal was processed and is not going to be handled by QtTabWidget 
  }

 return false;
} 
```

并且不要忘记添加 qApp->installEventFilter(this);

# java - How can the server only allow pre-approved clients to communicate with it

> ID：10942389
> 
> 赞同：3
> 
> 时间：2012-06-08T02:33:49.587
> 
> 标签：java, c++, c

I wonder how can the server makes sure that the requests that are coming from clients are coming from only valid pre-approved clients, can anyone let me know what algorithm to use and what are my options?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:45:59.997

您正在寻求实现相互身份验证 - 服务器和客户端都可以确保彼此身份的真实性。

这是一个相当新的概念，因为它通常是单方面的身份验证。我将从这里开始，在 oracle 站点上使用 Web 服务提供一个完整的示例。您无法获得比这更可靠的信息:)

**摘自链接：**

> 当您使用相互身份验证发送消息时，只有当客户端信任服务器的证书并且服务器信任客户端的证书时，才能建立连接。交换证书和设置连接属性的过程称为安全套接字层 (SSL) 握手。有关详细信息，请参阅 Java 安全套接字扩展 (JSSE) 参考指南中的“SSL 协议概述”部分。

[http://developers.sun.com/appserver/reference/techart/mutual_auth.html](http://developers.sun.com/appserver/reference/techart/mutual_auth.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:40:41.220

如果您准备好处理完整的 X.509 证书麻烦，[TLS 还提供了对客户端证书进行身份验证的选项](http://en.wikipedia.org/wiki/Transport_Layer_Security#Client-authenticated_TLS_handshake)。

这样，您的客户端只有在安装了正确的客户端证书时才能进行身份验证。

它并不适用于所有情况（例如，大多数银行似乎并不关心），但它可能非常适合*您的*情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:37:04.717

在客户端连接到服务器后的一段时间内，我发送一个密码作为来自客户端的第一条消息。如果没有收到，则客户端断开连接。
除此之外，您可以记下客户端的 IP 地址，然后阻止来自该客户端的进一步连接，可能会持续一段时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T02:51:38.563

阻止其他人编写与您的应用程序一起工作的客户端几乎是不可能的。如果他们可以观察您的客户端和服务器之间的网络流量，并且他们拥有您的应用程序的副本，他们就可以弄清楚。你可以试着让它变得困难，但你只是让它们慢下来，而不是阻止它们。

您可以使用代码混淆来保护分布式代码并使用加密来保护网络流量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T06:33:20.433

你的问题不是很清楚。当您说，预先批准时，是否意味着预先注册？如果是，您将获得他们的凭据（可能是用户名/密码或 IP 地址等）以在他们连接到服务器时进行验证。

如果此 HTTP 服务器仅供特定用户组使用，您可以在内部（Intranet）托管或仅允许防火墙中批准的 IP 地址。

# zend-framework - 用于 zend 框架的公共文件夹/文件访问的插件

> ID：10942395
> 
> 赞同：0
> 
> 时间：2012-06-08T02:34:44.693
> 
> 标签：zend-framework

是否有处理对公共文件和文件夹的访问的 Zend Framework 插件？例如：只要当前登录的用户无权访问该文件，用户就无法打开该公用文件夹/文件。用户访问将来自数据库。

尝试搜索但看不到任何内容。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:38:25.420

这不是开箱即用的组件。但是您可以使用[ZEND_ACL](http://framework.zend.com/manual/en/zend.acl.introduction.html)来实现。

1) 禁用对所有文件/文件夹的公共访问。（不要通过 web 服务器为他们提供服务）
2）在 zend_acl 的帮助下，通过 zend 框架为所有文件/文件夹提供服务。

# .net - How to write a "Hello World" app with .net compact framework for Windows Embedded Compact 7?

> ID：10942399
> 
> 赞同：0
> 
> 时间：2012-06-08T02:35:20.810
> 
> 标签：.net, compact-framework, windows-embedded-compact

I want to write a "Hello World" app with .net compact framework for windows embedded compact 7\. Now I have download Windows embedded compact 7 and install it to C:\WINCE700\. Also I can create a "OSDesign1" solution with my VS2008SP1\. It compiled succeed and generated a file named "nk.bin".

I don't know what the next step to do. Could you tell me how to do it? I'm a newer for Windows Compact 7\. Thanks very much.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:40:23.947

您需要一个设备来运行您创建的操作系统，或者您可以使用虚拟机。有关如何执行此操作，请参阅以下链接：

[http://msdn.microsoft.com/en-us/library/jj200363.aspx](http://msdn.microsoft.com/en-us/library/jj200363.aspx)

您还可以参考以下文档：

..%Program Files%\Windows Embedded Compact 7\Documentation

高级虚拟 CEPC.pdf 中的示例 Hello world 应用程序

# iphone - A static library was omitted from linking

> ID：10942401
> 
> 赞同：0
> 
> 时间：2012-06-08T02:35:28.113
> 
> 标签：iphone, xcode

I have some problem about linking static library

I was added a static library build target. And added linked library list. ![enter image description here](../Images/2d1132c271f90bf8bc4cdb68972832d9.png)

But a link error was occurred. I think there is not -lCocosDenshion flag in the command. ![enter image description here](../Images/aa83bd586d6f356dee0e6e0e96600b6b.png)

And I set "Valid Architectures" as "VALID_ARCHS = armv6 armv7 i386" for all build targets.

Here is a full log about this event. I need your help. Thank you for your help!

```
Ld /Users/tae1560/Library/Developer/Xcode/DerivedData/HelloWorld-avkpbeubpocaklejnbukdyudocwz/Build/Products/Debug-iphonesimulator/HelloWorld.app/HelloWorld normal i386
cd /Users/tae1560/Documents/Projects/daegu/HelloWorld/ios
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/tae1560/Library/Developer/Xcode/DerivedData/HelloWorld-avkpbeubpocaklejnbukdyudocwz/Build/Products/Debug-iphonesimulator -F/Users/tae1560/Library/Developer/Xcode/DerivedData/HelloWorld-avkpbeubpocaklejnbukdyudocwz/Build/Products/Debug-iphonesimulator -filelist /Users/tae1560/Library/Developer/Xcode/DerivedData/HelloWorld-avkpbeubpocaklejnbukdyudocwz/Build/Intermediates/HelloWorld.build/Debug-iphonesimulator/HelloWorld.build/Objects-normal/i386/HelloWorld.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=40000 -framework Foundation -framework UIKit -framework CoreGraphics -lcocos2d -framework OpenGLES -lxml2 -lz -framework QuartzCore -o /Users/tae1560/Library/Developer/Xcode/DerivedData/HelloWorld-avkpbeubpocaklejnbukdyudocwz/Build/Products/Debug-iphonesimulator/HelloWorld.app/HelloWorld
Undefined symbols for architecture i386:
"CocosDenshion::SimpleAudioEngine::sharedEngine()", referenced from:
  Episode1Scene::init() in Episode1Scene.o
  Episode2Scene::init() in Episode2Scene.o
  Episode3Scene::init() in Episode3Scene.o
  Episode4Scene::init() in Episode4Scene.o
  Episode5Scene::init() in Episode5Scene.o
  Episode6Scene::init() in Episode6Scene.o
  MenuScene::init() in MenuScene.o
  ...
"CocosDenshion::SimpleAudioEngine::playBackgroundMusic(char const*, bool)", referenced from:
  Episode1Scene::init() in Episode1Scene.o
  Episode2Scene::init() in Episode2Scene.o
  Episode3Scene::init() in Episode3Scene.o
  Episode4Scene::init() in Episode4Scene.o
  Episode5Scene::init() in Episode5Scene.o
  Episode6Scene::init() in Episode6Scene.o
  MenuScene::init() in MenuScene.o
  ...
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T15:16:27.073

您是否尝试手动将其添加到链接器标志？

如果添加它没有帮助，您可能需要确保文件位于正确的位置，并将其路径添加到 Header 搜索路径！

如果这也不起作用，您可以简单地将 CocosDenshion 库作为源代码拖入并解决整个问题。但这可能不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T19:46:51.967

您需要在项目中添加 CocosDenshion 文件夹。然后你将需要像这样的框架

```
AudioToolbox.framework
AVFoundation.framework
OpenAL.framework 
```

# ruby - 您能否以编程方式轻松控制 Elastic Mapreduce 作业？

> ID：10942410
> 
> 赞同：0
> 
> 时间：2012-06-08T02:36:56.640
> 
> 标签：ruby, hadoop, elastic-map-reduce, amazon-emr

有一个用 ruby​​ 编写的命令行客户端，用作标准。但是，它不在 1.9 中运行。ruby 也有一个非常好的 aws-sdk，但它不支持 EMR。有没有好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T22:47:28.110

**2012 年 6 月 22 日更新**：亚马逊正在审查 @nkadwa 的拉取请求（见上文）。请注意这一点。

我一直在使用 Ruby 命令行客户端，但我构建的许多基于 Ruby/Rails 的工具需要 ruby​​ 1.9.3。我的解决方法是[RVM](https://rvm.io// "虚拟机")。

假设`$HOME/projects/elastic-mapreduce`您有 EMR Ruby 客户端假设您也有`$HOME/projects/myproj`

您可以告诉您的系统将 ruby​​-1.8.7 用于 EMR：

```
echo 'rvm use ruby-1.8.7' > $HOME/projects/elastic-mapreduce/.rvmrc
echo 'rvm use ruby-1.9.3@mygemset' > $HOME/projects/myproj/.rvmrc 
```

如果你需要从某个地方调用弹性 map-reduce 脚本，你可以像下面这样安装 RVM。默认情况下，elastic-mapreduce 使用其同一目录中的 credentials.json 文件。请注意，第一次进入该目录时，您的系统将验证您是否愿意信任 .rvmrc 文件。

```
# cd'ing into the directory will output stuff to stdout when it changes
cd $HOME/elastic-mapreduce > /dev/null && rvm ruby-1.8.7; ./elastic-mapreduce [args] 
```

或者，如果您想跳过“cd”业务，您可以执行以下操作：

```
# Again, redirect output after 'rvm use' so you don't get the green output
system("rvm use ruby-1.8.7 > /dev/null; /path/to/elastic-mapreduce -c /path/to/elastic-mapreduce/credentials.json --list") 
```

您需要按照 RVM 网站上的说明进行安装（非常简单）。但当您需要运行多个版本的 Ruby 时，它是完美的解决方案。我让它在 EC2 的生产环境中运行。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T16:43:21.610

**更新**

AWS SDK for Ruby v1.6+ 现在包含完整的 EMR 支持。[https://github.com/amazonwebservices/aws-sdk-for-ruby](https://github.com/amazonwebservices/aws-sdk-for-ruby)

**以前的**

我添加了适用于 fork 中一般用途的 EMR 支持和客户端行为：

```
https://github.com/kadwanev/aws-sdk-for-ruby/tree/add-emr 
```

示例用法：

```
AWS.config({:access_key_id => '', :secret_access_key => '', 
            :emr_key_pair => '', :emr_key_pair_file => ''})

emr = AWS::EMR.new
job = emr.jobs(:active => true).first

job.short_desc

 => {:id=>"j-2N8V9X1RWH1QJ", :state=>"WAITING", :name=>"job name", :instance_count=>"1", :instance_hours=>"2", :steps=>[{:name=>"step name", :state=>"COMPLETED", :last_change=>nil}]} 

job = job.create({name: 'job name', instances: {keep_job_flow_alive_when_no_steps: true,
                  instance_count: 1, master_instance_type: 'm1.small', slave_instance_type: 'm1.small'}})

 => #<AWS::EMR::JobFlow:j-XXXXXXXXXXXXJ> 

job.ssh_command

 => "ssh -o ServerAliveInterval=10 -o StrictHostKeyChecking=no -i key-pair-file.pem hadoop@ec2-xxx.compute-1.amazonaws.com"

job.terminate 
```

我希望他们能接受。

# eclipse - spring dm依赖问题 - apache commons logging

> ID：10942415
> 
> 赞同：0
> 
> 时间：2012-06-08T02:37:08.250
> 
> 标签：eclipse, osgi, spring-dm

我是spring dm的新手，所以请原谅我的简单问题。我下载了带有依赖项的 spring-osgi 包 - 1.2.1。当我从 /lib 文件夹导入所需的插件时，插件没有经过验证，因为它们需要 org.apache.commons.logging。

我有日志库，但无法弄清楚将其放入何处以便解决此问题，我可以开始开发实际项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:26:14.093

得到它的工作！

我通过制作一个插件来包含日志库，如本文末尾所述：[http ://www.javaworld.com/javaworld/jw-04-2008/jw-04-osgi2.html?page=2](http://www.javaworld.com/javaworld/jw-04-2008/jw-04-osgi2.html?page=2)

# sql - Sql Server，如何识别结果列以便可以在 where 子句中使用它

> ID：10942419
> 
> 赞同：1
> 
> 时间：2012-06-08T02:37:56.657
> 
> 标签：sql, sql-server, tsql

这是问题所在。

```
select count(studentID) AS count from educators where count  > 1 group by studentid 
```

将不起作用，因为 SQL Server 还不知道 count 列。

所以我必须这样做

```
select *
  from (select count(StudentID) as count
          from educators
         group by studentid
       ) s
 where s.count > 1 
```

有没有更优雅的解决方案？似乎应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T02:45:16.840

您可以使用该`HAVING`子句，也许是这样的：

```
SELECT StudentID, COUNT(StudentID)
FROM educators
GROUP BY StudentID
HAVING COUNT(StudentID) > 1 
```

该查询将显示所有多次出现的 StudentID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T02:41:31.360

```
SELECT COUNT(studentID) AS count 
FROM educators 
GROUP by studentid 
HAVING COUNT(studentID) > 1 
```

HAVING 就像聚合函数的位置。所以它适用于 AVG、SUM 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T02:42:03.460

```
SELECT
    COUNT(StudentID)
FROM
   educators
GROUP BY
  studentid
HAVING
  COUNT(StudentID) > 1 
```

学习你的工具和你不应该成为的剪贴板开发者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T02:43:30.300

你所拥有的和它所拥有的一样好。您可以尝试使用别名以外的名称`count`，但这可能无济于事。列别名名义上仅用于结果集中，有时（某些 DBMS 允许使用）ORDER BY 子句。

此外，聚合条件属于 GROUP BY 子句之后的 HAVING 子句：

```
SELECT COUNT(studentID) AS count
  FROM educators
 GROUP BY studentid
HAVING COUNT(StudentID) > 1 
```

显然，在嵌套的 SELECT 情况下，您可以在外部查询的 WHERE 子句中应用条件，但不能在内部查询的 WHERE 子句中应用条件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T11:05:23.930

SELECT COUNT(studentID) AS count FROM 教育工作者 GROUP BY studentid HAVING COUNT(StudentID) > 1

永远记住，当你使用像 min()、max()、count()、avg() 这样的聚合函数时，你需要使用 having 子句。

# java - 如何让 2 个 JVM 相互通信

> ID：10942427
> 
> 赞同：77
> 
> 时间：2012-06-08T02:39:02.043
> 
> 标签：java, ipc, concurrent-programming

我有以下情况：

我有 2 个 JVM 进程（实际上是 2 个`java`单独运行的进程，而不是 2 个线程）在本地机器上运行。我们称它们`ProcessA`为`ProcessB`.

我希望他们相互交流（交换数据）（例如`ProcessA`发送消息`ProcessB`做某事）。

现在，我通过编写一个临时文件来解决这个问题，这些过程会定期扫描这个文件以获取消息。我认为这个解决方案不是很好。

什么是实现我想要的更好的选择？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-06-08T02:52:32.910

[IPC](http://en.wikipedia.org/wiki/Inter-process_communication)的多种选择：

## 基于套接字（Bare-Bones）的网络

*   [不一定很难](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)，但是：
    *   可能不会很冗长，
    *   当您编写更多代码时，可能会为错误提供更多表面。
*   你可以依赖现有的框架，比如[Netty](http://netty.io/)

## [RMI](http://en.wikipedia.org/wiki/Java_remote_method_invocation)

*   从技术上讲，这也是网络通信，但这对您来说是透明的。

## 成熟的消息传递架构

*   通常也建立在 RMI 或网络通信之上，但支持复杂的对话和工作流程
*   对于简单的事情来说可能太重了
*   [ActiveMQ](http://activemq.apache.org/)或[JBoss Messaging](http://www.jboss.org/jbossmessaging)等框架

## [Java 管理扩展 (JMX)](http://en.wikipedia.org/wiki/Java_Management_Extensions)

*   更多用于[JVM 管理和监控](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)，但如果您最希望让一个进程查询另一个进程以获取数据，或者向其发送一些操作请求（如果它们不太复杂），则可以帮助实现您想要的
*   也适用于 RMI（在其他可能的协议中）
*   一开始并不那么简单，但[实际上使用起来相当简单](http://docs.oracle.com/javase/tutorial/jmx/index.html)

## 文件共享/文件锁定

*   这就是你现在正在做的
*   这是可行的，但有很多问题需要处理

## 信号

*   您可以简单地将信号发送到您的其他项目
*   然而，它相当有限，需要你实现一个翻译层（虽然它**是**可行的，但一个相当疯狂的想法是玩弄而不是任何严肃的事情。

* * *

如果没有更多细节，基于裸机网络的 IPC 方法似乎是最好的，因为它是：

*   最具可扩展性（在向您的
*   最轻量级（就您的应用程序的内存占用而言）
*   最简单（在设计方面）
*   最具教育意义（在学习如何实施 IPC 方面）。^(（正如你在评论中提到的“套接字很难”，它确实不是，应该是你工作的东西）)

话虽如此，根据您的示例（只需请求其他进程执行操作），JMX 对您来说也可能足够好。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-17T20:59:16.947

我在 github 上添加了一个名为 Mappedbus ( [http://github.com/caplogic/mappedbus](http://github.com/caplogic/mappedbus) ) 的库，它允许两个（或更多）Java 进程/JVM 通过交换消息进行通信。该库使用内存映射文件，并利用 fetch-and-add 和 volatile 读/写来同步不同的读取器和写入器。我使用这个库测量了两个进程之间的吞吐量，达到 4000 万条消息/秒，读取/写入一条消息的平均延迟为 25 纳秒。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T02:45:49.620

您正在寻找的是`inter-process communication`. [Java 以Java RMI API](http://docs.oracle.com/javase/6/docs/technotes/guides/rmi/index.html)的形式提供了一个简单的 IPC 框架。还有其他几种用于进程间通信的机制，例如管道、套接字、消息队列（显然，这些都是概念，因此存在实现这些的框架）。

我认为在您的情况下，Java RMI 或简单的自定义套接字实现就足够了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-08T05:02:07.527

带有 DataInput(Output)Stream 的套接字，用于来回发送 java 对象。这比使用磁盘文件容易，比 Netty 容易得多。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-30T09:30:39.333

我倾向于使用 jGroup 在进程之间形成本地集群。它适用于同一台机器、同一 JVM 甚至不同服务器上的节点（也称为进程）。

一旦您了解了基础知识，就可以轻松使用它，并且可以选择在同一 JVM 中实际运行两个或多个进程，从而轻松轻松地测试这些进程。

如果两者都在同一台机器上，开销和延迟是最小的（通常每个动作只有大约 >100ns 的 TCP 往返）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T02:42:11.407

我认为套接字可能是一个更好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-18T12:28:30.047

早在 2004 年，我就实现了使用套接字完成工作的代码。在那之前，我多次寻找更好的解决方案，因为套接字方法会触发防火墙，我的客户很担心。直到现在还没有更好的解决方案。客户端必须序列化您的数据，发送和服务器必须接收和反序列化。这很容易。

# iphone - iPhone中的Sharekit Facebook将错误作为应用程序错误

> ID：10942429
> 
> 赞同：0
> 
> 时间：2012-06-08T02:39:18.420
> 
> 标签：iphone, facebook, sharekit

在 iPhone 中登录 Facebook 后，我收到以下错误页面。实际上，我正在使用 sharekit 进行 facebook 连接。

![登录 facebook 后出现此错误](../Images/4164747563e12e59dc373e90c96b5908.png)

请帮助我。

谢谢萨蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:08:07.983

Sharekit 有时会显示此类问题。此外，您用来检查的虚拟帐户可能会进行一些安全检查，从而导致响应超时。因此，我希望您也与另一个帐户进行交叉检查。

干杯，

塔伦。

# javascript - 如何将 HTML 表单的值放入“自定义”URL？

> ID：10942430
> 
> 赞同：2
> 
> 时间：2012-06-08T02:39:35.673
> 
> 标签：javascript, html, forms

在我的网站上，我可以通过访问“mysite.com/search/search_term”访问搜索功能，其中“search_term”是用户输入的术语。我正在尝试获取一个简单的单输入表单来以这种方式格式化 URL。我可以做到的一种方法是制作一个可以重定向到正确位置的 PHP 脚本。因此，如果您导航到“search_redirect.php?term=search_term”，它只会将您重定向到“/search/search_term”。我想避免这样做，因为它似乎有点多余。如果我找不到更好的答案，那可能就是我最终要做的。现在，这是我到目前为止所尝试的：

我尝试`onsubmit`在这样的表单上设置一个：

```
<form onsubmit="search_navigate()" id="navbar_form">
    <input type="search" placeholder="Search Articles..." id="navbar_search"></input>
    <input id="navbar_submit" type="submit" value=">"/>
</form> 
```

...其中，onsubmit 调用此函数：

```
function search_navigate(){
    alert("well hey there");
    window.location = ("http://www.google.com");
} 
```

当我单击提交按钮时，我可以看到警报，但不是像您期望的那样将我带到 Google，而是将我带到我所在的同一页面（无论该页面可能是什么）。

这是我在以*这种*方式实施时面临的问题。如果您完全有另一种方式，我仍然想听听。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:49:05.150

```
function search_navigate() {
    var obj = document.getElementById("navbar_search");
    var keyword = obj.value;
    var dst = "http://yoursite.com/search/" + keyword;
    window.location = dst;
} 
```

这对你有用吗？

* * *

此外，要停止表单提交执行其原始功能，请在函数调用后附加“return false”，即 onsubmit="foo();return false"。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T03:01:49.690

通常当你遇到这种奇怪的行为时，它与`<form>`. 尝试这个：

```
<script type="text/javascript">
function search_navigate() {
    var obj = document.getElementById("navbar_search");
    var keyword = obj.value;
    var dst = "http://yoursite.com/search/" + keyword;
    window.location = dst;
}
</script>

<span id="navbar_form">
    <input type="search" placeholder="Search Articles..." id="navbar_search" />
    <input type="button" id="navbar_submit" value="Submit" onClick="search_navigate()" />
</span> 
```

# javascript - 骨干路由器 + RewriteRule 不使用“/”触发路由

> ID：10942432
> 
> 赞同：3
> 
> 时间：2012-06-08T02:39:44.663
> 
> 标签：javascript, .htaccess, backbone.js, router

我转换所有链接，`example.com/action`然后`example.com/index.html#action`由我的主干路由器解析。

但是，我的新页面`signup/:inviteAuthHash`（例如`signup/9d519a2005b3dac8802d8e9e416239a1`）无法正常工作；唯一呈现的是我`index.html`的，我的路由器中没有一个断点被满足。

.ht 访问：

```
# not a file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# example.com/home => example.com/index.html#home
RewriteRule ^(.+)$ index.html#$1 [L,QSA] 
```

路由器.js

```
var AppRouter = Backbone.Router.extend( {
    routes : {
        /* PAGES */
        // beta
        'request_invite' : 'request_invite',
        'signup/:inviteAuthHash' : 'signup',

        // Default
        '*actions' : 'defaultAction'
    },

    /* PAGES */
    // eta
    request_invite : function() {
        new BetaLayout;
        new RequestInviteView;
    },
    signup : function(inviteAuthHash) {
        // validate auth hash
        if(!InviteRequest.isValidInviteAuthHash(inviteAuthHash))
            return this.defaultAction();
        else {
            new BetaLayout;
            new SignupView(SignupView);
        }
    },

    // Default
    defaultAction : function(actions) {
        app_router.navigate('request_invite');
        this.request_invite();
    }
});

var initialize = function() {
    app_router = new AppRouter;

    $('a').live('click', function() {
        var href = $(this).attr('href');

        // only navigate to real links
        if(href == undefined)
            return;

        // open in new window?
        if($(this).prop('target') == '_blank')
            return true;

        app_router.navigate(href, {trigger: true});

        return false;
    });

    Backbone.history.start({pushState: true});
};
return {
    initialize : initialize
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:01:11.217

你可以试试这个 .htaccess 吗：

```
# not a file or directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
# example.com/home => example.com/index.html#home
RewriteRule (?!^index\.html)^(.+)$ /index.html#$1 [L,NC,R,NE] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:20:15.267

我认为还有另一种，在我看来更好的解决您的问题的方法：使用 pushState。

所以你要做的是

1.  更改您的服务器配置，以便除您的资产之外的 example.com 下的所有 url 实际上呈现 index.html（我的 apache 知识生疏，但这应该不难做到）。
2.  更改对 Backbone.history.start 的调用以启用 pushstate，并指定根`Backbone.history.start({pushState: true, root: "/"})`，请参阅[Backbone 文档](http://documentcloud.github.com/backbone/#History-start)

在支持 pushstate 的浏览器上，url 将按原样显示并且一切正常，在较旧的浏览器上，主干将自动将其转换为带有哈希的 url。

# android - 如何将android中sd卡中的图像（.jpg）设置为BufferedImage图像

> ID：10942434
> 
> 赞同：0
> 
> 时间：2012-06-08T02:40:23.637
> 
> 标签：android

我尝试这样做的方式是这样，但我想将图像设置为 steve.jpg

```
BufferedImage image = null ;
IplImage originalImage = IplImage.createFrom(image); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:32:09.200

您可能想阅读这篇文章... Android 中的[BufferedImage，](https://stackoverflow.com/questions/5392695/bufferedimage-in-android/5392792#5392792)它解释了为什么您不能在 Android 中使用 BufferedImage。

希望这可以帮助。

# linux - 在 Centos 上安装 Oracle 11g

> ID：10942438
> 
> 赞同：1
> 
> 时间：2012-06-08T02:40:47.507
> 
> 标签：linux, oracle, oracle11g, centos

我一直在尝试在 Centos 6.2 上安装 Oracle 11g R2 一段时间。我知道 Oracle 版本未通过 Centos 认证（但已通过 RHEL 认证），因此我根本没想到这会很简单。尽管如此，我还是设法通过修复出现的大多数问题来完成安装，但现在当我尝试运行 SQL*Plus 时，我收到了这条烦人的消息：

```
[oracle@centos ~]$ sqlplus
sqlplus: error while loading shared libraries: libclntsh.so.11.1: wrong ELF class: ELFCLASS64 
```

我认为这指向一个损坏的文件，但是我已经从 Oracle 网站复制了该文件，但仍然无济于事。下面是一些有趣的结果，请注意 ldd 根本找不到这个文件，尽管它在 lib 文件夹中。

```
[oracle@centos ~]$ echo $LD_LIBRARY_PATH
/u01/app/oracle/product/11.2.0/dbhome_1/lib:/lib:/usr/lib </code> 
```

```
[oracle@centos lib]$ ldd $ORACLE_HOME/bin/sqlplus 
linux-gate.so.1 =>  (0x00497000)
libsqlplus.so => /u01/app/oracle/product/11.2.0/dbhome_1/lib/libsqlplus.so (0x00110000)
libclntsh.so.11.1 => not found
libnnz11.so => /u01/app/oracle/product/11.2.0/dbhome_1/lib/libnnz11.so (0x001c0000)
libdl.so.2 => /lib/libdl.so.2 (0x00d5c000)
libm.so.6 => /lib/libm.so.6 (0x0040d000)
libpthread.so.0 => /lib/libpthread.so.0 (0x00d63000)
libnsl.so.1 => /lib/libnsl.so.1 (0x00eae000)
libc.so.6 => /lib/libc.so.6 (0x00bca000)
/lib/ld-linux.so.2 (0x00ba8000)
libclntsh.so.11.1 => not found 
```

```
[oracle@centos lib]$ ls -ll | grep libclntsh.so.11.1 <br/>
-rwxr-xr-x  1 oracle oinstall  52761218 Jun  7 22:27 libclntsh.so.11.1</code> 
```

任何指针将不胜感激。

我还在输出下方粘贴到 id 和 env

```
[oracle@centos ~]$ id
uid=501(oracle) gid=501(oinstall) groups=501(oinstall),502(dba)

[oracle@centos ~]$ env
ORBIT_SOCKETDIR=/tmp/orbit-oracle
HOSTNAME=centos
IMSETTINGS_INTEGRATE_DESKTOP=yes
TERM=xterm
SHELL=/bin/bash
XDG_SESSION_COOKIE=9265be1ee083d7ad74d1cee300000019-1339121593.639472-887657473
HISTSIZE=1000
TMPDIR=/tmp
ORACLE_UNQNAME=DB11G
GTK_RC_FILES=/etc/gtk/gtkrc:/home/oracle/.gtkrc-1.2-gnome2
WINDOWID=39845891
QTDIR=/usr/lib64/qt-3.3
QTINC=/usr/lib64/qt-3.3/include
IMSETTINGS_MODULE=none
USER=oracle
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;05;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lz=01;31:*.xz=01;31:*.bz2=01;31:*.tbz=01;31:*.tbz2=01;31:*.bz=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.rar=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.axv=01;35:*.anx=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.axa=01;36:*.oga=01;36:*.spx=01;36:*.xspf=01;36:
ORACLE_SID=DB11G
GNOME_KEYRING_SOCKET=/tmp/keyring-rhL82I/socket
SSH_AUTH_SOCK=/tmp/keyring-rhL82I/socket.ssh
ORACLE_HOSTNAME=ol5-112.localdomain
ORACLE_BASE=/u01/app/oracle
SESSION_MANAGER=local/unix:@/tmp/.ICE-unix/2361,unix/unix:/tmp/.ICE-unix/2361
USERNAME=oracle
DESKTOP_SESSION=gnome
MAIL=/var/spool/mail/oracle
PATH=/u01/app/oracle/product/11.2.0/dbhome_1/bin:/usr/sbin:/usr/lib64/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin:/u01/app/oracle/product/11.2.0/dbhome_1/bin:/home/oracle/bin
QT_IM_MODULE=xim
PWD=/home/oracle
XMODIFIERS=@im=none
GDM_KEYBOARD_LAYOUT=us
LANG=en_US.UTF-8
GNOME_KEYRING_PID=2352
GDM_LANG=en_US.UTF-8
GDMSESSION=gnome
SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass
HISTCONTROL=ignoredups
HOME=/home/oracle
SHLVL=2
GNOME_DESKTOP_SESSION_ID=this-is-deprecated
LOGNAME=oracle
TMP=/tmp
QTLIB=/usr/lib64/qt-3.3/lib
CVS_RSH=ssh
CLASSPATH=/u01/app/oracle/product/11.2.0/dbhome_1/jlib:/u01/app/oracle/product/11.2.0/dbhome_1/rdbms/jlib
DBUS_SESSION_BUS_ADDRESS=unix:abstract=/tmp/dbus-XYJwhzf59A,guid=01cea4b5cde33013e1cab40300000023
LESSOPEN=|/usr/bin/lesspipe.sh %s
WINDOWPATH=1
DISPLAY=:0.0
ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1
G_BROKEN_FILENAMES=1
XAUTHORITY=/var/run/gdm/auth-for-oracle-lg5ZGT/database
COLORTERM=gnome-terminal
_=/bin/env 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:41:54.223

11gR2 不是一个版本。您要安装什么*特定*版本？

请注意，您*必须*拥有最新的 11gR2 版本，即 11.2.0.3.0。

RHEL 6.x（或 CentOS 6.x）或 Oracle Linux 6.x 不支持 11.2.0.x.0，其中 x < 3。

此外，请确保您运行的是 64 位 Linux。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:51:05.240

centos盒子是64位还是32位安装。看起来oracle安装是64位的，但机器上的操作系统不是。您可以在 64 位操作系统上运行 32 位服务器，但反之则不行。如果要使用 32 位的 centos，则需要安装 32 位的 oracle 11。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T15:23:58.487

这是一个经典的 ldconfig 问题。

请执行下列操作：

1）在你的情况下找到缺少的库''libclntsh.so.11.1''，可能还有其他的（检查你提到的ldd输出）。

为此，请使用“查找”或“定位”命令：

查找 / -name libclntsh.so.11.1*

2）记下包含缺失库的目录，可能有多个目录。

3) 在目录 /etc/ldd.so.conf.d/ 中创建一个名为（例如）oracle64.conf 的文件，并将所有目录放在该文件中（每行一个目录！）。

4) 以 root 身份运行“ldconfig”。

5) 在 ''sqlplus'' 上执行 ''ldd''，现在应该正确配置缺少的库。

6) 正常运行sqlplus。

7) 利润！！;-)

希望这可以帮助。

# bash - Bash - 批处理文件重命名

> ID：10942442
> 
> 赞同：2
> 
> 时间：2012-06-08T02:41:38.573
> 
> 标签：bash

我有一个包含 61 jpg 的文件夹，按图片 002.jpg 到图片 062.jpg 的顺序，我想删除“图片”并按照它们当前所在的顺序正确重命名文件 01 到 61。如何我在 bash 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:49:41.227

```
#!/bin/bash

x=1
for f in *
do
    if [ "$f" != "change_name.sh" ]; then
       new_name=`printf "%02d.jpg" $x`
       mv -v "$f" $new_name
       x=$((x+1))
    fi
done 
```

用法：将脚本保存在`change_name.sh`图像的同一目录中并运行。

您可以`ls`在运行此脚本之前创建您的目录。如果文件名的顺序正确，那很好。或者你可以`ls`在`for`循环中改变`ls|sort`。

希望这能有所帮助。

# jquery - 当文本区域单击或聚焦时将类添加到父 div？

> ID：10942443
> 
> 赞同：1
> 
> 时间：2012-06-08T02:41:42.870
> 
> 标签：jquery, textarea, parent, addclass, toggleclass

单击或聚焦时如何向文本区域的父 div 添加一个类？

```
$(document).ready(function () {  
$('textarea').toggleClass(function() {
  if ($(this).parent().is('.expandingArea')) {
    return $(this).parent().addClass('open');
  } else {
    return $(this).parent().removeClass('open');
  }
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:46:37.817

您可以只使用焦点和模糊来获得此功能。

```
$('textarea').focus( function() {
  $(this).parent().addClass('open');
});

$('textarea').blur( function() {
 $(this).parent().removeClass('open');
}); 
```

[演示](http://jsfiddle.net/mprabhat/CLVer/1/)

[另一个](http://jsfiddle.net/mprabhat/hgcmv/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:50:36.203

```
$('.expandingArea > textarea').on({
  'focus' : function() {
     $(this).parent().addClass('open');
   },
   'blur' : function() {
     $(this).parent().removeClass('open');
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:51:13.520

```
$('textarea').on({
    'click': function() {
        $(this).parents('div.expandingarea').addClass('open')
    },
    'focus': function() {
        $(this).parents('div.expandingarea').addClass('open')
    },
    'blur': function() {
        $(this).parents('div.expandingarea').removeClass('open')
    }
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rB5tn/)**。

# css - 为什么引导程序更少忽略我的变量？

> ID：10942446
> 
> 赞同：2
> 
> 时间：2012-06-08T02:42:05.347
> 
> 标签：css, twitter-bootstrap, less

当我做：

```
@textColor: green; 
```

有用。我的文字变成绿色。但是当我这样做时：

```
@gridColumnWidth:   10px;
@gridGutterWidth:   0px;
@fluidGridColumnWidth:  1%;
@fluidGridGutterWidth: 0%; 
```

我的布局没有变化。有人可以解释发生了什么吗？

**更新** 我注意到生成的 css 似乎是正确的，但是在底部有一个 @media (min-width: 1200px) 和其他类似的部分，它们使用默认值重新生成网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:17:08.633

Twitter Bootstrap 的设计不是很好。它实际上令人讨厌和臃肿。在 responsive.less 文件中，每个响应步骤都会重新生成网格，因此您必须进入其中并根据自己的喜好对其进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T21:58:02.790

我自己已经为此苦苦挣扎了一段时间。但我终于想通了，而且非常简单。看看我发布的问题，我还更新了演练解决方案。

[如何更改默认引导流体网格 12 列装订线宽度](https://stackoverflow.com/questions/14823742/how-to-change-default-bootstrap-fluid-grid-12-column-gutter-width)

如果您有任何问题，请告诉我。我希望这有帮助！

为了快速回答，您应该根据网格系统更改的唯一变量如下：

```
@gridColumns:             12;    //number of columns
@gridColumnWidth:         60px;  //column width
@gridGutterWidth:         20px;  //gutter width
@gridRowWidth:            (@gridColumns * @gridColumnWidth) + (@gridGutterWidth *         (@gridColumns - 1)); 
```

您应该只更改 @gridColumnWidth 和 @gridGutterWidth 变量。从那里计算百分比变量。如果要更改每个媒体查询断点的列和装订线宽度，则需要对每个断点变量执行此操作：

```
@gridColumns:             12;
@gridColumnWidth:         60px;
@gridGutterWidth:         20px;
@gridRowWidth:            (@gridColumns * @gridColumnWidth) + (@gridGutterWidth *         (@gridColumns - 1));

// 1200px min
@gridColumnWidth1200:     70px;
@gridGutterWidth1200:     30px;
@gridRowWidth1200:        (@gridColumns * @gridColumnWidth1200) + (@gridGutterWidth1200 * (@gridColumns - 1));

// 768px-979px
@gridColumnWidth768:      42px;
@gridGutterWidth768:      20px;
@gridRowWidth768:         (@gridColumns * @gridColumnWidth768) + (@gridGutterWidth768 *     (@gridColumns - 1)); 
```

因此，要更改整个响应式网格系统，您需要更改六个变量。这不是 Farhan 所说的硬编码。

更改这些变量的最简单方法（与自己更改它们同样有效）是通过他们的网站：

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

我希望这对某人有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:49:08.393

网格生成是硬编码的。您可以像这样覆盖：

```
@import "twitter/bootstrap";

// Your custom stylesheets goes here (override Less here)
@gridColumnWidth: 10px;
@gridColumns: 16;
@fluidGridColumnWidth: 1%;

#gridSystem {
  .generate(@gridColumns, @gridColumnWidth, @gridGutterWidth) {
    // Default columns
    .span12 { #gridSystem > .columns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 12); }
    .span13 { #gridSystem > .columns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 13); }
    .span14 { #gridSystem > .columns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 14); }
    .span15 { #gridSystem > .columns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 15); }
    .span16,
    .container { #gridSystem > .columns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 16); }
    // Offset column options
    .offset12 { #gridSystem > .offset(@gridColumnWidth, @gridGutterWidth, 12); }    
    .offset13 { #gridSystem > .offset(@gridColumnWidth, @gridGutterWidth, 13); }    
    .offset14 { #gridSystem > .offset(@gridColumnWidth, @gridGutterWidth, 14); }    
    .offset15 { #gridSystem > .offset(@gridColumnWidth, @gridGutterWidth, 15); }    
  }
}

// Fluid grid system
// -------------------------
#fluidGridSystem {
  // Take these values and mixins, and make 'em do their thang
  .generate(@gridColumns, @fluidGridColumnWidth, @fluidGridGutterWidth) {
    // Row surrounds the columns
    .row-fluid {
      // Default columns
      .span13 { #fluidGridSystem > .columns(@fluidGridGutterWidth, @fluidGridColumnWidth, 13); }
      .span14 { #fluidGridSystem > .columns(@fluidGridGutterWidth, @fluidGridColumnWidth, 14); }
      .span15 { #fluidGridSystem > .columns(@fluidGridGutterWidth, @fluidGridColumnWidth, 15); }
      .span16 { #fluidGridSystem > .columns(@fluidGridGutterWidth, @fluidGridColumnWidth, 16); }
    }
  }
}

// Input grid system
// -------------------------
#inputGridSystem {
  .generate(@gridColumns, @gridColumnWidth, @gridGutterWidth) {
    input,
    textarea,
    .uneditable-input {
      &.span13 { #inputGridSystem > .inputColumns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 13); }
      &.span14 { #inputGridSystem > .inputColumns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 14); }
      &.span15 { #inputGridSystem > .inputColumns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 15); }
      &.span16 { #inputGridSystem > .inputColumns(@gridGutterWidth, @gridColumnWidth, @gridRowWidth, 16); }
    }
  }
}

table {
  .span13 { .tableColumns(13); }
  .span14 { .tableColumns(14); }
  .span15 { .tableColumns(15); }
  .span16 { .tableColumns(16); }
} 
```

# c++ - 关于静态变量的访问问题

> ID：10942449
> 
> 赞同：1
> 
> 时间：2012-06-08T02:42:14.107
> 
> 标签：c++

我在一些头文件 Class1.hpp 中有一个类 Class1

```
 class Class1
 {
   static std::vector<bool> var1;
   func();
  }

func()
{
 var1.clear();
 int t=0;
 do
 {
   var1.push_back(t++);
 }while(true); //its some condition 
```

现在在另一个文件的另一个类中的另一个函数 main() 中，我将 var1 分配给另一个 std::vector，例如：

```
 std::vector<bool> var2=Class1::var1; 
```

当我这样做时，它给了我错误：

```
undefined reference to Class1::var1 
```

我不明白我做错了什么。有人可以帮助纠正错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:44:05.470

您得到的错误是***链接错误***而不是编译错误。
链接器告诉您它找不到`Class1::var1`

您刚刚***声明***了向量成员，但没有***定义***它。
添加：

```
std::vector<bool> Class1::var1; 
```

***只到您的一个***cpp文件。

* * *

好读：
[定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:31:54.443

仔细看看你的类定义。您会注意到它没有访问说明符......这意味着所有类访问默认为......私有。

制作静态的东西并不意味着它是“公共的”。

# list - Haskell：列表与流

> ID：10942450
> 
> 赞同：21
> 
> 时间：2012-06-08T02:42:51.367
> 
> 标签：list, haskell, stream

我注意到[流](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Fusion-Stream.html)似乎很像列表，除了恒定时间附加。当然，向列表添加恒定时间追加并不是太复杂，而[DList](http://hackage.haskell.org/packages/archive/dlist/0.5/doc/html/Data-DList.html)正是这样做的。

在接下来的讨论中，让我们假设列表具有恒定的时间附加，或者我们根本对它不感兴趣。

我的想法是 Haskell 列表应该简单地实现为流。如果不是这种情况，我假设需要满足以下条件：

1.  在某些情况下，列表比流更好**并且**
2.  在某些情况下，流比列表更好。

我的问题是：以上两种情况的例子是什么？

*注意：出于这个问题的目的，请忽略我讨论过的特定实现中容易修复的遗漏。我在这里寻找更多的核心结构差异。*

**附加信息：**

我想我在这里得到的部分内容是说如果我们写`[1..1000000]`，Haskell 编译器（比如 GHC）会做什么：

1.  列出清单**或**
2.  使用两个整数创建一个对象：1 和 1000000，它们完全描述了列表。

如果是情况（1），为什么要这样做，因为创建中间列表似乎是不必要的性能损失？

或者如果是情况（2），那么我们为什么需要流？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-08T03:54:15.827

当您编写`[1..1000000]`时，GHC 真正做的是创建一个对象，其中包含`1`并`1000000`描述了如何构建感兴趣的列表；该对象称为“thunk”。该列表仅在满足案件审查员的需要时才建立；例如，你可以写：

```
printList [] = putStrLn ""
printList (x:xs) = putStrLn (show x) >> printList xs

main = printList [1..1000000] 
```

评估如下：

```
main
= { definition of main }
printList [1..1000000]
= { list syntax sugar }
printList (enumFromTo 1 1000000)
= { definition of printList }
case enumFromTo 1 1000000 of
    [] -> putStrLn ""
    x:xs -> putStrLn (show x) >> printList xs
= { we have a case, so must start evaluating enumFromTo;
    I'm going to skip a few steps here involving unfolding
    the definition of enumFromTo and doing some pattern
    matching }
case 1 : enumFromTo 2 1000000 of
    [] -> putStrLn ""
    x:xs -> putStrLn (show x) >> printList xs
= { now we know which pattern to choose }
putStrLn (show 1) >> printList (enumFromTo 2 1000000) 
```

然后您会发现它`1`已打印到控制台，我们将从顶部附近开始，`enumFromTo 2 1000000`而不是`enumFromTo 1 1000000`. 最终，你会打印出所有的数字，是时候进行评估了

```
printList (enumFromTo 1000000 1000000)
= { definition of printList }
case enumFromTo 1000000 1000000 of
    [] -> putStrLn ""
    x:xs -> putStrLn (show x) >> printList xs
= { skipping steps again to evaluate enumFromTo }
case [] of
    [] -> putStrLn ""
    x:xs -> putStrLn (show x) >> printList xs
= { now we know which pattern to pick }
putStrLn "" 
```

和评估将完成。

我们需要流的原因有点微妙。原始论文[Stream fusion: From lists to streams to nothing](http://citeseer.ist.psu.edu/viewdoc/summary?doi=10.1.1.104.7401)可能有最完整的解释。简短的版本是当您有很长的管道时：

```
concatMap foo . map bar . filter pred . break isSpecial 
```

...如何让编译器编译掉所有中间列表并不是那么明显。您可能会注意到，我们可以将列表视为一种正在迭代的“状态”，并且这些函数中的每一个，而不是遍历列表，只是改变了每次迭代时修改状态的方式。该`Stream`类型试图明确这一点，结果是流融合。下面是它的外观：我们首先将所有这些函数转换为流版本：

```
(toList . S.concatMap foo . fromList) .
(toList . S.map bar . fromList) .
(toList . S.filter pred . fromList) .
(toList . S.break isSpecial . fromList) 
```

然后观察我们总是可以歼灭`fromList . toList`：

```
toList . S.concatMap foo . S.map bar . S.filter pred . S.break . fromList 
```

...然后神奇的事情发生了，因为链`S.concatMap foo . S.map bar . S.filter pred . S.break`显式地构建了一个迭代器，而不是通过内部构建隐式构建它，然后立即消除实际列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T03:33:51.043

流的优点是它们更强大。界面：

```
data Stream m a = forall s . Stream (s -> m (Step s a)) s Size 
```

让你做很多普通列表不能做的事情。例如：

*   跟踪大小（例如 Unknown、Max 34、Exact 12）
*   执行一元动作以获得下一个元素。列表可以通过惰性 IO 部分做到这一点，但该技术已被证明容易出错，并且通常仅由初学者使用，或者用于简单的小脚本。

但是，与列表相比，它们有一个很大的缺点 - 复杂性！对于初学者来说，要理解流，你必须了解存在类型和单子动作。如果使用基本列表类型必须学习这两个复杂的主题，那么学习haskell 将非常困难。

将其与具有接口的列表进行比较：

```
data [] a = a : [a] | [] 
```

这非常简单，并且可以很容易地教给新程序员。

列表的另一个优点是您可以简单地对它们进行模式匹配。例如：

```
getTwo (a : b : _) = Just (a,b)
getTwo _ = Nothing 
```

这对有经验的程序员（我在许多方法中仍然使用列表模式匹配）和尚未学习可用于操作列表的标准高阶函数的初学者程序员都很有用。

效率也是列表的另一个潜在优势，因为 ghc 花了很多时间在列表融合上。在很多代码中，从不生成中间列表。使用流进行优化可能要困难得多。

所以我认为将列表与 Streams 交换是一个糟糕的选择。目前的情况更好，如果需要，可以将它们引入其中，但初学者不会被它们的复杂性所困扰，熟练的用户也不必失去模式匹配。

编辑：关于`[1..1000000]`：

这等效于`enumFromTo 1 1000000`，它是惰性求值的，并且会进行融合（这使得它非常有效）。例如`sum [1..1000000]`，在优化开启的情况下不会生成任何列表（并使用常量内存）。所以情况（2）是正确的，由于惰性评估，这种情况对流来说不是优势。如上所述，流与列表相比还有其他优势。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-08T08:18:52.013

简短的回答：列表和流在力量上是无与伦比的。流允许单子操作但不允许共享，而列表反之亦然。

更长的答案：

1) 请参阅@nanothief 了解无法用列表实现的反例 2) 下面是一个不能用流轻松实现的反例

问题是玩具列表示例通常不使用列表的共享功能。这是代码：

```
foo = map heavyFunction bar
baz = take 5 foo
quux = product foo 
```

使用列表，您只需计算一次繁重的函数。`baz`在没有额外计算的情况下计算和`quux` 使用流的代码`heavyFunction`将难以维护。

# vb.net - 鼠标光标隐藏，直到从下拉列表中选择项目

> ID：10942451
> 
> 赞同：2
> 
> 时间：2012-06-08T02:42:56.343
> 
> 标签：vb.net, winforms

VB.NET Winforms 应用程序...当用户开始在应用程序的搜索框中键入时，它会自动使用有效结果填充名称列表下拉框，并将下拉值设置为 true... 一切正常，除了以下事实用户被迫从名称列表中选择一个值或按 esc 键，因为如果不这样做，鼠标光标就会消失，您必须将鼠标一直移到应用程序之外才能返回，它只会这样做在应用程序之外..下面是我为此使用的代码，应该注意的是，我在应用程序的其他地方使用下拉值，并且这些实例都没有问题，只有这个......任何想法？？？

```
 Private Sub u_lastName_Box_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles u_lastName_Box.TextChanged
    u_nameLook_Box.Items.Clear()
    Dim TenList As New List(Of tenant)
    Dim x As List(Of tenant) = db.tenants.Where(Function(f) f.last_name.Contains(u_lastName_Box.Text) AndAlso f.propertyId = selectedProperty).OrderBy(Function(f) f.last_name).ToList
    For Each _ten In x
        Dim c = _ten
        u_nameLook_Box.Items.Add(Convert.ToString(c.Occupantid) + " -- " + c.last_name + "," + c.first_name)
    Next

    RemoveHandler u_nameLook_Box.DropDown, AddressOf u_nameLook_Box_DropDown
    u_nameLook_Box.DroppedDown = True
    AddHandler u_nameLook_Box.DropDown, AddressOf u_nameLook_Box_DropDown
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-10T19:37:32.653

我遇到了同样的问题，我解决了它“更新”鼠标状态，

```
ComboBoxClients.DroppedDown = True

Cursor.Current = Cursors.Default 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:15:10.390

在考虑了一夜之后，我实际上刚刚解决了这个问题。我尝试了没有骰子的 cursor.show ......我想了更多，并决定在 cursor.show 之前设置光标样式现在可以工作了...我的更新代码如下...关于光标样式和可见性如何或为什么首先发生更改存在一些问题...

```
 Private Sub u_lastName_Box_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles u_lastName_Box.TextChanged
    u_nameLook_Box.Items.Clear()
    If Not u_lastName_Box.Text.Length < 1 Then
        Dim TenList As New List(Of tenant)
        Dim x As List(Of tenant) = db.tenants.Where(Function(f) f.last_name.Contains(u_lastName_Box.Text) AndAlso f.propertyId = selectedProperty).OrderBy(Function(f) f.last_name).ToList
        For Each _ten In x
            Dim c = _ten
            u_nameLook_Box.Items.Add(Convert.ToString(c.Occupantid) + " -- " + c.last_name + "," + c.first_name)
        Next

        RemoveHandler u_nameLook_Box.DropDown, AddressOf u_nameLook_Box_DropDown
        u_nameLook_Box.DroppedDown = True
        Me.Cursor = Cursors.Default
        Cursor.Show()
        AddHandler u_nameLook_Box.DropDown, AddressOf u_nameLook_Box_DropDown
    Else
        u_lookup_boxes_fill()
    End If

End Sub 
```

# c++ - POCO C++ 中的 SSL 异常

> ID：10942453
> 
> 赞同：2
> 
> 时间：2012-06-08T02:43:06.280
> 
> 标签：c++, exception, https, poco-libraries

当我使用完成构建 POCO 库时

```
Win32OpenSSL-1_0_1c.exe
poco-1.4.3p1-all 
```

我首先感到高兴，因为我可以使用 HTTPS 来编写我的程序。但是，我遇到了异常

```
msg = "error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol 
```

当我使用 HTTPSClientSession 发送请求时。我的代码如下：

```
try{

Context::Ptr pContext = new Context(Context::CLIENT_USE, "", "", "", Context::VERIFY_RELAXED, 9, true, "ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH");
HTTPSClientSession session(pContext);
Poco::URI uri("...");//private server with https
session.setHost(uri.getHost());
session.setKeepAlive(true);
HTTPRequest request(HTTPRequest::HTTP_POST);
session.sendRequest(request) << ...;
char m_arrayRet[1024];
HTTPResponse response;
std::istream& res = session.receiveResponse(response);
while(!res.eof())
res.read(m_arrayRet,1024);
m_arrayRet[res.gcount()] = '\0';
}
catch{
std::cerr << exc.displayText() << std::endl;
} 
```

恩，我的代码对吗？？这是我第一次使用这个库。希望大家帮助我，谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:31:12.790

我自己已经解决了这个问题。谢谢大家。原因`443`是没有设置端口，poco语法中的地址不正确

# html - 如何从解析的文本中删除 HTML 标签？

> ID：10942455
> 
> 赞同：1
> 
> 时间：2012-06-08T02:43:18.293
> 
> 标签：html, blackberry, java-me

我正在为 BlackBerry 平台、OS 5、6、7 开发

我已经解析了一个字符串中的 RSS 提要，然后将其列在 ListField 中，

但解析后的字符串充满了 HTML 标签，例如：

`"<div id="cke_pastebin" style="text-align: justify; ">"`

和其他 HTML 和 CSS 标记。

从字符串中删除 HTML 标记的最佳方法是什么？

我使用`subString`了方法，但它不会完美。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:49:04.330

您可以执行以下操作。让浏览器为您完成工作。

```
var html = "<p>Hello, <b>World</b>";
var div = document.createElement("div");
div.innerHTML = html;
alert(div.innerText); // Hello, World 
```

# php - MySQL FROM 多个表 LEFT JOIN 'on 子句'中的未知列

> ID：10942461
> 
> 赞同：2
> 
> 时间：2012-06-08T02:43:50.097
> 
> 标签：php, mysql, silverstripe

我有一个有趣的查询，我似乎遇到了麻烦。

我需要从几个表中选择数据并加入另一个表，该表的列可能不存在于其他表中。

我已经尝试了几个角度。这是第一个：

```
SELECT SiteTree.*, Page.*, AlbumItem.*, Album.*
FROM SiteTree, AlbumItem, Album
LEFT JOIN Page ON SiteTree.ID = Page.ID 
```

抛出这个：#1054 - 'on 子句'中的未知列 'SiteTree.ID'，大概是因为当它从相册表中选择时尝试加入时，没有 SiteTree.ID 列。

我也试过这个：

```
SELECT SiteTree.*, Page.*, AlbumItem.*, Album.*
FROM SiteTree LEFT JOIN Page ON SiteTree.ID = Page.ID, AlbumItem, Album 
```

它返回大约 20 行，我知道根据 where 子句应该只有 2 行。事实上，每个结果行大约有 10 个副本

where子句如下：

```
WHERE (
    (
        AlbumItem.ClassName = 'AlbumItem' OR 
        Album.ClassName = 'Album' OR 
        SiteTree.ClassName = 'Page' OR 
        SiteTree.ClassName = 'HomePage' OR 
        SiteTree.ClassName = 'NewsCategory' OR
        SiteTree.ClassName = 'NewsArticle' OR
        SiteTree.ClassName = 'CartPage' OR
        SiteTree.ClassName = 'Product' OR
        SiteTree.ClassName = 'ProductGroup' OR
        SiteTree.ClassName = 'MemberProfilePage' OR
        SiteTree.ClassName = 'SubscriptionPage' OR
        SiteTree.ClassName = 'ErrorPage' OR
        SiteTree.ClassName = 'RedirectorPage' OR
        SiteTree.ClassName = 'VirtualPage' OR
        SiteTree.ClassName = 'UserDefinedForm' OR
        SiteTree.ClassName = 'CheckoutPage' OR
        SiteTree.ClassName = 'OrderConfirmationPage' OR
        SiteTree.ClassName = 'TagPage'
    ) AND (
       INSTR(Page.Tags,'x') OR
       INSTR(AlbumItem.Tags,'x') OR
       INSTR(Album.Tags,'x')
    )
) 
```

将查询减少到这个会产生正确的结果，但它也不适用于其他表：

```
SELECT SiteTree.*, Page.*
FROM SiteTree
LEFT JOIN Page ON SiteTree.ID = Page.ID 
```

我需要知道的是，如果不诉诸工会，我正在尝试做的事情是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:08:31.217

缺乏实际的连接标准`AlbumItem`并`Album`导致（一对）完全外部连接/交叉连接问题。您应该正确加入这两个表。否则，您将至少为这些表中的每一个获得一条记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T21:17:32.037

好的，所以我现在有一个有效的查询。

为了正确看待事情，我在 SilverStripe 中构建了一个可标记模块。SilverStripe 中的 ORM 允许将扩展添加到多个 DataObjects，这些 DataObjects 可能具有不共享公共列的唯一表集以执行`JOIN`with`ON`子句。

`SQLQuery`在生成查询时，我试图在对象的限制下工作。SilverStripe 中的 SQLQuery 对象不支持`UNION`，因此我希望不必生成完整的原始 SQL 查询。似乎没有办法避免不使用`UNION`.

所以我最终为 PDO 制作了一个薄包装器，并使用了一个`UNION`基于查询的方法，如下所示。它是在一个遍历对象图以查找所有相关表的脚本中自动生成的，因此它比我手动编写它时稍微冗长一些。它还应该使用正则表达式匹配，以便匹配更准确，但此时我更关心生成一些可用输出的查询：

```
SELECT SQL_CALC_FOUND_ROWS SiteTree.ClassName, SiteTree.ID
FROM SiteTree LEFT JOIN Page ON SiteTree.ID = Page.ID
WHERE (
    SiteTree.ClassName = 'Page' OR 
    SiteTree.ClassName = 'HomePage' OR 
    SiteTree.ClassName = 'NewsCategory' OR 
    SiteTree.ClassName = 'NewsArticle' OR 
    SiteTree.ClassName = 'GalleryPage' OR 
    SiteTree.ClassName = 'CartPage' OR 
    SiteTree.ClassName = 'Product' OR 
    SiteTree.ClassName = 'ProductGroup' OR 
    SiteTree.ClassName = 'MemberProfilePage' OR 
    SiteTree.ClassName = 'SubscriptionPage' OR 
    SiteTree.ClassName = 'ErrorPage' OR 
    SiteTree.ClassName = 'RedirectorPage' OR 
    SiteTree.ClassName = 'VirtualPage' OR 
    SiteTree.ClassName = 'UserDefinedForm' OR 
    SiteTree.ClassName = 'CheckoutPage' OR 
    SiteTree.ClassName = 'OrderConfirmationPage' OR
    SiteTree.ClassName = 'TagPage'
) AND (
    INSTR(Page.Tags,'x')
)

UNION ALL

SELECT AlbumItem.ClassName, AlbumItem.ID
FROM AlbumItem
WHERE (AlbumItem.ClassName = 'AlbumItem') AND (INSTR(AlbumItem.Tags,'x'))

UNION ALL

SELECT Album.ClassName, Album.ID
FROM Album
WHERE (Album.ClassName = 'Album') AND (INSTR(Album.Tags,'x'))

LIMIT 0,40 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:58:41.903

`ID`表中是否有列命名`SiteTree`？鉴于错误消息，没有。修复此问题，使其引用表中实际存在的列。

另外，你为什么要做`ANSI JOIN`s（即使用 ,）……你应该是`INNER JOIN`s，否则你不会得到你所期望的。

# ios - 使用应用内购买更新 iOS 应用

> ID：10942462
> 
> 赞同：0
> 
> 时间：2012-06-08T02:43:50.463
> 
> 标签：ios, auto-update, storekit

理论上是否可以使用应用内购买来自动更新 iOS 应用？基本上，使用 StoreKit 替换设备上的现有代码？IAP 本身是免费的，因此用户无需参与。

一般而言，如何实施这样的系统？

我不需要这个，我只是觉得它会很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:17:04.003

顾名思义，应用内购买仅供购买，不允许免费的应用内购买。

此外，您不得下载或安装可执行代码。

> 3.3.2 内部使用应用程序不得下载或安装可执行代码。如果所有脚本、代码和解释器都打包在应用程序中并且未下载，则解释的代码只能在应用程序中使用。上述情况的唯一例外是由 Apple 的内置 WebKit 框架下载和运行的脚本和代码。

所以我不认为你在想什么是不可能的。

# opencl - HD 处理器显卡 (HD4000) 无法作为英特尔 OpenCL SDK 中的设备加载

> ID：10942465
> 
> 赞同：4
> 
> 时间：2012-06-08T02:43:58.373
> 
> 标签：opencl, intel

我正在使用带有 HD 4000 的 i7-3770K Ivy Bridge，并且我已经安装了最新的驱动程序和最新的[OpenCL SDK](http://software.intel.com/en-us/articles/vcsource-tools-opencl-sdk/)。

当尝试使用 CPU 运行代码示例时，它工作得很好。但是，当我将“-g”参数设置为与处理图形一起运行时，无法找到该设备，因此它以代码 -1 退出（这可能是由于未能创建 CL 上下文引起的）。

SimpleOptimization、GodRays 和所有支持英特尔处理器显卡的代码都无法在 HD4000 上运行。

我使用的是 Windows 7 64 位 MSVS VC++ 2008 速成版。

[GPU Caps Viewer](http://www.geeks3d.com/20120427/intel-ivy-bridge-hd-graphics-4000-gpu-opengl-and-opencl-tests/3/)也无法将 Intel HD Graphics 检测为 Intel OpenCL 设备。

此外，当我运行[DirectX SDK](http://www.microsoft.com/en-us/download/details.aspx?id=6812)代码示例时，可以完美检测到 Intel HD 4000，并且它可以很好地使用高清显卡运行代码。

而且我的系统上还有一个 nvidia 卡，它作为图形驱动程序运行。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:14:42.560

我已经设法根据英特尔的 SE 声明解决了我的问题。现在，HD Graphics 可以完美地作为 OpenCL 设备运行。

```
"I also have an nvidia card on my system which runs as the graphical driver." 
```

> [Maxim Shevtsov（英特尔）](http://software.intel.com/en-us/profile/453760/)：这可能是真正的根本原因。当前处理器图形 OCL 设备在“无头”配置中不可用（未插入显示器）。

这是英特尔论坛中的问答和答案，我希望这对遇到此问题的人有用：

[http://software.intel.com/en-us/forums/showthread.php?t=105793&p=1#187037](http://software.intel.com/en-us/forums/showthread.php?t=105793&p=1#187037)

# c# - 我对回发有一个奇怪的问题，它重定向而不是回发

> ID：10942467
> 
> 赞同：1
> 
> 时间：2012-06-08T02:44:06.903
> 
> 标签：c#, asp.net, azure, asp.net-ajax, postback

我有一个非常奇怪的问题。我的应用程序在我的 PC 上运行良好（像往常一样），但是当我将它部署到生产环境时，它会执行以下操作：

*   当我通过键入[http://localpet.cloudapp.net/](http://localpet.cloudapp.net/)访问站点时，然后当我从下拉列表中选择旨在加载另一个下拉列表的项目时，值会从第一个下拉列表中清除，就好像它不是回发而是重定向到同一页面或刷新它
*   当我使用[http://localpet.cloudapp.net/Default.aspx](http://localpet.cloudapp.net/Default.aspx)访问站点时，一切正常，所有回发功能都按预期进行

您可以自己尝试，访问我的网址并尝试从下拉框中选择动物类型。值被清除。但是，如果您指定页面“Default.aspx”它工作正常。我没有做任何明确的页面重定向。在我的本地 PC 上，我尝试了 Casini 和 IIS，它工作正常。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:50:03.673

看看[ASP.NET 4.0](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770154)的变化。

> 在 IIS 7 或 IIS 7.5 集成模式下的默认文档中可能不会引发事件处理程序。
> 
> ASP.NET 4 现在将 HTML 表单元素的 action 属性值呈现为空字符串，当对映射了默认文档的无扩展名 URL 发出请求时。例如，在 ASP.NET 的早期版本中，对[http://contoso.com](http://contoso.com)的请求将导致对 Default.aspx 的请求。在该文档中，开始的表单标记将呈现如下示例：

```
<form action="Default.aspx" /> 
```

> 在 ASP.NET 4 中，对[http://contoso.com](http://contoso.com)的请求也会导致对 Default.aspx 的请求。但是，ASP.NET 现在呈现 HTML 开始表单标记，如下例所示：

```
 <form action="" /> 
```

发布的链接（文章）和 SO 线程中提到的一些解决方法 - [Postback 不适用于 aspx 页面作为 Default Document](https://stackoverflow.com/questions/7228344/postback-doesnt-work-with-aspx-page-as-default-document)。

这是另一种设置动作属性的方法。您必须在 Default.aspx 的 Page_Load 处理程序中编写以下代码。

```
 HtmlForm form=Master.FindControl("form1") as HtmlForm;
 form.Action = "Default.aspx"; 
```

# python - 用firebug在python中抓取一个网站？

> ID：10942469
> 
> 赞同：0
> 
> 时间：2012-06-08T02:44:21.037
> 
> 标签：python, firebug, web-scraping

我正在尝试抓取一个网站，但我想要得到的东西不在源代码中。但是当我使用萤火虫时它确实出现了。有没有办法从萤火虫代码而不是源代码中抓取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:53:49.233

您所追求的可能是由 JavaScript 动态加载的（可能使用 Ajax）。要在浏览器之外以编程方式获取它，您必须渲染 JavaScript，这并不容易。不过，您应该能够在渲染后运行 Greasemonkey 脚本来抓取它。请参阅[http://blog.nparashuram.com/2009/08/screen-scraping-with-javascript-firebug.html](http://blog.nparashuram.com/2009/08/screen-scraping-with-javascript-firebug.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:52:27.540

如果答案不在源代码中（可能是混淆、编码等），那么它可能是在加载了`XmlHTTPRequest`. 您可以使用 Firebug 中的“网络”面板来查看页面加载了哪些其他数据，以及它为加载它们所做的请求。

（您可能必须启用网络面板，然后重新加载页面/重新开始）

# php - 我有一个 PHP 和 MySQL 表单，它打开一个空白页面，而不是显示编辑表单

> ID：10942473
> 
> 赞同：-4
> 
> 时间：2012-06-08T02:44:28.253
> 
> 标签：php, mysql

不幸的是，我原来的帖子不知何故搞砸了，当我去修复缩进时，Stackoverflow 说这是一个重复的帖子（本身）。

所以，我删除了帖子，但我无法重新发布它，因为它仍然是重复的。

所以，有问题的代码在这里，在一个谷歌文档中：

[https://docs.google.com/document/d/1KRGNtjnvpksnhVmx9jgysFSh_hqF3gMxB00_8095HSw/edit](https://docs.google.com/document/d/1KRGNtjnvpksnhVmx9jgysFSh_hqF3gMxB00_8095HSw/edit)

寻求任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:09:33.243

你在这里有一个语法错误： `$ = $row['articletitle'];`

检查你的语法！

此外，启用错误报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:03:28.550

我不知道你为什么要测试 ID `if(is_numeric($_POST['id']))`？因为它来自数据库，并且您已经将其定义为整数。还有这个， `if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)`我认为这种情况有问题，所以它永远不会进入。

# .net - 确定适当数量的任务

> ID：10942475
> 
> 赞同：3
> 
> 时间：2012-06-08T02:44:42.207
> 
> 标签：.net, task-parallel-library

我正在开发一个小型库，它使用任务并行库来运行并行搜索以寻找解决方案。当前的设计遵循以下原则：

*   ConcurrentQueue 接收 Searches 的结果，
*   一个主任务作为一个循环工作，作为一个后台线程运行。当一个新的解决方案到达队列时，它会出列并处理它，然后在一个新任务上启动一个新的搜索，
*   搜索在其自己的任务中启动，并在完成后将其结果返回到队列。

[根据 Eric J 的回答进行编辑：所涉及的活动完全受 CPU 限制，不涉及 IO]

该框架目前运行良好。但是，我可以完全控制将触发的搜索任务的数量，并且我的理解是，虽然 TPL 目前可以很好地处理这种情况，但将大量搜索推向系统不会导致并行度增加，因为它会受到系统上可用的核心数量的限制，并且在达到一定水平后会适得其反。

我的问题如下：我可以通过限制将运行的搜索任务的数量来“帮助”TPL，如果可以，我将如何确定上限应该是多少？例如基于 System.Environment.ProcessorCount 限制它是否合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:49:03.060

首先，除非这里有真正的性能问题，否则我会让 TPL 做这件事。它非常擅长这一点。

如果您确实需要控制任务数量来解决实际性能问题，您需要了解限制性能的因素。您的任务受 CPU 限制吗？IO绑定？您是否用完了物理内存，导致交换？

一旦您知道限制因素是什么，您当然可以*监控*该因素并根据该（运行时）测量值调整运行任务的数量。例如，如果您的任务受 CPU 限制但有一些 IO 时间，则基于内核数的硬限制很接近但不是最佳的。而是根据整体 CPU 利用率进行限制。 *这假设机器主要用于处理此任务。如果不是这样，手动调整会更加复杂且容易出错。*

# php - 3 位数字的 PHP 正则表达式（精确）以 6 开头

> ID：10942482
> 
> 赞同：1
> 
> 时间：2012-06-08T02:45:37.083
> 
> 标签：php, regex

我正在尝试编写一个 PHP 正则表达式来查找仅长度为 3 位且以 6 开头的数字。所以应该没有其他符号 - 只是一个 3 位数字。我知道

```
^6 
```

将验证它是否以 6 领先，以下将验证它是 3 位数长

```
^\d{3}$ 
```

但我找不到将这两个表达式组合成一个正则表达式的方法。任何人都知道我可以如何组合表达式？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T02:47:54.410

你很接近:)，现在你只需要制作表达式的 6 部分并在 6 之后允许 2 位数字：

```
^6\d{2}$ 
```

应该是你要找的

# scala - Scala 2.9.1 的错误 fsc Ant 任务是否有解决方法？

> ID：10942484
> 
> 赞同：3
> 
> 时间：2012-06-08T02:45:48.327
> 
> 标签：scala, ant, scala-2.9, fsc

`fsc`Scala 2.9.1 提供的Ant 任务有问题（问题[SI-5174](https://issues.scala-lang.org/browse/SI-5174)和[SI-5196](https://issues.scala-lang.org/browse/SI-5196)）：如果编译失败，一切都会正常进行。另一方面，如果编译*成功，则会报告内部编译错误——即使所有内容都是直接编译的。*当然，可以运行任务并忽略错误，但这很烦人，而且更难看出事情何时正确与否。这显然是一个已知的错误，但我想知道是否有任何已知的*解决方法*：仍然使用的方法`fsc`使用 Scala 2.9 获得它提供的（显着）速度提升，但看不到错误（即使错误仍然发生在幕后）。我知道这已在 Scala 2.10 中修复，但我宁愿不安装它；它还不是一个稳定的版本，我和我的合作者已经安装了 Scala 2.9。

* * *

可能适用的其他信息：

报告的错误是

```
[fsc] /.../build.xml:48: Compile failed; see the compiler error output for details.
[fsc]   at scala.tools.ant.ScalaTask$class.buildError(ScalaMatchingTask.scala:27)
[fsc]   at scala.tools.ant.ScalaMatchingTask.buildError(ScalaMatchingTask.scala:30)
[fsc]   at scala.tools.ant.FastScalac.execute(FastScalac.scala:107)
[fsc]   at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
[fsc]   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[fsc]   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
[fsc]   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[fsc]   at java.lang.reflect.Method.invoke(Method.java:597)
[fsc]   at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
[fsc]   at org.apache.tools.ant.Task.perform(Task.java:348)
[fsc]   at org.apache.tools.ant.Target.execute(Target.java:390)
[fsc]   at org.apache.tools.ant.Target.performTasks(Target.java:411)
[fsc]   at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
[fsc]   at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
[fsc]   at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
[fsc]   at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
[fsc]   at org.apache.tools.ant.Main.runBuild(Main.java:809)
[fsc]   at org.apache.tools.ant.Main.startAnt(Main.java:217)
[fsc]   at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
[fsc]   at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

该`build.xml`文件的相关部分是：

```
<target name="init">
  ...
  <taskdef resource="scala/tools/ant/antlib.xml">
    <classpath>
      <pathelement location="${scala-compiler.jar}" />
      <pathelement location="${scala-library.jar}" />
    </classpath>
  </taskdef>
</target>

...

<target name="compile" depends="init">
  <mkdir dir="${classes.dir}" />
  <fsc srcdir="${source.dir}"
       destdir="${classes.dir}"
       classpathref="build.classpath"
       deprecation="yes"
       unchecked="yes" />
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:09:02.613

坦率地说，没有，或者至少没有我设法找到的。我们最终转向了 Maven（尝试了 SBT，但它太麻烦了）。

# video - ffmpeg 可以从文件中的特定位置解析吗？

> ID：10942487
> 
> 赞同：2
> 
> 时间：2012-06-08T02:45:55.810
> 
> 标签：video, ffmpeg, video-streaming, video-processing, mediainfo

我正在使用表单上传视频，并希望从上传的临时文件中解析视频信息。临时文件在文件开头包含一些表单信息，其余部分是视频字节。ffmpeg可以从视频字节开始的位置解析文件吗？如何？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-18T11:48:03.247

试试这个`-skip_initial_bytes <bytecount>`参数。

[http://trac.ffmpeg.org/ticket/1909](http://trac.ffmpeg.org/ticket/1909)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:54:21.733

如果您只是想编写脚本，可能最简单的方法是使用该`dd(1)`工具仅提取您感兴趣的数据。它看起来像这样：

```
dd if=/path/to/temp/file ibs=<size to skip> skip=1 | ffmpeg --whatever 
```

它不会是*完美*的，因为它将使用该块大小进行*所有*输入操作；与您在开始时浪费的空间相比，更大的东西和 2 的幂的倍数将是理想的，但它应该比创建具有几乎相同内容的新文件更好。

# asp.net-mvc - 如何将动态数据从视图传递到控制器

> ID：10942494
> 
> 赞同：1
> 
> 时间：2012-06-08T02:47:34.833
> 
> 标签：asp.net-mvc, visual-studio-2010

我正在尝试从数据库中动态加载图像，因为我使用的是：

```
<img src='@Url.Action("GetImage/${ID}", "Home")' alt = "${name} image" /> 
```

但它不会反映到控制器，但如果我静态地放：

```
<img src='@Url.Action("GetImage/1", "Home")' alt = "${name} image" /> 
```

然后它反映到控制器并显示图像。我想将 ID 从视图动态发送到控制器。如何将动态值与“GetImage”连接起来

我的控制器代码是：

```
public ActionResult GetImage(int id)
{
  var imgquery = (from img in dbContext.Listdetails where img.ID == id
  select new
  {
    Image = img.Image
  }).FirstOrDefault();
  {
    System.IO.MemoryStream outStream = new System.IO.MemoryStream();
    byte[] Image = imgquery.Image;
    return File(Image, "Image/jpg");
  }
} 
```

有什么建议么？

# java - ZLIB 输入流意外结束。谁关闭了我的信息流？

> ID：10942495
> 
> 赞同：0
> 
> 时间：2012-06-08T02:47:34.673
> 
> 标签：java, spring, stream, zip, apache-camel

我有 spring+camel+FTP 模块。我需要从 FTP 服务器下载文件并使用 ZipInputStream 从 zip 文件中提取数据。这是我的附加课程：

```
public class TransactionsSupport {

    protected final Logger l = LoggerFactory.getLogger(getClass());

    protected void copy(InputStream is, OutputStream os, byte[] buffer) throws IOException {
        int len;
        while ((len = is.read(buffer)) >= 0) {
            os.write(buffer, 0, len);
        }
        is.close();
        os.close();
    }

    public void copy(InputStream is, OutputStream os) throws IOException {
        copy(is, os, new byte[4096]);
    }

    public byte[] unzip(ZipInputStream zipInputStream) {
        byte[] bytes = null;
        try {
            ZipEntry entry = zipInputStream.getNextEntry();
            l.info("{}", entry.getName());
            ByteArrayOutputStream streamBuilder = new ByteArrayOutputStream();
            copy(zipInputStream, streamBuilder);
            bytes = streamBuilder.toByteArray();
            l.info("bytes.length {}", bytes.length);
        } catch (IOException ex) {
            l.error(ex.getMessage(), ex);
        } finally {
            if (zipInputStream != null) {
                try {
                    zipInputStream.close();
                } catch (IOException ex) {
                    l.error(ex.getMessage(), ex);
                }
            }
        }
        return bytes;
    } 
```

我成功地用本地文件测试了这段代码。

```
public void inputStream2OutputStream(InputStream stream, OutputStream out) throws IOException {
        int readedBytes;
        byte[] buf = new byte[1024];
        while ((readedBytes = stream.read(buf)) > 0) {
            out.write(buf, 0, readedBytes);
        }
        stream.close();
        out.close();
    }

    @Test
        public void fromByteArrayStreamToZipInputStreamTest() throws IOException, UnsupportedTransactionType, WrongRecordsNumberException, WrongCheckSum {
            File fileIn = new File((postedTransactionPath + postedTransactionFileName));
            FileInputStream in = new FileInputStream(fileIn);
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            inputStream2OutputStream(in, out);
            InputStream inS = new ByteArrayInputStream(out.toByteArray());
            ZipInputStream s = new ZipInputStream(inS);
            byte[] bytes = support.unzip(s);
            inS.close();
            s.close();

            String text = new String(bytes);
    l.info(text);
    parser.parse(text); 
```

// 没关系 }

但是当我尝试通过骆驼处理它时，我得到了“ZLIB 输入流的意外结束”这是我的处理器：

```
@Override
    public void process(Exchange exchange) throws Exception {
        l.info(exchange);
        RemoteFile remoteFile = (RemoteFile) exchange.getIn().getBody();
        ByteArrayOutputStream streamOut = (ByteArrayOutputStream) remoteFile.getBinding().getBody(new GenericFile());
        ZipInputStream zipStream = new ZipInputStream(new ByteArrayInputStream(streamOut.toByteArray()));
        l.info("file name: {}" + remoteFile.getFileName());
        TransactionsSupport support = new TransactionsSupport();
        byte[] bytes = support.unzip(zipStream); //Here we have exception that is refferenced to method copy() of TransactionsSupport class
        String text = new String(bytes);
        l.info(text);
        parser.parse(text);
        if (((FirstDataTransactionsParser) parser).getHeader() == null) {
            l.error("ERRORRRRR");
        } 
```

我想骆驼或弹簧在处理之前关闭了我的输入流。那么我能做些什么来防止这种行为，如果我想手动关闭流。

这是我的路线：

```
 <routeContext id="transactionsRoutes" xmlns="http://camel.apache.org/schema/spring">

        <route id="routeFTP">
            <from uri="direct:start" />
            <from uri="ftps://{{ftps.host}}:2190/"/>
            <to uri="file://target/test-reports1234/"/>
            <doTry>
                <bean ref="transactionsProcessor"/>
                <doCatch>
                    <exception>java.lang.Exception</exception>
                    <bean ref="exceptionProcessor"/>
                </doCatch>
                <doFinally>
                    <bean ref="responsePublisher"/>
                </doFinally>
            </doTry>
        </route>
    </routeContext>

    <camelContext id="com.nxsystems.camel" xmlns="http://camel.apache.org/schema/spring" trace="true">
         <routeContextRef ref="transactionsRoutes"/>
    </camelContext> 
```

# javascript - 网址未在 iframe 中打开

> ID：10942497
> 
> 赞同：0
> 
> 时间：2012-06-08T02:48:18.227
> 
> 标签：javascript, jquery, jquery-ui, iframe

每当调用 createRemoteSampleWindow() 时，我都会调用以下 javascript 函数来打开/创建 iframe。问题是我在标题中的 DB 之后编写的菜单，onChange 在新窗口中打开链接，而不是在同一个 iframe 本身中打开。

```
function changeSpecies(selector){
var selected = document.getElementsByName(selector)[0].value;
var new_url = window.location.toString().replace(selected);
window.location.href = new_url;
}

function createRemoteSampleWindow() { // create a iframe window
var sampleWnd = $.window({
    url: "http://www.google.com",       
    title: 'DB <select id="click" OnChange="window.open(this.options[this.selectedIndex].value')" name="selector" target="sampleWnd"> <option value="http://www.goal.com" selected="">human</option> <option value="http://www.mirror.co.uk">mouse</option> <option value="http://www.espnstar.com">rat</option> </select>',
}); 
```

我已经提到了 target="sampleWnd"，但这似乎不起作用。

请告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:16:40.357

你有一个`'`后值，它不应该是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:22:06.240

语法无法承受；Google 主动阻止浏览器在 IFrame 中打开它。这是为了安全（并阻止人们劫持谷歌的内容！）

这个链接有一些信息，但基本上它是一个巨大的痛苦，谷歌不希望你这样做，所以你可能会冒着被阻止你的帐户的风险。

[http://www.codingforums.com/showthread.php?t=242978](http://www.codingforums.com/showthread.php?t=242978)

# bash - 为什么在使用 bash set 构造通配符时会返回大小写混合的文件名？

> ID：10942498
> 
> 赞同：3
> 
> 时间：2012-06-08T02:48:25.270
> 
> 标签：bash

我设置了一些文件来理解bash的set构造通配符，即[]。

```
ls *
1  2  A  bob  darlene  dave  ed  frank  fred  LS_example.sh  Z 
```

我希望返回的文件`ls [a-z]*`将只包括以小写字母开头的文件，但在下面，也会返回以大写字母开头的文件：

```
ls [a-z]*
A  bob  darlene  dave  ed  frank  fred  LS_example.sh 
```

你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:18:54.980

在您的语言环境（以及它在您的操作系统中定义的方式）中，`[a-z]`包括大写和小写字母。如果您想可靠地匹配小写字母，请执行以下操作：

```
ls [[:lower:]]* 
```

# git - 在 git checkout 中间意外停止命令如何恢复

> ID：10942500
> 
> 赞同：1
> 
> 时间：2012-06-08T02:48:52.240
> 
> 标签：git

我运行了 git checkout 并在中间停止了该过程。现在我无法切换分支，因为它抱怨我将覆盖本地文件。我该如何解决这个问题？例如

git checkout egotailer 错误：您对以下文件的本地更改将被结帐覆盖：...

我试过了

git clean -d -x -f

但这没有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:54:16.473

好吧，如果您知道您的存储库都是最新的并且您没有任何需要签入的未完成的内容，只需将您的分支重置回 HEAD。

```
git reset --hard HEAD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:27:41.100

```
git reset --hard 
```

应该这样做。`HEAD`当您不指定引用时，是隐含的。

**警告这是在 Git 中丢失工作的最常见方式！**

清理目录的更安全方法是

```
git stash -u 
```

或者

```
git stash --include-untracked 
```

这将`git reset --hard`起到作用，但您不会意外丢失信息。它仅在 1.7.7 版本中可用。在此之前你必须

```
git add -A && git stash 
```

为了同样的效果。

稍后，如果您意识到自己遗漏了重要的工作，您可以从藏匿处取回它。

# cakephp - CakePHP：通过控制台发送带有附件的电子邮件

> ID：10942518
> 
> 赞同：0
> 
> 时间：2012-06-08T02:51:28.870
> 
> 标签：cakephp, console, email-attachments

我正在尝试通过控制台/cron 发送带有 CakePHP 1.3 电子邮件组件的电子邮件。电子邮件被发送和接收，但没有附件。

通过表单完成后，电子邮件将与附件一起成功发送。我尝试添加
**$this->Email->filePaths**，
（来自[如何在 CakePHP 2.0 中发送带有附件的电子邮件？](https://stackoverflow.com/questions/10045719/how-do-i-send-an-email-with-an-attachment-in-cakephp-2-0)）
但附件仍未发送。

我的代码如下：

```
$email =& new EmailComponent();
$email->reset();
$email->initialize($controller);        
$email->delivery = $emailConfigurations['delivery'];        
$email->from = $emailConfigurations['from'];
$email->replyTo = $emailConfigurations['replyTo'];
$email->return = $emailConfigurations['return'];
$email->template = 'default';
$email->sendAs = $emailConfigurations['sendAs'];

if (strcasecmp($email->delivery, 'smtp') == 0) {
    $email->smtpOptions = array(
        'timeout' => $emailConfigurations['smtpTimeout'],
        'port' => $emailConfigurations['smtpPort'],
        'host' => $emailConfigurations['smtpHost'],
        'username' => $emailConfigurations['smtpUsername'],
        'password' => $emailConfigurations['smtpPassword']
    );
}

$email->to = $newEmail['mail_to'];
$email->subject = $newEmail['message_title'];

if ($newEmail['attachment_name'] && $newEmail['attachment_tmp']) {
    $attachedFilePath = WWW_ROOT . 'files' . DS .  'email_attachments' . DS ;
    $attachedFile = $newEmail['attachment_tmp'];

    $this->Email->filePaths  = array($attachedFilePath); 
    $this->Email->attachments = array($attachedFile);
}

if($email->send($newEmail['message'])){
    $this->out(date('Y-m-d H:i:s')." Email sent : ".$newEmail['id']);
} else {
    $this->out(date('Y-m-d H:i:s')." Email not sent : ".$newEmail['id']);
} 
```

所以，基本上我的问题是，当我通过控制台/cron 运行 shell 脚本时，如何获取带有附件的电子邮件。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:07:54.250

从路径列表中删除尾随`DS`，因为 Cake 不会修剪它：

```
$attachedFilePath = WWW_ROOT . 'files' . DS .  'email_attachments'; 
```

# python - 如何在未捕获的异常中打印绝对行号？

> ID：10942520
> 
> 赞同：0
> 
> 时间：2012-06-08T02:51:50.023
> 
> 标签：python, debugging, exception

当发生错误时，Python 会打印如下内容：

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
  File "<stdin>", line 8, in m
  File "<stdin>", line 5, in exec_st
  File "<stdin>", line 9, in exec_assign
  File "<stdin>", line 48, in ref_by_id
IndexError: list index out of range 
```

其中 2, ... , 48 是相对行号，不太方便。如何在此类错误消息中打印绝对行号？

编辑：也许这是一个愚蠢的问题，但答案会稍微促进发展。我在几个文件中打印文本。完成后，按下运行 python 并将当前文件内容复制到控制台的快捷方式。建议的解决方案强制按下多余的按键（Ctrl+S、Alt+Tab）并创建其他文件。我希望我已经说清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:16:57.657

几分钟的修改让我在 Python 2.7 中得到了这个 Read-Eval-Print Loop：

```
#!/usr/bin/env python
import code
import sys

LINE_NUMBER=0

def reset_linenum():
    global LINE_NUMBER
    LINE_NUMBER=-1

def resettable_REPL():
    global LINE_NUMBER
    BUFFERED_LINES=[]
    ii=code.InteractiveInterpreter({"reset_linenum":reset_linenum})
    while True:
        try:
            BUFFERED_LINES.append(raw_input("!"+sys.ps1)+'\n')
            while (BUFFERED_LINES[-1][:1] in " \t" or
                   ii.runsource("\n"*LINE_NUMBER+"".join(BUFFERED_LINES), "console")):
                BUFFERED_LINES.append(raw_input("!"+sys.ps2)+'\n')
            LINE_NUMBER+=len(BUFFERED_LINES)
            BUFFERED_LINES=[]
        except EOFError:
            break

if __name__=='__main__':
    resettable_REPL() 
```

这有点骇人听闻，但它会在会话继续时跟踪行号，并允许通过调用来重置当前计数`reset_linenum()`。一个示例会话：

```
!!!> print "hello"              # line 1
hello
!!!> def badfunc():             # line 2
!...     raise Exception("doh") # line 3
!!!> badfunc()                  # line 4
Traceback (most recent call last):
  File "console", line 4, in <module>
  File "console", line 3, in badfunc
Exception: doh
!!!> ?                          # line 5
  File "console", line 5
    ?
    ^
SyntaxError: invalid syntax
!!!> reset_linenum()            # RESET
!!!> raise Exception("!")       # line 1
Traceback (most recent call last):
  File "console", line 1, in <module>
Exception: !
!!!> 
```

**编辑**：修复了 REPL 不会过早地执行缩进块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:49:02.587

在 Linux 上这样做？与其让你的热键直接调用 python，不如让它调用这个 shell 脚本：

```
#!/bin/bash
cat > /tmp/$$.py
/usr/bin/env python /tmp/$$.py
rm -f $$.py 
```

您也可以尝试（甚至可以在 Windows 上工作）：

```
import sys
exec(compile("".join([line for line in sys.stdin]), "console", "single")) 
```

# c# - 在 Windows 上，我可以使用命名管道作为文件吗？

> ID：10942522
> 
> 赞同：5
> 
> 时间：2012-06-08T02:52:17.533
> 
> 标签：c#, io, ipc, named-pipes

我用我的 .NET 应用程序创建了一个命名管道服务器，它的名字是“TSPipe”。然后我打开记事本并尝试将文件保存到“\.\pipe\TSPipe”。然后我希望能够阅读记事本写入该管道的内容。

我仍在研究处理 NamedPipeServerStream 的线程的一般逻辑，但这是我的命名管道服务器代码：

```
 public void PipeThread() {
        var sid = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
        var rule = new PipeAccessRule(sid, PipeAccessRights.ReadWrite, AccessControlType.Allow);
        var sec = new PipeSecurity();

        sec.AddAccessRule(rule);

        while (continuePipeThread) {
            pipeStream = new NamedPipeServerStream("TSPipe", PipeDirection.In, 100, PipeTransmissionMode.Byte, PipeOptions.None, 0, 0, sec);

            Program.Output.PrintLine("Waiting for connection...");

            pipeStream.WaitForConnection();

            Program.Output.PrintLine("Connected, reading...");

            byte[] data = new byte[1024];
            int lenRead = 0;
            lenRead = pipeStream.Read(data, 0, data.Length);
            string line = System.Text.Encoding.ASCII.GetString(data, 0, lenRead);

            Program.Output.PrintLine(line);

            pipeStream.Close();
            pipeStream.Dispose();
        }
    } 
```

提前感谢您的帮助，但如果有任何建议有帮助，我会告诉您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T04:53:36.727

您不能从记事本写入命名管道。使用您的代码，当我尝试写入`\\\\.\pipe\TSPipe`记事本时，会自动将其更正为 UNC 路径`\\\\pipe\TSPipe`。我尝试了其他几个应用程序，但它们也不起作用。他们似乎运行了一些逻辑，而不仅仅是将输入的名称传递给`CreateFile`.

但是运行类似的东西`echo Hello, Word! > \\\\.\pipe\TSPipe`会将文本发送`Hello, World!`到您的管道服务器。

所以我猜想“在 Windows 上，我可以使用命名管道作为文件吗？”这个问题的答案。有时是。

# javascript - 在 iframe 中捕获所有 keyup/keydown 事件？

> ID：10942523
> 
> 赞同：8
> 
> 时间：2012-06-08T02:52:25.167
> 
> 标签：javascript, canvas, dom-events, keyboard-events

我正在开发一个基于画布的游戏，并且正在用于在全球范围内`window.addEventListener()`附加`keyup`和`keydown`事件。这在正常查看页面时有效，但在将其嵌入为 iframe 时；它没有得到 keyup 和 keydown 事件。有没有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:27:47.017

你不能，除非框架有焦点。

您可以做的是在外部窗口上进行按键聚焦 iframe，或者始终以某种方式聚焦 iframe，或者默认聚焦 iframe（可能足够好，不确定您在做什么）

但是要让窗口 keydown 在任何窗口（框架与否）上触发，该框架需要焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:56:20.540

看来您可以改为`var realWindow = window.parent || window;`使用 addEventListener 。`realWindow`

# jasper-reports - JasperReport 可以在特定页码中插入一些指定的图像/内容吗？

> ID：10942525
> 
> 赞同：1
> 
> 时间：2012-06-08T02:52:28.517
> 
> 标签：jasper-reports, pdf-generation

假设我想在第 2 页打印图像。

如果第 1 页内容很多，第 1 页内容将拆分为第 1 页和第 3 页，

而第 2 页仍然是该图像。

可以在pdf生成中完成吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:09:27.573

是的，您可以使用***图像***元素的***printWhenExpression***属性。

 *工作示例 - 我添加条件以仅在第二页上显示图像。*我在iReport*中的报表设计是： ![iReport 中的报表设计](../Images/443471796d2ace7548b47bdb8bd6f9c9.png)

jrxml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="image_expression" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <queryString>
        <![CDATA[select id from address]]>
    </queryString>
    <field name="ID" class="java.lang.Integer"/>
    <title>
        <band height="47" splitType="Stretch">
            <image scaleImage="RetainShape">
                <reportElement x="247" y="0" width="32" height="33"/>
                <imageExpression><![CDATA["Number1.png"]]></imageExpression>
            </image>
            <staticText>
                <reportElement x="147" y="13" width="100" height="20"/>
                <textElement textAlignment="Center">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Title]]></text>
            </staticText>
        </band>
    </title>
    <detail>
        <band height="35" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="59" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <image scaleImage="RetainShape">
                <reportElement x="59" y="0" width="32" height="33">
                    <printWhenExpression><![CDATA[$V{PAGE_NUMBER}==2]]></printWhenExpression>
                </reportElement>
                <imageExpression><![CDATA["Number2.png"]]></imageExpression>
            </image>
        </band>
    </detail>
    <pageFooter>
        <band height="34">
            <image scaleImage="RetainShape">
                <reportElement x="523" y="1" width="32" height="33">
                    <printWhenExpression><![CDATA[$V{PAGE_NUMBER}==2]]></printWhenExpression>
                </reportElement>
                <imageExpression><![CDATA["Number3.png"]]></imageExpression>
            </image>
            <textField>
                <reportElement x="44" y="14" width="80" height="20"/>
                <textElement textAlignment="Right"/>
                <textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement x="124" y="14" width="40" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
</jasperReport> 
```

结果将是（通过*iReport*中的预览功能），报告的第一页将是： ![第一页](../Images/17aa5cf8dd1a4be0972f4cb59e481d10.png)

第二页：

![第二页](../Images/3fbd626e3b3458ea3c8b446a1ab54a64.png)

最后第三页：

![第三页](../Images/a97a0700dac95e48b3a8aaa186ee178b.png)

***更新：***

您可以在页面上添加用于计算行数的变量，并在***printWhenExpression***中使用此变量。

例如，如果我只想在第三行的第二页上显示图像，我的模板将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    ...
    <variable name="rowAtPage" class="java.lang.Integer" resetType="Page">
        <variableExpression><![CDATA[$V{rowAtPage} + 1]]></variableExpression>
        <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable>
    ...
    <detail>
        <band height="35" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="59" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <image scaleImage="RetainShape">
                <reportElement x="59" y="0" width="32" height="33">
                    <printWhenExpression><![CDATA[$V{PAGE_NUMBER} == 2 && $V{rowAtPage} == 3]]></printWhenExpression>
                </reportElement>
                <imageExpression><![CDATA["Number2.png"]]></imageExpression>
            </image>
        </band>
    </detail>
    ...
</jasperReport> 
```

结果将是：

![第二页，只显示一行的图片](../Images/18400a7726831d79a7d11e7d8da9dcf7.png)*

# xml - 更新根节点内的 xml

> ID：10942534
> 
> 赞同：0
> 
> 时间：2012-06-08T02:54:33.263
> 
> 标签：xml, actionscript-3

我似乎无法让我的 xml 在节点内生成。它每次都重复整个 xml 结构。用例是该文件将在数小时/数天内重复更新。此 xml 文件还连接到后端，因此保持这种格式至关重要。

目前xml最终看起来像这样：

```
<xmlcontainer>
  <details>
    <name>name</name>
    <phone>phone</phone>
    <email>email</email>
    <image>0</image>
    <image>1</image>
  </details>
</xmlcontainer><xmlcontainer>
  <details>
    <name>name2</name>
    <phone>phone2</phone>
    <email>email2</email>
    <image>3</image>
    <image>4</image>
  </details>
</xmlcontainer> 
```

什么时候应该是这样的。

```
<xmlcontainer>
  <details>
    <name>name</name>
    <phone>phone</phone>
    <email>email</email>
    <image>0</image>
    <image>1</image>
  </details>
  <details>
    <name>name2</name>
    <phone>phone2</phone>
    <email>email2</email>
    <image>3</image>
    <image>4</image>
  </details>
</xmlcontainer> 
```

下面是我的代码，跨越 2 帧。我错过了什么导致这种情况发生？我搞砸了 fs.open(fl2,FileMode.APPEND); 和 fs.open(fl2,FileMode.WRITE); 但它似乎没有什么大的区别。

谢谢

```
//frame 2
var xml_file = File.documentsDirectory.resolvePath('app/information.xml').nativePath;

    var xml_created = false;
    var xml_data = "";

    function load_xml(f_name){
      var target_url:URLRequest = new URLRequest(f_name);
      var target_load:URLLoader= new URLLoader();
      var xmlData : XML = new XML();
      target_load.load(target_url);
      target_load.addEventListener(Event.COMPLETE, target_complete);
      target_load.addEventListener(IOErrorEvent.IO_ERROR, target_error);

      function target_complete (evt:Event):void {
        xmlData = new XML(evt.target.data);
        xml_created = true;
        xml_data = String(xmlData.details);
        nextFrame();
        trace("OK - load XML")
      }

      function target_error(evt:IOErrorEvent):void {
        nextFrame();
        trace("ERROR - load xml - check xml file name");
      }

    }

    load_xml(xml_file);

//frame 5
function saveFiles_fun (){
  var xmlData:XML = new XML(<xmlcontainer>
  </xmlcontainer>
  );

  var details:XML = new XML(<details/>)
  //client.appendChild(<id/>);
  details.appendChild( new XML( "<name>qwe</name>" ));
  details.appendChild( new XML( "<phone>qwe</phone>" ));
  details.appendChild( new XML( "<email>qwe</email>" ));

  for (var fna:int = 0; fna<fileNameArray.length; fna++) {
    details.appendChild( new XML( "<image>" + fna + "</image>" ));
  }

  xmlData.appendChild(details);

  var fl1:File = File.applicationDirectory.resolvePath(xml_file);
  var fl2:File = new File( fl1.nativePath );

  var fs:FileStream = new FileStream();
  try{
    fs.open(fl2,FileMode.APPEND);
    fs.writeUTFBytes(xmlData);
    fs.close();
    doSomething();
  }catch(e:Error){}
}

function doSomething(){
 form.alert.text = alert4;
 var _tim5 = setTimeout(gotoAndPlay, 1000,1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:10:56.600

在我看来，您的问题与这条线有关。

```
fs.open(fl2,FileMode.APPEND); 
```

为什么不完全重新创建文件，然后将其覆盖现有文件？

```
FileMode.APPEND 
```

> 指定打开文件以进行追加。如果文件不存在，则创建该文件。如果文件存在，则不会覆盖现有数据，并且所有写入都从文件末尾开始。

你需要使用的是

> 文件模式.WRITE

你也不应该嵌套你的函数，如果你让它成为一种常见的做法，这会给你带来问题。

[更新]

```
// in the code you supplied find this line
xmlData.appendChild(details);

// and right above it add this line
xmlData.appendChild(xml_data);

// so the resulting code will look like this
xmlData.appendChild(xml_data); // xml_data is where the original document is stored
xmlData.appendChild(details);

// also include the change to 
fs.open(fl2,FileMode.WRITE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:31:43.077

从哪里调用您的“saveFiles_fun”方法？我猜你正在使用这个代码片段创建一个新的 XML 实例

var xmlData:XML = new XML();

然后您正在添加 childXML。

# asp.net-mvc - 模型和视图中的 MVC“一次写入”字段

> ID：10942538
> 
> 赞同：1
> 
> 时间：2012-06-08T02:54:37.317
> 
> 标签：asp.net-mvc, razor, data-annotations

我希望 DRY/重用尽可能多的编辑器代码（视图和模型）。我的一些字段只能在创建时设置，不能编辑。我应该查看任何预先存在的 MVC/DataAnnotation 功能吗？

例如，如果值为非空，则可能存在使 EditorFor 像 DisplayFor 一样操作的数据属性。

模型.cs

```
[Unchangeable]
string UserReferenceId { get; set; }

string Description { get; set; } 
```

编辑：为了阐明我的目标，我为我目前计划的方法添加了一个带有示例代码的答案。如果有更好的方法/预先存在的功能，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:10:21.327

两者都有`System.ComponentModel.ReadOnlyAttribute`（`System.ComponentModel.DataAnnotations.EditableAttribute`我认为`EditableAttribute`是.NET 4）。当为标有其中任何一个的属性创建模型元数据时，您可以看到`ModelMetadata.IsReadOnly`将正确设置。

然而，令人沮丧的是，内置的编辑器模板仍然会显示可编辑的字段，即使`ModelMetadata.IsReadOnly`是`true`.

但是，您可以为希望尊重此元数据属性的每种数据类型创建自己的共享编辑器模板，并专门处理它。

**~/Views/Shared/EditorTemplates/String.cshtml**

```
@model String
@if (ViewData.ModelMetadata.IsReadOnly)
{
  @Html.Hidden(string.Empty, Model)
}
@(ViewData.ModelMetadata.IsReadOnly ? Html.DisplayText(string.Empty) : Html.TextBox(string.Empty)) 
```

**查看模型**

```
[Editable(false)]
public string UserReferenceId { get; set; } 
```

您会注意到，如果模型的元数据指示 IsReadOnly，我会绘制一个隐藏字段。这样该属性的值就会在帖子中保持不变。

如果您根本不希望该字段显示，而是在帖子中保留，您可以使用`System.Web.Mvc.HiddenInputAttribute`. 在这种情况下，只绘制隐藏的。

```
[HiddenInput(DisplayValue=false)]
public string UserReferenceId { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:55:50.917

如果没有类似的东西预先存在，这就是我正在考虑实施的：

**EditableWhenNewModel.cs**

```
public class EditableWhenNewModel : IIsNew
{
    public bool IsNew { get { return recordId == 0; } }
    string UserReferenceId { get; set; }
    string Description { get; set; }
    public void Save(RepositoryItem record) {
        if (IsNew) { record.UserReferenceId = UserReferenceId; }
        record.Description = Description;
... etc. 
```

**查看.cshtml**

```
@model EditableWhenNewModel
@Html.EditorWhenNewFor(m => m.UserReferenceId)
@Html.EditorFor(m => m.Description) 
```

**EditorWhenNewFor.cs**

```
public static MvcHtmlString EditorWhenNewFor<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression
) where TModel : IIsNew {
    return htmlHelper.ViewData.Model.IsNew ?
        htmlHelper.EditorFor(expression) :
        htmlHelper.DisplayFor(expression);
} 
```

# objective-c - 在其他 UITabbar 上操作导航控制器堆栈

> ID：10942541
> 
> 赞同：0
> 
> 时间：2012-06-08T02:56:16.027
> 
> 标签：objective-c, ios, uinavigationcontroller, uitabbarcontroller

假设我有一个带有 2 个标签的标签栏控制器。

第一个选项卡中有一个导航控制器。

如何从第二个选项卡使第一个选项卡的导航控制器弹出到其第一个视图？

我试过了：

```
for (UIViewController *vc in self.tabBarController.viewControllers) {
    [vc.navigationController popToRootViewControllerAnimated:NO];
} 
```

没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:02:29.770

```
UINavigationController *navController = [self.tabBarController.viewControllers objectAtIndex:0];
[navController popToRootViewControllerAnimated:YES]; 
```

# foursquare - 从foursquare API获取营业时间

> ID：10942542
> 
> 赞同：2
> 
> 时间：2012-06-08T02:56:46.363
> 
> 标签：foursquare

我正在尝试通过foursquare API 获取场地的营业时间。似乎无法在文档中找到它。

有没有办法做到这一点？官方应用程序可以访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:24:24.853

调用带有小时的场所的[场所/VENUE_ID](https://developer.foursquare.com/docs/venues/venues)端点，然后在响应中查找“小时”节。它看起来像这样：

```
hours: {
  status: "Open today until 1:00 AM",
  isOpen: true,
  timeframes: [
    {
      days: "Mon,Tue,Wed,Sun",
      open: [
        {
          renderedTime: "11:00 AM–Midnight"
        }
      ],
      segments: [ ]
    },
    {
      days: "Thu–Sat",
      includesToday: true,
      open: [
        {
          renderedTime: "11:00 AM–1:00 AM"
        }
      ],
      segments: [ ]
    }
  ]
}, 
```

# c# - C# moon APNS：iOS 设备未收到通知

> ID：10942545
> 
> 赞同：2
> 
> 时间：2012-06-08T02:56:55.713
> 
> 标签：c#, ios, apple-push-notifications

我是iOS开发的新手。最近，我尝试使用 moon-APNS 向我的设备发送推送通知。我遵循*arashnorouzi.wordpress.com*中的每一步。当我运行我的程序并阅读日志时，通知已成功发送到 APNS 服务器，但我从未在我的设备上收到通知。什么可能是错的？我应该在我的设备或 iOS 应用程序上进行一些设置吗？我只在示例代码中更改了设备令牌、证书路径、密码。这是我的代码：

```
 var payload1 = new NotificationPayload("b8bf91fcc66016a7bf96154f3c65c6c479385df98094394c2514682152c29968", "Message", 1, "default");
        payload1.AddCustom("RegionID", "IDQ10150");

        var p = new List<NotificationPayload> {payload1};

        var push = new PushNotification(false, "D:\\certificate\\aps_development.p12","aswin123");
        var rejected = push.SendToApple(p);
        foreach (var item in rejected)
        {
            Console.WriteLine(item);
        }
        Console.ReadLine(); 
```

任何人都可以帮助我吗？我真的很感谢你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:01:19.053

检查您是否这样做：

在 appID 检查中启用您的应用程序的推送通知，您在运行应用程序时是否获得令牌

# javascript - QUnit 异步测试停止功能不起作用

> ID：10942551
> 
> 赞同：2
> 
> 时间：2012-06-08T02:58:38.317
> 
> 标签：javascript, jquery, iframe, load, qunit

我在使用 QUnit stop() 时遇到问题，基本上它似乎根本不起作用。这是我正在尝试做的事情的一个例子：http: [//jsfiddle.net/7hZMM/1/](http://jsfiddle.net/7hZMM/1/)

如果删除该行：

```
testIframe.remove(); 
```

它工作正常并运行测试并通过。

我假设调用 stop() 会停止测试执行（正如文档所说的那样），但情况似乎并非如此，因为在加载回调完成之前调用了 remove()。

我可以做些什么来确保在 iframe 从页面中删除之前运行测试？

我不想将 iframe 删除放在回调中，因为我有几个这样的实例，如果我必须让每个平等的人互相跑掉，就会导致回调地狱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T20:29:25.367

这在文档中并不清楚，但只是确保在调用`stop()`之前不会开始测试的拆卸。`start()`它不会以任何方式推迟调用`stop()`.

您的问题的正确答案是 jhorback 提供的；将拆卸放入拆解中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:05:20.930

您可以尝试将删除放在模块的拆卸中。这将等到调用 start() 方法并且文本执行完成。

```
QUnit.module("new test", {
    setup: function () {
        var testIframe = $('<iframe id="testiframe" src="/" />').appendTo("body");
        testIframe.load(function() {
            console.log('done loading iframe');
        });                              
    },

    teardown: function () {
       testIframe.remove();
    }
}); 
```

QUnit.stop 只告诉 QUnit 在检查结果之前等待这么多毫秒。此外，如果 iframe 没有有效的 src，则可能不会触发 iframe 加载事件。

# php - SugarCRM 报告模块未格式化

> ID：10942555
> 
> 赞同：1
> 
> 时间：2012-06-08T02:58:58.677
> 
> 标签：php, json, module, report, sugarcrm

我在用

SugarCRM Pro 6.4.4

php 5.3.0

阿帕奇 2.2.11

我的问题是单击报告模块会显示文本格式的响应（JSON 格式）。单击创建报告时也会做出相同的响应。我期待报告向导，我可以在其中选择我的报告是在行和列、汇总还是更多。

以下是 Sugar 发送的部分回复。

> ACLAllowedModules = ["Leads","Cases","Bugs","Prospects","Project","ProjectTask","Campaigns","CampaignLog","Releases","Contacts","Accounts","Opportunities" ,"Notes","Calls","Emails","Meetings","Tasks","Users","Currencies","Trackers","TrackerSessions","TrackerPerfs","TrackerQueries","Documents"," DocumentRevisions","EmailAddresses","Teams","Quotes","Products","ProductTypes","ProductCategories","Forecasts","Contracts","KBDocuments"]; var module_defs = new Object(); default_summary_columns = ['count'];

我在 sugarcrm pro 6.1.6 中测试了报告模块，但结果还可以。

更新：我已经解决了这个问题。事实证明，sugar 调用了一个无效的类名。更正了类名，它现在正在工作。顺便说一句，糖调用的类名是自定义/覆盖的类名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T14:59:35.550

由于自定义模块中的 vardefs.php 自定义字段定义错误，我发生了此错误。在我的具体实例中，我试图使用以下代码从自定义值列表中提取自定义字段。

错误的 vardefs 代码：

`'customField' => array( ... 'type' => 'enum', 'function' => array( 'name' => 'getCustomListOfValues', 'params' => array('foobar') ) ... ),`

我的问题通过分解函数参数得到解决：

`'customField' => array( ... 'type' => 'enum', 'function' => 'getCustomListOfValues', 'function_params' => array('foobar') ... ),`

# c# - 使用 Remoting 在 C# 中序列化表单

> ID：10942556
> 
> 赞同：0
> 
> 时间：2012-06-08T02:59:01.950
> 
> 标签：c#, .net, winforms, remoting

好吧，首先，我已经在互联网上看了两个多小时，但我真的找不到任何有用的答案来解决我的问题。好吧，这很简单：我有一个客户端-服务器程序，我需要使用远程处理和表单列出服务器中的文件（我知道 WCF，但这不是重点）。好吧，我的所有列表目录/文件夹都可以正常工作（在我自己的 PC 上测试没有远程处理），但是当我尝试“远程处理”这个时，我很难过。

首先：我使用http作为通道，注册和激活都可以。至少我猜，因为我正在使用：

```
RemotingServices.Marshal(Server,"ListaArquivos") 
```

在服务器和

```
server = (Server)Activator.GetObject(typeof(ServerDLL.Server), "http://localhost:12345/ListaArquivos") 
```

在客户端中，Server 是 .dll (MarshalByRefObject)。

我的步骤是：

1.  我有一个 .dll 类（继承 MarshalByRefObject），它包含我在客户端到服务器步骤中调用的所有方法。其中 1 个方法返回 TreeNodeCollection 和...
2.  在客户端表单中，我调用此方法并尝试将此集合插入表单中，但那是我得到“Windows.Form.TreeNodeCollection”blabla“不可序列化”的时候。

这是我的疑问，我怎样才能使这项工作？PS->我的项目链接：[我的资源管理器](http://www.4shared.com/zip/2fnMrSEU/My_Explorer.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:07:14.337

您可能想看看这个项目： http: [//www.codeproject.com/Articles/24508/How-to-Serialize-a-TreeNode-Object](http://www.codeproject.com/Articles/24508/How-to-Serialize-a-TreeNode-Object)

`[Serializable]`基本上，您可以为任何类制作一个包装器，并通过添加属性使其可序列化

```
[Serializable]
public class MyClass : InheritedClass
{//Your code} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:19:46.613

如果你想要的只是一个档案列表，你应该只发送文件列表，很可能是一个字符串数组。您`TreeNodeCollection`应该*从*该列表在客户端构建。

如果您需要发送比简单字符串数组更多的信息（即您需要树结构），请定义一个简单的数据类型来发送信息：

```
[Serializable]
class Node
{
    public string Name;
    public Node[] Children;
} 
```

# algorithm - 空圆查询算法

> ID：10942557
> 
> 赞同：1
> 
> 时间：2012-06-08T02:59:07.397
> 
> 标签：algorithm, geometry, voronoi

我正在尝试提出一种算法来执行以下操作：

*如果给定一组点，则为查询点找到不包含该组任何点的最大圆（以查询点为中心）。*

到目前为止，我一直在考虑使用 Voronoi 图来查找包含最接近集合中某个站点点的点的区域（单元格），然后使用 Voronoi 中的边列表来构造梯形分解。从分解中我将能够找到查询点位于哪个单元格，然后圆的半径将是查询点到该单元格的点（站点）的距离。我认为创建这样的东西所需的存储是线性的，因为 Voronoi 需要 O(n) 存储，并且从 Voronoi 创建梯形分解也可以使用 O(n) 存储来完成。

***编辑：查询时间必须是 O(logn)，这意味着我不能一次遍历集合中的所有点。**

这听起来对吗，还是我在这里遗漏了什么？

另外，如果有人有一些关于这个算法的参考资料，请告诉我。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:29:14.437

这个问题似乎是在询问从查询点到集合中最近点的距离，所以回答它的一种方法是找到最近的点。一种合理的标准方法是使用[http://en.wikipedia.org/wiki/K-d_tree](http://en.wikipedia.org/wiki/K-d_tree)，这个问题一般在[http://en.wikipedia.org/wiki/Nearest_neighbour_search](http://en.wikipedia.org/wiki/Nearest_neighbour_search)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:05:06.817

这听起来过于复杂。我什至不知道沃罗尼图是什么，但假设你的点都在一个二维平面上（这似乎是因为你提到了一个圆而不是一个球体），这是非常微不足道的：

遍历所有点，找到离查询点最近的点。这个距离就是勾股定理`sqrt((point_x - query_x)^2 + (point_y - query_y)^2)`。最小的距离是圆的半径。

# c# - C++ CLI 句柄类型

> ID：10942559
> 
> 赞同：2
> 
> 时间：2012-06-08T03:00:00.453
> 
> 标签：c#, c++, .net, c++-cli

`non-handle`在以下代码中获取类型的适当方法是什么：

```
template <typename Type> ref class SuperClass
{
public:
    void Method()
    {
        Type x = gcnew ???? (...);
        // I want it to be instantiated into 'String^ x = gcnew String(...).
        // Is there a way to "dereference" the handle type in C++ \ CLI ?
    }
};

SuperClass<String^> superClass;
superClass.Method(); // <---- Won't compile 
```

此外，句柄类型作为模板参数的使用**是强制性**的（这是更大示例的一部分，我不能简单地将模板类型更改为`String`而不是`String^`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:15:45.607

gcnew 总是返回一个句柄 (^)。
所以这里有一些你可以尝试的。不确定它是否真的满足您的需求-

~~模板参考类 SuperClass { public: void Method() { Type^ x = gcnew Type("Hello"); } };~~

 ~~```
SuperClass<String> superClass;
superClass.Method(); 
```~~  ~~```
template <typename Type> ref class SuperClass
{
public:
    void Method()
    {
    Type x = "Hello";
    }
};

SuperClass<String^> superClass;
superClass.Method(); 
```~~

# php - 你怎么知道要在闭包中放入哪些参数/参数？

> ID：10942560
> 
> 赞同：4
> 
> 时间：2012-06-08T03:00:00.860
> 
> 标签：php, function, closures

闭包什么时候有参数（或者带参数的闭包如何工作）？我知道这`use()`是用来在匿名函数之外*导入*变量的，但是闭包本身的参数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:12:38.397

带参数的闭包的一个例子是柯里化：

```
function greeter($greeting)
{
  return function($whom) use ($greeting) {
    // greeting is the closed over variable
    return "$greeting $whom";
  };
}

$hello_greeter = greeter('hello');

echo $hello_greeter('world'); // will print 'hello world'; 
```

该`greeter`函数将返回一个“半实现”的函数，该函数总是以相同的问候开始，然后是传递给它的任何内容（例如要问候的人）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T03:03:25.743

如果您使用的函数接受匿名函数作为参数，请检查函数的文档。

如果函数是由您编写的，那么您就是控制器，由您决定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T03:22:03.967

文档中详细介绍了传递给应该具有参数的 PHP 函数的闭包。一个很好的例子是[`array_walk()`](http://php.net/manual/en/function.array-walk.php)，它用于将回调应用到可迭代对象：

```
$arr = array('a', 'b', 'c');
array_walk($arr, function($key, $val) {
    echo $key . ' => ' . $val . "\n";
}); 
```

在文档中，您应该在传递给的可调用对象中包含的`array_walk()`参数在“参数”下进行了详细说明。它说：

> 通常，funcname 有两个参数。数组参数的值是第一个，键/索引是第二个。

通常，您会在 PHP 文档中找到有关其他函数的类似提示。令我失望的是文档`array_map()`没有那么详细，但我记得还有其他函数除外具有足够闭包参数文档的可调用函数。

* * *

如果您希望编写自己的函数来接受闭包（或您可以调用的其他值）并指定它必须具有的参数，您可以使用`callback`PHP 5.3 或`callable`PHP 5.4 中的类型提示。

```
function gobblesUpCallable(callable $func) {
    call_user_func($func); // Use this, someone could pass in a callable string or array
} 
```

但是，要指定参数，您需要使用`ReflectionClass`or`ReflectionFunction`这意味着您可能会放弃`call_user_func()`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T03:23:30.650

`use()`对于需要函数作为参数的函数特别有用。可能要求传递的函数只接受两个参数，并且简单地忽略任何额外的参数。在这种情况下，使用`use()`将变量从当前范围“导入”到匿名函数。

```
$myvar = 10;
$fun = function(&$val, $index) use ($myvar) {$val += $myvar;};
$testArray = array(1,2,3);
array_walk($testArray, $fun);
var_dump($testArray); // 11, 12, 13 
```

注意：如果您的 anon 函数签名是相反的，那么在使用 anon 函数时`function(&$val, $index, $myvar)`您会得到常量，因为额外的第三个参数未使用且未定义。因此，请改用传递该额外参数。`warnings``array_walk``use()`

编辑：您也可以通过引用传递变量`use()`...

```
$myvar = 10;
$fun = function(&$val, $index) use (&$myvar) {$myvar = 1; $val += $myvar;};
$testArray = array(1,2,3);
array_walk($testArray, $fun);
var_dump($testArray); // 2, 3, 4
echo $myvar; // 1 
```

# mysql - SELECT 时的 MySQL CASE

> ID：10942562
> 
> 赞同：3
> 
> 时间：2012-06-08T03:00:21.450
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT CASE WHEN `def_spell`.`type` = 0 THEN `spells_damage`.* 
            WHEN `def_spell`.`type` = 1 THEN `spells_weaken`.*
       END 
FROM `def_spell` 
LEFT JOIN `spells_damage` ON `def_spell`.`id` = `spells_damage`.`spell_id` 
LEFT JOIN `spells_weaken` ON `def_spell`.`id` = `spells_weaken`.`spell_id` 
WHERE `def_spell`.`id` = 1; 
```

希望这是有道理的......我基本上是在尝试从提供中选择所有内容`spells_damage`为`type`0，从`spells_weaken`提供中选择所有内容`type`为 1。

我也想选择一切`def_spell`。

有人可以解决查询吗？我以前从未使用过这样的案例，也不知道如何使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T03:16:42.963

您不能使用 CASE 在这样的两个表的输出之间进行选择。

不幸的是，这很容易。解决（a）你正在尝试做的事情和（b）获得相同的结果将需要更长的时间。

如果您向我们提供有关 Spells_Weaken 和 Spells_Damage 表中的列的信息会更容易。据推测，存在一些差异；否则，您将只有一张桌子。事实上，单个 Spells 表可能仍然是更好的设计。

让我们把怀疑放在一边。假设 Spells_Weaken 和 Spells_Damage 表是 UNION 兼容的，您可以使用 UNION 来实现结果：

```
SELECT s.*, d.*
  FROM def_spell AS s
  LEFT JOIN spells_damage AS d ON s.id = d.spell_id
 WHERE s.type = 0
   AND s.id = 1
UNION
SELECT s.*, w.*
  FROM def_spell AS s
  LEFT JOIN spells_weaken AS w ON s.id = w.spell_id 
 WHERE s.type = 1
   AND s.id = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T03:13:05.280

你将无法做到这一点。您需要将其拆分为两个查询，或者使用`CASE`语句手动指定每个列。

```
SELECT CASE WHEN a.`type` = 0 THEN b.col1 
            WHEN a.`type` = 1 THEN c.col1
       END  AS col1
       , CASE WHEN a.`type` = 0 THEN b.col2
            WHEN a.`type` = 1 THEN c.col2
       END  AS col2
FROM `def_spell`  a
LEFT JOIN `spells_damage` b ON a.`id` = b.`spell_id` 
LEFT JOIN `spells_weaken` c ON a.`id` = c.`spell_id` 
WHERE a.`id` = 1; 
```

# objective-c - 在 Objective-c 中释放返回的对象错误

> ID：10942566
> 
> 赞同：1
> 
> 时间：2012-06-08T03:00:57.770
> 
> 标签：objective-c, ios, xcode, memory-management

我有这段代码，其中我分配了一个 NSMutableIndexSet 并返回该集合内的对象以用于其他方法。这是代码：

> NSMutableIndexSet *indexes = [NSMutableIndexSet new];

```
for (NSNumber * number in bookmarksArray)
{
    [indexes addIndex:[number intValue]];
}

return indexes; 
```

在研究如何释放返回的对象后，我将上面的代码编辑为：

> 返回[索引自动释放]；

但是，它给了我一个错误，说该消息已发送到已释放的实例。我该怎么办？有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:10:39.407

自动释放的实例在运行循环到达它们时被释放（或者当您手动耗尽自动释放池时）。这意味着接收`NSMutableIndexSet`从您的方法返回的实例的方法需要在将控制权交给运行循环之前保留它。否则，实例将被释放，呈现您可能无效的任何引用。

有一个调用`[NSMutableIndexSet new]`然后自动释放实例的快捷方式：您可以`indexSet`像这样调用类方法：

```
NSMutableIndexSet *indexes = [NSMutableIndexSet indexSet];
// Populate the indexes...
return indexes; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:59:54.143

如果您将其设置为 ivar 左右，问题可能就像您从此方法获得的实例不会保留。

```
return [indexes autorelease]; //this is ok. 
```

但是在其他方法中，您调用此方法来获取索引，如果您希望返回的实例索引保留在该方法之外，您应该保留它。因为你得到的实例是自动释放的，它通常会从方法中释放出来。（下一个运行循环在这里）

```
NSMutableIndexSet *iVarIndexes;

- (void)otherMethod
{
    iVarIndexes = [[self getBookmarkIndexes] retain]; //for later use
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T03:09:33.430

如果您使用的是自动引用计数 (ARC)，那么您应该使用：

```
- (NSMutableIndexSet *)bookmarkIndexes
{
    NSMutableIndexSet *indexes = [[NSMutableIndexSet alloc] init];
    for (NSNumber *number in bookmarksArray)
    {
        [indexes addIndex:[number intValue]];
    }

    return indexes;
} 
```

如果您不使用 ARC，那么您确实需要自动释放：

```
- (NSMutableIndexSet *)bookmarkIndexes
{
    NSMutableIndexSet *indexes = [[[NSMutableIndexSet alloc] init] autorelease];
    for (NSNumber *number in bookmarksArray)
    {
        [indexes addIndex:[number intValue]];
    }

    return indexes;
} 
```

# ruby-on-rails - Rails 3 + Ajax：如何访问我的本地表单构建器实例

> ID：10942576
> 
> 赞同：11
> 
> 时间：2012-06-08T03:02:36.880
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, partial-views, simple-form

我有一个显示一组输入的表单。我还有一个按钮，单击时，我发出一个 ajax 请求，该请求应该用一组不同的输入替换现有的输入。

我所有的ajaxy链接东西都很好。问题是我使用的是`form_for`，所以为了显示新的表单输入，我需要表单构建器实例。

### 查看文件

```
<%= simple_form_for @order do |f| %>
    <div id="info">
        <%= render 'my_first_form_fields_partial', f: f %>
    </div>
    <%= link_to 'Change inputs', change_inputs_path, remote: true %>
<% end %> 
```

我希望我的 js.erb 看起来像这样，但`f`仅在视图中的表单范围内定义。

```
$('#info').html("<%= escape_javascript(render 'my_second_fields_partial', f: f) %>"); 
```

我该如何工作才能`f`以某种方式进入那个部分？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T03:09:00.640

您可以在您的部分中使用 fields_for 并将 @object 传递给它吗？这样你就不需要通过表单构建器了？

部分的：

```
<%= fields_for object do |f| %>
  f.text_field :field_name
<% end %> 
```

```
$('#info').html("<%= escape_javascript(render 'my_second_fields_partial', object: @object) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-21T00:48:51.910

非常感谢@flyfish，他的回答帮助我解决了如何使用嵌套属性进行 ajax。我接受了@flynfish 的回答，并根据我的情况对其进行了调整：

```
<%= fields_for object do |f| %>
  <%= f.fields nested_object, child_index: Time.now.to_i do |builder| %>
<% end %> 
```

`$('#info').html("<%= escape_javascript(render 'my_second_fields_partial', object: @object), nested_object: @nested_object %>`

这`child_index`很重要，因为没有它，您的 params 哈希将使用 [0] 构建，然后将覆盖使用初始 fields_for 构建的任何其他记录，该初始 fields_for 从零开始并从那里递增。

# spring - groovy + Spring 按不同顺序添加列表会抛出 NotWritablePropertyException

> ID：10942577
> 
> 赞同：0
> 
> 时间：2012-06-08T03:02:37.847
> 
> 标签：spring, groovy

我正在尝试将 Groovy 与 Spring 集成。在一个 bean 中，我需要将列表作为属性放入但是只有当我在 bean 定义之前定义列表中的项目时才有效。

为了避免将来出现错误...我想问一下编译上下文并导致错误的机制是什么？

Item.groovy 是一个带有字段 String itemName 的简单 bean

我的配置就像

**不工作**

```
<lang:groovy id="handler" script-source="ItemHandlerImpl.groovy">
  <lang:property name="itemList">
    <list>
      <lang:groovy id="item1" script-source="Item.groovy">
        <lang:property name="itemName" value="name1" />
      </lang:groovy>
    </list>
  </lang:property>
</lang:groovy> 
```

这抛出

```
Caused by: org.springframework.beans.NotWritablePropertyException: Invalid property 'itemName' of bean class [org.springframework.scripting.groovy.GroovyScriptFactory]: Bean property 'itemName' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter?
            at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:1024)
                at org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:900)
                at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:76)
                at org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:58)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1358)
                ... 70 more 
```

经过多次尝试，这是我的**工作配置**

```
<lang:groovy id="item1" script-source="Item.groovy">
  <lang:property name="itemName" value="name1" />
</lang:groovy>

<lang:groovy id="handler" script-source="ItemHandlerImpl.groovy">
  <lang:property name="itemList">
    <list>
      <ref bean ="item1">
    </list>
  </lang:property>
</lang:groovy> 
```

# iphone - 在 xml (IOS) 中读取的编码字符串

> ID：10942581
> 
> 赞同：0
> 
> 时间：2012-06-08T03:04:01.013
> 
> 标签：iphone, objective-c, ios, ipad

我有一个音频播放器，我制作了一个 xml 文件，该文件下载到包含流媒体 url 的启动应用程序，所以如果您对流媒体服务器 ip 有任何更改，我无需更新应用程序就可以更改 xml，

xml 的路径：http: [//xxxx.com.br/data_streamer/data_streaming.php](http://xxxx.com.br/data_streamer/data_streaming.php)

xml被下载并正确读取路径，但没有初始化流似乎是字符串编码的东西，但不确定，事实是如果我手动输入地址（@“http://184.107\. 211.74:8090") 与 Parser 完全相同。

XML 解析器（我只展示了读取标签的部分）；

```
- (Void) parser: (NSXMLParser *) parser didStartElement: (NSString *) elementName
  namespaceURI: (NSString *) namespaceURI qualifiedName: (NSString *) qname
    attributes: (NSDictionary *) {attributeDict
    if (qname) {
        QName elementName =;
    }
    if (elementName) {
        current = [NSString stringWithString: elementName];
    }
    if ([elementName isEqualToString:@"url"]) {
    }
}

- (Void) parser: (NSXMLParser *) parser didEndElement: (NSString *) elementName
  namespaceURI: (NSString *) namespaceURI qualifiedName: (NSString *) {QName
if ([current isEqualToString:@"url"]) {
        [Outstring AppendFormat:@"%@",@"\n"];
    }

current = nil;
}

- (Void) parser: (NSXMLParser *) parser foundCharacters: (NSString *) string {
    if (! current)
        return;
if ([current isEqualToString: @"url"]) {
        [Outstring AppendFormat: @"%@", string];
    }
} 
```

现在调用我的流的代码：

```
- (Void) createStreamer {

    NSLog (@"%@", pathDataString)
    if (streamer)
{
return;
}

[DestroyStreamer self];

NSString * = escapedValue
    [(NSString *) CFURLCreateStringByAddingPercentEscapes (
                                                         nil,
                                                         (CFStringRef)pathDataString,
                                                         NULL,
                                                         NULL,
                                                         kCFStringEncodingUTF8)
     autorelease];

NSURL * url = [NSURL URLWithString: escapedValue];
streamer = [[AudioStreamer alloc] initWithURL: url];

} 
```

pathDataString 包含术后日 ip 服务器，其内容在调试中测试

我不知道发生了什么，有什么想法吗？

# c++ - 有没有办法保存 USB 设备，以便在重新插入后可以防止重新枚举？

> ID：10942584
> 
> 赞同：4
> 
> 时间：2012-06-08T03:04:59.390
> 
> 标签：c++, windows, usb

首先，我们正在使用将自身绑定到 USB 设备的第 3 方软件。当此 USB 设备断开并重新连接时，软件无法与设备通信~~将停止工作~~，直到程序重新启动。即它只在启动时检测USB 设备。

Windows 能够看到该设备，但每次重新连接时都会执行完整的检测/驱动程序安装过程，即使它重新连接到同一个 USB 端口也是如此。

这里的难点在于，我们无法修改第三方软件在设备拔出后轮询合适的 USB 设备。

因此，我们想问一下是否有人知道如何编写 C++ 程序来保存 USB 状态/寄存器，防止 Windows 在重新连接时重新枚举 USB 端口，以及恢复保存的状态/寄存器. 如果是这样，我们将不胜感激在这项工作中的一些指导。自然，我们对解决此问题的其他方法持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T07:21:26.540

您不能在应用程序级别执行此操作。USB 由驱动程序管理。此外，虽然 USB 设备的详细信息由特定驱动程序管理，但基本（如枚举）由标准 Windows USB 驱动程序处理。这是合乎逻辑的：Windows 必须首先枚举设备以确定其供应商 ID 和产品 ID，然后确定要加载的特定驱动程序。

至于每次重新插入时完全重新安装，这表明设备违反了 USB 规范或驱动程序违反了 Windows API。我的第一个猜测是该设备没有正确的序列号。

# xml - IF 语句是否允许 XSLT 中的 OR 条件？

> ID：10942585
> 
> 赞同：8
> 
> 时间：2012-06-08T03:05:01.247
> 
> 标签：xml, xslt

如何测试我的情况是否是这样；

```
<xsl:if test="node = '1' or node='2'">
<input name="list_{@id}" value="{@id}" type="checkbox"/>
</xsl:if> 
```

IF 语句是否允许 OR 条件？请指教..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T03:14:34.860

> IF 语句是否允许 OR 条件？

不，但是 XPath 有一个`or`运算符——请注意 XPath 是区分大小写的语言。

**提供的代码中的 XPath 表达式**：

```
node = '1' or node='2' 
```

**在语法上是正确的**。

**`or`是一个[标准的 XPath 运算符](http://www.w3.org/TR/xpath/#NT-Operator)，可用于组合两个子表达式**。

> [33] 运算符名 ::= '和' | '或' | '模组' | 'div'

这是一个完整的 XSLT 转换示例：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="num[ . = 3 or . = 5]"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生所需的正确结果（复制的所有元素除了`<num>03</num>`and `<num>05</num>`：**

```
<nums>
   <num>01</num>
   <num>02</num>
   <num>04</num>
   <num>06</num>
   <num>07</num>
   <num>08</num>
   <num>09</num>
   <num>10</num>
</nums> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T03:06:44.353

您可以使用或就像您在示例中所做的那样。[以下](http://www.w3schools.com/xpath/xpath_operators.asp)是 XSLT 中支持的运算符。

# android - 绘制不重叠的半透明形状

> ID：10942590
> 
> 赞同：0
> 
> 时间：2012-06-08T03:06:19.143
> 
> 标签：android, drawing

我正在画几个透明的圆圈。圆圈的数量和它们的位置不是固定的。目前，我正在一个对象中设置透明颜色，`Paint`并在一个 for 循环中用该对象绘制圆圈`Canvas`。但这会导致重叠。

我想到了一种方法： - 在主画布以外的地方将所有圆圈渲染为不透明。- 设置透明度。- 在画布上绘制最终对象。

我如何在android上实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:38:31.330

使用 ARGB888 创建一个新的位图，并在它的画布上绘制您所有的形状，不透明。然后使用之前调用 setAlpha 的 Paint 将新位图绘制到主画布中

# java - 注入@Model bean 的 EJB 会在每个请求时创建（GlassFish）

> ID：10942592
> 
> 赞同：1
> 
> 时间：2012-06-08T03:06:36.990
> 
> 标签：java, jsf, glassfish, ejb, cdi

我在网上找不到灵魂或任何参考。这是问题所在

我有一个非常简单的网络项目

*   索引.xhtml

 `````
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://java.sun.com/jsf/html"
          xmlns:f="http://java.sun.com/jsf/core">
        <h:head>
            <title>Index</title>
        </h:head>
        <h:body>
            <h:form>
                <h:panelGrid>
                    <h:outputText value="#{myBean.message}" />
                    <h:inputText value="#{myBean.name}" />
                    <h:commandButton action="#{myBean.sayHello()}"
                                     value="Say Hello">
                        <f:ajax execute="@form" render="@form" />
                    </h:commandButton>
                </h:panelGrid>
            </h:form>
        </h:body>
    </html>

````  `*   MyBean.java

 `````
    import javax.enterprise.inject.Model;
    import javax.inject.Inject;

    @Model
    public class MyBean
    {
        @Inject 
        private MyEJB myEjb;

        public MyBean()
        {
            System.out.println("Creating MyBean");
        }

        private String name;

        private String message;

        public void sayHello()
        {
            setMessage(myEjb.sayHello(getName()));
        }

        public String getMessage()
        {
            return message;
        }

        public void setMessage(String message)
        {
            this.message = message;
        }

        public String getName()
        {
            return name;
        }

        public void setName(String name)
        {
            this.name = name;
        }
    }

````  `*   MyEJB.java

 ````
    import javax.ejb.Stateless;

    @Stateless
    public class MyEJB
    {

        public MyEJB()
        {
            System.out.println("Creating MyEJB");
        }

        public String sayHello(String name)
        {
            return "Hello " + name;
        }

    }

````  `这工作正常，但 glassfish 日志显示了这一点

信息：创建 MyBean 信息：创建 MyBean 信息：创建 MyEJB 信息：创建 MyBean 信息：创建 MyEJB 信息：创建 MyEJB

在一个请求上。

这意味着 MyBean 在请求中被创建了 3 次，而 MyEJB 被创建了 3 次以上

如果这是正常行为，或者是 glassfish 上的错误，或者我在这里做错了什么，我会徘徊，因为如果在每个请求上创建和销毁这么多对象，seriuos 应用程序就会出现问题。

如果我换成这样更经典的 aproche

 `````
    import javax.ejb.EJB;
    import javax.faces.bean.ManagedBean;
    import javax.faces.bean.RequestScoped;

    @RequestScoped
    @ManagedBean
    public class MyBean
    {
        @EJB
        private MyEJB myEjb;

        public MyBean()
        {
            System.out.println("Creating MyBean");
        }

        private String name;

        private String message;

        public void sayHello()
        {
            setMessage(myEjb.sayHello(getName()));
        }

        public String getMessage()
        {
            return message;
        }

        public void setMessage(String message)
        {
            this.message = message;
        }

        public String getName()
        {
            return name;
        }

        public void setName(String name)
        {
            this.name = name;
        }
    }

````  `输出不一样

我创建了 1 个 ejb，然后请求的其余部分由该实例处理，并且 MyBean 为每个请求创建一次。

请帮助我，也许我错过了 cdi 规范。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:26:33.113

调试 EJB / CDI / JSF / ... 组件的构造函数是错误的朋友。

在现代框架中**，幕后发生了很多事情**——其中相当一部分使用 Java 反射——并且你不能依赖对构造函数的调用来表明你有一个新的、可以使用的组件。

您需要做的是使用适当的生命周期挂钩之一。这些被明确设计为在创建/销毁/去钝化/钝化组件之后/之前调用。

在您的情况下，请使用此处`@PostConstruct`的[文档](http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html)。```````

# java - 需要一些指导来参考从java中的扫描仪生成的字符串中的空格

> ID：10942597
> 
> 赞同：1
> 
> 时间：2012-06-08T03:07:42.713
> 
> 标签：java, string, console, java.util.scanner, spaces

由于正常句子结构中生成的空格，我的字符串描述使控制台崩溃。我正在寻找一些关于为什么会发生这种情况的指导，此外，如果我以错误的方式解决这个问题，我应该如何处理它。

```
import java.util.Scanner;

public class Main {

public static void main(String[] args) {
    System.out.println("-/- Job ticket  -/-");
    Scanner MyScanner = new Scanner (System.in);

    String FirstName;
    String LastName;
    String Phone;
    String Address;
    String Description;
    int ticketNumber;
    int orderMonth ;
    int orderDay;
    int orderYear;
    int requestedDay;
    int requestedMonth;
    int requestedYear;

    System.out.println("First Name = ?");
    FirstName = MyScanner.next();
    System.out.println("Last Name = ?");
    LastName = MyScanner.next();
    System.out.println("Phone = ?");
    Phone = MyScanner.next();
    System.out.println("Address = ?");
    Address = MyScanner.next();
    System.out.println("Description = ?");
    Description = MyScanner.next();
    System.out.println("Ticket = ?");
    ticketNumber = MyScanner.nextInt();
    System.out.println("Order Date Month = ?");
    orderMonth = MyScanner.nextInt();
    System.out.println("Order Date Day");
    orderDay = MyScanner.nextInt();
    System.out.println("Order Date Year");
    orderYear = MyScanner.nextInt();
    System.out.println("Requested Date Month");
    requestedMonth = MyScanner.nextInt();
    System.out.println("Requested Date Day");
    requestedDay = MyScanner.nextInt();
    System.out.println("Requested Date Year");
    requestedYear = MyScanner.nextInt();

    System.out.println("=====================================================");
    System.out.print("Ticket :   ");
    System.out.println(ticketNumber);
    System.out.print("Customer:   ");
    System.out.print(FirstName);
    System.out.print(" ");
    System.out.println(LastName);
    System.out.print("Home Phone: ");
    System.out.println(Phone);
    System.out.print("Order Date: ");
    System.out.print(orderMonth);
    System.out.print('/');
    System.out.print(orderDay);
    System.out.print('/');
    System.out.println(orderYear);
    System.out.print("Requested Date:   ");
    System.out.print(requestedMonth);
    System.out.print('/');
    System.out.print(requestedDay);
    System.out.print('/');
    System.out.println(requestedYear);
    System.out.println("-----------------------------------------------------");
    System.out.println("Address");
    System.out.println(Address);
    System.out.println("-----------------------------------------------------");
    System.out.println("Description");
    System.out.println(Description);
    System.out.println("=====================================================");
    System.out.println();
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:17:14.290

我在这里看到你的代码有问题。

当您使用 Scanner.next() 时，Scanner 会查找下一个空格 " " 并返回该空格之前的所有文本。

这是由于 Scanner 类中的定界符的概念，默认定界符是“空白或下一行”（您可能需要阅读定界符）。

分隔符如何为您工作？

例如：您的输入是“Hello World\r\n”

当您调用 Scanner.next() 时，Scanner 会找到空白，并返回之前的所有内容，因此它会返回“Hello”。当您再次调用 Scanner.next() 时，Scanner 将找到 \r\n （下一行）并返回之前的所有内容，因此它将返回“World”。

**扫描仪仅在读取完所有输入后才会提示新的用户输入。**

因此，对于您的代码，将会发生什么：

```
Address = MyScanner.next();
System.out.println("Description = ?");
Description = MyScanner.next();
System.out.println("Ticket = ?"); 
```

如果我的地址输入是“123 ABC Avenue”，地址只会得到输入“123”，而描述会自动从输入中提取值“ABC”，该输入还不是空的。

因此，您将观察到程序似乎“跳过”了描述用户提示。

如果要从 Scanner 中提取整个用户输入，则应使用 Scanner.nextLine() 方法，而不是 Scanner.next()

# c# - C#：抽象类中的抽象和非抽象方法？

> ID：10942599
> 
> 赞同：4
> 
> 时间：2012-06-08T03:08:19.453
> 
> 标签：c#, design-patterns

我不确定我正在编写的代码是否有意义。这是一般的想法：

我有一个 Parser 类，它将采用不同类型的文档。根据类型，我会以不同的方式解析文档。

所以假设我有两种类型的文档，A 和 B。工厂模式似乎是一个很好的方法，以防我需要扩展程序来处理其他类型，所以我将有一个抽象类。

```
abstract class Parser
{
   ...
   public void common_method() {
      // something common that all parsers will use
      // like file IO
   }

   // derived classes will override this
   public abstract void specific_method();
}

class A_Parser : Parser
{
   ...
}

class B_Parser : Parser
{
   ...
} 
```

我想知道的问题是我在抽象解析器中声明了抽象方法和非抽象方法。编译器似乎没有抱怨，它似乎仍然可以正常工作。

这是不标准的吗？也许有更好的方法来设计这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T03:10:58.407

这很好。如果您只有抽象方法，那么您本质上就会有一个接口。如有必要，您可能必须使用另一种模式来创建解析器的实际实例，但就类定义而言，这是非常标准的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T03:13:41.403

这很好，您甚至可以制作一些`virtual`非强制覆盖的方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T03:14:47.923

这是[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)的典型实现。您提供算法的一般模式，但细节在具体类中实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T10:32:33.673

抽象类中通常有非抽象方法。

**您还应该知道，由于您的 Parser 类是抽象的，因此可以访问 common_method 的唯一方法是通过 A_Parser 或 B_Parser 类的实例。**

# devise - 如何访问 Devise Omniauth omniauth fb appid？

> ID：10942600
> 
> 赞同：0
> 
> 时间：2012-06-08T03:08:22.323
> 
> 标签：devise, omniauth, ruby-on-rails-3.2

在我设置的初始化程序文件夹中的 devise.rb 文件中：

config.omniauth :facebook, 'APPID', 'APPSECRET',

如何在我的控制器中访问这些值？我需要为其他东西写出 appId，但似乎无法弄清楚这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T02:37:12.017

我觉得你想这样做很奇怪，因为你想保护你的身份和秘密......

但是一种方法是创建一个新文件，我们将其命名为 constants.rb 并放入您的初始化程序文件夹中。像这样：

```
APPID = "string"
APPSECRET = "string" 
```

然后你可以在你的设计文件中使用这些字符串，如下所示：

```
config.omniauth :facebook, APPID, APPSECRET 
```

您可以在控制器中以相同的方式使用这些常量。另外，不要忘记重新启动您的应用程序。

# hadoop - 在 hadoop 0.23.0 上运行示例时作业挂起

> ID：10942601
> 
> 赞同：1
> 
> 时间：2012-06-08T03:08:31.337
> 
> 标签：hadoop, mapreduce

我正在尝试在 hadoop 0.23.0 中添加容量调度程序并尝试运行示例 pi、randomwriter 程序。

所有的守护进程都已启动并且工作正常，但是作业被挂起并且没有更多的输出被显示。

我无法看到它们累积的日志。任何人都可以让我知道这个工作挂起的原因，以及存储日志的位置。

```
2012-06-08 18:41:06,118 INFO  mapred.YARNRunner (YARNRunner.java:createApplicationSubmissionContext(355)) - Command to launch container for ApplicationMaster is : $JAVA_HOME/bin/java -Dlog4j.configuration=container-log4j.properties -Dyarn.app.mapreduce.container.log.dir=<LOG_DIR> -Dyarn.app.mapreduce.container.log.filesize=0 -Dhadoop.root.logger=INFO,CLA -Xmx1536m org.apache.hadoop.mapreduce.v2.app.MRAppMaster 1><LOG_DIR>/stdout 2><LOG_DIR>/stderr 
2012-06-08 18:41:06,251 INFO  mapred.ResourceMgrDelegate (ResourceMgrDelegate.java:submitApplication(304)) - Submitted application application_1339151256291_0003 to ResourceManager
2012-06-08 18:41:06,355 INFO  mapreduce.Job (Job.java:monitorAndPrintJob(1207)) - Running job: job_1339151256291_0003
2012-06-08 18:41:07,366 INFO  mapreduce.Job (Job.java:monitorAndPrintJob(1227)) -  map 0% reduce 0% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:19:56.083

我按照[http://www.thecloudavenue.com/search?q=0.23](http://www.thecloudavenue.com/search?q=0.23)上的说明在一个小型 3 节点集群上成功运行了 Hadoop-0.23.4。

检查日志文件中的

> $HADOOP_HOME/日志

主从服务器上的任何错误的文件夹。

检查以下控制台

> //master:50070/dfshealth.jsp

检查DataNode的数量是否正确

> //master:50070/dfsnodelist.jsp?whatNodes=LIVE

检查 NodeManager 的数量是否正确报告

> //master:8088/集群

节点管理器的数量也应该在

> //master:8088/集群/节点

验证是否已通过 NameNode Web 控制台创建了具有正确内容的输出文件夹

> //master:50070/nn_browsedfscontent.jsp

# android - 在android中划屏以显示图像

> ID：10942605
> 
> 赞同：4
> 
> 时间：2012-06-08T03:09:03.790
> 
> 标签：android, bitmap, android-canvas

我正在为我的作业开发一个 android 项目。我正在尝试制作一个临时图像应用程序，你知道这就像我们在屏幕上划伤以摆脱阻挡层以显示图像。但问题是我不知道从哪里开始。

我搜索了与此相关的stackoverflow问题，但这无济于事。从我在那里的搜索中，我发现了这个项目正在使用的线索`Bitmap.getPixel(int x, int y)`。

所以，在我看来，我必须从位图中获取像素并将其绘制到画布上。但我不知道如何实现它？或者有人有更好的方法吗？

有人可以帮我吗？关于这类事情或相关主题的任何教程？

提前致谢！

* * *

这是我的示例代码：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    tw = w;
    th = h;
    eraseableBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(eraseableBitmap);
    Bitmap muteableBitmap = Bitmap.createBitmap(eraseableBitmap.getWidth(), eraseableBitmap.getHeight(), Bitmap.Config.ARGB_8888);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    static_x = event.getX();
    static_y = event.getY();

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        touch_start(static_x, static_y);

    } if (event.getAction() == MotionEvent.ACTION_MOVE) {
            touch_move(static_x, static_y);

    } if (event.getAction() == MotionEvent.ACTION_UP) {
            touch_up(); 
        }
    return true;
} 
```

* * *

这是我的项目的外观：

![布局](../Images/99450f8c8c385a09e30782f75574c2cb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T03:21:23.197

有趣的问题。我的理论计划：

您有 2 个位图，“可擦除”位图和“隐藏”位图。无法从现有位图中擦除像素，因为 Android 中的位图是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的。因此，与其从“可擦除”位图中擦除像素以显示下面的位图，不如先绘制“可擦除”位图。然后创建一个空的、[可变的 Bitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int,%20int,%20android.graphics.Bitmap.Config%29)。循环遍历“隐藏”位图中的所有像素，仅显示“可擦除”位图已被“擦除”的位置。

```
Bitmap mutableBitmap = Bitmap.create(erasableBitmap.getWidth(),erasableBitmap.getHeight(), Bitmap.Config.ARGB_8888);

for(Pixel erasedPixel : erasedList)
{
  mutableBitmap.setPixel(x,y, hiddenBitmap.getPixel(erasedPixel.x, erasedPixel.y));
}

...
// in a different file
class Pixel{
  int x, y;

} 
```

您必须自己填写已擦除列表。

完成后，像这样绘制到画布上：

```
canvas.drawBitmap(0,0,eraseableBitmap);
canvas.drawBitmap(0,0,mutableBitmap); 
```

确保首先绘制“可擦除”位图，以便用新像素绘制它。

如果您需要帮助确定如何设置擦除的像素，请在评论中告诉我，我会为您提供帮助。

编辑

要真正确定用户试图擦除哪些像素： 在您的视图中，捕获 onTouch 事件，您将获得用户触摸屏幕位置的坐标。~~将其保存到某种地图或哈希表中，您应该一切顺利。~~创建一个 Pixel 对象并将其添加到一个全局`List`像素中。

编辑 2

要增加“划痕”的大小，您必须做的有点复杂。您需要一些方法来创建一个围绕 x,y 点触摸的区域，也可以算作已擦除。圆形是理想的，但使用正方形会更容易。

```
for(Pixel erasedPixel: erasedList)
{
  //it's actually more complicated than this, since you need to check for boundary conditions.
  for(int i = -SQUARE_WIDTH/2; i < SQUARE_WIDTH/2; i++){
    for(int j = -SQUARE_WIDTH/2; j < SQUARE_WIDTH/2; j++){
      mutableBitmap.setPixel(erasedPixel.x+i, erasedPixel.y+j, hiddenBitmap.getPixel(erasedPixel.x+i, erasedPixel.y+j));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T16:45:50.253

我创建了一个名为 WScrarchView 的库，您可以在其中仅在布局 xml 中的几行代码中实现暂存视图。希望这可以帮助那些仍在寻找类似解决方案的人[https://github.com/winsontan520/Android-WScratchView](https://github.com/winsontan520/Android-WScratchView)

当然欢迎您复制代码并根据您的需要进行自定义:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T02:00:37.317

我认为最简单的解决方案是相互叠加的两层（通过 RelativeLayout 可以轻松实现）。底层将包含需要显示的任何内容。顶层是一个用不透明颜色填充的画布。当您检测到触摸事件时，开始跟踪手指并绘制完全透明的颜色以替换同一路径上的旧颜色。您可以在[此处找到有关如何用手指绘画的教程](http://goo.gl/tlr9h)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-08T04:20:50.507

您可以使用 samsung [S-Pen SDk](http://innovator.samsungmobile.com/cms/cnts/knowledge.detail.view.do?platformId=1&cntsId=11284&nacode=uk)免费刮擦图像，但它适用于**2.3 OS 版本**

# clojure - Clojure 多映射

> ID：10942607
> 
> 赞同：8
> 
> 时间：2012-06-08T03:09:28.057
> 
> 标签：clojure

非常简单+愚蠢的问题：

clojure 是否提供多地图？我目前有这样的事情：

```
(defn wrap [func]
  (fn [mp x]
    (let [k (func x)]
      (assoc mp k
             (match (get mp k)
               nil [x]
               v (cons v x))))))

(defn create-mm [func lst]
  (reduce (wrap func) {} lst)) 
```

最终创建了一个映射，对于每个键，我们都有一个包含该键的所有元素的向量。但是，看起来多图是一个非常基本的数据结构，我想知道clojure是否内置了它。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T04:16:38.377

我不认为这作为一种独特的类型真的很有必要，因为 Clojure 的灵活性允许您通过使用映射和集合来快速制作自己的类型。看这里：

[http://paste.lisp.org/display/89840](http://paste.lisp.org/display/89840)

## 编辑（我应该把它粘贴进去，因为它太小了）

示例代码（由 Stuart Sierra 提供）

```
(ns #^{:doc "A multimap is a map that permits multiple values for each
  key.  In Clojure we can represent a multimap as a map with sets as
  values."}
  multimap
  (:use [clojure.set :only (union)]))

(defn add
  "Adds key-value pairs the multimap."
  ([mm k v]
     (assoc mm k (conj (get mm k #{}) v)))
  ([mm k v & kvs]
     (apply add (add mm k v) kvs)))

(defn del
  "Removes key-value pairs from the multimap."
  ([mm k v]
     (let [mmv (disj (get mm k) v)]
       (if (seq mmv)
         (assoc mm k mmv)
         (dissoc mm k))))
  ([mm k v & kvs]
     (apply del (del mm k v) kvs)))

(defn mm-merge
  "Merges the multimaps, taking the union of values."
  [& mms]
  (apply (partial merge-with union) mms))

(comment
  (def mm (add {} :foo 1 :foo 2 :foo 3))
  ;; mm == {:foo #{1 2 3}}

  (mm-merge mm (add {} :foo 4 :bar 2))
  ;;=> {:bar #{2}, :foo #{1 2 3 4}}

  (del mm :foo 2)
  ;;=> {:foo #{1 3}}
) 
```

评论中指出的案例的额外测试：

```
(comment
  (-> {} (add :a 1) (del :a 1) (contains? :a))
  ;;=> false
) 
```

# virtualbox - 更新后无法在 Virtualbox 中启动虚拟机

> ID：10942611
> 
> 赞同：2
> 
> 时间：2012-06-08T03:09:40.373
> 
> 标签：virtualbox

我刚刚将 virtualbox 更新到最新的 4.1.16 r78094 并意识到我无法再启动我的虚拟机。

如果我启动虚拟机，显示的错误是：

```
Failed to open a session for the virtual machine Historical Image.

Failed to load VMMR0.r0 (VERR_NO_MEMORY).

Result Code: NS_ERROR_FAILURE (0x80004005)
Component: Console
Interface: IConsole {1968b7d3-e3bf-4ceb-99e0-cb7c913317bb} 
```

我在运行 OSX 10.6 的 VM 主机中有 8GB RAM，其中我有超过 4GB 的空闲空间。有谁知道我怎样才能让我的虚拟机再次工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T13:03:35.887

这是一个众所周知的问题，目前您有两种选择：

*   [从http://download.virtualbox.org/virtualbox/4.1.18/VirtualBox-4.1.18-78361-OSX.dmg](http://download.virtualbox.org/virtualbox/4.1.18/VirtualBox-4.1.18-78361-OSX.dmg)安装新版本
*   将您的版本降级到以前的版本：[https ://www.virtualbox.org/wiki/Download_Old_Builds_4_1](https://www.virtualbox.org/wiki/Download_Old_Builds_4_1)

# java - 了解代码特定的功能概念

> ID：10942617
> 
> 赞同：0
> 
> 时间：2012-06-08T03:10:04.223
> 
> 标签：java, struts, concurrenthashmap

我对struts和java比较陌生。我一直在尝试理解以下代码。

```
 List<LabelValueBean> dbList = getCardProductList();

    ConcurrentMap<Integer, ProductItem> ret = new ConcurrentHashMap<Integer, ProductItem>();
    for (LabelValueBean lb : dbList) {
        ProductItem pi = new ProductItem();
        pi.setId(Integer.valueOf(lb.getId()));
        pi.setCode(lb.getCode());
        pi.setName(lb.getDescription());

        LabelValueBeanAuxCol[] aux = lb.getLabelvaluebeanauxcol();
        pi.setTypeProduct(Boolean.TRUE);

        if (null != aux) {
            for (LabelValueBeanAuxCol element : aux) {
                if (null != element
                        && "PRDCT_SVC_IND".equals(element.getName())) {
                    pi.setTypeProduct(Boolean.valueOf("Y".equals(element
                            .getValue())));
                }
            }
        }
        pi.setNeedSetup(Boolean.TRUE);
        ret.put(pi.getId(), pi);
    }
    return Himms2LookupUtil
            .<ConcurrentMap<Integer, ProductItem>> setValueInCache(
                    Himms2Names.CARD_SERVICE_PRODUCT_LIST, ret);
} 
```

关于“PRDCT_SVC_IND”周围的代码块，列名如何映射到 labelvaluebean？
虽然我对并发映射和键值对功能有一个想法，但我对这里的大多数概念都不太确定，并且尝试在互联网上搜索但没有太多运气。我希望更清楚地了解上述行的实际含义（当然，一般来说），就这里使用的概念而言，如 concurrenthashmap、list(labelvaluebean) 等。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:43:28.113

代码正在做以下事情：-

1) 在第一行获取 CardProductList 并将引用存储在 dbList 对象中

```
List<LabelValueBean> dbList = getCardProductList();` 
```

2）创建键值的ConcurrentMap。

3) 开始迭代 CardProductList 并对每个 CardProductList 对象执行以下操作 -

```
a) Crates ProductItem object.
b) setting CardProduct object values (id, code, name) into ProductItem object.
d) setting ProductItem.typeProduct to TRUE.
c) getting Labelvaluebeanauxcol and store it in a LabelValueBeanAuxCol[] array instance called aux.
d) now check if aux is not null then iterates aux array and checks if(elemet is not null  AND element name IS EQUAL TO "PRDCT_SVC_IND"
    THEN
        set ProductItem.TypeProduct to True if element.value = Y
        ELSE
        set ProductItem.TypeProduct to FALE
e) set ProductItem.NeddSetup = TRUE
f) set ProductItem.id and ProductItem into ConcurrentMap. 
```

4) 将 ConcurrentMap 存储在缓存中

# emacs - 如何删除匹配的字符？

> ID：10942631
> 
> 赞同：1
> 
> 时间：2012-06-08T03:13:34.473
> 
> 标签：emacs, elisp

我写了一个简单的函数，让 emacs 添加匹配的引号（所以当我输入 时`"`，我得到`"{cursor}"`）。但是现在，当我删除第一个引用但第二个引用仍然存在时，这是一个主要的烦恼。

有没有办法“监听”字符删除事件，并且下一个字符与删除的字符匹配，也删除下一个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:58:33.107

有现有的次要模式。请参阅[EmacsWiki](http://www.emacswiki.org/emacs/AutoPairs)上的 AutoPairs。

[autopair.el](https://github.com/capitaomorte/autopair)具有您所描述的特定功能。

（`electric-pair-mode`在 Emacs 24 中似乎没有）。

相关问答（提到自动配对）：

*   [智能自动关闭匹配字符](https://stackoverflow.com/questions/7718975/intelligent-auto-closing-matching-characters)
*   [是否可以在 emacs 中自动完成括号或引号？](https://stackoverflow.com/questions/3987489/is-it-possible-to-auto-complete-parentheses-or-quotation-marks-in-emacs)
*   [如何在 Emacs 中获取 TextMate 样式的引号？](https://stackoverflow.com/questions/72732/how-do-i-get-textmate-style-quotes-in-emacs)
*   [在 Emacs 中自动关闭大括号？](https://stackoverflow.com/questions/1023770/automatically-closing-braces-in-emacs)

# c# - linq to sql中的奇怪行为

> ID：10942635
> 
> 赞同：1
> 
> 时间：2012-06-08T03:14:05.223
> 
> 标签：c#, linq, linq-to-sql

从数据库中获取短语后，我试图找到包含短语中所有单词的所有元素：

```
string text = "ab cd 23";//the element prop2 must have all 3 word regardless their order
var q = from c in db.myTable
where c.Prop1 == "value"
select c;
string[] strings = text.Split(' ');
foreach(string word in strings)
{
       int cnt = q.Count();//first time cnt = 1500 which is correct 
       q = q.Where(c => c.Prop2.Contains(word));// Prop2 is a string
       cnt = q.Count();//first time cnt = 460
} 
```

在此之前一切都很好：

```
foreach(string word in strings)// second time
{
       int cnt = q.Count();//second time cnt = 14 ??
       q = q.Where(c => c.Prop2.Contains(word));
       cnt = q.Count();//first time cnt = 2
} 
```

在第二个循环中不做任何事情，元素计数会发生变化，这应该只返回包含所有单词的元素，但它只返回最后一个元素，第三个循环是无用的，没有任何变化

我很抱歉长 Q，但我是 linq 的新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:17:33.867

我认为这可能是可怕的“修改关闭”错误。创建`word`循环变量的临时副本，并在查询中使用它。

```
foreach(string word in strings) {
    var tmp = word;
    int cnt = q.Count();
    q = q.Where(c => c.Prop2.Contains(tmp));
    cnt = q.Count();//first time cnt = 460
} 
```

您应该避免在 LINQ 表达式中使用循环变量，除非您立即“实现”它们（即调用`ToList()`、`ToArray`、`First()`、`SingleOrDefault`等）。当您需要使用循环变量的值时，请制作一个临时副本。原因是 LINQ 推迟了查询的执行，所以当查询被执行时，循环变量的值发生了变化，你的结果会出乎意料地改变。

# shell - 如何使用 unix shell 命令复制在给定日期修改的最新文件？

> ID：10942636
> 
> 赞同：0
> 
> 时间：2012-06-08T03:14:10.497
> 
> 标签：shell, unix

我必须编写一个 shell 脚本，将最新的文件复制到目标目录中。我使用以下 shell 命令。

```
find . -type f -daystart -mtime -$dateoffset 
```

它给了我最新的文件集。但我需要从该列表中获取最新文件并将其复制到目标目录。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:09:10.650

我想不出在 Bourne shell 中执行此操作的方法，因为您需要使用一个实际读取日期戳并对它们进行排序的工具，而 Bourne shell 不这样做。

但这里有一个 PHP 解决方案：

```
<?php
$fdate=array();
foreach(glob("*") as $filename)
  $fdate[filemtime($filename)]=$filename;
krsort($fdate);
print "Newest item: " . reset($fdate) . "\n";'
?> 
```

如果您碰巧使用**bash**而不是 Bourne，那么他是一种使用关联数组获取所需内容的迂回方式：

```
#!/usr/local/bin/bash

declare -A fdate

highest=0
for file in *; do
  timestamp=$(stat -f '%m' "$file")
  fdate[$timestamp]="$file"
  if [ "$timestamp" -gt "$highest" ]; then
    highest=$timestamp
  fi
done

printf "Newest file: %s\n" "${fdate[$highest]}" 
```

请注意，我使用的是 FreeBSD，因此该解决方案也适用于 OSX，但如果您碰巧使用的是 Linux，则需要弄清楚您的`stat`命令实现与我的不同。（提示：您可能可以使用`stat -c '%y'`，但`man stat`可以肯定的是。Solaris、HP/UX、OSF/1 等似乎不包含`stat`可以从您的 shell 调用的二进制文件。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T03:18:14.797

*更新：* 推荐@ghoti 的简洁解决方案。以下已被证明是非鲁棒的。将其留在这里只是因为作为部分答案，它可能为更好的单线解决方案指明了方向。

```
ls -1dt $(find . -type f -daystart -mtime -$dateoffset) | head -n1 
```

要将文件复制到 $TARGET_DIR，

```
A=$(ls -1dt $(find . -type f -daystart -mtime -$dateoffset) | head -n1)
if [ -n "$A" ] cp -u "$A" "$TARGET_DIR/$(basename $A)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T03:19:32.850

```
find . -name "*" -type f -daystart -mtime -$dateoffset | xargs -i mv {} /where/to/put/files 
```

或者

```
mv `find . -name "*" -type f -daystart -mtime -$dateoffset` /where/to/put/files 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:30:08.850

你可以使用这样的东西：

```
find . -type f -name "*" -mtime +x_NUMBER_OF_DAYS|ls -lrt|awk -F' ' '{print $(COLUMN_NUMBER_IN_WHICH_FILE_NAME_APPEARS)}'|tail -1 
```

这将为您提供到给定日期的最新文件。

正如上面有人建议的那样，daystart 仅存在于 GNU 风格的 find 中，而 -mtime 是一个更通用的命令。

PS：如果文件名中有空格，这又会遇到解析问题。但是在我们想出更有创意的东西之前，你可以使用它！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T08:53:40.660

如果您使用带有 -lt 选项的 ls 命令，那么它会在顶部为您提供最新的文件。所以使用这个你可以很容易地提取最新的文件名

# performance - 我应该在 HBase 中使用前缀过滤器还是行键范围扫描

> ID：10942638
> 
> 赞同：10
> 
> 时间：2012-06-08T03:14:33.550
> 
> 标签：performance, filter, hbase, database-scan

不知道为什么用prefixfilter查询会很慢。有人可以解释一下哪个是查询 HBase 的最佳方法，谢谢。

```
hbase(main):002:0> scan 'userlib',{FILTER=>org.apache.hadoop.hbase.filter.PrefixFilter.new(org.apache.hadoop.hbase.util.Bytes.toBytes('0000115831F8'))}
ROW               COLUMN+CELL                                                                                                                                
0000115831F8001   column=track:aid, timestamp=1339121507633, value=aaa                                                                                       
1 row(s) in 41.0700 seconds

hbase(main):002:0> scan 'userlib',{STARTROW=>'0000115831F8',ENDROW=>'0000115831F9'}                                                                                        
ROW               COLUMN+CELL                                                                                                                                
0000115831F8001   column=track:aid, timestamp=1339121507633, value=aaa                                                                                       
1 row(s) in 0.1100 seconds 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-08T19:31:56.297

HBase 过滤器 - 甚至行过滤器 - 非常慢，因为在大多数情况下，它们会执行完整的表扫描，然后过滤这些结果。看看这个讨论： http: [//grokbase.com/p/hbase/user/115cg0d7jh/very-slow-scan-performance-using-filters](http://grokbase.com/p/hbase/user/115cg0d7jh/very-slow-scan-performance-using-filters)

然而，行键范围扫描确实要快得多——它们相当于过滤表扫描。这是因为行键是按排序顺序存储的（这是 HBase 的基本保证之一，它是一种类似 BigTable 的解决方案），因此对行键的范围扫描非常快。更多解释：[http ://www.quora.com/How-feasible-is-real-time-querying-on-HBase-Can-it-be-achieved-through-a-programming-language-such-as- Python-PHP 或 JSP](http://www.quora.com/How-feasible-is-real-time-querying-on-HBase-Can-it-be-achieved-through-a-programming-language-such-as-Python-PHP-or-JSP)

[更新 1] 证明 PrefixFilter 确实会进行全表扫描，直到它通过过滤器中使用的前缀（如果找到它）。使用 PrefixFilter 来获得快速性能的建议似乎是在PrefixFilter*之外*指定一个 start_row 参数。请参阅[hbase-user 邮件列表上的相关 2013 讨论](http://search-hadoop.com/m/TyTHkctw751)。

[更新 2，来自@aaa90210] 关于上述更新，现在有一个比 PrefixFilter 快得多的有效行前缀过滤器，请参阅此答案：[https ://stackoverflow.com/a/38632100/150050](https://stackoverflow.com/a/38632100/150050)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-02T14:13:19.877

DATE：事实证明 PrefixFilter 确实会进行全表扫描，直到它通过过滤器中使用的前缀（如果找到它）。使用 PrefixFilter 获得快速性能的建议似乎是在 PrefixF 之外指定 start_row 参数

# jquery - 使用异步函数更新页面上的 Javascript 文字

> ID：10942639
> 
> 赞同：0
> 
> 时间：2012-06-08T03:14:34.050
> 
> 标签：jquery

在我的 JSP 页面上，我用一个从我的控制器模型中获取值的变量定义了一些 javascript：

```
<!-- checkout.jsp excerpt -->
<script type="text/javascript">
var form = {}; 
form.checkout = {
                 "firstName" : ${checkoutForm.firstName}, // John 
                 "lastName": ${checkoutForm.lastName}     // Doe
                }; 
</script>
<script type="text/javascript" src=SOME_DOMAIN/static/js/checkout.js"></script> 
```

在同一页面上，我包含了一个 js 文件（checkout.js），它将弹出一个表单来更改页面上的这些值。

```
// Somewhere in "checkout.js"
var billingStr = form.checkout.firstName + ' ' +  form.checkout.lastName;

$("#billing-info-Modal").find(".modal-footer").find(".btn-primary").click(function(e){
    var formBody =  $("#billing-checkoutForm");
    // 3\. update the js literal object on the page
    // alert(billingStr); result John Doe 
    form.checkout.firstName =  $(formBody).find("#billing-firstname").val(); // Peter
    form.checkout.lastName = $(formBody).find("#billing-lastname").val();    // Grimes
    // alert(form.checkout.firstName + ' ' + form.checkout.lastName); // Peter Grimes
    // alert(billingStr); result John Doe still!!

    // 4\. update Billing address section
     $('#billingAddress').find('p').html(billingStr);
     // 5\. close the modal
     $("#billing-info-Modal").modal('hide'); 
     e.preventDefault(); 
 }); 
```

这是我的模态形式的摘录：

```
<div class="modal hide" id="billing-info-Modal">
<table id="billingTable">
            <tr class="required">
                <td><label for="billing-firstname">First Name <span>*</span></label></td>
                <td><form:input id="billing-firstname"
                        path="bFirstName" cssClass="textField" /> <form:errors
                        path="bFirstName" cssClass="errors" /></td>
            </tr>
            <tr class="required">
                <td><label for="billing-lastname">Last Name <span>*</span></label></td>
                <td><form:input id="billing-lastname"
                        path="bLastName" cssClass="textField" /> <form:errors
                        path="bLastName" cssClass="errors" /></td>
            </tr>
</table>
 <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <a href="#" class="btn btn-primary">Save changes</a>
   </div> 
```

页面的基本功能：

1.  我会在页面加载时附加带有表单文字的 ap 标签

2.  用户将单击一个按钮，该按钮会弹出一个带有可以更改名字和姓氏的表单的模式。

3.  当用户单击模式上的“保存更改”时，将 form.checkout.firstName 和 form.checkout.lastName 设置为新值。我打算使用 form.checkout 作为稍后提交的对象。所以准确性很重要。
4.  我想用更新的名字和姓氏更新 p 标签
5.  关闭模态。

也许我很困惑。我想我可以通过设置它的字段来更新一个 js 文字对象，例如 form.checkout.firstName = "something"。我错了吗？我可以看到我的函数内部的变量正在发生变化，但它不会影响外部的变量。我认为一旦在页面中声明为 var 的变量具有全局范围。因此，它可以在页面的任何位置进行操作。我也错了吗？

任何见解将不胜感激！！！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:28:05.147

这个变量：

```
var billingStr = form.checkout.firstName + ' ' +  form.checkout.lastName; 
```

正在分配一个字符串，该字符串等于*执行该行时的*名字和姓氏。`form.checkout`如果/当这些属性发生变化时，它不会自动更新。如您评论的警报所示：

```
alert(form.checkout.firstName + ' ' + form.checkout.lastName); // Peter Grimes
alert(billingStr); result John Doe still!! 
```

和属性*已*`form.checkout.firstName`更改，但这不会导致更改- 如果您想采用新值，则必须再次设置它。`.lastName`*`billingStr``billingStr`*

 *> *“我认为一旦页面中声明为 var 的变量具有全局范围。因此它可以在页面中的任何位置进行操作。”*

那是对的。只是您没有更改您尝试使用的变量。

一些与您的实际问题无关的注释：

声明`formBody = $("#billing-checkoutForm")`后，`formBody`引用一个 jQuery 对象，然后您可以直接在其上调用 jQuery 方法，如`formBody.find(...)`or `formBody.anyJqueryMethod()`- 您不需要说`$(formBody).find(...)`。

也`$(formBody).find("#billing-firstname")`不必要地复杂：您通过 id 选择 #billing-firstname 并且 id 应该是唯一的 - 也就是说，您不应该在页面上拥有多个具有相同 id 的元素 - 所以您可以简单地说`$("#billing-firstname")`.

还有一个术语：您不能更新对象*文字*，但可以更新从文字创建的对象。*

# android - Android 表格布局中的空指针异常

> ID：10942641
> 
> 赞同：0
> 
> 时间：2012-06-08T03:14:35.780
> 
> 标签：android, eclipse, android-layout, nullpointerexception

我使用 Eclipse 为我正在创建的 Android 应用程序创建了一个 xml 文件。在完成所有布局并进行一些编码等之后，我发现最终产品需要处于较早的 API 级别（准确地说是 10 级）。所以我开始回滚代码和xml文件的过程，但遇到了一个我无法解决的问题，而且似乎没有任何文档。我创建了一个表格布局，并且有很多表格行。当我尝试在虚拟设备上运行程序时，我得到了一个关于 TableRow.measureNullChild(int) 函数的空指针异常，其代码是：

```
@Override
int measureNullChild(int childIndex) {
return mConstrainedColumnWidths[childIndex];
} 
```

显然问题出在某个地方，但我不确定确切的细节，并且想知道是否有其他人遇到过这个问题。我现在将发布导致崩溃的 xml 文件：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/livelayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<TableRow
    android:id="@+id/tableRow8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingTop="5dp" >

     <RelativeLayout
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:background="@drawable/hope" >

    </RelativeLayout>
</TableRow>

<TableRow
    android:id="@+id/tableRow7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_gravity="center_vertical"
        android:layout_margin="0dp"
        android:gravity="center"
        android:paddingLeft="0dp"
        android:paddingTop="0dp"
        android:text="@string/us"
        android:textSize="28dp"
        android:textColor="#CC7F32" />

    <FrameLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="70dp"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:gravity="center"
            android:paddingLeft="0dp"
            android:paddingTop="0dp"
            android:text="@string/them"
            android:textSize="26dp"
            android:textColor="#CC7F32" />

    </FrameLayout>

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:visibility="visible" >

    <Button
        android:id="@+id/us2"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us2" />

    <Button
        android:id="@+id/us2made"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us2m" />

    <Button
        android:id="@+id/button3"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/them2" />

    <Button
        android:id="@+id/button4"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/them2m" />

</TableRow>

<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <Button
        android:id="@+id/button5"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us1" />

    <Button
        android:id="@+id/button6"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us1m" />

    <Button
        android:id="@+id/button7"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/them1" />

    <Button
        android:id="@+id/button8"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/them1m" />
</TableRow>

<TableRow
    android:id="@+id/tableRow3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <Button
        android:id="@+id/button9"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us3" />

    <Button
        android:id="@+id/button10"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us3m" />

    <Button
        android:id="@+id/button11"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/them3" />

    <Button
        android:id="@+id/button12"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/them3m" />

</TableRow>

<TableRow
    android:id="@+id/tableRow4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <Button
        android:id="@+id/button13"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/usOreb" />

    <Button
        android:id="@+id/button14"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/usXreb" />

    <Button
        android:id="@+id/button15"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/themOreb" />

    <Button
        android:id="@+id/button16"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/themXreb" />

</TableRow>

<TableRow
    android:id="@+id/tableRow5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <Button
        android:id="@+id/button17"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us2f" />

    <Button
        android:id="@+id/button18"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:text="@string/us2fm" />

    <Button
        android:id="@+id/button19"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:padding="5dp"
        android:text="@string/them2f" />

    <Button
        android:id="@+id/button20"
        android:layout_width="70dp"
        android:layout_height="50dp"
        android:padding="5dp"
        android:text="@string/them2fm" />

</TableRow>

<TableRow
    android:id="@+id/tableRow6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingTop="30dp" >
</TableRow>

<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="60dp"
    android:paddingRight="60dp" >

    <Button
        android:id="@+id/button21"
        android:layout_width="201dp"
        android:layout_height="match_parent"
        android:text="Button" />

</FrameLayout>

<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="60dp"
    android:paddingRight="60dp"
    android:paddingTop = "15dp" >

    <Button
        android:id="@+id/Button01"
        android:layout_width="201dp"
        android:layout_height="match_parent"
        android:text="Button" />

</FrameLayout>

</TableLayout> 
```

任何帮助都会非常棒，因为我已经被困在这里两天了，并且无法弄清楚出了什么问题。如果我这样做了，我一定会在这里发帖，以便谷歌员工在发生这种情况时可以找到答案。提前致谢

编辑：在删除除一个之外的所有行后，包含内容，我在同一个地方得到同样的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:58:07.190

但是，这当然是一件太简单的事情了。我忘记将 Gingerbread 布局 ID 替换为 Ice Cream Sandwich 布局 ID，因此它试图在 10 级环境中加载 API 15 布局。更换身份证完全解决了这个问题。

# javascript - Javascript - 从 ArrayBuffer 中获取数据？

> ID：10942642
> 
> 赞同：10
> 
> 时间：2012-06-08T03:14:45.190
> 
> 标签：javascript, drag-and-drop, arraybuffer

我有一个拖放脚本，它使用`readAsArrayBuffer()`. 缓冲区的长度是完美的，但我似乎无法弄清楚如何将数据拉出缓冲区。

显然我必须制作一个[DataView](https://developer.mozilla.org/en/JavaScript_typed_arrays/DataView)或一个[Uint8Array](https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint8Array)或其他东西，然后遍历它的`byteLength`...帮助！

*编辑* 相关代码（不多）：

```
var reader = new FileReader();
reader.onload = function(e) {
    // do something with e.target.result, which is an ArrayBuffer
} 
reader.readAsArrayBuffer(someFileHandle); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:22:12.403

这可能会根据您对我的评论的回答而改变，但如果我假设您正在使用某个地方，您需要在需要提供的回调中`FileReader`读取它的`result`属性：`loaded`

```
function loaded(evt) {  
  var datastring = evt.target.result;

  // do something here
}

reader.onload = loaded; // where reader is a FileReader, FileReaderSync 
```

**更新：**啊，我明白了。那么你最好的做法是遵循这个副本：

[在字符串和 ArrayBuffers 之间转换](https://stackoverflow.com/questions/6965107/converting-between-strings-and-arraybuffers)

**Update2：**请注意，您可能可以使用`readAsText()`then，但我不知道您是否可以自由地这样做。

# ios - 是否有与 Facebook 朋友一起使用的人员选择器视图控制器？

> ID：10942644
> 
> 赞同：4
> 
> 时间：2012-06-08T03:15:06.527
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在寻找一个现有的视图控制器，例如 ABPeoplePickerNavigationController，它不会显示地址簿中的联系人，而是显示用户的 Facebook 朋友。

我之前创建了一个自定义选择器，但是在看到 Words with Friends 执行类似人物选择器之类的操作之后，这似乎是一个更好的解决方案......但我不知道他们是否从头开始创建他们的选择器，我也找不到任何东西.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:22:15.343

没有任何提供此功能的开源库/框架。你只需要自己动手，开源它也可能是一个很酷的主意。

我可以看到人们使用这样的东西。

**更新**：在你的新发现之后，我确实看到`KNMultiItemSelector`了 Facebook 朋友选择器功能。

[KNMultiItemSelector](https://github.com/kentnguyen/KNMultiItemSelector)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T02:11:56.053

[https://github.com/kentnguyen/KNMultiItemSelector](https://github.com/kentnguyen/KNMultiItemSelector) ...

该演示包括加载您的 Facebook 朋友...

看起来很完美！

# javascript - Backbone：在回调中为模型维护对“this”的引用的最简单方法

> ID：10942661
> 
> 赞同：0
> 
> 时间：2012-06-08T03:18:19.153
> 
> 标签：javascript, backbone.js, this, underscore.js

```
var JavascriptHelper = Backbone.Model.extend("JavascriptHelper",
        {}, // never initialized as an instance
        {
            myFn: function() {
                $('.selector').live('click', function() {
                    this.anotherFn(); // FAIL!
                });
            },

            anotherFn: function() {
                alert('This is never called from myFn()');
            }
        }
    ); 
```

通常的`_.bindAll(this, ...)`方法在这里不起作用，因为我从未将此模型初始化为实例。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:38:40.487

您可以手动完成：

```
myFn: function() {
    $('.selector').live('click', function() {
        JavascriptHelper.anotherFn();
    });
} 
```

或者，如果`anotherFn`不在乎什么`this`时候调用它（或者如果它想`this`成为什么`live`用途）：

```
myFn: function() {
    $('.selector').live('click', JavascriptHelper.anotherFn);
} 
```

顺便说一句，[`live`](http://api.jquery.com/live/)已弃用[`on`](http://api.jquery.com/on/). 此外，如果您没有实例化您的 JavascriptHelper，那么它为什么是 Backbone.Model 呢？为什么不使用简单的对象字面量：

```
var JavascriptHelper = {
    myFn: function() {
        //...
    },
    anotherFn: function() {
        //...
    }
}; 
```

你对这个结构有什么期待：

```
var JavascriptHelper = Backbone.Model.extend(string, {}, {...}) 
```

把你留在`JavascriptHelper`里面？扩展一个字符串很奇怪，但是传递三个参数`Backbone.Model.extend`是没有意义的，[它只关心两个参数](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1293)。如果你想要静态属性，那么你应该将它们作为[第二*个*参数](http://documentcloud.github.com/backbone/#Model-extend)传递：

```
var JavascriptHelper = Backbone.Model.extend({}, { myFn: ... }); 
```

# macos - KVM 切换器 - 如何在 OSX Lion 上设置脚本来切换计算机

> ID：10942665
> 
> 赞同：1
> 
> 时间：2012-06-08T03:19:26.727
> 
> 标签：macos

我正在使用 KVM 切换器在两台笔记本电脑（一台 Win7 另一台 OSX Lion）之间共享显示器。我想为 OSX Lion 编写一个脚本，以便在我将鼠标移到热角时运行。我使用的 KVM 切换器是 StarTech SV411KUSB，我所知道的唯一通用热键序列是 ScrLk + ScrLk。

主要是我想要它，所以如果我用这个脚本将鼠标悬停在 Hotcorner 上以运行这个序列并切换到下一台计算机。但如果可能的话，我希望它切换到计算机 3（Win7），因为前两个是我不会与 OSX Lion 一起使用的塔。KVM 切换器带有用于自定义热键的仅限 Windows 的软件，因此我可以处理 Windows 端。

我是 OSX 的新用户，但愿意学习。

RM丹

# linux - QFileIconProvider 总是使用“gnome”主题？

> ID：10942668
> 
> 赞同：1
> 
> 时间：2012-06-08T03:19:49.957
> 
> 标签：linux, qt, qt4.8

有没有办法让用户在使用 QFIleIconProvider 时选择要使用的图标主题？看起来 Qt 默认使用“gnome”，我想改变这种行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:52:08.943

图标样式取决于从 QApplication::style() 返回的内容。因此，如果您使用[QApplication::setStyle()](http://qt-project.org/doc/qt-4.8/qapplication.html#setStyle)更改应用程序样式，您也会得到一组不同的图标。如果您想要与应用程序样式不同的主题，则需要继承 QFileIconProvider 并将您的自定义图标提供程序设置为`QFileSystemModel::setIconProvider(yourCustomIconProvider)`.

# jsf - selectonemenu 选项远离菜单框本身

> ID：10942670
> 
> 赞同：1
> 
> 时间：2012-06-08T03:20:02.207
> 
> 标签：jsf, primefaces

我正在使用 PrimeFaces 3.2 并在 Tomcat 7.0 上运行应用程序。`<p:selectOneMenu>`我有相当大的表格和表格底部的几个框。当我单击该框时，选项会出现在表单的顶部，因此我必须滚动回顶部以选择选项。有没有办法让选项靠近菜单框？

# ruby-on-rails - 仅在填充哈希时才调用方法

> ID：10942671
> 
> 赞同：0
> 
> 时间：2012-06-08T03:20:27.617
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash, conditional

我有一个名为的实例变量

```
@filtered_ratings = params[:ratings].keys 
```

但是，如果`params[:ratings]`为 nil 并`#keys`在其上调用，则会引发错误。如果@filtered_ratings 为零，我希望将@filtered_ratings 设置为一个空数组（或哈希）。有没有一种简单的方法可以在没有太多代码的情况下做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:23:06.067

```
@filtered_ratings = params[:ratings].keys if params[:ratings].respond_to? :keys 
```

***编辑：***

```
 # if params[:ratings] is nil then return []
 @filtered_ratings = params[:ratings].try(:keys) || [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:23:00.083

尝试这个：

```
@filtered_ratings = params[:ratings].try(:keys) 
```

如果`params[:ratings]`是`nil`，它也会返回`nil`（而不是引发错误）。

此外，您当然可以调用`#keys`空哈希 ( `{}`)。但`nil`不是一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T03:26:49.153

我会使用 andand gem，因为我已经习惯了：

```
@filtered_ratings = params[:ratings].andand.key 
```

这会将@filtered_ratings 设置为nil，或者键值——这可能是也可能不是你想要的。

# c# - Linq + foreach 循环优化

> ID：10942673
> 
> 赞同：5
> 
> 时间：2012-06-08T03:20:38.853
> 
> 标签：c#, linq, optimization

所以我最近发现自己写了一个类似于这个的循环：

```
 var headers = new Dictionary<string, string>();
        ...
        foreach (var header in headers)
        {
            if (String.IsNullOrEmpty(header.Value)) continue;
            ...
        } 
```

效果很好，它遍历字典**一次**并完成我需要它做的所有事情。但是，我的 IDE 建议将其作为更具可读性/优化的替代方案，但我不同意：

```
 var headers = new Dictionary<string, string>();
        ...
        foreach (var header in headers.Where(header => !String.IsNullOrEmpty(header.Value)))
        {
            ...
        } 
```

但这不会遍历字典**两次吗？**一次评估`.Where(...)`，然后一次评估 for-each 循环？

如果不是，并且第二个代码示例仅迭代字典一次，请解释原因和方式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T04:06:19.160

## 的代码`continue`大约快两倍。

我在 LINQPad 中运行了以下代码，结果一致表明 with 子句的`continue`速度是原来的两倍。

```
void Main()
{
    var headers = Enumerable.Range(1,1000).ToDictionary(i => "K"+i,i=> i % 2 == 0 ? null : "V"+i);
    var stopwatch = new Stopwatch(); 
    var sb = new StringBuilder();

    stopwatch.Start();

    foreach (var header in headers.Where(header => !String.IsNullOrEmpty(header.Value)))
        sb.Append(header);
    stopwatch.Stop();
    Console.WriteLine("Using LINQ : " + stopwatch.ElapsedTicks);

    sb.Clear();
    stopwatch.Reset();

    stopwatch.Start();
    foreach (var header in headers)
    {
        if (String.IsNullOrEmpty(header.Value)) continue;
        sb.Append(header);
    }
    stopwatch.Stop();

    Console.WriteLine("Using continue : " + stopwatch.ElapsedTicks);

} 
```

这是我得到的一些结果

```
Using LINQ : 1077
Using continue : 348

Using LINQ : 939
Using continue : 459

Using LINQ : 768
Using continue : 382

Using LINQ : 1256
Using continue : 457

Using LINQ : 875
Using continue : 318 
```

`IEnumerable<T>`一般来说，使用已经评估的 LINQ 总是比对应的要慢`foreach`。原因是 LINQ-to-Objects 只是这些低级语言功能的高级包装器。在这里使用 LINQ 的好处不是性能，而是提供了一致的接口。LINQ 绝对确实提供了性能优势，但是当您使用尚未在活动内存中的资源时它们会发挥作用（并允许您利用优化实际执行的代码的能力）。当替代代码是最佳替代方案时，LINQ 只需要通过一个冗余过程来调用您无论如何都会编写的相同代码。为了说明这一点，我将粘贴下面在您使用 LINQ 时实际调用的代码`Where`加载的可枚举的运算符：

```
public static IEnumerable<TSource> Where<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate)
{
    if (source == null)
    {
        throw Error.ArgumentNull("source");
    }
    if (predicate == null)
    {
        throw Error.ArgumentNull("predicate");
    }
    if (source is Iterator<TSource>)
    {
        return ((Iterator<TSource>) source).Where(predicate);
    }
    if (source is TSource[])
    {
        return new WhereArrayIterator<TSource>((TSource[]) source, predicate);
    }
    if (source is List<TSource>)
    {
        return new WhereListIterator<TSource>((List<TSource>) source, predicate);
    }
    return new WhereEnumerableIterator<TSource>(source, predicate);
} 
```

这是`WhereSelectEnumerableIterator<TSource,TResult>`课程。该`predicate`字段是您传递给`Where()`方法的委托。您将看到它在`MoveNext`方法中实际执行的位置（以及所有冗余的空检查）。您还将看到可枚举仅循环一次。堆叠`where`子句将导致创建多个迭代器类（包装它们的前辈），但不会导致多个枚举操作（由于延迟执行）。请记住，当您编写这样的 Lambda 时，您实际上也在创建一个新的 Delegate 实例（也会以较小的方式影响您的性能）。

```
private class WhereSelectEnumerableIterator<TSource, TResult> : Enumerable.Iterator<TResult>
{
    private IEnumerator<TSource> enumerator;
    private Func<TSource, bool> predicate;
    private Func<TSource, TResult> selector;
    private IEnumerable<TSource> source;

    public WhereSelectEnumerableIterator(IEnumerable<TSource> source, Func<TSource, bool> predicate, Func<TSource, TResult> selector)
    {
        this.source = source;
        this.predicate = predicate;
        this.selector = selector;
    }

    public override Enumerable.Iterator<TResult> Clone()
    {
        return new Enumerable.WhereSelectEnumerableIterator<TSource, TResult>(this.source, this.predicate, this.selector);
    }

    public override void Dispose()
    {
        if (this.enumerator != null)
        {
            this.enumerator.Dispose();
        }
        this.enumerator = null;
        base.Dispose();
    }

    public override bool MoveNext()
    {
        switch (base.state)
        {
            case 1:
                this.enumerator = this.source.GetEnumerator();
                base.state = 2;
                break;

            case 2:
                break;

            default:
                goto Label_007C;
        }
        while (this.enumerator.MoveNext())
        {
            TSource current = this.enumerator.Current;
            if ((this.predicate == null) || this.predicate(current))
            {
                base.current = this.selector(current);
                return true;
            }
        }
        this.Dispose();
    Label_007C:
        return false;
    }

    public override IEnumerable<TResult2> Select<TResult2>(Func<TResult, TResult2> selector)
    {
        return new Enumerable.WhereSelectEnumerableIterator<TSource, TResult2>(this.source, this.predicate, Enumerable.CombineSelectors<TSource, TResult, TResult2>(this.selector, selector));
    }

    public override IEnumerable<TResult> Where(Func<TResult, bool> predicate)
    {
        return (IEnumerable<TResult>) new Enumerable.WhereEnumerableIterator<TResult>(this, predicate);
    }
} 
```

我个人认为性能差异是完全合理的，因为 LINQ 代码更容易维护和重用。我还做一些事情来抵消性能问题（比如将我所有的匿名 lambda 委托和表达式声明为公共类中的静态只读字段）。但就您的实际问题而言，您的`continue`子句肯定比 LINQ 替代方案快。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-08T03:29:50.787

不，它不会遍历它两次。the`.Where`实际上并不会自行评估。foreach 实际上从满足子句的 where 中取出每个元素。

类似地， headers.Select(x) 实际上不会处理任何内容，直到您`.ToList()`在其后面放置 a 或某些东西以强制它进行评估。

*编辑：* 为了多解释一点，正如 Marcus 指出的那样，`.Where`返回一个迭代器，因此每个元素都被迭代并且表达式被处理一次，如果它匹配，那么它进入循环体。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T03:29:42.337

我认为第二个示例只会迭代 dict 一次。因为 header.Where(...) 返回的正是一个“迭代器”，而不是一个临时值，所以每次循环迭代时，它都会使用 Where(...) 中定义的过滤器，这使得一次性迭代工作。

但是，我不是一个复杂的 C# 编码器，我不确定 C# 将如何处理这种情况，但我认为事情应该是一样的。

# xml - XPath 查询是从右到左解析的吗？

> ID：10942675
> 
> 赞同：1
> 
> 时间：2012-06-08T03:20:43.680
> 
> 标签：xml, parsing, xpath

[这个流行的 Stack Overflow 问题解释了为什么从右到左解析 CSS 选择器。](https://stackoverflow.com/questions/5797014/css-selectors-parsed-right-to-left-why) XPath 查询是否以相同的方式评估？如果这取决于实现，我会很高兴知道 libxml2 是如何做到的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:49:59.473

**从右到左计算路径表达式是没有意义的，几乎是不可能的**：

```
/name1/name2/name3/name4 
```

根据定义，这将选择作为任何元素的子元素的所有`name4`元素，该`name3`元素是任何元素的子`name2`元素，该元素是名为 的顶部元素的子元素`name1`。

这条链中的任何陈述都依赖于下一个陈述为真。因此，根据需要，评估需要从`/name1`到`/name1/name2`到`/name1/name2/name3`最后到`/name1/name2/name3/name4`

**这在[W3C XPath 1.0 规范](http://www.w3.org/TR/xpath/#location-paths)**中明确指定：

> 相对定位路径由一系列以 / 分隔的一个或多个定位步骤组成。**相对位置路径中的步骤从左到右组合在一起**。每个步骤依次选择一组与上下文节点相关的节点。初始步骤序列与以下步骤一起组成如下。初始步骤序列选择相对于上下文节点的一组节点。 **该集合中的每个节点都用作后续步骤的上下文节点**。由该步骤标识的节点集被联合在一起。由步骤组成标识的节点集就是这个联合。例如，`child::div/child::para`选择上下文节点`para` 的`div`元素子元素的子元素，或者换句话说，`para``grandchildren`有`div` 父元素的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T04:12:23.093

对于您引用的问题，您应该再次仔细阅读已接受的答案。

CSS 选择器是从右到左评估的，作为浏览器具有单个元素并试图确定 CSS 样式表中的哪些选择器适用于它的*特定场景**的实现细节。*在这种情况下，浏览器评估从右到左的原因是因为可以更快地消除候选选择器。

 *CSS 选择器本身并没有要求它们从右到左或从左到右进行评估。事实上，jQuery or`querySelectorAll`将从左到右进行评估，正如答案所指出的。

换句话说：

1.  如果您有一个元素并且您正在*测试*一个选择器是否匹配它，那么将从右到左评估为一种优化通常会更快；
2.  但是如果你想要*所有*匹配的元素，从左到右评估通常更快。

场景 1 最适合您有要设置样式的元素 (CSS) 或 XSL 样式表`template match="??"`(XPath) 并且要测试大量选择器或 XPath。当您只有一个选择器或 XPath 并且您想要所有匹配的元素时，场景 2 最适合，例如当您使用`querySelectorAll`或查询 DOM 时。

XPath 表达式可能比 CSS 选择器复杂得多，因此可能存在 XPath，其中从右到左的短路评估是不可能或不容易的，但从概念上讲，XSLT 引擎当然可以尝试这样做。不知道有没有

**要理解的最重要的事情是，无论如何评估 CSS 选择器或 XPath，它必须给出相同的答案*，就好像*它在整个文档树上从左到右评估一样。**因此，您不需要*从左到右*进行评估，但您必须表现得好像您已经这样做了，因为规范以这种方式定义了它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T08:35:04.933

当 XSLT 使用 match="a/b/c" 形式的模式时，您有兴趣测试特定节点是否与该模式匹配，最简单的方法是从右到左。但是当 XPath 使用 select="a/b/c" 形式的表达式时，您有兴趣查找所有匹配的节点，最简单的方法是从左到右。但是，处理器没有义务（在任何一种情况下）以这种方式工作，并且很可能存在特定处理器将表达式优化为其他形式的情况。例如，给定 XPath 表达式 //a//b，处理器很可能将其重写为等效的 //b[ancestor::a]，这实际上是从右到左的求值。*

# iphone - NSMutable 数组难度

> ID：10942677
> 
> 赞同：1
> 
> 时间：2012-06-08T03:21:25.253
> 
> 标签：iphone, ios, xcode

初学者 iOS 开发人员在这里。我的数组有问题。我正在用 iCarousel 制作一个应用程序。每当它停止到一个视图时，它都会删除当前视图或索引，如下所示：

```
 NSInteger index = carousel.currentItemIndex;
    [carousel removeItemAtIndex:index animated:YES];
    [images removeObjectAtIndex:index]; 
```

所以我的数组有一个索引：

0 1 2 3 4 5

当我使用上面的方法（例如它落在视图 3 上）时，它变成了这样：

0 1 2 4 5

即使我删除，如何保持相同的数组索引/值？还是我应该更新它？

我尝试使用`[carousel reloadData];`但仍然没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:06:34.717

使用`[carousel replaceItemAtIndex:index withObject:[NSNull null]];` 并检查对象是否属于类型，`NSNull`然后什么也不做或根据您的要求执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:29:31.433

1）您需要在实现中调用@synthesize。代码：

```
@synthesize myNSMutableArray; 
```

2）使用“自我”。使用参数产生的setter/getter。代码：

```
self.myNSMutableArray = [[NSMutableArray alloc] initWithObjects:@"object1.png", @"object2.png", @"object3.png", nil];
[self.myNSMutableArray replaceObjectAtIndex:0 withObject: @"newObject.png"];

Without the "self." you are changing the iVar directly. 
```

# java - JMS 多线程处理

> ID：10942679
> 
> 赞同：0
> 
> 时间：2012-06-08T03:21:41.840
> 
> 标签：java, multithreading, jms, jndi

我们有一个 Web 应用程序，它每五秒生成大约 3-5 个并行线程以连接到 JMS/JNDI 连接池。在创建下一批并行线程之前，我们等待第一批并行线程完成。在这个过程中，我们使用了大量的网络流量并且连接线程只是挂起。最终我们手动调用操作团队来终止连接线程以释放连接。我想问你的问题是：

*   显然我们做错了什么，因为我们正在阻止连接资源
*   当我们在发送第二批请求之前等待并行线程响应时，这种设计是不是很符合行业最佳实践？
*   最后，对于这种情况，您有哪些选项和建议，即连接到 JMS/JMDI 连接的多个线程

感谢您的投入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:30:18.093

您需要调整连接池参数。听起来您的服务只使用了 3-5 个连接，这对我来说似乎很合理。JMS 服务应该能够处理数千个连接。您的池的默认限制太低，或者您的 JMS 服务器配置的允许连接太少。

您确定这是其他用户阻止的内容吗？我觉得很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:16:18.023

我几乎可以肯定，您可以使用单连接工厂。只要确保正确清理/关闭会话即可。我们使用 spring 的 SingleConnectionFactory。

# objective-c - 如何在 Superview 的视图中插入视图？(iOS)

> ID：10942681
> 
> 赞同：2
> 
> 时间：2012-06-08T03:21:46.443
> 
> 标签：objective-c, ios, subview, superview, uiview-hierarchy

我有下面的代码行......我将如何修改它以将子视图插入名为“foo”的超级视图的视图中？

```
[[self superview] addSubview:copy3]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:43:56.473

有不止一种方法可以做到这一点 -

`IBOutlet`1.在您的代码中有参考。这是从 xcode Interface builder 创建的。一旦你有了这个，那么它就相当简单了 -

```
[iboutlet_foo_object addSubview:copy3]; 
```

2.`tag`您感兴趣的视图。再次标记视图可以从 xcode Interface builder 或代码中完成。在那之后 -

```
Foo *fooObj = [[self superview] viewWithTag:tagInt];
[fooObj addSubview:copy3]; 
```

3.最后，您可以遍历您的超级视图中的所有视图并查看哪个是类型`Foo`-

```
NSArray *subviews = [[self superview] subviews];
for(UIView *v in subviews)
{
    if(v isKindOfClass:[Foo class])
    {
        [v addSubview:copy3];
        break;
    }
} 
```

希望这些方法对你有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:00:09.647

首先将myView变成superview的一个属性然后使用

```
[[[self superview] myView] addSubview:mySubview]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T17:02:10.720

First tag the view myView with a unique number:

```
myView.tag = 0x1234; 
```

Then you can find it using viewWithTag:

```
[[[self superview] viewWithTag:0x1234] addSubview:mySubview]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T23:02:51.613

您实际上可能只是将其添加到“视图”而不是“超级视图”。

```
[[self view] addSubview:mySubview]; 
```

每当我将子视图添加到父视图时，它对我来说都很好。如果出了什么问题，请告诉我。

# android - Android - 从网址获取图片而不下载

> ID：10942684
> 
> 赞同：0
> 
> 时间：2012-06-08T03:22:06.447
> 
> 标签：android, url, streaming

我有没有办法从 URL 获取图片（图像）而不下载？我使用下面的代码来获取流式视频和音频。但它不适用于图片。

```
public static void IntentPlayer(Context context, Uri uri, int mode){
    String type;
    switch(mode){
        case 1: type = "video/*"; break;
        case 2: type = "audio/*"; break;
        case 3: type = "image/*"; break;            
        default: return;
    }
    Intent intent = new Intent();   
    intent.setAction(android.content.Intent.ACTION_VIEW); 
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);             
    intent.setDataAndType(uri, type);   
    context.startActivity(intent); 
} 
```

日志猫：

```
 android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://192.168.43.1:6789/mobile_base/Tulips.jpg typ=image/* flg=0x10000000 } 
```

我不想在打开文件之前下载它。我会很感激你的回答。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T03:45:53.130

您不能使用“本机图像查看器”来显示来自网络的图像，但您可以轻松地将 url 传递给默认浏览器，它应该会自动为您加载它。您需要`http://`为 Android 附加一个前缀，告诉您正在尝试使用浏览器作为 Activity 来处理该意图。

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://scarlettjohansson.com/wholesome.png"));
startActivity(intent); 
```

# java - 如何检测Java中经过的进程时间，不包括任何进程一直在休眠的时间

> ID：10942686
> 
> 赞同：1
> 
> 时间：2012-06-08T03:22:15.510
> 
> 标签：java, torque, apache-commons-exec

我正在开发一个 Java 程序，它启动一个子进程，通过标准输出接收数据并执行一些计算，这个过程会重复。我在一台超级计算机上运行这个程序，它使用与 Torque 相关的 PBS，它具有一些特殊的调度功能，可以定期挂起作业，以最大限度地提高系统利用率。

我在执行过程中遇到的一个问题是我的子进程神秘地挂起（原因目前未知），导致 Java 等待永远不会到达的响应。我想做的是监视这个进程并强制执行时间截止，即，如果进程运行了不寻常的时间，则死亡并抛出某种错误，让我知道发生了这种情况。

通常，我会使用 Apache commons exec watchdog 来执行此操作。但我担心这项工作暂停的任何时间都会导致这个截止（假设它使用开始和结束 System.currentTimeMillis() 之间的差异）。Apache commons exec watchdog 会因此受到影响吗？有没有办法在经过时间计算中排除任何暂停时间？

# ruby-on-rails-3 - Rails：返回包含至少一个帖子的所有类别的数组？

> ID：10942687
> 
> 赞同：0
> 
> 时间：2012-06-08T03:22:19.177
> 
> 标签：ruby-on-rails-3, activerecord, associations

鉴于：

```
class Categories < ActiveRecord::Base
  has_many :posts
end 
```

和

```
class Posts < ActiveRecord:Base
  attr_accessible :category_id

  belongs_to :category
end 
```

如何获取***至少有一个***相关帖子的所有类别的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:30:54.703

`categories`更好的（就性能而言）解决方案是在表中和`:counter_cache => true`belongs_to 关联声明（您已经查看过）中有一个计数列。

更多信息在这里： http: [//guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache](http://guides.rubyonrails.org/association_basics.html#belongs_to-counter_cache)

如果您的表相对较小，您可以查询： `Category.joins(:posts).group(:category_id).having('count(category_id) >= ?', 1)`

# facebook-graph-api - 使用 Facebook API 将照片从一个相册移动到另一个相册？

> ID：10942688
> 
> 赞同：0
> 
> 时间：2012-06-08T03:22:30.110
> 
> 标签：facebook-graph-api, facebook-c#-sdk, facebook-fql

是否可以使用图形 api 将照片从一个相册移动到另一个相册（或者失败，FQL，我不太了解）？

我知道如何将照片添加到相册，所以理论上我可以下载照片、删除照片、将其上传到不同的相册，但这会非常麻烦且操作冗长。

我想可以考虑以下两种方法之一： - 更改照片所属的相册 - 将具有给定 ID 的照片从一个相册移动到另一个相册

我开始担心这是不可能的，所以希望我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:09:58.983

首先，除非您的应用将照片上传到源相册，否则我认为您的应用无法将其从源相册中删除。大多数 Facebook 数据都经过标记，以防止应用相互干扰或干扰用户手动上传的数据。

我不知道将照片从一个相册“移动”到另一个相册的 API。下载+上传+删除是显而易见的方法。我不知道你从哪里得到的照片，所以如果它已经在任何地方可用，你可以跳过下载阶段。不幸的是，我最后一次检查 Create Photo 有一个限制，不允许您从 Facebook CDN 上传照片。

您可以使用[http://facebookpsmodule.codeplex.com](http://facebookpsmodule.codeplex.com)从桌面轻松编写此脚本，否则，使用 Facebook C# SDK 的 Facebook 应用程序应该不会太棘手。

# actionscript-3 - 在 AS3 中确定平移方向

> ID：10942690
> 
> 赞同：1
> 
> 时间：2012-06-08T03:22:36.207
> 
> 标签：actionscript-3, flash, actionscript

如何扩展下面的简单函数以确定预期的运动方向并将运动锁定到该轴？

换句话说，用户打算向下平移，但由于他们是人类，所以他们向下平移但也略微向右平移，比例为 6:1 我如何推断预期方向并锁定它？

这是我简洁的小锅功能：

```
function onPan(e:TransformGestureEvent):void
{
    e.target.x += e.offsetX;
    e.target.y += e.offsetY;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:25:17.553

虽然上面 Shaun Husain 的建议很接近，但据我所知，AS3 中的手势不提供起点和终点。为了解决这个问题，我从 GESTURE_PAN 事件中抽取了 5 个触发点的样本，并使用 Levenshtein 距离计算的变体来确定预期方向。以下是此问题的有效解决方案：

```
var onPanPointer:Number;
var onPanLevString:String;
var onPanLevSampleSize:Number;

onPanLevSampleSize = 5;

function onPan(e:TransformGestureEvent):void
{

    if (Math.abs(e.offsetX) > Math.abs(e.offsetY))
    {
        // Looks like we intended to move on the X axis
        if (e.offsetX > 0)
        {
            if (onPanLevString == null)
            {
                onPanLevString = "r"
            }
            else
            {
                onPanLevString = onPanLevString + "r"
            }
        }
        else
        {
            if (onPanLevString == null)
            {
                onPanLevString = "l"
            }
            else
            {
                onPanLevString = onPanLevString + "l"
            }
        }
    }
    else
    {
        // Looks like we intended to move on the Y axis
        if (e.offsetY > 0)
        {
            if (onPanLevString == null)
            {
                onPanLevString = "d"
            }
            else
            {
                onPanLevString = onPanLevString + "d"
            }
        }
        else
        {
            if (onPanLevString == null)
            {
                onPanLevString = "u"
            }
            else
            {
                onPanLevString = onPanLevString + "u"
            }
        }
    }

    if (onPanPointer < onPanLevSampleSize)
    {
        onPanPointer += 1;
    }
    else
    {
        //trace("Pointer Value has reached the desired count of: " + onPanPointer);
        //trace("The Levenshtein String is: " + onPanLevString);

        if (levenshteinDistance(onPanLevString,repeatString("u",onPanLevSampleSize)) <= ((onPanLevSampleSize/2)+1))
        {
            e.target.y += e.offsetY*onPanLevSampleSize;
            //trace("Panning Up");
        }
        else if (levenshteinDistance(onPanLevString,repeatString("d",onPanLevSampleSize)) <= ((onPanLevSampleSize/2)+1))
        {
            e.target.y += e.offsetY*onPanLevSampleSize;
            //trace("Panning Down");
        }
        else if (levenshteinDistance(onPanLevString,repeatString("l",onPanLevSampleSize)) <= ((onPanLevSampleSize/2)+1))
        {
            e.target.x += e.offsetX*onPanLevSampleSize;
            //trace("Panning Left");
        }
        else
        {
            e.target.x += e.offsetX*onPanLevSampleSize;
            //trace("Panning Right");
        }

        onPanPointer = 1;
        onPanLevString = null;
    }

    //trace("X Offset = " + e.offsetX);
    //trace("Y Offset = " + e.offsetY);
} 
```

正在使用的 levenshteinDistance 函数（如下）由 mircea16 在 Snipplr 上编写，可以在[此处找到](http://snipplr.com/view/14878/)。

```
function levenshteinDistance(s1:String,s2:String):int
{
    var m:int=s1.length;
    var n:int=s2.length;
    var matrix:Array=new Array();
    var line:Array;
    var i:int;
    var j:int;
    for (i=0;i<=m;i++)
    {
        line=new Array();
        for (j=0;j<=n;j++)
        {
            if (i!=0)line.push(0)
            else line.push(j);
        }
        line[0]=i
        matrix.push(line);
    }
    var cost:int;
    for (i=1;i<=m;i++)
    for (j=1;j<=n;j++)
    {
        if (s1.charAt(i-1)==s2.charAt(j-1)) cost=0
        else cost=1;
        matrix[i][j]=Math.min(matrix[i-1][j]+1,matrix[i][j-1]+1,matrix[i-1][j-1]+cost);
    }
    return matrix[m][n];
} 
```

使上述示例工作所需的最后一个函数是我使用的 repeatString 函数。（这是使您能够使用 onPanLevSampleSize var 更改样本大小而无需更改任何其他内容所必需的）

```
function repeatString(string:String, numTimes:uint):String
{
    var output:String = "";
    for(var i:uint = 0; i < numTimes; i++)
        output += string;
    return output;
} 
```

您需要更改以调整使用的样本大小的唯一数字是 onPanLevSampleSize，所有计算都使用该数字作为基础执行。

希望这对将来的人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:56:42.840

还没有尝试过，但我认为他会更喜欢这样的事情：

```
 private var startX:Number;
        private var startY:Number;
        private function onPan(e:TransformGestureEvent):void
        {
            var currentX:Number = e.localX;
            var currentY:Number = e.localY;
            if(Math.pow(currentX-startX,2) > Math.pow(currentY - startY,2))
            {
                e.target.x = currentX;
            }
            else
            {
                e.target.y = currentY;
            }
        } 
```

我只是省略了你想要设置 startX 和 startY 的部分。我还没有使用 TransformGestureEvent，但我认为它有一个初始的向下事件，你可以标记 startX/startY。基本上我只是说看看 X 的变化是否大于 Y 的变化，如果调整 X，否则调整 Y。所以这就像粘性平移。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T03:45:04.600

奇怪的问题，但我想我明白你在找什么。

```
function onPan(e:TransformGestureEvent):void
{
    e.target.x += e.offsetX + (e.offsetY/6); // use ratio from offsetY
    e.target.y += e.offsetY;
} 
```

# c# - 在临时目录中创建新项目

> ID：10942691
> 
> 赞同：2
> 
> 时间：2012-06-08T03:22:50.897
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio

首先可能需要一些上下文，

基本上，过去几年我一直在使用 VS2008 Express 版本。对于 express 版本（C++ 除外），默认情况下，当您创建新项目时，项目文件都存储在临时目录中。当您第一次选择“全部保存”时，VS 会提示您输入项目目录，然后您可以将项目保存到您的常规项目目录中。

这是我发现非常有用的行为，因为很多时候我创建了非常快速、简单的程序来为我做一件事，然后再不需要它们。一旦我关闭VS，它会提示我是否要保存项目，我选择“放弃”，一切都很好；我的项目目录不会因为 1-time 项目的无用目录而杂乱无章，而且每个人都赢了。

但是，使用 VS2010 Ultimate 我注意到默认行为发生了变化，所有新项目都直接创建到我的项目目录中（是的，我知道我可以在创建项目时更改目录，但这是浪费时间） . 这导致我每次想写一个小程序时都回到快递版本，这在家里还不错，但在工作中我们只有VS2010专业版。每次我创建一个简单的项目时，我都必须记住稍后删除该目录，否则将面临一个“WindowsFormsApplication1000232131231”目录。

所以我的问题是：是否可以更改 VS2010 Profession/Ultimate 的默认项目创建行为以匹配早期 2008 Express 版本的行为？

干杯，J

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:06:31.780

是的，它是一个名为“创建时保存新项目”的配置选项。专业版/终极版默认关闭。

有关详细信息，请参见如何：[启用临时项目](http://msdn.microsoft.com/en-us/library/ms165252%28v=vs.100%29.aspx)。

> 在 IDE 中启用临时项目
> 
> 1.  在工具菜单上，单击选项。
> 2.  展开 Projects and Solutions 节点，然后选择 General 节点。
> 3.  确保清除创建时保存新项目。
> 4.  单击确定。

# routes - 捕获 expressjs 中的所有路线

> ID：10942692
> 
> 赞同：3
> 
> 时间：2012-06-08T03:22:51.423
> 
> 标签：routes, express

我想在 expressjs 中设置一些捕获所有路线

我有三个级别

> /模块
> 
> /模块/页面

如果模块路由不存在，则同样发送到 404 路由，如果模块存在但页面不发送到 404 路由。

html中的404回复

> /api/控制器/方法

如上所述，但 404 等价物会在 json 中回复

正则表达式正在杀死我，所以如果有人能帮助我解决我的发际线，我将不胜感激。:) 我曾想过使用路线查找表，但我想尝试以“快速”方式进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T17:38:17.607

只需为 /module /module/page 设置路由（或者您可能想要 /module/:page_id 之类的东西）

并在您要添加的所有路线的底部

```
 app.use(function(req,res) { 
    res.render('404', 
               { locals: {'title':'Not Found'}, }, 
               function(err,str) { res.send(str,404); } ); 
```

如果没有任何东西符合捕获所有快照！

这是来自谷歌组中的那个线程 [https://groups.google.com/forum/?fromgroups=#!topic/express-js/aYLM4e1I4XU](https://groups.google.com/forum/?fromgroups=#!topic/express-js/aYLM4e1I4XU)

# php - 这应该是控制器还是域的责任？

> ID：10942696
> 
> 赞同：1
> 
> 时间：2012-06-08T03:23:07.923
> 
> 标签：php, model-view-controller, zend-framework, design-patterns

在我的应用程序中，我有用户、组织和员工。每个都有域对象和数据库映射器。

当用户最初设置组织时，我想为该用户/组织组合自动创建员工记录。（记录类型将是所有者）。基本上这归结为两个数据库插入：一个用于组织，另一个用于员工。

我可以看到两种方法来解决这个问题：

1.  控制器可以创建新的组织对象并使用映射器`orgMapper::insert($newOrg)`来持久化它。完成后，它可以创建新的 Employee 对象并再次使用映射器`employeeMapper::insert($newOwner)`, 来进行持久化。
2.  控制器可以创建新的组织对象，这个对象自己完成其余的工作。它会调用`orgMapper::insert($this)`，然后使用返回的键创建并保存新的 Employee 对象。

第二种方法似乎有很多好处：业务逻辑（即每个新组织的员工/所有者记录）嵌入到模型中，并且控制器更精简。我犹豫的唯一原因是这意味着我的域变得依赖于我的映射器。

我会使用域中的工厂来获取映射器，因此所有耦合都会归结为一个点。这是否使依赖性可以接受？还是我有更深层次的设计问题？

我已经阅读了一些关于服务层的信息。也许这就是我应该寻找的地方？

我正在使用 PHP 和 Zend 框架

非常感谢您的想法。我和我的猫已经用尽了我们自己的想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T10:54:25.453

由于我不是 ZF 用户（并且一直在避免使用它），所以我的解决方案可能不适用。

数据映射器不应该只使用数据库中的单个表。相反，当您存储新`Organization`条目时（我猜该`Organization`实例包含`Employee`对象集合），映射器还应该为员工创建所有条目，以及`OrganizationEmpoyees`表中的随附数据。

简短的回答：**两者都不是，存储是映射器的责任。**

如果我误解了数据库结构，以及它与*“（..）该用户/组织组合的员工记录”*的关系，并且`Employee`域对象与 完全分开`Organization`，那么您的第一个解决方案将是可以接受的。

至于在域对象和映射器之上添加服务，那将是一个好主意。因为您已经在控制器内部泄漏域逻辑。似乎是一件坏事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:24:48.890

我可以告诉你在这种情况下我会怎么做。每当我需要获取一堆数据并从中构建多个对象时，我会将整个混乱转储到另一个模型（可能是服务层，我不知道）并从控制器中整理出对象。我只是使用控制器来获取数据并将其发送到其他地方（视图或模型）。

例如，我想从我的音乐收藏中保存一些数据，这些数据当前位于 csv 文件中。我的控制器解析 csv 文件并将每一行数据放入一个数组中，我将其转发给一个类方法，该方法将数据分类为对象并将其保存到数据库中。（请注意这种方法是初步的，需要一些调整和调整）

```
//FROM class Application_Model_Tag
public function saveTags() {
        //TODO implement instantiation of Domain Models instead of passing arrays to mappers
        $trackMapper  = new Music_Model_Mapper_Track();
        $artistMapper = new Music_Model_Mapper_Artist();
        $albumMapper  = new Music_Model_Mapper_Album();

        if (isset($this->_hash)) {
            //see if track already exists by comparing hashs
            $trackRow = $trackMapper->fetchByColumn('hash', $this->getHash());
            //if track does not exist
            if (is_null($trackRow)) {
                //save the artist
                $artistData = array(
                    'name' => $this->getArtist()
                );
                //see it the artist exists by name
                $artistRow = $artistMapper->fetchByColumn('name', $this->getArtist());
                //does artist exist?
                if (is_null($artistRow)) {
                    $artistRow = $artistMapper->save($artistData);
                }

                //Save the Album Data
                //does the album exist?
                $albumRow = $albumMapper->fetchByColumn('name', $this->getAlbum());
                //if yes
                if (is_null($albumRow)) {
                    $albumData = array(
                        'name'      => $this->getAlbum(),
                        'artist_id' => $artistRow->id,
                        'art'       => $this->getAlbum() . '.jpg',
                        'year'      => $this->getYear()
                    );
                    //get album row
                    $albumRow = $albumMapper->save($albumData);
                }
                //Save track data
                $trackData = array(
                    'title'     => $this->getTitle(),
                    'filename'  => $this->getFilename(),
                    'path'      => $this->getPath(),
                    'format'    => $this->getFormat(),
                    'genre'     => $this->getGenre(),
                    'artist_id' => $artistRow->id,
                    'album_id'  => $albumRow->id,
                    'track'     => $this->getTrack(),
                    'play_time' => $this->getPlay_time(),
                    'hash'      => $this->getHash()
                );
                //save track data
                $trackMapper->save($trackData);
            }
        } else {
            return;
        }
    } 
```

我希望这会有所帮助，请原谅这个例子的粗鲁。

# c++ - 如何将一个链表插入另一个链表？

> ID：10942697
> 
> 赞同：0
> 
> 时间：2012-06-08T03:23:10.117
> 
> 标签：c++, linked-list

对于作业，我需要将一个对象链表添加到另一个对象的后面。我有这个：

```
WORD you("you");//where you's linked list now contains y o u
WORD are("are");//where are's linked list now contains a r e 
```

我想这样做：

```
you.Insert(are,543);//(anything greater they the current objects length is
                    //attached to the back. So that 543 can be anything > you's length 
```

所以现在，你的链表应该包含：

```
y o u a r e 
```

我可以在前面插入，也可以在字母之间的任何地方插入，但是当我尝试在后面插入时，程序会立即崩溃。有人可以帮我找出问题所在吗？我尝试使用调试器，它指向一行，但我不知道出了什么问题。我已将该行标记为函数中的传入：

```
void WORD::Insert(WORD & w, int pos)
{
if(!w.IsEmpty())
{
    alpha_numeric *r = w.Cpy();
    alpha_numeric *loc;

    (*this).Traverse(loc,pos);//pasing Traverse a pointer to a node and the     position in the list

    //if(loc == 0)
    //{
    //  alpha_numeric *k = r;//k is pointing to the begin. of the copied words list
    //  while(k -> next != 0)
    //  {
    //      k = k -> next;//k goes to the back 
    //  }
    //  k -> next = front;//k(the back) is now the front of *this
    //  front = r;//front now points to r, the copy
    //}
    else if(loc == back)
    {

        back -> next = r; //<<<-------DEBUGGER SAYS ERROR HERE?
        length += w.Length();
        while(back -> next!= 0)
        {
            back = back -> next;
        }
    }
    /*else
    {
        alpha_numeric *l = r;

        while(l -> next != 0)
        {
            l = l -> next;
        }
        l -> next = loc -> next;
        loc -> next = r;
    }
    length += w.Length();
}*/
} 
```

另外，如果有帮助，这是我使用的 Traverse 功能

```
void WORD::Traverse(alpha_numeric * & p, const int & pos)
{
if(pos <= 1)
{
    p = 0;
}
else if( pos > (*this).Length())
{
    p = back;
}
else
{
    p = front;
    for(int i = 1; i < pos - 1; i++)
    {
        p = p -> next;
    }
}

} 
```

**我在班级的私人部分宣布回来作为指针。*背部**

这就是我把它放在构造函数中的方式

```
WORD::WORD()
{
alpha_numeric *p;

front = new alpha_numeric;
front = 0;
length = 0;
back = front;

for(p = front; p != 0; p = p -> next)
{
    back = back -> next;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:44:10.537

我强烈怀疑您的问题源于列表为空时未`back`在块中更新。`if(loc==0)`

在这种情况下，`back`会留下`== 0`，并且追加操作会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:26:47.870

*back 没有指向 Traverse 函数中的正确节点。它应该如下所示：

```
else if( pos > (*this).Length())
{
    alpha_numeric *k = (*this).front;
    while( k -> next != 0)
    {
        k = k -> next;
    }
    back = k;
    p = back;
} 
```

# android - java.lang.NoSuchMethodException: generatePackageInfo

> ID：10942701
> 
> 赞同：0
> 
> 时间：2012-06-08T03:23:38.260
> 
> 标签：android, reflection, apk, sign

有没有人在带有**java反射**的Android源代码中使用隐藏类**PackageParser**？

 **我可以通过反射方式获取此类及其方法 collectCertificates() ，但我不断获取 NoSuchMethodException 及其方法**generatePackageInfo()**。

我想知道以下句子是否会导致该问题，因为我不太确定**int[].class**的用法：

partypesGeneratePackageInfo[1] = int[].class;

这是我的代码：

```
 private PackageInfo parsePackage(String archiveFilePath, int flags)
        throws Exception, Exception {
    // get class:PackageParser
    Class clsPackageParser = Class
            .forName("android.content.pm.PackageParser");

            ......      

    // get method:collectCertificates
    Class partypesCollectCertificates[] = new Class[2];
    partypesCollectCertificates[0] = clsPackage;
    partypesCollectCertificates[1] = int.class;
    Method methCollectCertificates = clsPackageParser.getMethod(
            "collectCertificates", partypesCollectCertificates);

    // invoke method:collectCertificates
    Object arglistMethCollectCertificates[] = new Object[2];
    arglistMethCollectCertificates[0] = objPackage;
    arglistMethCollectCertificates[1] = flags;
    methCollectCertificates.invoke(objPackageParser,
            arglistMethCollectCertificates);

    // get method:generatePackageInfo
    Class partypesGeneratePackageInfo[] = new Class[3];
    partypesGeneratePackageInfo[0] = clsPackage;
    partypesGeneratePackageInfo[1] = int[].class;
    partypesGeneratePackageInfo[2] = int.class;
    Method methGeneratePackageInfo = clsPackageParser.getMethod(
            "generatePackageInfo", partypesGeneratePackageInfo);

    ......
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:27:24.897

据我所知，声明`generatePackageInfo`是：

```
public static PackageInfo generatePackageInfo(PackageParser.Package p,
        int gids[], int flags, long firstInstallTime, long lastUpdateTime) { 
```

所以这是 5 个参数：`PackageParser.Package.class, int[].class, int.class, long.class, long.class`.

由于这不是公开的 API，因此参数的数量很可能会随着版本的变化而变化。**

# android - 在 Android 模拟器中显示韩语（不支持 MacRoman）

> ID：10942703
> 
> 赞同：3
> 
> 时间：2012-06-08T03:23:45.190
> 
> 标签：android, eclipse, unicode, cordova, android-emulator

我正在尝试开发一个韩语词汇应用程序，但我无法将韩语单词插入数据库并显示它们：它们显示为一串奇怪的字符。有没有办法解决这个问题？或者我只能将韩语单词显示为图像？我需要配置一些东西吗？

到目前为止，我将文本文件编码更改为“Other:UTF-8”。但这并不能解决问题。我现在正在使用 Android Phonegap 进行开发。任何提示或提示将不胜感激。谢谢你。

===更新====

```
 <script type="text/javascript" charset="utf-8">
    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Populate the database 
    //
    function populateDB(tx) {
        tx.executeSql('DROP TABLE IF EXISTS DEMO');
        tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, kword TEXT NOT NULL, eword TEXT NOT NULL, pronoun TEXT NOT NULL, level INTEGER NOT NULL)');
        tx.executeSql('INSERT INTO DEMO (id, kword, eword, pronoun, level) VALUES ("1", "점심", "Lunch", "jeomsim", "1")');
        tx.executeSql('INSERT INTO DEMO (id, kword, eword, pronoun, level) VALUES ("2", "晚餐", "Dinner", "naeil", "1")');
    }

    // Query the database
    //
    function queryDB(tx) {
        tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
    }

    // Query the success callback
    //
    function querySuccess(tx, results) {
        var data ='';
        var len = results.rows.length;
        localStorage.tablerows = len;
        for (var i=0; i<len; i++){
            data = data +"<tr><td>"+results.rows.item(i).id +"</td><td>"+ results.rows.item(i).kword+ "</td><td>" +  results.rows.item(i).eword +"</td></tr>" ;
        }
        display(data);
    }

    // Transaction error callback
    //
    function errorCB(err) {
        alert("Error processing SQL: "+err.code);
    }

    // Transaction success callback
    //
    function successCB() {
        var db = window.openDatabase("Database", "1.0", "Vocabulary", 200000);
        db.transaction(queryDB, errorCB);
    }

    // PhoneGap is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "Vocabulary", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    function display(data){
        $('table#vocab').css('display','block');
        $('table#vocab tbody').append(data);
    }
</script> 
```

![在此处输入图像描述](../Images/587f23058e17fe2588dc38660c663a1d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:40:16.787

你有一个编码问题。您似乎在 UTF8 中正确保存了“점심”，但在 Windows Latin 1 中显示。您的问题出在显示方面。我们需要查看更多代码...

## 已编辑

你的代码很好——这是存储部分，我知道它没问题。正如我上面所说，这是一个显示问题。您是否在网页的一部分中设置了`charset`元标记？`<head>`

# javascript - html（或 asp.net）文本框中的斜体和普通文本

> ID：10942704
> 
> 赞同：-1
> 
> 时间：2012-06-08T03:24:04.453
> 
> 标签：javascript, asp.net, html, css

我怎样才能通过使用 javascript 来做到这一点？例如，我有一个文本 Axxxxxx 应该显示在文本框中。如果第一个文本是 A，那么第一个文本样式是普通样式，后面的文本样式是斜体。A*xxxxxx*

*否则，文本框xxxxxx*中的文本全部为斜体

 *可能吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-03T12:15:19.323

您可以通过以下代码在 textarea 中获取斜体和粗体字母

```
<textarea style="font-weight: bold; font-style: italic;"></textarea> 
```

愿这对你有所帮助。

```
<!DOCTYPE html>
<html>
<head>
<title>Italic and bold</title>
</head>
<body>
<textarea style="font-weight: bold; font-style: italic;"></textarea>
</body>
</html>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:28:15.993

对于这样的事情，最好的选择是调查`contentEditable`财产，但我自己从未使用过。

我所知道的是，你不能在同一个文本框中有不同样式的文本。主要是因为文本甚至不是一个节点，它是一个属性值。*

# asp.net - Nhibernate 多对多关系映射

> ID：10942711
> 
> 赞同：0
> 
> 时间：2012-06-08T03:25:54.187
> 
> 标签：asp.net, nhibernate, mapping, many-to-many

我对 Nhibernate 很陌生。我想通过使用 NHibernate 作为映射数据库工具在 asp.net 中开发一个应用程序。

我有以下表格模式：

```
CREATE TABLE [dbo].[tblTeam](
    [TeamID] [int] IDENTITY(1,1) NOT NULL,
    [TeamName] [varchar](100) NOT NULL
)

CREATE TABLE [dbo].[tblEmployee](
    [EmployeeID] [int] IDENTITY(1,1) NOT NULL,
    [EmployeeName] [varchar](100) NOT NULL
)

CREATE TABLE [dbo].[tblTeamEmployee](
    [TeamID] [int] NOT NULL,
    [EmployeeID] [int] NOT NULL
) 
```

这是我制作的 Nhibernate 映射文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="TelDir.Core.Domain.Team, TelDir.Core" table="tblTeam" lazy="false">
    <id name="ID" column="TeamID" unsaved-value="0">
      <generator class="identity" />
    </id>

    <property name="TeamName" column="TeamName" />

    <bag name="Employees" cascade="none" table="tblTeamEmployee" lazy="false" access="readonly">
      <key column="EmployeeID"/>
      <many-to-many class="TelDir.Core.Domain.Employee, TelDir.Core" column="TeamID"/>
    </bag>

  </class>
</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="TelDir.Core.Domain.Employee, TelDir.Core" table="tblEmployee" lazy="false">
    <id name="ID" column="EmployeeID" unsaved-value="0">
      <generator class="identity" />
    </id>

    <property name="EmployeeName" column="EmployeeName" />        

    <bag name="Teams" cascade="none" table="tblTeamEmployee" lazy="false" >
      <key column="EmployeeID"/>
      <many-to-many class="TelDir.Core.Domain.Team, TelDir.Core" column="EmployeeID"/>
    </bag>

  </class>
</hibernate-mapping> 
```

我的 POCO 类定义如下：

```
namespace TelDir.Core.Domain
{
    public class Team   {

        private string _TeamName = "";
        private IList<Employee> _employees = new List<Employee>();

        public Team() { }

        public  string TeamName {
            get { return _TeamName }
            set { _TeamName = value; }
        }

        public  IList<Employee> Employees
        {
            get { return new List<Employee>(_employees).AsReadOnly(); }
            protected set { _employees = value; }          
        }

        public  void AddEmployee(Employee em)
        {
            if (!_employees.Contains(em)){
                _employees.Add(em);
            }
        }

        public  void RemoveEmployee(Employee em)
        {
            if (_employees.Contains(em)){
                _employees.Remove(em);
            }
        }  
    }
}

namespace TelDir.Core.Domain
{
    public class Employee  {

        private string _EmployeeName = "";
        private IList<Team> _teams = new List<Team>();

        public Employee() { }

        public  string EmployeeName {
            get { return _EmployeeName}
            set { _EmployeeName = value; }
        }

        public  IList<Team> Teams
        {
            get { return new List<Team>(_teams).AsReadOnly(); }
            protected set { _teams = value; }          
        }

        public  void AddTeam(Team tm)
        {
            if (!_teams.Contains(tm)){
                _teams.Add(tm);
            }
        }

        public  void RemoveTeam(Team tm)
        {
            if (_teams.Contains(tm)){
                _teams.Remove(tm);
            }
        }  
    }
} 
```

我不确定我的映射和实体类是否定义明确？

假设我的表中有以下数据

```
tblTeam
        TeamID     |      TeamName
        --------------------------
          1        |         A
        --------------------------
          2        |         B

tblEmployee
        EmployeeID |      EmployeeName
        ------------------------------
          1        |      Jhon
        ------------------------------
          2        |      Michel
        ------------------------------
          3        |      Lino

tblTeamEmployee
        TeamID     |      EmployeeID
        ------------------------------
          1        |      1
        ------------------------------
          1        |      2
        ------------------------------
          2        |      3
        ------------------------------
          2        |      1 
```

如何从 ASP.NET 页面中的 Team='B' 中删除 Employee name='Jhon'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:31:08.330

当您想更改您的收藏时，请`.AsReadOnly()`从中删除。

然后，如果您同时拥有（1 和 2）的 id，只需执行以下操作：

```
var teamB = session.Get<Team>(2);
teamB.Employees.Remove(teamB);
session.Flush(); 
```

# validation - 显示验证错误的 CakePHP 元素

> ID：10942716
> 
> 赞同：1
> 
> 时间：2012-06-08T03:26:59.520
> 
> 标签：validation, cakephp

我试图在表单顶部而不是在每个输入旁边显示验证错误的摘要。

我没有看到任何内置的表单助手来执行此操作，因此我决定创建一个视图元素来执行此操作。但是，`$this->Form->validationErrors`这不是错误消息的平面数组，所以我不能只是循环遍历它并打印出验证错误。这是一个 var_dump，其中一个字段只有一个验证错误：

`array(1) { [0]=> &array(1) { ["terrcode"]=> array(1) { [0]=> string(30) "Please enter a territory code." } } }`

所以我不能在不知道字段名称或以某种方式展平数组的情况下循环遍历它。必须有一种更简单的方法来做到这一点，我错过了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T05:53:09.970

一种方法是将要使用的字段数组传递给元素，然后遍历它们并调用：

```
foreach($fieldsToShowValidationFor as $field) {
    echo $this->Form->error($field);
} 
```

通过数组传递

```
$this->element('validation_errors', array('fieldsToShowValidationFor' => array('id', 'etc')); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T20:19:29.850

扁平化数组似乎是要走的路，幸运的是 CakePHP 有一个[Set::flatten](http://api.cakephp.org/class/set#method-Setflatten)。

这是`errorSummary.ctp`我想出的：

```
<?php
$errors = $this->Form->validationErrors;
$flatErrors = Set::flatten($errors);
if(count($errors) > 0) { ?>
<div class="errorSummary">
<ul>
<?php foreach($flatErrors as $key => $value) { ?>
    <li><?php echo($value); ?></li>
<?php } ?>
</ul>
</div>
<?php }?> 
```

# django - 使用报告实验室创建条形图并在模板中显示

> ID：10942717
> 
> 赞同：1
> 
> 时间：2012-06-08T03:27:01.827
> 
> 标签：django, reportlab

我有一个 django 视图生成一堆数据，我想将这些数据分解为三个不同的图表以显示在模板中。我可以一一生成图表并执行简单的 return HttpResponse() 以确定我正在使用正确的数据等创建它们。

由于这是我第一次使用 ReportLab，我想确保我采用正确的方法来生成这些以在 Web 应用程序中进行演示。我可以看到两种不同的方法来处理这个问题：

1.  实际上将图表的二进制表示传递给模板并将它们分配给 img 标签。（不幸的是，到目前为止我一直没有成功 - 当我在模板中转储二进制数据时，它是空的）

    1.  将图表另存为图像并引用模板中的静态图像。

我正在寻找一些关于采取哪种方法的建议，如果可能的话，还有一些实施提示。

作为参考，这里是生成图表的视图中的一个片段（其中大部分是从 DjangoProject wiki 示例构建的）：

```
#instantiate a drawing object
import mycharts
d = mycharts.MyBarChartDrawing(width=800, height=500)

d.chart.categoryAxis.categoryNames = ['Pre-Operative Visit', '6-Week Visit', '3-Month Visit ', '6-Month Visit', '12-Month Visit']
d.chart.data = vas_scores_wrapper   

#get a GIF (or PNG, JPG, or whatever)
image_data = d.asString('png')

return HttpResponse(image_data, 'image/gif')
return render_to_response('summaries/study_summary.html', {'patients':patient_list,'query_form':query_form,'image_data':image_data}, context_instance=RequestContext(request)) 
```

这将产生一个条形图。FWIW，将“image_data”传递给模板并将其转储到该模板上并没有显示任何内容。也许您不能将二进制数据直接传递给模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:38:09.240

我会将图像保存到 Media 目录并将它们的路径传递给要在 img.href 中使用的模板。这将帮助您缓存图表以供多次使用，并使您在调试时更轻松。

但是，您始终可以尝试对图像进行 base64 编码并将它们作为二进制文件传递给模板，但这会使您的 html 在渲染时稍微变大（读取速度慢），并且在需要时需要额外的调试工作。我推荐第一个选项。

# javascript - 通过javascript单击按钮时无法获取下拉菜单

> ID：10942718
> 
> 赞同：3
> 
> 时间：2012-06-08T03:27:13.640
> 
> 标签：javascript, jquery, drop-down-menu

我有一个 iframe，它有一个设置按钮，我通过 javascript 附加了它的按钮，比如 -

```
headerFuncPanel.append( "<div title='settings button' class='settingsImg window_icon_button no-draggable'></div>" ); 
```

现在，我必须向它添加一个[简单的下拉菜单](http://www.filamentgroup.com/examples/menus/)- 以便 onClick 设置按钮，我得到一个下拉菜单。

我必须以菜单的形式包含以下代码 -

```
<ul>
<li><a href="#">Apples</a></li>
<li><a href="#">Oranges</a></li>
<li><a href="#">Bananas</a></li>
<li><a href="#">Cheetos</a></li>
</ul> 
```

有什么方法可以在附加功能中插入/添加此菜单列表或通过添加相同的列表

```
headerFuncPanel.children(".settingsImg").click(function() {}; 
```

如何通过javascript添加菜单html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:56:39.783

试图在变量周围添加 $()？

喜欢：

```
$(headerFuncPanel.children(".settingsImg")).click(function() {}; 
```

或者只是在 .append 方法之后添加事件：

```
headerFuncPanel.append(...);
$('.settingsImg').click(...); 
```

# objective-c - 如何在 NSBrowser 中突出显示一行？

> ID：10942719
> 
> 赞同：0
> 
> 时间：2012-06-08T03:27:18.767
> 
> 标签：objective-c, macos, cocoa, nsbrowser

我尝试使用 突出显示行`NSBrowser`，`selectRowIndexes`但`NSBrowser`它没有突出显示行。在“NSTableView”中，可以使用突出显示行

```
 - [NSTableView selectRowIndexes:byExendingSelection:]

  - (void)selectRowIndexes:(NSIndexSet *)rowIndexes inColumn:(NSInteger). 
```

是否有任何 api 可以突出显示中的行`NSBrowser`？我想突出显示没有在浏览器上单击鼠标的行，我有一些已知的索引我想在我的自定义方法中突出显示这些行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:03:20.187

要选择第一列中的前五行：

```
NSIndexSet *indexes = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0,4)];
[myNSBrowser selectRowIndexes:indexes inColumn:0]; 
```

要选择第一列中的第四行：

```
[myNSBrowser selectRow:3 inColumn:0]; 
```

# macos - 我所有的浏览器搜索都被劫持了

> ID：10942722
> 
> 赞同：-1
> 
> 时间：2012-06-08T03:27:38.643
> 
> 标签：macos, firefox, safari

我遇到了一个已知问题，即 Firefox 的默认搜索由于某种原因发生了变化。我的改为[http://assist2.searchguide.frontier.com/search?qo=](http://assist2.searchguide.frontier.com/search?qo=) &rn=n9HuoSl_-11Ytte 。重置所有用户偏好并没有做任何事情。关于页面看起来正确，并在其中查找类似于我被定向到的网站的字符串，但没有结果。我尝试打开 Safari，它的搜索现在也有同样的问题。我在 Mac OS Lion 上。我不知道还能尝试什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:32:41.167

在您的地址栏中，输入：`about:config`

在过滤器搜索框内，输入： `browser.search.defaultenginename`

双击该条目（或右键单击并选择“修改”），然后输入您希望作为默认搜索引擎的搜索引擎的名称。它必须是您已经安装的，并确保您正确输入了名称。

现在，如果您输入“Google”或“Yahoo”，重新启动 Firefox，当您的浏览器重新启动时，您将看到您选择作为默认搜索引擎的搜索引擎。

# asp.net-mvc-3 - 将正确的类型从控制器传递到视图？

> ID：10942729
> 
> 赞同：0
> 
> 时间：2012-06-08T03:28:18.800
> 
> 标签：asp.net-mvc-3

尝试加载视图时收到此错误消息：

```
The model item passed into the dictionary is of type
'System.Data.Entity.Infrastructure.DbQuery`1[<>f__AnonymousType0`2[System.Int32,System.String]]',
but this dictionary requires a model item of type
'System.Collections.Generic.IEnumerable`1[HelloWorld.Models.P]'. 
```

可能是因为没有将正确的类型从控制器传递给视图吗？

这是模型：

```
public class P
{
    [Key]
    public virtual int ImportID { set; get; }
    public virtual string MicroName { set; get; }
} 
```

这是 DBContext 定义：

```
public DbSet<P> Ps { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
  //REMAPPING TABLE NAMES 
  modelBuilder.Entity<P>()
.ToTable("SomeTable_With_Really_LongName_tbl");

base.OnModelCreating(modelBuilder);
} 
```

这是控制器动作：

```
public ActionResult ListP()
{

var model = (from p in _db.Ps
 select new
 {
p.ImportID,
 p.MicroName
 }).Take(10);

return View(model);
} 
```

这是视图：

```
@model IEnumerable<HelloWorld.Models.P>

@{
    ViewBag.Title = "List P";
}

<h2>List P</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            ImportID
        </th>
        <th>
            MicroName
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ImportID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MicroName)
        </td>
        <td>
        @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
        @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
    </td>
</tr>
}

</table> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:47:31.237

认为

```
var model = (from p in _db.Ps
 select new
 {
p.ImportID,
 p.MicroName
 }).Take(10); 
```

正在返回应该返回 P 的枚举器的 Import ID 和 Name

```
var model = _db.Ps.OrderBy(f => f.[FieldName]).Take(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:37:37.453

您收到此异常是因为 View 需要一个 type 的模型`IEnumerable<HelloWorld.Models.P>`，但您正在向它传递一个模型，该模型是 Anonymous Type 的集合。

在控制器中试试这个：

```
public ActionResult ListP()
{
    var model = (from p in _db.Ps
                select p).Take(10);

    return View(model);
} 
```

或者

```
public ActionResult ListP()
{
    var model = (from p in _db.Ps
                select new P
                {
                    ImportID = p.ImportID,
                    MicroName = p.MicroName
                }).Take(10);

    return View(model);
} 
```

# python - 解析源代码（Python）方法：Beautiful Soup、lxml、html5lib 的区别？

> ID：10942730
> 
> 赞同：1
> 
> 时间：2012-06-08T03:28:49.590
> 
> 标签：python, parsing, beautifulsoup, lxml

我有一个很大的 HTML 源代码，我想解析（约 200,000 行）行，而且我相当肯定整个过程中存在一些糟糕的格式。我一直在研究一些解析器，似乎 Beautiful Soup、lxml、html5lib 是最受欢迎的。通过阅读这个网站，似乎 lxml 是最常用和最快的，而 Beautiful Soup 速度较慢，但​​会导致更多的错误和变化。

我对 Beautiful Soup 文档[http://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)以及 BeautifulSoup(markup, "lxml") 或 BeautifulSoup(markup, html5lib) 等命令有点困惑。在这种情况下，它是否同时使用 Beautiful Soup 和 html5lib/lxml？速度在这里不是真正的问题，但准确性是。最终目标是使用 urllib2 解析获取源代码，并从文件中检索所有文本数据，就像我只是复制/粘贴网页一样。

PS无论如何解析文件而不返回网页视图中不存在的任何空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T03:44:13.583

我的理解（在一些事情上使用 BeautifulSoup）是它是像 lxml 或 html5lib 这样的解析器的包装器。使用指定的任何解析器（我相信默认是 HTMLParser，python 的默认解析器），BeautifulSoup 会创建一个标签元素树，这样可以很容易地导航和搜索 HTML 以查找在标签中继续存在的有用数据。如果您真的只需要网页中的文本而不是来自特定 HTML 标记的更具体的数据，您可能只需要类似于以下的代码片段：

```
from bs4 import BeautifulSoup
import urllib2
soup = BeautifulSoup(urllib2.urlopen("http://www.google.com")
soup.get_text() 
```

get_text 对于复杂的网页不是很好（它偶尔会得到随机的 javascript 或 css），但如果你掌握了如何使用 BeautifulSoup 的窍门，那么只获取你想要的文本应该不难。

出于您的目的，您似乎不需要担心让其他解析器之一与 BeautifulSoup（html5lib 或 lxml）一起使用。BeautifulSoup 可以自己处理一些草率的问题，如果不能，它会给出一个关于“格式错误的 HTML”或类似内容的明显错误，这将表明安装 html5lib 或 lxml。

# javascript - 使用下拉菜单选项创建文本字段的 Javascript

> ID：10942731
> 
> 赞同：1
> 
> 时间：2012-06-08T03:29:08.313
> 
> 标签：javascript, html, jquery, drop-down-menu, jquery-events

一旦从下拉框中选择了某个值，我一直在使用一些 Javascript 创建一个文本字段，但是现在我对 Javascript 的了解有限，因为我需要对其进行编辑，以便新的下拉选项也创建一个文本字段。当我尝试编辑时，它似乎不起作用。这是我尝试使用的 js：

```
$(".claim").change(function() {
    $(".area").find(".field").remove();
    //or
    $('.area').remove('.field');
    if ($(this).val() == "Insurance") {
        $(".area").append("<input class='field' name='cost' type='text' placeholder='Cost' />");

    }
    if ($(this).val() == "Damage &lt;$100") {
        $(".area").append("<input class='field' name='cost' type='text' placeholder='Cost' />");

    }
}); 
```

这是html下拉框：

```
<div id="area" class="area">

    <strong>Cases:</strong><input name="cases" type=text  placeholder="Cases ID" maxlength="7" style="width:129px;">
    <br />
    <strong>Claim:</strong>
    <select class="claim" id="claim" name="claim"> 
    <option value="">Select a Claim</option>
    <option value="Insurance">Insurance</option>  
    <option value="Warrenty">Warrenty</option>
    <option value="Damage &lt;$100">Damage &lt;$100</option>
    </select> 
```

我试图编辑 Javascript 和其他一些东西，但似乎没有一个工作。我猜它很简单，但我现在不确定是否使用 Javascript，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:37:09.947

采用

```
$(this).val() == "Damage <$100" 
```

代替

```
$(this).val() == "Damage &lt;$100" 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/177/)**

### 笔记

您正在比较字符串，因此不需要任何特殊字符。

### 多一点

而不是`$(this).val()`use `this.value`，会更快。

# mysql - 一种从Mysql读取表数据到Pig的方法

> ID：10942739
> 
> 赞同：6
> 
> 时间：2012-06-08T03:30:19.773
> 
> 标签：mysql, hadoop, apache-pig

大家都知道 Pig 支持[DBStorage](http://svn.apache.org/viewvc/pig/branches/branch-0.8/contrib/piggybank/java/src/main/java/org/apache/pig/piggybank/storage/DBStorage.java?view=markup)，但他们只支持从 Pig 到 mysql 这样的加载结果

```
STORE data INTO DBStorage('com.mysql.jdbc.Driver', 'dbc:mysql://host/db', 'INSERT ...'); 
```

但是请告诉我从mysql中读取表的方法

```
data = LOAD 'my_table' AS DBStorage('com.mysql.jdbc.Driver', 'dbc:mysql://host/db', 'SELECT * FROM my_table'); 
```

这是我的代码

```
public class DBLoader extends LoadFunc {
    private final Log log = LogFactory.getLog(getClass());
    private ArrayList mProtoTuple = null;
    private Connection con;
    private String jdbcURL;
    private String user;
    private String pass;
    private int batchSize;
    private int count = 0;
    private String query;
    ResultSet result;
    protected TupleFactory mTupleFactory = TupleFactory.getInstance();

    public DBLoader() {
    }

    public DBLoader(String driver, String jdbcURL, String user, String pass,
            String query) {

        try {
            Class.forName(driver);
        } catch (ClassNotFoundException e) {
            log.error("can't load DB driver:" + driver, e);
            throw new RuntimeException("Can't load DB Driver", e);
        }
        this.jdbcURL = jdbcURL;
        this.user = user;
        this.pass = pass;
        this.query = query;

    }

    @Override
    public InputFormat getInputFormat() throws IOException {
        // TODO Auto-generated method stub
        return new TextInputFormat();
    }

    @Override
    public Tuple getNext() throws IOException {
        // TODO Auto-generated method stub
        boolean next = false;

        try {
            next = result.next();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (!next)
            return null;
        int numColumns = 0;
        // Get result set meta data
        ResultSetMetaData rsmd;
        try {
            rsmd = result.getMetaData();
            numColumns = rsmd.getColumnCount();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        for (int i = 0; i < numColumns; i++) {

            try {
                Object field = result.getObject(i);

                switch (DataType.findType(field)) {
                case DataType.NULL:

                    mProtoTuple.add(null);

                    break;

                case DataType.BOOLEAN:
                    mProtoTuple.add((Boolean) field);

                    break;

                case DataType.INTEGER:
                    mProtoTuple.add((Integer) field);

                    break;

                case DataType.LONG:
                    mProtoTuple.add((Long) field);

                    break;

                case DataType.FLOAT:
                    mProtoTuple.add((Float) field);

                    break;

                case DataType.DOUBLE:
                    mProtoTuple.add((Double) field);

                    break;

                case DataType.BYTEARRAY:
                    byte[] b = ((DataByteArray) field).get();
                    mProtoTuple.add(b);

                    break;
                case DataType.CHARARRAY:
                    mProtoTuple.add((String) field);

                    break;
                case DataType.BYTE:
                    mProtoTuple.add((Byte) field);

                    break;

                case DataType.MAP:
                case DataType.TUPLE:
                case DataType.BAG:
                    throw new RuntimeException("Cannot store a non-flat tuple "
                            + "using DbStorage");

                default:
                    throw new RuntimeException("Unknown datatype "
                            + DataType.findType(field));

                }

            } catch (Exception ee) {
                throw new RuntimeException(ee);
            }
        }

        Tuple t = mTupleFactory.newTuple(mProtoTuple);
        mProtoTuple.clear();
        return t;

    }

    @Override
    public void prepareToRead(RecordReader arg0, PigSplit arg1)
            throws IOException {

        con = null;
        if (query == null) {
            throw new IOException("SQL Insert command not specified");
        }
        try {
            if (user == null || pass == null) {
                con = DriverManager.getConnection(jdbcURL);
            } else {
                con = DriverManager.getConnection(jdbcURL, user, pass);
            }
            con.setAutoCommit(false);
            result = con.createStatement().executeQuery(query);
        } catch (SQLException e) {
            log.error("Unable to connect to JDBC @" + jdbcURL);
            throw new IOException("JDBC Error", e);
        }
        count = 0;
    }

    @Override
    public void setLocation(String location, Job job) throws IOException {
        // TODO Auto-generated method stub

        //TextInputFormat.setInputPaths(job, location);

    }

    class MyDBInputFormat extends InputFormat<NullWritable, NullWritable>{

        @Override
        public RecordReader<NullWritable, NullWritable> createRecordReader(
                InputSplit arg0, TaskAttemptContext arg1) throws IOException,
                InterruptedException {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public List<InputSplit> getSplits(JobContext arg0) throws IOException,
                InterruptedException {
            // TODO Auto-generated method stub
            return null;
        }

    }

} 
```

我尝试了很多次写UDF但没有成功.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:39:59.467

就像你说的，`DBStorage`只支持将结果保存到数据库。

要从 MySQL 加载数据，您可以查看一个名为[sqoop](http://sqoop.apache.org/)的项目（将数据从数据库复制到 HDFS），或者您可以执行 mysql 转储，然后将文件复制到 HDFS。这两种方式都需要一些交互，并且不能在 Pig 内部直接使用。

第三种选择是考虑编写 Pig LoadFunc（您说您尝试编写 UDF）。这应该不会太难，您需要传递与 DBStorage 相同的选项（驱动程序、连接凭据和要执行的 SQL 查询），并且您也可以使用一些结果集元数据检查来自动生成模式。

# c++ - cv::Moments 的 OpenCV C++ 用法

> ID：10942742
> 
> 赞同：5
> 
> 时间：2012-06-08T03:31:03.410
> 
> 标签：c++, opencv, image-processing

我尝试使用 OpenCV C++ 的 cv::Moments 找到质心。无论我提交什么论据，我收到的都是零。很明显，我做了一些非常简单的错误。代码输出：

```
23 of 500 elements in unit 3
point values 2.976444 18.248287
matrix size 23
moments 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000
moments 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 0.000000 
```

和代码：

```
printf("%d of %d elements in unit %d\n",k,number_of_features,i);
cv::Mat x(k, 1, cv::DataType<cv::Point2f>::type);
k=0;
for(int j=0;j <number_of_features;j++) {
    if(i  == labels.at<int>(j)) {
        x.at<cv::Point2f>(k++) = samples.at<cv::Point2f>(i); 
    }
}
printf("point values %f %f\n", x.at<cv::Point2f>(0).x,x.at<cv::Point2f>(0).y);
cv::Size s=x.size();
printf("matrix size %d\n",s.height);
cv::Moments m=cv::moments(x);
printf("moments %f %f %f %f %f %f %f %f\n",m.m00,m.m01,m.m20,m.m11,m.m02,m.m30,m.m21,m.m03);
double h[7];
cv::HuMoments(m,h);
printf("moments %f %f %f %f %f %f %f\n",h[0],h[1],h[2],h[3],h[4],h[5],h[6]); 
```

奇怪的是，我无法从 Google 找到任何相同的代码示例。我所看到的只是 C 风格的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T09:32:00.437

使用时刻来找到质心有点过分恕我直言。您可以使用以下算法来执行此操作：

```
sumX = 0; sumY = 0;
size = array_points.size;
if(size > 0){

    foreach(point in array_points){
        sumX += point.x;
        sumY += point.y;
    }

 centroid.x = sumX/size;
 centroid.y = sumY/size;
} 
```

或者借助 Opencv 的 boundingRect：

```
//pseudo-code:

Rect bRect = Imgproc.boundingRect(array_points);

centroid.x = bRect.x + (bRect.width / 2);
centroid.y = bRect.y + (bRect.height / 2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T09:09:00.747

我建议你访问官方教程。首先学习并运行该代码。

[http://docs.opencv.org/doc/tutorials/imgproc/shapeescriptors/moments/moments.html#moments](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/moments/moments.html#moments)

一旦成功，尝试实现任何你想要的。

# python - Python：将列表转换为字典？

> ID：10942743
> 
> 赞同：2
> 
> 时间：2012-06-08T03:31:07.407
> 
> 标签：python

我有一个清单：

```
['100 ug/ml', '50 ug/ml', '25 ug/ml', '12.5 ug/ml', '6.25 ug/ml', '3.125 ug/ml', 
 '1.5625 ug/ml', '0 ug/ml'] 
```

我想把它变成一个字典，其中这些数字是具有空值的键：

```
growth_data = {'100 ug/ml': '', '50 ug/ml': '', '25 ug/ml': '', etc...} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T03:34:47.317

你正在寻找`dict.fromkeys()`方法。第一个参数是要用作字典中的键的列表（或可迭代的）；第二个（可选）是每个键的值。如果你没有给出第二个参数，`None`将是每个键的值。小心使用可变对象（如`[]`）作为默认值，因为它将是所有键之间共享的同一个实例。

```
l = ['100 ug/ml', '50 ug/ml', '25 ug/ml', '12.5 ug/ml', '6.25 ug/ml',
     '3.125 ug/ml', '1.5625 ug/ml', '0 ug/ml']

growth_data = dict.fromkeys(l, '') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T03:33:30.233

假设 x 是您的列表，请执行`dict((a, '') for a in x)`.

# java - 已安装的包可以移动到 SDCard

> ID：10942749
> 
> 赞同：2
> 
> 时间：2012-06-08T03:32:02.807
> 
> 标签：java, android, debugging, package, sd-card

我得到了已安装软件包的列表，我如何找出可以移动到 sdcard 的软件包？

```
List<PackageInfo> list = pm.getInstalledPackages(0);
for (int i = 0; i < list.size(); i++) {

} 
```

* * *

```
 if (_pm != null) {
        List<PackageInfo> list = _pm.getInstalledPackages(0);
        for (int i = 0; i < list.size(); i++) {
            PackageInfo current  = list.get(i);
            long pkgSize = new File(current.applicationInfo.sourceDir).length();
            String pkgName = current.packageName;
            String appName = current.applicationInfo.loadLabel(_pm).toString();
            Drawable appIcon = current.applicationInfo.loadIcon(_pm);

            //if (pInfo.installLocation != PackageInfo.INSTALL_LOCATION_INTERNAL_ONLY)//?

            PackageItem pi = new PackageItem(pkgName, pkgSize, appIcon, appName);

            if (_locationMode == LOCATION_PHONE) {
                if (!onSdCard(pkgName)) {
                    _adapter.add(pi);
                }
            } else {
                if (onSdCard(pkgName)) {
                    _adapter.add(pi);
                }
            }
        }
    } 
```

我既无法从当前找到 .installLocation，也无法从 PackageInfo 中找到 .INSTALL_LOCATION_INTERNAL_ONLY。有什么问题？

* * *

我既无法从当前找到 .installLocation，也无法从 PackageInfo 中找到 .INSTALL_LOCATION_INTERNAL_ONLY。有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T03:23:28.543

[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/content/pm/PackageInfo.java#PackageInfo.0installLocation)什么都知道，

```
List<PackageInfo> list = pm.getInstalledPackages(PackageManager.GET_ACTIVITIES);

for (PackageInfo pInfo : list) {        
    if (pInfo.installLocation != PackageInfo.INSTALL_LOCATION_INTERNAL_ONLY) {
        // then it can be moved to the SD card
    } else {
        // otherwise, it can only be installed on internal storage
    }
} 
```

# mysql - 查询在生产中快速，在过去一周的开发中变得缓慢

> ID：10942751
> 
> 赞同：1
> 
> 时间：2012-06-08T03:32:29.780
> 
> 标签：mysql

我有一个查询，查看用户（m_id）查看过的所有课程（o_id）、他们给它的最后评分（第一个子查询）和最后一次评分（第二个子查询）

该查询在生产中很快，但最近在我的开发机器上它停止了，我今天发现它花了**1800 秒**。

```
SELECT o_id i , UNIX_TIMESTAMP(mo_access_date) a, mo_complete c, mo_quizscore q,
  (
    SELECT mlr_rating 
    FROM member_lesson_rating 
    WHERE m_id=mo.m_id&&o_id=mo.o_id 
    ORDER BY mlr_id DESC 
    LIMIT 1
  ) r,
  (
    SELECT if(mlr_rating > 0, UNIX_TIMESTAMP(mlr_created),null) x 
    FROM member_lesson_rating  
    WHERE m_id=mo.m_id&&o_id=mo.o_id 
    ORDER BY mlr_id DESC 
    LIMIT 1
  ) u
FROM member_object_tbl mo
WHERE m_id=64206 
```

和描述（

```
+----+--------------------+----------------------+-------+------------------+----------+---------+-------+------+-------------+
| id | select_type        | table                | type  | possible_keys    | key      | key_len | ref   | rows | Extra       |
+----+--------------------+----------------------+-------+------------------+----------+---------+-------+------+-------------+
|  1 | PRIMARY            | mo                   | ref   | opt_cols,m_id    | opt_cols | 4       | const |   99 |             |
|  3 | DEPENDENT SUBQUERY | member_lesson_rating | index | m_id,m_id_2,o_id | PRIMARY  | 4       | NULL  |    1 | Using where |
|  2 | DEPENDENT SUBQUERY | member_lesson_rating | index | m_id,m_id_2,o_id | PRIMARY  | 4       | NULL  |    1 | Using where |
+----+--------------------+----------------------+-------+------------------+----------+---------+-------+------+-------------+ 
```

分析查询表明每个子查询在我的测试中占用一秒钟......（即1 * 99）

和创建表

```
CREATE TABLE `member_lesson_rating` (
  `mlr_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `m_id` int(10) unsigned NOT NULL,
  `o_id` int(10) unsigned NOT NULL,
  `mlr_created` datetime NOT NULL,
  `mlr_rating` tinyint(4) NOT NULL,
  PRIMARY KEY (`mlr_id`),
  KEY `m_id` (`m_id`,`o_id`),
  KEY `m_id_2` (`m_id`),
  KEY `o_id` (`o_id`)
) ENGINE=MyISAM AUTO_INCREMENT=2882202 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

**更新：**不会导致任何问题的新查询

```
SELECT
  mo.o_id i , 
  UNIX_TIMESTAMP(mo_access_date) a, 
  mo_complete c, 
  mo_quizscore q,
  if(mlr_rating > 0, UNIX_TIMESTAMP(mlr_created),null) u,
  mlr_rating r
FROM 
  (SELECT * FROM member_object_tbl WHERE m_id=?) mo
LEFT JOIN
  (  
    SELECT * 
    FROM (
      SELECT * 
      FROM member_lesson_rating 
      WHERE m_id=?
      ORDER BY mlr_id DESC
    ) mlr2 
    GROUP BY o_id
  ) mlr
ON mo.o_id=mlr.o_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:43:17.860

依赖子查询在扩展方面很糟糕；我认为您可以通过首先选择最大值`mlr_id`然后再次将其加入自身以获取`mlr_rating`相关字段来解决此问题。

```
SELECT tmp.*, r2.mlr_rating, IF(r2.mlr_rating > 0, UNIX_TIMESTAMP(r2.mlr_created), NULL) x FROM 
  (SELECT o_id i, UNIX_TIMESTAMP(mo_access_date) a, mo_complete c, mo_quizscore q,
      MAX(mlr_id) AS max_mlr_id
      FROM member_object_tbl mo
      INNER JOIN member_lesson_rating r ON r.m_id = mo.m_id AND r.o_id = mo.o_id
      WHERE m_id=64206
      GROUP BY m.o_id
  ) tmp
  INNER JOIN member_lesson_rating r2 ON r2.mlr_id = tmp.max_mlr_id 
```

# c# - System.Net.Mail.MailAddress 验证缺少 TLD 的电子邮件，认为 me@there 有效

> ID：10942752
> 
> 赞同：0
> 
> 时间：2012-06-08T03:32:33.507
> 
> 标签：c#

认为 me@there 有效。不需要 TLD 吗？

```
try
{
    foreach (var email in addresses)
    {
        var addr = new System.Net.Mail.MailAddress(email);
    }
}
catch (Exception)
{
    return "Invalid email address";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:34:36.813

根据规范

[http://www.ietf.org/rfc/rfc822.txt](http://www.ietf.org/rfc/rfc822.txt)

确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:55:51.647

> 不需要 TLD 吗？

不。

看，仅仅因为互联网这样做，并不意味着我不能在我自己的网络中使用直接主机名。特别是考虑到默认 DNS 域（从 IP 设置中添加）可能会“重新映射”@there 到 @there.local 透明；）

# java - JDBC 连接池建议

> ID：10942762
> 
> 赞同：1
> 
> 时间：2012-06-08T03:33:59.200
> 
> 标签：java, mysql, jdbc, database-connection, connection-pooling

我正在用 java 开发一个应用程序来处理数据并将其上传到 MySQL 数据库。使用这个应用程序，我遍历目录中需要处理的所有文件。对于文件的每一行，我将该行中的数据存储到各种变量中，并进行一些转换以使所有数据准备好上传到我的数据库。然后我计划使用 PreparedStatement 和 INSERT 查询将该行的数据上传到数据库。

我不熟悉适合我的情况的最佳做法。我正在自学这一点，所以我正在寻找一些指导，以确保我第一次正确地做到这一点。

仅仅在应用程序运行时开始时打开一个连接（即打开一次）是否不合适？对于每个插入查询，我将创建并关闭 PreparedStatement，但我只会让连接保持打开状态，直到完成所有文件的处理。

我在其他地方读过有关连接池的信息，但我不知道它是否适用于我的情况。我知道频繁打开和关闭连接很昂贵，但我不应该只打开一次并在该连接下运行所有​​查询吗？

如果您建议使用连接池，您会针对我的情况推荐什么服务。最好很容易快速掌握。我的项目有点时间敏感。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T03:53:33.603

如果您正在开发桌面 Java 应用程序，您将不会使用连接池。连接池由 Java 应用程序服务器（Tomcat、JBoss、Glassfish）管理，在桌面 Java 应用程序中不可用。

如果您只进行一次更新，保持连接打开是合理的。

此外，批量更新对您来说是个好主意：

```
String connectionURL = "jdbc:mysql://localhost:3306/database";
Connection con = null;
PreparedStatement stmt = null;

try {
    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection(connectionURL);
    stmt = con.prepareStatement(statement);

    for (Object o : list) {    // this is a list of your Java entity class
        stmt.setString(1, "foo");    // this is to update the parameters in the PreparedStatement
        stmt.setString(2, "bar");

         stmt.addBatch();     //  this adds the PreparedStatement to the batch of statements to execute
    }

    stmt.executeBatch();

} catch (SQLException e) {
    e.printStackTrace();
} catch (Exception e) {
    e.printStackTrace();
} finally {
    if (stmt != null) {
        stmt.close();
    }
    if (con != null) {
        con.close();
    }
} 
```

批量更新的想法是有一个准备好的语句，您可以在其中简单地更改参数，并将“新”语句添加到一批语句中。然后，您可以在调用 stmt.executeBatch() 时一次性执行它们

但是，如果您有许多这样的语句，我建议您一次执行大约 30 条语句。否则，如果程序崩溃/失败，您将陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:39:35.270

这听起来像是您正在实施的批处理过程。在这种情况下，与数据库的专用连接是更好的解决方案。

# maven - 我想使用 Maven 使 manifest.mf 文件包含两个类路径

> ID：10942763
> 
> 赞同：0
> 
> 时间：2012-06-08T03:34:01.743
> 
> 标签：maven, maven-plugin

我想使用 Maven 使 manifest.mf 文件包含两个类路径

pom.xml

```
<manifest>
<addClasspath>true</addClasspath>
<classpathPrefix>./dependency</classpathPrefix>
<mainClass>com.sds.afi.run.SimsMain</mainClass>
</manifest> 
```

然后，生成 manifest.mf，如下所示。

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: arnold
Build-Jdk: 1.6.0_27
Main-Class: com.sds.afi.run.SimsMain
Class-Path: ./dependency/mina-core-1.1.7.jar ./dependency/mina-integra
 tion-spring-1.1.7.jar ./dependency/mina-filter-ssl-1.1.7.jar ./depend
 ency/spring-integration-core-2.0.4.RELEASE.jar ./dependency/spring-in
 tegration-mail-2.0.4.RELEASE.jar ./dependency/spring-context-support-
 3.0.5.RELEASE.jar ./dependency/spring-integration-ip-2.0.4.RELEASE.ja
 r ./dependency/spring-integration-stream-2.0.4.RELEASE.jar ./dependen
 cy/commons-lang-2.6.jar 
```

**我想附上“。” 最后。

我怎么解决这个问题？谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:50:02.117

您可以添加其他条目这样做

```
<configuration>
    <archive>
        <manifest>
            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
            <addClasspath>true</addClasspath>
            <mainClass>com.sds.afi.run.SimsMain</mainClass>
        </manifest>
        <manifestEntries>
            <Class-Path>.</Class-Path>
        </manifestEntries>
    </archive>
</configuration> 
```

但我不确定这是否有意义......

请告诉我们您为什么要添加此内容。

此外，这个问题已经争论了很多时间。请使用搜索链接： [https ://stackoverflow.com/search?q=adding+.+classpath+manifest+maven&submit=search](https://stackoverflow.com/search?q=adding+.+classpath+manifest+maven&submit=search)

您可能会看到：[Maven - 如何将任意类路径条目添加到 jar？](https://stackoverflow.com/questions/1510071/maven-how-can-i-add-an-arbitrary-classpath-entry-to-a-jar)

答案似乎是一样的：[https ://stackoverflow.com/a/5893391/1047365](https://stackoverflow.com/a/5893391/1047365)

# javascript - sencha touch ajax 请求调用了两次

> ID：10942767
> 
> 赞同：0
> 
> 时间：2012-06-08T03:34:53.053
> 
> 标签：javascript, ajax, sencha-touch-2

我的 Sencha Touch 2 应用程序有几个地方可以在单击按钮时发出 AJAX 请求。这是非常标准的东西：

```
console.log('Saving Billing Item at' + strURL);
Ext.Ajax.request({
    url: strURL,
    method: 'GET',
    success: function (result, request) {
        var resultJson = Ext.decode(result.responseText);
        console.log('Response from Saving BillingItem:' + result.responseText);
        data = Ext.decode(result.responseText);
        if(data.ErrorMessage.indexOf("successfully") == -1) {
            Ext.Msg.alert('Error!', 'Error saving Billing Item:' + data.ErrorMessage);
        } else {
            Ext.StoreMgr.get('BillingItemList').load();
            Ext.ComponentManager.get('MainMenu').animateActiveItem(23, {
                type: 'slide',
                direction: 'right'
            }); //back to list
        }
        Ext.ComponentManager.get('BillingItemSaveButton').setDisabled(false);
    },
    failure: function (result, request) {
        Ext.Msg.alert('Error!', 'There was a problem while saving the Billing Item. Please check your input and try again.');
        Ext.ComponentManager.get('BillingItemSaveButton').setDisabled(false);
    }
}); 
```

但是请求被发送到服务器 TWICE。

-点击事件肯定只被触发一次！

- 如果我手动浏览到 strURL 中的 URL，服务器端函数只会触发一次，所以它似乎不是服务器端的任何东西。

但是（除了url相同）应用程序中其他地方的ajax请求只触发一次，我看不出有任何区别！

我该如何去追踪这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T08:33:53.613

我可以通过在我的服务中从 doGet 重定向到 doPost 来重现该行为，例如：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {       
    System.out.println("In doGet");
    doPost(request,response);
}
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {      
    System.out.println("In doPost");
} 
```

结果是：

```
In doPost
In doGet
In doPost 
```

我记得有些东西只适用于 EXTJS 的 POST 方法，但我现在不记得了。话虽如此，您的 servlet 不会运行两次，而是同时运行 doGet 和 doPost。

# ruby-on-rails - 首先启动 Rails 站点 localhost 或远程主机？

> ID：10942769
> 
> 赞同：0
> 
> 时间：2012-06-08T03:35:57.750
> 
> 标签：ruby-on-rails

我有 PHP5 技能，现在想开始学习 Rails。我有一个 Hostgator 的婴儿计划，我已经开始通过一些指南来设置炼油厂。我担心的是我正在以缓慢而愚蠢的方式做事。谁能建议如果我在本地计算机上创建 Rails RefineryCMS 站点然后迁移到远程主机会更好，或者这对新人来说会更糟吗？试图让我的投资组合网站尽快上线。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:00:31.457

要开发一个新应用程序，您应该始终在本地启动它，因为如果您在开始使用 CMS 之前尝试了解 Rails，那么您刚刚开始会更好。

Hostgator 对 Rails 的支持很糟糕，但[http://www.heroku.com/](http://www.heroku.com/)是有史以来最好的服务器，它对小东西是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:38:37.330

您可以在本地主机上本地运行它，以便在开发时对其进行测试。准备就绪后，您可以部署到远程主机。

# php - 如何使用 AJAX POST 多个 JQuery 值并避免对象错误

> ID：10942771
> 
> 赞同：1
> 
> 时间：2012-06-08T03:36:11.433
> 
> 标签：php, javascript, ajax, jquery

我的 JQuery 代码正在发布，因为成功功能正在触发。问题是 PHP $_POST 请求没有接收到数据。出于调试目的，我尝试使用 alert(data) 来显示我希望的数组，并告诉我是否有办法解析正在传递的内容。相反，警告框只显示“[object Object]”。我需要将这些数据转换为可以在 PHP 中用于回调函数的表单。

这是JQuery：

```
$(document).ready(function(){
//JQuery for the submission of a new list item.
    $('input.[class$="-arrow"]').click(function(e){
        e.preventDefault(); //put e in function.
        var ajaxurl = '<?php echo admin_url('admin-ajax.php'); ?>';

        if ($(this).hasClass('up-arrow')) {
            var arrowdirection = 'up';
            var entry = $(this).val();
        }
        else if ($(this).hasClass('down-arrow')) {
            var arrowdirection = 'down';
            var entry = $(this).val();
        }

        var data = {
            action: 'cb_lud_arrow_action',
            arrow: arrowdirection,
            entryID: entry
        };

        $.ajax ({
            type: 'POST',
            url: ajaxurl,
            data: data,
            datatype: "text",
            success: function(){
                alert(data);
                alert('Thanks for the vote!'); //for debug. Alert is showing! Still not submitting data to database though.
                $('.line-items-rows').fadeOut('fast').delay(1000).fadeIn('fast');
            }
        });
});
}); 
```

这是回调 PHP 函数（它没有按应有的方式更新数据库）：

```
function cb_lud_arrow_callback(){       
    //Redefine basic variables
    global $wpdb;
    $cb_lud_prefix = $wpdb->prefix;
    $cb_lud_table = $cb_lud_prefix . 'cb_list_up_down';
//find the values posted to the form
    $cb_lud_arrow_keys = array_keys($_POST['arrow']);
    $cb_lud_arrow_values = array_values($_POST['entryID']);
    $cb_lud_entry_id = (int)$cb_lud_arrow_values[2];

        //set some variables to "up" or "down" depending on form input.
            if (strpos($cb_lud_arrow_keys[2], 'up-ID') > 0) {
                $cb_lud_arrow_direction = "up";
            }
            else if (strpos($cb_lud_arrow_keys[2], 'down-ID') > 0) {
                $cb_lud_arrow_direction = "down";
            }
            else {
                $cb_lud_arrow_direction = "nothing";
            }

        //Create the update query that will record the up and down votes.
            //Up votes
            if ($cb_lud_arrow_direction == "up" && $cb_lud_arrow_direction != "nothing") {
                $wpdb->query('UPDATE '.$cb_lud_table.' SET up_votes=up_votes+1
                    WHERE entry_ID='.$cb_lud_entry_id.'');
            }
            //Down votes
            else if ($cb_lud_arrow_direction == "down" && $cb_lud_arrow_direction != "nothing") {
                $wpdb->query('UPDATE '.$cb_lud_table.' SET down_votes=down_votes+1
                    WHERE entry_ID='.$cb_lud_entry_id.'');
            }   

die(); // this is required to return a proper result
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:41:24.253

使用 Chrome 或 Firefox 来调试 JQuery。CTRL+SHIFT+J 在 chrome 中获取调试器不确定 firefox 但它在选项菜单中。

然后您将能够看到这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:43:04.850

您忘记了成功函数定义中的参数数据吗？

```
success: function(data){... 
```

但不是

```
success: function() { ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T03:58:46.340

使用 Firefox 并安装 Firebug。然后转到 Firebug 控制台并执行 jQuery 事件。它将向您显示所有 AJAX 事务、发送的内容、标题、帖子等，以及收到的内容。

此外，您可以真正缩短您的 AJAX 调用：

```
$.post(ajaxurl, data, function(data){
  $('.line-items-rows').fadeOut('fast').delay(1000).fadeIn('fast');
}); 
```

# asp.net - .Net 日期转换为 RSS 日期

> ID：10942774
> 
> 赞同：0
> 
> 时间：2012-06-08T03:36:27.280
> 
> 标签：asp.net, .net, rss, xmltextwriter

我有一个字符串格式的日期，

```
 mm/dd/yyyy 
```

我想将其转换为 RSS 日期格式，例如，

```
friday, june 01, 2012, 12:11:25PM 
```

我想将这个基本上是 pubDate 的日期值添加到 RSS pubDate 标签，如下所示：

```
writer.WriteElementString("pubDate",pubDate); 
```

如何将此字符串转换为 pubDate？有什么建议么？

输出/输出

```
 <?xml version="1.0" encoding="utf-8"?><rss version="2.0">
<channel>
<title>About RSS</title>
<link>http://localhost:27549/TTTT.aspx</link>
<description>The latest news</description>
<image><url>http://localhost:27549/images/ttt_logo.jpg</url></image>
<item><title>ABC</title><link>http://localhost:27549/Viewttt.aspx?id=217</link><description>zzzzzzzzzzzzzzzzzzz...</description><pubDate>Tuesday, August 30, 2011, 00:00:00AM</pubDate></item></channel></rss> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:39:40.413

首先转换为 DateTime 变量。为此，您可以使用`DateTime.ParseExact`.

然后您可以使用 ToString 方法以您想要的任何格式输出日期。这是[自定义格式的列表](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

我将发布一个示例来帮助您。

```
string str = "11/10/1984";
DateTime dt = DateTime.ParseExact(str, "dd/MM/yyyy", CultureInfo.InvariantCulture);
string formatted = dt.ToString("dddd, MMMM dd, yyyy, HH:mm:sstt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:40:13.710

```
var dt=DateTime.ParseExact("06/08/2012", "MM/dd/yyyy", CultureInfo.InvariantCulture)
writer.WriteElementString("pubDate",dt.ToString("U")); // or dt.ToString("F") 
```

# android - 在 Android 中实现无标记增强现实

> ID：10942776
> 
> 赞同：1
> 
> 时间：2012-06-08T03:36:59.043
> 
> 标签：android, augmented-reality, gyroscope

我正在尝试为 Android 实现一个简单的增强现实工具。它所需要做的就是将我的位置和设备方向以及另一台设备的位置作为输入，并在适当的位置以适当的大小显示一个带有图标的相机视图。

我被困在两个地方：

我编写了代码来获取设备当前方位角、俯仰角和滚动的更新。代码如下所示：

```
 private final SensorEventListener goodListener = new SensorEventListener() {
    private float[] magneticValues;
    private float[] accelerometerValues;

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }

    public void onSensorChanged(SensorEvent event) {
        switch (event.sensor.getType()) {
        case Sensor.TYPE_MAGNETIC_FIELD:
            magneticValues = event.values.clone();
            break;
        case Sensor.TYPE_ACCELEROMETER:
            accelerometerValues = event.values.clone();
            break;
        }

        if (magneticValues != null && accelerometerValues != null) {
            float[] outR = new float[9];
            float[] orientationValues = new float[3];

            SensorManager.getRotationMatrix(outR, null,
                    accelerometerValues, magneticValues);
            SensorManager.getOrientation(outR, orientationValues);

            double azimuth = Math.toDegrees(orientationValues[0]);
            double pitch = Math.toDegrees(orientationValues[1]);
            double roll = Math.toDegrees(orientationValues[2]);

        }
    } 
```

当我使用日志来读取这些值时，它们似乎相对稳定，但它们似乎与围绕任何自然轴集的角度不对应，我无法弄清楚这些数字代表什么。我应该如何解释这些数字？

[http://www.devx.com/wireless/Article/42482/0/page/3](http://www.devx.com/wireless/Article/42482/0/page/3)上的教程采用了更简单的方法，但我无法让它工作。

获得设备的方位角、俯仰角和滚动角以及我的纬度和经度以及其他设备的方位角和经度后，我如何确定将图标放在屏幕上的哪个位置？这似乎是一个复杂的几何问题，我们必须将相机的视场想象成一个无限大的圆锥体，将其投影到地球表面，并查看其他位置是否在投影区域内，但这似乎非常复杂。有没有更好的方法让我忽略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:33:20.530

这不是您问题的直接答案，但您可以尝试查看[mixare](http://www.mixare.org) [source code](https://github.com/mixare/mixare)。

您可能感兴趣的核心代码在此类中： [https](https://github.com/mixare/mixare/blob/master/src/org/mixare/MixView.java) ://github.com/mixare/mixare/blob/master/src/org/mixare/MixView.java 围绕第 #212 行及以后。

如您所见，该代码不使用方位角、俯仰和滚动，而是操纵矩阵。

至于几何问题，当你说“将[相机的FOV]投影到地球表面”时，我不明白。我会说 FOV 被投影到围绕用户的虚拟球体上。

# php - PHP排序opendir文件包括

> ID：10942784
> 
> 赞同：1
> 
> 时间：2012-06-08T03:38:00.560
> 
> 标签：php, sorting, opendir

我正在尝试对 opendir() 列表进行排序，以便它可以按照我命名的顺序显示信息。

目录中的每个文件都称为 1_something.php、2_something.php、3_something.php 等。这些文件是模板化的 html 的一小部分，我将其更改为我需要的任何内容。

我正在使用下面的代码来提取并显示这些文件：

```
$dir = "./portfolio"; 
if($handle = opendir($dir)) { 
    while($file = readdir($handle)) { 
        clearstatcache(); 
        if(is_file($dir.'/'.$file)) {
            include("portfolio/".$file);
        }
    } 
closedir($handle); 
} 
```

我一直在尝试创建一个名称数组并对它们进行排序，尽管我想我不知道数组发生在哪里、排序发生在哪里以及信息的实际显示发生在哪里。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:42:15.410

嗯，有什么阻止你使用的`scandir`吗？

[http://sg.php.net/manual/en/function.scandir.php](http://sg.php.net/manual/en/function.scandir.php)

```
$files = scandir($dir); // returns array of files, sorted alphabetically
foreach($files as $file) {
   // your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:30:56.853

这要[归功于@SiGanteng](https://stackoverflow.com/users/135448/siganteng)

我只需要添加另一行以确保它只查看真实文件：下面的代码

```
$dir = "./portfolio"; 
$files = scandir($dir); // returns array of files, sorted alphabetically

foreach($files as $file) {
    if(is_file($dir.'/'.$file)) {
        include("portfolio/".$file);
    }
} 
```

这是按升序返回结果的最简单方法。
再次感谢[斯干腾](https://stackoverflow.com/users/135448/siganteng)

# c# - WebBrowser 控件和嵌入标签

> ID：10942787
> 
> 赞同：13
> 
> 时间：2012-06-08T03:38:37.940
> 
> 标签：c#, winforms, webbrowser-control

我相信我遇到了与在我的 C# 2008 WinForms 应用程序中使用带有 WebBrowser 控件的嵌入标签相关的安全问题。

这是我的代码：

```
private void button2_Click(object sender, EventArgs e)
{
    webBrowser1.Navigate("C:/page1.html");
}

private void button1_Click(object sender, EventArgs e)
{
    webBrowser1.Navigate("about:blank");
    Thread.Sleep(1000);
    webBrowser1.Document.Write("<html><body><p>Hello</p><embed src='C:/test.wmv' /></body></html>");
} 
```

这是 page1.html 的内容：

```
<html><body><p>Hello</p><embed src='C:/test.wmv' /></body></html> 
```

Button1 生成单词“Hello”。Button2 生成单词“Hello”，并在其下方嵌入电影播放器​​。

当我查看两个页面的源代码时，我注意到它们是相同的，除了源文件的名称。

这让我相信这与我的 IE 安全设​​置有关，但我注意到我为嵌入内容设置了完整权限。可能控件无法正确识别页面的来源，因此不允许使用 embed 标记。

我怎样才能以编程方式克服这个问题？我想避免将我的页面写入文件，并不惜一切代价导航到该文件。关于如何欺骗浏览器控件正常工作的任何建议？

**第一编辑：**

根据这篇文章[Webbrowser Navigate Embedded Resource](http://bytes.com/topic/visual-basic-net/answers/522610-webbrowser-navigate-embedded-resource)这将起作用，但我（JT）尝试过但没有：

```
System.IO.Stream stream = this.GetType().Assembly.GetManifestResourceStream("WindowsFormsApplication1.Properties.test.html");
webBrowser1.DocumentStream = stream; 
```

**重现问题时的奇怪行为：**

```
webBrowser1.Navigate("about:blank");
do
{
Thread.Sleep(100);
} while (webBrowser1.IsBusy == true);

//Method 1\. Doesn't work
string htmlString1 = File.ReadAllText("C:/page1.html");
webBrowser1.Document.Write(htmlString1);

//Method 2\. Doesn't work
string htmlString2 = "<html><body><p>Hello</p><embed src='C:/test.wmv' /></body></html>";
webBrowser1.Document.Write(htmlString2);

//Method 3\. DOES WORK
webBrowser1.Document.Write("<html><body><p>Hello</p><embed src='C:/test.wmv' /></body></html>"); 
```

**编辑 2**

下面是一个使用 JavaScript 创建的页面示例，没有真正的源文件，它在 IE 中显示嵌入式播放器：

```
<html><head>
<script language="JavaScript">
function go()
{
test1 = window.open("","","menubar=0,status=0,toolbar=0");
test1.document.writeln("<html><body><p>Hello</p><embed src='test.wmv' /></body></html>");
}
</script>
</head><body><h1 onclick="go()">click</h1></body></html> 
```

这里唯一的区别是 IE 认为 HTML 的源是一个文件，尽管它是由“writeln”创建的。

虽然普遍认为 IE 不支持该标签，但它确实支持，并且有很多例子证明了这一点。在 IE 中尝试在 jsfiddle.net 上使用 IE 会产生嵌入式播放器，而在 FF*中则不会*。

**编辑 3**

此问题与跨域安全有关。IE 的较新版本不仅拒绝允许对页面域进行任何更改，而且 WebBrowser 控件不允许您将文本写入已包含文本的文档。只有第一次调用 Document.Write 会做任何事情。不仅没有明显的方法来强制页面的域，也没有办法向具有设置域的页面写入任何新内容，因为执行任何写入所需的“openNew”打开：空白，默认为空域，如果尝试设置或获取，则会导致异常。

**编辑 4**

问题在于跨域安全恶作剧。See [THIS](http://anton.kovalyov.net/2011/04/05/cross-domain-quirks-in-ie8/) IE8 决定 Document.Domain 不能被写入。即使它是可写的，您显然也永远无法在协议之间进行通信。所以“file://”协议和“about”协议不能通信，或者标签相互指向。以下是绊脚石：

*   浏览器控件使用的 IE 版本无法对 Document.Domain 执行任何操作，即使使用 JavaScript 也不行。
*   您无法读取 about:blank 的域。
*   您无法加载具有正确域的页面，并期望使用 Document.Write 将 HTML 写入其中，因为您必须在使用 Document.Write 之前调用 Document.OpenNew。
*   您不能使用 WebBrowser.DocumentText = 修改 DocumentText， *因为*每次导航只能设置一次 DocumentText。这就像其他一些安全*的事情*。

总之，说您对 WebBrowser 控件的安全性没有任何额外控制就足够了，可能比您对某些 JavaScript 生成的页面的控制更少（因为这些页面共享启动脚本的域）。

感谢您对我的努力的投票/支持，但看起来我每次想更改浏览器控件中的内容时都会放弃并写一个页面到文件中。呸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:36:28.650

问题在于跨域安全恶作剧。See [THIS](http://anton.kovalyov.net/2011/04/05/cross-domain-quirks-in-ie8/) IE8 决定 Document.Domain 不能被写入。即使它是可写的，您显然也永远无法在协议之间进行通信。所以“file://”协议和“about”协议不能通信，或者标签相互指向。以下是绊脚石：

*   浏览器控件使用的 IE 版本无法对 Document.Domain 执行任何操作，即使使用 JavaScript 也不行。
*   您无法读取 about:blank 的域。
*   您无法加载具有正确域的页面，并期望使用 Document.Write 将 HTML 写入其中，因为您必须在使用 Document.Write 之前调用 Document.OpenNew。
*   您不能使用 WebBrowser.DocumentText = 修改 DocumentText， *因为*每次导航只能设置一次 DocumentText。这就像其他一些安全*的事情*。

总之，说您对 WebBrowser 控件的安全性没有任何额外控制就足够了，可能比您对某些 JavaScript 生成的页面的控制更少（因为这些页面共享启动脚本的域）。

感谢您对我的努力的投票/支持，但看起来我每次想更改浏览器控件中的内容时都会放弃并写一个页面到文件中。呸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T06:07:47.623

这就是为什么：

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd562847(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd562847(v=vs.85).aspx)

> 前面的示例在 Firefox 中有效，但在 Internet Explorer 中无效。要将 Player 控件嵌入到 Internet Explorer 可以显示的网页中，您必须创建一个 OBJECT 元素，该元素的 classid 属性设置为 Windows Media Player 控件的类 ID。以下示例说明如何将 Windows Media Player 控件嵌入到 Internet Explorer 和 Firefox 都可以正确显示的网页中。页面上的脚本检测浏览器类型并生成适当的 OBJECT 标记。

为了您的方便，这里是：

```
private void button3_Click(object sender, EventArgs e)
{
    webBrowser1.Navigate("about:blank");
    do
    {
        Thread.Sleep(100);
    } while (webBrowser1.IsBusy == true);

    string htmlString1 = File.ReadAllText("C:/test.html");
    webBrowser1.Document.Write(htmlString1);
    return;
} 
```

Test.html 的内容：

```
<OBJECT id="VIDEO" width="320" height="240" 
    style="position:absolute; left:0;top:0;"
    CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"
    type="application/x-oleobject">

    <PARAM NAME="URL" VALUE="c:\test.wmv">
    <PARAM NAME="SendPlayStateChangeEvents" VALUE="True">
    <PARAM NAME="AutoStart" VALUE="True">
    <PARAM name="uiMode" value="none">
    <PARAM name="PlayCount" value="9999">
</OBJECT> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T02:19:44.353

*@GorchestopherH 听到结果真可惜。您可能希望将第 4 次编辑作为答案 - 完全放弃 50 分赏金将是一种耻辱。*

另一种解决方案是另一个网络浏览器控件：[http ://code.google.com/p/geckofx/](http://code.google.com/p/geckofx/)

[使用 GeckoFX 在 C# 中嵌入 Firefox 浏览器](http://winform-net.blogspot.com.au/2011/05/embeding-firefox-brower-gecko-engine-in.html)

# javascript - Arshaw 日历特定日期 css 更改颜色

> ID：10942789
> 
> 赞同：-1
> 
> 时间：2012-06-08T03:38:52.333
> 
> 标签：javascript, jquery, css, calendar, fullcalendar

我正在尝试更改 arshaw 日历月视图中框的颜色。这是我到目前为止所拥有的，我知道我不擅长 javascript，所以我有点卡住了。我应该能够做的是在一天中调用这个脚本来改变颜色。所以首先我保存今天的日期，然后我将日历更改为他们想要的日期。然后在这里我尝试更改日历的css，但它不起作用:(。然后我将日期设置为原始日期。所有萤火虫在控制台中说的都是未定义的。

```
 function changeDate (dayToChange) {

    var original=$('#calendar').fullCalendar( 'getDate' );

    $('#calendar').fullCalendar('gotoDate',$('#calendar').fullCalendar.year,$('#calendar').fullCalendar.month, dayToChange );

    $($('#calendar').fullCalendar( 'getDate' )).css('background-color', '#ffcccc');

    $('#calendar').fullCalendar('gotoDate',original);
    var e = $('#calendar').fullCalendar( 'getDate' );

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:42:43.470

这个问题已经有太多重复了。看看这个例子： [更改完整日历中单元格的颜色](https://stackoverflow.com/questions/10086360/change-the-color-of-a-cell-in-a-full-calendar/10114200#10114200)

请在此处发布问题之前进行研究！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T02:53:49.560

其实我想通了自己：P

```
$('#calendar').find ('td.fc-day' + *dayToChange*).css('background-color', '#ffcccc'); 
```

这可以在任何 javascript 中使用。您必须使用 find jquery 功能，因为它的级别远低于`('#calender')`您需要它来搜索所有级别。更改日期将更改单元格，而不是实际日期。

# javascript - 如何从给定模式开始删除字符串的结尾？

> ID：10942790
> 
> 赞同：22
> 
> 时间：2012-06-08T03:39:08.953
> 
> 标签：javascript

假设我有一个这样的字符串：

```
var str = "/abcd/efgh/ijkl/xxx-1/xxx-2"; 
```

我如何使用 Javascript 和/或 jQuery 删除以`str`开头的部分`xxx`，直到结尾`str`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-08T03:41:19.677

```
str.substring( 0, str.indexOf( "xxx" ) ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-08T03:44:00.767

只是：

```
s.substring(0, s.indexOf("xxx")) 
```

处理无效输入和缺少匹配模式的更安全的版本是：

```
function trump(str, pattern) {
  var trumped = "";  // default return for invalid string and pattern

  if (str && str.length) {
    trumped = str;
    if (pattern && pattern.length) {
      var idx = str.indexOf(pattern);

      if (idx != -1) {
        trumped = str.substring(0, idx);
      }
    }
  }
  return (trumped);
} 
```

你会打电话给：

```
var s = trump("/abcd/efgh/ijkl/xxx-1/xxx-2", "xxx"); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-02T15:32:51.320

尝试使用`string.slice(start, end)`：

如果您知道要删除的确切字符数，请从您的示例中：

```
var str = "/abcd/efgh/ijkl/xxx-1/xxx-2";
new_str = str.slice(0, -11); 
```

这将导致`str_new == '/abcd/efgh/ijkl/'`

**为什么这很有用：** 如果`'xxx'`引用任何字符串（如 OP 所说），即：'abc'、'1k3' 等，**并且**您事先不知道它们可能是什么（即：不恒定），则接受的答案，以及其他大多数都不起作用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-08T03:44:05.707

尝试这个：

```
str.substring(0, str.indexOf("xxx")); 
```

[`indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)会找到 的位置`xxx`，然后[`substring`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)剪下你想要的那块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T03:43:25.783

这将从字符串的开头到`xxx`.

```
str.substring(0,str.indexOf("xxx")); 
```

# objective-c - 多个按钮的相同操作方法---UI 导航控制器 - 87445

> ID：10942805
> 
> 赞同：1
> 
> 时间：2012-06-08T03:41:42.953
> 
> 标签：objective-c, xcode

嗨，我是 XCODE 的新手，正在尝试制作一个使用导航控制器的基于视图的应用程序。在我的一个观点中，我试图为不同的按钮附加相同的操作方法。我正在为 UIButtons 使用标签属性。

代码是

```
@interface firstview : UIViewController {
    IBOutlet UIButton *button1;
    IBOutlet UIButton *button2;

    }

    @property(nonatomic, retain) IBOutlet UIButton *button1;
    @property(nonatomic, retain) IBOutlet UIButton *button2;

    -(IBAction)push:(UIButton *)sender;

    @end

    #import "firstview.h"
    #import "secondview.h"

    @implementation firstview

    @synthesize button1;
    @synthesize button2;

    -(IBAction)push:(UIButton *)sender{

    button1.tag = 1;
    button2.tag = 2;

    if(sender.tag = button1.tag){
    secondview *v2 = [[secondview alloc]initWithNibName:@"secondview" bundle:Nil];
    v2.title =@"first button";
    v2.l1.text = @"BUTTON1";
    [self.navigationController pushViewController:v2 animated:YES];
    [v2 release];
    }
    else if(sender.tag = button2.tag){
    secondview *v2 = [[secondview alloc]initWithNibName:@"secondview" bundle:Nil];
    v2.title =@"Select";
    v2.l1.text = @"BUTTON2";
    [self.navigationController pushViewController:v2 animated:YES];
    [v2 release];
    }

    }

    @end 
```

我希望当按下特定按钮时，视图的标题和标签的文本都应该改变。但是无论我按下哪个按钮，实现上面的代码都会给我第一个按钮的视图。如果有人能告诉我哪里出了问题，我将不胜感激。

根据建议，我更改了等号。但是标签仍然没有显示文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:56:27.183

你在检查`sender.tag = button1.tag`，不是`sender.tag == button1.tag`。您需要使用两个等号来检查是否相等。

发生的事情是您设置`sender.tag`为`button1.tag`. 该代码运行后，程序将评估`if (sender.tag)`. 由于`sender.tag`将始终等于`1`, `if(sender.tag)`== `if(1)`== `YES`。

# xcode - 如何在不排序的情况下从 Plist 显示 UITableView

> ID：10942812
> 
> 赞同：0
> 
> 时间：2012-06-08T03:42:40.653
> 
> 标签：xcode, uitableview, plist

我的项目中有这个 Plist。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Medical Info</key>
    <array>
        <string>Date of Birth</string>
        <string>Blood Type</string>
    </array>
    <key>Allergies</key>
    <array>
        <string>Drug</string>
    </array>
    <key>Medication</key>
    <array>
        <string>Drug</string>
    </array>
    <key>Conditions</key>
    <array>
        <string>Medical</string>
    </array>
</dict>
</plist> 
```

当我显示它时，它的排序方式不同：

![表视图](../Images/aebe0426ff77f8cc2921e6747fd32346.png)

如何将我的 plist 中的表格显示为 plist 中存储的内容而不进行排序？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:48:12.727

`NSDictionary`未订购，因此无法保证它会显示为您在 plist 中订购的内容。不幸的是，如果您使用字典，则必须对其进行排序。如果您希望它与 plist 中的数据具有相同的顺序，请将其更改为使用数组。

# json - 在哪里可以找到用于测试的预填充 json 文件？

> ID：10942816
> 
> 赞同：28
> 
> 时间：2012-06-08T03:43:31.213
> 
> 标签：json, testing

我正在构建一个可以导入 JSON 数据的应用程序，我想测试大约 10k 个条目，但我不想构建一个包含这么多条目的 JSON 字符串......所以有没有人可以找到一些通用的位置填充的 JSON 文件？（音乐专辑/电​​影列表/动物王国/人口普查数据/汽车模型......我不是很挑剔，我只需要一些好的数据来测试。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-30T01:03:07.273

这是一个处于测试阶段的网站，可以为您提供 JSON、XML 或 CSV 格式的数据。所有列表都是可定制的。这是一个示例调用：[http](http://mysafeinfo.com/api/data?list=englishmonarchs&format=json) ://mysafeinfo.com/api/data?list=englishmonarchs&format=json 此处的 文档：http: [//mysafeinfo.com/content/documentation](http://mysafeinfo.com/content/documentation)；在主菜单的数据集下查看完整列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:06:39.747

很少有网站可以将原始数据定制为 JSON 格式。这是一些原始数据信息[数据的链接](http://www.geonames.org/data-sources.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T03:53:32.643

[维也纳的开放数据网站](http://data.wien.gv.at/katalog/baumkataster.html)提供各种数据库。例如，他们的[Tree 寄存器](http://data.wien.gv.at/daten/wfs?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:BAUMOGD&srsName=EPSG:4326&outputFormat=json)

**编辑：**

旧链接已失效。查找测试数据的好地方是汇总政府数据的 Socrata。有大量数据可供测试：

[https://dev.socrata.com/data/](https://dev.socrata.com/data/)

如果您浏览目录，通常会有一个 JSON 导出选项。 [这是](https://data.nationalservice.gov/api/views/INLINE/rows.json?accessType=DOWNLOAD)来自国家年龄组服务和志愿服务的一个例子。

# mongodb - MVC4 WebApi 序列化/反序列化 MongoDB ObjectId

> ID：10942824
> 
> 赞同：4
> 
> 时间：2012-06-08T03:44:32.783
> 
> 标签：mongodb, deserialization, asp.net-mvc-4, restsharp

我正在将 MVC4 WebApi 与 RestSharp 客户端一起使用，我正在努力让 ObjectIds 正确序列化（或反序列化）。

我有一个像这样的基础课：

```
public class User
{

    [BsonId]
    public ObjectId Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

} 
```

在客户端反序列化此对象的最佳/正确方法是什么？我尝试过的所有 Id 属性的值都是 ObjectId.Empty。

## 更新

我尝试过创建不同的 ObjectIdDeserializers。下面是反序列化器和客户端的示例，以及发送回客户端的示例 json。

```
public class ObjectIdDeserializer : IDeserializer
{

    public string RootElement { get; set; }
    public string Namespace { get; set; }
    public string DateFormat { get; set; }

    public T Deserialize<T>(RestSharp.IRestResponse response)
    {
        return BsonSerializer.Deserialize<T>(response.Content);
    }

} 
```

在 RestSharp 中，我添加了以下行来调用上述反序列化器：

```
_client.AddHandler("application/json", new ObjectIdDeserializer()); 
```

一些示例 json 看起来像这样：

```
"User":
{
    "Id":
    {
    "_timestamp":1339158960,
    "_machine":7962014,
    "_pid":4040,
    "_increment":9499872
    },
    "FirstName":"Test",
    "LastName":"User"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:54:18.207

在对 SO 进行了大量搜索之后，我能够找到一个简单的解决方案来解决我想要做的事情。

使用此答案中的方法，该属性被存储为 ObjectId 并且在代码中它只是一个字符串。正是我希望达到的目标。

[https://stackoverflow.com/a/7982411/360843](https://stackoverflow.com/a/7982411/360843)

# bash - Bash循环，打印当前迭代？

> ID：10942825
> 
> 赞同：32
> 
> 时间：2012-06-08T03:44:38.957
> 
> 标签：bash, loops, while-loop

假设你有一个简单的循环

```
while read line
do
  printf "${line#*//}\n"
done < text.txt 
```

有没有用输出打印当前迭代的优雅方法？就像是

```
0 的
1 快速
2棕色
3 狐狸

```

我希望避免设置一个变量并在每个循环中递增它。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-08T04:41:51.177

为此，您需要在每次迭代时增加一个计数器（就像您试图避免的那样）。

```
count=0
while read -r line; do
   printf '%d %s\n' "$count" "${line*//}"
   (( count++ ))
done < test.txt 
```

编辑：经过深思熟虑，如果您有 bash 版本 4 或更高版本，则无需计数器即可：

```
mapfile -t arr < test.txt
for i in "${!arr[@]}"; do
   printf '%d %s' "$i" "${arr[i]}"
done 
```

内置的 mapfile 将文件的全部内容读入数组。然后，您可以遍历数组的索引，这将是行号并访问该元素。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-08T11:22:30.857

你不经常看到它，但你可以在`while`循环的条件子句中有多个命令。以下仍然需要一个明确的计数器变量，但这种安排可能更适合或适合某些用途。

```
while ((i++)); read -r line
do
    echo "$i $line"
done < inputfile 
```

`while`无论最后一个命令返回什么都满足条件（在这种`read`情况下）。

有些人更喜欢`do`在同一行包含 。这就是它的样子：

```
while ((i++)); read -r line; do
    echo "$i $line"
done < inputfile 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T04:57:57.243

```
n=0
cat test.txt | while read line; do
  printf "%7s %s\n" "$n" "${line#*//}"
  n=$((n+1))
done 
```

当然，这也适用于 Bourne shell。

如果您真的想避免增加变量，可以通过 grep 或 awk 管道输出：

```
cat test.txt | while read line; do
  printf " %s\n" "${line#*//}"
done | grep -n . 
```

或者

```
awk '{sub(/.*\/\//, ""); print NR,$0}' test.txt 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-05T01:59:21.647

您可以使用范围来遍历，它可以是数组、字符串、输入行或列表。

在这个例子中，我使用了一个数字列表 [0..10]，也使用了 2 的增量。

```
#!/bin/bash
for i in {0..10..2}; do 
   echo " $i times"
done 
```

输出是：

```
 0 times
 2 times
 4 times
 6 times
 8 times
 10 times 
```

要打印索引而不考虑循环范围，您必须使用变量“COUNTER=0”并在每次迭代“COUNTER+1”中增加它。

我的解决方案打印每次迭代，FOR 遍历输入行并每次迭代递增一个，还显示输入行中的每个单词：

```
#!/bin/bash 

COUNTER=0
line="this is a sample input line"

for word in $line; do        
    echo "This i a word number $COUNTER: $word"
    COUNTER=$((COUNTER+1))
done 
```

输出是：

```
This i a word number 0: this
This i a word number 1: is
This i a word number 2: a
This i a word number 3: sample
This i a word number 4: input
This i a word number 5: line 
```

查看更多关于循环的信息：[在此处输入链接描述](https://www.cyberciti.biz/faq/bash-for-loop/)

测试您的脚本：[在此处输入链接描述](https://www.tutorialspoint.com/execute_bash_online.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T04:00:47.893

*更新：* 这里发布的其他答案更好，尤其是@Graham 和@DennisWilliamson 的答案。

像这样的东西应该适合：

```
tr -s ' ' '\n' <test.txt | nl -ba 
```

如果要从 0 开始索引，可以在命令中添加`-v0`标志。`nl`

# delphi - 将设计器窗口置于背景中

> ID：10942826
> 
> 赞同：2
> 
> 时间：2012-06-08T03:44:39.627
> 
> 标签：delphi, delphi-xe2

这很烦人......在Delphi 7中，当您单击代码窗口时，表单会自动隐藏。现在它保持在顶部。我必须将其最小化以将其从焦点中移开。是否有任何设置可以纠正这种行为？此外，我必须在右侧使用组件托盘玩捉迷藏。我打开了它，但是当我尝试单击滚动条以尝试搜索我的组件时，我将所有内容都替换为 Delphi 项目等。然后我必须在表单内部单击以使组件托盘再次返回。烦人...有什么办法可以禁用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T14:52:20.283

对于您问题的第一部分，您可以禁用嵌入式设计器，以便表单和代码之间的切换类似于 Delphi 7 IDE。

`Tools-> Options -> Environment Options -> Vcl Designer -> Embedded designer (uncheck)`

你也可以看看 Simon Stuart 插件[RADSplit](http://www.simonjstuart.com/delphi-stuff/radsplit/)

现在对于这`component palette`部分，这个窗口会根据当前的活动表单而改变，所以如果你的活动窗口是表单设计器，工具面板会显示组件，否则会显示 Delphi 项目菜单。无论如何，Delphi XE2 包括经典的调色板组件，即使您在源代码视图中，它也始终在顶部工具栏中显示组件。

![在此处输入图像描述](../Images/efb5e73c69510c1076a3eafd57e4d05d.png)

# joomla - 在 Joomla 2.5 中由前端用户上传图片

> ID：10942829
> 
> 赞同：0
> 
> 时间：2012-06-08T03:45:28.420
> 
> 标签：joomla, image-gallery, joomla2.5

我需要允许注册的前端用户添加、删除图像到图库。我正在使用`SIGE - Simple Image Gallery Extended`可以在[http://joomla-extensions.kubik-rubik.de/sige-simple-image-gallery-extended](http://joomla-extensions.kubik-rubik.de/sige-simple-image-gallery-extended)中找到的图片库。

我怎么能允许注册的前端用户添加、删除图像到图库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:08:24.680

尝试在使用插件时执行此操作将需要很长时间，并且需要大量试验和错误。使用如下所示的图库组件将容易 10 倍：

[福卡画廊](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery/3150)

[Joom画廊](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery/5481)

更多画廊扩展可以在[这里找到](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery)

# python - 从不同的模块导入类的实例

> ID：10942831
> 
> 赞同：5
> 
> 时间：2012-06-08T03:45:54.360
> 
> 标签：python

我有一个名为目录的模块和另一个名为物种的模块。无论我有多少物种，总是只有一个目录。

在目录模块中，我有 1 个目录类。在物种模块中，我有许多不同的物种类别。

```
#module named directory
class directory:

    def __init__(self):
        ...

    def add_to_world(self, obj, name, zone = 'forrest', space = [0, 0]):
        ...

#module named species
class Species (object):

def __init__(self, atlas):
    self.atlas = atlas

def new(self, object_species, name, zone = 'holding'):
    self.object_species = object_species
    self.name = name
    self.zone = zone
    self.atlas.add_to_world(object_species, name)

class Lama(Species):

def __init__(self, name, atlas, zone = 'forrest'):
    self.new('Lama', name)
    self.at = getattr(Entity, )
    self.atlas = atlas 
```

问题是，在我的每个班级中，我都必须将地图集对象传递给该物种。我怎样才能告诉物种从不同的模块中获取实例。

例如，如果我在名为 Entity 的模块中有一个带有 Entity 类的“atlas”实例，我如何用几行代码告诉所有物种从 Entity 中获取该实例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T04:40:01.247

试着回答这个问题，如果我理解正确的话：我如何为我的所有物种保存一个全球地图集，一个单例模式的例子？[请参阅这个 SO 问题](https://stackoverflow.com/questions/31875/is-there-a-simple-elegant-way-to-define-singletons-in-python)。

一种简单的 Python 方式是在`directory.py`包含所有目录相关代码和全局`atlas`变量的文件中包含模块：

```
atlas = []

def add_to_world(obj, space=[0,0]):
    species = {'obj' : obj.object_species,
               'name' : obj.name,
               'zone' : obj.zone,
               'space' : space}
    atlas.append( species )

def remove_from_world(obj):
    global atlas
    atlas = [ species for species in atlas
              if species['name'] != obj.name ]

# Add here functions to manipulate the world in the directory 
```

然后在您的主脚本中，不同的物种可以`atlas`通过导入`directory`模块来引用该全局，因此：

```
import directory

class Species(object):
    def __init__(self, object_species, name, zone = 'forest'):
        self.object_species = object_species
        self.name = name
        self.zone = zone
        directory.add_to_world(self)

class Llama(Species):
    def __init__(self, name):
        super(Llama, self).__init__('Llama', name)

class Horse(Species):
    def __init__(self, name):
        super(Horse, self).__init__('Horse', name, zone = 'stable')

if __name__ == '__main__':
    a1 = Llama(name='LL1')
    print directory.atlas
    # [{'obj': 'Llama', 'name': 'LL1', 'zone': 'forest', 'space': [0, 0]}]

    a2 = Horse(name='H2')
    print directory.atlas
    # [{'obj': 'Llama', 'name': 'LL1', 'zone': 'forest', 'space': [0, 0]},
    #  {'obj': 'Horse', 'name': 'H2', 'zone': 'stable', 'space': [0, 0]}]

    directory.remove_from_world(a1)
    print directory.atlas
    # [{'obj': 'Horse', 'name': 'H2', 'zone': 'stable', 'space': [0, 0]}] 
```

代码可以改进很多，但一般原则应该清楚。

# .net - 为什么要查询组合容器？

> ID：10942832
> 
> 赞同：4
> 
> 时间：2012-06-08T03:46:08.467
> 
> 标签：.net, mef

查询组合容器的充分理由是什么（除了调试和鬼混）。在实际应用场景中，为什么要使用 GetExports 或 GetExportedValues？除了不需要额外的类之外，使用 import 或 importmany 有什么好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T14:38:04.653

我知道的原因有以下三个：

1.  **不可抗力**

    一些 3rdparty 代码（您无法控制）通过反射按名称实例化您的类。然后，这些类将不得不在构造函数中自己处理它们的组合。

2.  **逐步重构**

    假设您已经有一个庞大的现有代码库，在编写时没有考虑 DI。您希望逐步重构它以使用依赖注入。

    假设您选择一个随机类并将其更改为使用依赖注入：现在您通常会看到您还必须更改任何实例化该类的类，而不是接收注入的依赖项。如果您更正了这一点，您还需要更改实例化*这些*类等的类。

    为了避免在一次重构中必须立即更改整个代码库的级联，临时插入额外的组合根通常很方便。

3.  **没有DI的快乐**

    您已经拥有一个没有控制反转的代码库并且您很满意，您只想添加一个或多个扩展点。或者您可能已经在使用服务定位器模式而不是依赖注入。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T03:54:21.240

通常，例如，当您只需要动态加载 ONE 导出时。例如，动态地取决于某些输入。

在很多情况下，导入（硬编码到接收类中）不起作用。

一个例子是生命周期。使用 GetExport / GetExportedValue，我可以请求数据库存储库并将其置于对象生命周期之外。这对于可能需要也可能不需要存储库的元素非常有用，如果他们需要在不摆脱整个类的情况下摆脱它；）

然后是我经常使用的服务类型的场景。我的服务器应用程序具有在启动前未初始化的服务 - 这很明显意味着导入无法工作，这会在服务创建时创建整个对象结构，而不是服务启动；）这有充分的理由 - 例如配置可能会确定在特定机器上启动哪些服务，并且我的一些服务的内存很重（在启动时提取一个千兆字节或两个或十个缓存数据），所以当它没有启动时......它甚至不存在更好.

# javascript - 您将如何在单页应用程序和 knockout.js 中进行客户端验证

> ID：10942833
> 
> 赞同：3
> 
> 时间：2012-06-08T03:46:09.003
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, knockout.js

我有一个使用 Knockout.js 和 Asp.Net MVC3 开发的单页应用程序。一切似乎都运行良好。然而，当我们使用传统的*完整回*发模型时，我们可以用属性注释我们的模型，它可以开箱即用。

但是使用单页应用程序时的问题是 Asp.NET MVC 无法输出它的属性，这会使客户端验证*神奇地*开箱即用。请注意，我对编写检查每个文本框的值并显示错误消息的样板代码不感兴趣。

是否有任何一致的方法来进行客户端验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:50:53.810

我使用[淘汰赛验证。](https://github.com/ericmbarnard/Knockout-Validation)

这很棒。

# ios - 我可以在 iOS 应用程序中使用 UIWebKit 吗？有没有可能被苹果拒绝？

> ID：10942835
> 
> 赞同：1
> 
> 时间：2012-06-08T03:46:32.123
> 
> 标签：ios

我正在开发一个 iPad 应用程序，它使用 webKit 来处理视频内容。在渲染视频之前，需要在设备中完成一些计算。它不能作为带有视频标签的简单网络应用程序来完成，这就是我们决定使用 UIWebKit 的原因。

我听说第三方浏览器是使用 UIWebKit 开发的。

[http://www.macworld.com/appguide/article.html?article=138409](http://www.macworld.com/appguide/article.html?article=138409)

但以下讨论是我关心的问题。

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/54184-app-rejected-webkit-use.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/54184-app-rejected-webkit-use.html)

苹果有没有可能拒绝该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:16:56.587

只要通过 UIWebView 使用 Webkit，就没有任何后顾之忧。这就是所有应用程序使用的。委托方法为您提供所需的所有控制。唯一的缺点是从 Javascript 到 Objective-C 的桥梁很慢。

现在，在您的应用程序中包含从源代码构建的自定义 Webkit 是一个有趣的问题。开源的 Webkit 和调用 iOS 内置的 Webkit 框架是不一样的。不确定 Apple 是否会反对自己编译它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:13:07.353

您不能在应用程序中使用私有框架。您的第二个链接中提到的框架在 5.1 中仍然是私有的。Apple 的新静态分析器肯定会抓住它们的任何用途。您的第一个链接中的应用程序**可能**使用 UIWebView，而不是直接使用 WebKit。为什么你不能这样做？

# asp.net-mvc-2 - Asp.net MVC 2：是否可以为用户控件调用控制器的特定操作

> ID：10942837
> 
> 赞同：0
> 
> 时间：2012-06-08T03:46:48.840
> 
> 标签：asp.net-mvc-2

我刚刚开始将我的 asp.net 站点从 Webform 升级到 MVC 2。到目前为止，它比 Webform 更清晰、更轻松。我坚持以不同的动作渲染用户控件。

我命名的用户控件`Banner.ascx`被放置在`Site.Master`. 在 HomeController > Index 操作中设置的这个`Banner.ascx`获取 url 。`DataView["BannerUrl"]`当我将 URL 指向`/Home/Index`. 现在我希望这个`Banner.ascx`控件只从 HomeController > Index 我指向的任何操作获取 DataView，例如，当指向 /Article/Detail/1 的 URL 时，我希望`Banner.ascx`HomeController 的运行操作 Index 获取`DataView["BannerUrl"]`

任何回应表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:19:44.097

您可以像调用任何其他服务器端代码一样调用 MVC 控制器。您可以通过 访问注册的`IControllerFactory`实例`ControllerBuilder.GetControllerFactory()`。然后，您可以使用控制器工厂通过将参数`IController`中的路由值传递给它来获取实例的初始化实例（这些将是和. 然后将执行 Action 的方式与 MVC 生命周期在收到要求。`RouteData``RequestContext``controller = "Home"``action = "Index"``IController.Execute()`

# c# - C# 检查文件的二进制读取器结尾

> ID：10942848
> 
> 赞同：54
> 
> 时间：2012-06-08T03:48:48.573
> 
> 标签：c#, binaryfiles, binaryreader

我正在寻找一种方法来检查我是否已到达二进制阅读器的文件末尾，一个建议是使用 PeekChar

```
while (inFile.PeekChar() > 0)
{
    ...
} 
```

但是，看起来我遇到了问题

```
未处理的异常：System.ArgumentException：输出字符缓冲区太小
ll 包含解码后的字符，编码 'Unicode (UTF-8)' fallback 'Syste
m.Text.DecoderReplacementFallback'。
参数名称：字符
   在 System.Text.Encoding.ThrowCharsOverflow()
   在 System.Text.Encoding.ThrowCharsOverflow（DecoderNLS 解码器，布尔无
g解码）
   在 System.Text.UTF8Encoding.GetChars(Byte* 字节，Int32 byteCount，Char* char
s, Int32 charCount, DecoderNLS baseDecoder)
   在 System.Text.DecoderNLS.GetChars(Byte* bytes, Int32 byteCount, Char* chars,
 Int32 charCount，布尔刷新）
   在 System.Text.DecoderNLS.GetChars(Byte[] bytes, Int32 byteIndex, Int32 byteC
数量，Char[] 字符，Int32 charIndex，布尔刷新）
   在 System.Text.DecoderNLS.GetChars(Byte[] bytes, Int32 byteIndex, Int32 byteC
数量，Char[] 字符，Int32 字符索引）
   在 System.IO.BinaryReader.InternalReadOneChar()
   在 System.IO.BinaryReader.PeekChar()

```

所以也许 PeekChar 不是最好的方法，我认为它甚至不应该那样使用，因为我正在检查我的读者的当前位置，而不是下一个字符应该是什么。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-08-06T15:12:37.217

在处理二进制数据时，有一种更准确的方法来检查 EOF。它避免了该`PeekChar`方法带来的所有编码问题，并完全满足需要：检查阅读器的位置是否在文件末尾。

```
while (inFile.BaseStream.Position != inFile.BaseStream.Length)
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-22T03:00:03.217

将其包装到[自定义扩展方法](https://msdn.microsoft.com/de-de/library/bb311042.aspx)中，该方法将通过添加缺少的 EOF 方法来扩展*BinaryReader类。*

```
public static class StreamEOF {

    public static bool EOF( this BinaryReader binaryReader ) {
        var bs = binaryReader.BaseStream;
        return ( bs.Position == bs.Length);
    }
} 
```

所以现在你可以写：

```
while (!infile.EOF()) {
   // Read....
} 
```

:) ...假设您在这样的地方创建了**infile**：

```
var infile= new BinaryReader(); 
```

注意：[var](https://msdn.microsoft.com/de-de/library/bb383973.aspx)是隐式类型。很高兴找到它 - 它是 C# 中样式良好的代码的另一个拼图。:D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-26T16:19:25.907

**这对我有用：**

```
using (BinaryReader br = new BinaryReader(File.Open(fileName,   
FileMode.Open))) {
            //int pos = 0;
            //int length = (int)br.BaseStream.Length;
            while (br.BaseStream.Position != br.BaseStream.Length) {
                string nume = br.ReadString ();
                string prenume = br.ReadString ();
                Persoana p = new Persoana (nume, prenume);
                myArrayList.Add (p);
                Console.WriteLine ("ADAUGAT XXX: "+ p.ToString());
                //pos++;
            }
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-21T10:54:42.447

我建议与@MxLDevs 非常相似，但使用'<' 运算符而不是'!=' 运算符。由于可以将 Position 设置为您想要的任何内容（在很长的范围内），这将阻止任何通过循环访问无效文件 Position 的尝试。

```
while (inFile.BaseStream.Position < inFile.BaseStream.Length)
{
   ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-04T12:53:44.793

我将添加我的建议：如果您不需要 BinaryReader 的“编码”部分（因此您不使用各种 ReadChar/ReadChars/ReadString），那么您可以使用永远不会抛出的编码器始终为每个字符一个字节。`Encoding.GetEncoding("iso-8859-1")`非常适合这个。您将它作为`BinaryReader`构造函数的参数传递。iso-8859-1 编码是每个字符一个字节的编码，它以 1:1 的比例映射 Unicode 的所有前 256 个字符（例如，`byte`254 就是`char`254）

# android - 为什么活动应用程序在处理时变成红色？

> ID：10942852
> 
> 赞同：0
> 
> 时间：2012-06-08T03:50:09.150
> 
> 标签：android

我做了一个程序，让用户可以通过 WebView 听音乐。我想知道为什么我的程序在运行时会变成红色，请看图片。

我在编码中犯了错误？

![在此处输入图像描述](../Images/fe496f7213b244d154590486cbdcf4d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:58:59.710

听起来可能与“严格模式”有关：

[http://developer.android.com/reference/android/os/StrictMode.html](http://developer.android.com/reference/android/os/StrictMode.html)

# html - 如何使用 HTML5 视频标签从具有多个视频流的 MKV 文件中选择特定的视频流？

> ID：10942853
> 
> 赞同：0
> 
> 时间：2012-06-08T03:50:15.377
> 
> 标签：html, video, html5-video, mkv

我有一个 .mkv 文件，里面有 2 个视频流。

在带有 HTML5 视频标签的浏览器中播放时，如何选择特定的流？

我努力了

视频 src="1234.mkv#Strem 0"

但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:44:04.087

HTML5 视频标签目前还不支持在单个文件中播放多个流。

话虽如此，似乎正在进行一些工作来支持这样的功能。

更多信息请访问以下链接
(x) [http://blog.gingertech.net/2011/05/01/html5-multi-track-audio-or-video/](http://blog.gingertech.net/2011/05/01/html5-multi-track-audio-or-video/)
(x) [http://www.whatwg.org/specs /web-apps/current-work/multipage/the-video-element.html#media-resources-with-multiple-media-tracks](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#media-resources-with-multiple-media-tracks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:58:39.210

我希望这会有所帮助： [具有多个视频流的 HTML 5 视频播放器](http://visuallounge.techsmith.com/2011/10/dev_corner_-_html_5_video_play.html)

# jasper-reports - 在 JasperReports Server 中创建向下钻取报告

> ID：10942856
> 
> 赞同：1
> 
> 时间：2012-06-08T03:50:41.237
> 
> 标签：jasper-reports, jasperserver, drilldown

我是 JasperReports Server 的新手并创建了一些报告。任何人都可以解释如何创建向下钻取报告并将其部署到 JasperReports Server 吗？

# android - AndEngine - 播放声音时滞后

> ID：10942858
> 
> 赞同：4
> 
> 时间：2012-06-08T03:51:17.780
> 
> 标签：android, andengine

我正在用 AndEngine 创建一个简单的游戏。一个球落向地板，每当它与地板发生碰撞时，我都想播放一个简短的碰撞声。在方法 onUpdate() 中，我检查碰撞并相应地播放声音。

我使用 Sound 类来播放声音（如在 AndEngine 的 SoundExample 中）。在三星 Galaxy S2 上进行测试。

问题是播放声音时程序会滞后。它甚至会影响游戏的物理效果（有时当禁用声音时，球会反弹到高于最高点）。

这是代码：

```
public void onUpdate(float pSecondsElapsed) {
// mSound.play();       
if (this.mSprite.collidesWith(ball.getSprite())) {          
    if (!colliding && mSound != null){ // play sound for first collision only
        mSound.play();          
        colliding = true;
    }
}
else{
    colliding = false;
} 
```

}

如果我删除 mSound.play() 或继续播放声音（删除第 2 行的注释），程序运行顺利。

有没有人遇到同样的问题？并有摆脱滞后的解决方案？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:00:41.987

正如您所提到的，当您继续播放声音时它可以正常工作..那么问题不在于声音

collidesWith() 方法可能是你的罪魁祸首，记住 onUpdate 每一帧都会被调用 .. 也许你必须重新设计你的代码或限制每秒的帧数 [更改你的引擎选项以使用 FixedStepEngine 来实现]

# svn - Web2py 应用看不到源代码管理导入的新目录

> ID：10942867
> 
> 赞同：1
> 
> 时间：2012-06-08T03:54:23.170
> 
> 标签：svn, web2py

我有一个 web2py 服务器设置。我在管理界面中创建了一个空应用程序，并使用 Subversion 从源代码控制存储库中获取该应用程序的所有文件。

这些文件最终位于正确的目录中，但是当我打开 web2py 管理员时，我可以看到所有新控制器，但看不到新视图。当我尝试通过 URL 访问新视图时，我还会收到“无效视图”消息。我应该提到新视图都在目录中，我也看不到。新控制器不在目录内。

有没有办法解决这个问题？如果与我描述的不同，将 SVN 与 web2py 一起使用的最佳做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:37:42.050

由于某种原因，您很可能在深度不足的情况下从存储库中签出。

问题： 1\. 你是如何调用 svn 将你的文件从存储库带到 app 文件夹的？2.您说您的文件在正确的位置，然后您说您看不到其中的一些。您能否描述存储库中的文件树以及应用程序文件夹中生成的文件树？

# regex - 交替抓拍

> ID：10942868
> 
> 赞同：2
> 
> 时间：2012-06-08T03:54:24.117
> 
> 标签：regex

我知道捕获带括号的子表达式即使在不匹配的可选部分中也会被计入反向引用编号，但是当它们在交替的分支中时呢？(adam)|(eve) 会在 \1 中给出 adam 还是在 \2 中给出 eve，或者在 \1 中给出 adam 或 eve？

是否所有捕获括号仍然从左到右计数，或者这两个在编号中算作一个？如果是这样，当您在选择中有不同数量的捕获时会发生什么，例如 (god)|(adam)&(eve)？

我想用''，“”或周围没有任何东西来捕获一个值，这就是我所拥有的：

```
(['"])(.*?)\1|([^'"]+) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:01:01.017

反向引用计算括号的数量，无论其中有多少已匹配。

所以，在`(god)|(adam)&(eve)`：

> \1 - “上帝”或空
> \2 - “亚当”或空
> \3 - “夏娃”或空

见这里：http: [//jsfiddle.net/MnASH/](http://jsfiddle.net/MnASH/)

# iphone - 如何在cocos2d中跟踪图像与不规则形状图像边界的交集？

> ID：10942869
> 
> 赞同：1
> 
> 时间：2012-06-08T03:54:39.837
> 
> 标签：iphone, objective-c, cocos2d-iphone

我有一张山的图像，里面有小排水沟和隧道。我想通过那个隧道传递一个小图像。如何在 cocos2d 中跟踪该小图像与大图像的确切边界的交集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T23:08:35.057

我会为此制作一个碰撞遮罩。

这意味着创建您用于地形的图像的精确副本，除了使其只有两种颜色：白色和黑色。

![示例碰撞蒙版](../Images/67870ad4723e587aaf18342d81a362ca.png)

将您希望玩家能够穿过的区域（不是墙壁）设为白色。制作墙壁和任何您希望玩家与之碰撞的东西。接下来，只需进行一些像素碰撞检测。为此，我将获得 RGB（不是 RGBA，因为 alpha 无关紧要）数据。循环遍历这些数据（或其中的一部分以获得更好的性能）并检测玩家是在黑色还是白色像素上。

做任何你需要做的事情。

如果您需要更多帮助，请随时提出。

# java - 使用 android 应用程序中的内部存储传递数据

> ID：10942870
> 
> 赞同：0
> 
> 时间：2012-06-08T03:54:48.570
> 
> 标签：java, android

我尝试实现[此示例](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)以从内部存储写入和读取数据，但是当我尝试从同一个 Android 应用程序读取写入的数据时，它不会给我任何结果。可能是什么错误？以下是我使用的代码。

```
public class SecondScreen extends Activity {

  String FILENAME = "hello_file";
  String string = "hello world!";

  /** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.secondscreen);

  //Using the Internal Storage
    try{
    FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
    fos.write(string.getBytes());
    fos.close();

    }

    catch(Exception e){

    }

     TextView result;
     result = (TextView)findViewById(R.id.status);

 try{

     String test = "";
     FileInputStream fis = openFileInput("hello_file");
     fis.read(test.getBytes());
     fis.close();
     result.setText(test);

    }

    catch(Exception e){

    }

} 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.wrd.ws"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ReadWriteDataActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />

</manifest> 
```

更新后的代码：

```
public class ReadWriteDataActivity extends Activity {
    TextView tv;
String line;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    writeFileToInternalStorage();
    readFileFromInternalStorage();
    tv = (TextView) findViewById(R.id.textView); 
```

// tv.setText(line);

```
}
private void writeFileToInternalStorage() 
{
    String eol = System.getProperty("line.separator");
    BufferedWriter writer = null;
    try 
    {

         File myFile = new File("/sdcard/mysdfile.txt");
         myFile.createNewFile();

      writer = new BufferedWriter(new OutputStreamWriter(openFileOutput("myFile.txt", MODE_WORLD_WRITEABLE)));
      writer.write("This is a test1."+ eol);
      writer.write("This is a test2." + eol);
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
      if (writer != null) 
      {
        try 
        {
            writer.close();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
      }
    }
}

private void readFileFromInternalStorage() 
{
    String eol = System.getProperty("line.separator");
    BufferedReader input = null;
    try 
    {
        input = new BufferedReader(new InputStreamReader(openFileInput("myFile.txt")));
        //String line;
        StringBuffer buffer = new StringBuffer();
        while ((line = input.readLine()) != null) 
        {
            buffer.append(line + eol);
        }
         tv.setText(buffer.toString().trim());
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
        if (input != null) 
        {
            try 
            {
                input.close();
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:17:11.713

我想建议你在处理 Flie API 时使用`BufferedWriter`和类。`BufferedReader`看看下面的方法，

**写入文件**

```
private void writeFileToInternalStorage() 
{
    String eol = System.getProperty("line.separator");
    BufferedWriter writer = null;
    try 
    {
      writer = new BufferedWriter(new OutputStreamWriter(openFileOutput("myfile", MODE_WORLD_WRITEABLE)));
      writer.write("This is a test1." + eol);
      writer.write("This is a test2." + eol);
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
      if (writer != null) 
      {
        try 
        {
            writer.close();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
      }
    }
} 
```

**读取文件**

```
private void readFileFromInternalStorage() 
{
    String eol = System.getProperty("line.separator");
    BufferedReader input = null;
    try 
    {
        input = new BufferedReader(new InputStreamReader(openFileInput("myfile")));
        String line;
        StringBuffer buffer = new StringBuffer();
        while ((line = input.readLine()) != null) 
        {
            buffer.append(line + eol);
        }
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
        if (input != null) 
        {
            try 
            {
                input.close();
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T04:46:01.060

看起来你在下面的代码中有问题：

```
String test = "";
FileInputStream fis = openFileInput("hello_file");
fis.read(test.getBytes()); 
```

您正在通过`test.getBytes()`并且`test`尺寸不足。所以解决方法是读取数组中的字节。

```
byte[] allBytes = new byte[100];
int indexInAllBytes = 0;
int bytesRead = 0;
FileInputStream fis = openFileInput("hello_file");

while(bytesRead != -1) {
  bytesRead = fis.read(allBytes, indexInAllBytes, allBytes.length);

  indexInAllBytes+=bytesRead;

  if(indexInAllBytes >= allBytes.length) {
     // We are exceeding the buffer size. Need bigger bytes array
     break;
  }
  // Also you can convert into string using StringBuilder.
} 
```

注意：BufferedReader(s) 适用于读取/写入文本文件。如果您想要二进制文件，那么您可以使用上述逻辑并稍作改进。

# objective-c - Cocoa：如何禁用可可中 Web 视图的所有用户交互？

> ID：10942871
> 
> 赞同：3
> 
> 时间：2012-06-08T03:55:04.737
> 
> 标签：objective-c, cocoa, webview

假设我有一个 Webview 在另一个之上，并且我正在内部 Web 视图中加载一个页面。现在我想禁用外部 Webview 的所有用户交互。如何在桌面编程中实现这一点？

这是代码段：

```
IBOutlet WebView *innerWebView;
IBOutlet WebView *outerWebView;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
   // NSString *path = [[NSBundle mainBundle] pathForResource:@"main" ofType:@"html"];
   // NSURL *url = [NSURL fileURLWithPath:path];
    [[myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://icicibank.com"]]];
    [outerWebView setDrawsBackground:NO];
    [outerWebView setEditable:NO];

}
- (void)webView:(WebView *)webView decidePolicyForNewWindowAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request newFrameName:(NSString *)frameName decisionListener:(id < WebPolicyDecisionListener >)listener{
    [myWebView setDrawsBackground:NO];
    [myWebView setEditable:NO];
    [outerWebView setDrawsBackground:YES];
    [outerWebView setEditable:YES];
    NSLog(@"hello");
    [[outerWebView mainFrame] loadRequest:request];
    [outerWebView webViewShow:outerWebView];
} 
```

这些是出口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:09:25.873

检查此问题的已接受答案：

[Cocoa webView - 禁用所有交互](https://stackoverflow.com/questions/1251561/cocoa-webview-disable-all-interaction)

答案谈到了几个用户事件。您可以从`WebUIDelegate`协议和`WebEditingDelegate`协议中选择适合您需要的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T21:43:58.193

将 BODY 中的所有 html 代码放在`<div onmousedown="return false"> ... </div>`. 这将帮助您避免用户拖动图像，例如...

也添加此方法：

```
//Disabling the right click menu 
- (NSArray *)webView:(WebView *)sender contextMenuItemsForElement:(NSDictionary *)element defaultMenuItems:(NSArray *)defaultMenuItems {
    return nil;
} 
```

# javascript - 使用 JavaScript 和 CSS 使用 2 个图像创建进度条

> ID：10942873
> 
> 赞同：0
> 
> 时间：2012-06-08T03:55:19.133
> 
> 标签：javascript, html, css

基本上我想要实现的是使用 2 个图像创建一个进度条的影响。（一种灰度和一种彩色）。尝试将这 2 个 div 并排放置，然后动态修改它们的 x 位置和宽度。但面临将它们放在一起的问题。我是否采用正确的方法？也欢迎任何其他实现这一目标的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:39:40.897

这将适用于所有浏览器：

**HTML**

```
<div id="progress-container">
    <span></span>
</div>​ 
```

**CSS**

```
#progress-container{
    background: grey; /* default background */
    width: 200px;
    overflow: hidden; /* fit to the height of span */
}
#progress-container span {
    display: block;   /* to enable width and height for this element */
    background: orange;
    height: 15px;
    width: 25%;
} 
```

工作示例：http: [//jsfiddle.net/ZPffE/2/](http://jsfiddle.net/ZPffE/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:02:18.293

```
<div id="one-hundred">
     <div id="percentage">
     </div>
</div> 
```

尝试像这样组织你的div？

# c# - 访问 Windows 窗体 C# 上的控件

> ID：10942874
> 
> 赞同：1
> 
> 时间：2012-06-08T03:55:32.630
> 
> 标签：c#, winforms

我在做一个非常简单的任务时遇到了一些麻烦。我的 Windows 窗体上有一个富文本框，我试图在任何按钮点击之外访问它。我已经意识到控件不是“公共的”，我不能只在代码中我想更改它的地方调用它。

我得到的错误是：非静态字段、方法或属性需要对象引用。我知道这是一个非常新手的问题，但我尝试了很多方法来解决这个问题，但我无法弄清楚。有人可以帮忙吗？

代码是

```
public static void SeeIfFinished()
{
   if (FinishedThreadCount == 1)
   {
      richTextBox1.Text = "text";
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T03:58:23.953

您的方法是静态的 - 删除`static`修饰符，并通过引用表单的特定实例来调用它：

```
myForm.SeeIfFinished(); 
```

或者如果您的调用代码在表单类中，只需：

```
SeeIfFinished(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:58:40.800

您无法访问静态方法内的实例化对象。

将代码放在未用 static 关键字标记的方法中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T04:03:42.100

静态方法只能查看其类的静态成员以及作为参数传入的任何内容。 `richTextBox1`不是窗口类的静态成员，因此不能在静态方法中引用。

为您的静态方法添加一个参数`(RichTextBox richTextBox)`。当您调用静态窗口方法时，传入 a`richTextBox1`并且它应该可以工作。

# ruby-on-rails - 如何根据数据库字段转发到不同的域？

> ID：10942875
> 
> 赞同：0
> 
> 时间：2012-06-08T03:55:35.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我们的应用程序的一个功能是某些“白标”域，但我想做的是，如果用户没有启用白标功能，那么白标域只会转发到我们的根域（不需要保留子目录）。

所以，因为它需要首先检查数据库（即`@account.white_label?`），然后再向前，所以该检查需要去哪里以及我将使用什么请求变量？

例如，我可能会说：

```
unless @account.white_label?
  # check to see what current domain is
  # if it's a "white label" domain and this account does not have that feature enabled,
  # then redirect_to primary-domain.com
ebd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:19:10.603

您可能可以在应用程序控制器中执行以下操作：

```
class ApplicationController < ActionController::Base

  before_filter :check_if_account_supports_white_label

  def check_if_account_supports_white_label
    domain = request.env['HTTP_HOST']
    unless Account.where(:domain => domain).first.supports_white_label?
     redirect_to some_url
    end
  end
end 
```

# button - Twitter“推文”按钮在实时网站上不起作用

> ID：10942883
> 
> 赞同：0
> 
> 时间：2012-06-08T03:57:38.447
> 
> 标签：button, twitter, tweets

已发布此网站，但 Tweet 按钮似乎不起作用。我可以与 Facebook 分享，但 Tweeter 的“Tweet”按钮是 INOP。

有人知道那个按钮有什么问题吗？我知道我已经包含了所有要包含的内容。

网站页面是[http://www.PanamaVibes.com/Provinces/](http://www.PanamaVibes.com/Provinces/)

许多其他人都有 twitter 按钮，但他们都使用相同的母版页，因此问题存在于所有具有社交内容的页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:11:55.673

左边的`<header>`标题元素是一个块元素，它正在遍历`<aside>`包含按钮的浮动元素。将该`<header>`元素设置为`display: inline-block;`将解决问题。

# regex - perl 模块来检测外部 url

> ID：10942885
> 
> 赞同：1
> 
> 时间：2012-06-08T03:57:45.793
> 
> 标签：regex, perl, url, module, detect

我正在制作一个爬虫，我只想使用美国域。例如，我想要：

```
 http://thenorthface.com/ 
```

但我不想：

```
http://uk.thenorthface.com
or
http://se.thenorthface.com/ 
```

有谁知道这样做的方法或执行此操作的 perl 模块？我知道这可以用正则表达式来完成，但我试图避免收集所有外国域开头的列表......非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:32:32.030

您无法从 URL 可靠地确定“美国”域是什么。甚至不清楚“美国域”这个词有什么意义。

例如，许多美国州的缩写也是 ISO-3166 国家代码。你将如何处理`ar.xyz.com`。是阿肯色州还是阿根廷？怎么样`ma.pdq.com`......马萨诸塞州或摩洛哥（法语中的摩洛哥）？

您可以将二级域链接到一个国家（至少对于总部），但主机名和三级域将无法分类。

# javascript - For 循环提前结束于

> ID：10942886
> 
> 赞同：0
> 
> 时间：2012-06-08T03:58:01.297
> 
> 标签：javascript, for-loop

[已编辑] 包括该方法的完整代码供您阅读。

```
 function drawHPicto(form) {
        var rowNum = form.Row.value;
        var colNum = form.Column.value;

        //The data that is to be represented on the chart
        var data = [];
        var label = [];
        var chartTitle = form.subtitle.value;

        if (colNum == 2) {
            if (rowNum == 2) {
                data.push([parseFloat(form.r1c1.value),parseFloat(form.r1c2.value)]);
                data.push([parseFloat(form.r2c1.value),parseFloat(form.r2d2.value)]);
                label.push(form.title1.value);
                label.push(form.title2.value);
            }
            else if (rowNum == 3) {
                data.push([parseFloat(form.r1c1.value),parseFloat(form.r1c2.value)]);
                data.push([parseFloat(form.r2c1.value),parseFloat(form.r2d2.value)]);
                data.push([parseFloat(form.r3c1.value),parseFloat(form.r3c2.value)]);
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
            }
            else if (rowNum == 4) {
                data.push([parseFloat(form.r1c1.value),parseFloat(form.r1c2.value)]);
                data.push([parseFloat(form.r2c1.value),parseFloat(form.r2d2.value)]);
                data.push([parseFloat(form.r3c1.value),parseFloat(form.r3c2.value)]);
                data.push([parseFloat(form.r4c1.value),parseFloat(form.r4c2.value)]);
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
                label.push(form.title4.value);
            }
            else if (rowNum == 5) {
                data.push([parseFloat(form.r1c1.value),parseFloat(form.r1c2.value)]);
                data.push([parseFloat(form.r2c1.value),parseFloat(form.r2d2.value)]);
                data.push([parseFloat(form.r3c1.value),parseFloat(form.r3c2.value)]);
                data.push([parseFloat(form.r4c1.value),parseFloat(form.r4c2.value)]);
                data.push([parseFloat(form.r5c1.value),parseFloat(form.r5c2.value)]);
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
                label.push(form.title4.value);
                label.push(form.title5.value);
            }
            else if (rowNum == 6) {
                data.push([parseFloat(form.r1c1.value),parseFloat(form.r1c2.value)]);
                data.push([parseFloat(form.r2c1.value),parseFloat(form.r2d2.value)]);
                data.push([parseFloat(form.r3c1.value),parseFloat(form.r3c2.value)]);
                data.push([parseFloat(form.r4c1.value),parseFloat(form.r4c2.value)]);
                data.push([parseFloat(form.r5c1.value),parseFloat(form.r5c2.value)]);
                data.push([parseFloat(form.r6c1.value),parseFloat(form.r6c2.value)]);
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
                label.push(form.title4.value);
                label.push(form.title5.value);
                label.push(form.title6.value);
            }
        }
        else {
            if (rowNum == 2) {
                data.push(parseFloat(form.r1c1.value));
                data.push(parseFloat(form.r2c1.value));
                label.push(form.title1.value);
                label.push(form.title2.value);
            }
            else if (rowNum == 3) {
                data.push(parseFloat(form.r1c1.value));
                data.push(parseFloat(form.r2c1.value));
                data.push(parseFloat(form.r3c1.value));
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
            }
            else if (rowNum == 4) {
                data.push(parseFloat(form.r1c1.value));
                data.push(parseFloat(form.r2c1.value));
                data.push(parseFloat(form.r3c1.value));
                data.push(parseFloat(form.r4c1.value));
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
                label.push(form.title4.value);
            } 
            else if (rowNum == 5) {
                data.push(parseFloat(form.r1c1.value));
                data.push(parseFloat(form.r2c1.value));
                data.push(parseFloat(form.r3c1.value));
                data.push(parseFloat(form.r4c1.value));
                data.push(parseFloat(form.r5c1.value));
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
                label.push(form.title4.value);
                label.push(form.title5.value);
            }
            else if (rowNum == 6) {
                data.push(parseFloat(form.r1c1.value));
                data.push(parseFloat(form.r2c1.value));
                data.push(parseFloat(form.r3c1.value));
                data.push(parseFloat(form.r4c1.value));
                data.push(parseFloat(form.r5c1.value));
                data.push(parseFloat(form.r6c1.value));
                label.push(form.title1.value);
                label.push(form.title2.value);
                label.push(form.title3.value);
                label.push(form.title4.value);
                label.push(form.title5.value);
                label.push(form.title6.value);
            }
        }
        var checkNum = $('input[name=showNumberPicto]:checked').val();
        var checkLabel = $('input[name=showLabelPicto]:checked').val();

        // clear graph
        RGraph.Clear(document.getElementById('cvs'));      
        RGraph.ObjectRegistry.Clear(document.getElementById('cvs'));

        var maxValue = Math.max.apply(Math, data);
        var minValue = Math.min.apply(Math, data);

        var maxLimit = Math.floor(maxValue/4);
        var minLimit = Math.floor(minValue/4);

        // set var for javascript to validate
        setCurrentMin = minLimit;
        setCurrentMax = maxLimit;

        form.intDiv.min = minLimit;
        form.intDiv.max = maxLimit;
        if(form.intDiv.value == 1){
            form.intDiv.value = Math.floor((maxLimit+minLimit)/2);
            if (form.intDiv.value == 0){form.intDiv.value=1;};
            var divider = form.intDiv.value;
        }else{
            // check input for validation within limit
            if (form.intDiv.value>setCurrentMax) {
                form.intDiv.value = setCurrentMax;
            }else if (form.intDiv.value < setCurrentMin) {
                form.intDiv.value = setCurrentMin;
            }
            if ((maxValue/form.intDiv.value) > 7){
                form.intDiv.value = setCurrentMax;
            }
            var divider = form.intDiv.value;
            //alert(divider);
        }

        //alert (maxValue);

        //var drawCanvas = document.getElementById('cvs');
        //var context = drawCanvas.getContext('2d');
        var c=document.getElementById("cvs");
        var ctx=c.getContext("2d");
        var img = new Image();
        img.src="assets/orange.png";
        img.onload = function(){
            for (var i=0;i<data.length;i++)
            {
                var drawRepeat = Math.floor((data[i]/divider));
                alert(data.length);
                var reminder = Math.round(((data[i]%divider)/divider)*10);
                var getDecimal = (10-reminder)/10;
                var posY = ((i*30)+10);
                var posX = ((drawRepeat*30)+30);
                //ctx.save();
                ctx.drawImage(img,posX,posY);
                ctx.fillStyle= "#FFF";
                ctx.fillRect(posX,posY,30,getDecimal*30);

                for (var j=0;j<drawRepeat;j++){
                    var yPos = ((i*30)+10);
                    var xPos = ((j*30)+30);
                    ctx.drawImage(img,xPos,yPos);
                }

                if (checkLabel == "1") {    
                    ctx.fillStyle= "#000";
                    ctx.fillText(label[i],15,((i*30)+15))
                }else{
                    ctx.fillText("")
                }

                if (checkNum == "1") {  
                    ctx.fillStyle= "#000";
                    ctx.fillText(data[i],260,((i*30)+15))
                }else{
                    ctx.fillText("")
                }
            }
        }
} 
```

所以问题在于img.onload发生时的for循环。

```
img.onload = function(){
                for (var i=0;i<data.length;i++)
                {
                    var drawRepeat = Math.floor((data[i]/divider));
                    alert(data.length);
                    var reminder = Math.round(((data[i]%divider)/divider)*10);
                    var getDecimal = (10-reminder)/10;
                    var posY = ((i*30)+10);
                    var posX = ((drawRepeat*30)+30);
                    //ctx.save();
                    ctx.drawImage(img,posX,posY);
                    ctx.fillStyle= "#FFF";
                    ctx.fillRect(posX,posY,30,getDecimal*30);

                    for (var j=0;j<drawRepeat;j++){
                        var yPos = ((i*30)+10);
                        var xPos = ((j*30)+30);
                        ctx.drawImage(img,xPos,yPos);
                    }

                    if (checkLabel == "1") {    
                        ctx.fillStyle= "#000";
                        ctx.fillText(label[i],15,((i*30)+15))
                    }else{
                        ctx.fillText("")
                    }

                    if (checkNum == "1") {  
                        ctx.fillStyle= "#000";
                        ctx.fillText(data[i],260,((i*30)+15))
                    }else{
                        ctx.fillText("")
                    }
                }
            } 
```

我正在使用相同的循环以垂直图形方式绘制图像，并且效果很好。当我使用这个 for 循环绘制水平图时，for 循环在 i=0 处结束。我追踪返回值 3 的 data.length，因此 for 循环应该运行 3 个循环，但它在第一个循环处停止。有人对此有解决方案吗？我要疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:17:58.987

```
if (checkLabel == "1") {    
                    ctx.fillStyle= "#000";
                    ctx.fillText(label[i],15,((i*30)+15))
                }else{
                    ctx.fillText("",15,((i*30)+15))
                } 
```

设法找到问题所在，之前在 else 语句中我设置了 ctx.fillText(""); 没有 x 和 y 坐标，显然停止了循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:50:15.623

在您的代码中，您有：

```
> if (colNum == 2) {
>     if (rowNum == 2) {
>         data.push([parseFloat(form.r1c1.value),parseFloatform.r1c2.value)]);
>         data.push([parseFloat(form.r2c1.value),parseFloat(form.r2d2.value)]);
>         ---------------------------------------------------------^ 
```

`r2d2`可能不存在具有名称的表单控件并导致不正确的结果。

# android - 等效于 Android、Windows Phone 7 和 Blackberry 的配置文件 (iOS)

> ID：10942896
> 
> 赞同：4
> 
> 时间：2012-06-08T03:59:23.063
> 
> 标签：android, ios, windows-phone-7, blackberry, mobile

在 iOS 中，电子邮件、wifi 和 vpn 等的配置可以使用配置文件通过无线方式推送。Android、Windows Phone 7 和黑莓有什么等价的吗？

链接到 iOS 的配置文件 [http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009505-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009505-CH1-SW1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:52:03.607

寻找 BB 的 BES 技术。一切都由服务记录控制。但我不知道如何推送/安装自定义服务记录。但我认为肯定有某种方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:05:44.660

我认为您正在搜索[OMA DM](http://en.wikipedia.org/wiki/OMA_DM)，它可用于管理类似于苹果配置文件的设备。OMA DM 框架目前不是 Andoid 的一部分，但一些移动设备制造商，例如三星的[Galaxy Note](http://www.samsung.com/levant/consumer/mobile-phones/mobile-phones/galaxy-note/GT-N7000ZBADAM-spec)或摩托罗拉的[BRAVO](http://mediacenter.motorola.com/Fact-Sheets/Motorola-BRAVO-Fact-Sheet-343b.aspx)将其添加到固件中。Microsoft Windows Mobile 也使用[了 OMA DM](http://msdn.microsoft.com/en-us/library/bb737369.aspx)。根据 ATT 网站，Windows Phone 8 还支持[OMA DM](http://developer.att.com/developer/device_detailSpec.jsp?id=10500009)。

# c# - 将 C 代码移植到不安全的 C# 时的 NullReference？

> ID：10942898
> 
> 赞同：-4
> 
> 时间：2012-06-08T03:59:41.217
> 
> 标签：c#, pointers, nullreferenceexception

我正在尝试在 C# 中实现 Knuth-Morris-Pratt 算法，类似于纯 C 中的实现。

请不要告诉我关于 Regex 和在 C# 中使用内存的工作。因为，本主题的目的不是真正有用的 C# 特性，而是关于完全在 C# 中使用指针的工作，以及关于学习这些特性的内存工作。

让我向您展示 C# 和纯 C 中的实现。

C# [http://ideone.com/Ck0G0](http://ideone.com/Ck0G0)

纯 C [http://ideone.com/FVAzU](http://ideone.com/FVAzU)

我对 Pure C 中的版本没有问题，它运行良好，没有问题，但在 C# 版本中没有。

我在这一行的 C# 中有问题：

```
 int*[] d = new int*[M * sizeof(int)];
    *d[0] = 0; 
```

我**发现 NullReferenceException 是**通过将 0 值设置为 *d[0] 来处理的。

我已阅读此参考资料：

[http://msdn.microsoft.com/en-en/library/system.nullreferenceexception.aspx](http://msdn.microsoft.com/en-en/library/system.nullreferenceexception.aspx)

*尝试取消引用空对象引用时引发的异常。*

我完全不明白为什么这些东西在我的 C# 代码中为空？

我已经定义了指向 int[] 数组的 *d 指针，并使用 new[] 运算符为此分配了内存，那么为什么它告诉我，如果内存已经分配，​​我正在取消引用空对象引用？

还有一个关于在 C# 中显式删除指针的问题。

我知道，它可以用*fixed*来完成，但是如果我想要这个而不使用 this 关键字呢？

我记得，我必须为此调用 Dispose() 方法（但对于 *d，我还没有找到此方法），设置为 null 并调用 GC.Collect()。这种方式是正确的方法吗？

谢谢，

此致！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T04:04:06.883

`int *d = (int*)malloc(M * sizeof(int));``M` `int`为值分配内存。`d`指向分配的内存。所以它不是一个指针数组，而是一个指向数组的指针。

在 C# 中，您可以创建一个`M` `int`值数组并将对该数组的引用存储在变量中，如下所示：

```
int[] d = new int[M];
d[0] = 0; 
```

数组是一个托管对象；您不需要手动释放它、处置它或调用垃圾收集器。

您在代码中看到的 NullReferenceException 是由您尝试取消引用 in 的指针引起的，该指针由数组创建表达式`d[0]`初始化。`null`

# php - 使用 PHP 将 UCS-2 文件转换为 UTF-8

> ID：10942900
> 
> 赞同：3
> 
> 时间：2012-06-08T03:59:59.190
> 
> 标签：php, encoding

我有一个从客户端提供的 CSV 文件，必须使用 PHP 对其进行解析并插入到数据库中。

在将数据插入数据库之前，我想将其转换为 UTF-8，但我似乎找不到如何。

这就是我试图检测文件编码的原因：

```
$ enca -d -L zh ./artigos.txt 
    ./artigos.txt: Universal character set 2 bytes; UCS-2; BMP
    CRLF line terminators
    Byte order reversed in pairs (1,2 -> 2,1) 
```

我尝试使用 iconv 函数，但它弄乱了转换，并使用与原始字符不同的字符显示结果。

文件的第一行（base64 编码）：

```
IgAwADMAMQAxADkAIgAsACIANwAzADEAMwA0ADYAMgA2ADQAMAAwADEANQAiACwAIgBBAGcAcgBhAGYAYQBkAG8AcgAgAFIAYQBwAGkAZAAgADkAIABIAGUAYQB2AHkAIABEAHUAdAB5ACIALAAiAEEAZwByAGEAZgBvACAAOQAvADgALAAgADkALwAxADAALAAgADkALwAxADIALAAgADkALwAxADQAIgAsACIAMQAxADAAZgBsAHMAIgAsACIAIgAsACIAIgAsACIAIgAsACIAMAAzADEAMQA5AC4AagBwAGcAIgAsACIAIgAsACIAMQAsADIAMAAiACwAIgA1ADkALAA5ADAAIgAsACIAMgAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIARgBhAGwAcwBlACIADQAK 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-09-02T12:43:02.213

Microsoft Excel CSV 通常是 Little Endian 编码的（我花了很长时间才找到）。如果您想将它们与`fgetcsv`或类似功能一起使用，您应该先将文件转换为 UTF-8。

我执行以下操作：

```
$str = file_get_contents($file);
$str = mb_convert_encoding($str, 'UTF-8', 'UCS-2LE'); 
file_put_contents("converted_".$file, $str); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T05:07:14.497

这似乎有效（小端），尽管您没有包含任何非 ascii 字符

```
$s='IgAwADMAMQAxADkAIgAsACIANwAzADEAMwA0ADYAMgA2ADQAMAAwADEANQAiACwAIgBBAGcAcgBhAGYAYQBkAG8AcgAgAFIAYQBwAGkAZAAgADkAIABIAGUAYQB2AHkAIABEAHUAdAB5ACIALAAiAEEAZwByAGEAZgBvACAAOQAvADgALAAgADkALwAxADAALAAgADkALwAxADIALAAgADkALwAxADQAIgAsACIAMQAxADAAZgBsAHMAIgAsACIAIgAsACIAIgAsACIAIgAsACIAMAAzADEAMQA5AC4AagBwAGcAIgAsACIAIgAsACIAMQAsADIAMAAiACwAIgA1ADkALAA5ADAAIgAsACIAMgAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIAMAAiACwAIgAwACIALAAiADAAIgAsACIARgBhAGwAcwBlACIADQAK';
$t=base64_decode($s);
echo iconv('UCS-2LE', 'UTF-8', substr($t, 0, -1));//last byte was invalid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-16T11:10:38.847

# Python ：

编码的方法之一是

> 文本 -> utf-16-be -> 十六进制

转换回来

> 十六进制转二进制，然后从 utf-16-be 转为文本

注意： ucs-2be 已弃用并移至 utf-16-be

解码器

```
import binascii
code = '098 ... '
decoded_text = binascii.unhexlify(code).decode('utf-16-be') 
```

# sql-server - 重命名多个表

> ID：10942901
> 
> 赞同：3
> 
> 时间：2012-06-08T04:00:16.283
> 
> 标签：sql-server, sql-server-2008

在 SQL Server 中，我有一个数据库`abc`。在这个数据库中，我有数百个表。这些表中的每一个都称为`xyz.table`

我想更改所有要调用的表`abc.table`。

我们有办法将数据库中的所有名称从更改为`xyz.table`更改`abc.table`吗`abc`？

我可以通过将每个表的架构更改为 abc 来手动更改名称

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T05:07:25.310

您可以让游标在`xyz`架构中的所有表上运行，并将所有这些表移动到`abc`架构中：

```
DECLARE TableCursor CURSOR FAST_FORWARD 
FOR
    -- get the table names for all tables in the 'xyz' schema
    SELECT t.Name
    FROM sys.tables t 
    WHERE schema_id = SCHEMA_ID('xyz')

DECLARE @TableName sysname

OPEN TableCursor

FETCH NEXT FROM TableCursor INTO @TableName

-- iterate over all tables found    
WHILE @@FETCH_STATUS = 0
BEGIN
    DECLARE @Stmt NVARCHAR(999)

    -- construct T-SQL statement to move table to 'abc' schema
    SET @Stmt = 'ALTER SCHEMA abc TRANSFER xyz.' + @TableName
    EXEC (@Stmt)

    FETCH NEXT FROM TableCursor INTO @TableName
END

CLOSE TableCursor
DEALLOCATE TableCursor 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T05:03:08.430

您可以将 Alter Schema 与未记录的存储过程 exec sp_MSforeachtable 一起使用，它基本上遍历所有表。

```
 exec sp_MSforeachtable "ALTER SCHEMA new_schema TRANSFER ? PRINT '? modified' " 
```

用新的 Schema 更改 new_schema 关键字。

详情请通过链接

[sp_MSforeach 表](http://www.databasejournal.com/features/mssql/article.php/3441031/SQL-Server-Undocumented-Stored-Procedures-spMSforeachtable-and-spMSforeachdb.htm)

[更改所有表的架构](http://xman892.blogspot.in/2007/02/sql-server-2005-change-schema-for-all.html)

正如其他人指出的那样，SP 已被弃用，因此还有另一种方法可以通过从 sys.tables 获取表的名称来做到这一点

```
Declare @value int
Set @value=1
declare @sql varchar(max), @table varchar(50), @old varchar(50), @new varchar(50)

set @old = 'dbo'
set @new = 'abc'

while exists(select * from sys.tables where schema_name(schema_id) = @old)

begin
;With CTE as
 (
  Select *,row_number() over(order by object_id) rowNumber from sys.tables 
  where schema_name(schema_id) = @old
 )
 select @table= name from CTE where @value=rowNumber
 Set @value=@value+1

 set @sql = 'alter schema ' + @new + ' transfer ' + @old + '.' + @table

 exec(@sql)
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T19:04:55.123

在不使用未记录/不受支持`sp_MSforeachtable`的过程的情况下，这里有一种简洁的方法来为给定模式上的每个表选择和/或运行所有必要的 ALTER 语句：

```
declare @oldSchema nvarchar(50) = 'abc'  -- usually 'dbo'
declare @newSchema nvarchar(50) = 'xyz'  -- use your new schema name

declare @sql nvarchar(max) = 
(select
  (select N'alter schema [' + @newSchema + '] transfer [' + @oldSchema + '].[' + name + ']
' as 'data()'
   from sys.tables
   where schema_name(schema_id) = @oldSchema for xml path(''), type)
 .value('text()[1]','nvarchar(max)'))

-- You can select out the results for scrutiny
select @sql

-- Or you can execute the results directly
exec (@sql) 
```

这避免了使用游标，并使用方括号来转义可能与 SQL 关键字冲突的表名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:04:54.450

我假设您已经`abc`在数据库中创建了模式。

如果没有你可以参考这里

[http://www.youtube.com/watch?v=_DDgv8uek6M](http://www.youtube.com/watch?v=_DDgv8uek6M)

[http://www.quackit.com/sql_server/sql_server_2008/tutorial/sql_server_database_schemas.cfm](http://www.quackit.com/sql_server/sql_server_2008/tutorial/sql_server_database_schemas.cfm)

要更改数据库中所有表的架构，您可以使用以下系统创建[的 msforeachtable存储过程来使用](http://www.databasejournal.com/features/mssql/article.php/3441031/SQL-Server-Undocumented-Stored-Procedures-spMSforeachtable-and-spMSforeachdb.htm)[alter schema](http://msdn.microsoft.com/en-us/library/ms173423.aspx)重命名每个表的架构。

```
exec sp_MSforeachtable "ALTER SCHEMA abc TRANSFER ? PRINT '? modified' " 
```

# android - Facebook如何向朋友发送应用授权请求？

> ID：10942906
> 
> 赞同：5
> 
> 时间：2012-06-08T04:00:32.423
> 
> 标签：android, facebook, request, authorize

我正在构建一个与 Facebook 连接的应用程序。当用户使用我的应用程序时，我可以获取他们的朋友列表并显示它。现在我想添加一个选项，用户可以向他们的朋友发送请求，要求他们授权我的应用程序。这是我的代码：

```
Facebook facebook = new Facebook(MY_APP_ID);
Bundle params = new Bundle();
params.putString("to", MY_FRIEND_ID);
params.putString("message", "This is the message text");
facebook.dialog(((Activity) ctx).getParent(), "apprequests",
        params, new DialogListener() {

            public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                Log.v("invite", "complete");
            }

            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub
                Log.v("invite", "e1");
            }

            public void onError(DialogError e) {
                // TODO Auto-generated method stub
                Log.v("invite", "e2");
            }

            public void onCancel() {
                // TODO Auto-generated method stub
                Log.v("invite", "cancel");
            }

        }); 
```

好的，这段代码可以工作，它会向我的朋友发送一个应用请求。但该请求会将我的朋友重定向到在 facebook 应用设置中设置的应用画布页面。有没有办法发送一个请求，将我的朋友重定向到授权我的应用程序的页面。我认为`facebook.dialog(((Activity) ctx).getParent(), "apprequests", params, new DialogListener() {`我必须用其他东西替换 apprequests。有人可以帮我解决这个问题吗？

**编辑：** 好的，不用担心。我想到了。facebook 帐户收到请求已经授权该应用程序。当我从应用设置中删除该应用时，我的代码将重定向到授权页面。

# magento - 如何在 Magento 中取消设置会话？

> ID：10942913
> 
> 赞同：13
> 
> 时间：2012-06-08T04:01:44.883
> 
> 标签：magento, magento-1.5

我在我的 magento 自定义模块中使用会话。下面是我的代码

```
$session = Mage::getSingleton("core/session", array("name"=>"frontend"));

$session->setData("day_filter", 'weeks');
$session->setData("days", '5');          
$session->setData("next_delivery_date", '2012-05-12'); 
```

上面的代码工作正常，但现在我想取消设置或销毁所有值？您能否为我提供如何取消设置所有设置值的解决方案？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-08T06:31:11.357

在 Magento 中有几种方法可以取消设置会话变量。其中大部分（不是全部）都在中定义`Varien_Object`，因此可用于 Magento 中扩展它的所有对象。

**未设置数据：**

```
 $session->unsetData('day_filter');
    $session->unsetData('days');
    $session->unsetData('next_delivery_date'); 
```

**uns**（这会稍微慢一些，最终还是会执行 unsetData ）：

```
 $session->unsDayFilter();
   $session->unsDays();
   $session->unsNextDeliveryDate(); 
```

**获取数据**

没有错！中存在一种相对未知的方法`Mage_Core_Model_Session_Abstract_Varien`。此类中的 getData 方法包含一个可选的布尔第二个参数，如果传递 true 将在返回变量时清除该变量。

因此`$session->getData('day_filter', true);`将返回会话变量 day_filter 并同时从会话中清除它。

**设置为 null**：

```
 $session->setData('day_filter', NULL);
   $session->setData('days', NULL);
   $session->setData('next_delivery_date', NULL); 
```

**全部取消 | 清除**

最后，您可以使用核选项（**注意：**这将取消设置会话中的**所有数据**，而不仅仅是您添加的数据）：

`$session->unsetAll();`或`$session->clear();`（互为别名）

# c - 列出可执行文件中的全局变量

> ID：10942914
> 
> 赞同：4
> 
> 时间：2012-06-08T04:01:47.843
> 
> 标签：c, xcode, macos, gcc, otool

如何转储可执行文件中的所有全局变量和地址偏移量？

这是在 os x 上，使用 gcc 编译的 xcode 开发的应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:16:58.663

# 如果编译为 Mach-O

使用[`otool`](https://developer.apple.com/library/mac/#documentation/darwin/reference/manpages/man1/otool.1.html)或`cctools`.

# 如果编译为 ELF

您应该能够使用`objdump`and/or来做到这一点`readelf`。

我手头没有*nix 系统，但`objdump -s -j .data`应该让你足够接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-13T09:16:46.853

从 macOS 上的可执行文件（原始问题）中获取全局变量列表及其偏移量的一种简单方法是使用该`nm`工具。没有任何额外的键，它给出了变量和它们的偏移量。

例子：

```
$ nm <some binary>
...
                 U __ZTVN10__cxxabiv117__class_type_infoE
                 U __ZTVN10__cxxabiv120__si_class_type_infoE
000000010006e248 s __ZTVN7testing17TestEventListenerE
000000010006e1c0 s __ZTVN7testing22EmptyTestEventListenerE
000000010006dfa8 s __ZTVN7testing31TestPartResultReporterInterfaceE
000000010006d860 S __ZTVN7testing32ScopedFakeTestPartResultReporterE
000000010006d8d8 S __ZTVN7testing4TestE
... 
```

检查`man nm`代码的解释，如`U`, `s`,`S`等。

* * *

如果您还想查找字符串常量，还有另一个工具`strings`：

```
$ strings <some binary> -o -t x 
```

将为您提供字符串文字及其偏移量的列表。

有关`man strings`更多详细信息，请参阅。

# c - Windows 服务：在作为 LocalSystem 运行时侦听套接字

> ID：10942916
> 
> 赞同：3
> 
> 时间：2012-06-08T04:02:06.183
> 
> 标签：c, winapi, windows-services, network-programming, winsock

我正在用 C for Windows 编写一个类似服务器的小型程序（使用 MinGW/GCC，在 Windows 7 上进行测试），最终应该使用 LocalSystem 帐户作为服务运行。我正在创建一个套接字，并使用 Windows Sockets`bind()`并`listen()`监听`accept()`传入的连接。如果我从命令行运行应用程序（即不是作为服务，而是作为普通用户），我从外部 IP 连接到它没有问题。但是，如果我使用 LocalSystem 帐户将程序作为服务运行，我只能从我自己的 PC 连接到该服务，无论是使用`127.0.0.1`本地地址还是本地地址，`192.168.1.80`（我在一个小型本地网络中的路由器后面）。使用我的本地地址，外部 IP 和同一本地网络中的其他 PC 现在都无法连接，即使没有作为服务运行没有问题。

现在，我听说当作为 LocalSystem 或 LocalService 运行时，网络的处理方式不同甚至无法访问（？），或者服务无法同时访问桌面和网络（注意：我的服务不是交互式的），因为安全考虑。本质上，我需要找出问题所在/如何监听服务中的连接。作为 NetworkService 运行是否与作为 LocalSystem 运行相同，但具有网络访问权限？肯定有服务器可以作为后台服务运行，那么它们是怎么做的呢？

**更新：**关闭防火墙的建议似乎在正确的轨道上——我可以在 Windows 防火墙中添加例外后获得连接。我想我并没有考虑防火墙，因为当您正常使用套接字运行应用程序时，您会收到一个提示，要求添加一个异常，这在第一次运行服务时不会发生。有没有比手动将规则添加到防火墙更好的方法来处理这个问题？LocalSystem 是否有权向防火墙本身添加规则，或者我必须在安装过程中以某种方式执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T04:36:53.967

LocalSystem 和 LocalService 帐户具有受限的网络登录权限，但据我所知，它不应该影响套接字连接。

但是，Windows 防火墙将处于活动状态，如果您将可执行文件移动到新目录以作为服务安装，它可能不再符合您为测试制定的规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T04:17:42.847

用于运行服务的用户帐户不影响 TCP/UDP 绑定/侦听操作。

确保您已禁用防火墙服务和/或防病毒，然后重试。

您可以阅读有关 MSDN 和内置服务帐户的更多详细信息：

[服务帐号](http://msdn.microsoft.com/en-us/library/ms189964.aspx)

*   [**在LocalSystem**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684190%28v=vs.85%29.aspx)帐户的上下文中运行的服务会继承 SCM 的安全上下文。LocalSystem 是一个特权非常高的内置帐户。它在本地系统上具有广泛的权限，并充当网络上的计算机。该帐户的实际名称是“ **NT AUTHORITY\SYSTEM** ”。

*   [**LocalService**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684188%28v=vs.85%29.aspx)在本地计算机上具有最低权限，并在网络上提供匿名凭据。Local Service 帐户是一个内置帐户，与用户组的成员具有相同级别的资源和对象访问权限。如果个别服务或流程受到损害，这种有限的访问权限有助于保护系统。作为本地服务帐户运行的服务作为没有凭据的空会话访问网络资源。请注意，SQL Server 或 SQL Server 代理服务不支持本地服务帐户。该帐户的实际名称是“ **NT AUTHORITY\LOCAL SERVICE** ”。

*   [**在NetworkService**](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684272%28v=vs.85%29.aspx)帐户的上下文中运行的服务将计算机的凭据提供给远程服务器。网络服务帐户是一个内置帐户，它比用户组的成员拥有更多的资源和对象访问权限。作为网络服务帐户运行的服务使用计算机帐户的凭据访问网络资源。该帐户的实际名称是“ **NT AUTHORITY\NETWORK SERVICE** ”

我很确定当您将服务作为 LocalSystem 运行时，您可以在端口上绑定/侦听。例如 Apache 2.2 做到了：

![阿帕奇服务](../Images/ad9b7040b5d9c242c6f4cb530e73cd32.png)

一些阅读：

[了解本地服务和网络服务帐户](http://www.windowsitpro.com/article/services/understanding-the-local-service-and-network-service-accounts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T16:45:38.587

正如其他答案（由[rkosegi](https://stackoverflow.com/a/10943004/595306)和[Ben Voigt](https://stackoverflow.com/a/10943124/595306)提出）所建议的那样，Windows 防火墙阻止了端口，因为我将可执行文件移动到不同的位置进行安装，并且因为服务不会导致连接已被阻止的通知（以及一个按钮取消阻止应用程序）出现。我最终`netsh advfirewall firewall add rule name="%name%" dir=in action=allow program="%path%" enable=yes`在一个 .bat 文件中轻松地向防火墙添加了一个例外。

# linux - 在 shell 中自定义选项卡完成

> ID：10942919
> 
> 赞同：16
> 
> 时间：2012-06-08T04:02:49.577
> 
> 标签：linux, bash, shell, tab-completion, bash-completion

这可能比“自定义选项卡完成”有更好的名称，但这是场景：

通常，当我在命令行输入一个命令，然后输入两次 {TAB} 时，我会得到当前目录中所有文件和子目录的列表。例如：

```
[user@host tmp]$ cat <TAB><TAB>
chromatron2.exe                  Fedora-16-i686-Live-Desktop.iso  isolate.py
favicon.ico                      foo.exe                          James_Gosling_Interview.mp3 
```

但是，我注意到至少有一个程序以某种方式过滤了这个列表：`wine`. 考虑：

```
[user@host tmp]$ wine <TAB><TAB>
chromatron2.exe  foo.exe 
```

它有效地将结果过滤到`*.exe`.

认为它可能是某种负责过滤的包装脚本，a did a`which`和`file`an 结果`wine`不是脚本而是可执行文件。

现在，我不知道这个“过滤器”是否以某种方式编码在程序本身中，或者在默认的 wine 安装期间以其他方式指定，所以我不确定这个问题是否更适合 stackoverflow 或超级用户，所以我交叉手指扔到这里。如果我猜错了，我很抱歉。（另外，我检查了一些类似的问题，但大多数都无关紧要或涉及编辑 shell 配置。）

所以我的问题是，这种“过滤”是如何完成的？提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T11:12:55.763

您可能会在系统上找到一个名为的文件，其中包含设置此行为`/etc/bash_completion`的函数和命令。`complete`该文件将来自您的 shell 启动文件之一，例如`~/.bashrc`.

也可能有一个名为的目录`/etc/bash_completion.d`，其中包含具有更多完成功能的单个文件。这些文件由`/etc/bash_completion`.

这是我系统上`wine`完成命令的样子`/etc/bash_completion`：

```
complete -f -X '!*.@(exe|EXE|com|COM|scr|SCR|exe.so)' wine 
```

这组文件大部分由[Bash Completion Project](http://bash-completion.alioth.debian.org/)维护。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T05:09:01.487

您可以查看 bash 手册中的[Programmable Completion](http://www.gnu.org/software/bash/manual/bashref.html#Programmable-Completion)以了解其工作原理。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-31T09:30:18.667

我知道这很旧，但我想用我自己的脚本做类似的事情。

您可以使用我在这里制作的示例： [http ://runnable.com/Uug-FAUPXc4hAADF/autocomplete-for-bash](http://runnable.com/Uug-FAUPXc4hAADF/autocomplete-for-bash)

从上面粘贴代码：

```
# Create function that will run when a certain phrase is typed in terminal
# and tab key is pressed twice
_math_complete()
{
    # fill local variable with a list of completions
    local COMPLETES="add sub mult div"
    # you can fill this variable however you want. example:
    # ./genMathArgs.sh > ./mathArgsList
    # local COMPLETES=`cat ./mathArgsList`

    # we put the completions into $COMPREPLY using compgen
    COMPREPLY=( $(compgen -W "$COMPLETES" -- ${COMP_WORDS[COMP_CWORD]}) )
    return 0
}

# get completions for command 'math' from function '_math_complete()'
complete -F _math_complete math 

# print instructions
echo ""
echo "To test auto complete do the following:"
echo "Type math then press tab twice." 
echo "You will see the list we created in COMPLETES"
echo "" 
```

# objective-c - 独立的代表和控制器

> ID：10942921
> 
> 赞同：1
> 
> 时间：2012-06-08T04:03:28.257
> 
> 标签：objective-c, cocoa, model-view-controller, delegates, controller

与许多其他刚接触 Cocoa 的开发人员一样，我在代理和控制器的概念上苦苦挣扎。我掌握了基础知识，但有一件事困扰着我。实际上，每个解释都说“通常”或“在简单情况下”（这是他们作为示例给出的唯一示例）控制器和委托往往是同一个对象。这就引出了一个问题：你什么时候想为同一个接口对象分离控制器和委托？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:27:28.603

需要为您的委托使用单独的类时的两种一般情况是

1.  当您需要执行不相关的操作以响应相同的委托消息时，或
2.  当您想在多个视图或控制器之间共享委托的逻辑时。

第一种情况的示例是具有两个不相关表的页面。每个`UITableView`都需要自己的委托，因此将控制器用作委托将需要`if`在每个委托方法中使用丑陋的声明；在这种情况下，定义和使用单独的委托显然是首选。

第二种情况的一个例子是一组相似的页面，它们显示来自相似结构表的数据库数据。页面本身非常不同，因此您不能完全重用控制器。如果您选择将委托放入控制器，则表视图数据源背后的大部分逻辑都是相同的。您可以将代码放入共享委托实现中，并让每个控制器使用特定于与该控制器关联的表的配置参数来实例化该委托。

使用控制器以外的另一个对象作为委托时要记住的一个注意事项：控制器应该保留/保持对委托的强引用，因为视图只会保留对它的弱/分配引用。有关这方面的更多信息，请参见[委托的属性“分配”和“保留” 。](https://stackoverflow.com/questions/5176261/property-assign-and-retain-for-delegate)

# javascript - 使用 javascript 跟踪 iframe 的 http 请求

> ID：10942922
> 
> 赞同：3
> 
> 时间：2012-06-08T04:03:28.413
> 
> 标签：javascript, html, iframe, httpwebrequest

是否可以列出/跟踪网页中 iframe 发出的 http 请求？我们可以在 iframe 的父 DOM 中使用 javascript 来做到这一点吗？

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:12:41.210

除非 iframe 告诉您它正在请求数据，否则您不能这样做。iframe 中加载的文档中的 javascript 函数可以执行此操作。

您可以检查 iframe 指向的文档，但如果您打开 iframe 的任何随机页面，您将无法跟踪它发出的所有请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-05T16:14:39.220

只需这样做即可获得从页面触发的所有请求包括 iframe `href`。是的，不是您搜索的内容，而是某些内容

```
window.performance.getEntries().map(e => e.name ) 
```

你可以过滤`initiator`如果你喜欢你的

# javascript - 通过javascript增量修改CSS背景位置

> ID：10942925
> 
> 赞同：0
> 
> 时间：2012-06-08T04:03:54.807
> 
> 标签：javascript, css, onclick, global-variables, background-position

虽然我有丰富的 PHP 编码经验，但我对使用 javascript 还是很陌生，所以我希望这个问题不会变得愚蠢。

我的目标是创建一个按钮，按下该按钮会导致已定义 DIV 对象中的背景位置将其背景位置更改一个像素。

我一直在谷歌以及这个网站上进行大量搜索，并遵循我发现的提示，我一直在使用 javascript 函数，但我似乎无法找到一个可以正常工作的方法我需要它。

我现在的化身是这样的：

```
<SCRIPT TYPE="text/javascript">
var xObject = 0; // Global

function xMinus(ele) {
    xObject-=1;
    document.getElementById(ele).css({ 'backgroundPosition': xObject + 'px ' + 0 + 'px' });
}
</SCRIPT> 
```

目标是单击按钮（包含 onclick="javascript:xMinus('divID');" ）时，背景应向左移动一个像素。

但是目前当我单击它时，错误控制台给了我“错误：document.getElementById(ele).css 不是函数”。

我尝试了一些不同的变体，但总是得到相似的结果，或者“未定义变量”。显然我不知道我在做什么。请帮忙！我正在为朋友编写此代码，不想让他们等待太久。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:11:36.620

如果您不使用 jQuery，那么，

```
document.getElementById(ele).style.backgroundPosition = xObject + 'px ' +'0px'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:07:12.577

你在里面传递什么`ele`？它应该是`id`元素的字符串，并且不应以数字开头。

尝试以这种方式重写代码：

```
var xObject = 0; // Global

function xMinus(ele) {
    xObject--;
    $('#'+ele).css({ 'backgroundPosition': xObject + 'px ' + 0 + 'px' });
} 
```

我希望你正在使用 jQuery！:) 如果不使用 jQuery，它应该是：

```
document.getElementById(ele).style.backgroundPosition = xObject + 'px ' + '0'; 
```

对于处理程序，那个`<a>`标签，代码应该是：（不应该包含`javascript:`）

```
<a href="#" onclick="xMinus('id'); return false;">BG Left Push!</a> 
```

# c - 简单的 30 字符缓冲区 PIPE 打印不可打印字符，不知道为什么

> ID：10942926
> 
> 赞同：0
> 
> 时间：2012-06-08T04:03:57.413
> 
> 标签：c, fork, pipe

我使用了一个简单的 fork() 来模拟客户端/服务器，然后使用一个非常简单的管道来发送/接收最大 30 长度的字符缓冲区，但它最终打印出不可打印的字符（小“？”和一个带有 4 个 1 和 0 的框)在所需单词**之后。**

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <string.h>

int main () {
    int pipefd[2];
    int cpid;
    char buf[31];
    if (pipe(pipefd) == -1) {
        perror("pipe");
        exit(EXIT_FAILURE)
    }
    cpid = fork();
    if (cpid == -1) P
        perror("cpid");
        exit(EXIT_FAILURE);
    }
    if (cpid == 0) {      // child reads from pipe
        close (pipefd[1]); // close unused write end
        read (pipefd[0], &buf, 30); // if I use 30 instead of strlen(buf) it prints Server transmit: Server receives. It does not wait for write. Makes no sense
        printf ("Server receives: %s", buf);
        close (pipefd[0])l
        exit (EXIT_SUCCESS);
    }
    else {               // parent writes to pipe
        close (pipefd[0]); // closing unused read end;
        char buf2[30];
        printf("Server transmits: ");
        scanf ("%s", buf2);
        write (pipefd[1], buf2, strlen(buf2));
        close(pipefd[1]);
        wait(NULL);
        exit(EXIT_SUCCESS);
    }
  return 0;
} 
```

此外，如果我写了一个以上的单词，它就会忘记第二个。在 c++ 中，我使用了 getline (cin, string) 但这不是一个选项。

也使用过`read (pipefd[0], &buf, sizeof(buf));`，现在它以正确的顺序打印（不知道为什么 strlen 不起作用）但最后我仍然得到不可打印的字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:11:15.267

当`write (pipefd[1], buf2, strlen(buf2));`您忽略将其放入`'\0'`流中时。将其更改为：

```
write (pipefd[1], buf2, strlen(buf2)+1); 
```

你的字符串现在将包含空终止符，防止最后出现垃圾。

`read (pipefd[0], &buf, strlen(buf))`由于`buf`未初始化，使用无效。`strlen`是一个简单的函数，它在字符串末尾查找终止的空值，找到后停止。与`length`C++ 向量的函数不同，C 函数无法访问内存元数据。（`sizeof`是运算符）

# ubuntu - 在 Ubuntu 10.04 中安装 nfs-kernel-server 时出错

> ID：10942928
> 
> 赞同：2
> 
> 时间：2012-06-08T04:04:17.210
> 
> 标签：ubuntu, ubuntu-10.04, apt-get

`nfs-kernel-server`尝试在我的 Ubuntu Server 10.04.4 LTS中安装时收到以下错误消息。

```
Setting up nfs-common (1:1.2.0-4ubuntu4.2) ...
dpkg: error processing nfs-common (--configure):
 subprocess installed post-installation script returned error exit status 10
dpkg: dependency problems prevent configuration of nfs-kernel-server:
 nfs-kernel-server depends on nfs-common (>= 1:1.0.8-1); however:
  Package nfs-common is not configured yet.
dpkg: error processing nfs-kernel-server (--configure):
 dependency problems - leaving unconfigured
No apport report written because the error message indicates its a followup error from a previous failure.

Errors were encountered while processing:
 nfs-common
 nfs-kernel-server
E: Sub-process /usr/bin/dpkg returned an error code (1) 
```

我曾尝试在 Google 上搜索，但无法解决。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:43:08.090

为此提交了一个错误：[https ://bugs.launchpad.net/ubuntu/+source/nfs-utils/+bug/1023382](https://bugs.launchpad.net/ubuntu/+source/nfs-utils/+bug/1023382)

我最终做的是

```
apt-get remove --purge nfs-common
apt-get install nfs-common nfs-kernel-server 
```

然后将我的配置文件放回原处，一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-10T14:29:12.093

我现在不小心在 debian 9 中发现了同样的错误......所以也许有人也可以发现它很有用......

我已经通过另外删除 rpcbind 服务并重新安装它来解决这个问题

```
apt-get remove --purge rpcbind nfs-common &&  apt-get install nfs-common 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T16:07:24.270

在 bash 中试试这个

```
xxxxx@ubuntu:~$ sudo apt-get install nfs-common 
```

这将安装 nfs-common。然后返回并尝试安装您的 nfs 内核服务器。如果您已安装 nfs-common，则运行以下命令并粘贴输出

```
xxxxx@ubuntu:~$ dpkg -L nfs-common | grep /etc/init.d/ 
```

# android - Viewpager Webview 内存问题

> ID：10942929
> 
> 赞同：9
> 
> 时间：2012-06-08T04:04:40.743
> 
> 标签：android, memory, webview

我正在使用 viewpager 加载大约 50 个 webviews...所有 webviews 都加载到 assests 中，每个 weview 都有一个 HTML 页面，每个页面访问大约 70 个图像...当我滑动时，我的应用程序在大约 30 页后崩溃，可能是因为 webviews 仍然保留对 assests 文件夹中图像的引用......有没有办法释放 Viewpager 在那个特定时间没有使用的 webviews？

```
awesomePager.setAdapter(new AwesomePagerAdapter(this, webviewdata)); 
```

细节：

```
Android WebView Memory Leak when loading html file from Assets  
Failed adding to JNI local ref table (has 512 entries)
"Thread-375" prio=5 tid=15 RUNNABLE 
```

在 viewpager 上动态加载 webview

日志猫： ![在此处输入图像描述](../Images/c9810f6704621289b1a8a3e4b98952c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:19:46.407

尝试缩小位图。大多数情况下，位图是我们遇到内存问题的主要原因。还了解如何回收位图。以下代码段将为您提供帮助。

```
BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile( filename, options );
        options.inJustDecodeBounds = false;
        options.inSampleSize = 2; 

        bitmap = BitmapFactory.decodeFile( filename, options );
        if ( bitmap != null && exact ) {
            bitmap = Bitmap.createScaledBitmap( bitmap, width, height, false );
        } 
```

还要确保您确实覆盖了以下方法。

```
@Override
public void destroyItem(View collection, int position, Object view) {
    ((ViewPager) collection).removeView((TextView) view);
} 
```

或者你可以创建一个函数来缩小位图

```
private byte[] resizeImage( byte[] input ) {

    if ( input == null ) {
        return null;
    }

    Bitmap bitmapOrg = BitmapFactory.decodeByteArray(input, 0, input.length);

    if ( bitmapOrg == null ) {
        return null;
    }

    int height = bitmapOrg.getHeight();
    int width = bitmapOrg.getWidth();
    int newHeight = 250;

    float scaleHeight = ((float) newHeight) / height;

    // creates matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleHeight, scaleHeight);

    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0,
            width, height, matrix, true);

    bitmapOrg.recycle();

    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    resizedBitmap.compress(CompressFormat.PNG, 0 /*ignored for PNG*/, bos);            

    resizedBitmap.recycle();

    return bos.toByteArray();            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:11:34.250

WebView 与 JNI 一起使用，它只能容纳 512 个本地引用，尝试直接从 Web 加载您的内容，问题应该不会发生。

当我`shouldInterceptRequest(WebView view, String url)`在**webviewclient**中覆盖并从我自己的缓存机制中传递本地引用时，我遇到了这个问题。

这可能是 webview 本身的错误。如果你问我，至少它不是应该如何表现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T15:54:24.643

将 webview 的图层类型设置为软件有效。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

但是现在你失去了硬件加速，你的 webview 可能会变慢。

# ruby - 如何在 Rails 3.1.1 中将图像写入文件系统？

> ID：10942930
> 
> 赞同：1
> 
> 时间：2012-06-08T04:05:16.037
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

我觉得我应该非常接近，但我无法让它正常工作。

我正在使用文件传输将图像从我的 phonegap 应用程序发送到我的 rails 应用程序（3.1.1 ruby​​ 1.8.7 btw）。

我想将文件写入文件系统。

这是参数哈希：

```
Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x7f1e2baa94e8 @tempfile=#<File:/tmp/RackMultipart20120607-5707-owzii5-0>, 
@headers="Content-Disposition: form-data; name=\"file\"; filename=\"image.jpg\"\r\nContent-Type: image/jpeg\r\n", 
@content_type="image/jpeg", @original_filename="image.jpg">} 
```

基本上，我可以通过 params[:file] 访问该文件。现在我只需要将该图像写入我的文件系统。我没有图像对应的模型，所以我真的不需要回形针。现在，我能想到的最好的是：

```
open(params[:file]) do |image|
  File.open("theiamge.jpg","wb"){|file| file.puts image.read }
end 
```

这是我得到的错误：

```
TypeError (can't convert ActionDispatch::Http::UploadedFile into String): 
```

编辑：

所以，这很奇怪。我可以让这些命令在我的 irb 中工作：

```
 File.open('newimage.jpg', 'wb') do |f|
   f.write File.open('oldimage.jpg').read
 end 
```

但是，这不起作用：

```
 File.open("ihatedetails.jpg",'wb') do |f|
   f.write File.open(params[:file]).read
 end 
```

我收到此错误：TypeError（无法将 ActionDispatch::Http::UploadedFile 转换为字符串）：

我在我的 irb 中使用 ruby​​ 1.9.3，但这些命令应该是相同的......

所以我现在很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:35:58.130

代码应该是：

```
File.open("ihatedetails.jpg",'wb') do |f|
  f.write params[:file].read
end 
```

或`File.open("ihatedetails.jpg",'wb') { |f| f.write params[:file].read }`在一行中。

# mongodb - 在mongodb中将字符串转换为日期

> ID：10942931
> 
> 赞同：39
> 
> 时间：2012-06-08T04:05:20.340
> 
> 标签：mongodb, mongodb-query, aggregation-framework

有没有办法使用 mongodb shell 使用自定义格式将字符串转换为日期

我正在尝试将“21/May/2012:16:35:33 -0400”转换为迄今为止，

有没有办法通过`DateFormatter`或 方法`Date.parse(...)`或`ISODate(....)`方法？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-01-17T11:40:34.037

**使用 MongoDB 4.0 及更高版本**

**[`$toDate`](https://docs.mongodb.com/manual/reference/operator/aggregation/toDate/)**操作员会将值转换为日期。如果该值无法转换为日期，则会**[`$toDate`](https://docs.mongodb.com/manual/reference/operator/aggregation/toDate/)**出错。如果值为 null 或缺失，则**[`$toDate`](https://docs.mongodb.com/manual/reference/operator/aggregation/toDate/)**返回 null：

您可以在聚合管道中使用它，如下所示：

```
db.collection.aggregate([
    { "$addFields": {
        "created_at": {
            "$toDate": "$created_at"
        }
    } }
]) 
```

以上等价于使用**[`$convert`](https://docs.mongodb.com/manual/reference/operator/aggregation/convert/)**运算符如下：

```
db.collection.aggregate([
    { "$addFields": {
        "created_at": { 
            "$convert": { 
                "input": "$created_at", 
                "to": "date" 
            } 
        }
    } }
]) 
```

* * *

**使用 MongoDB 3.6 及更高版本**

您还可以使用**[`$dateFromString`](https://docs.mongodb.com/manual/reference/operator/aggregation/dateFromString/#exp._S_dateFromString)**将日期/时间字符串转换为日期对象的运算符，并具有用于指定日期格式和时区的选项：

```
db.collection.aggregate([
    { "$addFields": {
        "created_at": { 
            "$dateFromString": { 
                "dateString": "$created_at",
                "format": "%m-%d-%Y" /* <-- option available only in version 4.0\. and newer */
            } 
        }
    } }
]) 
```

* * *

**使用 MongoDB 版本`>= 2.6 and < 3.2`**

如果 MongoDB 版本没有进行转换的本机运算符，则需要手动迭代方法返回的游标，**[`find()`](https://docs.mongodb.org/v3.2/reference/method/db.collection.find/#db.collection.find)**方法是使用**[`forEach()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)**方法或游标方法**[`next()`](https://docs.mongodb.org/manual/reference/method/cursor.next/#cursor.next)**访问文档。使用循环，将字段转换为 ISODate 对象，然后使用**[`$set`](https://docs.mongodb.org/manual/reference/operator/update/set/#up._S_set)**运算符更新字段，如下例所示，该字段被调用`created_at`并且当前以字符串格式保存日期：

```
var cursor = db.collection.find({"created_at": {"$exists": true, "$type": 2 }}); 
while (cursor.hasNext()) { 
    var doc = cursor.next(); 
    db.collection.update(
        {"_id" : doc._id}, 
        {"$set" : {"created_at" : new ISODate(doc.created_at)}}
    ) 
}; 
```

为了提高性能，尤其是在处理大型集合时，请利用**[Bulk API](https://docs.mongodb.org/v3.0/core/bulk-write-operations/)**进行批量更新，因为您将以 1000 个批量将操作发送到服务器，这会为您提供更好的性能，因为您不会将每个请求都发送到服务器，每 1000 个请求中只有一次。

下面演示了这种方法，第一个示例使用 MongoDB 版本中可用的 Bulk API `>= 2.6 and < 3.2`。`created_at`它通过将字段更改为日期字段来更新集合中的所有文档：

```
var bulk = db.collection.initializeUnorderedBulkOp(),
    counter = 0;

db.collection.find({"created_at": {"$exists": true, "$type": 2 }}).forEach(function (doc) {
    var newDate = new ISODate(doc.created_at);
    bulk.find({ "_id": doc._id }).updateOne({ 
        "$set": { "created_at": newDate}
    });

    counter++;
    if (counter % 1000 == 0) {
        bulk.execute(); // Execute per 1000 operations and re-initialize every 1000 update statements
        bulk = db.collection.initializeUnorderedBulkOp();
    }
})
// Clean up remaining operations in queue
if (counter % 1000 != 0) { bulk.execute(); } 
```

* * *

**使用 MongoDB 3.2**

下一个示例适用于新的 MongoDB 版本`3.2`，该版本已**[弃用 Bulk API](https://docs.mongodb.org/v3.2/release-notes/3.2/#mongo-shell-and-crud-api)**并提供了一组更新的 api，使用**[`bulkWrite()`](https://docs.mongodb.org/v3.2/reference/method/db.collection.bulkWrite/#db.collection.bulkWrite)**：

```
var bulkOps = [],
    cursor = db.collection.find({"created_at": {"$exists": true, "$type": 2 }});

cursor.forEach(function (doc) { 
    var newDate = new ISODate(doc.created_at);
    bulkOps.push(         
        { 
            "updateOne": { 
                "filter": { "_id": doc._id } ,              
                "update": { "$set": { "created_at": newDate } } 
            }         
        }           
    );

    if (bulkOps.length === 500) {
        db.collection.bulkWrite(bulkOps);
        bulkOps = [];
    }     
});

if (bulkOps.length > 0) db.collection.bulkWrite(bulkOps); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-06-04T13:22:12.860

在我的情况下，我已经成功使用以下解决方案将 ClockTime 集合中的字段 ClockInTime**从字符串转换为日期类型**：

```
db.ClockTime.find().forEach(function(doc) { 
    doc.ClockInTime=new Date(doc.ClockInTime);
    db.ClockTime.save(doc); 
    }) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-08T13:05:09.640

您可以在 Ravi Khakhkhar 提供的第二个链接中使用 javascript，或者您将不得不执行一些字符串操作来转换您的原始字符串（因为原始格式中的某些特殊字符未被识别为有效分隔符）但是一旦你这样做，你可以使用“新”

```
training:PRIMARY> Date()
Fri Jun 08 2012 13:53:03 GMT+0100 (IST)
training:PRIMARY> new Date()
ISODate("2012-06-08T12:53:06.831Z")

training:PRIMARY> var start = new Date("21/May/2012:16:35:33 -0400")        => doesn't work
training:PRIMARY> start
ISODate("0NaN-NaN-NaNTNaN:NaN:NaNZ")

training:PRIMARY> var start = new Date("21 May 2012:16:35:33 -0400")        => doesn't work    
training:PRIMARY> start
ISODate("0NaN-NaN-NaNTNaN:NaN:NaNZ")

training:PRIMARY> var start = new Date("21 May 2012 16:35:33 -0400")        => works
training:PRIMARY> start
ISODate("2012-05-21T20:35:33Z") 
```

以下是一些您可能会觉得有用的链接（关于修改 mongo shell 中的数据） -

[http://cookbook.mongodb.org/patterns/date_range/](http://cookbook.mongodb.org/patterns/date_range/)

[http://www.mongodb.org/display/DOCS/Dates](http://www.mongodb.org/display/DOCS/Dates)

[http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-30T16:14:06.270

我在 MongoDB Stored 中有一些字符串，必须将其重新格式化为 mongodb 中正确且有效的 dateTime 字段。

这是我的特殊日期格式代码：“2014-03-12T09:14:19.5303017+01:00”

但是您可以轻松地采用这个想法并编写自己的正则表达式来解析日期格式：

```
// format: "2014-03-12T09:14:19.5303017+01:00"
var myregexp = /(....)-(..)-(..)T(..):(..):(..)\.(.+)([\+-])(..)/;

db.Product.find().forEach(function(doc) { 
   var matches = myregexp.exec(doc.metadata.insertTime);

   if myregexp.test(doc.metadata.insertTime)) {
       var offset = matches[9] * (matches[8] == "+" ? 1 : -1);
       var hours = matches[4]-(-offset)+1
       var date = new Date(matches[1], matches[2]-1, matches[3],hours, matches[5], matches[6], matches[7] / 10000.0)
       db.Product.update({_id : doc._id}, {$set : {"metadata.insertTime" : date}})
       print("succsessfully updated");
    } else {
        print("not updated");
    }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-08T01:15:30.393

通过编写这样的脚本来使用像[momentjs这样的库怎么样：](http://momentjs.com/)

```
[install_moment.js]
function get_moment(){
    // shim to get UMD module to load as CommonJS
    var module = {exports:{}};

    /* 
    copy your favorite UMD module (i.e. moment.js) here
    */

    return module.exports
}
//load the module generator into the stored procedures: 
db.system.js.save( {
        _id:"get_moment",
        value: get_moment,
    }); 
```

然后在命令行中加载脚本，如下所示：

```
> mongo install_moment.js 
```

最后，在你的下一个 mongo 会话中，像这样使用它：

```
// LOAD STORED PROCEDURES
db.loadServerScripts();

// GET THE MOMENT MODULE
var moment = get_moment();

// parse a date-time string
var a = moment("23 Feb 1997 at 3:23 pm","DD MMM YYYY [at] hh:mm a");

// reformat the string as you wish:
a.format("[The] DDD['th day of] YYYY"): //"The 54'th day of 1997" 
```

# ios - 当我点击按钮时图像下降时如何移动到下一个屏幕？

> ID：10942934
> 
> 赞同：1
> 
> 时间：2012-06-08T04:06:04.413
> 
> 标签：ios, image, button, tap

我在 viewDidLoad 方法中写了动画概念，我写了：

```
 scaleFactor=2;
    angle=180;
    CGRect frame = CGRectMake(10,10,45,45);
    UIView *box;
    box=[[UIView alloc] initWithFrame:frame];
    box.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@"images673.png"];
    [self.view addSubView:box]; 
```

// 此代码用于屏幕中对象的触摸事件 // 对于对象移动，我编写了如下所示的方法：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
        {
        UITouch *touch=[touches anyObject];
        CGPoint location=[touch locationInView:self.view];
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDelegate:self];
        [UICiew setAnimationDuration:1];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        box.center=location;
        [UIView commitAnimations];
        } 
```

// 然后，现在我写了一个按钮，它必须导航到另一个类文件// 我写的一般导航原理

```
-(IBAction)settings:(id)sender
{
aScreen *abc=[[aScreen alloc]init];
[self.navigationController pushViewController:abc animated:YES];
[abc release];
} 
```

现在对象在我点击屏幕的地方移动，但是当我点击按钮时，图像没有放在按钮的顶部。怎么办。请帮帮我。我拍了一张照片，然后我做了一些动画让它移动到我在屏幕上点击的位置。但同时我拿了一个按钮，在viewcontroller中写了一个按钮事件动作。当我点击按钮时，图像没有移动到按钮上。

我想要做的是如果我点击按钮，图像必须放到按钮上，它应该显示下一个视图控制器。任何人都可以帮助我这样做吗？当我点击按钮时图像下降时如何移动到下一个屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:22:14.440

我不确定我在没有看到您的代码的情况下完全理解这个问题，但是您不能做这样的事情吗？

```
-(ibaction)buttonevent:(id)sender{
cgrect frame = image.frame;
frame.origin.x = button.frame.x;
frame.origin.y = button.frame.y;
image.frame = frame;
image.alpha = 0;

[self pushviewcontroller:newViewcontroller animated:yes];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:14:05.537

嗨试试这个我检查过的代码。当您检查按钮并且您拖动的图像相交然后触发它移动到下一个屏幕的方法时，这对我有用

```
// Handles the continuation of a touch.
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{  
//NSLog(@"touchesMoved");
UITouch *touch = [touches anyObject];
if ([touch view] == mKey) {

    NSUInteger touchCount = 0;

    // Enumerates through all touch objects
    for (UITouch *touch in touches) {
        // Send to the dispatch method, which will make sure the appropriate subview is acted upon
        [self dispatchTouchEvent:[touch view] toPosition:[touch locationInView:self.view]];
        touchCount++;
    }

}

}

// Checks to see which view, or views, the point is in and then sets the center of each moved view to the new postion.
// If views are directly on top of each other, they move together.
-(void)dispatchTouchEvent:(UIView *)theView toPosition:(CGPoint)position
{

// Check to see which view, or views,  the point is in and then move to that position.

if (CGRectContainsPoint([mKey frame], position)) 
{
     NSLog(@"touchesMoved");
    mKey.center = position;

}

if(CGRectIntersectsRect([mKey frame], [inVisible frame]) && k==0)
{
    self.view.userInteractionEnabled=NO;
    NSLog(@"thirdPiew frame");

    [inVisible setHighlighted:YES];
    [inVisible setShowsTouchWhenHighlighted:YES];
    k=1;
    [self performSelector:@selector(modalPresentationButtonPressed:)];    

}
} 
```

# html - 调整大小时的对齐变化与“％”和像素中的尺寸

> ID：10942939
> 
> 赞同：0
> 
> 时间：2012-06-08T04:06:40.517
> 
> 标签：html, css

当我以像素为单位给出宽度和高度时，即使调整大小后对齐仍然保持不变。但是，如果以 % 的形式给出，它会受到干扰，就像一个 div 溢出到另一个 div 中并相互混淆。为什么会发生这种情况以及在哪些情况下以 % 给出尺寸比以像素给出更好。除了像素，还有其他最好的方法吗？

如果我们采用任何网站或 css 模板，其中大多数宽度以像素为单位，而不是像 0px auto 那样的百分比和边距，用于自动调整和对齐。为什么当边距、填充、宽度以 % 给出时会变得如此混乱?

# javascript - jquery.validate 插件在 ajax 成功回调中访问表单

> ID：10942942
> 
> 赞同：1
> 
> 时间：2012-06-08T04:07:55.160
> 
> 标签：javascript, jquery, jquery-validate

我对如何使用 jQuery.validate 插件访问提交的表单感到困惑。

在 API 选项的“成功”选项中：http: [//jquery.malsup.com/form/#options-object](http://jquery.malsup.com/form/#options-object)

它说成功函数中的第 4 个参数是 jquery 包装的表单对象，但我尝试使用 jQuery 访问它时一直说它的`undefined`.

这是成功功能在他们的示例页面上的外观：http: [//jquery.malsup.com/form/#ajaxSubmit](http://jquery.malsup.com/form/#ajaxSubmit)

```
function showResponse(responseText, statusText, xhr, $form)  {
    var id=$form.attr('id');
    console.log('id:'+id);
} 
```

不幸的是，console.log 说`Uncaught TypeError: Cannot call method 'attr' of undefined.`

有什么想法吗？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:15:17.687

变量不能以`$`我想的开头。删除并重`$`试？

```
function showResponse(responseText, statusText, xhr, form)  {
    var id = form.attr('id');
    console.log('id:'+id);
} 
```

或者这可能是另一种解决方案，如果不是 jQuery `object`：

```
function showResponse(responseText, statusText, xhr, form)  {
    var id = $(form).attr('id');
    console.log('id:'+id);
} 
```

其他可能性

```
function showResponse(responseText, statusText, xhr, form)  {
    var id = $(form).attr('id');
    console.log('id:'+id);
}
function showResponse(responseText, statusText, xhr, form)  {
    var id = form.attr('id');
    console.log('id:'+id);
}
function showResponse(responseText, statusText, xhr, $form)  { // Won't work
    var id = form.attr('id');
    console.log('id:'+id);
}
function showResponse(responseText, statusText, xhr, $form)  { // High chance
    var id = $($form).attr('id');
    console.log('id:'+id);
} 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:12:12.377

我通过每次显式写出 jQuery 表单选择器而不是尝试将其作为对象传递来解决了这个问题。

因此，我没有试图绕过，`$form`而是使用了这个：

```
$('#myForm').attr(...) 
```

它更冗长，但至少它有效！

# objective-c - ActivityMonitor 内存使用情况是什么意思？

> ID：10942943
> 
> 赞同：1
> 
> 时间：2012-06-08T04:08:22.040
> 
> 标签：objective-c, cocoa

我有一个分配大量对象（主要是 3 个类）并偶尔释放这些对象的应用程序。ActivityMonitor Real Memory Usage 只会上升，不会下降。（确实，我在其他应用程序中也注意到了这一点。）

分析显示我的应用程序没有泄漏，垃圾收集显示正在回收的对象。

# jquery - 如何使用 jquery 验证表（网格）中的文本框值

> ID：10942948
> 
> 赞同：0
> 
> 时间：2012-06-08T04:08:58.857
> 
> 标签：jquery

单击保存按钮时，我需要验证生成的 html 表（网格）中的文本框值。以下是我到目前为止所拥有的。我使用 Firebug 跟踪代码，它只循环第一行，但我需要循环从标签内第二行开始的行。请提供任何帮助。

html代码

```
<div class="msg-body">
     <table class="dynamictable">
                <thead>
                    <tr>
                        <th style="display: none"></th>
                        <th>Package Name</th>
                        <th>Package Cost</th>
                        <th>No. of Attendees</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                 <tr class="prototype">
                        <td style="display: none"><input type="hidden" name="id[]" value="" class="id" /></td>
                        <td><input type="text" name="packagename[]" value="" class="pkname" /></td>
                        <td><input type="text" name="packagecost[]" value="" class="pkcost"/></td>
                        <td><input type="text" name="noofattendees[]" value="" class="nfattendees"/></td>
                        <td>@Html.ActionImage("", null, "~/Content/Images/delete.gif", "Delete", new { @class = "deleterows" }) </td>
                 </tr>
                 <tr>
                    <td style="display: none"><input type="hidden" name="id[]" value="" class="id" /></td>
                    <td><input type="text" name="packagename[]" value="" class="pkname" /></td>
                    <td><input type="text" name="packagecost[]" value="" class="pkcost"/></td>
                    <td><input type="text" name="noofattendees[]" value="" class="nfattendees"/></td>
                    <td>@Html.ActionImage("", null, "~/Content/Images/delete.gif", "Delete", new { @class = "deleterows" }) </td>
              </tr>
           </tbody>
    </table>
     <div style="padding:20px 0 20px 100px "><input type="button" id="btnAddButton" value="Add New" class="button addbutton"/><input type="button" id="btnSaveRow" value="Save" class="button addbutton"/></div>
</div> 
```

Javascript代码

```
 $("#btnSaveRow").click(function () {
        $('.dynamictable tr').each(function () {
            var $val = $("input[type='input']").val();
            if ($val == "") {
                alert("Please enter data");
                $(this).focus();
                return false;
            }
              return true;
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:12:58.107

```
$("#btnSaveRow").click(function() {
    $("input[type='text']", ".dynamictable tbody tr:gt(0)").each(function() {
        if (!$.trim(this.value)) {
            alert("Please enter data");
            $(this).focus();
            return false;
        }
        return true;
    });
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/180/)**

# php - 正则表达式获取 CSS 属性的大小值？

> ID：10942949
> 
> 赞同：1
> 
> 时间：2012-06-08T04:09:04.097
> 
> 标签：php, css, regex

我编写了一个正则表达式来从 CSS 属性中获取大小：

```
/(([+-]?\d*\.?\d+(\s)*(px|em|ex|pt|in|pc|mm|cm)?)|thin|medium|thick)(\s|;|$)/i 
```

但由于某种原因，它没有按预期工作。例如，当我运行以下命令时：

```
preg_match_all('/(([+-]?\d*\.?\d+(\s)*(px|em|ex|pt|in|pc|mm|cm)?)|thin|medium|thick)(\s|;|$)/i', 
"border-bottom:1px solid #99999;", $matches); 
```

它输出：

```
1px
99999; 
```

但我只希望返回 1px 值。

我理解为什么它返回上面但似乎无法弄清楚如何只返回大小而不是颜色值。我尝试使用以下负面的lookbehind，但它也不起作用：

```
/(((?<!#\d{3}|#\d{6})[+-]?\d*\.?\d+(\s)*(px|em|ex|pt|in|pc|mm|cm)?)|thin|medium|thick)(\s|;|$)/i 
```

我想将 preg_match_all 用于那些可以具有多个大小值（即边距）的 CSS 属性。

任何人都知道如何让这个正则表达式只返回大小值？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:39:12.393

好的，所以在我问了这个问题 5 分钟后，我想通了。使用正向的lookbehind 并检查“”或分号。

```
'/((?<=\s|:)([+-]?\d*\.?\d+(\s)*(px|em|ex|pt|in|pc|mm|cm)?)|thin|medium|thick)(\s|;|$)/i' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:12:45.193

你为什么不尝试删除`#\d{3}|#\d{6}`你的`regexp`并尝试？

```
preg_match_all('/(([+-]?\d*\.?\d+(\s)*(px|em|ex|pt|in|pc|mm|cm)?)|thin|medium|thick)(\s|;|$)/i', "border-bottom:1px solid #99999;", $matches); 
```

# actionscript-3 - 如何改进这个 AS3 代码结构更有效？

> ID：10942951
> 
> 赞同：0
> 
> 时间：2012-06-08T04:09:12.230
> 
> 标签：actionscript-3, flash, actionscript, addeventlistener

我已经制作了一个 AS3 代码作为一个函数。但我认为我的代码太长了。你能帮忙改进吗？谢谢！

我首先创建了 test.fla，并在舞台上添加了 5 个灰色块（来自 PSD 的外部图片）。我的功能是将鼠标悬停在相应的灰色块上时显示不同的图片。

我将这 5 个灰色块转换为影片剪辑，并将实例名称设置为 sp1、sp2、sp3、sp4 和 sp5。然后我创建了一个文档类 test.as 并设置了 5 个 EventListener。

```
sp1.addEventListener(MouseEvent.MOUSE_OVER,clickmouse1);
sp2.addEventListener(MouseEvent.MOUSE_OVER,clickmouse2);
sp3.addEventListener(MouseEvent.MOUSE_OVER,clickmouse3);
sp4.addEventListener(MouseEvent.MOUSE_OVER,clickmouse4);
sp5.addEventListener(MouseEvent.MOUSE_OVER,clickmouse5); 
```

所以我的第一个问题是我有什么方法可以将这 5 个 EventListener 组合成一个吗？因为在我看来，这么多的 EventListener 将花费更多的 PC 资源。

我的第二个问题是我将 5 张目标图片设置为 5 类。

在 test.as 我创建了下面的代码：

```
public class EuroCup extends Sprite{
    var arr:Array=new Array();
    var Res1:Result609=new Result609();
    var Res2:Result610=new Result610();
    var Res3:Result611=new Result611();
    var Res4:Result612=new Result612();
    var Res5:Result613=new Result613();
    var i:int=0;

    public function EuroCup() {
        arr[1]=Res1;
        arr[2]=Res2;
        arr[3]=Res3;
        arr[4]=Res4;
        arr[5]=Res5;
    }
} 
```

我认为这太冗长了。有什么办法可以简化吗？这里是 test.fla 和 test.as：随便[下载](http://www.renyi-nick.com/wp-content/uploads/2012/06/test.rar) ，谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:46:52.317

您可以/应该使用字典来关联灰色矩形和要显示的图像。

```
package {
  public class EuroCup {

    private var _children:Array, _current:Sprite, _map:Dictionary;

    public function EuroCup() {
      super();
      initialize();
    }

    protected function initialize():void {
      _children = [];
      _map = new Dictonary();

      // i don't know the image's symbol name.
      // _map[_children[_children.length] = new Result609()] = new SYMBOL_NAME();

      for each(var child:Sprite in _children) {
        child.addEventListener(MouseEvent.CLICK, click_handler);
      }
    }

    private function click_handler(event:MouseEvent):void
    {
      if (_current) {
        _current.visible = false; // or use fading, etc
      }

      _current = _map[event.currentTarget] as Sprite;

      if (_current) {
        _current.visible = true; // or use fading, etc
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T05:04:58.273

重组：

```
public class EuroCup extends Sprite {
    private var arr:Array;

    public function EuroCup() {
        arr = [ new Result609(), new Result610(),
                new Result611(), new Result612(), new Result613()
              ];
    }
} 
```

然后将结果用作 arr[0]、arr[1] 等。此外，如果您有多个 sprite 来监听点击，并且具有类似的侦听器，您可以将所有这些 sprite 连接到单个侦听器并使用 event.target 来区分它们，其中 event 是 MouseEvent。或者将它们放入容器并为该容器创建一个侦听器 - 再次， event.target 将告诉单击了哪个精灵。
然而有两件事 - 每次你看到`new Array()`，替换它`[]`- 它更快更短。并将所有代码放入构造函数，而不是类体 - 它将被编译以更快地执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T09:14:12.223

我会选择更简单的版本；仅添加一个事件侦听器并使用`Event.target`switch 语句确定单击了哪个项目。

如果按钮应该做不同的事情，这很有帮助。

```
package  
{
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Test extends Sprite
    {
        public var sp1:Sprite;
        public var sp2:Sprite;
        public var sp3:Sprite;

        public function Test()
        {  
            this.addEventListener(MouseEvent.MOUSE_OVER, handleClick);
        }

        private function handleClick(event:MouseEvent):void
        {
            trace("Clicked on: " + event.target)
            switch (event.target)
            {
                case this.sp1:
                {
                    // do something here
                    break;
                }
                case this.sp2:
                {
                    // do something here
                    break;
                }
                case this.sp3:
                {
                    // do something here
                    break;
                }
                default
                {
                    trace("No handler defined for: " + event.target)
                }
            }   
        }
    }
} 
```

但是，您也可以巧妙地使用它的类型。假设所有按钮都扩展了一个名为 的自定义类`CustomButton`，并且它们都需要执行相同的操作（例如调用函数），但是使用基于其 id 的参数。

如果按钮基本上应该做同样的事情，这很有帮助。

```
package  
{
    import flash.display.Sprite;
    import flash.events.MouseEvent;

    public class Test extends Sprite
    {
        public function Test()
        {  
            this.addEventListener(MouseEvent.MOUSE_OVER, handleClick);
        }

        private function handleClick(event:MouseEvent):void
        {
            if (event.target is CustomButton)
            {
                var button:CustomButton = event.target as CustomButton; // you're now sure it's a CustomButton
                this.showById(button.id); // let's say CustomButton has a public var 'id'
            }
        }

        private function showById(id:int):void
        {
            // do something
        }
    }
} 
```

希望有帮助。

**提示**：始终以大写字母开头您的类+文件名。变量以大写字母开头。这在动作脚本世界中很常见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:08:25.290

简化代码的一种选择是使用*Dictionary*`sp`按身份将和`Res`实例相互关联。这使您可以避免跟踪数组索引的工作，这是您拥有单独的事件处理程序方法的一半原因。一旦实例通过身份关联，您就可以使用已调度事件的*currentTarget*属性来确定您希望在舞台上显示 Dictionary 中的哪个元素。

 **```
package  {
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.events.Event;
import flash.utils.Dictionary;

public class test extends Sprite
{
    var dict:Dictionary = new Dictionary();
    var visibleResult:MovieClip;

    public function test()
    {
        dict[sp1]=new Result609();
        dict[sp2]=new Result610();
        dict[sp3]=new Result611();
        dict[sp4]=new Result612();
        dict[sp5]=new Result613();

        sp1.addEventListener(MouseEvent.MOUSE_OVER,clickmouse);
        sp2.addEventListener(MouseEvent.MOUSE_OVER,clickmouse);
        sp3.addEventListener(MouseEvent.MOUSE_OVER,clickmouse);
        sp4.addEventListener(MouseEvent.MOUSE_OVER,clickmouse);
        sp5.addEventListener(MouseEvent.MOUSE_OVER,clickmouse);
    }

    private function clickmouse(evt:MouseEvent):void
    {
        if(visibleResult)
        {
            removeChild(visibleResult);
        }
        var Res:MovieClip = dict[evt.currentTarget] as MovieClip;
        addChild(Res);
        Res.x=300;
        Res.y=400;
        visibleResult=Res;
    }
}
} 
```

如果您希望应用程序中有超过 5 个`sp`实例，那么您可以使用循环来分配事件侦听器。但是对于少于 10 个实例，您可能不会从循环中获得太多收益。**

# c# - 使用 c# 以编程方式更改 mysql 连接字符串

> ID：10942957
> 
> 赞同：1
> 
> 时间：2012-06-08T04:10:22.027
> 
> 标签：c#, asp.net, app-config

我想在运行时更改 app.setting 连接字符串。我有一些代码可以更改它，但我不能这样做。运行时没有出现错误。但是在执行过程中没有变化。

这是我的部分代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="Punch_Uploader.Properties.Settings.testConnectionString"
            connectionString="server=localhost;User Id=root;password=test123;database=test"
            providerName="MySql.Data.MySqlClient" />
        <add name="Punch_Uploader.Properties.Settings.testConnectionString1"
            connectionString="server=172.23.2.52;User Id=root;password=test123;database=test"
            providerName="MySql.Data.MySqlClient" />
    </connectionStrings>
</configuration> 
```

和：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.ConnectionStrings.ConnectionStrings.Add(
    new ConnectionStringSettings("Punch_Uploader.Properties.Settings.testConnectionString2", 
        String.Format(
            "server={0};Port={1}; database={2};User Id={3};password={4};providerName={5}", 
            "172.23.2.32", "3306", "test", "root", "test123", "MySql.Data.MySqlClient")
        )
);
config.Save(ConfigurationSaveMode.Modified, true);
ConfigurationManager.RefreshSection("connectionStrings"); 

MessageBox.Show(ConfigurationManager
    .ConnectionStrings["Punch_Uploader.Properties.Settings.testConnectionString2"]
    .ConnectionString); 
```

上面的代码对我不起作用....

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T05:00:25.013

```
ConnectionStringSettings settings =
    ConfigurationManager.ConnectionStrings["Punch_Uploader.Properties.Settings.testConnectionString"];

string connectString = settings.ConnectionString;    

SqlConnectionStringBuilder builder =
        new SqlConnectionStringBuilder(connectString);

builder.DataSource = "172.23.2.52:3306";
builder.InitialCatalog = "test";
builder.UserID = "root";
builder.Password = "test123"; 
```

正如前面回答的评论中提到的，我可以确认此方法有效，因为我以前使用它在不同的数据库环境之间切换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:46:38.300

连接字符串是只读的。要更改连接字符串，您需要手动将更改保存回配置文件，这将导致应用程序重新启动。

编辑：快速搜索，我发现了这个（可能有帮助）：[运行时的连接字符串](https://stackoverflow.com/questions/357465/can-i-add-connectionstrings-to-the-connectionstringcollection-at-runtime)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T04:59:57.760

试试这个，

```
 Configuration webConfig = WebConfigurationManager.OpenWebConfiguration("~");
 ConnectionStringsSection section = webConfig.GetSection("connectionStrings") as            
                                              ConnectionStringsSection;
 if (section != null)
 {
   section.ConnectionStrings["NameTheCnStr"].ConnectionString = "New Connection string here";
   webConfig.Save();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:21:12.023

尝试此代码

```
 private void UpdateConnectionString(string ConfigPath)
 {
     XmlDocument xmlDocument = new XmlDocument();
     xmlDocument.Load(ConfigPath);
      XmlNode parentNode = xmlDocument.DocumentElement;
     if (parentNode.Name == "connectionStrings")
     {
        foreach (XmlNode childNode in parentNode.ChildNodes)
        {
           if (childNode.Name == "add" && childNode.Attributes["name"].Value=="Punch_Uploader.Properties.Settings.testConnectionString")
           {
             string sqlConnectionString =childNode.Attributes["connectionString"].Value;
             SqlConnectionStringBuilder sqlBuilder = new SqlConnectionStringBuilder(sqlConnectionString);
             sqlBuilder.InitialCatalog = "yourDatabaseName";
             sqlBuilder.IntegratedSecurity = true;
             sqlBuilder.Password = "";

             //Change any other attributes using the sqlBuilder object
             childNode.Attributes["connectionString"].Value = sqlBuilder.ConnectionString;
           }
        }
      }
      xmlDocument.Save(ConfigPath);
  } 
```

configPath 是来自 Web.config 的连接字符串的路径

```
string configPath  = ConfigurationManager.ConnectionStrings["Punch_Uploader.Properties.Settings.testConnectionString"].ConnectionString; 
```

# bash - Bash grep 变量来自单行上的多个变量

> ID：10942958
> 
> 赞同：0
> 
> 时间：2012-06-08T04:10:53.863
> 
> 标签：bash, variables, grep

我正在使用 GNU bash，版本 4.2.20(1)-release (x86_64-pc-linux-gnu)。我有一个音乐文件列表，我转储到一个变量中：`$pltemp`.

例子：

```
/Music/New/2010s/2011;Ziggy Marley;Reggae In My Head 
```

我希望在 Master-Music-List.txt 中对上面的第三个字段进行 grep，然后为第二个字段继续另一个 grep。如果两者都匹配，则打印 else echo "Not Matched"。

因此，上面将搜索歌曲标题（Reggae In My Head），然后确保它在同一行中有艺术家“Shaggy”，以获得成功。

到目前为止，非变量 grep 的成功；

```
$ grep -i -w -E 'shaggy.*angel' Master-Music-MM-Playlist.m3u
$ if ! grep Shaggy Master-Music-MM-Playlist.m3u ; then echo "Not Found"; fi
$ grep -i -w Angel Master-Music-MM-Playlist.m3u | grep -i -w shaggy 
```

我不确定如何最好地构建要处理的“整个”列表。

*   我想在一行上做到这一点。

我用它来将列表转储到变量`$pltemp`中......

原来的：`\Music\New\2010s\2011\Ziggy Marley - Reggae In My Head.mp3`

```
$ pltemp="$(cat Reggae.m3u | sed -e 's/\(.*\)\\/\1;/' -e 's/\(.*\)\ -\ /\1;/' -e 's/\\/\//g' -e 's/\\/\//g' -e 's/.mp3//')" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T04:25:06.353

如果你真的想“grep this, then grep that”，你需要比 grep 本身更复杂的东西。怎么样`awk`？

```
awk -F';' '$3~/title/ && $2~/artist/ {print;n=1;exit;} END {if(n=0)print "Not matched";}' 
```

如果你想让这个搜索作为一个脚本来访问，同样的事情只是改变了形式。例如：

```
#!/bin/sh

awk -F';' -vartist="$1" -vtitle="$2" '$3~title && $2~artist {print;n=1;exit;} END {if(n=0)print "Not matched";}' 
```

将其写入文件，使其可执行，并将内容通过管道传输给它，将您要查找的艺术家子字符串/正则表达式作为第一个命令行选项，将标题子字符串/正则表达式作为第二个选项。

另一方面，您正在寻找的可能只是一个稍微复杂的正则表达式。让我们为您将其包装在 bash 中：

```
if ! echo "$pltemp" | egrep '^[^;]+;[^;]*artist[^;]*;.*title'; then
  echo "Not matched"
fi 
```

如果您愿意，可以将其压缩为一行。或者让它成为一个独立的 shell 脚本，或者让它成为你的 .bashrc 文件中的一个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:25:23.040

```
awk -F ';' -v title="$title" -v artist="$artist" '$3 ~ title && $2 ~ artist' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T00:01:25.113

好吧，以上都不起作用，所以我想出了这个......

```
for i in *.m3u; do 
    cat "$i" | sed 's/.*\\//' | while read z; do 
        grep --color=never -i -w -m 1 "$z" Master-Music-Playlist.m3u \
        | echo "#NotFound;"$z" "
        done  > "$i"-MM-Final.txt;
done 
```

读取每一行（`\Music\Lady Gaga - Paparazzi.mp3`），剥离路径，在主音乐列表中搜索歌曲，如果没有找到，它会回显`"Not Found"`，保存到新的播放列表中。

作品{已解决}

不管怎么说，还是要谢谢你。

# android-layout - 如何在片段内显示不同的布局

> ID：10942959
> 
> 赞同：1
> 
> 时间：2012-06-08T04:11:15.053
> 
> 标签：android-layout, android-fragments

我正在使用 Android Honeycomb (Tab) 中的两个片段。左边是一个`ListView`，右边是从列表中选择的项目的预览。单击其中一个按钮时，我想在左侧显示不同的布局。这怎么可能？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T04:47:21.073

你可以这样做，我使用这些链接做了同样的事情，这是我与你分享的代码，希望它对你有所帮助......你首先必须创建 4 个布局。其中2个用于横向模式，一个用于纵向模式，另一个用于平板电脑。您必须为布局创建更多文件夹，它们的名称应该类似于`layout-xlarge`and `layout-xlarge-port`，这样您就可以为移动设备和平板电脑创建片段。

**MasterFragment 活动：**

```
public class MasterFragment extends ListFragment {
    Boolean isDualPane;
    int position;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        ArrayList<String> parkNames = new ArrayList<String>();
        for (Park park : Resort.PARKS) {
            parkNames.add(park.getName());
        }

        setListAdapter(new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, parkNames));
        View detailFrame = getActivity().findViewById(R.id.detail);
        isDualPane = detailFrame != null && detailFrame.getVisibility() == View.VISIBLE;

        if (savedInstanceState != null) {
            position = savedInstanceState.getInt("position", 0);
        }

        if (isDualPane) {
            getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            showDetail(position);
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("position", position);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        showDetail(position);
    }

    void showDetail(int position) {
        this.position = position;
        if (isDualPane) {
            getListView().setItemChecked(position, true);
            DetailFragment detailFragment = (DetailFragment) getFragmentManager()
                    .findFragmentById(R.id.detail);

            if (detailFragment == null || detailFragment.getIndex() != position) {
                detailFragment = new DetailFragment(position);
                FragmentTransaction ft = getFragmentManager()
                        .beginTransaction();
                ft.replace(R.id.detail, detailFragment);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }
        } else {
            Intent intent = new Intent();
            intent.setClass(getActivity(), DetailActivity.class);
            intent.putExtra("position", position);
            startActivity(intent);
        }
    }
} 
```

**第二个活动 - DetailFragment 活动：**

```
public class DetailActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.detail_act);
        Bundle bundle = getIntent().getExtras();
        int position = bundle.getInt("position");
        System.out.println("RR : position is : " + position);

        Integer[] images = { R.drawable.pic1, R.drawable.pic2, R.drawable.pic3,
                R.drawable.pic4, R.drawable.pic5, R.drawable.pic6,
                R.drawable.pic7, R.drawable.pic8, R.drawable.pic9,
                R.drawable.pic10, R.drawable.pic11, R.drawable.pic12,
                R.drawable.pic13 };

        final ImageView imgview = (ImageView) findViewById(R.id.imageView1);
        imgview.setImageResource(images[position]);

        // DetailFragment detailFragment = new DetailFragment(position);
        // FragmentManager fm = getSupportFragmentManager();
        // FragmentTransaction ft =fm.beginTransaction();
        // ft.add(android.R.id.content, detailFragment).commit();

    }
} 
```

`MasterGridActivity`现在您必须为我用于在片段中显示的图像创建第三个活动`GridView`。

```
public class MasterGridActivity extends Fragment {

    Boolean isDualPane;
    GridView gridView;
    ListView listView;
    int position;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.gridview, container, false);

        gridView = (GridView) view.findViewById(R.id.gridViewImage);
        gridView.setAdapter(new MyAdapter(view.getContext()));

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        View detailFrame = getActivity().findViewById(R.id.detail);

        isDualPane = detailFrame != null && detailFrame.getVisibility() == View.VISIBLE;

        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int pos, long arg3) {
                if (!isDualPane) {
                    Intent intent = new Intent();
                    intent.setClass(getActivity(), DetailActivity.class);
                    intent.putExtra("position", pos);
                    startActivity(intent);
                } else {
                    DetailFragment detailFragment = (DetailFragment) getFragmentManager().findFragmentById(R.id.detail);

                    if (detailFragment == null || detailFragment.getIndex() != pos) {

                        detailFragment = new DetailFragment(pos);
                        FragmentTransaction ft = getFragmentManager().beginTransaction();

                        ft.replace(R.id.detail, detailFragment);
                        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                        ft.commit();
                    }
                }
            }
        });

        super.onActivityCreated(savedInstanceState);
    }
} 
```

现在这是我的图像适配器 -`MyAdapter`用于扩展`BaseAdapter`.

```
public class MyAdapter extends BaseAdapter {

    private Context mContext;

    public MyAdapter(Context c) {
        mContext = c;
    }

    @Override
    public int getCount() {
        return mThumbIds.length;
    }

    @Override
    public Object getItem(int arg0) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) { // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
            imageView.setImageResource(mThumbIds[position]);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(0, 0, 0, 0);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    static Integer[] mThumbIds = { R.drawable.pic1, R.drawable.pic2,
            R.drawable.pic3, R.drawable.pic4, R.drawable.pic5, R.drawable.pic6,
            R.drawable.pic7, R.drawable.pic8, R.drawable.pic9,
            R.drawable.pic10, R.drawable.pic11, R.drawable.pic12,
            R.drawable.pic13,
    };
} 
```

现在我正在共享这些片段的 XML 文件。

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <fragment
        android:id="@+id/master"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="org.fragment.MasterGridActivity" />

</LinearLayout> 
```

**网格视图.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

  <GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridViewImage"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:columnWidth="90dp"
    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp"
    android:gravity="center"
    android:stretchMode="columnWidth" />
</LinearLayout> 
```

**detail_fragment.xml**：此 XML 用于显示另一个片段中的详细信息。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_margin="8dp" />

        <TextView
            android:id="@+id/textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:padding="8dp" />
    </LinearLayout>
</ScrollView> 
```

**detail_act.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

  <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/ic_launcher" />
</LinearLayout> 
```

为横向模式和平板电脑制作相同的 XML。它对我来说很好。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:50:05.470

您需要为[**活动活动回调定义一个事件**](http://developer.android.com/guide/topics/fundamentals/fragments.html#EventCallbacks)回调。也就是说，您的左侧片段必须首先通知容器活动发生了事件（即选择了列表项之一）。容器活动然后将这个信息传递给正确的片段，然后相应地更新它的 UI。

我可以更详细地解释这一点，但互联网上有几个[**教程**](http://android-developers.blogspot.com/2011/02/android-30-fragments-api.html)就是这样教的。我建议你通读其中的一些[**，**](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)因为一旦你阅读了这个概念，就会变得更有意义。

# sql-server - 如何诊断缓慢的 NHibernate 插入？

> ID：10942962
> 
> 赞同：3
> 
> 时间：2012-06-08T04:11:25.070
> 
> 标签：sql-server, nhibernate, bulkinsert

我知道 NHibernate 不打算进行批量插入，因为它比 SqlBulkCopy 慢 5 倍，但我决定使用它来简化代码。

但是，我的代码并没有慢 5 倍。它慢了 2400 倍。我正在插入大约 2500 条记录。我已经关闭了 log4net 日志记录。我在发布模式下运行它。我没有使用 id 生成器（我通过整数计数器在代码中指定它）。我正在使用无状态会话。我将批量大小设置为 100（我可以做得更多，但似乎没有帮助）。我尝试重新添加生成器，但将其类设置为“已分配”。

我没有插入任何子元素。我已经确认批量插入正在发生。

它还在调用 SELECT SCOPE_IDENTITY() 吗？但即使是这样，这仍然是一个荒谬的时间。

我没有做太多的批处理操作，所以我可以继续使用 SqlBulkCopy 进行这个过程，但我担心我的整个应用程序可能运行得更快。

我没有 NHProf 的许可证，但我想知道现在是否可以下载试用版。

我将 NHibernate 3.3 GA 与 Syscache2 一起使用——但同样，我使用的是无状态会话。

您想查看任何 HBM、配置或代码吗？建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:59:14.490

> 因为它比 SqlBulkCopy 慢大约 5 倍

你一定是在开玩笑。

NHibrnate 进行插入。使用批量插入（即一个命令中的多个插入语句），手写 - 我认为 NHibernate 不会这样做 - 我在一个特定项目中获得了大约 400 个插入。

使用 SqlBUlkCopy 我得到了 75000。

这不是 5 的因数，而是 187 的因数。

> 但是，我的代码并没有慢 5 倍。它慢了 2400 倍

不是 NHibernate 专家。记录连接 - 我假设 NHibernate 每批发送一个插入，这意味着处理速度很慢等，并且比我做的东西慢很多（我的文本开头）。

你到底是从哪里得到 5 倍系数的？这是一个错误的开始。

> 我没有做太多的批处理操作，所以我可以继续使用 SqlBulkCopy 进行这个过程，但我担心我的整个应用程序可能运行得更快。

这是一个现实检查：当您需要极高的选择或插入速度时，不要使用 ORM。它们用于业务规则重的对象 - 业务对象。当您最终进行批量插入或读取时，您不要使用完整的 ORM。就这么简单。

如果您认为 SqlBUlkCopy 很快，请检查： * 多个 SqlBulkCopy 在多个线程上运行... * ...对临时表进行惰性化，然后 * ...使用一个 insert into select 语句将数据复制到最终表。

为什么？因为 SqlBulkCopy 对多线程有一些不好的锁定行为。这就是我把它弄得那么高的原因。

并且： SqlBulkCopy 的 2500 行很低 - 设置开销很大（即在第 1 行之前）......所以你会得到更少的收益。我使用 50k 行批次。

NHibernate 在线级别上做了什么？

> 我已经确认批量插入正在发生。

如何？您如何看待批量插入？

桌上有触发器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:45:20.403

在我的 devmashine 上将 10000 个具有几个 long 和 string 属性的对象插入本地 mysql 数据库需要：

```
StatelessSession:  4,6 seconds
Session:           5,7 seconds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:51:07.993

我发现如果您执行许多插入操作，一级缓存会阻塞并很快导致其缓慢爬行。您可以尝试使用无状态会话，或者只是定期打开和关闭会话，即每 5 次插入。通过关闭会话，您当然会丢失诸如交易之类的东西。

但最终，如果我有超过 100 行要插入，我倾向于使用 SqlBulkCopy，速度要快很多倍。

# file-upload - Primefaces 3.3 一种形式的多个文件上传

> ID：10942964
> 
> 赞同：0
> 
> 时间：2012-06-08T04:11:34.783
> 
> 标签：file-upload, primefaces

我正在使用 Primefaces 3.3。我需要在一个表单中以高级模式使用两个文件上传。我遇到的问题是，当我使用第一个 fileUpload 上传一些文件时，似乎第二个 fileUpload 也被激活，因为它显示要上传的相同文件名，尽管我没有点击第二个 fileUpload。

我怎么解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:33:37.003

Primefaces 现在只支持表单中的一个高级 Fileupload 控件。

# php - PHP/MySQL 数组到带有聚合计算的表

> ID：10942968
> 
> 赞同：0
> 
> 时间：2012-06-08T04:11:57.393
> 
> 标签：php, mysql, arrays, foreach, while-loop

我需要生成一个 PHP 页面，该页面以显示每个类似行项目的计数/摘要的方式显示存储在数组中（来自 MySQL 请求）的所有详细信息。

这是一个从 SQL 查询中收集的示例数据集（它的结构为 ORDER BY Workgroup, ProductCode）：

```
+----+-------------+-------------+-----------+-----------+
| ID | ProductCode | Description | Workgroup |   Status  |
+----+-------------+-------------+-----------+-----------+
|  2 |     A123    |    Coke     |  Finance  |  Ordered  |
|  4 |     A123    |    Coke     |  Finance  |  Rejected |
|  1 |     A123    |    Coke     |  Finance  |  Rejected |
|  6 |     B111    |    Pepsi    |  Finance  |  Ordered  |
|  5 |     B111    |    Pepsi    |  Finance  |  Rejected |
|  8 |     B111    |    Pepsi    |  Finance  |  Rejected |
| 10 |     B112    |    Fanta    |  Finance  |  Ordered  |
| 42 |     A123    |    Coke     | Management|  Ordered  |
| 16 |     A123    |    Coke     | Management|  Ordered  |
| 11 |     B112    |    Fanta    | Management|  Rejected |
+----+-------------+-------------+-----------+-----------+ 
```

这些详细信息已存储在 PHP 数组中，如下所示：

```
 Array
    (
        [0] => Array
            (
                [ID] => 2
                [ProductCode] => A123
                [Description] => Coke
                [Workgroup] => Finance
                [Status] => Ordered
            )
        [1] => Array
            (
                [ID] => 4
                [ProductCode] => A123
                [Description] => Coke
                [Workgroup] => Finance
                [Status] => Rejected
            )
             ...etc
) 
```

我需要的是在由 WorkGroup 分隔的多个表中吐出数据，每个产品有一个汇总行，下面列出每个单独的行项目（它不需要是一个 html 表，只是一些能够表示行项目）

从我展示的 10 个示例条目中，它需要输出以下内容：

```
+--------------------------------------------------------+
| FINANCE TEAM                                           |
+----+-------------+-------------+-----------+-----------+
| Coke      Total: 3     Ordered: 1     Rejected: 2      |
+----+-------------+-------------+-----------+-----------+
|  2 |     A123    |    Coke     |  Finance  |  Ordered  |
|  4 |     A123    |    Coke     |  Finance  |  Rejected |
|  1 |     A123    |    Coke     |  Finance  |  Rejected |
+----+-------------+-------------+-----------+-----------+
| Pepsi    Total: 3     Ordered: 1      Rejected: 2      |
+----+-------------+-------------+-----------+-----------+
|  6 |     B111    |    Pepsi    |  Finance  |  Ordered  |
|  5 |     B111    |    Pepsi    |  Finance  |  Rejected |
|  8 |     B111    |    Pepsi    |  Finance  |  Rejected |
+----+-------------+-------------+-----------+-----------+
| Fanta    Total: 1     Ordered: 1      Rejected: 0      |
+----+-------------+-------------+-----------+-----------+
| 10 |     B112    |    Fanta    |  Finance  |  Ordered  |
+----+-------------+-------------+-----------+-----------+

+--------------------------------------------------------+
| MANAGEMENT TEAM                                        |
+----+-------------+-------------+-----------+-----------+
| Coke      Total: 2     Ordered: 2     Rejected: 0      |
+----+-------------+-------------+-----------+-----------+
| 42 |     A123    |    Coke     | Management|  Ordered  |
| 16 |     A123    |    Coke     | Management|  Ordered  |
+----+-------------+-------------+-----------+-----------+
| Fanta      Total: 1    Ordered: 0     Rejected: 1      |
+----+-------------+-------------+-----------+-----------+
| 11 |     B112    |    Fanta    | Management|  Rejected |
+----+-------------+-------------+-----------+-----------+ 
```

如果我的要求不够清楚，我可以进一步详细说明。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:33:54.013

php 数组很容易转换成树状结构。您听起来好像您知道如何编程，所以我不会发送tehfullcodez，因为我认为您可以处理一些嵌套循环以在将其放入更方便的格式后自己生成最终的 html。

```
$tree = array();
foreach ($arr as $row) {
    extract($row);
    $tree[$Workgroup][$Description][] = $row;
}
print_r($tree); 
```

# android - phoneGap Android - 填充数据库一次“错误处理 SQL：1”

> ID：10942971
> 
> 赞同：1
> 
> 时间：2012-06-08T04:12:29.937
> 
> 标签：android, database, cordova, populate

如果数据库存在，我试图避免填充数据库但是当我尝试在我的代码中取消这一行时，我得到**“错误处理 SQL：1”**

```
tx.executeSql('DROP TABLE IF EXISTS DEMO'); 
```

这是我的整个填充功能

```
 function populateDB(tx) {
        tx.executeSql('DROP TABLE IF EXISTS DEMO');
        tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, word TEXT NOT NULL');
        tx.executeSql('INSERT INTO DEMO (id, word) VALUES ("1", "Apple")');
        tx.executeSql('INSERT INTO DEMO (id, word) VALUES ("2", "Orange")');

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:51:36.177

你为什么不使用

```
CREATE TABLE IF NOT EXISTS DEMO  (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, kword TEXT NOT NULL, eword TEXT NOT NULL, pronoun TEXT NOT NULL, level INTEGER NOT NULL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T06:00:02.023

您的函数有一系列问题，这些问题在下面得到纠正。它现在应该可以工作了。

```
 function populateDB(tx) {
        isTableExists(tx, "DEMO", function(status) {
            if (!status) {
                alert("table not exist, creating one");
                tx.executeSql('CREATE TABLE DEMO (id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, kword TEXT NOT NULL, eword TEXT NOT NULL, pronoun TEXT NOT NULL, level INTEGER NOT NULL)');
                tx.executeSql('INSERT INTO DEMO (kword, eword, pronoun, level) VALUES ("Apple", "", "", 1)');
                tx.executeSql('INSERT INTO DEMO (kword, eword, pronoun, level) VALUES ("Orange", "", "", 2 )');
            } else {
                alert("table exist, dropping for test");
                tx.executeSql('DROP TABLE DEMO');
            }
        });
    }

    function isTableExists(tx, tableName, callback) {
        tx.executeSql('SELECT * FROM DEMO', [], function(tx, resultSet) {
            if (resultSet.rows.length <= 0) {
                callback(false);
            } else {
                callback(true);
            }
        }, function(err) {
            callback(false);
        });
    } 
```

# php - 带有 html 内容的 PHP PDO bindParam

> ID：10942972
> 
> 赞同：1
> 
> 时间：2012-06-08T04:12:31.420
> 
> 标签：php, pdo

我尝试将 html 内容保存到数据库中，使用 ' 或 " 它会自动给出一个斜杠，这很好，所以我不必执行 mysql_escape_string。但是当我加载字符串时，它显示为

```
<a href=/"yes/">test</a> 
```

如果我再次保存它，我得到了这个

```
<a href=//"yes//">test</a> 
```

这是否意味着当我回显字符串时我应该去掉斜线？

```
$html = '<a href="yes">test</a>';
$insertStatement = $pdo->prepare('insert into content (html) values (:html)');
$pdo->bindParam(:html, $html);
$pdo->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:25:51.740

采用

```
$pdo->bindValue(':html', $html, PDO::PARAM_STR); 
```

代替

```
$pdo->bindParam(:html, $html); 
```

# wordpress - wordpress add_action（'save_post'，'my_function）不起作用

> ID：10942973
> 
> 赞同：1
> 
> 时间：2012-06-08T04:12:36.707
> 
> 标签：wordpress, wordpress-theming

我正在尝试在 wordpress 中保存/更新帖子时触发偶数...请参见此处：

```
add_action('save_post', 'generate_location');

function generate_location($post_id) {   
    echo "hey"; 
} 
```

问题是它不工作......任何想法为什么？句法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:20:39.420

WordPress 实现了[Post/Redirect/Get 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)以避免重复的表单提交，因此您不会`echo`从`save_post`回调中看到任何内容。

相反，您可以执行`wp_die( 'hey' )`替代操作，或者将某些内容记录到数据库或文件系统中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-12T19:57:56.633

我不知道你是否得到了这个工作，但我遇到了同样的问题并发现了如何解决它！

在第 2940 行的 wp-includes/post.php 中（在撰写本文时），此 if/else 在保存帖子时运行：

```
if ( !empty($page_template) && 'page' == $data['post_type'] ) { 
```

您会注意到，如果模板出现错误，则函数会停在那里并且永远不会调用 save_post。

就我而言，我试图保存的帖子是从预先存在的网站导入的。新站点根本没有页面模板，因此 WP 仍在尝试使用之前的模板保存页面，失败，因此；save_post 从未被调用过。

我添加了

```
/* Template Name: Default Template */ 
```

到page.php，批量编辑，选择模板并保存。从 page.php 中删除模板名称（因为它显示了两次（，现在每次都会触发 save_post。

无论如何，这就是我的解决方案。我敢肯定它会影响其他人，在某个地方。

# liferay - Liferay 6.1 中的多文件上传

> ID：10942980
> 
> 赞同：3
> 
> 时间：2012-06-08T04:13:39.483
> 
> 标签：liferay

有没有人在 Liferay 6.1 中尝试过多个文件上传。我试图以与 6.0 相同的方式进行操作，但失败得很厉害。我看到页面左上角的开始链接而不是 portlet。当我单击它并选择一些文件时，控件不会转到我的 portlet。我检查了我的 portlet.xml 并验证了 portlet-class 是否正确。这是jsp中的片段

```
<liferay-portlet:actionURL doAsUserId="<%= user.getUserId() %>" windowState="pop_up" name="uploadFile" var="uploadFileURL" >
    <portlet:param name="jspPage" value="/html/fileuploadportlet/view.jsp" />
</liferay-portlet:actionURL>

<div class="lfr-dynamic-uploader">
        <div class="lfr-upload-container" id="<portlet:namespace />fileUpload"></div>
    </div>
<div id="<portlet:namespace/>fallback"></div>
<aui:script use="liferay-upload">
    new Liferay.Upload({
        allowedFileTypes: '<%= StringUtil.merge(PrefsPropsUtil.getStringArray(PropsKeys.DL_FILE_EXTENSIONS, StringPool.COMMA)) %>',
        container: '#<portlet:namespace />fileUpload',
        maxFileSize: <%=Long.parseLong(PrefsPropsUtil.getString(PropsKeys.DL_FILE_MAX_SIZE)) %> / 1024,
        namespace:'<%=renderResponse.getNamespace()%>',
        uploadFile: '<%=uploadFileURL.toString()%>',
        buttonHeight: 100,
        buttonText: 'BEGIN',
        buttonWidth: 100,
        onFileComplete: function(){alert('fileComplete');},
        onUploadError: function(){alert('error');}
    });
</aui:script> 
```

这是我的 portlet 的 processAction 方法

```
@Override
    public void processAction(ActionRequest actionRequest,
            ActionResponse actionResponse) throws IOException, PortletException {
        System.out.println("Something");
        UploadPortletRequest uploadRequest=PortalUtil.getUploadPortletRequest(actionRequest);
        File file =uploadRequest.getFile("file");
        System.out.println(file.getName());
        for(int i=0;i<50000;i++){
            System.out.println("Something");
        }

    } 
```

![截屏](../Images/b6fbcbe3c2873f1cec2ab7df598f94fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:02:40.400

你能检查你`<aui:script>`是否正确，下面是 html/portlet/document_library/upload_multiple_file_entries.jsp 中显示的内容，我认为你缺少属性**tempFileURL**：

```
 <aui:script use="liferay-upload">
        new Liferay.Upload(
            {
                allowedFileTypes: '<%= allowedFileExtensions %>',
                container: '#<portlet:namespace />fileUpload',
                deleteFile: '<liferay-portlet:actionURL doAsUserId="<%= user.getUserId() %>"><portlet:param name="struts_action" value="/document_library/edit_file_entry" /><portlet:param name="<%= Constants.CMD %>" value="<%= Constants.DELETE_TEMP %>" /><portlet:param name="folderId" value="<%= String.valueOf(folderId) %>" /></liferay-portlet:actionURL>&ticketKey=<%= ticket.getKey() %><liferay-ui:input-permissions-params modelName="<%= DLFileEntryConstants.getClassName() %>" />',
                fileDescription: '<%= StringUtil.merge(PrefsPropsUtil.getStringArray(PropsKeys.DL_FILE_EXTENSIONS, StringPool.COMMA)) %>',
                maxFileSize: '<%= PrefsPropsUtil.getLong(PropsKeys.DL_FILE_MAX_SIZE) %> B',
                metadataContainer: '#<portlet:namespace />commonFileMetadataContainer',
                metadataExplanationContainer: '#<portlet:namespace />metadataExplanationContainer',
                namespace: '<portlet:namespace />',
                tempFileURL: {
                    method: Liferay.Service.DL.DLApp.getTempFileEntryNames,
                    params: {
                        groupId: <%= scopeGroupId %>,
                        folderId: <%= folderId %>,
                        tempFolderName: 'com.liferay.portlet.documentlibrary.action.EditFileEntryAction'
                    }
                },
                uploadFile: '<liferay-portlet:actionURL doAsUserId="<%= user.getUserId() %>"><portlet:param name="struts_action" value="/document_library/edit_file_entry" /><portlet:param name="<%= Constants.CMD %>" value="<%= Constants.ADD_TEMP %>" /><portlet:param name="folderId" value="<%= String.valueOf(folderId) %>" /></liferay-portlet:actionURL>&ticketKey=<%= ticket.getKey() %><liferay-ui:input-permissions-params modelName="<%= DLFileEntryConstants.getClassName() %>" />'
            }
        );
    </aui:script> 
```

希望这可以帮助。

# ruby - 将 Ruby 元组数组转换为给定键数组的哈希？

> ID：10942981
> 
> 赞同：9
> 
> 时间：2012-06-08T04:13:39.640
> 
> 标签：ruby, arrays

我有一个简单的数组

```
array = ["apple", "orange", "lemon"] 

array2 = [["apple", "good taste", "red"], ["orange", "bad taste", "orange"], ["lemon" , "no taste", "yellow"]] 
```

每当数组中的元素与array2中每个元素的第一个元素匹配时，我如何转换为这个哈希？

```
hash = {"apple" => ["apple" ,"good taste", "red"],
        "orange" => ["orange", "bad taste", "orange"], 
        "lemon" => ["lemon" , "no taste", "yellow"] } 
```

我对红宝石很陌生，花了很多钱来做这个操作，但没有运气，有什么帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T04:30:52.660

如果键和对之间的映射顺序应该基于 中的第一个元素`array2`，那么您根本不需要`array`：

```
array2 = [
  ["apple", "good taste", "red"],
  ["lemon" , "no taste", "yellow"],
  ["orange", "bad taste", "orange"]
]

map = Hash[ array2.map{ |a| [a.first,a] } ]
p map
#=> {
#=>   "apple"=>["apple", "good taste", "red"],
#=>   "lemon"=>["lemon", "no taste", "yellow"],
#=>   "orange"=>["orange", "bad taste", "orange"]
#=> } 
```

如果你想用来`array`选择元素的子集，那么你可以这样做：

```
# Use the map created above to find values efficiently
array = %w[orange lemon]
hash  = Hash[ array.map{ |val| [val,map[val]] if map.key?(val) }.compact ]
p hash
#=> {
#=>   "orange"=>["orange", "bad taste", "orange"],
#=>   "lemon"=>["lemon", "no taste", "yellow"]
#=> } 
```

*如果请求不存在于 中的键，则代码确保不会出现问题，`if map.key?(val)`并且会及时执行。`compact``array``array2``O(n)`*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-03T03:40:33.013

## 配对元组散列示例

```
fruit_values = [
  ['apple', 10],
  ['orange', 20],
  ['lemon', 5]
]

fruit_values.to_h
# => {"apple"=>10, "orange"=>20, "lemon"=>5} 
```

我决定将这个答案留给任何希望将成对元组转换为哈希的人。

虽然它与问题略有不同，但这是我登陆 Google 搜索的地方。由于键数组已经在元组中，它也与原始问题有点匹配。这也没有将密钥放入原始问题想要的值中，但老实说，我不会复制该数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T04:17:07.450

这会给你想要的结果。

```
hash = {}

array.each do |element|
  i = array2.index{ |x| x[0] == element }
  hash[element] = array2[i] unless i.nil?
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-23T19:56:15.433

您也可以使用[`Array#to_h`](https://www.rubydoc.info/stdlib/core/Array:to_h)直接转换为`Hash`：

```
array2 = [
  ["apple", "good taste", "red"],
  ["lemon" , "no taste", "yellow"],
  ["orange", "bad taste", "orange"]
]

map = array2.to_h { |items| [items.first, items] } 
```

这将返回所需的：

```
{"apple"=>["apple", "good taste", "red"], "lemon"=>["lemon", "no taste", "yellow"], "orange"=>["orange", "bad taste", "orange"]} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-08T06:11:43.500

哦..我很想覆盖 rassoc

在 irb 上查看以下内容

```
class Array
  def rassoc obj, place=1
    if place
      place = place.to_i rescue -1
      return if place < 0
    end

    self.each do |item|
      next unless item.respond_to? :include? 

      if place
        return item if item[place]==obj
      else
        return item if item.include? obj
      end
    end

    nil
  end
end

array = ["apple", "orange", "lemon"] 
array2 = [["apple", "good taste", "red"], ["orange", "bad taste", "orange"], ["lemon" , "no taste", "yellow"]]

Hash[ array.map{ |fruit| [fruit, array2.rassoc(fruit, nil)]}]
# this is what you want

# order changed
array2 = [["good taste", "red", "apple"], ["no taste", "lemon", "yellow"], ["orange", "bad taste", "orange"]]

Hash[ array.map{ |fruit| [fruit, array2.rassoc(fruit, nil)]}]
# same what you want after order is changed 
```

# php - php中面向对象概念的问题

> ID：10942983
> 
> 赞同：-1
> 
> 时间：2012-06-08T04:14:02.167
> 
> 标签：php

我创建了一个名为 classperson.php 的文件，在其中声明了所有变量。

```
<?php
class person1
{
    var $location;
    var $effective;
    var $training;
    var $treated;
    var $effort;
    var $information;
    var $recognition;
    var $valued;
    var $supervisor;
    var $informed;
    var $job;
    var $treats;
    var $satisfy;
    var $workgroup;
    var $utc;
    var $skills;

    function set_location($new_location)
    {
        $this->location=$new_location;
    }
    function get_location()
    {
        return $this->location;
    }

    function set_effective($new_effective)
    {
        $this->effective=$new_effective;
    }
    function get_effective()
    {
        return $this->effective;
    }

    function set_training($new_training)
    {
            $this->training=$new_training;
    }
    function get_training()
    {
            return $this->training;
    }

    function set_treated($new_treated)
    {
        $this->treated=$new_treated;
    }
    function get_treated()
    {
        return $this->treated;
    }

    function set_effort($new_effort)
    {
        $this->effort=$new_effort;
    }
    function get_effort()
    {
        return $this->effort;
    }

    function set_information($new_information)
    {
        $this->information=$new_information;
    }
    function get_information()
    {
            return $this->information;
    }

    function set_recognition($new_recognition)
    {
        $this->recognition=$new_recognition;
    }
    function get_recognition()
    {
        return $this->recognition;
    }

    function set_valued($new_valued)
    {
        $this->valued=$new_valued;
    }
    function get_valued()
    {
            return $this->valued;
    }

    function set_supervisor($new_supervisor)
    {
        $this->supervisor=$new_supervisor;
    }
    function get_supervisor()
    {
        return $this->supervisor;
    }

    function set_informed($new_informed)
    {
        $this->informed=$new_informed;
    }
    function get_informed()
    {
        return $this->informed;
    }

    function set_job($new_job)
    {
        $this->job=$new_job;
    }
    function get_job()
    {
            return $this->job;
    }

    function set_treats($new_treats)
    {
        $this->treats=$new_treats;
    }
    function get_treats()
    {
        return $this->treats;
    }

    function set_satisfy($new_satisfy)
    {
        $this->satisfy=$new_satisfy;
    }
    function get_satisfy()
    {
            return $this->satisfy;
    }

    function set_workgroup($new_workgroup)
    {
        $this->workgroup=$new_workgroup;
    }
    function get_workgroup()
    {
            return $this->workgroup;
    }

    function set_utc($new_utc)
    {
        $this->utc=$new_utc;
    }
    function get_utc()
    {
        return $this->utc;
    }

    function set_skills($new_skills)
    {
        $this->skills=$new_skills;
    }
    function get_skills()
    {
        return $this->skills;
    }
}
?> 
```

后来我在 oopossurvey.php 中包含了这个文件。这是一个有 5 页的表格

看看代码

```
<?php
session_start();
$session=session_id();
$_SESSION['session']=$session;
?>
<html>
<body>
<form action="oopssurvey.php" method="post">
Where do you work?<br/>
<Input type ="radio" name="location" value="USA" <?php if($_SESSION['location'] == 'USA') echo "checked='checked'" ?>/>In the United states<br/>
<Input type ="radio" name="location" value="India" <?php if($_SESSION['location'] == 'India') echo "checked='checked'" ?>/>Outside of the United states<br/>

<input name="Operation1" type="submit" value="saveandresume" />
<input name="Operation2" type="submit" value="next" />

</form>
</body>
</html>

<?php
session_start();

if($_SESSION['session']==$session)
{
$location=$_SESSION['location'];
}
else
{
$_SESSION['location'] = $_POST['location'];
}
?>

<html>

<body>

<form action="oopssurvey.php" method="post">

In my work group, we are actively involved in making our work processes more effective and efficient (simpler, faster, etc.) using ACE.<br/>
<Input type ="radio" name="effective" value="Agree"/>Agree<br/>
<Input type ="radio" name="effective" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="effective" value="disagree"/>Disagree<br/>

I have received the training I need to understand and implement ACE in my work group.<br/>
<Input type ="radio" name="training" value="Agree"/>Agree<br/>
<Input type ="radio" name="training" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="training" value="disagree"/>Disagree<br/>

All employees at the company are treated fairly regardless of differences.<br/>
<Input type ="radio" name="treated" value="Agree"/>Agree<br/>
<Input type ="radio" name="treated" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="treated" value="disagree"/>Disagree<br/>

Sufficient effort is made to get the opinions and thoughts of the people who work here.<br/>
<Input type ="radio" name="effort" value="Agree"/>Agree<br/>
<Input type ="radio" name="effort" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="effort" value="disagree"/>Disagree<br/>

<input name="Operation3" type="submit" value="saveandresume" />
<input name="Operation4" type="submit" value="next" />
<input name="Operation5" type="submit" value="back" />

</form>

</body>

</html>

 <?php
session_start();

if($_SESSION['session']==$session)
{

    $effective=$_SESSION['effective'];

    $training=$_SESSION['training'];

    $treated=$_SESSION['treated'];

    $effort=$_SESSION['effort'];
}
else
{
    $_SESSION['effective']=$_POST['effective'];
    $_SESSION['training']=$_POST['training'];
    $_SESSION['treated']=$_POST['treated'];
    $_SESSION['effort']=$_POST['effort'];
}

?>

<html>
<body>
<form action="oopssurvey.php" method="post">

How satisfied are you with the information you receive from management on what's going on in the company?<br/>
<Input type ="radio" name="information" value="agree"/>Agree<br/>
<Input type ="radio" name="information" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="information" value="disagree"/>Disagree<br/>

How satisfied are you with the recognition you receive for doing a good job?<br/>
<Input type ="radio" name="recognition" value="agree"/>Agree<br/>
<Input type ="radio" name="recognition" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="recognition" value="disagree"/>Disagree<br/>

I feel valued as an employee of the company.<br/>
<Input type ="radio" name="valued" value="agree"/>Agree<br/>
<Input type ="radio" name="valued" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="valued" value="disagree"/>Disagree<br/>

My immediate supervisor does a good job of coaching/guiding me.<br/>
<Input type ="radio" name="supervisor" value="agree"/>Agree<br/>
<Input type ="radio" name="supervisor" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="supervisor" value="disagree"/>Disagree<br/>

<input name="Operation6" type="submit" value="saveandresume" />
<input name="Operation7" type="submit" value="next" />
<input name="Operation8" type="submit" value="back" />

</form>
</body>
</html>

<?php
session_start();

if($_SESSION['session']==$session)
{

$information=$_SESSION['information'];

$recognition=$_SESSION['recognition'];

$valued=$_SESSION['valued'];

$supervisor=$_SESSION['supervisor'];
}
else
{
    $_SESSION['information']=$_POST['information'];
    $_SESSION['recognition']=$_POST['recognition'];
    $_SESSION['valued']=$_POST['valued'];
    $_SESSION['supervisor']=$_POST['supervisor'];
}
?>
<html>

<body>

<form action="oopssurvey.php" method="post">

I feel well informed about what is expected in my job.<br/>
<Input type ="radio" name="informed" value="agree"/>Agree<br/>
<Input type ="radio" name="informed" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="informed" value="disagree"/>Disagree<br/>

Overall, how good a job do you feel is being done by your immediate supervisor<br/>
<Input type ="radio" name="job" value="agree"/>Agree<br/>
<Input type ="radio" name="job" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="job" value="disagree"/>Disagree<br/>

My immediate supervisor treats me with respect and dignity.<br/>
<Input type ="radio" name="treats" value="agree"/>Agree<br/>
<Input type ="radio" name="treats" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="treats" value="disagree"/>Disagree<br/>

How satisfied are you with your involvement in the decisions that affect your work?<br/>
<Input type ="radio" name="satisfy" value="agree"/>Agree<br/>
<Input type ="radio" name="satisfy" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="satisfy" value="disagree"/>Disagree<br/>

<input name="Operation9" type="submit" value="saveandresume" />
<input name="Operation10" type="submit" value="next" />
<input name="Operation11" type="submit" value="back" />

</form>

</body>

</html>

<?php

session_start();

if($_SESSION['session']==$session)
{

$informed=$_SESSION['informed'];

$job=$_SESSION['job'];

$treats=$_SESSION['treats'];

$satisfy=$_SESSION['satisfy'];
}
else
{
    $_SESSION['informed']=$_POST['informed'];
    $_SESSION['job']=$_POST['job'];
    $_SESSION['treats']=$_POST['treats'];
    $_SESSION['satisfy']=$_POST['satisfy'];
}
?>

<html>

<body>

<form action="oopssurvey.php" method="post">

Day-to-day decisions and activities in my work group demonstrate that quality is a top priority.
<Input type ="radio" name="workgroup" value="agree"/>Agree<br/>
<Input type ="radio" name="workgroup" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="workgroup" value="disagree"/>Disagree<br/>

I have the opportunity to grow and develop at my company and/or elsewhere in UTC.
<Input type ="radio" name="utc" value="agree"/>Agree<br/>
<Input type ="radio" name="utc" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="utc" value="disagree"/>Disagree<br/>

My job makes good use of my skills and abilities.
<Input type ="radio" name="skills" value="agree"/>Agree<br/>
<Input type ="radio" name="skills" value="Agreenordisagree"/>Neither Agree nor Disagree<br/>
<Input type ="radio" name="skills" value="disagree"/>Disagree<br/>

<input name="Operation12" type="submit" value="submit" />
<input name="Operation13" type="submit" value="back" />

</form>

</body>

</html>

<?php
session_start();
include 'classperson.php';

if($_POST['Operation1'])
{
$_SESSION['location'] = $location;
$_SESSION['location'] = $_POST['location'];
echo "Please save the link inorder to continue your survey http://bonnie/~jnagesh/SampleSurvey/OOPS/oopspage2.php";
}

else if($_POST['Operation2'])
{
$_SESSION['location'] = $location;
$_SESSION['location'] = $_POST['location'];
include "oopspage2.php";
}

elseif($_POST['Operation3'])

{
$_SESSION['effective'] = $effective;
$_SESSION['effective'] = $_POST['effective'];
$_SESSION['training'] = $training;
$_SESSION['training'] = $_POST['training'];
$_SESSION['treated'] = $treated;
$_SESSION['treated'] = $_POST['treated'];
$_SESSION['effort'] = $effort;
$_SESSION['effort'] = $_POST['effort'];
echo "Please save the link inorder to continue your survey http://bonnie/~jnagesh/SampleSurvey/OOPS/oopspage3.php";

}

elseif($_POST['Operation4'])
{
$_SESSION['effective'] = $effective;
$_SESSION['effective'] = $_POST['effective'];
$_SESSION['training'] = $training;
$_SESSION['training'] = $_POST['training'];
$_SESSION['treated'] = $treated;
$_SESSION['treated'] = $_POST['treated'];
$_SESSION['effort'] = $effort;
$_SESSION['effort'] = $_POST['effort'];
include "oopspage3.php";
}

elseif($_POST['Operation5'])
{
$_SESSION['location'] = $location;
$_SESSION['location'] = $_POST['location'];
include "oopspage1.php";
}

elseif($_POST['Operation6'])
{
$_SESSION['information'] = $information;
$_SESSION['information'] = $_POST['information'];
$_SESSION['recognition'] = $recognition;
$_SESSION['recognition'] = $_POST['recognition'];
$_SESSION['valued'] = $valued;
$_SESSION['valued'] = $_POST['valued'];
$_SESSION['supervisor'] = $supervisor;
$_SESSION['supervisor'] = $_POST['supervisor'];
echo "Please save the link inorder to continue your survey http://bonnie/~jnagesh/SampleSurvey/OOPS/oopspage4.php";

}

elseif($_POST['Operation7'] )
{
$_SESSION['information'] = $information;
$_SESSION['information'] = $_POST['information'];
$_SESSION['recognition'] = $recognition;
$_SESSION['recognition'] = $_POST['recognition'];
$_SESSION['valued'] = $valued;
$_SESSION['valued'] = $_POST['valued'];
$_SESSION['supervisor'] = $supervisor;
$_SESSION['supervisor'] = $_POST['supervisor'];
include "oopspage4.php";
}

elseif($_POST['Operation8'])
{
include "oopspage2.php";
}

elseif($_POST['Operation9'])
{
$_SESSION['informed'] = $informed;
$_SESSION['informed'] = $_POST['informed'];
$_SESSION['job'] = $job;
$_SESSION['job'] = $_POST['job'];
$_SESSION['treats'] = $treats;
$_SESSION['treats'] = $_POST['treats'];
$_SESSION['satisfy'] = $satisfy;
$_SESSION['satisfy'] = $_POST['satisfy'];
echo "Please save the link inorder to continue your survey http://bonnie/~jnagesh/SampleSurvey/OOPS/oopspage5.php";

}

elseif($_POST['Operation10'])
{
$_SESSION['informed'] = $informed;
$_SESSION['informed'] = $_POST['informed'];
$_SESSION['job'] = $job;
$_SESSION['job'] = $_POST['job'];
$_SESSION['treats'] = $treats;
$_SESSION['treats'] = $_POST['treats'];
$_SESSION['satisfy'] = $satisfy;
$_SESSION['satisfy'] = $_POST['satisfy'];
include "oopspage5.php";
}
elseif($_POST['Operation11'])
{
include "oopspage3.php";
}

elseif($_POST['Operation12'])
{
$con = mysql_connect("localhost","cgiadmin","cgi");
if (!$con)
 {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("j2", $con);

$person = new person1;
$person->set_location($_POST['location']);
$person->set_effective($_POST['effective']);
$person->set_training($_POST['training']);
$person->set_treated($_POST['treated']);
$person->set_effort($_POST['effort']);
$person->set_information($_POST['information']);
$person->set_recognition($_POST['recognition']);
$person->set_valued($_POST['valued']);
$person->set_supervisor($_POST['supervisor']);
$person->set_informed($_POST['informed']);
$person->set_job($_POST['job']);
$person->set_treats($_POST['treats']);
$person->set_satisfy($_POST['satisfy']);
$person->set_workgroup($_POST['workgroup']);
$person->set_utc($_POST['utc']);
$person->set_skills($_POST['skills']);

$sql="INSERT INTO bigsurvey(location, effective, training , treated , effort, information , recognition,valued,supervisor,informed,job,treats,satisfy,workgroup,utc,skills)
VALUES
('$_SESSION[location]','$_SESSION[effective]','$_SESSION[training]','$_SESSION[treated]','$_SESSION[effort]','$_SESSION[information]','$_SESSION[recognition]','$_SESSION[valued]','$_SESSION[supervisor]','$_SESSION[informed]','$_SESSION[job]','$_SESSION[treats]','$_SESSION[satisfy]','".$person->get_workgroup()."','".$person->get_utc()."','".$person->get_skills()."')";
if (!mysql_query($sql,$con))
  {
    die('Error: ' . mysql_error());
  }
echo "Thanks for taking the survey .";
mysql_close($con);

}
elseif($_POST['Operation13'])
{
include "oopspage4.php";
}
?> 
```

我的问题是，这是在 php 中使用面向对象概念创建或创建表单的正确方法吗？或者我应该创建更多对象或进行任何更改？

我试图在所有页面上包含文件 classperson.php，但是当我使用下一个按钮时出现错误。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:44:43.033

首先，您所说的“页面”仅在客户端使用，但对于 PHP，它是单个脚本。因此，例如多次执行 session_start() 是没有意义的，因为每次向服务器发送数据时，脚本都会再次从头开始运行。当它到达当前页面的末尾时，它也不会停止运行。

其次，这种通过会话变量确定调查步骤的想法本身有点生疏，并且没有正确实施。我很确定它不起作用（尽管我没有运行代码）。在会话中存储变量并没有什么不好，但我的建议是你应该以某种方式重新考虑逻辑。例如，您可以在每个表单中使用一些隐藏的输入来检查用户是哪个步骤的调查，并且在 PHP 文件中有一些[switch{}()](http://php.net/manual/en/control-structures.switch.php)用于每个页面的案例。

第三，不要这么混淆，你应该把逻辑和表现分开。我的意思是 - 对所有表单使用单独的文件，并使用单独的文件接受来自用户的数据，将其写下来（如您的示例 - 在会话中），然后选择接下来要显示的页面。这样，您将更容易定位错误，并且它会更多地在您的脑海中安定下来。

至于你关于 PHP 中使用的类的问题：通常你应该只包含一次类，不需要重新包含它，例如在这个文件中你将处理所有逻辑。然后，您可以创建该类的实例并使用它。无论如何，我有一种感觉，你有些着急，而且在我看来，你现在开始使用 OOP 技术还为时过早——最好是一步一步来。尝试让这个脚本在没有类的情况下工作。当它可以工作时，将逻辑提取到一个类中。这样你会更好地理解一切:)

# java - 表示它们之间路径的节点长度的数据结构？

> ID：10942984
> 
> 赞同：2
> 
> 时间：2012-06-08T04:14:04.413
> 
> 标签：java, graph, artificial-intelligence

好的，我是 Java 新手，我问这个问题是因为我确信有更好的简单方法来处理这个问题，更有经验的人可能会给我一些指示。

我有一张城市图，它们之间的路径长度。我正在尝试使用 Java 构建一个算法，从起始城市到目的地城市，找到最短路径。每个城市都会有一个名称和地图坐标。更具体地说，我将使用 A* 算法，但这（可能）对我的问题并不重要。

我的问题是我试图找出一种用长度表示节点和它们之间的路径的好方法。

我能想到的最简单的方法是创建一个巨大的二维方形数组，每个城市由一个索引表示，其中连接的城市可以通过它们在数组中的相交位置来表示。我为每个城市分配了一个索引#。在数组值中，0 会去没有连接的地方，距离会去有连接的地方。

我还将有一个带有“索引”属性的城市子类，其索引值在数组中。这样做的缺点是要找出哪些城市有连接，必须有额外的步骤来查找数组中的城市索引，并且还必须查找哪个连接城市有连接索引。

有没有更好的方法来表示这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:19:14.953

另一种方法是使用 Node 结构来存储所有指向相邻节点的指针。

例如

如果你的数据结构中有这样的东西

```
 A   B   C

A  /   0   1

B  0   /   1

C  1   1   / 
```

在新结构中

```
A: [C]
B: [C]
C: [AB] 
```

与您的二维数组方法相比，这种方法需要更长的时间来检查两个节点是否连接，但使用的空间更小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:06:14.850

考虑...

```
class Node {
  List<Link> link;
  String cityName;
}
class Link {
  Node destinationCity;
  Long distance;
} 
```

# java - 测量通过 JNI 调用的开销

> ID：10942985
> 
> 赞同：4
> 
> 时间：2012-06-08T04:14:18.683
> 
> 标签：java, java-native-interface

为了看看我是否真的可以通过使用 JNI（而不是编写完整的 Java 应用程序）从本机代码（编写的 C）中获益，我想测量通过 JNI 调用的开销。衡量这种开销的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:40:27.500

我不会使用分析器进行*定量*性能测试。分析倾向于将失真引入实际时序数。

我将创建一个基准来执行您正在考虑在 C 中进行的实际计算之一，并将 C + JNI + Java 版本与纯 Java 版本进行比较。确保您在比较苹果和苹果；即在对它们进行基准测试之前分析和优化这两个版本。

为了进行实际的基准测试，我会构建一个循环来执行大量计算，记录大量迭代的时间并进行比较。确保考虑到 JVM 预热效应；例如类加载、JIT 编译和堆预热。

* * *

像 Thihara 一样，我怀疑使用 C + JNI 会有多大帮助。即使是这样，您也需要考虑 JNI 的缺点；例如，C 代码可移植性、特定于平台的构建问题……如果您的本机代码有错误，则可能出现 JVM 硬崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:06:21.610

单独测量开销可能会给您带来奇怪的结果。我会用 Java 和 C++ 编写一小部分对性能至关重要的代码并测量程序性能，例如，使用 [caliper](http://code.google.com/p/caliper)（微基准测试是一件相当复杂的事情，几乎没有人能做对）。

我不会使用任何分析器，尤其是 C++ 分析器，因为仅 C++ 部分的性能并不重要，而且分析器可能会扭曲结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T04:18:06.720

使用 C++ 分析器和 Java 分析器。它们在 Java 的 IDE 中可用。我只能假设在 C++ 的情况下。无论您设计什么测试，请运行大量循环以尽量减少环境错误。

哦，把结果发回来，因为我也很想知道在现代 JVM 上使用本机代码是否有任何改进。虽然您可能不会在本机代码中看到巨大的性能改进。

# xml - c# xml string special characters 解析EntityName时出错。1号线，

> ID：10942987
> 
> 赞同：-1
> 
> 时间：2012-06-08T04:14:56.543
> 
> 标签：xml, dataset, character

请帮助解释为什么数据集无法读取编码的 xml？

```
 string xml = "<?xml version=\"1.0\" standalone=\"yes\" ?>
    <DataSet><node>it's my \"node\" & i like it</node></DataSet>";
    string encodedXml = System.Security.SecurityElement.Escape(xml);
    DataSet ds = new DataSet();
    ds.ReadXml(New XmlTextReader(new StringReader(encodedXml))); 
```

我检查了链接[http://weblogs.sqlteam.com/mladenp/archive/2008/10/21/Different-ways-how-to-escape-an-XML-string-in-C.aspx](http://weblogs.sqlteam.com/mladenp/archive/2008/10/21/Different-ways-how-to-escape-an-XML-string-in-C.aspx) 我想要什么要做的是将**带有特殊字符的字符串读入数据集**。任何人都可以提供将**带有特殊字符的字符串读入数据集**的代码。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:23:08.730

[ds.ReadXml(string)](http://msdn.microsoft.com/en-us/library/360dye2a.aspx)采用 XML 文件的文件名而不是包含 XML 的字符串

# css - 你是把班级/身份证放在同一个 div 上还是把它们分开？

> ID：10942988
> 
> 赞同：0
> 
> 时间：2012-06-08T04:15:12.730
> 
> 标签：css, yui3, yui-grids, grid-system

由于我在 yui3 文档上找不到任何内容，因此请在下面询问您的意见。最佳做法是什么，为什么？

```
<div class="yui3-u-1-3" id="logo">
... content
</div> 
```

或者

```
<div class="yui3-u-1-3">
<div id="logo">
..... content
</div>
</div> 
```

问候，城堡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:32:49.790

我认为在纯布局特定的 HTML 上使用 ID 的最佳实践。

例如。

*   `#outer-container`
*   `#wrapper`
*   `#sidebar`

话虽如此，如果有任何机会，即使是一个远程的，您的页面中可能有多个实例，那么请谨慎使用并使用类。

有一些性能优势（尽管现在几乎可以忽略不计，因为浏览器渲染引擎和速度更快）：

*   ID 选择器在你的 CSS 中稍微快一些
*   ID 选择器作为使用 JS 的钩子更有效

阅读 Jonathan Snook 的 SMACSS 电子书中的精彩部分：[https ://smacss.com/book/type-layout](https://smacss.com/book/type-layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:18:35.513

我宁愿在 ID 上使用 CLASS，直到有明确的内容，从过去 2 年开始一直在使用 yui3 网格。到目前为止进展顺利。。

```
<div class="yui3-u-1-3 logo">
content 
</div> 
```

或者

```
<div class="yui3-u-1-3">
 <h5 class="logo">logo goes here</h5>
</div> 
```

# azure - 我可以使用新的 azure sdk 管理旧的 Web 角色吗？

> ID：10942989
> 
> 赞同：2
> 
> 时间：2012-06-08T04:15:13.830
> 
> 标签：azure, azure-configuration

我已经使用 azure sdk 1.6 在云中运行了我的 azure web 角色。我想使用 sdk 1.7 来尝试新功能。如果我安装 sdk 1.6，我还能管理我的旧 Web 角色吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:23:41.477

Windows Azure SDK 1.7 与 Windows Azure SDK 1.6 并行兼容。当您安装 SDK 并使用它来创建应用程序时，您将有机会选择您想要的 SDK，如下所示：

![在此处输入图像描述](../Images/015a80e97ef93361f9b1db1f1de2da0e.png)

在 64 位 Windows 机器上，此处安装了新的 SDK 1.7：

```
C:\Program Files\Microsoft SDKs\Windows Azure\.NET SDK\2012-06 
```

通过这种方式，您可以管理以前基于 Windows Azure SDK 1.6 的代码，并尝试并排使用新的基于 Windows Azure SDK 1.7 的功能。

您当然可以使用 Windows Azure SDK 1.6 继续运行您的 Windows Azure Web 角色，但是如果您决定将其升级到基于 Windows Azure 1.7 的 Web 角色，那么您只需按照与任何其他 SDK 更新相同的步骤进行操作。

# express - express js - 带有布局模板的 ejs

> ID：10942997
> 
> 赞同：12
> 
> 时间：2012-06-08T04:16:46.370
> 
> 标签：express, ejs

在我的 express 应用程序中，我已将视图引擎更改为 ejs。

有谁知道是否仍然可以利用视图模板？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T13:45:25.443

实际上 Express 3.X 之后是不支持 layout.ejs 的，如果要使用 layout，需要自己完成以下步骤：

1.  `package.json`在您的文件中添加依赖项“express-partials”：“*”

```
     “依赖”：{
       “快递”：“3.1.0”，
       “ejs”：“*”，
       “表达部分”：“*”
     }

```

1.  执行`npm install`以安装最新版本`express-partials`
2.  需要`express-partials`在你的`app.js`
    `var partials = require('express-partials');`
3.  在in文件`app.use(partials());`下添加代码`app.set('view engine', 'ejs');``app.js`

之后，您可以设计您`layout.ejs`并在您的文件中添加`<%- body%>`块，`layout.ejs`这就足够了并且运行良好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T22:10:43.250

你可以用这个模块来做......

[https://github.com/aseemk/express-blocks](https://github.com/aseemk/express-blocks)

布局.ejs

```
<html>
    <body>
        <% include nav %>
        <h1><%= title %></h1>
        <%- body %>
    </body>
</html> 
```

登录.ejs

```
<% layout('layout') -%>
<form>...</form> 
```

导航.ejs

```
<nav>
  <% if ( session.logged_in ) { %>
    <a href="/account">account</a>
    <a href="/logout">logout</a>
  <% } else { %>
    <a href="/signup">signup</a>
    <a href="/login">login</a>
  <% } %>
  <a href="/">home</a>
</nav> 
```

我使用的是 express-partials，但我发现 express-blocks 更适合 ejs 和 express 3.x。每次都必须传递数据时，使用 partials 很痛苦。随着`<% include whatever %>`数据已经可以访问。

在您的路线文件中，您可以像这样呈现：

```
exports.login.get = function(req, res){
  res.locals.session = req.session;
  res.render('login', { title: 'Login to your account' });
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-08T09:33:57.600

如果我没记错的话，Express.js 把它留给了模板引擎。因此，如果 ejs 不支持布局，那么您就不走运了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-26T06:13:12.550

1.  安装 ejs-blocks 包`npm install ejs-blocks`

2.  在您的 app.js 文件中导入包`const engine = require('ejs-blocks');` 并配置视图引擎

    ```
    //settings
    app.set('views', path.join(__dirname, 'views'));
    app.engine('ejs', engine);
    app.set('view engine', 'ejs'); 
    ```

3.  在 express 默认情况下，文件的名称是因此在您的视图文件夹中`layout.ejs`创建一个名为的文件，其中包含以下内容：`layout.ejs`

**视图/layout.ejs**

```
<html>
<head>
    <title><%= title %></title>
</head>
<body>
    <%- body %>
</body>
<%- blocks.js %>
</html> 
```

`<%= title %>`从路由调用文件时获取值

```
router.get("/", (req, res) => {
    res.render("index", { title: "Hello world!" });
}); 
```

5.  您的每个视图都必须`layout.ejs`在第一行导入文件，例如

**意见/index.ejs**

```
<% layout('layout') -%>
<h1>Article title</h1>
<p>Content</p>
  ...
<% block('js', `<script>
    ...
</script>`) -%> 
```

您可以使用`block`将代码从视图插入到主布局。