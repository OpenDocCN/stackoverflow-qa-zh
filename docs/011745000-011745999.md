# StackOverflow 问答 11745000-11745999

# java - 如何使用 Java 将 IRB 发送到后台？

> ID：11745001
> 
> 赞同：0
> 
> 时间：2012-07-31T16:41:30.353
> 
> 标签：java, ruby, jruby

我有一个 IRB，我想将它发送到后台并使用 Java 评估 IRB 的命令。我尝试了类似 [1] 的方法，但它无法识别任何命令。

[1]

```
String response = "";
ProcessBuilder pb = new ProcessBuilder(myIrb); //myIrb is a unix script which starts the IRB

try {
  pb.command(myCommand);
  Process proc = pb.start();
  InputStream input = proc.getInputStream();
  int i;
  while((i = input.read()) != -1) {
    char c = (char)i;
    response += c;
  } catch (IOException e) {
    response = e.toString();
  }

System.out.println(response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:45:06.953

If you want the thing to execute in the background, then you don't want to execute the *Ruby* script directly, you want to invoke a *shell* to execute the Ruby script.

For Windows, use "start". For Linux, use "&".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T22:17:11.487

是否有任何特殊原因要在单独的 IRB 进程中评估 ruby​​ 而不是直接从 java 评估它？

[http://kenai.com/projects/jruby/pages/RedBridge](http://kenai.com/projects/jruby/pages/RedBridge)

这会简单得多。

# php - Yii - 从存储在表中的数据创建链接

> ID：11745002
> 
> 赞同：1
> 
> 时间：2012-07-31T16:41:31.447
> 
> 标签：php, yii

我一直在努力思考/找到解决我遇到的问题的方法。我为我的 Yii 应用程序创建了一个菜单系统，但我需要在表格中存储创建 URL 所需的部分项目。我有一个名为 system_menu_item 的表：

-------------------------------------------------- -------------------| item_id | 显示文本 | 行动 | 变量 | -------------------------------------------------- -------------------| 1 | 编辑文章 | 文件/视图 | 数组('id'=>$model->arl_id) |

我希望的是：

```
$model = SystemMenuItem::model()->findByPk('1');
$url = yii::app()->createUrl($model->action, $model->variables); 
```

这不起作用..我尝试了不同的方法来做这一切都不起作用。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:47:54.347

我猜问题是 $model->variables 评估为具有 value 的字符串`array('id'=>$mode->arl_id)`。

一个丑陋（而且危险！）的黑客将是使用[eval()来阅读这个](http://php.net/manual/en/function.eval.php)

更好的方法可能是找出一种不同的方法来存储参数，并在执行数据库查询后将它们读入数组。

# c# - 测试类可以有属性吗？

> ID：11745003
> 
> 赞同：0
> 
> 时间：2012-07-31T16:41:33.407
> 
> 标签：c#, oop, unit-testing, testing

我正在创建一个用于对应用程序进行单元测试的 TestClass，我想做的一件事是运行一个测试方法，检查方法是否正确运行，根据结果在测试类中的类属性中存储一个值，然后使用它值在后面的方法中。

我试过这样做，发现一旦编译器从一种方法移动到另一种方法，我设置的所有属性都会被清除干净。我检查了断点，在第一个方法的末尾，值在属性中，然后在第二个方法的开头，相同的属性为空。

查了一下，似乎没有其他人在尝试同样的事情，所以是否可以在方法之间共享一个值，还是我采取了错误的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T16:45:42.803

You are taking the wrong approach.

Unit tests, by definition, should be completely self-contained and deterministic. They should not depend on one another.

You should be able to refactor out the repetitive portion of your first unit test into a helper method which can be invoked by your other unit test. The work will be done twice, but Unit Tests should be really fast, so the overhead should be really minimal.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:44:30.900

It's not the compiler - it's the test runner which will (potentially) create a new instance for each test.

Tests should generally be independent - even if you could find a way of getting this to work, I would avoid doing so. Design your way around it as best you can.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:46:29.507

无论您使用什么测试框架，这对我来说都是不好的做法。所有自动化测试（更不用说正式的单元测试）都应该相互独立。静态字段/属性可能会起作用，但我建议先重构您的测试。

# javascript - Javascript RegEx 匹配 URL 但排除图像

> ID：11745004
> 
> 赞同：1
> 
> 时间：2012-07-31T16:41:37.983
> 
> 标签：javascript, regex, image, hyperlink

我需要用实际的可点击链接替换 ​​HTML 文本字符串中的所有文本链接。适用于以下正则表达式：

```
/\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi 
```

然后我注意到它还替换了图像和已经格式化的链接。我需要排除以 src" 和 > 开头的链接的数字 ...

```
/(^(?!src="|>)\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi 
```

但这不再匹配任何链接。我尝试了几个类似的语句，没有 ^，更改了一些括号等，但似乎没有任何效果。我尝试`.{0}`在我添加的部分和 \b 之间插入，以确保他只会查看 url 前面的内容而不考虑更远的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:53:29.230

**编辑：**讨论时间越来越长，所以我决定更新答案。

相信您的原始正则表达式有效，我将在此答案的其余部分引用简化版本：

```
/\b(https?|ftp|file)/gi 
```

现在，你尝试了这个：

```
/^(?!src="|>)\b(https?|ftp|file)/gi
 ^ 
```

这里的主要错误由插入符号标记：插入符号。这会迫使您的正则表达式从行首匹配，这就是它不匹配的原因。让我们删除它并继续：

```
/(?!src="|>)\b(https?|ftp|file)/gi 
```

这一次，主要错误在于您对前瞻断言的概念。正如我在评论中解释的那样，这个断言是多余的，因为你是在说，“匹配`http`or `https`or `ftp`or `file`，只要这些都不是`src="`or `>`。” 这几乎是多余的，以至于这句话对我们来说甚至没有意义！相反，您想要的是一个*后向断言*：

```
/(?<!src="|>)\b(https?|ftp|file)/gi
   ^ 
```

为什么？因为您希望找到`src="`或在您可能希望匹配的字符串`>` *后面。*问题？JavaScript 不支持后向断言。所以，我提出了一个替代方案。诚然，它是有缺陷的（尽管不是 HTML 中断的原因，正如您所提到的）。在这里，固定：

```
/(.[^>"]|[^=]")\b(https?|ftp|file)/gi
  ^^^^^^^^^^^^ 
```

这确实是一个非直观的正则表达式，需要解释。它将我们的案例一分为二。假设我们有一个两个字符集。如果集合*不*`>`以or结尾`"`，那么我们不怀疑它；我们可以走了；匹配任何可能跟随的 URL。但是，如果它*确实*`>`以or结尾`"`，那么唯一“可原谅”的情况是第一个字符不是`=`. 所以你看，这里有点逻辑诡计。

现在，至于为什么这可能会破坏您的 HTML。请务必使用 JavaScript `replace`，并将第一个捕获的组替换回页面！如果你只是用虚无替换每个匹配项，你最终会“吃掉”两个字符集，我们只是想调查，而不是破坏。

```
html.replace(/(.[^>"]|[^=]")\b(https?|ftp|file)/gi,
             function(match, $1, offset, original) {
                 return $1;
             }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:38:17.597

我必须回家，还没有测试，但我会觉得更轻松地处理隔离你不想先出来的 HTML 的更简单的任务。

1.  进行匹配以获取您不想处理的内容的数组。
2.  用分裂把它全部撕掉。
3.  迭代拆分数组并替换 URL，然后将匹配的项目拼接回
4.  加入并返回

唯一的假设是您不会以文本中的锚点或 img 标记结尾

```
function zipperParse(htmlText,matcher){
    var zipBackInArray = htmlText.match(matcher),
    workingArray = htmlText.split(matcher),
    i = workingArray.length;

    while(i--){
        buildAnchorTagIfURLPresent(workingArray[i]); //You got this one covered
        workingArray.splice(i,0,zipBackInArray.pop());
        //working backwards makes splice much easier to use here
    }
    return workingArray.join('');    
}

var toExclude = /<a[^>]*>[^>]*>|<img[^>]*>/g;
// is supposed to match all img and anchor pairs but not handling tags inside anchors yet

zipperParse(yourHtmlText,toExclude); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T00:09:35.583

这段代码对我有用...只需将 Google Api KEY 更改为排除 ..=> XXXXXXXXXXXXXXXXXXXXXX 我只是把它放在我的wordpress 的functions.php 主题中。首先是看，您的谷歌地图代码如何出现在您的网站上，然后将其与被替换的内容相匹配。

```
function remove_script_version( $src ) { 
$parts1 = explode( '?', $src );
$parts2 = str_replace('//maps.googleapis.com/maps/api/js', '//maps.googleapis.com/maps/api/js?language=es&#038;v=3.31&#038;libraries=places&#038;key=XXXXXXXXXXXXXXXXXXXXXX&#038;ver=3.31', $parts1);
return $parts2[0]; }
add_filter( 'script_loader_src', 'remove_script_version', 15, 1 );
add_filter( 'style_loader_src', 'remove_script_version', 15, 1 ); 
```

# mysql - 连接来自 4 个表的数据以计算多个加权分数

> ID：11745007
> 
> 赞同：0
> 
> 时间：2012-07-31T16:41:44.830
> 
> 标签：mysql

请考虑下表。

`users`拥有数千名 Twitter 用户；它们`tweets`的索引为，这是推文所谈论`sp100_id`的公司的 id（参见）。为每条推文保存指定的情绪类别（= 中性，= 正面， = 负面）。保存推文被转发的次数。最后给每个用户打分和打分，如下：`sp100``tweets.class``1``2``3``tweets.rt``quality``follow`

```
users                       tweets
-------------------------   -----------------------------------------------
user_id quality follow      tweet_id sp100_id nyse_date   user_id class  rt
-------------------------   -----------------------------------------------
1       2.50    5.00        1        1        2011-03-12  1       1      0
2       0.75    1.00        2        1        2011-03-13  1       2      2
                            3        1        2011-03-13  1       2      1
daterange                   4        1        2011-03-13  2       2      0
----------------            5        1        2011-03-13  2       3      3
_date                       6        2        2011-03-12  2       2      3
----------------            7        2        2011-03-12  2       2      0
2011-03-11                  8        2        2011-03-12  1       3      5
2011-03-12                  9        2        2011-03-13  2       2      0
2011-03-13

sp100
----------------
sp100_id  _name
----------------
1         Alcoa
2         Apple 
```

所需的输出是一个列表，`sp100_id`每个`_date`正面 ( `class=2`) 和负面 ( `class=3`) 推文的数量按`rt`、“质量”和加权`follow`：

```
sp100_id  nyse_date  pos-rt pos-quality pos-follow neg-rt neg-quality neg-follow
--------------------------------------------------------------------------------
1         2011-03-11 0      0           0          0      0           0
1         2011-03-12 0      0           0          0      0           0
1         2011-03-13 5 (1)  5.75 (2)    11.00 (3)  3 (4)  0.75 (5)    1.00 (6)
2         2011-03-11 0      0           0          0      0           0
2         2011-03-12 3 (7)  5.00 (8)    10.00 (9)  5.00   2.50        2.50
2         2011-03-13 0      0.75        1.00       0      0           0
--------------------------------------------------------------------------------

(1) On 2011-03-13, 3 positive tweets for sp100_id 1\. 1 tweet retweeted 2 times,
    1 tweets retweeted 1 time and 1 tweet retweeted 0 times = 2x2+1x1+1x0 = 5
(2) On 2011-03-13, 2 positive tweets made by user 1, who has quality 2.50 and
    1 positive tweet made by user 2, who has quality 0.75 = 2x2.50+1x0.75 = 5.75
(3) On 2011-03-13, 2 positive tweets made by user 1, who has follow 5.00 and
    1 positive tweet made by user 2, who has follow 1 = 2x5.00+1x1.00 = 11.00
(4) On 2011-03-13, 1 negative tweet made by user 2, retweeted 3 times = 1x3 = 3
(5) On 2011-03-13, 1 negative tweet made by user 2, who has quality 0.75, thus
    1x0.75 = 0.75
(6) On 2011-03-13, 1 negative tweets made by user 2, who has follow 1.00 so
    1x1.00 = 1.00
(7) 1 positive tweet which has been retweeted 3 times, 1 positive tweet without
    any retweets = 1x3+1x0 = 3
(8) 2 positive tweets from user 2 x quality 2.50 = 5.00
(9) 2 positive tweets x follow 5 = 10.00 
```

我试图尽可能地解释自己。谁能帮我建立正确的查询？如您所见，没有推文的日期（所有值为零）也需要包含在结果集中。我现在有了这个，但是在完成其余部分时遇到了麻烦：

```
SELECT
    s.sp100_id,
    d._date,
    COALESCE(c.pos-rt,0)      AS pos-rt,
    COALESCE(c.pos-quality,0) AS pos-quality,
    COALESCE(c.pos-follow,0)  AS pos-follow,
    COALESCE(c.neg-rt,0)      AS neg-rt,
    COALESCE(c.neg-quality,0) AS neg-quality,
    COALESCE(c.neg-follow,0)  AS neg-follow
FROM sp100 s
CROSS JOIN daterange d
LEFT JOIN (
    SELECT 
        sp100_id,
        nyse_date, 
        COUNT(CASE class WHEN 2 THEN 1 END) * [rt]      AS pos-rt,
        COUNT(CASE class WHEN 2 THEN 1 END) * [quality] AS pos-quality,
        COUNT(CASE class WHEN 2 THEN 1 END) * [follow]  AS pos-follow,
        COUNT(CASE class WHEN 3 THEN 1 END) * [rt]      AS neg-rt,
        COUNT(CASE class WHEN 3 THEN 1 END) * [quality] AS neg-quality,
        COUNT(CASE class WHEN 3 THEN 1 END) * [follow]  AS neg-follow
    FROM tweets 
    GROUP BY sp100_id, nyse_date
) c ON s.sp100_id = c.sp100_id AND d._date = c.nyse_date
ORDER BY s.sp100_id, d._date ASC 
```

显然 ,`[rt]`和`[quality]`需要`[follow]`用正确的语法替换，我不确定`COUNT(...)`，因为它现在首先计算推文的数量，但它应该将每条推文分开并将其乘以它自己的转发数量（'rt '）。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:11:53.927

假设我已经正确理解了这个问题（见我上面的评论），那么你只需要对连接的表和[`SUM()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)相关字段进行分组，其中推文属于所需的类，可以使用以下方法确定[`IF()`](http://dev.mysql.com/doc/en/control-flow-functions.html#function_if)：

```
SELECT      sp100.sp100_id                            AS `sp100_id`,
            daterange._date                           AS `nyse_date`,
            SUM(IF(tweets.class=2, tweets.rt,     0)) AS `pos-rt`,
            SUM(IF(tweets.class=2, users.quality, 0)) AS `pos-quality`,
            SUM(IF(tweets.class=2, users.follow,  0)) AS `pos-follow`,
            SUM(IF(tweets.class=3, tweets.rt,     0)) AS `neg-rt`,
            SUM(IF(tweets.class=3, users.quality, 0)) AS `neg-quality`,
            SUM(IF(tweets.class=3, users.follow,  0)) AS `neg-follow`       
FROM        sp100
       JOIN daterange
  LEFT JOIN tweets ON tweets.nyse_date = daterange._date
                  AND tweets.sp100_id  = sp100.sp100_id
  LEFT JOIN users  ON tweets.user_id   = users.user_id
GROUP BY    sp100.sp100_id, daterange._date 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b9853/1/0)上查看。

[编辑] 这是`EXPLAIN`：

```
id select_type table     type   possible_keys             key        key_len  ref                        rows  extra
-----------------------------------------------------------------------------------------------------------------------------------------------------------
1  SIMPLE      sp100     index  NULL                      PRIMARY    4        NULL                        101  Using index; Using temporary; Using filesort
1  SIMPLE      daterange index  NULL                      _date      3        NULL                        147  Using index; Using join buffer
1  SIMPLE      tweets    ref    query,nyse_date,sp100_id  nyse_date  3        sentimeter.daterange._date 3815    
1  SIMPLE      users     eq_ref PRIMARY                   PRIMARY    4        sentimeter.tweets.user_id     1 
```

# regex - 在“Programming Perl”中“你不能在正则表达式结构中隐藏模式的终止分隔符”是什么意思？

> ID：11745013
> 
> 赞同：3
> 
> 时间：2012-07-31T16:42:08.083
> 
> 标签：regex, perl

抱歉，但我再次需要帮助来理解“Programming Perl”一书中相当复杂的片段。这是（标记为**粗体**对我来说晦涩难懂的内容）：

> 模式被解析为双引号字符串，所有正常的双引号约定都将起作用，包括变量插值（除非您使用单引号作为分隔符）和用反斜杠转义指示的特殊字符。这些是在字符串被解释为正则表达式之前应用的（这是 Perl 语言中为数不多的几个地方之一，其中字符串经历了不止一次的处理）。...
> 
> 这种两次解析的另一个结果是普通的 Perl 标记器首先找到正则表达式的结尾，就像它正在寻找普通字符串的终止分隔符一样。只有在找到**字符串的结尾**（并完成任何变​​量插值）之后，模式才会被视为正则表达式。除此之外，这意味着**您不能“隐藏”正则表达式结构中模式的终止分隔符**（例如括号字符类或正则表达式注释，我们还没有涉及）。Perl 将在任何地方看到分隔符并在该点终止模式。

首先，为什么说它`Only after it has found the end of the string`不是`the end of the regular expression`它正在寻找的东西，如前所述？

二、这是什么意思`you can’t “hide” the terminating delimiter of a pattern inside a regex construct`？为什么我不能隐藏终止分隔符`/`，而我可以将它放置在我想要的任何位置，无论是直接在正则表达式中`/A\/C/`还是在插值变量中（即使没有`\`）：

```
my $s = 'A/';
my $p = 'A/C';
say $p =~ /$s/; 
```

输出`1`。

**当我在写和重新阅读我的问题时，我认为这个片段讲述了使用单引号作为正则表达式分隔符，那么这一切似乎都很有凝聚力。我的假设正确吗？**

我的赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T16:57:59.423

它说“字符串的结尾”而不是“正则表达式的结尾”，因为此时它将正则表达式视为只是一个字符串。

它试图说这不起作用：

```
/foo[-/_]/ 
```

即使普通的正则表达式元字符在内部并不特殊`[]`，Perl 仍会将正则表达式视为`/foo[-/`并抱怨未终止的类。

它试图说 Perl 在读取它时不会解析正则表达式。首先它会在源代码中找到正则表达式的结尾，就好像它是一个带引号的字符串，所以唯一的特殊字符是`\`. 然后它插入任何变量。 *然后*它将结果解析为正则表达式。

您可以隐藏终止分隔符，`\`因为它适用于普通字符串。您可以将定界符隐藏在插值变量中，因为插值发生在找到定界符之后。如果您使用括号分隔符（例如`{ }`或`[ ]`），您可以在正则表达式中嵌套匹配的分隔符对，因为`q{}`也可以这样工作。但是您不能将其隐藏在任何其他正则表达式构造中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T17:00:41.840

假设你想匹配一个`*`. 你会用

```
m/\*/ 
```

但是如果你使用你`*`作为你的分隔符呢？以下不起作用：

```
m*\** 
```

因为它被解释为

```
m/*/ 
```

如下所示：

```
$ perl -e'm*\**'
Quantifier follows nothing in regex; marked by <-- HERE in m/* <-- HERE / at -e line 1. 
```

* * *

取字符串文字

```
"a\"b" 
```

它产生字符串

```
a"b 
```

同样，匹配运算符

```
m*a\*b* 
```

产生正则表达式模式

```
a*b 
```

如果要匹配文字`*`，则必须使用其他方式。换句话说。

```
m*a\*b*      ===  m/a*b/       matches pattern a*b
m*a\x{2A}b*  ===  m/a\*b/      matches pattern a\*b 
```

# objective-c - WebView 完成加载的方法是什么？

> ID：11745015
> 
> 赞同：0
> 
> 时间：2012-07-31T16:42:13.003
> 
> 标签：objective-c, macos, webview, launching

我需要一个类似的方法，`- (void)applicationDidFinishLaunching:(NSNotification *)aNotification`但我的 WebView 需要它`IBOutlet WebView*webView;`。什么是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-31T18:23:09.680

WebView 有几个不同的选项，因为大约有 5 个非正式代表，您可以实现以下方法：

> 例如，您可能希望实现框架加载和资源加载委托来监控加载进度并显示状态消息。使用多个窗口的应用程序可能希望实现用户界面委托。有关详细信息，请参阅各个非正式委托协议：WebFrameLoadDelegate 协议参考、WebPolicyDelegate 协议参考、WebResourceLoadDelegate 协议参考和 WebUIDelegate 协议参考。

我发现 WebFrameLoadDelegate 是最简单的，只需将自己设置为委托：

```
[webView setFrameLoadDelegate:self]; 
```

然后实现这个方法：

```
- (void)webView:(WebView *)sender didFinishLoadForFrame:(WebFrame *)frame 
```

来源：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T03:57:22.220

Webview 的第一个绑定 ResourceDelegate 与文件所有者

```
(void)webView:(WebView *)sender resource:(id)identifier didFinishLoadingFromDataSource:(WebDataSource *)dataSource 
```

这对我来说非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:46:43.670

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

它在`UIWebViewDelegate`协议中。

# iphone - 为什么这个动画比它开始的地方移动得更低？

> ID：11745016
> 
> 赞同：0
> 
> 时间：2012-07-31T16:42:19.337
> 
> 标签：iphone, ios, animation

我有一个简单的动画，可以上下移动 UIView。

虽然它正确向上移动 - 当它向下移动时，它向下移动得太远了。

**为什么它向下移动的距离与向上移动的距离不同？**

```
- (void) animateInputViewUp: (BOOL) up
{
    const int movementDistance = 120; 
    const float movementDuration = 0.4f; 

    int movement = (up ? -movementDistance : movementDistance);

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    self.myInputView.frame = CGRectOffset(self.myInputView.frame, 0, movement);
    [UIView commitAnimations];
} 
```

我发现它向下移动的幅度是向上移动的两倍 - 我不明白......

所以当我写这个时 - 它工作正常 - 无论出于何种原因......

```
 if (up)
        movementDistance = 120;
    else {
        movementDistance =60;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:10:33.597

您正在将视图移动到 -120，这将不在屏幕上。您需要像这样引用 inputView 的 frame.origin.y：

```
- (void) animateInputViewUp: (BOOL) up
{
    const int movementDistance = 120; 
    const float movementDuration = 0.4f; 

    int movement = (up ? -movementDistance : movementDistance);

    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    self.myInputView.frame = CGRectOffset(self.myInputView.frame, 0, self.myInputView.frame.origin.y + movement);
    [UIView commitAnimations];
} 
```

那应该给你正确的结果

编辑：您的视图向下移动两倍的原因是例如 - 假设您的原始 y 轴为 0。如果您向上移动它，那么它会变为 120，因为这就是您的移动距离，然后一旦您想要它回落它只是直接移动到-120。它通过 0（您原来的 y 轴）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:53:40.997

嗯，我不知道为什么会这样。通常我使用它们的中心为视图设置动画，我觉得框架可能会被剪裁等并导致问题。试试这个

```
self.myInputView.center = CGPointMake (self.myInputView.center.x,self.myInputView.center.y - movement); 
```

我只是在这里猜测，但让我知道它是否有效。

# java - Java mouseDown 事件对象

> ID：11745017
> 
> 赞同：2
> 
> 时间：2012-07-31T16:42:23.257
> 
> 标签：java, graphics, event-handling

当您使用该方法时

```
public boolean mouseDown(Event e, int x, int y) 
```

在 Java 中，Event 对象有什么作用或用途是什么？我正在尝试编写一个程序，该程序涉及某人单击由

```
g.fillRect(horizontal position,vertical position,height,width); 
```

我假设您使用事件处理来使用 mousedown 方法来获取矩形上的点击，但是您怎么能这样做呢？请在您的答案中提供示例。我在谷歌上做了我的研究，没有发现任何东西，即使是非常具体的搜索。非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:43:50.190

mouseDown 是一个鼠标事件。您需要做的是向您的程序添加一个事件侦听器，因此当单击鼠标时，事件处理程序会调用一个方法。在此方法中，您想查看鼠标的 x,y 位置是否在矩形内。

您将需要实现 MouseListener “实现 MouseListener”

```
// import an extra class for the MouseListener 
import java.awt.event.*;

public class YourClassName extends Applet implements MouseListener 
{
     int x = horizontal position;
     int y = vertical position;
     g.fillRect(x,y,width,height);
     addMouseListener(this); 

     // These methods always have to present when you implement MouseListener
     public void mouseClicked (MouseEvent mouseEvent) {} 
     public void mouseEntered (MouseEvent mouseEvent) {} 
     public void mousePressed (MouseEvent mouseEvent) {} 
     public void mouseReleased (MouseEvent mouseEvent) {}  
     public void mouseExited (MouseEvent mouseEvent) {}  

     public void mouseClicked (MouseEvent mouseEvent) {
     mouseX = mouseEvent.getX();
     mouseY = mouseEvent.getY();
     if(mouseX > x && mouseY > y && mouseX < x+width && mouseY < y+height){
         //
         // do whatever 
         //
     }
} 
```

更多... [http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseListener.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseListener.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:43:22.483

Event 对象包含如下信息

1.  **事件的x**和**y**坐标，
2.  发生事件的**目标组件**
3.  **当**事情发生时

它还提供了许多其他信息。
**注意：**该方法已被弃用，取而代之的是 processMouseEvent()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:35:57.420

正如你所问的那样

`in Java, what does the Event object do or what is it used for?`

**-**首先，当事件源上发生`Event Source`任何**操作时，都会向****方法**`Event Object`抛出一个。`call back`

 ****-** `Call Back`方法是（接口）**内部的方法，** **需要**由实现此侦听器的方法实现。`Listener`**`Class`**

 ****-**当对事件源执行操作时，此回调方法中的语句将**指示需要做什么。**

**例如：**

认为

```
 Event Source - Button
  When Clicked - Event object is thrown at the call back method
  Call back method - actionPerformed(ActionEvent e) inside ActionListener. 
```

**-**在**您的示例**中，当鼠标按钮按下时，会记录 x 和 y 坐标。然后是它在其回调方法中抛出的事件对象，需要由实现这个Listener的类来处理。

**-**最好使用`mousePressed`.`MouseListener Interface`

请参阅此链接：

[http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseListener.html#mousePressed%28java.awt.event.MouseEvent%29](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseListener.html#mousePressed%28java.awt.event.MouseEvent%29)****

# google-app-engine - 数据存储区 - 单个实体组中的资源争用 -

> ID：11745018
> 
> 赞同：1
> 
> 时间：2012-07-31T16:42:33.143
> 
> 标签：google-app-engine

我对有关 Datastore 的以下内容迷失了：

*   建议对数据进行非规范化处理，因为 Datastore 不支持连接查询。这意味着在多个实体中复制相同的信息

*   非规范化意味着无论何时必须更新数据，都必须在不同的实体中更新

*   但是在单个实体组中存在 1 次写入/秒的限制。

因此，我遇到的问题如下：

*   为了更新记录，我打开一个事务然后

*   更新所有必需的实体。要更新的实体在同一个实体组中，但涉及到不同的种类

*   我收到“资源争用”异常

==>**因此，更新非规范化数据的唯一方法似乎是在事务之外**。但是这样做真的很糟糕，因为某些实体可以更新，而其他实体则不能。

我是唯一有这个问题的人吗？你是怎么解决的？

谢谢，

雨果

（简化版）代码如下：

```
Objectify ofy=ObjectifyService.beginTransaction();

try {
  Key<Party> partyKey=new Key<Party>(realEstateKey, Party.class, partyDTO.getId());

  //--------------------------------------------------------------------------
  //-- 1 - We update the party
  //--------------------------------------------------------------------------
  Party party=ofy.get(partyKey);
  party.update(partyDTO);

 //---------------------------------------------------------------------------------------------
 //-- 2 - We update the kinds which have Party as embedded field, all in the same entity group
 //--------------------------------------------------------------------------------------------- 

  //2.1 Invoices

  Query<Invoice> q1=ofy.query(Invoice.class).ancestor(realEstateKey).filter("partyKey", partyKey);
    for (Invoice invoice: q1) {
      invoice.setParty(party);
     ofy.put(invoice);
   }
  //2.2Payments 
  Query<Payment> q2=ofy.query(Payment.class).ancestor(realEstateKey).filter("partyKey", partyKey);
    for (Payment payment: q2) {
      payment.setParty(payment);
     ofy.put(payment);
   }
}

  ofy.getTxn().commit();
  return (RPCResults.SUCCESS);
}

catch (Exception e) {       
        final Logger log = Logger.getLogger(InternalServiceImpl.class.getName());       
        log.severe("Problem while updating party : " + e.getLocalizedMessage()); 
       return (RPCResults.FAILURE)  ;    
}

finally {
    if (ofy.getTxn().isActive()) {
      ofy.getTxn().rollback();
     partyDTO.setCreationResult(RPCResults.FAILURE);
    return (RPCResults.FAILURE) ;        
    }              
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:50:26.480

发生这种情况是因为在短时间内发生了多个更新同一实体组的请求，而不是因为您一次更新同一实体组中的许多实体。

由于您没有显示您的代码，我可以假设正在发生以下两种情况之一：

1.  您上面描述的方法实际上并未使用事务，并且您正在`put_multi()`使用同一实体组的许多实体运行。（如果我不得不猜测，那就是这个。）
2.  您有一个高流量的站点，并且许多其他更新同时发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:45:05.410

以防万一有人遇到同样的问题。

问题出在 party.update(partyDTO) 中，在某些特定条件下，我正在启动另一笔交易。

我今天学到的是：

--> 在一个事务中，即使超过 1 个实体/秒，您也可以包含多个 put

--> 但是，您应该注意不要在您的事务中启动另一个事务

# vb.net - VB.Net 日期字符串格式模式

> ID：11745019
> 
> 赞同：0
> 
> 时间：2012-07-31T16:42:35.093
> 
> 标签：vb.net, string, datetime, format

DateTime.Now 到**Jul 31 10:20:30 PST 2012**格式

```
DirectCast(row(0), DateTime).ToString("ddd MMM dd HH:mm:ss 'PST' yyyy") 
```

`row(0)`是格式为的字符串`7/29/2012 1:25:20 PM`

一直告诉我**演员表不正确**，我怎样才能正确地转换字符串？

日期时间模式的真棒[链接](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:45:50.930

您应该使用[`DateTime.Parse`](http://msdn.microsoft.com/en-us/library/system.datetime.parse.aspx),[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)或.[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)[`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)

我怀疑你可以使用`CType`而不是`DirectCast`，但我个人会选择方法调用 - 它让你在做什么更清楚。

# javascript - 实现javascript倒计时时，其他html元素消失

> ID：11745022
> 
> 赞同：0
> 
> 时间：2012-07-31T16:42:42.633
> 
> 标签：javascript, html, css

我做了一个布局并设置了所有内容，当我在我的文本下实现计数器部分时，所有其他 HTML 元素都消失了，这是为什么呢？还有什么方法可以在柜台到达特定时间时发出电子邮件提醒？

```
<!doctype html>
<html lang="en">

    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
        <meta charset="utf-8" />
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-
        scalable=0, width=device-width;">
        <title>Welcome to Tiffany &amp; Co.</title>
        <link rel="stylesheet" href="index.css"
        type="text/css" media="screen" />
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <!--Enable media queries in some unsupported subrowsers-->
        <script type="text/javascript" src="css3-mediaqueries.js"></script>
        <script type="text/javascript" src="main.js"></script>
    </head>

    <body>
        <div id="wrapper">
            <h1>Welcome to Store</h1>
            <p>The WiFi Password is:</p>
            <h2 align=center>
                <font color="red">Diamonds</font>
            </h2>
            <p>It will change in:</p>
            <p>
                <script type="text/JavaScript">
                    window.document.onload = function () {
                        tick();
                        setInterval(tick, 1000);
                    };

                    function tick() {
                        var d = new Date();
                        var currentDate = new Date(d.getUTCFullYear(),
                        d.getUTCMonth(), d.getUTCDate(), d.getUTCHours(),
                        d.getUTCMinutes(), d.getUTCSeconds(),
                        d.getUTCMilliseconds());
                        var endDate = new Date(currentDate.getFullYear(),
                        currentDate.getMonth(), currentDate.getDate() + (30
                        /* 
                                saturday */
                        - currentDate.getDay()), 16
                        /* 9 AM Mountain 
                                Time = 4 PM GMT */
                        );
                        var secondsUntilSaturday = Math.floor((endDate.getTime() - currentDate.getTime()) / 1000);
                        var timeUntilSaturday = secondsToTime(secondsUntilSaturday);
                        document.body.innerHTML = (timeUntilSaturday.h + " hours, " + timeUntilSaturday.m + " minutes, " + timeUntilSaturday.s + " 
                                seconds");
                    }

                    function secondsToTime(secs) {
                        var hours = Math.floor(secs / (60 * 60));
                        var divisor_for_minutes = secs % (60 * 60);
                        var minutes = Math.floor(divisor_for_minutes / 60);
                        var divisor_for_seconds = divisor_for_minutes % 60;
                        var seconds = Math.ceil(divisor_for_seconds);
                        var obj = {
                            "h": hours,
                            "m": minutes,
                            "s": seconds
                        };
                        return obj;
                    }
                </script>
                <div id="logo">
                    <img src="logo.png" width="108" height="14" alt="Tiffany &amp; Co." />
                </div>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:46:05.377

您的 HTML 内容因以下行而消失：

```
document.body.innerHTML = (timeUntilSaturday.h + " hours, " + timeUntilSaturday.m + " minutes, " + timeUntilSaturday.s + " seconds"); 
```

document.body.innerHTML 会将内容写入 body 元素，替换其中的任何内容。您可以替换`document.body.innerHTML`为`document.write`.

要回答您的第二个问题，没有 JavaScript 不能自己发送电子邮件，但通过 AJAX 它可以调用您服务器上的脚本来发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:45:53.517

那是因为你正在用你的计时器替换整个身体的内容

```
document.body.innerHTML = (
    timeUntilSaturday.h +" hours, "+ 
    timeUntilSaturday.m +" minutes, "+ timeUntilSaturday.s +" 
    seconds"
); 
```

而不是这个添加`<div>`计时器并使用您的计时器设置内容

```
<div id="timer"></div>
<script>
document.getElementById('timer').innerHTML = (
        timeUntilSaturday.h +" hours, "+ 
        timeUntilSaturday.m +" minutes, "+ timeUntilSaturday.s +" 
        seconds"
    );
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:20:11.660

既然你引用了 JQuery，我已经为你使用了它，但实际上只在一个地方......

这应该做你需要做的事情： [这是一个小提琴](http://jsfiddle.net/blesh/JVhdf/3/)

这也是那个小提琴的代码：

```
<script>
//start your interval to update your timer.
setInterval(function() {
    //get ms until Saturday 9AM.
    var ms = untilTimeOfWeek(6, 9, 0, 0);
    $('#timer').text(getHours(ms) + ' hours ' + getMinutes(ms) + ' minutes ' + getSeconds(ms) + ' seconds');
}, 100);

//gets the time left until a specific time of week.

function untilTimeOfWeek(day, hour, min, sec) {
    var currdate = new Date();
    var currday = currdate.getDay();
    var daydiff = (day - currdate.getDay()) * 86400000;
    var hourdiff = (hour - currdate.getHours()) * 3600000;
    var mindiff = (min - currdate.getMinutes()) * 60000;
    var secdiff = (sec - currdate.getSeconds()) * 1000;
    return daydiff + hourdiff + mindiff + secdiff;
}
//get the hours from some milliseconds.

function getHours(ms) {
    return Math.floor(ms / 3600000);
}

//get the minutes from some milliseconds.

function getMinutes(ms) {
    return Math.floor((ms % 3600000) / 60000);
}

//get the seconds from some milliseconds.

function getSeconds(ms) {
    return Math.floor(((ms % 3600000) % 60000) / 1000);
};​
</script>
<div id="timer"></div> 
```

**注意**：`+new Date`只是将 Date 转换为 JavaScript 中的数字类型的简写。

我希望这会有所帮助。

**编辑**：更新到下周六早上 9 点。

# menu - 在模板中使用备用区域

> ID：11745024
> 
> 赞同：1
> 
> 时间：2012-07-31T16:42:48.707
> 
> 标签：menu, atk4

我正在尝试创建一个垂直菜单，在查看默认模板文件后，我发现标准是水平菜单，但也有一个垂直菜单区域 ( `MenuVertical`)。我无法弄清楚我是如何将使用的区域从更改`Menu`为`MenuVertical`. 我在文档中搜索了几个小时并查看了类引用，但我无法弄清楚。

我是这个框架的新手，我想这很容易做到，但是当你知道怎么做时，有什么不容易的呢？:)

**编辑**：为了清楚起见，这是一个关于敏捷工具包框架的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:52:17.253

是的，这很容易。创建对象时，将模板和区域指定为第四个参数：

```
$this->add('Menu',null,null,array('menu','VerticalMenu')); 
```

如果省略的对象从 defaultTemplate 方法中获取值：

```
function defaultTemplate(){
    return array('menu','VerticalMenu');
} 
```

# c# - 在 ListView WPF 中设置项目焦点

> ID：11745028
> 
> 赞同：9
> 
> 时间：2012-07-31T16:42:57.170
> 
> 标签：c#, .net, wpf, focus, wpf-controls

有什么方法可以从 WPF 中的 WinForms 完成此功能？

```
ListView.FocusedItem = ListView.Items[itemToFocusIndex] 
```

我正在尝试在 WPF ListView 中的项目上手动设置**焦点**（而不是选择）。从*System.Windows.Controls*。谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-31T19:37:07.370

WPF 中有两种类型的焦点——键盘焦点和逻辑焦点。[此链接](http://msdn.microsoft.com/en-us/library/aa969768.aspx)可以为您提供有关 WPF 中焦点的更多信息。

您可以这样做：

```
ListViewItem item = myListView.ItemContainerGenerator.ContainerFromIndex(index) as ListViewItem;
item.Focus(); 
```

也可以打电话

```
Keyboard.Focus(item); 
```

如果您还想滚动`ListView`到项目的位置，请添加：

```
myListView.ScrollIntoView(item); 
```

**重要提示：**为此，您需要在`VirtualizingStackPanel.IsVirtualizing="False"`上进行设置`ListView`，这可能会导致其执行速度变慢。需要这个附加属性的原因是，当`ListView`被虚拟化（默认情况下）时，`ListViewItems`不会为屏幕上未显示的项目创建 ，这将导致`ContainerFromIndex()`返回`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:54:45.657

我相信您可以使用 Keyboard.FocusedElement 来获取列表视图中的焦点元素。

```
Keyboard.FocusedElement 
```

应该返回焦点元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T09:02:30.760

ListView 项目是 UIElements，所以只需使用`UIElement.Focus()`. 例如，`listViewItem.Focus()`或`button.Focus()`等等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-26T11:29:11.440

```
//to set focus write
CollistView7.Items[TheIndItem].Selected = true; 
CollistView7.Select();
CollistView7.Items[TheIndItem].Focused = true;
//when TheIndItem is the index 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-31T17:55:33.363

```
 public void foucusItem( ListView.Item itemToFocusIndex){
         int count = 0; 
         foreach(ListView.Item item in YourListView){
               if(item == itemsToFocusIndex){
                     ListView.Items[count].Focus();
                     return;
               }
         count++;
         }
    } 
```

# tomcat - Grails 资源：图像是 404，即使它存在于 WAR 中

> ID：11745031
> 
> 赞同：5
> 
> 时间：2012-07-31T16:43:13.617
> 
> 标签：tomcat, grails, resources

我有 3 个 Grails 2.x 项目。对于此示例，它们是：

```
ProjectCore    - A Grails plugin containing all reusable code (domains, taglibs, etc)
ProjectWeb     - Front facing web application.  Uses ProjectCore
ProjectAdmin   - Admin appliction.  Uses ProjectCore 
```

几乎所有的图像、js、标签库、服务等都在 ProjectCore 中，在各个项目中只有应用特定的控制器/视图/服务/js/css。

一切都在本地运行良好，使用 NetBeans 作为我的 IDE。我对 ProjectAdmin 项目进行了战争，并将其部署到运行 Tomcat 6 的 Ubuntu 服务器上。应用程序中的所有内容都按预期工作，除了 1 个图像：avatar.png（包含在 ProjectCore 应用程序中）。

我正在使用 g:resource 标记创建所有图像链接，并且它们都正确解析为 /static/images/some_image_name.png url，除了这张图像。我还验证了该图像存在于战争中（位于所有其他图像所在的 plugins/ProjectCore/images 中）。

对于这个特定的图像，如果用户没有为自己上传头像，我将使用 taglib (AvatarTagLib) 创建指向该图像的链接。此 Taglib 在 ProjectRoot 中，但正在从其他项目中调用。我相信其他图像是从特定项目中的视图中调用的，所以这可能是挂断的地方。

最初，当我部署应用程序时，我忘记将战争（和包含目录）的所有权更改为 tomcat6:tomcat6，所以我遇到的问题不仅是这个图像，还有来自 SpringSecurityPlugin 的 messages.properties 文件。我将其全部清除，修复了权限，并且解决了除此之外的所有问题。

以前有没有人遇到过这种行为，或者知道我可以采取的任何其他途径来解决这个问题？

**编辑**：我忘了提一件事。[当我尝试通过http://admin.mydomain.com/images/avatar.png](http://admin.mydomain.com/images/avatar.png)或[http://admin.mydomain.com/static/images/avatar.png](http://admin.mydomain.com/static/images/avatar.png)直接访问图像时，都返回 404。但是，我可以通过这种方式访问​​其他图像。

**编辑 2**：这不仅限于单个图像。它影响了插件中大约一半的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:21:13.333

升级资源插件为我解决了这个问题。我更新`BuildConfig.groovy`了`runtime ":resources:1.2.RC2"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T11:01:49.617

尝试将资源插件升级到 1.2-RC1。

我有一个非常相似的问题，我的 3 个 png 在 /images 和 /static/images 下直接访问时会返回 404 错误。这些图像被命名为 dot.png、calendar.png 和 dotted_vertical.png。如果我重命名它们（例如 dotted_vertica.png 或 dotted_vertical1.png），它们会起作用，但我找不到任何其他相似之处或模式。确实很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T22:15:40.320

没有看到代码就不可能说真的。

1）您可能必须为插件中的资源传递 plugin= 2）您是否尝试过 r:resource？

如果您可以将其隔离为一个微不足道的插件和应用程序，请创建一个 jira

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T02:47:11.180

我有同样的问题。

我解决了它在 BuildConfig.groovy 中将资源插件（运行时“：resources：1.1.6”）更改为 webxml 插件（编译“：webxml：1.4.1”），现在它正在工作。

我希望它也适合你。

# python - Python HTML 电子邮件：自定义输出颜色编码

> ID：11745033
> 
> 赞同：0
> 
> 时间：2012-07-31T16:43:17.257
> 
> 标签：python

我正在尝试发送带有颜色编码输出的 python (2.6) HTML 电子邮件。我的脚本创建了一个输出字符串，我将其格式化为一个表格（使用 str.format）。它在屏幕上打印正常：

abcd 24222 xyz A
abcd 24222 xyz B
abcd 24222 xyz A
abcd 24222 xyz D

但我还需要将其作为电子邮件发送，并且我需要 A（例如绿色）、B（红色）等。我该怎么做？

我尝试的是在 A、B 等的前面和后面附加 FONT COLOR = #somecolor & /FONT 标签。我写了一个方法/模块，在字符串的适当部分添加 table、tr & td 标签，所以该消息需要电子邮件中的 HTML 表格。但是，这种方法存在一个问题：
1）这并不总是能正常工作。电子邮件（通过运行完全相同的脚本获得）是不同的，并且多次出现不匹配的成员和神秘的 tr 或 td 出现（每次在不同的位置）。即使我的 html 表创建是正确的

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:52:01.063

你需要的工具箱叫做[email.mime](http://docs.python.org/release/2.6.8/library/email.mime.html#module-email.mime) 你可能想要这样的东西：

```
from email.mime.multipart import MIMEMultipart               
from email.mime.text import MIMEText                         

msg = MIMEMultipart()                                        
msg['Subject'] = u"A subject."                               
msg['From'] = "sender@example.org"                           
msg['To'] = "receiver@example.com"                           
body = MIMEText(MAIL_TEMPLATE.format(**mail_content),
                _subtype='html',                             
                _charset='UTF-8')                            
msg.attach(body) 
```

MAIL_TEMPLATE 是一个 HTML 模板，而 mail_content 是一个字典，它将 HTML 中存在的键与要插入的值相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:23:32.690

好的。她对我有用，以防万一有人遇到同样的问题。我必须在 HTML 表中的每个标记之后输入回车符（即 \n）。一切正常。

PS：关于这是否对您有帮助的一个线索是，我正在创建一大串 HTML。

# perl - ssh to open a file on a remote machine in perl

> ID：11745034
> 
> 赞同：0
> 
> 时间：2012-07-31T16:43:21.640
> 
> 标签：perl, text, ssh

I am having problems with ssh'ing to a remote machine and open a text file on that machine using Perl. I am currently tailing the file as seen below,

```
my $remote_filename = '/export/home/fsv/sample.txt';
my $remote_host = 'bs16-s1.xyz.com';

my $cmd = "ssh -l $sshUser $remote_host tail -f $remote_filename |";

open  $inFile, $cmd or die "Couldn't spawn [$cmd]: $!/$?"; 
```

The connection times out and I see that file is not even close to being opened. I tried using Net::SSH and Remote::FIle as well with no avail. It would be great if I could get some assistance on this.

Thanks for your time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:40:53.193

实际上，您在程序中的阻塞时间比您声称的要晚。具体来说，您阻塞从哪里读取，`$inFile`直到句柄返回 EOF，这就是`ssh`退出的原因，也就是`tail`退出的时间。因为`tail -f`永远不会退出（除非被信号终止），所以你也永远不会退出。这就是为什么切换到`cat`工作。

# solr - BitSet field type in solr

> ID：11745036
> 
> 赞同：2
> 
> 时间：2012-07-31T16:43:27.163
> 
> 标签：solr

I am new to solr and I apologize if I am not using the right terms in my question. I want to use solr to store and search for some chemistry data. For each molecule (represented as a string), I can convert it into a bitset representation (fixed length). To search for the molecule, the similarity is based on bits comparison. Since there will be large amount of data, I want to make the search faster so I imagine I need to index these bitsets. I want to write a custom FieldType, a custom Similarity. The FieldType will automatically convert the text representation of the molecule into a BitSet and store/index it. So my question is, is this possible, or is there anything that already in solr that can store/index bitsets?

Thank you!

# android - Launching built-in gallery to view an image

> ID：11745043
> 
> 赞同：0
> 
> 时间：2012-07-31T16:43:45.853
> 
> 标签：android, android-intent, gallery

I am building an application and in one of my activities, I am displaying some information from a database and one image, this image is scaled down and when the user press the image, I am launching the built-in gallery to view it in a larger size.

My problem here is the following when I am done looking at the image in the gallery, I want the user when he press the back button to go back to my app and exactly to the activity that launches the gallery, my application show me a crash message and direct me to the main activity of my app

here is the code that launches the built-in gallery

```
imageView.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new   
                         File(image_file.getAbsolutePath())),"image/*");
            startActivityForResult(intent, 1);
        }
    }); 
```

I tried using startActivity(intent); but that still not working.

I also tried to override onPuase() and onResume() but after I did, the entire activity that hold the imageView does not launch and the app crashes.

when I looked up something similar to this problem, people say that I may have bad manifest but I am doing nothing for that Activity in my manifest.

How can I fix the problem so the user can see the image in the built-in or any other gallery app then presses the back button to go back to my app?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:32:48.473

我不确定，但请在您的点击监听器中尝试以下代码

```
imageView.setOnClickListener(new View.OnClickListener() {
 Intent intent = new Intent();
 intent.setType("image/*");
 intent.setAction(Intent.ACTION_GET_CONTENT);
 startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
}
 }); 
```

# c# - 重新设置 ActiveX 控件

> ID：11745047
> 
> 赞同：0
> 
> 时间：2012-07-31T16:44:00.960
> 
> 标签：c#, .net, wpf, activex

WPF 中是否可以将 ActiveX 控件移动到可视化树中的不同位置？我有一个控件，我想动态移动它成为另一个小部件的子控件。

如果这是不可能的，有没有办法制作控件的副本并将其放置在其他地方？我以前在这方面的尝试根本没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:08:50.310

这是一个类比，它不是一个很好的类比，但希望它能够推动这一点：

想象一下，您使用乐高积木搭建了一个场景。您还有一块带有图像的扁平铝材，您想将其插入其中一个 LEGO 层下，使其成为场景的一部分。你不能这样做，因为铝上没有钉子和孔。它不会粘在底层，顶部的 LEGO 也不会粘在上面。

类比在这里不成立，因为在现实世界中，您可以使用胶水或其他东西使其起作用。

WPF 提供了一个单一的窗口对象，该对象承载一个 DirectX 表面，在该表面上呈现其每个控件（我们上面的 LEGO）。ActiveX 控件（或 Winforms 控件）每个都需要一个单独的系统窗口对象（铝板）。无法在 DirectX 表面上呈现的元素之间放置系统窗口。

这两种技术不混合（或至少不混合）。你要么必须忍受这个事实，并在这个限制下安排事情，要么你需要改变技术。使用 Winforms 构建您的应用程序（其中每个控件都是一个系统窗口），或者创建/查找一个 WPF 控件，该控件提供与您正在使用的此 ActiveX 控件相同的功能。

# c# - C# drop down access issue using jquery

> ID：11745048
> 
> 赞同：0
> 
> 时间：2012-07-31T16:44:13.257
> 
> 标签：c#, javascript, jquery

I have issue in accesing drop down item from c# code behind

Scenario: i am modifying drop down based on user selection using jquery/ajax call. while accesing the drop down item from code behind, still it retains old list.

Please help to access updated drop down list from c# code behind.

**Sample code**

Jquery code :

```
$.ajax({
            type: 'POST',
            url: "Search.aspx/LoadNewOptions",
            contentType: 'application/json;charset=utf-8;',
            dataType: "json",
            data: "",
            success: function (data) {
                 $("#dropdown").empty();              

                $($.parseJSON(data.d)).each(function () {
                    var Option = $('<option />');

                   xOption.attr('value', this.value).text(this.label);
                    $('#dropdown').append(Option);

                    }
                });
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(errorThrown);
            }
        }); 
```

C# Code behind code :

```
dropdown.SelectedItem.Value.Trim()   // returns old value 
```

Alternate Solution: Created separate javascript function and store selected item values in hidden variable. No issues in accessing hidden variables from code behind.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:04:17.783

您的旧值没有更改的原因是服务器端不知道新值。除非您将其发布回服务器，否则它将不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:14:34.290

除非您告诉服务器，否则服务器不知道客户端发生了什么。

看起来您正在动态地将元素附加到下拉列表中。如果您在页面下次执行时重新绑定列表，它不知道您已在客户端对其进行了修改。

*   隐藏字段适用于简单情况

*   您可以检查 POST 并查看它是否包含列表中不存在的值，如果是，则添加它

# sql - 如何在 2 个不同的数据集上检查 Null 并且不输出空表

> ID：11745053
> 
> 赞同：0
> 
> 时间：2012-07-31T16:44:32.810
> 
> 标签：sql, vb.net, dataset, tableadapter

我有一个通过调度程序自动启动 Windows 的程序。它所做的是运行查询，然后通过电子邮件发送查询结果。这一切都有效。我们有 10 个位置，因此我将对其进行编辑，以便它发送 5 封不同的电子邮件...我遇到的问题是如何检查多个 tableadapter 是否具有空值。你会看到我让它检查“Paid_Out_TB”以查看它是否有 0 行......如果有 0 行程序关闭。我想做的是检查它是否有 0 行。如果是，请在电子邮件中报告表格数据，然后检查下一个表格适配器，是否包含行？如果是这样，也要报告...在没有数据的情况下遗漏任何表格...问题是...如果没有数据，我需要告诉它做某事...有什么建议吗？

```
 Imports System.Net.Mail
    Imports System.Net.Mail
Imports System.Linq

Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the 'DataSet.Paid_Out_Tb' table. You can move, or remove it, as needed.

        Try
            Dim SmtpServer As New SmtpClient()
            Dim mail As New MailMessage()
            Me.Paid_Out_TbTableAdapter.Fill(Me.DataSet.Paid_Out_Tb)
            Me.DataTable1TableAdapter.Fill(Me.DataSet.DataTable1)
            Dim payouts = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Date</th><th>Amount</th><th>User</th><th>Comment</th></tr>
                        <%= From paidOut In Me.DataSet.Paid_Out_Tb.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td>
                                       <td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %>
                                       </td><td><%= "$" & paidOut.Paid_Out_Amount.ToString("0.00") %></td>
                                       <td><%= paidOut.Update_UserName %></td>
                                       <td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>
                </body>

            </html>
            Dim Payouts453 = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Store #</th><th>Date</th><th>Amount</th><th>User</th><th>Comment</th></tr>
                        <%= From paidOut In Me.DataSet.DataTable1.AsEnumerable _
                            Select <tr><td><%= paidOut.Store_Id %></td>
                                       <td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %>
                                       </td><td><%= "$" & paidOut.Paid_Out_Amount.ToString("0.00") %></td>
                                       <td><%= paidOut.Update_UserName %></td>
                                       <td><%= paidOut.Paid_Out_Comment %></td></tr> %>
                    </table>
                </body>

            </html>
            If (Me.DataSet.Paid_Out_Tb.Count = 0) Then 'This cheks to see if the dataset is Null.  We do not want to email if the set is Null

                Me.Close()

            Else

                SmtpServer.Credentials = New  _
                Net.NetworkCredential("****", "****") 'Assign the network credentials
                SmtpServer.Port = 25 'Assign the SMTP Port
                SmtpServer.Host = "10.0.*.**" 'Assign the Server IP
                mail = New MailMessage() 'Starts a mail message
                mail.From = New MailAddress("*@**.com") 'Sets the "FROM" address
                mail.To.Add("**@**.com") 'Sets the "To" address
                'mail.CC.Add("**@**.com") 'set this if you would like to CC
                mail.Subject = "Paid Out Report for 1929"
                mail.IsBodyHtml = True
                mail.Body = payouts.ToString() & Payouts453.ToString() 'this is to add another chart  You would use a seperate dataset obviously
                SmtpServer.Send(mail)
                'MsgBox("mail send")
            End If

        Catch ex As Exception

            MsgBox(ex.ToString)

        End Try

        Me.Close() 'Closes the program when it's finished.

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:01:40.383

我通过使用“If NOT”“Then”语句来实现这一点。如果 tableadapter 为“空”，这允许您继续

# javascript - 计算等级价格

> ID：11745054
> 
> 赞同：2
> 
> 时间：2012-07-31T16:44:37.313
> 
> 标签：javascript, jquery, math

这是示例数据：

```
100 items or less = $20
200 items or less = $15
500 items or less = $10 
```

示例场景：用户输入`150`商品 -> 价格为`15`每件商品$

这就是我能走多远：http: [//jsfiddle.net/ByPh5/](http://jsfiddle.net/ByPh5/)

```
<script type="text/javascript">

$(function(){

var tier_prices = {
    '100':'20',
    '200':'15',
    '500':'10'
}

var user_input = $('#user_input').val();

var price_output = 0;                    
/*
   calculate
*/

    $('#price_output').text(price_output)

})​

</script>

<input type="text" id="user_input" value="150"/>
<p id="price_output"></p>​ 
```

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T18:47:52.703

（注意：由于您留下了一些歧义，我假设 500 多件商品也需要 20 美元。）

您可以做一些更简单的事情，而不是弄乱那个数据结构。首先是代码，然后是解释（如果注释还不够的话。）

```
function determine_price ( qty ) {
    var prices = [
        20, //0 to 99
        20, //100 to 199
        15, //200 to 299
        15, //300 to 399
        15, //400 to 499
        10  //500+
    ];

    //divide by the common denominator
    //0-99 turn into 0,
    //100-199 turns into 1
    //200-299 turns into 2
    //and so on
    qty = Math.floor( qty / 100 );

    //check for 600+, which are the same as 500 (last array item)
    return prices[ qty ] || prices.pop();
} 
```

100、200 和 500 有一些共同点：它们是 100 的倍数。所以我们取一个数组，并将每个元素视为 100 的范围：第一个元素 (0) 是 0 到 99 个项目，第二个元素 ( 1) 是 100 到 199 个项目，依此类推。然后，对于每个输入数量，我们除以该公分母，以找出它落在哪个范围内，并获取与该数量对应的价格。

在模棱两可的情况下，即 600 多个元素会发生这种情况（最后一个元素，元素 #6 是 500-599），我们只取最后一个范围的价格。

不需要循环，只需简单的数学运算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T18:09:13.053

首先，不要指定价格层的最大数量，而是指定最小数量。并将其定义为排序数组，以便您可以遍历它。

```
var tier_prices = [
    { minQty: 0,   unitPrice: 20 },
    { minQty: 101, unitPrice: 15 },
    { minQty: 201, unitPrice: 10 }
]; 
```

然后，遍历这些值，直到达到大于输入数量的最小数量：

```
var qty = +$('#user_input').val();
var price;
for (var i = 0; i < tier_prices.length && qty >= tier_prices[i].minQty; i++) {
    price = tier_prices[i].unitPrice;
}
$('#price_output').text(price * qty); 
```

[http://jsfiddle.net/gilly3/ByPh5/3/](http://jsfiddle.net/gilly3/ByPh5/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T16:57:37.167

对象很好，但有点烦人，因为不能保证您按顺序遍历这些值。

[http://jsfiddle.net/radu/6MNuG/](http://jsfiddle.net/radu/6MNuG/)

```
$(function() {
    var tier_prices = {
        '100': '20',
        '200': '15',
        '500': '10'
    };

    $('#user_input').change(function() {

        var num = parseInt($(this).val(), 10),
            price = 0,
            prevTier = 0,
            maxTier = 0;            

        for (var tier in tier_prices) {
            if (tier_prices.hasOwnProperty(tier) && num <= tier) {
                if (tier < prevTier || prevTier == 0) {
                    price = tier_prices[tier];
                    prevTier = tier;
                }
            }

            if (tier > maxTier) maxTier = tier;
        }

        if (num > maxTier) price = tier_prices[maxTier];

        $('#price_output').text(price * num);
    });
})​;​ 
```

多维数组示例：http: [//jsfiddle.net/radu/6MNuG/](http://jsfiddle.net/radu/6MNuG/)

```
$(function() {
    var tier_prices = [
        [100, 20],
        [200, 15],
        [500, 10]
    ];

    $('#user_input').change(function() {
        var num = parseInt($(this).val(), 10),
            price = 0,
            n = tier_prices.length - 1;

        if (num > tier_prices[n][0]) {
            price = tier_prices[n][1];   
        } else {
            for (var i = 0; i <= n; i++) {                   
                if (num <= tier_prices[i][0]) {
                    price = tier_prices[i][1];
                    break;
                }
            }
        }

        $('#price_output').text(price * num);
    });
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T17:07:20.070

尝试：

```
var tier_prices = {
    '100': '20',
    '200': '15',
    '500': '10'
}
var price_output = 0;
var multiplier = 1;
$('#user_input').change(function() {
    var user_input = parseInt($('#user_input').val(),10);
    for (tier in tier_prices) {
        if (user_input <= tier) {
            multiplier = tier_prices[tier];
            break;
        }
    }
    $('#price_output').text(user_input * multiplier);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ByPh5/1/)**

## 更新

这是一个使用简单开关/案例放弃您拥有的对象的示例，因为该对象的想法不是很流行或实用。请注意，我添加了一个数量大于 500 的案例：

```
$('#user_input').change(function() {
    var user_input = parseInt($('#user_input').val(), 10);
    switch (true) {
    case user_input >= 0 && user_input <= 100:
        $('#price_output').text(user_input * 20);
        break;
    case user_input > 100 && user_input <= 200:
        $('#price_output').text(user_input * 15);
        break;
    case user_input > 200 && user_input <= 500:
        $('#price_output').text(user_input * 10);
        break;
    case user_input > 500:
        $('#price_output').text(user_input * 5);
    }
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ByPh5/5/)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-08T23:20:46.520

正在寻找类似的东西并决定做一些不同的事情，在 js fiddle 中运行它，它似乎工作得很好。正如 gilly3 指出的那样，您可能不想要上限，因此您可能想要做“1 或更多，100 或更多...500 或更多”。我使用的 vars 和 div 名称不同，但您可以看到我正在尝试做的事情并根据您的需要进行调整：

**JSFiddle：[https ://jsfiddle.net/vx4k2vdh/5/](https://jsfiddle.net/vx4k2vdh/5/)**

```
(function() {
    const tiers = {
        0: 20,
        100: 15,
        200: 10,
        500: 5
    }

    /**
     * Take qty and return the first appropriate
     * tier that it encounters, break when
     * tier has been identified so you don't
     * waste time iterating if u've already found tier
    **/
    function calculatePriceTier(qty) {
        var selectedTier;
        for (var tier in tiers) {
          if (tiers.hasOwnProperty(tier)) {
            if (qty < tier) break;
            selectedTier = tier;
          }
        }
        return selectedTier;
     }

    $(function() {
        /**
         * Every time a new number is selected
         * run calculations and grab tier, total
        **/
        $('#items').on('input', 'input', function() {
            var qty = +$(this).val(),
                tier = calculatePriceTier(qty),
                total = qty * tiers[tier];
            $('#total-price span').text(total);
        });
    });

})(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-10T16:43:31.593

OP 的请求中描述的是批量定价。此处给出的所有示例都是针对批量定价而非分层定价。

ruby 中的轮胎定价示例 [https://repl.it/repls/IndigoRightDisks](https://repl.it/repls/IndigoRightDisks)

```
def cost(qty)

tier = {
    10   => 100,
    50   => 97,
    100  =>82,  
    200  =>71,
    300  =>66,
    400  =>64,
    500  =>27,
    1000 =>12
    }

  cs = []
  for cnt in 1..qty
    d = tier.keys.find{|x| cnt  <= x ?cnt <= x :  tier.keys.last == x }    
    cs << tier[d]
  end
  return cs.reduce{|y,x| y+x};
end 
```

# php - 是否有可能在 php 字符串中进行 xslt 转换

> ID：11745055
> 
> 赞同：0
> 
> 时间：2012-07-31T16:44:42.343
> 
> 标签：php, xml, xslt, curl, xml-parsing

我不知道我是否正确，我有一个 cURL 脚本，它从提要中提取一个 xml，然后将其包含在一个 php 字符串中 $rawdata 数据看起来像......

```
<search>
    <response status="1">
        <errors>
            <number_of_hotels>1 of 1</number_of_hotels>
        </errors>
    </response>
    <lr_rates>
        <hotel>
            <hotel_ref>142680</hotel_ref>
            <hotel_currency>GBP</hotel_currency>
            <hotel_rooms>
                <room>
                    <ref>4380316</ref>
                    <type>10</type>
                    <type_description>Apartment</type_description>
                    <sleeps>2</sleeps>
                    <rooms_available>0</rooms_available>
                    <adults>2</adults>
                    <children>0</children>
                    <breakfast>false</breakfast>
                    <dinner>false</dinner>
                    <description>The apartment has seperate kitchen area, lounge/dining area, bedroom with double bed and bathroom with bath &amp; shower.</description>
                    <alternate_description/>
                    <rack_rate>140.00</rack_rate>
                    <rate>
                        <date>31/07/2012</date>
                        <formatted_date>31 July 2012</formatted_date>
                        <price>Full</price>
                        <hotelcurrencyprice>Full</hotelcurrencyprice>
                        <numeric_price>Full</numeric_price>
                        <numeric_hotelcurrencyprice>Full</numeric_hotelcurrencyprice>
                        <requested_currency>GBP</requested_currency>
                    </rate>
                    <rate>
                        <date>01/08/2012</date>
                        <formatted_date>01 August 2012</formatted_date>
                        <price>Full</price>
                        <hotelcurrencyprice>Full</hotelcurrencyprice>
                        <numeric_price>Full</numeric_price>
                        <numeric_hotelcurrencyprice>Full</numeric_hotelcurrencyprice>
                        <requested_currency>GBP</requested_currency>
                    </rate>
                    <available_online>false</available_online>
                    <minimum_nights>1</minimum_nights>
                    <bed_type>Double</bed_type>
                    <cancellation_policy/>
                    <cancellation_days/>
                    <cancellation_hours/>
                    <room_terms/>
                </room>
                <room>
                    <ref>4383781</ref>
                    <type>10</type>
                    <type_description>Apartment</type_description>
                    <sleeps>4</sleeps>
                    <rooms_available>0</rooms_available>
                    <adults>4</adults>
                    <children>0</children>
                    <breakfast>false</breakfast>
                    <dinner>false</dinner>
                    <description>The apartment has seperate kitchen area, lounge with dining area, two double bedrooms, ensuite &amp; main bathroom.</description>
                    <alternate_description/>
                    <rack_rate>185.00</rack_rate>
                    <rate>
                        <date>31/07/2012</date>
                        <formatted_date>31 July 2012</formatted_date>
                        <price>Full</price>
                        <hotelcurrencyprice>Full</hotelcurrencyprice>
                        <numeric_price>Full</numeric_price>
                        <numeric_hotelcurrencyprice>Full</numeric_hotelcurrencyprice>
                        <requested_currency>GBP</requested_currency>
                    </rate>
                    <rate>
                        <date>01/08/2012</date>
                        <formatted_date>01 August 2012</formatted_date>
                        <price>Full</price>
                        <hotelcurrencyprice>Full</hotelcurrencyprice>
                        <numeric_price>Full</numeric_price>
                        <numeric_hotelcurrencyprice>Full</numeric_hotelcurrencyprice>
                        <requested_currency>GBP</requested_currency>
                    </rate>
                    <available_online>false</available_online>
                    <minimum_nights>1</minimum_nights>
                    <bed_type/>
                    <cancellation_policy/>
                    <cancellation_days/>
                    <cancellation_hours/>
                    <room_terms/>
                </room>
            </hotel_rooms>
            <cancellation_type>First Night Stay Chargeable</cancellation_type>
            <cancellation_policy>1 Days Prior to Arrival</cancellation_policy>
            <citytax>
                <typename/>
                <value/>
                <optedin/>
                <iscitytaxarea/>
            </citytax>
        </hotel>
    </lr_rates>
</search> 
```

有多个价格实例，如果可能的话，我需要将其他信息传递回 php............ ........ 好的，所以答案是的，这是可能的，但现在我坚持尝试让 xsl 输出房间数据，所以这就是我如何让它工作到获得输出的方式，首先我必须重建我的 php 安装以包含 xsl，然后使用这个 php总而言之：

```
 $ch = curl_init();
  $timeout = 0;
  curl_setopt ($ch, CURLOPT_URL, $url1);
  curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_USERAGENT , "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
  curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $rawdata = curl_exec($ch);
  curl_close($ch);
    $xml = new DOMDocument();
    $xml->$rawdata;
   $xsl = new DOMDocument;
   $xsl->load('path/to/file.xsl');
   $proc = new XSLTProcessor();
   $proc->importStyleSheet($xsl);
  $lrdata = $proc->transformToXML($xml); 
```

现在一切正常，但我无法让我的 xslt 从每个房间节点提取数据我尝试更改匹配和选择值但没有运气我在这里做错了什么假设 xml 与上面相同这是 xsl：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="/">
      <h2> Availability Search:</h2>
       <table border="1">
       <tr bgcolor="#FFFFFF">
        <th align="left">Room Type</th>
        <th align="left">Description</th>
        <th align="left">Availability</th>
        <th align="left">Price</th>
        </tr>
      <xsl:for-each select="/room">
       <tr>
        <td><xsl:value-of select="type_description" /></td>
        <td><xsl:value-of select="description" /></td>
        <td><xsl:value-of select="rooms_available" /></td>
        <td><xsl:value-of select="rack_rate" /></td>
      </tr>
     </xsl:for-each>
  </table>
  </xsl:template>
  </xsl:stylesheet> 
```

很抱歉造成混乱，所以现在我需要知道这个 xsl 有什么问题以及是否可以将信息作为 $string 传递回 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:21:06.030

您的 xsl:for-each 选择需要阅读：

```
<xsl:for-each select='//room'> 
```

原因是 /room 会在主层寻找房间（在 XML 中你只能有 1 个），但 //room 会在 XML 树的任何层寻找所有房间元素。

完整的 XSL：（您还缺少 xsl:output 指令）

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:output method='html' />
       <xsl:template match="/">
          <h2> Availability Search:</h2>
           <table border="1">
           <tr bgcolor="#FFFFFF">
            <th align="left">Room Type</th>
            <th align="left">Description</th>
            <th align="left">Availability</th>
            <th align="left">Price</th>
            </tr>
          <xsl:for-each select="//room">
           <tr>
            <td><xsl:value-of select="type_description" /></td>
            <td><xsl:value-of select="description" /></td>
            <td><xsl:value-of select="rooms_available" /></td>
            <td><xsl:value-of select="rack_rate" /></td>
          </tr>
         </xsl:for-each>
      </table>
      </xsl:template>
    </xsl:stylesheet> 
```

从您的示例中生成 2 行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T19:29:46.970

我最终设法让这个工作正确的答案是，我正在使用 dom 我应该一直使用 simplexmlelement 在通过 xml 进入的 curl 之后创建一个 XML 感谢您的帮助

```
curl_setopt ($ch, CURLOPT_URL, $url1);
 curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
   curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $urlstring);
    $rawdata = curl_exec($ch);
    curl_close($ch);
  $lrxml = new SimpleXMLElement($rawdata);
 $xsl = new DOMDocument;
$xsl->load('path/to/file.xsl');
$proc = new XSLTProcessor();
$proc->importStyleSheet($xsl);
$lrdata = $proc->transformToXML($lrxml); 
```

# ios - 异步 NSURL 请求如何适应大型中央调度/操作队列？

> ID：11745059
> 
> 赞同：0
> 
> 时间：2012-07-31T16:44:51.617
> 
> 标签：ios, nsurlconnection, grand-central-dispatch, afnetworking, nsoperationqueue

有人可以解释异步 NSURL 请求与 GCD 和 NSOperationQueues 之间的关系吗？

我不确定何时使用每个。

现在，当我需要获取/上传数据到服务器时，我一直在“摆脱”异步 NSURL 请求。但有人建议我应该使用 GCD。我的问题是我不知道在现实生活中的哪些例子中 GCD 会更好。有人对我有任何常见的用例吗？例如，如果我使用 GCD 存储 10 个异步 NSURL GET 请求的队列，这对我有什么好处？在大型中央调度队列或 NSOperationQueue 中进行异步 NSURL 请求是否有意义？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T21:44:18.060

在您的情况下，特别令人困惑的是，我们混合了一个 HTTP 请求队列（请求一个接一个地发送）和一个操作队列（一个任务接一个地执行随机计算工作）。

标准`NSURLConnection`实例在主线程上调用其委托，如果您当时没有对数据或 UI 进行复杂的工作，这是可以的。但是假设您需要下载一个大文件并将其作为文件逐块写入磁盘，同时向下滚动表格视图。现在，当您在磁盘上写入数据时，您的滚动可能会变得不稳定，从而阻塞主线程。

这就是`GCD`其更高级别的抽象`NSOperationQueue`发挥作用的地方。要解决此问题，您需要从主线程中卸载数据写入调用。您可以通过在您的via上指定一个`NSOperationQueue`实例来做到这一点。这将确保您的委托以及您的写入调用将在后台线程中调用。您还可以将委托调用留在主线程上，并将昂贵的写入调用包装在一个块中，然后您将使用. 现在基本上包装了一个调度队列，并且您通过在原始调度队列上使用它来避免额外的线程切换，所以我会推荐该解决方案（这也恰好看起来更简单）。`NSURLConnection``setDelegateQueue:``dispatch_async``NSOperationQueue``NSOperationQueue`

`AFNetworking`是一个很棒的库，它以第三种方式解决了这个问题：它触发了一个`NSThread`专门用于`NSURLConnection`委托调用的库。这是从主线程卸载工作的预 GCD 方式。尽管它有效，但 GCD 提供了一种更有效和更友好的方式来向系统展示您的背景工作。

最后，如果您正在寻找 HTTP 请求队列，Cocoa 不提供它。您将不得不自己构建一个调度程序，或者您已经知道使用`AFNetworking`它再次是一个不错的选择。

如果您对这个主题感兴趣，GCD 提供的不仅仅是托管`NSURLConnection`委托调用，我建议您阅读 Apple 出色的[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)或观看GCD 上的优秀[WWDC 2011 视频（](https://developer.apple.com/videos/wwdc/2011/) *Blocks and Grand Central Dispatch in Practice*和*掌握大中央调度*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T16:56:42.673

这是题外话，但如果您使用 AFNetworking Lib，则不必执行上述任何操作。

“AFNetworking 是一个适用于 iOS 和 Mac OS X 的令人愉快的网络库。它建立在 NSURLConnection、NSOperation 和其他熟悉的 Foundation 技术之上。它具有模块化架构，具有精心设计、功能丰富的 API，使用起来很愉快。 "

回答您的问题，请阅读此内容

[http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/](http://www.cocoaintheshell.com/2011/04/nsurlconnection-synchronous-asynchronous/)

# c# - gpg encryption fails : File open error

> ID：11745064
> 
> 赞同：0
> 
> 时间：2012-07-31T16:45:01.573
> 
> 标签：c#, encryption, gnupg

I am trying to encrypt using gpg but i get this error even though i have given the path explicitly.. can some one help me? I am using Starksoft.Cryptography.OpenPGP. I have installed the gpg4win-light-2.1.0.exe to obtain the gpg.exe file..

is there something i am missing?

Error:GPG executable not found. @C:\Program Files\GNU\GnuPG\gpg.exe\gpg2.exe.

```
 GnuPG gpg = new GnuPG();
        gpg.BinaryPath = "@C:\\Program Files\\GNU\\GnuPG\\gpg.exe";
        gpg.Recipient = "myfriend@domain.com";
        FileStream sourceFile = new FileStream(sourcePath, FileMode.Open);
        FileStream outputFile = new FileStream(Destinationpath, FileMode.Create);
        gpg.Encrypt(sourceFile,outputFile);
        sourceFile.Close();
        outputFile.Close(); 
```

I even have a licence for openBlackboxPGP.. can i encrypt using gpg using that??

Please help me if i am missing something! Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:39:06.150

我想你是想说

```
gpg.BinaryPath = @"C:\Program Files\GNU\GnuPG\gpg.exe"; 
```

（注意 的位置`@`），或

```
gpg.BinaryPath = "C:\\Program Files\\GNU\\GnuPG\\gpg.exe"; 
```

尽管您最好使用更具可读性的形式

```
gpg.BinaryPath = "C:/Program Files/GNU/GnuPG/gpg.exe"; 
```

# php - PHP：如何使用简单 XML 解析此 xml

> ID：11745065
> 
> 赞同：2
> 
> 时间：2012-07-31T16:45:02.790
> 
> 标签：php, xml, simplexml

我需要`url2`从以下 xml 中获取值：

```
<videoplayer>
    <embed_code>aaa</embed_code>
    <volume>bbb</volume>
    <stats_pixel>
        <secret>ccc</secret>
        <url>ddd</url>
        <url2>HOW TO GET THIS???</url2>
        <video_plays>
            <site_url>eee</site_url>
        </video_plays>
    </stats_pixel>
</videoplayer> 
```

这没有用：

```
$xml = simplexml_load_file($url);
$xml->videoplayer[0]->stats_pixel->url2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:45:45.533

`videoplayer`是root，所以你不应该指定它，这应该工作：

```
echo $xml->stats_pixel->url2;; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:52:40.563

您可能需要对 URL 进行编码：

```
$xml = simplexml_load_file(rawurlencode($url));
var_dump($xml);  //make sure you get a SimpleXMLElement here before using it... 
```

# iphone - UIDatePicker shows weird on iPad but fine on iPhone

> ID：11745067
> 
> 赞同：2
> 
> 时间：2012-07-31T16:45:15.963
> 
> 标签：iphone, objective-c, ipad, ios5, uidatepicker

I am showing a `UIDatePicker` on a universal app. On iPhone it shows fine, on iPad it shows only the bottom portion. I am using `UIActionSheet` in other portions of the app which display fine on both. **How do I get it to display properly on the iPad?**

![iPhone](../Images/9ef3bf50cc1b7911f97122fad90dd48d.png) ![iPad](../Images/66e96750bdee708ddd78184176df377c.png)

```
- (void)showDatePicker
{   
    actionSheet = [[UIActionSheet alloc] initWithTitle:nil 
                                              delegate:nil
                                     cancelButtonTitle:nil
                                destructiveButtonTitle:nil
                                     otherButtonTitles:nil];

    [actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

    datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 40, 0, 0)];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSString *startTimeString = [MathFunctions minutesToTimeString:[appointment.start_time integerValue]];
    [dateFormatter setDateFormat:@"yyyyMMdd h:mm a"];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];
    NSString *dateTimeString = [NSString stringWithFormat:@"%@ %@", appointment.date, startTimeString];

    datePicker.date = [dateFormatter dateFromString:dateTimeString];
    [actionSheet addSubview:datePicker];

    UISegmentedControl *closeButton = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObject:@"Done"]];
    closeButton.momentary = YES; 
    closeButton.frame = CGRectMake(260, 7.0f, 50.0f, 30.0f);
    closeButton.segmentedControlStyle = UISegmentedControlStyleBar;
    closeButton.tintColor = [UIColor blackColor];
    [closeButton addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];
    [actionSheet addSubview:closeButton];

    [actionSheet showInView:self.view];

    [actionSheet setBounds:CGRectMake(0, 0, 320, 485)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:49:26.967

很简单，操作表应该只有按钮，没有其他组件。它的大小可能是根据按钮的数量来计算的。您没有添加任何按钮，因此操作表的大小为零。

使用`UIPopoverController`而不是`UIActionSheet`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:53:01.303

检查这个答案。这就是您要对代码执行的操作。

[在 UIPopover 内显示 UIDatePicker](https://stackoverflow.com/questions/8440256/displaying-a-uidatepicker-inside-of-a-uipopover)

[UIDatePicker 在 UIPopoverController 中的某些模式下无法正确呈现](https://stackoverflow.com/questions/4025367/uidatepicker-not-rendering-properly-for-certain-modes-in-uipopovercontroller)

# java - 此方法是否会创建完全相同的副本？（java中的一种复制方法）

> ID：11745068
> 
> 赞同：0
> 
> 时间：2012-07-31T16:45:20.610
> 
> 标签：java, testing

我有一个作业要为以下方法编写一个测试，以显示使用此方法创建的 Object 及其副本是相等的。

```
 /**
 * Creates a new object that is a duplicate of this instance of
 * Parameter.
 * <p>
 * The duplication is a "deep copy" in that all values contained in the
 * Parameter are themselves duplicated.
 * 
 * @return The new duplicate Parameter object.
 */
public Parameter copy( )
{
    Parameter result = new Parameter( );
    result.setName( getName( ) );
    for ( int index = 0; index < getNumberOfValues( ); index++ )
    {
        result.addValue( getValue( index ).copy( ) );
    }
    return result;
 } 
```

我写了不同的方法，但每次结果都显示它们不相等。我的一项测试：

```
@Test
public void testCopy() {
    Parameter param = new Parameter();
    Value val1 = new Value();
    //val1.setName("Hi!");
    //param.addValue(val1);

    Parameter param2 = param.copy();
    Parameter expected = param;
    Parameter actual = param2;

    assertEquals(param, param2);
} 
```

但似乎这种方法不会创建和精确复制参数。你能指导我吗？

这是值的复制方法：

```
 /**
 * Creates a new Value object that is a duplicate of this instance.
 * 
 * @return The new duplicate Value object.
 */
public Value copy( )
{
    Value newValue = new Value( );
    newValue.setName( getName( ) );
    return newValue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:53:27.063

您的 Parameter 类需要一个 equals 方法（）。没有这个 java 运行基于引用的相等性（ Object.equals() 的默认行为），因此你的观察。

您的 equals 方法可能如下所示：

```
public boolean equals(Object o)
{
    Parameter p = (Parameter)o;
    return this.getName().equals(p.getNames) && this.getNumberOfValues() == p.getNumberOfValues() &&B this.values().equals(p.values());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:02:10.937

类的 equals 方法`Object`（[在此处描述](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)）清楚地表明，引用需要引用同一个对象才能返回 true。在您的情况下，复制方法正确地创建了一个新参数，然后创建了一个新值，以便创建复制对象。因此，现有`equals()`方法将始终返回 false。

为了正确测试，您需要按照注释中的说明进行操作，即创建一个新的 equals() 方法，该方法将覆盖 Object 类中现有的方法，包括 Parameter 类和 Value 类。您的方法应该测试每个对象的**内容**（每个对象中的名称）是否相同，或者根据您的应用程序您认为合适的任何其他语义。

# c# - 数据库中存在的 MVC 实体框架计算值

> ID：11745069
> 
> 赞同：1
> 
> 时间：2012-07-31T16:45:26.377
> 
> 标签：c#, asp.net-mvc, entity-framework

我已经使用实体框架从我现有的数据库中生成模型，并且我想计算属性的值。例如

我有一个 MetaInfo 表：

*   PageTitle，字符串，不可为空
*   元标题，字符串，可为空

所以我构建了一个部分类：

```
public partial class MetaInfo
{
    public string MetaTitle
    {
        get
        {
            if (string.IsNullOrEmpty(_MetaTitle))
            {
                return _PageTitle;
            }
            return _MetaTitle;
        }
    }
} 
```

显然，这不起作用，因为“类型 MetaInfo 已经包含 MetaTile 的定义”。

有没有办法保持相同的属性名称，或者我应该重命名我的计算属性？

当我在这里时，我可以做一些 wiza-ma-jig 并首先获取代码以与我现有的数据库集成，它会规避这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:56:44.287

按照惯例`MetaTitle`，将是数据库中的列名，我认为除了为计算的属性使用不同的名称（例如`DisplayMetaTitle`，`FriendlyMetaTitle`或`ViewMetaTitle`很常见）之外，没有一种简单的方法可以解决您描述的问题。

# php - 以数组形式返回 group_concat 数据

> ID：11745070
> 
> 赞同：19
> 
> 时间：2012-07-31T16:45:28.920
> 
> 标签：php, mysql

我想返回我使用 group_concat 作为数据数组从数据库中检索的值。是否可以在 mysql 查询中执行此操作？还是我需要将数据分解成数组？

```
GROUP_CONCAT(sh.hold_id) as holds 
```

返回这个

```
[holds] => 3,4 
```

我希望它返回：

```
[holds] => array(3,4) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T16:52:43.567

正如我在评论中所说：您需要使用这样的[php](https://www.php.net/manual/en/function.explode.php)代码将数据分解为一个数组：

```
$holds = explode(',', $holds); 
```

因为mysql没有数据数组类型的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T16:49:51.923

MySQL 没有数组的概念。因此它不能返回一个数组。将连接符号转换为 php 数组取决于您的处理代码（此处为 php 脚本）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-21T16:44:31.027

如果您需要在 MySQL 级别上执行此操作，那么您可能会将其解析为一个对象。您可以执行以下操作

```
SELECT CONCAT("[", GROUP_CONCAT(category.name), "]") AS categories
From categories 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-27T22:38:19.637

可以像这样返回 mysql JSON 数组，

```
json_array(GROUP_CONCAT(sh.hold_id)) as holds 
```

请参阅[文档](https://dev.mysql.com/doc/refman/5.7/en/json-creation-functions.html#function_json-array)以获取更多信息。

# android - Android MVP Samples

> ID：11745073
> 
> 赞同：1
> 
> 时间：2012-07-31T16:45:42.273
> 
> 标签：android, architecture, mvp

> **Possible Duplicate:**
> [android model view presenter/controller examples](https://stackoverflow.com/questions/4320141/android-model-view-presenter-controller-examples)

Can anyone give the example to make android application using MVP Framework? I already google'd and didn't find the one that make me understand the architectures of MVP in Android. Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:13:17.823

这是我在学习 MVP 时发现的[最好的例子。](http://magenic.com/Blog/Post/6)

互联网上有大量的例子。继续谷歌搜索，你会发现很多。

此外，这是[此 Stack Overflow 帖子的副本](https://stackoverflow.com/questions/4320141/android-model-view-presenter-controller-examples)。也试试这篇文章作为例子。

# java - 在tomcat上部署war文件

> ID：11745081
> 
> 赞同：0
> 
> 时间：2012-07-31T16:46:06.013
> 
> 标签：java, jakarta-ee, tomcat, web-applications, deployment

我在 Eclipse 下开发了一个 Java EE 应用程序，服务器运行时为 Tomcat 6.0 。所有的东西都工作得很好，但是当我将战争文件上传到我的托管服务器时它没有工作。

**支持人员说：“使用 tomcat 5.5 创建你的战争”**

这意味着什么 ？eclipse 是否根据安装的服务器运行时创建战争（在我的情况下是它的 tomcat 6.0）？

**编辑：**

我尝试在 tomcat 5.5 下运行相同的应用程序 - 在本地...但是 eclipse 说：

**服务器不支持 J2EE Web 模块规范 2.5 版**

那么我怎样才能使 Java EE 应用程序与 tomcat 5.5 一起使用 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:22:38.777

您需要为 Servlet API 2.4（而不是 2.5）编译您的项目。在 Eclipse 中，您需要更改“动态 Web 模块”的版本（参见[此处](http://www.webspheretools.com/sites/webspheretools.nsf/docs/Understanding%20Dynamic%20web%20module%20version%20settings%20in%20Eclipse)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T23:25:38.137

> 他们使用Tomcat 5.5

您的托管服务提供商已过时多年。Tomcat *7*现在的发布时间与 2006 年发布的 Tomcat 6 差不多，而 Tomcat 5.5 将于 9 月 30 日结束生命周期。让他们升级他们的古董产品，或者找到更好的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T16:53:56.813

当您创建项目或导出 WAR 文件时，您可以选择要使用的 Tomcat 版本（下拉菜单）。您需要使用与服务器运行的 Tomcat 相同版本的 Tomcat 导出 WAR 文件。

# php - PHP bcrypt 哈希存储盐

> ID：11745082
> 
> 赞同：0
> 
> 时间：2012-07-31T16:46:07.953
> 
> 标签：php, function, bcrypt

我从互联网上为 bcrypt 获取了以下功能。它输出一个加密的密码，这正是我正在寻找的。我还使用了盐执行检查的功能，但此功能没有为我提供盐。

```
function bcrypt_hash($password, $work_factor = 8)
{
    if (version_compare(PHP_VERSION, '5.3') < 0) throw new Exception('Bcrypt requires PHP 5.3 or above');

    if (! function_exists('openssl_random_pseudo_bytes')) {
        throw new Exception('Bcrypt requires openssl PHP extension');
    }

    if ($work_factor < 4 || $work_factor > 31) $work_factor = 8;
    $salt = 
        '$2a$' . str_pad($work_factor, 2, '0', STR_PAD_LEFT) . '$' .
        substr(
            strtr(base64_encode(openssl_random_pseudo_bytes(16)), '+', '.'), 
            0, 22
        )
    ;
    return crypt($password, $salt);
} 
```

我需要分别返回密码和盐。或者有没有办法将它们分别从这个函数中拉出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:48:59.117

您不能从函数返回多个值，但可以返回包含多个值的单个数据结构：

```
return array('crypt' => crypt($password, $salt), 'salt' => $salt); 
```

# android - 如何将 Eclipse 项目指向特定的 AVD？

> ID：11745083
> 
> 赞同：1
> 
> 时间：2012-07-31T16:46:17.213
> 
> 标签：android, eclipse, avd

我查看了 android 文档，没有任何关于更改任何一个项目使用的虚拟设备的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:51:16.733

您可以设置 Eclipse 项目，让您手动选择要在哪些设备上发布/调试您的应用程序。我对所有设备都这样做。选择调试图标旁边的箭头，然后选择“调试配置”。然后选择“目标”选项卡并选择单选按钮“始终提示选择设备”。

这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:53:38.227

您可以配置您希望项目在哪个设备上运行。进入`Run Configurations`Android下选择`Target`标签。检查`Automatically pick compatible device....`并选择您喜欢的设备！！

# jquery - jQuery eq(0) 不适合我

> ID：11745084
> 
> 赞同：0
> 
> 时间：2012-07-31T16:46:23.120
> 
> 标签：jquery

我正在尝试使用以下内容显示第一个 div；

```
$('#period-to-view').change(function () {
    if ($(this).val() == "Jan") {
        $('div.six-month-view:eq(0)').show();
        $('div.three-month-view').hide();
    } else {
        $('div.three-month-view').show();
        $('div.six-month-view').hide();
    }

    if ($(this).val() == "Jul") {
        $('div.six-month-view:eq(1)').show();
        $('div.three-month-view').hide();
    } else {
        $('div.three-month-view').show();
        $('div.six-month-view').hide();
    }
}); 
```

我遇到的问题是 :eq(0) 不起作用，但 :eq(1) 起作用（显示第二个 div）。标记是一个选择框，它根据选择的月份（Jan 或 Jun）显示一个 div。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:48:36.403

这是因为如果 val=='Jan' 它会在您再次隐藏`else`的第二秒执行。`if``.six-month-view`

# window - FindWindow 在启动画面上不起作用

> ID：11745086
> 
> 赞同：0
> 
> 时间：2012-07-31T16:46:28.073
> 
> 标签：window, find, splash-screen

我需要知道应用程序是否正在运行其启动画面。我可以在任务栏中看到应用程序的标题。但是 FindWindow 没有返回有效的句柄。但是，一旦应用程序在真实窗口（非启动屏幕/带边框）中打开，FindWindow 工作并返回一个有效句柄，该窗口具有完全相同的名称。

我使用 NULL ptr 作为 API 的第一个参数。有没有其他方法可以检查进程/应用程序是否打开了他的启动画面？这并不意味着检查进程本身，因为在启动画面打开之前需要几秒钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:25:33.530

考虑使用 EnumWindows 函数并获取属于指定进程的所有窗口

```
void FindProcessWindows()
{
    DWORD pid;
    /* .. */
    /* Get target process id */
    /* .. */
    EnumWindows(&EnumWindows, pid);
}

BOOL CALLBACK EnumWindows(HWND hWnd, LPARAM lParam)
{
    DWORD pid;

    if((GetWindowLong(hWnd, GWL_STYLE) & WS_VISIBLE))
    {
        GetWindowThreadProcessId(hWnd, &pid);
        if(pid == lParam)
        {
            /* You've found a window that belongs to the specified process */
        }
    }
} 
```

# c# - 我的班级正在数据库中创建条目，我希望它停止

> ID：11745087
> 
> 赞同：0
> 
> 时间：2012-07-31T16:46:28.897
> 
> 标签：c#, entity-framework

我正在使用实体框架和代码进行项目。这是我的缩短课程

```
public class BenefitsForm : IAnnualForm, IAuditable 
{
    public BenefitsUser UserInfo { get; set; }
    public CoverageLevel Medical { get; set; }
}

public class MedicalPlan : IHealthPlan
{
    public int Id { get; set; }
    public virtual IList<CoverageLevel> CoverageLevels { get; set; }
}

public class CoverageLevel
{
    public int Id { get; set; }
    public virtual MedicalPlan MedicalPlan { get; set; }
} 
```

每个 MedicalPlan 有 4 个承保级别。我已经在数据库中制定了我的覆盖水平和医疗计划。但是，当我创建我的 BenefitsForm 时，它会为这些类创建重复的条目（我已经在数据库中拥有它们）。我怎样才能防止它这样做？这是一个小代码片段来展示它是如何发生的。

```
BenefitsForm form = new BenefitsForm() { UserInfo = new BenefitsUser() };
using(var repo = new CoverageLevelRepository())
{
    form.Medical = repo.Retrieve(new NumericKey(formId))); //this retrieves the coveragelevel with the id I want.
}
formRepository.Create(form); // this creates a duplicate med plan and 4 duplicate coverage levels.
formRepository.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:16:24.373

我认为是因为您从与您保存的*上下文不同*`repo`的上下文中检索医学领域 -与`formRepository`; `formRepository`不跟踪由 创建的对象`repo`，因此它假定它是一个新对象，从而创建一个重复条目。出于性能原因，我不相信 Entity Framework 会为您插入存在检查——跟踪由对象上下文本身在内部处理；每个对象都绑定到单个对象上下文。尝试使用相同的存储库来检索`MedicalPlan`和写回 new `BenefitsForm`，并且您不应该有重复项。

```
BenefitsForm form = new BenefitsForm() { UserInfo = new BenefitsUser() }; 
using(var repo = new Repository()) 
{ 
  form.Medical = repo.Retrieve(new NumericKey(formId))); //this retrieves the coveragelevel with the id I want. 
  repo.Create(form); // this creates a duplicate med plan and 4 duplicate coverage levels. 
  repo.SaveChanges(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:52:13.440

请尝试将 SaveChanges 与 SaveOptions 枚举一起使用，而不是 formRepository.SaveChanges()

例子：

```
ObjectContext.SaveChanges(
           System.Data.Objects.SaveOptions.DetectChangesBeforeSave
                   ); 
```

请参阅链接了解更多信息[http://msdn.microsoft.com/en-us/library/dd395500.aspx](http://msdn.microsoft.com/en-us/library/dd395500.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:55:20.923

使用`IList<...>`而不是`ICollection<...>`您的一对多关联可能会导致它出现故障。尝试改变它。除此之外，它可能是`CoverageLevelRepository`您未发布的代码。有关关联的更多信息，请参阅[本指南](http://weblogs.asp.net/manavi/archive/2011/05/17/associations-in-ef-4-1-code-first-part-6-many-valued-associations.aspx)

# qt - 尝试在单元测试（QTestLib）中设置 QDeclarativeScriptString

> ID：11745089
> 
> 赞同：3
> 
> 时间：2012-07-31T16:46:30.670
> 
> 标签：qt, unit-testing, benchmarking, qml, qtestlib

我正在尝试为我的[2D 游戏框架](https://github.com/INdT/Quasi-Engine)（它是 QML 扩展）的一部分创建基准测试，并且在设置 QOBject 的声明性脚本属性时遇到问题。

财产声明：

```
Q_PROPERTY(QDeclarativeScriptString script READ script WRITE setScript NOTIFY scriptChanged) 
```

我更改脚本的尝试之一是这样的：

```
ScriptBehavior *behavior = new ScriptBehavior(entity);
QDeclarativeProperty(behavior, "script").write("console.log(1);"); 
```

但它不起作用（运行基准测试，但不要向控制台写入任何内容）。

我尝试使用 setProperty 并手动创建 QDeclarativeScriptString 并设置属性，但没有任何效果。

当我尝试创建 QDeclarativeScriptString 时，它失败了：

编码：

```
ScriptBehavior *behavior = new ScriptBehavior(entity);
QDeclarativeScriptString scriptString;
scriptString.setScript("console.log(1)");
behavior->setScript(scriptString); 
```

输出：

```
QFATAL : UpdateBenchmark::behavior() Received signal 11
FAIL!  : UpdateBenchmark::behavior() Received a fatal error.
   Loc: [Unknown file(0)] 
```

有什么帮助吗？

谢谢

# php - 表单验证和验证码

> ID：11745090
> 
> 赞同：3
> 
> 时间：2012-07-31T16:46:38.277
> 
> 标签：php, html, forms, validation, captcha

我创建的联系表格有两个问题。我以前受到垃圾邮件的严重打击。

1.  我要求在处理表单之前填写所有字段，但我所写的内容不起作用：无论一个人是否填写所有字段，信息都会进入数据库。***通过使用修复：

    函数 validateForm() { var x=document.forms["validation"]["firstname"].value; if (x==null || x=="") { alert("请输入您的名字"); 返回假；}

对于所有字段，这一个用于电子邮件：

```
 var x=document.forms["validation"]["email"].value;
 var atpos=x.indexOf("@");
 var dotpos=x.lastIndexOf(".");
 if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  alert("Please enter a valid email address");
  return false;
  } 
```

现在，我需要让验证码正常工作或如何添加以检查验证码在相同的 javascript 中是否正确？我认为错误在于这种方式？：

```
 session_start();
    if($_POST['submitted'] == "contactus")
     if( $_SESSION['security_code'] == $_POST['security_code'] &&   !empty($_SESSION['security_code'] ) ) {
        header("Location:http://www.berrieswebdesign.com/thankyou.php?message=thanks");
                unset($_SESSION['security_code']);
   } else {
    // Insert your code for showing an error message here
    echo "<div id='thankyoubox'>'Security breach! Security Breach! Ehem...Your     security code was incorrect.'</div>";
  }
    ob_flush();

        ?> 
```

最后，这里是contactfunctions.php

```
 <?php ob_start();//Required for the redirect to work?>
 <?php 
 include_once("databasefunctions.php");

 $contactsdbtable = "contacts";

 function GetHeaders()
 {
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    // Additional headers
    $headers .= "To: {$firstname} <{$email}>" . "\r\n";
    $headers .= 'From: My Website <info@mywebsite.com>' . "\r\n";
    return $headers;
 }
 function ContactMessage($firstname, $lastname, $email, $message, $location)
 {
global $contactsdbtable;
openDatabase();
$firstname = mysql_real_escape_string($firstname);
$lastname = mysql_real_escape_string($lastname);
$email = mysql_real_escape_string($email);
$message = mysql_real_escape_string($message);
$location = mysql_real_escape_string($location);

$result = QuickQuery("INSERT INTO {$contactsdbtable}(firstname, lastname, email, message, location) 
                      VALUES('{$firstname}', '{$lastname}', '{$email}', '{$message}', '{$location}')");

if($result)
{
    $headers = GetHeaders();
    $message = "\"Thank you for contacting us at My Website. We will be answering your website inquiry post haste.\"<br />
    <br />
    <br />
    Best Regards,<br />
    <br />
    Me
    ";
    mail($email, "RE: Design Inquiry", $message, $headers);
    mail("myemail@blahblah.com", "Website Inquiry", "{$firstname}, {$email}, has sent a web design inquiry", $headers);

}
}

?> 
```

感谢我提前收到的任何帮助。另外，由于这篇文章很长，你们介意列出您要解决的问题是 1 还是 2？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:57:12.800

好的试试这个：

```
<?php
    $is_error = false;
    if($_POST['submitted'] == "contactus")
    {
      $firstname = $_POST['firstname'];
      $lastname = $_POST['lastname'];

      $email = $_POST['email'];
      $message = $_POST['message'];
      $location = $_POST['location'];
      if(!$firstname || $firstname = ''){
        $error = "Please enter your first name.";
        $is_error = true;
      } else if(!$lastname || $lastname= ''){
        $error = "Please enter your last name.";
        $is_error = true;
      } else if(!$email || $email= ''){
        $error = "Please enter a valid email.";
        $is_error = true;
      }else if(!$message || $message= ''){
        $error = "Please enter your message.";
        $is_error = true;
      }else if(!$location || $location= ''){
        $error = "Please tell us where you're from.";
        $is_error = true;
      }

      if(($is_error === false) && ($_SESSION['security_code'] == $_POST['security_code']))
      {
        ContactMessage($firstname, $lastname, $email, $message, $location);
      } else {
        Error($error);
      }
    }
 ?> 
```

# mysql - 事务中的 JDBC / MySQL 查询和更新

> ID：11745091
> 
> 赞同：0
> 
> 时间：2012-07-31T16:46:42.070
> 
> 标签：mysql, sql, jdbc, transactions, locking

基本上我们的用户配置算法会做类似的事情

- 查询新用户 - 更新数据库以显示您拥有该用户

我想知道如何锁定进程的其他实例在已经开始时执行“读取”步骤的能力。所以它比典型的事务要激进一点，因为它需要是一个读-读锁，当然不相关的进程应该能够在不受锁影响的情况下进行读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:24:02.053

您可以简单地立即运行 UPDATE 查询来“窃取”当前服务器的所有非活动用户。

由于单个 UPDATE 查询始终是原子的，这将确保每个用户只被一台服务器抓取。

由于 MySQL 不允许您从 UPDATE 返回更新的行，因此您需要添加一个标识符列来告诉您哪些行被“窃取”。
每次供应用户时，选择一个 GUID，在 UPDATE 语句中将标识符列设置为该 GUID，然后在他们仍然具有该 GUID 的位置选择行。

# emacs - 将 emacs lisp 哈希序列化为文件

> ID：11745097
> 
> 赞同：7
> 
> 时间：2012-07-31T16:46:53.800
> 
> 标签：emacs, elisp

在 emacs lisp 中，有没有办法将哈希表序列化到文件中，然后在以后再次读取它？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:07:18.967

从 Emacs 23.2 左右开始，这很容易实现。检查与

```
(featurep 'hashtable-print-readable) 
```

如果返回`t`，您可以简单地`prin1`将哈希表添加到缓冲区，然后保存它并`read`稍后保存。

# fdt - 为什么在我创建项目时 FDT 不考虑我选择的“默认”SDK

> ID：11745100
> 
> 赞同：0
> 
> 时间：2012-07-31T16:47:04.563
> 
> 标签：fdt

查看屏幕截图。我选择了 Flex 4.6 作为默认值，但项目模板使用 Apache Flex 4.8。

为什么？

![在此处输入图像描述](../Images/de3624ec93afd868be1f5d477d276a49.png) ![在此处输入图像描述](../Images/d7e5aed3ff7f73cff558e261f95a5d0f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:47:04.563

项目模板设置为寻找最高的、可接受的 SDK。

要更改此设置，请转到您的主文件夹中的 FDT 首选项文件夹，并将模板 (description.xml) 的值从“_highest”更改为“_selected”。

![在此处输入图像描述](../Images/ce2a60f0be128ab37e7633527036ccc0.png)

description.xml 更改：

```
<variable name="selectedSDK" label="Default SDK" default="_highest" type="sdk(3.6,4.9,1.5,4)" /> 
```

至：

```
<variable name="selectedSDK" label="Default SDK" default="_selected" type="sdk(3.6,4.9,1.5,4)" /> 
```

[FDT wiki](http://fdt.powerflasher.com/docs/Project_Template_Syntax)有更多关于使用项目模板的信息。

# sql - 比较两个表并在 ms-access 2007 中查找匹配项

> ID：11745103
> 
> 赞同：0
> 
> 时间：2012-07-31T16:47:20.390
> 
> 标签：sql, ms-access

我正在尝试比较 ms access 2007 中的两个表，以从我知道有一个共同字段的表中查找匹配项。当我尝试运行以下查询时

```
SELECT
FROM FirstTrial INNER JOIN ConsolidatedDatabase 
ON FirstTrial.ModelNumbr = ConsolidatedDatabase.ModelNumbr; 
```

我收到错误“查询必须至少有一个目标字段”

为了使查询工作，我需要更改什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:48:05.040

您需要一些字段：

```
SELECT *
FROM FirstTrial INNER JOIN ConsolidatedDatabase 
ON FirstTrial.ModelNumbr = ConsolidatedDatabase.ModelNumbr; 
```

最好放一些名字而不是 *

在 MS Access 中，您可以使用查询设计窗口。

# c++ - 当 Windows 应用程序中出现 SIGSEGV 时，我可以获得堆栈跟踪吗？

> ID：11745104
> 
> 赞同：0
> 
> 时间：2012-07-31T16:47:24.847
> 
> 标签：c++

我在 Windows 上使用 MinGW GCC 编译 C++ 代码。我目前正在处理一个偶尔会在多线程程序中弹出的 SIGSEGV，因此我无法像往常那样使用 GDB 逐步执行该程序。我已经阅读了程序日志，但他们只让我知道问题发生在哪里。

我可以获得问题发生位置的堆栈跟踪吗？[我在这里](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes)看到了一个类似的线程，但由于我没有，`execinfo.h`我无法使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:51:21.503

您可以使用`gdb`(command `r`) 运行程序。无论它在哪里崩溃，您都会返回`gdb`并查看堆栈跟踪和变量。

您可能还想看看[这个](http://www.delorie.com/gnu/docs/gdb/gdb_25.html)，或者搜索“gdb multithreaded”。

# c++ - Boost.Thread timed wait

> ID：11745113
> 
> 赞同：0
> 
> 时间：2012-07-31T16:48:07.523
> 
> 标签：c++, windows, boost, boost-thread

What happens to thread run under Windows OS, when the timeout occurs using `boost::thread::timed_join`, and the waiting thread finishes? Does the thread remain or it finishes along with the process?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:11:19.807

It doesn't matter why a thread finishes (exits), what matters is whether this is the main thread or not: if it's the main thread, then the whole process exits, and all its threads get terminated; if it's a non-main thread, its graceful exit doesn't affect any other threads.

[The following article](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686722%28v=vs.85%29.aspx) explains a process termination in detail.

# javascript - 使用 jQuery 重置字段

> ID：11745122
> 
> 赞同：1
> 
> 时间：2012-07-31T16:48:41.177
> 
> 标签：javascript, jquery, html

我正在尝试部分重置字段（选择和文本框）。这是我到目前为止所拥有的：

```
var $inputs = $('#StudentTable :select');
$inputs.each(function () { 
  if ($(this).name = "TeachingAsstSelect") { 
    $('select[name="TeachingAsstSelect"]').each(function () { 
      $(this).text(""); 
    }) 
  } 
  else { 
    $(this).val("Select");
  } 
}); 
```

此处“TeachingAsstSelect”被清除，但其他选择未重置。我错过了什么吗？更重要的是，我做得对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:54:14.283

对于 jQuery 对象，您应该使用`attr()`方法，`name`它是 DOM 元素属性之一。

改变这个：

```
 if ($(this).name = "TeachingAsstSelect") { 
```

到：

```
 if ($(this).attr('name') == "TeachingAsstSelect") { 
```

另请注意，您应该使用 `==`运算符进行比较，目前您正在设置值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:02:24.197

如果您尝试测试字符串的相等性，您应该使用`==`or `===`。请参阅此处的更多信息：[JavaScript 比较中应该使用哪个等号运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

另外，正如@Raminson 建议的那样，请尝试改用该`attr()`方法。

```
if ($(this).attr('name') == "TeachingAsstSelect") { 
```

或者更好的是，像这样嵌套`.each()`两次可能不如其他解决方案好。

我还注意到您正在测试 name 在您的`if`条件下，然后使用 jquery 选择器再次匹配`[name="TeachingAsstSelect"]`. 像这样简化怎么样：

```
var $teachingAsstInputs = $('#StudentTable :select[name="TeachingAsstSelect"]');
$($teachingAsstInputs).text(""); 

var $otherInputs = $('#StudentTable :select').not('[name="TeachingAsstSelect"]');
$($otherInputs).val("Select"); 
```

# ios - 如何从 barbuttonitem 切换视图？

> ID：11745124
> 
> 赞同：0
> 
> 时间：2012-07-31T16:48:44.793
> 
> 标签：ios, uibarbuttonitem

我有一个叠加层，其中我创建了一个包含完成按钮的工具栏。完成按钮的选择器名称为 doneButtonPressed。

现在，当我单击完成按钮时，如何获得新的 nib 视图？假设我创建了一个名为 TestViewController 的 nib。

```
-(void)doneButtonPressed {

//What goes here?

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:07:06.773

如果要从 nib 实例化 UIViewController，可以使用以下代码行：

```
UIViewController *viewControllerName = [[UIViewController alloc] initWithNibName:(NSString *) bundle:(NSBundle *)]; 
```

然后，您可以使用以下方式呈现视图：

```
[self presentModalViewController:(UIViewController *) animated:(BOOL)]; 
```

现在，如果您正在使用情节提要，那么您可以从情节提要对象中实例化视图控制器。

不确定这是否是您正在寻找的，但您可以将您的视图变成“容器视图”。为此，您需要创建子视图，然后将它们切换出去。当我想要一个菜单​​来控制不同的视图时，我这样做了。

```
[self.view insertSubview:(view you want to insert) atIndex:0]; 
```

然后当你想把它关掉时：

```
[[[self.view subviews] objectAtIndex:0] removeFromSuperview];
[self.view insertSubview:(view you want to replace with) atIndex:0]; 
```

已编辑

```
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone target:self action:@selector(doneButtonPressed:)];

- (void)doneButtonPressed {

SkipQViewController *skipQ = [[SkipQViewController alloc] initWithNibName:@"Name" bundle:bundleName];
[self presentModalViewController:skipQ animated:YES];
} 
```

如果这不起作用，请尝试使用：`SkipQViewController *skipQ = [[SkipQViewController alloc] init];`实例化您的视图控制器。

-编辑-

像这样实例化视图控制器：`SkipQViewController *skipQ = (SkipQViewController *)[[UIViewController alloc] initWithNibName:@"sqvc" bundle:nil];`

# javascript - 显示中的不可见链接：可见

> ID：11745125
> 
> 赞同：0
> 
> 时间：2012-07-31T16:48:48.527
> 
> 标签：javascript, html, displayobject

潜伏了一段时间，但这是我的第一篇文章。请对我放轻松！:-)

我在表格中设置了一个带有“内容”列表的常见问题解答页面，当单击“显示”按钮时，正文变得可见。

当 display:none tr 通过单击“show”按钮更改为 display:block 时，它可以工作，除非我`<a href...>`在 tr 的内容中有 a。在这种情况下，除非我尝试突出显示该行，否则该链接是不可见的。

**JS 看起来像这样 -**

```
<script> 
    function hidetr(tr) {  
        document.getElementById(tr).style.display="none"; 
    }

    function showtr(tr) {  
        document.getElementById(tr).style.display="block"; 
    } 
</script> 
```

**HTML 看起来像这样：**

```
<tr>
    <th>I want to search for registrations in a certain area/by a certain date/by some other criteria that the site does not 
    allow?<button onclick="showtr('faq5')">Show!</button></th>
</tr>
<tr id="faq5" style="display:none"  >
    <td>Please <a href="contactus.php" >Contact Us</a> with a summary of your requirements and purpose and if we are able to help we will do. 
    At this time the search criteria on the site are purposefully limited. </td>
    <td><button onclick="hidetr('faq5')">hide!</button> 
```

有任何想法吗？

**更新**
考虑到了 Lister 先生的建议，即从我想要隐藏/显示的行中删除样式 - 基本上链接仍然不可见。

我已将页面和 CSS 文档放在我的桌面上并从那里加载页面，因为我认为它可能正在从 CSS 中拉下一些东西。

该链接正确显示，除了保存文件的位置之外没有任何更改！

现在我真的很困惑

**更新**

排序！嗯......还没有，但我知道它是什么所以应该只需要几分钟。

在那个主页上，我有几个 PHP 包含的其他文档，包括我的导航栏，其中包含一些样式标记。那里有一个 {color: white;} 导致这个链接也是白色的。

我发现如果我将页面更改为 HTML 而不是 PHP，那么颜色是正确的，所以我认为它一定是从服务器端包含的东西。

感谢大家的评论，他们确实帮助了我 1/ 整理了一些代码 2/ 为我指明了正确的方向。

特别感谢李斯特先生。

**请有人可以关闭这个。它不会让我回答我自己的问题，因为我是 7 小时的新手。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:58:52.110

好的，我重新创建了您的情况，并在 TR 中使用 DIV 并使用 CSS 类名隐藏/显示该 DIV，而不是整个 TR：

## CSS

```
div.hidden{
 display: none;
}
div.normal{
 display: block;
} 
```

## JS

```
function showtr(tr){
 document.getElementById(tr).className = 'normal';
}
function hidetr(tr){
 document.getElementById(tr).className = 'hidden';
} 
```

## HTML

```
<table>
 <tr>
  <th>I want to search for registrations in a certain area/by a certain date/by some other criteria that the site does not 
allow?<button onclick="showtr('faq5')">Show!</button></th>
</tr>
<tr>
 <td>
     <div id="faq5" class="hidden">
         Please <a href="contactus.php">Contact Us</a> with a summary of your requirements and purpose and if we are able to help we will do. At this time the search criteria on the site are purposefully limited.<button onclick="hidetr('faq5')">hide!</button></div>
  </td>
 </tr>
</table> 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:02:03.860

你需要有有效的标记，你错过了一些标签。

更新代码：

演示：http: [//jsfiddle.net/SO_AMK/dHEdZ/](http://jsfiddle.net/SO_AMK/dHEdZ/)

HTML：

```
<table>
<tr>
    <th>
        I want to search for registrations in a certain area/by a certain date/by some other criteria that the site does not allow?<button onclick="showtr('faq5')">Show!</button>
    </th>
</tr>
<tr id="faq5" style="display:none">
    <td>
        Please <a href="contactus.php">Contact Us</a> with a summary of your requirements and purpose and if we are able to help we will do. At this time the search criteria on the site are purposefully limited.
        <button onclick="hidetr('faq5')">hide!</button>
    </td>
</tr>
</table> 
```

​JavaScript：

```
function hidetr(tr){  
        document.getElementById(tr).style.display="none"; 
}
function showtr(tr){
        document.getElementById(tr).style.display="block"; 
}​ 
```

PS 你应该试试像[jQuery](http://jquery.com/)这样的库，它会让你的生活*变得*更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:55:41.627

显示值取决于元素。我发现这是一个很好的解决方案：

```
function showtr(tr)
{  
    document.getElementById(tr).style.display=""; 
} 
```

这使浏览器可以为元素类型选择默认值。

或者，如果你不反对使用 jQuery，他们的 toggle() 函数非常好：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# php - Wordpress 向我的 sql 提交数据

> ID：11745126
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:48:53.173
> 
> 标签：php, mysql, wordpress, plugins

我已经设计了用于将数据提交到数据库表的界面，但我不确定如何执行此操作，这是我的一些代码，其中大部分是相同的，因此一旦我知道如何操作，我就可以复制它。

```
<form method="post" action="input.php">
<?php wp_nonce_field('update-options'); ?>

<table width="600">
<tr valign="top>">
    <th width="92" scope="row">Enter New Track</th>
    <th width="92" scope="row">Enter New Position</th>
    <th width="92" scope="row">Enter New Driver</th>
    <th width="92" scope="row">Enter New Class</th>
</tr>
<tr valign="top>">
    <td><input type="text" name="track" /></td>
    <td><input type="text" name="position" /></td>
    <td><input type="text" name="driver" /></td>
    <td><input type="text" name="class" /></td>
</tr>
<tr valign="top">
    <td><input type="submit" value="Submit" /></td>
    <td><input type="submit" value="Submit" /></td>
    <td><input type="submit" value="Submit" /></td>
    <td><input type="submit" value="Submit" /></td>
</tr>
</table> 
```

我想要做的是将这些值中的每一个自己输入到那里的表中，我已经仔细研究了这个问题，但没有发现任何对任何想法有帮助的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:56:58.787

这里有很多问题需要解决。

首先，您只需要一个`<input>`type `submit`。这可以超出表格。其次，您的`valign`属性包含一个额外的`>`字符。

```
 <table width="600">
    <tr valign="top">
        <th width="92" scope="row">Enter New Track</th>
        <th width="92" scope="row">Enter New Position</th>
        <thwidth="92" scope="row">Enter New Driver</th>
        <th width="92" scope="row">Enter New Class</th>
    </tr>
    <tr valign="top">
        <td><input type="text" name="track" /></td>
        <td><input type="text" name="position" /></td>
        <td><input type="text" name="driver" /></td>
        <td><input type="text" name="class" /></td>
    </tr>
</table>
<br />
<input type="submit" value="Submit" /> 
```

上面的代码应该放在你的`<form>`标签内。

提交表单后，数据将被`POST`编辑到*input.php*，其目的是处理数据并将任何新数据插入到您的表中（为什么要这样做仍然是个谜，但我'将首先回答问题）。

*input.php*应该是这样的：

```
<?php
    // I will ignore error handling here, but if you want a good tutorial on PHP PDOs, try http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html
    $pdoObj = new PDO("mysql:host=[yourhost];dbname=[yourdbname]", [db_username], [db_password]);

    // keep in mind that this code is WAY OPEN to SQL injection attacks, but this will at least give you an idea of how to get your code to function, if not securely.
    if(isset($_POST['track'])) {
        $pdoObj->exec("INSERT INTO tracks (name) VALUE ('" . $_POST['track'] . "')");
    }
    if(isset($_POST['position'])) {
        $pdoObj->exec("INSERT INTO positions (name) VALUE ('" . $_POST['position'] . "')");
    }
    if(isset($_POST['driver'])) {
        $pdoObj->exec("INSERT INTO drivers (name) VALUE ('" . $_POST['driver'] . "')");
    }
    if(isset($_POST['class'])) {
        $pdoObj->exec("INSERT INTO classes (name) VALUE ('" . $_POST['class'] . "')");
    }

    // some code here that will either display some copy or redirect the user to another page 
```

**笔记：**

看起来您似乎还是 Web 开发的新手，所以我要告诉您：[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)可不是开玩笑的。您 **必须 **防御它，否则您可能会丢失数据库中的所有内容。

一般而言，请阅读一些关于 PHP、Wordpress 和 Web 开发的书籍或教程。与社区中的人讨论最佳实践，并尝试获得更多关于如何完成您认为自己熟悉的基本任务的指导。然后转移到更复杂的场景来测试你的能力。如果有足够的经验，您会惊讶于您可以使您的 Web 应用程序做什么。

# iphone - SQLite Group By 与 Order By 不工 作

> ID：11745127
> 
> 赞同：0
> 
> 时间：2012-07-31T16:48:57.140
> 
> 标签：iphone, ios, sqlite, group-by

需要一些堆栈溢出的爱。阅读与 group by 和 sort by 相关的其他问题，这些答案似乎对我不起作用。我在 db 语句的更详细的细节方面并不是很强大，并且认为我缺少的 group 和 order by 语句之间存在一些依赖或冲突。

我有一个表（itemOptions），其中包含一个项目的所有选项以及这些选项的所有可能值。考虑一个项目的多个选择/下拉框以及每个下拉列表的值列表。不幸的是，我无法更改数据库结构，因为 Web 服务正在提供 sqlite 文件。

这是结构：

```
absTtemId    optionName    optionPosition  valueName  valuePosition
item1        size             1             small        1 
item1        size             1             medium       2 
item1        size             1             large        3 
item1        color            2             white        1 
item1        color            2             red          2 
item1        color            2             yellow       3 
item2        name             1             willis       1 
item2        name             1             smith        2 
item2        name             1             bowman       3 
```

查询需要返回按 optionPosition 排序的给定项目的 optionsNames，然后返回按 valueposition 排序的每个选项的 valueNames 列表，如下所示

```
option   valueNames
size     small, medium, large
color    white, red, yellow 
```

我可以通过选项对 valueNames 进行分组，但是当我尝试在任何地方添加排序时，sqlite 会引发错误。

这是我当前返回这些结果的 sql 语句，但是 option 和 valueNames 从不按顺序排列。

```
SELECT   optionName, group_concat(valueName) 
FROM     itemOptions  
WHERE    absItemId = 'item1' 
GROUP BY optionName

option   valueNames
size     medium, small, large
color    yellow, red, white 
```

这是我为 valueName 和 optionName 添加排序的一些失败尝试

```
SELECT   optionName, group_concat(valueName ORDER BY valuePosition DESC) 
FROM     itemOptions  
WHERE    absItemId = 'item1' 
GROUP BY optionName 
```

编辑： optionName 分组的运动现在正在使用这个。只有 group_concat 中的 valueName 排序不起作用。

```
SELECT   optionName, group_concat(valueName) 
FROM     itemOptions  
WHERE    absItemId = 'item1' 
GROUP BY optionName 
ORDER BY optionPosition 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:00:09.117

尝试

```
SELECT a.optionName, group_concat(a.valueName) 
FROM (SELECT * FROM itemOptions ORDER BY valuePosition ASC) As a
WHERE a.absItemId = 'item1' 
GROUP BY a.optionName
ORDER BY a.optionName 
```

# php - 如何从其 CSS 样式中释放一个段落？

> ID：11745129
> 
> 赞同：-2
> 
> 时间：2012-07-31T16:49:01.737
> 
> 标签：php, css, strlen

我正在使用[NicEdit](http://nicedit.com/)作为我网站的富文本编辑器。在我编辑文本后，它存储在我的数据库中。

假设我已经编辑了一些文本，它像这样存储在内容字段中：

```
<div> This is just some sample <b>text that is displayed </b> to help <a href="#"> My example </a> </div> 
```

现在，当我想在主页中显示部分内容并添加“阅读更多”链接时，用户可以访问实际页面。

```
<?php
     echo substr($row['content'],0,50);
     if(strlen($row['content']))>50 ) {
       echo "<a href=\"#\"> read more </a>";
     }
?> 
```

所以上面的代码会提取说：

```
<div> This is just some sample <b>text 
```

从表的内容字段。而当它显示在页面上时，我们可以看到既不`<div>`是关闭的，也不是关闭的`<b>`。所以页面中的其余内容完全混乱了。

有什么办法可以解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:52:24.577

`strip_tags()`最简单的方法——使用函数将摘要文本显示为“纯文本” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:52:41.173

看看php的strip_tags()函数： [http://php.net/manual/de/function.strip-tags.php](http://php.net/manual/de/function.strip-tags.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:53:45.267

`echo substr(strip_tags($row['content']),0,50)`

然后当他们“得到更多”时不要跑`strip_tags()`

更新..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T16:54:08.573

我建议使用，`strip_tags`因为没有简单的方法可以自动关闭标签。但是，您可以看一下这个问题：[如何关闭未关闭的 HTML 标签？](https://stackoverflow.com/questions/3059398/how-to-close-unclosed-html-tags)

# python - Django 子字符串

> ID：11745133
> 
> 赞同：0
> 
> 时间：2012-07-31T16:49:21.840
> 
> 标签：python, django

我想知道在从数据库中的列中检索一大块数据后，是否有办法在 django 中返回子字符串。在这种情况下，我试图从“内容”列中检索数据以操作可用的文本并将其返回。

问题列表方法的检索

```
def prepare_questions(subject_id, scope, sort, topic, subtopic):
   question_list = Question.objects.filter(subject=subject_id)
return question_list 
```

包含内容的模型

```
class Question(models.Model):
   subject = models.ForeignKey(Subject)
   content = models.TextField(verbose_name=_('Content')) 
```

我希望做的是从'contents'中获取question_list的数据，通过python中的子字符串方法传递它。我不确定我应该从这里采取的步骤。此外，我希望方法结果作为 question_list 的一部分返回，并带有一个标记为方法返回值的新键，因为我不想覆盖检索到的原始“内容”值。

非常感谢任何指针或参考！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:14:59.290

在模型上定义一个方法：

```
class MyModel(models.Model):
    ...
    def contents_substring(self):
        # do stuff
        return the_substring 
```

然后，无论何时访问实例，无论是单独访问还是循环访问，您都可以执行以下操作：

```
instance.contents_substring() 
```

或在模板中：

```
{{ instance.contents_substring }} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:09:45.940

这是你想要的：

```
return [{'substring': substring_method(q.content), 'question': q} for q in question_list] 
```

当然，您必须定义或替换`substring_method`为您想要的任何 Python 子字符串方法。

这一行所做的是使用 Python 的“列表理解”语法将每个`Question`对象映射`question_list`到一个包含两个项目的字典中，即`substring`（子字符串）和`question`（原始`Question`对象）。

以下是您可以如何使用新的`prepare_questions`：

```
questions = prepare_questions( ... )  # whatever arguments
first_question = questions[0]  # let's assume there's at least 1
print first_question['substring']  # prints the substring of the first question's content
print first_question['question'].content  # prints the first question's full content 
```

为了完整起见，这里有一个简单的示例“substring_method”：

```
def substring_method(s):
    return s[1:4]  # use Python slice syntax to return 2nd through 4th chars of string 
```

# codeigniter - codeigniter 将 count_all_results 传递给查看

> ID：11745136
> 
> 赞同：1
> 
> 时间：2012-07-31T16:49:27.733
> 
> 标签：codeigniter, codeigniter-2

我正在使用 count_all_results() 函数来返回用户使用的语言数量。但是当我尝试将数字传递给视图时，我不断得到一个 php 未定义的变量（对于 $lang_cnt）。下面是我的代码：

**模型**

```
function countLanguages($id) {

    $this->db->where('user_id', $id)->from('languages');
    return $this->db->count_all_results();
} 
```

**控制器**

```
function showLangCount() {

    $data['lang_cnt'] = $this->language_model->countLanguages($id);

    $this->load->view('lang_view', $data);
} 
```

**看法**

```
<p>This user speaks <?php echo $lang_cnt; ?> languages.</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:52:19.597

一个问题是您的模型函数需要两个参数：

```
function countLanguages($id, $cnt_languages) 
```

但是当你调用它时，你只传递了一个参数：

```
$this->language_model->countLanguages($cnt_languages); 
```

正如 Rocket 所指出的，一个更大的问题是`countLanguages`它没有返回任何东西。试试这个：

```
function countLanguages($id) {
  $this->db->where('user_id', $id)->from('languages');
  return $this->db->count_all_results();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:58:50.220

始终检查您的模型函数是否返回值。试试这个：

```
function showLangCount() {
    if($this->language_model->countLanguages($id))
    {
        $data['lang_cnt'] = $this->language_model->countLanguages($id);
    }
    else
    {
        $data['lang_cnt'] = NULL;
    }

    $this->load->view('lang_view', $data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:48:01.750

它更好地使用：

```
return $query->num_rows(); 
```

返回影响的行数...

# c# - 在 pre_render 上调用 javascript 函数

> ID：11745138
> 
> 赞同：0
> 
> 时间：2012-07-31T16:49:32.477
> 
> 标签：c#, asp.net, prototypejs

我正在使用原型，我有一个功能如下：

```
MyJSClass.prototype.AddLetters = function()
{
} 
```

我想根据我需要在预渲染时评估的一些条件从 c# 中调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:02:07.133

由于您不能直接从 C# 调用 JavaScript 代码 - 特别是在呈现页面之前，您需要一种方法：

1.  将需求/条件传达给 JavaScript 代码
2.  在正确的时间拿起并适当地处理需求/条件。

对于 1\. 我建议使用 ClientScriptManager 来插入/修改变量，尽管下面还有其他选项。

对于 2\. 您可能应该添加一些 javascript 来接收通信。

1.的选项：

*   在页面中添加字段
*   将脚本添加到页面中（例如使用 Client ScriptManager），它将设置一个变量
*   将脚本直接注入页面的相关点以使其运行
*   在 C# 中设置一个标志，然后在收到 AJAX 调用时检查它（如果在页面打开时它会根据服务器端规则进行更改，则可以使用它...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:52:53.070

您好，您可以尝试使用此代码

```
 ClientScriptManager cs = Page.ClientScript;

 String yourScript= "function();";
 cs.RegisterStartupScript(this.GetType(), "key script", yourScript, true); 
```

# python - WxPython GUI 编程。

> ID：11745139
> 
> 赞同：0
> 
> 时间：2012-07-31T16:49:34.560
> 
> 标签：python, wxpython

所以我的问题是，我需要在 wxpython 中创建一个 GUI 来计算汉堡包的价格。每个额外的成分是1.55，小价是1.55，中价是1.55加1.55等等。我的问题是：我如何分配单选按钮，就像我想这样做一样：如果选择了 radiobutton1：这样做

与复选框的数量相同。继承人我的脚本到目前为止。

```
import wx

class Window(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(400, 250))
        self.title = title
        self.initGUI()

    def initGUI(self):
        # Set up the widgets for the GUI
        panel = wx.Panel(self, -1)
        self.amount = wx.StaticText(panel, -1, 'Ingredients = 0', pos=(10, 10))

        #                      Parent ID  Value         Position (Height, Width)
        self.cb1 = wx.CheckBox(panel, -1, 'Extra Patty', (10, 30))
        self.cb2 = wx.CheckBox(panel, -1, 'Cheese', (10, 50))
        self.cb3 = wx.CheckBox(panel, -1, 'Onions', (10, 70))
        self.cb4 = wx.CheckBox(panel, -1, 'Mushrooms', (10,90))
        # Register an event for each checkbox.
        self.Bind(wx.EVT_CHECKBOX, self.toggleIngredients, self.cb1)
        self.Bind(wx.EVT_CHECKBOX, self.toggleIngredients, self.cb2)
        self.Bind(wx.EVT_CHECKBOX, self.toggleIngredients, self.cb3)
        self.Bind(wx.EVT_CHECKBOX, self.toggleIngredients, self.cb4)
    self.rb1 = wx.RadioButton(panel, -1, 'Small', (200,30))
    self.rb2 = wx.RadioButton(panel, -1, 'Medium', (200,50))
    self.rb3 = wx.RadioButton(panel, -1, 'Large', (200, 70))

        self.Show()
        self.Centre()

    def toggleIngredients(self, event):
        self.ingredients = 0
        for cb in (self.cb1, self.cb2, self.cb3, self.cb4):
            if cb.IsChecked():
                self.ingredients += 1
        self.amount.SetLabel('Ingredients = ' + str(self.ingredients))

    if self.amount.SetLabel == '1':
        ing = 1
    if self.amount.SetLabel == '2':
        ing = 2
    if self.amount.SetLabel == '3':
        ing = 3
    if self.amount.SetLabel == '4':
        ing = 4

app = wx.App(False)
window = Window(None, 'CheckBox Example')
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:16:15.943

请参阅 UpdateCost 方法

```
 import wx

class Window(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(400, 250))
        self.title = title
        self.initGUI()

    def initGUI(self):
        # Set up the widgets for the GUI
        panel = wx.Panel(self, -1)
        self.amount = wx.StaticText(panel, -1, 'Ingredients = 0', pos=(10, 10))

        #                      Parent ID  Value         Position (Height, Width)
        self.cbs = [
                    wx.CheckBox(panel, -1, 'Extra Patty', (10, 30)),
                    wx.CheckBox(panel, -1, 'Cheese', (10, 50)),
                    wx.CheckBox(panel, -1, 'Onions', (10, 70)),
                    wx.CheckBox(panel, -1, 'Mushrooms', (10,90))
                    ]
        # Register an event for each checkbox.
        self.Bind(wx.EVT_CHECKBOX, self.toggleIngredients)
        self.radios = [
                    wx.RadioButton(panel, -1, 'Small', (200,30)),
                    wx.RadioButton(panel, -1, 'Medium', (200,50)),
                    wx.RadioButton(panel, -1, 'Large', (200, 70))
                    ]
        self.Bind(wx.EVT_RADIOBUTTON,self.toggleIngredients)
        self.Show()
        self.Centre()
    def UpdateCost(self):
        costs = {"Small":1.55,"Medium":3.10,"Large":4.65}
        base_cost = 0.00
        for r in self.radios:
            if r.GetValue():
                base_cost = costs[r.GetLabel()]
        additional_costs = sum([1.5 for x in self.cbs if x.GetValue()])
        self.amount.SetLabel("$%0.2f"%(base_cost+additional_costs))
    def toggleIngredients(self, event):
        self.UpdateCost()

app = wx.App(False)
window = Window(None, 'CheckBox Example')
app.MainLoop() 
```

我真的可以直接将事件绑定到它......但我想保留你的大部分代码

# objective-c - 自定义导航栏？

> ID：11745141
> 
> 赞同：0
> 
> 时间：2012-07-31T16:49:43.223
> 
> 标签：objective-c, uinavigationbar

我有一个自定义导航栏，如下所示： ![导航图像](../Images/4b8bb0cab47c921ea42ffc4ac15fb3df.png)

我将其设置为导航栏的背景图像。但是如何实现按钮？我希望能够单击单个文本并执行操作

我可以在图像上的每个单词上添加一个手势识别器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:57:04.970

在工具栏上为您希望有按钮的每个地方放置一个不可见的按钮。但是，如果您希望它的外观和行为与普通工具栏完全相同，则不能让按钮成为背景图像的一部分。制作一个看起来像您在 IB 中的工具栏非常容易。

![在此处输入图像描述](../Images/d1100fde2ff64e76269a51c875263a91.png)

将其上传到 imgur 比制作它花费的时间更长！

# html - CSS3 列：添加分栏符的更好方法

> ID：11745144
> 
> 赞同：0
> 
> 时间：2012-07-31T16:49:52.313
> 
> 标签：html, css

有一个内容使用 CSS3 列分布在多个列中，这些列在 Firefox 和 Webkit、Opeara 中运行良好。

问题是使用 css 的分栏仅在 webkit (webkit-column-break-before) 中实现，在其他浏览器中不实现。

实施休息的更好方法是什么。

柱子的高度是固定的。

我可以考虑添加高度等于列高度的块元素。

将不胜感激的想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:56:39.783

在没有看到任何代码或您正在处理的内容的情况下，也许`column-count`和`column-gap`属性`column-rule`可能会起作用。

```
.newspaper
{
-moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
column-count:3;

-moz-column-gap:40px; /* Firefox */
-webkit-column-gap:40px; /* Safari and Chrome */
column-gap:40px;

-moz-column-rule:4px outset #ff00ff; /* Firefox */
-webkit-column-rule:4px outset #ff00ff; /* Safari and Chrome */
column-rule:4px outset #ff00ff;
} 
```

如果这与中断而不是列有关，请查看在子元素上使用 `break-inside: avoid-column;`和`-webkit-column-break-inside: avoid;`或使用`display: inline-block;`，以防止它们在列之间拆分。

# nhibernate - 混合双向/单向节点 - (fluent)nhibernate

> ID：11745149
> 
> 赞同：0
> 
> 时间：2012-07-31T16:50:33.020
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有这种情况：

```
public abstract class Node : Entity
{
    public virtual Node Parent { get; set; }

    private ICollection<Node> _children = new HashSet<Node>();
    public virtual ICollection<Node> Children
    {
        get { return _children; }
        set { _children = value; }
    }
} 
```

一个节点最多可以有一个父节点和多个子节点。我使用这个映射文件：

```
public class NodeMap : IAutoMappingOverride<Node>
{
    public void Override(AutoMapping<Node> mapping)
    {
        mapping.HasMany<Node>(x => x.Children)
        .KeyColumn("ParentId")
        .KeyNullable()
        .AsSet()
        .Inverse()
        .Cascade.SaveUpdate()
        .ForeignKeyConstraintName("FK_Node_ParentId")
        .Not.LazyLoad();
    }
} 
```

仅当我将父级添加到子级并将子级添加到父级时，节点之间的连接才会持续存在。但是，如果刚刚将父级添加到子级，我想在节点之间保持“连接”。我可以通过 fnh 映射实现这一点吗？

PS：

让我试着更清楚地说明一些事情。我有 5 个节点（1、2、3、4、5）。

这些之间存在双向连接：

```
Parent <-> Child
1 <-> 2
2 <-> 3
2 <-> 6
3 <-> 4
4 <-> 5 
```

但是 6 和 4 之间只有一个单向连接，因为 4 已经有一个父节点 3。

不幸的是，6 和 4 之间的连接没有持续。也许我必须更改域模型，但我希望能够实现这种“单/双方向性的混合”。

谢谢。

PP:

保存：

```
INHibernateRepository<Node> NodeRepository = new NHibernateRepository<Node>();

...

NodeRepository.SaveOrUpdate(Node1); // save topnode
NodeRepository.DbContext.CommitChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:42:07.287

通过设置`Inverse`，您告诉 NHibernate*另一个*大小（`Parent`参考）是维持关系的大小。

如果您删除它，您将能够持久添加到父级的子级。请记住，如果您不将其中一侧指定为`Inverse`，您将有多余的更新。

保持内存一致性的更好选择是添加一个辅助方法，该方法`AddChild(Node)`将节点添加到集合*并*设置其 Parent 属性。

* * *

不相关：`.Not.LazyLoad`是一个非常糟糕的主意，尤其是在层次结构上。

# python - 带有嵌入图像的 html 电子邮件

> ID：11745150
> 
> 赞同：0
> 
> 时间：2012-07-31T16:50:32.930
> 
> 标签：python, html, html-email

我在 python 中编写了一个电子邮件客户端。我正在使用 webkit.Webview 来显示电子邮件正文。它工作正常，但是当电子邮件使用带有内容 ID (cid) 的嵌入式图像时，我无法显示它们。

电子邮件样本： [电子邮件样本](http://ubuntuone.com/2uzU7mbZMoabDn4vSLH22S)

谢谢

示例 html 代码：

`<P class="MsoNormal texte"><SPAN style="FONT-FAMILY: 'Arial Narrow'"><o:p></o:p></SPAN><IMG src="cid:14EA9190EC0F1638D6625F23EE9AF0B0@LVN.LAN" width="710" height="5"><IMG class="banniere" src="cid:EF72F46B7E97F45065312BFB8571729F@LVN.LAN" width="710" height="710"> <BR><SPAN class=titre>Des sacs gonflés pour arpenter le parcours !<BR></SPAN></P>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:15:52.837

这不起作用，因为大多数邮件客户端不支持数据 URL。

图像必须由完全限定的 URL 引用：`<img src="http://..." />`并存储在可公开访问的服务器上。

事实上，大多数邮件客户端甚至都不支持样式表，因此诸如此类的项目`class="MsoNormal texte"`将不起作用。所有样式都应该是内联的。

见： http: [//www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

# android - 当 textMultiLine 换行到新行时，Android 会增加父级的高度

> ID：11745152
> 
> 赞同：1
> 
> 时间：2012-07-31T16:51:10.690
> 
> 标签：android, android-layout, android-edittext

我有一个片段显示了一个聊天会话，然后在它下面一个`EditText`和一个`Button`

现在我有`RelativeLayout`包含`EditText`和`Button`硬编码的高度。

**我如何让`RelativeLayout`高度仅是单行的高度，`EditText`并且当用户键入足够的文本以保证新的文本行动态地重新调整高度以使其足够大以包含现在更大的高度时`EditText`？**

对于使用过 Google Voice 应用程序或股票消息应用程序的任何人，您都可以在回复消息时看到这一点。

我在下面包含了我当前的布局。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/bottom_bar"
        android:layout_width="fill_parent"
        android:layout_height="90dp"
        android:layout_alignParentBottom="true"
        android:minHeight="60dp" >

        <ImageButton
            android:id="@+id/sendButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="false"
            android:layout_alignParentRight="true"
            android:layout_centerInParent="false"
            android:layout_centerVertical="true"
            android:background="@null"
            android:onClick="sendMessage"
            android:paddingBottom="15dp"
            android:paddingRight="5dp"
            android:paddingTop="10dp"
            android:src="@drawable/send" />

        <EditText
            android:id="@+id/sendText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="false"
            android:layout_centerVertical="true"
            android:layout_marginBottom="5dp"
            android:layout_marginTop="5dp"
            android:layout_toLeftOf="@id/sendButton"
            android:hint="Enter Message"
            android:inputType="textMultiLine" >

        </EditText>

    </RelativeLayout>

    <fragment
        android:id="@+id/chatfragment"
        android:name="android.support.v4.app.ListFragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/bottom_bar"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T16:54:28.813

您是否尝试将嵌套的 RelativeLayout 的高度设置为`wrap_content`？

```
<RelativeLayout
    android:id="@+id/bottom_bar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:minHeight="60dp" > 
```

# css - 为什么我的页面高度没有停止？

> ID：11745162
> 
> 赞同：1
> 
> 时间：2012-07-31T16:51:34.997
> 
> 标签：css, slider, height, nivo-slider

好吧，我是这个网站的新手，但我听说这是最好的帮助，所以我们开始吧。目前我正在开发自己的网站，到目前为止一切都很好，但是现在我正在添加页脚，我的页面不会在页脚处结束。例如; [http://justxp.x10.mx/test/](http://justxp.x10.mx/test/) 你看到我的页面在页脚之后是如何继续的吗？我尝试添加 height: 100% 代码，但没有用，我也尝试手动设置高度，但没有用，有人知道如何删除多余的空间吗？我希望我的页脚在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:02:37.133

尝试

```
position:absolute;
bottom:0px; 
```

到页脚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:52:55.043

给`clear:both;`你的页脚。

# .htaccess - .htaccess IE6 浏览器重定向

> ID：11745164
> 
> 赞同：1
> 
> 时间：2012-07-31T16:51:45.877
> 
> 标签：.htaccess, internet-explorer-6

我最近将服务器从 1and1 移动到 GoDaddy 以供客户使用。我注意到他们对 IE6 用户的重定向不再适用于他们。加载主网页而不是重定向页面。请注意，目录仍然与以前的现有服务器上的相同。

```
<IfModule mod_rewrite.c>
  # redirect IE 5 or 6 requests to version-specific subdomains 
  RewriteCond %{HTTP_USER_AGENT} MSIE\ ([56])\.
  RewriteRule ^([a-z]+)\.html$ /ie6users/index.php [R=302,L]
</IfModule> 
```

我不确定我在这里做错了什么，但重定向不再有效。

提前感谢任何提示/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:27:11.567

这些规则看起来不错，您确定要打开重写引擎吗？

```
<IfModule mod_rewrite.c>

  RewriteEngine On

  # redirect IE 5 or 6 requests to version-specific subdomains 
  RewriteCond %{HTTP_USER_AGENT} MSIE\ ([56])\.
  RewriteRule ^([a-z]+)\.html$ /ie6users/index.php [R=302,L]
</IfModule> 
```

当我将这些规则放在一个空白的 htaccess 文件中时，IE6 浏览器会从 URL 重定向`http://localhost/something.html`到`http://localhost/ie6users/index.php`

# django - 如果文件存在，则覆盖文件并删除旧模型的对象

> ID：11745167
> 
> 赞同：0
> 
> 时间：2012-07-31T16:51:59.120
> 
> 标签：django, django-file-upload

我做了一些东西来覆盖已经上传的文件：

```
class OverwriteStorage(FileSystemStorage):
def get_available_name(self, name):
    if self.exists(name):
        os.remove(os.path.join(settings.MEDIA_ROOT, name))
    return name 
```

但我的文件在一个模型中：

```
class Work (models.Model):
    file = models.FileField(storage=OverwriteStorage(), upload_to=path)
    group = models.ForeignKey(Group, related_name='work_list') 
```

新上传的新输入，所以我有：

*   没有文件的模型（当我询问 file.size 时的那个错误..）

*   我的新模型

删除文件后如何删除模型？

我试图再次更改 FileSystemStorage 过程，但我不能使用任何参数（在文档中说并测试了几个小时；）），我也尝试更改保存过程，但我没有成功..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:03:40.617

我的解决方案：

```
for work in groupwork : #It is the list of work associate with my group
    try :
       path = work.file.path.lstrip(SITE_ROOT+'/'+MEDIA_ROOT+'/').rstrip(request.FILES['file'].name)
       deletedwork = groupwork.get(file=path+request.FILES['file'].name)
       deletedwork.delete()
    except:
       pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:15:53.523

在继续进行故障排除之前需要检查的几件事：

*   您是否在 settings.py 文件中设置了 MEDIA_ROOT 和 MEDIA_URL？
*   检查此[链接](https://docs.djangoproject.com/en/dev/topics/files/)以获取有关管理文件的更多信息
*   我会利用 Django 的[内置文件存储](https://docs.djangoproject.com/en/dev/topics/files/#storage-objects)，而不是从头开始构建一些东西

# r - data.table 中的动态列名

> ID：11745169
> 
> 赞同：38
> 
> 时间：2012-07-31T16:52:05.137
> 
> 标签：r, data.table

我正在尝试向 my 中添加列`data.table`，其中名称是动态的。我还需要`by`在添加这些列时使用该参数。例如：

```
test_dtb <- data.table(a = sample(1:100, 100), b = sample(1:100, 100), id = rep(1:10,10))
cn <- parse(text = "blah")
test_dtb[ , eval(cn) := mean(a), by = id]

# Error in `[.data.table`(test_dtb, , `:=`(eval(cn), mean(a)), by = id) : 
#  LHS of := must be a single column name when with=TRUE. When with=FALSE the LHS may be a vector of column names or positions. 
```

另一种尝试：

```
cn <- "blah"
test_dtb[ , cn := mean(a), by = id, with = FALSE]
# Error in `[.data.table`(test_dtb, , `:=`(cn, mean(a)), by = id, with = FALSE) : 'with' must be TRUE when 'by' or 'keyby' is provided 
```

* * *

**马修更新：**

这现在适用于 R-Forge 的 v1.8.3。感谢您的强调！
有关新示例，请参阅此类似问题：

[使用 data.table 按组分配多个列](https://stackoverflow.com/questions/11680579/assign-multiple-columns-using-in-data-table-by-group)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-31T17:45:32.167

从`data.table 1.9.4`，您可以这样做：

```
## A parenthesized symbol, `(cn)`, gets evaluated to "blah" before `:=` is carried out
test_dtb[, (cn) := mean(a), by = id]
head(test_dtb, 4)
#     a  b id blah
# 1: 41 19  1 54.2
# 2:  4 99  2 50.0
# 3: 49 85  3 46.7
# 4: 61  4  4 57.1 
```

详见：**_** _`?:=`

> `DT[i, (colvector) := val]`
> 
> [...] 现在首选 [...] 语法。括号足以阻止 LHS 成为一个符号。如同`c(colvector)`

* * *

**原答案：**

您走在了完全正确的轨道上：构造一个要在调用中评估的表达式`[.data.table`是执行此类操作的**data.table**方式。再进一步，为什么不构造一个计算*整个* `j`参数的表达式（而不仅仅是它的左侧）？

这样的事情应该可以解决问题：

```
## Your code so far
library(data.table)
test_dtb <- data.table(a=sample(1:100, 100),b=sample(1:100, 100),id=rep(1:10,10))
cn <- "blah"

## One solution
expr <- parse(text = paste0(cn, ":=mean(a)"))
test_dtb[,eval(expr), by=id]

## Checking the result
head(test_dtb, 4)
#     a  b id blah
# 1: 30 26  1 38.4
# 2: 83 82  2 47.4
# 3: 47 66  3 39.5
# 4: 87 23  4 65.2 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-01T21:22:04.423

表达式可以用 bquote 构造。

```
cn <- "blah"
expr <- bquote(.(as.name(cn)):=mean(a))
test_dtb[,eval(expr), by=id] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-04T17:51:49.830

I believe `setnames(DT, c(col.names))` yields the most readable code

# python - SMTP 向多个收件人发送邮件但未收到

> ID：11745171
> 
> 赞同：2
> 
> 时间：2012-07-31T16:52:08.117
> 
> 标签：python, smtp, gmail

我编写了一个 Python 脚本来自动向我的朋友发送一些信息。我用过`SMTPlib`，如果我只发送给我或另外一封电子邮件，效果很好。

当我尝试发送到 17 封电子邮件（包括我的发件人电子邮件）时，它会显示在基于 Web 的 Gmail 上的已发送邮件中。我看到邮件已发送，但我没有收到。只有第一个收件人收到了电子邮件。如果我从那封邮件中回复所有人，那么每个人都只会收到那个回复。

当我从脚本发送它时，我无法弄清楚为什么他们没有收到它，我问我的朋友检查垃圾邮件，但她没有找到任何东西。

这是我的代码：

```
#!/usr/bin/env python
import smtplib
import csv
from datetime import datetime, timedelta

SMTP_SERVER  = 'smtp.gmail.com'
SMTP_PORT = 587

sender = 'MYBOT@gmail.com'

password = None
with open('pass', 'rt') as f:
    password = f.read().strip('\n')

def send_mail(recipient, subject, body):
    """
    Send happy bithday mail
    """
    headers = ["From: " + sender,
               "Subject: " + subject,
               "To: " + recipient,
               "MIME-Version: 1.0",
               "Content-Type: text/html"]

    headers = "\r\n".join(headers) 

    smtp = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)
    smtp.ehlo()
    smtp.starttls()
    smtp.ehlo
    smtp.login(sender, password)

    body = "" + body +""
    smtp.sendmail(sender, recipient, headers + "\r\n\r\n" + body)
    print "Sent to ", 
    print recipient

    smtp.quit()

def send_happybirthday(recipient):
    body = """Happy birthday to you!
            \n<br/>From C2k8pro with love
          """
    subject ='[BirthReminder] Happy birthday to you! from C2k8pro'
    send_mail(recipient, subject, body)

def send_notification(all_mails, names):
    body = """Tomorrow is birthday of %s""" % names
    send_mail(all_mails, body,  body)

def test_send_mail():

    notify_body = """Tomorrow is birthday of """
    recipients = ['MYBOT@gmail.com']

    today = datetime.now()
    format = "%d-%m-%Y"
    print today
    today_in_str = datetime.strftime(today, format)

def read_csv():
    FILENAME = 'mails.csv'
    reader = csv.reader(open(FILENAME, 'rt'), delimiter=',')

    today = datetime.now()
    one_day = timedelta(days=1)
    tomorrow = today + one_day

    all_mails = []
    str_format = "%d/%m"
    str_today = today.strftime(str_format)
    str_tomorrow = tomorrow.strftime(str_format)

    print 'Today is ', str_today
    tomorrow_birth = []
    for row in reader:
        name = row[1].strip()
        dob = row[2]
        dmy = dob.split("/")
        mail = row[3]
        all_mails.append(mail)

        #TODO fix dob with only 1 digit
        birth_date = dmy[0] + "/" + dmy[1]
        if str_today == birth_date:
            print 'Happy birthday %s' % name

            try:
                send_happybirthday(mail)
            except Exception, e:
                print e

        elif str_tomorrow == birth_date:
            tomorrow_birth.append(name)
            print "Tomorrow is %s's birthday" % name

    # Remove empty string
    all_mails = filter(None, all_mails)
    print 'All mails: ', len(all_mails)
    str_all_mails = ', '.join(all_mails)

    if tomorrow_birth:
        all_tomorrow = ', '.join(tomorrow_birth)
        send_notification(str_all_mails, all_tomorrow)

def main():
    read_csv()

if __name__ == "__main__":
    main() 
```

谁能解释一下。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:24:13.633

我从这里找到了解决方案

[使用 Python smtplib 从 .txt 文件向多个收件人发送电子邮件](https://stackoverflow.com/questions/6941811/send-email-to-multiple-recipients-from-txt-file-with-python-smtplib)

我将一个包含所有收件人的字符串传递给 msg['To'] 和 sendmail()。msg['To'] 确实如此，但对于 sendmail，我必须使用一个列表。

# visual-studio - Windows 8 应用程序部署

> ID：11745179
> 
> 赞同：2
> 
> 时间：2012-07-31T16:52:26.770
> 
> 标签：visual-studio, deployment, windows-8, visual-studio-2012

我使用 Visual Studio Express 2012 RC 开发了一个 Windows 8 C# 应用程序。我可以在我的电脑上运行它。但是，我想创建一个可执行文件，以便我的朋友也可以尝试该应用程序。当我单击 bin/Release 文件夹下的 .exe 文件时，它显示：

> 此应用程序只能在应用程序容器的上下文中运行。

如何手动或使用 Visual Studio 2012 创建应用容器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T17:05:30.517

见[这里](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/74e053e0-05ca-4ee3-a2d3-bef2901c0016/)。

> 在通过商店进行认证和部署之前，您需要开发人员许可证来开发和测试 Metro 风格的应用程序。Visual Studio 2012 将在首次运行时自动请求开发人员许可证。要在没有 Visual Studio 的情况下获得开发人员许可证，请在 powershell 中运行 show-WindowsDeveloperLicenseRegistration 函数：

```
C:\Windows\system32>powershell 
Windows PowerShell Copyright (C) 2012
Microsoft Corporation. All rights reserved.

PS C:\Windows\system32> Show-WindowsDeveloperLicenseRegistration 
```

> 有关开发人员许可证的信息，请参阅：[获取开发人员许可证（Metro 风格应用程序）](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx)要部署应用程序，请从 Store.Build Pacakage 菜单在 Visual Studio 中构建一个包。构建它以供本地使用。将生成的包复制到目标计算机并运行包含的 Add-AppDevPackage.ps1 文件。另请参阅[在本地共享应用程序包。](http://msdn.microsoft.com/en-us/library/windows/apps/hh975356%28v=vs.110%29.aspx) - 抢

# c# - 通过桌面应用程序输入控制台命令会返回返回的行吗？

> ID：11745187
> 
> 赞同：1
> 
> 时间：2012-07-31T16:52:54.870
> 
> 标签：c#

我正在尝试在桌面应用程序（通过文本框）上输入控制台命令，单击按钮，执行命令并获取返回的值以供显示。

关键是，我希望每天在控制台上一遍又一遍地输入重复命令时，让我的工作更快、压力更小。

我也知道 C# 上的一些控制台应用程序编程和 C# 上的 Web 应用程序（.NET、ADO.NET），但对桌面应用程序一无所知。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:56:26.090

[Process 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)可用于启动应用程序，并读取其输出（来自标准输出或标准错误流）。

例如，要启动一个进程并读取它的“输出”，您可以使用：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "Foo.exe";
p.Start();

// Read the output
string output = p.StandardOutput.ReadToEnd();
p.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:56:47.097

如果您制作一个基本的 Windows 窗体应用程序，您可以将重复的命令存储在本地文件中，并有一种机制可以在您的应用程序中从该文件中选择一个命令并运行它。Windows 窗体对您来说应该不会太难。它只是拖放。

# javascript - Emberjs - Ember.Select valueBinding 无法工作

> ID：11745190
> 
> 赞同：0
> 
> 时间：2012-07-31T16:53:03.277
> 
> 标签：javascript, ember.js

我有一个简单的 Ember.Select，我想使用 valueBinding 选项。

更改选择值应更改上面显示的值。它不是。

[http://jsfiddle.net/mattkime/rDpEG/](http://jsfiddle.net/mattkime/rDpEG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:55:41.350

我猜你的意思是`selectionBinding`它绑定了对象所以使用`{{App.power.label}}`

```
<script type="text/x-handlebars">
    App Power : {{#if App.power}}{{App.power.label}}{{else}}Not yet set{{/if}}
    <hr/>
        {{view Ember.Select
        contentBinding="App.booleanOptions"
        selectionBinding="App.power"
        optionLabelPath="content.label"
        optionValuePath="content.value"
        id="emberEnhanced"
      }}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:34:01.827

看起来我正在询问尚未发布的功能。当前版本是 0.9.8.1，valueBinding 在trunk

# c# - 在 C# 中执行命令行，但从任务管理器中隐藏它

> ID：11745194
> 
> 赞同：1
> 
> 时间：2012-07-31T16:53:09.013
> 
> 标签：c#, windows

我在 C# 中执行包含密码的命令行，如果我在 Windows 任务管理器（“进程”选项卡）中显示可选的“命令行”列，它包含所有参数，包括密码，你能想办法隐藏这个吗，比如只显示“.exe”文件之类的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T16:55:24.360

如果您可以控制正在调用的程序，则可以修改它以从标准输入读取数据，而不是在命令行上传递密码。这将阻止它成为命令行本身的一部分，从而“隐藏”它。

如果您无法更改程序，则无法隐藏用于启动进程的命令行，因为有 Windows API 调用可以查询打开的进程（这是任务管理器正在使用的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T16:56:55.250

好吧，拳头：在我看来，你真的不应该做类似以人类可读格式传递凭据之类的事情！将路径传递给包含加密凭据的文件并不难，而且更安全。

我认为隐藏命令行是不可能的。如我错了请纠正我。

请参阅：[将密码保存到注册表时加密密码的最简单方法是什么？](https://stackoverflow.com/questions/212510/what-is-the-easiest-way-to-encrypt-a-password-when-i-save-it-to-the-registry)

# php - 通过 CURL 向 WebServices 发送 XML 文件时出错

> ID：11745195
> 
> 赞同：2
> 
> 时间：2012-07-31T16:53:12.247
> 
> 标签：php

我正在尝试通过 CURL 的 POST 方法将 XML 发送到经过身份验证的 web 服务，但由于某种原因，服务器拒绝了 XML 文件，我给了我一个错误 500，但是另一个 Web 服务不是通过 GET 方法，没有问题。以下代码是我正在尝试的。

```
 <?php
  $request_xml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?> 
  <FiltroLicitaciones xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"> 
  <CantidadRegistro>10</CantidadRegistro> 
  <Texto>memo</Texto> 
  <CodigoRegion xsi:nil=\"true\" /> 
  <CodigoEstado>1</CodigoEstado> 
  <TipoFecha>FechaPublicacion</TipoFecha> 
  <FechaDesde>2011-06-01T00:00:00</FechaDesde> 
  <FechaHasta>2011-08-01T00:00:00</FechaHasta> 
  </FiltroLicitaciones>";

  //Initialize handle and set options 
  $username = 'user'; 
  $password = 'pass'; 
  $ch = curl_init();

  curl_setopt($ch, CURLOPT_URL, 'https://www.mercadopublico.cl/movil/licitaciones/porFecha');  
 //curl_setopt($ch, CURLOPT_URL, "http://localhost/server.php"); 
   curl_setopt($ch, CURLOPT_USERPWD, $username.':'.$password); 
   curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC); 
   curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true); 
   curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
   curl_setopt($ch, CURLOPT_HEADER, 1); 
   curl_setopt($ch, CURLOPT_TIMEOUT, 4); 
   curl_setopt($ch, CURLOPT_POSTFIELDS, $request_xml);

   $result = curl_exec($ch); 

   curl_close($ch); 

   print_r($result); 

   ?> 
```

我不知道 XML 格式错误是否会出错，但服务器返回给我一个随机的 500 错误，并带有以下标头：

```
HTTP/1.1 500 The server encountered an error processing the request. Please see the      server logs for more details.
Cache-Control: private
Content-Length: 1047
Content-Type: text/html
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Mon, 30 Jul 2012 23:53:05 GMT 
```

我在本地服务器上做了一个测试，看看数据来了，结果如下：

```
HTTP/1.1 200 OK 
Date: Mon, 30 Jul 2012 23:41:50 GMT 
Server: Apache/2.2.22 (Fedora) 
X-Powered-By: PHP/5.3.14 
Content-Length: 2450 
Connection: close 
Content-Type: text/html; charset=UTF-8 

Array 
( 
 [GLOBALS] => Array 
 *RECURSION* 
  [_POST] => Array 
    ( 
        [<?xml version] => "1.0" encoding="utf-8" ?> 
        <FiltroLicitaciones xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
        <CantidadRegistro>10</CantidadRegistro> 
        <Texto>memo</Texto> 
        <CodigoRegion xsi:nil="true" /> 
        <CodigoEstado>1</CodigoEstado> 
        <TipoFecha>FechaPublicacion</TipoFecha> 
        <FechaDesde>2011-06-01T00:00:00</FechaDesde> 
        <FechaHasta>2011-08-01T00:00:00</FechaHasta> 
        </FiltroLicitaciones> 
    ) 

[_GET] => Array 
    ( 
    ) 

[_COOKIE] => Array 
    ( 
    ) 

[_FILES] => Array 
    ( 
    ) 

[_ENV] => Array 
    ( 
    ) 

[_REQUEST] => Array 
    ( 
        [<?xml version] => "1.0" encoding="utf-8" ?> 
        <FiltroLicitaciones xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
        <CantidadRegistro>10</CantidadRegistro> 
        <Texto>memo</Texto> 
        <CodigoRegion xsi:nil="true" /> 
        <CodigoEstado>1</CodigoEstado> 
        <TipoFecha>FechaPublicacion</TipoFecha> 
        <FechaDesde>2011-06-01T00:00:00</FechaDesde> 
        <FechaHasta>2011-08-01T00:00:00</FechaHasta> 
        </FiltroLicitaciones> 
    ) 

[_SERVER] => Array 
    ( 
        [HTTP_HOST] => localhost 
        [HTTP_ACCEPT] => */* 
        [CONTENT_LENGTH] => 469 
        [CONTENT_TYPE] => application/x-www-form-urlencoded 
        [PATH] => /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
        [SERVER_SIGNATURE] => <address>Apache/2.2.22 (Fedora) Server at localhost Port 80</address> 

        [SERVER_SOFTWARE] => Apache/2.2.22 (Fedora) 
        [SERVER_NAME] => localhost 
        [SERVER_ADDR] => ::1 
        [SERVER_PORT] => 80 
        [REMOTE_ADDR] => ::1 
        [DOCUMENT_ROOT] => /var/www/html 
        [SERVER_ADMIN] => root@localhost 
        [SCRIPT_FILENAME] => /var/www/html/server.php 
        [REMOTE_PORT] => 37712 
        [GATEWAY_INTERFACE] => CGI/1.1 
        [SERVER_PROTOCOL] => HTTP/1.1 
        [REQUEST_METHOD] => POST 
        [QUERY_STRING] =>  
        [REQUEST_URI] => /server.php 
        [SCRIPT_NAME] => /server.php 
        [PHP_SELF] => /server.php 
        [PHP_AUTH_USER] => user 
        [PHP_AUTH_PW] => pass 
        [REQUEST_TIME] => 1343691710 
    ) 
```

)

我希望你能帮助我。

谢谢。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:58:15.850

请注意示例转储的这一部分：

```
 [_POST] => Array 
    ( 
        [<?xml version] 
```

您的 XML 数据被解释为表单类型的数据上传，字段名称为`<?xml version`. 这破坏了您的 XML 结构，导致您将其提交到的服务器上出现解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:02:13.423

好吧，我不确定 500 错误是否来自 xml，但是，正如我在您的代码中看到的，xml 没有 url 变量：

```
 myxml=<xml></xml> 
```

因为从响应中可以看出，url 参数已经变成

```
 [<?xml version] => "1.0" encoding="utf-8" ?> 
```

这是错误的。

如果 api 文档没有指定任何 url 参数，那么您可能应该设置正确的 curl 标头：

```
 curl_setopt($ch,CURLOPT_HTTPHEADER, Array("Content-Type: application/xml"); 
```

像这样，服务器知道会发生什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:13:00.600

首先阅读下面的网址，我认为这对您来说非常有用

将 XML 文件发送到 Web 服务（使用 cURL）

[http://softwaredevelopmentindia.wordpress.com/2007/07/09/sending-xml-files-to-a-webservice-using-curl/](http://softwaredevelopmentindia.wordpress.com/2007/07/09/sending-xml-files-to-a-webservice-using-curl/)

或试试这个

调用 Web 服务。非常有趣！！......当它起作用时。最大的挑战之一是发送 XML 文档并获取响应，尤其是 XML 文档。我想出了一个 PHP 函数，它对用户隐藏所有必要的逻辑并处理 XML 文档的发布并返回服务器响应的任何内容。它依赖于 PHP 的 cURL 库（因此您需要在服务器上正确配置它才能工作）。您需要做的就是创建 XML 文档，选择要将 XML 文档发布到的 URL（和端口），然后该函数会处理其余的事情。下面是功能代码。如您所见，该函数可以处理启用 SSL 的服务器，这是一个很大的优势，因为许多 Web 服务运行在 HTTPS 上。

// 打开一个http通道，发送数据并返回接收到的缓冲区

```
function xml_post($post_xml, $url, $port)
{
$user_agent = $_SERVER[’HTTP_USER_AGENT’];
$ch = curl_init(); // initialize curl handle
curl_setopt($ch, CURLOPT_URL, $url); // set url to post to
curl_setopt($ch, CURLOPT_FAILONERROR, 1); // Fail on errors
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // allow redirects
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable
curl_setopt($ch, CURLOPT_PORT, $port); //Set the port number
curl_setopt($ch, CURLOPT_TIMEOUT, 15); // times out after 15s
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_xml); // add POST fields
curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
if($port==443)
{
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
}
$data = curl_exec($ch);
curl_close($ch);
return $data;
} 
```

下面的示例显示了该函数的工作原理，通过发布表单的 XML 文档

```
<?xml version=”1.0″ encoding=”iso-8859-1″?>

<Document> 

  <Message> 

     Your Name  

  </Message>

</Document> 
```

到“侦听器”脚本，该脚本接受 XML 文档并返回回复（另一个 XML 文档）。在这种情况下，监听器非常简单。它所做的只是将“Message”标签替换为“Reply”并打印生成的 XML。当然，监听器可以做各种各样的事情来响应 POST。

```
<?php 

   if ( !isset( $HTTP_RAW_POST_DATA ) )

   {

      $HTTP_RAW_POST_DATA = file_get_contents( ‘php://input’ ); 

   } 

   $xml = str_replace(”Message”,”Reply” , $HTTP_RAW_POST_DATA);  

   print((trim($xml)));

?> 
```

# ruby - 使用 splat 运算符通过引用块来传递参数

> ID：11745197
> 
> 赞同：4
> 
> 时间：2012-07-31T16:53:19.013
> 
> 标签：ruby, splat

似乎在使用 splat 运算符通过引用将参数传递给块时，参数被复制了。

我有这个：

```
def method
  a = [1,2,3]
  yield(*a)
  p a
end

method {|x,y,z| z = 0}
#=> this puts and returns [1, 2, 3] (didn't modified the third argument) 
```

如何通过引用传递这些参数？如果我直接传递数组似乎可以工作，但是 splat 运算符在这里会更加实用、直观和可维护。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T18:00:49.707

1.  在 Ruby 中，当您编写时，`x = value`您正在创建一个新的局部变量`x`，无论它以前是否存在（如果它存在，则名称只是简单地重新绑定，原始值保持不变）。因此，您将无法以这种方式就地更改变量。

2.  整数是不可变的。因此，如果您发送一个整数，则无法更改其值。请注意，您可以更改可变对象（字符串、哈希、数组...）：

    ```
    def method
      a = [1, 2, "hello"]
      yield(*a)
      p a
    end

    method { |x,y,z| z[1] = 'u' }
    # [1, 2, "hullo"] 
    ```

注意：我试图回答你的问题，现在我的观点是：更新方法或块中的参数会导致错误的代码（你不再有[引用透明度](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)）。如果愿意，返回新值并让调用者自己更新变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T18:01:29.783

这里的问题是`=`标志。它使局部变量`z`分配给另一个对象。

以字符串为例：

```
def method
  a = ['a', 'b', 'c']
  yield(*a)
  p a
end

method { |x,y,z| z.upcase! }   # => ["a", "b", "C"] 
```

这清楚地表明`z`与数组的第三个对象相同。

这里的另一点是你的例子是数字。Fixnums 有固定的 id；因此，您不能在保持相同对象 ID 的同时更改数字。要改变Fixnums，你必须使用`=`给变量分配一个新的数字，而不是像自改变的方法`inc!`（这样的方法不能存在于Fixnums上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:02:24.897

是的...数组包含对象的***链接***。在您的代码中，当您使用`yield(*a)`then in 块时，您可以使用指向数组中对象的***变量***。现在寻找代码示例：

```
daz@daz-pc:~/projects/experiments$ irb
irb(main):001:0> a = 1
=> 1
irb(main):002:0> a.object_id
=> 3
irb(main):003:0> a = 2
=> 2
irb(main):004:0> a.object_id
=> 5 
```

因此，在块中您不会***更改***旧对象，您只需*创建另一个对象并将其设置为 variable*。但是该数组包含指向旧对象的链接。

看看调试的东西：

```
def m
  a = [1, 2]
  p a[0].object_id
  yield(*a)
  p a[0].object_id
end

m { |a, b| p a.object_id; a = 0; p a.object_id } 
```

输出：

```
3
3
1
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:16:05.220

> 如何通过引用传递这些参数？

您不能在 Ruby 中通过引用传递参数。Ruby 是按值传递的。总是。没有例外，没有如果，没有但是。

> 如果我直接传递数组似乎可以工作

我对此表示高度怀疑。您根本无法在 Ruby 中通过引用传递参数。时期。

# c# - Telerik OpenAccess ORM 中的提交异常

> ID：11745198
> 
> 赞同：1
> 
> 时间：2012-07-31T16:53:23.027
> 
> 标签：c#, .net, orm, telerik, telerik-open-access

我之前有一个与此类似的问题，但与实体框架有关。从那以后，我尝试使用 Telerik OpenAccess。这是我的模型：

![在此处输入图像描述](../Images/1139d1458f3358281921faba06fb4622.png)

当大约每 10 秒运行一次以下函数时，它的行为与预期一样，并且不会出现异常。但是，如果我在短时间内连续调用此函数 3 次，我会收到此错误。

```
InvalidOperationException - Not allowed because Commit / Rollback is in progress 
```

这是功能。抛出异常`SaveChanges()`

```
private void NewTaskTaskCompleted(object sender, TaskCompletedEvent e)
{
    TASK scheduledTask = entities.TASKs.First(x => x.TASK_NAME == e.ClassName);
    scheduledTask.NEXT_RUN = e.NextRun;
    //entities.SaveChanges();

    TASK_LOG logMsg = new TASK_LOG()
    {
        TASK = scheduledTask,
        MESSAGE = e.TaskResult.Message,
        STATUS = e.TaskResult.Status ? "Successful" : "Failure",
        TIMESTAMP = e.CompletedTime
    };

    scheduledTask.TASK_LOGs.Add(logMsg);
    //entities.Add(logMsg);
    entities.SaveChanges();
} 
```

SaveChanges 调用是否不会阻止函数退出，从而阻止下一次函数调用的发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:30:03.270

Telerik 具有标准的乐观并发行为。含义：假设没有并发发生，如果发生了就会崩溃。之前没有检查，所以要么你使用自己的机制（比如锁）。

另见[http://www.telerik.com/help/openaccess-orm/concurrency-control-pessimistic.html](http://www.telerik.com/help/openaccess-orm/concurrency-control-pessimistic.html)

# ruby-on-rails - 通过rails中的连接模型验证唯一性

> ID：11745202
> 
> 赞同：1
> 
> 时间：2012-07-31T16:53:39.723
> 
> 标签：ruby-on-rails

我有一个 has_many :through 两个表（帖子和类别）之间的关联设置。我使用 has_many :through 而不是 HABTM 的原因是我想对连接表（PostCategory）进行一些验证。

所以我在这里使用了 4 个模型：

用户：

```
has_many :posts
has_many :categories 
```

邮政：

```
belongs_to :user
has_many :post_categories
has_many :categories, :through => :post_categories 
```

类别：

```
belongs_to :user
has_many :post_categories
has_many :posts, :through => :post_categories 
```

帖子类别：

```
belongs_to :post
belongs_to :category 
```

基本上我想要的是：用户可以创建帖子，用户也可以创建自己的类别。然后，用户可以对帖子进行分类（不仅仅是他们的帖子，任何帖子）。一个帖子可以被许多不同的用户分类（可能以不同的方式），一个类别可以包含许多不同的帖子（一个用户可以将 N 个帖子归类到他们的特定类别下）。

这对我来说有点棘手（我是 Rails 菜鸟）。 **对于给定用户，帖子只能属于一个类别。也就是说，对于任何用户来说，一个帖子不能属于一个以上的类别。**

我想要做的是为此创建一个验证。我一直无法弄清楚如何。我已经尝试过（在 PostCategory 内）

```
validates_uniqueness_of :post_id, :scope => :category_id 
```

但我意识到这是不正确的。这只会确保帖子属于 1 个类别，这意味着在一个用户对帖子进行分类后，其他用户就不能这样做了。

我真正要寻找的是如何在我的 PostCategory 模型（或其他任何地方）中验证这一点。我也不反对更改我的数据库架构，如果这会使事情变得更容易（我只是觉得这个架构非常简单）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:12:52.397

最简单的方法是添加`user_id`并`PostCategory`验证范围的唯一`post_id`性`user_id`。

另一种方法是创建自定义验证，如果类别所有者已将类别添加到该帖子，则使用 sql 检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:05:59.157

选项 1：使用`before_save`. 在其中，执行 SQL 查找以确保不存在与您的用户具有相似类别的帖子（请注意在编辑时，您必须确保不查找当前帖子已经在数据库中）

选项 2：自定义验证器：http: [//guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html#custom-validators](http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html#custom-validators)

从未使用过它们，但听起来它可以做你想做的事

# xcode - 停止 UIPickerViewAnimation

> ID：11745209
> 
> 赞同：1
> 
> 时间：2012-07-31T16:53:52.970
> 
> 标签：xcode, animation, uidatepicker

有没有办法在按钮单击时立即停止滚动 UIPIckerView 或 UIDatePicker 的动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:18:56.677

调查`- (UIView *)viewForRow:(NSInteger)row forComponent:(NSInteger)component`

由于 Picker 一次只能显示有限数量的结果。您可以实现一种算法来确定调用此方法时结果中间的内容。每次出现新选项时都会调用它（就像 tableView viewForIndexPath 一样）。所以上下滚动都会调用这个方法。

请注意，您需要在前几个选项和最后几个选项中添加填充选项，以使其正常工作。这会给你你想要的效果。请注意，Apple 可能不同意这种方法，因为它不像 Apple 想要的选择器那样做。

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:45:06.527

如果您查看[`UIPickerView`class reference](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html#//apple_ref/doc/uid/TP40006842-CH3-SW11)，您将看到：

> **selectRow：inComponent：动画：**
> 
> 在选取器视图的指定组件中选择一行。
> 
> ```
> - (void)selectRow:(NSInteger)row 
>       inComponent:(NSInteger)component 
>          animated:(BOOL)animated 
> ```

您可以在按下按钮时调用此方法，发送`NO`动画参数，以立即选择特定行。

# php - 在选择下拉选项时从 mysql 数据库填充 HTML 表单字段

> ID：11745212
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:54:03.857
> 
> 标签：php, javascript, jquery, mysql

我想根据在下拉列表中选择的特定选项从数据库中填充文本字段。例如，下拉菜单包含文章的标题，当我选择或单击某些文章时，例如“科学”，那么数据库中针对科学的内容应以表格形式显示在文本区域中......请......任何事情都会受到赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:28:22.587

这是一个使用 ajax 检索信息的工作示例：（这使用 jQuery）

```
<!DOCTYPE HTML>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>
<div>
    <select id="myselect">
      <option>---</option>
      <option>Milk</option>
      <option>Coffee</option>
      <option>Tea</option>
    </select>
</div>
<div>
    <textarea id="result"></textarea>
</div>
<script>
    $(document).ready(function()
    {
        $('#myselect').change(function()
        {
            var selected = $(this).find(':selected').html();
            $.post('http://localhost/tests/ajax.php', {'beverage': selected}, function(data) {
              $('#result').html(data);
            });
        }); 
    });
</script>
</body>
</html> 
```

这是您的 ajax.php 文件（更改代码以从数据库中检索信息）。

```
if (isset($_POST['beverage']))
{
    switch($_POST['beverage'])
    {
        case 'Milk':
            print 'Milk makes you grow!';
            break;
        case 'Coffee':
            print 'Coffee does not let you sleep!';
            break;
        case 'Tea':
            print 'Tea comes from China!';
            break;
        default:
            print 'Nothing was selected';
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:08:26.070

两种方法来完成它：

首先，没有 ajax 方式的 PHP：应该有两个表单 ..一个第一个下拉列表包含从 db 预填充的数据...一旦用户提交此表单（即 javascript 提交或传统的提交按钮单击）该数据可以通过将 this 作为值传递来针对查询语句的内容进行评估...从 SELECT 语句返回的数据然后重新显示在同一页面上另一个表单的文本区域中。

其次，使用ajax来做POST，而不是使用双表单的方式，这样会更快更高效..

# c# - C# - 使用 ftp over ssh 从一台远程服务器下载文件到另一台

> ID：11745215
> 
> 赞同：0
> 
> 时间：2012-07-31T16:54:10.930
> 
> 标签：c#, ssh, ftp

我需要用 C# 将大文件（20GB+）从一台远程服务器下载到另一台远程服务器。我们已经为其他文件操作建立了 ssh 连接。我们需要以二进制模式从 ssh 会话启动 ftp 下载（这是远程服务器要求以特定格式传送文件）。问题 - 如何在 ssh 会话中发送 ftp 命令以与凭据建立连接并将模式设置为“bin”？基本上相当于使用 ssh 进行以下操作：

```
FtpWebRequest request =(FtpWebRequest)WebRequest.Create(
        @"ftp://xxx.xxx.xxx.xxx/someDirectory/someFile");

request.Credentials = new NetworkCredential("username", "password");
request.UseBinary = true;
request.Method = WebRequestMethods.Ftp.DownloadFile;

FtpWebResponse response = (FtpWebResponse)request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:35:25.033

SSH 是一个“安全的 SHell” 这就像一个 cmd 提示符，你可以给它运行命令。它不是 FTP。SSH 可以执行 FTP 实用程序或应用程序。

SSH 确实有一些叫做 SFTP（或 SSH 文件传输协议）的东西，但是 .NET（即 BCL）中没有内置的东西可以做到这一点。 `FtpWebRequest`不支持 SFTP。

尽管共享“FTP”，但它们是不同的协议并且彼此不兼容。

如果要启动 FTP 下载，则必须告诉 SSH 执行某种实用程序。如果要启动 SFTP 传输，可以发出 sftp 命令。但是，另一端需要支持 sftp。或者，您发出 scp 命令（安全副本）；但同样，另一端需要支持该协议（它不同于 SFTP 和 FTP）......

如果你想写另一端，你必须找到一个做 SFTP 或 SCP 的第三方库......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T23:25:15.510

我最喜欢的实现您需要的库是来自 ChilkatSoft 的 Chilkat *（免责声明：我只是一个付费用户，与公司无关）。*

```
Chilkat.SFtp sftp = new Chilkat.SFtp();

//  Any string automatically begins a fully-functional 30-day trial.
bool success;
success = sftp.UnlockComponent("Anything for 30-day trial");
if (success != true) {
    MessageBox.Show(sftp.LastErrorText);
    return;
}

//  Set some timeouts, in milliseconds:
sftp.ConnectTimeoutMs = 5000;
sftp.IdleTimeoutMs = 10000;

//  Connect to the SSH server.
//  The standard SSH port = 22
//  The hostname may be a hostname or IP address.
int port;
string hostname;
hostname = "www.my-ssh-server.com";
port = 22;
success = sftp.Connect(hostname,port);
if (success != true) {
    MessageBox.Show(sftp.LastErrorText);
    return;
}

//  Authenticate with the SSH server.  Chilkat SFTP supports
//  both password-based authenication as well as public-key
//  authentication.  This example uses password authenication.
success = sftp.AuthenticatePw("myLogin","myPassword");
if (success != true) {
    MessageBox.Show(sftp.LastErrorText);
    return;
}

//  After authenticating, the SFTP subsystem must be initialized:
success = sftp.InitializeSftp();
if (success != true) {
    MessageBox.Show(sftp.LastErrorText);
    return;
}

//  Open a file on the server:
string handle;
handle = sftp.OpenFile("hamlet.xml","readOnly","openExisting");
if (handle == null ) {
    MessageBox.Show(sftp.LastErrorText);
    return;
}

//  Download the file:
success = sftp.DownloadFile(handle,"c:/temp/hamlet.xml");
if (success != true) {
    MessageBox.Show(sftp.LastErrorText);
    return;
}

//  Close the file.
success = sftp.CloseHandle(handle);
if (success != true) {
    MessageBox.Show(sftp.LastErrorText);
    return;
} 
```

# javascript - 在 jQuery 方法中编写自定义属性的正确语法是什么？

> ID：11745220
> 
> 赞同：1
> 
> 时间：2012-07-31T16:54:24.063
> 
> 标签：javascript, jquery

我在变量实例化之前有一个三元组。问题是，这是为属性分配变量的错误方法。

```
$partial = $data.cell_info_box === undefined ? job_box : cell_info_box
$rel     = $($data.$partial).attr('rel');
$klass   = $($data.$partial).attr("rel").match(/job/) == null ? 'task' : 'job'; 
```

我怎样才能像演示的那样提供我的三元，但用我的初始三元产品创建可调用属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:02:04.717

根据您的评论，您想要的是`$data[$partial]`. 当您想从一个对象中获取一个值而不知道运行时之前的键名时，可以使用此语法。您可能还会看到通过使用 eval 错误地解决了这个问题，但这是正确的方法。

# apache - 如果需要，如何使用 apache .htaccess 重写 url

> ID：11745226
> 
> 赞同：1
> 
> 时间：2012-07-31T16:54:40.180
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, dokuwiki

我在[http://blabla.com/](http://blabla.com/)下运行一个 dokuwiki ，现在我有了额外的 url [http://wiki.com/](http://wiki.com/)

我想要的是将请求[http://blabla.com/test/gna](http://blabla.com/test/gna)或其他任何内容的用户重定向到[http://wiki.com/test/gna](http://wiki.com/test/gna)而不会损害 dokuwiki 的默认 .htaccess

```
<Files ~ "^([\._]ht|README$|VERSION$|COPYING$)">
    Order allow,deny
    Deny from all
    Satisfy All
</Files>

RewriteEngine on

RewriteBase /dev/

RewriteRule ^_media/(.*)              lib/exe/fetch.php?media=$1  [QSA,L]
RewriteRule ^_detail/(.*)             lib/exe/detail.php?media=$1  [QSA,L]
RewriteRule ^_export/([^/]+)/(.*)     doku.php?do=export_$1&id=$2  [QSA,L]
RewriteRule ^$                        doku.php  [L]
RewriteCond %{REQUEST_FILENAME}       !-f
RewriteCond %{REQUEST_FILENAME}       !-d
RewriteRule (.*)                      doku.php?id=$1  [QSA,L]
RewriteRule ^index.php$               doku.php 
```

只是在结尾或开头添加这样的东西根本没有任何效果：

```
Rewritecond %{HTTP_HOST} !blabla.com/
RewriteRule ^/(.*)$ http://wiki.com/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:37:51.097

尝试使用以下行：

```
# Any URL from blabla.com will be redirected to corresponding URL on wiki.com
Rewritecond %{HTTP_HOST} ^blabla.com$
RewriteRule ^(.*)$ http://wiki.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:23:26.840

尝试删除前导斜杠，apache 在通过 htaccess 文件中的重写规则传递 URI 时将其删除：

```
Rewritecond %{HTTP_HOST} blabla.com
RewriteRule ^(.*)$ http://wiki.com/$1 [L,R=301] 
```

尽管您可能希望将其添加到其他规则之上，但重定向的目标`doku.php?id=stuff`在 URL 中没有。

# sharepoint-2010 - Sharepoint 客户端模型 - 请求超时

> ID：11745231
> 
> 赞同：1
> 
> 时间：2012-07-31T16:55:03.847
> 
> 标签：sharepoint-2010, sharepoint-clientobject

我收到来自 Sharepoint 客户端托管对象模型的超时。

```
Microsoft.SharePoint.Client.ServerException: The operation has timed out. 
```

基本上，我正在批量处理 100 个更新并一次性发送它们。如果需要时间对我来说没问题，但我真的想避免超时异常。

我已经尝试过一百万种方法来增加客户端上下文中的超时时间，但都没有成功。在调用客户端上下文的 executequery 方法时，我使用反射来尝试识别共享点正在做什么。sharepoint 基本上是创建一个 HttpWebRequest 并发送它。

我以下面的代码结束，但仍然没有成功：

```
 public static void SetInfinteTimeout(this ClientContext ctx)
{
    int timeout = 10 * 60 * 1000;
    ctx.RequestTimeout = timeout;
    ctx.PendingRequest.RequestExecutor.RequestKeepAlive = false;            
    ctx.PendingRequest.RequestExecutor.WebRequest.KeepAlive = false;
    ctx.PendingRequest.RequestExecutor.WebRequest.Timeout = timeout;
    ctx.PendingRequest.RequestExecutor.WebRequest.ReadWriteTimeout = timeout;            
    System.Net.ServicePointManager.DefaultConnectionLimit = 200;
    System.Net.ServicePointManager.MaxServicePointIdleTime = 2000;
    System.Net.ServicePointManager.MaxServicePoints = 1000;
    System.Net.ServicePointManager.SetTcpKeepAlive(false, 0, 0); 
    ServicePointManager.DnsRefreshTimeout = timeout; // 10 minutes       

} 
```

但我仍然收到超时错误！
请问还有什么我想念的吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T22:39:09.287

你有没有尝试过

*   保持默认 KeepAlive (true),
*   禁用超时和
*   保持默认 MaxServicePointIdleTime 值（默认为 100 秒，但您设置为 2）。

就像：

```
public static void SetInfiniteTimeout(this ClientContext ctx)
{
    ctx.RequestTimeout = -1;  //ctx.RequestTimeout or System.Threading.Timeout.Infinite;
} 
```

另外，在您当前的配置中，您需要多少秒才能获得超时错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:29:58.757

解决方案是使用 clientcallablesettings (SPWebApplication.ClientCallableSettings)： http:
[//msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.clientcallablesettings.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebapplication.clientcallablesettings.aspx)
这有一个执行超时属性和其他相关设置。

就我而言，我需要根据以下代码在升级操作中添加它

```
using (SPSite site = new SPSite(siteURL))
using (SPWeb web = site.OpenWeb())
{
      site.WebApplication.ClientCallableSettings.ExecutionTimeout = TimeSpan.FromMinutes(60);
      site.WebApplication.ClientCallableSettings.MaxObjectPaths = 1000;
      site.WebApplication.ClientCallableSettings.MaxResourcesPerRequest = 1000;
      site.WebApplication.ClientCallableSettings.EnableStackTrace = true;
      site.WebApplication.Update();
} 
```

# objective-c - NSDictionary 到 UITableView

> ID：11745233
> 
> 赞同：0
> 
> 时间：2012-07-31T16:55:09.380
> 
> 标签：objective-c, ios

我有一个 JSON 请求得到这个：

```
bills =     (
        {
    id = 1;
    name = "Cursus Nibh Venenatis";
    value = "875.24";
},
        {
    id = 2;
    name = "Elit Fusce";
    value = "254.02";
}
); 
```

我正在为它创建一个 NSDictionary。

我正在使用 JSONKit，我想知道如何使用这些值填充我的 UITableView？谢谢你的帮助！

**编辑**

```
NSLog(@"my dictionary = %@", resultsDictionary);
my dictionary = {
bills =     (
            {
        id = 1;
        name = "Cursus Nibh Venenatis";
        value = "875.24";
    },
            {
        id = 2;
        name = "Elit Fusce";
        value = "254.02";
    }
);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:58:43.167

看起来您的`bills`字典由一组较小的字典组成。你会像这样访问它；

```
get the top Dictionary bills.
access each dictionary inside (for loop, etc) and create an array
load table view data from previously created array 
```

编辑*

```
NSDictionary *billsDictionary = [NSDictionary dictionaryWithDictionary:[resultsDictionary objectForKey:bills]];
NSMutableArray *dataSource = [[NSMutableArray alloc]init]; //make this an ivar and your tabelView's data source.
for(NSDictionary *dict in billsDictionary){
  [dataSource addObject:dict];
}
[tableView reloadData];

//then in your tableView cell
cell.textLabel.text = [[NSString stringWithFormat:@"%@", [[dataSource objectAtIndex:indexPath.row]objectForKey:@"name"]]

//Repeat for whatever else you want to add to the cell (subtitle, image, etc.) Hope this helps. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:07:26.027

似乎在结果字典中，您有一个数组。Array 中的每个对象都是字典。试用以下代码。

```
NSArray *billsArray = [resultsDictionary objectForKey:@"bills"]; 
```

提供`[[billsArray objectAtIndex:indexPath.row] objectForKey:@"name"]`您的 tableView 数据源方法`tableView: cellForRowAtIndexPath:`

# php - 多次使用 LastInsertId，PHP PDO

> ID：11745236
> 
> 赞同：2
> 
> 时间：2012-07-31T16:55:18.710
> 
> 标签：php, database, insert, pdo

我有这个注册的东西，一旦用户点击添加用户，我想要 3 个表填充数据

这些表格是：

```
users
roles
status
user_role
user_status 
```

系统必须插入如下 **用户表的数据：**

```
 username
 password 
```

**用户角色**

```
user_id
default value 
```

**用户状态**

```
user_id
default value 
```

我使用 pdo begin transaction 东西和 commit 东西来完成这项工作......当我只在两个表上使用它时效果很好，但是当我决定使用另一个表并执行相同的代码模式时，它根本不起作用。

以下是代码：

```
$this->db->beginTransaction();
        $sth = $this->db->prepare("INSERT INTO users (username, password)
        VALUES (:user,:pass)");
        $sth->execute(array(
            ':user'=> $data['user'],
            ':pass'=> Hash::create('sha256', $data['pass'], HASH)
        ));

        $sth = $this->db->prepare("INSERT INTO user_role (user_id, role_id) VALUES (:user, :role)");
        $sth->execute(array(
            ':user' => $this->db->lastInsertId(),
            ':role' => 3
        ));

        $sth = $this->db->prepare("INSERT INTO user_status (user_id, status_id) VALUES (:user, :status)");
        $sth->execute(array(
            ':user' => $this->db->lastInsertId(),
            ':status' => 1
        ));

        $this->db->commit(); 
```

你认为是什么问题，我也怀疑这是某种语法错误，但我找不到它，所以我最后的手段是问，因为我也不确定这是否适用于 3 个表。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:10:42.960

在您第一次插入后：

`$insertID = $this->db->lastInsertId();`

然后在下面`INSERTS`

```
':user' => $insertID, 
```

# css - @font-face 字体在 Mac 上的 Safari 和 Chrome 中显示模糊

> ID：11745239
> 
> 赞同：4
> 
> 时间：2012-07-31T16:55:26.170
> 
> 标签：css, cross-browser, font-face

我在我的网站上使用两种特殊字体作为标题和副标题。它们在 IE、Firefox 和 Chrome 的 PC 上运行良好。但是，在 Mac 上的 Safari 和 Chrome 中，字体显得更加大胆且略微模糊。我使用的特殊字体是 Utopia 和 Helvetica Neue Condensed Bold。我已经使用基于 otf 文件的字体松鼠生成了字体工具包。我正在使用字体松鼠生成的 CSS。[您可以在http://shapecast.benmango.co.uk](http://shapecast.benmango.co.uk/)上查看该网站。我还有截图比较了 Mac 和 PC 的不同浏览器中的结果： ![在此处输入图像描述](../Images/00132af4aa09049ea793078e6d67a38d.png)

我用于 CSS 的代码是：

```
@font-face {
    font-family: 'Utopia';
    src: url('/fonts/utopiastd-regular-webfont.eot');
    src: url('/fonts/utopiastd-regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('/fonts/utopiastd-regular-webfont.woff') format('woff'),
         url('/fonts/utopiastd-regular-webfont.ttf') format('truetype'),
         url('/fonts/utopiastd-regular-webfont.svg#Utopia') format('svg');
    font-weight: normal;
    font-style: normal;
    font-variant:normal;
}

@font-face {
    font-family: 'HelveticaNeueLTStdCnBold';
    src: url('/fonts/helveticaneueltstd-bdcn-fs.eot');
    }

@font-face {
    font-family: 'HelveticaNeueLTStdCnBold';
    src: url('/fonts/helveticaneueltstd-bdcn-fs.ttf') format('truetype'),
         url('/fonts/helveticaneueltstd-bdcn-fs.svg#HelveticaNeueLTStdCnBold') format('svg');
    font-weight: bold;
    font-style: normal;
    font-variant:normal;
} 
```

我已经在这个问题上工作了几天，但似乎没有任何进展。当我将 Helvetica Neue 粗体字体的字体粗细从正常更改为粗体时，我确实得到了改进。我还尝试将 SVG 线移到顶部，但这无济于事。

奇怪的是，在 Mac 上的 Chrome 中，当三个主要面板之一悬停在上方（在主标题下方）时，字体变得更加清晰，看起来也应该如此。不过，在 Safari 上没有任何区别。

如果有人可以提供任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T18:19:01.893

所有浏览器都以不同的方式呈现字体。尝试`-webkit-font-smoothing: antialiased;`Safari，看看它是否有所作为。另外，尝试使用相对长度单位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:30:11.533

正如 Kwon 所说，任何浏览器/操作系统都有不同的字体渲染。它甚至取决于您在操作系统级别设置的显示设置（子像素混叠）。

更令人沮丧的是，webkit/chrome 也有一些字体渲染错误，例如任何带有文本阴影的文本：[http ://code.google.com/p/chromium/issues/detail?id=23440](http://code.google.com/p/chromium/issues/detail?id=23440)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-31T05:15:49.150

尝试字体是否在 chrome 中模糊。

```
正文 {-webkit-text-stroke: 0px!important;-webkit-font-smoothing: antialiased !important;}

或者

a,p,span,h1,h2,h3,h4,h5 {-webkit-text-stroke: 0px!important;-webkit-font-smoothing: antialiased !important;}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-13T15:34:20.400

当 HTML 容器与其 HTML 内容标记相比大小不一致时，也会出现模糊效果。要解决它，请尝试固定 head 容器的大小，并确保它大于 child。

# surf - 使用 opensurf 进行特征匹配

> ID：11745242
> 
> 赞同：1
> 
> 时间：2012-07-31T16:55:47.233
> 
> 标签：surf

我正在做一个项目，我需要在同一图像中匹配冲浪功能，请帮助我如何使用 opensurf 库在同一图像中匹配冲浪功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:27:02.937

这可以通过使用 OpenSURF 库 (ipoint.cpp) 中的 getMatches 函数来完成。您通常必须从有问题的两个图像中输入相关的兴趣点。

希望这可以帮助！

# ruby-on-rails - 使用 ajax 和 rails 加载内容

> ID：11745243
> 
> 赞同：0
> 
> 时间：2012-07-31T16:55:48.463
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3, jquery

> **可能重复：**
> [如何在特定页面上显示 Ajax 微调器？](https://stackoverflow.com/questions/11063356/how-to-have-ajax-spinner-show-on-specific-page)

我有这个带有 2 个选项卡的导航菜单：

```
<div id="user_menu">
 <ul class="nav nav-tabs">
  <li class="active"><%= link_to "Group1", group1_friends_path(@user), :remote => true %></li>
  <li><%= link_to "Group2", group2_friends_path(@user), :remote => true %></li>
 </ul>
</div> 
```

我已经设法让 Ajax 呈现某些部分。现在，当我单击选项卡时，部分会加载到我的目标占位符 div 中。

**tab.js：**我放在assest/javascripts/

```
$(function() {
    $('#user_menu a').click(function (e) {
        $('ul.nav-tabs li.active').removeClass('active')
        $(this).parent('li').addClass('active')
        $("#friends-data").fadeOut(function(){
            $("#loading-indicator").fadeIn();
        });
    });
}); 
```

我不喜欢同时显示所有内容并让用户等待所有 http 请求呈现。我想显示一个加载栏，当所有 http 请求完成后，隐藏加载栏并显示内容。

Right Know 更具有戏剧性而非功能性。任何帮助，示例将不胜感激。

# javascript - jquery/javascript 或 css - 仅当显示可见时才用于第 n 个孩子的 css

> ID：11745244
> 
> 赞同：1
> 
> 时间：2012-07-31T16:55:50.767
> 
> 标签：javascript, jquery, css, css-selectors

我正在尝试使用 jquery 来设置模式 (3n+1) 的所有可见元素的类，但它似乎没有选择我预期的方式。我想知道我的语法是否错误。这是我的代码：

```
$('.filterElement:visible:nth-child(3n+1)').addClass('firstInRow'); 
```

我按照这里建议的方法：

[使 css nth-child() 只影响可见](https://stackoverflow.com/questions/6629576/make-css-nth-child-only-affect-visible)

有没有办法用纯css做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:59:06.583

> 有没有办法用纯css做到这一点？

我不认为有。CSS 有用于元素属性的选择器，但没有用于 CSS 属性（在选择器选择元素后应用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:40:47.563

我找到了一种方法来做到这一点——尽管它似乎可以简化。

CSS：

```
.element { margin-left: 10px; }
.element:nth-child(3n+1){ margin-left: 0; }
.element.firstInRow { margin-left:0 !important; }
.element.std { margin-left:15px !important; } 
```

JAVASCRIPT

```
.filterButton.click(function(){
  $('.element').removeClass('firstInRow, std');
  if ($('.element').hasClass('.hideMe')){
    $(this).hide();
  }
  setMargins();
});

function setMargins(){
  $('.element:visible').each(function(i){
    if (i%3 == 0){
    $(this).addClass('firstInRow');
    } else {
    $(this).addClass('std');
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:05:06.300

当有隐藏物品时，nth-child 似乎玩得不好……期间。你可以在这里看到一个例子：http: [//jsfiddle.net/anAgent/FzBWn/](http://jsfiddle.net/anAgent/FzBWn/)。单击“测试 2”按钮以针对包含隐藏值的行集合运行选择器。下面的 jQuery 代码是您如何选择所需内容的方法。

**CSS**

```
.container {float:left;}
.row { display:block; border: 1px solid black; padding:10px; width:100px;}
.row.odd {border: 2px dotted red;background-color:yellow;}
.hidden {visibility:hidden;display:none;} 
```

**HTML**

```
<div class="container"> 
    <div id="1" class="row">Highlighted</div>
    <div id="2" class="row"></div>
    <div id="3" class="row hidden">I shouldn't be highlighted</div>
    <div id="4" class="row"></div>
    <div id="5" class="row">Highlighted</div>
    <div id="6" class="row"></div>
    <div id="7" class="row hidden">I shouldn't be highlighted</div>
    <div id="8" class="row"></div>
    <div id="9" class="row">Highlighted</div>
    <div id="10" class="row"></div>
    <div id="11" class="row"></div>
</div>
<div class="container"> 
    <div id="1" class="row">Highlighted</div>
    <div id="2" class="row"></div>
    <div id="3" class="row "></div>
    <div id="4" class="row">Highlighted</div>
    <div id="5" class="row"></div>
    <div id="6" class="row"></div>
    <div id="7" class="row">Highlighted</div>
    <div id="8" class="row"></div>
    <div id="9" class="row"></div>
    <div id="10" class="row">Highlighted</div>
    <div id="11" class="row"></div>
</div> 
```

**jQuery** 获取所有可见项目，然后查找它是否是列表中的第三个。

```
$('.row:visible').each(function(idx) {
    $(this).toggleClass('odd',(idx%3 == 0));
}); 
```

# python - 将我的 web2py 应用程序上线

> ID：11745246
> 
> 赞同：2
> 
> 时间：2012-07-31T16:55:59.020
> 
> 标签：python, web2py

我一直在寻找一个简单的指南，但找不到任何东西。我刚刚完成了我的 web2py 应用程序，我希望能够从另一台计算机访问它以进行测试。谁能给我一个关于如何做到这一点的简单指南？我也在windows机器上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:38:58.493

要使用内置的火箭服务器启动 web2py 应用程序，在您进入 web2py 的应用程序目录`cmd.exe`后，在一个窗口中就像这样简单`cd`

```
python web2py.py --ip 172.25.116.10 --port 8000 
```

`172.25.116.10`您正在侦听的地址在哪里，而 8000 是 tcp 端口。

# php - 为什么我的 symfony2 fosUserBundle 找不到 check_path？

> ID：11745247
> 
> 赞同：2
> 
> 时间：2012-07-31T16:56:04.543
> 
> 标签：php, security, session, symfony, fosuserbundle

我正在尝试在我的 symfony 项目中实现 fosUserBundle。

我已经成功安装了一个配置好的包。

但是现在，当我登录时，我收到以下错误消息：

> 您必须在安全防火墙配置中使用 form_login 配置要由防火墙处理的检查路径。

为什么会这样？我应该去哪里找那个铅？

谢谢，您将在安全文件下方找到：

```
security:
    encoders:
        "FOS\UserBundle\Model\UserInterface": sha512

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        fos_userbundle:
            id: fos_user.user_manager
        in_memory:
            users:
                user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        # Firewall pour les pages de connexion, inscription, et récupération de mot de passe
        login:
            pattern:   ^/(login$|register|resetting)  # Les adresses de ces pages sont login, register et resetting
            anonymous: true                           # On autorise bien évidemment les anonymes sur ces pages !

        admin:
            switch_user:        true
            context:            user
            pattern:            /admin(.*)
            form_login:
                provider:       fos_userbundle
                login_path:     /login
                use_forward:    false
                check_path:     /admin/login_check
                failure_path:   null
                use_referer:    true
            logout:
                path:           /admin/logout
                target:         /login_path
    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN } 
```

[其余文件与官方文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/1.2.0/Resources/doc/index.md)非常相似

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:40:31.550

您是否尝试删除“access_control”部分中的第一行？因为您已经在登录防火墙中指定了 anonymous:true 。

# ruby-on-rails - 如何处理生成内容依赖于当前用户授权的情况？

> ID：11745248
> 
> 赞同：0
> 
> 时间：2012-07-31T16:56:03.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller, implementation

我正在使用 Ruby on Rails 3.2.2，并且由于我的系统实现，我想生成不同的输出（在视图中）和/或检索不同的记录（在控制器中）取决于“访问者*”*用户授权（对于例如，授权*可能*取决于“访问*”*用户*是否*是当前“访问者*”*用户）。

 **我该如何处理这种情况？也就是说，例如，为了处理用户是否是当前用户并显示不同的内容，我应该为每种情况实现两个视图文件和/或控制器操作，还是应该`if else`直接在视图文件中使用语句和/或在控制器动作中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:04:17.343

我通常在视图中使用 if else 语句，如果语句之间有很多标记以保持干净，则呈现部分语句。

这是一种风格选择，因此如果您发现您在每个页面上都创建了大量条件，那么您可能需要在控制器中重新考虑您的组织，甚至创建一个新资源。对于简单的事情，比如如果用户是管理员，则添加“编辑”或“删除”按钮，我会在视图中使用条件。

对于 .html.erb 标记，您可以像这样执行普通的 if/else 块：

```
<% if <condition> %>
  <%= render 'partial_name' %>
<% else %>
  <p>Some other content</p>
<% end %> 
```

条件是您的条件，例如`current_user? @user`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:46:50.983

我建议的一种更简洁的方法是为用户创建不同的角色并将它们分组。因此，对于该特定组，您可以拥有单独的视图文件和控制器。这种方法的一个优点是它很容易阅读代码，我们可以很容易地理解代码。我们可以轻松地对页面进行更多控制，而不必担心其他用户。我们甚至可以避免对许多过滤器的需要。但是如果只有两种类型的用户，则可以使用 if else 语句轻松管理，因此选择正确的方法也将取决于问题。**

# nhibernate - NHibernate 的二级缓存如何与连接提供程序一起工作？

> ID：11745250
> 
> 赞同：1
> 
> 时间：2012-07-31T16:56:17.260
> 
> 标签：nhibernate

我了解 NHibernate 的二级缓存在 SessionFactory 级别工作。我在我的 NHibernate 配置中使用连接提供程序来处理我的多租户环境。我想知道二级缓存如何与连接提供者交互。也就是说，它是智能地为每个单独的连接字符串维护一个缓存，还是所有连接都共享同一个缓存？

显然，共享同一个缓存是一个巨大的禁忌，因为同一个查询会根据它所访问的数据库返回不同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:18:37.403

> 二级缓存的生命周期与会话工厂相关，而不是与单个会话相关。一旦实体通过其唯一 ID 加载并且二级缓存处于活动状态，则该实体可用于（同一会话工厂的）所有其他会话。

所以第二级只能通过同一个会话工厂的会话工作。

请查看[NHibernate 中的一级和二级缓存以](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)获取更多详细信息

# aptana - Aptana-Studio 安装-更新错误：jira.bat 不存在

> ID：11745251
> 
> 赞同：0
> 
> 时间：2012-07-31T16:56:18.567
> 
> 标签：aptana

我想更新我的 Aptana-Studio 3 但总是收到以下错误：

> 安装项目会话上下文时出错：(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Install,operand=null --> [R]org.swift.jira.cli 2.5.0.1335554239，动作=org.eclipse.equinox.internal.p2.touchpoint.eclipse.actions.ChmodAction）。操作 chmod 失败 - 文件 D:\Aptana\Aptana Studio 3\plugins\org.swift.jira.cli_2.5.0.1335554239\jira.bat 不存在。

我查了一下，jira.bat 不存在。如果我没记错的话，我在几个月前安装 Aptana_Studio_3_Setup_3.1.2.exe 时确实遇到了同样的问题，但由于它似乎可以工作，我对此并不在意。

但是，我想解决它。我能做些什么 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:16:53.260

你会在 jira.appcelerator.org 上提交一个关于这个的错误吗？这似乎是 Studio 开发人员应该解决的问题。

# php - 使用加密、代理密钥等混淆 GET id 变量

> ID：11745253
> 
> 赞同：4
> 
> 时间：2012-07-31T16:56:24.177
> 
> 标签：php, mysql, encoding, obfuscation

我正在开发一个新的应用程序，为了掩盖它处于起步阶段的感觉，我想掩盖任何可能揭示这一点的实例，例如
`$postId=000001`. 相反，我们会得到`$postId=sH4d6s8d`. 一些简短但独特的东西。

我已经阅读了其他一些问题，不幸的是，大多数答案都涉及安全问题。应用程序安全在这里不是问题，我只是在寻找一种方法来通过 GET 传递行 id 的模糊表示，并让该 URL 可共享，这意味着多个用户机器可以解释混淆。

我浏览了 MySQL、XOR 的代理键，但我很陌生，我的理解很快就糊涂了。这里有什么合适的解决方案？有什么例子吗？谢谢。

**更新**

决定了一个简单的 XOR + urlencode 解决方案。IE：

```
$v = urlencode($var ^ $key)
$v = (urldecode($v) ^ $key) 
```

从到目前为止的测试来看，这对我的目的来说似乎很好。但是，看起来 Firefox 会自动解码`urlencode`以进行显示，违背了这个想法的全部目的：

```
$v = r%5CQXr%5CQXr%5CP
<a href="whatevs.php?id=$v">link</a>

// Firefox renders the below anywhere link is visible (besides source)

whatevs.php?id=r\QXr\QXr\P 
```

这很烦人。虽然 id 仍然是模糊的，并且源仍然是“传统的”urlencoded，但这些字符在 url 中看起来并不自然。但真正的问题是任何复制/粘贴链接的人都不会获得正确的资源。

有一个简单的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:28:54.977

你说这不是一个安全问题，但你为什么要保护你的 GET 参数？如果您的目标是隐藏真实值，那么这是一个安全问题^^ 如果您只想在数字和混淆代码之间创建双射，您可以使用像 base64_encode 这样的可逆函数，但任何人都可以对其进行解码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:53:04.290

Xor + 将其转换为 base 36 + 反转字符串？

```
$key = 123456789;
$post_id = (1 ^ $key);
$post_id = strrev(base_convert($post_id, 10, 36));
echo $post_id; 
```

# jquery - 在页面上创建动态覆盖仍然会阻止鼠标活动

> ID：11745258
> 
> 赞同：0
> 
> 时间：2012-07-31T16:56:45.900
> 
> 标签：jquery, css, html

我有一个表单，在单击“登录”时向下滑动，在“关闭”时向上滑动。我想在表单下方和页面上方有一个半透明的覆盖，这将使页面的其余部分变暗并且对鼠标活动无效。这是标记：

```
<body>
<div id="container" style="position:absolute;with:100%;height:100%">
<div id="overlay"></div>
<form action="#" method="post">Some Form</form>
</div> 
```

叠加层的 CSS：

```
#overlay{
width:100%;
height:100%;
background-color:#002aff;
opacity:.7;
position:relative;
z-index:1;
display:none;
} 
```

我正在使用以下方法调用叠加层和表单：

```
$(document).ready(function() {

// Expand Panel
$("#open").click(function(){
    $("div#overlay").slideDown("fast");
    $("div#panel").slideDown("400");

}); 

// Collapse Panel
$("#close").click(function(){
    $("div#overlay").slideUp("fast");
    $("div#panel").slideUp("300");  
});     

// Switch buttons from "Log In | Register" to "Close Panel" on click
$("#toggle a").click(function () {
    $("#toggle a").toggle();
});     

}); 
```

问题是这使我的页面的其余部分在整个页面中都处于惰性状态（就链接而言没有鼠标活动），即使覆盖层不活动也是如此。作为对此的解决方案，我尝试将 .addClass() 和 .remove() 用于定义类中的属性的“#overlay”。但这仍然使我的页面在加载时甚至在类被删除之后都无法点击......任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:07:58.793

尝试在单击时更改 z-index 规则，因此在未发生覆盖时它为 -1。

# joomla - 如何将参数传递给从文章加载的 joomla 模块

> ID：11745261
> 
> 赞同：5
> 
> 时间：2012-07-31T16:56:52.570
> 
> 标签：joomla, parameters, module

我以前以这种方式从 Joomla 文章中添加了 Joomla 模块：`{loadmodule mod_name}`但这次我需要从中传递参数。

如何将文章中的参数传递给 Joomla 模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:03:28.757

您需要修改或克隆 Joomla 插件`loadmodule`，因为它不处理除了模块名称之外的参数。如果您精通 PHP，这并不是特别困难（假设您不介意通过一些 Regex 工作弄脏您的手），但我建议您克隆它并以这种方式使用它：

1.  将文件夹复制`\plugins\content\loadmodule`到`\plugins\content\Myloadmodule`（及其所有文件）
2.  在*新*文件夹中，将`loadmodule.php`和重命名`loadmodule.xml`为`myloadmodule.php`和`myloadmodule.xml`。 *这些*是您将完成所有工作的文件。
3.  在这两个文件中，将出现的地方替换为`loadmodule`, `myloadmodule`（***区分大小写***）
4.  在`myloadmodule.php`中，从第 36 行左右开始，使用 Regex 去除`{loadposition xxx}`正在处理的内容。您需要修改此正则表达式以获取您`{myloadmoduel blah-blah-blah}`在文章中使用时要提供的参数。
5.  在表 '_extensions' 中找到数据库条目，`loadposition`并为`myloadposition`. （除非您想编写和安装程序）
6.  最后，您需要使用新参数渲染模块 - 我无法开始提供帮助，因为我不知道您将要执行哪些模块或参数工作，但是这个[renderModule](http://docs.joomla.org/JModuleHelper/renderModule)文档会有所帮助。

我想我已经涵盖了所有内容，但这应该足以为您完成大部分工作。完成后，使用`{myloadposition ...}`代替`{loadposition ...}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T22:23:49.853

我将提供有关上一个答案的更多详细信息，以便能够将参数传递给标签为 {loadmodule mod_name,param} 的模块 GDP 给出的解决方案工作正常：重写内容插件（例如 myloadmodule）既简单又快捷，按照上一个答案中的步骤 1 到 5 进行操作。对我来说，问题在于步骤 6：如何将参数放入模块中，以及如何在模块中检索 de 参数。

第 7 步：如何为模块的“渲染”提供参数

在创建的插件中（基于 loadmodule），您必须找到包含以下代码的行：

```
echo $renderer->render($module, $params); 
```

在此行之前，您可以将参数放入 $params 参数中，但模块的“render”仅检索带有键“params”的参数，使用 json 格式。因此，要将参数传递给渲染函数，您可以执行以下操作：

```
$param = array('param_name' => 'value');  // param_name = value
$params = array('params' => json_encode($param)); // 'params' (String) should be decoded by the render of the module
echo $renderer->render($module, $params); 
```

第 8 步：如何在模块中检索参数

在模块的助手中，您可以使用 $params 变量检索参数：

```
$value = $params->get('param_name'); 
```

要了解帮助程序，请阅读本教程：[http ://docs.joomla.org/J3.3:Creating_a_simple_module/Developing_a_Basic_Module](http://docs.joomla.org/J3.3%3aCreating_a_simple_module/Developing_a_Basic_Module)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-17T20:42:41.110

我用谷歌搜索了同样的问题并找到了你的问题。我知道它很旧，但我的发现可能对其他人有所帮助。现在有插件允许嵌入模块并允许您将参数传递给它。我的选择是[Module Plant](http://www.j-plant.com/free-extensions/module-plant.html)。

# windows-runtime - MFT 自定义图像过滤器

> ID：11745262
> 
> 赞同：0
> 
> 时间：2012-07-31T16:56:53.887
> 
> 标签：windows-runtime, windows-store-apps, ms-media-foundation

我目前正在开发一个 Metro Style 应用程序，它使用 MFT（媒体基础转换）将网络摄像头的视频流过滤成灰度，如[本](http://code.msdn.microsoft.com/windowsapps/Media-Capture-Sample-adf87622)示例所示。

但是，现在我想应用其他类型的滤镜，例如曝光、色调、亮度、纹理、[晕影](http://en.wikipedia.org/wiki/Vignetting)等。[这个](https://stackoverflow.com/questions/9858144/how-to-apply-image-effects-like-edge-detection-oncamera-stream-in-windows-8-app)答案说我应该修改 TransformChroma 方法来实现这一点。不幸的是，我不知道如何获得 Y 值，我只能获得 U 和 V。**如何获得 NV12、YUY2 和 UYVY 格式的 Y 值？**

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:42:02.857

您需要更改方法的签名（一个 poto 采用另一个参数并修改 TransformImage_UYVY、TransformImage_YUY2 和 TransformImage_NV12 方法以将该参数传递给更新的方法。不过，您需要弄清楚如何为自己提取该值。例如，查看下面的这段代码，您可以看到如何提取 U 和 V 值，并且 Y 值被分成两个字节 - 您需要执行一些位逻辑来连接这些。您可以找到这些格式的描述在线，例如[这里](http://www.fourcc.org/yuv.php)。

```
// Byte order is U0 Y0 V0 Y1
// Each WORD is a byte pair (U/V, Y)
// Windows is little-endian so the order appears reversed.
BYTE u = pSrc_Pixel[x] & 0x00FF;
BYTE v = pSrc_Pixel[x+1] & 0x00FF;

TransformChroma(mat, &u, &v); 
```

# string - 在 AS3 中动态调用属性

> ID：11745264
> 
> 赞同：1
> 
> 时间：2012-07-31T16:56:56.670
> 
> 标签：string, actionscript-3, flash, dynamic, properties

我想通过 a 动态`Class`调用`Property`a `String`。在下面的代码中，我可以通过 a 动态`Class`调用`Function`a `String`。

```
var myClass:Class = getDefinitionByName("myPackage.MyClass") as Class;
myClass["myStaticMethod"](); 
```

其中`MyClass`定义为：

```
package myPackage {
    public class MyClass {
         public function MyClass() {}
         public function myMethod():void {};
         public static function myStaticMethod():void {};
         public static function get myProperty():Object { return null; }
    }
} 
```

但是， a `Property`，例如`MyClass.myProperty`不是 a `Function`。所以，

```
var myClass:Class = getDefinitionByName("myPackage.MyClass") as Class;
myClass["myProperty"](); 
```

引发错误：`TypeError: Error #1006: value is not a function`因为`myProperty`不是`Function`.

有没有办法通过`String`s 动态地做到这一点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:16:31.230

为了解决这个问题，我只需`()`要从代码中删除 。也就是说，新代码如下所示：

```
var myClass:Class = getDefinitionByName("myPackage.MyClass") as Class;
myClass["myProperty"]; // This works. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T07:56:05.647

亚历克斯的答案确实可以正常工作，但前提是您正确编写了字符串。否则，您会收到此错误：`TypeError: Error #1006: value is not a function.`为避免这种情况，您可以尝试测试是否在使用之前定义了属性或方法。像这样：

```
if(myClass["myProperty"] != undefined) 
{
...
} 
```

无论如何，在您的具体示例中，您正在请求一个吸气剂，这就是您必须`()`从源中删除的原因。如果您需要一种方法，我还建议您将该方法另存为函数：

```
var myFunction: Function = myClass["theFunction"]; 
```

然后使用`call`或`apply`方法。

```
myFunction.call(null, myParam); 
```

如果您有兴趣研究对象具有的所有方法并将它们与字符串进行比较。还要考虑：

```
var child:Sprite = new Sprite();
var description:XML = describeType(child);
var methodList: XMLList = description.descendants('method'); 
```

`<method/>`节点的属性是：

*   **name**：方法的名称。
*   **declareBy**：包含方法定义的类。
*   **returnType**：方法返回值的数据类型。

我希望这会有所帮助，如果你觉得它有用，请告诉我。

# function - Lua 中的 LZW 数据压缩

> ID：11745265
> 
> 赞同：0
> 
> 时间：2012-07-31T16:56:56.907
> 
> 标签：function, dictionary, lua, compression, lzw

> **可能的重复：**
> [Lua 中的 LZW 压缩](https://stackoverflow.com/questions/11744573/lzw-compression-in-lua)

这是我在 Lua 中使用 LZW 压缩方法压缩数据的代码。我的问题是该函数返回字符“T”，而不是返回完整的压缩字符串“TOBEORNOTTOBEORNOT”。谢谢！

```
 function compress(uncompressed)
 local dict_size = 256
 local dictionary = {}
   w = ""
   result = {}
     for i = 1, #uncompressed do
       local c = string.sub(uncompressed, i, i)
       local wc = w .. c
       if dictionary[wc] == true then
           w = wc
       else
           dictionary[w] = ""
           dictionary[wc] = dict_size
           dict_size = dict_size + 1
           w = c
       end
     if w then
       dictionary[w] = ""
     end
     return w
   end
 end

 compressed = compress('TOBEORNOTTOBEORTOBEORNOT')
 print(compressed) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:07:26.123

只是一个提示：你`return w`在 for 循环中

**编辑**一些解释

如果您在循环中返回结果，则循环将只进行一次迭代。在第一次迭代结束时，您的函数将完成。这是没有意义的。所以你的 return 语句应该在 for 循环之后。

此外，您声明一个变量`result = {}`然后从不使用它是可疑的。

因此，我建议您将 return 语句放在循环之后，并在每次迭代结束时打印变量的值（您将 print 语句放在`return`现在的位置），这样您就可以看到实际发生了什么。

# regex - 正则表达式排除括号符号

> ID：11745266
> 
> 赞同：-1
> 
> 时间：2012-07-31T16:56:59.320
> 
> 标签：regex

我正在尝试使用 RegEx 查找 OO-calc 中的所有单元格：[RB]Condition=New

RB 部分是必需的，因为如果未指定其他单元格可能会被捕获。

可以工作的正则表达式是：[RB]Condi.*

但是括号被视为表达式的一部分，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:01:15.120

使用转义字符将其视为实际字符。例如`\[`会找到所有`[`. 我认为您正在寻找的正则表达式是`\[RB\]Condition=New`*. 您拥有的原始正则表达式会找到`RCondition=New`和`BCondition=New`.

*我不熟悉 OO-calc，所以我不完全确定我理解你的意思。

# jquery - jQuery 真正支持哪些 CSS3 选择器，例如 :nth-last-child()？

> ID：11745274
> 
> 赞同：12
> 
> 时间：2012-07-31T16:57:15.190
> 
> 标签：jquery, css, jquery-selectors, css-selectors

根据[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)我们可以在 jQuery 中使用大量的 CSS 选择器，但是`:nth-last-child()`这里没有提到 eg。但是，当我测试以下内容时（使用来自 Google 的 jQuery 1.7.1），它实际上适用于 Firefox、Chrome 和 IE 9，但不适用于 IE 8 仿真模式下的 IE 9：

```
$('li:nth-last-child(2)').css('color', 'red'); 
```

那么发生了什么？看起来好像 jQuery 生成了 CSS 代码，`li:nth-last-child(2) { color: red }`并且以某种方式注入了它，然后在支持使用的选择器的浏览器上运行良好。但这很奇怪。

最重要的是，是否有一些技巧可以让 jQuery 在所有浏览器上都支持此类选择器？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-31T17:05:45.490

[虽然 jQuery 在其主页上](http://jquery.com)宣传符合[Selectors level 3](http://www.w3.org/TR/css3-selectors)标准，但它并没有完全实现该规范。在其自己的[选择器](http://api.jquery.com/category/selectors)文档中，它阐明了它“[借用] CSS 1-3，然后[添加]它自己的”选择器。¹

从 jQuery 1.9 开始，[Sizzle](http://sizzlejs.com)（其底层选择器库）几乎支持 3 级标准中的所有选择器，但以下情况除外：

*   jQuery 不能选择任何伪元素，因为[它们是文档树的基于 CSS 的抽象，无法通过 DOM 表达](http://www.w3.org/TR/css3-selectors/#pseudo-elements)。

*   jQuery 无法解析动态伪类，例如[`:link`/`:visited`](http://www.w3.org/TR/css3-selectors/#the-link-pseudo-classes-link-and-visited)用于超链接和[`:hover`，`:active`以及`:focus`](http://www.w3.org/TR/css3-selectors/#the-user-action-pseudo-classes-hover-act)用于用户交互。后一组伪类尤其是基于状态而不是基于事件的，因此当元素*进入*和*离开*这些状态时，您需要使用事件处理程序而不是伪类来运行代码。请参阅[此答案](https://stackoverflow.com/questions/11703241/does-css-have-a-blur-selector-pseudo-class/11703334#11703334)以获取解释。

*   jQuery 也无法解析[命名空间前缀](http://www.w3.org/TR/css3-selectors/#selector-syntax)，因为它不支持[CSS 中的命名空间](http://www.w3.org/TR/css3-namespace)。

以下 3 级选择器[在 jQuery 1.9 和更新版本中实现](http://blog.jquery.com/2013/01/15/jquery-1-9-final-jquery-2-0-beta-migrate-final-released)，但*不是*在jQuery 1.8 或更早版本²中实现：

*   [`:target`](http://www.w3.org/TR/css3-selectors/#target-pseudo)
*   [`:root`](http://www.w3.org/TR/css3-selectors/#root-pseudo)
*   [`:nth-last-child()`](http://www.w3.org/TR/css3-selectors/#nth-last-child-pseudo)
*   [`:nth-of-type()`](http://www.w3.org/TR/css3-selectors/#nth-of-type-pseudo)
*   [`:nth-last-of-type()`](http://www.w3.org/TR/css3-selectors/#nth-last-of-type-pseudo)
*   [`:first-of-type`](http://www.w3.org/TR/css3-selectors/#first-of-type-pseudo)
*   [`:last-of-type`](http://www.w3.org/TR/css3-selectors/#last-of-type-pseudo)
*   [`:only-of-type`](http://www.w3.org/TR/css3-selectors/#only-of-type-pseudo)

此外：

*   [`:lang()`](http://www.w3.org/TR/css3-selectors/#lang-pseudo)，在 CSS2 中引入，也不见了。

您的选择器似乎在 Firefox、Chrome 和 IE9 中工作的原因是 jQuery`document.querySelectorAll()`在回退到 Sizzle 之前首先将选择器字符串传递给本机实现。由于它是一个有效的 CSS 选择器，`document.querySelectorAll()`将成功返回一个节点列表供 jQuery 使用，从而避免使用 Sizzle。

如果`document.querySelectorAll()`失败，jQuery 会自动回退到 Sizzle。有许多情况可能导致它失败：

*   选择器无效、不受支持或无法使用（有关详细信息，请参阅[选择器 API 规范](http://www.w3.org/TR/selectors-api)）。

*   该`document.querySelectorAll()`方法本身不受支持（jQuery 实际上用一个简单的 if 语句对此进行了测试，因此它不会在这个词的意义上*失败*，但你明白了）。

在您的情况下，虽然 IE9 和 IE8 实现了`document.querySelectorAll()`，但 IE8 不支持`:nth-last-child()`. 由于 jQuery/Sizzle 也没有实现`:nth-last-child()`，因此没有可使用的回退行为，导致 IE8 完全失败。

如果您至少无法将 jQuery 更新到 1.9（向后兼容的发布分支），您始终可以使用自定义选择器扩展来自己实现缺少的伪类。但是，由于 jQuery 1.9 在保持与旧 IE 版本的兼容性的同时增加了对上述选择器的支持，因此如果您需要兼容性，最好至少更新到该版本。

* * *

¹ [它确实支持`:contains()`, 最后在[该规范的旧 CR 修订版中](http://www.w3.org/TR/2001/CR-css3-selectors-20011113)定义，后来被删除，以及`:not()`从标准扩展。[这个问题](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css)涵盖了 jQuery 的实现和当前标准之间的差异。]

² [A few other selectors (like the `+` and `~` sibling combinators, `:empty`, `:lang()` and some CSS2 attribute selectors) were going to be dropped as well during jQuery's early development, just because [John Resig didn't think anybody would use them](http://ejohn.org/blog/selectors-that-people-actually-use). Almost all of them made it into the final release after some more tests were made available. `:lang()` was the only one that never made it into any release before 1.9, as stated above.]

# c - 我应该如何组织这个 C 项目

> ID：11745275
> 
> 赞同：0
> 
> 时间：2012-07-31T16:57:16.943
> 
> 标签：c

我正在用 C 语言做这个编程作业。但我对如何组织它感到困惑。

所以，情况就是这样。我有两个树实现，并在两个单独的头文件中声明它们的结构/包含/函数原型等。然后我有两个实现的两个 c 源代码。现在问题来了。我有一个用于树 ADT 的测试 c 文件（只有一个用于运行测试的主要功能）。由于这两个实现将使用相同的测试。如何避免制作同一个 main.c 文件的两个副本？当我包含树 implementation1 的头文件时，我可以做`gcc Tree_implementation1.c main.c`. 但是要执行 implementation2，我必须回到主源文件并手动将 include 更改为 tree implementation2，然后我可以使用相同的编译命令。我如何解决这个问题以仅使用一个 main.c 在两个实现之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:59:35.673

使用预处理器和可以在命令行上设置的常量：

在你的 main.c 中：

```
#ifdef TREE_IMPL1
#include "TreeImplementation1.h"
#else
#include "TreeImplementation2.h"
#endif

// ...

int main(int argc, char **argv)
{
#ifdef TREE_IMPL1
    // code for testing TreeImplementation1
#else
    // code for testing TreeImplementation2
#endif
} 
```

在命令行上编译、传递或省略`TREE_IMPL1`，或在 IDE 中设置时：

```
gcc -DTREE_IMPL1 main.c ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:00:03.517

您的实现是否具有相同的名称？他们不应该。

如果（或何时）它们没有相同的名称，您可以只包含两个标题`main.c`并根据某些预处理器指令测试其中一个。

```
//main.c
#include "Tree_implementation1.h"
#include "Tree_implementation2.h"

int main()
{
#ifdef TEST_FIRST
   testFirstTree();  //declared in Tree_implementation1.h
#else
   testSecondTree();  //declared in Tree_implementation2.h
#endif
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:10:10.763

您的问题的另一个解决方案是使用动态界面。像这样工作：

```
#include "Imp_1.h"
#include "Imp_2.h"

typedef void (*TreeFunctionType1)(Tree,param);
typedef void (*TreeFunctionType2)(Tree);

typedef struct ITree
{
    TreeFunctionType1 func1;
    TreeFunctionType2 func2;
}ITree;

static ITree _Itree={0};

void SetImp(TreeFunctionType1 f1,TreeFunctionType2 f2)
{
    tree.func1 = f1;
    tree.func2 = f2;
}

/*Use only this functions in your Tests code*/
//{
void Func1(Tree tree,Param param)
{
    (*_Itree.func1)(tree,param);
}

void Func2(Tree tree)
{
    (*_Itree.func2)(tree);
}
//}

int main(int argc, char const *argv[])
{
    SetImp(Imp_1_f1,Imp_1_f2);
    TestCode();
    SetImp(Imp_2_f1,Imp_2_f2);
    TestCode();
    return 0;
} 
```

# c# - 混合对数据的影响

> ID：11745277
> 
> 赞同：1
> 
> 时间：2012-07-31T16:57:26.833
> 
> 标签：c#, wpf, expression-blend

在表达式混合（wpf）中对数据中的文本有效果（淡入>淡出>淡入）吗？

例子：

我有包含数据的表（比如说 SQL）：

姓名：杰克

姓名：琼

名称：翡翠

我该怎么做才能让 Jack 显示 - 5 秒后 -> Jack 会淡出，然后 Jhon 会淡入......等等。

我知道如何连接 sql 并编写 c# 类并在 wpf 上使用它，但是我怎样才能从示例中获得效果呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:29:10.700

这是一个实现它的例子

一个简单的数据模型

```
 public class ModelList : List<string>
    {
        public ModelList()
        {
            Add("John");
            Add("Jack");
            Add("Sue");
        }

        public int CurrentIndex = 0;
        public string CurrentItem
        {
            get
            {
                return this[CurrentIndex];
            }
        }
    } 
```

你的主窗口

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        void ContinueAnimation()
        {
            ModelList list = Resources["ModelList"] as ModelList;
            if ( list.CurrentIndex < (list.Count -1))
            {
                list.CurrentIndex += 1;
                Storyboard b = Resources["FadeOut"] as Storyboard;
                b.Begin();
            }
        }

        private void Start_Click(object sender, RoutedEventArgs e)
        {
            ContinueAnimation();
        }

        private void FadeOut_Completed(object sender, EventArgs e)
        {
            ContinueAnimation();    
        }

    } 
```

您的主窗口 xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:app="clr-namespace:WpfApplication1"
        Title="MainWindow"
        Width="1000"
        Height="1000">
    <Window.Resources>
        <app:ModelList x:Key="ModelList" />
        <Storyboard x:Key="FadeOut" x:Name="FadeOut" Completed="FadeOut_Completed">
            <DoubleAnimation Duration="0:0:0.5"
                             Storyboard.TargetName="MyLabel"
                             Storyboard.TargetProperty="Opacity"
                             To="0" />
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MyLabel" Storyboard.TargetProperty="Text">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.5" Value="{Binding Source={StaticResource ModelList}, Path=CurrentItem}" />
            </ObjectAnimationUsingKeyFrames>
            <DoubleAnimation BeginTime="0:0:0.5"
                             Duration="0:0:1"
                             Storyboard.TargetName="MyLabel"
                             Storyboard.TargetProperty="Opacity"
                             To="1" />
        </Storyboard>
    </Window.Resources>
    <StackPanel>

        <TextBlock Name="MyLabel"
                   Width="100"
                   Height="24"
                   Background="AliceBlue"
                   Text="{Binding Source={StaticResource ModelList},
                                  Path=CurrentItem}" />

        <Button Name="Start"
                Height="30"
                HorizontalAlignment="Left"
                Click="Start_Click">
            Start
        </Button>

    </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:00:55.093

如果您有表情混合，您可以创建一个故事板并在故事板的不同时间设置不透明度。当应用于您的文本时，它将淡入淡出。

您可以挂钩[Timeline.Completed 事件](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.completed.aspx)，然后将文本设置为下一个人并重新启动动画。我认为该页面上的示例也会对您有所帮助。

# c# - 易于使用的 C# 强类型 JSON 库

> ID：11745278
> 
> 赞同：0
> 
> 时间：2012-07-31T16:57:32.020
> 
> 标签：c#, .net, json, oop, list

我需要一个易于设置的 C# .NET JSON 库，它可以很好地与强类型列表和字典一起工作。我一直在使用[fastJSON](http://www.codeproject.com/Articles/159450/fastJSON)，它轻巧便携。然而，这些方法`ToJSON`并不`ToObject`总是适用于强类型对象，例如`List<string>`. 我需要一个可以正确执行以下操作的简单库：

```
// parse a JSON file
List<string> names = JSON.parse<List<string>>(json1);
Dictionary<string, int> ids = JSON.parse<Dictionary<string, int>>(json);

// stringify an object
string json = JSON.stringify(names);
string json = JSON.stringify(ids); 
```

显然，理想的库应该是快速的（足够快以扩展到数百 MB 的 JSON），并且是可移植的（小代码，无依赖关系），但不要大惊小怪。我现在很绝望，所以任何有效的东西都很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:00:02.050

[http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx)是通常的答案，但还有更多。

```
 List<string> names = new List<string>() {"Mike","Joe","Jane"};
        Dictionary<string, int> ids = new Dictionary<string, int>()
                                          {
                                              {"Mike",1},
                                              {"Joe",2},
                                              {"Jane",3},
                                          };

        // ["Mike","Joe","Jane"]
        string nameJson = Newtonsoft.Json.JsonConvert.SerializeObject(names);

        //{"Mike":1,"Joe":2,"Jane":3}
        string idsJSon = Newtonsoft.Json.JsonConvert.SerializeObject(ids); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:00:35.730

检查 ServiceStack.Text：[https ://github.com/ServiceStack/ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)

我已经在几个项目中使用过它，它非常好。

从维基页面：

> ServiceStack.Text 是一个独立的、无依赖的序列化库，包含 ServiceStack 的所有文本处理功能，包括：
> 
> ```
> JsonSerializer
> TypeSerializer (JSV-Format)
> CsvSerializer
> T.Dump extension method
> StringExtensions - Xml/Json/Csv/Url encoding, BaseConvert, Rot13, Hex escape, etc.
> Stream, Reflection, List, DateTime, etc extensions and utils 
> ```

# php - 如果未找到所需的属性，则正则表达式匹配下一个属性。如何限制它？

> ID：11745281
> 
> 赞同：2
> 
> 时间：2012-07-31T16:57:36.953
> 
> 标签：php, regex

使用正则表达式和 PHP，我试图获取 title 属性的内容，如下所示。

```
preg_match('/<abbr class="dtstart" title="([^"]*)"/i', $file_string, $starts);
$starts_out = $starts[1];

preg_match('/<abbr class="dtend" title="([^"]*)"/i', $file_string, $ends);
$ends_out = $ends[1]; 
```

这是我想要获取的代码的确切部分，并且我正确获取了数据。

```
<div id="eventDetailInfo">
    <h2>When</h2>
    <div class="p">
        <div>From:
            <abbr class="dtstart" title="2012-08-24T17:00:00">Friday, August 24th, 2012</abbr></div>
        <div>Until:
            <abbr class="dtend" title="2012-08-26">Saturday, August 25th, 2012</abbr></div>
    </div>
</div> 
```

但是，因为有时在某些文章中没有*直到*，正则表达式匹配剩余代码中的第一个（这是相关文章）。

我的问题是如何将正则表达式限制为仅匹配上述内容，如果没有

```
<div>Until:
                <abbr class="dtend" title="2012-08-26">Saturday, August 25th, 2012</abbr></div> 
```

找到了，留空？

这是页面的其余代码，不幸的是正则表达式匹配它。

```
<div class="evdate">
    <em>When:</em>
    <abbr class="dtstart" title="2012-07-03T21:00:00">July 3rd</abbr>
    to
    <abbr class="dtend" title="2012-07-13">July 12th</abbr>*
</div>
<div class="evtime"><em>Time:
    </em>
    21:00
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:14:29.143

虽然我同意其他人关于不使用正则表达式来匹配 HTML 的观点——我个人认为如果你需要确切地知道你能得到什么，正则表达式会非常有帮助。除非您抓取不同来源的负载，否则您通常不需要 DOM 框架为您提供的一致性。

任何人，鉴于您的问题，我认为 DOM 不一定会帮助您，您仍然需要将其设计为仅从某些类/模式中获取。这样做的方法是扩展您的正则表达式以匹配更多内容，而不仅仅是您想要的内容，还包括包含的内容，因此您需要在模式中包含一些独特的东西，这样它就不会与相关文章匹配。（就像你需要对 DOM 做的一样，虽然更容易一点！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:21:55.363

虽然[我已经向您展示了如何使用快速正则表达式来做到这一点](https://stackoverflow.com/questions/11743253/modification-to-regex-to-match-time#answer-11743315)，但我明确建议您不要将正则表达式用于此类事情。正如您自己所看到的，它很快就会失控。

*正如其他人（在这里和*那里）指出的那样，您应该为此使用 HTML 解析器。

* * *

我建议你使用[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)，因为它很容易使用，而且[他们的文档](http://simplehtmldom.sourceforge.net/manual.htm)也很好。

# html - Facebook likebox 更改链接颜色

> ID：11745282
> 
> 赞同：0
> 
> 时间：2012-07-31T16:57:54.083
> 
> 标签：html, css, facebook

我想更改 facebook likebox 中的标题链接颜色。我尝试使用常规 css 执行此操作，但无济于事，因为内容和样式似乎从外部源加载到 iframe 中。

这些是有问题的选择器：

.fan_box .connect_action .name { line-height: 15px; 字体大小：14px；字体粗细：粗体；}

一个{光标：指针；颜色：#3B5998；}

因此，要么我需要将 .name 中的颜色更改为黄色，要么将 a 更改为黄色。我尝试了以下方法，但没有奏效：

.fan_box .connect_action .name { line-height: 15px; 字体大小：14px；字体粗细：粗体；颜色：#F90 !important; }

一个{光标：指针；颜色：#F90！重要；}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:08:22.780

恐怕您无法控制父文档中 iframe 内容的呈现方式。这是一个完全不同的 HTML 文档，因此您的 CSS 文件不会对其产生任何影响。

# javascript - 在锚标记上下载之前，JQuery/Javascript 弹出窗口关闭

> ID：11745285
> 
> 赞同：0
> 
> 时间：2012-07-31T16:58:04.000
> 
> 标签：javascript, jquery

我有一个文件可以在我的移动网站上下载到手机上。现在，只需单击锚标记即可下载文件。现在我想在开始下载之前显示一个带有一些重要信息的 javascript 弹出框，并且在开始下载之前，您必须关闭弹出框（只需单击同意/确定...）或单击另一个'立即下载”按钮。我怎么做？

我的尝试：正如您在我的[JSFiddle](http://jsfiddle.net/ccrAF/26/)中看到的，我不确定单击“立即下载”按钮后如何启动文件下载。

我认为纯 javascript 可能会更好，因为我不确定将 jquery 文件包含到移动网站中始终是最好的选择，尤其是对于互联网连接速度较慢的手机......但 jquery 现在也可以，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:04:59.380

试试下面的 jquery：@bingjie：你觉得哪个更好？我的还是你的？

```
$(document).ready(function(){

     $("#dialog-download ").dialog({
    autoOpen: false,
    resizable: false,
    height: 140,
    width: 325,
    modal: true
});
    $(".opener").click(function(){
        var that = this;

        $("#dialog-download").dialog("option",  {buttons: {
            "Download Now": function(){
             $("a").attr("href", "http://dl.v4m.mobi/bb/2012_07_10/OS-v5.0up/e_phone.jad");  
             window.location.href = $('#myClass').attr('href');

            }
        }
            });
        $("#dialog-download").dialog("open");
    });
}); 
```

# delphi - 如何在没有 OLE 服务器的情况下将 OLE 对象从 TJvRichEdit 复制到 TOleContainer

> ID：11745286
> 
> 赞同：1
> 
> 时间：2012-07-31T16:58:09.787
> 
> 标签：delphi, syntax, rtf, ole, jedi

## 任务

我有数千个带有嵌入式 OLE 对象的 RTF 文档。需要提取 OLE 对象并以该`TOleContainer.SaveToFile()`格式保存。

## 当前解决方案

将每个 RTF 文件加载到`TJvRichEdit`控件中并循环通过其 OLE 对象。这些对象可以加载到一个`TOleContainer`然后保存到磁盘。

## 问题

如果我的计算机上没有安装特定的 OLE 服务器，则代码将`TOleContainer.CreateObjectFromInfo()`失败并显示错误“**无效的 FORMATETC 结构**”。

是否有另一种方法可以将 OLE 对象从`TJvRichEdit`控件复制到`TOleContainer`不需要安装 OLE 服务器的控件？

## 代码

```
uses ActiveX, JvRichEdit, RichEdit, ComObj; 
---- 
{ used to iterate through OLE objects } 
type 
  _ReObject = record 
    cbStruct: DWORD; 
    cp: ULONG; 
    clsid: TCLSID; 
    poleobj: IOleObject; 
    pstg: IStorage; 
    polesite: IOleClientSite; 
    sizel: TSize; 
    dvAspect: Longint; 
    dwFlags: DWORD; 
    dwUser: DWORD; 
  end; 
  TReObject = _ReObject; 

  IRichEditOle = interface(IUnknown) 
    ['{00020d00-0000-0000-c000-000000000046}'] 
    function GetClientSite(out clientSite: IOleClientSite): HResult; stdcall; 
    function GetObjectCount: HResult; stdcall; 
    function GetLinkCount: HResult; stdcall; 
    function GetObject(iob: Longint; out reobject: TReObject; 
        dwFlags: DWORD): HResult; stdcall; 
    function InsertObject(var reobject: TReObject): HResult; stdcall; 
    function ConvertObject(iob: Longint; rclsidNew: TIID; 
        lpstrUserTypeNew: LPCSTR): HResult; stdcall; 
    function ActivateAs(rclsid: TIID; rclsidAs: TIID): HResult; stdcall; 
    function SetHostNames(lpstrContainerApp: LPCSTR; 
        lpstrContainerObj: LPCSTR): HResult; stdcall; 
    function SetLinkAvailable(iob: Longint; fAvailable: BOOL): HResult; stdcall; 
    function SetDvaspect(iob: Longint; dvaspect: DWORD): HResult; stdcall; 
    function HandsOffStorage(iob: Longint): HResult; stdcall; 
    function SaveCompleted(iob: Longint; const stg: IStorage): HResult; stdcall; 
    function InPlaceDeactivate: HResult; stdcall; 
    function ContextSensitiveHelp(fEnterMode: BOOL): HResult; stdcall; 
    function GetClipboardData(var chrg: TCharRange; reco: DWORD; 
        out dataobj: IDataObject): HResult; stdcall; 
    function ImportDataObject(dataobj: IDataObject; cf: TClipFormat; 
        hMetaPict: HGLOBAL): HResult; stdcall; 
  end; 

{ Note: 'ole' is a TOleContainer and 're' is a TJvRichEdit }

procedure TForm1.Button1Click(Sender: TObject); 
var 
  reOle: IRichEditOle; 
  reObj: TReObject; 
  oData: IDataObject; 
  oInfo: TCreateInfo; 
  i, cnt: Integer; 
begin 
  if dlgOpen.Execute then 
  begin 
    re.Clear;
    re.Lines.LoadFromFile(dlgOpen.FileName); 

    if SendMessage(re.Handle, EM_GETOLEINTERFACE, 0, Longint(@reOle)) <> 0 then 
      try 
        if not Assigned(reOle) then 
          raise Exception.Create('Failed to retrieve IRichEditOle'); 

        cnt := reOle.GetObjectCount; 

        // cycle through objects 
        for i := 0 to cnt - 1 do 
        begin
          // initialize 'reObj' structure
          FillChar(reObj, SizeOf(reObj), 0); 
          reObj.cbStruct := SizeOf(reObj); 

          // get OLE object
          OleCheck(reOle.GetObject(i, reObj, 7)); 
          try 
            // get the OLE object's data
            reObj.poleobj.QueryInterface(IDataObject, oData); 
            if Assigned(oData) then 
              try 
                // needed for some OLE servers (like MSPaint)
                OleRun(oData); 

                // initialize TCreateInfo object
                oInfo.CreateType := ctFromData; 
                oInfo.ShowAsIcon := False; 
                oInfo.IconMetaPict := 0; 
                oInfo.DataObject := oData; 
                try 
                  ole.DestroyObject;
                  ole.CreateObjectFromInfo(oInfo); // <- this is where it fails
                  ole.SaveToFile([a filename]);
                finally 
                  oInfo.DataObject := nil; 
                end; 
              finally 
                oData := nil; 
              end; 
          finally 
            reObj.poleobj := nil; 
          end; 
        end; 
      finally 
        reOle := nil; 
      end; 
  end; 
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:45:17.187

`OLE`要求`OLE server`在场；没有办法避免它。

`OLE`使用`ActiveX`嵌入激活服务器的自动化，并且要使用它，服务器必须首先在那里。你不能自动化没有安装的东西。

# css - CSS 图像叠加

> ID：11745288
> 
> 赞同：0
> 
> 时间：2012-07-31T16:58:15.957
> 
> 标签：css, image, colors, overlay

我正在为我的公司创建一个模板，该模板将在各种不同的客户网站上使用，并且它们的颜色都不同。我为此模板创建了当前为黑色（或白色）的图标，我希望能够通过 css 控制这些图标的颜色。它们是一种简单的颜色，在 Photoshop 中，如果您进行颜色叠加的混合选项并选择一种颜色，它们看起来很棒。这是否可以在 css 中完成，因此当有人为未来的客户编辑此模板时，他们可以控制 css 中的图标颜色，而不必每次都在 Photoshop 中编辑每个图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:30:24.327

可以在 CSS 中更改徽标的颜色，但不能解决您所说的问题。要制作可更改的徽标，您将制作一个具有透明度的 PNG，其中徽标所在的位置和（网页的）背景颜色位于负空间中。然后将它放在一个 P 或 div 上，该 P 或 div 具有您想要的徽标颜色作为其背景颜色。

麻烦的是，您刚刚将灵活的徽标颜色换成了不灵活的“背景”颜色。

最好只包括标志的两种颜色，白色和黑色，作为所有网站的“包装”的一部分。只需在您想要的 CSS 中调用您想要的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T00:20:21.123

我想说最好/最简单的答案是使用 SVG。徽标应该以矢量格式开始，以便可以缩放而不会丢失从名片到广告牌的细节。

SVG“图像”基于形状。给要更改名称的形状，然后在 CSS 中对其进行寻址以更改其颜色。

本文： [http ://css-tricks.com/using-svg/](http://css-tricks.com/using-svg/)

这个例子： [http ://codepen.io/chriscoyier/pen/evcBu](http://codepen.io/chriscoyier/pen/evcBu)

出色地解释如何实现这一目标并展示其他可能性。

SVG 至少基础现在得到了广泛的支持，ie8 是唯一阻止它的浏览器，即使如此，也有办法通过将 SVG 渲染为动态图像来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T00:20:08.390

据我所知，它可以与 Firefox 和 Chrome 一起完成并运行良好。下面的例子。 [http://demosthenes.info/blog/532/Convert-Images-To-Black-And-White-With-CSS](http://demosthenes.info/blog/532/Convert-Images-To-Black-And-White-With-CSS)

```
img {
filter: grayscale(100%);
-webkit-filter: grayscale(100%);
-moz-filter: grayscale(100%);
-ms-filter: grayscale(100%);
-o-filter: grayscale(100%);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:03:22.353

无法使用 css 更改图标的颜色。你可以塑造它，你可以赋予透明度，不透明度等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T17:22:43.277

不可能通过 CSS。您可以使用一些动态技术，例如 Canvas，但这不是一个好方法。我宁愿创建工具来创建所需颜色的图标集。您可以使用 PHP 来完成（[这里的 phpGD 或 ImageMagick 是类似问题的示例](http://studio.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20505)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T17:25:00.037

你可以用图像来做到这一点（只要背景颜色是一致的），但它需要跳出框框思考一下。在 Photoshop（或类似软件）中打开图标的图像文件。编辑它，使“图标”部分（即当前为黑色的位）是透明的，而背景（即不是图标所描绘的位）填充为白色（或网站的背景颜色是什么） ）。本质上，您已经“反转了图像的极性”。将图片放在网页中，然后使用 CSS 指定它的`background-color`. 您的图标应该以该颜色显示。**编辑：**像这样的东西： http: [//coding.smashingmagazine.com/2010/10/31/transparent-css-sprites/](http://coding.smashingmagazine.com/2010/10/31/transparent-css-sprites/)

[可能] 更简单的方法是使用像[http://pictos.cc/](http://pictos.cc/)这样的图标字体。这实际上只是文本，因此您可以像往常一样使用 CSS 对其进行着色。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-11T01:54:23.360

您可以使用 CSS 伪元素和半透明覆盖来做到这一点。您可以按照此处的说明进行操作：[http ://www.impressivewebs.com/image-tint-blend-css/](http://www.impressivewebs.com/image-tint-blend-css/)

如果您有*矢量*徽标，您可以更轻松地使用 SVG 徽标（通过更改 SVG 颜色）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-07T14:11:21.053

如果您将图标图像制作成字体，那么您可以通过 CSS 完全控制大小和颜色。查看非常流行的[Font-Awesome](http://fortawesome.github.com/Font-Awesome/)字体，旨在补充[Twitter Bootstrap](http://twitter.github.com/bootstrap/)。

我不是字体专家，但如果这种方法听起来很合适，您将执行以下操作：

*   从您的图标创建矢量图形
*   将它们加载到字体编辑器中，例如[FontLab Studio](http://www.fontlab.com/font-editor/fontlab-studio/)
*   将新字体添加到您最喜欢的 Web 应用程序中。如果您需要这方面的指南，[FontSquirrel.com 会](http://www.fontsquirrel.com/fontfacedemo/GoodDog)生成很棒的 @font-face 标记以包含他们的免费字体库。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-31T17:00:39.133

如果您的图标是您可以在 css 中制作的形状，它可以工作，但我从未听说有人做过您所说的事情。

# sql-server - 如何在不更改结果数量的情况下获取聚合结果 SQL

> ID：11745290
> 
> 赞同：0
> 
> 时间：2012-07-31T16:58:18.337
> 
> 标签：sql-server, group-by, aggregate-functions, case

这是我一直在使用的查询：

```
select serial_number, DAQ.qtag_no, min(TOH.start_time), order_number, DAQ.creation_time, qtag_status, ar_code, pro_foundin, pro_category, root_cause, remark from UNIT U 
left JOIN WORK_ORDER WO ON WO.order_key = U.order_key
left join TRACKED_OBJECT_HISTORY TOH on TOH.tobj_key = U.unit_key
WHERE U.creation_time > '01/01/2012' AND U.creation_time < '07/20/2012'
AND order_number NOT LIKE '[R]%' 
group by serial_number, qtag_no, order_number, DAQ.creation_time, qtag_status, ar_code, pro_foundin, pro_category, root_cause, remark
order by serial_number 
```

现在我得到 3280 个结果。在此设置中，有不同的站点，例如“组装”、“诊断”等。我的 min(TOH.start_time) 列的目标是返回组装站的第一个开始时间，但目前它正在返回第一个任何车站的开始时间。但是，如果我添加另一个 WHERE 子句来指定站 (TOH.op_name = 'Assembly')，它会限制结果的数量（低至 2700）。我想保留 3280 结果，而不是对于未扫描到装配站的单元，为 min(TOH.start_time) 列返回 NULL。我尝试使用 case 函数，但这需要我在 group by 子句中包含 TOH.op_name，而我并不在寻找它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:07:48.697

你应该能够将你的条件添加到我认为的左连接中，如下所示：

```
select  serial_number, 
    DAQ.qtag_no, 
    min(TOH.start_time), 
    order_number, 
    DAQ.creation_time, 
    qtag_status, 
    ar_code, 
    pro_foundin, 
    pro_category, 
    root_cause, 
    remark 
from UNIT U 
left 
JOIN    WORK_ORDER WO 
    ON  WO.order_key = U.order_key
left 
join    TRACKED_OBJECT_HISTORY TOH 
    on  TOH.tobj_key = U.unit_key
    and TOH.op_name = 'Assembly'
WHERE   U.creation_time > '01/01/2012' AND U.creation_time < '07/20/2012'
AND     order_number NOT LIKE '[R]%' 
group by serial_number, qtag_no, order_number, DAQ.creation_time, qtag_status, ar_code, pro_foundin, pro_category, root_cause, remark
order by serial_number 
```

# c# - mvc - 允许 chtml 页面中的 asp 标签

> ID：11745294
> 
> 赞同：0
> 
> 时间：2012-07-31T16:58:44.917
> 
> 标签：c#, asp.net-mvc, razor

无论如何允许 chtml MVC 页面中的 asp 标签？我是否必须在视图本身中声明某些内容？我知道解决方案中可能有一个 aspx 页面，但我想在 chtml 页面中组合控件。

例子：

```
@using (Html.BeginForm())
{
<asp:calander>...

etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:06:12.077

其实 Razor 不支持 WebForm 控件，但是如果你真的想混合 n 匹配你需要看 Scott Hanselman 的例子

[http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)

# windows - 禁用基于网站的选项卡式浏览

> ID：11745295
> 
> 赞同：0
> 
> 时间：2012-07-31T16:58:45.067
> 
> 标签：windows, internet-explorer

客户正在使用我们的基于 Web 的应用程序报告问题。他们的用户似乎在使用该网站时打开了多个标签。这会导致一个问题，即他们忘记了自己在哪个选项卡上，有时会输入无效数据或在错误的上下文中查看数据，认为它们位于不同的选项卡上。

尽管我为他们提出了不同的解决方案，但他们只想考虑一种解决方案：当他们的用户在我们的网站上时禁用标签式浏览，当他们不在时再次启用它。

这样的事情可能吗？所有用户都在使用 Windows（我相信是 XP，尽管可能是 W7）和 Internet Explorer 7+。

我不确定是否有可以完成此任务的 Windows 脚本解决方案，或者是否有具有此功能的 ActiveX 控件。

**编辑：2012/08/13**我现在正在考虑的一个功能是自定义 Internet Explorer 应用程序。类似于海报在这里谈论的内容：

[http://www.symantec.com/connect/forums/ie8-virtual-layer-custom-ie-settings](http://www.symantec.com/connect/forums/ie8-virtual-layer-custom-ie-settings)

和这里

[http://www.vandyke.com/support/tips/ieobject.html](http://www.vandyke.com/support/tips/ieobject.html)

这对我来说是新的领域，所以如果这里有经验的人有任何想法，我很想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:35:04.430

不，你不能这样做。IE 将只允许用户选择选项卡的工作方式，而不是网站。它没有针对每个站点进行控制的功能。

如果在检测到这种情况时修改应用程序以使其行为不同，那么您的客户（人们）可以使用管理工具完全禁用选项卡式浏览。

# java - 为什么我不能在 if 语句中强制转换对象？

> ID：11745301
> 
> 赞同：7
> 
> 时间：2012-07-31T16:59:11.643
> 
> 标签：java, casting

我在这里没有看到这个确切的问题，这让我感到惊讶。

以下将无法编译：

```
public int compareTo( Object o )
{
    if ( this.order < ((Category o).order) )
    {
      return -1;
    }
    else if ( this.order > ((Category o).order) ) 
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

而将其更改为强制转换对象并将其引用存储在条件语句之外的新对象中可以解决问题：

```
Category cat = ( Category )o;
if ( this.order < cat.order )
// Etc... 
```

我的问题是，为什么 Java 不允许这种行为？（特别是 Java 5）

编辑：啊哈！谢谢你们。该死的现代 IDE 提供模糊的错误消息。我已经开始打折了，这一次对我没有任何好处。（Netbeans 警告我缺少括号和缺少分号...）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-31T17:01:48.900

这里的问题是您的语法不正确。它应该是

```
public int compareTo( Object o )
{
    if ( this.order < ((Category) o).order )
    {
      return -1;
    }
    else if ( this.order > ((Category) o).order ) 
    {
        return 1;
    }
    else
    {
        return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T17:10:30.743

我更喜欢语法

```
Category.class.cast(o) 
```

那么你在做什么是明确的，它避免了与括号的任何混淆。据我了解，以上与 ((Category) o) 相同

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:03:20.633

这应该是允许的，似乎您的括号可能已关闭：您是否尝试过类似的东西

if ( this.order < (((Category)o).order) )

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T17:05:24.847

我认为你需要这个：

```
(((Category) o).order) 
```

我只是尝试了一个更简单的版本：

```
int a = 5;
        if(4 < (double)a); 
```

它编译得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T17:07:33.783

您发布的两个代码片段之间存在明显差异：

```
(Category o) 
```

不同于：

```
( Category )o 
```

第一个不会编译，第二个会。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T17:08:46.920

看一下内部**铸造的简单****工作**演示：**`if`**

 **```
int i;
float d = 10.5f;
if((i = (int) d) == 10){
//works
} 
```

在您的代码中，问题在`if ( this.order < ((Category o).order) )`于其**不正确**的陈述

它应该是`if ( this.order < ((Category) o).order)`

编辑：你的问题解决了，但**还有一件事**（**额外的浇头**），不需要有`else`（**梯形**`return`） ，因为你有`if`

```
public int compareTo( Object o )
{
    if ( this.order < ((Category) o).order )
    {
        return -1;
    }
    if ( this.order > ((Category) o).order ) 
    {
        return 1;
    }
    return 0;
} 
```**

# windows - MS 应用程序验证程序膨胀堆栈？

> ID：11745311
> 
> 赞同：2
> 
> 时间：2012-07-31T16:59:52.847
> 
> 标签：windows, recursion, stack, application-verifier

有谁知道应用程序验证器是如何工作的？

我目前正在开发一个大量使用递归的树解析应用程序。该程序似乎按预期工作，但是我确实在一些地方使用了“new”，所以我想用 Application Verifier 检查内存泄漏。AV 不会报告任何错误，但是，在几分钟内，应用程序的映像会迅速增长到大约 1 GB，而没有它只会达到 60 兆左右。我似乎找不到任何内存泄漏，并且看到正在进行多少递归，我开始怀疑 AV 在堆栈上放置了额外的项目以用于测试目的，并且随着递归的深入，额外的“垃圾”会堆积起来并使程序崩溃。

有没有人对此事有任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:22:51.980

这可能取决于您打开了哪些 AppVerifier 功能。有一个堆检查功能，可以将每个分配放在自己的页面中，并在分配之间分配保护页面。如果您要分配大量小对象，此功能将显着增加内存使用量。这是此类测试的正常行为，无需担心。

顺便说一下，我不知道影响堆栈使用的任何功能。我相信如果不使用仪器重新编译代码，就很难弄乱堆栈，并且 AppVerifier 不需要使用仪器进行编译。

# php - 更快/更好：使用 PHP 或 JavaScript 获取一些 JSON 对象

> ID：11745312
> 
> 赞同：2
> 
> 时间：2012-07-31T16:59:53.900
> 
> 标签：php, javascript

就我个人而言，我会用 PHP 来做这件事，但也许有人有使用 JavaScript 做这件事的赞成/反对：

*   我（将）从 Soundcloud 获取一些歌曲详细信息（每页加载大约十个）
*   之后统计数据（本周播放/总数，本周喜欢/总数等）将显示在表格中

就是这样——没什么特别的。

* * *

我可以这样解决：

*   让 PHP 做这些事情并一次渲染整个页面

这当然需要一些时间才能呈现页面。

用 JavaScript 这样做有什么好处吗？我只能想到：

*   页面渲染速度更快（缺点是结果可能不会立即显示）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:09:08.270

我会说通过 JavaScript 执行此操作实际上需要更长的时间，因为您必须再次连接。虽然，它可能会给人一种“更快”的错觉（尽管我怀疑它会很明显）。

我想这也可能取决于您的用例。

您如何使用 SoundCloud 处理身份验证？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:09:39.597

老实说，我会走 jQuery 路线。

使用`$.post()`调用，并在您的`success`语句中循环遍历 json 并将其附加到表中。这样，您可以执行分页之类的操作，无需刷新页面即可更新表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T18:35:25.180

在服务器端执行并预加载页面。soundcloud API 不应该是这里的瓶颈，因此减少一两个请求是值得的。

# java - 为什么使用 KML 数据检索适用于 Android 的 Google 路线不再有效？

> ID：11745314
> 
> 赞同：26
> 
> 时间：2012-07-31T17:00:01.303
> 
> 标签：java, android, google-maps, android-mapview, kml

> **可能重复：**
> [谷歌地图输出=公里损坏？](https://stackoverflow.com/questions/11680872/google-maps-output-kml-broken)

几天以来，当我尝试使用 KML 数据检索 Google 路线时，我开始出现错误。错误似乎我请求的 URL 不再检索 KML 数据，它返回整个页面。为了实现这一目标，我遵循[了这一点。](http://code.google.com/p/j2memaprouteprovider/source/browse/#svn/trunk/J2MEMapRouteAndroidEx)

解决方案是什么？有其他选择吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-31T17:00:01.303

**更新：**

由于现在使用的是 Android Google Maps v2，因此需要调整代码以在 v2 地图上工作，可在[此处](https://github.com/jd-alexander/Google-Directions-Android)找到。

* * *

**原答案：**

这种通过解析 KML 文件从 Google 提取 Google 路线的方式自 2012 年 7 月 27 日起不再可用（因为 Google 改变了检索 Google 路线的结构，现在您只能通过 JSON 或 XML 获取），是时候将您的代码迁移到 JSON 而不是 KML。

我通过创建 6 个这样的类来做到这一点：

**解析器.java**：

```
public interface Parser {
        public Route parse();
} 
```

**XMLParser.java**：

```
public class XMLParser {
        // names of the XML tags
        protected static final String MARKERS = "markers";
        protected static final String MARKER = "marker";

        protected URL feedUrl;

        protected XMLParser(final String feedUrl) {
                try {
                        this.feedUrl = new URL(feedUrl);
                } catch (MalformedURLException e) {
                        //Log.e(e.getMessage(), "XML parser - " + feedUrl);
                }
        }

        protected InputStream getInputStream() {
                try {
                        return feedUrl.openConnection().getInputStream();
                } catch (IOException e) {
                        //Log.e(e.getMessage(), "XML parser - " + feedUrl);
                        return null;
                }
        }
} 
```

**段.java**：

```
public class Segment {
        /** Points in this segment. **/
        private GeoPoint start;
        /** Turn instruction to reach next segment. **/
        private String instruction;
        /** Length of segment. **/
        private int length;
        /** Distance covered. **/
        private double distance;

        /**
         * Create an empty segment.
         */

        public Segment() {
        }

        /**
         * Set the turn instruction.
         * @param turn Turn instruction string.
         */

        public void setInstruction(final String turn) {
                this.instruction = turn;
        }

        /**
         * Get the turn instruction to reach next segment.
         * @return a String of the turn instruction.
         */

        public String getInstruction() {
                return instruction;
        }

        /**
         * Add a point to this segment.
         * @param point GeoPoint to add.
         */

        public void setPoint(final GeoPoint point) {
                start = point;
        }

        /** Get the starting point of this 
         * segment.
         * @return a GeoPoint
         */

        public GeoPoint startPoint() {
                return start;
        }

        /** Creates a segment which is a copy of this one.
         * @return a Segment that is a copy of this one.
         */

        public Segment copy() {
                final Segment copy = new Segment();
                copy.start = start;
                copy.instruction = instruction;
                copy.length = length;
                copy.distance = distance;
                return copy;
        }

        /**
         * @param length the length to set
         */
        public void setLength(final int length) {
                this.length = length;
        }

        /**
         * @return the length
         */
        public int getLength() {
                return length;
        }

        /**
         * @param distance the distance to set
         */
        public void setDistance(double distance) {
                this.distance = distance;
        }

        /**
         * @return the distance
         */
        public double getDistance() {
                return distance;
        }

} 
```

**路由.java**：

```
public class Route {
        private String name;
        private final List<GeoPoint> points;
        private List<Segment> segments;
        private String copyright;
        private String warning;
        private String country;
        private int length;
        private String polyline;

        public Route() {
                points = new ArrayList<GeoPoint>();
                segments = new ArrayList<Segment>();
        }

        public void addPoint(final GeoPoint p) {
                points.add(p);
        }

        public void addPoints(final List<GeoPoint> points) {
                this.points.addAll(points);
        }

        public List<GeoPoint> getPoints() {
                return points;
        }

        public void addSegment(final Segment s) {
                segments.add(s);
        }

        public List<Segment> getSegments() {
                return segments;
        }

        /**
         * @param name the name to set
         */
        public void setName(final String name) {
                this.name = name;
        }

        /**
         * @return the name
         */
        public String getName() {
                return name;
        }

        /**
         * @param copyright the copyright to set
         */
        public void setCopyright(String copyright) {
                this.copyright = copyright;
        }

        /**
         * @return the copyright
         */
        public String getCopyright() {
                return copyright;
        }

        /**
         * @param warning the warning to set
         */
        public void setWarning(String warning) {
                this.warning = warning;
        }

        /**
         * @return the warning
         */
        public String getWarning() {
                return warning;
        }

        /**
         * @param country the country to set
         */
        public void setCountry(String country) {
                this.country = country;
        }

        /**
         * @return the country
         */
        public String getCountry() {
                return country;
        }

        /**
         * @param length the length to set
         */
        public void setLength(int length) {
                this.length = length;
        }

        /**
         * @return the length
         */
        public int getLength() {
                return length;
        }

        /**
         * @param polyline the polyline to set
         */
        public void setPolyline(String polyline) {
                this.polyline = polyline;
        }

        /**
         * @return the polyline
         */
        public String getPolyline() {
                return polyline;
        }

} 
```

**谷歌解析器.java**：

```
public class GoogleParser extends XMLParser implements Parser {
        /** Distance covered. **/
        private int distance;

        public GoogleParser(String feedUrl) {
                super(feedUrl);
        }

        /**
         * Parses a url pointing to a Google JSON object to a Route object.
         * @return a Route object based on the JSON object.
         */

        public Route parse() {
                // turn the stream into a string
                final String result = convertStreamToString(this.getInputStream());
                //Create an empty route
                final Route route = new Route();
                //Create an empty segment
                final Segment segment = new Segment();
                try {
                        //Tranform the string into a json object
                        final JSONObject json = new JSONObject(result);
                        //Get the route object
                        final JSONObject jsonRoute = json.getJSONArray("routes").getJSONObject(0);
                        //Get the leg, only one leg as we don't support waypoints
                        final JSONObject leg = jsonRoute.getJSONArray("legs").getJSONObject(0);
                        //Get the steps for this leg
                        final JSONArray steps = leg.getJSONArray("steps");
                        //Number of steps for use in for loop
                        final int numSteps = steps.length();
                        //Set the name of this route using the start & end addresses
                        route.setName(leg.getString("start_address") + " to " + leg.getString("end_address"));
                        //Get google's copyright notice (tos requirement)
                        route.setCopyright(jsonRoute.getString("copyrights"));
                        //Get the total length of the route.
                        route.setLength(leg.getJSONObject("distance").getInt("value"));
                        //Get any warnings provided (tos requirement)
                        if (!jsonRoute.getJSONArray("warnings").isNull(0)) {
                                route.setWarning(jsonRoute.getJSONArray("warnings").getString(0));
                        }
                        /* Loop through the steps, creating a segment for each one and
                         * decoding any polylines found as we go to add to the route object's
                         * map array. Using an explicit for loop because it is faster!
                         */
                        for (int i = 0; i < numSteps; i++) {
                                //Get the individual step
                                final JSONObject step = steps.getJSONObject(i);
                                //Get the start position for this step and set it on the segment
                                final JSONObject start = step.getJSONObject("start_location");
                                final GeoPoint position = new GeoPoint((int) (start.getDouble("lat")*1E6), 
                                        (int) (start.getDouble("lng")*1E6));
                                segment.setPoint(position);
                                //Set the length of this segment in metres
                                final int length = step.getJSONObject("distance").getInt("value");
                                distance += length;
                                segment.setLength(length);
                                segment.setDistance(distance/1000);
                                //Strip html from google directions and set as turn instruction
                                segment.setInstruction(step.getString("html_instructions").replaceAll("<(.*?)*>", ""));
                                //Retrieve & decode this segment's polyline and add it to the route.
                                route.addPoints(decodePolyLine(step.getJSONObject("polyline").getString("points")));
                                //Push a copy of the segment to the route
                                route.addSegment(segment.copy());
                        }
                } catch (JSONException e) {
                        Log.e(e.getMessage(), "Google JSON Parser - " + feedUrl);
                }
                return route;
        }

        /**
         * Convert an inputstream to a string.
         * @param input inputstream to convert.
         * @return a String of the inputstream.
         */

        private static String convertStreamToString(final InputStream input) {
        final BufferedReader reader = new BufferedReader(new InputStreamReader(input));
        final StringBuilder sBuf = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sBuf.append(line);
            }
        } catch (IOException e) {
                Log.e(e.getMessage(), "Google parser, stream2string");
        } finally {
            try {
                input.close();
            } catch (IOException e) {
                Log.e(e.getMessage(), "Google parser, stream2string");
            }
        }
        return sBuf.toString();
    }

        /**
         * Decode a polyline string into a list of GeoPoints.
         * @param poly polyline encoded string to decode.
         * @return the list of GeoPoints represented by this polystring.
         */

        private List<GeoPoint> decodePolyLine(final String poly) {
                int len = poly.length();
                int index = 0;
                List<GeoPoint> decoded = new ArrayList<GeoPoint>();
                int lat = 0;
                int lng = 0;

                while (index < len) {
                int b;
                int shift = 0;
                int result = 0;
                do {
                        b = poly.charAt(index++) - 63;
                        result |= (b & 0x1f) << shift;
                        shift += 5;
                } while (b >= 0x20);
                int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                lat += dlat;

                shift = 0;
                result = 0;
                do {
                        b = poly.charAt(index++) - 63;
                        result |= (b & 0x1f) << shift;
                        shift += 5;
                } while (b >= 0x20);
                        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                        lng += dlng;

                decoded.add(new GeoPoint(
                        (int) (lat*1E6 / 1E5), (int) (lng*1E6 / 1E5)));
                }

                return decoded;
                }
} 
```

**RouteOverlay.java**：

```
public class RouteOverlay extends Overlay {
        /** GeoPoints representing this routePoints. **/
        private final List<GeoPoint> routePoints;
        /** Colour to paint routePoints. **/
        private int colour;
        /** Alpha setting for route overlay. **/
        private static final int ALPHA = 120;
        /** Stroke width. **/
        private static final float STROKE = 4.5f;
        /** Route path. **/
        private final Path path;
        /** Point to draw with. **/
        private final Point p;
        /** Paint for path. **/
        private final Paint paint;

        /**
         * Public constructor.
         * 
         * @param route Route object representing the route.
         * @param defaultColour default colour to draw route in.
         */

        public RouteOverlay(final Route route, final int defaultColour) {
                super();
                routePoints = route.getPoints();
                colour = defaultColour;
                path = new Path();
                p = new Point();
                paint = new Paint();
        }

        @Override
        public final void draw(final Canvas c, final MapView mv,
                        final boolean shadow) {
                super.draw(c, mv, shadow);

                paint.setColor(colour);
                paint.setAlpha(ALPHA);
                paint.setAntiAlias(true);
                paint.setStrokeWidth(STROKE);
                paint.setStyle(Paint.Style.STROKE);

                redrawPath(mv);
                c.drawPath(path, paint);
        }

        /**
         * Set the colour to draw this route's overlay with.
         * 
         * @param c  Int representing colour.
         */
        public final void setColour(final int c) {
                colour = c;
        }

        /**
         * Clear the route overlay.
         */
        public final void clear() {
                routePoints.clear();
        }

        /**
         * Recalculate the path accounting for changes to
         * the projection and routePoints.
         * @param mv MapView the path is drawn to.
         */

        private void redrawPath(final MapView mv) {
                final Projection prj = mv.getProjection();
                path.rewind();
                final Iterator<GeoPoint> it = routePoints.iterator();
                prj.toPixels(it.next(), p);
                path.moveTo(p.x, p.y);
                while (it.hasNext()) {
                        prj.toPixels(it.next(), p);
                        path.lineTo(p.x, p.y);
                }
                path.setLastPoint(p.x, p.y);
        }

} 
```

然后在包含 Map 的 Activity 中执行此操作：

1-添加此功能：

```
private Route directions(final GeoPoint start, final GeoPoint dest) {
    Parser parser;
    //https://developers.google.com/maps/documentation/directions/#JSON <- get api
    String jsonURL = "http://maps.googleapis.com/maps/api/directions/json?";
    final StringBuffer sBuf = new StringBuffer(jsonURL);
    sBuf.append("origin=");
    sBuf.append(start.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(start.getLongitudeE6()/1E6);
    sBuf.append("&destination=");
    sBuf.append(dest.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(dest.getLongitudeE6()/1E6);
    sBuf.append("&sensor=true&mode=driving");
    parser = new GoogleParser(sBuf.toString());
    Route r =  parser.parse();
    return r;
} 
```

2-在`onCreate()`函数中添加这个：

```
MapView mapView = (MapView) findViewById(R.id.mapview); //or you can declare it directly with the API key
Route route = directions(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));
RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
mapView.getOverlays().add(routeOverlay);
mapView.invalidate(); 
```

**编辑：**如果遇到异常，请使用`directions()`函数 in an`AsyncTask`以避免 UI 线程上的网络处理。

# jmeter - JMeter 负载测试

> ID：11745317
> 
> 赞同：0
> 
> 时间：2012-07-31T17:00:06.293
> 
> 标签：jmeter, load-testing, stress-testing

我想通过在同一毫秒内点击它几百次来加载测试一个 URL。我尝试了 JMeter，但我可以在同一毫秒内达到 2 个请求。这似乎是我的机器无法足够快地创建线程的问题。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:14:52.947

在 JMeter 中，您可以使用同步计时器将其设置为 100，这样所有线程将等待，直到有 100 个可用并访问服务器：

*   [http://jmeter.apache.org/usermanual/component_reference.html#Synchronizing_Timer](http://jmeter.apache.org/usermanual/component_reference.html#Synchronizing_Timer)

另一种解决方案是增加线程数，以便达到此吞吐量。在 JMeter 的下一个版本 (2.8) 中，您将能够按需创建线程（在需要时创建）。无论如何，在同一毫秒内点击几百次是一个高负载，因此您必须正确调整 JMeter。

问候

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:16:14.193

JMeter 使用阻塞 HTTP 客户端，为了在 100 个请求的同时访问服务器，您需要 JMeter 中的 100 个线程。即使提供了这一点，您仍然没有 100 个内核来同时实际运行此类代码。即使您有 100 个内核，启动线程也需要一些时间，因此您必须提前启动它们并在某种障碍上同步。这在 JMeter 中不受支持。

为什么你真的想“*在同一毫秒*”运行你的服务器？普通的负载测试只是用尽可能多的连接调用服务器，但不一定同时进行。此外，有时您甚至会在请求之间添加随机睡眠以模拟所谓的*思考时间*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T19:42:31.900

根据 Philippe 的回答，JMeter 实际上确实支持同步请求。但也许对于你想要的东西，比如使用 -c100的[Apache Bench （或将其调整为任何工作）是一个更好的选择？](http://httpd.apache.org/docs/2.2/programs/ab.html)这是非常基本的东西，但是开销要小得多，这在这种情况下可能会有所帮助。

但我也会从 Tomasz 的回答中窃取并回应他的担忧，即这可能并不是真正进行负载测试的最佳方式。如果您尝试复制现实生活中的流量，那么您真的需要如此高水平的并发性吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:22:23.237

您需要使用 Jmeter-server 和大量客户端机器来生成负载。您的单台机器不足以自行生成负载。

# android - Android 如何使用 AsyncTask 将图像下载到 sdcard 并在右侧项目的列表视图上完成显示？

> ID：11745321
> 
> 赞同：0
> 
> 时间：2012-07-31T17:00:28.727
> 
> 标签：android, android-listview, android-asynctask

我想通过 AsyncTask 将一些图像下载到 SDcard 并在完成后将它们显示在列表视图中。当下载开始时会显示一个进度条，当它停止时会显示下载到 sdcard 上的图像。

我看到有很多延迟加载的帖子，但我想要的是在显示图像之前显示一个进度条，并且我想存储在 sdcard 上。

下面的代码几乎可以正常工作，但问题是它在下载图像时始终没有在正确的项目上显示正确的图片。我在适配器中使用波纹管：

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        final PooHolder holder; 
        if(convertView == null){
            convertView = inflater.inflate(R.layout.item_poo, null);
            holder = new PooHolder();
            holder.tvTime = (TextView)convertView.findViewById(R.id.tvTime);
            holder.tvMessage = (TextView)convertView.findViewById(R.id.tvMessage);
            holder.btnDislike = (ImageButton)convertView.findViewById(R.id.btnDislike);
            holder.btnLike = (ImageButton)convertView.findViewById(R.id.btnLike);
            holder.btnReport = (ImageButton)convertView.findViewById(R.id.btnReport);
            holder.bar = (ProgressBar)convertView.findViewById(R.id.progressBar1);
            holder.bar1 = (ProgressBar)convertView.findViewById(R.id.progressBar2);
            holder.bar2 = (ProgressBar)convertView.findViewById(R.id.progressBar3);
            holder.tvLikes = (TextView)convertView.findViewById(R.id.tvLikes);
            holder.tvComments = (TextView)convertView.findViewById(R.id.tvComments);
            holder.tvDislikes = (TextView)convertView.findViewById(R.id.tvDislike);
            holder.imgPoo = (ImageView)convertView.findViewById(R.id.imgPoo);
            convertView.setTag(holder);
        }else{
            holder = (PooHolder)convertView.getTag();
        }
        final Poo poo = list.get(position);
        String vote = poo.getVote();

        if(poo.getDrawablePath()!=null){
            if(!poos.get(position).isDownloadComplete()){
                Log.i(DEBUG, poo.getMessage());
                holder.bar2.setVisibility(View.VISIBLE);
                holder.imgPoo.setImageBitmap(BitmapFactory.decodeFile(poo.getDrawablePath()));
                holder.imgPoo.setVisibility(View.INVISIBLE);
                if(!poos.get(position).getDownloadState(Poo.DOWNLOAD_START)){
                    DownloadImageTask task = new DownloadImageTask(poo, holder.bar2, holder.imgPoo);
                    task.setOnDownloadListener(new OnDownloadListener(){
                        public void onDownloadStarted() {
                            poos.get(position).startDownload();
                        }
                        public void onDownloadFinished(final Bitmap bmp) {
                            poos.get(position).stopDownload();
                        }
                    });
                    task.execute(poo.getImagePath());
                }
            }else{
                holder.bar2.setVisibility(View.INVISIBLE);
                holder.imgPoo.setVisibility(View.VISIBLE);
                holder.imgPoo.setImageBitmap(BitmapFactory.decodeFile(poo.getDrawablePath()));
                }
            }else{
                holder.bar2.setVisibility(View.INVISIBLE);
                holder.imgPoo.setVisibility(View.VISIBLE);
                holder.imgPoo.setImageResource(R.drawable.icon);
            }
.... 
```

下载ImageTask.java：

```
public class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    private final String DEBUG = "DownloadImageTask";
    private String url;
    private String imagePath;
    private OnDownloadListener listener;
    private Bitmap bmp;
    private ProgressBar bar;
    private ImageView img;
    private Poo poo;

    public DownloadImageTask(Poo poo, ProgressBar bar, ImageView img) {
        this.img = img;
        this.bar = bar;
        this.poo = poo;
    }

    public void onPreExecute(){
        super.onPreExecute();
        listener.onDownloadStarted();
        bar.setVisibility(View.VISIBLE);
        img.setImageBitmap(BitmapFactory.decodeFile(poo.getDrawablePath()));
        img.setVisibility(View.INVISIBLE);
    }

    public void setOnDownloadListener(OnDownloadListener listener){
        this.listener = listener;
    }

    @Override
    // Actual download method, run in the task thread
    protected Bitmap doInBackground(String... params) {
        this.imagePath = poo.getImagePath();
         // params comes from the execute() call: params[0] is the url.
        if(imagePath != null && !imagePath.isEmpty()){
            String file = imagePath.substring(imagePath.lastIndexOf("/") + 1, imagePath.length());
            return BoopoohooUtils.downloadImage(params[0], file);
        }else{
            return null;
        }
    }

    @Override
    // Once the image is downloaded, associates it to the imageView
    protected void onPostExecute(Bitmap bitmap) {
        Log.i(DEBUG, "bitmap " + bitmap);
        bar.setVisibility(View.INVISIBLE);
        img.startAnimation(BoopoohooUtils.fadeIn());
        img.setVisibility(View.VISIBLE);
        img.setImageBitmap(bitmap);
        listener.onDownloadFinished(bitmap);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:17:34.320

因此，首先您需要使用异步任务类的进度方法。[链接](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)。然后为您在顶部的方法创建一个变量以通过不同的序列让我们说 5,4,3,2,1。当它启动时，它会减少 5 并减少到 1，然后应用程序将发布并执行您正在执行的任何 gui 交互。

# rally - SDK 2：完成百分比列

> ID：11745324
> 
> 赞同：2
> 
> 时间：2012-07-31T17:00:34.900
> 
> 标签：rally

我想使用 % done 字段，它使用的功能与 % done by story plan estimate 对投资组合项目的功能相同，但另一个字段除外。

我想做的是为已标记为必须为特定版本修复的缺陷创建相同类型的条，然后显示按计划估计完成的百分比。我可以处理获取缺陷列表、计算完成百分比等。

你能告诉我一个如何显示这样一个列的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:57:40.600

我们在 SDK 2.0p3 版本中有一个[PercentDoneTemplate](https://rally1.rallydev.com/apps/2.0p3/doc/#!/api/Rally.ui.renderer.template.PercentDoneTemplate)，但它目前在 SDK 中是私有的。您可以使用它，但我们可能会在未来对您进行更改。我们正在考虑使其成为一个公开支持的组件。要在网格中使用它，您只需要在 中添加一`templatecolumn`列`columnCfg`，如下所示：

```
this.add({
    xtype: 'rallygrid',
    store: myStore,
    columnCfgs: [{
        text: 'Name',
        dataIndex: 'Name',
        flex: 1
    },
    {
        xtype: 'templatecolumn',
        tpl: Ext.create('Rally.ui.renderer.template.PercentDoneTemplate')
    }]  
}); 
```

该模板希望您的数据有一个名为`percentDone`（区分大小写）的字段。您可以通过添加配置选项来更改它`percentDoneName`

```
{
    xtype: 'templatecolumn',
    tpl: Ext.create('Rally.ui.renderer.template.PercentDoneTemplate', {
         percentDoneName: 'myPercentDoneField'
    }),
} 
```

它最终应该看起来像：

![带有完成百分比模板的网格](../Images/0e8720abd6431b51b07f9bdbc31e2359.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T19:18:40.823

如果您可以将百分比计算为小数，那么您可以轻松生成一个 rallypercentdone 组件。但是，我不知道您希望如何将它们放在一列中。也许拉力赛开发人员能够在这方面为您提供更好的帮助。

[https://rally1.rallydev.com/apps/2.0p2/doc/#!/api/Rally.ui.PercentDone](https://rally1.rallydev.com/apps/2.0p2/doc/#!/api/Rally.ui.PercentDone)

# iphone - 三星智能电视与 iOS 应用程序之间的连接

> ID：11745328
> 
> 赞同：3
> 
> 时间：2012-07-31T17:00:40.993
> 
> 标签：iphone, ios, upnp, television, samsung-smart-tv

我有一台三星智能电视 UE40D8000（显然来自 2011 系列？）和一台 iOS 设备。我想让他们通过双方的专用应用程序交换信息（很可能是小块文本）；

现在，事实证明最好的方法是使用[Convergence API](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/api_reference/javascript_apis/convergence_app_api/convergence_app.html)：我已经构建了一个基本的 TV 应用程序，看起来非常像他们提供的示例代码，以及一个用于 UPnP 发现和向电视发送 POST 请求的 iOS 应用程序. UPnP 发现效果很好。

但是在实际设备上，我似乎无法连接：请求`/ws/app/{appID}/connect`失败（当然是实际的 appID），就好像没有服务器一样。

*   我的电视可以使用 Convergence API 吗？（似乎在**任何地方**都没有兼容性列表）如果确实是 2011 平台，有没有办法升级到 2012 平台？
*   我们可以在模拟器上测试那个 API 吗？我的模拟器在我的 Mac 上的虚拟机中在 Windows 7 下运行（他们的开发工具没有 Mac 版本...）
*   我真的可以做些*什么*来进行更精确的诊断吗？像电视上运行的应用程序的日志？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T19:50:49.870

[这个 Convergence 页面](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/javascript/convergence_app/device_discovery.html)听起来像是**MultiScreenService** UPnP 服务的存在等于 Convergence API 调用的能力。因此，如果您说“UPnP 发现效果很好”（假设您在[每个示例中执行 ST 限制的 M-SEARCH](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/javascript/convergence_app/tut_js_convergence_task_2.html)，而不是不受限制的 UPnP 发现），这**应该**意味着您的特定电视支持 Convergence。您是否尝试过简单地使用 telnet 查询电视？您确定电视监听的端口号吗？[在这里，文档声称](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/javascript/convergence_app/tut_js_convergence_task_2.html#_Connecting_to_a)电视应该是 80，模拟器应该是 8008，但我对`description.xml`电视为**MultiScreenService**提供的 UPnP 非常感兴趣。您甚至可以在那里发现一些用于诊断的 UPnP 功能......

免责声明：我在 Convergence 方面没有经验，一般来说只有 UPnP，不幸的是，三星一般也是如此。三星推出这种半生不熟的专有模型的事实让我想起了我作为 Bada 开发者的短暂的血腥恶心的职业生涯。只有索尼才能维持有尊严地推动专有模型:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:53:53.940

您的年份型号是 2011 年，您无法升级到 2012 年。

2012 型号使用 API v3.5，2011 型号使用 API v2.5

因此，由于 Convergence API 在 API v3.5 中，因此您尝试执行的操作将无法在您的设备上运行。

检查这个 [http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Interactive_API](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Interactive_API)

它使您可以在设备之间进行通信，因此它可能会满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T13:10:50.107

完成回答我自己的问题：就像@Dobiatowski 提到的那样，我被 Convergence API 和 2012 平台搞砸了 Interactive API 的文档不清楚，尽管我尽了 3 天的努力，但几乎没有功能。文档中的一半句子实际上没有意义。

仍然没有设法使交互模拟器工作，看起来在Win7上是不可能的

基本答案是：不可能

# xcode - “找不到与应用程序标识符匹配的有效配置文件”错误

> ID：11745333
> 
> 赞同：12
> 
> 时间：2012-07-31T17:01:08.730
> 
> 标签：xcode, provisioning-profile

我正在开发一个我想放在一些 iPad（而不是 App Store）上的应用程序。我购买了开发者许可证，并在 Xcode 上添加了规定。现在，当我尝试为已连接到计算机的 iPad 构建应用程序时，出现错误：

`A valid provisioning profile matching the application's Identifier '' could not be found`

我认为这个问题是因为我有两个不同的团队在我的 Xcode 上运行，我不知道如何指定正确的一个（一个已过期）。另外，我记得当我第一次创建我的应用程序时，我并没有真正注意“公司名称”等字段，我现在可以更改吗？

* * *

编辑：这是我确实有的规定：

![在此处输入图像描述](../Images/fc9a56a7d201cfacc21b372130ccfe8f.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-11T15:26:13.033

当我第一次在 XCode 上安装配置文件时，我遇到了同样的问题。我正在使用 Xcode 4.5.* 版本。虽然我在我的 Mac 中安装了 prov 配置文件和证书，但当我转到 Xcode 中管理器中的设备选项卡并单击我的设备时，我仍然看不到新的配置文件已添加到设备中。因此，我单击了带有 + 标记的“添加到门户”按钮。它成功了，我能够成功测试我的应用程序，而没有任何关于缺少 prov 配置文件的错误。希望这对你们中的一些人有帮助。

![在此处输入图像描述](../Images/004387b5fe275e21719a638e878624cc.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-31T17:10:30.633

这是一个非常常见的（至少对我而言）错误。听起来您只是没有为您尝试放在 iPad 上的应用程序提供移动设备。您需要为每个应用标识符创建一个 .mobileprovision 文件。至于事物的各种名称，您可以在项目的 info 选项卡或 info.plist 中进行编辑。

如果您的个人资料之一已过期，则将其删除，尽管这不会影响任何事情。

要为您的应用获取配置，请转到 Apple 配置门户并添加配置文件。然后，您只需输入所有规范（UDID、开发证书、应用程序 ID），它就会退出一项规定。苹果开发者网站上有一个操作指南，用于制定规定并将其放置在应有的位置。

出于某种原因，您的应用程序标识符看起来也为空；您可以在项目的信息选项卡中更改此设置。.mobileprovision 应用 ID 和您的应用 ID 必须完全匹配，否则无法正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T23:04:15.897

就我而言，我必须首先使用 Cmd-B 构建应用程序。

这弹出了一个钥匙串窗口访问，要求我“允许”（或“始终允许”）Xcode 访问钥匙串。

只有这样我才能真正运行该程序以在我的 iPhone 上启动它。

显然，只打跑步并没有奏效。

（顺便说一句，请记住首先使用“iPhone Developer: Your Name ()”键为您的应用程序签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T23:34:01.543

正如达斯汀所说：

> .mobileprovision 应用 ID 和您的应用 ID 必须完全匹配，否则无法正常工作。

在您的 info.plist XCode 中自动将“捆绑标识符”设置为：com.domainname.applicationname${PRODUCT_NAME:rfc1034identifier}

删除“${PRODUCT_NAME:rfc1034identifier}”并仅保留“com.domainname.applicationname”，使其与您的配置文件 ID**完全匹配。**

当我遇到同样的问题时，这对我有用。希望能帮助到你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-02T11:27:17.307

这种进展是混乱的。我认为是宇宙和世界上最困难的问题。它应该很简单。在 xcode5 中的“修复问题”按钮不能修复问题。但是，嘿！这不需要一天。但需要几个小时来修复。

# sql - 我可以在 teradata 的 Case 子句中使用 delete 子句吗

> ID：11745334
> 
> 赞同：1
> 
> 时间：2012-07-31T17:01:09.940
> 
> 标签：sql, teradata, sql-delete, delete-row

我是 teradata 的新手。

一旦满足案例条件，我需要删除一行。

eg: case condition true 删除选中的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:48:09.967

也许我误解了您尝试使用 CASE 语句完成的任务，但根据我的理解，您可以使用 WHERE 子句有条件地从表中删除数据：

```
DELETE
FROM MyDB.MyTable
WHERE Col1 = 31
  AND "Desc" = 'xxxxxx'; 
```

**编辑：**

根据您的评论，您需要将 CASE 逻辑应用于您希望隐藏的 SELECT 语句中返回的每一列。

```
SELECT CASE WHEN Col1 = 31 and "DESC" = 'yyyyy'
            THEN NULL
            ELSE ColA
       END AS ColA_,
    /* Repeat for each column you wish to "delete" */
  FROM MyDB.MyTable; 
```

# ios - UILabel textColor 在 iOS 4.3 中没有正确设置

> ID：11745335
> 
> 赞同：1
> 
> 时间：2012-07-31T17:01:12.830
> 
> 标签：ios, uilabel, ios4

虽然使用 iOS 5.1 Simulator 应用程序感觉很棒，但在 iOS 4.3 Simulator 上对其进行测试后，出现了一些难以理解的问题：

我为 UITableView 使用自定义 UITableViewCell，它有几个 UILabels 和一个 UITextView。问题是 textColor 属性似乎根本不起作用 - 尽管显示了背景并且 NSLog 打印了正确的文本，但我标签上的所有文本仍然不可见。我尝试在 IB 中和以编程方式更改 textColor 值，但都没有帮助。

UITextView 怎么样 - 没关系。我想，我可以用 textViews 替换所有标签，但这不是编程的好方法，是吗？

对于您的任何帮助，我将不胜感激，因为它让我大吃一惊！

**更新（添加源代码）**

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    FeedItemCell *cell = [tableView dequeueReusableCellWithIdentifier:[FeedItemCell cellID]];
    if (!cell) {
        cell = [FeedItemCell cell];
    }

    NSIndexPath *selectedPath = [tableView indexPathForSelectedRow];
    if (selectedPath && (indexPath.row == selectedPath.row) ) {
        [self selectRowAtIndexPath:indexPath];
    }

    [cell fillWithContents:[feedItemsController.fetchedObjects objectAtIndex:indexPath.row]];
    return cell;
}

//---
@implementation FeedItemCell 

- (void)fillWithNewsItemContents:(FeedItem *)feedItem {
    self.nameLabel.text = [feedItem.creator fullName];
    self.dateLabel.text = [TimeFormatter newsTimeWithDate:feedItem.postedDate];
    self.detailTextView.text = [FeedItemCell detailTextViewStringFromFeedItem:feedItem];
    self.commentLabel.text = [self _commentsTitleWithNews:feedItem];
    self.avatarImageView.image = [feedItem.creator avatar];
} 
```

所有的`UILabel`s 都在`xib`-file 中定义![在此处输入图像描述](../Images/3f33f2bc7276d9bed2fcf8c73c98e46b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:55:42.117

看来我找到了解决方案。由于某种原因`UILabel`，iOS 4.3 中不支持 Helvetica Neue 字体（尽管`UITextView`确实如此）。我只是注意到它添加了其他测试`UILabel`，并在成功后试图找到新旧测试之间的区别。

因此现在只需要选择另一种合适的字体:)

非常感谢大家，也很抱歉无缘无故地打扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:08:09.923

这很奇怪。但我建议您在实际的 iOS 4.3 和 5.1 设备上进行测试。模拟器的准确率是 95%，而不是 100%。因此，您应该对设备进行完整性检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:25:05.600

看到你的代码真的很棒——特别是，我想看到：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

或者您在其他任何地方分配、实例化并添加这些行为不端`UILabel`的子视图。但我可以对可能出现的问题做出几个猜测：

*   您可能正在尝试在`UILabel`正确分配或实例化它之前设置它的元素。例如，如果您调用：

    ```
    [myLabel setText:@"Hello"]; 
    ```

    在您致电之前：

    ```
    UILabel *myLabel = [[UILabel alloc] initWithFrame:someFrame]; 
    ```

    如果你做这样的事情，它会很好地编译并在运行时静默失败。

*   您可能忘记将标签添加到正确的位置`UIView`- 在 a`UITableViewCell`中，内容通常应作为单元格`contentView`属性的子视图添加：

    ```
    [[myCell contentView] addSubview:myLabel]; 
    ```

还有一些其他的事情可能会发生，但我宁愿在盲目猜测之前先看看你正在使用的代码。那我会更新我的答案。

# opengl - 如何让 X 渲染到 OpenGL 纹理？

> ID：11745343
> 
> 赞同：0
> 
> 时间：2012-07-31T17:02:06.947
> 
> 标签：opengl, x11

我正在尝试编写一个合成器，例如 Compiz，但具有不同的图形效果。不过，我被困在第一步，即我找不到如何让 X 将窗口渲染到纹理而不是帧缓冲区。关于从哪里开始的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T23:32:41.277

X11 组成如下。

1.  您将窗口重定向到屏幕外区域。复合扩展具有此功能
2.  您使用损坏扩展来找出哪些窗口确实改变了它们的内容
3.  在合成器中，您使用[GLX_EXT_texture_from_pixmap](http://www.opengl.org/registry/specs/EXT/texture_from_pixmap.txt)扩展将每个窗口的内容提交到相应的 OpenGL 纹理中。
4.  您将纹理绘制到合成层窗口中；Composite 扩展为您提供了一个特殊的屏幕层，位于常规窗口层和屏幕保护程序层之间，在其中创建窗口组合。

# nhibernate - Nhibernate 找不到指定的文件

> ID：11745347
> 
> 赞同：0
> 
> 时间：2012-07-31T17:02:15.210
> 
> 标签：nhibernate, t4

我正在创建一个 t4 模板并尝试在模板中初始化 nhibernate。在 t4 运行时，我收到一个错误：

无法加载文件或程序集“Network.Framework.Entities”或其依赖项之一。该系统找不到指定的文件。

我了解错误的含义，但我不知道如何将此文件提供给 t4 运行时以便它可以找到它。我已将此文件添加为程序集和导入。我已将 dll 文件放在 VS 公共程序集目录、t4 临时目录以及与模板相同的目录中。没有任何效果。

和融合日志：

从以下位置加载的程序集管理器：C:\WINNT\Microsoft.NET\Framework\v4.0.30319\clr.dll 在可执行文件 C:\program files\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe 下运行

--- 详细的错误日志如下。

=== 预绑定状态信息 ===

日志：用户 = 我自己

日志：DisplayName = Network.Framework.Entities（部分）

警告：为程序集提供了部分绑定信息：

警告：程序集名称：Network.Framework.Entities | 域 ID：77

警告：仅提供部分程序集显示名称时会发生部分绑定。

警告：这可能会导致活页夹加载不正确的程序集。

警告：建议为程序集提供完全指定的文本标识，

WRN：由简单的名称、版本、文化和公钥标记组成。

警告：有关此问题的详细信息和常见解决方案，请参阅白皮书[http://go.microsoft.com/fwlink/?LinkId=109270](http://go.microsoft.com/fwlink/?LinkId=109270)。

日志：Appbase = file:///C:/program files/Microsoft Visual Studio 10.0/Common7/IDE/

日志：初始 PrivatePath = NULL

调用程序集：NHibernate，版本=3.3.0.4000，文化=中性，PublicKeyToken=aa95f207798dfdb4。

===

LOG：此绑定在 LoadFrom 加载上下文中开始。警告：将不会在 LoadFrom 上下文中探测本机图像。本机映像只会在默认加载上下文中进行探测，例如使用 Assembly.Load()。

LOG：使用应用程序配置文件：C:\program files\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe.Config

LOG：使用主机配置文件：

LOG：使用 C:\WINNT\Microsoft.NET\Framework\v4.0.30319\config\machine.config 中的机器配置文件。

LOG：此时未将策略应用于引用（私有、自定义、部分或基于位置的程序集绑定）。

LOG：之前看到过相同的绑定，但由于 hr = 0x80070002 失败。

这是我的模板：

```
<#@ template language="C#v4.0" hostspecific="True" debug="True" #>
<#@ output extension=".cs" #>
<#@ assembly name="mscorlib.dll" #>
<#@ assembly name="System.Xml.dll" #>
<#@ assembly name="System.Configuration.dll" #>
<#@ assembly name="EnvDTE.dll" #>
<#@ assembly name="$(SolutionDir)SharedDLLs\NHibernate.dll" #>
<#@ assembly name="$(SolutionDir)SharedDLLs\nunit.core.dll" #>
<#@ assembly name="$(SolutionDir)SharedDLLs\nunit.framework.dll" #>
<#@ assembly name="$(SolutionDir)SharedDLLs\NHibernate.Mapping.Attributes.dll" #>
<#@ assembly name="$(SolutionDir)SharedDLLs\Iesi.Collections.dll" #>
<#@ assembly name="$(SolutionDir)Network.Framework.Entities.Data\bin\Debug\Network.Framework.Entities.Data.dll" #>
<#@ assembly name="$(SolutionDir)Network.Framework.Entities\bin\Debug\Network.Framework.Entities.dll" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Configuration" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="Network.Framework.Entities.Data.BL" #>
<#@ import namespace="Network.Framework.Entities" #>
<#@ import namespace="NHibernate" #>
<#@ import namespace="NHibernate.Cfg" #>
<#@ import namespace="NHibernate.Mapping.Attributes" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="Network.Framework.Entities.DAL" #>
<#@ import namespace="System.Xml" #>
<#
    System.Diagnostics.Debugger.Launch();
    string path = Host.ResolvePath(@"..\Network.Framework.Entities\NHibernate.MSSQL.Config.xml");
    T4DataAccess<ReferenceValue> dal = CreateDataAccess<ReferenceValue>(path);
    ReferenceValueBL bl = new ReferenceValueBL(dal);
#>
using System;
namespace Network.Framework.Entities
{
    public class ReferenceValueKey
    {
        <#
            List<ReferenceValue> refVals = bl.Select();
            foreach(ReferenceValue rv in refVals)
            {
                Write("Public ");
                Write(rv.ReferenceValueCode.GetType().Name);
                Write(" ");
                Write(rv.ReferenceValueCode);
                Write(" = ");
                Write(rv.ReferenceValueCode);
            }
        #>
    }
}
<#+ 
    public ISessionFactory GetDBSession(string nHibernateConfigPath)
    {
        NHibernate.Cfg.Configuration cfg = new NHibernate.Cfg.Configuration().Configure(nHibernateConfigPath);
        var assembly = System.Reflection.Assembly.GetAssembly(typeof(Network.Framework.Entities.PlanCode));
        var serializedAssembly = HbmSerializer.Default.Serialize(assembly);
        cfg.AddInputStream(serializedAssembly);
        return cfg.BuildSessionFactory();
    }
    public T4DataAccess<T> CreateDataAccess<T>(string nHibernateConfigPath) where T : class
    {
        ISessionFactory db = GetDBSession(nHibernateConfigPath);
        return new T4DataAccess<T>(db);
    }
#> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:57:16.913

将此添加到您的 app.config

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="NHibernate" culture="neutral" publicKeyToken="aa95f207798dfdb4" />
        <bindingRedirect newVersion="3.3.1.4000" oldVersion="0.0.0.0-3.3.0.4000" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

# javascript - 获取节点的内部文本

> ID：11745355
> 
> 赞同：22
> 
> 时间：2012-07-31T17:02:32.703
> 
> 标签：javascript

我无法获取特定节点的内部文本。我已经添加了我正在使用的示例节点和我想出的 javascript。`<span id="goal_left">3 goals lect</span>`如果我将它记录到控制台，javascript 的工作原理就是返回它。如果我添加`innerText`到 javascript 示例中，它将不会向控制台返回任何内容。任何想法如何获取此文本？

html

```
<span id="goal_left">3 goals lect</span> 
```

javascript：这些示例返回`<span id="goal_left">3 goals lect</span>`

```
document.getElementById("goal_left");

document.querySelectorAll("span#goal_left")[0]; 
```

javascript：这些示例不返回任何内容

```
document.getElementById("goal_left").innerText;

document.querySelectorAll("span#goal_left")[0].innerText; 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-31T17:07:17.127

可能是最简单的方法：

```
document.querySelectorAll("span#goal_left")[0].firstChild.nodeValue; 
```

虽然如果你总是想要返回的第一个节点，`querySelectorAll()`你可以简单地使用：

```
document.querySelector("span#goal_left").firstChild.nodeValue; 
```

顺便说一句，我想任何实现的浏览器都`querySelectorAll()`可能实现`textContent`，给出：

```
document.querySelector("span#goal_left").textContent; 
```

只是为了提供一个跨浏览器选项：

```
var textProperty = 'textContent' in document ? 'textContent' : 'innerText';
document.getElementById('goal_left')[textProperty] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:05:56.443

该`innerHTML`物业可能是您正在寻找的。它将 HTML 代码作为字符串保存在元素内。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T17:09:47.257

document.getElementById("goal_left").innerHTML 而不是 innerText。

此外，您可能想使用 jQuery 来操作 DOM 元素，它更容易且不易出错。

# c# - 自定义验证器可能不显示错误消息的原因？

> ID：11745360
> 
> 赞同：3
> 
> 时间：2012-07-31T17:05:25.477
> 
> 标签：c#, asp.net, .net, validation

不幸的是，我无法向您展示代码，所以我只需要解释这个问题。

我在更新面板中有一个详细视图。我添加了一个自定义验证器，如果选择了单选按钮 A，它应该显示打开条件 TextBox A 中必须有一个值。

我设置了一个 OnServerValidate 方法来检查这个，如果它失败了，那么我将 args.Valid 设置为 false。

但是我的错误消息永远不会出现。如果我查看 IE 开发工具，我会看到带有硬编码消息的客户验证器，但它是隐藏的（可见性：隐藏）。

我试图找到 customvalidator 并强制显示可见性，甚至尝试通过 customValidator.Style.Remove("visibility") 将其删除，但没有任何效果。消息总是隐藏的。

该页面确实未能通过验证，就好像满足该条件一样，我的页面将不会保存。它只是不会显示我在自定义验证器中设置的消息。

**编辑**

我还尝试`Visible="true"`在自定义验证器的 aspx 代码中进行操作，但它仍然不会显示错误消息，并且在开发人员工具包中将其显示为隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T05:33:14.770

这里同样的问题。我尝试了一切，更改验证器上的样式属性，使用 Javascript 更改样式、Jquery 等。没有任何效果，它的样式始终是“可见性：隐藏”。

最终，我通过添加带有错误消息的标签来完成最荒谬的解决方法：

```
<asp:Label ID="ErrorLabel" runat="server" Visible="False" CssClass="validator-red">
    Error message here
</asp:Label> 
```

并在验证事件处理程序中手动显示：

```
protected void Validator_ServerValidate(object source, ServerValidateEventArgs args) {
    // Validation code, set args.IsValid here.

    ErrorLabel.Visible = !args.IsValid;
} 
```

这是所有验证器都应该包含的功能，但看起来 MS 把它塞进了这个。至少这可以可靠地工作。另外不要忘记设置`Display="None"`验证器，因为您不需要它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T19:30:24.187

我自己遇到了一个类似的问题并找到了这个线程，就在我找到答案之前......不确定它是否仍然值得，但这就是我所做的。

1) 我添加了以下内容（VB.net 代码，但您应该能够将其移植到 C#）：

```
My_Custom_Validator.Attributes.Add("class", "invalid") 
```

2）我创建了一个 CSS 无效的类规则：

```
.invalid {display:  block !important;  visibility:  visible !important;} 
```

!important 将覆盖由 .NET 代码创建的内联 CSS。将其设置为显示：块；没有必要，但我把它放在以防万一。

这并不能回答您关于为什么可见性的问题：隐藏；内联 CSS 出现......这只是一种解决方法。

# pdf - 为什么这个 Ink Annotation 显示的是曲线而不是直线？

> ID：11745362
> 
> 赞同：4
> 
> 时间：2012-07-31T17:05:29.190
> 
> 标签：pdf, pdf-generation

![在此处输入图像描述](../Images/89468489f6a9d422d66b1ed899808eb5.png)

我以字母 Z 的形式创建了一个墨水注释，如上所示，但是 Z 的角是圆角的。为什么会这样？我怎样才能避免这种额外的美化，使角落保持锐利并且点通过直线连接？

PDF代码：

```
%PDF-1.6
%μῦ

1 0 obj
<</Type/Catalog/Pages 2 0 R>>
endobj

2 0 obj
<</Type/Pages/Kids[3 0 R]/Count 1>>
endobj

3 0 obj
<</Type/Page/Parent 2 0 R/Resources<<>>/MediaBox[0 0 500 800]/Annots[4 0 R]>>
endobj

4 0 obj
<</Type/Annot/Subtype/Ink/Contents(<enter description here>)/InkList[[150 300 250 300 150 200 250 200]]/Rect[200 250 300 150]/P 3 0 R/F 4/C[1 0 0]>>
endobj

xref
0 5
0000000000 65536 f 
0000000017 00000 n 
0000000063 00000 n 
0000000115 00000 n 
0000000209 00000 n 

trailer
<</Size 5/Root 1 0 R>>

startxref
374
%%EOF 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T19:28:56.230

我不确定这里发生了什么，现在没有时间调查。

但这里有一些直接的观察结果作为额外的数据点：

*   **Mac OS X 的 Preview.app 显示带有锐利**边缘的 Z 形。
*   **Adobe Reader X 和 Adob​​e Acrobat X Pro（在 Mac OS X 上）显示带有圆**边的 Z 形。
*   **Ghostscript v9.05 显示了带有圆**边的 Z 形。
*   **Ghostscript 是从今天的 Git 存储库中自行编译的，它显示了带有圆**边的 Z 形。

**更新：**

好的，我快速浏览了 PDF-1.7 的官方 ISO 规范。它说的是关于`/Subtype /Ink`注释的`/InkList`：

> 一个由 n 个数组组成的数组，每个数组代表一个描边路径。每个数组应是默认用户空间中一系列交替的水平和垂直坐标，指定路径上的点。绘制时，点应通过直线**或曲线**以***实现相关的方式***连接。

（来自第*12.5.6.13 章 Ink Annotations*，我的重点）

因此，一种实现显示直线，另一种显示曲线是完全“合法的”。:-(

*叹...*

**更新 2：**

因此，如果要强制 Z 形在所有实现中显示为直线，则需要绘制 3 条不同的直线，每条直线由不同的数组表示，并将这 3 个数组放入容器数组中...

更改这部分代码：

```
/InkList
[
  [150 300 250 300 150 200 250 200]
] 
```

对此：

```
/InkList
[
  [150 300 250 300]
  [250 300 150 200]
  [150 200 250 200]
] 
```

你的 Z 形会显示出尖角。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T08:16:20.860

解决方案是还创建注释外观（注释字典中的 /AP 条目）。如果绘制直线的注释外观出现在 PDF 文件中，那么它将在显示文件时使用，您将在任何查看器中获得相同的结果。如果外观不存在，则查看器将根据注释定义构建外观，在您的情况下，此查看器构建的外观取决于实现。

# java - 是否需要在 onActivityResult() 中使用 super.onActivityResult()？

> ID：11745366
> 
> 赞同：70
> 
> 时间：2012-07-31T17:05:39.883
> 
> 标签：java, android

哪个更好，为什么？

这个：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);

    ...
} 
```

或这个：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    // do not call super.onActivityResult()
    ...
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-31T17:22:46.300

第一个更好。

它与 API 中的其他事件函数更加一致`Activity`，它不会花费您任何成本（您正在调用的代码目前什么都不做），这意味着您不需要记住在将来的行为时添加调用基类发生变化。

**编辑**

正如 Su-Au Hwang 所指出的，我对未来基类行为变化的预测已经成真！`FragmentActivity` **要求**您在`super`.

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-07-05T09:24:55.043

如果您使用支持包中的 FragmentActivity（也是 SherlockFragmentActivity），则应该调用 super.onActivityResult。否则没有必要，但是我只是为了它而将它插入那里。检查 FragmentActivity 的来源（没有 onActivityResult 不为空）。

[片段活动源](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/app/FragmentActivity.java)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T17:19:47.463

除非您的应用程序中有多个`Activity`依赖于它的子类，否则看起来`super.onActivityResult()`不需要调用，因为 的实现`onActivityResult()`是空的（我检查了 API 级别 15）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-31T17:19:57.303

您可以通过查看[Activity](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/Activity.java)的源代码自己回答这个问题。

基本上它的实现`onActivityResult(...)`看起来像这样......

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
} 
```

......所以什么都不做。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T17:21:10.477

尽管默认实现似乎是空的，但在未来的更新中可能并非总是如此。我会推荐使用它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-01T15:03:07.063

现在必须调用 super。它抛出“覆盖方法应该调用 super.onActivityResult”错误。添加 super 不会损害您的代码。

# php - 当我在注销后按下后退按钮时，PHP Codeigniter 显示缓存

> ID：11745368
> 
> 赞同：4
> 
> 时间：2012-07-31T17:05:45.063
> 
> 标签：php, codeigniter, session, caching

从我的应用程序注销后，当我按下后退按钮时，用户的所有登录选项仍显示在页面上。

登录后，当我按下后退按钮时，它将显示页面的注销版本。

我尝试在我的注销控制器中设置它

```
function logout() {
    $this->output->set_header('cache-Control: no-store, no-cache, must-revalidate');
    $this->output->set_header("cache-Control: post-check=0, pre-check=0", false);
    $this->output->set_header("Pragma: no-cache");
    $this->output->set_header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
    $this->tank_auth->logout();
    redirect(subdomain() . 'home');
} 
```

但是当我按下后退按钮时缓存仍然存在。我怎样才能解决这个问题？

- - -更新 - - -

我认为缓存不是这里的问题，我在开发人员设置中禁用了 chrome 中的缓存，但是当我按下后退按钮时，我的浏览器在注销后仍会进入安全页面。

所以缓存不是问题..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T18:03:39.790

您好抱歉说缓存不是问题。缓存是个问题！我通过将此代码放入 codeigniter 的 index.php 文件来解决此问题。

```
header("Expires: Thu, 19 Nov 1981 08:52:00 GMT");
header("Cache-Control: no-store, no-cache, must-revalidate"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-27T07:11:00.530

只需将其添加到您的控制器

```
 public function __construct()
      {
          parent::__construct();

           $this->output->set_header('Last-Modified:'.gmdate('D, d M Y H:i:s').'GMT');
           $this->output->set_header('Cache-Control: no-store, no-cache, must-revalidate');
           $this->output->set_header('Cache-Control: post-check=0, pre-check=0',false);
           $this->output->set_header('Pragma: no-cache');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:21:35.343

读这个我认为它对你很有用

[https://www.codeigniter.com/user_guide/libraries/caching.html](https://www.codeigniter.com/user_guide/libraries/caching.html)

[https://www.codeigniter.com/user_guide/database/caching.html](https://www.codeigniter.com/user_guide/database/caching.html)

试试这个

```
$this->cache->clean(); 
```

或者

```
$this->db->cache_delete_all(); 
```

# git - 是否可以使用结合了“子树”和“我们的”功能的 git 合并策略？

> ID：11745371
> 
> 赞同：2
> 
> 时间：2012-07-31T17:05:57.223
> 
> 标签：git, git-merge

我想将子树从父仓库合并回特定于子树的仓库，并指示 git 使用“我们的”丢弃冲突。更具体地说，我只需要为特定文件丢弃此类冲突。例如，a.html 始终使用“我们的”，但像往常一样处理其他冲突。

但是根据手册，“子树”和“我们的”的合并策略是互斥的。有没有可能实现这样的功能？

# c - 为什么 malloc(sizeof(pointer)) 工作？

> ID：11745377
> 
> 赞同：9
> 
> 时间：2012-07-31T17:07:01.183
> 
> 标签：c, pointers, gcc, malloc

以下代码工作正常：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    struct node{
        int a, b, c, d, e;
    };
    struct node *ptr = NULL;
    printf("Size of pointer ptr is %lu bytes\n",sizeof (ptr));
    printf("Size of struct node is %lu bytes\n",sizeof (struct node));
    ptr = (struct node*)malloc(sizeof (ptr));               //Line 1
//    ptr = (struct node*)malloc(sizeof (struct node));    //Line 2

    ptr->a = 1; ptr->b = 2; ptr->c = 3; ptr->d = 4; ptr->e = 5;
    printf("a: %d, b: %d, c: %d, d: %d, e: %d\n",
            ptr->a,ptr->b,ptr->c,ptr->d,ptr->e);
    return 0;
} 
```

当遵守为：

```
gcc -Wall file.c 
```

我的问题是：为什么这很好？

`malloc`分配在其参数中指定的字节数。这`sizeof ptr`是我的 64 位 linux 机器上的 8 个字节。我以为`malloc`会提供 8 个字节，但它是如何访问所有变量 a、b、c、d、e 的？是只有 gcc 还是我缺少标准 C 的东西？

据我所知，应该有“第 2 行”而不是“第 1 行”，但其中任何一行都可以正常工作。为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T17:10:44.680

您在这里有未定义的行为。

`malloc`将分配 8 个字节（如您所说），但这种转换是“坏的”：

```
ptr = (struct node*)malloc(sizeof (ptr)); 
```

在这一行之后，`ptr`将指向一个内存块，它只有 8 个分配的字节，其余的是一些“随机”字节。所以，制作

```
ptr->a = 1; ptr->b = 2; ptr->c = 3; ptr->d = 4; ptr->e = 5; 
```

您实际上更改了一些内存，而不仅仅是分配的`malloc`.

换句话说，您正在改写记忆，您不应该触摸。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T17:10:22.917

第 1 行不正确，**不会**分配足够的空间。如果您以后可以访问结构成员，那只是因为 C 没有做任何事情来阻止您访问不属于您的内存。

当您没有为整个结构分配足够的空间时访问`ptr->b`,等是未定义的行为，并且下次运行代码时它可能会崩溃，或者您最终可能会覆盖程序另一部分中的数据。`ptr-c`

为了演示这个问题，`struct node`在第一个之后立即分配第二个。这不能*保证*证明问题，但您可能会看到类似于以下的结果：

```
struct node *ptr = NULL;
struct node *ptr2 = NULL;

ptr = (struct node*)malloc(sizeof (ptr));  // Your Line 1
ptr2 = malloc(sizeof(struct node));        // alloc another struct on the heap

ptr->a = 1; ptr->b = 2; ptr->c = 3; ptr->d = 4; ptr->e = 5;
ptr2->a = 11; ptr->b = 12; ptr->c = 13; ptr->d = 14; ptr->e = 15;

printf("ptr:  a: %d, b: %d, c: %d, d: %d, e: %d\n",
        ptr->a, ptr->b, ptr->c, ptr->d, ptr->e);
printf("ptr2: a: %d, b: %d, c: %d, d: %d, e: %d\n",
        ptr2->a, ptr2->b, ptr2->c, ptr2->d, ptr2->e); 
```

输出：

```
ptr:  a: 1, b: 2, c: 3, d: 4, e: 11
ptr2: a: 11, b: 12, c: 13, d: 14, e: 15 
```

请注意，`ptr->e`已通过对 的赋值进行了修改`ptr2->a`，因此您可以看到一个分配不正确的结构正在踩踏另一个结构的内存。这肯定不是你想要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T17:11:06.313

`malloc`仅分配 8 个字节，但这并不能阻止您访问除此之外的内存。您可能会破坏堆并可能覆盖其他对象。程序的行为是未定义的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T17:12:00.183

在`ptr->a = 1; ptr->b = 2; ptr->c = 3; ptr->d = 4; ptr->e = 5;`您访问的内存超出了 malloc 分配的内存。
这是[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow)的情况并导致`undefined behaviour`.

这是可能的，因为

```
 C and C++ provide no built-in protection against accessing or overwriting data
in any part of memory. 
```

因此，它有时可能会起作用，有时它也可能会使程序崩溃。

# ios - 如何使用 ARC 在 iOS 上释放屏幕外的对象？

> ID：11745378
> 
> 赞同：1
> 
> 时间：2012-07-31T17:07:11.913
> 
> 标签：ios, automatic-ref-counting

我将一些 UIButtons 移出屏幕，当我浏览子视图时仍然可以枚举它们。我想“释放”它们以使脚本运行得更快，但是如何在带有 ARC 的 iOS 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:11:56.687

当您在 ARC 下时，“释放”一个对象所需要做的就是将所有对它的引用设置为`nil`.

在您的情况下，除非您将所有这些`UIButton`s 保存在一个数组或某个地方，否则您只需要在它们不在屏幕上时将它们从它们的超级视图中删除。当然，如果您以后再次需要它们，您将不得不重新添加它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:14:05.067

我怀疑你会看到任何性能影响，除非你有很多按钮，或者你的枚举块每个按钮都需要大量时间。

无论如何，你可以从它的超级视图中删除任何元素......

```
[view removeFromSuperView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:11:19.737

使用 ARC，您不能调用 dealloc、release 或 retain，尽管您仍然可以保留和释放 CoreFoundation 对象。遗憾的是，您在使用 ARC 时无法手动释放对象。您是否尝试过弱引用或强引用对象？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:34:01.837

感谢您的所有回复，但我的问题的正确答案（在发布实例对象时。我应该把它放在问题中......对不起，伙计们）如下：

```
for (int x =0; x<[toBeDeletedArray count]; x++) {
     UIButton* __weak butt = (UIButton*)[toBeDeletedArray objectAtIndex:x];
     [butt removeFromSuperview];
     butt = nil;
     } 
```

关键是声明它为“__weak”，然后可以设置为nil。

感谢您的所有灵感！

# mysql - 从 MAX(ID)、MIN(ID) MYSQL 查询中获取更多信息？

> ID：11745383
> 
> 赞同：7
> 
> 时间：2012-07-31T17:07:18.693
> 
> 标签：mysql, max, min

如何从`MAX(ID), MIN(ID)`MYSQL 查询中获取更多列？

目前我只得到两个值：`MAX(ID) & MIN(ID)`来自这个查询：

`SELECT MIN(ID), MAX(ID) FROM mytable WHERE mytable.series = 'white' ;`

需要得到类似这样的伪查询：

```
SELECT  column1, column2
FROM    mytable 
WHERE   series = 'white'
AND ID=Max(ID)
'AND GET ME ALSO'
WHERE   series = 'white'
AND ID=Min(ID);` 
```

它应该为等于“白色”的列“系列”返回 2 行。

第 1 列，第 1 列和第 2 列，ID=Min(ID)。ID = Max（ID）的第2列和第2列。

但是怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T17:10:13.207

这是一种使用方法`UNION`：

```
SELECT column1, column2
FROM mytable
WHERE series = 'white' AND ID IN
(    
    SELECT MIN(ID) FROM mytable WHERE series = 'white'
    UNION
    SELECT MAX(ID) FROM mytable WHERE series = 'white'
) 
```

为了获得良好的性能，请在`(series, id)`.

或其他可能具有更好性能的变体：

```
(
    SELECT column1, column2
    FROM mytable
    WHERE series = 'white'
    ORDER BY ID
    LIMIT 1
)
UNION
(
    SELECT column1, column2
    FROM mytable
    WHERE series = 'white'
    ORDER BY ID DESC
    LIMIT 1
) 
```

这也将能够在 上使用组合索引`(series, id)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T17:16:01.460

一个更简单的解决方案：

```
SELECT a.column1, a.column2
FROM   mytable a
JOIN   (
       SELECT MIN(ID) AS minid, MAX(ID) AS maxid
       FROM   mytable
       WHERE  series = 'white'
       ) b ON a.ID IN (b.minid, b.maxid) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:12:13.120

就像你说的那样：

```
SELECT
  column1, column2
FROM 
  mytable as m, 
  (SELECT MIN(ID) as mid, MAX(ID) as xid 
   FROM mytable WHERE mytable.series = 'white'
   ) t
WHERE 
  m.ID = t.mid or m.ID = t.xid; 
```

括号中的选择是您可以像另一个表一样使用的内部选择。

# c# - 在发送 HTTP 标头后，服务器无法附加标头 c# pdf inline

> ID：11745387
> 
> 赞同：4
> 
> 时间：2012-07-31T17:07:36.693
> 
> 标签：c#, .net, asp.net-mvc, http, pdf

因此，由于尝试返回 pdf 内联响应，我已经有一段时间遇到这个问题了。我在所有帮助编码页面中搜索了这个问题的答案，但找不到有效的东西。我在下面做了一个简化的例子。但核心与实际生产完全一样。这个问题并不总是发生，但是当它发生时它很烦人。这几乎就像是一些奇怪的时间问题或其他我没有看到的事情正在发生。

我收到此错误 System.Web.HttpException (0x80004005): File Not Found ---> System.Web.HttpException (0x80004005): Server cannot append header after HTTP headers have been sent。

有谁知道如何解决这一问题？？

```
 [HttpGet]
    public ActionResult PDF(string id, bool inline = false)
    {
        try
        {
            MemoryStream PDFStream = GetPdfStream(id);

            PDFStream.Position = 0;

            string PDFFile = "Test.pdf";

            if (inline)
            {
                Response.AppendHeader("Content-Disposition", string.Format("inline; filename={0}", PDFFile));
                Response.BufferOutput = true;
                return File(PDFStream, MediaTypeNames.Application.Pdf);
            }
            else
                return File(PDFStream, MediaTypeNames.Application.Pdf, PDFFile);
        }
        catch (Exception Ex)
        {
            throw new HttpException(404, "File Not Found", Ex);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:11:21.577

您必须先清除标题，然后再添加新标题

```
if (inline)
{
   Response.ClearHeaders();

Response.AppendHeader("Content-Disposition", string.Format("inline; filename={0}", PDFFile));
Response.BufferOutput = true;
return File(PDFStream, MediaTypeNames.Application.Pdf);
}
else
return File(PDFStream, MediaTypeNames.Application.Pdf, PDFFile); 
```

# java - Java-如何使 JPanel 窗口闪烁

> ID：11745391
> 
> 赞同：1
> 
> 时间：2012-07-31T17:07:53.137
> 
> 标签：java, swing, canvas, jpanel

我有一个 JPanel 窗口，上面画了一些东西。我想弄清楚如何使屏幕闪烁，例如一个简单的闪烁，以引起用户的注意？我发现了一个关于此的先前问题，但它不适用于我正在尝试做的事情。我有一个连续循环，可以根据一些变量更新屏幕。我只想让屏幕在某个点闪烁，然后恢复正常。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T00:20:19.600

您可以使用[Trident](http://kenai.com/projects/trident/pages/Home)在您的类中插入各种属性。这是一个为面板背景设置动画的演示：

```
import java.awt.Color;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import org.pushingpixels.trident.Timeline;
import org.pushingpixels.trident.Timeline.RepeatBehavior;

public class TestPanel {
    private static void createAndShowGUI() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel();
        panel.add(new JLabel("Some text"));

        frame.add(panel);
        frame.pack();
        frame.setVisible(true);

        final Timeline timeline = new Timeline(panel);
        timeline.addPropertyToInterpolate("background", panel.getBackground(),
                Color.red);
        timeline.setDuration(1000);

        timeline.playLoop(5, RepeatBehavior.REVERSE);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

***编辑：自动隐藏弹出窗口的评论***

您可以使用计时器来隐藏弹出窗口，例如：

```
import javax.swing.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class TempPopup {

    public static void main(String[] args) {

        JOptionPane pane = new JOptionPane("Message",
                JOptionPane.INFORMATION_MESSAGE);
        final JDialog dialog = pane.createDialog(null, "Title");

        Timer timer = new Timer(2000, new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                dialog.setVisible(false);
                dialog.dispose();
            }
        });
        timer.setRepeats(false);
        timer.start();
        dialog.setVisible(true);
        dialog.dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T18:00:34.543

使用如下示例演示中的玻璃窗格组件：

```
 import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Demo {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        final JPanel panel = new JPanel();
        frame.add(panel);

        JComponent flashPane = new JComponent() {
            @Override
            public void paint(Graphics g) {
                // Add code to draw whatever you want to grab attention here
                g.setColor(Color.CYAN);
                g.fillRect(0, 0, panel.getWidth(), panel.getHeight());
                super.paint(g);
            }
        };

        panel.getRootPane().setGlassPane(flashPane);
        frame.setBounds(0, 0, 200, 200);
        frame.setVisible(true);

        // Sample loop to flash every 2 seconds
        while(true) {
            try {
                Thread.sleep(2000);
                flashPane.setVisible(true);
                Thread.sleep(200);
                flashPane.setVisible(false);
            } catch(Exception ex) {
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T23:13:59.417

我建议这样的伪代码：

```
if(your flash condition is true){
yourFrame.visible = False; // no longer display the frame.
Thread.sleep(500); // waits for half a second.
yourFrame.visible = True; // show the frame again.
} 
```

您可能需要验证您的视图（框架），以确保在线程唤醒并再次显示框架后反映模型中可能发生的任何更改（变量等）。

# javascript - 按钮单击画布时出现问题

> ID：11745392
> 
> 赞同：-1
> 
> 时间：2012-07-31T17:07:54.127
> 
> 标签：javascript, html

我有一个画布，它允许人们在画布上画线，试图实现三个按钮来改变他们画的线条的颜色，还有一个按钮来清除画布。第一个代码是我的 html，它初始化画布、按钮，然后调用 javascript 文件：

```
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Paint Canvas</title>
    <style type="text/css"><!--
      #container { position: relative; }
      #imageView { border: 3px solid #000; }
    --></style>
  </head>
  <body>
    <div id="container">
      <canvas id="imageView" width="600" height="300">

      </p>

      </canvas>
    </div>

    <script type="text/javascript" 
             src=".js">
    </script>

    <input type= "button" value= "Green" id= "green" onclick= "GreenRect()" />
    <input type= "button" value= "Red" id= "red" onclick= "RedRect()" />
    <input type= "button" value= "clear canvas" id= "clear" onclick= "ImgClr()" />

    <button id="howdy">Howdy!</button>

    <br>

  </body 
```

这是javascript代码：

```
//Call Window onload
if (window.addEventListener) {
    window.addEventListener('load', function() {
        var canvas, context, tool;

        function init() {
            // Find Canvas
            canvas = document.getElementById('imageView')
            if (!canvas) {
                alert('Error: I cannot find the canvas element!');
                return;
            }

            if (!canvas.getContext) {
                alert('Error: no canvas.getContext!');
                return;
            }

            context = canvas.getContext('2d');
            if (!context) {
                alert('Error: failed to getContext!');
                return;
            }

            //Instance of drawing tool
            tool = new tool_pencil();

            // Enables mousedown, mousemove, and mouseup event
            canvas.addEventListener('mousedown', ev_canvas, false);
            canvas.addEventListener('mousemove', ev_canvas, false);
            canvas.addEventListener('mouseup', ev_canvas, false);
        }

        function howdy() {
            alert("Howdy!");
        }

        //drawing tool works like a simulated drawing
        function tool_pencil() {
            var tool = this;
            this.started = false;

            /* function event that initializes when mousedown and
             starts drawing tool on mousedown*/
            this.mousedown = function(ev) {
                context.beginPath();
                context.moveTo(ev._x, ev._y);
                tool.started = true;
            };

            // draws on function mousemoves and sets a specific color and width
            // to line

            this.mousemove = function(ev) {
                if (tool.started) {
                    context.lineTo(ev._x, ev._y);
                    context.stroke();
                    context.strokeStyle = '#FF4500';
                    context.lineWidth = 8;
                    context.fillStyle = 'blue';
                    context.fill();
                }
            };

            // mouseup function, stops drawing
            this.mouseup = function(ev) {
                if (tool.started) {
                    tool.mousemove(ev);
                    tool.started = false;
                }
            };
        }

        /* finds mouse position on canvas*/
        function ev_canvas(ev) {
            if (ev.layerX || ev.layerX == 0) {
                ev._x = ev.layerX;
                ev._y = ev.layerY;
            } else if (ev.offsetX || ev.offsetX == 0) {
                ev._x = ev.offsetX;
                ev._y = ev.offsetY;
            }

            var func = tool[ev.type];
            if (func) {
                func(ev);
            }
        }

        init();

    }, false);

    function GreenRect() {
        context.strokeStyle = 'green';
        context.stroke();
    }

    function RedRect() {
        context.strokeStyle = 'red';
        context.stroke();
    }

    function ImgClr() {
        context.clearRect(0, 0, 600, 300);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:05:01.660

变量`context`无法进入`GreenRect`和`RedRect`函数范围。尝试`contex`在 js 代码的第一行使其全局定义。

您还应该尝试编写更具可读性的代码——这将帮助您和其他人找到错误。

`script`标签中也没有脚本名称：

```
<script type="text/javascript" 
             src=".js">
</script> 
```

并`p`在您的标签中有不必要的`canvas`标签：

```
<canvas id="imageView" width="600" height="300">

      </p>

</canvas> 
```

# arrays - 如何让 Judy Array 示例正确编译？

> ID：11745394
> 
> 赞同：1
> 
> 时间：2012-07-31T17:07:55.210
> 
> 标签：arrays, gcc, compiler-construction

我正在尝试编译[http://judy.sourceforge.net/doc/JudySL_3x.htm#JSLG](http://judy.sourceforge.net/doc/JudySL_3x.htm#JSLG)给出的示例。我已经根据发行版下载、`configure`'d、`make`'d 和`sudo make install`'d Judy 库。但是，当我编译（Mac 上的 GCC）时，我收到以下错误：

```
Undefined symbols:
"_JudySLFreeArray", referenced from:
    _main in ccziTK43.o
"_JudySLNext", referenced from:
    _main in ccziTK43.o
"_JudySLIns", referenced from:
    _main in ccziTK43.o
"_JudySLFirst", referenced from:
    _main in ccziTK43.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

任何人都可以向我指出有关如何解决此问题的信息方向吗？（只是为了记录，正在编译的文件是一个 C 模块，是的。）

另外，我的命令很简单`gcc test.c`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T00:45:10.713

您需要告诉`gcc`链接到 Judy 库，使用`-l`选项 - 例如

```
gcc -lJudy test.c 
```

# android - 我可以扩展一个复合可绘制对象，使其几乎与 EditText 小部件匹配吗？

> ID：11745397
> 
> 赞同：0
> 
> 时间：2012-07-31T17:08:07.607
> 
> 标签：android, android-widget, android-edittext

我想以与 EditText 框宽度匹配的方式将复合可绘制对象放在 EditText 的底部（然后，在左右添加一些填充）。

由于 EditText 组件的宽度各不相同，我想知道是否可以在不对 dips 进行硬编码的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:04:59.523

他们为 EditText 做的方式是使用一个 9 补丁 png，Android 会自动为你扩展。

# c# - Storyboard.RepeatBehavior 无效

> ID：11745398
> 
> 赞同：1
> 
> 时间：2012-07-31T17:08:07.927
> 
> 标签：c#, wpf, animation, storyboard

我有一个程序，我在其中添加了一个按钮来切换天气，或者我正在使用的故事板不应该重复

```
private void Repeat_Click(object sender, RoutedEventArgs e)
{
  if (globalStoryboard.Children.Count != 0)
  {
    if (globalStoryboard.RepeatBehavior == RepeatBehavior.Forever)
      globalStoryboard.RepeatBehavior = new RepeatBehavior(1.0);
    else
      globalStoryboard.RepeatBehavior = RepeatBehavior.Forever;
  }
} 
```

但它根本不起作用。当动画到达第一次播放结束时， Completed 事件会触发（它不应该这样做）并且动画会停止（或者）。我尝试了几种不同的方法都无济于事，我所有的搜索似乎都表明这是一个孤立的问题。

我在这里做错了什么？

这是我在情节提要中添加一些动画的地方之一。被切掉的函数返回 Storyboard s，然后我将其作为 GlobalStoryboard 的子级。我已经尝试将 GlobalStoryboard 传递给函数并将动画直接添加到它以删除中间故事板。它没有解决问题。

```
double last = ((data[0] - min) / delta) * angle;
for (double k = 1.001; k < data.Count; k++)
{
  double val = ((data[(int)k] - min) / delta) * angle;
  DoubleAnimation doubleAnimation = new DoubleAnimation();
  doubleAnimation.From = last;
  doubleAnimation.To = val;
  doubleAnimation.Duration = new Duration(TimeSpan.FromSeconds(1));
  doubleAnimation.BeginTime = TimeSpan.FromSeconds(k - 1);
  s.Children.Add(doubleAnimation);
  Storyboard.SetTargetName(doubleAnimation, "AxisRotation" + index);
  Storyboard.SetTargetProperty(doubleAnimation, new PropertyPath("Angle"));
  last = val;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T15:57:51.510

LPL was correct, when a storyboard is animating it is frozen to prevent interference. I just made the repeat button bind to a Boolean and made the completed event play the storyboard again if it was true.

# actionscript-3 - 引用兄弟对象

> ID：11745403
> 
> 赞同：0
> 
> 时间：2012-07-31T17:08:16.327
> 
> 标签：actionscript-3, class

我有一个名为**mc_menu**的库对象，并附加了一个类代码。班级在舞台上建立一个菜单并将 MC 放在舞台上（并通过单击菜单来替换它们）。我正在尝试调用从父类放置在舞台上的对象，但我找不到正确的方法。

主代码位于 main.因为这是代码的重要部分：

```
public class main extends MovieClip {
        public function main() {

            //add container layers
            addChild(bottomLayer);
            addChild(topLayer);

            topLayer.addChild(menuInst);
            menuInst.init();

}

     public var menuInst= new mc_Menu;            
    public var topLayer:Sprite = new Sprite();
    public var bottomLayer:Sprite = new Sprite(); 
```

如您所见，我在主舞台上准备了 2 层精灵供以后使用。菜单应该放在顶层（因为它成功），并且只要其他对象将放在底层内，项目本身的 MCs 就可以了。

那么问题就是这样。我试图告诉 menuClass 调用底层，但我找不到正确引用它的方法。

这是代码部分：mcMenu.as

```
public class mc_Menu extends MovieClip {

        public function mc_Menu() {

        }

public function init():void{    
        bottomLayer.addChild(masterChapter);
} 
```

我知道这不能这样做，因为在类范围内它不知道“bottomLayer”。但你能帮我怎么做吗？

我更喜欢将图层实例留在主类中（而不是将它们放在菜单类中），因为其他元素稍后会使用它们。（除非我别无选择……）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:33:18.023

您可以通过 mc_Menu 实例的父级引用 bottomLayer，这是一个坏主意的唯一原因是如果您打算重新使用 mc_Menu 并且它将有不同的父级。在编程方面，类将紧密耦合，但这将是一个快速而肮脏的解决方案：

```
public function init():void{    
        parent.parent.bottomLayer.addChild(masterChapter);
} 
```

更好的选择是使用“单例”模式或某种依赖注入 MVC 或 MVVM 框架，如机器人腿或 SpringAS 或其他您可以在主元素和子元素之外声明实例并注入值/实例的东西进入两者。

**编辑**

在考虑了一秒钟之后，另一个选择是在创建时将 bottomLayer 的实例传递到 mc_Menu 中，如下所示：

```
public class mc_Menu extends MovieClip {
    private var _bottomLayerHandle:Sprite;
    public function mc_Menu(bottomLayer:Sprite)
    {
        _bottomLayerHandle = bottomLayer;
    }
    public function init():void{    
        _bottomLayerHandle.addChild(masterChapter);
    }
} 
```

然后在创建它们时重新排列，以便首先制作 Sprite：

```
public var bottomLayer:Sprite = new Sprite();
public var topLayer:Sprite = new Sprite();
public var menuInst= new mc_Menu(bottomLayer); 
```

# c - Webkit GTK：公开 HTTP 标头

> ID：11745405
> 
> 赞同：1
> 
> 时间：2012-07-31T17:08:23.303
> 
> 标签：c, webkit, gtk, webkitgtk

在用 C 语言尝试 WebkitGTK 并查看[文档](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html)后，我发现大多数与网页加载相关的信号/事件都是围绕页面开始加载或完成加载时的。

但是，无论如何我都没有看到请求的实际 HTTP 标头被公开。因此，我无论如何都看不到检测到，例如，如果`webkit_web_view_load_uri`加载的页面出现 404 错误。错误报告机制似乎只关注*网络错误*，而不是 HTTP 错误。事实上，我根本看不出与 WebkitGTK API 中暴露的 HTTP 有任何关系。

我只是在这里遗漏了什么吗？我什至 grep 了整个`webkit`包含目录`http`，`HTTP`但没有出现任何相关内容。那么有没有办法确定下载的页面是否是 HTTP 错误（除 之外的其他错误代码`200 OK`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:00:34.533

WebKit 只是布局引擎，不包括 HTTP 支持。在 WebKitGTK 端口中，HTTP 由 libsoup 处理。你得到`SoupSession`使用`webkit_get_default_session`并从那里开始。

# ruby - 检查元素是否有两个类

> ID：11745409
> 
> 赞同：8
> 
> 时间：2012-07-31T17:08:29.103
> 
> 标签：ruby, xpath, capybara

我有 2 个可能的 div。

```
<div class='a b'></div> 
```

和

```
<div class='c d'></div> 
```

有没有办法检查 div 元素是否有 2 个类 a 和 b？

我使用 Ruby、Capybara 和 XPath 来选择元素，但如果 css 可以解决问题，它就很好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T17:55:26.187

这个 css 选择器应该在 capybara 中工作：

```
page.has_css?('div.a.b') 
```

这将匹配

`<div class="a b">`但不是`<div class="a">`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T17:54:18.727

你可以这样做 ：

```
page.should have_css('div.a.b') 
```

如果你不使用 rspec，它是这样的：

```
page.has_css?('div.a.b') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T05:08:05.730

**XPath 解决方案**：

**使用**：

```
div[contains(concat(' ', @class, ' '), ' a ')
  and
    contains(concat(' ', @class, ' '), ' b ')
   ] 
```

这将选择`div`上下文节点的任何子节点，其`class`属性包含类`"a"`和`"b"`。

**如果要求`class`任何选定的属性`div`完全（仅）包含这两个类而不包含其他类，请使用**：

```
div[contains(concat(' ', @class, ' '), ' a ')
  and
    contains(concat(' ', @class, ' '), ' b ')
  and
    string-length(normalize-space(@class)) = 3
   ] 
```

# javascript - 难以引用函数，使用原型

> ID：11745413
> 
> 赞同：0
> 
> 时间：2012-07-31T17:08:40.493
> 
> 标签：javascript

我正在开发带有游戏循环的 HTML 5 Canvas 游戏。

到目前为止，这是我的代码。它什么也没做，这很好，但我收到一个错误

TypeError: Object [object DOMWindow] has no method 'Update' [http://localhost:2516/scripts/lib/Game.js:47]

编辑：此代码有效，它不再反映问题，而是反映了解决方案

```
 var game;
    var Game = function () {
    }

   Game.prototype.Update = function () {

}

Game.prototype.Draw = function () {

}

function GameLoop () {

    game.Update(); //this is line 47
    //context.save();
    game.Draw();
   // context.restore();
    setTimeout(GameLoop, 10);
}
function Start() {
    game = new Game();
   GameLoop();
} 
```

编辑：我认为“this”正在查看文档而不是 Game 对象，我不明白为什么或如何修复它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:24:27.523

问题可能与以下行有关`GameLoop`：

```
setTimeout(this.GameLoop, 10); 
```

您不能传递“方法”引用；只有函数引用。因此，当 this 由 调用时`setTimeout`，它将在没有设置上下文的情况下调用，就像您将其称为：

```
GameLoop(); 
```

你必须要么[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)：

```
setTimeout(this.GameLoop.bind(this), 10); 
```

或者将其包装在另一个类似于`bind`将要执行的函数中（另存`this`为`self`函数将具有自己的值`this`）：

```
var self = this;
// ...
setTimeout(function () {
    self.GameLoop();
}, 10); 
```

# ios - 如何检查当前的 RestKit 版本

> ID：11745414
> 
> 赞同：5
> 
> 时间：2012-07-31T17:08:44.050
> 
> 标签：ios, restkit

我在工作中继承了一个 iOS 项目，感觉它使用的是旧版本的 RestKit。我在哪里可以检查？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T03:43:52.853

在更加熟悉*了*RestKit 是如何实际链接到项目、文件所在的位置等之后，我偶然发现了答案：

*   浏览到包含 RestKit 的 xCode 项目的位置
*   打开或 cd 进入 RestKit 文件夹
*   在 vim 或其他文本编辑器中打开 VERSION，版本号将在此处列出

我想我对 RestKit 文件的位置非常天真。应该先在那里检查版本信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:24:42.013

在我的 RestKit 版本（截至 2013 年 2 月 20 日的最新版本）中，xcode 工作区文件夹下的文件名为“RestKit.podspec”（我使用 CocoaPods 安装了 RestKit）。以下是在文件顶部查找的内容：

```
Pod::Spec.new do |s|
    s.name         =  'RestKit'
    s.version      =  '0.20.0rc1'
    ... etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T17:59:24.120

如果您使用的是 CocoaPods，只需运行`pod install`，您将获得包含以下信息的打印输出。

```
Analyzing dependencies
Downloading dependencies
Using AFNetworking (1.3.3)
Using RestKit (0.20.3)
Using SOCKit (1.1)
Using TransitionKit (1.1.1)
Generating Pods project
Integrating client project 
```

# google-app-engine - 西里尔文的 Google App Engine

> ID：11745418
> 
> 赞同：1
> 
> 时间：2012-07-31T17:08:50.480
> 
> 标签：google-app-engine, encoding, character-encoding

如何在 GAE 的 html 代码中获取西里尔文文本？

我试过了

```
<meta http-equiv="content-type" content="text/html; charset=windows-1251" /> 
```

和

```
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" /> 
```

在 head 标签中，但它似乎不起作用。我得到“猴子语言”上的西里尔符号，例如

Ñ„Ð´Ñ„ fÐ³Ð³Ñ„Ð³Ñ„Ð³Ð´ÑÐ²

我的 HTML 代码如下

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>

    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />

    <link href="./css/common.css" rel="stylesheet" type="text/css" />
    <title>Заглавие</title>
  </head>

  <body>  
   Здравей!
  </body>
</html> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T10:12:48.993

我已经想通了！

问题是该文档是 JSP 而不是 HTML 文件。

如果有人想要 jsp 文件中的西里尔字母，应该添加

```
<%@ page contentType="text/html;charset=UTF-8" %> 
```

在文件的开头。

# mysql - 为什么我的存储过程返回“？” 在 UTF-8 中的 select 语句中插入或返回空

> ID：11745419
> 
> 赞同：0
> 
> 时间：2012-07-31T17:08:52.200
> 
> 标签：mysql, stored-procedures

我有几个使用 VARCHAR 参数作为输入的过程，当我将新数据库上传到我的服务器时，我遇到了将 VARCHAR 参数作为输入的问题。

该存储过程将字符串更改为`?`（问题唱）

例如我有这个存储过程：

```
CREATE PROCEDURE `sp_insert`(
IN _title VARCHAR(30))
BEGIN
    INSERT INTO `myTable` SET `title` = _title
;END// 
```

这个查询可能是这样工作的：

> 插入`myTable`设置`title`= '???'

为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:08:52.200

如果您在文本中使用 utf8 数据，则在我导入任何数据之前我的数据库不是 utf8 排序规则时会出现此问题。

我必须注意，要记住 utf8 数据库的这 3 个步骤：

1.  连接必须是“SET NAMES UTF8”
2.  数据库必须设置 UTF8 排序规则，然后导入数据或插入任何记录
3.  所有表和 varchar 字段都必须设置 UTF8 排序规则

# javascript - Twitter Bootstrap TypeAhead 像下拉列表/选择具有自动完成功能的标签一样工作

> ID：11745422
> 
> 赞同：29
> 
> 时间：2012-07-31T17:09:01.057
> 
> 标签：javascript, jquery, twitter-bootstrap, typeahead

我希望使用 Twitter Bootstrap TypeAhead 使用具有自动完成功能的下拉列表/< 选择 > HTML 标记行为。[这里](http://dl.dropbox.com/u/21368/bootstrap-combobox/index.html?)的链接实现了组合框的功能，用户也可以提供自己的输入。我想限制用户只能从提供的选项中进行选择。有什么方法可以调整 Twitter Bootstrap TypeAhead 插件来模拟具有自动完成功能的下拉列表/标签的行为。

我在发布之前提到了以下问题

1.  [向 Twitter bootstrap typeahead 组件添加下拉按钮](https://stackoverflow.com/questions/10689830/adding-a-dropdown-button-to-twitter-bootstrap-typeahead-component)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-02T19:11:35.483

我刚刚发现了这个很棒的插件，它使用 bootstrap typeahead 将标准的 SELECT 元素变成了非常无缝的漂亮样式的组合框。它看起来非常好，我将在我的下一个项目中使用它。

[https://github.com/danielfarrell/bootstrap-combobox](https://github.com/danielfarrell/bootstrap-combobox)

[现场示例](https://bootstrap-combobox-test.herokuapp.com/)（引导程序 3）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-11T08:45:59.037

对 davidkonrads 答案的微小改进以在键入时保留过滤器功能。

```
$(document).ready(function() {

$("#test").typeahead({
    "source": ['Pennsylvania', 'Connecticut', 'New York', 'Maryland', 'Virginia'],
    //match any item
    matcher: function(item) {
        if (this.query == '*') {
            return true;
        } else {
            return item.indexOf(this.query) >= 0;
        }
    },
    //avoid highlightning of "*"
    highlighter: function(item) {
        return "<div>" + item + "</div>"
    }
});

// "select"-button
$(".showAll").click(function(event) {
    var $input = $("#test");
    //add something to ensure the menu will be shown
    $input.val('*');
    $input.typeahead('lookup');
    $input.val('');
});

}); 
```

[http://jsfiddle.net/d4kris/5rtGA/3/](http://jsfiddle.net/d4kris/5rtGA/3/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T16:57:26.993

这确实是可能的 - 甚至非常简单 -*如果*您愿意不显示突出显示的匹配结果，则无需更改 typeahead javascript / 使用更改的代码。

HTML：

```
<input name="test" id="test"/>
<button id="emu-select" class="btn btn-small" type="button">
<i class="icon-arrow-down"></i>
</button> 
```

脚本：

```
$(document).ready(function() {

    $("#test").typeahead({
        "source": ['Pennsylvania','Connecticut','New York','Maryland','Virginia'],
        //match any item
        matcher : function (item) {
            return true;
        },
        //avoid highlightning of "a"
        highlighter: function (item) {
            return "<div>"+item+"</div>"
        }
    });

    // "select"-button
    $("#emu-select").click(function(){
        //add something to ensure the menu will be shown
        $("#test").val('a');
        $("#test").typeahead('lookup');
        $("#test").val('');
    });
}); 
```

[jsfiddle http://jsfiddle.net/davidkonrad/ZJMBE/3/](http://jsfiddle.net/davidkonrad/ZJMBE/3/)上的工作代码/示例

# javascript - 长列表项创建不需要的缩进

> ID：11745423
> 
> 赞同：0
> 
> 时间：2012-07-31T17:09:01.297
> 
> 标签：javascript, jquery, html, css

这个问题很难描述，所以我创建了一个 jsfiddle。您可以看到菜单中的最后一项突出到右侧，与其他菜单项不同。如果其他菜单项占用多于一行，则会发生这种情况。

[http://jsfiddle.net/V82un/](http://jsfiddle.net/V82un/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:13:20.873

这是因为`<a>`元素是`display: inline;`默认的，所以边框只出现在第二行的末尾。换成`#sidebar_all_pages a`，`display: block`问题就解决了。但它揭示了另一个问题：负边距`#sidebar_all_pages li`太大。减少它来`-10px`解决那个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:12:45.500

`text-align: right`意味着文本是右对齐的。这意味着每行文本的右边缘将粘在其容器的右内边缘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:18:03.617

如何使用以下 css 规则将文本包装在跨度中：

```
display:inline-block;
max-width:190px; 
```

[**演示**](http://jsfiddle.net/5XuTV/)

# sql - 选择带大小写的语句，然后给出错误

> ID：11745426
> 
> 赞同：0
> 
> 时间：2012-07-31T17:09:21.063
> 
> 标签：sql, sql-server, tsql

我有一个复杂的存储过程，它必须将 AmountSold 的总和作为 AmountSold 返回，将 AmountCollected 的总和作为 AmountCollected 返回，而且我的行既没有 Sold 也没有收集，而是具有 Upgraded 和 UpgradedCollected 列。根据以下条件，该金额必须添加到 Sold、collected 或 UpgradedCollected。我真的不明白“关键字附近的语法错误”和“关键字那么”的语法错误。我在这里做错了什么？先感谢您！

在前两个 if 中，我编写了不同的代码，假设它们中的任何一个都应该是正确的。这是在 SQL 05 中。

```
Select sum(cast(RDC.AmountSold as numeric(10,2))) as AmountSold, 
sum(cast(RDC.AmountCollected as numeric(10,2))) as AmountCollected,

case when RDC.AmountUpgraded = RDC.AmountUpgradedCollected
        then sum(cast((AmountSold + RDC.AmountUpgraded)as numeric(10,2))) as AmountSold
        and sum(cast((AmountCollected + RDC.AmountUpgradedCollected)as numeric(10,2))) as AmountCollected
        else if RDC.AmountUpgraded > RDC.AmountUpgradedCollected
        then AmountSold = AmountSold + RDC.AmountUpgraded 
        and AmountCollected = AmountCollected + RDC.AmountUpgradedCollected
        else
        then AmountSold = AmountSold + RDC.AmountUpgraded 
        and AmountCollected = AmountCollected + RDC.AmountUpgraded 
        and AmountUpgradedCollected = AmountUpgradedCollected + (RDC.AmountUpgradedCollected - RDC.AmountUpgraded)
        as AmountUpgradedCollected

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:26:19.430

不幸的是，SQL 案例语句不能按照您尝试使用它们的方式工作。当在`SELECT`语句中使用它们时，每个 case 表达式一次只能定义一列。因此，以下内容应该适合您。

```
Select sum(cast(RDC.AmountSold as numeric(10,2))) as AmountSold, 
sum(cast(RDC.AmountCollected as numeric(10,2))) as AmountCollected,

SUM(CASE WHEN RDC.AmountUpgraded = RDC.AmountUpgradedCollected
  THEN CAST(AmountSold + RDC.AmountUpgraded as numeric(10,2))
  ELSE CAST(AmountSold + RDC.AmountUpgraded as numeric(10,2))
END) AS AmountSold,

SUM(CASE WHEN RDC.AmountUpgraded = RDC.AmountUpgradedCollected
  THEN cast(AmountCollected + RDC.AmountUpgradedCollected as numeric(10,2))
  ELSE cast(AmountCollected + RDC.AmountUpgraded  as numeric(10,2))
END) AS AmountCollected 
```

你会注意到，当你用这种方式编写它时，AmountSold 案例语句中有一些重复的逻辑，你可以简化它们。

# android - Kindle fire 菜单图标

> ID：11745428
> 
> 赞同：1
> 
> 时间：2012-07-31T17:09:27.880
> 
> 标签：android, themes, kindle

我正在为我的 Android 应用程序使用浅色主题：

```
<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/android:Theme.Light.NoTitleBar"  ... 
```

它可以在许多不同的设备上运行，包括 Kindle Fire。Kindle Fire 中的菜单栏（或“操作栏”）总是有黑色背景，所以我的图标在这里变得不可见。我有额外的 Kindle 图标集。我应该把它放在哪里（是否有某种预定义的文件夹名称？）或者我如何指出我应该将这个图标用于 Kindle，以及用于其他设备。

现在我有了 drawable-hdpi、drawable-ldpi、drawable-mdpi 和 drawable-xhdpi，我把所有的图标和图像都放在这里。我应该如何更改结构以为 Kindle 添加灯光图标？或者我可以用浅色背景在 Kindle 中制作菜单栏？

# jquery - 制作 chrome 下载 mp3

> ID：11745429
> 
> 赞同：0
> 
> 时间：2012-07-31T17:09:32.257
> 
> 标签：jquery, google-chrome, mp3

如您所知，chrome 正在使用自己的播放器播放 mp3 文件。但我需要将它下载到我的文件系统中。我试过这个，但没有任何结果：

```
$('.audio_download').click(function(){
    var s = $(this).attr('value');
    $('body').append('<iframe src='+s+' class="dlframe"></iframe>');
    $('iframe.dlframe').ready(function(){
        $(this).remove();
    });
}); 
```

我检查了控制台，并在那里发现：资源解释为文档，但使用 MIME 类型音频/mpeg 传输：“ *some-url* .mp3”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-30T11:40:10.013

设置属性“下载”如

```
<a href='file.mp3' download='Very-Very-Good.mp3'>download</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:30:10.360

您需要在您的网络服务器上修改 htaccess，如[http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/](http://css-tricks.com/snippets/htaccess/force-files-to-download-not-open-in-browser/)

# c# - 鼠标调整表格列的大小

> ID：11745432
> 
> 赞同：1
> 
> 时间：2012-07-31T17:09:41.383
> 
> 标签：c#, javascript, jquery, asp.net-mvc-3

在 Windows 应用程序中，我们经常看到在单行中可见的表格数据。列有一些最大宽度，其余文本被截断。通过在所述列上单击和拖动鼠标，可以使所述文本可见。

可以通过 JavaScript/jQuery 或（不太可取的）devexpress 在 Web 中模拟这种行为吗？

换句话说，我该如何扩展...

```
<table>
<tr>
<td>column data</td>
<td>column 2 data lots of text where this text does not fit on screen and is truncated</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:13:18.093

你应该看看[Flexigrid](http://www.flexigrid.info/) jQuery 插件：

这是一个演示：[http ://www.flexigrid.info/sample.html](http://www.flexigrid.info/sample.html)

# c# - 优化实体框架查询 - 超时已过期

> ID：11745434
> 
> 赞同：0
> 
> 时间：2012-07-31T17:09:45.477
> 
> 标签：c#, .net, linq, entity-framework, query-optimization

我在实体框架中有 2 个非常简单的查询，它们按外键列分组。换句话说，表字段是：

```
pk : Primary key
name : name of object
f1: foreign key1
f2: foreign key2
... 
```

我收到超时异常，尤其是这个：

```
Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) 
```

查询是：

```
var q = from x in db.Table select x;
var query_1 = q.GroupBy (record => record.f1);
var query2 = q.GroupBy(record => new {record.f1, record.f2}); 
```

我在 DB 中有大约 30,000 条记录，我无法理解为什么一个简单的 group by 会超时。你对我应该怎么做有什么建议吗？由于我使用的是 Entity Framework 4.1，我想从实现中抽象出数据库，所以我想要一个不会改变数据库引擎本身的任何东西的解决方案。索引 f1 或 f2（或两者）字段可以让我更快地查询吗？如果是这样，有人可以解释索引的概念以及在 Enfity Framework 中如何做吗？我不认为增加超时应该是我应该解决的唯一解决方案，我担心随着更多数据的到来，这个问题仍然存在。

***编辑***：我已经尝试过[这里](http://coding.abel.nu/2012/02/adding-indexes-with-ef-migrations/)提到的关于 EF 迁移的内容。

结果我有这个类：

```
namespace DataAccessLayer.Migrations
{
    using System;
    using System.Data.Entity.Migrations;

    public partial class IX_Table1_fId : DbMigration
    {
        public override void Up()
        {
            Console.WriteLine("Creating Index");
            CreateIndex("Table1", "fId");
            Console.WriteLine("Index Created");
        }

        public override void Down()
        {
            DropIndex("Table1", "IX_Table1_fId");
        }
    }
} 
```

但是，何时调用此代码？我没有看到控制台中的打印语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:17:05.703

您要做的第一件事是检查性能问题在哪里。启动 SQL Server 探查器实例，然后运行执行查询的代码。捕获实际的 SQL 查询运行并检查它需要多长时间。

如果是 SQL 执行需要时间，分析它的最简单方法是将其粘贴到 SQL Server Management Studio 并从那里运行并检查查询计划。它将建议要添加的索引。

如果查询本身很快，那么 EF 对结果的处理就是问题所在（在这种情况下我对此表示怀疑）。

如何在数据库上应用索引取决于您如何处理数据库架构。如果您使用 EF 迁移从代码中更新架构，则可以将索引添加为[单独的迁移步骤](http://coding.abel.nu/2012/02/adding-indexes-with-ef-migrations/)或[与表创建一起添加](http://coding.abel.nu/2012/02/indexes-in-code-based-ef-migrations/)。

# asp.net - 开发使用 oAuth 作为身份验证提供程序的 ASP.NET WCF 服务

> ID：11745436
> 
> 赞同：0
> 
> 时间：2012-07-31T17:09:47.483
> 
> 标签：asp.net, ios, wcf, rest, oauth

我正在开发一个需要与 Web 服务器后端通信的 iOS 应用程序。我的目的是使用 ASP.NET WCF 开发 Web 服务。

在 iOS 端，我使用 RESTKit 来访问 Web 服务。

我已经阅读了许多不同的文章，以及关于堆栈溢出的问题，并且努力找到满足我需求的明确答案。我可以想象这是一个很常见的情况，所以我想我会发布一个问题来为我和其他有这个问题的人澄清这个问题。

我需要对 iOS 应用程序和 ASP.NET 服务之间的请求进行身份验证，而 oAuth 似乎是一个不错的选择。起初我开始阅读 oAuth 2 Legged，并通过遵循本教程 - [http://www.cleancode.co.nz/blog/523/oauth-dot-net](http://www.cleancode.co.nz/blog/523/oauth-dot-net)（我遵循了第二个选项）本教程）。

这很好用，但让我无法知道请求代表哪个用户。然后我意识到也许标准的 3 腿 oAuth 适合我。

我偶然发现了 DevDefined.OAuth.WCF 和 DotNetOpenAuth。两者似乎都缺乏全面的文档。

我试图跟随 DotNetOpenAuth 提供程序示例，但我很难理解它是如何工作的。

所以我的问题：

有谁知道使用 ASP.NET 设置 oAuth 提供程序并使用 oAuth 保护 WCF Web 服务的一个很好的解释。

我是否以正确的方式进行此操作，oAuth 适合我吗？

当 iOS 应用程序和服务器都由我编写时，oAuth 将如何工作？我不希望用户必须授予对该应用程序的访问权限。当他们在那里输入登录详细信息时，它应该是自动的。

我真的很感激任何人都可以帮助我解决这个问题！几个星期以来，它一直让我发疯。

谢谢和最好的问候马修凯西

PS。对于发布到 Stack Overflow 的任何错误，我们深表歉意。以前没在这里发过！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:44:27.723

我不了解 jack 的 .net 东西，但我目前正在考虑为我们自己的受信任的 iOS 应用程序实现 REST Web 服务。

决定让我们的应用直接收集用户的用户名/密码。然后我们实现了一个特殊的端点，它本质上是第一个 get_request_token 调用（带有所有适当的标头/签名/等）。这允许我们验证 api_key 和 app_secret（来自验证签名）。然后，此调用将直接返回 access_token。（跳过常规 3 条腿流程中的一个步骤）此 access_token 将与用户绑定，并具有常规 access_token 的所有标准属性。

我猜它是 2 legged oauth 的变体，但我认为它更干净

如果您需要，很高兴了解更多详细信息。

# asp.net-mvc - 如何在 mvc 应用程序中以编程方式将 SlidingExpiration 设置为 true

> ID：11745438
> 
> 赞同：2
> 
> 时间：2012-07-31T17:09:55.987
> 
> 标签：asp.net-mvc, cookies, forms-authentication

我有一个带有身份验证表单的 MVC 3 应用程序。当用户选中“记住我”复选框时，auth cookie 必须设置为 2 周，如果没有，则应设置为 30 分钟。在这两种情况下，都应该打开滑动到期。根据[这篇文章](https://stackoverflow.com/questions/4939533/cookie-confusion-with-formsauthentication-setauthcookie-method)，我创建了以下方法，该方法创建了自定义身份验证 cookie：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
            1,  //version
            username,
            DateTime.Now, //issue date
            rememberMe ? DateTime.Now.AddDays(14) : DateTime.Now.AddMinutes(30), // exprie date
            rememberMe, // is persistent
            null
            );
        var ecnryptedTicket = FormsAuthentication.Encrypt(ticket);
        HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, ecnryptedTicket);

        cookie.Expires = ticket.Expiration; // to expire cookie together with ticket

        response.Cookies.Add(cookie); 
```

之后如何以编程方式设置滑动到期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T01:26:03.497

自从有人问这个问题以来已经有一段时间了，但是我在寻找其他东西时遇到了这个问题。如果你想像这样运行混合模式，你可能想用这样的东西自己动手：

[http://cbertolasio.wordpress.com/2010/11/28/dealing-with-idle-clients-and-expiring-sessions-in-asp-net-mvc/](http://cbertolasio.wordpress.com/2010/11/28/dealing-with-idle-clients-and-expiring-sessions-in-asp-net-mvc/)

并且当从插件发送心跳时，如果需要，请扩展票证。我觉得滑动到期是一个全有或全无的选择。

# c# - C# 中哪些操作是原子的？

> ID：11745440
> 
> 赞同：58
> 
> 时间：2012-07-31T17:10:05.930
> 
> 标签：c#, .net, multithreading, atomic

是否有系统的方法可以知道 C# 中的操作是否是原子的？或者是否有任何一般的指导方针或经验法则？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-31T17:25:30.377

对于更完整/详细的内容：

对 32 位值类型的读取和写入是原子的：这包括以下内在值 (struct) 类型：`bool, char, byte, sbyte, short, ushort, int, uint, float`. 以下类型（其中包括）不保证是原子的：`decimal, double, long, ulong`.

例如

```
int x;
x = 10; // atomic
decimal d;

d = 10m; // not atomic 
```

引用赋值也是一个原子操作：

```
private String _text;
public void Method(String text)
{
  _text = text; // atomic
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-07-31T17:11:32.637

是的。阅读 CLI 规范： http: [//www.ecma-international.org/publications/standards/Ecma-335.htm](http://www.ecma-international.org/publications/standards/Ecma-335.htm)。例如：

**I.12.6.6 原子读写**

> 符合 CLI 的 CLI 应保证对正确对齐的内存位置的读写访问不大于本机字大小（本机 int 类型的大小）是原子的（参见 §I.12.6.2）相同的大小。原子写入不应改变除已写入的位之外的任何位。除非使用显式布局控制（参见分区 II（控制实例布局））来更改默认行为，否则不大于自然字大小（本机 int 的大小）的数据元素应正确对齐。对象引用应被视为以本机字长存储。
> 
> [注意：不能保证内存的原子更新（读-修改-写），除了作为类库的一部分为此目的提供的方法（参见第 IV 部分）。在不支持直接写入小数据项的硬件上进行原子读/修改/写需要“小数据项”（不大于本机字大小的项）的原子写入。尾注]
> 
> [注意：当本机 int 的大小为 32 位时，不能保证对 8 字节数据的原子访问，即使某些实现可能在数据在 8 字节边界上对齐时执行原子操作。尾注]

关于 64 位长的问题，Eric Lippert 在这里回答：[https ://ericlippert.com/2011/05/31/atomicity-volatility-and-immutability-are-different-part-two/](https://ericlippert.com/2011/05/31/atomicity-volatility-and-immutability-are-different-part-two/)

> CLI 规范实际上提供了更强的保证。CLI 保证对处理器自然指针大小（或更小）的值类型变量的读取和写入是原子的；如果您在 64 位版本的 CLR 中在 64 位操作系统上运行 C# 代码，那么 64 位双精度和长整数的读写也保证是原子的。C# 语言不保证这一点，但运行时规范可以。（如果您在某些 CLI 实现未实现的环境中运行 C# 代码，那么您当然不能依赖该保证；如果您想知道他们提供什么保证，请联系向您出售运行时的供应商。）
> 
> 关于原子访问的另一个微妙点是，底层处理器仅在被读取或写入的变量与与内存中正确位置对齐的存储相关联时才保证原子性。最终，该变量将作为指向某处内存的指针来实现。在 32 位操作系统上，该指针必须能被 4 整除才能保证读取或写入是原子的，而在 64 位操作系统上，它必须能被 8 整除。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-31T17:20:00.177

从 CLI 规范中，您可以在[此处](http://download.microsoft.com/download/f/9/a/f9a26c29-1640-4f85-8d07-98c3c0683396/partition_i_architecture.zip)获取：

> “符合标准的 CLI 应保证对正确对齐的内存位置的读写访问不大于本机字大小（本机 int 类型的大小）是原子的……”</p>

C# 规范的第 12.5 节在[这里](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)：

> “以下数据类型的读取和写入应是原子的：bool、char、byte、sbyte、short、ushort、uint、int、float 和引用类型。” 另外：“……不保证原子读取-修改-写入，例如在递增或递减的情况下。”</p>

[使用this](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.increment.aspx)使增量操作成为原子操作。

# c# - 将 TextBox 绑定到 ListView 的 DataTemplate 中 ComboBox 的选定值

> ID：11745441
> 
> 赞同：1
> 
> 时间：2012-07-31T17:10:11.030
> 
> 标签：c#, wpf, listview, data-binding, combobox

我有一个看起来像这样的 ListView：

![在此处输入图像描述](../Images/50c8fe4b135106119c963ab0b5c97eb7.png)

组合框绑定到 TfsTask 类型的对象的 ObservableCollection。当用户更改选择时，我希望同一行上的控件填充组合框中所选项目中包含的数据。例如，假设任务“Tests”具有特定的*Duration*值和另一个*Remaining*值。如果用户在组合框中选择此任务，我想用这些值填充行上的控件。

这是一个问题：如何将其他列中的控件绑定到组合框的选定项。直接绑定到控件时，您可以使用它的 ElementName 来执行此操作，但如何在 DataTemplate 中执行此操作？

这是我在 XAML 中定义我的 ListView 的方式。我只以*任务*组合框和*持续时间*文本框为例

```
<ListView MinHeight="100" Name="m_taskList">
    <ListView.View>
        <GridView>
            <GridViewColumn Width="140" Header="Task" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Grid HorizontalAlignment="Stretch">
                            <ComboBox Name="m_taskName" DisplayMemberPath="Name" SelectedValue="{Binding Path=TaskId, Mode=TwoWay}" SelectedValuePath="Id" ItemsSource="{Binding ElementName=This, Path=TfsTasks}/>
                        </Grid>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="140" Header="Duration" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Grid >
                            <TextBox Text="{Binding ????}" />
                        </Grid>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <!-- .... -->
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:12:10.043

它正在工作，但您必须在此解决方案中的对象中添加属性。

试试这个：

XAML 文件：

```
<Window x:Class="ListViewCombo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ListView MinHeight="100" Name="m_taskList" ItemsSource="{Binding Path=MyItems}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="140" Header="Task" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Grid HorizontalAlignment="Stretch">
                                    <ComboBox Name="m_taskName" DisplayMemberPath="Name" SelectedItem="{Binding Path=SelectedItem}" SelectedValuePath="ID" ItemsSource="{Binding Path=Items}" />
                                </Grid>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Width="140" Header="Duration" >
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <Grid >
                            <TextBox MinWidth="150" Text="{Binding Path=SelectedItem.Duration}" />
                        </Grid>
                    </DataTemplate>
                 </GridViewColumn.CellTemplate>
             </GridViewColumn>                   
            </GridView>
        </ListView.View>
    </ListView>
</Grid>
</Window> 
```

视图模型文件：

```
using System.Collections.ObjectModel;
using Microsoft.Practices.Prism.ViewModel;

namespace ListViewCombo
{
    class MainViewModel : NotificationObject
    {
        public MainViewModel()
        {
            for (int i = 0; i < 3; i++)
            {
                ObservableCollection<Task> Source = new ObservableCollection<Task>();
                for (int j = 0; j < 5; j++)
                {
                    Source.Add(new Task { ID = i, Name = "Name_" + i, Duration = (i + 2) * 6 + (3 * j) });
                }
                MyItems.Add(new TfsTask { ID = i, Items = Source });
            }                        
        }

        private ObservableCollection<TfsTask> _myItems = new ObservableCollection<TfsTask>();
        public ObservableCollection<TfsTask> MyItems
        {
            get { return _myItems; }
            set { _myItems = value; RaisePropertyChanged(() => MyItems); }
        }    
    }

    public class Task
    {
        public int ID { get; set; }
        public string Name { get; set; }
        public int Duration { get; set; }
    }

    public class TfsTask
    {
        public int ID { get; set; }
        public ObservableCollection<Task> Items { get; set; }
        public Task SelectedItem { get; set; }
    }
} 
```

# mysql - 道场需要互联网吗？(struts2)

> ID：11745452
> 
> 赞同：4
> 
> 时间：2012-07-31T17:10:40.120
> 
> 标签：mysql, struts2, dojo

我不知道为什么当我尝试运行一个确切的项目（struts2+hibernate+mysql）时，它会给我 404 错误，但是在其他项目中我没有这个问题。是因为 MySQL jar 还是因为struts2-dojo-plugin-2.3.4.jar（如“Caused By”中所述）？我需要一个解决方案，因为我总是必须连接到互联网才能开发。非常感谢你。

```
31 juil. 2012 16:37:52 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre1.5.0_22\bin;.;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre1.5.0_22/bin/client;C:/Program Files/Java/jre1.5.0_22/bin;C:/Program Files/Java/jre1.5.0_22/lib/i386;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\oraclexe\app\oracle\product\11.2.0\server\bin;;A:\OraHome_2\bin;C:\oracle\product\10.2.0\db_4\bin;C:\OraHome_1\bin;A:\oracle\product\10.2.0\db_1\bin;C:\Program Files\Java\jdk1.6.0_18\bin;C:\Program Files\Java\jdk1.6.0_18\jre\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Autodesk\Backburner\;C:\Program Files\Common Files\Autodesk Shared\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Qt\2010.05\bin;C:\MinGW\bin;C:\wamp\bin\php\php5.3.0\;C:\wamp\php_includes\ZendFramework-1.11.11\bin;C:\Program Files\Rational\common;C:\Program Files\MATLAB\R2009b\runtime\win32;C:\Program Files\MATLAB\R2009b\bin;C:\Program Files\Windows Live\Shared;C:\Program Files\Nmap;C:\Program Files\EclipseJEE;
31 juil. 2012 16:37:52 org.apache.tomcat.util.digester.SetPropertiesRule begin
ATTENTION: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:HelloWorld' did not find a matching property.
31 juil. 2012 16:37:52 org.apache.coyote.http11.Http11Protocol init
INFO: Initialisation de Coyote HTTP/1.1 sur http-8080
31 juil. 2012 16:37:52 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 691 ms
31 juil. 2012 16:37:52 org.apache.catalina.core.StandardService start
INFO: Démarrage du service Catalina
31 juil. 2012 16:37:52 org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
31 juil. 2012 16:37:52 org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(A:\Struts-Workspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp2\wtpwebapps\HelloWorld\WEB-INF\lib\javax.servlet-1.0.0.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
log4j:WARN No appenders could be found for logger (org.apache.tiles.impl.BasicTilesContainer).
log4j:WARN Please initialize the log4j system properly.
31 juil. 2012 16:37:54 org.apache.catalina.core.StandardContext filterStart
GRAVE: Exception au démarrage du filtre struts2
Unable to load configuration. - [unknown location]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:360)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:403)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:48)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4071)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4725)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: Unable to load jar:file:/A:/Struts-Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpwebapps/HelloWorld/WEB-INF/lib/struts2-dojo-plugin-2.3.4.jar!/struts-plugin.xml - [unknown location]
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:890)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadDocuments(XmlConfigurationProvider.java:144)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.init(XmlConfigurationProvider.java:111)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:164)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:55)
    ... 22 more
Caused by: struts.apache.org - [unknown location]
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:115)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadConfigurationFiles(XmlConfigurationProvider.java:885)
    ... 26 more
Caused by: java.net.UnknownHostException: struts.apache.org
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
    at javax.xml.parsers.SAXParser.parse(Unknown Source)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    ... 27 more
31 juil. 2012 16:37:54 org.apache.catalina.core.StandardContext start
GRAVE: Error filterStart
31 juil. 2012 16:37:54 org.apache.catalina.core.StandardContext start
GRAVE: Erreur de démarrage du contexte [/HelloWorld] suite aux erreurs précédentes
log4j:ERROR LogMananger.repositorySelector was null likely due to error in class reloading, using NOPLoggerRepository.
31 juil. 2012 16:37:54 org.apache.coyote.http11.Http11Protocol start
INFO: Démarrage de Coyote HTTP/1.1 sur http-8080
31 juil. 2012 16:37:55 org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
31 juil. 2012 16:37:55 org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/44  config=null
31 juil. 2012 16:37:55 org.apache.catalina.startup.Catalina start
INFO: Server startup in 2652 ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:00:17.817

来自[http://www.coderanch.com/t/536448/Struts/run-Struts-offline](http://www.coderanch.com/t/536448/Struts/run-Struts-offline)和[http://struts.1045723.n5.nabble.com/S2-attempts-to-access-www-opensymphony-com -on-Struts-startup-td3481060.html](http://struts.1045723.n5.nabble.com/S2-attempts-to-access-www-opensymphony-com-on-Struts-startup-td3481060.html) ...

尝试`struts.xml`从

```
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts 
Configuration//EN" 
    "http://struts.apache.org/dtds/struts-2.0.dtd"> 
```

至

```
<!DOCTYPE struts SYSTEM "struts-2.0.dtd"> 
```

并且不要忘记检查项目中对在线资源的任何其他引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T06:46:56.580

打开 struts2-dojo-plugin-2.3.4.jar 然后打开 struts-plugin.xml 更改`http://struts.apache.org/dtds/struts-2.3.dtd`以`struts-2.3.dtd`将更改的文件放回 jar。

# flash - Flex 多个文本字段？

> ID：11745454
> 
> 赞同：0
> 
> 时间：2012-07-31T17:10:41.400
> 
> 标签：flash, apache-flex, actionscript, builder

我正在尝试使用 for 循环一次创建多个文本字段。我知道在普通闪存中我可以使用 addChild 在我的应用程序上添加一个对象。在 Flex 中，这似乎不起作用。我只能看到一个文本字段而不是更多？:(

这是我的代码

```
 var Num:uint = int(cmbbox.selectedItem);
            var s:uint=0;
            if(Num<=32) {
                while(Num>0) {
                    var t:TextInput = new TextInput;
                    var nummer:uint;
                    nummer = Num/2;
                    Num = nummer;
                    s++;

                    t.name = "t" + s;
                    t.editable =false;
                    t.graphics.beginFill(45);
                    t.x +=50;
                    trace(Num);
                    loller.alpha=0.2;
                    loller.addElement(t);
                }

            } 
```

希望有人可以提供帮助:-)

干杯，

汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:19:01.723

没有理由这不应该工作。你确定你没有把它们都放在同一个 X 位置：

```
// component created w/ default X value of 0
var t:TextInput = new TextInput;
..
// X set to 0 + 50; thus positioning every TextInput at an X position of 50
t.x +=50; 
```

* * *

如果我的原始答案不清楚，您将不得不修改代码以便将 TextInput 放置在不同的位置。一种方法是存储 X 值并在每次循环中递增它。

```
// create new value 
var xOffSet : Int = 50;

while(Num>0) {
  // component created w/ default X value of 0
  var t:TextInput = new TextInput;
  ..
  // position TextInput
  t.x =xOffset;
  // increment XOffset
  xOffset += 50;
} 
```

# php - 如何并排设置2个按钮

> ID：11745463
> 
> 赞同：2
> 
> 时间：2012-07-31T17:11:02.537
> 
> 标签：php, html, css, wordpress

我最近在我的 wordpress 博客上安装并修改了某个模板。所有的修改都非常简单（删除我不想要的 div），但请考虑我对网页设计几乎一无所知的事实。

就像我在上一个问题中解释的那样，我试图并排显示两个按钮，每个按钮都链接到我网站中的特定页面。

我的第一个挫折是试图让它们显示，因为模板解析明文而不是将短代码转换为按钮（我正在使用一个名为 MaxButtons 的插件 - 对于那些不知道它的人来说，它使按钮的创建和管理更简单）。谢天谢地，我在 stackoverflow 成员的帮助下克服了它，他告诉我使用 do_shortcode 函数。现在，我的代码如下所示：

```
<div class="slider-wrapper">

    <div class="full_content">
    <center>
                       <h1></h1><h1></h1>
                       <h2></h2> 
             <p></p>
            <p></p>

    </center>
    </div>
</div> 
```

我最近的问题以及我问这个问题的原因是，我怎样才能让按钮并排显示？目前，按钮 2 仅显示在按钮 1 的前面，这显然是不需要的。它们显示如下：

![按钮如何显示](../Images/1003f5e9e8f3a962193691e609d600e0.png)

我想我应该发布我的样式表中引用网站特定部分的部分（我实际上不确定这是否是它..）

```
/*=====Slider-Style Start
========================================*/
.slider-wrapper {
    width:950px;
    height:400px;
    background:url(images/slide-shaddow.png) 85px 334px no-repeat;
    margin-bottom:0px;
}
#container {
    width:581px;
    margin:0 auto;
    position:relative;
    float:left;
    z-index:0;
    background-color:#fff;
}
#example {
    width:581px;
    height:333px;
    position:relative;
    margin-left:0;
    background-color:#fff;
}
#frame {
    position:absolute;
    z-index:0;
    width:739px;
    height:341px;
    top:-3px;
    left:-80px;
}
/*
        Slideshow
*/

#slides {
    position:absolute;
    top:15px;
    left:0px;
    z-index:10;
    background-color:#fff;
}
.slides_container {
    width:581px;
    overflow:hidden;
    position:relative;
    display:none;
    background-color:#fff;
}
.slides_container div.slide {
    width:581px;
    height:325.4px;
    display:block;
    background-color:#fff;
}
.slides_container div.slide img, .slides_container div.slide iframe{
    width:581px;
    height:325.4px;
}
/*
        Next/prev buttons
*/

#slides .next {
    position:absolute;
    top:107px;
    right:-220px;
    width:24px;
    height:43px;
    display:block;
    z-index:101;
}
#slides .prev {
    position:absolute;
    top:107px;
    left:-25px;
    width:24px;
    height:43px;
    display:block;
    z-index:101;
}
#slides .next {
    left:585px;
}
/*
        Pagination
*/

.pagination {
    margin:26px auto 0;
    width:100px;
    position:absolute;
    left:25px;
    bottom:-25px;
    z-index:9999999px;
}
.pagination li {
    float:left;
    margin:0 2px;
    list-style:none;
}
.pagination li a {
    display:block;
    width:13px;
    height:0px;
    padding-top:13px;
    background-image:url(images/pagination.png);
    background-position:0 0px;
    float:left;
    overflow:hidden;
}
.pagination li.current a {
    background-position:0 -13px;
}
.slider-info {
    margin-top:15px;
    padding-top:25px;
    padding-left:23px;
    padding-right:20px;
    height:299.3px;
    width:326px;
    float:right;
    border-top:1px dotted #888;
    background-color:#fff;
}
.slider-info h1 {
    font-size:26px;
    line-height:35px;
    margin-bottom:30px;
}
.slider-info p {
    line-height:24px;
    text-shadow: .1px .1px .1px #aaa;
    font-size:14px;
}
/*=====Slider-Style End
========================================*/ 
```

任何帮助表示赞赏，在此先感谢您:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:17:24.300

`display: inline-block`是实现这一目标的好方法。它可以像块元素一样设置样式，但不强制换行。

由于您使用简码来显示按钮标记，因此我们无法帮助您了解确切的 css 规则。但是我猜它会输出如下内容：

```
<p>This is a button: <a href="/1" class="button">Button</a> 
<a href="/2" class="button">Button</a>]</p> 
```

或这个：

```
<p>This is a button: <button class="button">Button</button> 
<button class="button">Button</button></p> 
```

无论哪种情况，您都将添加 display: inline-block; 到以按钮元素为目标的类：

```
.button {
    display: inline-block;
    /* add more crazy CSS3 stuff like rounded corners and gradients... */
} 
```

结果将是两个按钮在同一行中并排放置。

进一步阅读：[http ://designshack.net/articles/css/whats-the-deal-with-display-inline-block/](http://designshack.net/articles/css/whats-the-deal-with-display-inline-block/)

# jaxb - JAXB，我自己的领域模型和建议

> ID：11745465
> 
> 赞同：2
> 
> 时间：2012-07-31T17:11:06.803
> 
> 标签：jaxb, jax-ws, cxf

自 2005 年以来，我逐步构建了一个相当大的 POJO 域模型。我们还在同一时间框架内逐步开发了 XSD。目前，我以以下方式使用 xmlbeans 来生成要通过 HTTP 发送的 xml，并作为 WebService 响应的一部分。

1.  使用 xmlbeans 从 XSD 生成绑定代码
2.  写了很多从我的域 POJO 填充绑定代码的映射器（也是相反的）
3.  将其编组为 XML
4.  对于 Web 服务，我们使用[Axis 1.4，它可以使用 xmlbeans 生成的序列化/反序列化工厂](https://issues.apache.org/jira/browse/AXIS-1764)。这允许我们在两个端点上重用相同的代码：XML over HTTP 和 SOAP/HTTP

现在，我们想开始使用 JAXB，因为它是成熟的、标准的、支持多租户（至少是 Moxy 实现），而且作为 xmlbeans 的一部分已经没有多少工作要做了。所以我的问题是

1.  如何在不生成绑定代码的情况下使用 JAXB。即我不想再编写或维护映射代码（第 2 步）。我想知道我是否可以以某种方式使用 JAXB 直接解组到我的域 POJO？
2.  如何将此与我的 WebService 集成？我的 web 服务使用相同的模式并且不想复制映射。
3.  还有其他最佳实践建议吗？
4.  我应该注意的任何陷阱/经验教训？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:00:26.767

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/#moxy)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> 1 - 如何在不生成绑定代码的情况下使用 JAXB。即我不想再编写或维护映射代码（第 2 步）。我想知道我是否可以以某种方式使用 JAXB 直接解组到我的域 POJO？

使用您自己的域对象的关键是基于路径的映射。如果没有这个，绑定框架使用的模型必须非常类似于 XML 文档。下面是一个我想给出的示例，其中一个简单的地址对象映射到[Google Geocoding API V2](https://developers.google.com/maps/documentation/geocoding/v2/)的结果。

```
package blog.geocode;

import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name="kml")
@XmlType(propOrder={"country", "state", "city", "street", "postalCode"})
public class Address {

    @XmlPath("Response/Placemark/ns:AddressDetails/ns:Country/ns:AdministrativeArea/ns:SubAdministrativeArea/ns:Locality/ns:Thoroughfare/ns:ThoroughfareName/text()")
    private String street;

    @XmlPath("Response/Placemark/ns:AddressDetails/ns:Country/ns:AdministrativeArea/ns:SubAdministrativeArea/ns:Locality/ns:LocalityName/text()")
    private String city;

    @XmlPath("Response/Placemark/ns:AddressDetails/ns:Country/ns:AdministrativeArea/ns:AdministrativeAreaName/text()")
    private String state;

    @XmlPath("Response/Placemark/ns:AddressDetails/ns:Country/ns:CountryNameCode/text()")
    private String country;

    @XmlPath("Response/Placemark/ns:AddressDetails/ns:Country/ns:AdministrativeArea/ns:SubAdministrativeArea/ns:Locality/ns:PostalCode/ns:PostalCodeNumber/text()")
    private String postalCode;

} 
```

下面是一个示例的链接，其中相同的对象模型映射到 Google 和 Yahoo 天气服务：

*   [http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html](http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)

* * *

> 2 - 如何将它与我的 WebService 集成？我的 web 服务使用相同的模式并且不想复制映射。

如果 Axis 支持多个 JAXB 提供程序，那么您应该能够在没有太多配置的情况下利用 MOXy。可能只需`jaxb.properties`在与域模型相同的包中添加文件即可。

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

* * *

> 3 - 还有其他最佳实践建议吗？

如果您想避免将任何编译时依赖项添加到您的域模型中，那么您可能需要考虑将元数据表示为 XML。

*   [http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)

* * *

**更新**

以下是您通过评论提出的问题的答案：

> 我知道 Web 服务 API 的一个限制是它们与“xjc 生成的工厂”相悖。在这种情况下，我相信我不能再使用 XPath 映射。如果我错了，请纠正我。另外，如果我使用注释，我还需要使用 xjc 吗？

我不确定 CXF，但标准 JAX-WS 实现允许您从自己的域模型开始，或通过 XJC 生成一个。以下是在 JAX-WS 环境中使用 Java 对象时使用 MOXy 的几个示例：

*   [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)
*   [http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html](http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html)

* * *

> 我认为这是使用 XPath 以外的另一种选择，如果我需要支持多租户，这也是唯一的选择。

外部映射文档不是 XPath 的替代品，它只是另一种指定元数据的方式。有些人更喜欢这种方法，如果他们不想在类上引入任何 MOXy 依赖项，这些依赖项将用于更多的对象到 XML 或对象到 JSON 的转换。对于多租户，我经常注释所有共享属性，然后为每个租户创建一个映射文档来映射扩展。

*   [http://blog.bdoughan.com/2011/06/moxy-extensible-models-multi-tenant.html](http://blog.bdoughan.com/2011/06/moxy-extensible-models-multi-tenant.html)

* * *

> 此外，如果我走 XPath 路线或选择 XML 中的元数据，是否会对性能产生影响？

使用基于路径的映射对性能没有任何影响。`JAXBContext`这一切都在初始化时得到优化。当引导外部绑定文档时，`JAXBContext`创建速度会稍微慢一些，因为需要做更多的工作，但由于 JAXB/MOXy 是异常配置，因此这些文档往往很小。对使用外部映射文档的`Marshaller`/没有影响。`Unmarshaller`

# python - 多处理期间的 IOError

> ID：11745472
> 
> 赞同：0
> 
> 时间：2012-07-31T17:11:39.700
> 
> 标签：python, multiprocessing

我正在尝试自学多处理的基础知识。因此，我找到了这个示例并决定对其进行测试。

```
import multiprocessing

def worker():
    """worker function"""
    print 'Worker'
    return

if __name__ == '__main__':
    jobs = []
    for i in range(5):
        p = multiprocessing.Process(target=worker)
        jobs.append(p)
        p.start()
        p.join() 
```

它在 python IDLE 中工作，但最终我需要在 IDE 中为一个名为 vizard 的程序运行代码。但是，当我这样做时，我会收到此错误：

> Traceback（最近一次调用最后一次）：文件“”，第 11 行，在 IOError：[Errno 2] 没有这样的文件或目录：u'C:\Users\dbak\Documents\from multiprocessing.forking import main; 主要的（）'

IDE 似乎正在寻找 forking.py，但我不确定如何“帮助”它找到它。我确实将多处理文件夹放在程序保存的同一文件夹中，但我发现这仍然存在缺陷。有谁知道我如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:18:20.727

请查看：

[http://docs.python.org/library/multiprocessing.html#windows](http://docs.python.org/library/multiprocessing.html#windows)

16.6.3.2 对windows的评论

# iphone - NSDate 每周一计数

> ID：11745476
> 
> 赞同：0
> 
> 时间：2012-07-31T17:11:41.930
> 
> 标签：iphone, objective-c, xcode, nsdate

我如何编写一个代码，该代码每 X 天计数一次。就像每个星期一（或星期四，或其他）从一个 NSDate 计数到另一个（今天）。我知道，如何通过检查获得 NSDate 的日期

```
 $int weekday = [[NSCalendar currentCalendar]components:NSWeekdayCalendarUnit fromDate:myDate]weekday]; 
```

但这一点帮助都没有……</p>

（当然，我可以只计算所有天数和 / 7，但这不适用于我正在从事的项目……）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:29:33.063

运行一个从第一个开始到`NSDate`最后一个结束的while循环`NSDate`。每次递增一天，并检查这一天是否等于你想要的那一天。

```
int counter = 0;
while ([NSDate laterDate:earlyDate:lateDate] == lateDate)
{
     int weekday = [[NSCalendar currentCalendar]components:NSWeekdayCalendarUnit fromDate:earlyDate]weekday];
     if (weekday == desiredWeekday) counter++;
     earlyDate = [earlyDate dateByAddingTimeInterval:3600*24];
} 
```

# memory - Emacs - nxml-mode 导致内存溢出

> ID：11745477
> 
> 赞同：0
> 
> 时间：2012-07-31T17:11:52.477
> 
> 标签：memory, emacs, nxml

看来，nxhtml-mode 是在 emacs 中编辑混合 html 文件的唯一真正有趣的解决方案（带有 php、css 等的片段）；这就是为什么我再次尝试通过 stackoverflow 获得答案，因为我知道我可以提供的信息很差。

在没有 nxhtml 的情况下使用 nxhtml-mode 或 nxml（据我所知，这是 nxhtml 的基础），我在 emacs 中遇到了严重的内存问题。在打开 nxml-mode 的情况下在 xhtml 文件中工作，emacs 似乎试图验证，一段时间后停止，在模式行“MEM FULL”中告诉我。没有其他选项可以终止 emacs 进程。很难一致地重现这种行为，但它似乎发生在以下情况下：

*   设置一个标记，使用CMn跳转到结束标签标记一个区域
*   以标记方式在文件中跳转（使用 CMn 和 Cmp）

我的印象是，emacs 在尝试验证文件时不知所措。我已经拆分了我的 dot-emacs 并设置了一个非常简化的配置，仅用于测试 nxml-mode 并确保该模式不会干扰其他扩展。似乎这种模式会导致问题，因为我仍然得到所描述的行为。

我在 Linux Mint 11 上使用 emacs 23.2.1。我最后一次尝试 nxhtml 是 2.08 版。[我最近](https://stackoverflow.com/questions/11247666/emacs-nxhtml-mode-memory-full)发布了一个类似的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:58:12.337

最新的 nXhtml 在这里：

[https://launchpad.net/nxhtml](https://launchpad.net/nxhtml)

如果仍然存在，可能会提交错误报告

# java - 关于 DTO 模式的实现

> ID：11745480
> 
> 赞同：-1
> 
> 时间：2012-07-31T17:12:09.697
> 
> 标签：java, hibernate, design-patterns

请告知我从分析中得出的 DTO 模式是什么是数据传输对象模式，您能否在 Hibernate 或任何其他 java 示例中提供任何关于它的示例，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:20:51.103

DTO 是在 EJB 2.1（统称为 Sun 蓝图目录）中发现的可怕持久性的解决方法之一。它用于从实体 bean 中提取数据并将其传递给数据层。来自该层的数据放置在 DTO 中并放入实体 bean。这仅适用于 bean 管理的持久性。

这就是 DTO 的正式含义。今天，您在将数据从后端传输到前端（在客户端-服务器架构中）时也会发现这一点。

如果您想在 Hibernate 中使用它，请创建一个查询/条件来选择您需要的列，然后使用`AliasToBeanResultTransformer`在 DTO 中设置这些列。[Hibernate 文档中的一个示例](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/transform/AliasToBeanResultTransformer.html)：

```
List resultWithAliasedBean = 
    s.createCriteria(Enrolment.class)
        .createAlias("student", "st")
        .createAlias("course", "co")
        .setProjection(
            Projections.projectionList()
                add( Projections.property("co.description"), "courseDescription" )
        )
        .setResultTransformer( new AliasToBeanResultTransformer(StudentDTO.class) )
    .list();

StudentDTO dto = (StudentDTO)resultWithAliasedBean.get(0); 
```

# php - PHP检测搜索是否为日期

> ID：11745481
> 
> 赞同：7
> 
> 时间：2012-07-31T17:12:09.390
> 
> 标签：php, date

我的网站上有一个搜索框...mysql 数据库。我目前检查关键字搜索是一个类别还是一个与标题匹配的句子。我想通过检测日期是否是搜索关键字来进一步增强它，然后它会知道并且 SELECT * 与该日期相关的帖子。如何检测它是否是日期？也许是一个正则表达式？

为了您的信息，我使用的是 YYYY/MM/DD 的标准格式，例如 2012/07/21。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T17:14:51.527

我会用`strtotime()`.

```
$keyword;

$time = strtotime($keyword);

if ($time !== false) {
  // $keyword is a parsable date!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:14:46.530

您可能想查看[PHP 函数](http://php.net/manual/en/function.strtotime.php) `strtotime()`，它返回时间戳，如果不是日期，则返回 FALSE...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T20:55:34.017

**strtotime**对我不起作用，因为字符串和整数是日期。以下代码是一个更好的解决方案

```
$value_date_array = date_parse($value);
if(checkdate($value_date_array['month'], $value_date_array['day'], $value_date_array['year'])) 
```

# magento - Mage_Core_Block_Template_Facade 的目的是什么

> ID：11745485
> 
> 赞同：12
> 
> 时间：2012-07-31T17:12:43.230
> 
> 标签：magento

在查看 magento 源代码时偶然发现以下类后：Mage_Core_Block_Template_Facade，我完全不知道这个类是做什么的。

显然我已经看过它并进行了一些调查，但我并不清楚。

谁能解释它在生活中的目的以及何时使用它可能有用

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-31T22:33:50.997

[Mage_Core_Block_Template_Facade](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Block/Template/Facade.php)，其实很容易理解。它..

*   允许在块上设置值
*   允许布局指定要在块上设置的注册表对象的属性/值
*   允许评估上述两个值的相等性

从本质上讲，这就是外观块与其他块不同的原因——与注册表的交互以及将注册表键/值与块实例键/值进行比较——所有这些都来自布局 xml。

在核心代码中使用的块只有一个示例......

查看[catalog.xml](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/design/frontend/base/default/layout/catalog.xml#L241)和[product/view.phtml](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/design/frontend/base/default/template/catalog/product/view.phtml)，您会看到**container1**和**container2**块——它们都是相同的，但最终输出中只呈现了一个。

那为什么他们俩都在那里？这将解释 Mage_Core_Block_Template_Facade 的工作原理。

[Core 使用外观块作为一种方法，以允许product/view.phtml](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/design/frontend/base/default/template/catalog/product/view.phtml)中的产品选项块位置（不是在布局中，而是在模板本身中）可以在管理区域中进行配置。如果您在编辑产品时查看设计选项卡，您应该注意到最后一个选项：“在其中显示产品选项” - 这两个下拉值分别与您可以在 catalog.xml 和 view.phtml 中看到的 container1 和 container2 块相关联. 具体来说，查看[product/view.phtml](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/design/frontend/base/default/template/catalog/product/view.phtml)，您应该会看到 container1 和 container2 位于不同的 div 中。

布局根据使用外观块的“显示产品选项在”中设置的值来决定显示哪些块。

下面是它的工作原理...

* * *

检查catalog.xml，你会看到：

```
<block type="core/template_facade" name="product.info.container1" as="container1">
    <action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action>
    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
    <action method="append"><block>product.info.options.wrapper</block></action>
    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
</block>
<block type="core/template_facade" name="product.info.container2" as="container2">
    <action method="setDataByKey"><key>alias_in_layout</key><value>container2</value></action>
    <action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action>
    <action method="append"><block>product.info.options.wrapper</block></action>
    <action method="append"><block>product.info.options.wrapper.bottom</block></action>
</block>
<action method="unsetCallChild"><child>container1</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action>
<action method="unsetCallChild"><child>container2</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action> 
```

**setDataByKey**

```
<action method="setDataByKey"><key>alias_in_layout</key><value>container1</value></action> 
```

这将为此块设置一个标识符，该标识符将针对注册表对象进行评估。在选项容器的上下文中，此值必须与前面提到的管理区域中的下拉值之一匹配。

**setDataByKeyFromRegistry**

```
<action method="setDataByKeyFromRegistry"><key>options_container</key><key_in_registry>product</key_in_registry></action> 
```

告诉块“嘿，当我们需要查看注册表中的产品对象并获取 options_container 键/属性的值时”。类似于：`Mage::registry('product')->getData('options_container');`

在此特定示例中，我们希望此值是 container1 或 container2。

**如果等于**

最后，结合 unsetCallChild 调用 ifEquals 来移除管理区域中未选中的容器。

以 container1 为例...

```
<action method="unsetCallChild"><child>container1</child><call>ifEquals</call><if>0</if><key>alias_in_layout</key><key>options_container</key></action> 
```

这将调用该块实例上的 ifEquals 方法，如果返回值为 0，则 container1 将被取消设置且不呈现。

# javascript - IE7 缩小输入问题

> ID：11745490
> 
> 赞同：0
> 
> 时间：2012-07-31T17:12:55.553
> 
> 标签：javascript, jquery, html, css

我有一些输入，我在 keyup 上进行了验证，它工作得很好，除了在 IE7 中它会在每次击键时缩小输入。

我已经调试了代码，发现是 jQUery .addClass/.removeClass 导致了这种效果。

这只是一个普通的旧输入，没什么特别的。

有任何想法吗？

```
$('input#myId').bind('keyup blur',function(){
        var _this = $(this);          
        if(_this.val().match(/^[0-9()\-\+\ ]+$/i)== null){
            _this.addClass('errorColor');               
        }else{
            _this.removeClass('errorColor');               
        }
}); 
```

**编辑：**

我终于找到了答案！原来是 boxsizing.htc 脚本。此脚本动态转换填充、边距和边框以包含在元素高度和宽度内。每次我输入输入时，它都会尝试应用触发 onupdate 事件的类并刷新元素大小。在我的 CSS 中，我有点懒惰，并在 errorClass 规则中添加了重要声明，纯粹是为了确保它具有最高可能的特异性。正是这种重要性揭示了 boxsizing 代码中的一个小错误，因为它会递增地计算边框宽度（或者更简单地说，它不会从之前的计算中删除它）。

我会尽快举一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:14:39.653

可能jQuery与IE7中的问题无关。问题更可能是由于与`errorColor`类相关的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:34:21.143

没有更多数据，我的最佳猜测是：

a）该类未能被删除并继续累积在元素上。

b）这是一些 IE7 100% 宽度的怪异，尝试 99% 或自动，看看它是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T12:21:16.930

它是 boxsizing.htc 脚本。不要在此脚本中使用 !important 声明，因为它在计算刷新时会增加值......因此会缩小输入

# javascript - 如果在 DIV 的底部，则 JQuery 更新

> ID：11745500
> 
> 赞同：0
> 
> 时间：2012-07-31T17:13:28.450
> 
> 标签：javascript, jquery

我有这个功能，它本身工作得很好，但是每当我不打算向上滚动时它就会向下滚动。我希望它仅在 div 的滚动条（溢出）位于底部时才运行该功能，这样可以向上滚动而无需向下滚动以防止查看旧消息。

```
function opdaterPost(til, fra){
        $('#beskeder_vis').load('calls/opdater_post.php?til=' + til + '&fra=' + fra);
        $("#beskeder_vis").animate({ scrollTop: $("#beskeder_vis").prop("scrollHeight") }, 1500);   
} 
```

这是一个显示聊天框的 jsfiddle [http://jsfiddle.net/w989Y/](http://jsfiddle.net/w989Y/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:21:44.537

您通过以下方式检查 div 是否滚动到底部：

```
if ($("divID").get(0).scrollHeight - $("divID").scrollTop() == $("divID")outerHeight()) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:32:05.997

看起来您正在尝试按照 Facebook 自动收报机的工作方式进行操作。当您滚动到底部时，`outerheight`容器的 , 添加到`scrollTop`, （容器已滚动的量）应该为您提供总内容高度`scrollHeight`。所以做这样的事情：

```
$("#divId").scroll(function() {
  if ($(this).scrollTop() + $(this).outerHeight() == this.scrollHeight)  
  {
     \\do stuff;
  }
}); 
```

# java - 使用 maven 在 Jar 中打包 javascript 文件？

> ID：11745501
> 
> 赞同：1
> 
> 时间：2012-07-31T17:13:31.030
> 
> 标签：java, maven, jar

我是 Maven 2 的新手，并试图使用 maven 将一组 javascript（如 Dojo 库）打包到一个 jar 库中（没有 java 类，但只有具有 .js 扩展名的文件）。所以我想我应该试试`maven-assembly-plugin`，这里有几个问题：

1.  没有`mainClass`，但我怎么还能拥有 MANIEST.MF？
2.  我可以`jar-with-dependencies`像`<descriptorRefs>`不打算更改 jar 中的文件层次结构一样使用吗？
3.  可能这是一个愚蠢的问题，但我应该把`pom.xml`（在 javascript lib 文件夹内或 javascript lib 文件夹的同一级别）放在哪里？

请赐教，先谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T18:06:30.310

如果您使用标准的 Maven 项目布局，如下所示：

```
project
   |-src
   .   |-main
   .      |-resources
   .         |-<JS files here>
   |-pom.xml 
```

然后，使用 JAR 打包的普通 POM 文件会将您的 Javascript 文件放入输出 JAR。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.foo.bar</groupId>
  <artifactId>foo</artifactId>
  <packaging>jar</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>Foo</name>

</project> 
```

这将保留存在于`src/main/resources`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:38:44.060

1.  mainClass 不是 manifest.mf 中的强制条目，这里是来自典型开源库的最小 manifest.mf 示例

    ```
    Manifest-Version: 1.0
    Archiver-Version: Plexus Archiver 
    Created-By: Apache Maven 
    Built-By: hudsonagent 
    Build-Jdk: 1.5.0_15 
    ```

2.  我猜这个选项可能会为你改变文件结构，试试看你是否可以使用结果。

3.  请参阅标准 maven 项目结构[http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-25T14:06:08.800

Maven 真的不是适合这个的打包工具。您可能想要使用 NPM 或 YARN，它们是 JavaScript 特定的打包工具。

[https://www.npmjs.com/](https://www.npmjs.com/)

[https://yarnpkg.com/lang/en/](https://yarnpkg.com/lang/en/)

如果你真的想将 JavaScript 代码打包到 Jar 中，可以使用`src/main/resources`标准目录布局中所示的目录：[http ://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout .html](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)

您还可以修改 Maven 查找资源的位置：[https ://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html](https://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html)

Maven 和 Java 支持另一种称为 WAR 的包类型，它旨在将前端代码（HTML、JS、CSS、图像等）与后端 Java 代码一起打包：[https ://maven.apache.org/plugins/maven -war-plugin/usage.html](https://maven.apache.org/plugins/maven-war-plugin/usage.html)

# macos - 删除“凭据-osxkeychain”

> ID：11745504
> 
> 赞同：10
> 
> 时间：2012-07-31T17:13:49.493
> 
> 标签：macos, git, credentials

我尝试添加'credential-osxkeychain' 我按照[这些步骤](https://help.github.com/articles/set-up-git)操作，但它没有正确安装。我不再想要它了。如何阻止 git 调用它（当我拉动时）？谢谢！

```
git pull

git: 'credential-osxkeychain' is not a git command. See 'git --help'.
Username for 'https://github.com': jzone3
Password for 'https://jzone3@github.com': 
git: 'credential-osxkeychain' is not a git command. See 'git --help'. 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-01T15:58:04.290

我最终从配置文件中删除了 osxkeychain。

```
git config --global --edit 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T05:25:49.960

似乎 MacPorts 打包了钥匙串助手，这可能就是为什么它没有成为您认可的命令的原因。

您可以按照以下说明直接安装帮助程序：

通过：Magnus Johansson @ [http://insomniacgeek.com/how-to-add-your-git-password-in-the-mac-osx-keychain/](http://insomniacgeek.com/how-to-add-your-git-password-in-the-mac-osx-keychain/)

为了避免每次执行 git 操作时都输入基于 git 的密码，以下是如何将 git 密码存储在 Mac OSX 钥匙串中的方法：

检查您是否已经安装了 credential-osxkeychain 帮助程序：

git credential-osxkeychain

如果没有，请下载并安装它：

curl [http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain](http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain) -o git-credential-osxkeychain sudo mv git-credential-osxkeychain /usr/local/bin sudo chmod u+x / usr/local/bin/git-credential-osxkeychain

并让 git 使用助手：

git config --global credential.helper osxkeychain

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T20:18:18.570

> git config --global --remove-section 凭证

# objective-c - 检测全局关键事件

> ID：11745505
> 
> 赞同：0
> 
> 时间：2012-07-31T17:13:50.323
> 
> 标签：objective-c, macos, cocoa

如何在不使用 addGlobalMonitorForEventsMatchingMask 的情况下检测全局键事件。我只需要一个键被按下的通知，不需要确切知道哪个键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:41:20.943

您可以轮询`CGEventSourceSecondsSinceLastEventType`自上次键盘事件以来的时间。我不知道有什么方法可以在不知道按下什么键的情况下通知关键事件。Quartz 事件点击将具有与 相同的安全限制`addGlobalMonitorForEventsMatchingMask`，我猜这就是您要避免它的原因。

# perl - 准备要在 Ubuntu 和 tabix 上运行的 Perl 文件

> ID：11745507
> 
> 赞同：1
> 
> 时间：2012-07-31T17:13:52.410
> 
> 标签：perl, ubuntu, bioinformatics, vcf-variant-call-format, vcftools

我不了解 Ubunto 或 Perl，但仍需要在其上安装和运行程序。这就是我正在查看的内容：http: [//vcftools.sourceforge.net/docs.html](http://vcftools.sourceforge.net/docs.html)

在安装部分它说：

> 要构建 vcftools 可执行文件，请在 vcftools 文件夹中键入“make”。
> 
> Perl 脚本要求 VCF 文件由 bgzip 压缩并由 tabix 索引（这两个工具都是 tabix 包的一部分，可在此处下载）。这两个工具都必须位于 PATH 环境变量中列出的目录中。要运行 Perl 脚本，必须将 PERL5LIB 环境变量设置为包含 Vcf.pm 模块
> 
> 导出 PERL5LIB=/path/to/your/installation/perl

所以好的，我提取并复制了他们的 VCFtools 文件夹到 ubuntu 的主文件夹中。然后我说“make”它给出了错误，然后我去下载了那个 tabidx 工具，但是从这一点上我不知道如何处理它，好吧我下载了 tabidx，但是接下来要做什么以及如何做呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:59:04.963

```
find / -name Vcf.pm 
```

如果这给出了一个 - 并且只有一行 - 你可以这样做：

```
export PERL5LIB=$( dirname $( find . -name Vcf.pm )) 
```

# javascript - Javascript 设置对象选项

> ID：11745509
> 
> 赞同：1
> 
> 时间：2012-07-31T17:13:57.873
> 
> 标签：javascript, jquery, oop, object

当我使用 javaScript 插件时，我经常遇到这种调整插件行为的方法。

```
$('.mySlider').slider({status: "burnt"}); 
```

如果我尝试用这样的对象复制这种方法

```
var Egg = function(){

    this.details = {
        status: "cooked",
        make: "Happy Egg"
    }

};

var egg = new Egg({status: "burnt"});
console.log(egg.details.status); 
```

* * *

我只是从控制台收到一堆未定义的消息。谁能告诉我如何创建一个对象，然后像上面的例子一样改变它的属性？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T17:16:23.680

您的构造函数没有接受任何参数，但您在创建新实例时将它们传入。

你会想要

```
var Egg = function(props){

    this.details = props;

}; 
```

也许

```
var Egg = function(props){
    props = props || {}; // handle no arguments

    this.status = props.status;
    this.make = props.make || "Happy Egg";
}; 
```

然后你会做只是`egg.status`为了得到财产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:20:38.773

试试这个：

```
var Egg = function(details) {
   this.details = {};
   for (var key in details) {
      this.details[key] = details[key];
   }

   return this;
};

var egg = new Egg({ status: 'burnt' }); // burnt

console.log(egg.details.status); 
```

问题是您将参数（`details`）传递给构造函数，但没有正确使用它们。在我的示例中，我将默认设置`details`为空对象`{}`，然后覆盖其上传递的任何属性。

您可以通过使用原型更进一步。假设您想公开一个可以让您更改细节的函数。

```
var Egg = function(details) {
   this.details = {};
   for (var key in details) {
      this.details[key] = details[key];
   }

   return this;
};

Egg.prototype.updateDetail = function(name, value) {
    this.details[name] = value;
};

var egg = new Egg({ status: 'burnt' });

console.log(egg.details.status); // burnt

egg.updateDetail('status', 'scrambled');

console.log(egg.details.status); // scrambled 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:18:11.480

您可以像这样创建默认参数（使用 jQquery）

```
var Egg = function(props){
    this.options= {
        status: "cooked",
        make: "Happy Egg"
    }
    $.extend(this.options, props);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:18:32.813

您必须将一些代码放入函数中，将参数值分配给新对象的属性。此外，如果您有一些默认值，您应该将它们放入原型中，这样可以节省内存。所以使用这个代码：

```
function Egg(obj){
  if(typeof obj==="object"){
    this.details={}; //This overwrites the prototype property with one
                     //that's specific to this instance.
    for(i in arguments.callee.prototype.details){
      //This copies object from proto to object
      this.details[i]=arguments.callee.prototype.details[i];
    }
    for(i in object){
      this.details[i]=object[i];
    }
  }
};
Egg.prototype={
    details: {status: "cooked", make: "Happy Egg"}
} 
```

此代码允许您拥有一些可以通过参数扩展/覆盖的默认对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T17:18:54.223

对于您的简单`Egg`对象，您需要您的函数接受一个参数，该参数用于设置结果对象的属性：

```
var Egg = function(options) {
  this.details = {
    status: options.status || 'cooked',
    make: options.make || 'Happy egg'
  }
}; 
```

当然，这是一个极其简化的版本。理想情况下，您会想要使用一个`extend`函数，例如 jQuery 或下划线提供的函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T17:29:44.280

我举了一个例子，我构造一个对象，然后通过将参数传递给构造函数来覆盖它的值，就像在滑块对象中一样。该示例与您的示例不完全相同，但更多的是您询问的滑块示例

```
var Egg = function(){
this.status = 'Some';
    this.detail = 'another';
   //the magic line which makes it possible
    for (var n in arguments[0]) { this[n] = arguments[0][n];}

};

var egg = new Egg({status: 'burnt', make: 'hj'});
alert(egg.status ); 
```

通过添加这一行

```
for (var n in arguments[0]) { this[n] = arguments[0][n];} 
```

对于您的构造函数，您已为用户提供了更改任何默认参数的灵活性。他们可以按任何顺序指定参数，也可以省略不需要的参数。

这是[JSFiddle](http://jsfiddle.net/ccrAF/27/)示例

# spring - spring 3 调度：任务集合？

> ID：11745511
> 
> 赞同：0
> 
> 时间：2012-07-31T17:14:06.763
> 
> 标签：spring, spring-3

是否可以将任务列表（可运行？）返回给弹簧，所以无论每个项目抛出异常，弹簧都按顺序执行它们？

我希望spring按顺序调用10个任务：1、2、3等，如果发生则简单地记录异常

看起来@Async 可能会有所帮助，但是如何从 XML 配置它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:03:17.757

如果你想连续执行任务，它可以通过一个只有 1 个线程的线程池来完成：

```
ExecutorService executor = Executors.newSingleThreadExecutor();
executor.execute(yourrunnable); 
```

你不能`@Async`从 xml 配置，它必须通过注释，如果你正在考虑 @Async，你需要提供一个显式的执行器，因为你希望你的任务被串行处理：

```
@Async("serialExecutor")
<task:executor id="serialExecutor" pool-size="1"/> 
```

# android - 将值从活动传递到片段时获取空值？

> ID：11745513
> 
> 赞同：0
> 
> 时间：2012-07-31T17:14:15.423
> 
> 标签：android, android-activity, fragment

如何将值从 a 传递`Activity`到 a `Fragment`？

我知道我可以`setArgument`在 my`Activity`和`getArgument`in 中使用`Fragment`。但我没有运气。该值仍返回为 null。

* * *

活动

```
public class nfc_activity extends Activity {
    private ImageView mCardView;
    MyFragmentA f2;
    public static String itemname;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         Button goButton = (Button)findViewById(R.id.go);
            goButton.setOnClickListener(mGoListener);

        }

       private OnClickListener mGoListener = new OnClickListener()
        {
            public void onClick(View v)
            {
                // Here we start up the main entry point of our redirection
                // example.
                String itemname ="1";

                  MyFragmentA fragment = new MyFragmentA();
                Bundle bundle2 = new Bundle();
                bundle2.putString("key", itemname);
                fragment.setArguments(bundle2);

            }
        };

} 
```

* * *

分段

```
public class MyFragmentA extends Fragment {

 @Override
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
   Bundle savedInstanceState) {

  Bundle bundle = this.getArguments();
  if (bundle != null) {
      String hello = bundle.getString("key", defaultValue);
      System.out.println(hello);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T01:49:26.010

您是否尝试过使用标签来识别您的 Fragment 并使用 findFragmentByTag 来检索它？在我看来，这比使用 findFragmentById 更干净，它实际上是查找膨胀的 XML 布局的 id 或容器布局的 id！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:07:25.713

您的代码没有显示您的片段如何附加到活动，但您必须确保在附加片段*之前*在片段上设置参数，以便它们在 onCreateView 中可用。

# postgresql - 无需 Internet 的 GeoServer 和本地 PostgreSQL 数据库

> ID：11745514
> 
> 赞同：0
> 
> 时间：2012-07-31T17:14:16.503
> 
> 标签：postgresql, geoserver, pgadmin

简单的问题：我可以在我的 PC 上使用 GeoServer 和本地 PostgreSQL 数据库而不需要 Internet 连接吗？

我可以将 GeoServer 连接到数据库并创建图层吗？我也可以完全使用 pgAdmin 和 postGIS 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T04:14:17.527

> 简单的问题：我可以在我的 PC 上使用 GeoServer 和本地 PostgreSQL 数据库而不需要 Internet 连接吗？

是的

> 我可以将 GeoServer 连接到数据库并创建图层吗？

是的

> 我也可以完全使用 pgAdmin 和 postGIS 吗？

是的

# c# - apache网页和mono应用程序之间通信的框架

> ID：11745525
> 
> 赞同：0
> 
> 时间：2012-07-31T17:14:58.353
> 
> 标签：c#, .net, apache, mono, castle-monorail

我正在研究一个嵌入式项目，该项目涉及托管一个网页作为无头系统的主要用户界面。这个网页基本上应该看起来像一个具有可配置设置的路由器网页。我计划使用系统中可用的 Apache Web 服务器托管此网页。

但是，嵌入式系统上的主要应用程序在 Mono 上运行。

我想在网页和 Mono 应用程序之间进行通信。

哪个框架会给我一个很好的功能集来做到这一点？我在考虑 PHP，但我不确定。

请指教。

提前致谢，

副部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:24:25.300

您可以使用 Apache 作为前端服务器，它将请求转发到您的服务进程中的嵌入式服务器。在 Mono 进程中托管 http 应用程序有几个选项。其中一个更完整的可能是 Manos de Mono ( [http://manosdemono.org/](http://manosdemono.org/) )。

在此处查看一个超级简单的 Manos Web 应用程序的示例：[https ://gist.github.com/1065936](https://gist.github.com/1065936)

# c++ - C++ 删除操作符如何找到多态对象的内存位置？

> ID：11745527
> 
> 赞同：29
> 
> 时间：2012-07-31T17:15:01.960
> 
> 标签：c++, memory-management, g++

我想知道当给定一个与对象的真实内存位置不同的基类指针时，删除运算符如何计算出需要释放的内存位置。

我想在我自己的自定义分配器/释放器中复制这种行为。

考虑以下层次结构：

```
struct A
{
    unsigned a;
    virtual ~A() { }
};

struct B
{
    unsigned b;
    virtual ~B() { }
};

struct C : public A, public B
{
    unsigned c;
}; 
```

我想分配一个 C 类型的对象并通过 B 类型的指针删除它。据我所知，这是对 operator delete 的有效使用，它在 Linux/GCC 下工作：

```
C* c = new C;
B* b = c;

delete b; 
```

有趣的是，指针'b'和'c'实际上指向不同的地址，因为对象在内存中是如何布局的，而删除操作符“知道”如何找到和释放正确的内存位置。

我知道，一般来说，在给定基类指针的情况下，不可能找到多态对象[的大小：找出多态对象的大小](https://stackoverflow.com/questions/8122763/find-out-the-size-of-a-polymorphic-object)。我怀疑通常也无法找到对象的真实内存位置。

笔记：

*   我的问题与 new[] 和 delete[] 的工作方式无关。我对单个对象分配案例感兴趣。[delete[] 如何“知道”操作数数组的大小？](https://stackoverflow.com/questions/197675/how-does-delete-know-the-size-of-the-operand-array).
*   我也不关心如何调用析构函数。我对内存本身的释放感兴趣。[当我删除基类的指针时“删除”如何工作](https://stackoverflow.com/questions/10229481/how-delete-works-when-i-delete-a-pointer-of-base-class)
*   我使用 -fno-rtti 和 -fno-exceptions 进行了测试，因此 G++ 不应访问运行时类型信息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T17:24:33.083

这显然是特定于实现的。在实践中，实现事物的明智方法相对较少。从概念上讲，这里有几个问题：

1.  您需要能够获得指向最派生对象的指针，即（在概念上）包含所有其他类型的对象。

    在标准 C++ 中，您可以使用以下命令执行此操作`dynamic_cast`：

    ```
    void *derrived = dynamic_cast<void*>(some_ptr); 
    ```

    `C*`仅从 a得到支持`B*`，例如：

    ```
    #include <iostream>

    struct A
    {
        unsigned a;
        virtual ~A() { }
    };

    struct B
    {
        unsigned b;
        virtual ~B() { }
    };

    struct C : public A, public B
    {
        unsigned c;
    };

    int main() {
      C* c = new C;
      std::cout << static_cast<void*>(c) << "\n";
      B* b = c;
      std::cout << static_cast<void*>(b) << "\n";
      std::cout << dynamic_cast<void*>(b) << "\n";

      delete b;
    } 
    ```

    在我的系统上提供以下内容

    ```
    0x912c008
    0x912c010
    0x912c008

    ```

2.  一旦完成，它就会成为标准的内存分配跟踪问题。通常这是通过以下两种方式之一完成的，要么a）在分配的内存之前记录分配的大小，然后找到大小只是一个指针减法，要么b）在某种数据结构中记录分配和释放内存。有关更多详细信息，请参阅[this question](https://stackoverflow.com/a/851976/168175)，它有一个很好的参考。

    使用 glibc，您可以相当明智地查询给定分配的大小：

    ```
    #include <iostream>
    #include <stdlib.h>
    #include <malloc.h>

    int main() {
      char *test = (char*)malloc(50);
      std::cout << malloc_usable_size(test) << "\n";
    } 
    ```

    该信息可用于类似地释放/删除，并用于确定如何处理返回的内存块。

`malloc_useable_size`libc 源代码的 malloc/malloc.c 中给出了实现的确切细节：

> （以下包括 Colin Plumb 的轻微编辑解释。）
> 
> 内存块使用“边界标记”方法维护，如 Knuth 或 Standish 中所述。（有关此类技术的调查，请参阅 Paul Wilson 的论文 [ftp://ftp.cs.utexas.edu/pub/garbage/allocsrv.ps](ftp://ftp.cs.utexas.edu/pub/garbage/allocsrv.ps)。）空闲块的大小存储在每个块的前面和结尾。这使得将碎片化的块合并成更大的块非常快。大小字段还包含表示块是空闲还是正在使用的位。
> 
> 分配的块如下所示：
> 
> ```
>     块-> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ -+-+-+-+-+-+-+-+-+
>             | 前一个块的大小，如果已分配 | |
>             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+
>             | 块的大小，以字节为单位 |M|P|
>       内存-> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ -+-+-+-+-+-+-+-+-+  
>             | 用户数据从这里开始......  
>             . .  
>             . （malloc_usable_size() 字节）。  
>             . |   
> nextchunk-> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ -+-+-+-+-+-+-+-+-+     
>             | 块大小 |  
>             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+- +-+-+-+-+-+-+-+  
> 
> ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-31T17:23:58.437

销毁基类指针需要您实现了虚拟析构函数。如果你不这样做，所有的赌注都会被取消。

第一个调用的析构函数将是由虚拟机制（vtable）确定的最派生对象的析构函数。这个析构函数知道对象的大小！它可以将这些信息隐藏在某个地方，或者将其传递到析构函数链中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-31T17:26:03.633

它的实现已定义，但一种常见的实现技术是`operator delete`实际上由析构函数调用（而不是其中的代码`delete`），并且析构函数有一个隐藏参数来控制是否`operator delete`调用。

使用此实现，大多数对析构函数的调用（所有显式 dtor 调用、对 auto 和静态变量的调用，以及从派生析构函数对基析构函数的调用）都会将额外隐藏的 arg 设置为 false（因此不会调用 operator delete）。但是，当存在删除表达式时，它会调用隐藏参数为 true 的对象的顶级析构函数。在您的示例中，这将是 C::~C()，因此它将知道为整个对象回收内存

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T18:54:25.423

编译`delete`操作符时，编译器需要确定在析构函数执行后调用的“释放”函数。请注意，析构函数与释放调用没有任何直接关系，但它确实对编译器如何查找释放函数有影响。

在通常情况下，对象没有特定类型的释放函数，在这种情况下使用全局释放函数并且总是隐式声明（C++03 3.7.3/2）：

```
void operator delete(void*) throw(); 
```

请注意，此函数甚至不接受大小参数。它需要根据指针的值来确定分配大小。这可以通过在地址之前存储分配的大小来完成（是否有其他方式的实现？）。

但是，在决定使用该释放函数之前，编译器会执行查找以查看是否应使用特定于类型的释放函数。该函数可以有单个参数 (a `void*`) 或两个参数 (a`void*`和 a `size_t`)。

在查找释放函数时，如果用作操作数的指针的静态类型`delete`具有虚析构函数，则（C++03 12.5/4）：

> 释放函数是在动态类型的虚拟析构函数定义中通过查找找到的函数

实际上，`operator delete()`对于具有虚拟析构函数的类型，任何释放函数都是虚拟的，即使实际函数必须是虚拟的`static`（标准在 12.5/7 中对此进行了说明）。在这种情况下，编译器可以根据需要传递对象的大小，因为它可以访问对象的动态类型（对对象指针的任何必要调整都可以通过相同的方式找到）。

如果操作数的静态类型`delete`是静态的，则`operator delete()`释放函数的查找遵循通常的规则。同样，如果编译器选择需要大小参数的释放函数，它可以这样做，因为它在编译时知道对象的静态类型。

最后一种情况会导致未定义的行为：如果指针的静态类型没有虚拟析构函数但指向派生类型对象，则编译器可能会查找错误的释放函数并传递错误的大小。但由于这是未定义行为的结果，所以没关系。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T17:45:06.967

通常的实现（理论上，可能还有其他实现，我怀疑实际上是否存在）是每个基础对象都有一个 vtable（如果没有，基础对象不是多态的，不能用于删除）。该 vtable 不仅包含指向虚函数的指针，还包含整个 RTTI 所需的内容，包括从当前对象到最派生对象的偏移量。

为了解释（任何真正的实现可能存在差异，我可能犯了一些错误），这里是真正使用的：

```
struct A_VTable_Desc {
   int offset;
   void* (destructor)();
} AVTable = { 0, A::~A };

struct A_impl {
   unsigned a;
   A_VTable_Desc* vptr;
};

struct B_VTable_Desc {
   int offset;
   void* (destructor)();
} BVtable = { 0, &B::~B };

struct B_impl {
   unsigned b;
   B_VTable_Desc* __vptr;
};

A_VTable_Desc CAVtable = { 0, &C::~C_as_A };
B_VTable_Desc CBVtable = { -8, &C::~C_as_B };

struct C {
   A_impl __aimpl;
   B_impl __bimpl;
   unsigned c;
}; 
```

并且 C 的构造函数隐式地执行类似的操作

```
this->__aimpl->__vptr = &CAVtable;
this->__bimpl->__vptr = &CBVtable; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T17:24:53.733

指向多态对象的指针通常实现为指向对象和虚拟表的指针，其中包含有关对象底层类的信息。delete 会知道这些实现细节并找到合适的析构函数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T17:27:10.830

它可以像 malloc 一样做到这一点。一些 malloc 会记录对象本身之前的大小。大多数现代 malloc 都复杂得多。请参阅[tcmalloc](http://goog-perftools.sourceforge.net/doc/tcmalloc.html)，这是一种快速分配器，可将相同大小的对象在页面上保持在一起，因此它只需要在页面粒度上保留大小信息。

# java - 在java中将字符串数组写入csv文件的列

> ID：11745529
> 
> 赞同：1
> 
> 时间：2012-07-31T17:15:11.583
> 
> 标签：java, csv, filewriter, printwriter

所以我想要完成的是为我拥有的尽可能多的数组元素在列的每个单元格中写入一个数据数组。我希望我在 excel 中也看起来像这样：

```
buyer | parts |  price| quantity  | comments
tom   | blah  | 546   | 5         |   blah
      |  blah | 56    |  67       | 
```

我的文件有比这更多的列，但我想举一个简单的例子。什么也造成了我的问题是，一旦完成我的数组数据集，我不想在编写器所在的最后一行上打印下一列，所以我希望它在那个 forst 行上。我已经查看了其他库来完成此操作，但我找不到任何似乎满足我需求的东西。我确实了解 CSV 文件的性质可能不允许这种情况发生，无需手动添加空白单元格，但有没有其他方法可以做到这一点？

```
Enumeration <String> paramNames = request.getParameterNames();
        while(paramNames.hasMoreElements()) 
        {
            String paramName = (String)paramNames.nextElement();
                            writer.append(paramName);
            writer.append(',');
            String[] paramValues = request.getParameterValues(paramName);
            if (paramValues.length == 1)
            {
                String paramValue = paramValues[0];
                if (paramValue.length() == 0)
                {
                    writer.append("No Value");
                    writer.append('\n');
                }
                else
                {
                    writer.append(paramValue);
                    writer.append('\n');
                }
            }
            else
            {
                for(int i = 0; i<paramValues.length; i++)
                {
                    writer.append(paramValues[i]);
                    writer.append(',');
                }
                writer.append('\n');
            }
            previousname = paramName;

        }
        writer.flush();
        writer.close();
    } 
```

还要澄清这些数据的来源，一个位于表单中间的 JSP 表，所以我正在读取表中的值数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:32:24.267

来自：http: [//javacodeonline.blogspot.ca/2009/09/java-code-to-write-to-csv-file.html](http://javacodeonline.blogspot.ca/2009/09/java-code-to-write-to-csv-file.html)

```
/** The below Java Code writes 
 * some data to a file in CSV
 * (Comma Separated Value) File
 */

package developer;

import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;

public class MakeCSVFile {

    public static void main(String[] args) throws IOException {

        //Note the "\\" used in the path of the file 
        //instead of "\", this is required to read 
        //the path in the String format.
        FileWriter fw = new FileWriter("D:\\JavaCodeFile\\WriteTest.csv");
        PrintWriter pw = new PrintWriter(fw);

        //Write to file for the first row
        pw.print("Hello guys");
        pw.print(",");
        pw.print("Java Code Online is maing");
        pw.print(",");
        pw.println("a csv file and now a new line is going to come");

        //Write to file for the second row
        pw.print("Hey");
        pw.print(",");
        pw.print("It's a");
        pw.print(",");
        pw.print("New Line");

        //Flush the output to the file
        pw.flush();

        //Close the Print Writer
        pw.close();

        //Close the File Writer
        fw.close();        
    }
} 
```

可能不是进行硬打印，而是执行数组循环并打印用逗号分隔的每个值。

就像是 ：

```
Array array;

    Iterator<String> iter = array.iterator();
    while (iter.hasNext())
    {
        object = iter.next();
        pw.print(object.getBuyer());
        pw.print(",");
        pw.print(object.getTitle());
        ..          
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:58:00.800

如果您使用 Java 编写 CSV 文件，请考虑使用[OpenCSV](http://opencsv.sourceforge.net/)库。

# groovy - 如何创建通过未知选项的 Groovy CliBuilder？

> ID：11745531
> 
> 赞同：1
> 
> 时间：2012-07-31T17:15:20.460
> 
> 标签：groovy

我有以下内容：

```
final String scriptName = new File(getClass().protectionDomain.codeSource.location.path).getName()
final cli = new CliBuilder(
        stopAtNonOption: false,
        usage: "${scriptName} ARGUMENTS",
        width: 80)
cli.with {
    _ longOpt: "known-option-0", args: 1, argName: "KNOWN_OPTION_0", "Known option."
    _ longOpt: "known-option-1", args: 1, argName: "KNOWN_OPTION_1", "Known option."
} 
```

我希望能够通过以下方式调用它：

```
options = cli.parse(['--known-option-0=0', '--unknown-option=aoeu', '--known-option-1=1']) 
```

这样就没有解析错误，无需将 --unknown-option 添加到接受的选项列表中，并且设置 known-option-0 和 known-option-1 。

如果我设置：

```
 stopAtNonOption: true, 
```

没有发出错误，但是：

```
options.'known-option-0' == 0
options.'known-option-1' == false 
```

如何获取所有已知选项进行解析并忽略未知选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:13:25.497

```
class CliParser {
    final CliBuilder cli
    final List<Cli> options_list = []
    final List<String> arguments_list = []

    CliParser(CliBuilder cli) {
        this.cli = cli
    }

    Collection getOptions() {
        cli.options.getOptions()
    }

    Cli parse(List<String> args) {
        while (args.size() != 0) {
            groovy.util.OptionAccessor options = cli.parse(args)
            options_list.add(options)

            List<String> arguments = options.arguments()
            arguments_list.add(arguments[0])

            args = (arguments.size() > 1) ? arguments[1..-1] : []
        }

        return new Cli(options: options_list, arguments: arguments_list)
    }
}

class Cli {
    List<groovy.util.OptionAccessor> options
    List<String> arguments

    List<String> arguments() {
        arguments
    }

    List<Option> getOptions() {
        options.collect {
            it.getOptions()
        }
    }

    Object getProperty(String name) {
        final optionAccessor = options
                .find {
                    it.hasOption(name)
                }

        optionAccessor?.getProperty(name)
    }
}

final String scriptName = new File(getClass().protectionDomain.codeSource.location.path).getName()
final cliBuilder = new CliBuilder(
        stopAtNonOption: false,
        usage: "${scriptName} ARGUMENTS",
        width: 80)
cliBuilder.with {
    _ longOpt: "known-option-0", args: 1, argName: "KNOWN_OPTION_0", "Known option."
    _ longOpt: "known-option-1", args: 1, argName: "KNOWN_OPTION_1", "Known option."
}

final cliParser = new CliParser(cliBuilder)
final cli = cliParser.parse(args) 
```

# objective-c - 子视图和按钮

> ID：11745532
> 
> 赞同：0
> 
> 时间：2012-07-31T17:15:23.160
> 
> 标签：objective-c, ios, uiview, uiviewcontroller, uibutton

我有一个主视图控制器：

```
@interface ViewController : UIViewController 
```

我的 ScreenView 有一个属性：`@property (strong,nonatomic) MUIScreenView* screenView;`

它将通过以下方式调用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];   
    [self.view addSubview:_screenView];
} 
```

现在看看我的 MUIScreenViewClass：

`@interface MUIScreenView : MUIView`

`@interface MUIView : UIView`

在我的 MUIScreenView 我有一个方法：

```
-(void)addScreenObjectToView
{
   MUIButton *button = [[MUIButton alloc] initWithButtonModel:(ButtonModel*)MUIElement 
   [self addSubview:button];

   UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
   myButton.frame = CGRectMake(10, 220, 300, 40);
   [myButton setTitle:@"This is Standard UIButton!" forState:UIControlStateNormal];
   [myButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
   [self addSubview:myButton];

} 
```

这是我绘制东西的 MUIButton 方法：

```
-(void)addButtonToView
{
    UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame = CGRectMake(10, 50, 300, 40);
    [myButton setTitle:@"This is a MUIButton!" forState:UIControlStateNormal];
    [myButton addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:myButton];
} 
```

最后我有：

## ![在此处输入图像描述](../Images/10dffc1ffa860c3412ac6832bdca666b.png)

**顶部按钮**怎么可能死了？如果我碰它，什么也没有发生。我以同样的方式创建了它。

总结 - 我目前显示为“这是一个 MUIButton！” 是一个视图包含另一个视图，在第二个视图中我有 UIButton。作为“这是一个标准的 UIButton！” 是一个包含 UIButton 的 View。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:45:44.047

您需要将对主视图控制器的视图的引用传递给子视图，然后将按钮添加到该视图。您不能在不同的视图上调用选择器并让正确的视图接收它。

# java - Spring Roo DBRE 使用 GWT 生成项目的问题

> ID：11745533
> 
> 赞同：1
> 
> 时间：2012-07-31T17:15:24.660
> 
> 标签：java, spring, gwt, spring-roo

我使用这个脚本生成了一个 roo 项目：

使用 gwt 的费用示例有效，我的数据库逆向工程也适用于 web mvc。但是对于 web gwt，它会为每个 Locator 抛出 classNotFound 异常，因为它们没有生成，并且 gwt 无法使用默认值，原因不明。

我发现的一件事是 gwt 只支持我认为我正在使用的 jpaActiveRecord。

罗脚本：

```
project --topLevelPackage con --projectName con --java 6 --packaging WAR
persistence setup --provider HIBERNATE --database MSSQL --databaseName conDB --userName user --password 123 --hostName localhost
osgi start --url file://.../jtds-1.2.5.jar
database reverse engineer --schema dbo --package ~.domain --testAutomatically --enableViews 
web gwt setup
web gwt all --proxyPackage ~.client.proxy --requestPackage ~.client.request 
```

样本错误：

```
 Caused by: java.lang.ClassNotFoundException: com.sop.connect.server.locator.PersonsLocator
[ERROR]     at java.lang.ClassLoader.findClass(ClassLoader.java:522)
[ERROR]     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
[ERROR]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
[ERROR]     at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
[ERROR]     at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
[ERROR]     at java.lang.Class.forName0(Native Method)
[ERROR]     at java.lang.Class.forName(Class.java:264)
[ERROR]     at com.google.web.bindery.requestfactory.server.LocatorServiceLayer.resolveLocator(LocatorServiceLayer.java:122) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-18T17:37:27.667

当您从域对象的 @RooJpaActiveRecord 注释中删除分配 versionField = "" 时，将在与域对象相同的文件夹中生成 Locator 类，并且将在 ITD 文件中进行另一项必要的修改。

# jquery - JQuery 语法错误，无法识别的表达式：，

> ID：11745534
> 
> 赞同：5
> 
> 时间：2012-07-31T17:15:26.233
> 
> 标签：jquery, insertafter

我试图在列表中的每个元素之后简单地添加一个逗号。

```
$('#tag_cloud-2 div.tagcloud a').each(function(){
  console.log($(this));
  $(", ").after($(this));
}); 
```

控制台吐出标签，所以我知道它正在找到它们。我也尝试过 insertAfter ，但没有运气。这个接缝应该是这么简单的事情！感谢您指出我所缺少的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:17:21.290

`$(', ')`被视为选择器（无效），因为它无法创建包含字符串的文本节点。

但

`$("<span>, </span>").after($(this));`由于有效的标记将起作用。

尝试：

```
$(this).after(', '); 
```

**或者**

```
$(this).append(', '); 
```

**或者**

```
$(this).text(function(i, oldText) {
  return oldText + ', ';
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:18:00.370

jQuery 的[$()](http://api.jquery.com/jQuery/)函数并不像那样工作。在非标记字符串上调用它不会创建包含该字符串的文本节点。

您可以颠倒您的逻辑，从 开始`$(this)`，然后调用[after()](http://api.jquery.com/after/)，但是：

```
$(this).after(", "); 
```

因为`after()`如果其参数之一是非标记字符串，则会创建一个新的文本节点。

# java - Java - 读取字节数组中的文件

> ID：11745535
> 
> 赞同：0
> 
> 时间：2012-07-31T17:15:27.593
> 
> 标签：java, database

我想将一个 1.5 GB 的文件读入一个数组。[现在，由于需要很长时间](https://stackoverflow.com/questions/11741804/java-file-to-byte-array-fast-one)，我想将其切换到其他选项。有谁能够帮助我，

如果我将字节文件预处理到某个数据库中（或者可能以其他方式），我可以让它更快吗？

任何人都可以帮助我有没有其他方法可以让它更快。

实际上，我必须处理超过 50 个 1.5GB 的文件。所以，[这样的手术](https://stackoverflow.com/questions/11741804/java-file-to-byte-array-fast-one)对我来说是相当昂贵的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:22:49.380

你的磁盘子系统有多快？

如果每秒可以读取 40 MB，则读取 1500 MB 大约需要 40 秒。如果你想比这更快，你需要一个更快的磁盘子系统。如果您正在从本地驱动器读取数据并且需要几分钟时间，那么您就会遇到调优问题，并且您无法通过 Java 来解决此问题，因为这不是问题所在。

您可以改用内存映射文件，但这只会在您不需要所有数据时加快访问速度。如果您需要这一切，您会受到硬件速度的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T19:22:53.890

这取决于你想做什么。

如果您只想访问几个随机字节，那么读入数组并不好 - MappedByteBuffer 会更好。

如果您想读取所有数据并一次按顺序处理一小部分，那么您可以流式传输它。

如果您需要对整个数据集进行随机访问的计算，特别是如果您需要重复读取元素，那么加载到数组中可能是明智的（但 ByteBuffer 仍然是候选对象）。

你能展示一些示例代码或进一步解释吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:30:36.620

使用 BufferedInputStream 或 InputStream 可能会尽可能快（比 RandomAccessFile 快）。最大的 int 大小是 2,147,483,647，因此您的数组 1,610,612,736 也将是数组的最大大小。

我建议您使用 BufferedInputStream 访问文件以获得最佳速度，使用 skip() 和 read() 来获取您想要的数据。也许有一个实现这些的类，知道它的位置，并在你发送一个偏移量来读取时照顾你的寻找。我相信您关闭并重新打开输入流以将其放回开头。

而且...您可能不想将它们保存在数组中，而只是根据需要从文件中访问它们。如果加载时间是你的杀手，那可能会有所帮助。

# spring - Spring Data JPA 强制 CGLib 代理到非存储库类

> ID：11745543
> 
> 赞同：0
> 
> 时间：2012-07-31T17:15:58.167
> 
> 标签：spring, spring-data, spring-data-jpa

我正在尝试将现有的 Spring 3 JPA 2 Hibernate Web 应用程序迁移到 Spring Data JPA。但是，只需将最新的 Spring Data JPA 添加到 Maven 项目并配置 Spring Data 如下

```
<jpa:repositories 
    base-package="myapp.persistence.spring" 
    entity-manager-factory-ref="entityManagerFactory"
    transaction-manager-ref="transactionManager" /> 
```

春天开始抱怨：

```
2012-07-31 16:54:23,153 ERROR [ContextLoader       ] - [Context initialization failed                                                                       ] - [remoteAddress=, remoteHost=, thread=pool-2-thread-1] org.springframework.web.context.ContextLoader
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'companyRepository' defined in file [C:\Development\ApplicationServer\apache-tomcat-7.0.27\webapps\myapp\WEB-INF\classes\myapp\persistence\CompanyRepository.class]: Initialization of bean failed; nested exception is org.springframework.aop.framework.AopConfigException: Cannot proxy target class because CGLIB2 is not available. Add CGLIB to the class path or specify proxy interfaces.
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469) ~[spring-context-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282) ~[spring-web-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204) ~[spring-web-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [spring-web-3.0.7.RELEASE.jar:3.0.7.RELEASE]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779) [catalina.jar:7.0.27]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273) [catalina.jar:7.0.27]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566) [catalina.jar:7.0.27]
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556) [catalina.jar:7.0.27]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_24]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_24]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_24]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_24]
Caused by: org.springframework.aop.framework.AopConfigException: Cannot proxy target class because CGLIB2 is not available. Add CGLIB to the class path or specify proxy interfaces.
    at org.springframework.aop.framework.DefaultAopProxyFactory.createAopProxy(DefaultAopProxyFactory.java:67) ~[spring-aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.aop.framework.ProxyCreatorSupport.createAopProxy(ProxyCreatorSupport.java:104) ~[spring-aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:112) ~[spring-aop-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.postProcessAfterInitialization(PersistenceExceptionTranslationPostProcessor.java:133) ~[spring-tx-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1461) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) ~[spring-beans-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    ... 21 common frames omitted 
```

请注意，Spring Data 被配置为扫描包`myapp.persistence.spring`，而上面的错误引用了来自包的类`myapp.persistence`。当我将 CGlib 添加到项目中时，包括 Spring Data 在内的所有内容都可以正常工作。但发生了什么事？我是春季菜鸟，很困惑。我无法弄清楚 Spring Data 是如何发挥它的代理魔力的。至少官方的例子根本不包括 CGlib。更多的信息：

`CompanyRepository`是一个使用EntityManager的简单自制JPA-DAO：

```
@Repository
@Transactional(propagation = Propagation.MANDATORY)
public class CompanyRepository extends AbstractRepository<Company, Long> {
  …
} 
```

事务通过`@Transactional`AspectJ 编译时编织启用。上下文配置片段：

```
<tx:annotation-driven proxy-target-class="true" mode="aspectj"/>
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

部署到 Tomcat 7.0.27

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:55:59.273

如[参考文档](http://static.springsource.org/spring-data/data-jpa/docs/1.1.1.RELEASE/reference/html/#jpa.namespace)中所述，使用`<jpa:repositories />`为带有注释的 Spring bean 激活持久性异常转换`@Repository`。在[JavaDoc](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/stereotype/Repository.html)中`@Repository`，注解的主要目的是异常翻译，它将应用于使用它注解的组件。如果您的类实现了接口，则可以使用普通的 JDK 代理。如果它没有 - 就像你的情况一样 - 需要 CGLib 来创建代理。[Spring 参考文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-proxying)中的更多详细信息。

要在`<jpa:repositories />`没有 CGLib 的情况下使用，您的场景中基本上有两种选择：

1.  为每个用 注释的组件引入一个接口`@Repository`。这仍将应用可能是您想要的持久性异常转换。
2.  首先不使用`@Repository`，而是从`@Component`根本上禁用这些组件的异常翻译。

# vb.net - 用户无任何异常退出 vb.net 应用程序

> ID：11745546
> 
> 赞同：-1
> 
> 时间：2012-07-31T17:16:09.960
> 
> 标签：vb.net, event-viewer

用户报告他们退出他们的应用程序没有任何错误，我在事件查看器中有很多这些错误：

> EventType clr20r3，P1 main.exe，P2 1.0.0.0，P3 4f6b05ad，P4 system.drawing，P5 2.0.0.0，P6 4333aeaf，P7 17e，P8 20，P9 **system.argumentexception**，P10 NIL。
> 
> 事件类型 clr20r3、P1 main.exe、P2 1.0.0.0、P3 4f6b05ad、P4 microsoft.visualbasic、P5 8.0.0.0、P6 4333d6d8、P7 5e、P8 1e1、P9 34ssps20bdj3nj0wmit5kamzhvglfzcc、P10 NIL。
> 
> EventType clr20r3、P1 main.exe、P2 1.0.0.0、P3 4f6b05ad、P4 microsoft.visualbasic、P5 8.0.0.0、P6 4333d6d8、P7 85、P8 a2、P9 **system.componentmodel.win32**、P10 NIL。

我们在 Windows Server 2003 上安装了终端服务器，并且像上面一样，我在一天内有大约 500 个错误。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:44:01.300

看起来您遇到了一些未处理的异常。如果 .NET 应用程序遇到 Try/Catch 块未捕获的异常并且没有调试器来显示它，则应用程序将终止。

向您的应用程序添加一些异常处理和日志记录，以便您可以查看异常的所有详细信息。我建议`ToString`在显示或记录异常对象时使用它的方法，因为这将显示异常及其所有内部异常的异常类型、消息和堆栈跟踪。一旦你有了这些信息，就应该更容易确定出了什么问题以及如何解决它。

要添加异常处理，如果您使用的是 VB 的应用程序框架，请转到项目属性页面的“应用程序”选项卡并单击“查看应用程序事件”按钮。在`MyApplication`类中，为事件添加事件处理程序`UnhandledException`，例如：

```
Private Sub MyApplication_UnhandledException(ByVal sender As Object, ByVal e As UnhandledExceptionEventArgs) Handles Me.UnhandledException
    MyLog.WriteEntry(e.Exception.ToString())
End Sub 
```

但是，如果您不使用应用程序框架，请转到应用程序的入口点 metion ( `Sub Main`) 并在该方法中的所有代码周围放置一个 Try/Catch 块，例如：

```
Public Sub Main
    Try
        ' ...
    Catch ex As Exception
        MyLog.WriteEntry(ex.ToString())
    End Try
End Sub 
```

这些示例假设您有一个`MyLog`具有共享`WriteEntry`方法的类。显然，您需要在此类中实现自己的日志记录。

# iphone - 如何解决存档应用程序错误 - 缺少 xmlreader.h

> ID：11745547
> 
> 赞同：0
> 
> 时间：2012-07-31T17:16:11.317
> 
> 标签：iphone, ios, xcode, archiving

我正在归档一个应用程序并收到一条错误消息，指出我缺少以下内容：

```
#include <libxml/xmlreader.h> 
```

该应用程序在设备和模拟器上构建良好。我只在存档时收到此错误。

知道我需要做什么来解决这个问题吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:28:47.547

我更改了库搜索路径并向其中添加了“/usr/include/libxml2”。之后它工作并存档。

# jquery - 自动刷新跨度文本

> ID：11745569
> 
> 赞同：2
> 
> 时间：2012-07-31T17:17:38.043
> 
> 标签：jquery, jquery-ui, jquery-selectors

我有一个像这样的跨度元素：

```
 <span id="test" name="testing" >Test </span> 
```

span ie Test 的文本可能会根据页面中的其他操作而改变。我想在 2 秒后自动刷新 span 文本。如何使用 jquery 实现这一点？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:20:36.043

您可以使用`setTimeout`或`setInterval`。如果您想重复一次，请使用前者，如果您想在 2 秒后连续刷新，请使用后者：

```
setTimeout(function() { $("#test").text("text from other operations"); },2000); 
```

或者

```
setInterval(function() { $("#test").text("text from other operations"); },2000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:21:05.763

您可以使用 javascript setInterval 创建类似计时器的效果。[https://developer.mozilla.org/en/DOM/window.setInterval](https://developer.mozilla.org/en/DOM/window.setInterval)

代码将类似于：

```
setInterval(function(){
    $('#test').text('newtext');
}, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:21:15.300

```
var interval = setInterval(dostuff, 2000);

function dostuff() {
    /* do stuff */
    $('span#test').html('some stuff');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:21:42.623

```
function updateSpan(){
  var newText;
  // Compute new text here
  document.getElementById("test").innerHTML=newTest;
}
setInterval("updateSpan()",2000); 
```

这甚至可以在没有 jQuery 的情况下使用。

# cocoa-touch - NSFetchedResultsController 委托异常

> ID：11745574
> 
> 赞同：5
> 
> 时间：2012-07-31T17:18:15.890
> 
> 标签：cocoa-touch, uitableview, core-data, nsfetchedresultscontroller

我有一个应用程序，它使用表格视图来显示我的核心数据中的项目列表。我正在使用远程 api，并且在拉下表格视图后我正在更新我的内容 - 这会触发对 API 的调用。

数据被检索、解析并插入/更新到我的核心数据中。

在保存我的核心数据上下文后，我*有时会*遇到错误......请注意，我没有为此使用多个线程，就像我说的那样，它似乎并不总是发生。

我真的要疯了。看来这家伙有类似的问题，但我仍然无法用他的解决方案修复我的问题： [CoreData 错误让我发疯...... CoreData：严重的应用程序错误。从 NSFetchedResultsController 的委托中捕获的异常](https://stackoverflow.com/questions/7844326/coredata-error-driving-me-crazy-coredata-serious-application-error-an-excep)

这是完整的错误：

```
2012-07-31 14:14:47.332 MyApp[2893:11303] 
*** Assertion failure in -[_UITableViewUpdateSupport _setupAnimationsForNewlyInsertedCells], 
/SourceCache/UIKit_Sim/UIKit-1914.84/UITableViewSupport.m:1133
2012-07-31 14:14:47.332 MyApp[2893:11303] CoreData: error: Serious application error.  
An exception was caught from the delegate of NSFetchedResultsController during a call to -
controllerDidChangeContent:.  
Attempt to create two animations for cell with userInfo (null) 
```

**更新**：

我的获取请求有一个谓词。为了似乎删除以前从 API 下载的对象，而新的 JSON 结果中缺少这些对象。我正在设置一个 hideFromUser 标志，它保存在我的核心数据中。

如果此标志为 YES，则它不会出现在表格视图中。但如果没问题，那就可以了。如果有任何更改，我也会更新有关该托管对象的信息。是否有可能我有一个以前设置为隐藏的对象......现在设置为显示，并且它还有一些新数据，这是否可能触发“单元格应该更新”和“单元格应该插入”？

更多我认为它似乎是相关的。

以下是我更新数据的方式：

1）我将相应类型的所有相关对象设置为“隐藏表单用户”（NSPredicate 确保它们不会显示在表视图中）。

2) 我从 JSON 数据中得到一个 NSArray。

3）循环每个项目，我的 createABookOfClass:withJSON: 方法查询一本书的核心数据（使用 json 字典中的 ID），如果找不到，它会创建一个新的。注意：此时“隐藏用户标志”已恢复。

4) 完成后，我保存。

```
[[DPLocalStore getInstance] hideFlagItemsOfType:NSStringFromClass([MyFavouriteBook class])];

NSArray * itemsJSON = [data mutableObjectFromJSONData];

[itemsJSON enumerateObjectsUsingBlock:^(NSDictionary *obj, NSUInteger idx, BOOL *stop) {     
    [[DPLocalStore getInstance] createABookOfClass:[MyFavouriteBook class]
                                          withJSON:obj];
}];

NSError *error = nil;
BOOL didsave = [[DPLocalStore getInstance] save:&error]; 
```

也许正在发生的事情是包含对象 A 的单元格已更新，它是更新：隐藏标志已更改。因此我遇到了 NSFetchedResultsController 的代表想要更新该单元格并删除它的情况......因为谓词现在不对应于这个对象......这听起来很可能......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T18:04:00.300

我想我可能已经发现了错误，因为我更改了它，所以我没有遇到问题，所以我假设它没问题。

在我的实现中，`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`我在 switch 语句中有这个`NSFetchedResultsChangeMove`：

```
case NSFetchedResultsChangeMove:
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];

    // Reloading the section inserts a new row and ensures that titles are updated appropriately.
    [tableView reloadSections:[NSIndexSet indexSetWithIndex:newIndexPath.section]
             withRowAnimation:UITableViewRowAnimationFade];
    break; 
```

由于它在一个较旧的项目中使用（我不是其中的一部分），我认为整个`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`实现是好的，因为这实际上更像是一个模板，而不是你可以做任何定制的东西。

因此，直到我在 Apple 开发者网站上再次阅读它之前，我并没有过多关注它。而且我注意到，在这种情况下，`NSFetchedResultsChangeMove`您必须删除一个单元格，并将该单元格插入到新路径中。然而我在没有真正意识到的情况下实现了 - 删除单元格并重新加载该部分！

实际上，我应该并且现在拥有以下内容：

```
case NSFetchedResultsChangeMove:
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                     withRowAnimation:UITableViewRowAnimationFade];
    [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                     withRowAnimation:UITableViewRowAnimationFade];
    break; 
```

就像我说的那样，从那以后我就没有遇到过问题。很想从任何人那里知道什么内部工作会对此负责 - 例外是“尝试为单元创建两个动画”。

感谢您的任何兴趣。

# sql - 显示两个具有相同列名的表中的数据

> ID：11745575
> 
> 赞同：1
> 
> 时间：2012-07-31T17:18:19.383
> 
> 标签：sql, ms-access

我在 Access 中有两个表，Employee 和 Dept。

在 Employee 表中有 empname 列和 deptcode 列，而在 Dept 表中有 deptcode 列和 deptname 列。

我想做一个在新表中显示 empname、deptcode 和 deptname 的查询。我试过了：

```
SELECT empname, deptcode, deptname
  FROM employee,dept 
```

并且由于两个表中都存在 deptcode 并且它会产生错误，因此它无法工作。谁能告诉我如何解决这个错误问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:21:07.543

您需要在 FROM 子句中为表命名，然后在 SELECT 语句中使用表别名。

```
select e.empname,d.deptcode,d.deptname 
from employee e
inner join dept d
  on e.deptcode = d.deptcode; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:21:00.167

您只需要以别名或表名本身的形式将列与表相关联。像这样的东西应该工作。

```
select employee.empname,
dept.deptcode,
dept.deptname from employee,dept 
where employee.deptcode = dept.deptcode; 
```

请注意，我添加了一个条件来匹配员工的部门代码

# git - git，对旧的已删除应用程序的错误引用

> ID：11745578
> 
> 赞同：0
> 
> 时间：2012-07-31T17:18:31.690
> 
> 标签：git

感谢您花时间提供帮助。我是 git 的新手，但我花了整整两天的时间来解决我的问题。最后我想要的只是在我的桌面上有一个文件夹，我可以在其中编辑代码并将更改应用到 f​​acebook 页面。每次我解决某些问题时，其他问题都会导致问题，现在它一定是一团糟，所以我将从我遇到的最后一个问题（错误消息）开始，然后回到顶部。我只是按照本教程[https://devcenter.heroku.com/articles/facebook](https://devcenter.heroku.com/articles/facebook)我创建了一个在我的桌面上显示的克隆。当我输入 git remote 时，我得到了 heroku。但是当我输入 $ git commit -am "changed greeting" 时，我必须分配文件夹沸腾-badlands-5761（包含所有文件）来应用更改，然后当我输入 git push heroku 时，我得到了！您的指纹为 33:91:89:4d:cf:65:b8:31:7d:c8:69:6f:cb:b9:1d:15 的密钥无权访问 furious-robot-218。致命：远程端意外挂断了事情是 furious-robot-218 是我一天前删除的旧应用程序。（就像我说的，我花了相当多的时间搜索和尝试包括创建新应用程序在内的东西，希望它能给我一个新的开始）你能告诉我简单地将所有更改分配到正确文件夹的命令是什么吗？ git add rolling-badlands-5761/ 它给了我：

```
 C:\Users\jeroe\Desktop>git add boiling-badlands-5761/
            C:\Users\jeroe\Desktop>git status
            # On branch new-main-branch
            #
            # Initial commit
            #
            # Changes to be committed:
            #   (use "git rm --cached <file>..." to unstage)
            #
            #       new file:   boiling-badlands-5761/.gitmodules
            #       new file:   boiling-badlands-5761/AppInfo.php
            #       new file:   boiling-badlands-5761/Readme.md
            #       new file:   boiling-badlands-5761/channel.html
            #       new file:   boiling-badlands-5761/images/fpo-picture.gif
            #       new file:   boiling-badlands-5761/images/get-started-bg.jpg
            #       new file:   boiling-badlands-5761/images/header-sketch.png
            #       new file:   boiling-badlands-5761/images/picture-sketch.png
            #       new file:   boiling-badlands-5761/images/samples-bg.png
            #       new file:   boiling-badlands-5761/images/sprites.png
            #       new file:   boiling-badlands-5761/index.php
            #       new file:   boiling-badlands-5761/javascript/jquery-1.7.1.min.js
            #       new file:   boiling-badlands-5761/stylesheets/base.css
            #       new file:   boiling-badlands-5761/stylesheets/mobile.css
            #       new file:   boiling-badlands-5761/stylesheets/reset.css
            #       new file:   boiling-badlands-5761/stylesheets/screen.css
            #       new file:   boiling-badlands-5761/utils.php
            #
            # Untracked files:
            #   (use "git add <file>..." to include in what will be committed)
            #
            #       Any Video Converter Professional.lnk
            #       Audacity.lnk
            #       Continuer l'installation Daemon Tools Lite.lnk
            #       GoldWave.lnk
            #       Notepad++.lnk
            #       cmd.exe
            #       desktop.ini 
```

然后

```
 C:\Users\jeroe\Desktop>git commit -am "changed greeting"
            [new-main-branch (root-commit) dc24904] changed greeting
             Committer: unknown <jeroe@jeroe-PC.(none)>
            Your name and email address were configured automatically based
            on your username and hostname. Please check that they are accurate.
            You can suppress this message by setting them explicitly:
                git config --global user.name "Your Name"
                git config --global user.email you@example.com
            After doing this, you may fix the identity used for this commit with:
                git commit --amend --reset-author
             17 files changed, 924 insertions(+), 0 deletions(-)
             create mode 100644 boiling-badlands-5761/.gitmodules
             create mode 100644 boiling-badlands-5761/AppInfo.php
             create mode 100644 boiling-badlands-5761/Readme.md
             create mode 100644 boiling-badlands-5761/channel.html
             create mode 100644 boiling-badlands-5761/images/fpo-picture.gif
             create mode 100644 boiling-badlands-5761/images/get-started-bg.jpg
             create mode 100644 boiling-badlands-5761/images/header-sketch.png
             create mode 100644 boiling-badlands-5761/images/picture-sketch.png
             create mode 100644 boiling-badlands-5761/images/samples-bg.png
             create mode 100644 boiling-badlands-5761/images/sprites.png
             create mode 100644 boiling-badlands-5761/index.php
             create mode 100644 boiling-badlands-5761/javascript/jquery-1.7.1.min.js
             create mode 100644 boiling-badlands-5761/stylesheets/base.css
             create mode 100644 boiling-badlands-5761/stylesheets/mobile.css
             create mode 100644 boiling-badlands-5761/stylesheets/reset.css
             create mode 100644 boiling-badlands-5761/stylesheets/screen.css
             create mode 100644 boiling-badlands-5761/utils.php 
```

git status 给了我：

```
 C:\Users\jeroe\Desktop>git status
            # On branch new-main-branch
            # Untracked files:
            #   (use "git add <file>..." to include in what will be committed)
            #
            #       Any Video Converter Professional.lnk
            #       Audacity.lnk
            #       Continuer l'installation Daemon Tools Lite.lnk
            #       GoldWave.lnk
            #       Notepad++.lnk
            #       cmd.exe
            #       desktop.ini
            nothing added to commit but untracked files present (use "git add" to track) 
```

并 git 记录

```
 C:\Users\jeroe\Desktop>git log
            commit dc2490455c28f930c9395e793cc4e93265cabde6
            Author: unknown <jeroe@jeroe-PC.(none)>
            Date:   Tue Jul 31 18:35:24 2012 +0200
                changed greeting 
```

你能帮我吗，因为我现在真的不知道去哪里找。我尝试不同的命令越多，我就越搞砸。现在我只想将更改分配给正确的文件夹。提前致谢

* * *

太好了，非常感谢，我只有最后一个重要问题。执行完您说的命令后，它应用了代码，但我想知道是否每次我想编辑代码时都必须重做这些步骤。所以我只是关闭了 cmd 并再次打开以输入 git comit -am 然后 git push heroku 然后再次引用这个名为 furious 机器人的旧应用程序有没有一种方法可以编辑正确的文件夹和代码而无需键入所有命令你给我。因为如果是这样，那将是一项非常非常乏味的工作。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:36:40.297

好的，首先你似乎已经在你的桌面文件夹中初始化了一个 git repo：

```
C:\Users\jeroe\Desktop>git add boiling-badlands-5761/
C:\Users\jeroe\Desktop>git status ;# this returns output 
```

这不是你想要做的。首先尝试使用[heroku docs here中提到](https://devcenter.heroku.com/articles/facebook#1-fetch-your-apps-source-code)`git clone`的命令，然后在克隆它后进入该目录。其次，在你做任何其他事情之前，发出这些命令（当然分别用你的姓名和电子邮件替换和）：`cd``<Your_Name>``<your_email>`

```
git config --global user.name "<Your_Name>"
git config --global user.email <your_email> 
```

这将防止您接下来遇到的“作者未知”提交问题：

```
 Author: unknown <jeroe@jeroe-PC.(none)> 
```

先试试这些。如果 heroku 推送问题仍然存在，我们也会解决这个问题，但是直到你得到一个 1) 不是你的桌面目录的克隆，并且 2) 没有提交者信息就不能保存提交，那么做任何事情都是没有意义的别的。

一旦你有了上面提到的新克隆，将煮沸的荒地 5761 的内容移动到其中。不要移动整个目录，只移动文件。然后在您发出命令后，从新的克隆`git config`尝试，然后.`git add .``git commit`

# windows-phone-7 - 如何在 Windows Phone 7 中以表格格式显示 DataTable 数据？

> ID：11745580
> 
> 赞同：0
> 
> 时间：2012-07-31T17:18:35.410
> 
> 标签：windows-phone-7, xaml, windows-phone-7.1

我在 C#.Net 中有一个包含 50 行和 10 列的 DataTable 对象。我想在 Windows Phone 中显示这些数据。Windows Phone 中是否有任何控件可以从 DataTable 源中获取数据并显示它？用户应该能够查看每条记录的 10 列数据。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:39:35.477

对此没有特定的表控件，但您可以使用具有列和行定义的网格创建手动表，并将它们绑定到视图模型中的数据

# haskell - Cabal 多个可执行文件

> ID：11745583
> 
> 赞同：11
> 
> 时间：2012-07-31T17:18:48.360
> 
> 标签：haskell, cabal

我正在使用 Yesod 在网站上工作，我正在运行正常的构建，但我似乎无法可靠地填充我的数据库。我有第二个填充数据库的 haskell 程序，我已将其添加到我的 cabal 文件中，如下所示：

```
executable         program
  if flag(library-only)
    Buildable: False

  main-is:           ../main.hs
  hs-source-dirs:    dist
  build-depends:     base
                   , myproject
                   , yesod-default

executable         init
  if flag(library-only)
    Buildable: False

  main-is:           init.hs
  hs-source-dirs:    Init
  build-depends:     base
                   , directory
                   , persistent
                   , persistent-sqlite
                   , text
                   , myproject
                   , yesod-default 
```

问题是当我运行“cabal build”时，它不会在 init.hs 更改时重建 init。我该怎么做才能做到这一点？

这是一个示例终端会话（在编辑 init.hs 之后）：

```
$ cabal build
Building myproject-0.0.0...
Preprocessing library myproject-0.0.0...
Registering myproject-0.0.0...
$ rm -rf dist/build/myproject/init
$ cabal build
Building myproject-0.0.0...
Preprocessing library myproject-0.0.0...
Registering myproject-0.0.0... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-23T20:49:07.960

您可以通过将它们作为参数传递给`cabal build`和来管理多个可执行文件`cabal run`。例如，`cabal build init`。如果没有给出目标名称，则第一个可执行文件是默认的。

# javascript - 从 JavaScript 对象的数组成员变量访问数据

> ID：11745592
> 
> 赞同：0
> 
> 时间：2012-07-31T17:19:07.267
> 
> 标签：javascript, jquery

我正在编写一个用于工作的 jQuery 插件，它使用 Google 的 Feed API 提取 RSS 提要数据。使用此 API，我将所有相关的 RSS 提要数据保存到一个对象中，然后通过方法对其进行操作。我有一个功能应该将 RSS 提要呈现到网页上。不幸的是，当我尝试显示单个 RSS 提要条目时，出现错误。这是我的相关代码：

```
var RSSFeed = function(feedTitle, feedUrl, options) {
/*
 * An object to encapsulate a Google Feed API request.
 */

// Variables
this.description = "";
this.entries = [];
this.feedUrl = feedUrl;
this.link = "";
this.title = feedTitle;
this.options = $.extend({
    ssl : true,
    limit : 4,
    key : null,
    feedTemplate : '<article class="rss-feed"><h2>{title}</h1><ul>{entries}</ul></article>',
    entryTemplate : '<li><h3><a href="{link}">{title}</a></h3><p>by: {author} @ {publishedDate}</p><p>{contentSnippet}</p></li>',
    outputMode : "json"
}, options || {});

this.sendFeedRequest = function() {
    /*
     * Makes the AJAX call to the provided requestUrl
     */

    var self = this;
    $.getJSON(this.encodeRequest(), function(data) {
        // Save the data in a temporary object
        var responseDataFeed = data.responseData.feed;

        // Now load the data into the RSSFeed object
        self.description = responseDataFeed.description;
        self.link = responseDataFeed.link;
        self.entries = responseDataFeed.entries;
    });
};

this.display = function(jQuerySelector) {
    /*
     * Displays the RSSFeed onto the webpage
     * Each RSSEntry will be displayed wrapped in the RSSFeed's template HTML
     * The template markup can be specified in the options
     */

    var self = this;
    console.log(self);
    console.log(self.entries);
};
};

$.rssObj = function(newTitle, newUrl, options) {
    return new RSSFeed(newTitle, newUrl, options);
};

// Code to call the jquery plugin, would normally be found in an index.html file
rss = $.rssObj("Gizmodo", "http://feeds.gawker.com/Gizmodo/full");
rss.sendFeedRequest();

rss.display($('div#feed')); 
```

显然，我的`display()`功能还没有完成，但它是一个很好的例子。第一个`console.log()`会将所有相关数据写入控制台，包括`entries`数组。但是，当我尝试自己记录`entries`数组时，它返回一个空数组。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:02:36.933

我想问题是在`display()`没有等待 AJAX 请求完成的情况下调用它。因此，当您已经尝试访问时，请求仍在运行`entries`- 因此是空数组。

为了解决这个问题，您可以将调用`display()`移至`$.getJSON()`. 您只需添加所需的选择器作为参数：

```
this.sendFeedRequest = function(selector) {
    var self = this;
    $.getJSON(this.encodeRequest(), function(data) {
        var responseDataFeed = data.responseData.feed;
        ...
        self.entries = responseDataFeed.entries;
        self.display(selector);
    });
}; 
```

* * *

**编辑：**

如果你不想`display()`进入回调，你可以尝试这样的事情（未经测试！）：

```
var RSSFeed = function(feedTitle, feedUrl, options) {
    ...
    this.loading = false;
    this.selector = null;

    this.sendFeedRequest = function() {
        var self = this;
        self.loading = true;
        $.getJSON(this.encodeRequest(), function(data) {
            ...
            self.loading = false;
            if (self.selector != null) {
                self.display(self.selector);
            }
        });
    };

    this.display = function(jQuerySelector) {
        var self = this;
        if (self.loading) {
            self.selector = jQuerySelector;
        }
        else {
            ...
        }
    };
}; 
```

# java - 如何使用 g.fillRect 方法在 Java 中创建一个 Rectangle 对象

> ID：11745595
> 
> 赞同：9
> 
> 时间：2012-07-31T17:19:26.530
> 
> 标签：java, graphics, applet, drawing, drawrectangle

我需要创建一个矩形对象，然后使用paint() 将其绘制到小程序上。我试过

```
Rectangle r = new Rectangle(arg,arg1,arg2,arg3); 
```

然后尝试使用将其绘制到小程序

```
g.draw(r); 
```

它没有用。有没有办法在java中做到这一点？我已经在谷歌的生命中寻找答案，但我一直无法找到答案。请帮忙！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T19:10:15.170

试试这个：

```
public void paint (Graphics g) {    
    Rectangle r = new Rectangle(xPos,yPos,width,height);
    g.fillRect(r.getX(), r.getY(), r.getWidth(), r.getHeight());  
} 
```

[编辑]

```
// With explicit casting
public void paint (Graphics g) {    
        Rectangle r = new Rectangle(xPos, yPos, width, height);
        g.fillRect(
           (int)r.getX(),
           (int)r.getY(),
           (int)r.getWidth(),
           (int)r.getHeight()
        );  
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T17:30:45.803

你可以这样尝试：

```
import java.applet.Applet;
import java.awt.*;

public class Rect1 extends Applet {

  public void paint (Graphics g) {
    g.drawRect (x, y, width, height);    //can use either of the two//
    g.fillRect (x, y, width, height);
    g.setColor(color);
  }

} 
```

其中 x 是 x 坐标 y 是 y 坐标 color=您要使用的颜色，例如 Color.blue

如果你想使用矩形对象，你可以这样做：

```
import java.applet.Applet;
import java.awt.*;

public class Rect1 extends Applet {

  public void paint (Graphics g) {    
    Rectangle r = new Rectangle(arg,arg1,arg2,arg3);
    g.fillRect(r.getX(), r.getY(), r.getWidth(), r.getHeight());
    g.setColor(color);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-26T01:25:27.430

# php - DirectAdmin php api 创建用户

> ID：11745597
> 
> 赞同：3
> 
> 时间：2012-07-31T17:19:42.130
> 
> 标签：php, api, sockets, curl

我想创建 php 脚本，女巫将能够在 DirectAdmin 中创建用户，因为这是命令 `/CMD_API_ACCOUNT_USER`：

```
`MyServer.com:2222/CMD_API_ACCOUNT_USER?action=create&add=submit....` 
```

但是，theresseler(admin) 必须登录。我不知道该怎么做，请建议使用什么登录：

`socket`，`curl`或者别的什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-06T02:34:52.547

DA 使用 HTTP 基本身份验证来登录您的帐户。

这里是官方文档 [https://www.directadmin.com/api.php](https://www.directadmin.com/api.php)

# javascript - 如何将 Javascript 事件附加到移动 Safari 后退按钮？

> ID：11745603
> 
> 赞同：4
> 
> 时间：2012-07-31T17:19:55.877
> 
> 标签：javascript, ios, mobile-safari, dom-events

当用户单击移动 Safari 中的后退按钮时，我需要显示一个确认对话框。我的申请很长，我想在用户离开页面之前提醒他们他们的申请尚未填写/完成。当用户单击链接并尝试离开页面时，我已经设置了所有内容，但是我无法终生弄清楚如何将事件附加到浏览器的后退按钮。`onbeforeunload`在 iOS 中不起作用。任何提示将不胜感激。

注意：我意识到警报框是撒旦的产物，但这就是我被告知要做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T11:29:14.943

您可以检查事件的`persisted`属性`onpageshow`。它在初始页面加载时设置为 false。当从 bfcache 加载页面时（用户使用后退按钮导航），它设置为 true。

```
window.onpageshow = function(event) {
    if (event.persisted) {
        alert("From back / forward cache.");
    }
}; 
```

由于某种原因，jQuery 在事件中没有这个属性。您可以从原始事件中找到它。

```
$(window).bind("pageshow", function(event) {
    if (event.originalEvent.persisted) {
      alert("From back / forward cache.");
    }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T17:28:37.067

在 Chrome 等桌面浏览器中，您可以拦截页面的离开并显示消息。你不能做任何事情，除了显示信息。出于显而易见的原因，浏览器正在完成其余的工作。不知道这是否也适用于 iOS。

```
window.onbeforeunload = function () {
    return 'do you really wanna do that?'
} 
```

[http://jsfiddle.net/JAAZ5/](http://jsfiddle.net/JAAZ5/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T17:22:33.320

任何浏览器都不允许控制后退按钮。我怀疑移动 Safari 也不例外。

# c# - 为什么我不能从 WPF 运行截图工具？

> ID：11745608
> 
> 赞同：8
> 
> 时间：2012-07-31T17:20:09.180
> 
> 标签：c#, wpf

我创建了一个带有很多按钮的 WPF 窗口，每个按钮都运行不同的程序。例如，要运行 MS Word，我使用了：

```
System.Diagnostics.Process.Start("C:\\Program Files (x86)\\Microsoft Office\\Office14\\WINWORD.EXE"); 
```

但是当我尝试以同样的方式运行 Windows 7 Snipping Tool 时，它不起作用。它应该是这样的：

```
System.Diagnostics.Process.Start("C:\\Windows\\System32\\SnippingTool.exe"); 
```

我确定路径是正确的，但总是出现一条消息说找不到文件。我想知道为什么会这样。

重要提示：我使用的是 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T17:46:01.597

用这个：

```
// if the build platform of this app is x86 use C:\windows\sysnative
if(!Environment.Is64BitProcess) 
   System.Diagnostics.Process.Start("C:\\Windows\\sysnative\\SnippingTool.exe");
else
   System.Diagnostics.Process.Start("C:\\Windows\\system32\\SnippingTool.exe"); 
```

问题在于您的构建平台 (x86) 和`C:\Windows\System32\`64 位操作系统上文件夹的自动重定向。

基本上，出于多种原因，在 vista/windows 7 64 位操作系统中，当 32 位应用程序尝试访问`C:\Windows\System32\`它时，它会自动重定向到名为`C:\Windows\SysWOW64\`. 因此，您无法启动`snippingtool.exe`，因为它不存在于该文件夹中。

唯一的方法是使用`C:\Windows\sysnative\`并绕过重定向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T17:24:35.677

我的通灵调试器告诉我，您正在 64 位版本的 Windows 上运行 32 位程序，因此您对`%WINDIR%`( `C:\Windows`) 的调用实际上被重新路由到`C:\Windows\SysWOW64`.

使用环境变量而不是硬编码路径到可能会根据环境和/或 Windows 版本移动的目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T17:24:20.857

您应该改用环境变量。很可能您在 64 位系统上运行它`C:\Windows\System32\`并被重定向。

# sql-server - 在 ssrs 2008 中显示隐藏的数据集

> ID：11745610
> 
> 赞同：0
> 
> 时间：2012-07-31T17:20:13.817
> 
> 标签：sql-server, ssrs-2008, reporting-services

我正在尝试显示在 SSRS 报告中创建的所有隐藏数据集。右键单击“数据集”文件夹时，没有看到“显示隐藏的数据集”选项。我也试过微软链接。请如何显示所有隐藏的数据集。

[http://technet.microsoft.com/en-us/library/cc627463(v=sql.100).aspx](http://technet.microsoft.com/en-us/library/cc627463(v=sql.100).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:57:48.523

我在 SSRS 2005 中遇到了同样的问题。一种方法是手动删除底层 XML 中的数据集，尽管我还不累。但我确实通过手动修改 XML 解决了其他一些问题。

# java - 是否可以使用 perforce 获取修改方法的名称而不仅仅是类名？

> ID：11745611
> 
> 赞同：0
> 
> 时间：2012-07-31T17:20:16.670
> 
> 标签：java, parsing, perforce

我想知道您是否知道如何在 perforce 中检索已修改方法的名称而不是类名？

我的意思是，当您想查看在提交之前所做的更改时，您可以输入：p4 opens

所以知道，我想找到修改后的行，分析 java 文件并说：好的，你在这些方法中修改了一些代码，或者你在任何方法之外修改了一些东西（比如属性）

所以我的问题是：我应该怎么做？任何图书馆都可以做到这一点？像 JavaCC 这样的 Parser 是个好主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:43:19.813

Perforce 不提供任何类型的自定义解析器来计算此类信息。变更管理系统的重点是它们可以保存任何类型的文件。

更改的方法将特定于源（在本例中为 java 文件），并且实现起来非常棘手，因为每种语言都需要自己的解析器。

能做到吗？也许吧，但是变更管理已经足够棘手，而且我没有看到任何大型变更管理项目将自己与特定语言结合起来来完成您的要求。

同时，您可以`p4 diff /path/to/file/NameOfFile.java`在提交之前使用。这将向您显示哪些行发生了更改，并且在大多数情况下，缩小确切更改的范围就足够了。在我提交之前，我通常会检查`p4 diff`运行时列出的每个文件`p4 opened`以及`p4 revert`我标记为要编辑但最终没有进行任何更改的所有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T17:59:52.987

查看 P4Eclipse 插件，它提供了一个 Java 感知的差异视图。

# audio - 使用 swfextract 从 swf（游戏）中提取音乐，但无法转换/播放。ADPCM

> ID：11745613
> 
> 赞同：1
> 
> 时间：2012-07-31T17:20:27.060
> 
> 标签：audio, flash

```
$ swfextract spewer.swf 
```

印刷：

```
[-s] 25 Sounds: ID(s) 1, 873-896 
```

所以我跑：

```
$ swfextract -s 873-896 spewer.swf 
Sound is ADPCM, format: 22050 samples/sec, 16 bit, mono
(…and so on…)
Sound is ADPCM, format: 22050 samples/sec, 16 bit, mono 
```

并得到了名为 output.adpcm 的文件，但 sox 无法将其转换为 mp3。如何将其转换为 mp3/wav 或任何其他“可播放”格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:25:54.087

有一个来自[https://github.com/alexgirao/adpcm_swf](https://github.com/alexgirao/adpcm_swf)的程序 adpcm_swf2raw可以完全按照您的意愿进行操作，您只需要这样：

```
$ swfextract -s 0883 -o 0883.adpcm Spewer.swf 
```

声音为 ADPCM，格式：22050 个样本/秒，16 位，单声道

```
$ adpcm_swf2raw -i 0883.adpcm -o 0883.raw

$ sox --rate 22050 --channels 1 --bits 16 --encoding signed-integer --endian little --type raw 0883.raw 0883.wav

$ play 0883.wav 
```

请享用！

# python - J/Python gethostbyaddr() 返回：ip 还是域？

> ID：11745614
> 
> 赞同：0
> 
> 时间：2012-07-31T17:20:28.357
> 
> 标签：python, windows-7, jython

我有一个 Jython 应用程序，它获取客户端的 IP 地址，然后通过 gethostbyaddr() 运行它。有时它会返回三倍的 ip 地址，有时我们会得到一个域名 (xxxx.domain.com)。我们希望使用完整的计算机名称，因为 IP 地址是动态的。我们已经确定某些网络或工作站设置阻止了域名的返回。这是一个 Windows 网络（快速编辑：IP 地址在我们的网络内部，而不是外部）。

所以问题是：有没有更好的方法来获取完整的计算机名称，或者是否有人碰巧知道我们可以更改的设置？

代码片段：

```
print socket.gethostbyaddr('{ip}') 
```

谢谢！

编辑：

```
 print socket.getfqdn( socket.gethostbyaddr('{ip}')[0] ) 
```

有时返回 IP 地址，有时返回计算机名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:30:07.823

如果它不能像这样工作，我会说这是一个错误：

```
stromberg@aw50 ~/src/stackoverflow/pyc-from-java $ /usr/local/jython-2.5.3b1/bin/jython  
Jython 2.5.3b1 (2.5:5fa0a5810b25, Feb 22 2012, 12:39:02)  
[Java HotSpot(TM) 64-Bit Server VM (Sun Microsystems Inc.)] on java1.6.0_31  
Type "help", "copyright", "credits" or "license" for more information.  
>>> import socket  
>>> import platform  
>>> platform.node()  
'aw50'  
>>> socket.gethostbyname('aw50')  
'10.0.30.50'  
>>> socket.gethostbyaddr('10.0.30.50')  
('aw50.av1.ca.us.gaikai.int', ['aw50.av1.ca.us.gaikai.int'], ['10.0.30.50'])  
>>> socket.gethostbyaddr('10.0.30.50')[0]  
'aw50.av1.ca.us.gaikai.int'  
>>> 
```

您可以尝试最新的 2.5 beta 或 2.7 alpha。

# python - Python Tkinter 界面外观因操作系统而异

> ID：11745615
> 
> 赞同：1
> 
> 时间：2012-07-31T17:20:28.547
> 
> 标签：python, tkinter

我的应用程序在 Windows 上看起来很漂亮 ![在此处输入图像描述](../Images/130e331f766773158a201f2e5fe25e9b.png)

但在 MacOS 和 Linux 上，它看起来一点也不好看！ ![在此处输入图像描述](../Images/2724f1542545e1b14d43de3a0ebf44d0.png)

我可以做些什么来帮助使这个小部件的外观在操作系统之间保持一致？

我的应用程序源代码： http: [//pae.st/BILs/](http://pae.st/BILs/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:36:45.230

使用 Tkinter 的`place`管理器进行小部件布局会导致应用程序在不同操作系统上的布局不佳。您应该使用一个`pack`或多个`grid`管理器，这两个管理器都会根据您遇到的不同小部件大小进行调整。

# javascript - 如何选择具有特定 ID 和特定 rel 的元素

> ID：11745616
> 
> 赞同：0
> 
> 时间：2012-07-31T17:20:30.943
> 
> 标签：javascript, jquery

我查看了选择器，属性似乎是最接近的选择，但我似乎无法让它工作。

我正在尝试做的是选择一个具有特定 id 且也具有特定 rel 值的元素。

例如：

```
<input value="Needthisvalue" rel="15" value=wahtever" id="pickthisID" type="hidden"> 
```

找出具有该 id 和该 rel 的输入。到目前为止我尝试的是：

TabID 包含 15。

```
$('#pickthisID[rel="'+TabID+'"]').val(); 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:25:14.767

首先，你的 id 必须是唯一的，否则你的 HTML 是错误的并且会抛出大量的 JS 错误。至于你的问题，只需使用

```
$('#pickthisID[rel='+a+']').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:28:29.447

jQuery 已经过优化，因此，如果您提供 ID 选择器（例如`#pickthisID`），它将停止寻找找到的第一个匹配元素。这是因为`id`每个页面的属性应该是唯一的。

但是，这会起作用：

```
$('[id="pickthisID"][rel="'+TabID+'"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:29:54.577

正如 OP 所建议的，您的 HTML 中存在错误。

```
<input value="Needthisvalue" rel="16"  id="pickthisID" type="hidden">
console.log($('input[rel=16]').val()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:30:34.633

我认为您的代码应该可以工作。但是你对 html 标记有一些问题。

您使用`value`属性两次。

```
<input value="Needthisvalue" rel="15" value=wahtever" id="pickthisID" type="hidden"> 
```

但`value`应该有一次：

```
<input value="Needthisvalue" rel="15" id="pickthisID" type="hidden"> 
```

***jQuery***

```
var TabID= 15;
alert( $('#pickthisID[rel='+ TabID +']').val() ) 
```

**[*演示*](http://jsfiddle.net/Tacw4/1/)**

### 笔记

`rel`不是 的有效属性`input`。如果可能的话使用`data-rel`.

# javascript - 在 Ecmascript 5.1 中哪里提到 if 语句中没有左花括号是可接受的？

> ID：11745617
> 
> 赞同：2
> 
> 时间：2012-07-31T17:20:34.333
> 
> 标签：javascript, ecmascript-5

我不记得 if 语句的规则，所以我查看了第 12.5 条，但我仍然不清楚是否需要大括号。所以，我问，在 Ecmascript 5.1 的什么地方提到了 if 语句中没有左花括号是可以接受的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T05:02:58.653

这是第 12.5 节中的 if 语句的语法：

```
IfStatement : 
     if (表达式)语句else语句 
    if (表达式)语句

```

从外观上看，不需要花括号，但我们需要弄清楚语句到底是什么。此语法可在第 12 节中找到。

```
陈述 ：
    堵塞
    变量语句
    空语句
    表达式语句
    如果语句
    迭代语句
    继续声明
    断句
    退货声明
    带声明
    标签声明
    开关语句
    抛出语句
    尝试语句
    调试器语句

```

如果我们更深入地研究 12.1 节，我们会发现块语句的定义。

```
块： 
     { StatementList opt  } 

```

我们找到了花括号，但这是否意味着它们是必需的？答案是不。在检查语句的语法时，冒号后面的每个元素都被认为是一个语句，因此是 if 语句语法的有效部分。以下是有效 if 语句的实际示例。

```
// if ( Expression ) ReturnStatement
if (true) 
    return false;

// if ( Expression ) Block
if (true) {
    return false;
}

// if ( Expression ) TryStatement
if (true) try {
    return false;
} catch (e) {
    return e;
}

// if ( Expression ) EmptyStatement
if (true) ;

// if ( Expression ) IfStatement
if (true)
    if (false)
        return false; 
```

# c++ - 让精灵反弹回来

> ID：11745618
> 
> 赞同：0
> 
> 时间：2012-07-31T17:20:34.377
> 
> 标签：c++, directx, sprite

我正在玩一些 DirectX 9.0，并希望一个对象在碰到屏幕边缘（顶部、底部、右侧和左侧）时反弹回来。精灵是一个 128x128 像素的图像。我设法让它来回反弹，但这不会发生在图像在屏幕之外的一半或太早之前。这是因为它自己的对象位于图像的中间，无论如何要“删除”背景部分，以便程序在图像部分本身与屏幕边缘碰撞之前不会反弹精​​灵？我必须手动修改图像吗？像裁剪它什么的=

这是我正在使用的一些代码：

```
if(this->Textures[i].posision.x >= this->_screenWidth)
{
    this->Textures[i].right = false;
}
else if(this->Textures[i].posision.x <= 0)
{
    this->Textures[i].right = true;
}

if(!this->Textures[i].right)
    this->Textures[i].posision.x -= 0.3f;
else
    this->Textures[i].posision.x += 0.3f; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:27:06.607

好吧，如果您使用向左矢量行驶，则碰撞将被定义为：

```
if(this->Textures[i].posision.x - 128/2 <= 0)
{
    this->Textures[i].right = true;
} 
```

如果您的 position.x 和 position.y 指的是图像的中心，那么您所要做的就是添加/减去图像大小的一半以获得图像的边界。如果你的精灵没有填满你的图像，那么你可能应该裁剪掉一些。

# vb6 - 将文本和 ID 值添加到 VB6 组合框

> ID：11745622
> 
> 赞同：4
> 
> 时间：2012-07-31T17:20:40.443
> 
> 标签：vb6

我目前正在尝试使用 AddItem 方法添加到我的 VB6 组合框。这可行，但是，我想在下拉列表中显示文本，但我需要传递该文本的 ID。

有没有办法通过使用 AddItem 方法来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T18:57:07.213

它不能在方法中完成，但只要 ID 是数值，`AddItem`就可以使用属性立即完成：`NewIndex`

```
With Combo1
    For i = 16 To 34
        .AddItem "Item " & i
        .ItemData(.NewIndex) = i
    Next
End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T21:36:42.977

由于 ID 不是数字，我没有使用上面的解决方案。

我必须创建一个具有“desc”和“cod”的类型，然后创建一个该类型的数组。

然后我使用下拉列表的 ListIndex（由数组填充）来获取包含 id 的元素值。

```
Private Type T_arrType
    cod As String
    dsc As String
End Type

dim x as integer
x = cbo.listIndex
msgbox(strArr(x).cod)
msgbox(strArr(x).dsc) 
```

# qt - 插件 '[path]/APlugin.dll' 使用了不兼容的 Qt 库。(4.8.2) [调试]

> ID：11745625
> 
> 赞同：3
> 
> 时间：2012-07-31T17:20:49.977
> 
> 标签：qt, plugins

我正在尝试编译一个 Qt 库项目以将其 DLL 用作我的主应用程序的插件。我遇到了这个特殊的错误，无论我尝试什么，我似乎都无法克服它。

我相信当我可以为您提供“工作问题”（因为缺乏更好的措辞）时，用代码标签混淆问题是没有意义的。

[这是两个项目的链接。主要应用程序和我目前正在测试的插件。](http://www.mediafire.com/?f7afqcgj3v6x5fz) （请记住修改dll的Application项目中的路径。我使用的是绝对路径，这很可能永远不会与您使用的相同。我使用绝对路径来确保问题与查找文件本身无关)

到目前为止，我已经检查过：

*   我的 Qt 版本确实是 4.8.2。内置 VS2010 命令提示符。
*   据我了解文档，我的代码（特别是 APlugin 项目）逐字遵循文档说明。有一些人为错误的空间，但我相信我做对了。[如此处所述（底层 API：扩展 Qt 应用程序）](http://doc.qt.nokia.com/4.7-snapshot/plugins-howto.html)
*   我能够生成其他 QPluginLoader::errorString() 错误（例如，使用 .dll 文件的无效路径将返回“找不到文件”错误）。从而减少其使用的误差范围。

截至今天，谷歌的结果充其量是神秘的和/或不适用于我当前的开发环境（我在 VS2010、Win7 N Ultimate、Qt 4.8.2 上）

我相信我最好提供问题可重现的项目，而不是仅仅用代码混淆问题，但如果你认为我仍然应该复制粘贴我的代码，请告诉我，我会在问题中明确提供。

到目前为止，我唯一能提供的是，尽管我不使用 .pro 文件，但我不需要它，因为我的应用程序将是 Windows 专有的，并且 vcproj 文件已经包含该数据。

# xcode - 从 makefile 内部设置 PATH 变量不适用于 make 3.81

> ID：11745634
> 
> 赞同：2
> 
> 时间：2012-07-31T17:21:21.433
> 
> 标签：xcode, makefile, osx-mountain-lion

更改 Makefile 中的环境变量 PATH 不会对 CLT 中的 make 生效，而使用我从原始源编译的 make util 可以。

简单的 Makefile

```
PATH := $(PATH):/opt/bin

export PATH

all:
      @cscope --version 
```

我的测试

```
/tmp $ echo $PATH
/usr/bin:/bin:/usr/sbin:/sbin
/tmp $ ls /opt/bin/cscope
/opt/bin/cscope
/tmp $ which make
/usr/bin/make
/tmp $ make
make: cscope: No such file or directory
make: *** [all] Error 1
/tmp $ ./_install/bin/make
cscope: version 15.7a
/tmp $ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-apple-darwin11.3.0
/tmp $ ./_install/bin/make --version
GNU Make 3.82
Built for x86_64-apple-darwin12.0.0
Copyright (C) 2010  Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:45:36.000

您将`make`变量与`shell`变量混淆了。通过您的设置，被调用的 shell 命令不受您设置的`make`变量`PATH`的影响。

您应该`PATH`在配方中设置变量，例如

```
all:
    @PATH=$(PATH):/opt/bin; cscope --version 
```

您必须在一行中同时执行，因为配方中的每一行都将在另一个 shell 中运行，从而有效地丢失`PATH`您刚刚所做的设置。`\`或者，您可以通过在每行末尾添加反斜杠将其分成多行：

```
all:
    @PATH=$(PATH):/opt/bin; \
    cscope --version 
```

* * *

更新

抱歉，我错过了您的 makefile 与`make 3.82`. 我确实尝试了这两个版本，`3.81`并且`3.82`在这种情况下表现不同。

我确实通过如下`3.81`调用来使用它：`make`

```
make SHELL="/bin/sh -c" 
```

或者

```
make SHELL=/bin/bash 
```

# perl - WWW::Perl 中的机械化，脚本被杀死

> ID：11745637
> 
> 赞同：0
> 
> 时间：2012-07-31T17:21:33.500
> 
> 标签：perl, www-mechanize

我编写了一个 Perl 脚本，它使用 WWW::Mechanize 连接到一个站点，登录然后访问该站点内的几个页面。一切都很好，但是，当我尝试访问大量页面时，脚本被杀死了。我确信这与 HTTP 服务器的配置和配置的连接限制无关。这是因为，该脚本在我自己的站点上运行。

这是我的脚本的高级概述：

```
$url="http://example.com";
$mech=WWW::Mechanize->new();
$mech->cookie_jar(HTTP::Cookies->new());
$mech->get($url); 
```

使用表单域登录网站。

现在，一旦我登录，我会连接到站点内的 URL，如下所示：

$i 是 for 循环中的迭代计数器

```
$internal_url="http://example.com/index.php?page=$i";

$mech->get($internal_url); 
```

在返回的页面上执行一些操作（$mech->content using HTML::TreeBuilder::XPath）

现在，我遍历连接到不同 internal_url 的 for 循环，因为 $i 的值在每次迭代中都会递增。

正如我所说，这一切都很好。然而，在大约 180 页之后，脚本被杀死了。

可能是什么原因？我已经尝试过多次。

我什至添加了一个 $mech->delete; 在 FOR 循环结束之前，以防止任何内存泄漏。

但是，唯一的问题是 $mech 维护的登录会话将因此而被破坏。

我已经尝试了多次，并且这个脚本在访问相同数量的页面后总是被杀死。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T00:18:46.983

试试这个代码：

```
$mech=WWW::Mechanize->new();
$mech->stack_depth(0); 
```

或者

```
$mech=WWW::Mechanize->new(stack_depth=>0); 
```

> 根据文档：获取或设置页面堆栈深度。如果您正在执行大量页面抓取并且内存不足，请使用此选项。
> 
> 值 0 表示“根本没有历史记录”。默认情况下，最大堆栈深度非常大，有效地保留了所有历史记录。

# objective-c - 从数组写入 CSV 文件的最简单方法是什么？

> ID：11745645
> 
> 赞同：1
> 
> 时间：2012-07-31T17:21:50.480
> 
> 标签：objective-c, csv, nsarray

从数组导出到 CSV 文件的最简单方法是什么？我计划使用 for 循环并将逗号插入字符串，但意识到我不知道如何将 txt 文件更改为 CSV 文件。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:38:12.627

我总是用

```
NSString *csvString = [/*name of array*/ componentsJoinedByString:@","];

//Create file manager, pick path, etc

[/*name of file manager*/ createFileAtPath:/*file path*/ contents:[csvString dataUsingEncoding:NSUTF8StringEncoding] attributes:nil]; 
```

我只用它从浮点数或字符串数​​组创建一个 .csv 文件。如果您的数据中有格式化字符，您可能必须在生成 .csv 之前调用转义加法方法才能使所有内容看起来像您想要的那样。

如果您想在 .csv 中添加多行，则需要`\n`在每个换行符处添加（如果您还没有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:24:16.737

只需将文件保存/打开为 .csv 文件即可。例如，如果您现在保存/打开为 test.txt，只需使用 test.csv

顺便说一句，如果文本值中包含“，”，则需要对该字段使用“”。否则，它将不是 100% 兼容的 csv 文件。

# sql - SQL 中的 IsDate 函数将无效日期评估为有效日期

> ID：11745650
> 
> 赞同：12
> 
> 时间：2012-07-31T17:22:13.460
> 
> 标签：sql, sql-server, tsql

我正在针对从 Excel 文件导入的数据运行 SQL 语句。在这个 SQL 中，我正在检查用户是否使用 IsDate 函数正确输入了日期。由于这是尚未转换的原始数据，因此所有日期都存储在 varchar 数据类型字段中。

在某些情况下，当用户输入的日期格式明显不正确时，IsDate 返回 1（有效日期）。

例如：

```
07/001/2012

2012-07-002

007/002/2012 
```

有关如何处理此问题的任何建议？

```
SELECT *
  FROM tblImport
 WHERE (ISDATE(dt) = 0 
        AND (dt is not null AND dt <> '')) 
```

谢谢！

ps 拍打用户没有帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-31T17:50:12.583

我做了很多数据转换工作，这是我创建的一个函数，几乎每天都在使用它来清除错误的日期：

```
CREATE FUNCTION dbo.fnCheckDate
(@InDate nvarchar(50))
RETURNS DATETIME
AS
    BEGIN
        declare @Return DATETIME

        select @return = CASE WHEN ISDATE(@InDate) = 1
                            THEN CASE WHEN CAST(@InDate as DATETIME) BETWEEN '1/1/1901 12:00:00 AM' AND '6/6/2079 12:00:00 AM'
                                    THEN @InDate
                                    ELSE null
                                    END
                            ELSE null
                            END
        return @return
    END
GO 
```

结果：

```
SELECT dbo.fnCheckDate('07/001/2012') --> Returns 2012-07-01 00:00:00.000
SELECT dbo.fnCheckDate('2012-07-002') --> Returns 2012-07-01 00:00:00.000
SELECT dbo.fnCheckDate('007/002/2012') --> Returns 2012-07-01 00:00:00.000
SELECT dbo.fnCheckDate('00/002/2012') --> Returns Null
SELECT dbo.fnCheckDate('006/031/2012') --> Returns Null
SELECT dbo.fnCheckDate('') --> Returns Null 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-06T03:29:15.717

尝试设置第`dateformat`一个 - 当我看到异常时这对我有用。

```
set dateformat dmy
select IsDate(<column>)
from Table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:31:05.773

也许只是检查 dt 的 LEN？但是，它不能处理 len 有效的情况。也许输入验证应该发生在前端？

# javascript - CSS 显示会影响 jQuery/Javascript？

> ID：11745654
> 
> 赞同：1
> 
> 时间：2012-07-31T17:22:44.290
> 
> 标签：javascript, jquery, html, css

我相信我遇到了一个奇怪的现象，我想知道是否有人知道为什么会发生这种情况。我一直在使用我创建的自定义 jQuery 幻灯片对摄影网站进行大量图像处理，但遇到了一些问题。

我在这里有一个画廊：[http ://www.daemondeveloper.com/photography/gallery.php](http://www.daemondeveloper.com/photography/gallery.php)

我一直在添加一些函数来调整这个画廊中的图像大小，以便它们缩放到预览图像大小的大小。如您所见，最后一张图像是全景的，即使我有 javascript 告诉它调整大小，也不会填满 div 的整个高度。

如果您刷新页面，javascript 似乎会突然工作，并且图片会按应有的方式缩放。

现在尝试单击女孩的全景图片，我的幻灯片将出现，显示使用 jQuery 缩放和垂直居中的图像。下面的函数是处理单击图库中的小图像预览的函数。

如果您查看注释`changeSize()`函数的位置，那是我使用该函数的位置并且缩放不起作用。然后我将它移到显示我的幻灯片的 .show() 函数之后，现在它可以工作了。所以看起来 display:none; 影响了 javascript 的触发方式，因为当我调试时，currentImg 对象为空，就好像 .slides 选择器在设置为 display:none; 时不存在一样。这真的发生了，还是我只是看到了其他东西的副作用？

如果这真的发生了，它可能与我所说的第一个问题的原因有关，即在第一次加载gallery.php 页面时全景图像没有缩放。

```
$('.imgHolder').click(function(){
    currentPosition = $('.imgHolder').index(this);

    $('#slideShow').width(slideWidth);

  // Remove scrollbar in JS
  $('#slideContainer').css('overflow', 'hidden');

  // Wrap all .slides with #slideInner div
  slides.css({
    'float' : 'left',
    'width' : slideWidth
  });

    // Set #slideInner width equal to total width of all slides
    $('#slideInner').css('width', (slideWidth * numberOfSlides));

    // Hide left arrow control on first load
    manageControls(currentPosition);

    $('#slideInner').css('margin-left' , slideWidth*(-currentPosition));

    //changeSize(); used to be here

    $('#filter').show();
    $('#photoWrap').show();

            //Change image scale and center
    changeSize();
}); 
```

这是进行缩放和居中的 changeSize() 函数

```
 function changeSize(){

  currentSlide = $('.slide').get(currentPosition);
  currentImg = $(currentSlide).children('img:first')[0];
  imgRatio =  $(currentImg).height() / $(currentImg).width(); 

if(imgRatio < slideRatio)
{
    $(currentImg).addClass('landscape');
    //Vertically align
    var thisHeight = $(currentImg).height();
    $(currentImg).css('margin-top', ($('#slideShow').height()/2)-(thisHeight/2));

}else{
    $(currentImg).addClass('portrait');
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:40:58.530

```
$('#gallery ul li').each(function() {
    var img = $(this).children('div').children('img').first();
    var ratio = img.height() / img.width();
    var goal = img.parent('div').height() / img.parent('div').width();

    if (ratio < goal) {
        img.addClass('portrait');

        img.css('margin-left', -(img.width() / 2) + ($(this).children('div').width() / 2));
    } else {
        img.css('width', '100%');
    }
}); 
```

在这里，我从您的代码中删除了不必要的实例，因为您已经选择了在设置变量`$()`时要调用方法的元素。`img`我怀疑这种冗余是否是最终问题，但这是一个很好的起点。

将您的代码更新为此，让我们从那里进行调试。

编辑：

我想我发现了你的错误（好吧，我至少找到了一个）：

```
function configGallery()
{

var currentPosition;
var slides = $('.slide')
var currentSlide;
var currentImg;
var slideWidth = 720;
var numberOfSlides = slides.length;
...
} 
```

你知道这里有什么问题吗？之后您忘记了分号`var slides = $('.slide')`，这可能是您的问题。老实说，我很惊讶你的任何脚本都运行了。缺少分号通常会使整个事情崩溃。

更新：

这里还有一些选择器供您在有机会时删除 $() ：

```
function changeSize(){

      currentSlide = $('.slide').get(currentPosition);
      currentImg = $(currentSlide).children('img').first();
      imgRatio =  $(currentImg).height() / $(currentImg).width(); 

    if(imgRatio < slideRatio)
    {
        $(currentImg).addClass('landscape');
        //Vertically align
        var thisHeight = $(currentImg).height();
        $(currentImg).css('margin-top', ($('#slideShow').height()/2)-(thisHeight/2));

    }else{
        $(currentImg).addClass('portrait');
    }
} 
```

更新：

好的，我给你写了一个[小小提琴](http://jsfiddle.net/Wj3RM/2/)来帮助你重新编写你的图像大小函数。我会努力完善它并将其放入插件中为您服务。

更新：

这是一个快速而肮脏的插件中的相同功能：http: [//jsfiddle.net/Wj3RM/3/](http://jsfiddle.net/Wj3RM/3/) 虽然我没有把它美化 - 我认为这样适应和修改会更容易。

# stack - 如何在 Forth（或 Factor）中编写应用程序？

> ID：11745658
> 
> 赞同：4
> 
> 时间：2012-07-31T17:22:51.457
> 
> 标签：stack, forth, factor-lang

我可能对探索像 Forth（或 Factor）这样的基于堆栈的语言感兴趣。我希望看到的是如何一步一步地从头开始构建应用程序。我发现的教程很简陋，并不能帮助我理解更大的图景。想一想在处理大量部件时如何管理堆栈是令人困惑的。

我一直认为（也许是错误的）学习语言的好方法是用它来编写[Roguelike](http://en.wikipedia.org/wiki/Roguelike)游戏。我很难弄清楚如何将一堆东西放在一起：迷宫、数十种生物、宝藏、角色统计数据等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T18:07:48.483

从某种意义上说，所有语言都是等价的；您通过将问题分解成更小的部分来编写程序，然后将这些部分编码并让它们一起工作。Forth 具有不同寻常的语法特性，但它仍然是一种编程语言。

事实上，与 Lisp 一样，Forth 让您触手可及。在 Lisp 中，使用“宏”，您可以编写自己的控制结构，这些控制结构与内置的任何东西一样好；在 Forth 中，您也可以这样做。

如果您有兴趣了解有关 Forth 的更多信息，我建议您阅读 Leo Brodie 的经典书籍《*Starting Forth* 》和《 *Thinking Forth*》。

哦！谷歌刚刚告诉我这两本书现在都可以在线免费获得：

[http://www.forth.com/starting-forth/](http://www.forth.com/starting-forth/)

[http://thinking-forth.sourceforge.net/](http://thinking-forth.sourceforge.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T17:26:14.197

我会向您指出[Factor](http://factorcode.org/)而不是纯粹的 Forth；有很多示例应用程序、GUI、Web 应用程序等。如果您对 Web 框架特别感兴趣，请查看[Furnace](http://docs.factorcode.org/content/article-furnace.html)。

最终我不明白这个问题；基于堆栈与完成任何事情有什么关系？在过去，它是嵌入式系统*的*首选语言。我写了从谷物拳击机器人到计算器的所有东西……嗯，几乎所有东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-08T14:40:22.677

我试图在此答案的底部直接回答您的所有问题。但在此之前，这里是学习基于堆栈的 Forth 的 7 个要点或方面，或者一般关于基于堆栈的语言，或实现目标的方法：

1：这是思考这个问题的一个关键方法：堆栈不是你保存数据的地方——只是你将参数从一个函数（或方法）传递到另一个函数（或方法）的方式。

2：有一个用Forth写的“Basic Language”解释器。这将是在 Forth 中编写应用程序的**一种**方法——编写您自己的 Basic 解释器（或输入您找到的解释器），然后用您刚刚创建的 Basic 语言编写 Roguelike 游戏。

3：如果您浏览旧的“Forth Dimensions”杂志，就会创建并展示几个不同的 Forth 面向对象扩展（包括源代码）。输入其中之一，并使用它以其中一种面向对象的方式编写您的 Rogue-like 游戏。如果您仍然卡住，请使用您最喜欢的 C 语言（C++、C# 或 Java）编写它，这就是关键……尽可能原始地编写它。然后将您自己的应用程序拆开——每个方法、枚举、常量等都构成了**您**为实现游戏而创建的领域特定语言的一部分。写下这些部分，并弄清楚如何在 Forth 中完成，最好只使用 Forth 的习语。你可能需要在 Forth 工作一段时间才能达到那个阶段。

4：学习如何用汇编语言编程，这是一种有 Forth 的汇编语言，它具有用于同一微控制器或 CPU 的嵌入式汇编程序。这正是 Forth 在计算机刚刚变得越来越普及时真正击败竞争对手的地方——推出了全新的微控制器，创建了 BIOS 和操作系统。一旦你用纯汇编语言完成了这个，然后进入具有相同汇编语言的 Forth 并编写相同的应用程序，但使用 Forth 汇编器构建构建块（DSL），然后编写 BIOS 和操作系统在那些 DSL 中。Forths 恰好同时是低级和高级的，最好的应用程序是用多个 DSL 编写的，而不是基于堆栈的原语。一旦你用汇编语言编写过，

5：看看 C# 或 Java，发现它们都基于虚拟机，这是一种特定的 DSL。但也要意识到这两个虚拟机都是堆栈机器，并且支持它们的语言是基于堆栈的语言。但是如果你用 Java 编程，或者如果你用 C# 编程，你真的根本不会考虑**你**正在运行的堆栈基础——这是一件非常**好的**事情！你**想要**遵循相同的模式。A. 了解您需要什么基本机制/工具， B. 构建您需要的工具， C. 使用您构建的工具构建您的应用程序。您可能必须将自己的中缀伪代码转换为您创建的后缀虚拟机。你需要面向对象吗？——你可以用 Forth 构建它。您需要多处理吗？--您可以构建它。你需要一种 Erlang 类型的轻量多线程吗？——你可以构建它。你需要一个Basic、一个Pascal、一个C#、一个Java、一个Lua吗？——你可以构建它。用你最喜欢的语言构建你的 Roguelike 游戏，然后可能是另一种语言，然后是汇编语言。然后在 Forth 中构建它。

6：在这个链接上，有一种方法可以制造一个本机运行 CIL（通用中间语言 - .NET 和 Mono 的基于堆栈的语言，在微软开源规范之前，它曾经是 MSIL 微软中间语言）的微处理器）。您购买 IP 逻辑块，然后将其编程到 FPGA 中。这是[一篇论文的摘要](https://www.researchgate.net/publication/4328474_SCIL_processor_-_a_CIL_processor_for_embedded_systems)，描述了面向对象的基于堆栈的语言和 CIL 的实现：

> 嵌入式系统及其应用程序正变得无处不在且透明。如今，设计人员需要尽快实现硬件和软件以应对竞争。因此，工具和 IP 成为等式的重要因素。在本文中，我们提出了一个类似于 Tanenbaum (2006) JVM 处理器的微架构的可合成内核。核心是 Microsoft 的 CIL（通用中间语言）子集的实现。我们寻求通过提供一个平台来加速嵌入式软件的开发，整个 .NET 框架（C#、Visual Basic.NET...）（连同其面向对象的方法）都可以在该平台上执行。我们使用 Xilinx Virtex II Pro 作为原型平台。

7: 前往[GreenArrays, Inc.](http://www.greenarraychips.com/home/documents/greg/GA144.htm)的 Forth 之父 Charles Moore 当前的工作地点，并在“实现 colorForth 指令集”的功能下查找，你会发现他也使用了他的虚拟机器，已经优化了 Forth 他的整个生活，并将其简化为一个速度极快的 144 核微芯片，声称具有 100 BIPS 的能力。在这里，您应该能够查看[“colorForth 指令集”](https://web.archive.org/web/20160310112802/http://colorforth.com/inst.htm)及其描述——他已经消除了任何绒毛和臃肿，并将其简化为极其简陋的指令集。我们应该在为时已晚之前向这位天才学习（他年事已高，Covid19 目前威胁着我们的许多族长）。

* * *

下面，我尝试更直接地处理您问题的各个方面：

> 如何在 Forth（或 Factor）中编写应用程序？

与任何其他应用程序一样，学习构建块，构建可能工作的最简单的东西，然后从那里发展它。

> 我可能对探索像 Forth（或 Factor）这样的基于堆栈的语言感兴趣。

周围有许多基于堆栈的语言。它们似乎不仅是大多数处理器的基础，也是大多数虚拟机的基础，例如 Java 和 JVM，以及 C# 和 CIL。

> 我希望看到的是如何一步一步地从头开始构建应用程序。

这对于 Forth 书来说是个好主意……有人玩游戏吗？我**知道**外面有很多 Forth 人，而且因为 Covid19，你们中的很多人也在家。您希望看到什么样的应用程序？光看 FPC 就能学到很多东西。

> 我发现的教程很简陋，并不能帮助我理解更大的图景。

那里有更高级别的教程。但是扩大您的搜索范围——包括 JVM、CIL 甚至 LUA（因为我认为它也有一个 VM）。用 Lisp 编写一个应用程序。然后使用您在 Lisp 中构建的原语，并在 Forth、Factor、CIL 或 JVM 指令中实现它们。

> 想一想在处理大量部件时如何管理堆栈是令人困惑的。

这就是为什么我说你应该学习一门汇编语言——因为大多数基于堆栈的语言都是从那开始的。您必须学习基本的杠杆、弹簧、闩锁和其他原始机制，我们所有的软件最终都是由这些机制制成的。但是你只考虑堆栈来制作原始机制——一旦你有了这些，一般来说，甚至不要接触堆栈的东西——只考虑基本机制，然后逐步构建更高的层，甚至发展到面向对象，如 CIL 和 JVM 所示。更好的应用程序是隐式 DSL 的层，每个 DSL 的目标都是从前一个 DSL 升级。这些层是：汇编语言、CIL 或其他 VM、BIOS、操作系统、库、业务语言、应用程序。

> 我一直认为（也许是错误的）学习语言的好方法是用它来编写 Roguelike 游戏。

当然...但是选择任何你喜欢的东西，真的。但也许尝试获得一个基于 Arm 的 Arduino，对其进行编程、反汇编，然后编写自己的汇编语言——然后为那个 Arm 芯片获得一个 Forth，并用它进行编程。然后在 Arm-Forth 中实现你的 Roguelike 游戏。

> 我很难弄清楚如何将一堆东西放在一起：迷宫、数十种生物、宝藏、角色统计数据等。

构建你的“流氓”领域特定语言，将其制作成 VM，然后首先用高级堆栈语言（如 CIL）实现 VM 指令，然后尝试找出如何在其中一个低级堆栈中执行它- 语言。在 Forth 中实现了许多面向对象的风格——探索旧的 Forth 维度文章和一些旧的 Forth 会议演示以找到它们。Google 和[“Internet 档案”或 Way-Back Machine](https://archive.org/web/)是您的朋友。

# c# - C#事件订阅方法

> ID：11745660
> 
> 赞同：0
> 
> 时间：2012-07-31T17:23:00.940
> 
> 标签：c#

我正在尝试为一个对象订阅两个事件。但是在我尝试添加事件之前，该对象没有被实例化。有没有办法可以订阅这两个事件并在之后实例化？我已经让委托、事件、事件参数和事件处理程序工作了。

**示例代码：**

```
Ares a;

public B()
{
    a.up += new upEventHandler(doUp);
    a.down += new downEventHandler(doDown);
    a = new Ares();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:25:04.233

> 我正在尝试为一个对象订阅两个事件。但是在我尝试添加事件之前，该对象没有被实例化。有没有办法可以订阅这两个事件并在之后实例化？

不，绝对不是。这就像在对象存在之前尝试在对象上设置属性一样。试着想想它是如何*工作的*——然后意识到订阅的事件处理程序是对象状态的一部分，就像属性一样。

显然，您可以将事件处理程序存储在其他地方并稍后订阅它们，但如前所述，答案是否定的。它在概念层面或实际层面上没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:24:37.160

这是不可能的。您必须先实例化对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:14:41.763

您可以做的最接近您所描述的事情就是使事件静态化。

```
class Ares {
    public static event upEventHandler up;
    public static event downEventHandler down;
    // ...
} 
```

然后修改`B()`为：

```
public B() {
    Ares.up += new upEventHandler(doUp);
    Ares.down += new downEventHandler(doDown);
    a = new Ares();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T18:49:04.583

我假设事件是在构造函数中触发的，并且您想要捕获它。

尝试将构造函数中的事件触发代码重构为单独的 Initialize() 方法，这样您将拥有以下内容：

```
Ares a;

public B()
{
    a = new Ares();
    a.up += new upEventHandler(doUp);
    a.down += new downEventHandler(doDown);

    a.Initialize(); //do all init of the ares object here, not in constructor
} 
```

# c# - Excel 单元格高度不增加

> ID：11745661
> 
> 赞同：3
> 
> 时间：2012-07-31T17:23:09.257
> 
> 标签：c#, excel

我正在使用 Microsoft.Office.Interop.Excel 将数据写入 excel 单元格。单元格具有一定的初始高度，我设置了“合并单元格 = true”和“换行文本 = true”。

当单元格内容较大时，单元格高度不会增加。我尝试了以下两种方法：

```
_range.entrirerow.autofit() 
_range.columns.autofit() 
```

这对我不起作用，请提出一些解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:28:57.957

试试 _range.Rows.Autofit();

请注意：COM 对象不会以双句点释放。它创建了您无法访问的临时变量。

所以宁愿使用：

```
Range rows = _range.Rows;
rows.Autfit();
if (rows != null)
{
  Marshal.FinalReleaseComObject(rows);
} 
```

# xml - xml/文件系统并发访问

> ID：11745662
> 
> 赞同：0
> 
> 时间：2012-07-31T17:23:12.017
> 
> 标签：xml, vb.net, filesystems

我正在重写我们的内部内容管理系统并从数据库迁移到基于 xml 的系统。我知道已经有很多人这样做了。我确实有一些担忧，我希望能得到你的意见。

写作

一个用户是否可以写入一个 xml 文档，而另一个用户可以同时读取它。我没有使用 XMLDocument 或 XMLTextWriter 进行写操作。

阅读

多个用户可以同时解析一个xml文件，速度会不会有明显的下降？我正在使用 XMLDocument 进行阅读。

对于大多数操作，我想我在这里说的是毫秒。我只是担心它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:54:07.247

*   写作

    这取决于您如何更新 XML 文件。如果您以原子方式进行更新，则应该没有问题。在这种情况下，最后完成的更新获胜。

    要自动更新文件，首先打开并写入一个具有唯一名称的临时文件。完成编写后，将其关闭，然后在原始文件的顶部重命名。仍在使用旧副本的所有其他进程将继续这样做，但打开文件的新进程将获得新版本。

*   阅读

    这里真的没有问题。读者不会互相干扰。您将获得的唯一性能下降是与在多个进程之间共享 CPU 相关的正常性能下降。

# heroku - db:push 中的 heroku 错误

> ID：11745664
> 
> 赞同：0
> 
> 时间：2012-07-31T17:23:25.653
> 
> 标签：heroku

我正在尝试将 MYSQL 模式推送到具有 clearDB 插件的应用程序。当我运行 herko db:push mysql 时收到此错误消息.....

任何人都可以帮助我确定问题。提前感谢您的时间。

=================================

发送模式 /var/lib/gems/1.9.1/gems/taps-0.3.24/bin/schema:3:in `require': no such file to load -- rubygems (LoadError) from /var/lib/gems/1.9.1/gems/taps-0.3.24/bin/schema:3 Schema: 100% |==========================================| Time: 00:00:07 /var/lib/gems/1.9.1/gems/taps-0.3.24/bin/schema:3:in`require': no such file to load -- ruby​​gems (LoadError) from /var/lib/gems/ 1.9.1/gems/taps-0.3.24/bin/schema:3 ！Heroku客户端内部错误..！在以下位置搜索帮助：[https](https://help.heroku.com) ://help.heroku.com ！或报告错误：[https ://github.com/heroku/heroku/issues/new](https://github.com/heroku/heroku/issues/new)

```
Error:       unexpected nil (OkJson::ParserError)
Backtrace:   /var/lib/gems/1.9.1/gems/taps-0.3.24/lib/vendor/okjson.rb:82:in `valparse' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:06:51.037

您不能使用`heroku db:push`任何 Heroku 数据库。最好的方法是转储您的数据库，然后直接恢复到您的 ClearDB 实例。

# c# - SqlExpress LocalDb 无法打开文件

> ID：11745669
> 
> 赞同：2
> 
> 时间：2012-07-31T17:23:40.833
> 
> 标签：c#, ado.net, sql-server-express, localdb

我在 AppData/Local 路径下的目录中有两个 MDF 文件。如果我尝试使用 LocalDb 打开它们。

我的连接字符串的形式是：

> 数据源=(localdb)\v11.0;AttachDbFilename="C:\Users\Anna\AppData\Local\CaseTrakker Software\CTDynamoDisconnected\CTDynamoDisconnected_Data.mdf";Integrated Security=True;Connect Timeout=10

我有一个尝试连接到此 MDF 的示例桌面应用程序，但出现此异常：

> System.Data.SqlClient.SqlException (0x80131904)：无法打开登录请求的数据库“C:\USERS\ANNA\APPDATA\LOCAL\CASETRAKKER SOFTWARE\CTDYNAMODISCONNECTED\CTDYNAMODISCONNECTED_DATA.MDF”。登录失败。用户“IMA\Anna”登录失败。

如果我将此文件移动到任何其他位置，或重命名它（甚至是更长的名称），我就可以连接到它。

这个位置或某事似乎有些特殊。

另一件奇怪的事情：它上周奏效了。据我所知，我的机器或域安全没有任何变化。

我完全不知道还能尝试什么。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T02:09:56.730

你能检查一下 LocalDB 实例日志文件中是否有什么有趣的东西吗？它默认位于`%localappdata%\Microsoft\Microsoft SQL Server Local DB\Instances\v11.0`文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-18T16:50:31.430

此问题的一个原因是如果您进入`C:\Users\[username]`文件夹并删除 MDF 和 LDF 文件。如果你这样做，那么这类似于对成熟的 SQL Server 做同样的事情。服务器实例仍然认为它有数据库，但它们显然不会工作。

解决该问题的方法是更改​​连接字符串中的数据库名称，它应该可以正常工作。

要真正解决问题，请打开 SQL Management Studio，连接到服务器`(LocalDb)\v11.0`（可能使用 Windows 身份验证），然后您可以通过这种方式分离这些数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T13:47:03.410

就我而言，我有一段时间使用该数据库并错误地删除了它的 MDF 和 LDF 文件。

为了解决这个问题，我打开了**SQL Management Studio**并连接到`(localdb)\MSSQLLocalDB`使用，`Windows Authentication`然后手动创建了一个新的空数据库，其名称类似于 web.config 连接字符串中的名称

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\MSSQLLocalDB;Initial Catalog=myDb;Integrated Security=True;" providerName="System.Data.SqlClient" /> 
```

# youtube - Colorbox，无法控制 Youtube 视频的大小......太小了

> ID：11745670
> 
> 赞同：4
> 
> 时间：2012-07-31T17:23:41.270
> 
> 标签：youtube, colorbox

我在[此处设置颜色框](http://jesseaknight.com/wbc/) （单击全部展开，然后单击第二个链接），但我嵌入在颜色框中的 YouTube 视频显示的大小错误。“关闭”也在一个奇怪的位置。显示问题的照片：i.stack.imgur.com/of8X4.png

它应该是一个 720p 的视频，并且打开得相当大。我尝试在脚本中更改此行，但没有效果：

```
 $(".youtube").colorbox({iframe:true, innerWidth:960, innerHeight:720}); 
```

我需要在html中给它一个大小吗？

```
<li><a class='youtube' href="http://www.youtube.com/embed/hvHB5RvdorU?rel=0&amp;wmode=transparent">Forming System Assembly Video</a></li> 
```

扩展列表有可能踩到它 Colorbox，[我从这里得到了代码](http://jasalguero.com/ledld/development/web/expandable-list/)。它是基于 jQuery 的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:15:23.717

您忘记包含 colorbox CSS 文件：

```
<link rel="stylesheet" href="css/colorbox.css" /> 
```

请注意，当您[下载 colorbox](http://www.jacklmoore.com/colorbox)时，zip 文件将包含 5 个示例。每个示例都有在 colorbox.css 文件中定义的不同样式的颜色框（位于示例的文件夹中，例如“Example 1/colorbox.css”）。选择您的风格并将相应的 colorbox.css 文件复制到您的 css 目录中。

# php - 在 CakePHP 中将数组传递给 requestAction

> ID：11745671
> 
> 赞同：2
> 
> 时间：2012-07-31T17:23:55.693
> 
> 标签：php, cakephp, cakephp-2.0

我有功能

```
public myfunction($myArray) {
} 
```

我需要传递`array("cat", "dog")` 到行动。

```
$output = $this->requestAction(
    array('controller' => 'app', 'action' => 'myfunction'),
    array("cat","dog")
); 
```

但这仅传递`cat`给我的控制器操作，`dog`没有通过。

我试过这个：

```
$output = $this->requestAction(
    array('controller' => 'app', 'action' => 'myfunction'),
    array("myArray" => array("cat","dog"))
); 
```

但这没有帮助。我检查了[食谱](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)，但找不到相关的例子。我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T04:40:20.673

试试这个代码

```
$this->requestAction(
    array('controller' => 'app', 'action' => 'myfunction'),
        array('pass' => array('dog','cat'))
            ); 
```

在 Myfunction 中：

```
public myfunction() {
    pr($this->params->params['pass']);
} 
```

如果不工作请告诉我...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:29:55.840

见网址

[http://book.cakephp.org/1.3/view/991/requestAction](http://book.cakephp.org/1.3/view/991/requestAction)

[如何在 cakephp requestAction 中传递参数？](https://stackoverflow.com/questions/4524863/how-to-pass-argument-in-cakephp-requestaction)

试试这个

```
$option = array("cat_dog"); 

$this->requestAction(array('controller' => 'app', 'action' => 'myfunction'), $option); 
```

然后得到 $option 数组并爆炸它。

```
$myArray = explode('_', your get variable); 

pr($myArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T18:27:37.017

尝试：

```
$output = $this->requestAction(
array('controller' => 'app', 'action' => 'myfunction'),
array("animals" => array("cat"=>"cat","dog"=>"dog"))
); 
```

# events - 具有自定义永久链接结构的 WordPress 自定义帖子类型事件

> ID：11745680
> 
> 赞同：1
> 
> 时间：2012-07-31T17:24:31.923
> 
> 标签：events, permalinks, custom-post-type

我需要一些关于自定义帖子类型的自定义永久链接的帮助。

我创建了一个名为“evento”的自定义帖子类型和 3 个自定义字段，用于存储事件的日期、月份和年份。

我想要一个这样的永久链接结构：

```
/eventos/2012/07/30 
```

...标准结构是：

```
/?post_type=evento&ano=2012&mes=07&dia=30 
```

如何在 WordPress 中实现这种魔力？我不太了解 .Htaccess =(

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T12:42:28.317

问题解决了！！！！=)

```
add_action('init', 'evento_add_rewrite_rules');
function evento_add_rewrite_rules( $wp_rewrite ){
    // Add day archive (and pagination)
    add_rewrite_rule("eventos/([0-9]{4})/([0-9]{2})/([0-9]{2})/page/?([0-9]{1,})/?",'index.php?post_type=evento&ano=$matches[1]&mes=$matches[2]&dia=$matches[3]&paged=$matches[4]','top');
    add_rewrite_rule("eventos/([0-9]{4})/([0-9]{2})/([0-9]{2})/?",'index.php?post_type=evento&ano=$matches[1]&mes=$matches[2]&dia=$matches[3]','top');

    // Add month archive (and pagination)
    add_rewrite_rule("eventos/([0-9]{4})/([0-9]{2})/page/?([0-9]{1,})/?",'index.php?post_type=evento&ano=$matches[1]&mes=$matches[2]&paged=$matches[3]','top');
    add_rewrite_rule("eventos/([0-9]{4})/([0-9]{2})/?",'index.php?post_type=evento&ano=$matches[1]&mes=$matches[2]','top');

    // Add year archive (and pagination)
    add_rewrite_rule("eventos/([0-9]{4})/page/?([0-9]{1,})/?",'index.php?post_type=evento&ano=$matches[1]&paged=$matches[2]','top');
    add_rewrite_rule("eventos/([0-9]{4})/?",'index.php?post_type=evento&ano=$matches[1]','top');
} 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T02:22:46.923

这应该做你想要的：

重写规则 ^eventos/([0-9]+)/([0-9]+)/([0-9]+)$ /?post_type=evento&ano=$1&mes=$2&dia=$3 [L]

我使用[http://htaccess.madewithlove.be/对其进行了测试](http://htaccess.madewithlove.be/)

祝你好运。

# java - Java NIO 客户端

> ID：11745686
> 
> 赞同：1
> 
> 时间：2012-07-31T17:24:43.080
> 
> 标签：java, client, selector, nio

```
import java.io.IOException;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.SocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.SelectionKey;
import java.nio.channels.Selector;
import java.nio.channels.ServerSocketChannel;
import java.nio.channels.SocketChannel;
import java.util.*;

public class EchoServer {
    private InetAddress addr;
    private int port;
    private Selector selector;
    private Map<SocketChannel,List<byte[]>> dataMap;

    public EchoServer(InetAddress addr, int port) throws IOException {
        this.addr = addr;
        this.port = port;
        dataMap = new HashMap<SocketChannel,List<byte[]>>();
        startServer();
    }

    private void startServer() throws IOException {
        // create selector and channel
        this.selector = Selector.open();
        ServerSocketChannel serverChannel = ServerSocketChannel.open();
        serverChannel.configureBlocking(false);

        // bind to port
        InetSocketAddress listenAddr = new InetSocketAddress(this.addr, this.port);
        serverChannel.socket().bind(listenAddr);
        serverChannel.register(this.selector, SelectionKey.OP_ACCEPT);

        log("Echo server ready. Ctrl-C to stop.");

        // processing
        while (true) {
            // wait for events
            this.selector.select();

            // wakeup to work on selected keys
            Iterator keys = this.selector.selectedKeys().iterator();
            while (keys.hasNext()) {
                SelectionKey key = (SelectionKey) keys.next();

                // this is necessary to prevent the same key from coming up 
                // again the next time around.
                keys.remove();

                if (! key.isValid()) {
                    continue;
                }

                if (key.isAcceptable()) {
                    this.accept(key);
                }
                else if (key.isReadable()) {
                    this.read(key);
                }
                else if (key.isWritable()) {
                    this.write(key);
                }
                else if (key.isConnectable()) {
                    this.doConnect(key);
                }
            }
        }
    }
    private void doConnect(SelectionKey key) {
            SocketChannel channel = (SocketChannel) key.channel();
            if (channel.finishConnect()) {
                    /* success */
                    System.out.println("Connected");
            } else {
                    /* failure */
                    System.out.println("failure");
            }
    }
    public void connect(String hostname, int port) throws IOException {
        SocketChannel clientChannel = SocketChannel.open();
        clientChannel.configureBlocking(false);
        clientChannel.connect(new InetSocketAddress(hostname,port));
        clientChannel.register(selector,SelectionKey.OP_CONNECT);
        clientChannel.write(ByteBuffer.wrap(("$Hello "+UserInfo[0]+"|").getBytes("US-ASCII")));
    }
    private void accept(SelectionKey key) throws IOException {
        ServerSocketChannel serverChannel = (ServerSocketChannel) key.channel();
        SocketChannel channel = serverChannel.accept();
        channel.configureBlocking(false);

        // write welcome message
        channel.write(ByteBuffer.wrap("Welcome, this is the echo server\r\n".getBytes("US-ASCII")));

        Socket socket = channel.socket();
        SocketAddress remoteAddr = socket.getRemoteSocketAddress();
        log("Connected to: " + remoteAddr);        
        dataMap.put(channel, new ArrayList<byte[]>()); // register channel with selector for further IO
        channel.register(this.selector, SelectionKey.OP_READ);
    }
    private void read(SelectionKey key) throws IOException {
        SocketChannel channel = (SocketChannel) key.channel();

        ByteBuffer buffer = ByteBuffer.allocate(8192);
        int numRead = -1;
        try {
            numRead = channel.read(buffer);
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        if (numRead == -1) {
            this.dataMap.remove(channel);
            Socket socket = channel.socket();
            SocketAddress remoteAddr = socket.getRemoteSocketAddress();
            log("Connection closed by client: " + remoteAddr);
            channel.close();
            key.cancel();
            return;
        }
        byte[] data = new byte[numRead];
        System.arraycopy(buffer.array(), 0, data, 0, numRead);
        log("Got: " + new String(data, "US-ASCII"));        
        doEcho(key, data); // write back to client
    }
    private void write(SelectionKey key) throws IOException {
        SocketChannel channel = (SocketChannel) key.channel();
        List<byte[]> pendingData = this.dataMap.get(channel);
        Iterator<byte[]> items = pendingData.iterator();
        while (items.hasNext()) {
            byte[] item = items.next();
            items.remove();
            channel.write(ByteBuffer.wrap(item));
        }
        key.interestOps(SelectionKey.OP_READ);
    }
    private void doEcho(SelectionKey key, byte[] data) {
        SocketChannel channel = (SocketChannel) key.channel();
        List<byte[]> pendingData = this.dataMap.get(channel);
        pendingData.add(data);
        key.interestOps(SelectionKey.OP_WRITE);
    }
    private static void log(String s) {
        System.out.println(s);
    }
    public static void main(String[] args) throws Exception {
        new EchoServer(null, 8989);
    }
} 
```

该程序适用于传入连接。但是当我进行传出连接时，该程序不起作用。我需要通过connect（String hostname，int port）连续建立一些连接并在read（）方法中接收数据。该程序停止在 clientChannel.register(...) 行上工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:34:57.630

您需要检查[可连接](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SelectionKey.html#isConnectable%28%29)的密钥，例如

```
if (key.isConnectable()) {
  this.doConnect(key);
}
...
private void doConnect(SelectionKey key) {
  SocketChannel channel = (SocketChannel) key.channel();
  if (channel.finishConnect()) {
    /* success */
  } else {
    /* failure */
  }
} 
```

使用[SocketChannel.finishConnect](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SocketChannel.html#finishConnect%28%29)判断连接是否建立成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-25T15:32:35.863

这是我一直在使用的 NIO 客户端示例。它提供超时打开/写入/读取功能，适用于请求-响应消息传递。

棘手的部分始终是各方如何识别数据包已完全接收。这个例子假设

*   服务器获取 one_line_command+newline (client->server packet)
*   客户端收到 1..n 行带有“>>”终止符的行，而终止符行中没有尾随换行符（服务器-> 客户端数据包）
*   您可以将终止符指定为“>>\n”，但 readUntil 需要在换行符解析器中进行小修复

您可以编写 4 字节长度的标头、固定大小的数据包拆分器或分隔符 0x27 字节，但要确保它不能是数据有效负载的值。NIO read() 或 write() 从不假定您在一次调用中收到完整的数据包。或者可以在一个 read() 缓冲区中读取两个或多个数据包字节。由我们决定是否制作一个不丢失字节的数据包解析器。

```
import java.util.*;
import java.io.*;
import java.net.InetSocketAddress;
import java.nio.ByteBuffer;
import java.nio.channels.SelectionKey;
import java.nio.channels.Selector;
import java.nio.channels.SocketChannel;

public class DPSocket {
    private boolean debug;
    private String host;
    private int port;
    private String charset;
    private ByteArrayOutputStream inBuffer;
    private ByteBuffer buf;
    private Selector selector;
    private SocketChannel channel;

    public DPSocket(String host, int port, String charset) {
        this.charset = charset==null || charset.equals("") ? "UTF-8" : charset;
        this.host = host;
        this.port = port;
    }

    public boolean isDebug() { return debug; }
    public void setDebug(boolean b) { debug=b; }

    public void open(long timeout) throws IOException {
        selector = Selector.open();
        channel = SocketChannel.open();
        channel.configureBlocking(false);
        channel.register(selector, SelectionKey.OP_CONNECT);
        channel.connect(new InetSocketAddress(host, port));
        inBuffer = new ByteArrayOutputStream(1024);
        buf = ByteBuffer.allocate(1*1024);
        long sleep = Math.min(timeout, 1000);
        while(timeout > 0) {
            if (selector.select(sleep) < 1) {
                timeout-=sleep;
                continue;
            }
            Iterator<SelectionKey> keys = selector.selectedKeys().iterator();
            while(keys.hasNext()) {
                SelectionKey key = keys.next();
                keys.remove();
                if (!key.isValid() || !key.isConnectable()) continue;
                SocketChannel channel = (SocketChannel)key.channel();
                if (channel.isConnectionPending()) {
                    channel.finishConnect();
                    channel.configureBlocking(false);
                    if (debug) System.out.println("finishConnect");
                    return; // we are ready to receive bytes
                }
            }
        }
        throw new IOException("Connection timed out");
    }

    public void close() {
        try { if(channel!=null) channel.close(); } catch(Exception ex) { }
        try { if(selector!=null) selector.close(); } catch(Exception ex) { }
        inBuffer=null;
        buf=null;
    }   

    public void write(String data, long timeout) throws IOException {
        write(data.getBytes(charset), timeout);
    }

    public void write(byte[] bytes, long timeout) throws IOException {
        ByteBuffer outBuffer = ByteBuffer.wrap(bytes);
        channel.register(selector, SelectionKey.OP_WRITE);
        long sleep = Math.min(timeout, 1000);
        while(timeout > 0) {
            if (selector.select(sleep) < 1) {
                timeout-=sleep;
                continue;
            }
            Iterator<SelectionKey> keys = selector.selectedKeys().iterator();
            while(keys.hasNext()) {
                SelectionKey key = keys.next();
                keys.remove();
                if (!key.isValid() || !key.isWritable()) continue;
                SocketChannel channel = (SocketChannel)key.channel();
                if (debug) System.out.println("write remaining="+outBuffer.remaining());
                channel.write(outBuffer);
                if (debug) System.out.println("write remaining="+outBuffer.remaining());
                if (outBuffer.remaining()<1)
                    return;
            }
        }
        throw new IOException("Write timed out");
    }

    public List<String> readUntil(String terminator, long timeout, boolean trimLines) throws IOException {
        return readUntil(new String[]{terminator}, timeout, trimLines);
    }

    public List<String> readUntil(String[] terminators, long timeout, boolean trimLines) throws IOException {
        List<String> lines = new ArrayList<String>(12);
        inBuffer.reset();

        // End of packet terminator strings, line startsWith "aabbcc" string.
        byte[][] arrTerminators = new byte[terminators.length][];
        int[] idxTerminators = new int[terminators.length];
        for(int idx=0; idx < terminators.length; idx++) {
            arrTerminators[idx] = terminators[idx].getBytes(charset);
            idxTerminators[idx] = 0;
        }
        int idxLineByte=-1;

        channel.register(selector, SelectionKey.OP_READ);
        long sleep = Math.min(timeout, 1000);
        while(timeout>0) {
            if (selector.select(sleep) < 1) {
                timeout-=sleep;
                continue;
            }
            Iterator<SelectionKey> keys = selector.selectedKeys().iterator();
            while(keys.hasNext()) {
                SelectionKey key = keys.next();
                keys.remove();
                if (!key.isValid() || !key.isReadable()) continue;
                SocketChannel channel = (SocketChannel)key.channel();
                buf.clear();
                int len = channel.read(buf);
                if (len == -1) throw new IOException("Socket disconnected");
                buf.flip();
                for(int idx=0; idx<len; idx++) {
                    byte cb = buf.get(idx);
                    if (cb!='\n') {
                        idxLineByte++;
                        inBuffer.write(cb);
                        for(int idxter=0; idxter < arrTerminators.length; idxter++) {
                            byte[] arrTerminator = arrTerminators[idxter];
                            if (idxLineByte==idxTerminators[idxter]
                                    && arrTerminator[ idxTerminators[idxter] ]==cb) {
                                idxTerminators[idxter]++;
                                if (idxTerminators[idxter]==arrTerminator.length)
                                    return lines;
                            } else idxTerminators[idxter]=0;
                        }
                    } else  {
                        String line = inBuffer.toString(charset);
                        lines.add(trimLines ? line.trim() : line);
                        inBuffer.reset();
                        idxLineByte=-1;
                        for(int idxter=0; idxter<arrTerminators.length; idxter++)
                            idxTerminators[idxter]=0;
                    }
                }
            }
        }
        throw new IOException("Read timed out");
    }

    // **************************
    // *** test socket client ***
    // **************************

    public static void main(String[] args) throws Exception {
        String NEWLINE = "\n";
        int TIMEOUT=5000;

        DPSocket dps = new DPSocket("myserver.com", 1234, "UTF-8");
        dps.setDebug(true);

        try {
            List<String> lines;
            dps.open(15000);

            dps.write("Command1 arg1 arg2"+NEWLINE, TIMEOUT);
            lines = dps.readUntil(">>", TIMEOUT, true);

            dps.write("Command2 arg1 arg2"+NEWLINE, TIMEOUT);
            lines = dps.readUntil(">>", TIMEOUT, true);
        } catch (Exception ex) {
            String msg = ex.getMessage();
            if (msg==null) msg = ex.getClass().getName();
            if (msg.contains("timed out") || msg.contains("Invalid command ")) {
                System.out.println("ERROR: " + ex.getMessage());
            } else {
                System.out.print("ERROR: ");
                ex.printStackTrace();
            }
        } finally {
            dps.close();
        }
    }

} 
```

# php - 如何在允许用户导航到其他页面的同时使用 strophe 保持聊天会话打开？

> ID：11745689
> 
> 赞同：0
> 
> 时间：2012-07-31T17:24:53.157
> 
> 标签：php, javascript, jquery, html, strophe

如果这个问题看起来含糊不清，我很抱歉，但这就是我所拥有的。

在我的网页一侧，我有一个聊天脚本，每次调用该页面时都会执行以下功能。

1.  连接到我的 BOSH 服务器
2.  根据谁登录拉取数据
3.  在侧边栏显示用户的名单

我试图通过保持聊天窗口在侧面打开并使用框架概念加载其他数据来节省带宽（也防止用户在每次移动页面时登录/注销），类似于 Facebook 的做法事物。

我知道

```
history.pushState({},"New Title Goes Here","http://facebook.com/Something"); 
```

但我知道一定有更多的东西。只是有点迷失在哪里开始寻找。AJAX 我知道是否会在其中发挥重要作用，但我不喜欢一直完全依赖 javascript。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:33:19.467

抱歉，如果这有点晚了，但您可以使用[Strophe 的附加功能](http://strophe.im/strophejs/doc/1.0.2/files2/strophe-js.html#Strophe.Connection.attach)，这样您的 BOSH 会话就不会在页面重新加载之间丢失。

您需要做的是首先*连接并验证您的 XMPP 服务器*，然后*将 JID、RID 和 SID 保存在*页面刷新时不会丢失的地方。例如，在您的会话或 cookie 中。

```
var conn = new Strophe.Connection('your_bosh_url');
conn.attach(your_jid, your_sid, your_rid, function(status){
  if(status === Strophe.Status.ATTACHED){
  *and so on ...* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:58:07.943

有一个内容 div 和一个聊天 div。我的网站使用 AJAX 很好，所以我有一个导航 div 和一个内容 div，我用 jQuery 加载东西。看看我的网站：[http](http://derek.genevievehoward.com/) : //derek.genevievehoward.com/ 和这个 JSFiddle [http://jsfiddle.net/howderek/tNVd8/](http://jsfiddle.net/howderek/tNVd8/)

出于某种原因，JSFiddle 不喜欢 AJAX，但我的网站使用相同的 javascript，所以我可以向您保证它是准确的。

# python - PyQt 将文件名传递给常用函数

> ID：11745690
> 
> 赞同：1
> 
> 时间：2012-07-31T17:24:54.690
> 
> 标签：python, file, pyqt, slots

我可以使用槽函数的返回语句为不同的“lambda”槽提供输入吗？

我知道以下内容不起作用 - 因为 X 和 Y 似乎只是布尔值：

```
class : mainwindow(QtGui.QMainWindow, Ui_test):
    def __init__ (self, parent = None):
        super(mainwindow,self).__init__(parent)
        self.setupUi(self)
        X = QtCore.QObject.connect(self.actionOpenX, OtCore.SIGNAL("triggered()", self.file_dialog)
        Y = QtCore.QObject.connect(self.actionOpenY, OtCore.SIGNAL("triggered()", self.file_dialog)
        QtCore.QObject.connect(self.actionProcess, QtCore.SIGNAL("triggered()", lambda : self.updateUi(X,Y))

def update_Ui(self, X, Y):
    for line in X:
        for line in Y:
            "do something"

def file_dialog(self)
    filedlg = QtGui.QFileDialog(self)
    self.filename = filedlg.getOpenFileName()
return self.filename 
```

我确信这样的事情是可能的，而且我的脑部严重冻结。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T23:47:55.333

的返回值`QObject.connect`只是一个布尔值，指示连接是成功还是失败。它与插槽的返回值无关。

从您的示例代码看来，您希望在一步中从用户那里获取一些文件名，然后在单独的第二步中处理它们。

为了做到这一点，文件名需要保存在某个地方，直到用户决定开始处理步骤。一种常见的方法是在列表小部件或行编辑组中显示所选文件名，以便以后检索它们。或者，可以简单地将文件名附加到内部列表（即类实例的私有属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:42:29.553

`X = QtCore.QObject.connect(self.actionOpenX, OtCore.SIGNAL("triggered()", self.file_dialog)`总是返回一个布尔值，所以为什么不尝试使用全局变量`global x`并在 file_dialog 中设置 x 值？

# javascript - 如何将 javascript 文件插入 iframe，然后在插入的 javascript 中调用函数？

> ID：11745692
> 
> 赞同：3
> 
> 时间：2012-07-31T17:25:01.713
> 
> 标签：javascript, html, iframe

编辑：刚刚发现这是一个 chrome 问题，代码在 Firefox 中运行良好

我在网页上有一个 iframe，显示一本书格式为 html。我想在这个 iframe 中插入一些 javascript 以使这本书更具动态性（例如点击句子、显示动画等）。iframe 内容与父页面位于同一域中。

我可以将 javascript 插入 iframe，但在插入的 javascript 中调用函数时出错。我在下面描述了不同的代码位：

我的父页面javascript是：

```
function iframeLoaded()
{
    var iFrameID = document.getElementById('preview-iframe');

    var jsLink = iFrameID.contentDocument.createElement("script");
    jsLink.src="/tests/iframeAPI.js";
    jsLink.type = 'text/javascript';
    iFrameID.contentDocument.head.appendChild(jsLink); 
    iFrameID.contentWindow.initialiseApi()
} 
```

包含 iframe 的 html 是：

```
<iframe id="preview-iframe" width="640" height="240" frameborder="0" src="./testpage.htm" onload="iframeLoaded()" scrolling="no"></iframe> 
```

iframeAPI.js 的内容是：

```
window.initialiseApi = function() { alert("Hello world") } 
```

在浏览器中查看 iFrame 的 html 显示 iFrameAPI.js 标记已正确插入 iframe 头部，但是在加载页面时我没有收到警报弹出窗口。错误出现在以下行：

```
 iFrameID.contentWindow.initialiseApi()
    Uncaught TypeError: Object [object Window] has no method 'initialiseApi' 
```

但是，我可以在浏览器的 javascript 控制台中运行这一行，并且警报弹出窗口工作正常。

任何帮助将非常感激。

谢谢，

布赖恩

* * *

编辑：我刚刚尝试使用 onload 事件来确保页面已加载，但我仍然遇到问题：

我的父页面 javascript 现在是：

```
function iframeLoaded()
{
    var iFrameID = document.getElementById('preview-iframe');

    var jsLink = iFrameID.contentDocument.createElement("script");
    jsLink.src="/tests/iframeAPI.js";
    jsLink.type = 'text/javascript';
    iFrameID.contentDocument.head.appendChild(jsLink); 
    jsLink.onLoad= iFrameLoaded();
}

function iFrameLoaded()
{
    alert("Iframe loaded"); // Alert works ok 
    var iFrameID = document.getElementById('preview-iframe');
    iFrameID.contentWindow.initialiseApi(); // Same error message on this line
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:40:27.773

听起来您正在尝试在内容加载之前使用该功能。

试试这个：

```
var t = setTimeout(iFrameID.contentWindow.initialiseApi(),500); 
```

这将等待半秒钟，然后再尝试应该给页面 tiem 加载的功能。延迟时间以毫秒为单位。

更好的方法是尝试使用 Jquery 及其 ready() 方法，但这也需要加载 jquery 库。在我看来，这是非常值得的，请参阅[http://api.jquery.com/ready/](http://api.jquery.com/ready/)。

你会尝试这样的事情：

```
$("body",iFrameID.contentWindow.document).ready(iFrameID.contentWindow.initialiseApi()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:27:40.000

您正在立即执行它，而没有给脚本加载的机会。将 onload 事件连接到您的脚本块，然后运行您的 main 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:28:33.997

尝试在 iFrame 中包含的页面中，通过执行以下操作访问主页：

```
window.parent.xyz = something; 
```

您希望在哪里`something`显示在主页上。可以是函数或函数的对象。现在在主页中，您可以执行以下操作：

```
something(); // or something.somefunction(); 
```

我认为您也可以发送窗口引用，但我没有尝试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T19:16:16.457

最简单的方法是在 iframeAPI.js 本身中调用 initialiseApi 函数，因为它会在加载后立即被调用。iframeAPI.js 可能如下所示：

```
function initialiseApi() { 
    alert("Hello world"); 
}
initialiseApi(); 
```

不需要回调或超时。

# c# - 如何绑定图像源？

> ID：11745696
> 
> 赞同：4
> 
> 时间：2012-07-31T17:25:17.960
> 
> 标签：c#, image, binding, expression-blend

这是我到目前为止所拥有的：

```
<Image Source="{Binding ImageSource"} />

<Button Content"Text" ImageSource="path/image.png" /> 
```

我知道这里有些不对劲。我想我看不到 ImageSource 的定义位置。

我有几个这样的按钮，只想为每个按钮提供一个独特的图像。我有一个正在使用的按钮模板，它非常适合文本。

```
<Label Content="TemplateBinding Content" /> 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:44:28.703

在你的情况下，这很容易！

将图像作为资源添加到您的项目中，然后在 XAML 中使用如下内容：

```
<Button HorizontalAlignment="Left" Margin="20,0,0,20" VerticalAlignment="Bottom" Width="50" Height="25">
    <Image Source="image.png" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
    </Image>
</Button> 
```

或者，更复杂的方式：

如果您使用 MVVM Pattern，您可以执行以下操作

在您的 XAML 中：

```
<Button Focusable="False" Command="{Binding CmdClick}" Margin="0">
    <Image Source="{Binding ButtonImage}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
    </Image>
</Button> 
```

在您的视图模型中：

```
private Image buttonImage;

public Image ButtonImage 
{
    get
    {
       return buttonImage;
    }
} 
```

在您的 ViewModel 的构造函数或它的初始化中的某处：

```
BitmapImage src = new BitmapImage();
src.BeginInit();
src.UriSource = new Uri("image.png", UriKind.Relative);
src.CacheOption = BitmapCacheOption.OnLoad;
src.EndInit();

buttonImage = new Image();
buttonImage.Source = src; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-15T11:57:47.063

在您的 XAML 中：

```
 <Button Focusable="False" Command="{Binding CmdClick}" Margin="0">
     <Image Source="{Binding ImageSource,UpdateSourceTrigger=PropertyChanged} HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
     </Image>
 </Button> 
```

在您的视图模型中：

```
 private BitmapImage _ImageSource;
 public BitmapImage ImageSource
 {
     get { return this._ImageSource; }
     set { this._ImageSource = value; this.OnPropertyChanged("ImageSource"); }
 }

 private void OnPropertyChanged(string v)
 {
     // throw new NotImplementedException();
     if (PropertyChanged != null)
         PropertyChanged(this, new PropertyChangedEventArgs(v));
 }
 public event PropertyChangedEventHandler PropertyChanged; 
```

在您的 ViewModel 的构造函数或它的初始化中的某处：

```
 string str = System.Environment.CurrentDirectory;
 string imagePath = str + "\\Images\\something.png";
 this.ImageSource = new BitmapImage(new Uri(imagePath, UriKind.Absolute)); 
```

或：</p>

```
 string imagePath = "\\Images\\something.png";
 this.ImageSource = new BitmapImage(new Uri(imagePath, UriKind.Relative)); 
```

# java - 是否有同步和排序的地图对象（LinkedHashTable）？

> ID：11745700
> 
> 赞同：4
> 
> 时间：2012-07-31T17:25:26.410
> 
> 标签：java, map, synchronized, java-6, linkedhashmap

我正在创建一个`servlet.Filter`实现，其中在将请求发送到 servlet 之前，我根据 IP 地址在数据库中查找用户 ID。

如果已经有来自同一 IP 地址的请求正在数据库中查找，我希望我的过滤器将传入请求存储到类似地图的对象中。然后，当我从数据库中获得响应时，我会将其应用于对该 IP 地址的所有请求，并将它们发送到 servlet。

类似地图的对象需要同步，但也需要维护插入顺序，以便一旦我找到用户 ID，所有隐藏的请求“将按照接收到的顺序进行处理”。

通过API，有一个`LinkedHashMap`可以很好地维持订单但不同步，它`HashTable`是同步的但没有给出任何迹象表明它将保持正确的顺序。

`LinkedHashTable`我可以使用某种对象吗？

我正在使用 Java 6。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T17:29:22.747

您可以使用[`synchronizedMap`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)将任何`Map`实现包装在线程安全容器中：

```
Map<K, V> synchronizedLinkedHashMap = Collections.synchronizedMap(new LinkedHashMap<K, V>()); 
```

[`ConcurrentSkipListMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListMap.html)如果您想使用 a 对元素进行排序，也可以使用a `Comparator`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:29:10.820

您可以通过使用[java.util.Collections.synchronizedMap(...)包装任何底层地图来同步它](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)

所以，你会这样做：

```
Map m = Collections.synchronizedMap(new LinkedHashMap()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:29:38.037

您可以使用`Collections#synchronizedMap(Map)`并传递它`LinkedHashMap`吗？这是最简单的方法。

更新：您也许还可以以某种方式利用[Guava`MapMaker`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html)，但我认为这不是 100% 正确的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T17:31:19.617

您可以使任何地图/集合同步：

```
Map<...> m = Collections.synchronizedMap(new LinkedHashMap()); 
```

有`synchronizedSet()`，`synchronizedList()`等等，甚至还有`synchronizedSortedMap()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T17:28:53.933

**1.**使用`HashTable`，即**Maps之间同步的Map**

**2.**你也可以使用`ConcurrentHashMap`.

# c# - Ghostscript 批处理文件 - 执行并退出

> ID：11745703
> 
> 赞同：4
> 
> 时间：2012-07-31T17:25:39.707
> 
> 标签：c#, ghostscript

我正在尝试在批处理文件中执行 GhostScript。

### 批处理文件

```
gswin32.exe ^
  -dNOPAUSE ^
  -sDEVICE=pdfwrite ^
  -sOUTPUTFILE=output1.txt ^
  -dBatch ^
   "file1.txt" "file2.txt"

gswin32.exe ^
  -dNOPAUSE ^
  -sDEVICE=pdfwrite ^
  -sOUTPUTFILE=output2.txt ^
  -dBatch ^
   "file1.txt" "file2.txt" 
```

问题是执行第一行时，它会打开 GhostScript 窗口。我必须手动键入退出或关闭窗口才能将控件返回给父级以批量执行下一个命令。我们如何修改批处理文件以执行幽灵脚本？最初我使用 Process.Start(ProcessInfo) 从 C# 程序调用此文件。欢迎提出建议

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T18:46:45.930

1.  为避免 Ghostscript 打开窗口，请不要使用`gswin32.exe`.
    **改为使用`gswin32c.exe`。**（名称中的*c*表示它仅用于控制台......）

2.  另外，请注意*文本*文件不能作为 Ghostscript 的输入。
    **Ghostscript 只能处理 PostScript、Encapsulated PostScript 或 PDF 文件。**

3.  您可以随意命名输出文件。
    **但是您`-sDEVICE=pdfwrite`将生成 PDF 输出，因此`.pdf`如果您想避免以后混淆，建议您为输出文件使用后缀。**

4.  for 的拼写`-dBATCH`区分大小写。
    **`-dBatch`不管用。**
    （`-dBATCH`导致 Ghostscript 在作业的最后一页完成后返回 - 否则它将切换到交互模式并显示其`GS>`提示......它不是用于处理“批量输入文件”，正如您所假设的那样。）

5.  批处理文件中的 2 个命令都使用相同的输入参数。
    这意味着 2 个输出文件将相同，只是文件名不同。

我推荐使用以下命令行方案：

```
gswin32.exe ^
  -dNOPAUSE ^
  -dBATCH ^
  -sDEVICE=pdfwrite ^
  -sOUTPUTFILE=output2.pdf ^
   "file1.ps" "file2.pdf" "file3.eps" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T18:45:17.173

改为使用`gswin32c`。这是一个控制台应用程序，不会创建您需要手动关闭的窗口。

# java - Jar 文件无法识别 mysql 数据库

> ID：11745704
> 
> 赞同：0
> 
> 时间：2012-07-31T17:25:41.747
> 
> 标签：java, mysql, odbc

我在 Eclipse 中制作了一个 swing 应用程序，它在 Eclipse 中可以正常工作和编译。它正在连接到mysql。问题是当我把它变成一个 jar 文件时，数据库将无法连接。当应用程序应该从数据库加载信息时，什么都没有发生。

```
public boolean deleteAttendance(String idno,String eventtitle)
{
    int x;
    try
    {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
        Connection con = DriverManager.getConnection(dbUrl, "","");
        String query = "DELETE FROM attendance WHERE id =? AND title = ?";
        PreparedStatement pstmt = con.prepareStatement(query);

        pstmt.setString(1, idno);
        pstmt.setString(2, eventtitle);
        x = pstmt.executeUpdate();

        if(x != 0)
        return true;
        else
            return false;
    }catch(Exception e)
    {
        System.out.println("Statement Error " + e);
    }   
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:22:57.950

只是为了检查是否是您所需的 jar 不在类路径上的问题

`Go to window -> preferences->java->build path->user Libraries.`将您的 jar 添加到新的用户库。现在在 Eclipse 中创建一个新的 java 项目，右键单击该项目并选择添加库并添加刚刚添加到 eclipse 中的库。还将数据库所需的库（如果有）添加到您的项目中。如果在运行你的 jar 时一切正常，那么肯定是你没有将`ODBC/JDBC`驱动程序添加到类路径的问题，否则它是你的 jar 的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:32:44.557

您需要确保 ODBC 驱动程序在您的类路径中。

Eclipse 在确保您的驱动程序存在方面做得很好（因为您必须包含依赖项 jar，否则在尝试使用它们时会出错）。

但是一旦你离开 Eclipse - 你必须自己做。

它在你的类路径中吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-15T06:14:23.587

要解决此问题，请转到 artifact 并添加 ojdbc.jar，然后单击 OK。如果为真则什么都没有，如果不是则重新创建 jar 文件。注意：只要确保添加了 ojdbc.jar。

# android - Android 数据库事务

> ID：11745705
> 
> 赞同：0
> 
> 时间：2012-07-31T17:25:45.177
> 
> 标签：android, database, transactions, sqlite

我是 Android 编程新手，正在尝试了解最佳实践。

我想对两个不同的数据库表进行多次插入，但作为一个事务（因为表共享一个外键）。我希望我的函数返回一个结果，以便我可以显示一个 Toast 或其他内容来说明发生了错误，否则我想返回第一个插入的行 ID。

我相信这样做的一种方法如下（免责声明：伪代码，可能无法编译！）：

```
Long result = -1;
myDatabase.beginTransaction();
try {
   // Insert into first table
   ContentValue someValues = new ContentValues();
   someValues.put("dbfield1", 1);
   result = myDatabase.insert(DATABASE_TABLE_1, null, someValues);

   if (-1 != result ) {         
       // Insert into second table
       someValues.clear();
       someValues.put("dbfield2", 2);

       if( myDatabase.insert(DATABASE_TABLE_2, null, someValues) < 0 ) {
           result = -1;
       }
   }

   mDatabase.setTransactionSuccessful();
} catch(Exception e) {
    // An error occurred
    result = -1;
} finally {
   mDatabase.endTransaction();
} 
```

有没有更简单/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:12:33.783

您可以在 ContentProvider 中覆盖`bulkInsert`您的代码看起来不错。该方法应返回插入的行值，但您可以对其进行自定义，以便仅返回第一个 ID。

```
public int bulkInsert(Uri uri, ContentValues[] values) {
    Log.e("BULK", "Bulk insert started for URI" + uri.toString());
    bulkSqlDB = database.getWritableDatabase();
    int numInserted;

    bulkSqlDB.beginTransaction();
    try {
        for (ContentValues cv : values) {
            insert(uri, cv);
        }
        bulkSqlDB.setTransactionSuccessful();
        numInserted = values.length;
    } finally {
        getContext().getContentResolver().notifyChange(uri, null);
        bulkSqlDB.endTransaction();
    }
    return numInserted;
} 
```

# javascript - 在 android 中使用 jquery Mobile 中的水平滚动

> ID：11745706
> 
> 赞同：1
> 
> 时间：2012-07-31T17:25:46.067
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我一直在寻找文档，但似乎找不到在 jQuery mobile 中制作可滚动水平导航栏的方法，有人完成了吗？

看到我想要类似 valums.com/files/2009/menu/final.htm 之类的东西，但只是用于导航，因此您可以向左或向右滑动以获取更多菜单项

猜猜这就是你想要的。

HTML。

```
<div class="categories">                
        <ul>                    
            <li><span><a href="">ABC</a></span></li>
            <li><span><a href="">DEF</a></span></li>
            <li><span><a href="">GHI</a></span></li>
            <li><span><a href="">JKL</a></span></li>
        </ul>               
    </div> 
```

jQuery

```
$(function(){           
    var step = 1;
    var current = 0;
    var maximum = $(".categories ul li").size();
    var visible = 2;
    var speed = 500;
    var liSize = 120;
    var height = 60;    
    var ulSize = liSize * maximum;
    var divSize = liSize * visible; 

    $('.categories').css("width", "auto").css("height", height+"px").css("visibility", "visible").css("overflow", "hidden").css("position", "relative");
    $(".categories ul li").css("list-style","none").css("display","inline");
    $(".categories ul").css("width", ulSize+"px").css("left", -(current * liSize)).css("position", "absolute").css("white-space","nowrap").css("margin","0px").css("padding","5px");

    $(".categories").swipeleft(function(event){
        if(current + step < 0 || current + step > maximum - visible) {return; }
        else {
            current = current + step;
            $('.categories ul').animate({left: -(liSize * current)}, speed, null);
        }
        return false;
    });

    $(".categories").swiperight(function(){
        if(current - step < 0 || current - step > maximum - visible) {return; }
        else {
            current = current - step;
            $('.categories ul').animate({left: -(liSize * current)}, speed, null);
        }
        return false;
    });         
}); 
```

但无法得到它可以有人帮助我......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:47:48.637

你正在寻找的是一个旋转木马。我在 jquery mobile 中找不到任何官方支持。Sencha touch 确实有一个实现。

如果你看[http://forum.jquery.com/topic/jquery-mobile-carousel-sencha-style](http://forum.jquery.com/topic/jquery-mobile-carousel-sencha-style)有人试图制作一个库来复制它。在这里查看他们的演示[http://jsfiddle.net/blackdynamo/yxhzU/](http://jsfiddle.net/blackdynamo/yxhzU/)

或者，您可以尝试使用现有的 jquery/javascript 轮播并让它在 jquery mobile 上运行。我知道 sequence.js ( [http://www.sequencejs.com/themes/modern-slide-in/](http://www.sequencejs.com/themes/modern-slide-in/) ) 支持触摸事件，并且非常适应你想要的任何东西，你想要的任何转换。所以这可能是一个很好的尝试。

编辑：

我用谷歌搜索了一下，发现：[http](http://tympanus.net/Development/Elastislide/index2.html) ://tympanus.net/Development/Elastislide/index2.html这似乎与您链接的东西类型相同，尽管这个支持触摸事件

# php - 循环里面用php循环

> ID：11745707
> 
> 赞同：0
> 
> 时间：2012-07-31T17:25:47.100
> 
> 标签：php, foreach

所以我希望完成的是：

```
<div class="product-box">
    <ul class="product-list">

    <li><a href="http://sauritchsurfboards.com/longboards.html" title="Surfboards _ San Diego Surfboard Shapers _ Sauritch Surfboards-2" target="_blank"><span>Surfboards _ San...</span>
    </a></li>

    <li><a href="http://sauritchsurfboards.com/longboards.html" title="Surfboards _ San Diego Surfboard Shapers _ Sauritch Surfboards-2" target="_blank"><span>Surfboards _ San...</span></a></li>

    <li><a href="http://sauritchsurfboards.com/longboards.html" title="Surfboards _ San Diego Surfboard Shapers _ Sauritch Surfboards-2" target="_blank"><span>Surfboards _ San...</span></a></li>

    <li><a href="http://sauritchsurfboards.com/longboards.html" title="Surfboards _ San Diego Surfboard Shapers _ Sauritch Surfboards-2" target="_blank"><span>Surfboards _ San...</span></a></li>

    <li><a href="http://sauritchsurfboards.com/longboards.html" title="Surfboards _ San Diego Surfboard Shapers _ Sauritch Surfboards-2" target="_blank"><span>Surfboards _ San...</span></a></li>

    <li><a href="http://sauritchsurfboards.com/longboards.html" title="Surfboards _ San Diego Surfboard Shapers _ Sauritch Surfboards-2" target="_blank"><span>Surfboards _ San...</span></a></li>

    </ul>
</div> 
```

我有一个`$griditems`来自数据库的数组。

我想展示 6 个 .product-box'es，`<li>`里面有 6 个，来自这个`$griditems`

通常我会这样做：

```
<div class="product-box">
    <ul class="product-list">
<?php
$count=1;
foreach($griditems as $item)
{
  if($count == 6) { break; }
?>
<li><a>.....</a></li>
<?php
 $count++;
}
?>
</ul>
</div> 
```

但这在这种情况下不起作用，因为我希望有 6 个这些 .product-box 类，并且每个 .product-box 内部应该有这 6 个项目，它们应该彼此继续，而不是重复相同的前 6 个存在于`$griditems`数组中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:31:21.443

您可以使用`array_chunk`将数组拆分为某个最大长度的子数组。

```
$chunks = array_chunk($griditems, 6);
foreach($chunks as $chunk) {
    echo "<div><ul>";
    foreach($chunk as $item) echo "<li>".$item."</li>";
    echo "</ul></div>";
} 
```

顺便说一句，仅使用 HTML 元素来容纳单个其他 HTML 元素并不是很好的做法，因此您的 DIV 可能是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:28:13.097

您想使用 mod 运算符 ( `%`) 检查每第六个项目，然后关闭现有框并开始一个新框，如下所示：

```
?>
<li><a>.....</a></li>
<?php
    if ($count % 6 == 0) { ?>
    </ul>
    </div>
    <div  class="product-box">
    <ul class="product-list">
<?php }
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:31:25.357

我可能误解了你的问题，但我认为这会有所帮助：

```
$count = 0;
echo "<ul>"
foreach($griditems as $item) {
    if (++$count % 6 == 0) {
        echo "</ul><ul>";
    }
    echo "<li><a>....</a></li>";
}
echo "</ul>"; 
```

# catalyst - 催化剂控制器生成动态图像并将其传递给视图/前端 - 最好的方法是什么？

> ID：11745708
> 
> 赞同：0
> 
> 时间：2012-07-31T17:25:48.583
> 
> 标签：catalyst

所以问题是：

1.  这是使用 Catalyst 框架的报告应用程序
2.  在控制器中，我生成 QR 码图像并希望将此 URL（生成的图像）​​传递给特定的视图/前端？注意：我不想将二进制或 base64 数据从控制器传递给查看？
3.  我应该在 $c->stash->{Images} = ??

任何想法，提示？请指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T00:41:22.277

就个人而言，我完全绕过了 View，并设置了 content-type 和 body 以在这种情况下直接从控制器返回图像。将图像写入文件，以便对服务器的另一个调用可以检索它似乎既不明智也不可扩展。最终，除非您正在做一些非常非正统的事情，否则您`<img src="..."/>`无论如何都会从页面请求图像。

```
package SomeController;
...
sub qrcode :Local {
    my ($self, $c, @args) = @_;
    my $png;
    eval { $png = ... } } ||
        $c->res->redirect($c->uri_for('/static/images/sorry_qrcode_failed.png'));
    $c->res->content_type('image/png');
    $c->res->body($png);
} 
```

...以及您的页面请求

```
<img src="/somecontroller/qrcode/foo/bar" /> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:32:24.670

> 注意：我不想将二进制或 base64 数据从控制器传递给查看？

这是一个问题还是一个陈述，我不确定。我会将生成 QR 的信息传递给视图，视图将生成实际图像。

如果您不想通过 View 生成 QR，也不想传递任何二进制数据，那么只剩下 1 个选项：URL（http 或文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T13:03:21.580

我建议您使用 QRCode View for Catalyst：

> [Catalyst::View::GD::Barcode::QRcode](https://metacpan.org/pod/Catalyst%3a%3aView%3a%3aGD%3a%3aBarcode%3a%3aQRcode)

这样，二维码图像将自动从数据中生成，无需将图像存储在您的服务器上，占用空间。这就是我实际上所做的，它非常方便:)

# c# - 使用没有字母参数的 Postgresql 的 Dapper 存储过程

> ID：11745709
> 
> 赞同：1
> 
> 时间：2012-07-31T17:25:49.037
> 
> 标签：c#, postgresql, stored-procedures, plpgsql, dapper

我正在尝试使用 C# 和 Dapper 调用用 plpgsql 编写的 Postgresql 存储过程，但我发现 Dapper 在将参数插入存储过程之前会按字母顺序排列参数。有没有办法可以避免这种行为并以正确的顺序插入项目？

例如，以下调用将无法正确运行，因为它会按字母顺序排列参数名称。我必须手动将它们按字母顺序排列才能通过呼叫。

```
int map_id = conn.Query<int>(
"insert_color",
new
{
    zebra_name = new DbString { Value = slide_name },
    door_name = new DbString { Value = fov_name },
    foo_number = cycle_number,
    variable_path = new DbString { Value = image_path },
    random_path = new DbString { Value = meta_path },
    x = x,
    y = y,
    z = z,
    exposure = exposure,
    type_name = new DbString { Value = image_type },
    copy = copy
},
commandType: CommandType.StoredProcedure).First(); 
```

这是存储过程声明：

```
CREATE OR REPLACE FUNCTION insert_color(
zebra_name text, door_name text, foo_number integer,    
variable_path text, random_path text, 
x real, y real, z real, exposure real,
type_nametext, copy integer) RETURNS integer AS $$
    ...
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:40:28.737

在内部，Dapper 使用反射来获取 param 对象的属性。具体来说，`GetProperies(...)`麻烦的是，这些不能保证按特定顺序排列......

> GetProperties 方法不按特定顺序返回属性，例如字母顺序或声明顺序。您的代码不得依赖于返回属性的顺序，因为该顺序会有所不同。

为了有点有用，他们选择按字母顺序对参数进行排序，但不幸的是，无法确保参数按照您在类中的顺序出现。

# c# - 实施-拖放-使用-jquery

> ID：11745711
> 
> 赞同：2
> 
> 时间：2012-07-31T17:26:01.793
> 
> 标签：c#, jquery, asp.net-mvc-3, drag-and-drop, jquery-ui-sortable

我有一个 MVC 3 应用程序，要求系统管理员能够从属性主列表生成设备属性的有序列表并将其保存为指定配置。

我查看了以下问题和答案 -[使用 JQuery 实现拖放](https://stackoverflow.com/questions/7147873/implementing-drag-n-drop-using-jquery)

我已经在视图中包含了 JQuery UI 可排序库、脚本和样式，并且在视觉上一切似乎都很好。Ityems从master拖放到输出列表中。

我的问题是从输出列表中检索数据 - 可排序的 JQuery UI 元素。在引用的文章中，他们建议对可排序元素使用序列化方法。但是， sortable 似乎只返回表单上输入元素的查询字符串。在我的例子中，可排序元素是一个有序列表，它的数据没有被引用。

如何将可排序元素的数据返回到控制器？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:08:50.777

jQuery UI 的[序列化](http://jqueryui.com/demos/sortable/#method-serialize)方法查看元素的 ID，并创建一个序列化的哈希字符串，该字符串适合回发到您的控制器。默认情况下，您的 ID 必须采用以下格式之一：

```
<li id="setname=number"></li>
<li id="setname-number"></li>
<li id="setname_number"></li> 
```

所有这些都会导致：

```
"setname[]=number&setname[]=number" 
```

如果 serialize 方法返回一个空字符串，那么您要么没有正确定位可排序元素，它们还没有被 sortable() 调用初始化，或者 ID 的格式不正确。请注意，可以通过将自定义“键”、“属性”和“表达式”参数传递给序列化方法来修改 jQuery UI 序列化元素的方式：

```
var sortedList = $('ul.sortableList').sortable('serialize', { attribute: 'itemid', key: 'foo[]', expression: /(.+)=(.+)/ }); 
```

当然，您始终可以滚动您自己的序列化方法并手动将更新的 LI 位置传递给您的控制器：

```
var positions = new Array();

$sortableLis.each(function () {

    var sortableId = $(this).find('input[id$=SortableID]').val();
    var sortOrder = $sortableLis.index($(this));

    var SortablePosition = {
        ID: encodeURIComponent(sortableId),
        SortOrder: sortOrder
    };

    positions.push(SortablePosition);

});

$.ajax({
    type: 'POST',
    url: '/UpdateSortablePositions',
    data: "{ positions: '" + $.toJSON(positions) + "' }",
    contentType: 'application/json; charset=utf-8',
    dataType: 'json'
}); 
```

# c# - 如何从实体框架向组合框添加项目？

> ID：11745714
> 
> 赞同：5
> 
> 时间：2012-07-31T17:26:17.690
> 
> 标签：c#, entity-framework, combobox

我有这个代码：

```
 private void FillCombobox()
    {
        using (InventoryEntities c = new InventoryEntities(Properties.Settings.Default.Connection))
        {
            List<Customer> usepurposes = c.Customers.ToList();
            DataTable dt = new DataTable();
            dt.Columns.Add("id");
            dt.Columns.Add("name");
            foreach (Customer usepurpose in usepurposes)
            {
                dt.Rows.Add(usepurpose.id, usepurpose.name);
            }
            comboBox1.ValueMember = dt.Columns[0].ColumnName;
            comboBox1.DisplayMember = dt.Columns[1].ColumnName;
            comboBox1.DataSource = dt;

        }
    } 
```

我将此方法称为：

```
 private void frmBillIn_Load(object sender, EventArgs e)
    {
        FillCombobox();
    } 
```

当我运行我的应用程序时，组合框不会显示客户（项目）。

只显示**Model.Customer**

问题是什么？？

我尝试了许多解决方案，但没有一个有效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:34:09.190

您不必混合两个世界，即实体框架的世界和数据集的世界。直接绑定：

```
 using (InventoryEntities c = new InventoryEntities(Properties.Settings.Default.Connection))
    {
        comboBox1.DataSource    = c.Customers;
        comboBox1.ValueMember   = "id";
        comboBox1.DisplayMember = "name";
    } 
```

如果这不起作用，那么列名可能与“名称”不同（也许是“名称”？）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T19:27:21.517

如果您使用“使用”，则需要在关闭连接之前放置一个 ToList() 进行评估。使用 ItemsSource 、 ValueMember 和 DisplayMember 区分大小写

```
using (InventoryEntities c = new InventoryEntities())
    {
        comboBox1.ItemsSource   = c.Customers.toList();
        comboBox1.ValueMemberPath   = "Id";
        comboBox1.DisplayMemberPath = "Name";
    } 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T10:52:13.470

请参阅以下示例。（名称引用 => DAL=数据访问层，projectEntities = 实体集名称）希望这会有所帮助..

列表项List = new List();

```
 using (DAL.projectEntities en = new DAL.projectEntities())
            {
                foreach (var item in en.tableName.Where(a => a.tableName != null).ToList())
                {
                    itemsList.Add(item.tableFieldName);
                }                                   
            }

            comboboxTable.ItemsSource = itemsList; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-11T17:21:18.927

在当前版本的 WinForms 中，我发现这是可行的

```
RentalsEntities1 db = new RentalsEntities1();
        List<SiteSeeingLocation> ssloc = db.SiteSeeingLocations.ToList();
        cbSites.DataSource = ssloc;
        cbSites.ValueMember = "id";
        cbSites.DisplayMember = "ssLocation"; 
```

# google-chrome - 我将如何为 Chrome 和/或 Chromium 开发文件处理程序？

> ID：11745720
> 
> 赞同：1
> 
> 时间：2012-07-31T17:26:43.290
> 
> 标签：google-chrome, emacs, chromium

我想为特定（可能是新的）文件类型开发浏览器插件/扩展（我不确定它们有何不同）。非常明确地说，我想使用我的浏览器在 Drop Box 或 Google Drive 中访问一个文件“foo.org”，并让浏览器像 Emacs 处理 org-mode 文件一样处理该文件。最终，我想开发一个完整的 Emacs 插件/扩展，并能够配置浏览器以根据文件扩展名或文件探索启发式使用此插件/扩展名处理文件。

我开发的任何解决方案都将允许直接在浏览器的选项卡区域中进行编辑，即无缝解决方案（与下面提到的使用 Emacs 的有用但复杂的编辑解决方案相反）。与 Chrome 识别电子表格或 word 文档并调用适当的 Google Docs 工具的方式相同，我希望使用 Emacs-lite 编辑器处理 foo.org 文件。另一种提问方式是：如何在 Chrome 中调用 Google Docs 工具并执行相关的编辑任务。这些工具是开源的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:15:41.963

您应该考虑在[Ymacs](http://www.ymacs.org/)上构建，它是浏览器中类似 Emacs 的编辑器。

对于浏览器扩展，有一个[实验性的下载 api](http://code.google.com/chrome/extensions/experimental.downloads.html)。但是，它目前不允许您监控下载。这是为未来计划的：

> 将来，您还可以监控和操纵下载。

但是，您可能只使用一些 JavaScript 并将所有指向`*.org`文件的链接替换为在运行 Ymacs 的选项卡中打开的链接。这应该具有相同的效果——单击`*.org`链接将在新选项卡中打开它。

查看[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)和[选项卡 API](http://code.google.com/chrome/extensions/tabs.html)，了解有关如何将脚本注入每个页面以及如何打开新选项卡的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:53:22.513

看一下[Edit with Emacs](http://www.emacswiki.org/emacs/Edit_with_Emacs)，它应该可以帮助您（至少）部分实现。

# php - 通过远程 Xdebug 使用自定义 PHP 文件扩展名

> ID：11745721
> 
> 赞同：1
> 
> 时间：2012-07-31T17:26:46.247
> 
> 标签：php, xdebug, file-extension

我在整个 PHP 应用程序中使用 .inc 作为文件扩展名来表示包含的类。将 Xdebug 与调试客户端（即 PHPStorm）一起使用时，我无法在这些单独的文件上调试设置断点。客户端似乎只观察 .php 文件上的断点。我已经测试了另一个名为 MacDBGp 的客户端，并且遇到了同样的问题。

有没有办法配置 Xdebug 以支持标准 .php 扩展之外的其他文件类型？或者这是 DBGp 协议的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:11:55.457

使用 .inc 是不安全的。至少将文件重命名为 .inc.php

这是递归重命名文件的快速方法：

```
find /path/to/www -type f | sed 's/\(.*\)\.inc/mv \1.inc \1.inc.php/' | sh 
```

# sql - '将 varchar 值转换为 int 时转换失败' 如果函数

> ID：11745722
> 
> 赞同：0
> 
> 时间：2012-07-31T17:26:46.570
> 
> 标签：sql, sql-server, sql-server-2008

我无法运行以下查询。

我需要在每周的每一天找到每个模型使用的 [ID] 数量。我运行类似的查询来总结其他指标没有问题。

但在这种情况下，我收到一条消息“将 varchar 值 '07:2767:90:56' 转换为数据类型 int 时转换失败”。

我可以在没有（case if）函数的情况下对 [ID] 执行计数查询，没有任何问题。

```
SELECT model,

 count(CASE WHEN datepart(weekday, [date]) =2 THEN (ID)else 0 END) AS [Monday]
 count(CASE WHEN datepart(weekday, [date]) =3 THEN (ID)else 0 END) AS [Tuesday]
 count(CASE WHEN datepart(weekday, [date]) =4 THEN (ID)else 0 END) AS [Wednesday]
 count(CASE WHEN datepart(weekday, [date]) =5 THEN (ID)else 0 END) AS [Thursday]
 count(CASE WHEN datepart(weekday, [date]) =6 THEN (ID)else 0 END) AS [Friday]

from clientdata 

where [date] between cast ((GETDATE() -7) AS date) and cast (GETDATE()-1 AS date)
group by d.model; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:34:59.017

尝试这个

```
SELECT model,

 count(CASE WHEN datepart(weekday,[date])=2 THEN ID else 0 END) AS [Monday],
 count(CASE WHEN datepart(weekday,[date])=3 THEN ID else 0 END) AS [Tuesday],
 count(CASE WHEN datepart(weekday,[date])=4 THEN ID else 0 END) AS [Wednesday],
 count(CASE WHEN datepart(weekday,[date])=5 THEN ID else 0 END) AS [Thursday],
 count(CASE WHEN datepart(weekday,[date])=6 THEN ID else 0 END) AS [Friday]

from clientdata  d

where [date] between (GETDATE() -7) and (GETDATE()-1)
group by d.model; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:37:19.607

我不确定您为什么会收到该特定错误，但我发现了几个问题：

*   您选择的字段后没有逗号（在星期一、星期二等之后需要一个逗号）
*   您按 d.model 分组，其中 d 不是有效的表别名
*   您的查询不会返回您正在寻找的结果。这些天的所有计数都将相同。您想使用 SUM，类似于：

    SUM(CASE WHEN datepart(weekday, [date]) =2 THEN 1 else 0 END) AS [Monday]

# variables - tcl，如何通过字符串获取变量值

> ID：11745723
> 
> 赞同：0
> 
> 时间：2012-07-31T17:26:54.103
> 
> 标签：variables, tcl, variable-assignment

我可以做这个：

```
set name john
set $name 55
puts $john

==> 55 
```

我想反其道而行之，可以吗？

就像是：

```
set john 55
set name john
puts $$name

==> 55 
```

tcl有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:43:54.150

就在这里：

```
puts [set $name] 
```

# iphone - OAuth 刷新令牌错误

> ID：11745732
> 
> 赞同：1
> 
> 时间：2012-07-31T17:27:24.060
> 
> 标签：iphone, objective-c, cocoa-touch, ipad, oauth-2.0

我正在使用 OAuth 2.0 登录网站。所以每次当我尝试登录服务器时，我都会收到一个响应，其中提到了到期日期、访问令牌和刷新令牌。问题是令牌在我从服务器获得的给定时间之前过期。所以我发现服务器时间和iPhone时间之间有一个间隔。当我查看 SDK facebook 的代码时，没有处理这个问题的逻辑，这是一个简单的比较。所以我的问题是服务器端的这个问题我的意思是OAuth的实现不正确还是客户端的问题？

**脸书代码：**

```
- (BOOL)isSessionValid {
    return (self.accessToken != nil && self.expirationDate != nil
        && NSOrderedDescending == [self.expirationDate compare:[NSDate date]]);

} 
```

**我的代码：**

```
// Get the remaining period of the token to expire and subtract 30 sec
int delay = ([expirationDate timeIntervalSinceDate:serverDateTaken] - 30);

// Save the new Expiring date 
objectOAuth.expiresIn = [[[NSDate date] dateByAddingTimeInterval:delay] description];

+ (BOOL)isSessionValid
{   
    // Get expiration date
    OAuth *authParam = [Connection getSessionParameters];

    // Formating
    static NSString *timeZone = @"UTC";
    NSDate *expirationDate = [Connection getDateFromString:authParam.expiresIn withTimeZone:timeZone];

    // get the remaining period
    int diff = [expirationDate timeIntervalSinceNow];

   // Check if it's expired
   return (diff <= 0); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:21:38.280

不幸的是，实际上并没有任何好的机制来检查客户端和服务器之间的时间偏差。我会坚持简单的检查，因为需要维护和调试的代码更少。而且无论您检查多少，您仍然需要处理取回 TOKEN EXPIRED 错误。

# ruby - Ruby：从令牌自动售货机请求临时 AWS 凭证

> ID：11745733
> 
> 赞同：1
> 
> 时间：2012-07-31T17:27:25.977
> 
> 标签：ruby, amazon-web-services

虽然设置令牌自动售货机有[据可查](http://aws.amazon.com/code/8872061742402990)，但我很难找到使用 Ruby（在 Rails 上）请求临时凭证的示例代码。

如何使用 Ruby（在 Rails 上）与 TVM 进行交互？是否有任何示例代码列出了向 TVM 发出请求并获取临时凭证以访问各种 AWS 服务的过程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:51:44.730

Bart：经过一番挖掘，我找到了以下[AWS 与 Ruby 的链接：入门](http://aws.amazon.com/articles/Ruby/8621639827664165)。这个链接是一些设置的演练，并包含一些示例代码来演示如何进行身份验证等。

您还可以参考[AWS SDK for Ruby](http://aws.amazon.com/sdkforruby/)，其中包含代码示例，浏览 SDK 的[GitHub 源代码存储库](https://github.com/amazonwebservices/aws-sdk-for-ruby)，并查看[Ruby AWS 开发人员中心](http://aws.amazon.com/ruby/)、[Ruby AWS 开发人员论坛](https://forums.aws.amazon.com/forum.jspa?forumID=125)和[Ruby AWS 常见问题解答](http://aws.amazon.com/sdkforruby/faqs/)。

我还将熟悉[AWS SDK API 参考](http://docs.amazonwebservices.com/AWSRubySDK/latest/frames.html)，它是一个非常宝贵的参考指南，可以准确地完成您正在寻找的事情。

编辑：更多资源：

您可以查看以下文件：[TokenVendingMachinePolicy.json](https://github.com/amazonwebservices/aws-tvm-identity/blob/master/src/TokenVendingMachinePolicy.json)，其中包含要与 AWS TVM 流程结合使用的配置。虽然此文件由 Java 项目使用，但 JSON 应该可用于您的目的。

通过查看使用该文件的[其余代码](https://github.com/amazonwebservices/aws-tvm-identity/tree/master/src/com/amazonaws/tvm)（用 Java 编写），您也可以取得一些进展。

主要部分似乎是：

*   [DeviceAuthentication.java](https://github.com/amazonwebservices/aws-tvm-identity/blob/master/src/com/amazonaws/tvm/custom/DeviceAuthentication.java)
*   [用户认证.java](https://github.com/amazonwebservices/aws-tvm-identity/blob/master/src/com/amazonaws/tvm/custom/UserAuthentication.java)
*   [GetTokenServlet.java](https://github.com/amazonwebservices/aws-tvm-identity/blob/master/src/com/amazonaws/tvm/GetTokenServlet.java)

如果您从这 3 个文件开始，我认为您应该能够在翻译成 Ruby 方面取得一些进展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T17:48:33.483

看起来亚马逊也有一个[Ruby SDK](http://docs.aws.amazon.com/AWSRubySDK/latest/frames.html)，其中有一个关于[STS](http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/STS.html)的部分。希望这对将来的其他人有所帮助。

# shell - 没有 ssh 访问权限的 ssh-keygen

> ID：11745735
> 
> 赞同：0
> 
> 时间：2012-07-31T17:27:32.920
> 
> 标签：shell, ssh, scp

我有一个 Lacie Network Space 2，他们在其中禁用了 SSH 访问，我想编写一个脚本，在其中使用 scp 将文件从我的计算机传输到 NS2。我唯一的问题是我不能（据我所知）在没有首先通过 SSH 连接的情况下生成公钥。

所以我的问题是：是否可以在不访问 SSH 的情况下生成用于 scp 的密钥？或者使用脚本将文件传输到我的 NS2 (FW 2.2.4) 的其他巧妙方法。

我可能会补充一点，我目前正在安装磁盘并使用 cp，但我想要更好的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:23:44.233

我得出的结论是，如果您想使用较新的 FW 访问 NS2 上的 ssh 密钥，则必须从其外壳中取出磁盘并将其连接到计算机，正如他们在此链接中所述 [启用 NS2 上的 SSH](http://lacie.nas-central.org/wiki/Enabling_ssh_with_disassembling_%28Network_space_2%29)

我感谢你们俩的回答，但我想我必须努力做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:32:17.850

你到底想要什么？如果你想 scp 到 NS2，你必须在源机器上生成密钥并将其附加到目标机器上的 authorized_keys 中。由于您已经可以安装和使用 cp，因此您应该能够做到这一点。

请注意，由于`scp`工作结束`ssh`，如果他们禁用了 ssh，这将不起作用。OTOH，如果他们只禁用了基于密码的 ssh，或者将 /bin/false 设置为您的 shell，这可能会起作用。

# windows - php.ini 中的 max_execution_time 不会更新，其他设置会更新

> ID：11745737
> 
> 赞同：1
> 
> 时间：2012-07-31T17:27:44.237
> 
> 标签：windows, iis-6, php

所以我编辑了我的 php.ini 文件以允许更长的 max_execution_time 以及其他一些设置。当我在 Windows Server 2003 上回收 IIS 6 中的应用程序池并检查我创建的 php 信息文件时，我更改了其他设置，但 max_execution_time 保持默认设置 (300)。这是怎么回事？它没有被注释掉，看起来像这样：

```
max_execution_time = 1800 
```

就像我说的，我已经将 max_input_time 更改为具有相同的值，并且它可以工作。

```
max_input_time = 1800 
```

读取 PHP Info 文件显示 max_input_time 为 1800 秒，但 max_execution_time 仍然显示为 300。对此有何想法？

编辑： phpinfo 文件中列出的加载配置文件是我正在使用的文件。正如我所提到的，其他设置正在生效，但是，这个特定的设置没有。这意味着它确实在读取我正在编辑的文件，它只是不想更改 max_execution_time。我也重新启动了服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:35:45.623

请先检查您的 php.ini 路径，然后再更改正确的文件。

或者

如果您更改正确的文件然后重新启动服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:51:02.767

试试你可以试试用`set_time_limit(0)`；

# combobox - 访问 2010 日组合框

> ID：11745742
> 
> 赞同：1
> 
> 时间：2012-07-31T17:27:57.007
> 
> 标签：combobox, ms-access-2010

我试图让用户输入日期的 3 个组合框。月份和年份组合框非常简单，但我在使用日期组合框时遇到了问题。我希望这是一个智能盒子，因为它只会根据月份显示天数，即。当月份设置为二月时为 28，如果在一月设置为 31。

我只是想知道是否有一种简单的方法可以实现这一点，我尝试了一些不成功的 VBA。

我所做的是我基本上使用`addItem`了 1-28 天，然后`IF`检查我是否需要 29、30 或 31 天。当我从一个有 31 天的月份到 30 天，然后到 29/28 时发生错误，因为它会尝试从列表中删除 31，但它不会存在，因为当切换到 30 天的月份时，它会出现 31。除非有一种方法可以绕过这个我需要一个指向正确方向的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:20:39.373

你可以这样说：

```
Me.cboDay.RowSource = "SELECT Number " _
& "FROM MyNumbersTable " _
& "WHERE Number < = " & Day(DateSerial(Me.cboYear,Me.cboMonth+1,0)) 
```

其中 MyNumersTable 是一个整数表

注意

```
Day(DateSerial(2012,2+1,0)) = 29 
```

# c# - 设置 MOQ 更新测试

> ID：11745744
> 
> 赞同：2
> 
> 时间：2012-07-31T17:28:00.667
> 
> 标签：c#, asp.net-mvc, moq

我正在为各种实体开发 Moq 测试。我可以很好地设置创建和删除测试，但不能更新 - 存储库中的实体不会改变。我知道这是由于 PersistAll 什么都不做（可能是由于我缺少一个设置）。

这是插入持久设置的示例（我正在寻找更新版本）：

```
agg.Setup(a => a.InsertOnPersist<Thingy>(model)).Callback(() => mockThingies.Add(model)); 
```

此外，我还可以将列表链接到存储库：

```
agg.Setup(a => a.GetObjectStore<Artist>()).Returns(mockThingies.AsQueryable()); 
```

这是我拥有的更新测试的示例：

```
 public List<Thingy> mockThingies; //this is our repository
 [TestInitialize]
 public void SetupTests()
 {
    mockThingies= new List<Thingy>();
    Thingy someThingy = new Thingy();
    someThingy.Name = "MyName";
    someThingy.ID = 1;
    mockThingies.Add(someThingy);
  }

    [TestMethod]
    public void CanEditExistingThingy()
    {
        Mock<BusinessExceptionBroadcaster> beb = new Mock<BusinessExceptionBroadcaster>();
        Mock<IValidationEngine> valid = new Mock<IValidationEngine>();
        Mock<IAggregate> agg = new Mock<IAggregate>();
        agg.Setup(a => a.GetObjectStore<Thingy>()).Returns(mockThingies.AsQueryable());
        ThingyRepository repo = new ThingyRepository (agg.Object);
        ThingyService service = new ThingyService (repo, beb.Object, valid.Object);
        Thingy newThingy = new Thingy();
        newThingy.ID = 1; //same as old
        newThingy.Name = "newname"; //new name
        Assert.AreNotEqual(newThingy.Name,mockThingies[0].Name); 
        Assert.IsTrue(service.Update(newThingy));
        Assert.AreEqual(newThingy.Name, mockThingies[0].Name); //FAILS HERE
    } 
```

这是要更新的代码：

```
 public bool Update(Thingy entity)
    {  
            Thingy existingThingy= _Thingy.FirstOrDefault(t=>t.ID == entity.ID);
            if (existingThingy != null)
            {
                _Thingy.PersistAll();
                return true;
            }
            else
            {
               //unimportant
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:49:18.343

不要担心测试更新调用是否真的更新了一些东西。您只需验证您的服务是否调用了 repo 上的适当方法来执行更新和持久化。测试实际更新有点超出了这一测试的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:42:37.793

据我所见，它不起作用，因为您在=1 in 中设置了一个`Thingy`，然后在测试中创建了另一个具有相同 ID 的。尽管它们共享相同的 ID，但它们并不相同，因此您的更改永远无法传播到存储库。`ID``Setup`

事实上，我认为这是您的 CUT 代码中的一个错误，因为当您测试 ID 匹配时，您没有测试您的存储库是否了解您正在更新的实体。补充一点，我个人认为如果你的存储库设计允许这样的事情，那么它就有问题。

如果我们谈论的是 EntityFramework，我会说你必须将你的实体附加到上下文中。

# objective-c - NSOpenPanel 显示问题

> ID：11745745
> 
> 赞同：3
> 
> 时间：2012-07-31T17:28:00.597
> 
> 标签：objective-c, cocoa, nsopenpanel

我`NSOpenPanel`用来允许用户选择一个文件。但是，`NSOpenPanel`有时会出现 UI。侧边栏有时会显示，有时不会。只需滚动即可将选定的文件夹（在本例中为“Cookie Stumbler”）移动到打开面板的中间/底部/任何位置，有时它会停止整个应用程序。

我正在调用`NSOpenPanel`作为`IBAction`使用**主**线程的一部分。什么都没有登录`Console.app`，尽管我记得它曾经按照“等待 UI 响应”的方式记录了一些东西。

这`NSOpenPanel`是设置的方式：

```
NSOpenPanel*open = [NSOpenPanel openPanel];

[open setTitle:NSLocalizedString(@"Select License File",nil)];
[open setPrompt:NSLocalizedString(@"Select License",nil)];
[open setMessage:NSLocalizedString(@"Please select your Cookie Stumbler license file:",nil)];
[open setAllowedFileTypes:[NSArray arrayWithObject:@"cskey"]];

[open beginSheetModalForWindow:_registrationWindow completionHandler:^(NSInteger result)
{
    if (result == NSOKButton)
    {
         // other code here
    }
}]; 
```

这是怎么回事？

![在此处输入图像描述](../Images/bbb0e68ad02619d82c845c84a96e051a.png)

# css - 在 CSS 样式参考中复制内联 CSS 样式

> ID：11745755
> 
> 赞同：2
> 
> 时间：2012-07-31T17:28:35.493
> 
> 标签：css

我正在尝试修改我的 CSS 文件中特定 div 的 CSS。内联样式如下所示：

```
div class="widget-area ten columns marT20 left" style="width: 16%; margin: 0px 0px 0px 17px; padding-top: 100px; 
```

如何在引用特定 div 元素的外部 CSS 文件中复制上述内联样式？这是我的尝试：

```
div.widget-area ten columns marT20 left element.style {
      margin:0 0 0 17px;
      padding-top:100px;
      width:16%;
    } 
```

上面的 CSS 不会在 div 元素中输出所需的更改。

谢谢，

AME

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:32:18.020

`widget-area`, `ten`,`columns`等都是单独的类。这意味着在 CSS 样式表中，它们都必须有一个类标识符 ( `.`)

如果您尝试定位包含所有 5 个类的任何 div，那么您需要加入它们。`element.style`是不必要的。当存在内联样式（因此没有类名）时，这就是 Firebug 和其他检查员对类的命名

尝试

```
div.widget-area.ten.columns.marT20.left {
  margin:0 0 0 17px;
  padding-top:100px;
  width:16%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:32:15.383

内联样式声明覆盖 CSS 类声明。

您需要使用 JavaScript 删除内联样式，使其回退到现有的 CSS 类，或者您需要重新定义内联样式属性中的内容。

无论哪种情况，您都需要 JavaScript。

# android - TabHost - 底部对齐，禁用且不显示视图

> ID：11745758
> 
> 赞同：0
> 
> 时间：2012-07-31T17:28:45.897
> 
> 标签：android, android-tabhost, tabwidget

我知道这有点奇怪，但请耐心等待。

我有一个自定义视图，它扩展了 TabHost 并扩展了 XML。它包括几个视图，它与底部对齐，一切都很好。

问题是当我将 TabHost 放在不同的活动中时，我不想看到任何 TabHost 视图。只有活动布局顶部的 TabHost 选项卡。基本上，我希望 TabHost 作为禁用的底栏存在。

这是 TabHost XML（效果很好并且与底部对齐，只要我在其中一个自定义视图之间切换）：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
             >

            <CustomView#1
                android:id="@+id/tab_watch_me"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <CustomView#2
                android:id="@+id/tab_messages"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <CustomView#3
                android:id="@+id/tab_search_results"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <CustomView#4
                android:id="@+id/tab_my_profile"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <CustomView#5
                android:id="@+id/tab_user_profile"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />
         </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0" />
    </LinearLayout>

</TabHost> 
```

这是活动 XML（我不希望显示 tabhost 视图，只是为了将 tabhost 按钮与底部对齐）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <customview.HeaderView
        android:id="@+id/header_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

**//Notice that I don't want to show any of the customViews the tabhost hold. only the tabhost tabs/buttons**

    <customview.MyTabHost
        android:id="@+id/settings_tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

如果您需要更多代码以提供帮助，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:42:13.120

我的 RelativeLayout 解决方案以防万一这对任何人都有帮助。如果有人必须提供，我仍在寻找更好的解决方案。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <customview.HeaderView
        android:id="@+id/header_view"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

<Any other view
android:layout_below="@+id/header_view"
/>

    <customview.MyTabHost
        android:id="@+id/settings_tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

# android - 如何在 Android 的 ExpandableList 中获取孩子相对于整个列表的位置？

> ID：11745762
> 
> 赞同：0
> 
> 时间：2012-07-31T17:28:55.507
> 
> 标签：android, list, hashmap, expandablelistview

我有一个这样的列表：

```
-ONE
-TWO
-THREE 
```

展开时：

```
-ONE
 ->a1
-TWO
 ->a2
 ->b2
-THREE
 ->a3 
```

**我想要什么：**

我想要一个孩子在这样的整个列表中的位置，不管是否扩展了其他组：

```
a1=0
a2=1
b2=2
etc... 
```

**到目前为止我尝试了什么：**
`int childPos = ExpandableListView.getPackedPositionChild(info.packedPosition);`

这只会给我孩子在小组中的位置。所以，

```
a1=0

a2=0
b2=1
etc... 
```

我也研究了`getFlatListPosition`，但它的工作方式是，如果组被扩展，一个孩子的位置只会相对于列表计算。并且它还计算了该组的位置。例如，如果 ONE 未展开，而 TWO 和 THREE 展开，则：

```
-ONE
-TWO = 0
 ->a2 = 1
 ->b2 = 2
-THREE = 3
 ->a3 = 4 
```

**替代方案：**
我可以使用哈希映射，但想看看是否有内置方式:)

**为什么我想要孩子的 pos：**

我已将列表中孩子的位置映射到数据库中相应的 id。所以当用户想要删除孩子时，我可以在 hashmap 中查找它并将它的 id 传递给数据库删除函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-05T14:14:15.450

最后，我找到了解决方案。在您的 Onclick 中，添加以下代码：

```
int size = 0;
int mpos;
for (int m = 0; m < groupPosition; m++) {
  size += menuAdapter.getChildrenCount(m);
}
mpos = childPosition + size; 
```

因此，`mpos`将是整个列表中子值的位置。

# c++ - 成员函数指针的模板参数推导

> ID：11745764
> 
> 赞同：14
> 
> 时间：2012-07-31T17:28:58.197
> 
> 标签：c++, templates

众所周知，模板参数可以是指向成员函数的指针。

所以我可以写：

```
struct Bar
{
    int fun(float x);
};

template <int (Bar::*FUN)(float)>
struct Foo
{ /*...*/ };

typedef Foo<&Bar::fun> FooBar; 
```

但是，如果我希望`Bar`类型本身是模板参数怎么办：

```
template <typename B, int (B::*FUN)(float)>
struct Foo
{ /*...*/ };

typedef Foo<Bar, &Bar::fun> FooBar; 
```

现在，当我使用它时，我必须写`Bar`两次！

我的问题是：有没有办法强制编译器自动推断类类型？

目标是让它正常工作：

```
typedef Foo<&Bar::fun> FooBar;
typedef Foo<&Moo::fun> FooMoo; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T18:00:32.610

简单的回答：不，没有。

问题是，`typedef Foo<&Bar::fun> FooBar;`为了工作，模板必须有一个非类型参数，但是在声明模板时该参数的类型是未知的，这是无效的。另一方面，类型推导永远不会应用于模板的参数（仅适用于函数模板的参数，但那些是函数的参数，而不是模板）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T18:26:24.573

您可能应该在其中写下类名。但是，如果你真的想避免这种情况，你可以使用宏的邪恶魔法。简单的版本更危险：

```
#define TT(X) decltype(X), X

template<typename T,T t>
struct Foo
{ /* ... */ };

struct Bar {
    int fun(float) {}
};

int main() {
    Foo<TT(&Bar::fun)> f;
} 
```

`Foo`这将接受任何类型的非类型模板参数，如果实现仅适用于指向成员的指针，您可能会遇到难以理解的错误。

为了让它更安全一点，你需要一个告诉你类名的元函数：

```
template<typename T> struct member_ptr_traits;

template<typename Class,typename Ret,typename... Args>
struct member_ptr_traits<Ret (Class::*)(Args...)>
{
    typedef Class class_type;
    typedef Ret return_type;
};

#define TT(X) member_ptr_traits<decltype(X)>::class_type , X

template<typename T,int (T::*FUN)(float)>
struct Foo
{ /* ... */ };

struct Bar {
    int fun(float) {}
};

int main() {
    Foo<TT(&Bar::fun)> f;
} 
```

这两个都使用 C++11，因此它们不能与旧编译器一起使用。这个简单的版本可以重写以使用旧的`typeof`或类似的编译器扩展。重写更安全的版本需要模拟可变参数模板。

# java - ObjectInputStream readObject(): ClassNotFoundException

> ID：11745771
> 
> 赞同：3
> 
> 时间：2012-07-31T17:29:23.673
> 
> 标签：java, tcp, classnotfoundexception, objectoutputstream, objectinputstream

在客户端和服务器类中，我都有一个完全相同的内部类，称为 Data。此 Data 对象正在使用以下方式从服务器发送：

```
ObjectOutputStream output= new ObjectOutputStream(socket.getOutputStream());
output.writeObject(d); 
```

（其中 d 是一个数据对象）

此对象在客户端接收并转换为 Data 对象：

```
ObjectInputStream input = new ObjectInputStream(socket.getInputStream());
Object receiveObject = input.readObject();
if (receiveObject instanceof Data){
    Data receiveData = (Data) receiveObject;
    // some code here... 
} 
```

我`java.lang.ClassNotFoundException: TCPServer$Data`在这条线上得到一个`Object receiveObject = input.readObject();`

我的猜测是它试图在服务器端查找 Data 类并且找不到它，但我不确定......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:59:47.350

您试图做的事情类似于以下内容：

```
class TCPServer {
    /* some code */

    class Data {

    }
}

class TCPClient {
    /* some code */

    class Data {

    }
} 
```

然后您正在序列化 TCPServer$Data 并尝试将其反序列化为 TCPClient$Data。相反，你会想要这样做：

```
class TCPServer {
    /* some code */

}

class TCPClient {
    /* some code */

}

class Data {
    /* some code */

} 
```

然后确保 Data 类对客户端和服务器程序都可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T17:49:54.143

当您在两个不同的 JVM 中使用某个类并且正在编组/解组该类时，应将该类导出到一个公共库并在服务器和客户端之间共享。任何时候都有不同的班级是行不通的。

您要做的是编组 TCPServer$Data 并将其解组为 TCPClient$Data。那是不相容的。

# json - EXTJS 3.4 将 JSON 数据动态加载到树中

> ID：11745772
> 
> 赞同：2
> 
> 时间：2012-07-31T17:29:23.763
> 
> 标签：json, extjs, treepanel

我需要将 JSON 数据加载到 Tree 或 TreePanel 中。JSON 数据不是来自文件或从 URL 检索，而是动态构建的。

我找不到任何例子。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T18:44:13.560

您可以通过以编程方式创建根节点来做到这一点。遍历您的数据并继续将子节点附加到您的根节点。这里已经解释得很好：

[ExtJS：如何创建静态和动态树](http://atechiediary.blogspot.in/2013/06/extjs-how-to-create-static-and-dynamic.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T18:29:58.647

当我试图创建一个 Treegrid afetr 在搜索字段中搜索某些内容时（需要在 URL 中传递它），我发现了一些奇怪的行为。

我在这里创建的逻辑是：

1.  使用 rootVisible: false 和 store:mystore 创建了一个 Tree 类
2.  我的商店没有代理{}，因为我必须从控制器动态设置它
3.  在商店里面有 autoLoad:false
4.  使用 mystore.load() 将数据加载到树中

请求进行了 2 次树中的空白根节点虽然我没有根节点。

我通过以下方式修复了它......不确定是否扩展这是正确的。有更好的解决方案请分享

# 树类（视图）

```
 Didn’t define any treestore inside tree view
            rootVisible: false 
```

# 控制器内部

```
search: function(button){

            var searchText = this.getSearchField().value;

            //created a store instance

            var mystore = Ext.data.StoreManager.lookup('MyTreeStore');

            mystore.setProxy({
                                 type: 'ajax',
                                 url: 'app/searchid/'+searchText;
                             });

            var mytree = Ext.create('AM.view.MyTree',{store:mystore});

            Ext.getCmp('tn').add(mytree);

            //DON’T USE store.load() method As we have set rootVisible: false so it will automatically try to load the store or will send the request 
```

}

# 存储文件

```
 Ext.define('AM.store.BomTreeStore', {

                extend: 'Ext.data.TreeStore',

                model: 'AM.model.BomTree',

                autoLoad: false,

                folderSort: true
            }); 
```

对此请分享任何更好的解决方案:)

# c# - 动态绑定到 XmlDataSource 时缓存的 TreeView 节点

> ID：11745773
> 
> 赞同：0
> 
> 时间：2012-07-31T17:29:30.393
> 
> 标签：c#, asp.net

我正在尝试根据通过查询字符串传递的 ID 创建 TreeView。这是我的 TreeView 控件：

```
<asp:TreeView ID="tvDirectories" runat="server" DataSourceID="xdsDirectories">
    <DataBindings>
        <asp:TreeNodeBinding DataMember="DirectoryNode"
            ValueField="Id" TextField="Title" />
    </DataBindings>
</asp:TreeView>

<asp:XmlDataSource ID="xdsDirectories" runat="server" /> 
```

页面加载完毕后，我拿ID，做一些幕后的事情来得到我想要的xml，然后我把它绑定到XmlDataSource。这是该代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        string id = Request.QueryString["id"];

        StringBuilder sb = new StringBuilder();
        XmlWriter xw = XmlWriter.Create(sb);

        GetDirectories(id).WriteXml(xw);  // my function
        xw.Flush();
        xw.Close();

        string xml = sb.ToString();

        xdsDirectories.Data = xml;
        xdsDirectories.DataBind();
    }               
} 
```

这是我的函数返回的 xml 的样子：

```
<?xml version="1.0" encoding="utf-16"?>
<DirectoryNode Id="1" Title="Directory1">
    <DirectoryNode Id="24" Title="SubDirectory1" />
    <DirectoryNode Id="57" Title="SubDirectory2" />
</DirectoryNode> 
```

所以我第一次加载`mypage.aspx?id=1`时，它工作正常 - 树正确加载所有 ID 和标题。但如果我加载`mypage.aspx?id=2`，它加载的数据与我传入的数据相同`id=1`。之后对任何其他 id 的请求也是如此。

我已经通过调试器并检查了绑定到 XmlDataSource 的数据 - 一切看起来都很好，但是 TreeView 显示了来自第一个请求的数据。

如果我取出`DataSourceID`属性，重新加载页面以使 TreeView 不显示任何内容，重新添加`DataSourceID`属性，然后 load `mypage.aspx?id=2`，然后树将显示正确的数据。但是，此后任何带有任何其他 id 的请求都只会显示数据，就好像我传入了一样`id=2`。所以奇怪的事情正在发生。

数据是否被缓存在某个地方，或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:46:56.117

您是否尝试将缓存设置为禁用？

XmlDataSource 上的 EnableCaching="false"

# jquery - 在自己的网站上的灯箱中显示 Facebook 图片的相册

> ID：11745774
> 
> 赞同：0
> 
> 时间：2012-07-31T17:29:31.587
> 
> 标签：jquery, facebook

所以我试图在我的网站上展示我的 facebook 粉丝页面中的专辑。我使用此代码并设法在我的网站上获取图片（使用 css 格式），但安装灯箱以显示完整尺寸的图像将不起作用。任何人的想法？

提前致谢！

代码：

```
HEAD
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>
    //fbAlbum Script courtesy of zach@lysobey.com | http://zach.lysobey.com/projects/fbalbum
    (function($){$.fn.fbAlbum=function(f){var g=this;var h={'albumID':10150302289698306,'limit':100,'ul':'album','callback':'','title':true};if(f){$.extend(h,f)}var i="https://graph.facebook.com/"+h.albumID+"/photos?limit="+h.limit+"&callback=?";$.getJSON(i,function(a){var b=[];for(var c in a){for(var d in a[c]){val2=a[c][d];if(typeof(val2.source)!="undefined"){var e="";if(h.title&&val2.name){e=val2.name}b.push('<li><a href="'+val2.source+'" rel="prettyPhoto[gallery1]" title="'+e+'"><img src="'+val2.picture+'" width="72" height="72"   /></a></li>')}}};$('<ul />',{'class':h.ulClass,html:b.join('')}).appendTo(g);if(h.callback){h.callback()}});return this}})(jQuery);    
    $(document).ready(function() { 
        $('#gallery').fbAlbum({
            'albumID':XXX 
        }); 
    });
    </script>

BODY
<div id="gallery"></div> 
```

PS：我试图使用这个 jQuery 灯箱：[http ://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/#prettyPhoto)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:47:51.210

刚注意到这个帖子。我是您正在使用的 FBalbum 插件的作者。实际上有一个“回调”选项，您可以传递 fbAlbum 函数，您应该在其中放置脚本来初始化灯箱。

[请参阅此示例页面（带有 fancybox 插件）](http://zach.lysobey.com/files/demo_fancybox)

# ios - 调用“- (void) takePicture”返回非聚焦图像

> ID：11745775
> 
> 赞同：0
> 
> 时间：2012-07-31T17:29:32.020
> 
> 标签：ios, uiimage, uiimagepickercontroller

我有一个 UIImagePickerController 和我自己的相机覆盖。在那个叠加层中，我有一个按钮，用户可以按下它来拍照。

目前，我有一个关于“Touch Up Inside”的 IBAction 会拍照。self.imagePickerController 是我对 UIImagePickerController 的引用

```
- (IBAction)onSnapClicked:(id)sender {

     [self.imagePickerController takePicture];

} 
```

我的问题是，在回调方法中。我得到的图像总是模糊的。请帮忙

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{   
    // Get the original image
    UIImage *originalImage = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:00:38.517

它们的质量相同。您可能在某处创建了延迟，因此在实际拍摄时会给您一种完成拍摄的错误感觉。

除非您的按钮允许触摸。在这种情况下，相机总是试图聚焦照片的那一部分。你必须防止这种情况发生。如何做到这一点，请查看我对这个问题的回答：[iOS 中 cameraoverlay view (of the camerapicker) Exlusive touch in cameraoverlay view (of the camerapicker)?](https://stackoverflow.com/questions/8898758/exlusive-touch-in-cameraoverlay-view-of-the-camerapicker-in-ios/11672147#11672147)

# php - 我可以使用什么来代替 HTTP_REFERER 进行可靠的跟踪？

> ID：11745789
> 
> 赞同：0
> 
> 时间：2012-07-31T17:30:35.733
> 
> 标签：php, http-referer

我正在编写一个脚本，它将每个访问者的引用 URL 保存到会话 var，然后将其与其他数据一起存储到数据库中，例如将访问者带到网站的谷歌关键字/短语以及引用链接是常规的谷歌列表（又名有机结果）或付费链接（谷歌广告词）。到目前为止，我已经想出了这个，但它并不总是有效。进行更多阅读后，我发现在几种情况下 http_referer 被阻止或隐藏，因此我正在寻找一种更好的方法来使其正常工作。

```
 $session = & JFactory::getSession();
    if (!$session->get('referrer', $origref, 'extref')) //If does not exist
    {
        $origref = $_SERVER['HTTP_REFERER'];
        $session->set('referrer', $origref, 'extref');

        $url = $session->get('referrer', $origref, 'extref');
        if(!$url && !$url = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : false) {
            $q = 'No referer';
        }

        $parts_url = parse_url($url);
        $query = isset($parts_url['query']) ? $parts_url['query'] : (isset($parts_url['fragment']) ? $parts_url['fragment'] : '');
        if(!$query) {
            $q = 'Not from Google';
        }
        parse_str($query, $parts_query);
        $q = isset($parts_query['q']) ? $parts_query['q'] : isset($parts_query['oq']) ? $parts_query['oq'] : (isset($parts_query['p']) ? $parts_query['p'] : 'could not fetch keyword');

      if(stristr($origref, 'aclk')) { // if referer is a google adwords link as opposed to an organic link
          $type = ', paid link, '.$_SERVER['HTTP_USER_AGENT'];
      } else {
          $type = ', organic result, '.$_SERVER['HTTP_USER_AGENT'];
      }

    $ginfo = $q.$type;
    $session->set('referrer', $ginfo, 'extref');  
    }

    function search_engine_query_string($url = false) {
        if(!$url && !$url = isset($_SERVER['HTTP_REFERER']) ? $_SERVER['HTTP_REFERER'] : false) {
            return 'No referer';
        }

        $parts_url = parse_url($url);
        $query = isset($parts_url['query']) ? $parts_url['query'] : (isset($parts_url['fragment']) ? $parts_url['fragment'] : '');
        if(!$query) {
            return 'Not from Google';
        }
        parse_str($query, $parts_query);
        return isset($parts_query['q']) ? $parts_query['q'] : (isset($parts_query['p']) ? $parts_query['p'] : '');
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:33:51.020

另一种典型的方法是为跟踪器身份设置一个专门的入口 url。例如：

```
subdomain.mysite.com/tracker?userid=12345&source=adwords 
```

当该 url 被点击时，您就知道来源是 adwords，并且您会立即通过重定向将用户重定向回主页`header`。这样一来，他们对跟踪一无所知，而且应该非常可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:37:54.607

我可能是错的，但除非你控制两端（即推荐人和被推荐人），否则我认为这不可能超出你已经在做的事情。

如果是出于分析目的，您可以使用[Google Analytics](http://www.google.com/analytics/)和[Google Webmaster Tools](http://www.google.com/webmasters/tools/)。

它们相互补充，并且非常希望您想用脚本完成

# javascript - 如何使此代码适用于更大的数字？

> ID：11745791
> 
> 赞同：1
> 
> 时间：2012-07-31T17:30:40.360
> 
> 标签：javascript

这段代码应该简化分数并将小数转换为分数，但是当我输入具有较大除数（超过 7 或 8 位的数字）的分数时，它会滞后很多。

[http://jsfiddle.net/SuperBoi45/vQjgx/](http://jsfiddle.net/SuperBoi45/vQjgx/)

```
var fraction = {};

fraction.simplify = function( frac ) {
    if ( frac.indexOf('/') < 0 ) return frac;
    var numbers = frac.split('/'),
        factor = null,
        parsed = null;

    return (function run( nums ) {
        factor = fraction.factor( nums[0], nums[1] );

        if ( factor === 1 ) {
            parsed = [ Math.abs(nums[0]), Math.abs(nums[1]) ];

            if ( nums[1] === 1 ) return nums[0];
            else if ( nums[1] === -1 ) return -nums[0];
            else if ( nums[0] < 0 && nums[1] < 1 ) return parsed[0] + '/' + parsed[1];
            else if ( nums[0] < 0 || nums[1] < 0 ) return '-' + parsed[0] + '/' + parsed[1];
            else return nums[0] + '/' + nums[1];
        }

        return run( [ nums[0] / factor, nums[1] / factor ] );
    })( numbers );
};
fraction.convert = function( decimal ) {
    var j = decimal.length - 1,
        b = "1";

    if ( decimal.indexOf(".") >= 0 && decimal.length > 1 ) {

        while ( decimal.charAt( j ) != "." ) {
            b += "0";
            j--;
        }

        decimal *= b;
        decimal += "/" + b;

    }

    return decimal;

};
fraction.factor = (function() {

    var greater = function( a, b ) {
        return a > b ? a : b;
    };

    return function( x, y ) {
        x = Math.abs( x );
        y = Math.abs( y );

        var a = greater( x, y ),
            i = a,
            b = ( i === x ) ? y : x;

        for ( ; i >= 1; i-- ) {
            if ( a % i === 0 && b % i === 0 ) return i;
        }

        return 1;
    };

})();​ 
```

我试图让它像 Wolfram Alpha 一样工作，因为你可以放入具有大除数的分数，并且在向你展示它的快速渲染结果时它不会冻结一点。

[http://wolframalpha.com/](http://wolframalpha.com/)

任何人都可以修复此代码以使用更大的数字。我想你必须使用与我不同的算法。另一方面，有没有人知道 WA 的算法或者可以将我引导到我可以找到的站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:41:13.213

替换`fraction.factor()`为：

```
function gcd(a, b) {
    if (b > a) return gcd(b, a);
    if (b === 0) return a;
    return gcd(b, a % b);
}; 
```

这就是欧几里得算法，它可以作为数论的一个很好的介绍。它会比您的迭代方法运行得更快*。*

# java - 移动 GWT 日志记录窗口

> ID：11745793
> 
> 赞同：5
> 
> 时间：2012-07-31T17:30:45.803
> 
> 标签：java, gwt, logging

我目前正在使用 GWT 的内置记录器，但是它连接到 RootPanel 的方式很尴尬，而且它通常被放置在顶部的任何面板遮住。有人知道怎么搬吗？我从来没有把它连接到主面板上，它似乎是自己连接的。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T09:21:29.083

你指的是弹出面板吗？如果您在 Firefox 或 Chrome 上进行开发，请尝试使用 firebug/developer 控制台。我使用以下配置。

```
<set-property name='gwt.logging.enabled' value='TRUE'/>           
<set-property name='gwt.logging.consoleHandler' value='ENABLED'/>
<set-property name='gwt.logging.firebugHandler' value='ENABLED'/>  
<set-property name='gwt.logging.popupHandler' value='DISABLED'/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:51:45.530

[https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging#Different_Types_of_Handlers](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging#Different_Types_of_Handlers)

> 虽然 PopupLogHandler 易于使用，但它也有点侵入性。对于大多数应用来说，更好的解决方案是禁用 PopupLogHandler，而是将日志消息发送到应用中某处的面板。

只需使用

```
logger.addHandler(new HasWidgetsLogHandler(customLogArea)); 
```

其中 customLogArea 可以是任何实现[HasWidgets](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HasWidgets.html)的东西（例如 FlowPanel、RootPanel，...）。这允许您在 HTML 页面、代码或 uiBinder 中创建日志区域。此外，您可以按自己喜欢的方式设置样式（使用 CSS 或代码）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T19:53:09.897

我最终通过将以下内容添加到 gwt.xml 文件来删除面板：

```
`<set-property name="gwt.logging.consoleHandler" value="DISABLED" />` 
```

# c - C：拆分整数并将其转换为 ASCII

> ID：11745798
> 
> 赞同：0
> 
> 时间：2012-07-31T17:31:06.343
> 
> 标签：c, integer, ascii, uart

我想将整数拆分为数字，然后将每个数字转换为 ASCII（在 C 编程语言中）。

例子：

```
int x = 0xABC
/* split integers */
int x1 = 0xA
int x2 = 0xB
int x3 = 0xC
/* convert integers to ASCII */
int x1 = 0x41
int x2 = 0x42
int x3 = 0x43 
```

另外，如果整数只有 2 位长（十六进制），我仍然需要 3 次拆分：

```
int y = 0xBC
/* split integers */
int y1 = 0x0
int y2 = 0xB
int y3 = 0xC 
.
.
. 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:36:10.513

使用数学：x = x₁ · 16² + x₂ · 16 + x₃</p>

使用查找表查看数字是什么：

```
static const char hex[16] = "0123456789ABCDEF";

y1 = hex[x1];
... 
```

我不会给你一个完整的解决方案，因为这是一个与家庭作业相关的问题。

* * *

完整的解决方案（不太容易理解）：

```
// Divide by 16^n and take the modulo 16:
int x1 = (x >> 8) & 0xF; // == (x/256) % 16
int x2 = (x >> 4) & 0xF; // == (x/16) % 16
int x3 = (x >> 0) & 0xF; // == x % 16

int y1 = x1 < 10 ? x1+'0' : x1+'A'-10;
int y2 = x2 < 10 ? x2+'0' : x2+'A'-10;
int y3 = x3 < 10 ? x3+'0' : x3+'A'-10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T18:22:30.320

好吧，你的问题没有给我足够的信息来回答驱魔的“精神”......但是你去：

```
int x = 0xABC;
printf("%03X",x); // Result = "ABC"
x = 0xAB;
printf("%03X",x); // Result = "0AB" 
```

[`sprintf`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sprintf.html)如果您想存储结果，可以轻松地将其修改为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T11:41:21.647

```
 A PROGRAM TO CONVERT INT INTO ASCII.

              #include<stdio.h>
              #include<string.h>
              #include<conio.h>

               char data[1000]= {' '};           /*thing in the bracket is optional*/
               char data1[1000]={' '};
               int val, a;
               char varray [9];

               void binary (int digit)
              {
                  if(digit==0)
                   val=48;
                  if(digit==1)
                   val=49;
                  if(digit==2)
                   val=50;
                  if(digit==3)
                   val=51;
                  if(digit==4)
                   val=52;
                  if(digit==5)
                   val=53;
                  if(digit==6)
                   val=54;
                  if(digit==7)
                   val=55;
                  if(digit==8)
                   val=56;
                  if(digit==9)
                    val=57;
                    a=0;

               while(val!=0)
               {
                  if(val%2==0)
                   {
                    varray[a]= '0';
                   }

                   else
                   varray[a]='1';
                   val=val/2;
                   a++;
               }

               while(a!=7)
              {
                varray[a]='0';
                a++;
               }

              varray [8] = NULL;
              strrev (varray);
              strcpy (data1,varray);
              strcat (data1,data);
              strcpy (data,data1);

             }

              void main()
             {
               int num;
               clrscr();
               printf("enter number\n");
               scanf("%d",&num);
               if(num==0)
               binary(0);
               else
               while(num>0)
               {
               binary(num%10);
               num=num/10;
               }
               puts(data);
               getch();

               } 
```

我检查了我的编码，它工作正常。它将任何给定的整数转换为ASCII码。必须尝试让我知道这是否是您正在寻找的谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:48:13.727

由于这是家庭作业，我不会直接解决这个问题。

首先，我对拆分“整数”的意思感到困惑。看起来（从示例中）您希望拆分十六进制数，而不是十进制数。无论哪种方式，想想如何构建一个数字：123 = 1*100 + 2*10 + 3*1 = 1*10^2 + 2*10^1 + 3*10^0。您如何区分 1 与 2 和 3？（提示，使用乘法的相反数。）（另一个提示，如果它是十六进制，请记住将基数从 10 更改为 16）

现在假设您已将数字拆分为单独的变量。好吧，ascii 表以非常“方便”的方式构建。查找表格，找到所需数字的 ascii 值。从那里，将是一个简单的常量加法/减法来获得数字的 ascii 表示。

（另一个提示）我假设您的意思是将 a 转换`int`为 a `char`。请记住，这些位只是数据。您可以更改数据的表示。搜索“将 int 转换为 char”。

# haskell - 为什么我不能将查找结果与 Haskell 中的 Nothing 进行比较？

> ID：11745799
> 
> 赞同：2
> 
> 时间：2012-07-31T17:31:07.120
> 
> 标签：haskell

我有以下代码：

```
import System.Environment
import System.Directory
import System.IO
import Data.List

dispatch :: [(String, [String] -> IO ())]
dispatch =  [ ("add", add)
            , ("view", view)
            , ("remove", remove)
            , ("bump", bump)
            ]

main = do
    (command:args) <- getArgs
    let result = lookup command dispatch
    if result == Nothing then
        errorExit
    else do
        let (Just action) = result
        action args

errorExit :: IO ()
errorExit = do
    putStrLn "Incorrect command"

add :: [String] -> IO ()
add [fileName, todoItem] = appendFile fileName (todoItem ++ "\n")

view :: [String] -> IO ()
view [fileName] = do
    contents <- readFile fileName
    let todoTasks = lines contents
        numberedTasks = zipWith (\n line -> show n ++ " - " ++ line) [0..] todoTasks
    putStr $ unlines numberedTasks

remove :: [String] -> IO ()
remove [fileName, numberString] = do
    handle <- openFile fileName ReadMode
    (tempName, tempHandle) <- openTempFile "." "temp"
    contents <- hGetContents handle
    let number = read numberString
        todoTasks = lines contents
        newTodoItems = delete (todoTasks !! number) todoTasks
    hPutStr tempHandle $ unlines newTodoItems
    hClose handle
    hClose tempHandle
    removeFile fileName
    renameFile tempName fileName

bump :: [String] -> IO ()
bump [fileName, numberString] = do
    handle <- openFile fileName ReadMode
    (tempName, tempHandle) <- openTempFile "." "temp"
    contents <- hGetContents handle
    let number = read numberString
        todoTasks = lines contents
        bumpedItem = todoTasks !! number
        newTodoItems = [bumpedItem] ++ delete bumpedItem todoTasks
    hPutStr tempHandle $ unlines newTodoItems
    hClose handle
    hClose tempHandle
    removeFile fileName
    renameFile tempName fileName 
```

尝试编译它会给我以下错误：

```
$ ghc --make todo
[1 of 1] Compiling Main             ( todo.hs, todo.o )

todo.hs:16:15:
    No instance for (Eq ([[Char]] -> IO ()))
      arising from a use of `=='
    Possible fix:
      add an instance declaration for (Eq ([[Char]] -> IO ()))
    In the expression: result == Nothing
    In a stmt of a 'do' block:
      if result == Nothing then
          errorExit
      else
          do { let (Just action) = ...;
               action args }
    In the expression:
      do { (command : args) <- getArgs;
           let result = lookup command dispatch;
           if result == Nothing then
               errorExit
           else
               do { let ...;
                    .... } } 
```

我不明白为什么会这样，因为`lookup`返回`Maybe a`，我肯定可以与之比较`Nothing`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T17:48:45.830

运算符的类型[`(==)`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3a-61--61-)是`Eq a => a -> a -> Bool`。这意味着您只能比较对象的相等性，如果它们的类型是`Eq`. 并且函数不能用于相等性：你会怎么写`(==) :: (a -> b) -> (a -> b) -> Bool`？没有办法做到这一点。¹ 虽然很清楚`Nothing == Nothing`and `Just x /= Nothing`，但情况是`Just x == Just y`当且仅当`x == y`; 因此，除非您可以`(==)`为.`Maybe a``(==)``a`

这里最好的解决方案是使用模式匹配。一般来说，我发现自己`if`在 Haskell 代码中没有使用那么多语句。你可以改为写：

```
main = do (command:args) <- getArgs
          case lookup command dispatch of
            Just action -> action args
            Nothing     -> errorExit 
```

由于几个原因，这是更好的代码。首先，它更短，这总是很好。其次，虽然您根本*不能*在这里使用`(==)`，但假设它`dispatch`改为持有列表。该`case`语句仍然有效（恒定时间），但比较`Just x`变得`Just y`非常昂贵。其次，您不必重新绑定`result`; `let (Just action) = result`这使代码更短，并且不会引入潜在的模式匹配失败（这很糟糕，尽管您知道它不会在这里失败）。

* * *

**1:** : 事实上，`(==)`在保持引用透明性的同时写是不可能的。在 Haskell 中，`f = (\x -> x + x) :: Integer -> Integer`应该`g = (* 2) :: Integer -> Integer`被认为是平等的，因为`f x = g x`对于所有人`x :: Integer`；但是，以这种方式证明两个函数相等通常是不可判定的（因为它需要枚举无限数量的输入）。而且你不能只说它`\x -> x + x`等于语法上相同的函数，因为这样你就可以区分它们`f`，`g`即使它们做同样的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T17:38:25.777

只有当有一个实例时，该`Maybe a`类型才有一个实例——这就是你得到的原因（一个函数不能与另一个函数进行比较）。`Eq``a``No instance for (Eq ([[Char]] -> IO ()))`

也许[也许功能](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:maybe)是您正在寻找的。我目前无法对此进行测试，但应该是这样的：

```
maybe errorExit (\action -> action args) result 
```

也就是说，如果`result`是`Nothing`，则返回`errorExit`，但如果`result`是`Just action`，则将 lambda 函数应用于`action`。

# java - Canvas (Java) 中相同动画 GIF 的多个实例

> ID：11745804
> 
> 赞同：3
> 
> 时间：2012-07-31T17:31:15.197
> 
> 标签：java, swing, gif, graphics2d, animated-gif

所以我正在制作一个游戏，你可以在你的角色所在的位置放置炸弹。当炸弹显示并最终爆炸时，每个炸弹都与一个 GIF 图像相关联（想想炸弹人）。

问题是，当我试图在屏幕上绘制多个炸弹时，它是从 GIF 的最后一帧开始绘制的。经过调查，我找到了重置 GIF cicle 的方法 image.flush() 但现在的问题是，每次我在屏幕上绘制第二个炸弹时，屏幕上所有以前的炸弹都会重置 GIF 周期。

这是每个炸弹的构造函数：

```
public Tnt(int x, int y){
    this.x = x;
    this.y = y;
    ImageIcon ii = new ImageIcon("src/main/resources/modelObjects/tnt.gif");
    image = ii.getImage();
    image.flush();
} 
```

我创建的每个炸弹都进入一个 ArrayList (listTnt) 并在 6 秒后被删除，所以我只绘制已经激活的炸弹。

这是我的绘图方法：

```
public void draw(Graphics2D g2d, JPanel board){
    for(Tnt tnt: listTnt){          
        g2d.drawImage(tnt.getImage(), tnt.getX(), tnt.getY(), board);
    }
} 
```

编辑：似乎问题出在 ImageIcon 上，因为它使用 Toolkit.getImage 重用了图像。相反， Toolkit.createImage 创建一个不可重用的图像。

这是我的 Tnt 新构造函数，效果很好：

```
public Tnt(int x, int y){
    this.x = x;
    this.y = y;
    Toolkit t = Toolkit.getDefaultToolkit ();
    image = t.createImage("src/main/resources/modelObjects/tnt.gif");
} 
```

我`image.flush()`现在什至不需要。谢谢你们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T17:46:15.433

底层`Image`在每个`ImageIcon`. 从[OpenJDK 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/javax/swing/ImageIcon.java#147)来看，这似乎是因为每个都只是通过[Toolkit.getImage](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#getImage(java.lang.String))请求 Image 。然而，这种方法有一个很好的警告，它解释了手头的问题：

> 底层工具包尝试将具有相同文件名的多个请求解析为相同的返回图像。

相反，您应该`ImageIcon`完全跳过该步骤（因为首先不必要地使用 Swing 类是不合适的），而是调用[Toolkit.createImage](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#createImage(java.lang.String))，它在文档中指出：

> 返回的 Image 是一个新对象，不会与此方法的任何其他调用者或其 getImage 变体共享。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T20:46:24.030

由于我不知道如何解决这个问题，我尝试了@super_ 解决方案，它工作得很好。我为任何想要示例的人分享代码。+1 给他

```
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class TestAnimatedGif {

    private static final int IMAGE_COUNT = 9;

    protected void initUI() {
        JFrame frame = new JFrame(TestAnimatedGif.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel();
        frame.add(panel);
        frame.setSize(600, 400);
        frame.setVisible(true);
        final Timer t = new Timer(1000, null);
        t.addActionListener(new ActionListener() {

            int count = 0;

            @Override
            public void actionPerformed(ActionEvent e) {
                if (count < IMAGE_COUNT) {
                    try {
                        JLabel image = new JLabel(new ImageIcon(Toolkit.getDefaultToolkit().createImage(
                                new URL("http://www.sitevip.net/gifs/bomba/BOMB-B_animado.gif"))));
                        panel.add(image);
                        count++;
                        panel.revalidate();
                        panel.repaint();
                        System.err.println("image added");
                    } catch (MalformedURLException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }
                } else {
                    t.stop();
                }
            }
        });
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestAnimatedGif().initUI();
            }
        });
    }

} 
```

# xcode - Mountain Lion 和 AuthorizationExecuteWithPrivileges 警告

> ID：11745805
> 
> 赞同：3
> 
> 时间：2012-07-31T17:31:16.803
> 
> 标签：xcode, cocoa, dyld

当我调用 AuthorizationExecuteWithPrivileges 时，我现在更新了我的 OSX 和 xCode

我收到日志消息：

```
dyld: DYLD_ environment variables being ignored because main executable (/usr/libexec/security_authtrampoline) is setuid or setgid 
```

那是什么，我可以修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:16:05.930

这个问题是从 10.7 开始的。但在 10.8 中，他们可能进行了更改，导致此功能无法正常工作。无论如何，[这里](https://stackoverflow.com/questions/6841937/authorizationexecutewithprivileges-is-deprecated)有 2 种可能的解决方案。我现在也在解决这个问题。我不知道提出的解决方案是否是唯一正确的。如果我找到解决方案，我会更新你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T11:59:15.960

可悲的是，这个非常方便的类[https://github.com/sveinbjornt/STPrivilegedTask](https://github.com/sveinbjornt/STPrivilegedTask)依赖于 AEWP 功能，我不能在 ML 上使用它……为 ML 更新它会非常酷！

# java - Javafx 窗格与区域？

> ID：11745806
> 
> 赞同：17
> 
> 时间：2012-07-31T17:31:19.140
> 
> 标签：java, javafx, javafx-2

根据文档，Region 和 Pane 都会将任何可调整大小的子节点调整为其首选大小，但不会重新定位它们。

所以我看不出这两个容器之间的差异在哪里以及何时使用一个或另一个。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-31T18:30:09.190

`Region`是具有子节点的组件的超类。

不同之处在于`Region`不允许通过公共 API 操纵其子级。该`Region.getChildren()`方法受保护：

```
new Region().getChildren().add(...); // doesn't compile
new Pane().getChildren().add(...); // works 
```

这是为什么？

因为`Region`专用于组件开发人员，它允许他们选择是否要允许 API 用户直接与孩子一起工作（如`Pane`、`HBox`等）或不允许（如图表）。

# html - 第一个孩子不在wordpress页脚导航上工作

> ID：11745810
> 
> 赞同：1
> 
> 时间：2012-07-31T17:31:26.337
> 
> 标签：html, css, wordpress, html-lists, css-selectors

嘿伙计们，我正在尝试在 WordPress 主题的页脚上创建水平导航，但遇到了几个问题。我最初尝试将其作为`display:inline`水平的，但我希望列表中的每个元素都有一个项目符号，但第一个元素除外。所以我做了一些研究并想出了以下代码

```
.menu-footer li{
    list-style-type:none;
    float:left;
    margin-right:5px;
    margin-left:5px;
}

.menu-footer li:before {
    content:'\2022';
}

.menu-footer #menu-footer-navigation li:first-child {
    list-style-type:none !important;
} 
```

然而，第一个孩子并没有像我认为的那样工作。我尝试过移动元素等，但没有奏效。该列表是通过 WordPress 后端动态创建的，无论我尝试什么，它都没有按照我的意愿去做，这就是我选择这种方式并寻求帮助的原因。我发现的大多数解决方案都来自这个站点，但还没有找到适合我情况的解决方案。如果您正在寻找参考点，您可以在[http://goml.xxplosions.com](http://goml.xxplosions.com/)上查看该站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:35:09.707

尝试将其添加到底部。

```
.menu-footer li:first-child:before {
content:'';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:36:18.403

您的第二条规则在每个列表项前面创建一个包含项目符号的伪元素。要从第一个元素中删除它，您需要覆盖该确切规则：

```
.menu-footer li:first-child:before {
    content: none;
} 
```

阅读有关伪元素的更多信息： [https ://developer.mozilla.org/en/CSS/Pseudo-elements](https://developer.mozilla.org/en/CSS/Pseudo-elements) [https://developer.mozilla.org/en/CSS/:before](https://developer.mozilla.org/en/CSS/%3abefore)

# node.js - nodejs：节点模块与单例类

> ID：11745815
> 
> 赞同：5
> 
> 时间：2012-07-31T17:32:04.633
> 
> 标签：node.js, refactoring, domain-driven-design, node-modules

上一页：我读过[NodeJS 模块与类](https://stackoverflow.com/questions/6914690/nodejs-modules-vs-classes)，但这更具体。

作为 Node 中一些重构的一部分，我有几个应用程序服务（在 DDD 术语中），它们在技术上被实现为 Node 模块。

因为（在 DDD 世界中，可能是其他任何事情）应用程序服务应该是单例的，并且由于 Node 模块保证只有 1 个“实例”，所以在我看来这是一个合适的选择（模块可以简单地实现'单身'）

除了纯粹的观点之外，有什么理由我应该考虑将这些应用程序服务重构为适当的单例类（只要在 javascript 中可以保证“单例”）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T05:27:12.073

查看[Node 的模块缓存注意事项](http://nodejs.org/api/modules.html#modules_module_caching_caveats)，了解模块的“单一性”会崩溃的情况。

如果您总是在单个包中使用文件路径（以 、 或 开头）引用您的单例模块，`./`那么`../`您是安全的。`/`

如果您的服务被包装在一个包中以供其他模块使用，那么您最终可能会得到多个单例实例。

假设我们发布了这个甜蜜的服务库：

```
service-lib/
⌞ package.json
⌞ service.js

service.js:
  var singleton = {};
  module.exports = singleton; 
```

在这个应用程序中，`server.js`将`other.js`获得我们服务的**不同**实例：

```
app/
⌞ server.js
⌞ node_modules/
  ⌞ service-lib/
    ⌞ service.js
  ⌞ other-package/
    ⌞ other.js
    ⌞ node_modules/
      ⌞ service-lib/
        ⌞ service.js 
```

虽然这个应用程序将**共享**一个实例：

```
app/
 ⌞ server.js
 ⌞ node_modules/
    ⌞ service-lib/
       ⌞ service.js
    ⌞ other-package/
       ⌞ other.js 
```

The same `npm install`ing the same `app` could result in either directory structure depending on the versions of the dependencies. Node's [folders doc](https://npmjs.org/doc/folders.html#Cycles-Conflicts-and-Folder-Parsimony) has the details.

# c# - Hook与主程序通信

> ID：11745817
> 
> 赞同：1
> 
> 时间：2012-07-31T17:32:06.070
> 
> 标签：c#, hook, dll-injection

有很多文章介绍了如何编写挂钩以将某些特定功能添加到其他程序或更改程序行为。但我不明白我应该怎么做才能将数据从钩子发送到我的程序。

我的英语不太好，所以我写了一个小例子：有我的应用程序（myApp）而不是我的应用程序（notMyApp）。我想从 notMyApp 的聊天窗口访问 myApp 文本。例如，我可以使用[MHOOK](http://codefromthe70s.org/mhook23.aspx)为 notMyApp 编写钩子。问题是 tom 如何将聊天文本从 hook 发送到 myApp？

我应该使用管道还是其他东西？

PS我更喜欢使用C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:25:39.237

[进程间通信](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)有几种方法。

1.  管道（我的选择）
2.  共享内存/文件映射（您可以将“页面文件”的同一区域映射到两个进程）
3.  Windows 消息`WM_COPYDATA`（缓慢，但最简单）

等等...阅读 msdn 文章了解更多信息

# jquery - 确定哪个元素先出现

> ID：11745819
> 
> 赞同：0
> 
> 时间：2012-07-31T17:32:12.013
> 
> 标签：jquery

我有一个带有对象 id 的数组：

```
one
two
there
etc.. 
```

我有一个很长的对象列表：

```
<div id="container">
  <input type="text" id="one" />
  <input type="text" id="two" />
  <input type="text" id="three" />
</div> 
```

这不是实际的 html 代码，只是一个简化版本。

现在我的 id 数组不断变化，我的问题是如何找出该数组中的哪个元素是`#container`div中的第一个元素

例如，如果我有这个订单：

```
{
  email 
  name
  date
} 
```

还有这个 html 对象列表

```
<div id="container">
  <input type="text" id="name" />
  <input type="text" id="last_name" />
  <input type="text" id="email" />
  <input type="text" id="date" />
</div> 
```

`name`将是第一个，但在某些情况下，在该数组中`name`item 将不存在，因此它并不总是名称，我希望这有任何意义 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:35:44.540

这将遍历元素，从头到尾，并显示每个元素的 ID。

```
$('#container input').each(function() {
     alert($(this).attr('id'));
}) 
```

`$('#container input').eq(0)`还将引用第一个输入元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:36:22.353

```
var firstId = $("#container").first().attr("id"); 
```

我认为这段代码不正确。也许这不是：

```
var firstId = $("#container").children().first().attr("id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:52:04.827

如果要将数组顺序与文档顺序同步，可以这样做：

```
<div id="container">
  <input type="text" id="name" />
  <input type="text" id="last_name" />
  <input type="text" id="email" />
  <input type="text" id="date" />
</div>​ 
```

JS：

```
var arr = ["email", "name", "date"];
var elems = $("#" + arr.join(", #") );

arr = $.map($.unique(elems.get()), function(v,i) {
    return v.id;
});

console.log(arr);
//["name", "email", "date"] ​​​​​​ same order as they are in the document 
```

[http://jsfiddle.net/KKz9U/1/](http://jsfiddle.net/KKz9U/1/)

将[`$.unique`](http://api.jquery.com/jQuery.unique/)元素排序为与文档中相同的顺序

# c++ - TBB 中的并行执行冻结

> ID：11745830
> 
> 赞同：0
> 
> 时间：2012-07-31T17:32:43.133
> 
> 标签：c++, tbb

所以这就是问题所在。我有一段代码，当只在一个线程中执行时，它工作得很好。但是一旦使用 TBB 调用此代码，它就会冻结（或者我只是没有耐心等待它完成！）。

代码太长了，想象一下：

```
class TBB_Test
{
public:
  TBB_Test(void) { /* initialize the stuff */ }

  void operator() (tbb::blocked_range<int> &r) const
  {
    for (int i = r.begin(); i != r.end(); ++i)
    {
      // compute very awesome stuff!
    }
  }
}; 
```

所以，当我按顺序执行它时：

```
TBB_Test() (tbb::blocked_range<int>(0, max_value)); 
```

它有效，但并行一次：

```
tbb::parallel_for(tbb::blocked_range<int>(0, max_value, grainsize), TBB_Test()); 
```

它冻结而不是比顺序更快。

什么会导致这样的事情？两个线程试图在同一个地方读或写？在我们的例子中，写作不应该发生！我们还有其他情况，多个线程可能读取相同的地址并且它不会冻结！

任何的想法？

在 VStudio 中，至少在那里，在调试时，只需激活，这样调试器就会在所有类型的异常中停止……很长，但是正确的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:13:26.877

所以很自然，这是一个内存分配问题。

不好的解决方案是在分配内存的地方使用互斥锁。这很糟糕，因为你最终会让你的 X 处理器运行到最大......主要是在等待互斥体。

我们使用的最后一种方法是每个切片都有其一个内存分配方案。然后，通过使用“连接”，我们在计算后将数据合并在一起。所以这样处理器在没有任何互斥锁的情况下运行。但这会导致需要更多的内存。但只要线程之间没有重复，你应该没问题！

所以，吸取教训！

# iis-7 - 如何更正安全证书名称与站点名称不匹配？

> ID：11745835
> 
> 赞同：3
> 
> 时间：2012-07-31T17:33:07.083
> 
> 标签：iis-7, iis-7.5, ssl-certificate

我的 IIS 站点出现浏览器问题。他们弹出一个安全警告，指出安全证书与站点名称不匹配。我正在使用自签名证书进行测试。我查看证书。它有名字。

> DnsName.mydomain.com

但浏览器正在使用

> MachineName.mydomain.com

有一个 CNAME 条目将 DnsName.mydomain.com 指向 MachineName.mydomain.com。

即便如此，它们显然是不同的。您能否告诉我如何获得名为 MachineName.mydomain.com 的新自签名证书，以及如何将其安装在我的测试 Web 服务器上，以便浏览器可以使用任一名称而不会收到此安全警告？

我可以让浏览器从我的网络服务器安装任何证书和自签名证书，这不是问题。问题是警告。这是我的意思的屏幕截图。

![安全警报对话框](../Images/2cdfc3b9d9cc97961cc070817047bf6d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:36:45.120

每个站点只能拥有一个证书。

有几种严厉的方法可以解决这个问题：

*   完全复制您的网站并在每个网站上都有一个证书
*   使用 SSL 加速并在负载均衡器上有两个不同的外部 IP，它们都指向同一个内部。

由于您已经进行了自签名，因此还有一种简单的方法：只需通配符 (*.mydomain.com)。[这里解释了在 Windows 机器上生成它，这里解释了](http://www.howtogeek.com/107415/it-how-to-create-a-self-signed-security-ssl-certificate-and-deploy-it-to-client-machines/)在 [Linux 机器上生成它](https://web.archive.org/web/20150525014639/http://hotkoehls.com/2012/02/create-self-signed-wildcard-ssl-certificate)。

如果您真的不想这样做，我只需从一个 URL 强制重定向到另一个 URL，而不是 CNAME 别名。

# .net-cf-3.5 - 从 sqlclient 错误消息中获取更多信息

> ID：11745844
> 
> 赞同：0
> 
> 时间：2012-07-31T17:33:53.440
> 
> 标签：.net-cf-3.5, mysql

我使用微软的 sqlclient dll 将我的 windows 移动应用程序直接连接到 ms-sql 服务器。有时我在尝试从服务器获取一些数据时收到此错误：

```
System.Data.SqlClient.SqlException: SqlException
at System.Data.SqlClient.SqlConnection.OnError()
at System.Data.SqlClient.SqlInternalConnection.OnError()
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
at System.Data.SqlClient.TdsParser.Run()
at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
at System.Data.SqlClient.SqlDataReader.get_MetaData()
at System.Data.SqlClient.SqlCommand.ExecuteReader()
at System.Data.SqlClient.SqlCommand.ExecuteReader() 
```

每次我遇到这样的错误时，我都需要尝试其他一些事情，有时连接字符串不好，或者网络配置不正确或任何其他随机问题。

有没有办法让我从程序中获得更多信息，这样我就不必浪费几个小时来弄清楚可能会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:36:20.213

这基本上只是堆栈跟踪。您应该能够获得包含详细信息的`Message`属性。`SqlException`在某些情况下，您将不得不查看`InnerException`以获得有趣的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:40:30.267

好的，我找到了答案......我改变了`Catch ex As Exception`：`Catch ex As SqlException`

现在，我在消息中很好地显示了特定错误。

# php - Facebook 登录弹出窗口 - 重定向父页面

> ID：11745847
> 
> 赞同：0
> 
> 时间：2012-07-31T17:34:17.773
> 
> 标签：php, javascript, facebook, facebook-authentication

我正在从[此处](https://developers.facebook.com/docs/authentication/server-side/)实现页面底部的示例，并将脚本更改为：

```
echo("<script> window.open('" . $dialog_url . "');</script>"); 
```

代替：

```
echo("<script> top.location.href='" . $dialog_url . "'</script>"); 
```

这样登录就会在新的弹出窗口中打开。如何告诉弹出窗口重定向父页面？现在重定向发生在子页面而不是父页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:02:13.290

使用此代码重定向父窗口

```
<script type="text/javascript">
window.opener.location = 'your url'; window.close();
</script> 
```

此代码应在您的弹出窗口中使用。
祝你好运。

# c++ - 如何将结构的地址分配给另一个结构？

> ID：11745850
> 
> 赞同：2
> 
> 时间：2012-07-31T17:34:27.463
> 
> 标签：c++, struct, object-address

可以说我有

```
struct someStruct
{
    int a;
}; 
```

和2个班。

在第一类的方法中，我创建了一个结构实例：

```
someStruct structName; 
```

现在我想将此结构的地址传递给另一个类的构造函数

```
std::auto_ptr<2ndClass> 2ndClass_ (new 2ndClass(structName)); 
```

我想在这里使用 2ndClass 中更改的结构值 - 请阅读下文...

第二类有：

标题：

```
...
class 2ndClass...
... 
private:
someStruct &structName2;
public:
__fastcall 2ndClass(someStruct &structName);
... 
```

cp:

```
__fastcall 2ndClass::2ndClass(someStruct &structName)
    : structName2(structName)
{
... 
```

这显然会复制 structName。

我的问题是：如何从 structName 为 structName2 分配地址，以便我可以读取和写入结构，然后在离开第二类后在第一类中使用这些值？如何在不使用指向结构的指针的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:36:41.530

> 这显然会复制 structName。

不，它没有。您通过引用传递，并且您的成员是一个引用，因此`2ndClass::structName2`将引用您作为参数传递给构造函数的确切对象。

> 问题是如何从 structName 为 structName2 分配地址，以便我可以读取和写入结构，然后在离开第二类后在第一类中使用这些值。

您不需要这样做，因为您使用的是参考资料。在函数签名中，`&`代表引用，而不是地址。所以你不传递地址，而是传递对象本身。

**请注意**，如果原始结构超出范围，您将有一个悬空引用，因此请务必处理这种情况。如果内存没有被覆盖，它似乎可以工作，但这是未定义的行为。

# c++ - 在运行时从内存加载动画光标

> ID：11745851
> 
> 赞同：9
> 
> 时间：2012-07-31T17:34:34.063
> 
> 标签：c++, windows, animation, winapi, mouse-cursor

我想从内存中加载一个以 .ani 格式存储的动画光标，它被描述为 RIFF 存档/容器，而不将内存写入临时文件。到目前为止，我能够在[CreateIconFromResourceEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648061%28v=vs.85%29.aspx) [LookupIconIdFromDirectoryEx的帮助下解析 .ani 文件结构并将各个帧加载为普通图标](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648074%28v=vs.85%29.aspx)

难以证明的问题之一是这些帧的实际组成和动画数据（jiffy-rate 等），因为 Windows API 中似乎没有这样做的条目。有关该主题的文档或书面知识似乎仅限于从内存中加载非动画图标/光标。

类似的问题，例如[“从资源加载嵌入式动画光标”](https://stackoverflow.com/questions/3498898/load-an-embedded-animated-cursor-from-the-resource)表达了从可嵌入资源加载动画光标的愿望。但是，我也无法从中重现可行的解决方案。部分原因是 Visual Studio 2008 和 2010 中的资源编译器不支持 .ani（仅 ico 和 cur）文件，因此嵌入它只会导致原始文件中的字节 1:1 副本，而不是 . cur 和 .ico 文件，它们被分解为多个资源。如两个答案所示，随后对 CreateIconFromResource 的调用不起作用，因为它期望的数据是图标存档中单个指令的图标/光标数据，而不是基于 RIFF 的文件结构。

总而言之，我对有关动画光标（在内存中）的结构或其他相关指针的任何信息感兴趣，这些信息可以帮助我实现我的目标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T00:28:01.493

在重新评估从 mfc 指出的可嵌入资源加载动画光标后，我找到了一个解决方案，允许我从任意内存地址加载光标。

来自可嵌入资源的数据和从文件读入内存的数据完全相同。因此，它建议 CreateIconFromResource*也应该*在正常的常规内存上工作。但是，有一个根本区别。可嵌入资源的内存驻留在可执行文件的特殊部分中，这些部分通常填充到最近的 4096 字节边界。在运行时分配的内存包含垃圾值。

现在，我发现可行的解决方案通过简单地分配零填充字节的保护带来利用这一点。在我自己的测试用例中，我发现 8 是最小值，它也恰好是 riff 容器中块的大小。巧合？我怀疑这是一个错误，由于它在 dll/可执行文件中的对齐限制，该算法恰好适用于可嵌入资源。

```
const int guardbandSize = 8;
FILE* fs = fopen("action.ani", "rb");
fseek(fs, 0,SEEK_END); int dwSize = ftell(fs); fseek(fs, 0,SEEK_SET);   
char* memory = new char[dwSize + guardbandSize];
fread(memory, 1, dwSize, fs); memset(memory + dwSize, 0, guardbandSize);
fclose(fs);
cursor = (HCURSOR)CreateIconFromResource((PBYTE)memory,dwSize,FALSE,0x00030000);        
delete memory; 
```

以下是加载动画光标的各种方法的概述。

```
#include <Windows.h>
#include <stdio.h>
#include "resource2.h"

void* hWnd;
bool  visible = true;
bool  running = true;
LRESULT CALLBACK WndProcInternal(   HWND hWnd, UINT uMsg, WPARAM    wParam, LPARAM  lParam) ;
HCURSOR cursor = 0;

void main()
{   
    //Setup configuration
    const int Width  = 640, Height = 480;
    const int Method = 4;

    //Setup window class 
    WNDCLASS wcd;
    wcd.style           = CS_PARENTDC | CS_HREDRAW | CS_VREDRAW | CS_OWNDC; 
    wcd.lpfnWndProc     = (WNDPROC)WndProcInternal;         
    wcd.cbClsExtra      = 0;                                
    wcd.cbWndExtra      = 0;                                
    wcd.hInstance       = GetModuleHandle(NULL);            
    wcd.hIcon           = LoadIcon(NULL, IDI_WINLOGO);      
    wcd.hCursor         = LoadCursor(NULL, IDC_ARROW);      
    wcd.hbrBackground   = (HBRUSH)COLOR_BACKGROUND;                             
    wcd.lpszMenuName    = NULL;                             
    wcd.lpszClassName   = TEXT("AnimatedIcon");             

    //Register the window class
    if(!RegisterClass(&wcd)) 
    {
        MessageBox(NULL, TEXT("Window Registration Failed!"), TEXT("Error!"),MB_ICONEXCLAMATION | MB_OK);
        FatalExit(-1);
    }

    //Create a window
    if (!(hWnd=CreateWindowEx(WS_EX_CLIENTEDGE, TEXT("AnimatedIcon"), TEXT("AnimatedIcon"), 
        WS_VISIBLE | WS_CAPTION | WS_MINIMIZEBOX | WS_THICKFRAME | WS_MAXIMIZEBOX | WS_SYSMENU,
        0, 0, Width, Height, NULL, NULL, NULL, NULL)))                          
    {
        MessageBoxA(NULL,"Window Creation Error.","ERROR",MB_OK|MB_ICONEXCLAMATION);
        FatalExit(-1);
    }   

    if( Method == 1 )
    {
        //Method 1: Load cursor directly from a file
        cursor = LoadCursorFromFileA("action.ani");
    }
    if( Method == 2 )
    {
        //Method 2: Load cursor from an resource section in the executable.
        cursor = LoadCursor(0, MAKEINTRESOURCE(IDR_ANICURSORS1));
    }
    if( Method == 3 )
    {
        //Method 3: Manually locate the resource section in the executable & create the cursor from the memory.
        HINSTANCE hInst=GetModuleHandle(0);
        HRSRC hRes=FindResourceA(hInst,MAKEINTRESOURCEA(IDR_ANICURSORS1),"ANICURSORS");
        DWORD dwSize=SizeofResource(hInst,hRes);
        HGLOBAL hGlob=LoadResource(hInst,hRes);
        LPBYTE pBytes=(LPBYTE)LockResource(hGlob);
        cursor = (HCURSOR)CreateIconFromResource(pBytes,dwSize,FALSE,0x00030000);
    }
    if( Method == 4 )
    {
        //Method 4: Load the cursor from a file into memory & create the cursor from the memory.
        const int guardbandSize = 8;
        FILE* fs = fopen("action.ani", "rb");
        fseek(fs, 0,SEEK_END); int dwSize = ftell(fs); fseek(fs, 0,SEEK_SET);   
        char* memory = new char[dwSize + guardbandSize];
        fread(memory, 1, dwSize, fs); memset(memory + dwSize, 0, guardbandSize);
        fclose(fs);
        cursor = (HCURSOR)CreateIconFromResource((PBYTE)memory,dwSize,FALSE,0x00030000);        
        delete memory;
    }

    //Set the cursor for the window and display it.
    SetClassLong((HWND)hWnd, GCL_HCURSOR, (LONG)cursor);        
    while (running)     
    {
        MSG wmsg;
        if (PeekMessage(&wmsg, (HWND)hWnd, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&wmsg);
            DispatchMessage(&wmsg);
        }           
    }   
}

LRESULT CALLBACK WndProcInternal(   HWND hWnd, UINT uMsg, WPARAM    wParam, LPARAM  lParam) 
{
    if( uMsg == WM_DESTROY )
    {
        PostQuitMessage(1); 
        running = false;
    }

    return (long)DefWindowProc((HWND)hWnd,uMsg,(WPARAM)wParam,(LPARAM)lParam);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T21:32:15.223

将动画光标导入为自定义资源。给它一个文本名称，例如“MyType”。然后加载光标：

```
HCURSOR hCursor = LoadAnimatedCursor(IDR_MYTYPE1, _T("MyType"));

 /* ======================================================== */
HCURSOR LoadAnimatedCursor(UINT nID, LPCTSTR pszResouceType)
{
    HCURSOR hCursor = NULL;
    HINSTANCE hInstance = AfxGetInstanceHandle();
    if (hInstance)
    {   HRSRC hResource = FindResource(hInstance, MAKEINTRESOURCE(nID), pszResouceType);
        DWORD dwResourceSize = SizeofResource(hInstance, hResource);
        if (dwResourceSize>0)
        {   HGLOBAL hRsrcGlobal = LoadResource(hInstance, hResource);
            if (hRsrcGlobal)
            {   LPBYTE pResource = (LPBYTE)LockResource(hRsrcGlobal);
                if (pResource)
                {   hCursor = (HCURSOR)CreateIconFromResource(pResource, dwResourceSize, FALSE, 0x00030000);
                    UnlockResource(pResource);
                }
                FreeResource(hRsrcGlobal);
            }
        }
    }
    return hCursor;
} 
```

# html-agility-pack - HTML 敏捷包中的 Wingding 问题

> ID：11745853
> 
> 赞同：1
> 
> 时间：2012-07-31T17:34:43.123
> 
> 标签：html-agility-pack

我在使用 HTML Agility Pack 时遇到问题。我有一个 html 文件。我所做的就是使用 HtmlDocument 实例加载该文件，并替换文档中图像的 url。下面给出的是使用的代码：

```
HtmlDocument htmlDoc = new HtmlDocument();
            htmlDoc.OptionFixNestedTags = true;

            htmlDoc.Load(filePath);
            HtmlNodeCollection images = htmlDoc.DocumentNode.SelectNodes("//img");
            string source;
            string imageName;
            string newSource;
            if (null != images && 0 < images.Count)
            {
                foreach (HtmlNode image in images)
                {
                    source = image.Attributes["src"].Value;
                    imageName = Path.GetFileName(source);                        
                    newSource = imageUris[imageUris.IndexOf(imageName)];
                    if (null != newSource)
                    {
                        image.Attributes["src"].Value = newSource;
                    }
                }
            }
            htmlDoc.Save(filePath); 
```

问题是 Html 文档包含一个空复选框和一个使用wingdigns 字体创建的带有“x”的复选框。保存文件后，带有“x”的复选框变成了一些奇怪的字符，例如向左的箭头，然后是圆圈中的 1，然后是时钟和带有 ~ 的数字 A。空复选框也会发生类似的情况。

有人可以建议一些解决方案来保留复选框吗？

# asp.net - 在 ASP.NET 中使用 FormsAuthentication 进行身份验证

> ID：11745860
> 
> 赞同：2
> 
> 时间：2012-07-31T17:35:11.670
> 
> 标签：asp.net

我正在使用`FormsAuthentication`and`ASP.NET Memberships and Roles`在我的 ASP.NET 项目中。我有一些 aspx 文件只能由经过身份验证的用户查看/访问。我想我可以使用以下两种方法之一来做到这一点。

1.  配置 web.config 文件。允许具有“管理员”和“成员”角色的用户访问这些 apsx 文件，并拒绝所有其他匿名用户。

2.  在这些 apsx 文件的 page_load 事件中，只需检查当前用户是否已通过身份验证`HttpContext.Current.User.Identity.IsAuthenticated`

我想知道这两种方法对于 apsx 文件是否等效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:38:19.477

它们不是等价的。方法 1\. 仅授予“admin”和“members”角色的访问权限。如果您添加其他角色，他们将无权访问。方法 2 允许任何登录用户访问数据。

我认为首选的方法是根据应该访问它们的角色来组织目录中的 aspx 文件。然后在 web.config 中配置对目录的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:47:08.107

正如其他人所提到的，这并不等同。但是，即使你修改了“2”。要检查角色，这是一种更糟糕的方法，因为您引入了自定义代码来处理可以以标准方式轻松处理的内容。

还要考虑另一种方法，在其中创建一个单独的**文件夹**，将您的受限页面放在那里并创建一个辅助`web.config`来包含：

```
...
<system.web>
   <authorization>   
       <allow roles="admin,members" />
       <deny users="*" />
   </authorization>   
</system.web> 
```

这样，您需要对文件夹、页面、样式、图像中的所有资源进行授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:38:34.993

您好，您必须区分身份验证和授权

1.  “HttpContext.Current.User.Identity.IsAuthenticated”是：身份验证

2.  “允许具有'admin'和'members'角色的用户”是：授权，认证后我们执行授权

你可以阅读这篇文章：[http ://www.duke.edu/~rob/kerberos/authvauth.html](http://www.duke.edu/~rob/kerberos/authvauth.html)

身份验证是系统可以安全地识别其用户的机制。身份验证系统提供了以下问题的答案：

```
Who is the user?
Is the user really who he/she represents himself to be? 
```

授权系统提供了以下问题的答案：

```
Is user X authorized to access resource R?
Is user X authorized to perform operation P?
Is user X authorized to perform operation P on resource R? 
```

# javascript - 使用 jquery 查看选择器是否拉出任何 div，找到特定于示例页面的 div

> ID：11745861
> 
> 赞同：0
> 
> 时间：2012-07-31T17:35:22.650
> 
> 标签：javascript, jquery, html, selector

我对 jquery 很陌生，这是我需要帮助的：使用 jquery 来查看选择器是否拉出了任何 div，找到特定于示例页面的 div。查看第一个条件是否为假，如果是则重定向到示例页面。谢谢你的帮助！

jQuery部分代码：“

```
 $('.assessment-start').click(function () {

        $('#startAssessmentDialog').empty();

        //block
        $('#startAssessmentDialog').block(_blockUISettings);
        //block
        var link = $('#startAssessmentDialog').attr('link');

        AjaxUtil.Services.PageProxy.SendData(link, GLOBAL._HTTPVerbs.GET, {},
            function (data) {
                var $data = $(data);
                $('#startAssessmentDialog').html($data.find('#surveyContainer'));
                $('div[name*="*"]').val('*');</script>

                // hide the unmapped capability areas
                $("#unmappedCapabilityAreas").hide();
                // unblocking
                $('#startAssessmentDialog').unblock();
                // unblocking
            },
            function (exception) {
                AjaxUtil.DefaultExceptionHandler(exception);
                $('#startAssessmentDialog').unblock();
            }
        ); 
```

"

html代码：

```
<div link="/Survey/details/@Global.CGSs[Model.CGSVersionID.Value].SelfAssessmentSurveyResourceID/@Model.ResourceID" id="startAssessmentDialog" class="noDisplay">

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:38:19.960

我认为您正在尝试做某事：

```
if( $('#selector').length ) {
  // do something if selector pulled a div
} else {
  // do something if selector not pulled a div
  // for page redirect write following line
  window.location = 'YOUR_URL';
} 
```

`$('#selector').length`将检查`div`with的存在`id=selector`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:39:11.017

查看选择器是否有任何 div：

```
var selector_pulled_divs=($(selector).filter("div").length!=0) 
```

我们需要一些代码来帮助您进一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:40:02.393

您可以检查`nodeName`财产：

```
if ($(".selector").get(0).nodeName == 'div') { \\do stuff } 
```

# jboss7.x - AS7, ClassNotFoundException 尽管更新了 sun.jdk module.xml 和 ear 的 MANIFEST.MF

> ID：11745871
> 
> 赞同：1
> 
> 时间：2012-07-31T17:36:03.717
> 
> 标签：jboss7.x

我需要从 JBoss 7 默认隐藏的 rt.jar 访问 com.sun.image.codec 类。我的 modules/sun/jdk/main/module.xml 已更新为包含 com/sun/image：

```
<module xmlns="urn:jboss:module:1.1" name="sun.jdk">
<resources>
    <!-- currently jboss modules has not way of importing services from
    classes.jar so we duplicate them here -->
    <resource-root path="service-loader-resources"/>
</resources>
<dependencies>
    <system export="true">
        <paths>
            <path name="com/sun/image/codec"/>

            <path name="com/sun/script/javascript"/>
            <path name="com/sun/jndi/dns"/>
            <path name="com/sun/jndi/ldap"/>
            <path name="com/sun/jndi/url"/>
            <path name="com/sun/jndi/url/dns"/>
            <path name="com/sun/security/auth"/>
            <path name="com/sun/security/auth/login"/>
            <path name="com/sun/security/auth/module"/>
            <path name="sun/misc"/>
            <path name="sun/io"/>
            <path name="sun/nio"/>
            <path name="sun/nio/ch"/>
            <path name="sun/security"/>
            <path name="sun/security/krb5"/>
            <path name="sun/util"/>
            <path name="sun/util/calendar"/>
            <path name="sun/util/locale"/>
            <path name="sun/security/provider"/>
            <path name="META-INF/services"/>
        </paths>
        <exports>
            <include-set>
                <path name="META-INF/services"/>
            </include-set>
        </exports>
    </system>
</dependencies> 
```

在我的耳朵里，我有 META-INF/MANIFEST.MF：

```
Manifest-Version: 1.0
Dependencies: sun.jdk export 
```

为了更好地衡量，我在启动时添加了 -Djboss.modules.system.pkgs。

我尝试将 MANIFEST.MF 移动到耳朵内的应用程序罐内，但也没有用。图像处理代码位于无状态会话 bean 中，因此它不在战争中，而是在耳中的罐子里。

我没有看到关于任何官方 JBoss 文档源的清晰的最新文档，或者任何提供解决方案的实用程序，或者专门讨论获得对默认隐藏的 rt.jar 类的访问权限。我已经尝试了各种可以从论坛消息中提取的点点滴滴，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T20:09:26.443

尝试将以下代码作为依赖项添加到您的 jboss-deployment-structure.xml 文件中。

```
<system export="true">
        <paths>
            <path name="com/sun/image/codec"/>
        <paths>
<system export="true"> 
```

# r - 带有 R 的二维热图

> ID：11745872
> 
> 赞同：1
> 
> 时间：2012-07-31T17:36:06.180
> 
> 标签：r

我有一个这种形式的输入文件：

```
 0.35217720               1         201           1
 0.26413283               1         209           1
 1.1665874                1         210           1
 ...
 0.30815500               2         194           1
 0.15407741               2         196           1
 0.15407741               2         197           1
 0.33016610               2         205           1
 ... 
```

其中第一列是标量值，第二列是离散格的 x 坐标，第三列是 y 坐标，最后一列是类时间离散分量。我想在固定时间制作标量值的二维热图。我能怎么做？**编辑：**我不知道如何使用 image() 将第二列和第三列用作 x、y 坐标。

**示例文件：**

```
 7.62939453              1           1           1
  1.3153768               1           2           1
  7.5560522               1           3           1
  4.5865011               1           4           1
  5.3276706               1           5           1
  2.1895909               2           1           1
  0.47044516              2           2           1
  6.7886448               2           3           1
  6.7929626               2           4           1
  9.3469286               2           5           1
  3.8350201               3           1           1
  5.1941633               3           2           1
  8.3096523               3           3           1
  0.34571886              3           4           1
  0.53461552              3           5           1
  5.2970004               4           1           1
  6.7114925               4           2           1
  7.69805908              4           3           1
  3.8341546               4           4           1
  0.66842079              4           5           1
  4.1748595               5           1           1
  6.8677258               5           2           1
  5.8897662               5           3           1
  9.3043633               5           4           1
  8.4616680               5           5           1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:03:24.853

将数据重塑为矩阵，然后使用 heatmap()：

这适用于 R 版本 2.10.1 (2009-12-14)：

```
txt <- textConnection("7.62939453              1           1           1
  1.3153768               1           2           1
  7.5560522               1           3           1
  4.5865011               1           4           1
  5.3276706               1           5           1
  2.1895909               2           1           1
  0.47044516              2           2           1
  6.7886448               2           3           1
  6.7929626               2           4           1
  9.3469286               2           5           1
  3.8350201               3           1           1
  5.1941633               3           2           1
  8.3096523               3           3           1
  0.34571886              3           4           1
  0.53461552              3           5           1
  5.2970004               4           1           1
  6.7114925               4           2           1
  7.69805908              4           3           1
  3.8341546               4           4           1
  0.66842079              4           5           1
  4.1748595               5           1           1
  6.8677258               5           2           1
  5.8897662               5           3           1
  9.3043633               5           4           1
  8.4616680               5           5           1
")
df <- read.table(txt)
close(txt)

names(df) <- c("value", "x", "y", "t")

require(reshape)
dfc <- cast(df[ ,-4], x ~ y)
heatmap(as.matrix(dfc)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:09:51.520

```
## Some copy/pasteable fake data for you (dput() works nicely for pasteable real data)
your_matrix <- cbind(runif(25, 0, 10), rep(1:5, each = 5), rep(1:5, 5), rep(1, 25))

heatmap_matrix <- matrix(your_matrix[, 1], nrow = 5)
## alternatively, if your_matrix isn't in order
## (The reshape method in EDi's answer is a nicer alternative)
for (i in 1:nrow(your_matrix)) {
    heatmap_matrix[your_matrix[i, 2], you_matrix[i, 3]]
}

heatmap(heatmap_matrix) # one option
image(z = heatmap_matrix) # another option
require(gplots)
heatmap.2(heatmap_matrix) # this has fancier preferences 
```

# php - php中的会话功能？防止在同一浏览器中多次登录

> ID：11745873
> 
> 赞同：-2
> 
> 时间：2012-07-31T17:36:09.553
> 
> 标签：php, codeigniter

如果我第一次以**user1身份登录并且第二次以****user2**身份打开新选项卡并登录，则我在会话中遇到问题，用户 2 能够查看 user1 权限的所有页面，如何在 php 中克服这个问题？如果**user2**转到**user1**的第一个选项卡，如何显示第一个作为**登录页面**

 ****```
 $this->is_logged_in();
        $this->clear_cache();
    }
    function is_logged_in() 
    {
        $is_logged_in = $this -> session -> userdata('is_logged_in');
        if (!isset($is_logged_in) || $is_logged_in != true)
        {
            //redirect('/www.XXXX.ae');
        }
    }
    function clear_cache()
    {
        $this->output->set_header("Cache-Control: no-store, no-cache, must-revalidate, no-transform,max-age=0, post-check=0, pre-check=0");
        $this->output->set_header("Pragma: no-cache");
    }

function logout()
    {           
        $this->session->sess_destroy();
        $this->session->set_userdata('userId',"");
        $this->session->set_userdata('password',"");   
        $this->session->set_userdata('role',"");   
        $rurl = $this->session->userdata('rurl');
            redirect($rurl,'refresh');

    }

function login()
    { 
        $this->session->sess_destroy();
        $this->session->set_userdata('userId',"");
        $this->session->set_userdata('password',"");   
        $this->session->set_userdata('role',"");   
        $username   =   $this->input->post('username');
        $password   =   $this->input->post('password');
        .......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:39:10.927

您需要确保销毁会话 ID cookie（我假设您正在使用 cookie 来存储会话 ID）并在用户注销时取消设置 $_SESSION 超全局。

在您的问题中，登录用户是否能够在不注销的情况下直接以其他用户身份登录似乎也有点不清楚。通常在大多数应用程序中，您甚至希望在给用户一个新的登录提示之前进行特定的注销。但是，如果您的应用程序需要允许已登录用户更改登录，您还需要在登录更改时销毁会话 cookie 和变量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-25T00:30:54.057

好的，这里的技巧是在用户登录时隐藏登录表单！那就是当我认为调用您的登录函数的 base_url() 被调用并且用户登录时，它会重定向到应用程序，而不是登录屏幕。我希望这有帮助！****

# magento - 如何处理 Magento 打孔中的消息块

> ID：11745877
> 
> 赞同：2
> 
> 时间：2012-07-31T17:36:17.883
> 
> 标签：magento

我对在整页缓存情况下的magento中如何打孔很感兴趣。这与企业版及其整页缓存和打孔机制的工作方式没有直接关系，只是一般而言。

由于magento生成消息块的方式，我真的很好奇如何在打孔情况下处理消息块？

以前有没有任何magento开发人员解决过这个问题，也许可以向我解释这个特定的块是如何打孔的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:54:05.623

您需要将缓存容器链接到`core/messages`块以防止块缓存。为了达到您的目标，您将需要一个基本模块，或者将其添加到您现有的模块之一中，以最适合您（阅读：更合乎逻辑）的地方为准。

`your_module/etc/`您需要在其中创建文件`cache.xml`：

```
<config>
    <placeholders>
        <your_module_messages>
            <block>core/messages</block>
            <placeholder>SYSTEM_MESSAGES</placeholder>
            <container>Your_Module_Model_PageCache_NoCache</container>
        </your_module_messages>
     </placeholders>
 </config> 
```

`Your_Module_Model_PageCache_NoCache`需要扩展，并且在该`Enterprise_PageCache_Model_Container_Abstract`扩展中，您需要覆盖该`saveCache()`方法并直接返回`$this`而不是触发底层`$this->_saveCache()`. 也许通过更多的逻辑，你可以让这个打孔更聪明一点，但现在假设你永远不知道什么时候有新消息，从而让这个洞一直打开。

```
public function saveCache($blockContent)
{
    return $this;
} 
```

剩下的唯一一件事就是触发 Magento`core/messages`从整体中加载块。您可以通过将以下方法添加到您的类来完成此操作。

```
protected function _renderBlock()
{
    $block = $this->_placeholder->getAttribute('block');
    //$template = $this->_placeholder->getAttribute('template');

    $block = new $block;
    //$block->setTemplate($template);
    $block->setLayout(Mage::app()->getLayout());

    return $block->toHtml();
} 
```

它将从`cache.xml`文件中获取块信息并返回块的输出。由于`core/messages`实际生成了它自己的 HTML，因此您无需提供模板。所以不妨从代码中删除那些注释行。

希望这可以帮助您完成手头的任务！

# django - 访问 django 配置文件中的对象父属性

> ID：11745880
> 
> 赞同：1
> 
> 时间：2012-07-31T17:36:25.350
> 
> 标签：django, django-models, django-profiles

我正在使用具有不同类型配置文件的 django 配置文件。

我的公司简介模型类似于：

```
from django.db import models
from django.contrib.auth.models import User
from accounts.models import UserProfile
from jobs.models import City
from proj import settings
from django.core.mail import send_mail

class Company(UserProfile):
    name=models.CharField(max_length=50)
    short_description=models.CharField(max_length=255)
    tags=models.CharField(max_length=50)
    profile_url=models.URLField()
    company_established=models.DateField(null=True,blank=True)
    contact_person=models.CharField(max_length=100)
    phone=models.CharField(max_length=50)
    address=models.CharField(max_length=200)
    city=models.ForeignKey(City,default=True)

    def send_activation_email(self):
        self.set_activation_key(self.username)
        email_subject = 'Your  '+settings.SITE_NAME+' account confirmation'
        email_body = """Hello, %s, and thanks for signing up for an                                                                                            
example.com account!\n\nTo activate your account, click this link within 48                                                                                       
hours:\n\nhttp://"""+settings.SITE_URL+"/accounts/activate/%s""" % (self.username,self.activation_key)
        send_mail(email_subject,
                  email_body,
                  'acccounts@site.com',
                  [self.email]) 
```

在这里，我从 UserProfile 继承 Company 并在发送激活电子邮件时，我试图使用父类 user 和 userprofile 的属性和方法。它的直接父级是用户配置文件，而用户与用户配置文件具有一对一的关系。所以我尝试调用`self.activation_key`在 userpofile 中定义并调用 self.username ，这是用户类/表的属性，并且在 self.username 上出现错误。

所以似乎我以错误的方式调用 self.username ，那么我该如何访问 self.username ？任何细节都会有所帮助和赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:41:42.637

`Company`继承自`UserProfile`，但正如您所说`UserProfile`，它不继承自`User`- 它与它具有 OneToOne 关系。所以没有这样的事情`self.username`- 只是从`self`to的关系`User.username`。我猜测这种关系是通过一个名为 的字段`user`，在这种情况下你想要`self.user.username`。

# xcode - 让 Matlab 的 mex 在 Mountain Lion 上使用 xcode 4.4

> ID：11745881
> 
> 赞同：3
> 
> 时间：2012-07-31T17:36:29.730
> 
> 标签：xcode, matlab, mex, osx-mountain-lion

我最近买了一台带有 Mountain Lion (OS 10.8) 的新电脑。我想开始在这台机器上使用 mex 文件，但我很难让 'mex -setup' 找到任何编译器。

眼镜：

*   山狮10.8
*   MATLAB 2012a
*   XCode 4.4

我注意到 matlab 已经发布了 XCode 4.2 和 4.3 的补丁。我也意识到 XCode 4.4（和山狮，就此而言）没有得到 Matlab 的正式支持。据我所知，没有办法在 Mountain Lion 上安装 4.3。所以我知道问社区是一个很长的问题，但是有没有人找到一种方法让 XCode 4.4 与 Matlab 的 mex 功能一起工作？

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T20:36:42.623

我的规格与您提到的相同，并且我复制了您的情况。但是，我从 Mathworks 找到了一个可行的解决方案。它是为 XCode 4.2 和 4.3 设计的，但它也适用于 XCode 4.4。修复很简单，只需要从 Matlab 命令行运行补丁。

所有信息都可以在 MathWorks 支持论坛中找到此错误[报告。](http://www.mathworks.com/support/solutions/en/data/1-FR6LXJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T08:35:11.027

我已将 MathWorks 的每个 *opt.sh 官方补丁文件中的 10.7 更改为 10.8，它适用于 Mac OS X 10.8、Xcode 4.5、matlab 2012a。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T20:02:58.033

这可能不是您想要的答案，但您始终可以使用 xcode 安装受支持的 gcc 版本，然后让 Matlab 使用它...

[（关于为 Mac 编译 gcc 的博文）](http://www.tech-recipes.com/rx/726/mac-os-x-install-gcc-compiler/)

# python - 在 MatchFirst 中解析 Verilog 网络连接

> ID：11745886
> 
> 赞同：2
> 
> 时间：2012-07-31T17:36:54.103
> 
> 标签：python, verilog, string-concatenation, pyparsing

我有一个解析verilog连接的简单语法：

```
scalar = (Optional(Word(nums + "_") + "'" + oneOf("d h b")) + Word(nums + "_")).setName("Scalar")
operator = oneOf("+ - * /").setName("Operator")
identifier = Word(alphas, alphanums+"_").setName("Identifier")
expr = (scalar | identifier) + ZeroOrMore(operator + (scalar | identifier))
range = expr + ":" + expr
index = "[" + range + "]"
single_netref = (identifier + Optional(index)).setName("Single Net Reference")
single_netref.setDebug()
lbracket = Literal("{").setName("Left Bracket").setDebug()
rbracket = Literal("}").setName("Left Bracket").setDebug()
concat_netref = (lbracket + single_netref + ZeroOrMore( Suppress( "," ) + single_netref ) + rbracket).setName("Net Concatination Reference")
concat_netref.setDebug() 
```

如果我使用 parseString 方法解析字符串“{ LegacyStatus3gPreStageQ1 , LegacyData3gPreStageQ1 }”，它解析得很好；但是，我想匹配网络引用的串联或单个网络引用。为此，我尝试过：

```
netref = MatchFirst(concat_netref, single_netref).setName("Net Reference").setDebug() 
```

但是，这（并使用 Or()）总是跳过最后一个 rbracket，但表示它成功匹配了 netref。这是我的调试输出：

```
Match Net Reference at loc 0(1,1)
Match Left Bracket at loc 0(1,1)
Matched Left Bracket -> ['{']
Match Single Net Reference at loc 1(1,2)
Matched Single Net Reference -> ['LegacyStatus3gPreStageQ1']
Match Single Net Reference at loc 28(1,29)
Matched Single Net Reference -> ['LegacyData3gPreStageQ1']
Matched Net Reference -> ['{', 'LegacyStatus3gPreStageQ1', 'LegacyData3gPreStageQ1'] 
```

为什么添加 MatchFirst() 元素会导致 rbracket 丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:20:09.790

MatchFirst 应该传递一个表达式列表。

改变

```
netref = MatchFirst(concat_netref, single_netref).setName("Net Reference") 
```

到

```
netref = MatchFirst([concat_netref, single_netref]).setName("Net Reference") 
```

# javascript - 引导菜单和 openlayers

> ID：11745887
> 
> 赞同：1
> 
> 时间：2012-07-31T17:36:56.890
> 
> 标签：javascript, drop-down-menu, menu, twitter-bootstrap, openlayers

我在我的页面中使用 bootstrap twitter 2。

我有一个下拉菜单可以正常工作，除非我加载 openlayers.js 文件。

当我导航到其他页面时它可以工作，但是当我在加载 openlayer.js 文件的页面中访问它时它崩溃（样式没问题，但下拉功能不起作用）

我相信这是一个 openlayers 冲突，因为如果我不加载这个 js 文件，那么菜单就可以正常工作。

我怎样才能解决这个冲突？

先感谢您！

# windows - “TCHAR cFileName[MAX_PATH];” - MSDN 库中的错误？

> ID：11745888
> 
> 赞同：1
> 
> 时间：2012-07-31T17:36:57.603
> 
> 标签：windows, winapi, msdn

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365740%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365740%28v=vs.85%29.aspx)

> cFileName
> 文件的名称。

的值~~与~~`MAX_PATH`几乎相同，但在这种情况下使用第一个会产生误导。无论如何，如果他们的意思是带有名称的完整路径，应该是吗？使用的目的是什么？~~`_MAX_FNAME``cFileName[MAX_PATH+_MAX_FNAME];``MAX_PATH`~~

 ~~* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:44:12.120

该`MAX_PATH`常量表示*整个*路径的最大长度，包括文件名和扩展名。无论是相对路径、完全限定路径，甚至只是一个文件名，都无关紧要；它们都具有相同的最大长度。

因此，您永远不会看到`MAX_PATH + _MAX_FNAME`，因为这将超过路径允许的最大长度。

[您将在本文](http://MSDN.microsoft.com/en-us/library/windows/desktop/aa365247.aspx)中找到几乎所有您想知道的有关 Win32 中路径的信息。请注意，某些 API（这些 API 通常会在 docs 中明确指出）接受长路径名，用特殊前缀表示，不受`MAX_PATH`.

在这种情况下，函数签名是正确的。但是，有时 MSDN 上会附有文档附带的示例代码片段，并且此示例代码的范围从风格上的好奇到完全令人厌恶的任何地方。在尝试调整您找到的示例代码时，使用良好的健康常识总是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:40:15.870

这里没有错误。在受长度限制的 Windows API 中，名称的最大长度为（通常）`MAX_PATH`。无论名称是完全指定的绝对路径、相对路径还是只是文件名，长度限制仍然是`MAX_PATH`.

很可能底层文件系统有不同的限制。本地文件系统限制可能小于 260 是完全合理的。但如果 API 声明限制为 260 个字符，那么这就是使用该特定 API 时的限制。

如果您认为 MSDN 库不正确，检查起来很容易。查看 Windows 头文件中的定义并将其与 MSDN 库中给出的定义进行比较。您总是会发现 MSDN 库是准确的。~~

# c# - 什么 C# 模板引擎在 HTML 和控制代码之间有清晰的分离？

> ID：11745890
> 
> 赞同：3
> 
> 时间：2012-07-31T17:37:13.623
> 
> 标签：c#, template-engine

什么 C# 模板引擎
使用只有文本和标记的“纯”HTML
没有任何控制流，如**if**、**while**、**循环**或表达式，
将 html 与控制代码分开？

下面是示例电话簿列表代码，
说明了应该如何完成：

```
string html=@" 
<html><head><title>@title</title></head>
<body>
<table>
<tr>
    <td> id</td> <td> name</td> <td> sex</td> <td>phones</td>
</tr><!--@contacts:-->
<tr>
    <td>@id</td> <td>@name</td> <td>@sex</td> 
      <td>
          <!--@phones:-->@phone <br/>
          <!--:@phones-->
      </td>
</tr><!--:@contacts-->
</table>
</body>
</html>";

var contacts = from c in db.contacts select c;

Marker m = new Marker(html);
Filler t = m.Mark("title");
t.Set("Phone book");

Filler c = m.Mark("contacts", "id,name,sex");

// **foreach** expressed in code, not in html 

foreach(var contact in contacts) {
    int id = contact.id;

    c.Add(id, contact.name, contact.sex);
    Filler p = c.Mark("phones", "phone");

    var phones = from ph in db.phones
                 where ph.id == id 
                 select new {ph.phone};

    if (phones.Any()) {
        foreach(var ph in phones) {
            p.Add(ph);
        }
    } else {
        fp.Clear();
    }
}
Console.Out.WriteLine(m.Get()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:54:51.350

只需使用 ASP.NET。无论您使用 Web 表单还是 MVC，在 .cs 文件中使用 C# 并在 .aspx 文件中使用 HTML 都非常容易。

与编程中的任何事情一样，99% 的事情都由你自己来做。灵活的 UI 引擎不会强制您遵循良好的编码实践。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T18:20:00.410

使用此代码：

模板文件

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Text.RegularExpressions;

namespace templaten.com.Templaten
{
    public class tRange
    {
        public int head, toe;

        public tRange(int _head, int _toe)
        {
            head = _head;
            toe = _toe;
        }
    }

    public enum AType
    {
        VALUE = 0,
        NAME = 1,
        OPEN = 2,
        CLOSE = 3,
        GROUP = 4
    }

    public class Atom
    {
        private AType kin;
        private string tag;
        private object data;
        private List<Atom> bag;

        public Atom(string _tag = "",
                    AType _kin = AType.VALUE,
                    object _data = null)
        {
            tag = _tag;
            if (String.IsNullOrEmpty(_tag))
                _kin = AType.GROUP;
            kin = _kin;

            if (_kin == AType.GROUP)
                bag = new List<Atom>();
            else
                bag = null;

            data = _data;
        }

        public AType Kin
        {
            get { return kin; }
        }

        public string Tag
        {
            get { return tag; }
            set { tag = value; }
        }

        public List<Atom> Bag
        {
            get { return bag; }
        }

        public object Data
        {
            get { return data; }
            set { data = value; }
        }

        public int Add(string _tag = "",
                       AType _kin = AType.VALUE,
                       object _data = null)
        {
            if (bag != null)
            {
                bag.Add(new Atom(_tag, _kin, _data));
                return bag.Count - 1;
            }
            else
            {
                return -1;
            }
        }
    }

    public class Templet
    {
        private string content;

        string namepat = "\\w+";
        string justName = "(\\w+)";

        string namePre = "@";
        string namePost = "";

        string comment0 = "\\<!--\\s*";
        string comment1 = "\\s*--\\>";

        private Atom tokens;                         // parsed contents
        private Dictionary<string, int> iNames;      // name index
        private Dictionary<string, tRange> iGroups;  // groups index

        private Atom buffer;                         // output buffer
        private Dictionary<string, int> _iname;      // output name index
        private Dictionary<string, tRange> _igroup;  // output index

        public Templet(string Content = null)
        {
            Init(Content);
        }

        private int[] mark(string[] names, string group)
        {
            if (names == null || names.Length < 1) return null;
            tRange t = new tRange(0, buffer.Bag.Count - 1);
            if (group != null)
            {
                if (!_igroup.ContainsKey(group)) return null;
                t = _igroup[group];
            }

            int[] marks = new int[names.Length];

            for (int i = 0; i < marks.Length; i++)
                marks[i] = -1;

            for (int i = t.head; i <= t.toe; i++)
            {
                if (buffer.Bag[i].Kin == AType.NAME)
                {
                    for (int j = 0; j < names.Length; j++)
                    {
                        if (String.Compare(
                            names[j],
                            buffer.Bag[i].Tag,
                            true) == 0)
                        {
                            marks[j] = i;
                            break;
                        }
                    }
                }
            }
            return marks;
        }

        public Filler Mark(string group, string names)
        {
            Filler f = new Filler(this, names);
            f.di = mark(f.names, group);
            f.Group = group;
            tRange t = null;
            if (_igroup.ContainsKey(group)) t = _igroup[group];
            f.Range = t;
            return f;
        }

        public Filler Mark(string names)
        {
            Filler f = new Filler(this, names);

            f.di = mark(f.names, null);
            f.Group = "";
            f.Range = null;
            return f;
        }

        public void Set(int[] locations, object[] x)
        {
            int j = Math.Min(x.Length, locations.Length);
            for (int i = 0; i < j; i++)
            {
                int l = locations[i];

                if ((l >= 0) && (buffer.Bag[l] != null))
                    buffer.Bag[l].Data = x[i];
            }
        }

        public void New(string group, int seq = 0)
        {
            // place new group copied from old group just below it

            if (!( iGroups.ContainsKey(group)
                && _igroup.ContainsKey(group)
                && seq > 0)) return;

            tRange newT = null;
            tRange t = iGroups[group];
            int beginRange = _igroup[group].toe + 1;

            for (int i = t.head; i <= t.toe; i++)
            {
                buffer.Bag.Insert(beginRange,
                    new Atom(tokens.Bag[i].Tag,
                        tokens.Bag[i].Kin,
                        tokens.Bag[i].Data));
                beginRange++;
            }

            newT = new tRange(t.toe + 1, t.toe + (t.toe - t.head + 1));

            // rename past group
            string pastGroup = group + "_" + seq;
            t = _igroup[group];
            buffer.Bag[t.head].Tag = pastGroup;
            buffer.Bag[t.toe].Tag = pastGroup;

            _igroup[pastGroup] = t;

            // change group indexes
            _igroup[group] = newT;

        }

        public void ReMark(Filler f, string group)
        {
            if (!_igroup.ContainsKey(group)) return;
            Map(buffer, _iname, _igroup);
            f.di = mark(f.names, group);
            f.Range = _igroup[group];
        }

        private static void Indexing(string aname,
            AType kin,
            int i,
            Dictionary<string, int> dd,
            Dictionary<string, tRange> gg)
        {
            switch (kin)
            {
                case AType.NAME: // index all names
                    dd[aname] = i;
                    break;
                case AType.OPEN: // index all groups
                    if (!gg.ContainsKey(aname))
                        gg[aname] = new tRange(i, -1);
                    else
                        gg[aname].head = i;
                    break;
                case AType.CLOSE:
                    if (!gg.ContainsKey(aname))
                        gg[aname] = new tRange(-1, i);
                    else
                        gg[aname].toe = i;
                    break;
                default:
                    break;
            }
        }

        private static void Map(Atom oo,
            Dictionary<string, int> dd,
            Dictionary<string, tRange> gg)
        {

            for (int i = 0; i < oo.Bag.Count; i++)
            {
                string aname = oo.Bag[i].Tag;
                Indexing(oo.Bag[i].Tag, oo.Bag[i].Kin, i, dd, gg);
            }
        }

        public void Init(string Content = null)
        {
            content = Content;

            tokens = new Atom("", AType.GROUP);

            iNames = new Dictionary<string, int>();
            iGroups = new Dictionary<string, tRange>();

            // parse content into tokens
            string namePattern = namePre + namepat + namePost;
            string patterns =
                "(?<var>" + namePattern + ")|" +
                "(?<head>" + comment0 + namePattern + ":" + comment1 + ")|" +
                "(?<toe>" + comment0 + ":" + namePattern + comment1 + ")";
            Regex jn = new Regex(justName, RegexOptions.Compiled);
            Regex r = new Regex(patterns, RegexOptions.Compiled);
            MatchCollection ms = r.Matches(content);
            int pre = 0;
            foreach (Match m in ms)
            {
                tokens.Add(content.Substring(pre, m.Index - pre));
                int idx = -1;
                if (m.Groups.Count >= 3)
                {
                    string aname = "";
                    MatchCollection x = jn.Matches(m.Value);
                    if (x.Count > 0 && x[0].Groups.Count > 1)
                        aname = x[0].Groups[1].ToString();
                    AType t = AType.VALUE;

                    if (m.Groups[1].Length > 0) t = AType.NAME;
                    if (m.Groups[2].Length > 0) t = AType.OPEN;
                    if (m.Groups[3].Length > 0) t = AType.CLOSE;
                    if (aname.Length > 0)
                    {
                        tokens.Add(aname, t);

                        idx = tokens.Bag.Count - 1;
                    }
                    Indexing(aname, t, idx, iNames, iGroups);
                }
                pre = m.Index + m.Length;
            }
            if (pre < content.Length)
                tokens.Add(content.Substring(pre, content.Length - pre));

            // copy tokens into buffer
            buffer = new Atom("", AType.GROUP);
            for (int i = 0; i < tokens.Bag.Count; i++)
                buffer.Add(tokens.Bag[i].Tag, tokens.Bag[i].Kin);

            // initialize index of output names
            _iname = new Dictionary<string, int>();
            foreach (string k in iNames.Keys)
                _iname[k] = iNames[k];

            // initialize index of output groups
            _igroup = new Dictionary<string, tRange>();
            foreach (string k in iGroups.Keys)
            {
                tRange t = iGroups[k];
                _igroup[k] = new tRange(t.head, t.toe);
            }
        }

        public string Get()
        {
            StringBuilder sb = new StringBuilder("");
            for (int i = 0; i < buffer.Bag.Count; i++)
            {
                switch (buffer.Bag[i].Kin)
                {
                    case AType.VALUE:
                        sb.Append(buffer.Bag[i].Tag);
                        break;
                    case AType.NAME:
                        sb.Append(buffer.Bag[i].Data);
                        break;
                    case AType.OPEN:
                    case AType.CLOSE:
                        break;
                    default: break;
                }
            }
            return sb.ToString();
        }

    }

    public class Filler
    {
        private Templet t = null;

        public int[] di;
        public string[] names;
        public string Group { get; set; }
        public tRange Range { get; set; }
        private int seq = 0;

        public Filler(Templet tl, string markers = null)
        {
            t = tl;
            if (markers != null)
                names = markers.Split(new char[] { ',' },
                    StringSplitOptions.RemoveEmptyEntries);
            else
                names = null;
        }

        public void init(int length)
        {
            di = new int[length];
            for (int i = 0; i < length; i++)
                di[i] = -1;
            seq = 0;
            Group = "";
            Range = null;
        }

        // clear contents inside marked object or group
        public void Clear()
        {
            object[] x = new object[di.Length];
            for (int i = 0; i < di.Length; i++)
                x[i] = null;
            t.Set(di, x);
        }

        // set value for marked object,
        // or add row to group and set value to columns
        public void Set(params object[] x)
        {
            t.Set(di, x);
        }

        public void Add(params object[] x)
        {
            if (Group.Length > 0)
            {
                t.New(Group, seq);
                ++seq;
                t.ReMark(this, Group);
            }

            t.Set(di, x);
        }
    }
} 
```

测试程序

程序.cs

```
Templet m = new Templet(html);
Filler f= m.Mark("title");
f.Set("Phone book");
Filler fcontacts = m.Mark("contacts", "id,name,sex,phone");
fcontacts.Add(1, "Akhmad", "M", "123456");
fcontacts.Add(2, "Barry", "M", "234567");
fcontacts.Add(1, "Charles", "M", "345678");
Console.Out.WriteLine(m.Get()); 
```

仍然不能做嵌套循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:45:54.403

原则上，您选择的大多数模板引擎都*可以*使用适当的架构将 HTML 与控制逻辑分开。使用 MVC（或 MVVM）模式，如果您以控制器包含 if/then 逻辑而不是视图的方式构建模型，则可以将其从视图中消除。

也就是说，您使用的语法非常接近[Razor](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)语法，后者可通过 NuGet 包轻松用于 ASP.NET MVC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T19:18:57.667

我完全听到你的声音。我构建[了 SharpFusion](http://code.google.com/p/sharpfusion/)，其中包含一些其他内容，但是如果您查找 template.cs 文件，您将看到解析 HTML 文件并简单地将标记替换为您在 c# 中创建的值的处理程序。

因为没有像 ASP.NET 那样完成 XML 解析，所以该框架的加载速度甚至比 MVC 站点还要快。另一种选择是 ServiceStack。

# sql - 选择不同的 WHERE 条件

> ID：11745897
> 
> 赞同：4
> 
> 时间：2012-07-31T17:37:58.397
> 
> 标签：sql, select, where

我想运行一个这样的选择。

```
SELECT
        COUNT(*) WHERE switch=0 AND detail=1 AS zeroone
    AND
        COUNT(*) WHERE switch=0 AND detail=2 AS zerotwo
    AND
        COUNT(*) WHERE switch=1 AND detail=1 AS oneone
    AND 
        COUNT(*) WHERE swithc=1 AND detail=2 AS onetwo
  FROM tablename 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:41:49.237

```
SELECT
    sum(switch=0 AND detail=1) AS zeroone,
    sum(switch=0 AND detail=2) AS zerotwo,
    sum(switch=1 AND detail=1) AS oneone,
    sum(switch=1 AND detail=2) AS onetwo
FROM tablename 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T17:42:37.930

您可以`CASE`在您的语句中使用语句`SELECT`来获得结果：

```
SELECT SUM(case when switch=0 AND detail=1 then 1 else 0 end) as zeroone
    , SUM(case when switch=0 AND detail=2 then 1 else 0 end) as zerotwo
    , SUM(case when switch=1 AND detail=1 then 1 else 0 end) as oneone
    , SUM(case when switch=1 AND detail=2 then 1 else 0 end) as onetw
FROM tablename 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:39:54.263

```
SELECT SUM(CASE WHEN switch = 0 and detail = 1 THEN 1 ELSE NULL END) AS zeroone
     , ...
FROM TableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:43:38.570

目前尚不清楚你想要什么。

我想你想要一个选择，它返回一行，有 4 列：

```
SELECT
COUNT(*) WHERE switch=0 AND detail=1 AS zeroone,
COUNT(*) WHERE switch=0 AND detail=2 AS zerotwo,
COUNT(*) WHERE switch=1 AND detail=1 AS oneone,
COUNT(*) WHERE swithc=1 AND detail=2 AS onetwo
FROM tablename 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T17:46:49.537

你为什么不用这个？

```
SELECT COUNT(*) 
  FROM tablename
 GROUP BY switch, detail 
```

# mysql - Mysql Tomcat 6连接被拒绝

> ID：11745898
> 
> 赞同：1
> 
> 时间：2012-07-31T17:37:59.073
> 
> 标签：mysql, tomcat6

我有一个在 ubuntu 云服务器上运行的 tomcat 应用程序。直到几个小时前，一切都运行良好。我尝试在 context.xml 中添加第二个具有类似数据源资源的 tomcat 应用程序。这个想法是第一个应用程序将连接到第一个数据库，第二个应用程序连接到第二个数据库。我将数据源称为相同的名称。它没有用。

现在我已经删除了第二个应用程序，我无法从原始应用程序连接到数据库。所有的 context.xml 都和我今天开始之前一样。这真让我抓狂。

我得到了这个例外。

`Caused by: com.mysql.jdbc.exceptions.MySQLNonTransientConnectionException: Server connection failure during transaction. Due to underlying exception: 'java.net.ConnectException: Connection refused'.`

 `** BEGIN NESTED EXCEPTION **

java.net.ConnectException MESSAGE: Connection refused

STACKTRACE:` 

`java.net.ConnectException: Connection refused`

# java - 用动态值Java替换html文本

> ID：11745899
> 
> 赞同：0
> 
> 时间：2012-07-31T17:38:00.470
> 
> 标签：java, jsf-2

如何在java中用动态值替换HREF值

```
 <a href=\"http://www.example.com\"> with <a href=\ outcome \"> 
```

其中字符串结果 =“home\login.jsf”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:39:09.223

您需要使用 EL（如 JSTL）在此处呈现字符串。

示例 JSTL 是：

```
<a href=#{outcome}> with <a href=\ outcome \"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:59:36.567

可能有不同类型的结果。如果您使用纯 HTML 或 h:outputLink 和 h:link 等组件，则 EL 表达式将在呈现页面时被解释，而不是 100% 动态。

```
<h:link outcome="#{bean.link}" value="I go to a page!"/> 
```

将产生一个`<a>`标签，其链接指定`#{bean.link}`为 href。

此外，在 JSF 2.x 中，您可以通过添加引用 bean 属性的 if 子句在您的防御规则中使用条件导航：

```
<navigation-rule>
    <from-view-id>index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>logIn</from-outcome>
        <if>#{sessionBean.sessionActive}</if>
        <to-view-id>userDashboard.xhtml</to-view-id>
        <else if>#{sessionBean.rejectedUser}</else if>
            <to-view-id>index.xhtml</to-view-id>
        <else>
            <to-view-id>register.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

另一方面，像 h:commandButton 和 h:commandLink 这样的元素有一个 action 属性，它引用返回类型为 String 或 void 的方法。如果方法返回字符串，那么您可以返回“#”或导航规则，隐式导航或配置规则：

```
<h:commandLink value="Log In" action="#{bean.logIn}"/> 
```

logIn 方法将从您的 Bean 调用：

```
public String logIn() {
    //Your login logic
    if(userIsLoggedIn) {
        return "userDashboard"; //Implicit navigation
    } else {
        return "index"; //Implicit navigation
    }
} 
```

隐式导航 (JSF 2.x) 将允许您通过返回页面名称在同一文件夹中的页面之间导航。例如，返回`index`会将用户发送到`index.jsf`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:14:25.090

将“a”标签替换为“h:commandLink”标签。并根据需要绑定值和操作。

```
 <h:commandLink value="#{..}" action="#{yourBean.yourMethod()}"/> 
```

# python - 'unicode' 对象不可调用

> ID：11745906
> 
> 赞同：7
> 
> 时间：2012-07-31T17:38:32.150
> 
> 标签：python, google-app-engine, web-applications, unicode

我是一名网络开发人员。noobie 和我正在整理一个简单的注册页面，作为在 GoogleApp Engine 上使用 Python 的练习。

当注册表单填写不正确时，程序可以正常工作。正确填写后，它应该重定向到感谢页面，但我收到服务器错误：

```
Internal Server Error

The server has either erred or is incapable of performing the requested operation.

Traceback (most recent call last):
  File      "/Users/bendavidow/Desktop/Stuff/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEng  ine-default.bundle/Contents/Resources/google_appengine/lib/webapp2/webapp2.py", line 1547,   in __call__
return response(environ, start_response)
TypeError: 'unicode' object is not callable 
```

我的问题有两个：（1）这个错误是什么意思？(2) 它来自哪里？

这是代码，减去html：

```
import webapp2 
import re
import cgi
def escape_html(s):
    return cgi.escape(s, quote = True)

class MainPage(webapp2.RequestHandler):
    def write_form(self, username = "", email = "", username_error = "", password_error   = "", verify_error = "", email_error = ""):
    self.response.out.write(form %{"username": escape_html(username), "email": escape_html(email), "username_error": username_error, "password_error": password_error, "verify_error": verify_error, "email_error": email_error})

def get(self):
    self.write_form()

def post(self):
    username = self.request.get('username')
    password = self.request.get('password')
    verify = self.request.get('verify')
    email = self.request.get('email')

    username_check = re.search(r'^[a-zA-Z0-9_-]{3,20}$', username)
    password_check = re.search(r'^.{3,20}$', password)
    email_check = re.search(r'^[\S]+@[\S]+\.[\S]+$',email)

    username_error, password_error, email_error, verify_error = "", "", "", ""
    if not username_check:
        username_error = "Invalid Username"
    if not password_check:
        password_error = "Invalid Password"
    if email != '' and not email_check:
        email_error = "Invalid Email"
    if password != verify:
        verify_error = "Passwords do not match"

    if username_error or password_error or email_error or verify_error:
        self.write_form(username, email, username_error, password_error, verify_error, email_error)
    else:
        return username
        self.redirect("/thanks")

class ThanksHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("Welcome " + username)

app = webapp2.WSGIApplication([('/', MainPage), ('/thanks',ThanksHandler)], debug = True) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T17:44:42.843

Webapp2 期望处理程序方法（get/post）[的返回是可调用](http://webapp-improved.appspot.com/features.html#returned-responses)的。这样做的原因是，您无需更改提供给您的响应对象（self.response，这反过来会修改请求的环境），而是以可调用响应的形式构造一个工作单元，然后由框架[应用到请求的环境中。](http://code.google.com/p/webapp-improved/source/browse/webapp2.py#1513)

当您`return username`框架尝试调用不可调用的 unicode 对象（用户名）时。

# android - 在 Android 中步行/驾驶时更新位置标记并在 Google 地图上绘制路径

> ID：11745913
> 
> 赞同：3
> 
> 时间：2012-07-31T17:38:48.037
> 
> 标签：android, google-maps, geolocation, gps, directions

我想创建一个像谷歌地图这样的功能。每当有人开始步行/开车时，我都想更新我的位置标记。我正在考虑使用 LocationListner 的 onLocationChange 方法，但我不确定。我也喜欢在谷歌地图上绘制更新位置的路径。

欢迎所有建议。

逐项叠加：-

```
public class LocationOverlay extends ItemizedOverlay<OverlayItem>{

    private List<OverlayItem> myOverlays;
    Path path;
    static int cnt = -1;
    public LocationOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
        System.out.println("Normal...");
        myOverlays = new ArrayList<OverlayItem>();
    }

    public void addOverlay(OverlayItem overlay) {
        System.out.println("Add Overlay called");
        myOverlays.add(overlay);
        populate();
            cnt++;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return myOverlays.get(i);
    }

    public void removeItem(int i) {
        myOverlays.remove(i);
        populate();
    }

    @Override
    public int size() {
        return myOverlays.size();
    }

    @Override
    public void draw(Canvas canvas, final MapView mapView, boolean shadow) {

           if (shadow) {
            paint.setDither(true);
            paint.setColor(Color.RED);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeCap(Paint.Cap.ROUND);
            paint.setStrokeWidth(4);

            path = new Path();
            Point point1 = new Point();
            Projection projection = mapView.getProjection();
            if (myOverlays.size() > 1) {

                System.out.println(">>>>>>>>>>>");

                for (int i = 0, j=i; i < myOverlays.size(); i++) {
                Point point1 = new Point();
                Point point2 = new Point();
                projection.toPixels(myOverlays.get(i).getPoint(), point1);

                System.out.println(">>>>>>>>>>>");

                projection.toPixels(myOverlays.get(j++).getPoint(), point2);
                System.out.println("Point == " + j);

                path.moveTo(point2.x, point2.y);
                path.lineTo(point1.x, point1.y);
                canvas.drawPath(path, paint);
                super.draw(canvas, mapView, shadow);
            }   
            }
        }
        canvas.drawPath(path, paint);
        super.draw(canvas, mapView, shadow);
    }
} 
```

**注意 - 对于单个 locationChanged，draw 方法会被多次调用。**

**编辑 ：-**

每当发生任何位置更改事件触发时，我都可以绘制路线，但我在那里面临一个小问题。它也每次都从根目录绘制路径。我希望它从最后一个位置开始绘制路径（即从最后一个位置连接到下一个位置）。我附上一张图片以便更好地理解。

![在此处输入图像描述](../Images/fe8652f250147e2edb09290f983227d4.png)

从图像中您可以看到起点也连接到最后一点。我不想要这个。对此有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:59:19.400

[使用MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)可以轻松绘制当前位置。您需要做的就是将此叠加层添加到您的 MapView。就像是：

```
mapView.addOverlay(new MyLocationOverlay(context, mapView)); 
```

默认位置点将自动绘制，并在您移动时立即更新

路线有点棘手，但那里仍然没有火箭科学。您需要做的是扩展 Overlay 类并实现`draw()`逻辑。您需要跟踪您旅行的 GeoPoints 并将它们投影在地图上（在您的叠加层中，`draw()`您可以向 mapView 询问一个`Projection`实例 - `getProjection()`。您可以使用此投影将 GeoPoints 映射到您的地图坐标）。一旦你有地理点列表 - 你可以创建一个[路径](http://developer.android.com/reference/android/graphics/Path.html)并在画布上绘制这个路径

如何在地图上绘制路径的简化示例（我在项目中使用了一些自定义类，但您应该有所了解）：

```
Path path;

@Override
public void draw(Canvas canvas, final MapView mapView, boolean shadow)
{
    Projection proj = mapView.getProjection();
    updatePath(mapView,proj);
    canvas.drawPath(path, mPaint);
}

protected void updatePath(final MapView mapView, Projection proj)
{
    path = new Path();

    proj.toPixels(mPoints.get(0).point, p);
    path.moveTo(p.x, p.y);

    for(RouteEntity.RoutePoint rp : mPoints)
    {
        proj.toPixels(rp.point, mPoint);
        path.lineTo(mPoint.x, mPoint.y);
    }
} 
```

# rubygems - 无法激活 sinatra-contrib gem

> ID：11745915
> 
> 赞同：0
> 
> 时间：2012-07-31T17:38:56.307
> 
> 标签：rubygems, sinatra, rvm, bundler

当我`ruby application.rb`在我的[Sinatra 分叉](https://github.com/juanpastas/sinatra)应用程序中运行时，我在控制台中有：

```
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1637:in `raise_if_conflicts': Unable to activate sinatra-contrib-1.3.1, because sinatra-1.4.0 conflicts with sinatra (~> 1.3.0) (Gem::LoadError) 
```

看到：

```
bundle show sinatra
~/.rvm/gems/ruby-1.9.3-p194/bundler/gems/sinatra-b18310f73635 
```

和

```
# Gemfile
source :rubygems
gem 'sinatra', git: 'https://github.com/juanpastas/sinatra.git' 
```

和

```
bundle exec ruby application.rb 
application.rb:2:in `require': cannot load such file -- sinatra/content_for (LoadError) 
```

如果我添加`gem 'sinatra-contrib'`到 Gemfile，然后运行`bundle`，我得到：

```
Bundler could not find compatible versions for gem "sinatra":
  In Gemfile:
    sinatra-contrib (>= 0) ruby depends on
      sinatra (~> 1.3.0) ruby

    sinatra (1.4.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T22:43:43.020

您使用的是旧版本`sinatra-contrib`，请切换到 git 版本：

```
source :rubygems
gem 'sinatra', git: 'https://github.com/juanpastas/sinatra.git'
gem 'sinatra-contrib', git: 'https://github.com/sinatra/sinatra-contrib.git' 
```

# hibernate - Hibernate 4.x 日志配置

> ID：11745920
> 
> 赞同：2
> 
> 时间：2012-07-31T17:39:15.917
> 
> 标签：hibernate, hibernate-4.x, jboss-logging

我正在尝试使用 jboss-logging，而不是 log4j 来查找有关 Hibernate 4.x 日志记录配置的信息。有人可以帮助我吗？我需要禁用信息记录...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T20:55:14.750

JBoss 日志记录似乎是一个代表底层日志记录框架的外观。[https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/LoggerProviders.java](https://github.com/jboss-logging/jboss-logging/blob/master/src/main/java/org/jboss/logging/LoggerProviders.java)有 jboss 日志如何配置自己的源代码。

因此，您必须弄清楚 jboss-logging 正在使用哪个底层框架，并在此基础上找出适用的配置选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T17:45:48.757

查看 /standalone/configuration/standalone.xml（或 as/domain/configuration/domain.xml）文件。搜索 。希望您能在这里看到所有类别及其级别。您应该可以在此处修改级别。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-31T20:23:47.977

Jboss 有自己的日志文件。寻找'jboss-log4j.xml'，你应该从那里控制休眠。我认为在conf下。

# php - 为什么我的 PHP 代码在源代码中传递给客户端？

> ID：11745921
> 
> 赞同：0
> 
> 时间：2012-07-31T17:39:31.300
> 
> 标签：php

我刚刚开始学习 PHP，我正在使用免费主机来测试我的代码，但没有任何反应，而且我的 php 代码在页面源中传递，它是否表明服务器不解释它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:40:02.000

> php代码是否在源代码中传递给客户端？

不。

您的 PHP 解释器没有被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:41:50.267

是的，这表明服务器没有正确解释它。用户不应该收到 PHP 代码，只收到 html/javascript/PHP 脚本输出的任何内容。

至于为什么会发生这种情况，这里有一些基本的事情需要检查：

*   您的 PHP 代码应该以标记开头并以`<?php`标记结尾`?>`（结束标记不是绝对必要的，但您放在它之后的任何代码都不会被解释）。
*   文档的名称应以`.php`（并非总是必需的，但某些服务器设置可能需要它）结尾。
*   如果您还没有检查过，请确保您使用的主机首先支持 PHP。

# python - 一次向每个 URL 发送请求 Python

> ID：11745924
> 
> 赞同：1
> 
> 时间：2012-07-31T17:39:47.193
> 
> 标签：python, multithreading, function, urllib2, urllib

我正在尝试创建一个脚本，该脚本允许我一次向文本文件中的每个链接发送 GET 请求。我相信我可以通过线程来做到这一点，但也许你们有更好的建议。到目前为止，它所做的只是逐行读取并逐一发送请求。

```
import urllib2
def send(first,last):
    with open("urls.txt", 'r') as urls:        
        for url in urls:
            url = url.rstrip("\n")            
            print url                        
            urllib2.urlopen(url+"?f_name="+first+"&last_name="+last)

if __name__ == "__main__":
    first = raw_input("First Name: ")
    last = raw_input("Last Name: ")
    flood(first, last) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:59:26.713

查看`requests`的异步。它现在有自己的包，但你可以使用它。它运行`gevent`和`greenlet`。[https://github.com/kennethreitz/grequests](https://github.com/kennethreitz/grequests)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T17:43:22.183

没关系，线程是最好的方法，我想通了。

# php - 解析PHP中的每一行

> ID：11745929
> 
> 赞同：2
> 
> 时间：2012-07-31T17:39:59.913
> 
> 标签：php, javascript, post, textarea

我想在 js 和 php 中创建一个记事本，但我希望它为每个新行添加一些空格，我认为我可以用 textarea 制作它，但我不知道如何这是我的想法：

```
<textarea name="text"></textarea> 
```

在 PHP 中

```
$text = trim($_POST['text']);
$textAr = explode("\n", $text);
$textAr = array_filter($text, 'trim'); // remove any extra \r characters left behind

foreach ($textAr as $line) {
    $height = $height + $line_height; 
} 
```

但不确定它是否有效。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:47:49.780

也许我的大脑已经睡着了，但你是不是想说

```
$textAr = array_filter($textAr, 'trim'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:47:49.873

```
$textAr = array_filter($text, 'trim'); seems to be wrong. 
```

1.  您`$text`已经拥有`$textAr`并想要使用它时使用
2.  看来你需要`array_map`，不是`array_filter`

[array_map 手册](http://php.net/array_map)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T17:42:32.153

你基本上放弃了这`explode`一步。试试这个：

```
$textAr = array_filter(preg_split("/[\r\n]+/",$_POST['text'])); 
```

这基本上允许任何格式的换行符，并删除空行。然后就可以`$textAr`通过了`foreach`。

# javascript - 构建自定义 jQuery 选择

> ID：11745939
> 
> 赞同：0
> 
> 时间：2012-07-31T17:40:42.243
> 
> 标签：javascript, jquery

好的，任何熟悉从 DOM 节点或 jQuery 对象构建您自己的自定义 jQuery 选择的人吗？

例如：

```
var li = jQuery('li.someclass');
var myDiv = jQuery('#mydiv'); 
```

所以我想把这两者合二为一`jQuery(object)`。

如果可以使用缓存在变量中的节点（如提供的示例）动态完成，那就太好了。BR 和 10x 为您提供帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T17:42:53.947

您可以将结果与[`.add()`](http://api.jquery.com/add/).

```
var combined = li.add(myDiv); 
```

* * *

*请注意，这`.add()`并没有真正做到它声称的那样。它不会向`li`jQuery 对象添加任何内容。它使用合并的结果创建一个新的 jQuery 对象。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T18:00:46.040

在这种情况下，我会执行以下操作：

```
var obj = jQuery('#mydiv, li.someclass'); 
```

然后执行的任何方法`obj`都适用于`#mydiv`和`li.someclass`。例如，要给两个元素一个红色边框：

```
obj.css('border', '1px solid red'); 
```

# python - 括号 URL 调度程序 Django？

> ID：11745944
> 
> 赞同：1
> 
> 时间：2012-07-31T17:41:03.053
> 
> 标签：python, django, django-urls

我的网址中有一个括号：

例如：[http](http://en.wikipedia.org/wiki/Sacramentum_(oath) ://en.wikipedia.org/wiki/Sacramentum_(oath )

URL 有括号的位置。

Django给出“”“找不到页面（404）”“”

知道如何解决这个问题吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:51:31.427

我猜你在 urls.py 中有一个 URL 模式，看起来像这样（使用你的例子）：

```
urlpatterns = patterns('',
    url(r'^wiki/Sacramentum_(oath)/', my_view),
) 
```

这将不匹配，因为括号在正则表达式中具有特殊含义。你需要用反斜杠转义它们：

```
urlpatterns = patterns('',
    url(r'^wiki/Sacramentum_\(oath\)/', my_view),
) 
```

# javascript - 向窗口元素添加属性时是否会触发事件？

> ID：11745948
> 
> 赞同：1
> 
> 时间：2012-07-31T17:41:16.303
> 
> 标签：javascript, jquery, html, dom, javascript-events

在加载 javascript 库（如 jQuery）时，它们倾向于在 Window 元素上创建一个对象。

我正在尝试弄清楚如何检测库刚刚加载的时间，所以我已经走上了尝试检测窗口对象属性更改的道路......

```
window.addEventListener("DOMAttrModified", invalidate, false);

function invalidate(evt)
{
    console.log('attrChange = ' + evt.attrChange);
} 
```

...这不起作用。

也许有人知道解决此解决方案的另一种方法以及一种检测外部库何时加载的机制。

谢谢，尼克

ps 我查看了脚本标记的 onload 标记，但我担心它**不在**W3C 中。

pps 最终，我正在尝试实现一个可以安全使用 jQuery 代码的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T17:48:52.833

如果您的 js 代码低于 script 标签，请不要担心，html 渲染会在未加载 script 标签时停止，因此如果您的 js 低于 script 标签，则库已经加载。

您也可以检查是否存在某些变量（如`$`）。

```
if (typeof jQuery != 'undefined') {
  // is loaded
} else {
  // is not loaded
} 
```

或通过间隔循环：

```
var interval = setInterval(function () {
  if (typeof jQuery != 'undefined') {
    clearInterval(interval);
    // do what you want
  }
}); 
```

# xcode - 在 Xcode 4.4 上安装 iOS 4 文档

> ID：11745950
> 
> 赞同：0
> 
> 时间：2012-07-31T17:41:24.680
> 
> 标签：xcode, xcode4, documentation

我正在尝试查找如何在 Xcode 4.4 上安装 iOS 4.x 文档。

有谁知道添加它的路径吗？Check and Install Now 没有找到旧版本作为选项。

![首选项下载管理器](../Images/318356d0dfc1351dc61106af31e2482c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:34:52.547

这已通过更新 Xcode 得到解决。

# android - Android Gallery - 自定义单个 ImageView ？

> ID：11745952
> 
> 赞同：0
> 
> 时间：2012-07-31T17:41:31.220
> 
> 标签：android, imageview, gallery

我创建了一个画廊，其中添加了不同的图像。我的 Gallery Adapter 在 getView 函数中创建一个 ImageView。现在我想自定义这个图像视图，比如添加边框和圆角。我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:11:44.430

您可以通过设置背景颜色和边距来为 ImageView 添加边框。对于圆角，您可以放置​​叠加图像或使用 Android 的图形 API。

# sql - SQL 格式时间对象从 24 小时到 12

> ID：11745958
> 
> 赞同：2
> 
> 时间：2012-07-31T17:41:50.740
> 
> 标签：sql, time, format

有没有办法在 SQL 中将时间对象转换为 12 小时格式？我不能 nessessarilly 使用日期时间，因为正在检索的数据不是特定于日期的。

16:45:00 --> 下午 4:45

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:24:08.680

尝试使用这个：

```
DECLARE @aux NVARCHAR(8)='16:45:00'
SELECT CONVERT(VARCHAR(15),CAST(@aux AS TIME),100) 
```

# iphone - 如何在 iPhone 应用程序中连接到 MongoDB？

> ID：11745959
> 
> 赞同：1
> 
> 时间：2012-07-31T17:41:55.240
> 
> 标签：iphone, objective-c, mongodb

现在我有一个 iPhone 应用程序，基本上我想从服务器上的数据库（MongoDB）交换数据。

你能告诉我具体应该怎么做吗？

原谅我的清白，我是这方面的初学者......非常感谢您提前！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T18:04:51.827

我认为您有两种选择可以与 mongo 交谈：

1）使用其余接口[http://www.mongodb.org/display/DOCS/Http+Interface](http://www.mongodb.org/display/DOCS/Http+Interface)

2）使用Objective-C驱动：[https ://github.com/timburks/NuMongoDB](https://github.com/timburks/NuMongoDB)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T18:49:24.157

如果您不完全依赖 MongoDB，请查看 CouchDB。它本质上与 MongoDB（JSON 文档存储）相同，但用于 Web。他们有一个很好的内置 REST 接口，这使得移动/服务器环境中的数据库交互非常好。

[http://couchdb.apache.org/](http://couchdb.apache.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T18:34:56.653

除了 Sid 的选项之外，您还可以构建自己的与 mongodb 对话的后端，该后端通过 REST（使用您选择的语言）进行通信。通过这种方式，您可以在后端汇集您的连接，并避免来自设备的连接问题。

# php - 是否有正确的方法来指示注释解析器忽略文档块内的注释？

> ID：11745961
> 
> 赞同：1
> 
> 时间：2012-07-31T17:42:01.063
> 
> 标签：php, annotations, phpdoc

假设我有一个 docblock 注释，它被解析，例如，phpDocumentor 和任何注释解析器（比如说 Doctrine common）。

```
<?php
/**
 * @author Blah <blah@example.com>
 * Class to handle the generation of lorem ipsum text for our templates
 * To declare as a service in the DIC, __uncomment__ the following annotation
 * @DIC\Service("textgenerator.loremipsum")
 */
 class LipsumGenerator implements TextGeneratorInterface { } 
```

现在，我不希望`@DIC\Service`注释被默认解析，除非用户希望它被解析......显然我可以做任何事情来阻止它：将它存储在手册页而不是内联中，把它放在一个非docblock 注释等。

是否有一种正确且相对标准的方式来指示注释解析器**inline**以忽略 docblock 内的注释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:29:09.747

试试 --ignore-tags 参数 -- [http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html#using.command-line.ignore-tags](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html#using.command-line.ignore-tags)

如果你想创建一个这样的注释的“永久列表”被忽略，你最好的选择是一个自定义的配置文件，你在运行 phpDocumentor 时总是使用它。您可以构建一个不断增长的注释标签列表，以被所有使用配置文件的 phpDocumentor 运行忽略。

[http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html#using.config-files](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_phpDocumentor.howto.pkg.html#using.config-files)

# javascript - 如何在同一个表单上有两种不同类型的日历？

> ID：11745962
> 
> 赞同：1
> 
> 时间：2012-07-31T17:42:01.550
> 
> 标签：javascript, jquery, datebox

我有兴趣根据网站是在移动设备还是台式机上浏览来更改日历。

这个 jQuery 有日历模式和 Android 模式。 [http://dev.jtsage.com/jQM-DateBox/](http://dev.jtsage.com/jQM-DateBox/)

我怎样才能让它根据浏览器的大小而改变？

我会用这样的东西吗

```
document.documentElement.clientWidth 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:23:35.347

最好检测浏览器 user_agent 并相应地显示 jquery 日历。下面是一个代码示例：

```
if(navigator.userAgent.indexOf("Android") >= 0 || navigator.userAgent.indexOf("iPhone") >= 0) { 
// Show mobile calendar
} else {
// Show desktop calendar
} 
```

# c# - 在 IF 条件下出现此错误

> ID：11745963
> 
> 赞同：-2
> 
> 时间：2012-07-31T17:42:03.527
> 
> 标签：c#, c#-4.0

在这里我要注册一个用户。最后我想检查是否注册成功然后需要转到下一页..我在 IF 条件中遇到错误

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection("Data Source=AAZZZ;Initial Catalog=DRDB;User ID=sa;Password=sa123");
        SqlCommand cmd = new SqlCommand("UserRegistration_SP", con);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@Firstname", TextBox1.Text);
        cmd.Parameters.AddWithValue("@Lastname", TextBox2.Text);
        cmd.Parameters.AddWithValue("@Username", TextBox3.Text);
        cmd.Parameters.AddWithValue("@Password", TextBox4.Text);
        cmd.Parameters.AddWithValue("@ConfirmPassword", TextBox5.Text);
        cmd.Parameters.AddWithValue("@Address1", TextBox6.Text);
        cmd.Parameters.AddWithValue("@Address2", TextBox7.Text);
        cmd.Parameters.AddWithValue("@Address3", TextBox8.Text);
        cmd.Parameters.AddWithValue("@Telephone", TextBox9.Text);
        cmd.Parameters.AddWithValue("@Email", TextBox10.Text);

        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();

        if (Registration == Successful)
        {
            Response.Redirect("Registration2.aspx");
        }
        else {
            lblinfo.Text = "Some error has happend";
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:49:12.583

您是否只是想确定 SQL 查询是否处理/影响了任何行？

```
 SqlConnection con = new SqlConnection("Data Source=AAZZZ;Initial Catalog=DRDB;User ID=sa;Password=sa123");
    SqlCommand cmd = new SqlCommand("UserRegistration_SP", con);
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.Parameters.AddWithValue("@Firstname", TextBox1.Text);
    cmd.Parameters.AddWithValue("@Lastname", TextBox2.Text);
    cmd.Parameters.AddWithValue("@Username", TextBox3.Text);
    cmd.Parameters.AddWithValue("@Password", TextBox4.Text);
    cmd.Parameters.AddWithValue("@ConfirmPassword", TextBox5.Text);
    cmd.Parameters.AddWithValue("@Address1", TextBox6.Text);
    cmd.Parameters.AddWithValue("@Address2", TextBox7.Text);
    cmd.Parameters.AddWithValue("@Address3", TextBox8.Text);
    cmd.Parameters.AddWithValue("@Telephone", TextBox9.Text);
    cmd.Parameters.AddWithValue("@Email", TextBox10.Text);

    con.Open();
    int result = cmd.ExecuteNonQuery();
    con.Close();

    if (result > 0) // I assume you want rows to be affected
    {
        Response.Redirect("Registration2.aspx");
    }
    else
    {
        lblinfo.Text = "Some error has happend";
    } 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx) - “对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受两个插入影响的行数或更新操作和触发器或触发器影响的行数。对于所有其他类型的语句，返回值为-1。如果发生回滚，返回值也是-1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:48:39.827

我假设您正在执行插入或更新，但不确定值是什么`Registration == Succesful`或如何获取它们

所以检查`if cmd.ExecuteNonQuery()`不是`return -1`因为`-1 means a rollback`

```
 con.Open();
    int result = cmd.ExecuteNonQuery();
    con.Close();

    if (result != -1)
    {
        Response.Redirect("Registration2.aspx");
    }
    else {
        lblinfo.Text = "Some error has happend";
    } 
```

# ajax - Ajax 验证后提交（jQuery Mobile + Validator）

> ID：11745965
> 
> 赞同：0
> 
> 时间：2012-07-31T17:42:12.907
> 
> 标签：ajax, jquery, jquery-mobile, jquery-validate, submit

我无法让这个工作。它按预期验证字段，但无论我尝试什么，我都无法正确挂钩提交。

这是我的表格：

```
<form action="" id="m-frm-contact_us" class="m-contact_submit" method="post" data-ajax="false">
  <input type="text" name="firstName" placeholder="FIRST NAME" title="" id="first" class="contact full required" minlength="2" maxlength="36" />
  <input type="text" name="lastName" placeholder="LAST NAME" id="last" class="contact full required" minlength="2" maxlength="36" />
  <input type="email" name="mail" placeholder="E-MAIL ADDRESS" id="mail" class="contact full required email" />
  <button type="submit" name="submit_contact" value="clicked">Submit</button>
</form> 
```

我的 JS：

```
$(document).ready(function(){
    $.validator.addMethod(
        'placeholder', function(value, element) {
            return value != $(element).attr("placeholder");
        }, 'This field is required.'
    );

    $("#m-frm-contact_us").validate({
        rules: {
            firstName: {
                required: true,
                minlength: 5,
                placeholder: true
            },
            lastName: {
                required: true,
                minLength: 5,
                placeholder: true
            },
            mail: {
                required: true,
                email: true,
                placeholder: true
            }
        },
        messages: {
            firstName: "First name is required.",
            lastName: "Last name is required.",
            email: "Valid email address is required."
        },
        submitHandler: function(form) {
            console.log('submitHandler fired.');
            contact.submit();
            return false;
        }
    });

    $('#m-frm-contact_us').submit(function(e){
        console.log('Submit event fired.');
        e.preventDefault();
        return false;
    });

    var contact = {
        submit : function(){
            console.log('Form is being submitted.');
        }
    };
}); 
```

我在控制台中唯一得到的是“提交事件已触发。”，在表单提交时调用。尽管我努力了，表单总是试图向自己发布，重新加载页面。

我想在提交时执行此代码：

```
var contact = {
    submit : function(){
        console.log('Form is being submitted.');
        var _this = this,
        post = $.post("/path/to/submit.php", $("#m-frm-contact_us").serialize(), function(response){
            try{
                if(response==1) {
                    _this.passed();
                } else {
                    _this.error();
                }
            }
            catch(e){
                if(typeof e == 'string') console.log(e);
                _this.error();
            }
        });
    },
    error : function(){ $.mobile.changePage("#error"); },
    passed : function(){ $.mobile.changePage("#passed"); }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:46:23.877

我重建了 JS，并且能够让它工作。这是代码，以防有人遇到类似问题：

形式：

```
<form action="" method="post" id="m-frm-contact_us" novalidate="novalidate">
    <input type="text" name="firstName" placeholder="FIRST NAME" title="" id="first" class="contact full required placeholder noSpecial" minlength="2" maxlength="36">
    <input type="text" name="lastName" placeholder="LAST NAME" id="last" class="contact full required placeholder" minlength="2" maxlength="36">
    <input type="email" name="mail" placeholder="E-MAIL ADDRESS" id="mail" class="contact full required email">
    <button type="submit" name="submit_contact" value="clicked">Submit</button>
</form> 
```

JS：

```
$.validator.addMethod('noPlaceholder', function(value, element) {
    return value !== element.defaultValue;
}, 'This field is required.');
$.validator.addMethod(
    'placeholder', function(value, element) {
        return value != $(element).attr("placeholder");
    }, 'This field is required.'
);
$.validator.addMethod("regex", function(value, element, regexp) {
    var check = false;
    var re = new RegExp(regexp);
    return this.optional(element) || re.test(value);
}, "No special Characters allowed here. Use only upper and lowercase letters (A through Z; a through z)");

$('#m-frm-contact_us').submit(function(event) {
    event.preventDefault();

    if($(this).validate({
        rules : {
            first_name : {
                required : true,
                maxlength : 36,
                regex : /^[A-Za-z\s`'"\\-]+$/
            },
            last_name : {
                required : true,
                maxlength : 36,
                regex : /^[A-Za-z\s`'"\\-]+$/
            }
        }
    }).form()) {
        var $form = $(this), formData = {
            firstName : $form.find('#first').val(),
            lastName : $form.find('#last').val(),
            mail : $form.find('#mail').val()
        };
        $.post('/path/to/submit.php', formData, function(response) {
            if(response == 1) {
                $.mobile.changePage("#passed");
            } else {
                $.mobile.changePage("#error");
            }
        })
    };

    return false;
}) 
```

# python - threading.Timer TypeError：需要一个整数

> ID：11745966
> 
> 赞同：1
> 
> 时间：2012-07-31T17:42:15.333
> 
> 标签：python, timer, typeerror

我正在尝试编写在双击 CTRL 后执行某些操作的脚本。第一次双击后效果很好，但后来我得到了那个错误。此外，如果我在计时器执行功能触发后一次又一次地按 CTRL，我会得到同样的错误。

```
import pythoncom, pyHook, threading

press = False

def triger():
    global press
    press=False

def something():
    print 'hello'

def OnKeyboardEvent(event):
    global press
    if event.Key=='Lcontrol':
        if press:
            something()
            press = False
        else:
            press=True
            threading.Timer(1,triger).start()

hm = pyHook.HookManager()
hm.KeyDown = OnKeyboardEvent
hm.HookKeyboard()
pythoncom.PumpMessages() 
```

错误：

```
hello

Warning (from warnings module):
  File "C:\Python27\lib\threading.py", line 828
    return _active[_get_ident()]
RuntimeWarning: tp_compare didn't return -1 or -2 for exception
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\pyHook\HookManager.py", line 351, in KeyboardSwitch
    return func(event)
  File "C:\Users\123\Desktop\code\hooks.py", line 20, in OnKeyboardEvent
    threading.Timer(1,triger).start()
  File "C:\Python27\lib\threading.py", line 731, in Timer
    return _Timer(*args, **kwargs)
  File "C:\Python27\lib\threading.py", line 742, in __init__
    Thread.__init__(self)
  File "C:\Python27\lib\threading.py", line 446, in __init__
    self.__daemonic = self._set_daemon()
  File "C:\Python27\lib\threading.py", line 470, in _set_daemon
    return current_thread().daemon
  File "C:\Python27\lib\threading.py", line 828, in currentThread
    return _active[_get_ident()]
TypeError: an integer is required 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T16:27:11.060

根据[文档](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=PyHook_Tutorial)，在 OnKeyboardEvent 函数的末尾必须有“return True”。这是它的样子。

```
def OnKeyboardEvent(event):
    global press
    if event.Key=='Lcontrol':
        if press:
            something()
            press = False
        else:
            press=True
            threading.Timer(1,triger).start()
            print 'waiting'
    return True 
```

# php - 在 PHP 中执行纯匿名函数

> ID：11745969
> 
> 赞同：3
> 
> 时间：2012-07-31T17:42:30.010
> 
> 标签：php, closures, anonymous-function

在 PHP 中执行匿名函数的建议方法是什么，类似于 Javascript 提供这种可能性的方式？

Javascript：

```
(function(){ console.log('Hello!'); })(); 
```

在 PHP 中尝试相同的方法会导致参数左括号出现语法错误。我通过“误用” call_user_func() 找到了解决此问题的方法：

PHP：

```
call_user_func(function(){ echo "Hello!"; }); 
```

但是[PHP 文档](http://de.php.net/call_user_func)（**更新：**文档的*德语*版本）明确表示 call_user_func() 的第一个参数应该是一个字符串......所以我不确定我的解决方案是否应该正确工作（但是，它确实适用于此时此刻）。

这个解决方案背后的目的——类似于你在 JavaScript 中这样做的原因——是为了不污染一些附加功能的全局命名空间。此脚本会自动添加到整个服务器上的所有脚本，并且应该隐藏在全局命名空间和全局范围内。它并不意味着不可见 - 只是将符号保留在命名空间之外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:43:53.837

> 但是 PHP 文档明确指出 call_user_func() 的第一个参数应该是一个字符串

不，它没有。

> `mixed call_user_func ( **callable $callback** [, mixed $parameter [, mixed $... ]] )`

第一个参数是 type `callable`，所以你的代码是完全有效的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:44:13.010

你的解决方案是合适的。第一个参数`call_user_func`应该是一个[callable](http://us.php.net/manual/en/language.types.callable.php)，一个包含闭包的类型。

# objective-c - 当在键盘上按下回车键时显示一些文本

> ID：11745974
> 
> 赞同：1
> 
> 时间：2012-07-31T17:42:47.850
> 
> 标签：objective-c, ios, list, textview

这就是我希望应用程序执行的操作。

点击“文本视图”而不是“文本字段”，然后显示键盘并弹出一个项目符号（“\u2022”）。你输入你的句子，当你按下回车键时，它会生成一个新的子弹。

所以本质上，你有一个文本视图，它是一个项目符号列表。就像 Word 一样，您开始一个项目符号，当您按下回车键时，它会为您创建一个新项目符号，因此您可以在该行开始输入。

![我希望我的应用程序做什么](../Images/04bbc41f293f131c263d4c175d339bcd.png)

我该怎么做呢？

这对像我这样的任何其他愚蠢的菜鸟都有效：

我把它放到我的 .m 文件中

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range  replacementText:(NSString *)text
{
if([text isEqualToString:@"\n"])
{
NSString *modifiedString = [myTextView.text stringByAppendingString:@"\n\u2022"];
[myTextView setText:modifiedString];
return NO;
}
return YES;
} 
```

我把它放到我的 .h 文件中

```
@interface CRHViewController3 : UIViewController <UITextViewDelegate> {

    __weak IBOutlet UITextView *myTextView; 

} 
```

然后我把它放在我的 viewDidLoad 下

```
 - (void)viewDidLoad
{
    [super viewDidLoad];

[myTextView setDelegate:self];   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:26:08.483

试试这个。

```
(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if([text isEqualToString:"\n"])
    {
        NSString *modifiedString = [textView.text stringByAppendingString:@"\n\u2022"];
        [textView setText:modifiedString];
        return NO;
    }
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:10:28.193

`-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text`将为删除时输入的每个字母调用该方法。因此，在这种方法中，您可以尝试用项目符号字符替换所有换行符。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
...
   textView.text = [textView.text stringByReplacingOccurrencesOfString:@"\\n" withString:@"\u2022"];
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T19:07:03.210

要使用此代码：

```
(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if([text isEqualToString:"\n"])
    {
        NSString *modifiedString = [textView.text stringByAppendingString:@"\n\u2022"];
        [textView setText:modifiedString];
        return NO;
    }
    return YES;
} 
```

您的头文件必须如下所示：

```
@interface MyViewController : UIViewController <UITextViewDelegate> {

   //instance variables in here
} 
```

# asp.net-mvc-3 - 页面内的 MvcSiteMapProvider 子菜单

> ID：11745977
> 
> 赞同：1
> 
> 时间：2012-07-31T17:43:00.877
> 
> 标签：asp.net-mvc-3, mvcsitemapprovider

我有一个使用 MvcSiteMapProvider 进行主导航的网站。我遇到了一个我无法弄清楚的场景。

我的网站有以下导航：

![导航截图](../Images/c1fe7d1d9b57ebdfc72df6d1ef6fc895.png)

站点地图如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0" enableLocalization="true">
<mvcSiteMapNode title="Look Up" controller="Lookup" action="Index">
    <mvcSiteMapNode title="PackingList" controller="PackingList" action="Index"> 
        <mvcSiteMapNode title="Configuration" controller="Configuration" action="Printers">
            <mvcSiteMapNode title="Printers" controller="Configuration" action="Printers" />
            <mvcSiteMapNode title="Quick List" controller="Configuration" action="QuickList" />
        </mvcSiteMapNode>
    </mvcSiteMapNode>
</mvcSiteMap> 
```

我一直无法弄清楚如何正确地利用站点地图可靠地进行侧选项卡导航。我还需要保持选中配置选项卡以及活动侧选项卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:23:30.050

当两个节点具有相同的控制器和动作名称时，SiteMapProvider 无法确定哪个节点处于活动状态，它总是选择第一个匹配的节点，在本例中为“配置”。

选择两个节点的唯一方法是：

1.  使用打印机菜单的不同操作
2.  更改了显示模板以使用 CSS 类或类似的方式指示当前路径中的节点

# asp.net-mvc-3 - MVC 3 EF 从模型中检索多对一

> ID：11745978
> 
> 赞同：0
> 
> 时间：2012-07-31T17:43:12.080
> 
> 标签：asp.net-mvc-3, entity-framework, linq-to-entities

我正在创建一个页面，该页面将显示过去 7 天内创建的 6 个博客。该博客包含一张图片和多条评论

这是博客模型

```
public class Blog
{
    public int BlogID { get; set; }
    public int likes { get; set; }
    public int ImageID { get; set; }
    public Boolean removed { get; set; }
    public DateTime dte_created { get; set; }
    public DateTime? dte_modified { get; set; }
    public virtual Image Image { get; set; }
    public virtual ICollection<Comment> Comment { get; set; }
} 
```

这是博客内容。

```
public class Image
{
    public int ImageID { get; set; }
    public string img_path { get; set; }
    public string Description { get; set; }       
    public DateTime dte_created { get; set; }
}

public class Comment
{
    public int CommentID { get; set; }
    public string Commentation { get; set; }
    public int likes { get; set; }
    public int BlogID { get; set; }
    public DateTime dte_created { get; set; }
    public DateTime? dte_modified { get; set; }
    public Boolean removed { get; set; }
    //public virtual int Account_ID { get; set; }
    public virtual Blog Blog { get; set; }
} 
```

这是控制器

```
private ACaptureDB db = new ACaptureDB();        

public ViewResult Index()
{
    ViewBag.Message = "ArchiCapture";
    var dateCheck = DateTime.Now.AddDays(-7);

    var results = from r in db.Blog
                  where r.dte_created >= dateCheck
                  select r;

    return View(results);
} 
```

和我的观点。

```
@model IEnumerable<ACapture.Models.Blog>

@{
    ViewBag.Title = "Home Page";
}

<div class="Forum">
    <p>The Forum</p>

    <form class="Forum" runat="server">
            @foreach (var item in Model)
            {

                <div class="ForumChild"><img src="@item.Image.img_path" alt="Not Found" />
                <br />
                    <table>
                        ?????????
                    </table>
                </div>                

            }
    </form>
</div> 
```

我将如何检索链接到博客的所有评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:02:13.473

您应该能够遍历模型博客对象中的 Comments 集合：

```
<table>
    @foreach(var comment in Model.Comments) {
         <tr>
            <td>@comment.Commentation</td>
            ....
         </tr>
    }
</table> 
```

# c# - Grid ColumnDefinition 星宽超出了父容器的边界

> ID：11745984
> 
> 赞同：1
> 
> 时间：2012-07-31T17:43:30.550
> 
> 标签：c#, wpf, xaml, user-interface, .net-4.0

我将网格行设计为另一个网格，在两列之间以 20/80 的比例分割，左侧的最小宽度为 250：

```
 <Grid Grid.Row="1" HorizontalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" MinWidth="250"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0" Background="Red" />
        <Grid Grid.Column="1" Background="Blue" />
    </Grid> 
```

在宽度大于 1250 时，这可以按预期工作，但是一旦我缩小到该值以下，第一列就会停止收缩（应该如此），因为它已经达到 250，但第二列继续以与以前相同的速度收缩（而不是以与周围窗口相同的速度倒塌）。结果是部分内容被剪掉了，即使网格设置为拉伸到其容器：

![在此处输入图像描述](../Images/4b44fb0ed0acbdd87242fd3d46db4d6f.png)

为什么蓝框没有像其他星宽列那样调整大小以适应其父容器？为什么设置最小宽度突然打破了这一点？

* * *

更新：我在一个示例窗口中重建了我的整个 UI（通过简单地用边框替换每个部分的内容），并且无法重现该问题：

![在此处输入图像描述](../Images/071851b0f8b4224bd6f9627f7b7c298b.png)

内容（没有遇到任何 MinWidth 约束并且似乎也在正确调整大小，尽管像它们的父网格列一样太慢）仍然以某种方式影响网格列？原件在 UserControl 中而这是在 Window 中的事实又如何呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:31:45.977

抱歉 - 鉴于原始问题中的信息，无法回答这个问题。

对我来说不幸的是，问题是 Xceed DataGridControl 实现中的一个错误。通过简单地将每个 DataGridControl 替换为我的原始 UI 中的边框或其他控件，所有元素的大小都将调整为应有的大小。

问题不在于 DataGridControls 遇到了它们自己的大小限制。事实上，他们在调整窗口大小时继续调整自己的大小，但他们弄错了。我的猜测是，他们的实现依赖于遍历层次结构或父 UI 元素，并根据他们计算出的可用空间来调整自己的大小。我发现只要规定其中一个父元素的确切宽度就可以解决这个问题。如果父元素使用星形大小，并且这些宽度受列定义的限制以具有最大或最小宽度或高度，则 Xceed DataGridControl 会忽略并错误地请求大于或小于可用大小的大小，即使它被告知拉伸以适应其父控件。

我发现唯一不涉及抵制 Xceed（这很诱人）的解决方法是重新设计布局，以便第一列不会随窗口的其余部分一起增长，并且只是固定在其最小宽度：

```
 <Grid Grid.Row="1" HorizontalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0" Background="Red" />
        <Grid Grid.Column="1" Background="Blue" />
    </Grid> 
```

它在大分辨率屏幕上看起来很奇怪并且不成比例地被挤压，但是任何在自动调整宽度时限制宽度的尝试都会导致所描述的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:06:23.717

这是完全正确的。在您的定义中，您定义第一列的宽度必须至少为 250。因此 1* 也​​必须至少为 250。您的第二列宽度必须是您的第一列乘以 4 的值。对不起，我的英语不好，希望您能理解。我找不到一个简单快速的解决方案。也许您必须将第二列的 MaxWidht 属性绑定到网格的 ActualWidth 属性，然后将该值减少 250。

# javascript - JSON 不允许：\

> ID：11745985
> 
> 赞同：1
> 
> 时间：2012-07-31T17:43:34.013
> 
> 标签：javascript

[演示](http://jsfiddle.net/rRuHm/)

```
alert('How do i make abspath==U:\\path?'); //shouldnt i only need one \?
alert(JSON.stringify({abspath:'U:\path'})); //wtf
alert(JSON.stringify({abspath:'U:\\path'}));//wtf2
//alert(JSON.stringify({abspath:'U:/path'}));//different
alert(JSON.stringify({abspath:"U:\path"}));  //even here!?
alert(JSON.stringify({abspath:"U:\\path"})); //fuuuuuuuuuuuuu 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:47:25.487

当脚本输出`{"abspath":"U:\\path"}`时，这是一个有效的 JSON 字符串。它**看起来**不像是一个有效的对象，因为它仍然被转义——JSON 字符串并不是为了人类可读的。

如果你要解码那个字符串，你最终会得到想要的值。您的输出仍然被转义，因为它应该是，等待解码。如果它没有在编码字符串中转义，您将无法对其进行解码。

见发生： http: [//jsfiddle.net/dhzMQ/1/](http://jsfiddle.net/dhzMQ/1/)（需要可用性`console`）

**延伸阅读**

*   JSON 规范 - [http://www.json.org/](http://www.json.org/)
*   转义示例 - [http://code.google.com/p/json-simple/wiki/EscapingExamples](http://code.google.com/p/json-simple/wiki/EscapingExamples)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T17:49:54.330

```
alert( JSON.stringify({abspath:"U:\\path"}) ) 
```

这是正确的，您需要`\\`JSON 格式，因为这就是 \ 的存储方式。

您可以通过解析该 JSON 并查询 abspath 来判断。

```
alert(JSON.parse(JSON.stringify({abspath:"U:\\path"})).abspath); 
alert( JSON.stringify({abspath:"U:\\path"}) ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T17:57:12.593

存储在对象中的字符串：

```
JSON.parse(JSON.stringify({"abspath": "U:\\path"})).abspath 
```

...只有一个`\`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T17:45:41.350

有效的 JSON 在键和值周围有引号

```
{"abspath":"U:\\path"} 
```

为我工作

```
JSON.stringify({"abspath":"U:\\path"}); 
```

# php - PHP没有收到单选按钮的值

> ID：11745989
> 
> 赞同：4
> 
> 时间：2012-07-31T17:43:45.813
> 
> 标签：php, html, forms

我正在使用 PHP 网页为我提供特定文件夹中所有扩展名为 .264 的文件的列表。然后选择该文件并将其发送到命令以在连接到计算机的显示器上播放视频。

我在尝试让单选按钮保持其值时遇到困难，因此当它们被选中并按下表单按钮时，它们不知道它们的值，因此无法执行脚本。

我知道该脚本有效，因为我仅使用填空式表单对其进行了测试，并且没有任何问题。

现在我使用单选按钮列出文件以选择文件并将其提交到表单以播放，但它没有像我希望的那样工作。

我环顾四周并试图弄清楚。我不确定是否需要使用链表或其他东西而不是数组。这是我第一次做 php 编码，所以我不确定我应该从哪里开始尝试解决这个问题。

```
<?php
$FileCount = 0;
$currentdir = '/data/'; //Location of Hard Drive
$dir = opendir($currentdir);
$array = array();
echo '<ul>';
while ($File = readdir($dir)){

//if (is_file($file))

$ext = pathinfo($File, PATHINFO_EXTENSION);
if ($ext == '264'){

$array[] = "$File";

echo "<INPUT class='radio' type='radio' name='FileName' value='$File' /> <span>$File</span><p>";    

$FileCount++;   
}

}

echo '<form action="test.php" method = "post">';

echo "<INPUT TYPE = 'Submit' name = 'FormSubmit' value = 'Submit'>";

echo '</form>';

if ($_POST['FormSubmit'] == "Submit")
{
echo $_POST["FileName"];

 } 
```

此代码不会返回任何内容。任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:47:00.243

如果您希望单选按钮控件的值与表单帖子一起发送，则控件本身必须是表单元素的子元素。

```
<form method = "post" action = "">
<?php while ($File = readdir($dir)) { 
        if(pathinfo($File, PATHINFO_EXTENSION) == '264')) { ?>

        <input type = "radio" ... >
<?php 
        }
    } 
?>

    <input type = "submit" value = "Submit" name = "FormSubmit">
</form> 
```

正如您现在所拥有的，单选按钮存在于表单之外，因此它们不是表单的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:47:23.723

```
echo '<form action="test.php" method = "post">'; 
```

在下面添加此代码

```
while ($File = readdir($dir)){ 
```

# google-apps-script - 将密件抄送电子邮件地址添加到 gmail 邮件合并脚本

> ID：11745990
> 
> 赞同：1
> 
> 时间：2012-07-31T17:43:48.170
> 
> 标签：google-apps-script, gmail

Romain Vialard 和 labnol 在 gmail 邮件合并脚本方面做得很好： [http ://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981](http://www.labnol.org/internet/personalized-mail-merge-in-gmail/20981)

该脚本可让您指示是否要对所有发送的电子邮件进行密件抄送。它假定要包含在密件抄送中的电子邮件地址是您发送邮件的地址。

如何更改脚本以允许我密件抄送一个不同的电子邮件地址，而不仅仅是我发送的那个？

换句话说，我希望能够将任何电子邮件地址输入到 BCC，例如“emailtosalesforce@n-xvh0q8 2w.31ghxkeac.3.le.salesforce.com”

原因：我是 Salesforce.com 的用户，在在线系统中自动记录电子邮件的一种简单方法是密件抄送“电子邮件至 Salesforce.com”地址，例如“emailtosalesforce@n-xvh0q8 2w.31ghxkeac.3。 le.salesforce.com”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:50:41.867

您可以将此电子邮件地址作为密件抄送放在脚本本身中。您是否正在使用 Apps 脚本库中提供的“又一个邮件合并”？

如果您打开电子表格并单击工具 > 脚本编辑器，您可以编辑脚本。在脚本中搜索“bcc”并添加您要用作密件抄送的电子邮件地址。

例如：密件抄送：“emailtosalesforce@n-xvh0q8 2w.31ghxkeac.3.le.salesforce.com”

查看文档以获取更多解释： [https ://developers.google.com/apps-script/class_gmailapp#sendEmail](https://developers.google.com/apps-script/class_gmailapp#sendEmail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T22:38:23.403

此功能内置于“又一个邮件合并”中。在您的电子表格中添加一个名为“bcc”的列，它将自动用于电子邮件的密件抄送字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T15:32:25.650

旧版本要求您在脚本编辑器中修改 script/bcc 部分，不再使用“另一个邮件合并”。只需将名为“bcc”的列添加到电子表格（如 mdahlman 建议的那样）。完美运行。注意：没有显示电子邮件在发件箱中被密件抄送，但它有效（我使用唯一的密件抄送电子邮件用于电子邮件到销售人员，并且它记录得很好）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-09T23:43:08.010

如果您使用的是“又一个邮件合并”，请执行密件抄送搜索。代码读取 "bcc = (e.parameter.addMeAsBCCCheckbox == 'true') ? user : ''" replace "e.parameter.addMeAsBCCCheckbox == 'true') ? user : ''" 为您想要的电子邮件地址密送至。确保选中“我想收到每封已发送电子邮件的副本”

最终代码应如下所示：

```
 function startStandardMerge_(e) {
    var kind = (e.parameter.items == null) ? 'gmail' : 'docs';
    var selectedTemplate = GmailApp.getThreadById(e.parameter.chosenTemplate).getMessages()[0];
    var user = Session.getEffectiveUser().getEmail();
    var bcc = "EMAIL ADDRESS YOU WANT TO BCC TO";
    var name = e.parameter.chosenName;
    var from = e.parameter.chosenFrom;
    merge(kind, selectedTemplate, name, from, bcc); 
```

# c# - 如何删除表中的这种冗余？

> ID：11745992
> 
> 赞同：2
> 
> 时间：2012-07-31T17:43:51.573
> 
> 标签：c#, sql-server, database, database-design, relational-database

这是一个图书馆管理系统。

我有两张表，一张是`Books`带字段的`BookId, Title, AuthorId, PublisherId, ISBN, ISBN13, PublishedOn, NumberOfPages, etc etc.`

其他是`BookTransactions`包含向任何学生发行或从任何学生接收的书籍的所有交易，具有字段`TransactionId, BookId, IssuedOn, IssuedTo, ReceviedOn, etc. etc.`

现在的问题是，假设我有这本书`The God Delusion`，并且有 200 份。表中的条目`Books`将是这样的

```
7  The God Delusion  21  32  0618680004  978-0618680009 .....
8  The God Delusion  21  32  0618680004  978-0618680009 .....
9  The God Delusion  21  32  0618680004  978-0618680009 .....
10 The God Delusion  21  32  0618680004  978-0618680009 .....
.
.
. 
```

（200 行）。其他一切都完全相同，只是每本书有 200 个条目，现在我知道我可以有一个名为 的列`Quantity`，但是听到这个（这就是问题的原因）

一段时间后，表格`BookTransactions`可能看起来像这样

```
1   9    4/3/2012   ABC   __  
2   10   4/3/2012   PQR   __  
3   7    4/3/2012   XYZ   7/3/2012 
```

从而清楚地表明3本《神幻》书是在同一天发行的。好处是我可以检查是否发行了第 7 本书，如果没有，那么我可以发行它，像这样

```
sqlCommand.CommandText = "SELECT Count(*) FROM BookTransactions WHERE BookId=7 AND ReceivedOn is NULL";
// if a book is received, its in library and can be issued again
if (Int32.Parse(sqlCommand.ExecuteScalar().ToString()) == 0)
    bookInstance.IssueThisBook();
else
   MessageBox.Show("This book is already issued to someone, please select a different book"); 
```

现在有一个列数量的问题是说如果`Books`表看起来像这样

```
7  The God Delusion  21  32  0618680004  978-0618680009 ..... 200 
// the last one indicates quantity 
```

现在的条目`BookTransaction`将如下所示

```
1   7    4/3/2012   ABC   __ 
```

现在如果运行这段代码，

```
sqlCommand.CommandText = "SELECT Count(*) FROM BookTransactions WHERE BookId=7 AND ReceivedOn is NULL";
// if a book is received, its in library and can be issued again
if (Int32.Parse(sqlCommand.ExecuteScalar().ToString()) == 0)
    bookInstance.IssueThisBook();
else
   MessageBox.Show("This book is already issued to someone, please select a different book"); 
```

它会显示这本书是发给某人的，*即使只发行了一本，图书馆里还剩下 199 份。*

我知道有很多方法可以克服这个问题，我能想到的一种方法是做这样的事情

```
sqlCommand.CommandText = "SELECT Count(*) FROM BookTransactions WHERE BookId=7 AND ReceivedOn is NULL";
sqlCommandOther.CommandText = "SELECT Quantity FROM Books WHERE Bookid=7"
// if the count is not equal to total quantity then there are some books availabe in libray
if (Int32.Parse(sqlCommand.ExecuteScalar().ToString()) != Int32.Parse(sqlCommandOther.ExecuteScalar().ToString()))
    bookInstance.IssueThisBook();
else
// all books are currently issued
   MessageBox.Show("All copies of this book are already issued, please select a different book"); 
```

好吧，这是我能想到的唯一方法，但我知道这效率不高，我想知道是否有另一种方法可以消除仅因为有 200 个副本而在书中有 200 行的冗余？（我的意思是除了我在上一段中描述的任何其他方式。）实现我想要做的事情的最佳方式是什么。
我希望我说清楚了。

**编辑**StarPilot 的观点值得注意。我真的需要 200 条不同的行/记录吗？因为就像他指出的那样，如果某本书（例如 #50）丢失或损坏，我将如何追踪？考虑到这一点，它看起来确实必须有冗余，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T17:50:04.193

您必须区分书籍（标题）和副本。这意味着你应该有

1.  书籍表格，其中将包含有关书籍的信息，每本书只有一行；

2.  副本表，每本书包含与您拥有的副本一样多的行（最好带有一些序列号，允许您将一个副本与另一个副本区分开来），将 BookId 作为外键

3.  具有 CopyId 作为外键的事务的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T17:51:23.680

这在很大程度上取决于您需要如何处理这些数据。

如果您只关心是否有任何给定标题的书籍要发行，您可以完全按照您所做的那样使用数量字段，`Books`因为您可以在每次发行书籍时减少并在每次返回时增加。要知道是否还有剩余的副本，您只需要知道计数器是否大于零。如果您还需要跟踪当前发行的书籍数量，您也可以在`Books`表中保留原始数量，并使用它与当前数量进行比较。

如果您认为您将需要跟踪一本书的每个单独副本，您仍然可以通过将一本书的所有不变数据保留在`Books`表中并使用`BookInstance`表（或类似的东西）来保留大量冗余跟踪各个实例。这样，您仍然可以将发行交易链接到书籍的各个实例，但不会携带原始设计中包含的所有冗余数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T17:56:15.153

尝试像下面这样构建您的数据库。

```
Book { BookId, Title, AuthorId, PublisherId, ISBN, ISBN13, PublishedOn, NumberOfPages, etc }
BookStock { BookStockId, BookId, StockDateTime }
BookCheckOut { BookCheckOutId, BookStockId, CheckOutDate, CheckInDate, Quantity } 
```

该`BookStock`表将为每本书保留一行，并且`BookCheckOut`每次结帐时该表将保留一个新行。因此，通过以下查询找出有多少库存是微不足道的。

```
SELECT COUNT(bs.BookStockId) - (SELECT COUNT(bco.BookCheckOutId) FROM BookCheckOut bco WHERE bco.BookStockId = bs.BookStockId AND bco.CheckInDate IS NULL) FROM BookStock bs 
```

此外，使用此查询获取所有已`actual`签出的书籍非常简单。

```
SELECT * FROM BookCheckOut WHERE BookStockId = {id} AND CheckInDate IS NULL 
```

最后，你删除了这本书的重复，它只在数据库中一次。一般来说，在处理库存时，您需要跟踪所有交易，而不仅仅是数量。您可能会觉得有点过度设计，但该`BookStock`表可以很容易地用于以后放置它的存放者，或者甚至使用条形码扫描通过扫描 ISBN 号来存放书籍。想象一下扫描 ISBN 号，查找上面的书，然后在`BookStock`表格中添加一行，然后 BOOM 就添加了库存！

哦，最后您可以使用条码扫描非常轻松地办理登机手续，因为`BookCheckOut`可以轻松导航到`Book`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:50:26.793

您需要另一张桌子 - 称之为 BookMaster。它将包括一个 id 以及关于这本书的所有常见数据，例如标题、作者等。您当前的 Books 表将有一个 BookMasterId 列来连接这两个表。然后，您将拥有“The God Delusion”的单个 BookMaster 记录，并且您仍将拥有 200 个 Book 记录，因此您可以跟踪每个单独的副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T17:59:51.990

我建议使用一个新表“BookCopies”来跟踪不同的副本。CopyNumber、BookID（双主键）和状态“可用、丢失等”之类的东西

然后，您可以查询您的副本表以获取可用状态，而不是随着时间的推移可能会非常大的事务表。

# vb.net - TcpListener 主动拒绝连接

> ID：11745993
> 
> 赞同：2
> 
> 时间：2012-07-31T17:43:53.960
> 
> 标签：vb.net, connection, tcplistener

我正在维护一个使用 TcpListener 来侦听传入通信的应用程序。以下代码打开连接：

```
Dim listener As TcpListener
_listenFailed = False
Try
    listener = New TcpListener(System.Net.IPAddress.Parse(Me.Host), Me.Port)
    listener.Start()
Catch ex As Exception
    ' an error here means the settings are likely bogus
    _listenFailed = True
    Return
End Try

While Not _stoplistening
{
    ' Accept connection
} 
```

我遇到的问题是，当我从另一台计算机发送文件时，我收到错误“无法建立连接，因为目标计算机主动拒绝它。”

我检查了防火墙和防病毒软件，没有任何障碍。我用了

```
netstat -a -n 
```

确定端口处于活动状态并正在侦听。这两个应用程序都在管理员模式下从 Visual Studios 运行，这并不意味着这会有所作为。我在接受连接代码的第一行设置了一个断点，但它永远不会运行。

我停止了应用程序并检查了 TcpListener，如果我深入挖掘，就会发现有几个错误。在 TcpListener.LocalEndpoint.IPEndPoint.IPAddress.Address.ErrorCode 出现错误 10045，“OperationNotSupported”。此外，在 TcpListener.Socket.RemoteEndPoint.ErrorCode 处出现错误 1057，“不允许发送或接收数据的请求，因为套接字未连接，并且（在使用 sendto 调用在数据报套接字上发送时）未提供地址.我不知道这些错误中的任何一个是否相关。

如果有人对可能导致此问题的原因有任何见解，或者可以采取哪些步骤来追踪问题的根源，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:50:15.430

尝试改变这个：

```
listener = New TcpListener(System.Net.IPAddress.Parse(Me.Host), Me.Port) 
```

对此：

```
listener = New TcpListener(System.Net.IPAddress.Any, Me.Port) 
```

这将允许您跨所有网络接口进行侦听。

* * *

此外，如果您想以 IPv6 为目标，您可以使用`IPv6Any`而不是。`Any`这个选择显然对客户端使用的地址有影响。

# ios5 - 为什么飞行模式开启时 CLLocationManager 不会失败？

> ID：11745997
> 
> 赞同：0
> 
> 时间：2012-07-31T17:43:58.847
> 
> 标签：ios5, core-location, cllocationmanager, reachability, airplane

我有一个服务类是 CLLocationManager 的委托。如果我运行该应用程序，然后打开设置应用程序并打开飞行模式，我的委托从 CLLocationManager 中什么也得不到。

我希望 locationManager:didFailWithError 被调用，但事实并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T18:01:14.360

好吧，在飞行模式下似乎可以打开 Wi-Fi。开启飞行模式后，Wi-Fi 最初会关闭，但您可以从“设置”应用程序将其重新打开。这意味着 LocationServices 不一定被禁用，因为它们仍然可以使用 Wifi 网络进行定位。