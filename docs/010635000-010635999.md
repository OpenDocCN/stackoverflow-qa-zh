# StackOverflow 问答 10635000-10635999

# java - 如何通过Java中的Streamtokenizer读取以0开头的数字

> ID：10635000
> 
> 赞同：0
> 
> 时间：2012-05-17T11:37:50.863
> 
> 标签：java

我尝试使用 Streamtokenizer 读取像“0900”这样的时间输入，但输出总是“900”，有没有办法输出像“0900”这样的整个数字？我尝试谷歌了一下，但没有什么真正的工作......

```
for example 
if(f.ttype != StreamTokenizer.TT_NUMBER ){
    System.out.println("not a src time"); 
} else {
    int Dtime =(int) f.nval;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:44:15.743

使用`String.format("%04d", theTime);`4 位数的时间。

# python - python 2.x 返回 cmp 的值

> ID：10635002
> 
> 赞同：12
> 
> 时间：2012-05-17T11:37:53.443
> 
> 标签：python, python-2.x

引用自[文档](http://docs.python.org/library/functions.html#cmp)：

> `cmp(x, y)`
> 
> 比较两个对象 x 和 y 并根据结果返回一个整数。返回值为负 if `x < y`，零 if`x == y`和严格正 if `x > y`。

我假设返回值总是`-1`, `0`，`1`但是文档没有明确说明，只提到零和正/负返回值。

是否存在返回值`cmp(x,y)`不是`-1`, `0`, 或的情况`1`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T11:46:22.157

不，文档明确说 yalues 可以是任何东西。唯一指定的值是`0`比较对象是否相等。不要相信您只看到值和`-1`，这是一个实现细节并且可能会更改*，因此请始终检查和0。`0``1``<``>`

*：注意 - 实际上，它不会真的有机会改变，因为`cmp`在 pyhton3 中已经消失了。改为使用[丰富的比较](http://www.python.org/dev/peps/pep-0207/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:04:21.087

只有 0 可以依赖，虽然文档字符串`list.sort`很有趣：

```
print list.sort.__doc__
L.sort(cmp=None, key=None, reverse=False) -- stable sort *IN PLACE*;
cmp(x, y) -> -1, 0, 1 
```

但实际上， sort 实际上并没有将其强加于它的比较函数，如下所示：

```
def mycmp(a, b):
    print "mycmp(): a - b = ", a - b
    return a - b

L = [50, 30, 20, 40, 70, 50]

>>> L.sort(cmp=mycmp)
mycmp(): a - b =  -20
mycmp(): a - b =  -10
mycmp(): a - b =  20
mycmp(): a - b =  10
mycmp(): a - b =  -10
mycmp(): a - b =  30
mycmp(): a - b =  20
mycmp(): a - b =  10
mycmp(): a - b =  -20
mycmp(): a - b =  0

>>> print L
[20, 30, 40, 50, 50, 70] 
```

只是为了兴趣，但显然`sort`正在愉快地使用 , 或 以外的值`-1`，`0`所以`+1`你也应该这样做！

# jquery - 使用 Jquery Masonry on Rails 3 应用程序时重叠的图像/位置不正确

> ID：10635003
> 
> 赞同：5
> 
> 时间：2012-05-17T11:37:55.667
> 
> 标签：jquery, jquery-masonry

我正在使用 jquery masonry 在我的网站上放置图像，但遇到了麻烦。

图像显示在彼此之上。以下是直播网站的链接：

[http://www.faisalandsamreen.com/meetus](http://www.faisalandsamreen.com/meetus)

如果您进行几次硬刷新，您将看到图像每次都在移动。

JS小提琴版本在这里：

[http://jsfiddle.net/8n76g/](http://jsfiddle.net/8n76g/)

我究竟做错了什么？？？

谢谢，

费萨尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T09:33:37.960

我想我遇到了和你一样的问题。

您需要将砌体代码放在一个`$(window).load(function(){ })`块中。将脚本内嵌到 HTML 中不是 Rails 方法。问题是您的脚本可能在图像下载之前被加载和调用，因此砌体无法确定它们的大小。只有在下载图像后才会调用此函数，然后才能正确布置它们。

# ios - 核心数据 - 输入屏幕不是我的初始屏幕？

> ID：10635009
> 
> 赞同：0
> 
> 时间：2012-05-17T11:38:12.210
> 
> 标签：ios, core-data, save

我正在制作一个包含用户输入表单的应用程序。现在使用情节提要，当我将上面有表单的 ViewController 设置为初始 View Controller 并在 APp Delegate 中设置 rootViewController 时，我可以放心地保存数据。

当我想将应用程序启动到另一个 ViewController 并有一个按钮链接到输入表单时，我可以填写表单，但是当我按下保存时，它告诉我它找不到有问题的实体。

下面的代码来自 appDelegate.m 文件，它设置为处理数据输入的 VC。我想设置它，以便当前注释掉的 ViewController 成为根，然后当我保存 AddDataVC 上的按钮时，它可以找到实体。

我很确定我的 CoreData 代码很好，因为它能够保存数据，但它只会在输入表单不是初始 ViewController 时崩溃。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.

AddDataVC *addDataVC = (AddDataVC *)self.window.rootViewController;
addDataVC.managedObjectContext = self.managedObjectContext;
//ViewController *controller = (ViewController *)self.window.rootViewController;
//controller.managedObjectContext = self.managedObjectContext;
return YES;
} 
```

提前致谢：-）

--*编辑*--

下面我从控制台粘贴了错误：

```
2012-05-17 23:46:37.288 SW_Vault[26604:15203] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'Product'' 
```

--编辑2--

好的，所以我想解释的是这个。当我使用实用程序应用程序之类的模板时，它允许我创建实体并设置一个文本字段和一个保存按钮，它可以很好地保存数据。图像不在故事板上。注意只有 1 个 VC，它是初始视图：

![在此处输入图像描述](../Images/0bdfeb0e2f3dec1a63b97d7f805f00da.png)

但是当我有另一个 VC 作为初始视图控制器时，它会出现无法找到实体的错误。这是我上面描述的错误。

![在此处输入图像描述](../Images/7c0e9feaf988e05cbc116af9cf227d43.png)

现在条目视图的代码没有改变，但是如果你看一下我在这个问题中发布的第一个 -(BOOL)，我可以在 2 个 rootViewController 之间进行选择，我只需将一个注释掉就可以使用另一个。

现在在第二张图片中，如果我将该板上的第二个 VC 设为初始 VC，那么我没有问题，只有当我通过 Segue 到达那里时。

我希望这更有意义:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:56:58.070

该错误意味着您可能没有加载定义`Product`.

为避免这种情况，`AppDelegate`您需要在代码中的某处（可能是 ）设置核心数据堆栈。

有关更多信息，我建议阅读[此 stackoverflow 帖子](https://stackoverflow.com/questions/1780929/insertnewobjectforentityforname)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:23:04.450

好吧，我有问题的答案:-)

我必须设置一个 Segue 才能让它工作。我在这里问了这个问题并得到了这个答案:-)

[Ray Wenderlich 论坛](http://www.raywenderlich.com/forums/viewtopic.php?f=2&p=21778#p21777)

# java - Hibernate中同一个类的多个一对多/一对一关系

> ID：10635016
> 
> 赞同：0
> 
> 时间：2012-05-17T11:38:38.963
> 
> 标签：java, hibernate

假设我有一个 Person、Building 和 Address 类。一个人可以有多个地址，而建筑物可以有一个地址。在数据库中，这三个都有自己单独的表。Address 表的链接方式是使用 fk_id 列和 type 列。通过将 person_id 存储为 fk_id 并将类型设置为“person”来存储人员的地址，而对于建筑物，您将 building_id 存储为 fk_id 并将类型设置为“building”。有什么方法可以映射这些关系，或者我需要将数据库转换为使用链接表并进行多对多还是只使用 HQL 来检索该数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:28:34.910

您可以像这样映射您的实体。

```
<class name="Address">
    <id name="addressId" column="addressId">
       <generator class="native"/>
    </id>
</class>

<class name="Person">
    <id name="personId" column="personId">
       <generator class="native"/>
    </id>
   <set name="addresses" table="PersonAddress">
       <key column="personId"/>
       <many-to-many column="addressId"
         unique="true"
         class="Address"/>
   </set>
</class>

<class name="Building">
    <id name="id" column="buildingId">
       <generator class="native"/>
    </id>
   <many-to-one name="address" 
      column="addressId" 
      unique="true"
      not-null="true"/>
</class> 
```

你只需要一个额外的表 PersonAddress。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:32:24.680

你可以这样映射：

```
@Entity
public class Address {
  @ManyToOne @JoinColumn(name="person_id")
  private Person person;

  @OneToOne @JoinColumn(name="building_id")
  private Building building;
}

@Entity
public class Person {
  @OneToMany(mappedBy="person", targetEntity=Address.class)
  private Set<Address> addresses;
}

@Entity
public class Building {
  @OneToOne(mappedBy="building")
  private Address address;
} 
```

在这个例子中，地址可以有一个人或一个建筑（它不应该同时有）。此外，Address 被认为是关系的所有者，而 Person 或 Building 是该关系的“反面”。

话虽如此，要创建对象图，您仍然可以使用级联保存（注释上的“级联”属性），以便您可以在内存中创建所有对象，并简单地保存人员或建筑物，它应该自动保存Address 对象以及它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T17:30:44.050

找到了答案，所需要的只是在集合上添加一个“where”条件。

# java - 签名小程序的问题

> ID：10635017
> 
> 赞同：3
> 
> 时间：2012-05-17T11:38:51.657
> 
> 标签：java, javascript, jnlp, next-generation-plugin, signed-applet

我正在开发一个仅在客户端执行加密/解密的应用程序。我正在使用 Spring、jdk 1.6+ 和 eclipse。我开发了一个包含密码代码的小程序，它看起来像：

```
public void accessToken(){
        try{
            File tmpConfigFile = File.createTempFile("pkcs11", "conf");
            tmpConfigFile.deleteOnExit();
            PrintWriter configWriter = new PrintWriter(new FileOutputStream(tmpConfigFile), true);
            configWriter.println("name=eToken");
            configWriter.println("library=" + "C:\\WINDOWS\\system32\\eTPKCS11.dll");
            configWriter.println("slotListIndex=0");
            configWriter.println("showInfo=true");

            this.pkcs11Provider = new SunPKCS11(tmpConfigFile.getAbsolutePath());
            Security.addProvider(this.pkcs11Provider);

            CallbackHandler cbh = new DialogCallbackHandler();
            KeyStore.Builder ksBuilder = KeyStore.Builder.newInstance("PKCS11", null, new KeyStore.CallbackHandlerProtection(cbh));                     
            KeyStore ks = ksBuilder.getKeyStore();
            ks.load(null, null);            
        }catch(Exception e){
            e.printStackTrace();
        }
    } 
```

我已经创建了 jar 文件并对其进行了签名，当我从 eclipse 将它作为“在 Java Applet 上运行”运行时它运行良好，它也运行良好，当我打开包含此小程序的 html 页面时，它会在页面加载时提示输入密码但是当我单击调用此 accessToken() 小程序方法的复选框，它在 java 控制台上给出错误，例如：

```
java.lang.SecurityException: Unable to create temporary file
    at java.io.File.checkAndCreate(Unknown Source)
    at java.io.File.createTempFile(Unknown Source)
    at java.io.File.createTempFile(Unknown Source)
    at message.MessageApplet.accessToken(MessageApplet.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.plugin.javascript.JSInvoke.invoke(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.plugin.javascript.JSClassLoader.invoke(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass$MethodInfo.invoke(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass$MemberBundle.invoke(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass.invoke0(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass.invoke(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$DefaultInvocationDelegate.invoke(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo.doObjectOp(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我的html页面看起来像：

```
<SCRIPT LANGUAGE="JavaScript">
            function selectedCity() 
            {
                var elem = document.getElementById('cityRb');

                if(elem.checked)
                {
                    document.messageApplet.accessToken();
                }      
            }
        </SCRIPT></HEAD>
    <BODY >
        <b>This is the Applet</b>
     <script src="http://www.java.com/js/deployJava.js"></script>
    <script>
        <!-- applet id can be used to get a reference to the applet object -->
        var attributes = { id:'messageApplet', code:'message.MessageApplet',  width:1, height:1} ;
        var parameters = {jnlp_href: 'message-applet.jnlp'} ;
        deployJava.runApplet(attributes, parameters, '1.6');
    </script>

    <FORM NAME="CityChoice">
        <input type="radio" id="cityRb" name="City" value="Boston" onClick="selectedCity()"> Boston<br>
    </form>
</BODY > 
```

我的 JNLP 文件看起来像：

```
<jnlp spec="1.0+" codebase="" href="">
    <information>
        <title>Message Applet</title>
        <vendor>Fountainhead</vendor>
    <offline-allowed/>
    </information>
<update check="background"/>
    <security>
    <all-permissions/>
    </security>
    <resources>
        <!-- Application Resources -->
    <j2se version="1.6+"
              href="http://java.sun.com/products/autodl/j2se"/>
        <jar href="message.jar" main="true" />

    </resources>
    <applet-desc 
         name="Message Applet"
         main-class="message.MessageApplet"
         width="300"
         height="300">
     </applet-desc>
     <update check="background"/>
</jnlp> 
```

所有文件和 jar 都在同一个目录中，我的小程序类在消息文件夹中，请帮助我，我被困在这里......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:52:03.690

发生这种情况是因为您从您的 javascript 调用您的小程序的方法。实际上，当您从 javascript 调用任何已签名的小程序的方法时，它的行为就像未签名，因为两者都有自己的安全沙箱，并且您必须在该特定沙箱中执行。现在我对您的代码进行了如下更改。

```
final File myFile = (File) AccessController.doPrivileged(new PrivilegedAction() {
                public Object run(){
                    String fileName = System.getProperty("user.home") +
                      System.getProperty("file.separator") +
                      "pkcs11.conf";                    
                    return new File(fileName);
                }}); 
```

此 AccessController 允许您在客户端计算机上创建文件。我的英语不好，因此如果有任何错误，请见谅。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T13:48:34.133

如果您从（未签名的）javascript 调用已签名小程序内的函数，您将立即破坏签名。这意味着小程序会立即失去所有特权，并且无​​法在磁盘上写入任何内容......

看看这个，页面底部： http: [//docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

> 注意：JavaScript 代码被视为未签名代码。当从 HTML 页面中的 JavaScript 代码访问已签名的小程序时，该小程序将在安全沙箱中执行。这意味着签名的小程序本质上表现得像一个未签名的小程序。**

因此，您可能必须在 init() 之后立即启动您的函数，然后通过 liveconnect，从通知“操作完成”的小程序回调页面上的 js 函数......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:57:05.570

您还需要策略文件，以允许签名的小程序创建临时文件。
请在您的代码中添加行号，以便人们可以关联堆栈跟踪。

我认为您的代码 `File.createTempFile("pkcs11", "conf");`正在抛出`SecurityException`。`message.MessageApplet.accessToken(MessageApplet.java:49)`从您的堆栈跟踪中查看此内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:56:16.193

您始终可以通过 Javascript 将数据提供给小程序，以便将它们存储在 FIFO（先进先出）对象中，并使用小程序上的计时器来检查 FIFO 并处理请求。但我想返回失败/成功代码值并不容易......

# c++ - 函数 ___tmainCRTStartup 中引用的未解析外部符号 _main

> ID：10635019
> 
> 赞同：1
> 
> 时间：2012-05-17T11:38:53.517
> 
> 标签：c++, templates, visual-c++, namespaces

当我尝试编译我的 C++ 控制台应用程序时，我一直收到此错误：“*函数 _ _tmainCRTStartup 中引用的未解析的外部符号主”。*我做了一些搜索，我能找到的只是将我的“链接器”从 Windows 更改为控制台，反之亦然。这不起作用，我什至尝试创建一个新的控制台应用程序。

我不确定是什么原因造成的，是否有可能`template <typename T>`导致混淆，因为它出现在两个文件中？在这里的任何帮助将不胜感激。

下面的代码：

主要.cpp：

```
#include <iostream>
#include "tools.h"
using namespace tools;

template <typename T>
int main()
{
T input1;
T input2;

std::cout << "Enter in 1st number: " << endl;
std::cin >> input1;
std::cout << "Enter in 2nd number: " << endl;
std::cin >> input2;
std::cout << "num1 - num2 = [" << numberDifference(input1, input2) << "]" << endl;
getchar();
getchar();

return 0;
} 
```

工具.h：

```
#include <iostream>
namespace tools
{
template <typename T>
T numberDifference(T num1, T num2)
{
    if(num1 > num2)
        return num1 - num2;
    else
        return num2 - num1;
}
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:41:08.340

删除函数的`template`定义`main`。

或者至少从适当的`main`函数中调用它。

例如

```
template< typename T >
int templated_main( int c, char** argv )
{
    // What was in your original main function....

}

int main( int c, char** argv )
{
    return templated_main<int>( c, argv );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:42:36.027

删除`template <typename T>`之前的主要内容。这将创建`main`一个模板功能。

并更改`T input1; T input2;`为某些特定类型，例如`int`or `float`。

# android - 关闭我的应用程序的所有活动

> ID：10635022
> 
> 赞同：0
> 
> 时间：2012-05-17T11:38:56.990
> 
> 标签：android, android-activity

我正在使用这些标志开始一项新活动

finish_intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);

当我关闭活动时，它会恢复之前的活动，我怎样才能关闭所有活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:53:43.560

开始一项新活动时，完成前一项活动

```
Intent i = new Intent(this,CLASSTOLAUNCH.class);

startActivity(i);

finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:46:40.647

当您从第一个活动移动到下一个活动时，前一个活动会保存在后堆栈中，这会增加开销，因为当您返回上一个活动时，会再次创建相同活动的对象。因此，您可以在移动到第二个活动时使用方法完成（）来杀死第一个活动。

例如：

```
Intent i = new Intent(this,Myapp.class);

startActivity(i);

finish(); 
```

# recursion - 在方案中创建尾递归幂函数

> ID：10635023
> 
> 赞同：4
> 
> 时间：2012-05-17T11:38:59.833
> 
> 标签：recursion, scheme, tail-recursion

我想知道您如何在方案中实现尾递归幂函数？

我已经为方案定义了我的递归：

```
(define power-is-fun
  (lambda (x y)
    (cond [(= y 0)
           1]
          [(> y 0)
           (* (power-is-fun x (- y 1)) x)]))) 
```

但我无法完全弄清楚另一个应该是怎样的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:56:08.123

答案是类似的，你只需要将累积的结果作为参数传递：

```
(define power-is-fun
  (lambda (x y acc)
    (cond [(= y 0)
           acc]
          [(> y 0)
           (power-is-fun x (- y 1) (* x acc))]))) 
```

像这样调用它，注意它的初始值`acc`是`1`（你可以为此构建一个辅助函数，所以你不必记住`1`每次都传递）：

```
(power-is-fun 2 3 1)
> 8 
```

将递归过程转换为尾递归的一些通用指针：

*   向函数添加一个额外的参数以保存到目前为止累积的结果
*   第一次调用过程时传递累加器的初始值，通常这与您在“正常”（非尾递归）递归中在基本情况下返回的值相同。
*   在递归的基本情况下返回累加器
*   在递归步骤，用新值更新累积结果并将其传递给递归调用
*   最重要的是：当调用递归时，请确保将其作为最后一个表达式调用，无需执行“额外工作”。例如，在您的原始代码中，您在调用*之后*`power-is-fun`执行了乘法，而在尾递归版本中，调用`power-is-fun`是在退出过程之前发生的最后一件事

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T23:51:06.337

顺便说一句，有一种更快的方法来实现整数求幂。与其`x`一遍又一遍地乘以`y`时间（这使得它成为 O(y)），有一种方法在时间复杂度上是 O(log y)：

```
(define (integer-expt x y)
  (do ((x x (* x x))
       (y y (quotient y 2))
       (r 1 (if (odd? y) (* r x) r)))
      ((zero? y) r))) 
```

如果你不喜欢`do`（就像我认识的许多 Schemers 一样），这里有一个显式地尾递归的版本（`let`当然，你也可以用 named 来写它）：

```
(define (integer-expt x y)
  (define (inner x y r)
    (if (zero? y) r
        (inner (* x x)
               (quotient y 2)
               (if (odd? y) (* r x) r))))
  (inner x y 1)) 
```

（顺便说一句，任何体面的 Scheme 实现都应该将两个版本宏扩展为完全相同的代码。另外，就像 Óscar 的解决方案一样，我使用了一个累加器，只是在这里我称之为`r`（用于“结果”）。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:18:30.640

Óscar's list of advice is excellent.

If you like a more in-depth treatment of iterative (aka linear recursive) and tree recursion processes, then don't miss out on the great treatment in SICP:

[http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-11.html#%_sec_1.2](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-11.html#%_sec_1.2)

# google-analytics - 在wordpress中获取每天的帖子数

> ID：10635024
> 
> 赞同：2
> 
> 时间：2012-05-17T11:39:00.657
> 
> 标签：google-analytics, wordpress

我正在使用谷歌分析来监控对 wordpress 博客的访问。我看不到帖子的数量并将它们映射到访问次数......

有没有一个插件可以显示帖子的数量，甚至更好地显示 wordpress 中每天的访问次数？或者有没有办法在wordpress中获得每天的帖子数量？

任何帮助将不胜感激......谢谢大家:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:46:23.493

嗯，我的直觉是单独使用谷歌分析可能会走更困难的道路（如果可能的话）。GA 更多用于用户交互，其中每天的帖子数据更多是服务器端/内部跟踪。

不过，发布日期都存储在 MySQL 中，因此您可以在 Excel 中一次性混合数据，或者使用 GA API 并编写自己的小脚本来合并两个来源。

# java - 使用java反射的ClassnotFound异常

> ID：10635025
> 
> 赞同：0
> 
> 时间：2012-05-17T11:39:08.627
> 
> 标签：java, reflection, junit

我正在尝试 gt 我创建的特定 java 类对象的方法列表并尝试对其进行单元测试。

它失败说它找不到具有“java.lang.ClassNotFoundException：class com.jr.freedom.user.User”的类

这是测试代码：

```
 @Test
    public void testRegisterNewUser() throws InvalidDataException {
        userService = new UserService();
        try {
            Class classUser = Class.forName(User.class.toString());
            Method m[] =classUser.getDeclaredMethods();
            for(int i = 0; i < m.length; i++){
                System.out.println(m[i].toString());
            }
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            fail(e.getMessage());
        }

        assertNotNull(createTestUserJson());
} 
```

我的项目包如下所示：

在项目文件夹内：src test

User 类在 src>com>jr?freedom>user 中（代表 com.jr.freedom.user.User），而测试类在 test>test>com>jr>freedom>user 中（代表 test.com.jr .freedom.user.UserServiceTest)

起初，/test 目录中的包名称与用户对象的 /src 目录中的包标签相同，但这并没有起作用，因为我认为 java relfection 试图检索 /test 文件夹中的用户对象，所以我重命名了包，使其独一无二，但仍然无法正常工作。有什么建议吗？谢谢

完整的错误详细信息：

```
java.lang.ClassNotFoundException: class com.jr.freedom.user.User
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at test.com.jr.freedom.user.UserServiceTest.testRegisterNewUser(UserServiceTest.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197 
```

)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:42:10.787

User.class 的结果。[toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#toString%28%29)是：

```
class com.jr.freedom.user.User 
```

在真正的类名开始之前看到**类**？这使字符串成为非法的类名。

您需要使用[getName()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getName%28%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:46:00.907

该类返回：`toString`所以它正在尝试加载：（如您的错误消息所述）`Class``"class com.foo.NameOfClass"``class com.jr.freedom.user.User`

但更重要的是，你已经有了类：User.class，为什么还要尝试加载呢？只需拿出那条线并拥有：

```
User.class.getDeclaredMethods... 
```

# google-sheets - Google表格中sumif的多个条件

> ID：10635029
> 
> 赞同：6
> 
> 时间：2012-05-17T11:39:23.923
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

当 DataSheet!G:G="solved" AND DataSheet!C:C="May" 它必须计算 DataSheet!H:H 的总和时，我正在尝试计算 google 电子表格中的列总和。

我努力了

```
=ARRAYFORMULA(SUM(((DataSheet!C:C)="May") * ((DataSheet!G:G)="solved") * (DataSheet!H:H) )) 
```

但它返回 N/A 任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:25:17.687

`N/A`只有当 H 列上的值为 时，此公式才会返回`N/A`。你检查过吗？而且，您确定这是`N/A`不是其他类型的错误？

如果是这样，您能否分享您的电子表格或其中的样本，以便我自己查看，因为我无法复制它。

# mysql - phpmyadmin 服务器中的存储过程

> ID：10635031
> 
> 赞同：0
> 
> 时间：2012-05-17T11:39:29.570
> 
> 标签：mysql, phpmyadmin

**我在**本地机器上的 **MySQL 数据库中创建了存储过程，当我生成脚本以在主机服务器上运行它时出现此错误**

```
#1227 - Access denied; you need the SUPER privilege for this operation 
```

**这是代码**

```
 CREATE DEFINER =  `User_name`@`host_name` PROCEDURE  `InsertOrder` 
```

这`user_name`占据了所有的特权，所以任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:08:01.253

正如[手册所说](http://dev.mysql.com/doc/en/create-procedure.html)：

> 如果您没有[`SUPER`](http://dev.mysql.com/doc/en/privileges-provided.html#priv_super)权限，则唯一允许的用户值是您自己的帐户，可以按字面意思指定，也可以使用[`CURRENT_USER`](http://dev.mysql.com/doc/en/information-functions.html#function_current-user). 您不能将定义者设置为其他帐户。

您必须使用具有`SUPER`特权的帐户发出命令，或者将其更改`DEFINER`为您当前的用户帐户（如果省略，则为默认帐户）。

# css - Zurich 字体在 Internet Explorer 中不起作用

> ID：10635033
> 
> 赞同：1
> 
> 时间：2012-05-17T11:39:31.547
> 
> 标签：css, fonts, stylesheet, font-face

我从互联网上下载了 ZURCH 字体的 TTF 文件，它在 FF 和 Chrome 中运行良好。但在ie中不起作用。

谁能告诉我原因，或者如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:50:03.273

确保您的字体与您使用它们的网站位于同一域中。

确保您的 css 看起来像这样以实现跨浏览器兼容性，尤其是包含 #iefix 的行：

```
@font-face{ 
font-family: 'MyWebFont';
src: url('WebFont.eot');
src: url('WebFont.eot?#iefix') format('embedded-opentype'),
url('WebFont.woff') format('woff'),
url('WebFont.ttf') format('truetype'),
url('WebFont.svg#webfont') format('svg');
} 
```

确保 WebFonts 的 url 也是正确的

```
src: url('../path_to_fonts/WebFont.ttf'); 
```

如果您需要将 ttf 转换为其他格式，即。woff，eot 和 svg，试试[FontSquirrel](http://www.fontsquirrel.com/fontface/generator)

# python - Python：理解对象 __del__ 方法

> ID：10635036
> 
> 赞同：1
> 
> 时间：2012-05-17T11:39:36.357
> 
> 标签：python

谁能描述我为什么这段代码会打印'2 1 0 done'而不是预期的输出'0 1 2 done'？据我所知，我们在列表推导期间创建了一些匿名变量，并且在列表推导覆盖结束时使用 filo 原则对它们进行垃圾收集。但是，它们仍然在列表 aa 中被引用，不是吗？为什么在这种情况下第二个“del a”没有调用**del**魔术方法？

```
class A:
    def __init__(self, name):
        self.name = name
    def __del__(self):
        print self.name,

aa = [A(str(i)) for i in range(3)]
for a in aa:
    del a

print 'done' 
```

另外，高级问题。请看[http://codepad.org/niaUzGEy](http://codepad.org/niaUzGEy) 为什么有5份，3份？这不应该是1份吗？为什么是 5 或 3？不知道，这就是为什么要问它；）感谢您的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T12:01:46.103

You are confusing the `del` statement and the `__del__` method.

`del a` simply unbinds the name `a` from whatever object it referenced. The list referenced by `aa` is unchanged so the objects all continue to exist.

The `__del__` method is only called after the last reference to an object has been destroyed. That could be after a call to `__del__` but usually isn't.

You rarely need to use `del`. It would be much more common just to rebind `aa` and then all the objects it contains will be released, and if not otherwise referenced their `__del__` methods will be called automatically.

Also, you rarely need to use `__del__`. For most purposes Python's management of objects will handle cleanup automatically. Adding a `__del__` method to a class is generally a bad idea as it can interfere with the garbage collector, so rather paradoxically `__del__` makes it more likely that your program will leak memory. Also Python won't guarantee whether `__del__` is actually called on program exit, and if it does you may find global variables you cant to use no longer exist, nor will it guarantee to only call it once (though you have to jump through hoops to make it call it more than once).

In short, avoid using `__del__` if you possibly can.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:45:58.213

它打印`done 2 1 0`（CPython）。

您不会在 for 循环中删除列表元素。它们在退出时被删除。据我所知，调用顺序`__del__`是特定于实现的，因此在其他实现（IronPython、Jython 等）中可能会有所不同

# java - 如何捕获从网站发送的响应

> ID：10635037
> 
> 赞同：0
> 
> 时间：2012-05-17T11:39:44.667
> 
> 标签：java, servlets

我试图在互联网上搜索这个主题，但找不到任何合适的解决方案。我想通过我的 Servlet 打开一个页面并捕获从服务器接收到的响应，以便我可以更改/检索从响应中获得的数据。我不是在谈论过滤从我自己的 servlet 发送的数据，而是从其他网站获取响应。

任何建议的阅读将不胜感激。

基本上，我试图通过 FileIO 提取页面上存在的所有 href。但这可能是一个乏味的过程，因为我必须事先下载这些页面。另外，有没有其他方法可以做到这一点？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:11:32.243

你也可以尝试[Selenium](http://seleniumhq.org/projects/webdriver/)并使用它的 webdriver api..

> 列出所有链接 = driver.findElements(By.tagName("a"));

要不就

```
Pattern linkElementPattern = Pattern.compile(“]*href=\”[^>]*>(.*?)“);
List<String> links = new ArrayList<String>();
// html is your HTML source String.. 
while (linkElementPattern.matcher(html)) {
       links.add(linkElementMatcher.group());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:47:35.630

您可以使用[httpclient](http://hc.apache.org/httpclient-3.x/)或其他 http 客户端模块

# c# - 如何检测重叠的多边形？

> ID：10635040
> 
> 赞同：2
> 
> 时间：2012-05-17T11:39:47.930
> 
> 标签：c#, wpf, polygon, overlap, overlapping

我有一个有几个多边形的画布，我想做的是尝试检测多边形是否重叠。我在各种网站上环顾四周，发现的大部分内容与对象碰撞有关——[例如](http://pogopixels.com/blog/2d-polygon-collision-detection/)，我的多边形没有移动，所以这不会成为问题。我想知道是否有人可以为我指出如何检测它们是否重叠的正确方向。有没有一种方法可以计算屏幕上使用的空间？或多边形的区域来比较两者？

例如，就像这里的模型一样，红色形状与绿色形状重叠。基本上我只想说是的，它们是重叠的，或者不是。

[http://peterfleming.net84.net/Slice%201.png](http://peterfleming.net84.net/Slice%201.png)

提前致谢。

皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:49:42.383

这里的这个库（免费和开源）将显示多边形裁剪：[http ://www.angusj.com/delphi/clipper.php](http://www.angusj.com/delphi/clipper.php)

也就是说，如果通过多边形重叠，您的意思是至少一个点在另一个点内，您可以通过查看[点中点多边形问题](https://stackoverflow.com/questions/924171/geo-fencing-point-inside-outside-polygon)或[检查每个多边形线以查看它是否跨越来测试每个多边形的点与其他点另一个多边形](https://stackoverflow.com/questions/1119451/how-to-tell-if-a-line-intersects-a-polygon-in-c)。

这些方法都会以不同的效率工作，尝试看看哪种方法最适合您的情况。

但是，您的图表似乎表明您想查看这些多边形是否“并排”或类似的东西。这将有助于澄清这一点。重叠通常需要一些坐标计划来确定重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:49:24.433

假设每个多边形都是一个形状（路径或多边形），您可以使用其[RenderedGeometry的](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.renderedgeometry)[FillContainsWithDetail](http://msdn.microsoft.com/en-us/library/ms607451)方法来成对检查相交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T15:23:28.350

我也遇到了同样的问题，我使用了这个实现（这是受此启发的天堂：[C# Point in polygon](https://stackoverflow.com/questions/4243042/c-sharp-point-in-polygon)）：

```
bool DoesPolygonsOverlap(IList<Point> firstPolygon, IList<Point> secondPolygon)
{
    foreach (var item in firstPolygon)
    {
        if (IsPointInPolygon(secondPolygon, item))
        {
            return true;
        }
    }
    foreach (var item in secondPolygon)
    {
        if (IsPointInPolygon(firstPolygon, item))
        {
            return true;
        }
    }
    return false;
}

bool IsPointInPolygon(IList<Point> polygon, Point testPoint)
{
    bool result = false;
    int j = polygon.Count() - 1;
    for (int i = 0; i < polygon.Count(); i++)
    {
        if (polygon[i].Y < testPoint.Y && polygon[j].Y >= testPoint.Y || polygon[j].Y < testPoint.Y && polygon[i].Y >= testPoint.Y)
        {
            if (polygon[i].X + (testPoint.Y - polygon[i].Y) / (polygon[j].Y - polygon[i].Y) * (polygon[j].X - polygon[i].X) < testPoint.X)
            {
                result = !result;
            }
        }
        j = i;
    }
    return result;
} 
```

注意：该功能没有经过太多测试，有很大的改进潜力。如果您发现错误/问题，请告诉我。

# php - 带有 PDO 的 PHP Web 服务

> ID：10635042
> 
> 赞同：1
> 
> 时间：2012-05-17T11:39:52.610
> 
> 标签：php, pdo

我想使用以下代码从我的 mssql 数据库中检索一些数据：

```
public function areaGetCities($json){
        $request = json_decode($json);
        $response = '';
        $response->list = array();

        if (!empty($request->language_id) &&
            !empty($request->country_id) &&
            !empty($request->postal_code)){
            $this->db_stmt = new PDOStatement();
            $this->db_stmt = $this->db->prepare('EXECUTE areaGetCities :language_id, :country_id, :postal_code');
            $this->db_stmt->bindParam(':language_id', $request->language_id, PDO::PARAM_INT);
            $this->db_stmt->bindParam(':country_id', $request->country_id, PDO::PARAM_INT);
            $this->db_stmt->bindParam(':postal_code', $request->postal_code, PDO::PARAM_STR, 40);
            $this->db_stmt->execute();
            while ($obj = $this->db_stmt->fetchObject()){
                $response->list[] = $obj;
                unset($obj);
            }             
        }        
        return json_encode($response);         
    } 
```

如果我打印 errorInfo() 我得到

> 尝试绑定参数号 0。SQL Server 最多支持 2100 个参数。IMSSP -29

我的问题是我没有从我的数据库中得到任何结果，我必须得到（我用相同的参数运行了这个过程，我得到了 2 个结果）。

想法？

编辑：我编辑了我的代码。现在我得到：

> [Microsoft][SQL Server Native Client 11.0][SQL Server]形参“@postal_code”>没有声明为OUTPUT参数，而是传入请求的实际参数>输出。

```
CREATE PROCEDURE areaGetCities(@language_id TINYINT, @country_id INT, @postal_code VARCHAR(40)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:52:41.680

尝试在查询和绑定上使用`:param_name`而不是同时使用。`@param_name`这是[PDO 手册](http://php.net/pdostatement.bindparam)推荐的。

此外，如果参数是输出参数，则应将其标记为：

```
$this->db_stmt->bindParam(':postal_code', $request->postal_code, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 40); 
```

参数返回将在`$request->postal_code`属性中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:56:16.130

使用`:language_id`代替，`@language_id`因为它也在[PDO 手册](http://php.net/pdostatement.bindparam)中完成。`@`用于 SQL 中的变量，所以当你准备

```
EXECUTE areaGetCities @language_id, @country_id, @postal_code 
```

它被解释为

```
EXECUTE areaGetCities NULL, NULL, NULL 
```

因为变量（很可能）没有在 SQL Server 中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T17:27:02.993

我的问题是 postal_code 包含数字，我想将其作为字符串发送，因为有时数字以 0 开头。我将代码更改为：

```
$this->db_stmt->bindParam(':postal_code', $request->postal_code); 
```

它就像一个魅力。

非常感谢你们！

# php - php按随机顺序对记录集进行分页

> ID：10635044
> 
> 赞同：1
> 
> 时间：2012-05-17T11:40:09.580
> 
> 标签：php, mysql

我有一个 mySQL 业务记录集，我必须随机化订单以对他们公平，以确保他们都获得相同的曝光。

我现在的问题是列表太长，所以我必须对结果进行分页。我不能将限制 LIMIT %d, %d 与我随机化记录的方式一起使用，因为它会重新随机化记录，有时会出现相同的业务。

我需要的是以随机顺序获取记录，然后对它们进行分页。有没有办法做到这一点？

谢谢。

```
SELECT * 
FROM business
ORDER BY RAND( ) 
LIMIT 0 , 30 
```

我知道 RAND( ) 不是随机化记录的最有效方法。之后我会改变这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:00:25.507

Could you do the pagination purely through jquery?

This would keep the list in the same order until the page is reloaded and re-randomised.

# scala - 用于统计计时器/计数器的 Playframework 嵌入式库

> ID：10635047
> 
> 赞同：1
> 
> 时间：2012-05-17T11:40:19.133
> 
> 标签：scala, playframework, analytics, playframework-2.0

在 play 1.2.X 中嵌入了 JAMon [API](http://jamonapi.sourceforge.net/)，它允许收集应用程序统计信息，如计数器和计时器。然后，您可以使用 JARep 存储和显示此统计信息。分析趋势和解决性能问题非常有用。

*   play 2.0 中是否包含类似的库？
*   如果没有，哪个轻量级的基于 scala 的库正在运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:56:24.790

有一个**statsd**的实现。我不太了解这个项目，但它似乎可以满足您的需求：

这是 Play 的简单 statsd 模块！框架 2.0。它为单例对象 Statsd 提供了对 statsd 进行计数器和计时调用的方法。

```
Statsd.increment("my.stat")  // Increment my.stat by 1
Statsd.timing("my.operation", 100)  // my.operation took 100 ms
Statsd.time("my.operation.i.dont.want.to.time.myself") {
  // do some stuff...
} 
```

有关 github 页面的更多信息：[https ://github.com/vznet/play-statsd](https://github.com/vznet/play-statsd)

# excel - Excel 错误 1004“无法获取 .... WorksheetFunction 类的属性”出现不一致

> ID：10635048
> 
> 赞同：24
> 
> 时间：2012-05-17T11:40:19.790
> 
> 标签：excel, excel-2010, vba

我在电子表格中有一个 VBA 函数，该函数对在我的宏的早期阶段打开的另一个电子表格进行操作。该宏过去可以正常工作，但最近在运行时开始导致**1004**错误（*“无法获取 WorksheetFunction 类的 RoundDown 属性”*）。

我相信我理解错误是由什么引起的（运行 RoundDown 的问题），但我不明白为什么它会在我的宏中被触发，奇怪的是当我进入调试模式并单步执行 VBE 中的代码时错误不会再次发生（尽管没有明显改变）。

**有没有人对这种不一致发生的错误有类似的经历，并且知道我可以做些什么来解决它？**

我相当精通 VBA/Excel，但任何有关进一步诊断步骤的建议将不胜感激。我想知道打开的电子表格是否有问题没有准备好，但我看不出如何。

代码在这里。错误发生在标有注释的行上。

```
Public Function GetDatesA(sWorkbookname As String, sSheetname As String, sCell As String) As Variant

    Dim vDateList() As Variant
    Dim currentCell As Range
    Dim n As Long

    Set currentCell = Workbooks(sWorkbookname).Worksheets(sSheetname).Range(sCell)

    n = 0

    Do
        If Trim(currentCell.Value) = "" Then
            Exit Do
        Else
            ReDim Preserve vDateList(0 To 1, 0 To n)
            vDateList(0, n) = WorksheetFunction.RoundDown(currentCell.Value, 0) 'error occcurs on this line
            vDateList(1, n) = currentCell.Column
            'Debug.Print currentCell.Value
        End If
        Set currentCell = currentCell.Offset(0, 1)
        n = n + 1
    Loop While currentCell.Column < XL_LAST_COLUMN

    GetDatesA = vDateList

End Function 
```

其他细节是：

*   Excel版本：2010

*   正在打开的文件本地驻留在我的 C: 驱动器上；我的宏在网络上的电子表格中

*   这两个文件的文件格式都是 .xls（即 Excel 2003）- 我没有更改此选项的选项

*   Windows 7（不是我认为它是相关的）

我已经尝试过的两点是：

*   替换不同的工作表函数（例如 Min(currentCell)），这也会导致同样的问题

*   打开文件似乎已经解决了这个问题 - 我想知道是否有某种方式正在打开的工作簿（而不是我的带有宏的主工作簿）没有启用宏，这会造成干扰。但即使这是原因，我也不知道如何解决它！

有任何想法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-17T16:53:01.127

当传递给工作表函数的任何参数类型不正确或根本没有意义时，通常会发生此错误。

例如，我在`WorksheetFunction.Asin`使用大于 1 的参数调用时遇到了这个问题。在你的情况下，我猜`currentCell.Value`是一个非数字值，或者不是根据你的区域设置关于数字的值。

是的，错误消息确实具有误导性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T19:46:56.600

使用 Transpose、MMult、MDterm 和 MInverse 函数时出现 “无法获取WorksheetFunction 类的**属性”错误。*

通过将“Option Base 1”放在编辑器中特定模块的声明（在实际代码之前）部分中，我能够运行我的代码。

Excel 假定“Option Base 0”将添加额外的一行和一列空单元格。这将导致错误发生，并且不会立即显而易见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T14:15:57.657

我以前遇到过这个问题，对我来说这是因为标准范围没有意义，正如安德烈上面所说的那样。

请参见下面的示例公式： `.Cells(11, i).Formula = Application.WorksheetFunction.CountIfs(Sheets("Sheet1").Range("AC8:C" & n), "S")`

看看范围......这没有任何意义。修改了从`"AC8:C"`到的范围`"AC8:AC"`，它将完美地工作

# javascript - Android webview脚本标签不加载源网页

> ID：10635049
> 
> 赞同：1
> 
> 时间：2012-05-17T11:40:48.760
> 
> 标签：javascript, android, android-webview

我正在尝试从 Webview 中的脚本标签加载网页，但它不会加载它！

这是 HTML Script 标签的来源：

```
<script type="text/javascript" src='http://google.com'></script> 
```

Java 代码：

```
WebView bannerWebView = (WebView) findViewById(R.id.banner_webview1);
bannerWebView.getSettings().setJavaScriptEnabled(true);
bannerWebView.getSettings().setBuiltInZoomControls(true);

String html = "<html><head>"
                + "<script type=\"text/javascript\" src='http://google.com'></script>"
                + "</head>" + "<body>" + "</body>" + "</html>";

bannerWebView.loadData(html, "text/html", "utf-8"); 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T06:03:23.993

试试这个字符串：

```
<html>
<head>
     <script src='http://www.google.com'></script>
</head>
</html> 
```

并检查您是否允许访问互联网。

# php - 将 PHP 从 Linux 和 Apache 迁移到 Windows 和 IIS - 问题

> ID：10635050
> 
> 赞同：0
> 
> 时间：2012-05-17T11:40:55.247
> 
> 标签：php, windows, iis

尝试在 Windows 上的 IIS 中提供我的 PHP 文件时，我看到以下错误，在我的 linux 服务器上一切正常。

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter -
headers already sent (output started at 
C:\Inetpub\vhosts\test\httpdocs\signup.php:1) in 
C:\Inetpub\vhosts\test\httpdocs\signup.php on line 1 
```

第一行是：

```
<?php session_start(); ?> 
```

这是我尝试过的：

在 Gedit 中将文件另存为 UTF8 在 geany 中保存 - 属性显示 'UTF-8 (without BOM)' 在[http://people.w3.org/rishida/utils/bomtester/index.php](http://people.w3.org/rishida/utils/bomtester/index.php)上测试了文件，结果是：

```
No BOM 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T12:27:12.400

在调用 php session start 函数之前检查是否发送数据。它可以是换行符、空格...此错误记录在函数的 php 文档中`session_start()`

# python - 在 python 字典中插入或更新键

> ID：10635052
> 
> 赞同：12
> 
> 时间：2012-05-17T11:40:58.427
> 
> 标签：python, algorithm, dictionary

我有一个`dict1`包含 20,000 多个键的 python 字典，我想`update`用另一个字典`dict2`。字典看起来像这样：

```
dict1
  key11=>[value11]
  key12=>[value12]
  ...
  ...
  keyxyz=>[value1x]      //common key
  ...... so on

dict2
  key21=>[value21]
  key22=>[value22]
  ...
  ...
  keyxyz=>[value2x]      // common key
  ........ so on 
```

如果我使用

```
dict1.update(dict2) 
```

那么与 的键`dict1`相似的键的`dict2`值将被 的值覆盖`dict2`。我想要的是，如果 dict1 中已经存在一个键，那么 dict2 中该键的值应该附加到 dict1 的值。所以

```
dict1.conditionalUpdate(dict2) 
```

应该导致

```
dict1
  key11=>[value11]
  key12=>[value12]
  key21=>[value21]
  key22=>[value22]
  ...
  ...
  keyxyz=>[value1x,value2x] 
```

一个简单的方法是遍历`dict2`每个键的键`dict1`并插入或更新键。有没有更好的方法？python 是否支持支持这种功能的内置数据结构？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T11:55:26.927

[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)从集合模块中使用。

```
>>> from collections import defaultdict
>>> dict1 = {1:'a',2:'b',3:'c'}
>>> dict2 = {1:'hello', 4:'four', 5:'five'}
>>> my_dict = defaultdict(list)
>>> for k in dict1:
...    my_dict[k].append(dict1[k])
...
>>> for k in dict2:
...    my_dict[k].append(dict2[k])
...
>>> my_dict[1]
['a', 'hello'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:54:24.113

使用 dict 理解实际上很简单，并且`itertools.groupby()`：

```
dict1 = {1: 1, 2: 2, 3: 3, 4: 4}
dict2 = {5: 6, 7: 8, 1: 1, 2: 2}

from itertools import groupby, chain
from operator import itemgetter

sorted_items = sorted(chain(dict1.items(), dict2.items()))

print({key: [value[1] for value in values] for key, values in groupby(sorted_items, itemgetter(0))}) 
```

给我们：

```
{1: [1, 1], 2: [2, 2], 3: [3], 4: [4], 5: [6], 7: [8]} 
```

自然，这会创建一个新的字典，但是如果您*需要*更新第一个字典，您可以通过更新新的字典来轻松完成。如果您的值已经是列表，则可能需要进行一些小的修改（但我认为您这样做是为了操作，在这种情况下，没有必要）。

自然，如果您使用的是 Python 2.x，那么您将需要使用`dict.viewitems()`或`dict.iteritems()`超过`dict.items()`. 如果您在字典推导之前使用的是 Python 版本，那么您可以`dict((key , value) for ...)`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T00:06:11.443

另一种不导入任何东西的方法，只需使用常规的 Python 字典：

```
>>> dict1 = {1:'a',2:'b',3:'c'}
>>> dict2 = {1:'hello', 4:'four', 5:'five'}
>>> for k in dict2:
...  dict1[k] = dict1.get(k,"") + dict2.get(k)
... 
>>> dict1
{1: 'ahello', 2: 'b', 3: 'c', 4: 'four', 5: 'five'}
>>> 
```

`dict1.get(k,"")`如果存在则返回关联的值，`k`否则返回空字符串，然后附加 的内容`dict2`。

# php - 带有 HMVC 的桌面和移动版本

> ID：10635054
> 
> 赞同：3
> 
> 时间：2012-05-17T11:41:03.247
> 
> 标签：php, model-view-controller, codeigniter, mobile, hmvc

我希望在 CodeIgniter 中使用 HMVC 创建一个桌面版和移动版网站。

这类似于这个问题：

[带有 codeigniter 的移动和桌面 Web 应用程序](https://stackoverflow.com/questions/7604008/mobile-and-desktop-web-app-with-codeigniter)

但不同之处在于我的视图存储在单独的模块目录中，这使得很难按照建议仅更改视图路径。

## 问题：

如何使用与桌面版本完全相同的控制器逻辑来创建站点的移动版本，但在使用 HMVC 时具有不同的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:39:26.933

```
$this->load->library('user_agent');

if($this->agent->is_mobile())
{
   //send to mobile theme
} 
```

# sql - 是否可以有动态 COUNT (CASE WHEN) 语句？

> ID：10635061
> 
> 赞同：2
> 
> 时间：2012-05-17T11:41:21.857
> 
> 标签：sql, case-when

我有 SQL 查询，它工作正常。

```
select monthname (timestamp_iso(STATUSDATE)), 

    count (case when service='ADSL' then 1 end) as  ADSL,
    count (case when service='IPTV' then 1 end) as  IPTV,
    count (case when service='VOIP' then 1 end) as  VOIP
from INCIDENT
group by monthname(timestamp_iso(STATUSDATE)) 
```

我在那个月得到每个月的服务数量。但是这些服务我有100多个。是否可以有动态的CASE WHEN？获取当月所有服务以及每项服务的退货数量。它也应该在服务的 AS 名称之后写我。另一种选择是我手动编写这 100 个服务，所以我只是想知道？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:47:09.913

SQL 中的列数不能是动态的。

您可以编写代码（用 SQL 或其他语言）来编写 SQL 来执行（动态 SQL），但这可能会变得混乱。WSo，生成的 SQL 查询是针对固定数量的列的，但是您的代码会在每次运行时更改 SQL 查询。

满足您需求且不需要动态重新编码的标准关系数据库模型是为了规范化您的结果......

```
SELECT
  monthname (timestamp_iso(STATUSDATE)),
  service,
  COUNT(*) AS count_service
FROM
  incident
GROUP BY
  monthname(timestamp_iso(STATUSDATE)),
  service 
```

那么问题就变成了：*当你不知道你会得到多少列时，你真的需要一个透视结果集吗？*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:53:06.470

如果你想这样做，你可以用编程语言`select DISTINCT service`构建你的查询

例如在 C# 中

```
string SQL = "select monthname (timestamp_iso(STATUSDATE))" 

List<string> Columns = new List<string>();
foreach(string service in Services)
{
     Columns.Add( "  count (case when service='"+service+"' then 1 end) as  "+service);
}

SQL +="," + String.Join(",",Columns.ToArray());
SQL += " from INCIDENT group by monthname(timestamp_iso(STATUSDATE))";

db.Query(SQL); 
```

在 Javascript 中：

```
 var SQL = "select monthname (timestamp_iso(STATUSDATE))"; 

var Columns = new Array();
foreach(string service in Services)
{
     Columns.push( "  count (case when service='"+service+"' then 1 end) as  "+service);
}

SQL +="," + Columns.Join(',');
SQL += " from INCIDENT group by monthname(timestamp_iso(STATUSDATE))";

db.Query(SQL); 
```

其他方式，如果您使用 oracle，您可以尝试编写 PL/SQL 来选择列，并动态构建查询，然后使用`EXECUTE IMMEDIATE`Statement

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:46:06.993

```
select 
    service,
    monthname (timestamp_iso(STATUSDATE)), 
    count (*)              
from 
    INCIDENT
where 
    service in ('ADSL','IPTV','VOIP')
group by 
    monthname(timestamp_iso(STATUSDATE)), 
    service 
```

我认为这会让你接近你想要的。

# asp.net - MVC 3 htmlhelper 扩展方法来环绕内容

> ID：10635063
> 
> 赞同：19
> 
> 时间：2012-05-17T11:41:24.000
> 
> 标签：asp.net, asp.net-mvc-3, razor, htmlextensions

我搜索但找不到 MVC 3 htmlhelper 创建包装器方法的任何快速解决方案。我正在寻找的是这样的：

```
@html.createLink("caption", "url")
{
    <html> content in tags </html>
} 
```

结果应该有

```
<a href="url" title="Caption">
  <html> content in tags </html>
</a> 
```

对此有任何帮助。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-17T14:33:28.380

`MvcForm`使用BeginForm完成此操作的方式是返回类型隐含，`IDisposable`因此当在`using`语句中使用时，`Dispose`方法会`MvcForm`写出结束`</form>`标记。

您可以编写一个完全相同的扩展方法。

这是我刚刚写的一个来演示的。

**首先，扩展方法：**

```
public static class ExtensionTest
{
    public static MvcAnchor BeginLink(this HtmlHelper htmlHelper)
    {
        var tagBuilder = new TagBuilder("a");
        htmlHelper.ViewContext.Writer
                        .Write(tagBuilder.ToString(
                                             TagRenderMode.StartTag));
        return new MvcAnchor(htmlHelper.ViewContext);
    }
} 
```

这是我们的新类型 MvcAnchor：

```
public class MvcAnchor : IDisposable
{
    private readonly TextWriter _writer;
    public MvcAnchor(ViewContext viewContext)
    {
        _writer = viewContext.Writer;
    }

    public void Dispose()
    {
        this._writer.Write("</a>");
    }
} 
```

在您看来，您现在可以执行以下操作：

```
@{
    using (Html.BeginLink())
    { 
        @Html.Raw("Hello World")
    }
} 
```

产生结果：

```
<a>Hello World</a> 
```

稍微扩展一下以处理您的确切要求：

```
public static MvcAnchor BeginLink(this HtmlHelper htmlHelper, 
                                   string href, 
                                   string title)
{
    var tagBuilder = new TagBuilder("a");
    tagBuilder.Attributes.Add("href",href);
    tagBuilder.Attributes.Add("title", title);
    htmlHelper.ViewContext.Writer.Write(tagBuilder
                                    .ToString(TagRenderMode.StartTag));
    return new MvcAnchor(htmlHelper.ViewContext);
} 
```

和我们的观点：

```
@{
  using (Html.BeginLink("http://stackoverflow.com", "The Worlds Best Q&A site"))
  { 
      @Html.Raw("StackOverflow - Because we really do care")
  }
} 
```

产生结果：

```
<a href="http://stackoverflow.com" title="The Worlds Best Q&amp;A site">
   StackOverflow - Because we really do care</a> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T13:43:38.310

还有另一种方法，没有一次性的伎俩。工作量少，非常适合小帮手。我回答了类似的问题，不想复制所有内容，但这里有一个简短的示例：

```
@helper Paragraph(string cssClass, Func<object, object> markup) {
    <p class="@cssClass">@markup.DynamicInvoke(this.ViewContext)</p>
} 
```

这个助手的用法如下所示：

```
@Paragraph("highlited", 
    @<text>
        Look, a @Html.ActionLink("link", "index")
    </text>
) 
```

[我在这里](https://stackoverflow.com/a/13801915/808271)对另一个类似问题的完整回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T11:59:52.707

在最简单的层面上，这样的事情会做到

```
public static MvcHtmlString SomeLink(this HtmlHelper htmlHelper, string href, string     title,  string content )
    {
        var urlHelper = ((Controller)htmlHelper.ViewContext.Controller).Url;
        //var url = urlHelper.Action(actionName, controllerName, routeValues);

        var someLink = new TagBuilder("a");
        someLink.MergeAttribute("href", href);
        someLink.InnerHtml = content;

        return new MvcHtmlString(someLink.ToString());
    } 
```

# ruby-on-rails - 捆绑安装无法离线工作

> ID：10635065
> 
> 赞同：10
> 
> 时间：2012-05-17T11:41:28.677
> 
> 标签：ruby-on-rails, rubygems, bundler

我得到了这个问题。我认为安装了捆绑程序。而且因为我无法在 RoR 中创建应用程序时捆绑安装，或者直接在项目中捆绑安装。如果您遇到任何问题并找到解决方案，请帮助我。

```
enter code here     :run  bundle install
:Fetching gem metadata from https://rubygems.org/.
:Error Bundler::HTTPError during request to dependency API
:Fetching full source index from https://rubygems.org/
:Could not reach https://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-17T23:22:39.867

如果您安装了 gem，则可以使用`bundle install --local`. 它不需要互联网连接

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-28T13:38:44.283

以下方法对我有用。

```
$ rails new blog -B # -B tells rails not to run bundle install
cd blog
$ bundle install --local
Edit the GemFile and uncomment the line "therubyracer"
$ rails server
=> Booting WEBrick
=> Rails 4.0.0 application starting in development on http://0.0.0.0:3000
=> Run `rails server -h` for more startup options
=> Ctrl-C to shutdown server
[2013-09-28 19:09:35] INFO  WEBrick 1.3.1
[2013-09-28 19:09:35] INFO  ruby 2.0.0 (2013-05-14) [i686-linux]
[2013-09-28 19:09:35] INFO  WEBrick::HTTPServer#start: pid=1635 port=3000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T12:16:01.537

You will need to be online so that bundler can check with rubygems that you have the latest gems and download them if necessary.

# ios - Dropbox 与 iOS 的集成

> ID：10635067
> 
> 赞同：3
> 
> 时间：2012-05-17T11:41:33.357
> 
> 标签：ios, dropbox

Dropbox API for iOS 是否提供重命名 Dropbox 中的文件夹/文件的功能。它还支持从 iOS 删除文件夹/文件的功能吗？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T11:53:52.197

是的。[在此处](https://www.dropbox.com/developers/reference/sdk)查看适用于 iOS 的 Dropbox 文档。

快速示例：

```
DBRestClient *dbClient = [[DBRestClient alloc] initWithSession:[DBSession sharedSession]];
[dbClient moveFrom:fromPath toPath:toPath];  // Rename
[dbClient deletePath:path];                  // Delete 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T06:53:47.670

您不能重命名文件或文件夹（最高 v1.2.2）。为此，您可以按照以下步骤操作。

重命名文件，使用新名称创建新文件并删除旧文件。

重命名文件夹，创建新文件夹，将内容从旧文件夹移至此文件夹，然后删除旧文件夹。（确保在删除之前移动所有文件）。

谢谢。

# iphone - 带有导航控制器 iphone 应用程序的标签栏

> ID：10635068
> 
> 赞同：0
> 
> 时间：2012-05-17T11:41:34.813
> 
> 标签：iphone

我创建了一个带有导航栏 iphone 应用程序的标签栏，我添加了另一个来自主页标签的视图。视图即将到来，但导航栏和标签栏没有出现。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:53:14.700

进入应用程序的委托，找到方法**didFinishLaunchingWithOptions:**。

1.  确保您设置

    ```
    self.window.rootViewController = self.tabBarController; 
    ```

    （其中 tabBarController 是您的标签栏控制器 - 显然）。

2.  确保在方法结束之前有以下行：

    ```
    [self.window makeKeyAndVisible]; 
    ```

检查您的主 .nib 文件（可能是 MainWindow.xib）并确保至少第一个 TabBar 项包含一个导航控制器 - 它会打开您的视图（您提到的那个）。

希望你能解决，祝你好运！

# android - Android：AsyncTask 和读取互联网数据

> ID：10635073
> 
> 赞同：2
> 
> 时间：2012-05-17T11:42:03.887
> 
> 标签：android, android-asynctask

我写了一个代码来从互联网上下载一些数据。比我想把它放到 asyncTask 中。之后下载停止工作。看起来它无法完成 try{} 部分，所以跳到 exeption。

从主要活动“Nekaj”我调用 loadData() 类，它扩展了 AsyncData。从那里我在 try 命令中调用“oto”类。“oto”类用于从互联网读取内容并返回字符串数组。当我直接从“Nekaj”类调用 oto 类时，这很有效。我在使用 AsyncTask 时做错了什么？这是代码：

```
 public class Nekaj extends Activity {

TextView Tkolo, Tbroj1;
String[] brojevi_varijabla;
String privremena_varijabla = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bez_provjere_739);
    Tkolo = (TextView) findViewById(R.id.Xkolo);
    Tbroj1 = (TextView) findViewById(R.id.Xbroj1);

    /*
     * try { privremena_varijabla = test.kolo_739();
     * Tkolo.setText(privremena_varijabla); } catch (Exception e) { // TODO
     * Auto-generated catch block e.printStackTrace(); }
     */

    new loadData().execute();
}

public class loadData extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub

        Oto test = new Oto();

        try {
            brojevi_varijabla = test.brojevi_739();
            if (Integer.valueOf(brojevi_varijabla[0]) > 10) {
                Tbroj1.setText("" + brojevi_varijabla[0]);
            } else {
                Tbroj1.setText(" " + brojevi_varijabla[0]);
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }
}

public class Oto {

    public String[] brojevi_739() throws Exception {

        int i = 0;
        int uvjet = 0;
        int varijabla = 0;
        char[] znak = { '>', '<' };
        BufferedReader in = null;
        String data[] = null;
        String provjera = "date-info";
        int[] polje = new int[2];

        try {
            HttpClient klijent = new DefaultHttpClient();
            URI webstranica = new URI(
                    "https://www.aaa.bb");
            HttpGet zahtjev = new HttpGet();
            zahtjev.setURI(webstranica);
            HttpResponse odgovor = klijent.execute(zahtjev);
            in = new BufferedReader(new InputStreamReader(odgovor
                    .getEntity().getContent()));
            StringBuffer brojevi = new StringBuffer("");
            String brojevi_string = null;
            String neki_string = null;
            String red = "";

            in.skip(21000);
            while ((red = in.readLine()) != null) {
                varijabla = red.indexOf(provjera);

                if (varijabla != -1) {

                    // 1\. KOLO
                    if (uvjet == 0) { // onda sadrži taj
                                        // substring
                                        // !!!!
                        red = in.readLine(); // sada string red sadrži ono
                                                // što
                                                // želim, još moram samo to
                                                // izrezati!!
                        do {
                            if (i == 0) {
                                varijabla = red.indexOf(znak[i]);
                            }

                            else {
                                varijabla = red.indexOf(znak[i], polje[0]);
                            }

                            if (varijabla != -1) // ako taj znak postoji u
                                                    // stringu
                            {
                                if (i == 0) {
                                    polje[i] = varijabla + 1;
                                }

                                else {
                                    polje[i] = varijabla;
                                }
                                i++;
                            }

                        } while (i <= 1);

                        neki_string = red.substring(polje[0], polje[1]);
                        Tkolo.setText(neki_string);

                        provjera = "Dobitna kombinacija";
                        uvjet++;
                        continue;
                    }

                }
            }

            in.close();

            brojevi_string = brojevi.toString();

            data = brojevi_string.split("\n");

            return data;

        } finally {
            if (in != null) {
                try {
                    in.close();
                    return data;
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:00:04.237

What you are doing wrong is Tbroj1.setText() inside the doInBackground() method. What you have to do is to use the onPostExecute method to post your data on the UI:

```
public class loadData extends AsyncTask<String, Integer, Boolean> {
 protected Long doInBackground(String... arg0) {
     Oto test = new Oto();
     Boolean result = false;

    try {
        brojevi_varijabla = test.brojevi_739();
        result = true;
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return result;
 }

 protected void onPostExecute(Boolean result) {
     if(result){
        if (Integer.valueOf(brojevi_varijabla[0]) > 10) {
            Tbroj1.setText("" + brojevi_varijabla[0]);
        } else {
            Tbroj1.setText(" " + brojevi_varijabla[0]);
        }
     }

 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:52:40.510

实际上，您正在尝试在 AsyncTask 中更新 UI `doInBackGround()`，**因此**它是不允许的（doInBack.. 在非 UI 线程中运行..），因此将 UI 更新代码`onPostExecute()`放入**AsyncTask** ..

试试这个，让我知道会发生什么..

```
public class loadData extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        Oto test = new Oto();
        try {
            brojevi_varijabla = test.brojevi_739();       
            if(brojevi_varijabla != null)
            return brojevi_varijabla[0];
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

 @Override
    protected void onPostExecute(String result)
    {
        if(result != null)
          {
            if (Integer.valueOf(result) > 10) {
                Tbroj1.setText("" + result;
            } else {
                Tbroj1.setText(" " + result);
            }
          }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:56:15.387

您不能直接在`doInBackground()`始终运行的非 UI（后台）线程上操作 UI 元素。通常的使用方式`AsyncTask`是获取 中的数据`doInBackground()`，将其作为值返回，然后处理中的 UI 变化`onPostExecute()`。例如：

```
public class loadData extends AsyncTask<String, Integer, String> {

@Override
protected String doInBackground(String... arg0) {
    Oto test = new Oto();

    try {
        brojevi_varijabla = test.brojevi_739();
        if (Integer.valueOf(brojevi_varijabla[0]) > 10) {
            return "" + brojevi_varijabla[0];
        } else {
            return " " + brojevi_varijabla[0];
        }

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;
}

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    if (result != null) Tbroj1.setText(result);
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:51:19.083

use onPostExecute(Void result1) {}

to catch the result and perform the action required over there

# python - 我应该如何传递和从用户那里获取数据？

> ID：10635074
> 
> 赞同：0
> 
> 时间：2012-05-17T11:42:04.093
> 
> 标签：python, bottle

我有一个页面，用户在其中以简单的形式提供一些数据。这被发布到瓶子上，它发挥了它的魔力并产生了更多的数据。然后我需要用户输入来选择一些生成的数据，所以我将数据的相关方面传递给用户并用图表显示它。然后用户通过单击图进行选择。当我有用户选择时，我可以继续处理数据。但我不想将所有生成的数据传递给用户，只是为了取回相同的数据，因为用户应该只评估它的一个方面，并且可能会丢失一些数据。

在不将第一步生成的数据传递给用户的情况下，我应该如何获得用户评估？我需要将数据从一个@route 传递到另一个，而不是传递给用户，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:16:34.073

Since http is a stateless protocol, you would have to have some sort of session mechanism that persists the data server-side between two requests.

Bottle.py doesn't have it's own session management but they recommend [using](http://bottlepy.org/docs/dev/recipes.html#keeping-track-of-sessions) [Beaker](http://beaker.readthedocs.org/en/latest/).

# cross-browser - 将用户脚本编译为 Safari 和 Opera 扩展？

> ID：10635077
> 
> 赞同：1
> 
> 时间：2012-05-17T11:42:10.723
> 
> 标签：cross-browser, userscripts, safari-extension, browser-extension, opera-extension

我为 Firefox 和 Chrome 构建了一个 Greasemonkey 用户脚本，现在我想将其转换为 Safari 扩展和 Opera 扩展。

有没有像[Arantius 的 Greasemonkey-to-extension 编译器](https://arantius.com/misc/greasemonkey/script-compiler.php)一样的编译器，但适用于 Opera 或 Safari？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T07:35:29.953

看看[http://kangoextensions.com/](http://kangoextensions.com/)它支持所有你想要的浏览器。您可以从这篇文章[http://kangoextensions.com/blog/modifying-content-of-web-pages-using-jquery/](http://kangoextensions.com/blog/modifying-content-of-web-pages-using-jquery/)开始，展示如何创建内容脚本并在其中使用 jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:12:02.277

没有一个好的编译器可以将用户脚本转换为 Safari 或 Opera 扩展。虽然有些用户脚本可以在 Opera 上运行，并且有一些旧的 Safari 扩展可以运行一些用户脚本，但我没有听到关于它们的好消息。

# selenium - Selenium 无法启动 Socket 监听器

> ID：10635084
> 
> 赞同：1
> 
> 时间：2012-05-17T11:42:34.917
> 
> 标签：selenium

我正在启动硒服务器。

在命令提示符下输入 java -jar selenium-server-standalone-2.0b2.jar 后，我得到以下信息

![在此处输入图像描述](../Images/30886ae4113d8338c8e7d3e6f3c5fa4f.png)

见第 11 行（倒数第 6 行），即 Failed to start Socket listener。

这是什么意思？以及如何开始？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:00:02.637

您需要终止使用该端口的进程。您很可能上次不正确地关闭了 Selenium，并且该过程仍在继续运行。

您可以`netstat -ab`在 cmd 中运行以检查正在使用该端口的进程。更有可能是 java.exe

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T13:03:15.953

根据我的经验，在这种情况下，最具创新性的方法是简单地重新启动您的测试机器。这应该清除在端口上运行的 Selenium 服务器的任何恶意实例。

# javascript - jQuery回调冻结

> ID：10635086
> 
> 赞同：2
> 
> 时间：2012-05-17T11:42:46.710
> 
> 标签：javascript, jquery

[**我做了一个小小提琴来说明这个问题。**](http://jsfiddle.net/jphMp/)

基本上这有效：

```
var visible = $('#container').find(' > div:visible'),
    hidden = $('#container').find(' > div:hidden');

visible.fadeOut(1000, function() {
});
setTimeout(function() { hidden.fadeIn('slow') },1000); 
```

这不会：

```
var visible = $('#container').find(' > div:visible'),
    hidden = $('#container').find(' > div:hidden');

visible.fadeOut(1000, function() {
    hidden.fadeIn(100)
}); 
```

第二种方法使页面冻结。

我使用回调的方式有问题吗？

我需要能够将它放入动画队列中，因为我需要能够处理`stop()`所有事情。

有什么办法可以使这项工作？我在 Chrome 和 FF 上坏了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:58:41.373

您的第二个解决方案中的问题是，将为每个可见 div 启动一个动画，并且对于每个动画（已完成），所有隐藏的 div 都会启动淡入淡出动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:04:42.893

呃，首先，你为什么要使用这样的结构：

```
 $('#container').find(' > div:visible'); 
```

只需使用：

```
 $('#container > div:visible'); 
```

其次，不要使用`#container`，因为由于某种原因，如果里面的**301**个元素触发了 fadeOut，这实在是太多了。

Scratch that, i see jsfiddle has been changed and now it's only one element in there. Not surprised that it crashed before - too many objects.

Third, after fadeOut nothing fades in because at the point when you assign **hidden** variable there is no hidden divs. You'll have to use this in your callback:

```
 $('#container2 > div:hidden').fadeIn(1000) 
```

# c# - 如何将 xml 数据从控制器传递到视图

> ID：10635088
> 
> 赞同：0
> 
> 时间：2012-05-17T11:42:59.630
> 
> 标签：c#, asp.net-mvc

```
public ActionResult Details()
{
    XElement xml = 
         new XElement("persoanldetails", from i in dbContext.Personaldetails
                                                   where i.ID == 1 select i);
    return View(xml);
} 
```

我`XElement`在控制器中创建了一个。它将我在数据库中的数据转换为 xml。现在我想使用这个 xml 对象在 dhtmlx 中加载网格。

如何在视图中检索 xml 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:18:12.803

MvcContrib 有一个`XmlResult`

[http://mvccontrib.codeplex.com/documentation](http://mvccontrib.codeplex.com/documentation)

# c# - 找不到对象“数码相机”，因为它不存在或您没有权限

> ID：10635090
> 
> 赞同：0
> 
> 时间：2012-05-17T11:43:02.747
> 
> 标签：c#, sql-server-2008

我在执行此查询时遇到问题，然后发生此错误：

```
Cannot find the object "digitalcamera" because it does not exist or you do not have permissions. 
```

我的查询是：

```
ALTER TABLE digitalcamera ADD lineimage image; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:52:00.077

Likely you are not part of the role DBO or DDLAdmin on the database. Talk to your friendly DBA to see if he can your SQL Server user those permissions. If he isn't comfortable giving you those roles see if he grant you alter table. Other possibilities are you in the right database/server? Does this table really exist?

# c# - 尝试从数据集中获取列时出现异常“枚举尚未开始或已完成”

> ID：10635091
> 
> 赞同：2
> 
> 时间：2012-05-17T11:43:09.927
> 
> 标签：c#, linq-to-sql

我正在尝试使用 linq 过滤数据集。它工作正常

**问题 ：**

但是我尝试从中获取专栏，这给了我这个例外

**枚举尚未开始或已经完成。**

这是我的代码：

```
foreach (string columnName in SelectedItems)
                {
                    var Rate = (from dr in ds.Tables[0].AsEnumerable()
                                where dr.Field<double>(columnName) > greater && dr.Field<double>(columnName) < less
                                select new
                                {
                                    rate = dr.Field<double>(columnName)

                                }.rate).ToList();
                    if (Rate.Count > 50)
                    {
                        var avg = Rate.CheckRateValue();

                    }

                    i++;
                } 
```

我在网上搜索并发现 dr.Field(columnName) 必须单次使用的问题。那么在从选择新部分跳过此代码后，我如何从 linq 查询中获取列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:10:08.337

我不确定*这*是您的实际问题，但您可以尝试：

```
var rates = (from dr in ds.Tables[0].AsEnumerable()
             let rate = dr.Field<double>(columnName)
             where rate > greater && rate < less
             select rate).ToList(); 
```

# vim - 在 Ubuntu 10.10 中将 Vim 7.2 升级到 7.3 的最佳方法是什么

> ID：10635099
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:43:34.307
> 
> 标签：vim, ubuntu-10.10

我有使用 Ubuntu 预构建的默认存储库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:09:56.180

The best practice is to Upgrade Ubuntu to 12.04.

If you can't upgrade the OS, you're gonna have to compile vim from source. Follow the instructions here - [enter link description here](http://www.vim.org/download.php#unix)

You can also try to find another repo, but if you are not allowed to upgrade the OS, I doubt you are allowed to change the repo list...

# firefox-addon - 覆盖/覆盖 XUL 方法

> ID：10635103
> 
> 赞同：1
> 
> 时间：2012-05-17T11:43:44.953
> 
> 标签：firefox-addon

我想更改 Firefox 在拖放操作中的行为（用于修复此[WONTFIX 错误](https://bugzilla.mozilla.org/show_bug.cgi?id=673157)并使用我的插件应用这个有点旧的[补丁](https://bug673157.bugzilla.mozilla.org/attachment.cgi?id=549540)）。如何通过 XUL 覆盖覆盖[此方法？](http://mxr.mozilla.org/mozilla/source/browser/base/content/tabbrowser.xml#1847)我尝试了一些这样的代码：

```
<?xml version="1.0"?>
<!DOCTYPE override SYSTEM "chrome://dragdrop/locale/overlay.dtd">
<overlay id="ondrop-overlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"> 

      <binding id="tabbrowser">
          <implementation>
              <method name="onDrop">
                <body>
                ...
                </body>
              </method>
          </implementation>
      </binding>

</overlay> 
```

尽管

```
overlay chrome://browser/content/tabbrowser.xml chrome://dragdrop/content/tabbrowser.xul 
```

在我的 chrome.manifest 中，但我没有任何成功。请帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T20:19:34.400

覆盖仅适用于 XUL 文档，不适用于 XBL 绑定（它是 XUL 功能，不受 XBL 支持）。虽然您*可以*将元素的绑定替换为`tabbrowser`您自己的从原始绑定继承的绑定，但解决问题的更好方法是覆盖浏览器窗口以在其上下文中运行您的代码。然后该代码将修改`tabbrowser`窗口的实例。所以`chrome.manifest`你会写：

```
overlay chrome://browser/content/browser.xul chrome://dragdrop/content/browserOverlay.xul 
```

并在`browserOverlay.xul`：

```
<?xml version="1.0"?>
<overlay id="ondrop-overlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"> 
  <script type="application/x-javascript" src="browserOverlay.js"/>
</overlay> 
```

最后，`browserOverlay.js`看起来像这样：

```
window.addEventListener("load", function(event)
{
  var browser = window.getBrowser();

  // Replace browser.onDrop method by own function but keep the original so that it
  // can be called later.
  var origOnDrop = browser.onDrop;
  browser.onDrop = function(aEvent, aXferData, aDragSession)
  {
    if (...)
    {
      // Your own processing of the call (start a search)
      ...
    }
    else
    {
      // Let the original function handle the call
      origOnDrop.apply(this, arguments);
    }
  };
}); 
```

请注意，上面的代码避免使用全局变量，所有变量都在函数内声明。这通常是一个很好的做法，因为您在浏览器窗口的上下文中运行 - 任何全局变量都与浏览器自己的代码共享，并且其他扩展的代码也在此上下文中运行。为它们的全局变量选择相同名称的两段代码可能会导致令人讨厌的问题，不使用任何全局变量是避免这种情况的最佳方法。

* * *

**编辑**：您显然正在查看过时的代码（Gecko 1.8 分支）。当前代码没有`onDrop`方法，而是选项卡容器元素上的[适当事件处理程序。](http://hg.mozilla.org/mozilla-central/file/e794cef56df6/browser/base/content/tabbrowser.xml#l3529)您无法替换事件处理程序 - 但您也不需要，因为如果拖动的文本不是链接，它不会做任何事情。因此，您可以简单地添加自己的事件处理程序来处理这种情况。

```
window.addEventListener("load", function(event)
{
  var browser = window.getBrowser();
  browser.tabContainer.addEventListener("drop", function(event)
  {
    if (...)
    {
      // This is a search string, do something with it
      ...
      // Indicate that we processed the event
      event.stopPropagation();
    }
  }, false);
}); 
```

# android - 如何防止在sencha touch 2.0中添加列表中已经存在的项目

> ID：10635105
> 
> 赞同：1
> 
> 时间：2012-05-17T11:43:56.990
> 
> 标签：android, list, filter, sencha-touch-2

大家好，我有一个列表，我在其中动态添加列表项。

这是我在商店中添加商品的代码：-

```
 var re = record.get('Name');
    console.log('re:-'+re);
    if(!this.selGroup){
        this.selGroup = Ext.create('MyApp.store.selStore');
        console.log("created");
    }
    this.selGroup.add({Name: re}); 
```

它完美地在列表中添加项目，但我面临的问题是 add() 方法还添加了列表中已经存在的项目。我知道我必须放置过滤器以防止添加已经存在的项目，但我没有办法做到这一点。

请提出一些有用的东西来解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:50:49.503

我猜它这样做是因为 Sencha Touch 认为这`{Name: re}`是一个新记录。你为什么不这样做：`this.selGroup.add(record)`，那样ST不会添加重复记录..

这是一个例子：[http ://www.senchafiddle.com/#M8EgO](http://www.senchafiddle.com/#M8EgO)

# c++ - 启用/禁用用于编译的功能特定标志

> ID：10635106
> 
> 赞同：0
> 
> 时间：2012-05-17T11:43:58.737
> 
> 标签：c++, makefile

这是关于帖子 [https://stackoverflow.com/a/4171484/1220659](https://stackoverflow.com/a/4171484/1220659)

我想知道在哪里以及如何启用标志 UNIT_TEST。我想，它与makefile有关。但我在这方面完全是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:35:39.120

[http://www.google.com/search?q=add+%23define+to+makefile](http://www.google.com/search?q=add+%23define+to+makefile)

如果您使用的是 Visual Studio：

[http://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/hhzbb5c8%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:18:09.003

我得到了我想要的东西，我只需要在 makefile 中添加带有标志的 -D 选项。

# python - 如何使用 GDAL 将操纵的栅格值写入 ASCII 网格？

> ID：10635107
> 
> 赞同：4
> 
> 时间：2012-05-17T11:43:59.113
> 
> 标签：python, gis, geospatial, raster, gdal

我正在尝试使用 GDAL 操作网格（ASCII 网格）中的栅格值。但在继续此之前，我无法将新值写入文件。当调用 slopeband.WriteArray(s) 时，我收到这些错误消息。

错误 6：slope.asc，波段 1：此数据集不支持 WriteBlock()。

错误 1：slope.asc，带 1：写入脏块时发生错误

如果这是非常基本的，我很抱歉，但我对 python 和 GDAL 还是很陌生，尤其是。我在 Mac OS X 10.6.8 和 Python 2.7 上使用 GDAL 1.9.0。谢谢！

```
import numpy
import gdal
import gdalconst

dgm = gdal.Open("DGM_10_MR.asc", gdalconst.GA_ReadOnly)
driver = dgm.GetDriver()
geotransform = dgm.GetGeoTransform()
band = dgm.GetRasterBand(1)
data = band.ReadAsArray()

cols = dgm.RasterXSize
rows = dgm.RasterYSize
slope = driver.CreateCopy("slope.asc", dgm)
slope = None
dgm = None
slope = gdal.Open("slope.asc", gdalconst.GA_Update)
slope.SetGeoTransform(geotransform)
slopeband = slope.GetRasterBand(1)
s = slopeband.ReadAsArray()

for y in range(rows):
    for x in range(cols):
        s[y, x] = 0.0

slopeband.WriteArray(s)
slopeband.FlushCache()
del s

dgm = None
slope = None
print "done" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T18:44:45.400

不幸的是，GDAL 不能在所有文件类型中以相同的程度读取和写入。Arc ASCII 网格恰好是 GDAL 无法写入的文件类型之一。正如您的错误消息所述：`WriteBlock() not supported for this dataset.`，因此您无法写入 Arc ASCII 网格。

作为替代方案，您可以将现有的 ASCII 数据集转换为不同的文件类型，即 GDAL 更全面支持的文件类型，例如 GeoTiff。要转换文件类型，您可以`gdal_translate`像这样使用命令行程序：

```
gdal_translate -of GTiff DGM_10_R.asc DGM_10_R.tif 
```

我能够在我的计算机上重现您的错误，并且只需更改文件类型即可修复错误。

# c# - 在 Forms 6i 中使用 MSCOMM32.OCX 进行串行通信

> ID：10635109
> 
> 赞同：0
> 
> 时间：2012-05-17T11:44:04.077
> 
> 标签：c#, vb.net, forms, oracle, plsql

我想用我的 ORACLE 表单串行通信称重桥。我已经在我的项目中导入了 MSCOMM32.OCX 并且按下按钮我编写了一个程序来开始称重桥和我的表单之间的通信。我被困在 MSCOMM32.OCX 包的 GET_NUM_PROPERTY 上。

所以请指导我并与我分享你的知识。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:41:49.517

班级：

```
Imports System
Imports System.Text
Imports System.Drawing
Imports System.IO.Ports
Imports System.Windows.Forms

Public Class CommManager
Public Enum TransmissionType
    Text
    Hex
End Enum
Public Enum MessageType
    Incoming
    Outgoing
    Normal
    Warning
    [Error]
End Enum
Private _baudRate As String = String.Empty
Private _parity As String = String.Empty
Private _stopBits As String = String.Empty
Private _dataBits As String = String.Empty
Private _portName As String = String.Empty
Private _transType As TransmissionType
Private _displayWindow As RichTextBox
Private _msg As String
Private _type As MessageType
Private MessageColor As Color() = {Color.Blue, Color.Green, Color.Black, Color.Orange, Color.Red}
Private comPort As New SerialPort()
Private write As Boolean = True

Public Property BaudRate() As String
    Get
        Return _baudRate
    End Get
    Set(ByVal value As String)
        _baudRate = value
    End Set
End Property

Public Property Parity() As String
    Get
        Return _parity
    End Get
    Set(ByVal value As String)
        _parity = value
    End Set
End Property

Public Property StopBits() As String
    Get
        Return _stopBits
    End Get
    Set(ByVal value As String)
        _stopBits = value
    End Set
End Property

Public Property DataBits() As String
    Get
        Return _dataBits
    End Get
    Set(ByVal value As String)
        _dataBits = value
    End Set
End Property

Public Property PortName() As String
    Get
        Return _portName
    End Get
    Set(ByVal value As String)
        _portName = value
    End Set
End Property

Public Property CurrentTransmissionType() As TransmissionType
    Get
        Return _transType
    End Get
    Set(ByVal value As TransmissionType)
        _transType = value
    End Set
End Property

Public Property DisplayWindow() As RichTextBox
    Get
        Return _displayWindow
    End Get
    Set(ByVal value As RichTextBox)
        _displayWindow = value
    End Set
End Property

Public Property Message() As String
    Get
        Return _msg
    End Get
    Set(ByVal value As String)
        _msg = value
    End Set
End Property

Public Property Type() As MessageType
    Get
        Return _type
    End Get
    Set(ByVal value As MessageType)
        _type = value
    End Set
End Property
Public Sub New(ByVal baud As String, ByVal par As String, ByVal sBits As String, ByVal dBits As String, ByVal name As String, ByVal rtb As RichTextBox)
    _baudRate = baud
    _parity = par
    _stopBits = sBits
    _dataBits = dBits
    _portName = name
    _displayWindow = rtb
    AddHandler comPort.DataReceived, AddressOf comPort_DataReceived
End Sub

Public Sub New()
    _baudRate = String.Empty
    _parity = String.Empty
    _stopBits = String.Empty
    _dataBits = String.Empty
    _portName = "COM1"
    _displayWindow = Nothing
    AddHandler comPort.DataReceived, AddressOf comPort_DataReceived
End Sub
Public Sub WriteData(ByVal msg As String)
    Select Case CurrentTransmissionType
        Case TransmissionType.Text
            If Not (comPort.IsOpen = True) Then
                comPort.Open()
            End If
            comPort.Write(msg)
            _type = MessageType.Outgoing
            _msg = msg + "" + Environment.NewLine + ""
            DisplayData(_type, _msg)
            Exit Select
        Case TransmissionType.Hex
            Try
                'convert the message to byte array
                Dim newMsg As Byte() = HexToByte(msg)
                If Not write Then
                    DisplayData(_type, _msg)
                    Exit Sub
                End If
                'send the message to the port
                comPort.Write(newMsg, 0, newMsg.Length)
                'convert back to hex and display
                _type = MessageType.Outgoing
                _msg = ByteToHex(newMsg) + "" + Environment.NewLine + ""
                DisplayData(_type, _msg)
            Catch ex As FormatException
                'display error message
                _type = MessageType.Error
                _msg = ex.Message + "" + Environment.NewLine + ""
                DisplayData(_type, _msg)
            Finally
                _displayWindow.SelectAll()
            End Try
            Exit Select
        Case Else
            If Not (comPort.IsOpen = True) Then
                comPort.Open()
            End If
            comPort.Write(msg)
            _type = MessageType.Outgoing
            _msg = msg + "" + Environment.NewLine + ""
            DisplayData(MessageType.Outgoing, msg + "" + Environment.NewLine + "")
            Exit Select
    End Select
End Sub
Private Function HexToByte(ByVal msg As String) As Byte()
    If msg.Length Mod 2 = 0 Then
        _msg = msg
        _msg = msg.Replace(" ", "")
        Dim comBuffer As Byte() = New Byte(_msg.Length / 2 - 1) {}
        For i As Integer = 0 To _msg.Length - 1 Step 2
            comBuffer(i / 2) = CByte(Convert.ToByte(_msg.Substring(i, 2), 16))
        Next
        write = True
        Return comBuffer
    Else
        _msg = "Invalid format"
        _type = MessageType.Error
        write = False
        Return Nothing
    End If
End Function

Private Function ByteToHex(ByVal comByte As Byte()) As String
    Dim builder As New StringBuilder(comByte.Length * 3)
    For Each data As Byte In comByte
        builder.Append(Convert.ToString(data, 16).PadLeft(2, "0"c).PadRight(3, " "c))
    Next
    Return builder.ToString().ToUpper()
End Function
<STAThread()> _
Private Sub DisplayData(ByVal type As MessageType, ByVal msg As String)
    _displayWindow.Invoke(New EventHandler(AddressOf DoDisplay))
End Sub
Public Function OpenPort() As Boolean
    Try
        If comPort.IsOpen = True Then
            comPort.Close()
        End If
        comPort.BaudRate = Integer.Parse(_baudRate)
        comPort.DataBits = Integer.Parse(_dataBits)
        comPort.StopBits = DirectCast([Enum].Parse(GetType(StopBits), _stopBits), StopBits)
        comPort.Parity = DirectCast([Enum].Parse(GetType(Parity), _parity), Parity)
        comPort.PortName = _portName
        comPort.Open()
        _type = MessageType.Normal
        _msg = "Port opened at " + DateTime.Now + "" + Environment.NewLine + ""
        DisplayData(_type, _msg)
        Return True
    Catch ex As Exception
        DisplayData(MessageType.[Error], ex.Message)
        Return False
    End Try
End Function
Public Sub ClosePort()
    If comPort.IsOpen Then
        _msg = "Port closed at " + DateTime.Now + "" + Environment.NewLine + ""
        _type = MessageType.Normal
        DisplayData(_type, _msg)
        comPort.Close()
    End If
End Sub
Public Sub SetParityValues(ByVal obj As Object)
    For Each str As String In [Enum].GetNames(GetType(Parity))
        DirectCast(obj, ComboBox).Items.Add(str)
    Next
End Sub
Public Sub SetStopBitValues(ByVal obj As Object)
    For Each str As String In [Enum].GetNames(GetType(StopBits))
        DirectCast(obj, ComboBox).Items.Add(str)
    Next
End Sub
Public Sub SetPortNameValues(ByVal obj As Object)
    For Each str As String In SerialPort.GetPortNames()
        DirectCast(obj, ComboBox).Items.Add(str)
    Next
End Sub
Private Sub comPort_DataReceived(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs)
    Select Case CurrentTransmissionType
        Case TransmissionType.Text
            Dim msg As String = comPort.ReadExisting()
            _type = MessageType.Incoming
            _msg = msg
            DisplayData(MessageType.Incoming, msg + "" + Environment.NewLine + "")
            Exit Select
        Case TransmissionType.Hex
            Dim bytes As Integer = comPort.BytesToRead
            Dim comBuffer As Byte() = New Byte(bytes - 1) {}
            comPort.Read(comBuffer, 0, bytes)
            _type = MessageType.Incoming
            _msg = ByteToHex(comBuffer) + "" + Environment.NewLine + ""
            DisplayData(MessageType.Incoming, ByteToHex(comBuffer) + "" + Environment.NewLine + "")
            Exit Select
        Case Else
            Dim str As String = comPort.ReadExisting()
            _type = MessageType.Incoming
            _msg = str + "" + Environment.NewLine + ""
            DisplayData(MessageType.Incoming, str + "" + Environment.NewLine + "")
            Exit Select
    End Select
End Sub
Private Sub DoDisplay(ByVal sender As Object, ByVal e As EventArgs)
    _displayWindow.SelectedText = String.Empty
    _displayWindow.SelectionFont = New Font(_displayWindow.SelectionFont, FontStyle.Bold)
    _displayWindow.SelectionColor = MessageColor(CType(_type, Integer))
    _displayWindow.AppendText(_msg)
    _displayWindow.ScrollToCaret()
    End Sub
    End Class 
```

利用：

```
 comm.Parity = cboParity.Text
    comm.StopBits = cboStop.Text
    comm.DataBits = cboData.Text
    comm.BaudRate = cboBaud.Text
    comm.DisplayWindow = rtbDisplay
    comm.OpenPort() 
```

# apache - 反向代理和 getServerPort() 背后的 WebSphere Portal

> ID：10635110
> 
> 赞同：2
> 
> 时间：2012-05-17T11:44:13.043
> 
> 标签：apache, websphere, reverse-proxy, mod-proxy, websphere-portal

我在访问部署在反向代理后面（使用 Apache）的 WebSphere Portal 时遇到问题。问题在于，在检查浏览器发出的 HTTP 请求时，有些请求是针对代理的，有些则直接针对 WebSphere Portal。

我的 Apache 配置：

```
ProxyPassReverseCookieDomain backend-server proxy-server

ProxyPass / http://backend-server:10039/
ProxyPassReverse / http://backend-server:10039/ 
```

问题是，一些生成的资源包含针对 backend-server:10039 的绝对 URI ......

我还应该配置什么才能在反向代理后面正确访问 WebSphere Portal？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T11:48:32.727

因为我可以回答自己的问题，所以问题出在：

在服务器端，WebSphere Portal 中的 portlet 和 JSP 使用`request.getServerHost()`和`request.getServerPort()`. 为了使这些方法在反向代理（发送`Host:`标头）之后工作。我不得不补充：

```
ProxyPreserveHost On 
```

到 apache 配置和：

```
com.ibm.ws.webcontainer.extractHostHeaderPort = true
trusthostheaderport = true 
```

IBM 控制台中 Web 容器的附加属性：`WebSphere application servers -> WebSphere_Portal -> Web Container Settings -> Web Container -> Custom properties`.

[此处](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/rweb_custom_props.html#returningtheportnumberfromtherequesthostheaderfirst)描述了这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T09:01:00.583

几天前我遇到了同样的问题，最终选择了 apache mod_substitute 来更改这些 url，如下所示：
`Substitute "s|http ://backend-server:10039/|/|i"`

# windows-phone-7 - 像人一样同时更改背景集线器

> ID：10635111
> 
> 赞同：0
> 
> 时间：2012-05-17T11:44:13.263
> 
> 标签：windows-phone-7, windows-phone-7.1

我正在使用我的应用程序。当我在设置中更改主题时，我看到人们中心改变了颜色。它也适用于我的 ApplicationBar。但我不知道如何使用我的网格应用程序执行此操作（在默认模式下，背景无法更改，直到我退出并再次打开此应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:19:15.553

似乎存在与此特定行为有关的已知问题：-

[在 Windows Phone Mango 中停用和重新激活应用程序时更改主题时是否存在错误](https://stackoverflow.com/questions/7324476/is-there-a-bug-when-changing-themes-when-app-is-deactivated-and-reactivated-in-w)

# android - 带有图像的 Android 推特推文

> ID：10635113
> 
> 赞同：7
> 
> 时间：2012-05-17T11:44:20.957
> 
> 标签：android

> **可能重复：**
> [我们可以使用 Android 中的 twitter API 在 twitter 上发布图像吗？](https://stackoverflow.com/questions/7609656/can-we-post-image-on-twitter-using-twitter-api-in-android)

我在一个 android 应用程序中工作，我想在 Twitter 上发布一条消息和一张图片。我只能通过代码向 twitter 发送推文：

```
String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

AccessToken a = new AccessToken(token, secret);
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(Constants.CONSUMER_KEY,
        Constants.CONSUMER_SECRET);
twitter.setOAuthAccessToken(a);
try {

**twitter.updateStatus("New tweet");**
        twitter.//Which property of twitter should I use to tweet an image and  //message
} catch (TwitterException e) {
    // TODO Auto-generated catch block
    Log.e("Errorssssssssssssss", e.toString());
} 
```

我如何也包含图像？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T11:57:33.230

参考[http://www.londatiga.net/it/how-to-post-twitter-status-from-android/](http://www.londatiga.net/it/how-to-post-twitter-status-from-android/)，使用 twitter4j 库

```
public void uploadPic(File file, String message) throws Exception  {
    try{
    StatusUpdate status = new StatusUpdate(message);
    status.setMedia(file);
    mTwitter.updateStatus(status);}
    catch(TwitterException e){
        Log.d("TAG", "Pic Upload error" + e.getErrorMessage());
        throw e;
    }
} 
```

其中 mTwitter 是 Twitter 类的一个实例

确保您使用的是最新版本的 twitter4j-core jar 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T11:51:46.183

您可以尝试 Twitter4j Library 附带的示例。以下代码将帮助您

```
public final class TwitpicImageUpload {
    /**
     * Usage: java twitter4j.examples.media.TwitpicImageUpload [API key] [message]
     *
     * @param args message
     */
    public static void main(String[] args) {
        if (args.length < 2) {
            System.out.println("Usage: java twitter4j.examples.media.TwitpicImageUpload [API key] [image file path] [message]");
            System.exit(-1);
        }
        try {
            Configuration conf = new ConfigurationBuilder().setMediaProviderAPIKey(args[0]).build();
            ImageUpload upload = new ImageUploadFactory(conf).getInstance(MediaProvider.TWITPIC);
            String url;
            if (args.length >= 3) {
                url = upload.upload(new File(args[1]), args[2]);
            } else {
                url = upload.upload(new File(args[1]));
            }
            System.out.println("Successfully uploaded image to Twitpic at " + url);
            System.exit(0);
        } catch (TwitterException te) {
            te.printStackTrace();
            System.out.println("Failed to upload the image: " + te.getMessage());
            System.exit(-1);
        }
    }
} 
```

下载 Twitter4j 库在此处查找更多示例。

# java - 识别堆转储中的旧代（或仅获取旧代的堆转储）

> ID：10635119
> 
> 赞同：2
> 
> 时间：2012-05-17T11:44:37.833
> 
> 标签：java, memory, garbage-collection, heap-memory

我想我有内存泄漏。
（他们说第一步是承认问题，对吧？）

无论如何，我想我知道 - 请参阅按区域划分的堆的附加图像：![堆区域](../Images/eae363a11adb6a18cee33835c27006f4.png)。绿色是伊甸园，蓝色/红色是 S0/S1，紫色是旧的。我有无限的任期（> 15），在分配内存和溢出到老一代之间经过了很多时间。因此 - 内存泄漏。我认为。

那么 - 问题 - 我如何分析泄漏的内容？如您所见，我的伊甸园非常活跃。很多对象一直在被创建和销毁。

有没有办法只对老一代进行堆转储？或者以某种方式识别完整堆转储中的旧代（如果是，使用什么工具）？

编辑1：澄清：我没有做任何*应该*在内存中保留对象的事情。我在最初启动后分配的所有东西都应该在年轻时消亡。

Edit2：新发现：我进行了一次堆转储，疯狂地进行了 GC，然后又进行了一次。第二个显示老一代的使用水平显着降低。两者的主要区别在于终结器持有的对象。终结器不是在年轻的 GC 周期中运行吗？他们总是等待清理完整的 GC 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:29:29.503

看到一些东西传播到老一代并不是一个大问题。在您的老一代达到某个阈值后，将启动完整的 GC。如果这不能回收内存，那么你就有问题了。您看到在年轻收集期间分配的一些内存这一事实不应该是一个令人担忧的问题。

> 在分配内存和溢出到旧代之间经过了很多时间。因此 - 内存泄漏。我认为

不是真的......仅仅因为内存被添加到旧代并不意味着它是内存泄漏。在年轻的收集过程中，老对象被提升为老对象是正常的做法。正是在那些年轻的收集期间，较旧的对象被添加到旧代中。这可能只是您的应用程序仍在增加。在大规模应用程序中，可能有一些功能并非每天都在使用，这些功能可能会比您预期的更晚进入内存。

话虽如此，如果您真的关心添加到旧代的任何内存并想进一步调查，我建议您在演示环境中运行此应用程序。附加一个分析器（VisualVM 可以工作）和负载测试（JMeter 很好而且免费）你的应用程序。如果您查看对象，您可以了解对象是哪一代。您还想看看当您的老一代达到一个完整 GC 将启动的阈值时会发生什么（通常在 70%-90% 范围内）。如果你的老一代恢复到 20% 的阈值，那么就没有泄漏。在某些情况下，老一代可能永远不会达到启动完整 GC 的地步，而是按照您的预期趋于平稳。负载测试将有助于识别这一点。

如果它没有恢复并且您确认您有内存泄漏，那么您将需要捕获堆转储 (hprof) 并使用诸如 MAT（内存分析器工具）之类的工具来分析转储以找到罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:50:09.833

使用 JVisualVM（自 Java 6 Build 10 或类似版本以来的 JDK 的一部分），您可以查看内存中对象的类型。这将帮助您追踪泄漏的位置。当然，这需要大量挖掘代码，但这是我用过的最好的工具，它始终可用且可靠。

注意传递的对象，可能是您有一个句柄被保存在一个没有被清除的列表或数组中。我发现如果我在几分钟内观察在 JVisualVM 中创建和保存的对象的数量，我通常会知道在代码中的何处去挖掘未释放的有问题的对象。

# php - 删除 HTML 表格的最后一列 - 使用 preg_replace

> ID：10635122
> 
> 赞同：1
> 
> 时间：2012-05-17T11:44:59.953
> 
> 标签：php, dom, preg-replace

在一个简单的 HTML 表格中，我想删除最后一列

```
<table>
<tbody>
<tr>
    <th>1</th>
    <th>2</th>
    <th>3</th>
    <th rowspan="3">I want to remove this</th>
</tr>

<tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td rowspan="3">I want to remove this</td>
</tr> 
```

我正在使用此代码，但我仍然留下内容以及**th**和 td行**跨度**

```
$myTable = preg_replace('#</?td rowspan[^>]*>#i', '', $myTable);
echo $myTable 
```

问题：如何删除最后一列及其内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:08:24.810

```
<?php

  // Create a new DOMDocument and load the HTML
  $dom = new DOMDocument('1.0');
  $dom->loadHTML($html);

  // Create a new XPath query
  $xpath = new DOMXPath($dom);

  // Find all elements with a rowspan attribute
  $result = $xpath->query('//*[@rowspan]');

  // Loop the results and remove them from the DOM
  foreach ($result as $cell) {
    $cell->parentNode->removeChild($cell);
  }

  // Save back to a string
  $newhtml = $dom->saveHTML(); 
```

[看到它工作](http://codepad.org/c8wLrVl0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:57:02.837

我想这会做到的

```
preg_replace("/<(?:td|th)[^>]*>.*?<\/(?:td|th)>\s+<\/tr>/i", "</tr>", $myTable); 
```

`</tr>`假设您在每一行的末尾都有关闭 tr 标签（ ），这与您的示例不同

**编辑：**这将在关闭之前删除任何`<td>`或`<th>`元素，`</tr>`无论它们是否有任何属性

[工作示例](http://codepad.org/IiTJlarH)

# c++ - boost::bind 和虚函数

> ID：10635123
> 
> 赞同：2
> 
> 时间：2012-05-17T11:45:14.137
> 
> 标签：c++, boost

我有他以下界面：

```
template <class T>
class AbstractTask {
public:
    virtual void BindTaskCompleted(AbstractTask<T> &bindedTask)=0;
    virtual void Join(TaskResult<T>)=0;
}; 
```

以及以下实现：

```
template <class T>
class SlaveTask: public AbstractTask<T> {
public:
    typedef boost::function<void(TaskResult<T>)> joinFunction;

    void BindTaskCompleted(AbstractTask<T> &bindedTask)
    {
        /////////////WORK OK//////////////////////////////  
        //bindedTask.Join(result);

        /////////////COMPILATION ERROR/////////////////////
        slaveTaskCompletionFunction=boost::bind(&AbstractTask<T>::Join,bindedTask,result);
    }

     void Join(TaskResult<T> r)
    {
        slaveTaskCompletionFunction(r);
    }

private:
    joinFunction slaveTaskCompletionFunction;
    TaskResult<T> result;

}; 
```

我正在尝试将 AbstractTask 实现的虚拟 Join 方法绑定到具有相同签名的 boost::function 。boost::bind 抛出 77 个编译错误，我不明白为什么。

起初我认为 boost::bind 不能与虚拟方法一起使用，但似乎并非如此： [Virtual function and boost bind奇怪的行为](https://stackoverflow.com/questions/8955289/virtual-function-and-boost-bind-strange-behavior)

在此先感谢您的帮助！

托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:02:40.320

问题是您已经绑定了所有参数，但是`boost::function`typedef 以及您使用它的方式表明它需要 1 个参数。

将其更改为以下内容。

`slaveTaskCompletionFunction=boost::bind(&AbstractTask<T>::Join,&bindedTask,_1);`

编辑：此外，当您通过引用传入 bindedTask 时，您遇到了切片问题。您要么必须通过指针传递它，要么使用`boost::ref`; 否则，`boost::bind`尝试复制 ,`AbstractTask<T>`最终只会复制界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:03:03.500

尝试像这样绑定：

```
slaveTaskCompletionFunction=boost::bind(&AbstractTask<T>::Join, &bindedTask, _1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:07:15.210

要么通过 bindedTask 传递 const ref：

```
 BindTaskCompleted(const AbstractTask<T> &bindedTask) 
```

或使用 boost::ref 绑定它：

```
 boost::bind(&AbstractTask<T>::Join,boost::ref(bindedTask),result); 
```

# silverlight - 附加属性中的 ownerType 是什么？

> ID：10635125
> 
> 赞同：1
> 
> 时间：2012-05-17T11:45:21.013
> 
> 标签：silverlight, attached-properties

我有一个附加属性：

```
public static readonly DependencyProperty DataTableProperty =
    DependencyProperty.RegisterAttached("DataTable",
    typeof(MetadataTable),
    typeof(TabControl),
    new PropertyMetadata(DataTableChanged)); 
```

我像这样使用它，一切都正确构建：

```
<sdk:TabControl view:DataBrowserHelper.DataTable="{Binding Path=Table}" /> 
```

如果我将属性的 ownerType 更改为另一种类型，一切仍然正确构建。我认为 ownerType 确定了可附加到的属性的类型。所以我错了？什么是所有者类型？以及如何限制属性的使用（例如，使其只能附加到 TabControl 或 DataGrid）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:54:43.643

ownerType 是拥有该属性的类的类型。例如，如果您在名为 MyClass 的类中声明此属性，则此 DependencyProperty 的 ownerType 将为 MyClass。

限制使用很复杂，因为您的程序只会在运行时知道您在接口上附加到 DP 的元素的类型，所以它会在您手中正确执行。

# soundcloud - 自定义soundcloud播放器，更改波形png颜色？

> ID：10635129
> 
> 赞同：0
> 
> 时间：2012-05-17T11:45:35.727
> 
> 标签：soundcloud

我正在从 soundcloud js api ( [http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player) ) 创建一个自定义播放器/皮肤。

一切都很好，除了我似乎找不到改变波形png颜色的方法（例如[http://w1.sndcdn.com/ek9l31pY98LB_m.png](http://w1.sndcdn.com/ek9l31pY98LB_m.png)）......这甚至可能吗？

谢谢

:: 埃德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T00:04:32.943

您可以在 CSS 文件中更改波形的填充，只需找到

```
.sc-scrubber .sc-played {
    background-color: #333;
    opacity: 0.4;
} 
```

并将颜色更改为您喜欢的任何颜色。

不确定这是否是您想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:09:00.603

您可以使用后端处理（例如：对于 PHP、GD 或 ImageMagick 库），甚至在前端，使用 Javascript 并`<canvas>`以您喜欢的任何样式重新创建波形，但正如 Paul 所说，没有预先打包的解决方案为你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T17:23:06.277

有一个 JS 库可以为您处理这个问题：[http](http://waveformjs.org/) ://waveformjs.org/ 。

它使用 Web 服务来分析波形、返回峰值并为您绘制它们，因此它仅适用于支持 Canvas 的浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T22:01:17.273

抱歉，我们的 API 不提供任何更改波形颜色的机制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-29T21:07:51.543

是的，这绝对是可能的。

正如其他人建议使用服务器端脚本重新着色它一样，我构建了一个解决方案，它执行以下操作：

1.  当音轨改变时，使用 javascript 来监听`onPlayerTrackSwitch.scPlayer`soundcloud 播放器发出的事件。

2.  获取波形的 img src 的 URL

3.  将波形 img src 替换为服务器上自定义 PHP 脚本的 URI。

4.  自定义 PHP 脚本获取原始波形图像 url 以及 RGB 颜色值，并使用 GD 图像库加载它并重新着色。

5.  `Content-Type: image/png`PHP 脚本最终呈现带有标题的重新着色的图像。

完整示例：[https ://snipt.net/plong0/custom-soundcloud-waveform-png/](https://snipt.net/plong0/custom-soundcloud-waveform-png/)

# css - 关于 和风格

> ID：10635139
> 
> 赞同：2
> 
> 时间：2012-05-17T11:46:18.453
> 
> 标签：css, html-lists

> **可能重复：**
> [是否有一种简单的方法可以更改列表中项目符号的颜色？](https://stackoverflow.com/questions/76564/is-there-an-easy-way-to-change-the-color-of-a-bullet-in-a-list)

是否可以将特定样式应用于`<ol>`列表的数字？

例子：

1.  富
2.  酒吧

我需要“1”。和“2”。为红色，“foo”和“bar”为蓝色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:52:39.700

使用`before`伪元素和`counter`函数可以实现：http: [//jsfiddle.net/QXe7K/](http://jsfiddle.net/QXe7K/)

```
ul { counter-reset : item; }
li { color         : blue; }
li:before {
    counter-increment : item;
    content           : counter(item) ". ";
    color             : red;
} 
```

不需要额外的标记。它也适用于 IE8（以及其他所有现代浏览器）

# wcf - WCF 服务的 Web 参考

> ID：10635144
> 
> 赞同：1
> 
> 时间：2012-05-17T11:46:28.767
> 
> 标签：wcf

我通过添加为 webreference 在我的 VS 2005 解决方案中使用 WCF 服务。例如：今天我的 WCF url 地址是 - http://'ip-001':/service 如果明天我在 ip-002 机器上部署了我的服务，在这种情况下，我必须使用 http:/ 再次添加服务引用/'ip-002':/service 或者我只需要更改配置文件。注意：从 ip-001 到 ip-002 没有进行任何服务更改。让我知道没有任何服务更改只有 url 是更改在这种情况下我必须更改只有配置会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:21:26.223

只要您没有打开安全性，只需更改地址就可以了。如果您启用了安全性，那么有两个问题需要注意

如果他们使用 SSL，那么您需要确保他们使用的证书颁发机构在客户端计算机上是受信任的

如果客户端通过 DNS 识别远程机器，那么如果您想支持多个远程机器，则必须切换到类似证书参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:58:17.277

在这种情况下，只有更改配置才会起作用。

添加 Web 引用只是联系元数据交换端点并下载 wsdl，然后它使用它来生成客户端代码以遵守合同。您不需要这样做，您可以手工制作正确的客户端代码，或与服务器共享库以获得相同的客户端代码。

一旦你有了这个，客户端和服务器就会与从该代码生成的肥皂消息进行通信。重要的是这些肥皂信息。只要服务器接收到正确构造的消息并且客户端正确解码来自服务器的消息，一切都会正常工作。它现在托管在另一台服务器上的事实是没有实际意义的。

请记住，您的服务可以由不基于 .net 的客户端调用，因此所有客户端代码都可以用不同的语言生成，或者消息可以由使用磁铁操纵位的人发送

# c# - LINQ TO ENTITY：删除“where”表达式中的特殊字符

> ID：10635147
> 
> 赞同：3
> 
> 时间：2012-05-17T11:46:41.667
> 
> 标签：c#, string, linq, entity-framework

我正在使用 LINQ TO ENTITY，以便根据他们的电话号码过滤人员列表。

```
IEnumerable<Person> personsList = (from person in repoPersons.All()
                                             where person.PhoneNumber.Contains(PhoneSearch)
                                             select person).ToList(); 
```

`repoPersons.All()`包含从数据库中读取的所有人员。 `PhoneSearch`是用户输入的搜索词。

电话号码以特殊格式作为字符串保存在数据库中：（`+1 (555) 555-6608`例如。

但我想允许用户搜索`5555556608`而不必正确格式化。（我希望他也能够搜索到部分电话号码`556608`并且仍然得到结果。

我尝试创建一个名为的方法 ，该方法`RemoveSpecialCharactersInPhoneNumber`将删除特殊字符并将其返回并像这样使用它：

```
IEnumerable<Person> personsList = (from person in repoPersons.All()
                                             where RemoveSpecialCharactersInPhoneNumber(person.PhoneNumber).Contains(PhoneSearch)
                                             select person).ToList(); 
```

但我得到这个错误：

```
LINQ to Entities does not recognize the method 'System.String RemoveSpecialCharactersInPhoneNumber(System.String)' method, and this method cannot be translated into a person expression. 
```

那么有没有一种方法可以使用 LINQ TO ENTITY 检查 PhoneNumber 是否包含不带特殊字符的 PhoneSearch？

我知道我可以使用 LINQ TO ENTITY 获取所有列表，然后使用 LINQ TO OBJECT 过滤它，但我试图避免这种方法。

非常感谢任何解决方案或提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:03:41.590

以下内容并不完全整洁，但它会解决您的问题（因为没有方法试图在 SQL 端错误地解决）

```
IEnumerable<Person> personsList = (from person in repoPersons.All()
         where person.Phone.Replace("+", "").Replace("(", "").Replace(")", "").Replace("-", "").Replace(" ", "").Contains(PhoneNumber)
         select person).ToList() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:50:54.587

它将给出错误，因为 linq to entity 将被转换为 SQL 查询，因此 sql 中没有 RemoveSpecialCharactersInPhoneNumber 的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:51:55.443

[这](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/19a33909-c532-419b-a533-57e431c0b30b)是类似的问题。

似乎在服务器端评估 where 子句，无法识别此方法。

CLR 方法需要转换为[Cannonical 映射](http://msdn.microsoft.com/en-us/library/bb738681.aspx)，以便它可以在服务器上执行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T11:50:27.883

尝试做

```
IEnumerable<Person> personsList = (from person in repoPersons.All().ToList()
                                         where RemoveSpecialCharactersInPhoneNumber(person.PhoneNumber).Contains(PhoneSearch)
                                         select person).ToList(); 
```

这将阻止 LINQ 尝试`RemoveSpecialCharactersInPhoneNumber`在 SQL 层中解析，而是可以按照您的描述由您的业务层处理。

# uml - UML 中的自我消息返回值

> ID：10635149
> 
> 赞同：1
> 
> 时间：2012-05-17T11:46:42.763
> 
> 标签：uml

我想表明一条自我消息将在 UML 中返回一个错误。我认为这是不可能的，但我还能如何做到这一点？

我正在使用 Enterprise Arthitect。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:35:44.130

我不认为这是可能的......自我消息没有返回消息，因此没有地方放置错误。

# prolog - 将 prolog 集成到其他环境中

> ID：10635153
> 
> 赞同：7
> 
> 时间：2012-05-17T11:46:53.043
> 
> 标签：prolog, swi-prolog

我正在使用 Prolog 进行学术项目。我想知道 Prolog 是否有办法与其他编程语言进行交互。我想要的是 Prolog 问题和答案的简单输入/输出重定向。

我知道 Prolog 可以在某些 Prolog 实现中调用 C 函数。即 SWI 序言。

我需要的是 Prolog 问题和用户提供的答案的简单输入/输出重定向。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T21:04:26.740

我认为您的任务对外语界面没有任何真正的要求：使用 Prolog IO，它易于使用且高效。您也可以从[协议](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.36%27,swi%28%27/doc/Manual/protocol.html%27%29%29)/1 的支持开始。只是一个 KISS 建议...

当您需要用另一种语言实现某些东西时，它是强制性的。

SWI-Prolog [C++ 接口](http://www.swi-prolog.org/pldoc/package/pl2cpp.html)它比 C 对应物更容易使用，并且允许使用非常简单的内置代码扩展语言以及将引擎嵌入到独立的“主”中。这两个方面可以优雅地融合在一起：比如说，对于一个快速原型，我们只实现内置函数，并使用 REPL 顶层，而一个完整的应用程序可以启动引擎用作逻辑引擎，并提交（希望通过 REPL 测试) 在后台查询。

然后是[JPL](http://www.swi-prolog.org/pldoc/doc/home/vnc/prolog/lib/swipl/library/jpl.pl)接口 SWI-Prolog 和 Java。我对此知之甚少...我在 SWI-Prolog 邮件列表上看到了一些问题，主要是由于不同线程模型的复杂性。但它肯定是有效的。

正在发生一个有趣的开发，以使 IDE 可用于 Eclipse（[PDT](http://sewiki.iai.uni-bonn.de/research/pdt/start)，Prolog 开发工具）。我认为他们使用自己的 Java 接口。目前可能是比 JPL 更好的选择。

但今天 SWI-Prolog 可以提出的最有趣的接口是 HTTP 服务器基础设施。如果您了解 WEB 客户端开发（HTML/JavaScript/XML/RDF），那么您有很多工具可以在 MVC 客户端/服务器中拆分您的设计。Prolog 运行 Web 服务，富客户端与最终用户交互。这种架构使您的应用程序准备好在本地以及在野外运行。

请参阅相关的“操作[方法”](http://www.swi-prolog.org/howto/http/)部分...这不是一项简单的任务，而是（恕我直言）一项非常有益且长期存在的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:45:51.953

SWI-Prolog 可以与 C ( [http://www.swi-prolog.org/pldoc/package/clib.html](http://www.swi-prolog.org/pldoc/package/clib.html) )、C++ ( [http://www.swi-prolog.org/pldoc/package/pl2cpp.html](http://www.swi-prolog.org/pldoc/package/pl2cpp.html) ) 接口)、C# ( [http://www.swi-prolog.org/contrib/CSharp.html](http://www.swi-prolog.org/contrib/CSharp.html) ) 和 Python ( [http://code.google.com/p/pyswip/](http://code.google.com/p/pyswip/) )。此外，您可以通过例如外部文件与 Prolog 进行通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T16:40:41.237

看看[Amzi Prolog + Logic Server](http://www.amzi.com/products/amzi_prolog_logic_server.htm) - 它的目的是使 prolog 程序可以作为其他传统语言的组件访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T15:41:25.460

这取决于您使用的 Prolog 发行版。如前所述，SWI-Prolog 为最常见的用途（如 C、C++、数据库、HTTP、XML 等）提供了不同的接口。[Ciao](http://www.ciaohome.org)发行版对于您正在寻找的内容也很有用。在这种情况下是 C 所以看看这个链接[Ciao Prolog and C](http://www.ciaohome.org/docs/ciao/foreign_interface_doc.html)

# php - 通过这个一刀切的功能运行所有 Mysqli 查询（SELECT、UPDATE、DELETE 等）是否可以？

> ID：10635154
> 
> 赞同：0
> 
> 时间：2012-05-17T11:46:53.517
> 
> 标签：php, database, mysqli, prepared-statement

我对 Mysqli 完全陌生（从 MySQL 切换），所以为了保持简单、安全和可靠，通过这个万能的函数绝对运行所有 Mysqli 查询是否有意义？

为什么或为什么不呢？两种方式的利弊是什么？

```
function mysqli_prepared_query($link,$sql,$typeDef = FALSE,$params = FALSE){ 
  if($stmt = mysqli_prepare($link,$sql)){ 
    if(count($params) == count($params,1)){ 
      $params = array($params); 
      $multiQuery = FALSE; 
    } else { 
      $multiQuery = TRUE; 
    }  

    if($typeDef){ 
      $bindParams = array();    
      $bindParamsReferences = array(); 
      $bindParams = array_pad($bindParams,(count($params,1)-count($params))/count($params),"");         
      foreach($bindParams as $key => $value){ 
        $bindParamsReferences[$key] = &$bindParams[$key];  
      } 
      array_unshift($bindParamsReferences,$typeDef); 
      $bindParamsMethod = new ReflectionMethod('mysqli_stmt', 'bind_param'); 
      $bindParamsMethod->invokeArgs($stmt,$bindParamsReferences); 
    } 

    $result = array(); 
    foreach($params as $queryKey => $query){ 
      foreach($bindParams as $paramKey => $value){ 
        $bindParams[$paramKey] = $query[$paramKey]; 
      } 
      $queryResult = array(); 
      if(mysqli_stmt_execute($stmt)){ 
        $resultMetaData = mysqli_stmt_result_metadata($stmt); 
        if($resultMetaData){                                                                               
          $stmtRow = array();   
          $rowReferences = array(); 
          while ($field = mysqli_fetch_field($resultMetaData)) { 
            $rowReferences[] = &$stmtRow[$field->name]; 
          }                                
          mysqli_free_result($resultMetaData); 
          $bindResultMethod = new ReflectionMethod('mysqli_stmt', 'bind_result'); 
          $bindResultMethod->invokeArgs($stmt, $rowReferences); 
          while(mysqli_stmt_fetch($stmt)){ 
            $row = array(); 
            foreach($stmtRow as $key => $value){ 
              $row[$key] = $value;           
            } 
            $queryResult[] = $row; 
          } 
          mysqli_stmt_free_result($stmt); 
        } else { 
          $queryResult[] = mysqli_stmt_affected_rows($stmt); 
        } 
      } else { 
        $queryResult[] = FALSE; 
      } 
      $result[$queryKey] = $queryResult; 
    } 
    mysqli_stmt_close($stmt);   
  } else { 
    $result = FALSE; 
  } 

  if($multiQuery){ 
    return $result; 
  } else { 
    return $result[0]; 
  } 
} 
?> 

Example(s): 
For a table of firstName and lastName: 
John Smith 
Mark Smith 
Jack Johnson 
Bob Johnson 

<?php 
//single query, single result 
$query = "SELECT * FROM names WHERE firstName=? AND lastName=?"; 
$params = array("Bob","Johnson"); 

mysqli_prepared_query($link,$query,"ss",$params) 
/* 
returns array( 
0=> array('firstName' => 'Bob', 'lastName' => 'Johnson') 
) 
*/ 

//single query, multiple results 
$query = "SELECT * FROM names WHERE lastName=?"; 
$params = array("Smith"); 

mysqli_prepared_query($link,$query,"s",$params) 
/* 
returns array( 
0=> array('firstName' => 'John', 'lastName' => 'Smith') 
1=> array('firstName' => 'Mark', 'lastName' => 'Smith') 
) 
*/ 

//multiple query, multiple results 
$query = "SELECT * FROM names WHERE lastName=?"; 
$params = array(array("Smith"),array("Johnson")); 

mysqli_prepared_query($link,$query,"s",$params) 
/* 
returns array( 
0=> 
array( 
0=> array('firstName' => 'John', 'lastName' => 'Smith') 
1=> array('firstName' => 'Mark', 'lastName' => 'Smith') 
) 
1=> 
array( 
0=> array('firstName' => 'Jack', 'lastName' => 'Johnson') 
1=> array('firstName' => 'Bob', 'lastName' => 'Johnson') 
) 
) 
*/ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T12:02:08.323

I'm sorry, but no I think it's a terrible idea.

A good function/method should be short, to the point, and designed to do one thing and only one thing well. It should also try to avoid branching logic where possible (keep the number of if and switch statements to a minimum). Such functions are easy to understand as their inner workings can be grasped with relatively little effort.

The longer a function is, the harder it becomes to understand because the programmer has to hold more in their head regarding how it works. The more if/switch/try/catch/throw statements the function contains, the harder it becomes to understand because they modify how execution might flow through the function. You have to take into account something known as the npath complexity (a count of the possible ways a function can execute). Every if you add will double the npath complexity. Based purely on counting ifs I got a complexity of 64, which is far too high! Loops can increase npath complexity as well, so the actual complexity metric for your function is probably a lot higher than that.

Changing a function like the one you've given becomes far more work than it would be if it was a collection of smaller simple functions, because it's very difficult to make a particular change to achieve the intended new behaviour without having unwanted knock-on effects. Of course you can use a unit test to make sure that this doesn't happen, but with a high npath complexity, the number of tests you'll have to write to make sure the functionality of your function is fully covered is inordinately large.

Good general rules of thumb:

*   If a function's body can't fit on your screen, then it probably can't fit in your head either. Avoid functions that are longer than your editor window. You should never have to scroll to see the entirety of a function.
*   You get 2 ifs per function. More than that and the npath complexity can start to become unmanageable.
*   A function should do one thing well. A function that tries to be a jack of all trades will probably fail to be correct in every case. Additionally, the more responsibility a function tries to take on the more difficult it becomes for the function to meet all the responsibilities it has.
*   Small functions are reusable, big ones aren't.
*   In the name of everything that's holy, comment your code! It's almost impossible for someone else to look at your function and figure out what it's meant to do. Breaking it down and following the earlier guidelines would help considerably, but even then computer code isn't as good as expressing ideas to other human beings than plain English is. Comments clarify points that might not be clear at a casual glance and can help another programmer figure out what was in your head when you were designing and implementing the code. They cost nothing in terms of execution time so there really is no excuse not to comment. If you leave this code alone and come back to look at it again in a year's time, I can guarantee that you'll never figure out what you were thinking at the time you wrote it.

A much better solution would be to implement a class that provides the services you need as a series of methods.

An even better solution would be to check how much of this PHP can do through its built in functionality for you. As I can't really understand your function I couldn't say for sure whether PHP can already do what you need this function to do, but my suspicion is that a good chunk of it is already implemented in PHP.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T11:52:27.203

为什么要重新发明轮子？MySQLi 已经有一个类可以使用。

[http://us2.php.net/manual/en/class.mysqli.php](http://us2.php.net/manual/en/class.mysqli.php)

从此链接开始并开始正确使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:50:10.437

一刀切不可避免地意味着会有一些（可能很多）代码只针对一种特定情况，并不适用于每个操作。函数中将有一些代码会妨碍您。可能还会有很多代码没有考虑到的边缘情况，当你发现它们时，它会让你在调试代码时感到头疼。

对此的简单回答是“不要使用它”。它的效率会降低，并且可能会使您的代码对其他开发人员感到困惑。

学习正确使用 MySQLi。这并不难，从长远来看，它会给你带来很大的优势。

# jquery - 解析 json 输出并插入到容器中

> ID：10635161
> 
> 赞同：0
> 
> 时间：2012-05-17T11:47:14.230
> 
> 标签：jquery

我在这个结构中有一些 json：

```
{"data":{"1":"file1.gif","2":"file2.jpg"}} // ... etc 
```

我正在尝试将其输出到容器 div 中，如此处[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)所示：

```
 var fileUrl = 'some/path/to/files.php';

  $('a.file').click(function () {
    $.getJSON(fileUrl, function (data) {
      var items = [];

      $.each(data, function (key, val) {
        items.push('<li id="' + key + '">' + val + '</li>');
      });

      $('<ul/>', {
        'class': 'my-new-list',
        html: items.join('')
      }).appendTo('#files');
    });

    return false;
  }); 
```

HTML：

```
<a href="#" class="file">Display some files</a>
<div id="files"></div> 
```

我想我不知道如何进行正确的数据提取。非常感谢任何提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:52:02.883

改为这样做：

```
$.each(data['data'], function(key, val) {
    alert(key + " " + val);
    items.push('<li id="' + key + '">' + val + '</li>');
}); 
```

这会遍历`data`JSON 中的对象

[这里的工作示例](http://jsfiddle.net/sREan/)

# ruby-on-rails - 遏制 gem 未安装在 linux redhat 中

> ID：10635166
> 
> 赞同：7
> 
> 时间：2012-05-17T11:47:36.040
> 
> 标签：ruby-on-rails, ruby

我正在使用 ruby​​-1.9.2-p290 并安装了 curl、curl-devel、libcurl 和 libcurl-devel，但没有安装遏制 gem，我收到以下错误：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
        /home/jophine/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb 
checking for curl-config... yes
checking for curlinfo_redirect_time... no
checking for curlinfo_response_code... no
checking for curlinfo_filetime... no
checking for curlinfo_redirect_count... no
checking for curlinfo_os_errno... no
checking for curlinfo_num_connects... no
checking for curlinfo_ftp_entry_path... no
checking for curl_version_ssl... no
checking for curl_version_libz... no
checking for curl_version_ntlm... no
checking for curl_version_gssnegotiate... no
checking for curl_version_debug... no
checking for curl_version_asynchdns... no
checking for curl_version_spnego... no
checking for curl_version_largefile... no
checking for curl_version_idn... no
checking for curl_version_sspi... no
checking for curl_version_conv... no
checking for curlproxy_http... no
checking for curlproxy_socks4... no
checking for curlproxy_socks5... no
checking for curlauth_basic... no
checking for curlauth_digest... no
checking for curlauth_gssnegotiate... no
checking for curlauth_ntlm... no
checking for curlauth_anysafe... no
checking for curlauth_any... no
checking for curle_tftp_notfound... no
checking for curle_tftp_perm... no
checking for curle_tftp_diskfull... no
checking for curle_tftp_illegal... no
checking for curle_tftp_unknownid... no
checking for curle_tftp_exists... no
checking for curle_tftp_nosuchuser... no
checking for curle_send_fail_rewind... no
checking for curle_ssl_engine_initfailed... no
checking for curle_login_denied... no
checking for curlmopt_maxconnects... no
checking for curlopt_seekfunction... no
checking for curlopt_seekdata... no
checking for curlopt_sockoptfunction... no
checking for curlopt_sockoptdata... no
checking for curlopt_opensocketfunction... no
checking for curlopt_opensocketdata... no
checking for curle_conv_failed... no
checking for curle_conv_reqd... no
checking for curle_ssl_cacert_badfile... no
checking for curle_remote_file_not_found... no
checking for curle_ssh... no
checking for curle_ssl_shutdown_failed... no
checking for curle_again... no
checking for curle_ssl_crl_badfile... no
checking for curle_ssl_issuer_error... no
checking for curlopt_username... no
checking for curlopt_password... no
checking for curlinfo_primary_ip... no
checking for curlauth_digest_ie... no
checking for curlftpmethod_multicwd... no
checking for curlftpmethod_nocwd... no
checking for curlftpmethod_singlecwd... no
checking for curlm_bad_socket... no
checking for curlm_unknown_option... no
checking for curl_multi_timeout()... yes
checking for curl_multi_fdset()... yes
checking for curl_multi_perform()... yes
checking for curlopt_interleavefunction... no
checking for curlopt_interleavedata... no
checking for curlopt_chunk_bgn_function... no
checking for curlopt_chunk_end_function... no
checking for curlopt_chunk_data... no
checking for curlopt_fnmatch_function... no
checking for curlopt_fnmatch_data... no
checking for curlopt_errorbuffer... no
checking for curlopt_stderr... no
checking for curlopt_failonerror... no
checking for curlopt_url... no
checking for curlopt_protocols... no
checking for curlopt_redir_protocols... no
checking for curlopt_proxy... no
checking for curlopt_proxyport... no
checking for curlopt_proxytype... no
checking for curlopt_noproxy... no
checking for curlopt_httpproxytunnel... no
checking for curlopt_socks5_gssapi_service... no
checking for curlopt_socks5_gssapi_nec... no
checking for curlopt_interface... no
checking for curlopt_localport... no
checking for curlopt_dns_cache_timeout... no
checking for curlopt_dns_use_global_cache... no
checking for curlopt_buffersize... no
checking for curlopt_port... no
checking for curlopt_tcp_nodelay... no
checking for curlopt_address_scope... no
checking for curlopt_netrc... no
checking for curl_netrc_optional... no
checking for curl_netrc_ignored... no
checking for curl_netrc_required... no
checking for curlopt_netrc_file... no
checking for curlopt_userpwd... no
checking for curlopt_proxyuserpwd... no
checking for curlopt_username... no
checking for curlopt_password... no
checking for curlopt_password... no
checking for curlopt_password... no
checking for curlopt_httpauth... no
checking for curlauth_digest_ie... no
checking for curlauth_only... no
checking for curlopt_tlsauth_type... no
checking for curlopt_tlsauth_srp... no
checking for curlopt_tlsauth_username... no
checking for curlopt_tlsauth_password... no
checking for curlopt_proxyauth... no
checking for curlopt_autoreferer... no
checking for curlopt_encoding... no
checking for curlopt_followlocation... no
checking for curlopt_unrestricted_auth... no
checking for curlopt_maxredirs... no
checking for curlopt_postredir... no
checking for curlopt_put... no
checking for curlopt_post... no
checking for curlopt_postfields... no
checking for curlopt_postfieldsize... no
checking for curlopt_postfieldsize_large... no
checking for curlopt_copypostfields... no
checking for curlopt_httppost... no
checking for curlopt_referer... no
checking for curlopt_useragent... no
checking for curlopt_httpheader... no
checking for curlopt_http200aliases... no
checking for curlopt_cookie... no
checking for curlopt_cookiefile... no
checking for curlopt_cookiejar... no
checking for curlopt_cookiesession... no
checking for curlopt_cookielist... no
checking for curlopt_httpget... no
checking for curlopt_http_version... no
checking for curl_http_version_none... no
checking for curl_http_version_1_0... no
checking for curl_http_version_1_1... no
checking for curlopt_ignore_content_length... no
checking for curlopt_http_content_decoding... no
checking for curlopt_http_transfer_decoding... no
checking for curlopt_mail_from... no
checking for curlopt_mail_rcpt... no
checking for curlopt_tftp_blksize... no
checking for curlopt_ftpport... no
checking for curlopt_quote... no
checking for curlopt_postquote... no
checking for curlopt_prequote... no
checking for curlopt_dirlistonly... no
checking for curlopt_append... no
checking for curlopt_ftp_use_eprt... no
checking for curlopt_ftp_use_epsv... no
checking for curlopt_ftp_use_pret... no
checking for curlopt_ftp_create_missing_dirs... no
checking for curlopt_ftp_response_timeout... no
checking for curlopt_ftp_alternative_to_user... no
checking for curlopt_ftp_skip_pasv_ip... no
checking for curlopt_ftpsslauth... no
checking for curlftpauth_default... no
checking for curlftpauth_ssl... no
checking for curlftpauth_tls... no
checking for curlopt_ftp_ssl_ccc... no
checking for curlftpssl_ccc_none... no
checking for curlftpssl_ccc_passive... no
checking for curlftpssl_ccc_active... no
checking for curlopt_ftp_account... no
checking for curlopt_ftp_filemethod... no
checking for curlftpmethod_multicwd... no
checking for curlftpmethod_nocwd... no
checking for curlftpmethod_singlecwd... no
checking for curlopt_rtsp_request... no
checking for curl_rtspreq_options... no
checking for curl_rtspreq_describe... no
checking for curl_rtspreq_announce... no
checking for curl_rtspreq_setup... no
checking for curl_rtspreq_play... no
checking for curl_rtspreq_pause... no
checking for curl_rtspreq_teardown... no
checking for curl_rtspreq_get_parameter... no
checking for curl_rtspreq_set_parameter... no
checking for curl_rtspreq_record... no
checking for curl_rtspreq_receive... no
checking for curlopt_rtsp_session_id... no
checking for curlopt_rtsp_stream_uri... no
checking for curlopt_rtsp_transport... no
checking for curlopt_rtsp_header... no
checking for curlopt_rtsp_client_cseq... no
checking for curlopt_rtsp_server_cseq... no
checking for curlopt_transfertext... no
checking for curlopt_proxy_transfer_mode... no
checking for curlopt_crlf... no
checking for curlopt_range... no
checking for curlopt_resume_from... no
checking for curlopt_resume_from_large... no
checking for curlopt_customrequest... no
checking for curlopt_filetime... no
checking for curlopt_nobody... no
checking for curlopt_infilesize... no
checking for curlopt_infilesize_large... no
checking for curlopt_upload... no
checking for curlopt_maxfilesize... no
checking for curlopt_maxfilesize_large... no
checking for curlopt_timecondition... no
checking for curlopt_timevalue... no
checking for curlopt_timeout... no
checking for curlopt_timeout_ms... no
checking for curlopt_low_speed_limit... no
checking for curlopt_low_speed_time... no
checking for curlopt_max_send_speed_large... no
checking for curlopt_max_recv_speed_large... no
checking for curlopt_maxconnects... no
checking for curlopt_closepolicy... no
checking for curlopt_fresh_connect... no
checking for curlopt_forbid_reuse... no
checking for curlopt_connecttimeout... no
checking for curlopt_connecttimeout_ms... no
checking for curlopt_ipresolve... no
checking for curl_ipresolve_whatever... no
checking for curl_ipresolve_v4... no
checking for curl_ipresolve_v6... no
checking for curlopt_connect_only... no
checking for curlopt_use_ssl... no
checking for curlusessl_none... no
checking for curlusessl_try... no
checking for curlusessl_control... no
checking for curlusessl_all... no
checking for curlopt_resolve... no
checking for curlopt_sslcert... no
checking for curlopt_sslcerttype... no
checking for curlopt_sslkey... no
checking for curlopt_sslkeytype... no
checking for curlopt_keypasswd... no
checking for curlopt_sslengine... no
checking for curlopt_sslengine_default... no
checking for curlopt_sslversion... no
checking for curl_sslversion_default... no
checking for CURL_SSLVERSION_TLSv1... no
checking for CURL_SSLVERSION_SSLv2... no
checking for CURL_SSLVERSION_SSLv3... no
checking for curlopt_ssl_verifypeer... no
checking for curlopt_cainfo... no
checking for curlopt_issuercert... no
checking for curlopt_capath... no
checking for curlopt_crlfile... no
checking for curlopt_ssl_verifyhost... no
checking for curlopt_certinfo... no
checking for curlopt_random_file... no
checking for curlopt_egdsocket... no
checking for curlopt_ssl_cipher_list... no
checking for curlopt_ssl_sessionid_cache... no
checking for curlopt_krblevel... no
checking for curlopt_ssh_auth_types... no
checking for curlopt_ssh_host_public_key_md5... no
checking for curlopt_ssh_public_keyfile... no
checking for curlopt_ssh_private_keyfile... no
checking for curlopt_ssh_knownhosts... no
checking for curlopt_ssh_keyfunction... no
checking for curlkhstat_fine_add_to_file... no
checking for curlkhstat_fine... no
checking for curlkhstat_reject... no
checking for curlkhstat_defer... no
checking for curlopt_ssh_keydata... no
checking for curlopt_private... no
checking for curlopt_share... no
checking for curlopt_new_file_perms... no
checking for curlopt_new_directory_perms... no
checking for curlopt_telnetoptions... no
checking for curle_not_built_in... no
checking for curle_obsolete... no
checking for Ruby 1.9 Hash... yes
checking for Ruby 1.9 st.h... yes
checking for curl_easy_escape... no
checking for rb_thread_blocking_region()... yes
creating curb_config.h
creating Makefile
make
gcc -I. -I/home/jophine/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/x86_64-linux -I/home/jophine/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1/ruby/backward -I/home/jophine/.rvm/rubies/ruby-1.9.2-p290/include/ruby-1.9.1 -I. -DRUBY_EXTCONF_H=\"curb_config.h\" -I/home/jophine/.rvm/usr/include    -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long  -fPIC  -g -Wall  -o curb_easy.o -c curb_easy.c
In file included from /usr/include/curl/curl.h:35,
                 from curb.h:12,
                 from curb_easy.h:10,
                 from curb_easy.c:7:
/usr/include/curl/curlbuild.h:6:26: error: curlbuild-64.h: No such file or directory
In file included from /usr/include/curl/curl.h:36,
                 from curb.h:12,
                 from curb_easy.h:10,
                 from curb_easy.c:7:
/usr/include/curl/curlrules.h:80:4: error: #error "CURL_SIZEOF_LONG definition is missing!"
In file included from /usr/include/curl/curl.h:36,
                 from curb.h:12,
                 from curb_easy.h:10,
                 from curb_easy.c:7:
/usr/include/curl/curlrules.h:81: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘Compilation_aborted_CURL_SIZEOF_LONG_is_missing’
/usr/include/curl/curlrules.h:85:4: error: #error "CURL_TYPEOF_CURL_SOCKLEN_T definition is missing!"
/usr/include/curl/curlrules.h:90:4: error: #error "CURL_SIZEOF_CURL_SOCKLEN_T definition is missing!"
/usr/include/curl/curlrules.h:95:4: error: #error "CURL_TYPEOF_CURL_OFF_T definition is missing!"
/usr/include/curl/curlrules.h:100:4: error: #error "CURL_FORMAT_CURL_OFF_T definition is missing!"
/usr/include/curl/curlrules.h:105:4: error: #error "CURL_FORMAT_CURL_OFF_TU definition is missing!"
/usr/include/curl/curlrules.h:110:4: error: #error "CURL_FORMAT_OFF_T definition is missing!"
/usr/include/curl/curlrules.h:115:4: error: #error "CURL_SIZEOF_CURL_OFF_T definition is missing!"
/usr/include/curl/curlrules.h:120:4: error: #error "CURL_SUFFIX_CURL_OFF_T definition is missing!"
/usr/include/curl/curlrules.h:125:4: error: #error "CURL_SUFFIX_CURL_OFF_TU definition is missing!"
/usr/include/curl/curlrules.h:154: error: ‘curl_off_t’ undeclared here (not in a function)
/usr/include/curl/curlrules.h:154: error: ‘CURL_SIZEOF_CURL_OFF_T’ undeclared here (not in a function)
/usr/include/curl/curlrules.h:174: error: ‘curl_socklen_t’ undeclared here (not in a function)
/usr/include/curl/curlrules.h:174: error: ‘CURL_SIZEOF_CURL_SOCKLEN_T’ undeclared here (not in a function)
In file included from curb.h:12,
                 from curb_easy.h:10,
                 from curb_easy.c:7:
/usr/include/curl/curl.h:206: error: expected declaration specifiers or ‘...’ before ‘curl_off_t’
curb_easy.c: In function ‘callback_exception’:
curb_easy.c:31: warning: unused parameter ‘unused’
curb_easy.c: In function ‘proc_debug_handler’:
curb_easy.c:160: warning: unused variable ‘procret’
curb_easy.c:155: warning: unused parameter ‘curl’
curb_easy.c: In function ‘ruby_curl_easy_timeout_get’:
curb_easy.c:1054: warning: unused parameter ‘timeout’
curb_easy.c: In function ‘ruby_curl_easy_connect_timeout_get’:
curb_easy.c:1080: warning: unused parameter ‘connect_timeout’
curb_easy.c: In function ‘ruby_curl_easy_dns_cache_timeout_get’:
curb_easy.c:1103: warning: unused parameter ‘dns_cache_timeout’
curb_easy.c: In function ‘ruby_curl_easy_ftp_response_timeout_get’:
curb_easy.c:1130: warning: unused parameter ‘ftp_response_timeout’
curb_easy.c: In function ‘ruby_curl_easy_low_speed_limit_get’:
curb_easy.c:1153: warning: unused parameter ‘low_speed_limit’
curb_easy.c: In function ‘ruby_curl_easy_low_speed_time_get’:
curb_easy.c:1175: warning: unused parameter ‘low_speed_time’
curb_easy.c: In function ‘ruby_curl_easy_username_set’:
curb_easy.c:1185: warning: unused parameter ‘self’
curb_easy.c:1185: warning: unused parameter ‘username’
curb_easy.c: In function ‘ruby_curl_easy_username_get’:
curb_easy.c:1199: warning: unused parameter ‘self’
curb_easy.c:1199: warning: unused parameter ‘username’
curb_easy.c: In function ‘ruby_curl_easy_password_set’:
curb_easy.c:1213: warning: unused parameter ‘self’
curb_easy.c:1213: warning: unused parameter ‘password’
curb_easy.c: In function ‘ruby_curl_easy_password_get’:
curb_easy.c:1227: warning: unused parameter ‘self’
curb_easy.c:1227: warning: unused parameter ‘password’
curb_easy.c: In function ‘ruby_curl_easy_ssl_version_get’:
curb_easy.c:1253: warning: unused parameter ‘ssl_version’
curb_easy.c: In function ‘ruby_curl_easy_use_ssl_get’:
curb_easy.c:1274: warning: unused parameter ‘use_ssl’
curb_easy.c: In function ‘ruby_curl_easy_ftp_filemethod_get’:
curb_easy.c:1295: warning: unused parameter ‘ftp_filemethod’
curb_easy.c: In function ‘ruby_curl_easy_cleanup’:
curb_easy.c:2146: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_file_time_get’:
curb_easy.c:2530: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_redirect_time_get’:
curb_easy.c:2644: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_redirect_count_get’:
curb_easy.c:2667: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_os_errno_get’:
curb_easy.c:2895: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_num_connects_get’:
curb_easy.c:2924: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_ftp_entry_path_get’:
curb_easy.c:2965: warning: unused parameter ‘self’
curb_easy.c: In function ‘ruby_curl_easy_get_opt’:
curb_easy.c:3093: warning: unused parameter ‘self’
curb_easy.c:3093: warning: unused parameter ‘opt’
curb_easy.c: In function ‘ruby_curl_easy_error_message’:
curb_easy.c:3191: warning: unused parameter ‘klass’
make: *** [curb_easy.o] Error 1
Gem files will remain installed in /home/jophine/.rvm/gems/ruby-1.9.2-p290@rails/gems/curb-0.7.18 for inspection.
Results logged to /home/jophine/.rvm/gems/ruby-1.9.2-p290@rails/gems/curb-0.7.18/ext/gem_make.out
An error occured while installing curb (0.7.18), and Bundler cannot continue.
Make sure that `gem install curb -v '0.7.18'` succeeds before bundling. 
```

我不知道这个错误。任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T20:05:46.257

这是我必须安装才能使其工作的特定库。

```
libcurl4-openssl-dev 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T20:14:28.357

```
sudo apt-get install libcurl3 libcurl3-gnutls libcurl4-openssl-dev 
```

接着

```
sudo gem install curb 
```

# dotnetnuke - 如何将密码从dnn4转换为dnn6

> ID：10635169
> 
> 赞同：0
> 
> 时间：2012-05-17T11:47:50.067
> 
> 标签：dotnetnuke, dotnetnuke-module, dotnetnuke-5, dotnetnuke-imc

我需要将所有用户从 dnn 4 站点导入到 dnn 5 站点。我已经导入了所有表。但是在成员表中，dnn4 和 dnn5 的密码加密是不同的。我在两个站点中注册了相同的用户。并且版本 4 和 5 中的密码和密码盐不同。所以在将用户从 dnn 4 导入到 5 时，我无法登录到新站点。

如何解密旧密码并为新密码加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:26:15.837

检查 web.config 中的机器键值并匹配它们可能会解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T04:32:26.840

在 4 到 6 之间（实际上在任何安装之间），最好的事情之一是拥有一个用户管理器工具，该工具允许您使用密码导出用户并将其导入另一个门户或安装。

作为备选 -

1.  复制 dnn 4 站点
2.  将 dnn 4 站点升级到 dnn 6（或您喜欢的任何版本）
3.  现在将机器密钥等复制到其他站点并复制用户

类似替代方案的东西不是很干净并且容易出现问题（特别是如果门户网站已经有用户 - 比如主机）

# java - Java：在迭代器类型（接口/实现类）之间转换？

> ID：10635171
> 
> 赞同：2
> 
> 时间：2012-05-17T11:47:55.053
> 
> 标签：java, interface, iterator, type-conversion

在课堂上，我有一个容器：

```
public class MyClass implements MyClassInterface {
  private LinkedList<OtherClass> list; //Need to use 'OtherClass' instead of 'OtherClassInterface here
  @Override
  public Iterator iterator() {
    return list.iterator; //Problem!
  }
} 
```

界面：

```
public interface MyClassInterface {
  //Is
  public Iterator iterator();
  //Should be
  public Iterator<OtherClassInterface>();
} 
```

话又说回来，`OtherClass`也有一个界面`OtherClassInterface`。我只希望使用代码的人使用接口。问题是我想使用完整的`OtherClass`内部`MyClass`但将迭代器传递`LinkedList<OtherClassInterface>`给`MyClassInterface.iterator()`.

我无法将现有内容`LinkedList<OtherClass>`转换为`LinkedList<OtherClassInterface>`内部`MyClass`以返回所需的迭代器。

如何处理这样的情况？

# 编辑

## 我想要这种行为的原因

对于另一位开发人员，我想提供两个接口：第一个让他可以访问更高的数据结构，其中包含他应该通过第二个接口访问的更低的数据结构。在上层接口的实现类中，我直接使用下层数据结构的类型，而不是通过下层接口。

如前所述，其他开发人员希望同时使用这两个接口。在较高的接口上，我想提供一个迭代器，它可以访问较低接口的元素，但不能访问实现该接口的类。

## 额外需求

我还希望返回的迭代器是“Iterable”，即我可以使用“for each”构造。*waxwing*s 解决方案也可以做到这一点吗？如果可能的话，我不想实现一个自己的迭代器——对我来说这似乎没有必要，因为我只想给接口的元素而不是实现类提供一个迭代器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:53:25.127

您可以编写自己的`Iterator`实现，在从返回时在接口和具体实现之间进行转换`next()`

转换`List<OtherClass>`为的问题`List<OtherClassInterface>`是没有办法阻止转换结果的用户将`OtherClass`对象以外的东西放入列表中（当然这些元素也必须实现`OtherClassInterface`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T11:53:55.520

你可以这样定义接口吗？

```
public interface MyClassInterface {
    public Iterator<? extends OtherClassInterface>();
} 
```

`list.iterator()`应该是该方法的有效返回值，即使 list 是`List<OtherClass>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:08:31.750

能不能换个界面？

```
public interface MyClassInterface<T> {
    public Iterator<T> iterator();
} 
```

您始终可以实现自己的迭代器：

```
public class MyClass implements MyClassInterface<T> {
  private LinkedList<T> list;

  @Override
  public Iterator iterator() {
   return new Iterator<T>() {
            int index;

            public boolean hasNext() {
                return index < list.size();
            }

            public T next() {
                return list.get(index++);
            }

            public void remove() {

            }
        };
  }
} 
```

没有测试代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T11:31:37.523

接口可以这样定义：

```
public interface MyClassInterface {
    public LinkedList<? extends OtherClassInterface> list();
} 
```

那么实现应该是这样的：

```
@Override
public LinkedList<OtherClass> list() {
    return list; //this is the container of type LinkedList<OtherClass>
} 
```

这具有以下优点：

*   当`list()`被一个`OtherClass`对象调用时，你会得到一个`LinkedList<OtherClass>`
*   当`list()`被一个`OtherClassInterface`对象调用时，你会得到一个`LinkedList<OtherClassInterface>`
*   each 的返回值可以在 for-each 循环中使用
*   迭代器可以通过`list().iterator()`

# java - 缓冲区溢出 Xuggler

> ID：10635179
> 
> 赞同：0
> 
> 时间：2012-05-17T11:48:40.203
> 
> 标签：java, webcam, xuggler

为了从网络摄像头捕获视频，我使用了[DisplayWebcamVideo.java中的示例代码](https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DisplayWebcamVideo.java)

我使用参数运行代码`vfwcap`，`0`它总是显示错误：

```
ERROR org.ffmpeg - [vfwcap @ 000000000039A320] real-time buffer [number]% full!frame dropped! 
```

请告诉我如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:07:07.733

你读过自述文件吗？[自述文件](https://github.com/xuggle/xuggle-xuggler/blob/master/README)

你下载了它要求的DLL吗？你看过之前的评论吗

```
public class DisplayWebcamVideo 
```

你有正确的司机姓名吗？和设备名称？

# objective-c - Objective-C 阻止使用

> ID：10635181
> 
> 赞同：1
> 
> 时间：2012-05-17T11:48:45.993
> 
> 标签：objective-c, objective-c-blocks

我一直在网上四处寻找，研究如何使用积木。我还决定建立一个基本示例来尝试了解它们的工作方式。

基本上我想要做的是有一个“块变量”（不确定这是否是正确的术语），我可以在其中存储一个代码块。然后，我希望能够在我的代码中的 pointX (`methodA`或`methodB`) 处设置此块中的代码，然后在 pointY ( `methodX`) 处运行代码块。

所以具体来说，我的问题是 3-fold

1.  使用下面的示例，块的设置/使用是否正确且有效？
2.  在`methodX`如何执行块（`self.completionBlock`）内的代码？
3.  在创建块时`methodA`，`methodB`代码会在那里被调用吗？如果是这样，我怎样才能阻止这种情况发生（我要做的就是在块中设置代码以便稍后调用）？

我可能完全误解了块的使用方式，如果是这种情况，我很抱歉，但是我对 Objective-C 比较陌生，我正在努力学习。

到目前为止，这是我的代码：

**。H**

```
typedef void (^ CompletionBlock)();

@interface TestClass : NSObject
{   
    CompletionBlock completionBlock;

    NSString *stringOfText;
    NSString *otherStringOfText;
}

@property(nonatomic, copy)CompletionBlock completionBlock;

@property(nonatomic, retain)NSString *stringOfText;
@property(nonatomic, retain)NSString *otherStringOfText;

- (void)methodA:(NSString *)myText;
- (void)methodB:(NSString *)myText and:(NSString *)myOtherText;
- (void)methodX;

@end 
```

**.m**

```
- (void)methodA:(NSString *)myText;
{
    if ([self.stringOfText isEqualToString:@""])
    {
        // Set the variable to be used by the completion block
        self.stringOfText = @"I visited methodA"; // normally make use of myText

        // Create the completion block
        __block TestClass *blocksafeSelf = self;
        self.completionBlock = ^()
        {
            [blocksafeSelf methodA:blocksafeSelf.stringOfText];
            blocksafeSelf.stringOfText = nil;
        };
    }
    else
    {
        // Do some other stuff with self.stringOfText
    }
}

- (void)methodB:(NSString *)myText and:(NSString *)myOtherText;
{
    if ([self.stringOfText isEqualToString:@""] || [self.otherStringOfText isEqualToString:@""])
    {
        // Set the variable to be used by the completion block
        self.stringOfText = @"I visited methodB"; // normally make use of myText
        self.otherStringOfText = @"I also visited methodB"; // normally make use of myOtherText

        // Create the completion block
        __block TestClass *blocksafeSelf = self;
        self.completionBlock = ^()
        {
            [blocksafeSelf methodB:blocksafeSelf.stringOfText and:blocksafeSelf.otherStringOfText];
            blocksafeSelf.stringOfText = nil;
            blocksafeSelf.otherStringOfText = nil;
        };
    }
    else
    {
        // Do some other stuff with self.stringOfText and self.otherStringOfText
    }
}

- (void)methodX
{
    // At this point run the block of code in self.completionBlock...how?!
} 
```

在我的示例中，要么`methodA`或`methodB`将首先被调用。然后一段时间后（可能来自不同的类）`methodX`将被调用（仅在之后`methodA`或`methodB`已经被调用）。

值得注意的是，方法`methodA`和`methodB`都`methodX`在一个单例类中。

**注意：**这只是一个尝试理解块工作的虚拟示例，我完全知道还有其他方法可以达到相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:28:16.833

这是代码，只是为了清楚起见：

```
- (void)methodX
{
    if(self.completionBlock)
        self.completionBlock();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:04:43.847

我想你想`self.completionBlock();`在`methodX`.

# asp.net - 如何读取asp.net服务器控件标签之间的内容

> ID：10635184
> 
> 赞同：1
> 
> 时间：2012-05-17T11:48:54.053
> 
> 标签：asp.net, custom-server-controls, servercontrols

我正在编写一个 asp.net 服务器端控件，其中传递了一些简短的参数，但还需要允许提供大量自定义 HTML 代码。

我认为最简单的方法是允许在服务器控件的标签之间指定，如下所示：

```
<MyControl:Example Runat="server" Id="myControl" Message="This is a message">
  <p>This is a long piece of HTML a few dozen lines long...</p>
</MyControl> 
```

**如何从自定义服务器控件内部访问标签之间的文本？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:52:55.540

您需要创建一个模板化控件：

```
<MyControl:Example Runat="server" Id="myControl" Message="This is a message"> 
  <HtmlContent><p>This is a long piece of HTML a few dozen lines long...</p></HtmlContent>
</MyControl> 
```

`HtmlContent`你的模板在哪里。通常当我需要模板时，我只是使用 PlaceHolder 代替。

```
public class MyControl : CompositeControl 
{ 
    [TemplateContainer(typeof(PlaceHolder))] 
    [PersistenceMode(PersistenceMode.InnerProperty)] 
    public PlaceHolder HtmlContent { get; set; } 

    ... render stuff

} 
```

[这](http://msdn.microsoft.com/en-us/library/36574bf6.aspx)是 MSDN 上的一个示例：

# matlab - GUI运行时如何在Matlab中截取击键

> ID：10635188
> 
> 赞同：4
> 
> 时间：2012-05-17T11:49:14.730
> 
> 标签：matlab, user-interface, keyboard, interception

您知道如何在 Matlab gui 运行时将键盘击读读入 Matlab 吗？（即，不使用向命令窗口发送提示并需要您按回车键的“输入”功能）。

如果可能，我们希望避免使用 mex 函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T07:23:04.460

您首先必须通过句柄声明您的身材：

```
fig = figure; 
```

然后您可以设置属性（在下面的引号中）以激活您为响应用户交互而编写的函数（使用 @ 符号）：

```
set(fig,'KeyPressFcn',@keyDownListener)
set(fig, 'KeyReleaseFcn', @keyUpListener);
set(fig,'WindowButtonDownFcn', @mouseDownListener);
set(fig,'WindowButtonUpFcn', @mouseUpListener);
set(fig,'WindowButtonMotionFcn', @mouseMoveListener); 
```

上面的例子来自shooter03.ma MATLAB space shooter，一个优秀的源码（来自matlab文件交换），用于MATLAB中用户对象交互的许多方面：

[http://www.mathworks.com/matlabcentral/fileexchange/31330-daves-matlab-shooter/content/shooter03/shooter03.m](http://www.mathworks.com/matlabcentral/fileexchange/31330-daves-matlab-shooter/content/shooter03/shooter03.m)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T12:05:02.877

如果您的 GUI 基于图形，您可以使用图形属性`keypressfcn`定义处理键盘输入的回调函数。有关更多说明，请参见 matlab 帮助：http: [//www.mathworks.de/help/techdoc/ref/figure_props.html#KeyPressFcn](http://www.mathworks.de/help/techdoc/ref/figure_props.html#KeyPressFcn)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-27T20:23:02.297

尝试：

```
hf = figure;
get(hf,'CurrentCharacter') 
```

# string - 如何在 VBA 中为 Shell 函数创建三重嵌套命令行字符串？

> ID：10635189
> 
> 赞同：1
> 
> 时间：2012-05-17T11:49:17.673
> 
> 标签：string, shell, vba, excel, cmd

我需要在 Excel 中创建一个 VBA 宏。

任务是，当单击按钮时，将在 cmd 中执行命令。

要执行的命令是`rfrompcb`，它将文件的路径作为参数，因此第一级字符串将路径包装起来，因为它包含空格。由于这个命令要在 cmd 中执行，所以有第二级字符串，它是 cmd 命令的参数，即`cmd /c "rfrompcb ""file_path"""`（我希望我做对了）。然后因为它是由 VBA 中的 Shell 调用的，所以有第三级字符串，它包装了 cmd 命令并用作 Shell 的参数。

**我的问题是**：应该有多少个双引号？我对最终的命令行字符串会是什么样子感到很困惑。谁能告诉我如何构造这样的字符串？还是有另一种涉及较少字符串嵌套的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:04:44.507

您只需要引用`file_path`，例如：

```
shell environ$("COMSPEC") & " /c dir ""c:\program files\"" /b" 
```

* * *

`environ$("COMSPEC")`只返回`cmd.exe`.

如果您希望运行的可执行路径不需要被引用，那么向它传递一个确实需要被引用的参数：

```
Shell Environ$("COMSPEC") & " /c rfrompcb ""file path""" 
```

如果确实需要引用 exe 路径，则需要将其全部用另一对引号括起来，如下所示：

```
cmd.exe /c ""c:\path to\rfrompcb" "file path"" 
```

可以这样做：

```
Shell Environ$("COMSPEC") & " /c """"c:\path to\rfrompcb"" ""file path""""" 
```

# mysql - 将数据从一个列移动到另一个表MYSQL中的另一个类似列

> ID：10635192
> 
> 赞同：5
> 
> 时间：2012-05-17T11:49:19.013
> 
> 标签：mysql

我目前正在使用 Mysql 数据库开发基于 Web 的系统。

我意识到我最初错误地设置了表格中的列，并且

我现在需要将表 (clients) 中的一个表列 (receiptno) 中的数据移动到表 (revenue) 中类似的表列 (receiptno) 中。

我对 Mysql 仍然很缺乏经验，因此我不知道完成此操作的 mysql 语法。

我能得到一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T11:52:21.933

如果您只是想将数据插入到`revenue`表中的新记录中：

```
INSERT INTO revenue (receiptno) SELECT receiptno FROM clients; 
```

但是，如果要使用`revenue`表中的关联数据更新表中的现有记录，则`clients`必须连接表并执行`UPDATE`：

```
UPDATE revenue JOIN clients ON **join_condition_here**
SET    revenue.receiptno = clients.receiptno; 
```

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T13:27:53.870

相同的气味，不同的气味与 Eggyal 的答案，这适用于 Oracle 和 Postgress，因此您的里程可能会有所不同。

```
UPDATE revenue t1 SET receiptno = (
  SELECT receiptno FROM clients t2 WHERE t2.client_id = t1.revenue_id
); 
```

您将不得不调整 where 子句以满足您的需求......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T11:55:48.410

```
INSERT INTO newtable (field1, field2, field3)
SELECT filed1, field2, field3
FROM oldtable 
```

# python - 无法使用 python ImageEnhance 模块保存图像

> ID：10635195
> 
> 赞同：0
> 
> 时间：2012-05-17T11:49:35.010
> 
> 标签：python, image, save, image-enhancement

我是一个新的 python 程序员，我正在尝试使用 ImageEnhance 模块来创建一组图像，这些图像会随着时间的推移增加清晰度。

下面的脚本解决了一个问题：新图像被保存到一个临时目录中，该目录可以快速删除文件。

如何更改保存功能以指向正确的目录。

提前致谢。

```
#import modules
import sys  
import os
import Image, ImageEnhance,

#find directory, load picture
os.chdir ("/Users/ericmaie/Desktop/test")
backup_directory = "/Users/harddrive/Desktop/test2"

counter = 1

while (counter < 5):

    ima = Image.open("1.png")
    enhancer = ImageEnhance.Sharpness(ima)
    factor = (counter + 10) / 4.0
    enhancer.enhance(factor).show("Sharpness %f" % factor)
    ima.save(str(counter) + '.jpg')

counter = counter + 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-31T21:41:08.587

您正在创建图像的增强版本：

```
enhancer.enhance(factor).show("Sharpness %f" % factor) 
```

...然后立即将其丢弃，因为它从未存储在变量中。自然它没有被拯救，因为你没有拯救它。

相反，将增强图像存储在其自己的变量中，例如：

```
enhanced = enhancer.enhance(factor)
enhanced.show()
enhanced.save(str(counter) + ".jpg") 
```

该`.show()`命令确实保存了图像，但只是偶然的，因为如果不这样做，它就无法将其交给查看器应用程序。正如您所发现的，此临时文件将尽快删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-31T20:53:41.513

您可以通过将“显示”替换为“保存”来保存修改后的图像。

```
path="C:\\Your\\targetFolder\\"
enhancer.enhance(factor).save(path, quality=100) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:14:31.893

你有没有尝试过这样的事情？

```
path="C:\\Somewhere\\myproperdirectory\\"
ima.save(path+str(counter) + '.jpg') 
```

# android - 如何在 monodroid 中获取 Camerapreview 数据

> ID：10635197
> 
> 赞同：2
> 
> 时间：2012-05-17T11:49:41.203
> 
> 标签：android, monodevelop, xamarin.android

任何人都可以在不单击camara click的情况下帮助我获取camerapreview帧数据。我想在不点击相机按钮的情况下获取正确的相机数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:25:41.680

我猜你是在 Camera 类中搜索这个函数，

```
 public final void setPreviewCallback (Camera.PreviewCallback cb) 
```

定义回调

> ```
> private PreviewCallback mPreviewCallback = new PreviewCallback() {
>       public void onPreviewFrame(byte[] data, Camera camera) {
>      }
> } 
> ```

开始预览后，每帧都会触发此回调，数据（byte[]）为预览格式，您可以在设置相机参数时找到

首先获取支持的预览格式列表

```
List<Integer> Camera.Parameters.getSupportedPreviewFormats() 
```

默认格式是`ImageFormat.NV21`

如果要更改预览格式，请使用此功能，从可用格式中选择一种格式

```
Camera.Parameters.setPreviewFormat(int pixel_format) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T17:55:52.647

看到您使用的是 MonoDevelop 而不是用 Java 编写，程序会有些不同。

您可以像这样创建相机预览处理程序类：

```
public class CameraListener : Java.Lang.Object, Camera.IPreviewCallback
{
    public event PreviewFrameHandler PreviewFrame;

    public void OnPreviewFrame(byte[] data, Camera camera)
    {
        if (PreviewFrame != null)
        {
            PreviewFrame(this, new PreviewFrameEventArgs(data, camera));
        }
    }
}

public delegate void PreviewFrameHandler(object sender, PreviewFrameEventArgs e);

public class PreviewFrameEventArgs : EventArgs
{
    readonly byte[] _data;
    readonly Camera _camera;

    public byte[] Data { get { return _data; } }

    public Camera Camera { get { return _camera; } }

    public PreviewFrameEventArgs(byte[] data, Camera camera)
    {
        _data = data;
        _camera = camera;
    }
} 
```

该类提供了为接收到的每个帧触发的事件。

在我自己的代码中，我使用 YUV420_NV21 格式

我使用以下方法解码数据：

```
 unsafe public static void convertYUV420_NV21toRGB565(byte* yuvIn, Int16* rgbOut, int width, int height, bool monochrome)
    {
        int size = width * height;
        int offset = size;
        int u, v, y1, y2, y3, y4;

        for (int i = 0, k = 0; i < size; i += 2, k += 2)
        {
            y1 = yuvIn[i];
            y2 = yuvIn[i + 1];
            y3 = yuvIn[width + i];
            y4 = yuvIn[width + i + 1];

            u = yuvIn[offset + k];
            v = yuvIn[offset + k + 1];
            u = u - 128;
            v = v - 128;

            if (monochrome)
            {
                convertYUVtoRGB565Monochrome(y1, u, v, rgbOut, i);
                convertYUVtoRGB565Monochrome(y2, u, v, rgbOut, (i + 1));
                convertYUVtoRGB565Monochrome(y3, u, v, rgbOut, (width + i));
                convertYUVtoRGB565Monochrome(y4, u, v, rgbOut, (width + i + 1));
            }
            else
            {
                convertYUVtoRGB565(y1, u, v, rgbOut, i);
                convertYUVtoRGB565(y2, u, v, rgbOut, (i + 1));
                convertYUVtoRGB565(y3, u, v, rgbOut, (width + i));
                convertYUVtoRGB565(y4, u, v, rgbOut, (width + i + 1));
            }

            if (i != 0 && (i + 2) % width == 0)
                i += width;
        }
    }

    unsafe private static void convertYUVtoRGB565Monochrome(int y, int u, int v, Int16* rgbOut, int index)
    {
        rgbOut[index] = (short)(((y & 0xf8) << 8) |
                      ((y & 0xfc) << 3) |
                      ((y >> 3) & 0x1f));
    }

    unsafe private static void convertYUVtoRGB565(int y, int u, int v, Int16* rgbOut, int index)
    {
        int r = y + (int)1.402f * v;
        int g = y - (int)(0.344f * u + 0.714f * v);
        int b = y + (int)1.772f * u;
        r = r > 255 ? 255 : r < 0 ? 0 : r;
        g = g > 255 ? 255 : g < 0 ? 0 : g;
        b = b > 255 ? 255 : b < 0 ? 0 : b;
        rgbOut[index] = (short)(((b & 0xf8) << 8) |
                      ((g & 0xfc) << 3) |
                      ((r >> 3) & 0x1f));
    } 
```

我已经包括了单色和彩色解码器。

此代码生成的数据采用 OpenGL 565 RGB 格式，可用于初始化 OpenGL 纹理，或者您可以只处理像素以进行图像分析等。

鲍勃鲍威尔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:38:11.950

[这个](http://docs.xamarin.com/android/recipes/Other_UX/TextureView/Display_a_stream_from_the_camera)来自 Xamarin 的秘籍解释了如何使用 Camera 类来获取预览并将其显示给用户。

# java - 如何将此行和列数据添加到 HashMap？

> ID：10635208
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:50:05.323
> 
> 标签：java, arraylist, hashmap

我正在尝试读取一个文件，其中包含

```
Name,Date,Place

Tom,1/1/2010,America
Dick,2/2/2011,China
Harry,3/3/2012,Germany 
```

并将列标题添加到 String 并将值添加到 ArrayList。

```
HashMap<String columnName ,ArrayList<String> Value> 
```

所以程序应该像这样运行，

```
if(lineNumber == 1)
{
   interate through values and create headers
}
else
   add values to corresponding header list 
```

我的问题是我不知道如何`else`在代码部分引用数组列表。如果有人做过类似的事情，我想听听你的意见！

**编辑**

所以到目前为止我有这样的东西，

```
public void consumeLine(String path,int lineNumber,List line){

    if(lineNumber == 1)
    {
        ListIterator listIterator = line.listIterator();
        while(listIterator.hasNext())
        {   
            hashMap.put(listIterator.next().toString(),new ArrayList<String>());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:53:25.713

您想要创建一个列名的有序列表，并在迭代每一行中的值时对其进行迭代。

像这样的东西（未经测试的代码！）：

```
ListIterator listIterator = line.listIterator();
if(lineNumber == 1)
{
    while(listIterator.hasNext())
    {   
        String key = listIterator.next().toString();
        keyList.add(key); // keyList is a List<String> instance field.
        hashMap.put(key, new ArrayList<String>());
    }
} else {
    Iterator<String> keyIterator = keyList.iterator();
    while(keyList.hasNext() && listIterator.hasNext())
    {
        String key = keyList.next();
        String value = listIterator.next();
        ArrayList<String> values = hashMap.get(key);
        values.add(value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:02:46.627

试试看：

```
 public static void main(String[] args) throws IOException {
        BufferedReader reader = new BufferedReader(new FileReader("file.txt"));
        HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();
        int lineNumber = 1;
        String[] columnName = null;
        ArrayList<String[]> value = new ArrayList<String[]>(); // temp array
        String line;
        String[] arr;
        while (reader.ready())
            if (!(line = reader.readLine()).isEmpty()) {
                arr = line.split("\\s+");
                if (lineNumber == 1)
                    columnName = arr;// create headers
                else
                    value.add(arr);// create values
                lineNumber++;
            }
        // transform data
        for (int i = 0; i < columnName.length; i++) {
            ArrayList<String> ar = new ArrayList<String>();
            for (int j = 0; j < value.size(); j++)
                ar.add(value.get(j)[i]);
            map.put(columnName[i], ar);
        }
        System.out.println(map);
    } 
```

# wordpress - 在 Wordpress 中保存和提供静态索引页面

> ID：10635211
> 
> 赞同：0
> 
> 时间：2012-05-17T11:50:11.187
> 
> 标签：wordpress, apache, web

我认为这很简单.. 或者我可能错过了一些东西.. 我想保存 wget 的输出并将其作为索引页面...但由于某种原因，它总是提供 php 版本而不是 html。

我想先更改“DirectoryIndex”以提供 index.html .. 并重新启动 apache ..

现在的问题是，当我执行 wget www.mysite.com/index.php -O index.html 时，即使我指定了 index.php，它也可以提供 HTML 版本

也许它与wordpress相关或我做的一些错误配置..

蒂亚，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:39:53.300

不确定我明白你的意思。：/

你想用来`wget`从其他网站获取内容并在 WP 中提供吗？

----- 某种类型的缓存 -----

您必须`wget`直接使用站点的 URl 调用，而不是 index.php。例如：

```
wget -O index.html http://yoursite.com 
```

您将获得 index.html 及其内容：css、文本、图像、js... 您可以使用重定向规则将此类文件作为默认页面提供服务。

# python - django 中的摘要式身份验证

> ID：10635212
> 
> 赞同：1
> 
> 时间：2012-05-17T11:50:12.120
> 
> 标签：python, django, authentication, hash, digest

据我所知，在摘要身份验证中，客户端使用密码和服务器提供的随机值作为输入值进行不可逆计算。结果被传输到执行相同计算的服务器，如果客户端到达相同的值，则对客户端进行身份验证。由于计算是不可逆的，窃听者无法获得密码。

留意上面的定义，我用`CryptoJS.HmacSHA256("password", "key")` Javascript将信息发送到django服务器，现在问题是：

我需要在服务器中使用相同的逻辑进行检查，但 django 已经以自己的格式对密码进行了哈希处理，例如使用`pbkdf2_sha256`.

我应该使用像AES这样的可逆算法吗？我认为不可能破解 django 的哈希算法并为客户端编写相同的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:21:13.803

您为什么要尝试以这种方式进行身份验证？您不能为此使用 djangos 默认身份验证。

你可以做的是（例如）：

1.  创建一个与用户关联的新模型，该模型具有共享密钥和令牌
2.  创建您自己的身份验证后端，该后端接受签名值，验证签名值，然后将用户登录

我使用[本文](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)中的细节来实现算法。即使您不使用此方法，您仍然需要创建自己的自定义[身份验证后端](https://docs.djangoproject.com/en/dev/ref/authbackends/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T12:09:05.183

*   AES 不是散列算法。是一种加密算法。
*   您可以使用 SHA1 或 MD5 等散列算法。

# c# - 绘制 3D 边框

> ID：10635214
> 
> 赞同：0
> 
> 时间：2012-05-17T11:50:15.147
> 
> 标签：c#, .net, gdi+

我想使用 GDI+ 绘制一个 3D 边框（斜角），例如`Paint`在`Control`. 我应该自己用`DrawLine`and写吗`KnownColors`或者有什么东西可以使用吗？

谢谢赛义德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:56:12.767

你用什么画画？WinForms 上的 GDI+？如果是这种情况，您可以使用[ControlPaint.DrawBorder3D](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.drawborder3d.aspx)方法，例如在`Paint`事件处理程序中：

```
ControlPaint.DrawBorder3D(e.Graphics,
    ((Control)sender).ClientRectangle,
    Border3DStyle.Bump); 
```

有关所有可用样式的列表，请参阅[Border3DStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.border3dstyle.aspx)枚举。

# asp.net - 错误：'GridView' 必须放在带有 runat=server 的表单标签内

> ID：10635216
> 
> 赞同：-3
> 
> 时间：2012-05-17T11:50:19.100
> 
> 标签：asp.net, gridview

如果我把它放到表单标签中，那么它就解决`gridview is disappeared`了。但是现在我必须做什么？

```
<form runat="server" id="f1">`<asp:GridView ID="GridView1" runat="server" AllowPaging="True">           
        </asp:Gridview></form> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:17:14.177

Remove the ` character between the form and the GridView tags and try again. ALso make sure you have data coming back.

# android - ListView 和大小

> ID：10635221
> 
> 赞同：0
> 
> 时间：2012-05-17T11:50:29.517
> 
> 标签：android, android-layout

我有 xml 列表视图。我怎样才能改变它的活动高度？我知道这段代码：

> list.setLayoutParams(new LinearLayout.LayoutParams(200, 600));

意味着我的列表视图将有 200 的宽度和 600 的高度，但我怎样才能只改变活动的高度？我想这样做是因为我想宽度填充父级但高度我的列表我想要我自己的并动态计数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:53:52.533

如果宽度是`FILL_PARENT`

**list.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,600));**

```
or 
```

宽度是`WRAP_CONTENT`

**list.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,600));**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:56:06.580

```
listView.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, 600)); 
```

# android - 如何在 Android 中删除联系人？

> ID：10635222
> 
> 赞同：0
> 
> 时间：2012-05-17T11:50:30.437
> 
> 标签：android, android-contacts, android-contentprovider, android-menu, android-context

我有一个`listview`，我打电话给`registerForContextMenu`。在`ContextMenu`我只有一个菜单是“删除联系人”。以下是单击删除菜单时的代码：

```
public boolean onContextItemSelected(MenuItem item)
{
    switch (item.getItemId()) 
    {
    case DELETE_ID:
        AdapterView.AdapterContextMenuInfo menuinfo;
        menuinfo = (AdapterContextMenuInfo)item.getMenuInfo();
        int id = menuinfo.position;
        delete(id);
        return true;
    }
    return super.onContextItemSelected(item);
    }

 private void delete(int id)
{
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
        null, ContactsContract.Contacts._ID + "=" + id, null, null);
    while (cur.moveToNext()) {
        try{
            String lookupKey = cur.getString(cur.getColumnIndex(
                ContactsContract.Contacts.LOOKUP_KEY));
            Uri uri = Uri.withAppendedPath(ContactsContract.
                Contacts.CONTENT_LOOKUP_URI, lookupKey);
            System.out.println("The uri is " + uri.toString());
            cr.delete(uri, ContactsContract.Contacts._ID + "=" + id, null);
        }
    catch(Exception e)
    {
        System.out.println(e.getStackTrace());
    }
        }
} 
```

但是使用上面的代码并没有删除任何细节数据。我的问题是上述代码是否丢失或不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:59:24.290

您将要使用`id`from `AdapterContextMenuInfo`：

```
long id = menuinfo.id; 
```

现在您正在使用`position`，它表示适配器中选定行的位置，而不是该`id`特定行的联系人的位置，因此当您查找联系人时，`id`您很可能找不到它。

# c# - 关闭后立即从 Web 服务器中删除文件的 C# 技术

> ID：10635224
> 
> 赞同：1
> 
> 时间：2012-05-17T11:50:39.610
> 
> 标签：c#, asp.net-mvc, itextsharp, delete-file

我在附加到电子邮件并发送的 C# MVC 应用程序中创建 PDF 发票，理想情况下，一旦发送电子邮件，我想删除发票以释放服务器空间并提高隐私/安全性。我已经编写了代码来执行此操作，但它有 50% 的时间失败，因为该文件被另一个进程锁定（我不确定是创建/写入进程锁定它还是电子邮件发送）。我正在异步发送电子邮件（即要删除的代码在电子邮件发送之前不会执行）。

我将不胜感激有关如何处理此问题的一些提示。我可以运行一项工作来清理旧文件，但我更愿意边走边清理它们......

我忘了提到我正在使用 iTextSharp 生成 PDF - 关键是这段代码用于生成最终发票（我可以删除作为参数传入的文件列表而无需戏剧）：

```
/// <summary>
        /// http://stackoverflow.com/questions/4276019/itextsharp-pdfcopy-use-examples
        /// </summary>
        /// <param name="fileNames"></param>
        /// <param name="outFile"></param>
        private void CombineMultiplePDFs(List<string> files, string outFile)
        {
            int pageOffset = 0;
            int f = 0;

            iTextSharp.text.Document document = null;
            PdfCopy writer = null;

            foreach (string file in files)
            {
                // we create a reader for a certain document
                PdfReader reader = new PdfReader(file);
                reader.ConsolidateNamedDestinations();
                // we retrieve the total number of pages
                int n = reader.NumberOfPages;

                pageOffset += n;

                if (f == 0)
                {
                    // step 1: creation of a document-object
                    document = new iTextSharp.text.Document(reader.GetPageSizeWithRotation(1));
                    // step 2: we create a writer that listens to the document
                    writer = new PdfCopy(document, new FileStream(outFile, FileMode.Create));
                    // step 3: we open the document
                    document.Open();
                }
                // step 4: we add content
                for (int i = 0; i < n; )
                {
                    ++i;
                    if (writer != null)
                    {
                        PdfImportedPage page = writer.GetImportedPage(reader, i);
                        writer.AddPage(page);
                    }
                }
                PRAcroForm form = reader.AcroForm;

                if (form != null && writer != null)
                {
                    writer.CopyAcroForm(reader);
                }

                f++;
            }

            // step 5: we close the document
            if (document != null)
            {
                document.Close();
            }
        } 
```

PDF 文件然后位于服务器上（例如“~/Invoices/0223.pdf”）准备附加到电子邮件，如下所示：

```
MailMessage mailMessage = new MailMessage();
        mailMessage.From = new MailAddress(WebConfig.GetWebConfigKey(AppSettingsKey.ReplyEmailAddress.ToString()));
        mailMessage.To.Add(new MailAddress(user.Email));
        mailMessage.Subject = emailTemplate.TemplateSubject;
        mailMessage.Body = emailTemplate.TemplateContent;
        mailMessage.IsBodyHtml = false;
        mailMessage.Attachments.Add(new Attachment(HttpContext.Current.Server.MapPath("/Invoices/" + invoiceId + ".pdf")));

        SmtpClient client = new SmtpClient();

        try
        {
            client.Send(mailMessage);
        }
        catch{...}{
            //Error handling
        }

        client.Dispose(); 
```

然后我尝试删除它：

```
File.Delete(HttpContext.Current.Server.MapPath("/Invoices/" + invoiceId + ".pdf")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T12:25:38.887

与其将文件保存到磁盘并引发性能、IO 和删除问题，不如查看您的 PDF 和邮件库是否支持将 PDF 写入 MemoryStream 并将该流附加到电子邮件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T11:56:49.813

您是否使用 FileStream 打开/读取文件？

您可以尝试使用从 FileStream 继承的 Stream，并在流关闭时删除该文件：

```
/// <summary>
/// FileStream that automatically delete the file when closing
/// </summary>
public class AutoDeleteFileStream : FileStream
{
    private string _fileName;

    public AutoDeleteFileStream(string fileName, FileMode fileMode, FileAccess fileAccess)
        : base(fileName, fileMode, fileAccess)
    {
        this._fileName = fileName;
    }

    public AutoDeleteFileStream(string fileName, FileMode fileMode)
        : base(fileName, fileMode)
    {
        this._fileName = fileName;
    }

    public override void Close()
    {
        base.Close();
        if (!string.IsNullOrEmpty(_fileName))
            File.Delete(_fileName);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:55:47.613

我有同样的问题，我所做的是将 PDF 文件移动到另一个目录，如 /trash，然后删除该目录的文件。这为我解决了问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T12:07:00.957

您可以将文件保存在您的应用程序数据库中。这样，您就不会*被另一个进程*问题锁定。然后你可以删除它。此外，您可以在行上放置时间戳，这样，如果您的应用程序中断，将来删除旧文件会更容易。

# python - Python：如何在 Mac 中使用 ASCII #219 打印“块”

> ID：10635226
> 
> 赞同：4
> 
> 时间：2012-05-17T11:50:49.077
> 
> 标签：python, macos, extended-ascii

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T12:03:25.140

相应的[unicode 字符是`0x2588`](http://www.unicode.org/charts/PDF/U2580.pdf)，所以使用它：

```
print unichr(0x2588)        # or:
print u"\u2588" 
```

应该给你正确的结果。如果你想用不同的编码，你总是`encode`可以的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T12:02:59.507

您发布的字符不是 219，而是 9608。打印它应该可以正常工作：

蟒蛇3：

```
>>> ord("█")
9608
>>> chr(9608)
'█' 
```

蟒蛇2：

```
>>> unichr(9608)
u'\u2588'
>>> print(u'\u2588')
█ 
```

如果您仍有问题，请将您的终端设置为使用 utf-8 并在必要时设置`.encode()`为 utf-8。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T12:08:24.050

该字符不存在[Mac 的扩展 ASCII 表](http://academic.evergreen.edu/projects/biophysics/technotes/program/ascii_ext-mac.htm)，但是 unicode 表示将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-08T07:16:14.213

# facebook - 用于分享信息的 Facebook 链接

> ID：10635232
> 
> 赞同：1
> 
> 时间：2012-05-17T11:51:12.453
> 
> 标签：facebook, api, rest, social

我需要一些休息 api（链接），我可以用它在 fb 墙上写消息。

以前有可能，`http://www.facebook.com/connect/prompt_feed.php?&message=blabla`但现在它不起作用。

我现在发现的是

1.  [http://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fumpirsky.com](http://www.facebook.com/sharer/sharer.php?u=http://umpirsky.com)但它只允许 url，不允许文本。
2.  [http://www.facebook.com/dialog/feed?app_id=123050457758183&link=http://loopia.se&name=test&caption=test&description=test&redirect_uri=http://www.facebook.com](http://www.facebook.com/dialog/feed?app_id=123050457758183&link=http://umpirsky.com&name=test&caption=test&description=test&redirect_uri=http://www.facebook.com)但它有点难看，它没有允许查看提交的消息 + 它需要应用程序 ID。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:56:24.557

不，没有更好的解决方案。Facebook 正在弃用与应用程序 ID 无关的方法。在 Facebook 上为用户共享消息的推荐方式是通过[对话框](http://developers.facebook.com/docs/reference/dialogs/)。

此外，自动填充用户文本的选项已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:50:33.817

这是有效的方式，它不需要 facebook 应用程序 ID：

```
<a onClick="window.open('http://www.facebook.com/sharer.php?s=100&amp;p[title]=Title&amp;p[summary]=summary&amp;p[url]=www.build.server.com&amp;p[images][0]=http://fbrell.com/f8.jpg','sharer','toolbar=0,status=0,width=548,height=325');" href="javascript: void(0)">Insert text or an image here.</a> 
```

正如您从上面的代码中看到的，您可以输入自定义标题、摘要、链接和图像。

# batch-file - I want to make a popup window with an image

> ID：10635235
> 
> 赞同：1
> 
> 时间：2012-05-17T11:51:44.310
> 
> 标签：batch-file

I want to make it with a *.bat file, how would I do this? I haven't really that much experience with *.bat files, so I need help.

(I would be using this for several different things, I am not willing to explain what they are, but that is because I cannot share everything.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:21:12.150

您可以使用它来批量创建弹出消息框：

```
msg * your message 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:40:23.770

您可以使用一个简单的 VBS 脚本来创建一个文本弹出窗口。

**消息框.vbs**

```
MsgBox WScript.Arguments(0) 
```

然后你可以简单地从命令行或批处理文件中执行以下操作

```
msgbox "Hello world!" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:35:40.447

我实际上在 Visual Studio C# 中制作了我需要的东西，然后将其转换为 Delphi，然后制作了一个 *.exe

# powershell - Send files over PSSession

> ID：10635238
> 
> 赞同：21
> 
> 时间：2012-05-17T11:51:51.330
> 
> 标签：powershell, winrm

I just burned a couple of hours searching for a solution to send files over an active PSSession. And the result is nada, niente. I'm trying to invoke a command on a remote computer over an active session, which should copy something from a network storage. So, basically this is it:

```
icm -Session $s {
Copy-Item $networkLocation $PCLocation } 
```

Because of the "second hop" problem, I can't do that directly, and because I'm running win server 2003 I cant enable CredSSP. I could first copy the files to my computer and then send/push them to the remote machine, but how? I tried **PModem**, but as I saw it can only pull data and not push.

Any help is appreaciated.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-02-29T04:52:13.037

这现在可以在 PowerShell / WMF 5.0 中实现

`Copy-Item`有`-FromSession`和`-toSession`参数。您可以使用其中之一并传入会话变量。

例如。

```
$cs = New-PSSession -ComputerName 169.254.44.14 -Credential (Get-Credential) -Name SQL
Copy-Item Northwind.* -Destination "C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQL2008R2\MSSQL\DATA\" -ToSession $cs 
```

[在此处](https://richardspowershellblog.wordpress.com/2015/05/28/copy-files-over-ps-remoting-sessions/)查看更多示例，或者您可以查看[官方文档](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/copy-item)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-17T19:22:33.547

如果它是一个小文件，您可以将文件的内容和文件名作为参数发送。

```
$f="the filename"
$c=Get-Content $f
invoke-command -session $s -script {param($filename,$contents) `
     set-content -path $filename -value $contents} -argumentlist $f,$c 
```

如果文件太长而无法适应会话的任何限制，您可以将文件作为块读取，并使用类似的技术将它们一起附加到目标位置

* * *

PowerShell 5+ 对此具有内置支持，如[David 的回答](https://stackoverflow.com/a/35692198/438570)中所述。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T01:00:51.873

不久前我遇到了同样的问题，并整理了一个概念验证，用于通过 PS Remoting 会话发送文件。您将在此处找到脚本：

[https://gist.github.com/791112](https://gist.github.com/791112)

> ```
> #requires -version 2.0
> 
> [CmdletBinding()]
> param (
>     [Parameter(Mandatory=$true)]
>     [string]
>     $ComputerName,
> 
>     [Parameter(Mandatory=$true)]
>     [string]
>     $Path,
> 
>     [Parameter(Mandatory=$true)]
>     [string]
>     $Destination,
> 
>     [int]
>     $TransferChunkSize = 0x10000
> )
> 
> function Initialize-TempScript ($Path) {
>     "<# DATA" | Set-Content -Path $Path 
> }
> 
> function Complete-Chunk () {
> @"
> DATA #>
> `$TransferPath = `$Env:TEMP | Join-Path -ChildPath '$TransferId'
> `$InData = `$false
> `$WriteStream = [IO.File]::OpenWrite(`$TransferPath)
> try {
>     `$WriteStream.Seek(0, 'End') | Out-Null
>     `$MyInvocation.MyCommand.Definition -split "``n" | ForEach-Object {
>         if (`$InData) {
>             `$InData = -not `$_.StartsWith('DATA #>')
>             if (`$InData) {
>                 `$WriteBuffer = [Convert]::FromBase64String(`$_)
>                 `$WriteStream.Write(`$WriteBuffer, 0, `$WriteBuffer.Length)
>             }
>         } else {
>             `$InData = `$_.StartsWith('<# DATA')
>         }
>     }
> } finally {
>     `$WriteStream.Close()
> }
> "@
> }
> 
> function Complete-FinalChunk ($Destination) {
> @"
> `$TransferPath | Move-Item -Destination '$Destination' -Force
> "@
> }
> 
> $ErrorActionPreference = 'Stop'
> Set-StrictMode -Version Latest
> 
> $EncodingChunkSize = 57 * 100
> if ($EncodingChunkSize % 57 -ne 0) {
>     throw "EncodingChunkSize must be a multiple of 57"
> }
> 
> $TransferId = [Guid]::NewGuid().ToString()
> 
> $Path = ($Path | Resolve-Path).ProviderPath
> $ReadBuffer = New-Object -TypeName byte[] -ArgumentList $EncodingChunkSize
> 
> $TempPath = ([IO.Path]::GetTempFileName() | % { $_ | Move-Item -Destination "$_.ps1" -PassThru}).FullName
> $Session = New-PSSession -ComputerName $ComputerName
> $ReadStream = [IO.File]::OpenRead($Path)
> 
> $ChunkCount = 0
> Initialize-TempScript -Path $TempPath 
> 
> try {
>     do {
>         $ReadCount = $ReadStream.Read($ReadBuffer, 0, $EncodingChunkSize)
>         if ($ReadCount -gt 0) {
>             [Convert]::ToBase64String($ReadBuffer, 0, $ReadCount, 'InsertLineBreaks') |
>                 Add-Content -Path $TempPath
>         }
>         $ChunkCount += $ReadCount
>         if ($ChunkCount -ge $TransferChunkSize -or $ReadCount -eq 0) {
>             # send
>             Write-Verbose "Sending chunk $TransferIndex"
>             Complete-Chunk | Add-Content -Path $TempPath
>             if ($ReadCount -eq 0) {
>                 Complete-FinalChunk -Destination $Destination | Add-Content -Path $TempPath
>                 Write-Verbose "Sending final chunk"
>             }
>             Invoke-Command -Session $Session -FilePath $TempPath 
> 
>             # reset
>             $ChunkCount = 0
>             Initialize-TempScript -Path $TempPath 
>         }
>     } while ($ReadCount -gt 0)
> } finally {
>     if ($ReadStream) { $ReadStream.Close() }
>     $Session | Remove-PSSession
>     $TempPath | Remove-Item
> } 
> ```

一些小的更改将允许它接受一个会话作为参数，而不是开始一个新的。我发现在传输大文件时，目标计算机上的远程处理服务的内存消耗可能会变得非常大。我怀疑 PS Remoting 并不是真正设计用于这种方式的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-19T09:30:33.123

```
$data = Get-Content 'C:\file.exe' -Raw
Invoke-Command -ComputerName 'server' -ScriptBlock { $using:data | Set-Content -Path 'D:\filecopy.exe' } 
```

实际上不知道最大文件大小限制是多少。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-11T12:36:12.433

***`NET USE`***允许您为远程系统添加本地驱动器号，然后允许您在 PSSession 中使用驱动器号，甚至可以不使用 PSSession。如果您没有 Powershell v5.0，这很有帮助，即使您有，

您可以使用远程机器名称或其 IP 地址作为远程 UNC 路径的一部分，并且可以在同一行指定用户名和密码凭据：

```
 NET USE Z: \\192.168.1.50\ShareName /USER:192.168.1.50\UserName UserPassword 
```

另一个例子：

```
 NET USE Z: \\RemoteSystem\ShareName /USER:RemoteSystem\UserName UserPassword 
```

或者

```
 NET USE Z: \\RemoteSystem\ShareName /USER:Domain\UserName UserPassword 
```

如果您不在同一行提供用户凭据，系统将提示您输入它们：

```
>NET USE Z: \\192.168.1.50\ShareName
Enter the user name for '192.168.1.50': 192.168.1.50\UserName
Enter the password for 192.168.1.50: *****
The command completed successfully. 
```

完成以下操作后，您可以删除驱动器号：

```
 NET USE Z: /delete 
```

您可以使用 NET USE /? 获得完整的语法。

```
>net use /?
The syntax of this command is:

NET USE
[devicename | *] [\\computername\sharename[\volume] [password | *]]
        [/USER:[domainname\]username]
        [/USER:[dotted domain name\]username]
        [/USER:[username@dotted domain name]
        [/SMARTCARD]
        [/SAVECRED]
        [[/DELETE] | [/PERSISTENT:{YES | NO}]]

NET USE {devicename | *} [password | *] /HOME

NET USE [/PERSISTENT:{YES | NO}] 
```

`NET`是系统文件夹中的标准外部 .exe 命令，可以在 Powershell 中正常工作。

# .net - 迁移存储在 RavenDB 中的数据

> ID：10635241
> 
> 赞同：2
> 
> 时间：2012-05-17T11:52:00.643
> 
> 标签：.net, ravendb

我有实体存储在 RavenDB (build #888)。由于数据库迁移，我需要更改他们的 ID，并与较新版本的应用程序连接。

我已经编写了我正在使用的示例函数：

```
public bool Migrate()
{
    using (var session = _store.OpenSession())
    {
        var users = session.Query<User>().ToList();
        foreach (var user in users)
        {
            user.Id = user.Email;
        }
        session.SaveChanges();
     }
} 
```

执行此代码会导致异常：

```
Status: System.InvalidOperationException: Entity App.Models.Entities.User had document key 'mydomain-mylogin' but now has document key property 'mylogin@yahoo.com'.
You cannot change the document key property of a entity loaded into the session
   at Raven.Client.Document.InMemoryDocumentSessionOperations.CreatePutEntityCommand(Object entity, DocumentMetadata documentMetadata)
   at Raven.Client.Document.InMemoryDocumentSessionOperations.PrepareForEntitiesPuts(SaveChangesData result)
   at Raven.Client.Document.InMemoryDocumentSessionOperations.PrepareForSaveChanges()
   at Raven.Client.Document.DocumentSession.SaveChanges() 
```

如何做呢 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:54:22.970

我当前的解决方案是将当前实体复制到临时实体，更改所需属性，将此类新实体存储在数据库中，最后删除旧实体：

```
using (var session = _store.OpenSession())
{
    var users = session.Query<User>().ToList();
    foreach (var user in users)
    {
        var newuser = new User
                          {
                              Id = user.Email,
                              DisplayName = user.DisplayName
                          };

        session.Store(newuser);
        session.Delete(user);
    }
    session.SaveChanges();
} 
```

# mysql - 重启mysql服务器后，mysql函数自动变为默认值

> ID：10635245
> 
> 赞同：3
> 
> 时间：2012-05-17T11:52:13.623
> 
> 标签：mysql

如果我重新启动 mysql 服务器，它会自动将值更改为默认值。

```
mysql> show global variables like 'log_bin_trust_function_creators';
+---------------------------------+-------+
| Variable_name                   | Value |
+---------------------------------+-------+
| log_bin_trust_function_creators | OFF   |
+---------------------------------+-------+
1 row in set (0.00 sec)

mysql> SET GLOBAL log_bin_trust_function_creators = ON;
Query OK, 0 rows affected (0.00 sec) 
```

无论发生什么，我都想让这个功能开启。

有没有办法让它成为我的默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:55:16.517

[`log-bin-trust-function-creators`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_log_bin_trust_function_creators)在[选项文件](http://dev.mysql.com/doc/en/option-files.html)中指定选项（如果您愿意，也可以在命令行上使用`--log-bin-trust-function-creators`参数 to ）。*`mysqld`*

# php - PHP：将数据数组拆分为字母顺序

> ID：10635260
> 
> 赞同：2
> 
> 时间：2012-05-17T11:53:16.797
> 
> 标签：php

我的应用程序中有以下代码，它将按字母顺序显示主题列表，并按每个部分块中的第一个标签名称拆分它们。

例如：

```
A
animal
amazing

B
bat
baseball 
```

代码如下：

```
<?php

    foreach($topics as $currentTopic):
        $thisLetter = strtoupper($currentTopic['Topic']['title'][0]);
        $sorted[$thisLetter][] = $currentTopic['Topic']['title'];
        unset($thisLetter);
    endforeach;

    foreach($sorted as $key=>$value):

        echo '<h3 class="alpha"><span>'.$key.'</span></h3>';
        echo '<ol class="tags main">';

        foreach($value as $thisTopic):

            echo '<li class="tag"><em>0</em>';
            echo $this->Html->link('<strong>'.$thisTopic['Topic']['title'].'</strong>',
                        array('controller'=>'topics','action'=>'view','slug'=>$thisTopic['Topic']['slug']),
                        array('escape'=>false,'rel'=>'tag'));
            echo '</li>';
        endforeach;

        echo '</ol>';

    endforeach;

    ?> 
```

但是，由于我现在已经拆分了数组，我发现很难访问数组中的其他数据，例如用于链接的主题 slug，因为 $thisTopic 变量只存储标题和其他所需的数据。我还想在其中显示 TopicPost 计数，`<em>`所以如果一个主题有 4 个相关的帖子显示`<em>4</em>`

目前正在做我正在做的事情会给出错误：`Fatal error: Cannot use string offset as an array`因为我已经拆分了数组......

任何人都可以帮忙吗？

如果我调试 $topics 数组，我会得到以下信息：

```
array(
    (int) 0 => array(
        'Topic' => array(
            'id' => '5',
            'title' => 'amazing',
            'slug' => 'amazing'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '9',
                'topic_id' => '5',
                'post_id' => '101'
            )
        )
    ),
    (int) 1 => array(
        'Topic' => array(
            'id' => '4',
            'title' => 'amazingness',
            'slug' => 'amazingness'
        ),
        'TopicPost' => array(
            (int) 0 => array(
                'id' => '8',
                'topic_id' => '4',
                'post_id' => '100'
            ),
            (int) 1 => array(
                'id' => '12',
                'topic_id' => '4',
                'post_id' => '101'
            ),
            (int) 2 => array(
                'id' => '4',
                'topic_id' => '4',
                'post_id' => '119'
            )
        )
    ),... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:37:17.187

您收到错误是因为您只存储主题的标题。

我建议存储整个主题信息，而不仅仅是标题：

```
$orderedTopics= array();
foreach ($topics as $topic) {
  $orderedTopics[strtoupper($topic['Topic']['title'][0])][] = $topic;
} 
```

然后，显示它：

```
foreach ($orderedTopics as $section=>$topics) {
  echo $section;
  foreach ($topics as $topic) {
    echo 'Title: ' . $topic['Topic']['title'];
    echo 'Body: ' . $topic['Topic']['body'];
    //etc...
  }
} 
```

# javascript - 触发两个点击事件：在固定位置 和

> ID：10635274
> 
> 赞同：0
> 
> 时间：2012-05-17T11:54:24.783
> 
> 标签：javascript, android, events, dom, cordova

 我有几个关于附加到 DOM 节点的事件的问题。考虑以下： 

[http://jsfiddle.net/hXq6r/15/](http://jsfiddle.net/hXq6r/15/)

**基本的：**

*   [1?] [I] (class="fixed") dom 节点是什么级别？[II] class="container"> dom节点是什么级别？
*   [2?] 你如何描述1中提到的对象之间的关系？祖先是兄弟姐妹？
*   [3?] 单击 .fixed 时 - 为什么未触发超链接事件？

**问题：** 所有都按预期运行。现在在 Android WebView 中运行此代码会导致问题：首先在 #button 上触发 click 事件，然后在超链接上再次触发。我正在运行 phonegap 1.4.1 我没有附加到超链接的事件处理程序，它只是默认的超链接事件。

*   [4?] 默认的超链接事件是如何命名的？点击？

**先进的：**

*   [5?] 哪个元素首先触发点击事件？它是否取决于 dom 中的 1\. 级别？
*   [6?] 似乎 [I] 先开火。
*   [7?] 如果 [I] 先前已触发，我如何阻止 [II] 上的点击事件触发？我只是设置了一个变量来检查。这是最好的解决方案吗？
*   [8?] 事件传播——我认为这对这个例子没有用，因为我们在看孩子，没有祖先。我应该将活动委托给更高的级别吗？

谢谢 ： ）。希望这有助于我掌握整个活动的基础知识。

有用： [http ://www.quirksmode.org/js/introevents.html](http://www.quirksmode.org/js/introevents.html) [http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# cakephp - cakephp 关系 habtm 条件

> ID：10635276
> 
> 赞同：1
> 
> 时间：2012-05-17T11:54:47.453
> 
> 标签：cakephp, has-and-belongs-to-many

我有两个模型新闻和类别。他们有habtm关系。我想检索具有类别特殊条件的新闻。像

```
$this->News->find('all', array('conditions' => array('Category.id' => 2)));

Column not found: 1054 Unknown column 'Category.id' in 'where clause'. 
```

我知道此列在 News 表中不存在，但在 news_categories 中它们具有 habtm 关系。我需要知道正确使用 CakePHP orm 来检索这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:03:55.367

您需要做的是创建一个连接表，然后临时绑定为 hasOne。

```
$this->News->bindModel(array('hasOne' => array('CategoriesNews')));
$this->News->find('all', array('fields' => array('News.*'),
    'conditions'=>array('CategoriesNews.category_id'=>2))
); 
```

# c# - DataReader 不兼容

> ID：10635277
> 
> 赞同：1
> 
> 时间：2012-05-17T11:54:49.730
> 
> 标签：c#, entity-framework

我已经创建了 EF 模型，然后在一个类中我编写了以下代码来从数据库中检索值。并将值存储在另一个表中。但它给了我错误“DATAREADER IS INCompatable”，如下所述..

```
 EmpRole empr = new EmpRole();
        empr.EmpId = strEmpId;
      string str="select RoleId from RoleName where roleName like '"+strDesignation+"'";
      var context= DbAccess.Data.ExecuteStoreQuery<RoleName>(str, null);  //Here Showing Error

        empr.RoleId = Convert.ToInt16(context);
        DbAccess.Data.EmpRoles.AddObject(empr);
        DbAccess.Commit(); 
```

它显示如下错误：

数据表是：

```
CREATE TABLE [dbo].[RoleName](
    [SNo] [int] IDENTITY(1,1) NOT NULL,
    [RoleId] [smallint] NOT NULL,
    [RoleName] [varchar](50) NULL,
 CONSTRAINT [PK_RoleName] PRIMARY KEY CLUSTERED 
(
    [RoleId] ASC
)

CREATE TABLE [dbo].[EmpRoles](
    [Sno] [int] IDENTITY(1,1) NOT NULL,
    [EmpId] [varchar](8) NOT NULL,
    [RoleId] [smallint] NOT NULL,
    [ReportingToId] [varchar](8) NULL,
 CONSTRAINT [PK_EmpRoles] PRIMARY KEY CLUSTERED 
(
    [Sno] ASC
) 
```

数据读取器与指定的“MyOrgDBModel.RoleName”不兼容。类型的成员“SNo”在数据读取器中没有同名的对应列。

请告诉我执行 sqlQuery 的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:56:45.537

这是因为您没有在选择查询中选择 SNo 列。当您填充 RoleName 并且它具有属性 SNo 列时，数据读取器中应该存在。如果您只想查询 RoleId，则使用一个属性 RoleId 创建新类型并使用它。创建新类型，如下所示

```
public class CustomRoleName
{
    int RoleId { get; set; }
} 
```

现在更改您的代码如下

```
EmpRole empr = new EmpRole();
empr.EmpId = strEmpId;
string str="select RoleId from RoleName where roleName like '"+strDesignation+"'";
foreach(CustomRoleName rn in  DbAccess.Data.ExecuteStoreQuery<CustomRoleName>(str))
{
     empr.RoleId = rn.RoleId ;
     DbAccess.Data.EmpRoles.AddObject(empr);
     DbAccess.Commit();
     break;
} 
```

# java - 自动调用超类方法

> ID：10635279
> 
> 赞同：10
> 
> 时间：2012-05-17T11:54:55.817
> 
> 标签：java, inheritance

考虑下面的类

```
class A{
    public void init(){
        //do this first;
    }
    public void atEnd(){
        //do this after init of base class ends
    }
}

class B1 extends A{

    @Override
    public void init()
    {
        super.init();
        //do new stuff.
        //I do not want to call atEnd() method here...
    }
} 
```

我有几个已经开发的 B1、B2、... Bn 子类。它们都扩展了 A 类。如果我想在所有这些中添加新功能，最好的方法是在 A 类中的方法中定义它。但条件是该方法应该总是在之前自动调用子类的 init() 方法结束。这样做的一种基本方法是在子类的 init() 方法的末尾再次添加 atEnd() 方法调用。但是有没有其他方法可以巧妙地做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-17T11:58:19.033

一种方法是制作`init()`final 并将其操作委托给第二个可覆盖的方法：

```
abstract class A {
  public final void init() {
    // insert prologue here
    initImpl();
    // insert epilogue here
  }
  protected abstract void initImpl();
}

class B extends A {
  protected void initImpl() {
    // ...
  }
} 
```

每当有人调用`init()`时，prologue 和 epilogue 都会自动执行，派生类不必做任何事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T11:59:45.657

Another thought would be to weave in an aspect. Add before and after advice to a pointcut.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-17T11:57:10.210

Make `init()` `final`，并为人们提供一个单独的方法来覆盖`init()`中间的调用：

```
class A{
    public final void init(){
        //do this first;
    }

    protected void initCore() { }

    public void atEnd(){
        //do this after init of base class ends
    }
}

class B1 extends A{

    @Override
    protected void initCore()
    {
        //do new stuff.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T15:06:14.303

其他答案是合理的解决方法，但要解决确切的问题：不，没有办法自动执行此操作。您必须显式调用`super.method()`.

# php - htaccess 中的多个动态 mod_rewrite

> ID：10635284
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:55:18.407
> 
> 标签：php, .htaccess, url, mod-rewrite

我有一堆目前都是这样的页面：site.com/browse.php?cat=XXX 和一堆 index.php?p=QQQ 的页面

如何在 2 条规则中制作这个 site.com/XXX 和 site.com/QQQ？我如何制定重写规则，以识别是否应将某些页面重定向到浏览而将某些页面重定向到索引？

我已经尝试过使用多个规则，但它总是只需要第一个规则（例如，尝试重定向到 browse.php?cat=QQQ）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:34:19.790

您需要某种方式来区分 index.php 和 browse.php。这是一个建议：

```
 site.com/QQQ
 site.com/browse/XXX 
```

匹配和处理上述 URL 的重定向规则是：

```
RewriteEngine On
# The following two lines prevent further rewriting on second pass
RewriteRule ^browse\.php$ - [L]
RewriteRule ^index\.php$ - [L]
# The following two lines cause mod_rewrite to do another pass
RewriteRule ^browse/(.+) browse.php?cat=$1 [L]
RewriteRule ^(.+) index.php?p=$1 [L] 
```

# actionscript-3 - AS3 if else 语句的当前场景名称？

> ID：10635285
> 
> 赞同：0
> 
> 时间：2012-05-17T11:55:24.880
> 
> 标签：actionscript-3, flash, flash-cs5.5

我正在构建一个快速的 Flash 演示文稿，使用向上和向下箭头导航，但需要使用当前场景的名称创建一个 if else 语句。

我有 10 个名为 01-10 的场景，但从 7 到 10 只能通过隐藏按钮访问，并且需要找到一种方法来使用场景名称从 01-06 循环导航，例如：

```
if scene name = 04 {
   go to nextScene();
} else if scene name = 05 {
   go to nextScene();
} else if scene name = 06 {
   go to scene 02
} 
```

除了 if else 语句之外，我都在工作，因为它使用向上箭头进入下一个场景，但当我需要转到 6 并重新开始时，它会继续到 10。

任何帮助都会很棒？

谢谢，

托马斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:21:29.413

创建几个函数，将一个用于您的密钥处理程序，另一个用于隐藏按钮，例如：

```
function standardScenes(sceneName)
    {
        switch(sceneName)
        {
            case 01:
                gotoAndPlay(sceneName);
            break;

            case 02:
                gotoAndPlay(sceneName);
            break;

            case 03:
                gotoAndPlay(sceneName);
            break;

            case 04:
                gotoAndPlay(sceneName);
            break;

            case 05:
                gotoAndPlay(sceneName);
            break;

            case 06:
                gotoAndPlay(sceneName);
            break;
        }
    }

    function hiddenScenes(sceneName)
    {
        switch(sceneName)
        {
            case 07:
                gotoAndPlay(sceneName);
            break;

            case 08:
                gotoAndPlay(sceneName);
            break;

            case 09:
                gotoAndPlay(sceneName);
            break;

            case 10:
                gotoAndPlay(sceneName);
            break;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:23:41.413

您可以使用此代码..

```
stop();
import flash.events.Event;
var no:Number = 0;

btn_up.addEventListener(MouseEvent.CLICK, up);
function up(e:MouseEvent){
no = no + 1;
getScene(no);
}

btn_down.addEventListener(MouseEvent.CLICK, down);
function down(e:MouseEvent){
no = no - 1;
getScene(no);
}
function getScene(num:Number){
    if(no <= 0){
        no = 0;
    }
    if(no == 1){
        gotoAndStop(1,"Scene " + no);
    }
    if(no == 2){
        gotoAndStop(1,"Scene " + no);
    }
    //continue here...
} 
```

# iphone - CIFilter 集成仅适用于 CISeciaTone

> ID：10635286
> 
> 赞同：1
> 
> 时间：2012-05-17T11:55:26.313
> 
> 标签：iphone, objective-c, ios, drawrect, core-image

以下代码为图像添加了漂亮的棕褐色效果，但是当我选择另一个过滤器时：`CIBloom`我根本看不到图像。你能帮我吗？

```
- (void)drawRect:(CGRect)rect
{
    UIImage *megan = [UIImage imageNamed:@"megan.png"];

    CIImage *cimage = [[CIImage alloc] initWithImage:megan];

    CIFilter *myFilter = [CIFilter filterWithName:@"CISepiaTone"];

    [myFilter setDefaults];
    [myFilter setValue:cimage forKey:@"inputImage"];
    [myFilter setValue:[NSNumber numberWithFloat:0.8f] forKey:@"inputIntensity"];

    CIImage *image = [myFilter outputImage];
    CIContext *context = [CIContext contextWithOptions:nil];
    CGImageRef cgImage = [context createCGImage:image fromRect:image.extent];
    UIImage *resultUIImage = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);

    CGRect imageRecht = [[UIScreen mainScreen] bounds];
    [resultUIImage drawInRect:imageRecht];
} 
```

据我了解，我应该能够只编辑以下几行来更改过滤器：

```
CIFilter *myFilter = [CIFilter filterWithName:@"CIBloom"];
[myFilter setValue:[NSNumber numberWithFloat:10.0f] forKey:@"inputIntensity"]; 
```

但是当我这样做时，我在启动应用程序时根本看不到任何图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:59:25.533

CISepiaTone 在 Mac OS X v10.4 及更高版本和 iOS 5.0 及更高版本中可用，而 CIBloom 仅在 Mac OS X v10.4 及更高版本中可用。

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)

# email - 将第一篇文章的标题放在 MailChimp RSS 活动的主题中

> ID：10635290
> 
> 赞同：21
> 
> 时间：2012-05-17T11:55:32.360
> 
> 标签：email, rss, mailchimp

我正在使用 MailChimp 和 RSS 从我的博客发送电子邮件。我想使用第一个帖子标题作为 RSS 电子邮件的主题。当我尝试这样做时，我收到以下错误：

> 消息主题*
> De InterMission Uitdaging vandaag：`*|RSSITEMS:|**|RSSITEM:URL|**|END:RSSITEMS|*` 此字段不能包含条件合并标签

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-17T12:07:29.557

啊，明白了：`*|RSSITEM:TITLE|*`实际上已经足够了。

得到 MailChimp 人的确认：[https](https://longrep.ly/r/5e1ddb41) ://longrep.ly/r/5e1ddb41 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T22:53:06.430

事实上，这并不完美。它会在您的电子邮件主题前添加“[test]”。而且根据mailChimp的帮助台，官方不允许这个标签放在主题中。只有有效的标签是： http: [//kb.mailchimp.com/article/merge-tag-cheatsheet-for-subject-lines/](http://kb.mailchimp.com/article/merge-tag-cheatsheet-for-subject-lines/)

# android - Android 在两个应用程序之间共享用户 ID

> ID：10635291
> 
> 赞同：1
> 
> 时间：2012-05-17T11:55:33.557
> 
> 标签：android, share, andengine, userid

我有两个游戏，一个是付费的，另一个是免费的。我在付费应用中添加了许多主题。

我想把所有的新东西都整合到我的免费游戏中并一个一个地卖东西，它们都有不同的包名。

有没有其他方法，比如在两个应用程序之间共享用户 ID，而不是将一个应用程序的代码库复制粘贴到另一个应用程序？

我在 AndEngine 中开发了这两款游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T22:29:06.210

您可能想了解一些有关 android Intents 的知识。它们是您可以在两个应用程序之间共享数据的一种方式。 [http://developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)

如果您传递的只是一段简单的文本，那应该很容易。

另一种方法是使用 SharedPreferences，在此 Stack 线程中进行了讨论： [在 Android 中在应用程序之间传递数据的最简单方法](https://stackoverflow.com/questions/8842569/the-easiest-way-to-pass-data-between-application-in-android) 虽然发帖人似乎很自信，但我不确定另一个应用程序是否可以监听另一个应用程序的 SharedPreferences。如果可以的话，它可能会构成严重的安全风险，除非有某种方法可以确保只有您的应用程序可以共享该数据。

# php - 限制包含的 php 文件

> ID：10635294
> 
> 赞同：-1
> 
> 时间：2012-05-17T11:55:44.343
> 
> 标签：php, limit

我使用 php 包含，我想限制在第一页显示多少：

1.php

```
<?php include('dynpage/some_text.htm'); ?> 
```

2.htm

```
 <p style="margin-left: 80px;"> <strong>some title nr.1</strong></p>
    <p>Some text nr.1</p> 

    <strong>some title nr.2</strong>
    <p><strong>NB!</strong>some really long text</p> 
```

我希望“1.php”只显示“一些标题 nr.1”和“一些文本 nr.1”

我尝试了从互联网上找到的不同代码，但没有一个有效。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:58:59.060

我相信您必须制定逻辑以在 2.htm 上显示有限的数据（我建议将其设为 php 文件）。将参数传递给第二个 php 文件并基于它显示数据。

像“2.php?showless=true”这样的包含文件

2.php上写。

```
 $showless = $_GET['showless']

 if($showless =='true'){
   echo // what you want to show
 }{
   echo // for other cases show everything.
 } 
```

# .htaccess - .htaccess 目录但在同一目录中的服务器上

> ID：10635295
> 
> 赞同：1
> 
> 时间：2012-05-17T11:55:44.410
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我想要完成的事情：

mysite.com/webdevelopment/ = webdevelopment.php

mysite.com/webdevelopment/websites = website.php

还：

mysite.com/internetmarketing/ = internetmarketing.php

mysite.com/internetmarketing/seo = seo.php

我的问题是：如何使用 .htaccess 来做到这一点？我知道如何重写 url，但是当我使用时：

internetmarketing/seo$ seo.php ，它不能正常工作。你能向我解释我怎样才能达到我想要的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:56:40.337

假设您使用 Apache，您可以在`.htaccess`文件中执行类似的操作。

```
RewriteEngine on

# /%1 -> /%1.php
RewriteCond %{REQUEST_URI} ^/([^/]+)/$
RewriteRule . /%1.php [L]

# /%1/%2 -> /%2.php but require that %1.php exists
RewriteCond %{REQUEST_URI} ^/([^/]+)/([^/]+)$
RewriteRule . /%2.php [L] 
```

# mysql - Drupal 表选择

> ID：10635298
> 
> 赞同：0
> 
> 时间：2012-05-17T11:56:04.447
> 
> 标签：mysql, drupal

我可以（终于!!!）设置查询以返回在 Drupal 7 中的可折叠字段集中设置的复选框的结果-但是当我尝试将其放入 tableselect 时，我没有得到任何结果。有人可以检查一下这段代码，看看你能不能告诉我为什么？我也有两个结果的屏幕截图-但由于我是新来的，因此不允许我发布它。

```
$form = array();

$secnum = 1;
  $result = db_query('SELECT s.secser_id, s.ser_name FROM {secser} s WHERE s.sec_num = :secnum', array(':secnum' => $secnum));
  $options = array();
  foreach ($result as $record) {
    $options[$record->secser_id] = $record->ser_name;
  }

$form['secser']['1'] = array(
  '#title' => t('Basic Sanitation'),
  '#type' => 'fieldset',
  '#collapsible' => TRUE,
);

$form['secser']['1']['secser'] = array(
  '#title' => t('Choices'),
  '#type' => 'checkboxes',
  '#multiple' => TRUE,
  '#options' => $options,
  '#description' => t('choose!'),
);

$form['secser']['2'] = array(
  '#title' => t('Community Systems'),
  '#type' => 'fieldset',
  '#collapsible' => TRUE,
  );

  $secnum = 2;
  $result = db_query('SELECT s.secser_id, s.ser_name FROM {secser} s WHERE s.sec_num = :secnum', array(':secnum' => $secnum));
  $opt2 = array();
  foreach ($result as $record) {
    $opt2[$record->secser_id] = $record->ser_name;
  }

$header = array(
  'ser_name' => t('Choose Service(s)'),
  );

$form['secser']['2']['secser'] = array(
    '#type' => 'tableselect',
    '#title' => t('Community Systems'),
    '#header' => $header,
    '#options' => array($opt2),
    '#multiple' => TRUE,
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:01:43.537

我没有尝试运行您的代码，但看起来您的选项是一个包含另一个数组的数组。

```
#options' => array($opt2), 
```

因为 $opt2 是一个数组，所以应该是：

```
#options' => $opt2, 
```

与您在复选框中设置选项的方式相同

# php - 浏览器关闭时cookie自动销毁

> ID：10635300
> 
> 赞同：0
> 
> 时间：2012-05-17T11:56:07.043
> 
> 标签：php, codeigniter, setcookie

我正在使用codeigniter，并且在我的库文件中存储了cookie，该cookie在打开浏览器时可以正常工作，但是在我关闭浏览器时会过期。代码中有什么问题吗？

```
 $this->CI =& get_instance();
        $this->CI->load->helper('cookie');
        $expire = time()+(60*60*24*30);
        $cookie = array(
                       'name'   => 'username',
                       'value'  => $users['username'],
                       'expire' => $expire
                   );
        $this->CI->input->set_cookie($cookie);
        $cookie = array(
                       'name'   => 'password',
                       'value'  => $users['password'],
                       'expire' => $expire
                   );
        $this->CI->input->set_cookie($cookie); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:00:09.010

The problem is the expiration time you are sending ... this is from the [help page here](http://codeigniter.com/user_guide/libraries/input.html)

> The expiration is set in seconds, which will be added to the current time. Do not include the time, but rather only the number of seconds from now that you wish the cookie to be valid. If the expiration is set to zero the cookie will only last as long as the browser is open.

So change your code to this :

```
$expire = (60*60*24*30); 
```

To set the cookie to expire 30 days from now

(Although setting it like you did should probably have worked - but the expiration would be years in advance ... the help document also shows the expiration given as a string - maybe thats the problem)

# android - ScrollView 和 layout_weight="1"？

> ID：10635307
> 
> 赞同：1
> 
> 时间：2012-05-17T11:56:24.613
> 
> 标签：android, scrollview

我在`ScrollView`. 为了防止`ScrollView`重叠的广告布局，我必须使用

```
<ScrollView 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" //          <--- THIS!
            >
                //...scrollview content
</ScrollView>

<include layout="@layout/ads_468x60"/> 
```

`layout_weight`如果 width 和 height 都设置为是什么意思`fill_parent`？

根据文档，这不应该起作用，或者更准确地说，如果两者`layout_height`和`layout_width`都被设置为`0dp`，那么将`layout_weight`被忽略。但是，在此示例中，如果`android:layout_weight="1"`没有`ScrollView`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:03:09.573

使用 android:layout_height="0dp"

android:layout_weight="1" 告诉布局管理器填充所有可用空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:31:34.143

在您的情况下， layout_weight 可以使您的视图*小于*定义的 (fill_parent) 并缩小以适应可用的屏幕空间。权重指示如何相对于彼此改变一个或多个组件的大小。在您的情况下，您只有一个重量视图。使用 0dp 被认为更快，因为系统需要测量的更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T18:02:09.273

layout_weight 用于您想要动态决定宽度或高度的情况，因此当您说 layout_height = "0dp" 时。它现在实际上取决于 layout_weight 属性来为它做出正确的决定。因此，通过在父布局上设置 weightsum 属性，您可以通过提供 layout_weight 相应地在子布局上分配权重。

请参考这个人在 layout_weight 上的回答和描述： [Android Layout Weight](https://stackoverflow.com/questions/4986861/android-layout-weight?lq=1)

# javascript - 通过画布从 svg 或 svg 输出 300 个具有正确文件名的 png 图像？

> ID：10635308
> 
> 赞同：1
> 
> 时间：2012-05-17T11:56:27.037
> 
> 标签：javascript, canvas, svg, png

对于不支持 SVG 的浏览器，我想显示图表的静态图像而不是交互式版本。

一种想法是预先生成所有可能的图表状态（大约 300 个）。我尝试使用 Canvas2Image 库，但它似乎不允许我指定文件名。有什么解决方法吗？也许是服务器端解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:08:56.663

还有其他几种方法可以解决这个问题。

`rsvg`是一个静态处理 SVG 的渲染库。它用于 ImageMagick 的转换工具，也有 python 和其他绑定。有些人发现不支持各种 SVG-isms，但 rsvg 会时不时地更新，所以最好只是试试看。

`inkscape`是一个包含 SVG->PNG 转换的 GUI 程序。但它也可以专门用于命令行（不需要 X11）。查看`man inkscape`可用于处理 svg 的所有命令行选项；它非常灵活。渲染速度相对较快。主要的缺点是作为一个 GUI 程序，它有很多依赖项，这些依赖项可能不存在于 Web 服务器上。

# postgresql - postgresql中的文本[]？

> ID：10635309
> 
> 赞同：5
> 
> 时间：2012-05-17T11:56:28.430
> 
> 标签：postgresql, jdbc

`text[]`我在 Postgresql 中看到了一个字段（文本数组）。

据我了解，它可以在单个列中存储多个文本数据。

我试图阅读更多关于它的手册：[http](http://www.postgresql.org/docs/current/static/datatype-character.html) ://www.postgresql.org/docs/current/static/datatype-character.html但不幸的是，关于 text[] 列类型没有太多内容。

所以谁能帮我理解

*   如何向 text[] 列添加新值？
*   当我们查询以检索 text[] 列的值时，结果集会是什么？

    **编辑**
    我有一个包含 2 列**group_name**和**members**的表。每次有新人加入群组时，*新人的 id*应插入该 group_name的**列成员中。**这是我的要求。一个组可以包含**“n”个成员**

    **EDIT 2**
    Pablo 要求我改用两张桌子。我可以知道如何通过使用两个不同的表来解决这个问题吗？现在我使用 comma(,) 来存储用逗号分隔的多个值。这个方法错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:02:34.453

要插入新值，只需执行以下操作：

```
insert into foo values (ARRAY['a', 'b']); 
```

假设你有这个表：

```
create table foo (a text[]); 
```

每次执行 a`select a from foo`时，都会有一列类型为数组：

```
db1=> select a from foo;
   a   
-------
 {a,b}
(1 row) 
```

如果要从数组中获取特定元素，则需要使用下标（PostgreSQL 中的数组是从 1 开始的）：

```
db=> select a[1] from foo;
 a 
---
 a
(1 row) 
```

为 PostgreSQL 表选择数组数据类型时要小心。确保您不需要**子表**。

# google-chrome - 编辑 chrome 扩展的清单文件

> ID：10635312
> 
> 赞同：5
> 
> 时间：2012-05-17T11:56:44.610
> 
> 标签：google-chrome, google-chrome-extension, manifest

我是一个初学者，正在尝试为 chrome 做一个扩展。我有一个`manifest.json`文件，我想以交互方式编辑这个文件。这意味着用户将输入信息，并且我的`manifest.json`文件应相应更改。我该怎么做？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-29T08:10:16.310

**您可以使用Content Scripts**在任何页面上执行脚本。只需将匹配值设置为`*`： [http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

# macos - 我的 OSX 上没有 Make 或 GCC

> ID：10635318
> 
> 赞同：0
> 
> 时间：2012-05-17T11:57:00.777
> 
> 标签：macos

我是 OSX 的新手。当我打开一个终端时，我没有`make`or `gcc`; 但是我已经`xcode`从我读过的内容中安装了它们应该在操作系统的某个地方。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:58:36.060

转到[Apple Developer 网站](http://developer.apple.com/xcode/)，登录，然后查找“命令行开发工具”。它们应该在[https://developer.apple.com/downloads](https://developer.apple.com/downloads/)找到。

登录很重要，因为您需要这样做才能访问这些特定工​​具。

# php - json_encode() UTF-8 错误

> ID：10635320
> 
> 赞同：0
> 
> 时间：2012-05-17T11:57:04.630
> 
> 标签：php, mysql

我在从数据库中获取带有特殊字符（瑞典语：“åäö”）的文本时遇到了一些问题。

如果我只是做一个普通的查询，

```
"SELECT * FROM" 
```

结果`echo`：

```
while($row = mysql_fetch_assoc($result))
{
    echo $row['text']; 
} 
```

...结果很好。

但是，在执行 时`json_encode($array)`，特殊字符已被替换：

```
{"id":"1","question":"fr\u00e5ga \u00e5\u00e4\u00f6".... 
```

我不知道我尝试了多少不同的东西，包括将数据库转换为 UTF-8，将字段转换为`utf8_general_ci`, `utf8_encode($string)`, `utf8_decode($string)`, ....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:00:05.207

你的输出是正确的；这就是你应该如何在 JSON 中嵌入 unicode 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:00:02.003

此行为是设计使然。这些是 JSON Unicode 转义。

任何兼容的 JSON 解析器都会正确解析它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:01:56.573

```
$str='{"id":"1","question":"fr\u00e5ga \u00e5\u00e4\u00f6"}';
$obj=json_decode($str);
var_dump($obj); 
```

输出这个

```
object(stdClass)#1 (2) {
  ["id"]=>
  string(1) "1"
  ["question"]=>
  string(13) "fråga åäö"
} 
```

所以一切都很好 - 你只是看到了 Unicode 字符的 JSON 编码。

在 PHP 5.4 中，您可以将[JSON_UNESCAPED_UNICODE](http://uk.php.net/json_encode#example-3444)传递给 json_encode，然后您将返回带有 UTF-8 编码字符的 JSON（至少我相信如此 - 尚未测试过）

# delphi - 在设计时更改自定义组件中的属性类

> ID：10635326
> 
> 赞同：4
> 
> 时间：2012-05-17T11:58:00.133
> 
> 标签：delphi, delphi-xe2

我正在编写简单的组件。我想要实现的是我的 MethodOptions 将根据我选择的 Method 在 Object Inspector 中发生变化。

像这样的东西：

![来自 DevExpress cxGrid](../Images/3e57ddedab988791a5e3053f73b0495d.png)

到目前为止，我编码：

```
 TmyMethod = (cmFirst, cmSecond);

   TmyMethodOptions = class(TPersistent)    
    published
        property SomethingInBase: boolean;
   end;

   TmyMethodOptionsFirst = class(TmyMethodOptions)
    published
        property SomethingInFirst: boolean;
   end;

   TmyMethodOptionsSecond = class(TmyTMethodOptions)
    published
        property SomethingInSecond: boolean;
   end;

  TmyComponent = class(TComponent)
    private
      fMethod: TmyMethod;
      fMethodOptions: TmyMethodOptions;
      procedure ChangeMethod(const Value: TmyMethod);
    public
      constructor Create(AOwner: TComponent); override;
      destructor Destroy; override;
    published
      property Method: TmyMethod read fMethod write ChangeMethod default cmFirst;
      property MethodOptions: TmyMethodOptions read fMethodOptions 
        write fMethodOptions;  
  end;

implementation

procedure TmyComponent.ChangeMethod(const Value: TmyMethod);
begin
  fMethod := Value;

  fMethodOptions.Free;
  // case...
  if Value = cmFirst then
    fMethodOptions := TmyMethodOptionsFirst.Create
  else
    fMethodOptions := TmyMethodOptionsSecond.Create;

//  fMethodOptions.Update;
end;

constructor TmyComponent.Create(AOwner: TComponent);
begin
  inherited;
  fMethodOptions := TmyMethodOptions.Create;

  fMethod := cmFirst;
end;

destructor TmyComponent.Destroy;
begin
  fMethodOptions.Free;

  inherited;
end; 
```

当然，它~~几乎~~什么都不做（除了挂起的 IDE），而且我没有任何起点可以搜索合适的知识来实现​​这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T21:12:14.253

如果我理解正确，我相信这与 Developer Express 在其 Quantum Grid 组件中实现的技术相同，用于动态显示网格中各种字段类型的不同属性。这里有一个机制的解释：[QuantumGrid的技术](http://community.devexpress.com/blogs/dxram/archive/2009/09/19/technology-of-the-quantumgrid-source.aspx)

# grails - 如何从 Grails 调用 Solr 中存在的 Rest Api？

> ID：10635328
> 
> 赞同：1
> 
> 时间：2012-05-17T11:58:10.153
> 
> 标签：grails, solr, grails-2.0

我正在尝试从 Grails 框架中获取 LWE/solr 中存在的 Rest API（即自动完成/拼写检查等），但是如果有人可以帮助我，我不知道该怎么做

提前致谢。..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:41:23.493

有一个与 solr 安装接口的 solr 插件。

[http://grails.org/plugin/solr](http://grails.org/plugin/solr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:44:41.517

以编程方式调用 SOLR 的最佳方法是使用[SOLRJ](http://wiki.apache.org/solr/Solrj) API

# delphi - 如何在字符串的所有可能位置插入字符？

> ID：10635329
> 
> 赞同：2
> 
> 时间：2012-05-17T11:58:11.817
> 
> 标签：delphi

我想在 s 字符串的每个可能位置插入一个字符，除了开始和结束。例如

```
abc
I want to have 
a-bc
ab-c
a-b-c 
```

以下是我的测试，但不正确：

```
procedure TForm1.Button2Click(Sender: TObject);
var
start, i,j,k,position,loop: integer;
laststart,lastend:integer;
c,item,stem:string;
str, prefix:string;
begin
str:='abcd';
memo1.clear;
memo1.Lines.Add(str);
laststart:=0;
lastend:=memo1.lines.count-1;
position:=0;
prefix:='';
loop:=0;
while loop<=length(str)-1 do
  begin

    for j:= laststart to lastend do
    begin
    item:=memo1.lines[j];
        for k:=length(item) downto 1 do
        begin
            if item[k]='-' then
            begin
            position:=j;
            break;
            end;
         end;  //for k
   prefix:=copy(item,1,position);
   stem:=copy(item,position+1, length(item));

        for start:=1 to length(stem)-1 do
        begin
        c:=prefix+copy(stem,1,start)+'-'+
        copy(stem, start+1,length(stem));
        memo1.lines.add(c);
        end;
     end; //for j
    laststart:=lastend+1;
    lastend:=memo1.Lines.Count-1;
inc(loop);
end; //end while

end; 
```

它输出：

```
abcd
a-bcd
ab-cd
abc-d
a--bcd // not correct
a-b-cd
a-bc-d
ab--cd //incorrect
ab-c-d
abc--d  //incorrect
a--bc-d //incorrect 
```

我觉得最大可能的中断是 lenth(str)-1，abc->most possible is insert 2 '-' (两次)。它是否正确？

还有其他更快的方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T17:21:19.317

递归版本。

```
 procedure InsertSymbols(s: string; c: Char; Position: Integer = 1);
  var
    i: Integer;
  begin
    Memo1.Lines.Add(s);
    for i := Position to Length(s) - 1 do
      InsertSymbols(Copy(s, 1, i) + c + Copy(s, i + 1, Length(s) - i), c, i + 2);
  end;

begin
  InsertSymbols('Test', '-');
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T12:20:06.893

这有效：

```
procedure TForm4.Button1Click(Sender: TObject);
var
  S: string;
  N: integer;
  Marker: cardinal;
  MaxMarker: cardinal;
  Str: string;
  i: Integer;
begin
  S := Edit1.Text;
  N := length(S);
  Marker := 0;
  MaxMarker := 1 shl (N - 1) - 1;

  Memo1.Clear;
  Memo1.Lines.BeginUpdate;

  for Marker := 0 to MaxMarker do
  begin
    Str := S[1];
    for i := 2 to N do
    begin
      if (Marker shr (N-i)) and 1 <> 0 then
        Str := Str + '-';
      Str := Str + S[i];
    end;
    Memo1.Lines.Add(Str);
  end;

  Memo1.Lines.EndUpdate;
end; 
```

![截屏](../Images/86c31a8c0428f0fa2d6a4a9178abd504.png)

如您所见，它通过使用数字的二进制表示来工作：

```
t e s t
 0 0 0
 0 0 1
 0 1 0
 0 1 1
 1 0 0
 1 0 1
 1 1 0
 1 1 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T14:12:12.263

为什么所有困难的解决方案？只需将字符串逐个字符复制到一个新的字符，在中间添加连字符，最后一个除外。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T06:39:54.993

我需要分隔一个字符串以用作序列号，代码如下：

```
Function GetDashedKey(Key: string): string
const
  PartSize = 7;
var
  Indx: Integer;
  dashedKey : string;
begin

  repeat
    if Trim(dashedKey)<>'' then
      dashedKey := dashedKey + ' - ';

    if Length(Key) < PartSize then
    begin
      dashedKey := dashedKey + Key;
      Key := '';
    end
    else
    begin
      dashedKey := dashedKey + Copy(Key, 1, PartSize);
      Key := Copy(Key, PartSize + 1, Length(Key)-1);
    end;
  until Trim(Key) = '';

  Result := dashedKey;
end; 
```

# php - 安卓c2dm注册id格式

> ID：10635335
> 
> 赞同：8
> 
> 时间：2012-05-17T11:58:39.370
> 
> 标签：php, android, regex, android-c2dm

我怀疑发布此消息后我会感到非常愚蠢，但是就这样。我有两个主要问题：

1) 什么是用于注册 ID 的合适正则表达式？目前我有以下内容，但我无法找到任何文档来支持这是否足够：

```
'/^[a-z0-9_-]{40,255}$/i' 
```

2) regID 包含“--”是否“有效”？我知道 android 不能担心每种语言 - 在这种情况下是 mysql - 用于评论等，但这让我有点措手不及。到目前为止，我一直在我的消毒剂中标记它，因为它可能被用于 sql 注入。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T17:16:20.000

注册 ID 的格式是一个实现细节。Google 可能会随时更改它，恕不另行通知。为什么要验证它？如果存储在 MySQL 中是一个问题，请使用 mysql_real_escape_string() 以防万一，或者使用 mysqli::real_escape_string() 和 PHP 上的 mysqli 或参数。

就像人的名字一样。你可能认为这都是字母，然后奥尼尔出现了。以防万一。

# wso2 - 带有 WS-Humantask 和 BPEL4People 的 wso2 BPS 的最新版本

> ID：10635342
> 
> 赞同：0
> 
> 时间：2012-05-17T11:59:13.890
> 
> 标签：wso2, wso2carbon

是否有机会试用未发布的 wso2 业务流程服务器版本？

我可以在 BPS 网站上看到，它将支持 WS-Humantask 和 BPEL4People 规范。在下一个版本上（预定 June12）

我特别需要 POC 的 Humantask 功能，如果有任何相关信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T04:56:30.387

Carbon 4 Beta，BPS 包可[在此处](http://wso2.org/bamboo/browse/WSO2CARBON-PRODUCTS-114/artifact/JOB1/BPS)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:17:04.677

我们计划在下一个主要版本中发布一些示例。您可以从这里找到[https://svn.wso2.org/repos/wso2/trunk/graphite/products/bps/modules/samples/product/src/main/resources/humantask/](https://svn.wso2.org/repos/wso2/trunk/graphite/products/bps/modules/samples/product/src/main/resources/humantask/)并试用它们。

# java - 事件调度线程内的同步问题

> ID：10635343
> 
> 赞同：1
> 
> 时间：2012-05-17T11:59:15.827
> 
> 标签：java, swing, synchronization, thread-safety

我正在使用 java.net.Authenticator 创建一个阻止对话框，该对话框在第一次通过代理建立任何连接时向用户请求代理登录名/密码。Authenticator 工作得很好，但是当我尝试同步显示输入对话框的方法时遇到了一些奇怪的问题。

这是我发现的问题的抽象工作代码示例：

```
private static JFrame frame;

public static void main ( String[] args )
{
    frame = new JFrame ( "Frame" );
    frame.add ( new JLabel ( "This is main application" ) );
    frame.setSize ( 500, 500 );
    frame.setLocationRelativeTo ( null );
    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.setVisible ( true );

    // Cycling thread
    new Thread ( new Runnable ()
    {
        public void run ()
        {
            while ( true )
            {
                // Opening new dialog in a separate event dispatch thread
                SwingUtilities.invokeLater ( new Runnable ()
                {
                    public void run ()
                    {
                        showSomeLockingDialog ();
                    }
                } );

                // Wait 3 seconds before next window
                try
                {
                    Thread.sleep ( 3000 );
                }
                catch ( InterruptedException e )
                {
                    e.printStackTrace ();
                }
            }
        }
    } ).start ();
}

private static final Object lock = new Object ();

private static void showSomeLockingDialog ()
{
    synchronized ( lock )
    {
        // Output to see that this method is not finished yet
        System.out.println ( "Method start" );

        // Modal thread-blocking dialog
        JDialog dialog = new JDialog ( frame, "Lock" );
        dialog.add ( new JLabel ( "This should be blocking other dialogs" ) );
        dialog.pack ();
        dialog.setLocationRelativeTo ( null );
        dialog.setModal ( true );
        dialog.setVisible ( true );

        // Output to see that this method is not finished yet
        System.out.println ( "Method end" );
    }
} 
```

所以基本上：

1.  有一个可见的主框架（实际上只是为了保持 JVM 运行）
2.  有循环线程在每个循环中请求 showSomeLockingDialog() 方法
3.  方法在“锁定”对象上同步
4.  方法开始和结束有控制台输出

因此，如果您运行此示例，您将看到每个循环都会弹出一个忽略同步的新对话框，即使您不关闭前一个对话框也是如此。我也尝试过简单的方法同步，但效果相同。

如果我们稍微改变调用 showSomeLockingDialog() 的方式，一切都会改变：

```
 new Thread ( new Runnable ()
    {
        public void run ()
        {
            showSomeLockingDialog ();
        }
    } ).start (); 
```

（只是使用单独的线程而不是在事件调度线程中调用方法）

这样，一切都按照我期望的方式工作 - 新的对话框调用被阻止，直到之前调用的那个被关闭。

这很奇怪——事件调度线程有什么特别之处以至于同步被忽略了？

或者如果它实际上是一个错误 - 是否有任何解决方法？也许我错过了一些巨大的东西......

**一些想法：**在我看来，模式对话框 setVisible 方法在事件调度线程中的行为不同（否则，如果从那里调用它会阻塞整个接口）。但这对同步有何影响...

**PS**不，我不能只在我的特定情况下使用第二个（工作）示例，因为我没有在我想要的地方调用该方法 - 它是从随机位置调用的，主要来自标准 JDK 类（当任何资源是从 Internet 加载 - JLabel 中的图像、一些 URL 输入流或其他任何东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:48:53.660

来自对话框的[setVisible javadoc 文档](http://docs.oracle.com/javase/6/docs/api/java/awt/Dialog.html#setVisible%28boolean%29)：

```
It is OK to call this method from the event dispatching thread because 
the toolkit ensures that other events are not blocked while this method
is blocked. 
```

并且基于 java 同步块是可重入的，以下是每个 invokeLater 发生的情况：

1.  调度线程正在调用`showSomeLockingDialog`
2.  取锁或重新进入
3.  打开窗口-> 阻塞直到关闭对话框

由于阻塞仅针对 setVisible 而不是针对其他事件（即其他 invokeLater），因此您将获得指定的行为。

# sql - SQL 数字小数

> ID：10635344
> 
> 赞同：4
> 
> 时间：2012-05-17T11:59:21.973
> 
> 标签：sql, sql-server, tsql

我运行一个查询，我的所有数字都精确到小数点后 5 位：

例如 -

```
156713.55000
2103613.03000
2080.08000 
```

是否有一段简单的代码可以添加到我的代码中，以便“成本”表结果精确到小数点后 2 位？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T12:02:34.657

以下示例将对您有所帮助。

带四舍五入：

```
select ROUND(55.4567, 2, 0)
-- Returns 55.4600

select CAST(55.4567 as decimal(38, 2))
-- Returns 55.46 
```

不四舍五入：

```
select ROUND(55.4567, 2, 1)
-- Returns 55.4500

select CAST(ROUND(55.4567, 2, 1) as decimal(38, 2))
-- Returns 55.45 
```

或者

使用`Str()`功能。它需要三个参数（数字、要显示的总字符数和要显示的小数位数

```
 Select Str(12345.6789, 12, 3) 
```

显示：“12345.679”（3 个空格、5 个数字 12345、一个小数点和三个小数位 (679)。 - 如果必须截断，则舍入

共 12 个字符，小数点右边 3 个字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T12:01:56.183

只需使用以下`ROUND`功能：

```
SELECT ROUND(column, 2) FROM Cost 
```

或者去除小数和四舍五入，使用`CAST`：

```
SELECT CAST(column as decimal(10, 2)) 
```

# jquery-plugins - goto Flickr Page for jQuery 是否有任何插件？

> ID：10635346
> 
> 赞同：1
> 
> 时间：2012-05-17T11:59:25.497
> 
> 标签：jquery-plugins, flickr

我正在开发一个网站，我想知道是否有一个带有按钮的插件：转到闪烁页面，如下图所示

![在此处输入图像描述](../Images/91458df0ae584d34ce3489f0489a705c.png)

有没有可以做到这一点的jquery插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:37:39.110

在您的 flickr 帐户的图像上添加链接，没有像“Facebook Like”按钮这样的插件。

# iphone - 在 IOS 上录制 MP3

> ID：10635349
> 
> 赞同：0
> 
> 时间：2012-05-17T11:59:38.837
> 
> 标签：iphone, ios, encoding, mp3

总而言之，我看过太多关于此的帖子，但没有解决方案！我有一个记录备忘录片段并将它们推送到服务器的应用程序。人们可以使用他们的 IOS 或在网络上收听他们的声音。做到这一点的最佳方法是将文件录制成 MP3 或在事后转换它们。我找不到任何事情要做。我知道 LAME，我在我的 Mac 上使用它，但无法让它在 IOS 上运行。

任何建议或帮助都像往常一样表示赞赏。

阿米尔

# autofac - Autofac是否允许指定应该将什么依赖类型注入构造函数

> ID：10635356
> 
> 赞同：1
> 
> 时间：2012-05-17T12:00:02.563
> 
> 标签：autofac

假设我有实现 IEmailService 的 EmailService。并且 EmailService 对 ILoggingService 具有构造函数依赖性。现在鉴于我有几个 ILoggingService 的实现，可以实现这样的事情：

```
<component service="IEmailService, MyInterfaces" type="EmailService, MyLib">
  <parameters>
    <parameter name="loggingService" value="LoggingService, MyLib" />
  </parameters>
</component> 
```

我已经研究过为注册类型命名，但到目前为止找不到如何从 XML 配置中使用它们的示例。

简而言之，我想使用 XML 配置来指定哪个具体的记录器实现被注入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:11:19.613

[Autofac 中的 XML 配置](https://code.google.com/p/autofac/wiki/XmlConfiguration)更多地针对 80% 的用例，而不是完全实现 Autofac 在 XML 形式中的灵活性。[Autofac 建议使用其模块机制](https://code.google.com/p/autofac/wiki/StructuringWithModules)进行配置。模块与 XML 配置相结合，可以成为实现您想要完成的目标的一种非常强大的方式，并且仍然具有根据需要在依赖项之间切换的灵活性。

首先，创建一个进行所需注册的 Autofac 模块：

```
public class EmailModule
{
  protected override void Load(ContainerBuilder builder)
  {
    // Register a named logging service so we can locate
    // this specific one later.
    builder.RegisterType<LoggingService>()
           .Named<ILoggingService>("emailLogger");

    // Create a ResolvedParameter we can use to force resolution
    // of the constructor parameter to the named logger type.
    var loggingServiceParameter = new ResolvedParameter(
      (pi, ctx) => pi.Name == "loggingService",
      (pi, ctx) => ctx.ResolveNamed<ILoggingService>("emailLogger"));

    // Add the ResolvedParameter to the type registration so it
    // knows to use it when resolving.
    builder.RegisterType<EmailService>()
           .As<IEmailService>()
           .WithParameter(loggingServiceParameter);
  }
} 
```

请注意，注册有点复杂，因为您需要非常具体的解决方案。

现在在 XML 配置中，注册该模块：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section
      name="autofac"
      type="Autofac.Configuration.SectionHandler, Autofac.Configuration"/>
  </configSections>
  <autofac>
    <modules>
      <module type="EmailModule, MyAssembly" />
    </modules>
  </autofac>
</configuration> 
```

当您想要切换配置时，注册一个不同的模块而不是摆弄特定的组件注册表。

*代码免责声明：我是从内存中编写语法，我不是编译器，所以你可能需要做一些调整*......但前提是成立的。**隔离模块中的复杂性，然后注册您的模块。**

# ruby-on-rails - 单个字段的多种形式的身份验证

> ID：10635360
> 
> 赞同：0
> 
> 时间：2012-05-17T12:00:12.243
> 
> 标签：ruby-on-rails, ruby

我目前有一个 Rails 项目，旨在让客户以两种不同的方式验证他们的帐户。他们可以使用存储在数据库中的条形码，也可以使用电话号码。我想合并这两个字段，以便有一个字段允许两个身份验证来源。这是我的两个字段的代码。

```
def User.authenticate(barcode)
  if user = find_by_barcode(barcode)
    user
  end
end

def User.authenticate2(phone_number)
  if user = find_by_phone_number(phone_number)
    user
  end
end 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:04:45.017

为了简化代码，我建议使用这个：

```
def User.authenticate(barcode_or_phone_number)
  find_by_barcode(barcode_or_phone_number) || find_by_phone_number(barcode_or_phone_number)
end 
```

但是它可能会导致查询 2 个 sql。所以你可以考虑这个：

```
def User.authenticate(barcode_or_phone_number)
  where("users.barcode = ? OR users.phone_number = ?", barcode_or_phone_number, barcode_or_phone_number).first
end 
```

# c++ - How to use C++11 designing a system which pulls data from sources

> ID：10635365
> 
> 赞同：3
> 
> 时间：2012-05-17T12:00:34.757
> 
> 标签：c++, multithreading, design-patterns, c++11

This question comes from: [C++11 thread doesn't work with virtual member function](https://stackoverflow.com/questions/10634603/c11-thread-doesnt-work-with-virtual-member-function)

As suggested in a comment, my question in previous post may not the right one to ask, so here is the original question:

I want to make a capturing system, which will query a few sources in a constant/dynamic frequency (varies by sources, say 10 times / sec), and pull data to each's queues. while the sources are not fixed, they may add/remove during run time.

and there is a monitor which pulls from queues at a constant freq and display the data.

So what is the best design pattern or structure for this problem.

I'm trying to make a list for all the sources pullers, and each puller holds a thread, and a specified pulling function (somehow the pulling function may interact with the puller, say if the source is drain, it will ask to stop the pulling process on that thread.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:07:29.053

除非您查询源的操作是阻塞的（或者您有*很多*），否则您*不需要*为此使用线程。我们可以从一个`Producer`可以与同步或异步（线程）调度一起使用的开始：

```
template <typename OutputType>
class Producer
{
    std::list<OutputType> output;

protected:
    int poll_interval; // seconds? milliseconds?
    virtual OutputType query() = 0;

public:
    virtual ~Producer();

    int next_poll_interval() const { return poll_interval; }
    void poll() { output.push_back(this->query()); }

    std::size_t size() { return output.size(); }
    // whatever accessors you need for the queue here:
    // pop_front, swap entire list, etc.
}; 
```

现在我们可以从中派生并在每个子类型中`Producer`实现该方法。`query`您可以`poll_interval`在构造函数中设置并保持不变，或者在每次调用时更改它`query`。有你的通用生产者组件，不依赖于调度机制。

```
template <typename OutputType>
class ThreadDispatcher
{
    Producer<OutputType> *producer;
    bool shutdown;
    std::thread thread;

    static void loop(ThreadDispatcher *self)
    {
        Producer<OutputType> *producer = self->producer;

        while (!self->shutdown)
        {
            producer->poll();
            // some mechanism to pass the produced values back to the owner
            auto delay = // assume millis for sake of argument
                std::chrono::milliseconds(producer->next_poll_interval());
            std::this_thread::sleep_for(delay);
        }
    }

public:
    explicit ThreadDispatcher(Producer<OutputType> *p)
      : producer(p), shutdown(false), thread(loop, this)
    {
    }

    ~ThreadDispatcher()
    {
        shutdown = true;
        thread.join();
    }

    // again, the accessors you need for reading produced values go here
    // Producer::output isn't synchronised, so you can't expose it directly
    // to the calling thread
}; 
```

这是一个简单的调度程序的速写，它将在一个线程中运行你的生产者，无论你经常要求它轮询它。请注意，未显示将生成的值传递回所有者，因为我不知道您想如何访问它们。

另请注意，我没有同步对关闭标志的访问 - 它可能应该是原子的，但它可能会通过您选择对生成的值进行的任何操作来隐式同步。

有了这个组织，编写同步调度程序来在单个线程中查询多个生产者也很容易，例如从选择/轮询循环中，或者使用类似 Boost.Asio 和每个生产者的截止时间计时器。

# c++ - OpenGL - Explain glutInitDisplayMode()

> ID：10635367
> 
> 赞同：4
> 
> 时间：2012-05-17T12:00:50.240
> 
> 标签：c++, opengl, 3d, glut, glu

Explain in detail what functionality is provided by the settings in the line:

```
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH); 
```

so far i know that this line will initialize the display mode by requesting a double buffere setting, setting a RGBA window mode and request a depth buffer but how can i explain this more simply. i want to describe each argument in simple English

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T18:19:55.170

```
glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH); 
```

`glutInitDisplayMode`- 初始化显示模式

`GLUT_DOUBLE`- 允许在双缓冲窗口上显示

`GLUT_RGBA`- 显示颜色（红、绿、蓝）和 alpha

`GLUT_DEPTH`- 允许深度缓冲区

[http://www.opengl.org/documentation/specs/glut/spec3/node12.html](http://www.opengl.org/documentation/specs/glut/spec3/node12.html)

# c++ - Omit the msvcr100.dll when developing in C/C++ for windows?

> ID：10635369
> 
> 赞同：7
> 
> 时间：2012-05-17T12:00:56.150
> 
> 标签：c++, c, winapi, visual-c++, msvcr100.dll

Is it possible to develop in C/C++ for windows and not to link against the msvcr100.dll?

I understand that this is the standard c library for windows, but I was wondering how all the programs on my computer could run if I hadn't Visual Studio or the Redistributable package installed?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T13:33:24.050

在解决方案资源管理器窗口、属性、C/C++、代码生成、运行时库设置中右键单击您的项目。将其更改为 /MTd。重复发布配置，选择 /MT

您现在将链接 CRT 的静态版本，您使用的任何函数都会直接链接到您的 EXE，而不是在运行时从 msvcr100.dll 获取它们。因此，您不再需要将 DLL 与您的程序一起部署。

如果您创建自己的 DLL，请避免使用此选项。然后，这些 DLL 和 EXE 使用完全相同的 CRT 就变得很重要，因此它们将共享相同的 CRT 状态和相同的堆。因为如果他们不这样做，那么在将需要从一大块代码释放到另一块代码的 C++ 对象或指针传递时，您将遇到麻烦。如果你幸运的话是 AccessViolation，如果不是的话，就是内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:18:30.420

如果您将项目限制为仅使用 C 编程语言/库，那么您只能链接到 MSVCRT.lib，它在自 Windows XP SP3 以来的任何 Windows 版本中完全被烘焙。

这意味着，您只能链接到 MSVCRT 中的标准 C 函数，而不是依赖于 MSVCR100.DLL（或任何其他 Visual Studio DLL）。顺便说一句，[这种技术](http://www.mail-archive.com/coapp-developers@lists.launchpad.net/msg00476.html)用于微软旗下开发的[CoApp](http://coapp.org)项目，所以我认为在你这样的情况下它是一个很好的实践。

只需下载[Windows DDK](http://bit.ly/95Bl28)并仅链接`$(DDKInstallPath)lib\Crt\$(DDKPlatform)\msvcrt.lib`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:25:22.137

在 Windows 上，我怀疑是否有可能创建一个不以某种方式使用 CRT 的重要程序。

可以在不链接到 msvcrXXX.dll 的情况下使用 CRT - 只需链接到静态库即可。但是要解决您的问题：

> 如果我没有安装 Visual Studio 或 Redistributable 包，我计算机上的所有程序如何运行？

如果您 PC 上的程序链接到 msvcrtxxx.dll，那么它们不能。Sinmply，可能在您出现之前，特定程序所需的 redist 就已经安装在您的 PC 上。或者至少是程序所需的 redist 部分。

# c# - jEditable custom editor, getting data from server to create dropdownlist

> ID：10635370
> 
> 赞同：1
> 
> 时间：2012-05-17T12:00:57.040
> 
> 标签：c#, jquery, asp.net-mvc-3, datatable

Following from this article, I'm trying to use a dropdownlist when I'm editing one of the columns in the DataTable to which I have applied the jquery datatable and jEditable plugin.

In the initialization of jEditable:

```
$('#myDataTable').dataTable().makeEditable({
"aoColumns": [
{
    //Empty object is used for the default editable settings
},
null,//null for read-only columns
{
    indicator: 'Saving...',
    tooltip: 'Click to select town',
    loadtext: 'loading...',
    type: 'select',
    onblur: 'submit',
    loadurl : 'GetSelectList',
    loadtype : 'GET'
}
]
}); 
```

It calls the GetSelectList action in the server, but I don't know what type of data I should return to the client. I have a Category model which has id and name. I can get them by GetCategories function. I need the final selectlist to be something like:

```
<select name="category" id="country" rel="6">
                                    <option value="1">cate1</option>
                                    <option value="2">cate2</option>
                                    <option value="3">cate3</option>
                                    </select> 
```

I searched the net, and the only thing that I have found was an article in php, which is Greek to me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T23:59:16.773

我有同样的问题。我不得不修改可编辑的代码来解决它。

首先，我将服务器中的列表重新作为 SelectListItem 的列表（具有以下属性：Value、Text、Selected）：

```
listOfEentities.Select(c => new SelectListItem { Text = c.Name, Value = c.Id.ToString() }); 
```

然后，更改 jeditable 代码（在定义类型选择的部分，更改元素内容，如下所示）：

```
select: {
           element : function(settings, original) {
                var select = $('<select />');
                $(this).append(select);
                return(select);
            },
            content : function(data, settings, original) {
                /* If it is string assume it is json. */
                if (String == data.constructor) {      
                    eval ('var json = ' + data);
                } else {
                /* Otherwise assume it is a hash already. */
                    var json = data;
                }
                var selected = '';
                for (var i in json) {
                    var item = json[i];
                    if (item.Selected)
                        selected = item.Value;
                    var option = $('<option />').val(item.Value).append(item.Text);
                    $('select', this).append(option);    
                }                    
                /* Loop option again to set selected. IE needed this... */ 
                if (selected != "") {
                    $('select', this).children().each(function () {
                        if ($(this).val() == selected ||
                            $(this).text() == $.trim(original.revert)) {
                            $(this).attr('selected', 'selected');
                        }
                    });
                }
            }
        } 
```

# c# - 如何在 WPF 中使用 ContextMenu UserControl？

> ID：10635382
> 
> 赞同：7
> 
> 时间：2012-05-17T12:01:51.350
> 
> 标签：c#, wpf, mvvm

我有一个这样的用户控件：

```
<UserControl x:Class="MyApp.UserControls.MyContextMenu"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d"
             ContextMenuOpening="OnContextMenuOpening"
             d:DesignHeight="300" d:DesignWidth="300">

    <UserControl.ContextMenu>
        <ContextMenu>
        ...
        </ContextMenu>
    </UserControl.ContextMenu>
</UserControl> 
```

我的问题是：如何将上下文菜单用于数据网格之类的东西：

```
<DataGrid ContextMenu="{usercontrols:MyContextMenu}" 
```

不幸的是，这不起作用，因为指定的值不正确并且预期为`ContextMenu`.

**注意：**我需要在几个地方重复使用我的上下文菜单，所以我把它放在了自己的文件中。另外，我需要能够收听`OnContextMenuOpening`事件，因为打开时的菜单需要对菜单做一些工作，并且遗憾的是，上下文菜单不会触发事件：[http ://connect.microsoft.com/VisualStudio/feedback /details/353112/contextmenu-opening-event-doesnt-fire-properly](http://connect.microsoft.com/VisualStudio/feedback/details/353112/contextmenu-opening-event-doesnt-fire-properly)

> “ContextMenu 本身是一个 FrameworkElement 派生类，但不会从作为源打开的上下文菜单引发此事件。该事件是从作为属性“拥有”上下文菜单的元素引发的，并且仅在用户尝试在 UI 中打开上下文菜单。”

这个事件问题是我为用户控件放置菜单的原因——以便用户控件可以获取事件并完成工作。

**更新：**我试图将它作为根元素并扩展上下文菜单：

![在此处输入图像描述](../Images/59723a24f4494b348f18703b8a27f562.png)

和代码隐藏：

![在此处输入图像描述](../Images/774107c6e732df7f46bda55325bb78ca.png)

但我得到：`ContextMenu cannot have a logical or visual parent`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:08:47.703

无论您如何调用 UserControl，它都不是 ContextMenu。您必须从[ContextMenu](http://msdn.microsoft.com/en-us/library/system.windows.controls.contextmenu.aspx)而不是 UserControl 派生：

```
<ContextMenu x:Class="MyApp.MyContextMenu"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <MenuItem Header="Item 1"/>
    <MenuItem Header="Item 2"/>
    ...
</ContextMenu> 
```

和

```
public partial class MyContextMenu : ContextMenu
{
    public MyContextMenu()
    {
        InitializeComponent();
    }
} 
```

但是你为什么要这样做呢？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T12:09:01.823

尝试像这样定义它：

```
<DataGrid.Resources>
    <ContextMenu x:Key="DgContextMenu">
      ...
    </ContextMenu>
</DataGrid.Resources> 
```

并在使用后像

```
<DataGrid ContextMenu="{StaticResource DgContextMenu} 
```

*应该*工作。

# php - PHP中的延迟加载类

> ID：10635386
> 
> 赞同：7
> 
> 时间：2012-05-17T12:02:07.700
> 
> 标签：php

我想延迟加载类但没有成功

```
<?php

class Employee{

    function __autoload($class){

        require_once($class);
    }

    function display(){

        $obj = new employeeModel();
        $obj->printSomthing();
    }
} 
```

现在当我做这个

```
function display(){
            require_once('emplpyeeModel.php');
            $obj = new employeeModel();
            $obj->printSomthing();
        } 
```

它有效，但我想延迟加载类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T12:08:30.647

**__autoload**是一个独立的函数，而不是一个类的方法。您的代码应如下所示：

```
<?php

class Employee{

    function display(){

        $obj = new employeeModel();
        $obj->printSomthing();
    }
}

function __autoload($class) {
    require_once($class.'.php');
}

function display(){
    $obj = new Employee();
    $obj->printSomthing();
} 
```

**更新**

示例取自 php 手册：

```
<?php
function __autoload($class_name) {
    include $class_name . '.php';
}

$obj  = new MyClass1();
$obj2 = new MyClass2(); 
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T13:56:03.263

稍微改变`Employee`一下：

```
class Employee {

   public static function __autoload($class) {
      //_once is not needed because this is only called once per class anyway,
      //unless it fails.
      require $class;
   }

   /* Other methods Omitted */
}
spl_autoload_register('Employee::__autoload'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:07:52.597

首先，如果最好使用[spl_autoload_register()](http://nl.php.net/manual/en/function.spl-autoload-register.php)（检查 php 手册中的自动加载说明）。

然后回到你的问题；仅当 display() 函数与employeeModel 位于同一目录中时，它才会起作用。否则，使用绝对路径（另见[include()](http://nl.php.net/manual/en/function.include.php)和[include_path 设置](http://nl.php.net/manual/en/ini.core.php#ini.include-path)

# html - phonegap : html5 数据库在操作系统更新或同步时被擦除

> ID：10635391
> 
> 赞同：0
> 
> 时间：2012-05-17T12:02:20.760
> 
> 标签：html, cordova, sqlite

我创建了一个使用 html5 数据库进行存储的 phonegap 应用程序。更新操作系统或在某些情况下同步手机会擦除数据库。不好，很明显。

为什么会发生这种情况，我该如何防止它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:52:51.353

我认为您在升级 iOS 5.1 时遇到了这个问题。

[https://issues.apache.org/jira/browse/CB-347?focusedCommentId=13261034&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13261034](https://issues.apache.org/jira/browse/CB-347?focusedCommentId=13261034&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13261034)

它已在 1.7.0 版中修复。

# java - Java Junit 测试 HTTP POST 请求

> ID：10635394
> 
> 赞同：14
> 
> 时间：2012-05-17T12:02:34.923
> 
> 标签：java, http, testing, post, junit

我需要在不改变方法本身的情况下测试以下方法。该方法向服务器发出 POST 方法。但我需要制作一个独立于服务器的测试用例。

在将其重定向到本地文件之前，我测试了类似的方法。但是为此，我将协议作为文件，主机名作为 localhost，端口作为-1。

我的问题是这个方法做了一个帖子并转换为 HttpURLConnection 和 wr = new DataOutputStream(conn.getOutputStream()); 无法通过 http 处理本地 txt 文件。

//构造函数

```
public HTTPConnector(String usr, String pwd, String protocol,
            String hostname, int port) {
        this.usr = usr;
        this.pwd = pwd;
        this.protocol = protocol;
        this.hostname = hostname;
        this.port = port;

        // connect();
    } 
```

//我需要测试的方法

```
public String doPost(String reference, String data) throws IOException {
        URL url = null;
        HttpURLConnection conn = null;
        BufferedReader rd = null;
        DataOutputStream wr = null;
        InputStream is = null;
        String line = null;
        StringBuffer response = null;

        url = new URL(protocol, hostname, port, reference);
        conn = (HttpURLConnection) url.openConnection();

        conn.setRequestMethod("POST");

        conn.setRequestProperty("Authorization", "Basic dGVzdDphc2Rm");
        conn.setRequestProperty("Content-Type", "application/xml");

        conn.setUseCaches(false);
        conn.setDoInput(true);
        conn.setDoOutput(true);

        // Send response
        wr = new DataOutputStream(conn.getOutputStream());
        wr.writeBytes(data);
        wr.flush();
        wr.close();

        // Get response
        is = conn.getInputStream();
        rd = new BufferedReader(new InputStreamReader(is));
        response = new StringBuffer();
        while ((line = rd.readLine()) != null) {
            response.append(line);
            response.append('\r');
        }
        rd.close();
        return response.toString();
    } 
```

//我可以测试的方法

```
public String doGet(String reference) throws IOException {
        connect();
        URL url = new URL(protocol, hostname, port, reference);
        InputStream content = (InputStream) url.getContent();

        BufferedReader xml = new BufferedReader(new InputStreamReader(content));
        return xml.readLine();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T12:42:50.813

这是一个示例测试。请注意，我所做的断言是出于演示目的，您需要适应您的需求。

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({ toTest.class, URL.class, HttpURLConnection.class })
public class soTest {
    /**
     * test response.
     */
    private static final String TEST_RESPONSE = "test\nresponse";

    /**
     * test data.
     */
    private static final String DATA = RandomStringUtils.randomAscii(125);

    /**
     * test port.
     */
    private static final int PORT = 8080;

    /**
     * test hosts.
     */
    private static final String HOSTNAME = "hostname";

    /**
     * test protocol.
     */
    private static final String PROTOCOL = "http";

    /**
     * test reference.
     */
    private static final String REFERENCE = "REFERENCE";

    /**
     * URL mock.
     */
    private URL url;

    /**
     * HttpURLConnection mock.
     */
    private HttpURLConnection connection;

    /**
     * Our output.
     */
    private ByteArrayOutputStream output;

    /**
     * Our input.
     */
    private ByteArrayInputStream input;

    /**
     * Instance under tests.
     */
    private toTest instance;

    @Before
    public void setUp() throws Exception
    {
        this.url = PowerMockito.mock(URL.class);
        this.connection = PowerMockito.mock(HttpURLConnection.class);

        this.output = new ByteArrayOutputStream();
        this.input = new ByteArrayInputStream(TEST_RESPONSE.getBytes());
        this.instance = new toTest(PROTOCOL, HOSTNAME, PORT);

        PowerMockito.whenNew(URL.class).withArguments(PROTOCOL, HOSTNAME, PORT, REFERENCE).thenReturn(this.url);
    }

    @Test
    public void testDoPost() throws Exception
    {
        PowerMockito.doReturn(this.connection).when(this.url).openConnection();
        PowerMockito.doReturn(this.output).when(this.connection).getOutputStream();
        PowerMockito.doReturn(this.input).when(this.connection).getInputStream();

        final String response = this.instance.doPost(REFERENCE, DATA);

        PowerMockito.verifyNew(URL.class);
        new URL(PROTOCOL, HOSTNAME, PORT, REFERENCE);

        // Mockito.verify(this.url).openConnection(); // cannot be verified (mockito limitation) 
        Mockito.verify(this.connection).getOutputStream();
        Mockito.verify(this.connection).setRequestMethod("POST");
        Mockito.verify(this.connection).setRequestProperty("Authorization", "Basic dGVzdDphc2Rm");
        Mockito.verify(this.connection).setRequestProperty("Content-Type", "application/xml");
        Mockito.verify(this.connection).setUseCaches(false);
        Mockito.verify(this.connection).setDoInput(true);
        Mockito.verify(this.connection).setDoOutput(true);
        Mockito.verify(this.connection).getInputStream();

        assertArrayEquals(DATA.getBytes(), this.output.toByteArray());
        assertEquals(TEST_RESPONSE.replaceAll("\n", "\r") + "\r", response);
    }
}

@Data
public class toTest {
    private final String protocol, hostname;

    private final  int port;

    public String doPost(String reference, String data) throws IOException
    {
        // your method, not modified
    }
} 
```

依赖项：

*   公共语言 2.5
*   powermock-api-mockito 1.4.11
*   powermock-module-junit4 1.4.11
*   六月 4.10
*   lombok 0.11.0 测试类

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T07:57:51.293

如果您没有机会重构被测方法，那么一种新颖的方法是模拟`HttpUrlConnection`它使用的方法。乍一看，这似乎很困难，因为`HttpUrlConnection`没有作为参数传入。但是，您可以通过控制从`url.openConnection`.

这由`java.net.URL`为您传递给构造函数的协议注册的协议处理程序控制。诀窍是注册一个新的协议处理程序（有关详细信息，请参阅[Java - 注册自定义 URL 协议处理程序](https://stackoverflow.com/questions/6278299/java-registering-custom-url-protocol-handlers)）。

您的新协议处理程序应该返回一个模拟`HttpUrlConnection`，然后您可以在测试中使用它。

# javascript - 文件上传 ExtJS 4

> ID：10635401
> 
> 赞同：0
> 
> 时间：2012-05-17T12:03:06.373
> 
> 标签：javascript, file-upload, extjs4

我有这个领域：

```
{
    xtype: 'filefield',
    labelAlign: 'top',
    id: 'fileAllegato',
    hidden: true,
    margin: '0 15 5 10',
    fieldLabel: 'Allegato',
    allowBlank: false,
    blankText:'Il campo &egrave obbligatorio!',
    typeAhead: true,
    selectOnFocus: true,   
    anchor: '100%',
    buttonText: 'Allega'
} 
```

当我加载文件时，我想将它保存在 db 中。该字段不属于表单，因此我无法提交。我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:09:27.303

您可以创建一个虚拟表单（甚至不显示它）。就像是

```
var f = Ext.create('Ext.form.Panel', {
   items: [ your filefield item ]
}) 
```

然后提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T12:17:20.883

```
items: [{
    xtype: 'filefield',
    name: 'file',
    fieldLabel: 'File',
    labelWidth: 50,
    anchor: '100%',
    buttonText: 'Select File...'
}], 
```

现场演示在[这里](http://ext4all.com/post/extjs-4-upload-to-asp-net-mvc-demo.html)

# asp.net-mvc - Orchard 中的驱动程序和控制器是否相同？

> ID：10635403
> 
> 赞同：-1
> 
> 时间：2012-05-17T12:03:22.020
> 
> 标签：asp.net-mvc, naming-conventions, orchardcms

我正在 Orchard CMS 中创建一个新的小部件。我这样做的方法是首先添加一个 Route 和 Controller，然后通过在 Route 中定义的 url 上运行代码来尝试该功能，例如`http://localhost:30320/Index` My Routes.cs 已设置，因此它将这个请求路由到指定的控制器和东西是发生在屏幕上。这一切都很好。

现在我对结果感到满意，我尝试将所有这些都放在一个新的小部件中。为此，我创建了新的 Migrations 类来设置小部件。这相当简单，现在小部件已添加到主页层。

我遇到的事情是控制器不再执行。不是很奇怪，因为我没有设置任何指定控制器应该执行的路由。我想知道，我是否应该将 Controller 逻辑移动到 Driver 方法，以便 View 仍然可以获得必要的信息？

我现在拥有的驱动程序如下所示：

```
public class FrontpageDrivers : ContentPartDriver<FrontpageModelPart>
{
    protected override DriverResult Display(FrontpageModelPart part, string displayType, dynamic shapeHelper)
    {
        //return base.Display(part, displayType, shapeHelper);
        if (displayType.StartsWith("Detail"))
            return ContentShape("Parts_Index", () => shapeHelper.Parts_Index(
                                                                    LatestPostCollection: part.LatestPostCollection,
                                                                    TopRatedPostCollection: part.TopRatedPostCollection,
                                                                    TotalMonthCollection: part.TotalMonthCollection,
                                                                    ContentPart: part
                                                                    ));
        return null;
    }
} 
```

需要执行的 PartsController 方法如下所示：

```
[HttpGet]
public ActionResult Detail()
{
    //Do something to get blogposts
    var getter = new GetBlogPost(_blogService, _blogPostService, _votingService);
    getter.Initialize();

    var latestPosts = getter.GetLatestPosts();
    var highestRankedPosts = getter.GetHighestRankedPosts();
    var archiveData = getter.GetTotalPostsPerMonth();

    var viewModel = new FrontpageModelPart();
    viewModel.LatestPostCollection = latestPosts;
    viewModel.TopRatedPostCollection = highestRankedPosts;
    viewModel.TotalMonthCollection = archiveData;

    return View("Index", viewModel);
} 
```

我尝试将方法重命名为 Index 和 Detail，两者都不起作用。显示的视图是`/Views/Parts/Index.cshtml`。如果我在文件中放入一些静态文本，我可以看到这个视图正在正确呈现。

那么，我应该将控制器逻辑移动到驱动程序，还是我忘记了设置中的某些内容？

注意：我已经准备好放置、模块、迁移和处理程序。

**编辑**：如果我使用这段代码，一切都很好：

```
protected override DriverResult Display(FrontpageModelPart part, string displayType, dynamic shapeHelper)
{
    var controller = new PartsController(Services, _blogService, _blogPostService, _votingService);
    part = controller.GetIndexViewModel();

    if (displayType.StartsWith("Detail"))
        return ContentShape("Parts_Index", () => shapeHelper.Parts_Index(
                                                                LatestPostCollection: part.LatestPostCollection,
                                                                TopRatedPostCollection: part.TopRatedPostCollection,
                                                                TotalMonthCollection: part.TotalMonthCollection,
                                                                ContentPart: part
                                                                ));
    return null;
} 
```

尽管这工作得很好，但对我来说就像是“黑客”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:49:19.990

当您想要接管出现在内容区域中的所有内容时使用控制器，但返回一个形状结果，以便主题、小部件等仍然可以加入。这就是您的控制器无法做到的。

# scala - 在 Scala 中定义具有多个隐式参数的函数

> ID：10635406
> 
> 赞同：96
> 
> 时间：2012-05-17T12:03:42.833
> 
> 标签：scala

如何定义具有多个隐式参数的函数。

```
def myfun(arg:String)(implicit p1: String)(implicit p2:Int)={} // doesn't work 
```

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-05-17T12:08:57.810

它们都必须放在一个参数列表中，并且该列表必须是最后一个。

```
def myfun(arg:String)(implicit p1: String, p2:Int)={} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-02T03:40:35.667

实际上有一种方法可以完全满足 OP 的要求。有点令人费解，但它有效。

```
class MyFunPart2(arg: String, /*Not implicit!*/ p1: String) {
  def apply(implicit p2: Int) = {
    println(arg+p1+p2)
    /* otherwise your actual code */
  }
}

def myFun(arg: String)(implicit p1: String): MyFunPart2= {
  new MyFunPart2(arg, p1)
}

implicit val iString= " world! "
implicit val iInt= 2019

myFun("Hello").apply
myFun("Hello")(" my friend! ").apply
myFun("Hello")(" my friend! ")(2020)

//  Output is:
//      Hello world! 2019
//      Hello my friend! 2019
//      Hello my friend! 2020 
```

在 Scala 3（又名“Dotty”，虽然这是编译器的名称）中，可以直接返回带有隐式参数的函数值，而不是返回辅助*MyFunPart2对象。*这是因为 Scala 3 支持“隐式函数”（即“参数隐式”现在是函数类型的一部分）。多个隐式参数列表变得如此容易实现，以至于语言可能会直接支持它们，尽管我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-11T12:29:14.520

还有另一种（IMO 更简单、更灵活）的方法可以达到类似的效果：

```
// Note the implicit is now a Tuple2
def myFun(arg: String)(implicit p: (String, Int) ): Unit = {
  println(arg + p._1 + p._2)
  /*otherwise your actual code*/
}

// These implicit conversion are able to produce the basic implicit (String,Int) Tuples
implicit def idis(implicit is: String, ii: Int): (String,Int)= (is,ii)
implicit def idi(s: String)(implicit ii: Int): (String,Int)= (s,ii)

// The basic implicit values for both underlying parameters
implicit val iString = " world! "
implicit val iInt = 2019

myFun("Hello")
myFun("Hello")(" my friend! ")
myFun("Hello")(" my friend! ",2020)

// Output is:
//     Hello world! 2019
//     Hello my friend! 2019
//     Hello my friend! 2020

// If we add the following implicit, 
implicit def ids(i: Int)(implicit is: String)= (is,i)

// we can even do
myFun("Hello")(2020)

// , and output is:
//     Hello world! 2020 
```

使用元组作为参数的底层表示不是一个好主意，因为隐式转换可能会干扰其他用途。实际上，对任何标准类型（包括库类型）的隐式转换通常会给任何重要的应用程序带来麻烦。解决方案是创建一个专用案例类来保存参数而不是元组。一个重要的优点是它们可以被赋予比 _1 和 _2 更有意义的名称。

# linux - 我应该在时间功能上使用“真实”还是“用户+系统”？

> ID：10635409
> 
> 赞同：2
> 
> 时间：2012-05-17T12:03:51.147
> 
> 标签：linux, time

当您在 Linux 上使用 time 命令时，我了解“real”、“user”和“sys”之间的区别，正如另一个线程中所解释的那样：[What do 'real', 'user' and 'sys' mean in the output时间（1）？](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1)

现在我正在对 Python、Java 和 C 的性能进行一个小的比较，我想知道我应该使用哪个报告。

“用户+系统”似乎是更现实的一个，但是在将 C 与 Java 进行比较时，这不会导致问题，例如，因为 JVM 知道如何优化多处理器/线程的代码，而 GCC 不知道？

另外，如果我确保没有其他繁重的进程在后台运行，“真实”是否足够现实？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:49:06.647

答案将取决于您所说的“(Python|Java|C) 的性能”是什么意思。在许多情况下，用户真正关心的是经过的挂墙时间，对应于`real`. 假设您以多种语言以合理的方式编写了一段代码，并且其中一种语言可以自动并行化它以使用您的 4 个内核。如果这使用户等待回复的时间更少，那么我说这是一个公平的比较。当然它对那台特定的机器有效，单核机器上的结果可能会有所不同。如果一个应用程序导致页面错误，那么它会让用户等待。对于用户来说，如果您说如果他们必须等待更长的时间，应用程序需要更少的周期，这对他们没有帮助。

无论您采用何种测量方式，请务必多次重复测试，因为运行之间可能会有很多变化。由于 JIT 编译，像 Java 这样的语言还需要一个程序在达到最高速度之前运行一段时间（但同样：如果您的程序根据定义非常短并且不允许 Java 虚拟机翘曲，那么它就是对 Java 来说太糟糕了）。测试性能非常棘手，即使是经验丰富的开发人员也容易误解结果或测量的结果不是他们真正想要的。

# mysql - 如何一次将批量数据插入数据库？

> ID：10635414
> 
> 赞同：1
> 
> 时间：2012-05-17T12:04:33.453
> 
> 标签：mysql

我创建了一个存储过程。我用大量数据（大约 1L 行）获取游标。之后，我在其中调用另一个程序来执行与所需数据相关的所有计算。我创建临时表并尝试在其中插入此计算数据。但是需要9.5分钟左右的时间太长了。我想知道如何通过使用最少的“INSERT”查询来插入批量数据，因为 1L 插入查询会导致最差的性能。谁能帮我？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:07:47.153

您可以使用以下 SQL 语句进行批量插入：

```
INSERT INTO TABLE_A (A, B, C, D) VALUES
(1,1,1,1),
(2,2,2,2),
(3,3,3,3),
(4,4,4,4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:15:41.720

你的问题有点含糊，但你可以使用 BULK 将数据加载到 mysql 中

```
load data infile... 
```

检查以下链接：

*   [http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)
*   [MySQL加载数据infile - 加速？](https://stackoverflow.com/questions/2463602/mysql-load-data-infile-acceleration/2504211#2504211)

如果您需要在加载期间处理数据，最好先将数据批量加载到临时表中，然后针对它运行一些存储过程来处理并填充主表。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:56:59.230

您也可以将记录插入到内存表中。在完成插入内存表后，以下代码可以从内存表中插入许多行。

```
INSERT INTO TABLE_A (A, B, C, D)
SELECT A,B,C,D FROM INMEMORY_TABLE

DELETE FROM INMEMORY_TABLE 
```

# optimization - SAS：数据步骤和附加行

> ID：10635415
> 
> 赞同：0
> 
> 时间：2012-05-17T12:04:34.343
> 
> 标签：optimization, dataset, sas

我有一个数据步骤。

```
 data One;
      set Two;
      /*some code*/
   run; 
```

如何在新表的最后一行之后添加额外的行？

有可能做到最优吗？（`One`表可能有很多行〜100k - 10M）

谢谢！（是`TOTAL`行，是的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:13:12.490

只需将总行附加到您的数据集。

```
data one;
 set Two;
 /* some code * /
run;

data total;
 /* some code or use a proc to generate your totals */
run;

data final;
 set one total;
run; 
```

将总行附加到数据集之一。

如果您正在生成汇总行/总计，我建议您考虑使用`proc report`. `report`有一个选项可以输出包含您在过程中创建的任何摘要、分组等的数据集。它可以是一个非常强大的`proc`.

像这篇[SUGI Paper](http://support.sas.com/resources/papers/proceedings12/242-2012.pdf)这样的东西可能对你开始有用。

*编辑：根据评论*

为大家总结：

```
 proc report data = sashelp.iris out=summary nowd;
   col species sepallength sepalwidth petallength petalwidth;

   rbreak after / summarize;
 run; 
```

总结每个物种组并得到总线

```
 proc report data = sashelp.iris out=summary nowd;
   col species sepallength sepalwidth petallength petalwidth;
   define species / group;
   rbreak after / summarize;
 run; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T09:40:44.217

```
data one;
  set two end=eof ;
  /* do stuff */
  output ;
  if eof then do ;
    /* do extra row stuff */
    output ;
  end ;
run ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T09:19:44.993

我不知道为什么第一个答案谈到“总数”。就地更新表的正确方法是：

```
data newdata;
/* some code to generate your data */
proc append base=olddata data=newdata;
run; 
```

这比进行任何需要扫描数据集的修改要快得多。

做同样事情的一个有趣的方法是：

```
data newdata;
/* some code to generate your data */
data olddata;
modify olddata newdata;
by mykey;
run; 
```

这会在不重写大型数据集的情况下进行就地更新。它使用列键来识别匹配的行，并允许您在不重写数据集的情况下更新行，并在末尾附加那些未找到的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T11:44:04.353

补充一下我的想法，Chris J 提供的解决方案是一个很好的解决方案，因为它只需要通过数据即可。但是，执行类似 proc summary 之类的操作，然后将结果附加到数据集的末尾更容易编码，这一切都归结为每种方法的效率。如果您想测试 Chris J 的解决方案，那么这里有一个使用 sashelp.class 数据集的示例。这可能是大型数据集的最快解决方案。

```
/* count number of numeric variables and assign to macro variable */
proc sql noprint;
select count(*) into :num_ct from dictionary.columns
where libname='SASHELP' and memname='CLASS' and type='num';
quit;

%put numeric variables = &num_ct.;

/* sum all numeric variables and output at the end as a TOTAL row */
data class;
set sashelp.class end=eof;
array numvar{&num_ct.} _numeric_;
array sumvar{&num_ct.} _temporary_;
do i=1 to &num_ct.;
    sumvar{i}+numvar{i};
end;
output;
if eof then do;
    call missing(of _all_);
    name='TOTAL';
    do i=1 to &num_ct.;
    numvar{i}=sumvar{i};
    end;
output;
end;
drop i;
run; 
```

# android - 在同一实例中启动服务和活动

> ID：10635424
> 
> 赞同：0
> 
> 时间：2012-05-17T12:05:02.623
> 
> 标签：android, android-layout

从一个活动的 onClick 事件也需要启动一个活动和一个服务。我已经实现了。但问题是服务正在启动但活动未正确加载。只有黑屏来了。抱歉消息来了“应用程序没有响应”并要求我等待或强制关闭它。

```
@Override
        public void onClick(View arg0) {
            startService(new Intent(NewUIM.this, MyService.class));
            Intent i = new Intent(NewUIM.this, NewUI.class);
            startActivity(i);

            finish();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:10:26.980

`AsynTask`在`Service`运行时实施并实施`Activity`. 有关更多信息，请查看链接：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# android - android中xml布局命名的条件是什么？

> ID：10635427
> 
> 赞同：-1
> 
> 时间：2012-05-17T12:05:26.500
> 
> 标签：android, android-layout

当我们为**android**`xml`项目的布局文件夹中的文件命名时，我们必须考虑到什么。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:10:22.070

```
 File name must contain only lowercase a-z, 0-9, or _. 
```

*   只是`a-z`，请注意不是资本......和`white-space not allowed`

*   名称必须以字符开头。

*   仅允许名称`_`符号**

# php - 如何使用我的 GMAIL 帐户使用 PHP 发送电子邮件？

> ID：10635432
> 
> 赞同：0
> 
> 时间：2012-05-17T12:06:03.970
> 
> 标签：php, smtp, gmail, sendmail

在搜索了几天后，我遇到了这个问题： [Send email using the GMail SMTP server from a PHP page](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

似乎正是我一直在努力实现的目标，但我没有成功，也许是因为我不知道如何使用 HTML 来处理这段代码？

出于测试目的，我在粘贴的链接上尝试了最高投票问题的代码，并制作了一个按钮，当您单击它时，它将转到 PHP 文件（不成功）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:11:06.870

你不能只用 PHP 来做，因为`mail()`不支持身份验证。您必须使用邮件库。
我推荐[SwiftMailer](http://swiftmailer.org/)，它易于使用，支持许多功能（身份验证、发送 HTML 邮件、附件等），并且有很好的文档记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:20:37.883

您还需要通过 tsl/ssl 发送，这就是您的邮件功能无法正常工作的原因。

tsl/ssl 的解决方案已经存在：[Using php's swiftmailer with gmail](https://stackoverflow.com/questions/3478906/using-phps-swiftmailer-with-gmail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:15:04.547

检查[http://neo22s.com/send-email-using-gmail-and-php/](http://neo22s.com/send-email-using-gmail-and-php/)和[http://webcodingeasy.com/PHP-API039s/Send-email-from-Gmail-using-PHP](http://webcodingeasy.com/PHP-API039s/Send-email-from-Gmail-using-PHP)

# c# - 按回车键单击按钮 VC#

> ID：10635433
> 
> 赞同：1
> 
> 时间：2012-05-17T12:06:05.133
> 
> 标签：c#

我正在用 C# 开发一个 WinForm 应用程序，应用程序的屏幕上只有一个按钮，应用程序的需要是当用户点击进入时，按钮应该像点击它一样工作。这怎么可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:06:50.507

您的表单有一个“AcceptButton”属性。

将其设置为有问题的按钮，它将按照您的描述运行。

请在此处查看文档：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:10:43.723

用这个 ：

```
this.AcceptButton = button1 // Say you want to set Enter to button1 
```

[了解更多`AcceptButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T12:08:30.803

将表单的`AcceptButton`属性设置为您希望在用户按 Enter 时执行的按钮。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T12:08:49.940

转到表单属性设置`AcceptButton`为您的按钮 ID

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T12:10:51.443

[Form.AcceptButton 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)

获取或设置用户按 ENTER 键时单击的窗体上的按钮。

```
// Set the accept button of the form to button1.
   form1.AcceptButton = button1;// button1 is your required button 
```

附加信息

对于cencel，您可以使用

```
form1.CancelButton = MyCancelButton; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T16:13:00.117

您可以在客户端执行此操作：

```
<script type="text/javascript">
            function searchKeyPress(sender, eventArgs) {
                var c = eventArgs.get_keyCode();
                if (c == 13) {
                    var btnQiuckSearch = document.getElementById('<%=RbSearch.ClientID%>');
                    btnQiuckSearch.click();
                }
            }
 </script> 
```

# file - 获取特定文件夹路径

> ID：10635434
> 
> 赞同：0
> 
> 时间：2012-05-17T12:06:16.790
> 
> 标签：file, recursion, directory

在一组随机的嵌套文件夹和文件中，我需要获取特定子文件夹名称为“x”的所有文件夹路径。

例如，在以下结构中，我只需要程序返回`a\c\e\x`：

![在此处输入图像描述](../Images/a07a7e4249c1ae0d3a8988b39ba6be63.png)

请注意，可以有任何级别的嵌套和任何文件夹结构。

**更新**：我已经能够编写一个基本程序来实现我想要的。但是，当在我之前的图表中在“dir d”下有一个目录“dir x”时，它会失败。所以程序返回 a\c\e\x 和 d\x。你能帮忙解决这个问题吗？

公共类僵尸{

```
String folderName= new String();
ArrayList folderList= new ArrayList(); 

public static void main(String[] args) {
    String path;
    try {
        path = new java.io.File(".").getCanonicalPath();
        Zombie zombie= new Zombie();
        getFilePaths(new File(path).listFiles(), zombie);

        Iterator itr = zombie.folderList.iterator();
        while (itr.hasNext())
            System.out.println(itr.next());

    } catch (IOException e) {
        e.printStackTrace();
    }
}

public static void getFilePaths(File[] fileList, Zombie zombie) {
    for (int i=0; i<fileList.length; i++) {
        File file= fileList[i];
        if (file.isDirectory()) {
            if (containsDesiredFolder(file)) {
                zombie.folderList.add(zombie.folderName+ "\\" + file.getName());
                zombie.folderName="";
            } else {
                if (containsFoldersNotFiles(file)) {
                    zombie.folderName= zombie.folderName + "\\" + file.getName();
                    getFilePaths(file.listFiles(), zombie);
                }
            }
        } 
    }
}   

public static boolean containsFoldersNotFiles(File file) {
    boolean flag = false;
    if (file.isFile()) return false;

    File[] dummyList = file.listFiles();

    //no file or folder present
    if (dummyList == null)
        return flag;

    for (int i = 0; i < dummyList.length; i++) {
        File dummyFile = dummyList[i];
        if (dummyFile.isDirectory() ) {
            return true;
        }
    }
    return flag;
}

public static boolean containsDesiredFolder(File file) {
    boolean flag = false;
    if (file.isFile()) return false;
    File[] dummyList = file.listFiles();

    if (dummyList == null)
        return flag;

    for (int i = 0; i < dummyList.length; i++) {
        File dummyFile = dummyList[i];
        if (dummyFile.isDirectory() && dummyFile.getName().equals("dirx")) {
            flag = true;
        }
    }
    return flag;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:04:42.940

1.  获取种子文件夹，将其名称附加到字符串类型的 folder_list 变量中。
2.  如果种子文件夹是 x 并且其子节点将文件夹列表添加到全局文件夹数组。
3.  遍历种子文件夹的所有文件夹。在传递文件夹列表，并将每个子文件夹作为种子文件夹传递时，从 1 开始重复。

PS：这几乎可以。

# macos - 我的 OSX Lion 上的 2 个 pg_dump 版本

> ID：10635435
> 
> 赞同：8
> 
> 时间：2012-05-17T12:06:18.823
> 
> 标签：macos, postgresql, osx-lion, version, pg-dump

我用自制软件安装了 Postgres 9.0.x，但由于缺少一些模块，我使用以下方法将其删除：

```
brew uninstall postgres 
```

[并从http://www.enterprisedb.com/downloads/postgres-postgresql-downloads](http://www.enterprisedb.com/downloads/postgres-postgresql-downloads)安装 Postgres 9.1.3 。

现在我遇到了一个问题 - pg_dump 上有 2 个不同的版本 - 9.0.5 和 9.1.3 和 9.0.5 是默认版本。

有什么办法可以将 9.1.3 版本设置为 pg_dump 的默认版本？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T12:33:16.920

因此，根据您的其他评论，您的新版本 pg_dump 不在您的 PATH 中，您需要做的就是删除旧版本，并将新版本符号链接到 PATH 中的任何目录，例如**/usr/bin**。

如下：

```
sudo ln -s /actual/new/pg_dump /usr/bin/pg_dump 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-26T02:04:57.230

Valentin 有正确的答案，但当然，Mac 用户的问题是 pg_dump 到底在哪里？

如果你有 9.2 版，它是：/Library/PostgreSQL/9.2/bin/pg_dump

只需将其复制到 /usr/bin

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-20T05:47:30.703

我基本上有同样的错误。

`pg_dump: server version: 9.1.3; pg_dump version: 9.0.4`

我刚刚使用了 homebrew 的升级功能，它使 sever 和 pg_dump 版本都与 homebrew 中的最新版本（截至 2013 年 9 月 19 日的 9.3）保持同步。

`brew upgrade postgresql`

我重新运行了我的转储语句，它运行良好。

`pg_dump -U postgres development > dump.sql`

# php - 来自两个表的 MYSQL 请求

> ID：10635439
> 
> 赞同：1
> 
> 时间：2012-05-17T12:06:36.853
> 
> 标签：php, mysql, request, database-table

也许你可以帮助我：

我有一张桌子：

```
1: Users
id   username   email
1    myname     myname@myname.com
2    myname2    myname2@myname.com

2: Accounts
user_id   account
1         37992054
2         3804933 
1         23286966 
```

我需要提出请求并获取以下数据：

```
id   username   email                account
1    myname     myname@myname.com    37992054, 23286966
2    myname2    myname2@myname.com   3804933 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:13:58.897

您需要连接两个表并使用分组结构来折叠具有相同用户 ID 的记录：

```
Select u.id, u.username, u.email, group_concat(a.account)
from users as u join accounts as a 
  on a.user_id = u.id
group by u.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:15:16.187

您需要一个标准的连接查询：

```
select u.id,u.username,u.email,a.account from Users as u, Accounts as a where u.id=a.id; 
```

# c++ - 如何使用宏函数编写以下代码？

> ID：10635441
> 
> 赞同：-2
> 
> 时间：2012-05-17T12:06:43.147
> 
> 标签：c++, macros, inline

**我应该如何使用宏函数编写以下代码？**

```
#ifdef LOG_ENABLED      
    m_logger->Log(szType,szMessage);
#endif 
```

***我做了类似下面提到的事情，它导致了错误：-***

```
#define _LOG_MSG_CND_BEGIN_ #ifdef LOG_ENABLED
#define _LOG_MSG_CND_END_ #endif
#define WriteLogMessage(szType,szMessage) \
{\
_LOG_MSG_CND_BEGIN_\
    m_logger->Log(szType,szMessage);\
_LOG_MSG_CND_END_\
} 
```

请让我知道如何为上述三段代码编写宏函数而没有任何错误。

我对同一段代码使用了内联函数，但是在调试时我看到内联函数没有被视为内联函数，所以我想在这种情况下使用宏函数。

**我使用的内联函数如下所述：-**

```
inline void WriteLogMessage(LOG_LEVEL szType, LPCTSTR szMessage){
#ifdef LOG_ENABLED      
    m_logger->Log(szType,szMessage);
#endif
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:11:01.833

标准的 C 预处理器有点笨，根本不懂。你想要这样的东西：

```
#if defined LOG_ENABLED
#define WriteLogMessage(szType,szMessage) m_logger->Log(szType,szMessage)
#else
#define WriteLogMessage(szType,szMessage)
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:08:23.990

预处理器指令必须是一行中的第一件事：

```
#define _LOG_MSG_CND_BEGIN_ 
#ifdef LOG_ENABLED
#define _LOG_MSG_CND_END_ 
#endif
#define WriteLogMessage(szType,szMessage) \
{\
_LOG_MSG_CND_BEGIN_\
    m_logger->Log(szType,szMessage);\
_LOG_MSG_CND_END_\
} 
```

编辑：如果您希望将宏扩展到其他宏，那是不可能的。

# php - 如何有效地使用 DirectoryIterator？

> ID：10635444
> 
> 赞同：3
> 
> 时间：2012-05-17T12:06:55.703
> 
> 标签：php, performance, spl

我需要从包含大量文件的目录中过滤掉一些文件。在我的脚本中，这个函数被多次调用。

```
function getFilteredFiles($criteria) {
    static $files = '';           
    if ($files == '') {
        $files = new DirectoryIterator($path);
    }
    else {
        $files->rewind();
    }

    foreach($files as $file) {
         if (! $file->isDot()) {
             if (!$file->isDir()) {
                  //using $criteria
                  ...
              }
         }
    }
    ...
 } 
```

将 DirectoryIterator 放在静态变量中是让 php 只进入文件系统一次以获取文件的方式吗？（= php 是否只在 DirectoryIterator 的 __construct 期间进入文件系统？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:04:32.307

> 将 DirectoryIterator 放在静态变量中是让 php 只进入文件系统一次以获取文件的方式吗？（= php 是否只在 DirectoryIterator 的 __construct 期间进入文件系统？）

是的。

但是为什么你在控制器中创建数据模型的新实例而不是子类呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:56:46.740

我查看了源代码，看起来当你倒带迭代器时，他们试图倒带他们从中读取目录条目的流。我不敢深入研究 php streams.c 文件以进一步查看，但根据我看到的流搜索，我猜它不会再次访问文件系统。

我想您可以使用 strace 快速测试。

# mysql - 为什么 Django ORM 找不到明确在我的数据库中的项目？

> ID：10635447
> 
> 赞同：1
> 
> 时间：2012-05-17T12:07:13.227
> 
> 标签：mysql, django, orm, django-models

Django（版本 1.1.4 值得）任意找不到我的一个数据库表中的项目。有问题的对象管理器是默认的。下面是两个示例，第一个显示问题的范围，第二个提供了它的特定实例。

姜戈：

```
In [5]: LocalStore.objects.all().count()
Out[5]: 1466 
```

MySQL：

```
mysql> select count(*) from stores_localstore;
+----------+
| count(*) |
+----------+
|     1553 | 
+----------+
1 row in set (0.00 sec) 
```

本身就够奇怪了。现在这是一个在数据库中但未显示的单个对象的示例：

姜戈：

```
In [37]: LocalStore.objects.filter(id=474361)
Out[37]: []
In [39]: print LocalStore.objects.filter(id=474361).query
SELECT `stores_localstore`.`id`, `stores_localstore`.`cust_id`,
`stores_localstore`.`name`, `stores_localstore`.`lat`, `stores_localstore`.`lng`,
`stores_localstore`.`addr1`, `stores_localstore`.`addr2`, `stores_localstore`.`city`, 
`stores_localstore`.`email`, `stores_localstore`.`fax`, `stores_localstore`.`phone`, 
`stores_localstore`.`state`, `stores_localstore`.`url`, `stores_localstore`.`zip` FROM
`stores_localstore` WHERE `stores_localstore`.`id` = 474361 
```

出于隐私原因，我不想向您展示 MySQL 查询的确切结果，但只要说它确实返回了数据库行就足够了。

这让我觉得这是一个非常奇怪的行为，并且可能是 Django ORM 内部深处的一个错误。但也有可能我忽略了一些明显的东西。那会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:27:45.610

Django 正在查看与您连接的数据库不同的数据库，或者您已经告诉 django 以某种方式进行缓存。Django 不会“丢失”数据。

验证 django 是否连接到正确的数据库：

```
from django import db
db.settings.DATABASES.get('default') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:13:11.147

可能您的 MySQL 的隔离级别是[REPEATEABLE READ](http://dev.mysql.com/doc/refman/5.5/en/set-transaction.html#isolevel_repeatable-read)（这是 innodb 的默认值），并且 Django shell 中的 DB 连接在新插入行之前处于事务中（由手动事务管理或使用某些连接池引起，等）并且仍然保存旧行的过期快照。
然后你体验了幻读。

# localhost - 邮件在本地主机中发送但不在服务器中

> ID：10635450
> 
> 赞同：0
> 
> 时间：2012-05-17T12:07:22.947
> 
> 标签：localhost

我正在 nopcommerce 的电子商务网站上工作。我想发送邮件，当用户之前已经注册并尝试使用相同的电子邮件 ID 再次注册时。邮件包含正文内容为“该用户的用户名是某个用户名”。当我编写代码并执行它时，它在本地工作正常。但是当我在服务器上运行它时（在 IIS 服务器中创建一个新网站后），邮件没有发送。另一件事是我创建的页面，它将显示为“邮件是成功发送”显示在本地。但即使 url 相同，它也不会显示在服务器中。任何人都可以建议我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T06:46:20.027

此解决方案需要 sendmail.exe（一个命令行界面 (CLI) 可执行文件，它接受来自 PHP 的电子邮件，连接到 SMTP 服务器并发送电子邮件）。您不需要通过命令来使用它，也不必为此烦恼 :-) 下载[sendmail.zip](http://www.glob.com.au/sendmail/sendmail.zip)并按照以下步骤操作：

```
Create a folder named “sendmail” in “C:\wamp\”.
Extract these 4 files in “sendmail” folder: “sendmail.exe”, “libeay32.dll”, “ssleay32.dll” and “sendmail.ini”.
Open the “sendmail.ini” file and configure it as following
    smtp_server=smtp.gmail.com
    smtp_port=465
    smtp_ssl=ssl
    default_domain=localhost
    error_logfile=error.log
    debug_logfile=debug.log
    auth_username=[your_gmail_account_username]@gmail.com
    auth_password=[your_gmail_account_password]
    pop3_server=
    pop3_username=
    pop3_password=
    force_sender=
    force_recipient=
    hostname=localhost

You do not need to specify any value for these properties: pop3_server, pop3_username, pop3_password, force_sender, force_recipient. The error_logfile and debug_logfile settings should be kept blank if you have already sent successful email(s) otherwise size of this file will keep increasing. Enable these log file settings if you don’t get able to send email using sendmail. 
```

# ios - Facebook 与 IOS 的集成

> ID：10635456
> 
> 赞同：0
> 
> 时间：2012-05-17T12:07:48.840
> 
> 标签：ios, facebook, sdk, integration

大家好，我使用 Facebook Old API 将 Facebook 与 iOS 集成到我的应用程序中。我做了所有的一步一步的过程，但是每当我运行我的应用程序时，它会在点击 Facebook 按钮之后给我错误。错误是

“抱歉，您使用的应用程序配置错误，无法与 Facebook 集成。请下载最新版本的应用程序。

所以请大家帮我解决这个问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:10:33.943

这是最新版本：[https ://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

安装说明在页面上。设置起来相当简单。只是不要忘记将您的 facebook id 放在 plist 中！（常见错误）。

# ios - 如何从服务器在设备上播放视频？

> ID：10635457
> 
> 赞同：1
> 
> 时间：2012-05-17T12:07:51.017
> 
> 标签：ios

我正在尝试播放我服务器上的视频。它的短视频。将近2分钟。我必须下载它并在下载完成时播放。我怎样才能做到这一点。我没有意见？你知道任何文章或代码吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:01:56.707

```
NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:urlStr];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [self.view addSubview:moviePlayer.view];
    moviePlayer.view.frame = CGRectMake(0, 0, 300, 400);  
    [moviePlayer play];`enter code here` 
```

# java - Java 客户端访问 .net WCF 服务

> ID：10635459
> 
> 赞同：0
> 
> 时间：2012-05-17T12:07:54.217
> 
> 标签：java, .net, wcf, soap

我在 WCF 服务中编写了一个方法，它接受 Stream 类型的参数。

```
TestUpload(Stream fileStream); 
```

当Java客户端访问它时，出现以下错误：

```
com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Invalid Content-Type:text/html. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:49:07.410

你在使用[SoapUi](http://www.soapui.org/)吗？它在 WCF 服务测试期间很有帮助。

# java - 在 WindowBuilder for Eclipse 中隐藏工具栏

> ID：10635464
> 
> 赞同：0
> 
> 时间：2012-05-17T12:08:12.610
> 
> 标签：java, eclipse, user-interface, windowbuilder

请问，你能告诉我如何在下面的截图中隐藏工具栏吗？我说的是 WindowBuilder GUI 设计器工具栏。我不知道如何隐藏它。

谢谢。

![http://i.imgur.com/xNL66.jpg](../Images/0f10cb037bac51b80ef895b0bd7a4ea9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:16:49.783

抱歉，但我认为不可能，您可以折叠结构和调色板窗格，但不能在 WindowBuilder 编辑器中隐藏窗口构建器工具栏。

# iphone - 返回释放对象的函数

> ID：10635471
> 
> 赞同：0
> 
> 时间：2012-05-17T12:08:31.350
> 
> 标签：iphone

我制作了一个自定义单例类，其中包含 nsmutabledictionary 作为属性。我通过两种方法设置和检索此类中的值

```
-(void)setObject:(id)object forKey:(NSString*)key
{
    if(!object||object==nil)
    {

        return;
    }
    [self.dict setObject:[object retain] forKey:key];   
} 
```

和 objectForKey

```
-(id)objectForKey:(NSString*)key
{

    id obj=[self.dict objectForKey:key];
    return obj;
} 
```

我这样做的原因是，当我在迭代方法（10000 循环或更高）中保存和检索 nsuserdefaults 的值时，代码要慢得多。因此我构建了一个模仿 nsuserdefaults 功能的类。问题是有时这个类返回的值已经被释放了。结果代码崩溃了，我们可以做进一步的验证，以便这个类只返回未释放的对象

# c++ - 从另一个类对象调用常量函数

> ID：10635474
> 
> 赞同：2
> 
> 时间：2012-05-17T12:08:35.900
> 
> 标签：c++, function, constants, this, member

这是我拥有的代码

```
class A
{
public:
    void Func1() const;
};

class B
{
public:
    A* a;
    void Func2() const
    {
        // do something with 'a'
    }
};

void A::Func1() const
{
    B b;
    b.a = this;
    b.Func2();
} 
```

现在显然这给了我一个错误，因为我试图从 const 转换为 non-const。

```
b.a = this; 
```

有什么方法可以调用`Func2`而不必抛弃`this`. 因为`Func2`无论如何都是一个 const 函数，所以它不会改变`this`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:14:16.630

您必须将其声明`A*`为 const：

```
class A
{
public:
    void Func1() const;
};

class B
{
public:
    const A* a;
    void Func2() const
    {
        // do something with 'a'
    }
};

void A::Func1() const
{
    B b;
    b.a = this;
    b.Func2();
} 
```

由于 in `A::Func1`，`this`指针是 const。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:14:19.570

`Func2`可能不会改变`this`，但`b.a`不会`const`改变，之后您可以自由更改。没有正确的方法可以做到这一点，尽管存在解决方法，例如`mutable`or `const_cast`。

这是错误设计的标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:14:40.713

是的，使`A *`常数：

```
class B {
public:
    const A *a

...
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T12:25:20.780

如果`class B`总是`*a`作为一个`const`对象使用，那么正如其他人所说，只需将声明更改为

```
public: const A* a 
```

在这一点上，我应该提一下， 的常量`B::Func2`是一条红鲱鱼，因为它与 的常量完全没有关系`B::a`。这意味着不允许更改 ; 的`B::Func2`值。但是，*允许*取消引用和改变结果对象。`const``a`*`a`*

 *现在，如果相对于`class B`两者都有操作`const`和非`const`操作，`*a`那么您的类设计需要更改。`class B`如果您切换到使用上面的 a会更好`const A* a`，并添加另一个`class D : public B`封装所有变异操作的方法。另外，`a`应该隐藏在一个属性设置器后面；这使您可以执行以下操作

```
class B {
    const A* a;
public:
    void setA(const A* a) { this->a = a; }
    void Func2() const {}
};

class D : public B {
    A* a;
public:
    using B::setA;
    void setA(A* a) { 
        this->a = a;
        static_cast<B*>(this)->setA(const_cast<const A*>(a));
    }
    void Func3() { /* do something to D::a */ }
}; 
```

With this scheme both `B` and `D` keep independent, suitably typed pointers to the object to be accessed. If `setA` is called on a `B`, or on a `D` with a `const A*` parameter then only `B::a` is set. If `setA` is called on a `D` with an `A*`, then both `B::a` and `D::a` are properly set. This has become possible because by abstracting the member behind a setter you can then overload the setter on the constness of its parameter.*

# javascript - 将随机密码值分配给特定列（单元格）

> ID：10635478
> 
> 赞同：0
> 
> 时间：2012-05-17T12:08:46.177
> 
> 标签：javascript, jquery

我正在尝试生成一个随机密码（*此代码运行良好*），该密码将粘贴到密码文本框中的值，但在调用 javascript 函数时遇到问题。

这是我的 JavaScript：

```
function password() {
    var chars =   "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
    var string_length = 8;
    var randomstring = '';
    var table = document.getElementById('table'),
    rows = table.getElementsByTagName('tr'),
    i,j, cells, password;
    for (var i=0; i<string_length; i++) {
        var rnum = Math.floor(Math.random() * chars.length);
        randomstring += chars.substring(rnum,rnum+1);
    }
    for (i=0,j = rows.length; i<j;++i)
    {
    cells = rows[i].getElementsById('td');
    if(!cells.length)
    {continue;
    }
    password = cells[j].innerText;
    alert("hi "+password);
    }
    alert("Password is : "+randomstring);
    document.f2.password.value = randomstring;
} 
```

这是我的表：

```
<table name="table" id="table" cellpadding="4" cellspacing="2" border="1" bgcolor="" >
<tr name="tr" id="tr">
<th><input type="checkbox" name="allCheck" onclick="selectallMe()"></th>
<th>Emp ID</th>
<th>Device</th>
<th>Feature Status</th>
<th>Policy</th>
<th>Password Management</th>
</tr>
<tr>
<%  while(rs.next()){ %>
<td><input type="checkbox" name="chkName" onclick="selectall()"></td> 
<td><input type="text"  name="empId" value="<%= rs.getString(1)%> "   disabled="disabled"  maxlength="10"></td>
<td><input type="text" name="device" value="<%= rs.getString(2)%>"   disabled="disabled" maxlength="10"></td>
<td><input type="text"  name="features" value="<%= rs.getString(3)%>"  disabled="disabled" maxlength="60"></td>
<td><input type="text"  name="policyName" value="<%= rs.getString(4)%>"  disabled="disabled" maxlength="10"></td>
<td id="td" name="td"><input type="text" name="password" id="password" value=""  ><input type="button" name="Password" value="Password" onclick="password()"><input type="reset"  name="Reset" value="Rseset"></td>
</tr>
<% } 
%>
</table> 
```

在我的 JS 中出了什么问题？因为我想遍历密码列，`Password()`所以将值分配给密码单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:23:05.723

我更愿意将此放在评论中，但我还没有声誉。

首先，您希望单元格成为文本输入类型是否有特定原因？因为您只是在创建时禁用它们。还要查看 rows[index].cells(); 和 table.rows(); JS中的方法。这些将为您提供单元格和行的数组。从那里你可以迭代到你想要的地方。访问以了解更多信息[http://www.javascriptkit.com/domref/tableproperties.shtml](http://www.javascriptkit.com/domref/tableproperties.shtml)

希望能帮助到你

# android - 在后台运行 android 活动

> ID：10635484
> 
> 赞同：1
> 
> 时间：2012-05-17T12:08:52.097
> 
> 标签：android, sqlite, cursor, android-service, android-activity

我需要连接到数据库来读取数据。所以我正在使用 startManagingCursor() 函数。但我的工人阶级并没有扩展 Activity。这会导致功能失败。然后我将该函数移动到另一个 Activity，并从我的应用程序中创建了新的 Activity。这次我得到了黑屏，因为当我创建新的 Activity 时，它来到了前台。

所以这是我的问题：

1-有没有办法在服务中调用 startManagingCursor？（可能不，但我需要确定。）如果是，怎么办？

2-如果第一个问题的答案是否定的，我可以像服务一样在后台运行活动吗？如果是怎么办？

3-如果第二个问题的答案也不是，除了使用游标之外，还有什么方法可以进行阅读查询？如果是，它是什么，我应该如何使用它？

4-如果第三个问题的答案是否定的，我该怎么做才能在不使用活动的情况下从 Sqlite 数据库中读取数据？

平台：安卓2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:16:34.610

You should use the [`CursorLoader` class](http://developer.android.com/reference/android/content/CursorLoader.html).

# iphone - 我们如何在滚动视图中拖放图像

> ID：10635485
> 
> 赞同：0
> 
> 时间：2012-05-17T12:08:54.300
> 
> 标签：iphone, ios

在我的应用程序中有 UIScrollView 的 CustomScrollView 子类（我在这里没有使用 UIView），其中我在底部有 10 个图像，我想通过复制它而不是在底部删除原始图像来将任何图像从底部拖动到滚动视图中的任何位置。通过使用 touchEnd 、 touchMoved 和 touchBegan 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:37:49.690

在您的触摸开始方法中，您将获得触摸点，并且能够获得`imageView`触摸开始的位置。现在，如果您想显示图像视图的移动，请执行以下操作：

*   联系开始获取`UIImageView`对象
*   创建一个`UIImageView`具有相同属性的新对象。

    ```
    UIImageView *newImageView = [[UIImageView alloc] initWithFrame:myCurrentImageView.frame];
    newImageView.image = myCurrentImageView.image;
    //other properties if needed
    [myscrlview addSubView:newImageView]; 
    ```

    这将在您的滚动视图中添加图像，与您之前的图像视图相同。

*   在触摸移动中，您将获得您的接触点

*   设置你的任何`UIImageView`对象让我们说

    ```
    newImageView.center = touchPoint; 
    ```

    这将显示您的图像移动

*   在`thouchEnd`做同样的设置你的`newImageView`中心在触摸结束位置。

确保设置`UIScrollView`内容大小等属性以及移动新图像时的所有内容，以防中心设置为 x=0，y=0。

这将保持之前的图像在滚动视图中，并在移动时创建新图像的副本。

希望这就是你要找的。如果不让我知道。

**注意：**代码可能有错误，因为我只是在这里输入而不是在 xcode 中，但您可以理解该怎么做

# html - iframe 中的游戏让我的屏幕移动

> ID：10635492
> 
> 赞同：0
> 
> 时间：2012-05-17T12:09:19.700
> 
> 标签：html, iframe, javascript-events

我用 javascript 和 php 制作了一个游戏，当我将游戏放在 iframe 中时，一切正常，但是一旦我开始按下箭头键（这是一个蛇游戏），我的主窗口也开始移动。快去看看这个网站，这样你就可以更好地理解我的意思了。 [http://www.dbzweb.be/08/braetj08/](http://www.dbzweb.be/08/braetj08/)
我用cancelbubble尝试了一些东西，但没有帮助。有人可以告诉我如何避免我的主机移动吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:14:35.280

您需要取消按键事件以阻止它移动。

```
var cancelKeypress = false;

document.onkeydown = function(evt) {
    evt = evt || window.event;
    cancelKeypress = /^(37|38|39|40)$/.test("" + evt.keyCode);
    if (cancelKeypress) {
        return false;
    }
};

/* For Opera */
document.onkeypress = function(evt) {
    if (cancelKeypress) {
        return false;
    }
}; 
```

# c - 响应参数 WTSSendMessage

> ID：10635493
> 
> 赞同：0
> 
> 时间：2012-05-17T12:09:29.287
> 
> 标签：c, winapi, service, windows-services

我参与编写服务，我想在“服务停止请求”上显示一个消息框..

我尝试使用“WTSSendmessage”API。但没有显示消息框。我的另一个疑问是 WTSSendmessage 中“Presponse”参数的输入应该是什么。

有例子吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:23:29.877

Presponse 是一个指向接收用户响应的变量的指针。表示用户按下的按钮。

```
 typedef BOOL (*TypeSendMessage) ( HANDLE,DWORD,LPWSTR,DWORD, LPWSTR, DWORD, DWORD,DWORD, DWORD*, BOOL);

   TypeSendMessage SendMessage;
   HMODULE hModule = LoadLibrary(L"Wtsapi32.dll");

 if(hModule)
 {
   ////////////////// WTSSendMessage ////////////////
   SendMessage = (TypeSendMessage) GetProcAddres(hModule,
                 "WTSSendMessageW");
   if(!SendMessage) 
          return FALSE;

   DWORD res;
   SendMessage( WTS_CURRENT_SERVER_HANDLE,
               WTSGetActiveConsoleSessionId(), (LPWSTR)L"Title", 5*2,
               (LPWSTR)L"Sample Message",14*2, MB_ICONERROR| MB_TOPMOST|MB_SETFOREGROUND,
               FALSE,    &res,  0);
 } 
```

# m2e - 可以添加到 pom 以使 m2e 和 eclipse indigo 一起玩的最简单的 pluginManagement 部分是什么？

> ID：10635495
> 
> 赞同：1
> 
> 时间：2012-05-17T12:09:46.363
> 
> 标签：m2e

我已阅读有关此主题的讨论，但没有看到简单的解决方案。

鉴于以下非常简单的 pom.xml、Indigo Eclipse 和 m2e（版本 0.14.0.201107060316），eclipse 抱怨

```
Multiple annotations found at this line
   - Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-resources-plugin:2.4.3:resources (execution: default-resources, phase: process-resources)
   - Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-resources-plugin:2.4.3:testResources (execution: default-testResources, phase: process-test-resources) 
```

上

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany.myproject</groupId>
    <artifactId>myartifact</artifactId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>myartifact</name>
    <url>http://maven.apache.org</url>
</project> 
```

我知道这与添加一个部分有关，如[http://wiki.eclipse.org/M2E_plugin_execution_not_covered#execute_plugin_goal中所示](http://wiki.eclipse.org/M2E_plugin_execution_not_covered#execute_plugin_goal)

我认为将以下部分添加到 pom.xml 中至少可以清除一个错误，但事实并非如此，所以我一定不能清楚地了解什么是错误的。

有什么建议吗？我相信这对你们中的一些人来说很简单。

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany.myproject</groupId>
    <artifactId>myartifact</artifactId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>myartifact</name>
    <url>http://maven.apache.org</url>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.apache.maven.plugins</groupId>
                                    <artifactId>maven-resources-plugin</artifactId>
                                    <versionRange>2.4.3</versionRange>
                                    <goals>
                                        <goal>resources:resources</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute >
                                        <runOnIncremental>false</runOnIncremental>
                                    </execute >
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T11:10:38.923

我面临同样的问题（Eclipse Indigo，Maven 3.0.2）。我按照此处指示的步骤解决了它： [http ://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven](http://code.google.com/p/google-web-toolkit/wiki/WorkingWithMaven)

我安装了以下功能（使用 eclipse->Help->Install New Software）： - Eclipse 的 Maven 集成 - WTP 的 Maven 集成：http: [//download.jboss.org/jbosstools/updates/m2eclipse-wtp](http://download.jboss.org/jbosstools/updates/m2eclipse-wtp)

安装这些功能后，我会更新项目（右键单击项目->Maven->更新项目..）。这对我有用。我希望这会有所帮助。

# gcc - 为什么 GCC 将汇编命令添加到我的内联汇编中？

> ID：10635496
> 
> 赞同：3
> 
> 时间：2012-05-17T12:09:51.050
> 
> 标签：gcc, inline-assembly, llvm-gcc

我正在使用 Apple 的 llvm-gcc 使用内联汇编编译一些代码。我写了我想要它做的事情，但是它添加了一些无关的命令，这些命令不断地将变量写入内存。为什么要这样做，我该如何阻止它？

例子：

```
__asm__{
  mov r11, [rax]
  and r11, 0xff
  cmp r11, '\0'
} 
```

变为（在“装配”助手视图中）：

```
mov  0(%rax), %r11     // correct
movq %r11, -104(%rbp)  // no, GCC, obviously wrong
and  $255, %r11
movq %r11, -104(%rbp)
cmp  $0, %r11 
```

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T18:16:09.393

您需要使用 GCC 的[扩展 asm 语法](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s5)来告诉它您将哪些寄存器用作输入和输出以及哪些寄存器被破坏。如果你不这样做，它就不知道你在做什么，它生成的程序集很容易干扰你的代码。

通过通知它你的代码在做什么，它改变了它如何进行寄存器分配和优化，并避免破坏你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:17:11.457

这是因为 gcc 试图优化你的代码。`-O0`您可以通过添加到命令行来防止优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:14:29.570

如果您不想这样做，请尝试在 __asm__ 之后添加 volatile。附加命令可能是上一个/下一个 C 指令的一部分。没有 volatile 编译器允许这样做（因为它可能以这种方式执行得更快 - 不是你的代码，整个例程）。

# ios - 可可中的随机反弹方向？

> ID：10635497
> 
> 赞同：0
> 
> 时间：2012-05-17T12:09:53.067
> 
> 标签：ios, random, uiimageview

我有`UIImageView`（球），它在屏幕上移动，但我希望它从特定图像（命名为 computer.paddle）以随机方向反弹

这是我的代码：

```
 if (CGRectIntersectsRect (ball.frame, computerPaddle.frame)) {
        if (ball.center.x < computerPaddle.center.x) {
            (ballVelocity.x =- ballVelocity.x);
        }
    } 
```

注意我正在使用旋转景观，我希望它从桨的右侧反弹到右侧。我很乐意做任何`UIIntegers`需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:21:32.567

在内部块中添加以下行：

```
ballVelocity.y += arc4random() % (2 * MAX_VARIANCE) - MAX_VARIANCE; 
```

`MAX_VARIANCE`，在这种情况下，是您希望与 的“正常”值相比的最大变化量`ballVelocity.y`。如果您需要更精细的变化程度，您可以增加`MAX_VARIANCE`一些 double`k`并将表达式乘以`1/k`. 例如，

```
ballVelocity.y += (arc4random() % (2*100*MAX_VARIANCE) - 100*MAX_VARIANCE)*0.01; 
```

# php - 数据库 CURRENT_TIMESTAMP 比较

> ID：10635503
> 
> 赞同：0
> 
> 时间：2012-05-17T12:10:22.473
> 
> 标签：php, sql

谁能给我一个解决方案我怎样才能发出一个sql请求来比较我的数据库中的日期

```
SELECT * FROM my table WHERE date between YY.MM.DD HH.MM.SS AND YY.MM.DD HH.MM.SS 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:14:22.983

您没有说明您的 DBMS，所以这是 ANSI 版本：

```
SELECT * 
FROM my_table 
WHERE date between timestamp '2012-05-01 18:00:00' AND timestamp '2012-05-19 23:00:00' 
```

或者

```
SELECT * 
FROM my_table 
WHERE date between timestamp '2012-05-01 18:00:00' AND current_timestamp 
```

# php - 外键 sqlite 3 删除 1-n 寄存器

> ID：10635505
> 
> 赞同：0
> 
> 时间：2012-05-17T12:10:26.413
> 
> 标签：php, sqlite, yii

我有 2 张桌子，在 sqlite 3

控制和用户。

该控件具有名称、user_id。

我想在删除用户时删除控件。所以，如果我删除所有 id = 10 的用户，我想删除所有 user_id = 10 的控件。有没有办法在数据库中做到这一点。我已经在 DELETE CASCADE 上执行 CONSTRAINT "fk_user_id" FOREIGN KEY ("user_id") REFERENCES "tbl_user" ("id") ，但没有运气。记录还在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:03:06.703

解决了

```
'db'=>array(
    'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
    'initSQLs'=>array(
    'PRAGMA foreign_keys = ON',
     ),
), 
```

需要添加 pragma 以在 init 上启用外键

# android - Android 应用内计费：空指针异常

> ID：10635512
> 
> 赞同：3
> 
> 时间：2012-05-17T12:11:01.913
> 
> 标签：android, in-app-billing

我正在尝试对我的应用程序实施应用内计费。

我正在阅读 developer.android.com 上的指南，查看他们的示例应用程序。

我开始编写检查是否支持应用内计费的基本方法，但是当我尝试调用 sendBillingRequest 时，我收到以下错误：

```
05-17 14:23:30.479: W/System.err(15332): java.lang.NullPointerException
05-17 14:23:30.489: W/System.err(15332):    at resistorcalc.main.billing.BillingService.checkBilling(BillingService.java:63)
05-17 14:23:30.489: W/System.err(15332):    at resistorcalc.main.SupportusActivity.onCreate(SupportusActivity.java:24)
05-17 14:23:30.499: W/System.err(15332):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-17 14:23:30.509: W/System.err(15332):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-17 14:23:30.509: W/System.err(15332):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-17 14:23:30.519: W/System.err(15332):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-17 14:23:30.529: W/System.err(15332):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
05-17 14:23:30.539: W/System.err(15332):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 14:23:30.539: W/System.err(15332):    at android.os.Looper.loop(Looper.java:130)
05-17 14:23:30.549: W/System.err(15332):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-17 14:23:30.549: W/System.err(15332):    at java.lang.reflect.Method.invokeNative(Native Method)
05-17 14:23:30.549: W/System.err(15332):    at java.lang.reflect.Method.invoke(Method.java:507)
05-17 14:23:30.549: W/System.err(15332):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-17 14:23:30.559: W/System.err(15332):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-17 14:23:30.559: W/System.err(15332):    at dalvik.system.NativeStart.main(Native Method) 
```

billingService 类是：

```
package resistorcalc.main.billing;

import android.app.Service;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.os.RemoteException;
import android.util.Log;

import com.android.vending.billing.IMarketBillingService;

public class BillingService extends Service implements ServiceConnection {

private static final String TAG = "BillingService";
private IMarketBillingService mService;

public BillingService(){
    super();
}

@Override
public void onCreate() {        
    super.onCreate();
    try {
        Log.i(TAG, "Service starting with onCreate");            
        boolean bindResult = bindService(new Intent("com.android.vending.billing.MarketBillingService.BIND"), this, Context.BIND_AUTO_CREATE);
        if(bindResult){
            Log.i(TAG,"Market Billing Service Successfully Bound");
        } else {
            Log.e(TAG,"Market Billing Service could not be bound.");            
        }
    } catch (SecurityException e){
                Log.e(TAG,"Market Billing Service could not be bound. SecurityException: "+e);                 
    }    
}

public void setContext(Context context) {
    attachBaseContext(context);
}

/**
  * The Android system calls this when we are connected to the MarketBillingService.
  */
public void onServiceConnected(ComponentName name, IBinder service) {
    Log.i(TAG, "MarketBillingService connected.");
    mService = IMarketBillingService.Stub.asInterface(service);
}

protected Bundle makeRequestBundle(String method) {
    Bundle request = new Bundle();
    request.putString(BillingConst.BILLING_REQUEST_METHOD, method);
    request.putInt(BillingConst.BILLING_REQUEST_API_VERSION, 1);
    request.putString(BillingConst.BILLING_PACKAGE_NAME, getPackageName());
    return request;
}

public boolean checkBilling(){      
    try {
        Bundle request = makeRequestBundle("CHECK_BILLING_SUPPORTED");
        Bundle response = mService.sendBillingRequest(request);
        int code = response.getInt("RESPONSE_CODE");
        if(code==0){
            return true;
        } else {
            return false;
        }
    } catch (Exception e) {
        e.printStackTrace();
        System.err.print(e.getMessage());
        return false;
    }
}

public void onServiceDisconnected(ComponentName arg0) {
    // TODO Auto-generated method stub

}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

该行发生异常：

捆绑响应 = mService.sendBillingRequest(request);

发生这种情况是因为 mService 变量为空。mService 变量在该方法上初始化：

```
public void onServiceConnected(ComponentName name, IBinder service) {
    Log.i(TAG, "MarketBillingService connected.");
    mService = IMarketBillingService.Stub.asInterface(service);
} 
```

（如该指南中所述：http: [//developer.android.com/guide/market/billing/billing_integrate.html#billing-service](http://developer.android.com/guide/market/billing/billing_integrate.html#billing-service)）问题是永远不会调用 onServiceConnected 。

启动服务的活动：

```
 public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.supportus);
    mBillingService = new BillingService();
    mBillingService.setContext(this);
    Intent intent = new Intent();
            intent.setClass(this, BillingService.class);        
    startService(intent);
    if(mBillingService.checkBilling()){
        Toast.makeText(this, "TRUE", Toast.LENGTH_SHORT);
    } else {
        Toast.makeText(this, "FALSE", Toast.LENGTH_SHORT);
    }
} 
```

我无法理解问题所在。为什么不调用 onCreate 和 onServiceConnected 方法？查看服务生命周期，应使用 startService 调用 BillingService onCreate 方法。我哪里错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:48:45.107

在您尝试使用 mService 之前，不会调用 onServiceConnected()。那是因为您的活动的 onServiceConnected() 在它的 onCreate() 返回之前不能被调用，它还没有完成。

基本上，您需要在服务连接后稍后再调用 checkBilling()。您可以响应服务连接来执行此操作，或者您可以稍后在用户实际尝试执行某项操作时执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:29:24.387

最后我找到了解决这个问题的方法。这是我的错。

错误在清单中，实际上我在服务中声明为

```
 <service android:name=".BillingService" /> 
```

但是 BillingService 类在一个子包中（resistorcalc.main.billing）。然后我将这一行替换为：

```
 <service android:name=".billing.BillingService" /> 
```

服务开始工作。

# android - 英文单词之间的Android泰米尔语字体

> ID：10635516
> 
> 赞同：12
> 
> 时间：2012-05-17T12:11:21.883
> 
> 标签：android, textview, android-fonts, tamil

我有一个 TextView，中间有一个巨大的文字

我在 textview 中的部分文字：

> Kolam 使用季节性消息，例如欢迎 (நல்வரவு)。有时会在奉献者的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:27:23.763

尝试通过 setTypeface 将此[Akshar.ttf](http://tamil.changathi.com/Fonts.aspx)字体设置为您的 TextView，它支持英语和泰米尔语。

* * *

结果如下：

![在此处输入图像描述](../Images/31d497f1749cbb35c7098d3718c23d6f.png)

或者，寻找支持这两种语言的类似字体。

* * *

您的第二个解决方案是使用 **SpannableStringBuilder**为这个小的泰米尔语文本部分使用图像。

* * *

## 将自定义字体设置为 TextView 的代码：

假设您在**assets**文件夹下的**fonts文件夹中有****Akshar.ttf**字体：

 ****```
 Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/Akshar.ttf");               
    TextView tv = (TextView) findViewById(R.id.CustomFontText);
    tv.setTypeface(tf);
    tv.setText("Seasonal messages like welcome (நல்வரவு) is used in Kolam. Volunteering to draw kolam at temple is sometimes done when a devotee's"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:45:45.247

如果您想在 TextView 中支持多种字体，但在单个 ttf 中不支持它们，还有另一种解决方案：

## 使用以下代码：（我使用的是孟加拉语和泰米尔语字体）

```
 TextView txt = (TextView) findViewById(R.id.custom_fonts);  
        txt.setTextSize(30);
        Typeface font = Typeface.createFromAsset(getAssets(), "Akshar.ttf");
        Typeface font2 = Typeface.createFromAsset(getAssets(), "bangla.ttf");   
        SpannableStringBuilder SS = new SpannableStringBuilder("আমারநல்வரவு");
        SS.setSpan (new CustomTypefaceSpan("", font2), 0, 4,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        SS.setSpan (new CustomTypefaceSpan("", font), 4, 11,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        txt.setText(SS); 
```

* * *

结果是：

![在此处输入图像描述](../Images/c4933febeef66f9703b0f0684b64deff.png)

* * *

## CustomTypefaceSpan 类：

```
package my.app;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.text.style.TypefaceSpan;

public class CustomTypefaceSpan extends TypefaceSpan {

private final Typeface newType;

public CustomTypefaceSpan(String family, Typeface type) {
    super(family);
    newType = type;
}

@Override
public void updateDrawState(TextPaint ds) {
    applyCustomTypeFace(ds, newType);
}

@Override
public void updateMeasureState(TextPaint paint) {
    applyCustomTypeFace(paint, newType);
}

private static void applyCustomTypeFace(Paint paint, Typeface tf) {
    int oldStyle;
    Typeface old = paint.getTypeface();
    if (old == null) {
        oldStyle = 0;
    } else {
        oldStyle = old.getStyle();
    }

    int fake = oldStyle & ~tf.getStyle();
    if ((fake & Typeface.BOLD) != 0) {
        paint.setFakeBoldText(true);
    }

    if ((fake & Typeface.ITALIC) != 0) {
        paint.setTextSkewX(-0.25f);
    }

    paint.setTypeface(tf);
}
} 
```

* * *

[参考](https://stackoverflow.com/questions/4819049/how-can-i-use-typefacespan-or-stylespan-with-custom-typeface)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T09:28:46.657

我在 Android 4.0 中遇到了这个问题。我发现这是由于 csc（国家代码）。如果是印度，那么泰米尔语可以正常工作，否则无法正常工作。我可以确认这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T09:07:28.323

在 ICS (4.0) 之前，Android 系统中没有可用的泰米尔语字体。即使在那时它也有错误，谷歌用 Jelly Bean (4.2) 修复了这一切。

现在，如果您想在应用程序中显示泰米尔语，您需要使用 TAB、TAM、BAMINI 或 TSCII 编码。

我编写了一个[简单的库，可以动态地为您进行转换](https://github.com/mayooresan/Android-TamilUtil)。您只需编写如下的简单代码即可。

```
// Initialise the Typeface (assumes TSCII, Bamini, Anjal, TAB or TAM font located inside assets/fonts folder)
Typeface tf = Typeface.createFromAsset(getAssets(),"fonts/mylai.ttf");
// Initialises the TextView
TextView tv = (TextView)findViewById(R.id.textView1);
//Setting the Typeface
tv.setTypeface(tf);
//Magic happens here ;) encoding conversion
String TSCIIString = TamilUtil.convertToTamil(TamilUtil.TSCII, "வணக்கம் அன்ரொயிட்");
//Setting the new string to TextView
tv.setText(TSCIIString); 
```

我[在这个答案中写了更多关于这个主题的文章。请也检查一下。](https://stackoverflow.com/questions/15267292/tamil-font-in-android/15496145#15496145)****

# winforms - 捕获某个按钮单击的 WndProc 消息

> ID：10635518
> 
> 赞同：2
> 
> 时间：2012-05-17T12:11:27.670
> 
> 标签：winforms, .net-2.0, wndproc, windows-messages

我的表单上有一个取消按钮。我想在`WndProc`方法内部确定单击此`Cancel`按钮并为其编写一些代码。这是绝对必要的，因为否则我无法取消所有其他尚未执行的控件验证事件。

请帮忙。

.NET - 2.0，WinForms

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T06:45:13.310

这是您如何解析 WndProc 消息以在子控件上单击鼠标左键：

```
protected override void WndProc(ref Message m)
{
    // http://msdn.microsoft.com/en-us/library/windows/desktop/hh454920(v=vs.85).aspx
    // 0x210 is WM_PARENTNOTIFY
    // 513 is WM_LBUTTONCLICK
    if (m.Msg == 0x210 && m.WParam.ToInt32() == 513) 
    {
        var x = (int)(m.LParam.ToInt32() & 0xFFFF);
        var y = (int)(m.LParam.ToInt32() >> 16);

        var childControl = this.GetChildAtPoint(new Point(x, y));
        if (childControl == cancelButton)
        {
            // ...
        }
    }
    base.WndProc(ref m);
} 
```

顺便说一句：这是 32 位代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T13:11:22.017

> 如果存在验证失败的控件，则 CauseValidation 无济于事

好吧，确实如此，这就是该物业的设计目的。这是一个在工作中展示这一点的示例表单。在表单上放置一个文本框和一个按钮。请注意如何单击按钮以清除文本框，即使该框始终无法通过验证。以及如何关闭表单。

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        textBox1.Validating += new CancelEventHandler(textBox1_Validating);
        button1.Click += new EventHandler(button1_Click);
        button1.CausesValidation = false;
        this.FormClosing += new FormClosingEventHandler(Form1_FormClosing);
    }

    private void textBox1_Validating(object sender, CancelEventArgs e) {
        // Always fail validation
        e.Cancel = true;
    }
    void button1_Click(object sender, EventArgs e) {
        // Your Cancel button
        textBox1.Text = string.Empty;
    }
    void Form1_FormClosing(object sender, FormClosingEventArgs e) {
        // Allow the form to close even though validation failed
        e.Cancel = false;
    }
} 
```

# magento - 如何对产品进行分类

> ID：10635522
> 
> 赞同：1
> 
> 时间：2012-05-17T12:11:40.110
> 
> 标签：magento

如何按位置产品排序。

我正在制作一个滑块，并希望在滑块上对产品进行分类。我想在分类中使用构建，如最佳匹配，它位于类别 -> 产品选项卡上

这是我正在做的，但不会工作：

```
$product_collection = Mage::getModel('catalog/category')->getProductCollection()->setOrder('position','ASC');
    $selected = 0;
    foreach($product_collection as $product) {
        $full_product = Mage::getModel('catalog/product')->load($product->getId());
        if($full_product->getTypeId() === 'configurable'){ ?>
        <li>
              <img>
        </li>
<? } 
} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:32:36.217

您需要在提取其产品集合之前在类别模型中加载一个类别

```
$product_collection = Mage::getModel('catalog/category')->getProductCollection()->setOrder('position','ASC'); 
```

应该替换为

```
$product_collection = Mage::getModel('catalog/category')->load($somecategoryid)->getProductCollection()->setOrder('position','ASC'); 
```

# php - 如果变量2等于某个值，PHP如何设置变量1

> ID：10635526
> 
> 赞同：0
> 
> 时间：2012-05-17T12:11:53.830
> 
> 标签：php, arrays, variables, if-statement

嗨，我试图让一个变量在另一个变量的 if 语句之后设置自己，但我无法正确使用语法。请帮忙，这是我到目前为止的代码。

```
$subtype = htmlspecialchars($_POST['subtype']);

if      $subtype == ['12m'] {$subprice = 273.78}
elseif  $subtype == ['6m']  {$subprice = 152.10}
elseif  $subtype == ('1m')  {$subprice = 30.42} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T12:14:39.773

```
if ($subtype == '12m')
  $subprice = 273.78;
elseif ($subtype == '6m')
  $subprice = 152.10;
elseif ($subtype == '1m')
  $subprice = 30.42; 
```

或[`switch`](http://php.net/manual/en/control-structures.switch.php)声明：

```
switch ($subtype) {
  case '12m': $subprice = 273.78; break;
  case '6m' : $subprice = 152.10; break;
  case '1m' : $subprice = 30.42; break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:15:48.977

```
$subtype = htmlspecialchars($_POST['subtype']);

if      ($subtype == "12m") {$subprice = 273.78; }
elseif  ($subtype == "6m")  {$subprice = 152.10; }
elseif  ($subtype == "1m")  {$subprice = 30.42; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:17:55.840

Use PHP [switch()](http://php.net/manual/en/control-structures.switch.php) to achieve that:

```
$subtype = htmlspecialchars($_POST['subtype']);

switch($subtype) {
  case "12m":
    $subprice = 273.78;
    break;
  case "6m":
    $subprice = 152.10;
    break;
  case "1m":
    $subprice = 30.42;
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:16:27.937

```
$subtype = htmlspecialchars($_POST['subtype']);

if      ($subtype == "12m") {$subprice = 273.78}
elseif  ($subtype == "6m")  {$subprice = 152.10}
elseif  ($subtype == "1m")  {$subprice = 30.42} 
```

# sharepoint - SharePoint 文件上传栏

> ID：10635536
> 
> 赞同：1
> 
> 时间：2012-05-17T12:12:56.183
> 
> 标签：sharepoint

我有一个用户进行了一项调查。作为调查的一部分，他们希望提供四个问题/列，以便受访者可以上传文件。

1.  有人知道文件上传列类型吗？
2.  有没有一种利用文档库实现这一目标的编程方式？字段显示在表单上，​​但数据存储在带有调查中查找列的文档库中？

目标是在此过程中从用户那里接收文档并使其尽可能无缝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:06:08.967

编辑：哎呀，误解了...

简短的回答，使用调查列表类型，您无法上传文件。您必须创建一个自定义列表来执行此类操作，但不能这样做。

[https://sharepoint.stackexchange.com/questions/8806/attaching-an-item-to-survey-list](https://sharepoint.stackexchange.com/questions/8806/attaching-an-item-to-survey-list)

# python - PyGTK：将 matplotlib 图复制到剪贴板

> ID：10635537
> 
> 赞同：2
> 
> 时间：2012-05-17T12:13:08.217
> 
> 标签：python, gtk, matplotlib, pygtk

我正在开发可以生成图表的 PyGTK 应用程序。这是通过 matplotlib 实现的。如何添加复制到剪贴板功能？如何将图形复制到剪贴板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:50:43.083

这将在 Linux 中完成（只需在图像上单击鼠标，然后将其复制到剪贴板即可粘贴到例如 GIMP 中）：

```
import matplotlib.pyplot as plt
from matplotlib.backends.backend_gtk import FigureCanvasGTK as FigureCanvas
import gtk
import numpy as np

class W(gtk.Window):

    def __init__(self):

        gtk.Window.__init__(self)

        img = np.random.uniform(0,1,(200,200))

        fig = plt.Figure()
        fig.gca().imshow(img)
        self.image_canvas = FigureCanvas(fig)
        self.image_canvas.connect('button_press_event', self.do_clip)

        self.add(self.image_canvas)
        self.show_all()

    def do_clip(self, widget=None, event=None):

        snap = self.image_canvas.get_snapshot()
        pixbuf = gtk.gdk.pixbuf_get_from_drawable(None, snap,
            snap.get_colormap(),0,0,0,0,
            snap.get_size()[0], snap.get_size()[1])
        clip = gtk.Clipboard()
        clip.set_image(pixbuf)

w=W()
gtk.main() 
```

# php - 如何在浏览器中回显换行符？

> ID：10635539
> 
> 赞同：2
> 
> 时间：2012-05-17T12:13:13.730
> 
> 标签：php

我不知道如何在 PHP 中回显一个新行。我已经尝试过`echo "\n"`，但它不起作用。

我想在下面的代码中回显新行。

**代码**：

```
if (file_exists($fName)) {
   echo "CreationTime: ".$CreationTime.
        "CurrentTime: ".$CurrentTime.
        "after ".($fLifeTime)." Days from Creation: ".$fAge;
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:14:55.947

如果您正在从浏览器查看此输出，则必须使用`<br />`标记或放在`<pre>`回显之前。

对于新行
示例。

```
if (file_exists($fName)) {
   echo "CreationTime: ".$CreationTime. "<br />".
        "CurrentTime: ".$CurrentTime. "<br />" .
        "after ".($fLifeTime)." Days from Creation: ".$fAge;
   } 
```

前例

```
 if (file_exists($fName)) {
      echo "<pre>";
       echo "CreationTime: ".$CreationTime. PHP_EOL .
            "CurrentTime: ".$CurrentTime. PHP_EOL .
            "after ".($fLifeTime)." Days from Creation: ".$fAge;
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:14:46.810

你可以这样做

```
if (file_exists($fName)) {
    echo "CreationTime: ".$CreationTime.
    "<br />CurrentTime: ".$CurrentTime.
    "<br />after ".($fLifeTime)." Days from Creation: ".$fAge;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:15:35.413

尝试这样做：-

```
if (file_exists($fName)) {
   echo "CreationTime: ".$CreationTime.
        "CurrentTime: ".$CurrentTime.
        "after ".($fLifeTime)." Days from Creation: ".$fAge;
echo "<br/>"; //break to new line.
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:45:51.133

也许尝试使用[PHP_EOL](http://php.net/manual/en/reserved.constants.php#constant.php-eol)和[nl2br()](http://php.net/nl2br)？

```
if (!file_exists($fName)) {
    $info = "CreationTime: " . $CreationTime . PHP_EOL .
        "CurrentTime: ". $CurrentTime . PHP_EOL .
        "after ". ($fLifeTime)." Days from Creation: " . $fAge;

    echo nl2br($info);
} 
```

# jsp - StandardWrapperValve[jsp]：servlet jsp 的 Servlet.service() 抛出异常

> ID：10635541
> 
> 赞同：0
> 
> 时间：2012-05-17T12:13:36.127
> 
> 标签：jsp, jakarta-ee, nullpointerexception

```
 2012-03-23 10:42:08 StandardWrapperValve[jsp]: Servlet.service() for      servlet jsp threw exception
    java.lang.NullPointerException
        at org.apache.jsp.jsp.TitleFrame_jsp._jspService(TitleFrame_jsp.java:66)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:133)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:311)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:301)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:248)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:284)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:204)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:257)
        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:567)
        at org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:245)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:199)
        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:567)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:184)
        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:164)
        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:149)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:567)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:156)
        at org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:151)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:567)
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:972)
        at org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:206)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:833)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:732)
        at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:619)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:688)
        at java.lang.Thread.run(Thread.java:536) 
```

如何解决此错误？

每当我收到此错误时，我都必须重新启动 tomcat。而且我不想重新启动tomcat可以给我正确的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:59:26.617

您需要修复 TitleFrame.jsp 中的错误。有些东西是空的，你假设它不是。

您可以在 Tomcat 的工作目录中查找 TitleFrame_jsp.java 文件，问题将出现在该文件的第 66 行。您应该能够轻松地将其映射回 jsp 中的相关行。

# javascript - 通过javascript向图像源添加字母

> ID：10635542
> 
> 赞同：0
> 
> 时间：2012-05-17T12:13:39.807
> 
> 标签：javascript, html, gallery

在我的照片库中，我有它，因此单击图像只会将较大的图像更改为其来源。但现在我希望图像的 onclick 函数获取它最初注入图像的源，并在注入之前在末尾添加 3 个字母，“lrg”。

Javascript：

```
<script type="text/javascript">
    function setImg(a){
              document.getElementById('ImageFrame').src = 
                          a.getElementsByTagName('img')[0].src
            } 
        </script> 
```

您单击的 Html 图像。

```
<a href="#gallery" onclick="setImg(this);"><img class="gallery" src="JCF/PICT0421.jpg" 

/></a> 
```

改变的大图：

```
<div>
           <img id="ImageFrame" src="JCF/PICT0422.jpg" width="500" />
</div> 
```

当链接注入“imageframe”时，我希望源更改为 JCF/PICT0421lrg.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:18:10.073

如果我做对了，这将解决我们的问题。

```
<script type="text/javascript">
    function setImg(a){
              var arr = a.getElementsByTagName('img')[0].src.split(".");
              document.getElementById('ImageFrame').src = arr[0]+"lrg"+"."+arr[1];
            } 
        </script> 
```

扩展示例 [http://jsfiddle.net/ymutlu/E9Fq5/](http://jsfiddle.net/ymutlu/E9Fq5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:24:46.367

在更改`setImg`为

```
function setImg(a){
    var file_parts = a.getElementsByTagName('img')[0].src.split(".");
    var new_name = file_parts[0] + "lrg." + file_parts.slice(1).join(".");
    document.getElementById('ImageFrame').src = new_name;
} 
```

这将在文件名的第一个点之前添加“lrg”。

# javascript - 在 jquery 中检查元素是否存在

> ID：10635547
> 
> 赞同：0
> 
> 时间：2012-05-17T12:13:59.263
> 
> 标签：javascript, jquery, html

我有一个页面，我必须根据第一个表单中的第一个输入来搜索元素的存在

```
<input type="text" /><!-- first input -->
<button></button>
<div>
    <form><input value="3" /></form> <!-- first form -->
    <form><input value="3" /></form>
</div> 
```

和脚本

```
$("button").click(function()
{
    if( $(this).next().children("form").first().has("input[value='" + $(this).prev().val() + "']") )
        alert("Present");
    else
        alert("Absent");
}); 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:17:31.980

您可以通过检查查询返回的集合的长度来检查元素是否存在：

例如，如果我要检查我是否有表格：

```
var forms = $('form').length //0 if none, at least 1 if any 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:30:50.103

问题是该[`.has()`方法](http://api.jquery.com/has/)不返回布尔值，它返回一个 jQuery 对象，特别是它“从匹配元素的子集构造一个新的 jQuery 对象”。您需要检查该对象的长度以查看是否有任何元素匹配：

```
if($(this).next().children("form").first()
           .has("input[value='"+$(this).prev().val()+"']").length != 0) 
```

演示：http: [//jsfiddle.net/mmQHB/](http://jsfiddle.net/mmQHB/)

# ubuntu - Ubuntu 11.10 dhclient-enter-hook.d scripts not invoked

> ID：10635548
> 
> 赞同：0
> 
> 时间：2012-05-17T12:14:00.837
> 
> 标签：ubuntu, dhcp

I have a box with Ubuntu 11.10 installed. And the box was configured to get IP and hostname from dhcp.

We have set to scripts in /etc/dhcp/dhclient-enter-hooks.d/ folder. But these scripts were not invoked/executed. I have similar scripts in another box, which has Ubuntu 10.04 installed and hook scripts executes without issues. One difference is that in the 11.10 box has NetworkManager installed.

```
# ps -ef | grep dhclient
root       746   695  0 03:52 ?        00:00:00 /sbin/dhclient -d -4 -sf /usr/lib/NetworkManager/nm-dhcp-client.action -pf /var/run/dhclient-eth0.pid -lf /var/lib/dhcp/dhclient-559273da-a027-458e-b124-bdbb4976ee17-eth0.lease -cf /var/run/nm-dhclient-eth0.conf eth0 
```

How did I test that the script in /etc/dhcp/dhclient-enter-hooks.d was not running? I have placed a simple script "mytest" which has below code in /etc/dhcp/dhclient-enter-hooks.d. The file /tmp/enter-hook.out was never generated.

```
#!/bin/sh
echo "this is test file to test dhclient-enter-hook" > /tmp/enter-hook.out 
```

Snip of my /etc/network/interfaces

```
# cat /etc/network/interfaces 
auto lo
iface lo inet loopback

auto eth0 inet dhcp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:24:50.717

也许为时已晚，您已经通过其他方式解决了问题；但无论如何，由于我受到同样问题的影响，我想我会插话。

您的问题是 NetworkManager。这就是执行 dhclient，使用不同的配置文件而不执行任何钩子。这在 Ubuntu 中被归档为一个错误：

```
https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/293139 
```

您可以将脚本放在 /etc/NetworkManager/dispatcher.d 中，以便在 NetworkManager 调出界面时执行。在上面的错误中有一个导出到这些脚本的变量列表。如果您不需要它们中的任何一个，而只想在界面启动时执行某些操作，那么您应该已经足够了。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T21:04:21.247

直到几分钟前我也遇到了同样的问题，并选择了 dispatcher.d 脚本路径。因此，我编写了以下脚本并将其放入 /etc/NetworkManager/dispatcher.d/99resolv.conf.dhclient

```
#!/bin/sh -e
# Script to dispatch NetworkManager events
# It overwrites /etc/resolv.conf with the DNS of preference
# See NetworkManager(8) for further documentation of the dispatcher events.

sleep 3
rm -f /etc/resolv.conf && echo nameserver 127.0.0.1 > /etc/resolv.conf
service dnsmasq reload 
```

这个想法是，无论发生什么，都将所有 DNS 请求发送到 dnsmasq 正在等待回答的 localhost。现在所需要的只是 tel dnsmasq 在哪里可以找到真正的 resolv.conf 文件，因此它会知道将 DNS 请求发送到它不知道的主机名的位置。在 /etc/dnsmasq.d 中创建一个文件，比如 /etc/dnsmasq.d/upstream.conf 并将其放入这一行

```
resolv-file=/var/run/NetworkManager/resolv.conf 
```

`/var/run/NetworkManager/resolv.conf`是网络管理器存储它通过 DHCP 接收的 DNS 信息的地方。现在，每次您从 DHCP 服务器获得一些 DNS 信息时，您的 dnsmasq 服务器都会知道它们并相应地转发请求。

而且，你已经完成了。您唯一担心的是 dnsmasq 是否让您失望。

# java - Android坚持全球偏好？

> ID：10635549
> 
> 赞同：0
> 
> 时间：2012-05-17T12:14:11.720
> 
> 标签：java, android, sqlite

我已经有一个带有几个持久对象/类的工作 android 应用程序。但是，如果我向我的应用程序添加一些偏好怎么办？我是否也将它们作为一种属性类保存到数据库中？还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:49:18.227

使用`SharedPreferences`，也许与 a 结合使用，`PreferenceActivity`为您的用户提供一个“设置”屏幕，该屏幕采用 Android 标准 UI 来处理此类事情。

# c - 使用 Gstreamer 播放蓝牙音频流

> ID：10635551
> 
> 赞同：2
> 
> 时间：2012-05-17T12:14:14.250
> 
> 标签：c, linux, gstreamer

我已经开始从我的 Android 手机流式传输音频。我可以使用脉冲音频模块环回在我的笔记本电脑上播放它。但我想用 gstreamer 播放它。这将如何完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:18:27.070

如何在手机上开始直播？你如何在笔记本电脑上播放它（从什么来源循环回来）？

gstreamer 的一般起点是 gst-launch playbin2 uri="..."。URI 上的第一件事是协议（例如 rtsp:// 或 http://），然后是您的手机 IP 地址，然后是流的位置（如果需要）。

# php - 将变量从 HTML 页面传递到 PHP 脚本

> ID：10635561
> 
> 赞同：2
> 
> 时间：2012-05-17T12:14:41.627
> 
> 标签：php, variables, global-variables

我想知道是否有人可以帮助我。

下面的代码允许用户从图库中删除图像。

**完整的脚本减去样式**

```
 <?php session_start(); 

$_SESSION['userid']=$_POST['userid'];
$_SESSION['locationid']=$_POST['locationid'];

//echo $_SESSION['userid']; 
//echo $_SESSION['locationid'];
?>
<?php 

  $galleryPath = 'UploadedFiles/' . $_SESSION['userid'] . '/' . $_SESSION['locationid'] . '/';

  $absGalleryPath = realpath($galleryPath) . DIRECTORY_SEPARATOR; 

  $descriptions = new DOMDocument('1.0'); 
  $descriptions->load($absGalleryPath . 'files.xml'); 
?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=0.3">
        <title>Galleria Twelve Theme</title>
        <style>

        <script src="js/jquery-1.7.2.min.js"></script>
        <script src="js/jquery-ui-1.8.19.custom.min.js"></script>
        <script src="galleria/galleria-1.2.7.min.js"></script>
        <script src="galleria/themes/twelve/galleria.twelve.min.js"></script>
        <script src="galleria/plugins/history/galleria.history.min.js"></script>
        <link rel="stylesheet" href="galleria/themes/twelve/galleria.twelve.css">
         <style>

         .galleria-thumbnails .btn-delete {    
         display: block; /* Or just use a div instead of a span*/     
          position: absolute; bottom : 0px;  /*align at the bottom*/     
          width: 80px;     
          height: 17px;    
          cursor: pointer;     
          background: url(trash8.gif) no-repeat bottom; } 
         </style>

<script type="text/javascript"> 
Galleria.ready(function() { 
this.$('thumblink').click(); 

$(".galleria-image").append( 
"<span class='btn-delete ui-icon ui-icon-trash'></span>"); 

$(".btn-delete").live("click", function(){ 

// you do not need to find img and then src... just use id of image 
var img = $(this).closest(".galleria-image").find("img"); 

var userid=$(".hiddenvals").attr('userid'); 
var locationid=$(".hiddenvals").attr('locationid'); 

// send the AJAX request 
$.ajax({ 
url : 'delete3.php?userid='+userid+'&locationid='+locationid, 
type : 'post', 
data : { image : img.attr('src') }, 
success : function(){ 
alert('Deleting image... '); 
img.parent().fadeOut('slow'); 
} 
}); 

return false; 
}); 

}); 

</script> 

    </head>

<body>
<ul id="navigation">
<li class="left">
  <div align="center"><a href="javascript:document.viewimages.submit()" class="style2">&larr; Add Images</a></div>
</li>
</ul>
<form id="viewimages" name="viewimages" class="page" action="index.php" method="post"> <input name="userid" class="hiddenvals" type="hidden" value="<?php echo $_SESSION['userid']; ?>"> <input name="locationid" class="hiddenvals" type="hidden" value="<?php echo $_SESSION['locationid']; ?>"></form>
    <div class="content">
        <h1>Galleria Twelve Theme</h1>
        <p>Demonstrating a simple example.</p>

        <!-- Adding gallery images. We use resized thumbnails here for better performance, but it’s not necessary -->

        <div id="galleria">
          <?php for ($i = 0; $i < $descriptions->documentElement->childNodes->length; $i++) :  
                          $xmlFile = $descriptions->documentElement->childNodes->item($i);  
                          $name = htmlentities($xmlFile->getAttribute('originalname'), ENT_COMPAT, 'UTF-8');  
                          $description = htmlentities($xmlFile->getAttribute('description'), ENT_COMPAT, 'UTF-8');  
                          $source = $galleryPath . rawurlencode($xmlFile->getAttribute('source'));   
                  ?>
            <a href="<?php echo $source; ?>"><img data-title="<b>Image Name: </b> <?php echo $name; ?>" data-description="<b>Description:</b> <?php echo $description; ?>" src="<?php echo $source; ?>"></a>

      <?php endfor; ?>  
</body>
</html> 
```

本质上，用户单击删除图标，然后上面代码中调用的“delete.php”脚本从服务器中删除图像。这一切都很好。

我正在努力解决的是如何将两个变量值传递给“delete.php”脚本。它们是“userid”和“locationid”。

我尝试将以下内容添加到“delete.php”的开头：

```
<?php session_start(); 

$_SESSION['userid']=$_POST['userid'];
$_SESSION['locationid']=$_POST['locationid']; 
```

但是这些值不会被结转。我怀疑这可能是因为表单“POST”操作被用于导航到另一个 HTML 页面，尽管我不是专家，所以我可能弄错了。

我已经阅读了大量内容并搜索了有关如何解决此问题的教程，但我没有找到任何似乎可以提出解决方案的内容。

我只是想知道是否有人可以看看这个，并提供一些关于如何将这两个值传递给我的“delete.php”脚本的指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:18:18.050

如果它们在 html 页面中，请将它们添加到 ajax 请求中：

```
{ image : img.attr('src'),  userid: "VALUE", locationid: "VALUE"}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:20:08.673

```
 var userid=$('#userid').val();
 var locationid=$('#locationid').val();
 $.ajax({
                url : 'delete.php',
                type : 'post',
                dataType :  'json',
                data : { image : img.attr('src'),  userid: userid, locationid: locationid},
    ,
                success : function(){
                alert('Deleting image... ');
                img.parent().fadeOut('slow');
                }
          }); 
```

添加 dataType : 'json' 并在 delete.php 中通过

```
$userid=$_POST['userid'];
$locationid=$_POST['locationid']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:20:39.630

尝试从您的 html 页面发送 id，例如

```
 $.ajax({
    url : 'delete.php?userid=2&locationid=4',
   ........ 
```

然后在 php

```
$uid=$_POST['userid'];
$locid=$_POST['locationid']; 
```

如果您想为每个图像动态获取用户 ID 和位置 ID。

第一的; 在你 btn-delete 类中添加 uid 和 locid 属性。我想你正在循环通过 PHP。

喜欢===>

```
<input type="button" class="btn-delete" uid="2" locid="5"> 
```

然后在你的脚本中

```
 <script type="text/javascript"> 
    Galleria.ready(function() {
    this.$('thumblink').click();

    $(".galleria-image").append( 
    "<span class='btn-delete ui-icon ui-icon-trash'></span>"); 

    $(".btn-delete").live("click", function(){

    // you do not need to find img and then src... just use id of image
    var img = $(this).closest(".galleria-image").find("img");

    var uid=$(this).attr('uid');
    var locid=$(this).attr('locid');

    // send the AJAX request
    $.ajax({
    url : 'delete.php?userid='+uid+'&locationid='+locid,
    type : 'post',
    data : { image : img.attr('src') },
    success : function(){
    alert('Deleting image... ');
    img.parent().fadeOut('slow');
    }
    });

    return false;
    });

    });

</script> 
```

var id=$(this).attr('id');

# javascript - 修改 alert() 标题（Android Webview 中的Javascript）

> ID：10635563
> 
> 赞同：8
> 
> 时间：2012-05-17T12:14:46.220
> 
> 标签：javascript, android, webview

截图：[file://的页面](https://i.stack.imgur.com/4vTGJ.jpg)

无论如何要修改警报框标题吗？任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T02:25:28.937

实际上，您可以使用以下代码封装它：

```
 final Context myApp=this;

    webView.setWebChromeClient(new WebChromeClient(){
    @Override
    public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result)
    {
        new AlertDialog.Builder(myApp)
        .setTitle("Simmon says...")
        .setMessage(message)
        .setPositiveButton(android.R.string.ok,
                new AlertDialog.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int wicht)
            {
                result.confirm();
            }
        }).setCancelable(false)
        .create()
        .show();
        return true;
    };
    }); 
```

代码源[在这里](http://lexandera.com/2009/01/adding-alert-support-to-a-webview/)

升

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-11T06:47:48.243

有**3**种类型的 js 警报：

*   ***警报框***- 使用*确定*按钮继续。
*   ***确认框***- 带有*确定*和*取消*按钮。
*   ***提示框***- 从用户那里获取一个值，然后选择*确定/取消。*

* * *

*   将**onJsAlert**用于**alertBox**。
*   将**onJsConfirm**用于**confirmBox**。
*   将**onJsPrompt**用于**提示框**

> 我添加了 onJsConfirm 的示例代码，

```
 webViewLayout.setWebChromeClient(new WebChromeClient(){
        @Override
        public boolean onJsConfirm(WebView view, String url, String message, final JsResult result) {

            AlertDialog dialog =new AlertDialog.Builder(view.getContext()).
                    setTitle("Confirm").
                    setIcon(ContextCompat.getDrawable(view.getContext(),R.drawable.image)).
                    setMessage(message).
                    setNegativeButton("No", new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            result.cancel();
                        }
                    }).
                    setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            FlashMessage("JS");
                            result.confirm();
                        }
                    })
                    .create();
            dialog.show();
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:02:32.580

@Pointy 说由于浏览器的安全措施，这是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T20:53:58.970

是的，有可能，我做到了

```
 webview.setWebChromeClient(new WebChromeClient() {

        public boolean onJsAlert(WebView view, String url, String message, final android.webkit.JsResult result)
        {
            new AlertDialog.Builder(activity)
            .setTitle("Calendário App...")
            .setMessage(message)
            .setPositiveButton(android.R.string.ok,
                    new AlertDialog.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int wicht)
                {
                    result.confirm();
                }
            }).setCancelable(false)
            .create()
            .show();
            return true;
        };
            }); 
```

# c# - 将 RegEx 列入白名单以允许 youtube iframe

> ID：10635566
> 
> 赞同：0
> 
> 时间：2012-05-17T12:14:58.300
> 
> 标签：c#, asp.net, regex

我正在验证 HTML 输入（形成 rss 提要）以显示在 Mvc 视图中

我正在使用以下白名单方法来清理我的 html

```
private static Regex _tags = new Regex("<[^>]*(>|$)",
RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled);
private static Regex _whitelist = new Regex(@"
^</?(b(lockquote)?|code|d(d|t|l|el)|em|h(1|2|3)|i|kbd|u|li|ol|p(re)?|s(ub|up|trong|trike)?|ul)>$|
^<(b|h)r\s?/?>$",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);
private static Regex _whitelist_a = new Regex(@"
^<a\s
href=""(\#\d+|(https?|ftp)://[-a-z0-9+&@#/%?=~_|!:,.;\(\)]+)""
(\stitle=""[^""<>]+"")?\s?>$|
^</a>$",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);
private static Regex _whitelist_img = new Regex(@"
^<img\s
src=""https?://[-a-z0-9+&@#/%?=~_|!:,.;\(\)]+""
(\swidth=""\d{1,3}"")?
(\sheight=""\d{1,3}"")?
(\salt=""[^""<>]*"")?
(\stitle=""[^""<>]*"")?
\s?/?>$",
    RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);

/// <summary>
/// sanitize any potentially dangerous tags from the provided raw HTML input using 
/// a whitelist based approach, leaving the "safe" HTML tags
/// CODESNIPPET:4100A61A-1711-4366-B0B0-144D1179A937
/// </summary>
public static string Sanitize(string html)
{
    if (String.IsNullOrEmpty(html)) return html;

    string tagname;
    Match tag;

    // match every HTML tag in the input
    MatchCollection tags = _tags.Matches(html);
    for (int i = tags.Count - 1; i > -1; i--)
    {
        tag = tags[i];
        tagname = tag.Value.ToLowerInvariant();

        if (!(_whitelist.IsMatch(tagname) || _whitelist_a.IsMatch(tagname) || _whitelist_img.IsMatch(tagname)))
        {
            html = html.Remove(tag.Index, tag.Length);

        }
    }

    return html;
} 
```

我还想允许使用 iFrames 或 html5 视频标签显示来自 Youtube 或 Vimeo 的视频内容

任何人都可以为我指出一个更灵活的reg ex的正确方向吗？

这是我对 iframe 的尝试

```
private static Regex _whitelist_iframe = new Regex(@"
             ^<iframe\s
            src=""https?://(player.vimeo.com|www.youtube.com)/[-a-z0-9+&@#/%?=~_|!:,.;\(\)|\s]+""
            (\swidth=""\d{1,3}"")?
            (\sheight=""\d{1,3}"")?
            (\sframeborder=""\d{1,3}"")?
            (\sallowfullscreen)?
            \s?>$|^</iframe>$",
            RegexOptions.Singleline | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:13:27.157

上面的 RegEx 方法太严格了，更不用说凯文的观点了！

这是我所做的：

使用[html-agility-pack](http://htmlagilitypack.codeplex.com/)解析 Html，并按照此[stackoverflow 答案中所述对其进行清理](https://stackoverflow.com/questions/3113542/html-agility-pack-question-in-parsing#answer-3596315)

我还添加了一些代码来根据正则表达式检查图像或 iframe 的 src 标签。（我很确定它可以做得更好）

```
public class HtmlSanitizer
{
    private readonly IDictionary<string, string[]> _whitelist;
    private readonly List<string> _deletableNodesXpath = new List<string>();

    public HtmlSanitizer()
    {
        _whitelist = new Dictionary<string, string[]>
                        {
                            {"a", new[] {"href", "target", "title"}},
                            {"img", new[] {"src", "alt", "width", "height"}},
                            {"iframe", new[] {"src", "width", "height", "frameborder", "allowfullscreen" }},
                            {"strong", null},
                            {"em", null},
                            {"blockquote", null},
                            {"b", null},
                            {"p", null},
                            {"ul", null},
                            {"ol", null},
                            {"li", null},
                            {"div", new[] {"align"}},
                            {"strike", null},
                            {"u", null},
                            {"sub", null},
                            {"sup", null},
                            {"table", null},
                            {"tr", null},
                            {"td", null},
                            {"th", null},
                            {"dd", null},
                            {"dt", null},
                            {"dl", null},
                            {"h1", null},
                            {"h2", null},
                            {"h3", null},
                        };
    }

    public string Sanitize(string input)
    {
        if (input.Trim().Length < 1)
            return string.Empty;
        var htmlDocument = new HtmlDocument();

        htmlDocument.LoadHtml(input);
        SanitizeNode(htmlDocument.DocumentNode);
        string xPath = CreateXPath();

        return StripHtml(htmlDocument.DocumentNode.WriteTo().Trim(), xPath);
    }

    private void SanitizeChildren(HtmlNode parentNode)
    {
        for (int i = parentNode.ChildNodes.Count - 1; i >= 0; i--)
        {
            SanitizeNode(parentNode.ChildNodes[i]);
        }
    }

    private static Regex _srcAttribute = new Regex(@"^https?://[-a-z0-9+&@#/%?=~_|!:,.;\(\)]+$", RegexOptions.Singleline | RegexOptions.IgnoreCase
                         | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);

    private static Regex _iframeSrc = new Regex(@"https?://(player.vimeo.com|www.youtube.com)/[-a-z0-9+&@#/%?=~_|!:,.;\(\)|\s]+", RegexOptions.Singleline | RegexOptions.IgnoreCase
                         | RegexOptions.ExplicitCapture | RegexOptions.Compiled | RegexOptions.IgnorePatternWhitespace);

    private void SanitizeNode(HtmlNode node)
    {
        if (node.NodeType == HtmlNodeType.Element)
        {
            if (!_whitelist.ContainsKey(node.Name))
            {
                if (!_deletableNodesXpath.Contains(node.Name))
                {
                    //DeletableNodesXpath.Add(node.Name.Replace("?",""));
                    node.Name = "removeableNode";
                    _deletableNodesXpath.Add(node.Name);
                }
                if (node.HasChildNodes)
                {
                    SanitizeChildren(node);
                }

                return;
            }

            if (node.HasAttributes)
            {
                for (int i = node.Attributes.Count - 1; i >= 0; i--)
                {
                    HtmlAttribute currentAttribute = node.Attributes[i];
                    string[] allowedAttributes = _whitelist[node.Name];
                    if (allowedAttributes != null)
                    {
                        if (!allowedAttributes.Contains(currentAttribute.Name))
                        {
                            node.Attributes.Remove(currentAttribute);
                        }

                        // if img src ensure matches regex 
                        if (node.Name == "img" && currentAttribute.Name == "src")
                        {
                            if (!_srcAttribute.IsMatch(currentAttribute.Value))
                            {
                                // remove node 
                                node.Name = "removeableNode";
                                _deletableNodesXpath.Add(node.Name);
                            }
                        }

                        // if iframe - ensure it within allowed src tags 
                        if (node.Name == "iframe" && currentAttribute.Name == "src")
                        {
                            if (!_iframeSrc.IsMatch(currentAttribute.Value))
                            {
                                // remove node 
                                node.Name = "removeableNode";
                                _deletableNodesXpath.Add(node.Name);
                            }
                        }

                    }
                    else
                    {
                        node.Attributes.Remove(currentAttribute);
                    }
                }
            }
        }

        if (node.HasChildNodes)
        {
            SanitizeChildren(node);
        }
    }

    private string StripHtml(string html, string xPath)
    {
        HtmlDocument htmlDoc = new HtmlDocument();
        htmlDoc.LoadHtml(html);
        if (xPath.Length > 0)
        {
            HtmlNodeCollection invalidNodes = htmlDoc.DocumentNode.SelectNodes(@xPath);
            foreach (HtmlNode node in invalidNodes)
            {
                node.ParentNode.RemoveChild(node, true);
            }
        }
        return htmlDoc.DocumentNode.WriteContentTo();
        ;
    }

    private string CreateXPath()
    {
        string xPath = string.Empty;
        for (int i = 0; i < _deletableNodesXpath.Count; i++)
        {
            if (i != _deletableNodesXpath.Count - 1)
            {
                xPath += string.Format("//{0}|", _deletableNodesXpath[i].ToString(CultureInfo.InvariantCulture));
            }
            else xPath += string.Format("//{0}", _deletableNodesXpath[i].ToString(CultureInfo.InvariantCulture));
        }
        return xPath;
    }
} 
```

# couchdb - 映射复合键排序

> ID：10635567
> 
> 赞同：0
> 
> 时间：2012-05-17T12:15:02.903
> 
> 标签：couchdb

我尝试从 couchdb 显示应用程序的日志条目 - 每个日志条目都包含时间戳、日志标签和客户端的远程 IP，我的地图功能是：

```
{
"_id": "_design/log",
"language": "javascript",
   "views": {
       "browse": {
           "map": "function(doc){ if (doc.type=='log') {emit([doc.date,doc.tag,doc.ip], doc);}}"
       }
   }
} 
```

**现在如何获取按日期排序的指定 IP（标签）的日志条目？**

已经尝试过以下变体： /_design/log/_view/browse?startkey=["info","8.8.8.8"] 没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:22:13.773

您的开始键需要 3 个元素：日期、标签和 ip。

您不成功的查询在开始键中只有 2 个元素。

有一些关于复合键的文档。在所使用的示例中，它们具有不同的年、月和日键。您可以在本书中找到示例：http: [//shop.oreilly.com/product/0636920018247.do](http://shop.oreilly.com/product/0636920018247.do)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T04:44:59.240

地图功能：

```
function(doc) {
  if (doc.type === 'log') {
    emit([doc.tag, doc.ip, doc.date], 1);
  }
} 
```

查询参数*（正确的 url 编码）*：

```
?startkey=["info","8.8.8.8"]&endkey=["info","8.8.8.8",{}]&include_docs=true 
```

结果按日期排序，因为 tag 和 ip 是固定的。

# vba - 如何使用 cmd 将文件从 Windows 复制到 AS/400 IFS？

> ID：10635575
> 
> 赞同：0
> 
> 时间：2012-05-17T12:15:34.493
> 
> 标签：vba, copy, cmd, ibm-midrange

假设我想将文件从 Windows 本地目录（不是服务器上）复制到 AS/400 IFS，如何使用 cmd 来实现？我知道还有其他方法，例如硬盘映射或 iSeries Navigator，但这里的目的是使用 VBA 执行此类命令，以便当有人单击按钮时，目标文件将在 IFS 中复制。我尝试直接在 cmd 中使用复制命令，但由于未提供用户配置文件和密码而失败。那么是否可以在cmd中使用命令来实现这一点？如何？如果在此过程中弹出一个窗口要求我填写用户名和密码是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:09:04.733

您对 VBA 的选择是：

*   通过 FTP 上传到 IFS。
*   [通过 SMB ( iSeries Netserver](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzahl%2Frzahlusergoal.htm) )上传到 IFS 。
*   使用 [客户端] 访问自动化上传到数据库并复制到 IFS。

* * *

# FTP 示例

您可以创建一个 ftp 脚本文件并执行它。以下是我通常使用批处理文件的方式：

```
@echo off
echo open AS400_HOSTNAME > ftp.cmd
echo user AS400_USERNAME AS400_PASSWORD >> ftp.cmd
echo ascii >> ftp.cmd
echo cd AS400_PATH >> ftp.cmd
echo put PC_FILENAME AS400_FILENAME >> ftp.cmd
echo quit >> ftp.cmd
ftp.exe -n -s:ftp.cmd 
```

# 网络服务器示例

将驱动器映射到 iSeries Netserver 时，您可以强制输入用户名和密码：

```
NET USE Z: \\as400\share /USER:username password
COPY FILE.TXT Z:\DIR
NET USE Z: /DELETE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-11T21:32:13.187

```
Imports System
Imports System.Data
Imports System.IO
Imports System.Diagnostics
Imports Microsoft.VisualBasic.FileIO

Module Module1
Dim strCmdArg As String = "/c NET USE P: \\host.domain.com\root\home\user /user:host.domain.com\user password"
Dim strCmdDel As String = "/c NET USE /DELETE P:"
Dim strLocalFile As String = "\\windowsserver\share\folder\"
Dim strRemoteFile As String = "P:\"
Dim boolOverwrite As Boolean = True
Dim job As Process = Process.Start("cmd.exe", strCmdArg)
Dim endjob As Process = Process.Start("cmd.exe", strCmdDel)

Sub Main()
    Try
        job.Start()
        job.Dispose()
        job.Close()
        FileSystem.CopyDirectory(strLocalFile, strRemoteFile, boolOverwrite)
        endjob.Start()
        endjob.Dispose()
        endjob.Close()
    Catch Ex As Exception
        Console.WriteLine(Ex.Message)
        Console.WriteLine(Ex.StackTrace.ToString)
        endjob.Start()
        endjob.Dispose()
        endjob.Close()
    End Try
End Sub
End Module 
```

# asp.net-mvc - 上传 MVC Web API 4 Beta 时带参数的方法

> ID：10635578
> 
> 赞同：1
> 
> 时间：2012-05-17T12:15:42.890
> 
> 标签：asp.net-mvc, c#-4.0, rest, asp.net-web-api

我创建了一个方法，以便使用 web api 将图像上传到我的服务器。但是，我需要在发送多部分表单数据时发送其他参数。我想要做的是创建一个获取所需参数并通过查看该参数上传到所需位置的方法。方法如下

```
public void AddPhotoItemData( int UserID, int QuestID, int QuestTemplateItemID, double Latitude,  double Longitude) 
```

我不能做的是在同时发送多部分表单数据和这些参数时触发此方法。有没有办法用有参数的方法上传文件？

问候， 凯马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:10:53.183

您问题中的方法使用 RPC 样式签名，该签名针对基于 HTTP 的 API 提供的统一接口的粒度运行。查看这篇[优秀的博客文章](http://www.west-wind.com/weblog/posts/2012/May/08/Passing-multiple-POST-parameters-to-Web-API-Controller-Methods)，了解 RPC 和基于 HTTP 的 API 之间的“哲学”差异是什么。

Web API 有助于创建基于 HTTP 的 API。这意味着您将使用标准 GET/POST/DELETE 和其他 HTTP 方法向特定 URI 发送“表示”。这就是为什么如果没有某种包装器就不能真正支持“调用”中的多个“参数”。

# android - Best way to put vectorized symbols on button? Wingdings button title

> ID：10635579
> 
> 赞同：0
> 
> 时间：2012-05-17T12:15:47.353
> 
> 标签：android, button, icons, vector-graphics, wingdings

Suppose I want to draw simple icon on the button surface. Let it be the cross or some letter.

What is the best way to do this? Can I use wingdings or webdings font on button?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:38:24.350

由于 Android 使用 Unicode (utf-8)，您可以使用此处定义的任何符号，只要您的字体支持。只需使用复制和粘贴。我认为更好的解决方案是使用 ImageButton 使用您的 drawables 文件夹中的图像。这个文件夹可以在*project/res/drawables*或通过 Ecplipse Package-Explorer 找到，你应该使用它来复制和粘贴你的文件（支持 png、gif 和 jpg）

在 XML 布局文件中，图像通过以下方式分配给 ImageButton

```
<ImageButton
    android:id="@+id/imageButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" /> 
```

也可以看看：

*   [http://developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)
*   [http://developer.android.com/guide/topics/resources/providing-resources.html](http://developer.android.com/guide/topics/resources/providing-resources.html)
*   [http://developer.android.com/training/multiscreen/screendensities.html](http://developer.android.com/training/multiscreen/screendensities.html)

# php - 为什么 PDO 手册说 PDO 仍然可以进行 SQL 注入？

> ID：10635588
> 
> 赞同：4
> 
> 时间：2012-05-17T12:16:14.433
> 
> 标签：php, mysql

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

> 如果应用程序专门使用预准备语句，开发人员可以确定不会发生 SQL 注入（但是，如果查询的其他部分是使用非转义输入构建的，则仍然可能发生 SQL 注入）。

某些输入未转义的可能场景是什么？如果所有其他输入都使用 PDO 进入数据库，这是否可能？

我正在考虑使用 mysql_* 函数处理其他输入而不使用 mysql_real_escape_string 转义的场景。还有什么可能构成威胁的吗？

非常感谢。问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:19:40.560

这意味着您不能直接使用不受信任的值，例如作为列名或表名 - 或作为 LIMIT 参数。

例如，这是安全的：

```
$query = "SELECT * FROM tbl WHERE col = ?"; 
```

虽然这些不是：

```
$query = 'SELECT * FROM tbl WHERE col = ? LIMIT ' . $_GET['limit'];
$query = 'SELECT * FROM tbl WHERE ' . $_GET['field'] . ' = ?';
$query = "SELECT * FROM tbl WHERE col = ? AND othercol = '" . $_GET['other'] . "'";
$query = 'SELECT * FROM ' . $_GET['table'] . ' WHERE col = ?'; 
```

基本上，准备好的语句的占位符用于在经典查询中在单引号内使用转义值的地方。

如果您想知道为什么数据库通常不支持表名之类的占位符：除了动态表/列名并不常见的事实外，数据库引擎通常会在准备好准备好的语句时对其进行优化。但是，如果不确切知道访问了哪些表/列，则无法正确完成此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:22:44.117

考虑一下：

```
$sql = "SELECT * FROM ".$_GET['tablename']." WHERE somecol = ?"; 
```

因为我使用未转义的用户输入填充了表名，所以即使您已经转义了传递给比较的值，也可以传入例如`public_table p LEFT JOIN hidden_table h ON h.id = p.id`并获得您不希望我传递的结果。`somecol`

关键是，虽然准备好的语句可以安全地转义您在查询中传递给 a 的任何用户输入`?`，但它们无法转义在您将字符串传递给之前已经存在于字符串中的数据`prepare()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:21:45.800

这意味着不要被诱使认为 PDO 是灵丹妙药……如果您*不*使用准备好的语句，您仍然会很脆弱。

# php - 从字符串中获取第一个单词，但分隔符不同

> ID：10635589
> 
> 赞同：1
> 
> 时间：2012-05-17T12:16:14.823
> 
> 标签：php

我在 stackoverflow 上找到了这个从句子中获取第一个单词的解决方案。

```
$myvalue = 'Test me more';
$arr = explode(' ',trim($myvalue));
echo $arr[0]; // will print Test 
```

但是，这种情况下使用 ' '（空格）作为分隔符。如果您不知道分隔符是什么，有谁知道如何从字符串中获取第一个单词？它可以是''（空格）、'.' （句号），“。” （或逗号）。基本上，您如何从字符串中提取任何字母直到没有字母的程度？

例如：

*   'House, rest of sentence here' 将给出 'House'
*   '房子。' 也会给“房子”
*   'House thing'也会给'House'

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-05T05:46:37.887

有一个字符串函数 ( [strtok](http://php.net/strok) ) 可用于根据某些分隔符将字符串拆分为较小的字符串 ( *tokens* )。就本线程而言，第一个单词（定义为第一个空格字符之前的任何内容）`Test me more`可以通过对空格字符上的字符串进行*标记来获得。*

```
<?php
$value = "Test me more";
echo strtok($value, " "); // Test
?> 
```

有关更多详细信息和示例，请参阅[strtok PHP 手册页](http://php.net/strtok)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:20:00.120

[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)就是你要找的。

```
$str = "bla1 bla2,bla3";
$words = preg_split("/[\s,]+/", $str); 
```

此代码段按空格、\t、逗号、\n 分隔 $str。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:21:05.997

将[`preg_match()`](http://www.php.net/preg_match)函数与正则表达式一起使用：

```
if (preg_match('/^\w*/', 'Your text here', $matches) > 0) {
  echo $matches[0]; // $matches[0] will contain the first word of your sentence
} else {
  // no match found
} 
```

# visual-studio-2010 - web browser stopped opening on project run

> ID：10635595
> 
> 赞同：2
> 
> 时间：2012-05-17T12:16:41.357
> 
> 标签：visual-studio-2010, browser, settings, cassini

This problem started ocurring after I had installed Visual Studio 2011 beta. Either I run my asp.net site with or without debugging, browser doesn't open anymore. Web server starts working(asp.net development server and/or IIS Express) but no browser is opened automatically when I click the link [localhost:myport] from web server's context menu.

Any suggestions what the problem could be?

[UPDATE] Also links in "MS Outlook" and "MS Word" stopped working.

[UPDATE2] Fortunatelly the fix was found: [http://support.microsoft.com/kb/823301](http://support.microsoft.com/kb/823301)

# c# - try catch block to display Error message

> ID：10635596
> 
> 赞同：3
> 
> 时间：2012-05-17T12:16:45.417
> 
> 标签：c#, asp.net, ajax

I have a doubt about `Try` `Catch` blocks. If I get an error in `Try` block then it will redirect to `Catch` block as per to the rule. So can I set visible = true to my label into **catch block**.

i.e `lblError.visible=true;`

Is it correct as per coding standards? I am new to developing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:18:48.017

例如，您可以在 catch 块中将输入元素的可见性设置为 false 并显示错误面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:41:29.340

是的，您可以在 catch 块中编写任何代码，甚至可以`return`从方法中编写代码。有一次是您必须使用`finaly{}`块来释放您在引发异常的方法中使用的任何资源（例如，您使用数据库连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:22:55.757

Catch 块使开发人员能够恢复由 try 块中引发的错误造成的损害。

因此，如果 try 块中出现错误，您可以写下任何应该运行的代码。即错误记录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:19:50.463

没错，这有什么问题？也许你不习惯在 catch 块中看到和设置 lblError，因为 try..catch 可以出现在你的代码中的很多地方，如果是，你可以将这两行包装在一个函数中，并从每个 catch 块中调用它。

您还可以从 catch 块中抛出异常并在会话级别或应用程序级别的一个位置处理它们，并重定向到一个默认错误页面，您可以在其中获取最后一个错误并根据它显示用户友好的消息。

您还可以在 web.config 中启用 CustomErrors 部分，并在会话中发生任何错误时重定向到一个特定页面。

```
try
{
  //statements;
}
catch (Exception ex)
{
  ShowError(ex);
}

void ShowError(Exception ex)
{
   //Log or Email error first
   LogOrEmailError(ex);

   // you can write user friendly message based on the exception provided or a generic error message.
   lblError.Visible = true;
   lblError.Text = GetUserFriendlyErrorMessage(ex); // or throw; if you are planing to handle error in global.ascx or through CustomErrors in web.config
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T12:19:57.313

是的，非常。您可以在 catch 块中编写正常的编码行。

# php - html表单onsubmit编辑表单中的文本字段？

> ID：10635599
> 
> 赞同：0
> 
> 时间：2012-05-17T12:16:50.253
> 
> 标签：php, html, forms

我正在学习 php 和 html。

我试图在按下提交按钮时运行一个函数。然后我希望它使用该函数中的变量编辑表单上的文本字段。无需进入新页面……就像自我刷新一样。

我该怎么做呢？谢谢。

我想我已经看到了如何用 JavaScript 做到这一点`getelementbyID`。但我需要通过 php 来完成。

也许一个简单的解释方法是：按下按钮时，它会自动在文本字段中生成密码。

我正在使用的功能：

```
<?
function genkey($length){
    $key = '';
    list($usec, $sec) = explode(' ', microtime());
    mt_srand((float) $sec + ((float) $usec * 100000));

    $possibleinputs = array_merge(range('z','a'),range(0,9),range('A','Z'));

    for($i=0; $i<$length; $i++) {
        $key .= $possibleinputs{mt_rand(0,61)}; }
    return $key;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:21:12.637

使用[ajax](http://api.jquery.com/jQuery.ajax/)从 php 文件中获取密码并更新文本字段。

一些使用 jquery 和 ajax 的示例代码：

```
$.ajax({
url : 'ajax.php',
type : 'post',
success : function(data){
$('#password_field').val(data)        
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:29:03.413

```
$.ajax({
    url: "/your_php_page/function", 

    type: "POST",

    data: "parameters you want to post to the function",

    success: function(data){
        $('#input_field_to_be_updated').val(data);
    }

});

Your php function should be echoed the password which you want to place it in input box. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:30:03.927

像这样：

```
//    index.php
<?php
function genkey($length){
    $key = '';
list($usec, $sec) = explode(' ', microtime());
mt_srand((float) $sec + ((float) $usec * 100000));

$possibleinputs = array_merge(range('z','a'),range(0,9),range('A','Z'));

for($i=0; $i<$length; $i++) {
    $key .= $possibleinputs{mt_rand(0,61)}; }
return $key;
}

$data = array();
if( !empty($_POST['variable']) ) {
    $data['variable'] = genkey( strlen($_POST['variable']) );
} else {
    $data['variable'] = '';
}
?>
//...HTML...
<form action="" method="POST">
<input name="variable" value="<?=$data['variable']?>">
<input type="submit" value="toPHP">
</form>
//...HTML... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:32:01.927

使用该函数创建一个单独的 php 文件（keygen.php）。

```
<?php

$length=$_GET['klength'];

 echo genkey($length);

  function genkey($length){
   $key = '';
  list($usec, $sec) = explode(' ', microtime());
  mt_srand((float) $sec + ((float) $usec * 100000));

$possibleinputs = array_merge(range('z','a'),range(0,9),range('A','Z'));

for($i=0; $i<$length; $i++) {
  $key .= $possibleinputs{mt_rand(0,61)}; }
return $key;
}

?> 
```

比在您的 html 文件中添加此代码

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"    type="text/javascript"></script>

<script type="text/javascript">
 $(document).ready(function() {

$.get('keygen.php?length=32', function(data) {
alert(data)
 });    

});
</script> 
```

# jquery - jQuery向左移动

> ID：10635601
> 
> 赞同：0
> 
> 时间：2012-05-17T12:16:50.570
> 
> 标签：jquery, html, css, move

我正在尝试向子菜单添加一个小的漂亮效果，但我不能使用`marginLeft`，因为它会弄乱容器。所以我试图通过使用`left`而不是`marginLeft`，但我无法让它工作......任何想法为什么？

```
$('#order_list li').hover(function(){
  $(this).stop().animate({ "left": "14px" }, 250, function() {
    $(this).animate({ "left": "10px" }, 250);
  });
},function(){
  $(this).stop().animate({ "left": "4px" }, 250, function() {
    $(this).animate({ "left": "0px" }, 250);
  });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:20:05.370

[CSS Left](http://www.w3schools.com/cssref/pr_pos_left.asp)仅适用于[定位](http://www.w3schools.com/cssref/pr_class_position.asp)元素。

尝试添加`position:relative;`到`li`.

例如

```
#order_list li {
  position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:20:12.183

```
$('#order_list li').hover(function(){
  $(this).stop().animate({ "textIndent": "14px" }, 250, function() {
    $(this).animate({ "textIndent": "10px" }, 250);
  });
},function(){
  $(this).stop().animate({ "left": "4px" }, 250, function() {
    $(this).animate({ "textIndent": "0px" }, 250);
  });
}); 
```

# android - 谷歌地图上没有显示几个位置

> ID：10635603
> 
> 赞同：1
> 
> 时间：2012-05-17T12:17:09.033
> 
> 标签：android, google-maps

我有商店列表，当我根据从网络服务器获得的纬度和经度值单击任何商店时，我会在地图上显示它们。他们中的一些人出现，但有些人不会......我知道这不是一个好问题......但我只是期待可能遇到同样问题的人可能会有所帮助。

这是代码：

```
Double Storelat = (FeedListViewActivity.lat);
        Double Storelng = (FeedListViewActivity.lng);

        storeLocation = new GeoPoint((int) (Storelat * 1E6), (int) (Storelng * 1E6));

public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, shadow);
        Point locationPoint1 = new Point();

        Projection projection1 = mapView.getProjection();
        projection1.toPixels(storeLocation, locationPoint1);

        Paint containerPaint = new Paint();
        containerPaint.setAntiAlias(true);
        int containerX1 = locationPoint1.x;
        int containerY1 = locationPoint1.y;

        if (shadow) {
            containerX1 += CONTAINER_SHADOW_OFFSET;
            containerY1 += CONTAINER_SHADOW_OFFSET;
            containerPaint.setARGB(90, 0, 0, 0);
            canvas.drawCircle(containerX1, containerY1, CONTAINER_RADIUS,
                    containerPaint);

        } else {
            containerPaint.setColor(Color.RED);
            canvas.drawCircle(containerX1, containerY1, CONTAINER_RADIUS,
                    containerPaint);
        }
} 
```

这些是我从网络服务器获得的值：

在职的：

纬度 = 18.5170002 lng = 73.858078

不工作：

纬度 = 18.618679 lng = 73.8037491

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:01:02.283

你的答案就在你的问题本身

```
working:

lat = 18.5170002 lng = 73.858078

not working:

lat = 18.618679 lng = 73.8037491 
```

根据上面提供的东西，您可以看到精度差异我也面临同样的问题是 6 个月，我已经将 6 精度提高到 8 精度并且当时运行良好。

如果您通过 18.618679 那么它会将其视为 0.18618679 进行确认尝试缩小到 2 级或 3 级，您将在意想不到的地方得到您的观点。

# mysql - 检查一个字段内容是否不在其他表的多个字段中

> ID：10635604
> 
> 赞同：0
> 
> 时间：2012-05-17T12:17:10.957
> 
> 标签：mysql, select

我得到了`players`表和`host`字段，我还得到了第二个表`bans`，其中包含以下字段：`host`, `second_host`, `ip`。我需要检查是否`players`。`host`内容字段**不**等于`bans`表中这三个字段中的任何一个，有一个条件：`WHERE expiry >= UNIX_TIMESTAMP()`。

我已经建立了这个，但是正如你所看到的，bans 表中有三个条件，现在我不知道该怎么办。

```
SELECT * FROM players
WHERE host NOT IN (
      SELECT host 
      FROM bans 
      WHERE expires >= UNIX_TIMESTAMP()
) 
```

现在我必须对其他三个字段（`second_host`和`ip`）做同样的事情。这可以在一个查询中完成吗？如果是这样，请发布一个示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:23:15.100

在连接条件下最容易做到这一点：

```
SELECT players.*
FROM   players
  LEFT JOIN bans 
    ON players.host IN (bans.host, bans.second_host, bans.ip)
   AND (bans.expires >= UNIX_TIMESTAMP() OR bans.expires = -1)
WHERE  bans.PK IS NULL;  -- use primary key from bans table in place of PK 
```

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:29:47.420

```
SELECT * 
FROM   players 
WHERE  NOT EXISTS (SELECT 1 
                   FROM   bans 
                   WHERE  (players.host = bans.host 
                             OR players.host = bans.second_host 
                             OR players.host = bans.ip ) 
                          AND bans.expires >= Unix_timestamp()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:23:34.100

```
SELECT * FROM players
WHERE host NOT IN (
  SELECT host FROM bans WHERE expires >= UNIX_TIMESTAMP()
  UNION
  SELECT second_host from bans WHERE expires >= UNIX_TIMESTAMP()
  UNION
  SELECT ip from bans WHERE expires >= UNIX_TIMESTAMP()
) 
```

或者

```
SELECT * from players
WHERE host not in (SELECT host.....)
AND host not in (SELECT second_host....)
AND host not in (SELECT ip....) 
```

# iphone - NSURLIsExcludedFromBackupKey crashes before iOS 5.1

> ID：10635607
> 
> 赞同：4
> 
> 时间：2012-05-17T12:17:16.190
> 
> 标签：iphone, objective-c, ios, crash, icloud

Like many of iOS developers I have encountered the issue with application crashing on system before 5.1 when using `NSURLIsExcludedFromBackupKey`.

It was well described how to evaluate existence of this key on this thread:

[Use NSURLIsExcludedFromBackupKey without crashing on iOS 5.0](https://stackoverflow.com/questions/9620651/use-nsurlisexcludedfrombackupkey-without-crashing-on-ios-5-0)

One of [samvermette's](https://stackoverflow.com/a/9629347/334266) comments says that there is a bug in iOS simulator.

Nevertheless I have encountered the same issue with a ***Release*** build, even in 2 separate applications. After some investigation I have discovered that application crashed even before main() method beeing called. Which hinted me that this is connected with

`NSString * const NSURLIsExcludedFromBackupKey;`

evaluation at application launch.

I am not an expert in this field, but I have found out that, if any reference to `const` value occurs in code (even if it is not actually accessed in runtime) this `const` is evaluated at very application launch. And this simply causes that crash that many of us experience.

I would like to ask you for some help. Maybe you know a way how to 'weakly' refer to a const value, or maybe there is specific compiler flag. (Using Apple LLVM 3.1).

Thanks in advance.

*Please do not comments to put this const's value directly which is @"NSURLIsExcludedFromBackupKey" in this case. I am aware of this workaround, reson for this story is to find a general solution.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:33:22.280

您可以在 < 5.0.1 的系统上使用此代码

```
#include <sys/xattr.h>

- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    const char* filePath = [[URL path] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
} 
```

[在这里](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)阅读更多。

**编辑**

如果您只是询问如何检查外部常量的可用性，您可以将其地址与 NULL 或 nil 进行比较。这是[推荐](http://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/cross_development.pdf)的方法。

```
if (&NSURLIsExcludedFromBackupKey) {
    // The const is available
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T10:16:39.237

感谢[https://stackoverflow.com/a/9620714/127493](https://stackoverflow.com/a/9620714/127493) ，我找到了解决方案！

```
NSString * const NSURLIsExcludedFromBackupKey; 
```

[与SDK 兼容性指南](http://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/cross_development/cross_development.pdf)所说的不同，即使 Base SDK 设置为 iOS 5.1，也不是弱链接。

诀窍是使用这个 const 的结果。
如果我做

```
NSLog(@"%@", NSURLIsExcludedFromBackupKey); 
```

结果是`@"NSURLIsExcludedFromBackupKey"`

所以我的结果代码是

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)

NSError * error = nil;
BOOL success;
if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"5.1")) {
    success = [storeURL setResourceValue:[NSNumber numberWithBool:YES] forKey:@"NSURLIsExcludedFromBackupKey" error:&error];
} 
```

# android - 使用 RelativeLayout 控制 ListView 行高

> ID：10635618
> 
> 赞同：0
> 
> 时间：2012-05-17T12:18:13.887
> 
> 标签：android, android-layout

我的谷歌搜索似乎是一个罕见的问题。

我有一个 XML 文件，它定义了我的 ListView 中的行应该是什么样子。

因为我一次只想看到一行，所以我覆盖了 Adapter 的 getCount，它非常适合只显示一行。问题在于，尽管我设置为 fill_parent，但该行仍然没有填满屏幕。

我已经尝试了很多东西，我得到的最接近的是设置 RelativeLayout minHeight 但它特定于屏幕尺寸。所以要么我的元素没有在 RelativeLayout 中正确设置，要么我需要一种方法来根据设备自动调整 minHeight。

我更喜欢在 XML 中执行此操作，但如果需要，可以在启动时以编程方式进行调整。

这是父容器的代码：

```
<RelativeLayout 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" android:orientation="vertical">

    <ListView 
         android:layout_width="fill_parent" 
    android:layout_height="fill_parent" />

</RelativeLayout> 
```

对于行 xml：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:orientation="vertical" 
    android:layout_height="fill_parent">

    <ImageView
        android:layout_width="60dp"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="15dp"
        android:layout_marginLeft="5dp" />

    <TextView
        android:layout_centerHorizontal="true"
        android:layout_width="185dp"
        android:layout_height="25dp"
        android:textSize="20sp"
        android:layout_marginTop="15dp"
        android:gravity="center"
        android:inputType="none" />

    <ImageView
        android:layout_width="60dp"
        android:layout_height="30dp"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="60dp"
        android:layout_marginLeft="5dp" />

    <TextView
        android:layout_centerHorizontal="true"
        android:layout_width="185dp"
        android:layout_height="25dp"
        android:textSize="20sp"
        android:layout_marginTop="60dp"
        android:gravity="center"
        android:inputType="none" />

    <TextView
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="35dp"
        android:layout_width="95dp"
        android:layout_height="50dp"
        android:textSize="18dp"
        android:layout_marginTop="110dp"
        android:gravity="center"
        android:inputType="none" />

    <org.gpgvm.widget.NumberPicker
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/btn_PrevLift"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
         android:layout_marginLeft="35dp"
        android:layout_marginBottom="120dp">
    </org.gpgvm.widget.NumberPicker>

    <TextView
        android:layout_alignParentRight="true"
        android:layout_marginRight="35dp"
        android:layout_width="95dp"
        android:layout_height="50dp"
        android:textSize="18dp"
        android:layout_marginTop="110dp"
        android:gravity="center"
        android:inputType="none" />

    <org.gpgvm.widget.NumberPicker
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/btn_NextLift"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
         android:layout_marginRight="35dp"
        android:layout_marginBottom="120dp" >
    </org.gpgvm.widget.NumberPicker>

    <Button
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="30dp"
        android:layout_marginBottom="30dp" />

    <Button
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="30dp"
        android:layout_marginBottom="30dp" />   

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:27:33.083

使用以下代码获取设备屏幕的高度并动态设置 minHeight

```
DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        int mHeight = metrics.heightPixels;
        int mWidth = metrics.widthPixels;

 RelativeLayout yourLayout= (RelativeLayout) findViewById(R.id.yourId);
    RelativeLayout.LayoutParams newParams = new RelativeLayout.LayoutParams(mWidth, mHeight);

    yourLayout.setLayoutParams(newParams ); 
```

# javascript - CSS 帮助 - 移动网站的页脚

> ID：10635622
> 
> 赞同：0
> 
> 时间：2012-05-17T12:18:28.717
> 
> 标签：javascript, jquery, html, css, web

我目前正在开发一个移动网站，我可以在它的页脚上使用一些帮助。

这是其外观的图像：

[http://i.stack.imgur.com/alH8M.jpg](http://i.stack.imgur.com/alH8M.jpg)

它应该具有以下内容：

1）宽度需要在不同的移动设备上工作，所以不能固定

2) home 左边和 newsletter 右边的边距应该相等

3) 如果设备宽度不足以使页脚显示在一行中，则链接应显示在多“行”中。我想说的是，不应该有水平滚动

我已经摆弄了很长时间，但无法让它工作。下面是一些入门的基本代码：

```
<nav>
    <ul>
        <li><a href="">Unternehmen</a></li>
        <li><a href="">Kompetenz</a></li>
        <li><a href="">Produkte</a></li>
        <li><a href="">Partner</a></li>
        <li><a href="">News</a></li>
    </ul>
</nav> 
```

提前感谢任何可以帮助我的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:40:53.490

```
nav { background: #016d9b; }
nav ul { text-align: center; padding: 0; }
nav ul li { display: inline-block; border-right: 1px solid white; padding: 0 10px; margin: 10px 0; }
nav ul li:last-child { border-right: none }
nav ul li a { color: white; text-decoration: none; } 
```

`ul`文本与中心对齐并`li`显示为内联块。

我认为这应该处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:34:03.363

```
nav{width:100%; display:block;}
nav ul{padding:0px; margin:0px;}
nav ul li{ width:20%; float:left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:35:55.860

试试这个

```
nav ul { list-style-type:none; margin:0; padding:0; }
nav ul li { float:left; padding-left:10px; margin-right:10px; border-left:1px solid #fff; }
nav ul li:first-child { margin-right:0 !important; }
nav ul li a { color:#fff; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:36:11.903

我不确定这会对你有帮助....

但我做了一些工作。您可以调整它将以多行显示的窗口大小。

这里jsfiddle：http: [//jsfiddle.net/thilakar/XM2qU/1/](http://jsfiddle.net/thilakar/XM2qU/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T12:48:37.747

对于您当前的 HTML 结构，您可以设置一些 CSS 来实现提供的图像的副本：

请参阅此工作[小提琴示例！](http://jsfiddle.net/zuul/VRvty/)

**HTML**

```
<nav>
    <ul>
        <li><a href="#" title="">Unternehmen</a></li>
        <li><a href="#" title="">Kompetenz</a></li>
        <li><a href="#" title="">Produkte</a></li>
        <li><a href="#" title="">Partner</a></li>
        <li><a href="#" title="">News</a></li>
    </ul>
</nav> 
```

**CSS**

```
body {
    margin: 0;
    padding: 0;
}
nav {
    width: 100%;
    background-color: blue;
    text-align: center;
}
ul {
    list-style-type: none;
    padding: 12px 0;
    width: auto;
    margin: 0 auto;
    display: block;
}
li {
    display: inline-block;
    margin: 0;
    padding: 0;
}
a {
    color: #FFF;
    border-left: 1px solid #FFF;
    text-decoration: none;
    font-family: sans-serif;
    padding: 0 8px;
    font-size: 12px;
    line-height: 17px;
}
li:first-child a {
    border-left: 0 none;
}
a:hover {
    text-decoration: underline;
} 
```

**预览：**

![在此处输入图像描述](../Images/606a64b4a49dc1954b18a4042260cb63.png)

### 一些相关链接可以帮助您了解建议的内容：

[CSS display 属性](http://www.w3schools.com/cssref/pr_class_display.asp)

[CSS 列表](http://www.w3schools.com/css/css_list.asp)

[CSS 填充](http://www.w3schools.com/css/css_padding.asp)

[CSS教程，学习CSS](http://www.w3schools.com/css/)

# regex - How would I specify a spring module validation “@RegExp” annotation using a regular expression from a .properties file or database

> ID：10635624
> 
> 赞同：1
> 
> 时间：2012-05-17T12:18:30.363
> 
> 标签：regex, spring-mvc

Here I define one field of my pojo file I want to get value from .properties file. And I message is already comming from .properties file
 `@RegExp(value = "((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})")`

`private String password;`

# php - 与两个用户 Ip 的通信

> ID：10635630
> 
> 赞同：0
> 
> 时间：2012-05-17T12:19:02.607
> 
> 标签：php, javascript, jquery, ajax, node.js

有什么方法可以在网站上交流两个用户？像 user1 点击名称 user2(whith Ip) 并发送消息。我知道使用数据库和 ajax 可以保存消息并发送给 user2，但它速度慢且不适合。我想要模拟私人聊天室并保存消息历史记录只要打开 jquery 对话框。我找到[了这个](http://nodejs.org/)，但我不知道是否合适。有人知道吗？

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

[网站](http://nodejs.org/)顶部代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:23:09.067

使用 WebSockets 可能是一个解决方案？[http://www.websocket.org/](http://www.websocket.org/)

这使它适合聊天系统，因此您可以使用 Push 而不是 Pull 来检查消息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:13:54.263

使用[socket.io](http://socket.io) - 它为糟糕的 IE 提供 WebSockets 和一些备用方案

# android - Android - Grow Heap (Frag Case) - Byte Allocation.. 不加载任何位图

> ID：10635633
> 
> 赞同：10
> 
> 时间：2012-05-17T12:19:44.963
> 
> 标签：android, memory-management, memory-leaks

当应用程序从启动画面加载到主页时会发生这种情况。它只发生在设备上而不是模拟器上：

```
05-17 08:10:16.627: I/dalvikvm-heap(14021): Grow heap (frag case) to 20.580MB for     2424256-byte allocation
05-17 08:10:16.666: D/dalvikvm(14021): GC_FOR_ALLOC freed 1K, 3% free 21000K/21511K, paused 21ms
05-17 08:10:16.697: D/dalvikvm(14021): GC_CONCURRENT freed 116K, 3% free 20885K/21511K, paused 2ms+2ms
05-17 08:10:16.720: D/dalvikvm(14021): GC_FOR_ALLOC freed 44K, 4% free 20841K/21511K, paused 10ms
05-17 08:10:16.728: I/dalvikvm-heap(14021): Grow heap (frag case) to 24.533MB for 4310896-byte allocation 
```

我使用了 Ecpise MAT - 字节分配已解决 - Android.Graphics.Bitmap $preloaded images...

我使用的设备是 Google Nexus Prime，Android 4.0

有没有人遇到过同样的情况？有人可以提供一些专业知识....

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T12:44:12.713

我遇到了同样的问题并找到了解决方案。

你是从资源中加载你的位图吗？如果是这样，请尝试将它们放在相应的可绘制文件夹中，而不是将它们保存在“drawable”或“drawable-mdpi”中。

当您将图像资源放在普通的 drawable 文件夹中时，对于系统来说，这意味着 drawable-mdpi。因此，具有高或超高 dpi 的设备（我认为 Galaxy Nexus 是超高的）将扩展该资源以匹配设备的 dpi。

如果您的资源只有 1 个尺寸，请将它们放入 drawable-nodpi 中，它将按原样使用。但是，您的某些布局可能会受到此影响，因此我将某些图像（如按钮图像等）保留在可绘制文件夹中，并将背景和其他更大的资源移动到 drawable-nodpi 中。

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-17T12:25:56.240

您可能正在尝试解码`Bitmap`导致`OutOfMemory`异常的非常大的内容。这意味着您尝试实现的操作超出了设备上每个应用程序允许的 VM 预算，就堆内存消耗而言（在您的设备上似乎是 24 MB，在您的模拟器上可能更多，这就是为什么它没有不会发生在那里！）。

尝试对您`Bitmap`的样本进行两倍的采样，例如：

```
BitmapFactory.Options o = new BitmapFactory.Options();
o.inSampleSize = 2;
Bitmap b = BitmapFactory.decodeFile(pathToBitmap, o); 
```

# asp.net - 运行 Web 应用程序后更改了 asp.net 中的文本框类型

> ID：10635636
> 
> 赞同：0
> 
> 时间：2012-05-17T12:19:50.707
> 
> 标签：asp.net, web-applications, textbox, passwords, controls

我正在开发一个网络应用程序。在那，有文本框，类型是“密码”。现在，当我运行应用程序时，类型已更改为“文本”。我不知道这是如何改变的。

```
<p class="input-row">
<asp:TextBox type="password" ID="txt1" runat="server" Style="padding-left: 120px"></asp:TextBox>
<span class="hint">Password</span>
</p> 
```

在我运行 Web 应用程序后，它会更改为 type="text"。

```
 <p class="input-row">
        <input name="ctl00$MainContent$txt1" type="text" id="MainContent_txt1" style="padding-left: 120px">
        <span class="hint">Password</span>
        </p> 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:22:28.617

您需要 TextMode 的 TextBox 上没有 Type 属性

```
<asp:TextBox TextMode="Password"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:22:42.073

你应该使用该属性`TextMode="Password"`

更多信息在

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.textmode.aspx)

# c++ - 外部链接的缺点

> ID：10635639
> 
> 赞同：2
> 
> 时间：2012-05-17T12:20:02.673
> 
> 标签：c++

使用带有外部链接的符号（除全局命名空间混乱/冲突之外）有什么缺点吗？例如，我会认为如果我有一个我从不调用的函数，如果它有内部链接，编译器可以丢弃它，但如果它是外部的，编译器必须保留该代码，因为稍后有人可能会链接到它. 它是否正确？还有其他缺点吗？

我问是因为我知道推荐使用未命名的命名空间而不是 static 关键字，但是由于未命名命名空间中的符号仍然具有外部链接，因此它们会遭受上述缺点（如果我是对的），因此并不完全比标准所说的静态函数更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:30:16.580

未命名命名空间中的函数具有外部链接这一事实几乎完全是技术性的。因为它们有一个“秘密”*翻译单元*依赖的唯一标识符，所以不可能从不同的翻译单元命名它们。这意味着编译器可以假定它们永远不会被另一个翻译单元按名称调用。我知道的大多数实现将未命名命名空间中的函数转换为局部符号而不是全局符号，就像具有真正内部链接的函数一样。

一个未命名命名空间中的函数可以被丢弃而不影响程序，如果它从未从定义它的翻译单元中调用，并且它的地址从未被获取并传递出翻译单元，这可能导致它被调用，而不是是直接命名的函数调用。

# google-app-engine - 间歇性 Base64 任务转换错误

> ID：10635646
> 
> 赞同：0
> 
> 时间：2012-05-17T12:20:29.453
> 
> 标签：google-app-engine

在使用 Gson 的 Pull Queue 任务的有效负载中传递 POJO java 对象时，我遇到了一个非常奇怪的情况。在不更改代码或在任务的有效负载中设置的 POJO 的情况下，这将随机成功或失败。

这是我正在使用的代码：

```
 PullQueueTaskPayLoad tqp = new PullQueueTaskPayLoad("id","name");
   tqp.uploadURL = taskPayLoad.uploadURL;
   tqp.urls = taskPayLoad.urls;
   tqp.sliceQueryParameter = taskPayLoad.sliceQueryParameter;
   TaskOptions task = TaskOptions.Builder.withMethod(TaskOptions.Method.PULL);
   task.payload(new Gson().toJson(tqp));
   q.add(task); 
```

然后使用外部队列使用者检索 POJO，如下所示：

```
 Type GSON_TYPE = new TypeToken<PullQueueTaskPayLoad>() {}.getType();
    byte[] b = new Base64().decodeBase64(leasedTask.getPayloadBase64().getBytes());
    String payload = new String(b);
    logger.info("About to convert payload: "+payload);
    PullQueueTaskPayLoad taskpayload = new Gson().fromJson(payload, GSON_TYPE); 
```

因此，从我所做的调试来看，当我解码有效负载字节时，问题似乎正在发生。在编码相同的 POJO（具有不同的 ID）时，我随机得到 2 个不同的解码有效负载字符串，如下所示：

正确解码：

{"id":"1786024566","sliceQueryParameter": {"queryId":786024566,"sliceStart":-1,"sliceNumber":1,"params":{"DefaultAnnotation":{"http://www. slicepedia.org/ontology#hasNumberOfBulletPoints_SIGN":["\u003d"],"http://www.slicepedia.org/ontology#hasNumberOfBulletPoints":["0"],"http://www.slicepedia.org/ontology #hasNumberOfTokens":["80"],"http://www.slicepedia.org/ontology#hasNumberOfTokens_SIGN":["\u003e"]},"VG":{"http://www.slicepedia.org/本体#hastense":["?"],"http://www.slicepedia.org/ontology#hasroot":["?"]}}},"uploadURL":"http://3.linguabox0412.appspot .com/_ah/upload/AMmfu6YRjxX23Ks-yh-9AZs4-3I1p6hxrFd6d4ptxSQegUkQHN7y4hNZwX6u7PufIHJbwtsHLXFZJ5P-vs90mslZEOMw0T-amN2qhEOAj_6YdwuY50FXMi8/ALBNUaYAAAAAT7Towgs4M00M5RLI8xnEOMdIxouZzuGu/","status":"IN_PROGRESS","action":"SLICE_SEARCH_AND_CREATE"}

解码错误：

{"id":"1-1968382407","sliceQueryParameter":{"queryId":-1968382407,"sliceStart":-1,"sliceNumber":1,"params":{"DefaultAnnotation":{"http:// /www.slicepedia.org/ontology#hasNumberOfBulletPoints_SIGN":["\u003d"],"http://www.slicepedia.org/ontology#hasNumberOfBulletPoints":["0"],"http://www.slicepedia. org/ontology#hasNumberOfTokens":["80"],"http://www.slicepedia.org/ontology#hasNumberOfTokens_SIGN":["\u003e"]},"VG":{"http://www.slicepedia .org/ontology#hastense":["?K??????~?X?\YXK? EU$?#?&?GG???2?Ɩ?wV&??C"?7?B?6??????W??B???gSe????'u?U'd ?D??6?S??4UV?D?e7?%U?&%F%f?D?$???$&vu6?fF$????EG?v??6?6դvt?D? ？？G？？＆D?fdֵ6%?苏??GD????F???$?V?CuF?$?F?F֤֧f?D??u?wt?4?C$?W?"?'7FGW2#?$ ???$?u$U52"?&7F???#?%4Ĕ4U?4T$4???E?5$TDR'

因此，当使用 Gson 将其转换回 POJO 时，第二个字符串显然会失败。但我不明白为什么这只发生在某些情况下而不是其他情况下。就我所见，它似乎总是发生在 ["?"] 字符串之后。我尝试替换和？与其他字符串，但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T09:07:35.663

我认为这里发生的是有效负载是 webSafe-base64 编码的。`+`在实践中，这意味着将and`/`与 and交换`=`为`-`and `_`and `.`。大多数 base64 库都支持解码 websafe base 64 字符串。

可能您在某个时刻遇到了这些字符之一，这会破坏解码。

[这是有关WebSafeBase64](http://code.google.com/p/stringencoders/wiki/WebSafeBase64)的一些信息

不过，请注意：任务队列实现实际上是发送填充等于（=），您必须在解析之前手动转换。

# android - 在多个工作站上使用 MapView 的最佳方式是什么？

> ID：10635647
> 
> 赞同：0
> 
> 时间：2012-05-17T12:20:32.540
> 
> 标签：android, android-mapview, keystore

我们是一个三个人一起工作的团队。现在很难正确分配工作，因为调试 apiKey 是在我的机器上生成的。MapView 在我朋友的 Mac/PC 上运行时停止工作。解决这个问题的最佳方法是什么？我应该用我的替换我朋友的 debug.keystore 并将密钥也放在 svn 上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:23:56.817

由于不同的`debug.keystore`地图视图无法正常工作...

在您的 Mac/PC 中创建新的 map-apikey 或创建新的 map-api 密钥。

# javascript - How to hide Ruby generated JavaScript code in a separate file?

> ID：10635655
> 
> 赞同：1
> 
> 时间：2012-05-17T12:21:06.380
> 
> 标签：javascript, ruby-on-rails, redirect, render

We currently have a tool on our website that is created by JavaScript. The JavaScript is generated by Ruby via .js.erb and .html.erb files. The problem is that it's proprietary code and we'd like to at least be able to move it to a separate file so it's not directly viewable when using "View Source" and maybe include it in our bundles like a regular .js file.

Is there some way to intercept the rendering and redirect it elsewhere or something?

The closest I've come was this - [Rails Javascript compression/minification on respond_to javascript response?](https://stackoverflow.com/questions/3805951/rails-javascript-compression-minification-on-respond-to-javascript-response)

We did have it working server-side but it was too slow for our clients. We're using Rails 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:37:54.693

Try Javascript Obfuscation . Check this question on Stackoverflow for various ways to Obfuscate Javascript . [How can I obfuscate (protect) JavaScript?](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

You can try YUI Compressor, Google Closure Compiler or UglifyJS .

The best way to prevent source code from being copied is to have most of the proprietary work done on the server side .

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-19T16:11:43.517

So we didn't find any way to fully hide the Javascript. What we did end up doing was juggling a rather unfortunate number of variables and method stubs created via ruby and passed to more static javscript located in a separate file which gets minified. Not the most elegant of solutions but if you can follow the stub trail then I applaud you.

# c - 从二进制转换为浮点

> ID：10635656
> 
> 赞同：1
> 
> 时间：2012-05-17T12:21:11.250
> 
> 标签：c, floating-point, binary

我正在为计算机科学大学做一些练习，其中一个是关于将`int`64 位数组转换为它的双精度浮点值。

理解第一位符号 +/- 非常容易。指数也一样，我们知道偏差是 1023。

我们在使用**有效**数字时遇到问题。我该如何计算呢？

最后，我想获得这些位所代表的实数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:38:21.003

您可以将这些位加载到与双精度相同大小的无符号整数中，获取该地址并将其转换为 a `void*`，然后将其转换为 a`double*`并取消引用。

当然，如果您真的应该解析浮点标准，这可能是“作弊”，但鉴于您到目前为止所陈述的参数，这就是我解决问题的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:23:11.043

计算给定 64 位的有效位非常容易。

根据使用 IEEE 754 的[wiki 文章](http://en.wikipedia.org/wiki/Double_precision_floating-point_format)，有效数字由前 53 位（从位 0 到位 52）组成。现在，如果您想将具有类似 67 位的数字转换为您的 64 位值，它将通过将值的尾随第 64 位设置为 1 来进行舍入，即使它之前是一位……因为其他 3 位：

**11110000 11110010 11111**在最后一个字节四舍五入后变为**11110000 11110011 ；**

因此无需存储第 53 位，因为它的值始终为 1。这就是为什么您只在有效位中存储 52 位而不是 53 位的原因。

现在要计算它，您只需要定位有效数字的位范围 [bit(1) - bit(52)] -bit(0) 始终为 1- 并使用它。

```
int index_signf = 1; // starting at 1, not 0
int significand_length = 52;
int byteArray[53]; // array containing the bits of the significand

double significand_endValue = 0;
for( ; index_signf <= significand_length ; index_signf ++)
{
    significand_endValue += byteArray[index_signf] * (pow(2,-(index_signf)));
}

significand_endValue += 1; 
```

现在你只需要`byteArray`在计算之前进行相应的填充，使用这样的函数：

```
int* getSignificandBits(int* array64bits){

    //returned array

    int significandBitsArray[53];
    // indexes++
    int i_array64bits = 0; 
    int i_significandBitsArray=1;
    //set the first bit = 1

    significandBitsArray[0] = 1;

    // fill it  
    for(i_significandBitsArray=1, i_array64bits = (63 - 1); i_array64bits >= (64 - 52); i_array64bits--, i_significandBitsArray ++)
        significandBitsArray[i_significandBitsArray] = array64bits[i_array64bits];

    return significandBitsArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:56:02.423

如果您有对象的字节表示，则可以将字节复制到正确类型的变量的存储中以进行转换。

```
double convert_to_double(uint64_t x) {
    double result;
    mempcy(&result, &x, sizeof(x));
    return result;
} 
```

您经常会看到类似`*(double *)&x`进行转换的代码，但实际上这将始终有效，这是 C 中未定义的行为。

# ruby-on-rails - Rails 3.0.10 中的 ActiveRecord::HasManyThroughSourceAssociationNotFoundError

> ID：10635662
> 
> 赞同：1
> 
> 时间：2012-05-17T12:21:22.527
> 
> 标签：ruby-on-rails, rails-3.0.10

我有以下代码

```
class Involvement < ActiveRecord::Base
   belongs_to  :matter
   belongs_to   :contact
end

class Contact < ActiveRecord::Base
    has_many :involvements, :order => "position", :dependent => :destroy
    has_many :matters, :through => :involvements, :source => :matter
end

class Matter < ActiveRecord::Base
    has_many :involvements
    has_many :plaintiffs, :through => :involvements, :source => :contact
    has_many :defendants, :through => :involvements, :source => :contact
end 
```

运行问题页面时出现错误。

ActiveRecord::HasManyThroughSourceAssociationNotFoundError in Matters#new

找不到源关联：模型参与中的联系人。尝试'has_many :plaintiffs, :through => :involvements, :source => '。它是其中之一吗？

在 rails 3.0.10 中升级 rails 2.3.11 项目时出现此错误，

它在 rails 2.3.11 中运行良好，但我无法理解为什么它会在 rails 3.0.10 中产生错误。

任何人都知道它的解决方案，或者为什么这会在rails 3.0.10中中断

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:26:28.677

我得到了它的解决方案，实际上在我的模型中 act_as_modified 插件正在使用......

由于它在 Rails 3.0.10 中弃用，它给了我错误，当我删除它时，所有关联都工作正常......

# python - 代码python有什么问题

> ID：10635668
> 
> 赞同：-3
> 
> 时间：2012-05-17T12:21:45.790
> 
> 标签：python

![在此处输入图像描述](../Images/77c29b6cd1dc691fbf71c1c68e6eff40.png)当我在[http://www.pyschools.com/quiz/view_question/s2-q1](http://www.pyschools.com/quiz/view_question/s2-q1)中执行此代码时。它给出了两个答案的错误......请帮助问题是：

```
Write a function to convert temperature from Celsius to Fahrenheit scale.
oC to oF Conversion: Multipy by 9, then divide by 5, then add 32.

Examples

    >>> Cel2Fah(28.0)
    '82.40'
    >>> Cel2Fah(0.00)
    '32.00' 
```

# 我的答案

```
 # Note: Return a string of 2 decimal places.
    def Cel2Fah(temp):
        x = 9.00
        y = 5.00
        z = 32.00
        a = temp * x
        a = a / y
        a = a + z
        return(a) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T12:28:15.243

在顶部它说：

```
# Note: Return a string of 2 decimal places. 
```

您没有返回字符串。您正在返回 type 的值`float`。

由于这看起来像家庭作业，我会让你弄清楚如何解决这个问题（提示：使用字符串格式化运算符）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T12:30:19.497

而是返回这个。

```
return '%.2f' %a 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:29:04.257

将您的退货声明更改为阅读

```
return '%.2f' %a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:24:32.230

该代码在语法上没有任何问题。如果您将数字作为参数传递，它应该可以工作。如果您传递除数字以外的任何内容，它将不起作用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-01-12T12:06:16.713

```
def Cel2Fah(temp):
     cel=(round((((temp*9)/5) +32),2))
     return '%.2f' %cel
print Cel2Fah(36.9)
print Cel2Fah(29.0) 
```

# java - 如何计算字母频率百分比？

> ID：10635669
> 
> 赞同：1
> 
> 时间：2012-05-17T12:21:57.910
> 
> 标签：java

在如何计算百分比方面遇到了一些麻烦（缺乏理解）。我需要找出：

> Q1。如何获得每个字母频率的百分比（满分 100）？，也是
> Q2。如何获取段落中每个第一个单词的字母频率？

到目前为止，这是我的代码：

```
import java.io.File;
import java.util.*;
import java.io.*;

public class LetterFrequency
{

  public static void main(String[] args )
  {
    char[] capital = { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J','K', 'L', 'M', 'N',
                       'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'};

    char[] small = { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
                     'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' };

    Scanner scan;
    try {
      scan = new Scanner(new File("F:/programming principles/Programming Principles - PART B/enciphered.txt"));
    } catch (Exception e) {
      System.out.println("File not found");
      return;
    }
    int[] count = new int[26];
    while(scan.hasNextLine()) {
      String line = scan.nextLine();
      System.out.println("Line read: " + line);
      char[] digit = line.toCharArray();
      for(int i = 0; i < digit.length; i++) {
        for(int j = 0; j < 26; j++) {
          if(digit[i] == capital[j] || digit[i] == small[j]) {
            count[j]++;
            break;
          }
        }
      }
    }
    System.out.println("");
    System.out.println("Comlete count");
    for (int i = 0; i < 26; i++)
    {
      System.out.print(" " + small[i]);
      System.out.println(" " + count[i]);
      //calculate percentage for the full count
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:35:28.947

要计算百分比，您需要跟踪`total`已扫描的字符数以及每个字符的计数。每次阅读一行时，将该行中的字符数添加到总数中。

最后，当您打印出计数时，您只需将计数除以扫描的字符总数（这将为您提供一个介于 0 - 1 之间的数字），然后将其乘以 100 得到此字符的百分比。

```
( count[ i ] / total ) * 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:31:39.433

当您计算每个字母时，只需增加一个全局计数器（总数），然后将每个字母的数量除以总数 * 100。

从您的代码中，我添加了 //New ：

```
int total = 0;   // New
for(int i = 0; i < digit.length; i++) {
for(int j = 0; j < 26; j++) {
if(digit[i] == capital[j] || digit[i] == small[j]) {
count[j]++;
total++;   // New
break;
}
}
}
}
System.out.println("");
System.out.println("Complete count");
for (int i = 0; i < 26; i++)
{
System.out.print(" " + small[i]);
System.out.println(" " + count[i]);
//calculate percentage for the full count
if (total > 0)      // New
  System.out.println(" " + ((count[i]/total) * 100) + "%");   // New
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:06:20.820

假设这是您的输入

```
a A b c d a A B C a 
```

并且您想找到百分比，然后输出将如下所示

```
a = 50% (as it is 5 time out of 10 alphabet)
b = 20% (as it is 2 time out of 10 alphabet)
c = 20% (as it is 2 time out of 10 alphabet)
d = 10% (as it is 1 time out of 10 alphabet) 
```

总共是 10 个字母。

以下是您需要做的更改

```
int myTotal = 0;
while(scan.hasNextLine()) {
  String line = scan.nextLine();
  System.out.println("Line read: " + line);
  char[] digit = line.toCharArray();
  for(int i = 0; i < digit.length; i++) {
    for(int j = 0; j < 26; j++) {
      if(digit[i] == capital[j] || digit[i] == small[j]) {
        count[j]++;
        myTotal = myTotal + 1;
        break;
      }
    }
  }
}
System.out.println("");
System.out.println("Comlete count");
for (int i = 0; i < 26; i++)
{
  System.out.print(" " + small[i]);
  System.out.print(" " + count[i]);
  if (count[i] > 0)
    System.out.println(" " + (((float) count[i]/myTotal)*100) + "%");
  else
    System.out.println(" 0%");
  //calculate percentage for the full count
} 
```

我在您的代码中所做的更改是

1.  添加变量为

    int myTotal = 0;

2.  添加了相同的变量来计算总字母。

    我的总计 = 我的总计 + 1；

3.  从下一行删除 ln

    System.out.println(" " + count[i]);

4.  添加了几行作为

    if (count[i] > 0) System.out.println(" " + ((count[i]/myTotal)*100) + "%"); 否则 System.out.println("0%");

***如果您有任何疑问，请告诉我***

## 更新 1

我改变了

```
 System.out.println(" " + ((count[i]/myTotal)*100) + "%"); 
```

到

```
 System.out.println(" " + (((float) count[i]/myTotal)*100) + "%"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-07T13:54:05.143

使用以下代码：

```
import java.util.Scanner;

public class JavaProgram {

    public static void main(String[] args) {
        calc();
    }

    public static void calc() {
        int i, j, k;
        String str;
        char c, ch;
        Scanner scan = new Scanner(System.in);

        System.out.print("Enter a String : ");
        str = scan.nextLine();

        i = str.length();
        for (c = 'A'; c <= 'z'; c++) {
            k = 0;
            for (j = 0; j < i; j++) {
                ch = str.charAt(j);
                if (ch == c) {
                    k++;
                }
            }
            if (k > 0) {
                float e1 = k;
                float e2 = i;
                double r = (e1 / e2) * 100;

                System.out.println("The character " + c + " has occurred for " + k + " times and its percentage is  " + r + "%");
            }
        }
    }
} 
```

# android - 如何保留对象数据而不在 Android 中的活动之间传递？

> ID：10635670
> 
> 赞同：0
> 
> 时间：2012-05-17T12:22:05.817
> 
> 标签：android, object, parcelable

实际上，我的应用程序流程是这样的 Home->A->B->Info(form data)->D->Final page.From final page如果我按下一个按钮它再次导航回A页面并开始流程从头开始。如果我来到信息页面，我应该显示早期数据。现在我的方法是在 A->B->Info->D->Final 的所有活动中传递可打包对象。如果想使用首选项，不'不支持可打包对象并且不想将每个对象字符串单独放在首选项中，因为我在对象中有超过 10 个项目。有没有更好的方法而不在活动之间传递捆绑。

BR，开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:29:04.400

您可以创建`Global class`和`declare Static`变量并在应用程序的任何软件中使用它们。例子：

```
public class global_variable {
    public static  String sample ;
} 
```

你想在哪里使用；

```
global_variable.sample = "your value"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:29:22.273

您可以使用任意数量的技术将数据对象解析为字符串并重新组合。然后您可以将字符串存储在首选项中。

看看 gson 将对象转换为 json [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/) 或者你可以谷歌 xstream 转换为 xml

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T12:29:47.847

如果您使用适当的 setter/getter 创建一个代表您的“对象”的类，并让该类实现`Parceable`，然后将该类`Activites`作为 a `Parceable`in a传递，`Bundle`那会很糟糕吗？

如果那会很糟糕（例如，如果对象数据的数量*非常*大或者它们`Parceable`在原则上不是这样）并且您一次只有一个有意义的类实例，您可以将该类设为单例或将其保留在您的`Application`对象中.

# javascript - 加载ajax内容时如何使浮动侧边栏继续浮动

> ID：10635675
> 
> 赞同：1
> 
> 时间：2012-05-17T12:22:25.690
> 
> 标签：javascript, jquery, ajax, sidebar, sticky

我是一个真正的 js 菜鸟，所以问题如下所示。

我有浮动侧边栏，当它到达页脚时会停止浮动。js代码如下：

```
$(window).load(function(){
    $(function() {
        var top = $('#sidebar').offset().top - parseFloat($('#sidebar').css('marginTop').replace(/auto/, 0));
        var footTop = $('#footer').offset().top - parseFloat($('#footer').css('marginTop').replace(/auto/, 0));

        var maxY = footTop - $('#sidebar').outerHeight();

        $(window).scroll(function(evt) {
            var y = $(this).scrollTop();
            if (y > top) {
                if (y < maxY) {
                    $('#sidebar').addClass('fixed').removeAttr('style');
                } else {
                    $('#sidebar').removeClass('fixed').css({
                        position: 'absolute',
                        top: (maxY - top) + 'px'
                    });
                }
            } else {
                $('#sidebar').removeClass('fixed');
            }
        }); 
```

在我实现 ajax 分页和内容加载之前，这工作得很好。仅当我查看第一页时，侧边栏才会滚动，当通过 ajax 加载第二页时，侧边栏不会滚动。你可以[在这里](http://www.rayshaft.com)看到。

你有什么想法我需要在代码中更改以使其按我想要的方式工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:27:20.680

问题只是你初始化`maxY`了`footTop`一次。当您扩展文档时，它们需要更改。您可能会在每次滚动时重新计算它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:30:52.397

这可能会帮助您找到所需的内容。

[http://cubiq.org/dropbox/followalong/](http://cubiq.org/dropbox/followalong/)

# delphi - 有人知道 Delphi 的免费编译器吗？

> ID：10635677
> 
> 赞同：5
> 
> 时间：2012-05-17T12:22:33.093
> 
> 标签：delphi

我想学习Delphi，有没有人知道一个好的免费程序可以让我用Delphi编写代码？

我想尽可能多地学习语言，我已经有点了解 C#、一些 LUA、一些 VB 和 Java，但我想了解更多。为了知道我猜。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T12:26:50.000

您可以使用 Lazarus [FreePascal](http://www.lazarus.freepascal.org/)。

# java - 如何尽可能降低比例？

> ID：10635687
> 
> 赞同：0
> 
> 时间：2012-05-17T12:23:24.413
> 
> 标签：java, bigdecimal

使用`BigDecimal`, 我如何转换`2.00`为`2`, `1.1230`to`1.123`等？

我如何`0`从`2.00`、 1`1.10000`或 3 中获取`0.123`？（不改变值的最低比例）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:26:18.550

对于第一部分，[`BigDecimal.stripTrailingZeros()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html#stripTrailingZeros%28%29)

不过，我完全不确定你对第二部分的意思。你想要最后一个数字还是什么？

# android - 无法解析嵌套的 xml 结构

> ID：10635690
> 
> 赞同：-1
> 
> 时间：2012-05-17T12:23:27.490
> 
> 标签：android, xml-parsing

这是我的 xml 结构：

```
<menu>
<item_category>
<category_name>ICECREAM</category_name>
<item>
<item_name>SOFTY</item_name>
<item_price>7.00</item_price>
</item>
<item>
<item_name>STICK</item_name>
<item_price>15.00</item_price>
</item>
<item>
<item_name>CONE</item_name>
<item_price>25.00</item_price>
</item>
</item_category>
<item_category>
<category_name>PIZZA</category_name>
<item>
<item_name>PIZZA-HOT</item_name>
<item_price>35.00</item_price>
</item>
<item>
<item_name>PIZZA-CRISPY</item_name>
<item_price>29.00</item_price>
</item>
</item_category>
</menu> 
```

这是我正在解析为列表视图的代码

```
public class AndroidXMLParsingActivity extends ListActivity {

    // All static variables
    //static final String URL = "http://api.androidhive.info/pizza/?format=xml";
    static final String URL = "http://192.168.1.112/dine/index.php/dineout/mob_view";
    //static final String URL = "http://192.168.1.112/dineout/index.php/dineout/view";

    // XML node keys
    static final String KEY_MENU= "menu"; // parent node
    //static final String KEY_ID = "foodjoint_id";
    static final String KEY_CATEGORY= "category_name";

    static final String KEY_ITEM= "item";
    static final String KEY_ITEM_NAME= "item_name";
    static final String KEY_PRICE= "item_price";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) 
        {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

          map.put(KEY_CATEGORY, parser.getValue(e,KEY_CATEGORY));
         map.put(KEY_ITEM_NAME, parser.getValue(e, KEY_ITEM_NAME));
           map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));

            menuItems.add(map);
            }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
new String[] {KEY_CATEGORY,KEY_ITEM_NAME,KEY_PRICE}, new int[] {R.id.category,R.id.name,R.id.costlab });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String category = ((TextView) view.findViewById(R.id.category)).getText().toString();
                String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                //String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.cost)).getText().toString();
                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                //in.putExtra(KEY_ITEM, name);

                in.putExtra(KEY_CATEGORY, category);
                in.putExtra(KEY_ITEM_NAME,name);
                in.putExtra(KEY_PRICE, cost);

                //in.putExtra(KEY_DESC, description);
                startActivity(in);

            }
        });
    }
} 
```

我的问题是我没有得到 category_name 的值。我尝试使用嵌套循环，但它都一样。请帮我 。我应该在代码中更改什么。

这是我的 xmlParser

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T05:10:44.630

试试这个方法

```
NodeList n,ncategories;
Element e;
static final String KEY_ITEMCATEGORY= "item_category";
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

   ncategories = doc.getElementsByTagName(KEY_MENU);

   for(int i=0;i<ncategories.getLength();i++){
       e=(Element)ncategories.item(i);
       n=e.getElementsByTagName(KEY_ITEMCATEGORY);

       for(int c=0;c<n.getLength();c++){ 
         HashMap<String, String> map = new HashMap<String, String>();
          e=(Element)n.item(c);

        String category= parser.getValue(e, KEY_CATEGORY).toString();
          Log.e("catname", parser.getValue(e, KEY_CATEGORY).toString());
          map.put(KEY_CATEGORY, category);

          NodeList  ns=e.getElementsByTagName(KEY_ITEM);
          for(int j=0;j<ns.getLength();j++){

             e=(Element)ns.item(j);
             Log.e("itemname", parser.getValue(e,KEY_ITEM_NAME).toString());
             Log.e("itemprice", parser.getValue(e, KEY_PRICE).toString()+"\n");
             map.put(KEY_ITEM_NAME, parser.getValue(e, KEY_ITEM_NAME));
             map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));

          }
     menuItems.add(map);

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:44:02.580

尝试这样的事情：

```
 NodeList nl_Cat = doc.getElementsByTagName(KEY_ITEM_CATEGORY);
    for (int i = 0; i < nl_Cat.getLength(); i++) 
    {
      HashMap<String, String> map = new HashMap<String, String>();
      Element cat = (Element) nl_Cat(i);
      NodeList nl = doc.getElementsByTagName(KEY_ITEM);
      for (int j = 0; j < nl.getLength(); j++) 
      {
        Element e = (Element) nl.item(j);
        map.put(KEY_ITEM_NAME, parser.getValue(e, KEY_ITEM_NAME));
        map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));
       }
      menuItems.add(map);
     } 
```

希望这有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:31:21.617

您正在检索项目元素列表并尝试在项目元素中查找 category_name。但是，查看您的 xml，category_name 是 item 元素的兄弟，而不是子元素。所以你不会以这种方式获得类别名称。您可能想要检索 item_category 列表，然后从中填充项目。

```
NodeList nl_categories = doc.getElementsByTagName(KEY_ITEM_CATEGORY);

for(int i = 0; i < nl_categories; i++)
{
    Element e = (Element) nl.item(i);
    String category = parser.getValue(e,KEY_CATEGORY);

    NodeList nl = e.getElementsByTagName(KEY_ITEM);

    // looping through all item nodes <item>
    for (int j = 0; j < nl.getLength(); j++) 
    {
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(j);

        map.put(KEY_CATEGORY, category);
        map.put(KEY_ITEM_NAME, parser.getValue(e, KEY_ITEM_NAME));
        map.put(KEY_PRICE, parser.getValue(e, KEY_PRICE));

        menuItems.add(map);
    }
} 
```

# ruby - 字符串中的数组条目不映射到哈希

> ID：10635695
> 
> 赞同：1
> 
> 时间：2012-05-17T12:23:57.583
> 
> 标签：ruby, arrays, hash

我对 Ruby 和一般的编程非常陌生。首先，我有以下代码：

```
hashy = {"a" => 1, "b" => 2, "c" => 3, "d" => 4, "e" => 6, "f" => 6}
array = ["a", "b", "c"]
string = "df"
array.push (string.split(//))
puts array
test = array.map {|a| hashy.select {|k,v| a == k}}

puts test 
```

此代码成功地将“a”、“b”和“c”映射到散列，并使用散列中的键和值填充测试。

这始终适用于预定义的数组。但是，如果我从字符串添加到数组（在本例中为字符串“df”，或从字符串创建数组，它不再将数组值映射到哈希，我不明白为什么。我已经研究了用字符串值填充数组的不同方法，但每次都会遇到同样的问题。

据我所见，“df”也应该映射到散列。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:30:01.420

这是因为您将`string.split(//)`数组`array`作为一个对象推送，因此结果中的数字中有一个数组元素`array`。

```
array = ["a", "b", "c"]
string = "df"
array.push (string.split(//))
 => ["a", "b", "c", ["d", "f"]] 
```

为避免这种情况，您可以使用数组连接，例如

```
array = ["a", "b", "c"]
string = "df"
array += string.split(//)
=> ["a", "b", "c", "d", "f"] 
```

# java - 使用搜索检索 LDAP 信息时出错

> ID：10635700
> 
> 赞同：1
> 
> 时间：2012-05-17T12:24:23.420
> 
> 标签：java, ldap

我正在尝试设置 LDAP LoginModule （使用[BrowserLdapLoginModule](http://www.boxerboxes.ca/JBoss_Ldap.shtml)）。用户名/密码正确；它从用户那里检索角色，但是当它尝试提取 CN 值时，它找不到这些值。

我遵循了这个过程，最后失败是我在下面的行中得到了一个 javax.naming.NameNotFoundException

```
NamingEnumeration roleAnswer = ctx.search(searchBaseDN, roleFilter, roleconstraints); 
```

具有以下值（不包括双引号）：

*   searchBaseDN(String) = "OU=角色,DC=siafake,DC=aplssib"
*   roleFilter(String) = "(distinguishedName=CN=Urgencias,OU=Roles,DC=siafake,DC=aplssib)"
*   derefRoleAttribute(String[] = { "cn" };

有了这些数据，我希望搜索返回 me `Urgencias`，但我只得到异常。这不是权限问题，因为使用相同的用户/密码我可以毫无问题地浏览 LDAP 树。

有什么想法/建议吗？提前致谢。

![LDAP 捕获](../Images/0174679ebed16833b9e75d57c4e768cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:08:27.657

好的，这是我找到的答案（另外，对 Terry Gardner 评论的一些澄清）

我的系统管理员给了我用户 A（“系统”用户，可以连接和浏览 LDAP）。将连接到我的应用程序的用户将是用户 F（最终用户）。当被问及配置我的 jboss 的示例时，他们将我重定向到 BrowserLdapModuleLogin (BLML)。

事实证明，BLML 通过与用户 A 进行初始连接来工作，以检索用户 F 数据（完整的 LDAP“名称”）。

之后，使用用户 F 连接数据建立一个新连接，以验证用户/密码并检索`memberOf`它所属的组（属性）。到此为止，一切正常（至少在我们的设置中）。

当我确实设置了仅获取“CN”值（而不是`CN=value,OU=organization....`）的选项时，问题就开始了。通过设置此选项，模块会再次尝试以**用户 F**身份登录到角色树以获取属性。但碰巧 F 没有这样做的权限。

由于该模块是由我们的 IT 人员提供的，而且我是 LDAP 新手，我认为我只是设置了一些错误，并且我不想更改代码中的任何内容。最后，碰巧在使用它的系统中，该模块仅用于身份验证；这些角色是从另一个数据库中提取的，我被迫围绕这个问题编写代码。

给您带来的困扰很抱歉...

# ant - 使用ant，如何打开带有多个参数的url

> ID：10635701
> 
> 赞同：0
> 
> 时间：2012-05-17T12:24:28.723
> 
> 标签：ant

我在用：

```
<exec executable="cmd">
<arg line="${argLine}" />
</exec> 
```

什么时候`argLine`

```
<property name="argLine" value="http://127.0.0.1:/product/findSameStyleSku.json?skuId=305&amp;style=120662"/> 
```

有 2 个参数，我使用`&amp;`转义`&`符号

但只开放`http://127.0.0.1/product/findSameStyleSku.json?skuId=305`

参数`style`丢失

**简而言之，我想跑步**

```
<target name="111test"> 
    <exec executable="cmd" output="e:/test.txt">
        <arg line="/c start '' 'http://127.0.0.1/product/findSameStyleSku.json?skuId=305&amp;%3bstyle=120662'" />
    </exec>  
</target> 
```

**2012-05-23 更新**

是的，Windows系统

我将代码更改为

```
<target name="111test">
    <exec executable="cmd" output="e:/test.txt">
        <arg value="/c" />
        <arg value="start" />
        <arg value="" />
        <arg value="http://127.0.0.1/product/findSameStyleSku.json?skuId=305&amp;%3bstyle=120662" />
    </exec>
</target> 
```

运行蚂蚁

只开

```
http://127.0.0.1/product/findSameStyleSku.json?skuId=305 
```

我把“ `&amp;%3b`”改成“ `&amp;`”

也只开

```
http://127.0.0.1/product/findSameStyleSku.json?skuId=305 
```

但是在cmd中，我使用

```
start "" "http://127.0.0.1/product/findSameStyleSku.json?skuId=305&style=120662" 
```

可以打开`http://127.0.0.1/product/findSameStyleSku.json?skuId=305&style=120662`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:58:24.190

不完全理解它试图打开什么。它是真的试图用 . 打开一个 URL `***?skuId=305`，还是你想说它试图打开你放弃的 URL，但不包括分号？

如果您说它省略了 URL 的最后一部分，您应该了解分号不能成为您发送的实际 URL 的一部分。它们是[保留](https://stackoverflow.com/a/1178053/368630)的，必须经过特殊编码。

确保分号甚至假设在那里。当您执行*GET*请求时，您将获得基本 URL，然后在该 URL 之后有一个问号。之后，您将有一系列参数传递给 URL，每个参数由 & 号分隔。在您的情况下，您似乎想向 URL 发送请求：

*   `http://127.0.0.1:/product/findSameStyleSku.json`

使用以下两个参数：

*   `skuId`=*`305`*
*   `style`=*`120662`*

所以，看起来分号是假的。否则，您传递的是参数*`;style`*而不是*`style`*. 而且，这似乎并不正确。

如果您确定分号确实存在，请尝试将 URL 中的分号替换为`%3b`：

```
<property name="argLine" value="http://127.0.0.1:/product/findSameStyleSku.json?skuId=305&amp;%3bstyle=120662"/> 
```

* * *

# 回复

> ，对不起，它不能正常工作，我更新了我的问题——感觉

不幸的是，由于这是在 Windows 机器上，并且是在您的机器上本地运行的东西，所以我自己无法运行测试。

但是，根据您帖子的第一部分，您正在尝试运行以下命令：

```
C> cmd http://127.0.0.1:/product/findSameStyleSku.json?skuId=305&amp;style=120662 
```

稍后在您的帖子中，您说您想运行：

```
C> cmd /c start '' 'http://127.0.0.1/product/findSameStyleSku.json?skuId=305&amp;%3bstyle=120662' 
```

第一个肯定不会从命令行工作。第二个有吗？

我已经使用这个在我当前的计算机上做了一些测试：

```
<property name="argLine"
    value="http://etzahaim.org/index.php?option=com_content&amp;task=blogcategory&amp;id=15&amp;Itemid=34"/>
<exec executable="curl">
    <arg value="${argLine}"/>
    <arg value="--include"/>
    <arg value="--output"/>
    <arg value="curl.out"/>
</exec> 
```

这是`curl`获取 URL 的命令。该 URL 也是使用 GET 方法，因此 URL 中还有一个问号和一些星号。这对我有用。

尝试从使用切换`<arg line='start' '' 'http://...>`到使用`<arg line>`，看看是否有帮助：

```
<target name="111test"> 
    <exec executable="cmd" output="e:/test.txt">
        <arg value="/c"/>
        <arg value="start"/>
        <arg value=""/>
        <arg value="${argline}" />
</exec> 
```

# java - NetBeans SSL 和命令行参数：服务器未收到消息

> ID：10635710
> 
> 赞同：2
> 
> 时间：2012-05-17T12:25:12.213
> 
> 标签：java, netbeans, ssl, command-line-arguments, netbeans-7.1

我不知道该怎么说，但这是我的问题。我想从这里测试 SSL [http://stilius.net/java/java_ssl.php](http://stilius.net/java/java_ssl.php)。我正在使用 NetBeans 7.1。在每个 void main 中，如果我插入这段代码`for (int i=0; i<arstring.length; i++) System.out.println(arstring[i]);`，我会看到参数传递正确。

但是，当我运行服务器和客户端（每个都在一个单独的文件夹中并且每个都有证书文件）时，当我在客户端中输入一些内容时，两个类的执行都会停止，并且服务器不会收到来自客户端的消息。

我真的被困在这里了。这是我第一次使用 Java 通过 Internet 进行通信，所以请尝试以简单的方式解释为什么我的程序无法正常工作。

# c# - ASP.NET 中的 Crystal Reports“无法打开连接”错误

> ID：10635716
> 
> 赞同：1
> 
> 时间：2012-05-17T12:25:47.890
> 
> 标签：c#, asp.net, crystal-reports

我有使用 SAP Crystal Reports 的 ASP.NET (C#) 应用程序。在 Visual Studio 中一切正常，但是当我将其部署到 IIS 时，会发生以下错误：

```
"Failed to open the connection. Failed to open the connection 'report name'.rpt". 
```

我已将报告更改为使用系统 DSN，现在之前的错误消失了，但它会生成以下错误：

```
"Database Logon Failed" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:11:40.813

```
 Dim db As New _yourdbcontext()
    Dim cr As New ReportDocument
    cr.Load(Server.MapPath("~/yourreport.rpt"))
    cr.SetDataSource(db.yourtable.ToList())
    CrystalReportViewer1.ReportSource = cr 
```

不要忘记在**水晶报表**和**模型**连接中设置用户和密码

# xslt - XSLT 根据父子元素的值删除子元素

> ID：10635718
> 
> 赞同：2
> 
> 时间：2012-05-17T12:25:53.180
> 
> 标签：xslt, element

我正在尝试使用这里使用的一些相同的逻辑[https://stackoverflow.com/a/10629806/662877](https://stackoverflow.com/a/10629806/662877)

到不同的 XML，但没有得到预期的输出。

如果 //TERR="KHM6" 则从输入中删除/剥离这 2 个元素 **CreatePaymentItems**和**CreatePayExt**并生成输出。有人可以告诉我我在这里缺少什么。

谢谢

**XSLT：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match=
 "*[../TERR='KHM6']/CreatePaymentItems | *[../TERR='KHM6']/CreatePayExt"/>
</xsl:stylesheet> 
```

**示例输入 XML：**

```
<ns0:DocTran doctype="Return" xmlns:ns0="http://test.Schemas.Out_Return">
  <TransactionType>
    <PayLineItems>
      <PayLineInsert>
        <PAYTYPE>4</PAYTYPE>
        <NUMBER>R2293416</NUMBER>
        <SERIAL>3335889530</SERIAL>
        <DOCDATE>05/03/2012</DOCDATE>
        <ITEMNMBR>4NZ3330000010</ITEMNMBR>
        <UNITPRCE>599.99</UNITPRCE>
        <XTNDPRCE>599.99</XTNDPRCE>
        <QUANTITY>1</QUANTITY>
        <TAXAMNT>43.65</TAXAMNT>
        <QTYONHND>1</QTYONHND>
        <TERR>KHM6</TERR>
      </PayLineInsert>
    </PayLineItems>
    <PayLineEXT>
      <PAYTYPE>4</PAYTYPE>
      <NUMBER>R2293416</NUMBER>
      <LNITMSEQ>2293416</LNITMSEQ>
    </PayLineEXT>
    <CreatePaymentItems>
      <CreatePaymentInsertRecord>
        <INTERID>TOTM</INTERID>
        <PAYTYPE>4</PAYTYPE>
        <PAYNUMBER>R2293416</PAYNUMBER>
        <DOCDATE>05/03/2012</DOCDATE>
        <DOCAMOUNT>645.03</DOCAMOUNT>
        <DOCNUMBER>2293416</DOCNUMBER>
      </CreatePaymentInsertRecord>
    </CreatePaymentItems>
    <CreatePayExt>
      <PAYTYPE>4</PAYTYPE>
      <PAYNUMBER>R2293416</PAYNUMBER>
      <SEQNUMBR>61261585</SEQNUMBR>
    </CreatePayExt>
  </TransactionType>
</ns0:DocTran> 
```

**预期输出 XML：**

```
<ns0:DocTran doctype="Return" xmlns:ns0="http://test.Schemas.Out_Return">
  <TransactionType>
    <PayLineItems>
      <PayLineInsert>
        <PAYTYPE>4</PAYTYPE>
        <NUMBER>R2293416</NUMBER>
        <SERIAL>3335889530</SERIAL>
        <DOCDATE>05/03/2012</DOCDATE>
        <ITEMNMBR>4NZ3330000010</ITEMNMBR>
        <UNITPRCE>599.99</UNITPRCE>
        <XTNDPRCE>599.99</XTNDPRCE>
        <QUANTITY>1</QUANTITY>
        <TAXAMNT>43.65</TAXAMNT>
        <QTYONHND>1</QTYONHND>
        <TERR>KHM6</TERR>
      </PayLineInsert>
    </PayLineItems>
    <PayLineEXT>
      <PAYTYPE>4</PAYTYPE>
      <NUMBER>R2293416</NUMBER>
      <LNITMSEQ>2293416</LNITMSEQ>
    </PayLineEXT>
  </TransactionType>
</ns0:DocTran> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:41:52.380

**问题在这里**：

```
*[../TERR='KHM6']/CreatePaymentItems 
```

这匹配`CreatePaymentItems`一个元素的子元素，该元素的兄弟元素`TERR`具有 value `"KHM6"`。

但是所提供的 XML 文档中的所有同级`TERR`都是无子级的。

**这是您想要的转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "*[PayLineItems/*/TERR = 'KHM6']
      /*[self::CreatePaymentItems or self::CreatePayExt]"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（更正为格式正确）：

```
<ns0:DocTran doctype="Return" xmlns:ns0="http://test.Schemas.Out_Return">
    <TransactionType>
        <PayLineItems>
            <PayLineInsert>
                <PAYTYPE>4</PAYTYPE>
                <NUMBER>R2293416</NUMBER>
                <SERIAL>3335889530</SERIAL>
                <DOCDATE>05/03/2012</DOCDATE>
                <ITEMNMBR>4NZ3330000010</ITEMNMBR>
                <UNITPRCE>599.99</UNITPRCE>
                <XTNDPRCE>599.99</XTNDPRCE>
                <QUANTITY>1</QUANTITY>
                <TAXAMNT>43.65</TAXAMNT>
                <QTYONHND>1</QTYONHND>
                <TERR>KHM6</TERR>
            </PayLineInsert>
        </PayLineItems>
        <PayLineEXT>
            <PAYTYPE>4</PAYTYPE>
            <NUMBER>R2293416</NUMBER>
            <LNITMSEQ>2293416</LNITMSEQ>
        </PayLineEXT>
        <CreatePaymentItems>
            <CreatePaymentInsertRecord>
                <INTERID>TOTM</INTERID>
                <PAYTYPE>4</PAYTYPE>
                <PAYNUMBER>R2293416</PAYNUMBER>
                <DOCDATE>05/03/2012</DOCDATE>
                <DOCAMOUNT>645.03</DOCAMOUNT>
                <DOCNUMBER>2293416</DOCNUMBER>
            </CreatePaymentInsertRecord>
        </CreatePaymentItems>
        <CreatePayExt>
            <PAYTYPE>4</PAYTYPE>
            <PAYNUMBER>R2293416</PAYNUMBER>
            <SEQNUMBR>61261585</SEQNUMBR>
        </CreatePayExt>
    </TransactionType>
</ns0:DocTran> 
```

**产生了想要的正确结果：**

```
<ns0:DocTran xmlns:ns0="http://test.Schemas.Out_Return" doctype="Return">
   <TransactionType>
      <PayLineItems>
         <PayLineInsert>
            <PAYTYPE>4</PAYTYPE>
            <NUMBER>R2293416</NUMBER>
            <SERIAL>3335889530</SERIAL>
            <DOCDATE>05/03/2012</DOCDATE>
            <ITEMNMBR>4NZ3330000010</ITEMNMBR>
            <UNITPRCE>599.99</UNITPRCE>
            <XTNDPRCE>599.99</XTNDPRCE>
            <QUANTITY>1</QUANTITY>
            <TAXAMNT>43.65</TAXAMNT>
            <QTYONHND>1</QTYONHND>
            <TERR>KHM6</TERR>
         </PayLineInsert>
      </PayLineItems>
      <PayLineEXT>
         <PAYTYPE>4</PAYTYPE>
         <NUMBER>R2293416</NUMBER>
         <LNITMSEQ>2293416</LNITMSEQ>
      </PayLineEXT>
   </TransactionType>
</ns0:DocTran> 
```

# asp.net - asp:GridView 更改标题单元格样式

> ID：10635720
> 
> 赞同：0
> 
> 时间：2012-05-17T12:26:00.400
> 
> 标签：asp.net, gridview

单击它后，我想更改标题单元格的样式。我`GridView`在`.Net 2.0`. 哦！我的网格是可排序的，所以点击标题后，会触发回发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:29:09.483

你必须在 JS 或 jQuery 中做（如果你想防止回发）。

为了在每次回发之间保存样式的状态 - 我建议保存样式和列位置 - 在每次回发后将读取的隐藏字段中 -*在客户端*- 并将 - 重新生成样式。

# javascript - 当字符串可能为空时确定 Node JS 中的字符串长度

> ID：10635727
> 
> 赞同：9
> 
> 时间：2012-05-17T12:26:51.277
> 
> 标签：javascript, string, node.js, if-statement, null

我正在尝试学习 Node 并具有以下功能：

```
this.logMeIn = function(username,stream) {
  if (username === null || username.length() < 1) {
    stream.write("Invalid username, please try again:\n\r");
    return false;
  } else {
  ....etc 
```

我正在通过它

```
if (!client.loggedIn) {
  if (client.logMeIn(String(data.match(/\S+/)),stream)) { 
```

我已经尝试了 == 和 ===，但我仍然收到错误，因为用户名没有检测到它为空，并且 username.length() 失败：

```
if (username === null || username.length() < 1) {
                                  ^
TypeError: Property 'length' of object null is not a function 
```

我确定 Node 不会评估 || 的第二部分。在第一部分为真时的 if 语句中 - 但我不明白为什么当用户名是空对象时 if 语句的第一部分评估为假。有人可以帮我理解我做错了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T12:29:01.823

`length`是属性，不是函数。尝试`username.length`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T12:39:27.963

你`String(data.match(/\S+/))`作为`username`参数传递，所以当`data.match(/\S+/)`is时`null`，你得到`"null"`not `null`for `username`，因为：

```
String(null) === "null" 
```

所以你需要改变你的条件：

```
if( username === null || username === "null" || username.length < 1 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:29:08.283

如果你需要一个非空字符串，你可以做一个简单的“真实”检查，它适用于`null`, `undefined`,`''`等：

```
if (username) { ... } 
```

使用这种方法，您甚至不需要`.length`检查。另外，`length`是属性，而不是方法。

* * *

编辑：你有一些时髦。我认为您需要从传递用户名`String(data.match(/\S+/))`的方式开始 - 我不认为您的逻辑表现得像您期望的那样（感谢@Engineer 发现这一点）。

您的匹配表达式将返回一种或两种类型的值：`null`或`Array`. 在它为空的情况下，正如@Engineer 指出的那样，你最终会`"null"`作为一个字符串传入，这应该会在稍后通过你的用户名检查。您应该考虑将其修改为：

```
if (!client.loggedIn) {
    var matches = data.match(/\S+/);
    if (client.logMeIn(matches ? matches[0] : '',stream)) { 
```

关于在所有情况下`.length`都等于`1`- 老实说，这没有多大意义。我建议添加很多`console.log()`语句来尝试弄清楚发生了什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-16T04:12:11.910

尝试

如果（用户名 === null || username.toString().length < 1 ）

我使用了 if( username === null || username.length < 1 )，但长度检查失败。

# python - 如何让多个芹菜工人运行相同的任务？

> ID：10635733
> 
> 赞同：7
> 
> 时间：2012-05-17T12:27:07.997
> 
> 标签：python, django, rabbitmq, celery, amqp

我有一项任务是检查 url 速度，但我希望由不同服务器中的多个 celery 工作人员执行。我希望多个工作人员检查相同的 url。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T13:43:31.303

如果你能设置`ignore_result=True`. 尝试[广播](http://docs.celeryproject.org/en/master/userguide/routing.html#broadcast)

如果不能，请检查[路由任务](http://docs.celeryproject.org/en/master/userguide/routing.html#id2)并将任务多次发送到不同的队列，例如不同的 IDC 和相应的工作人员。

# java - 通过外部网关发送 SMS 的设计评论

> ID：10635736
> 
> 赞同：2
> 
> 时间：2012-05-17T12:27:17.457
> 
> 标签：java, multithreading, postgresql, sms

我们有一个基于客户端-服务器的应用程序，它使用外部网关发送和接收 SMS。我正在考虑重新设计/修改现有架构以提高效率和性能。欢迎您提出相同的想法和建议。请注意，在高峰时段大约 每小时从客户端-服务器-网关发送 3000 条短信。每天发送的短信总量可能在 8000 到 10,000 条之间

**现有架构**

发简讯

1.  客户端向服务器发送一条短信，等待来自服务器的唯一 smsid（由 db 生成）（打开连接）
2.  服务器将短信存储在数据库中，将短信发送到网关。
3.  网关向手机发送短信，向服务器返回唯一的receiptid。
4.  服务器在数据库中存储唯一的receiptid
5.  服务器向客户端返回唯一的 smsid（在步骤 2 中生成）

步骤 1 -5 是一个请求 - 响应周期。

确认短信

1.  网关向服务器发送消息的状态
2.  服务器将数据库中消息的状态从已发送更新为已发送/失败/未知等。
3.  客户端定期轮询服务器以使用先前收到的 smsid 接收消息的状态。
4.  客户端在客户端更新状态。

数据库设计

所有短信都存储在数据库中的 1 个单一短信表中。最初我们有数据，可以追溯到 2006 年左右，单个表中有大约 500 万条记录。我们现在已经归档了数据，并且表中只有当年的数据。

缺点 - 客户端的长时间等待有时会导致连接超时错误，从而导致将相同的消息重新发送到服务器。由于服务器无法检测到这是一条重复消息，它会将消息重新发送到网关，从而导致向客户发送重复的短信。- 每秒对 sms 表执行多个 SELECT、UPDATE 查询，有时会给数据库带来相当大的负载并导致系统故障。也没有存档数据的机制。

**新架构**

发简讯

1.  客户端向服务器发送一条短信，等待来自服务器的唯一 smsid（由 db 生成）（打开连接）
2.  服务器将短信存储在数据库中，向客户端返回唯一的短信标识。

步骤 1-2 是一个请求-响应周期。

1.  使用 cron 定期轮询数据库表以检索短信并发送到网关的单独进程，或者可以使用 java 多线程？？？
2.  网关向手机发送短信，向服务器返回唯一的receiptid。
3.  服务器在数据库中存储唯一的receiptid

确认短信同上

数据库设计

1.  使用 Postgresql 时间/范围分区根据接收日期、基于继承或
2.  每天将数据从 table1 移动到 table2 的单独脚本。使用联合查询连接表以报告和检索数据。

基于数据库性能的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T05:43:43.400

首先，我不相信有必要将其分解为多个表。您没有正在进行的批量操作可能会使在小表上检查键比在大表上更容易。但是，在您的情况下，更可能有用的是部分索引的概念。在这种情况下，您只索引当前的每日记录。

在这方面，您可能每天只为当前日期的记录创建一个新索引并删除以前的索引。如果您这样做，您可能也希望索引日期，以便您可以快速创建此部分索引。

一旦我有机会进行测试，我将很快编辑它并附上一些性能说明。

更新

经过测试，看起来普通的日期索引是不够的。我认为您需要做的就是添加一个附加的 current_index 布尔值，默认值为 true。然后您可以索引 WHERE current_index = true 并在一天结束时将它们设置为 false，从而将它们从索引中删除。

这将使您的查询保持快速，防止每天向表中添加新索引，同时您可以从更小的索引中受益。这应该为您提供两全其美的性能。

另外：*使用 cron 定期轮询数据库表以检索短信并发送到网关的单独进程，或者可以使用 java 多线程？？？*

查看 Postgres 文档中的 LISTEN 和 NOTIFY。不要轮询数据库表。只需轮询通知。这将为您节省大量开销。不要依赖 NOTIFY 来获取有效负载，因为这不安全。只需将其用作您的应用程序的“触发器”即可知道它应该轮询。

基本上，它的作用是向服务器发送一个非常轻量级的异步通知（您可以在触发器中执行此操作），然后您的应用程序就会知道轮询可能是一个好主意。当通知事务提交时发送通知。

# .net - 带有 winscard.dll 的 .NET 应用程序中的 ERROR_INVALID_HANDLE

> ID：10635738
> 
> 赞同：3
> 
> 时间：2012-05-17T12:27:26.223
> 
> 标签：.net, windows, 64-bit, winscard

我正在创建一个 .NET Windows 服务来与智能卡读卡器进行通信。主要组件是一个名为 winscard.dll 的 Windows DLL，我在 .NET 代码中使用 DLLImport 属性。在 Windows XP 32 位上一切正常，但是当我在**Windows 7 x64**上运行它时，我在调用**SCardTransmit**时收到**0x6 ERROR_INVALID_HANDLE**结果。应用程序（作为命令行应用程序的服务）可以连接到读卡器，但不能从卡中读取任何内容。

 **任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T03:26:01.897

您对**SCardEstablishContext**有问题，它将返回*0*但也处理*0*。使用**IntPtr**而不是**Integer**：

```
Public Declare Function SCardEstablishContext Lib "Winscard.dll" (ByVal dwScope As Integer, _
                                                                      ByVal pvReserved1 As Integer, _
                                                                      ByVal pvReserved2 As Integer, _
                                                                      ByRef phContext As IntPtr) As Integer 
```

phContext 将在 Windows x64 中存储有效值（通过 RDP 测试的 Windows 8 x64 和 Windows 2008）。当它用作句柄时，也将其他“Integer”替换为“IntPtr”。

```
Public Declare Function SCardConnect Lib "Winscard.dll" Alias "SCardConnectA" (ByVal hContext As IntPtr, _
                                                                                   ByVal szReaderName As String, _
                                                                                   ByVal dwShareMode As Integer, _
                                                                                   ByVal dwPrefProtocol As Integer, _
                                                                                   ByRef hCard As IntPtr, _
                                                                                   ByRef ActiveProtocol As IntPtr) As Integer 
```**

# android - 显示 Android 堆栈

> ID：10635739
> 
> 赞同：20
> 
> 时间：2012-05-17T12:27:28.380
> 
> 标签：android, android-activity

为了更好地理解 Android 的行为，我想了解更多关于后台堆栈概念的信息。有没有办法列出所有活动，因为它们在后堆栈中排序。这还应该包括所有其他正在运行的任务。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-03-13T22:47:43.807

我发现此信息在 Android Studio (0.5.1) 中可用：**View->Tool Windows->Android**。然后在左侧选择**系统信息**图标，然后从它的下拉列表中选择“**图形状态**”。这将转储显示大量信息，但如果您向下滚动到“视图层次结构：”，您将看到当前的视图堆栈，即“后退堆栈”。

OP 确实询问了有关运行任务的问题，因此，如果选择“图形状态”，请选择“活动管理器状态”，您会发现更多信息（尽管我发现在“图形状态”中查看信息更简单，以便专门查看哪些活动位于后堆栈中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:08:51.197

已经有一个问题与您的问题相似。我想这会回答你的问题：

[查看任务的活动堆栈](https://stackoverflow.com/questions/2442713/view-the-tasks-activity-stack/7172633#7172633)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-18T20:42:10.130

对于您自己的应用程序的后台堆栈，您可以使用以下方法编写自己的解决方案`Application.ActivityLifecycleCallbacks`：

```
class MyApp : Application() {

   override fun onCreate() {
      super.onCreate()
      ActivityBackStackTracker.install(this)
   }
}

class ActivityBackStackTracker : Application.ActivityLifecycleCallbacks {

    override fun onActivityCreated(activity: Activity, bundle: Bundle?) {
        activityStack.add(activity::class)
    }

    override fun onActivityDestroyed(activity: Activity) {
        activityStack.remove(activity::class)
    }

    //..

    companion object {
        private val activityStack = mutableListOf<KClass<out Activity>>()

        fun getCurrentActivityStack() = listOf(activityStack)

        fun install(app: Application) {
            app.registerActivityLifecycleCallbacks(ActivityBackStackTracker())
        }
    }
} 
```

然后，您可以随时使用以下命令记录它：

```
Log.d(TAG, "${ActivityBackStackTracker.getCurrentActivityStack()}) 
```

# php - 使用 preg_replace 确保 PHP 安全

> ID：10635740
> 
> 赞同：0
> 
> 时间：2012-05-17T12:27:29.690
> 
> 标签：php, sanitization

我正在开发一个 PHP 函数来处理来自网络表单的提交。

允许的字符是严格的字母数字、ab、0-9。

在处理和插入数据库之前，依靠 preg_replace 和正则表达式来清理这些数据是否安全。

我查看了很多我看到的常规 PHP 数据清理选项，但由于系统设计严格禁止使用或存储非字母数字字符，我认为删除任何不匹配的内容会更容易 /[^ a-zA-Z\s-0-9.,']/ 从一开始。

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:29:29.653

如果您只允许将字母数字字符存储在您的数据库中，而不是去除无效字符，那么您最好向您的用户返回一个错误，因为您提供了无效的输入。这样，您的用户在看到他们的数据以不同于他们最初输入的形式显示给他们时就不会感到困惑。

换句话说，验证输入`preg_match()`以确保它满足您的要求，如果不满足，则向用户返回错误，以便他们修复它。然后将其转义以插入数据库或使用准备好的语句。

```
if (!preg_match('/^[a-z0-9., ]$/i', $input)) {
   // error Invalid input. Please use only letters and numbers
}
else {
   // call escape function on $input or insert it with a prepared statement
   // whatever is the appropriate method for your RDBMS api.
} 
```

# rabbitmq - 如何在不使用 DRBD 的情况下实现 Rabbitmq 高可用？

> ID：10635744
> 
> 赞同：1
> 
> 时间：2012-05-17T12:27:51.710
> 
> 标签：rabbitmq, high-availability

我想为 Rabbitmq 服务器实现高可用性。我已经阅读了 Rabbitmq 提供的文档，文档上是使用 DRBD，我不想使用 DRBD 进行共享存储，从我这边我已经用两个节点进行了集群并准备了镜像队列. 其余需要实现高可用性帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:12:54.747

HA 文档可以在 RabbitMQ 站点 [http://www.rabbitmq.com/ha.html上找到](http://www.rabbitmq.com/ha.html)

[http://www.rabbitmq.com/clustering.html](http://www.rabbitmq.com/clustering.html)中描述了主要设置

这不涉及 DRBD，只是关于如何跨多个服务器镜像队列的指南。

我已经根据上面的说明实现了一个 HA 兔子集群，所以我可以证明它们的清晰性。如果您对上述 HA 设置有任何具体问题，但我很乐意为您解答。

# linux - 从 SD 卡启动 linux

> ID：10635746
> 
> 赞同：2
> 
> 时间：2012-05-17T12:28:10.867
> 
> 标签：linux, linux-kernel, embedded-linux, archlinux

我有一块带有 Ti DM365 处理器的 Leopard 板。问题是，我试图将引导加载程序（uboot）闪存到 nand 并导致损坏 NAND。现在，我不能使用 NAND 来调出电路板。所以，我决定使用 SD 卡。

我在 SD 卡上为引导加载程序/内核/rootfs 进行了所需的分区

现在，当他们重新启动电路板时……它说……解压缩内核……等等……等等……但是当它试图寻找 rootfs 时……提示说……“找不到 NAND”

我认为（他们是这个领域的一个完整的新手..）内核在 NAND 中寻找“rootfs”而不是 SD 卡，这就是为什么它会给出那种错误......

所以现在我必须以这样一种方式配置内核，它应该查看“rootfs”的 SD 卡，而不是查看 NAND（在我的情况下它已损坏。）

谁能帮我。

如果信息不够，请见谅，如有需要，请询问更多信息。作为一个新手...我不知道我还能提供什么其他信息...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T05:02:29.377

我认为您需要更改 DTS 文件以在 SD 卡中为 rootfs 创建分区。

以下是 mpc8313erdb.dts 中的代码片段，其中 rootfs 存在于 NAND 中。

```
 nand@1,0 {
        #address-cells = <1>;
        #size-cells = <1>;
        compatible = "fsl,mpc8313-fcm-nand",
                     "fsl,elbc-fcm-nand";
        reg = <0x1 0x0 0x40000>;

        dtb-0@0 {
            reg = <0x0 0x20000>;
        };

        kernel-0@20000 {
            reg = <0x20000 0x400000>;
        };

        rootfs-0@420000 {
            reg = <0x420000 0x099e0000>; 
```

在以下位置查找上述文件。linux/arch/powerpc/boot/dts/[board_name].dts

检查以下链接以查看完整的 DTS 文件。 [http://lxr.free-electrons.com/source/arch/powerpc/boot/dts/mpc8313erdb.dts](http://lxr.free-electrons.com/source/arch/powerpc/boot/dts/mpc8313erdb.dts)

# nfc - Mifare Classic 4K 身份验证失败 - 如何使其工作？

> ID：10635749
> 
> 赞同：0
> 
> 时间：2012-05-17T12:28:24.893
> 
> 标签：nfc, mifare, texas-instruments

我对 14443A 协议和 mifare Clasic 4k 标签非常陌生。我有一个 TRF7960A RFID 阅读器连接到我的设备，它在读取固件版本后支持 Mifare 模式。

我从我的供应商那里得到了一些信息，但我仍然面临身份验证问题。

我已将发送和接收的命令粘贴在下面。

任何人都可以帮助我了解如何创建数据包吗？

提前致谢

杰辛

## 设置为 Mifare 模式

发送：0108000304FD00000 返回：108000304FD0000

## 固件版本 3.3[Mode Mifare]

## 设置协议

发送：010A0003041000010000 返回：010A0003041000010000 寄存器写入请求。

发送：010C00030410002101080000 返回：010C00030410002101080000 寄存器写请求。

发送：0109000304F0000000 返回：0109000304F0000000

发送：0109000304F1FF0000 返回：0109000304F1FF0000

* * *

## 扫描卡UID

发送：0109000304A0010000 返回：0109000304A0010000 14443A REQA。(0200)(DB24C7A69E)[DB24C7A69E]

收到的 UID 是 DB24C7A69E

* * *

## 验证块 04 密钥为 FFFFFFFFFFFF UID 为 DB24C7A69E

发送：010A0003041850000000 返回：010A0003041850000000 请求模式。[]

发送：010D000304A2DB24C7A69E0000 返回：010D000304A2DB24C7A69E0000 14443A 选择。(0200)[18]

发送：010E000304C0FFFFFFFFFFFF0000 返回：010E000304C0FFFFFFFFFFFF0000 Crypto1 设置密钥。初始化正常

发送：010F000304C16004DB24C7A69E 0000 返回：010F000304C16004DB24C7A69E 0000 Crypto1 认证步骤 1。！！接收到 00 字节和 00 位，预期为 4 字节和 0 位。中止

发送：010C000304C23D6E98990000 返回：010C000304C23D6E98990000 Crypto1 认证步骤 2.ý

* * *

## 读取块 04 数据

发送：010A000304C830040000 返回：010A000304C830040000 加密请求模式。！！密码未初始化。中止

* * *

## 写块04写数据12345678123456781234567812345678

发送：010A000304C8A0040000

返回：010A000304C8A0040000 加密请求模式。！！密码未初始化。中止

发送：0118000304C8123456781234567812345678123456780000 返回：0118000304C8123456781234567812345678123456780000 加密请求模式。！！密码未初始化。中止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:14:21.837

MIFARE Classic UID 始终为 4 个字节或 7 个字节，而不是 5 个字节。我不知道 TRF7960A，但我怀疑你的问题与此有关。这会使身份验证失败：标签根本不会回答。以下任何需要成功验证的命令也将不起作用。

# c++ - 查找范围 [a, b] 中所有不在给定 std::set S 中的数字

> ID：10635750
> 
> 赞同：8
> 
> 时间：2012-05-17T12:28:28.933
> 
> 标签：c++, algorithm, stl, set

设`a`和`b`为整数，`a < b`。给定`std::set<int> S`什么是一种高效*且*优雅（最好没有显式循环）的方法来查找和存储（到 a 中`vector`）所有`[a, b]`不在其中的数字`S`。

**解决方案1：**

```
 vector<int> v;
 for(int i = a; i <= b; ++i)
 {
     if(S.find(i) == S.end())
     {
        v.push_back(i);
     }         
} 
```

**解决方案2：**

将所有数字从`a`to推`b`入 a`set`并使用`std::set_difference`

解决方案 1 包含一个显式循环，解决方案 2 似乎效率不高（至少在内存方面）。你有什么建议？我正在寻找一种优雅的 STL-ish（提升也是可以接受的）惯用方式来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T12:45:57.403

您可以执行类似于您的解决方案 #2 的操作。但不是创建包含范围的实际容器，而是`[a,b]`使用[`boost::irange`](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/ranges/irange.html)，它是数字范围的虚拟容器。这样您就没有显式循环，它将以线性时间运行，并且不会占用太多内存。

为了使其更快，请使用`lower_bound`/使其仅覆盖集合的相关部分`upper_bound`：

```
auto abRange = boost::irange(a,b+1);
std::set_difference(abRange.begin(), abRange.end(), 
                    s.lower_bound(a), s.upper_bound(b), 
                    std::back_inserter(resultVector)); 
```

或使用`Boost.Range`'s `set_difference`：

```
boost::set_difference(boost::irange(a,b+1),
                      std::make_pair(s.lower_bound(a), s.upper_bound(b)),
                      std::back_inserter(resultVector)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:42:38.353

中的“集合”`set_intersection`并不意味着`std::set`——它只是意味着一个逻辑集合；一组东西。如果两个集合都已排序，您可以简单地`set_intersection`将两个集合放入第三个容器中。

```
vector<int> common;
set_intersection(v.begin(), v.end(), s.begin(), s.end(), back_inserter(common)); 
```

编辑：

这是一个完整的示例，说明了上述内容。这使用 C++11 lambdas，但如果您没有 C++11 或不能使用 lambdas，您可以使用仿函数代替它们。请注意缺少显式循环。

```
#include <set>
#include <vector>
#include <algorithm>
#include <iterator>
#include <functional>
#include <iostream>
using namespace std;

static const int numbers[] = {0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181};
static const size_t num_numbers = sizeof(numbers)/sizeof(numbers[0]);

int main()
{
    /*** GET THE SET ****/
    set<int> s(begin(numbers), end(numbers));
    //copy(&numbers[0], &numbers[num_numbers], inserter(s, s.begin()));

    /*** GET THE NUMBERS TO LOOK FOR **/
    int first = 5, last = 10;
    vector<int> targets;
    generate_n(back_inserter(targets), last-first, [&first]() -> int {
        return first++;
    });

    /*** FIND THE INTERSECTION ***/
    vector<int> common;
    set_intersection(s.begin(), s.end(), targets.begin(), targets.end(), back_inserter(common));

    /*** DUMP RESULTS ***/
    cout << "Intersecton of:\n\t";
    copy(s.begin(), s.end(), ostream_iterator<int>(cout,"\t"));
    cout << "\nwith:\n\t";
    copy(targets.begin(), targets.end(), ostream_iterator<int>(cout,"\t"));
    cout << "\n= = = = = = = =\n\t";
    copy(common.begin(), common.end(), ostream_iterator<int>(cout,"\t"));
    cout << "\n";

} 
```

输出是：

```
Intersecton of:
        0       1       2       3       5       8       13      21      34
55      89      144     233     377     610     987     1597    2584    4181

with:
        5       6       7       8       9
= = = = = = = =
        5       8 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T12:43:30.940

好吧，以下内容避免了循环，但我不确定这是您所追求的：

```
void inSet(int i, int b, vector<int>& v, set<int>& S)
{
   if(S.find(i) == S.end())
        v.push_back(i);

   if(i<b)
        inSet(i+1,b,v,S);
}

// ... snip
vector<int> v;
inSet(a,b,v,S); 
```

此外，在您的解决方案 2 中，是否没有将所有整数 [a,b] 放入 std::set 的循环？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T12:41:08.263

`S.lower_bound(a)`您可以从to迭代`S.lower_bound(b)`并收集所有未找到的整数：

```
auto end = S.lower_bound(b);
int seen = a;

for (auto it = S.lower_bound(a); it < end; ++it) {
   for (int i = seen+1; i < *it; ++i)
      v.push_back(i);
   seen = *it;
} 
```

它包含一个显式循环，但不知何故，您必须查看`[a,b]`.

# python - web.py 会话：AttributeError：'ThreadedDict' 对象没有属性'count'

> ID：10635751
> 
> 赞同：2
> 
> 时间：2012-05-17T12:28:33.713
> 
> 标签：python, web.py

我刚刚运行了 wiki 提供的这个简单的代码片段，因为我无法让会话正常工作：

```
import web
web.config.debug = False
urls = (
    "/count", "count",
    "/reset", "reset"
)
app = web.application(urls, locals())
session = web.session.Session(app, web.session.DiskStore('sessions'), initializer={'count': 0})

class count:
    def GET(self):
        session.count += 1
        return str(session.count)

class reset:
    def GET(self):
        session.kill()
        return ""

if __name__ == "__main__":
    app.run() 
```

但这会导致此错误：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/web/application.py", line 237, in process
    return self.handle()
  File "/usr/local/lib/python2.7/dist-packages/web/application.py", line 228, in handle
    return self._delegate(fn, self.fvars, args)
  File "/usr/local/lib/python2.7/dist-packages/web/application.py", line 411, in _delegate
    return handle_class(cls)
  File "/usr/local/lib/python2.7/dist-packages/web/application.py", line 387, in handle_class
    return tocall(*args)
  File "temp.py", line 12, in GET
    session.count += 1
  File "/usr/local/lib/python2.7/dist-packages/web/session.py", line 71, in __getattr__
    return getattr(self._data, name)
AttributeError: 'ThreadedDict' object has no attribute 'count' 
```

webpy 与 2.7.3 不兼容吗？我在 webpy 的内部网络服务器上运行它。我正在使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:31:17.433

`session.count += 1`等于`session.count = session.count + 1`所以`session.count`必须存在才能使其工作。

添加以下检查以使其工作：

```
if 'count' not in session:
    session.count = 0
session.count += 1 
```

还有另一种方式，甚至显示在文档的[*非常简单的会话简单示例中：*](http://webpy.org/sessions/simpleexample)

```
try:
    s.click += 1
except AttributeError:
    s.click = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T15:48:38.657

好的*尝试技巧......除了*我不相信这是最好的方法（根本不干净）。如前所述，Session 构造函数提供了一种初始化会话变量的方法。

我不确定我们是否可以依赖“[非常简单的会话简单示例](http://webpy.org/sessions/simpleexample)”。

首先，我们几乎没有任何关于各种变量的目的的解释。例如， *db_parameter* dict 的目的是什么？

最后但并非最不重要的一点是，它需要进行认真的更新。提供的代码根本不适用于实际的框架。根本没有*web.ctx.session*。

顺便说一句，我实现了一个像示例中一样的简单计数器。您所显示的错误是由于 Session 的 API 发生了巨大变化。您不能只从会话中调用“计数器”。那将更像这样：**session.store.store_instance.get('counter')**。其中 store_instance 是货架或数据库。就像我说的，官方文档需要认真更新。

也就是说，我注意到这与文档字符串不同。为了取得进步，我启动了 Ipython，我看到了我所拥有的每一个可能性。我知道这纯粹是猜测，但命名很好，所以我们可以弄清楚该怎么做。

我会将我的示例提交给 web.py 团队，以便他们更新官方文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T21:32:43.927

在我的拉取请求在 GitHub 上被接受之前，我发布了说明使用简单增量器的代码片段：

```
import web
import shelve

urls = (
    '/add', 'counter',
    '/reset', 'reset'
)

shelf = shelve.open('session')
shelfStore = web.session.ShelfStore(shelf)
app = web.application(urls, globals())
s = web.session.Session(app, shelfStore)

class counter:        
    def GET(self):
        numberToAdd = web.input().get('number')
        if not numberToAdd:
            numberToAdd = 1
        try:
            print  numberToAdd
            s.store.shelf["count"] += int(numberToAdd)
        except Exception:
            s.store.shelf["count"] = 1
        return s.store.shelf.get("count")

class reset:
    def GET(self): 
        s.store.shelf.clear()

if __name__ == "__main__":
    app.run() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T10:16:48.660

问题是python版本。我有同样的问题，我在执行 2.7 版本的 python 时解决了它。只需执行 > python2.7 code.py ，会话就可以完美运行。可惜web.py的文档很差。

# jquery - 如何在页面加载后延迟 jQuery 动画？

> ID：10635755
> 
> 赞同：4
> 
> 时间：2012-05-17T12:28:51.480
> 
> 标签：jquery, jquery-animate

这是我的例子：http: [//jsfiddle.net/UuD8s/5/](http://jsfiddle.net/UuD8s/5/)

```
$("#transition")
    .delay(5000)
    .animate({ width: "400px" }, { duration: 1000, queue: true });

$("#transition")
    .delay(2000)
    .animate({ left: "100px" }, { duration: 1000, queue: true });​ 
```

我想在页面启动后延迟我的第二个动画开始，延迟 2 秒。问题是它在第一个动画之后开始。如果`queue`设置为`false`根本没有延迟。

如何在页面启动后将动画延迟 2 秒？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T12:30:27.233

为了在页面启动后延迟动画设置`queue`为 false 并使用`setTimeout`两秒：

```
$("#transition")
    .delay(5000)
    .animate({width: "400px"}, {duration: 1000, queue: true});

setTimeout(function() {

    $("#transition").delay(2000).animate({ left: "100px" }, {
        duration: 1000,
        queue: false
    });

}, 2000);​ 
```

这是一个[**现场演示**](http://jsfiddle.net/UuD8s/6/embedded/result/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:30:56.177

您可以使用[setTimeout()](http://www.w3schools.com/jsref/met_win_settimeout.asp)方法来延迟 javascript 函数。

```
$("#transition").delay(5000).animate({width: "400px"}, {duration: 1000, queue: true});
setTimeout(function() { 
    $("#transition").delay(2000).animate({left: "100px"}, {duration: 1000, queue: false});  
}, 2000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:38:47.630

据我了解，您希望第二个动画（左侧）在启动后 2 秒开始。这将需要 1 秒钟。您希望第一个在启动后 5 秒启动。

所以你可以做的是将它们排队，以便在左边的一个完成宽度后两秒钟，一个踢进来......

```
$("#transition").delay(2000).animate({left: "100px"}, {duration: 1000});
$("#transition").delay(2000).animate({width: "400px"}, {duration: 1000}); 
```

[http://jsfiddle.net/UuD8s/7/](http://jsfiddle.net/UuD8s/7/)

这确实解决了您在上述情况下它们没有同时运行的情况，但如果您确实希望它们同时运行（例如，宽度应该在运动的中途开始缩小），那么这将不起作用。

# jquery - jQuery：在复选框更改事件上突出显示表格行

> ID：10635756
> 
> 赞同：0
> 
> 时间：2012-05-17T12:28:53.863
> 
> 标签：jquery

我有下表，其中包含每行中的复选框。当复选框状态发生变化（选中/未选中）时，相应的行需要以黄色突出显示。我们如何使用 jQuery 来实现它？

注意：我使用的是**jQuery 1.4.1**吗？不支持“开”。

注意：我正在尝试学习 jQuery。请不要推荐任何第三方插件。我正在尝试通过手动编码来学习它。

```
<html>
<table class="commonGrid" cellspacing="0" id="detailContentPlaceholder_grdGarnishmentState"
style="border-collapse: collapse;">
<thead>
    <tr>
        <th scope="col">
            <a >
                Country Code</a>
        </th>
        <th scope="col">
            <a >
                State</a>
        </th>
        <th scope="col">
            Independent Order Status
        </th>
        <th scope="col">
            Standard Order Status
        </th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            USA
        </td>
        <td>
            <span id="detailContentPlaceholder_grdGarnishmentState_lblState_0">Alaska</span>
        </td>
        <td>
            <span class="independantOrder">
                <input id="detailContentPlaceholder_grdGarnishmentState_chkIndependentOrderStatus_0"
                    type="checkbox" name="ctl00$detailContentPlaceholder$grdGarnishmentState$ctl02$chkIndependentOrderStatus"
                    checked="checked" /></span>
        </td>
        <td>
            <span class="standardOrder">
                <input id="detailContentPlaceholder_grdGarnishmentState_chkStandardOrderStatus_0"
                    type="checkbox" name="ctl00$detailContentPlaceholder$grdGarnishmentState$ctl02$chkStandardOrderStatus"
                    checked="checked" /></span>
        </td>
    </tr>
    <tr style="background-color: #E5E5E5;">
        <td>
            USA
        </td>
        <td>
            <span id="detailContentPlaceholder_grdGarnishmentState_lblState_1">Arkansas</span>
        </td>
        <td>
            <span class="independantOrder">
                <input id="detailContentPlaceholder_grdGarnishmentState_chkIndependentOrderStatus_1"
                    type="checkbox" name="ctl00$detailContentPlaceholder$grdGarnishmentState$ctl03$chkIndependentOrderStatus" /></span>
        </td>
        <td>
            <span class="standardOrder">
                <input id="detailContentPlaceholder_grdGarnishmentState_chkStandardOrderStatus_1"
                    type="checkbox" name="ctl00$detailContentPlaceholder$grdGarnishmentState$ctl03$chkStandardOrderStatus"
                    checked="checked" /></span>
        </td>
    </tr>
</tbody>
</table>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:11:26.970

由于每个人都忽略了您对 jQuery 1.4.1 的使用，因此下面是一个可行的示例：

[http://jsfiddle.net/applehat/F63Aj/1/](http://jsfiddle.net/applehat/F63Aj/1/)

```
 $("input:checkbox").click(function ()
 {
     if($(this).is(':checked'))
     {
         $(this).parents("tr:first").data('prevColor', $(this).parents("tr:first").css('background-color'));
         $(this).parents("tr:first").css('background-color', 'yellow');
     }
     else
     {
         $(this).parents("tr:first").css('background-color', $(this).parents("tr:first").data('prevColor'));
     }
 }); 
```

您会注意到 JSFiddle 链接不包括 jQuery 1.3 - 所以如果它适用于 1.3，它应该很容易适用于 1.4.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:30:36.147

试试这个 ：

[http://jsbin.com/ozarov/3/edit](http://jsbin.com/ozarov/3/edit)

这也将以交替样式保存行背景颜色...

```
 $("table").on("click", ":checkbox", function ()
 {
     if($(this).is(':checked'))
     {
         $(this).parents("tr:first").data('prevColor', $(this).parents("tr:first").css('background-color'));
         $(this).parents("tr:first").css('background-color', 'yellow')
     }
     else
     {
         $(this).parents("tr:first").css('background-color', $(this).parents("tr:first").data('prevColor'))
     }
 }); 
```

ps您*可以*根据2个选中的复选框来详细说明我的示例...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:52:26.090

基于您的笔记等的假设：当复选框更改时，以黄色突出显示一行。

```
$("table").on("change", ":checkbox", function() {
    $(this).parents("tr:first").css('background-color','yellow');
}); 
```

效果：如果行复选框发生变化，它会突出显示。注意：一旦以黄色突出显示，就永远不会更改为不突出显示。

编辑：您可以使用 CSS 中的突出显示类，例如`.highlight{background-color:yellow;}`，在第二行，您需要删除嵌入其中的背景颜色样式，因为它更“具体”并且将始终覆盖添加的类`.addClass('highlight');`

更改事件处理程序的先前版本语法：

```
$("table").find(':checkbox').change( function() {
    $(this).parents("tr:first").css('background-color','yellow');
}); 
```

用于动态元素添加的较慢的 .live 处理程序：

```
$("table").find(':checkbox').live('change', function() {
    $(this).parents("tr:first").css('background-color','yellow');
}); 
```

EDIT2：从 1.4.1 到 1.4.4 有很多事件管理更改。

似乎更改事件未正确触发 1.4.1 - 仅在第二次更改时触发。所以，请改用点击事件：

```
jQuery('input').click(function() {
    jQuery(this).parents("tr:first").css('background-color', 'yellow');
}); 
```

这里的工作示例：http: [//jsfiddle.net/vW9vQ/1/](http://jsfiddle.net/vW9vQ/1/)

BROKEN .change 测试在这里：http: [//jsfiddle.net/vW9vQ/](http://jsfiddle.net/vW9vQ/)

***强烈建议在这个东西上更新到当前版本的 jQuery。***

# mysql - 访问被拒绝使用虚拟 ip 从远程系统登录 mysql

> ID：10635757
> 
> 赞同：1
> 
> 时间：2012-05-17T12:29:01.600
> 
> 标签：mysql

我正在用两个节点在 mysql 中实现高可用性。我创建了一个虚拟 IP（192.168.1.175）。现在从第三个系统我正在尝试使用命令连接到 mysql

```
mysql -h 192.168.1.175 -u root -pserver02
```

我收到错误

```
错误 1045 (28000): 用户 'root'@'192.168.1.44' 的访问被拒绝（使用密码：是）
```

现在我搜索了问题，发现root没有从ip 192.168.1.44和ip 175登录的权限，我必须从ip 175授予ip 44的权限。

现在，当我通过 ip 175 登录（在虚拟 ip 是这个的同一系统中）并使用命令授予 ip 44 的权限时

```
授予所有权限*。*到由 'server02' 标识的 root@'%'
```

我收到错误

```
错误 1045 (28000): 用户 'root'@'192.168.1.175' 的访问被拒绝（使用密码：是）
```

我必须通过从 ip 44 登录到虚拟 ip 175 来测试我的 fali over 机制。现在我该如何解决这个 Accessed denied 问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:55:16.447

我认为您错过了允许用户**连接**的步骤。

尝试运行

```
ALTER USER 'root'@'%' IDENTIFIED BY 'mypass'; 
```

或者如果失败了

```
CREATE USER 'root'@'%' IDENTIFIED BY 'mypass'; 
```

在 mysql 中，凭证的管理方式有点混乱，但它**非常****非常**灵活，

# sql-server-2008 - 自定义PK的sql server触发器

> ID：10635758
> 
> 赞同：2
> 
> 时间：2012-05-17T12:29:01.593
> 
> 标签：sql-server-2008, triggers

我想通过触发器生成 PK，因为它是自定义 PK。

就像根据成员类型字段一样，我想生成成员 ID，即 PK。

例如，如果新记录的成员类型为 DGIA，则成员 ID 将为 DGIA1、DGIA2、DGIA3 ... 等等...如果成员类型为 DGIL，则成员 ID 将为 DGIL1、DGIL2、DGIL3 ...等等...

那么，如何编写相同的触发器......我已经尝试过以下操作，但它仅适用于第一条记录。

```
ALTER TRIGGER [dbo].[next_member_id] ON  [dbo].[DAD_MEMBERSHIP] AFTER INSERT
AS 
BEGIN

DECLARE @COUNT INT
SET @COUNT=0;

SELECT @COUNT=ISNULL(MAX(CAST(SUBSTRING(DAD_MEMBERSHIP.MEMBER_ID,5,15) AS INT)),0)+1 FROM DAD_MEMBERSHIP where DAD_MEMBERSHIP.MEMBER_TYPE = DAD_MEMBERSHIP.MEMBER_TYPE

update DAD_MEMBERSHIP set DAD_MEMBERSHIP.MEMBER_ID = DAD_MEMBERSHIP.MEMBER_TYPE + CONVERT(varchar,@COUNT)
from DAD_MEMBERSHIP inner join inserted on DAD_MEMBERSHIP.MEMBER_TYPE = inserted.MEMBER_TYPE

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:58:15.773

触发器按批记录操作，您不能分配给标量变量并期望它对多个记录起作用。您需要将整个过程重新考虑为基于集合的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:53:58.453

我使用以下触发器解决了问题

```
ALTER TRIGGER [dbo].[next_member_id] 
   ON  [dbo].[DAD_MEMBERSHIP] 
   AFTER INSERT
AS 
BEGIN

DECLARE @COUNT INT
SET @COUNT=0;

DECLARE @STR VARCHAR(5)
SET @STR=''

select @STR=i.MEMBER_TYPE from inserted i;  

SELECT @COUNT=ISNULL(MAX(CAST(SUBSTRING(DAD_MEMBERSHIP.MEMBER_ID,5,15) AS INT)),0)+1 
from DAD_MEMBERSHIP where MEMBER_TYPE=@STR

update DAD_MEMBERSHIP set DAD_MEMBERSHIP.MEMBER_ID = @STR + CONVERT(varchar,@COUNT)
from DAD_MEMBERSHIP inner join inserted i on i.MEMBER_TYPE=DAD_MEMBERSHIP.MEMBER_TYPE where DAD_MEMBERSHIP.MEMBER_ID is null

END 
```

# javascript - 只从一个下拉清单中计算？

> ID：10635765
> 
> 赞同：1
> 
> 时间：2012-05-17T12:29:07.203
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有一个验证方法，可以从页面上的所有检查列表中计数，但我只想从两个下拉列表之一中计数。

清单：

```
$("#s1").dropdownchecklist({ emptyText: "Please select at least one...", width: 300, maxDropHeight: 200 }); 
```

方法：

```
 jQuery.validator.addMethod("categoryCount", function(value, element) {
            var count = 0;
            var n = $("input:checked").length;
            alert("category Count was called: " + n);                       
            return !(count>3);
        }, "Choose less than 3."); 
```

我知道问题出在方法的第三行，

```
$("input:checked").length; 
```

但我如何让它做我想做的事？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:48:27.837

您使用以下代码来查找选中的项目：`var n = $("input:checked").length;`。如果您想将搜索限制在特定项目，有几种方法可以解决这个问题。

一种方法是将项目包含在`<div class='enclosure'>`标签中。然后
`var n = $("input:checked").length;`
改为
`var n = $('.enclosure').find('input:checked').length;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:53:49.327

我是 JS 的新手，所以我更愿意把它放在评论中，但我还没有代表这样做，所以我会在这里发布。我注意到这个网站上的其他人使用

```
$('input[type="checkbox"]').length 
```

代替

```
 var n = $("input:checked").length; 
```

这可能是错误的原因。

# c++ - 从树中搜索值并返回节点值

> ID：10635769
> 
> 赞同：0
> 
> 时间：2012-05-17T12:29:27.887
> 
> 标签：c++

我正在尝试从树中获取节点的值。到目前为止，树类只找到了节点的返回地址，但是我应该如何获取节点的值。而且我不允许通过类文件进行编辑。

```
const dataType* find(const dataType &Data) const 
{
   if (rootNode == NULL)
     return NULL;
   else 
     return rootNode->find(Data);
} 
```

它们没有搜索功能，我也不允许编辑，所以我怎么能从树节点中获取价值。我已经看到了另一个搜索示例，但是如何在 cpp 文件中执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:55:24.917

I'm not sure if this is what you're asking, but simply dereferncing the pointer will give you the value:

```
const dataType* dtrPtr = find(someData);
if ( dtrPtr != NULL)
{
    const dataType& foundDtr = *dtrPtr;
    // ... 
```

# mysql - 用户角色/权限的架构

> ID：10635774
> 
> 赞同：2
> 
> 时间：2012-05-17T12:29:59.107
> 
> 标签：mysql, sql, database, database-design

我目前正在创建一个应用程序，用户可以在其中从网站控制我的世界服务器（这将与他们安装在服务器上的插件进行交互）。我试图想出一个合适的设计来允许每个服务器定义自己的用户权限组。最后，将有一个预定义的选项列表（我的插件将知道如何处理的东西）供每个服务器从中挑选并分配给他们创建的组。我的目标是拥有它，因此该网站上的 1 个单个用户可能能够在一个服务器面板中拥有多个组，并且该用户能够被分配到多个服务器面板。

这是我目前想出的数据库布局：

```
Table: Roles     (will hold the predefined roles)
  Columns:
    serverTypeId (to distinguish between roles allowed for the 2 versions of minecraft)
    roleId       (the role's unique id, primary key)
    roleName     (some name to distinguish the role's purpose)

Table: ServerGroup (will hold the custom per server groups)
  Columns:
    serverId         (the server's unique id)
    groupId    (the server role's unique id, primary key)
    groupName  (name given to group, like Staff, Admin, etc)
    roleList         (a csv list of roleId's from the Roles table)

Table: ServerPermissions
  Columns:
    serverId       (the server's unique id)
    serverGroupId  (the server's groupId that this user belongs to)
    userId         (the user's id that is unique to the whole website) 
```

有一个更好的方法吗？这是我能想到的最好的方法。我不是最精通 SQL 并且正在寻找改进的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:18:09.100

这看起来是一个相当可靠的设计，但有一个警告。ServerGroup 表中的 roleList 列称为列内的重复组，应避免使用。与其将所有角色 ID 塞进一列，不如将其拆分为一个单独的表，该表将充当角色和 ServerGroup 之间的连接点。

```
Table: ServerGroupRoles (will list roles for each ServerGroup)
  Columns:
    groupID (foreign key to ServerGroup)
    roleID (foreign key to Roles)
  Primary Key: groupID, roleID 
```

对于 ServerGroup 拥有的每个角色，ServerGroupRoles 中都会有一条记录。这种重复组的方法的好处是易于搜索和维护。用于检查服务器组是否存在特定角色的查询可能是使用相等性查找索引，而不是使用 LIKE 扫描索引。在维护方面，从 ServerGroup 中删除角色是一个简单的 DELETE/WHERE 语句，而不是不必要的昂贵的字符串操作。

如果您的 Web 应用程序要求将权限作为 CSV 字符串处理，那么从针对 ServerGroupRoles 的查询构建字符串将是微不足道的。但是，如果应用程序发生变化，您将不会被重复组造成的低效率所困扰。

# objective-c - 为什么 EXC_BAD_ACCESS 没有发生？

> ID：10635777
> 
> 赞同：0
> 
> 时间：2012-05-17T12:30:14.430
> 
> 标签：objective-c, exc-bad-access

我创建了一个可变字符串对象。现在我已经多次释放该对象，即使我只分配了一次。根据基本的内存管理规则，这是错误的。但是它应该崩溃，但这永远不会发生。我期待一些 EXC_BAD_ACCESS 错误。

我收到错误：

```
malloc: *** error for object 0x6d5ac60: double free
*** set a breakpoint in malloc_error_break to debug 
```

为什么应用程序不会崩溃？

```
NSMutableString *firstOwner = [[NSMutableString alloc] init];
[firstOwner release];
[firstOwner release];
[firstOwner release];
NSMutableString *temporaryObject = firstOwner;
[temporaryObject release];
[temporaryObject release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:36:12.907

仅仅因为崩溃不会发生在你身上并不意味着它不会发生在其他人身上。

您只是在说明一个应用程序在出现内存管理错误后可以继续跛行的情况。崩溃可能不会发生，因为除了公然过度释放之外，您没有对对象引用做任何其他事情。

但是，如果您稍后尝试使用或访问“ `firstOwner`”或“ `temporaryObject`”，那么您绝对会在那时和那里因 EXC_BAD_ACCESS 而崩溃。访问不存在或过度释放的对象是此类崩溃的主要原因。

# firefox-addon - 如何以编程方式从工具栏中删除 XUL 项目

> ID：10635781
> 
> 赞同：1
> 
> 时间：2012-05-17T12:30:25.680
> 
> 标签：firefox-addon, xul

我有一个 Firefox 扩展，它使用推荐的技术向“导航栏”工具栏添加了几个按钮（请参阅[https://developer.mozilla.org/en/Code_snippets/Toolbar#Adding_button_by_default](https://developer.mozilla.org/en/Code_snippets/Toolbar#Adding_button_by_default)）。一切正常，首次启动时添加按钮，用户可以添加、删除或重新组织按钮。

我需要能够通过自定义对话框添加和删除这些按钮。这就是问题所在：我可以通过`insertItem`方法添加按钮，但是没有`removeItem`方法。

我可以通过调用`removeChild`DOM 方法删除项目，然后从工具栏的`currentset`属性中删除项目 ID。但是在重新启动浏览器之前我无法重新启用该项目，因为它不会返回到调色板。

```
// remove item's ID from toolbar's current set of items
// this does not remove the item
toolbar.setAttribute('currentset', newSet);
document.persist(toolbar.id, 'currentset');

// item is removed, but it doesn't return to palette
// so it can't be added againg before restart
toolbar.removeChild(button); 
```

有什么方法我不仅可以通过编程方式添加，还可以从 Firefox 工具栏中删除项目？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:32:02.853

如果您只是更新`"currentSet"`属性而不调用会发生`removeChild`什么？那应该将按钮移动到我认为的调色板。

# c# - 在 z3 中使用公理进行演绎

> ID：10635783
> 
> 赞同：1
> 
> 时间：2012-05-17T12:30:29.580
> 
> 标签：c#, z3

我是 Z3 的新用户，希望它使用一些公理，并且只使用这些公理将一个公式简化为一阶逻辑中的另一个等效公式。例如：仅使用

1.(p or q) and (p or r) <=> p or (r and q)

2.not(p or q) <=> not(p) and not(q)

3.p 和 p <=> p

证明

not(p or (q and r)) <=> (not(p)and not(q)) or (not(p)and not(r))

我使用 C# API。我想它必须使用未解释的功能，但我不知道该怎么做。

请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:25:20.863

你是对的，这个想法是使用未解释的函数和排序。这是 Z3 中编码的问题： [http ://rise4fun.com/Z3/Vzns](http://rise4fun.com/Z3/Vzns)

Z3 找不到使用您提供的 3 个公理的证明。实际上，结论并不能从他们那里得出。但是，如果我们替换公理，它可以找到一个证明

> p 和 p <=> p

和

> 不是（不是（p））<=> p

备注：上面脚本中的编码使用未解释的排序`B`而不是`Bool`. 因此，Z3 也不会尝试逐案证明，也不会尝试使用`Bool`仅包含两个元素的事实。

备注：它使用`=`而不是`<=>`.

在下面的示例中，我们使用 Z3Py 构建了一个满足您提供的 3 个公理的模型，但猜想不成立。

[http://rise4fun.com/Z3Py/7H7](http://rise4fun.com/Z3Py/7H7)

# javascript - History.go(-1) 不适用于具有指向同一页面部分的链接的页面

> ID：10635785
> 
> 赞同：4
> 
> 时间：2012-05-17T12:30:36.943
> 
> 标签：javascript, browser-history

我面临一个问题。我有一个网页，我使用**后退**按钮锚链接，使用的代码是`ONCLICK="history.go(-1)"`. 同一页面有许多锚链接和相关部分。

当我转到包含**后退**按钮的页面并立即单击**后退**按钮时，**后退**按钮可以正常工作。

如果我转到包含**后退**按钮的页面，然后点击指向同一页面中某个部分的锚链接，然后点击**后退**按钮，那么它永远不会转到上一个网页，而是转到该部分的 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:43:55.840

通过新的 History API，您可以[操纵浏览器历史记录](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。

[History.js](https://github.com/balupton/history.js)可以帮助您以跨浏览器的方式实现这一目标。

我很快创建了一个[小小提琴](http://jsfiddle.net/QumbZ/5/)来说明它的工作原理并使用 jQuery 进行事件处理（这不是生产代码，只是一个演示，在我的 Chrome 中工作）。

```
$('.anchor').click(function () {
    history.replaceState({}, '', this.href);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T10:37:04.887

如果是这样，您可以使用 javascript 通过简单地使用这一行来解决这个问题。

使用`history.go()`JavaScript 函数如下：

```
<a href="javascript:window.history.go(-1);">Go back</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:08:24.087

也许您可以尝试一个计数器来计算“部分”链接被点击的次数

也许是这样的（使用 jQuery，但也许有好心人会去把这段代码改成漂亮的纯 JavaScript）：

```
var count = 0;
var historyValue = -1;
$(".sectionlinks").click(function () {
    ++count;
    window.historyValue = -(count + 1);
})​ 
```

你所有的部分链接都有一个`sectionlinks`类。

然后你可以在你的反向链接上做：

```
<a onclick="history.go(historyValue)">My Back Link</a> 
```

请参阅此小提琴的演示：http: [//jsfiddle.net/RRcyF/2/](http://jsfiddle.net/RRcyF/2/)

# c# - C#在列表中显示图像和文本

> ID：10635787
> 
> 赞同：0
> 
> 时间：2012-05-17T12:30:47.050
> 
> 标签：c#, listview

c# 中是否有任何控件允许我们使用图像和格式化的文本和图标制作某种列表视图，类似于 android 中的联系人？我找到的最接近的是：

1) [http://www.c-sharpcorner.com/UploadFile/mgold/ListViewInCSharp11172005021741AM/ListViewInCSharp.aspx](http://www.c-sharpcorner.com/UploadFile/mgold/ListViewInCSharp11172005021741AM/ListViewInCSharp.aspx)

2) [http://www.dreamincode.net/forums/topic/75911-adding-images-to-listview/](http://www.dreamincode.net/forums/topic/75911-adding-images-to-listview/)

在我看来，与 android 和 iPhone 相比，这非常难看，如下所示：

```
http://www.trymasak.my/sample/iphone2.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:37:17.073

我明白你在说什么，但很多时候让一些东西“工作”和“造型”是两件非常非常不同的事情。它还很大程度上取决于您使用的技术：WinForms（可能是最简单的入门，尽管定制可能是一件大事）、WPF、Silverlight，不胜枚举。

这是我偶然发现的东西。它也是相当新的。我很确定这将有助于在 WinForms 中快速入门。它被称为 ObjectListView：

[http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView](http://www.codeproject.com/Articles/16009/A-Much-Easier-to-Use-ListView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:43:06.040

好的，如果您不在乎使用 WinForms 还是 WPF，我建议您使用 WPF。

如果您想要类似的东西`ListView`，请尝试使用`DataGrid`. 您在这里需要的基本概念是`DataTemplate`. 在 中`DataTemplate`，您可以根据需要重新设置单元格内容的样式。

这是我从我的一些代码中提取的一个粗略示例，但我没有让它自己编译。它会给你一个良好的开端。

```
<DataGrid ItemsSource="{Binding MyGridData}" AutoGenerateColumns="False" Name="my_datagrid">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Column1">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Source={Binding GridCellImage}" />
                        <TextBlock Text="{Binding GridCellText}" />
                    </StackPanel>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

阅读数据绑定以了解`MyGridData`. 它基本上将是一个代码隐藏集合，为您的网格提供信息。它可能类似于 a`List<T>`或`ObservableCollection<T>`。T 是一个具有两个称为`GridCellImage`和的公共属性的类`GridCellText`。WPF 使您可以轻松地在代码隐藏中创建数据，并且因为它是数据绑定的，所以您的 GUI 将自动更新（在`ObservableCollection`. 设置`GridCellImage`为您的图像路径和`GridCellText`该单元格中所需的文本。 `GridCellImage`需要更多指定才能使其真正起作用，但这个答案的重点是向您展示在 WPF 中重新模板化内容以使其几乎可以随心所欲地显示数据是多么容易。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:38:14.390

使用 wpf 项目。创建 StackPanel 或 Dockpanel，然后在其中添加您的组件。

然后将此面板添加到您的网格视图的子级

# java - 如何将自定义类对象注入 Junit 环境？

> ID：10635789
> 
> 赞同：2
> 
> 时间：2012-05-17T12:30:50.577
> 
> 标签：java, junit, junit4, junit-ee

我正在从我的代码中运行 JUnit：

```
 Result result = JUnitCore.runClasses(MyClassNameTest.class); 
```

我正在处理的问题是 MyClassName 依赖于其他一些类 - 假设它的名称是 SomeOtherClass，我需要该类以某种方式将其实例注入“JUnit 运行时”以对 MyClassName 可见。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:50:54.180

你不应该需要其他类来做你的测试——我建议你模拟它们。我会选择[Mockito ，](http://code.google.com/p/mockito/)[这个问题](https://stackoverflow.com/questions/22697/whats-the-best-mock-framework-for-java)对各种选项进行了很好的讨论。如果您无法通过模拟其他依赖项来进行测试，我强烈建议您重构代码，以便可以完成。

如果你真的不想走那条（正确的）路径，你可以尝试一些依赖注入框架，比如[Spring](http://www.springsource.org/)，并为每个测试类设置一个单独的上下文。在junit4，您可以使用`@BeforeClass`

```
@BeforeClass
public void initSpring()
{
    Application context = getTestAppContext();//should be unique config for this class
    requiredProperty  = contex.getBean("someProperty");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T02:51:55.623

[考虑在Guice](http://code.google.com/p/google-guice/)等框架中使用依赖注入。这是一个介绍，可以让您很好地了解它是什么以及如何使用它：

[http://beust.com/weblog/2012/03/25/dependency-injection/](http://beust.com/weblog/2012/03/25/dependency-injection/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:38:41.440

当然有可能。

一种方法是使用 Map，其中键是父类的类或名称，值是子类的类或名称。进行查找并将其传递给工厂进行实例化。

# html - 产品微数据

> ID：10635795
> 
> 赞同：1
> 
> 时间：2012-05-17T12:30:59.547
> 
> 标签：html, microdata

我想在我的网站（测试版）产品页面中使用微数据。

但我不知道如何做到这一点，因为由于商业原因，根本没有显示所有价格。但是 Products 模式需要页面上的明确价格。我误解了什么吗？我可以使用其他架构吗？

任何关于这种情况的建议将不胜感激。

Txs in adv

爱丽儿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:01:55.887

您指的是什么“产品架构”？[例如， http://schema.org/Product](http://schema.org/Product)不要求您提供价格，但 Google 或 Bing 等搜索服务提供商可能会要求您列出价格，以便您的页面显示为[产品 Rich Snippet](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146750)（价格在报价部分）。您可能想检查 Offer-aggregate 是否可以以某种方式满足您的需求，因为它只需要一个 lowPrice 值。

# wifi - 测试除英国频道以外的 wifi 接入点频道

> ID：10635804
> 
> 赞同：2
> 
> 时间：2012-05-17T12:31:44.597
> 
> 标签：wifi, embedded-linux, wifimanager

问题-> 我想知道如何为 GB 以外的国家/地区的模式 a/b/g/n 测试频道（WIFI）？

* * *

H/W -> WIFI sparklan WPEA110N
芯片组：Atheros AR9280
接口：Mini PCI Express

软件 ->
Linux fedora 11
Wifi 接入点实用程序 -> hostapd

* * *

**到目前为止我所做的 ->**
1) 我已经更改了 hostapd_minimal.conf 的配置文件，并将国家代码从 GB 更改为任何其他国家，例如 CN(CHINA) 或 US(USA)。
2）我也尝试过更改 CRDA
ex-> iw reg set CN

**这些更改的结果->**
我注意到它成功阻止了除 GB 以外的国家/地区不允许的频道，例如在中国，**模式 a**频道**36**是不允许的，因此 hostapd 的结果变为 false 但它甚至不允许频道在中国是合法的。

**摘要 ->**简而言之，如果我将国家/地区从 GB 更改为任何其他国家/地区，则 hostapd 实用程序仅允许公共频道。**例如 1) 如果我将国家更改为美国，则模式 a**将允许 36、38、40 等， 因为这些是两国的合法频道，但不允许频道 149 -165

有人可以说明一下吗。

谢谢和问候，
山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:03:38.270

```
 Well  after couple of days of struggle . I have found  the solution.  Well  Remember this  is only for testing wireless inside  my house. Using of channels which are not authorised in a particular country  are illegal and can be prosecuted.

 To summarize what I did..( may be it wil be helpful for someone)
 Its 2 MAIN stEP PROCEDURE . 
     - First to MAKE CHANGES IN wireless-regdb and
     - Second with crda

 1)WIRELESS-REGDB

   1.a)Download wireless-regdb-2008.11.17.tar.bz2 package
   1.b) Untar it
   1.c) cd wireless-regdb-2008.11.17
   1.d) vi db.text and made changes what you have mentioned
   1.e) make
   This will create a public and priv key in my case its something like key.priv.pem

   1.f) copy the regulatory.bin to /usr/lib/crda/
        (create crda if does not exist)

   if you guys want to make changes in regulatory.bin after the make then
   i) edit db.txt and make reguire changes
   ii) compile it . ex ./db2bin.py regulatory.bin db.txt key.priv.pem
   iii) copy into /usr/lib/crda

          ****************** Now download and commpile crda*******

  2.a) Download Crda . I n my case its crda-1.1.2.tar.bz2
  2 .b) un tar it and cd into directory
  2.c) copy the public key from wireless-regdb into pubkeys directory
  example — cp bla bla/wireless_regdb-2008.11.17 blabla/crda-1.1.2/pubkeys

 2.d)make the file .. type “make”
 note — in my case I got hell lot of errors and dependency problem but google has                      helped me to solve it
 2.e make install
 2.f reboot the system.

 Important — modify frequency in db.txt of the country which your driver is requesting    from EEPROM of H/w.
 for example -> if your driver get counrty code as GB and you made changes for US , it   will not work.

 Best bet is to check what your country code is by typing “iw reg get ” command 
```

# c# - 在 Windows 2003 上运行应用程序 C#

> ID：10635805
> 
> 赞同：0
> 
> 时间：2012-05-17T12:31:47.583
> 
> 标签：c#, windows, 64-bit

我在 Windows Server 2003 上有一个应用程序，并将其安装在 C# 中。我将应用程序安装在服务器 2008 上，但安装时出错：我尝试安装它

`System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation.
at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandle& ctor, Boolean& bNeedSecurityCheck)
at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean fillCache)
at System.RuntimeType.CreateInstanceImpl(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean fillCache) at System.Activator.CreateInstance(Type type, Boolean nonPublic)
at System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) at System.Configuration.Install.AssemblyInstaller.InitializeFromAssembly()
The inner exception System.ArgumentException was thrown with the following error message: Service name contains invalid characters, is empty, or is too long (max length = 80).. at System.ServiceProcess.ServiceInstaller.set_ServiceName(String value)`

问题是我不明白它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:32:54.533

> 服务名称包含无效字符、为空或太长（最大长度 = 80）

说明了一切，不是吗？这完全取决于您正在安装什么以及如何安装它。如果安装程序尝试从某处创建具有给定名称的服务，请确保安装程序可以读取“某处”。

正如[这里](http://social.msdn.microsoft.com/Forums/da/msbuild/thread/cb6c6049-07d5-4f51-a5fb-53d46c9992a8)所说：

> ```
> ServInstall.ServiceName = ConfigurationManager.AppSettings["ServiceName"]; 
> ```
> 
> 这给我带来了同样的问题。也许安装程序无法读取 app.config？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:33:49.347

> 引发内部异常 System.ArgumentException 并显示以下错误消息：服务名称包含无效字符、为空或太长（最大长度 = 80）.. 在 System.ServiceProcess.ServiceInstaller.set_ServiceName(String value)

查看服务名称是否有效，并检查您是否具有通过您的应用程序创建服务的正确权限。

# iphone - 无法使用 sharekit 将图像发布到 Twitter

> ID：10635807
> 
> 赞同：1
> 
> 时间：2012-05-17T12:31:57.287
> 
> 标签：iphone, objective-c, xcode, sharekit

我使用 ShareKit 在我的应用程序中发布到 Twitter 和 Facebook。Facebook 运行良好。

但是，当我尝试在推特上发布时，首先显示“已保存”消息，然后立即显示警报消息“错误未知错误”，并且该消息未在推特上发布。

谁能帮我解决这个问题。

我用谷歌搜索了很多，无法找出问题所在。

希望得到您的帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:35:21.793

确保您使用更新[的 shareKit 2.0](https://github.com/ShareKit/ShareKit)。准确地遵循[新的安装指南，因为它与](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)[原来的 sharekit](http://www.getsharekit.com/)几乎没有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:52:23.970

我担心的是你的鲨鱼可能不会更新。所以检查下面的设置，我们需要将第 54-56 行中的 SHKTwitter.m 从

更改`https://twitter.com/`为`https://api.twitter.com/`

```
self.authorizeURL = [NSURL URLWithString:@"https://api.twitter.com/oauth/authorize"];
self.requestURL = [NSURL URLWithString:@"https://api.twitter.com/oauth/request_token"];
self.accessURL = [NSURL URLWithString:@"https://api.twitter.com/oauth/access_token"]; 
```

然后，在 sendStatus 方法中更新您必须使用的 URL`https`链接`of http`：

```
OAMutableURLRequest *oRequest = [[OAMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"https://api.twitter.com/1/statuses/update.json"] consumer:consumer token:accessToken realm:nil signatureProvider:nil]; 
```

进行此更改，您将能够共享图像并在共享工具包中发布

**编辑**：有关更多信息，请参阅[此](http://jayrparro.posterous.com/incorrect-signature-sharekittwitter-error)链接。

# java - 如何在android中克隆一个对象？

> ID：10635810
> 
> 赞同：21
> 
> 时间：2012-05-17T12:32:04.907
> 
> 标签：java, android

在 java/android 中复制/克隆对象的最佳方法是什么？

```
rlBodyDataObj rlbo = bdoTable.get(name); 
```

现在代码从 hashTable 中分配一个对象，但我需要克隆它，这样我就可以多次使用它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T12:41:27.147

确保您的 DataObj 类实现 Cloneable 并添加以下方法

```
protected Object clone() throws CloneNotSupportedException {
        return super.clone();
} 
```

然后你应该可以调用 (DataObj)rlBodyDataObj.clone(); 得到一个干净的副本（注意演员表）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-05T13:00:57.670

```
class Test implements Cloneable
  {
   ...
      public Object clone()
      {
          try
      {
              return super.clone();
          }
      catch( CloneNotSupportedException e )
      {
              return null;
          }
      } 
  ...
  } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-04-14T17:04:35.607

你可以实现 Parcelable （使用工作室插件很容易），然后

```
public static <T extends Parcelable> T copy(T orig) {
    Parcel p = Parcel.obtain();
    orig.writeToParcel(p, 0);
    p.setDataPosition(0);
    T copy = null;
    try {
        copy = (T) orig.getClass().getDeclaredConstructor(new Class[]{Parcel.class}).newInstance(p);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return copy;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T13:32:43.960

有时您需要在从 clone() 方法返回之前修改一些字段。

检查这个：[http](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#clone) ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#clone ()。为方便起见，我在此处粘贴了相关部分：

> “按照惯例，这个方法返回的对象应该独立于这个对象（正在被克隆）。为了实现这种独立性，可能需要在返回之前修改 super.clone 返回的对象的一个​​或多个字段。通常，这意味着复制任何包含被克隆对象的内部“深层结构”的可变对象，并将对这些对象的引用替换为对副本的引用。如果一个类仅包含原始字段或对不可变对象的引用，那么它是通常情况下 super.clone 返回的对象中没有字段需要修改。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-13T16:52:16.847

我希望实现： **复制构造函数**

```
class DataObj {
  private String tag;

  public DataObj(DataObj another) {
    this.tag= another.tag; // you can access  
    ...
  }
} 
```

每个对象都有一个可以用来复制对象的克隆方法，但是创建一个类并使用不正确的克隆方法太容易了。*[如果您打算使用实现克隆方法，请至少阅读 Joshua Bloch 在Effective Java](http://books.google.com/books?id=ka2VUBqHiWkC&pg=PA55&lpg=PA55&dq=effective+java+clone&source=bl&ots=yXGhLnv4O4&sig=zvEip5tp5KGgwqO1sCWgtGyJ1Ns&hl=en&ei=CYANSqygK8jktgfM-JGcCA&sa=X&oi=book_result&ct=result&resnum=3#PPA54,M1)*中对它所说的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-10T09:09:54.373

您必须在您的类上指定它实现[Cloneable](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html)接口，并且您必须覆盖`clone`该类中的方法。默认情况下，它将使用类`clone`的方法`Object`。

# java - AWT-EventQueue-0 一直在运行并且程序在 java 中变得非常慢

> ID：10635812
> 
> 赞同：-1
> 
> 时间：2012-05-17T12:32:08.097
> 
> 标签：java, swing, graphics, awt-eventqueue

我正在写一个gui。在那个 gui 中，有很多形状（大约 200 种）。我使用绘画方法来绘制它们。

在一种情况下，我必须让它们闪烁（在两种颜色之间切换）。在 for 循环中，我正在更改它们的颜色，然后是 fram.repaint();

但是，当我单击一些按钮时，一段时间后程序变得非常慢。我通过个人资料检查（我正在使用 Netbeans）。我看到一段时间后 AWT-Event-Queue 开始一直运行。

所以，我可以有两个解决方案：

有没有办法拆分 AWT-EventQueue 添加另一个 AWT-EventQueue？或者有没有更好的方法让 200 个形状闪烁？

谢谢

注意：详细地，我看到了pumpEvents、pumpEventsForHierarchy、pumpEventsForFilter、pumpOneEventFilters...

这是绘画方法：

```
@Override
public void paint(Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    g2d.setStroke(bs_3);
    g2d.setColor(currentcolor);
    g2d.draw(line);;

} 
```

这是线程：

```
paintTimer = new Timer(1000, new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            mframe.repaint();

                for (CircuitPanel cp : mframe.cppL){
                    cp.onOff();
                }
});

paintTimer.start(); 
```

下面是换色方法：

```
@Override
public void onOff() {
    if(currentcolor.equals(offcolor)){
        currentcolor=oncolor;
    }else{
        currentcolor=offcolor;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:00:27.587

此[示例](https://stackoverflow.com/a/3420431/230513)显示了一种方法。它在另一个线程上标记时间`javax.swing.Timer`，以便调整闪烁的速度。要在您的目标平台上进行分析，可以通过更改`N`计时器的初始周期来轻松扩展该示例，`1000 ms`. 因为实例`javax.swing.Timer`使用共享线程，所以每个组件都可以有自己的计时器，如此[处](https://stackoverflow.com/a/9624408/230513)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:15:10.013

我想我找到了原因。我在 Netbeans 中添加了一个 bean，它是一个小面板。当我从框架中删除它时，似乎问题已解决。（我正在使用 frame.repaint() 方法，如下所示）

感谢您的帮助和评论。在您的评论的帮助下，我正在改进我的代码。

在这里，我发布了 MyPanel（那个 bean）的代码：

```
package beans;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.Line2D;
import java.awt.geom.Path2D;

public class MyParallelPanel extends javax.swing.JPanel {
int x1=300;
int x2=400;
int h=110;
Path2D path = new Path2D.Double();
Line2D line1 = new Line2D.Double(0, h, (x2-x1)/2, 0);
Line2D line2 = new Line2D.Double((x2-x1)/2, 0, x2-((x2-x1)/2), 0);
Line2D line3 = new Line2D.Double(x2-((x2-x1)/2), 0, x2, h);
Line2D line4 = new Line2D.Double(x2, h, 0, h);
Color color = new Color(237, 236, 235);
/** Creates new form MyParallelPanel */
public MyParallelPanel(int x1, int x2, int h,Color color) {
    this.x1=x1;
    this.x2=x2;
    this.h=h;
    this.color=color;
    setSize(x2,h);
    setPreferredSize(new Dimension(x2, h));

}

public void setColor(Color color) {
    this.color = color;
}

public void setH(int h) {
    this.h = h;
}

public void setX1(int x1) {
    this.x1 = x1;
}

public void setX2(int x2) {
    this.x2 = x2;
}
public MyParallelPanel() {

    initComponents();
}

/** This method is called from within the constructor to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 400, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 300, Short.MAX_VALUE)
    );
}// </editor-fold>                        
// Variables declaration - do not modify                     
// End of variables declaration                   
@Override
protected void paintComponent(Graphics g)
{
Graphics2D g2d = (Graphics2D) g; 

path.append(line1,true);
path.append(line2,true);
path.append(line3,true);
path.append(line4,true);

g2d.setColor(color);
g2d.fill(path);
}

} 
```

# iphone - 通过 Facebook iOS SDK 获取我的所有活动

> ID：10635817
> 
> 赞同：14
> 
> 时间：2012-05-17T12:32:47.140
> 
> 标签：iphone, ios, facebook, sdk

在我的 iOS 应用程序中，我使用以下代码获取访问令牌：

```
 [self.facebook authorize:[NSArray arrayWithObjects:@"user_events",
@"friends_events",  nil]]; 
```

然后我使用以下代码请求我的事件：

```
[self.facebook requestWithGraphPath:@"me/events" andDelegate:friendsVC]; 
```

但作为回应，我只收到我回复的事件。我想获得我所有的活动，包括那些我没有回复的活动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T13:01:45.660

请求

> /我/事件

只为您提供用户（可能）计划参加的活动。响应不包括用户被邀请（但未响应）或拒绝的事件。

还有其他可能有帮助的请求：

您可以检查用户是否被邀请参加这样的活动：

> /EVENT_ID/受邀/USER_ID

可以通过事件检查 RSVP 状态：

> /EVENT_ID/出席
> 
> /EVENT_ID/也许
> 
> /EVENT_ID/拒绝
> 
> /EVENT_ID/受邀

其中每个请求都返回具有查询的 RSVP 状态的用户列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:10:38.077

您可以通过下一个 FQL 查询获取事件列表，无论其 RSVP 状态如何：

```
SELECT eid, name, venue, location, start_time FROM event WHERE eid IN (
  SELECT eid from event_member WHERE uid = me()
) 
```

这不会返回每个事件的 RSVP 状态，而只会返回事件详细信息。您可能希望使用[批处理请求](https://developers.facebook.com/docs/reference/api/batch/)来获取事件的详细信息和`rsvp_status`相同的查询。

```
https://graph.facebook.com/?method=post&batch=[
  {
    "name":"rsvp",
    "relative_url":"fql?q=SELECT+eid,rsvp_status+FROM+event_member+WHERE+uid=me()",
    "omit_response_on_success":false
  },
  {
    "relative_url":"?ids={result=rsvp:$.data.*.eid}"
  }
] 
```

有关您可能希望检索的其他字段的详细信息，请参阅[`event`](https://developers.facebook.com/docs/reference/fql/event/)和表格文档。[`event_member`](https://developers.facebook.com/docs/reference/fql/event_member/)

笔记：

> 从 7 月 5 日开始，即使是公共活动也需要访问令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T09:16:48.347

使用**/me/events**获取用户已响应的事件，使用**/me/events/not_replied**获取其他事件。

例如（假设您已经创建了一个会话）：

```
[FBRequestConnection startWithGraphPath:@"/me/events/not_replied" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
{
    FBGraphObject* data = (FBGraphObject*)result;
    NSMutableArray* array = [data objectForKey:@"data"];

    //parse data etc..
}]; 
```

有关更多信息，请参阅[https://developers.facebook.com/docs/graph-api/reference/v2.0/user/events/](https://developers.facebook.com/docs/graph-api/reference/v2.0/user/events/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T21:38:33.047

这不是一个完整的解决方案，并且可能不起作用，但请查看是否可以访问用户 Facebook 事件的 iCal 提要。我订阅了我的 iCal 提要，我注意到所有事件，甚至是我尚未回复的新事件都包含在提要中。

无论如何都要尝试一下！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-21T07:19:39.373

我认为您可能会通过 fql 查询获得[事件。](http://developers.facebook.com/docs/reference/api/event/)你需要试试这个。

另请参阅此[操作方法：使用 Graph API 管理事件](http://developers.facebook.com/blog/post/560/)。

您需要通过 HTTP 从 Graph API 获取以下信息：

`fql?q=SELECT uid,eid,rsvp_status FROM event_member WHERE uid = me()`

您可以从该呼叫中取回所有状态。

```
{
  "data": [
    {
      "uid": "723020003",
      "eid": "19935786340002",
      "rsvp_status": "not_replied"
    },
    {
      "uid": "723020003",
      "eid": "234524000290351",
      "rsvp_status": "attending"
    },
    {
      "uid": "723020003",
      "eid": "210091000081240",
      "rsvp_status": "declined"
    },
    {
      "uid": "723020003",
      "eid": "210091000341240",
      "rsvp_status": "unsure"
    }
  ]
} 
```

# sql - 以不同方式比较日期时间值

> ID：10635818
> 
> 赞同：2
> 
> 时间：2012-05-17T12:32:49.950
> 
> 标签：sql, sql-server-2008

好的，我认为我很擅长使用 SQL...我必须在两个日期时间列之间进行比较。

有人可以解释一下

```
DateA > DateB 
```

和

```
DateDiff(d,DateB,DateA) >= 1 
```

我认为这两个语句在功能上是等效的，但我想我错了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:35:19.913

```
DateA > DateB 
```

检查 DateA 是否大于 DateB（01/12/2012 14:50:01 大于 01/12/2012 14:50:00）。

* * *

```
DateDiff(d,DateB,DateA) >= 1 
```

检查天数的差异（`d`作为第一个参数的日期部分）是否等于或大于 1 天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:44:02.630

`DateA > DateB`如果 DateA 至少比 DateB 大一毫秒，将评估为 true

`DateDiff(d,DateB,DateA) >= 1`如果 DateB 和 DateA 之间的差异至少为 1 天，将评估 true

换句话说，如果您认为今天 12:00 比今天 11:00 大，请选择选项一

如果您认为午夜过后的日期比另一个日期大，请选择选项二

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:35:37.527

`DateA`大于`DateB`一分钟或一秒或一毫秒后。

您`DateDiff`正在寻找一整天的差异。

无论您是否有意，`DateTime`总是包含一个时间，因此您必须考虑到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T12:36:09.397

`DateA > DateB`如果`DateA`甚至比（比如 1 毫秒）*稍大一点，则为真。*`DateB`

`DateDiff(d,DateB,DateA) >= 1`如果日期之间的差异是一天或更长时间，则为真。

# shell - 等待二进制文件在 shell 脚本中完成

> ID：10635825
> 
> 赞同：1
> 
> 时间：2012-05-17T12:33:12.560
> 
> 标签：shell

我正在编写一个 shell 脚本，其中我需要调用一个二进制文件三次，并且一旦所有这三个二进制文件都完成，我需要将调用转移到主程序。我想我需要使用 fork 并在我的 shell 脚本中等待。我不确定如何在 shell 脚本中实现 fork、wait 和 exec。我想知道一些好的教程，我可以详细阅读这些教程。

非常感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:43:22.453

如果您使用 bash（或 ksh 或其他）作为您的 shell，那么这就是您“分叉”并等待的方式：

```
command_one&
command_two -options&
command_three lots of args&

wait 
```

使用`&`after 命令使其在后台执行；否则，shell 将在每个命令之后等待。`wait`没有参数等待所有工作，即孩子。 `$ help wait jobs`bash 的手册页可以让您更深入地了解作业管理。

# ruby-on-rails - 红宝石在轨道上？带有oracle后端的web应用框架的选择

> ID：10635830
> 
> 赞同：0
> 
> 时间：2012-05-17T12:33:36.200
> 
> 标签：ruby-on-rails, oracle

我正在尝试研究用于解决我的问题的最佳语言/框架。我已经开始非常仔细地研究 Ruby on Rails，但想知道你们中的一些人是否能够阐明为什么这可能是一个好的或不是一个好的选择。

我需要的是开发一个可以在现有 oracle 数据库上构建的 Web 应用程序。我需要它是安全的，但理想情况下我不想编写自己的用户权限/身份验证逻辑。相反，我希望有一个我可以利用的可定制的。我见过 ruby​​ on rails 有很多“宝石”，看起来这不是问题。

其次，我需要一些可以轻松重用数据集上 CRUD 功能的代码的东西。该应用程序的大部分内容将围绕能够编辑记录等的用户展开。

最后也是最重要的一点，这需要与现有的 Oracle 后端一起使用。当我开始阅读 ruby​​ 时，似乎将它与 Oracle 挂钩可能会导致一些问题。我担心的一个问题是，您似乎需要在您的机器上安装 Oracle 才能使其工作，我的数据库不在我的机器上，而是在另一台服务器上，我宁愿不必安装 oracle，而只需连接到我的开发服务器的数据库......这可能吗？

感谢您的意见和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:42:35.260

您是否考虑过[Oracle Application Express (APEX)](http://apex.oracle.com/i/index.html)？听起来很适合我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:26:42.220

首先，我将首先说我没有在 Rails 上使用过 Ruby，因此无法在这里提供建议。我所读到的是，在过去，RoR 可能会被考虑在另一个平台上，比如 javaee，因为它被认为更容易工作（一站式商店）并且更轻量级。我不太确定现在是否是这种情况，因为 java 正在剥离其规范。

我会考虑使用**Java/javaEE(6)**平台，特别是**JPA2**（数据层）。这将允许您使用 ORM 将数据库表（关系模型）映射到对象、**EJB3.1/managedbeans**（也有助于代码重用和并发数据访问的业务层）和**JSF2**（用于创建 UI 的框架)**或 JSP**作为表示层。网上有很多教程，大部分文档是由 Oracle 发布的。

我想**安全性**方面，实施应用程序服务器管理的安全性通常是最好的主意，因为那时您依赖（希望）在应用程序服务器的实施过程中咨询了安全专家的事实。**在最近的一个项目中，我使用 Glassfish 管理的安全性实现了这一点，这使得连接现有用户/角色**变得容易**已经存储在数据库中，然后将使用 URL 模式或其他方式控制对应用程序的访问——这样的服务通常是非常可定制的，甚至可能在您选择的应用程序服务器中有一个 GUI 设置页面来帮助进行配置，这将使生活更轻松. 同样，这实际上取决于您将使用的应用程序服务器。将 oracle 数据库与 oracle 应用程序服务器 (WebLogic) 集成可能更容易。可能有与我对 Glassfish 的解释类似的功能。**

 **您还可以在 EJB 级别实现安全性，这意味着您可以明确指定哪些角色可以调用哪些业务方法。这可能是过度杀戮，但总是需要记住一些有用的东西。

关于连接到您的数据库 - 使用 IDE 使用它会不会更容易？此外，由于您已经制作了数据库，因此可能对您有用的功能是使用工具自动从数据库中创建模型实体。Netbeans 提供了这样的功能，这意味着只要您可以使用 IDE 进行远程连接，您就可以在不到 5 分钟（给予或接受）内为每个实体创建具有基本 CRUD 操作的数据层和基本业务层。不过，了解平台/相关框架可能需要更长的时间。

再次查看一些关于此的教程/文档。如果您也使用 WebLogic，我很确定 Netbeans 可以让您的生活更轻松。

再次抱歉，我无法对 RoR 有所了解。这是我个人的建议，您可能也想听听其他人对此主题的想法。**

# asp.net - 为什么 Intranet 站点不缓存表单值，但部署到 Internet 的同一站点会缓存？

> ID：10635831
> 
> 赞同：2
> 
> 时间：2012-05-17T12:33:37.513
> 
> 标签：asp.net, viewstate, browser-cache, intranet

我在 ASPX 页面中有一个表单，它在提交后保存并保留内容，以便可以通过对某些字段的微小更改再次克隆它。此功能旨在节省数据输入时间。

当它在 Intranet 设置中工作时，此保存表单并保留内容功能可以正常工作。但是，当将此站点部署到 Internet 以供公众访问时，表单的行为不一致。

表单提交工作正常几次（这个数字不断变化） - 它保存表单值并保留相同的内容，但后来随机显示来自先前数据条目的值。

例如，在存储产品信息的 5 个字段的形式中，我可以选择仅更改标题。如果我第一次为标题字段填写值“产品 1”，它将保存它并继续显示相同的字段值。继续此过程，当我尝试将标题修改为“产品 5”时，它可能不会保存该记录并显示“产品 3”，而不是按预期保留“产品 5”。

Has this anything to do with some ViewState size limit or some IIS cache setting or due to it being deployed to a Farm? Can anyone explain why a form within a site that works on the Intranet doesn't work similarly when it is published as a Internet site?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:48:44.687

如果为此使用会话状态并且应用程序部署到负载平衡场，则需要配置会话状态以使用 SQL Server。

正在发生的事情是，您要访问的会话取决于您要访问的框，因此当回发访问不同的服务器时，它会获取该服务器上会话中的任何内容。

这是一个来自 web.config 的示例，如 MSDN 所示：

```
<configuration>
  <system.web>
    <sessionState mode="SQLServer"
      sqlConnectionString="Integrated Security=SSPI;data 
        source=SampleSqlServer;" />
  </system.web>
</configuration> 
```

编辑：因此，您没有使用会话状态，也没有触及代码中任何地方的值。这只留下了某种奇怪的缓存。也许服务器场的缓存设置因机器而异……这是我能看到的唯一方法，你会得到你描述的行为。

您可以覆盖 web.config 中的 machine.config 缓存设置。尝试：

```
<system.web>
   <httpRuntime enableKernelModeCache="false"/>
</system.web> 
```

# ruby-on-rails-3 - 如何使用 mongoid 和 rails 存储数据

> ID：10635835
> 
> 赞同：0
> 
> 时间：2012-05-17T12:33:50.673
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我是 Rails 和 mongo 的新手。我正在尝试构建一个简单的博客页面，其中一篇文章可以包含许多评论。后控制器是我有问题的地方。我不知道如何存储和检索已发布帖子的评论。

后模型

```
class Post
 include Mongoid::Document
 field :title, :type => String
 field :body, :type => String
 has_many :comments
end 
```

评论模型

```
class Comment
 include Mongoid::Document
 field :content, :type => String
 belongs_to :post
end 
```

当前的帖子控制器可以保存帖子但不能评论。

```
class PostsController < ApplicationController

  def show

@post = Post.find(params[:id])
@comment=Comment.new
respond_to do |format|
  format.html # show.html.erb
  format.xml  { render :xml => @post }
end

end

def new
  @post = Post.new

  respond_to do |format|
  format.html # new.html.erb
  format.xml  { render :xml => @post }
 end
end

def create
@post = Post.new(params[:post])

respond_to do |format|
  if @post.save
    format.html { redirect_to(@post, :notice => 'Post was successfully created.') }
    format.xml  { render :xml => @post, :status => :created, :location => @post }
  else
    format.html { render :action => "new" }
    format.xml  { render :xml => @post.errors, :status => :unprocessable_entity }
  end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:43:41.573

Mongoid 为您的关系提供访问器，在这种情况下

```
posts.comments
posts.comments = [ Comment.new ]
comment.post
comment.post = Post.new
post.comments << Comment.new
post.comments.push(Comment.new)
... 
```

请参阅， http: [//mongoid.org/docs/relations/embedded/1-n.html](http://mongoid.org/docs/relations/embedded/1-n.html)

这是修改后的帖子/显示操作。

```
 def show

    @post = Post.find(params[:id])
    @comment = @post.comments.all.to_a
    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @post }
    end

  end 
```

这是一个新的帖子/评论操作。

```
 def comment
    @post = Post.find(params[:id])
    comment = Comment.create(params[:comment])
    @post.comments << comment
    @comment = @post.comments.all.to_a

    respond_to do |format|
      format.html { render :action => "show" }
      format.xml  { render :xml => @post }
    end
  end 
```

app/views/posts/show.html.erb

```
<pre>
Post
  <%= @post.inspect %>
Comments
  <%= @comment.inspect %>
</pre> 
```

测试/功能/posts_controller_test.rb

```
require 'test_helper'

class PostsControllerTest < ActionController::TestCase

  def setup
    Post.delete_all
    Comment.delete_all
    @param = {
        post: { title: 'Mongoid relations', body: 'The relation has auto-generated methods' },
        comment: { content: 'a piece of cake' }
    }
  end

  test "show" do
    post = Post.create(@param[:post])
    get :show, id: post.id
    assert_response(:success)
  end

  test "new" do
    get :new
    assert_response(:success)
  end

  test "create" do
    get :create, @param
    assert_response(:success)
  end

  test "comment" do
    post = Post.create(@param[:post])
    get :comment, { id: post.id }.merge(@param)
    assert_response(:success)
    assert_equal(1, Post.count)
    assert_equal(1, Comment.count)
    assert_equal(@param[:comment][:content], Post.first.comments.first.content)
  end

end 
```

# asp.net - 将 Word 文档转换为 EPUB

> ID：10635838
> 
> 赞同：1
> 
> 时间：2012-05-17T12:34:05.707
> 
> 标签：asp.net, c#-4.0, epub

我需要将 .doc 或 .docx 文件（Microsoft Word 文档）转换为 .epub 格式。我不想使用 Spire.Doc DLL。请提出一些措施。可以通过 DotNetZip 库完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:59:00.437

我已经对此进行了一些研究，不幸的是我没有看到很多替代方案。如果你想以便宜的价格做到这一点，那么你可以试试这个：

注意：这最终需要您自己将其转换为 epub。不过，好消息是它是一个开放标准，而且有些人已经这样做了，而且代码在网络上是免费的。有关开放格式的详细信息，请参阅维基百科上的[EPUB](http://en.wikipedia.org/wiki/EPUB)。

1.  将您的文档转换为 pdf
2.  将pdf转换为epub

*为什么我选择了这种方法？*

我没有找到任何 doc-to-epub 的示例，但我想使用这些示例以最少的费用走最快的路线：

Eric Ness 提供了一个很好的例子，说明如何在 stackoverflow 上将 Word 文档转换为 pdf： [如何以编程方式将 Word 文件转换为 PDF？](https://stackoverflow.com/questions/607669/how-do-i-convert-word-files-to-pdf-programmatically)

André van heerwaarde 在 codeproject 上发布了一个项目：[将 PDF 转换为 EPUB 格式](http://www.codeproject.com/Articles/44395/Conversion-of-PDF-to-EPUB-Format)，可下载和开源。你可以从他的代码中获得任何你需要的东西。

希望这可以帮助！

# windows - 如何使用 Windows 批处理命令删除“没有扩展名的文件”的所有内容

> ID：10635840
> 
> 赞同：5
> 
> 时间：2012-05-17T12:34:14.070
> 
> 标签：windows, batch-file

我想删除以“文件”为扩展名的文件的内容，即没有扩展名。我知道如何删除文本文件的内容，但不知道以“文件”为扩展名的文件。

我会感谢你的努力。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T12:43:33.903

`Del *.`在批处理文件中使用以删除没有扩展名的文件。

用于`Dir /A-D *.`列出所有没有扩展名的文件。

使用以下命令清除文件内容

```
findstr "Any data that is not available in origfilename" origfilename > origfilename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:00:50.587

试试这个：

```
echo. 2>file. 
```

它基本上会以什么都没有覆盖文件，达到与删除所有内容相同的目标。只需替换`file.`为您的文件即可。要指定不扩展名，请不要在`.`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T06:14:09.943

怎么样

*`del /s "*."`*

在我在 Windows 10 上进行的测试中运行良好。当然在安全目录中进行测试。您当然可以将其放入一个批次中。我做了一个清理烦人的遗留物，比如 .txt ，比如：

```
echo off

del /s D:\FILES\completed\*.nfo

del /s D:\FILES\completed\*.wflow

del /s D:\FILES\completed\*.workflow

del /s "D:\FILES\completed\*."

echo complete

echo on 
```

将删除主目录和所有子目录中的所有文件。
报价是必需的，因为没有它们就行不通。没有尝试 3 个深度扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:17:39.030

```
copy nul YourFIlE
copy /y nul YourFIlE 
```

如果您想知道，`NUL`是一个特殊的名称（如`/dev/null`在 UNIX 上），就像`CON`（即控制台）一样。我认为这是清除内容的最佳方式。然后该文件将包含 0 个字节。加号输出重定向会将一行写入文件，`echo`因此不会完全清除内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T19:08:11.340

> 德尔*。

可以，但您需要从常规命令提示符调用它，而不是从 powershell 调用。

# html - HTML5 离线缓存仅某些文件

> ID：10635842
> 
> 赞同：0
> 
> 时间：2012-05-17T12:34:22.007
> 
> 标签：html, offline-caching

我正在尝试使用脱机缓存，但只想缓存某些文件。我在 CACHE: 清单的部分明确指定的文件和页面都很好。但浏览器也总是将文件缓存在“主”缓存中。我不想要这些缓存，它们应该总是从服务器请求。如何阻止它们被缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:35:07.187

正在缓存的页面是否在 HTML 元素上具有 manifest 属性？如果是这样，无论您在 CACHE 部分中是否有特定条目，都会导致它们被缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T07:00:44.353

在 CACHE MANIFEST 后使用此文件将被缓存，网络后的文件不会被缓存，* 表示所有其他文件

```
CACHE MANIFEST
http://ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojo/dojo.js
http://ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js
http://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js

NETWORK:
* 
```

# winapi - x86 程序集 - 如何使用 Windows API _WriteConsole@4 - masm32 语法

> ID：10635843
> 
> 赞同：3
> 
> 时间：2012-05-17T12:34:36.157
> 
> 标签：winapi, assembly, x86, masm, masm32

结果到我的帖子**我可以在 windows xp 上使用 int21h 来打印东西吗？**，我看过一篇关于使用 Windows API 的文章，在这篇文章中提到了使用 _WriteConsole@4 API 将消息打印到控制台。该文章位于[http://cs.lmu.edu/~ray/notes/x86assembly/](http://cs.lmu.edu/~ray/notes/x86assembly/)。

到目前为止，这是我的代码：

```
.386P
.model  flat
extern  _ExitProcess@4:near
extern  _GetStdHandle@4:near
extern  _WriteConsoleA@20:near
public  _go

.data
      msg     byte    'if you get this, it worked.', 10
      handle  dword   ?
      written dword   ?
.code 
start:
_go:    
      push    -11
      call    _GetStdHandle@4
      mov     handle, eax
      push    0
      push    offset written
      push    13
      push    offset msg
      push    handle
      call    _WriteConsoleA@20
      push    0
      call    _ExitProcess@4
end start 
```

我正在使用这种语法来编译代码：ML：

```
ml (the file is called test.asm) test.asm /c 
```

关联：

```
link test.obj C:\masm32\lib\kernel32.lib /SUBSYSTEM:CONSOLE /entry:go 
```

我已经让它编译和链接，但是当我运行生成的 .exe 时，它​​什么也不做，甚至没有返回错误。控制台只是黑色的。为什么是这样？

任何帮助将不胜感激。对于这个论坛的用户，我为每天轰炸 stackoverflow.com 道歉，只是我学习的资源很少。

提前致谢，

程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T21:42:41.660

首先，您获取示例代码的链接来自 NASM 用户，从他所说的方式来看，他可能从未使用过 MASM。他还编写了类似 NASM 格式的 MASM 样本。您想使用 Assembly 意味着您必须是高级计算机用户。你需要知道如何使用批处理文件，如何设置系统路径等等。当出现问题时，您通过研究来学习。所以你得到一个错误，说它找不到 masm32rt.inc 但你说你正在使用 MASM32。我使用批处理文件和一个 IDE 进行组装，并且我的系统路径指向 MASM32 中的各个目录。

在 masm32rt.inc 之前添加 masm32\include 目录的绝对路径。当您使用它时，在文本编辑器中打开 masm32rt.inc 并查看其中的内容 - 已修复错误。

```
You start your source file with:
.586
.option casemap:NONE
.model flat, stdcall

include yourincludeshere and it could be a bunch
includelib yourlibshere same here a bunch 
```

masm32rt.inc 已经包含它，它包含用于库的 include 和 includelib 以及广泛使用的包含。我们用它来节省一堆打字。

现在打开 \masm32\include 中的任何包含文件，包含只是为 API 调用设置原型，因此您可以使用 invoke 进行参数检查，它还为 API 调用设置别名，因此我们不必键入 WriteConsoleA 而是我们只需编写WriteConsole 地狱，你甚至可以做 YoConsole equ 并且在你的代码中你会为 WriteConsole 编写 YoConsole。

话虽这么说，我们不使用 - extern _WriteConsoleA@20:near，因为 NASM 也不需要将我们的入口标签设置为公共 MASM 通过以下方式知道您的入口点：

```
.code
yourentrypointname:

end yourentrypointname 
```

我们也不必为链接器指定库，因为我们在源代码中使用了 includelib。

另外，不要，我再说一遍，不要养成在参数中使用硬编码数字的习惯。现在就改掉这个习惯！！Windows 头文件使用 DEFINES 是有原因的 - 代码可读性，我们（帮助您的人）不需要查找 -11 对该 API 调用的含义，我使用了定义，您知道该参数的含义。另外，如果您有 40 次 WriteConsole 调用怎么办？如果您使用等式，则只需更改等式而不是搜索和替换。如果您想要体面的 MASM 教程，请搜索 Iczelion，它们很旧并且包含一些错误，但它们会让您入门，我们中的许多人在早期都使用过这些教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T03:14:04.893

这没有问题：

```
include masm32rt.inc

.data
szMsg       db  "I am in the console!", 0
MSG_LEN     equ $ - szMsg

.data?
BytesWriten dd  ?

.code
start:
    push    STD_OUTPUT_HANDLE
    call    GetStdHandle

    push    NULL
    push    offset BytesWriten
    push    MSG_LEN
    push    offset szMsg
    push    eax
    call    WriteConsole

    push    0
    call    ExitProcess
end start 
```

您的条目标签是 _go 但您告诉链接器是 go - /entry:go 所以它创建控制台但不执行任何代码！在这种情况下你不需要告诉链接器入口点，你的入口点是 start... 链接器是怎么知道的？结束的开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:20:37.537

您可以尝试[MASM32](http://www.masm32.com/)，这是控制台应用程序的 hello world 示例：

```
; ««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««« *

    .486
    .model flat, stdcall
    option casemap :none   ; case sensitive

; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««

    include \masm32\include\windows.inc
    include \masm32\include\masm32.inc
    include \masm32\include\kernel32.inc
    include \masm32\macros\macros.asm

    includelib \masm32\lib\masm32.lib
    includelib \masm32\lib\kernel32.lib

    .code

start:

; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««

    print "Hello world"

    exit

; «««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««««

end start 
```

但是，如果您想坚持使用当前的汇编程序，我们可以在 macros.asm 下查看有一个 print Macro ：

```
print MACRO arg1:REQ,varname:VARARG      ;; display zero terminated string
    invoke StdOut,reparg(arg1)
  IFNB <varname>
    invoke StdOut,chr$(varname)
  ENDIF
ENDM 
```

所以你想要 StdOut，在 MASM32 中它看起来像这样：

```
StdOut proc lpszText:DWORD

    LOCAL hOutPut  :DWORD
    LOCAL bWritten :DWORD
    LOCAL sl       :DWORD

    invoke GetStdHandle,STD_OUTPUT_HANDLE
    mov hOutPut, eax

    invoke StrLen,lpszText
    mov sl, eax

    invoke WriteFile,hOutPut,lpszText,sl,ADDR bWritten,NULL

    mov eax, bWritten
    ret

StdOut endp 
```

因此，在此旅程结束时，您必须使用 WriteFile 而不是 WriteConsole :)

# mysql - 从两个数据库中获取不同计数的总和

> ID：10635850
> 
> 赞同：0
> 
> 时间：2012-05-17T12:35:18.093
> 
> 标签：mysql

第一个问题，希望有人可以在这里提供帮助。我一直在努力寻找如何做到这一点，并认为是时候寻求帮助了。请注意我对我的 SQL 查询非常陌生，我的代码可能和它一样不优雅！

我正在使用两个具有相同配置的数据库。每个数据库代表区域数据，但它们之间的所有表和列都是相同的。本质上，我希望获得特定个人执行的每日活动计数。此外，我需要收集的数据位于多个表上，所以请耐心等待我在这里记下：D_USA 和 D_CAN 用于两个数据库，T1 和 T2 用于我要加入的两个表。这是我现有的代码和我得到的输出：

```
SELECT 
  "USA" AS REGION, 
  LEFT(FROM_UNIXTIME(D_USA.T1.date),10) as DATE,
  D_USA.T1.owner AS OWNER, COUNT(DISTINCT D_USA.T1.id) AS GROUPS, 
  COUNT(DISTINCT D_USA.T2.id) AS UNITS
FROM
  D_USA.T1
  JOIN D_USA.T2 ON D_USA.T1.id = D_USA.T2.parent_id
WHERE
  D_USA.T1.complete='Y'
  AND D_USA.T1.owner = 'XYZ' 
  AND D_USA.T2.status = 'P' 
  AND LEFT(FROM_UNIXTIME(D_USA.T1.date),10) >= '2012-01-01'
GROUP BY DATE
UNION ALL
SELECT 
  "CAN" AS REGION, 
  LEFT(FROM_UNIXTIME(D_CAN.T1.date),10) as DATE,
  D_CAN.T1.owner AS OWNER, 
  COUNT(DISTINCT D_CAN.T1.id) AS GROUPS, 
  COUNT(DISTINCT D_CAN.T2.id) AS UNITS
FROM
  D_CAN.T1
  JOIN D_CAN.T2 ON D_CAN.T1.id = D_CAN.T2.parent_id
WHERE 
  D_CAN.T1.complete='Y'
  AND D_CAN.T1.owner = 'XYZ' 
  AND D_CAN.T2.status = 'P' 
  AND LEFT(FROM_UNIXTIME(D_CAN.T1.date),10) >= '2012-01-01'
GROUP BY DATE 
ORDER BY DATE ASC; 
```

电流输出：

```
REGION|DATE|OWNER|GROUPS|UNITS
USA|2012-01-01|XYZ|10|100
CAN|2012-01-01|XYZ|5|100
USA|2012-01-02|XYZ|10|75
USA|2012-01-03|XYZ|5|50
CAN|2012-01-03|XYZ|10|50
CAN|2012-01-04|XYZ|10|100 
```

期望的输出（基于以上）

```
DATE|OWNER|GROUPS|UNITS
2012-01-01|XYZ|15|200
2012-01-02|XYZ|10|75
2012-01-03|XYZ|15|100
2012-01-04|XYZ|10|100 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:43:19.110

只需将一个选择包裹在它周围

选择 Date,Owner,Groups, Sum(Units) 作为 Units From (在此处插入您的查询) somedummyName Group By Date,Owner,Groups

# javascript - 从网页有条件地打印 pdf

> ID：10635853
> 
> 赞同：1
> 
> 时间：2012-05-17T12:35:23.283
> 
> 标签：javascript, pdf

我在这样的网页中嵌入了一个pdf

```
<html>
<head>
    <title></title>
</head>
<body>
    <iframe id = "pdfFrame" name="pdfFrame" data="sample.pdf#print=true" width="800" height="800"/>
</body> 
```

此 pdf 已嵌入 javascript，可在加载 pdf 时打开 pdf 打印对话框。我想让这个调用有条件并让网页通过条件。

那么有没有办法将参数传递给pdf，然后让嵌入式javascript访问它来决定是否显示打印对话框

# iis - IIS 6 + JBoss 7 Web 应用程序 URL 配置

> ID：10635859
> 
> 赞同：1
> 
> 时间：2012-05-17T12:35:43.983
> 
> 标签：iis, jboss, jboss7.x, isapi, mod-jk

早上好！

我按照这样的教程成功地将我的 iis 6.0 绑定到我的 jboss 7 Web 应用程序：[http ://www.techstacks.com/howto/iis_and_isapi_redirect.html](http://www.techstacks.com/howto/iis_and_isapi_redirect.html)

我在去 192.168.1.1:8080/myapp 之前使用了我的应用程序（直接到 jboss）

现在我可以使用 www.mydomainwebsite.my/myapp

我很高兴，但最好让“www.mydomainwebsite.my”简单地指向应用程序上下文，而不在 URL 中看到“myapp”。

我尝试放入 uriworkermap.properties 文件： /=local 和 /myapp/=local

但是，如果我只访问 www.mydomainwebsite.com，我仍然会看到 jboss 默认主页。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T02:41:04.677

您将需要取消部署欢迎页面。

在配置更改`enable-welcome-root="true"`为`enable-welcome-root="false"`

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
        <alias name="example.com"/>
    </virtual-server>
</subsystem> 
```

然后通过在 WEB-INF 的 jboss-web.xml 中设置它来让你的 web 应用程序从根上下文工作

```
<?xml version="1.0"?>
<jboss-web>
    <context-root>/</context-root>
</jboss-web> 
```

我不完全确定最后一个 xml 是否相对于 jboss-as7 的 xsd 格式正确，但应该可以工作。

# c++ - 硬件直接使用 Qt 打印而不使用 QPrintDialog

> ID：10635860
> 
> 赞同：0
> 
> 时间：2012-05-17T12:35:47.927
> 
> 标签：c++, linux, file, qt, printing

我需要在单击按钮时硬件打印一个 pdf 文件（已经存在的文件）。

就像需要打印的文件已经被识别并存在，并且单击打印按钮后，`QPushButton`该 pdf 文件应该被发送到打印机队列，而不会弹出打印对话框。

QPrinter 或 Qt 中的任何其他工具可以做到这一点吗？（平台是linux。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:03:22.210

一般来说，Qt（据我所知）没有内置的方法来做到这一点。您需要一个了解如何将 PDF 内容转换为（例如）后置脚本以发送到打印机的程序。

Google 快速搜索了一个名为“ [Poppler](http://poppler.freedesktop.org/) ”的库，它可以将 PDF 内容渲染到`QImage`实例上，然后您可以打印这些内容。

也就是说，如果你将自己限制在 linux 上，你可以创建一个`QProcess`并调用类似的东西：

```
lp document.pdf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T14:08:27.703

在 Qt 5.2 中，我能够使用这些函数来转换 HTML -> WebView -> Print() 本来，我想直接打印 PDF，但是这样做了。（大部分代码是从其他网站或论坛收集的）

```
void MainWindow::on_btnHtmltoWebView_clicked()
{
    QString html = ui->txtHtml->toPlainText();
    ui->webView->setHtml(html);
    ui->tabWidget->setCurrentIndex(3);
}

void MainWindow::on_btnPrintWebView_clicked()
{
    QPrinter p;
    p.setPaperSize(QPrinter::A4);
    p.setFullPage(false);
    p.setResolution(100);
    p.setFromTo(0,1);   //only print 1 page
    p.setOrientation(QPrinter::Portrait);
    QString printerName = QPrinterInfo::defaultPrinter().printerName();
    ui->webView->print(&p);
    showTrayMessage("Printing" ,"Output format: "+ QString::number(p.outputFormat()) +
                     QString("Printer state: ") + QString::number(p.printerState())
                    );
} 
```

# ios - ios 5 - 如何使用网页 url 播放视频

> ID：10635866
> 
> 赞同：2
> 
> 时间：2012-05-17T12:36:13.613
> 
> 标签：ios, ios5, mpmovieplayercontroller

我想在链接上播放视频：www.mysite.com/iphone/video.mp4

我使用 ios5 和 MPMoviePlayerController 我尝试使用以下代码，但它只显示一个黑页：

```
MPMoviePlayerController *player=[[MPMoviePlayerController alloc]initWithContentURL:[NSURL URLWithString:@"http://www.mysite.com/iphone/video.mp4"]];                                               [[player view] setFrame:[self.view.bounds]];                                                                                       [self.view addSubview:[player view]]; [player play]; 
```

是否可以通过 web url 字符串播放视频？我有很多视频，所以我不想把它们放在我的项目中，所以我需要从网络上播放它

@Edit：我用[苹果开发者网站上的示例完成了它](https://developer.apple.com/library/ios/#samplecode/MoviePlayer_iPhone/Introduction/Intro.html)

它使用流，但解决了我的问题，因为我使用了网页 url。感谢所有答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:14:57.013

如果您已准备好流媒体服务器，则很容易实现弹出 youtube 样式的视频控制器。

[编写应用程序以将视频流式传输到 iPhone](https://stackoverflow.com/questions/2978405/writing-an-app-to-stream-video-to-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:53:03.203

尝试这个

```
NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:urlStr];
    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [self.view addSubview:moviePlayer.view];
    moviePlayer.view.frame = CGRectMake(0, 0, 300, 400);  
    [moviePlayer play]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:31:57.710

消除

```
NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil]; 
```

像这样传递网址，

```
NSURL *videoURL = [NSURL URLWithString:@"http://www.youtube.com/v/HGd9qAfpZio&hl=en_US&fs=1&"]; 
```

# java - Netbeans 上的 CDI @Target 警告消息

> ID：10635868
> 
> 赞同：3
> 
> 时间：2012-05-17T12:36:35.640
> 
> 标签：java, cdi, netbeans-7

在我使用 CDI 的 Web 项目中，Netbeans 7.1.2 对我的自定义限定符发出警告

```
@Qualifier
@Retention(RetentionPolicy.RUNTIME)
@Target({FIELD, TYPE, METHOD})
public @interface MyQualifier{

} 
```

带有消息：

```
The CDI Annotation is declared as Qualifier but it has wrong target values. Correct target values are '{METHOD, FIELD, PARAMETER, TYPE'} or '{FIELD, PARAMETER'}. 
```

是的，这只是警告，但我仍然对这条消息的含义感到好奇。`@Target`在网上找不到任何好的参考资料。所以这里有人可以对目标和警告信息进行一些解释。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T03:51:00.790

看起来，根据 CDI 规范的第 2.3.2 节，它们都是不正确的。限定符必须是 METHOD、FIELD、PARAMETER、TYPE。

# cluster-analysis - k-means 中的更新中心使用余弦相似度

> ID：10635869
> 
> 赞同：0
> 
> 时间：2012-05-17T12:36:40.337
> 
> 标签：cluster-analysis, k-means, trigonometry

我在更新 k-means 中心时遇到问题。我的数据如下：

```
  1 0 5 6 2 3 5 7
  2 5 0 8 6 1 0 5 。. .
  2 5 6 4 2 1 0 8
         .
         .

```

我需要逐行处理（例如：一行是中心）。我计算了具有余弦相似度的聚类。现在我想更新每个集群的中心。但我不知道该怎么做。请帮助我。（每一行包含文档中不同单词的迭代次数。）谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:11:19.487

实际上有一种算法可以使用余弦度量，称为球面 k 均值。

有关详细信息，请参阅

[http://www.cs.gsu.edu/~wkim/index_files/papers/refinehd.pdf](http://www.cs.gsu.edu/~wkim/index_files/papers/refinehd.pdf) [http://nirmalthapa.wordpress.com/2011/05/05/spherical-k-means-clustering-algorithm/](http://nirmalthapa.wordpress.com/2011/05/05/spherical-k-means-clustering-algorithm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T06:12:34.790

**k-means 是为 Euclidean disance 设计的，而不是其他指标**。

虽然起初看起来好像您可以轻松使用任何其他距离函数，但问题实际上是*均值*函数。

对于欧几里得距离，算术平均值将使方差最小化，从而确保算法的终止。对于曼哈顿距离，您可以改用中心点（参见 k-中心点聚类）。

但是如果你加入任意其他距离函数，k-means 可能会陷入无限循环（即停止收敛）。所以在使用其他距离时要小心，并考虑使用比 k-means 更高级/现代的算法。

# pom.xml - 在 POM XML 中定义依赖关系

> ID：10635871
> 
> 赞同：1
> 
> 时间：2012-05-17T12:36:57.867
> 
> 标签：pom.xml

我已经安装了 Maven 3.0.4，现在想使用 Maven 在 eclipse 3.3 中运行已经创建的 java 项目。为此，我添加了 eclipse maven 插件，然后为项目启用了选项“Maven -> Enable Dependency Management”。此操作在同一个项目中创建了 pom.xml。要添加测试文件，我添加了源目录。
现在我对如何在这个 maven 项目中添加 jar 文件感到非常困惑，尽管我尝试使用依赖项但在编译时出现“缺少工件”的错误。例如，$projectDir/lib 文件夹中的 jar 文件之一是“junit-4.8.2.jar”，我将其用作“import org.junit.Test;” 所以我们应该写：

```
 <dependency>
    <groupId>org.junit</groupId>
    <artifactId>junit</artifactId>...any unique name
    <version>4.8.2</version>
  </dependency> 
```

如果是，那么我们还需要做什么才能让 maven 在编译时选择这个 jar 文件。另外，我不清楚使用在我的用户帐户/.m2 文件夹中创建的“本地存储库”。

任何人都可以请建议..谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:48:58.580

pom 文件中提到的依赖 jar 必须驻留在 .m2/repository 目录（通常在用户的主目录下）中的特定文件夹中（基于它们的组 id/版本号）——也称为*本地存储库*。为此，您需要使用 maven 注册您的 jar，以便将其添加到本地存储库中）

请参阅[这篇文章](http://www.zparacha.com/include-externaljar-file-in-maven/)，了解如何将 jars 添加到本地存储库并设置项目的依赖项。请注意，如果 jar 发生更改（例如，来自您自己的项目之一，而不是您下载的第 3 方库），您将必须更新/重新将其添加到本地存储库。

或者，如果您依赖 3rd 方库，请在网络上检查该库是否已添加到您可以使用的某个 maven 存储库中（因此您不需要手动添加它）。

此外，如果 jar 来自您自己的项目之一，最好也将其设置为 maven 项目并以这种方式将其添加到您的项目依赖项中，因此您无需更新/重新添加将生成的 jar 手动保存到本地存储库（通过 maven 编译其他项目将为您执行此操作）

# vb.net - Vb.net DatagridviewComboBoxCell如何设置选中值

> ID：10635872
> 
> 赞同：0
> 
> 时间：2012-05-17T12:37:04.157
> 
> 标签：vb.net, datagridviewcombobox

我有一个 datagridview，它有一个 ComboBoxCell，，，ComboBox 绑定到数据，，我想将它用作传统 ComboBox，我的意思是我想根据它的值显示它的项目（来自显示成员），，

例如

当我这样做时

Datagridview1.CurrentRow.Cells(4).value = 7 '单元格4是DatagridviewComboBoxCell

它给了我一个错误

"DatagridviewComboBoxCell.value 无效",

但我希望这个组合框应该选择并显示值为 7 的项目

我尝试了许多不同的技术，，，但徒劳无功

谢谢，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-19T08:42:12.460

好吧，我知道有点晚了，我希望我不会吵醒你。这可能会有所帮助。

```
 For Each question As String In questions

        answerStr = 'your query or something that can be used as a datasource, eg datatable'
        Dim dgvcc As New DataGridViewComboBoxCell
        With dgvcc
            .DataSource = answerStr
            .ValueMember = "ColumnIDFromAnswerStr"
            .DisplayMember = "AnotherColumnFromAnswerStr"
        End With    

        'this is where you can set the combobox
        'assuming answerStr is a datatable (not tested code, but i think it will work)
        dgvcc.Value = answerStr.Rows(x).Item(y).Value    
        'assuming you only have one column (combobox)   
        DataGridView1.Item(0, rowIndex) = dgvcc      
        rowIndex += 1
        dgvcc.Dispose()
    Next 
```

## **编辑**

我还发现了这个[有用的链接](http://www.dreamincode.net/forums/topic/338689-datagridview-combobox-selected-value-changed/)

# macos - 访问 Mac os x 10.6.8 上运行的 Tomcat

> ID：10635873
> 
> 赞同：0
> 
> 时间：2012-05-17T12:37:06.820
> 
> 标签：macos, tomcat

我的 Web 应用程序在 Mac OS 10.6.8 的 tomcat 服务器上运行。该应用程序运行良好，我可以使用 localhost 或 127.0.0.1 在本地访问该应用程序

系统连接到 LAN 并具有类似 10 的 IP 地址*。*.* .

我的问题是，当我尝试使用真实 IP（10 ....）从连接到同一 LAN 的不同系统访问应用程序时，无法访问该应用程序。

是否需要进行任何配置，以便可以从不同的系统访问 tomcat 服务器。

我之前使用的是Windows系统，其他系统可以访问tomcat没有任何问题。

但是现在我已经将我的服务器转移到了 Mac OS，并且服务器无法在外部访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:05:26.350

首先检查 Tomcat 是否正在侦听公共 IP（默认情况下）。您可以确认这一点`netstat -na | grep 8080`

其次，检查 OSX 防火墙（系统偏好设置 -> 安全和隐私 -> 高级 - java 应该出现在列表中，并且应该设置为允许传入连接）没有阻止相关端口上的传入连接 - 我假设是 8080。

# dynamics-crm - CRM Dynamics 2011 - 如何创建报告（合同、案例、行动）

> ID：10635874
> 
> 赞同：0
> 
> 时间：2012-05-17T12:37:12.987
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-online

我想创建将显示有关合同和案例信息的报告。客户合同和分配给此合同的案例以及每个案例之后有多少资源可用。

我还有一个问题。是否在 SQL Reports Services 中创建了默认报告？

此致。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:11:09.823

根据您的具体要求，您可以使用内置的报告向导构建您正在寻找的报告。您可以通过从 Workplace -> Reports 区域创建新报告来找到它。您可能需要将合同作为报告中的主要记录类型，将案例作为相关记录类型。

正如您所期望的那样，该向导确实有其局限性，因此如果您正在寻找更多内容，您可以使用 SSRS/BIDS 创建报告并将它们上传到 CRM。可以使用[FetchXML](http://msdn.microsoft.com/en-us/library/bb928434.aspx)或 T-SQL（仅限本地部署）构建这些报告。

关于报告的一些链接：

[http://msdn.microsoft.com/en-us/library/gg328097.aspx](http://msdn.microsoft.com/en-us/library/gg328097.aspx)

[http://blogs.msdn.com/b/crm/archive/2010/11/29/custom-report-capabilities-in-microsoft-dynamics-crm-2011.aspx](http://blogs.msdn.com/b/crm/archive/2010/11/29/custom-report-capabilities-in-microsoft-dynamics-crm-2011.aspx)

# php - 如何在 WordPress 模板中插入第二个菜单？

> ID：10635880
> 
> 赞同：11
> 
> 时间：2012-05-17T12:37:54.580
> 
> 标签：php, wordpress

因此，我正在尝试向 WordPress 模板添加第二个菜单——第一个菜单是通过编写以下内容获得的：

```
<?php wp_nav_menu( array( 'sort_column' => 'menu_order', 'container_class' => 'menu-header' ) ); ?> 
```

现在，我在`functions.php`文件中注册了两个菜单，如下所示：

```
register_nav_menu('header', 'Header Menu');
register_nav_menu('ad-menu1', 'Ad Menu One'); 
```

如何访问注册的第二个导航菜单中的任何菜单？还是我注册不正确？我试过了：

```
<?php wp_nav_menu( array( 'theme_location' => 'ad-menu1', 'container_class' => 'menu-ads' ) ); ?> 
```

但这只是给了我每个类别的列表，这不是我想要的。

我如何仅获取与 Ad Menu One/ad-menu1 关联的菜单？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-17T13:35:52.383

将二级菜单添加到主题的标准方法如下。

添加创建新菜单打开文件的功能`functions.php`，`registering`它：

```
register_nav_menus( array(
    'primary' => __( 'Primary Menu', 'yourtheme'),
    'secondary' => __( 'Secondary Menu', 'yourtheme' ),
 ) ); 
```

这在主题菜单选项中出现了第二个菜单。

接下来，将代码添加到主题文件的所需位置。在这种情况下，它将被添加到页脚。

```
<nav>
    <?php
        wp_nav_menu( array('container_class' => 'menu-footer',
        'theme_location' => 'secondary') ); ?>
</nav> 
```

# php - Regex 和 preg_match - 获取带有特定锚文本的 href

> ID：10635883
> 
> 赞同：1
> 
> 时间：2012-05-17T12:38:10.457
> 
> 标签：php, preg-match

我需要在 html 页面中获取带有特定锚文本的链接的 href。

```
 </tr>
       <tr>
      <td><a href="/thisisafile.pdf" target="_blank" class="body1">
        This is some anchor text </a></td>
    </tr>
      <tr> 
```

我需要拉出/thisisafile.pdf，我尝试了以下代码：

```
preg_match('~<a.*href="(.*?)".?>.?This is some anchor text.?</a>~sm',$temp,$matches,0); 
```

$temp 包含上面的代码。

我已经在在线 preg_match 测试器中尝试了正则表达式，它匹配。我已经在没有分隔符的正则表达式测试器中尝试了正则表达式，它可以工作。但是当我在我的服务器（linux）上尝试它时，我得到 0 个匹配项（不是假的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:46:45.723

可能是另一个副本。检查这个问题的第一个答案。正则表达式引擎有时会变得笨拙，尤其是当您使用 .* 贪婪模式时。

[获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:45:47.790

你应该改变

```
~<a.*href="(.*?)".?>.?This is some anchor text.?</a>~sm 
```

进入

```
~<a.*?href="(.*?)".*?>.*?This is some anchor text.*?</a>~sm 
```

你错过了`*`. `.?`表示它只允许一个字符或不允许字符。和文本之前的`target="_blank" class="body1"`空格因此不允许，导致您的正则表达式失败。

**编辑**：还`.*`通过替换它来减少你的第一个贪婪，`.*?`以防止将来出现问题。

# database - Hibernate 在 2 个数据库之间传输数据

> ID：10635884
> 
> 赞同：1
> 
> 时间：2012-05-17T12:38:11.087
> 
> 标签：database, hibernate

我有 2 个具有相同架构的数据库：本地数据库 A 和中央数据库 B。我想：

1.  从 db A 查询会话（使用某些条件）
2.  将选择数据作为具有新生成的 id 的新条目插入到 db B。

例如：会话实体生成了 id 和 ManyToOne 关系到 testingData 也生成了 id。

```
@Id
@Column(name = "ID", nullable=false)
@GeneratedValue(strategy = GenerationType.TABLE)
public long getDatabaseIdentifier()
{
    return databaseIdentifier;
} 
```

最有效的方法是什么？我不想创建新实体并使用复制构造函数。我尝试使用`Example.create(session).excludeProperty("databaseIdentifier")`但没有运气。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:52:49.880

您需要实例化一个新对象（可能使用复制构造函数方法）。问题是您从 Hibernate 返回的对象是代理的，因此与会话相关联（您是否曾经在某个时候遇到过 LazyInitializationException？）

因此，您需要将属性从绑定到**DB A**的休眠增强对象复制到原始对象，该对象未链接到任何 DB 并且可以插入**DB B**中。

* * *

## 更新

您可以尝试以下方法，但我不确定它是否可行

*   通过调用 EntityManager.detach(obj) 分离对象
*   从对象中删除 ID
*   将对象与其他实体管理器一起保存

同样，我不确定这是否会起作用，因为 detach() 从持久上下文中删除了对象，但它仍然是一个增强的对象。

# android - 在接受的位置的基础上，如何显示图像？

> ID：10635887
> 
> 赞同：0
> 
> 时间：2012-05-17T12:38:15.640
> 
> 标签：android, android-intent, android-imageview

```
public class ImageViewActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {

        Integer[] ImgPreview = { R.drawable.mlview1, R.drawable.mlview2,
            R.drawable.mlview3 };
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image_prev);

        Intent intent = null;
        Bundle b = intent.getExtras();
        int position = b.getInt("position");

        // here, what to do?
        if (position == 0) {

        } 
```

从上一个活动中，它获取参数“位置”，根据“位置”的值，它应该显示图像。例如：如果位置为 0，则显示图像“mlview1”，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:41:00.750

写这个。。

```
ImageView imageView = (ImageView) findViewById(R.id.imageview); // Here R.id.imageview is id of ImageView fro your image_prev xml file.. change according it..
imageView.setImageResource(ImgPreview[position]); 
```

# javascript - 如何使用 javascript 将 Dijit Combobox 放置在特定的内容窗格中

> ID：10635888
> 
> 赞同：1
> 
> 时间：2012-05-17T12:38:20.143
> 
> 标签：javascript, dojo

我正在尝试创建一个数据存储来填充一个组合框，一切似乎都工作正常，但是我的组合框没有出现在我想要的地方，实际上它没有出现在任何地方。

我正在尝试这样的事情。

```
 //this is the content pane where i want the combobox

      var tab = new dijit.layout.ContentPane({
      title: "tab",
      style:"width:100%; height:500px",
      content: "Here goes the comobox",

   });

  tab_container.addChild(tab);

  // this is the combobox and store created

   Types = function() {

dojo.xhrGet
({url:"json/types.json",
handleAs: "json",
load: function(types, details) {
        PropertyMap.TypeStore = new dojo.data.ItemFileReadStore({
            data : {
                identifier: 'id',
                label: 'display',
                items : types
            }
        });
    },
 error: function(error_msg, details) {
        content.handleError(error_msg, details);
    }});
 };

 XXX.createPlaceTypeStore = function(types) {

var PlaceTypeStore = new dojo.data.ItemFileReadStore({
    data:{
        identifier:"id",
        label:"display",
        items:types
        }
    });

    var combo_box = new dijit.form.ComboBox({
name : "options",
placeHolder:"options place",
value:"",
store: PlaceTypeStore,
searchAttr:"display"
 });

 combo_box.placeAt("tab");

   // i am getting this error
  refNode is null
 [Break On This Error]  

   if(has("dojo-combo-api")){ 
```

# javascript - 在新标签中打开：“Bing”是如何做到的？(IE9)

> ID：10635892
> 
> 赞同：7
> 
> 时间：2012-05-17T12:38:34.700
> 
> 标签：javascript, html, internet-explorer-9, bing

在新选项卡或新窗口中打开`target ="_blank"`链接基于用户设置，当我单击`target ="_blank"`链接时，它将在新窗口 (IE9) 中打开。但是在 Bing 中，当单击“查看完整大小的图像”时，它会在新选项卡中打开！（你现在可以测试它）

他们是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:05:31.353

我有 IE 9.0.8112.16421

它会在下一个选项卡中打开链接。

```
<A href="http://msn.com" target="_blank">link</A>
<A href="http://jsfiddle.net/img/logo.png" target="_blank">image</A>

<span onclick="window.open('http://msn.com', 'openWindow', 'top=0, left=10,  width = 500, height = 500,resizable=yes, location=yes, toolbar=yes, status=yes')" style="text-decoration:underline;color:blue;cursor:pointer;">linkJavascript</span> 
```

​并且仅在第三个实现中，仅使用`window.open`javascript 函数的参数（顶部、左侧、宽度等），链接在新窗口中打开。 [***演示***](http://jsfiddle.net/mptSA/3/)

我认为本文可能会帮助您配置 IE9 并解决此问题。 [如何只在新标签页中打开链接？](http://forum.thewindowsclub.com/microsoft-internet-explorer/32421-how-only-open-links-new-tabs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:25:31.920

有一个名为“_tab”的替代目标：

```
<a target="_tab" .. > 
```

我不知道这是否会覆盖您的设置或其他任何内容，但请使用 IE 的开发人员工具来探索那里发生的事情。（也许 IE 有一个*检查元素*上下文菜单选项？

# facebook - Facebook 身份验证/连接

> ID：10635896
> 
> 赞同：1
> 
> 时间：2012-05-17T12:38:51.093
> 
> 标签：facebook, authentication, facebook-authentication

我正在为一所大学开发一个学生门户网站，我想在其中实现一些 Facebook 的社交网络功能。我想做的主要事情是允许学生使用他们的 Facebook 凭据登录。我们收到了大量关于学生需要重置学生密码的帮助台票，因为他们忘记了密码，所以我希望这能在一定程度上解决这个问题。

然而，学生门户网站仅适用于目前在学院有申请和帐户的学生。有没有办法只允许 Facebook 身份验证对当前在大学拥有用户帐户的用户工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:45:13.813

您很可能需要添加自己的系统，在其中使用“已验证”之类的标志验证帐户，并且需要有人在后端系统中手动验证它们。然后，当用户登录时，您可以对照 facebook id 检查此标志。因此，当用户第一次连接时，您将 facebook id 添加到数据库并将已验证设置为 false。也许在注册时要求大学电子邮件地址发送验证码。然后，您可以将 facebook id 连接到数据库中现有的大学电子邮件地址。或者，使此检查自动进行，因此如果他们输入有效的电子邮件，它会更新为已验证（尽管如果格式一致，人们显然可以编造虚假的大学电子邮件）。

据我所知，Facebook 没有提供这种开箱即用的系统，因此您必须开发自己的系统来根据您知道的某些信息验证帐户。

# entity-framework - 实体框架不尊重惰性评估

> ID：10635898
> 
> 赞同：0
> 
> 时间：2012-05-17T12:39:05.130
> 
> 标签：entity-framework

这有效：

```
var user = db.Users.OrderByDescending(u => u.Id).FirstOrDefault(u => u.Email == "asd@gmail.com" && u.Password == "8a79hjhfas8d7fd89"); 
```

它正确生成只返回一个用户的 sql 语句。

下面的代码在理论上是相同的，它从数据库中获取所有用户，然后只应用过滤器。它就像我在执行 .ToList() 一样工作，因此评估数据库中的所有内容，并在常规 IEnumerable 中应用过滤器，而不是生成正确的 sql 语句：

```
public static User Get(Func<User, bool> predicate)
{
  return db.Users.OrderByDescending(u => u.Id).FirstOrDefault(predicate);
}

var user = User.Get(u => u.Email == "asd@gmail.com" && u.Password == "8a79hjhfas8d7fd89"); 
```

这是实体框架上的错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:40:49.270

您正在传入 a `Func<>`，它是一个已编译的委托。相反，您应该将 an`Expression<>`作为 Get 参数传入，这是一个语法树，EF 可以分析并从中生成查询，而不是针对每个结果执行委托方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:42:40.290

EF 不知道如何将任意 Func 委托转换为 SQL，因此它别无选择，只能加载整个数据集，然后在该结果集上运行谓词。

# iphone - 以原子方式将 NSString 附加到文件？

> ID：10635900
> 
> 赞同：2
> 
> 时间：2012-05-17T12:39:05.767
> 
> 标签：iphone, objective-c, file, atomic

一些写入文件的函数是原子的，因此在写入时发生某些事情时它们可以防止文件损坏，因此非常方便。

```
-[NSData writeToFile:atomically:]
-(BOOL)writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile encoding:(NSStringEncoding)enc error:(NSError **)error; 
```

问题是他们删除了文件并用新内容替换它......我只需要在一个大文件中附加一行。

以原子方式执行此操作的最佳方法是什么，而不是在发生某些事情时冒着损坏该文件的风险？

PS：文件太大，一个字符串无法读取，更新字符串，然后将巨大的字符串推送到文件系统。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:03:56.880

没有这样的功能的原因是原子版本会复制文件，将所有内容写入其中，然后将新文件重命名为与旧文件相同的名称，最后删除旧文件。因此，原始文件实际上从未被修改，而是被新文件替换。

如果您想要快速的原子追加，您可以使用`fwrite`and`fsync`来获得所达到的效果。`fwrite`小于 PIPE_BUF（iOS 上为 4096 字节）的 s`fsync`保证是原子的。

这是将执行该操作的类别的简短片段，请注意它缺少系统调用的正确错误检查代码。

```
@implementation NSData(AppendAtomically)

- (void)appendToFileAtomic:(NSString *)filePath
{
    NSAssert([self length] < PIPE_BUF, @"Cannot write messages longer than %d atomically", PIPE_BUF);

    const char *utfpath = [filePath UTF8String]; 

    FILE *f = fopen(utfpath, "ab");
    fwrite([self bytes], 1, [self length], f);
    fsync(fileno(f));
    fclose(f);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:48:33.780

[这里](http://iphone-review2.blogspot.in/2010/08/nsstring-appendtofileusingencoding.html)显示了一种方法，这个堆栈溢出[问题](https://stackoverflow.com/questions/4626697/writetofile-in-osx-appending-to-the-file)也显示类似。

第二种方法是：

从文件中获取数据

```
 NSMutable *data = [NSData dataWithContentsOfFile:yourFilePath];
 [data appendData:yourNewData];
 [data writeToFile:yourFilePath]; 
```

第一个更可取，因为文件很厚。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:25:18.720

看看`NSFileHandle`。它将允许您打开一个文件进行写入，将光标定位到文件的末尾，然后将您的数据附加到文件的末尾。

# matplotlib - 使用多个同步子图进行缩放或平移时显示缓慢

> ID：10635901
> 
> 赞同：2
> 
> 时间：2012-05-17T12:39:19.553
> 
> 标签：matplotlib

我一次绘制多个图像，共享轴，因为我将它用于探索目的。每张图像都是不同日期的同一张卫星图像。在缩放和平移时，我正在尝试 matplotlib 的缓慢响应，我想询问任何可以加快该过程的提示。

我现在正在做的是：

*   从多个 netcdf 文件加载数据。

*   计算所有数据的最大值，用于标准化。

*   使用 ImageGrid 创建子图网格。随着每个子图的生成，我删除了数组以释放一些内存（每个数组都存储在一个列表中，“删除”只是一个 list.pop()）。请参阅下面的代码。

它是 15 张图像，单通道，每张 4600x3840 像素。我注意到瓶颈不是 RAM（我有 8 GB），而是处理器。缩放或平移时，Python 在其中一个内核上的使用率达到 100%（它是 Intel(R) Core(TM) i5-2500 CPU @ 3.30GHz，4 核，64 位）。

代码是：

```
import os
import sys

import numpy as np
import netCDF4 as ncdf
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import ImageGrid
from matplotlib.colors import LogNorm

MIN = 0.001 # Hardcoded minimum data value used in normalization

variable = 'conc_chl'
units = r'$mg/m^3$'
data = []
dates = []

# Get a list of only netCDF files
filelist = os.listdir(sys.argv[1])
filelist = [f for f in filelist if os.path.splitext(f)[1] == '.nc']
filelist.sort()
filelist.reverse()

# Load data and extract dates from filenames
for f in filelist:
    dataset = ncdf.Dataset(os.path.join(sys.argv[1],f), 'r')
    data.append(dataset.variables[variable][:])
    dataset.close()
    dates.append((f.split('_')[2][:-3],f.split('_')[1]))

# Get the maximum value of all data. Will be used for normalization
maxc = np.array(data).max()

# Plot the grid of images + dates
fig = plt.figure()
grid = ImageGrid(fig, 111,\
        nrows_ncols = (3, 5),\
        axes_pad = 0.0,\
        share_all=True,\
        aspect = False,\
        cbar_location = "right",\
        cbar_mode = "single",\
        cbar_size = '2.5%',\
        )
for g in grid:
    v = data.pop()
    d = dates.pop()
    im = g.imshow(v, interpolation='none', norm=LogNorm(), vmin=MIN, vmax=maxc)
    g.text(0.01, 0.01, '-'.join(d), transform = g.transAxes) # Date on a corner
cticks = np.logspace(np.log10(MIN), np.log10(maxc), 5)
cbar = grid.cbar_axes[0].colorbar(im)
cbar.ax.set_yticks(cticks)
cbar.ax.set_yticklabels([str(np.round(t, 2)) for t in cticks])
cbar.set_label_text(units)

# Fine-tune figure; make subplots close to each other and hide x ticks for
# all
fig.subplots_adjust(left=0.02, bottom=0.02, right=0.95, top=0.98, hspace=0, wspace=0)
grid.axes_llc.set_yticklabels([], visible=False)
grid.axes_llc.set_xticklabels([], visible=False)

plt.show() 
```

关于可以改进什么以使其更具响应性的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:05:32.260

似乎设置`interpolation='none'`比将其设置为“最近”（甚至“双线性”）要慢得多。在支持的后端（例如任何 Agg 后端）上，“none”和“nearest”的代码路径是不同的：“nearest”被传递给 Agg 的插值例程，而“none”对图像进行未采样的重新缩放（我只是在阅读这里的代码注释）。

这些不同的方法给出不同的定性结果；例如，下面的代码片段给出了轻微的摩尔纹图案，当`interpolation='none'`.

```
import matplotlib.pyplot as plt
import numpy as np

img = np.random.uniform(0, 255, size=(2000, 2000)).astype(np.uint8)

plt.imshow(img, interpolation='nearest')
plt.show() 
```

我*认为*“无”在放大（图像像素大于屏幕像素）时与“最近”大致相同，但在缩小时会给出更高阶的插值结果（图像像素小于屏幕像素）。我认为延迟来自重新缩放所需的一些额外的 Matplotlib/Python 计算。

# python - python中的错误处理程序

> ID：10635902
> 
> 赞同：1
> 
> 时间：2012-05-17T12:39:21.477
> 
> 标签：python, error-handling

是否可以在 python 中注册自定义错误处理程序 - 如PHP中的[http://php.net/set_error_handler ？](http://php.net/set_error_handler)我想从我的代码中的任何地方触发错误，然后收到有关该错误的电子邮件通知（和日志记录，以及我需要在处理程序中实现的任何其他内容） - 我在 PHP 中使用了这种模式。

也许我不太了解python的概念（因为我是python的新手）。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:44:49.473

不确切知道 PHP 中的错误处理程序是什么，我将从 python 的角度来看这个

在 python 中，我们有例外，它们的名字叫例外。当出现问题或者我们期待其他事情或者我们只是想失败时，我们会抛出异常。可以在任何时候抛出异常，然后例如稍后捕获

```
a = 'int'
b = int(a) 
```

将抛出异常，因为您无法将 'int' 转换为 int，因此现在使用异常处理来执行此操作

```
try:
    b = int("int")
except ValueError:
    print "can't do that" 
```

现在你注意到我们吞下了异常并继续执行程序，这并不总是最好的主意，有时我们可能想引发我们自己的异常并崩溃

```
class NotADecimalNumber(Exception): pass
try:
    b = int("a")
except ValueError:
    raise NotADecimalNumber("'a' is not a decimal number idiot.") 
```

现在我们通过自定义消息获得自定义异常

# javascript - 让简单的 Javascript / jQuery 工作（Ariel Flesler 的 ScrollTo）

> ID：10635904
> 
> 赞同：0
> 
> 时间：2012-05-17T12:39:28.290
> 
> 标签：javascript, jquery

**更新：杰出的先生。tpaksu 解决了我的问题，您可以看到水平 ScrollTo 正在运行@** [www.visioville.fi /en/](http://www.visioville.fi/en/)

我有时间摆弄 CSS，但我得出的结论是，如果没有 Javascript / jQuery，这几乎是我唯一无法完成的事情。

我一直在尝试实现[Ariel Flesler 建议的 Goro 的 jQuery.ScrollTo](http://demos.flesler.com/jquery/scrollTo/)，但我似乎无法让它以任何方式工作。再加上我是 Javascript 的新手，你会明白我的意思。我下载了最新的 jQuery 并将其命名为“jquery.js”

这是一些来源：

```
<head>
<script type='text/javascript' src='../js/jquery.scrollTo-1.4.2-min.js'></script>
<script type='text/javascript' src='../js/jquery.js'></script>
</head>
...
<div>
    <p id="gallerytext">...</p>
    <a title="$(div.smallpics).scrollTo( '0%', 800, {axis:'x'} );" id="previmg" href="#image1"></a>
        <div id="smallwindow">
            <div class="smallpics">
                <ul>
                <li><a href="#image1"><img alt="Jerseys" src="../images/peliasuja.jpg" /></a></li>
                ...
                <li><a href="#image14"><img alt="Drawing" src="../images/kynailya.jpg" /></a></li>
               </ul>
           </div>
        </div>
    <a title="$(div.smallpics).scrollTo( '50%', 800, {axis:'x'} );" id="nextimg" href="#image8"></a>
</div> 
```

然后是 CSS：

```
#smallwindow    { float:left; overflow/*-y*/: hidden; width:890px; } /* overflow-y whips out the vertical scrollbar */

div.smallpics   { float:left; position:relative;  width:1595px; }

#previmg, #nextimg { float: left; width: 17px; height: 54px; background: white; overflow: hidden; background: url("images/galleryarrows_17x54.jpg"); }
#previmg        { background-position: left top; margin-right: 1px; left top; }
#nextimg        { background-position: right top; position: absolute; float: right; left: 935px; margin-left: 1px; margin-right: 1px; }
#previmg:hover  { background-position: left bottom; }
#nextimg:hover  { background-position: right bottom; }

.smallpics ul   { list-style: none; padding: 0; margin: 0; }

.smallpics li   { float: left; text-align: center;  margin-right: 1px; margin-bottom: 1px; white-space: nowrap; } 
```

Goro 提到将 click() 事件绑定到我的箭头按钮，但我不知道我应该输入什么“功能”或将代码放在哪里。我猜在 .scrollTo 事件之前，假设甚至需要 click() 。

先感谢您！在编程和编码方面，你们绝对是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:44:15.333

首先，您需要在 jquery 脚本之后包含您的 scrollto 脚本。

```
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery.scrollTo-1.4.2-min.js"></script> 
```

然后，你需要这样的东西：

```
$("#nextimg").on("click",function(){
    $("#smallwindow").scrollTo( '50%', 800, {axis:'x'} ); 
}); 
```

click 事件中的函数应该改变。但是一旦你得到这个工作，其余的将很容易弄清楚。

# asp.net-mvc - 在 mini-profiler 调用 Find: Index 步骤期间，MVC3 到底在做什么？

> ID：10635908
> 
> 赞同：2
> 
> 时间：2012-05-17T12:40:02.407
> 
> 标签：asp.net-mvc, mvc-mini-profiler

开箱即用，添加到 MVC3 站点的 mini-profiler 报告了一个名为 Find: Index 的步骤，其中 Index 是控制器调用 View() 时设置的 viewName 参数。第一次点击视图时，此步骤很容易占用一秒钟，然后对于所有后续调用都可以忽略不计。

这里发生了什么？我认为 mini-profiler 错误地选择或采用此步骤的名称是有罪的，因为它肯定不会花一秒钟时间找到任何东西，当然指定视图的完整文件路径和名称没有任何区别，所以它不是在这个意义上找到。将 MvcBuildViews 设置为 true 也无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T13:08:50.433

我在这里写了一篇博客：http: [//samsaffron.com/archive/2011/08/16/Oh+view+where+are+thou+finding+views+in+ASPNET+MVC3+](http://samsaffron.com/archive/2011/08/16/Oh+view+where+are+thou+finding+views+in+ASPNET+MVC3+)

“查找”步骤将包括第一次运行期间的“查看编译阶段”。在随后的运行中，它的速度快如闪电（除非您遇到了非常糟糕的事情）。另请注意，在非调试中运行时它甚至更快。

您可以通过预编译视图来避免这种影响，由于它引入的复杂性，我不建议这样做。

# android - 无法查看 XML 文件的图形布局

> ID：10635909
> 
> 赞同：2
> 
> 时间：2012-05-17T12:40:05.893
> 
> 标签：android

在使用带有 Eclipse ADT 插件的 Android 片段运行程序时，我遇到了问题。

当我尝试查看布局 xml 文件的图形布局时，它显示“项目目标（Android 4.0.3）未正确加载。”

有人可以帮我解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:19:56.213

另一种可能性是权限。

如果您将 SDK 安装到“Program Files”文件夹，您可能需要以管理员身份运行 Eclipse，以便您可以对 SDK 目录具有写访问权。（或者您可以移动 SDK）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:00:50.633

以下是一些假设：

*   确保 Windows->Preferences->Android 中的“SDK Location”设置正确。
*   在“Android SDK Manager”中：检查您是否安装了Android SDK 4.0.3。

如果它不起作用，请尝试更改项目构建目标：

打开项目的“属性”。（选择包资源管理器中的项目时 Alt+Enter。）导航到“Android”并选择另一个 Android SDK。

但是，您应该检查是否需要使用 4.0.3。

在编码时，您应该尝试选择尽可能小的构建目标，以防止自己使用不受支持的方法和类。但是建议选择最新的进行编译，因为在较新的 SDK 版本中可能会对旧方法进行一些优化。您可以使用位于 Android SDK 文件夹中的支持包的预蜂窝片段：/extras/android/support/v4/android-support-v4.jar

# ruby - 检查字符串是否以Ruby中的X字母开头

> ID：10635910
> 
> 赞同：6
> 
> 时间：2012-05-17T12:40:06.447
> 
> 标签：ruby

如何检查字符串是否以 Ruby 中的给定字母开头？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-17T12:43:08.683

你可以使用[`String#start_with?`](http://apidock.com/ruby/v1_9_3_125/String/start_with%3F)方法

```
'String'.start_with? 'S'
 => true 
```

您还可以列出开始的可能变体

```
'String'.start_with? 'E', 'S'
 => true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:57:59.347

你可以使用正则表达式

```
str.match /^X/ 
```

# php - 如何获取文本中的所有链接（URL）？

> ID：10635912
> 
> 赞同：1
> 
> 时间：2012-05-17T12:40:08.093
> 
> 标签：php, javascript, ajax

这是我找不到解决方案的情况。我用这个：

```
// creating ajax object
// ====================

function createRequestObject(){
try { return new XMLHttpRequest() }
catch(e)
{
try { return new ActiveXObject('Msxml2.XMLHTTP') }
catch(e)
{
try { return new ActiveXObject('Microsoft.XMLHTTP') }
catch(e) { return null; }
}
}
} 
```

这是为了使用 Ajax。因此，我使用 Ajax (http.responseText) 从 PHP 文件中获取文本。现在我需要找到文本中的所有 URL 链接，并将另一个 Ajax 请求发送到另一个 PHP 文件，该文件使用 cURL 读取标头检查链接的可用性。如果服务器响应为 200，则返回 HTML 链接，如果其他服务器响应或错误，则返回简单文本链接。

谁能帮助如何解决这个问题？

我想 JavaScript 可以这样工作：

1.  var PHPreturn = http.responseText。
2.  打开 for() 循环以检查所有用退格键分隔的单词并检查所有单词是否有链接。如果链接套件适用于 URL 正则表达式，则添加一个新函数，该函数将向另一个 PHP 文件发送新的 Ajax 查询以检查链接，例如：

//打开循环，所有单词都用退格键分隔

```
for(...){ 
```

// 如果一个词是一个带有 http:// 的链接

```
if(regular_express == http://){ 
```

// 用加载条替换 word[i]，而 ajax 从 PHP 文件返回响应

```
word[i].replace(word[i],'<span id="url_id"><img src="loading.gif"></span>'); 
```

// 发送 Ajax 查询并等待 PHP 文件返回

// checkURL("带有 GET url 变量的 PHP 文件","SPAN ID");

```
checkURL("http_response.php?url="+url,"span_id");

function checkURL(url,place){
var http = createRequestObject();
if(http){
http.open("GET", url);
http.onreadystatechange = function (){
if(http.readyState == 4){
document.getElementById(place).innerHTML = http.responseText;
}
}
http.send(null);
} else {
document.location = url;
}
} 
```

我不知道所有这些 JavaScript 应该是怎样的。将不胜感激任何帮助。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:47:16.027

尝试使用 responseXML；

```
xmlDoc=xmlhttp.responseXML;
txt="";
x=xmlDoc.getElementsByTagName("img");
for (i=0;i<x.length;i++)
{
  // your code here.
} 
```

# macos - 有没有办法限制或优先考虑 OpenCL 应用程序可以使用多少处理能力？

> ID：10635915
> 
> 赞同：2
> 
> 时间：2012-05-17T12:40:38.930
> 
> 标签：macos, opencl, gpu

首先，我什至不是 OpenCL 新手——我知道它是什么，但我连一行代码都没有写。但是，我在一个非常简单的开源项目上浏览了一些 OpenCL，并且理解代码的结构似乎很容易，因为它非常类似于 C，而且我是 C/Obj-C 开发人员。

提到的开源项目有一个问题。它想在你的 OS X 机器上以完全 GPU 优先级运行。这意味着当我运行该应用程序时，我的 Mac 仍然可以正常工作，但处于非常降级的状态。

有什么方法可以轻松修改应用程序并设置一些标志来降低该应用程序的 GPU 优先级？

我可能不知道 OpenCL API，但如果我可以在应用程序初始化函数中放置一两个简单的函数调用，我可能会自己解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:48:53.753

调用[clEnqueueNDRangeKernel](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueNDRangeKernel.html)可能是该应用程序中用于在 GPU 设备上启动 OpenCL 内核的调用。您可以尝试调整传递给此方法的 work_dim、global_work_size 和 local_work_size 的值，看看响应性是否有所提高。请注意，如果编写内核的人指定或假定了这些大小，内核可能会停止运行。在这种情况下，您将需要编辑内核来实现这一点。

您可以使用[OpenGL 扩展查看器](http://www.realtech-vr.com/glview/)检查硬件设置中每个参数的允许值范围。

# c# - 比较两个哈希集？

> ID：10635923
> 
> 赞同：6
> 
> 时间：2012-05-17T12:41:01.860
> 
> 标签：c#

我有两个这样的哈希集：

```
HashSet<string> log1 = new HashSet<string>(File.ReadLines("log1.txt"));
HashSet<string> log2 = searcher(term); 
```

我将如何比较两者？

我想确保它`log2`不包含任何来自`log1`. 换句话说，我想删除所有（如果有的话），`log1`里面有`log2`.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T12:44:40.107

要从中删除所有项目`log2`，`log1`您可以使用[HashSet<T>.ExceptWith 方法](http://msdn.microsoft.com/en-us/library/bb299875.aspx)：

```
log2.ExceptWith(log1); 
```

或者，您可以创建一个新的[HashSet<T>而无需使用](http://msdn.microsoft.com/en-us/library/bb301504)[Enumerable.Except 扩展方法](http://msdn.microsoft.com/en-us/library/bb300779.aspx)修改两个原始集：

```
HashSet<string> log3 = new HashSet<string>(log2.Except(log1)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T12:44:30.347

使用 LINQ：

```
log1.Intersect(log2).Any() 
```

请参阅MSDN 上的[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)和。[`Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:44:41.987

你见过这个`ExceptWith`功能吗？

> 从当前 HashSet 对象中移除指定集合中的所有元素。

# android - Android：在有限的时间内激活短信接收器

> ID：10635924
> 
> 赞同：0
> 
> 时间：2012-05-17T12:41:07.697
> 
> 标签：android, broadcastreceiver

我想知道是否可以激活 BroadcastRecievers onRecieve 方法以在按下按钮后仅在有限时间内激活接收短信？

我不希望它一直处于活动状态，并与我的消息传递应用程序发生冲突。

我创建了一个类“公共类 SmsReciever 扩展了 BroadcastReceiver”并在清单中定义了接收者：

```
 <receiver android:name="SmsReciever" >
        <intent-filter  >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:47:16.510

如果要临时激活 BroadcastReceiver，则不应在清单中定义接收器。您应该在代码中[注册接收器：](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)

```
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction("android.provider.Telephony.SMS_RECEIVED"); // I don't know where in the Android SDK this string defined

BroadcastReceiver receiver = new SmsReciever();
registerReceiver(receiver, intentFilter); 
```

并在不再需要时[取消注册接收器：](http://developer.android.com/reference/android/content/Context.html#unregisterReceiver%28android.content.BroadcastReceiver%29)

```
unregisterReceiver(receiver); 
```

# ios - MPMoviePlayer setCurrentPlaybackTime iOS

> ID：10635926
> 
> 赞同：3
> 
> 时间：2012-05-17T12:41:09.877
> 
> 标签：ios, objective-c, audio, mpmovieplayercontroller, playback

我使用**MPMoviePlayer**播放我的视频，我遇到的问题是当用户按下设备的***主页***按钮时，我保存了视频的当前位置，而不是当他再次午餐应用程序时我希望他从他离开的地方开始，所以我使用**setCurrentPlaybackTime**函数，它在***iOS 5***中完美运行，但在视频从头开始的***iOS 5.1***中却不行。

有没有机构可以解决此类问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T12:21:01.970

我的问题已经解决了，我将解释我到目前为止所做的事情。

当我找不到该行为的解决方案/解释时（我觉得很奇怪），我开始大量记录日志，所以我注意到当我记录当前位置时，我总是得到（在 iOS 5.1 中）

```
 currentPlaybackTime = nan 
```

但在 iOS 5 中，我得到了一个正常值为 0.00000

所以我做了一个计时器（它会重复自己）来记录每次当前**时间**，所以我注意到它在一段时间后从**nan**变为**0.00000**

我得出的结论是，在设置 PlaybackTime 之前，我需要稍等片刻（不明白为什么），因此，在等待 1**毫秒**（1/1000**秒**）之后，它就可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:24:55.130

您是否尝试使用 seekToTime（仅限 AvPlayer）而不是 setCurrentPlaybackTime？

正如这里所建议的：
[为什么 MPMoviePlayerController setCurrentPlaybackTime 去错了时间？](https://stackoverflow.com/questions/7364147/why-does-mpmovieplayercontroller-setcurrentplaybacktime-goes-to-the-wrong-time)

注意：此解决方案适用于 AvPlayer 而不是 MPMoviePlayer（即使很难在列出的链接中指出）。但在切换到 AvPlayer 之前，我会等待其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T11:00:39.883

我们应该在收到 MPMoviePlayerLoadStateDidChangeNotification 通知后设置 currentPlaybackTime。

要知道moviePLayer是否加载，首先需要注册MPMoviePlayerLoadStateDidChangeNotification

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieLoadStateDidChange:) name:MPMoviePlayerLoadStateDidChangeNotification object:nil]; 
```

一旦电影播放器​​被加载，movieLoadStateDidChange: 将被调用，然后检查 MPMovieLoadStatePlaythroughOK 加载状态并设置 currentPlaybackTime。

```
- (void)movieLoadStateDidChange:(NSNotification *)notification
{
    MPMoviePlayerController *player = notification.object;
    MPMovieLoadState loadState = player.loadState;

    /* Enough data has been buffered for playback to continue uninterrupted. */
    if (loadState & MPMovieLoadStatePlaythroughOK)
    {
        //should be called only once , so using self.videoLoaded - only for  first time  movie loaded , if required. This function wil be called multiple times after stalled
        if(!self.videoLoaded)
        {
            self.moviePlayerController.currentPlaybackTime = self.currentPlaybackTime;
            self.videoLoaded = YES;
        }
    }
} 
```

# objective-c - iOS 4 上 UILabel 的后备字体？

> ID：10635927
> 
> 赞同：2
> 
> 时间：2012-05-17T12:41:12.030
> 
> 标签：objective-c, ios4, uilabel

我正在使用 UILabel，通过 Interface Builder 放置在 xib 中。字体设置为 Bodoni，我知道它仅适用于 iOS 5 设备。当我在 iOS 4 模拟器中运行它时，UILabel 不显示任何内容，而不是以“系统”默认字体显示。奇怪的是，UITextViews 上不会出现这个问题。

现在的问题是：有没有办法在不通过代码放置标签的情况下为 UILabels 指定后备字体？也许作为一个全球定义或什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:42:23.020

供将来参考：这个插件/控件似乎是我的问题的答案：

[https://github.com/0xced/FontReplacer](https://github.com/0xced/FontReplacer)

# makefile - makefile 中的错误目标

> ID：10635931
> 
> 赞同：1
> 
> 时间：2012-05-17T12:41:27.450
> 
> 标签：makefile

这是我的生成文件：

```
.SILENT:
latexargs = -output-directory=temp -interaction=batchmode -file-line-error-style
thesis: mktemp
    latex $(latexargs) thesis || make errors
    bibtex -terse temp/A || make errors
    bibtex -terse temp/B || make errors
    latex $(latexargs) thesis || make errors
    pdflatex $(latexargs) thesis || make errors
    cat temp/thesis.pdf > thesis.pdf

diff: mktemp
    latex $(latexargs) thesis-diff || make errors
    bibtex temp/A || make errors
    bibtex temp/B || make errors
    latex $(latexargs) thesis-diff || make errors
    pdflatex $(latexargs) thesis-diff || make errors
    rm thesis-diff.tex

clean:
    test -e temp
    rm -f temp/*

mktemp:
    mkdir -p temp

errors:
    grep  ":[^:]*:" temp/thesis.log
    false 
```

如果命令以非零代码退出，是否没有更好的方法来运行某些东西？

我查看了[手册](http://www.gnu.org/software/make/manual/make.html)，但找不到任何用于此目的的特殊目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:01:41.660

我不知道有什么方法可以设置一个标志，以便食谱中的任何和所有错误都会触发某个动作，但这比你所拥有的要干净一点：

```
reportError = (grep  ":[^:]*:" temp/thesis.log && false)

thesis: mktemp
    latex $(latexargs) thesis || $(reportError)
    bibtex -terse temp/A || $(reportError)
    ... 
```

# php - google contact api with php - 无法设置

> ID：10635932
> 
> 赞同：2
> 
> 时间：2012-05-17T12:41:27.543
> 
> 标签：php, google-api, google-contacts-api

我只是无法让它工作。我正在使用 google php 库中示例中的 simple.php。这是页面：

```
require_once '../../src/apiClient.php';
session_start();

$client = new apiClient();
$client->setApplicationName('Google Contacts PHP Sample');
$client->setScopes("http://www.google.com/m8/feeds/");
// Documentation: http://code.google.com/apis/gdata/docs/2.0/basics.html
// Visit https://code.google.com/apis/console?api=contacts to generate your
// oauth2_client_id, oauth2_client_secret, and register your oauth2_redirect_uri.
// $client->setClientId('insert_your_oauth2_client_id');
// $client->setClientSecret('insert_your_oauth2_client_secret');
// $client->setRedirectUri('insert_your_redirect_uri');
// $client->setDeveloperKey('insert_your_developer_key');

$client->setClientId('xxxxxxxxxxx.apps.googleusercontent.com');
$client->setClientSecret('xxxxxxxxxxxxxx');
$client->setRedirectUri('https://www.xxxxxxxxxxxxxxx.com/oauth2callback');
$client->setDeveloperKey('xxxxxxxxxxxxxxxxx');

if (isset($_GET['code'])) {
  $client->authenticate();
  $_SESSION['token'] = $client->getAccessToken();
  $redirect = 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF'];
  header('Location: ' . filter_var($redirect, FILTER_SANITIZE_URL));
}

if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

if (isset($_REQUEST['logout'])) {
  unset($_SESSION['token']);
  $client->revokeToken();
}

if ($client->getAccessToken()) {
  $req = new apiHttpRequest("https://www.google.com/m8/feeds/contacts/default/full");
  $val = $client->getIo()->authenticatedRequest($req);

  // The contacts api only returns XML responses.
  $response = json_encode(simplexml_load_string($val->getResponseBody()));
  print "<pre>" . print_r(json_decode($response, true), true) . "</pre>";

  // The access token may have been updated lazily.
  $_SESSION['token'] = $client->getAccessToken();
} else {
  $auth = $client->createAuthUrl();
}

if (isset($auth)) {
    print "<a class=login href='$auth'>Connect Me!</a>";
  } else {
    print "<a class=logout href='?logout'>Logout</a>";
} 
```

在页面中我收到注销消息，并且我从获取中收到错误。我在 apache 错误日志中看到：

```
PHP Warning:  simplexml_load_string(): <ins>That&#39;s all we know.</ins></p></body></html> in /www/xxxxxxxxxxxxxxx.com/docs/oauth2callback/google-api-php-client/examples/contacts/index.php on line 58 
```

我正在尝试几个小时才能得到它。第一次在javascript中尝试，不能。现在尝试php。

更新：最后我发现这个链接非常有效：http: [//25labs.com/import-gmail-or-google-contacts-using-google-contacts-data-api-3-0-and-oauth-2 -0-in-php/](http://25labs.com/import-gmail-or-google-contacts-using-google-contacts-data-api-3-0-and-oauth-2-0-in-php/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:32:34.590

改变

```
$response = json_encode(simplexml_load_string($val->getResponseBody()));
print "<pre>" . print_r(json_decode($response, true), true) . "</pre>"; 
```

至

```
$response = $val->getResponseBody();
print "<pre>" . print_r($response) . "</pre>"; 
```

这将打印出联系人的第一页，但我似乎无法获得更多页面

# html - 我希望页面顶部的“facebook like”div位于右侧，但它不允许我

> ID：10635936
> 
> 赞同：0
> 
> 时间：2012-05-17T12:41:42.563
> 
> 标签：html, css

在我的网站上，我希望 travelescape “like facebook” 框穿过页面的右侧，但是当我添加边距时，它会重叠在某些东西上。我也尝试过`position:absolute`在 css 中做 z-index，但它没有用。你们对如何做到这一点有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:54:22.890

From the `<iframe>` remove `position:absolute` and `margin-left` and give it a `float:right`.

That solves it for me in Firebug.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:56:40.967

```
<table width="" align="right" width="50%" class="connect_widget_interactive_area"><tbody> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:50:41.263

您最好为它单独制作一个，然后在其中添加您的 facebook div。如果您现在查看我的网站，它也发生在我身上，现在我将它定位在我的链接下。顺便说一下，您不是唯一一个对此有问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:20:42.870

您是否尝试过减小 .name_block 的宽度，然后是包含喜欢按钮的以下 div，以及给 float:left ！

那应该工作！

```
 <div class="connect_action">
<div class="name_block">
<div> 
```

# objective-c - NSArray removeLastObject 没有声明？

> ID：10635937
> 
> 赞同：0
> 
> 时间：2012-05-17T12:41:44.640
> 
> 标签：objective-c, cocoa, nsarray

我在这里有非常简单的代码：

```
NSArray* divisions = [[NSString stringWithFormat: @"%d", system("ssh git@nebula \"ls\"")] 
    componentsSeparatedByString: @"\n"];
[divisions removeLastObject]; 
```

我得到：

```
No visible @interface for 'NSArray' declares the selector 'removeLastObject' 
```

抱歉，如果这是一个非常愚蠢的问题，但这就是我在 Objective-C 中的身份。我的猜测是我弄乱了指针，我仍然不确定它们是如何工作的以及如何使用它们。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T12:44:12.120

您不能从不可变的 NSArray 实例中添加或删除类似的对象。您必须使用 NSMutableArray。

```
NSMutableArray *mutableDivisions = [NSMutableArray arrayWithArray:divisions];
[mutableDivisions removeLastObject]; 
```

# ios - iPad的UITableViewCell“OnClick”方法

> ID：10635940
> 
> 赞同：1
> 
> 时间：2012-05-17T12:42:00.717
> 
> 标签：ios, xcode, ipad, uitableview

我很清楚 UITableViewCell 没有名为“OnClick”的文字方法，但我需要一些类似的方法。我有一个表格，并且正在使用 .pdf 文件的文件名填充表格，因此我需要将其设置在用户单击该行的位置，它将打开 .pdf。我可以自己处理的开头部分，但我似乎无法让它响应被选中。我以为我找到了几行可以工作的代码，但它只是没有响应，所以也许我只是把它放在错误的位置。任何帮助，将不胜感激。我正在使用基于标准视图的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:50:01.460

您是否只需要知道何时有人在您的表格中选择了一行？不是单元格中的单个项目？

如果是这样，那么 UITableViews 有一个委托方法`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`。在您的 tableView 的委托中实现它，每次有人选择一行时都会调用它。

# .net - DbDataConttoller UpdateEntity 抛出异常

> ID：10635943
> 
> 赞同：1
> 
> 时间：2012-05-17T12:42:20.663
> 
> 标签：.net, entity-framework-4.1, asp.net-mvc-4

我正在尝试使用 VS 2011 Beta 和 EF，但在使用 UpdateEntity 时遇到问题，但 InsertEntity 和 DeleteEntity 工作正常。

问题是，当我调用 UpdateEntity 时，我得到一个“对象引用未设置为对象的实例”异常。

我项目中的所有模型似乎都发生了这种情况。

为了尝试隔离问题，我创建了一个非常简单的具有基本属性的 DTO 类，但是当我尝试在该对象上调用 UpdateEntity 时出现相同的错误。这是我的代码：

测试 DTO：

```
 [Table("Test")]
public class Test
{
    [Key, Column]
    public int Id { get; set; }

    [Column]
    public string TestMember { get; set; }
} 
```

我有一个具有以下方法的 DbDataController：

```
 public void InsertTest(Test entity)
    {
        InsertEntity(entity);
    }

    public void UpdateTest(Test entity)
    {
        UpdateEntity(entity);
    }

    public void DeleteTest(Test entity)
    {
        DeleteEntity(entity);
    } 
```

最后，我在 DbContext 类中定义了这个 Test 对象：

```
public DbSet<Test> Test { get; set; } 
```

当然，我的数据库中有一个名为 Test 的表，这是该表的创建脚本：

```
 CREATE TABLE [dbo].[Test](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [TestMember] [nvarchar](50) COLLATE Icelandic_CI_AS NOT NULL,
 CONSTRAINT [PK_Test] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] 
```

我可以成功地将新的测试对象插入数据库：

```
 using (DataController dataSource = new DataController())
        {
            Test test = new Test();
            test.Id = 1;
            test.TestMember = "test2";
            dataSource.InsertTest(test);
            dataSource.SaveChanges();
        } 
```

然后我可以轻松地从数据库中删除它：

```
 using (DataController dataSource = new DataController())
        {
            Test test = new Test();
            test.Id = 1;
            test.TestMember = "test2";
            dataSource.DeleteTest(test);
            dataSource.SaveChanges();
        } 
```

但如果我尝试这样做：

```
 using (DataController dataSource = new DataController())
        {
            Test test = new Test();
            test.Id = 1;
            test.TestMember = "UpdatedTest";
            dataSource.UpdateTest(test);
            dataSource.SaveChanges();
        } 
```

我得到一个“对象引用未设置为对象的实例”。此处这一行的异常：

**更新实体（实体）；**

在 DataController 的 UpdateTest 方法中。

没有 InnerException 并且堆栈跟踪并不完全有帮助：

> 在 System.Web.Http.Data.EntityFramework.DbDataController `1.UpdateEntity(Object entity) at Hot.Web.Controllers.DataController.UpdateTest(Test entity) in c:\......\DataController.cs:line 48 at Hot.Web.Controllers.UserManagementController.EditProfile() in c:\.......\UserManagementController.cs:line 223 at lambda_method(Closure , ControllerBase , Object[] ) at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 个参数）在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<> *c_DisplayClass42.b* _41() 在 System.Web.Mvc.Async.AsyncResultWrapper.<> *c_DisplayClass8 `1.<BeginSynchronous>b__7(IAsyncResult _) at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End() 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult) 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c* _DisplayClass37.<> *c_DisplayClass39.b* _33() 在 System.Web .Mvc.Async.AsyncControllerActionInvoker.<>c_ *DisplayClass4f.b* _49()

有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T22:49:07.820

您需要查询实体，然后使用 dbcontroller 更新检索到的实体

```
using (DataController dataSource = new DataController()) {
        Test test = dataSource.getById(1); //Use whatever query method you need to here
        test.TestMember = "UpdatedTest";
        dataSource.UpdateTest(test);
        dataSource.SaveChanges();
    } 
```

# opengl - OpenGL 的 LookAt 函数中的 UP 向量到底是什么？

> ID：10635947
> 
> 赞同：23
> 
> 时间：2012-05-17T12:42:36.790
> 
> 标签：opengl, glulookat

这与[LookAt 目标位置无关，如果它是 z = 0 或 z = 1000 或 -1000？](https://stackoverflow.com/questions/10634099/the-lookat-target-location-doesnt-matter-if-it-is-z-0-or-z-1000-or-1000/10634710#10634710)

我试过

```
 gluLookAt(512, 384, 2000,
              512, 384, 0,
              0.0f, 1.0f, 0.0f); 
```

一切正常，现在我将第三行（UP 向量）的最后一个数字更改为`0.8`：

```
 gluLookAt(512, 384, 2000,
              512, 384, 0,
              0.0f, 1.0f, 0.8f); 
```

它完全一样......接下来我尝试并修改了第 3 行，第一个数字为`0.8`：

```
 gluLookAt(512, 384, 2000,
              512, 384, 0,
              0.8f, 1.0f, 0.8f); 
```

现在视图就像它向左旋转了 45 度。这个 UP 矢量如何工作？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-17T12:55:26.577

向上向量用于创建提供给 gluLookAt 的眼睛和中心向量之间的叉积。

从 iOS 上的 GLKit 标头中，您可以看到实现如下：

```
static __inline__ GLKMatrix4 GLKMatrix4MakeLookAt(float eyeX, float eyeY, float eyeZ, float centerX, float centerY, float centerZ, float upX, float upY, float upZ)
{
    GLKVector3 ev = { eyeX, eyeY, eyeZ };
    GLKVector3 cv = { centerX, centerY, centerZ };
    GLKVector3 uv = { upX, upY, upZ };
    GLKVector3 n = GLKVector3Normalize(GLKVector3Add(ev, GLKVector3Negate(cv)));
    GLKVector3 u = GLKVector3Normalize(GLKVector3CrossProduct(uv, n));
    GLKVector3 v = GLKVector3CrossProduct(n, u);

    GLKMatrix4 m = { u.v[0], v.v[0], n.v[0], 0.0f,
        u.v[1], v.v[1], n.v[1], 0.0f,
        u.v[2], v.v[2], n.v[2], 0.0f,
        GLKVector3DotProduct(GLKVector3Negate(u), ev),
        GLKVector3DotProduct(GLKVector3Negate(v), ev),
        GLKVector3DotProduct(GLKVector3Negate(n), ev),
        1.0f };

    return m;
} 
```

这个问题中接受的答案[如何正确使用 gluLookAt？](https://stackoverflow.com/questions/3380100/how-do-i-use-glulookat-properly)很好地描述了向上向量的实际影响。

> （gluLookAt 中“向上”向量背后的直觉很简单：看任何东西。现在将头倾斜 90 度。你在哪里没有改变，你正在看的方向没有改变，但是你的图像视网膜明显有。有什么区别？你的头顶指向的地方。那是向上的向量。）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-17T12:52:24.873

向上向量确定哪个方向是“向上”。把它想象成一台摄像机......如果你“正确”地握住摄像机，那么一条从摄像机中心向上延伸到摄像机顶部的假想线可以用向量 (0,1,0) 表示. 如果您将相机向右倾斜 45 度，则从相机中心到相机“顶部”的假想线现在将由一个新向量 (1,1,0) 表示。如果您将相机“向后”倾斜一点，您的“向上”矢量现在变为（1,1,1）[或（1,1,-1）......我总是得到z轴的极性反转]。

因此，简而言之，UP 向量通过说明相机方向中哪个点“向上”来描述相机的滚动。

希望有帮助。:)

（根据评论编辑以更正摘要）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T12:58:17.610

gluLookAt 的前两个参数是相机位置和相机目标。只有这两个，相机并没有完全受到限制。想象一下拿着相机站在某个地方。您可以水平握持相机拍摄风景照片，也可以垂直握持相机拍摄人像照片。在这两种情况下，相机的位置和图片主体的位置是相同的。您可以将相机旋转到任意角度，这两个值不会改变。第三个参数，向上向量，选择相机的方向。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T12:56:07.447

它的工作方式与它看起来的工作方式完全相同。

想象一下你在太空中的某个点。他们想象你正在从你的 -Z 方向直接看某个点 2000 个单位。

具有这些特征的可能的摄像机数量不计其数，但它们的不同仅在于具有不同的“向上”方向。因此，不同的“向上”方向对应于围绕观察方向具有不同的方向。

向上矢量是与您希望相机具有的“向上”方向对齐的矢量方向。也就是说，如果你要从你的相机点画出向上的向量，你会看到一条垂直的直线向上。

现在，回头看看你想象的视图，看看那条垂直线。你能分辨出那条垂直线是朝着你还是远离你？不; 它只是一条垂直线。*因此，向上向量是否部分*指向视图方向并不重要。重要的是向上方向并不*完全*指向视图方向。

当您给向上方向一个非零 Z 坐标时，它现在部分指向视图方向（即：Z 轴）。该部分最终与您获得的向上方向无关，因此被忽略。当你给向上的方向一个非零的*X*坐标时，它*不在*视图方向上，所以它很重要。

这样做的目的是，如果您更改视图观察点或相机原点，您也不必更改向上方向。只要您不直接沿着上轴看，就可以了。

# iphone - 我的 Iphone 应用程序的纵向和横向视图功能

> ID：10635956
> 
> 赞同：0
> 
> 时间：2012-05-17T12:43:17.970
> 
> 标签：iphone, objective-c, ios, xcode

我已经制作了一个在纵向模式下运行良好的 iphone 应用程序。现在我如何让它在横向模式下工作，它可以在改变方向时正常工作。我应该为每个组件使用框架还是为横向模式使用另一个视图...？请一些人帮助我摆脱这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:01:04.070

阿洛克，

这实际上必须根据您的要求完成，因为您可能在横向模式下也需要这样做。因此，将需要检查每个屏幕。从 setAutoresize 到 yes 简单开始，同样您需要调整帧大小/调整帧。

# matlab - 如何在 Matlab 中关闭轴名称？

> ID：10635970
> 
> 赞同：1
> 
> 时间：2012-05-17T12:44:12.527
> 
> 标签：matlab, graphics

我这里有个问题，请看一下链接 [自相关函数](http://www.flickr.com/photos/39792648@N05/7215123162/in/photostream) 垂直轴的名字互相重叠，我想把它们都关掉。我称之为“get（gca）”，但我没有找到这个选项。请有人帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:36:11.650

~~查看[坐标区属性](http://www.mathworks.com/help/techdoc/ref/axes_props.html)，您可以使用它进行更改`set()`。~~

 ~~```
 set(gca,'ylabel',''); 
```~~ 

~~编辑：嗯。自从旧版本的 MATLAB 以来，他们似乎已经改变了一些东西，并使 xlabel/ylabel/zlabel 属性成为一个对象，而不是一个简单的文本字符串。请参阅我链接到的轴属性页面；新语法是这样的：~~

 ~~```
set(get(gca, 'ylabel'),'String',''); 
```

或者您可以使用以下`ylabel()`功能：

```
ylabel(gca,''); 
```

如果不明显，您可以`gca`使用轴句柄替换任何实例，因此如果您有多个子图并且保留每个轴的句柄，则可以使用它，例如`h = plot(something, something_else); ylabel(h, '');`~~

# c - IOCP：没有字节复制的通知

> ID：10635976
> 
> 赞同：0
> 
> 时间：2012-05-17T12:44:34.233
> 
> 标签：c, winsock, iocp

我有 IOCP 应用程序，它为每个套接字上下文存储一个 64kb 缓冲区。它使用大量 RAM，同时处理数千个套接字。相反，我想切换到每个 iocp 线程上下文有一个 64kb 缓冲区的模型（就像我可以在 epoll 和 kqueue 中那样）。为此，我需要我的完成端口能够接收通知，而无需将字节复制到提供的 WSABUF，并且在通知之后只需调用异步 WSARecvFrom（不提供重叠结构，我使用 udp 进行测试），直到我收到 WSAEWOULDBLOCK。我已经读过，如果我为具有重叠结构的 WSARecvFrom 调用提供空的 WSABUF (buf = NULL, len =0)，则可以实现以下技术。但它不起作用：IOCP 永远不会“唤醒”，因为缓冲区太小。

还有其他方法可以使这种情况成为可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:58:45.837

这适用于 TCP，它是避免“锁定页面”限制的好方法，这在早期版本的 windows 中是一个大问题，但现在似乎不再是一个问题。它应该适合您的情况。

我有一组 IOCP 示例代码，可以[从这里下载](http://www.serverframework.com/products---the-free-framework.html)，它支持“零字节读取”和随后的异步读取（也就是说，一旦使用零字节缓冲区的读取完成，它只会发出与缓冲区重叠的读取），我的最新代码在零字节读取完成后支持同步和异步读取。

请注意，如果您正在处理 TCP，您提到您正在使用 UDP“进行测试”，那么您可以通过每个连接仅发出一个重叠读取来实现“单一缓冲区”。一旦读取完成，您就可以在使用相同的缓冲区发出新的重叠读取之前处理它......

如果您需要处理数千个并发连接，其中连接不经常发送数据，“零字节读取”仍然很有用，因为它将一次锁定的页面数量减少到最少。使用它来减少内存使用将要求您仅在“零字节读取”完成后为连接分配一个缓冲区。

# java - 在 Windows 上通过 Java 观察网络使用水平

> ID：10635977
> 
> 赞同：-1
> 
> 时间：2012-05-17T12:44:36.087
> 
> 标签：java, windows, networking

我目前正在寻找一种方法，如何从 Java 获取有关网络利用率的实时数据。我想看看几个正在运行的线程（所有从网上下载的东西）如何利用网络，如果不满足某些条件，同时能够设置产生新线程的阈值。假设我创建了 10 个线程，全部从 Web 下载一些东西，并且网络利用率为 5%，考虑之前将阈值设置为 10% 的最大利用率，我将被允许生成一个新线程。问题是，我不确定是否有办法获取此类网络信息。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:50:42.497

如果您使用的是 Linux，您应该能够从`/proc/net`. 例如`/proc/net/dev`：

```
Inter-|   Receive                                                |  Transmit
 face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed
    lo: 108751031  226504    0    0    0     0          0         0 108751031  226504    0    0    0     0       0          0
 wlan0: 113355689  146027    0    0    0     0          0         0 18453619  122751    0    0    0     0       0          0
  eth0:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0 
```

该文件几乎可以用任何编程语言（包括 Java）轻松阅读。

**注意：**问题现在已更改为明确引用 Windows。所以这不再是一个完全合适的答案。

# .net - 在 WCF 中创建 DTO 对象的反射

> ID：10635981
> 
> 赞同：1
> 
> 时间：2012-05-17T12:44:47.127
> 
> 标签：.net, performance, entity-framework, reflection, dto

我想知道是否可以从 WCF 服务中的反射和 DTO 对象的其他体验中找出性能差异。我有下面的代码，用于使用 Linq 从 Entity 对象创建 DTO 对象。

```
 using (dashEntities context = new dashEntities())
        {
            result = context.GetAlerts().Select(m => new AlertItemDTO()
            {

            }).ToList(); 
```

另一位程序员在构建 WCF 服务时编写了一个通用方法，使用反射进行相同的转换：

```
private object TransferEntityToDTO(object dto, object entity)
    {
        Type entityType = entity.GetType();

        // Use reflection to get all properties
        foreach (PropertyInfo propertyInfo in entityType.GetProperties())
        {

            if (propertyInfo.CanRead)
            {

                List<PropertyInfo> dtoProperties = dto.GetType().GetProperties().ToList();

                foreach (PropertyInfo dtoProperty in dtoProperties)
                {

                    if (dtoProperty.Name == propertyInfo.Name)
                    {   

                        object value = propertyInfo.GetValue(entity, null);

                        if (value != null && value.ToString() != "" && value.ToString() != "1/1/0001 12:00:00 AM")
                        {
                            // This section gets the type of of the property and casts
                            // to it during runtime then sets it to the corresponding 
                            // dto value:

                            // Get current class type
                            Type currentClassType = this.GetType();

                            //Get type of property in entity object
                            Type propertyType = Type.GetType(propertyInfo.PropertyType.FullName);

                            // Get the Cast<T> method and define the type
                            MethodInfo castMethod = currentClassType.GetMethod("Cast").MakeGenericMethod(propertyType);

                            // Invoke the method giving value its true type
                            object castedObject = castMethod.Invoke(null, new object[] { value });

                            dtoProperty.SetValue(dto, value, null);

                        }
                        break;
                    }

                }

            }

        }

        return dto;
    }

    /// <summary>
    /// Used in TransferEntityToDTO to dynamically cast objects to
    /// their correct types.
    /// </summary>
    /// <typeparam name="T">Type to cast object to</typeparam>
    /// <param name="o">Object to be casted</param>
    /// <returns>Object casted to correct type</returns>
    public static T Cast<T>(object o)
    {
        return (T)o;
    } 
```

显然，第二种技术更难阅读，也更冗长，但它更通用，可以用于多种服务。

我的问题是，使其通用化的能力是否超过了使用反射对性能的影响，如果不是，为什么？我发现了很多令人困惑的文章和答案，说明是什么让反射变得昂贵。我假设部分原因是因为它需要在不知道的情况下寻找它需要的对象，有点像当你知道你会得到的异常时对所有事情使用通用异常。

有人可以帮我解释一下吗。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:07:53.427

如果您查看一些流行的开源映射库，如 AutoMapper、EmitMapper 或 ValueInjecter，您会发现它们不再使用反射方法，而是使用[编译表达式树和 IL 生成等东西来加速事情起来](http://lostechies.com/jimmybogard/2009/08/05/analyzing-automapper-performance/)。

显然，这使得它们在内部比基于反射的基本映射器更复杂（它们仍然非常易于使用），但像往常一样，优化速度会增加复杂性。

我的意见是，您应该使用其中一个（优秀的）开源库，其中作者已经花费了大量时间来考虑与您一样的许多问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T08:49:40.047

这两种解决方案的主要区别在于第一种使用投影，第二种映射原始实体。对于仅是原始实体的一小部分的实体（例如列表的 dtos），只查询投影属性而不是完整实体（可能使用嵌套实体和您不需要的属性...）应该总是更快，然后映射到 dto。

要结合两种解决方案（投影+通用解决方案）的优点，您可以自动创建投影表达式，缓存它们并在*Select(Expression<...>)*调用中使用它们，就像在原始解决方案中一样。因此，所有映射只创建一次，您可以直接获取 dto，并且只查询必要的列。看看这篇文章和评论：[停止在你的数据访问代码中使用 AutoMapper](http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code)。

AutoMapper 也可以构建映射表达式，但它只会映射简单的属性（据我从源代码中理解）。使用自定义解决方案和一些“表达式魔术”，您还可以支持复杂的映射，然后通过实体框架将其转换为 sql：

```
ContactName = Contact.Name,
AddressStreetAndNumber = (Address.Street + (" " + Address.Number)).Trim() 
```

[github](https://gist.github.com/1119157)上的这段代码是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:11:49.887

也许一些轻量级的 ORM 会有所帮助。例如[Dapper](http://code.google.com/p/dapper-dot-net/)或[Petapoco](http://www.toptensoftware.com/petapoco/)。他们可以使用 IL (Emit) 将 SQL 查询的结果绑定到动态或静态对象

# .net - 当 -sDEVICE 是图像格式时，将多页打印到 %printer%？

> ID：10635982
> 
> 赞同：2
> 
> 时间：2012-05-17T12:44:47.653
> 
> 标签：.net, pdf, printing, ghostscript

我的问题可能是错误的树，所以我将尝试对问题进行详尽的描述。

我们有一个 Windows 服务，它接受一个 XML 文件并生成一个 PDF。然后它根据 XML 文件中的数据，使用参数将生成的 PDF 输出到 Ghostscript `-sOutputFile="%printer%"`，后跟我们的一台网络打印机的名称。

我们以前使用过`-sDEVICE=mswinpr2`，但是这会生成大小约为 70-80MB 的打印命令，当我们在本地网络上时，这并不是特别有用。现在我们有一个用于多个站点的中央打印服务器，考虑到这些荒谬的文件大小，这些 PDF 的打印时间已经成为天文数字。

这些文件是使用以下方法生成的：

```
 " -sDEVICE=mswinpr2 -sPAPERSIZE=a4" _
& " -dBATCH -dNOPAUSE -dSAFER -dNoCancel" _
& " -sOutputFile=""%printer%" & [somePrinter] & """" 
```

我一直在玩弄 Ghostscript 的设置，并认为我已经使用以下 Ghostscript 命令找到了 PNG 的答案：

```
 " -sDEVICE=png16m -r600x600 -sPAPERSIZE=a4" _
& " -dBATCH -dNOPAUSE -dSAFER -dNoCancel -dQUIET" _
& " -sOutputFile=""%printer%" & [somePrinter] & """" 
```

这适用于单页，单页文档仅生成大约 150kb 的数据，但在多页上，仅打印第一页。我通过输出到文件而不是打印机进行了一些测试，结果发现正在创建某种奇怪的多页 PNG，我认为打印机只是变得混乱。

**实际问题：**

我唯一*真正的*限制是我需要将 PDF 文件作为输入，然后直接输出到打印机，无需用户交互，而且文件大小很小。

有人可以向我推荐一个可以实现这一目标的 GhostScript 设置（或 GhostScript 的替代品）吗，因为我的想法已经不多了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T07:40:34.587

mswinpr2 设备使用 Windows 打印系统来完成处理大量不同打印机的工作。它的工作原理是将传入的文件渲染为位图，将位图传送到打印机设备上下文，然后告诉设备上下文打印到打印机。显然，高分辨率全彩页面可以产生相当大的位图。A4 页面@600 dpi，CMYK 颜色大约为 130Mb (8.26*600 * 11.69*600 * 4)

因此，您最终总是将位图发送到打印机。当然这可能很大，通常打印机会理解一些*可以*使输出更小的打印语言，但这需要 Ghostscript“了解”打印机并产生正确的输出。mswinpr2 的美妙之处在于它利用操作系统来完成繁重的工作。缺点是它总是生成位图，但至少它可以打印到任何 Windows 支持的打印机。

似乎您很幸运拥有您的第一台打印机，因为它理解 PNG，但大多数打印机不理解 PNG，正如您所发现的，并且会将传入数据视为本机打印机数据。这样做的效果可能是任何东西，但它不太可能产生任何有用的打印输出。

*如果*您知道给定的打印机支持 PCL 或 PostScript，那么您可以使用适当的 Ghostscript 设备将您的 PDF 文件转换为其中一种语言（PCL 文件可能仍然很大）。

请注意，包含透明度的 PDF 文件仍必须至少部分转换为位图，因为没有其他打印语言支持 PDF 的透明度概念。

我看到你自己发现了这一点。我建议您使用 ps2write 而不是 pswrite，它会产生运行速度更快的更小输出。pswrite 设备也已弃用且不再受支持。

您可能还应该设置适合您的打印机的分辨率。ps2write 有时会将页面区域渲染为位图（例如，用于 PDF 透明度），并使用分辨率参数来决定要创建的图像分辨率。默认值为 720 dpi，几乎可以在任何设备上打印。然而，它对于大多数设备来说太大了，并且在某些情况下会再次产生大的位图（开罗制作的 PDF 文件特别容易出现这个问题，因为它们声明每个页面的整个部分都是透明的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T07:27:19.377

我最终的解决方案是使用`-sDEVICE=pswrite`而不是`-sDEVICE=png16m -r600x600`.

[PostScript](http://en.wikipedia.org/wiki/PostScript)中的此输出，我们所有的打印机都能够解释。

因此，遗憾的是，这不是一个答案，但仍然是一个解决方案。

# jquery - jQuery Mobile 可折叠 div 太宽

> ID：10635985
> 
> 赞同：0
> 
> 时间：2012-05-17T12:44:52.267
> 
> 标签：jquery, html, jquery-mobile

当页面宽度减小时（即在移动设备上看到的），我遇到了 jQuery Mobile 可折叠 div 没有缩小任何变窄的问题。我有它，所以页面上的所有其他元素都可以适当地缩放（宽度），但是可折叠的 div 过度拉伸了它们的边界，我不能让它们更小（比页面宽度更宽）。

切断可折叠的标题标签是好的，我只是不知道如何。我觉得这可能更像是一个概念性问题，但我发布一些代码仅供参考：

```
<table id="DataTable" style="width:100%" cellpadding="0" cellspacing="0">
  <tr>
    <td>
      <div id="row" class="Collapsible" data-role="collapsible" data-theme="c" data-content-theme="c" style="margin:0">
        <h3>Example header label (Can be covered)</h3>
        <p>Contents of the div on expand</p>
      </div>
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:55:52.467

`.ui-btn-inner`我认为问题在于:的 css 定义`white-space: nowrap;`。尝试用以下方法覆盖它：

```
.ui-btn-inner {
    white-space: normal !important;
} 
```

另请参阅[此示例](http://jsfiddle.net/p8g7F/)。

=== 更新 ===

您可以添加以下 css 以将可折叠`div`（和`h3`）更改为内联元素：

```
.Collapsible, .Collapsible h3 {
    display: inline !important;
} 
```

另请参阅[我更新的示例](http://jsfiddle.net/p8g7F/2/)。

# flash - Soundcloud + SoundManager 错误：读取流的 eqData

> ID：10635986
> 
> 赞同：1
> 
> 时间：2012-05-17T12:44:52.607
> 
> 标签：flash, soundcloud, soundmanager2

（这主要针对 Soundcloud 员工，因为他们使用 Stackoverflow 提供支持）

我已经构建了一个应用程序，它使用 soundmanager2 从 soundcloud 流中读取 eqData：http: [//music.freefarm.co.uk/](http://music.freefarm.co.uk/)

eqdata 在开始轨道时工作正常，但在寻找或恢复暂停的流时，eqData 不再更新。数组要么用零更新，要么挂在前一帧的数据上。

该应用程序构建了将近 6 个月并且运行正常，所以我想假设它是 soundcloud api 的变化。可能是因为flash跨域权限的变化？

# emacs - Emacs org-agenda-list 破坏我的窗口拆分

> ID：10635989
> 
> 赞同：22
> 
> 时间：2012-05-17T12:45:11.597
> 
> 标签：emacs

感谢 freenode 上的#org-mode 组，我找到了答案

* * *

我的功能有问题`org-agenda-list`，`org-todo-list`它们破坏了我的窗口拆分并将 emacs 拆分为 2 个相等的窗口，有什么办法可以解决吗？或者在当前活动窗口中加载待办事项/议程的任何其他功能？我有winner-undo的解决方法（但这让我很生气）。

函数调用之前的 Emacs 窗口布局 ![函数调用前](../Images/accc6ae98fc77a1815604aecbbc061f1.png)

函数调用后的 Emacs ![在此处输入图像描述](../Images/e6d59ef59eb99a55e12d26e90b79a686.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-17T15:25:10.147

在您的 init.el 中设置 org-agenda-window-setup

```
(setq org-agenda-window-setup 'current-window) 
```

感谢 freenode 上#org-mode 的 quicksilver

键入`C-h v org-agenda-window-setup`其他选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-16T18:16:18.130

最简单的方法是使用默认的 Emacs 自定义：

```
M-x customize-group org-agenda-windows 
```

有几个选项，包括当前窗口。尝试一下，我认为其中一个会满足您的需求。

# java - 查询异常

> ID：10635991
> 
> 赞同：-1
> 
> 时间：2012-05-17T12:45:18.930
> 
> 标签：java, jdbc

执行以下选择查询时出现错误：

```
ResultSet rs = St.executeQuery("select * from login where username="+username+"and password ="+password); 
```

例外是

```
java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended. 
```

如果查询在语法上是错误的，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:56:14.983

Use at least parameters (named parameters are even better). Concatenating values into SQL string is error prone and unsafe. E.g.:

```
Statement stmt = null;
String query = "select * from login where username=? and password=?";
try {
        stmt = con.createStatement();
        stmt.setString(1, username);
        stmt.setString(2, password);
        ResultSet rs = stmt.executeQuery(query);
        while (rs.next()) {
           //...
        }
    } catch (SQLException e ) {
        //TODO handle e
    } finally {
        if (stmt != null) { stmt.close(); }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:50:19.100

用户名和密码的值应该用引号引起来

```
ResultSet rs = St.executeQuery("select * from login where username='" + username + "' and password ='" + password + "'"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:47:32.940

`and`您的用户名和关键字之间没有空格。这将解析为

> select * from login where username=usernameand password =password

您还缺少围绕要插入语句的值的单引号。尝试：

> ResultSet rs = St.executeQuery("select * from login where username = '" + username + "' and password = '" + password + "'");

我还建议阅读Java 教程中的[Using Prepared Statements](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:52:35.290

```
ResultSet rs = St.executeQuery("select * from login where username='"+username+"' and password ='"+password+"'"); 
```

执行查询的最佳方法将其取出并自行尝试...例如。

```
String query = "select * from login where username='"+username+"' and password = '"+password+"'";

//Print your query and execute it in your sql client you ll get to know if it works!
System.out.println(query);

ResultSet rs = St.executeQuery(query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T12:48:10.397

试试这个（你缺少几个空格和引号）：

```
ResultSet rs = 
  St.executeQuery(
    "select * from login where username=\""+username+"\" and password =\""+password + "\""); 
```

另请阅读有关JDBC和[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)[中的命名参数](https://stackoverflow.com/questions/2309970)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T12:48:30.533

值和密码前缺少单引号，我认为应该是：

```
ResultSet rs = St.executeQuery("select * from login where username='"+username+"' and password ='"+password+"'"); 
```

# c# - 找不到类型或命名空间“var”

> ID：10635995
> 
> 赞同：1
> 
> 时间：2012-05-17T12:45:43.827
> 
> 标签：c#

我正在处理一个内联页面以显示一些课程信息，并在使用“var”时不断出现编译错误。

您能否检查以下代码行并推荐修复它的想法。

```
//Get basic template details
using (var objConn = new SqlConnection(strConnection))
{
objConn.Open(); 
```

我导入的命名空间如下所示。

```
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="System.Net" %>
<%@ Import Namespace="System.Text" % 
```

有任何想法吗？

编辑

服务器上的 .Net 版本 - Microsoft .NET Framework 版本：2.0

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T12:50:02.340

假设它不是简单的大写/小写拼写错误，因为您在代码片段中正确输入了它。

去你的项目。右键单击-> 属性并检查您所针对的 .NET Framework 版本。该`var`关键字仅在 C# 3.0 及更高版本中可用。

其他一些事情要检查。检查 web.config 中的编译器版本（如果已设置）。请参阅此问题：[升级到 Visual Studio 2010 后使用“var”时出错](https://stackoverflow.com/questions/3086898/error-using-var-after-upgrading-to-visual-studio-2010)

还要检查您在 IIS/应用程序池下使用的 ASP.NET 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:06:27.810

您要么需要切换到使用 C# 3.0 和 .NET Framework 3.5，要么需要停止使用`var`关键字并指定正确的类型，例如：

```
using (SqlConnection objConn = new SqlConnection(strConnection)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:50:05.717

您应该导入“系统”

```
<%@ Import Namespace="System" %> 
```

# java - JDBC有没有办法检测一列是否有默认值？

> ID：10635999
> 
> 赞同：0
> 
> 时间：2012-05-17T12:45:52.593
> 
> 标签：java, jdbc

假设在我的表中，我有一个使用默认值定义的列。例如

```
CREATE TABLE Orders ( 
...
Created DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL) 
```

反正有没有检测到这个列在 JDBC 中有默认值？我看到我可以检测到生成的主密钥，但我看不到如何找到这些信息？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:11:48.700

该[`DatabaseMetadata.getColumns(...)`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getColumns%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法返回`ResultSet`描述表列的 a。每个结果的`COLUMN_DEF`字段都会给出表中相应列的默认值（如果有）。